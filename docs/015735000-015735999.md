# StackOverflow 问答 15735000-15735999

# java - 会话过滤器使用

> ID：15735004
> 
> 赞同：1
> 
> 时间：2013-03-31T21:56:32.667
> 
> 标签：java, jsf, session

我需要做一个会话过滤器。*localhost:8080/Project/faces/index.xhtml*是登录名。如果登录成功，将重定向用户`app/conta.xhtml`，但如果用户直接在地址栏中写入 *localhost:8080/Project/faces/app/conta.xhtml*而未登录，则必须再次重定向*index.xhtml*。

![目录](https://i.stack.imgur.com/yBBaK.png)

app/* 中的所有页面必须在没有成功登录的情况下才能访问。

我的课`LoginFilter`在包里`filtro`

```
@WebFilter("/app/*")
public class LoginFilter implements Filter {

    @Override
    public void init(FilterConfig config) throws ServletException {
        // If you have any <init-param> in web.xml, then you could get them
        // here by config.getInitParameter("name") and assign it as field.
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        HttpSession session = request.getSession(false);

        if (session == null || session.getAttribute("idUsuario") == null) {
            response.sendRedirect(request.getContextPath() + "../index.xhtml"); // No logged-in user found, so redirect to login page.
        } else {
            chain.doFilter(req, res); // Logged-in user found, so just continue request.
        }
    }

    @Override
    public void destroy() {
        // If you have assigned any expensive resources as field of
        // this Filter class, then you could clean/close them here.
    }

} 
```

我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>

    <filter>
        <filter-name>Login Filter</filter-name>
        <filter-class>filtro.LoginFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>Login Filter</filter-name>
        <url-pattern>/app/*</url-pattern>
    </filter-mapping>
</web-app> 
```

尽管如此，我还是可以进入 /faces/app/conta.xhtml 并正常访问！

这是我的*登录验证*代码= validarLogin()

`BeanUsuarios.java`

```
@ManagedBean
@ViewScoped
public class BeanUsuarios {

    private Usuario usuario;

    public Usuario getUsuario() {
        return usuario;
    }

    public void setUsuario(Usuario usuario) {
        this.usuario = usuario;
    }

    @PostConstruct
    public void BeanUsuario(){
        if(getUsuario()==null){
            usuario = new Usuario();
        }
    }

    public void validarLogin(){
        UsuarioJpaController cUsuario = new UsuarioJpaController();
        cUsuario.getEntityManager().createNamedQuery("Usuario.findByLogin").setParameter("login", this.usuario.getLogin()).getSingleResult();

        if(usuario != null){
            if(usuario.getSenha().equals(this.usuario.getSenha())){
                FacesContext fc = FacesContext.getCurrentInstance();
                HttpSession session = (HttpSession) fc.getExternalContext().getSession(false);

                session.setAttribute("idUsuario", this.usuario.getId());

                try {               
                    FacesContext.getCurrentInstance()
                            .getExternalContext()
                            .redirect("app/conta.xhtml");
                } catch (IOException ex) {
                    Logger.getLogger(BeanUsuarios.class.getName()).log(Level.SEVERE, null, ex);
                }

            }else{

            }    
}
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:03:17.510

你有两个选择：

1.  将过滤器 URL 映射更改为，`/faces/app*`因为这就是您访问页面的方式。
2.  在 web.xml 文件中，去掉`/faces/*`servlet 映射并`*.xhtml`改为使用。这需要将您的欢迎文件更改为`index.xhtml`only。

IMO 我会使用选项 2，因为我不喜欢 Faces Servlet 将非 JSF 相关请求处理为 JavaScript、CSS 和图像文件。

# javascript - 如何用 html 元素包装字符串的一个区域？

> ID：15735005
> 
> 赞同：2
> 
> 时间：2013-03-31T21:56:36.120
> 
> 标签：javascript, jquery

如果我有以下内容：

400 美元/周

800 美元/周

随着 jQuery 可用，将“/week”部分包装在 html 元素中的理想方法是`<span class='small'>/week</span>`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T22:01:21.743

你可以这样做：

```
var data = $("#text").html();
$("#text").html(data.replace(/\/\s*week/g, '<span class="small">/week</span>')); 
```

工作示例：http: [//jsfiddle.net/jfriend00/TKa8D/](http://jsfiddle.net/jfriend00/TKa8D/)

注意：替换 HTML 将撤消在该 HTML 中分配的任何事件处理程序，因此您通常应该在可能的最低级别替换 HTML，这样您就不会替换已经具有事件处理程序的元素。如果您分享您的特定 HTML，我们可以为最简单的方法提供更具体的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:10:28.563

这并不漂亮，但唯一安全的方法（保留事件处理程序等）是遍历树，在必要时拆分文本节点。不幸的是，jQuery 不喜欢使用文本节点。它非常以元素为中心。

您可以首先定义一个辅助函数来执行递归：

```
function recurse(node, fn) {
    if(node.nodeType === Node.TEXT_NODE) {
        fn(node);
    }else if(node.nodeType === Node.ELEMENT_NODE) {
        var children = Array.prototype.slice.call(node.childNodes);
        for(var i = 0, l = children.length; i < l; i++) {
            recurse(children[i], fn);
        }
    }
} 
```

它遍历树中的每个节点，为每个文本节点调用一个给定的函数。`span`然后我们可以使用该函数来拆分文本节点并在中间插入 a ：

```
recurse(document.documentElement, function(node) {
    var re = /(\$\d+)(\/week)/;
    var match;
    while(match = re.exec(node.nodeValue)) {
        var before = document.createTextNode(node.nodeValue.substring(0, match.index + match[1].length));
        node.parentNode.insertBefore(before, node);
        var span = document.createElement('span');
        span.className = 'week';
        span.textContent = node.nodeValue.substring(match.index + match[1].length, match.index + match[0].length);
        node.parentNode.insertBefore(span, node);
        node.nodeValue = node.nodeValue.substring(match.index + match[0].length);
    }
}); 
```

**[尝试一下。](http://jsfiddle.net/uDg6V/)**

# php - Ajax & PHP email with JSON return

> ID：15735010
> 
> 赞同：0
> 
> 时间：2013-03-31T21:56:56.613
> 
> 标签：php, javascript, ajax, json, email

I have a simple contact form. I got the invalid email and fill all the fields error messages correctly, but I don't get the success message. Hence it's sending the email twice without giving any returning success messages (I just click once, I'm sure about that).

The JS part:

```
<script language="javascript" type="text/javascript" >
    $(function(){
        $("#ContactForm").submit(function(){
            $("#submitf").value='Sending...';

            $.post("send.php", $("#ContactForm").serialize(),
            function(data){
                if(data.frm_check == 'error'){

                    $("#message_post").html("<div class='errorMessage'>Error: " + data.msg + "!</div>");
                    document.ContactForm.submitf.value='Send Again >>';
                    document.ContactForm.submitf.disabled=false;
                } else if(data.frm_check == 'done') {
                    $("#message_post").html("<div class='successMessage'>Thanks, " + data.msg + "!</div>");
                }
            }, "json");

            return false;
        });
    });
 </script> 
```

The PHP part:

```
$return_arr = array();
$email = $_POST["email"];   
$message= $_POST["message"];    
$name= xss_protect(sacarXss($_POST["name"]));   
if(!empty($email) && !empty($name) && !empty($message)) {
    if(isValidEmail($email)){   
        $return_arr["frm_check"] = 'done';
        $return_arr["msg"] = "Success";             
        send_mail($email, $name, $message);
    } 
    else{
        $return_arr["frm_check"] = 'error';
        $return_arr["msg"] = "Invalid email";        
    }

} else {                
    $return_arr["frm_check"] = 'error';
    $return_arr["msg"] = "Fill all the fields.";
}
echo json_encode($return_arr); ?> 
```

The HTML part:

```
<form method="post"  id="ContactForm">
    <div class="element">
        <input type="text" name="name" class="text" placeholder="name" /><br />
        <input type="text" name="email" placeholder="email" class="text" /><br />
        <textarea name="message" class="textarea" rows="3" placeholder="message"></textarea><br />
        <input type="submit" name="submitf" id="submitf" value="send!"/>
    </div>
    <div id='message_post'></div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:27:18.443

我认为表单被发送两次到 php 脚本：通过 javascript 和表单的提交按钮。如果您将提交按钮的类型从“提交”更改为“按钮”，则表单将仅发送一次。

您必须解析 JSON 响应，因此 javascript 函数变为：

```
<script language="javascript" type="text/javascript" >
    $(function(){
        $("#ContactForm").submit(function(){
            $("#submitf").value='Sending...';

            $.post("send.php", $("#ContactForm").serialize(),
            function(data){
                data = jQuery.parseJSON(data);
                if(data['frm_check'] == 'error'){

                    $("#message_post").html("<div class='errorMessage'>Error: " + data['msg'] + "!</div>");
                    document.ContactForm.submitf.value='Send Again >>';
                    document.ContactForm.submitf.disabled=false;
                } else if(data['frm_check'] == 'done') {
                    $("#message_post").html("<div class='successMessage'>Thanks, " + data['msg'] + "!</div>");
                }
            }, "json");

            return false;
        });
    });
 </script> 
```

# c# - How to pass object as parameter in c#

> ID：15735011
> 
> 赞同：2
> 
> 时间：2013-03-31T21:57:03.033
> 
> 标签：c#, object, parameters

Sorry, I may be lacking in terminology, but my searches haven't provided any answer despite the trivial question. Here goes -

I have a superclass and wish to be able to create a new object of any of the subclasses with a method like the the following:

```
static void AddNewVehicle(string brand, string model, int year, int price)
{
    V.Add(new Car(brand, model, year, price));
} 
```

I imagined that I would be able to do it like this:

```
static void AddNewVehicle(object VehicleType, string brand, string model, int year, int price)
{
    V.Add(new VehicleType(brand, model, year, price));
} 
```

...but I'm getting the following error:

`"The type or namespace name 'VehicleType' could not be found (are you missing a using directive or an assembly reference?)"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:15:07.933

在您的场景中，您已指定`VehicleType`为使用 type 声明的变量的名称`object`。你不能像这样实例化对象。

如果您可以提供有关您的问题的更多信息，我将尝试提供更具体的答案。

例如，您可以向`Vehicle`名为的类添加一个新属性`VehicleType`，它的类型为`enum`.

或者，如果您在一个集合中需要多种类型的车辆，您可能希望实现`factory pattern`并`interfaces`用于处理集合。

**根据评论编辑：**

有多种方法可以做到这一点，所以我提到了迄今为​​止其他人没有提到的一种。它基于`reflection`. 基本上，您在程序集中搜索继承您的“超类”的类，如果它们的名称与提供的参数对应，则实例化它。
但是，我们可以通过使用一个名为`Activator`. 我们需要的只是包含所需类的程序集的名称及其名称。Activator 将为我们创建它的实例。

这是一个让您入门的示例：

```
public static SuperClass GetClass(string type)
{
   return (SuperClass)Activator.CreateInstance("someAssemblyName", "type");
} 
```

或来自 MSDN 的更多信息：http: [//msdn.microsoft.com/en-us/library/b4wc81dc.aspx](http://msdn.microsoft.com/en-us/library/b4wc81dc.aspx)

当然，您可以在任何进一步操作之前修改属性，可能是这样的：

```
public static SuperClass GetClass(string type, string brand, string model)
{
   SuperClass sc = (SuperClass)Activator.CreateInstance("someAssemblyName", "type");
   sc.Brand = brand;
   sc.Model = model;

   return sc;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:31:29.113

如果您要采用一种`Factory`方法，则将其用作工厂。一个静态类，为它构造东西。不多也不少。不要将状态放入该工厂以存储对象（列表`V`）。

然后是有点争议的静态方法

```
static void AddNewVehicle(object VehicleType, string brand, string model, int year, int price)
{
    V.Add(new VehicleType(brand, model, year, price));
} 
```

你想在这里做什么？您传递了一个名为 VehicleType 的对象，但您想在主体中构造一个新对象？

然后编译错误：

> > 找不到类型或命名空间名称“VehicleType”（您是否缺少 using 指令或程序集引用？）

这意味着您要么：

*   没有同名的课程`VehicleType`
*   没有包含声明`using`该类的命名空间的语句`VehicleType`
*   错过对声明您的项目的引用`VehicleType`。

（或以上任意组合）

* * *

关于您提供的代码示例的更多内容

假设您有这些类：

```
public class VehicleType 
{
     ... some properties, constructors and methods
}

public class Car : VehicleType
{
     ... some properties, constructors and methods
} 
```

然后你就可以创建一个生产新车的工厂类，比如

```
public static class VehicleFactory
{
    public static Vehicle CreateVehicle(...)
    {
        // conditional stuff that decides what kind of vehicle to construct
        if (...) 
        {
            return new Bicycle(...);
        }
        else if (...) 
        {
            return new Car(...);
        }
        else
        {
            throw new UnsupportedVehicleException();
        }
    }
} 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T22:41:04.897

在 C# 中，类型信息通常以两种方式之一传递：类的实例[Type](http://msdn.microsoft.com/en-us/library/system.type.aspx)或作为泛型类型参数。后者为您提供[静态类型检查和约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)。

其他答案中还提到了其他策略，但您可能会发现它们既麻烦又不合适。

尝试这个：

```
class Vehicle
{
    static ICollection<Vehicle> V;

    string Brand;
    string Model;
    int Year;
    int Price;

    static void AddNewVehicle<T>(string brand, string model, int year, int price)
        where T : Vehicle, new()
    {
        V.Add(new T() {
            Brand = brand,
            Model = model,
            Year = year,
            Price = price
        });
    }
} 
```

请注意：

*   车辆具有以下字段：品牌、型号、年份和价格
*   Vehicle.AddNewVehicle 上的通用参数
*   如果您希望 Vehicle 的子类以不同方式处理参数，请将这些字段转换为虚拟/抽象属性并根据需要覆盖它们的设置/获取行为。

# c++ - A better array shifting algorithm?

> ID：15735016
> 
> 赞同：2
> 
> 时间：2013-03-31T21:57:20.950
> 
> 标签：c++, arrays, malloc, free, memmove

I have an assignment that requires me to sort a heap based C style array of names as they're being read rather than reading them all and then sorting. This involves a lot of shifting the contents of the array by one to allow new names to be inserted. I'm using the code below but it's extremely slow. Is there anything else I could be doing to optimize it without changing the type of storage?

```
//the data member
string *_storedNames = new string[4000];

//together boundary and index define the range of elements to the right by one
for(int k = p_boundary - 1;k > index;k--)
   _storedNames[k]=_storedNames[k - 1]; 
```

EDIT2: As suggested by Cartroo I'm attempting to use memmove with the dynamic data that uses malloc. Currently this shifts the data correctly but once again fails in the deallocation process. Am I missing something?

```
int numberOfStrings = 10, MAX_STRING_SIZE = 32;

char **array = (char **)malloc(numberOfStrings);

for(int i = 0; i < numberOfStrings; i++)
    array[i] = (char *)malloc(MAX_STRING_SIZE);

array[0] = "hello world",array[2] = "sample";   

    //the range of data to move
int index = 1, boundary = 4;
int sizeToMove = (boundary - index) * sizeof(MAX_STRING_SIZE);

memcpy(&array[index + 1], &array[index], sizeToMove);

free(array); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:32:33.770

如果您对方法进行了最小的更改，则可以使用该[`memmove()`](http://en.cppreference.com/w/c/string/byte/memmove)功能，这可能比您自己的手动版本更快。您不能[`memcpy()`](http://en.cppreference.com/w/c/string/byte/memcpy)按照一位评论者的建议使用，因为不允许内存区域重叠（如果重叠，则行为未定义）。

如果不更改存储类型或算法，您将无能为力。但是，如果您更改为使用链表，则操作会变得更加高效，尽管您将进行更多的内存分配。如果分配确实是一个问题（除非您使用的是有限的嵌入式系统，否则可能不是），那么[池分配器](http://en.wikipedia.org/wiki/Memory_pool)或类似方法可能会有所帮助。

**编辑：** *重新阅读您的问题，我猜您实际上并没有使用 Heapsort，您只是表示您的数组是在堆上分配的（即 using `malloc()`）并且您正在执行简单的[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)。在这种情况下，下面的信息对您没有太大用处，尽管您应该知道插入排序与批量插入相比效率非常低，然后使用更好的排序算法（例如[，](http://en.wikipedia.org/wiki/Quicksort)您可以使用标准库[`qsort()`](http://en.cppreference.com/w/c/algorithm/qsort)函数实现的快速排序） ）。如果您只需要最低（或最高）的项目而不是完整的排序顺序，那么 Heapsort 仍然是有用的阅读。*

如果您使用的是标准[堆排序](http://en.wikipedia.org/wiki/Heapsort)，那么您根本不需要此操作 - 项目被附加到数组的末尾，然后使用“heapify”操作将它们交换到堆中的正确位置。每次交换只需要一个临时变量来交换两个项目 - 它不需要像您的代码片段中那样洗牌。它确实要求数组中的所有内容都具有相同的大小（固定大小的就地字符串，或者更有可能是指针），但是您的代码似乎已经假设无论如何（并且在标准`char`数组中使用可变长度的字符串会做一件很奇怪的事情）。

请注意，严格来说，Heapsort 在二叉树上运行。由于您正在处理一个数组，我假设您正在使用一个连续数组的实现，其中索引处的节点的子节点`n`分别存储在索引`2n`中`2n+1`。如果不是这种情况，或者您根本没有使用 Heapsort，您应该更详细地解释您正在尝试做什么以获得更有帮助的答案。

**编辑：** *以下是对您上面更新的代码的回应。*

您在释放期间看到问题的主要原因是如果您践踏了一些内存 - 换句话说，您正在复制超出分配区域大小的内容。这是一件非常糟糕的事情，因为您覆盖了系统用于跟踪您的分配的值并导致各种问题，这些问题通常会导致您的程序崩溃。

首先，您似乎对内存分配和释放的性质有些困惑。你分配一个数组`char*`，它本身就很好。然后为每个字符串分配数组`char`，这也很好。但是，您只需调用`free()`初始数组 - 这还不够。需要调用 to`free()`以匹配对 的每次调用`malloc()`，因此您需要释放分配的每个字符串，*然后*释放初始数组。

其次，您设置`sizeToMove`为 的倍数`sizeof(MAX_STRING_SIZE)`，这几乎肯定不是您想要的。这是用于存储`MAX_STRING_SIZE`常量的变量的大小。相反，你想要`sizeof(char*)`. 在某些平台上，这些可能是相同的，在这种情况下，一切仍然有效，但不能保证这一点。例如，我希望它可以在 32 位平台上工作（`int`它们`char*`的大小相同），但不能在 64 位平台上工作（它们不是）。

第三，您不能只将字符串常量（例如`"hello world"`）分配给已分配的块——您在这里所做的是*替换*指针。您需要使用类似`strncpy()`或`memcpy()`将字符串复制到分配的块中。我建议`snprintf()`为方便起见，因为`strncpy()`它的问题是它不能保证终止结果，但这取决于你。

第四，你仍然在使用`memcpy()`而不是`memmove()`在移动物品。

最后，我刚刚看到您的评论，您必须使用`new`and `delete`。这些没有等价物`realloc()`，但如果一切都提前知道，那就没关系了。看起来你想要做的是这样的：

```
bool addItem(const char *item, char *list[], size_t listSize, size_t listMaxSize)
{
    // Check if list is full.
    if (listSize >= listMaxSize) {
        return false;
    }
    // Insert item inside list.
    for (unsigned int i = 0; i < listSize; ++i) {
        if (strcmp(list[i], item) > 0) {
            memmove(list + i + 1, list + i, sizeof(char*) * (listSize - i));
            list[i] = item;
            return true;
        }
    }
    // Append item to list.
    list[listSize] = item;
    return true;
} 
```

我还没有编译和检查过，所以要注意一个错误之类的错误，但希望你能明白。无论您使用`malloc()`and`free()`还是`new`and ，此函数都应该可以工作`delete`，但它假定您已经将字符串复制`item`到您将保留的已分配缓冲区中，因为它当然只存储一个指针。

请记住，您当然需要`listSize`在此函数之外更新自己 - 这只是为您将一个项目插入数组中的正确点。如果函数返回`true`，则将您的副本增加`listSize`1 - 如果它返回，`false`则说明您没有分配足够的内存，因此您的项目没有被添加。

另请注意，在 C 和 C++ 中，对于数组`list`的语法`&list[i]`和语法是完全等价的 -如果您发现它更容易理解，请`list + i`在调用中使用第一个。`memmove()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:49:13.640

为了最大限度地减少移动数组的成本，您可以将其设为指向字符串的指针数组：

```
string **_storedNames = new string*[4000]; 
```

*现在*您可以使用`memmove`（尽管您现在可能会发现逐个元素的复制已经足够快了）。但是您必须自己管理各个字符串的分配和删除，这有点容易出错。

其他建议`memmove`在您的原始数组上使用的海报似乎没有注意到每个数组元素都是一个`string`（不是一个`string*`！）。您不能使用`memmove`或`memcpy`在这样的课程上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:28:58.777

我认为您正在寻找的是堆排序：[http ://en.wikipedia.org/wiki/Heapsort#Pseudocode](http://en.wikipedia.org/wiki/Heapsort#Pseudocode)

数组是实现二叉搜索树（即左子节点小于当前节点而右子节点大于当前节点的树）的常用方法。

Heapsort 对指定长度的数组进行排序。在您的情况下，由于数组的大小将“在线”增加，您需要做的就是调用更改传递给 heapsort 的输入大小（即将考虑的元素数量增加 1）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T23:31:17.003

由于您的数组已排序并且您不能使用任何其他数据结构，您最好的选择可能是执行二进制搜索，然后将数组向上移动一个以在插入位置释放空间，然后在该位置插入新元素.

# php - SQL inner joins not displaying data

> ID：15735019
> 
> 赞同：0
> 
> 时间：2013-03-31T21:57:28.763
> 
> 标签：php, mysql, join

I am new to php so please could someone take a look at this php code and explain/edit why the inner joins do not display the information required in query2.

```
<?php
{
    mysql_connect("localhost" , "" , "") or die (mysql_error());
    mysql_select_db("") or die(mysql_error());

    $pid=intval($_SESSION["Patient_id"]); $query = "SELECT Appointment_id, Doctor_id, Patient_id, Appointment_time, Appointment_date FROM Appointment where Patient_id=$pid";
    //executes query on the database
    $result = mysql_query ($query) or die ("didn't query");
    //this selects the results as rows

    $num = mysql_num_rows ($result);    
    //if there is only 1 result returned than the data is ok 
    if ($num == 1) {}
    {
        $row=mysql_fetch_array($result);
        $_SESSION['Appointment_date'] = $row['Appointment_date'];
        $_SESSION['Appointment_time'] = $row['Appointment_time'];

    }

   $query2 = "SELECT Doctor_id FROM Appointment INNER JOIN Doctor ON Appointment.Doctor_id=Doctor.Doctor_id";
    //executes query on the database
    $result = mysql_query ($query) or die ("didn't query");

    //this selects the results as rows
    $num = mysql_num_rows ($result);    
    //if there is only 1 result returned than the data is ok 
    if ($num == 1) {}

    {
        $row=mysql_fetch_array($result);
        $_SESSION['Doctor_id'] = $row['Doctor_id'];
        $_SESSION['Name'] = $row['Name'];
        $_SESSION['Room'] = $row['Room'];

    }

}
?> 
```

I am requesting Doctor_id, Name and Room from the Doctor table to display the information in the Appointment table

![enter image description here](https://i.stack.imgur.com/iRRil.jpg)

The tables are linked together. Doctor_id is the primary key in the Doctor table and the foreign key in the Appointment table.

![enter image description here](https://i.stack.imgur.com/Et4gV.jpg)

I need to display the Name and Room in the Appointment table.

appointment.php code

```
<!DOCTYPE html>
<?php
session_start();
?>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <title>
        </title>
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <link rel="stylesheet" href="my.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
        </script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js">
        </script>
        <script src="my.js">
        </script>
        <!-- User-generated css -->
        <style>
        </style>
        <!-- User-generated js -->
        <script>
            try {

    $(function() {

    });

  } catch (error) {
    console.error("Your javascript has an error: " + error);
  }
        </script>
     </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="a" data-role="header">
            <a data-role="button" data-theme="d" href="login.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                    Back
                </a>
                <a data-role="button" href="index.html" data-icon="home" data-iconpos="right" data-theme="d"class="ui-btn-right">
                 Home  
                </a>
                <h3>
                    Book appointment
                </h3>
           </div>

           <div data-role="content">
                <h3>
                    Select date/time:
                </h3>
                <br />
<?php
{
    mysql_connect("localhost" , "" , "") or die (mysql_error());
    mysql_select_db("") or die(mysql_error());

    $pid=intval($_SESSION["Patient_id"]); $query = "SELECT Appointment_id, Doctor_id, Patient_id, Appointment_time, Appointment_date FROM Appointment where Patient_id=$pid";

    //executes query on the database
    $result = mysql_query ($query) or die ("didn't query");
    //this selects the results as rows

    $num = mysql_num_rows ($result);    
    //if there is only 1 result returned than the data is ok 
    if ($num == 1) {}
    {
        $row=mysql_fetch_array($result);
        $_SESSION['Appointment_date'] = $row['Appointment_date'];
        $_SESSION['Appointment_time'] = $row['Appointment_time'];
    }
        $query2 = "SELECT t1.*, t2.Name, t2.Room FROM Appointment AS t1
        INNER JOIN Doctor AS t2
        ON t1.Doctor_id=t2.Doctor_id";
        //executes query on the database
        $result = mysql_query ($query) or die ("didn't query");

        //this selects the results as rows
        $num = mysql_num_rows ($result);    
        //if there is only 1 result returned than the data is ok 
        if ($num == 1) {
            $row = mysql_fetch_array($result, MYSQL_ASSOC);
            print_r($row);['Doctor_id'] = $row['Doctor_id'];
            print_r($row);['Name'] = $row['Name'];
            print_r($row);['Room'] = $row['Room'];
        } else {
          // we have more than one row
        }
}
?>  

        <strong>Dates available</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Select date--</option>
        <option value="1"><?php echo $_SESSION['Appointment_date'];?></option>
        </select>

        <br />
        <br />

        <strong>Times available</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Select time--</option>
        <option value="2"><?php echo $_SESSION['Appointment_time'];?></option>>
        </select>

        <br />
        <br />

            <strong>Doctor Name</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Name--</option>
        <option value="2"><?php echo $_SESSION['Name'];?></option>>
        </select>

        <br />
        <br />

            <strong>Doctor Room</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Room--</option>
        <option value="2"><?php echo $_SESSION['Room'];?></option>>
        </select>

        <br />
        <br />

                <label for="textarea1">
                Message GP
                </label>
                <textarea name="" id="textarea1" placeholder="">
                </textarea>

             </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:07:26.127

```
ERROR 1052 (23000): Column 'doctor_id' in field list is ambiguous. 
```

Your query2 should say:

```
"SELECT Doctor.Doctor_id FROM Appointment INNER JOIN Doctor ON Appointment.Doctor_id=Doctor.Doctor_id"; 
```

or

```
"SELECT Appointment.Doctor_id FROM Appointment INNER JOIN Doctor ON Appointment.Doctor_id=Doctor.Doctor_id"; 
```

depending on what you want to query.

Best,

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:22:07.950

尝试这个：

```
$query2 = "SELECT t1.*, t2.Name, t2.Room FROM Appointment AS t1
INNER JOIN Doctor AS t2
ON t1.Doctor_id=t2.Doctor_id";
//executes query on the database
$result = mysql_query ($query) or die ("didn't query");

//this selects the results as rows
$num = mysql_num_rows ($result);    
//if there is only 1 result returned than the data is ok 
if ($num == 1) {
    $row = mysql_fetch_array($result, MYSQL_ASSOC);
    $_SESSION['Doctor_id'] = $row['Doctor_id'];
    $_SESSION['Name'] = $row['Name'];
    $_SESSION['Room'] = $row['Room'];
} else {
  // we have more than one row
} 
```

我不明白当你不能使用 print_r 或 var_dump 时你如何编码......这是你应该用来调试的代码：

```
//this selects the results as rows
    $num = mysql_num_rows ($result);    
    //if there is only 1 result returned than the data is ok 
    if ($num == 1) {
        $row = mysql_fetch_array($result, MYSQL_ASSOC);
        print_r($row);
    } else {
      // we have more than one row
    } 
```

如果您有一个带有键 ['Room'] 的 $row，则问题出在 PHP 中

# c++ - 在 C++ 中的标记之前期望主表达式

> ID：15735021
> 
> 赞同：1
> 
> 时间：2013-03-31T21:57:39.327
> 
> 标签：c++

这是问题所在：

在控制台.cpp

```
void Console::PrintMedicine(Medicine* m){
    int ID = Medicine.getID(); //here i get the error expecting primary expression before "." token, it doesn't work with -> either
    cout<<"The Medicine's ID is: ";
    cin>>ID;
} 
```

医学类：

什么是私人的：

```
private:
    int ID;
    std::string nume;
    double concentratie;
    int cantitate; 
```

什么是公开的

```
public:
    Medicine();  //implcit constructor
    Medicine(int ID, std::string nume, double concentratie, int cantitate);//constructor with parameteres
    ~Medicine(); //destructor 
```

//获取ID函数

```
 const int& Medicine::getID() const{
    return this->ID;
} 
```

//getName函数

```
const std::string& Medicine::getName() const{
    return this->nume;
} 
```

//获取浓度函数

```
const double& Medicine::getConcentration() const{ 
    return this->concentratie;

} 
```

//getQuantity 函数

```
const int& Medicine::getQuantity() const{
    return this->cantitate;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:59:31.137

表达式`Medicine.getID()`不正确。`Medicine`是一个*类*的名称，你不能使用点运算符来访问它的成员。首先，您需要一个要访问其成员的*实例*；`Medicine`其次，如果您有*指向*该实例的指针，则需要使用箭头运算符 ( `operator ->`)。

因此，它应该是：

```
void Console::PrintMedicine(Medicine* m){
    int ID = m->getID();
//           ^^^

// ...
} 
```

# c# - LINQ to Entities 无法识别方法“System.DateTime ConvertTimeFromUtc(System.DateTime, System.TimeZoneInfo)”方法

> ID：15735022
> 
> 赞同：4
> 
> 时间：2013-03-31T21:57:52.670
> 
> 标签：c#, linq, datetime, exception-handling, linq-to-entities

我有一组从数据库中提取的错误。时间存储为 UTC，但我想将其转换为 CST：

```
var errors = _errorsRepository.Errors.
    Select(e => new ErrorViewModel
    {
        ErrorId = e.ErrorId,
        Application = e.Application,
        Host = e.Host,
        Type = e.Type,
        Source = e.Source,
        Message = e.Message,
        User = e.User,
        StatusCode = e.StatusCode,
        TimeUtc = TimeZoneInfo.ConvertTimeFromUtc(
            e.TimeUtc, TimeZoneInfo.FindSystemTimeZoneById("Central Standard Time")),
        Sequence = e.Sequence,
        AllXml = e.AllXml
     }); 
```

但我收到了这个错误：

> LINQ to Entities 无法识别方法 'System.DateTime ConvertTimeFromUtc(System.DateTime, System.TimeZoneInfo)' 方法，并且此方法无法转换为存储表达式

有谁知道我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T22:02:00.473

LINQ to Entities 将尝试将您的 LINQ 查询转换为 SQL 查询。由于您编写的部分内容无法转换为 SQL，因此您会收到此错误。

您可以通过首先使用 ToList() 将查询转换为内存对象，然后使用 LINQ to Objects 来获得所需的结果来解决此问题：

```
var errors = _errorsRepository.Errors.ToList().
Select(e => new ErrorViewModel
{
    ErrorId = e.ErrorId,
    Application = e.Application,
    Host = e.Host,
    Type = e.Type,
    Source = e.Source,
    Message = e.Message,
    User = e.User,
    StatusCode = e.StatusCode,
    TimeUtc = TimeZoneInfo.ConvertTimeFromUtc(
        e.TimeUtc, TimeZoneInfo.FindSystemTimeZoneById("Central Standard Time")),
    Sequence = e.Sequence,
    AllXml = e.AllXml
 }); 
```

请注意，这将首先将 _errorsRepository 中的所有错误放入内存。在这种情况下，看起来这对你来说并不重要，因为无论如何你都会得到它们。

# java - Need to output all prime numbers

> ID：15735023
> 
> 赞同：-2
> 
> 时间：2013-03-31T21:57:56.667
> 
> 标签：java

for the example 60 the answer should be 2 2 3 5 but it only comes up with 2 3 5\.

```
import java.util.Scanner;

public class PrimeFactor {

    public static void main(String[] args) {

        System.out.print("Enter a positive number: ");

        Scanner scanner = new Scanner (System.in);

        int number = scanner.nextInt();

        int count;

        for (int i = 2; i<=(number); i++) {
            count = 0;

            while (number % i == 0) {
                number /= i;
                count++;
                    }

            if (count == 0) {
                    continue;
            }
            System.out.print(i + " ");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:20:49.037

如果您想以不同的方式进行操作：

```
import java.util.*;
import java.lang.*;

class Main
{
        public static void main (String[] args) throws java.lang.Exception
        {
            System.out.print("Enter a positive number: ");
            Scanner scanner = new Scanner (System.in);

            int number = scanner.nextInt();

            int divisor = 2;
            while(number != 1) {
            if(number % divisor == 0) {
                System.out.println(divisor + " ");
                number /= divisor;
            }
            else {
                divisor++;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:13:48.310

问题是一旦它发现 60 可以被 2 整除，它就会继续将其除以 2（在这种情况下是两次）。

将 while 语句的最后一个括号放在 System.out.print 之后，它可以工作：

```
public static void main(String[] args) {

        System.out.print("Enter a positive number: ");

        Scanner scanner = new Scanner (System.in);

        int number = scanner.nextInt();

        int count;

        for (int i = 2; i<=(number); i++) {
            count = 0;

            while (number % i == 0) {
                number /= i;
                count++;

            if (count == 0) {
                    continue;
            }
            System.out.print(i + " ");
            }
        }
    } 
```

# excel - Why can't I create this chart in excel (using powershell)

> ID：15735026
> 
> 赞同：0
> 
> 时间：2013-03-31T21:58:13.383
> 
> 标签：excel, powershell, excel-2003

Trying to add a chart in excel using powershell. I used the following link for guidance:

[http://theolddogscriptingblog.wordpress.com/2010/07/03/how-do-i-change-the-size-or-position-of-my-chart-with-powershell/](http://theolddogscriptingblog.wordpress.com/2010/07/03/how-do-i-change-the-size-or-position-of-my-chart-with-powershell/)

Here is the code:

```
# <---- Start Code ---------------------------------------> 
$xl = New-Object -comobject Excel.Application
# Show Excel
$xl.visible = $true
$xl.DisplayAlerts = $False
# Open a workbook
$wb = $xl.workbooks.add() 
#Create Worksheets
$ws = $wb.Worksheets.Item(1) # Opens Excel and 3 empty Worksheets
1..8 | % { $ws.Cells.Item(1,$_) = $_ } # adds some data
1..8 | % { $ws.Cells.Item(2,$_) = 9-$_ } # adds some data
$range = $ws.range("a${xrow}:h$yrow") # sets the Data range we want to chart
# create and assign the chart to a variable
#$ch = $xl.charts.add() # This will open a new sheet
$ch = $ws.shapes.addChart().chart # This will put the Chart in the selected WorkSheet
$ch.chartType = 58
$ch.setSourceData($range)
$RngToCover = $ws.Range("D5:J19") # This is where we want the chart
$ChtOb = $ch.Parent # This selects the current Chart
$ChtOb.Top = $RngToCover.Top # This moves it up to row 5
$ChtOb.Left = $RngToCover.Left # and to column D 
$ChtOb.Height = $RngToCover.Height # resize This sets the height of your chart to Rows 5 - 19
$ChtOb.Width = $RngToCover.Width # resize This sets the width to Columns D - J
<------------- End Code --------------------------------------> 
```

This works on one machine I have which uses Excel 2010, but on another machine using Excel 2003 it fails with the following message:

"Method invocation failed because [System.__ComObject] doesn't contain a method named 'addchart'."

Is this a limitation of the version of Excel I'm using? Using powershell, how can I add a chart within a worksheet in Excel 2003?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:27:55.893

根据[文档](http://msdn.microsoft.com/en-us/library/office/bb238877%28v=office.12%29.aspx)，该方法是在 Excel 2007 中添加的，因此在 Excel 2003 中不可用。尝试在 Excel 2003 中将图表创建记录为宏并将结果转换为 PowerShell。你可能会得到这样的东西：

```
$chart = $xl.Charts.Add
$chart.ChartType = ...
$chart.SetSourceData $xl.Sheets(1).Range(...), ...
$chart.Location ... 
```

# python - 计算第一个三角形数以在 python 中有超过 500 个除数

> ID：15735028
> 
> 赞同：7
> 
> 时间：2013-03-31T21:58:32.940
> 
> 标签：python, performance, math

我正在尝试解决 Project Euler 的第 12 个问题。我可以在将近 4 分钟内计算出超过 500 个除数的数字。我怎样才能让它更快？这是尝试；

```
import time

def main():
    memo={0:0,1:1}
    i=2
    n=200
    while(1):
        if len(getD(getT(i)))>n:
            break
        i+=1
    print(getT(i))

#returns the nth triangle number
def getT(n):
    if not n in memo:
        memo[n]=n+getT(n-1)
    return memo[n]

#returns the list of the divisors
def getD(n):
    divisors=[n]
    for i in xrange(1,int((n/2)+1)):
        if (n/float(i))%1==0:
            divisors.append(i)
    return divisors

startTime=time.time()
main()
print(time.time()-startTime) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T03:24:23.643

您不需要数组来存储三角形数字。您可以使用单个 int，因为您只检查一个值。此外，使用三角形数公式可能会有所帮助：`n*(n+1)/2`在哪里找到第`n`th 个三角形数。

`getD`也只需要返回一个数字，因为您只是在寻找 500 个除数，而不是除数的值。

但是，您真正的问题在于`n/2`for 循环中。通过检查因子对，您可以使用`sqrt(n)`. 所以只检查高达`sqrt(n)`. 如果您检查到`n/2`，您会得到大量浪费的测试（以百万计）。

因此，您要执行以下操作（`n`是查找除数的整数，`d`可能是除数）：

*   确保`n/d`没有余数。
*   确定是在除数上加 1 还是 2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T23:17:11.860

使用装饰器（由[activestate recipes](http://code.activestate.com/recipes/578231-probably-the-fastest-memoization-decorator-in-the-/)提供）保存先前计算的值，并使用列表推导生成除数：

```
def memodict(f):
    """ Memoization decorator for a function taking a single argument """
    class memodict(dict):
        def __missing__(self, key):
            ret = self[key] = f(key)
            return ret 
    return memodict().__getitem__

@memodict
def trinumdiv(n):
    '''Return the number of divisors of the n-th triangle number'''
    numbers = range(1,n+1)
    total = sum(numbers)
    return len([j for j in range(1,total+1) if total % j == 0])

def main():
    nums = range(100000)
    for n in nums:
        if trinumdiv(n) > 200:
           print n
           break 
```

结果：

```
In [1]: %cpaste
Pasting code; enter '--' alone on the line to stop or use Ctrl-D.
:def main():
:       nums = range(10000)
:       for n in nums:
:               if trinumdiv(n) > 100:
:                  print 'Found:', n
:                  break
:
:startTime=time.time()
:main()
:print(time.time()-startTime)
:--
Found: 384
1.34229898453 
```

和

```
In [2]: %cpaste
Pasting code; enter '--' alone on the line to stop or use Ctrl-D.
:def main():
:       nums = range(10000)
:       for n in nums:
:               if trinumdiv(n) > 200:
:                  print 'Found:', n
:                  break
:
:startTime=time.time()
:main()
:print(time.time()-startTime)
:--
Found: 2015
220.681169033 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-15T18:43:02.443

几点评论。

正如 Quincunx 所写，您只需要检查从 1..sqrt(n) 开始的整数范围，这将转化为类似 this的内容`for i in xrange(1, sqrt(n) + 1): ...`。仅此优化就可以大大加快速度。

您可以使用三角形数公式（直到现在我才知道，谢谢 Quincunx），或者您可以使用另一种方法来查找三角形数，而不是递归和字典查找。您只需要序列中的下一个数字，因此保存它没有意义。函数调用在 Python 中涉及大量开销，因此通常不建议将递归用于数字运算。另外，为什么演员表`float`，我不太明白？

我看到您已经在使用`xrange`而不是`range`构建`int`流。我假设您知道这`xrange`更快，因为它是作为生成器函数实现的。你也可以那样做。这也使事情变得更加顺利。

我试图做到这一点，使用生成器，下面的代码在我的机器（YMMV）上找到约 16 秒内的第 500 个三角形数。但我还使用了一个巧妙的技巧来找到除数，即[二次筛](http://en.wikipedia.org/wiki/Quadratic_sieve)。

这是我的代码：

```
def triangle_num_generator():
    """ return the next triangle number on each call
        Nth triangle number is defined as SUM([1...N]) """
    n = 1
    s = 0
    while 1:
        s += n
        n += 1
        yield s

def triangle_num_naive(n):
    """ return the nth triangle number using the triangle generator """
    tgen = triangle_num_generator()
    ret = 0
    for i in range(n):
        ret = tgen.next()
    return ret

def divisor_gen(n):
    """ finds divisors by using a quadrativ sieve """
    divisors = []
    # search from 1..sqrt(n)
    for i in xrange(1, int(n**0.5) + 1):
        if n % i is 0:
            yield i
            if i is not n / i:
                divisors.insert(0, n / i)
    for div in divisors:
        yield div

def divisors(n):
    return [d for d in divisor_gen(n)]

num_divs = 0
i = 1
while num_divs < 500:
    i += 1
    tnum = triangle_num_naive(i)
    divs = divisors(tnum)
    num_divs = len(divs)

print tnum # 76576500 
```

在我简陋的机器上运行它会产生以下输出：

```
morten@laptop:~/documents/project_euler$ time python pr012.py 
76576500

real    0m16.584s
user    0m16.521s
sys     0m0.016s 
```

使用三角形公式而不是天真的方法：

```
real    0m3.437s
user    0m3.424s
sys     0m0.000s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-08T16:25:25.297

我为同一任务编写了代码。它相当快。我使用了一种非常快速的因子查找算法来查找数字的因子。我也曾经`(n^2 + n)/2`找到三角形数。这是代码：

```
from functools import reduce
import time
start = time.time()
n = 1
list_divs = []
while len(list_divs) < 500:
    tri_n = (n*n+n)/2 # Generates the triangle number T(n)
    list_divs = list(set(reduce(list.__add__,([i, int(tri_n//i)] for i in range(1, int(pow(tri_n, 0.5) + 1)) if tri_n % i == 0)))) # this is the factor generator for any number n
    n+=1
print(tri_n, time.time() - start) 
```

它在一台正常的计算机上在 15 秒内完成工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-03T06:21:35.683

这是我的答案，大约在 3 秒内解决。我认为可以通过跟踪除数或生成用作除数的素数列表来加快速度……但是 3 秒对我来说已经足够快了。

```
import time

def numdivisors(triangle):
  factors = 0
  for i in range(1, int((triangle ** 0.5)) + 1):
    if triangle % i == 0:
      factors += 1
  return factors * 2

def maxtriangledivisors(max):
  i = 1
  triangle = 0
  while i > 0:
    triangle += i
    if numdivisors(triangle) >= max:
      print 'it was found number', triangle,'triangle', i, 'with total of ', numdivisors(triangle), 'factors'
      return triangle
    i += 1

startTime=time.time()
maxtriangledivisors(500)
print(time.time()-startTime) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-06-29T17:36:50.193

这是该问题的另一种解决方案。在此我使用埃拉托色尼筛法找到素数，然后进行素数分解。应用以下公式计算一个数的因数：总因数=(n+1)*(m+1).....

其中数字=2^n*3^n.......

我的最佳时间是 1.9 秒。

```
from time import time
t=time()

a=[0]*100
c=0
for i in range(2,100):
    if a[i]==0:
        for j in range(i*i,100,i):
            continue
        a[c]=i
        c=c+1
print(a)

n=1
ctr=0
while(ctr<=1000):
    ctr=1
    triang=n*(n+1)/2
    x=triang
    i=0
    n=n+1
    while(a[i]<=x):
        b=1
        while(x%a[i]==0):
            b=b+1
            x=x//a[i];
        i=i+1
        ctr=ctr*b
print(triang)
print("took time",time()-t) 
```

# java - 重复向 ArrayList 添加数据

> ID：15735031
> 
> 赞同：0
> 
> 时间：2013-03-31T21:58:45.253
> 
> 标签：java, string, arraylist

我正在尝试将 100 个（实际上更多）字符串添加到 ArrayList。我如何使用 for 循环之类的东西一次添加它们，而不是单独添加每个字符串。下面的代码是一个例子。

```
ArrayList<String> strings = new ArrayList();

String s1 = "Apple";
String s2 = "Banana";
String s3 = "Pear"

/*
    More Strings created until the 100th String
    .
    .
    .

*/

String s100 = "Kiwi";

//for loop to try add each String to List
for(int i=0; i<100; i++)
{
    //Code to add each String to the arraylist
} 
```

谁能确定我如何将每个字符串添加到列表中？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:19:41.970

根据您的评论，您正在处理自定义对象。无论您希望如何将数据从对象传输到您的`ArrayList`，最好使用集合。集合的类型将取决于您的对象数据的来源。由于数据是硬编码的，您可以使用数组。像这样的多个变量

```
String s1 = "Apple";
String s2 = "Banana";
String s3 = "Pear" 
```

变得

```
String[] fruitArray = {
   "Apple",
   "Banana",
   "Pear"
   ...
}; 
```

然后添加：

```
for (String fruit: fruitArray) {
   strings.add(fruit);
} 
```

正如我在上面的评论中已经说过的，一个更简洁的设计是使用一个单一`List<MyObject>`的来包含[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)`String`方法中的所有对象，并根据需要提取一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:43:44.020

好吧，您可以使用反射创建一个复杂的策略来获取给定类的所有变量并将它们添加到列表中；随后，您可以循环此列表并做任何您想做的事情。

但是，我认为它不会解决您的问题。事实上，您可能会遇到几个陷阱。

我会改变你解决问题的方法。创建一个静态列表并在那里添加您需要的任何内容（或单例，这取决于您要如何管理此列表）。一旦你有了对象列表，你就可以循环它。

干杯，

# php - 我想从“php”更改为“Javascript”的代码

> ID：15735032
> 
> 赞同：-4
> 
> 时间：2013-03-31T21:58:46.447
> 
> 标签：php

这是**PHP**代码

```
<?php
if (file_get_contents('http://www.anysite.com/anypath/anyfile.php')=="anydata") {
echo "OK";}
ELSE {
ECHO "Not OK";}
?> 
```

我想将其从“ **php** ”更改为“ **javascript** ”我尝试这样做但没有结果，因为“file_get_contents”功能，所以请帮忙？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:09:57.987

使用 jquery 你可以使用这个功能

```
function urlExists(url, callback){
  $.ajax({
    type: 'HEAD',
    url: url,
    success: function(){
      callback(true);
    },
    error: function() {
      callback(false);
    }
  });
} 
```

并在 js 中使用它：

```
var exists = urlExists(url);
if (exists) { 
   // do your staff here 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:10:53.757

FILE_GET_CONTENTS 在 JS 中并没有真正的类比，因为它是一种客户端脚本语言。您可以使用 location.href=' [http://www.anysite.com/anypath/anyfile.php](http://www.anysite.com/anypath/anyfile.php) '; 强制下载文件对话框，但这可能不是您想要完成的。为什么它无论如何都需要在 JavaScript 中？

# c++ - 为什么不需要手动释放向量？

> ID：15735035
> 
> 赞同：2
> 
> 时间：2013-03-31T21:58:54.417
> 
> 标签：c++, memory-management, memory-leaks

我刚刚学习 c++，来自对 C 和 Java 的理解。我不太明白为什么我编写的某些代码不会泄漏内存。这是代码：

```
// Foo.h
class Foo {
private:
  std::vector<int> v;
public:
  Foo();
  virtual ~Foo();
  void add_int(int);
}

// Foo.cpp
Foo::Foo(): v () {}
Foo::~Foo() {}

Foo::add_int(int x) {
  v.append(x);
} 
```

存储在其中的向量`v`显然在内部存储了一个指向堆分配内存的指针，需要释放它，但我从不释放它。然而，Valgrind 表示，使用此代码根本不会泄漏。我觉得理解为什么会有助于提高我对语言的理解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T22:02:27.430

秘诀在于 C++ 的析构函数。您编写了一个“什么都不做”（`~Foo`），但是在 C++ 中，成员变量会在类被销毁时自动销毁。

`vector`的析构函数简单地销毁每个包含的元素，然后释放其内部数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T22:01:52.120

您没有动态分配`v`with `new`，因此不需要`delete`它。

C++保证Foo实例销毁时成员变量自动销毁，vector自行整理事务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T22:02:29.290

当向量对象被销毁时，向量类的析构函数将释放内存（当你的 Foo 对象被销毁时，向量对象本身也将被销毁）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T00:19:37.777

因为您在堆栈上分配了向量，所以当 foo 超出范围时，它的所有堆栈变量都会自动调用其析构函数。当在向量上调用析构函数时，它将调用其中所有元素的析构函数。

如果您在堆上分配了向量，您将不得不手动对其进行删除，或者更好的是您可以使用智能指针自动为您处理。

# python - 在 Python 中为 OEIS 序列生成并输入值？

> ID：15735041
> 
> 赞同：0
> 
> 时间：2013-03-31T21:59:13.260
> 
> 标签：python, integer, sequence, enter, oeis

这对我来说是一个相当困难的挑战，因为我是 Python 新手。我将如何根据这个序列函数在 python 中编写程序：

[http://oeis.org/A063655](http://oeis.org/A063655)

并执行以下操作：

它询问序列的值并返回相应的数字。例如，对应于序列的第 10 个值的数字是 7。我希望能够对超过 300,000,000 的值执行此操作。

因此，最终产品将如下所示：

```
Enter a value: 4
[7] 
```

任何想法从哪里开始？我有一个框架来生成序列，其中 (x) 将放置一个数学方程或数字，但我不确定如何从这里开始或如何实现“输入值”部分：

```
import math

def my_deltas():
    while True:
        yield (x)
        yield (x)
def numbers(start, deltas, max):
    i=start
    while i<=max:
        yield i
        i+=next(deltas)
print(','.join(str(i) for i in numbers((x), my_deltas(),(x)))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:10:59.737

如果您想让您的计算机跟踪序列中超过 300,000,000 个元素，如果每个元素都是 4 字节整数，那么您将需要至少 300,000,000 * 4 字节或超过 1.1GB 的空间来存储所有值。我假设生成序列也需要很长时间，因此每次用户想要一个值时再次生成整个序列也不是最优的。我对您如何尝试准确解决此问题感到有些困惑。

从用户那里获取一个值很简单：你可以使用`val = input("What is your value? ")`where`val`是你存储它的变量。

编辑：

这种方式似乎是一种快速而简单的方法，每个值都有合理数量的步骤（除非该值是素数......但现在让这个概念保持简单）：您需要小于或的整数等于 n ( `start_int = n ** .5`) 的平方根，然后从那里测试下面的每个整数，看看它是否除以 n，首先转换`start_int`为一个整数`start_int = int(start_int)`（它给你 start_int 的下限），像这样：`while (n % start_int) != 0: start_int = start_int - 1`，减一，然后然后设置`b = start_int`。类似于 find 的东西`d`，但你必须弄清楚那部分。请注意，这`%`是模运算符（如果您不知道那是什么，可以阅读它，谷歌：'modulus python'），并且`**`是求幂。然后，您可以使用`return`陈述。您的函数看起来像这样（以`#`注释开头的行，python 跳过它们）：

```
def find_number(value):
    #using value instead of n
    start_int = value ** .5
    start_int = int(start_int)
    while (n % start_int) != 0:
      #same thing as start_int = start_int - 1
      start_int -= 1
    b = start_int

    #...more code here

    semiperimeter = b + d
    return semiperimeter

#Let's use this function now!

#store
my_val = input("Enter a value: ")

my_number = find_number(my_val)

print my_number 
```

有很多 Python 入门指南，我建议您在解决此类问题之前先阅读其中的指南。如果您已经知道如何使用另一种语言进行编程，您可以浏览 Python 语法指南。

如果有帮助，请不要忘记选择此答案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-27T04:45:15.490

```
from math import sqrt, floor

def A063655(n):
    for i in range(floor(sqrt(n)), 0, -1):
        j = floor(n / i)
        if i * j == n:
            return i + j

if __name__ == '__main__':

    my_value = int(input("Enter a value: "))

    my_number = A063655(my_value)

    print(my_number) 
```

**用法**

```
> python3 test.py
Enter a value: 10
7
> python3 test.py
Enter a value: 350000
1185
> 
```

# php - PHP根据工作日查找日期

> ID：15735044
> 
> 赞同：4
> 
> 时间：2013-03-31T21:59:43.823
> 
> 标签：php, html, echo

是否可以根据给定月份和年份的工作日确定日期。

Givens 是月份和年份。例如，假设我们在 2013 年 3 月。

我们也需要知道第三个星期二。所以我们的最终结果是 2013 年 3 月 19 日

2013 年 3 月给出的其他示例工作日：

第一个星期五 2013 年 3 月 1 日

2013 年 3 月 4 日第一个星期一

第三个星期三 2013 年 3 月 20 日

第五个星期日 2013 年 3 月 31 日

2013 年 3 月 23 日第四个星期六

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:02:32.803

您正在寻找[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

这接受诸如“三月的第一个星期一”“八月的最后一个星期三”之类的字符串作为日期字符串，并为您提供这些特定日期的 unix 时间戳

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:14:04.687

使用该[`DateTime`](http://www.php.net/manual/en/class.datetime.php)课程，您可以轻松获得完整日期：

```
$dt = new DateTime('third tuesday march 2013');
echo $dt->format('l j. F Y');
// Tuesday 19\. March 2013 
```

有很多[有效的字符串](http://www.php.net/manual/en/datetime.formats.php)可以传递给`DateTime`构造函数。

# java - 如何在java中以编程方式将元素添加到列表Double

> ID：15735045
> 
> 赞同：0
> 
> 时间：2013-03-31T21:59:46.343
> 
> 标签：java, arrays, list, arraylist, double

我有语法：

```
List<double[]> x = new ArrayList<double[]>();
x.add(new double[] { 5,6,7,8 }); 
```

如何自动添加 5,6,7,8？像这样

```
for (int i=5; i<=8; i++) {
**CODE**
}

List<double[]> x = new ArrayList<double[]>();
x.add(new double[] { **CODE** }); 
```

所以，我想换`**CODE**`，那是什么`**CODE**`？是否可以？对不起英语不好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:06:09.020

```
double[] d = new double[4];
for (int i=5; i<=8; i++) {
    d[i-5] = i; 
}

List<double[]> x = new ArrayList<double[]>();
x.add(d); 
```

没有测试，但如果你想将一个数组添加到一个 ArrayList 应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:01:55.413

将代码中的 double 替换为 Double。像这样：

```
List<Double> x = new ArrayList<Double>();
for (int i=5; i<=8; i++) {
   x.add(new Double((double)i));
} 
```

# c# - 用于确定特定范围内有多少元素的数据结构？

> ID：15735049
> 
> 赞同：3
> 
> 时间：2013-03-31T22:00:09.813
> 
> 标签：c#, algorithm, data-structures

可以说我有一组数字。我需要计算给定范围内有多少数字。例如：对于给定的集合`{3, 4, 7, 10, 15, 30}`：：

```
numbers in range (0, 6) = 2
numbers in range (8, 40) = 3
numbers in range (0, 50) = 6 
```

什么样的结构最适合这个目的？最好的意思是具有最快执行所述操作的结构。快速插入和移除也将不胜感激......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T22:05:53.420

如果给定的一组数字永远不会改变，一个简单的选择是将数字按升序排序，然后在范围的端点上使用[二进制搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)来确定排序序列中第一个元素包含在范围位于以及不在范围内的第一个元素所在的位置。然后，您可以减去这两个位置的差来计算该范围内有多少元素，或者只是迭代该范围以确定该范围内的所有数字。使用快速排序或堆排序等快速排序算法，排序可以在 O(n log n) 时间内完成，每个查询只需 O(log n) 时间即可完成两次不同的二进制搜索。

您可以通过多种方式加速这一过程。例如，如果您知道数字或多或少是均匀分布的，则可以使用[插值搜索](http://en.wikipedia.org/wiki/Interpolation_search)而不是二分搜索来进行查找。这需要预期的时间 ​​O(log log n) 来执行每个查询，这比以前快得多。如果您知道这些数字都在 [0, N) 范围内，您可以使用更高级的数据结构（如[van Emde Boas 树](http://en.wikipedia.org/wiki/Van_Emde_Boas_tree)）在最坏的情况下将所有操作加速到 O(log log N)。

另一方面，如果数字集可以增长和缩小，那么您可能需要考虑使用平衡二叉搜索树来存储您的数字。然后，您可以在树上进行有效的搜索（时间为 O(log n)）以确定范围内的第一个数字和不在范围内的第一个数字。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T22:23:08.073

这是计算几何中一个经过充分研究的问题，称为[范围搜索](http://en.wikipedia.org/wiki/Range_searching)。虽然你有 1-D 版本。问题是每个操作有多常见，如果插入和删除很少，在这种情况下，您可以将它们制成表格。这将为您提供 O(n^2) 存储和恒定时间查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T09:49:22.973

如果您的数据集不会随时间而变化，则 templatetypedef 的答案很好，但您提到需要快速插入和删除。 **[编辑：David Eisenstat 解释了平衡二叉树的两次 O(log n) 搜索如何通过每个节点计数来有效地计算给定范围内的元素。]**

在任何情况下，如果需要快速更新，解决问题的理想数据结构是**[Fenwick 树](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)或 BIT 树**。此数据结构为以下两个操作提供 O(log n) 保证：

*   查询：计算 0 到任意给定数字之间的元素个数。
*   更新：将某个给定数量的任何给定数量的副本插入或从多集中删除。

两个查询调用允许您使用 . 计算任何给定范围 [i, j) 中的元素数`count(j) - count(i)`。

Fenwick 树上的查询和更新都只涉及简单的按位运算和对单个数组的查找，因此使用这种数据结构将在 O(log n) 上产生一个非常有竞争力的常数——我希望它比保持平衡要快得多更新下的二叉树，这需要指针操作和树重新平衡。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T22:10:06.683

这有什么问题？

```
 static int Count(IList<int> set, int min, int max)
    { 
        int count = 0;
        foreach (int i in set)
            if (i < max && i > min)
                count++;

        return count;
    } 
```

# elasticsearch - 在 Elasticsearch 中使用相同的字段名称索引嵌套文档

> ID：15735050
> 
> 赞同：0
> 
> 时间：2013-03-31T22:00:16.627
> 
> 标签：elasticsearch

如果我有一个类的对象，`Car`它有一个嵌套的类对象，`Engine`其中两个类都有名为“id”的字段，我在创建映射时是否必须做任何特别的事情？或者将“嵌套”类型添加到引擎映射就足够了。

Elasticsearch 头部 GUI 显示了意外的行，但搜索似乎给出了正确的结果，因此如果两个或多个对象具有相同的字段名称，则最好知道我是否需要在映射中执行其他任何操作。

似乎结构化查询构建器返回带有我`car.id`从下拉列表中选择时搜索的 id 的引擎文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:50:00.837

应该没有任何问题，您可以使用点符号来引用嵌套文档中的字段。

此外，如果每辆车只有一个引擎，则无需将引擎声明为嵌套在映射中。

# .htaccess - mod_rewrite 通过 php 脚本提供 html 页面

> ID：15735062
> 
> 赞同：0
> 
> 时间：2013-03-31T22:01:08.893
> 
> 标签：.htaccess, mod-rewrite

首先，我设置了重写规则以允许从 URL 中删除 .html。

我还创建了一个 php 脚本，我想为我的所有 HTML 页面提供服务。这样，我可以创建并链接到一个简单的 html 页面，但它将由我的 php 脚本处理。

```
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.html -f 
RewriteRule ^(.*)$ /folder/webpage.php?view=webpage_handler&file=$1.html [L] 
```

因此，我没有链接到 www.mysite.com/page.html，而是链接到 www.mysite.com/page，它允许我通过 pages.php 访问 page.html

我还希望能够在其他一些情况下链接到 page.html（不删除 .html 扩展名）并且仍然让我的 pages.php 处理页面视图。

我试过了：

```
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.html -f 
RewriteRule ^(.*)$ /folder/webpage.php?view=webpage_handler&file=$1.html [L]

RewriteRule ^(.*\.(html))$ /folder/webpage.php?view=webpage_handler&file=$1 [L] 
```

但这并不像预期的那样工作。我不确定第二条规则是否有效，我相信它们相互冲突......但我不知道如何解决它。

有没有一种安全的方法可以让我同时链接到“/page.html”和“/page”并获得预期的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:19:10.030

经过更多的尝试和错误，我了解到我所拥有的实际上是正确的。出于某种原因，我的“视图”变量被删除了，这导致我的脚本无法正常运行。

我的 $_GET['view'] 变量在webpage.php 中是空白的，但是$_GET['file'] 变量的设置是应有的。

我从

```
view=webpage_handler 
```

到

```
view=handle_webpage 
```

就是这样。它现在工作正常。显然这是我做的，但我不知道是什么。

# jquery - 如何通过 jQuery 自动填充 HTML 输入框？

> ID：15735063
> 
> 赞同：-1
> 
> 时间：2013-03-31T22:01:11.723
> 
> 标签：jquery

我创建了一个看起来像这样的 HTML 表单（我输入了前三个值）。

主队：红军
客队：蓝军
第一击球：红军
第二击球：
第一击球：
第二击球：

如果红队先击球，我知道蓝队一定是第二击球，先上场，而红队先上场。按照这个逻辑，我想为我的用户节省一些时间并自动填充剩余的三个字段 - 使用 jQuery。

我猜我需要主队、客队和 Batted 第一个输入框上的事件监听器。当这些注册为具有内容时，我需要将剩余的空框设置为适当的值（按照上面的逻辑）。谁能给我一些关于从哪里开始解决这个问题的想法。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:02:59.360

> How can I get jQuery to populate these fields automatically via some simple logic?

```
$("#yourinputfield").val("some value here"); 
```

You can use the above selector to change the value of an input field of type text

```
<input id="yourinputfield" type="text" value="" /> 
```

# oracle11g - Oracle数据库安装错误：环境路径

> ID：15735066
> 
> 赞同：6
> 
> 时间：2013-03-31T22:01:14.837
> 
> 标签：oracle11g, installation, environment-variables, rdbms, system-variable

尝试在**Windows 7（64 位）上安装****Oracle Database 11g 第 2 版**时。

 **遇到以下错误 ( **PRVF-3929** )

![oracle 安装向导](https://i.stack.imgur.com/iXFi0.png)

它指出环境变量路径太长。为了达到这个变量，我在 Windows 中搜索了“envir”并选择了“Edit variable settings for your account”。大概是系统的路径而不是必须更改的用户。

![系统](https://i.stack.imgur.com/0BI33.png)

我可以自行决定删除吗？自然删除扩展会对不同的语言编译产生影响。为什么 Oracle 要求这个限制，这是特定于 Oracle 的安装还是使用 oracle dbms 的永久限制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-23T08:22:03.823

此*限制基于旧的 Windows 限制*，其中环境变量的长度很重要。这个限制在 Oracle 安装中仍然存在。

***解决这个问题：***

*   第 1 步：将“路径”变量的值复制到文本编辑器（例如：记事本）并将该值保存为备份。
*   第 2 步：将此路径**的大小减少到 1023 个字符以下。**最后删除路径变量。在 oracle 安装过程中，您几乎不需要它们中的任何一个。将这些删除的值保存在单独的文本文件中，因为您需要稍后再次添加它们！
*   第三步：再次**开始安装oracle**。
*   第 4 步：安装 Oracle 后：在路径末尾**再次添加那些已删除的路径值。**

祝你好运！**

# java - 在 DERBY 查询中省略模式

> ID：15735068
> 
> 赞同：5
> 
> 时间：2013-03-31T22:01:18.613
> 
> 标签：java, database, schema, datasource, derby

我创建了一个名为“movie_db”的数据库，将默认模式设置为 APP。然后创建了一个名为“USERS”的示例表。

我与数据库的连接如下：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">

    <property name="driverClassName" value="org.apache.derby.jdbc.ClientDriver"/>
    <property name="url" value="jdbc:derby://localhost:1527/movie_db"/>        
    <property name="username" value="root"/>
    <property name="password" value="pass"/>
</bean> 
```

现在我想编写一些测试并尝试执行以下查询：

```
SELECT * FROM USERS; 
```

我得到什么：

```
java.sql.SQLSyntaxErrorException: Table/View 'USERS' does not exist. 
```

当我准确指定我正在使用的架构时：

```
SELECT * FROM APP.USERS 
```

一切正常。

如何在查询中省略架构名称？

**更新：** 就像布莱恩说的那样，我用我的默认模式的名称创建了一个用户，并使用这个登录名进行授权。这是在查询中省略模式名称的最简单方法。但是，如果我想使用多个模式，唯一的方法是显式设置模式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T00:57:19.403

控制默认模式名称基本上有两种方法：

1.  连接到数据库后发出 SET SCHEMA 语句。
2.  以与您希望使用的架构同名的用户身份登录。

如果您尚未发出 SET SCHEMA 语句，那么 Derby 将使用您的用户名作为模式名称。

因此，如果您以用户“APP”身份登录，并且不发出 SET SCHEMA 语句，那么您的架构名称将是 APP。

# matlab - 获取 MATLAB 引擎以返回 unicode

> ID：15735072
> 
> 赞同：2
> 
> 时间：2013-03-31T22:01:46.307
> 
> 标签：matlab, unicode, matlab-deployment, matlab-engine

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:02:32.990

我强烈建议您改用`engPutVariable`、`engGetVariable`和 Matlab 的`eval`。由于嵌入的 NULL (\0) 字符以及其他问题，您尝试使用的 `engEvalString`内容不适用于许多 unicode 字符串。由于 Windows COM 接口的工作方式，Matlab 引擎不能真正支持解释字符串中的 unicode。我无法推测引擎如何在其他平台上工作。

[你的另一个问题](https://stackoverflow.com/questions/14942097/accessing-matlabs-unicode-strings-from-c)有关于使用的答案`mxCreateString_UTF16`。这还不够吗？

# java - 在 Java 中从一个基础转换为另一个基础

> ID：15735079
> 
> 赞同：44
> 
> 时间：2013-03-31T22:02:03.847
> 
> 标签：java

现在，我正在尝试找到一种方法，在给定数字、数字所在的基数以及要转换到的基数的情况下，在 Java 中将数字从一个基数转换为另一个基数。

```
public static void BaseConversion(String number, int base1, int base2){
    //convert the number from one base to another
} 
```

我找到了 JavaScript 的解决方案，我想知道是否可以在 Java 中做类似的事情：

```
function convertFromBaseToBase(str, fromBase, toBase){
    var num = parseInt(str, fromBase); //convert from one base to another
    return num.toString(toBase);
} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-31T22:08:07.767

你可以做

```
return Integer.toString(Integer.parseInt(number, base1), base2); 
```

因此，使用 Java 中的函数签名：

```
public String convertFromBaseToBase(String str, int fromBase, int toBase) {
    return Integer.toString(Integer.parseInt(str, fromBase), toBase);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-03T03:51:18.970

```
public class BaseToBaseConv {

static String baseToBase(String num, int base1, int base2) {
    int no = convFrmBaseToDeci(num, base1);
    return convFrmDecToBase(no, base2);
}

static String convFrmDecToBase(int num, int base) {

    String res = "";
    int rem;
    // Convert input number is given base by repeatedly
    // dividing it by base and taking remainder
    while (num > 0) {
        rem = num % base;
        if (base == 16) {
            if (rem == 10)
                res += 'A';
            else if (rem == 11)
                res += 'B';
            else if (rem == 12)
                res += 'C';
            else if (rem == 13)
                res += 'D';
            else if (rem == 14)
                res += 'E';
            else if (rem == 15)
                res += 'F';
            else
                res += rem;
        } else
            res += rem;

        num /= base;
    }
    // Reverse the result
    return new StringBuffer(res).reverse().toString();
}

static int convFrmBaseToDeci(String num, int base) {

    if (base < 2 || (base > 10 && base != 16))
        return -1;

    int val = 0;
    int power = 1;

    for (int i = num.length() - 1; i >= 0; i--) {
        int digit = digitToVal(num.charAt(i));

        if (digit < 0 || digit >= base)
            return -1;

        // Decimal equivalent is str[len-1]*1 +
        // str[len-1]*base + str[len-1]*(base^2) + ...
        val += digit * power;
        power = power * base;
    }

    return val;
}

static int digitToVal(char c) {
    if (c >= '0' && c <= '9')
        return (int) c - '0';
    else
        return (int) c - 'A' + 10;
}

public static void main(String [] args) {
    System.out.println(baseToBase("12345", 10, 2));
    System.out.println(baseToBase("11000000111001", 2, 10));
    System.out.println(baseToBase("ABC11", 16, 2));
    System.out.println(baseToBase("10101011110000010001", 2, 16));
    System.out.println(baseToBase("12322", 8, 16));
}
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-31T22:08:34.973

如果您可以确定所讨论的数字分别在or的范围内，则`Integer.parseInt`or的两个参数版本将执行此操作。如果您不能保证这一点，请使用：`Long.parseLong``int``long``java.math.BigInteger`

```
BigInteger bi = new BigInteger(number, base1);
return bi.toString(base2); 
```

这可以处理任意大的整数，例如

```
System.out.println(
  new BigInteger("12345678901234567890123456789", 10).toString(16));
// prints 27e41b3246bec9b16e398115 - too big to represent as a long 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-31T22:09:51.647

我相信这会奏效：

```
long x = 10;
int baseToConvertTo = 9;
System.out.println(Long.toString(x, baseToConvertTo)); 
```

输出：`11`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-25T03:32:42.103

正如其他人所展示的，[Integer.parseInt()](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt(java.lang.String,int))可以为您执行此操作。但是，如果您尝试自己构建转换器，以下将简单地将数值转换为所需的基数。请注意，对于以 10 为底的基数，您必须考虑 alpha 字符 ... IE 11-A、12-B 等...

```
public class NumberUtil {

    /**
     * This example is convoluted as in reality it just uses 'toString' to convert the number...
     * However, it displays the logic needed to make the conversion...
     *
     * To convert a number to a new radix, recursively return the remainder of the number
     * divided by the radix for each operation until zero. Then return the concatenated value in reverse.
     *
     * Example convert 9658 to base 2
     *
     * 9658 / 2 = 4829 R 0
     * 4829 / 2 = 2414 R 1
     * 2414 / 2 = 1207 R 0
     * 1207 / 2 =  603 R 1
     * 603  / 2 =  301 R 1
     * 301  / 2 =  150 R 1
     * 150  / 2 =   75 R 0
     * 75   / 2 =   37 R 1
     * 37   / 2 =   18 R 1
     * 18   / 2 =    9 R 0
     * 9    / 2 =    4 R 1
     * 4    / 2 =    2 R 0
     * 2    / 2 =    1 R 0
     * 1    / 2 =    0 R 1
     *
     * Answer :: 10010110111010
     *
     * @param number :: Integer number to convert.
     * @param radix  :: Radix to convert to.
     * @return :: BigInteger of the number converted to the desired radix.
     */
    static BigInteger convertBase( int number, int radix ) {

        List<Integer> remainder = new ArrayList<>();

        int count = 0;
        String result = "";
        while( number != 0 ) {
            remainder.add( count, number % radix != 0 ? number % radix : 0 );
            number /= radix;
            try {
                result += remainder.get( count );
            } catch( NumberFormatException e ) {
                e.printStackTrace();
            }
        }
        return new BigInteger( new StringBuffer( result ).reverse().toString() );
    }

    public static void main( String[] args ) {

        System.out.println( convertBase( 9658, 2 ) );

    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-31T22:09:43.093

考试：

```
class Test1 {
    public static void main(String[] args) {
        String s1 = "10";
        int n1 = Integer.parseInt(s1, 8);
        System.out.println(s1 + " is " + n1 + " in base10");
        String s2 = Integer.toString(n1, 2);
        System.out.println(n1 + " is " + s2 + " in base2");
    }
} 
```

给出：

```
C:\Temp>java Test1
10 is 8 in base10
8 is 1000 in base2 
```

使用`Integer.parseInt`和`Integer.toString`。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-10T12:03:54.160

**基编码器**：

`BaseEncoder`是为这个问题而写的。

**备注**：

*   支持**base 2**到**base 3263**
*   未针对速度进行优化
*   Base 64 是非标准的

**输出**：

```
 baseConversion("10011100", 2,  16) = "9C"
    baseConversion("9c",      16,   2) = "10011100"
    baseConversion("609643",  10,  64) = "2Krh"
    baseConversion("33773377",10, 100) = "bÈbÈ"
    baseConversion("18018018",10,1000) = "NNN" 
```

**使用**：

```
 sout("(\"10011100\", 2,  16)=" + baseConversion("10011100", 2, 16));
    sout("(\"9c\",      16,   2)=" + baseConversion("9c", 16, 2));
    sout("(\"609643\",  10,  64)=" + baseConversion("609643", 10, 64));
    sout("(\"33773377\",10, 100)=" + baseConversion("33773377", 10, 100));
    sout("(\"18018018\",10,1000)=" + baseConversion("18018018", 10, 1000)); 
```

**来源**：

```
/*
 * Licensced for commercial or non-commercial use, modification and 
 * redistribution provided the source code retain this license header and 
 * attribution.  Written to answer to Stack Overflow question 15735079\.  See
 * https://stackoverflow.com/questions/15735079/
 * to see the original questions and ( if this code has been modified ) to see 
 * the original source code.  This license does not supercede any licencing
 * requirements set forth by StackOverflow.  In the event of a disagreement
 * between this license and the terms of use set forth by StackOverflow, the
 * terms of use and/or license set forth by StackOverflow shall be considered 
 * the governing terms and license.
 */
package org.myteam.util;

import java.math.BigInteger;

/**
 * conversion routines to support
 * <pre>
 * BaseEncoder.baseConversion("94d6b", 16, 2));
 * </pre> allowing conversions between numbering systems of base 2 to base 3263
 * inclusive, with the following caveats:<ul>
 * <li> WARNING: BASE64 numbers created or parsed with this encoder are not
 * compatible with a standard base 64 encoder, and </li>
 * <li> WARNING: this class does not currently support unicode, or if it does
 * that's only by accident and it most likely does not support characters that
 * require more than one codepoint.</li>
 * </ul>
 * . to convert between two non-standard numbering systems, use two BaseEncoder
 * objects e.g.
 * <pre>
 *
 *      String numberBase64 = "1X3dt+4N";
 *      String numberBase16 = new BaseEncoder(16).fromBase10(new BaseEncoder(
 *          "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+/")
 *          .toBase10(numberBase64));
 *
 * </pre>
 *
 * @see https://stackoverflow.com/questions/15735079/
 */
public class BaseEncoder {

    public static void main(String[] args) {
        sout("(\"10011100\", 2,  16)=" + baseConversion("10011100", 2, 16));
        sout("(\"9c\",      16,   2)=" + baseConversion("9c", 16, 2));
        sout("(\"609643\",  10,  64)=" + baseConversion("609643", 10, 64));
        sout("(\"33773377\",10, 100)=" + baseConversion("33773377", 10, 100));
        sout("(\"18018018\",10,1000)=" + baseConversion("18018018", 10, 1000));
        // test();
    }

    private static void sout(String output) {
        System.out.println("\tbaseConversion" 
                + output.replace("=", " = \"") + "\"");
    }

    /**
     * this is the method that satisfies the criteria set forth by the original
     * question at https://stackoverflow.com/questions/15735079/ .
     *
     * @param fromNumber
     * @param fromBase
     * @param toBase
     * @return
     */
    public static String baseConversion(
            String fromNumber, int fromBase, int toBase) {
        final BigInteger numberBase10 = fromBase == 10
                ? new BigInteger(fromNumber)
                : parseBigInteger(fromNumber, fromBase);
        // System.out.println("org.myteam.util.baseConversion():"
        //          + " numberBase10 = " + numberBase10);
        return toBase == 10 ? numberBase10.toString()
                : toString(numberBase10, toBase);
    }

    /**
     * Simple test to validate conversion functions. Should be converted to
     * support whatever unit tests or automated test suite your organization
     * employs. No return value.
     *
     * @throws IllegalStateException if any test fails, and aborts all tests.
     */
    public static void test() throws IllegalStateException {
        final int level1 = 100;
        final int level2 = 525;
        final int level3 = 1000;
        final int maxlvl = 3263;
        for (int radix = 2; radix < maxlvl;) {
            test(radix);
            radix += (radix < level1) ? 1
                    : (radix < level2) ? 17
                            : (radix < level3) ? 43
                                    : 139;
        }
        test(3263);
        System.out.println("taurus.BaseEncoder.test(): all tests passed.");
    }

    private static void test(int radix) throws IllegalStateException {
        final BigInteger level1 = BigInteger.valueOf(radix);
        final BigInteger level2 = level1.multiply(level1);
        final BigInteger level3 = level2.multiply(level1);
        final BigInteger maxlvl = level3.multiply(level1);
        final BigInteger increment1 = BigInteger.ONE;
        final BigInteger increment2 = level1.add(BigInteger.ONE);
        final BigInteger increment3 = level2
                .add(BigInteger.ONE).add(BigInteger.ONE).add(BigInteger.ONE);
        final BigInteger increment4 = level3.add(BigInteger.valueOf(17));
        final int exitLvl = 5;
        int prevLvl = 1;
        BigInteger iTest = BigInteger.ZERO;
        while (true) {
            Throwable err = null;
            String radixEncoded = "(conversion to base " + radix + " failed)";
            String backToBase10 = "(conversion back to base 10 failed)";
            try {
                radixEncoded = baseConversion("" + iTest, 10, radix);
                backToBase10 = baseConversion(radixEncoded, radix, 10);
            } catch (Throwable ex) {
                err = ex;
            }
            if (err != null || !backToBase10.equals("" + iTest)) {
                System.out.println("FAIL: "
                        + iTest + " base " + radix + " = " + radixEncoded);
                System.out.println("FAIL: "
                        + radixEncoded + " base 10 = " + backToBase10
                        + " (should be " + iTest + ")");
                throw new IllegalStateException("Test failed. base 10 '" + iTest
                        + "' conversion to/from base" + radix + ".", err);
            }
            int lvl = (prevLvl == 1 && iTest.compareTo(level1) >= 0) ? 2
                    : (prevLvl == 2 && iTest.compareTo(level2) >= 0) ? 3
                    : (prevLvl == 3 && iTest.compareTo(level3) >= 0) ? 4
                    : (prevLvl == 4 && iTest.compareTo(maxlvl) >= 0) ? exitLvl
                    : prevLvl;
            final BigInteger increment
                    = (lvl == 1) ? increment1
                            : (lvl == 2) ? increment2
                                    : (lvl == 3) ? increment3
                                            : (lvl == 4) ? increment4
                                                    : BigInteger.ZERO;
            iTest = iTest.add(increment);
            if (prevLvl != lvl) {
                if (lvl == exitLvl && (radix % 56 == 0 || radix > 2700)) {
                    System.out.println("test():" + " radix " + radix
                            + " level " + prevLvl + " test passed.");
                }
            }
            if (lvl == exitLvl) {
                break;
            }
            prevLvl = lvl;
        }
    }

    /**
     * <pre>
     * String tenAsOctal = toString(BigInteger.TEN, 8); // returns "12"
     * </pre>.
     *
     * @param numberBase10
     * @param radix
     * @return
     */
    public static String toString(BigInteger numberBase10, int radix) {
        return new BaseEncoder(radix).fromBase10(numberBase10);
    }

    /**
     * <pre>
     * String tenAsOctal = toString(BigInteger.TEN, "01234567"); // returns "12"
     * </pre>.
     *
     * @param numberBase10
     * @param digits
     * @return
     */
    public static String toString(BigInteger numberBase10, String digits) {
        return new BaseEncoder(digits).fromBase10(numberBase10);
    }

    /**
     * <pre>
     * String tenAsOctal = "12"; // ("1" x 8^1) + ("2" x 8^0) = 10
     * String tenAsDecimal = parseBigInteger(tenAsOctal, 8);
     * System.out.println(tenAsDecimal); // "10"
     * </pre>.
     *
     * @param numberEncoded
     * @param radix
     * @return
     */
    public static BigInteger parseBigInteger(String numberEncoded, int radix) {
        return new BaseEncoder(radix).toBase10(numberEncoded);
    }

    /**
     * <pre>
     * String tenAsOctal = "12"; // ("1" x 8^1) + ("2" x 8^0) = 10
     * String tenAsDecimal = parseBigInteger(tenAsOctal, "01234567");
     * System.out.println(tenAsDecimal); // "10"
     * </pre>.
     *
     * @param numberEncoded
     * @param digits
     * @return
     */
    public static BigInteger parseBigInteger(
            String numberEncoded, String digits) {
        return new BaseEncoder(digits).toBase10(numberEncoded);
    }

    /**
     * <pre>
     * String tenAsOctal = "12"; // ("1" x 8^1) + ("2" x 8^0) = 10
     * int tenAsDecimal = parseInt(tenAsOctal, 8);
     * System.out.println(tenAsDecimal); // 10
     * </pre>.
     *
     * @param numberEncoded
     * @param radix
     * @return
     */
    public static int parseInt(String numberEncoded, int radix) {
        return new BaseEncoder(radix).toBase10(numberEncoded).intValueExact();
    }

    /**
     * <pre>
     * String tenAsOctal = "12"; // ("1" x 8^1) + ("2" x 8^0) = 10
     * int tenAsDecimal = parseInt(tenAsOctal, "01234567");
     * System.out.println(tenAsDecimal); // 10
     * </pre>.
     *
     * @param numberEncoded
     * @param digits
     * @return
     */
    public static int parseInt(String numberEncoded, String digits) {
        return new BaseEncoder(digits).toBase10(numberEncoded).intValueExact();
    }

    /**
     * <pre>
     * String tenAsOctal = "12"; // ("1" x 8^1) + ("2" x 8^0) = 10
     * long tenAsDecimal = parseLong(tenAsOctal, 8);
     * System.out.prlongln(tenAsDecimal); // 10
     * </pre>.
     *
     * @param numberEncoded
     * @param radix
     * @return
     */
    public static long parseLong(String numberEncoded, int radix) {
        return new BaseEncoder(radix).toBase10(numberEncoded).longValueExact();
    }

    /**
     * <pre>
     * String tenAsOctal = "12"; // ("1" x 8^1) + ("2" x 8^0) = 10
     * long tenAsDecimal = parseLong(tenAsOctal, "01234567");
     * System.out.prlongln(tenAsDecimal); // 10
     * </pre>.
     *
     * @param numberEncoded
     * @param digits
     * @return
     */
    public static long parseLong(String numberEncoded, String digits) {
        return new BaseEncoder(digits).toBase10(numberEncoded).longValueExact();
    }

    /**
     * each character in this string represents one digit in the base-X
     * numbering system supported by this instance, where X = the length of the
     * string. e.g.
     * <pre>
     *     base  2 (binary)     digits = "01"
     *     base  8 (octal)      digits = "01234567"
     *     base 10 (decimal)    digits = "0123456789"
     *     base 16 (hexdecimal) digits = "0123456789ABCDEF"
     * </pre> digits follow this pattern until base 64\. a somewhat arbitrary
     * character system is utilized to support base 65 to base 3263.
     */
    private final String digits;

    /**
     * specify a numbering system between base 2 and base 64 inclusive
     * <pre>
     * String fiveAsBinary = new BaseEncoder(2).fromBase10(5);
     * System.out.println(fiveAsBinary); // "101"
     * </pre> to use a numbering system with more than 64 digits, or to use your
     * own custom digits, use
     * <pre>
     * new BaseEncoder(String)
     * </pre>.
     *
     * @param radix
     */
    public BaseEncoder(int radix) {
        String digitsTemp = getDefaultDigitsForBase(radix);
        digits = digitsTemp;
    }

    /**
     * specify digits to use for your numbering system for example base 16 could
     * be represented as
     * <pre>
     *      new BaseEncoder("0123456789ABCDEF")
     * </pre> <br>
     * and base 64 could be represented as
     * <pre>
     *      new BaseEncoder("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"
     *              + "abcdefgjijklmnopqrstuvwxyz+/")
     * </pre>.
     *
     * @param digits
     */
    public BaseEncoder(String digits) {
        if (digits.length() < 2) {
            final String errorMessage = "Supported bases include 2 and above."
                    + " " + "Please provide at least two characters"
                    + " " + "e.g. new BaseEncoder(\"01\") // binary or base 2";
            throw new IllegalArgumentException(errorMessage);
        }
        this.digits = digits;
    }

    /**
     * convert a number from a non-standard numbering format to base 10
     * (BigInteger).
     *
     * @param numberEncoded
     * @return
     */
    public BigInteger toBase10(final String numberEncoded) {
        final int radix = digits.length();
        final BigInteger magnitude = BigInteger.valueOf(radix);
        final char[] chars = numberEncoded.toCharArray();
        BigInteger numberBase10 = BigInteger.ZERO;
        for (int i = 0; i < chars.length; i++) {
            numberBase10 = numberBase10.multiply(magnitude);
            final char digitEncoded = chars[i];
            final int indexOf = digits.indexOf(digitEncoded);
            final int digitValue;
            if (indexOf == -1) {
                digitValue = digits.toLowerCase().indexOf(
                        Character.toLowerCase(digitEncoded));
            } else {
                digitValue = indexOf;
            }
            if (digitValue == -1) {
                final String errorMessage = "Digit '" + digitEncoded + "'"
                        + " " + "from base " + radix + " number"
                        + " " + "'" + numberEncoded + "' not found in"
                        + " " + "base " + radix + " digits '" + digits + "'.";
                throw new IllegalArgumentException(errorMessage);
            }
            numberBase10 = numberBase10.add(BigInteger.valueOf(digitValue));
        }
        return numberBase10;
    }

    /**
     * convert a number from a non-standard numbering format to base 10
     * (BigInteger).
     *
     * @param numberBase10
     * @return
     */
    public String fromBase10(long numberBase10) {
        return fromBase10(BigInteger.valueOf(numberBase10));
    }

    /**
     * convert a number from a non-standard numbering format to base 10
     * (BigInteger).
     *
     * @param numberBase10
     * @return
     */
    public String fromBase10(BigInteger numberBase10) {
        final StringBuilder encodedNumber = new StringBuilder("");
        final int radix = digits.length();
        final BigInteger magnitude = BigInteger.valueOf(radix);
        while (numberBase10.compareTo(BigInteger.ZERO) > 0) {
            final BigInteger[] divideAndRemainder = numberBase10
                    .divideAndRemainder(magnitude);
            final BigInteger quotient = divideAndRemainder[0];
            final BigInteger remainder = divideAndRemainder[1];
            encodedNumber.insert(0, digits.charAt(remainder.intValueExact()));
            numberBase10 = quotient;
        }
        return encodedNumber.toString();
    }

    public static String getDefaultDigitsForBase(int radix) throws IllegalArgumentException {
        if (radix < 2) {
            final String errorMessage = "Supported bases include 2 and above."
                    + " " + "Not really sure how to represent"
                    + " " + "base " + radix + " numbers.";
            throw new IllegalArgumentException(errorMessage);
        } else if (radix <= 64) {
            return ("0123456789ABCDEFGHIJKLMNOPQRSTUV" // base 32 ends at V
                    + "WXYZabcdefghijklmnopqrstuvwxyz+/").substring(0, radix);
        }
        int charCount = 0;
        final StringBuilder s = new StringBuilder();
        for (int i = Character.MIN_VALUE; i < Character.MAX_VALUE; i++) {
            switch (Character.getType(i)) {
                case Character.CONNECTOR_PUNCTUATION:
                case Character.CURRENCY_SYMBOL:
                case Character.FINAL_QUOTE_PUNCTUATION:
                case Character.INITIAL_QUOTE_PUNCTUATION:
                case Character.LETTER_NUMBER:
                case Character.LINE_SEPARATOR:
                case Character.LOWERCASE_LETTER:
                case Character.MATH_SYMBOL:
                case Character.UPPERCASE_LETTER:
                    s.append((char) i);
                    if (++charCount >= radix) {
                        return s.toString();
                    }
                    break;
            }
        }
        throw new IllegalArgumentException("Radix '" + radix + "' exceeds maximum '" + charCount + "'");
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-31T22:08:34.340

由于您在 js 代码中提到过，因此您可能需要查看类`int`中的两种方法：`Integer`

```
static int  parseInt(String s, int radix) 
          Parses the string argument as a signed integer in the radix specified by the second argument. 
```

和

```
static String toString(int i, int radix) 
          Returns a string representation of the first argument in the radix specified by the second argument. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-15T05:55:48.973

使用此代码

```
import java.util.Scanner; // import scanner class

public class BaseConverting {

    public static void main(String[] args) {

        Scanner input = new Scanner(System.in); //creating object from Scanner class
        String ans;

        System.out.println("Enter the decimal value need to convert !");
        int decimal_value = input.nextInt();    //getting decimal value from user

        System.out.println("Select base \n Binary - b ;\n Octal- o ;\n HexaDecimal -h ;");
        String choice = input.next();           //getting user needs Base type

        switch (choice) {
            case "b":
                ans = Integer.toString(decimal_value, 2);
                System.out.println("Binary value of " + decimal_value + " = " + ans);
                break;

            case "o":
                ans = Integer.toString(decimal_value, 8);
                System.out.println("Octal value of " + decimal_value + " = " + ans);
                break;

            case "h":
                ans = Integer.toString(decimal_value, 16);
                System.out.println("Hexa Decimal value of " + decimal_value + " = " + ans);
                break;
        }

    }

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-07T20:16:26.930

这个怎么样 ？

```
public static void main(String[] args) {

    System.out.println(toDecimalBase("11111111", 2));
    System.out.println(toDecimalBase("Ff", 16));
    System.out.println(toDecimalBase("377", 8));
    System.out.println(toDecimalBase("255", 10));
}

private static int toDecimalBase(String number, int base) {

    int lenght = number.length();
    int result = 0;

    for (int i = 0; i < lenght; i++) {

        // get char in a reverse order from the array
        int character = number.charAt(lenght - i - 1);

        // convert range [A-F] to range of [0-6]
        if (character >= 'A' && character <= 'F') {
            character = character - 'A' + 10;
        } 
        else if (character >= 'a' && character <= 'f') {
            character = character - 'a' + 10;
        }
        // Unicode to int
        else {
            character = Character.getNumericValue(character);
        }
        result += (Math.pow(base, i)) * character;
    }

    return result;
} 
```

# json - Highstock 和多个 JSON

> ID：15735080
> 
> 赞同：0
> 
> 时间：2013-03-31T22:02:10.230
> 
> 标签：json, highcharts, highstock

嗨，首先，对不起我的英语；）

所以，我需要在我的 highstock 中放入多个 JSON。我目前使用“**基本线**”，我可以在其中放置多条线还是我必须选择另一个像[**这样**](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/compare/)的高架？...但我不明白它是如何工作的。

我的第一个 data.js ：

```
[[1362133360000,25],[1362136955000,14],[1362140579000,35],[1362144175000,21],[1362146967000,15],[1362150567000,16],[1362154351000,15],[1362157951000,12],[1362161559000,16],[1362164400000,11],[1362171600000,15],[1362174626000,18]] 
```

我的第二个 data2.js ：

```
[[1362133360000,12],[1362136955000,10],[1362140579000,30],[1362144175000,18],[1362146967000,10],[1362150567000,10],[1362154351000,10],[1362157951000,8],[1362161559000,11],[1362164400000,5],[1362171600000,10],[1362174626000,14]] 
```

我的 highstocks 使用一个文件，就是[**这样**](http://jsfiddle.net/GyGyt/UVU3N/)，所以，我需要为**data.json设置 1 行，为****data2.json 设置**另一行。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:12:32.917

您可以在折线图上有多个系列。

```
series: [{
    name: 'series1',
    data: data1,
    },{
    name: 'series2',
    data: data2,
    }] 
```

data1 将包含来自 data.js 的 JSON，而 data2 将包含来自 data2.js 的 JSON。

因此，鉴于您的数据结构，您可以执行以下操作：

```
$.getJSON('data.js', function (data1) {
    $.getJSON('data2.js', function (data2) {
        $('#container').highcharts('StockChart', {
            series: [{
                    name: 'series1',
                    data: data1,
                }, {
                    name: 'series2',
                    data: data2,
                }
            ]
        });
    });
}); 
```

# python - Sorting words by their freq in python

> ID：15735087
> 
> 赞同：0
> 
> 时间：2013-03-31T22:02:37.563
> 
> 标签：python, list, sorting, python-3.x

```
import sys
def candidateWord():
   filePath = "sample.txt"
   file = open(filePath,'r')
   word_count = {}
   for line in sys.stdin.readlines():
         for word in line.split():
            #words = word.lower()
            words = word.strip('!,.?1234567890-=@#$%^&*()_+').lower()
            word_count[words] = word_count.get(words,0) + 1

         for key in word_count.keys():
            #sorted(word, key = str,lower)
            print (str(key)+' '+str(word_count[key]))

candidateWord() 
```

How would I sort the words I have in a textfile by their frequency using what I have already?

The text file (sample.txt) contains the following: `How are you How are you I am good. HBHJKOLDSA How`

My desire output should be:

```
how 3
am 2
are 2
i 2
you 2
good 1
hbhjkoldsa 1 
```

I am working in python 3\.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T22:07:30.100

Use the [`collections.Counter`](http://docs.python.org/2/library/collections.html#counter-objects):

```
from collections import Counter

with open("sample.txt", 'r') as f:
    text = f.read()

words = [w.strip('!,.?1234567890-=@#$%^&*()_+') for w in text.lower().split()]

counter = Counter(words)

print(counter.most_common())
# [('how', 3), ('are', 2), ('you', 2), ('good', 1), ('i', 1), ('am', 1), ('hbhjkoldsa', 1)] 
```

Your desired output:

```
print("\n".join("{} {}".format(*p) for p in counter.most_common())) 
```

Using your code and sorting by (frequency desc, word asc):

```
for key, value in sorted(word_count.items(), key=lambda p: (-p[1], p[0])):
    print("{} {}".format(key, value)) 
```

The Counter result can be sorted in the same way, just replace `word_count.items()` with `counter.most_common()`.

# php - 致命错误：不在对象上下文中时使用 $this

> ID：15735099
> 
> 赞同：5
> 
> 时间：2013-03-31T22:04:01.023
> 
> 标签：php, mysql, mysqli

我有这个类用于使用/连接到`mysql`数据库：`php``mysqli`

```
class AuthDB {
    private $_db;

    public function __construct() {
        $this->_db = new mysqli(DB_SERVER, DB_USER, DB_PASS, DB_NAME)
        or die("Problem connect to db. Error: ". mysqli_error());
    }

    public function __destruct() {
        $this->_db->close();
        unset($this->_db);
    }
} 
```

现在，我有列表用户的任何页面：

```
require_once 'classes/AuthDB.class.php';

session_start();

$this->_db = new AuthDB(); // error For This LINE
$query = "SELECT Id, user_salt, password, is_active, is_verified FROM Users where email = ?";
$stmt = $this->_db->prepare($query);

        //bind parameters
        $stmt->bind_param("s", $email);

        //execute statements
        if ($stmt->execute()) {
            //bind result columnts
            $stmt->bind_result($id, $salt, $pass, $active, $ver);

            //fetch first row of results
            $stmt->fetch();

            echo $id;

        } 
```

现在，我看到了这个错误：

```
Fatal error: Using $this when not in object context in LINE 6 
```

如何解决这个错误？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T22:06:48.860

就像错误所说的那样，您不能`$this`在类定义之外使用。要`$_db`在类定义之外使用，首先使用它`public`而不是`private`：

`public $_db`

然后，使用以下代码：

```
$authDb = new AuthDb();
$authDb->_db->prepare($query); // rest of code is the same 
```

--

您必须了解`$this`实际含义。在类定义中使用时，`$this`用于引用该类的对象。所以如果你有一个函数`foo`inside `AuthDB`，并且你需要`$_db`从inside 访问`foo`，你会`$this`告诉 PHP 你想要`$_db`来自同一个对象的那个`foo`。

您可能想阅读这个 StackOverflow 问题：[PHP: self vs $this](https://stackoverflow.com/questions/151969/php-self-vs-this)

# facebook - How to get the friendlist of someone when all you have is their facebook name, via get request

> ID：15735100
> 
> 赞同：0
> 
> 时间：2013-03-31T22:04:02.070
> 
> 标签：facebook

Say you have a facebook page like:

[http://www.facebook.com/example.name.1](http://www.facebook.com/example.name.1)

How can I programmatically get the friend list of this page via get request.

If I can test this using the facebook console it would be very helpful.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:22:58.653

这是获取您的朋友列表的代码。因此，您可以从研究以下代码开始。

```
$friends = $facebook->api("/me/friends") 
```

或者你也可以使用 sql 来检索好友列表。

```
$friends = $facebook->api(array(
"method"    => "fql.query",
"query"     => "SELECT uid,name FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())"
)); 
```

# php - Header problems with jquery

> ID：15735103
> 
> 赞同：1
> 
> 时间：2013-03-31T22:04:22.430
> 
> 标签：php, jquery, header, footer

hi guys i need some help since im new with jquery.

Im using jquery to load something in a div. Here is my code

```
$('.menu_top').click(function(){

    var href = $(this).attr('href');

    $('#main_section').hide().load(href).slideDown("normal");

    //slideDown("normal");
    //fadeIn("normal");
    //fadeToggle("slow", "swing");

    return false;
}); 
```

Everything works fine

I also have my php pages divided into pieces like header.php, footer.php etc.

The problem comes when i try to sent a post data to the same page, for example post from home.php to home.php. The headers and footers just dissapear.

I've tried to use stuff like

```
if(isset and !empty){
  //put the headers
} 
```

But that didnt work....

Thanks for the help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:06:44.517

You need to check for `$_POST`:

```
if(isset($_POST['your_post_value'])){
// the POST value exists
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:18:04.333

```
$('#main_section').hide().load(href, function() { $(this).slideDown("normal"); }); 
```

.load 的第二个参数是加载完成时应该调用的处理程序。然后你向下滑动

# c# - 在 MVC 中获取响应内容

> ID：15735105
> 
> 赞同：2
> 
> 时间：2013-03-31T22:04:41.620
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4

[我正在按照THIS](https://stackoverflow.com/a/9026941/472434)为我的 MVC 4 应用程序实现错误处理程序。
现在我对所有错误都做同样的事情，不仅是 404，我想获得原始响应以保存它以进行日志记录或在调试模式下显示它，因为它包含有用的信息，比如完整的堆栈跟踪，小显示在哪里错误发生的代码等等。

我现在正在努力`Response`在调用之前从对象中获取缓冲的响应数据`Response.Clear()`，但不知道如何。

**如何获取 HttpResonse 对象的内容？**

对于`HttpWebResponse`有一种`GetResponseStream()`方法可以用于此，我在其中找到了很多示例，但是对于 and 什么都没有，`HttpResonse`并且`OutputStream`无法阅读...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:29:28.833

不确定这是否有助于朝着正确的方向发展，但我只是使用这个：

```
[AttributeUsage(AttributeTargets.Class)]
public class ErrorHandlerAttribute : FilterAttribute, IExceptionFilter
{

    readonly BaseController _bs = new BaseController();

    public virtual void OnException(ExceptionContext fc)
    {
        var model = new errors
        {
            stacktrace = fc.Exception.StackTrace,
            url = fc.HttpContext.Request.RawUrl,
            controller = fc.RouteData.GetRequiredString("controller"),
            source = fc.Exception.Source,
            errordate = DateTime.Now,
            message = fc.Exception.Message//,
            //InnExc = String.IsNullOrEmpty(fc.Exception.InnerException.ToString()) ? fc.Exception.InnerException.ToString() : ""
        };

        var message = "<html><head></head><body><h2>An error occured on " + _bs.GetKeyValue<string>("Mobile Chat App") + ".</h2>";
        message += "<strong>Message:</strong> <pre style=\"background-color:#FFFFEF\"> " + model.message + "</pre><br />";
        message += "<strong>Source:</strong> <pre style=\"background-color:#FFFFEF\">" + model.source + "</pre><br />";
        message += "<strong>Stacktrace:</strong><pre style=\"background-color:#FFFFEF\"> " + model.stacktrace + "</pre><br />";
        message += "<strong>Raw URL:</strong> <pre style=\"background-color:#FFFFEF\">" + model.url + "</pre></br />";
        message += "<strong>Inner Exception:</strong> <pre style=\"background-color:#FFFFEF\">" + model.InnExc + "</pre></br />";
        message += "<strong>Any Form values</strong>: <pre>" + fc.HttpContext.Request.Form + "</pre><br />";
        message += "</body></html>";

        fc.ExceptionHandled = true;
        fc.HttpContext.Response.Clear();
        fc.HttpContext.Response.StatusCode = 500;
        fc.HttpContext.Response.TrySkipIisCustomErrors = true;

        _bs.SendErrorMail(message);

        fc.ExceptionHandled = true;
        //var res = new ViewResult { ViewName = "error" };
        //fc.Result = res;
        fc.HttpContext.Response.Redirect("/ErrorPage");
        //fc.HttpContext.Response.RedirectToRoute("error",new{controller="Home",action="ErrorPage"});
    } 
```

我有一个 gmail 错误帐户，我将所有错误都放入其中，并让我知道我制作的任何网站是否有任何问题，这还没有让我失望。我没有深入研究这个问题，因为这些天我使用了不同的方法，但是：

```
fc.HttpContext.Request.RawUrl, 
```

只是httpContext，你有没有httpcontext，我使用get 和fc.HttpContext.Request.Form 的URL 来获取可能导致错误的任何和所有表单数据。

这不是您所要求的响应，但这是因为我在请求期间捕获了错误，而不是响应错误！然后我清除响应（将是错误 500）并将其替换为重定向到我的页面，该页面有一张带键盘的猴子的漂亮图片:-)

# ruby - Error install rvm 1.9.3

> ID：15735110
> 
> 赞同：2
> 
> 时间：2013-03-31T22:05:53.767
> 
> 标签：ruby, rvm

Trying to solve this error....

```
$ rvm install 1.9.3
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p392.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing requirements for smf, might require sudo password.
Installing required packages: libksba,
sqlite...................................................
Error running 'requirements_smf_libs_install libksba sqlite',
please read /Users/jm/.rvm/log/ruby-1.9.3-p392/package_install_libksba_sqlite.log
There were package installation errors, make sure to read the log.
You can get help using IRC: http://webchat.freenode.net/?channels=rvm 
```

Log file [https://gist.github.com/anonymous/d9b590dfc121aab46579](https://gist.github.com/anonymous/d9b590dfc121aab46579)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T01:33:53.940

这是 autolibs 中 SM 框架实现的一个错误，您需要为 RVM 打开一张票来修复它：[https ://github.com/wayneeseguin/rvm/issues](https://github.com/wayneeseguin/rvm/issues)

您可以通过切换到自制软件来解决这个问题：

```
rvm autolibs osx_brew 
```

# google-app-engine - ndb.Expando (1.7.6) 的投影查询

> ID：15735113
> 
> 赞同：1
> 
> 时间：2013-03-31T22:06:12.237
> 
> 标签：google-app-engine, app-engine-ndb

以下查询仅返回键，即使我想返回属性 Name，它是 ndb.Expando 实体的 ndb.StringProperty。

`cls.query().order(cls.Name).fetch(100, projection=[cls.Name])`＃.. 什么？

如果我做类似`cls.query().order(cls.Name).fetch(100)`工作

问题，我可以在 ndb.Expando 上使用投影吗？我什至尝试 `cls.query().order(cls.Name).fetch(100, projection=[ndb.GenericProperty('Name')])`只获取结果中其他属性的键和空值。

我在 1.7.6。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:59:08.223

是的你可以。他们都默认索引。只需将它们定义为字符串。

```
cls.query().fetch(100, projection=['name'])

# next one also will work
cls.query().fetch(100, projection=[ndb.GenericProperty('name')]) 
```

这只有在没有通用属性排序的情况下才有效。

# c# - Mouse Position and Canvas.SetLeft

> ID：15735115
> 
> 赞同：1
> 
> 时间：2013-03-31T22:06:22.557
> 
> 标签：c#

I am trying to set a Image to a specific location on my application. I get the position that I want to set via `Mouse.GetPosition`. However, this position is not correct when I try to use `Canvas.SetLeft`. How can I set it to the position I want?

Note: This is a dynamically created Image Control onto a Canvas named SI, and XC[0] is the X coordinates that I got from Mouse.GetPosition.

```
var webimage = new BitmapImage(new Uri("C:\\Class16\\Images\\DSC_0000.jpg"));
            var imageControl = new Image();
            imageControl.Source = webimage;
            imageControl.Width =(XC[3] - XC[0]);
            imageControl.Height = (YC[1] - YC[0]);
            Canvas.SetLeft(imageControl, XC[0]);
            SI.Children.Add(imageControl); 
```

And codes for getting the mouse position

```
private void Image_Frame_MouseDown(object sender, MouseButtonEventArgs e)
    {
        if (XC[3] == 0)
        {
            if (e.LeftButton == MouseButtonState.Pressed)
            {
                if (DIP.Default.Image1BR == 0)
                {
                    Point position = e.GetPosition(this);
                    XC[variant] = position.X;
                    YC[variant] = position.Y;
                    variant++;
                }
            }
        }} 
```

And if it helps, this is the Canvas Xaml portion.

```
<Canvas x:Name="SI" Height="380" Width="720" Canvas.Left="177" Canvas.Top="31">
        <Image x:Name="Image_Frame" Height="380" Width="720" Drop="Image_Frame_Drop" AllowDrop="True" MouseDown="Image_Frame_MouseDown" />
    </Canvas> 
```

# sql - 在单个 SQL 语句中使用 LIKE 和 IN 以及子查询

> ID：15735117
> 
> 赞同：3
> 
> 时间：2013-03-31T22:06:34.407
> 
> 标签：sql, tsql, sql-server-2008-r2, sql-like

我正在编写一个查询，其中我试图在子查询/CTE 中搜索通配符子字符串，并将此逻辑嵌套在我的 CASE 语句中。例如：

```
SELECT
CASE 
WHEN '%' + text + '%' IN (SELECT Column1 FROM Table) THEN 'I am in Column1'
ELSE text END
FROM Table 
```

不幸的是，看起来没有办法做到这一点。因为我需要使用 LIKE 运算符并且无法同时使用 LIKE 和 IN。我必须分别编写每个 LIKE 语句，这将是 1000 多行。有人推荐更直接的解决方案吗？提前致谢！

- 编辑：对不起，每条评论都有一些澄清。一个更好的例子：

```
UserID     |  UserPeers   |  Gender
--------------------------------------------
Mike       |  Tom1, Bob1  |  M
John       |  Tom1, Greg1 |  M
Sally      |Mike1, John1  |  F
Sara       | Sally1, Bob1 |  F 
```

在上表中，我需要搜索 UserPeers 列中的子字符串，以查看它们是否存在于 UserID 列中的任何位置。在这种情况下成功返回的行将是 Sally 和 Sara 下的行，因为 UserID 下存在“Mike”和“Sally”。

```
SELECT *
FROM Users
WHERE '%' + UserPeers + '%' LIKE (SELECT UserID FROM Users) 
```

这里返回的错误是：子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:20:19.053

```
SELECT UserID, CASE WHEN EXISTS 
(
  SELECT 1 FROM dbo.Users WHERE UserPeers LIKE '%' + u.UserID + '%'
) THEN 'I am in Column1' ELSE UserID END
FROM dbo.Users AS u; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:19:12.967

这是一种方法：

```
SELECT (CASE WHEN exists (select 1 from table t2 where t2.column1 like '%' + t.text + '%')
             then 'I am in Column1'
             ELSE t.text
        END)
FROM Table t; 
```

您的原始查询似乎在`like`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T22:19:56.330

可能你真的不需要`Like`并且`IN`

```
 SELECT
CASE 
WHEN EXISTS (SELECT 1 FROM Table B WHERE B.COLUMN1 LIKE '%' + A.TEXT+ '%') THEN 'I am in Column1'
ELSE A.text END
FROM Table A 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T22:19:59.863

你可以尝试这样的事情：

选择 case when (select count(*) from table where column1 like ('%' + text + '%')) > 0 then 'I am in column1' else text end from table

# java - Can't draw text upside down in Canvas

> ID：15735121
> 
> 赞同：2
> 
> 时间：2013-03-31T22:06:44.110
> 
> 标签：java, android, android-canvas

I am trying to draw text on a canvas, and then rotate the canvas so the text is displayed upside down. However it still does not display upside down. The bitmap is displayed upside down but the text isn't.

```
Canvas canvas = new Canvas(bm);
    canvas.drawText(text, 0, bm.getHeight()/2, paint);
    canvas.rotate(180, bm.getWidth()/2, bm.getHeight()/2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:37:18.377

当您变换画布时，实际上是在对[变换矩阵](http://en.wikipedia.org/wiki/Transformation_matrix)执行更新，以便后续的绘画调用将被变换。举个例子，如果你想“填充”你的画，你首先翻译画布：

```
canvas.translate(10.0f, 0); 
```

然后在 (0, 0) 上绘制一个 Rect：

```
canvas.drawRect(0, 0, 20, 10); 
```

矩形将被绘制，其原点被转换为 (10, 0)，这样就好像您调用了`drawRect(10, 0)`，因为每个 2D 点都乘以当前变换矩阵。这同样适用于其他[仿射变换](http://en.wikipedia.org/wiki/Affine_transformation)，如旋转和缩放。因此，如果要绘制颠倒的文本，则必须先应用转换**，**然后**再进行**绘画。

顺便说一句，要绘制文本实际上是颠倒的，您正在寻找的转换不是*旋转*，而是 Y 坐标的*交换*：

```
canvas.scale(1, -1);
canvas.drawText(text, 0, bm.getHeight()/2, paint); 
```

另外，一定要理解 a`Canvas`和 a之间的区别`Bitmap`：前者是用于公开各种绘画 API 的 Android API 类，后者是图像中实际像素的数组（我记得直到 2.3 它是从本地库，所以永远不要忘记调用`Bitmap.recycle()`，否则你很快就会用完可用空间并得到`OutOfMemoryException`s。

# javascript - Lock Whole page while processing code

> ID：15735125
> 
> 赞同：1
> 
> 时间：2013-03-31T22:07:03.567
> 
> 标签：javascript, jquery

I'm running some code to add products to a shopping cart. As I'm are simulating the product increment I'll have to give the page about 1000ms to acctually process the request to increment and add the product to the cart.

There are times when the customized form ends up in 10 or more products.

I have tried to hide everything beneath a gray div that has a high opacity, I cant use blockui since I'm running jquery 1.3 and that's in the framework I have to build upon.

This is what I do. **Why is it not working? I can't see the div at all?**

```
startLoad();
pdel = 1000;
$("input:submit[value='handla']").each(function(index)

   if(index != 1)
   {

      $("#backgroundPopup").text("Lägger produkt" + index + " i varukorgen");
      var submithing = this;  
      setTimeout(function(){ clicksubmitbutton(submithing); },pdel);
       pdel += 1000;
   }                      
});  

stopLoad();

 function startLoad(){
 $("#backgroundPopup").css("opacity", "0.7"); // css opacity, supports IE7, IE8

 $("#backgroundPopup").show();
 }
 function stopLoad()
 {
  $("#backgroundPopup").hide();
 } 
```

CSS

```
#backgroundPopup {
z-index:1;
position: fixed;
display:none;
height:100%;
width:100%;
background:#000000;
top:0px;
left:0px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:10:18.110

把你的`stopLoad`函数放在 DOM onReady 中。使用 jQuery，您可以这样做：

```
$(document).ready(function() {
    stopLoad();
}); 
```

# ruby-on-rails - 如何覆盖 Rails 3.2.12 中实例的方法？

> ID：15735126
> 
> 赞同：0
> 
> 时间：2013-03-31T22:07:04.553
> 
> 标签：ruby-on-rails, ruby, singleton

在我们的 rails 3.2.12 应用程序中，我们想要`override method`for an`instance`并使其返回为空。`generic overriding method`理想情况下，我们可以为应用程序中的每一个都定义一个`model`。

例如，`@project`是`Project`模型的一个实例，`phone`是一个列名。在方法覆盖之后，我们希望`@project.phone`在运行时返回空而不是列的值。如果应用程序中有另一个模型，`customer`我们可以执行`@customer.name`并接收 nil 假设`@customer`是`instance`.`customer`

我们在这里感到`singleton class`并且`define_method`可能会有所帮助。但我们不太了解它们将如何工作。有人可以阐明这个问题吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:14:22.563

忽略这一切，额外的评论使这毫无价值。

与其覆盖实例方法，不如只使用一个实例变量来充当该方法的开关。

```
class Project < ActiveRecord::Base

  def phone
    if @do_not_call
      nil
    else
      super
    end
  end

  def do_not_call
    @do_not_call = true
  end

  def do_call
    @do_not_call = false
  end

end 
```

你需要像CanCan这样的东西

[https://github.com/ryanb/cancan](https://github.com/ryanb/cancan)

使用 can can 设置用户的能力并执行以下操作。

```
class Project < ActiveRecord::Base

  def phone
    if current_user can? :phone, self
      super
    else
      nil
    end
  end

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:49:14.380

覆盖对象（实例）方法的一种方法如下：

```
@project = Project.find(params[:id])
#@project.phone contains the database value

def @project.phone
  ""
end
#@project.phone returns an empty string now 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T08:50:01.190

既然您说您只想在视图中执行此操作，那么我觉得视图助手值得考虑：

```
# view.html.haml
= value_for_view(:phone, @project)

# application_helper.rb
def value_for_view(attribute, object)
  if overide_attributes_in_view? && object.respond_to?("#{attribute}_for_view")
    object.send("#{attribute}_for_view")
  else
    object.send(attribute)
  end
end

# application.rb
def overide_attributes_in_view?
  #do your stuff here to determine whether the original values should be shown or the 'overloads'
end

# project.rb
def phone_for_view
  nil # just add methods called "attribute_for_view" for whatever attributes you want to whatever models you want to have the attributes 'overloaded' (it's not really overloading, but it serves the purpose you describe)
end 
```

或者类似地......你可以修补 AR::Base 以拥有一个 'value_for_view' 方法，所以视图看起来更像这样：

```
# view.html.haml
= @project.value_for_view(:phone)

# monkey_patch_file.rb
def value_for_view(attribute)
  if respond_to?("#{attribute}_for_view")
    send("#{attribute}_for_view")
  else
    send(attribute)
  end
end 
```

如果您坚持只能调用 @project.phone 并获取一个或其他值，则需要向 @project 传递一个标志，告诉它为您进行计算，如 Rovermicroer 的回答所示（不过，正如我评论的那样，我不确定'super'会起作用，但原理是正确的）。

# c# - 为什么我的 foreach 不工作？

> ID：15735127
> 
> 赞同：2
> 
> 时间：2013-03-31T22:07:05.363
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在学习 asp.net mvc，我正在尝试制作类似 Yelp 的东西......
在我的一段代码中，我想遍历所有类别......
它从 2 号开始：我在foreach，它不起作用...

VStudio 告诉我问题出在属性 AverageReviews 上，它是 Place 类的属性：

```
public double AverageReviews 
{ get { return (double)SumReviews/(Reviews.Count); } } 
```

在我的控制器中，我有这个：

```
private KekantoContext db = new KekantoContext();

for (int i = 2; i < 8; i++)
{
    var query = db.Places.Where(e => e.Category.CategoryId == i)
        .OrderByDescending(e => e.AverageReviews).Take(3);

    foreach (var aux in query)
    {
        //any code }
    }
} 
```

Visual Studio 说 Linq to Entities 不支持我的 AverageReviews 属性。但是，如果我更改代码并输入：var query = db.Places，我的 foreach 工作正常......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T22:11:37.833

您需要了解 Linq 和 EF 如何协同工作：
EF 不会获取所有实体，然后在代码中执行约束，但它会将“所有内容”转换为 SQL，而对于不支持的属性/方法则无法做到这一点存在于您的数据库中。

您可以执行以下操作之一：

1）首先获取所有实体，然后“在代码中”执行排序：

```
var query = db.Places.Where(e => e.Category.CategoryId == i).ToList()
    .OrderByDescending(e => e.AverageReviews).Take(3); 
```

注意添加`ToList()`。

2）以EF可以理解的方式执行您的订购，即使您的逻辑可能也不容易，但可能类似于以下工作：

```
var query = db.Places.Where(e => e.Category.CategoryId == i).
    .OrderByDescending(e => e.SumReviews/e.Reviews.Count()).Take(3); 
```

3）创建一个“帮助列/表”，在其中插入“排序/排序值”并在其后排序。

方法一的缺点是，与您匹配的所有实体`Where()`都已加载，而不仅是 3，方法 2 我不确定它是否有效，方法 3 需要八个数据库触发器或通过代码手动更新，两者都可能对性能不利。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T22:09:41.917

`AverateReviews`是一个计算属性，因此 EF 无法基于它生成存储查询 (sql)。

您可以先检索数据，然后调用`ToList()`它，然后通过 AverageReviews 对其进行排序。

```
var query = db.Places.Where(e => e.Category.CategoryId == i).Take(3).ToList();

var orderedList = query.OrderByDescending(x => x.AverageReviews).ToList(); 
```

如果您想订购整个清单并取其中 3 个 .. 见下文。

```
 var query = db.Places.Where(e => e.Category.CategoryId == i).ToList();

    var orderedList = query.OrderByDescending(x => x.AverageReviews).Take(3).ToList(); 
```

# css - 如何覆盖 Bootstrap 的 左边框在 CSS 中带有 FontAwesome 图标？

> ID：15735128
> 
> 赞同：10
> 
> 时间：2013-03-31T22:07:09.677
> 
> 标签：css, twitter-bootstrap, font-awesome

当 a`<blockquote>`出现在我的 div 中时，我想覆盖它，以便它使用 FontAwesome `icon-quote-left`，而不是`border-left: 5px rgb....`它现在使用的值。

如何仅使用 CSS 来做到这一点？

我不想使用 JS——因为它给页面增加了太多的负载。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T00:39:15.273

您可以使用 CSS 伪元素来做到这一点。这是一个 JSFiddle 来演示：http: [//jsfiddle.net/cvADH/](http://jsfiddle.net/cvADH/)

```
/* Override the bootstrap style */
blockquote {
    border-left: none;
}

/* Insert the pseudo element - replicating what FontAwesome does */
blockquote:before {
    content: "\f10d"; 
    font-family: FontAwesome;
    float: left;
    margin-right: 10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:46:10.493

抱歉，在 iPad 上无法给出准确的答案，但逻辑是打开引导 CSS 找到声明 blockqote 图标的确切位置，并用你的适当 CSS 覆盖它，这可能会解决类似禁用的问题引导样式背景图像/位置，切换字体系列，并可能添加一个内容：'char'，它注入与字体真棒字符相对应的字符。

* * *

更新：在这里查看它是如何完成的

字体真棒

```
.icon-glass:before { content: "\f000"; } 
```

[https://github.com/malarkey/320andup/blob/master/less/font-awesome.less](https://github.com/malarkey/320andup/blob/master/less/font-awesome.less)

引导带

```
.icon-glass { background-position: 0 0; } 
```

[https://github.com/twitter/bootstrap/blob/master/less/sprites.less](https://github.com/twitter/bootstrap/blob/master/less/sprites.less)

# java - 如何重绘动态变量java

> ID：15735129
> 
> 赞同：0
> 
> 时间：2013-03-31T22:07:13.800
> 
> 标签：java

如何重绘更新的变量，例如我正在测试以下代码

```
 public void paintComponent(Graphics g) {
     Dimension d = this.getPreferredSize();
     g.setFont(font);
     g.setColor(Color.red);
     String temp;
     int [] test = {0,4,2,3,4,5};

    for(int i = 0;  i < test.length; i++)
    {
        temp = Integer.toString(test[i]);
        g.drawString(temp, (50+(i*10)), 50);

    }
} 
```

该代码绘制数组的内容（将其转换为字符串）。我想要做的是更新数组并在更新时重新绘制新数组。我一直在寻找示例，但无法解决这个简单的任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:08:34.677

当您希望组件重绘自身时，您需要调用：

```
repaint(); 
```

在组件上。

您不会在 paintComponent() 方法中定义 Array。相反，您需要添加一个方法，例如

```
public void setArray(int[] numberArray)
{
    this.numberArray = numberArray;
    repaint();
} 
```

然后你会定义一个类变量“numberArray”。paintComponent() 方法将访问该类变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:15:19.917

试试下面的。改变

```
 int [] test = {0,4,2,3,4,5}; 
```

到

```
int [] test = getTestData(); 
```

然后提供以下内容：

```
private int [] testData = new int [0];

private getTestData() {
    return this.testData;
}

private setTestData(int [] newData) {
    this.testData = newData;
} 
```

现在要设置不同的测试，请尝试

```
setTestData((int []){0, 4,2,3,4,5});
repaint();
setTestData((int []){1,2,3,4,5});
repaint();
. . . 
```

类似的东西。

# ruby-on-rails-3.2 - 无法让 Will_Paginate 在我的 Rails 应用程序上工作

> ID：15735135
> 
> 赞同：0
> 
> 时间：2013-03-31T22:07:54.100
> 
> 标签：ruby-on-rails-3.2, will-paginate

我无法让 will_paginate 在我正在创建的 pinterest 风格的 Rails 应用程序上工作。我一直在关注 will_paginate railscast。我从这一行得到一个错误：编辑：这是我得到的错误：

```
NoMethodError in PinsController#index

undefined method `page' for "created_at desc":String
Rails.root: /Users etc....

Application Trace | Framework Trace | Full Trace
app/controllers/pins_controller.rb:6:in `index' 
```

到目前为止，我将 will_paginate 添加到我的 gemfile 并运行 bundle ：

这是我的 Gemfile：

```
gem 'rails', '3.2.11'
gem 'jquery-rails
gem 'devise'
gem 'simple_form'
gem "paperclip", "~> 3.0"
gem 'aws-sdk'
gem 'will_paginate', '> 3.0'
gem 'bootstrap-will_paginate', '0.0.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :production do
  gem 'pg'
end 

group :development, :test do 
  gem 'sqlite3'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'bootstrap-sass', '~> 2.3.1.0'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
 end 
```

这是我的 pins_controller.rb （我得到我的错误）：

```
class PinsController < ApplicationController
before_filter :authenticate_user!, except: [:index]
# GET /pins
# GET /pins.json
def index
@pins = Pin.order("created_at desc").page(params[:page]).per_page(5)
  respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @pins }
end
end 
```

这是我的 index.html.erb ：

```
<%= render 'pages/home' %>
<div id="pins">
<%= render @pins %>
<%= will_paginate @pins %>
</div> 
```

如果你想看看在我开始玩 will_paginate 之前我一直在做什么，你可以在[我的 github repo 上看到我的代码。](https://github.com/PistachioPony/ponies)我是发布问题的新手，但在这里搜索没有找到任何东西，并尝试遵循最佳实践。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:13:23.527

删除之后的空格`order`：

```
Pin.order("created_at desc").page(params[:page]).per_page(5) 
```

这一点很重要。随着空间`("created_at desc").page...`被评估然后传递给`order`......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:23:16.613

您在控制器中调用 will_paginate 的方式存在问题，应该是

```
@pins = Pin.order('created_at desc').paginate(:per_page => 5, :page => params[:page]) 
```

代替

```
@pins = Pin.order("created_at desc").page(params[:page]).per_page(5) 
```

见[https://github.com/mislav/will_paginate#basic-will_paginate-use](https://github.com/mislav/will_paginate#basic-will_paginate-use)

希望这可以帮助

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:45:52.333

抱歉，您是否尝试不使用“订单”条款？

如果没有它也能工作，你可以试试这个：

```
@pins = Pin.paginate(:per_page => 5, :page => params[:page]).order('created_at DESC') 
```

另外，我在你的 gem 文件中看到了

宝石'will_paginate'，'> 3.0'

我不确定符号 '> 3.0' 是否正确；'~> 3.0' 似乎更好。

如果所有这些都不能解决您的问题，请尝试再次运行“捆绑安装”...也许捆绑器有问题...并重新启动您的服务器（从您的评论中编辑）

如果您发现了什么，请告诉我们！

干杯，

# three.js - 如何处理 THREE.Vector3 中的大值并使相机正确

> ID：15735145
> 
> 赞同：1
> 
> 时间：2013-03-31T22:09:26.513
> 
> 标签：three.js

嘿，我在 THREE.Vector3 中使用 lagre 值时遇到问题，同时让相机正确。我正在尝试将钻井路径绘制成一条线。

Y 值可以是 6000000，X 可以是 500000 米，这些是钻井的值。

下面的代码将显示一条小线，但如果我增加示例中的值，则不会显示任何内容。

那么我该如何处理像这样的大值。我将从数据库中读取那些

```
var camera, scene, renderer, geometry, material;

init();
animate();

function init() {
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 2000000);
    camera.position.z = 1200000

    var material = new THREE.LineBasicMaterial({
    color: 0x0000ff,
    });

    var geometry = new THREE.Geometry();
    geometry.vertices.push(new THREE.Vector3(500000, 400000, 0));
    geometry.vertices.push(new THREE.Vector3(500000, 400000, 10000));
    geometry.vertices.push(new THREE.Vector3(500000, 400000, 25000));
    var line = new THREE.Line(geometry, material);
    scene.add(line);
    renderer = new THREE.CanvasRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

}

function animate() {
    requestAnimationFrame(animate);
    render();
}

function render() {
    renderer.render(scene, camera);
} 
```

# xpages - Mobile DataView 中的响应文档

> ID：15735150
> 
> 赞同：1
> 
> 时间：2013-03-31T22:09:56.860
> 
> 标签：xpages, xpages-extlib

有没有办法在 XPages Mobile Controls 中包含的 dataView 控件中显示包含响应文档的视图？似乎没有办法为响应文档设置不同的列名或展开/折叠响应文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T10:02:17.960

这不是移动数据视图中可用的东西。一种可能的解决方法是使用重复构建自己的东西。与此同时，我们将收回这一点，并将考虑在未来将其构建到移动数据视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T00:35:33.173

答案是：

1）构建我自己的围绕数据视图的控件。反正我有这个。

2) 根据需要传递自定义属性，包括用于 responseColumn 的新属性。

3）不要使用summaryColumn，而是使用summary facet

4) 将代码放置在具有

```
rendered="#{javascript:viewEntry.getColumnIndentLevel()==0 || !compositeData.responseColumn}"> 
```

5) 将代码放置在一个控件内以显示响应列，该控件具有

```
rendered="#{javascript:!(viewEntry.getColumnIndentLevel()==0 || !compositeData.responseColumn)}"> 
```

示例（这里我支持多个汇总列和一个响应列）：

```
<xp:this.facets>
    <xp:div xp:key="summary">
        <xp:repeat value="#{compositeData.summaryColumns}" indexVar="summaryIndex"
            rendered="#{javascript:viewEntry.getColumnIndentLevel()==0 || !compositeData.responseColumn}">
                <xp:div style="float:left;margin-right:5px;">
                <xp:text>
                    <xp:this.value><![CDATA[#{javascript:try {viewEntry.getColumnValue(compositeData.summaryColumns[summaryIndex])} catch(e) {return ""};}]]></xp:this.value>
                </xp:text>
            </xp:div>
        </xp:repeat>
        <xp:text rendered="#{javascript:!(viewEntry.getColumnIndentLevel()==0 || !compositeData.responseColumn)}">
            <xp:this.value><![CDATA[#{javascript:try {return viewEntry.getColumnValue(compositeData.responseColumn)} catch(e) {return ""};}]]></xp:this.value>
        </xp:text>
    </xp:div>
</xp:this.facets> 
```

# java - 是否可以修改 Eclipse 的注释行为以在当前缩进级别添加斜杠，而不是在行的开头？

> ID：15735156
> 
> 赞同：13
> 
> 时间：2013-03-31T22:10:36.990
> 
> 标签：java, eclipse, comments

默认情况下，按下注释掉快捷键`Ctrl`+ `/`，具有如下行为：

![在此处输入图像描述](https://i.stack.imgur.com/gg9F8.gif)

请注意，`//`get 添加在行的最左侧位置。

有没有办法设置它，以便`//`出现在与被注释掉的代码相同的缩进级别？

例如
![在此处输入图像描述](https://i.stack.imgur.com/1Agm4.gif)

也许是 Python 的习惯，但我发现当所有内容都处于相同的缩进级别时，解析起来会容易得多。

有没有办法改变斜线出现的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:26:17.733

是的，这是可能的。 [转到此链接以获取详细信息](http://www.wikihow.com/Change-the-Default-Format-Settings-in-Eclipse)

首先进入首选项，然后

> 在框的左侧，展开 Java 选项，然后展开 Code Style，最后单击 Formatter

您将登陆 Java-Profile 页面： ![在此处输入图像描述](https://i.stack.imgur.com/Ftfgy.png)

另一种临时方法是通过`CTRL`++快捷方式（ Eclipse：更改 ctrl `SHIFT`+ [shift+/ 的块注释样式](https://stackoverflow.com/questions/10534730/eclipse-change-the-block-comment-style-of-ctrlshift)）。因此，您将突出显示这些评论，然后按组合键。`F`

然后，我还将使用 ++ 的快捷方式，例如 + （按 + 、`CTRL`“键”以获取首选项页面。`SHIFT``F``ALT``F5``CTRL``3`

# python - Django 模板格式字符串

> ID：15735157
> 
> 赞同：1
> 
> 时间：2013-03-31T22:10:38.053
> 
> 标签：python, django, templates, formatting

我有一个包含字段的表单：

```
class ProfileEditForm(forms.Form):
    nickname = forms.CharField(max_length=30, label=_('Your nickname'), required=False) 
```

然后在模板中我想放置用户的昵称值。我正在使用`django-widget-tweaks`.

```
{% load widget_tweaks %}
<label>Your nickname</label> {{ form.nickname|append_attr:"value:"|add:"request.user" }} 
```

在这种情况下，我得到一个空字符串而不是值。

```
<label>Your nickname</label> {{ form.nickname|append_attr:"value:request.user" }} 
```

在这种情况下，我得到一个字符串“request.user”而不是`request.user`.

如何将数据库中的值添加到此字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:40:21.157

You're looking for the `initial` argument, which you can pass in the value you want to use to prepopulate the element. You can read about it [here](https://docs.djangoproject.com/en/dev/topics/forms/formsets/) in the docs, or from a related SO question here: [https://stackoverflow.com/a/604325/37386](https://stackoverflow.com/a/604325/37386)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:12:30.103

```
{{ form.nickname|attr:"value:request.user" } 
```

# javascript - jquery bind() 绑定到不需要的元素

> ID：15735158
> 
> 赞同：0
> 
> 时间：2013-03-31T22:10:39.993
> 
> 标签：javascript, jquery, html-lists, bind, mouseenter

我有一个`ul`，每个`li`都有一行图像，我正在尝试将一个函数绑定到每个图像上，`li`以便在`'mouseenter'`图像行上出现，并且在`'mouseout`图像行上消失......我`bind()`在`div`每个`li`基于 a a `#id`，以便他们独立工作。一切正常，除了 bind 函数似乎将每个离散函数绑定到它们各自`div`的 ，然后绑定到每个后续函数`li`在它下面...不是在上面，但是...所以当我将鼠标向下移动到较低的列表项（当前已折叠）时，聚焦的图像行会闪烁进出……如果我有一个较低的未折叠的图像行（一次只能未折叠的图像），并将鼠标向上移动到“上方”​​列表项上，不会发生这种故障行为......

`$menu1`是`div`在第一个`li`......即使只有这个代码（以及其他四个绑定调用注释掉）所有四行图像仍然触发`$menu1`淡入和淡出......

这是代码：

```
$menu1.bind('mouseenter', function(){

$menu1.animate({'opacity':'1.0'});                  

}).bind('mouseleave', function(){ 

$menu1.animate({'opacity':'0.0'}); 

}); 
```

几天来，我一直在尝试解决这个问题，而我的 jquery/javascript 技能似乎还达不到鼻烟...非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:24:21.293

我不认为 $menu1 是正确的标识符。你的意思是`$("#menu1")`？

# javascript - javascript生成一个两位数的正随机数

> ID：15735159
> 
> 赞同：5
> 
> 时间：2013-03-31T22:10:40.060
> 
> 标签：javascript, function, random

我是 javascript 新手，我需要帮助来实现一个简单的函数，该函数生成一个仅由 2 位数字组成的随机正数。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-31T22:16:30.970

对于 10 到 99 之间的随机数，请使用：

```
Math.floor(Math.random() * 90 + 10) 
```

jsFiddle 演示：http: [//jsfiddle.net/zjLY6/](http://jsfiddle.net/zjLY6/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-31T22:20:01.497

尝试

```
Math.random().toFixed(2)*100 
```

# extjs - ExtJS 文件上传字段未正确显示

> ID：15735160
> 
> 赞同：0
> 
> 时间：2013-03-31T22:10:40.227
> 
> 标签：extjs, file-upload, extjs3

我正在使用 ExtJS 3.4，我想在我的应用程序中使用 fileupload。我的代码和文件上传字段屏幕截图如下所示。显示文件上传字段时出现问题，我无法解决此错误。任何人都可以帮忙吗？

![在此处输入图像描述](https://i.stack.imgur.com/Baqj9.png)

```
var uploadFormPanel = new Ext.FormPanel({
    fileUpload  : true,
    autoHeight  : true,
    height      : 200,
    bodyStyle   : 'padding: 10px 10px 0 10px;',
    labelWidth  : 50,
    defaults    : {
        anchor      : '95%',
        allowBlank  : false,
        msgTarget   : 'side'
    },
    items: [
            {
                xtype           : 'combo',
                fields          : ['id','name'],
                name            : 'fuelCompany',
                store           : comboStore,
                valueField      : 'id',
                displayField    : 'name',
                submitValue     : true,
                typeAhead       : true,
                triggerAction   : 'all',
                selectOnFocus   : true,
                allowBlank      : false,
                mode            : 'remote',
                anchor          : '95%'
            },{
                xtype       : 'fileuploadfield',
                id          : 'form-file',
                name        : 'file',
                buttonText  : 'select file',
                buttonCfg   : {
                    iconCls : 'upload-icon'
                }
            }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:40:44.020

这有点棘手，但我想我想出了如何让按钮显示文本：

```
//...
{
    xtype       : 'fileuploadfield',
    id          : 'form-file',
    name        : 'file',
    buttonCfg   : {
        text    : 'select file'
    }
}
//... 
```

您需要将按钮文本放在`buttonCfg`按钮中以正确调整大小。`iconCls`唯一的缺点是，如果您希望按钮自动调整大小，则无法添加按钮。作为替代方案，您可以使用一些解决方法：

```
//...
{
    xtype       : 'fileuploadfield',
    id          : 'form-file',
    name        : 'file',
    buttonCfg   : {
        // The text cfg takes html too
        text    : '<div class="upload-icon"' +
                  ' style="width: 15px; height: 15px; display: inline-block;' +
                  ' margin: 0 5px;"></div>' +
                  'select file'
    }
}
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:30:48.903

它无法访问 css 文件，我将 css 样式放在我的 javascript 代码定义的 jsp 文件中解决了我的问题。

# emacs - 没有可保存的内容时更新标签栏

> ID：15735163
> 
> 赞同：3
> 
> 时间：2013-03-31T22:11:32.563
> 
> 标签：emacs, elisp

我在 Emacs 中使用 tab-bar 来标记我的工作，到目前为止，我发现 tabbar-ruler 基本上添加了一个指示器来显示文件何时被修改。显然，它本身不起作用。

我添加了一些代码让 tabbar 知道文件已被修改，但是当我恢复我的工作时它不起作用。如果可能的话，我需要一些钩子让emacs知道在达到“不必保存”状态时，它会更新标签栏。

这是到目前为止的代码：

```
(defadvice tabbar-buffer-tab-label (after fixup_tab_label_space_and_flag activate)
(setq ad-return-value
     (if (and (buffer-modified-p (tabbar-tab-value tab))
              (buffer-file-name (tabbar-tab-value tab)))
         (concat " " (concat ad-return-value " "))
       (concat " " (concat ad-return-value " ")))))

;; Called each time the modification state of the buffer changed.
(defun er/modification-state-change ()
    (tabbar-set-template tabbar-current-tabset nil)
    (tabbar-display-update))
(add-hook 'after-save-hook 'er/modification-state-change)

;; First-change-hook is called BEFORE the change is made.
(defun er/on-buffer-modification ()
    (set-buffer-modified-p t)
    (er/modification-state-change))
(add-hook 'first-change-hook 'er/on-buffer-modification)

;; Retrieve original state after revert is made.
(defun er/on-buffer-revert ()
    (set-buffer-modified-p nil)
    (er/modification-state-change))
(add-hook 'after-revert-hook 'er/on-buffer-revert) 
```

er/on-buffer-revert 函数是我尝试至少达到恢复的缓冲区状态。也不行。

第一段代码，顺便说一句，只是添加一个额外的空格标签栏，原来没有。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-11T04:36:58.027

我知道你几年前问过这个问题，但这里有一个正确支持还原的工作示例。请注意，它在以下情况下正确支持 tabbar 状态：

*   缓冲恢复
*   撤消回到上次保存的状态
*   更改文本以匹配上次保存之前的内容

```
 (defun my-ignore-buffer-p ()
      (not (buffer-file-name)))

    (setq my-buffer-hashes (make-hash-table :test 'equal))
    (defun my-set-buffer-hash ()
      (puthash (current-buffer) (buffer-hash) my-buffer-hashes))
    (defun my-get-buffer-hash ()
      (gethash (current-buffer) my-buffer-hashes))
    (defun my-buffer-hash-changed-p ()
      (not (string= (buffer-hash) (my-get-buffer-hash))))

    ;; Hook save and change events to show modified buffers in tabbar
    (defun on-saving-buffer ()
      (tabbar-set-template tabbar-current-tabset nil)
      (tabbar-display-update))
    (defun on-modifying-buffer ()
      (unless (my-ignore-buffer-p)
        (my-set-buffer-hash)
        (set-buffer-modified-p (buffer-modified-p))
        (tabbar-set-template tabbar-current-tabset nil)
        (tabbar-display-update)))
    (defun after-modifying-buffer (begin end length)
      (unless (my-ignore-buffer-p)
        (set-buffer-modified-p (my-buffer-hash-changed-p))
        (tabbar-set-template tabbar-current-tabset nil)
        (tabbar-display-update)))

    (add-hook 'after-save-hook 'on-saving-buffer)
    (add-hook 'first-change-hook 'on-modifying-buffer)
    (add-hook 'after-change-functions 'after-modifying-buffer) 
```

# php - Nginx 重写 40 4

> ID：15735170
> 
> 赞同：0
> 
> 时间：2013-03-31T22:12:34.733
> 
> 标签：php, mod-rewrite, nginx, rewrite, http-status-code-404

我花了很长时间在谷歌上寻找任何信息，并询问了一些人（在有人建议我这样做之前）。

下面是我的 nginx.conf 中无法正常工作的部分。工作原理：重写 BlogHome、Home 和 About。

什么不起作用 - 重写为 C_ReadBlogURL 和 C_ReadAllPosts 。出于某种原因，这两个都是 404，即使路径是正确的。我不明白为什么——而且我整天都在为这个困惑。我认为这可能与它们是 php 文件有关，但我不知道。

任何帮助将不胜感激 ：）

```
server {
listen   80;

server_name blog.example.com;

root /usr/share/nginx/www/example;
index /views/Read/BlogHome.php;

location / {
    rewrite ^/?$ /views/Read/BlogHome.php last; break;
    rewrite ^/(.+)/?$ /controllers/read/C_ReadBlogURL.php?url=$1 last; break;
}
location ~ \.php$ {
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    include fastcgi_params;
}
}

server {
listen 80;
server_name example.com;

root /usr/share/nginx/www/example;
index /controllers/read/C_ReadLatestPost.php;

location ~ ^(/posts\.php) {
    rewrite ^(/posts\.php)  /controllers/read/C_ReadAllPosts.php?type=$arg_type last; break;
}

location ~ ^/?$ {
    rewrite ^/?$ /controllers/read/C_ReadLatestPost.php last; break;

}

location ~ ^(/about)/?$ {
    rewrite ^(/about)/?$ /views/Read/About.php last; break;
}

location ~ \.php$ {
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    include fastcgi_params;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:53:43.627

() 在第一条规则中不是必需的，但这只是一个细节。

我认为你的问题是“break;”，只有“last;” 是本案的正确选择。

我试过这个并且它有效（test1.html 和 test2.html 有不同的内容，我知道何时输入每个规则）：

```
rewrite ^/posts.php /test1.html?type=$arg_type last;
rewrite ^/(.+)/?$ /test2.html?url=$1 last; 
```

所以，对你来说，这应该工作：

```
rewrite ^/posts.php /controllers/read/C_ReadAllPosts.php?type=$arg_type last;
rewrite ^/(.+)/?$ /controllers/read/C_ReadBlogURL.php?url=$1 last; 
```

或根据您的上次更新：

```
rewrite ^/posts\.php /controllers/read/C_ReadAllPosts.php?type=$arg_type last;
rewrite ^/?$ /views/Read/BlogHome.php last;
rewrite ^/(.+)/?$ /controllers/read/C_ReadBlogURL.php?url=$uri last; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:54:10.257

删除每一个“休息”；在您的每个重写规则中。它不属于这里。第一次“break;”之后的任何重写规则；指令将被忽略。不要认为那是你想要的。

参考：[http ://wiki.nginx.org/HttpRewriteModule#break](http://wiki.nginx.org/HttpRewriteModule#break)

[**更新**]基于下面评论中的 nginx 配置文件。

请注意，“ [break 指令](http://wiki.nginx.org/HttpRewriteModule#break)与“rewrite...break;”不同，我的主要更改是将 2 条规则移动到 php 位置块中，并将 'last' 替换为 'break'，这样它就不会触发另一轮位置搜索。

您的第二个重写规则是错误的（在正则表达式中使用“[]”与“（）”不同）。我的理解是你想匹配所有剩余的 php 脚本。所以我改变了这个规则。

我还删除了“break”的另一个外观；从“位置/”块。您可能只想放一个“休息”；IF 块内的指令。除此之外，我看不到该指令的任何实际用法。

[ **UPDATE2** ] 将所有内容也移动到“位置/”块也是有意义的。

```
server {
    listen 80;
    server_name blog.example.com;
    root /usr/share/nginx/www/example;
    index /views/Read/BlogHome.php;

    location / {
        rewrite ^(/posts\.php) /controllers/read/C_ReadAllPosts.php?type=$arg_type break;
        rewrite ^/?$ /views/Read/BlogHome.php break;
        rewrite ^ /controllers/read/C_ReadBlogURL.php?url=$uri break;

        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_index index.php;
        include fastcgi_params;
   }
} 
```

# javascript - jQuery Mobile：如何在动态生成的页面之间导航

> ID：15735173
> 
> 赞同：1
> 
> 时间：2013-03-31T22:12:44.587
> 
> 标签：javascript, jquery, html, jquery-mobile

使用[jQuery Mobile](http://jquerymobile.com)，下面的代码执行以下操作...

1) 它生成菜单项并将它们添加到索引页面。

2) 它为菜单项创建实际页面。

现在，当我单击菜单项时，它似乎没有移动到该页面？我可以在标记中看到具有正确 ID 的页面。

这就是我到目前为止所拥有的。

```
$.each(siteData["pages"], function(i,v) {
   $.mobile.activePage.find('[data-role=content]').append('' +
       '<a href='+ v["id"] + ' data-role="button">' + v["name"] + '</a>').trigger('create');

        // Prepare your page structure
        var newPage = $("<div data-role='page' id=>" + v["id"] +
           "<div data-role=header><a data-iconpos='left' data-icon='back' href='#' data-role='button' data-rel='back'>Back</a>" +
                         "<h1>Dynamic Page</h1>" +
                         "</div>" +
                         "<div data-role=content>Stuff here</div>" +
                         "</div>");

                 // Append the new page info pageContainer
                 newPage.appendTo($.mobile.pageContainer);

             }); 
```

**标记**

```
<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
        <h3></h3>
    </div>
    <div data-role="content" class="navlist"></div>    
</div> 
```

**如何在动态生成的页面之间导航？**

有人可以给我一个使用我的代码的例子。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:26:49.887

不幸的是，您几乎没有错误。

看看我的工作示例，它是由您的代码制成的：http: [//jsfiddle.net/Gajotres/3kPTf/](http://jsfiddle.net/Gajotres/3kPTf/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $.mobile.activePage.find('[data-role=content]').append('<a href="#second" data-role="button">Second</a>').trigger('create');

    var newPage = $("<div data-role='page' id='second'><div data-role=header><a data-iconpos='left' data-icon='back' href='#' data-role='button' data-rel='back'>Back</a>" +
                         "<h1>Dynamic Page</h1>" +
                         "</div>" +
                         "<div data-role=content>Stuff here</div>" +
                         "</div>");

    // Append the new page info pageContainer
    newPage.appendTo($.mobile.pageContainer);    

}); 
```

*   第一个错误，关闭按钮内的 a 标签并给它一个 # 标签。
*   您的动态页面 div 未正确关闭

# css - 样式子菜单 CSS

> ID：15735176
> 
> 赞同：0
> 
> 时间：2013-03-31T22:13:09.360
> 
> 标签：css, wordpress, drop-down-menu, wordpress-theming

我试图在我的 wordpress 菜单上设置子菜单的样式

[http://www.milknhny.co.uk/SofiaWork/](http://www.milknhny.co.uk/SofiaWork/)

我试过了 `.headermenu ul ul`

等等，......它没有用，任何人都可以建议正确的类结构吗？

我已经试过了

`.headermenu ul li ul li`还

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:17:00.540

你`ul`的有一个属`id`​​性。为什么不在css中使用它：
`#menu-header-menu`- 我认为它是顶级菜单。
`#menu-header-menu .sub-menu`- 针对顶级菜单的所有子菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:20:43.897

不确定您要自定义什么，但锚文本也有一个不利于样式的背景，因此如果您删除它，它可以帮助您更好地设置列表项的样式。

```
#headermenu ul ul li a {
background: none;
}

#headermenu ul ul li a:hover, ul.headermenu ul ul li:hover {
background: none;
} 
```

然后使用：

```
#headermenu ul ul li {
background: red ;
} 
```

和：

```
#headermenu ul ul li:hover {
background: yellow;
} 
```

# php - 无法在代码点火器中添加链接

> ID：15735181
> 
> 赞同：0
> 
> 时间：2013-03-31T22:13:41.207
> 
> 标签：php, html, codeigniter, codeigniter-2

我是 Wamp 服务器的初学者。我正在尝试在 netbeans IDE 中设计一个项目名称为“helloall”的网站。

在视图文件夹中，我有两个文件`layout1.php`和`layout2.php`.

我正在尝试以以下方式拨打`layout2.php`电话`layout1.php`。

```
 <div id="logo"> <a href="layout2.php" title="layoutishere"><span>LAYOUT2</span></a> </div> 
```

但我面临以下错误，我无法找到原因。`/helloall/layout2.php`在此服务器上找不到请求的 URL 。

我需要更改配置中的任何内容吗？我正在使用所有默认配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:21:13.323

根据 Codeigniter 标准，您必须遵循 MVC 模式，因此：

模型 -> 控制器 -> 视图

现在，假设您想可视化`layout2.php`视图，您有 2 次机会：

1 - 直接在需要的地方加载视图`$this->load->view('layout2');`

2 - 创建 url 功能 ad hoc 类型`www.site.com/layout/layout1`和`www.site.com/layout/layout2`：

控制器`layout.php`

```
 class Layout extends CI_Controller {

        function layout1(){
            $this->load->view('layout1');
    }
        function layout2(){
            $this->load->view('layout2');
    }
} 
```

我真的建议你看看如何在[Codeigniter Doc中创建控制器](http://ellislab.com/codeigniter/user-guide/general/controllers.html)

# livescript - 类中的函数修改原型而不是仅仅返回一个对象

> ID：15735182
> 
> 赞同：0
> 
> 时间：2013-03-31T22:13:43.700
> 
> 标签：livescript

我在 LiveScript (1.1.1) 中有这段代码：

```
class A
  b = -> { a: 1 b: 2 } 
```

它编译成这样：

```
var A;
A = (function(){
  A.displayName = 'A';
  var b, prototype = A.prototype, constructor = A;
  b = function(){
    return prototype.a = 1, prototype.b = 2, prototype;
  };
  function A(){}
  return A;
}()); 
```

为什么 b() 会修改原型？我希望它只返回一个`{ a: 1, b: 2 }`关联数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:45:35.227

正因为如此： [https ://github.com/gkz/LiveScript/commit/d49b3ee8e8e2d5d7b9f128fa98c210b582e095fe](https://github.com/gkz/LiveScript/commit/d49b3ee8e8e2d5d7b9f128fa98c210b582e095fe)

那么可能应该删除它，mmh。

# c# - 从 OleDbDataAdapter 填充数据集

> ID：15735184
> 
> 赞同：2
> 
> 时间：2013-03-31T22:13:57.357
> 
> 标签：c#, asp.net, oledbdataadapter

我正在使用 OleDbDataAdapter 读取数据集中 Excel 工作表的内容。Excel 表由 20391 行组成，数据集在我的本地计算机上运行时读取总行数，但在 IIS7.5 服务器上运行代码时，它只读取 FIRST 12463！！

我的连接字符串：

```
switch (strFileType.Trim())
       {
           case ".xls":
               connString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + strNewPath +
                            ";Extended Properties=\"Excel 8.0;HDR=Yes;IMEX=2\"";
               break;
           case ".xlsx":
               connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + strNewPath +
                            ";Extended Properties=\"Excel 12.0;HDR=Yes;IMEX=2\"";
               break;
       }

var query = "SELECT * FROM [" + excelSheets[0] + "]";

//Create the connection object
var conn = new OleDbConnection(connString);
//Open connection
if (conn.State == ConnectionState.Closed) conn.Open();
//Create the command object
var cmd = new OleDbCommand(query, conn);
var da = new OleDbDataAdapter(cmd);
var ds = new DataSet();
da.Fill(ds); 
```

有没有办法将 da.Fill 结果划分为多个数据表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:56:28.590

我做了@dash 的建议并使用了[Excel 数据阅读器](http://exceldatareader.codeplex.com/)，它工作正常。

这是代码

```
 FileStream stream = File.Open(strNewPath , FileMode.Open, FileAccess.Read);            
        //1\. Reading from a binary Excel file ('97-2003 format; *.xls)
        //IExcelDataReader excelReader = ExcelReaderFactory.CreateBinaryReader(stream);
        //...
        //2\. Reading from a OpenXml Excel file (2007 format; *.xlsx)
        IExcelDataReader excelReader = ExcelReaderFactory.CreateOpenXmlReader(stream);;                      
        excelReader.IsFirstRowAsColumnNames = true;
        DataSet result = excelReader.AsDataSet(); 
```

# java - 在窗口上打印一组数字

> ID：15735185
> 
> 赞同：1
> 
> 时间：2013-03-31T22:13:59.223
> 
> 标签：java, graphics

您好，我是 Java 图形的新手，只是在尝试一些东西，但我对如何在创建的窗口上显示数组中的数字感到困惑？我不确定它是否与文本相同？

```
import java.util.Scanner;
import javax.swing.JFrame;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class area extends JFrame{

    int[] myArray;
    myArray = new int[3];
    myArray[0] = 1;
    myArray[1] = 2;
    myArray[2] = 3;

JTextArea area = new JTextArea();
for (int i=0; i<myArray.length; i++)
{
    area.append(myArray[i]+"\n");
}
add(area);  

public static void main(String args[]) {

area gui = new area(); 
gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
gui.setSize(400,200);
gui.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:51:32.290

使用 JTextArea，您可以将数组保存为字符串

```
String text;
for(int w : array) {
   w=Integer.toString(w);
   text+=w;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:17:54.733

您可以使用 JTextArea。

```
JTextArea ta = new JTextArea();
for (int i=0; i<array.length; i++)
{
    ta.append(array[i]+"\n");
}
add(ta); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T00:32:27.990

你在使用像eclipse这样的IDE吗？如果没有可能会有所帮助。看起来您的部分代码位于错误的位置。而不是构造函数或 init 方法，它位于 var 声明的下方。IDE 将帮助您。还可以（耐心地）阅读一些更基本的教程并查看现有的小代码。

以下代码对我有用//constructor 附近的小编辑

```
 import java.util.Scanner;
    import javax.swing.JFrame;
    import javax.swing.*;
    import java.awt.*;
    import java.awt.event.*;

    //put in a file called area.java
    public class area extends JFrame{

            int[] myArray;
            JTextArea area = new JTextArea();
     //constructor 
     area(){
            myArray = new int[3];
            myArray[0] = 1;
            myArray[1] = 2;
            myArray[2] = 3;

    for (int i=0; i<myArray.length; i++)
    {
            area.append(i + " " + myArray[i]+"\n");
    }
    add(area);

       }
    public static void main(String args[]) {

         area gui = new area();
         gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         gui.setSize(400,200);
         gui.setVisible(true);
       }
    } 
```

# java - Android：使用 Apache 服务器将图像上传到 Web 服务时出现问题

> ID：15735189
> 
> 赞同：0
> 
> 时间：2013-03-31T22:14:11.703
> 
> 标签：java, android, web-services, tomcat, upload

我是 Android 和 Web 服务的新手，尤其是在这些方面，我正在尝试使用 Web 服务创建一个 Web 服务，以存储从 Android 应用程序发送的图像。但是，我在将图像上传到服务器时遇到问题，并且没有显示。应该存放在哪里？另一个问题是，即使我创建了一个 Web 服务，它也只显示 HelloWorld，它最初是在 NetBeans 中创建的。这是logcat日志：

```
04-01 00:03:55.831: E/SpannableStringBuilder(4384): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-01 00:03:55.831: E/SpannableStringBuilder(4384): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
04-01 00:04:55.792: W/IInputConnectionWrapper(4384): getSelectedText on inactive InputConnection
04-01 00:04:55.792: W/IInputConnectionWrapper(4384): setComposingText on inactive InputConnection
04-01 00:05:45.074: I/System.out(4555): Not a DRM File, opening notmally
04-01 00:05:45.074: I/System.out(4555): buffer returned 
04-01 00:05:45.089: D/dalvikvm(4555): GC_FOR_ALLOC freed 79K, 9% free 7518K/8195K, paused 17ms, total 17ms
04-01 00:05:45.097: I/dalvikvm-heap(4555): Grow heap (frag case) to 12.278MB for 4579316-byte allocation
04-01 00:05:45.113: D/dalvikvm(4555): GC_CONCURRENT freed 1K, 6% free 11988K/12679K, paused 2ms+2ms, total 18ms
04-01 00:05:45.285: D/libEGL(4555): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
04-01 00:05:45.285: D/libEGL(4555): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
04-01 00:05:45.292: D/libEGL(4555): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
04-01 00:05:45.371: D/OpenGLRenderer(4555): Enabling debug mode 0
04-01 00:05:45.691: I/System.out(4555): Status is HTTP/1.1 200 OK
04-01 00:05:45.691: I/System.out(4555): Response: <!DOCTYPE html><html>    <head>        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">        <title>JSP Page</title>    </head>    <body>        <h1>Hello World!</h1>    </body></html> 
```

这是使用 NetBeans 和 Apache Tomcat 创建的 Web 服务，它应该检索图像。我不知道为什么，但是当我启动服务器时它只显示 HelloWorld

```
@Path("generic")
public class GenericResource {

    @Context
    private UriInfo context;

    /**
     * Creates a new instance of GenericResource
     */
    public GenericResource() {
    }

    /**
     * Retrieves representation of an instance of za.org.droid.GenericResource
     * @return an instance of java.lang.String
     */
    @POST
@Path("/images")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response imageUpload(@FormDataParam("image") InputStream hereIsImage, @FormDataParam("image") FormDataContentDisposition hereIsName) {
    String path = System.getenv("HOME")+"/tmp/";
    if(hereIsName.getSize()==0) {
        return Response.status(500).entity("image parameter is missing").build();
    }
    String name = hereIsName.getFileName();
    path += name;

    try {
        OutputStream out = new FileOutputStream(new File(path));
        int read;
        byte[] bytes = new byte[1024];
        while ((read = hereIsImage.read(bytes)) != -1) {
            out.write(bytes, 0, read);
        }
        out.flush();
        out.close();
    } catch (IOException e) {
        return Response.status(500).entity(name + " was not uploaded\n"+e.getMessage()).build();
    }
    return Response.status(200).entity(name + " was uploaded").build();
}
} 
```

最后是 Android 应用程序的代码，它从 SDCard 获取图像并将其发送到服务器。

```
public class MainActivity extends Activity{
    Bitmap bm;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    try {
        bm = BitmapFactory.decodeFile("/sdcard/DCIM/FinalM8.JPG");
        if(bm==null)
            throw new Exception("no picture!");
        new MyAsyncTask().execute();
    } catch (Exception e) {
        e.printStackTrace();
    }
}
private class MyAsyncTask extends AsyncTask<Void, Void, Void>{
protected Void doInBackground(Void... arg0) {
    // TODO Auto-generated method stub
    try {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        bm.compress(CompressFormat.JPEG, 50, bos);
        byte[] data = bos.toByteArray();
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost postRequest = 
            new HttpPost("http://192.168.1.35:8080/WebApplication4");
        ByteArrayBody bab = new ByteArrayBody(data, "FinalM8.JPG");
        MultipartEntity reqEntity = new MultipartEntity(
                HttpMultipartMode.BROWSER_COMPATIBLE);
        reqEntity.addPart("image", bab);
        postRequest.setEntity(reqEntity);
        HttpResponse response = httpClient.execute(postRequest);
        System.out.println("Status is "+response.getStatusLine());
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                response.getEntity().getContent(), "UTF-8"));
        String sResponse;
        StringBuilder s = new StringBuilder();
        while ((sResponse = reader.readLine()) != null) {
            s = s.append(sResponse);
        }
        System.out.println("Response: " + s);
    } catch (Exception e) {
        // handle exception here
        e.printStackTrace();
    }
    return null;
}
}
} 
```

我会很感激一些帮助，因为我对 WebServices 很陌生，如果您认为对您有用，请随时使用该代码

感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:19:55.643

首先，我`OutOfMemoryError`在 Android 端看不到任何内容，但这不是您应该上传文件的方式。

您正在尝试从 SD 卡读取文件并将其解压缩为 a `Bitmap`，然后将其重新压缩为 .jpg 字节数组并上传。

这会导致明显的问题：

1.  对于许多设备来说，这`Bitmap`将太大并导致 `OutOfMemoryError`.
2.  由于解码和编码，您发送的图像将与原始图像不同。
3.  不要使用硬编码的 SD 卡路径，而是考虑使用： `Environment.getExternalStorageDirectory()`.

而不是发送 a `Bitmap`，您应该将文件作为 an 打开`InputStream`并发送。

**示例**：

```
String url = Environment.getExternalStorageDirectory() + "/DCIM/FinalM8.JPG";
File f_path = new File(url);
InputStream fis = new BufferedInputStream(new FileInputStream(f_path));
int d;
while ((d = fis.read()) != -1) {
    bos.write(d);
} 
```

# c# - WCF 服务：类的命名空间和源已更改

> ID：15735192
> 
> 赞同：1
> 
> 时间：2013-03-31T22:14:31.953
> 
> 标签：c#, wcf, service, namespaces

我有 3 个项目的解决方案： 1\. 客户端（参考：通过 Visual Studio 2012 创建的 DataContracts 和 ServiceReference，名称为 TaskerWcfService） 2\. DataContracts 3\. WCF 服务（DataContracts）

首先，我创建了 WCFService 并且在 DataContracts 中只有一个类：

```
[DataContract]
public class WorkItem
{
    [DataMember]
    public Int64 Id { get; set; }
    [DataMember]
    public String Title { get; set; }
    [DataMember]
    public String Description { get; set; }
    [DataMember]
    public String ItemType { get; set; }
} 
```

然后，我创建了一个带有 ServiceReference（名称：TaskerWcfReference）的客户端，并且 WorkItem 类的命名空间是 - DataContracts lib。最后，我用额外的类扩展了 WCF 服务和 DataContracts：

```
public class InfoData
{
    [DataMember]
    public Guid Id { get; set; }
    [DataMember]
    public String Value { get; set; }
    [DataMember]
    public Int32 Order { get; set; }
    [DataMember]
    public bool IsDefault { get; set; }
} 
```

但是当我更新 ServiceReference 时，我发现 InfoData 类在自动生成的代理中，它的命名空间是：TaskerWcfReference.InfoData。

为什么以类似方式描述的类 - 放置在不同的地方？服务契约的函数以同样的方式返回 Generic.List 和 T。服务合同的描述也类似。

# java - 是否可以将一个变量的名称设置为另一个变量的内容？

> ID：15735195
> 
> 赞同：1
> 
> 时间：2013-03-31T22:15:16.080
> 
> 标签：java

假设我有一个`test`值为的变量`example`。我想创建一个名为 的值的`test`新变量，因此将调用新变量`example`。

这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T23:25:20.653

不，这在 Java 中是不可能的。变量名不能在运行时设置。但是，您可以使用将标识符[`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)映射到值的 a 来模拟这一点。`String`

```
String test = "example";
...
Map<String, String> vars = new HashMap<String, String>();
vars.put(test, "..."); 
```

# javascript - 在更改范围选择器按钮上更改 HighStock 图表标签

> ID：15735199
> 
> 赞同：1
> 
> 时间：2013-03-31T22:16:05.000
> 
> 标签：javascript, highcharts, highstock

如何在单击 Highstock 中的范围选择器按钮时更改图表标签 ( [http://api.highcharts.com/highstock#labels )。](http://api.highcharts.com/highstock#labels)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:32:00.127

您可以将[http://api.highcharts.com/highstock#xAxis.labels.useHTML](http://api.highcharts.com/highstock#xAxis.labels.useHTML)设置为 true 并使用格式化程序[http://api.highcharts.com/highstock#xAxis.labels.formatter](http://api.highcharts.com/highstock#xAxis.labels.formatter)在即 div 中返回值。然后你用 jquery 修改标签的内容。

# javascript - 尝试仅使用 Modernizr 为触摸设备加载样式表

> ID：15735202
> 
> 赞同：3
> 
> 时间：2013-03-31T22:16:20.523
> 
> 标签：javascript, css, modernizr

我听说 Modernizr 的触控测试是测试正在查看页面的设备是否启用触控或多点触控的最佳方法之一。

我正在尝试使用它（触摸测试）以及modernizr的加载功能来仅在设备具有触摸功能时加载样式表。

但是，我的代码似乎不起作用。我究竟做错了什么？

```
<script type="text/javascript">
Modernizr.load({
    test: Modernizr.touch,
    yep: 'assets/css/touch.css'
});
</script> 
```

更新：对不起，我应该澄清什么是无效的：当我在我的多点触控智能手机上访问页面时，样式没有生效。我在普通样式表中应用了样式并且它们生效，但是当我将它们切换到 touch.css 并尝试使用 Modernizr 有条件地加载它时，它不起作用。我的 Modernizr 副本确实包括 yepnope 和触摸测试，因为我在它们工作的其他情况下都使用它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:38:28.673

您的脚本块看起来正确，所以问题一定是别的。由于您确定您的 Modernzr 构建包含 Yepnope，因此这里有一些猜测：

1.  您的脚本块位于包括 Modernzr 在内的脚本标记之前
2.  CSS的路径错误

我会首先`callback: function(){ alert('loaded!'); }`在 .load() 语句中添加一个，看看是否会发生这种情况。如果没有，我将替换`Modernzr.touch`为`true`并在桌面浏览器上进行测试，以查看是否发生了 Javascript 错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T07:05:41.867

另一种解决方案是不为支持触摸的设备加载额外的样式表，而是向其中添加一个类`<body>`。

像这样：

```
if(Modernizr.touch) {
    $('body').addClass('touch');
} 
```

然后在您的样式表类前面加上`.touch`：

```
a:hover {
    color: red;
}

a, .touch a:hover {
    color: blue;
} 
```

当触摸和非触摸设备的 CSS 存在许多实质性差异时，加载额外的样式表是一个好主意。在这种情况下，只使用一个样式表不是一个好主意，因为它会变得非常大。我认为，如果您只有微小的差异，那么向 body（或任何其他元素）添加一个 .touch 类是更好的方法。

# c++ - 失去大整数的准确性（pow？）

> ID：15735208
> 
> 赞同：1
> 
> 时间：2013-03-31T22:17:05.893
> 
> 标签：c++

我正在尝试最小化能量函数以找到解决 Tammes 问题的方法。我的代码使用梯度流方法工作，我可以更改变量 t 的值（能量函数的功率）来估计解决方案。

Tammes 问题是 t 趋于无穷大时的结果，因此显然我希望 t 尽可能大。

当我增加我的解决方案（计算的能量）时，问题是我失去了准确性。

我相信这与 pow() 函数以及它使用如此大的整数计算的事实有关。

我的代码如下：

```
#include <stdio.h> 
#include <string.h>
#include <math.h>
#include <iostream>
#include <iomanip>
#include <fstream>
#include <time.h>
#include <stdlib.h>
#include <sstream>
using namespace std;
#define PI 3.14159265358979323846

int main()
{

  int a,b,c,d,f,i,j,k,m,n,s,t,Success,Fails;
  double p,theta,phi,Time,Averagetime,Energy,energy,Distance,Length,DotProdForce,
         Forcemagnitude,ForceMagnitude[201],Force[201][4],E[1000001],En[501],Epsilon[4],Ep,
         x[201][4],new_x[201][4],y[201][4],A[201],alpha[201][201],degree,bestalpha[501];

  clock_t t1,t2;
  t1=clock();

t=1;

while(t<1001){

n=2;

while(n<51){

cout << "N=" << n << "\n";

  b=1;
  Time=0.0;

  while(b<101){

    clock_t t3,t4;
    t3=clock();

    if(n>200){
      cout << n << " is too many points for me :-( \n";
      exit(0);
    }

    srand((unsigned)time(0));  

    for (i=1;i<=n;i++){
      x[i][1]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
      x[i][2]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
      x[i][3]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;

      Length=sqrt(pow(x[i][1],2)+pow(x[i][2],2)+pow(x[i][3],2));

      for (k=1;k<=3;k++){
        x[i][k]=x[i][k]/Length;
      }
    }

    Energy=0.0;

    for(i=1;i<=n;i++){
      for(j=i+1;j<=n;j++){
        Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                    +pow(x[i][3]-x[j][3],2));

        Energy=Energy+1.0/pow(Distance,t);
      }
    }

    for(i=1;i<=n;i++){
      y[i][1]=x[i][1];
      y[i][2]=x[i][2];
      y[i][3]=x[i][3];
    }

    m=100;

    if (m>100){
      cout << "The m="<< m << " loop is inefficient...lessen m \n";
      exit(0);
    }

    a=1;

    while(a<m){

      for (i=1;i<=n;i++){
        x[i][1]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
        x[i][2]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
        x[i][3]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;

        Length=sqrt(pow(x[i][1],2)+pow(x[i][2],2)+pow(x[i][3],2));

        for (k=1;k<=3;k++){
          x[i][k]=x[i][k]/Length;
        }
      }

      energy=0.0;

      for(i=1;i<=n;i++){
        for(j=i+1;j<=n;j++){
          Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                        +pow(x[i][3]-x[j][3],2));

          energy=energy+1.0/pow(Distance,t);
        }
      }

      if(energy<Energy)
        for(i=1;i<=n;i++){
          for(j=1;j<=3;j++){
            Energy=energy;
            y[i][j]=x[i][j];
          }
        }
      else
        for(i=1;i<=n;i++){
          for(j=1;j<=3;j++){
            energy=Energy;
            x[i][j]=y[i][j];
          }
        }

      a=a+1;
    }

    /* 
    ostringstream String1;
    String1 << "BestTamrandompoints_" << t << "_" << n;  //add number

    ofstream File1 (String1.str().c_str());
    File1 << "Energy=" << Energy << "\n";
    for(i=1;i<=n;i++){
      File1 << x[i][1] << " " <<   x[i][2] << " " << x[i][3] << "\n";
    }
    File1.close(); 
    */

    E[0]=Energy;

    a=1;
    s=0;
    f=0;
    Forcemagnitude=1.0;

    if(n>80 && t<11)
      p=0.005;
    else if(n>60 && t<11)
      p=0.01;
    else if(n>40 && t<11)
      p=0.02;
    else if(n>25 && t<11)
      p=0.05;
    else if(n>40 && t>11)
      p=0.002;
    else if(n>30 && t>11)
      p=0.005;
    else if(n>20 && t>11)
      p=0.01;
    else if(n>5 && t>11)
      p=0.025;
    else
      p=0.05;

    while(Forcemagnitude>0.000001 && a<1000001){

      for(i=1;i<=n;i++){ 
        Force[i][1]=0.0; 
        Force[i][2]=0.0; 
        Force[i][3]=0.0; 
      } 

      for(i=1;i<=n;i++){ 
        for(j=1;j<i;j++){

          Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                        +pow(x[i][3]-x[j][3],2));

          Force[i][1]=Force[i][1]+((x[i][1]-x[j][1])/(pow((Distance),3))); 
          Force[i][2]=Force[i][2]+((x[i][2]-x[j][2])/(pow((Distance),3))); 
          Force[i][3]=Force[i][3]+((x[i][3]-x[j][3])/(pow((Distance),3))); 
        } 

        for (j=i+1;j<=n;j++){ 

          Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                        +pow(x[i][3]-x[j][3],2));

          Force[i][1]=Force[i][1]+((x[i][1]-x[j][1])/(pow((Distance),3))); 
          Force[i][2]=Force[i][2]+((x[i][2]-x[j][2])/(pow((Distance),3))); 
          Force[i][3]=Force[i][3]+((x[i][3]-x[j][3])/(pow((Distance),3)));
        }
      }

      for(i=1;i<=n;i++){

        DotProdForce=Force[i][1]*x[i][1]+Force[i][2]*x[i][2]+Force[i][3]*x[i][3];

        y[i][1]=x[i][1];
        y[i][2]=x[i][2];
        y[i][3]=x[i][3];

        Force[i][1]=Force[i][1]-DotProdForce*y[i][1];
        Force[i][2]=Force[i][2]-DotProdForce*y[i][2];
        Force[i][3]=Force[i][3]-DotProdForce*y[i][3];

        x[i][1] = y[i][1]+p*(Force[i][1]);
        x[i][2] = y[i][2]+p*(Force[i][2]);
        x[i][3] = y[i][3]+p*(Force[i][3]);

        Length=sqrt(pow(x[i][1],2)+pow(x[i][2],2)+pow(x[i][3],2));

        for (j=1;j<=3;j++){
          x[i][j]=x[i][j]/Length;
        }
      }

      energy=0.0;

      for(i=1;i<=n;i++){
        for(j=i+1;j<=n;j++){

          Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                        +pow(x[i][3]-x[j][3],2));
          energy=energy+1.0/pow(Distance,t);
        }
      }

      E[a]=energy;

      for(i=1;i<=n;i++){
        ForceMagnitude[i]=pow((pow(Force[i][1],2)+pow(Force[i][2],2)
                               +pow(Force[i][3],2)),0.5);
      }

      cout << "E[" << a << "]=" << E[a] << "\n";

      cout << fixed << setprecision(40) << "Energy=" << Energy << " energy=" << energy << "\n";

      if (energy<Energy)
        Energy=energy,s=s+1;
      else
        energy=Energy,f=f+1,p=(9.5*p)/10;

      for(i=1;i<=n-1;i++){
        if(ForceMagnitude[i]<ForceMagnitude[i+1])
          ForceMagnitude[i]=ForceMagnitude[i+1];
        else
          ForceMagnitude[i+1]=ForceMagnitude[i];
      }

      Ep=sqrt(pow(E[a]-E[a-1],2));

      if (Ep<0.00000000000000000000000000000000000000000000000000000000001){
        ForceMagnitude[n]=0.000001;
        cout << "BROKEN \n";
      }
      else
        ForceMagnitude[n]=ForceMagnitude[n];

      Forcemagnitude=ForceMagnitude[n];

      cout << fixed << setprecision(60) << "FM=" << Forcemagnitude << "\n";
      cout << "Energy=" << Energy << "\n";

      a=a+1;
    }

    for(i=1;i<=n;i++){
      for(j=i+1;j<=n;j++){
        Distance=sqrt(pow(x[i][1]-x[j][1],2)+pow(x[i][2]-x[j][2],2)
                        +pow(x[i][3]-x[j][3],2));

        degree=(180/PI);

        alpha[i][j]=degree*acos((2.0-pow(Distance,2))/2.0);
      }
    }

    for(i=1;i<=n;i++){
      for(j=i+1;j<=n;j++){
        cout << "alpha[" << i << "][" << j << "]=" << alpha[i][j] << "\n";
      }
    }

    for(i=1;i<=n-1;i++){
      for(j=i+1;j<=n-1;j++){
        if(alpha[i][j]>alpha[i][j+1])
          alpha[i][j]=alpha[i][j+1];
        else
          alpha[i][j+1]=alpha[i][j];
      }
    }

    for(i=1;i<=n;i++){
      for(j=i+1;j<=n;j++){
        cout << "alpha[" << i << "][" << j << "]=" << alpha[i][j] << "\n";
      }
    }

    for(i=1;i<=n-2;i++){
      if(alpha[i][n]>alpha[i+1][n])
        alpha[i][n]=alpha[i+1][n];
      else
        alpha[i+1][n]=alpha[i][n];
    }

    for(i=1;i<=n;i++){
      for(j=i+1;j<=n;j++){
        cout << "alpha[" << i << "][" << j << "]=" << alpha[i][j] << "\n";
      }
    }

    bestalpha[b]=alpha[n-1][n];

    En[b]=Energy;

    b=b+1;

    t4=clock();
    float diff ((float)t4-(float)t3);
    float seconds = diff / CLOCKS_PER_SEC;

    Time = Time + seconds;

  }

  Averagetime = Time/(b-1);

  cout << fixed << setprecision (4) << "Average Time: " << Averagetime << "(s) \n";
  cout << fixed << setprecision(10) << "Energy=" << Energy << "\n";
  cout << "s=" << s << " f=" << f << "\n";

  Success=Success+s;
  Fails=Fails+f;

  cout << "Successes=" << Success << " Failures=" << Fails << "\n";
  cout << setprecision(5) << "Success Rate=" << ((Success*1.0)/((Success*1.0)+(Fails*1.0)))*100.0 << "\n";

  t2=clock();
    float diff ((float)t2-(float)t1);
    float seconds = diff / CLOCKS_PER_SEC;

  for(i=1;i<=n;i++){
    for(j=1;j<=3;j++){
      y[i][j]=x[i][j];
    }
  }

  a=1;
  d=0;
  c=0;

  while(a<2){

  theta=x[a][2]/x[a][3];
  theta=d*PI+atan(theta);

  for(i=1;i<=n;i++){
    new_x[i][1]=x[i][1];
    new_x[i][2]=x[i][2]*cos(theta)-x[i][3]*sin(theta);
    new_x[i][3]=x[i][2]*sin(theta)+x[i][3]*cos(theta);
  }

  phi=new_x[a][1]/new_x[a][3];
  phi=c*PI+atan(phi);

  for(i=1;i<=n;i++){
    x[i][1]=new_x[i][1]*cos(phi)-new_x[i][3]*sin(phi);
    x[i][2]=new_x[i][2];
    x[i][3]=new_x[i][1]*sin(phi)+new_x[i][3]*cos(phi);
  }

  Epsilon[1]=sqrt(pow((x[a][1]),2));  
  Epsilon[2]=sqrt(pow((x[a][2]),2));
  Epsilon[3]=sqrt(pow((x[a][3]-1.0),2));  

  cout << "x[" << a << "][1]=" << x[a][1] << " x[" << a << "][2]=" << x[a][2] << " x[" << a << "][3]=" << x[a][3] << "\n";  

   if(Epsilon[1]<0.00001 && Epsilon[2]<0.00001 && Epsilon[3]<0.00001)
    a=a+1;
  else if(d==0 && c==0)
    for(i=1;i<=n;i++){
      for(j=1;j<=3;j++){
        x[i][j]=y[i][j];
        c=1;
      }
    }
  else if(d==0 && c==1)
    for(i=1;i<=n;i++){
      for(j=1;j<=3;j++){
        x[i][j]=y[i][j];
        d=1;
        c=0;
      }
    }
  else if(d==1 && c==0)
    for(i=1;i<=n;i++){
      for(j=1;j<=3;j++){
        x[i][j]=y[i][j];
        c=1;
      }
    }
  else if(d==1 && c==1)
    break;

  }

  cout << "a=" << a << " d=" << d << " c=" << c << "\n";

  ostringstream String2;
  String2 << "TamPoints_" << t << "_" << n;  //add number

  ofstream File2 (String2.str().c_str());
  for(i=1;i<=n;i++){
    File2 << x[i][1] << " " <<   x[i][2] << " " << x[i][3] << "\n";
  }
  File2.close(); 

  ostringstream String3;
  String3 << "TamEnergies_" << t << "_" << n;  //add number

  ofstream File3 (String3.str().c_str());
  for(i=1;i<a;i++){
    File3 << fixed << setprecision (10) << E[i] << "\n";
  }
  File3.close(); 

  ofstream File4 ("mypoints");
  for(i=1;i<=n;i++){
    File4 << x[i][1] << " " <<   x[i][2] << " " << x[i][3] << "\n";
  }
  File4.close(); 

  ostringstream String4;
  String4 << "TamInfo_" << t << "_" << n;  //add number

  ofstream File5 (String4.str().c_str());
  File5 << "Iterations=" << a-1 << "\n";
  File5 << "Successes=" << s << " Failures=" << f << "\n";
  File5 << fixed << setprecision(20) << "Energy=" << Energy << "\n";
  File5 << fixed << setprecision(5) << "Total run time: " << seconds << "(s) \n";
  File5 << fixed << setprecision(5) << "Average run time: " << Averagetime << "(s) \n";
  File5.close(); 

  ostringstream String5;
  String5 << "Tam%Energies_" << t << "_" << n;  //add number

  ofstream File6 (String5.str().c_str());
  for(i=1;i<b;i++){
    File6 << fixed << setprecision(20) << En[i] << "\n";
  }
  File6.close();

  ostringstream String6;
  String6 << "TamAngles_" << t << "_" << n << ".2";  //add number

  ofstream File7 (String6.str().c_str());
  for(i=1;i<b;i++){
      File7 << fixed << setprecision(15) << bestalpha[i] << "\n";
  }
  File7.close();

  cout << fixed << setprecision(5) << "Run time: " << seconds << "(s)" << "\n";

  n=n+1;
  }

    if(t==1)
    t=2;
    else if(t==2)
    t=5;
    else if(t==5)
    t=10;
    else if(t==10)
    t=25;
    else if(t==25)
    t=50;
    else if(t==50)
    t=100;  
    else if(t==100)
    t=250;
    else if(t==250)
    t=500;
    else if(t==500)
    t=1000;
    else
    t=t+1;
}

  return 0;

} 
```

注意：我很欣赏我的代码非常粗糙，但是我的论文很快就会完成，因此我不能花时间让它漂亮，我只需要它工作。对于缺少功能，我提前道歉，我对任何类型的编码都是新手，直到我觉得把所有的时间都花在整理上会适得其反，我才意识到要使用这些功能。我确信我的问题是能量计算：1/pow（距离，t），因此随着 t 的增加，它们会失去准确性。该代码适用于小 t（至少高达 100），但是对于 t=250，代码开始在准确性上失败。

有什么办法可以快速解决吗？？我听说过 bignum 图书馆，但我对它一无所知，今晚将阅读它。在此先感谢大家， A.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:22:59.900

你走在正确的轨道上——你需要任意精度的整数。我过去使用[过 GMP 库](http://gmplib.org/)，但那是很久以前的事了……祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:24:06.727

如果你想让 t 任意大，你需要一个 bignum 库。

对于可能取决于您需要多大的快速修复，请尝试将您的数字声明为`unsigned long long`（如果它们始终为正）或 a`long long`而不是`int`（在此处了解更多信息：http: [//msdn.microsoft.com/en -us/library/s3f49ktz(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/s3f49ktz(v=vs.80).aspx) )

# forms - 根据 Google 表单的成功完成导航到不同的页面

> ID：15735210
> 
> 赞同：-1
> 
> 时间：2013-03-31T22:17:17.683
> 
> 标签：forms, google-apps-script, google-sheets, google-sites

在我允许访问者参观可能包括 3 到 10 个网页之前，我正在使用 Google 电子表格来注册我的 Google 网站的访问者。

如何验证表格是否已成功填写 - 在启动游览的第一页之前输入了所有必填字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:50:44.853

将游览链接放在表格发送确认页面上。干杯

# vb6 - 使用嵌入式 Web 浏览器控件中的隐藏控件与 VB6 客户端交互

> ID：15735211
> 
> 赞同：0
> 
> 时间：2013-03-31T22:17:26.497
> 
> 标签：vb6, browser, integration

我很难在 VB6 胖客户端（使用 Web 浏览器控件）内的 ASP.NET MVC 4 Web 应用程序的隐藏按钮控件上捕获以编程方式触发的单击事件。我可以使用以下方法捕获点击事件本身：

```
Private WithEvents WebDoc As HTMLDocument

Private Function WebDoc_onclick() As Boolean  

    Select Case WebDoc.activeElement.iD    
       Case "A"
         Do something

        Case "C"
          Do something else

    End Select

    WebDoc_onclick = True

End Function 
```

如果控件可见，这很好用。但如果控件不可见：

```
<div class="HideBtnDiv">
   <input id="C" name="NoItems" type="button" class="BtnDiv" style="display:none"/>
</div> 
```

我尝试通过以下方式之一触发程序化点击：

```
 $("#C").('click');

    $("#C").trigger('click');

    $("#C").triggerhandler("click");

    $("#C").focus();
    $("#C").trigger('click'); 
```

我得到“id”属性的空字符串，因此我无法区分单击了哪个按钮。这个按钮除了向 VB6 应用程序表明已经满足某个标准之外没有其他用途，这就是我需要隐藏它的原因。有谁知道为什么 id 被剥夺了？或者有没有其他方式可以与客户沟通？

我也尝试过使用元素样式过滤

```
Select Case WebDoc.activeElement.Style

    Case "display:none"
        Do something else

End Select 
```

但它以“[Object]”的形式返回，所以那里也没有运气。如果有办法解决这个问题，请告诉我。

谢谢，立津

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:11:28.047

您似乎尝试了几种动态触发点击事件的方法，但您是否尝试过最明显的方法：

```
$("#C").click(); 
```

？？？

但这是我会做的：

`display:none`1-通过从样式中删除“”使所有按钮可见

2-将要隐藏的按钮包装在新的 DIV 中

3-`display:none`在新创建的DIV中设置“”样式

`.click()`4-即使通过调用不可见，您也可以触发任何按钮的事件`$(id).click();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:29:55.227

谢谢，艾哈迈德。实际上我的意思是 .click() 不是 .('click')。对于那个很抱歉。

无论如何，我尝试了您的建议并使按钮可见并将包装 div 的样式设置为 display:none 但 id 属性仍然作为空字符串出现。

但是，我确实想出了另一种方法来让它发挥作用。如果我保持包装 div 和按钮可见，然后在满足条件时聚焦并单击，然后执行 hide()，我的问题就解决了！

```
$("#C").focus();
$("#C").trigger('click');

$("#C").hide(); 
```

该按钮没有显示，VB6 仍然在点击事件上传递 id。奇怪的是它仍然需要进行 focus() 调用。没有它，我又回到了原点。不确定这是否是一个错误。

# node.js - 奇怪的流行为 node.js/knox

> ID：15735216
> 
> 赞同：0
> 
> 时间：2013-03-31T22:17:58.243
> 
> 标签：node.js, amazon-web-services, amazon-s3, imagemagick, knox-amazon-s3-client

我一直在研究这个问题的答案，位于此处[如何使套接字成为流？在 imagemagick 之后将 https 响应连接到 S3](https://stackoverflow.com/questions/14680543/how-to-make-a-socket-a-stream-to-connect-https-response-to-s3-after-imagemagick)。根据 loganfsmyth 的建议，我评论了 req.end(image) 行，但是当我尝试上传文件时，服务器只是超时。当我取消注释 req.end(image) 行时，我遇到了类似的行为，但图像成功上传到 S3 除外。如果取消注释 req.end(image) 行是正确的，有人可以为我澄清哪种方式是正确的，向浏览器发送响应以防止它超时的最佳方式是什么？

```
https.get(JSON.parse(queryResponse).data.url,function(res){

  graphicsmagick(res)
    .resize('50','50')
    .stream(function (err, stdout, stderr) {

      ws. = fs.createWriteStream(output)

      i = []

      stdout.on('data',function(data){
        i.push(data)
      })

      stdout.on('close',function(){
        var image = Buffer.concat(i)

        var req = S3Client.put("new-file-name",{
           'Content-Length' : image.length
          ,'Content-Type' : res.headers['content-type']
        })

        req.on('response',function(res){  //prepare 'response' callback from S3
          if (200 == res.statusCode)
            console.log('it worked')
        })
        //req.end(image)  //send the content of the file and an end
      })
  })
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:24:24.853

在您链接到的问题中，用户正在使用`putStream`，因此调用`req.end()`不正确，但是在您的情况下，您`put`直接使用，因此您需要调用`req.end()`。否则，将其注释掉`image`，除了长度之外，您永远不会实际使用该值，因此您永远不会发送图像数据。

如果没有看到实际运行此代码的服务器处理程序，很难判断，但您需要（可选）返回一些响应，然后也返回`.end()`到浏览器的实际连接，否则它将在那里等待。

所以如果你有这样的东西

```
http.createServer(function(req, browserResponse){

  // Other code.

  req.on('response',function(s3res){  //prepare 'response' callback from S3
      if (200 == s3res.statusCode) console.log('it worked')

      // Close the response. You also pass it data to send to the browser.
      browserResponse.end();
  })

  // Other code.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:23:24.273

基本上该页面被请求两次，这导致图像由于图标而被覆盖。[node.js页面刷新两次调用资源？](https://stackoverflow.com/questions/8283801/node-js-page-refresh-calling-resources-twice)

# ios - 创建 libwatoolkitios.a 文件对我来说不是很清楚 - 为什么我不能简单地下载它？

> ID：15735224
> 
> 赞同：1
> 
> 时间：2013-03-31T22:19:14.550
> 
> 标签：ios, windows, azure

一段时间以来，我一直在玩 Windows azure ios 工具包。但是 - 由于我是 iOS 编码的新手 - 我仍然不了解创建 libwatoolkitios.a 的过程。另外，我不确定这是否仍然是在 iPhone 应用程序中访问 Windows azure 的最新方式。

有人可以在这个主题上支持我，让我知道我必须采取哪些步骤才能在我的 iOS 应用程序中成功实现这个静态库吗？

# compiler-errors - NME 中的目标 - 演示项目无法转换为例如 JavaScript - 目标错误

> ID：15735225
> 
> 赞同：0
> 
> 时间：2013-03-31T22:19:23.193
> 
> 标签：compiler-errors, haxe, target-platform, nme

我正在玩有趣的工具 NME，它是 Haxe 和 Neko 的组合。

我喜欢可以针对不同语言的想法，但这似乎不对？

我已经下载了示例并在以 NME 为目标时完美运行，但是当我选择另一个目标（例如 Javascript）时，我收到以下错误（在 FlashDevelop 中）：

```
Running process: C:\Program Files (x86)\FlashDevelop\Tools\fdbuild\fdbuild.exe "F:\Personal\NMEHaxe\nme\examples\HandlingKeyboardEvents\HandlingKeyboardEvents.hxproj" -ipc 5a2362fe-f815-45c2-95d7-cbb9f230408a -version "2.10" -compiler "C:\Program Files (x86)\Motion-Twin\NME\haxe" -notrace -library "C:\Program Files (x86)\FlashDevelop\Library" -target "flash"
Building HandlingKeyboardEvents
haxe -cp Source -cp "C:/Program Files (x86)/Motion-Twin/NME/haxe/lib/nme/3,5,5/" -cp Export/flash/haxe -lib nme -lib actuate -js F:/Personal/NMEHaxe/nme/examples/HandlingKeyboardEvents/project.nmml -D nme_install_tool -D web -main ApplicationMain -swf-version 11
C:\Program Files (x86)\Motion-Twin\NME\haxe\lib\nme/3,5,5/format/display/MovieClip.hx:9: characters 0-28 : 
```

**您无法使用当前编译标志访问 flash 包（对于 flash.display.Sprite）**

```
Build halted with errors (haxe.exe).
Done(1) 
```

如果这真的不可能，那么该工具对我来说没有意义，因为当您无法瞄准另一个目标时为什么要使用它。还是我在整个 Haxe/NME 故事中遗漏了什么？有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:09:54.670

明白了，替换`flash.`为`nme.`，例如：

```
nme.display.sprite; 
```

这会编译代码，但不会通过 FlashDevelop 运行。`project.nmml`当目标是 JavaScript 时，它会用 JS 代码覆盖文件。

知道如何解决这个问题吗？

# javafx - 在 JavaFX 中向 Group 添加路径转换

> ID：15735229
> 
> 赞同：1
> 
> 时间：2013-03-31T22:19:47.923
> 
> 标签：javafx

我正在编写一些 javaFX 代码，并且已将一些路径添加到组中，该组已添加到另一个组中，该组已添加到根目录并显示在屏幕上。现在在某个时刻，我想使用 PathTransition 将这个最低级别的组动画到一个新位置。我无法确定过渡的正确坐标。我已经读过 PathTransition 将从其中心而不是左上角为节点设置动画，因此我尝试将 Group.getLayoutX()/2 添加到起始 x 并将 Group.getLayoutY()/2 添加到起始 y 坐标但是在动画开始之前，它似乎仍然使组跳到新的起始位置。最终目的地似乎也有点偏离。有没有更好的方法来为包含多个路径的组设置动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:35:26.027

根据正在动画的节点的布局边界的一半调整节点跟随路径的`layoutX`和。`layoutY`

```
rect.setLayoutX(rect.getLayoutX() + rect.getLayoutBounds().getWidth()  / 2);
rect.setLayoutY(rect.getLayoutY() + rect.getLayoutBounds().getHeight() / 2); 
```

* * *

尝试从[JavaFX 2 circle path for animation](https://stackoverflow.com/questions/14171856/javafx-2-circle-path-for-animation)修改 Uluk 的圆形路径过渡代码。

代码将使节点原始布局的左上角跟随路径。

![节点路径样本](https://i.stack.imgur.com/jKmyw.png)

```
import javafx.animation.PathTransition.OrientationType;
import javafx.animation.*;
import javafx.application.Application;
import javafx.scene.*;
import javafx.scene.paint.Color;
import javafx.scene.shape.*;
import javafx.stage.Stage;
import javafx.util.Duration;

public class ArcToDemo extends Application {

    private PathTransition pathTransitionEllipse;
    private PathTransition pathTransitionCircle;

    private void init(Stage primaryStage) {
        Group root = new Group();
        primaryStage.setResizable(false);
        primaryStage.setScene(new Scene(root, 600, 460));

        // Ellipse path example
        Rectangle rect = new Rectangle(0, 0, 40, 40);
        rect.setArcHeight(10);
        rect.setArcWidth(10);
        rect.setFill(Color.ORANGE);
        root.getChildren().add(rect);

        Path path = createEllipsePath(200, 200, 50, 100, 45);
        root.getChildren().add(path);

        pathTransitionEllipse = PathTransitionBuilder.create()
                .duration(Duration.seconds(4))
                .path(path)
                .node(rect)
                .orientation(OrientationType.NONE)
                .cycleCount(Timeline.INDEFINITE)
                .autoReverse(false)
                .build();

        rect.setLayoutX(rect.getLayoutX() + rect.getLayoutBounds().getWidth()  / 2);
        rect.setLayoutY(rect.getLayoutY() + rect.getLayoutBounds().getHeight() / 2);

        // Circle path example
        Rectangle rect2 = new Rectangle(0, 0, 20, 20);
        rect2.setArcHeight(10);
        rect2.setArcWidth(10);
        rect2.setFill(Color.GREEN);
        root.getChildren().add(rect2);

        Path path2 = createEllipsePath(400, 200, 150, 150, 0);
        root.getChildren().add(path2);

        pathTransitionCircle = PathTransitionBuilder.create()
                .duration(Duration.seconds(2))
                .path(path2)
                .node(rect2)
                .orientation(OrientationType.NONE)
                .cycleCount(Timeline.INDEFINITE)
                .autoReverse(false)
                .build();

        rect2.setLayoutX(rect2.getLayoutX() + rect2.getLayoutBounds().getWidth()  / 2);
        rect2.setLayoutY(rect2.getLayoutY() + rect2.getLayoutBounds().getHeight() / 2);
    }

    private Path createEllipsePath(double centerX, double centerY, double radiusX, double radiusY, double rotate) {
        ArcTo arcTo = new ArcTo();
        arcTo.setX(centerX - radiusX + 1); // to simulate a full 360 degree celcius circle.
        arcTo.setY(centerY - radiusY);
        arcTo.setSweepFlag(false);
        arcTo.setLargeArcFlag(true);
        arcTo.setRadiusX(radiusX);
        arcTo.setRadiusY(radiusY);
        arcTo.setXAxisRotation(rotate);

        Path path = PathBuilder.create()
                .elements(
                new MoveTo(centerX - radiusX, centerY - radiusY),
                arcTo,
                new ClosePath()) // close 1 px gap.
                .build();
        path.setStroke(Color.DODGERBLUE);
        path.getStrokeDashArray().setAll(5d, 5d);
        return path;
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        init(primaryStage);
        primaryStage.show();
        pathTransitionEllipse.play();
        pathTransitionCircle.play();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

* * *

*实施说明*

1.  代码假定动画节点的原始布局位置为 0,0（如果不是，则需要相应调整）。
2.  对于非方形节点，节点和路径之间存在微小间隙（因为计算是基于布局边界矩形而不是节点的可见形状）。
3.  此外，路径转换使用的方向是，`NONE`而不是`ORTHOGONAL_TO_TANGENT`（否则布局计算会在节点开始旋转时产生奇怪的效果，并且似乎节点正在向路径发散）。

除了上述方法，您可以定义一个自定义的[Transition](http://docs.oracle.com/javafx/2/api/javafx/animation/Transition.html)子类，它修改节点的`TranslateX`和`TranslateY`属性，以便节点的角跟随路径而不是中心，并且不需要修改节点的布局，但是那将是显着更多的工作。

# java - 为什么当我不提供泛型类型时，此类的行为会有所不同？

> ID：15735235
> 
> 赞同：6
> 
> 时间：2013-03-31T22:20:13.193
> 
> 标签：java, generics

我不明白为什么这会使编译器感到困惑。我使用泛型类型来保存与and方法`T`无关的对象。我一直认为并且在功能上是相同的，但我一定是误会了。编译课程时我得到. 这门课做我所期望的。这里发生了什么？`put``get``GenericClass``GenericClass<Object>``DoesntWork``incompatible types - required: String - found: Object``Works`

```
public class GenericClass<T> {
    public <V> void put(Class<V> key, V value) {
        // put into map
    }

    public <V> V get(Class<V> key) {
        // get from map
        return null;
    }

    public static class DoesntWork {
        public DoesntWork() {
            GenericClass genericClass = new GenericClass();
            String s = genericClass.get(String.class);
        }
    }

    public static class Works {
        public Works() {
            GenericClass<Object> genericClass = new GenericClass<Object>();
            String s = genericClass.get(String.class);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T22:29:30.263

关于原始类型如何工作的事情——你忽略了参数的泛型类型——是它们的*所有*泛型及其方法也被删除了。所以对于 raw `GenericClass`，`get`and`put`方法*也*失去了它们的泛型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:36:34.627

这是因为当您使用没有额外类型信息的泛型类时，您使用的是有时称为`degenerate`类的形式的东西。该`degenerate`表单已删除所有通用类型信息。

本质上 - 你的课程变成了这样的：

```
public class GenericClass {
    public void put(Class key, Object value) {
        // put into map
    }

    public Object get(Class key) {
        // get from map
        return null;
    }

    ...
} 
```

因此，您看到的编译器响应是预期的行为。

它在[Java Puzzlers](http://www.youtube.com/watch?v=wbp-3BJWsU8)中提到。

# oracle - 如何查找用户使用触发器登录数据库的经过时间

> ID：15735237
> 
> 赞同：0
> 
> 时间：2013-03-31T22:20:29.897
> 
> 标签：oracle, plsql, oracle10g, oracle11g

我正在尝试使用触发器计算用户登录数据库的总时间，我的表结构如下所示：

```
create table stats$user_log
(
   user_id           varchar2(30),
   session_id           number(8),
   host              varchar2(30),
   logon_day                 date,
   logon_time        varchar2(10),
   logoff_day                date,
   logoff_time       varchar2(10),
   elapsed_minutes       varchar2(32)
); 
```

我的登录触发器如下：

```
create or replace trigger
   logon_audit_trigger
AFTER LOGON ON DATABASE
BEGIN
insert into stats$user_log values(
   user,
   sys_context('USERENV','SESSIONID'),
   sys_context('USERENV','HOST'),
   sysdate,
   to_char(sysdate, 'hh24:mi:ss'),
   null,
   null,
   null
);
END;
/ 
```

我的注销触发器如下：

```
create or replace trigger
   logoff_audit_trigger
BEFORE LOGOFF ON DATABASE
BEGIN
UPDATE
    stats$user_log
set

      logoff_day = sysdate,
      logoff_time = to_char(sysdate, 'hh24:mi:ss'),
      elapsed_minutes = round((logoff_day - logon_day)*1440,2)

  WHERE
   sys_context('USERENV','SESSIONID') = session_id;
END;
/ 
```

当用户注销时，除了 elapse_minutes 列之外的所有内容都被捕获，它保持为空。

谁能告诉我哪里出错了，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:32:39.497

在您进行更新时，`logoff_day`您在表达式右侧引用的`set`仍然为 null，因此表达式的计算结果为 null。

您引用的任何列值都必须是更新前的值，或者更改在子句中分配列的顺序`set`会改变更新的工作方式，这充其量是令人困惑的。根据旧值设置列的更新 - 例如`set salary = salary * 1.1`- 会特别成问题。

您可以参考`sysdate`第二次：

```
 logoff_day = sysdate,
  logoff_time = to_char(sysdate, 'hh24:mi:ss'),
  elapsed_minutes = round((sysdate - logon_day)*1440,2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:24:09.997

如果启用了会话审核，则数据库已经为您执行此操作。为什么要为自己创造呢？检查 dba_audit_session 以获取结果。您可能需要与您的 dba / 安全人员交谈以获得访问权限，但这可能是值得的。

# ruby-on-rails - 不同迁移中的登录/注册表格

> ID：15735238
> 
> 赞同：1
> 
> 时间：2013-03-31T22:20:41.367
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, migration

我有一个带有功能齐全的登录/注册表格的设计用户表。

我想知道的是如何让用户表单出现在不同的表格上。

例如

users/sign_in 完美运行，但我想让该表单出现在电影/索引中

我尝试将表单代码添加到电影/索引中，但出现此错误

```
undefined local variable or method `resource' for #<#<Class:0x00000102cbf0b8>:0x00000103bb6d78> 
```

这是签到表格

```
<%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f|     %>
  <div><%= f.label :email %>
  <%= f.email_field :email, :autofocus => true %></div>

  <div><%= f.label :password %>
  <%= f.password_field :password %></div>

  <% if devise_mapping.rememberable? -%>
    <div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
  <% end -%>

  <div><%= f.submit "Sign in" %></div>
<% end %>

<%= render "devise/shared/links" %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:34:11.950

您可以生成视图（我知道您已经这样做了）并且您可以覆盖控制器，或者，在您的情况下，您可以观看 Devise 的控制器，获取您需要的代码，并在您的视图中调用部分（来自设计视图）。

几个月前我做了类似的事情，但是我所做的（我没有完全建议，但我没有找到更好的方法）是从 Devise 视图中获取代码，然后将代码复制到另一个视图中一些修改：

```
<%= form_for(User.new, :as => "user", :url => session_path("user"), :remote => true) do |f| %>
  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>

    <div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>

  <div><%= f.submit "Sign in" , :class=>"blue_submit_degradiant", :id =>"sign_in_user"%></div>
<% end %> 
```

它有效，但正确的方法是使用 @user 而不是 User.new

# php - mPDF->SetTopMargin 导致分页

> ID：15735241
> 
> 赞同：3
> 
> 时间：2013-03-31T22:21:05.900
> 
> 标签：php, pdf-generation, fpdf, mpdf

我正在使用 mPDF（一个 php 库）自动构建 pdf。pdf的几页需要具有不同大小的顶部和底部边距。

我呼吁`$mpdf -> WriteHTML($html_segment, 2)`每一页。

在第二页上，我的上边距需要设置为 20，所以我调用`$mpdf -> SetTopMargin(20);` ，但这会导致在（预期的）第 1 页和第 2 页之间写入一个新的（空白）页面！调整后的边距出现在第 3 页上。

我尝试过切换`$mpdf -> autopagebreak = false`，但似乎没有这样做。

# c# - 参数类型对象不可分配给 System.Func error I am getting an error message that makes absolutely no sense to me!! public class ChartInitializerBase { #region Constructors public ChartInitializerBase(Func<object> re 问问题 问问题 2013-03-31T22:21:07.603 3169 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am getting an error message that makes absolutely no sense to me!! public class ChartInitializerBase { #region Constructors public ChartInitializerBase(Func<object> retrieveData) { var Data = retrieveData; } #endregion } The idea of the constructor above is that I can pass different methods in to obtain data For example, if I am displaying books I want to say var intiialiser = new ChartInitializerBase(GetBooks(1234, 231)) If I am getting CDs I want to say var intiialiser = new ChartInitializerBase(GetCDs(1234, 231, 34)) The parameters above are different, but both GetCDs and GetBooks would return a single object In my exact situation I have var chart = new DailyConsumptionChart( dataProvider.GetDataForDailyConsumptionChart("1", EUtilityGroup.Electricity, 321, 157, Convert.ToDateTime("01/01/2010"), Convert.ToDateTime("01/01/2010 23:30"), false)); public class ProfileDataDashboardReportsDataProvider { #region Methods public object GetDataForDailyConsumptionChart(string idString, EUtilityGroup ug, int customerId, int userId, DateTime startDate, DateTime endDate, bool clockTime) { var mdp = new MeterDataProvider(); var result = mdp.GetProfileDataForLocationForADay(idString, ug, customerId, userId, startDate, endDate, clockTime); return result; } #endregion } I have tried this as both a static an non static class as well as static and non static methods It makes no difference which way I do it I still get Argument type object is not assignable to System.Func error I am new to this kind of thing, please can someone suggest what I need to do to fix this? I have seen this Parameter type not assignable when storing func in dictionary But I dont think it helps me I am not sure if I am tagging this in the correct areas please feel free to change if I am wrong Paul Try to pass lambda to your constructor, instead of the result of the method execution, like in the code example below. var initialiser = new ChartInitializerBase(() => GetBooks(1234, 231)); Here you simply pass lambda with one statement - call to GetBooks method Your constructor should be like public ChartInitializerBase(Func<object> retrieveData) { var Data = retrieveData(); //here the method GetBooks will be called and data returned } c#delegates 4 1 回答 1 This answer is useful 7 尝试将 lambda 传递给您的构造函数，而不是方法执行的结果，如下面的代码示例所示。 var initialiser = new ChartInitializerBase(() => GetBooks(1234, 231)); 在这里，您只需使用一个语句传递 lambda - 调用 GetBooks 方法 你的构造函数应该像 public ChartInitializerBase(Func<object> retrieveData) { var Data = retrieveData(); //here the method GetBooks will be called and data returned } 于 2013-03-31T22:25:09.620 回答 Related 1 python - 简单 Python 导入的语法错误 1 github - 如何更改 github 页面以从分叉的 repo 运行？ 2 javascript - 用括号括住对象声明 1 google-analytics-api - 使用分析报告 API 的 ASP.NET 在服务器上不起作用 0 android - 静态报警管理器 1 android - POS printBitmap() 方法中的错误 1 mysql - 嵌套 SQL 查询将不执行 5 java - 私有内部类实现了一个接口而不是父类，为什么？ 2 php - 如何将 javascript 变量存储到 php 会话变量中？ 2 navigation - 电晕中的Lua导航 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15735242
> 
> 赞同：2
> 
> 时间：
> 
> 标签：c#, delegates

I am getting an error message that makes absolutely no sense to me!!

```
public class ChartInitializerBase
{
    #region Constructors
    public ChartInitializerBase(Func<object> retrieveData)
    {
        var Data = retrieveData;
    }
    #endregion
} 
```

The idea of the constructor above is that I can pass different methods in to obtain data

For example, if I am displaying books I want to say

```
var intiialiser = new ChartInitializerBase(GetBooks(1234, 231)) 
```

If I am getting CDs I want to say

```
var intiialiser = new ChartInitializerBase(GetCDs(1234, 231, 34)) 
```

The parameters above are different, but both GetCDs and GetBooks would return a single object

In my exact situation I have

```
var chart = new DailyConsumptionChart(
            dataProvider.GetDataForDailyConsumptionChart("1", EUtilityGroup.Electricity, 321, 157, Convert.ToDateTime("01/01/2010"), Convert.ToDateTime("01/01/2010 23:30"), false));

 public class ProfileDataDashboardReportsDataProvider
 {
    #region Methods
    public object GetDataForDailyConsumptionChart(string idString, EUtilityGroup ug, int customerId, int userId, DateTime startDate, DateTime endDate, bool clockTime)
    {
        var mdp = new MeterDataProvider();
        var result = mdp.GetProfileDataForLocationForADay(idString, ug, customerId, userId, startDate, endDate, clockTime);

        return result;
    }
    #endregion
} 
```

I have tried this as both a static an non static class as well as static and non static methods

It makes no difference which way I do it I still get Argument type object is not assignable to System.Func error

I am new to this kind of thing, please can someone suggest what I need to do to fix this?

I have seen this [Parameter type not assignable when storing func in dictionary](https://stackoverflow.com/questions/687201/parameter-type-not-assignable-when-storing-func-in-dictionary)

But I dont think it helps me

I am not sure if I am tagging this in the correct areas please feel free to change if I am wrong

Paul

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T22:25:09.620

尝试将 lambda 传递给您的构造函数，而不是方法执行的结果，如下面的代码示例所示。

```
var initialiser = new ChartInitializerBase(() => GetBooks(1234, 231)); 
```

在这里，您只需使用一个语句传递 lambda - 调用 GetBooks 方法

你的构造函数应该像

```
public ChartInitializerBase(Func<object> retrieveData) 
{ 
      var Data = retrieveData(); //here the method GetBooks will be called and data returned
} 
```

# hadoop - WholeFileInputFormat 与多个文件输入

> ID：15735246
> 
> 赞同：0
> 
> 时间：2013-03-31T22:21:50.703
> 
> 标签：hadoop, mapreduce

我如何使用 WholeFileInputFormat 与许多文件作为输入？多个文件作为一个文件... FileInputFormat.addInputPaths(job, String ...); 似乎无法正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:28:40.867

您需要将 InputFormat 中的“isSplittable”设置为“false”，以便输入文件不会被拆分并仅由 1 个映射器处理。不过，有一个小建议，您可以尝试使用 Sequence File。将您尝试处理的多个文件组合成一个序列文件，然后对其进行处理。由于序列文件已经采用键/值形式，因此效率更高。

# binding - 用于绑定的 Groovy 对象跟踪

> ID：15735247
> 
> 赞同：2
> 
> 时间：2013-03-31T22:22:03.800
> 
> 标签：binding, groovy, abstract-syntax-tree

我正在开发一个 Groovy 库，通过简单的语法和丰富的事件处理程序提供变量绑定/同步。首先，我的目标是归档运行以下内容：

```
def a = 1 
def b = 1
def c = 1
a bind { b + c }
assert a==2 & b==1 & c==1
b = 3
assert a==4 & b==3 & c==1
c = -1
assert a==2 & b==3 & c==-1 
```

我想避免提供额外类的 Java FX 方法，而是使用此功能增强对象。

我一直在寻找一些物体的跟踪。Groovy 没有赋值表达式的重载。目前，我看到了重 AST 转换的解决方案（也许 dsld 可能会有所帮助）。

也许我错过了一些对象跟踪、事件或其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:27:06.853

我假设您正在使用脚本编写代码。用以下想法做了你想做的事：

*   与其使用 将值绑定到键`Script.binding`，不如创建一个`Variable`同时代表`value`和变量的类`name`；
*   对象上调用的每个方法`Variable`都被委托给它的值；
*   `Listener`封装了对更新操作的引用和需要更新的对象的类`Variable`；
*   一个`updateListeners()`更新监听器的方法；
*   一种`bind(closure)`只是绕过对变量对象的闭包的方法。它几乎可以被删除并写成`a { b + c }`;

    ```
    class Listener { Closure operation; Variable variable }

    class Variable implements GroovyInterceptable { 
        String name; def value

        def invokeMethod(String method, args) {
            def var = args[0]
            var.class == Variable ? 
                    value."$method"(var.value) : value."$method"(var)
        }
    }

    Variable.metaClass.call = { Closure operation ->
        binding['listeners'] << 
                new Listener(operation: operation, variable: delegate)
        updateListeners()
    }

    def bind(Closure operation) { operation }

    def updateListeners() {
        binding.listeners.each {
            it.variable.value = it.operation()
        }
    }

    void setProperty(String prop, value) { 
        if (!binding.hasVariable('listeners')) binding['listeners'] = []
        binding[prop] = new Variable(name: prop, value: value)
        updateListeners()
    } 
    ```

你的测试就像一个魅力。

# vb.net - Vb.Net Element.InvokeMember("点击")

> ID：15735252
> 
> 赞同：0
> 
> 时间：2013-03-31T22:22:25.890
> 
> 标签：vb.net, youtube, browser, webbrowser-control

我正在尝试自动登录并在 youtube 上搜索某些关键字，登录并输入关键字的部分是有效的，但在写入关键字后我无法点击搜索这是我的代码：

```
Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load 
        WebBrowser1.Navigate("https://accounts.google.com/ServiceLogin?uilel=3&service=youtube&passive=true&continue=http%3A%2F%2Fwww.youtube.com%2Fsignin%3Faction_handle_signin%3Dtrue%26feature%3Dsign_in_button%26hl%3Den_US%26next%3D%252F%26nomobiletemp%3D1&hl=en_US")
    End Sub

    Private Sub WebBrowser1_DocumentCompleted(ByVal sender As System.Object, ByVal e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted

        Dim theElementCollection As HtmlElementCollection = WebBrowser1.Document.GetElementsByTagName("Input")
        For Each curElement As HtmlElement In theElementCollection
            Dim controlName As String = curElement.GetAttribute("id").ToString
            If controlName = "Email" Then
                curElement.SetAttribute("Value", "email here")
            End If
        Next

        theElementCollection = WebBrowser1.Document.GetElementsByTagName("Input")
        For Each curElement As HtmlElement In theElementCollection
            Dim controlName As String = curElement.GetAttribute("id").ToString
            If controlName = "Passwd" Then
                curElement.SetAttribute("Value", "password here")
            End If
        Next

        theElementCollection = WebBrowser1.Document.GetElementsByTagName("Input")
        For Each curElement As HtmlElement In theElementCollection
            If curElement.GetAttribute("value").Equals("Sign in") Then
                curElement.InvokeMember("click")
                'Javascript has a click method for we need to invoke on the current submit button element.  
            End If
        Next

        theElementCollection = WebBrowser1.Document.GetElementsByTagName("Input")
        For Each curElement As HtmlElement In theElementCollection
            Dim controlName As String = curElement.GetAttribute("id").ToString
            If controlName = "masthead-search-term" Then
                curElement.SetAttribute("Value", "Keyword Here")

            End If
        Next

        For Each Element As HtmlElement In WebBrowser1.Document.GetElementsByTagName("Search")
            'Depending on how the source code is formatted on the tag, you may also try Element.OuterHTML, Element.InnerText and Element.OuterText in the line below
            If Element.InnerHtml.Contains("class=""yt-uix-button-content""") Then
                Element.InvokeMember("click")
                Exit For
            End If
        Next Element

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T15:29:55.850

嘿，也许这有效：

```
theElementCollection = WebBrowser1.Document.GetElementsByTagName("button")
        For Each curElement As HtmlElement In theElementCollection
            Dim controlName As String = curElement.GetAttribute("id").ToString
            If controlName = "search-btn" Then
                curElement.InvokeMember("click")
            End If
        Next 
```

# c++ - 将用户输入保存在井字棋盘中

> ID：15735253
> 
> 赞同：0
> 
> 时间：2013-03-31T22:22:30.093
> 
> 标签：c++

我写了一个 C++ 井字游戏。它可以工作，但是我认为如果我向用户展示电路板在每转一圈后的外观会更好。我让董事会出现，但它显示了默认董事会。我尝试输入代码以显示带有 x 或 o 的板，但我只是得到一个错误，说 squareChoice 未在此范围内声明。在 while 之后，我的两个 if 状态也出现错误（在 if 之前声明预期的 unqualiftied-id）。请帮忙，我将不胜感激。这是我的代码：

```
/*
Sophia Ali
   Template for TicTacToe.cpp (CS-509 Assignment 5)
can't get program to store x and o in the board
*/

#include<iostream>
#include <cstdlib>
using namespace std;

/*
   Game status enumeration
*/
enum Status { WIN, DRAW, CONTINUE, QUIT };

/*
   Function prototypes
*/
// showBoard: Show current state of board
void showBoard( const char board[], int boardSize );
// checkGameState: Returns WIN or CONTINUE
Status checkGameState( const char board[] );
int getHumanSquare( const char board[] );
int getComputerSquare( const char board[] );
// checkBadSquare: Checks to see if a chosen square is already taken; returns
//                 true if already taken; used by getHumanSquare and
//                 getComputerSquare functions above.
bool checkBadSquare( const char board[], int squareNum );
int getrandint( int min, int max );

int main()
{
    char board[] = "123456789";   // 10 element char board
    const int boardSize = 10;
    Status gameState = CONTINUE;
    int gametype, squareChoice, turnNum = 0;
    char currentSymbol;           // 'o' or 'x'

    cout << "\n This is a Tic Tac Toe program. Choose the type of game: "
         << "\n (1) human o vs. human x    (2) human o vs. dumb computer x"
         << "\n\n -> ";
    cin  >> gametype;

    /* Show the current state of Tic Tac Toe board. */
    cout << gameState;
    cout << "\n\n";

    /*
       Main game loop
    */
    while ( gameState == 2 )
    {
        /* Increment turnNum by 1\. */
        turnNum++;

        /* If turnNum equal to 10
              Set gameState to DRAW.
              Break out of while loop. */
        if ( turnNum == 10 )
        {
            gameState = DRAW;
            break;
        }
        /* If we are on an odd-numbered turn
              Print "It's o's turn."
              Set currentSymbol to 'o'.
              Call getHumanSquare function to get squareChoice.*/
        if ( turnNum%2 != 0)
        {
            cout << "It's o's turn.";
            currentSymbol = 'o';
            cout << "\n\n";

            getHumanSquare(board);
            showBoard( board, boardSize );
        }

        /* Else (we are on an even-numbered turn)
            Print "It's x's turn."
            Set currentSymbol to 'x'. */
        else
        {
            cout << "It's x's turn.";
            currentSymbol = 'x';
            cout << "\n\n";
            showBoard( board, boardSize );

        }

        /*   If the gametype is 1 (human vs. human)
              Call getHumanSquare function to get squareChoice.*/
        if ( gametype == 1 )
        {
            getHumanSquare(board);

        }

        /* Else (gametype is 2 (human vs. computer))
           Call getComputerSquare function to get squareChoice. */
        else

            getComputerSquare(board);

        /* If squareChoice is -1 (human player quit)
              Set gameState to QUIT.*/
        if ( squareChoice == -1 )
        {
            gameState = QUIT;
        }

        /* Else
           Insert currentSymbol into board at (squareChoice - 1).
           Show the current state of the Tic Tac Toe board.
           Call checkGameState function to determine the gameState. */
        else
        {
            if (squareChoice == 1 && board[1] == '1')
            board[1] = currentSymbol;
            else if (squareChoice == 2 && board[2] == '2')
            board[2] = currentSymbol;
            else if (squareChoice == 3 && board[3] == '3')
            board[3] = currentSymbol;
            else if (squareChoice == 4 && board[4] == '4')
            board[4] = currentSymbol;
            else if (squarechoice == 5 && board[5] == '5')
            board[5] = currentSymbol;
            else if (squarechoice == 6 && board[6] == '6')
            board[6] = currentSymbol;
            else if (squarechoice == 7 && board[7] == '7')
            board[7] = currentSymbol;
            else if (squarechoice == 8 && board[8] == '8')
            board[8] = currentSymbol;
            else if (squarechoice == 9 && board[9] == '9')
            board[9] = currentSymbol;
            else
            {
                cout <<"Invalid move";
                turnNum--;
            }
        }

            checkGameState(board);

        }

}// end while

    /* If gameState is WIN
          print "Player " currentSymbol " is the winner." */
    if ( gameState == WIN)
        cout << "Player " << currentSymbol << " is the winner.";

    /* If gameState is DRAW
          print "It's a draw." */
    if ( gameState == DRAW )
        cout << "It's a draw.";

    return 0;
}

/////////////////////////////////////////////////////////////////////

void showBoard( const char board [], int size )
{
    cout << endl;

    for ( int i = 0; i < size ; i++ )
    {
        cout << board[ i ] << " ";
        if ( ( i + 1 ) % 3 == 0 )
            cout << endl;
    }

    cout << endl;
}

/////////////////////////////////////////////////////////////////////

Status checkGameState( const char board[] )
{
    // Board       Array
    //
    // 1 2 3       0 1 2
    // 4 5 6  -->  3 4 5
    // 7 8 9       6 7 8
    //
    // Diagonal winners
    if ( board[ 0 ] == board[ 4 ] && board[ 0 ] == board[ 8 ] )
        return WIN;
    else if ( board[ 2 ] == board[ 4 ] && board[ 4 ] == board[ 6 ] )
        return WIN;
    // Horizontal winners
    else if ( board[ 0 ] == board[ 1 ] && board[ 1 ] == board[ 2 ] )
        return WIN;
    else if ( board[ 3 ] == board[ 4 ] && board[ 4 ] == board[ 5 ] )
        return WIN;
    else if ( board[ 6 ] == board[ 7 ] && board[ 7 ] == board[ 8 ] )
        return WIN;
    // Vertical winners
    else if ( board[ 0 ] == board[ 3 ] && board[ 3 ] == board[ 6 ] )
        return WIN;
    else if ( board[ 1 ] == board[ 4 ] && board[ 4 ] == board[ 7 ] )
        return WIN;
    else if ( board[ 2 ] == board[ 5 ] && board[ 5 ] == board[ 8 ] )
        return WIN;
    else
        // No one has won yet
        return CONTINUE;
}

/////////////////////////////////////////////////////////////////////

int getHumanSquare( const char board[] )
{
    int squareNum;

    cout << "\n Input the number of an empty square: (-1 to quit) ";
    cin  >> squareNum;

    while ( checkBadSquare( board, squareNum ) == true )
    {
        cout << "\n Bad input. Choose another square: ";
        cin >> squareNum;
    }

    return squareNum;
}

/////////////////////////////////////////////////////////////////////

int getComputerSquare( const char board[] )
{
    int squareNum;

    squareNum = getrandint( 1, 9 );

    while ( checkBadSquare( board, squareNum ) == true )
    {
        squareNum = getrandint( 1, 9 );
    }

    return squareNum;
}

/////////////////////////////////////////////////////////////////////

bool checkBadSquare( const char board[], int squareNum )
{
    int realSquareNum = squareNum - 1; // count from 0

    if ( squareNum == -1 )
        return false;  // Let quit code pass as a valid square
    else if ( squareNum > 9 )
        return true;   // Square numbers out of range are invalid
    else if ( board[ realSquareNum ] == 'o' || board[ realSquareNum ] == 'x' )
        return true;   // Already taken squares are invalid
    else
        return false;  // Valid square number
}

/////////////////////////////////////////////////////////////////////

int getrandint( int min, int max )
{

    int scale, shift;
    scale = max - min + 1;
    shift = min;
    return rand() % scale + shift;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:30:25.700

squareChoice 的拼写在大多数情况下都是错误的`if statement`：应该是**squareChoice**而不是**squarechoice**

所以替换：

```
else
        {
            if (squareChoice == 1 && board[1] == '1')
            board[1] = currentSymbol;
            else if (squareChoice == 2 && board[2] == '2')
            board[2] = currentSymbol;
            else if (squareChoice == 3 && board[3] == '3')
            board[3] = currentSymbol;
            else if (squareChoice == 4 && board[4] == '4')
            board[4] = currentSymbol;
            else if (squarechoice == 5 && board[5] == '5')
            board[5] = currentSymbol;
            else if (squarechoice == 6 && board[6] == '6')
            board[6] = currentSymbol;
            else if (squarechoice == 7 && board[7] == '7')
            board[7] = currentSymbol;
            else if (squarechoice == 8 && board[8] == '8')
            board[8] = currentSymbol;
            else if (squarechoice == 9 && board[9] == '9')
            board[9] = currentSymbol;
            else
            {
                cout <<"Invalid move";
                turnNum--;
            }
        } 
```

经过

```
 else
        {
            if (squareChoice == 1 && board[1] == '1')
                board[1] = currentSymbol;
            else if (squareChoice == 2 && board[2] == '2')
                board[2] = currentSymbol;
            else if (squareChoice == 3 && board[3] == '3')
                board[3] = currentSymbol;
            else if (squareChoice == 4 && board[4] == '4')
                board[4] = currentSymbol;
            else if (squareChoice == 5 && board[5] == '5')/*SPELLING MISTAKE*/
                board[5] = currentSymbol;
            else if (squareChoice == 6 && board[6] == '6')
                board[6] = currentSymbol;
            else if (squareChoice == 7 && board[7] == '7')
                board[7] = currentSymbol;
            else if (squareChoice == 8 && board[8] == '8')
                board[8] = currentSymbol;
            else if (squareChoice == 9 && board[9] == '9')
                board[9] = currentSymbol;
            else
            {
                cout <<"Invalid move";
                turnNum--;
            }
        } 
```

一个额外的右大括号“ `}`”在主函数中。删除以下行以修复它。

```
}// end while.  THIS IS NOT NEEDED.REMOVE THIS LINE FROM YOUR CODE. 
```

我已经修复了编译错误。**[演示](http://ideone.com/VMAH9C)**。仍然存在一些逻辑和运行时错误。

**UPD**：根据@Ben Voigt 评论，运行时错误可能是由于板 [9] 超出范围。阅读您的以下评论后：`// 10 element char board`，我认为

```
char board[] = "123456789"; 
```

应替换为：

```
 char board[] = "0123456789"; 
```

*即使在修复它之后，仍然存在一些逻辑和运行时错误。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:39:18.787

大长if已经被指出有问题。您可以用更短的测试替换它：

```
if (squareChoice >= 1 && squareChoice <= 9 && board[squareChoice-1] == '0' + squareChoice) {
    board[squareChoice-1] = currentSymbol;
}
else {
    cout <<"Invalid move";
    turnNum--;
} 
```

# android - 登录时 SSO facebook 连接插件失败 - 科尔多瓦

> ID：15735256
> 
> 赞同：0
> 
> 时间：2013-03-31T22:23:00.203
> 
> 标签：android, facebook, cordova

好的，我已经搜索了网的所有四个角落......两次......并且还没有找到并回答一些我认为必须是小便才能弄清楚但我没有尝试过的东西。这个问题似乎在整个互联网上都出现了，但应用程序仍在与 Facebook 集成开发中，所以为什么我找不到一个翻转的答案！

不管怎样，我要把我所做的一切都写下来。

1.  下载了最新的cordova并设置了一个项目。
2.  下载了 cordova/phonegap 的 facebook connect 插件，并在我的项目中添加了 hackbook
3.  下载了最新的 Java SDK
4.  设置一个单独的 Facebook SDK 项目
5.  将单独的项目包含到我的需要 facebook 登录身份验证的项目中。
6.  添加 ConnectPlugin.java 文件并将插件调用包含在 config.xml 插件项目中。
7.  登录 facebook，[https:](https://developers.facebook.com/apps/) //developers.facebook.com/apps/ 为自己设置了一个应用程序。
8.  给它一个临时名称，并输入一些基本信息。
9.  进入 Native Android App，输入包名（org.apache.cordova.name）和类（org.apache.cordova.name.main），并确保“facebook登录”设置为启用。
10.  下载了openSSL（大家都说要下载的那个（我在win8上））
11.  打开命令提示符，导航到 c:\Program Files\Java\jdk1.7.0_17\bin 并运行

**keytool -exportcert -alias androiddebugkey -keystore c:\android\debug.keystore | C:\OpenSSL\bin\openssl sha1 -binary | C:\OpenSSL\bin\openssl base64**

我从 android sdk 文件夹中复制了调试密钥库，并将其放在一个较短的路径目录中，因为我很懒。

1.  在被要求时输入了我的密码。
2.  复制了类似**Bmce+9aHdOoVtE7fS3F07tfj7Bc=**的密钥库，并在 facebook android 本机应用程序详细信息中输入了应用程序详细信息。
3.  在我的项目上按 F5，清理它并通过 Android 虚拟设备运行它。

**哇！像美女一样工作**

1.  关闭 AVD，插入我的 SGS3，点击运行。
2.  点击登录，并显示**“cordovaExample 想要访问您的公开个人资料、好友列表和电子邮件地址”**
3.  点击“确定”
4.  该应用程序崩溃、死机并炸毁了一头小驴。

谁能告诉我到底我做错了什么。我知道 SSO 有问题，这就是它在 AVD 上工作的原因，因为上面没有安装 facebook，但我创建了愚蠢的哈希键！！！

任何人，我求求你，Facebook 先生，如果你在外面，我做错了什么！！！

谢谢！

**编辑**

忘记添加日志：

```
D/PluginManager(16868):     init()
D/CordovaWebView(16868):    >>> loadUrlNow()
D/DroidGap(16868):          Incoming Result
D/DroidGap(16868):          Request code = 64206
D/DroidGap(16868):          We have a callback to send this result to
D/AndroidRuntime(16868):    Shutting down VM
W/dalvikvm(16868):          threadid=1: thread exiting with uncaught exception (group=0x4111e2a0)
E/AndroidRuntime(16868):    FATAL EXCEPTION: main
E/AndroidRuntime(16868):    java.lang.RuntimeException: Unable to resume activity {org.apache.cordova.main/org.apache.cordova.main.main}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=64206, result=0, data=Intent { (has extras) }} to activity {org.apache.cordova.main/org.apache.cordova.main.main}: java.lang.NullPointerException
E/AndroidRuntime(16868):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2616)
E/AndroidRuntime(16868):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2644)
E/AndroidRuntime(16868):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2130)
E/AndroidRuntime(16868):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
E/AndroidRuntime(16868):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
E/AndroidRuntime(16868):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(16868):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(16868):    at android.app.ActivityThread.main(ActivityThread.java:4898)
E/AndroidRuntime(16868):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(16868):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(16868):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
E/AndroidRuntime(16868):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
E/AndroidRuntime(16868):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(16868):    Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=64206, result=0, data=Intent { (has extras) }} to activity {org.apache.cordova.main/org.apache.cordova.main.main}: java.lang.NullPointerException
E/AndroidRuntime(16868):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3182)
E/AndroidRuntime(16868):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2603)
E/AndroidRuntime(16868):    ... 12 more
E/AndroidRuntime(16868):    Caused by: java.lang.NullPointerException
E/AndroidRuntime(16868):    at org.apache.cordova.DroidGap.onActivityResult(DroidGap.java:849)
E/AndroidRuntime(16868):    at android.app.Activity.dispatchActivityResult(Activity.java:5390)
E/AndroidRuntime(16868):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3178)
E/AndroidRuntime(16868):    ... 13 more
I/GATE(16868):              <GATE-M>DEV_ACTION_COMPLETED</GATE-M> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:31:06.633

好吧，如果我从来没有......在这里找到答案：[java.lang.RuntimeException: Failure delivery result ResultInfo while logging using Facebook](https://stackoverflow.com/questions/14611969/java-lang-runtimeexception-failure-delivering-result-resultinfo-while-logging-u)

似乎我在开发人员选项中选中了“不保留活动”，这 oooobbbvioulsy 会导致这种情况....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:29:53.780

据我了解，您生成的密钥仅适用于虚拟设备。要在真实手机中运行您的应用程序，您必须将您的应用程序上传到“google play”，并在其中提供一个签名代码，以便您将应用程序从真实手机连接到 facebook。

我希望我对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T23:20:56.180

[您可以使用此程序http://www.easyfacebookandroidsdk.com/download/keyhash.zip](http://www.easyfacebookandroidsdk.com/download/keyhash.zip)获取您的“签名应用程序密钥”

在您的 android 开发环境中安装此程序并使用模拟器运行该应用程序。您将获得一个代码，您可以将其插入“哈希键”facebook 应用程序中。

我希望我对您有所帮助。

# numpy - 在 Matplotlib 中使用多边形进行 Numpy 数组切片

> ID：15735257
> 
> 赞同：5
> 
> 时间：2013-03-31T22:23:06.330
> 
> 标签：numpy, matplotlib, polygon, slice, astronomy

这似乎是一个相当简单的问题，但我是 Python 新手，我正在努力解决它。我有一个从两个 numpy 数组（大约 25,000 条信息）生成的散点图/热图。y 轴直接取自一个数组，x 轴由两个数组的简单减法运算生成。

我现在需要做的是对数据进行切片，以便我可以使用属于绘图上某些参数的选择。例如，我需要提取所有落在平行四边形内的点： ![在此处输入图像描述](https://i.stack.imgur.com/UAcN2.jpg)

我可以使用简单的不等式切出一个矩形（请参阅下面的索引和） `idx_c`，但我确实需要一种使用更复杂的几何图形来选择点的方法。看起来这种切片可以通过指定多边形的顶点来完成。这是我能找到的最接近解决方案的方法，但我不知道如何实现它：`idx_h``idx`

[http://matplotlib.org/api/nxutils_api.html#matplotlib.nxutils.points_inside_poly](http://matplotlib.org/api/nxutils_api.html#matplotlib.nxutils.points_inside_poly)

理想情况下，我真的需要类似于下面的索引的东西，例如`colorjh[idx]`. 最终我将不得不绘制不同的数量（例如`colorjh[idx]`vs `colorhk[idx]`），因此索引需要可转移到数据集中的所有数组（大量数组）。也许这很明显，但我想有些解决方案可能不那么灵活。换句话说，我将使用这个图来选择我感兴趣的点，然后我需要这些索引来为同一个表中的其他数组工作。

这是我正在使用的代码：

```
import numpy as np
from numpy import ndarray
import matplotlib.pyplot as plt
import matplotlib
import atpy
from pylab import *

twomass = atpy.Table()

twomass.read('/IRSA_downloads/2MASS_GCbox1.tbl')

hmag = list([twomass['h_m']])
jmag = list([twomass['j_m']])
kmag = list([twomass['k_m']])

hmag = np.array(hmag)
jmag = np.array(jmag)
kmag = np.array(kmag)

colorjh = np.array(jmag - hmag)
colorhk = np.array(hmag - kmag)

idx_c = (colorjh > -1.01) & (colorjh < 6)  #manipulate x-axis slicing here here
idx_h = (hmag > 0) & (hmag < 17.01)        #manipulate y-axis slicing here
idx = idx_c & idx_h

# heatmap below
heatmap, xedges, yedges = np.histogram2d(hmag[idx], colorjh[idx], bins=200)
extent = [yedges[0], yedges[-1], xedges[-1], xedges[0]]
plt.clf()
plt.imshow(heatmap, extent=extent, aspect=0.65)

plt.xlabel('Color(J-H)', fontsize=15)           #adjust axis labels here
plt.ylabel('Magnitude (H)', fontsize=15)

plt.gca().invert_yaxis()       #I put this in to recover familiar axis orientation

plt.legend(loc=2)
plt.title('CMD for Galactic Center (2MASS)', fontsize=20)
plt.grid(True)
colorbar()

plt.show() 
```

就像我说的，我是 Python 的新手，所以解释的术语越少，我就越有可能实现它。感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T23:46:30.237

```
a = np.random.randint(0,10,(100,100))

x = np.linspace(-1,5.5,100) # tried to mimic your data boundaries
y = np.linspace(8,16,100)
xx, yy = np.meshgrid(x,y)

m = np.all([yy > xx**2, yy < 10* xx, xx < 4, yy > 9], axis = 0) 
```

![在此处输入图像描述](https://i.stack.imgur.com/mQHTY.png)

# php - 像简码一样解析 Wordpress

> ID：15735258
> 
> 赞同：11
> 
> 时间：2013-03-31T22:23:06.723
> 
> 标签：php

我想用属性解析像 Wordpress 这样的短代码：

输入：

```
[include file="header.html"] 
```

我需要输出为数组，函数名称“包含”和带有值的属性，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-11T13:54:17.147

这是我们在项目中使用的实用程序类，它将匹配字符串中的所有短代码（包括 html），并将输出一个关联数组，包括它们的`name`,`attributes`和`content`

```
final class Parser {

    // Regex101 reference: https://regex101.com/r/pJ7lO1
    const SHORTOCODE_REGEXP = "/(?P<shortcode>(?:(?:\\s?\\[))(?P<name>[\\w\\-]{3,})(?:\\s(?P<attrs>[\\w\\d,\\s=\\\"\\'\\-\\+\\#\\%\\!\\~\\`\\&\\.\\s\\:\\/\\?\\|]+))?(?:\\])(?:(?P<content>[\\w\\d\\,\\!\\@\\#\\$\\%\\^\\&\\*\\(\\\\)\\s\\=\\\"\\'\\-\\+\\&\\.\\s\\:\\/\\?\\|\\<\\>]+)(?:\\[\\/[\\w\\-\\_]+\\]))?)/u";

    // Regex101 reference: https://regex101.com/r/sZ7wP0
    const ATTRIBUTE_REGEXP = "/(?<name>\\S+)=[\"']?(?P<value>(?:.(?![\"']?\\s+(?:\\S+)=|[>\"']))+.)[\"']?/u";

    public static function parse_shortcodes($text) {
        preg_match_all(self::SHORTOCODE_REGEXP, $text, $matches, PREG_SET_ORDER);
        $shortcodes = array();
        foreach ($matches as $i => $value) {
            $shortcodes[$i]['shortcode'] = $value['shortcode'];
            $shortcodes[$i]['name'] = $value['name'];
            if (isset($value['attrs'])) {
                $attrs = self::parse_attrs($value['attrs']);
                $shortcodes[$i]['attrs'] = $attrs;
            }
            if (isset($value['content'])) {
                $shortcodes[$i]['content'] = $value['content'];
            }
        }

        return $shortcodes;
    }

    private static function parse_attrs($attrs) {
        preg_match_all(self::ATTRIBUTE_REGEXP, $attrs, $matches, PREG_SET_ORDER);
        $attributes = array();
        foreach ($matches as $i => $value) {
            $key = $value['name'];
            $attributes[$i][$key] = $value['value'];
        }
        return $attributes;
    }
}

print_r(Parser::parse_shortcodes('[include file="header.html"]')); 
```

输出：

```
Array
(
    [0] => Array
        (
            [shortcode] => [include file="header.html"]
            [name] => include
            [attrs] => Array
                (
                    [0] => Array
                        (
                            [file] => header.html
                        )
                )
        )
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T22:33:48.967

使用[此功能](http://www.jonasjohn.de/snippets/php/get-between.htm)

```
$code = '[include file="header.html"]';
$innerCode = GetBetween($code, '[', ']');
$innerCodeParts = explode(' ', $innerCode);

$command = $innerCodeParts[0];

$attributeAndValue = $innerCodeParts[1];
$attributeParts = explode('=', $attributeAndValue);
$attribute = $attributeParts[0];
$attributeValue = str_replace('"', '', $attributeParts[1]);

echo $command . ' ' . $attribute . '=' . $attributeValue;
//this will result in include file=header.html 
```

$command 将是“包括”

$attribute 将是“文件”

$attributeValue 将是“header.html”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-03T21:30:32.380

我的 PHP 框架中也需要这个功能。这是我写的，效果很好。它适用于我非常喜欢的匿名函数（有点像 JavaScript 中的回调函数）。

```
<?php
//The content which should be parsed
$content = '<p>Hello, my name is John an my age is [calc-age day="4" month="10" year="1991"].</p>';
$content .= '<p>Hello, my name is Carol an my age is [calc-age day="26" month="11" year="1996"].</p>';

//The array with all the shortcode handlers. This is just a regular associative array with anonymous functions as values. A very cool new feature in PHP, just like callbacks in JavaScript or delegates in C#.
$shortcodes = array(
    "calc-age" => function($data){
        $content = "";
        //Calculate the age
        if(isset($data["day"], $data["month"], $data["year"])){
            $age = date("Y") - $data["year"];
            if(date("m") < $data["month"]){
                $age--;
            }
            if(date("m") == $data["month"] && date("d") < $data["day"]){
                $age--;
            }
            $content = $age;
        }
        return $content;
    }
);
//http://stackoverflow.com/questions/18196159/regex-extract-variables-from-shortcode
function handleShortcodes($content, $shortcodes){
    //Loop through all shortcodes
    foreach($shortcodes as $key => $function){
        $dat = array();
        preg_match_all("/\[".$key." (.+?)\]/", $content, $dat);
        if(count($dat) > 0 && $dat[0] != array() && isset($dat[1])){
            $i = 0;
            $actual_string = $dat[0];
            foreach($dat[1] as $temp){
                $temp = explode(" ", $temp);
                $params = array();
                foreach ($temp as $d){
                    list($opt, $val) = explode("=", $d);
                    $params[$opt] = trim($val, '"');
                }
                $content = str_replace($actual_string[$i], $function($params), $content);
                $i++;
            }
        }
    }
    return $content;
}
echo handleShortcodes($content, $shortcodes);
?> 
```

结果：
您好，我的名字是 John，我的年龄是 22。
您好，我的名字是 Carol，我的年龄是 17。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T23:49:14.840

这实际上比表面上看起来更难。安德鲁的答案有效，但如果方括号出现在源文本中[例如，像这样]，就会开始崩溃。WordPress 通过预先注册有效短代码列表来工作，并且仅在括号内的文本与这些预定义值之一匹配时才对括号内的文本进行操作。这样它就不会破坏任何可能恰好有一组方括号的常规文本。

WordPress 短代码引擎的实际[源代码](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/shortcodes.php)相当健壮，看起来修改文件以使其自行运行并不那么困难——然后您可以在应用程序中使用它来处理艰巨的工作。（如果您有兴趣，请查看`get_shortcode_regex()`该文件，以了解该问题的正确解决方案实际上有多麻烦。）

使用 WP shortcodes.php 对您的问题进行非常粗略的实现**如下**所示：

```
// Define the shortcode
function inlude_shortcode_func($attrs) {
    $data = shortcode_atts(array(
        'file' => 'default'
    ), $attrs);

    return "Including File: {$data['file']}";
}
add_shortcode('include', 'inlude_shortcode_func');

// And then run your page content through the filter
echo do_shortcode('This is a document with [include file="header.html"] included!'); 
```

同样，根本没有经过测试，但它不是一个很难使用的 API。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-09T04:01:27.933

更新@Duco 的片段，看起来，当我们有一些类似的东西时，它会被空间破坏

```
[Image source="myimage.jpg" alt="My Image"] 
```

对当前的一个：

```
function handleShortcodes($content, $shortcodes){
    function read_attr($attr) {
        $atList = [];

        if (preg_match_all('/\s*(?:([a-z0-9-]+)\s*=\s*"([^"]*)")|(?:\s+([a-z0-9-]+)(?=\s*|>|\s+[a..z0-9]+))/i', $attr, $m)) {
            for ($i = 0; $i < count($m[0]); $i++) {
                if ($m[3][$i])
                    $atList[$m[3][$i]] = null;
                else
                    $atList[$m[1][$i]] = $m[2][$i];
            }
        }
        return $atList;
    }
    //Loop through all shortcodes
    foreach($shortcodes as $key => $function){
        $dat = array();
        preg_match_all("/\[".$key."(.*?)\]/", $content, $dat);

        if(count($dat) > 0 && $dat[0] != array() && isset($dat[1])){
            $i = 0;
            $actual_string = $dat[0];
            foreach($dat[1] as $temp){
                $params = read_attr($temp);
                $content = str_replace($actual_string[$i], $function($params), $content);
                $i++;
            }
        }
    }
    return $content;
}
$content = '[image source="one" alt="one two"]'; 
```

结果：

```
array( 
  [source] => myimage.jpg,
  [alt] => My Image
) 
```

**更新（2020 年 2 月 11 日）**
它似乎在 preg_match 下遵循正则表达式，仅标识具有属性的短代码

```
preg_match_all("/\[".$key." (.+?)\]/", $content, $dat); 
```

使其正常工作**[contact-form]**或**[mynotes]**。我们可以将以下内容更改为

```
preg_match_all("/\[".$key."(.*?)\]/", $content, $dat); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-22T10:41:10.617

我用wordpress函数修改了上面的函数

```
function extractThis($short_code_string) {
    $shortocode_regexp = "/(?P<shortcode>(?:(?:\\s?\\[))(?P<name>[\\w\\-]{3,})(?:\\s(?P<attrs>[\\w\\d,\\s=\\\"\\'\\-\\+\\#\\%\\!\\~\\`\\&\\.\\s\\:\\/\\?\\|]+))?(?:\\])(?:(?P<content>[\\w\\d\\,\\!\\@\\#\\$\\%\\^\\&\\*\\(\\\\)\\s\\=\\\"\\'\\-\\+\\&\\.\\s\\:\\/\\?\\|\\<\\>]+)(?:\\[\\/[\\w\\-\\_]+\\]))?)/u";
    preg_match_all($shortocode_regexp, $short_code_string, $matches, PREG_SET_ORDER);
    $shortcodes = array();
    foreach ($matches as $i => $value) {
       $shortcodes[$i]['shortcode'] = $value['shortcode'];
       $shortcodes[$i]['name'] = $value['name'];
       if (isset($value['attrs'])) {
        $attrs = shortcode_parse_atts($value['attrs']);
        $shortcodes[$i]['attrs'] = $attrs;
       }
       if (isset($value['content'])) {
        $shortcodes[$i]['content'] = $value['content'];
       }
    }
    return $shortcodes;
  } 
```

我认为这对所有人都有帮助:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-01T16:49:15.280

我只是有同样的问题。对于我必须做的事情，我将利用现有的 xml 解析器，而不是编写自己的正则表达式。我确信在某些情况下它不起作用

例子.php

```
<?php

$file_content = '[include file="header.html"]';

// convert the string into xml
$xml = str_replace("[", "<", str_replace("]", "/>", $file_content));

$doc = new SimpleXMLElement($xml);

echo "name: " . $doc->getName() . "\n";
foreach($doc->attributes() as $key => $value) {
    echo "$key: $value\n";
} 
```

```
$ php example.php 
name: include
file: header.html 
```

为了让它在 ubuntu 上运行，我认为你必须这样做

```
sudo apt-get install php-xml 
```

（感谢[https://drupal.stackexchange.com/a/218271](https://drupal.stackexchange.com/a/218271)）

如果文件中有很多这些字符串，那么我认为您仍然可以进行查找替换，然后将其全部视为 xml。

# android - 默认布局颜色

> ID：15735260
> 
> 赞同：0
> 
> 时间：2013-03-31T22:23:08.987
> 
> 标签：android, eclipse, layout, colors, default

我想知道为什么每次我创建一个新的Android项目时，Eclipse都会打开一个白色背景的主要活动，而在以前的版本中，它是黑色的。我有什么办法可以将其改回黑色作为未来活动的默认颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:28:44.140

他们将 eclipse 在您的资源中使用的默认主题更改为 light 主题。更改您的资源文件（删除 eclipse 添加的您不使用的东西），它会变回黑色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:57:49.023

因此，如果您想将整个应用程序重新设置为黑色，您可以在清单文件中使用以下行。

写入`Application`标签属性`theme`。

```
<Application
    android:theme="@android:style/Theme.Black" //old targeted application
    OR
    android:theme="@android:style/Theme.Holo" //for new devices
    ... > 
```

现在这个应用程序中的所有活动都有黑色主题。

`Activity`您可以通过在标签中使用主题属性来“覆盖”它。

```
<Activity
      android:theme="some theme"
      ...> 
```

# wifi - Android 到 Arduino Uno + Wi-Fi 屏蔽串通信

> ID：15735264
> 
> 赞同：3
> 
> 时间：2013-03-31T22:23:11.610
> 
> 标签：wifi, arduino

我正在尝试使用 Arduino、Android 应用程序和路由器制作无线灯光控制设备（开/关/调光）。

我正在使用路由器将 Arduino 设置为静态 IP 192.168.1.2。我正在从 Android 应用程序向 IP 地址 192.168.1.2 发送字符串（“1”-关闭、“2”-降低亮度、“3”-增加亮度、“4”-打开）。[我已经使用Arduino Wi-Fi shield](http://arduino.cc/en/Main/ArduinoWiFiShield)将 Arduino连接到 Internet，并使用以下代码设置了 WifiServer：

```
char ssid[] = "NAME"; // Your network SSID (name)
char pass[] = "PASS"; // Your network password (use for WPA, or use as key for WEP)

int keyIndex = 0;     // Your network key Index number (needed only for WEP)

int status = WL_IDLE_STATUS;

WiFiServer server(23);

boolean alreadyConnected = false; // Whether or not the client was connected previously.

void setup() {
    // Start serial port:
    Serial.begin(9600);

    // Attempt to connect to Wi-Fi network:
    while ( status != WL_CONNECTED) {
        Serial.print("Attempting to connect to SSID: ");
        Serial.println(ssid);
        status = WiFi.begin(ssid, pass);
        // Wait 10 seconds for connection:
        delay(10000);
    }
    // Start the server:
    server.begin();
    // You're connected now, so print out the status:
    printWifiStatus();
 } 
```

我遇到的主要问题是如何接受和打印来自 Android 设备的字符串。我必须这样做的当前代码是：

```
 // Listen for incoming clients
    WiFiClient client = server.available();
    if (client) {
        // An HTTP request ends with a blank line
        boolean newLine = true;
        String line = "";

        while (client.connected() && client.available()) {
            char c = client.read();
            Serial.print(c);

            // If you've gotten to the end of the line (received a newline
            // character) and the line is blank, the HTTP request has ended,
            // so you can send a reply.
            if (c == '\n' && newLine) {
                // Send a standard HTTP response header
                //client.println("HTTP/1.1 200 OK");
                //client.println("Content-Type: text/html");
                //client.println();
            }
            if (c == '\n') {
                // You're starting a new line
                newLine = true;
                Serial.println(line);
                line = "";
            }
            else if (c != '\r') {
              // You've gotten a character on the current line
              newLine = false;
              line += c;
            }
        }
        Serial.println(line);

        // Give the web browser time to receive the data
        delay(1);

        // Close the connection:
        //client.stop();
    }
} 
```

我将此代码基于博客文章*[Android Arduino Switch with a TinyWebDB hack](http://blog.rogiervandenberg.nl/2013/03/android-arduino-switch-with-tinywebdb.html)*，但此代码用于以太网屏蔽。Android 应用程序是使用[MIT App Inventor](http://en.wikipedia.org/wiki/App_Inventor_for_Android)制作的，与博文中的类似。

[TLDR](http://en.wiktionary.org/wiki/TLDR)，如何使用 Arduino Wi-Fi shield 获取字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T14:02:27.143

您可以将字符读入完整的字符串，而不是将每个单独的字符读入串行监视器，如上面的示例所示。

在您的示例中，这段代码将从客户端 TCP 会话中读取每个字符并将其打印到串行监视器，从而在串行控制台中显示 HTTP 请求。

```
 char c = client.read();
    Serial.print(c); 
```

试试这样的东西。在 Arduino 草图中的 setup() 函数之前声明一个名为“readString”的字符串，如下所示：

```
 String readString;

    void setup() {
        //setup code
    }

    void loop() {

        // Try this when you're reading inside the while client.connected loop instead of the above:

        if (readString.length() < 100) {
            readString += c;
            Serial.print(c);
        } 
```

这是循环（）的工作示例：

```
void loop() {

    // Listen for incoming clients
    WiFiClient client = server.available();

    if (client) {
        Serial.println("new client");

        // An HTTP request ends with a blank line
        boolean currentLineIsBlank = true;
        while (client.connected()) {
            if (client.available()) {
                char c = client.read();
                //Serial.write(c);
                // If you've gotten to the end of the line (received a newline
                // character) and the line is blank, the HTTP request has ended,
                // so you can send a reply.
                if (readString.length() < 100) {
                    readString += c;
                    Serial.print(c);
                }
                if (c == '\n' && currentLineIsBlank) {
                    client.println("HTTP/1.1 200 OK");
                    client.println("Content-Type: text/html");
                    client.println("Connnection: close");
                    client.println();
                    client.println("<!DOCTYPE HTML>");
                    //send the HTML stuff
                    client.println("<html><head><title>Admin Web</title><style type=\"text/css\">");
                    client.println("body { font-family: sans-serif }");
                    client.println("h1 { font-size: 14pt; }");
                    client.println("p  { font-size: 10pt; }");
                    client.println("a  { color: #2020FF; }");
                    client.println("</style>");
                    client.println("</head><body text=\"#A0A0A0\" bgcolor=\"#080808\">");
                    client.println("<h1>Arduino Control Panel</h1><br/>");
                    client.println("<form method=\"link\" action=\"/unlockdoor\"><input type=\"submit\" value=\"Unlock Door!\"></form>");
                    client.println("<br/>");
                    client.println("</body></html>");
                    break;
                }
                if (c == '\n') {
                  // You're starting a new line.
                  currentLineIsBlank = true;
                }
                else if (c != '\r') {
                  // You've gotten a character on the current line.
                  currentLineIsBlank = false;
                }
            }
        }
        // Give the web browser time to receive the data.
        delay(1);
          // Close the connection:
          client.stop();

          Serial.println("client disonnected");
          if (readString.indexOf("/unlockdoor") > 0)
          {
             unlockdoor();
             Serial.println("Unlocked the door!");
          }
          readString = "";
  } 
```

# php - PHP - 在 PHP 文件中操作/替换函数参数的脚本？

> ID：15735265
> 
> 赞同：0
> 
> 时间：2013-03-31T22:23:13.203
> 
> 标签：php, parameters, file-get-contents, parentheses

我正在编写一个脚本（在 PHP 中），它将通过一个 PHP 文件，找到一个函数的所有实例，用另一个名称替换函数名，并操作参数。我正在使用`get_file_contents()`then`strpos()`来查找函数的位置，但是一旦我知道函数开始的位置，我正试图找到一种提取参数的好方法。现在我只是使用循环遍历文件字符串中的下一个字符并计算左括号和右括号的数量。一旦它关闭函数参数，它就会退出并传回参数字符串。不幸的是，用括号括起来的引号（即 ）会遇到麻烦`function_name(')', 3)`。我也可以只计算引号，但是我必须处理转义引号、不同类型的引号等。

有没有一种好方法，知道函数的开始，可靠地获取参数字符串？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:02:43.047

**编辑：** 如果我没有仔细阅读问题，如果你只想获取函数参数，你可以看到这些例子：

```
$content_file = 'function func_name($param_1=\'\',$param_2=\'\'){';
preg_match('/function func_name\((.*)\{/',$content_file,$match_case);
print_r($match_case); 
```

但如果您想操作该功能，请阅读下文。

* * *

这些怎么样 ：

1.  使用读取文件`file_get_contents();`
2.  用于`preg_match_all();`获取该文件中的所有功能。
3.  请不要让我`/*[new_function]*/`在该文件中写入以识别 EOF。

我使用它来动态添加/删除功能，而不必打开该 php 文件。

实际上，它应该是这样的：

```
//I use codeigniter read_file(); function to read the file.
//$content_file = read_file('path_to/some_php_file.php');
//i dont know whether these line below will work.
$content_file = file_get_content('path_to/some_php_file.php');
//get all function inside php file.
preg_match_all('/function (.*)\(/',$content_file,$match_case);
//
//function name u want to get
$search_f_name = 'some_function_name';
//
for($i=0;$i<count($match_case[1]);$i++){ 
    if(trim($match_case[1][$i]) == $search_f_name){ 
        break;
    } 
}
//get end position by using next function start position
if($i!=count($match_case[1])-1){
    $next_function= $match_case[1][$i+1];
    $get_end_pos = strripos($content_file,'function '.$next_function);
} else {
    //Please not that i write /*[new_function]*/ at the end of my php file 
    //before php closing tag ( ?> ) to identify EOF. 
    $get_end_pos = strripos($content_file,'/*[new_function]*/');
}
//get start position
$get_pos = strripos($content_file,'function '.$search_f_name);
//get function string
$func_string = substr($content_file,$get_pos,$get_end_pos-$get_pos); 
```

您可以`echo $func_string;`知道这些代码是否运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:31:43.717

使用真正的解析器，像这样：

[https://github.com/nikic/PHP-Parser](https://github.com/nikic/PHP-Parser)

使用此库，您可以将源代码作为“节点”对象树而不是字符串来操作，然后将其写回。

# ruby-on-rails - Rails 3.2.11 在 erb 模板中呈现 unicode

> ID：15735266
> 
> 赞同：0
> 
> 时间：2013-03-31T22:23:17.020
> 
> 标签：ruby-on-rails, unicode, ruby-on-rails-3.2, erb

我正在尝试在我的 erb 模板中呈现 unicode，例如：

我的种子：

```
Currency.create!(currency: 'USD', rate: 1.2805, title: 'U.S. Dollars', code: '\u0024', active: 1) 
```

控制器：

```
@currencies = []
Currency.where(:active => TRUE).each do |node|
   c = node.rate * 25
   c = number_to_currency(c, :precision => 2, :unit => node.code)
   @currencies.push(:currency => node.currency, :price => c)
end 
```

模板.erb：

```
<select>
    <% @currencies.each do |node| %>
        <option>
            <%= node[:currency] %> - <%= node[:price] %>
        </option>
    <% end %>
</select> 
```

我期望这个：

```
<option>USD - $32.01</option> 
```

但我得到了原始的 unicode 输出：

```
<option>USD - \u002432.01</option> 
```

我试过了：

添加 utf8 编码元属性。添加： <%# encoding: utf-8 %> 到我的模板。并在字符串上使用 .html_safe 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:03:15.380

这是因为您在种子中使用了单引号。它应该是双引号：

```
"\u0024" # => "$"
'\u0024' # => "\\u0024" 
```

# c++ - C++ 编译器将列表转换为 const 列表

> ID：15735267
> 
> 赞同：0
> 
> 时间：2013-03-31T22:23:18.627
> 
> 标签：c++, compiler-errors

这可能很简单，但我似乎无法解决。在我的内部`Vertex`，我有一个`std::list<Edge>`但是当我尝试调用它的方法时，`push_front`我得到一个错误，说`list`是`const`并且我无法推动它。我认为出于某种原因，编译器正在`std::list<Edge>`将`const std::list<Edge>`. 我知道我的代码设置得不是很好，但这只是家庭作业，所以我采取了一些捷径。

头文件：

```
#ifndef GRAPH_H
#define GRAPH_H

#include <set>
#include <list>

class Edge{
public:
    unsigned int to;
    unsigned int weight;
};

class Vertex{
public:
    unsigned int id;
    std::list<Edge> edges;

    bool operator<(const Vertex& other) const{
        return id < other.id;
    }
};

class Graph{

public:
    void add_vertex(unsigned int id);
    void add_edge(unsigned int from, unsigned int to, unsigned int weight);
    std::set<Vertex> get_vertices();
    std::list<Edge> get_edges(unsigned int id);

private: 
    std::set<Vertex> _vertices;
    unsigned int size = 0;

}; 
```

导致错误的行：

```
void Graph::add_edge(unsigned int from, unsigned int to, unsigned int weight) 
{
Vertex find_vert;
find_vert.id = from;
set<Vertex>::iterator from_v = _vertices.find(find_vert);
Edge new_edge;
new_edge.to = to;
new_edge.weight = weight;

from_v->edges.push_front(new_edge); // ERROR HERE
} 
```

运行中的编译器错误消息`g++ -c Graph.cpp`：

```
Graph.cpp:23:38: error: passing ‘const std::list<Edge>’ as ‘this’ argument of ‘void std::list<_Tp,
_Alloc>::push_front(const value_type&) [with _Tp = Edge; _Alloc = std::allocator<Edge>; std::list<_Tp,
_Alloc>::value_type = Edge]’ discards qualifiers [-fpermissive] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T22:58:22.143

a 的内容`std::set`是隐式`const`的，因为更改内容可能会使它们的排序顺序无效。

这使得这里`from_v`隐含`const`。

```
set<Vertex>::iterator from_v = _vertices.find(find_vert); 
```

你的错误是告诉你你正在尝试修改一个`const`对象。

```
 from_v->edges.push_front(new_edge);
// ^^^^^^ const  ^^^^^^^^^^ non-const behavior 
```

# python - 在 Python 的“while”循环中使用“and”表达式

> ID：15735268
> 
> 赞同：2
> 
> 时间：2013-03-31T22:23:19.323
> 
> 标签：python, list, while-loop, int, expression

在我的程序中，我有一个列表，我想要一个循环，直到列表的所有列都等于 2。列中的所有项目都是数字，但有些被格式化为字符串，有些被格式化为整数，因为它们是在程序的其他部分进行了更改。以下是我尝试过的 3 个解决方案，我正在运行 python 2.7。

```
while (int(newlist[0][1]) != 2) and (int(newlist[1][1]) != 2) etc... != 2: 
```

我遇到的问题是当只有一个列表项（而不是整个列）等于 2 时循环结束

```
while int(newlist[0-8][1]) != 2:

while int(newlist[0 and 1 and 2 and 3 and 4 and 5 and 6 and 7 and 8][1]) != 2: 
```

如果有人能告诉我我做错了什么或更好的方法，我将非常感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T22:26:26.983

括号中的表达式被评估为单个值：`newlist[0-8]`与 相同`newlist[-8]`，与`newlist[0 and 1 and 2 and 3]`相同 `newlist[0]`。你想要[`any`](http://docs.python.org/3/library/functions.html#any)：

```
while any(int(newsublist[1]) != 2 for newsublist in newlist): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:52:09.243

尝试使用 for 循环。假设`L`是您的列表，现在我们可以遍历行，每个行本身就是一个列表，如下所示：

```
column = 1
for row in L:
  while int(row[column]) != 2:
    do_this()
    increase_column() 
```

确保 while 循环通过增加 row[column] 来终止，因此它最终会导致 while 测试失败。

# dart - Dart 简单的 webcomponent 混淆

> ID：15735275
> 
> 赞同：0
> 
> 时间：2013-03-31T22:24:31.490
> 
> 标签：dart, dart-webui, dart-editor

不知何故，我无法构建我的第一个 Dart Web 组件示例。该项目非常简单，取自[Seth 博客](http://blog.sethladd.com/2012/11/your-first-web-component-with-dart.html)。

首先，`build.dart`文件应该放在项目的根文件夹中（而不是`web/`文件夹中）<-是真的吗？

这是代码：

```
Project
\--ui
    \-- test_component.html

          <!DOCTYPE html>
          <html lang="en">
           <body>
            <element name="x-click-counter" constructor="CounterComponent" extends="div">
            <template>
              <button on-click="increment()">Click me</button>
              <span>(click count: {{count}})</span>
            </template>
            <script type="application/dart" src="test_component.dart"></script>
            </element>
           <!-- more below... -->
          </body>
        </html>

     \-- test_component.dart

         library test_component;

         import 'package:web_ui/web_ui.dart';

         class CounterComponent extends WebComponent
         {
             int count = 0;
             void increment(e)
             {
                 count++;
             }
         }

 \-- web
      \-- index.html

          <!DOCTYPE html>
          <html lang="en">
          <head>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
            <link rel="components" href="ui/test_component.html">
            <title>Dart • TodoMVC</title>
          </head>
          <body>
            <x-click-counter></x-click-counter>
            <script type="application/dart">main() {}</script>
          </body>
         </html>

 \-- build.dart

     import 'dart:io';
     import 'packages/web_ui/component_build.dart';

     void main()
     {
          build(new Options().arguments, ['web/index.html']);
     } 
```

就在我移动`build.dart`到根文件夹之后，发生了奇怪的错误：

--- 00:51:50 01/04/2013 build.dart --machine --changed=web\index.html --- file:/C:/Projects/ProtonUiComponents/build.dart build.dart 返回错误代码255

未捕获的错误：类“_File”没有具有匹配参数的实例方法“open”。

NoSuchMethodError：传递给名为“open”的方法的参数数量不正确接收方：“_File@0x1da10ec4”的实例尝试调用：open（模式：“FileMode”的实例）发现：open（模式）堆栈跟踪：

```
#0      Object.noSuchMethod (dart:core-patch:1884:25)
#1      ConsoleFileSystem.writeString (file:///C:/Projects/ProtonUiComponents/packages/web_ui/src/file_system/console.dart:22:43)
#2      writeFile (file:///C:/Projects/ProtonUiComponents/packages/web_ui/dwc.dart:103:27)
#3      emitFiles.<anonymous closure> (file:///C:/Projects/ProtonUiComponents/packages/web_ui/dwc.dart:91:35)
#4      List.forEach (dart:core-patch:1219:8)
#5      emitFiles (file:///C:/Projects/ProtonUiComponents/packages/web_ui/dwc.dart:91:18)
#6      run.<anonymous closure>.<anonymous closure> (file:///C:/Projects/ProtonUiComponents/packages/web_ui/dwc.dart:85:29)
#7      _ThenFuture._sendValue (dart:async:463:24)
#8      _FutureImpl._setValue (dart:async:361:26)
#9      _FutureListenerWrapper._sendValue (dart:async:221:21)
#10     _FutureImpl._setValue (dart:async:361:26)
#11     _FutureImpl._setOrChainValue (dart:async:437:16)
#12     _ThenFuture._sendValue (dart:async:473:21)
#13     _FutureImpl._setValue (dart:async:361:26)
#14     _FutureListenerWrapper._sendValue (dart:async:221:21)
#15     _FutureImpl._setValue (dart:async:361:26)
#16     _FutureImpl._setOrChainValue (dart:async:437:16)
#17     _ThenFuture._sendValue (dart:async:473:21)
#18     _FutureImpl._setValue (dart:async:361:26)
#19     _CompleterImpl.complete (dart:async:190:21)
#20     _FutureImpl._FutureImpl.wait.<anonymous closure> (dart:async:273:29)
#21     _ThenFuture._sendValue (dart:async:463:24)
#22     _FutureImpl._setValue (dart:async:361:26)
#23     _CatchErrorFuture._sendValue (dart:async:485:14)
#24     _FutureImpl._setValue (dart:async:361:26)
#25     Stream.reduce.<anonymous closure> (dart:async:699:23) 
```

如果我`build.dart`手动运行，我会收到并出错`dwc.dart`：

`type 'ConsoleFileSystem' is not a subtype of type 'FileSystem' of 'fileSystem'.`

然后`index.html`根本无法运行（不在 Dartium 或 Javascript 中），出现 Dart 编辑器错误：

![飞镖错误](https://i.stack.imgur.com/uvoLt.png)

我做错了什么？

更新：

*   我在 Windows 7 x64 上运行
*   Dart 编辑器版本 0.4.2_r20259
*   Dart SDK 版本 0.4.2.8_r20259

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:16:02.443

当前编辑器版本（截至 2013 年 4 月 1 日）是 20602。更新到最新版本应该可以修复它。

[http://dartlang.org/docs/editor](http://dartlang.org/docs/editor)

# ios - 为什么我无法读取 iOS WiFi 地址？

> ID：15735277
> 
> 赞同：0
> 
> 时间：2013-03-31T22:24:59.463
> 
> 标签：ios, titanium, wifi

我需要读取我的 iOS 设备的 Wifi 地址。但是我尝试过的代码在模拟器和 iPad 2 / v6.1.3 上失败了

我在 Titanium 工作，所以首先我尝试了 Titanium.Platform.address。回来未定义。

然后我开始在Objective C中工作。但是这个函数也无法获取WiFi IP。我知道 WiFi 已打开，因为如果我手动输入设备的地址，互联网可以正常工作并且我的网络项目可以正常工作。

```
- (id)networkAddress
{
    NSLog(@"[INFO] getting network IP");

    BOOL success;
    struct ifaddrs * addrs;
    const struct ifaddrs * cursor;

    success = getifaddrs(&addrs) == 0;
    if (success) {

        NSLog(@"[INFO] getifaddrs() success");

        cursor = addrs;
        while (cursor != NULL) {
            if (cursor->ifa_addr->sa_family == AF_INET && (cursor->ifa_flags & IFF_LOOPBACK) == 0) // this second test keeps from picking up the loopback address
            {
                NSString *name = [NSString stringWithUTF8String:cursor->ifa_name];
                if ([name isEqualToString:@"en0"]) { // found the WiFi adapter
                    return [NSString stringWithUTF8String:inet_ntoa(((struct sockaddr_in *)cursor->ifa_addr)->sin_addr)];
                }
            }

            cursor = cursor->ifa_next;
        }
        freeifaddrs(addrs);
    }
    return NULL;
} 
```

什么会阻止我读取 WiFi IP 地址？

# c# - 我可以在 Azure 上使用 LoadLibrary 吗？

> ID：15735278
> 
> 赞同：3
> 
> 时间：2013-03-31T22:25:09.007
> 
> 标签：c#, asp.net-mvc, azure, asp.net-mvc-4

我处于 Web 服务的设计阶段。我将使用 MVC 4，我们正在研究 Azure。我有一个非托管 C++ DLL（32 位和/或 64 位，我们都可以构建），这是我现在必须使用的内部遗留代码。DLL 仅导出 MVC 代码所需的函数（无类）。

由于 .NET DllImport 语句对于 DLL 名称是固定的，因此我们使用 .NET 代码中的一个方案通过 kernel32.dll 执行 LoadLibrary。这似乎在本地运行良好，并且有利于更改基于 32/64 位和/或调试版本加载的 DLL。

1.  这种 LoadLibrary 方法是否适用于 Azure？
2.  放置图书馆的最佳位置在哪里？我在想 App_Data 文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:29:57.673

只要您在云端安装了[Visual C++ 运行时库（](http://www.microsoft.com/en-us/download/details.aspx?id=30679)[此处的说明](https://stackoverflow.com/a/11137282/1469494)），并且您调用的本机 dll 编译为 64 位，就应该可以正常工作。

我不知道最佳位置，我只是将本机 dll 放在包含包装程序集的文件夹内名为“x64”（或 32 位的 x86）的文件夹中，然后将该文件夹放在项目根目录下。

另外不要忘记将本机 dll 的“复制到输出目录”属性设置为“始终复制”。

# javascript - 如何将最终用户登录到我的单页应用程序，并将他们重定向到单页应用程序？

> ID：15735284
> 
> 赞同：3
> 
> 时间：2013-03-31T22:25:56.390
> 
> 标签：javascript, node.js, backbone.js, express, passport.js

如何使用 Backbone.js 将最终用户登录到我的单页应用程序，并将他们重定向到单页应用程序。Express.js 和 passport.js。

我的护照、mongo.db、快递和骨干都在我的应用程序上工作。但是，成功登录后，我想加载单页、主干 js、Web 应用程序。截至目前，我的登录系统工作正常。但是当我将用户重定向到应用程序时，在成功登录后，由于某种原因它只是重定向回登录页面。我已经使用控制台日志来确保服务器端的登录代码没有任何问题，并且一切正常。奇怪的是，当我打开 chrome 开发人员工具并查看标题和响应时，我得到了正确的索引页面，但它没有在浏览器中加载，并且 Url 仍然存在`http://localhost:3000/login`。

这是我怀疑一定是罪魁祸首的代码：

**见编辑#2**

我已经在我的基本（'/'）路由中尝试过`res.sendfile(__dirname + '/public/index.html');`，`res.render('index', { user: req.user });`但它们似乎都没有加载 index.html。请注意，public/index.html 和 ejs 索引本质上是相同的文件。我开始在客户端加载我的整个应用程序，但现在我试图将主 index.html 文件移动到服务器端，以便它可以受到密码保护。

请让我知道是否有任何问题可以帮助我更好地解释这个问题，或者是否还有您想查看的代码。我真的很想弄清楚这件事。

**编辑**正如您在我的浏览器的屏幕截图中看到的那样，我只有简单的表单。提交该表单后，我确实在响应中返回了所需的页面，但它没有在浏览器中加载。我还在控制台中遇到了无法加载资源错误，但由于某种原因无法加载 /login - 即使我正在尝试加载 index.html 。 ![在此处输入图像描述](https://i.stack.imgur.com/9vMRX.png)

**编辑#2**尽管我讨厌粘贴无穷无尽的代码块，但我认为解决此问题的唯一方法是粘贴无穷无尽的代码块。所以这里是 server.js 的全部荣耀 - 减去一些不相关的 api 路由：

```
var express = require('express')
  , http = require('http')
  , passport = require('passport')
  , LocalStrategy = require('passport-local').Strategy
  , bcrypt = require('bcrypt')
  , SALT_WORK_FACTOR = 10
  , mongoose = require('mongoose')
  , path = require('path');

var app = express();
var server = http.createServer(app);
var io = require('socket.io').listen(server);
server.listen(3000);

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.engine('ejs', require('ejs-locals'));
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser('your secret here'));
  app.use(express.session());
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
    app.use( express.errorHandler({ dumpExceptions: true, showStack: true }));
});

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
});

//Connect to database
var db = mongoose.connect( 'mongodb://localhost/attorneyapp' );

/*
|-------------------------------------------------------------------------------
| Schemas
|-------------------------------------------------------------------------------
*/
var userSchema = mongoose.Schema({
  username: { type: String, required: true, unique: true },
  email: { type: String, required: true, unique: true },
  password: { type: String, required: true},
});
// Bcrypt middleware
userSchema.pre('save', function(next) {
    var user = this;

    if(!user.isModified('password')) return next();

    bcrypt.genSalt(SALT_WORK_FACTOR, function(err, salt) {
        if(err) return next(err);

        bcrypt.hash(user.password, salt, function(err, hash) {
            if(err) return next(err);
            user.password = hash;
            next();
        });
    });
});
// Password verification
userSchema.methods.comparePassword = function(candidatePassword, cb) {
    bcrypt.compare(candidatePassword, this.password, function(err, isMatch) {
        if(err) return cb(err);
        cb(null, isMatch);
    });
};
var Client = new mongoose.Schema({
    first_name: String,
    last_name: String,
    status: String,
});
var Case = new mongoose.Schema({
    case_name: String,
    status: String,
});

/*
|-------------------------------------------------------------------------------
| Models
|-------------------------------------------------------------------------------
*/
var User = mongoose.model( 'User', userSchema );
var ClientModel = mongoose.model( 'Client', Client );
var CaseModel = mongoose.model( 'Case', Case );

// Seed a user
// var user = new User({ username: 'bob', email: 'bob@example.com', password: 'secret' });
// user.save(function(err) {
//   if(err) {
//     console.log(err);
//   } else {
//     console.log('user: ' + user.username + " saved.");
//   }
// });

// Passport session setup.
//   To support persistent login sessions, Passport needs to be able to
//   serialize users into and deserialize users out of the session.  Typically,
//   this will be as simple as storing the user ID when serializing, and finding
//   the user by ID when deserializing.
passport.serializeUser(function(user, done) {
  done(null, user.id);
});

passport.deserializeUser(function(id, done) {
  User.findById(id, function (err, user) {
    done(err, user);
  });
});
// Use the LocalStrategy within Passport.
//   Strategies in passport require a `verify` function, which accept
//   credentials (in this case, a username and password), and invoke a callback
//   with a user object.  In the real world, this would query a database;
//   however, in this example we are using a baked-in set of users.
passport.use(new LocalStrategy(function(username, password, done) {
  User.findOne({ username: username }, function(err, user) {
    if (err) { 
        console.log('error: ', err);
        return done(err); 

    }
    if (!user) { 
        console.log('Unknown user ', username);  
        return done(null, false, { message: 'Unknown user ' + username }); 
    }
    user.comparePassword(password, function(err, isMatch) {
      if (err){
        console.log('error: ', err);

        return done(err);
      } 
      if(isMatch) {
        console.log('it is a match');
        return done(null, user);
      } else {
        console.log('invalid password');

        return done(null, false, { message: 'Invalid password' });
      }
    });
  });
}));
/*
|-------------------------------------------------------------------------------
| User
|-------------------------------------------------------------------------------
*/
// POST /login
//   Use passport.authenticate() as route middleware to authenticate the
//   request.  If authentication fails, the user will be redirected back to the
//   login page.  Otherwise, the primary route function function will be called,
//   which, in this example, will redirect the user to the home page.
//
//   curl -v -d "username=bob&password=secret" http://127.0.0.1:3000/login
//   
/***** This version has a problem with flash messages
app.post('/login', 
  passport.authenticate('local', { failureRedirect: '/login', failureFlash: true }),
  function(req, res) {
    res.redirect('/');
  });
*/

// POST /login
//   This is an alternative implementation that uses a custom callback to
//   acheive the same functionality.
app.get('/', function(req, res){
    console.log('base router is being called');

    // res.sendfile(__dirname + '/public/index.html');
    res.render('index');
});
app.get('/login', function(req, res) {
    return res.render('login');
});

app.post('/login', function(req, res, next) {

  passport.authenticate('local', function(err, user, info) {
    if (err) { return next(err) }
    if (!user) {
        console.log('NOT USER', info.message);

      req.session.messages =  [info.message];

      return res.redirect('/login');

    }
    req.logIn(user, function(err) {
      if (err) { return next(err); }
      console.log('YES USER is loged in');
      // return res.sendfile(__dirname + '/public/index.html');
      return res.redirect('/');

    });
  })(req, res, next);
});

app.get('/users', function(req, res){
  return User.find( function( err, users ) {
        if( !err ) {
            return res.send( users );
        } else {
            return console.log( err );
        }
    });
}); 
```

另外，不确定这是否相关，但这是我的目录和文件结构。 ![在此处输入图像描述](https://i.stack.imgur.com/924z6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:56:32.647

尝试返回空值。（实际上未定义）

我是说

```
res.redirect('/');
return; 
```

代替

```
return res.redirect('/'); 
```

并且不要在登录中使用`res.render('index'`...和...！它在页面上向客户端`res.sendfile(`响应数据！`index.html``/login`

# ruby-on-rails-3 - 为什么 CanCan 不尊重我的规则？

> ID：15735285
> 
> 赞同：0
> 
> 时间：2013-03-31T22:26:03.093
> 
> 标签：ruby-on-rails-3, cancan

我需要限制用户只能通过“supplier_id”访问他们的发货清单项目。我知道我可以使用 'accessible_by' 添加一个 'where' 子句。但是如果我忘记将accessible_by 范围添加到我的查询中，在下面的控制器中，在操作索引中，用户可以读取任何列表。

```
class SupplierShippingListsController < ApplicationController

    load_and_authorize_resource
    def index
        @shipping_lists = SupplierShippingList.where(:supplier_id => params[:supplier_id])
        authorize! :read, SupplierShippingList
    end

end 
```

我首先定义了这个规则，将根据我的哈希检查跳跃实例，但它没有，好像 :supplier_id 毫无意义。

```
can :read, SupplierShippingList, :supplier_id => user.company_id 
```

所以我尝试了一个带有随机值的块，使其无法通过授权，但用户仍然可以访问该操作。

```
can :read, SupplierShippingList do |list|
    list.supplier_id == 17
end 
```

有什么隐藏的东西要设置吗？

## 编辑

我也试过

```
authorize! :read, @shipping_lists 
```

无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:33:52.020

由于您正在使用`load_and_authorize_resource`，因此您无需执行任何操作。在您的索引操作中，`supplier_shipping_lists`如果您使用的是`can :read, SupplierShippingList, :supplier_id => user.company_id`. 如果这不起作用，您是否有任何其他规则适用于`SupplierShippingList`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T23:24:28.367

索引操作将忽略该块，因此您的第二个示例将不起作用。对于像这样相对简单的能力，你最好的选择是使用像你的第一个例子一样的条件哈希。但`load_and_authorize_resource`会自动`@supplier_shipping_lists`为您加载。如图所示，您的索引操作将覆盖变量并使“加载和授权资源”的“加载”部分毫无意义。您应该删除 index 操作并让 CanCan 为您完成加载。如果您不覆盖实例变量，则只要使用条件散列，您就应该看到您期望的结果。

此外，您也不需要手动调用`authorize!`。那是 '授权' 的一部分`load_and_authorize_resource`。您只需要让 CanCan 完成这项工作。当您输入索引操作时，实例变量要么已经初始化，*但如果您无权查看任何列表，则该实例变量将为空*。

# ios - 如何最好地检查两个对象的内容是否相同？

> ID：15735286
> 
> 赞同：0
> 
> 时间：2013-03-31T22:26:12.323
> 
> 标签：ios, objective-c

我有一组使用 NSCoding 和 NSKeyedUnarchiver 检索的缓存对象。这些有很多属性。

我现在需要检查我创建的对象的内容是否与数组中的任何缓存对象内容相同。我当然无法使用 containsObject 检查对对象的引用是否相等，但我可以检查它们的内容是否相同。我知道如何达到最终结果，但在这种情况下最佳做法是什么？我希望它花费尽可能少的时间。

请记住，只有当所有属性都匹配时，对象才是相同的。

感谢您的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:28:47.657

在类上实现`isEqual:`和`hash`方法。的实现`isEqual:`应该比较所有属性。

一旦你正确实现了这两种方法，你就可以使用收集方法，例如`NSArray containsObject:`or`NSArray indexOfObjects:`等​​。

# php - 使用php解析来自api url调用的xml返回结果时出错

> ID：15735287
> 
> 赞同：0
> 
> 时间：2013-03-31T22:26:12.480
> 
> 标签：php, simplexml

我在这里想念什么？我得到的只是“位置：0”

```
ini_set("user_agent","Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1");

$url = "http://ebird.org/ws1.1/data/notable/region/recent?rtype=subnational1&r=US-AZ";

$xml = simplexml_load_file($url);

$locname = $xml->response->result->sighting->loc-id;

echo "Location: ".$locname . "<br/>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:55:37.033

问题在于“-”，因为 php 认为你想从中`id`减去`$xml->response->result->sighting->loc`

解决方案是改变：

```
$locname = $xml->response->result->sighting->loc-id; 
```

到

```
$locname = $xml->result[0]->sighting[0]->{'loc-id'}; 
```

它和我一起工作

我希望这对你有帮助

注意：我删除`response`节点，因为它是根节点，我选择第一个元素，因为文件包含许多节点

# css - CKE：如何将 css 添加到我的插件中？

> ID：15735291
> 
> 赞同：0
> 
> 时间：2013-03-31T22:26:38.583
> 
> 标签：css, plugins, ckeditor

我已经通过本教程制作了插件。

[http://docs.cksource.com/CKEditor_3.x/Tutorials/Timestamp_Plugin](http://docs.cksource.com/CKEditor_3.x/Tutorials/Timestamp_Plugin)

它将这段代码添加到光标位置：

```
<div class="cut" contenteditable="false" ><!-- CUT --></div> 
```

Woundering如何为它添加css。现在我已经将我自己的 css 添加到了 contents.css 中，但我确信有一种方法可以从 plygin 的文件夹中连接 css。我如何能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:51:50.410

你有没有看过这个：

[http://docs.ckeditor.com/#!/api/CKEDITOR.stylesSet](http://docs.ckeditor.com/#!/api/CKEDITOR.stylesSet)

我认为 addExternal 会为你完成这项工作。

# css - 如何使用带有 CSS 的基础框架创建方形图像缩略图

> ID：15735294
> 
> 赞同：1
> 
> 时间：2013-03-31T22:27:11.833
> 
> 标签：css, frameworks, zurb-foundation

我正在尝试使用基础 3.2.5 来实现这一点：http: [//foundation.zurb.com/old-docs/f3/clearing.php](http://foundation.zurb.com/old-docs/f3/clearing.php)

我希望缩略图显示为具有相同大小的正方形。这是我从他们的网站上获取的代码，他们正在使用：

```
 <div class="row">
            <div class="four columns">
              <ul class="block-grid three-up mobile-two-up" data-clearing>
                <li><a href="http://placekitten.com/g/1000/1000"><img data-caption="Maecenas sed diam eget risus varius blandit sit amet non magna." src="http://placekitten.com/g/1000/1000"></a></li>
                <li><img src="http://placekitten.com/g/1000/900"></li>
                <li><a href="http://placekitten.com/g/1000/800"><img data-caption="Integer posuere erat a ante venenatis dapibus posuere velit aliquet." src="http://placekitten.com/g/1000/800"></a></li>
                <li><img data-caption="Pellentesque ornare sem lacinia quam venenatis vestibulum." src="http://placekitten.com/g/1000/700"></li>
                <li><a href="http://placekitten.com/g/1000/600"><img data-caption="Etiam porta sem malesuada magna mollis euismod." src="http://placekitten.com/g/1000/600"></a></li>
                <li><img data-caption="Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit." src="http://placekitten.com/g/1000/500"></li>
              </ul>
            </div> 
```

但是，当将它与基础 3 一起使用时，它不会将图像调整为正方形。任何想法我可能会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T22:03:21.693

嗯......好吧，您粘贴的代码与 zurb.com 的代码不同，实际上原始代码对所有图像使用相同的大小。

```
<ul class="block-grid three-up" data-clearing>
  <li><a href="http://placekitten.com/g/1000/800"><img data-caption="Maecenas sed diam eget risus varius blandit sit amet non magna." src="http://placekitten.com/g/100/100"></a></li>
  <li><img data-caption="Maecenas sed diam eget risus varius blandit sit amet non magna." src="http://placekitten.com/g/1000/800"></li>
  <li><a href="http://placekitten.com/g/1000/800"><img data-caption="Maecenas sed diam eget risus varius blandit sit amet non magna." src="http://placekitten.com/g/100/100"></a></li>
  <li><img data-caption="Maecenas sed diam eget risus varius blandit sit amet non magna." src="http://placekitten.com/g/1000/800"></li>
  <li><a href="http://placekitten.com/g/1000/800"><img data-caption="Maecenas sed diam eget risus varius blandit sit amet non magna." src="http://placekitten.com/g/100/100"></a></li>
  <li><img data-caption="Maecenas sed diam eget risus varius blandit sit amet non magna." src="http://placekitten.com/g/1000/800"></li>
</ul> 
```

现在，您要实现的目标可以使用像[https://code.google.com/p/resize-crop/这样的 Jquery 插件来完成](https://code.google.com/p/resize-crop/)

# jython - jython 和 jython-apt

> ID：15735301
> 
> 赞同：0
> 
> 时间：2013-03-31T22:28:12.377
> 
> 标签：jython, apt

我试图让 jython 与 python 的 apt-module 一起运行。

我安装了标准的 python2.7 以及 jython2.7。在 python 中运行`import apt`时一切正常，但在 jython 中运行时找不到模块。当将 sys.path 扩展到 python2.7 安装时`/usr/lib/python2.7/dist-packages`，找到了 apt-package 但它抱怨找不到 apt-pkg-package（这只是一些简单的 .so 文件，而不是真正的“包” Python）。

在这里可以做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:36:07.890

`apt_pkg`apt 需要，并且仅作为二进制模块实现。不幸的是，jython[无法加载这些](http://wiki.python.org/jython/JythonFaq/GeneralInfo#Is_Jython_the_same_language_as_Python.3F)，所以你不走运。您可以将 apt_pkg 移植到 Java（您可以简单地使用[JNI](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/)创建一个 shim ）、纯 Python，或使用其他机制（例如在命令行上调用 apt 前端并解析其输出）。

# c++ - 如何在 OpenGL 中从一个 VBO 绑定多个 IBO

> ID：15735302
> 
> 赞同：1
> 
> 时间：2013-03-31T22:28:23.807
> 
> 标签：c++, opengl, buffer-objects

我正在尝试使用 IBO 渲染两个不同的三角形。我将六个顶点存储在一个 VBO 中，并尝试通过两个独立的 IBO 访问它们。问题是第一个 IBO 渲染但第二个没有。createVertices 和 createIndices 在初始化时被调用。

```
void createVertices()
{
    //Vertex Data
    GLfloat v[] = { 0.95f,  0.75f, 0.0f, 1.0f,
                    0.75f, -0.75f, 0.0f, 1.0f,
                    0.0f,  -0.75f, 0.0f, 1.0f, // END OF TRIANGLE 1
                   -0.75,  0.75f, 0.5f, 1.0f,
                   -0.75, -0.75f, 0.5f, 1.0f,
                    0.0f, -0.75f, 0.5f, 1.0f }; // END OF TRIANGLE 2

    glGenVertexArrays(1, &VAO);
    glBindVertexArray(VAO);
    glGenBuffers(1, &VBO);
    glBindBuffer(GL_ARRAY_BUFFER, VBO);

    glBufferData(GL_ARRAY_BUFFER, sizeof(v), v, GL_STATIC_DRAW);
    glEnableVertexAttribArray(0);

    glBindBuffer(GL_ARRAY_BUFFER, 0);
} 
```

//////////

```
void createIndices()
{
    GLushort i[] = { 0,1,2};

    glGenBuffers(2, IBO);
    glBindBuffer(GL_ARRAY_BUFFER, VBO);

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IBO[0]);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(i), i, GL_STATIC_DRAW);
    size = (sizeof(i)/sizeof(GLushort)); // USED IN DRAWELEMENTS

    GLushort w[] = { 3,4,5};

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IBO[1]);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(w), w, GL_STATIC_DRAW);
    size2 = (sizeof(i)/sizeof(GLushort)); // USED IN DRAWELEMENTS

    glBindBuffer(GL_ARRAY_BUFFER, 0);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);
} 
```

/////////

```
void Render()
{
    glClear(GL_COLOR_BUFFER_BIT);

    glUseProgram(shader.SProgram);           
    glBindBuffer(GL_ARRAY_BUFFER, VBO);
    glVertexAttribPointer(0,4, GL_FLOAT, GL_FALSE, 0, 0);

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IBO[0]);
    glDrawElements(GL_TRIANGLES,size,GL_UNSIGNED_SHORT,(GLvoid*)IBO[0]);

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IBO[1]);
    glDrawElements(GL_TRIANGLES,size2,GL_UNSIGNED_SHORT,(GLvoid*)IBO[1]);

    glUseProgram(0);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:46:57.170

这没有意义：

```
glDrawElements(GL_TRIANGLES,size,GL_UNSIGNED_SHORT,(GLvoid*)IBO[0]);
                                                   ^^^^^^^^^^^^^^ 
```

具有 IBO 限制的 glDrawElements 的参数是缓冲区的偏移量，就像 gl…Pointer 和 VBO 一样。你可能只是想要这个

```
glDrawElements(GL_TRIANGLES,size,GL_UNSIGNED_SHORT,(GLvoid*)0); 
```

对于您的 IBO，只需将 IBO 本身与

```
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IBO[…]); 
```

# android - 钛 - ti.app.proper 的生命周期

> ID：15735316
> 
> 赞同：0
> 
> 时间：2013-03-31T22:30:23.890
> 
> 标签：android, ios, titanium

有谁知道 ti.app.property 的 lufecyycle 是用钛制成的吗？

我只想在应用程序启动时做一些事情*，*并且想要在 ti.app.property 字段中是否发生相关事情。问题是，我不确定这个字段一旦设置，是否会在按下“主页”按钮或“返回”按钮时持续存在。

那么当 ti.app.property 字段被实例化/销毁等时，是否有一些建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:35:13.063

它会一直存在，直到应用程序从您的手机中删除或您以编程方式重置/删除它。

[文档中的确切报价：](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.App.Properties)

> 应用程序属性模块用于将应用程序相关数据存储在属性/值对中，这些数据在应用程序会话和设备电源循环之后仍然存在。

# ipad - Chrome 上的点击事件（iPad 版）

> ID：15735317
> 
> 赞同：0
> 
> 时间：2013-03-31T22:30:24.020
> 
> 标签：ipad, google-chrome, meteor

我在我的项目中使用 Meteor，并且我有以下点击事件：

```
 Template.Products.events = {
   "click .Product" : function() {
      if(this.InStock) {
         var item = Cart.findOne({Name : this.Name, Price : this.Price});
         if(item) {
               Cart.update(item._id, { $inc : {Quantity : 1} });
         } else {
               Cart.insert({ Name : this.Name, Price : this.Price, Quantity : 1 });
         }
      } else {
         alert("That item is not in stock");
      }
   }
  }; 
```

但是，它不适用于 Chrome（iPad 版）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T06:29:37.907

您应该使用`touchstart`事件而不是`click`事件。

# linux - osx 的 /etc/init.d 等价物？

> ID：15735320
> 
> 赞同：25
> 
> 时间：2013-03-31T22:30:48.740
> 
> 标签：linux, macos

我在 mac 上安装 gitlab，但后者主要是为 linux os 设计的。按照文档，我必须运行此命令

```
curl --output /etc/init.d/gitlab https://raw.github.com/gitlabhq/gitlab-recipes/master/init.d/gitlab 
```

/etc/init.d 文件夹的 mac 等效项是什么（我知道该`launchd`命令，但我正在寻找 mac 的等效 /etc/init.d 文件夹）？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-31T22:36:22.913

AFAIK`launchd`主要将其数据存储在 和 中的文件`.plist`中，偶尔也会存储在主目录中的这些子目录中。[有关本教程](http://nathangrigg.net/2012/07/schedule-jobs-using-launchd/#launchctl)和[本参考](http://developer.apple.com/library/mac/#/documentation/Darwin/Reference/ManPages/man5/launchd.plist.5.html)中的这些文件的更多信息。`/Library/LaunchAgents/``/Library/LaunchDaemons/`

对于您的问题，要设置`launchd`运行 gitlab，请尝试将该`init.d`脚本转换为`.plist`具有上述链接的文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-06T21:40:39.670

我不知道你是否仍然关心这个问题，但 ryan 说的是正确的。为了直接回答您的问题，您的 curl 命令正在尝试下载启动脚本并将其放入您的 init.d 目录中。你没有，就像你在 Mac OS X 上一样。

您需要做的是将 init.d 弹出到其他永久的地方。确保它是 chmod +x 并测试它是否可以手动工作。（即./init.d）

如果是这样，您可以创建一个 .plist 并将其弹出到 /Library/LaunchDaemons/ 中，它将运行您的 init.d 文件。如果你的 init.d 文件就像运行一个可执行文件一样简单，那么完全忘记 init.d 文件，直接让 .plist 文件运行 gitlab 可执行文件。

无论哪种方式，我认为您应该将 Ryan（或我的）的答案标记为已接受，因为它将解决您的问题。我没有将此作为对 Ryan 回答的评论的唯一原因是我的解释太长，无法发表评论。

# magento - 获取产品的父类，即使是直接访问

> ID：15735324
> 
> 赞同：2
> 
> 时间：2013-03-31T22:31:11.263
> 
> 标签：magento, magento-1.7

我有一个获取当前产品父类别的自定义模型/块：

```
class Namespace_Module_Model_Product extends Mage_Catalog_Model_Product
{
    public function someFunction()
    {
        $category = $this->getCategory();
        ...
    }
} 
```

此自定义块用于产品页面。如果产品是通过其父类别访问的，这将非常有效，例如：`domain.com/some-category/my-product.html`. 但是，如果直接访问产品（例如通过搜索）并且 URL 为`domain.com/my-product.html`，则它不起作用。`Mage_Catalog_Model_Product`可用于检索类别的所有函数都返回空值，就好像产品未分配给任何类别一样。

我的问题是：检索产品类别的全局方法是什么，即使该产品不是通过其类别访问的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T23:01:43.720

第一步：稍微调整您的期望——Magento 中的产品不限于单一类别。因此，“检索产品类别的全局方法”应该是“检索产品所在类别列表的全局方法”。

你需要

1.  获取对产品对象的引用

2.  使用该产品对象获取类别集合

3.  遍历集合，拉出你想要的类别信息

如果您在产品页面上，则可以从注册表中获取当前产品。

```
$product = Mage::registry('product'); 
```

然后抓住一个类别集合

```
$c       = $product->getCategoryCollection()
->addAttributeToSelect('*'); 
```

该`addAttributeToSelect`方法可确保您获得所需的所有字段。

最后，您可以自己获取各个类别

```
foreach($c as $category)
{
    var_dump($category->getData());
    var_dump($category->getName());
} 
```

您还可以使用

```
$category = $c->getFirstItem();
var_dump($category->getData());
var_dump($category->getName()); 
```

# three.js - THREE.DoubleSide 不适用于 THREE.MeshLambertMaterial 和自定义几何体

> ID：15735326
> 
> 赞同：2
> 
> 时间：2013-03-31T22:31:24.020
> 
> 标签：three.js

我正在尝试使用 制作双面网格`THREE.MeshLambertMaterial`，但只有正面是阴影。当我使用`THREE.MeshBasicMaterial`. 我正在使用`THREE.WebGLRenderer`57 版。

这是一个带有矩形的简化示例：

```
var rectWidth = 100, rectLength = 100;
var geometry = new THREE.Geometry();
geometry.vertices.push(new THREE.Vector3(0, rectWidth, 0));
geometry.vertices.push(new THREE.Vector3(rectLength, rectWidth, 0));
geometry.vertices.push(new THREE.Vector3(rectLength, 0, 0));
geometry.vertices.push(new THREE.Vector3(0, 0, 0));
geometry.faces.push(new THREE.Face4(0, 1, 2, 3));
// MeshBasicMaterial works
var material = new THREE.MeshLambertMaterial({
    color: 0xCC0000,
    side: THREE.DoubleSide,
});
geometry.computeFaceNormals();
geometry.computeVertexNormals();
var rect = new THREE.Mesh(geometry, material);
scene.add(rect); 
```

我究竟做错了什么？我找到了[http://mrdoob.github.com/three.js/examples/webgl_performance_doublelateral.html](http://mrdoob.github.com/three.js/examples/webgl_performance_doublesided.html)，这表明`THREE.DoubleSide`可以使用`THREE.MeshPhongMaterial`（在我的情况下也不起作用）。不过，该示例使用了内置几何，而我正在构建自定义几何，所以我想我在那里遗漏了一些东西。

# php - 如何在 PHP 中解析 OFX（版本 1.0.2）文件？

> ID：15735330
> 
> 赞同：8
> 
> 时间：2013-03-31T22:31:48.597
> 
> 标签：php, xml, domdocument, sgml, ofx

我从[Citibank](https://www.citibank.com.co/)下载了一个[OFX](http://www.ofx.net/)文件，该文件的 DTD 定义在[http://www.ofx.net/DownloadPage/Files/ofx102spec.zip](http://www.ofx.net/DownloadPage/Files/ofx102spec.zip)（文件 OFXBANK.DTD），OFX 文件似乎是[SGML](http://www.w3.org/MarkUp/SGML/)有效的。我正在尝试使用PHP [5.4.13](http://www.php.net/manual/en/class.domdocument.php)的 DomDocument，但我收到了几个警告并且文件未解析。我的代码是：

```
$file = "source/ACCT_013.OFX";
$dtd = "source/ofx102spec/OFXBANK.DTD";
$doc = new DomDocument();
$doc->loadHTMLFile($file);
$doc->schemaValidate($dtd);
$dom->validateOnParse = true; 
```

OFX 文件开头为：

```
OFXHEADER:100
DATA:OFXSGML
VERSION:102
SECURITY:NONE
ENCODING:USASCII
CHARSET:1252
COMPRESSION:NONE
OLDFILEUID:NONE
NEWFILEUID:NONE

<OFX>
<SIGNONMSGSRSV1>
<SONRS>
<STATUS>
<CODE>0
<SEVERITY>INFO
</STATUS>
<DTSERVER>20130331073401
<LANGUAGE>SPA
</SONRS>
</SIGNONMSGSRSV1>
<BANKMSGSRSV1>
<STMTTRNRS>
<TRNUID>0
<STATUS>
<CODE>0
<SEVERITY>INFO
</STATUS>
<STMTRS>
<CURDEF>COP
<BANKACCTFROM> ... 
```

我愿意在服务器（Centos）中安装和使用任何程序来从 PHP 调用。

PD：这个类[http://www.phpclasses.org/package/5778-PHP-Parse-and-extract-financial-records-from-OFX-files.html](http://www.phpclasses.org/package/5778-PHP-Parse-and-extract-financial-records-from-OFX-files.html)不适合我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T00:58:20.213

首先，即使 XML 是 SGML 的子集，有效的 SGML 文件也不能是格式良好的 XML 文件。XML 更加严格并且不使用 SGML 提供的所有特性。

由于`DOMDocument`是基于 XML（而不是 SGML）的，这并不是真正兼容的。

在该问题旁边，请参阅Ofexfin1.doc 中的*2.2 Open Financial Exchange Headers*它向您解释

> Open Financial Exchange 文件的内容由一组简单的标头组成，后跟该标头定义的内容

并进一步：

> 最后一个标题后面有一个空行。然后（对于类型 OFXSGML），SGML 可读数据以 <OFX> 标记开始。

因此，找到第一个空白行并剥离所有内容，直到那里。然后通过首先将 SGML 转换为 XML 将 SGML 部分加载到 DOMDocument 中：

```
$source = fopen('file.ofx', 'r');
if (!$source) {
    throw new Exception('Unable to open OFX file.');
}

// skip headers of OFX file
$headers = array();
$charsets = array(
    1252 => 'WINDOWS-1251',
);
while(!feof($source)) {
    $line = trim(fgets($source));
    if ($line === '') {
        break;
    }
    list($header, $value) = explode(':', $line, 2);
    $headers[$header] = $value;
}

$buffer = '';

// dead-cheap SGML to XML conversion
// see as well http://www.hanselman.com/blog/PostprocessingAutoClosedSGMLTagsWithTheSGMLReader.aspx
while(!feof($source)) {

    $line = trim(fgets($source));
    if ($line === '') continue;

    $line = iconv($charsets[$headers['CHARSET']], 'UTF-8', $line);
    if (substr($line, -1, 1) !== '>') {
        list($tag) = explode('>', $line, 2);
        $line .= '</' . substr($tag, 1) . '>';
    }
    $buffer .= $line ."\n";
}

// use DOMDocument with non-standard recover mode
$doc = new DOMDocument();
$doc->recover = true;
$doc->preserveWhiteSpace = false;
$doc->formatOutput = true;
$save = libxml_use_internal_errors(true);
$doc->loadXML($buffer);
libxml_use_internal_errors($save);

echo $doc->saveXML(); 
```

然后，此代码示例输出以下（重新格式化的）XML，这也表明 DOMDocument 正确加载了数据：

```
<?xml version="1.0"?>
<OFX>
  <SIGNONMSGSRSV1>
    <SONRS>
      <STATUS>
        <CODE>0</CODE>
        <SEVERITY>INFO</SEVERITY>
      </STATUS>
      <DTSERVER>20130331073401</DTSERVER>
      <LANGUAGE>SPA</LANGUAGE>
    </SONRS>
  </SIGNONMSGSRSV1>
  <BANKMSGSRSV1>
    <STMTTRNRS>
      <TRNUID>0</TRNUID>
      <STATUS>
        <CODE>0</CODE>
        <SEVERITY>INFO</SEVERITY>
      </STATUS>
      <STMTRS><CURDEF>COP</CURDEF><BANKACCTFROM> ...</BANKACCTFROM>
</STMTRS>
    </STMTTRNRS>
  </BANKMSGSRSV1>
</OFX> 
```

我不知道这是否可以针对 DTD 进行验证。也许这行得通。此外，如果 SGML 没有使用同一行上的标记值写入（并且每行只需要一个元素），那么这种脆弱的转换将会中断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-16T23:40:21.230

最简单的 OFX​​ 解析成一个数组，可以轻松访问所有值和交易。

```
function parseOFX($ofx) {
    $OFXArray=explode("<",$ofx);
    $a=array();
    foreach ($OFXArray as $v) {
        $pair=explode(">",$v);
        if (isset($pair[1])) {
            if ($pair[1]!=NULL) {
                if (isset($a[$pair[0]])) {
                    if (is_array($a[$pair[0]])) {
                        $a[$pair[0]][]=$pair[1];
                    } else {
                        $temp=$a[$pair[0]];
                        $a[$pair[0]]=array();
                        $a[$pair[0]][]=$temp;
                        $a[$pair[0]][]=$pair[1];
                    }
                } else {
                    $a[$pair[0]]=$pair[1];
                }
            }
        }
    }
    return $a;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-01T19:23:18.397

我用这个：

```
$source = utf8_encode(file_get_contents('a.ofx'));

//add end tag
$source = preg_replace('#^<([^>]+)>([^\r\n]+)\r?\n#mU', "<$1>$2</$1>\n", $source);

//skip header
$source = substr($source, strpos($source,'<OFX>'));

//convert to array
$xml = simplexml_load_string($source);
$array = json_decode(json_encode($xml),true);

print_r($array); 
```

# php - 如何在数据库中选择单个值

> ID：15735331
> 
> 赞同：2
> 
> 时间：2013-03-31T22:31:50.487
> 
> 标签：php, select

我想选择一个值而不是数组，所以我使用

```
$user = "SELECT Name FROM Manager WHERE Statue = 1";
echo "<ul id='man-nav' class='navline pull-right'><li><a href='#'>".$user."</a></li></ul>"; 
```

或者我试过

```
$user = mysqli_query($con,"SELECT Name FROM Manager WHERE Statue = 1");
echo "<ul id='man-nav' class='navline pull-right'><li><a href='#'>".$user."</a></li></ul>"; 
```

两者都不正确，我只是不确定哪个函数取这个值。

有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:38:52.580

您*应该*使用 PDO 而不是 mysql(i) 函数，然后可以使用[fetchcolumn](http://www.php.net/manual/en/pdostatement.fetchcolumn.php)。

显然这只是我的看法。

我说*应该*是因为 PDO 非常安全（不再有 SQL 注入！）而且它是所有驱动程序的一个接口：简单。它还添加了诸如 fetchColumn() 之类的简单功能，并且该类易于扩展。对所有数据库访问使用 1 个对象要容易得多。现在投资 20 分钟，永远享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:35:51.550

你的第二个例子更接近正确。

运行查询后，您需要检索值。

**我强烈建议您阅读[http://www.php.net/manual/en/mysqli-result.fetch-object.php上的文档和示例](http://www.php.net/manual/en/mysqli-result.fetch-object.php)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T22:45:49.357

根据 上的[文档`mysqli_query()`](http://www.php.net/manual/en/class.mysqli-result.php)，您将获得[`mysql_result`](http://www.php.net/manual/en/class.mysqli-result.php)成功，因此您可以使用[`mysqli_result::fetch_array()`](http://www.php.net/manual/en/mysqli-result.fetch-array.php)或[`mysqli_result::fetch_assoc()`](http://www.php.net/manual/en/mysqli-result.fetch-assoc.php)。类似于：

```
$res = mysqli_query($con, 'SELECT Name FROM manager WHERE Statue = 1');
while($row = $res->fetch_assoc()) {
   echo $row['Name'];
} 
```

# html - 用智能手机相机拍摄html5照片，图像顺时针旋转

> ID：15735335
> 
> 赞同：3
> 
> 时间：2013-03-31T22:32:19.710
> 
> 标签：html, image, capture

我在移动浏览器（FF 和 Chrome）中测试 html5 功能。我想使用 `< input type="file" accept="image/*;capture=camera">`.

我为“更改”事件创建了一个处理程序，`< input />`并使用它来获取文件数据（名称和内容），为此我使用本文中描述的方法[http://www.html5rocks.com/en/tutorials/file/ dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)。`< img />`之后，我通过 img.src=content显示照片的内容。问题是，当我用设备相机拍照时，它旋转了 90 度，当我从设备硬盘驱动器中选择 img 时，它没问题（它没有旋转）。

我在 FF 和 Chrome（Android 设备）中都有这个问题。我没有在其他浏览器/设备上测试过这个案例。

我会非常感激任何帮助。

最好的，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T00:04:21.970

您需要读取图片上的 EXIF 数据，并根据用户拍摄图片的方向适当旋转。

其他人已经解决了这个问题，您可以通过[https://github.com/gokercebeci/canvasResize](https://github.com/gokercebeci/canvasResize)看到一个示例作为示例。

# python - 将 numpy 字符串数组转换为浮点数：奇怪？

> ID：15735337
> 
> 赞同：5
> 
> 时间：2013-03-31T22:32:39.927
> 
> 标签：python, numpy, type-conversion

所以，这*应该*是一件非常简单的事情，但无论出于何种原因，我没有做任何事情来将字符串数组转换为浮点数组。

我有一个两列数组，如下所示：

```
Name    Value
Bob     4.56
Sam     5.22
Amy     1.22 
```

我试试这个：

```
for row in myarray[1:,]:
     row[1]=float(row[1]) 
```

还有这个：

```
for row in myarray[1:,]:
    row[1]=row[1].astype(1) 
```

还有这个：

```
myarray[1:,1] = map(float, myarray[1:,1]) 
```

他们似乎都在做某事，但是当我仔细检查时：

```
type(myarray[9,1]) 
```

我明白了

```
<type> 'numpy.string_'> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T22:41:50.973

Numpy 数组必须有一个`dtype`，除非它是结构化的。由于数组中有一些字符串，它们必须都是字符串。

如果您希望有一个 complex `dtype`，您可以这样做：

```
import numpy as np
a = np.array([('Bob','4.56'), ('Sam','5.22'),('Amy', '1.22')], dtype = [('name','S3'),('val',float)]) 
```

请注意，`a`现在是一[维结构化数组](http://docs.scipy.org/doc/numpy/user/basics.rec.html)，其中每个元素都是类型的元组`dtype`。

您可以使用它们的字段名称访问这些值：

```
In [21]: a = np.array([('Bob','4.56'), ('Sam','5.22'),('Amy', '1.22')],
    ...:         dtype = [('name','S3'),('val',float)])

In [22]: a
Out[22]: 
array([('Bob', 4.56), ('Sam', 5.22), ('Amy', 1.22)], 
      dtype=[('name', 'S3'), ('val', '<f8')])

In [23]: a['val']
Out[23]: array([ 4.56,  5.22,  1.22])

In [24]: a['name']
Out[24]: 
array(['Bob', 'Sam', 'Amy'], 
      dtype='|S3') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:47:32.553

numpy 数组中对象的类型在该数组的初始化时确定。如果您想稍后更改它，您必须转换数组，而不是该数组中的对象。

```
myNewArray = myArray.asType(float) 
```

注意：向上转换是可能的，对于向下转换，您需要 astype 方法。有关详细信息，请参阅： http:
[//docs.scipy.org/doc/numpy/reference/generated/numpy.array.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html) [http://docs.scipy.org/doc/numpy/reference/generated/numpy.chararray。 astype.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.chararray.astype.html)

# javascript - 调用 key 标识的异步函数

> ID：15735338
> 
> 赞同：0
> 
> 时间：2013-03-31T22:32:47.670
> 
> 标签：javascript, arrays, node.js, function, asynchronous

我正在尝试调用一组由参数标识的异步函数。

**示例：** `callFunctions("A,C");`将同时调用`objFns["A"]`和`objFns["C"]`。

我遇到的问题`arrayParams[i]`是当内部函数最终由`async.parallel()`. 这意味着`i == arrayParams.length`which of course crash since`objFns[arrayParams.length]`是未定义的。帮助我指出正确的方向将不胜感激。

```
objFns = {};
objFns["A"] = function (callback) {...}
objFns["B"] = function (callback) {...}
objFns["C"] = function (callback) {...}

function callFunctions(arrayParam) {
    var i, arrayFns = [];

    for (i = 0; i < arrayParams.length; i++) {
        arrayFns.push(function (callback) {
            objFns[arrayParams[i]](callback);
        }
    }

    async.parallel(arrayFns, function (error) {...});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:09:07.737

`i`您可以使用匿名函数在每次迭代时进行复制。

```
var async = require('async');

objFns = {};
objFns["A"] = function (callback) {callback();};
objFns["B"] = function (callback) {callback();};
objFns["C"] = function (callback) {callback();};

function callFunctions(arrayParams) {
  var i,arrayFns = [];

  for (i = 0; i < arrayParams.length; i++) {
    (function (i) {
      arrayFns.push(function (callback) {
        objFns[arrayParams[i]](callback);
      });
    })(i);
  }

  async.parallel(arrayFns,function(error) {
  });
}

callFunctions(['A', 'B']); 
```

如果您不需要更改函数行为，您可以简单地将函数复制到没有外部函数的数组。

```
var async = require('async');

objFns = {};
objFns["A"] = function (callback) {callback();};
objFns["B"] = function (callback) {callback();};
objFns["C"] = function (callback) {callback();};

function callFunctions(arrayParams) {
  var i,arrayFns = [];

  for (i = 0; i < arrayParams.length; i++) {
    arrayFns.push(objFns[arrayParams[i]]);
  }

  async.parallel(arrayFns,function(error) {
  });
}

callFunctions(['A', 'B']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T23:10:10.757

据我所知，您推送到 arrayFns 的是一个函数，它直接调用具有相同参数的另一个函数，是否有任何理由不应该工作：

```
function callFunctions(arrayParam)
{
  var i,arrayFns = [];

  for (i = 0; i < arrayParams.length; i++)
  {
    arrayFns.push(objFns[arrayParams[i]]);
  }

  async.parallel(arrayFns,function(error) {...});
} 
```

# javascript - javascript 对象项目名称

> ID：15735340
> 
> 赞同：-1
> 
> 时间：2013-03-31T22:32:53.233
> 
> 标签：javascript, this

我有以下 javascript 代码：

```
var oReg = new Object;
oReg.a = {size: 762, content: 0};
oReg.b = {size: 342, content: 0};
//...

for (var s in oReg) {
    oReg[s].set = function(i) {
        alert('#name of oReg item#: ' + i);
    }
} 
```

“#name of oReg item#”应该是 a、b 等
我认为它应该以 开头`this`，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:37:45.210

它应该`s`代替`i`，但不幸的是，由于“[臭名昭著的循环问题](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem)”，它并不是那么简单。您必须在每次迭代时创建一个新范围（函数创建范围），以便能够保留对`s`. 否则，您的 setter 将始终返回最后一个对象键的值。

下面的代码应该做到这一点：

```
for (var s in oReg) {
    oReg[s].set = (function(key) {
        return function() {
            alert('#name of oReg item#: ' + key);
        }
    }(s));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:40:34.333

我知道很多人看到代码中的调用会开始哭泣`eval`，但这只有在将用户输入投入其中时才真正危险。所以：

```
var oReg = new Object;
oReg.a = {size: 762, content: 0};
oReg.b = {size: 342, content: 0};

for (var s in oReg) {
    eval("oReg[s].set = function(i){alert('oReg."+s+": ' + i);}");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T22:42:31.603

```
var oReg = new Object;
oReg.a = {size: 762, content: 0};
oReg.b = {size: 342, content: 0};
//...

for (var s in oReg) {
    oReg[s].set = (function(s) {
        alert('#name of oReg item#: ' + s);
    })(s);
} 
```

我想你试着这样做。

# knitr - 如何更改 pander 中的英文字幕？

> ID：15735342
> 
> 赞同：3
> 
> 时间：2013-03-31T22:33:01.703
> 
> 标签：knitr, pandoc, pander

我正在使用 pander 通过 RStudio、knitr、pander、pandoc、Word 打印更好看的表格。我有一个两页的表格，我想在其中添加一个西班牙语标题：

```
set.caption("Límites izquierdo y derecho para las diferentes variables")
pander(LimitesUnivariado, include.rownames=FALSE) 
```

这几乎可行，但我的标题说：

```
Table: Límites izquierdo y derecho para las diferentes variables (continued below) 
```

我找不到将`Table`and更改`continued below`为西班牙语等价物的方法。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T17:20:27.193

感谢您[在 GitHub 上报告此问题](https://github.com/Rapporter/pander/issues/28)，我刚刚向`master`分支推送了几行代码，其中引入了两个新选项来调整表拆分时的标题。快速示例：

1.  更新没有指定标题的拆分表的默认标题：

    ```
    > panderOptions('table.continues', 'Continuará')
    > pander(mtcars) 
    ```

2.  如果表格被拆分，则更新连接到用户指定标题的词缀：

    ```
    > panderOptions('table.continues.affix', '(continuará)')
    > set.caption('MTCARS')
    > pander(mtcars) 
    ```

请[安装最新版本`pander`](http://rapporter.github.com/pander/#installation)并验证此更新是否适合您 - 对上述蹩脚的示例感到抱歉，请注意，很遗憾我不会说西班牙语。

PS：我没有触及`Table:`前缀，因为它似乎是在 Pandoc 的语法中指定的，无论如何，当转换到其他文档格式时，Pandoc 会自动删除该前缀：请参阅[相关文档](http://johnmacfarlane.net/pandoc/README.html#tables)。但是，如果您也能找到关于后者的新选项，我会很乐意将其添加到包中。

# google-maps - 如何以编程方式单击 Google Maps Fusion Table 图层？

> ID：15735343
> 
> 赞同：3
> 
> 时间：2013-03-31T22:33:07.093
> 
> 标签：google-maps, google-fusion-tables

我有一个谷歌地图，它使用融合表层来动态设置大量多边形的样式。在这一层之上，我还在多边形本身的特定 LatLng 位置生成一组标记。我希望有以下行为：

*   当您单击多边形上的任意位置时，应该会弹出一个 infoWindow，其中填充了融合表中的数据。这是有效的。
*   当您单击标记时，它应该将单击事件传递到融合表层并创建相同的弹出窗口，就好像在标记的 LatLng 发生自然单击一样。这就是我正在努力解决的问题，目前还没有工作。我正在为每个标记添加一个点击侦听器，然后使用它来触发对我的融合表层的点击，或多或少如[这里](https://stackoverflow.com/questions/9194579/how-to-simulate-a-click-on-a-google-maps-marker)建议的那样：

这是我用来为每个标记添加侦听器的代码：

```
function addMarkerListener(city, LatLng){
    google.maps.event.addListener(city, "click", function(e) {
      google.maps.event.trigger(layer, 'click', {
        latLng: LatLng
      });
    });
} 
```

在这种情况下，`layer`是我的融合表层。

使用这个，点击触发，但我实际上并没有从我的融合表中获取任何数据（存储在鼠标事件对象的行变量中）。相反，我的鼠标事件直接传递给融合表层上的侦听器，该侦听器通常会处理点击。

如何以编程方式在融合表层上创建一个点击事件，它将像自然点击一样从融合表中提取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:05:29.123

这是 Fusion Table Layer 的一个示例，它以编程方式单击侧边栏中的标记。 ![在此处输入图像描述](https://i.stack.imgur.com/R8LxC.png)

从此页面查看整个代码。 [http://googlemaps.googlermania.com/google_maps_api_v3/en/fusion-tables-sidebar.html](http://googlemaps.googlermania.com/google_maps_api_v3/en/fusion-tables-sidebar.html)

# ios - 获取 Youtube 视频的 hd720 / hd1080 流

> ID：15735347
> 
> 赞同：0
> 
> 时间：2013-03-31T22:34:04.787
> 
> 标签：ios, objective-c, youtube

我想在我的 iPhone 应用程序中播放 YouTube 视频**而不**将其嵌入到 UIWebView 中。

我找到了一个 Objective C 实用程序，可以从给定的 YouTube URL 中提取“中”和“小”流。[https://github.com/larcus94/LBYouTubeView](https://github.com/larcus94/LBYouTubeView)。但相反，我想要 1080p 和/或 720p 流！

目标是能够使用`AVPlayer`or播放该流`MPVideoViewController`。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:16:11.300

也许这可以帮助您入门，它是一个用于捕获*所有*YouTube 流的 JavaScript 小书签。

[`svnpenn.github.io/bm`](http://svnpenn.github.com/bm)

# mysqli - mysqli 类中的参数化查询

> ID：15735348
> 
> 赞同：0
> 
> 时间：2013-03-31T22:34:06.037
> 
> 标签：mysqli, prepared-statement

我正在使用 Mertol Kasanan 的课程来运行参数化查询 -

[http://liveplanet.googlecode.com/svn-history/r132/trunk/db/DB.php](http://liveplanet.googlecode.com/svn-history/r132/trunk/db/DB.php)

我对脚本非常满意，除了一些我似乎没有解决的问题。正如它在类描述中的简短教程中所述，运行查询的方法是：

```
$result = $db->query('SELECT * FROM `users` WHERE id = ? AND user_type = ? LIMIT ?',$id,$user_type,$limit); 
```

任何人都可以弄清楚如何在不定义任何参数的情况下运行查询，因为看起来

```
$result = $db->query('SELECT * FROM `users` WHERE id = 'y' "); 
```

两者都不

```
$result = $db->query('SELECT * FROM `users` WHERE id = 'y' ", ''); 
```

不要这样做，因为它返回绑定错误；一种解决方法是

```
$result = $db->query('SELECT * FROM `users` WHERE 1 = ? AND id = 'y' ", 1); 
```

有没有更简洁的方法来运行我的查询？我不需要参数，因为查询从类中的安全源获取它的值。

编辑：

假设我有这个：

```
if($HC == 'C'){
        $sql = "SELECT * FROM `photo_c` WHERE `user` = ?i AND `pic` != ?s AND cat != 'D' GROUP BY pic  LIMIT ?";
       $query = $this->dbs->query($sql,$this->user,$this->user_head,4);
    $results = $this->dbs->numRows($query);                 
    if($results < 3){
        $sql = "SELECT * FROM `photo` WHERE `user` = ?i AND `pic` != ?s ORDER BY  id ASC LIMIT ?";
       $query = $this->dbs->query($sql, $this->user,$this->user_head,4);                                
                                    }
    }else{

    $sql = "SELECT * FROM `photo_c` WHERE `user` = ?i AND `pic` != ?s AND cat = ?s ORDER BY RAND() LIMIT ?";
    $query = $this->dbs->query($sql,$this->user,$this->user_head,$HC,4);
        $results = $this->dbs->numRows($query);
                    } 
```

现在，为了从正确的查询中获取数据，我可以在每个查询下定义 $data->getAll - 但这意味着重复我的代码，或者我可以尝试从最后定义的 $query 结果中提取数据 - 我这样做不知道怎么办。我知道可能有更好的方法来做到这一点，但我正在努力改进我的编码风格，因为我认为 safemysql 类需要一些改进，即使这意味着更多的文档。我可以尝试使用 $db->getAll 而不是 $db->query，但据我所知，我不能在 GetAll 上使用 numRows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T05:48:03.057

事实上，这个类是完全无法使用的。你提到的问题至少是一个。似乎写它的人从未在现实生活中的项目中使用过这个类。

因此，如果您想要一个更好的工作和工作方式的类，请选择[SafeMysql](https://github.com/colshrapnel/safemysql)，因为它会完全满足您的要求：

```
$data = $db->getAll("SELECT * FROM `users` WHERE status = 'y'"); 
```

（请注意，您已经获得了数据，无需任何进一步的代码）

尽管如此，您必须了解您的以下陈述

> 我不需要参数，因为查询从类中的安全源获取它的值。

是错的。
在编写时使用硬编码值是可以的，但如果您打算使用“安全”*变量*- 它应该通过占位符添加。否则，您的查询仍然容易出错且不安全。

所以，它必须是

```
$id = 1; // "safe" variable
$data = $db->getRow("SELECT * FROM `users` WHERE id = ?i", $id); 
```

回答编辑的问题。不确定它是否是您需要的，但这是代码。它吴

```
if($HC == 'C')
{
    $sql  = "SELECT * FROM `photo_c` WHERE `user` = ?i AND `pic` != ?s AND cat != 'D' GROUP BY pic  LIMIT ?";
    $data = $this->dbs->getAll($sql,$this->user,$this->user_head,4);
    if (count($data) < 3) {
        $sql = "SELECT * FROM `photo` WHERE `user` = ?i AND `pic` != ?s ORDER BY  id ASC LIMIT ?";
        $data = $this->dbs->query($sql, $this->user,$this->user_head,4);
    }
} else {
    $sql  = "SELECT * FROM `photo_c` WHERE `user` = ?i AND `pic` != ?s AND cat = ?s ORDER BY RAND() LIMIT ?";
    $data = $this->dbs->query($sql,$this->user,$this->user_head,$HC,4);
} 
```

# scala - 比较两个数字

> ID：15735352
> 
> 赞同：-8
> 
> 时间：2013-03-31T22:34:21.293
> 
> 标签：scala, generics

如何比较两个数字。任何数字。喜欢`Int`和`Float`？我对与复数或类似的东西进行比较不感兴趣。我只想比较那些具有可比性的。Float 和 Int 是。

假设你有：

```
def compareTwoNumbers[???](array:Array[???], number:???) = {
    array(0) > number // this has to compile
} 
```

我写什么而不是`???`？

到目前为止我尝试过的事情：

1.  `Number`.
2.  `T <: Number`
3.  `Numeric`（对不起，我不明白在这种情况下如何使用它，没有示例/文档太差了）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T00:45:43.793

只需使用排序类型类：

```
def cmp[A](arr: Array[A], number: A)(implicit ord: Ordering[A]) =
  ord.gt(arr(0), number)

// or

def cmp[A](arr: Array[A], number: A)(implicit ord: Ordering[A]) = {
  import ord._
  arr(0) > number
}

scala> cmp(Array(4), 2)
res9: Boolean = true

scala> cmp(Array(BigInt(4)), BigInt(2))
res15: Boolean = true

scala> cmp(Array(4), 2.0)
<console>:9: error: type mismatch;
 found   : Array[Int]
 required: Array[AnyVal]

scala> cmp(Array(4.0), 2)
<console>:9: error: type mismatch;
 found   : Array[Double]
 required: Array[AnyVal] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T10:22:40.447

我认为主要问题是数字类型的转换。所以让我们编码：

```
trait NumericConversion[X, Y] {
  def convert(x: X): Y
} 
```

当然，必须指定那个抽象概念：（例如）

```
implicit object Int2IntNumericConversion extends NumericConversion[Int, Int] {
  def convert(i: Int): Int = i
}
implicit object Double2DoubleNumericConversion extends NumericConversion[Double, Double] {
  def convert(d: Double): Double = d
}
implicit object Int2DoubleNumericConversion extends NumericConversion[Int, Double] {
  def convert(i: Int): Double = i.toDouble
} 
```

现在比较方法如下：

```
def compareTwoNumbers1[N1, N2, N3](n1: N1, n2: N2)
                                  (implicit conv1: NumericConversion[N1, N3], 
                                            conv2: NumericConversion[N2, N3], 
                                              ord: Ordering[N3]): Int = {
  ord compare (conv1 convert n1, conv2 convert n2)
} 
```

用法：

```
compareTwoNumbers1[Int, Double, Double](3, 8D)  // -1 
```

可惜了，我们必须显式声明类型参数，所以我尝试了：

```
def compareTwoNumbers2[N3] = new {
  def apply[N1, N2](n1: N1, n2: N2)(implicit conv1: NumericConversion[N1, N3],
                                             conv2: NumericConversion[N2, N3], 
                                               ord: Ordering[N3]): Int = {
    ord compare (conv1 convert n1, conv2 convert n2)
  }
} 
```

这简化为一种类型的参数：

```
compareTwoNumbers2[Double](3, 8D)  // -1 
```

不满意，所以我尝试了这个：

```
trait NumericUpperBound[Num1, Num2, UpperBound]
implicit object NumericUpperBoundIDD extends NumericUpperBound[Int, Double, Double]
implicit object NumericUpperBoundDID extends NumericUpperBound[Double, Int, Double] 
```

使用新的比较方法：

```
def compareTwoNumbers3[N1, N2, N3](n1: N1, n2: N2)
                                 (implicit nub: NumericUpperBound[N1, N2, N3], 
                                         conv1: NumericConversion[N1, N3], 
                                         conv2: NumericConversion[N2, N3], 
                                           ord: Ordering[N3]): Int = {
  ord compare (conv1 convert n1, conv2 convert n2)
} 
```

现在它起作用了：

```
compareTwoNumbers3(3, 8D)  // -1 
```

当然，必须为所有原语创建类型类。但是稍后将其扩展到`BigInt`等是灵活的。

**编辑**

@wvxvw 的评论提到了一个矩阵，它`NumericUpperBounds`启发了我绕过矩阵，这是一个运行示例（暂时不包括在内）`Byte`：`Short`

```
trait ==>[X, Y] extends (X => Y)

object ==> {
  def apply[X, Y](f: X => Y): X ==> Y = {
    new (X ==> Y) {
      def apply(x: X): Y = f(x)
    }
  }
}

implicit val Int2LongNumericConversion = ==> { x: Int => x.toLong }
implicit val Int2FloatNumericConversion = ==> { x: Int => x.toFloat }
implicit val Int2DoubleNumericConversion = ==> { x: Int => x.toDouble }
implicit val Long2FloatNumericConversion = ==> { x: Long => x.toFloat }
implicit val Long2DoubleNumericConversion = ==> { x: Long => x.toDouble }
implicit val Float2DoubleNumericConversion = ==> { x: Float => x.toDouble }
implicit def reflexiveNumericConversion[X]: X ==> X = new (X ==> X) { def apply(x: X): X = x }

trait NumericUpperBound[Num1, Num2, UpperBound]

implicit def reflexiveNumericUpperBound[X]: NumericUpperBound[X, X, X] = new NumericUpperBound[X, X, X] {}
implicit def inductiveNumericUpperBound1[X, Y](implicit ev: X ==> Y): NumericUpperBound[Y, X, Y] = new NumericUpperBound[Y, X, Y] {}
implicit def inductiveNumericUpperBound2[X, Y](implicit ev: X ==> Y): NumericUpperBound[X, Y, Y] = new NumericUpperBound[X, Y, Y] {}

def compareTwoNumbers[N1, N2, N3](n1: N1, n2: N2)
                                 (implicit nub: NumericUpperBound[N1, N2, N3], 
                                         conv1: N1 ==> N3, 
                                         conv2: N2 ==> N3, 
                                           ord: Ordering[N3]): Int = {
  ord compare (n1, n2)
}

compareTwoNumbers(9L, 13) // -1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-01T11:01:34.940

我目前正在学习 Scala，所以不要太认真地回答我的问题，但我认为*View Bounds*或*Type Constraints*可以帮助你。View Bound 允许您比较任何标准数字，因为它们之间存在隐式视图，但它不会更进一步，因为没有从 BigInt 到 BigDecimal 的隐式视图。

```
def compareTwoNumbers[A <% Double, B <% Double](array:Array[A], number:B) = array(0) > number

scala> compareTwoNumbers(Array(1, 2, 0), 0.99)
res1: Boolean = true

scala> compareTwoNumbers(Array(1.0, 2, 0), 0.99)
res2: Boolean = true

scala> compareTwoNumbers(Array(1.0, 2, 0), 1)
res3: Boolean = false 
```

我很想知道是否可以支持 BigInt 和 BigDecimal，并想知道我的解决方案有哪些缺点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-01T12:18:07.767

这里是：

```
def cmp[T1, T2](arr: Array[T1], num: T2)
       (implicit v12: T1 => T2 = null, v21: T2 => T1 = null,
        ord1: Ordering[T1], ord2: Ordering[T2]): Boolean = v12 match {
    case null => ord1.gt(arr(0), num)
    case _    => ord2.gt(arr(0), num)
  } 
```

一些用例：

```
scala> cmp(Array(1,2), 0.1)  //T1 = Int, T2 = Double 
res3: Boolean = true

scala> cmp(Array(1.2, 2.3), 1) //T1 = Double, T2 = Int 
res4: Boolean = true

scala> cmp(Array(1,2), BigInt(100))  //T1 = Int, T2 = BigInt 
res5: Boolean = false

scala> cmp(Array(123.5 ,2233.9), BigDecimal(100)) //T1 = Double, T2 = BigDecimal 
res6: Boolean = true

scala> cmp(Array(123.5 ,2233.9), 200.toByte) 
res7: Boolean = true 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-31T22:52:34.293

```
def compareTwoNumbers(a: Number, b: Number) = {
  a.floatValue() > b.floatValue() // this has to compile
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T09:27:29.107

采用这段代码并不难：

```
def gt[A : Numeric, B: Numeric](first: A, second: B) = {
    val a = implicitly[Numeric[A]].toDouble(first)
    val b = implicitly[Numeric[B]].toDouble(second)
    a > b
} 
```

应该使用不同类型的数字：

```
scala> gt(4, 4.0)
res3: Boolean = false

scala> gt(4, 3.0)
res4: Boolean = true

scala> gt(3L, 4.0)
res5: Boolean = false 
```

# php - 使用数组检索错误消息

> ID：15735353
> 
> 赞同：2
> 
> 时间：2013-03-31T22:34:29.437
> 
> 标签：php, arrays, exception, gocardless

我在 PHP 中使用[GoCardless 的 API](https://gocardless.com/docs?language=php)版本来处理我网站上的付款。但是，当他们的 API 返回错误时，我想向用户显示更有效的错误。

我已经完成了一半，但我想知道是否有任何方法可以执行以下操作：

如果我有以下错误：

> Array ( [error] => Array ( [0] => 资源已经确认) )

`The resource has already been confirmed`反正有没有用PHP提取部分？

我的代码：

```
 try{
        $confirmed_resource = GoCardless::confirm_resource($confirm_params);
    }catch(GoCardless_ApiException $e){
        $err = 1;
        print '<h2>Payment Error</h2>
        <p>Server Returned : <code>' . $e->getMessage() . '</code></p>';
    } 
```

谢谢。

**更新 1：**

触发异常的代码：

```
$http_response_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
if ($http_response_code < 200 || $http_response_code > 300) {

  // Create a string
  $message = print_r(json_decode($result, true), true);

  // Throw an exception with the error message
  throw new GoCardless_ApiException($message, $http_response_code);

} 
```

**更新 2 :->`print_r($e->getMessage())`输出：**

> Array ( [error] => Array ( [0] => 资源已经确认) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:36:09.550

该方法`$e->getMessage()`似乎返回一个索引为“错误”的数组，该数组又是一个包含消息文本的数组。如果你问我这是**糟糕的 API 设计**

但是，您可以像这样访问消息文本：

```
try{
    $confirmed_resource = GoCardless::confirm_resource($confirm_params);
}catch(GoCardless_ApiException $e){
    $err = 1;
    $message = $e->getMessage();
    $error = $message['error'];
    print '<h2>Payment Error</h2>
    <p>Server Returned : <code><' . $error[0] . "</code></p>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T16:11:55.783

如果您查看 GoCardless_ApiException 类代码，您会发现有一个 getResponse() 方法可用于访问响应数组的错误元素...

```
$try{
    $confirmed_resource = GoCardless::confirm_resource($confirm_params);
}catch(GoCardless_ApiException $e){
    $err = 1;
    $response = $e->getResponse();

    print '<h2>Payment Error</h2>
    <p>Server Returned : <code>' . $response['error'][0] . "</code></p>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:25:42.130

我发现了问题，输出`$e->getMessage()`是纯字符串，而不是数组。

所以我将 Request.php 文件编辑为以下内容：

```
$http_response_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
if ($http_response_code < 200 || $http_response_code > 300) {

  // Create a string <<-- THE PROBLEM -->>
  // $message = print_r(json_decode($result, true), true);

  $message_test = json_decode($result, true);

  // Throw an exception with the error message
  // OLD - throw new GoCardless_ApiException($message, $http_response_code);
  throw new GoCardless_ApiException($message_test[error][0], $http_response_code);

} 
```

然后是我的 php 文件：

```
try{
    $confirmed_resource = GoCardless::confirm_resource($confirm_params);
}catch(GoCardless_ApiException $e){
    $err = 1;
    $message = $e->getMessage();

    print '<h2>Payment Error</h2>
    <p>Server Returned : <code>' . $message . "</code></p>";
} 
```

和页面输出：

> 付款错误
> 
> 服务器返回：资源已经确认

# php - php、openssl 和 GOST

> ID：15735354
> 
> 赞同：1
> 
> 时间：2013-03-22T15:52:27.190
> 
> 标签：php, openssl, digital-signature, pkcs#7, gost3410

我正在尝试使用一对 GOST 加密证书和一个私钥使用 PHP 签署 S/MIME。

从控制台使用 openssl 本身时，一切都很好：

```
/usr/local/openssl/bin/openssl cms -sign -in file.txt -out signedfile.txt -signer p12.pem
(signedfile.txt is created)

/usr/local/openssl/bin/openssl cms -verify -in signedfile.txt -out signedddata.txt -no_signer_cert_verify -issuer_checks -ignore_critical
Verification successful 
```

使用 PHP 代码时，我有点卡住了：

```
$res = openssl_pkcs7_sign("file.txt", "phpsignedfile.txt", 'file://'.realpath('./p12.pem'), 'file://'.realpath('./p12.pem'), array("To" => "foo@bar.com", "From: FooBar <foo@bar.com>", "Subject" => "Foo Bar"));

    if (!$res) {
        while ($msg = openssl_error_string())
            echo $msg . "<br />\n";
        echo "Failed to sign.\n"; exit;
    } 
```

我得到：

```
# /usr/local/php/bin/php sign-clear.php
PHP Warning:  openssl_pkcs7_sign(): error getting private key in /root/tests/sign-clear.php on line 3
error:0609E09C:digital envelope routines:PKEY_SET_TYPE:unsupported algorithm<br />
error:0606F076:digital envelope routines:EVP_PKCS82PKEY:unsupported private key algorithm<br />
error:0907B00D:PEM routines:PEM_READ_BIO_PRIVATEKEY:ASN1 lib<br />
Failed to sign. 
```

'错误获取私钥'一直在这里，除了当它真的无法加载时，我得到'无起始行错误'。所以这个输出看起来真的像 PHP openssl 模块找不到合适的密码。

我如何告诉 PHP 这是一个 GOST 密码？我告诉openssl要么使用配置文件，要么使用直接'-engine gost'选项。有没有办法告诉 PHP 同样的事情？

我确实有一个 PHP 编译并链接到支持 GOST 的 openss 1.0.1e（openssl 模块是与 PHP 一起构建的）：

```
# /usr/local/openssl/bin/openssl ciphers | grep -i GOST
ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:SRP-DSS-AES-256-CBC-SHA:SRP-RSA-AES-256-CBC-SHA:DHE-DSS-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA256:DHE-RSA-AES256-SHA:DHE-DSS-AES256-SHA:DHE-RSA-CAMELLIA256-SHA:DHE-DSS-CAMELLIA256-SHA:GOST2001-GOST89-GOST89:GOST94-GOST89-GOST89:ECDH-RSA-AES256-GCM-SHA384:ECDH-ECDSA-AES256-GCM-SHA384:ECDH-RSA-AES256-SHA384:ECDH-ECDSA-AES256-SHA384:ECDH-RSA-AES256-SHA:ECDH-ECDSA-AES256-SHA:AES256-GCM-SHA384:AES256-SHA256:AES256-SHA:CAMELLIA256-SHA:PSK-AES256-CBC-SHA:ECDHE-RSA-DES-CBC3-SHA:ECDHE-ECDSA-DES-CBC3-SHA:SRP-DSS-3DES-EDE-CBC-SHA:SRP-RSA-3DES-EDE-CBC-SHA:EDH-RSA-DES-CBC3-SHA:EDH-DSS-DES-CBC3-SHA:ECDH-RSA-DES-CBC3-SHA:ECDH-ECDSA-DES-CBC3-SHA:DES-CBC3-SHA:PSK-3DES-EDE-CBC-SHA:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:SRP-DSS-AES-128-CBC-SHA:SRP-RSA-AES-128-CBC-SHA:DHE-DSS-AES128-GCM-SHA256:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES128-SHA256:DHE-DSS-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA:DHE-RSA-SEED-SHA:DHE-DSS-SEED-SHA:DHE-RSA-CAMELLIA128-SHA:DHE-DSS-CAMELLIA128-SHA:ECDH-RSA-AES128-GCM-SHA256:ECDH-ECDSA-AES128-GCM-SHA256:ECDH-RSA-AES128-SHA256:ECDH-ECDSA-AES128-SHA256:ECDH-RSA-AES128-SHA:ECDH-ECDSA-AES128-SHA:AES128-GCM-SHA256:AES128-SHA256:AES128-SHA:SEED-SHA:CAMELLIA128-SHA:IDEA-CBC-SHA:PSK-AES128-CBC-SHA:ECDHE-RSA-RC4-SHA:ECDHE-ECDSA-RC4-SHA:ECDH-RSA-RC4-SHA:ECDH-ECDSA-RC4-SHA:RC4-SHA:RC4-MD5:PSK-RC4-SHA:EDH-RSA-DES-CBC-SHA:EDH-DSS-DES-CBC-SHA:DES-CBC-SHA:EXP-EDH-RSA-DES-CBC-SHA:EXP-EDH-DSS-DES-CBC-SHA:EXP-DES-CBC-SHA:EXP-RC2-CBC-MD5:EXP-RC4-MD5 
```

（注意这是默认的配置输出）

```
# ldd /usr/local/php/bin/php
        linux-vdso.so.1 =>  (0x00007fff42455000)
        libcrypt.so.1 => /lib/libcrypt.so.1 (0x00007f1077404000)
        libresolv.so.2 => /lib/libresolv.so.2 (0x00007f10771ee000)
        librt.so.1 => /lib/librt.so.1 (0x00007f1076fe5000)
        libmcrypt.so.4 => /usr/lib/libmcrypt.so.4 (0x00007f1076db3000)
        libltdl.so.7 => /usr/lib/libltdl.so.7 (0x00007f1076baa000)
        libdl.so.2 => /lib/libdl.so.2 (0x00007f10769a5000)
        libfreetype.so.6 => /usr/lib/libfreetype.so.6 (0x00007f107671d000)
        libz.so.1 => /usr/lib/libz.so.1 (0x00007f1076506000)
        libpng12.so.0 => /lib/libpng12.so.0 (0x00007f10762df000)
        libjpeg.so.62 => /usr/lib/libjpeg.so.62 (0x00007f10760bc000)
        libcrypto.so.1.0.0 => /usr/local/openssl/lib/libcrypto.so.1.0.0 (0x00007f1075ce2000)
        libssl.so.1.0.0 => /usr/local/openssl/lib/libssl.so.1.0.0 (0x00007f1075a78000)
        libmysqlclient.so.16 => /usr/lib/libmysqlclient.so.16 (0x00007f107565b000)
        libpthread.so.0 => /lib/libpthread.so.0 (0x00007f107543f000)
        libnsl.so.1 => /lib/libnsl.so.1 (0x00007f1075226000)
        libm.so.6 => /lib/libm.so.6 (0x00007f1074fa4000)
        libxml2.so.2 => /usr/lib/libxml2.so.2 (0x00007f1074c53000)
        libc.so.6 => /lib/libc.so.6 (0x00007f10748f0000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f1077646000) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:27:24.903

实际上有一组错误报告，都提到应该修补 ext/openssl/openssl.c；添加

```
OPENSSL_config(NULL); 
```

在一组之前

```
SSL_library_init();
OpenSSL_add_all_ciphers();
OpenSSL_add_all_digests(); 
```

来电。之后，openssl 开始与来自配置指向的 OPENSSL_CONF 变量的任何引擎一起使用。

# mysql - 为什么我的网站在我的本地主机上加载缓慢，但在实时网站上却没有？

> ID：15735359
> 
> 赞同：0
> 
> 时间：2013-03-31T22:34:42.847
> 
> 标签：mysql, performance, localhost, mamp

我目前正在使用 mamp 在我的本地主机上开发一个站点，然后我使用 git 将其推送到实时站点。这是我的问题。当我在本地主机上刷新页面时，需要一分钟才能再次加载页面。当我刷新实时站点上的页面时，它几乎会立即刷新。在每次刷新时，它都会执行几个数据库查询，但没什么大不了的。

我正在使用 mysql 数据库、codeigniter 框架，并且我的网站由 Hostgator 托管。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:39:15.123

首先，让我说，如果没有更多信息，这是不可能回答的。话虽这么说，我最好的猜测是您的本地 MAMP 安装分配的内存没有您实际的 Web 服务器那么多。PHP 可以访问的 RAM 量可以在 php.ini 文件中修改或使用`ini_set("memory_limit","256M");`

但是，如果您的主机开始时没有很多 RAM，那么这可能不会有什么不同......

# c++ - C ++在char上正确拆分文本

> ID：15735360
> 
> 赞同：0
> 
> 时间：2013-03-31T22:34:56.190
> 
> 标签：c++, vector, split, delimiter

我对 C++ 很陌生，我认为我在这段代码的某个地方犯了一个小错误。到目前为止我没有发现它。我希望你能帮助我，告诉我怎么/在哪里/为什么错了？提前谢谢了。

编码：

```
std::vector<std::string> spliter(const std::string& s, char delimiter)
{
        std::vector<std::string> result;

        size_t start = 0;
        for(std::size_t i = 0; i != std::string::npos; i = s.find(delimiter,start))
        {
            result.push_back( s.substr(start,i-start) );
            start = i+1;
        }
        iprintf("\x1b[2J");
        printf("\x1b[4;0HDone Splitting Text.");
        swiWaitForVBlank();
        return result;
} 
```

给定参数： `s = "$ 00-000 SS ''Prologue'' CF N00-001 V 1 MP 20"` delimiter = `' '`(a space)

预期结果：

```
result[0] = $
result[1] = 00-000
result[2] = SS
etc. 
```

当前错误结果：

```
result[0] = 
result[1] = 
result[2] = 00-000
etc. 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:42:44.007

我相信问题出在循环中。你从 0 开始，你推送的第一件事是从 0 到 0。

```
 size_t start = 0;
    for(std::size_t i = 0; i != std::string::npos; i = s.find(delimiter,start))
    {
        result.push_back( s.substr(start,i-start) );
        start = i+1;
    } 
```

相反，如果你`i`从`s.find(delimiter, start)`它开始应该可以工作。[这里的例子..](http://ideone.com/KXEeH7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:43:25.340

这是修复算法的一种可能方法：

```
#include <vector>
#include <string>

std::vector<std::string> spliter(const std::string& s, char delimiter)
{
    std::vector<std::string> result;

    std::string::size_type start = 0;
    auto pos = s.find(delimiter, 0);
    while (pos != std::string::npos)
    {
        result.push_back(s.substr(start, pos - start));
        start = pos + 1;
        pos = s.find(delimiter, start);
    }

    if (start < s.length())
    {
        result.push_back(s.substr(start));
    }

    return result;
} 
```

这是该算法的一个[实时示例](http://liveworkspace.org/code/48Ihhx%24221)，可为您的测试字符串提供正确的输出。

请注意，您可以将其概括为使用字符串作为分隔符而不是单个字符，只需更改 的`splitter`第二个参数的类型（当然，传递`" "`而不是`' '`）。

# java - 在多线程环境中访问布尔值

> ID：15735366
> 
> 赞同：0
> 
> 时间：2013-03-31T22:35:34.230
> 
> 标签：java, android, multithreading

如果我有一个持有由 setter 和 getter 方法公开的私有布尔值的类，如果我想从不同的线程读取和写入该布尔值，我是否必须将这些方法设置为同步？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:50:25.673

对简单值的同步访问通常是不必要的。通常，您只需要标记`volatile`限制较少且信息较多的内容。

这在很大程度上取决于您如何访问该值。

在某些情况下，使用 an`AtomicBoolean`可能是最好的方法。这为`volatile`.

有关更多详细信息，请参阅问题[Java: volatile boolean vs AtomicBoolean](https://stackoverflow.com/q/3786825/823393)问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T22:55:18.267

看看里面的类[`java/util/concurrent/atomic`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/package-summary.html)可能对你有用。比如[`AtomicBoolean`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicBoolean.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T22:50:23.400

是的，使 setter 和 getter 同步是一个好主意。读取或写入布尔值不是原子命令，因此在极少数情况下它可能会给您带来一些问题。（您无法确定您是从 RAM 中读取还是从 Cashe 读取）。除非它是易变的。

# backbone.js - 如何清空依赖的backbone.js 集合？

> ID：15735375
> 
> 赞同：0
> 
> 时间：2013-03-31T22:36:34.187
> 
> 标签：backbone.js, collections

我有一个骨干集合，它依赖于我的 Rails 应用程序中的另一个集合。我想确保显示依赖集合的视图被清空并且依赖集合被“重置”它的视图以及来自服务器的相应记录被删除。是否有一种简单的方法可以做到这一点，或者当现有集合中的最后一条记录被删除时，我是否必须遍历集合并触发依赖集合中所有模型的 model.destroy 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:16:37.630

Backbone Collections 有一个`reset()` [（docs）](http://backbonejs.org/#Collection-reset)方法，它将模型列表作为参数。如果不传递任何参数，它将清空整个 Collection。但是，默认情况下，这不会像您可能看到的那样从服务器中删除模型本身。

Collection 上还有一个`sync()` [（docs）](http://backbonejs.org/#Collection-sync)，它将集合（或集合中的所有模型）同步到服务器。当然，如果您已经运行`reset()`Collection 现在是空的，那么这并没有真正的帮助。

最后，我认为您将不得不遍历 Collection 来销毁每个模型（除非您想采用服务器端方法来限制您的调用），但是您应该能够扩展您的 Collection 并添加一个`destroyCollection()`方法，或者只是扩展在将集合重置为空之前，已经存在的`reset`集合在模型上调用。`destroy()`

如果这没有帮助，也许可以提供一个更高层次的例子来说明你想要实现的目标，也许还有更简单的方法？

# eclipse - Eclipse UML 工具

> ID：15735377
> 
> 赞同：4
> 
> 时间：2013-03-31T22:36:35.870
> 
> 标签：eclipse, plugins, uml

我已经尝试了一些用于构建 UML（对象/依赖图）的 eclipse 工具，但我真正需要的是一个工具来生成这样的**UML out of code**。（反之亦然）

我更喜欢简单的 UML 工具，它易于安装且没有任何依赖项。我已经尝试过 Jupe、Omondo 和 eUML，但无论如何我对它们还是不太满意。

（我还发现了这个：[Eclipse UML plugin with Java Code Generation](https://stackoverflow.com/questions/5672082/eclipse-uml-plugin-with-java-code-generation)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:25:43.397

尝试最常见的 CASE 工具，如[MagicDraw](http://www.nomagic.com/)或[Enterprise Architect](http://www.sparxsystems.com/)。它们具有逆向工程功能，并且功能最强大（尤其是自动格式化图表元素可能很有用）。

如果您想/需要留在 Eclipse 中，请查看[与您的问题非常相似的这个主题](https://stackoverflow.com/questions/5790508/uml-tool-for-reverse-engineering-an-eclipse-project)。

# java - java在cmd中写入netstat

> ID：15735379
> 
> 赞同：4
> 
> 时间：2013-03-31T22:36:58.893
> 
> 标签：java, cmd, netstat

我的目标是在我的电脑上打印所有的互联网连接。当我在 cmd 上键入 netstat 时，我会得到互联网连接列表。我想在java中自动做同样的事情。

我的代码：

```
Runtime runtime = Runtime.getRuntime();

process = runtime.exec(pathToCmd);

byte[] command1array = command1.getBytes();//writing netstat in an array of bytes
OutputStream out = process.getOutputStream();
out.write(command1array);
out.flush();
out.close();

readCmd();  //read and print cmd 
```

但是有了这段代码，我得到 C:\eclipse\workspace\Tracker>Mais? 而不是连接列表。显然我正在使用 Eclipse，在 Windows 7 中。我做错了什么？我看过类似的主题，但我找不到什么问题。谢谢你的回答。

编辑：

```
public static void readCmd() throws IOException {

    is = process.getInputStream();
    isr = new InputStreamReader(is);
    br = new BufferedReader(isr);
    String line;

    while ((line = br.readLine()) != null) {
        System.out.println(line);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:38:39.557

试试这个：我能够在我的默认临时目录中创建一个包含所有连接的文件

```
final String cmd = "netstat -ano";

        try {

            Process process = Runtime.getRuntime().exec(cmd);

            InputStream in = process.getInputStream();

            File tmp = File.createTempFile("allConnections","txt");

            byte[] buf = new byte[256];

            OutputStream outputConnectionsToFile = new FileOutputStream(tmp);

            int numbytes = 0;

            while ((numbytes = in.read(buf, 0, 256)) != -1) {

                outputConnectionsToFile.write(buf, 0, numbytes);

            }

            System.out.println("File is present at "+tmp.getAbsolutePath());

        } catch (Exception e) {
            e.printStackTrace(System.err);
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-04T16:47:23.513

您还可以使用 的实例[**`java.util.Scanner`**](http://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html)来读取命令的输出。

```
public static void main(String[] args) throws Exception {
    String[] cmdarray = { "netstat", "-o" };
    Process process = Runtime.getRuntime().exec(cmdarray);
    Scanner sc = new Scanner(process.getInputStream(), "IBM850");
    sc.useDelimiter("\\A");
    System.out.println(sc.next());
    sc.close();
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-04-10T21:07:29.127

```
final String cmd = "netstat -ano";

    try {

        Process process = Runtime.getRuntime().exec(cmd);

        InputStream in = process.getInputStream();
        InputStreamReader isr = new InputStreamReader(in);
        BufferedReader br = new BufferedReader(isr);
        String line;

        while ((line = br.readLine()) != null) {
           System.out.println(line);
        }

    } catch (Exception e) {
        e.printStackTrace(System.err);
    } finally{
        in  = null;
        isr = null;
        br = null;
    } 
```

# jquery-mobile - 从列表视图中的链接关闭面板

> ID：15735380
> 
> 赞同：1
> 
> 时间：2013-03-31T22:37:10.900
> 
> 标签：jquery-mobile, angularjs

我有一个带有面板的 jquery 移动页面。在面板内部，我有一个列表视图，在每个列表项上都有一个我添加了 data-rel="close" 属性的位置。我希望能够在单击列表项时关闭面板。

请注意，我还绑定了 angular。

```
<ul data-role="listview" data-icon="arrow-l" class="ui-icon-alt" data-inset="true" >
        <li ng-repeat="task in tasks" >                                
            <a href="#" ng-click="selectTask(task)" data-rel="close">{{task.Name}}</a>                        
        </li>            
    </ul> 
```

我在列表视图之外的链接上进行了测试，它工作正常。我不确定 id angularjs 是在这里对我耍花招还是别的什么。

最好的问候拉斯穆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:46:41.377

标记

```
<a href="#" id="closepanel" ng-click="selectTask(task)" data-rel="close">{{task.Name}}</a> 
```

JS

```
$('#closepanel').on('click', function {} {
 $( "#PanelID" ).panel( "close" );
}); 
```

# java - 仅更改 ImageButton 背景的一种状态（默认状态）

> ID：15735397
> 
> 赞同：3
> 
> 时间：2013-03-31T22:38:57.450
> 
> 标签：java, android, android-theme, android-selector

我想更改图像按钮的背景。基本上，我拥有的图像在透明背景上看起来很棒，而当它们中的一堆都具有非透明背景时有点糟糕。

这应该很容易 - 只需`android:background`将按钮上的按钮更改为透明颜色（通过可绘制）：click_background.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_focused="true"><color android:color="#FF008080" />
    </item>
    <item android:state_pressed="true"><color android:color="#FF008080" />
    </item>
    <item><color android:color="#00000000" />
    </item>

</selector> 
```

然后按钮

```
<ImageButton
                android:id="@+id/players"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_gravity="center"
                android:background="@drawable/click_background"
                android:contentDescription="@string/players"
                android:src="@drawable/speaker_tile" /> 
```

**问题**是我实际上想保留背景的`state_focussed`和`state_pressed`版本（我认为它是从主题派生的）。我希望在按下或选择按钮时出现背景（并以完全相同的颜色/可绘制显示），当按下按钮时主题通常会使用该背景会很有帮助。

我想知道是否有办法执行以下操作之一，但到目前为止都找不到任何内容：

1.  定义一个选择器，它在某些方面从另一个继承（类似于主题可以从另一个继承的方式）。

2.  创建一个全新的选择器，但让它的 XML 引用主题的颜色/可绘制 对象`state_focussed`并`state_pressed`用于图像按钮。**编辑：看起来这个选项已经失效了。我需要属性，但您不能从可绘制对象中引用它们。[看这里](https://stackoverflow.com/questions/8041537/how-to-reference-style-attributes-from-a-drawable)**

如果可能的话，我想在声明式 XML 而不是程序化 Java 中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T03:19:21.207

您可以将 Android 操作系统使用的可绘制对象复制到您的项目中，并在您的状态列表可绘制对象中使用它们。你可以在里面找到图片`{android-sdk-directory}/platforms/android-##/data/res/drawable[-*dpi]`

**编辑：** 如果你去`{android-sdk-directory}/platforms/android-##/data/res/values`，你会找到Android 使用的`themes.xml`和文件。`styles.xml`使用它们，您可以确定要查找的可绘制对象。

例如，较新版本的 Android 上的默认主题是`Theme.Holo`. 这个主题有一个 ImageButtons 的默认样式，声明如下：

`<item name="imageButtonStyle">@android:style/Widget.Holo.ImageButton</item>`

在`styles.xml`中，这种风格定义如下：

```
<style name="Widget.Holo.ImageButton" parent="Widget.ImageButton">
    <item name="android:background">@android:drawable/btn_default_holo_dark</item>
</style> 
```

谢天谢地，背景属性就在那里定义得一目了然。有时它是从父样式继承的，而您必须找到它。无论如何，这是可绘制的（在`/drawable`目录中找到，因为它是 xml）：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_window_focused="false" android:state_enabled="true"
    android:drawable="@drawable/btn_default_normal_holo_dark" />
<item android:state_window_focused="false" android:state_enabled="false"
    android:drawable="@drawable/btn_default_disabled_holo_dark" />
<item android:state_pressed="true" 
    android:drawable="@drawable/btn_default_pressed_holo_dark" />
<item android:state_focused="true" android:state_enabled="true"
    android:drawable="@drawable/btn_default_focused_holo_dark" />
<item android:state_enabled="true"
    android:drawable="@drawable/btn_default_normal_holo_dark" />
<item android:state_focused="true"
    android:drawable="@drawable/btn_default_disabled_focused_holo_dark" />
<item
     android:drawable="@drawable/btn_default_disabled_holo_dark" />
</selector> 
```

因此，这些是 Android 在默认（全息黑暗）主题中用于标准 ImageButton 背景的可绘制对象。

# magento - 是否在所有页面浏览量上调用了 Magento 事件，但在重定向上没有？

> ID：15735398
> 
> 赞同：1
> 
> 时间：2013-03-31T22:39:02.890
> 
> 标签：magento

我已经玩过许多控制器事件，但无法识别在没有重定向时调用的事件。还查看了 cms_pageview，但所有其他页面类型都没有等效项。堆栈中是否有稍后调用的未触发重定向的事件或用于检查是否请求重定向的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:02:35.043

您可以使用*许多*动态和通用事件；最好描述您的需求。

如果请求是通过 Front Controller 发送的，则响应是在 中发送的`dispatch()`，并且该响应可能包含重定向标头；您应该能够读取响应对象标头或状态代码以查看是否已设置重定向。

```
if (Mage::app()->getResponse()->isRedirect()) {
    //this will work assuming that the status code has been set
} 
```

有关更多信息，请参阅`Zend_Controller_Response_Abstract`。

# php - 从 CI 中的另一个配置文件加载配置项

> ID：15735400
> 
> 赞同：0
> 
> 时间：2013-03-31T22:39:07.357
> 
> 标签：php, codeigniter, configuration

我一直在尝试将配置项加载到我的 CodeIgniter 应用程序的另一个配置文件中。这样做的原因是我不想通过所有文件来更改相同的参数，例如，更改服务器或想要更改站点标题。

我试图通过使用从主`config.php`文件中获取我需要的项目`$this->config['site_title']`，通过使用加载配置文件`$this->config->load('config')`并通过使用加载单个配置项，`$this->config->item('site_title')`但是所有这些方法都返回无法加载配置项的错误。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T03:50:39.830

只需在 ci config 文件夹中创建配置文件

```
myconfig.php 
```

在里面

```
$config['my_site_title'] = 'TechNew.In - www.technew.in'; 
```

并将您的配置加载到控制器中

```
$this->load->config('myconfig'); 
```

然后得到你的价值

```
$my_site_title = $this->config->item('my_site_title'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T22:49:09.390

您应该从控制器中的 CI 实例加载配置文件

`$ci = & get_instance();`

`$item_name = $ci->config->item('item_name');`

# asp.net - OnClientClick 不适用于 asp.net 和 vb.net

> ID：15735404
> 
> 赞同：1
> 
> 时间：2013-03-31T22:39:31.673
> 
> 标签：asp.net, vb.net, web-services

我尝试使用 ASP.NET 和 VB 创建动态 Web 解决方案。

我的网页如下所示：

```
<div id="menu" style="position:relative;text-align:center">
        <asp:PlaceHolder runat="server" id="PHimg1" />
        <asp:PlaceHolder runat="server" id="PHimg2" />
        <asp:PlaceHolder runat="server" id="PHimg3" />
        <br />
        <asp:PlaceHolder runat="server" id="PHimg4" />
        <asp:PlaceHolder runat="server" id="PHimg5" />
        <asp:PlaceHolder runat="server" id="PHimg6" />
        <br />
        <asp:PlaceHolder runat="server" id="PHimg7" />
        <asp:PlaceHolder runat="server" id="PHimg8" />
        <asp:PlaceHolder runat="server" id="PHimg9" />
</div> 
```

VB部分是这样的：

```
Public Class index
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Load_Main()
End Sub

Protected Sub Load_Main()
    Dim img1 As New ImageButton()
    Dim img2 As New ImageButton()
    Dim img3 As New ImageButton()
    Dim img4 As New ImageButton()
    Dim img5 As New ImageButton()
    Dim img6 As New ImageButton()

    img1.ImageUrl = "./resources/EssenTrinken.png"
    img1.OnClientClick = "Load_Eating()"

    img2.ImageUrl = "./resources/Einkaufen2-black.png"
    img3.ImageUrl = "./resources/Special-black.png"
    img4.ImageUrl = "./resources/KosmetikWellness.png"
    img5.ImageUrl = "./resources/KulturGeschichte.png"
    img6.ImageUrl = "./resources/Unterhaltung2-black.png"

    PHimg1.Controls.Add(img1)
    PHimg2.Controls.Add(img2)

    PHimg4.Controls.Add(img3)
    PHimg5.Controls.Add(img4)

    PHimg7.Controls.Add(img5)
    PHimg8.Controls.Add(img6)
End Sub

Protected Sub Load_Eating()
    Dim img1 As New ImageButton()
    Dim img2 As New ImageButton()
    Dim img3 As New ImageButton()
    Dim img4 As New ImageButton()
    Dim img5 As New ImageButton()
    Dim img6 As New ImageButton()

    img1.ImageUrl = "./resources/zurueck.png"
    img2.ImageUrl = "./resources/Bars2.png"
    img3.ImageUrl = "./resources/Cafe.png"
    img4.ImageUrl = "./resources/FastFood2.png"
    img5.ImageUrl = "./resources/Restaurant.png"
    img6.ImageUrl = "./resources/Baeckerei.png"

    PHimg1.Controls.Add(img1)
    PHimg2.Controls.Add(img2)

    PHimg3.Controls.Add(img3)
    PHimg4.Controls.Add(img4)

    PHimg5.Controls.Add(img5)
    PHimg6.Controls.Add(img6)
End Sub

End Class 
```

我希望如果我单击其中一个图像按钮，则首页的孔外观会动态变化，而无需加载新的孔页。所以我为此定义了几个 PlacHolder。

如果我运行 web 应用程序，但如果我按下按钮，则该功能不起作用。

我检查了来源并找到了这个标签：

```
<input type="image" name="ctl03" src="./resources/EssenTrinken.png" onclick="Load_Eating();" /> 
```

这个解决方案有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:45:55.743

添加到您的 Page_load 检查[IsPostBack](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)

```
if Not IsPostBack Then
   Load_main()
End If 
```

这将阻止您的 page_load 方法重新创建每个按钮并重置 Image_click 事件的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T23:03:12.160

如果您尝试从后面的代码中执行此操作，则需要添加 Click 事件处理程序：

```
Protected Sub Load_Main()
    Dim img1 As New ImageButton()    
    AddHandler img1.Click, AddressOf Img1Click
    'rest of your code 
```

然后有一些功能可以满足您的需求：

```
Private Sub Img1Click(ByVal sender As Object, ByVal e As ImageClickEventArgs)
    'some code
End Sub 
```

请注意，这将导致回发。您希望如何在不重新加载页面且不使用 JavaScript 的情况下动态更改首页，这令人困惑......

# python - 在python中将词频转换为图形直方图

> ID：15735406
> 
> 赞同：1
> 
> 时间：2013-03-31T22:39:45.577
> 
> 标签：python, formula, frequency

这就是我现在所拥有的，这要感谢 Pavel Anossov。我正在尝试将已输出的词频转换为星号。

```
import sys
import operator 
from collections import Counter
def candidateWord():

   with open("sample.txt", 'r') as f:
      text = f.read()
   words = [w.strip('!,.?1234567890-=@#$%^&*()_+')for w in text.lower().split()]
            #word_count[words] = word_count.get(words,0) + 1
   counter = Counter(words)

   print("\n".join("{} {}".format(*p) for p in counter.most_common()))

candidateWord() 
```

这就是我现在所拥有的输出。

```
how 3

i 2

am 2

are 2

you 2

good 1

hbjkdfd 1 
```

我想尝试使用的公式是最常见的单词出现 M 次，当前单词出现 N 次，打印的星号数为：

```
(50 * N) / M 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:45:39.547

我将星号放在左边以避免对齐单词：

```
...
counter = Counter(words)
max_freq = counter.most_common()[0][1]
for word, freq in sorted(counter.most_common(), key=lambda p: (-p[1], p[0])):
    number_of_asterisks = (50 * freq ) // max_freq     # (50 * N) / M
    asterisks = '*' * number_of_asterisks        # the (50*N)/M asterisks
    print('{:>50} {}'.format(asterisks, word)) 
```

格式字符串的意思是“空格到 50 个字符的`:>50`左填充”。

*   `counter.most_common`返回（单词，频率）对的列表，按频率排序
*   `counter.most_common()[0][1]`如果第一对的第二个元素，那么最大频率
*   我们`counter.most_common()`首先按频率降序进行循环，然后是单词
*   `number_of_asterisks`由您的公式计算得出。我们使用整数除法`//`得到整数结果。
*   我们重复一个星号`number_of_asterisks`时间并将结果存储在`asterisks`
*   我们打印`asterisks`和`word`. 星号在 50 个字符宽的列中右对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:46:02.930

编码：

```
import sys
import operator 
from collections import Counter
def candidateWord():
   with open("sample.txt", 'r') as f:
      text = f.read()
   words = [w.strip('!,.?1234567890-=@#$%^&*()_+')for w in text.lower().split()]
            #word_count[words] = word_count.get(words,0) + 1
   counter = Counter(words)

   # I added the code below...
   columns = 80
   n_occurrences = 10
   to_plot = counter.most_common(n_occurrences)
   labels, values = zip(*to_plot)
   label_width = max(map(len, labels))
   data_width = columns - label_width - 1
   plot_format = '{:%d}|{:%d}' % (label_width, data_width)
   max_value = float(max(values))
   for i in range(len(labels)):
     v = int(values[i]/max_value*data_width)
     print(plot_format.format(labels[i], '*'*v))

candidateWord() 
```

输出：

```
the |***************************************************************************
and |**********************************************                             
of  |******************************************                                 
to  |***************************                                                
a   |************************                                                   
in  |********************                                                       
that|******************                                                         
i   |****************                                                           
was |*************                                                              
it  |********** 
```

# c# - 块分配

> ID：15735409
> 
> 赞同：4
> 
> 时间：2013-03-31T22:39:57.673
> 
> 标签：c#, c++, memory, allocation

是预先分配（例如）100KB 的内存（在堆中）然后只继续使用 60KB 更好，还是根据需要分配每个字节更好？

我的问题来自阅读此博客： [http ://deplinenoise.wordpress.com/2012/10/20/toollibrary-memory-management-youre-doing-it-wrong/](http://deplinenoise.wordpress.com/2012/10/20/toollibrary-memory-management-youre-doing-it-wrong/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:15:23.633

这实际上取决于您的应用程序的复杂内存细节。然而，这家伙的基本观点是绝对准确的——预分配和内存区域的效率非常高。`new`并且`delete`是最通用的工具，如果您有更具体的问题，您可以找到更有效的解决方案。固定大小的对象池是另一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:46:41.240

这是。在某些情况下，操作系统实际上并没有给你所有的空间。以 Linux 为例。Java 倾向于请求大量内存并且从不使用它，因此实际发生的是操作系统会跟踪您请求的这些范围，但在您使用它之前从不将它们映射到页表中（因此从不为其分配帧）。因此，就虚拟内存而言，您似乎使用了很多，但实际上您只使用了您曾经访问过的页面（您实际使用的示例中的 40kb）。您可以在内存的虚拟和物理使用之间的差异中看到这一点（假设您的进程没有换出）。

# asp.net - ASP.Net，VB：清除网页上的字段

> ID：15735410
> 
> 赞同：2
> 
> 时间：2013-03-31T22:40:12.450
> 
> 标签：asp.net, vb.net, reset, requiredfieldvalidator, rangevalidator

我正在使用 ASP.Net 和 VB 开发一个网站。

在其中一个页面上，有某些字段（`TextBox`es 和 a `DropDownList`）。用户应该填写这些字段并单击“提交”按钮。此外，还有一个“清除值”按钮，如果用户单击该按钮，则应清除网页上的字段。

我为清除字段编写的代码是：

```
txtBox1.Text =  String.Empty 
```

对于所有`TextBox`es。但是，这不起作用，因为我使用了很少的验证器，如,`RequiredFieldValidator`等来验证字段。因此，当用户填写几个字段然后单击“清除值”按钮以清除所有字段时，这些字段不会被清除。Insted 验证工作并且错误消息根据这些验证显示。`RangeValidator``RegularExpressionValidator`

我还尝试了以下代码来清除所有字段：

```
 Response.Redirect("UserData.aspx"); 
```

（其中“UserData.aspx”只是该网页的名称）。但是，它仍然提供相同的验证错误消息。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:44:27.237

“清除值”按钮

你必须设置它的属性`CausesValidation = "false"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:49:43.280

在您的用户单击提交或清除按钮后，您可以在不同的方法中执行类似的操作，然后在按钮的事件处理程序中调用该方法：

```
public void ClearAll()
{
    textbox1.Text = "";
    textbox2.Text = "";
    textbox3.Text = "";

} 
```

确保每个按钮的 CausesValidation 属性都设置为 false，这样您的验证器就不会被触发。

# c# - 随机时间间隔后调用方法

> ID：15735421
> 
> 赞同：3
> 
> 时间：2013-03-31T22:42:09.607
> 
> 标签：c#

我有 5 种方法，我需要在随机间隔（1 到 3 秒）的时间后调用它们。说第一个方法在 1 秒后调用，然后在 2.3 秒后调用第二个方法，在 1.5 后调用下一个方法等。我使用计时器进行了以下操作

```
 Random rand = new Random();
    fortimerinterval1 = rand.Next(1000, 3000);
    mytimer1.Interval = fortimerinterval1; 
    mytimer1.Enabled = true;
    mytimer1.Start(); 
```

但问题是，定时器间隔不会每次都改变。第一次后定时器间隔保持不变。如何使其随机化，以便每次计时器间隔发生变化。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T06:40:43.543

做这样的事情

```
Random rand = new Random();
Timer mytimer = new Timer();

private void button1_Click(object sender, EventArgs e)
{
    mytimer.Tick += new EventHandler(TimerEventProcessor);
    int fortimerinterval = rand.Next(1000, 3000);
    mytimer.Interval = fortimerinterval;
    mytimer.Enabled = true;
    mytimer.Start();
}

public void TimerEventProcessor(Object myObject, EventArgs myEventArgs)
{
    int fortimerinterval = rand.Next(1000, 3000);
    mytimer.Interval = fortimerinterval;

    System.Diagnostics.Debug.WriteLine(DateTime.Now);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T22:49:37.480

在计时器经过的方法中设置时间间隔。

```
 Random rand = new Random();

    private void OnTick(object sender, EventArgs eventArgs)
    {

        _timer.Interval = rand.Next(1000, 3000);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T23:20:25.927

如果您使用 System.Timers.Timer，请注意重叠的回调。例如，如果第一个刻度在 1 秒后触发，并且您在刻度回调中调用的方法需要超过 1 秒才能完成，那么您将在第一个刻度后 1 秒调用另一个刻度回调，然后再更改间隔。

我将使用配置为触发一次的 System.Threading.Timer 并在回调方法中将其更改为在下一个随机间隔再次触发。

像这样：

```
 public TestClass()
    {
        _random = new Random(Environment.TickCount);
        _timer = new Timer(TimerCallback, null, _random.Next(1000, 3000), Timeout.Infinite);
    }

    private void TimerCallback(object state)
    {
        try
        {
            // Do something.
        }
        finally
        {
            _timer.Change(_random.Next(1000, 3000), Timeout.Infinite);
        }
    } 
```

# python - 如何在 gtk3 中创建实时更新的 matplotlib 图

> ID：15735426
> 
> 赞同：4
> 
> 时间：2013-03-31T22:42:37.970
> 
> 标签：python, matplotlib, gtk3

我想将我的实时绘图应用程序放入一个不错的 gtk3 程序中，到目前为止我得到了这个，但它没有显示窗口。我错过了什么？提前致谢！

```
import serial
import numpy as np

from matplotlib.figure import Figure
from matplotlib.backends.backend_gtk3cairo import FigureCanvasGTK3Cairo as FigureCanvas
from gi.repository import Gtk

class MyWindow(Gtk.ApplicationWindow):
    def __init__(self):

    Gtk.Window.__init__(self, title="Toolbar Example")
        self.set_size_request(700, 500)
    self.box = Gtk.Box(spacing=6, orientation=Gtk.Orientation.VERTICAL)
    self.add(self.box)

    fig = Figure()
    ax = fig.add_subplot(111)
    ax.set_xlim(0, 50)
    ax.set_ylim(0, 20)

    ydata = [0] * 50
    line, = ax.plot(ydata, label='ydata')
    ax.legend()

    f = FigureCanvas(fig)
    self.box.pack_start(f, True, True, 0)

    while True:
        ydata.append(10)
        line.set_data(np.arange(len(ydata)), ydata)
        f.draw()

win = MyWindow()
win.connect("delete-event", Gtk.main_quit)
win.show_all()
Gtk.main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-03T13:09:32.207

使用`canvas.draw()`或`fig.canvas.draw()`更新绘图。

[有关更多详细信息，请参阅 matplotlib](http://gtk3-matplotlib-cookbook.readthedocs.io/en/latest/enteringdata.html)。

# java - Tomcat JDBC 池中没有足够的空闲连接

> ID：15735429
> 
> 赞同：4
> 
> 时间：2013-03-31T22:42:58.650
> 
> 标签：java, mysql, tomcat, jdbc

给定以下 Tomcat JDBC 连接设置：

```
<Resource name="jdbc/pc4"
            maxActive="200"
            maxIdle="100"
            minIdle="50"
            initialSize="50"
            maxWait="15000"
            auth="Container"
            type="javax.sql.DataSource"
            username="....."
            password="....."
            testOnBorrow="true"
            testWhileIdle="true"
            validationQuery="select 1"
            driverClassName="com.mysql.jdbc.Driver"
            factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
            url="jdbc:mysql://server_address/db_name?autoReconnect=true&amp;autoReconnectForPools=true&amp;zeroDateTimeBehavior=convertToNull&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;socketTimeout=300000" /> 
```

以及以下 MySQL 参数：

```
max_connections = 100000
wait_timeout = 31536000
interactive_timeout = 31536000 
```

我希望连接池中始终至少有 50 个空闲连接。

但真正发生的是：服务器启动时有 50 个连接，一段时间后，除了最后一个连接外，所有连接都死掉了。

我的配置有错误吗？

环境：

*   Linux 3.4 64 位
*   开放JDK 7
*   雄猫 7
*   MySQL 5.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:44:27.200

不知道是不是你的问题的原因，但是我在使用MySQL JDBC库的时候，总是有一个问题，如果一个连接打开时间长（超过1小时），会随机导致断线当我再次使用它时管道。

也许在出现这样的错误后池没有重新建立连接（testWhileIdle 的错误？）你可以尝试设置`removeAbandoned`and `removeAbandonedTimeout`，比如 30 分钟的值吗？我知道这是一个长镜头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:46:40.327

我不是 MySQL 专家，但有一段时间使用 Tomcat JDBC 和 Oracle。只要应用程序没有关闭，空闲连接就会一直存在。我会检查 MySQL 中的连接日志并启用 Tomcat JDBC 中的日志记录，以查看谁真正关闭了连接。任何一个都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T00:46:50.837

我更改了配置，情况似乎有所改善，现在连接池中的连接数总是超过 25 个（但仍然不知道为什么）。

```
 <Resource name="jdbc/pc4"
            maxActive="-1"
            maxIdle="-1"
            minIdle="20"
            initialSize="20"
            maxWait="-1"
            auth="Container"
            type="javax.sql.DataSource"
            username="__"
            password="__"
            driverClassName="com.mysql.jdbc.Driver"
            factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
            testOnBorrow="true"
            testWhileIdle="true"
            testOnReturn="true"
            timeBetweenEvictionRunsMillis="60000"
            minEvictableIdleTimeMillis="60000"
            removeAbandoned="false"
            validationQuery="SELECT 1;"
            url="jdbc:mysql://__/__?autoReconnect=true&amp;autoReconnectForPools=true&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;zeroDateTimeBehavior=convertToNull&amp;socketTimeout=72000000" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:56:25.440

这是mysql的问题。正如@Djebel 所说，尝试清理未使用的连接。一个问题，如果您在收到此错误时重新启动mysql服务，它是否开始工作？还要确保在关闭服务器时关闭所有连接。如果 Tomcat 不为您执行此操作，您可以使用 shutdownHook。

# python - 基本 Python 程序所需的帮助

> ID：15735435
> 
> 赞同：-1
> 
> 时间：2013-03-31T22:43:46.073
> 
> 标签：python

当我遇到这个涉及循环的问题时，我正在尝试学习编程并且正在做一些练习。这是问题：

> 创建一个程序来获取用户今年的课程分数（询问用户他们上了多少门课）。告诉他们有多少课不及格，最好的成绩和最差的成绩。

我不知道如何显示最好的标记和最差的标记。这是我得到的：

```
count = 0
total = 0

while True:
    mark = input("Enter a mark (0-100) <-1 to exit> ")
    if mark == -1:
        break
    elif mark < 50:
        count += 1
        total += mark

print "You failed",count,"class(es). " 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:46:36.813

添加另外两个辅助变量：`worstmark`和`bestmark`.

然后在您的循环中，推理输入是否低于 current`worstmark`或高于`bestmark`. 相应地分配值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:15:39.110

希望这会有所帮助：

```
# list of marks
marks = []

# get marks from user
while True:
    mark = input("Enter a mark (0-100) <-1 to exit> ")
    if mark < 0:
        break
    elif mark <= 100:
        marks.append(mark)

# count number of classes failing 
failing = len([f for f in marks if f<50])
best = max(marks)
worst = min(marks)

# check if a least one mark entered 
if (len(marks) > 0):
    print "The number of classes you are failing:",failing
    print "Your best class score:",best
    print "Your worst class score",worst
else:
    print "Your are not taking any classes!" 
```

**演示：**

```
$ python classes.py
Enter a mark (0-100) <-1 to exit> -1
Your are not taking any classes!

$ python classes.py
Enter a mark (0-100) <-1 to exit> 30
Enter a mark (0-100) <-1 to exit> 40
Enter a mark (0-100) <-1 to exit> 50
Enter a mark (0-100) <-1 to exit> 60
Enter a mark (0-100) <-1 to exit> 70
Enter a mark (0-100) <-1 to exit> 80
Enter a mark (0-100) <-1 to exit> -1
The number of classes you are failing: 2
Your best class score: 80
Your worst class score 30 
```

# jquery-mobile - 单击后退按钮后，jQuery 移动菜单项会重复

> ID：15735437
> 
> 赞同：1
> 
> 时间：2013-03-31T22:44:02.197
> 
> 标签：jquery-mobile, jquery

使用 jQuery Mobile，下面的代码可以工作，但是当我单击一个菜单项然后单击“返回”时，我的所有菜单项都已重复/附加等。

```
 $.each(siteData["pages"], function(i,v) {

        $.mobile.activePage.find('[data-role=content]').append('' +
            '<a href="#' +  v["id"] +
            '" data-role="button">' + v["name"] +
            '</a>').trigger('create');

        var newPage = $("<div data-role='page' id='" + v["id"] +
            "'><div data-role=header><a data-iconpos='left' data-icon='back' href='#' data-role='button' " +
            "data-rel='back'>Back</a>" +
            "<h1>Dynamic Page</h1>" +
            "</div>" +
            "<div data-role=content>Stuff here</div>" +
            "</div>");

        // Append the new page info pageContainer
        newPage.appendTo($.mobile.pageContainer);

    }); 
```

我怎样才能阻止这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:48:07.040

我将为您提供上一个问题的解决方案，它会更容易理解

看看工作示例：http: [//jsfiddle.net/Gajotres/3kPTf/](http://jsfiddle.net/Gajotres/3kPTf/)

基本上在添加内容之前，您需要检查该常量是否已经存在。

在您的情况下，每次添加新按钮/页面时，检查该按钮/页面是否已经存在，如下所示：

```
if(!$('#second').length){
     // In this case this code block will execute if button with an id second don't exist
} 
```

这是一个代码示例：

```
$(document).on('pagebeforeshow', '#index', function(){  
    if(!$('#second').length){
        $.mobile.activePage.find('[data-role=content]').append('<a href="#second" data-role="button">Second</a>').trigger('create');

        var newPage = $("<div data-role='page' id='second'><div data-role=header><a data-iconpos='left' data-icon='back' href='#' data-role='button' data-rel='back'>Back</a>" +
                        "<h1>Dynamic Page</h1>" +
                        "</div>" +
                        "<div data-role=content>Stuff here</div>" +
                        "</div>");

        // Append the new page info pageContainer
        newPage.appendTo($.mobile.pageContainer);        
    }
}); 
```

# java - 如何在基于 Spring 的 Web 应用程序中找到性能瓶颈

> ID：15735438
> 
> 赞同：0
> 
> 时间：2013-03-31T22:44:04.050
> 
> 标签：java, spring-mvc, jmeter

我使用 JMeter 编写了一个[性能测试](https://docs.google.com/document/d/1961gOR5ihRsRKOD6sBahwG2aaeB75DUMhLSdYqtEfPU/edit?usp=sharing)，旨在测量加载主页的速度。该网站是使用 Spring MVC 构建的。平均速度为 8462 毫秒，中位数为 8271 毫秒，相当不错。我想确定应用程序中加载主页所需时间最多的组件。做到这一点的最佳技术是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:18:53.007

对于服务器端，使用 Visual VM 来查看发生了什么。您可以看到堆内存、CPU、线程等等。

对于客户端，我建议使用 YSlow 和 Chrome 开发者工具。您将能够看到页面上的每个元素及其加载时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:10:55.420

我认为正确的答案是使用 spring AOP。这里有一个强有力的文章的链接，解释了如何做到这一点。 [http://www.javaworld.com/community/node/376​​3](http://www.javaworld.com/community/node/3763)

如果您的应用程序有性能要求，我建议您将其中一些指标用于生产。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:49:19.110

试试 JVM Monitor [http://www.jvmmonitor.org/](http://www.jvmmonitor.org/)。如果您使用 eclipse 作为 IDE，它有一个 eclipse 插件。我发现它易于安装和使用。它帮助我发现了我正在开发的 Web 应用程序中的瓶颈。

# go - 为什么 Go 的编译器“gc”使用与 C 不同的调用约定？

> ID：15735439
> 
> 赞同：7
> 
> 时间：2013-03-31T22:44:08.520
> 
> 标签：go, cdecl

C 使用 cdecl，我已经研究过并从程序集中调用了它。感觉还不错，为什么要破坏兼容性呢？为什么需要另一个公约？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T22:54:08.463

因为拥有相同的调用约定没有任何优势。即使调用约定相同，Go 代码和 C 代码也不能直接相互调用，因为 Go 使用拆分堆栈。

OTOH，这在 gccgo 中是有意义的，因为 gcc 支持某些架构的 C 拆分堆栈。而且，IIRC，那里的调用约定是因为兼容。（[这里有更多细节](http://golang.org/doc/install/gccgo#C_Interoperability)。）

免责声明：我实际上从未使用过 gccgo。

# python - Python - 更新选项菜单的内容

> ID：15735440
> 
> 赞同：0
> 
> 时间：2013-03-31T22:44:18.837
> 
> 标签：python, user-interface, widget, tkinter, optionmenu

所以我目前遇到的问题是我想根据用户在第一个中选择的内容更新第二个选项菜单。我想我必须在这里使用一个 lambda 函数来使框架更新或其他东西，但我不确定如何做到这一点。到目前为止，这是我的代码：

```
from tkinter import *
import time
class CustomerEntryForm(Frame):
    def __init__(self):

        Frame.__init__(self)
        self.master.title("Customer Entry form:")
        self.pack()

        execute = True
        thirtyMonthList = [4,6,9,11]
        thirtyOneMonthList = [1,2,6,7,8,10,12]
        monthList = []
        dayList = []

        for i in range(1,13):
            monthList.append(i)

        initialMonth = IntVar(self)
        initialMonth.set(monthList[0])
        initialDay = IntVar(self)

        def resetDayOptionMenu():
            for i in range(1,len(dayList)+1):
                dayList.remove(i)

        def setDayList():
            resetDayOptionMenu()
            if initialMonth.get() == 2:
                for i in range(1, 29):
                    dayList.append(i)
                    initialDay.set(dayList[0])
            elif initialMonth.get() in thirtyMonthList:
                for i in range(1, 31):
                    dayList.append(i)
                    initialDay.set(dayList[0])
            elif initialMonth.get() in thirtyOneMonthList:
                for i in range(1, 32):
                    dayList.append(i)
                    initialDay.set(dayList[0])

        self.om2 = OptionMenu(self, initialMonth, *monthList, command = setDayList())
        self.om2.grid(row=0)
        self.om = OptionMenu(self, initialDay, *dayList)
        self.om.grid(row=1)

root = CustomerEntryForm()
root.mainloop() 
```

我很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:29:56.637

它会更容易删除，然后`OptionMenu`在月份更改后添加第二个字段。

像这样：

```
 ...

    thirtyMonthList = [4,6,9,11]

    initialMonth = IntVar(self)
    initialMonth.set(1)
    initialDay = IntVar(self)
    initialDay.set(1)

    def removeDayOptionMenu():
        self.om.destroy()

    def setDayList(event):
        removeDayOptionMenu()
        if initialMonth.get() == 2:
            addDayOptionMenu(range(1,29))
        elif initialMonth.get() in thirtyMonthList:
            addDayOptionMenu(range(1,31))
        else:
            addDayOptionMenu(range(1,32))

    def addDayOptionMenu(dayList):
        self.om = OptionMenu(self, initialDay, *dayList)
        self.om.grid(row=1)

    self.om2 = OptionMenu(self, initialMonth, *range(1,12), command = setDayList)
    self.om2.grid(row=0)
    self.om = OptionMenu(self, initialDay, *range(1,32))
    self.om.grid(row=1) 
```

# php - 图像作为 MySQL 数据库中的链接？

> ID：15735450
> 
> 赞同：0
> 
> 时间：2013-03-31T22:45:41.690
> 
> 标签：php, mysql, echo

我想将图像链接存储到数据库中，然后将它们回显到页面上......这可能吗？我该怎么做？（回显实际图像而不是图像链接）

如您所见，我的代码回显了：$link、$description 和 $title。我想添加另一个与**$imagelink 相呼应的元素。**

```
echo "
<div class=\"pagination\" style=\"display:inline\"><ul style=\"background-color:#\"><li><div   class=\"span3_search\"><h2><a href='$link'><b>$title</b></a></h2><br><img id=\"result_img\"   src=\"img/lvmo.png\" /><br />
$description<br />
<a href='$link'>$link<br /><br /></a><p></div></li></ul></div>
"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T23:09:27.577

# 简短的回答

只需`echo`在`src`属性中输入图片的 URL，图片就会显示出来。

```
<img id="result_img" src="<?php echo $imagelink; ?>" /> 
```

# 工作解决方案：

表设计：

```
images

| id | title      | link                  | imagelink    | description |
------------------------------------------------------------------------
| 1  | Some Title | http://www.google.com | myimage1.png | Some text   |
------------------------------------------------------------------------
| 2  | My Title   | http://www.yahoo.com  | myimage2.png | Some text   | 
```

SQL 查询

```
SELECT title, link, imagelink, description FROM images WHERE id = ? 
```

PHP

```
<?php

$stmt = $mysqli->prepare("SELECT title, link, imagelink, description FROM images WHERE ID = ?");
$stmt->bind_param("i", $ID);
$stmt->execute();
$stmt->bind_result($title,$link,$imagelink,$description);
$stmt->fetch();

?>
<div class="pagination" style="display:inline">
  <ul style="background-color:#">
    <li><div   class="span3_search">
    <h2><a href='<?php echo $link; ?>'><b><?php echo $title; ?></b></a></h2>
    <br />
    <img id="result_img" src="<?php echo $link; ?>" />
    <br />
    <?php echo $description; ?>
    <br />
    <a href='<?php echo $link; ?>'><?php echo $link; ?><br /><br /></a>
    <p></div>
    </li>
  </ul>
 </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:52:55.967

在数据库中存储图像的链接很容易。稍微困难的部分是上传图像，最困难的部分是确保上传的文件和数据库记录同步。您存储的通常是您保存图像的文件名。

编辑：您还可以将图像文件存储在数据库中的 blob 中。这将需要一个程序，该程序采用数据库密钥并在具有正确 mime 类型的响应中返回二进制流。这是更多的工作，并且大多数数据库比文件系统更昂贵且速度更慢。

# python - 为什么 Ruby 的 Float#round 行为与 Python 的不同？

> ID：15735454
> 
> 赞同：13
> 
> 时间：2013-03-31T22:45:56.227
> 
> 标签：python, ruby, rounding, floating-accuracy

“ [Python 中“round”函数的行为](https://stackoverflow.com/questions/15732032/behavior-of-round-function-in-python)”观察到 Python 的 round 浮动如下：

```
>>> round(0.45, 1)
0.5
>>> round(1.45, 1)
1.4
>>> round(2.45, 1)
2.5
>>> round(3.45, 1)
3.5
>>> round(4.45, 1)
4.5
>>> round(5.45, 1)
5.5
>>> round(6.45, 1)
6.5
>>> round(7.45, 1)
7.5
>>> round(8.45, 1)
8.4
>>> round(9.45, 1)
9.4 
```

接受的答案证实这是由于浮点数的二进制表示不准确造成的，这都是合乎逻辑的。

假设 Ruby 的浮点数和 Python 的一样不准确，那么 Ruby 怎么会像人类一样浮动呢？鲁比会作弊吗？

```
1.9.3p194 :009 > 0.upto(9) do |n|
1.9.3p194 :010 >     puts (n+0.45).round(1)
1.9.3p194 :011?>   end
0.5
1.5
2.5
3.5
4.5
5.5
6.5
7.5
8.5
9.5 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T22:54:44.723

**概括**

两种实现都面临[围绕二进制浮点数的相同问题](http://docs.python.org/2.7/tutorial/floatingpoint.html)。

Ruby 通过简单的操作（乘以 10、调整和截断）直接对浮点数进行操作。

Python 使用 David Gay 的复杂算法将二进制浮点数转换为字符串，该算法产生与二进制浮点数完全相同的最短十进制表示。这不会进行任何额外的舍入，它是对字符串的精确转换。

有了最短的字符串表示，Python 使用精确的字符串运算四舍五入到适当的小数位数。浮点到字符串转换的目标是尝试“撤消”一些二进制浮点表示错误（即，如果您输入 6.6，Python 会在 6.6 上舍入，而不是 6.5999999999999996。

此外，Ruby 在舍入模式方面与某些版本的 Python 不同：从零舍入与半偶数舍入。

**细节**

鲁比不作弊。它以与 Python 相同的普通旧二进制浮点数开始。因此，它面临一些相同的挑战（例如 3.35 表示略高于*3.35*，而 4.35 表示略低于*4.35*）：

```
>>> Decimal.from_float(3.35)
Decimal('3.350000000000000088817841970012523233890533447265625')
>>> Decimal.from_float(4.35)
Decimal('4.3499999999999996447286321199499070644378662109375') 
```

查看实现差异的最佳方法是查看底层源代码：

这是 Ruby 源代码的链接：[https ://github.com/ruby/ruby/blob/trunk/numeric.c#L1587](https://github.com/ruby/ruby/blob/trunk/numeric.c#L1587)

Python 源代码从此处开始：http: [//hg.python.org/cpython/file/37352a3ccd54/Python/bltinmodule.c](http://hg.python.org/cpython/file/37352a3ccd54/Python/bltinmodule.c) 并在此处结束：http: [//hg.python.org/cpython/file/37352a3ccd54/Objects/浮动对象.c#l1080](http://hg.python.org/cpython/file/37352a3ccd54/Objects/floatobject.c#l1080)

后者有一个广泛的评论，揭示了两种实现之间的差异：

> 基本思想非常简单：使用 _Py_dg_dtoa 将双精度数转换并舍入为十进制字符串，然后使用 _Py_dg_strtod 将该十进制字符串转换回双精度数。有一个小困难：Python 2.x 期望 round 做从零开始的半舍入，而 _Py_dg_dtoa 做半舍入到偶数的舍入。所以我们需要一些方法来检测和纠正中途的情况。
> 
> 检测：对于某个奇数 k，中间值的形式为 k * 0.5 * 10**-ndigits。或者换句话说，如果一个有理数 x 的 2 值正好是 -ndigits-1 并且它的 5 值至少是 -ndigits，那么它正好在 10**-ndigits 的两个倍数之间。对于 ndigits >= 0，二进制浮点 x 自动满足后一个条件，因为任何这样的浮点都具有非负 5 值。对于 0 > ndigits >= -22，x 需要是 5**-ndigits 的整数倍；我们可以使用 fmod 进行检查。对于 -22 > ndigits，没有中途情况：5**23 需要 54 位来精确表示，因此 0.5 * 10**n 的任何奇数倍数对于 n >= 23 至少需要 54 位精度来精确表示。
> 
> 更正：处理中途情况的一个简单策略是（仅针对中途情况）使用参数 ndigits+1 而不是 ndigits 调用 _Py_dg_dtoa（从而精确转换为十进制），手动舍入结果字符串，然后转换使用 _Py_dg_strtod 返回。

简而言之，Python 2.7 竭尽全力准确地遵循[从零开始舍入的](http://docs.python.org/2.7/library/functions.html#round)规则。

在 Python 3.3 中，准确地遵循从[整数到偶数的](http://docs.python.org/3/library/functions.html#round)规则同样需要很长的时间。

这里有一些关于[_Py_dg_dtoa](http://hg.python.org/cpython/file/37352a3ccd54/Python/dtoa.c)函数的额外细节。Python 将 float 调用为字符串函数，因为它实现了一种算法，该算法在相等的备选方案中给出了最短的字符串表示形式。例如，在 Python 2.6 中，数字 1.1 显示为 1.1000000000000001，但在 Python 2.7 及更高版本中，它只是 1.1。[David Gay 复杂的 dtoa.c 算法](http://www.netlib.org/fp/dtoa.c)在不放弃准确性的情况下给出了“人们期望的结果”。

该字符串转换算法往往会弥补一些困扰二进制浮点数上的任何实现 round() 的问题（即，它较少舍入 4.35 以 4.35 而不是 4.349999999999999964472863211199499070644378662109375 开头）。

这和舍入模式（半偶数舍入与从零舍入）是 Python 和 Ruby 的 round() 函数之间的本质区别。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-31T23:45:34.190

根本区别在于：

**Python：** *转换为十进制然后四舍五入*

**Ruby：**    *四舍五入然后转换为十进制*

Ruby 从原始浮点位字符串对其进行四舍五入，但在使用**10 ^(*n*)对其进行操作之后。**如果不仔细观察，您将无法看到原始二进制值。这些值是不精确的，因为它们是二进制的，而且我们习惯于用十进制书写，而且碰巧我们可能编写的几乎所有十进制小数字符串都没有与基数为 2 的小数字符串完全等价。

特别是，0.45 看起来像这样：

```
01111111101 1100110011001100110011001100110011001100110011001101 
```

在十六进制中，即`3fdccccccccccccd.`

它以二进制重复，第一个未表示的数字是`0xc,`，巧妙的十进制输入转换已将最后一个小数数字精确舍入为`0xd`.

这意味着在机器内部，该值大约大于`0.45`1/2 ^(50)。这显然是一个非常非常小的数字，但足以导致默认*的最近舍入*算法舍入而不是平局决胜局*even*。

Python 和 Ruby 都可能进行多次舍入，因为每个操作都有效地舍入到最低有效位。

我不确定我是否同意 Ruby 做*了人类会做的事情。*我认为 Python 正在逼近*十进制算术的作用。*Python（取决于版本）正在对十进制字符串应用*最近舍入，而 Ruby 正在对计算出的二进制值应用**最近舍*入算法。

请注意，我们可以在这里很清楚地看到人们说 FP 不精确的原因。这是一个相当正确的陈述，但*更正确*的说法是我们根本无法在二进制和大多数小数之间进行准确转换。（有些人会这样做：0.25、0.5、0.75，...）大多数简单的十进制数字都是二进制重复数字，因此我们永远无法存储精确的等效值。但是，我们*可以*存储的每个值都是精确已知的，并且对其执行的所有算术都是精确执行的。如果我们首先用二进制写分数，我们的 FP 算术将被认为是*精确的*。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T00:02:13.707

鲁比不作弊。它只是选择了另一种实现方式[`round`](https://github.com/ruby/ruby/blob/ruby_1_9_3/numeric.c#L1587)。

在 Ruby 中，`9.45.round(1)`几乎等同于`(9.45*10.0).round / 10.0`.

```
irb(main):001:0> printf "%.20f", 9.45
9.44999999999999928946=> nil
irb(main):002:0> printf "%.20f", 9.45*10.0
94.50000000000000000000=> nil 
```

所以

```
irb(main):003:0> puts 9.45.round(1)
9.5 
```

如果我们在 Python 中使用这种方式，我们也会得到 9.5。

```
>>> round(9.45, 1)
9.4
>>> round(9.45*10)/10
9.5 
```

# kineticjs - Kinetic JS 图像集可见

> ID：15735455
> 
> 赞同：0
> 
> 时间：2013-03-31T22:45:59.100
> 
> 标签：kineticjs, drawimage

我正在尝试使用以下脚本在圆圈内添加图像：

```
 ....   
   var rCvisible = false; 
    ...   
    var rC = new Image();
             rCircle;
            rC.onload = function () {
                   rCircle = new Kinetic.Image({
                      image: rC,
                       opacity: 0.3,
                      visible: rCvisible
                   });
              };

         rC.src = '../../Content/images/rotate.png';

 var circle2 = new Kinetic.Circle({
                 drawFunc: function (canvas) {
                     var context2 = canvas.getContext();
                     centerX2 = blueLine2.getPosition().x;
                     centerY2 = greenLine2.getPosition().y;
                     context2.drawImage(rC, centerX2 - 20, centerY2 - 20, 44, 40);
                     context2.beginPath();
                     context2.arc(centerX2, centerY2, this.getRadius(), 0, 2 * Math.PI, false);
                     context2.lineWidth = this.getStrokeWidth();
                     context2.strokeStyle = this.getStroke();
                     context2.stroke();
                 },
                 x: cx + gx,
                 y: cy + gy,
                 radius: 70,
                 stroke: '#00ffff',
                 strokeWidth: 3,
                 opacity: 0.5
             });
.....
  circle2.on('mouseover', function () {
                 document.body.style.cursor = 'pointer';
                 rCvisible = true;
                 layer2.draw();
             });
             circle2.on('mouseout', function () {
                 document.body.style.cursor = 'default';
                 rCvisible = false;
                 layer2.draw();
             }); 
```

我也试过：

```
context2.drawImage(rC, centerX2 - 20, centerY2 - 20, 44, 40, setVisible(false)); 
```

我的目标是隐藏图像，然后在鼠标在圆圈内时显示它。我收到以下错误：

```
'setVisible' is undefined 
```

非常感谢您的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T04:34:26.353

**您可以使用 fillPatternImage 属性来完全执行您需要的 Fill/NoFill**

您可以将任何形状的填充设置为图像而不是颜色。所以，你可以用这样的图像填充你的圈子：

```
 var circle = new Kinetic.Circle({
      x: 100,
      y: 100,
      radius: 70,
      fillPatternImage: "yourImage",    // this is an Image object  --  new Image();
      fillPatternOffset: [-220, 70],
      stroke: '#00ffff',
      strokeWidth: 3,
      opacity:0.5
    }); 
```

您还可以像这样在图像和纯色之间更改形状的填充：

```
 // change the circle’s fill to solid white
      this.setFill("white");

      // change your circle’s fill to an image
      // Note: you must clear the solid fill before applying the image fill
      this.setFill("");
      this.setFillPatternImage(yourImage); 
```

因此，要获得在鼠标悬停时显示图像的效果，您可以设置以下 Kinetic 事件：

```
 circle.on('mouseover touchstart', function() {
      this.setFill("");
      this.setFillPatternImage(img);
      this.setFillPatternOffset(-160, 100);
      layer.draw();
    });

    circle.on('mouseout touchend', function() {
      this.setFill("white");
      layer.draw();
    }); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/WZjtu/](http://jsfiddle.net/m1erickson/WZjtu/)

身体{边距：0px；填充：0px；}

```
 var img=new Image();
  img.onload=function(){
      draw();
  }
  img.src="http://dl.dropbox.com/u/139992952/stackoverflow/KoolAidMan.png";

  function draw() {

    var stage = new Kinetic.Stage({
      container: 'container',
      width: 200,
      height: 200
    });
    var layer = new Kinetic.Layer();

    var circle = new Kinetic.Circle({
      x: 100,
      y: 100,
      radius: 70,
      fillPatternImage: "",
      fillPatternOffset: [-220, 70],
      stroke: '#00ffff',
      strokeWidth: 3,
      opacity:0.5
    });

    circle.on('mouseover touchstart', function() {
      this.setFill("");
      this.setFillPatternImage(img);
      this.setFillPatternOffset(-160, 100);
      layer.draw();
    });

    circle.on('mouseout touchend', function() {
      this.setFill("white");
      layer.draw();
    });

    layer.add(circle);
    stage.add(layer);
  }

</script> 
```

# javascript - 将验证错误文本放在输入字段下方

> ID：15735461
> 
> 赞同：-2
> 
> 时间：2013-03-31T22:46:14.533
> 
> 标签：javascript, jquery, forms, validation, positioning

我不太了解 Javascript，我尝试了所有方法，但找不到解决问题的方法。

我正在使用这个插件进行验证，它运行良好，但只有一个小问题是它写入的错误文本一直显示在输入字段旁边，我希望它显示在输入字段下方。任何人都可以为此修改此脚本吗？非常感谢你 ：）

```
;(function($, window, document, undefined){

    // our plugin constructor
  var SimpleValidate = function(elem, options) {
    this.elem = elem;
    this.$elem = $(elem);
    this.options = options;
    this.metadata = this.$elem.data('plugin-options');
    this.$requiredInputs = this.$elem.find(':input.required');
  };

  // the plugin prototype
  SimpleValidate.prototype = {
    defaults: {
      errorClass: 'error',
      errorText: 'Please fill out this field.',
      emailErrorText: 'Please enter a valid E-mail',
      errorElement: 'strong',
      removeLabelChar: '*',
      inputErrorClass: 'input-error',
      completeCallback: '',
      ajaxRequest: false
    },

    init: function() {
      var self = this;

      // Introduce defaults that can be extended either
      // globally or using an object literal.
      self.config = $.extend({}, self.defaults, self.options, self.metadata);

      // What type of error message is it
      self.errorMsgType = self.config.errorText.search(/{label}/);
      self.emailErrorMsgType = self.config.emailErrorText.search(/{label}/);

      self.$elem.on('submit.simpleValidate', $.proxy(self.handleSubmit, self));

      return this;
    },

    checkField: function(index) {
      var self = this;
      var $field = self.$requiredInputs.eq(index);
      var fieldValue = $.trim($field.val());
      var labelText = $field.siblings('label').text().replace(self.config.removeLabelChar, '');
      var errorMsg = '';

      //Check if it's empty or an invalid email and format the error message
      if(fieldValue === '') {
        errorMsg = self.formatErrorMsg(self.config.errorText, labelText, self.errorMsgType);
        self.hasError = true;
      } else if($field.hasClass('email')) {
        if(!(/^([_a-z0-9-]+)(\.[_a-z0-9-]+)*@([a-z0-9-]+)(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/.test(fieldValue.toLowerCase()))) {
          errorMsg = self.formatErrorMsg(self.config.emailErrorText, labelText, self.emailErrorMsgType);
          self.hasError = true;
        }
      }

      //If there is an error, display it
      if(errorMsg !== '') {
        $field.addClass(self.config.inputErrorClass).after('<' + self.config.errorElement + ' class="' + self.config.errorClass + '">' + errorMsg + '</' + self.config.errorElement + '>');
      }
    },

    formatErrorMsg: function(errorText, labelText, errorMsgType) {
      return (errorMsgType > -1 ) ? errorText.replace('{label}', labelText) : errorText;
    },

    handleSubmit: function(e) {
      var self = this;

      // We are just starting, so there are no errors yet
      this.hasError = false;

      // Reset existing displayed errors
      self.$elem.find(self.config.errorElement + '.' + self.config.errorClass).remove();
      self.$elem.find(':input.' + self.config.inputErrorClass).removeClass(self.config.inputErrorClass);

      // Check each field
      self.$requiredInputs.each($.proxy(self.checkField, self));

      // Don't submit the form if there are errors
      if(self.hasError) { 
        e.preventDefault();
      } else if(self.config.completeCallback !== '') { // If there is a callback
        self.config.completeCallback(self.$elem);

        // If AJAX request
        if(self.config.ajaxRequest) {
          e.preventDefault();
        }
      }
    }
  };

  SimpleValidate.defaults = SimpleValidate.prototype.defaults;

  $.fn.simpleValidate = function(options) {
    return this.each(function() {
      new SimpleValidate(this, options).init();
    });
  };

})( jQuery, window , document ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:53:36.047

当你调用它时，只需传入参数 : `errorElement: 'p'`。默认使用strong，它是一个内联元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:55:19.163

只需更换

```
$field.addClass(self.config.inputErrorClass).after('<' + self.config.errorElement + ' class="' + self.config.errorClass + '">' + errorMsg + '</' + self.config.errorElement + '>') 
```

和：

```
$field.addClass(self.config.inputErrorClass).after('<p><' + self.config.errorElement + ' class="' + self.config.errorClass + '">' + errorMsg + '</' + self.config.errorElement + '></p>') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T22:55:29.703

将此添加到您的 CSS 中：

```
.error { display: block; } 
```

或更改`ErrorElement`为`div`.

```
 new SimpleValidate(this, {errorElement: 'div'}).init(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T22:56:53.957

一个简单的解决方案可能是更改`errorElement: 'strong'`为[块元素](http://www.w3.org/community/webed/wiki/HTML/Training)，例如`errorElement: 'p'`. 您还需要确保[使用 CSS 正确设置元素的样式](http://www.w3.org/community/webed/wiki/CSS/Training)。

如果你想学习 JavaScript，我建议你看看[Eloquent JavaScript](http://eloquentjavascript.net/contents.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T23:02:29.997

不幸的是，我无法重现您的代码，因此我很难准确地说出该怎么做。但是，在我看来，您应该解决这段代码：

```
$field.addClass(self.config.inputErrorClass).after('<' + self.config.errorElement + ' class="' + self.config.errorClass + '">' + errorMsg + '</' + self.config.errorElement + '>'); 
```

如果我理解正确，它会在您输入后立即添加错误消息。也许你可以使用类似的东西：

```
$field.addClass(self.config.inputErrorClass).after('<br>').after('<' + self.config.errorElement + ' class="' + self.config.errorClass + '">' + errorMsg + '</' + self.config.errorElement + '>'); 
```

# django - Fabric 构建后的 Ubuntu 日志创建权限问题

> ID：15735466
> 
> 赞同：0
> 
> 时间：2013-03-31T22:46:55.700
> 
> 标签：django, ubuntu, logging, permissions

我的 Django 应用程序是通过一个 Fabric 脚本构建在 VM Ubuntu 实例上的，该脚本从我的本地开发机器以 root 身份使用 sudo 运行。Fabric 脚本在以下位置设置了一个文件夹：

```
/var/log/FOLDERNAME 
```

并且该应用程序设置为将所有日志数据记录到其中。

但是，在每次构建之后，即使文件夹上存在正确的权限（组和文件夹）（ls -all 确认），日志文件也难以生成，除非我在每次 Fabric 构建后通过 SSH 连接到该框并实际输入：

```
sudo chmod 777 /var/log/FOLDERNAME -Rf 
```

...然后一切正常。

谁能给我一些启示和/或指出我正确的方向来解决这个问题？干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:04:12.260

use [put](http://docs.fabfile.org/en/1.4.1/api/core/operations.html#fabric.operations.put) with `mode` to setup your logfile folder with permissions.

```
put('yourlogfile', 'yourlogfile', mode=0755) 
```

A sidenote: Using `chmod 777` is generally not a good idea. If your VM is running ubuntu your apache runs by default as `www-data`. chown www-data and r-w permissions for this user/group should be enough.

# variables - Db2 - 如何在 db2 中使用 EXECUTE 语句为变量赋值

> ID：15735469
> 
> 赞同：2
> 
> 时间：2013-03-31T22:47:18.207
> 
> 标签：variables, stored-procedures, db2

我正在尝试在 db2 过程中执行查询：

```
CREATE OR REPLACE PROCEDURE TEST (IN indbnm VARCHAR(30), IN intblnm VARCHAR(30))
LANGUAGE SQL
BEGIN
DECLARE statmnt2 VARCHAR(1000); 
DECLARE VAR_COD_TIPO_ARQU CHAR(1);  
DECLARE stmt1 STATEMENT; 

SET statmnt2 = 'SELECT COD_TIPO_ARQU FROM '||indbnm||'.'||intblnm||' FETCH FIRST 1 ROWS ONLY';
PREPARE stmt1 FROM statmnt2;
SET VAR_COD_TIPO_ARQU = EXECUTE (stmt1);
END@ 
```

这会产生以下错误：

```
DB21034E  The command was processed as an SQL statement because it was not a 
valid Command Line Processor command.  During SQL processing it returned:
SQL0206N  "STMT1" is not valid in the context where it is used.  LINE 
NUMBER=33\.  SQLSTATE=42703 
```

`VAR_COD_TIPO_ARQU`动态设置值的正确方法是什么`COD_TIPO_ARQU`？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:34:51.840

问题是您设置执行结果的方式：

```
EXECUTE stmt1 into VAR_COD_TIPO_ARQU ; 
```

这是成功执行的完整代码

```
CREATE OR REPLACE PROCEDURE TEST (IN indbnm VARCHAR(30), IN intblnm VARCHAR(30))
LANGUAGE SQL
BEGIN
DECLARE statmnt2 VARCHAR(1000); 
DECLARE VAR_COD_TIPO_ARQU CHAR(1);  
DECLARE stmt1 STATEMENT; 

SET statmnt2 = 'SELECT COD_TIPO_ARQU FROM '||indbnm||'.'||intblnm||' FETCH FIRST 1 ROWS ONLY';
PREPARE stmt1 FROM statmnt2;
EXECUTE stmt1 into VAR_COD_TIPO_ARQU ;
END@ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:30:13.773

嗨，这是正确的解决方案：

```
SET statmnt = 'SELECT COD_TIPO_ARQU FROM '||indbnm||'.'||intblnm||' FETCH FIRST 1 ROWS ONLY';
PREPARE stmt1 FROM statmnt;

BEGIN 
    DECLARE c1 CURSOR FOR stmt1;
    OPEN c1;
    FETCH c1 into sttmresult;
    CLOSE c1;
END; 
```

泰。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-08T10:57:41.813

我知道这个问题被问到已经有一段时间了，但我发现给定的答案都没有奏效。

@AngocA 的解决方案很接近，但正如@Mani_Swetha 指出的那样，该`EXECUTE`语句由于`SELECT`位而失败。

在网络上搜索和组合解决方案之后，这最终对我有用：

```
CREATE OR REPLACE PROCEDURE TEST (IN indbnm VARCHAR(30), IN intblnm VARCHAR(30))
LANGUAGE SQL
BEGIN
DECLARE statmnt2 VARCHAR(1000); 
DECLARE VAR_COD_TIPO_ARQU CHAR(1);  
DECLARE stmt1 STATEMENT; 

SET statmnt2 = 'set ? = (SELECT COD_TIPO_ARQU FROM '||indbnm||'.'||intblnm||' FETCH FIRST 1 ROWS ONLY)';
PREPARE stmt1 FROM statmnt2;
EXECUTE stmt1 into VAR_COD_TIPO_ARQU ;
END@ 
```

请注意，现在执行的命令是`set`带有`SELECT`内部的语句，而不是纯`SELECT`语句。这就是诀窍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-05T18:58:48.690

感谢@Marcos`EXECUTE... INTO ...`工作。

此外，使用`OUT`参数创建存储过程将允许您访问`EXECUTE... INTO ...`存储过程外部设置的值。

```
CREATE OR REPLACE PROCEDURE ISH.SAMPLEPROC (OUT o_result VARCHAR(5))
specific proc_user_data_retrieval
dynamic result sets 1
reads sql data
language sql
BEGIN
DECLARE stmt varchar(5000) default null;
DECLARE VAR_X VARCHAR(5);
DECLARE stmt_final STATEMENT;
SET stmt = 'SET (?) = ('||'SELECT JOB_ROLE FROM ISH.USER_DATA LIMIT 1'||')';
PREPARE stmt_final FROM stmt;
EXECUTE stmt_final INTO VAR_X;
SET o_result = VAR_X;
END 
```

然后使用调用存储过程`CALL ISH.SAMPLEPROC(?);`

# jquery - 拖动后可排序手风琴不起作用

> ID：15735470
> 
> 赞同：0
> 
> 时间：2013-03-31T22:47:21.373
> 
> 标签：jquery, jquery-ui-accordion, jquery-ui-sortable

我有一个可分类的手风琴，效果很好。我基本上使用这个例子[http://jsfiddle.net/qN7b8/5/](http://jsfiddle.net/qN7b8/5/)。但是，就像在 jsfiddle 中一样，在再次拖放一个面板之后，我需要在一个元素上单击两次以显示其内容。

这是 JavaScript 代码：

```
var stop = false;
$("#accordion h3").click(function(event) {
if (stop) {
    event.stopImmediatePropagation();
    event.preventDefault();
    stop = false;
}
});
$("#accordion").accordion({
header: "> div > h3"
})
.sortable({
axis: "y",
handle: "h3",
stop: function() {
    stop = true;
}
}); 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:33:23.213

替换`stopImmediatePropagation()`为`stopPropagation()` [http://jsfiddle.net/ouadie/RckPm/](http://jsfiddle.net/ouadie/RckPm/)

# android - AndEngine 中三样式网格的 Sprite 表方案

> ID：15735471
> 
> 赞同：1
> 
> 时间：2013-03-31T22:47:24.833
> 
> 标签：android, andengine

我正在使用 Android 和 AndEngine 进行一些游戏创意，但我找不到一个好的平铺方法。

游戏的某些部分将包含在一个矩形网格上。对于网格的每个正方形边或内部正方形，三种“样式”是可能的。为简单起见，我们可以考虑灰色、蓝色和红色。

问题是，当我考虑制作精灵表时，我不知道该怎么做。

这是我的第一个想法的快速（和糟糕的绘图），黑色网格和绿色切割。这个问题是我需要有多达**512 个**版本的线交叉。

![画不好](https://i.stack.imgur.com/VUz8C.png)

有更好的方法吗？我可以在没有精灵表的情况下做到这一点，只画线和填充矩形吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:56:44.347

对不起，我不能完全按照你的想法。但是，我知道您正在处理许多不同样式的正方形和线条。这就是你正确的地方，你不需要任何东西`Sprites`，`AndEngine`有一些类来绘制简单的东西，它比 Sprites 快得多。

**用线条再现图形的基本示例**

```
// first the green lines (they are under the black ones)
Line[] greenLines = new Line[8];
 // from (x0 ,y0) to (x1,y1) with lineWidth=5px
 // the outer square
greenLines[0] = new Line(0, 0, 100, 0, 5, vertexBufferObjectManager);  // top line
greenLines[1] = new Line(100, 0, 100, 100, 5, vertexBufferObjectManager); // right line
greenLines[2] = new Line(100, 100, 0, 100, 5, vertexBufferObjectManager); // bottom line
greenLines[3] = new Line(0, 100, 0, 0, 5, vertexBufferObjectManager);  // left line

 // inner horizontal lines
greenLines[4] = new Line(0, 33, 100, 33, 5, vertexBufferObjectManager);  
greenLines[5] = new Line(0, 66, 100, 66, 5, vertexBufferObjectManager);
 // inner vertical lines
greenLines[6] = new Line(33, 0, 33, 100, 5, vertexBufferObjectManager);  
greenLines[7] = new Line(66, 0, 66, 100, 5, vertexBufferObjectManager);

// now the black lines
 Line[] blackLines = new Line[4];
blackLines[0] = new Line(0, 15, 100, 15, 5, vertexBufferObjectManager);
blackLines[1] = new Line(0, 81, 100, 81, 5, vertexBufferObjectManager);
blackLines[2] = new Line(15, 0, 15, 100, 5, vertexBufferObjectManager);
blackLines[3] = new Line(81, 0, 81, 100, 5, vertexBufferObjectManager);

// now set the color and attach the lines to the scene (green)
for(Line line: greenLines){
    line.setColor(0f,1f,0f);
    myScene.attachChild(line);
}

// now set the color and attach the lines to the scene (black)
for(Line line: blackLines){
    line.setColor(0f,0f,0f);
    myScene.attachChild(line);
} 
```

上面的这个例子应该确实有效。现在您只需要更改它并根据您的需要进行调整。如果你想改变一条线，你可以调用`myLine.setPosition(fromX, fromY, toX, toY);`oh，一个矩形也很简单：`Rectangle rectangle = new Rectangle(50,50,100,100, 5, vertexBufferObjectManager);`对于一个从 (50,50) 开始，宽 100 像素，高 100 像素的矩形。并具有 5 像素的线宽。您可以像设置线条一样设置矩形的颜色。唯一的*问题*是，矩形总是被填充的。如果你想要一个空的矩形，你必须用线条来绘制它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-13T13:05:21.447

```
public Line buildGrid(int pWidth, int pHeight, float pRed, float pGreen, float pBlue){
    Line grid = new Line(0, 0, 0, pHeight);
    grid.setColor(0.5f, 0.5f, 0.5f);
    int cont = 0;

    while(cont < pWidth){
            cont += 10;
            grid.attachChild(new Line(cont, 0, cont, pHeight));
            grid.getLastChild().setColor(pRed, pGreen, pBlue);                     
    }

    cont = 0;
    while (cont < pHeight){
            cont += 10;
            grid.attachChild(new Line(0, cont, pWidth, cont));
            grid.getLastChild().setColor(pRed, pGreen, pBlue);
    }

    return grid;
} 
```

# iphone - 如何在 UIViewController 中“启用”上下滚动

> ID：15735473
> 
> 赞同：5
> 
> 时间：2013-03-31T22:47:36.627
> 
> 标签：iphone, ios6, uiviewcontroller

好的，我有一个导航控制器，它管理一个向下钻取表视图，当它到达末尾时它会显示一个产品列表，当你选择一个产品时它会显示一个详细视图（UiViewController）。

我想知道的是如何在该详细视图中“启用”上下滚动，以便我可以向用户显示有关产品的完整信息。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T15:48:32.303

得到了答案。如果您使用 Storyboards（像我一样），您必须转到 UiViewController 的属性检查器并将尺寸参数更改为自由格式，然后选择 UIViewController 的 UIView 并在尺寸检查器中选择您想要的任何宽度或高度，最后抓取来自对象库的滚动视图并将其插入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T22:50:12.153

您需要`UIScrollView`在视图控制器的视图中添加一个，并将其设置为`contentSize`.

# knockout.js - 淘汰赛 JS：选择/下拉菜单未呈现

> ID：15735478
> 
> 赞同：1
> 
> 时间：2013-03-31T22:49:17.667
> 
> 标签：knockout.js

知道为什么以下示例中的 select 没有在 HTML 中呈现。没有发现错误，applyBindings() 似乎工作正常，但下拉菜单不显示在 html 中...

这是JS代码：

```
$(document).ready(function () {
    try
    {
       var mainVM = new MainViewModel();                        
       mainVM.CategoriesVm.Init(document.getElementById("divCategoriesView"));
       mainVM.CategoriesVm.BindViewModel();    
       ko.applyBindings(mainVM.CategoriesVm, mainVM.CategoriesVm.DomSection);
       alert('finished');
    }
    catch(err)
    {
        alert(err);
    }
});

function MainViewModel() {    
   var self = this;
   this.CategoriesVm = new CategoriesViewModel();    
   return self;
};

function CategoriesViewModel() {
   var self = this;

   self.$type = 'CategoriesViewModel';
   self.Categories = ko.observableArray();
   self.selectedCategory = ko.observable();
   self.DomSection = null;

   this.Init = function (domSectionElement) {
    self.DomSection = domSectionElement;
   };

var GetJsObject = function (obj) {
    if (obj && ObjectTypeChecker.IsJsonObject(obj)) {
        obj = $.parseJSON(obj);
    }

    if (obj && obj.d) {
        obj = eval(obj.d);
    }

    return obj;
};   

this.BindViewModel = function (jsonCategories) {
    try {
        var data = [{
            CategoryID: 1,
            CategoryName: "red"
        }];
        self.Categories(data);

        ko.mapping.fromJS(self.Categories, self);
    } catch (err) {
        alert(err);
    }
  };

}; 
```

这是HTML：

```
<div id="divMainView">
    <div id="divCategoriesView" data-bind="with: MainViewModel.CategoriesViewModel">
        <select ID="ddlProductCategory" data-bind="options: Categories, optionsValue: CategoryID, optionsText: CategoryName, value: selectedCategory">
        </select>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:44:17.373

见jsfiddle：http: [//jsfiddle.net/dQ3uW/](http://jsfiddle.net/dQ3uW/)

```
<select ID="ddlProductCategory" data-bind="options: Categories, optionsValue: function(item){ return item.CategoryID; }, optionsText: function(item){ return item.CategoryName; }, value: selectedCategory">
</select> 
```

我不明白这段代码

```
data-bind="with: MainViewModel.CategoriesViewModel" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:13:15.013

我确实用我想要的结构解决了这个问题。但是，看起来**必须创建根视图模型并将其分配给全局上下文变量**；我认为这不是特别好的主意，但如果有任何其他方法可以解决这个问题，请告诉我......

这是最终代码。HTML：

```
<div id="divMainView">
    <div id="divCategoriesView" data-bind="with: mainVM.CategoriesVm">
        <select ID="ddlProductCategory" data-bind='options: Categories, optionsValue: "CategoryID", optionsText: "CategoryName", value: "selectedCategory"'>
        </select>
    </div>
</div> 
```

JS：

```
 mainVM = new MainViewModel();   
    $(document).ready(function () {
    try
    {                              
       mainVM.CategoriesVm.Init(document.getElementById("divCategoriesView"));
       mainVM.CategoriesVm.BindViewModel();    
       ko.applyBindings(mainVM.CategoriesVm, mainVM.CategoriesVm.DomSection)
       alert('finished');
    }
    catch(err)
    {
        alert(err);
    }
});

function MainViewModel() {    
   var self = this;
   this.CategoriesVm = new CategoriesViewModel();    
   return self;
};

function CategoriesViewModel() {
   var self = this;

   self.$type = 'CategoriesViewModel';
   self.Categories = ko.observableArray();
   self.selectedCategory = ko.observable();
   self.DomSection = null;

   self.Init = function (domSectionElement) {
    self.DomSection = domSectionElement;
   };

    var GetJsObject = function (obj) {
        if (obj && ObjectTypeChecker.IsJsonObject(obj)) {
            obj = $.parseJSON(obj);
        }

        if (obj && obj.d) {
            obj = eval(obj.d);
        }

        return obj;
    };   

    this.BindViewModel = function (jsonCategories) {
        try {
            var data = [{
                    CategoryID: 1,
                    CategoryName: "red"
                },
                {
                    CategoryID: 2,
                    CategoryName: "blue"}];
            self.Categories(data);

            ko.mapping.fromJS(self.Categories, self);
        } catch (err) {
            alert(err);
        }
  };

}; 
```

# php - 用php中的另一个数组值替换一个数组键

> ID：15735480
> 
> 赞同：5
> 
> 时间：2013-03-31T22:49:26.077
> 
> 标签：php, arrays

我想将表单字段映射到数据库字段。

我有两个数组..

一个数组是**数据**，包含表单字段 id 作为键和表单字段值作为值。

```
$data = array("inputEmail"=>"someone@somewhere.com","inputName"=>"someone"... etc 
```

我还有一个打算用作**地图的数组。**该数组的键与表单字段相同，值是数据库字段名称。

```
$map = array("inputEmail"=>"email", "inputName"=>"name"... etc 
```

我想要做的是迭代数据数组，并且数据键与映射键匹配的位置为数据数组分配一个新键，该键是映射数组的值。

```
$newArray = array("email"=>"someone@somewhere.com", "name"=>"someone"...etc 
```

我的问题是如何？我尝试了很多不同的方法，现在我完全迷失了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T22:59:06.687

使用 foreach 循环可以很好地做到这一点

```
foreach( $data as $origKey => $value ){
  // New key that we will insert into $newArray with
  $newKey = $map[$origKey];
  $newArray[$newKey] = $value;
} 
```

更简洁的方法（消除用于澄清的变量）

```
foreach( $data as $origKey => $value ){
  $newArray[$map[$origKey]] = $value;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-26T15:21:15.953

如果你想用另一个数组的值替换一个数组的键，解决方案是[`array_combine`](http://www.php.net/manual/en/function.array-combine.php)

```
<?php
$a = array('green', 'red', 'yellow');
$b = array('avocado', 'apple', 'banana');
$c = array_combine($a, $b);

print_r($c);
?> 
```

print_r 输出

```
Array
(
    [green]  => avocado
    [red]    => apple
    [yellow] => banana
) 
```

# mysql - SELECT WHERE 现在和时间戳之间的差异小于 24 小时

> ID：15735483
> 
> 赞同：5
> 
> 时间：2013-03-31T22:49:48.513
> 
> 标签：mysql, sql, timestamp, where

我想做一个 MySQL 选择，其中 NOW() 和表中的时间戳之间的差异小于特定时间段，例如 24 小时。我试过做减法，但没有奏效，而且 DateDiff 不是我想要的。必须有一个简单的方法来做到这一点，但我无法弄清楚。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:54:27.687

```
SELECT
   timestampdiff(HOUR, yourtimestampcolumn, now() ) as hours_since,
   *
FROM 
   Your_table 
WHERE 
   timestampdiff(HOUR, yourtimestampcolumn, now() ) < 24 
```

参考 [https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)

# c# - 使用 NodaTime 正确处理开放时间

> ID：15735484
> 
> 赞同：16
> 
> 时间：2013-03-31T22:49:49.420
> 
> 标签：c#, .net, datetime, nodatime

我目前正在编写一个相当简单的应用程序来处理企业的开/关时间，并且在试图弄清楚如何正确存储信息时遇到了严重的困难。

我们的大部分关键功能都严重依赖于让时间绝对完美，所以显然我希望以最好的方式完成工作！

此外，数据将由用户输入，因此如果底层表示稍微复杂一些（例如，使用 TimeSpan 来解释午夜过后的营业时间），这需要对用户不可见。

我需要首先存储业务的营业时间，按星期几，以及与之关联的时区，例如：

```
- M:  1000 - 2330
- T:  1000 - 0030
- W:  1900 - 0300
- Th: 2000 - 0300
- F:  2000 - 0800
- Sa: 1000 - 0500
- Su: 1000 - 2300 
```

我目前认为存储它的最佳方法是使用这样的类：

```
public class OpeningHours
{
    ZonedDateTime OpeningTime { get; set; }
    Period durationOpen { get; set; }

    // TODO: add a method to calculate ClosingTime as a ZonedDateTime
} 
```

然而，这里有两个主要的并发症：

*   我不想存储 ZonedDateTime 的年、月或日期部分——我只关心 DayOfWeek。

    当然，我可以将每个值存储为 1970 年 1 月 1 日之后的第一个星期一/星期二等，但这似乎很老套，而且很明显是错误的——正如 NodaTime 的作者在谈到 BCL DateTime 的限制时非常正确地解释了**[这里](http://noda-time.blogspot.co.uk/2011/08/what-wrong-with-datetime-anyway.html)**执行。我也有一种感觉，如果稍后我们尝试对日期进行任何算术运算，最终可能会出现奇怪的古怪错误。

*   无论如何，用户将不得不输入 ClosingTime。客户端我想我可以做一些简单的事情，比如总是假设ClosingTime是在OpeningTime之前的第二天，但同样，它并不完美，也没有考虑到可能开放超过24小时的地方（例如超级市场）

我考虑过的另一件事是使用带有小时/天的表格，并让人们突出显示一周中的几个小时来选择开放时间，但您仍然会遇到同样的问题，只想存储 OpenTime 的 DayOfWeek 部分。

任何建议都将不胜感激，在过去的 6 个小时里阅读我们人类代表时间的可笑愚蠢的方式让我有点筋疲力尽！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-31T22:57:51.607

出于以下几个原因，我强烈考虑使用`LocalTime`而不是：`ZonedDateTime`

*   你不是试图代表一个单一的*时刻*；这些是自然重复的模式（没有关联的日期）
*   您不是要应对商店在不同时区不同营业时间的情况；您可能希望将时区与每个商店关联*一次*，然后您可以随时应用该时区

所以我会有这样的东西（只显示数据成员；你如何整理行为是另一回事）：

```
public class StoreOpeningPeriod
{
    IsoDayOfWeek openingDayOfWeek;
    LocalTime openingTime;
    LocalTime closingTime;
} 
```

请注意，这与您显示的原始数据*完全一致，这始终是一个好兆头 - 您既不会添加也不会丢失信息，而且它可能是一种方便的形式。*

如果收盘时间早于开盘时间，则假定它已经过了午夜——如果这种情况相对不常见，您可能希望为用户添加一个确认框，但在代码中肯定很容易发现和处理。

# javascript - 如何让 Grunt 在运行另一个任务之前等待一个任务完成？

> ID：15735485
> 
> 赞同：10
> 
> 时间：2013-03-31T22:50:00.670
> 
> 标签：javascript, node.js, asynchronous, gruntjs

这是我的[Gruntfile](http://pastebin.com/DhYTqGeg)和[输出](http://pastebin.com/DaZceqS6)。

正如您在输出中看到的，有几个与异步任务相关的问题：

1.  `imagemin`被调用，下一个直接向前。这使得它的输出出现在任务的末尾，相当混乱；
2.  `build`，这是一个自定义任务，**在**完成命令后使用`var done = this.async()`和调用；`done()`但是，这只有在我单独运行任务时才能正常工作；与其他任务一起运行它也会使其异步运行；
3.  `build`稍后运行，没有什么要测试的，因此`jasmine`是无用的。

有没有办法解决这种行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-20T03:05:39.417

我相信你的问题在于这个任务：

```
grunt.registerTask('prepare-dist', 'Creates folders needed for distribution', function() {
            var folders = ['dist/css/images', 'dist/imgs/icons'];
            for (var i in folders) {
                    var done = this.async();
                    grunt.util.spawn({ cmd: 'mkdir', args: ['-p', folders[i]] }, function(e, result) {
                            grunt.log.writeln('Folder created');
                            done();
                    });
            }
    }); 
```

如果您有多个文件夹，则 async() 和 done() 都将被多次调用。异步被实现为一个简单的标志（真/假），并且意味着被调用一次。第一个 done() 调用允许任何后续任务运行。

有很多方法可以将调用移至异步并完成循环。快速谷歌搜索类似的东西：`nodejs how to callback when a series of async tasks are complete`会给你一些额外的选择。几个快速（和肮脏）的例子：

```
// Using a stack
(function() {
    var work = ['1','2','3','4','5']

    function loop(job) {
        // Do some work here
        setTimeout(function() {
            console.log("work done");

            work.length ? loop(work.shift()) : done();
        }, 500);
    }

    loop(work.shift());

    function done() {
        console.log('all done');
    }
})(); 
```

- 或者 -

```
// Using a counter (in an object reference)
(function() {
    var counter = { num: 5 }

    function loop() {
        // Do some work here
        setTimeout(function() {
            --counter.num;

            console.log("work done");

            counter.num ? loop() : done();
        }, 500);
    }

    loop();

    function done() {
        console.log('all done');
    }
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T11:10:35.057

正如您在[Grunt 文档](https://gruntjs.com/api/inside-tasks#this.async)中所读到的：

> 如果任务是异步的，则必须调用 this.async 方法来指示 Grunt 等待。它返回一个“完成”函数的句柄，当任务完成时应该调用该函数。

一个简短的例子类似于：

```
// Tell Grunt this task is asynchronous.
var done = this.async();

// Your async code.
fetchData(url).then( data => {
    console.log(data);
    done();
}).catch( error => {
    console.err(error);
    done(false); // false instructs Grunt that the task has failed
}); 
```

# android - 从图库中选择图像后，Android 应用程序崩溃

> ID：15735495
> 
> 赞同：0
> 
> 时间：2013-03-31T22:51:27.287
> 
> 标签：android, image, select, gallery

我使用以下代码让用户从他的图库中选择图像。但是在选择一个 img 后，应用程序崩溃了。

```
Intent i = new Intent(
        Intent.ACTION_PICK,
        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

startActivityForResult(i, RESULT_LOAD_IMAGE); 
```

这是崩溃的日志：

```
04-01 00:58:53.210: E/AndroidRuntime(26970): FATAL EXCEPTION: main
04-01 00:58:53.210: E/AndroidRuntime(26970): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://media/external/images/media/21931 flg=0x1 }} to activity {de.arvidg.exampleactionbartabs/de.arvidg.exampleactionbartabs.AddNewMission}: java.lang.NullPointerException
04-01 00:58:53.210: E/AndroidRuntime(26970):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3310)
04-01 00:58:53.210: E/AndroidRuntime(26970):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3353)
04-01 00:58:53.210: E/AndroidRuntime(26970):    at android.app.ActivityThread.access$1100(ActivityThread.java:145)
04-01 00:58:53.210: E/AndroidRuntime(26970):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1259)
04-01 00:58:53.210: E/AndroidRuntime(26970):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 00:58:53.210: E/AndroidRuntime(26970):    at android.os.Looper.loop(Looper.java:137)
04-01 00:58:53.210: E/AndroidRuntime(26970):    at android.app.ActivityThread.main(ActivityThread.java:4978)
04-01 00:58:53.210: E/AndroidRuntime(26970):    at java.lang.reflect.Method.invokeNative(Native Method)
04-01 00:58:53.210: E/AndroidRuntime(26970):    at java.lang.reflect.Method.invoke(Method.java:511)
04-01 00:58:53.210: E/AndroidRuntime(26970):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
04-01 00:58:53.210: E/AndroidRuntime(26970):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
04-01 00:58:53.210: E/AndroidRuntime(26970):    at dalvik.system.NativeStart.main(Native Method)
04-01 00:58:53.210: E/AndroidRuntime(26970): Caused by: java.lang.NullPointerException
04-01 00:58:53.210: E/AndroidRuntime(26970):    at de.arvidg.exampleactionbartabs.AddNewMission.onActivityResult(AddNewMission.java:131)
04-01 00:58:53.210: E/AndroidRuntime(26970):    at android.app.Activity.dispatchActivityResult(Activity.java:5192)
04-01 00:58:53.210: E/AndroidRuntime(26970):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3306)
04-01 00:58:53.210: E/AndroidRuntime(26970):    ... 11 more 
```

这是发生异常的onActivityResult。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK
            && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);

        cursor.close();

        ImageView imageView = (ImageView) findViewById(R.id.chosenpictureview);
        imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));

        filepath = picturePath;
        thread.setPathToOurFile(picturePath);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:13:02.010

`onActivityResult()`您也可以直接从（您使用 获得的）打开所选图像，`Uri selectedImage`而`getData()`不是使用`MediaStore`查询。

* * *

**相机或画廊**：

如果您希望允许用户从图库或相机中进行选择，请务必查看此帖子：[允许用户选择相机或图库以获取图像](https://stackoverflow.com/questions/4455558/allow-user-to-select-camera-or-gallery-for-image/12347567#12347567)

# menu - 如何使用 CSS 更改标题菜单 DIV 的大小？

> ID：15735497
> 
> 赞同：0
> 
> 时间：2013-03-31T22:51:38.163
> 
> 标签：menu, header, size

我添加/替换/删除什么代码来改变[marketbot.net的大小](http://marketbot.net)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:57:21.277

```
 #header {
            background: #FFFFFF
            width: 100%;
            padding: 30px 0px;
            position:relative;
            margin-top: 80px;
            margin-bottom: 5px;
        } 
```

我没有完全理解你的问题，但我试图回答它。

你需要编辑

```
 #header {
        background: #FFFFFF
        width: 100%;
        padding: 20px 0px;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:04:52.050

Are you talking about the global navigation menu or the slider that is on the page? The slider looks like it has a margin problem (in both I.E. 8 and Google Chrome).

I adjusted the css class named content-top to the following, so it isn't overflowing into the header:

```
.content-top
{
  position:relative;
  margin-top: 80px;
  margin-bottom: 5px;
} 
```

After I made the adjustments, it looks somewhat cleaner in the slider and header divs.

# makefile - 如果我只更改一个文件，为什么 makefile 会重新编译整个文件集？

> ID：15735504
> 
> 赞同：0
> 
> 时间：2013-03-31T22:53:05.373
> 
> 标签：makefile

这是我的makefile ...为什么即使只有一个更改，它也会重新编译所有源？

```
CC = g++
CFLAGS = -w -g -c
LIBS = -lm

EXEC = DFMS_PDS_L2_to_L3

.PHONY : clean tgz wdtgz

HOMEDIR = ../
BIN = bin
SRC = src
OBJ = obj

SRCFILES := $(wildcard $(SRC)/*.cc)
OBJFILES := $(patsubst %.cc, $(OBJ)/%.o, $(notdir $(SRCFILES)))
OBJS := $(patsubst %.cc, %.o, $(notdir $(SRCFILES)))

# Executable Targets
all:    $(EXEC)

$(EXEC) : $(OBJS)
$(CC) $(LIBS) $(OBJFILES) -o $(BIN)/$(EXEC)

# Dependencies
%.o: $(SRC)/%.cc
$(CC) $< $(CFLAGS) -o $(OBJ)/$@

# Miscellaneous Targets 
clean:
rm -rf $(BIN)/$(EXEC) obj/*.o *~

tgz:
tar cvzf $(HOMEDIR)cppbuild.tgz $(HOMEDIR)cppbuild --exclude=data
cp $(HOMEDIR)cppbuild.tgz $(HOMEDIR)cppbuild.tgz.allow

wdtgz:
tar cvzf $(HOMEDIR)cppbuild.tgz $(HOMEDIR)cppbuild
cp $(HOMEDIR)cppbuild.tgz $(HOMEDIR)cppbuild.tgz.allow 
```

我正在使用 gnu make 在 Linux 3.0 上运行

它在 $(EXEC) 定义中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T23:08:17.907

我的猜测是，即使*没有任何*更改，这也会重新编译所有源代码。

看看这两条规则：

```
$(EXEC) : $(OBJS)
$(CC) $(LIBS) $(OBJFILES) -o $(BIN)/$(EXEC)

%.o: $(SRC)/%.cc
$(CC) $< $(CFLAGS) -o $(OBJ)/$@ 
```

假设`foo.cc`是唯一的源文件。第一条规则说目标依赖于`foo.o`，但实际上是从 构建它`obj/foo.o`。可以调用第二个来构建`foo.o`（第一个规则要求），但它实际上是构建`obj/foo.o`. 因此，第一次运行 Make 时，它​​将正确构建可执行文件（和`obj/foo.o`）。但此后每次，Make 都会看到它`foo.o`不存在并尝试构建它并重新构建可执行文件。

解决方案是重写规则，以便它们构建并依赖于它们声称的内容：

```
all: $(BIN)/$(EXEC)

$(BIN)/$(EXEC) : $(OBJFILES)
$(CC) $(LIBS) $^ -o $@

$(OBJ)/%.o: $(SRC)/%.cc
$(CC) $< $(CFLAGS) -o $@ 
```

# c# - 具有实体框架代码优先导航属性的 ASP.Net MVC

> ID：15735505
> 
> 赞同：1
> 
> 时间：2013-03-31T22:53:07.397
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4, ef-code-first, navigation-properties

我有一个名为`Service`如下的实体：

```
public class Service
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int serviceId { get; set; }
    public string name { get; set; }
    public string description { get; set; }

    public ServiceCategory category { get; set; }
} 
```

类别由用户通过下拉列表选择，该下拉列表包含 db 中可用类别的 id 和名称。然后 ViewModel 会将该 id 返回给我以保存。到目前为止，我一直这样做的方式是转到我的存储库，获取 id 与视图中所选类别匹配的类别对象，然后分配它。这当然需要往返于数据库。

我想知道，既然我已经有了 id，有没有更好的方法可以在我不去数据库的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:02:21.107

将您的代码修改为

```
public class Service
{
[Key]
[DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
public int serviceId { get; set; }
public int ServiceCategoryId {get; set;}  // Added
public string name { get; set; }
public string description { get; set; }

public ServiceCategory ServiceCategory { get; set; }
} 
```

并填写`ServiceCategoryId`。

# java - Maven问题（Eclipse Juno）

> ID：15735506
> 
> 赞同：3
> 
> 时间：2013-03-31T22:53:24.413
> 
> 标签：java, xml, eclipse, jakarta-ee, maven

我是 maven 新手，我在 eclipse 中使用 maven 作为一个很好的开始，然后突然 eclipse 崩溃了，发现 xml 文件无法打开，告诉我这个：

```
 Plug-in org.eclipse.wst.xml.ui was unable to load class org.eclipse.wst.xml.ui.internal.tabletree.XMLMultiPageEditorPart.

org.eclipse.core.runtime.CoreException: Plug-in org.eclipse.wst.xml.ui was unable to load class org.eclipse.wst.xml.ui.internal.tabletree.XMLMultiPageEditorPart.
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:176)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:273)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:269)
    at org.eclipse.ui.internal.registry.EditorDescriptor.createEditor(EditorDescriptor.java:235)
    at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:283)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.createPart(CompatibilityPart.java:249)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityEditor.createPart(CompatibilityEditor.java:60)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:286)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:857)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:837)
    at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:318)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
    at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:889)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:623)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
    at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1042)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer$1.handleEvent(LazyStackRenderer.java:67)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
    at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
    at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
    at org.eclipse.swt.widgets.Display.syncExec(Display.java:4687)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:187)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
    at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
    at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
    at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
    at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
    at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:57)
    at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
    at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:171)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.hidePart(PartServiceImpl.java:1075)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.hidePart(PartServiceImpl.java:1029)
    at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.closePart(StackRenderer.java:1015)
    at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.access$9(StackRenderer.java:997)
    at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer$9.close(StackRenderer.java:890)
    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1810)
    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:275)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.wst.xml.ui (746).
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:340)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
    ... 86 more
Caused by: org.osgi.framework.BundleException: The activator org.eclipse.wst.xml.ui.internal.XMLUIPlugin for bundle org.eclipse.wst.xml.ui is invalid
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:172)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    ... 98 more
Caused by: java.lang.NoClassDefFoundError: org/eclipse/ui/editors/text/templates/ContributionTemplateStore
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:167)
    ... 104 more
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.ui.editors (644).
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:167)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:167)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.hibernate.eclipse.jdt.ui.internal.HQLExpressionCompilerParticipant.isActive(HQLExpressionCompilerParticipant.java:56)
    at org.eclipse.jdt.internal.core.JavaModelManager$CompilationParticipants.getCompilationParticipants(JavaModelManager.java:328)
    at org.eclipse.jdt.internal.core.builder.JavaBuilder.initializeBuilder(JavaBuilder.java:587)
    at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:167)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:239)
    at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:292)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:295)
    at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:351)
    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:374)
    at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:143)
    at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:241)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: org.osgi.framework.BundleException: Exception in org.eclipse.ui.internal.editors.text.EditorsPlugin.start() of bundle org.eclipse.ui.editors.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    ... 67 more
Caused by: org.eclipse.swt.SWTException: Invalid thread access
    at org.eclipse.swt.SWT.error(SWT.java:4361)
    at org.eclipse.swt.SWT.error(SWT.java:4276)
    at org.eclipse.swt.SWT.error(SWT.java:4247)
    at org.eclipse.swt.widgets.Display.error(Display.java:1258)
    at org.eclipse.swt.widgets.Display.checkDevice(Display.java:764)
    at org.eclipse.swt.widgets.Display.disposeExec(Display.java:1203)
    at org.eclipse.jface.resource.ColorRegistry.hookDisplayDispose(ColorRegistry.java:268)
    at org.eclipse.jface.resource.ColorRegistry.<init>(ColorRegistry.java:123)
    at org.eclipse.jface.resource.ColorRegistry.<init>(ColorRegistry.java:106)
    at org.eclipse.ui.internal.themes.WorkbenchThemeManager.<init>(WorkbenchThemeManager.java:98)
    at org.eclipse.ui.internal.themes.WorkbenchThemeManager.getInstance(WorkbenchThemeManager.java:58)
    at org.eclipse.ui.internal.Workbench.getThemeManager(Workbench.java:2969)
    at org.eclipse.ui.internal.editors.text.EditorsPlugin.start(EditorsPlugin.java:214)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 73 more 
```

当我尝试创建新的maven项目时，我无法打开旁边的xml文件java包源文件夹消失了这是在每个新创建的项目中，也在当前项目中提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:08:27.510

打开原始下载的zip并覆盖plugins目录中所有以开头的jar文件，`org.eclipse.m2e.*`问题就会消失。

# debugging - 调试无效的语法错误 iPython

> ID：15735512
> 
> 赞同：0
> 
> 时间：2013-03-31T22:54:03.643
> 
> 标签：debugging, ipython

执行程序后，我收到以下语法错误，谢谢 thkang from [this post](https://stackoverflow.com/questions/15732805/choose-largest-odd-number-python)

```
You entered:  ./#
Expanded to:  ./#
=================
File "./largestoddxyz.py", line 43
else: #x and z are even
   ^
SyntaxError: invalid syntax 
```

这是代码：
我是使用 Python 的新手，并试图解决这个问题，但不幸的是，我没能做到。希望这里有人可以帮助我。

```
#!/usr/bin/env python
# This program exmamines variables x, y, and z 
# and prints the largest odd number among them

import sys

x,y,z = map(int,sys.argv[1:4])

if x%2 != 0:
  if y%2 != 0:
    if z%2 != 0:
      if x > y and x > z: #x is the biggest odd
        print 'x is the biggest odd ' and x
      elif y > z and y > x: #y is the biggest odd
        print 'y is the biggest odd ' and y
      elif z > x and z > y: #z is the biggest odd
        print 'z is the biggest odd ' and z

    else: #z is even
      if x > y: #x is the biggest odd
        print 'x is the biggest odd ' and x
      else: #y is the biggest odd
        print 'y is the biggest odd ' and y

  else: #y is even
      if z%2 != 0: #z is odd
        if x > z: #x is the biggest odd
          print 'x is the biggest odd ' and x
        else: #z is the biggest odd
          print 'z is the biggest odd ' and z
      else: #y,z are even and x is the biggest odd
        print 'x is the biggest odd ' and x

else: #x is even
  if y%2 != 0 and z%2 != 0: #y,z is odd
      if y > z: #y is the biggest odd
        print 'y is the biggest odd ' and y
      else: #z is the biggest odd
        print 'z is the biggest odd ' and z
  else: #x and y are even
    if z%2 != 0: #z is the biggest odd
      print 'z is the biggest odd ' and z
  else: #x and z are even
    if y%2 != 0: #y is odd
      if z%2 = 0: #z is even
        print 'y is the biggest odd ' and y

print 'finished' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:57:27.550

缩进错误；笔记

```
 else: #x and y are even
    if z%2 != 0: #z is the biggest odd
      print 'z is the biggest odd ' and z
  else: #x and z are even 
```

你想缩进第二个`else`和它下面的所有东西。您可能想要运行[`pep8`](https://pypi.python.org/pypi/pep8)以验证一切是否正常，即您使用正确的间距并且不要混合制表符和空格字符。

此外，在行

```
if z%2 = 0: #z is even 
```

你想要的是比较`==`，而不是分配`=`。

# flash - 在 Actionscript 2.0 中触发键盘事件

> ID：15735514
> 
> 赞同：1
> 
> 时间：2013-03-31T22:54:08.923
> 
> 标签：flash, actionscript, actionscript-2

我用它来触发 AS3 中的键盘事件：

```
dispatchEvent(new KeyboardEvent(KeyboardEvent.KEY_UP,true,false,_charcode,_keycode)); 
```

但我似乎无法弄清楚如何在 AS2 中实现相同的目标，这甚至可能吗？我必须向外部 swf 触发一个关键事件，但我没有 swf 的来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:13:42.690

AS1/2 中没有原生的事件调度系统。AS1/2 使用回调或处理程序。[您可以使用http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00002329.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00002329.html)`EventDispatcher`类编写自己的调度系统，但您需要通过自己的代码编写火灾事件。

1 方式：单击 btn 并在操作窗口中写入处理程序：

```
on (press) {
    // do smth or dispatchEvent
} 
```

2方式：创建按钮，选择它们，在属性面板中设置实例名称（例如`btnName`），在时间轴框架中使用您的按钮选择并在操作窗口中写入：

```
btnName.onPress = function () {
    // do smth or dispatchEvent
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:24:23.293

在 AS2 中调度事件与 AS3 有所不同，因为 AS3 中的大多数类已经扩展了 EventDispatcher 类，但是在 AS2 中，情况并非如此。

对于 AS2，如果不能直接扩展 EventDispatcher 类，有些人选择在创建的类中创建事件调度器对象：

```
public class Magic extends MovieClip{
    public var _dispatcher:EventDispatcher;

....
.... 
```

对于任何事件，该事件最终都会转换为字符串，因此如果您有正确的字符，您可以调度任何事件，而无需使用常量表示：

```
...
...
...
_dispatcher.dispatchEvent(new KeyboardEvent(KeyboardEvent.UP));
// is the same as the following:
_dispatcher.dispatchEvent(new KeyboardEvent("keyUp")); 
```

因此，您想要做的事情可能是可能的，但这很大程度上取决于原始编码人员如何建模他们的代码。要确定代码的结构，您可以使用您最喜欢的反编译器对 swf 进行反编译，并跟踪“侦听”发生的位置。然后，您可以尝试以“调度”对象为目标，并根据需要模拟调度。

1.  反编译 swf，找出进行调度的对象，以及进行侦听的对象。
2.  （我猜你正在加载这个外部 swf）。加载 swf，并针对执行调度的影片剪辑/对象：

    var _dispObject = _loadedSwf.mc.mc.mc.dispatchingObject;

3.  按照您的要求进行调度。

    _dispObject.dispatchEvent(new KeyboardEvent("keyUp"));

# java - 哪种数据库类型适合我的应用程序？

> ID：15735527
> 
> 赞同：-1
> 
> 时间：2013-03-31T22:57:18.957
> 
> 标签：java, sql, mongodb, sql-server-2012, nosql

假设我有一个应用程序（用 Java 编写）需要以 JSON 格式从服务器向客户端发送数据，我应该使用 SQL 数据库还是 NoSQL？

一方面，使用 NoSQL 为我在更新数据库中的记录时省去了麻烦（只需发送 JSON 字符串），如果我更新表（又名集合），我不需要更改我发送的格式。 . 另一方面，如果我需要从数据库中提取数据/统计数据，它会变得更加复杂——这也是我的必需品。

我目前正在测试 MongoDB 与 MS SQL 2012，我不确定哪个会更好。

我希望有 5-10 个集合，每个集合最多 10,000 个条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:52:46.153

我想没有人能客观地回答这个问题。它需要客观地衡量 MongoDB 擅长和不擅长做的事情对您的应用程序的相对重要性。现在，我们能说的最好的就是

> *“我们也不确定……”*。

（如果有人“确定”他们是不客观的。）

所以我的建议是：

*   在失败成本或截止日期延误太高的项目中，不要冒险选择数据库技术。

*   偏爱您已经熟悉/自信的数据库技术。不熟悉的技术有额外的成本。

*   以有条不紊的方式权衡替代方案。给自己写一份文档，列出项目上下文中每个备选方案的优缺点。

*   相信你自己的判断...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T23:20:51.743

> MongoDB 不是键/值存储，它更多。它也绝对不是 RDBMS。我没有在生产中使用过 MongoDB，但我已经用它构建了一个测试应用程序，它是一个非常酷的工具包。它似乎非常高效，并且已经或即将拥有容错和自动分片（也就是它会扩展）。我认为 Mongo 可能是迄今为止我见过的最接近 RDBMS 替代品的东西。它不适用于所有数据集和访问模式，但它是为典型的 CRUD 内容而构建的。存储本质上是一个巨大的散列，并能够选择任何这些键，是大多数人使用关系数据库的目的。如果您的数据库是 3NF 并且您不进行任何连接（您只是选择一堆表并将所有对象放在一起，也就是大多数人在 Web 应用程序中所做的），MongoDB 可能会为您服务。真正要指出的是，如果你因为无法选择数据库而无法做出超级棒的东西，那你就做错了。如果你知道mysql，就用它。在您真正需要时进行优化。像 ak/v 商店一样使用它，像 rdbms 一样使用它，但是看在上帝的份上，构建你的杀手级应用！这对大多数应用程序都无关紧要。Facebook 仍然大量使用 MySQL。Wikipedia 大量使用 MySQL。FriendFeed 经常使用 MySQL。NoSQL 是一个很棒的工具，但它肯定不会成为你的竞争优势，它不会让你的应用程序变得热门，而且最重要的是，你的用户不会对此给予任何评价。你这样做是不对的。如果你知道mysql，就用它。在您真正需要时进行优化。像 ak/v 商店一样使用它，像 rdbms 一样使用它，但是看在上帝的份上，构建你的杀手级应用！这对大多数应用程序都无关紧要。Facebook 仍然大量使用 MySQL。Wikipedia 大量使用 MySQL。FriendFeed 经常使用 MySQL。NoSQL 是一个很棒的工具，但它肯定不会成为你的竞争优势，它不会让你的应用程序变得热门，而且最重要的是，你的用户不会对此给予任何评价。你这样做是不对的。如果你知道mysql，就用它。在您真正需要时进行优化。像 ak/v 商店一样使用它，像 rdbms 一样使用它，但是看在上帝的份上，构建你的杀手级应用！这对大多数应用程序都无关紧要。Facebook 仍然大量使用 MySQL。Wikipedia 大量使用 MySQL。FriendFeed 经常使用 MySQL。NoSQL 是一个很棒的工具，但它肯定不会成为你的竞争优势，它不会让你的应用程序变得热门，而且最重要的是，你的用户不会对此给予任何评价。
> 
> 我将在什么基础上构建下一个应用程序？可能是Postgres。我会使用 NoSQL 吗？也许。我也可能使用 Hadoop 和 Hive。我可能会将所有内容保存在平面文件中。也许我会开始在 Maglev 上进行黑客攻击。我会使用最适合这项工作的东西。*如果我需要报告，我不会使用任何 NoSQL。*如果需要缓存，我可能会使用 Tokyo Tyrant。如果我需要 ACIDity，我不会使用 NoSQL。如果我需要大量的计数器，我会使用 Redis。如果我需要交易，我会使用 Postgres。*如果我有大量单一类型的文档，我可能会使用 Mongo。*如果我需要每天编写 10 亿个对象，我可能会使用 Voldemort。如果我需要全文搜索，我可能会使用 Solr。如果我需要对易失性数据进行全文搜索，我可能会使用 Sphinx。

旧但仍然真实...... [来源](http://bjclark.me/2009/08/nosql-if-only-it-was-that-easy/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T23:42:48.267

我建议看看这篇文章：[Storing Data in MySQL as JSON](https://stackoverflow.com/questions/3564024/storing-data-in-mysql-as-json)

它可能会看看什么最适合您的项目，除了我个人使用 MySQL 来处理我对数据库所做的任何事情，因为我知道 MySQL，但这并不总是最好的方法。

希望这有帮助！祝你的程序好运！

# javascript - HTML 文档触发的第一个事件是什么？

> ID：15735532
> 
> 赞同：11
> 
> 时间：2013-03-31T22:57:40.427
> 
> 标签：javascript, jquery, html, jquery-mobile

我很好奇使用 jQuery 和 jQuery Mobile 时首先触发哪个事件。

奇怪的是，我得到的第一个控制台输出是`pagebeforecreate`then`document ready`和 then `onload`。

我想知道在这些事件之前是否有任何其他事件被触发。

[http://jsfiddle.net/yYGYe/2/](http://jsfiddle.net/yYGYe/2/)

```
$('html').bind('pagebeforecreate',function(event) {
    console.log("pagebeforecreate");
});

$(document).ready(function() {
    console.log("document ready");
});

window.onload = function(){
    console.log("onload");
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T01:02:52.383

您正在寻找的是 jQuery 移动事件模型生命周期的全面可视化，下图可在[Pro jQuery Mobile](https://rads.stackoverflow.com/amzn/click/com/1430239662)和[作者的博客中](http://bradbroulik.blogspot.co.nz/2011/12/jquery-mobile-events-diagram.html)找到：

![jQuery Mobile 事件图 - Brad Broulik](https://i.stack.imgur.com/Zf4vz.png)

请记住，这是 jQuery mobile 特定的。本机事件列表[作为 W3 规范的一部分](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-htmlevents)提供，唯一与文档生命周期相关的是旧的`load`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T23:11:10.907

你的问题和你问的实际问题有点不同。

您询问第一个触发的事件是什么，但在上下文中您询问是否`pagebeforecreate`是要调用的函数，如果您希望它成为页面上触发的第一个事件。

如果您阅读有关该问题的 jQuery Mobile 文档，它会说`pagebeforecreate`在任何“小部件”实例化之前调用它。所以在这件事上；您放入其中的所有内容都将被称为“之前”所有 jQuery Mobile 小部件，但本身并不是 HTML 页面上触发的第一个事件。

在 HTML 页面上触发的第一个事件可能`document.readyState`设置为`uninitialized`，表示您的页面尚未准备好加载。这些都是就绪状态；

*   未初始化（尚未开始加载）
*   加载（正在加载）
*   交互（已加载足够，用户可以与之交互）
*   完成（满载）

# linux - 将单个文件复制到多个目标时，“目标不是目录”

> ID：15735536
> 
> 赞同：1
> 
> 时间：2013-03-31T22:58:18.540
> 
> 标签：linux, bash

所以我试图复制一个文件（尼古拉斯凯奇的照片，不要问），以便它替换一个完整的 phpBB 用户头像的文件夹（几乎是 4 月 1 日！）。但是，我得到了这样的回应：

```
joe@yada:~/upload$ for i in "ls *"; do cp ~/cage.jpg $i; done
cp: target `0e88f82965461cc1b418ddfda60935c8_99.jpg' is not a directory 
```

我如何告诉 cp 在这种情况下，一切都是文件？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:15:48.753

您使用的语法不正确。以下命令

```
for i in "ls *" 
```

使用 bash 通配符扩展，将实际字符串转换为

```
for i in "ls file1 file2 dir1 so_on 0e88f82965461cc1b418ddfda60935c8_99.jpg" 
```

并且该字符串值被分配给`i`

下一个 cp 尝试执行

```
cp ~/cage.jpg ls file1 file2 dir1 so_on 0e88f82965461cc1b418ddfda60935c8_99.jpg 
```

并且在检查任何输入文件是否无效之前，它会检查目标是否是目录，它不是，因此是错误。

要更正它，请更改`"ls *"`为`$(ls *)`，或者更好，只是`*`为了避免不必要的 subshel​​l 调用

# jpa - 无法使用 JPQL 查询获取集合

> ID：15735538
> 
> 赞同：0
> 
> 时间：2013-03-31T22:58:23.760
> 
> 标签：jpa, entity, eclipselink, converter, jpql

我有一个包含集合的实体类：

```
@Entity(name = "Directory")
@Converters({@Converter(name = "PathConvert", converterClass = PathConvert.class)})
public class Directory {

   @Id
   protected String id;

   @ElementCollection
   @CollectionTable(name = "Directory_Files", joinColumns = @JoinColumn(name = "id"))
   @Convert("PathConvert")
   @Column(name = "file")
   protected Set<Path> files;

} 
```

转换器`PathConvert`是必要的，因为 java.nio.file.Path 没有实现 Serializable，因此不能直接存储在列中。它只是使用 toString() 将 Path 转换为 String，使用 Paths.get(str) 将 String 转换回 Path。

现在我想通过 JPQL 查询获取设置的“文件”。查询（使用 Eclipse Link 执行）

```
SELECT u.files FROM Directory u WHERE u.id = :id 
```

返回字符串列表，但不返回路径列表作为结果。因此，如何通过 Eclipse Link 获得路径列表？此外，是否可以将“文件”作为单个结果获取？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:46:13.710

EclipseLink 应该为此查询应用转换器。似乎是一个错误，请为该问题记录一个错误。

作为一种解决方法，您只需要自己应用转换，或者选择整个目录对象并加入获取文件并从用户中提取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T06:18:35.670

JPA 将无法将列强制转换为对象，因为它不是映射类型。

JPA 确实能够从 JPQL 内部调用构造函数，但我不确定这是否适用于您的情况，因为您没有直接使用构造函数。

```
List result = em.createQuery("SELECT NEW example.EmpMenu(e.name, e.department.name) " +
    "FROM Project p JOIN p.employees e " +
    "ORDER BY e.name" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T06:29:31.577

引用 JPA 规范，select 子句应该是

> 单值路径表达式 | 标量表达式 | 聚合表达式 | 识别变量 | 对象（标识变量）| 构造函数表达式

多值字段不是这些。查询无效。纠正它。

# bash - shell 脚本：错误的解释器：使用 pwd 时没有这样的文件或目录

> ID：15735541
> 
> 赞同：18
> 
> 时间：2013-03-31T22:59:04.463
> 
> 标签：bash, unix, pwd

我想通过 for 循环浏览目录中的文件，但这出现了。

```
echo: bad interpreter: No such file or directory 
```

代码：

```
#!/bin/bash
count=0
dir=`pwd`
echo "$dir"
FILES=`ls $dir`
for file in $FILES
do
 if [ -f $file ]
 then
  count=$(($count + 1))
 fi
done
echo $count 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-10-27T04:39:31.043

我有同样的问题。删除`#!/bin/bash`对我有用。似乎没有必要添加 bash 所在的位置，因为它位于系统路径上。

[我在这里](https://answers.atlassian.com/questions/108534/cli-configuration-issue-bad-interpreter-no-such-file-or-directory-bin-bash-not-found)找到了另一个解决方案。改变

`#!/bin/bash`

为了

`#!/usr/bin/bash`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-31T23:10:34.957

更好的做法：

```
#!/bin/bash
count=0
dir="$PWD"
echo "$dir"

for file in "$dir"/*
do
 if [[ -f $file ]]
 then
  ((count++))
 fi
done
echo $count 
```

或最简单/最短的解决方案：

```
#!/bin/bash

echo "$PWD"

for file; do
 [[ -f $file ]] && ((count++))
done

echo $count 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-05-02T22:17:57.003

最`echo: bad interpreter: No such file or directory`有可能来自第一行，`#!...`称为[shebang line](https://en.wikipedia.org/wiki/Shebang_(Unix))。

## 关于`#!...`线路

这一行提示 shell 使用什么解释器来运行文件。这可以是例如`bash`，或者`sh`（它是（大致）一个子集，所以很多事情都不起作用），或者基本上任何可以执行文件内容的东西——Perl、Python、Ruby、Groovy ......

在脚本可执行时直接调用脚本等情况下，该行指向系统：

```
./myScript.sh 
```

当文件没有后缀时，编辑器也经常使用它来识别正确的语法突出显示——例如，Gedit 就是这样做的。

## 解决方案

要覆盖该行，请将脚本作为参数提供给 Bash：

```
bash myScript.sh 
```

或者，您可以“获取”它，这意味着，在 Bash shell 中，执行以下任一操作

```
source myScript.sh
. myScript.sh 
```

这将（大致）起作用，就像您自己粘贴命令一样。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-12-17T18:04:44.010

在我的例子中，bash 脚本是在 Windows PC 上创建的，它在每个换行符前添加了一个回车符。\x0D\x0A 而不仅仅是 \x0A。我用 LF 替换了所有的 CRLF，`sed`我的脚本现在可以工作了。

```
sed -i 's//\r/\n//\n/g' /path/to/file.sh 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-09-02T00:29:43.580

我刚刚遇到同样的问题，发现我的错误在我的第一行，有

```
#!bin/bash 
```

代替

```
#!/bin/bash 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-22T19:27:54.853

这是一个奇怪的错误。我建议尝试找到错误的根源。

一件事是检查 pwd 命令。

```
type pwd 
```

确保它是 /usr/bin/pwd 或 /bin/pwd，并验证它不是脚本：

```
file /usr/bin/pwd 
```

如果它是一个脚本，我敢打赌它以

```
#!echo 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-11T07:54:58.957

如果您确实使用 Homebrew 安装 BASH，

删除 `#!/bin/bash` 意志就足够了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-07-27T04:14:10.067

您可以使用命令找到 bash 所在的位置

```
whereis bash 
```

您可以将 bash 路径复制到您看到错误解释器错误的路径。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-07T08:18:15.037

我已按照以下链接中的步骤操作，问题已解决。

参考链接：[脚本错误 - 错误的解释器](https://alvinalexander.com/blog/post/linux-unix/shell-script-error-bad-interpreter-no-such-file)实际上，每行末尾都有 一个额外的**^M符号。**因此，在删除它之后，它对我来说效果很好。

希望能帮助到你！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-10T09:17:34.903

当文件不是 unix 格式时，也可能出现此问题。尝试重新运行 dos2unix 文件并重试。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-11T03:45:32.840

因此，如果您将用户名组优先级从用户名更改为 root，您应该更改

```
#!/user/bin/bash 
```

到

```
#!/bin/bash 
```

检查您的用户组（我的用户名是 rommi）

```
$ groups rommi 
```

此命令将输出：

```
rommi : root adm cdrom sudo dip plugdev lxd lpadmin sambashare 
```

由于我的用户名组优先级设置为 root，我应该将我的脚本更改为

```
#!/bin/bash 
```

我使用以下方法更改优先级组：

```
sudo usermod -g root rommi 
```

如果`groups rommi`命令输出：

```
rommi : rommi adm cdrom sudo dip plugdev lxd lpadmin sambashare 
```

那么我的脚本应该使用`#!/usr/bin/bash`

使此更改失败将导致`bad interpreter: No such file or directory`错误

# node.js - 快速会话：对象# has no method 'on' I'm using ExpressJS and have been trying to get PassportJS working. In my express.js config, I have the following: app.configure(function () { // dynamic helpers 问问题 问问题 2013-03-31T22:59:11.097 581 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm using ExpressJS and have been trying to get PassportJS working. In my express.js config, I have the following: app.configure(function () { // dynamic helpers app.use(helpers(config.app.name)); // cookieParser should be above session app.use(express.cookieParser()); // bodyParser should be above methodOverride app.use(express.bodyParser()); app.use(express.methodOverride()); // express/mongo session storage app.use(express.session({ secret: 'noobjs', store: new mongoStore({ url: config.db, collection : 'sessions' }) })); // connect flash for flash messages app.use(flash()); // use passport session app.use(passport.initialize()); app.use(passport.session()); ... Unfortunately, I get the following error when I run the app:- store.on('disconnect', function(){ storeReady = false; }); ^ TypeError: Object #<Object> has no method 'on' I think it has something to do with initialization order, but am too inexperienced around express to know what the order should be. Can anyone offer some direction please? Guard not compiling all the SCSS stylesheets When you have a wrapper stylesheet that imports other using sass @import, and when using guard to watch for changes, it wont compile the wrapper stylesheet automatically if you are only changing one of the imported files. Example: /* This is viewports.scss, which must compile into viewports.css */ @media only screen and (min-width: 480px) { @import "480.scss"; } @media only screen and (min-width: 768px) { @import "768.scss"; } @media only screen and (min-width: 1024px) { @import "1024.scss"; } When modifying for example 480up.scss, it compiles as expected into 480up.css, but Guard is not importing it into the viewports.css, seems like is not recognizing the dependency. This use is important when you want to implement responsive in one compiled css, but writing your code in separate scss files. If you just use the sass command you have the expected behavior, if you use Guard, not. Is there some workaround for this? Something extra that I need to configure? node.jsexpress 4 1 回答 1 This answer is useful 1 npm咬我的屁股。我拿错了包裹。问题解决了。 作为参考，正确的包是npm install connect-mongo. 于 2013-03-31T23:11:55.973 回答 Related 1 sql-server-2008 - 有什么方法可以知道哪些存储过程通过我的代码运行？ 1 php - 当我知道格式时，php从字符串中获取时间戳 4 javascript - jQuery 等待异步 ajax 调用完成 1 jsf - s：字符串列表上的selectItems？ 1 c# - 将日期类型的命名参数插入 HQL 插入 1 mysql - GROUPED结果Mysql上的一个字段中的多行 1 wcf - 在 WCF 3 层设计中 - DAL 究竟包括什么？ 2 jquery - 客户端模板是否适合产品？ 2 python - Django 对象日志错误：未定义名称“注册” 2 javascript - 如何从JS中的字符串中获取十六进制整数？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15735544
> 
> 赞同：1
> 
> 时间：
> 
> 标签：node.js, express

I'm using ExpressJS and have been trying to get PassportJS working. In my `express.js` config, I have the following:

```
app.configure(function () {
        // dynamic helpers
        app.use(helpers(config.app.name));

        // cookieParser should be above session
        app.use(express.cookieParser());

        // bodyParser should be above methodOverride
        app.use(express.bodyParser());
        app.use(express.methodOverride());

        // express/mongo session storage
        app.use(express.session({
          secret: 'noobjs',
          store: new mongoStore({
            url: config.db,
            collection : 'sessions'
          })
        }));

        // connect flash for flash messages
        app.use(flash());

        // use passport session
        app.use(passport.initialize());
        app.use(passport.session());

... 
```

Unfortunately, I get the following error when I run the app:-

```
store.on('disconnect', function(){ storeReady = false; });
^
TypeError: Object #<Object> has no method 'on' 
```

I think it has something to do with initialization order, but am too inexperienced around express to know what the order should be.

Can anyone offer some direction please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:11:55.973

`npm`咬我的屁股。我拿错了包裹。问题解决了。

作为参考，正确的包是`npm install connect-mongo`.

# sass - 保护不编译所有 SCSS 样式表

> ID：15735550
> 
> 赞同：0
> 
> 时间：2013-03-31T23:00:46.130
> 
> 标签：sass, guard-sass

当您有一个使用 sass @import 导入其他样式表的包装器样式表时，并且当使用 guard 来监视更改时，如果您只更改其中一个导入的文件，它不会自动编译包装器样式表。例子：

```
/* This is viewports.scss, which must compile into viewports.css */
@media only screen and (min-width: 480px) {
    @import "480.scss";
}

@media only screen and (min-width: 768px) {
    @import "768.scss";
}

@media only screen and (min-width: 1024px) {
    @import "1024.scss";
} 
```

例如，在修改 480up.scss 时，它会按预期编译为 480up.css，**但 Guard 并未将其导入 viewports.css**，似乎无法识别依赖关系。当您想在一个已编译的 css 中实现响应式，但在单独的 scss 文件中编写代码时，这种用法很重要。

如果您只使用 sass 命令，您将获得预期的行为，如果您使用 Guard，则不会。

有一些解决方法吗？我需要配置一些额外的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:52:58.740

Guard 对文件的依赖关系一无所知，只是提供了轻松处理文件系统修改事件的基础。我看到 sass 有两个 Guard 插件：

*   [https://github.com/hawx/guard-sass](https://github.com/hawx/guard-sass)
*   [https://github.com/guard/guard-compass](https://github.com/guard/guard-compass)

我会选择guard-sass，因为它得到了积极的维护。当我阅读文档时，我看到

```
:smart_partials => true # Causes guard-sass to do dependency resolution and only
                        # recompile the files that need it when you update partials.
                        # If not on, then guard-sass will update all files when a
                        # partial is changed.
                        # default: false 
```

所以看起来guard-sass应该已经正确处理了你的案子。

# gdi+ - Get Pages from MultiPage TIFF

> ID：15735553
> 
> 赞同：1
> 
> 时间：2013-03-31T23:01:19.210
> 
> 标签：gdi+, tiff, multipage, libtiff.net

I have a TIFF file that shows 5 pages when opened in Microsoft Document Imaging. I am trying to extract the 5 pages programmatically and return them in a Lis.

The first page has an 8 bpp indexed format and the last four pages have a 24 bit color format.

I have tried GDI+, TiffBitmapDecoder and BitMiracle's LibTiff.Net but they all return a single page. The first image returned has one frame so I thought there might be more than one directory in the TIFF file and used LibTiff.Net to get the directory count but it says there is only one directory and also that the image in that directory only contains one frame.

I have tried the code from "How to split multipage Tiff using LibTiff.Net" and it too returns the single image.

What is Microsoft Document Imaging doing? Is there something else I can try?

Thanks, Tom

# jquery - How do I make a parent container adjust it's height to match a scaled div

> ID：15735554
> 
> 赞同：1
> 
> 时间：2013-03-31T23:01:29.483
> 
> 标签：jquery, css, zooming, transform, scale

I'm using jQuery to dynamically scale and zoom a div based on the dimensions of the parent container. However, I'm having a difficult time detecting the height. I have the parent set to auto, but it doesn't detect the change in height as the div rescales.

```
$(window).load(function () {
    console.log( "window load" );
    function zoomSquare() {
        var $square = $('.square');

        var vh = $square.parent().width(); // Get the height of whatever the parent of square is
        var squareHeight = $square.width(); // Grab the height of .square
        var desiredHeight = Math.round(vh * 0.95);
        var zoom = (desiredHeight / squareHeight);

        //$square.css('zoom', zoom);
        $square.css('-webkit-transform', 'scale(' + zoom + ')');
        $square.css('-moz-transform', 'scale(' + zoom + ')');
        $square.css('-o-transform', 'scale(' + zoom + ')');
        $square.css('transform', 'scale(' + zoom + ')');
    }

    // When the browser is resized
    $(window).on('resize', function () {
        console.log( "resize" );
        zoomSquare();
    });

    // When the page first loads
    $(document).ready(function () {
        console.log( "dom ready" );
        zoomSquare();
    });

}); 
```

I have a fiddle here [http://jsfiddle.net/sarahwhatsup/33cg5/3/](http://jsfiddle.net/sarahwhatsup/33cg5/3/)

You can see my background wrapper stays the same height and doesn't expand to fit the scaling div. How do I go about fixing it so the wrapper always fits around the scaled div inside?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:16:08.147

我有一个[类似的问题](https://stackoverflow.com/questions/15733192/how-can-i-set-a-divs-height-matching-to-responsive-content)，我想这个解决方案在这里也有效：http: [//jsfiddle.net/VTAH4/1/](http://jsfiddle.net/VTAH4/1/)
这个解决方案使用插件来检测重新调整大小：[Ben Alaman's resize plugin](http://benalman.com/projects/jquery-resize-plugin/)。

```
$(window).load(function () {

    $.fn.animateHeight = function (container) {
         var thisHeight = $(container).map(function (i, e) {
        return $(e).height();
         }).get();

         return this.animate({
        height: thisHeight
         });
    };

    // When the browser is resized
    $(window).resize(function () {
        $(".square").animateHeight(".wrapper")
    });

    // When the page first loads
    $(document).ready(function () {     
        $(".square").animateHeight(".wrapper")
    });

}); 
```

# mysql - Using a Subquery in the Against for a FULLTEXT search in Mysql

> ID：15735562
> 
> 赞同：0
> 
> 时间：2013-03-31T23:02:31.013
> 
> 标签：mysql, full-text-search, subquery

In MySQL, I would like to do a FULLTEXT search on a table 'articles'. The text I want to search against would be located in another table, 'Vectors' under the column 'CVs'

I am trying:

```
SELECT website 
FROM articles
WHERE MATCH (title, body)
AGAINST(
    SELECT CVs
    FROM Vectors
    WHERE Title="cv1") 
```

However, it keeps returning syntax error.

Is it possible to run a subquery in the AGAINST clause?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:12:20.017

您希望能够做到：

```
SELECT website 
FROM articles cross join
     vectors
WHERE title = 'cv1' and MATCH (title, body) AGAINST(cv); 
```

但是，参数 in`against`需要是一个常数。

你可以求助于：

```
SELECT website 
FROM articles cross join
     vectors
WHERE title = 'cv1' and
      (title like concat('%', cv, '%') or body like concat('%', cv, '%')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T23:13:17.747

从[文档](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html#function_match)

```
The search string must be a literal string, not a variable or a column name. 
```

您可能需要使用 LIKE 而不是 MATCH，尽管您应该注意它会慢得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-25T16:45:16.173

您可以执行以下操作：

```
SET @search = (SELECT GROUP_CONCAT(CVs SEPARATOR " ") FROM Vectors WHERE Title="cv1") ;
SELECT website  FROM articles WHERE MATCH (title, body) AGAINST((@search) IN BOOLEAN MODE); 
```

# jquery - 尝试使用jquery制作动画时如何定位html元素？

> ID：15735564
> 
> 赞同：0
> 
> 时间：2013-03-31T23:02:41.403
> 
> 标签：jquery, html, css

我为我的网站制作了一个`div`带有背景图片的按钮。我使用 jQuery 为该按钮设置了动画，因此当鼠标悬停在按钮上时，它会向右跳 20px，当鼠标离开时，它会返回到之前的位置。

问题是，当我放大 ( `ctrl`+ `scroll`) 时，整个动画变得一团糟。按钮从左到右快速移动，当然不是它应该在的位置。

我使用`relative`位置和像素单位来定位元素。

我应该如何定位东西？`absolute`还是`relative`？像素还是百分比？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:16:01.163

最好的办法是只使用 CSS。它很整洁，做得很好。这是一个演示

[http://jsfiddle.net/kevinPHPkevin/GyVTZ/](http://jsfiddle.net/kevinPHPkevin/GyVTZ/)

```
img {
    margin-top:20px;
}
img:hover {
    margin-top:10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T01:03:17.583

这篇[文章](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)解释了绝对和相对，它们有何不同？我的练习`wrap`我`absolute`首先`relative`

例子：

html

```
<div class="wrap">
  <div class="content">
  </div>
</div> 
```

css

```
.wrap {
  float:left;
  position:relative
}
.content {
  position:absolute;
  top:10px;
  left:10px
} 
```

# memory - 字的大小和寻址

> ID：15735567
> 
> 赞同：10
> 
> 时间：2013-03-31T23:03:10.500
> 
> 标签：memory, architecture, operating-system, word, ram

我正在刷新自己的记忆信息，但我对单词的大小感到困惑。据我了解，Word 不是一个通用定义的大小，而是由特定系统定义的大小（以字节数计）。

根据维基百科：

> 因此，具有 32 位内存地址的处理器可以直接访问 4 GiB 的字节可寻址内存。

这是否意味着 32 位处理器可以处理 4,294,967,295 个**字**？32 位 Windows 的 RAM 限制为 4GB，但阅读单词的含义让我感到疑惑。Windows 中的每个字是否等于 1 个字节？一个字的大小是否只是更大的字节数，而 32 位处理器能够处理 8GB、10GB、12GB 甚至更多的内存？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T01:47:34.823

> 这是否意味着 32 位处理器可以处理 4,294,967,295 个字？

这取决于 CPU 以及您如何看待它。

有些 CPU 无法处理小于一个字的任何内容。16 位德州仪器数字信号处理器就是一个很好的例子。它们的 C/C++ `char`(AKA `byte`)`short`和`int`类型都是相同的大小，16 位。这是可以用唯一地址（指针）寻址的最小内存单元，同时也是机器字。由于这些处理器上的数据地址/指针是 16 位的，因此它们最多可以寻址数据存储器中的 2 ^(16)个 16 位字。

现在，如果您回到 32 位操作模式的 x86 CPU，情况会有所不同。内存的最小可寻址单元是 8 位字节，最大的是 32 位字（机器字）。地址和指针也是 32 位的（如果我们忽略分段和页面转换）。这让我们有 2 ^(32 个)唯一的内存地址。而且，很简单，使用它们，您最多可以访问 2^(个 32) 8 位字节的内存。^(但是你可以用 2 32 个)唯一地址寻址多少个 32 位字？答案取决于您是否想要不重叠或重叠的单词。你看，x86 CPU 可以访问任何地址的 32 位内存单元，而不仅仅是 4 字节的倍数地址。

在 x86 上，您不仅限于此：

```
 0 1 2 3 4 5 6 7  <- address
  \word/  \word/ 
```

这些都是 x86 上 32 位字访问的有效地址：

```
 0 1 2 3 4 5 6 7  <- address
  \word/  | | | |
    \word/  / | |
      \word/  / |
        \word/  /
          \word/
            ... 
```

^(那么，在 x86 上，您可以使用 2 32 个)唯一地址来寻址多少个 32 位字？如果您谈论的是所有唯一可寻址和重叠的，那就是其中的 2 ^(32 个)。如果，OTOH，您正在谈论所有唯一可寻址且不重叠的，那就是其中的 2 ^(30)个。

OTOH，如果您的 32 位 CPU 使用非 32 位地址，则总数会有所不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T23:43:06.807

您混淆了字长和字节大小，因为字长由处理器决定，而字节大小是通用的。

如果不使用 PAE（物理地址扩展），32 位处理器只能处理 4GB 的 RAM，因为只有 2 ^ 32 = 4,294,967,296 个不同的数字可以使用 32 位来表示。这是**硬件限制**。

通过将进程映射到页表，利用 PAE 的 32 位系统可以寻址超过 4GB。这将授予*每个进程*访问 4GB 内存的权限。通过支持 PAE，32 位版本的 Windows Server 2003 Datacenter 在基于 x86 的计算机上支持高达 64 GB 的 RAM。

`Edit`

字长表示 CPU 一次可以处理的位数。所以 32 位 = 4 个字节。然而，字长和地址长经常互换使用，这会导致混淆，因为它们确实不同。Pentium Pro 是具有 36 位宽地址总线的 32 位 CPU，允许 64GB 的可访问内存（通过 PAE）。

# vb.net - "Object reference not set to an instance of an object?"

> ID：15735570
> 
> 赞同：1
> 
> 时间：2013-03-31T23:03:16.593
> 
> 标签：vb.net

Trying to show other form if textbox's text is correct. When I debug I get an error saying "Object reference not set to an instance of an object". The code is below:

```
'OK is OK button, MainForm is the form I'm trying to open     

Private Sub OK_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles OK.Click
    Dim pass As String = My.Computer.FileSystem.ReadAllText("password.txt")
    If PasswordTextBox.Text = pass Then
        MainForm.Owner = Me
        Me.Hide()
        '"Object reference not set to an instance of an object" error when debugging on line below
        MainForm.Show()
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:59:17.203

您需要创建要显示的表单的新实例。为此，您可以创建一个 T 形式的变量，然后将其显示出来。

如果您不创建表单的实例，则`MainForm.Show()`代码将`Show()`在空引用上调用。

```
If PasswordTextBox.Text = pass Then
    Me.Hide()
    Dim theFormIWantToShow As New MainForm
    theFormIWantToShow.Show()
End If 
```

# android - Tab, Fragments and Listviews

> ID：15735573
> 
> 赞同：0
> 
> 时间：2013-03-31T23:03:39.800
> 
> 标签：android, android-listview, android-fragments, android-tabhost

I have an activity that shows a listview, the listview is contained within a fragment.

I now need to expand the view by adding a number of other listviews (essentially filters) on the existing listview.

I plan to use a tab construct, ideally all using the same fragment.

1) Is it possible for the same fragment to be referenced multiple times within one XML layouts, if so I assume each one will need a different tag.

2) Can the tabhost be set up in such a way that it can just use the same fragment and I can manage the adapter to perform the filtering.

Which would be the best method to use?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:28:06.257

使用[ListFragment](http://developer.android.com/reference/android/app/ListFragment.html)而不是将 ListView 放在 Fragment 中。然后你有一个适配器，你可以给你的物品。使用相同的adatper，因为我假设列表中的项目视图在应用过滤器后不会改变。

最后，使用[SearchView](http://developer.android.com/reference/android/widget/SearchView.html)并使用它的方法`setOnQueryTextListener()`来定义一个新的 Listener。在您的项目列表中应用您的过滤器。最后，将此过滤后的项目列表提供给您的适配器。

# c# - 如何使用 cUrl 从 ASP.NET MVC3 网站上传文件？

> ID：15735575
> 
> 赞同：0
> 
> 时间：2013-03-31T23:04:00.853
> 
> 标签：c#, asp.net-mvc, curl

我需要上传一个文件到 RackSpace 的云文件。

在他们的 API 页面上，他们有一个 cUrl 示例，有人知道如何在 C# 中实现它吗？

任何北方都将不胜感激，因为我的搜索没有帮助，即使在这里我发现的只是看起来很像常规上传的代码。

这是我需要在 C# 中工作的示例：

```
Upload File to Container
curl -X PUT -T screenies/hello.jpg -D - \
-H "ETag: 805120e285a7ed28f74024422fe3594" \
-H "Content-Type: image/jpeg" \
-H "X-Auth-Token: fc81aaa6-98a1-9ab0-94ba-aba9a89aa9ae" \
-H "X-Object-Meta-Screenie: Hello World" \

https://storage.clouddrive.com/v1/CF_xer7_343/
images/hello.jpg

HTTP/1.1 201 Created
Date: Thu, 09 July 2009 17:03:36 GMT
Server: Apache
Content-Length: 0
ETag: 805120e285a7ed28f74024422fe3594
Content-Type: text/plain 
```

需要明确的是，我不希望任何人为我做我的工作，我只需要一些教程或如我所说的那样。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:10:58.410

您可以使用`HttpWebRequest`将 PUT 请求发送到服务或更新的`HttpClient`api

请参阅下面的示例。

```
var client = new HttpClient();
client.DefaultRequestHeaders.Add("X-Auth_User", "your_username");
client.DefaultRequestHeaders.Add("X-Auth-Key", "your_api_key");

 client.DefaultRequestHeaders.Accept.Add(new System.Net.Http.Headers.MediaTypeWithQualityHeaderValue("image/pjpeg"));

var bytes = File.ReadAllBytes(imagePath);
var ms = new MemoryStream(bytes);

 client.DefaultRequestHeaders.Accept.Add(new System.Net.Http.Headers.MediaTypeWithQualityHeaderValue("image/pjpeg"));
 var content = new StreamContent(ms);

 var response = client.PutAsync("YOUR_RACKSPACE_URI", content); 
```

# algorithm - 硕士定理 f(n)=log n

> ID：15735576
> 
> 赞同：6
> 
> 时间：2013-03-31T23:04:09.767
> 
> 标签：algorithm, big-o, divide-and-conquer, master-theorem

对于硕士定理`T(n) = a*T(n/b) + f(n)`，我使用了 3 种情况：

1.  如果`a*f(n/b) = c*f(n)`对于某个常数`c > 1`那么`T(n) = (n^log(b) a)`
2.  如果`a*f(n/b) = f(n)`那时`T(n) = (f(n) log(b) n)`
3.  如果`a*f(n/b) = c*f(n)`对于某个常数`c < 1`那么`T(n) = (f(n))`

但是当`f(n) = log n`或时`n*log n`， 的值`c`取决于 n 的值。如何使用大师定理解决递归函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-01T15:45:29.980

通常，f(n) 必须是多项式才能应用主定理 - 它不适用于所有函数。然而，主定理有一个有限的“第四种情况”，它允许它应用于多对数函数。

**如果**f(n) = O(n ^(log [b] a) log ^k n)，**则**T(n) = O(n ^(log [b] a) log ^(k+1) n)。

换句话说，假设你有 T(n) = 2T (n/2) + n log n。f(n) 不是多项式，而是 f(n)=n log n，并且 k = 1。因此，T(n) = O(n log ² n)

有关更多信息，请参阅此讲义：http: [//cse.unl.edu/~choueiry/S06-235/files/MasterTheorem-HandoutNoNotes.pdf](http://cse.unl.edu/~choueiry/S06-235/files/MasterTheorem-HandoutNoNotes.pdf)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T23:09:46.107

[您可能会从有关 Master theorem 的 Wikipedia 文章中](http://en.wikipedia.org/wiki/Master_theorem)发现这三个案例更有用：

*   案例 1：f(n) = Θ(n ^c )，其中 c < log [b] a
*   情况 2：f(n) = Θ(n ^c log ^k n)，其中 c = log [b] a
*   案例 3：f(n) = Θ(n ^c )，其中 c > log [b] a

现在不再直接依赖于 n 的选择——重要的是 f 的长期增长率以及它与常数 a 和 b 的关系。如果没有看到您要解决的特定重复发生的更多细节，我无法提供任何更具体的建议。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-25T15:01:58.660

当 f(n)=log(n) 时，Master 定理不适用。您应该使用更广义的定理[Akra–Bazzi](https://en.wikipedia.org/wiki/Akra%E2%80%93Bazzi_method)。

结果，T(n)=O(n)。

[来源](http://www.cse.unt.edu/~tarau/teaching/cf1/Master%20theorem.pdf)。

找到该结果的更具体证明的另一种方法是寻找“最优排序矩阵搜索”算法的计算复杂性的证明。

[![在此处输入图像描述](https://i.stack.imgur.com/lfvyc.png)](https://i.stack.imgur.com/lfvyc.png)

# statistics - SAS: relating variables

> ID：15735578
> 
> 赞同：1
> 
> 时间：2013-03-31T23:04:13.950
> 
> 标签：statistics, sas, frequency-distribution

I'm very new to both SAS and statistical analysis in general. I have a degree in computer science and I'm taking an online course in statistics and am confused on how to achieve what I want in SAS. I have searched online to no avail but am probably not even using the right terminology since I don't really know SAS or stats very well.

Basically, I have a few variables in a dataset and I want to display them conditionally in frequency tables.

For example, let's say I have the variables Gender, Age and Alcohol_use. What I want to do is have a frequency table or tables that basically relate gender and age to alcohol use. So, I want to break it down by gender and age at the same time, if that makes sense. One example would be:

Male, 21-25 -> Moderate Use
Female, 21-25 -> Low Use
Male, 26-30 -> Heavy Use
etc...

So, I guess I want to have frequency tables for the third variable on certain conditions of the first two variables, if that makes sense.

Normally, when displaying frequency tables, I just write PROC FREQ; TABLES Gender Age Alcohol_use;

Would I be changing anything there, since it is the frequency table that is affected? Or do I need to add some conditions in the data section of the program?

Any help would be great. Please let me know if you need any clarification on my question. Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:42:32.077

You are on the right track with `PROC FREQ`. That procedure will produce a frequency table report and even an output data set with results. First, here is some made-up data:

```
data have;
   do gender = 1,2;
      do tmp=1 to 10;
         do age=10,21,27,32;
            alcohol_use = round(ranuni(12345)*100);
            id + 1;
            output;
         end;
      end;
   end;
run; 
```

I'm separating it from the rest of the answer to better illustrate. The form of your variables wasn't clear from your question so let's assume your data is continuous. In that case, we can use `PROC FORMAT` to define grouping formats for the variables:

```
proc format;
   value agefmt
      0-20   = '20 and below'
     21-25   = '21-25'
     26-30   = '26-30'
     31-high = '31 and above';
   value usgfmt
      0<-30   = 'Low'
     30<-80   = 'Moderate'
     80<-high = 'Heavy';
   value genfmt
      1  = 'Male'
      2  = 'Female';
run; 
```

Now its just a matter of running `PROC FREQ`. The asterisks in the `TABLE` statement define the interaction levels you want and the `OUT=` option give the name of a new SAS data set to create, which will contain the summarized results:

```
proc freq data=have;
   table gender * age * alcohol_use / list out=want;
   format gender genfmt. age agefmt. alcohol_use usgfmt.;
run; 
```

If your original data has hard-coded values like "Male" and "Heavy", you don't need the `PROC FORMAT` part of the `FORMAT` statement.

# .htaccess - 带有可选参数的干净 URL 的 mod_rewrite 规则

> ID：15735590
> 
> 赞同：1
> 
> 时间：2013-03-31T23:05:27.017
> 
> 标签：.htaccess, mod-rewrite, apache2

我有当前的网址：

```
http://domain.com 
```

当您访问此 URL 时，默认情况下会加载：

```
http://domain.com/index.php 
```

在我的 .htaccess 中，我有：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^([^/]*)$ /index.php?var1=$1 [L]
RewriteRule ^([^/]*)/([^/]*)$ /index.php?var1=$1&var2=$2 [L]
RewriteRule ^([^/]*)/([^/]*)/([^/]*)$ /index.php?var1=$1&var2=$2&var3=$3 [L]
RewriteRule ^([^/]*)/([^/]*)/([^/]*)/([^/]*)$ /index.php?var1=$1&var2=$2&var3=$3&var4=$4 [L]
RewriteRule ^([^/]*)/([^/]*)/([^/]*)/([^/]*)/([^/]*)$ /index.php?var1=$1&var2=$2&var3=$3&var4=$4&var5=$5 [L] 
```

.htaccess 为所有页面提供 404，所以我确定它是错误的。

我希望能够使以下所有 URLS 工作

```
http://domian.com/val1/
http://domian.com/val1/val2/
http://domian.com/val1/val2/val3
http://domian.com/val1/val2/val3/val4/
http://domian.com/val1/val2/val3/val4/val5 
```

意味着它们是可选参数

我究竟做错了什么？如何设置 .htaccess 以接受可选参数。

**编辑：**我在原来的问题中有很多问题，所以我把它变成了一个更容易理解的问题。希望我能得到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T04:36:07.753

好吧，经过相当多的反复试验，我找到了答案：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^([\w-]+)/([\w-]+)/([\w-]+)/([\w-]+)/([\w-]+)$ index.php?word=$1&media=$2&date=$3&sortby=$4&source=$5 [L]
RewriteRule ^([\w-]+)/([\w-]+)/([\w-]+)/([\w-]+)$ index.php?word=$1&media=$2&date=$3&sortby=$4 [L]
RewriteRule ^([\w-]+)/([\w-]+)/([\w-]+)$ index.php?word=$1&media=$2&date=$3 [L]
RewriteRule ^([\w-]+)/([\w-]+)$ index.php?word=$1&media=$2 [L]
RewriteRule ^([\w-]+)$ index.php?word=$1 [L] 
```

这让我得到了我正在寻找的结果。但是，如果最后有一个斜线，我会得到一个 404 示例：

```
http://domain.com/val1/ 
```

但是给出 404

```
http://domain.com/val1 
```

按预期工作。怎么会？

**编辑：**用于尾随斜杠的 faa 解决方案有效。最终规则如下所示：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^([\w-]+)/([\w-]+)/([\w-]+)/([\w-]+)/([\w-]+)/?$ index.php?var1=$1&var2=$2&var3=$3&var4=$4&var5=$5 [L]
RewriteRule ^([\w-]+)/([\w-]+)/([\w-]+)/([\w-]+)/?$ index.php?var1=$1&var2=$2&var3=$3&var4=$4 [L]
RewriteRule ^([\w-]+)/([\w-]+)/([\w-]+)/?$ index.php?var1=$1&var2=$2&var3=$3 [L]
RewriteRule ^([\w-]+)/([\w-]+)/?$ index.php?var1=$1&var2=$2 [L]
RewriteRule ^([\w-]+)/?$ index.php?var1=$1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T03:25:24.087

某些请求示例中的尾部斜杠与规则中的正则表达式不匹配。

你可以试试这个：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteRule ^([^/]+)/?$ /index.php?var1=$1 [L,NC]
RewriteRule ^([^/]+)/([^/]+)/?$ /index.php?var1=$1&var2=$2 [L,NC]
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ /index.php?var1=$1&var2=$2&var3=$3 [L,NC]
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)/?$ /index.php?var1=$1&var2=$2&var3=$3&var4=$4 [L,NC]
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)/?$ /index.php?var1=$1&var2=$2&var3=$3&var4=$4&var5=$5 [L,NC] 
```

# ruby-on-rails - Rails 未定义方法“2013-03-06”的“strftime”：字符串

> ID：15735591
> 
> 赞同：10
> 
> 时间：2013-03-31T23:05:38.653
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, strftime

我收到错误

“2013-03-06”的未定义方法“strftime”：字符串

尝试使用 strftime 从字符串 2013-03-06 正常显示日期（2013 年 6 月 3 日或类似的日期）时。

在我的 index.html.erb 中执行此操作的行如下所示

`<td><%= task.duedate.strftime("%B %e, %Y") %></td>`

我只是在学习 Rails，所以我确信这只是一个愚蠢的初学者错误，任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-31T23:16:35.970

当 strftime 是 Time/Date 类的方法时，看起来您的到期日期是一个字符串。你可以试试这个：

```
Date.parse(task.duedate).strftime("%B %e, %Y") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-29T01:48:54.720

这为我解决了这个问题：

```
Date.created_at.try(:strftime, ("%B %e, %Y")) 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:12:37.077

您将日期时间存储为字符串，而不是实际的日期时间。您将需要创建一个新的迁移，如下所示

```
change_table :tasks do |t|  
  t.change :duedate, :datetime 
end 
```

这样，当您访问 duedate 时，它​​已经被解析为 datetime 对象，而不必每次都转换它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-12T10:07:13.877

您也可以使用 strptime。它对我有用:)

```
DateTime.strptime(task.duedate ,"%B %e, %Y") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-15T19:26:02.997

我也遇到了这个问题，在 controller.rb 文件中创建了一个将日期从字符串格式转换为 datetime 对象的方法之后，我能够解决它，然后在将数据保存到数据库之前，我在 create 函数中调用了这个方法。

```
 def convert_to_date(date_as_string)
    #expecting date format in "yyyy-mm-dd" format
    if date_as_string.length > 0
      split_date = date_as_string.split('-')
      return Date.new(year=split_date[0].to_i, month=split_date[1].to_i, 
      day=split_date[2].to_i) 
    else
      return nil 
    end 
  end 
```

# javascript - Bootstrap Typeahead 点击事件

> ID：15735595
> 
> 赞同：2
> 
> 时间：2013-03-31T23:06:44.640
> 
> 标签：javascript, jquery, bootstrap-typeahead

我正在使用 bootstrap-typeahead.js v2.0.0 进行自动完成搜索。我有一个点击事件来查看结果，但它只能工作 10 次中的 1 次，在另一种情况下我收到错误：“Uncaught SyntaxError: Unexpected token u”。

我环顾四周，发现了这个：[https](https://github.com/twitter/bootstrap/issues/4018) ://github.com/twitter/bootstrap/issues/4018我在那里尝试了解决方案，但似乎没有任何效果。当我使用回车键时它工作得很好，所以它必须与点击事件有关。其他人有同样的问题吗？代码：

```
$('#search').typeahead({

        source: function (typeahead, query) {
                $.ajax({
                    type: "GET",
                    url: "search/" + query,
                    success: function (data) {
                        searchResult = data;
                        return typeahead.process(data);
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        console.log(thrownError);
                    }
                }); 
        }
        },
        onselect: function (obj) {
            window.location.href = "view/" + obj.id;
        },
        items: 8,
        minLength: 1,
        highlighter: function (item) {
        var artist = _.find(searchResult, function (a) {
            return item === a.value;
        });
        return ('<li>' + artist.value + ' (' + artist.dbirth + '-' + artist.ddeath + ')<li>');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:31:22.840

好的，我自己解决了。这是你必须做的：

打开bootstrap-typeahead.js，在第203行找到listen方法，修改如下：

```
 listen: function () {
    this.$element
    .on('blur',     $.proxy(this.blur, this))
    .on('keypress', $.proxy(this.keypress, this))
    .on('keyup',    $.proxy(this.keyup, this))

    // if ($.browser.webkit || $.browser.msie) {
    this.$element.on('keydown', $.proxy(this.keypress, this))
    // }

    this.$menu
    .on('click', $.proxy(this.click, this))
    .on('mouseenter', 'li', $.proxy(this.mouseenter, this))
    .on('mouseleave', 'li', $.proxy(this.mouseleave, this))
    } 
```

这里唯一的区别是我在“mouseleave”上添加了一个监听器。

转到第 278 行的 mouseenter 方法并将其更改为：

```
mouseenter: function (e) {
      $(e.currentTarget).addClass('active')
    } 
```

然后添加一个名为“mouseleave”的新方法并添加以下代码：

```
mouseleave: function () {
      this.$menu.find('.active').removeClass('active')
} 
```

希望这将帮助任何有类似问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T23:39:46.727

这是一个更简单的解决方案。“Blur”事件在点击事件之前绑定。只需为模糊添加延迟，这将解决问题。

```
<input type="text" placeholder="Enter a Name" onblur="hidesuggest();" id="suggestbox">
<script>
function hidesuggest(){
    setTimeout("$('#suggestbox').toggle();",200);
}
</script> 
```

额外的 200 毫秒为“单击”绑定在鼠标单击时执行提供了足够的时间。

# c++ - Looks like a reference operator but not by C++ definition

> ID：15735597
> 
> 赞同：-3
> 
> 时间：2013-03-31T23:07:25.433
> 
> 标签：c++

I don't know if the code is wrong but I'm trying to understand what in this case a `&` operator does. I know it's a refernce operator as in this [C++ site](http://www.cplusplus.com/doc/tutorial/pointers/) but the code I'm reviewing it is not in the format of `&xxxx`. I also want to point out that I'm don't speak C. Here is the code bit:

```
mask1 = uBRAddress & (inv_zero >> 32-size); 
```

All variables are unsigned long int, except size which is int. Is this mathematical addition, or just concatination - not sure how to read it.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T23:10:51.243

它是一个位运算`AND`符。

[您可以在此处](http://www.cprogramming.com/tutorial/bitwise_operators.html)找到有关其工作原理的很好的教程。

`C`顺便说一句，它在and之间共享`C++`，所以它不是`C++`特定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T23:10:53.020

[从您引用的站点中，查找此页面](http://www.cplusplus.com/doc/tutorial/operators/)上的“按位运算符” 。

# ruby - Ruby hash.update / map 值仅包含在括号内

> ID：15735611
> 
> 赞同：0
> 
> 时间：2013-03-31T23:09:10.480
> 
> 标签：ruby, regex, dictionary, split

我有以下哈希数组：

```
[
  {"type"=>"paragaph", "class"=>"red", "content"=>"[class:intro|body:This is the introduction paragraph.][body:This is the second paragraph.]"}, 
  {"type"=>"image", "class"=>"grid", "content"=>"[id:1|title:image1][id:2|title:image2][id:3|title:image3]"}
] 
```

我正在尝试将包含方括号的哈希值转换为值数组。这非常好 - 问题在于它破坏了所有其他不包含方括号的哈希值。

```
pipe_regex = /\|\s*(?=[^\[\]]*(?:\[|$))/
colon_regex = /\:\s*(?=[^\[\]]*(?:\[|$))/

array_hash.map {|m| m.update(m) {|k,v| v.scan(/\[(.*?)\]/).map {|m| m[0].split(pipe_regex)}.map {|m| m.map {|n| n.split(colon_regex)}}}} 
```

这有点混乱，但上面的代码找到了每个哈希值并根据 '[]' 字符划分它们 - 但似乎也破坏了没有 '[]' 的任何东西。然后它继续在'|'处拆分它们 然后拆分'：'，这似乎工作得很好。

然后我将这些值转换为散列，因此包含方括号的原始值现在是散列数组。

```
array_hash.map {|m| m.update(m) {|k,v| v.map {|n| Hash[n]}}} 
```

这似乎也可以正常工作。一切的最终结果是：

```
[
  {"type"=>[], "class"=>[], "content"=>[{"class"=>"intro", "body"=>"This is the introduction paragraph."}, {"body"=>"This is the second paragraph."}]}, 
  {"type"=>[], "class"=>[], "content"=>[{"id"=>"1", "title"=>"image1"}, {"id"=>"2", "title"=>"image2"}, {"id"=>"3", "title"=>"image3"}]}
] 
```

* * *

我怎样才能`.scan(/\[(.*?)\]/)`只适用于包含'[]'的字符串？所以这是结果：

```
[
  {"type"=>"paragraph", "class"=>"red", "content"=>[{"class"=>"intro", "body"=>"This is the introduction paragraph."}, {"body"=>"This is the second paragraph."}]}, 
  {"type"=>"image", "class"=>"grid", "content"=>[{"id"=>"1", "title"=>"image1"}, {"id"=>"2", "title"=>"image2"}, {"id"=>"3", "title"=>"image3"}]}
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:55:05.597

工作算法：

```
array_hash.map {|m| m.update(m) {|k,v| v[/\[.*\]/] ? v.scan(/\[(.*?)\]/).map {|m| m[0].split(pipe_regex)}.map {|m| m.map {|n| n.split(colon_regex)}} : v}}
array_hash.map {|m| m.update(m) {|k,v| v.kind_of?(Array) ? v.map {|n| Hash[n]} : v}} 
```

# machine-learning - 为什么有些分类器在 WEKA 中不可用？

> ID：15735621
> 
> 赞同：3
> 
> 时间：2013-03-31T23:10:36.423
> 
> 标签：machine-learning, weka

我有一个数据集，对于数据集，不是每个分类器都可用？如何更改我的数据集以获取例如 J48 适用于我的数据集？

谢谢。

```
@relation test

@attribute SQ numeric
@attribute DH numeric
@attribute EEG1 numeric
@attribute EEG2 numeric
@attribute ECG numeric
@attribute EM numeric
@attribute FATIGUE numeric

@data
0.9,0.06,0.4,0.3,0.12,0.19,0.1
0.9,0.17,0.4,0.5,0.42,0.19,0.18
0.5,0.5,0.5,0.5,0.5,0.7,0.5
0.5,0.5,0.45,0.45,0.42,0.56,0.39
0.01,1,1,0.99,1,1,1
0.7,0.17,0.3,0.4,0.28,0.69,0.24
0.8,0.28,0.5,0.4,0.44,0.19,0.24
0.88,0.17,0.45,0.4,0.42,0.7,0.26
0.1,0.83,0.9,0.89,1,0.75,0.884
0.15,0.96,0.75,0.8,0.92,0.75,0.884
0.23,0.83,0.75,0.78,0.75,0.74,0.83
0.19,0.86,0.7,0.75,0.73,0.89,0.83
0.1,0.63,0.7,0.7,0.71,0.74,0.756
0.34,0.68,0.8,0.75,0.72,0.73,0.756
0.08,0.92,0.98,0.98,0.82,1,0.926
0.1,0.93,0.93,0.95,1,1,0.926
0.065,0.92,0.95,0.95,0.75,1,0.926 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T23:17:17.220

`J48`是一个决策树分类器，不能预测数字属性。您的数据集中只有数字属性，因此您不能使用`J48`. 如果您有分类属性，则将有更多分类器可用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-06T13:06:39.790

问题是对于类属性，您有*数字输入*，但*j48 需要名义输入*。

因此，在 weka 中，在*预处理*选项卡中选择*过滤器->无监督->属性->NumericToNominal*

你完成了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-08T09:19:14.180

在 Weka 3.7.2 及更高版本中，Weka 引入了“包管理器”（如市场）并将一堆东西移到可单独安装的“包”中。这样做是为了使对 Weka 的贡献更容易（并开放 Weka 以供第三方库使用）并减轻 Weka 团队的维护负担。您可以在 GUIChooser-->Tools 中找到包管理器。

包管理器窗口打开后，您可以看到可用包的列表，选择要添加到分类器中的包。然后单击顶部的安装按钮，它将被下载。

如果您收到与 java 相关的任何错误，请单击“刷新存储库缓存”并再次选择包并安装它。这一次，它不会显示任何错误。

包也可以通过网络浏览： [http ://weka.sourceforge.net/packageMetaData/](http://weka.sourceforge.net/packageMetaData/)

# c# - 在视图中使用字符串... Asp.net Mvc

> ID：15735623
> 
> 赞同：-3
> 
> 时间：2013-03-31T23:10:52.267
> 
> 标签：c#, asp.net-mvc, entity-framework

我有这样的代码：

```
@foreach (var query in ViewBag.listBestPlaces)
{
     int i =1;

     string aux1 = i.ToString;

//code
} 
```

我无法这样做......我在行字符串 aux1 = i.ToString;... 我已经尝试过 string aux1 = (@i).ToString 并且没有工作......

编辑：抱歉打扰，我忘了放 ToString()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:12:16.797

试试这个：

```
 string aux1 = i.ToString(); 
```

ToString 是一种方法，因此需要用大括号调用它。

# json - 从我不拥有的网站获取信息

> ID：15735629
> 
> 赞同：0
> 
> 时间：2013-03-31T23:11:30.050
> 
> 标签：json, parsing

标题可能有点模糊，请允许我解释一下。

我想从我不拥有或无法控制的网站中提取信息，例如，我想用 JSON 或类似的方式解析这些数据。

我在理解解析时遇到问题。网站管理员是否需要以 JSON 格式提供他们的数据才能让我获取该数据？

或者我可以通过提供特定信息的 URL 和 html 元素来获得我想要的任何数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:16:21.857

您可以获取站点中公开可用的任何数据，就像 Web 浏览器一样。但按原样，不是你想要的格式。您必须从它提供给您的 HTML 代码或您正在下载的任何格式中解析和提取信息。

您将如何做到这一点将取决于从您使用的语言开始的许多因素。

# javascript - jQuery MultiSelect .val() 与“getChecked”不一致

> ID：15735632
> 
> 赞同：2
> 
> 时间：2013-03-31T23:12:16.403
> 
> 标签：javascript, jquery, multi-select

我正在使用 Eric Hynds 的 MultiSelect 控件： [http ://www.erichynds.com/blog/jquery-ui-multiselect-widget](http://www.erichynds.com/blog/jquery-ui-multiselect-widget)

该控件似乎工作正常，除非我尝试获取值，否则 .val() 方法不会给我所有选中的项目 - 它只会给我选定列表中的一个项目。

要获取所有项目，我需要使用更长的形式： var values = $("#retailersSelect").multiselect("getChecked").map(function () {return this.value;}).get() ;

知道为什么 .val() 不会给我一系列结果吗？

完整的 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>Test Page</title>
    <link href="/css/redmond/jquery-ui-1.10.2.custom.css" rel="stylesheet" type="text/css" />
    <link href="/css/jquery.multiselect.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="/js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="/js/jquery-ui-1.10.2.custom.js"></script>
    <script type="text/javascript" src="/js/jquery.multiselect.js"></script>
</head>
<body>
    <form action="test.htm" method="post">
        <div id="main">

            <select id="retailersSelect">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>

            <br />
            <input type="button" id="ExecuteReportButton" value="Butt" />

            <script type="text/javascript">
                $(function () {

                    //set up the multi selects
                    $("#retailersSelect").multiselect({
                        selectedList: 3, // 0-based index
                        header: false,
                        noneSelectedText: "Select a retailer"
                    });

                    $("#ExecuteReportButton").click(function () {
                        var values = $("#retailersSelect").multiselect("getChecked").map(function () {
                            return this.value;
                        }).get();
                        alert(values); //GIVES ME THE FULL ARRAY - NICE!

                        var values2 = $("#retailersSelect").val();
                        alert(values2); //ONLY GIVES ME A SINGLE ITEM - :(

                        return false;
                    });
                })
            </script>
        </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:26:06.967

您在标记中忘记了一些非常重要的内容。您没有将您的设置`select`为实际接受多个值。

```
<select multiple id="retailersSelect"> 
```

# c++ - 为什么这种方法会给出两种不同的结果？

> ID：15735639
> 
> 赞同：0
> 
> 时间：2013-03-31T23:12:48.410
> 
> 标签：c++, qt

所以我有一个类`HugeInt`，它存储一个动态整数数组，每个位对应一个小数位（arr[0] = 2^0，arr[1] = 2^1...）。所以我也有这种方法`reverse`，它可以反转数字。但主要它给出了两种不同的结果，有人可以帮忙吗？`DynArray`是我创建的动态数组类。它只包含一个 int 数组，它根据我们是否添加到数组来调整大小。（不能使用向量）

```
HugeInt HugeInt::reverse(){
    HugeInt hi;
    for (int i = 0; i < this->size; i++){
        hi.dyn.add(this->dyn[this->size - 1 - i]);
    }
    return hi;
} 
```

我的打印功能：

```
void HugeInt::print(){
    dyn.print();
}

void DynArray::print(){
    for (int i = 0; i < nextIndex; i++){
        std::cout << arr[i];
    }
} 
```

我的运营商=：

```
HugeInt& HugeInt::operator=(const HugeInt &b1)
{
    this->dyn = b1.dyn;
    this->size = b1.size;
    return *this;
} 
```

当我运行这个：

```
int main(int argc, char *argv[])
{
    HugeInt hi4("123456");

    hi4.print();
    cout << endl;
    cout << endl;
    hi4.reverse().print();
    cout << endl;
    cout << endl;
    hugeInt = hi4.reverse();
    hugeInt.print();
} 
```

我得到这些结果：

```
123456

654321

3854321

```

为什么最后一个结果与第二个结果不同？我不习惯用 c++ 编码，所以我觉得它可能是我忽略的某种 c++ 东西？

更新：好的，所以我现在完全迷路了。我将我的 reverse() 更改为：

```
HugeInt HugeInt::reverse()
{
    return *this;
} 
```

我的主要是：

```
int main(int argc, char *argv[])
{
    HugeInt hi4("123456");

    hi4.reverse().print();
    cout << endl;
    cout << endl;
    hugeInt = hi4.reverse();
    hugeInt.print();
} 
```

并得到结果

```
123456

3223456

```

ASCII 表上的 32 是“空格”，而 38 是 &，这就是它之前所说的。我迷路了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T23:17:25.060

`HugeInt HugeInt::reverse()`这条线路**不好**。

```
this->~HugeInt(); 
```

这意味着你第一次调用`hi4.reverse()`，你就破坏了`hi4`。

之后每次使用它都是未定义的行为。

**删除该行。** 我无法弄清楚你希望在那里做什么，但“什么都不做”可能是在那里做的更好的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:34:14.373

我试图解决你的问题。我不得不对这些类内部进行一些即兴创作，但是这段代码可以完美地与`MS VS 2010`.

我的程序：

```
//file: header.h
//author: kupto
#pragma once
#include <iostream>
#include <stdio.h>
#include <vector>

class DynArray
{
    std::vector<char> arr;

public:
    void print();
    void add(char c) {arr.push_back(c);};
    char get(int pos) {return (arr[pos]);};
    int size() {return arr.size();};
};

void DynArray::print()
{
    for (int i = 0; i < this->size(); i++)
        std::cout << arr[i];
    std::cout << std::endl;
}

class HugeInt
{
    DynArray dyn;

public:
    void print() {dyn.print();}
    int size() {return (dyn.size());}

    HugeInt HugeInt::reverse();

    HugeInt(char* str);
    HugeInt() {};

};

HugeInt::HugeInt(char* str)
{
    char c;
    int i = 0;
    c = str[i];

    while (c)
    {
        dyn.add(c);
        c = str[++i];
    }
}

HugeInt HugeInt::reverse()
{
    HugeInt hi;
    for (int i = 0; i < this->size(); i++){
        hi.dyn.add(this->dyn.get(this->size() - 1 - i));
    }
    return hi;
} 
```

和源文件：

```
//file: source.cpp
//author: Kupto
#include "header.h"

using namespace std;

int main()
{
    HugeInt hi4("123456");

    hi4.print();
    hi4.reverse().print();
    HugeInt hugeInt = hi4.reverse();
    hugeInt.print();
    hi4 = hugeInt;
    hi4.print();
    hi4 = hi4.reverse();
    hi4.print();
    return 0x00;
} 
```

输出如预期：

```
123456
654321
654321
654321
123456 
```

请注意，我使用`DynArray::get(int)`方法而不是您的`operator[int]`. 祝你的代码好运。

# android - OnListItemclick 只需要响应按钮按下

> ID：15735642
> 
> 赞同：0
> 
> 时间：2013-03-31T23:13:08.223
> 
> 标签：android, listview, adapter

我有一个带有自定义适配器的列表视图并实现了 onListItemClick。我每行都有一些组件，当单击行中的某些内容时，它会启动一个活动。我想知道，只有当您单击启动活动的按钮而不是在行中随机按下时，我才能设置它？还是在适配器本身中为每个按钮设置 onClick 更好？

扩展 ListActivity ：

```
@Override
protected void onListItemClick(ListView l, View v, int pos, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, pos, id);

            Intent i = new Intent(LevelMenu.this,AreaMenu.class);
            i.putExtra("level_value", (pos+1));
            startActivity(i);

    }
} 
```

按钮 ：

```
<Button
    android:id="@+id/level"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/unlock"
    android:layout_centerHorizontal="true"
    android:focusable="false"
    android:clickable="false"
    android:text="Play" /> 
```

列表显示：

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:divider="@null"
    android:dividerHeight="15dp" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:21:44.203

如果您不想被调用，则有一个方法`setEnable`，只需从中返回 false 。`baseAdapter``onItemClick`

对于您的情况`boolean`，从您的按钮传递一个值，`onClick`并在此基础上返回`true`of `false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:16:33.437

如果没有看到你实际上是如何做的，这可能会很困难。你可以做什么，如果你只有一个一般的 onClick，你可以检查以确保它`View v`是`instanceof Button`从按钮中获取 id、标签或其他任何东西，并使用它来启动你的活动。

```
public void onClick(View v){
    if( v instanceof Button){
        //a button was clicked!
    }
} 
```

# c++ - _itoa_s 一直在杀死 C++ 优化编译器，为什么？

> ID：15735644
> 
> 赞同：-1
> 
> 时间：2013-03-31T23:13:45.127
> 
> 标签：c++, visual-c++, compiler-optimization, itoa

我有一个代码，每次启动时优化编译器总是失败。

```
char* GetWinSockVersion()
{
    char *tmpData = (char*)malloc(sizeof(wsaData.wVersion));
    _itoa_s<wsaData.wVersion>(wsaData.wVersion, tmpData, 10);
    return tmpData;
} 
```

它确实失败了`_itoa_s`。我很感兴趣，为什么它总是失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T23:59:20.053

您没有正确使用该功能。

[`_itoa_s`](http://msdn.microsoft.com/en-us/library/0we9x30h%28v=vs.80%29.aspx)需要 4 个参数。

此函数旨在与 一起使用`c`，因为`c++`您有流。

您的代码应该更像（假设*wsaData.wVersion*是一个数字）

```
char *tmpData = (char*)malloc(sizeof( char ) * 80 );
_itoa_s(wsaData.wVersion , tmpData , 80 , 10);

//_itoa_s(number to convert , target string, size of target string, number base); 
```

# php - 回声内的PHP单选按钮

> ID：15735645
> 
> 赞同：1
> 
> 时间：2013-03-31T23:13:58.287
> 
> 标签：php, button, radio

```
 echo    "<form class='custom'>";
foreach ($prices->item as $item){
      $ongkir = $item->value;
      $transfer = $total_jne * 1000;
      $transfer_rp = $transfer + $ongkir;
      $jne = $item->service;
      $checked = ($jne == $_POST['ongkir'])? ' checked="checked"' : '';
      echo  "<tr><td><label for='$item'>
      <input class='custom' name='ongkir' $checked type='radio' id='ongkir'> $jne</label></td>";
      echo  "<td>Rp. $ongkir</td>";
      echo  "<td>Rp. $transfer_rp</td></tr>";}
      echo  "</table><hr></form>" ;
    } 
```

大家好，我如何使用 value='$transfer_rp' 将“已检查”发布到另一个带有按钮的 php 文件？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:26:41.130

无线电输入将作为“真”或“假”出现，而不是作为其名称属性的值，所以试试

`$checked = ($jne == 'ongkir' && isset($_POST['ongkir']) && $_POST['ongkir'] == "true" )? ' checked="checked"' : '';`

或者，因为这很难看

```
$checked = '';
if( $jne == 'ongkir' && isset($_POST['ongkir']) && $_POST['ongkir'] == "true" ){
    $checked = 'checked="checked"';
} 
```

# django - 如何使用 Extra Scopes 获得 Google Auth2 身份验证？

> ID：15735648
> 
> 赞同：2
> 
> 时间：2013-03-31T23:15:10.330
> 
> 标签：django, oauth-2.0, django-socialauth

我已经根据文档设置了我的 Django 社交身份验证。具有以下内容：

```
GOOGLE_OAUTH_EXTRA_SCOPE = ['https://www.googleapis.com/auth/calendar']
GOOGLE_OAUTH2_CLIENT_ID      = *client id here*
GOOGLE_OAUTH2_CLIENT_SECRET  = *client secret here* 
```

在 API 控制台中，我已将其设置为具有重定向 URI 的 Web 应用程序，如 omab 所说：

```
http://localhost:8000/complete/google-oauth2/ 
```

在我的模板中，我有：

```
<a href="{% url socialauth_begin 'google' %}" class="google_login_button">Login with Google </a> 
```

但是，当我测试应用程序时，oAuth 不会要求“日历权限”，只是默认的电子邮件权限。

我错过了什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:47:50.997

经过一番搜索，这是一个愚蠢的错误。链接应该是：

{% url socialauth_begin 'google-oauth2' %}

当文档说以后端中任何内容的名称写入时，我误解了文档。

希望这对未来的人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-16T23:01:25.570

使用新的 python-social-auth 和 django > 1.4 来拯救某人

用这个 ：

```
{% url 'social:begin' 'twitter' %} 
```

# c++ - 即使我认为我的链接正确（MSVC），也无法解析外部符号

> ID：15735653
> 
> 赞同：3
> 
> 时间：2013-03-31T23:15:49.183
> 
> 标签：c++, visual-studio-2010, linker, sdl, dynamic-linking

我有一个使用 SDL 作为外部库的项目。该项目使用 _SDL_WM_SetCaption、_SDL_FillRect 或 _SDL_MapRGBA 等函数。我已经告诉链接器包含两个库 SDL.lib 和 SDLmain.lib 并告诉它查看放置这些库的文件夹。我还使用 dumpbin.exe 检查了库文件，并且功能在那里。但是，它仍然无法编译/链接？为什么？有人有想法么？

编辑：这是链接器/编译器错误的示例输出：

```
 14>libtestd.lib(sdlgl.obj) : error LNK2019: unresolved external symbol _SDL_WM_SetCaption referenced in function "public: void __thiscall SDLGLEngine::SetTitle(char *)" (?SetTitle@SDLGLEngine@@QAEXPAD@Z)
14>libtestd.lib(sdlgl.obj) : error LNK2019: unresolved external symbol _SDL_FillRect referenced in function "public: bool __thiscall SDLGLEngine::Init(int,int,int,bool)" (?Init@SDLGLEngine@@QAE_NHHH_N@Z)
14>libtestd.lib(sdlgl.obj) : error LNK2019: unresolved external symbol _SDL_MapRGBA referenced in function "public: bool __thiscall SDLGLEngine::Init(int,int,int,bool)" (?Init@SDLGLEngine@@QAE_NHHH_N@Z)
14>libtestd.lib(sdlgl.obj) : error LNK2019: unresolved external symbol _SDL_SetVideoMode referenced in function "public: bool __thiscall SDLGLEngine::Init(int,int,int,bool)" (?Init@SDLGLEngine@@QAE_NHHH_N@Z)
14>libtestd.lib(sdlgl.obj) : error LNK2019: unresolved external symbol _SDL_GL_SetAttribute referenced in function "public: bool __thiscall SDLGLEngine::Init(int,int,int,bool)" (?Init@SDLGLEngine@@QAE_NHHH_N@Z)
14>libtestd.lib(sdlgl.obj) : error LNK2019: unresolved external symbol _SDL_Quit referenced in function "public: bool __thiscall SDLGLEngine::Init(int,int,int,bool)" (?Init@SDLGLEngine@@QAE_NHHH_N@Z)
14>libtestd.lib(sdlgl.obj) : error LNK2019: unresolved external symbol _SDL_Init referenced in function "public: bool __thiscall SDLGLEngine::Init(int,int,int,bool)" (?Init@SDLGLEngine@@QAE_NHHH_N@Z) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T07:16:26.113

可能的原因：

*   sdl.lib 和 sdlmain.lib 设置未添加到依赖项列表
*   它们的位置未添加到链接器查找的目录列表中
*   您的库的 32 位和 64 位版本不匹配。

# iphone - 应用程序根据 AppStore 规则与 iOS 中的远程服务器通信

> ID：15735661
> 
> 赞同：0
> 
> 时间：2013-03-31T23:16:39.563
> 
> 标签：iphone, ios, app-store

我正在创建一个 WhoIs 应用程序，用户可以获得有关网站的详细信息。我的应用程序连接到我的服务器（使用 NSURLConnection）并从服务器中的 PHP 页面获取信息。我在发送时不加密数据，因为它不包含有关用户的任何私人信息。AppStore Review Guideline 可以吗？还是我应该做点什么？Apple Documents 中没有关于此的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:19:26.743

您描述您的方法的方式非常好，并且符合指南。

我建议你看看[WhoAPI](http://whoapi.com/)，他们提供了一个 RESTful API 来获取域和服务器上的数据。

我也强烈推荐使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)（它建立在`NSURLConnection`.

[AFNetworking](https://github.com/AFNetworking/AFNetworking)使与 API 的交互变得轻而易举，并允许您将网络代码与应用程序的其余部分正确分离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T00:26:23.270

这是可以接受的。只要您不通过开放连接处理私人信息，您就不会对 Apple 审查有任何问题。

# google-chrome - 使用 AngularJS 异步获取 Chrome 选项卡

> ID：15735668
> 
> 赞同：1
> 
> 时间：2013-03-31T23:18:01.193
> 
> 标签：google-chrome, google-chrome-extension, angularjs

在 AngularJS 应用程序（Chrome 扩展程序）中，我需要获取当前选项卡的标题和 URL，然后才能执行任何有用的操作。这个函数接受一个回调，它接收有问题的选项卡。但是，我不想记录选项卡对象，而是想在它可用时将其传递给模块/服务。我怎样才能做到这一点？

```
chrome.tabs.query({currentWindow: true, active: true}, function(tabs) {
    console.log(tabs[0]);
}); 
```

*chrome.tabs.query()*显然没有返回值。

**编辑**
我被卡住了。我试图让你的例子起作用：

[http://jsfiddle.net/yW5G7/](http://jsfiddle.net/yW5G7/)

失败后，我添加了一个非常简单的测试服务来证明应用程序的其余部分可以正常工作。也许有人可以在注释掉的块中修复我的服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:35:18.957

您可以使用 AngularJs 的延迟初始化或创建一个服务，该服务返回一个异步解析选项卡信息的承诺。

延迟初始化：

*   删除 ng-app 指令并在获得信息后[手动引导 Angular](http://docs.angularjs.org/api/angular.bootstrap)：

```
chrome.tabs.query({currentWindow: true, active: true}, function(tabs) {
  angular.bootstrap(document);
}); 
```

[带有承诺](http://docs.angularjs.org/api/ng.%24q)的异步服务：

```
module.service('Chrome', function($q) {
  return function() {
    this.getInfo = function() {
      var deferred = $q.defer();
      chrome.tabs.query({currentWindow: true, active: true}, function(tabs) {
        deferred.resolve(tabs[0]);
      });
      return deferred.promise;
    };
  };
}); 
```

最佳方法取决于您的初始化过程在多大程度上取决于选项卡，以及获取此信息对于解决扩展的特定部分的重要性。

# django - 最佳实践：Django 多语言

> ID：15735672
> 
> 赞同：10
> 
> 时间：2013-03-31T23:18:41.813
> 
> 标签：django, django-models, multilingual

我是 django 的初学者。（我刚刚完成了教程并遵循了本指南[http://www.gettingstartedwithdjango.com](http://www.gettingstartedwithdjango.com)）我想制作一个包含多语言内容的网站，我会知道哪个是最佳实践，至少对于模型：

1.  使用不同的表格（每种语言 1 个）
2.  只使用一个表，在模型中为语言使用一个额外的属性
3.  我不知道

Vladislav 是对的，这完全取决于表中包含的数据。举个例子：

```
class Book(models.Model):
    created_at = models.DateTimeField(auto_now_add=True, editable=False)
    name = models.CharField(max_length=255, unique=True)
    plot = models.TextField()
    slug = models.SlugField(max_length=255, blank=True, default='')

class Chapter(models.Model):
    book = models.ForeignKey(Book)
    chapter = models.SmallIntegerField()
    title = models.CharField(max_length=255, blank=True)
    pages = models.SmallIntegerField()
    pub_date = models.DateTimeField(auto_now_add=True) 
```

可能性：

1.  我可能有一本所有语言的完整书
2.  我可能有一本只有一种语言的完整书
3.  我可能有一本用一种语言写的完整的书，但只有一些用另一种语言写的章节

所以我认为我必须为每种语言保留一本书的实例，我至少有该书的一章。

我希望这很清楚！再次感谢大家

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T00:03:33.270

对我来说，这完全取决于表中包含的数据，没有一种适合所有人的尺寸。

对于系统表（类别、字段选择），我为不同的语言做一个表不同的列。旧的但很好的实现是 django-transmeta。

对于有很多行的表 - 包含通用信息的表和可翻译的表。通过这种方式，您可以即时添加语言 - 适用于您希望为用户提供多种语言选择的情况。显然我不确定这种方法有没有很好的实施。django-hvad 是一种实现，但它仍然是测试版，我个人不喜欢使用它。

[在这里](http://and-other-things.blogspot.com/2009/04/list-of-django-multilingual-model.html)您可以找到有关可用插件的更多信息。

我可以建议以下型号。

```
class Book(models.Model):
    """Model for common book info"""
    created_at = models.DateTimeField(auto_now_add=True, editable=False)
    #Other common fields

class BookTranslation(models.Model):
    """Model for translatable book info"""
    book = models.ForeignKey(Book, related_name="translations")
    language = models.CharField(max_length=2)
    name = models.CharField(max_length=255, unique=True)
    slug = models.SlugField(max_length=255, blank=True, default='')
    plot = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True, editable=False)

class Chapter(models.Model):
    """Model for common chapter info"""
    pub_date = models.DateTimeField(auto_now_add=True)
    pages = models.SmallIntegerField()

    #I'll suggest such relation so you can get the chapters from book 
    #and book translation objects
    #related_name='+' means no related_name
    #You need to specify it when you have 2 FK to same model
    book = models.ForeignKey(Book, related_name='+')
    book_translation = models.ForeignKey(Book, related_name='chapters')

class ChapterTranslation(models.Model):
    """Model for translatable chapter info"""
    chapter = models.ForeignKey(Chapter, related_name="translations")
    language = models.CharField(max_length=2)
    title = models.CharField(max_length=255, blank=True) 
```

在这种情况下，您最好熟悉[select-related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)和[prefetch-related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)

在任何情况下，您都需要在顶部构建一个抽象，以便使用该结构感到舒适。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T02:06:47.703

根据您当前的模型和您描述的三种可能性，您可以尝试以下方法来翻译您的模型信息：

```
class Book(models.Model):
    language = models.CharField(max_length=2)
    created_at = models.DateTimeField(auto_now_add=True, editable=False)
    name = models.CharField(max_length=255, unique=True)
    plot = models.TextField()
    slug = models.SlugField(max_length=255, blank=True, default='')

class BookTranslation(models.Model):
    book = models.ForeignKey(Book, related_name="translations")
    language = models.CharField(max_length=2)
    created_at = models.DateTimeField(auto_now_add=True, editable=False)
    name = models.CharField(max_length=255, unique=True)
    plot = models.TextField()
    slug = models.SlugField(max_length=255, blank=True, default='')

class Chapter(models.Model):
    book = models.ForeignKey(Book)
    language = models.CharField(max_length=2)
    chapter = models.SmallIntegerField()
    title = models.CharField(max_length=255, blank=True)
    pages = models.SmallIntegerField()
    pub_date = models.DateTimeField(auto_now_add=True)

class ChapterTranslation(models.Model):
    chapter = models.ForeignKey(Chapter, related_name="translations")
    title = models.CharField(max_length=255, blank=True)
    pages = models.SmallIntegerField() 
```

然后在您的视图中，您可以执行以下操作：

```
# Get user language, default 'en'
lang = request.session.get('django_language', 'en')

book = Book.objects.get(...)
book_translation = book.translations.filter(language__exact=lang)[0]

return render_to_response(...,
{
    'book': book_translation
}) 
```

正如 Vladislav 在他的回答中建议的那样，查看当前可用的所有不同的 django-multilingual 作为我在此处描述的替代方案。

至于翻译您的网站静态内容，这非常简单。查看[Django 国际](https://docs.djangoproject.com/en/dev/topics/i18n/)化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-23T01:25:55.620

如果您不想手动管理每个模型，可以尝试使用 django-linguo 之类的方法。它根据您的 Meta 类翻译属性和您的 settings.py 文件中的 LANGUAGES 设置为您喜欢的字段创建翻译。

我强烈建议查看一些可用于 Django 的国际化包，例如[django-rosetta](https://github.com/mbi/django-rosetta)和[django-linguo](https://github.com/zmathew/django-linguo)。Django-linguo 帮助翻译模型内容，而 django-rosetta 看起来像是为您的翻译添加了一个管理界面。

我还没有真正玩过 django-rosetta，但它看起来也很有趣。希望这可以帮助 ：）

# python - 列表列表列表的Python排列

> ID：15735674
> 
> 赞同：0
> 
> 时间：2013-03-31T23:19:01.940
> 
> 标签：python, algorithm

我有一个列表列表，例如：

```
[ 
  [ 
    [ 1, 2, 3 ], [ 3, 2, 1 ], [ 3, 1, 2 ] 
  ], 
  [ 
    [ 4, 5, 6 ], [ 6, 4, 5 ] 
  ],
  [ 
    [ 8, 9, 10 ], [ 10, 8, 9 ], [ 10, 9, 8 ]
  ]
] 
```

我需要找到这些中间列表的所有排列，垂直作为列......

```
[
  [
    [ 1, 4, 8 ], [ 1, 4, 10 ], [ 1, 4, 10 ], 
    [ 1, 6, 8 ], [ 1, 6, 10 ], [ 1, 6, 10 ],
    [ 3, 4, 8 ], [ 3, 4, 10 ], [ 3, 4, 10 ],
    [ 3, 6, 8 ], [ 3, 6, 10 ], [ 3, 6, 10 ],
    [ 3, 4, 8 ], [ 3, 4, 10 ], [ 3, 4, 10 ],
    [ 3, 6, 8 ], [ 3, 6, 10 ], [ 3, 6, 10 ]
  ],
  ...
] 
```

很难解释，但基本上，每个具有 3 个不同数字的列表都是每行中可能的“行”......所以第 0 行可能是 1,2,3 或 3,2,1 或 3,1,2 ...

我需要做的是找到每列的所有可能列，这意味着循环遍历行的每个可能组合并从该行组合生成列。

如果有人知道我的意思并且可以更好地表达它，或者可以帮助我解决它，请做！我觉得 itertools.permutations 会帮助我，但我不知道如何告诉它从每个可能的行中选择 1 个......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:04:37.577

因此，如果不为您编写整个解决方案，我认为您可以很容易地做到这一点，您只需要编写按照您想要的顺序抓取列表的算法。让我看看我是否可以写一个小例子：

```
first loop through:

ixx xxx xxx
ixx xxx xxx
ixx xxx xxx

second loop through:

ixx xxx xxx
ixx xxx xxx
xix xxx xxx

third loop through:

ixx xxx xxx
ixx xxx xxx
xxi xxx xxx 
```

`y`在您最大的列表中，您可以使用, `x`,坐标获取每个单独的字母`z`，然后慢慢地获取`x`and`y`直到它们需要翻转和递增`z`。

```
 y  x  z
 first_val = master_list[0][0][0] #1
second_val = master_list[1][0][0] #4
 third_val = master_list[2][0][0] #8 
```

然后您必须以`val`相同的方式将三个 s 放入一组类似的列表中。

# python - Python 列表 - 避免编写太多列表文件

> ID：15735678
> 
> 赞同：1
> 
> 时间：2013-03-31T23:19:22.383
> 
> 标签：python, list

以下代码所做的只是：它读取文件中的列表，按第二列对其进行排序并将输出写入新文件。

```
import operator

original_flightevent = 'flightevent.out.1'
new_sorted_flightevent = 'flightevent.sorted.out.1'
readfile1 = open(original_flightevent, 'r')
writefile1 = open(new_sorted_flightevent, 'a')
writefile2 = open('flightevent.sorted.out.2', 'a')

def sort_table(table, col=1):
    return sorted(table, key=operator.itemgetter(col), reverse=False)

if __name__ == '__main__':
    data = (line.strip().split(';') for line in readfile1)
    for line in sort_table(data, 1):
        print >> writefile1, line

readfile2 = open(new_sorted_flightevent, 'r')
numline=1
for i in range(numline):
    readfile2.next()
for line in readfile2:
    p=line
    if p:
     writefile2.write(p) 
```

避免写入输出文件的最佳方法是什么，而不是将其存储在内部列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:28:33.550

您可以简单地重新分配给数据（使用[slice](https://stackoverflow.com/questions/509211/the-python-slice-notation)），如下所示：

```
if __name__ == '__main__':
    with open('flightevent.out.1', 'r') as original:
        data = (line.strip().split(';') for line in original)
    output_data = sort_table(data, 1)[1:]
    open('flightevent.sorted.out.1', 'a') as out:
        for line in output_data:
            print >> out, line 
```

# php - 如何在php中完成选择时检查存储的值

> ID：15735680
> 
> 赞同：0
> 
> 时间：2013-03-31T23:19:39.100
> 
> 标签：php, mysql, variables, html-select

我认为我没有将下拉菜单中的“week_num”数值传递到我的第二页。

```
$wquery="select week_num,week_name from stats_week where season=$this_season order by week_num";
$wresult=mysql_query($wquery);
    print "Select Week:<select name='Week_select'><br>\n";
    while ($wrow=mysql_fetch_array($wresult))
    { 
    print '<option value="'.$wrow['week_num'].'">'.'week '.$wrow['week_num'].'     '.$wrow['week_name'].'</option><br>\n';  
    }
print "</select>";

    print'<button type="submit" >Next</button>'; 
```

我的第二页显示：打印“”；week selected = 选择团队和仅包含第 1 周团队的下拉框。

第2页的开始代码：

```
 $varWeek=#_post['Week_select'];
print "week selected = $varWeek";
 print'<form action="changeplayer_3.php" method="post">';  
  $tquery="select st.team_num,st.name from stats_team st left join stats_results sr on st.team_num=sr.team_num where sr.season=$this_season and sr.week=$varWeek group by st.team_num order by name";
    $tresult=mysql_query($tquery);
    print "Select team:<select name='team_select'><br>\n";
    while ($trow=mysql_fetch_assoc($tresult)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:24:20.180

您的错误来自第 2 页开头代码中的这一行：

```
$varWeek=#_post['Week_select']; 
```

它应该是

```
$varWeek=$_POST['Week_select']; 
```

# java - 没有得到计算结果的简单平均程序

> ID：15735682
> 
> 赞同：0
> 
> 时间：2013-03-31T23:20:00.367
> 
> 标签：java

运行时，结果就像没有输入值一样。我希望有人或所有人可以审查代码和批评。

```
package practice_array_tables;

import javax.swing.*;

public class Practice_Array_Tables {
    public static void main(String[] args) {
     //Variables
        String Principal, Rate, Time;

        //Prompt user for input via JOptionPane.showInputDialog
        Principal = JOptionPane.showInputDialog(" Enter Principle Amount. ");

          //Enter Rate.
        Rate = JOptionPane.showInputDialog(" Enter Rate, i.e 0.10 ");

        //Enter Time
        Time = JOptionPane.showInputDialog(" Enter Time ");

        //Parse String to Int.
        int p = Integer.parseInt(Principal);
        int r = Integer.parseInt(Rate);
        int t = Integer.parseInt(Time);

        //Compute Compound Interest.\
       double CompoundInterest = p * Math.pow((1+r / 100), t );
       double c = CompoundInterest;

       //Print results to JOptionPane.showMessageDialog.
        JOptionPane.showMessageDialog(null, " your answer " + c);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T23:26:53.500

你为什么要做一个双倍，然后将同一个双倍分配给一个新的双倍？我还认为你的复利公式是错误的。A=P(1+(r/n))^nt

此外，您将 Rate 解析为 int，有效地将其设为 0。您应该将其解析为 double。具体看这两行（不连续）

```
Rate = JOptionPane.showInputDialog(" Enter Rate, i.e 0.10 ");
int r = Integer.parseInt(Rate); 
```

如果您查看 Double 类下的 java API，您会发现一个与 parseInt 非常相似的 parseDouble 方法。简单地做

```
double r = Double.parseDouble(Rate); 
```

这会给你你所期望的；带小数的数字。我怀疑您的问题可能来自乘以 0。

# java - 将许多对象绘制到 JPanel 上的替代方法

> ID：15735687
> 
> 赞同：0
> 
> 时间：2013-03-31T23:20:39.643
> 
> 标签：java, sql, serialization, arraylist

我将重写下面的类以使用构造函数并做一些更聪明的事情（而不是像四个 producer() 这样的方法 - 所以不用担心。

目前我遍历这四个数组列表，然后将对象绘制到 JPanel 上。在大约 2-3000 个对象之后，这可能会导致一些显着的延迟。

我可以用什么来替代这些数组列表？某种类型的 JSON/XML 序列化会起作用吗？在我的专业编码（而不是这个简单的副项目）中，我使用了一个庞大的系统，该系统使用 DataNucleus 将模型类转换为 SQL 中的表结构——我觉得这对于我有趣的副项目来说将是巨大的矫枉过正。想法？

```
public class Life {
PlayPanel panel;
public int prodSeed;
public int herbSeed;
public int predSeed;
public int decoSeed;
public ArrayList<Producer> prodStore = new ArrayList<Producer>();
public ArrayList<Herbivore> herbStore = new ArrayList<Herbivore>();
public ArrayList<Predator> predStore = new ArrayList<Predator>();
public ArrayList<Decomposer> decoStore = new ArrayList<Decomposer>();

public Life() {
}

public void setPanel(PlayPanel p) {
    panel = p;
}
public void producers() {
    for(int j = 0; j < prodSeed; j++) {
        Producer p = new Producer(panel.life);
        prodStore.add(p);
    }
    panel.producerPaint = true;
}
public void herbivores() {
    for(int j = 0; j < herbSeed; j++) {
        Herbivore h = new Herbivore(panel.life);
        herbStore.add(h);
    }
    panel.herbivorePaint = true;
}
public void predators() {
    for(int j = 0; j < predSeed; j++) {
        Predator p = new Predator(panel.life);
        predStore.add(p);
    }
    panel.predatorPaint = true;
}
public void decomposers() {
    for(int j = 0; j < decoSeed; j++) {
        Decomposer d = new Decomposer(panel.life);
        decoStore.add(d);
    }
    panel.decomposerPaint = true;
}
public void beginAction() {
    for (int j = 0; j < prodStore.size(); j++) {
        prodStore.get(j).behavior();panel.repaint();        
    }
    for (int j = 0; j < herbStore.size(); j++) {
        herbStore.get(j).behavior();panel.repaint();
    }
    for (int j = 0; j < predStore.size(); j++) {
        predStore.get(j).behavior();panel.repaint();
    }
    for (int j = 0; j < decoStore.size(); j++) {
        decoStore.get(j).behavior();panel.repaint();
    }
    //Use booleans between these for loops to not repaint an extra amount of action

} 
```

JPanel 类中非常痛苦的paintComponent 方法：

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    if(producerPaint == true) {
        //int j = 0;

        while(j < life.prodStore.size()) {
            g.setColor(new Color(19,145,14));
            g.fillOval(life.prodStore.get(j).getxAxis(), life.prodStore.get(j).getyAxis(), life.prodStore.get(j).getxSize(), life.prodStore.get(j).getySize());
            j++;
        }
        j=0;
    }
    if(herbivorePaint == true) {
        //int j = 0;

        while(j < life.herbStore.size()) {
            g.setColor(new Color(228,226,158));
            g.fillOval(life.herbStore.get(j).getxAxis(), life.herbStore.get(j).getyAxis(), life.herbStore.get(j).getxSize(), life.herbStore.get(j).getySize());
            j++;
        }
        j=0;
    }
    if(predatorPaint == true) {
        //int j = 0;

        while(j < life.predStore.size()) {
            g.setColor(new Color(207,87,87));
            g.fillOval(life.predStore.get(j).getxAxis(), life.predStore.get(j).getyAxis(), life.predStore.get(j).getxSize(), life.predStore.get(j).getySize());
            j++;
        }
        j=0;
    }
    if(decomposerPaint == true) {
        //int j = 0;

        while(j < life.decoStore.size()) {
            g.setColor(Color.white);
            g.fillOval(life.decoStore.get(j).getxAxis(), life.decoStore.get(j).getyAxis(), life.decoStore.get(j).getxSize(), life.decoStore.get(j).getySize());
            j++;
        }
        j=0;
    }
} 
```

作为一个相关的旁注：当我处理这段代码时，我将不再使用布尔值（项目已经有一年或两年了，在我知道自己在做什么之前）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:58:13.910

在一个组件上绘制很多很多项目不是问题，但它不应该发生在`paintComponent`. 您想要做的是有一个单独的图像（例如`BufferedImage`），在该图像上绘制，然后您`paintComponent`只负责将该图像绘制到 JPanel 上。因此，您的用户并没有看到所有这些被一一绘制的东西。他们只看到最终产品。

搜索“Java 中的双缓冲”以获取有关此想法的精彩演示。

至于数据结构，保留 4 个列表就可以了，但您可能希望拥有更多在所有对象之间共享的抽象绘图实用程序。例如，除了颜色之外，您绘制它们的方式几乎相同，因此创建一个绘图方法，该方法接受超类（例如`BiologyObject`）到任何这些子类（例如`Producer`，`Decomposer`等）作为参数。让我知道这是否没有意义。

更新：绘制到 JPanel 的正确方法

```
private BufferedImage image;

public MyClass() {
    image = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_ARGB);
}

public void paintOntoImage() {
    //here is where you would draw all the things that you currently have in your paintComponent method
    Graphics2D g = (Graphics2D) image.getGraphics();
    g.setColor(Color.white);
    g.fillRect(0, 0, WIDTH, HEIGHT);

    //now you can call "g.fillOval" or any other methods on "g"
}

public void paintComponent(Graphics g) {
    g.drawImage(image, 0, 0, null);
} 
```

# iphone - 如何将应用上传到越狱手机市场

> ID：15735690
> 
> 赞同：1
> 
> 时间：2013-03-31T23:21:09.133
> 
> 标签：iphone, upload, jailbreak

我不想支付 99 美元来上传应用程序，所以有什么替代方法可以上传我的应用程序供其他人下载，我愿意为越狱手机下载我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:28:27.860

您可以通过[Cydia](http://cydia.saurik.com/)分发您的应用程序- 这个问题在该主题上有一些很好的答案：[如何为 Cydia 商店构建应用程序？](https://stackoverflow.com/questions/4756444/how-to-build-an-app-for-cydia-store)

显然，这显着减少了可以使用该应用程序的人数 - 但只要您对此没有问题，它应该可以工作。

# python - 在python中使用范围选择一系列文件

> ID：15735694
> 
> 赞同：1
> 
> 时间：2013-03-31T23:21:30.883
> 
> 标签：python, iteration, range

我想知道有没有办法使用 python range 命令选择一系列文件，实际上我正在运行 modeler 9.11 进行蛋白质同源性建模？

这是python脚本：

```
from modeller import *
from modeller.scripts import complete_pdb

log.verbose()    # request verbose output
env = environ()
env.io.atom_files_directory = './Build_models'
env.libs.topology.read(file='$(LIB)/top_heav.lib') # read topology
env.libs.parameters.read(file='$(LIB)/par.lib') # read parameters

for i in range(1, 5):
    # read model file
    code = "Brn3a.B99990000%00d1.pdb" % i
    mdl = complete_pdb(env, code)
    s = selection(mdl)
    s.assess_dope(output='ENERGY_PROFILE NO_REPORT', file='Brn3aloop.profile',
                  normalize_profile=True, smoothing_window=15) 
```

我想读取一组保存在 Build_models 目录中的蛋白质结构：

*   Brn3a.B99990001
*   Brn3a.B99990002
*   Brn3a.B99990003
*   Brn3a.B99990004
*   Brn3a.B99990005

可执行文件的输出如下所示

```
pdbnam_____E> Filename for PDB code not found: Brn3a.B9999000011.pdb
              Directories: ./Build_models 
```

那么我如何设置范围以选择上述列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:27:17.503

你快到了；你的格式应该是：

```
code = "Brn3a.B9999000%d.pdb" % i 
```

你有太多的零和多余的`1`.

您还需要记住，范围内的停止值*不*包括在内，因此要获得数字 1 - 5，您需要将 1 添加到停止参数：

```
for i in range(1, 6): 
```

# java - JavaFX HTML 格式化程序

> ID：15735695
> 
> 赞同：0
> 
> 时间：2013-03-31T23:21:48.540
> 
> 标签：java, html, format, javafx

我正在开发一个用于创建测验的应用程序。测验有更多问题。一个问题看起来像这样：

```
 <p>How are you<p>
  <b>How old are you</b>
  What is your name? 
```

您会看到我使用了 html 标签。如何格式化问题？如果问题在`<b>`'s 之间，则字体必须为粗体。如果字体系列为“Arial”，则 UI 中的字体必须为“Arial”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:22:35.833

[在WebView](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)中显示您的问题并使用[html](http://www.w3.org/html/wg/drafts/html/master/)和[html 兼容](http://www.w3.org/TR/css-2010/)的 css 来标记内容。

* * *

如果您不必使用 html 进行标记，则可以：

将多个[Text](http://docs.oracle.com/javafx/2/api/javafx/scene/text/Text.html)对象放在[FlowPane中，并使用](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/FlowPane.html)[JavaFX css](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)设置它们的样式。

或者

在 Java 8+ 中，使用[TextFlow](https://wikis.oracle.com/display/OpenJDK/Rich+Text+API+Samples)控件。

# apache-pig - Pig：强制 UDF 在 Reducer 中发生或设置映射器数量

> ID：15735696
> 
> 赞同：4
> 
> 时间：2013-03-31T23:21:51.050
> 
> 标签：apache-pig

我有一个运行非常耗时的 UDF 的猪脚本。Pig 似乎将 UDF 设置为作为映射作业而不是缩减作业运行。结果，创建了少量的映射器来运行该作业。我知道我可以设置在 pig 中使用的默认减速器数量，`setDefaultParallel`也可以使用`PARALELL x`PigLatin 中的命令来设置给定行的减速器数量。但是我该怎么做才能设置映射器的数量呢？我已经看到有关通过定义我自己的 InputSplit 大小来增加映射器数量的帖子，但我想将映射器的数量明确设置为主机数 * 核心数，文件大小不应该与它有任何关系。

如果我无法控制映射器的数量，是否有强制我的 UDF 作为减速器出现，因为我可以控制它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T12:21:27.280

1.  不，您**不能**仅仅因为 Hadoop 不能那样工作而明确指定映射器的数量。创建的映射器数量大致为`total input size`/ `input split size`，但如果您有大量小文件（由于 HDFS 的工作方式不鼓励这样做），则可能会出现偏差。所以基本上，Pig 不允许你这样做，因为 Hadoop 根据定义没有该选项。
2.  不，无论如何，不​​会明确与 Pig 一起使用。也因为“它不是那样工作的”。Pig 为您编译和优化东西，输出是一个 MR 作业流。当下一版本的 Pig 发布时，您为强制 UDF 进入减速器所做的任何 hack 都可以轻松更改。如果你觉得你真的需要在 reducer 中使用 UDF，你可以创建一个自定义 MR 作业 jar，在其中实现一个 drop-through 映射器，然后在 reducer 中完成你的工作。`MAPREDUCE`你用命令从 pig 调用它。但是，该解决方案听起来是错误的，您可能会误解某些内容。你可以看看是什么迫使 Pig 获得了大的想法—— a `DISTINCT`，`LIMIT`并且`ORDER`总是会这样做， a`GROUP`通常也会这样做。一种`JOIN`通常会得到一个映射器和一个reducer。如您所见，强制 reduce 的操作是利用 Hadoop 的一些内在特性的操作（例如`ORDER`因为 reducer 输入已排序而处于 reduce 中）。没有简单的方法可以将 UDF 潜入其中，因为没有任何类型的 UDF（eval、filter、load、store）可以轻松地与 reducer 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T16:07:57.777

您可以使用“mapred.max.split.size”对生成更多映射器进行一些控制。拆分适用于某些输入格式和压缩格式。例如，GZ 输入不可拆分。Pig 允许合并较小的输入文件。这是[组合小文件的方法](http://pig.apache.org/docs/r0.10.0/perf.html#combine-files)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-24T05:44:37.583

从当前的 Pig 版本开始，这个技巧总是对我有用，使用 DISTINCT、LIMIT、ORDER 后在嵌套的 FOREACH 中生成总是作为减速器运行，例如，

```
A = FOREACH (GROUP DATA BY some_unique_field/all fields){
    LIMIT DATA.field 1;
    GENERATE udf.func(fields);
} 
```

这些还会删除数据中的所有重复行。

# php - 我的基于 PHP 的交互式投票系统无法正常工作

> ID：15735697
> 
> 赞同：0
> 
> 时间：2013-03-31T23:21:57.593
> 
> 标签：php

我还是 PHP 新手，正在尝试创建一个交互式投票系统。我使用了 2 个将名称保存在字符串中的数组。我用了

```
<?php
$array(...,...);
$array2(...,...);
$random = $array; 
$random2 = $array2; 
shuffle($random); 
shuffle($random2);
?> 
```

随机输出名称。

然后我创建了一个表格

```
<form action="action.php" method="post">
<input type="button" onclick="window.location.reload()" value="<?php echo array_pop($random);?>" name="name" />
</form>

<form action="action.php" method="post">
<input type="button" onclick="window.location.reload()" value="<?php echo array_pop($random2);?>" name="haventseen" />
</form> 
```

此时所有的名字随机出现在一个按钮中点击，点击时会出现2个新名字。我遇到的问题是将信息存储在数据库中。由于它是一个投票系统，我想将它们存储在数据库中，并且每次用户单击按钮 +1 时都会添加到该特定名称。并且当单击“haventseen”按钮时，在 haventseen 行上方的按钮中对该名称 +1。这就是我的桌子的设置方式：

它是一个 MySQL 5.0 数据库。

```
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY (id)
name VARCHAR(80)
vote INT(11)
haventseen INT(11) 
```

到目前为止，这是我的代码。

```
<?php
 $dbname = "db_name";

    $con=mysql_connect
("local","root","pass");
    if(!$con)
    {
    die ('Could not connect: '.mysql_error());  
    }
    echo ('Connected');

mysql_select_db($dbname, $con);

$sql="INSERT INTO `table_name` (`name`)  VALUES ('{$_POST['name']}')";
$sql="INSERT INTO `table_name` (`name`)  VALUES ('{$_POST['haventseen']}')";

if (!mysql_query($sql, $con))
{
    die('Error: ' . mysql_error());
}
?> 
```

我真的不知道从这里去哪里。但是即使所有名称都正确，此设置也不会将任何内容放入数据库（我为这篇文章更改了一些名称）。一些示例代码会非常好！但是，如果它太麻烦，请告诉我一些我可以采取的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:38:39.750

您必须提交表单才能使用 $_GET、$_POST、$_REQUEST 获取值。

以下部分刷新页面而不是提交表单。我相信这就是问题所在。

```
<form action="action.php" method="post">
<input type="button" onclick="window.location.reload()" value="<?php echo array_pop($random);?>" name="name" />
</form>

<form action="action.php" method="post">
<input type="button" onclick="window.location.reload()" value="<?php echo array_pop($random2);?>" name="haventseen" />
</form> 
```

尝试使用“提交”而不是“按钮”。

```
<form action="action.php" method="post">
<input type="submit" value="<?php echo array_pop($random);?>" name="name" />
</form>

<form action="action.php" method="post">
<input type="submit" value="<?php echo array_pop($random2);?>" name="haventseen" />
</form> 
```

此外，如果您想同时获得它们，则必须将它们放入相同的表格中。在这种情况下，您的方法应该是；

```
<form action="action.php" method="post">
<input type="button" onclick="/*SUBMIT THE FORM*/" value="<?php echo array_pop($random);?>" name="name" />
</form>

<form action="action.php" method="post">
<input type="button" onclick="/*SUBMIT THE FORM*/" value="<?php echo array_pop($random2);?>" name="haventseen" />
</form> 
```

# java - 父子线程之间的同步（子线程“在监视器上”）

> ID：15735698
> 
> 赞同：1
> 
> 时间：2013-03-31T23:22:03.890
> 
> 标签：java, synchronization, thread-safety, monitors

我对 Java 尤其是并发编程相当陌生，所以如果这是一个新手问题，请原谅我。

我有一个线程（服务器），它管理一组子线程（每个线程代表客户端和服务器之间的会话）。服务器维护一个会话集合，当会话结束时，它会向父服务器发出它已完成的信号，以便服务器可以将其从会话集合中删除。

有人告诉我，如果您打算将 ArrayLists 与线程一起使用，则需要保护它们，并且除非同步，否则 int 也可能存在问题，因此使用两者的方法是同步的。

服务器和会话对象的相关部分如下。

```
public class Server {

    private int             listenPort      = 0;
    private ServerSocket    serverSocket    = null;
    private List<Session>   sessions        = new ArrayList ();
    private int             lastId          = 0;

    /**
     * Start listening for clients to process
     * 
     * @throws IOException 
     * @todo Maintain a collection of Clients so we can send global messages
     * @todo Provide an escape condition for the loop
     */
    synchronized public void run () throws IOException {

        Session newSession;

        // Client listen loop
        while (true) {
            //int sessionId = this.Sessions.
            newSession = this.initSession (++this.lastId);
            this.sessions.add (newSession);
            //this.Sessions.add (newSession);
            new Thread (newSession).start ();
        }
    }

    /**
     * 
     * @return
     * @throws IOException 
     */
    public Socket accept () throws IOException {
        return this.getSocket().accept ();
    }

    /**
     * 
     * @param closedSession 
     */
    synchronized public void cleanupSession (Session closedSession) {
        this.sessions.remove (closedSession);
    }
} 
```

这是会话类：

```
public class Session implements Runnable {
    private Socket              clientSocket    = null;
    private Server              server          = null;
    private int                 sessionId       = 0;

    /**
     * Run the session input/output loop
     */
    @Override
    public void run () {
        CharSequence    inputBuffer, outputBuffer;
        BufferedReader  inReader;

        try {
            this.sendMessageToClient ("Hello, you are client " + this.sessionId);
            inReader    = new BufferedReader (new InputStreamReader (this.clientSocket.getInputStream (), "UTF8"));
            do {
                // Parse whatever was in the input buffer
                inputBuffer     = this.requestParser.parseRequest (inReader);
                System.out.println ("Input message was: " + inputBuffer);

                // Generate a response for the input
                outputBuffer    = this.responder.respond (inputBuffer);
                System.out.println ("Output message will be: " + outputBuffer);

                // Output to client
                this.sendMessageToClient (outputBuffer.toString ());

            } while (!"QUIT".equals (inputBuffer.toString ()));
        } catch (IOException e) {
            Logger.getLogger (Session.class.getName ()).log (Level.SEVERE, null, e);
        } finally {
            this.cleanupClient ();
        }
    }

    /**
     * Terminate the client connection
     */
    public void cleanupClient () {
        try {
            this.streamWriter   = null;
            this.clientSocket.close ();
            this.server.cleanupSession (this);
        } catch (IOException e) {
            Logger.getLogger (Session.class.getName ()).log (Level.SEVERE, null, e);
        }
    }

    /**
     * 
     * @param clientSocket 
     */
    public Session (Server owner, int sessionId) throws IOException {
        System.out.println ("Class " + this.getClass () + " created");

        this.server         = owner;
        this.sessionId      = sessionId;
        this.clientSocket   = this.server.accept ();

        System.out.println ("Session ID is " + this.sessionId);
    }
} 
```

我遇到的问题出在会话的 CleanupClient 方法中。当服务器中的 CleanupSession 方法标记为同步时，会话线程似乎不会终止。相反，根据 Netbeans 的说法，它们进入了一个名为“On Monitor”的状态。

我试图找出这意味着什么以及如何处理它并没有帮助。我确实发现监视器就像一个只能由单个线程占用的空间，其他线程必须等待轮到它才能使用它，这就是Java中实现并发的方式。但是，我找不到解释，为什么在父类中调用同步方法的子线程会触发线程明显永久地进入这种状态，或者如何处理它。

我确实发现，如果 Server 类中的 cleanupSession 方法没有标记为同步，那么线程会按照我的预期终止。但是，如果我需要同步以维护线程安全，那么我不能只让方法不同步并相信运气。

我显然缺少一些基本的东西，但我不确定是什么。如果有人能指出我在这里做错了什么，我将不胜感激。

（附录：我希望我应该使用其他一些 Collection 类而不是 ArrayList，并且知道它是什么对于解决这个特殊情况肯定会很好，但我也想在如何避免这个问题的反馈一般情况下，唯一可用的选项是同步）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:24:22.343

正如 Antimony 已经指出的那样，您会得到死锁，因为 Server 的两个方法都在同一个对象（即`Server`实例）上同步，并且`run()`方法永远不会释放锁。

另一方面，您仍然需要某种线程间同步来正确更新`sessions`列表（没有同步，您会遇到两个问题：缺乏更改可见性和数据竞争）。

因此，一种解决方案是仅同步代码的最小可能部分：非常访问`sessions`（您不需要在任何地方使用`this.`，仅在本地名称隐藏实例变量名称的地方）：

```
...
public void run () throws IOException {

    Session newSession;

    // Client listen loop
    while (true) {
        ...
        newSession = initSession (++lastId);
        synchronized (this) {
            sessions.add (newSession);
        }
        ...
    }
}

public void cleanupSession (Session closedSession) {
    synchronized (this) {
        sessions.remove (closedSession);
    }
} 
```

您在`List`这里并不是最合适的，`HashMap`而是您需要，因为您所做的只是添加新客户和搜索客户，而客户存储在集合中的顺序并不重要（即使它很重要，也最好使用一些有序`Map`的，比如`TreeMap`，来提高性能）。因此，您可以将`Server`代码更改为：

```
private Map<Integer, Session> sessions        = new HashMap<IntegerPatternConverter, Session>();

    ...
    // Client listen loop
    while (true) {
        int key = ++lastId;
        newSession = initSession (key);
        synchronized (this) {
            sessions.put (key, newSession);
        }
        new Thread (newSession).start ();
    }
...
public void cleanupSession (int closedSessionKey) {
    synchronized (this) {
        sessions.remove (closedSessionKey);
    }
} 
```

`synchronized`在此更改之后，您可以通过使用`Map`with 内置同步完全摆脱： `ConcurrentHashMap`.

但是，最好在您掌握 Java 并发编程的基础知识之后再执行此操作。为此，*Java Concurrency in Practice*是一个很好的起点。我读过的最好的 Java 入门书籍（其中有一篇关于并发的精彩部分）是Gosling 和 Holmes 合着*的 The Java Programming Language*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:34:40.580

问题是你已经陷入僵局。

您的`Server.run`方法永久保留在`Server`监视器上。由于`cleanupSession`还尝试进入此监视器，只要服务器正在运行，每次尝试从不同的线程调用它都会死锁。

无论如何，同步不会做你想做的事。我建议调查一下`java.util.Concurrency`。

# mysql - 按第二个参数分组

> ID：15735699
> 
> 赞同：-1
> 
> 时间：2013-03-31T23:22:13.607
> 
> 标签：mysql

```
SELECT c.user1, c.user2, a.username AS author_name, SUBSTRING(m.content,1,20) as content, m.viewed, m.sent_date, m.author, c1.username AS username1, c2.username AS username2  
FROM conversation c
INNER JOIN message m ON m.conversationid = c.conversationid
INNER JOIN user c1 ON c1.userid = c.user1
INNER JOIN user c2 oN c2.userid = c.user2
INNER JOIN user a ON a.userid = m.author
WHERE (c.user1 = 33 OR c.user2 = 34)
GROUP BY c.conversationid ORDER BY m.sent_date DESC 
```

这按对话 ID 分组。当它分组并保留一行时，我需要它是最近发送日期的行。

这种结构有可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:24:53.157

执行此操作的安全方法是添加一个子查询来计算每个对话的最近发送日期：

```
SELECT c.user1, c.user2, a.username AS author_name, SUBSTRING(m.content,1,20) as content, m.viewed, m.sent_date, m.author, c1.username AS username1, c2.username AS username2  
FROM conversation c
INNER JOIN message m ON m.conversationid = c.conversationid
inner join (select conversationid, max(sent_date) as maxsentdate from message group by conversationid) mc on m.conversationid = mc.conversationid and m.sent_date = mc.maxsentdate
INNER JOIN user c1 ON c1.userid = c.user1
INNER JOIN user c2 oN c2.userid = c.user2
INNER JOIN user a ON a.userid = m.author
WHERE (c.user1 = 33 OR c.user2 = 34)
GROUP BY c.conversationid ORDER BY m.sent_date DESC 
```

这样做是计算每条消息的最大发送日期。然后它将它加入到消息表中，得到最后一条消息。如果两条消息同时发送，理论上你可以得到重复消息。我认为这不太可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T23:27:36.347

问题是您仅按`SELECT`列表中的一列进行分组。MySQL 使用对子句的扩展，该`GROUP BY`子句允许 SELECT 列表中的列被排除在 group by 或聚合函数中。这可能会导致意想不到的结果。（参见[MySQL 对 GROUP BY 的扩展](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)）

来自 MySQL 文档：

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。...您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。在选择了值之后对结果集进行排序，并且 ORDER BY 不会影响服务器选择的值。

理想情况下，您将使用子查询来获取结果。此子查询将获取每个对话的最大 sent_Date，然后您将其加入您的消息表以返回所需的剩余列：

```
SELECT c.user1, 
  c.user2, 
  a.username AS author_name, 
  SUBSTRING(m.content,1,20) as content, 
  m.viewed, 
  m.sent_date, 
  m.author, 
  c1.username AS username1, 
  c2.username AS username2  
FROM conversation c
INNER JOIN message m
  ON m.conversationid = c.conversationid
INNER JOIN
(
  select max(sent_date) sent_date, conversationid
  from message
  group by conversationid
) m1
  ON m1.conversationid = c.conversationid
  AND m.sent_date = m1.sent_date
INNER JOIN user c1 
  ON c1.userid = c.user1
INNER JOIN user c2 
  ON c2.userid = c.user2
INNER JOIN user a 
  ON a.userid = m.author
WHERE (c.user1 = 33 OR c.user2 = 34)
ORDER BY m.sent_date DESC 
```

# jquery - 使用非默认操作脚本使用 jquery 提交表单

> ID：15735704
> 
> 赞同：1
> 
> 时间：2013-03-31T23:23:04.213
> 
> 标签：jquery, ajax

我正在尝试使用 jquery 提交表单，但不是表单中的默认操作脚本，而是我想将发布变量提交到不同的操作脚本。

更具体地说，这是我的默认表单，当用户单击提交按钮时，它会以特定方式工作：

```
<form method="post" action="something.php" id="myForm"> 
</form> 
```

我想做的是提交上面的表单，但`something.php`我不想使用默认值作为操作脚本，而是使用`foo.php`.

这甚至可能吗？这是我尝试过的，但没有成功（帖子变量没有传递到`foo.php`页面）：

```
$.post('foo.php', '#myForm', function(data) {
    alert(data);
}); 
```

我很感激任何关于如何做到这一点的建议。

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:27:04.730

如果您只是想更改表单发布到的位置，请`action`使用 JavaScript 更改属性。

```
$('#myForm').attr('action', 'foo.php'); 
```

仅`$.post()`当您打算将默认行为更改为使用 XHR 而不是正常的整页刷新时才使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T23:25:13.307

是的，这当然是可能的，但是你应该传递一个键值对，你可以使用[`.serializeArray()`](http://api.jquery.com/serializeArray)方法。

```
$('#myForm').submit(function(e){
   e.preventDefault();
   $.post('foo.php', $(this).serializeArray(), function(data) {
       // alert(data);
   }); 
}); 
```

如果您有点击处理程序：

```
$('#element').click(function(e){
   //e.preventDefault();
   $.post('foo.php', $('#myForm').serializeArray(), function(data) {
       // alert(data);
   }); 
}); 
```

# java - 如何在 init 和 doget 之间共享变量？

> ID：15735705
> 
> 赞同：1
> 
> 时间：2013-03-31T23:23:11.010
> 
> 标签：java, jakarta-ee, servlets

在 servlet 中，我想在 init 和 doget 之间共享一个变量

我想知道我是否应该使用静态或普通声明这个变量

```
(static?) int small;

init()
{
    small = 5:    
}

doGet(final HttpServletRequest request, final HttpServletResponse response) {
    small
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:06:04.827

这取决于您希望如何更好地设计代码。我会建议使用非静态，因为考虑通过多个子类扩展这个类。

将它作为成员变量将允许您为不同的子类具有不同的值。然而，静态的你不能。

```
public class Superclass {

protected static String sVariable = "static";
protected String mVariable = "static";

 public void init () {
 }

  public void print(){
  System.out.println(this.getClass().getName() + ":sVariable" + sVariable);
  System.out.println(this.getClass().getName() + ":mVariable" + mVariable);
  }
}

public class SubClass extends Superclass {

 public void init () {
  sVariable = "subClassSVariable";
  mVariable = "subClassMVariable";
 }

 public static void main(String a[]){
  Superclass superC = new Superclass();
  SubClass subC = new SubClass();

  superC.init();
  subC.init();

  superC.print();
  subC.print();
  }
} 
```

上面代码的输出是：

```
com.ramesh.Superclass:sVariablesubClassSVariable
com.ramesh.Superclass:mVariablestatic
com.ramesh.SubClass:sVariablesubClassSVariable
com.ramesh.SubClass:mVariablesubClassMVariable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:34:49.453

不要紧。Java Servlet 规范将创建 servlet 的单个实例，并调用一次 init。无论您将值放在静态变量还是非静态变量中，它都可用于在该 servlet 上执行 doGet 请求的所有线程。

我倾向于使用静态，因为它有助于让程序员清楚地知道所有调用都有一个副本，并且静态显然不是给定请求所独有的。此外，如果您有任何需要，静态更容易从代码的其他部分（servlet 类本身之外）访问。

# php - IF 条件未处理

> ID：15735710
> 
> 赞同：0
> 
> 时间：2013-03-31T23:23:46.583
> 
> 标签：php, javascript

请，任何人都可以帮助我理解为什么如果不工作？我回显变量以检查值，并且我有各自的 0 和 1，相同的 IF 条件...查询有效，IF 无效...

```
$data = ($_POST);
$cn = $data['cn'];
$email = $data['email'];

$con1 = mysql_query("SELECT * FROM `crm` WHERE cn = '$cn'", $con);
$num_cn = mysql_num_rows($con1);

$con2 = mysql_query("SELECT * FROM `crm_contacts` WHERE email = '$email'", $con);
$num_email = mysql_num_rows($con2);

        echo $num_cn;
        echo "<br>";
        echo $num_email;

 if ($num_cn == "0" && $num_email == "1") {
    echo "<script type='text/javascript'>"; 
echo "location.href='crm.php?Error=2;"; 
echo "</script>";
 exit;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:29:41.850

在：

```
echo "location.href='crm.php?Error=2;"; 
```

你错过了结束`'`：

```
echo "location.href='crm.php?Error=2';";
//                                  ^ 
```

# java - 如何从视频（mov）中获取帧样本（jpeg）

> ID：15735716
> 
> 赞同：26
> 
> 时间：2013-03-31T23:24:40.540
> 
> 标签：java, jpeg, extract, mov

我想用java从视频文件（mov）中获取帧样本（jpeg）。是否有捷径可寻。当我在谷歌搜索时，我只能找到从多个 jpg 制作 mov 。我不知道也许我找不到正确的关键字。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2014-02-28T22:33:56.740

我知道最初的问题已经解决，但是，我发布这个答案以防其他人像我一样被卡住。

从昨天开始，我已经尝试了一切，我的意思是要做到这一点。所有可用的 Java 库要么已经过时，不再维护，要么缺少任何可用的文档（说真的？？！？！）

我尝试了 JFM（旧且无用）、JCodec（没有任何文档）、JJMpeg（看起来很有前途，但由于缺乏 Java 类文档，使用起来非常困难和麻烦）、OpenCV 自动 Java 构建和一些其他库我不记得了。

最后，我决定看看[JavaCV](https://code.google.com/p/javacv/)的（[Github 链接](https://github.com/bytedeco/javacv)）类，瞧！它包含带有详细文档的 FFMPEG 绑定。

```
<dependency>
    <groupId>org.bytedeco</groupId>
    <artifactId>javacv</artifactId>
    <version>1.0</version>
</dependency> 
```

事实证明，有一种非常简单的方法可以将视频帧从视频文件中提取`BufferedImage`为 JPEG 文件并扩展为 JPEG 文件。FFmpegFrameGrabber 类可以很容易地用于抓取单个帧并将它们转换为`BufferedImage`. 代码示例如下：

```
FFmpegFrameGrabber g = new FFmpegFrameGrabber("textures/video/anim.mp4");
g.start();

for (int i = 0 ; i < 50 ; i++) {
    ImageIO.write(g.grab().getBufferedImage(), "png", new File("frame-dump/video-frame-" + System.currentTimeMillis() + ".png"));
}

g.stop(); 
```

基本上，这段代码会转储视频的前 50 帧并将它们保存为 PNG 文件。好消息是内部搜索功能适用于实际帧而不是关键帧（我在使用 JCodec 时遇到的问题）

您可以参考 JavaCV 的主页以了解有关可用于从网络摄像头等捕获帧的其他类的更多信息。希望这个答案有所帮助:-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T01:31:37.463

Xuggler 完成了这项工作。他们甚至提供了一个完全符合我需要的示例代码。链接在下面

[http://xuggle.googlecode.com/svn/trunk/java/xuggle-xuggler/src/com/xuggle/mediatool/demos/DecodeAndCaptureFrames.java](http://xuggle.googlecode.com/svn/trunk/java/xuggle-xuggler/src/com/xuggle/mediatool/demos/DecodeAndCaptureFrames.java)

我已经修改了这个链接中的代码，使它只保存视频的第一帧。

```
import javax.imageio.ImageIO;

import java.io.File;

import java.awt.image.BufferedImage;

import com.xuggle.mediatool.IMediaReader;
import com.xuggle.mediatool.MediaListenerAdapter;
import com.xuggle.mediatool.ToolFactory;
import com.xuggle.mediatool.event.IVideoPictureEvent;
import com.xuggle.xuggler.Global;

/**
 *  * @author aclarke
 *    @author trebor
 */

public class DecodeAndCaptureFrames extends MediaListenerAdapter
{
  private int mVideoStreamIndex = -1;
  private boolean gotFirst = false;
  private String saveFile;
  private Exception e;
  /** Construct a DecodeAndCaptureFrames which reads and captures
   * frames from a video file.
   * 
   * @param filename the name of the media file to read
   */

  public DecodeAndCaptureFrames(String videoFile, String saveFile)throws Exception
  {
    // create a media reader for processing video
    this.saveFile = saveFile;
    this.e = null;
     IMediaReader reader = ToolFactory.makeReader(videoFile);

    // stipulate that we want BufferedImages created in BGR 24bit color space
    reader.setBufferedImageTypeToGenerate(BufferedImage.TYPE_3BYTE_BGR);

    // note that DecodeAndCaptureFrames is derived from
    // MediaReader.ListenerAdapter and thus may be added as a listener
    // to the MediaReader. DecodeAndCaptureFrames implements
    // onVideoPicture().

    reader.addListener(this);

    // read out the contents of the media file, note that nothing else
    // happens here.  action happens in the onVideoPicture() method
    // which is called when complete video pictures are extracted from
    // the media source

      while (reader.readPacket() == null && !gotFirst);

      if (e != null)
          throw e;
  }

  /** 
   * Called after a video frame has been decoded from a media stream.
   * Optionally a BufferedImage version of the frame may be passed
   * if the calling {@link IMediaReader} instance was configured to
   * create BufferedImages.
   * 
   * This method blocks, so return quickly.
   */

  public void onVideoPicture(IVideoPictureEvent event)
  {
    try
    {
      // if the stream index does not match the selected stream index,
      // then have a closer look

      if (event.getStreamIndex() != mVideoStreamIndex)
      {
        // if the selected video stream id is not yet set, go ahead an
        // select this lucky video stream

        if (-1 == mVideoStreamIndex)
          mVideoStreamIndex = event.getStreamIndex();

        // otherwise return, no need to show frames from this video stream

        else
          return;
      }

      ImageIO.write(event.getImage(), "jpg", new File(saveFile));
      gotFirst = true;

    }
    catch (Exception e)
    {
      this.e = e;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-18T04:20:27.740

```
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import org.bytedeco.javacpp.opencv_core.IplImage;
import org.bytedeco.javacv.FFmpegFrameGrabber;
import org.bytedeco.javacv.FrameGrabber.Exception;

public class Read{
    public static void main(String []args) throws IOException, Exception
    {
        FFmpegFrameGrabber frameGrabber = new FFmpegFrameGrabber("C:/Users/Digilog/Downloads/Test.mp4");
        frameGrabber.start();
        IplImage i;
        try {

            i = frameGrabber.grab();
            BufferedImage  bi = i.getBufferedImage();
            ImageIO.write(bi,"png", new File("D:/Img.png"));
            frameGrabber.stop();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-14T01:50:37.870

以下是[BoofCV](https://github.com/lessthanoptimal/BoofCV/)的方法：

```
String fileName = UtilIO.pathExample("tracking/chipmunk.mjpeg");

MediaManager media = DefaultMediaManager.INSTANCE;

ConfigBackgroundBasic configBasic = new ConfigBackgroundBasic(30, 0.005f);
ImageType imageType = ImageType.single(GrayF32.class);
BackgroundModelMoving background = FactoryBackgroundModel.movingBasic(configBasic, new PointTransformHomography_F32(), imageType);

SimpleImageSequence video = media.openVideo(fileName, background.getImageType());

ImageBase nextFrame;
while(video.hasNext()) {
    nextFrame = video.next();

    // Now do something with it...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T23:36:29.480

也许这会帮助你：

```
Buffer buf = frameGrabber.grabFrame();
// Convert frame to an buffered image so it can be processed and saved
Image img = (new BufferToImage((VideoFormat) buf.getFormat()).createImage(buf));
buffImg = new BufferedImage(img.getWidth(this), img.getHeight(this), BufferedImage.TYPE_INT_RGB);
//TODO saving the buffImg 
```

欲了解更多信息：

[如何从网络摄像头拍摄单个快照？](https://stackoverflow.com/questions/1078689/how-to-take-single-snapshots-from-a-webcam)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-04T11:50:13.510

下面显示了从媒体文件请求帧的基本代码。

完整的源代码和视频演示：使用**Marvin 框架的**
[“媒体文件处理”](http://marvinproject.sourceforge.net/en/examples/mediaFile.html)示例..

 **```
public class MediaFileExample implements Runnable{

    private MarvinVideoInterface    videoAdapter;
    private MarvinImage             videoFrame;

    public MediaFileExample(){
        try{
            // Create the VideoAdapter used to load the video file
            videoAdapter = new MarvinJavaCVAdapter();
            videoAdapter.loadResource("./res/snooker.wmv");

            // Start the thread for requesting the video frames 
            new Thread(this).start();
        }
        catch(MarvinVideoInterfaceException e){e.printStackTrace();}
    }

    @Override
    public void run() {
        try{
            while(true){
                // Request a video frame
                videoFrame = videoAdapter.getFrame();
            }
        }catch(MarvinVideoInterfaceException e){e.printStackTrace();}
    }

    public static void main(String[] args) {
        MediaFileExample m = new MediaFileExample();
    }
} 
```**

# algorithm - 二维空间中的匹配点

> ID：15735721
> 
> 赞同：0
> 
> 时间：2013-03-31T23:25:00.977
> 
> 标签：algorithm, matlab, distance, nearest-neighbor

我有 2 个矩阵`A`，`B`大小`Rows X 2`分别`Rows = m , n`为 A 和 B。这些 m 和 n 表示欧几里得空间中的点。

> 我希望执行的任务是匹配来自 A 和 B 的最大点数（假设 A 的点数少于 B ），条件是距离小于阈值`d`并且每一对都是唯一的。

我已经看到了这个[最近的点对](https://stackoverflow.com/questions/12083467/find-the-nearest-point-pairs-between-two-sets-of-of-matrix)，但这对我的问题不起作用，因为对于 A 中的每个点，它都会选择 B 中的最小值。但是，我从 A 和 B 中选择的第一对可能是错误的，导致数量减少的匹配对。

我正在寻找一个快速的解决方案，因为 A 和 B 都包含大约 1000 个点。同样，会留下一些要点，我知道这会以某种方式导致详尽的搜索。

我正在寻找一种解决方案，其中 matlab 中有某种内置函数，或者使用可以帮助其 matlab 代码可用的数据结构，例如`kd-trees`. 如前所述，我必须找到从 B 到 A 的唯一最近匹配点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:59:53.300

您可以使用[pdist2](http://www.mathworks.com/help/stats/pdist2.html)计算两对观测值（不同大小）之间的成对距离。最终的距离矩阵将是一个`N x M`矩阵，您可以在该矩阵中探测高于所需阈值的所有值。

```
A = randn(1000, 2);
B = randn(500, 2);

D = pdist2(A, B, 'euclidean');  % euclidean distance

d = 0.5; % threshold
indexD = D > d;
pointsA = any(indexD, 2);
pointsB = any(indexD, 1); 
```

`A`这两个向量为和中的点提供逻辑索引，这些点`B`至少有一个匹配，由最小距离定义`d`，另一个。结果集将由矩阵 A（或 B）中的整个元素集组成，与另一个矩阵 B（或 A）的*任何*`d`元素的距离高于其他矩阵 B（或 A）。

 *您还可以推广到超过 2 个维度或不同的距离度量。*

# sql - 从 SQL Server 2012 数据库中获取 .sql 文件

> ID：15735722
> 
> 赞同：36
> 
> 时间：2013-03-31T23:25:03.463
> 
> 标签：sql, sql-server, sql-server-2012-express

我需要使用 SQL Server 2012 从现有数据库中获取 .sql 文件。这是否可能，因为我在导出选项中看到的只是分隔文件。

例如）我有 30 条记录的 table1。我需要一个类似于下面的文件。（我知道我的语法不正确，但你应该明白这一点）。

```
CREATE TABLE table1 (
    INSERT INTO table1 values (
   .......) 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-03-31T23:48:19.787

如果您只想生成一个 .sql 脚本，您可以通过右键单击对象资源管理器中的数据库并选择任务 > 生成脚本来执行此操作：

> ![在此处输入图像描述](https://i.stack.imgur.com/tIace.png)

然后你可以选择数据库和所有对象，或者你可以只选择你想要的表：

> ![在此处输入图像描述](https://i.stack.imgur.com/QzDPk.png)

然后选择一个位置，并确保在继续之前进入高级：

> ![在此处输入图像描述](https://i.stack.imgur.com/5Zrnr.png)

在高级下，至少，将脚本的数据类型更改为“架构和数据”（如果您这样做而不是正确备份的原因是因为您需要将数据导入 SQL Server 2012 之前的数据库，您可能应该将目标服务器版本选项更改为您所针对的任何版本）：

> ![在此处输入图像描述](https://i.stack.imgur.com/PaOjw.png)

如果您在 Management Studio 中没有该选项，您可能仍在运行 RTM 版本的客户端工具。自 SP1 起，全部功能终于免费了。在此处下载最新版本 - SP2：

[http://www.microsoft.com/en-us/download/details.aspx?id=43351](http://www.microsoft.com/en-us/download/details.aspx?id=43351)

（您想要其中一个`SQLManagementStudio`文件。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T23:28:25.440

右键单击任务下的数据库单击生成脚本和向导将打开，然后您可以将表结构和数据导出到另一个数据库。

您必须选择要导出的表和其他架构，并且在其中一个页面上是一个复选框以选择导出表数据。

这将为您的数据库生成 sql 语句。

这可能在快速版本中不可用，我没有检查过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T23:31:35.973

您有所有这些选择来启动 SQL Server 导入和导出向导

*   在开始菜单上，指向所有程序，指向 Microsoft SQL Server，然后单击导入和导出数据。
*   在 SQL Server Data Tools (SSDT) 中，右键单击 SSIS 包文件夹，然后单击 SSIS 导入和导出向导。
*   在 SQL Server Data Tools (SSDT) 的“项目”菜单上，单击“SSIS 导入和导出向导”。
*   在 SQL Server Management Studio 中，连接到数据库引擎服务器类型，展开数据库，右键单击数据库，指向任务，然后单击导入数据或导出数据。
*   在命令提示符窗口中，运行`DTSWizard.exe`，位于`C:\Program Files\Microsoft SQL Server\100\DTS\Binn\`（或可能`\110\`而不是`\100\`您的情况）。

萨卢多斯 ;)

# java - 如何清除单个字符串的不同部分，而结果是字符串本身？

> ID：15735724
> 
> 赞同：1
> 
> 时间：2013-03-31T23:25:16.030
> 
> 标签：java, string, methods, char

因此，我应该编写一个 Java 方法，从句子中清除不需要的空格并保留数字/字母（在本例中为 i）。例如，如果你有“0 . 2 - 9\. 3 i”，你应该以 o.2-9.3i 结束，如果你有“- 1 . 6 + 8\. 3i”，你应该以 -1.6+ 结束8.3i（为了清楚起见，所有情况下都没有出现在 i 之后）。我们得到了一个提示，可以将 javadocs 用于 String 和 Double （对于 double 部分，您可以使用 parseDouble 方法来获得最终答案。）有人可以帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:28:59.353

`st.replaceAll("\\s","")`删除所有空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:29:09.720

以下代码是您正在寻找的。

```
" 0 . 2 - 9\. 3 i".replace(" ", ""); 
```

如果您需要它作为方法：

```
public string removeSpaces(String subject) {
    return subject.replace(" ", "");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:30:04.403

`st.replaceAll("\\s","")` ...将摆脱空白

# javascript - 在 HTML5 画布的特定区域绘图

> ID：15735727
> 
> 赞同：0
> 
> 时间：2013-03-31T23:25:42.020
> 
> 标签：javascript, html, canvas, html5-canvas

如果我的很多绘图都将在我的较大画布的特定区域内（在这种情况下，在中心），有没有办法说你正在那个特定的“子画布”中工作，而不是每次要绘制时都必须添加/减去边距？每次我指定坐标时，它只会让我的代码看起来更加复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:35:48.133

您可以使用 更改坐标的原点[`translate()`](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-translate)。

首先，使用 . 保存原始原点[`save()`](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-save)。然后，找到适合屏幕绘图区域中心的原点并调用`translate(x, y)`. 做你的画，然后用它[`restore()`](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-restore)来取回你以前的原点。

[js小提琴](http://jsfiddle.net/BPffV/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:35:50.577

[Kinetic.js](http://kineticjs.com/)是一个流行的 Canvas 库，允许您创建`Group`图层。您可以指定 this 的`x`、`y`坐标、高度和宽度`Group`。您还可以在该组中添加形状和绘制其他东西。

这是和示例：

```
 var stage = new Kinetic.Stage({
    container: 'container',
    width: 578,
    height: 200
  });
  var shapesLayer = new Kinetic.Layer();

  /*
   * create a group which will be used to combine
   * multiple simple shapes.  Transforming the group will
   * transform all of the simple shapes together as
   * one unit
   */
  var group = new Kinetic.Group({
    x: 220,
    y: 40,
    rotationDeg: 20
  });

  var colors = ['red', 'orange', 'yellow'];

  for(var n = 0; n < 3; n++) {
    // anonymous function to induce scope
    (function() {
      var i = n;
      var box = new Kinetic.Rect({
        x: i * 30,
        y: i * 18,
        width: 100,
        height: 50,
        name: colors[i],
        fill: colors[i],
        stroke: 'black',
        strokeWidth: 4
      });

      group.add(box);
    })();
  }

  shapesLayer.add(group);
  stage.add(shapesLayer); 
```

[这是有关如何添加组的教程](http://www.html5canvastutorials.com/kineticjs/html5-canvas-complex-shapes-using-groups-with-kineticjs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:29:56.340

您可以使用 drawimage 将屏幕外画布绘制到另一个画布的某个部分。

创建一个新的画布对象并将你所有的东西都画到它上面。最后，在某个坐标处使用 drawimage 将该画布绘制到您的屏幕画布上。

# xcode - .htaccess 语法代码需要修改

> ID：15735730
> 
> 赞同：0
> 
> 时间：2013-03-31T23:25:55.830
> 
> 标签：xcode, linux, .htaccess, seo

1）我正在尝试 301 所有非 www 到 www（包括文件）

**例如** `/subdirectory/ + /subdirectory/1.jpg`（带有 www. 的所有可能性。）

* * *

2) 我试图仅排除所有 .html 和 .php 文件，并且只希望将非尾随版本编入索引，其余的将是 301 到我的域

**例如**/example.html 或 .php >> /example

**例如**/example.html 或 .php >> 不工作 + 不被索引

**例如**/example 只能工作并且只能被索引（以避免重复的内容）

* * *

3）我正在尝试 301 到我的域的所有死链接和 404

**例如**/deadlink 或 /deadlink.pdf >> 301'd 到我的域，example.com

* * *

这是我目前拥有的代码，但我不确定它是否 100% 正确。有人可以用经过验证的语法来回复这 3 个任务吗？谢谢。

* * *

```
Options +FollowSymLinks 

RewriteEngine On 

RewriteCond %{HTTP_HOST} ^example\.com$ [NC] 

RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 

RewriteEngine on  

RewriteCond %{REQUEST_FILENAME} !-d 

RewriteCond %{REQUEST_FILENAME}\.php -f 

RewriteRule ^(.*)$ $1.php

RewriteEngine on 

RewriteCond %{REQUEST_FILENAME} !-d 

RewriteCond %{REQUEST_FILENAME}\.html -f 

RewriteRule ^(.*)$ $1.html

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule . / [L,R=301] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T00:10:26.193

好的，您在这里尝试了三个部分，我将分别解决它们。

在我们开始之前，您只需要拥有一个

```
RewriteEngine on 
```

它只需要打开一次。

您还应该设置：

```
Options -MultiViews 
```

因为 MultiViews 可能会在这里引起一些奇怪的问题。

## 重定向到万维网

`!=`您当前的规则应该有效，但您可以使用前缀 on稍微简化它们`RewriteCond`：

```
RewriteCond %{HTTP_HOST} !=www.example.com
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

## 删除`.php`和`.html`后缀

您在这里需要两组单独的规则：一组从 URL 中删除后缀，另一组在内部读取它们。

让我们先做后半部分，因为这样更容易：

```
RewriteCond %{SCRIPT_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html [L]

RewriteCond %{SCRIPT_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [L] 
```

但是，有了这一点，删除后缀有点棘手，而不会与前面的规则冲突并试图将它们放回原处。我能想出的最好方法是：

```
RewriteCond %{THE_REQUEST} \.(html|php)
RewriteRule ^(.*)\.(html|php)$ $1 [R=301,L,NC] 
```

但我愿意接受建议。

## 301ing所有死链接

不要那样做。如果链接不存在，它应该返回一个 404 状态的页面。如果您想将*访问者*从死链接重定向到您的主页，请在您的 404 页面中放置一个链接。

# php - 在php中获取HTML复选框的值

> ID：15735732
> 
> 赞同：0
> 
> 时间：2013-03-31T23:26:12.240
> 
> 标签：php, html

我正在创建一个 HTML 表单，其中有一个文本框。我的要求是用户可以选中多个复选框，然后我必须获取所有选中的值，然后将值发送到数据库（我想使用 PHP）。

这是我在文本框中的代码

```
 $Intensive=$_POST['Intensive'];
  $Intensive_count=count($Intensive);
  $i=0;
  //$count=0;
    //$index;
  $max=0;
  //$index;
   While($i < $Intensive_count)
   {
    if($Intensive[$i]=="High frequency ventilation" )
   {
   $Intensive_score=4; 
  }
     elseif($Intensive[$i]=="Mechanical ventilation with muscle relaxation")
  {
   $Intensive_score=4;
  }
  elseif($Intensive[$i]=="Mechanical ventilation")
  {
   $Intensive_score=3;
  }
  elseif($Intensive[$i]=="CPAP")
  {
   $Intensive_score=2;
  }
  elseif($Intensive[$i]=="supplemental oxygen")
  {
   $Intensive_score=1;
  }

 if($Intensive_score>$max)
  {
   $max=$Intensive_score;
   $index=$i;
 }
  $i++;
 } 
```

现在使用上面的代码，我可以回显该值，但记录不会进入数据库。

```
$sql1="insert into Form2 values('$Medical_Record_Id','$sub1','$Question1','4','$Intensive[$index]','$max')";

 mysql_query($sql1); 
```

谁能告诉我该怎么做。

谢谢 ..：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:35:17.140

假设您使用`POST`作为发送这些复选框所在表单的方法，您可以使用`$_POST['Intensive']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:36:36.573

我建议您使用整数而不是长字符串作为值，ID 也应该是唯一的，因此请修改您的 ID。

HTML：

```
<input type="checkbox" name="Intensive[]" id="r1" value="1">supplemental oxygen<br>
<input type="checkbox" name="Intensive[]" id ="r2" value="2">supplemental oxygen<br>
<input type="checkbox" name="Intensive[]" id="r3" value="3">Mechanical ventilation<br>
<input type="checkbox" name="Intensive[]" id="r4" value="4">Mechanical ventilation with muscle relaxation<br>
<input type="checkbox" name="Intensive[]" id="r5" value="5">High-frequency ventilation 
```

PHP：

```
foreach($_POST['Intensive'] as $data) {// Or $_GET
    if ($data == 1){
      /// do so and so
    }
    if ($data == 2){
      /// do so and so
    }
     ... and so on.
} 
```

# android-fragments - Android 在 Fragment 中打开 WebView - 崩溃

> ID：15735739
> 
> 赞同：0
> 
> 时间：2013-03-31T23:27:17.703
> 
> 标签：android-fragments, android-webview

当我触摸按钮时，应用程序需要打开一些网站。有 2 个选项卡（2 个片段）具有不同的按钮（1 个按钮 = 1 个链接）当我单击需要打开 WebView（打开链接）的按钮时，应用程序崩溃。我认为，错误出现在 AFragment.java 中

main.java（很好 99.9%）

```
import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.content.Context;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.Toast;

public class MainActivity extends Activity {
    public static Context appContext;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        appContext = getApplicationContext();

       //ActionBar
        ActionBar actionbar = getActionBar();
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab PTab = actionbar.newTab().setText("One");
        ActionBar.Tab DTab = actionbar.newTab().setText("Two");

        Fragment OneFragment = new AFragment();
        Fragment TwpFragment = new BFragment();

        PTab.setTabListener(new MyTabsListener(OneFragment));
        DTab.setTabListener(new MyTabsListener(TwoFragment));

        actionbar.addTab(PTab);
        actionbar.addTab(DTab);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("tab", getActionBar().getSelectedNavigationIndex());
    }

}

class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        //Toast.makeText(MainActivity.appContext, "Reselected!", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.fragment_container, fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }

} 
```

AFragment.java：

```
 import android.app.Fragment;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.webkit.WebView;
    import android.widget.Button;
    import android.widget.EditText;

    public class AFragment extends Fragment {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle  
                 SavedInstanceState) {                          
            // Inflate the layout for this fragment
            return inflater.inflate(R.layout.afragment, container, false);
        }

        // On Button Click
        public void openIt(View view) {
            Intent intent = new Intent(view.getContext(), openPage.class);
            startActivity(intent); 
                     }
            } 
```

openPage.class:

```
 import android.webkit.WebView;
    import android.app.Activity;
    import android.os.Bundle;

    public class openPage extends Activity {

        WebView myWebView;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
                    setContentView(R.layout.webview);

            WebView myWebView = (WebView) findViewById(R.id.webview);
            myWebView.loadUrl("http://safhkalfsd.com");

        }
    } 
```

布局很好 99,99% 我把 android:onClick="openIt" 放在 afragment.xml 里面的 Button THANK YOU

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:04:45.800

解决了！我需要说：

```
// On Button Click
public void openIt(View view) {
    Intent intent = new Intent(view.getContext(), openPage.class);
    startActivity(intent); 
             } 
```

在 MainActivity 中，而不是在“AFragment”中。

# batch-file - 批处理文件在特定文本文件的一行

> ID：15735746
> 
> 赞同：0
> 
> 时间：2013-03-31T23:27:59.857
> 
> 标签：batch-file, dos

如何删除文本中每一行的一部分？

例子：

```
</td><td valign="top" style="font-weight:bold;">1100052719
</td><td valign="top" style="font-weight:bold;">1100053714
</td><td valign="top" style="font-weight:bold;">1100053777 
```

我想做到这一点：

```
1100052719,1100053714,1100053777 
```

我有一个名为 POs.txt 的文件，可以在其中看到所有这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:23:00.487

```
@echo off
setlocal enabledelayedexpansion
set OutputString=
for /f "tokens=3 delims=>" %%A in (Pos.txt) do set OutputString=!OutputString!%%A,
set OutputString=%OutputString:~0,-1%
echo.%OutputString%
endlocal
pause 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T01:17:07.293

通过解释...

```
 setlocal enabledelayedexpansion 
```

允许我们将变量名包含在 ! 表示我们要在运行时而不是在加载时扩展变量。

```
 set OutputString= 
```

定义具有初始空值的变量 OutputString。

```
 for /f "tokens=3 delims=>" %%A in (Pos.txt) do set OutputString=!OutputString!%%A, 
```

当使用 > 分隔符时，我们要保留的文本是第三个标记。
对于每次迭代（Pos.txt 中的文本行），我们将第三个字段（标记）与逗号一起附加到 OutputString

```
 set OutputString=%OutputString:~0,-1% 
```

通过从第一个字符开始并保存 OutputString 的最后一个字符以外的所有字符来去除尾随逗号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T02:34:40.123

代码 1：

```
@echo off
setlocal enabledelayedexpansion
set OutputString=
for /f "delims=" %%a in (Pos.txt) do (
    set line=%%a
    set OutputString=!OutputString!!line:*">=!,
)
set OutputString=%OutputString:~0,-1%
echo,%OutputString%
pause 
```

代码 2：

```
@echo off
setlocal enabledelayedexpansion
set OutputString=
for /f "delims=" %%a in (Pos.txt) do (
    set line=%%a
    set OutputString=!OutputString!!line:~-10!,
)
set OutputString=%OutputString:~0,-1%
echo,%OutputString%
pause 
```

# eclipse - Scalacl编译错误

> ID：15735749
> 
> 赞同：5
> 
> 时间：2013-03-31T23:28:24.787
> 
> 标签：eclipse, scala, scalacl

我正在尝试使用 scalacl。我已经为我的项目添加了 scalacl 作为 Xplugin，但是当我这样做时，它给了我两个错误：

1) Scala 编译器中的错误：null 2) SBT 构建器在编译时崩溃。错误消息为“空”。检查错误日志以获取详细信息。

它还在弹出窗口中给出此错误：在“计算启动按钮工具提示”期间发生内部错误。Scala 编译器无法为项目初始化：HelloWorld。请检查您的类路径是否包含标准 Scala 库。

# python - 带有shell脚本的Python套接字程序？

> ID：15735754
> 
> 赞同：1
> 
> 时间：2013-03-31T23:28:33.707
> 
> 标签：python, sockets, client-server, automated-tests

我有两台机器通过交换机连接。我有一个流行的服务器应用程序，我们可以在机器 A 上调用它“SXC_SERVER”，然后我用机器 B 上的相应应用程序询问“SXC_SERVER”，我将它称为“SXC_CLIENT”。我想做的是两方面的：

*   *首先，通过tcpdump*获取 SXC_SERVER 和 SXC_CLIENT 交互的流量。两者之间的交互是简单的 GET 和 RESPONSE，但我需要流量跟踪。
*   其次，我想在每次交互/迭代期间记录 SXC_SERVER 进程的驻留集大小 (RSS) 使用情况

此外，我不仅需要一个通信的流量跟踪和一个 SXC_SERVER 进程的内存使用日志，否则我不会写这个，因为我可以在十分钟内离开并这样做......事实上我的目标是做的很多！但是为了简单起见，我们在这里说我想做 10。

由于这将是非常劳动密集型的，因为它需要我在两台机器上停止和启动所有 SCX_CLIENT-to-SXC_SERVER 询问、*tcpdump*流量捕获和 SXC_SERVER 日志记录的 RSS 内存使用我想编写一个自动化脚本.

但！我不是程序员，也不是软件人......（该死）

但是，也就是说，我可以创建一个单独的客户端/服务器程序来监督这种自动化，我们可以将其称为 AUTO_SERVER 和 AUTO_CLIENT。我的想法是机器 B 将运行 AUTO_CLIENT，机器 A 将运行 AUTO_SERVER。两者的目的都是为了促进自动化，即停止和启动*tcpdump*，以及在机器 B 使用 SXC_CLIENT 查询 SXC_SERVER 之前，SXC_SERVER 进程的机器 A 上的内存日志记录（如果你跟着我！）。

在 SXC_SERVER-to-SXC_CLIENT GET/RESPONSE 交互运行一次之后，我将得到：

*   *一个名为n1.pcap*的流量捕获 *.pcap 文件
**   *和一个名为n1.csv*的内存日志转储（与进程关联的 RSS）。*

 *我不是程序员或软件人，但我可以看到一个粗略的方法（尽我所能）来实现这一点，如下所示：

**机器 A：AUTO_SERVER**

```
BEGIN:

msgRecieved = open socket(listen on port *n*)

DO

1\. wait for machine A to tell me when to start watch (as in the program) to log RSS memory usage of the SXC_SERVER process using hardcoded command:
watch -n 0.1 'ps -p $(pgrep -d"," -x snmpd) -o rss= | awk '\''{ i += $1 } END { print i }'\'' >> ~/Desktop/mem_logs/mem_i.csv

UNTIL (messageRecieved == "FINISH")

quit

END. 
```

**机器 B：AUTO_CLIENT**

```
BEGIN:

open socket(new)

for i in 10, do

1\. locally start tcpdump with hardcoded hardcoded tcpdump command with relevant filter to only capture the SXC_SERVER-to-SXC_CLIENT traffic and set output flag to capture all traffic to a PCAP file called n*i*.pcap where *i* is the integer of the current for loop, saving the file in folder "~/Desktop/test_captures/".
2\. Send the GET request to SXC_SERVER
3\. wait for RESPONSE reply from SXC_SERVER
4\. after recieved reply tell machine B to stop watch command

i++

5\. send string "FINISH" to machine A.

END. 
```

如您所见，我假设这将通过在两台机器上使用单独的小型客户端/服务器类程序（这里我称之为 AUTO_SERVER 和 AUTO_CLIENT）来实现。*真正粗糙*的伪代码设计应该是不言自明的。

我在这里找到了一个小型客户端/服务器套接字程序：[http](http://www.velvetcache.org/2010/06/14/python-unix-sockets) ://www.velvetcache.org/2010/06/14/python-unix-sockets我认为如果我编辑它可能合适，但我不是确定我究竟如何可行地实现这一目标。您可以在其中提供一些帮助。

Python可以做到这一点自动化吗？可以用一个 bash 脚本来完成吗？你认为我在这方面走对了吗？或者你有什么有用的建议吗？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:20:55.257

您可以将 Python 用于此类事情，但我强烈建议使用 SSH 来完成大部分工作（而不是自己编写连接内容），然后使用 bash 脚本或 Python 脚本来启动 tcpdump 等进程.

但是，您的问题对于 stackoverflow 来说有点过于开放了-听起来您是在要求某人为您编写此程序，而不是寻求特定问题的帮助。*

# ruby-on-rails - 如何将帖子分成页面，使每个页面只有 10 个项目？

> ID：15735759
> 
> 赞同：-1
> 
> 时间：2013-03-31T23:29:00.813
> 
> 标签：ruby-on-rails

如果我生成一个脚手架，在索引页面中，它会列出数据库中的所有数据。如果我只想要 10 个帖子/页面，并且在底部有一个页面 1、2、3，... 可以点击怎么办。另外，我不想检索所有数据并使用 javascript 将它们分成页面。我想查询 10 个帖子，如果有人点击第 2 页，它会启动另一个查询。

没有插件的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:35:22.140

您可以使用 Kaminari 宝石

[https://github.com/amatsuda/kaminari](https://github.com/amatsuda/kaminari)

然后将控制器设置为通过 JS 响应，并使用 AJAX 更新页面。

编辑

如果你想自己写，你可以这样做。

```
def index
   page = params[:page] ? params[:page] || 0
   @posts = Post.limit(10).offset(10*page)
   count = Post.count
end 
```

然后在您看来，您将使用计数创建一个链接

```
/posts through /post?page=#{(count/10) - 1} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:32:13.787

可能你必须使用分页，你可以看看这个 [https://github.com/mislav/will_paginate](https://github.com/mislav/will_paginate) [http://railscasts.com/episodes/254-pagination-with-kaminari](http://railscasts.com/episodes/254-pagination-with-kaminari)，这是老百姓做的，它会为你处理得很好:)

你可以看看这个 [http://www.nullislove.com/2007/05/24/pagination-in-rails/](http://www.nullislove.com/2007/05/24/pagination-in-rails/) 你可以自己卷起来。

# .net - 正则表达式与下一行不匹配

> ID：15735762
> 
> 赞同：0
> 
> 时间：2013-03-31T23:29:15.380
> 
> 标签：.net, regex

想要匹配“主题”或“主题：”之后的内容，但仅在该行上
我想在所有行中搜索主题或主题：
但如果该行的其余部分为空白，则不匹配

```
(?i)(?<=\bSubject:?\s+).+$ 
```

示例文本

```
主题：  
帕特·桑德斯

```

（Subject: 和 Pat 之间的换行符）

该正则表达式与 Pat Sanders 匹配。
因为它在下一行，我不希望它匹配。

正则表达式是用`RegexOptions.Multiline`

我认为这`.+`是贪婪和消耗换行符。

这是因为它只匹配当前行：

```
(?i)(?<=\bsubject:).+?$ 
```

但这不起作用：

```
(?i)(?<=\bsubject:?).+?$ 
```

回溯不消耗 :
: 包含在匹配中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:42:32.040

try this may work

```
(\b(subject)\b).+(?=\s+\r?$) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:57:42.060

你试过这个吗？

```
Subject:[\w ]+$ 
```

在这里看到它：[http ://rubular.com/r/k8SyIO6c2R](http://rubular.com/r/k8SyIO6c2R)

# angularjs - AngularJS - 布局中的变量以交换登录/我的帐户部分

> ID：15735763
> 
> 赞同：0
> 
> 时间：2013-03-31T23:29:17.867
> 
> 标签：angularjs

刚刚从 Zend Framework 2/jQuery 的工作方式进入 AngularJS。

我在 Zend Framework 中的 layout.html 将包含如下内容：

```
<html><body>
<div id="topNavigation" class="nav nav-fixed">
<?php
if ($this->identity()) :
    ?>
    <button id="logoutBtn">Log out</button>
    ?>
else:
    ?>
    <input type="text" name="username" />
    <input type="password" name="password" />
    <button>Login</button>
    <?php
<?php
endif;
?>
</div>
<?php 
// The content from each ViewAction
echo $this->content 
?>
<footer>This is the common footer text.</footer>
</body></html> 
```

现在我将其转换为 AngularJS 我了解 index.html 是带有 ngView 指令的布局，指向每个视图的模板文件。如何将变量放入我的布局以切换登录状态？如果你不能真正控制布局，我在哪里保存保持登录状态的代码，因为我在任何地方都看不到全局代码。

我的 angularJS index.html 布局文件目前与上面类似：

```
<html><body>
<div id="topNavigation" class="nav nav-fixed">
    <button id="logoutBtn">Log out</button>
    <input type="text" name="username" />
    <input type="password" name="password" />
    <button>Login</button>
</div>
<div ng-view></div>
<footer>This is the common footer text.</footer>
</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:56:23.753

最好的地方可能在 $rootScope 中，因为所有控制器的范围都继承自它，所以可以将其视为“全局”。

不过，我在上面的 index.html 中看到，您没有指定控制器。您需要添加一个控制器（可能在“body”中），然后在该控制器中，将登录信息添加到 $rootScope.

一旦你的 $rootScope 中有一个变量（比如'isLoggedIn'），你就可以使用 ng-show 和 ng-hide 指令来确定你想要显示的 DOM 的哪些子集。

# c++ - “字符串”类型无法解析 Eclipse C++

> ID：15735764
> 
> 赞同：-3
> 
> 时间：2013-03-31T23:29:35.660
> 
> 标签：c++, string

我正在尝试这样做：

```
#include <string>

class Medicine{

    string name;

}; 
```

但它根本不起作用。我尝试右键单击项目-> 索引-> 搜索未解决的包含，它说：项目中的未解决包含（0 个匹配项）。它也不适用于 std::string 。我应该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T23:30:58.547

您应该完全符合`string`它所属的命名空间 ( `std`)：

```
#include <string>

class Medicine {
    std::string name;
//  ^^^^^
}; 
```

或使用`using`声明：

```
#include <string>

using std::string; // <== This will allow you to use "string" as an
                   //     unqualified name (resolving to "std::string")

class Medicine {
    string name;
//  ^^^^^^
//  No need to fully qualify the name thanks to the using declaration
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T23:31:03.107

（标头的`string`）类在 std 命名空间内定义。您在对象声明中缺少`using std::string;`或`std::`之前。`string`

如果您仍然无法修复它，请查看[此答案](https://stackoverflow.com/a/9182742/493122)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:48:38.390

尝试创建一个新的控制台项目并将其保留在下面的这个简单代码中。如果这不起作用，那么您可能没有为 c++ 正确设置 eclipse。eclipse c++ 环境的默认下载地址为[http://www.eclipse.org/cdt/](http://www.eclipse.org/cdt/)

```
#include "stdafx.h"//optional depending if you have precompiled headers in VC++ project
#include <string>

using std::string;

class Medicine
{
    string name;        
};

// or use this alternative main if one below doesn't work
//int main(int argc, _TCHAR* argv[])
int _tmain(int argc, _TCHAR* argv[])
{
    Medicine test;

    return 0;
} 
```

# calculator - 将 abs(x) 和 sqrt(x) 函数添加到 flex/bison 计算器

> ID：15735777
> 
> 赞同：0
> 
> 时间：2013-03-31T23:31:07.173
> 
> 标签：calculator, bison, flex-lexer, absolute

我必须为课堂上的实验室制作一个 flex/bison 计算器，并且我必须添加计算平方根或绝对值的功能，它们放在 sqrt(x) 或 abs(x) 中。我导入了数学库，如果它的命令由一个字符组成，我可以让计算器工作。这就是我的意思：

```
expr:
......
| '(' expr ')' { $$ = fabs($2); } //for abs
| '[' expr ']' {$$ = sqrt($2); } //for sqrt
....... 
```

现在，这工作正常，如果我输入 (-2)，我得到 2，或 [4] = 2。问题很明显，我需要让它命令是 abs(x) 和 sqrt(x)。如果我切换代码说

```
| "abs(" expr ')' { $$ = fabs($2); } //for abs
| "sqrt" expr ']' {$$ = sqrt($2); } //for sqrt 
```

这不起作用，因为它看到 a 然后 b，并试图用它做点什么。这可能是因为我的计算器还支持分配变量值（如 x=2），所以它认为 a 和 b 之间应该有一个运算符。不幸的是，我不知道如何解决这个问题。我将不胜感激任何帮助。如果有帮助，这是我的代码：

hexcalc.y

```
%{
#include <stdio.h>
#include <math.h>
#include <stdlib.h> // often required

// A simple error message to move things along
void yyerror(const char *msg)
{
printf("ERROR(PARSER): %s\n", msg);
}

// Storage for variables: yes Virginia, only 26 variables possible in this langu$
long variables[26];
%}

%union {
float nvalue;
int ivalue;
int varindex;
}

%token <nvalue> NUMBER
%token <ivalue> INT
%token <varindex> NAME
%type <nvalue> expr
%type <nvalue> term
%type <nvalue> varOrNum
%%
statementList : statement '\n'
| statement '\n' statementList
;

statement : NAME '=' expr { variables[$1] = $3; }
| expr { printf("RESULT: %f\n", $1); }
;

expr: expr '+' term { $$ = $1 + $3; }
| expr '-' term { $$ = $1 - $3; }
| '-' term { $$ = 0 - $2; }

| "abs(" expr ')' { $$ = $2; }
| "sqrt(" expr ')' { $$ = sqrt($2); }
| expr '/' term { $$ = $1 / $3; }

| term { $$ = $1; }
;

term : term '*' varOrNum { $$ = $1 * $3; }

| varOrNum { $$ = $1; }
;

varOrNum : NUMBER { $$ = $1; }
| NAME { $$ = variables[$1]; }
;

%%

main() {
int i;
for (i=0; i<26; i++) variables[i] = 0;
yyparse();
} 
```

hexcalc.l

```
%{
#include <stdlib.h>
#include <math.h>
#include "hexcalc.h"
#define BASE 10
char* endptr;

%}

%%

[a-z] { yylval.varindex = yytext[0] - 'a'; $
}
[0-9]+ { yylval.nvalue = atof(yytext);
return NUMBER;
}
[0-9]+"."[0-9]+?|"."[0-9]+? {yylval.nvalue = atof(yytext);

return NUMBER;
}

[ \t] ;
\n|. { return yytext[0];
}
%%

int yywrap() {
return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T02:26:20.200

您需要将词法分析器中的多字符名称识别为单个标记，然后在语法中使用它们。简单的方法是将它们添加到您的词法分析器中：

```
abs    { return ABS; }
sqrt   { return SQRT; } 
```

然后你可以添加到你的解析器：

```
%token ABS SQRT

%%

expr: ABS  '(' expr ')' { $$ = fabs($3); }
    | SQRT '(' expr ')' { $$ = sqrt($3); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:58:47.807

您需要在 .l 文件中为“abs”和“sqrt”创建规则；声明他们将通过 %token 返回的令牌；并在语法规则中使用这些标记名称： ABS "(" expr ")" : ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:30:13.373

您应该查看 Bison 的文档，其中给出了针对预定义函数的更具可扩展性的解决方案（使用符号表）。

[http://www.gnu.org/software/bison/manual/html_node/Multi_002dfunction-Calc.html](http://www.gnu.org/software/bison/manual/html_node/Multi_002dfunction-Calc.html)

# java - cmd中的Javac命令

> ID：15735785
> 
> 赞同：0
> 
> 时间：2013-03-31T23:32:24.023
> 
> 标签：java, javac

我在从命令行界面（命令提示符和 NetBeans 终端）编译 Java 程序时遇到问题。

我将 jdk 目录添加到`PATH`系统变量中，但并非所有命令都是可识别的，一些命令（在 jdk1.6.0_37\bin 文件夹中）被识别（如：、、、）`java`，`javaw`而`packger`其他命令我必须输入完整的目录名称它可以工作（例如：`jar`、、、、`javac`）`javah`（`javap`这适用于 cmd 和 NB）。

我不知道为什么会这样，所有这些文件都是 .exe ，都是 Java Platform SE 二进制文件，我能看到的唯一区别是文件的图标，那些工作的有 Java 标志（咖啡杯）其余的都有标准的 .exe 标志。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:49:38.467

您必须将`jdk1.6.0_37\bin`目录添加到`PATH`变量中。那是您要运行的所有命令所在的位置。将目录添加到`PATH`变量后，打开一个新的命令提示符并再次运行这些命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:57:55.800

我搜索了许多建议我输入 cmd 的答案：

```
set path = "%path%;c:program files\java\jdk1.7.0\bin" 
```

但这是错误的！

**正确的解决方案**是您离开“设置”并输入

```
path = %path%;c:program files\java\jdk1.7.0\bin 
```

*P/s：当然你必须用你当前的java版本文件夹替换“jdk1.7.0”文件夹*

# java - 在间隔和总和之间拆分小时数

> ID：15735788
> 
> 赞同：0
> 
> 时间：2013-03-31T23:32:59.480
> 
> 标签：java, date, intervals

我正在使用 Java 中的日期间隔，并且我有一个初始日期（比如说 04-04-2013 11:00:00）、几个小时（例如 12:00）和一些间隔（如周日 09:00 - 18:00，周一 10:00 - 13:00，14:00 - 17:00）可以由用户指定，这意味着它可以是他想要的任意多个间隔，ir一天或多天。

现在，我需要做的是在这些间隔上分割那个小时数，直到它结束，然后在初始日期添加它。

举些例子：

04-04-2013，间隔12小时，隔天09:00-18:00（9小时），下一个10:00-15:00（5小时）。在这种情况下，12 小时将在第 5 天的 9 小时和第 6 天的更多 3 小时中拆分。因此，最终日期将是 04-06-2013 13:00（因为第 6 天从 10:00 开始，并且我还需要3个小时...）

有一种简单的方法可以做到这一点吗？任何具有这些功能或类似功能的库？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:07:15.790

像这样的东西？：

```
Date[] intervalStart = <<specify all the starts of all the intervals>>;
Date[] intervalEnd = <<specify all the ends of all the intervals>>;

long totalTimeRemaining = <<hours>> * 60 * 60 *1000;  //milliseconds

for (int i=0; i<intervalStart .length; i++) {
    long intervalLen = intervalEnd[i].getTime()- intervalStart[i].getTime();
    if (intervalLen > totalTimeRemaining) {
        return new Date(intervalStart[i].getTime()+totalTimeRemaining);
    }
    totalTimeRemaining = totalTimeRemaining - intervalLen;
} 
```

遍历不同的间隔，计算一个间隔的长度，然后从总剩余时间中减去它。如果间隔长于剩余时间，只需通过将剩余量添加到该间隔的开始时间来计算结束时间。

# regex - 正则表达式确定字符串是否包含所有元音？

> ID：15735792
> 
> 赞同：-4
> 
> 时间：2013-03-31T23:33:38.037
> 
> 标签：regex

例如，所需的正则表达式将成功匹配“areriroru”，但不会匹配仅包含两个元音的“sadwdij”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:55:24.247

在 C# 中，您可以在将字符串与 匹配之前对每个元音使用前瞻断言`.*`：

```
(?=.*a)(?=.*e)(?=.*i)(?=.*o)(?=.*u).* 
```

如果你不关心元音的大小写，你可以使用这个：

```
(?=.*[Aa])(?=.*[Ee])(?=.*[Ii])(?=.*[Oo])(?=.*[Uu]).* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T23:48:21.743

一种可能性是枚举元音的所有排列。这是总共 120 个中的前 24 个（所有`a`第一个元音的位置）。请注意，这形成了一个长表达式，但为了清楚起见，我在此处将其分成几行。

```
a.*e.*i.*o.*u
|a.*e.*i.*u.*o
|a.*e.*o.*i.*u
|a.*e.*o.*u.*i
|a.*e.*u.*i.*o
|a.*e.*u.*o.*i

|a.*i.*e.*o.*u
|a.*i.*e.*u.*o
|a.*i.*o.*e.*u
|a.*i.*o.*u.*e
|a.*i.*u.*e.*o
|a.*i.*u.*o.*e

|a.*o.*e.*i.*u
|a.*o.*e.*u.*i
|a.*o.*i.*e.*u
|a.*o.*i.*u.*e
|a.*o.*u.*e.*i
|a.*o.*u.*i.*e

|a.*u.*e.*i.*o
|a.*u.*e.*o.*i
|a.*u.*i.*e.*o
|a.*u.*i.*o.*e
|a.*u.*o.*e.*i
|a.*u.*o.*i.*e 
```

# javascript - 用ajax上课

> ID：15735799
> 
> 赞同：0
> 
> 时间：2013-03-31T23:34:59.043
> 
> 标签：javascript, css, dom

我如何用ajax上课？我有这个代码

```
function parseResponse(request){
if (request.readyState == 4){
    if (request.status == 200 || request.status == 304){
        var data = request.responseXML;

        var header1Name = data.getElementsByTagName('header1') [0].firstChild.nodeValue;
        var text1Name = data.getElementsByTagName('text1') [0].firstChild.nodeValue;

        var header1Elem = document.createElement("h3"); 
        var header1Text = document.createTextNode(header1Name);
        header1Elem.appendChild(header1Text);

        var text1Elem = document.createElement("p");
        var text1Text = document.createTextNode(text1Name);
        text1Elem.appendChild(text1Text);

        var existContent = document.getElementById("information");
        while ( existContent.hasChildNodes() ){
            existContent.removeChild(existContent.lastChild);
        }
        existContent.appendChild(header1Elem);
        existContent.appendChild(text1Elem);
    }
} 
```

}

但我完全不知道如何上课，我想将课程附加到 h3 元素，非常感谢任何帮助，我的意思是类`<h3 class="class">`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:38:32.240

Use [`className`](https://developer.mozilla.org/en-US/docs/DOM/element.className) property to set the class.

```
header1Elem.className = 'theclass'; 
```

Or [`setAttribute`](https://developer.mozilla.org/es/docs/DOM/Element.setAttribute)

```
header1Elem.setAttribute('class', 'theclass'); 
```

# python - mIRC 远 程 (Python) 触发私人消息

> ID：15735800
> 
> 赞同：0
> 
> 时间：2013-03-31T23:35:14.417
> 
> 标签：python, bots, mirc

我将如何进行触发（例如！Help），然后机器人会私信给他们一个列表。不是它将打开一个新窗口的消息类型，而是它将显示在频道中但只有他们可以看到它的位置（如果你知道我的意思。）我不知道这些条款，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T05:52:32.617

您正在谈论的消息是使用`/msg <User> message`命令发送的消息，而不是使用`/query`. [如此处](http://www.irchelp.org/irchelp/irctutorial.html)所述（第*2.2 节私人对话*）：

> 在 mIRC 中，如果您启动 /MSG，则在其他人响应您之前，您不会得到“查询”窗口。您可以使用 /QUERY 命令从一开始就在您身边设置一个“查询”窗口。

问题是，由于这是特定于客户端的行为，您永远无法确定不是 mIRC 的客户端会以一种或另一种方式行事。

有了这个，编码方面，你最有可能想要使用的是[一个 python irc 协议客户端库](https://pypi.python.org/pypi/irc/)，它将为你省去处理 IRC 协议管道的麻烦。该特定库为您提供了一个示例 irc bot，这可能是您需要开始的地方。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T12:01:37.357

在我看来，您想要的是[NOTICE](https://www.rfc-editor.org/rfc/rfc2812#section-3.3.2)事件，而不是[PRIVMSG](https://www.rfc-editor.org/rfc/rfc2812#section-3.3.1)？

PRIVMSG 是指定发送给接收者的文本的事件，其中接收者可以是个人或频道。您要求一条不打开新窗口的私人消息，直接发送给用户的 PRIVMSG 将为他们打开一个新窗口。发送到通道的PRIVMSG 将显示在通道中。

NOTICE 向用户发送不创建新窗口的直接消息。但是，我不鼓励使用它，因为许多客户端处理此类事件的方式不同。

例如;
默认情况下，mIRC 将在当前活动窗口中显示通知。
然而，Irssi 将在状态窗口中显示它们，可能会被忽略。

话虽如此，我不太确定您使用 Python 的目的是什么，您的帖子中没有解释。我只能假设机器人是用 Python 编程的，而您使用的是 mIRC 客户端？

# java - 使用 XML 中的 HTML 内容进行 JAXB 解析

> ID：15735807
> 
> 赞同：2
> 
> 时间：2013-03-31T23:36:22.597
> 
> 标签：java, xml, jaxb

我收到以下 XML（由第三方生成）：

```
<Source>Product Description</Source> <Content>This is dummy text, <p>in highest qualities.<p> </Content> 
```

我遇到的问题是，当我将 XML 解组为 JAVA 对象时，我发现“内容”字段为空（没有发生错误或异常，它只是一个空字段）。

问题显然出在“内容”标签中的 HTML 文本上。

由于我没有收到的 XML 的权力，有没有一种适当的方法可以克服这个问题。以下是我的带有注释的 Java Pojo。提前致谢。

```
public String getSource() {
    return source;
}

@XmlElement(name = "Source")
public void setSource(String source) {
    this.source = source;
}

public String getContent() {
    return content;
}

@XmlElement(name = "Content")
public void setContent(String content) {
    this.content = content;
} 
```

# jquery - 为我的 wordpress 网站中的每个链接添加一个参数

> ID：15735813
> 
> 赞同：0
> 
> 时间：2013-03-31T23:37:24.007
> 
> 标签：jquery, wordpress

我想为我网站中的每个链接添加一个参数，比如说 ?var=123 。

我尝试使用这些代码，但什么也没发生：

```
var has_querystring = /\?/; 

$("a[href]").each(function(el) {
    if ( el.href && has_querystring.test(el.href) ) {
        el.href += "&var=123";
    } else {
        el.href += "?var=123";
    }
}); 
```

* * *

```
$('a[href]').attr('href', function(i, hrf) { return hrf + '?var=123';}); 
```

* * *

```
$('a[href]').click(function(e) {
    e.preventDefault();
    window.location = this.href + '?var=123';
});` 
```

我究竟做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:41:59.257

If none of those worked then it sounds like your jQuery code is executing before the DOM has finished being constructed, and it's not selecting any of the elements. The solution to that is to use a DOM ready event handler:

```
$(document).ready(function() {
    // your code here
}); 
```

In the case of the first snippet, using `.each()`, note that the first argument passed to the function is the index of the element, not the element itself, so you actually want:

```
$('a[href]').each(function(index, el) {
    ...
}); 
```

# spring - spring security 3.0 restfull authentification for mobile client

> ID：15735815
> 
> 赞同：0
> 
> 时间：2013-03-31T23:37:28.257
> 
> 标签：spring, security, rest, authentication, mobile

We have an existing jsf/spring application that uses spring security for authentication and authorization.

Now we want to add a restful web service layer, to be used by a mobile client (native android app.) The existing authentication process uses `j_spring_security_check` and a custom filter.

Can I handle the restful api authentication and authorization within the same context? If yes, how?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:01:39.687

一种可能性是为 API 领域创建另一个安全配置。将其配置为 HTTP BASIC 身份验证（如果适合您并且 API 通过 https 提供）。

例如：

```
<http use-expressions="true" pattern="/api/**" realm="API Realm" create-session="stateless">    
     ...
     <http-basic />
     ...
     <logout logout-url="/api/logout" />
</http> 
```

编辑：根据评论者的评论，我正在纠正我的答案：不幸的是，这种方法在 Spring Security 3.0 中不起作用，因为 Spring Security 配置中的多个 http 元素是在 3.1 中添加的。

# jquery - CSS 3D Transform | Inaccesible Content After Transition

> ID：15735816
> 
> 赞同：1
> 
> 时间：2013-03-31T23:37:30.710
> 
> 标签：jquery, css

[Here is an example fiddle](http://jsfiddle.net/twahlin/e344M/12/) of what I'm trying to do.

jQuery transit and CSS3 3D transitions are being used in order to rotate 2 divs on click. If you take a look at the fiddle, clicking 'rotate' will change the perspective on the div so 'rotate back' is showing. 'rotate back' is not clickable, as there appears to be some funky z-indexing or positioning going on.

HTML

```
<div class="masthead">
  <div class="face face-1"><span class="rotate">rotate</span></div>
  <div class="face face-2"><span class="rotate-back">rotate back</span>
</div> 
```

JS

```
$(document).ready(function () {
  $(".rotate").click(function () {
    $(".masthead").transition({
        perspective: '0',
        rotateX: '90deg',
        duration: 250
    });
});
    $(".rotate-back").click(function () {
    $(".masthead").transition({
        perspective: '0',
        rotateX: '-90deg',
        duration: 250
    });
  });
}); 
```

CSS

```
.masthead {
    -webkit-animation-timing-function: ease-in-out;
    -webkit-transform-style: preserve-3d;
    -webkit-transform-origin: 22px 22px 0;
}
.masthead .face {
    height: 44px;
    position: absolute;
    width: 100%;
}
.masthead .face-1 {
    background: red;
    -webkit-transform: translateZ(22px);
}
.masthead .face-2 {
    background: aqua;
    -webkit-transform: rotateX(-90deg) translateZ(22px);
} 
```

Any help would be appreciated, thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:11:18.460

红色超过蓝色，反之亦然。使用指针事件允许点击到达您的目标元素。

```
 $('.face-1').css('pointer-events', 'none');
  $('.face-2').css('pointer-events', ''); 
```

这是你的想法：http: [//jsfiddle.net/e344M/14/](http://jsfiddle.net/e344M/14/)

# drupal - 如何找出drupal solr模块所做的查询是什么

> ID：15735817
> 
> 赞同：0
> 
> 时间：2013-03-31T23:37:35.097
> 
> 标签：drupal, solr

我无法理解哪个文件夹是 drupal solr 集成模块的日志。我正在使用 drupal 7，模块版本是 7.x-1.1

我也有 solr 附件模块。

我如何知道显示搜索结果时发出的请求是什么以及如何自定义它们？请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:40:05.233

不确定 Drupal 的细节，但对于 SOLR，您应该查找“catalina.txt”日志文件或类似的文件。

编辑：更准确地说是“catalina.2013-03-31.log”。你正在寻找这样的东西：

```
INFO: [catalog] webapp=/solr path=/select params={sort=startdate+asc&q=(((((_lang:en\-gb+AND)))+AND+startdate:[0001-01-01T00:00:00Z+TO+2013-02-18T00:01:17Z])+AND+enddate:[2013-02-18T00:01:17Z+TO+9999-12-31T23:59:59Z])} hits=6 status=0 QTime=0 
Feb 18, 2013 12:01:38 AM org.apache.solr.core.SolrCore execute 
```

“&q=”之后的内容将是 SOLR 搜索查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:24:23.567

查找从 Drupal 发送到 Solr 的查询的自定义的第一个地方是 api 文档（包含在模块中，可[在此处](http://drupalcode.org/project/apachesolr.git/blob/refs/heads/7.x-1.x:/apachesolr.api.php)在线获取）。您要查看的钩子是[hook_apachesolr_query_alter()](http://drupalcode.org/project/apachesolr.git/blob/refs/heads/7.x-1.x:/apachesolr.api.php#l191)。它允许您获取模块生成的查询并在将其发送到 Solr 之前对其进行修改。

Drupal 模块没有生成日志文件（除了看门狗消息），但您可以在 Solr 管理界面中启用日志记录。还有一些方法可以在 Solr 中启用日志记录（参见[此处](http://docs.lucidworks.com/display/solr/Configuring+Logging)和[此处](http://skybert.wordpress.com/2009/07/22/how-to-get-solr-to-log-to-a-log-file/)的示例）。[以下](http://wiki.apache.org/solr/LoggingInDefaultJettySetup)是 Solr wiki 关于使用默认 Jetty 容器进行日志记录的一些具体说明。我猜您使用的日志记录设置取决于您要查找的内容。

希望有帮助。

# javascript - 在闭包范围内设置变量

> ID：15735821
> 
> 赞同：6
> 
> 时间：2013-03-31T23:38:28.493
> 
> 标签：javascript, closures

我想我理解为什么变量存在于声明它们的函数之外，因为你正在返回另一个函数：

```
myFunction = function() {
    var closure = 'closure scope'
    return function() {
        return closure;
    }
}
A = myFunction(); // myFunction returns a function, not a value
B = A(); // A is a function, which when run, returns:
console.log(B); // 'closure scope' 
```

现在的写法，调用 A() 就像一个吸气剂。

问：如何编写 myFunction 以便调用 A(123) 是一个 setter？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T23:43:29.847

尝试以下操作：

```
myFunction = function() {
    var closure = 'closure scope'

    // value is optional
    return function(value) {
        // if it will be omitted
        if(arguments.length == 0) {
            // the method is a getter
            return closure;
        } else {
            // otherwise a setter
            closure = value;
            // with fluid interface ;)
            return this;
        }
    }
}
A = myFunction(); // myFunction returns a function, not a value
A(123); // set value
B = A(); // A is a function, which when run, returns:
console.log(B); // '123' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T23:43:22.450

如果你想要 getter 和 setter，你可以做这样的事情，例如：

```
var func = function() {
  var closure = 'foo';

  return {
    get: function() { return closure; },
    set: function(value) { closure = value; }
  }
};

var A = func();

A.set('foobar');
console.log(A.get()); //=> "foobar" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T23:42:13.230

应该很简单：

```
myFunction = function() {
    var closure = 'closure scope'
    return function(setTo) {
        if (typeof setTo !== "undefined") {
            closure = setTo;
            return this; //support call chaining, good idea hek2mgl
        } else {
            return closure;
        }
    }
} 
```

由于`closure`变量位于函数作用域的闭包内，因此您应该能够以与从中读取相同的方式对其进行分配。

见 jsFiddle：http: [//jsfiddle.net/WF4VT/1/](http://jsfiddle.net/WF4VT/1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-31T23:59:59.177

另一种选择是使用一个类并定义 getter 和 setter：

```
function MyClass(p){
    this._prop = p;
}
MyClass.prototype = {
    constructor: MyClass,
    get prop(){
        return this._prop;
    },
    set prop(p){
        this._prop = p;
    }
}

var myObject = new MyClass("TEST");
console.log(myObject.prop);
myObject.prop = "test";
console.log(myObject.prop); 
```

演示：http: [//jsfiddle.net/louisbros/bMkbE/](http://jsfiddle.net/louisbros/bMkbE/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T00:02:05.653

**[jsFiddle 演示](http://jsfiddle.net/gUXaS/)**

让您返回的函数接受一个参数。将其用作二传手：

```
myFunction = function() {
 var closure = 'closure scope';
 return function(val) {
    closure = val;
    return closure;
 }
}
A = myFunction(); // myFunction returns a function, not a value
B = A(123); // A is a function, which when run, returns:
console.log(B); // 'closure scope' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-29T16:02:30.547

重新审视这个问题，我发现我可以这样做：

```
 function outside() {
    	var result = 'initialized'
    	return inside
    	function inside(argVariable) {
    		if(arguments.length) {
    			result = argVariable
    			return this
    		} else {
    			return result
    		}
    	}
    }
    myFunction = outside() // outside returns a function
    X = myFunction() // returns: 'initialized'
    $('body').append(X + '<br>')
    myFunction(123) // setter
    X = myFunction() // returns: 123
    $('body').append(X)
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

# mysql - Update if record already exist but insert if record does not exist

> ID：15735825
> 
> 赞同：3
> 
> 时间：2013-03-31T23:38:54.437
> 
> 标签：mysql

How do i do this. Here is my code`

```
$insert = "REPLACE INTO drinks SET
name='".$name2."', category=' ".$category2." ', date=CURDATE()";
if (@mysql_query($insert)) {
echo '<h4 class="alert_info">Drinks added</h4>';
} else {
echo 'Error adding event: ' .
mysql_error() . '';
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T23:44:11.553

Generally, what you are looking for is called "[upsert](http://en.wikipedia.org/wiki/Merge_%28SQL%29)" (ie UPdate or inSERT). From this link apparently for MySQL the syntax is:

> INSERT ... ON DUPLICATE KEY UPDATE

With [more info from the MySql manual](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html).

# wcf - DDD对象创建设计

> ID：15735829
> 
> 赞同：0
> 
> 时间：2013-03-31T23:39:37.200
> 
> 标签：wcf, architecture, dns, domain-driven-design

我正在开发基于 DDD 的服务器端应用程序。

我的应用程序服务（wcf 层）有一个从客户端接收 XML 的方法。这个 XML 需要被处理并最终转换成一个对象。

在这种情况下，放置数据转换逻辑的最佳位置在哪里？在域模型内部？

例子：

```
void OnRequestArrived(string xml)
{
   ItemRequest request = ItemRequest.New(xml);
} 
```

还是在单独的域服务中？

```
void OnRequestArrived(string xml)
{
  ItemRequest request = _mappingService.Map(xml);
} 
```

ItemRequest 对象是业务流的主要领域模型。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:11:50.173

此责任属于 WCF 服务。在 DDD 术语中，这是反腐败层——它将外部模型映射到手头的域模型。应尽可能保护域模型免受外部服务的影响。

有时将这个单一的 WCF 服务分成两部分会很方便 - 一个应用程序服务和一个 WCF 特定的[适配器](http://en.wikipedia.org/wiki/Adapter_pattern)，它将使应用程序服务*适应*WCF 框架。这是基于[六边形架构](http://alistair.cockburn.us/Hexagonal+architecture)的。应用程序服务对 WCF 或序列化格式一无所知。WCF 适配器服务处理这个和其他序列化问题。出于两个原因，这可能很有用。首先，它使您的应用程序服务保持清洁并专注于其职责——域对象、存储库和其他服务的编排以实现域用例。其次，它允许从不同的适配器调用相同的应用程序服务。

# wpf - wpf - 将 DelegateCommand 注册到 CompositeCommand 的最佳实践

> ID：15735830
> 
> 赞同：3
> 
> 时间：2013-03-31T23:39:50.427
> 
> 标签：wpf, mvvm, prism, composition

iv'e 在我的启动项目中全局公开了一个 CompositeCommand

```
 public static class Commands
 {
      public static readonly CompositeCommand DiceRolledCommand = new CompositeCommand();
 } 
```

在我的启动项目引用的 ControlLibrary 中，我得到了一个具有 DelegateCommand 的 Control，该 Control 的每个实例都必须使用全局公开的 DiceRolledCommand 注册它的 Command。

这样做的最佳做法是什么：

这里有 3 个想法，其中前 2 个我不喜欢，因为它们有点像 hack，你需要一些编程组件 (dp) 并为了你的利益改变它的用途，导致代码和设计不佳。

* * *

**1)** CompositeCommand 类型的常规颓废属性，将使用 DiceRolledCommand 设置，并在其 CallBack 注册 MyControl 的 DelegateCommand (OnDiceRolledCommand) 。

```
public class MyControl : Control 
{
    public DelegateCommand<Tuple<int, int>> OnDiceRolledCommand { get; private set; }

    public CompositeCommand GlobalDiceRolledCommand
    {
        get { return (CompositeCommand)GetValue(GlobalDiceRolledCommandProperty); }
        set { SetValue(GlobalDiceRolledCommandProperty, value); }
    }

    public static readonly DependencyProperty GlobalDiceRolledCommandProperty =
        DependencyProperty.Register("GlobalDiceRolledCommand", typeof(CompositeCommand), typeof(MyControl), new UIPropertyMetadata(null,GlobalDiceRolledCommandPropertyChanged));

    private static void GlobalDiceRolledCommandPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var myControl= d as MyControl ;
        var compoisteCommand = e.NewValue as CompositeCommand;
        compoisteCommand.RegisterCommand(myControl.OnDiceRolledCommand);            
    }         
}

 <local:MyControl GlobalDiceRolledCommand="{x:Static local:Commands.DiceRolledCommand}"/> 
```

我不喜欢这种方法，因为它是一种使用依赖属性的操作，它有一个复杂的逻辑设置器。

* * *

**2）** 我也可以使用具有附加属性的第三方类执行与（1）中相同的操作，该附加属性将在附加属性的回调中注册 OnDiceRolledCommand

```
public static class Commands
{
     public static readonly CompositeCommand DiceRolledCommand = new CompositeCommand(); 

     public static ICommand GetRegisterToDiceRolledCommand(DependencyObject obj)
    {
        return (ICommand)obj.GetValue(RegisterToDiceRolledCommandProperty);
    }

    public static void SetRegisterToDiceRolledCommand(DependencyObject obj, ICommand value)
    {
        obj.SetValue(RegisterToDiceRolledCommandProperty, value);
    }

    public static readonly DependencyProperty RegisterToDiceRolledCommandProperty =
        DependencyProperty.RegisterAttached("RegisterToDiceRolledCommand", typeof(ICommand), typeof(Commands), new UIPropertyMetadata(null,OnRegisterToDiceRolledCommandProperty);

    private static void OnRegisterToDiceRolledCommandProperty(DependencyObject d , DependencyPropertyChangedEventArgs e)
    {
        var commandToRegister = e.newValue as DelegateCommand;
        DiceRolledCommand.RegisterCommand(commandToRegister );
    }
}

<local:MyContorl local:Commands.RegisterToDiceRolledCommand="{Binding OnDiceRolledCommand , RelativeSource={RelativeSource Self}}"/> 
```

我也不喜欢这种方法，原因与 1 ..

* * *

**3）**将复合命令作为参数传递给构造函数，这种方法更好，因为它将初始化逻辑保留在构造函数中应该在的位置，我只是不知道如何通过 XAML 将参数传递给承包商，我'我不确定这是否可能。

```
 public class MyControl : Control 
 {
      public MyControl(CompositeCommand globalDiceRolledCommand)
      {
          .........
          globalDiceRolledCommand.Register(OnDiceRolledCommand); 
      }
 }  

 <local:MyControl ..... > 
    Some how pass parameters to contractor in order to create the element in XAML  
 </local:MyControl> 
```

总结一下：

A) 关于 (1) 和 (2) 的任何想法。

B）关于如何完成 3 的想法，以及它是否看起来像好的设计。

C）完成这个场景的任何好的模式。

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T11:44:15.333

每当我使用这样的全局命令时，它们通常定义在每个库都可以引用的基础设施类库中。或者它们在每个模块可以直接引用的消费核心库中定义。

[我在这里的代码项目文章](http://www.codeproject.com/Articles/37164/Introduction-to-Composite-WPF-CAL-Prism-Part-1) [第 2 部分](http://www.codeproject.com/Articles/38279/Introduction-to-Composite-WPF-CAL-Prism-Part-2)中写了很多内容

# python - 从字符串中提取特定字符

> ID：15735831
> 
> 赞同：2
> 
> 时间：2013-03-31T23:39:53.970
> 
> 标签：python, string

```
i= "March 31st 2013 ntp[22123] Time server offset -.00354 sec"

i= "March 1st 2013 ntp[22485] Time server offset -.0070 sec" 
```

字符串看起来相同，但有时字符数会有所不同。如果我尝试仅提取字符串的最后一部分，它将不起作用`"-.0070 sec" with i=i [-11:]`。

我想知道我是否可以搜索单词`"offset"`，找到它在字符串中的位置，然后用它来消除字符串的其余部分以保留`"-.00354 sec" or "-.0070 sec"`.

例如，有 46 个字符，`"March 31st 2013 Time server offset -.00354 sec"`并且`offset`是字符串第 28 位的开始。字符串开头的总共 34 个字符将被删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T23:42:52.010

[text.rfind](http://docs.python.org/2/library/stdtypes.html#str.rfind)返回最后一次出现的索引`offset`：

```
In [162]: text = "March 1st 2013 ntp[22485] Time server offset -.0070 sec"

In [181]: text.rfind('offset')
Out[181]: 38 
```

所以你可以像这样剪断字符串`'offset '`：

```
In [183]: text[text.rfind('offset ')+len('offset '):]
Out[183]: '-.0070 sec' 
```

或者，您可以使用[str.rpartition](http://docs.python.org/2/library/stdtypes.html#str.rpartition)将其切成`text`三块，然后摘下第三块（也是最后一块）：

```
In [179]: text.rpartition('offset ')
Out[179]: ('March 1st 2013 ntp[22485] Time server ', 'offset ', '-.0070 sec')
In [169]: text.rpartition('offset ')[-1]
Out[169]: '-.0070 sec' 
```

或者，您可以使用[str.rsplit](http://docs.python.org/2/library/stdtypes.html#str.rsplit)在最后一次出现时拆分字符串`'offset '`：

```
In [180]: text.rsplit('offset ', 1)
Out[180]: ['March 1st 2013 ntp[22485] Time server ', '-.0070 sec']
In [172]: text.rsplit('offset ', 1)[1]
Out[172]: '-.0070 sec' 
```

`1`in`text.rsplit('offset ', 1)`告诉最多`rsplit`拆分1个`text`位置。

* * *

`rfind`，`rsplit`并且`rpartition`每个都对从右边开始的字符串进行操作。所以即使`text`包含子字符串`'offset '`两次，他们仍然会找到子字符串的最后一次出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:44:32.583

`offset`然后用尾随空格分割单词上的字符串：

```
line.split('offset ', 1)[-1] 
```

这需要该词后面的所有内容。

演示：

```
>>> text = "March 1st 2013 ntp[22485] Time server offset -.0070 sec"
>>> text.split('offset ', 1)[-1]
'-.0070 sec' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:48:41.063

您可以使用正则表达式：

```
import re

strings=['March 31st 2013 ntp[22123] Time server offset -.00354 sec', 
        'March 1st 2013 ntp[22485] Time server offset -.0070 sec']

for s in strings:
    print re.search(r'offset -(\.\d+) sec$',s).group(1) 
```

印刷：

```
.00354
.0070 
```

或者，如果您想包含以下内容，请移动括号`-`：

```
print re.search(r'offset (-\.\d+) sec$',s).group(1) 
```

或者，如果它是可选标志，请执行以下操作：

```
strings=['March 31st 2013 ntp[22123] Time server offset -.00354 sec', 
        'March 1st 2013 ntp[22485] Time server offset -.0070 sec',
        'March 1st 2013 ntp[22485] Time server offset .0070 sec']

for s in strings:
    print re.search(r'offset ((?:-)?\.\d+) sec$',s).group(1) 
```

使用`$`锚点，它只会返回字符串中的最后一个（如果找到）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T23:51:56.013

你可以像这样使用正则表达式：

```
>>> i = "March 31st 2013 ntp[22123] Time server offset -.00354 sec"
>>> pattern = re.compile('(offset)(.+)$')
>>> offset  = pattern.findall(s)[0][1]
>>> print offset
 -.00354 sec 
```

# html - Divs are separating with line breaks when they shouldn't

> ID：15735836
> 
> 赞同：0
> 
> 时间：2013-03-31T23:41:02.337
> 
> 标签：html, css

I am trying to make my divs appear horizontally across the page but there is an automatic line break in between them. I was wondering how I could fix this.

```
<div id="box1">
    <header id="whyshouldi">
    What is iOS Development
    </header>
    <p id="whatis">
        iOS Development is the process used to create native applications for iPhone, iPod, and iPad. Applications are made using the SDK(software development kit), Xcode. Aside from the software, it is necessary that iOS Developers know Objective-C.
    </p>
</div>

        <div id="box2">
        <header id="whyshouldi">
    Why Should I learn it?
        </header>
    <p id="whatis">
Learning native app development can allow you to better expand the horizon of knowledge in iPhone, and can make you a better programmer overall. It is a great skill to know no matter who you are.
    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T23:46:05.047

这是[块级元素](http://www.w3.org/TR/CSS2/visuren.html#block-boxes)的默认行为.. 有很多选项可以让两个 div 并排显示，但一种简单的方法是使用该`float`属性并为每个 div 赋予宽度`50%`

[**例子**](http://jsfiddle.net/Yw4T3/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T19:53:07.160

这可以很容易地通过引入一个类或使用一些特殊技巧来实现。如果你使用`display: inline-block`你可以实现你所追求的。因此，假设您向您的 ID 介绍了一个课程`#box1`，`#box2`理论上您可以...

```
.col { display: inline-block; max-width: 170px; width: 100%; vertical-align: top; } 
```

`#box1`在使用 inline-block 来关闭关闭`</div>`和`#box2`打开之间的任何标记间隙时，请务必记住`<div>`。否则，您将留下 3 或 4 个不需要的像素。

检查这个小提琴。我想这就是你所追求的。[http://jsfiddle.net/UsNBj/](http://jsfiddle.net/UsNBj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:45:44.487

您可以绝对定位它们：

```
#box1,#box2 {
  position: absolute;
  width: 50%;
}

#box1 {
  left: 0;
}

#box2 {
  right: 0;
} 
```

# c++ - 纹理未正确显示 C++ opengl SOIL

> ID：15735837
> 
> 赞同：1
> 
> 时间：2013-03-31T23:41:06.097
> 
> 标签：c++, opengl, textures, soil

这是我的问题；

想象一个盒子，或者一个立方体，所有的边都是正确的。

如果我们将盒子放在平坦的表面上，接触底部的面就是地板或底座。如果底座有一个内部，大多数盒子都有，从外面你将无法正确看到它。

不幸的是，在我的代码中你可以。你有一个房间，而不是一个盒子，我去房间外面看看地板，但我不应该。

生病发布问题的图像和视频，以及一些代码和您可能要求的任何代码。

[http://www.youtube.com/watch?v=ml3-OBGNXXA&feature=youtu.be](http://www.youtube.com/watch?v=ml3-OBGNXXA&feature=youtu.be)

[http://www.flickr.com/photos/pkerkm/8607171993/](http://www.flickr.com/photos/pkerkm/8607171993/)

[http://www.flickr.com/photos/pkerkm/8608276014/](http://www.flickr.com/photos/pkerkm/8608276014/)

//这是我如何管理纹理

```
void /*GraphicsEngine::*/drawWall(double a[3],double b[3], double c[3], double d[3], bool floor){
if(floor){
    glBindTexture(GL_TEXTURE_2D, texture[1]);
}else{
    glBindTexture(GL_TEXTURE_2D, texture[0]);
}
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
//gluBuild2DMipmaps(GL_TEXTURE_2D, 4, width, height, GL_RGBA, GL_UNSIGNED_BYTE, data); // build our texture mipmaps
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_NEAREST);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_DECAL);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_DECAL);
//glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);
glEnable(GL_TEXTURE_2D);
glBegin(GL_QUADS);
    glTexCoord2d(0.0,0.0);
    glVertex3dv(a);
    glTexCoord2d(-1.0,0.0);
    glVertex3dv(d);
    glTexCoord2d(-1.0,-1.0);
    glVertex3dv(c);
    glTexCoord2d(0.0,-1.0);
    glVertex3dv(b);
glEnd();
} 
```

//这里是reshape函数

```
void reshape(int w, int h){
    //glViewport(0, 0, (GLsizei) w, (GLsizei) h);
    glMatrixMode(GL_PROJECTION);
    //glLoadIdentity();
    gluPerspective(60.0, (GLfloat) w/(GLfloat) h, 1.0, 200.0);
    glMatrixMode(GL_MODELVIEW);
    //glTranslatef(0.0, 0.0, -3.6);
   //glLoadIdentity();
} 
```

//这里是显示函数

```
void /*GraphicsEngine::*/display(){
 //glClearColor (0.0, 0.0, 0.0, 1.0);
 //glLoadIdentity ();
 glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
 //glShadeModel(GL_FLAT);
 //glClearDepth(1.0);
 //glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
 glMatrixMode(GL_MODELVIEW);
 glLoadIdentity();
 setPos();
 gluLookAt(currentXPos,currentYPos,currentZPos,currentXFace,currentYFace,currentZFace,0,1,0);
 generateMap();
 graphicsFloor();
 int i = 0;
 if(projectiles.size()>0){
    for(i= 0; i< projectiles.size(); i++){
        arrow(projectiles.operator[](i).getXPos(),projectiles.operator[](i).getYPos(),projectiles.operator[](i).getZPos(),0.5,BLOCKWIDTH);
    }
    projectileMotion();
    player.advance();
    //glutPostRedisplay();
 /*}else if(player.advance()){
     glutPostRedisplay();
 }*/
 }
 //glFlush();
 glutSwapBuffers();
} 
```

//这里是告诉在哪里画地板和墙壁

```
void graphicsFloor(){
int x,z;
//up

for(x=0;x<7;x+=7){
    for(z=0;z<105;z+=7){
        double a[3] = {x,0,z};
        double b[3] = {x+7,0,z};
        double c[3] = {x+7,0,z+7};
        double d[3] = {x,0,z+7};
        drawWall(d,a,b,c,true);
    }
}
} 
```

// 墙壁

```
void generateMap(){
int z;
int x;
for(z =0;z<105;z+=7){
      double a[3] = {0,0,z};
      double b[3] = {0,0,z+7};
      double c[3] = {0,MAPHEIGHT,z+7};
      double d[3] = {0,MAPHEIGHT,z};
      drawWall(d,a,b,c,false);
}
for(z =0;z<42;z+=7){
      double a[3] = {7,0,z};
      double b[3] = {7,0,z+7};
      double c[3] = {7,MAPHEIGHT,z+7};
      double d[3] = {7,MAPHEIGHT,z};
      drawWall(d,a,b,c,false);
}
} 
```

//这是我加载纹理的方式

```
void genTex(){

texture[0]=SOIL_load_OGL_texture // load an image file directly as a new OpenGL texture 
    (
        //"C:\\Users\\Eddy\\Desktop\\Senior Project\\Senior Project\\bloodwall2.png",
        "C:\\Users\\Pkerkm\\Documents\\Visual Studio 2010\\Projects\\files\\gameprojecgraphics\\bloodwall2.png",
        SOIL_LOAD_AUTO,
        SOIL_CREATE_NEW_ID,
        SOIL_FLAG_MIPMAPS | SOIL_FLAG_INVERT_Y | SOIL_FLAG_NTSC_SAFE_RGB | SOIL_FLAG_COMPRESS_TO_DXT
        //SOIL_FLAG_POWER_OF_TWO| SOIL_FLAG_MIPMAPS| SOIL_FLAG_MULTIPLY_ALPHA| SOIL_FLAG_COMPRESS_TO_DXT| SOIL_FLAG_DDS_LOAD_DIRECT| SOIL_FLAG_INVERT_Y

    );
glBindTexture(GL_TEXTURE_2D, texture[0]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:01:14.000

看起来深度测试被禁用了。启用它：

```
glEnable(GL_DEPTH_TEST); 
```

如果这不起作用，请确保您有深度缓冲区并重试。

# php - index.html 上的登录页面

> ID：15735839
> 
> 赞同：1
> 
> 时间：2013-03-31T23:41:48.317
> 
> 标签：php, html, redirect, login

我目前在我的索引页面上有一个登录系统；这工作正常。但是，当用户登录时，它会将他们定向到我不想要的全新页面。如何实现代码以便；

A) 用户登录后停留在索引页面 B) 在索引页面上显示欢迎消息“Welcome....”。

索引.html

```
<div id="leftmenu_top"></div>

                <div id="leftmenu_main"> 
                <div class="login">

                <h3>Please login below</h3>
                <br/>

                <!--Log in form-->
                <html>

<form action='login.php' method='POST'>
Username: <input type='text' name='username'><br>
Password: <input type='password' name='password'><br>
<input type='submit' value='Log in'>
</form>
</html> 
```

登录.php

```
<?php

session_start();

$username = strtolower($_POST['username']);
$password = strtolower($_POST['password']);

if ($username&&$password)
{

$connect = mysql_connect("localhost", "root", "") or die("Couldn't connect");
mysql_select_db("a&e") or die("Couldn't find db");

$query = mysql_query("SELECT * FROM users WHERE username='$username'");

$numrows = mysql_num_rows($query);

if ($numrows==!0)
{
//code to login

while ($row = mysql_fetch_assoc($query))
{
    $dbusername = $row['username'];
    $dbpassword = $row['password'];
}

//check to see if they match
if($username==$dbusername&&$password==$password)
{
echo "Welcome $username";
$_SESSION['username']=$username;

}
else
echo "incorrect password";

}
else
    die("That user does not exist");

}
else
    die("please provide a  username and password");

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:59:18.147

放

```
header('Location: index.php'); 
```

在 login.php 的底部

此外，如果您在此链接的末尾添加 ?success，然后在您的索引页面中调用它，它将显示您想要的消息。把上面的代码改成

```
header('Location: index.php?status=success'); 
```

然后在您的索引页面中将其放在您希望消息出现的位置

```
<?php If($_GET['status'] = "success") { ?>
    <p>This is a welcome message</p>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:45:56.937

```
<?php if(isset($_POST['submit'])){

$username = mysql_real_escape_string($_POST['username']);
$password = mysql_real_escape_string($_POST['password']);

    $query = "SELECT Username, Password FROM tbluser
              WHERE Username = '$username' AND Password = '$password'";
    $result = mysql_query($query) or die (mysql_error());
       if(mysql_num_rows($result) == 0){
        echo ' Password/Username is not found';
    }else {
        while($row = mysql_fetch_array($result)) {
          echo 'You are logged in </br>';

        }
    }
} 
```

# css - 在使用 float:left 的 css 三列设置中，我如何在每列内水平居中图像

> ID：15735840
> 
> 赞同：0
> 
> 时间：2013-03-31T23:41:48.713
> 
> 标签：css, css-float, center

我已经浏览了这里的帖子，但似乎找不到想要工作的解决方案，我想知道我的 float:left 标签是否导致了这个问题。

基本上我有 wordpress 博客，我现在正在尝试使用 nextgen 画廊来设置我想要做的事情，我需要修改它显示图像列表的方式。分为三个部分。在列中将每个图像居中。现在我已经使用下面的代码设置了这个，它在下面创建了三个很好的列，这是非常基本的，但它在这里不起作用我假设我可以使用 margin:0 auto; 但这不起作用。

[http://jsfiddle.net/locka/dcdkf/](http://jsfiddle.net/locka/dcdkf/)

HTML

```
<div id="wrapper">
<div id="column-left">
<p>LEFT </p>
  <img src="http://t2.gstatic.com/images?q=tbn:ANd9GcQtZTDwx3wVJMqWWTlCW8BDZ7fPvQVbRZpILy0NAeHIGaRxcRtR">
</div>
<div id="column-center">
    <p>MIDDLE </p>
    <img src="http://t3.gstatic.com/images?q=tbn:ANd9GcTCgQRoPbKR8WpHtPZfBiPKK6NaNN3vyWqLarsKDDb0zLWd0AID"></p>
   </div>
<div id="column-right">
    <p>RIGHT </p>
   <img src="http://t0.gstatic.com/images?q=tbn:ANd9GcScF65ryaqzfG9gpVrld1CLJ7_5wJOpmH96FRvB4TvnkFaqyloh">
</div> 
```

CSS

```
* {
margin: 0;
padding: 0;
}

#wrapper {
width: 980px;
background: silver;
margin: 0 auto;
}

#column-left {
width: 280px;
float: left;
background: red;
}

#column-center {
width: 420px;
float: left;
background: GREEN;
margin: 0 auto;

}

#column-right {
width: 280px;
float: left;
background: BLUE;
} 
```

我基本上需要连续有 3 张图像，这些图像可能是 2 尺寸，横向或纵向，两者高度相同但宽度不同，我需要将每个图像置于其列的中心。左右列将与最宽的图像相同，就像风景照片一样，它们看起来总是左对齐和右对齐，如果肖像出现在这些列的中心。然后中心列将占据其余空间，这将使所有图像居中，从而使左右边框相等。并使它们整洁。

我可以按照看起来在网络上的方式设置列，因为我可能无法将图像居中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:06:59.973

默认情况下，图像是内联元素，因此将遵循`text-align`其父级的 CSS 规则。由于 text-align 在您的情况下不起作用，这一定意味着您的图像不再是内联元素。`img { display: block }`可能在您的 CSS 中存在某个地方。

这意味着`margin: 0 auto`应该做的伎俩。问题是您将该样式应用于 img 的容器而不是 img 本身。

所以，而不是

```
#column-center {
  width: 420px;
  float: left;
  background: GREEN;
  margin: 0 auto;
} 
```

采用

```
#column-center {
  width: 420px;
  float: left;
  background: GREEN;
}

#column-center img {
  margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:47:26.740

正如您所说，用于`text-align: center;`使列的所有内容居中。如果您不希望列的其余内容居中，您可能希望使用此属性将图像包装在 div 中。

# javascript - Can't pull input-field value located beyond form tag

> ID：15735846
> 
> 赞同：0
> 
> 时间：2013-03-31T23:42:14.540
> 
> 标签：javascript, html, jsp

## Problem

I use popup calendar, which is launched via href. I need to pass 'document.tstest.timestamp' (date input field) parameter into javascript function. And all worked well, **BUT**: I want to include this tag-file into another form, so I can't use form

```
<form name="tstest"> 
```

in my tag file. As a result, **without form** I **can't find document.timestamp** input-field (as I understand due window.object hierarchy)

My tag file:

```
<form name="tstest">
        <input type="Text" id="time_stamp" name="timestamp">
        <a href="javascript:show_calendar('document.tstest.timestamp',
                 document.tstest.timestamp.value);"> showCalendar</a>
</form>

<script>
    function show_calendar(target, value) {
        ............
    }
</script> 
```

Help me, please, to find out solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:47:58.590

您的元素上有一个`id`属性，因此您可以使用它`document.getElementById()`来获取对它的引用。不过，我建议修改您的`show_calendar`函数以`id`直接获取或引用元素，因为您可能需要在该函数内部再次引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:48:16.587

您应该能够在页面上的任何位置执行以下操作并获取元素：

```
var elem = document.getElementById("time_stamp");
var myVal = elem.value; 
```

这也可以

```
<a href="javascript:show_calendar('document.tstest.timestamp',
             document.getElementById('time_stamp').value);"> showCalendar</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:49:45.717

不要使用 document.tstest 作为语法，而是使用 document.getElementById("time_stamp")

还要记住一个 id 是唯一的，所以不要把两个相同的元素放在同一个页面上

# android - Make this activity works as a GDActivity

> ID：15735854
> 
> 赞同：0
> 
> 时间：2013-03-31T23:42:51.717
> 
> 标签：android, api, greendroid

I have this activity:

```
package zh.wang.android.yweathergetter;

import greendroid.app.GDActivity;
import zh.wang.android.utils.YahooWeather4a.WeatherInfo;
import zh.wang.android.utils.YahooWeather4a.YahooWeatherInfoListener;
import zh.wang.android.utils.YahooWeather4a.YahooWeatherUtils;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class MainActivity extends Activity implements YahooWeatherInfoListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        YahooWeatherUtils yahooWeatherUtils = YahooWeatherUtils.getInstance();
        yahooWeatherUtils.queryYahooWeather(getApplicationContext(), "Madrid", this);
    }

    @Override
    public void gotWeatherInfo(WeatherInfo weatherInfo) {
        // TODO Auto-generated method stub
        if(weatherInfo != null) {
            TextView tv = (TextView) findViewById(R.id.textview_weather_info);
            tv.setText(weatherInfo.getTitle() + "\n"
                    + weatherInfo.getLocationCity() + ", "
                    + weatherInfo.getLocationCountry() + "\n"
                    + "Climatología: " + weatherInfo.getCurrentText() + "\n"
                    + "Temperatura actual: " + weatherInfo.getCurrentTempC() + "ºC"+ "\n"
                    + "Previsión para mañana: " + weatherInfo.getForecast1Text() + "\n" 
                    + "Previsión para pasado mañana: " + weatherInfo.getForecast2Text());
        } 
    }

} 
```

I have also set up GD Library,but when I change "activity" to "GDActivity" and "setContentView" to "setActionBarContentView" my App ForceCloses. Sorry for my english.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T09:01:27.170

您使用的是最新版本的 YWeatherGetter4a 库吗？如果没有，您需要在另一个线程中设置 textview 的文本，例如，使用 AsyncTask 类。

# asp.net - DropDownList controls in panel losing values on postback?

> ID：15735861
> 
> 赞同：1
> 
> 时间：2013-03-31T23:43:44.547
> 
> 标签：asp.net, webforms, postback, viewstate

Apologies if this is forgetful late-night coding, but....

I've got some dynamically populated DropDownList controls that are being added to a panel at runtime. I've had the panel with and without explicitly enabling its viewstate.

If I declare and populate them inside the usual

```
if (!Page.IsPostBack) 
```

block in the Page_Load then they simply don't exist on Postback - I try to iterate through the panel's controls collection and it's empty.

If I declare and populate them separately in the page's OnInit then they exist, but lose their values.

How do I get them to both exist and retain their values?

# c# - 如何通知完全依赖于 ObservableCollection 的绑定属性的更改？

> ID：15735864
> 
> 赞同：0
> 
> 时间：2013-03-31T23:44:14.910
> 
> 标签：c#, windows-phone-7, binding, asynchronous

我在一个类上有一个绑定属性，`Foo`其定义类似于如下（为清楚起见进行了编辑），

```
public class Foo : INotifyPropertyChanged
{
    public Foo()
    {
        // This should notify when IsHidden changes?
        MyApp.ViewModel.HiddenCategories.CollectionChanged += (s, e) => {
            this.NotifyPropertyChanged("IsHidden");
        };
    }

    public CategoryId Category { get; set; }

    // IsHidden depends on a `global' ObservableCollection object on the ViewModel
    public bool IsHidden 
    {
        get { return MyApp.ViewModel.HiddenCategories.Contains(this.Category); }
    }
    // IsHidden is toggled by adjusting the global ObservableCollection - how to notify the UI? 
    public void ToggleHidden()
    {
        if (this.IsHidden)
            MyApp.ViewModel.HiddenCategories.Remove(this.Category);
        else
            MyApp.ViewModel.HiddenCategories.Add(this.Category);
    }

    #region INotifyPropertyChanged members
    ...

} 
```

ViewModel 上定义了以下内容，

```
public class FooRegion
{
    public string RegionName { get; set; }
    // Foos is bound in the top ListBox DataTemplate 
    // Each Foo has properties bound in the sub ListBox DataTemplate
    public ObservableCollection<Foo> Foos { get; set; }
}

// This is actually what is bound to the top level ListBox
public ObservableCollection<FooRegion> FoosByRegion { get; set; }

public ObservableCollection<CategoryId> HiddenCategories { get; set; } 
```

我的 XAML`ItemTemplates`在资源中定义了两个如下，

```
<phone:PhoneApplicationPage.Resources>
...
<DataTemplate x:Key="MainItemTemplate">
    <StackPanel >
        <TextBlock Text="{Binding Name}"/>
        <ListBox ItemsSource="{Binding Foos}"  
            ItemTemplate="{StaticResource SubItemTemplate}" />
    </StackPanel>
</DataTemplate>
... 
<DataTemplate x:Key="SubItemTemplate">
    <StackPanel  Opacity="{Binding IsHidden, Converter={StaticResource BoolToOpacity}}" >
        <toolkit:ContextMenuService.ContextMenu>
            <toolkit:ContextMenu>
                <toolkit:MenuItem Header="{Binding IsHidden, ConverterParameter=unhide foo|hide foo, 
                    Converter={StaticResource BoolToStrings}}" Tap="toggleHideFooContextMenuItem_Tap" />
            </toolkit:ContextMenu>
        </toolkit:ContextMenuService.ContextMenu>
        <TextBlock Text="Some Text Here"/>
    </StackPanel>
</DataTemplate>
...
</phone:PhoneApplicationPage.Resources> 
```

这些资源被调用到一个“嵌套”列表框，如下所示，

```
<ListBox ItemTemplate="{StaticResource MainItemTemplate}" ItemsSource="{Binding FoosByRegion}" /> 
```

此方法似乎只是零碎工作，一些`Foo`对象在 UI 中更新，但其他对象没有 - 好像通知没有到达 UI。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:44:16.107

`ContextMenu`来自 Windows Phone 工具包的动画应用了影响周围元素不透明度的动画。将不透明度应用于子元素单独解决了这个问题。

# debugging - 在 pep8 之后调试 ipython 什么也没返回，但我仍然有语法错误

> ID：15735865
> 
> 赞同：0
> 
> 时间：2013-03-31T23:44:18.537
> 
> 标签：debugging, syntax, ipython

在我[之前的帖子](https://stackoverflow.com/questions/15735512/debugging-invalid-syntax-error-ipython)中从 phihag 那里得到所需的帮助后，我注意到我没有得到所有偶数的结果。但是，我在第 47 行使用 else 时不断收到语法错误。

```
else:  # x, y, and z are even 
```

可能是什么问题？

```
#!/usr/bin/env python
# This program exmamines variables x, y, and z
# and prints the largest odd number among them

import sys

x, y, z = map(int, sys.argv[1:4])

if x % 2 != 0:
    if y % 2 != 0:
        if z % 2 != 0:
            if x > y and x > z:  # x is the biggest odd
                print 'x is the biggest odd ', x
            elif y > z and y > x:  # y is the biggest odd
                print 'y is the biggest odd ', y
            elif z > x and z > y:  # z is the biggest odd
                print 'z is the biggest odd ', z

        else:  # z is even
            if x > y:  # x is the biggest odd
                print 'x is the biggest odd ', x
            else:  # y is the biggest odd
                print 'y is the biggest odd ', y

    else:  # y is even
        if z % 2 != 0:  # z is odd
            if x > z:  # x is the biggest odd
                print 'x is the biggest odd ', x
            else:  # z is the biggest odd
                print 'z is the biggest odd ', z
        else:  # y,z are even and x is the biggest odd
            print 'x is the biggest odd ', x

else:  # x is even
    if y % 2 != 0 and z % 2 != 0:  # y,z is odd
        if y > z:  # y is the biggest odd
            print 'y is the biggest odd ', y
        else:  # z is the biggest odd
            print 'z is the biggest odd ', z
    else:  # x and y are even
        if z % 2 != 0:  # z is the biggest odd
            print 'z is the biggest odd ', z
        else:  # x and z are even
            if y % 2 != 0:  # y is odd
                if z % 2 == 0:  # z is even
                    print 'y is the biggest odd ', y
    else:  # x, y, and z are even
        if z % 2 == 0:
            print 'x, y, and z are even.'

print 'finished' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:49:08.357

您在同一缩进级别上有两个`else`s，一个接一个，这是无效的。你的意思是让他们中的一个成为一个`elif`？

# python - 使用 cx-freeze 为 pygame 制作 .exe

> ID：15735868
> 
> 赞同：2
> 
> 时间：2013-03-31T23:44:49.670
> 
> 标签：python, pygame, exe, cx-freeze

我在 Python 3.2 中创建了一个游戏，并尝试使用 cx-freeze 将其转换为 .exe，但是当我尝试运行 .exe 时，出现错误。

游戏

```
import pygame, sys, random
from pygame.locals import *

pygame.init()
mainClock = pygame.time.Clock()

windowSurface = pygame.display.set_mode((800, 800))
pygame.display.set_caption("Dodger")

def game():
    WIDTH = 800
    HEIGHT = 800
    PLAYERSIZE = 20
    PLAYERSPEED = 4
    ENEMYSIZE = 10
    ENEMYSPEED = 3
    score = 0

    BLACK = (0, 0, 0)
    WHITE = (255, 255, 255)
    GREEN = (0, 255, 0)
    RED = (255, 0, 0)
    GREY = (100, 100, 100)
    BLUE = (0, 0, 255)

    Up = False
    Down = False
    Left = False
    Right = False

    titleFont = pygame.font.SysFont(None, 100)
    titleText = titleFont.render('Dodger', True, WHITE)
    titleRect = titleText.get_rect()
    titleRect.centerx = windowSurface.get_rect().centerx
    titleRect.centery = 50

    menuFont = pygame.font.SysFont(None, 70)
    startText = menuFont.render('Start', True, WHITE)
    startRect = startText.get_rect()
    startRect.centerx = windowSurface.get_rect().centerx
    startRect.centery = 213

    difficultyText = menuFont.render('Difficulty', True, WHITE)
    difficultyRect = difficultyText.get_rect()
    difficultyRect.centerx = windowSurface.get_rect().centerx
    difficultyRect.top = 320

    quitText = menuFont.render('Quit', True, WHITE)
    quitRect = quitText.get_rect()
    quitRect.centerx = windowSurface.get_rect().centerx
    quitRect.centery = 582

    oneText = menuFont.render('1', True, WHITE)
    oneRect = oneText.get_rect()
    oneRect.centerx = 250
    oneRect.centery = 421

    twoText = menuFont.render('2', True, WHITE)
    twoRect = twoText.get_rect()
    twoRect.centerx = 350
    twoRect.centery = 421

    threeText = menuFont.render('3', True, WHITE)
    threeRect = threeText.get_rect()
    threeRect.centerx = 450
    threeRect.centery = 421

    fourText = menuFont.render('4', True, WHITE)
    fourRect = fourText.get_rect()
    fourRect.centerx = 550
    fourRect.centery = 421

    difficulty = 1
    loop = 1

    while loop:
        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit()
            if event.type == MOUSEBUTTONDOWN:
                pos = pygame.mouse.get_pos()
                posX, posY  = pos
                if posY > 390 and posY < 452:
                    if posX > 200 and posX < 300:
                        difficulty = 1
                    elif posX > 300 and posX < 400:
                        difficulty = 2
                    elif posX > 400 and posX < 500:
                        difficulty = 3
                    elif posX > 500 and posX < 600:
                        difficulty = 4
                elif posY > 120 and posY < 306 and posX > 120 and posX < WIDTH - 120:
                    loop = 0
                elif posY > 492 and posY < WIDTH - 120 and posX > 120 and posX < WIDTH - 120:
                    pygame.quit()
                    sys.exit()
            if event.type == KEYUP:
                if event.key == ord('1'):
                    difficulty = 1
                elif event.key == ord('2'):
                    difficulty = 2
                elif event.key == ord('3'):
                    difficulty = 3
                elif event.key == ord('4'):
                    difficulty = 4
                elif event.key == K_RETURN:
                    loop = 0

        if difficulty == 1:
            choiceRect = pygame.Rect(201, 391, 99, 61)
        elif difficulty == 2:
            choiceRect = pygame.Rect(301, 391, 99, 61)
        elif difficulty == 3:
            choiceRect = pygame.Rect(401, 391, 99, 61)
        elif difficulty == 4:
            choiceRect = pygame.Rect(501, 391, 99, 61)

        windowSurface.fill(BLACK)
        #draw main menu box
        pygame.draw.line(windowSurface, WHITE, (120, 120), (WIDTH - 120, 120))
        pygame.draw.line(windowSurface, WHITE, (120, 120), (120, HEIGHT - 120))
        pygame.draw.line(windowSurface, WHITE, (WIDTH - 120, HEIGHT - 120), (120, HEIGHT - 120))
        pygame.draw.line(windowSurface, WHITE, (WIDTH - 120, HEIGHT - 120), (WIDTH - 120, 120))

        #draw lines to divide menu
        pygame.draw.line(windowSurface, WHITE, (120, 306), (WIDTH - 120, 306))
        pygame.draw.line(windowSurface, WHITE, (120, 492), (WIDTH - 120, 492))

        pygame.draw.line(windowSurface, WHITE, (200, 390), (WIDTH - 200, 390))
        pygame.draw.line(windowSurface, WHITE, (200, 452), (WIDTH - 200, 452))
        pygame.draw.line(windowSurface, WHITE, (200, 390), (200, 452))
        pygame.draw.line(windowSurface, WHITE, (WIDTH - 200, 390), (WIDTH - 200, 452))
        pygame.draw.line(windowSurface, WHITE, (300, 390), (300, 452))
        pygame.draw.line(windowSurface, WHITE, (400, 390), (400, 452))
        pygame.draw.line(windowSurface, WHITE, (500, 390), (500, 452))

        pygame.draw.rect(windowSurface, GREY, choiceRect)
        windowSurface.blit(titleText, titleRect)
        windowSurface.blit(startText, startRect)
        windowSurface.blit(difficultyText, difficultyRect)
        windowSurface.blit(quitText, quitRect)
        windowSurface.blit(oneText, oneRect)
        windowSurface.blit(twoText, twoRect)
        windowSurface.blit(threeText, threeRect)
        windowSurface.blit(fourText, fourRect)
        pygame.display.update()

    difficulty += 1
    Player = pygame.Rect((WIDTH/2)-(PLAYERSIZE/2),(HEIGHT/2) - (PLAYERSIZE/2), PLAYERSIZE, PLAYERSIZE)
    enemies = []
    for enemy in range(0, difficulty):
        if enemy == 1:
            enemies.append(pygame.Rect(1, 1, ENEMYSIZE, ENEMYSIZE))
        elif enemy == 2:
            enemies.append(pygame.Rect(WIDTH - PLAYERSIZE, 1, ENEMYSIZE, ENEMYSIZE))
        elif enemy == 3:
            enemies.append(pygame.Rect(1, HEIGHT - PLAYERSIZE, ENEMYSIZE, ENEMYSIZE))
        elif enemy == 4:
            enemies.append(pygame.Rect(WIDTH - PLAYERSIZE, HEIGHT - PLAYERSIZE, ENEMYSIZE, ENEMYSIZE))

    loop = 1
    while loop:
        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit()
            if event.type == KEYDOWN:
                if event.key == K_UP or event.key == ord('w'):
                    Up = True
                    Down = False
                if event.key == K_DOWN or event.key == ord('s'):
                    Down = True
                    Up = False
                if event.key == K_LEFT or event.key == ord('a'):
                    Left = True
                    Right = False
                if event.key == K_RIGHT or event.key == ord('d'):
                    Right = True
                    Left = False

            if event.type == KEYUP:
                if event.key == K_UP or event.key == ord('w'):
                    Up = False
                if event.key == K_DOWN or event.key == ord('s'):
                    Down = False
                if event.key == K_LEFT or event.key == ord('a'):
                    Left = False
                if event.key == K_RIGHT or event.key == ord('d'):
                    Right = False
                if event.key == K_ESCAPE:
                    pygame.quit()
                    pygame.exit()

        if Up and Player.top >= 0:
            Player.top -= PLAYERSPEED
        if Down and Player.bottom <= HEIGHT:
            Player.bottom += PLAYERSPEED
        if Left and Player.left >= 0:
            Player.left -= PLAYERSPEED
        if Right and Player.right <= WIDTH:
            Player.right += PLAYERSPEED

        i = 0
        for enemy in enemies:
            if enemies[i].top > Player.top:
                enemies[i].top -= ENEMYSPEED
            if enemies[i].top < Player.top:
                enemies[i].top += ENEMYSPEED
            if enemies[i].left > Player.left:
                enemies[i].left -= ENEMYSPEED
            if enemies[i].left < Player.left:
                enemies[i].left += ENEMYSPEED
            i += 1

        windowSurface.fill(BLACK)
        pygame.draw.rect(windowSurface, GREEN, Player)

        i = 0
        for enemy in enemies:
            pygame.draw.rect(windowSurface, RED, enemies[i])
            if Player.colliderect(enemies[i]):
                loop = 0
            i += 1

        pygame.display.update()
        mainClock.tick(40)
        score += 1

    score = str(score)
    endRect = pygame.Rect(windowSurface.get_rect().centerx - 250, windowSurface.get_rect().centery - 75, 500, 150)
    scoreText = menuFont.render('Score: ' + score, True, RED)
    scoreRect = scoreText.get_rect()
    scoreRect.centerx = windowSurface.get_rect().centerx
    scoreRect.centery = windowSurface.get_rect().centery

    pygame.draw.rect(windowSurface, BLUE, endRect)
    windowSurface.blit(scoreText, scoreRect)
    pygame.display.update()

    while True:
        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit()
            if event.type == KEYUP:
                if event.key == K_RETURN:
                    game()

game() 
```

我的 setup.py

```
import sys
from cx_Freeze import setup, Executable

setup(
    name = "Dodger",
    version = "3.2",
    description = "My Game",
    executables = [Executable("dodger.py", base = "Win32GUI")]) 
```

当我尝试运行它时，会弹出一个窗口，并且出现以下 [错误。](http://imgur.com/oI1VNEB)

编辑：我在 dodger.py 中添加了“import pygame._view”，现在我得到了这个[错误。](http://imgur.com/XLte7H1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:37:29.643

我相信你的问题是你没有使用系统字体。cx_freeze exe 不知道如何阅读`None`当我遇到这个问题时，我将字体从系统字体更改`None`为系统字体。您可以使用以下脚本查找系统上安装了哪些字体。

```
import pygame
print(pygame.font.get_fonts()) 
input() 
```

这`pygame.font.get_fonts()`将显示所有已安装系统字体的列表。您所要做的就是更改您的`titleFont = pygame.font.SysFont(None, 100)`to`titleFont = pygame.font.SysFont('miriam', 100)`或类似的东西（'miriam' 是我系统上安装的字体）。

# javascript - 绑定 MouseMove 事件导致与触发的鼠标释放事件不一致

> ID：15735870
> 
> 赞同：0
> 
> 时间：2013-03-31T23:45:26.153
> 
> 标签：javascript, events, kineticjs

这是小提琴，[http://jsfiddle.net/aTeRF/3/](http://jsfiddle.net/aTeRF/3/)

如果第 12 行被注释掉，这部分

```
this.eventHandler.on(Environment.TOUCH_MOVE_EVENT_NAME, this.onTouchMove.bind(this)); 
```

然后 mouseUp 事件在一致的基础上被触发，这意味着只要单击鼠标，就会触发一个事件。但是正如您从小提琴中看到的那样，如果 mousemove 被绑定，则并不总是会触发 mouseUp 。这会影响画布上的绘图，因为即使释放鼠标，它也会继续绘图。如果在 chrome 上运行很重要，我在 mac 上。你们能复制吗？有什么建议吗？

# python - PyCrypto AES 加密未按预期工作

> ID：15735874
> 
> 赞同：0
> 
> 时间：2013-03-31T23:45:37.573
> 
> 标签：python, aes, pycrypto

我正在创建一个 Python 函数来使用[PyCrypto](https://www.dlitz.net/software/pycrypto/)模块执行计数器模式加密。我知道内置的，但想自己实现它。

我正在尝试 [来自 RFC 3686 的 Test Vector #1](https://www.rfc-editor.org/rfc/rfc3686#section-6)，并且具有正确的计数器块和正确的 ASCII 形式的密钥。但是当我使用密钥加密计数器块时，我没有得到预期的密钥流。

我的代码的相关部分：

```
cipher = AES.new(key)
ctr_block = iv + nonce + ctr
key_stream = base64.b64decode(cipher.encrypt(ctr_block)) 
```

如果需要，我可以提供更多代码，但我不确定如何，因为当我打印它们`ctr_block`时`key`有很多问号字符。

为什么我没有得到预期的答案？似乎一切都应该顺利进行。也许我在字符串的编码方面犯了一些错误。

**编辑**

自包含代码：

```
from Crypto.Cipher import AES
import base64

def hex_to_str(hex_str):
    return str(bytearray([int(n, 16) for n in hex_str.split()]))

key = hex_to_str("AE 68 52 F8 12 10 67 CC 4B F7 A5 76 55 77 F3 9E")
iv = hex_to_str("00 00 00 00 00 00 00 00")
nonce = hex_to_str("00 00 00 30")
ctr = hex_to_str("00 00 00 01")

cipher = AES.new(key)
ctr_block = iv + nonce + ctr
key_stream = base64.b64decode(cipher.encrypt(ctr_block))

print "".join([hex(ord(char)) for char in key_stream])
# 0xd90xda0x72 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:24:29.550

首先，使用字节串：

```
In [14]: keystring = "AE 68 52 F8 12 10 67 CC 4B F7 A5 76 55 77 F3 9E"

In [15]: keystring.replace(' ', '').decode('hex')
Out[15]: '\xaehR\xf8\x12\x10g\xccK\xf7\xa5vUw\xf3\x9e' 
```

其次，你不应该使用 base64。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T01:12:04.240

首先，正确的 CTR 块顺序是`nonce + iv + ctr`. 其次，这个`base64.b64decode`调用是错误的：`cipher.encrypt`产生一个解码的字符串。在这两个修复后，您的代码打印`0xb70x600x330x280xdb0xc20x930x1b0x410xe0x160xc80x60x7e0x620xdf`似乎是正确的密钥流。

# java - Java 字符串解析错误

> ID：15735882
> 
> 赞同：1
> 
> 时间：2013-03-31T23:46:32.787
> 
> 标签：java, string, parsing, double

嘿，有人可以帮我解决我遇到的错误。我正在从我的档案中拆开线路并检查它们是低中还是高。如果字符串为空，我想读取文件中的下一行。我认为错误是当我将刺痛解析为双倍时。这是我的代码，任何帮助都会得到帮助！首先这是我的错误

```
Exception in thread "main" java.lang.NumberFormatException: empty String
    at sun.misc.FloatingDecimal.readJavaFormatString(Unknown Source)
    at java.lang.Double.parseDouble(Unknown Source)
    at BSCQueryManager.displayBar(BSCQueryManager.java:431)
    at BSCQueryManager.main(BSCQueryManager.java:57) 
```

这是我的代码

```
String vMag;
            String data;
            double v;
            int highCount = 0;
            int medCount = 0;
            int lowCount = 0;
            // read file
            File inFile = new File("bsc.dat");   
            Scanner starFile = new Scanner(inFile);
            // while there is a vmag
            while(starFile.hasNext()){
                // read next line
                data = starFile.nextLine();
                data = data.substring(102, 107);
                data.trim();
            // if no vmag read next line
                if(data.trim()!= ""){
                    v = Double.parseDouble(data);
                    // if vmag is > 6.0 add to countHigh
                    if (v > 6){
                        highCount++;
                    }
                    // if vmag is 5-6 add to countMed
                    if (v >= 5 && v <= 6){
                        medCount++;
                    }
                    // if vmag is < 5 add to countLow
                    if (v < 5){
                        lowCount++;
                    }
                // end if
                }
            // end while
            }

            // display label
            System.out.println(label);
            System.out.println(highCount);
            System.out.println(lowCount);
            System.out.println(medCount); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:54:23.720

尝试更换：

```
data.trim();
// if no vmag read next line
if(data.trim()!= ""){ 
```

和

```
data = data.trim();
// if no vmag read next line
if(data.length > 0){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:58:04.563

其中一个字符串为空：

```
class Test1 {
    public static void main(String[] args) {
        Double.parseDouble("");
    }
} 
```

产生：

```
C:\Temp>java Test1
Exception in thread "main" java.lang.NumberFormatException: empty String
        at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:992)
        at java.lang.Double.parseDouble(Double.java:510)
        at Test1.main(Test1.java:3) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-31T23:50:25.630

数据字符串绝对不能解析为双精度。它可能是空白的（您的字符串非空逻辑有缺陷，请尝试

```
data.isEmpty() 
```

相反）或者该值可能是其他无法解析的东西，例如字母或单词。

您可以尝试调试，或捕获异常并打印数据的值。

```
try{
 Double.parseDouble(data);
}catch(NumberFormatException e){
throw new RuntimeException(data + " is not a number");
} 
```

这会让你看到出了什么问题。

# c++ - winhttp.dll 中的访问冲突

> ID：15735884
> 
> 赞同：1
> 
> 时间：2013-03-31T23:47:01.690
> 
> 标签：c++, winhttp

我正在尝试在 C++ 中使用 WinHTTP 执行 HTTP GET，但是在解析名称后（在状态回调函数中获取 WINHTTP_CALLBACK_STATUS_NAME_RESOLVED 之后）它在某个时候崩溃。我在 winhttp.dll 中遇到访问冲突。调用堆栈是：

> winhttp.dll!HTTP_USER_REQUEST::_IndicateSocketAddress() + 0x221ed 字节
> winhttp.dll!HTTP_USER_REQUEST::OnDnsNameResolved() + 0x24 字节
> winhttp.dll!WEBIO_REQUEST::_OnInformation() + 0x1c0c 字节 webio.dll!_WaIndicateHttpRequestInformation@16() + 0x15a字节 webio.dll!_WaHttpInformationConnection@16() + 0x7a 字节
> webio.dll!_WapTcpDnsQueryCompletionRoutine@12() + 0x2f 字节
> webio.dll!_WapCallDnsQueryCompletion@12() + 0x6d 字节 webio.dll!_WaDnsResolutionWorker@8() + 0x157 字节 ntdll .dll!_TppSimplepExecuteCallback@8() + 0x7b 字节
> ntdll.dll！*TppWorkerThread@4() + 0x5a4 字节
> kernel32.dll！@BaseThreadInitThunk@12() + 0x12 字节
> ntdll.dll！*__RtlUserThreadStart@8() + 0x27 字节
> ntdll.dll!__RtlUserThreadStart@8() + 0x1b 字节

相关代码为：

```
enum OnlineState
{
    OnlineState_Idle,
    OnlineState_Registering
};

static OnlineState g_OnlineState = OnlineState_Idle;
HINTERNET g_Request = 0;
HINTERNET g_Connection = 0;
unsigned char g_HTTPBuffer[1024];

void HTTPRequestComplete()
{
    if(g_Request != 0)
    {
        WinHttpCloseHandle(g_Request);
        g_Request = 0;
    }
    if(g_Connection != 0)
    {
        WinHttpCloseHandle(g_Connection);
        g_Connection = 0;
    }
    g_OnlineState = OnlineState_Idle;
}

void HTTPAsyncCallback(HINTERNET hInternet, DWORD_PTR dwContext, DWORD dwInternetStatus, LPVOID lpvStatusInformation, DWORD dwStatusInformationLength)
{
    switch(dwInternetStatus)
    {
        case WINHTTP_CALLBACK_STATUS_SENDREQUEST_COMPLETE:
        {
            // Get the response
            if (!WinHttpReceiveResponse(g_Request, 0))
            {
            // Failed to get the response
                HTTPRequestComplete();
                return;
            }
        }
        break;

        case WINHTTP_CALLBACK_STATUS_HEADERS_AVAILABLE:
        {
            DWORD statusCode = 0;
            DWORD statusCodeSize = sizeof(DWORD);

            if (!WinHttpQueryHeaders(g_Request,
                           WINHTTP_QUERY_STATUS_CODE |     WINHTTP_QUERY_FLAG_NUMBER,
                           WINHTTP_HEADER_NAME_BY_INDEX,
                           &statusCode,
                           &statusCodeSize,
                           WINHTTP_NO_HEADER_INDEX))
            {
                // Failed to query headers
                HTTPRequestComplete();
                return;
            }

            if (HTTP_STATUS_OK != statusCode)
            {
                // Error status
                HTTPRequestComplete();
                return;
            }

            if (!WinHttpReadData(g_Request,
                           g_HTTPBuffer,
                           sizeof(g_HTTPBuffer),
                           0))
            {
                // Error reading data
                HTTPRequestComplete();
                return;
            }
        }
        break;

        case WINHTTP_CALLBACK_STATUS_READ_COMPLETE:
        {
            if (dwStatusInformationLength > 0)
            {
                // Store the data

                // Read the next data
                if (!WinHttpReadData(g_Request,
                                     g_HTTPBuffer, 
                                         sizeof(g_HTTPBuffer),
                                     0))
                {
                    // Error
                HTTPRequestComplete();
                return;
            }
        }
        else
        {
            // Request completed OK
            HTTPRequestComplete();
        }
    }
    break;

    default:
        break;
    }
}

// Online functionality
void Online_UpdateServer()
{
    switch(g_OnlineState)
    {
    case OnlineState_Idle:
        {
            // Get our local ip address by connecting a local socket to a web address and reading the socket name

            // Look up the address to connect to
            addrinfo hints;
            addrinfo* res = 0;
            memset(&hints, 0, sizeof hints);
            hints.ai_family = AF_UNSPEC;
            hints.ai_socktype = SOCK_DGRAM;
            getaddrinfo("www.google.com", "80", &hints, &res);

            // Create the socket
            int tempSocket = socket(res->ai_family, res->ai_socktype, res->ai_protocol);
            unsigned int localAddress = 0;
            if (tempSocket >= 0)
            {
                // Connect the socket
                connect(tempSocket, res->ai_addr, res->ai_addrlen);

                // Get the socket name (our local ip address)
                sockaddr_in localName;
                memset(&localName, 0, sizeof(localName));
                int bufferSize = sizeof(localName);
                if(getsockname(tempSocket, (sockaddr*)&localName, &bufferSize) == 0)
                {
                    // Get the IP address
                    localAddress = localName.sin_addr.S_un.S_addr;
                }

                closesocket(tempSocket);
            }

            // Connect
            g_Connection = WinHttpConnect(g_Internet, L"www.google.com", INTERNET_DEFAULT_PORT, 0);

            // Open the request
            std::wstringstream urlString;
            urlString << L"/";
            std::wstring tempString = urlString.str();
            const wchar_t* wurlString = tempString.c_str();
            g_Request = WinHttpOpenRequest(g_Connection, 0, wurlString, 0, WINHTTP_NO_REFERER, WINHTTP_DEFAULT_ACCEPT_TYPES, 0);

            // Install the status callback function.
            if(WINHTTP_INVALID_STATUS_CALLBACK == WinHttpSetStatusCallback(g_Request, (WINHTTP_STATUS_CALLBACK)HTTPAsyncCallback, WINHTTP_CALLBACK_FLAG_ALL_NOTIFICATIONS, NULL))
            {
                OutputDebugString(L"Error");
            }

            // Send the request
            if(!WinHttpSendRequest(g_Request, WINHTTP_NO_ADDITIONAL_HEADERS, 0, WINHTTP_NO_REQUEST_DATA, 0, 0, 0))
            {
                OutputDebugString(L"Error");
            }

            // Log that we're registering
            g_OnlineState = OnlineState_Registering;
        }
        break;

    case OnlineState_Registering:
        {
            // Don't do anything, as we're currently registering
        }
        break;

    default:
        break;
    }
} 
```

g_Internet 的初始化如下：

```
// Initialise HTTP
g_Internet = WinHttpOpen(L"Boomba", WINHTTP_ACCESS_TYPE_DEFAULT_PROXY, WINHTTP_NO_PROXY_NAME, WINHTTP_NO_PROXY_BYPASS, WINHTTP_FLAG_ASYNC); 
```

据我所知，我正在初始化并正确使用 WinHTTP，一切似乎都恢复正常，没有错误。回调被调用两次，第一次使用 WINHTTP_CALLBACK_STATUS_RESOLVING_NAME，然后使用 WINHTTP_CALLBACK_STATUS_NAME_RESOLVED，然后我遇到访问冲突：

0xC0000005：访问冲突读取位置 0x00000014

位置发生了变化，发生了各种各样的事情，所以我认为它看起来可能是一个线程问题，但我不确定可能是什么问题。有任何想法吗？（我在 Windows 7 64 位上运行）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T00:07:56.073

```
 if (WINHTTP_INVALID_STATUS_CALLBACK == WinHttpSetStatusCallback(
       g_Request, 
       (WINHTTP_STATUS_CALLBACK)HTTPAsyncCallback,        // <=== evil
       WINHTTP_CALLBACK_FLAG_ALL_NOTIFICATIONS, 
       NULL)) 
```

编译器最初抱怨您的函数与所需的函数指针类型不匹配。您通过使用该演员关闭编译器来解决问题。但这并没有真正解决问题。现在你给自己买了一个*真正的*问题，一个损坏的堆栈。很难诊断。

回调函数必须声明为 __stdcall，而不是默认的 __cdecl 调用约定。Windows 标头为此使用 CALLBACK 宏。使固定：

```
 void CALLBACK HTTPAsyncCallback(/* etc*/) 
```

当然，删除该演员表。

# arrays - 字符串到长度小于 1 字节的非常长的序列

> ID：15735885
> 
> 赞同：1
> 
> 时间：2013-03-31T23:47:08.660
> 
> 标签：arrays, algorithm

我无法猜测如何解决以下问题。假设我有一个字符串或整数类型变量的数组（uchar、char、整数等）。这些数据类型中的每一个都是 1 字节长或更长。

我想从这样的数组中读取，但读取小于 1 字节的片段，例如 3 位（值 0-7）。我试着做一个像

```
cout << ( (tab[index] >> lshift & lmask) | (tab[index+offset] >> rshift & rmask)  ); 
```

但是猜测如何设置这些变量是我无法企及的。解决此类问题的方法是什么？

抱歉，如果有人问过问题，但搜索没有答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:40:37.390

我确信这不是**最好**的解决方案，因为可以消除代码中的一些低效率，但我认为这个想法是可行的。我只是简单地测试了一下：

```
void bits(uint8_t * src, int arrayLength, int nBitCount) {
   int idxByte = 0;      // byte index
   int idxBitsShift = 7; // bit index: start at the high bit
   // walk through the array, computing bit sets
   while (idxByte < arrayLength) {
       // compute a single bit set
       int nValue = 0;
       for (int i=2; i>=0; i--) {
        nValue += (src[idxByte] & (1<<idxBitsShift)) >> (idxBitsShift-i);
        if ((--idxBitsShift) < 0) {
            idxBitsShift=8;
            if (++idxByte >= arrayLength) 
                break;
        }
       }
       // print it
       printf("%d ", nValue);
   }

}

int main() {
    uint8_t a[] = {0xFF, 0x80, 0x04};
    bits(a, 3, 3);
} 
```

跨字节边界收集位的事情有点像 PITA，所以我一次做一点，然后将这些位一起收集到`nValue`. 您可以拥有更智能的代码，一次执行这三个（或多个）位，但就我而言，对于这样的问题，通常最好从一个简单的解决方案开始（除非您已经知道如何做更好的一个）然后做一些更复杂的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:59:26.400

简而言之，数据在内存中的排列方式严格取决于：

*   [端倪](http://en.wikipedia.org/wiki/Endianness)_
*   用于计算/表示的标准（通常是[IEEE 754](http://en.wikipedia.org/wiki/IEEE_floating_point)）
*   给定变量的类型

现在，您不能在不破坏其自身含义的情况下以这种基本原理“分解”数据结构，简单地说，如果您要将变量细分为“位域”，那么您只是在描绘一个未定义的值。

在计算机科学中，数据结构或信息以块的形式结构化，就像许多散列算法/散列结果一样，但数值不是这样存储的，你应该知道你在做什么来防止任何数据丢失。

另一件需要注意的事情是，您对“小于 1 字节的片段”的定义没有多大意义，它也非常具有侵入性，您在这里失去了抽象，您也可以做一些坏事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T00:00:48.870

这是我能想到的设置变量的各个位的最佳方法：假设我们需要将 variable1（char 或其他字节长变量）的前四位设置为 1010

```
variable1 &= 0b00001111; //Zero the first four bytes
variable1 |= 0b10100000; //Set them to 1010, its important that any unaffected bits be zero 
```

这可以扩展到所需的任何位，方法是在与您希望设置的位相对应的第一个数字中放置零（在示例的情况下为前四个），并在与您希望保留的位相对应的第二个数字中放置零第二个数字中性（示例中的最后四个）。第二个数字也可以通过将您想要的值移位适当数量的位置（在示例的情况下为四个）来导出。

根据您的评论，可以进行如下修改以适应增加的可变性：

对于此操作，假设您希望能够修改非起始位和非结束位，我们将需要两个班次。在这种情况下有两组位，第一组（从左起）不受影响的位和第二组。如果您希望修改从左侧跳过第一位的四位（*将这四个位*111 用于单个字节），则第一个移位将是 7，第二个移位将是 5。

```
variable1 &= ( ( 0b11111111 << shift1 ) | 0b11111111 >> shift2 ); 
```

接下来，我们希望分配的值需要进行移位和或运算。但是，我们需要第三次移位来说明我们要设置多少位。这种转变（我们称之为`shift3`）`shift1`减去我们希望修改的位数（如前所述 4）。

```
variable1 |= ( value << shift3 ); 
```

# python-3.x - 不使用数组实现的文件中的最大数

> ID：15735892
> 
> 赞同：-1
> 
> 时间：2013-03-31T23:48:01.430
> 
> 标签：python-3.x

基本上，作业要求程序打开一个文件，找到最大的数字，并计算文件中数字的数量。我们的讲师告诉我们不要使用数组实现，我不确定我的代码是否算作使用它。我不知道如何在不使用数组实现的情况下转换它。

```
 def main():

        infile = open('numbers.dat', 'r')
        numbers = []
        for line in infile:
            numbers.append(int(line))
        infile.close()

        largest = max(numbers)
        print('The largest number in the file is: ',largest)

        count = len(numbers)
        print('The amount of numbers in the file is: ', count)
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:54:00.547

是的，我认为您的代码算作使用它。您的讲师可能不希望您存储所有数字 - 幸运的是您不必这样做。

由于这是一个评估练习，我不会为您编写代码，但我将解释基本方法。您只需要保留两个整数即可 - 一个数字是到目前为止您在文件中看到的数字的计数，另一个是迄今为止最大的数字。对于您读取的每个数字，您存储`max()`迄今为止最大的数字，然后存储您刚刚看到的数字，您只需将一个添加到计数器。

一个陷阱 - 如果你从零开始最大的数字，那么如果文件中的所有数字都是负数，你会得到一个不正确的结果。您没有指定是否允许负数，但它可能有效。为避免这种情况，请将值初始化`None`为开头，然后将其设置为您在文件中看到的第一个数字（如果值为`None`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:56:58.200

您使用的不是数组，而是列表。这是低效的，因为您的程序需要按文件大小排列的内存，但只需要少得多的内存（即有足够的内存来容纳最大的行数和行数）。

可以简单地调用文件`max`的`len`元素，如下所示：

```
def main():
    with open('numbers.dat', 'r') as infile:
        largest = max(map(int, infile))
        print('The largest number in the file is: ',largest)

    with open('numbers.dat', 'r') as infile:
        count = sum(1 for line in infile)
        print('The amount of numbers in the file is: ', count)
main() 
```

但是，这两种变体显然都不是最理想的，因为您需要读取文件两次。相反，您可以修改`for`循环，如下所示：

```
def main():
    largest = float('-inf')
    count = 0
    with open('numbers.dat', 'r') as infile:
        for line in infile:
            v = int(line)
            # Left as homework: Update largest and count
    print('The largest number in the file is: ',largest)
    print('The amount of numbers in the file is: ', count) 
```

# php - php - 如何将全局值分配给静态类

> ID：15735910
> 
> 赞同：0
> 
> 时间：2013-03-31T23:51:12.587
> 
> 标签：php, static

将全局值分配给静态属性的最佳方法是什么（从类外部）

*（我不想使用常量（即 define( ... ) ）。*

*（因为我使用的是静态类，所以没有构造函数，所以我不能将值作为参数注入）*

* * *

方法**A** ...不会工作 ...我的首选方法，但它不起作用

```
$my_global = "aaa" ;

class my_class
  { public static $my_prop = $GLOBALS[ 'my_global' ] ; // XXX         
  } 
```

* * *

方法**B** ...可行，但感觉不对...我可以使用显式设置器，我知道，但那样我就会有一堆单一用途的设置器。

```
$my_global = "aaa" ;

my_class::$my_prop = $my_global ; 

class my_class
  { public static $my_prop ;

  } 
```

* * *

方法**C** ...不会工作 ...使用通用设置器为特定属性分配值。我希望这种方法可以。

```
$my_global = "aaa" ;

my_class::my_setter( "my_prop" , $my_global ) ;  

class my_class
  { private static $my_prop ;

    public static function my_setter( $prop_name , $value )
      { self::$prop_name   = $value ; // XXX
        self[ $prop_name ] = $value ; // XXX
      }
  } 
```

* * *

方法**D** ... WORKS ... 使用通用设置器在“匿名”注册表中分配值。我不喜欢这种方法，因为我不知道注册表中有什么。

```
$my_global = "aaa" ;

my_class::my_setter( "my_prop" , $my_global ) ; 

class my_class
  { private static $my_registry = array() ;

    public static function my_setter( $prop_name , $value )
      { self::$my_registry[ $prop_name ] = $value ;                    
      }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:44:18.043

直接的解决方案是

```
class MyClass
{
    public static $property;
}

MyClass::$property = 'aaa'; 
```

**警告**：你应该重新考虑你的选择。静态类不是一个好主意（事实上，它们是单例），因为它们对可测试性有负面影响。

# php - 用单引号括起来的数组中的 PHP 变量

> ID：15735914
> 
> 赞同：1
> 
> 时间：2013-03-31T23:52:02.620
> 
> 标签：php, arrays, variables, quotes

我正在使用 Amazon API 在我的网站上显示 dvd 和 Bluray 产品信息。我有以下 PHP 代码，它根据 ItemID 查找产品信息。

```
$movies = file_get_contents('movies.xml');
$xml = new SimpleXmlElement($movies);

$dvd = $xml->movie->amazon->dvd;
$bluray = $xml->movie->amazon->bluray;

$request = aws_signed_request('co.uk', array(
            'Operation' => 'ItemLookup',
            'ItemId' => '$dvd, $bluray',
            'ResponseGroup' => 'Medium, Offers',
            'MerchantId' => 'All'), $public_key, $private_key, $associate_tag); 
```

我知道以下代码行会导致问题：

```
'ItemId' => '$dvd, $bluray' 
```

我不确定如何在用单引号括起来的数组中分配两个变量。

如果我将直接值分配给 ItemId，那么一切正常：

```
$request = aws_signed_request('co.uk', array(
            'Operation' => 'ItemLookup',
            'ItemId' => 'B004Q9SZGC, B004Q9T6CO',
            'ResponseGroup' => 'Medium, Offers',
            'MerchantId' => 'All'), $public_key, $private_key, $associate_tag); 
```

但是，我想使用我的`$dvd`和`$bluray`变量来查找存储在本地 XML 文件 (movies.xml) 中的 ItemId，而不是硬编码数组中的实际 ItemId 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:55:16.150

`.`在 PHP 中，您可以用符号连接表达式（例如变量和字符串） 。

例如：

```
'ItemId' => $dvd.', '.$bluray, 
```

# ember.js - 如何为 ember-data 修订版 12 设置 QUnit 数据

> ID：15735915
> 
> 赞同：1
> 
> 时间：2013-03-31T23:52:04.230
> 
> 标签：ember.js, ember-data

在修订版 12 之前，我将简单地执行以下操作来创建一个对象，并且它与“hasMany”关系相关联

```
 test("findMany generates http ...", function() {
    store.load(Person, {id: 9, name: "Toran Billups", tasks: [1, 2]});
    person = store.find(Person, 9);
    expectLoaded(person);

    equal(ajaxUrl, undefined, "no Ajax calls have been made yet");

    var tasks = get(person, 'tasks');

    equal(get(tasks, 'length'), 2, ""); //this now fails showing 0 tasks ...
  }); 
```

但是在升级之后，“任务”hasMany 似乎是 0 而不是 2，正如我所预料的那样。

如果有任何帮助，这里是模型

```
 var attr = DS.attr, hasMany = DS.hasMany, belongsTo = DS.belongsTo;

  Person = DS.Model.extend({
    name: attr('string')
  });

  Task = DS.Model.extend({
    name: attr('string'),
    isFinished: attr('boolean'),
    owner: belongsTo(Person)
  });

  Person.reopen({
    tasks: hasMany(Task)
  }); 
```

我知道在加载几个任务后我可以做一个简单的“pushObject”，但我上面测试的目的是验证 $.ajax 行为，当我只有关联的任务 ID 并且 ember-data 会获取模型的其余部分（延迟加载）。是否可以保留它，就像我在第 12 版中所拥有的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:46:37.720

看起来您需要在修订版 12 中使用“loadHasMany”选项 - 按预期工作！

```
 test("findMany generates http ...", function() {
    store.load(Person, {id: 9, name: "Toran Billups"});
    person = store.find(Person, 9);
    store.loadHasMany(person, 'tasks', [ 1, 2 ]);
    expectLoaded(person);

    equal(ajaxUrl, undefined, "no Ajax calls have been made yet");

    var tasks = get(person, 'tasks');

    equal(get(tasks, 'length'), 2, ""); //this actually returns 2 :)
  }); 
```

# mysql - 获取特定行数的校验和

> ID：15735919
> 
> 赞同：0
> 
> 时间：2013-03-31T23:53:23.623
> 
> 标签：mysql

我知道可以为这样的表获取校验和：

`CHECKSUM TABLE table_name`

但是，我想获取特定行数的校验和。例如：

`CHECKSUM TABLE table_name LIMIT 0, 10000`

仅检查前 10,000 行。我知道您可以计算特定列的校验和，或者计算多个列并将它们相加，但这似乎很麻烦。有没有其他方法可以做到这一点？

这样做的目的是验证 2 个表（在不同服务器上）是否相同，并找出它们在什么时候变得不同。

# python - 递归列表类型对象中的 __str__ 方法的问题

> ID：15735922
> 
> 赞同：2
> 
> 时间：2013-03-31T23:53:58.037
> 
> 标签：python, list, python-3.x

我正在尝试制作一个基本上是列表但具有额外功能的对象。当我使用它（例如通过打印它）时，我想要一个自定义显示。例如：

```
class MyList(list):
    def __init__(self, name, arg):
        self.name=name
        super().__init__(arg)
    def __str__(self):
        return "{0}: {1}".format(self.name,self[:])
if __name__=="__main__":
    B = MyList("george",range(3))
    A = MyList("bernadett",range(5,0,-1))
    B.append(A)
    A.append(B)
    print(B) 
```

它打印出来`george: [0, 1, 2, [5, 4, 3, 2, 1, [0, 1, 2, [...]]]]` 我希望它总是在进入列表之前打印 Mylist 的名称，我宁愿将递归深度限制为 1，而不是它应该只打印名称并保留它。

所以我想要类似的东西： `George: [0, 1, 2, Bernadette: [5, 4, 3, 2, 1, George:]]`

此外，每当我尝试更改`__repr__`列表类型对象时，都会出现无限循环，我不知道为什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:21:37.583

使用父表示：

```
def __repr__(self):
    return "{0}: {1}".format(self.name, super().__repr__()) 
```

您必须将其定义为`__repr__`方法，因为在列表中，它是用于打印其中元素的方法。

这样做，上面的代码将导致：

```
george: [0, 1, 2, bernadett: [5, 4, 3, 2, 1, george: [...]]] 
```

# c++ - 通过 Lambda 解包可变参数

> ID：15735925
> 
> 赞同：2
> 
> 时间：2013-03-31T23:54:08.287
> 
> 标签：c++, c++11, lambda

我试图避免外部函数或递归调用，所以我决定测试 lambdas 的功能，但我被卡住了。如果可能的话，我将如何`Args...`使用 lambdas 解包？

我试图`std::tie`将参数放入元组然后我尝试使用`std::get<I>`where`I`是一个非常量整数，但它失败了，因为 get 需要一个`constexpr`.

我还尝试了我知道会失败但值得一试的初始化列表。我不想按照维基百科的方式来做。我想这样做：

有什么想法还是我注定要失败？

```
template<typename... Args>
void fcout(const char* s, Args... args)
{
    std::function<void(Args... A)> Unpack = [&](Args... A) {
        //Unpack(A...);
    };

    while (*s)
    {
        if (*s == '%')
        {
            if (*(s + 1) == '%')
            {
                ++s;
            }
            else
            {
                Unpack(args...);
                fcout(s + 1, args...);
                return;
            }
        }
        std::cout << *s++;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T00:06:24.623

如果我正确理解你想要达到的目标，你可以使用这个简单的技巧：

```
std::function<void(Args... A)> Unpack = [&](Args... A) {
    auto l = {((std::cout << A), 0)...};
}; 
```

调用`Unpack`函数对象将导致将所有参数插入`std::cout`（并因此打印到标准输出）。

# sql - 将表值作为列检索的 SQL 查询

> ID：15735928
> 
> 赞同：0
> 
> 时间：2013-03-31T23:54:22.270
> 
> 标签：sql, postgresql, crosstab, postgresql-9.0

我有一个表格视图，如下所示：

```
(SELECT * FROM session_log_detail)
![Raw Data from table session_log_detail][1]

attr_name     attr_value     timestamp
A                123           1:20:45
B                234           1:20:45
C                567           1:20:45
D                234           1:20:45
A                098           2:58:20
B                478           2:58:20
"                 "              " 
```

我想做的是检索数据，例如：

```
A         B          C           D
123      234        567         234
098      478 
```

每行的时间戳值应该相等，如果更改需要在下一行。`attr_values`并且`timestamp`是随机值。

我有 Postgres `SQL 9.0`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:01:46.107

### 表函数模块

您正在寻找“枢轴”或“交叉表”。如果您尚未安装附加模块[**tablefunc**](http://www.postgresql.org/docs/current/interactive/tablefunc.html)，请为每个数据库安装一次。在 PostgreSQL 9.1+ 中，这已被简化为：

```
CREATE EXTENSION tablefunc; 
```

在旧版本（包括 9.0）中，您必须使用以下命令从 shell 运行安装脚本：

```
psql -d dbname -f SHAREDIR/contrib/tablefunc.sql 
```

对于 Debian 下的 9.0 版本，这将是：

```
psql -d dbname -f /usr/share/postgresql/9.0/contrib/tablefunc.sql 
```

[详细手册中有关 Postgres 9.0 的](http://www.postgresql.org/docs/9.0/interactive/contrib.html)更多信息。

### 询问

可能看起来像这样：

```
SELECT * FROM crosstab(
       'SELECT ts, attr_name, attr_value
        FROM   session_log_detail
        ORDER  BY 1,2'

      ,$$VALUES ('A'::text), ('B'), ('C'), ('D')$$)
AS tbl ("ts" text, "A" int, "B" int, "c" int, "D" int); 
```

我命名了你的 column `ts`，因为`timestamp`它是 Postgres 中的一个函数名，不应该用作标识符。

在这些相关答案中找到更多解释和详细信息：
[PostgreSQL Crosstab Query](https://stackoverflow.com/questions/3002499/postgresql-crosstab-query/11751905#11751905)
[Dynamic Alternative to pivot with CASE and GROUP BY](https://stackoverflow.com/questions/15506199/dynamic-alternative-to-pivot-with-case-and-group-by/15514334#15514334)

# php - 打开csv文件的问题

> ID：15735930
> 
> 赞同：0
> 
> 时间：2013-03-31T23:54:24.880
> 
> 标签：php, file-upload, csv

嘿伙计们，我有以下几点：

```
session_start();
$seterror = 0;

function returnBack(){

    header("Location:../memberinterface.php?getmsg=15");
    exit;

}
function returnBackfile(){

    header("Location:../memberinterface.php?getmsg=16");
    exit;
}
if (!empty($_FILES['csvfile']['error'] ) )
    {

        $seterror = 1;
        returnBack();

    } 
    if (empty($_POST['firstname'])){

        $seterror =1;
        returnBack();
    }
    if (empty($_POST['lastname'])){
        $seterrro =1;

        returnBack();
    }
    if (empty($_POST['email'])){
        $seterror =1;

        returnBack();
    }
    if ($seterror !== 1){

    $file = $_FILES['csvfile']['tmp_name']; 

    $handle = fopen($file , "r");

    $fileop = fgetcsv($handle,0,"\t");
    echo '<pre>'; var_dump($fileop); var_dump($_POST); echo '</pre>';
    exit;
    $fileop=array_map("strtoupper",array_map("trim",$fileop));

    $firstname_index = array_search(strtoupper($_POST["firstname"]),$fileop);
    if ($firstname_index===false){
        returnBack();
    }
    $lastname_index = array_search(strtoupper($_POST["lastname"]),$fileop);
    if ($lastname_index===false){

        returnBack();
    }
    $email_index = array_search(strtoupper($_POST["email"]),$fileop);
    if ($email_index===false){

        returnBack();
    }
        //open file and store values
        $j = 0;
        while (($fileop=fgetcsv($handle,0,"\t")) !== false)
        {

            $fileop=array_map("trim",$fileop);
            $firstname[$j] = $fileop[$firstname_index];
            if (empty($firstname[$j])){ 

            returnBackfile();

            }

            $lastname[$j] = $fileop[$lastname_index];
                if (empty($lastname[$j])){

            returnBackfile();

            }
            $email[$j] = $fileop[$email_index];
                if (empty($email[$j])){

            returnBackfile();

            }
            $j++;
        }
        //create sessions, send back to memberinterface.php and open table to display the results to delete
        $_SESSION['CSVRfirstnames'] = $firstname;
        $_SESSION['CSVRlastnames'] = $lastname;
        $_SESSION['CSVRemails'] = $email;

        header("Location:../memberinterface.php?RemoveCSV=1");
    } 
```

还有我在列中回显的部分：`echo '<pre>'; var_dump($fileop); var_dump($_POST); echo '</pre>';`- 发生了一件奇怪的事情。

对于一些 CSV 文件，我得到了这个输出：

```
array(4) {
  [0]=>
  string(726) "PK!|l˜l [Content_Types].xml ¢( Ì”]KÃ0†ïÿCÉ­4Ù&ˆÈº]øq©çˆÍé–&amp;!'›Û¿÷4û@¤nzÓÐæœ÷}’4ïp¼jL¶„€ÚÙ‚õye`K§´ìmú”ß²£´Jg¡`k@6]^§k˜Q·Å‚Õ1ú;!°¬¡‘ÈK3•ŒôfÂËr.g ½Þ(`c[
6>@%&f+ú¼!"
  [1]=>
  string(71) "`e÷›ÂÖ«`Ò{£K‰T,­úæ’o8u¦¬µÇ+Â`¢Ó¡ùÙ`Û÷B[´‚l"C|–
aˆ•.Ìß›óÃ"”®ªt"
  [2]=>
  string(951) "v€£ Ö±1<¼‘Úî¸ø§bièŸ¤]_>‘cðO8®ÿˆ#Òÿ"=$IæÈ`\À3¯v#zÌ¹–Ôk”gøª}ˆƒîÑ$8”(Nß…]d´Ý¹'!QÃ>4º.ßÞ‘ÒètÃo·Ú¼S :¼EÊ×Ñ'ÿÿPK!µU0#õL_rels/.rels ¢( Œ’ÏNÃ0ÆïH¼CäûênH¡¥»LH»!TÀ$îµ£$@÷ö„‚JcÛÑöçÏ?[ÞîæiTb/NÃº(A±3b{×jx­ŸV b"giÇŽaWÝÞl_x¤”›b×û¨²‹‹º”ü#b4Oñìr¥‘0QÊahÑ“¨eÜ”å=†¿P-<ÕÁj{ª>ú<ù²·4Mox/æ}b—NŒ@ž;ËvåCf©ÏÛ¨šBËIƒóœÓÉû"cž&Ú\Oôÿ¶8q"K‰ÐHàó<ßŠs@ëë.Ÿh©ø½Î<â§„áMdøaÁÅT_ÿÿPK!Þ"
  [3]=>
  string(530) "(Ôxl/_rels/workbook.xml.rels ¢( ¼“ÏjÃ0Æïƒ½ƒÑ}q’ne”:½ŒA¯[÷&QâÐÄ6–ö'o?“Cº@É.¡ƒ$ü}?Ð§ýá§ïÄjU%)´¥«ZÛ(ø8½><ƒ Ö¶Ò³¨`@‚Cq·ÃNsüD¦õ$¢Š%†Ùï¤¤Ò`¯)qmœÔ.ôšcéuyÖ
Ê
  string(9) "Firstname"
  ["lastname"]=>
  string(8) "lastname"
  ["email"]=>
  string(5) "Email"
} 
```

和其他 csv 文件，我得到了很好的组织：

```
array(3) {
  [0]=>
  string(9) "firstname"
  [1]=>
  string(8) "lastname"
  [2]=>
  string(5) "email"
  [3]=>
}
array(3) {
  ["firstname"]=>
  string(9) "Firstname"
  ["lastname"]=>
  string(8) "lastname"
  ["email"]=>
  string(5) "email"
} 
```

现在我不知道为什么我会得到一些奇怪的符号，而且我不想要那些，所以如果你能帮助我，那就太好了！

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:46:37.253

确保您的 .CSV 文件在 Excel 中保存为“逗号分隔”或“制表符分隔”。干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T02:55:18.800

您的一些“CSV”文件不是 CSV 文件。您正在打印的这种确认结构可能是`.xlsx`文件的内容或许多其他 Microsoft Office 2007 格式中的一些。

如果我创建一个空白`.docx`或`.xlsx`文件并在十六进制编辑器中查看，我将看到如下内容：

```
00000000h: 50 4B 03 04 14 00 06 00 08 00 00 00 21 00 DD FC ; PK..........!.Ýü
00000010h: 95 37 66 01 00 00 20 05 00 00 13 00 08 02 5B 43 ; •7f... .......[C
00000020h: 6F 6E 74 65 6E 74 5F 54 79 70 65 73 5D 2E 78 6D ; ontent_Types].xm
00000030h: 6C 20 A2 04 02 28 A0 00 02 00 00 00 00 00 00 00 ; l ¢..( .........
00000040h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000050h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................
00000060h: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ; ................ 
```

很熟悉，不是吗？

这些文件实际上是`.zip`包含 .xml 文件树和属于您的文档的其他资源的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:57:48.047

您可以在字符串上尝试 utf8_encode() 吗？

# android - 如何修改 Android 手势视觉效果（用于屏幕手势检测）？

> ID：15735932
> 
> 赞同：3
> 
> 时间：2013-03-31T23:55:03.843
> 
> 标签：android, android-view, android-ui, android-input-method, android-gesture

基本上我想要做的是使用这个手势功能，如下所示

[https://www.youtube.com/watch?v=tG3lzBDMRQQ](https://www.youtube.com/watch?v=tG3lzBDMRQQ)
[http://www.vogella.com/articles/AndroidGestures/article.html](http://www.vogella.com/articles/AndroidGestures/article.html)

除了设置颜色之外，我还希望能够为手势运动期间绘制的线条添加各种视觉效果。

IE：脉动厚度/颜色变化/粒子效果，如火花棒烟花等。

尝试这样的冒险从哪里开始？

编辑：我正在考虑的一种方法是将手势颜色设置为透明，但有一个单独的触摸监听器，就像在某些绘画类型的应用程序中一样。因此，它同时创造了手势并在其上绘制了适当的图像。这行得通吗？屏幕可以同时监听来自两个视图的输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T11:54:36.647

GestureOverlayView 是一个能够在屏幕上绘制的普通视图。您可以简单地扩展 GestureOverlayView 并添加您的自定义效果。您可以设置自定义绘制样式，也可以覆盖 dispatchTouchEvent() 以在绘制时添加自己的效果。

# ruby-on-rails - Rails + Paperclip 未在视图中提供图像 url

> ID：15735939
> 
> 赞同：0
> 
> 时间：2013-03-31T23:56:17.120
> 
> 标签：ruby-on-rails, ruby, paperclip

我正在建立一个基本博客，并为帖子提供可选的图片上传。图像正在正确上传并进入正确的目录。但是，当我转到视图时，它会加载默认图像：

```
photos/original/missing.png 
```

这是模型

```
class Post < ActiveRecord::Base
  attr_accessible :body, :date, :feature, :poster, :title, :photo

  has_attached_file :photo, :styles => { :medium => "300x300>", :thumb => "100x100>" },
                    :url  => "/assets/posts/:id/:style/:basename.:extension",
                    :path => ":rails_root/public/assets/posts/:id/:style/:basename.:extension"

  attr_accessor :photo_file_name
  attr_accessor :photo_content_type
  attr_accessor :photo_file_size
  attr_accessor :photo_updated_at
end 
```

在视图中：

```
<%= image_tag @post.photo.url %> 
```

例如，我上传了一张带有帖子的图片，它被上传到：

```
rails_root/public/assets/posts/5/original/image.jpg
rails_root/public/assets/posts/5/medium/image.jpg
rails_root/public/assets/posts/5/thumb/image.jpg 
```

移民

```
class AddAttachmentImageToPosts < ActiveRecord::Migration
  def self.up
    add_attachment :posts, :photo
  end

  def self.down
    remove_attachment :posts, :photo
  end
end 
```

架构：

```
 create_table "posts", :force => true do |t|
    t.string   "title"
    t.text     "body"
    t.datetime "date"
    t.string   "poster"
    t.boolean  "feature"
    t.datetime "created_at",         :null => false
    t.datetime "updated_at",         :null => false
    t.string   "image_file_name"
    t.string   "image_content_type"
    t.integer  "image_file_size"
    t.datetime "image_updated_at"
  end 
```

然而，当视图被渲染时，它找不到图像。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:05:36.900

尝试 attr_accessible 而不是 attr_accessor 用于照片列。

所以

```
class Post < ActiveRecord::Base

  attr_accessible :body, :date, :feature, :poster, :title, :photo, :photo_file_name, :photo_content_type, :photo_file_size, :photo_updated_at

  has_attached_file :photo, :styles => { :medium => "300x300>", :thumb => "100x100>" },
                :url  => "/assets/posts/:id/:style/:basename.:extension",
                :path => ":rails_root/public/assets/posts/:id/:style/:basename.:extension"
end 
```

更新后编辑：

您的数据库和回形针设置不匹配。将所有列更改为 photo_x 或更改将照片设置为图像的设置。

# c# - SelectList 的 defaultValueItemLabel 是做什么用的？

> ID：15735941
> 
> 赞同：3
> 
> 时间：2013-03-31T23:56:34.870
> 
> 标签：c#, asp.net, web-applications, enterprise-web-library

当我创建一个新的 SelectList 时，我（有时只是想）在`SelectList.CreateDropDown()`. 评论说

> 默认值项的标签，它将首先出现，并且仅当没有列表项的 ID 具有默认值时。不要传递空值。如果传递空字符串，则不会出现默认值项。

但是我的 SelectList 是类型`int?`，无论如何我必须将 selectedItemId 传递给它。那么它在谈论什么“默认”值？如果我必须传递选定的值，怎么会有默认值？我猜想`defaultvalueItemLabel`当您希望用户能够选择基于可空类型的 SelectList 的空值时使用它。但如果这是真的，那我为什么还要指定`placeholderIsValid: true`呢？现在我将有两个用户可以选择的选项允许他们选择 null？这什么时候有用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:54:27.967

单词*default* in`defaultValueItemLabel`指的是 ID 数据类型的默认值，它`null`适用于所有引用类型，如`int?`.

您是正确的，`defaultValueItemLabel`并且`placeholderIsValid`都用于添加具有 ID 类型默认值的项目。但是它们在此项目的显示方式上有所不同。使用`defaultValueItemLabel`，该项目将看起来正常。使用`placeholderIsValid: true`，该项目将显示为*占位符*，这意味着它将具有灰显、褪色的外观，而不是看起来像其他项目。而且，一旦选择了另一个项目，就会出现一个 X 按钮，让用户将下拉菜单重置回占位符。

如果同时指定`defaultValueItemLabel`and `placeholderIsValid: true`，则前者优先，如`placeholderIsValid`文档中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:26:33.890

如果您想要一个额外的选项（例如“Other”），除了让所有其他 null 项可用之外，您还需要指定 placeholderIsValid 标志，并最终将所有这些解释为“Other”选择. 不是很优雅，但可能对某人有用。

我说，最好提供所有可能的功能，而不是让其中一些功能相互排斥。

# php - 忘记密码页面、电子邮件/用户名表格和新密码表格

> ID：15735943
> 
> 赞同：-1
> 
> 时间：2013-03-31T23:56:52.043
> 
> 标签：php, mysql, forgot-password

基本上，如果用户访问该页面，他们会得到一个输入用户名的表单。然后检查数据库，然后将生成的密钥添加到数据库中的行，并将密钥链接通过电子邮件发送给他们。该链接将他们带回到同一页面，但以不同的形式要求更新他们的密码。

这就是我的问题所在。该脚本首先检查该密钥是否存在。即使它确实存在，我也会不断收到 uh oh key does not exist 错误。读了几遍，休息了一下，还是看不懂。希望这里有人能抓住这个问题！

问题片段：

```
<?php
  if ($_GET['do'] == "password") {
    $forgetKeyEmail = mysql_real_escape_string($_GET['key']);

    if ($forgetKeyEmail !== "") {
      $keyQuery = mysql_query("SELECT * FROM users WHERE forgetKey = '$forgetKeyEmail' LIMIT 1");
      $keyCheck - mysql_num_rows($keyQuery);

      if ($keyCheck == 1) {
      ?>

        form goes here to update password

      <?php
        if ($_GET['do'] == "update") {
          $hasher = new PasswordHash(10, false);
          $resetPasswdord = $hasher->HashPassword(mysql_real_escape_string($_POST['inputPassword']));
          $resetPassword = $_POST['inputPassword'];

          if ($_POST['inputPassword'] !== "") {
            mysql_query("UPDATE users SET password = '$resetPassword' WHERE forgetKey = '$forgetKeyEmail'");
            echo "g";
          ?>
success message
          <?php
          }
          else {
          ?>
          empty field message
          <?php
          }
        }
      }
      else{
      ?>
incorrect key message (what I keep getting)
      <?php
      }
    }
  } 
```

完整代码：

```
<?php
      if ($_GET['do'] == "password") {
        $forgetKeyEmail = mysql_real_escape_string($_GET['key']);

        if ($forgetKeyEmail !== "") {
          $keyQuery = mysql_query("SELECT * FROM users WHERE forgetKey = '$forgetKeyEmail' LIMIT 1");
          $keyCheck - mysql_num_rows($keyQuery);

          if ($keyCheck == 1) {
          ?>

            <form method="POST"class="form-horizontal" action="?do=update&key=<?php echo $forgetKeyEmail; ?>" >
              <div class="control-group">
                <label class="control-label" for="inputPassword">New Password</label>
                <div class="controls">
                  <input type="text" id="inputPassword" name="inputPassword" placeholder="Password">
                </div>
              </div>
              <div class="control-group">
                <div class="controls">
                  <button type="submit" class="btn btn-primary">Reset!</button>
                </div>
              </div>
            </form>

          <?php
            if ($_GET['do'] == "update") {
              $hasher = new PasswordHash(10, false);
              $resetPasswdord = $hasher->HashPassword(mysql_real_escape_string($_POST['inputPassword']));
              $resetPassword = $_POST['inputPassword'];

              if ($_POST['inputPassword'] !== "") {
                mysql_query("UPDATE users SET password = '$resetPassword' WHERE forgetKey = '$forgetKeyEmail'");
                echo "g";
              ?>
              <div class="alert alert-success" style="margin:0;">
                <strong>Woooo!</strong> Your password has been changed, you can now <a href="login.php">login.</a>
              </div>
              <?php
              }
              else {
              ?>
              <div class="alert alert-error" style="margin:0;">
                <strong>Woops!</strong> You need to fill out a password!
              </div>
              <?php
              }
            }
          }
          else{
          ?>
          <div class="alert alert-error" style="margin:0;">
            <strong>Uh oh!</strong> That key is incorrect.
          </div>
          <?php
          }
        }
      }

      elseif ($_GET['do'] == "reset") {
        $resetUsername = mysql_real_escape_string($_POST['inputUser']);
        if ($resetUsername !== "") {
          $checkQuery = mysql_query("SELECT * FROM users WHERE username = '$resetUsername' LIMIT 1");
          $checkExist = mysql_num_rows($checkQuery);
          $userData = mysql_fetch_array($checkQuery);
          $mailEmail = $userData['email'];

          if ($checkExist == 1) {
            $forgetKey = genRandomString() . genRandomString();
            mysql_query("UPDATE users SET forgetKey = '$forgetKey' WHERE username = '$resetUsername'");

            $message = "Hey there, ".$resetUsername." - We've received a request to reset your password. <br /><br /> Please click the following link to do so: <a href=\"http://localhost/vanilla/forgot.php?do=reset&key=".$forgetKey."\"";

            echo $forgetKey;
            mail($mailEmail, 'realvanil.la Password Reset', $message);
          ?>

            <div class="alert alert-info" style="margin:0;">
              An email has been sent to <strong><?php echo $userData['email']; ?></strong> with your reset information!
            </div>

          <?php
          }
          else {
          ?>

            <div class="alert alert-error">
              <strong>Uh oh!</strong> We can't seem to find an account with that username. Remember, it's your Minecraft username!
            </div>

            <form method="POST"class="form-horizontal" action="?do=reset" >
              <div class="control-group">
                <label class="control-label" for="inputUser">Username</label>
                <div class="controls">
                  <input type="text" id="inputUser" name="inputUser" placeholder="Username">
                </div>
              </div>
              <div class="control-group">
                <div class="controls">
                  <button type="submit" class="btn btn-primary">Send Email!</button>
                </div>
              </div>
            </form>

        <?php
        }
      }
      else {
      ?>

      <div class="alert alert-error">
        <strong>Uh oh!</strong> You need to tell us your username ;)
      </div>

      <form method="POST"class="form-horizontal" action="?do=reset" >
        <div class="control-group">
          <label class="control-label" for="inputUser">Username</label>
          <div class="controls">
            <input type="text" id="inputUser" name="inputUser" placeholder="Username">
          </div>
        </div>
        <div class="control-group">
          <div class="controls">
            <button type="submit" class="btn btn-primary">Send Email!</button>
          </div>
        </div>
      </form>   

      <?php
        }
    }
    else {
    ?>

  <form method="POST"class="form-horizontal" action="?do=reset" >
    <div class="control-group">
      <label class="control-label" for="inputUser">Username</label>
      <div class="controls">
        <input type="text" id="inputUser" name="inputUser" placeholder="Username">
      </div>
    </div>
    <div class="control-group">
      <div class="controls">
        <button type="submit" class="btn btn-primary">Send Email!</button>
      </div>
    </div>
  </form>

  <?php
  }
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:20:51.810

您可能想要编辑您的脚本，使其没有任何语法错误。

```
$keyCheck - mysql_num_rows($keyQuery); 
```

改成

```
$keyCheck = mysql_num_rows($keyQuery); 
```

# java - 简单的计算器程序没有显示正确的输出

> ID：15735945
> 
> 赞同：-3
> 
> 时间：2013-03-31T23:56:57.700
> 
> 标签：java, android

我有一些简单的代码，我在`EditText`字段中输入两个数字，将它们相加，然后将它们显示在`TextView`.

这是我的代码：

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello_world" 
    android:visibility="invisible"/>

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="32dp"
    android:ems="10"
    android:inputType="number" >

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/editText2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/editText1"
    android:layout_below="@+id/editText1"
    android:layout_marginTop="21dp"
    android:ems="10"
    android:inputType="number" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button1"
    android:layout_alignBottom="@+id/button1"
    android:layout_alignRight="@+id/editText2"
    android:text="Clear"
    android:onClick="Clicked" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText2"
    android:layout_marginTop="35dp"
    android:text="Total"
    android:onClick="Clicked" /> 
```

这是我的`Clicked`方法：

```
public void Clicked(View v) {    
    int  total; 
    EditText t1= (EditText)findViewById(R.id.editText1);
    EditText t2= (EditText)findViewById(R.id.editText2);
    TextView tv=  (TextView)findViewById(R.id.textView1);

    if(v.getId()==R.id.button1)
    {     
        total= Integer.parseInt(t1.getText().toString()+t2.getText().toString());
        tv.setText(total);
        tv.setVisibility(1);
    }
    else if (v.getId()==R.id.button2)
    {
        t1.setText("");
        t2.setText("");
    }
} 
```

我输入了两个数字，当我按下**清除**它工作正常但总按钮不添加。相反，会发生这种情况：

![在此处输入图像描述](https://i.stack.imgur.com/NJPGK.png)

这可能是我的整数转换有问题或逻辑有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T00:01:55.560

改变这个：

```
total= Integer.parseInt(t1.getText().toString()+t2.getText().toString()); 
```

对此：

```
int v1 = Integer.parseInt(t1.getText().toString());
int v2 = Integer.parseInt(t2.getText().toString());
total = v1 + v2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T05:27:15.473

它停止了，因为您可能正在将 Int 值设置为 TextView 的 setText。您需要将其转换为字符串

**textView.setText(CharSequence 文本)**

```
int v1 = Integer.parseInt(t1.getText().toString());
int v2 = Integer.parseInt(t2.getText().toString());
total = v1 + v2;
tv.setText(total+""); //this converts total to string
//tv.setText(total.toString());   //can use either 
```

# vb.net - 缩短论点的“路径”

> ID：15735948
> 
> 赞同：1
> 
> 时间：2013-03-31T23:57:37.283
> 
> 标签：vb.net, enums, arguments

我遇到的问题的一个简短示例：

```
Namespace ActivityLogger
    Public Class XmlLoggerWriter

        Enum XmlLoggerType
            Information
            Warning
            Fault
        End Enum

        Friend Shared Sub WriteToLog(ByVal Type As XmlLoggerType)
            'some code here
        End Sub

    End Class
End Namespace 
```

这是对上述子的调用：

```
Call WriteToLog(ActivityLogger.XmlLoggerWriter.XmlLoggerType.Information) 
```

如您所见，传递的参数很长，即使我已经导入了`XML_Writer.ActivityLogger.XmlLoggerWriter`.

我希望得到只是`XmlLoggerType.Information`部分，甚至只是`Information`。有什么办法可以缩短这个吗？因为这将在整个代码中大量使用，我喜欢它简单易读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:04:18.473

还导入`XmlLoggerWriter`：

```
Imports ActivityLogger.XmlLoggerWriter 
```

然后这个工作：

```
WriteToLog(XmlLoggerType.Information) 
```

如果您还导入

```
Imports ActivityLogger.XmlLoggerWriter.XmlLoggerType 
```

你甚至可以写

```
WriteToLog(Information) 
```

# delphi - 计算表中 2 个日期字段之间的天差

> ID：15735956
> 
> 赞同：-1
> 
> 时间：2013-03-31T23:58:45.550
> 
> 标签：delphi, delphi-xe2, delphi-xe

我似乎无法在网格中完成这项工作：

```
procedure TForm1.ABSQuery1CalcFields(DataSet: TDataSet);
begin
// if (ABSQuery1.FieldByName('START_DATE').AsDateTime > 0) and (ABSQuery1.FieldByName('END_DATE').AsDateTime > 0) then
//    ABSQuery1.FieldByName('DAYS').AsInteger:= Daysbetween(ABSQuery1.FieldByName('START_DATE').AsDateTime,ABSQuery1.FieldByName('END_DATE').AsDateTime)
//else
//    ABSQuery1.FieldByName('DAYS').Value := Null;

end; 
```

为此，我在查询中创建了一个额外的字段（整数类型）。但它不起作用。我得到：

> [dcc32 错误] Unit1.pas(64)：E2003 未声明的标识符：“Daysbetween”

简短地尝试了这个：

```
ABSQuery1.FieldByName('DAYS').Value := 
   IntToStr( 
      Daysbetween(ABSQuery1.FieldByName('START_DATE').AsDateTime, 
                  ABSQuery1.FieldByName('END_DATE').AsDateTime)
   ); 
```

但仍然没有。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:00:26.677

您需要将`System.DateUtils`单位添加到您的使用条款中。每当您缺少某个函数标识符时，请查看该函数的引用。在您的情况下，功能帮助显示为您缺少的单元[`DaysBetween`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.DateUtils.DaysBetween)的此功能的来源：`System.DateUtils`

```
uses
  System.DateUtils; 
```

这里突出显示，如何识别丢失的单元：

![在此处输入图像描述](https://i.stack.imgur.com/0p2Wt.png)

# jquery - 仅选中具有特定值的复选框

> ID：15735959
> 
> 赞同：4
> 
> 时间：2013-03-31T23:59:20.617
> 
> 标签：jquery

我试图只检查具有特定值的复选框。我知道如何获取值，我知道如何检查所有复选框，但我不知道如何只检查那些复选框，比如说“200”的值

我的示例代码：

```
<tr>
    <td><input class="chk_box" type="checkbox" value="200" /></td>
    <td class="code">200</td>
</tr>
<tr>
    <td><input class="chk_box" type="checkbox" value="0" /></td>
    <td class="code">0</td>
</tr>
<tr>
    <td><input class="chk_box" type="checkbox" value="0" /></td>
    <td class="code">0</td>
</tr>
<tr>
    <td><input class="chk_box" type="checkbox" value="200" /></td>
    <td class="code">200</td>
</tr>
<tr>
    <td><input class="chk_box" type="checkbox" value="300" /></td>
    <td class="code">300</td>
</tr>

<input type="checkbox" class="checkbox_200" label="check 200"  />check 200 
```

所以现在我需要 jQuery 代码来完成我的代码。我很感激任何帮助。

顺便提一句。有没有办法一次性检查“200”和“300”？

更新！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T00:03:55.000

您的复选框没有`value`属性，如果您想根据 TD 元素的文本内容来检查复选框，您可以使用`filter`方法。

```
$('td.code').filter(function(){
   var txt = this.textContent || this.innerText;
   return txt === '200' || txt === '300';  
}).prev().find('input').prop('checked', true); 
```

**更新**：

```
$('tr input[type=checkbox][value=200]').prop('checked', true); 
```

选择：

```
$('tr input[type=checkbox]').filter(function(){
   return this.value === '200' || this.value === '300';
}).prop('checked', true); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T00:08:57.980

您的复选框没有价值。旁边只有文字。尝试更改输入的代码和设置值。

```
<input class="chk_box" type="checkbox" value="200" /> 200
<br />
<input class="chk_box" type="checkbox" value="0" />0
<br />
<input class="chk_box" type="checkbox" value="0" />0
<br />
<input class="chk_box" type="checkbox" value="200" /> 200
<br />
<input class="chk_box" type="checkbox" value="300" /> 300 
```

你可以使用这个选择器：

```
input[type=checkbox][value="200"] 
```

对于 jquery，在 $("") 中使用它。

示例：http: [//jsbin.com/oyetit/1/edit](http://jsbin.com/oyetit/1/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T00:40:37.943

好的，我最终得到了这个解决方案，稍作修改并感谢@undefined：

```
var chk = $(this).attr('checked')?true:false;
$('tr input[type=checkbox][value=200]').attr('checked',chk); 
```

这使我可以选中/取消选中带有我感兴趣的值的复选框。

对于多个值也是如此：

```
var chk = $(this).attr('checked')?true:false;
$('tr input[type=checkbox]').filter(function(){
    return this.value === '200' || this.value === '300';
}).attr('checked',chk); 
```

# javascript - JavaScript 仅从字符串返回正则表达式

> ID：15735960
> 
> 赞同：0
> 
> 时间：2013-03-31T23:59:22.867
> 
> 标签：javascript, regex

这可能很简单，但我很难做到。考虑以下代码：

```
var string = 'testingT#$^%#$ESTING__--232'
string = string.match(/^\w*$/)
if (string != null)
{
    string = string.join('')
    string = string.toUpperCase()
}
$('#my-input').val(string) 
```

我想要做的是从 中删除所有不是字母数字或下划线的字符`string`，然后将该字符串转换为大写。

到目前为止，我这样做了，如果我不添加任何特殊字符，它就可以完美地工作，但是当我添加`-`或添加`^`它时，它会删除所有内容`#my-input`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T00:06:13.547

您可以一步完成：

```
string = string.replace(/[^\w]/g, '').toUpperCase();
console.log(string); //=> "TESTINGTESTING__232" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T00:06:59.020

```
var string = string.replace(/[^a-zA-Z_0-9]/g,'').toUpperCase() 
```

另外，你需要unicode吗？我的正则表达式只会匹配 az，而不是 åÉø。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T00:15:16.527

您需要在正则表达式中使用“全局”标志并删除匹配限制。

```
var str = 'testingT#$^%#$ESTING__--232';
str = str.match(/\w+/g);    
if (str !== null)
{
    str = str.join('');
    str = str.toUpperCase();
}
$('#my-input').val(str); 
```

# iphone - 尝试从滑动菜单中的 UITableView 选定单元格更新 UIView

> ID：15735962
> 
> 赞同：0
> 
> 时间：2013-03-31T23:59:36.950
> 
> 标签：iphone, ios, xcode, uitableview, storyboard

一直在研究这个并且被卡住了。I have a sliding menu in my app that is a UITableView and what I'd like to happen is that when a cell is selected the topView will be updated to a UINavigationController that loads my UICollectionView. 我正在使用情节提要，目前我有一个交叉淡入淡出的模式转场来加载新视图以实现功能目的。这是一个屏幕截图，任何帮助将不胜感激。我知道视图应该在函数中更新

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

最上面的 UIView 叫做 topLayer

此处提供屏幕截图：http: [//d.pr/i/idRo](http://d.pr/i/idRo)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T05:17:24.567

将手动触发的 segue 从 topview 连接到 UINavigationController 并给它一个标识符。使用该标识符如下：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    if (indexPath.row == 0) {
            [self performSegueWithIdentifier:@"topviewToNagivgationController"  sender:self];
        }
//else
    } 
```

# nlp - WordNet 词频使用

> ID：15735964
> 
> 赞同：0
> 
> 时间：2013-03-31T23:59:58.047
> 
> 标签：nlp, wordnet, word-frequency

是否有可能在 wordnet 或任何其他方式中知道最常用的词义。例如，“商品”一词可能更多地用于表示善意而不是“产品”。或者“钥匙”这个词更多地用于指代真正的钥匙而不是“解决方案”。例如，这个问题的关键是......

有这样的吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:40:52.883

词频有几个问题。表面词频只会告诉你一个词在语料库中出现的次数。

然而，要找到一个感知频率，它仍然是一个未标记语料库的未解决问题。（即在某个上下文中，一个词多少次指代某种意义？）。现在最好的办法是：

1.  计算一个有感觉标签的语料库的感觉频率，然后假设未标记的语料库上的感觉频率是相似的或
2.  使用 Word Sense Disambiguation 软件标记未标记的语料库，然后计算标记产品的感觉频率。然而，这是一种复杂的方法，因为大多数 WSD 软件仅使用已标记语料库中的最常见含义 (MFS) 即可。

# scala - Scala 中的十亿长度列表？

> ID：15735974
> 
> 赞同：0
> 
> 时间：2013-04-01T00:00:28.183
> 
> 标签：scala

就像负载测试一样，我在 Scala 中使用不同的数据结构。只是想知道如何工作甚至创建一个十亿长度的数组。1亿似乎没有问题，当然1,000,000,000这个数字并没有真正的魔力。我只是看看你能推多远。

我不得不在大多数测试中增加内存。`export JAVA_OPTS="-Xms4g -Xmx8g"`

```
// insanity begins ...
val buf = (0 to 1000000000 - 1).par.map { i => i }.toList
// java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

然而，预先分配一个 ArrayInt 效果很好。迭代和构建对象大约需要 9 秒。有趣的是，几乎用 ListBuffer 做任何事情似乎都会自动利用所有内核。但是，上面的代码不会完成（至少 8gb Xmx）。

我知道这不是一个常见的情况，我只是在胡闹。但是如果你必须把一些大的东西拉到内存中，有没有更有效的技术呢？具有类型的数组是否尽可能高效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:05:40.657

a 的每个元素开销`List`是相当大的。每个元素都保存在一个 cons 单元格 ( `case class ::`) 中，这意味着每个元素都有一个具有两个字段的对象。在 32 位 JVM 上，每个元素 16 个字节（不计算元素值本身）。在 64 位 JVM 上，它会更高。

`List`不是非常大的内容的好容器类型。它的主要特点是非常有效的头/尾分解。如果这是您需要的东西，那么您可能只需要处理内存成本。如果不是，请尝试选择更有效的表示。

对于它的价值，我认为内存开销考虑是证明使用`Array`. 使用数组有很多注意事项，所以如果你这样做要小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T00:10:17.617

鉴于 JVM 可以在内存中合理地安排 Ints 数组，如果您真的需要迭代它们，它确实是最有效的方法。如果你用 Java 做同样的事情，它会生成几乎相同的代码。

# javascript - JavaScript / mongoose - 循环遍历数组以创建对象数组

> ID：15735975
> 
> 赞同：0
> 
> 时间：2013-04-01T00:00:33.810
> 
> 标签：javascript, node.js, mongoose

目前我有一个存储在数组中的团队 ID 列表`teamIds`。我的猫鼬模式中还有一个函数`findByKey`，`Team`它可以根据其键找到一个团队。正如您从代码中看到的那样，我必须将每个新的都`Team.findByKey`放在前一个中，如果我把它放在前一个 findByKey 之外，它就不能正常工作。

我在将`Team.findByKey`方法放入某种 for 循环时遇到问题，该循环可以遍历数组`teamIds`和数组中的每个循环`Team`。我正在开发创建新锦标赛的功能，其想法是您将一组 teamIds 传递到此处，并循环遍历每个 ID，搜索该团队并将其添加到`teamsList`数组中以创建锦标赛。

我需要将创建`Team`对象数组的最后一点代码放入我的问题的最后一个`Team.findByKey`方法中。我将如何解决这个问题，以便我可以传递`n`多个团队并找到每个团队并将其存储为数组`Teams`？

这是我的代码：

```
 app.get('/tournament', function(req, res){
    function genMatches(nTeams) {
      var matchArray = [];
      while (nTeams > 1) {
          nTeams = nTeams >> 1;
          var matches = [];
          for (var i = 0; i < nTeams; ++i) {
              matches.push([]);
          }
          matchArray.push(matches);
      }
      return matchArray;
    }

    var teamIds = [
      1364472344972,
      1363173222886,
      1363007586845,
      1363007557484
    ]

    var tournamentName = 'My Tournament';

    Team.findByKey(teamIds[0], function(err, team1) {
        if(err) {
          util.log("Error occured");
        }
        if(!team1) { 
          util.log("The team does not exist");
        }
        Team.findByKey(teamIds[1], function(err, team2) {
          if(err) {
            return util.log("Error occured");
          }
          if(!team2) { 
            return util.log("The team does not exist");
          }
          Team.findByKey(teamIds[2], function(err, team3) {
            if(err) {
              return util.log("Error occured");
            }
            if(!team3) { 
              return util.log("The team does not exist");
            }
            Team.findByKey(teamIds[3], function(err, team4) {
              if(err) {
                return util.log("Error occured");
              }
              if(!team4) { 
                return util.log("The team does not exist");
              }
              var teamList = [
                team1._id,
                team2._id,
                team3._id,
                team4._id
                ];

              var numRounds = Math.log(teamList.length)/Math.log(2);

              var matches = genMatches(teamList.length);
              for(var i = 0; i < matches[0].length; i++){
                matches[0][i] = [ teamList[i+i], teamList[i+(i+1)] ]
              }

              var tournament = new Tournament({
                name: tournamentName,
                teams: teamList,
                rounds: numRounds,
                matches: matches
              });

              res.send(tournament);

            });
          });
        });
      });
  }); 
```

团队架构：

```
'use strict';

var util = require('util');
var mongoose = require('mongoose');
var Schema = mongoose.Schema;

var validatePresenceOf = function(value){
  return value && value.length; 
};

var toLower = function(string){
  return string.toLowerCase();
};

var getId = function(){
  return new Date().getTime();
};

/**
  * The Team schema. we will use timestamp as the unique key for each team
  */
var Team = new Schema({
  'key' : {
    unique : true,
    type : Number,
    default: getId
  },
  'name' : { type : String,
              validate : [validatePresenceOf, 'Team name is required'],
              index : { unique : true }
            }
});

/**
  * Get complete team details for all the teams
  */
Team.statics.getAll = function(cb){
  var query = this.find({});
  query.sort({key : -1});
  return query.exec(cb);
};

Team.statics.findByKey = function(key, cb){
  return this.find({'key' : key}, cb);
};

Team.statics.findByName = function(name, cb) {
  return this.find({'name' : name}, cb);
};

module.exports = mongoose.model('Team', Team); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:40:09.840

您可以使用[`$in`](http://docs.mongodb.org/manual/reference/operator/in/#op._S_in)运算符在一个查询中查找您的四个团队：

```
Team.find({key: {$in: teamIds}}, function (err, teams) {
  ...
}); 
```

如果由于某种原因您需要`findByKey`多次调用而不是将其全部折叠成一个`$in`，请查看使用`async`库的[`each`](https://github.com/caolan/async#each)方法来更干净地执行此操作。

# compiler-construction - 检测单个语句引发的潜在 FPU 条件

> ID：15735984
> 
> 赞同：3
> 
> 时间：2013-04-01T00:01:29.360
> 
> 标签：compiler-construction, posix, fpu

我[`fenv`](http://pubs.opengroup.org/onlinepubs/009604599/basedefs/fenv.h.html)用来查找产生溢出、下溢、不精确结果等的语句。

但是，我是否正确假设编译器可以对我的代码重新排序而不实现我真正想要的效果？如果是这样，我将如何在`fe*`函数周围创建一个“障碍”（这样做的标准化方法的奖励积分？）我可以在某个地方放置一个*volatile*块吗？

如果可以的话，我会测试这个，但我不确定如何。

例子：

```
void some_function(double d) {
float f;

feclearexcept(FE_ALL_EXCEPT)
f = d; /* will the relevant code for this statement be inserted exactly here? */
if (fegetexcept(FE_ALL_EXCEPT))
    printf("FP condition raised during conversion from double to float.\n");
}

/* desired behaviour: */
some_function(DBL_MAX); /* should cause printf to execute */
some_function(FLT_MAX); /* should not cause printf to execute */ 
```

**编辑：**

同时，我使用 volatile 块实际上是创建一个屏障。

```
feclearexcept(FE_ALL_EXCEPT);

__asm__ volatile(
  "flds %2\n\t"
  "faddp\n\t"
  : "=&t" (result)
  : "f" (src1),
    "m" (src2)
);

if (fetestexcept(FE_ALL_EXCEPT))
  ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:36:20.843

有趣的问题！我发现[这个页面](http://answers.yahoo.com/question/index?qid=20110819044633AAvkUy9)讨论了这个话题，它说添加

```
#pragma STDC FENV_ACCESS ON 
```

将在符合 C99 的编译器上做正确的事情……不包括 gcc。不过，您似乎对 volatile 变通办法是正确的。

该页面指向几个 gcc 错误，[其中一个](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=38960)有一个演示该问题的测试程序。

# r - 如何在向量的元素之间随机分配数字？在 R 中

> ID：15735987
> 
> 赞同：2
> 
> 时间：2013-04-01T00:01:58.520
> 
> 标签：r, random, vector

这是我的问题。

假设我有一个向量：

```
vec <- c("a","b","c","d","e","f") 
```

我想在我的向量的元素中随机分配 6 个值，有时一个元素会得到一些东西（在 1 和 6 之间），有时什么也得不到，但值的总和必须总和为 6。所以在例如，值将像这样分布：

```
3,0,1,0,2,0 
```

在另一个这样的：

```
1,0,1,1,2,1 
```

等等。

在 R 中有没有简单的方法来做到这一点？

非常感谢你。

蒂娜。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T00:18:37.253

**编辑：**

这更好，因为它几乎肯定会产生具有您期望的相对频率的各种分区：

```
as.vector(rmultinom(1, size=length(vec), prob=rep(1, length(vec))))
# [1] 4 0 1 0 1 0 
```

* * *

您在此处所追求的组合对象称为[“分区”](http://en.wikipedia.org/wiki/Partition_%28number_theory%29)。**partitions**包包含许多漂亮的函数，用于生成不同风格的分区。稍微调整一下`parts()`函数的输出，我们就能得到你想要的东西。

```
library(partitions)

## Create a function
randPartition <- function(vec) {
    pp <- parts(length(vec))
    sample(pp[,sample(ncol(pp), 1)])
}

## Try it out a few times
randPartition(vec)
# [1] 1 1 1 1 1 1
randPartition(vec)
# [1] 2 0 0 2 0 2
randPartition(vec)
# [1] 0 0 0 0 0 6 
```

# shell - 尝试将 IF ELSE 嵌套到 cmd.exe 中的 IF EXIST

> ID：15735990
> 
> 赞同：1
> 
> 时间：2013-04-01T00:02:17.423
> 
> 标签：shell, batch-file, cmd

这是我拥有的代码：

```
IF EXIST %CD%\tictactoeXwinlog.log (
  ECHO %xwinlog% > tictactoeXwinlog.log
  ) ELSE (
    IF %xwinlog% > 0 (
ECHO %xwinlog% > %CD%\tictactoeXwinlog.log
) ELSE (
  ECHO 0 > %CD%\tictactoeXwinlog.log
  ) 
```

我试图用简单的英语做的是检查日志文件是否存在。如果是，则将变量 %xwinlog% 的当前值写入日志，覆盖其中的任何内容。如果它不存在，我希望它确保变量的值高于 0，如果是，则将其写入日志文件，如果不高于零，则将零写入日志文件。最后一部分是因为无论出于何种原因，当它尝试将变量写入日志并且变量为 0 时，它改为写入“ECHO 已关闭”

我得到的是一个错误，说“）此时是意外的”

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T00:54:52.390

1.  正如亚历克斯指出的那样，缺少封闭的括号是一个问题。
2.  另一个问题是 > 是一个重定向符号。使用 GTR 进行算术比较。
3.  在比较中使用“%CD%\tictactoeXwinlog.log”等表达式时请使用引号，以防 %CD% 中有空格。
4.  我认为导致您必须“检查 0”的问题实际上是 xwinlog 是空白的，这导致 echo 语句显示 ECHO 状态（开/关）。这就是为什么我总是使用 ECHO。有些人使用 ECHO：
5.  如果 xwinlog 是一个数值，那么您的代码可以简化为：

    ```
    IF NOT %xwinlog% gtr 0 SET xwinlog=0
    ECHO %xwinlog% > tictactoeXwinlog.log 
    ```

6.  如果 winlog 是一个字符串值，那么您的代码可以简化为：

    ```
    IF "%xwinlog%"=="" SET xwinlog=0 or Any string of your choice... like Not Found
    ECHO %xwinlog% > tictactoeXwinlog.log 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T00:10:07.790

我猜是缺少括号。

```
IF EXIST %CD%\tictactoeXwinlog.log (
  ECHO %xwinlog% > tictactoeXwinlog.log
) ELSE (
  IF %xwinlog% > 0 (
    ECHO %xwinlog% > %CD%\tictactoeXwinlog.log
   ) ELSE (
     ECHO 0 > %CD%\tictactoeXwinlog.log
   )
) 
```

# java - Jsoup - 提取标签：命名空间

> ID：15735991
> 
> 赞同：2
> 
> 时间：2013-04-01T00:02:40.260
> 
> 标签：java, android, jsoup

我在使用 Jsoup 从网页中提取一些数据时遇到问题。

这是代码：

```
<fb:comments-count href="" fb-xfbml-state="rendered" class=" fb_comments_count_zero">
<span class="fb_comments_count">0</span></fb:comments-count> 
```

而且，我正在尝试将其提取`0`到`fb_comments_count class`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:24:29.340

你真的需要这个`fb:comments-count`标签吗？您可以`span.fb_comments_count`使用 `doc.select("span.fb_comments_count") 直接选择。

但是，如果您需要外部标签：

```
Document doc = ...

Element commentsCount = doc.select("fb|comments-count > span.fb_comments_count").first();

System.out.println(commentsCount.text()); 
```

这将打印第*一个*匹配标签的值。如果您需要*所有*这些，请改用循环。

# java - 从两台机器传输代码

> ID：15735992
> 
> 赞同：1
> 
> 时间：2013-04-01T00:02:41.037
> 
> 标签：java, error-handling, polygon

因此，我正在与合作伙伴一起为 Java 相关项目编写代码，但是当他向我发送他的代码时，没有任何工作正常。我将这个问题扩大到与从两个不同的 Eclipse 环境传输代码相关的所有事情。我相信我们都在运行 1.6。

程序本身应该打开一个黑色背景的 JFrame，顶部有三个按钮（加载、读取、清除），并根据点击制作直线，右键单击时关闭形状。它在他的 Mac 上运行良好，但在我的 Mac 上运行良好。我们都在使用 Eclipse。（我也在 Dr. Java 上测试过）。

我们是新手，所以要温柔:)

这是问题：

他编译点击几下后：（我不能上传图片没有10的代表） [http://i49.tinypic.com/nwwsqf.jpg](http://i49.tinypic.com/nwwsqf.jpg) 我编译后：http: [//i50.tinypic.com/2lxdkyg.png](http://i50.tinypic.com/2lxdkyg.png)

谢谢您的帮助。我希望这对其他人也有帮助。

这是代码：

```
 import java.awt.BorderLayout;
    import java.awt.Color;
    import java.awt.Graphics;
    import java.awt.Image;
    import java.awt.Point;
    import java.awt.Rectangle;
    import java.awt.Shape;
    import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.geom.GeneralPath;
import java.awt.image.ImageObserver;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintStream;
import java.text.AttributedCharacterIterator;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class PolygonMaker extends JFrame {

    private List<Polygon> polygonList = new ArrayList<Polygon>();
    public Polygon polygonInProgress = new Polygon();
    JPanel drwaingPanel;
    JPanel buttonsPanel;

    public PolygonMaker() {
        polygonList.add(polygonInProgress);
    }

    public static void main(String srg[]) {

        new PolygonMaker().generateDrwaingArea();

    }

    public void generateDrwaingArea() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(this);
        setLayout(new BorderLayout());
        setSize(500, 500);
        setResizable(false);
        setLocation(400, 300);
        setTitle("Polygon Maker");
        setVisible(true);
        addMouseListener(new MouseListener() {

            @Override
            public void mouseReleased(MouseEvent e) {
                // TODO Auto-generated method stub

                if (e.getButton() == MouseEvent.BUTTON1) {
                    polygonInProgress.add(new Point(e.getX(), e.getY()));
                    System.out.println("clicked");
                } else if (e.getButton() == MouseEvent.BUTTON3) {
                    boolean fill = e.isShiftDown();
                    System.out.println("shift pressed");
                    if (polygonInProgress.size() > 2) {
                        recordPolygon(fill);
                        polygonInProgress = new Polygon();
                        polygonList.add(polygonInProgress);
                    }
                }
                repaint();
            }

            @Override
            public void mousePressed(MouseEvent e) {
                // TODO Auto-generated method stub

            }

            @Override
            public void mouseExited(MouseEvent e) {
                // TODO Auto-generated method stub

            }

            @Override
            public void mouseEntered(MouseEvent e) {
                // TODO Auto-generated method stub

            }

            @Override
            public void mouseClicked(MouseEvent e) {
                // TODO Auto-generated method stub

            }
        });

        buttonsPanel = createButtonsPanel();

        drwaingPanel = new JPanel();
        drwaingPanel.setBackground(Color.black);

        add(buttonsPanel, BorderLayout.NORTH);
        add(drwaingPanel, BorderLayout.CENTER);
    }

    public JPanel createButtonsPanel() {
        JButton loadData = new JButton("Load Data");
        JButton clear = new JButton("Clear");
        loadData.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {

                File poly = new File(
                        "C:\\Users\\Raghav\\Desktop\\poly.dat");
                try {
                    Scanner scanner = new Scanner(poly);
                    Object options[] = { "Ok", "Cancel" };
                    int selection = JOptionPane
                            .showOptionDialog(
                                    new JFrame(),
                                    "Loading File overides current data .Continue loading?",
                                    "Loading File overides current data .Continue loading?",
                                    JOptionPane.OK_CANCEL_OPTION,
                                    JOptionPane.INFORMATION_MESSAGE, null,
                                    options, options[1]);

                    if (selection == JOptionPane.OK_OPTION) {
                        remove(drwaingPanel);                       
                        remove(buttonsPanel);
                        drwaingPanel = new JPanel();
                        drwaingPanel.setBackground(Color.black);                        
                        buttonsPanel = createButtonsPanel();
                        add(drwaingPanel, BorderLayout.CENTER);                     
                        add(buttonsPanel, BorderLayout.NORTH);
                        validate();
                        polygonList = new ArrayList<Polygon>();
                        while (scanner.hasNextLine()) {

                            String line = scanner.nextLine();
                            Polygon polygon = new Polygon();
                            int numberOfPoints = Integer.parseInt(line
                                    .substring(0, line.indexOf(32)));
                            line = line.substring(line.indexOf(32) + 1);
                            String fillStatus = line.substring(0,
                                    line.indexOf(32));
                            System.out.println(fillStatus);
                            if (fillStatus.equals("false"))
                                polygon.setFillStatus(false);
                            else if (fillStatus.equals("true"))
                                polygon.setFillStatus(true);
                            line = line.substring(line.indexOf(32) + 1);
                            String isCompleted = line.substring(0,
                                    line.indexOf(32));
                            System.out.println(isCompleted);
                            if (isCompleted.equals("false"))
                                polygon.setFillStatus(false);
                            else if (isCompleted.equals("true"))
                                polygon.setFinished(true);
                            line = line.substring(line.indexOf(32) + 1);
                            String redValue = line.substring(0,
                                    line.indexOf(32));
                            System.out.println(redValue);
                            line = line.substring(line.indexOf(32) + 1);
                            String greenValue = line.substring(0,
                                    line.indexOf(32));
                            System.out.println(greenValue);
                            line = line.substring(line.indexOf(32) + 1);
                            String yellowValue = line.substring(0,
                                    line.length());
                            System.out.println(yellowValue);

                            polygon.color = new Color(Integer
                                    .parseInt(redValue), Integer
                                    .parseInt(greenValue), Integer
                                    .parseInt(yellowValue));

                            for (int i = 0; i < numberOfPoints; i++) {
                                line = scanner.nextLine();
                                int x = Integer.parseInt(line.substring(0,
                                        line.indexOf(32)));
                                line = line.substring(line.indexOf(32) + 1);
                                int y = Integer.parseInt(line.substring(0,
                                        line.length()));
                                polygon.add(new Point(x, y));
                            }

                            polygonList.add(polygon);

                        }

                        polygonInProgress= new Polygon();
                        polygonList.add(polygonInProgress); 

                        validate();

                    }

                } catch (FileNotFoundException e1) {
                    // TODO Auto-generated catch block
                    JOptionPane.showMessageDialog(new JFrame(),
                            "Cannot find poly.dat");
                }

                validate();

            }
        });
        JButton saveData = new JButton("Save Data");
        saveData.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                File poly = new File("C:\\Users\\Raghav\\Desktop\\poly.dat");

                try {
                    BufferedWriter bufferedWriter = new BufferedWriter(
                            new FileWriter(poly));
                    for (Polygon polygon : polygonList) {
                        try {

                            bufferedWriter.write(polygon.size() + " "
                                    + polygon.isFilled() + " "
                                    + polygon.isFinished() + " "
                                    + polygon.color.getRed() + " "
                                    + polygon.color.getGreen() + " "
                                    + polygon.color.getBlue());
                            bufferedWriter.newLine();

                            for (int i = 0; i < polygon.size(); i++) {
                                bufferedWriter
                                        .write(polygon.getPoints().get(i).x
                                                + " "
                                                + polygon.getPoints().get(i).y);
                                bufferedWriter.newLine();
                            }

                        } catch (IOException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        }
                    }
                    bufferedWriter.close();
                } catch (FileNotFoundException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                } catch (IOException e2) {
                    // TODO Auto-generated catch block
                    e2.printStackTrace();
                }

            }
        });

        clear.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("clear called");
                remove(drwaingPanel);
                drwaingPanel = new JPanel();
                drwaingPanel.setBackground(Color.black);
                add(drwaingPanel, BorderLayout.CENTER);
                remove(buttonsPanel);
                buttonsPanel = createButtonsPanel();
                add(buttonsPanel, BorderLayout.NORTH);
                validate();
                polygonList = new ArrayList<Polygon>();
                polygonInProgress = new Polygon();
                polygonList.add(polygonInProgress);

            }
        });

        JPanel buttonsPanel = new JPanel();
        buttonsPanel.setBackground(Color.black);
        buttonsPanel.add(loadData);
        buttonsPanel.add(saveData);
        buttonsPanel.add(clear);

        return buttonsPanel;

    }

    public void paint(Graphics g) {
        for (Polygon polygon : polygonList)
            polygon.paintComponent(g);
    }

    private void recordPolygon(boolean fill) {
        // TODO Auto-generated method stub

        polygonInProgress.setFillStatus(fill);
        polygonInProgress.setFinished(true);
        remove(buttonsPanel);
        remove(drwaingPanel);
        drwaingPanel = new JPanel();
        drwaingPanel.setBackground(Color.black);
        buttonsPanel = createButtonsPanel();
        add(drwaingPanel, BorderLayout.CENTER);
        add(buttonsPanel, BorderLayout.NORTH);
        validate();
        repaint();

        // polygonList.add(polygonInProgress);
        JOptionPane.showMessageDialog(this, "New " + polygonInProgress.size()
                + "-gon recorded \n " + (polygonList.size())
                + " polygons in all");

    }

} 
```

和...

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Paint;
import java.awt.Point;
import java.io.PrintStream;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;
import java.util.Scanner;

public class Polygon {

    static final int POINT_SIZE = 0;
    static Random rnd = new Random();
    private List<Point> points = new ArrayList<Point>();
    public Color color = new Color(rnd.nextInt(255), rnd.nextInt(255),
            rnd.nextInt(255));
    private boolean isFilled = false;
    private boolean isFinished = false;
    private Point lastPointOfPloygon;

    public Polygon() {

    }

    public void write(PrintStream ps) {

    }

    public void read(Scanner scanner) {

    }

    public boolean isFinished() {
        return isFinished;

    }

    public boolean isFilled() {
        return isFilled;

    }

    public List<Point> getPoints() {
        return points;
    }

    public void setFilled(boolean isFilled) {
        this.isFilled = isFilled;
    }

    public void setFillStatus(boolean status) {
        isFilled = status;
    }

    public void paintComponent(Graphics g) {
        System.out.println("paint commponebt calles");
        g.setColor(color);
        for (int i = 0; i < points.size(); i++) {

            if (i == points.size() - 1) {
                System.out.println("last point");
                if (isFinished == true) {
                    System.out.println(isFinished + "connect");
                    if (isFilled == true) 
                    g.fillOval(points.get(i).x, points.get(i).y, 5, 5);
                    g.drawLine(points.get(i).x, points.get(i).y,
                            points.get(0).x, points.get(0).y);
                }
            } else {
                if (isFilled == true) 
                    g.fillOval(points.get(i).x, points.get(i).y, 5, 5);
                    g.drawLine(points.get(i).x, points.get(i).y,
                            points.get(i + 1).x, points.get(i + 1).y);

            }
        }
    }

    public int size() {
        return points.size();
    }

    public void add(Point point) {
        points.add(point);

    }

    public void setFinished(Boolean finishedValue) {
        isFinished = finishedValue;
    }

    @Override
    public String toString() {
        return null;

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T00:14:00.043

这可能不起作用有几个原因：

1.  该代码（假设它适用于您的合作伙伴）可能无法识别某些导入。当您在 eclipse 中键入时，它会在您键入时导入您需要的导入，即使您重新导入它也可能看不到它需要的地方，如果这是问题，请尝试将鼠标悬停在红色概述的代码上并选择修复.
2.  他/她可能正在导入和/或引用您没有的东西。这可能是因为您的某个版本关闭或附加组件有而另一个没有，只需让他/她解决这个问题。
3.  为了传输java代码（使用eclipse），我个人复制了我分配给它的整个工作空间折叠，而不仅仅是它自己的代码，这也将确保他们拥有所需的所有依赖文件（如果是游戏，则如图像或声音文件） .
4.  如果您运行的是不同版本的 Mac OS，它也会影响 java 代码，但这不太可能，我在编程时倾向于使用 windows 或 Linux，所以我不知道 Mac 版本可能存在的所有细微差异。

如果您有文件共享服务器、工作站或其他同时编写代码的方式，您可以尝试将您的项目导入到那里，这样这个问题就不会再次发生。很高兴见到新的程序员，保持下去，永远不要害怕提出问题，这个网站上的每个人都非常乐意提供帮助！祝你的项目好运:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T00:32:42.790

您的代码和您的合作伙伴在 MacOS 上的一个潜在差异必须是您在代码中的两个位置指定文件的路径：

C:\Users\Raghav\Desktop\poly.dat

如果写入文件时出现问题，则会发生异常。相同的文件名在代码中使用了两次，即使这是“测试代码”，最好指定一次文件名：

```
static final String DATA_FILE = "C:\\Users\\Raghav\\Desktop\\poly.dat"; 
```

并参考代码中的 DATA_FILE。

问题可能不是这个，不幸的是，您的问题对问题的性质非常模糊，您说“没有任何效果”或者“在他的 Mac 上运行良好，但在我的 Mac 上运行良好”。这就是 Code-Guru 和 knowbody 一直在问的问题。如果您能详细说明问题，我们可能会给出更好的答案。例如：程序没有运行吗？程序是否因异常而崩溃，异常是什么？程序是否没有按预期运行（它做了什么，它应该做什么）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T00:20:10.553

嗯...没什么问题...但是如果您正在寻找有关如何在两个人之间编辑代码的提示，我建议您使用可以通过 ssh 进入的终端和 vim。

# c++ - 通过 if else 在函数中定义变量

> ID：15735997
> 
> 赞同：0
> 
> 时间：2013-04-01T00:03:55.527
> 
> 标签：c++, visual-c++, variables, definition

请看下面的小代码：

```
void TestPluginAPI::MouseMove(int nX, int nY)
{
    INPUT input;
    DOUBLE fScreenWidth = GetSystemMetrics( SM_CXSCREEN )-1; 
    DOUBLE fScreenHeight  = GetSystemMetrics( SM_CYSCREEN )-1; 
    int plusY;
    if (FullScreenCheck() == 1) {int plusY = getmidY() + 8.0f;}
    else {int plusY = getmidY();}
    int plusX = getmidX();
    DOUBLE fX = plusX*(65535.0f/fScreenWidth) + (nX*(65535.0f/fScreenWidth));
    DOUBLE fY = plusY*(65535.0f/fScreenHeight) + (nY*(65535.0f/fScreenHeight));

    RtlZeroMemory(&input, sizeof(input));
    input.type = INPUT_MOUSE;
    input.mi.dwFlags = MOUSEEVENTF_MOVE|MOUSEEVENTF_ABSOLUTE;
    input.mi.dx = (LONG)fX;
    input.mi.dy = (LONG)fY;

    SendInput(1, &input, sizeof(input));
} 
```

问题是编译器给了我一个`plusY`未定义的警告，显然如果我尝试在已编译的插件中运行此函数（它来自插件代码，通过浏览器中的 javascript 控制台调试它）它会崩溃，因为`plusY`未定义。

看来如果我不能通过if-else在函数中定义变量，那我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T00:04:59.447

```
{int plusY = getmidY() + 8.0f;} 
```

`int plusY``}`在两个 if 语句中都停止存在

`int plusY`括号内是与外部`{}`不同的变量。`int plusY`

你应该做这个

```
int plusY;
if (FullScreenCheck() == 1) {plusY = getmidY() + 8.0f;}
else {plusY = getmidY();} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T00:20:24.013

在一个分支中定义的变量`if`仅具有该分支的范围。即使您消除了大括号（这在此处是合法的）：

```
if ( fullScreenCheck() == 1 )
    int plusY = getmidY() + 8.0f;
else
    int plusY = getmidY(); 
```

将导致 a`plusY`其范围在`if`.

处理此问题的最佳方法是：

```
int plusY = fullScreenCheck() == 1
            ? getmidY() + 8.0f
            : getmidY(); 
```

由于您可以在单个表达式中执行的操作受到限制，因此并非总是可以执行此操作，但只要您可以，它就会产生更具可读性的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T00:06:39.707

`plusY`在 if 语句的右大括号处从内存中销毁。如果您需要在 if 语句之后使用它，那么您应该在块*外声明它：*

```
int plusY;

if (...)
{
    plusY = getmidY() + 8.0f;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T00:06:41.767

```
int plusY; 
```

您已经声明了一个名为的变量，该变量`plusY`可用于您的整个函数

```
if (FullScreenCheck() == 1) {int plusY = getmidY() + 8.0f;} 
```

这声明*了另一个*变量，它也恰好是命名`plusY`的，但是这个新变量只在`if`语句内部可用。

```
else {int plusY = getmidY();} 
```

现在你声明了*第三个*同名的变量，它只在`else`子句中可用。

要解决此问题并在所有位置使用相同的变量，请将您的代码更改为

```
int plusY;
if (FullScreenCheck() == 1) {plusY = getmidY() + 8.0f;}
else {plusY = getmidY();} 
```

ps 顺便说一句，您应该了解典型的代码格式化实践和约定。

pps 您还应该初始化`plusY`一个无效的值，以便您可以轻松追踪任何问题。或者，您可以使用三元运算符来完全避免此问题。在这种情况下，三元运算符很可能是最好的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T00:14:52.567

您的整个`if`/`else`可以用这一行替换（固定范围规则）。

```
int plusY = (FullScreenCheck() == 1) ? getmidY() + 8.0f : getmidY(); 
```

# iphone - iOS 5.0 的 Aviary SDK 问题 - objectAtIndexedSubscript

> ID：15735998
> 
> 赞同：0
> 
> 时间：2013-04-01T00:04:15.247
> 
> 标签：iphone, ios, aviary

我已经下载了最新的 Aviary 代码 2.6.0 并将其合并到我的 Xcode 4.2 中，用于运行 iOS 5.0 的 iPhone 4S。每次我启动 Aviary 操作时，我都会在下面看到 objectAtIndexedSubscript 的回溯显示。

我看到这篇文章“ iOS5[中是否提供 objectAtIndexedSubscript？](https://stackoverflow.com/questions/13391169/is-objectatindexedsubscript-available-in-ios5) ”并且 iOS 5.0 中没有 objectAtIndexedSubscript。在 Aviary 文档中，它说支持 iOS 5.0。我错过了什么？

所以这是我的问题。有没有人尝试为 iOS 5.0 合并最新的 Aviary 代码版本 2.6.0？如果不是适用于 iOS 5.0 的 Aviary SDK 版本是什么？我在哪里可以下载旧版本的 Aviary SDK。我只是还没准备好迁移到 iOS 6.0。我正在尝试将此错误报告给 Aviary 支持，但我感觉他们会告诉我升级到 iOS 6.0。

来自 Aviary 网站：

> 运行时要求 SDK 支持的最低 iOS 版本为 iOS 5.0。做出这种选择的主要原因是我们使用了 ARC（自动引用计数）以及我们对许多需要 iOS 5 的 Apple 框架和库的依赖。”

```
- (void) launchPhotoEditorWithImage:(UIImage *)editingResImage highResolutionImage:(UIImage *)highResImage
{    

    NSLog(@"launchPhotoEditorWithImage ...");

    // Initialize the photo editor and set its delegate
    AFPhotoEditorController * photoEditor = [[AFPhotoEditorController alloc] initWithImage:editingResImage];
    [photoEditor setDelegate:self];

    NSLog(@"Present photo editor ...");

    // Present the photo editor.
    [self presentViewController:photoEditor animated:YES completion:nil];
}

2013-03-31 19:32:14.953 Photo Editor[348:707] launchPhotoEditorWithImage ...
2013-03-31 19:32:15.421 Photo Editor[348:707] Present photo editor ...
2013-03-31 19:32:15.421 Photo Editor[348:3f03] -[__NSArrayM objectAtIndexedSubscript:]: unrecognized selector sent to instance 0x4ac5f0
2013-03-31 19:32:15.432 Photo Editor[348:3f03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM objectAtIndexedSubscript:]: unrecognized selector sent to instance 0x4ac5f0'
*** First throw call stack:
(0x36fbe8bf 0x3232e1e5 0x36fc1acb 0x36fc0945 0x36f1b680 0xb1a45 0x32933d55 0x32935dc7 0x32935c5d 0x32936867 0x37f5c1cf 0x37f5c0a4)
terminate called throwing an exception[Switching to process 9987 thread 0x2703]
[Switching to process 9987 thread 0x2703]
warning: Attempting to create USE_BLOCK_IN_FRAME variable with block that isn't in the frame.
kill
Current language:  auto; currently objective-c
quit
Program ended with exit code: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:05:39.520

只需更新到最新的 Xcode。在一些旧版本的 Xcode 中，`objectAtIndexedSubscript:`没有在 SDK 中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T01:24:43.067

添加这个家伙类别（从 gi​​thub 链接获取），它将完美运行

[http://cocoaisland.wordpress.com/2012/08/12/modern-objective-c-part-ii-container-subscripting/](http://cocoaisland.wordpress.com/2012/08/12/modern-objective-c-part-ii-container-subscripting/)