# StackOverflow 问答 12503000-12503999

# security - 什么工具可以测试我的服务器是否有慢动作攻击？

> ID：12503001
> 
> 赞同：0
> 
> 时间：2012-09-19T21:15:13.307
> 
> 标签：security

有什么好工具可以帮助我了解我的服务器是否受到了slowloris的攻击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:53:41.127

一种简单的方法是用来`netstat`检查打开的连接数：

```
$ netstat -nt
活跃的互联网连接（无服务器）
Proto Recv-Q Send-Q 本地地址 外部地址 状态      
tcp 0 0 127.0.0.1:5432 127.0.0.1:39521 已建立
tcp 0 0 127.0.0.1:5432 127.0.0.1:39906 已建立
…

```

如果该列表变得庞大，那么您很可能会受到slowloris的打击：

```
…
Proto Recv-Q Send-Q 本地地址 外部地址 状态      
tcp 232 0 67.230.168.1:80 96.125.213.1:56837 已建立
tcp 232 0 67.230.168.1:80 96.125.213.1:56831 已建立
tcp 232 0 67.230.168.1:80 96.125.213.1:56752 已建立
… 还有很多 …

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-23T21:06:26.670

您可以使用`netstat`. 但是，如果您想保护自己免受 Slowloris 的侵害，您可以使用`mod_antiloris`可以在[此处](https://sourceforge.net/projects/mod-antiloris/)找到的模块。

安装非常简单。

```
cd /usr/local/src

wget http://sourceforge.net/projects/mod-antiloris/files/mod_antiloris-0.4.tar.bz2

tar -xvjf mod_antiloris-0.4.tar.bz2

cd mod_antiloris-*

apxs -a -i -c mod_antiloris.c 
```

如果您使用的是 Apache 2.4

```
apxs2 -a -i -c mod_antiloris.c 
```

# php - 返回表中所有结果的空格

> ID：12503005
> 
> 赞同：0
> 
> 时间：2012-09-19T21:15:35.133
> 
> 标签：php, mysql

我有一个很大的问题。我允许用户按兴趣搜索其他用户。问题是，如果用户输入了多个空格，它会返回每个用户（甚至会重复一些）。我能做些什么来阻止这种情况？

这是我的代码，你需要看看发生了什么：

```
 $connect= mysqli_connect('localhost', '', '', 'shar31t');

    if (isset($_GET['interest']) && $_GET['interest'] != " ") {
        $interest= rtrim($_GET['interest']);
        $interest= mysqli_real_escape_string($connect, $interest);
        $query= "SELECT user_id FROM interests WHERE interest LIKE 
            '%".$interest."%'";
        $result= mysqli_query($connect, $query);
            } 
```

谢谢

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:20:01.090

您应该替换以下行：

```
if (isset($_GET['interest']) && $_GET['interest'] != " ") { 
```

对于这个：

```
if (isset($_GET['interest']) && trim($_GET['interest']) != '') { 
```

这应该可以防止空字符串进入您的查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T21:23:03.327

除了 Nelson 的回答，请`SELECT distinct user_id`避免重复，因为用户似乎可以有多种兴趣。

# unix - 在 Unix Shell 脚本中切换用户和环境变量

> ID：12503007
> 
> 赞同：2
> 
> 时间：2012-09-19T21:15:40.523
> 
> 标签：unix

我目前正在编写一个脚本，该脚本使用

```
su username -c "comand1; comand2" 
```

shell中没有`sudo`命令。

但是环境变量不会改变。

例如，不同用户的工作目录不同。所以当用户在脚本中切换时，我希望`$HOME`变量应该包含不同的工作目录。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:26:22.667

您可能正在寻找`-l`（或只是`-`）选项以使其成为登录外壳。参见手册[`su(1)`](http://www.manpages.info/freebsd/su.1.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:28:58.007

一种 hack-ish 方式是将`env`第二个用户的所有变量放在一个文件中（如`.bashrc`），并在命令列表中首先获取它：

```
su username -c "source file_name; comand1; comand2" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T11:03:04.117

有两个问题：

第一：如果您`"`为参数划界，则此参数中的所有内容都由**调用**`-c`shell扩展，而不是由执行的 shell 扩展。您可以使用而不是来防止这种情况。**`'``"`**

 **第二：默认情况下`su`，不会执行与真实用户登录期间相同的步骤。使用`-l`或`-`选项。在您的情况下，这可能需要或不需要 - 试试吧。

一起：

```
> echo $HOME
/root
> su -c "echo $HOME" user -l
/root
> su -c 'echo $HOME' user -l
/home/user
> su -c 'echo $HOME' user
/home/user 
```**

# jquery - 在 PhotoSwipe 中，模式窗口中的菜单不显示

> ID：12503009
> 
> 赞同：1
> 
> 时间：2012-09-19T21:15:58.233
> 
> 标签：jquery, jquery-plugins, cordova, jquery-mobile, photoswipe

我正在使用 PhoneSwipe、jQuery Mobile、PhoneGap 和 Xcode 为杂志开发应用程序。到目前为止一切顺利，但是在显示图像时，模态窗口不起作用，我还没有弄清楚为什么。

我用 Chrome 的 Code Inspector 和 Firebug 检查了代码，一切似乎都很好，没有错误也没有警告，但是当我点击图像时，我仍然无法返回主图库。图像在模态窗口中打开，但没有显示用于操作图库的菜单。

我将我的代码与示例代码进行了比较，它实际上是相同的，所以我不明白我的应用程序发生了什么。

我将我的 PhoneGap 项目中的 www/ 文件夹上传到服务器，您可以在这里查看： [http ://www.celebrityeventsmagazine.com/app/](http://www.celebrityeventsmagazine.com/app/)

这就是我想要实现的目标：

[http://www.photoswipe.com/latest/examples/04-jquery-mobile.html](http://www.photoswipe.com/latest/examples/04-jquery-mobile.html)

我想知道发生了什么，因为我没有调试过这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:57:55.360

好吧，由于某种原因，这是一个 CSS 问题，photoswipe.css 文件正在加载但没有被解释，我更改了加载 css 文件的顺序，问题就消失了。

# rally - Rally Excel 加载项创建日期查询

> ID：12503012
> 
> 赞同：2
> 
> 时间：2012-09-19T21:16:13.123
> 
> 标签：rally

我正在尝试从 Excel 加载项运行查询，以捕获特定日期范围内的缺陷数。

例如：

```
Query: Defects Sprint 93
Type: Defect
Order: Creation Date
Columns: Creation Date
Filter: ((Creation Date >= 09/06/2012) AND (Creation Date 09/20/2012)) 
```

注意：我从拉力赛网站复制并粘贴了*过滤器*字符串。当我在 Rally 中运行这个精确视图时，我得到了我预期的结果。

任何帮助将不胜感激。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:56:05.003

您需要对日期使用 ISO 格式并从字段名称中删除空格：

（（创建日期 >= 2012-09-06）和（创建日期 <= 2012-09-20））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-14T09:11:08.960

我同意凯尔的回答，但在我的查询中几乎没有修改它有效。像 ((CreationDate >= 2012-09-06) AND (CreationDate < 2012-09-21))

注意：在第二个 CreationDate 中，我将日期从 20 增加到 21 ，它将完全满足条件。

# android - 在 Android Galaxy S3 上无法访问前置摄像头

> ID：12503022
> 
> 赞同：1
> 
> 时间：2012-09-19T21:17:05.680
> 
> 标签：android, camera, galaxy, samsung-mobile

我有一个使用前置摄像头的小应用程序。我一直在使用前置摄像头的方式似乎适用于大多数手机，但用户一直在报告 S3 和其他各种新设备上的问题。我访问前置摄像头的方式是这样的：

```
// Find the ID of the front camera
        CameraInfo cameraInfo = new CameraInfo();
        for(int i = 0; i < numberOfCameras; i++) {
            Camera.getCameraInfo(i, cameraInfo);
            if(cameraInfo.facing == CameraInfo.CAMERA_FACING_FRONT) {
                defaultCameraId = i;
                mCameraFound = true;
            }
        }
        if(!mCameraFound) 
            displayDialog(8); 
```

从我添加到应用程序中的一些错误报告中，我注意到 S3 实际上找到了前置摄像头，但用户报告它只显示一个空白屏幕？我只能在我拥有的设备（GNex 和 N7）上进行测试。我希望这里的人可能对此有一些经验，或者可以帮助我解决这个问题。如果您想在 S3 上试用该应用程序，请查看下面的链接。提前致谢。

[https://play.google.com/store/apps/details?id=com.wckd_dev.mirror](https://play.google.com/store/apps/details?id=com.wckd_dev.mirror)

编辑：我创建了一个包含用于预览的 TextureView 的 MirrorView 对象。MirrorView 对象实现了一个 SurfaceTextureListener。在 onSurfaceTextureAvailable() 方法中是开始预览的地方。我还创建了一种在应用程序从隐藏变为可见后重新启动预览的方法。

所以在应用程序第一次启动时调用它：

```
 @Override
    public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {
        try {
            if (mCamera != null) {

                Camera.Parameters parameters = mCamera.getParameters();
                parameters.setPreviewSize(mPreviewSize.height, mPreviewSize.width);
                requestLayout();

                mCamera.setParameters(parameters);
                mCamera.setPreviewTexture(surface);
                mCamera.startPreview();
            }
        } 
        catch(RuntimeException e) {
            // Log.e(TAG, "RuntimeException caused by setPreviewTexture()", exception);
        }
        catch (IOException e) {
            // Log.e(TAG, "IOException caused by setPreviewTexture()", exception);
        }
    } 
```

restartPreview 调用是一个相同（但独立的）方法。从我通过用户收集的一些调试数据中，我注意到该应用程序在 S III 上找到了两个摄像头并选择了与 CAMERA_FACING_FRONT 匹配的 ID。此外，这个问题似乎并非在所有 S III 上都发生。我的用户也有同样多的反馈报告。遇到此问题的用户的最新报告是 AT&T S III 用户。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:40:09.667

今晚与我的应用程序遇到此问题的 S3 进行了面对面的交流。这里发生了什么事。TextureView 依赖于 2d 硬件加速，默认情况下（据我所知）应该在 4.0+ 设备上启用。它没有在他的手机上打开（至少对于我的应用程序）。修复就像在清单中添加一行一样简单（在应用程序下）。

```
android:hardwareAcceleration = "true" 
```

# vba - 将 Excel VBA 数组传递给父函数？

> ID：12503023
> 
> 赞同：0
> 
> 时间：2012-09-19T21:17:09.420
> 
> 标签：vba, excel, parameter-passing

*我不知道这个问题一开始是否有意义......*

*给定示例：为单个*单元格（我们将其称为）给出以下值`A1`：`Sub-value #1|Here's another sub-value #2|Yet again, last but not least, sub-value #3`。**我已经知道有人会告诉我这是应该使用数据库的地方（相信我，我的专业是数据库管理，我知道，但我需要这种方式的数据）。**我的分隔符是`|`. 现在说我想创建一个函数，它将获取`LEN()`每个子值的 并返回`AVERAGE()`所有子值的 。如果我想创建一个函数来执行此操作，我可以使用 an `split()`，获取每个值，执行 an`LEN()`并返回`AVERAGE()`.

对于给出的示例，让我们使用 cell `B1`。我过去创建了类似的函数，可以通过以下方法工作（虽然不是这个确切的方法），但它每次都需要拆分和加入数组/单元格值：`=ARRAY_AVERAGE(ARRAY_LEN(A1,"|","|"),"|","|")`.

*   `ARRAY_LEN(cell,delimiter[,Optional new_delimiter])`
*   `ARRAY_AVERAGE(cell,delimiter[,Optional new_delimiter])`

但是，我想知道是否有更动态的方法来解决这个问题。基本上，我想要`split()`一个带有一些自定义 VBA 函数的数组，将它传递给父单元格函数，然后我通过一个将数组合并在一起的函数来包装数组。

下面是 cell 函数的运行方式 `=ARRAY_AVERAGE(ARRAY_LEN(ARRAY_SPLIT(A1,"|")))`：

*   `ARRAY_SPLIT(cell,delimiter)`将拆分数组。
*   `ARRAY_LEN(array)`将返回数组的每个子值的长度。
*   `ARRAY_AVERAGE(array)`将返回数组的每个子值的平均值。由于此函数返回多个值的单个值，因此这将采用`ARRAY_JOIN(array,delimiter)`将再次合并数组的虚构形式。

这需要在单元格中添加一个或两个附加函数，但它也降低了单元格将与单个单元格值和 VBA 数组相互转换的迭代次数。

*你怎么看？可能的？可行的？或多或少的代码效率？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:08:18.133

现在，这是一个非常粗略的示例，但它应该让您了解如何开始以及如何自定义此方法以满足您的需求。**假设您在名为example.txt**的文本文件中有以下数据：

 **```
Name|Age|DoB|Data1|Data2|Data3
David|25|1987-04-08|100|200|300
John|42|1960-06-21|400|500|600
Sarah|15|1997-02-01|700|800|900 
```

此文件位于文件夹**C:\Downloads**中。要在 VBA 中使用 ADO 进行查询，您需要参考**Microsoft ActiveX Data Objects 2.X Library**，其中 X 是您安装的最新版本。我还参考了**Microsoft 脚本库**来创建我的**Schema.ini**运行时的文件，以确保我的数据被正确读取。如果没有 Schema.ini 文件，您将面临驱动程序无法读取数据的风险。文本中的数字有时会无缘无故地被读取为 null，日期也经常返回 null。Schema.ini 文件为文本驱动程序提供了数据的准确定义以及如何处理它。您不必像我所做的那样明确定义每一列，但至少您应该设置*Format、ColNameHeader 和 DateTimeFormat*值。

使用的示例 Schema.ini 文件：

```
[example.txt]
Format=Delimited(|)
ColNameHeader=True
DateTimeFormat=yyyy-mm-dd
Col1=Name Char
Col2=Age Integer
Col3=DoB Date
Col4=Data1 Integer
Col5=Data2 Integer
Col6=Data3 Integer 
```

您会注意到文件名包含在第一行的括号中。这不是可选的，它还允许您为不同的文件定义不同的模式。如前所述，我在运行时在 VBA 中创建了我的 Schema.ini 文件，其内容如下：

```
Sub CreateSchema()
    Dim fso As New FileSystemObject
    Dim ts As TextStream

    Set ts = fso.CreateTextFile(FILE_DIR & "Schema.ini", True)

    ts.WriteLine "[example.txt]"
    ts.WriteLine "Format=Delimited(|)"
    ts.WriteLine "ColNameHeader=True"
    ts.WriteLine "DateTimeFormat=yyyy-mm-dd"
    ts.WriteLine "Col1=Name Char"
    ts.WriteLine "Col2=Age Integer"
    ts.WriteLine "Col3=DoB Date"
    ts.WriteLine "Col4=Data1 Integer"
    ts.WriteLine "Col5=Data2 Integer"
    ts.WriteLine "Col6=Data3 Integer"

    Set fso = Nothing
    Set ts = Nothing
End Sub 
```

您会注意到我使用了变量 FILE_DIR，它是我在模块顶部定义的常量。您的 Schema.ini 文件 - 必须 - 与您的数据文件位于同一位置。您查询的连接字符串也使用此目录，因此我定义了常量以确保它们引用相同的位置。这是我的模块的顶部，带有 FILE_DIR 常量以及连接字符串和 SQL 查询：

```
Option Explicit

Const FILE_DIR = "C:\Downloads\"
Const TXT_CONN = "Driver={Microsoft Text Driver (*.txt; *.csv)};Dbq=" & FILE_DIR & ";Extensions=asc,csv,tab,txt;"
Const SQL = "SELECT Name, DoB, ((Data1 + Data2 + Data3)/3) AS [Avg_of_Data]" & _
            "FROM example.txt " 
```

注意**TXT_CONN**中称为*Dbq*的部分。这是存储数据文件的目录。实际上，您将在 SQL 字符串的 WHERE 子句中定义您使用的特定文件。**SQL**常量包含您的查询字符串。在这种情况下，我们只选择名称、DoB 和平均三个数据值。完成所有这些后，您就可以实际执行查询了：

```
Sub QueryText()
    Dim cn As New ADODB.Connection
    Dim rs As New ADODB.Recordset
    Dim i As Integer

    'Define/open connection
    With cn
        .ConnectionString = TXT_CONN
        .Open

        'Query text file
        With rs
            .Open SQL, cn
            .MoveFirst

            'Loop through/print column names to Immediate Window
            For i = 0 To .Fields.Count - 1
                Debug.Print .Fields(i).Name
            Next i

            'Loop through recordset
            While Not (.EOF Or .BOF)

                'Loop through/print each column value to Immediate Window
                For i = 0 To .Fields.Count - 1
                    Debug.Print .Fields(i)
                Next i

                .MoveNext
            Wend

            .Close 'Close recordset
        End With

        .Close 'Close connection to file
    End With

    Set rs = Nothing
    Set cn = Nothing
End Sub 
```

我知道我在上面的评论中说过这样做非常简单，而且这看起来需要做很多工作，但我向你保证不是。您可以只使用 QueryText() 方法并最终得到类似的结果。但是，我已经包含了所有其他内容，以尝试为您提供一些想法，让您了解可以将其用于您的项目的地方，并向您展示如果您没有得到预期的结果，如何解决您可能遇到的问题.

*这是我最初学习的指南：http:* [//msdn.microsoft.com/en-us/library/ms974559.aspx](http://msdn.microsoft.com/en-us/library/ms974559.aspx)

*这是对实际 Excel 文件执行相同操作的指南：http:* [//support.microsoft.com/kb/257819](http://support.microsoft.com/kb/257819)

*最后，这里有更多关于 Schema.ini 文件的信息：http:* [//msdn.microsoft.com/en-us/library/windows/desktop/ms709353 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms709353(v=vs.85).aspx)

希望您能够找到一种方法在您的工作中利用所有这些信息！学习所有这些的一个附带好处是您可以使用 ADO 来查询实际的数据库，例如 Access、SQL Server 和 Oracle。该代码与此处打印的代码几乎相同。只需换掉连接字符串、sql 字符串，然后忽略有关 Schema.ini 文件的全部内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:16:47.220

以下是在单个单元格上工作的 2 个示例 VBA UDF：输入公式为

=AVERAGE(len_text(SPLIT_TEXT(A1,"|")))

请注意，在这种特殊情况下，您实际上并不需要 len_text 函数，您可以改用 Excel 的 LEN()，但是您必须输入 AVERAGE(..) 作为数组公式。

```
Option Explicit

Public Function Split_Text(theText As Variant, Delimiter As Variant) As Variant
    Dim var As Variant
    var = Split(theText, Delimiter)
    Split_Text = Application.WorksheetFunction.Transpose(var)
End Function
Public Function Len_Text(something As Variant) As Variant
    Dim j As Long
    Dim k As Long
    Dim var() As Variant

    If IsObject(something) Then
        something = something.Value2
    End If

    ReDim var(LBound(something) To UBound(something), LBound(something, 2) To UBound(something, 2))
    For j = LBound(something) To UBound(something)
        For k = LBound(something, 2) To UBound(something, 2)
            var(j, k) = Len(something(j, k))
        Next k
    Next j
    Len_Text = var

End Function 
```**

# cleartool - cleartool ls：错误：路径名不在 VOB 中：“。”

> ID：12503024
> 
> 赞同：3
> 
> 时间：2012-09-19T21:17:09.697
> 
> 标签：cleartool

我正在尝试使用 cleartool 浏览一些 CC 存储库。我可以从 lsvob 获取 VOB 列表，但是当我选择一个 VOB 条目时， cd 进入它，然后尝试执行 ls 。要查看里面的内容，我收到以下错误消息：

清除工具> ls 。cleartool：错误：路径名不在 VOB 中：“。”

以下链接说我必须在视图中运行 ls 但是如果我无法获得目录列表或要转到的视图列表，我怎么知道去哪里。

[http://ejostrander.com/cc_errors.html#ERROR19](http://ejostrander.com/cc_errors.html#ERROR19)

看起来有点像你必须已经知道你想去哪里并且无法获得选择列表。

问题：我该如何超越这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:20:21.247

您必须在 Unix 上才能执行 a `cd /vobs/aVobTag`，但只要您不在视图中（或者只要您没有执行 a `cleartool setview aViewTag`，这将允许`/vobs/aVobTag`显示任何内容），这不会给您任何东西：见“ [ClearCase`setview`](https://stackoverflow.com/questions/10252436/python-and-clearcase-setview/10252612#10252612) ”）。
另外，这些是用于动态视图咨询，这意味着**您需要先安装 Vob** ( `cleartool mount`)

首先创建一个视图，我推荐一个动态视图（更容易和更快地设置：请参阅“[如何使用命令提示符在给定的配置规范下以清晰的情况打开动态视图？](https://stackoverflow.com/questions/9357569/how-to-open-a-dynamic-view-in-clear-case-with-a-given-config-spects-using-comman/9357692#9357692) ”作为示例），然后转到：

```
cleartool mount /vobs/aVobTag
cd /view/yourView/vobs/aVobTag 
```

如果您已在分支上签入文件，您将在那里看到文件`/main`，因为 Base ClearCase 视图的默认配置规范是`element * /main/LATEST`：请参阅“ [Rational ClearCase 中的配置规范](https://stackoverflow.com/questions/6578443/config-spec-in-rational-clearcase/6578525#6578525)”。

# objective-c - NSLocale - 无效的标识符

> ID：12503029
> 
> 赞同：0
> 
> 时间：2012-09-19T21:17:27.927
> 
> 标签：objective-c, ios, localization, nslocale

如果我尝试使用某个语言环境标识符初始化 NSLocale，我如何判断它是否是合法标识符？无论我传入什么标识符，即使是垃圾标识符，NSLocale 仍然会被初始化为某种东西。

例如，如果您传入“ar_NO”，一个语言为阿拉伯语的语言环境和一个（无效）国家代码 NO，我得到的 NSLocale 对象似乎是合法的。例如，如果我`-[NSCalendar firstWeekday]`从具有该语言环境的日历调用，它将返回星期一。我的问题是，这是从哪里来的？如果 iOS 不能使用给定的标识符，它是否会退回到另一个语言环境？我认为它会回到基础“ar”，但“ar” firstWeekday 是星期六，所以情况并非如此。

注意：我知道标识符是由 ISO BCP 47 规范指定的，并且我知道该`[NSLocale availableLocaleIdentifiers]`功能，但这并没有真正帮助我，因为如果我使用不在该列表中的标识符，我仍然会得到一个 NSLocale。

有人有什么想法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:51:24.587

我认为如果给定的 NSLocale 无效，它将回退到本地默认设置。尝试更改本地设备设置，看看会发生什么！设置无效区域后，打印 [NSLocale currentLocale]; 看看它会返回什么。

# .net - 如何在 WinRT 中创建 SHA-256 哈希？

> ID：12503032
> 
> 赞同：8
> 
> 时间：2012-09-19T21:17:40.780
> 
> 标签：.net, windows-8, windows-runtime, windows-store

我今天在 WinRT 中创建了一个简单的单向 SHA-256 哈希，并意识到它不起作用。我做了一个验证，显然得到了这个：

> ◦API System.Security.Cryptography.SHA256Managed in MSCORLIB, PUBLICKEYTOKEN=B77A5C561934E089 不支持此应用程序类型。CryptoWinRT.exe 调用此 API。◦此应用程序类型不支持 MSCORLIB 中的 API System.Security.Cryptography.HashAlgorithm，PUBLICKEYTOKEN=B77A5C561934E089。CryptoWinRT.exe 调用此 API。◦API System.Security.Cryptography.SHA256Managed.#ctor in MSCORLIB, PUBLICKEYTOKEN=B77A5C561934E089 不支持此应用程序类型。CryptoWinRT.exe 调用此 API。◦此应用程序类型不支持 MSCORLIB 中的 API System.Security.Cryptography.HashAlgorithm.ComputeHash(System.Byte[])，PUBLICKEYTOKEN=B77A5C561934E089。CryptoWinRT.exe 调用此 API。

什么是这个的替代品？为什么WinRT不允许这种微不足道的事情呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-19T19:36:43.420

这对你有用吗？

```
 private void HandleHashClick(object sender, RoutedEventArgs e)
    {
        // get the text...
        var inputText = this.textInput.Text;

        // put the string in a buffer, UTF-8 encoded...
        IBuffer input = CryptographicBuffer.ConvertStringToBinary(inputText, 
            BinaryStringEncoding.Utf8);

        // hash it...
        var hasher = HashAlgorithmProvider.OpenAlgorithm("SHA256");
        IBuffer hashed = hasher.HashData(input);

        // format it...
        this.textBase64.Text = CryptographicBuffer.EncodeToBase64String(hashed);
        this.textHex.Text = CryptographicBuffer.EncodeToHexString(hashed);
    } 
```

# entity-framework - 在接口 (EF) 中使用虚拟属性

> ID：12503036
> 
> 赞同：1
> 
> 时间：2012-09-19T21:17:47.363
> 
> 标签：entity-framework, interface

如何在实体框架的接口中使用虚拟属性？：

```
public interface ICommentable
{
    int CommentableId { get; set; }
    virtual ICollection<Comment> Comments { get; set; }
} 
```

这会为 virtual 关键字引发错误，但如果我这样做：

```
public interface ICommentable
{
    int CommentableId { get; set; }
    ICollection<Comment> Comments { get; set; }
} 
```

然后这个（下）抛出一个错误（“不实现......”）

```
public class Something : ICommentable
{
    int CommentableId { get; set; }
    public virtual ICollection<Comment> Comments { get; set; }
    ...more properties....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:02:39.107

它会引发错误，因为`CommentableId`is not `public`。`virtual`它与放置在`Comments`有效的类中无关。

在接口中使用 virtual 是无效的，因为它没有意义。定义接口时，实现类必须实现其所有成员。virtual 关键字意味着派生类可以覆盖现有的实现，但接口没有实现。

# c# - C# Basic web HttpWebRequest，不支持Javascript

> ID：12503040
> 
> 赞同：0
> 
> 时间：2012-09-19T21:18:03.493
> 
> 标签：c#, javascript

我有一个基本的 C# HttpWebRequest。我的问题是它发送 GET 请求的页面，需要启用 javascript（在客户端）才能生成内容。

如何在我的代码中添加 javascript 支持？甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T21:20:42.433

服务器无法真正知道客户端是否支持 Javascript。它只能继续你给它的数据。

所以有两种可能：

*   它使用标头来确定要发送的响应，并*推断*您无法运行 Javascript。解决方案：找出它需要的标题，并明确设置它们。

*   它会将页面发回给您，但您无法使用它，因为您没有在浏览器上显示它。解决方案：查看页面，找出 AJAX 调用 Javascript 正在制作的内容，然后改为制作这些内容。您甚至可能不需要获取原始托管页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T21:21:15.293

HttpWebRequest 只是实现 GET，您需要完整的浏览器来执行 JavaScript（并且可能需要 CSS 文件，因为脚本可能依赖于它们）。

内置方法是使用[WebBrowser](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)控件来呈现页面，在您发现 JavaScript 呈现完成后抓取 innerHTML。

# c# - 使用 com 可调用包装器将结构数组从 c# 传递到 C++

> ID：12503041
> 
> 赞同：2
> 
> 时间：2012-09-19T21:18:03.573
> 
> 标签：c#, c++, com, marshalling

考虑下面的代码，它打算由 C++ 使用 com 访问

```
 namespace MarshalLib
    {
        //define an interface for account services
        [ComVisible(true)]
        [Guid("39B8A693-79BB-4638-92DE-245A88720953")]
        public interface IAccountStructLookup
        {
            AccountStruct RetrieveAccount(int acctId);
            void UpdateBalance(ref AccountStruct account);
            Alias[] GetRef();
        }

        //Implement an account struct
        [ComVisible(true)]
        [Guid("DB48C5B6-9646-491A-B030-C0CADCFC03E0")]
        public struct AccountStruct
        {
            public int AccountId;
            [MarshalAs(UnmanagedType.BStr)]
            public string AccountName;
            [MarshalAs(UnmanagedType.Currency)]
            public decimal Balance;

            //[MarshalAs(UnmanagedType.ByValArray, SizeConst = 5)]
            //[MarshalAs(UnmanagedType.SafeArray)]
            //public Alias[] Aliases;
        }

        [ComVisible(true)]
        [Guid("9829CAB3-4020-47EA-BE72-86EC7CFFAE1D")]
        public struct Alias
        {
            public string Name;
        }
        //implement a class to provide account services
        //using an AccountStruct
        [ComVisible(true)]
        [Guid("CEFE5CAA-5C7E-464F-8020-E0FC78180D9B")]
        [ClassInterface(ClassInterfaceType.None)]
        public class DniNetStructsObj : IAccountStructLookup
        {
            public AccountStruct RetrieveAccount(int acctId)
            {
                AccountStruct result = new AccountStruct();
                if (acctId == 123)
                {
                    result.AccountId = acctId;
                    result.AccountName = "myAccount";
                    result.Balance = 1009.95M;
                    //result.Aliases = new Alias[5];
                    //result.Aliases[0].Name = "1";
                    //result.Aliases[1].Name = "2";
                    //result.Aliases[2].Name = "3";
                    //result.Aliases[3].Name = "4";
                    //result.Aliases[4].Name = "5";

                }
                return result;
            }

            public void UpdateBalance(ref AccountStruct account)
            {
                //update the balance
                account.Balance += 500.00M;
            }
            public Alias[] GetRef( )
            {
                Alias[] al= new Alias[2];
                al[0].Name = "1";
                al[1].Name = "2";
                return al;
            }

} 
```

还有 C++ 方面的东西

```
#include "stdafx.h"
#include "ConsoleApplication1.h"
#import "D:\Source Code\MarshalLib\MarshalLib\bin\Debug\MarshalLib.tlb" raw_interface_only

#ifdef _DEBUG
#define new DEBUG_NEW
#endif

// The one and only application object

CWinApp theApp;

using namespace std;
using namespace MarshalLib;

int _tmain(int argc, TCHAR* argv[], TCHAR* envp[])
{
    int nRetCode = 0;

    HMODULE hModule = ::GetModuleHandle(NULL);

    if (hModule != NULL)
    {
        // initialize MFC and print and error on failure
        if (!AfxWinInit(hModule, NULL, ::GetCommandLine(), 0))
        {
            // TODO: change error code to suit your needs
            _tprintf(_T("Fatal Error: MFC initialization failed\n"));
            nRetCode = 1;
        }
        else
        {
            try
            {
            CoInitialize(NULL);
            IAccountStructLookupPtr api(__uuidof(DniNetStructsObj));
            api->GetRef();
            CoUninitialize();
            }
            catch (...)
            {
            }

        }
    }
    else
    {
        // TODO: change error code to suit your needs
        _tprintf(_T("Fatal Error: GetModuleHandle failed\n"));
        nRetCode = 1;
    }

    return nRetCode;
} 
```

当我调用 api-GetRef() 来获取结构数组时出现错误。请帮我从 c# 返回一个结构数组并在 c++ 中使用它。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T08:12:11.343

返回数组的问题在于，在 C++ 中，您将看到一个指向 struct 的指针并且没有关于数组大小的信息。您可以尝试将其编组为 SAFEARRAY，但 IMO，SAFEARRAY 令人头疼。

我更喜欢这样建模：

```
[ComVisible(true)]
[Guid("C3E38106-F303-46d9-9EFB-AD8A8CA8644E")]
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct MyStruct
{
    public int Value;

    // I marshal strings as arrays! see note at the bottom
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]
    public string Unit
}

[ComVisible(true),
Guid("BD4E6810-8E8C-460c-B771-E266B6F9122F"),
InterfaceType(ComInterfaceType.InterfaceIsIUnknown)
]
public interface IMyService
{
    int GetData([MarshalAs(UnmanagedType.LPArray)] out MyStruct[] data);
} 
```

客户端代码是这样的：

```
Lib::MyStruct* data;
long size = svc->GetData(&data);

for(size_t i = 0; i < size; ++i)
{
  Lib::MyStruct& current = data[i];
  long val = current.Value;
  bstr_t unit = current.Unit;
  // ...
}                                           

// now you need to release the memory. However, if you marshal
// strings in struct as BSTRs, you need to first release them by
// calling SysFreeString. This is why I prefer to marshal strings
// as arrays whenever I can: you can still easily construct a bstr_t
// in your client code, but you don't need to release them explicitly
CoTaskMemFree(data); 
```

关于关于`SAFEARRAY`s 的评论：仅当接口必须是自动化兼容即后期绑定即`IDispatch`接口即标记为时才需要它们`ComInterfaceType.InterfaceIsIDispatch`。如果不是这种情况（并且我将接口声明为自定义 ie `ComInterfaceType.InterfaceIsIUnknown`），则使用标准数组非常好，并且它们与`SAFEARRAY`s 一样受到很好的支持。此外，使用`SAFEARRAY`自定义结构会带来[一些额外的](http://vcfaq.mvps.org/com/4.htm) [复杂性](http://msdn.microsoft.com/en-us/library/a9b968e9-2241-4d99-9e59-6ee0aeea5942%28VS.85%29)，我希望避免这种复杂性。如果不需要后期绑定，就没有理由和`SAFEARRAY`s 打架。

关于`CComSafeArray`，如文档所述，它不支持`VT_RECORD`支持结构数组所需的内容（另一种选择是将其编组`VT_VARIANT`，`IRecordInfo`但我什至不会讨论）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:41:17.330

您首先需要通过接口公开托管代码并使用 regasm 注册它并创建类型库（tlb 文件）。然后你可以在你的非托管代码中使用它。

参考这篇文章：http: [//blogs.msdn.com/b/deeptanshuv/archive/2005/06/26/432870.aspx](http://blogs.msdn.com/b/deeptanshuv/archive/2005/06/26/432870.aspx)

# javascript - 哪个控制流库与谷歌闭包库一起使用？

> ID：12503044
> 
> 赞同：2
> 
> 时间：2012-09-19T21:18:11.780
> 
> 标签：javascript, google-closure-compiler, google-closure, google-closure-library, flow-control

有几个 js 库可用于流控制。

虽然在使用闭包编译器时，我看到的那些在高级模式下不能很好地使用编译器。

是否有任何闭包兼容的流控制库？我最感兴趣的是等待多个结果，而不会使代码过于复杂。

我要存档的是减少用户操作的加载时间。对于用户的一项操作，必须向后端执行多个请求。为了保持代码的可维护性，目前，我一次只做一个请求，并在每一步之后处理潜在的错误。

我想要存档的是，我可以一起触发非依赖请求，而不会使错误处理过于复杂。

我喜欢flow js的语法：

```
var auth = flow.define(
    function(username, password) {

        sys.puts("trying " + username + ", " + password);

        this.password = password;
        keystore.get('userId:' + username, this);

    },function(err, userId) {

        keystore.get('user:' + userId + ':password', this);

    },function(err, passwordInDb) {

        if (passwordInDb == this.password) {
            sys.puts("Authenticated!");
        }
        else {
            sys.puts("Failed Authentication!");
        }
    }
) 
```

它还允许产生多个异步操作并收集它们。尽管如果您需要回调之间的任何状态，则该状态会像上面的“this.password”一样存储。由于未键入包含范围，因此在高级模式下，闭包编译器将无法一致地重命名它（据我所知）。

所以我需要一个替代方案，它有一个类型化的容器对象，通过每个函数作为参数（或 this）推送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T04:54:03.753

你可以`goog.async.Deferred`从闭包库中使用吗？它管理异步和同步工作流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:13:49.883

我为闭包库编写的一个非常小的流控制库是[ready.js](https://github.com/thanpolas/ready.js)。

根据描述：

> 监视多个异步操作并在全部或部分完成时触发侦听器。

值得一看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T21:36:57.517

通常，您可以通过为库创建外部文件并单独加载代码（或在编译代码后连接库）来使用具有 Closure Compiler 高级模式的任何库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T21:52:52.407

好的，我找到了解决方案。

当我创建一个类型化的容器对象并将其传递给 goog.bind 的每个函数时，它可以工作。

# sql - Cursor ..Ques column Data as 列名和相应的答案数据。问题栏

> ID：12503052
> 
> 赞同：3
> 
> 时间：2012-09-19T21:18:40.387
> 
> 标签：sql, sql-server, sql-server-2008, pivot

我有一张看起来像的桌子

```
AccNo   Person  Ques    Anwers
1       XXX     Q1      A1
1       XXX     Q2      A2
1       XXX     Q3      A3
1       XXX     Q4      A4 
```

我需要编写一个代码，以便我的输出看起来像这样..

```
AccNo      Person    Q1    Q2    Q3    Q4
1          XXX       Ans1  Ans2  Ans3  Ans4 
```

我写了一个游标，但我的输出如下所示

```
AccNo       Person    Q1    Q2    Q3    Q4
1           XXX       Ans1          
1           XXX             Ans2        
1           XXX                   Ans3  
1           XXX                         Ans4 
```

请让我知道我应该怎么做才能将数据放入 1 行（每个 AccNo 1 行）而不是 4 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:22:12.917

您不需要光标，您可以使用`PIVOT`. 如果您知道要转换的行数，则可以通过静态数据透视对其进行硬编码：

```
select *
from 
(
    select accNo, person, ques, anwers
    from yourtable
) x
pivot
(
    min(anwers)
    for ques in([Q1], [Q2], [Q3], [Q4])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b01ab/1)

如果您不知道要转换的列数，则可以使用动态枢轴：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(ques) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT accno, person,' + @cols + ' from 
             (
                select accNo, person, ques, anwers
                from yourtable
            ) x
            pivot 
            (
                min(anwers)
                for ques in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b01ab/5)

或者您可以使用带有 a 的聚合`CASE`：

```
select accno, person,
  max(case when ques = 'Q1' then anwers end) Q1,
  max(case when ques = 'Q2' then anwers end) Q2,
  max(case when ques = 'Q3' then anwers end) Q3,
  max(case when ques = 'Q4' then anwers end) Q4
from yourtable
group by accno, person 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b01ab/3)

# certificate - 将设备升级到 iOS 6 后，由 MDM 服务安装的配置文件显示为“未验证”

> ID：12503057
> 
> 赞同：4
> 
> 时间：2012-09-19T21:19:16.833
> 
> 标签：certificate, mdm, profiles

将设备升级到 iOS 6 后，由 MDM 服务安装的配置文件显示为“未验证”。这些配置文件在推送到设备之前由 AddTrust 颁发的 InCommon 证书签名。在升级之前，它们显示为“已验证”。有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:14:04.993

我遇到了完全相同的问题，因此它可能是 iOS 配置文件系统中的一个错误，因为浏览器信任相同的 SSL 证书。注意：我们的证书是“*.host.org”类型的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:24:06.390

这可能是您购买的证书提供商的证书链中不受信任的 CA。看起来某些 CA 在 iOS6 中不受信任或缺失。我遇到了同样的问题，并将整个证书链包含在我们的证书签名包中，问题就解决了。建议您向您的证书提供商打开一个支持案例，看看它是否是一个已知问题，或者四处寻找，看看您是否可以找到 iOS6 中使用的受信任 CA 列表 - 我找不到。将设备同步到 iTunes 也可能会刷新 CA 列表，但这一次对我不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T18:09:07.907

在 pkcs7_sign 调用中包含中间证书（在我的例子中是 php openssl_pkcs7_sign()）解决了这个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T09:35:52.957

我和你的问题完全一样。我的链是 GeoTrust -> RapidSSL -> MyCert。我已经在我的 .crt 中包含了完整的链，但是当我尝试安装配置文件时它仍然显示“未验证”。

我不知道如何插入整个路径。

我使用 openssl 命令签署我的文件：

openssl smime -sign -signer #{crt_path} -inkey #{private_key_path} -nodetach -outform der -in #{file_to_sign_path} -out #{file_signed_pa​​th}

我的 crt_path 是一个 .crt 文件，包括三个证书。

**编辑** 我发现了我的 openssl 命令的问题。我的完整链在 #{crt_path} 中，但没有被命令使用。我添加了 *-certfile #{crt_path}* 并且一切正常！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T19:42:57.793

是的！添加整个路径（-root）就可以了。

验证 MDM SW 创建的签名是否确实包含路径。因为之前不需要...

# vba - 如何使用乘积公式在 excel UDF 中汇总收益

> ID：12503061
> 
> 赞同：4
> 
> 时间：2012-09-19T21:19:38.297
> 
> 标签：vba, excel, user-defined-functions

我正在尝试将以下公式放入 UDF 中，以便在汇总每月收益时获得累积收益。

在 excel 中，公式必须被识别为一个数组，所以当我输入它时，我按`Ctrl`+ `Shift`+`Enter`来获取`{}`公式周围的括号。

有谁知道如何做到这一点？

我希望能够只输入`returns_calc()`并选择适合下面返回变量的范围。

```
{=(PRODUCT(1+returns/100)-1)*100} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:41:11.853

您可以使用 in 中的`[ ]`符号`Application.Evaluate`来计算 VBA 中的数组公式。您的上述公式可以在 VBA**中仅用 1 行**调用，如下所示

```
Sub Sample()
    MsgBox Application.Evaluate(["=(PRODUCT(1+returns/100)-1)*100"])
End Sub 
```

现在修改它以接受函数中的范围，您也可以这样做

```
Function returns_calc(rng As Range) As Variant
    On Error GoTo Whoa

    Dim frmulaStr As String

    frmulaStr = "=(PRODUCT(1+(" & rng.Address & ")/100)-1)*100"
    returns_calc = Application.Evaluate([frmulaStr])

    Exit Function
Whoa:
    returns_calc = "Please check formula string" 'or simply returns_calc = ""
End Function 
```

**示例屏幕截图**

![在此处输入图像描述](../Images/35618833b8d2aa26e5dfd2b6283c0182.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:57:28.920

像这样的东西

```
Public Function Range_Product(theRange As Variant)
    Dim var As Variant
    Dim j As Long

    var = theRange.Value2
    Range_Product = 1#
    For j = LBound(var) To UBound(var)
        Range_Product = Range_Product * (1 + var(j, 1) / 100)
    Next j

    Range_Product = (Range_Product - 1) * 100
End Function 
```

# matlab - 将视觉输出映射到神经网络输入

> ID：12503063
> 
> 赞同：1
> 
> 时间：2012-09-19T21:19:51.980
> 
> 标签：matlab, computer-vision, neural-network, time-series, simulink

我对 MATLAB 相当陌生，但在过去的几天里熟悉了 Simulink 和计算机视觉。我的问题陈述涉及获取交通/高速公路视频输入并检测是否发生事故。

我计划通过提取质心的值来绘制轨迹、速度差（帧之间）和两辆车之间的距离来做到这一点。我可以成功地跟踪质心，并旨在导出其余的特征。

我不知道如何将这些映射到 ANN。我的意思是，每张图像都有不止一个车辆斑点，这意味着在单个帧/图像中有多个质心。那么，NN 如何同时作用于多个输入（每辆车提取的特征）？我显然错过了链接。请帮我弄清楚。

另外，我在看时间序列数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T17:20:04.190

I am not exactly sure about your question. The problem can be both time series data and not. You might be able to transform the time series version of the problem, such that it can be solved using ANN, but it is sort of a Maslow's hammer :). Also, Could you rephrase the problem.

As you said, you could give it features from two or three frames and then use the classifier to detect accident or not, but it might be difficult to train such a classifier. The problem is really difficult and the so you might need tons of training samples to get it right, esp really good negative samples (for examples cars travelling close to each other) etc.

There are multiple ways you can try to solve this problem of accident detection. For example : Build a classifier (ANN/SVM etc) to detect accidents without time series data. In which case your input would be accident images and non accident images or some sort of positive and negative samples for training and later images for test. In this specific case, you are not looking at the time series data. But here you might need lots of features to detect the same (this in some sense a single frame version of the problem).

The second method would be to use time series data, in which case you will have to detect the features, track the features (say using Lucas Kanade/Horn and Schunck) and then use the information about velocity and centroid to detect the accident. You might even be able to formulate it for HMMs.

# stream - webmmux directshow 寻求队列 IStream

> ID：12503065
> 
> 赞同：0
> 
> 时间：2012-09-19T21:19:57.130
> 
> 标签：stream, directshow, seek, webm, muxer

我正在使用 directshow 过滤器来混合 vp8 和 vorbis。最重要的是，我正在实时发送（尝试实际发送）webm 文件。所以没有创建文件。由于数据在成为编码器后被打包到 webm 中，因此我将其发送到套接字。

filesinker 过滤器使用 IStream 进行文件 IO。它大量使用了seek操作。我不能使用。由于我无法在套接字上寻找。

有没有人实现或知道如何使用这个多路复用器，以便不调用搜索操作。或者也许是带有队列的复用器上的一个版本，以便它支持碎片。

谢谢

我正在使用 www.webmproject.org 提供的 directshow 过滤器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:24:36.827

on writer的实现`IStream`允许多路复用器更新写入的流/文件中的交叉引用。因此，它们不必按顺序写入，这对于大多数容器格式来说是不可能的，而无需创建巨大的缓冲区或临时文件。

现在，如果您在运行时创建文件以通过网络逐步发送，我想您正在尝试实现，您不知道多路复用器将在何时何地更新以关闭文件。是否要重新访问文件开头的数据并更新引用、标题等。

您应该先创建完整的文件，然后再交付它。或者您需要替换整个编写器并将所有写入传递到套接字，包括对现有数据的覆盖。然而，通过网络传递实时数据的最合适的方法是根本不传输文件。发送方发送单独的流，接收方要么直接使用它们，要么在接收后多路复用到文件中，这是必要的。

# jquery - jQuery 鼠标悬停在 MVC3 中不起作用

> ID：12503066
> 
> 赞同：0
> 
> 时间：2012-09-19T21:19:59.343
> 
> 标签：jquery, asp.net-mvc-3

今天早些时候我问了一个问题，并在[这里](https://stackoverflow.com/questions/12493912/jquery-pause-delay-timer-on-mouseover/12494127#comment16814309_12494127)得到了很好的答案。但是，当我将代码添加到我的 MVC3 项目时，jQuery`mouseover`事件永远不会被触发。[上一个问题（此处](http://jsfiddle.net/vypTA/7/)）中的 jsFiddle工作正常，但当我将代码添加到我的脚本文件时却不行。

因此，我决定`_Layout`用一个更简单的测试来修改我的文件，但这也无法处理该`mouseover`事件。下面是我的简单测试：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <script src="@Url.Content("~/Scripts/jquery-1.8.1.js")" type="text/javascript"></script>    
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.23.js")" type="text/javascript"></script>   
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>   
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>

    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />

    <script>
        $(document).ready(function () {   
            $("#testtest").mouseover(function () {
                $("#testtest").text("OVER");
            }).mouseout(function () {
                $("#testtest").text("OUT");
            });
        });
    </script>
</head>
<body>
    <div class="page">
        <header>
            //SNIP
        </header>
        <section id="main">
            <div>

            </div>
            @RenderBody()
        </section>
        <footer>
            //SNIP
        </footer>
    </div>
    <div style="clear: both; height: 50px"></div>
    <div id="#testtest" style="background-color: Red; height: 100px; width: 400px; display: block">
        NOTHING
    </div>  
</body>
</html> 
```

我也尝试过`mouseenter`and`mouseleave`事件，但没有改变。

有谁可以帮我离开这里吗？我确定我在这里遗漏了一些简单的东西，但我无法弄清楚！

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T21:22:16.037

更改`<div id="#testtest"`为`<div id="testtest"` `#`只是jquery按ID搜索的键

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T21:22:29.607

Your DIV has ID of "#testtest" should be "testtest"

# javascript - 如何使用jQuery在悬停时显示绝对定位的兄弟div？

> ID：12503077
> 
> 赞同：1
> 
> 时间：2012-09-19T21:20:39.593
> 
> 标签：javascript, jquery

我在兄弟 div 中有一个带有伴随信息的图像网格，需要在图像悬停时显示，然后在光标离开图像时消失。我在这里查看了几个类似的问题，但没有一个真正适合我所需要的。

这是我继承的一个网站，它使用了一个不同的 JS 库，我正在切换到 jQuery，但我很难弄清楚这一点，因为我仍在学习 jQuery。

我在这里设置了 HTML 和 CSS：http: [//jsfiddle.net/EQ2fG/](http://jsfiddle.net/EQ2fG/)

这里有我需要的截图：http: [//cl.ly/JZkK](http://cl.ly/JZkK)

因此，在悬停时，兄弟 div (.property_info) 需要显示在图像 div (.property) 的右侧，但每行中最后两个的需要显示在左侧，因此它保留在容器/包装器中分区。请记住，数据将动态生成。

我希望这是有道理的。任何帮助都会非常非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T05:42:23.020

让它与 CSS(3) 和 jQuery 的组合一起工作 - 感谢两位回答的人；我只需要朝着正确的方向前进。

[http://jsfiddle.net/angieherrera/EQ2fG/46/](http://jsfiddle.net/angieherrera/EQ2fG/46/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:45:42.633

你应该修复你的代码，你不应该在多个元素上使用相同的 ID。但是，我认为这应该有效：

```
$(".property").mouseover(function(){
    var wid=$(this).outerWidth();
    var left=$(this).position().left+wid;
    if(left+wid*2>$(this).parent().width())left=$(this).position().left-wid*2;
    var top=$(this).position().top;
    $(".prop_info").hide();
    $(".prop_info").eq($(".property").index($(this))).show().css({"opacity":1,"left":left,"top":top});
});
$("#property_grid").mouseout(function(){
    $(".prop_info").hide();
}); 
```

​ 编辑：要让它在悬停时保持可见，请将 mouseout 更改为 mouseleave 并设置 property_grid 的高度，以便它紧紧地包裹内容。

JS：

```
$("#property_grid").mouseleave(function(){
    $(".prop_info").hide();
});​ 
```

CSS：

```
#property_grid {
    width: 959px;
    height: 182px;
    margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T21:52:37.930

您可以为此使用 css，但旧版本的 IE 不支持此功能。而且我也不确定这是否是您想要/需要的。但无论哪种方式，希望这会有所帮助。

将 .prop_info 的以下 CSS 更改为：

```
.property .prop_info {
    width:274px;
    height:90px;
    background:url(/resources/images/backgrounds/agent-info-bg.jpg) top left no-repeat transparent;
    background: #0d70b2;
    position:absolute;
    left:136px;
    top: 0px;
    display: none;
    z-index: 10;
} 
```

然后在下面添加：

```
.property:hover .prop_info {
    display: block;   
} 
```

这样做的目的是，每当您将鼠标悬停在 .property 元素上时，其中的 .prop_info 元素就会变得可见。但是，这需要您更改 html 布局，以便 .prop_info 现在位于 .property 中，如下所示：

```
<div class="property" id="property{count}" style="display: block;">
    <a href="#"><img src="http://placehold.it/136x90/eeeeee/cccccc/&text=placeholder" /></a>
    <div  class="prop_info">
        <div id="property_info_content">[ content goes here ]</div>
    </div>
</div> 
```

对于通常会超出屏幕的每个元素，第 5 或第 4 .. 我现在无法测试，因为这完全取决于网站的宽度以及它是否会变得自适应。

但您可以使用以下 CSS：

```
.property .prop_info:nth-child(4n+4) {
    left: -410px;
} 
```

它的作用是它给每个第 4 个元素找到一个不同的左边距。如果你需要它是每 5 个，只需将 4n+4 更改为 5n+5。

希望这有帮助

# javascript - d3 树 - 有相同孩子的父母

> ID：12503078
> 
> 赞同：5
> 
> 时间：2012-09-19T21:20:40.577
> 
> 标签：javascript, graph, tree, d3.js

我一直在将我的代码从 JIT 转换到 D3，并使用树形布局。我已经用我的树数据复制了来自[http://mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html)的代码，但我想做更多的事情。

在我的情况下，我想创建合并回来形成较低级别的父节点的子节点，我意识到这更像是一个有向图结构，但希望树能够适应这一点（即注意子节点之间的公共 id 应该合并）。

所以基本上是一棵树，它在从父母到孩子的路上像往常一样分裂，但也有能力将这些孩子节点聚集在一起成为父母（某种乱伦关系或其他东西:)）。

询问类似的问题 -> [如何使用 D3 布局非树层次结构](https://stackoverflow.com/questions/11053511/how-to-layout-a-non-tree-hierarchy-with-d3)

听起来我可以将分层边缘捆绑与树层次布局结合使用，但我还没有看到这样做。不过，我可能对此有些不以为然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:42:34.240

我一直在研究一个名为[dagre](https://github.com/cpettitt/dagre)的库，用于在 JavaScript 中布置有向图。我们有一个[如何与 D3 一起使用的示例](http://cpettitt.github.io/project/dagre-d3/latest/demo/interactive-demo.html)。也许这适合您的需求？

# c# - 锁定对象

> ID：12503081
> 
> 赞同：1
> 
> 时间：2012-09-19T21:20:43.213
> 
> 标签：c#, .net, multithreading

我有一个类结构如下

```
public class Logger
{
    StremWriter sw;

    public Logger()
    {
        sw = new streamwriter(tempPath);
    }

    public StreamWriter StreamLog 
   {
        get { return sw; }
    }

} 
```

我想知道如果我尝试`StreamWriter`从两个不同的线程访问对象，如何正确锁定。如下所示的锁定是否可以接受？`StreamWriter`或者我应该直接锁定

```
//Log is an instance of Logger that could be accessed from multiple threads
lock (Log) {
    Log.StreamLog.WriteLine("temp");
} 
```

编辑：这些日志对象将进入`ConcurrentQueue`不同线程可以检索它们的位置

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T21:23:05.177

> 如下所示的锁定是否可以接受？或者我应该直接锁定 StreamWriter

两者都不是特别安全。在您的班级本身中处理此问题会更加安全/可靠。与其将 暴露`StreamWriter`给外界，不如制作自己的`WriteLine`方法，并在内部处理锁定。这使得不可能意外避免锁定。

例如，类似：

```
public class Logger
{
    // Make an object to use for locking
    private readonly object syncObj = new object();

    StremWriter sw;

    public Logger()
    {
        sw = new streamwriter(tempPath);
    }

    public void WriteLine(string textToOutput) 
    {
        lock(syncObj)
            sw.WriteLine(textToOutput);
    }
} 
```

# ruby - watir webdriver - 未找到窗口

> ID：12503085
> 
> 赞同：1
> 
> 时间：2012-09-19T21:21:00.497
> 
> 标签：ruby, watir, watir-webdriver

另一个女仆问题。此代码有效，直到`add_task`...

登录后，身份验证窗口关闭并使用登录密钥返回主窗口。但我得到这个错误：

> 你好呀
> 
> 测试 add_task
> 
> [远程服务器] file:///var/folders/3w/b7rcpqfj7kl3wtv56jt99yx00000gn/T/webdriver-profile20120919-9069-1ua1lm9/extensions/fxdriver@googlecode.com/components/command_processor.js:10212:in `unknown': 窗口不是成立。浏览器窗口可能已关闭。(Selenium::WebDriver::Error::NoSuchWindowError)

```
require 'rubygems'
require 'test/unit'
require 'watir-webdriver'

class Login   
def basic_auth(logintype,usr,pwd)
    $browser.goto("http://change.com")
    $browser.link(:class,'joinchange').wait_until_present
    join_link = $browser.link(:class,'joinchange')
    join_link.click

    $browser.window(:title, 'Sign In').wait_until_present
    $browser.window(:title, 'Sign In').use
    if logintype == 'fb'
        $browser.link(:name, 'login-facebook id=').click
        $browser.text_field(:id,'email').set(usr)
        $browser.text_field(:id,'pass').set(pwd)
        puts 'form submit'
        sleep 3
        $browser.form(:id,'login_form').submit
        puts 'hello world'
    else
        $browser.text_field(:id,'lgnId').set('changes')
        $browser.text_field(:id,'pwdId').set('letmeinnow')
        sleep 3
        $browser.form(:name,'LoginActionForm').submit
        puts 'hi there'
    end
end
def add_task
    puts "testing add_task"
    $browser.link(:class,'nextStep').click  
end

end

$browser = Watir::Browser.new
login = Login.new
login.basic_auth('test','usr','pwd')
sleep 3
login.add_task 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:48:07.360

我相信问题在于切换到登录弹出窗口后，脚本并没有切换出来。因此，在 add_task 尝试单击链接时，它会尝试关闭已关闭的登录弹出窗口。

In the `basic_auth` method, you want to pass the actions you want performed in the popup as a block to the `window.use` method.

So you want:

```
$browser.window(:title, 'Sign In').use do 
    if logintype == 'fb'
        $browser.link(:name, 'login-facebook id=').click
        $browser.text_field(:id,'email').set(usr)
        $browser.text_field(:id,'pass').set(pwd)
        puts 'form submit'
        sleep 3
        $browser.form(:id,'login_form').submit
        puts 'hello world'
    else
        $browser.text_field(:id,'lgnId').set('changes')
        $browser.text_field(:id,'pwdId').set('letmeinnow')
        sleep 3
        $browser.form(:name,'LoginActionForm').submit
        puts 'hi there'
    end
end 
```

(Notice the `do` added at the end of the first line and the extra `end` at the end.)

# wpf - 如何在 WPF 中的页面之间传递数据

> ID：12503086
> 
> 赞同：-1
> 
> 时间：2012-09-19T21:21:03.267
> 
> 标签：wpf, vb.net, wpf-controls, wpfdatagrid

如何在 WPF 中的页面之间传递数据？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:03:50.897

您可以在ctor中传递数据

```
PageSearchFieldFTS nextPage = new PageSearchFieldFTS((GabeLib.FieldDef)SearchFieldSelected, paramAndOr);
SrchItemEditDetail.Content = nextPage;   // SrchItemEditDetail is a frame

public partial class PageSearchFieldFTS : Page
{

    public PageSearchFieldFTS(GabeLib.FieldDef FieldDef, GabeLib.enumAndOr AndOr)
    { 
```

# c# - 无法理解 TransactionScope

> ID：12503089
> 
> 赞同：2
> 
> 时间：2012-09-19T21:21:27.843
> 
> 标签：c#, sql, transactions

给定以下代码结构

```
func1()
{
    using (TransactionScope1)
    using (connection1)
    {
        "insert into table A"

        func2()

        "select from table B"
    }
}

func2()
{
    using (TransactionScope2)
    using (connection2)
    {
        foreach (x in y)
        {
            "select from table A"
            "insert into table B"
        }
    }
} 
```

如果`TransactionScope2`已回滚，则`"select from table B"`失败并显示`The operation is not valid for the state of the transaction`. 据我了解`TransactionScope2`，加入第一个并将它们都回滚。所以我将它更改为使用 来创建它`TransactionScopeOption.RequiresNew`，这反过来导致超时`"select from table A"`。

这个想法是让第二个事务从第一个事务读取数据，但独立提交/回滚。我的猜测是`IsolationLevel`需要以某种方式改变，但我并不真正理解它的选项。

**编辑：** 如果我们将 and 命名为 2，也许更容易理解问题`func1`。基本上`func2`是 DAL 功能，并且`func1`是它的单元测试。`func1`创建一些示例数据，`func2`对其执行一些操作，检查结果然后回滚整个事情，无论在哪里`func2`成功与否。

**EDIT2：**在阅读了更多内容后，我认为以下代码应该可以工作，但由于某种原因，我仍然会超时`select from table A`

```
func1()
{
    using (var txn = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions { IsolationLevel = IsolationLevel.ReadUncommitted }))
    using (connection1)
    {
        "insert into table A"
        func2()
        "select from table B"
    }
}

func2()
{
    using (var txn = new TransactionScope(TransactionScopeOption.RequiresNew))
    using (connection2)
    {
        foreach (x in y)
        {
            "select from table A"
            "insert into table B"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:13:26.040

你有一个[嵌套的 TransactionScope](https://stackoverflow.com/questions/1845517/nested-transactions-with-transactionscope)。

默认情况下，它们是链接的，无需您采取进一步的行动（[RequiresNew](http://msdn.microsoft.com/en-us/library/ms172152%28v=vs.90%29.aspx#Y1642)），当内部范围发生时，外部范围将失败（回滚）。

这样他们将是独立的：

```
func2()
{
    using (TransactionScope2 = 
         new TransactionScope(TransactionScopeOption.RequiresNew)) 
    using (connection2)
    {
       ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:29:45.993

试试`IsolationLevel.ReadUncommitted`。

# silverlight - 在编码的 ui 播放期间，当 parent 是 HtmlCustom 控件时找不到 SilverlightControl

> ID：12503104
> 
> 赞同：1
> 
> 时间：2012-09-19T21:22:44.290
> 
> 标签：silverlight, automation, coded-ui-tests

我正在为 WebApp 手动编码 CodedUI 测试。Web 应用程序大约有 50% 的 Silverlight。我有一个 HtmlCustom 控件，可以在网页中搜索我的父对象。然后使用它为主页模板创建 SilverlightControl。页面模板也有一个与之关联的 ID。我在 web 应用程序的其他区域有此代码，它工作正常，但由于某种原因它不在这里。

```
 /// <summary>
    /// Parent of UIControlViewPlaylistsXAP
    /// </summary>
    private HtmlCustom mUICustomViewPlaylistsXAP;
    private HtmlCustom UICustomViewPlaylistsXAP
    {
        get
        {
            if (this.mUICustomViewPlaylistsXAP == null)
            {
                this.mUICustomViewPlaylistsXAP = new HtmlCustom(this);
                this.mUICustomViewPlaylistsXAP.SearchProperties.Add(HtmlCustom.PropertyNames.Id, "viewPlaylistsObject");
                this.mUICustomViewPlaylistsXAP.SearchProperties.Add(HtmlCustom.PropertyNames.TagName, "OBJECT");
                this.mUICustomViewPlaylistsXAP.SearchProperties.Add(HtmlCustom.PropertyNames.ControlDefinition, "data=\"data:application/x-oleobject;base64", PropertyExpressionOperator.Contains);
            }
            return this.mUICustomViewPlaylistsXAP;
        }
    }

    /// <summary>
    /// Parent of all direct Page: View Playlists controls
    /// </summary>
    private SilverlightControl mUIControlViewPlaylistsXAP;
    public SilverlightControl UIControlViewPlaylistsXAP
    {
        get
        {
            if (this.mUIControlViewPlaylistsXAP == null)
            {
                this.mUIControlViewPlaylistsXAP = new SilverlightControl(this.UICustomViewPlaylistsXAP);
                this.mUIControlViewPlaylistsXAP.SearchProperties.Add(SilverlightControl.PropertyNames.AutomationId, "VisiconnPageTemplate");
                ////this.mUIControlViewPlaylistsXAP.SearchProperties.Add(SilverlightControl.PropertyNames.MaxDepth, "-1");
                this.mUICustomViewPlaylistsXAP.SearchConfigurations.Add(SearchConfiguration.AlwaysSearch);
                //// this.mUIControlViewPlaylistsXAP.SearchProperties.Add(SilverlightControl.PropertyNames.ControlType, "VisiconnPageTemplate");

             }
            return this.mUIControlViewPlaylistsXAP;
        }
    } 
```

所以 mUIControlViewPlaylists.XAP 会返回 UITestControlNotFoundException，它有与之关联的 AutomationId。如果有任何关于这样做的更好方法或一般问题的想法，他们肯定会受到赞赏。

# php - 简单的 PHP 自动响应脚本

> ID：12503105
> 
> 赞同：-3
> 
> 时间：2012-09-19T21:22:50.250
> 
> 标签：php, email, auto-responder

我为客户构建了一个简单的 php 脚本给我发电子邮件，效果很好。但我想在脚本中添加一个自动响应：

```
Thank you for your interest. We will get back to you as soon as possible.

Sincerely,
(My Name) 
```

这是我已经在使用的脚本：

```
// ******* PROCESS EMAILS
$emailSubject = '*** Business Lead - '.$_POST['full_name'].' ***';
$webMaster = 'my@email.com';
//Gather Info
$leadname = $_POST['full_name'];
$leademail = $_POST['email'];
$leadphone = $_POST['phone'];
$leadip = $_SERVER['REMOTE_ADDR'];

$body = <<<EOD
<br><hr><br>
<b>***** $emailSubject ***</b><br>
<br><hr><br>

<b>Name:</b><br>
$leadname <br><br>

<b>Email:</b><br>
$leademail <br><br>

<b>Phone:</b><br>
$leadphone <br><br>

<b>IP Address:</b><br>
$leadip <br><br>

EOD;

$headers = "From: $leademail\r\n";
$headers .= "Content-type:  text/html\r\n";
$success = mail($webMaster, $emailSubject, $body, $headers);
// ******* PROCESS EMAILS 
```

有什么我可以添加到这个已经添加到不是太 mcuh 代码的文本中的吗？先感谢您。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T21:32:33.400

那将是：

```
$message = "Thank you for your interest. We will get back to you as soon as possible.<br />Sincerely,<br />(My Name)";
$subject = "Confirmation";

$headers2 = "From: $webMaster\r\n";
$headers2 .= "Content-type:  text/html\r\n";
mail($leademail, $subject, $message, $headers2); 
```

# iphone - 试图将 plist 文件保存到设备目录

> ID：12503106
> 
> 赞同：0
> 
> 时间：2012-09-19T21:22:52.913
> 
> 标签：iphone, ios, plist, nsdate

我正在尝试将当前日期保存到我的 plist 中，然后将 plist 提交到手机以供以后使用（和更新）。

下面的代码是我用来尝试保存日期的代码，但它似乎没有工作，因为它应该只输入“一次”（第一次创建文件后），然后每次都跳过这个..因为它已创建并可用....

但是这不起作用，我不知道为什么，这是我编写的代码；

```
NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *plistFilePath = [documentsDirectory stringByAppendingPathComponent:@"DB-Date.plist"];

    if(![[NSFileManager defaultManager] fileExistsAtPath:plistFilePath])
    {//dosnt exits

        NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"DB-Date" ofType:@"plist"];
        NSMutableArray *data = [NSMutableArray arrayWithContentsOfFile:plistPath];
        NSArray *arrValue = [data objectAtIndex:0];

        NSDate *dateValue = [arrValue objectAtIndex:0];
        dateValue = [NSDate date]; //change your value here

        [[data objectAtIndex:0] replaceObjectAtIndex:0 withObject:dateValue]; //value replaced
        [data writeToFile:plistFilePath atomically:YES];

    } 
```

// 从这里我继续使用新创建的 plist 文件

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:59:19.873

所以， mainBundle 和 NSDocumentaryDirectory 是两个不同的地方......这应该足以解决你的问题;）

您似乎有很多多余的代码...让我们在括号中执行此操作：

```
if(![[NSFileManager defaultManager] fileExistsAtPath:plistFilePath])
    {

     NSMutableArray *data = [[NSMutableArray alloc]init];

     NSDate *dateValue  = [NSDate date]; 

    [data addObject:dateValue];

    [data writeToFile:plistFilePath atomically:YES];

   } 
```

如果您喜欢答案，请标记为正确。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:33:25.623

你正在做正确的方式，但我没有得到什么是错的？你能举个例子吗？顺便说一句，如果您只有日期，那么为什么不使用[NSUserDefaults](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)而不是创建 plist 文件呢？

# mysql - 是否可以进行类似于 MySQL 的 DB2 表文件备份/恢复？

> ID：12503107
> 
> 赞同：1
> 
> 时间：2012-09-19T21:22:54.630
> 
> 标签：mysql, db2, san

我们目前使用 Dell Equalogic SAN 为我们的 MySQL 数据库创建快照，并在我们的各种开发和集成环境之间复制它们。这使我们能够在测试环境中直接处理大量生产数据。SAN 使这些卷立即可供使用（并避免复制大量数据的需要）。过程*大致*是：

*   在源卷和目标卷上停止 MySQL
*   使用 Dell Equalogic 的快照源卷
*   将源快照克隆到目标卷
*   将目标卷挂载到目标 /var/lib/mysql
*   在两者上启动 MySQL

现在我们需要在所有环境中引入一个 DB2 实例，并试图弄清楚我们是否可以用 DB2 做类似的事情。问题是：

*   这在 DB2 中可能吗？
*   我们需要克隆和挂载的关键目录是什么？
*   还有什么我们可能需要考虑的吗？

请记住，使用 SAN 是因为它允许我们对大于 150 GB 的卷进行快照和克隆，并使它们在任何环境中立即可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:42:22.580

DB2 数据库可以通过 SAN 快照备份和拆分镜像技术快速[克隆。](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.ha.doc/doc/c0006356.html)该`SET WRITE SUSPEND ON DATABASE`命令提供了一个简单而强大的开关，只要 SAN 快照完成，它就会暂停所有磁盘写入。根据源数据库服务器和目标数据库服务器之间的差异，您可能需要在流程中的特定点运行实用程序，例如`db2inidb`或。`db2relocatedb`

# image-processing - 图像识别训练

> ID：12503113
> 
> 赞同：1
> 
> 时间：2012-09-19T21:23:24.413
> 
> 标签：image-processing

我想训练我的程序来识别一组有限的图像，比如（50-100）个不同的对象。是否有图书馆可以让我为此进行培训？所以我可能有 1000 张图像，但它们都是相同的 100 个不同的对象。什么对训练来识别这些很有效。

# android - AdMob 无法让代码在 Android 开发者教程中运行

> ID：12503114
> 
> 赞同：0
> 
> 时间：2012-09-19T21:23:26.517
> 
> 标签：android

我去了 [https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals) 了解如何在我的应用中投放广告。看起来很简单，但它告诉你广告导入 com.google.ads.*；

这对我不起作用，我收到以下错误 The import com.google cannot be resolve。

我假设谷歌在 totuiol 中没有犯错，我只是在复制代码。有谁知道我做错了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:03:58.793

转到项目属性并确保将 admob.jar 文件链接到项目中。它可以在 Android SDK 文件夹中找到。如果这仍然不起作用，有时您需要创建一个 lib 文件夹并将其拖放到那里。

# jsoup - jsoup 换行

> ID：12503117
> 
> 赞同：13
> 
> 时间：2012-09-19T21:23:41.253
> 
> 标签：jsoup

我们正在使用 Jsoup.clean(String, Whitelist) 来处理一些输入，并且似乎 Jsoup 在可接受的标签之前添加了一个无关的换行符。我看到一些人在互联网上发布了这个问题，但一直无法找到解决方案。

例如，假设我们有一个非常简单的字符串，其中包含一些粗体标签，如下所示：

```
String htmlToClean = "This is a line with <b>bold text</b> within it."                                                                                                                                                       
String returnString =  Jsoup.clean(htmlToClean, Whitelist.relaxed());
System.out.println(returnString); 
```

调用 clean() 方法的结果是这样的：

```
This is a line with \n<b>bold text</b> within it. 
```

请注意，在开始的粗体标记之前附加了无关的“\n”。我似乎无法在附加的源中找到它（尽管我承认我是 Jsoup 的新手）。

有没有人遇到过这个问题，更好的是，已经找到了一些方法来避免这种额外的、不需要的字符以这种方式附加到字符串中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T21:49:15.733

嗯...还没有看到任何选项。

如果您在其中解析 html，`Document`则有一些输出设置：

```
Document doc = Jsoup.parseBodyFragment(htmlToClean);
doc.outputSettings().prettyPrint(false);

System.out.println(doc.body().html()); 
```

关闭后，您将`prettyPrint`获得以下输出：`This is a line with <b>bold text</b> within it.`

也许您可以编写自己的`clean()`方法，因为实现的方法使用`Document`'s（您可以禁用`prettyPrint`）：

**原始方法：**

```
public static String clean(String bodyHtml, Whitelist whitelist) {
    return clean(bodyHtml, "", whitelist);
}

public static String clean(String bodyHtml, String baseUri, Whitelist whitelist) {
    Document dirty = parseBodyFragment(bodyHtml, baseUri);
    Cleaner cleaner = new Cleaner(whitelist);
    Document clean = cleaner.clean(dirty);
    return clean.body().html();
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-25T09:46:58.053

## 附录：

我刚刚下载**了 Jsoup 1.7.1**，在这个版本中可以使用`clean()`-method 和 custom `OutputSettings`：

```
String html = "This is a line with <b>bold text</b> within it.";

OutputSettings settings = new OutputSettings();
settings.prettyPrint(false);

String clean = Jsoup.clean(html, "", Whitelist.relaxed(), settings); 
```

或更短：

```
String clean = Jsoup.clean(html, "", Whitelist.relaxed(), new OutputSettings().prettyPrint(false)); 
```

*（实际上它与评论中发布的解决方案相同）*

# sql - 如何在 SQLite 中执行 NULLS LAST？

> ID：12503120
> 
> 赞同：42
> 
> 时间：2012-09-19T21:23:45.460
> 
> 标签：sql, sqlite, null

我想按照[SQL:2003 扩展 T611](http://en.wikipedia.org/wiki/Order_by)`NULLS LAST`中的指定，使用所有 NULL 列最后（）对我的结果进行排序。可悲的是，SQLite 似乎不支持它。有没有聪明的解决方法？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-19T21:26:49.770

这行得通吗？

```
SELECT ....... ORDER BY COALESCE(col1,col2,col3,etc) IS NULL 
```

我对您的措辞“所有 NULL 列最后”感到困惑。如果您希望所有 NULL 值都在特定列中，请使用以下命令：

```
SELECT ....... ORDER BY col1 IS NULL 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-19T21:37:16.023

虽然我有点喜欢 Blorgbeard 的回答，但这个变体并不关心提供正确数据类型的有效“假”值。

```
ORDER BY CASE WHEN SOMECOL IS NULL THEN 1 ELSE 0 END, SOMECOL 
```

或者，即使您想使用假值，我也更愿意`IFNULL`！

```
ORDER BY IFNULL(SOMECOL,-9999) 
```

正如迈克尔所说，SQLite 使用`IFNULL`. 您也可以使用 ANSI-SQL 通用版本`COALESCE`。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2019-10-05T08:49:18.897

SQLite 3.30.0+ 支持`NULLS FIRST/LAST`子句。

> [发布历史 (v3.30.0 - 2019-10-04)](https://www.sqlite.org/changes.html)

> 2.  在 ORDER BY 子句中添加对 NULLS FIRST 和 NULLS LAST 语法的支持。

* * *

> [订购方式](https://www.sqlite.org/lang_select.html#orderby)

> SQLite 认为 NULL 值小于任何其他值以进行排序。因此，NULL 自然地出现在 ASC order-by 的开头和 DESC order-by 的末尾。**这可以使用“ASC NULLS LAST”或“DESC NULLS FIRST”语法进行更改。**

```
SELECT * FROM t ORDER BY c NULLS LAST; 
```

**[db-fiddle.com 演示](https://www.db-fiddle.com/f/kiTxgusxzjmAyKZidWZir9/0)**

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-19T21:29:29.050

你可以做这样的事情来伪造它：

```
select * from test
order by case ordercol when null then 1 else 0 end, ordercol 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-04-01T13:13:06.030

我遇到了同样的问题。我发现这可以工作：

（我没有找到`isnull`SQLite 的任何功能）

```
order by ifnull(column_what_you_want_to_sort,'value in case of null') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-02T18:33:13.277

我的解决方案是反转`priority`列的范围并使用`order by desc`（按降序排序）。这会将空值一次性放在最后。

显然，这仅在您控制`priority`排序列时才有效，但是如果您可以摆动它，那就太好了！

如果这不起作用，我发现联合查询有效。只需两个查询并在第一个和第二个上`union`添加约束。第二个查询将在第一个查询的末尾。`where not null``where null`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-02T12:11:36.897

在我的情况下，我想首先使用 NULL 列进行降序排序。我在查询后从 while 循环中将记录添加到列表中，所以我只是检查了该列是否为 NULL 并用于`ArrayList.add(0, Object)`实现此目的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-19T13:04:32.780

添加此答案以防有人在 3.30.0 之前的 SQLite 版本上寻找 ASC NULLS LAST 功能（特别是对于 TEXT 列）（因此它不可用）。

要将空值放在最后，请将它们替换为一个值，然后确保所有其他值都低于它：

```
SELECT * FROM customers ORDER BY
CASE
    WHEN Company IS NULL THEN '2'
    ELSE '1' || Company
END
ASC; 
```

此外，对于 INTEGER 列，如果需要保持数字比较（而不是用文本切换字典），那么只需将 NULL 更改为一些文本。在 SQL 比较中 TEXT > INTEGER

```
SELECT * FROM customers ORDER BY
CASE
    WHEN IntegerColumn IS NULL THEN 'null'
    ELSE IntegerColumn
END
ASC; 
```

# php - Magento 树节点集合

> ID：12503124
> 
> 赞同：1
> 
> 时间：2012-09-19T21:24:28.937
> 
> 标签：php, magento

我正在寻找可以根据 Magento 细节解释“树”、“节点”和“集合”概念的人。例如，在下面的代码中，getStoreCategories() 方法将返回 Varien_Data_Tree_Node_Collection 的一个实例，它是可枚举的，$child 将是 Varien_Data_Tree_Node 类型的对象。我一般问，Magento 的 Tree、Node 和 Collection 是什么意思。

```
foreach ($this->getStoreCategories() as $child) {
            if ($child->getIsActive()) {
                $activeCategories[] = $child;
            }

        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:06:43.817

Tree_Node_Collection 只是指数据的层次结构。

存储的数据不是一个平面集合（例如单个队列中的所有项目），而是分层的。

例如，对于类别或菜单结构，每个节点都可以有子树，这些子树本质上只是具有更多子节点的更多节点。

集合没有层次结构的概念，没有父子关系等。

树结构使得迭代更容易，例如所有子类别，包括他们的孩子，很多层次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:03:51.960

集合 - 纯数据，没有嵌套。树 - 可以嵌套的数据。node - 树的分支，可以有自己的分支。

树用于类别，因为类别可以相互嵌套。产品、订单等都是普通的结构，所以不需要使用节点，使用普通的普通集合即可。

# android - 从相机返回时，什么可能导致 Android 活动无限重新启动？

> ID：12503125
> 
> 赞同：11
> 
> 时间：2012-09-19T21:24:36.343
> 
> 标签：android, android-activity, camera, infinite-loop, restart

我的应用程序中有一个奇怪的错误，当我在拍照后从相机应用程序返回时，导致活动在无限循环中重新启动。

UI流程是这样的：

1.  主要活动->
2.  接受照片活动 -> 在 onCreate() 中使用 startActivityForResult() 打开相机
3.  相机屏幕->拍照（或取消）->返回接受照片
4.  接受照片屏幕完全创建并立即停止并在无限循环中重新创建

奇怪的是，它只发生在某些相机上。在我运行 Jellybean 的 Nexus S 上，普通相机运行正常，而 Camera Zoom FX 导致了这个错误。在我运行 ICS 的 Archos G9 平板电脑上，备用相机和 Zoom FX 都会导致该错误。

我一步步检查了代码，找不到重新启动调用的来源。当我在第二个（以及后续的）onCreate() 调用中停止调试器时，调用堆栈中有一个 ActivityThread.handleRelaunchActivity() 调用。它的 Intent 没有太多信息：action 为 null，类为 AcceptPhoto。mFlags 具有 603979776 值，我不知道如何将其转换为实际的意图标志。

不过，怪异并不止于此。在我的平板电脑上，我第一次拍照时，应用程序很好。如果我尝试拍摄第二张照片，屏幕会发疯。如果我没有拍摄第二张照片，而是返回到前一个屏幕，那么在我打开一个新活动之前一切都很好。从哪里开始并不重要，如果我一直返回到根活动并开始一个新活动，它就会开始闪烁。

我会尝试发布一些代码，但我怀疑这个错误不是由我的代码引起的，而是我在底层 Android 代码中触发了一些东西。我希望有人能指出我正确的方向，以找到解决此错误的方法。任何事情都会有所帮助，所以我感谢您的任何想法！

用于打开相机的代码（在 AcceptPhoto.onCreate() 中调用，使用实用程序类）：

```
private void openCamera(Context context) {
    Intent pictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    File tempFile = getTempFile(context);
    try {
        if (tempFile != null) {

            pictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(tempFile));

            ((Activity) context).startActivityForResult(pictureIntent, GET_ITEM_PHOTO);
        } else {
            Toast.makeText(context, "Could not create temp file", Toast.LENGTH_SHORT).show();
        }
    } catch (Exception e) {
        Toast.makeText(context, "Error opening camera " + e.getMessage(), Toast.LENGTH_LONG).show();
        e.printStackTrace();
    }
} 
```

用于显示图片的代码，在 AcceptPhoto.onActivityResult() 中调用：

```
private void displayPhoto() {
    if (cameraUtils == null) {
        cameraUtils = new CameraUtil();
    }
    previewImageView.setImageDrawable(null);
    File tempFile = cameraUtils.getTempFile(this);

    int rotation = 0;
    try {
        ExifInterface exif = new ExifInterface(tempFile.getPath());
        String orientation = exif.getAttribute(ExifInterface.TAG_ORIENTATION);
        Log.i("SPRING", "Photo orientation " + orientation);
        rotation = getBitmapRotation(Integer.valueOf(orientation));
        Log.i("SPRING", "The image needs to be rotated by " + (rotation) + " degrees");
    } catch (IOException e1) {
        e1.printStackTrace();
    }
    try {
        previewBitmap = BitmapEncoderUtil.loadPrescaledBitmap(tempFile);
        if (rotation != 0) {

            Matrix rotationMatrix = new Matrix();
            rotationMatrix.postRotate(rotation);

            int w = previewBitmap.getWidth();
            int h = previewBitmap.getHeight();

            Bitmap rotatedBitmap = Bitmap.createBitmap(previewBitmap, 0, 0, w, h, rotationMatrix, false);

            previewBitmap = rotatedBitmap;
        }
        previewImageView.setImageBitmap(previewBitmap);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

实用程序类中用于创建/检索相机保存照片的文件的方法：

```
public File getTempFile(Context context) {

    String externalStorageStateString = Environment.getExternalStorageState();
    File cacheDirectory;
    // try to save in external storage
    if (externalStorageStateString.equals(Environment.MEDIA_MOUNTED)) {
        cacheDirectory = context.getExternalCacheDir();
    } else {
        // save in internal storage
        cacheDirectory = context.getCacheDir();
    }
    File tempSnapshotFile = new File(cacheDirectory, MissionOtherActivity.ITEM_SNAPSHOT_PATH);

    // make sure the file exists, possible fix for the camera bug
    try {
        if (tempSnapshotFile.exists() == false) {
            tempSnapshotFile.getParentFile().mkdirs();
            tempSnapshotFile.createNewFile();
        }

    } catch (IOException e) {
        Log.e("SPRING", "Could not create file.", e);
    }
    return tempSnapshotFile;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-04T07:25:54.537

经过大量调查，似乎重新启动的调用来自 onConfigurationChanged。我仍然没有弄清楚为什么，但至少我知道要避免什么。

它解释了为什么有些摄像头会触发此错误而有些则不会：有些摄像头使用与我的应用程序相同的配置，而其他摄像头则没有。

编辑：经过其他调查，我发现我的扩展应用程序类中有一个错误。在 onConfigurationChanged 方法中，我通过强制某个区域设置来更改配置。这触发了新的 onConfigurationChanged() 调用，这导致了无限循环和随后的屏幕创建/销毁序列。我不知道为什么我把代码放在 onConfigurationChanged() 方法中，但我想你必须受苦才能学习:)

# ruby-on-rails - 仅在测试环境中出现 Stack Level Too Deep 错误，并且仅在运行 rake test:functionals 时出现

> ID：12503126
> 
> 赞同：1
> 
> 时间：2012-09-19T21:24:39.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, functional-testing

我正在将应用程序从 Ruby 1.9.2 上的 Rails 3.1 升级到 Ruby 1.9.3 上的 Rails 3.2。当我逐步浏览正在开发的应用程序时，一切似乎都很好。我对 rake test:units 没有任何问题。

但是当我运行 rake test:functionals 时，我的一个控制器中出现“堆栈级别太深错误”。

只为那个控制器运行测试，一切都很好：

```
ruby -Itest test/functional/administrators_controller_test.rb 
```

这是完整的错误文本（我已经安装了稍微漂亮的输出）：

```
ERROR (0:00:00.012) comes first
      stack level too deep
    @ /usr/local/rvm/gems/ruby-1.9.3-p194@rails-3.2/gems/actionpack-3.2.8/lib/abstract_controller/layouts.rb:358 
```

我确定我只是个白痴，但我对如何从框架内部获取堆栈跟踪一无所知。运行 rake test:functionals --trace 会产生相同的错误和相同的输出。我还将 config.log_level 更改为 :debug，并且取消了 Rails.backtrace_cleaner.remove_silencers 的注释！在 config/initializers/backtrace_silencers.rb 中。

我可以运行其他 rake 任务，并且 rake test:units 通过了所有测试。

有人有线索吗？我可以用一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:39:01.027

所以，事实证明这是我的 ActionMailer 功能测试的问题。在以前的 Rails 版本中，我需要包含 URL 助手：

```
# test/functional/notifier_test.rb
include Rails.application.routes.url_helpers

class NotifierTest < ActionMailer::TestCase
  test "test new user email" do
  #...
  end
end 
```

当我通过 ruby​​ 一次运行一项功能测试时，我最终发现 Notifier 因堆栈级别太深错误而失败；没有其他单独的测试运行有这个问题。但是在运行 rake test:functionals 时，它们*都*出现了问题。

注释掉包含行解决了所有功能测试中的问题。我仍然不完全确定为什么，除了我猜幕后发生了一些神奇的回调。

# jquery - 我的发帖请求有什么问题吗？

> ID：12503127
> 
> 赞同：0
> 
> 时间：2012-09-19T21:24:46.243
> 
> 标签：jquery, post

我正在尝试创建一个简单的发布请求，但据我所知，我无法从服务器获得响应，但我可能错了：

```
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript">
    $(function(){
        $.post("http://myurl.com/receiver/", { name: "Sean", email: "myemail@domain.com" }, function(data){
            var result = $.parseJSON(data);
            console.log(result);
            alert(result);
        });
    });
</script> 
```

**编辑**

打开 Chrome 开发工具给了我：

```
XMLHttpRequest cannot load http://myurl.com/receiver/. Origin null is not allowed by Access-Control-Allow-Origin. 
```

我尝试上传到我的服务器或运行 chrome，`--allow-file-access-from-files`但我收到了相同的消息

# jquery - 键入文本，然后使用 JQUERY 进行旋转和缩放——如何？

> ID：12503128
> 
> 赞同：0
> 
> 时间：2012-09-19T21:24:49.880
> 
> 标签：jquery, html

我有一个即将推出的项目，它要求我的用户能够将文本字符串输入到文本输入中，然后能够在背景图像上旋转和缩放文本。一旦他们将文本放置在背景图像上，我需要能够以某种方式将最终图像提供给购物车并最终提供给后端，以便这些定制产品的生产者可以直观地看到客户在文本放置方面想要什么。

人们建议使用 HTML5 画布元素，但我至少需要浏览器支持回到 IE7 或 8。

Fabric.JS 看起来很有希望，但我不知道。

有什么建议么。我想用 php (codeigniter) 和 JQUERY 来做这个？

# javascript - iOS Safari，视频和比例渲染缓慢问题

> ID：12503142
> 
> 赞同：7
> 
> 时间：2012-09-19T21:26:02.917
> 
> 标签：javascript, ios, mobile-safari, html5-video, scale

在`iOS5`中，我想缩放 a`div`使其大小与视口成正比。当它`div`包含一个`video`元素并且缩放级别太高时，渲染会**很慢**。

缩放是这样完成的：

```
 var scaleFactor = window.innerWidth / $("#videoContainer").width();
    $("#videoContainer").css({
        '-webkit-transform': 'scale(' + scaleFactor * 0.9 + ')',
        '-webkit-transform-origin': '0 0'
    }); 
```

[要重现，请单击此处。](http://jsfiddle.net/viebel/yhRNu/show)然后在您的`iOS`设备上，按下`Show`按钮。请注意，渲染并不平滑。

[完整的 jsfiddle 演示](http://jsfiddle.net/viebel/yhRNu/)

几点说明：

1.  该错误仅在 iOS 设备 (iPad/iPhone) 上重现，而不在桌面上重现
2.  如果`initial-scale`设置为`1.0`，则不会发生错误
3.  如果删除视频元素，则不会出现该错误
4.  该错误重现于`iOS6`
5.  我试图通过将此 css 规则集添加到 div 和 video 来触发硬件加速`{ transform: translate3d(0,0,0); -webkit-transform: translate3d(0,0,0); }`。但这没有帮助
6.  我试图删除图像并用黄色背景替换它，但它没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:06:20.023

在深入了解此特定案例的详细信息之前，您可能需要尝试添加以下规则集，这些规则集会触发 iOS 上的硬件加速：

```
transform: translate3d(0,0,0);
-webkit-transform: translate3d(0,0,0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:35:46.820

您可以尝试使用 scale3d() 而不是 scale() ，如下所示：

[http://jsfiddle.net/yhRNu/26/](http://jsfiddle.net/yhRNu/26/)

还对您的代码进行了一些调整，将设置移到点击处理程序之外，如果浏览器支持触摸，则使用“touchend”而不是“click”。

我只能访问 iPad 模拟器，但上述更改似乎提高了性能，我还会查看您正在使用的测试图像，因为它超过 1024x768，据报道这会导致 iOS webkit 上的性能问题，请参阅此处的文章（2 /3 向下 - 关于避免重绘的部分）：http: [//joehewitt.com/2011/10/05/fast-animation-with-ios-webkit](http://joehewitt.com/2011/10/05/fast-animation-with-ios-webkit)

# javascript - 创建一个重复多次的相同元素的数组

> ID：12503146
> 
> 赞同：488
> 
> 时间：2012-09-19T21:26:23.487
> 
> 标签：javascript, arrays, repeat

在 Python 中，where`[2]`是一个列表，下面的代码给出了这个输出：

```
[2] * 5 # Outputs: [2,2,2,2,2] 
```

有没有一种简单的方法可以用 JavaScript 中的数组来做到这一点？

我编写了以下函数来做到这一点，但有什么更短或更好的吗？

```
var repeatelem = function(elem, n){
    // returns an array with element elem repeated n times.
    var arr = [];

    for (var i = 0; i <= n; i++) {
        arr = arr.concat(elem);
    };

    return arr;
}; 
```

* * *

## 回答 #1

> 赞同：1057
> 
> 时间：2015-12-05T11:31:52.587

在 ES6 中使用 Array [fill()](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/fill)方法

```
console.log(
  Array(5).fill(2)
)
//=> [2, 2, 2, 2, 2]
```

* * *

## 回答 #2

> 赞同：166
> 
> 时间：2013-11-10T16:31:53.283

```
>>> Array.apply(null, Array(10)).map(function(){return 5})
[5, 5, 5, 5, 5, 5, 5, 5, 5, 5]
>>> //Or in ES6
>>> [...Array(10)].map((_, i) => 5)
[5, 5, 5, 5, 5, 5, 5, 5, 5, 5] 
```

* * *

## 回答 #3

> 赞同：120
> 
> 时间：2014-01-22T19:12:52.753

你可以试试：

```
Array(6).join('a').split(''); // returns ['a','a','a','a','a'] (5 times) 
```

**更新（2018 年 1 月 6 日）**：

现在你可以有一组重复的字符。

```
new Array(5).fill('a'); // give the same result as above;
// or
Array.from({ length: 5 }).fill('a') 
```

注意：检查有关[fill(...)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/fill)和[from(...)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)的更多信息以了解兼容性和浏览器支持。

**更新（2019 年 5 月 11 日）**：

另一种方法，不使用`fill`or `from`，适用于任何长度的字符串：

```
Array.apply(null, Array(3)).map(_ => 'abc') // ['abc', 'abc', 'abc'] 
```

> 与上述[答案](https://stackoverflow.com/a/19892144/2492924)相同。为了完整性而添加。

* * *

## 回答 #4

> 赞同：69
> 
> 时间：2012-09-19T21:34:12.933

你可以这样做：

```
function fillArray(value, len) {
  if (len == 0) return [];
  var a = [value];
  while (a.length * 2 <= len) a = a.concat(a);
  if (a.length < len) a = a.concat(a.slice(0, len - a.length));
  return a;
} 
```

它在每次迭代中将数组加倍，因此它可以通过很少的迭代创建一个非常大的数组。

* * *

注意：您还可以通过使用`push`而不是来大大改进您的功能`concat`，因为`concat`每次迭代都会创建一个新数组。像这样（仅作为如何使用数组的示例显示）：

```
function fillArray(value, len) {
  var arr = [];
  for (var i = 0; i < len; i++) {
    arr.push(value);
  }
  return arr;
} 
```

* * *

## 回答 #5

> 赞同：64
> 
> 时间：2021-02-05T21:18:09.810

## ...和 ​​Array.fill() 来救援！

以前都是手动写的才知道这个‍♂️<strong>

```
Array(5).fill('')  // =>  ['','','','','']

Array(4).fill(0)  // =>  [0, 0, 0, 0] 
```

您还可以使用 fill() + map() 轻松创建顺序数组

```
 Array(4).fill('').map((_, i) => i + ' ') // =>  ['0 ','1 ','2 ','3 ']

Array(3).fill(' ').map((flower, i) => i + flower) // =>  ['0 ','1 ','2 '] 
```

* * *

❗️使用 .fill() 创建对象和数组时要小心，因为它们是**引用类型**❗️

这意味着 Javascript 会将所有创建的项目视为同一个对象（如果您想进一步与创建的对象交互，可能会引入意外的错误）

```
// ❌ Careful when using .fill() with objects and arrays:

Array(3).fill({ value: 2 })  // =>  [{ value: 2 },{ value: 2 },{ value: 2 }] 
```

上面的行有效，但坚持使用 .fill().map() 模式会更安全。像这样：

```
//  Much better!

Array(3).fill().map(item => ({ value: 2 })) 
```

* * *

## 回答 #6

> 赞同：44
> 
> 时间：2017-02-16T06:12:38.607

`Array.from({length:5}, i => 1) // [1, 1, 1, 1, 1]`

或创建价值增加的数组

`Array.from({length:5}, (e, i)=>i) // [0, 1, 2, 3, 4]`

* * *

## 回答 #7

> 赞同：38
> 
> 时间：2014-07-09T23:09:04.653

在[lodash](http://lodash.com/)中还不错：

```
_.flatten(_.times(5, function () { return [2]; }));
// [2, 2, 2, 2, 2] 
```

**编辑**：更好：

```
_.times(5, _.constant(2));
// [2, 2, 2, 2, 2] 
```

**编辑**：更好：

```
_.fill(Array(5), 2); 
```

* * *

## 回答 #8

> 赞同：36
> 
> 时间：2020-05-13T11:47:46.427

如果您需要重复一个数组，请使用以下内容。

```
Array(3).fill(['a','b','c']).flat() 
```

将返回

```
Array(9) [ "a", "b", "c", "a", "b", "c", "a", "b", "c" ] 
```

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2013-10-10T08:12:03.273

`[c] * n`可以写成：

```
Array(n+1).join(1).split('').map(function(){return c;}) 
```

因此对于`[2] * 5`

```
Array(6).join(1).split('').map(function(){return 2;}) 
```

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2012-09-19T21:49:07.403

您还可以像这样扩展 Array 的功能：

```
Array.prototype.fill = function(val){
    for (var i = 0; i < this.length; i++){
        this[i] = val;
    }
    return this;
};
// used like:
var arry = new Array(5)​.fill(2);
// or
var arry = new Array(5);
arry.fill(2);

​console.log(arry);​ //[2, 2, 2, 2, 2] 
```

我应该注意，如果您使用 3rd-party 库，扩展内置对象的功能可能会导致问题。始终在您的决定中权衡这一点。

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2019-09-10T12:21:32.650

在 Node.js REPL 中：

```
> Array.from({length:5}).map(x => 2)
[ 2, 2, 2, 2, 2 ] 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2015-04-10T09:54:03.927

如果您需要多次重复*数组：*

```
var arrayA = ['a','b','c'];
var repeats = 3;
var arrayB = Array.apply(null, {length: repeats * arrayA.length})
        .map(function(e,i){return arrayA[i % arrayA.length]});
// result: arrayB = ['a','b','c','a','b','c','a','b','c'] 
```

受到[这个答案的启发](https://stackoverflow.com/a/20066663/667253)

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2019-08-04T09:25:27.337

使用这个功能：

```
function repeatElement(element, count) {
    return Array(count).fill(element)
} 
```

```
>>> repeatElement('#', 5).join('')
"#####" 
```

或者更紧凑的版本：

```
const repeatElement = (element, count) =>
    Array(count).fill(element) 
```

```
>>> repeatElement('#', 5).join('')
"#####" 
```

或者对于可咖喱的版本：

```
const repeatElement = element => count =>
    Array(count).fill(element) 
```

```
>>> repeatElement('#')(5).join('')
"#####" 
```

您可以将此函数与列表一起使用：

```
const repeatElement = (element, count) =>
    Array(count).fill(element)

>>> ['a', 'b', ...repeatElement('c', 5)]
['a', 'b', 'c', 'c', 'c', 'c', 'c'] 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2012-09-19T21:29:00.447

没有更简单的方法。您需要创建一个循环并将元素推送到数组中。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-04-05T13:57:21.187

试试这个：

```
"avinash ".repeat(5).trim().split(" "); 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2020-09-16T02:04:09.860

您可以使用 SpreadOpeator 和 map() 函数创建一个数组，其中同一元素重复多次。

```
function fillArray(value,len){
       return [...Array(len).keys()].map(x=> value);
   } 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2013-04-25T05:20:26.173

此函数创建一个 (length) 元素数组，其中每个元素等于 (value)，只要 (value) 是整数或整数字符串。任何十进制数字都将被截断。如果您确实需要十进制数，请将**“parseInt(** ”替换为“ **parseFloat(** ”)

```
function fillArray(length, intValue) {
     var vals = (new Array(length + 1)).join(intValue + '|').split('|').slice(0,length);
     for(var i = 0; i < length; i += 1) {
         vals[i] = parseInt(vals[i]);
     }
     return vals;
} 
```

例子：

```
fillArray(5, 7) // returns [7,7,7,7,7]
fillArray(5, 7.5) // returns [7,7,7,7,7]
fillArray(5, 200) // returns [200,200,200,200,200] 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2014-02-14T15:12:03.477

当我使用类似的数组时，上述方法出现问题

```
var array = ['foo', 'bar', 'foobar'];
var filled = array.fill(7);

//filled should be ['foo', 'bar', 'foobar', 'foo', 'bar', 'foobar', 'foo'] 
```

为了得到这个，我正在使用：

```
Array.prototype.fill = function(val){
    var l = this.length;
    if(l < val){
        for(var i = val-1-l; i >= 0; i--){
            this[i+l] = this[i % l];
        }
    }
    return this;
}; 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2014-06-23T12:34:47.383

另一个单行：

```
Array.prototype.map.call([]+Array(5+1),function(){ return '2'; }) 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2016-07-14T19:56:02.440

我今天在尝试不使用循环制作二维数组时发现了这一点。回想起来，加入一个新数组是很整洁的；我尝试映射一个新数组，但由于 map 跳过了空插槽，因此该数组不起作用。

```
"#".repeat(5).split('').map(x => 0) 
```

“#”字符可以是任何有效的单个字符。5 将是您想要的元素数量的变量。7 将是您要填充数组的值。

新的填充方法更好，我编码的时候不知道它存在，也不知道repeat是es6；我将写一篇关于使用这个技巧与 reduce 一起做很酷的事情的博客文章。

[http://jburger.us.to/2016/07/14/functionally-create-a-2d-array/](http://jburger.us.to/2016/07/14/functionally-create-a-2d-array/)

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2017-10-08T02:28:12.513

改进[Vivek 的答案](https://stackoverflow.com/a/21291851/8535397)，这适用于任何长度的字符串，以填充长度为 n 的数组：`Array(n+1).join('[string to be repeated][separator]').split('[separator]').slice(0, n)`

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2018-07-01T06:40:42.523

```
var finalAry = [..."2".repeat(5).split("")].map(Number);
console.log(finalAry);
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-07-31T18:37:35.747

如果您使用的是 lodash/underscore 之类的实用腰带，您可以这样做:)

```
let result = _.map(_.times(foo), function() {return bar}) 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-05-17T03:29:59.927

也可以用作单线：

```
function repeat(arr, len) {
    while (arr.length < len) arr = arr.concat(arr.slice(0, len-arr.length));
    return arr;
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-07-17T19:52:16.487

这可能是另一个答案。

让卡片 = ["A","2","3","4","5","6","7","8","9","10","J","Q ","K"];

让 totalCards = [...cards, ...cards, ...cards, ...cards];

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2019-01-28T09:24:24.887

我需要一种方法来重复/循环一个数组（有 n 个项目）m 次。

例如，将（人员）列表分发到一周/月。假设我有 3 个名字，我想让他们在一周内重复：

```
fillArray(["Adam", "Blair", "Curtis"], 7); // returns ["Adam", "Blair", "Curtis", "Adam", "Blair", "Curtis", "Adam"] 
```

```
function fillArray(pattern, count) {
    let result = [];
    if (["number", "string"].includes(typeof pattern)) {
        result = new Array(5);
        result.fill(pattern);
    }
    else if (pattern instanceof Array) {
        for (let i = 0; i < count; i++) {
            result = result.concat(pattern);
        }
        result = result.slice(0, count);
    }
    return result;
}

fillArray("a", 5);        // ["a", "a", "a", "a", "a"]
fillArray(1, 5);          // [1, 1, 1, 1, 1]
fillArray(["a", "b"], 5); // ["a", "b", "a", "b", "a"] 
```

# trigger.io - 使用 forge 原生 TopBar 进行页面转换

> ID：12503154
> 
> 赞同：1
> 
> 时间：2012-09-19T21:27:14.050
> 
> 标签：trigger.io, forge

有谁知道在创建过渡时是否可以让 forge API 中的本机 TopBar 元素与页面的其余部分一起动画进/出？我想让各种屏幕滑入和滑出，但即使在为 html 或 body 标签设置动画时，TopBar 也保持固定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:05:22.737

此时，[Trigger 的官方 API 文档](http://docs.trigger.io/en/latest/modules/topbar.html)仅提供了添加和删除按钮的选项。

鉴于本机顶部栏位于您正在使用的 web 视图之外，除了使用它们的 API 之外，没有办法改变它的行为。一种可能的解决方法是使用 HTML 和 CSS 在 web 视图中自己构建顶栏（这可能会导致其他问题，例如固定标题）。

# ruby-on-rails-3 - 如何在 Heroku 上的 Rails 3 中正确查找记录？

> ID：12503164
> 
> 赞同：0
> 
> 时间：2012-09-19T21:28:41.617
> 
> 标签：ruby-on-rails-3, heroku

我有一个属于用户的名为 Artist 的模型。我试图通过用户找到艺术家，但rails所做的MySQL语句无效。我收到以下错误：

```
ActiveRecord::StatementInvalid: Mysql::Error: : SELECT `artists`.* FROM `artists` WHERE `artists`.`user_id` = 1 AND `artists`.`id` = ? LIMIT 1 
```

请注意，这发生在Heroku 的*生产*环境中，但不在我的本地机器上。以下是传入的参数：

```
{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"XXXXXXXXXXXXXXXXXXXXXXXXXXXX",
 "artist"=>
  {"name"=>"Jane Doe",
   "permalink"=>"someperalink",
   "bio"=>
    "Some Bio",
   "is_active"=>"1"},
 "commit"=>"Submit",
 "action"=>"update",
 "controller"=>"artists",
 "id"=>"120"} 
```

但看起来它没有通过`id`.

有任何想法吗？需要更多信息？如果是这样，是什么？

谢谢！

# python - 用实例字段覆盖属性

> ID：12503171
> 
> 赞同：0
> 
> 时间：2012-09-19T21:29:10.477
> 
> 标签：python, python-3.x

我正在尝试实现从数据库返回的值的缓存：

```
class Foo

...

    def getTag(self):
        value = self._Db.get(self._f[F_TAG])

        setattr(self, 'tag', value)

        return value

    def _setTag(self, tag):
        self._Db.set(self._f[F_TAG], tag)

    tag = property(getTag)

...

x = Foo()        

x._setTag("20")
print(x.tag)
x._setTag("40")
print(x.tag) 
```

当我第一次处理**标签**属性时，它必须从数据库中获取值并用*实例*字段覆盖*类*字段**标签**以供后续使用，但出现错误：

 *```
Traceback (most recent call last):
  File "/home/altera/www/autoblog/core/dbObject.py", line 99, in <module>
    print(x.tag)
  File "/home/altera/www/autoblog/core/dbObject.py", line 78, in getTag
    setattr(self, 'tag', value)
AttributeError: can't set attribute 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:34:08.617

不幸的是，无法覆盖`@property`. 这是因为`@property`附加到类，而不是实例。

您可以使您的`@property`吸气剂稍微复杂一些：

```
@property
def tag(self):
    try:
        return self._db_values["tag"]
    except KeyError:
        pass
   val = self._db.get("tag")
   self._db_values["tag"] = val
   return val 
```

或者创建一个描述符来为你做缓存：

```
Undefined = object()

class DBValue(object):
    def __init__(self, column_name):
        self.column_name = column_name
        self.value = Undefined

    def __get__(self, instance, owner):
        if self.value is Undefined:
            self.value = instance._db.get(self.column_name)
        return self.value

class Foo(object):
    tag = DBValue("tag") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:38:11.393

你`x.tag`是一个属性并且没有设置器，所以当你尝试设置它时，你会因为明显的原因得到一个错误。因此，将实际值存储在“私有”字段中，例如`x._tag`并为其编写一个 getter 和 setter。

```
class Foo(object):

    _tag = None

    @property
    def tag(self):
        if self._tag is None:
            self._tag = self._Db.get(self._f[F_TAG])
        return self._tag

    @tag.setter
    def tag(self, tag):
        self._tag = tag
        self._Db.set(self._f[F_TAG], tag)

x = Foo()
print x.tag    # gets the value from the database (if necessary) or f._tag
x.tag = "bar"  # sets the value in the database and caches it in f._tag 
```*

# c# - 未明确运行应用程序时的安全提示

> ID：12503172
> 
> 赞同：1
> 
> 时间：2012-09-19T21:29:21.140
> 
> 标签：c#, automation, uac

我是 C# 编程的新手，我试图通过在 exe 中使用它们来混淆一些凭据，而不是直接从命令行运行它们。这是关于 Sysinternal 的 Autologon.exe。

命令行：
C:\Autologon.exe Admin 。Pa$$字

C#:
System.Diagnostics.Process.Start(@"C:\Autologon.exe", @"Admin . Pa$$word");

上面的命令行版本在 Windows 7 中执行时不会引发 UAC 的问题，但 C# 版本会在我执行它时提示我运行或取消。这是我编写的一个非常庞大且复杂的自动化实用程序的一小部分，因此提示很糟糕。再一次，当我执行命令行版本时，我没有收到任何提示，但是当我通过我的 C# exe 执行它时，我确实收到了提示。非常感谢您的帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:53:03.380

将其更改为以下内容：

System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
startInfo.FileName = @"C:\Autologon.exe";
startInfo.Arguments = "管理员.Pa$$word";
startInfo.UseShellExecute = 假；
System.Diagnostics.Process.Start(startInfo);

关键是 UseShellExecute = false

# wix - 将子功能设置为默认不安装

> ID：12503174
> 
> 赞同：7
> 
> 时间：2012-09-19T21:29:27.460
> 
> 标签：wix, installation, windows-installer

我有一个带有一个功能和两个子功能的 WIX 安装。我希望该功能是必需的，而这两个子功能是可选的，但默认情况下不安装。这是我的特征树：

```
<Feature Id="A" Level="3" AllowAdvertise="no" TypicalDefault="install" 
         InstallDefault="local" Absent="disallow" >
  <Feature Id="A1" Level="1" AllowAdvertise="no" />
  <Feature Id="A2" Level="1" AllowAdvertise="no" />
</Feature> 
```

我认为添加：

```
<Property Id="INSTALLLEVEL" Value=3 /> 
```

会将主要功能设置为安装，而将子功能设置为不安装。事实并非如此。默认安装所有功能。

我正在使用**WixUI_FeatureTree**。我想知道这是否会弄乱**INSTALLLEVEL 属性**。

那么我正在尝试的甚至可能吗？如何默认禁用这两个子功能？

**编辑：**有趣。我设置`INSTALLLEVEL=1000`并再次尝试，所有功能仍然设置为安装。WixUI_FeatureTree 会崩溃`INSTALLLEVEL`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T22:56:52.220

INSTALLLEVEL[属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369536%28v=vs.85%29.aspx)就像一个高水位线。如果您将其设置为 1000 并且您不希望默认选择某个功能，则必须将该功能的级别设置为 1001 或更高。它是默认安装的级别或级别以下的所有内容。

来自 MSDN：

> INSTALLLEVEL 属性是在默认情况下选择“打开”功能进行安装的初始级别。仅当 Feature 表的 Level 字段中的值小于或等于当前 INSTALLLEVEL 值时，才会安装功能。任何安装的安装级别由 INSTALLLEVEL 属性指定，可以是 1 到 32,767 的整数。有关安装级别的进一步讨论，请参阅[功能表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368585%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T11:24:37.907

再观察一次，可能更重要。

您的子功能具有 Level="1" 并且无论如何都会为任何有效的 INSTALLLEVEL 安装它们。如果您需要默认禁用它们，则应将其设置为更高的级别。像这样：

```
<Feature Id="A" Level="3" AllowAdvertise="no" TypicalDefault="install" 
         InstallDefault="local" Absent="disallow" >
  <Feature Id="A1" Level="10" AllowAdvertise="no" />
  <Feature Id="A2" Level="10" AllowAdvertise="no" />
</Feature> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T11:12:01.063

我认为您的问题在于在执行 UISequence 时覆盖 INSTALLLEVEL 属性的值。添加代码

```
<Property Id="INSTALLLEVEL" Value=3 /> 
```

在安装过程的最开始初始化属性值。但是当您从一个对话框移动到另一个对话框时，INSTALLLEVEL 属性可能会在您看到 FeathreTree 对话框之前发生变化。请验证“属性值已更改”的详细日志条目以及日志文件末尾的 INSTALLLEVEL 属性的最终值。您可能需要创建自定义操作以将 INSTALLLEVEL 设置为您需要的任何值。示例可以在 WIX 源代码中找到：SetupType 对话框正是这样做的：

```
<Control Id="TypicalButton" Type="PushButton" X="40" Y="65" Width="80" 
         Height="17" ToolTip="!(loc.SetupTypeDlgTypicalButtonTooltip)" 
         Default="yes" Text="!(loc.SetupTypeDlgTypicalButton)">
  <Publish Property="WixUI_InstallMode" Value="InstallTypical">1</Publish>
  <Publish Event="SetInstallLevel" Value="3">1</Publish>
</Control> 
```

# matlab - Matlab：从一个文本文件中导入多个数据集

> ID：12503181
> 
> 赞同：2
> 
> 时间：2012-09-19T21:29:52.400
> 
> 标签：matlab, import, octave

所以我有一个脚本，可以在不同的环境中为我解析一些数据，然后我将这些数据输出到文件中，稍后我想将其读入 MATLAB。但是，如果我将 10 个数据集写入同一个文件（理想情况），MATLAB 只会读取第一个数据集。理想情况下，我想读取包含结果的结构单元数组进口。我对如何输出文件有一些余地，但基本上它必须是简单的，我可以一次写一行。

不幸的是，仅将附加数据集作为列附加是非常困难的。以下是一些示例数据的示例：

```
DataSet1
x   y   z
3.82724 60.8234 13.0031
3.79987 60.909  -8.89291
3.75338 60.9124 19.5031
3.67715 61.0104 -24.5894
3.68124 61.0889 -20.8511
3.88438 61.1817 34.891
3.71405 61.2379 16.31
3.85504 61.245  -19.3778
4.09736 68.85   5.86954
3.39505 69.9457 64.8669
3.36033 69.9552 -58.8838
3.39427 70.9253 -26.0232
3.35769 70.9523 18.7863

DataSet2
x   y   z
3.73244 60.597  -21.6651
3.81217 60.712  -29.5505
3.74396 60.7554 -43.6225
3.70079 60.8271 -69.0996
3.87417 60.8662 -49.8068
3.74371 61.6553 34.915
3.815   61.7063 28.5842
3.88035 61.802  78.4314 
```

理想情况下，我想保持这种结构。我看到的最佳替代方案是写入大量不同的文件（不理想），或者将其写入一个长数组，然后在其中包含一些标头信息，指示每个数据集的开始位置。再次，不是一个理想的情况。有什么方法可以使用类似于 importdata() 的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:16:09.673

您可以使用文本扫描。它非常灵活，因此我相信您可以根据自己的情况进行调整。这是您的示例数据集的代码：

```
C = textscan(fd, '%f%f%f', 'TreatAsEmpty', {'x y z', 'Dataset1', 'Dataset2'}); 
```

C 是一个包含 3 个具有双值的列向量的单元格，每个 %f 一个。

```
>> C{1}

ans =

   NaN
   NaN
3.8272
3.7999
3.7534
.... 
```

如您所见，您将在有数据集分隔符的地方获得 NaN，因此您可以轻松拆分数据集。'string' 数据集分隔符必须明确指定为 TreatAsEmpty 参数（我在此处更改了 'xy z' 字符串以在字符之间包含一个空格）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T05:07:45.453

Matlab 附带的所有文本读取/导入例程都假设每个文件有 1 个数据集。可能带有一些标题行或一些随机缺失值或空白行，但这就是它们的灵活性。

如果要导入这些数据集，则必须编写自己的例程，该例程`fgetl`在循环中使用，解释和解析每一行并将其附加到（可能是新的）单元格数组中。

问题变成了：您花在编写该例程上的时间是否值得摆脱多个文件的“丑陋”，每个数据集 1 个？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:40:10.047

如果可以的话，我会鼓励你摆脱基于文本的数据的束缚。

如果您使用 Matlab 生成数据，那么您有几个简单的选择。例如，您可以使用`save`带有`-append`标志的命令将变量添加到文件中。

```
save('someFileName.mat', 'Dataset1');  %Create a file with one variable
% ... do more work
save('someFileName.mat', 'Dataset1', '-append');  %Add another variable to the dataset 
```

您还可以（截至 2012a）使用`matfile`该类来操作单个变量，例如

```
interfaceToFile = matfile('someFileName.mat','writable',true);
interfaceToFile.datasets = cell(100,1);
interfaceToFile.datasets(1,1) = {dataset1}; 
interfaceToFile.datasets(2,1) = {dataset2}; 
```

如果您使用其他方法来生成数据，我会研究 HDF5 格式。它被开发用于 C 和 Fortran 程序，并具有高效的 Matlab 接口，以及许多其他语言的实现。

如果您需要文本，那么其他答案之一可能就足够了。

# c# - 如果 HtmlAgilityPack.HtmlDocument 文档为空，我该怎么办？

> ID：12503182
> 
> 赞同：0
> 
> 时间：2012-09-19T21:30:05.477
> 
> 标签：c#

这是功能：

```
private List<string> getLinks(HtmlAgilityPack.HtmlDocument document)
        {

                List<string> mainLinks = new List<string>();
                var linkNodes = document.DocumentNode.SelectNodes("//a[@href]");
                if (linkNodes != null)
                {
                    foreach (HtmlNode link in linkNodes)
                    {
                        var href = link.Attributes["href"].Value;
                        if (href.StartsWith("http://") == true || href.StartsWith("https://") == true || href.StartsWith("www") == true) // filter for http 
                        {
                            mainLinks.Add(href);
                        }
                    }
                }

                return mainLinks;

        } 
```

有时，如果站点超时未响应或链接格式不正确，则可变文档为 nuul，例如，链接为：wdfsfdgfsdg

所以在我做的功能测试中：

```
private List<string> test(string url, int levels,DoWorkEventArgs eve)
        {

            levels = levelsTo;
            HtmlWeb hw = new HtmlWeb();
            List<string> webSites;
            try
            {
                this.Invoke(new MethodInvoker(delegate { Texts(richTextBox1, "Loading The Url:   " + url + "..." , Color.Red); }));
                HtmlAgilityPack.HtmlDocument doc =  to.GetHtmlDoc(url, reqOptions, null);
                if (timeOut == true)
                {
                    this.Invoke(new MethodInvoker(delegate { Texts(richTextBox1, " There Was A TimeOut" + Environment.NewLine , Color.Red); }));
                    timeOut = false;

                }
                else
                {
                    this.Invoke(new MethodInvoker(delegate { Texts(richTextBox1, " Done " + Environment.NewLine, Color.Red); }));
                }
                webSites = getLinks(doc); 
```

因此，假设 url 是 wdfsfdgfsdg 然后 webSites 正在调用/使用 getLinks 但由于 url 错误，变量 doc 为空，所以在测试函数或 getLinks 函数中我需要处理这种情况。我想要做的是它会告诉用户有一个超时，但也会继续处理到下一个 url。在测试函数中，我一次又一次地调用测试函数，就像爬行一样，每次变量 url 都包含不同的 url。

这是我做爬行的那一行：

```
csFiles.AddRange(test(t, levels - 1, eve)); 
```

csFiles 是一个本地列表

所以每次 url 都包含另一个链接，然后尝试获取该网站的链接。但是由于 doc 是 null 并且它转到函数 getLinks 所以在 getLinks 上就行了：

```
var linkNodes = document.DocumentNode.SelectNodes("//a[@href]"); 
```

我得到空异常并且程序停止。null 是因为文档为空。

那么我该如何处理这种情况并使程序继续到下一个链接？并且不要停止，因为它的 null 并且有一个例外。

如果是，我将更新问题并添加完整的测试功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:39:52.543

好吧，它应该像检查 null 一样简单。

```
var linkNodes;

if(document != null)
{
    linkNodes= document.DocumentNode.SelectNodes("//a[@href]");
    // other things if document is not null
}
else
{
    // handle null case
} 
```

如果您依赖文档中的信息，那么您可以尝试从其他地方获取信息，或者中止操作。你无能为力

您也可以使用`try`/`catch`

```
try
{
    //some code here
}
catch(Exception ex)
{
    //log exception, display error to user, or handle exception some way
}
finally
{
    optional block.  clean up resources
} 
```

如果您可以通过简单地检查 null 来完全避免异常，我将取决于 try/catch。

try/catch 更适合您必须处理的意外异常或您无法控制的异常。

# javascript - 手动传递此 onClick 事件

> ID：12503183
> 
> 赞同：0
> 
> 时间：2012-09-19T21:30:08.113
> 
> 标签：javascript, jquery

如何从不同的函数手动传递“this”值

jQuery

```
$('#divName ul li a').click(function() {
    $(this).addClass('active');
});
$(window).scroll(function() {
    //for condition a
    //the value of this will a

    //for condition b
    //the value of this will be
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:33:04.390

```
 var elem = '';
$('#divName ul li a').on('click',function(e){
     $(this).addClass('active');
     elem = $(this);
     alert(elem);
    e.preventDefault();
});

$(window).scroll(function(){

  // Use the elem variable here
    console.log('The Variable this is recently cliked element : '+ elem)   
 //for condition a
 //the value of this will a

//for condition b
 //the value of this will be
});​ 
```

检查这个[小提琴](http://jsfiddle.net/sushanth009/bebVt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:51:45.570

您是否尝试实现单击和滚动功能？将滚动处理程序*放在*点击处理程序中。

```
$("div").click(function(e) {
    var target = this;
    $(window).on("scroll.clickScroll", function(e) {
        // Use "target" as the reference to what was clicked on.
    }
} 
```

请注意，当单击停止时，您必须删除处理程序，如下所示：

```
$(window).off("scroll.clickScroll"); 
```

我在这里使用了事件名称间距来区分普通的窗口滚动和您专门的点击滚动。

# android - Android 图像缩放以支持多种分辨率

> ID：12503184
> 
> 赞同：1
> 
> 时间：2012-09-19T21:30:15.623
> 
> 标签：android, image, scaling

我已经将我的游戏编码为 320x480，并且我认为支持多种分辨率的最简单方法是缩放最终图像。您对此有何看法？这样做会不会有cpu效率？

我将所有图像都放在 mdpi 文件夹中，我会将其在屏幕上未缩放地绘制到缓冲区上，然后将其缩放以适合屏幕。所有用户输入也将被缩放。

我有这 2 个问题：-如何在没有 android 自动缩放的情况下绘制位图-如何缩放位图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-25T10:12:29.013

我在我的项目中多次偶然发现同样的问题，每次由于缺乏时间（和懒惰），我都会对一个不太理想的解决方案感到满意。但最近我找到了一些时间来解决这个特殊问题。这是我的解决方案，希望对您也有帮助。

```
Bitmap scaleWithAspectRatio(Bitmap image)
        {
            int imaheVerticalAspectRatio,imageHorizontalAspectRatio;
            float bestFitScalingFactor=0;
            float percesionValue=(float) 0.2;

            //getAspect Ratio of Image
            int imageHeight=(int) (Math.ceil((double) image.getHeight()/100)*100);
            int imageWidth=(int) (Math.ceil((double) image.getWidth()/100)*100);
            int GCD=BigInteger.valueOf(imageHeight).gcd(BigInteger.valueOf(imageWidth)).intValue();
            imaheVerticalAspectRatio=imageHeight/GCD;
            imageHorizontalAspectRatio=imageWidth/GCD;
            Log.i("scaleDownLargeImageWIthAspectRatio","Image Dimensions(W:H): "+imageWidth+":"+imageHeight);
            Log.i("scaleDownLargeImageWIthAspectRatio","Image AspectRatio(W:H): "+imageHorizontalAspectRatio+":"+imaheVerticalAspectRatio);

            //getContainer Dimensions
            int displayWidth = getWindowManager().getDefaultDisplay().getWidth();
            int displayHeight = getWindowManager().getDefaultDisplay().getHeight();
           //I wanted to show the image to fit the entire device, as a best case. So my ccontainer dimensions were displayWidth & displayHeight. For your case, you will need to fetch container dimensions at run time or you can pass static values to these two parameters 

            int leftMargin = 0;
            int rightMargin = 0;
            int topMargin = 0;
            int bottomMargin = 0;
            int containerWidth = displayWidth - (leftMargin + rightMargin);
            int containerHeight = displayHeight - (topMargin + bottomMargin);
            Log.i("scaleDownLargeImageWIthAspectRatio","Container dimensions(W:H): "+containerWidth+":"+containerHeight);

            //iterate to get bestFitScaleFactor per constraints
            while((imageHorizontalAspectRatio*bestFitScalingFactor <= containerWidth) && 
                    (imaheVerticalAspectRatio*bestFitScalingFactor<= containerHeight))
            {
                bestFitScalingFactor+=percesionValue;
            }

            //return bestFit bitmap
            int bestFitHeight=(int) (imaheVerticalAspectRatio*bestFitScalingFactor);
            int bestFitWidth=(int) (imageHorizontalAspectRatio*bestFitScalingFactor);
            Log.i("scaleDownLargeImageWIthAspectRatio","bestFitScalingFactor: "+bestFitScalingFactor);
            Log.i("scaleDownLargeImageWIthAspectRatio","bestFitOutPutDimesions(W:H): "+bestFitWidth+":"+bestFitHeight);
            image=Bitmap.createScaledBitmap(image, bestFitWidth,bestFitHeight, true);

            //Position the bitmap centre of the container
            int leftPadding=(containerWidth-image.getWidth())/2;
            int topPadding=(containerHeight-image.getHeight())/2;
            Bitmap backDrop=Bitmap.createBitmap(containerWidth, containerHeight, Bitmap.Config.RGB_565);
            Canvas can = new Canvas(backDrop);
            can.drawBitmap(image, leftPadding, topPadding, null);

            return backDrop;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:35:54.153

我正在开发一款游戏，我的目标是 1280x800，并且我已经制作了所有图像以匹配该分辨率。第一次启动游戏时，我会缩小所有图像以匹配当前分辨率，并使用缩放后的图像来实际绘制游戏。如果您使用的是 SurfaceView，那么您在绘制图像时应该不会遇到缩放图像的问题。只是为了 100% 确保我将图像保存在原始目录中并从那里加载它们。

要对位图进行初始缩放，您只需要[`BitmapFactory.Options`](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)在解码位图时使用 来告诉它它的目标密度以及实际显示的密度。

# objective-c - 什么是 CG 栅格数据？

> ID：12503185
> 
> 赞同：26
> 
> 时间：2012-09-19T21:30:18.783
> 
> 标签：objective-c, ios, memory-leaks, instruments, core-text

我试图在我的代码中找到另一个内存泄漏，但我似乎无法弄清楚 CG Raster Data 是什么。在通过启用自动快照的 VM Tracker 时，CG 栅格数据似乎是唯一增加的部分。这些也稳步增加，而分配没有增加。

我不完全确定 CG Raster Data 是什么，也不知道如何修复它，但是在这一点上，不断增加的占用空间最终会导致内存错误和崩溃，所以这不好！我自己进行文本渲染（使用 CoreText），所以我认为这与它有关。我也在加载图片？

下面是足迹的图像： ![页面加载时分配的峰值（应用程序加载带有图像和文本的页面），但脏内存总是增加。](../Images/fea4ec908a82fcaf8a86b35ae0a72fd2.png)

**更新：** 这个问题仍然存在，但有趣的是，我可以将它与 UIFoundations 中的泄漏关联到称为“NSConcreteGlyphGenerator”的东西。似乎只有当我在实际绘制的 CoreText 方法中的属性字符串上调用“boundingRectWithSize:”方法时才会发生这种情况。具体来说，这条线是：

```
[displayString boundingRectWithSize:CGSizeMake( self.frame.size.width, self.frame.size.height ) options:0 context:nil]; 
```

慢慢追查...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-29T04:41:02.677

我不知道“CG 光栅数据”可能包含的所有内容，但我确定它包含的一件事是……Core Graphics 分配的内存来存储光栅数据，也就是位图。

具体来说，在我的应用程序中，我使用`CGBitmapContextCreate`. `NULL`我作为参数传递`data`，以便 Core Graphics 为我分配位图内存。每像素 32 位（4 字节）的 256x256 位图需要 256 KiB = 64 页，每页 4 KiB。在 Instruments 中，我得到两个“CG 栅格数据”块，每个块 65 页。如果我注释掉其中一个位图上下文，我只会在 Instruments 中得到一个 65 页的“CG 栅格数据”块。

另一方面，我的`CATiledLayer`应用程序中也有一个。它设置了自己的图形上下文供我绘制，我相信它使用窗口服务器（在 iOS 5 上，在 iOS 6 上）也直接访问`CATiledLayer`的共享内存创建这些上下文。我没有看到任何与这些图形上下文相对应的“CG 栅格数据”块。`springboard``backboard`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-05T13:11:02.037

通过简单地反复推送和弹出视图控制器，我遇到了与 CG 光栅数据内存增加相同的问题。我花了一段时间认为这是一些绘图代码的问题。我终于把它追踪到一个没有弱引用被推送和弹出的视图控制器的委托，所以当我弹出视图控制器时，它没有被释放。CG 栅格数据恰好是该视图控制器占用空间的最大部分，所以我错误地将问题归咎于最初的问题，当时实际上是视图控制器本身没有被释放（因此，没有释放它的视图，一些其中有 CG 栅格数据）。

简而言之：如果您看到 CG Raster Data 的内存泄漏，请查看可能有视图的视图控制器，并确保它们正在被释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T03:08:22.423

这不是一个答案，但只是有人开始调查......

我认为 CG Raster Data 在 iOS 6 中是新的，但在 iOS 5 中作为 CG Image 存在。我在两个模拟器上测试过，在 iOS 5 上，CG Raster Data 不存在，但是如果你比较 iOS 6 和 iOS 5 上的总量，CG Image 几乎等于 CG Raster Data，而 CG Image 不出现在 iOS 6 上。所以我很确定他们只是将 CG Image 重命名为 CG Raster Data。

至于 CG Image 到底是什么，那么几个月来我一直试图弄清楚这一点。我认为这只是系统处理的视图布局相关的事情，你并没有真正控制，因为我的应用程序实际上没有任何 UIImages 或 CG 图像，而且我的 CG 图像内存非常高，所以它可能需要做使用核心动画和视图布局。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-02T07:14:13.047

如果您担心内存使用（89MB）有点。您是否尝试过在模拟器中模拟内存警告（模拟器 > 硬件 > 模拟内存警告）？

我的猜测是图片图像占用了内存。

您可能需要通过观察内存警告消息来释放图像：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleMemoryWarning:) name:UIApplicationDidReceiveMemoryWarningNotification object:nil]; 
```

清除`handleMemoryWarning`方法中的所有图像对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-25T23:28:08.340

当我遇到这个问题时，“CG 光栅数据”来自我从 UIGraphicsBeginImageContextWithOptions 调用 UIGraphicsGetImageFromCurrentImageContext 创建的图像。我花了一天时间才找到问题所在，最后它与图像的制作方式完全无关。在我的情况下，我在代码的另一部分无意中将图像粘贴到了我自己的 NSCache 中，而没有意识到这一点。

如果您遇到 CG 栅格数据未发布的问题，您应该考虑创建数据的来源很可能与真正的问题没有任何关系。可能是图像数据只是在您不期望的情况下被保留，而您在 Instruments 中看到的“CG Raster Data”标签只是指数据的来源。您应该检查以确保您没有在 removeFromSuperview （例如 UIImageViews ）失败时执行多个 addSubviews 之类的操作，或者将图像放入缓存、数组、强变量等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-09T11:02:44.110

不是真正的答案。但是我在解决 CG-raster-data-leak 时发现了更多提示：

*   cg-raster-data 保存 CGIMageRefs 的内存（至少从 CGBitmapContextCreateImage() 从 CGBitmapContextCreate(NULL, ...) 创建的上下文中创建
*   我的泄漏是缺少 CGImageRelease()。我使用图像作为 CALayer 的内容传递，并假设此属性包含引用。但似乎这个任务复制了图像。至少我在分配后立即调用 CGImageRelease 没有问题。

希望对某人有所帮助...

# php - unescape 不能从 php 到 javascript

> ID：12503188
> 
> 赞同：0
> 
> 时间：2012-09-19T21:30:40.033
> 
> 标签：php, javascript

```
Why my onclick function cannot unescape single quotes. 
```

这是格式： = '" ' ' ' ' " ' 双引号内的单引号弄乱了我的代码。这是我的示例代码：

```
 <?php
     $myfunction = 'onclick="tinyMCE.execCommand('mceInsertContent',false,'<img
     src=icon.gif>');return false;"'
     ?> 
```

我试过了：

使用 \'

- - - - - - - - - - - - - - 并且

分配这样的变量

$ggg = "('mceInsertContent',false,'');return false;"; 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:34:10.247

当然，单引号会弄乱您的代码，因为从 PHP 的角度来看，它不是可执行代码，它只是一个字符串，应该由您使用 \ 反斜杠正确转义，如下所示：

```
 <?php
 $myfunction = 'onclick="tinyMCE.execCommand(\'mceInsertContent\',false,\'<img
 src=icon.gif>\');return false;"'
 ?> 
```

# html - CSS div 使用视口大小而不是父大小

> ID：12503193
> 
> 赞同：1
> 
> 时间：2012-09-19T21:30:50.750
> 
> 标签：html, css

我一直在尝试通过在纯 CSS 上创建 ubuntu 徽标，以一种非常实验性的方式学习 CSS（尽管仍然很漂亮）。我现在使用的 HTML 位于[http://pastebin.com/LuUABXFq](http://pastebin.com/LuUABXFq)并且它与像素尺寸一起正常工作，但我想将这些硬编码值交换为百分比值，以允许我以任何分辨率呈现徽标并且仍然让它以良好的比例呈现出来。

在这个过程中，我一直对一个问题感到困惑：为什么#ubuntu-CoF-faceBackground 使用视口大小而不是#ubuntu-CoF-background 父实例的大小将百分比转换为像素？现在，该代码在白色正方形上呈现一个非常大的紫色矩形，而紫色矩形应该是白色正方形大小的一半。（在 Fedora 17 x64 上的 Firefox 15 和 Chromium 20 上测试）

半功能代码可以在我的 github 上找到：[https](https://github.com/Drknzz/HTML-Experiments/blob/master/UbuntuLogo.html) ://github.com/Drknzz/HTML-Experiments/blob/master/UbuntuLogo.html ，我只需要将朋友圈圆形对齐到顶部符合 ubuntu 品牌指南的文本。

# objective-c - RestKit 和拉动刷新

> ID：12503199
> 
> 赞同：1
> 
> 时间：2012-09-19T21:31:20.360
> 
> 标签：objective-c, ios, uitableview, restkit

Restkit 是否支持 UITableViews 的 Pull To 刷新手势？如果是这样，我在哪里可以找到有关如何使用它并使其正常工作的示例？

我一直在看 SVPullToRefresh 但似乎对我来说不能正常工作。我可能连接错了。RestKit 或任何其他网络服务是否有 SVPullToRefresh 的示例？我是 Objective-C 的新手，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T21:24:32.380

行！所以想通了。

我会非常简要地解释一下，以防其他人正在寻找答案。

我最终使用了带有[RestKit](https://github.com/samvermette/SVPullToRefresh)的 SVPullToRefresh。

基本上将 pullToRefresh 和 InfiniteScroll 方法连接到 View Controller 的 .m 文件中的 ObjectLoader Delegate。

对于无限滚动，您需要添加另一个计算偏移量的方法，然后将新数据添加到旧数据的数组中。然后只需将其插入表中。

# php - 单击更改所有用户的 div 内容

> ID：12503200
> 
> 赞同：0
> 
> 时间：2012-09-19T21:31:20.577
> 
> 标签：php, html

我想在单击按钮时更改 div 的内容。我可以用 jquery 轻松做到这一点，但它只在我身边。如果他们连接到页面或刷新页面，我希望为所有用户更改它。我怎样才能做到这一点？我知道它必须与 php （服务器端脚本）一起使用。有任何想法吗？为了简单起见->单击按钮->为该页面的所有访问者更改div（当然在他们刷新页面之后）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:58:18.427

这里的一个问题是如何进行会话间通信。除了细节之外，有两种方法可以做到这一点：（1）通过客户端轮询，或（2）通过服务器端广播。

**轮询**很容易，但并不理想。客户端（javascript-ajax）持续检查服务器（每隔一秒或几秒）是否有更新，当有更新时，它们会应用任何更新/消息。问题是，如果这很关键，客户端将不同步。有时，它们可能会彼此远离，而服务器不会知道。

在服务器端选项方面，您可以使用**cometd** ( [http://cometd.org/](http://cometd.org/) )。它基本上使您能够同步 Web 浏览器操作和消息单个会话。在其他 SO 问题中提到的本教程将让您快速入门 PHP-cometd 和 ajax：[http ://www.zeitoun.net/articles/comet_and_php/start](http://www.zeitoun.net/articles/comet_and_php/start)

**编辑：**正在检查此协议的使用情况，显然 gmail 和 facebook 都使用它或它的次要变体。请参阅[facebook、gmail 如何发送实时通知？](https://stackoverflow.com/questions/1086380/how-does-facebook-gmail-send-the-real-time-notification)以及[GMail是如何实现Comet的？](https://stackoverflow.com/questions/2481696/how-does-gmail-implement-comet)一些有趣的读物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T21:34:05.680

使用 ajax 发布到一个 php 页面，该页面更新一个数据库，这是内容的来源......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T21:38:25.020

您必须执行一个 ajax 函数，该函数返回页面的更改内容，然后重新加载页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T21:45:24.580

我要做的是：

1.  当按钮单击时：将新值存储到数据库中。
2.  使用 AJAX (javascript) 设置超时以每 X 秒刷新一次 div。

# android - 每个 ListView 行中的按钮按下状态问题

> ID：12503207
> 
> 赞同：1
> 
> 时间：2012-09-19T21:31:57.797
> 
> 标签：android, listview, button, android-listview, onclick

我在 ListView 行中按下按钮时遇到问题。每个 Button 的背景属性引用一个 XML 选择器文件；以便在按下按钮时选择不同的图像。我能够从 OnClickListener 获取新闻事件，但是状态选择器中断并且没有使用 `android:state_pressed="true"`and注册新闻`android:state_focused="false"`。

如果我`android:descendantFocusability="blocksDescendants"`从按钮的父/根布局 XML 中删除；那么按下状态将起作用，但无论您触摸 ListView 行的哪个位置都会触发，这很烦人。

我的问题：无法管理与内部按钮分开的行的按下/默认状态。他们互相干扰。

代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/mainListLayout"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content" 
   android:descendantFocusability="blocksDescendants">
.......... 
```

行项目按钮进一步向下：

```
<Button
        android:id="@+id/deleteButton"
        android:background="@drawable/del_button_selector"
        .....
        .....
        />
.......... 
```

和drawable/del_button_selector：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/deleteico" android:state_focused="true" android:state_pressed="false"/>
    <item android:drawable="@drawable/deletepressed" android:state_focused="true" android:state_pressed="true"/>
    <item android:drawable="@drawable/deleteico" android:state_focused="false" android:state_pressed="true" /> 
```

在最后一个选择器行中更改可绘制背景不起作用。它将显示按下的图像，但无论您单击该行的哪个位置，远离按钮。

我可以更改按钮单击事件的背景，但我需要在按钮释放时切换回默认背景，这很难捕获（？）。如果我可以在侦听器中捕获按下/释放事件，那么这仅适用于按钮。

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-15T11:30:34.937

*简单*的解决方案是设置`android:clickable="true"`为父视图。

这样它将拦截触摸事件，并且不会突出显示子视图。

在您的具体情况下：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/mainListLayout"
      android:layout_width="match_parent"
      android:layout_height="wrap_content" 
      android:clickable="true"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T15:55:09.243

你找到答案了吗？

我也遇到过这个问题。我认为 android 框架中存在错误（和/或我们面临 - 像往常一样 - 糟糕的框架设计）。但是有一个 xml 字段`android:duplicateParentState`在这种情况下没有用（说实话，我在另一个项目中使用它来*复制*父级的状态，将其设置为 true）。

所以我的解决方案是这样的（我知道它很丑，应该是一种更简单的方法）：

*   定义 2 个不同的可绘制对象：一个用于按下状态，一个用于未按下状态
*   按钮的父级定义`android:descendantFocusability="blocksDescendants"`
*   `onTouchListener`在按钮上 设置一个

后者看起来像这样：

```
 button.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                v.setBackgroundDrawable(mButtonDownDrawable); // this call is deprecated since Jelly Bean, use setBackground() instead
                break;
            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_OUTSIDE: // just in case. this is never called
            case MotionEvent.ACTION_CANCEL:
                v.setBackgroundDrawable(mButtonUpDrawable);
                break;
            case MotionEvent.ACTION_MOVE:
                final Rect rect = new Rect(v.getLeft(), v.getTop(), v.getRight(), v.getBottom());
                if(!rect.contains((int)event.getX(), (int)event.getY())){
                    // User moved outside bounds
                    v.setBackgroundDrawable(mButtonUpDrawable);
                }
                break;
            }
            return false;
        }
    }); 
```

# c# - 在 C# 中舍入。网

> ID：12503210
> 
> 赞同：1
> 
> 时间：2012-09-19T21:32:29.867
> 
> 标签：c#, rounding

我有一个 MVC3 C#.Net 网络应用程序。计算的乘积是 158 * 1.75 = 276.5。我希望这个数字四舍五入到 277。我正在使用 Math.Round 但它会向下舍入。我知道我以前在某个地方看到过这个问题。解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T21:34:17.660

使用需要 a的[重载](http://msdn.microsoft.com/en-us/library/ef48waz8.aspx)[`MidpointRounding`](http://msdn.microsoft.com/en-us/library/system.midpointrounding.aspx)

```
Math.Round(276.5, MidpointRounding.AwayFromZero); 
```

演示：http: [//ideone.com/sQ26z](http://ideone.com/sQ26z)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T21:37:02.307

如前所述，您可以使用`Math.Round(d, MidpointRounding.AwayFromZero)`.

默认情况下，.NET 使用所谓的[银行家四舍五入](http://www.xbeat.net/vbspeed/i_BankersRounding.htm)（或`MidpointRounding.ToEven`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T21:36:58.920

.NET 默认使用银行家的四舍五入；它将以 5 结尾的值四舍五入到最接近的偶数有效数字，而不总是向上（称为“语义算术四舍五入”）。原因是，如果你对一堆随机十进制数进行四舍五入，然后将它们相加，当使用银行家四舍五入时，该总和将更接近未四舍五入的数字的总和，而不是算术四舍五入的数字的总和。

要强制它使用小学舍入规则，请使用接受 MidpointROunding 枚举值的重载：

```
Math.Round(myNumber, MidpointRounding.AwayFromZero); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T21:35:30.893

采用：

```
Math.Round(value, MidpointRounding.AwayFromZero); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-19T21:34:14.407

尝试改用 Math.Ceiling

# android - Android 屏幕布局 - 多种布局和密度

> ID：12503214
> 
> 赞同：0
> 
> 时间：2012-09-19T21:32:44.803
> 
> 标签：android, layout, screen

我正在就我的应用程序中支持多个 Android 屏幕的问题寻求一些建议。

我已阅读文章[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)。我按照建议创建了 4 个 /res 布局文件夹 /layout-small、/layout-normal、/layout-large 和 /layout-xlarge。我主要使用RelativeLayouts，所有单位都以倾角测量。

在我的各种测试设备上，这一切都很好。但是，一些用户联系我说数据超出了屏幕边缘。[使用出色的Screen info 应用程序](https://play.google.com/store/apps/details?id=com.jotabout.screeninfo)进行仔细检查表明，我能够测试我的应用程序的设备具有 Normal HDPI、Normal XHDPI 和 XLarge MDPI 屏幕，但出现问题的用户设备具有大型 MDPI 屏幕。

我的 IDE 是 IntelliJ Idea，它有一个预览模式，可以让我针对许多不同的屏幕模拟测试布局。为了模拟大屏幕，我将预览模式设置为 7 英寸 WSVGA（平板电脑）。这看起来正确吗？我没有真正的大屏幕测试设备。

我不明白为什么我对某些设备有问题？当然我不需要创建超过我已经设计的 4 个布局吗？即使在 4 岁时，每次我添加一个屏幕都必须为每个屏幕更新不同的值时，这会变得非常痛苦。

其他开发人员如何在没有一系列测试设备的情况下测试不同的屏幕尺寸/密度？

*编辑* 我应该说 - 我的屏幕只包含按钮和文本视图，没有图形可言。

*编辑 2* 我添加了屏幕截图。第一张（实际上是一张照片）显示了用户设备上出现的屏幕布局（注意周五不可见）。第二个显示程序正常工作。

*编辑 3* 我已经包含了一些用于布局的 XML 代码

![时间表视图不正确](../Images/4ef61833caa38f460a9687a03ae007e7.png) ![正确的时间表视图](../Images/755bd9183ef7f394b834637793d8a165.png)

```
<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
             android:background="@drawable/paper_thin_background"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:paddingLeft="15dip"
             android:paddingTop="15dip"
    >

<TextView
        android:id="@+id/timetable_week"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="25dip"
        android:textSize="20sp"
        android:textColor="#15252D"
        android:text="@string/timetable_week"
        android:paddingTop="10dip"
        android:paddingBottom="30dip"
        />

<Spinner
        android:id="@+id/timetable_week_spinner"
        android:layout_toRightOf="@id/timetable_week"
        android:layout_height="wrap_content"
        android:prompt="@string/enterday"
        android:layout_width="140dip"
        android:entries="@array/timetable_weeks"
        android:textSize="205sp"
        android:textColor="#768766"
        /> 
```

```
 <TextView
                android:id="@+id/period_heading"
                android:layout_width="120dp"
                android:layout_height="wrap_content"
                android:textColor="#768766"
                android:text="@string/period"
                android:textSize="20sp"
                android:paddingBottom="15dip"
                android:gravity="center_horizontal"
                android:layout_below="@+id/timetable_week"
            />

            <TextView
                    android:id="@+id/monday_heading"
                    android:layout_toRightOf="@id/period_heading"
                    android:layout_width="170dp"
                    android:layout_height="wrap_content"
                    android:textColor="#768766"
                    android:text="@string/monday"
                    android:textSize="20sp"
                    android:paddingBottom="15dip"
                    android:gravity="center_horizontal"
                    android:layout_below="@+id/timetable_week"
                    />

            <TextView
                    android:id="@+id/tuesday_heading"
                    android:layout_toRightOf="@id/monday_heading"
                    android:layout_width="170dp"
                    android:layout_height="wrap_content"
                    android:textColor="#768766"
                    android:text="@string/tuesday"
                    android:textSize="20sp"
                    android:paddingBottom="15dip"
                    android:gravity="center_horizontal"
                    android:layout_below="@+id/timetable_week"
                    />
            <TextView
                    android:id="@+id/wednesday_heading"
                    android:layout_toRightOf="@id/tuesday_heading"
                    android:layout_width="170dp"
                    android:layout_height="wrap_content"
                    android:textColor="#768766"
                    android:text="@string/wednesday"
                    android:textSize="20sp"
                    android:paddingBottom="15dip"
                    android:gravity="center_horizontal"
                    android:layout_below="@+id/timetable_week"
                    />
            <TextView
                    android:id="@+id/thursday_heading"
                    android:layout_toRightOf="@id/wednesday_heading"
                    android:layout_width="170dp"
                    android:layout_height="wrap_content"
                    android:textColor="#768766"
                    android:text="@string/thursday"
                    android:textSize="20sp"
                    android:paddingBottom="15dip"
                    android:gravity="center_horizontal"
                    android:layout_below="@+id/timetable_week"
                    />
            <TextView
                    android:id="@+id/friday_heading"
                    android:layout_toRightOf="@id/thursday_heading"
                    android:layout_width="170dp"
                    android:layout_height="wrap_content"
                    android:textColor="#768766"
                    android:text="@string/friday"
                    android:textSize="20sp"
                    android:paddingBottom="15dip"
                    android:gravity="center_horizontal"
                    android:layout_below="@+id/timetable_week"
                    />

    <!-- PERIOD 1-->

            <TextView
                    android:id="@+id/p1_heading"
                    android:layout_below="@id/period_heading"
                    android:layout_width="120dp"
                    android:layout_height="wrap_content"
                    android:textColor="#768766"
                    android:text="@string/p1"
                    android:textSize="20sp"
                    android:paddingBottom="15dip"
                    android:gravity="center_horizontal"
                    />

            <TextView
                    android:id="@+id/monp1"
                    android:layout_below="@id/period_heading"
                    android:layout_toRightOf="@id/period_heading"
                    android:layout_width="170dp"
                    android:layout_height="wrap_content"
                    android:textColor="#15252D"
                    android:text="@string/blank"
                    android:textSize="20sp"
                    android:paddingBottom="15dip"
                    android:gravity="center_horizontal"
                    />

            <TextView
                    android:id="@+id/tuep1"
                    android:layout_below="@id/period_heading"
                    android:layout_toRightOf="@id/monp1"
                    android:layout_width="170dp"
                    android:layout_height="wrap_content"
                    android:textColor="#15252D"
                    android:text="@string/blank"
                    android:textSize="20sp"
                    android:paddingBottom="15dip"
                    android:gravity="center_horizontal"
                    />

            <TextView
                    android:id="@+id/wedp1"
                    android:layout_below="@id/period_heading"
                    android:layout_toRightOf="@id/tuep1"
                    android:layout_width="170dp"
                    android:layout_height="wrap_content"
                    android:textColor="#15252D"
                    android:text="@string/blank"
                    android:textSize="20sp"
                    android:paddingBottom="15dip"
                    android:gravity="center_horizontal"
                    />

            <TextView
                    android:id="@+id/thup1"
                    android:layout_below="@id/period_heading"
                    android:layout_toRightOf="@id/wedp1"
                    android:layout_width="170dp"
                    android:layout_height="wrap_content"
                    android:textColor="#15252D"
                    android:text="@string/blank"
                    android:textSize="20sp"
                    android:paddingBottom="15dip"
                    android:gravity="center_horizontal"
                    />

            <TextView
                    android:id="@+id/frip1"
                    android:layout_below="@id/period_heading"
                    android:layout_toRightOf="@id/thup1"
                    android:layout_width="170dp"
                    android:layout_height="wrap_content"
                    android:textColor="#15252D"
                    android:text="@string/blank"
                    android:textSize="20sp"
                    android:paddingBottom="15dip"
                    android:gravity="center_horizontal"
                    /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:57:15.607

不是构建应用程序的好方法。当您有随机的静态布局（即未分类为表格或网格或列表）时，您可以自由使用单个视图，但是当您有动态和分类布局时，使用大量视图不是一个好主意，而且它真的很麻烦而且难以管理。

> 例如。在您的情况下，您需要显示表格或数据网格。您已经使用大量文本视图实现了这一点。现在在某些设备上它会适合，而有些则不会。您可以使用像网格视图这样的动态视图通过小代码轻松实现。
> 如果您使用网格视图，那么您只需要一个网格视图和一个文本视图作为它的项目。现在根据设备大小，您可以更改列宽（文本项的大小），并且布局可以轻松适应任何设备。

如果您需要支持多个设备，那么您需要使用 xmls（不同文件夹中的不同 xmls）和代码的组合。

一个非常好的GridView 教程[链接。](http://www.mkyong.com/android/android-gridview-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:56:40.400

我意识到我遇到的问题与我使用相对布局结合 DIP 测量有关。以这种方式支持大量设备是不可能的。

相反，我返回并使用 android:weightSum 和 android:layout_weight 重新设计了我的应用程序中的每个屏幕。

从理论上讲，这应该使我的应用程序更适应不同的屏幕尺寸。

# c# - 为什么 ComboBox1_SelectedIndexChanged 的 事件处理程序永远不会在 C# 中执行

> ID：12503215
> 
> 赞同：0
> 
> 时间：2012-09-19T21:32:50.297
> 
> 标签：c#, combobox, event-handling

我不知道如何为 SO 记录这个问题。我正在用 WinForm 和 C# 编程。向窗口添加了一个组合框并为其编写了事件处理程序。此窗口上的所有其他控件都生成它们的单击事件，但不生成组合框？它应该没有任何内容，但是无论我单击下拉箭头或组合框本身多少次，事件处理程序都不会执行。

```
private void InitializeComponent()
    {

        // 
        // comboBox1
        // 
            this.comboBox1.AllowDrop = true;
            this.comboBox1.FormattingEnabled = true;
            resources.ApplyResources(this.comboBox1, "comboBox1");
            this.comboBox1.Name = "comboBox1";
            this.comboBox1.SelectedIndexChanged += new System.EventHan(this.comboBox1_SelectedIndexChanged);
        // 
    } 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:38:16.417

根据您的描述，听起来您只是单击下拉菜单，期望它触发事件。您实际上是在菜单中选择了不同的选项，还是只是单击箭头？ *仅在您更改*菜单中的选定选项`SelectedIndexChanged`时触发。此外，在你的代码中，你有这个：

 *```
this.comboBox1.SelectedIndexChanged += new System.EventHan(this.comboBox1_SelectedIndexChanged); 
```

实际上是这样吗？那不应该编译。应该：

```
this.comboBox1.SelectedIndexChanged += new System.EventHandler(this.comboBox1_SelectedIndexChanged); 
```

编辑：

好吧，我想我知道发生了什么事。您在哪里双击设计器中的控件来连接事件？如果是这样，则连接该控件的*默认*事件。所以对于一个按钮，默认是`Click`事件。对于组合框，默认是`SelectedIndexChanged`事件，*而不是*“点击”事件。要`Click`在您的 上连接事件，请`ComboBox`在设计器中打开表单。然后在设计器中选择 ComboBox，然后按 CTRL + W、P。这将打开控件的属性窗口。单击该窗口顶部的闪电图标，它将显示您可以在控件上使用的所有事件。在列表中找到“Click”并双击它，它将连接事件并将您带到该事件的新处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:41:18.303

```
this.comboBox1.SelectedIndexChanged += new System.EventHandler(this.comboBox1_SelectedIndexChanged); 
```

要不就

```
this.comboBox1.SelectedIndexChanged += this.comboBox1_SelectedIndexChanged; 
```*

# c - 使用 ucnv_toUnicode 进行 ICU 转换

> ID：12503216
> 
> 赞同：1
> 
> 时间：2012-09-19T21:32:58.290
> 
> 标签：c, unicode, icu

我是 ICU（IBM 的 unicode 库）的新手。我正在分块读取一个大文件，并尝试将其从 UTF-8 转换为 UTF-16。

我正在使用 ucnv_toUnicode，我遇到了一个问题：如何确定转换器写入目标的字节数？

```
 ucnv_toUnicode(conv, &target, targetLimit, 
                   &source, sourceLimit, NULL,
                   feof(f)?TRUE:FALSE,         
                   &status); 
```

目标是一个 4096 字节的缓冲区。

根据 api 文档，它会被 ucnv_toUnicode 移动到最后一个 UChar 复制之后的位置。似乎我应该能够在目标和原始位置之间进行某种算术来确定这一点，但我是 C 的新手。有人可以帮帮我吗？

现在假设我想 fwrite() 放入目标中的内容。对于单位的大小和数量，我会传递给 fwrite 什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:12:55.900

正如文档所说：

> Target [...] 在输出缓冲区中第一个可用的 UChar 处开始指针，并在最后一个写入输出的 UChar 之后结束。

所以很简单：

```
char input[SLEN];
UChar output[TLEN];

char const * source = input;
UChar * target = output;

ucnv_toUnicode(conv, &target, output + TLEN,
               &source, input + SLEN, NULL, feof(f), &status); 
```

现在您已将`target - output`UChars 写入输出缓冲区。

输入也是如此；您将消耗`source - input`字符（= 字节）。

# jquery - 将初始高度设置为响应式容器 HTML/CSS

> ID：12503217
> 
> 赞同：0
> 
> 时间：2012-09-19T21:33:00.160
> 
> 标签：jquery, html, css, responsive-design

所以，我正在做我的第一个响应式设计，作为一个控制狂，这让我非常恼火，但切中要害。

我做了一个典型的布局，顶部有一个旋转木马。整个页面重新调整大小很好，这不是问题。

我的问题是，由于滑块包含相当大的图像，因此首先加载下面的内容，然后在加载滑块时将内容向下移动。这是意料之中的，通常我会为滑块容器设置一个固定的高度，以防止这种移动。

现在出现了问题 - 我无法为响应式容器设置固定高度，而且我不知道如何防止内容转移。

编辑

我创建了一个 jsFiddle 来解释这个问题，但由于它缓存了图像，你必须在本地运行输出 html 才能看到内容的变化。

[http://jsfiddle.net/4mZyF/7/](http://jsfiddle.net/4mZyF/7/)

大家平时都做什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-28T10:17:27.943

已经好几年了，但最近我不得不处理它；测量您最初的图片尺寸以获得比例：我的图片是 1920X480 像素，因此比例为 25%。赋值给容器的css, height: 0; 底部填充：25%；并且会工作（希望如此）:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:48:51.063

您的问题实际上可以通过以下方式解决：

1.  在图像标签上设置尺寸
2.  默认情况下显示第一个图像（它们已经在您的源中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T00:48:05.010

您找到解决此内容转移的方法了吗？我遇到了完全相同的问题，也很难修复它。到目前为止，我为显示的 li 创建了一个非常快的 .hide(1)，然后创建了一个较慢的 .fadeIn(300)。它工作正常，但并不完美。如果您可以让文章向下滑动，您可以使用 .slideDown()，它的效果非常好 - 主要是因为内容会自行向上滑动，并且文章可以将其向下推。问题是我不希望图像向下滑动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T00:55:54.190

您可以存储每个图像的原始大小，计算图像将要经过的空间的宽度，从而计算图像的高度，然后为图像容器的高度设置动画，以便下面的文本可以平滑地上下移动？

即使这样，具有不同高度的图像也可以用轮播上下移动内容，除非我误解了这个概念，否则用户的眼睛也很难看！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T21:50:09.013

如果所有图像最初的宽度/高度相同，则可以使用滑块包装器的宽度来预测图像的高度并将包装器的高度设置`min-height`为匹配：

```
$(document).ready(function(){
    var widthOfWapper = $('.slider-wrapper').width();
    var widthOfImages = 940;
    var heightOfImages = 480;
    var imageScale = widthOfWrapper / widthOfImages;

    $('.slider-wrapper').css({
        'min-height': (heightOfImages * ImageScale) + 'px';
    });
}); 
```

不理想，但它可能适用于您的场景。

# javascript - 将鼠标坐标转换为 3D 平面图

> ID：12503219
> 
> 赞同：6
> 
> 时间：2012-09-19T21:33:10.053
> 
> 标签：javascript, jquery, 3d, drag-and-drop, mouse-coordinates

我正在 javascript/jquery 中构建某种拖放应用程序（基于 DOM，而不是画布）。

这个想法是能够在 3D 场景中拖动 div（在 3D 中旋转的 div）。

它适用于 2D 计划，问题是当我在 3D 中旋转场景时，对象位置不反映实际鼠标位置，而是以 3D 转换的坐标

图解示例： ![例子](../Images/1361ed6b28abde1157c6610807b25200.png)

[JSFIDDLE 上的示例](http://jsfiddle.net/JulianG/Aubcr/)

我希望对象相对于鼠标的绝对位置移动。

我这样计算鼠标位置：

```
document.addEventListener(gestureMove, function (event) {
  if (mouseDown == true) {
  event.preventDefault();
  moveX = (event.pageX - $('#scene').offset().left);
  moveY = (event.pageY - $('#scene').offset().top);
}

#scene { 
  width: 1000px;
  height: 1000px;
  -webkit-transform-style: preserve-3d;
  -webkit-transform: rotateX( 35deg ); 
} 
```

早期的解决方案是根据初始位置计算鼠标位置与对象之间的差异，并在拖动过程中将其添加到对象位置。它正在工作，但动画真的很不稳定，而且一点也不流畅。

我确信有一种更简单的方法可以获取相对于 3D 计划的鼠标坐标，但目前无法找到真正的解决方案。

关于这个主题的大多数搜索结果都指向面向游戏的语言，或 canvas/webgl 问题。

有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:40:55.203

假设您的鼠标位置是屏幕的绝对位置，并且您想直接根据鼠标位置在 3D 平面上抓取和滑动对象：

您可以将 3D 目标平面表示为：

*   3D 原点`O`
*   两个 3D 向量`U`和`V`，表示 U 轴和 V 轴的方向

那么，一个给定的与平面坐标对应的 3D 点`[u,v]`为：

```
point3d P = O + u*U + v*V 
```

然后，您可以组合将这个特定 3D 点映射到屏幕的操作；这通常用 3D 变换矩阵`ModelMatrix`、`ViewMatrix`和`ProjectionMatrix`以及由 2D 屏幕原点`origin_2d`和 2D 缩放矢量确定的视口变换来描述`scale_2d`。为了以一种容易逆转的方式解决问题，通过向`.w`每个坐标添加 - 坐标，将所有内容提升为齐次坐标。这个额外的坐标作为一个比例因子——要返回笛卡尔坐标，您需要将齐次`.x`和`.y`值除以`.w`值：

```
P_hom = [u, v, 1] * [U.x, U.y, U.z, 0] = [u, v, 1] * TexMatrix
                    [V.x, V.y, V.z, 0]
                    [O.x, O.y, O.z, 1]

P_clip_hom = P_hom * ModelMatrix * ViewMatrix * ProjectionMatrix
           = P_hom * ModelViewProjectionMatrix

screenpos_hom = P_clip_hom * [scale_2d.x     0        0] = P_clip_hom * PortMatrix
                             [   0        scale_2d.y  0]
                             [   0           0        0]
                             [origin_2d.x origin_2d.y 1]

So, screenpos_hom = [u, v, 1] * TexMatrix * ModelViewProjectionMatrix * PortMatrix
                  = [u, v, 1] * TexToScreenMatrix

-> [screenpos.x, screenpos.y] = [screenpos_hom.x, screenpos_hom.y] / screenpos_hom.w 
```

请注意，这`TexToScreenMatrix`是一个 3x3 矩阵；你应该能够反转它：

```
UV_2d_hom = [screenpos.x, screenpos.y, 1] * (TexToScreenMatrix)^-1

-> [u, v] = [UV_2d_hom.x, UV_2d_hom.y] / UV_2d_hom.w 
```

最后，您可以`[u,v]`直接使用坐标，也可以使用它们重新创建 3D 点`P`，如上所述。

# java - 在java中获取文件扩展名

> ID：12503221
> 
> 赞同：4
> 
> 时间：2012-09-19T21:33:14.640
> 
> 标签：java, file

我在获取给定文件名的扩展名时遇到问题。我收到 1 个文件 URL。
它可能像

```
/var/www.dir/file.tar.gz OR /var/www.dir/file.exe 
```

现在我需要从给定的 URL 中拆分文件扩展名（如 .tar.gz 或 .exe）。URL 由用户动态给出。任何人请帮助我，如何解决这个问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T12:45:23.720

这不是一项可怕的复杂任务，而是反复发生的任务。看起来像是可以自己快速生产的东西——而且确实可以。但是您仍然应该为此使用现成的、经过测试的库：[Apache IO Tools](http://commons.apache.org/io/)，特别是[FilenameUtils#getExtension](http://commons.apache.org/io/api-release/org/apache/commons/io/FilenameUtils.html#getExtension%28java.lang.String%29)。这样可以避免令人毛骨悚然的错误或不一致。此外，您还会获得许多其他有用的、经过测试的东西。

当然，在双文件扩展名的情况下，您可能需要多次使用这些方法，因为库无法猜测您需要扩展名的级别。它是一个`.gz`文件，只有在解压缩后它才是一个`.tar`文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T21:41:52.610

您可以使用`lastIndexOf`和的组合`indexOf`：

```
String s = "/var/www.dir/file.tar.gz";
String file = s.substring(s.lastIndexOf("/"));
String extension = file.substring(file.indexOf(".")); // .tar.gz 
```

**[演示](http://ideone.com/oKxjr)**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T21:40:02.260

您可以执行以下操作：

```
String str = "/var/www.dir/file.tar.gz";
Matcher m = Pattern.compile(".*/.*?(\\..*)").matcher(str);
if (m.matches()) {
   fileExtension = m.group(1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T14:47:54.980

您可以使用此代码获取文件扩展名

```
public static String getFileExtension(String filename)
{
if (filename == null) {
            return null;
}
int lastUnixPos = filename.lastIndexOf('/');
int lastWindowsPos = filename.lastIndexOf('\\');
int indexOfLastSeparator = Math.max(lastUnixPos, lastWindowsPos);
int extensionPos = filename.lastIndexOf('.');
int lastSeparator = indexOfLastSeparator;
int indexOfExtension = lastSeparator > extensionPos ? -1 : extensionPos;
int index = indexOfExtension;
if (index == -1) {
  return "";
} else {
  return filename.substring(index + 1);
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T15:44:01.123

假设 URL 模式为：**"/somurl/blah-blah/filename.extension"**。我建议使用以下代码片段来解决您的问题。

```
String getFileExtension(String url) {
    String[] urlSplit = url.split("/");
    String filename = urlSplit[urlSplit.length - 1];
    String[] nameSplit = filename.split("[.]");
    StringBuffer fileExtension = new StringBuffer();
// to prevent appending . after extension type                                      
    if (nameSplit.length > 1) {
        for (int index = 1; index < nameSplit.length; index++) {
            if (index != nameSplit.length - 1)
                fileExtension.append(nameSplit[index] + ".");
            else
                fileExtension.append(nameSplit[index]);
        }
    } else {
        fileExtension.append(nameSplit[0]);
    }
    return fileExtension.toString();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T21:36:04.467

似乎最简单的解决方案是为异常值（如 .tar.gz）创建单独的案例，并将其余部分视为相同（即，处理最后一个`.`字符之后的所有内容）。

包含多个字符的扩展`.`非常罕见，以至于您不需要复杂的方法来解析出您需要的内容。所以：

```
int length = url.length();
String extension = null;
if(url.substring(length-7).equalsIgnoreCase(".tar.gz")) {
    //special case
} else {
    extension = url.substring(url.lastIndexOf("."));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-19T21:42:42.267

我刚刚意识到我读错了你的问题。不过，您可以用类似的方法收集扩展名

```
String yourString = "/your/whole/path.ext.si.ons";
String[] pathPieces = yourString.split("/"); // [ "your", "whole", "path.ext.si.ons" ]

String lastPiece = pathPieces[pathPieces.length - 1];
String[] namePieces = lastPiece.split("."); // [ "path", "ext", "si", "ions" ] 
```

此时，第一部分可能是您的名字，其余部分将是扩展名。然后，您可以加入这些以获得您的扩展类型。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-19T21:36:48.470

获取文件输入，然后使用“。”将其拆分。作为分隔符也许？设置分隔符：

```
Scanner line_scanner = new Scanner(line).useDelimiter("."); 
```

读取文件 URL 两次，一次用于文件名，一次用于扩展名。

# php - Magento 迁移后丢失了很多目录图像

> ID：12503225
> 
> 赞同：0
> 
> 时间：2012-09-19T21:33:38.463
> 
> 标签：php, mysql, magento, image-processing, magento-1.6

我最近将一个 magento 安装移到了新服务器上。

一切都很好，我得到了一个新的野兽来快速运行我的电子商务，但不幸的是我注意到大量的图像丢失了......有些在那里，有些没有......可能出了什么问题？我重新同步了媒体目录，在我看来，新位置正试图在另一个媒体/目录路径下找到它们......

我该如何解决？实际上我是通过手动重新上传图像来完成的，但这不是一个快速的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:45:28.147

没有足够的信息来定位问题。

1) 但在大多数情况下，问题出在文件夹和文件名上。如果您从 windows pc 复制文件，您会丢失一些文件。

例子：

*   /media/catalog/product/D/DSC.jpg
*   /media/catalog/product/d/dsc001.jpg

这两个文件都将在 D 或 d 文件夹中，而不是在两者中。

2) 第二种可能性

由于某些原因，旧服务器上的原始文件丢失了，但缓存文件可用 - 所以视觉上的网站很好。

3) 第三种可能性

您没有足够的权限复制某些媒体文件。

# java - Play Framework 中 `play run` 和 `play akka start` 命令的区别

> ID：12503228
> 
> 赞同：3
> 
> 时间：2012-09-19T21:33:40.733
> 
> 标签：java, playframework, playframework-2.0, akka

我有点困惑，想解释一下。

我正在将 Java Play 2 与 Akka 演员一起使用。我通过使用启动系统`play run`。

但是，我刚刚看到一个使用该命令的视频：

```
play akka start 
```

启动一个支持 Akka 的 Play 框架。这是 Play 2 所必需的吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T21:46:47.073

据我所知，Play 2.0 不使用 akka 作为命令行参数（至少它不存在于 sbt 的帮助命令中，并且尝试使用它时出错）。`play run`和之间的区别`play start`如下：

`play run`- 以调试模式启动应用程序，并自动重新编译类（如果它们被更改并且您将刷新浏览器窗口，您的应用程序将被重新编译）这是用于开发的。

`play ~run`- 与上面相同，不同之处在于，一旦检测到文件中的更改，重新编译过程就会开始（不等待浏览器的刷新）

`play start`- 在生产模式下启动应用程序，无需重新编译，性能更好，这适用于应用程序的日常运行。

对于最终生产版本，最好选择准备应用程序的[独立版本。](http://www.playframework.org/documentation/2.0.3/ProductionDist)

# .net - C++/CLI 和 CMake

> ID：12503229
> 
> 赞同：10
> 
> 时间：2012-09-19T21:33:48.390
> 
> 标签：.net, c++-cli, cmake

我正在尝试使用 cmake 设置 C++/CLI 项目。我已经使用 Visual Studio 2010 成功地做到了这一点，但我现在正在使用需要 Visual Studio 2008 的旧解决方案。在 Visual Studio 2010 中，像这样设置我的 cmake 就足够了：

```
set_target_properties(${PROJECT_NAME} PROPERTIES VS_DOTNET_REFERENCES "${CMAKE_CURRENT_SOURCE_DIR}/../OrionMaster/3rdParty/GMap.NET.Core.dll;System;System.Core;System.Data;System.Drawing;System.Xml;WindowsBase")
set_target_properties(${PROJECT_NAME} PROPERTIES COMPILE_FLAGS "/clr /EHa")
set_target_properties(${PROJECT_NAME} PROPERTIES DEBUG_POSTFIX "d")

if(CMAKE_CXX_FLAGS_DEBUG MATCHES "/RTC1")
   string(REPLACE "/RTC1" " " CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG}")
endif()

if(CMAKE_CXX_FLAGS MATCHES "/EHsc")
   string(REPLACE "/EHsc" "" CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS}")
endif() 
```

然后，当我在 Visual Studio 2010 下检查该项目时，我可以看到所有引用并且“公共语言运行时支持”已打开。当我在 Visual Studio 2008 中尝试时，我没有看到任何引用，并且项目设置为“无公共语言运行时支持”如果我再查看编译器选项，我可以看到 /clr 正在传递给编译器. 但是我仍然得到很多编译器错误，可能是因为它缺少引用。有谁知道正确设置它的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-09T21:06:08.737

对 VS_DOTNET_REFERENCES 属性的唯一“真实”源代码引用位于 CMake 源文件 Source/cmVisualStudio10TargetGenerator.cxx 中。

这在实践中意味着什么：VS_DOTNET_REFERENCES 仅针对 Visual Studio 2010 的 CMake 生成器和任何继承自它的生成器实现。（现在存在于 VS 2012 和 2013 的最新 CMake 版本中......）

修改 CMake 源代码以支持 Visual Studio 早期版本的此属性可能是可能的，但目前尚未完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-15T22:30:59.297

正如@DLRdave 指出的那样，CMake 仅对 Visual Studio 2010 生成器执行此操作。

试试这个解决方法，而不是`VS_DOTNET_REFERENCES`其他生成器：

```
# Note that /FU and ${asmPath} must not be separated by a space, else CMake
# will remove duplicate "/FU" options.
target_compile_options(target PRIVATE "/FU${asmPath}") 
```

对于像`System.dll`,`PresentationCore.dll`等系统程序集，您应该通过`asmPath`. 您需要使用参考程序集，而不是计算机上未安装的程序集。例如，对于 Visual Studio 2008 中 3.5 的目标框架，您需要按以下顺序在这些目录中搜索引用的文件：

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\v3.5
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\v3.0
C:\Windows\Microsoft.NET\Framework\v2.0.50727 
```

您会注意到，如果您使用 MSBuild 构建标准 C# 或 C++/CLI 项目，您会看到它还将绝对路径传递到上述位置的文件（尝试检查构建日志）。除了上面显示的旧 v2.0 位置之外，您*不*希望在上述位置之外使用非参考程序集。

有关参考程序集的更多信息：http: [//blogs.msdn.com/b/msbuild/archive/2007/04/12/new-reference-assemblies-location.aspx](http://blogs.msdn.com/b/msbuild/archive/2007/04/12/new-reference-assemblies-location.aspx)

不幸的是，要真正了解解决这些位置的规则，您必须在`C:\Windows\Microsoft.NET\Framework\v3.5\Microsoft.Common.targets`文件中卑躬屈膝。它没有完全公开记录。 **另请注意，这些搜索/解析规则与为`csc.exe /reference`或`cl.exe /FU`标志记录的规则不同。这些规则看起来他们倾向于使用运行时程序集，而不是引用程序集——这是不正确的。**

# amazon - 亚马逊从 API 购买 Kindle 书籍

> ID：12503231
> 
> 赞同：8
> 
> 时间：2012-09-19T21:34:04.687
> 
> 标签：amazon, kindle

有没有办法以编程方式检索用户购买的 Kindle 电子书列表？

我已经在 SO 上广泛搜索了答案，但是我能找到的几个相关问题是古老的。亚马逊文档也不是很有帮助，因为据我所知，亚马逊联合计划 API 只允许您对亚马逊的产品数据库进行查找，它不允许您检索登录用户的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-16T00:50:12.757

**是的，有**。由于 Kindle 的管理网页臃肿且极其缓慢，我花了几个小时寻找一种创建自己的方法。到目前为止，只有一个用于列出和删除标题（书籍和个人文档）的函数库，但您可以在它之上制作有用的东西。[你可以在这里找到 Python 版本](https://github.com/fatso83/amazon_fiona)和[JS 版本](https://github.com/fatso83/amazon_fiona_js)。

这是一个 alpha 质量的逆向工程软件，在我写这篇文章的时候确实有几分钟的历史，但如果它让你发痒......

注意：它不适合第三方，因为您需要用户的电子邮件和密码。对于该信息的一般、安全的第三方访问，您需要亚马逊方面的 OAuth 支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T22:40:09.880

不可以。用户购买历史记录在外部不可用。反过来想一想，您是否希望亚马逊将您购买的所有商品都提供给第三方？我知道我不会，而且我怀疑大多数客户也不会。因此，这样的 API 不太可能存在。

最好的办法是查找设备上下载了哪些文件并以某种方式推断标题。使用该路由时，您需要根据文件名执行 ANR（歧义名称解析），如果失败，则需要找到一种方法来破解打开文件、绕过 DRM 加密并读取元数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-05T02:06:40.283

这不如网络服务好，但是，如果您是用户（即，您正在尝试获取您拥有的标题列表）：如果您安装 Kindle for PC，那么您可以让它同步然后往里看`%LOCALAPPDATA%\Amazon\Kindle\Cache\KindleSyncMetadataCache.xml`。它包含 ASIN 和其他一些字段（标题、作者）（没有购买日期）。似乎只包含书籍，但这可能只是因为我没有将文档发送到我的 Kindle for PC。

（我希望他们将来不要加密它......）

# visual-studio-2010 - 这个函数的返回类型应该是什么？

> ID：12503240
> 
> 赞同：0
> 
> 时间：2012-09-19T21:34:18.620
> 
> 标签：visual-studio-2010, linq, c#-4.0, types, lambda

我有以下功能：

```
public void Test(IDataContext context)
{
        return (From c In context.Table<DalLinq.Claim>()
                Join cli In context.Table<DalLinq.ClaimLineItem>() On cli.ClaimId Equals c.ClaimId
                Join ri In context.Table<DalLinq.ReceiptItem>() On ri.ReceiptItemId Equals cli.ReceiptItemId
                Join r In context.Table<DalLinq.Receipt>() On r.ReceiptId Equals ri.ReceiptId
                Select c, cli, ri, r)
} 
```

我以前有这个作为函数中的变量，但现在我需要在多个地方使用它，所以我将它放在一个函数中，但我不知道我的返回类型应该是什么。在示例中它显示 void 但那是因为我不知道该放什么。

给定 return 语句中的以下 / 工作代码，这个返回类型应该是什么？

谢谢！

**编辑**

我需要它作为非执行格式，所以我不能 ToList 它或为它创建自定义对象，因为它将被哪个类调用此方法过滤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:41:15.840

### 描述

您可以创建一个代表您的方法结果的类。

### 样本

```
public class MyReturnClass 
{
    DalLinq.Claim Claim { get; set; }
    DalLinq.ClaimLineItem ClaimLineItem { get; set; }
    DalLinq.ReceiptItem ReceiptItem { get; set; }
    DalLinq.Receipt Receipt { get; set; }
}

public MyReturnClass Test(IDataContext context)
{
        return (From c In context.Table<DalLinq.Claim>()
                Join cli In context.Table<DalLinq.ClaimLineItem>() On cli.ClaimId Equals c.ClaimId
                Join ri In context.Table<DalLinq.ReceiptItem>() On ri.ReceiptItemId Equals cli.ReceiptItemId
                Join r In context.Table<DalLinq.Receipt>() On r.ReceiptId Equals ri.ReceiptId
                Select new MyReturnClass { Claim = c, ClaimLineItem = cli, ReceiptItem = ri, Receipt = r }).First();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:10:25.220

从您的代码中，我假设`context.Table<T>()`返回一个`IQueryable<T>`，如果是这种情况，您可以这样写：

```
public static class IDataContextExtensions
{
    public static IQueryable<T> MyFilter<T>(this IDataContext context, Func<Claim, ClaimLineItem, ReceiptItem, Receipt, T> resultor)
    {
        return from c fn context.Table<DalLinq.Claim>()
            join cli in context.Table<DalLinq.ClaimLineItem>() on cli.ClaimId equals c.ClaimId
            join ri in context.Table<DalLinq.ReceiptItem>() on ri.ReceiptItemId equals cli.ReceiptItemId
            join r in context.Table<DalLinq.Receipt>() on r.ReceiptId equals ri.ReceiptId
            select resultor(c, cli, ri, r);
    }  
} 
```

这样你就不需要一个'dto'类，你可以这样调用这个方法：

```
var data = myContext.MyFilter((c, cli, ri, r) => new 
                                                 { 
                                                     Claim = c, 
                                                     ClaimLineItem = cli, 
                                                     ReceiptItem = ri, 
                                                     Receipt = r 
                                                 }).ToList(); 
```

结果将是一个`IEnumerable<X>`，`X`传递给的匿名类型在哪里`MyFilter`。

免责声明：未经测试的代码，只是展示一个想法。

# arrays - 排序字符串数组

> ID：12503241
> 
> 赞同：2
> 
> 时间：2012-09-19T21:34:39.610
> 
> 标签：arrays, ios5

我有一个 txt 文件（字符串），其中的元素用“;”分隔。我将它读入一个 MSMutable 数组。我需要在日期之后的字段上进行排序。它将是整数数据。如何从字符串中获取该字段以便对其进行排序。我已经搜索了几天，找不到对此的参考。

2012/09/17;5;-54.74 2012/09/17;76;6.53 2012/09/17;66;6.53 2012/09/17;69;6.53 2012/09/17;60;6.53 2012/09/ 17;96;6.53 2012/09/17;86;6.53 2012/09/17;77;6.53

谢谢，

罗恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:43:46.860

您可以使用该`sortUsingComparator:`方法，如下所示：

```
[array sortUsingComparator: ^(id lhs, id rhs) {
    // Get the string between the first and the second semicolons:
    NSString *obj1 = [[lhs componentsSeparatedByString:@";"] objectAtIndex:1];
    NSString *obj2 = [[rhs componentsSeparatedByString:@";"] objectAtIndex:1];
    // Compare the two strings as integers:
    if ([obj1 integerValue] > [obj2 integerValue]) {
        return (NSComparisonResult)NSOrderedDescending;
    }
    if ([obj1 integerValue] < [obj2 integerValue]) {
        return (NSComparisonResult)NSOrderedAscending;
    }
    return (NSComparisonResult)NSOrderedSame;
}]; 
```

# php - 试图在 blog_post_tag = 0 上获取非对象和 id 的属性

> ID：12503242
> 
> 赞同：1
> 
> 时间：2012-09-19T21:34:44.567
> 
> 标签：php, prepared-statement

我对下面的代码有一些问题。我想要做的是判断一个标签是否已经存在于表标签中，如果存在，则获取`id`并将其放入`id`表 blog_post_tags 中，或者如果它不存在，则创建它，获取`id`并将其放入blog_post_tags 表。问题是，每当我尝试检查是否`id`已经存在时，我都会收到错误消息告诉我`trying to get property of non object`，但字段仍然被插入到另一个表中，并且带有`id`of `0`（这不是标签的有效 id）。

这是代码：

```
foreach ($tags as $tag)
{
    //search for the tag to see if it exists 
    //the problem is located in this line of code
    if($select_stmt = $mysqli->prepare("SELECT id FROM tags WHERE name = ?"))
    {
        $select_stmt->bind_param("s",$tag);
        $select_stmt->execute();
        $result = $select_stmt->get_result();

        //if the tag exists
        if($select_stmt->num_rows != 0)
        {
            if($insert_stmt = $mysqli->prepare("INSERT INTO blog_post_tags (blog_post_id, tag_id) VALUES (?,?)"))
            {
                $insert_stmt->bind_param('ii', $blogid, $result);
                $insert_stmt->execute();
            }
        }
        else
        {
            if ($insert_stmt2 = $mysqli->prepare("INSERT INTO tags (name) VALUES (?)")) 
            {
                $insert_stmt2->bind_param('s', $tag);
                $insert_stmt2->execute();
                $tagid = $mysqli->insert_id;

                if ($insert_stmt3 = $mysqli->prepare("INSERT INTO blog_post_tags (blog_post_id, tag_id) VALUES (?, ?)"))
                {
                    $insert_stmt3->bind_param('ii', $blogid, $tagid);
                    $insert_stmt3->execute();
                }
            }
        }
    }
} 
```

在此先感谢您的帮助。

# 编辑

不知何故，“试图获取非对象的属性”消失了，我怀疑它可能是与服务器的连接错误，但我真的不能说，仍然表 blog_post_tags 被填充的字段没有任何意义， “标签 ID = 0”。我怀疑这可能与此处表达的问题有关：[php 准备了 stmt 问题-在每个结果循环中更新数据](https://stackoverflow.com/questions/3193123/php-prepared-stmt-problem-update-data-at-each-result-loop?rq=1) ¿ 如果问题与上面的链接有关，我该如何更正我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:01:44.567

错误“试图获取非对象的属性”可能是因为 SQL 语句错误。我建议通过回显用于搜索记录并将该输出粘贴到 mysql 控制台中的 SQL 语句来调试您的脚本。另一件值得一提的是，“id”的列名除非用 tildas (`) 括起来，否则不起作用，因此您的语句应如下所示：

```
"SELECT `id` FROM `tags` WHERE `name` = '$name'" 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:04:20.713

好吧，我真的不知道它做了什么，但它似乎奏效了，这是没有任何错误的代码：

```
foreach ($tags as $tag)
        {
            //search for the tag to see if it exists
            if ($select_stmt = $mysqli->prepare("SELECT id FROM tags WHERE name = ?")) 
            {

                $select_stmt->bind_param("s", $tag);
                $select_stmt->execute();
                $select_stmt->store_result();

                if ($select_stmt->num_rows() > 0) 
                {

                    $select_stmt->bind_result($tagid);
                    $select_stmt->fetch();
                    if ($insert_stmt = $mysqli->prepare("INSERT INTO blog_post_tags (blog_post_id, tag_id) VALUES (?, ?)"))
                    {
                        $insert_stmt->bind_param('ii', $blogid, $tagid);
                        $insert_stmt->execute();
                    }
                }
                else
                {
                    if ($insert_stmt2 = $mysqli->prepare("INSERT INTO tags (name) VALUES (?)"))
                    {
                        $insert_stmt2->bind_param('s', $tag);
                        $insert_stmt2->execute();
                        $tagid = $mysqli->insert_id;

                        if ($insert_stmt3 = $mysqli->prepare("INSERT INTO blog_post_tags (blog_post_id, tag_id) VALUES (?, ?)"))
                        {
                            $insert_stmt3->bind_param('ii', $blogid, $tagid);
                            $insert_stmt3->execute();
                        }
                    }
                }
            }
         } 
```

希望这可以帮助遇到类似问题的任何人，另外，我想知道这个解决方案是否是最佳的，或者是否有任何方法可以改进它。

# java - 描述资源路径位置类型缺失包括：test.xsl

> ID：12503248
> 
> 赞同：0
> 
> 时间：2012-09-19T21:35:08.667
> 
> 标签：java, xml, eclipse, xslt, resources

我有 top.xsl 文件，其中包括 test.xsl 如下：

top.xsl 在运行时处理以呈现网页。

test.xsl 在运行时位于另一个 jar (test.jar) 中。

我的 Eclipse 依赖于 test.jar。

如何摆脱日食中的以下错误：

描述资源路径位置类型缺失包括：test.xsl

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:54:42.053

jar 文件中的静态内容（例如* *.xml*文件）对于从不同 jar 或 Eclipse 项目访问它的类来说是不可见的，而无需提取 jar。但是，位于*test.jar*中的类应该可以访问它。

如果有更多资源，您可以考虑为您的应用程序创建*“主目录” ，并在安装或应用程序首次运行期间放置配置或其他内容。*

或者，如果您不关心干净的解决方案并且您只需要完成这项工作，您可以简单地从 jar 中提取 XSLT 文件并使用绝对路径访问它。

希望，它有所帮助。

# bash - 用 bash 解析一天的时间范围

> ID：12503251
> 
> 赞同：0
> 
> 时间：2012-09-19T21:35:17.877
> 
> 标签：bash, date, sed, awk, grep

我希望你们中的一位 bash、sed、awk 专家可以帮助我。我有这个字符串：

```
 00:00:00:00:00:00%~%System1%~%s0:00-21:40%~%m3:10-17:10%~%t11:20-20:30%~%w05:10-9:30%~%t00:00-21:30%~%f12:00-0:00%~%s6:00-18:00 
```

它是由“%~%”分隔的字段。前两个字段可以忽略。其余字段具有白天时间范围。这应该澄清格式：

```
00:00:00:00:00:00 <--Mac
System1           <--Name
s00:00-21:40      <--Sunday 12 AM through 9:40 PM  
m03:10-17:10      <--Monday 3:10 AM through 5:10 PM
t11:20-20:30      <--Tuesday 11:20 AM through 8:30 PM
w05:10-9:30       <--Wednesday 5:10 AM through 9:30 AM
t00:00-21:30      <--Thursday 12 AM through 9:30 PM
f12:00-0:00       <--Friday 12 PM through 12:00 AM
s06:00-18:00      <--Saturday 6 AM through 6:00 PM 
```

现在诀窍......我需要确定当前系统日期时间是否在范围内。:-(

所以，如果日期返回这个：

```
 Wed Sep 19 14:26:05 UTC 2012 
```

然后它不在为星期三指定的范围内。我基本上需要一个 if 语句。如果它在范围内，我需要执行一个脚本，如果不在范围内，我需要执行一个不同的脚本。我将如何使用 bash、awk 和/或 sed 来做到这一点？

谢谢你的尽心帮助！

我开始走这条路：

```
arr=$(echo $line | tr "%~% " "\n")
for x in $arr
do
    #Now what?  Some kind of switch/case?
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:37:06.860

我相信以下脚本可以满足您的要求：

```
#!/bin/bash

# Function which returns true (0) on a time being in a range, false (1) otherwise
# call as: time_between $time $range
# where $range is of the format 'START-END'
time_between() {
    current_time=$1
    range=$2

    start_time=$(echo $range | cut -d'-' -f1);
    end_time=$(echo $range | cut -d'-' -f2);

    # Correct if ends at midnight
    if [[ $end_time -eq 0 ]]; then
        let end_time=2400
    fi

    # Test is time is within the window
    if [[ $current_time -ge $start_time && $current_time -le $end_time ]]
    then
         return 0;
    fi

    # Else the time is outside the window
    return 1;
}

# Set the line variable - you may want this to come from somewhere else in the end  
line="00:00:00:00:00:00%~%System1%~%s0:00-21:40%~%m3:10-17:10%~%t11:20-20:30%~%w05:10-9:30%~%t00:00-21:30%~%f12:00-0:00%~%s6:00-18:00"

i=0

# Extract the day and time (hours and minutes) from the `date` command
DATE=$(date)
day=$(echo $DATE | cut -d' ' -f1)

time=$(echo $DATE | cut -d' ' -f4 | cut -d: -f1-2 | tr -d ':')

# Marker for which token in the line to start the days from: token 3 is monday
dayno=2

# Set the dayno so we're pointing at the current day
case $day in
Mon)
    let dayno+=1
;;
Tue)
    let dayno+=2
;;
Wed)
    let dayno+=3
;;
Thu)
    let dayno+=4
;;
Fri)
    let dayno+=5
;;
Sat)
    let dayno+=6
;;
Sun)
    let dayno+=7
;;
esac

arr=$(echo $line | tr '%~%' '\n' | tr -d '[a-z]:')

for x in $arr
do
    let i+=1;
    #Now what?  Some kind of switch/case?
    if [[ $i -eq $dayno ]]; then
        if time_between $time $x; then
            echo "Were within the window!"
        else
            echo "We missed the window!"
        fi
    fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:46:38.150

这是使用 awk 的解决方案。我认为 getline/coprocess 功能是 GNU Awk 特有的，因此如果您认为该解决方案可以接受，请确保使用该功能。

**脚本.awk**

```
BEGIN {
    RS = "%~%"
    "date +%w"   | getline dow
    "date +%H%M" | getline now
}

NR == 1      { mac = $0; next }
NR == 2      { sys = $0; next }

NR == 3+dow  {
    str = $0
    gsub(/[smtwf:]/, "", str)
    split(str, period, "-")
    next
 }

END {
    print "MAC:",  mac;
    print "System:", sys;
    print "Now:", now;
    print "Period:", period[1], period[2] ;

    if ((now >= period[1]) && (now <= period[2])) {
         # change this ...
         cmd = sprintf("echo matched - mac: %s system: %s", mac, sys)
         system(cmd)
    } else {
         # ... and this
         system("echo not matched")
    }
} 
```

**用法**

```
$ date
Thu Sep 20 01:44:12 EEST 2012

$ echo "$data" | awk -f script.awk 
MAC: 00:00:00:00:00:00
System: System1
Now: 0145
Period: 0000 2130
matched - mac: 00:00:00:00:00:00 system: System1 
```

我希望我已经正确理解了你的问题。随时要求澄清。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T00:34:16.877

一种使用方式`GNU awk`：

```
echo "$string" | awk -f script.awk 
```

内容`script.awk`：

```
BEGIN {
    FS="%~%"
    day = strftime("%w") + 3
    time = strftime("%H%M")
}

{
    for (i=1; i<=NF; i++) {
        if (i == day) {
            gsub(/[a-z:]/,"")
            split($i, period, "-")
            if ((time >= period[1]) && (time <= period[2])) {
                print "yes, we're within today's range"
            }
            else {
                print "no, we're not within today's range"
            }
        }
    }
} 
```

# perl - 如何根据幅度大小和阈值将一个数组拆分为两个单独的数组？

> ID：12503257
> 
> 赞同：0
> 
> 时间：2012-09-19T21:35:32.470
> 
> 标签：perl, statistics

我有一个数组，其中包含大数字和小数字。我从 WireShark 运行日志后得到它。

这就是数组的样子（对于发送字节）：

```
@Array=qw(10912980
10924534
10913356
10910304
10920426
10900658
10911266
10912088
10928972
10914718
10920770
10897774
10934258
10882186
10874126
8531
8217
3876
8147
8019
68157
3432
3350
3338
3280
3280
7845
7869
3072
3002
2828
8397
1328
1280
1240
1194
1193
1192
1194
6440
1148
1218
4236
1161
1100
1102
1148
1172
6305
1010
5437
3534
4623
4669
3617
4234
959
1121
1121
1075
3122
3076
1020
3030
628
2938
2938
1611
1611
1541
1541
1541
1541
1541
1541
1541
1541
1541
1541
1541
1541
583
370
178) 
```

当你仔细观察这些阵列时，人眼可以清楚地看到一件事。确实有大数字和小数字。我想将数组拆分为两个不同的数组。这需要我设置一个阈值。数组 1 应该只有大数字 (10924534-10874126)，数组 2 应该是较小的数字 (68157-178)。顺便说一句，数组未排序。用户不会输入阈值，因此应该明智地确定。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T21:41:38.673

一旦你有了阈值，你所需要的就是有效地分割两者：

```
my (@hi, @lo);
push @{ $_ >= $threshold ? \@hi, \@lo }, $_ for @Array; 
```

它应该比每个元素调用两次`grep`或回调要快得多。`map`

抱歉，这不是一个完整的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T21:51:34.610

快速而丑陋的解决方案：

```
# threshold
my $t = 0;
$t += log $_ foreach @Array;
$t = exp ($t / @Array);
print "My threshold=$t\n";

my @hi = grep { $_ >  $t } @Array;
my @lo = grep { $_ <= $t } @Array; 
```

使用您的数据，选择的阈值是 10017，这比您的案例中的平均值或中位数要好得多！

# java - 遍历多个列表

> ID：12503258
> 
> 赞同：0
> 
> 时间：2012-09-19T21:35:43.480
> 
> 标签：java, list, collections

我从我创建的 DTO 中有两个单独的列表，这两个列表包含不同的数据集，即在第一个列表中可以说有一些“用户登录名”以及第二个最后更新的“状态”。在第二个列表中，我有所有状态记录的“用户登录名”（不仅仅是第二个最后更新的状态）。

如果想从 List1 中获取每个 'userloginname' 并在某些条件下与 list2 中的每个 'userloginname' 进行比较，这可能吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:39:43.983

如果我有误解，请纠正我，但是这样的事情怎么样：

```
for (int i = 0 ; i < list1.size() ; i++) {
    // Do something with "list1.get(i)" and "list2.get(i)"
} 
```

有了这个，您可以将给定索引 in`list1`处的项目与 in 中相应索引处的项目进行比较`list2`。如果您想将每个`list1`成员与其他每个成员进行比较`list2`，您可以执行以下操作：

```
for (int i = 0 ; i < list1.size() ; i++)
    for (int j = 0 ; j < list2.size() ; j++) {
        // Do something with "list1.get(i)" and "list2.get(j)"
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:51:30.740

使用“userloginname”作为键将其中一个列表转换为地图。

```
List<LastStatusRecord> lastStatusRecords = dto.getLastStatusRecords();
List<StatusRecord> statusRecords = dto.getStatusRecords();

Map<String, FullRecord> statusRecordIndex = new HashMap<String, StatusRecord>();
for (StatusRecord statusRecord : statusRecords) {
  statusRecordIndex.put(statusRecord.getUserLoginName(), statusRecord);
}
for (LastStatusRecord lastStatusRecord : lastStatusRecords) {
  StatusRecord statusRecord = statusRecordIndex.get(lastStatusRecord.getUserLoginName());
  // place the condition here
} 
```

# javascript - 我如何创建一个具有禁止或踢等功能的 JavaScript 聊天室

> ID：12503259
> 
> 赞同：0
> 
> 时间：2012-09-19T21:35:42.923
> 
> 标签：javascript, chatroom

所以我尝试了 javascript 并使用 000webhost.com 创建了一个简单的聊天室，但我似乎无法弄清楚如何添加功能，例如将人员提升为管理员或踢、静音或禁止人们进行聊天的功能。抱歉，如果这个问题让您头疼，但感谢帮助的人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:47:37.347

首先，仅 JavaScript 是不够的——您需要一种服务器端语言，如 Ruby 或 PHP，以便聊天用户与服务器交谈（以及服务器将消息传递给不同的聊天者）。

最终，您将为每个聊天者提供一个唯一的 ID。用户名或 ID 号。您存储它的位置并没有真正改变它的操作方式... ...您可以将用户放入数据库或文本文件中，或者让他们连接到服务器与之对话的另一个始终在线的程序。

然后为了踢人，只需将他们注销即可。下次他们连接到服务器时，向他们的浏览器发送一条消息，说明他们没有登录（或没有连接到那个房间）。

要禁止人员，请将他们添加到您检查的用户列表中，如果 ID 匹配，他们不会获得任何数据（或者会收到“禁止”消息）。

如何完成这些工作 100% 取决于您，但您需要从服务器端语言、支持服务器端语言的主机开始，并认真考虑如何构建所有内容。

# php - PHP 模块修改 $_POST, $_FILES

> ID：12503267
> 
> 赞同：3
> 
> 时间：2012-09-19T21:36:15.253
> 
> 标签：php, zend-framework, cakephp, zend-form

我想编写一个 PHP 模块来修改 $_POST 和 $_FILES 变量。目标是在模块中进行预处理，例如，规范化输入，不允许具有某些扩展名的文件。

这可能吗？您似乎[无法修改 $_FILES 变量](https://stackoverflow.com/questions/1796628/php-files-file-loop-upload)，但是，如果您有扩展名，则可以[在 RINIT 阶段修改这些变量](http://devzone.zend.com/303/extension-writing-part-i-introduction-to-php-and-zend/)。

我怎样才能做到这一点？

编辑：澄清

我想规范化数据不是一个很好的例子。我对如何完成它更感兴趣，并更多地了解 PHP 和模块。

例如，有一个[重新组织 $_files 的函数](http://www.php.net/manual/en/reserved.variables.files.php#109958)。我认为编写一个可以自动执行此操作的模块会很有趣，就像学术练习一样，并且正在寻找从哪里开始的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T00:34:01.307

也许将“请求”封装为带有（POST/GET 甚至 FILES 等）的对象会更好。然后只引用这个对象而不是单个变量范围。

这将允许您创建所述对象的新实例并执行您选择的任何方法，或者在整个“模块”中的客户端代码中使用它（您也可以修改/规范化它）。另外，这样做的时候不需要修改超模。

非常快速的插图，可以很容易地扩展：

```
 class Request
  {
    protected $params = array();

    public function __construct()
    {
      return $this;
    }

    public function getParam($key)
    {
      if (isSet($_params[$key])) {
        return $_POST[$key];
      } else if (isSet($_GET[$key])) {
        return $_GET[$key];
      } else if ($_POST[$key]) {
        return $_POST[$key];
      } else if ($_FILES[$key]) {
        // do something special with files here
      }
    }

    public function setParam($key, value);

    public function getParams();

    public function getPostParams();

    ...etc...etc
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:09:11.533

“规范化”您的数据可能会非常具体，因此我不会推荐您的建议。

但是，如果您真的想这样做，我建议您编写一个函数，该函数采用 assoc 数组 ($_FILES, $_POST) 并根据需要修改它们，并返回一个包含所需数据的新 assoc 数组。不要忘记将文件从其位置 ( `$_FILES['file1']['tmp_name']`) 移动。

但是，是的，编写一个完整的模块似乎是多余的。不要这样。:P

# c# - 如何访问另一个类的字段

> ID：12503269
> 
> 赞同：-2
> 
> 时间：2012-09-19T21:36:23.980
> 
> 标签：c#, wpf

您好，我有一个带有 2 个窗口的 WPF/C# 应用程序。我正在尝试访问

```
public int myInt; 
```

在我的 OtherWindow 的 MainWindow 中：

```
MainWindow.myInt =3; 
```

智能感知甚至不允许我访问该变量。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T21:39:13.367

您需要声明它，`static`因为您不通过实例访问它，而是通过类名访问它。也就是说，公开公开字段通常不被认为是好的设计。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T21:40:25.823

您要么需要一个对象：

```
MainWindow mw = new MainWindow();
mw.myInt = 3 
```

或者您需要将 rour 字段设为静态

```
public static int myInt; 
```

并像您已经在做的那样称呼它：

```
MainWindow.myInt =3; 
```

# xslt - 如何使用 XSLT 将坐标分隔符替换为元组列表？

> ID：12503270
> 
> 赞同：2
> 
> 时间：2012-09-19T21:36:26.543
> 
> 标签：xslt, kml, gml-geographic-markup-lan

我有一个以空格分隔的坐标元组列表，其中包含任意多个元组。每个元组由一个以空格分隔的二维坐标列表组成。例如，“1.1 2.8 1.2 2.9”表示从 POINT(1.1 2.8) 到 POINT(1.2 2.9) 的一条线。我需要这个改为“1.1,2.8 1.2,2.9”。我将如何使用 XSLT 替换数字对之间的空格到逗号？我有“字符串（gml:LinearRing/gml:posList）”。

这被用在一个 Java Web 服务上，该服务使用几何图形输出 GML 3.1.1 特性。该服务支持可选的 KML 输出，通过使用 XSLT 将 GML 文档转换为 KML 文档（至少，被认为“重要”的块）。我被锁定在 XSLT 1.0 中，因此不能选择 XSLT 2.0 中的正则表达式。

我知道 GML 使用纬度/经度，而 KML 使用经度/纬度。这是在 XSLT 之前处理的，但如果用 XSLT 也能完成它会很好。

* * *

感谢您的解决方案，Dimitre。我对其进行了一些修改以满足我的需要，因此我将在此处包含它以防万一它对其他人有所帮助。假设二维元组，它通过坐标列表执行递归。

这执行两个功能：轴交换（纬度/经度为经度/纬度，根据 GML 和 KML 规范）和将每个元组内的坐标分隔符从空格 ' ' 更改为逗号 ','。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:gml="http://www.opengis.net/gml" exclude-result-prefixes="gml">
   <xsl:output method="xml" encoding="UTF-8" indent="yes" />

   <!-- other portions omitted -->

   <xsl:template match="gml:pos">
      <xsl:call-template name="coordinateSequence">
         <xsl:with-param name="coords" select="normalize-space(string(.))" />
      </xsl:call-template>
   </xsl:template>

   <xsl:template match="gml:posList">
      <xsl:call-template name="coordinateSequence">
         <xsl:with-param name="coords" select="normalize-space(string(.))" />
      </xsl:call-template>
   </xsl:template>

   <xsl:template name="coordinateSequence">
      <xsl:param name="coords" />
      <xsl:if test="string-length($coords) > 0">
         <xsl:variable name="lat" select="substring-before($coords, ' ')" />
         <xsl:variable name="lon">
            <xsl:value-of select="substring-before(substring-after($coords, ' '), ' ')" />
            <xsl:if test="string-length(substring-before(substring-after($coords, ' '), ' ')) = 0">
               <xsl:value-of select="substring-after($coords, ' ')" />
            </xsl:if>
         </xsl:variable>
         <xsl:variable name="remainder" select="substring-after(substring-after($coords, ' '), ' ')" />

         <xsl:value-of select="concat($lon, ',', $lat)" />
         <xsl:if test="string-length($remainder) > 0">
            <xsl:value-of select="' '" />
            <xsl:call-template name="coordinateSequence">
               <xsl:with-param name="coords" select="$remainder" />
            </xsl:call-template>
         </xsl:if>
      </xsl:if>
   </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T02:24:02.333

**This transformation** (also shows the intermediary steps):

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/*">
  <xsl:variable name="vNorm" select="normalize-space()"/>
  <xsl:variable name="vP1" select=
  "concat(substring-before(., ' '), ',',
          substring-before(substring-after($vNorm, ' '),' ')
          )"/>

  <xsl:variable name="vPart2" select="substring-after(substring-after($vNorm,' '),' ')"/>

  <xsl:variable name="vP2" select=
  "concat(substring-before($vPart2, ' '), ',',
          substring-after($vPart2, ' ')
          )"/>

  <xsl:value-of select="$vP1"/>
==========
  <xsl:value-of select="$vP2"/>
==========
  <xsl:value-of select="concat($vP1, ' ', $vP2)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**when applied on this XML document:**

```
<t>1.1 2.8 1.2 2.9</t> 
```

**produces the wanted, correct result** (the last line):

```
1.1,2.8
==========
  1.2,2.9
==========
  1.1,2.8 1.2,2.9 
```

**For convenience, this code can be placed in to a named template to be called for each wanted Line:**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/*">
  <xsl:call-template name="convertLine"/>
 </xsl:template>

 <xsl:template name="convertLine">
  <xsl:param name="pStr" select="."/>

  <xsl:variable name="vNorm" select="normalize-space($pStr)"/>
  <xsl:variable name="vP1" select=
  "concat(substring-before($pStr, ' '), ',',
          substring-before(substring-after($vNorm, ' '),' ')
          )"/>

  <xsl:variable name="vPart2" select="substring-after(substring-after($vNorm,' '),' ')"/>

  <xsl:variable name="vP2" select=
  "concat(substring-before($vPart2, ' '), ',',
          substring-after($vPart2, ' ')
          )"/>

  <xsl:value-of select="concat($vP1, ' ', $vP2)"/>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:09:04.910

```
<xsl:for-each select="tokenize($in, ' ')">
  <xsl:value-of select="concat($t, if (position() mod 2) = 0 then ' ' else ',')"/>
</xsl:for-each> 
```

# c++ - 在游戏循环中使用 boost asio 进行 pub/sub 样式的 tcp 消息传递

> ID：12503271
> 
> 赞同：1
> 
> 时间：2012-09-19T21:36:29.037
> 
> 标签：c++, tcp, boost-asio, game-engine, publish-subscribe

我已经阅读了几个小时的 boost asio 文档，虽然我认为文档真的很棒，但我仍然对如何实现我需要的系统感到有些困惑。

我必须通过 tcp 将信息从游戏引擎传输到计算机列表。一个障碍是，与传统的 pub/sub 不同，分发信息的计算机实际上也是必须连接到订阅者的计算机（而不是订阅者向发布者注册）。这是通过一个配置文件完成的——一个ip/端口列表以及它们每个需要的数据。订阅者收听，但不知道发布者的 ip。（作为旁注，我对网络编程很陌生，所以也许我遗漏了一些东西......但奇怪的是我没有找到关于这种“倒置”客户端 - 服务器模型风格的太多信息......）

我正在寻找使用 boost asio 来实现这样一个系统的建议。当然，我必须将网络集成到已经存在的引擎中，所以关于这一点：处理每帧发送到多台计算机的消息的好方法是什么？使用 async_write，调用 io_service.run 然后重置每一帧？让 io_service.run 有自己的线程会更好吗？还是我应该只使用线程并使用阻塞写入？

* * *

我找到了一个处理我的部分问题的线程：在游戏循环中使用 io_service - [Boost::Asio : io_service.run() vs poll() 或者我如何在 mainloop 中集成 boost::asio](https://stackoverflow.com/questions/4705411/boostasio-io-service-run-vs-poll-or-how-do-i-integrate-boostasio-in-ma)。如果我确实找到了一个好的解决方案，我会尝试一些事情并发布更明确的答案。

# python - 优化记忆装饰器以不增加调用堆栈

> ID：12503273
> 
> 赞同：1
> 
> 时间：2012-09-19T21:36:34.980
> 
> 标签：python, python-3.x

我有一个非常非常基本的记忆装饰器，我需要在下面进行优化：

```
def memoize(function):
    memos = {}
    def wrapper(*args):
        try:
            return memos[args]
        except KeyError:
            pass
        result = function(*args)
        memos[args] = result
        return result
    return wrapper 
```

这样做的目的是使它不会添加到调用堆栈中。它现在实际上翻了一番。我意识到我可以将它嵌入到一个功能一个功能的基础上，但这不是我们想要的，因为我想要一个用于记忆的全局解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:27:40.030

如果您使用的是 Python 3.2，则可以只使用标准库：

```
import functools

@functools.lru_cache(maxsize=None)
def doit(...):
    ... 
```

它很容易记住并且是标准库的一部分。

# javascript - 为段落动态分配类

> ID：12503274
> 
> 赞同：4
> 
> 时间：2012-09-19T21:36:40.860
> 
> 标签：javascript, html, css, dynamic

如果段落包含“已记录时间：”的措辞，您如何将类动态分配给段落（通过 javascript/CSS）？

您会注意到我已经手动为该段落分配了 class *class="dyncontent"*。

但是，我想将此类动态分配给任何包含“记录时间：”字样的段落标签。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<link href="css.css" rel="stylesheet" type="text/css" />
</head>
<body>
<script type="text/javascript">
if (document.all || document.getElementById){ //if IE4 or NS6+
document.write('<style type="text/css">')
document.write('.dyncontent{display:none;}')
document.write('</style>')
}
</script>
<div class="right">
<ul>
<li class="say agent public">
<p>Description line 1</p>
<p class="dyncontent">Time Recorded: 5MIN(S)</p>
<p>Another description line</p>
</li>
</ul>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:41:59.737

你可以使用 jQuery：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
 <script>
 $(function(){
      $("p:contains('Time Recorded:')").addClass('dyncontents');
 });
 </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T21:42:30.597

`$("p").each(function(ele) {if (this.html().indexOf('TimeRecorded') > 1) {$(this).addClass('dyncontent'))}});`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T21:47:53.487

我会做 indexOf 因为它会比 innerText 更容易匹配

```
var allP = document.getElementsByTagName('p'),
    pLength = allP.length;
while(pLength--){
    if(allP[pLength].innerHTML.indexOf('Time Recorded') != -1){
    allP[pLength].addClass('dycontents');
    }
} 
```

解释一下：首先你得到`<p>`文档中的所有内容。然后你遍历它们。如果其中任何一个包含 Time Recorded 的文本，则将您的课程添加到其中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-19T21:42:09.597

**以下是没有 Jquery 的解决方案**

```
o = document.getElementsByTagName('p');

    for (i = 0; i < o.length; i++) {
        if (o[i].innerText.indexOf('Time Recorded:') != -1) {
        o[i].className = 'theClassYouWant'; 
        }
    } 
```

# ios - SLComposeViewController 分享教程

> ID：12503287
> 
> 赞同：77
> 
> 时间：2012-09-19T21:37:28.273
> 
> 标签：ios, ios6, slcomposeviewcontroller, social-framework

我需要遵循哪些步骤才能使用 iOS 6 的新版本`SLComposeViewController`发布到 Facebook、Twitter 或新浪微博？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-09-19T21:37:28.273

有关此框架的详细信息，请参阅 Apple 的[社交框架类参考](https://developer.apple.com/documentation/social)

附加教程：

1.  [http://soulwithmobiletechnology.blogspot.com/2012/07/tutorial-how-to-use-inbuilt.html](http://soulwithmobiletechnology.blogspot.com/2012/07/tutorial-how-to-use-inbuilt.html)
2.  [http://www.mobile.safilsunny.com/iphone/integrating-facebook-ios/](http://www.mobile.safilsunny.com/iphone/integrating-facebook-ios/)
3.  [https://rudeboy-quickies.blogspot.com/2012/06/steps-to-integrate-facebook-in-ios6.html](https://rudeboy-quickies.blogspot.com/2012/06/steps-to-integrate-facebook-in-ios6.html)

对于这个例子，我们将使用`SLComposeViewController`'s `SLServiceTypeFacebook`。如果您想使用 Twitter 或新浪微博，只需将 SLServiceType 更改为以下之一：

*   SLServiceTypeFacebook
*   SLServiceType新浪微博
*   SLServiceTypeTwitter

iOS 6 让使用`SLComposeViewController`. 这与 iOS 5 的`TWTweetComposeViewController`.

首先，在您的视图控制器的头文件 (.h)`#import`中，Social Framework 和 Accounts Framework。

`#import <Social/Social.h>`

`#import <Accounts/Accounts.h>`

在这里，我们将声明一个 simple`UIButton`和 an `IBAction`，稍后我们将链接到该按钮和一个`void`(sharingStatus)，它将用于检查所选共享服务是否可用。

```
@interface ViewController : UIViewController

@property (weak, nonatomic) IBOutlet UIButton *easyFacebookButton;
- (IBAction)facebookPost:(id)sender;
- (void)sharingStatus;
@end

@implementation ViewController 
```

然后，在您的实现文件 (.m) 中，我们将首先实现我们在头文件中声明的 (sharingStatus) void。sharedStatus 使用BOOL 返回您是否可以发布到其参数中指定的服务`SLComposeViewController`。`isAvailableForServiceType`在这种情况下，我们将使用服务类型`SLServiceTypeFacebook`。如果服务可用，则发布按钮将启用，alpha 值为 1.0f，如果服务不可用，则按钮将被禁用，其 alpha 值设置为 0.5f。

```
- (void)sharingStatus {
    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
        NSLog(@"service available");
        self.easyFacebookButton.enabled = YES;
        self.easyFacebookButton.alpha = 1.0f;
    } else {
        self.easyFacebookButton.enabled = NO;
        self.easyFacebookButton.alpha = 0.5f;
    }
} 
```

在这里，我们将设置`IBAction`将调用作曲家。为了获得良好的实践，我们将`isAvailableForServiceType`再次检查以避免调用作曲家以获取不可用的服务类型。（以防在上次检查期间出现问题，或者在点击发布按钮和作曲家全部/初始化之间的几分之一秒内可用性发生了某种变化。下面的代码已设置为显示带有文本的 Facebook 作曲家表，一个图像和一个链接。此操作还利用完成处理程序来处理作曲家的取消和完成结果。

```
- (IBAction)facebookPost:(id)sender {

    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

        SLComposeViewController *mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

        [mySLComposerSheet setInitialText:@"iOS 6 Social Framework test!"];

        [mySLComposerSheet addImage:[UIImage imageNamed:@"myImage.png"]];

        [mySLComposerSheet addURL:[NSURL URLWithString:@"http://stackoverflow.com/questions/12503287/tutorial-for-slcomposeviewcontroller-sharing"]];

        [mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {

             switch (result) {
                 case SLComposeViewControllerResultCancelled:
                     NSLog(@"Post Canceled");
                     break;
                 case SLComposeViewControllerResultDone:
                     NSLog(@"Post Sucessful");
                     break;

                 default:
                     break;
             }
         }];

        [self presentViewController:mySLComposerSheet animated:YES completion:nil];
    }
} 
```

`viewWillAppear`我们将注册一个观察者，以便在`ACAccountStoreDidChangeNotification`帐户信息更改时通知应用程序。然后这个观察者将被删除`viewDidDisappear`。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(sharingStatus) name:ACAccountStoreDidChangeNotification object:nil];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
    [[NSNotificationCenter defaultCenter] removeObserver:ACAccountStoreDidChangeNotification];
} 
```

最后，打开界面生成器并添加一个`UIButton`作为发布按钮的按钮。然后在连接检查器中链接`IBOutlet`我们`IBAction`之前创建的按钮，就是这样！你完成了！

![在此处输入图像描述](../Images/a2dfbbe12d1fd52d4c28949aa2775c22.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-15T09:06:39.637

只需使用此代码在 Facebook 上分享。

```
SLComposeViewController *controllerSLC = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
[controllerSLC setInitialText:@"First post from my iPhone app"];
[controllerSLC addURL:[NSURL URLWithString:@"http://www.appcoda.com"]];
[controllerSLC addImage:[UIImage imageNamed:@"test.jpg"]];
[self presentViewController:controllerSLC animated:YES completion:Nil]; 
```

如果您希望 Twitter 使用此功能，则只需更改 SLServiceTypeTwitter。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-06-20T06:28:39.687

> SLComposeViewController 的安全使用

```
if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
    {
        SLComposeViewController *fbPost = [SLComposeViewController
                                               composeViewControllerForServiceType: SLServiceTypeFacebook];
        [fbPost setInitialText:@"Text You want to Share"];
        [fbPost addImage:[UIImage imageNamed:@"shareImage.png"]];
        [self presentViewController:fbPost animated:YES completion:nil];
        [fbPost setCompletionHandler:^(SLComposeViewControllerResult result) {
            switch (result) {
                case SLComposeViewControllerResultCancelled:
                    NSLog(@"Post Canceled");
                    break;
                case SLComposeViewControllerResultDone:
                    NSLog(@"Post Sucessful");
                    break;
                default:
                    break;
            }
            [self dismissViewControllerAnimated:YES completion:nil];
        }];
    } 
```

# sql-server - SQL 中缓慢的 XML 分解

> ID：12503292
> 
> 赞同：1
> 
> 时间：2012-09-19T21:37:53.933
> 
> 标签：sql-server, xml, xquery

我有一个存储过程，它采用“调查”对象的集合并将它们切碎到相应的表中。

“Survey”对象有两个子对象，“Erosions”和“Spans”。

这是我可能使用的 XML 示例：

```
<Surveys>
  <Survey>
    <SurveyID>35</SurveyID>
    <CulvertID>5</CulvertID>
    <PRNo>587180</PRNo>
    <MP>5.243</MP>
    <RefMiles>1.500</RefMiles>
    <PtID>ABCGEFGH</PtID>
    <FWVersion>10</FWVersion>
    <SurveyDate>2012-08-27</SurveyDate>
    <FutureComments>7c36fe43-78cb-436e-81cf-f416aa63c8fc</FutureComments>
    <Erosions>
      <Erosion>
        <ID>160</ID>
        <SurveyID>35</SurveyID>
        <Location>Test Erosion - 8/27/2012 - 1:19:04 PM</Location>
      </Erosion>
      <Erosion>
        <ID>161</ID>
        <SurveyID>35</SurveyID>
        <Location>Test Erosion - 8/27/2012 - 1:19:04 PM</Location>
      </Erosion>
    </Erosions>
    <Spans>
      <Span>
        <ID>88</ID>
        <SurveyID>35</SurveyID>
        <Material>Test Span - 8/27/2012 - 1:19:04 PM</Material>
      </Span>
      <Span>
        <ID>89</ID>
        <SurveyID>35</SurveyID>
        <Material>Test Span - 8/27/2012 - 1:19:04 PM</Material>
      </Span>
    </Spans>
  </Survey>
</Surveys> 
```

我已将存储过程定义上传到以下位置（太大，无法粘贴到此处）。 [下载 SQL](https://docs.google.com/open?id=0B2a9juOXyaH0RnowUlViVUdGOFk "单击此处获取 .SQL 文件")

当我发送上面提供的 XML 示例时，该过程大约需要 10 秒才能完成，而且只有一个非常小的 XML 字符串。更新/插入包含任何“VARBINARY(MAX)”列中的值的记录可能需要几分钟时间。

我真的是一个 Xquery 新手......不知道我做错了什么，但性能绝对糟糕。有什么建议么？

***编辑解决方案：***

按照下面的@wBob 建议，我为我的存储过程提出了[这个 SQL](https://docs.google.com/open?id=0B2a9juOXyaH0WTYwUHdRSnhoM1E "单击此处获取新的 .SQL 文件")。我最终重新定义了我桌子上的 PK，使其更加“准确”。它不是生成的 int ID，而是基于实际的数据字段。这允许我使用合并来使用由实际数据值定义的外键插入子对象，而不是我必须检索的生成数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T23:30:50.547

我已经尝试过改变你的（相当大的）proc。请记住，这是演示原理的示例脚本（即 MERGE with OUTPUT 子句），由您完成和测试它。例如，您需要测试所有列是否正确插入/更新，检查您的数据类型，以及删除 NULLIF 的位置等。我还将添加 TRY/CATCH 错误和事务处理。请注意，我还根据surveyId 进行了合并-不确定这是否正确？

如果我是你，在开始之前我会花一些时间熟悉[MERGE](http://technet.microsoft.com/en-us/library/bb510625.aspx)和[OUTPUT](http://technet.microsoft.com/en-us/library/ms177564.aspx)子句，但是祝你好运，让我们知道你的进展情况。

我还附上了我的完整测试台的[链接。](https://docs.google.com/open?id=0B6eGKNVGuBJddEpxbmRhTDBQZzQ)此脚本是安全的，并且可以在您的 tempdb 中完全重新运行。

```
ALTER PROCEDURE [dbo].[sp_SaveSurvey]
    @XMLobject XML
AS
BEGIN

    SET NOCOUNT ON

    CREATE TABLE #tmp_survey ( surveyId INT PRIMARY KEY, erosions XML, spans XML )

    BEGIN TRAN

------------------------------------------------------------------------------------------------
-- MERGE dbo.CULV_StreamCrossingSurvey START
------------------------------------------------------------------------------------------------

    SET IDENTITY_INSERT dbo.CULV_StreamCrossingSurvey ON

    ;MERGE dbo.CULV_StreamCrossingSurvey AS target
    USING
    (
    SELECT
        CAST(NULLIF(X.survey.value('(SurveyID/text())[1]', 'VARCHAR(200)'), '') AS INT) AS SurveyID,
        CAST(NULLIF(X.survey.value('(CulvertID/text())[1]', 'VARCHAR(200)'), '') AS INT) AS CulvertID,
        NULLIF(X.survey.value('(County/text())[1]', 'VARCHAR(50)'), '') AS County,
        NULLIF(X.survey.value('(RoadName/text())[1]', 'VARCHAR(50)'), '') AS RoadName,
        CAST(NULLIF(X.survey.value('(PRNo/text())[1]', 'VARCHAR(50)'), '') AS INT) AS PRNo,
        CAST(NULLIF(X.survey.value('(MP/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,3)) AS MP,
        CAST(NULLIF(X.survey.value('(RefMiles/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,3)) AS RefMiles,
        NULLIF(X.survey.value('(PtID/text())[1]', 'VARCHAR(8)'), '') AS PtID,
        CAST(NULLIF(X.survey.value('(FWVersion/text())[1]', 'VARCHAR(50)'), '') AS SMALLINT) AS FWVersion,
        CAST(NULLIF(X.survey.value('(Latitude/text())[1]', 'VARCHAR(200)'), '') AS FLOAT) AS Latitude,
        CAST(NULLIF(X.survey.value('(Longitude/text())[1]', 'VARCHAR(200)'), '') AS FLOAT) AS Longitude,
        NULLIF(X.survey.value('(Waterway/text())[1]', 'VARCHAR(50)'), '') AS Waterway,
        NULLIF(X.survey.value('(SiteID/text())[1]', 'VARCHAR(50)'), '') AS SiteID,
        NULLIF(X.survey.value('(Observers/text())[1]', 'VARCHAR(50)'), '') AS Observers,
        CAST(NULLIF(X.survey.value('(SurveyDate/text())[1]', 'VARCHAR(200)'), '') AS DATE) AS SurveyDate,
        NULLIF(X.survey.value('(AdjacentLandowner/text())[1]', 'VARCHAR(MAX)'), '') AS AdjacentLandowner,
        NULLIF(X.survey.value('(LocationComments/text())[1]', 'VARCHAR(MAX)'), '') AS LocationComments,
        CAST(NULLIF(X.survey.value('(CrossingType/text())[1]', 'VARCHAR(50)'), '') AS SMALLINT) AS CrossingType,
        NULLIF(X.survey.value('(StructureShape/text())[1]', 'VARCHAR(50)'), '') AS StructureShape,
        NULLIF(X.survey.value('(InletStructure/text())[1]', 'VARCHAR(50)'), '') AS InletStructure,
        NULLIF(X.survey.value('(OutletStructure/text())[1]', 'VARCHAR(50)'), '') AS OutletStructure,
        NULLIF(X.survey.value('(OutletType/text())[1]', 'VARCHAR(50)'), '') AS OutletType,
        NULLIF(X.survey.value('(SubstrateInStructure/text())[1]', 'VARCHAR(50)'), '') AS SubstrateInStructure,
        NULLIF(X.survey.value('(GeneralCondition/text())[1]', 'VARCHAR(50)'), '') AS GeneralCondition,
        CAST(NULLIF(X.survey.value('(PluggedPercent/text())[1]', 'VARCHAR(MAX)'), '') AS SMALLINT) AS PluggedPercent,
        NULLIF(X.survey.value('(PluggedLocation/text())[1]', 'VARCHAR(50)'), '') AS PluggedLocation,
        CAST(NULLIF(X.survey.value('(CrushedPercent/text())[1]', 'VARCHAR(50)'), '') AS SMALLINT) AS CrushedPercent,
        NULLIF(X.survey.value('(CrushedLocation/text())[1]', 'VARCHAR(50)'), '') AS CrushedLocation,
        CAST(NULLIF(X.survey.value('(IsRustedThrough/text())[1]', 'VARCHAR(10)'), '') AS BIT) AS IsRustedThrough,
        NULLIF(X.survey.value('(StructureInterior/text())[1]', 'VARCHAR(50)'), '') AS StructureInterior,
        CAST(NULLIF(X.survey.value('(StructureWaterDepthInlet/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS StructureWaterDepthInlet,
        CAST(NULLIF(X.survey.value('(StructureWaterDepthOutlet/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS StructureWaterDepthOutlet,
        CAST(NULLIF(X.survey.value('(StructureEmbeddedDepthInlet/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS StructureEmbeddedDepthInlet,
        CAST(NULLIF(X.survey.value('(StructureEmbeddedDepthOutlet/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS StructureEmbeddedDepthOutlet,
        CAST(NULLIF(X.survey.value('(StructureWaterVelocityInlet/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS StructureWaterVelocityInlet,
        CAST(NULLIF(X.survey.value('(StructureWaterVelocityOutlet/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS StructureWaterVelocityOutlet,
        CAST(NULLIF(X.survey.value('(StructureWaterVelocityMeasured/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS StructureWaterVelocityMeasured,
        NULLIF(X.survey.value('(StructureWaterVelocityMeasuredWith/text())[1]', 'VARCHAR(50)'), '') AS StructureWaterVelocityMeasuredWith,
        CAST(NULLIF(X.survey.value('(IsPerched/text())[1]', 'VARCHAR(10)'), '') AS BIT) AS IsPerched,
        CAST(NULLIF(X.survey.value('(PerchHeight/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS PerchHeight,
        NULLIF(X.survey.value('(StreamFlow/text())[1]', 'VARCHAR(50)'), '') AS StreamFlow,
        CAST(NULLIF(X.survey.value('(IsScourPoolPresent/text())[1]', 'VARCHAR(10)'), '') AS BIT) AS IsScourPoolPresent,
        CAST(NULLIF(X.survey.value('(ScourPoolLength/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS ScourPoolLength,
        CAST(NULLIF(X.survey.value('(ScourPoolWidth/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS ScourPoolWidth,
        CAST(NULLIF(X.survey.value('(ScourPoolDepth/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS ScourPoolDepth,
        CAST(NULLIF(X.survey.value('(IsUpstreamPondPresent/text())[1]', 'VARCHAR(10)'), '') AS BIT) AS IsUpstreamPondPresent,
        CAST(NULLIF(X.survey.value('(UpstreamPondLength/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS UpstreamPondLength,
        CAST(NULLIF(X.survey.value('(UpstreamPondWidth/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS UpstreamPondWidth,
        CAST(NULLIF(X.survey.value('(RiffleWaterDepth/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS RiffleWaterDepth,
        CAST(NULLIF(X.survey.value('(RiffleBankfullWidth/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS RiffleBankfullWidth,
        CAST(NULLIF(X.survey.value('(RiffleWettedWidth/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS RiffleWettedWidth,
        CAST(NULLIF(X.survey.value('(RiffleWaterVelocity/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS RiffleWaterVelocity,
        NULLIF(X.survey.value('(RiffleMeasuredWith/text())[1]', 'VARCHAR(50)'), '') AS RiffleMeasuredWith,
        NULLIF(X.survey.value('(RiffleSubstrate/text())[1]', 'VARCHAR(50)'), '') AS RiffleSubstrate,
        NULLIF(X.survey.value('(RoadSurface/text())[1]', 'VARCHAR(50)'), '') AS RoadSurface,
        NULLIF(X.survey.value('(RoadCondition/text())[1]', 'VARCHAR(50)'), '') AS RoadCondition,
        CAST(NULLIF(X.survey.value('(RoadWidth/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS RoadWidth,
        NULLIF(X.survey.value('(LocationOfLowPoint/text())[1]', 'VARCHAR(50)'), '') AS LocationOfLowPoint,
        NULLIF(X.survey.value('(RunOffPath/text())[1]', 'VARCHAR(50)'), '') AS RunOffPath,
        CAST(NULLIF(X.survey.value('(FillDepthUpStream/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS FillDepthUpStream,
        CAST(NULLIF(X.survey.value('(FillDepthDownStream/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS FillDepthDownStream,
        NULLIF(X.survey.value('(SlopeUpStream/text())[1]', 'VARCHAR(50)'), '') AS SlopeUpStream,
        NULLIF(X.survey.value('(SlopeDownStream/text())[1]', 'VARCHAR(50)'), '') AS SlopeDownStream,
        CAST(NULLIF(X.survey.value('(ApproachLengthLeft/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS ApproachLengthLeft,
        CAST(NULLIF(X.survey.value('(ApproachLengthRight/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(6,1)) AS ApproachLengthRight,
        NULLIF(X.survey.value('(ApproachSlopeLeft/text())[1]', 'VARCHAR(50)'), '') AS ApproachSlopeLeft,
        NULLIF(X.survey.value('(ApproachSlopeRight/text())[1]', 'VARCHAR(50)'), '') AS ApproachSlopeRight,
        NULLIF(X.survey.value('(VegetationDitchLeft/text())[1]', 'VARCHAR(50)'), '') AS VegetationDitchLeft,
        NULLIF(X.survey.value('(VegetationDitchRight/text())[1]', 'VARCHAR(50)'), '') AS VegetationDitchRight,
        CAST(NULLIF(X.survey.value('(IsErosionPresent/text())[1]', 'VARCHAR(10)'), '') AS BIT) AS IsErosionPresent,
        CAST(NULLIF(X.survey.value('(IsErosionCorrectable/text())[1]', 'VARCHAR(10)'), '') AS BIT) AS IsErosionCorrectable,
        NULLIF(X.survey.value('(ErosionExtent/text())[1]', 'VARCHAR(50)'), '') AS ErosionExtent,
        NULLIF(X.survey.value('(ErosionNotes/text())[1]', 'VARCHAR(MAX)'), '') AS ErosionNotes,
        CAST(NULLIF(X.survey.value('(IsPrioritySite/text())[1]', 'VARCHAR(10)'), '') AS BIT) AS IsPrioritySite,
        NULLIF(X.survey.value('(PriorityReason/text())[1]', 'VARCHAR(50)'), '') AS PriorityReason,
        NULLIF(X.survey.value('(PriorityComments/text())[1]', 'VARCHAR(MAX)'), '') AS PriorityComments,
        CAST(NULLIF(X.survey.value('(FutureVisit/text())[1]', 'VARCHAR(10)'), '') AS BIT) AS FutureVisit,
        NULLIF(X.survey.value('(FutureComments/text())[1]', 'VARCHAR(MAX)'), '') AS FutureComments,
        CAST(NULLIF(X.survey.value('(NonNativeInvasiveSpecies/text())[1]', 'VARCHAR(10)'), '') AS BIT) AS NonNativeInvasiveSpecies,
        NULLIF(X.survey.value('(SpeciesObserved/text())[1]', 'VARCHAR(MAX)'), '') AS SpeciesObserved,
        CAST(NULLIF(X.survey.value('(IsHeadChanged/text())[1]', 'VARCHAR(10)'), '') AS BIT) AS IsHeadChanged,
        NULLIF(X.survey.value('(HeadChangeComments/text())[1]', 'VARCHAR(MAX)'), '') AS HeadChangeComments,
        CAST(NULLIF(X.survey.value('(IsBackwatered/text())[1]', 'VARCHAR(10)'), '') AS BIT) AS IsBackwatered,
        NULLIF(X.survey.value('(BackwaterComments/text())[1]', 'VARCHAR(MAX)'), '') AS BackwaterComments,
        CAST(NULLIF(X.survey.value('(IsOvertopping/text())[1]', 'VARCHAR(10)'), '') AS BIT) AS IsOvertopping,
        NULLIF(X.survey.value('(OvertoppingComments/text())[1]', 'VARCHAR(MAX)'), '') AS OvertoppingComments,
        CAST(NULLIF(X.survey.value('(IsSubstrateEntireLength/text())[1]', 'VARCHAR(10)'), '') AS BIT) AS IsSubstrateEntireLength,
        CAST(NULLIF(X.survey.value('(CalculatedPassability/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(4,1)) AS CalculatedPassability,
        CAST(NULLIF(X.survey.value('(DefinedPassability/text())[1]', 'VARCHAR(50)'), '') AS NUMERIC(4,1)) AS DefinedPassability,
        NULLIF(X.survey.value('(PassabilityComments/text())[1]', 'VARCHAR(MAX)'), '') AS PassabilityComments,
        NULLIF(X.survey.value('(PhotoInlet/text())[1]', 'VARBINARY(MAX)'), '') AS PhotoInlet,
        NULLIF(X.survey.value('(PhotoInletFileName/text())[1]', 'VARCHAR(200)'), '') AS PhotoInletFileName,
        NULLIF(X.survey.value('(PhotoOutlet/text())[1]', 'VARBINARY(MAX)'), '') AS PhotoOutlet,
        NULLIF(X.survey.value('(PhotoOutletFileName/text())[1]', 'VARCHAR(200)'), '') AS PhotoOutletFileName,
        NULLIF(X.survey.value('(PhotoUpstream/text())[1]', 'VARBINARY(MAX)'), '') AS PhotoUpstream,
        NULLIF(X.survey.value('(PhotoUpstreamFileName/text())[1]', 'VARCHAR(200)'), '') AS PhotoUpstreamFileName,
        NULLIF(X.survey.value('(PhotoDownstream/text())[1]', 'VARBINARY(MAX)'), '') AS PhotoDownstream,
        NULLIF(X.survey.value('(PhotoDownstreamFileName/text())[1]', 'VARCHAR(200)'), '') AS PhotoDownstreamFileName,
        NULLIF(X.survey.value('(PhotoRoadApproachLeft/text())[1]', 'VARBINARY(MAX)'), '') AS PhotoRoadApproachLeft,
        NULLIF(X.survey.value('(PhotoRoadApproachLeftFileName/text())[1]', 'VARCHAR(200)'), '') AS PhotoRoadApproachLeftFileName,
        NULLIF(X.survey.value('(PhotoRoadApproachRight/text())[1]', 'VARBINARY(MAX)'), '') AS PhotoRoadApproachRight,
        NULLIF(X.survey.value('(PhotoRoadApproachRightFileName/text())[1]', 'VARCHAR(200)'), '') AS PhotoRoadApproachRightFileName,
        Erosions = (CASE WHEN CAST(X.survey.query('Erosions') AS VARCHAR(MAX)) = '' THEN NULL
        ELSE X.survey.query('Erosions') END),
        Spans = (CASE WHEN CAST(X.survey.query('Spans') AS VARCHAR(MAX)) = '' THEN NULL
        ELSE X.survey.query('Spans') END)
    FROM @XMLobject.nodes('Surveys/Survey') AS X(survey)
    ) AS source ON source.SurveyId = target.SurveyId

    WHEN NOT MATCHED BY TARGET 
        THEN 
        INSERT ( surveyId, CulvertID, County, RoadName, PRNo, MP, RefMiles, PtID, FWVersion, Latitude, Longitude, Waterway, SiteID, Observers, SurveyDate, AdjacentLandowner, LocationComments, CrossingType, StructureShape, InletStructure, OutletStructure, OutletType, SubstrateInStructure, GeneralCondition, PluggedPercent, PluggedLocation, CrushedPercent, CrushedLocation, IsRustedThrough, StructureInterior, StructureWaterDepthInlet, StructureWaterDepthOutlet, StructureEmbeddedDepthInlet, StructureEmbeddedDepthOutlet, StructureWaterVelocityInlet, StructureWaterVelocityOutlet, StructureWaterVelocityMeasured, StructureWaterVelocityMeasuredWith, IsPerched, PerchHeight, StreamFlow, IsScourPoolPresent, ScourPoolLength, ScourPoolWidth, ScourPoolDepth, IsUpstreamPondPresent, UpstreamPondLength, UpstreamPondWidth, RiffleWaterDepth, RiffleBankfullWidth, RiffleWettedWidth, RiffleWaterVelocity, RiffleMeasuredWith, RiffleSubstrate, RoadSurface, RoadCondition, RoadWidth, LocationOfLowPoint, RunOffPath, FillDepthUpStream, FillDepthDownStream, SlopeUpStream, SlopeDownStream, ApproachLengthLeft, ApproachLengthRight, ApproachSlopeLeft, ApproachSlopeRight, VegetationDitchLeft, VegetationDitchRight, IsErosionPresent, IsErosionCorrectable, ErosionExtent, ErosionNotes, IsPrioritySite, PriorityReason, PriorityComments, FutureVisit, FutureComments, NonNativeInvasiveSpecies, SpeciesObserved, IsHeadChanged, HeadChangeComments, IsBackwatered, BackwaterComments, IsOvertopping, OvertoppingComments, IsSubstrateEntireLength, CalculatedPassability, DefinedPassability, PassabilityComments, PhotoInlet, PhotoInletFileName, PhotoOutlet, PhotoOutletFileName, PhotoUpstream, PhotoUpstreamFileName, PhotoDownstream, PhotoDownstreamFileName, PhotoRoadApproachLeft, PhotoRoadApproachLeftFileName, PhotoRoadApproachRight, PhotoRoadApproachRightFileName )
        VALUES ( surveyId, CulvertID, County, RoadName, PRNo, MP, RefMiles, PtID, FWVersion, Latitude, Longitude, Waterway, SiteID, Observers, SurveyDate, AdjacentLandowner, LocationComments, CrossingType, StructureShape, InletStructure, OutletStructure, OutletType, SubstrateInStructure, GeneralCondition, PluggedPercent, PluggedLocation, CrushedPercent, CrushedLocation, IsRustedThrough, StructureInterior, StructureWaterDepthInlet, StructureWaterDepthOutlet, StructureEmbeddedDepthInlet, StructureEmbeddedDepthOutlet, StructureWaterVelocityInlet, StructureWaterVelocityOutlet, StructureWaterVelocityMeasured, StructureWaterVelocityMeasuredWith, IsPerched, PerchHeight, StreamFlow, IsScourPoolPresent, ScourPoolLength, ScourPoolWidth, ScourPoolDepth, IsUpstreamPondPresent, UpstreamPondLength, UpstreamPondWidth, RiffleWaterDepth, RiffleBankfullWidth, RiffleWettedWidth, RiffleWaterVelocity, RiffleMeasuredWith, RiffleSubstrate, RoadSurface, RoadCondition, RoadWidth, LocationOfLowPoint, RunOffPath, FillDepthUpStream, FillDepthDownStream, SlopeUpStream, SlopeDownStream, ApproachLengthLeft, ApproachLengthRight, ApproachSlopeLeft, ApproachSlopeRight, VegetationDitchLeft, VegetationDitchRight, IsErosionPresent, IsErosionCorrectable, ErosionExtent, ErosionNotes, IsPrioritySite, PriorityReason, PriorityComments, FutureVisit, FutureComments, NonNativeInvasiveSpecies, SpeciesObserved, IsHeadChanged, HeadChangeComments, IsBackwatered, BackwaterComments, IsOvertopping, OvertoppingComments, IsSubstrateEntireLength, CalculatedPassability, DefinedPassability, PassabilityComments, PhotoInlet, PhotoInletFileName, PhotoOutlet, PhotoOutletFileName, PhotoUpstream, PhotoUpstreamFileName, PhotoDownstream, PhotoDownstreamFileName, PhotoRoadApproachLeft, PhotoRoadApproachLeftFileName, PhotoRoadApproachRight, PhotoRoadApproachRightFileName )

    WHEN MATCHED
        THEN UPDATE
            SET target.CulvertID = source.CulvertID

    -- DELETE section
    --WHEN NOT MATCHED BY SOURCE 
    --  THEN DELETE

    OUTPUT source.surveyId, source.Erosions, source.Spans INTO #tmp_survey
    --OUTPUT $action
    ;

-- MERGE dbo.CULV_StreamCrossingSurvey END
------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
-- DELETEs START
-- Remove existing erosion and span records
------------------------------------------------------------------------------------------------

DELETE e
FROM dbo.CULV_StreamCrossingErosion e
    INNER JOIN #tmp_survey s ON e.SurveyID = s.surveyId

DELETE e
FROM dbo.Culvert_StreamCrossingSpan e
    INNER JOIN #tmp_survey s ON e.SurveyID = s.surveyId

-- DELETEs END
------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
-- MERGE dbo.CULV_StreamCrossingErosion START
------------------------------------------------------------------------------------------------

;MERGE dbo.CULV_StreamCrossingErosion AS target
USING
(
    SELECT
          t.surveyId
        , NULLIF(E.erosion.value('(Location/text())[1]', 'VARCHAR(50)'), '') AS Location
        , E.erosion.value('(Length/text())[1]', 'NUMERIC(6,1)') AS Length
        , E.erosion.value('(Width/text())[1]', 'NUMERIC(6,1)') AS Width
        , E.erosion.value('(Depth/text())[1]', 'NUMERIC(6,1)') AS Depth
        , E.erosion.value('(IsReachingStream/text())[1]', 'BIT') AS IsReachingStream
        , NULLIF(E.erosion.value('(MaterialEroded/text())[1]', 'VARCHAR(50)'), '') AS MaterialEroded
    FROM #tmp_survey t
        CROSS APPLY erosions.nodes('Erosions/Erosion') AS E(erosion)
) AS source ON source.SurveyId = target.SurveyId

WHEN NOT MATCHED BY TARGET 
    THEN 
    INSERT ( surveyId, Location, Length, Width, Depth, IsReachingStream, MaterialEroded )
    VALUES ( surveyId, Location, Length, Width, Depth, IsReachingStream, MaterialEroded )

WHEN MATCHED
    THEN UPDATE
        SET 
        target.Location = source.Location,
        target.Length = source.Length,
        target.Width = source.Width,
        target.Depth = source.Depth,
        target.IsReachingStream = source.IsReachingStream,
        target.MaterialEroded = source.MaterialEroded
;

;MERGE dbo.Culvert_StreamCrossingSpan AS target
USING
(
    SELECT
        t.surveyId,
        S.span.value('(SpanNumber/text())[1]', 'SMALLINT') AS SpanNumber,
        S.span.value('(Length/text())[1]', 'NUMERIC(6,1)') AS Length,
        S.span.value('(Width/text())[1]', 'NUMERIC(6,1)') AS Width,
        S.span.value('(Height/text())[1]', 'NUMERIC(6,1)') AS Height,
        NULLIF( S.span.value('(Material/text())[1]', 'VARCHAR(50)'), '') AS Material
    FROM #tmp_survey t
        CROSS APPLY spans.nodes('Spans/Span') AS S(span)

) AS source ON source.SurveyId = target.SurveyId

WHEN NOT MATCHED BY TARGET 
    THEN 
    INSERT ( surveyID, SpanNumber, Length, Width, Height, Material )
    VALUES ( surveyID, SpanNumber, Length, Width, Height, Material )

WHEN MATCHED
    THEN UPDATE
        SET 
        target.SpanNumber = source.SpanNumber,
        target.Length = source.Length,
        target.Width = source.Width,
        target.Height = source.Height,
        target.Material = source.Material
;

-- MERGE dbo.CULV_StreamCrossingErosion END
------------------------------------------------------------------------------------------------

-- !!TODO Add TRY/CATCH error and transaction handling

COMMIT

RETURN

END
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:40:08.133

我可以推荐一些更改。首先，您不需要.query 和.value。.query 返回 XML，所以如果你想要 XML，那么你可以使用 .query。.value 返回一个标量值，这就是您需要在此处使用的值，例如

```
SELECT
    CAST(NULLIF(X.survey.value('(SurveyID/text())[1]', 'VARCHAR(200)'), '') AS INT) AS SurveyID,
    CAST(NULLIF(X.survey.value('(CulvertID/text())[1]', 'VARCHAR(200)'), '') AS INT) AS CulvertID, 
```

此外，添加 text() 构造函数和 1 个序数（如上），这应该更[有效](http://msdn.microsoft.com/en-us/library/ms345118.aspx)。

其次，我认为您不需要游标。.nodes 返回一个结果集，因此您可以直接切入临时表，然后将 INSERT / UPDATE / DELETE 切入主表。如果您使用的是 SQL 2008 及更高版本，则可以使用 MERGE，它将所有操作合二为一。如果你有勇气的话，你甚至可以直接从 .nodes 结果集中 MERGE 到主表中，如果这有意义的话？

如果您没有从这些更改中获得所需的性能，您可以考虑使用 OPENXML，它有时对于较大的 XML 文档可能会更快。请注意，OPENXML 有一个众所周知的特性，它在调用时会自动占用服务器内存的 1/8，因此您必须始终记住调用 sp_xml_removedocument。

尝试进行这些更改，并让我们知道您是如何做到的。

PS 您使用了正确的术语“粉碎”，请忽略有关 SAX 的说明。SQL Server 在其中内置了非常强大且快速的用于分解 XML 的组件。

# livecycle - 如何防止打印 PDF 表单？

> ID：12503295
> 
> 赞同：0
> 
> 时间：2012-09-19T21:38:06.793
> 
> 标签：livecycle, pdf-form, livecycle-designer

我有一个 PDF 表单，如果它的字段为空白，我需要阻止打印此 PDF 表单。

要修改我的表单，我使用 Adob​​e LiveCycle Designer ES3。

关于如何做到这一点写在这里： http: [//forms.stefcameron.com/2008/04/13/prevent-printing-pdf-forms-in-acrobat-8/](http://forms.stefcameron.com/2008/04/13/prevent-printing-pdf-forms-in-acrobat-8/)

除了本文之外，我唯一需要做的就是抑制消息“打印已取消”，或者用另一个文本覆盖它。

所以，如果有人知道怎么做，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-28T09:54:03.393

将您的事件选择器设置为“PrePrint”，添加您的验证脚本。

在“If”语句的末尾输入：xfa.event.cancelAction = (true)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:18:55.630

您是否在单击以打印表单的表单上的打印按钮？如果你这样做了，那么有一种方法可以抑制打印。否则，我不知道有什么方法可以解决您的问题。

如果您确实有打印按钮，请将以下代码添加到按钮的单击事件中：

```
var result = form1.MainPage.execValidate();
        if(result==false){
            xfa.host.messageBox("Please ensure that all validations are complete before printing.");
        }
        else{
            xfa.host.print(1, "0", (xfa.host.numPages -1).toString(), 0, 0, 0, 0, 0);
        } 
```

其中“form1”是表单的根节点，“MainPage”是包含表单中所有子表单的页面。exeValidate() 方法触发表单中的所有验证消息，如果所有验证都通过测试，则返回 true。否则返回false。

如果您有任何其他问题，请告诉我。

谢谢，阿玛汉。

# python - 属性错误“函数”对象没有属性“has_header”

> ID：12503298
> 
> 赞同：2
> 
> 时间：2012-09-19T21:38:16.993
> 
> 标签：python, django

我遇到了这个错误

> 'function' 对象没有属性 'has_header'

我的网址文件包含

```
 url(r'^HighDefs/$', list_HighDefs), 
```

我有一个用名称定义的视图

> list_HighDefs

在视图文件中。我不知道怎么了。

视图包含

```
def list_HighDefs(request):
user_logger = Logger()
user_logger.log_stack()

if user_object:
    email = user_object.email
    uname = user_object.first_name+' '+user_object.last_name

    try:
        row = allapps_models.highdef.objects.filter(user_email=email, show_status=1)

    except Exception:

         return error_page(request)

    highdefs = []

    for m in row:
        order_product = int(m.m_id)
        state = m.state

        try:
            category = checkout_models.state.objects.get(pk=product).premature.category.all()
            category = category[0].pk
        except:

            category = 0

        if int(category) == 2:
            if state != 's':
                highdefs.append(m)

    return render_to_response('main/HighDefs.html',{'request': request, 'highdefs': highdefs, 'uname' :uname, 'email': email}, context_instance=RequestContext(request))

else:
    return(login) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T00:07:56.810

您的视图必须返回一个`HttpResponse`对象。

它为您的`if`陈述的一个分支执行此操作：

```
return render_to_response(...) 
```

但不在`else`分支中。

```
return(login) 
```

如果`login`是返回`HttpResponse`对象的视图函数，则可以将 return 语句更改为

```
return login(request) 
```

但是，我怀疑您想将用户重定向到您的登录页面。在这种情况下，将您的代码更改为：

```
from django.http import HttpResponseRedirect
return HttpResponseRedirect('/login/') 
```

`/login/`您的登录页面的网址在哪里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T22:12:16.533

您的观点的最后一行是`return login`（不知道为什么您将退货包裹在括号中，这是不必要的）。但大概`login`是一个函数，你没有调用它。我希望你的意思是做`return login()`or `return login(request)`。

# javascript - 如何为 AngularJS 表单编写通用错误处理程序

> ID：12503301
> 
> 赞同：0
> 
> 时间：2012-09-19T21:38:33.497
> 
> 标签：javascript, forms, validation, angularjs

这是此问题的后续问题：

[服务器端验证表单 Angular.js](https://stackoverflow.com/questions/12155949/server-side-validation-form-angular-js)

因此，使用该答案，您可以在模板中编写一些 HTML，该模板将为您提供的每个错误显示特定错误 $setValidity。例如这里是一个：

```
<input ng-model="user.lastName" required="true" id="lastNameField" name="lastName" type="text" class="span3" placeholder="Last Name"/>
<span class="inlineError" ng-show="myProfile.lastName.$error.required">Required</span> 
```

但是，如果我想添加一个姓氏必须是 4 个或更多字符，我将拥有：

```
<input ng-model="user.lastName" required="true" id="lastNameField" name="lastName" type="text" class="span3" placeholder="Last Name"/>
<span class="inlineError" ng-show="myProfile.lastName.$error.minRequired">Last name must be at least 4 characters long</span> 
```

我的问题是如何为字段上的所有错误编写通用处理程序。就像是：

```
<input ng-model="user.lastName" required="true" id="lastNameField" name="lastName" type="text" class="span3" placeholder="Last Name"/>
<span class="inlineError" ng-show="myProfile.lastName.$error.required">{{myProfile.lastName.$error.required}}</span> 
```

那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T00:01:30.717

你的意思是你只想表明表单元素的有效性吗？然后，你可以这样做：

```
<span ng-show="myProfile.lastName.$invalid">Input field is invalid.</span> 
```

如果需要更具体，可以使用`ng-repeat`来遍历 `myProfile.lastName.$error`对象并显示所有错误。在这种情况下，您必须有一些错误名称来翻译错误消息以提高可读性。

# plsql - PLS-00103：遇到符号

> ID：12503302
> 
> 赞同：1
> 
> 时间：2012-09-19T21:38:37.157
> 
> 标签：plsql

我正在尝试编译这个函数

```
CREATE OR REPLACE FUNCTION sql_error_msg (err_num PLS_INTEGER) 
RETURN VARCHAR2 IS 
BEGIN 
RETURN sqlerrm(-err_num); 
EXCEPTION 
WHEN OTHERS THEN 
RETURN NULL; 
END sql_error_msg
/ 
```

但我收到此错误：

```
FUNCTION SQL_ERROR_MSG
On line:  8
PLS-00103: Encountered the symbol "end-of-file" when expecting one of the following:

   ;
The symbol ";" was substituted for "end-of-file" to continue. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:42:05.823

只需`;`在函数末尾添加即可。

```
 END sql_error_msg;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T15:46:29.457

我试图使用`<jdbc:initialize-database>`标签执行“创建或替换”函数的 PL/SQL。我收到了 PLS-00103，结果发现目前不支持这种方式的 PL/SQL。

您必须以不同的方式执行脚本。

我将按照[http://www.coderanch.com/t/298532/JDBC/databases/run-SQL-Script-file-JDBC](http://www.coderanch.com/t/298532/JDBC/databases/run-SQL-Script-file-JDBC)直接尝试使用 JDBC 并从那里找到解决方案。

# android - android中使用XOauth的Javamail api

> ID：12503303
> 
> 赞同：17
> 
> 时间：2012-09-19T21:38:41.200
> 
> 标签：android, oauth-2.0, jakarta-mail

我需要通过我的应用程序发送一封电子邮件`javamail API`（如果有的话，任何其他邮件服务也可以）。问题是我不想问用户他的`username`和`password`。

1）是否可以`OAuth 2.0`与`JavaMail API`/任何其他邮件api一起使用

2) 如何获取 OAuth Token ??

3）网上是否有示例代码

提前致谢。

PS：我从来没有处理过邮件服务/SMTP 请求。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-10T14:19:14.147

我研究了几天，我找到了一个目前对我有用的解决方案。我从 android AccountManager 获取 oauth2 令牌，然后使用 JavaMail 通过 SMTP 发送电子邮件。该想法基于此处的 Java 示例[http://code.google.com/p/google-mail-oauth2-tools/wiki/JavaSampleCode](http://code.google.com/p/google-mail-oauth2-tools/wiki/JavaSampleCode)和此处的 Java Xoauth 示例[http://google-mail-xoauth-tools .googlecode.com/svn/trunk/java/com/google/code/samples/xoauth/XoauthAuthenticator.java](http://google-mail-xoauth-tools.googlecode.com/svn/trunk/java/com/google/code/samples/xoauth/XoauthAuthenticator.java)

JavaMail for Android 中没有可用的 SASL 实现，并且使用 asmack 不起作用，所以我没有使用 SASL，而是像上面的 Xoauth 示例一样直接发出命令。

我像这样从客户经理那里得到令牌

```
AccountManager am = AccountManager.get(this);
Account me = ...; //You need to get a google account on the device, it changes if you have more than one
am.getAuthToken(me, "oauth2:https://mail.google.com/", null, this, new OnTokenAcquired(), null);

private class OnTokenAcquired implements AccountManagerCallback<Bundle>{
    @Override
    public void run(AccountManagerFuture<Bundle> result){
        try{
            Bundle bundle = result.getResult();
            token = bundle.getString(AccountManager.KEY_AUTHTOKEN);

        } catch (Exception e){
            Log.d("test", e.getMessage());
        }
    }
} 
```

如果它有效，您的令牌中有一个 oauth2 令牌。我在此代码中使用令牌

```
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.security.Provider;
import java.security.Security;
import java.util.Properties;

import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.URLName;
import javax.mail.Message;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

import android.util.Log;

import com.sun.mail.smtp.SMTPTransport;
import com.sun.mail.util.BASE64EncoderStream;

public class GMailOauthSender {
private Session session;

public SMTPTransport connectToSmtp(String host, int port, String userEmail,
        String oauthToken, boolean debug) throws Exception {

    Properties props = new Properties();
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.starttls.required", "true");
    props.put("mail.smtp.sasl.enable", "false");
    session = Session.getInstance(props);
    session.setDebug(debug);

    final URLName unusedUrlName = null;
    SMTPTransport transport = new SMTPTransport(session, unusedUrlName);
    // If the password is non-null, SMTP tries to do AUTH LOGIN.
    final String emptyPassword = null;
    transport.connect(host, port, userEmail, emptyPassword);

            byte[] response = String.format("user=%s\1auth=Bearer %s\1\1", userEmail,
            oauthToken).getBytes();
    response = BASE64EncoderStream.encode(response);

    transport.issueCommand("AUTH XOAUTH2 " + new String(response),
            235);

    return transport;
}

public synchronized void sendMail(String subject, String body, String user,
        String oauthToken, String recipients) {
    try {

        SMTPTransport smtpTransport = connectToSmtp("smtp.gmail.com",
                587,
                user,
                oauthToken,
                true);

        MimeMessage message = new MimeMessage(session);
        DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));   
                message.setSender(new InternetAddress(user));   
                message.setSubject(subject);   
                message.setDataHandler(handler);   
        if (recipients.indexOf(',') > 0)   
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
        else  
            message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   
        smtpTransport.sendMessage(message, message.getAllRecipients());   

    } catch (Exception e) {
        Log.d("test", e.getMessage());
    }

} 
```

我根本不是这方面的专家，也没有使用上面示例中的任何安全提供程序，不确定它会如何影响这一点，但它对我有用。希望这会有所帮助，并且有人可以告诉我这是否也有问题：p这是我在这里的第一个答案，如果我做错了很抱歉！

操作，忘记了我使用的其他一些文档：[https](https://developers.google.com/google-apps/gmail/xoauth2_protocol) ://developers.google.com/google-apps/gmail/xoauth2_protocol和[http://developer.android.com/training/id-auth/authenticate.html](http://developer.android.com/training/id-auth/authenticate.html)

再次行动！您还需要清单中的这些权限

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.USE_CREDENTIALS" /> 
```

# jquery - 在所有广告和脚本之后，Flexslider 加载结束

> ID：12503308
> 
> 赞同：0
> 
> 时间：2012-09-19T21:39:18.600
> 
> 标签：jquery, wordpress, flexslider

我注意到在所有广告和脚本完成加载后我的 Flexslider 加载幻灯片，并且在 flexslider 上的位置是“大洞”，直到所有脚本和广告完成加载！？你知道这是为什么吗？

```
<script type="text/javascript">
jQuery(window).load(function() {
jQuery('#featured').flexslider({
slideshowSpeed: 6000,
directionNav:true,
pauseOnHover:true,
controlNav: false,
manualControls: '.flexslide-custom-controls li a',
controlsContainer: '.container'
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:45:06.227

您可以替换以下行：

```
jQuery(window).load(function() { 
```

对于这个：

```
jQuery(window).ready(function() { 
```

因此，您只需在准备就绪时创建滑块`DOM`，而不是在图像和其他资源完成加载时创建。

但要确保 Flexslider 运行良好，不需要先加载任何这些资源。

# android - 处理 NullPointerException，假设这是问题

> ID：12503310
> 
> 赞同：0
> 
> 时间：2012-09-19T21:39:37.380
> 
> 标签：android, nullpointerexception, arduino

我得到一个“强制关闭”，我猜这是一个未处理的异常。下面的代码从我的 Android 手机向充当网络服务器的 Arduino 发送 HTTP 请求。如果 Arduino 没有响应，例如没有连接，我想优雅地通知用户这一点，而不是让应用程序意外停止并显示“强制关闭”对话框。

在下面的代码中，我在我认为可能发生异常的地方添加了注释。这可能是问题吗？如果是，我应该如何解决？如果没有，我的代码中还有什么乱七八糟的？

我在底部包含了来自[LogCat的错误消息。](https://sites.google.com/site/androidhowto/how-to-1/save-logcat-to-a-text-file)

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    HttpParams httpParameters = new BasicHttpParams();

    // Set the timeout in milliseconds until a connection is established.
    int timeoutConnection = 3000;
    HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);

    // Set the default socket timeout (SO_TIMEOUT)
    // in milliseconds which is the timeout for waiting for data.
    int timeoutSocket = 3000;
    HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

    HttpClient httpclient = new DefaultHttpClient(httpParameters);

    //Send command to turn on outlet 1 "?aaa/"
    HttpPost httppost = new HttpPost("http://24.44.23.65:150/?aaa/");
    HttpResponse response = null;

    try {
        response = httpclient.execute(httppost);
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    //Convert response to a string

    //*********************************************************************************
    // I think the problem might be happening at the next line because if the try/catch
    // block above results in an exception, "response" will still be null and there
    // won't be an HttpEntity to get.
    //*********************************************************************************

    HttpEntity entity = response.getEntity();
    BufferedReader reader = null;

    try {
        reader = new BufferedReader(new InputStreamReader(entity.getContent()));
    }
    catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    StringBuilder sb = new StringBuilder();
    String line = null;

    try{
        while((line = reader.readLine())!=null){
            sb.append(line);
        }
    }
    catch (IOException e){
        e.printStackTrace();
    }

    String state = sb.toString().trim();

    //Test response and update button
    if(state.contains("Done")){
        //not sure how all of this works but it does
        v.getBackground().setColorFilter(0xFFFFFF00, PorterDuff.Mode.MULTIPLY);
        Drawable d = outletOneOFF.getBackground();
        outletOneOFF.invalidateDrawable(d);
        d.clearColorFilter();
        ((Button) v).setText("Light is On");
        outletOneOFF.setText("OFF");
    }
    else
        if(state.contains("Error"))
        {
            ((Button) v).setText("ERROR");
        }
} 
```

错误日志：

```
09-19 17:13:37.746: E/AndroidRuntime(22814): FATAL EXCEPTION: main
09-19 17:13:37.746: E/AndroidRuntime(22814): java.lang.NullPointerException
09-19 17:13:37.746: E/AndroidRuntime(22814):     at com.banatwala.aquarium.outlets$1.onClick(outlets.java:70)
09-19 17:13:37.746: E/AndroidRuntime(22814):     at android.view.View.performClick(View.java:2532)
09-19 17:13:37.746: E/AndroidRuntime(22814):     at android.view.View$PerformClick.run(View.java:9291)
09-19 17:13:37.746: E/AndroidRuntime(22814):     at android.os.Handler.handleCallback(Handler.java:587)
09-19 17:13:37.746: E/AndroidRuntime(22814):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-19 17:13:37.746: E/AndroidRuntime(22814):     at android.os.Looper.loop(Looper.java:150)
09-19 17:13:37.746: E/AndroidRuntime(22814):     at android.app.ActivityThread.main(ActivityThread.java:4419)
09-19 17:13:37.746: E/AndroidRuntime(22814):     at java.lang.reflect.Method.invokeNative(Native Method)
09-19 17:13:37.746: E/AndroidRuntime(22814):     at java.lang.reflect.Method.invoke(Method.java:507)
09-19 17:13:37.746: E/AndroidRuntime(22814):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:846)
09-19 17:13:37.746: E/AndroidRuntime(22814):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:604)
09-19 17:13:37.746: E/AndroidRuntime(22814):     at dalvik.system.NativeStart.main(Native Method)
09-19 17:13:37.806: D/dalvikvm(22814): GC_CONCURRENT freed 343K, 49% free 2903K/5639K, external 0K/0K, paused 7ms+3ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:54:20.243

尝试检查您的结果是否不为空，如果失败则通知用户：

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    HttpParams httpParameters = new BasicHttpParams();

    // Set the timeout in milliseconds until a connection is established.
    int timeoutConnection = 3000;
    HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);

    // Set the default socket timeout (SO_TIMEOUT)
    // in milliseconds which is the timeout for waiting for data.
    int timeoutSocket = 3000;
    HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

    HttpClient httpclient = new DefaultHttpClient(httpParameters);

    //Send command to turn on outlet 1 "?aaa/"
    HttpPost httppost = new HttpPost("http://24.44.23.65:150/?aaa/");
    HttpResponse response = null;

    try {
        response = httpclient.execute(httppost);
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    //Convert response to a string

    // Try this:

    if(response != null) {
        HttpEntity entity = response.getEntity();
        BufferedReader reader = null;

        try {
            reader = new BufferedReader(new InputStreamReader(entity.getContent()));
        }
        catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        StringBuilder sb = new StringBuilder();
        String line = null;

        try{
            while((line = reader.readLine())!=null){
                sb.append(line);
            }
        }
        catch (IOException e){
            e.printStackTrace();
        }

        String state = sb.toString().trim();

        //Test response and update button
        if(state.contains("Done")){
            //not sure how all of this works but it does
            v.getBackground().setColorFilter(0xFFFFFF00, PorterDuff.Mode.MULTIPLY);
            Drawable d = outletOneOFF.getBackground();
            outletOneOFF.invalidateDrawable(d);
            d.clearColorFilter();
            ((Button) v).setText("Light is On");
            outletOneOFF.setText("OFF");
        }
        else
            if(state.contains("Error"))
            {
                ((Button) v).setText("ERROR");
            }
    } else {
        // ******************************
        // notify the User that the Arduino is not available
        // like
        Toast.makeText(this, "Cannot connect to the Arduino!", Toast.LENGTH_LONG).show();
        // ******************************
    }
} 
```

# sql-server - t-sql XML 解析出包含事件、数据和值的多条记录

> ID：12503313
> 
> 赞同：2
> 
> 时间：2012-09-19T21:39:43.763
> 
> 标签：sql-server, xml, tsql, xquery

我正在尝试解析这一点。我希望每个事件都有一个记录，所以我需要一种方法来分别查询每个事件。

但我希望它看起来像这样：

```
Event Name                                         || ID  || Timestamp || process_utilization
---------------------------------------------------------------------------------------------
scheduler_monitor_system_heal_ring_buffer_recorded ||  0  || 0         || 33 
```

这是 XML：

```
<events>
  <session startTime="2012-09-06T10:48:15.373" droppedEvents="0" largestDroppedEvent="0">
    <RingBufferTarget truncated="0" processingTime="0" totalEventsProcessed="14" eventCount="14" droppedCount="0" memoryUsed="3994">
      <event name="scheduler_monitor_system_health_ring_buffer_recorded" package="sqlos" timestamp="2012-09-19T16:46:33.091Z">
        <data name="id">
          <type name="uint32" package="package0" />
          <value>0</value>
        </data>
        <data name="timestamp">
          <type name="uint64" package="package0" />
          <value>0</value>
        </data>
        <data name="process_utilization">
          <type name="uint32" package="package0" />
          <value>33</value>
        </data>
      </event>
      <event name="resource_monitor_ring_buffer_recorded" package="sqlos" timestamp="2012-09-19T16:46:38.386Z">
        <data name="id">
          <type name="uint32" package="package0" />
          <value>0</value>
        </data>
      </event>
    </RingBufferTarget>
  </session>
</events> 
```

编辑：或者，如果我们可以返回看起来像这样的行，那就太好了：

```
scheduler_monitor_system_heal_ring_buffer_recorded || id || 0
scheduler_monitor_system_heal_ring_buffer_recorded || timestamp || 0
scheduler_monitor_system_heal_ring_buffer_recorded || process_utilization|| 33 
```

编辑：（谢谢，马克）使用马克的代码，我得到了我想要的 98% - 只需要事件名称。

```
SELECT
    DataName = Evt.value('@name[1]', 'varchar(50)'),
    TypeName= Evt.value('type[1]/@name[1]', 'varchar(50)'),
    DataValue = Evt.value('value[1]', 'varchar(50)'),
    DataText = Evt.value('text[1]', 'varchar(50)')
FROM 
    @input.nodes('/events/session/RingBufferTarget/event/data') as Tbl(Evt) 
```

返回：

```
id                  uint32  0   NULL
timestamp           uint64  0   NULL
process_utilization uint32  33  NULL
id                  uint32  0   NULL 
```

（但显然需要事件名称）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:35:53.093

非常感谢@Marc_S 为我指明了正确的方向！马克，如果有什么方法可以让您获得荣誉，请在此处添加答案或其他任何内容，我会感谢您。

```
SELECT
    DataName = Evt.value('../@name[1]', 'varchar(50)'),
    DataName = Evt.value('@name[1]', 'varchar(50)'),
    TypeName= Evt.value('type[1]/@name[1]', 'varchar(50)'),
    DataValue = Evt.value('value[1]', 'varchar(50)'),
    DataText = Evt.value('text[1]', 'varchar(50)')
FROM 
    @input.nodes('/events/session/RingBufferTarget/event/data') as Tbl(Evt) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T23:49:15.767

假设您的 XML 在名为 的变量中`@input`，请尝试以下操作：

```
declare @input XML = '....(your XML here).....';

SELECT
    EventName = Evt.value('(@name)[1]', 'varchar(50)'),
    EventID = Evt.value('(data[@name="id"]/value)[1]', 'int'),
    EventTimeStamp = Evt.value('(data[@name="timestamp"]/value)[1]', 'bigint'),
    ProcessUtilization = Evt.value('(data[@name="process_utilization"]/value)[1]', 'int')
FROM 
    @input.nodes('/events/session/RingBufferTarget/event') as Tbl(Evt) 
```

使用您的示例 XML，我得到以下输出：

```
EventName                                           EventID   EventTimeStamp ProcessUtilization
scheduler_monitor_system_health_ring_buffer_record     0          0              33
resource_monitor_ring_buffer_recorded                  0         NULL            NULL 
```

# iphone - 分发使用其他代码的自定义视图

> ID：12503314
> 
> 赞同：0
> 
> 时间：2012-09-19T21:39:48.243
> 
> 标签：iphone, ios, ipad, git, custom-controls

我正在尝试发布一个使用[WEPopoverController](https://github.com/werner77/WEPopover)以及[UIButton+Glossy](https://github.com/GeorgeMcMullen/UIButton-Glossy)的自定义视图，但我不知道应该如何将它们的代码添加到我的 git 存储库中。我应该对它进行子模块吗？

如果有人感兴趣，这里是 UIView： ![在此处输入图像描述](../Images/bb76fe62efc2d828954e622b9f79c8c5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:51:11.930

当然，您可以将它们添加为子模块，因此归结为更多个人意见。

在我看来，子模块被过度使用了。我只会在我想将特定项目分解为较小项目的情况下使用它。因此，假设我有一个大型项目，但其中的特定部分本身就很有用。在这种情况下，我可以创建一个子模块，以便只对那部分感兴趣的人可以分叉/克隆它。

在您仅在应用程序中使用它的情况下，最好的方法可能是将文件复制到您的存储库中，而不是使用子模块。在这种情况下，将它们添加到供应商文件夹可能是个好主意，只是为了清楚地表明它是您在此处使用的单独项目的一部分。

假设将来项目更新并破坏 API 或导致其他问题。你最好有一个你用你的应用程序测试过的文件的静态版本，而不是让它打开让任何人将子模块更新到你的应用程序可能不支持的那些库的版本。

# sql - 列出符合条件的交易

> ID：12503320
> 
> 赞同：1
> 
> 时间：2012-09-19T21:40:49.647
> 
> 标签：sql

意识到我之前提出的另一个问题可能太难了，我正在改变我的要求。

我在一家信用卡公司工作。我们的数据库有一个客户表和一个交易表。客户表中的字段是 SSN 和 CustomerKey。交易表中的字段是 CustomerKey、交易日期 (Transdate) 和交易金额 (TransAmt)。

我需要一个查询，可以识别每个 ssn，其中任何交易金额的总和在 2012 年的两天内 > 1000。如果 ssn 在两天内的交易金额 > 1000，我需要查询返回***所有***该 ssn 的交易。

以下是交易表中原始数据的示例：

```
Trans#-----CustKey-----Date--------金额
1-----------12345----01/01/12--------$600
2-----------12345----01/02/12--------$500
3-----------67890----01/03/12--------$10
4-----------98765----04/01/12--------$600
5-----------43210----04/02/12--------$600
6-----------43210----04/03/12--------$100
7-----------13579----04/02/12--------$600
8-----------24568----04/03/12--------$100
```

以下是客户表中原始数据的示例：

```
客户密钥-----SSN
12345------123456789
67890------123456789
98765------987654321
43210------987654321
13579------246801357
24568------246801357
```

**这是我需要的结果：**

```
Trans#------SSN---------日期---------金额
1--------123456789----01/01/12---------$600
2--------123456789----01/02/12---------$500
3--------123456789----01/03/12----------$10
4--------987654321----04/01/12---------$600
5--------987654321----04/02/12---------$600
6--------987654321----04/03/12---------$100
```

正如您在我的结果中看到的，包括SSN 123456789 和 987654321 的***所有交易，但排除了 SSN 246801357。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:13:52.410

一种方法是在一年内每两天滚动一次。这是一个**[SQL Fiddle](http://sqlfiddle.com/#!3/1743d/4)**示例。这个想法很简单：

1）创建一个临时表来存储所有匹配的客户

```
create table CustomersToShow
(
    SSN int
) 
```

2) 循环一年并用符合金额标准的客户填充临时表

```
declare @firstDayOfTheYear datetime = '1/1/2012';
declare @lastDayOfTheYear datetime = '12/31/2012';
declare @currentDate datetime = @firstDayOfTheYear;
declare @amountThreshold money = 1000;

while @currentDate <= @lastDayOfTheYear
begin
    insert into CustomersToShow(SSN)
    select b.SSN
    from transactions a
        join customers b
        on a.CustKey = b.CustKey
    where TransactionDate >= @currentDate
        and TransactionDate <= DATEADD(day, 2, @currentDate)
    group by b.SSN  
    having SUM(a.TransactionAmount) >= @amountThreshold

    set @currentDate = DATEADD(day,2,@currentDate)
end 
```

3）然后只需选择

```
select a.TransNumber, b.SSN, a.TransactionDate, a.TransactionAmount 
from transactions a
    join customers b
    on a.CustKey = b.CustKey
    join CustomersToShow c
    on b.SSN = c.SSN 
```

**注意**：这会很慢...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:23:35.580

如果你没看错的话，这很容易并且非常适合基于集合的逻辑。您只需加入一个包含您感兴趣的每个日期范围的表。每个 T-SQL 数据库（Oracle 内置）都应该有一个名为的实用程序表`integers`- 它经常非常有用：

```
CREATE TABLE integers ( n smallint, constraint PK_integers primary key clustered (n))
INSERT integers select top 1000 row_number() over (order by o.id) from sysobjects o cross join sysobjects 
```

您的日期表如下所示：

```
SELECT dateadd(day, n-1, '2012') AS dtFrom, dateadd(day, n+1, '2012') AS dtTo
from integers where n <= 366 
```

然后，您可以（缩写）：

```
SELECT ssn, dtFrom
FROM yourTables t
    JOIN ( SELECT dateadd(day, n-1, '2012') as dtFrom, dateadd(day, n+1, '2012') AS dtTo
           from integers where n <= 366 ) d on t.date between d.dtFrom and d.dtTo
GROUP BY ssn, dtFrom
HAVING sum(amount) > 1000 
```

您可以选择所有交易：

```
WHERE ssn in ( SELECT distinct ssn from ( <above query> ) t ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T21:50:42.370

虽然您可能会想出一种通过标准 SQL 完成此操作的 hacky 方法，但这是 IMO 更适合通过代码解决的问题（即，不是通过基于集合的逻辑/SQL）。

如果按 customerKey 和 date 对交易列表进行排序，然后循环遍历数据，则很容易解决。理想情况下，我会在代码中执行此操作，但也可以编写存储过程并使用循环和游标。

# image - 响应式容器中的响应式图像？

> ID：12503322
> 
> 赞同：1
> 
> 时间：2012-09-19T21:40:56.260
> 
> 标签：image, html, css

我如何获得这个响应图像，或者应该是什么，以适应它嵌套的父级？

我已经应用了正确的 CSS，我没有在 HTML 中定义任何宽度或高度。这是我的CSS。

```
.header {
    height: 25%;
    width: 95%;
    padding: 2.5%;
    background: #fff;
}
.header img {
    max-width: 100%;
    height: auto;
} 
```

您可以在此处查看问题：http: [//www.client.noxinnovations.com/jensenblair/](http://www.client.noxinnovations.com/jensenblair/)

大圆圈图像？这应该是响应式的。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T22:09:42.760

我可能在这里遗漏了一些东西，但是设置：

```
height:100%; 
```

因为图像对我有用...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T23:17:55.743

您只需将 max-width 更改为 width，如下所示：

```
.header img {
    width: 100%;
    height: auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T11:10:54.490

我知道这是一个老问题，但如果你同意

> 显示：弹性；

对于所有块类型元素的父级，它们将具有父元素的最大宽度。

# django - 如何配置 intellij 以识别我的媒体目录

> ID：12503323
> 
> 赞同：3
> 
> 时间：2012-09-19T21:41:01.870
> 
> 标签：django, intellij-idea

我在一个 django 项目中工作，我想让 Intellij-IDEA 解析我的媒体文件夹的路径（css/imgs/js）

这个：

```
<link rel="stylesheet" href="/media/projectname/css/main.css"> 
```

给我错误：无法解析目录“媒体”

有没有办法配置它？

# function - 在 Maple 中编写函数

> ID：12503330
> 
> 赞同：0
> 
> 时间：2012-09-19T21:41:45.807
> 
> 标签：function, parameters, maple

Maple 中的过程 C 函数等价于什么？Maple 告诉我一个模块不能除了参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:58:29.067

Maple 模块可以应用于参数，因此如果它具有名为的导出成员，则可以作为函数调用`ModuleApply`。

在这种情况下，表单的函数调用（涉及模块`m`）`m(...arguments...)`将调用 call `m:-ModuleApply(...arguments...)`。

见[模块应用](http://www.maplesoft.com/support/help/Maple/view.aspx?path=ModuleApply)

# windows - 用于以递归方式删除比某个时间新的文件的 Windows 命令行脚本

> ID：12503334
> 
> 赞同：1
> 
> 时间：2012-09-19T21:42:07.540
> 
> 标签：windows, command-line, batch-file

任何人都可以帮助我使用通过目标目录递归并删除比指定日期和时间戳更新的文件的 Windows 命令行脚本吗？

我试过这个`forfiles`命令，但它不允许我指定**时间**，它只允许我指定一个日期。

我认为唯一的选择可能是使用`FOR`语句，但是我对命令行太陌生了，以至于我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:57:52.300

将其保存为**Delete_Files.bat** 并执行为

**cmd>** Delete_Files.bat MM-DD-YYYY

```
for /f "tokens=*" %%a IN ('xcopy *.* /d:%1 /L /I null') do if exist "%%~nxa" del "%%~nxa" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T04:40:11.003

您在哪里指定运行脚本的位置？我运行了与上面相同的一个，它删除了与保留 Delete_files.bat 相同的目录中的所有内容

# sql - 如何分组计数并加入续集？

> ID：12503347
> 
> 赞同：0
> 
> 时间：2012-09-19T21:43:05.917
> 
> 标签：sql, ruby, sequel

我查看了所有文档，但在将这个查询放在 Sequel 中时遇到了问题。

```
select a.*, IFNULL(b.cnt, 0) as cnt FROM a LEFT OUTER JOIN (select a_id, count(*) as cnt from b group by a_id) as b ON b.a_id = a.id ORDER BY cnt 
```

将表 A 视为产品，表 B 是表明 A 已购买的记录。

到目前为止，我有：

```
A.left_outer_join(B.group_and_count(:a_id), a_id: :id).order(:count) 
```

本质上，我只想对表 B 进行分组和计数，并将其与 A 连接，但由于 B 不一定有 A 的任何记录，并且我按 B 中的数字对其进行排序，因此我需要默认一个值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:16:40.093

```
DB[:a].
  left_outer_join(DB[:b].group_and_count(:a_id).as(:b), :a_id=>:id).
  order(:cnt).
  select_all(:a).
  select_more{IFNULL(:b__cnt, 0).as(:cnt)} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-19T22:18:16.687

我可以在 MS SQL 语法方面为您提供帮助。

假设您的表是产品和订单。

```
CREATE TABLE Product (
  Id INT NOT NULL,
  NAME VARCHAR(100) NOT NULL)

CREATE TABLE [Order] (
  Id INT NOT NULL,
  ProductId INT)

INSERT INTO Product (Id, Name) VALUES
(1, 'Tea'), (2, 'Coffee'), (3, 'Hot Chocolate')

INSERT INTO [Order] (Id, ProductId) VALUES
(1, 1), (2, 1), (3, 1), (4, 2) 
```

此查询将给出每个产品的订单数，包括没有任何订单的订单数。

```
SELECT p.Id AS ProductId,
       p.Name AS ProductName,
       COUNT(o.Id) AS Orders
FROM Product p 
         LEFT OUTER JOIN [Order] o
           ON p.Id = o.ProductId
GROUP BY
       p.Id,
       p.Name
ORDER BY
       COUNT(o.Id) DESC 
```

# c - 在 C 中打开一个文件

> ID：12503349
> 
> 赞同：0
> 
> 时间：2012-09-19T21:43:21.510
> 
> 标签：c

这是我的代码：

```
outfile = fopen(outname, "w");//outname="/home/user/dir/file"
if (!outfile) {
printf("There was a problem opening %s for writing\n", outname);
}
else {
 /* write to the file, */
 } 
```

运行时显示：打开 /home/user/dir/file 进行写入时出现问题 请问您是否对此错误有任何想法 谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T21:45:31.043

尝试[`perror()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/perror.html)更好地描述错误。

```
if (!outfile) {
    /* printf("There was a problem opening %s for writing\n", outname); */
    perror(outname);
} 
```

# vim - 在 vim 中使用执行可视化命令

> ID：12503350
> 
> 赞同：2
> 
> 时间：2012-09-19T21:43:23.703
> 
> 标签：vim

我知道这一定很简单。

为什么`vnoremap <leader>rl di[<esc>pa]`将所选文本括在括号中，但是：

```
vnoremap <leader>rl :call VisAddRefLink()<CR>

function! VisAddRefLink()
    execute "normal! di[\<esc>pa]"
endfunction 
```

没有？！

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:44:54.863

你需要让你的函数处理一个范围。实现这一点的一种方法是这样的：

```
vnoremap <leader>rl :call VisAddRefLink()<CR>

function! VisAddRefLink() range
   exe a:firstline . "normal! ^i["
   exe a:lastline . "normal! $a]"
endfunction 
```

您的示例无法正常工作的原因是该 exe 不能按说对视觉选择进行操作。例如，尝试在视觉上选择一些东西，然后做`:norm d`. 你会注意到它没有删除。如果您将范围添加到您的函数中，`:help function-range-example`它通过以类似的方式（逐行）操作来帮助进行视觉选择。但是，它仍然不是真正的视觉选择。范围加法确实允许您使用`a:firstline`and`a:lastline`变量，这可用于完成此操作。您也可以通过以下方式使用单个like 来完成此操作：

```
vnoremap <leader>rl <esc>:norm! '<^x2Phr['>$x2pr]<cr> 
```

这首先用于`<esc>`结束视觉选择。然后它执行一个只会运行一次的普通命令。如果留下了视觉选择，那么它将为视觉选择中的每一行运行一次。一旦它运行一次

`'<^`跳转到视觉选择的第一行和该行的第一个非空白区域。

`x2Phr[`删除那个字符，在前面粘贴两次，向左移动，所以我们在新字符上方，并用开头替换它 [

`'>$`移动到视觉选择的最后一行的最后一个字符

`x2pr]`与以前相同，但方向相反

像往常一样，给猫剥皮的方法不止一种，尤其是使用 vimscript。随着您了解更多，您会看到很多完成事情的可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:14:18.953

试试这个：

```
vnoremap <leader>rl :<C-u>call VisAddRefLink()<CR>

function! VisAddRefLink()
    execute "normal! gvdi[\<esc>pa]"
endfunction 
```

`<C-u>`前面的`call`避免了映射在其前面插入可视`'<,'>`范围；我们希望该函数只调用一次，而不是对范围内的每一行调用一次。

在函数内部，我们需要先重新建立视觉选择，然后再对其进行操作；这样`gv`做的。

# bash - 写入文件，如果存在则追加，否则在 bash 中创建

> ID：12503357
> 
> 赞同：12
> 
> 时间：2012-09-19T21:43:33.850
> 
> 标签：bash, append, echo

我试图用变量的内容编写一个文件，但是如果该文件不存在，请创建它：

到目前为止，我得到了这个：

```
echo "$Logstring" >> $fileLog 
```

我缺少什么，因为当文件不存在时出现错误。if 条件是必要的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-06-21T23:29:04.553

使用`touch`命令：

```
touch $fileLog
echo "$Logstring" >> $fileLog 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T19:02:24.550

```
 #! /bin/bash
   VAR="something to put in a file"
   OUT=$1
   if [ ! -f "$OUT" ]; then
       mkdir -p "`dirname \"$OUT\"`" 2>/dev/null
   fi
   echo $VAR >> $OUT

   # the important step here is to make sure that the folder for the file exists
   # and create it if it does not. It will remain silent if the folder exists. 
```

* * *

```
$ sh out hello/how/are/you/file.out
geee: ~/src/bash/moo
$ sh out hello/how/are/you/file.out
geee: ~/src/bash/moo
$ sh out another/file/lol.hmz
geee: ~/src/bash/moo
$ find . 
.
./out
./another
./another/file
./another/file/lol.hmz
./hello
./hello/how
./hello/how/are
./hello/how/are/you
./hello/how/are/you/file.out
geee: ~/src/bash/moo
$ cat ./hello/how/are/you/file.out
something to put in a file
something to put in a file
geee: ~/src/bash/moo
$ cat ./another/file/lol.hmz 
something to put in a file 
```

* * *

如果文件的文件夹名称中有空格，则需要转义的 " 用于 dirname。

# command-line - vbscript 将当前目录作为命名参数传递

> ID：12503358
> 
> 赞同：0
> 
> 时间：2012-09-19T21:43:46.307
> 
> 标签：command-line, vbscript, command-line-arguments, wsh

我正在尝试将工作目录作为命名参数传递给 vbscript。系统通常扩展“.”。到当前路径，但是当我检查命名参数时，我只得到字符串“。”

这是命令行：

```
 cscript myscript.vbs /a:"first arg" /b:second /c:. 
```

这是脚本：

```
 dim args : set args = wscript.arguments.named
    wscript.echo args.item("a")
    wscript.echo args.item("b")
    wscript.echo args.item("c") 
```

这是输出：

```
 first arg
    second
    . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:26:15.033

```
Set fso = CreateObject("Scripting.FileSystemObject")
WScript.Echo fso.GetAbsolutePathName(args("c")) 
```

或者您可以使用`/c:"%CD%"`而不是`/c:.`.

但是，如果您总是想知道当前目录，则不需要将其作为参数传递。只需使用

```
cwd = CreateObject("WScript.Shell").CurrentDirectory 
```

# hibernate - 搜索“按实体”时出现 TransientObjectException

> ID：12503360
> 
> 赞同：1
> 
> 时间：2012-09-19T21:43:51.737
> 
> 标签：hibernate, object, jpa, transactional, transient

关于我的带有 JPA/Hibernate 设置的 Spring MVC 3，我有一个由两部分组成的问题。

首先，我是否在我的服务方法上添加@Transactional 注释并不重要，它总是有效，我觉得这很奇怪。当我忘记添加 @Transactional 注释时，我习惯于抱怨他们没有事务的方法。

这是我在 application-context.xml 文件中的交易设置。

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" p:dataSource-ref="dataSource"/>
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager" p:entityManagerFactory-ref="entityManagerFactory"/>
<tx:annotation-driven transaction-manager="transactionManager"/> 
```

其次，当我使用服务方法来获取类别时，我会得到一个类别对象。据我所知，它不是代理，而是一个真实的对象，设置了大多数属性。当我使用该类别搜索课程时，它出错了：

```
public List<Course> findCourses(Category category) {
    Query queryGood = entityManager.createQuery("select c from Course c join fetch c.company where c.category.id = :categoryId");
    Query queryBad = entityManager.createQuery("from Course c where c.category = :category");

    queryGood.setParameter("categoryId", category.getId());
    queryBad.setParameter("category", category);

    List<Category> categoriesGood = queryGood.getResultList(); // THIS WORKS!
    List<Category> categoriesBad = queryBad.getResultList(); // THIS THROWS AN EXCEPTION
    return null;

} 
```

执行 queryBad 会导致以下异常：

```
org.springframework.dao.InvalidDataAccessApiUsageException:
org.hibernate.TransientObjectException: object references an unsaved 
transient instance - save the transient instance before flushing:
nl.myapp.domain.Category; nested exception  is java.lang.IllegalStateException:
org.hibernate.TransientObjectException: object references an unsaved transient instance
- save the transient instance before flushing: nl.myapp.domain.Category
org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:298) 
```

你知道为什么 (1) 我的应用程序在不使用 @Transactional 注释的情况下获取数据，以及 2) 为什么 Hibernate 会抛出这个 TransientObjectException？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:21:03.103

别管这个。Hibernate 正在做出应有的反应。我使用了一个@Transactional 服务方法来获取Category，并将该Category 用作另一个@Transactional 服务方法的输入。当您这样做时，Hibernate 会为新的第二个服务方法调用创建一个新会话（因为它有自己的 Transactional 注释），并且无法在新会话中找到 Category。这就是它抛出 TransientObject 异常的原因。我现在只是使用类别的 id 作为 seciond 服务方法调用的参数，这很有效。

# jquery - 如何使用 ajax 响应重新生成 jquery 选项卡

> ID：12503361
> 
> 赞同：1
> 
> 时间：2012-09-19T21:43:54.660
> 
> 标签：jquery, tabs, reload

我正在编写一个用户界面，允许用户上传一组视频，每个视频都显示在页面区域的单独选项卡上。当上传新视频或删除现有视频（均通过 AJAX）时，我想相应地更新选项卡。我在更新标签后无法重绘标签，并且没有运气。这就是我正在做的事情：

javaScript 将请求发送到服务器，如下所示：

```
function deleteVideo(id){
    $.post("video.php?action=deletevideo",
        {'id' : id},
        function(response){
            $('#videoTabs').html(response);
            $('#videoTabs').tabs();
        }
    );
} 
```

在 PHP 端，请求的处理方式如下：

```
switch($_GET['action']) {
    case 'deletevideo':
        try{
            $video = new videoClass($_POST['id']);
            $video->delete();
            draw_video_tabs();
        }catch(Exception $e){
            echo $e->getMessage();
        }
        break; 
```

我可以看到 PHP 脚本发回的代码正是我所期望的，并且“draw_video_tabs”函数与我最初绘制页面时使用的函数相同（不使用 ajax）。它给我的 HTML 正是它应该是的。

然而，由于某种原因，当它发回回复时，“#videoTabs”div 没有得到标签。相反，我看到的是直接的 HTML（一个项目符号列表和一组匹配的 div）。

我还尝试将响应作为 JSON 编码对象发送回来，并以这种方式将其插入正文。这也给了我正确的代码，但没有标签。

那么我在这里错过了什么？我假设当从 AJAX 请求加载内容时，有一些相对简单的方法可以创建选项卡。请注意，这是我正在加载的整个选项卡集 - 而不是一个选项卡。它被加载到页面加载时已经生成的同一个 div 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:56:11.010

如果要加载所有选项卡，为什么不删除旧的 html 标记并插入新的？如果只是添加和删除，请看这篇文章：[使用 jQuery 和 jQuery UI 添加和删除选项卡](http://www.remotesynthesis.com/post.cfm/adding-and-removing-tabs-with-jquery-and-jquery-ui)

**补充：您可以在**[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/) 上找到所有文档（选项卡方法）

```
.tabs( "destroy" )
.tabs( "add" , url , label , [index] )
.tabs( "remove" , index ) 
```

# php - 如何检查 $_GET 参数是否存在但没有值？

> ID：12503364
> 
> 赞同：13
> 
> 时间：2012-09-19T21:44:14.443
> 
> 标签：php, get, isset, is-empty

我想检查`app`参数是否存在于 URL 中，但没有值。

**例子：**

```
my_url.php?app 
```

我试过`isset()`and `empty()`，但不工作。以前看过，忘记怎么弄了。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-19T21:57:51.420

空是正确的。你想同时使用设置和空

```
if(isset($_GET['app']) && !empty($_GET['app'])){
    echo "App = ".$_GET['app'];
} else {
    echo "App is empty";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T21:49:52.817

`empty`应该工作（`if(empty($_GET[var]))...`），因为它检查以下内容：

> 以下内容被认为是空的：
> 
> ```
> ""（一个空字符串）
> 0（0 为整数）
> 0.0（0 作为浮点数）
> "0" (0 作为字符串)
> 无效的
> 错误的
> array() （一个空数组）
> $var; （声明的变量，但没有值）
> ```

以下是您的替代方案：

`is_null`- 查找变量是否为 NULL

```
if(is_null($_GET[var])) ... 
```

`defined`- 检查给定的命名常量是否存在

```
if(defined($_GET[var])) ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T21:49:02.293

```
if( isset($_GET['app']) && $_GET['app'] == "")
{

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-30T17:38:01.913

**您可以简单地通过** `array_key_exists('param', $_GET);`.

想象一下这是你的 URL: `http://example.com/file.php?param`。它有`param`查询参数，但没有值。所以它的价值`null`实际上是。

`array_key_exists('param', $_GET);``true`如果`param`存在则返回；`false`如果它根本不存在则返回。

# php - 远程使用 MySqlDump 时 MySql 表锁定？

> ID：12503367
> 
> 赞同：1
> 
> 时间：2012-09-19T21:44:40.183
> 
> 标签：php, mysql, mysqldump

我正在使用 php 脚本远程备份我的 sql 数据库，该数据库利用 mysqldump。 [http://www.dagondesign.com/files/backup_dbs.txt](http://www.dagondesign.com/files/backup_dbs.txt)

我尝试添加 --lock-tables=false 因为我使用的是 MyISAM 表，但仍然出现错误。

```
exec( "$MYSQL_PATH/mysqldump --lock-tables=false $db_auth --opt $db 2>&1 >$BACKUP_TEMP/$db.sql", $output, $res); 
```

错误：

```
mysqldump: Couldn't execute 'show fields from `advisory_info`': Can't create/write to file 'E:\tmp\#sql_59c_0.MYD' (Errcode: 17) (1) 
```

有人告诉我这个文件是它自己的锁定文件，我能够在我想要备份的服务器中找到它。

那么这是锁定文件吗？如果我放置变量--lock-tables = false，它是否会锁定数据库？或者它不应该在那里，因为有很多人在服务器上工作并且可能有人创建了它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:02:11.350

它可能`--lock-tables=false`没有做你认为它正在做的事情。由于您正在通过`--lock-tables`，因此可能假设您*确实*想要锁定表（即使这是默认设置），所以它正在锁定它们。在 Linux 中，我们不会阻止标志，而是附加类似的东西`=false`or `=0`，但通常通过使用`--skip-X`or `--no-X`。

您可能想尝试`--skip-opt`：

```
 --skip-opt          Disable --opt. Disables --add-drop-table, --add-locks,
                      --lock-tables, --set-charset, and --disable-keys. 
```

因为`--opt`默认启用，所以您可以`--skip-opt`添加回您想要的任何标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:07:42.130

在使用 Wamp 的 Windows 7 上，选项是`--skip-lock-tables`

取自[这个答案](https://stackoverflow.com/a/10726820/731138)

# python - 使用 opencv 和 ffmpeg 制作视频。如何找到正确的颜色格式？

> ID：12503368
> 
> 赞同：10
> 
> 时间：2012-09-19T21:44:55.477
> 
> 标签：python, opencv, image-processing, ffmpeg

我有一个用 python、opencv 和 ffmpeg 构建的网络摄像头录像机程序

它工作正常，只是视频的颜色比现实更蓝。问题似乎来自图像的颜色格式。

似乎 OpenCv 正在提供 BGR 图像，而 ffmpeg+libx264 正在期待 YUV420p。我读过 YUV420p 对应于 YCbCr。

opencv 没有从 BGR 到 YCbCr 的转换。它仅转换为 YCrCb。

我已经进行了一些搜索并尝试了不同的替代方法来尝试将 opencv 图像转换为适合 ffmpeg+libx264 的图像。没有工作。在这一点上，我有点迷茫，如果有任何指针可以帮助我解决这个颜色问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T21:43:06.887

没错，OpenCV 的默认像素格式是**BGR**。

ffmpeg 端的等效格式为**BGR24**，因此如果您不想，则无需将其转换为 YUV420p。

[这篇文章](https://stackoverflow.com/a/5839058/176769)展示了如何使用 python 应用程序从网络摄像头捕获帧并将帧写入*stdout*。目的是在 cmd-line 上调用此应用程序并将结果直接通过管道传输到 ffmpeg 应用程序，该应用程序将帧存储在磁盘上。确实很聪明！

**捕获.py**：

```
import cv, sys

cap = cv.CaptureFromCAM(0)
if not cap:
    sys.stdout.write("failed CaptureFromCAM")

while True :
    if not cv.GrabFrame(cap) : 
        break

    frame = cv.RetrieveFrame(cap)
    sys.stdout.write( frame.tostring() ) 
```

而要在shell上执行的命令是：

```
python capture.py | ffmpeg -f rawvideo -pix_fmt bgr24 -s 640x480 -r 30 -i - -an -f avi -r 30 foo.avi 
```

> **哪里**：
> 
> *   -r 给出来自相机的帧速率
> *   -an 表示“不编码音频”

我在我的 Mac OS X 上使用 OpenCV 2.4.2 测试了这个解决方案。

**编辑：**

如果您还没有尝试**从相机录制并使用 OpenCV 将视频写入**磁盘上的 mp4 文件，我们开始：

```
import cv, sys

cap = cv.CaptureFromCAM(0)   # 0 is for /dev/video0
if not cap:
    sys.stdout.write("!!! Failed CaptureFromCAM")
    sys.exit(1)

frame = cv.RetrieveFrame(cap)
if not frame: 
    sys.stdout.write("!!! Failed to retrieve first frame")
    sys.exit(1)

# Unfortunately, the following instruction returns 0
#fps = cv.GetCaptureProperty(cap, cv.CV_CAP_PROP_FPS)
fps = 25.0      # so we need to hardcode the FPS
print "Recording at: ", fps, " fps"  

frame_size = cv.GetSize(frame)
print "Video size: ", frame_size  

writer = cv.CreateVideoWriter("out.mp4", cv.CV_FOURCC('F', 'M', 'P', '4'), fps, frame_size, True)
if not writer:
    sys.stdout.write("!!! Error in creating video writer")
    sys.exit(1)

while True :
    if not cv.GrabFrame(cap) : 
        break
    frame = cv.RetrieveFrame(cap)
    cv.WriteFrame(writer, frame)

cv.ReleaseVideoWriter(writer)
cv.ReleaseCapture(cap) 
```

我已经在 Mac OS X 和 OpenCV 2.4.2 上使用 Python 2.7 对此进行了测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:27:40.257

您是否尝试过使用[split](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=split#cv.Split)和[merge](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=split#void%20merge%28const%20Mat%2a%20mv,%20size_t%20count,%20OutputArray%20dst%29)在 OpenCV 中切换 Cb/Cr 通道 ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T22:48:26.337

检查存在于：[http](http://en.wikipedia.org/wiki/YCbCr) ://en.wikipedia.org/wiki/YCbCr 中的转换公式？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:36:29.833

libx264 编解码器能够处理 BGR 图像。无需使用任何转换为​​ YCbCr。不需要给 ffmpeg 一个特定的 pix_ftm。我使用的是 RGB，它导致视频出现蓝色效果。

解决方案是简单地使用相机重新调整的原始图像，无需任何转换。:)

我在之前的调查中尝试过这个，它使应用程序崩溃。解决方案是复制相机返回的帧。

```
 frame = opencv.QueryFrame(camera)
    if not frame:
        return None, None

    # RGB : use this one for displaying on the screen
    im_rgb = opencv.CreateImage(self.size,  opencv.IPL_DEPTH_8U, 3)
    opencv.CvtColor(frame, im_rgb, opencv.CV_BGR2RGB)

    # BGR : Use this one for the video
    im_bgr = opencv.CreateImage(self.size,  opencv.IPL_DEPTH_8U, 3)
    opencv.Copy(frame, im_bgr)

    return im_rgb, im_bgr 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-01T14:05:21.917

我已经在这里回答了这个[问题](https://stackoverflow.com/a/55937414/10158117)。但我的[**`VidGear`**](https://github.com/abhiTronix/vidgear)Python 库**将 OpenCV 帧流水线化到 FFmpeg 的整个过程自动化，并且还稳健地处理了格式转换**。这是一个基本的python示例：

```
# import libraries
from vidgear.gears import WriteGear
import cv2

output_params = {"-vcodec":"libx264", "-crf": 0, "-preset": "fast"} #define (Codec,CRF,preset) FFmpeg tweak parameters for writer

stream = cv2.VideoCapture(0) #Open live webcam video stream on first index(i.e. 0) device

writer = WriteGear(output_filename = 'Output.mp4', compression_mode = True, logging = True, **output_params) #Define writer with output filename 'Output.mp4' 

# infinite loop
while True:

    (grabbed, frame) = stream.read()
    # read frames

    # check if frame empty
    if not is grabbed:
        #if True break the infinite loop
        break

    # {do something with frame here}
        gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)

    # write a modified frame to writer
        writer.write(gray) 

        # Show output window
    cv2.imshow("Output Frame", frame)

    key = cv2.waitKey(1) & 0xFF
    # check for 'q' key-press
    if key == ord("q"):
        #if 'q' key-pressed break out
        break

cv2.destroyAllWindows()
# close output window

stream.release()
# safely close video stream
writer.close()
# safely close writer 
```

来源：[https ://github.com/abhiTronix/vidgear/wiki/Compression-Mode:-FFmpeg#2-writegear-classcompression-mode-with-opencv-directly](https://github.com/abhiTronix/vidgear/wiki/Compression-Mode:-FFmpeg#2-writegear-classcompression-mode-with-opencv-directly)

您可以查看完整的[VidGear 文档](https://github.com/abhiTronix/vidgear/wiki)以了解更高级的应用程序和令人兴奋的功能。

希望有帮助！

# cocos2d-iphone - Xcode 4.5 设备方向改变？

> ID：12503372
> 
> 赞同：3
> 
> 时间：2012-09-19T21:45:20.060
> 
> 标签：cocos2d-iphone, kobold2d

我正在使用 kobold2d 构建 cocos2d 游戏，因为我每次构建项目时都升级到 xcode 4.5，设备方向从横向开始，然后自动旋转到纵向模式？我在 xcode 的珍贵版本中，默认方向是横向，但现在它会自行切换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:31:36.050

在 AppDelegate 中更改如下内容的行：

```
[window addSubView:viewcontroller.view];

to

[window setRootViewController:viewcontroller]; 
```

应该这样做。

# selenium - 在两个窗口上具有相同的 id

> ID：12503373
> 
> 赞同：0
> 
> 时间：2012-09-19T21:45:21.633
> 
> 标签：selenium, webdriver

我想使用 driver.FindElement 来定位一个元素，但代码在主窗口和嵌入式窗口上有两个相同的元素 ID。如何在嵌入式窗口中定位元素？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:17:22.603

ID 应该是唯一的。

如果您的情况不是 POP UP 窗口（上面提供的弹出窗口独奏 ;D），与其寻找解决方案如何解决相同的 ID 问题，为什么不遵循良好的编程习惯以**避免在同一页面中出现相同的 ID**呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:03:07.870

在您的情况下，什么是“嵌入式窗口”？如果所有窗口都在一个 DOM 树中，那么您不应期望 driver.FindElement 的正确行为，因为 ID 应该是唯一值。

如果您的意思是弹出窗口，您可以使用 driver.switchTo().window()，但我想在这种情况下您不会遇到这个问题。

无论如何，尝试使用 xpath，例如 driver.findComponent(By.xpath("//*[@id='my_unique_id'][2]"))

# objective-c - 检查 NSURL 的 UTI / 文件类型

> ID：12503376
> 
> 赞同：8
> 
> 时间：2012-09-19T21:45:38.537
> 
> 标签：objective-c, xcode, macos, video

我正在构建一个允许用户将视频拖放到其上的应用程序。给定一个已删除的 NSURL*s 列表，我如何确保每个都符合`public.movie`UTI 类型？

如果我有一个`NSOpenPanel`，我会使用`openPanel.allowedFileTypes = @[@"public.movie"];`它，而 Cocoa 会为我处理它。

提前致谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-19T22:34:36.257

这应该有效：

```
NSWorkspace *workspace = [NSWorkspace sharedWorkspace];

for (NSURL *url in urls) {
    NSString *type;
    NSError *error;
    if ([url getResourceValue:&type forKey:NSURLTypeIdentifierKey error:&error]) {
        if ([workspace type:type conformsToType:@"public.movie"]) {
            // the URL points to a movie; do stuff here
        }
    } else {
        // handle error
    }
} 
```

（您也可以使用`UTTypeConformsTo()`代替`NSWorkspace`方法。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-10T22:11:34.017

斯威夫特版本：

```
do {
    var value: AnyObject?
    try url.getResourceValue(&value, forKey:NSURLTypeIdentifierKey)
    if let type = value as? String {
        if UTTypeConformsTo(type, kUTTypeMovie) {
        ...
        }
    }
}
catch {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-08T22:18:20.683

斯威夫特 5 版本：

```
if let resourceValues = try? localUrl.resourceValues(forKeys: [URLResourceKey.typeIdentifierKey]) {
    if let typeId = resourceValues.typeIdentifier {
        if UTTypeConformsTo(type, kUTTypeMovie) {
            ...
        }
    }
} 
```

# objective-c - 基于 Windows 的机器是否可以发送和接收数据以在 iPhone 上定制应用程序？

> ID：12503378
> 
> 赞同：0
> 
> 时间：2012-09-19T21:45:51.580
> 
> 标签：objective-c, windows, excel

我正在 Xcode 中为 iPhone 制作一个应用程序，它需要能够从基于 Windows 的机器发送和接收 excel 数据。制作应用程序没有问题，但我需要从 PC 上获取什么来访问应用程序数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:10:50.770

首先，我不会使用 Excel 作为数据存储程序。您真正应该使用的是托管在具有 PHP 接口等的 Web 服务器上的数据库。如果您选择使用数据库路线，那么您可以轻松使用 Windows 机器。

虽然如果你选择坚持使用 Excel，理论上是有可能的，因为人们已经让应用程序通过应用程序远程完全控制计算机。我只是认为这种方法将很难设置，并且比任何类型的 Web 服务器设置都笨重得多。不要忘记，如果数据级别较低，您可以获得免费的 Web 服务器服务。

正如你所提到的，这台电脑将无法访问互联网。假设你不愿意解决这个问题，我猜你会留下蓝牙或本地 wifi 选项。必须插入它真的会破坏应用程序的目的，而且我认为 iPhone 甚至可以在没有疯狂黑客的情况下做到这一点。

另一种想法是构建一个与一些免费 Web 服务器服务链接的应用程序，然后构建 VBA 代码以将其下载到您的 Excel 工作表中。当您将 iPhone 插入 PC 时，使用热点访问 Internet。

# spring - 具有现有应用程序的 JBoss 门户

> ID：12503383
> 
> 赞同：0
> 
> 时间：2012-09-19T21:46:23.653
> 
> 标签：spring, jboss, portal, jboss-portal

我以前从未使用过门户网站。所以我现在很困惑。我们有一个使用 Spring 和 tomcat 5.5 的应用程序。所以现在他们告诉我在此之上使用 JBoss 门户。我的问题是，是否可以将已经使用 jsp、spring 等完成的应用程序链接到 JBoss 门户。当我想安装 JBoss 门户作为选项时，它有 JBoss7 和 tomcat 6 选项。这不会干扰我自己的必须在 tomcat 5.5 上运行的应用程序。我对吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:17:31.223

您可以获得的最接近的是[JSR 329](http://jcp.org/en/jsr/detail?id=329)，它允许将 JSF1.2 应用程序与基于[JSR 286](http://jcp.org/en/jsr/detail?id=286)的门户环境连接起来。JSR 329 的 JBoss 实现称为[JBoss Portlet Bridge](http://www.jboss.org/portletbridge)，使您可以灵活地在门户环境中运行 SEAM，而无需了解门户技术的细节。除此之外，您还可以探索 Spring 的[Portlet MVC 框架](http://static.springsource.org/spring/docs/2.0.x/reference/portlet.html)，但该框架的限制是您的 Portlet 实现将在[JSR 168中](http://jcp.org/en/jsr/detail?id=168)样式，它是 portlet 规范的早期/基本版本。您的另一个选择是开发一个单独的门户应用程序，其中的 portlet 直接调用您的业务层服务来完成工作。我不知道您可以使用任何其他框架/技术在门户环境中运行 Spring 应用程序。因此，继续与您的团队进行详细的需求分析会议，并确定他们真正希望门户如何运作。

# c++ - OgreBullet 不正确的 HeightmapCollisionShape 形状比例？

> ID：12503388
> 
> 赞同：0
> 
> 时间：2012-09-19T21:46:56.207
> 
> 标签：c++, ogre, bulletphysics

我正在尝试通过（主要）使用演示代码在 OgreBullet 中加载 HeightmapTerrainShape，但我的地形网格从 HeightmapTerrainShape 偏移。我不知道为什么会这样。这是我的代码：

```
void TerrainLoader::setTerrainPhysics(Ogre::Image *imgPtr)

{
    unsigned page_size = terrainGroup->getTerrainSize();
    Ogre::Vector3 terrainScale(4096 / (page_size-1), 600, 4096 / (page_size-1));
    float *heights = new float[page_size*page_size];
    for(unsigned y = 0; y < page_size; ++y)
    {
        for(unsigned x = 0; x < page_size; ++x)
        {
            Ogre::ColourValue color = imgPtr->getColourAt(x, y, 0);
            heights[x + y * page_size] = color.r;
        }
    }

OgreBulletCollisions::HeightmapCollisionShape *terrainShape = new OgreBulletCollisions::HeightmapCollisionShape(
    page_size,
    page_size,
    terrainScale,
    heights,
    true
);
OgreBulletDynamics::RigidBody *terrainBody = new OgreBulletDynamics::RigidBody(
    "Terrain",
    OgreInit::level->physicsManager->getWorld()
);
imgPtr = NULL;

Ogre::Vector3 terrainShiftPos(terrainScale.x/(page_size-1), 0, terrainScale.z/(page_size-1));
terrainShiftPos.y = terrainScale.y / 2 * terrainScale.y;

Ogre::SceneNode *pTerrainNode = OgreInit::sceneManager->getRootSceneNode()->createChildSceneNode();
terrainBody->setStaticShape(pTerrainNode, terrainShape, 0.0f, 0.8f, terrainShiftPos);
//terrainBody->setPosition(terrainBody->getWorldPosition()-Ogre::Vector3(0.005, 0, 0.005));
OgreInit::level->physicsManager->addBody(terrainBody);
OgreInit::level->physicsManager->addShape(terrainShape);
} 
```

这是打开调试抽屉后的样子： ![在此处输入图像描述](../Images/372b1760a637db5d321ee517e964ea41.png) ![在此处输入图像描述](../Images/7b817a92c621ed8b1a152145e72f5afc.png) ![在此处输入图像描述](../Images/a8922e0a4c1cd0c646ae62533c51b718.png)

我的世界大小是4096*600*4096，每个chunk是64*600*64

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:25:40.867

```
heights[x + y * page_size] = color.r; 
```

这条线给你负值。如果将负地形高度值与食人魔子弹地形相结合，则会得到错误的边界框对话。

您需要使用区间 0-1 作为高度值。

与 perlin 噪声滤波器有同样的问题，它给你从 -1 到 1 的值。

# jquery - JQuery 可滚动文本

> ID：12503389
> 
> 赞同：0
> 
> 时间：2012-09-19T21:47:04.363
> 
> 标签：jquery, html, jquery-plugins

我正在寻找一个 jquery 插件，它将在可滚动框中绑定文本。大多数滚动插件都在转换浏览器滚动条，但我想保持原样并且可用。这只是为了在小空间中包含大量文本。

就像这个[页面](http://www.class.pm/files/jquery/uscrollbar/demo/)，在最底部，它们在一个可滚动的小框中包含大量文本。我试图实现这个插件，但我对 JQuery 有点陌生，所以微不足道的指令不足以让我站起来。如果我可以使用这个插件来做我想做的事，这段代码对吗？：

```
<script>
$(document).ready(function(e) {
    $(".Information").uscrollbar();
});
</script>

<div id="Hotel" class="Information">
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:49:57.493

你真的不需要 jQuery。只是一些CSS。

```
.Information{
height:100px;
overflow:auto;
} 
```

如果您确实需要此插件，请确保您正确引用了 jQuery 以及指向插件 js 文件的链接。

如果您在浏览器中运行该页面，您是否会在控制台窗口中看到任何内容。任何错误。

编辑：添加了一个[JSFiddle](http://jsfiddle.net/35zXU/2/)

编辑：还要确保您引用了所需的资产：

```
jquery.uscrollbar.js
jquery.uscrollbar.css 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T21:51:43.670

如果您需要动态地对元素执行此操作，只需将内容包装在`<div>`一个特殊的类中：

**CSS**：

```
.scroll {
    overflow: auto;
    max-height: 100px;
} 
```

**JS**：

```
$(document).ready(function() {
    $('.elements_that_should_scroll').wrap($('<div>', {'class': 'scroll'}));
}); 
```

**演示：http: [//jsfiddle.net/nW7uH/](http://jsfiddle.net/nW7uH/)**

如果没有，只需给这些元素类`scroll`，它应该可以在没有 JS 的情况下正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T21:05:31.667

确保为您的容器 div 指定一个固定的宽度和高度，在您的情况下，是具有类 Information 的 div。将此添加到您的 CSS 文件中。

```
.Information {
    height: 300px;
    width: 300px;
} 
```

# c# - 如何从 Tif 文件中获取颜色图

> ID：12503391
> 
> 赞同：2
> 
> 时间：2012-09-19T21:47:24.837
> 
> 标签：c#

我的 tif 文件索引为 8 bpp，并与颜色图一起保存。

有没有办法从 C# 中的文件中恢复该颜色图？

默认情况下，picturebox 会像这样自动显示颜色图，因为最左边和最右边分别代表 0 和 255。

![在此处输入图像描述](../Images/2e40d531da21ee635b11a3d25ad34e84.png)

我在互联网上搜索它是徒劳的。

如果没有办法做到这一点，那么有人如何确定索引 8 bpp 图像的像素中的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:42:22.947

假设您要编辑颜色图，您可以简单地修改图像的调色板：

```
System.Drawing.Image image = Image.FromFile(@"Q:\my_image.tif");
System.Drawing.Imaging.ColorPalette palette = image.Palette;
//...palette.Entries is simply an array of System.Drawing.Color, modify to suit

//crucial step - palette was retrieved as a copy, so
//it is necessary to store the copy back to the image
image.Palette = palette; 
```

如果您将图像另存为 tiff，则修改后的调色板随之而来。

# django - jQuery 在 Django 中导致 TemplateSyntaxError

> ID：12503392
> 
> 赞同：1
> 
> 时间：2012-09-19T21:47:26.367
> 
> 标签：django, jquery-ui, jquery-plugins, django-templates

我收到以下错误：

```
Exception Type: TemplateSyntaxError
Exception Value: 'for' statements should use the format 'for x in y': for (var i=0, file; file=o.files[i]; i++) { 
```

但我不知道如何在 Django 中逃脱它，我已经添加了`{% autoescape off %}`标签，但仍然没有运气。

这是导致错误的代码：

```
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td class="preview"><span class="fade"></span></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% if (file.error) { %}
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
        <td>
            <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>
        </td>
        <td class="start">{% if (!o.options.autoUpload) { %}
            <button class="btn btn-primary">
                <i class="icon-upload icon-white"></i>
                <span>{%=locale.fileupload.start%}</span>
            </button>
            {% } %}</td>
        {% } else { %}
        <td colspan="2"></td>
        {% } %}
        <td class="cancel">{% if (!i) { %}
            <button class="btn btn-warning">
                <i class="icon-ban-circle icon-white"></i>
                <span>{%=locale.fileupload.cancel%}</span>
            </button>
            {% } %}</td>
    </tr>
    {% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
    {% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
        <td></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else { %}
        <td class="preview">{% if (file.thumbnail_url) { %}
            <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
            {% } %}</td>
        <td class="name">
            <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
        </td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td colspan="2"></td>
        {% } %}
        <td class="delete">
            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
                <i class="icon-trash icon-white"></i>
                <span>{%=locale.fileupload.destroy%}</span>
            </button>
            <input type="checkbox" name="delete" value="1">
        </td>
    </tr>
    {% } %} 
```

我正在使用 jQuery File Upload (jquery ui version) 插件。谁能向我解释我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:51:14.113

哟它是pythonic，所以它像python中的for循环一样迭代：http: [//docs.python.org/tutorial/controlflow.html#for-statements](http://docs.python.org/tutorial/controlflow.html#for-statements) 所以for语句看起来更像`{% for file in o.files %}`而不是你的C语法for循环。

另请参阅 for 循环的官方 django 文档：[https ://docs.djangoproject.com/en/dev/ref/templates/builtins/#for](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#for)

更仔细地查看其余代码，您的模板代码中似乎有很多奇怪的语法（例如`{%=file.name%}`should be `{% file.name %}`、`{% if (!o.options.autoUpload) { %}`should be`{% if not o.options.autoUpload %}`等）。您可以查看 djangobook 关于模板的章节： [http://djangobook。 com/en/2.0/chapter04/](http://djangobook.com/en/2.0/chapter04/)

[编辑：源代码使用来自JavaScript Templates](http://blueimp.github.com/JavaScript-Templates/)的模板代码语法，而不是 Django，这似乎是个问题。

# javascript - Javascript 类和自定义事件处理程序的正确语法

> ID：12503393
> 
> 赞同：0
> 
> 时间：2012-09-19T21:47:27.250
> 
> 标签：javascript, javascript-events

我知道对于 javascript 的编写方式有很多不同的看法，但我想知道我的编写方式是否合适。我不想进入工作岗位编写没人理解的代码。

这段代码的基本前提是测试对象的自定义事件处理程序，想知道是否有任何明显的“你不应该这样做”类型的东西

```
 function EventClass() {
        var self = this;
        var events = {};
        var i = 0;
        self.fire = function(evt, args) {
            for (x in events[evt])
                events[evt][x].call(this, args);
        }

        self.on = function(evt, fn) {
            if (events[evt] == null) {
                events[evt] = []
            }
            events[evt].push(fn);
        }
    };

    function Human(x, y) {
        var self = this;
        self.__proto__ = new EventClass();
        var xCoord = 0;
        var yCoord = 0;

        self.events = {
            "MOVEMENT" : "movement"
        };

        self.init = function(x,y) {
            xCoord = x;
            yCoord = y;
        }

        self.draw = function(context) {
            context.beginPath();
            context.arc(xCoord,yCoord,10,0,Math.PI*2,true);
            context.closePath();
            context.fill();
        }

        self.moveLeft = function() {
            xCoord -= 5;
            self.fire(self.events.MOVEMENT, xCoord);
        }
        self.init(x,y);
    };

    function Player(x, y) {
        var self = this;
        self.__proto__ = new Human();
        self.init(x,y);
    };

    function Canvas(c) {
        var self = this;
        var canvas;
        var context;
        var objects = [];

        self.init = function(c) {
            canvas = c;
            context = canvas.getContext("2d");
        };

        this.redraw = function() {
            context.clearRect(0,0,300,300);
            for (x in objects) {
                objects[x].draw(context);
            }
        }

        this.addObject = function(obj) {
            objects.push(obj);
            obj.on(obj.events.MOVEMENT, function(coord) {
                console.log(coord);
                self.redraw();
            });
        };
        self.init(c);
    }

    var canvas = new Canvas(document.getElementById("canvas"));
    var human0 = new Human(75,75);
    canvas.addObject(human0);
    var human1 = new Human(100,100);
    canvas.addObject(human1);
    var player = new Player(200,200);
    canvas.addObject(player);

    canvas.redraw(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:40:31.847

几件小事——有点像。

第一个很小。

`this`与和`self`事物保持一致。我在这里考虑的示例在您的`Canvas`构造函数中。

事情的真相是，您的特定实现内部没有任何东西需要`self`. 除非您打算将您的方法提供给其他对象或回调，`self`否则不需要，直到您开始编写存在于方法内部的函数。即便如此，所有`self`将有助于访问该特定实例的公共属性/方法，并且不会帮助您访问`events`或`i`其他任何内容。

并不是说这样做不好——它只是在你做对象组合的事情时更有用，而不是对象构造的事情（然后经常变得非常必要）。

第二件事是一个更大的问题。 `__proto__`如果您谈论的是 FireFox/Chrome，可能会得到相当好的支持，但是如果您需要支持广泛的浏览器，那么这样做会让您的生活变得更加困难，而不是增加`ConstructorFN.prototype`目的。

# android - 如何每 x 分钟运行一次 AsyncTask

> ID：12503397
> 
> 赞同：0
> 
> 时间：2012-09-19T21:47:38.697
> 
> 标签：android, android-asynctask

我有一个从网络服务检索数据的异步任务。我想每 5 分钟运行一次此任务以从服务器获取更新的数据，但直到现在我不知道该怎么做。

我试过这段代码，但我的 AsyncTask 没有停止

```
 //...
    Timer timer = new Timer();
    timer.schedule(new TimerTask() {
    public void run() {
    new AddStringTask().execute();
    }
  }, 0, 5000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T01:35:09.290

正如其他人所建议的那样，您应该使用 Push ( [GCM](http://developer.android.com/guide/google/gcm/index.html) ) 而不是 Poll。取自[这个](http://developer.android.com/guide/google/gcm/index.html)说：

> 轮询可能很容易实现，但你永远不会真正实时。如果轮询间隔为 30 分钟，您可能会收到延迟 29 分 59 秒的消息。此外，比每 15-30 分钟更频繁的轮询会很快耗尽您的电池： [https ://labs.ericsson.com/apis/mobile-java-push/blog/save-device-battery-mobile-java-push](https://labs.ericsson.com/apis/mobile-java-push/blog/save-device-battery-mobile-java-push)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:39:26.493

正如 Michal K 所说，您可以使用`AlarmManager`和`Service`/或`BroadcastReceiver`定期唤醒您的应用程序。

但是，**为了保护用户的电池，我强烈建议不要轮询连接。**

相反，您可以使用**[Google Cloud Messaging for Android](http://developer.android.com/guide/google/gcm/index.html)**或**GCM** *（以前称为 C2DM）*

这是网站：http: [//developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

**编辑**

这里的主要好处是拥有谷歌账户的安卓手机已经定期轮询谷歌的服务器。他们在运营商（如 Verizon/AT&T）的合作下做到这一点。因此，收音机可以进入低功耗模式并接收推送通知。通过使用 Google 的服务，您可以让您的应用程序通过推送通知接收数据，而不会导致任何额外的电池消耗。

=====================

*（另外，这是我其他帖子中关于此的一些信息）。*

今年有一个非常有趣的 Google IO 演讲，讲述了蜂窝无线电如何在大部分时间处于空闲/低功耗状态，并且需要几秒钟来“预热”。他们还讨论了定期轮询互联网如何真正耗尽电池的危险。

[http://www.youtube.com/watch?v=PwC1OlJo5VM](http://www.youtube.com/watch?v=PwC1OlJo5VM)

电池谈话大约在 17:12 开始

[http://www.youtube.com/watch?v=PwC1OlJo5VM&feature=player_detailpage#t=1032s](http://www.youtube.com/watch?v=PwC1OlJo5VM&feature=player_detailpage#t=1032s)

演示文稿中的一张幻灯片：

![在此处输入图像描述](../Images/8333f8bdb8e86e7d958c373fdc407e12.png)

# .net - 无法将 ConfigurationProperty 转换为 int

> ID：12503398
> 
> 赞同：0
> 
> 时间：2012-09-19T21:47:48.203
> 
> 标签：.net

[http://msdn.microsoft.com/en-us/library/system.configuration.configurationpropertyattribute.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationpropertyattribute.aspx)

[不可变类型作为配置属性](https://stackoverflow.com/questions/1443988/immutable-types-as-configuration-properties)

在 QueueID 下面的 QueueConfiguration 类中返回一个 int。当我运行代码时，访问 getter 时出现此错误：无法解析属性“queueID”的值。错误是：找不到支持“Int32”类型的属性“queueID”的字符串转换的转换器。

如果我更改 QueueID 以返回一个字符串，它工作正常。请注意，在上面引用的 microsoft 链接中，不需要类型转换器即可将端口属性作为 int 返回。我想我错过了一些明显的东西......

```
public class QueueConfiguration : ConfigurationSection
{
    [ConfigurationProperty("queueID", DefaultValue = (int)0, IsKey = true, IsRequired = true)]        
    public int QueueID
    {
        get 
        {
            return (int)this["queueID"];
        }
        set { this["queueID"] = value; }
    }

    [ConfigurationProperty("queueName", DefaultValue = "", IsKey = false, IsRequired = true)]
    public string QueueName
    {
        get { return (string)this["queueName"]; }
        set { this["queueName"] = value; }
    }
}

public class QueueConfigurationCollection : ConfigurationElementCollection
{
    internal const string PropertyName = "QueueConfiguration";

    public override ConfigurationElementCollectionType CollectionType
    {
        get
        {
            return ConfigurationElementCollectionType.BasicMapAlternate;
        }
    }

    protected override string ElementName
    {
        get
        {
            return PropertyName;
        }
    }

    protected override bool IsElementName(string elementName)
    {
        return elementName.Equals(PropertyName, StringComparison.InvariantCultureIgnoreCase);
    }

    public override bool IsReadOnly()
    {
        return false;
    }

    protected override ConfigurationElement CreateNewElement()
    {
        return new QueueConfiguration();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((QueueConfiguration)(element)).QueueID;
    }

    public QueueConfiguration this[int idx]
    {
        get
        {
            return (QueueConfiguration)BaseGet(idx);
        }
    }
}

public class QueueConfigurationSection : ConfigurationSection
{
    [ConfigurationProperty("Queues")]
    public QueueConfigurationCollection Queues
    {
        get { return ((QueueConfigurationCollection)(this["Queues"])); }
        set { this["Queues"] = value; }
    }
} 
```

这是我的 App.config （由于某种原因，该站点拒绝显示应用​​程序配置的 configSection 部分，所以我会尽力打破它：

```
<configSections>
 <section name="QueueConfigurations" type="STPMonitor.Common.QueueConfigurationSection, STPMonitor"/> 
</configSections>

<QueueConfigurations>
<Queues>
  <QueueConfiguration queueID="1" queueName="One"></QueueConfiguration>
  <QueueConfiguration queueID="2" queueName="Two"></QueueConfiguration>
</Queues>
</QueueConfigurations> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:16:11.190

好吧，我只是复制粘贴并尝试了您的代码，它没有任何错误。我的阅读代码是：

```
var section = ConfigurationManager.GetSection("QueueConfigurations") as QueueConfigurationSection;
var queueId = section.Queues[0].QueueID;
Console.Out.WriteLine("queueId = {0}", queueId); 
```

它打印`queueId = 1`

这是要点：[https ://gist.github.com/b8499dcfa7456624f073](https://gist.github.com/b8499dcfa7456624f073)

# asp.net - Gridview 分页 显示所有记录

> ID：12503400
> 
> 赞同：0
> 
> 时间：2012-09-19T21:47:50.990
> 
> 标签：asp.net, gridview

我有一个启用了分页的gridview。我在 gridview 的寻呼机上也有一个下拉菜单，用户可以在其中选择他们想要检索的每页记录的数量。更改下拉列表后，将触发一个事件（如下所示）以使用每个页面请求的更新结果重新运行查询。这很好用。但是，我确实希望在下拉列表中也有一个值“All”，而我用来暗示这一点的方法是禁用分页。

除了一个问题外，这一切都非常有效。当用户在下拉列表中选择“全部”时，我希望在更新 gridview 后仍显示寻呼机。它没有显示，因为我关闭了寻呼，但是有没有办法再次显示寻呼机？请参阅下面的事件代码。（如您所见，我在最后重新启用了寻呼机，但这没有效果）

谢谢达摩

**下拉更改事件背后的代码**

```
void GridViewMainddl_SelectedIndexChanged(object sender, EventArgs e)
        {
            //changes page size
            if ((((DropDownList)sender).SelectedValue).ToString() == "All")
            {

                GridViewMain.AllowPaging = false;

            }
            else
            {
                GridViewMain.PageSize = int.Parse(((DropDownList)sender).SelectedValue);

            }

            //binds data source
            Result fAuditOverallStatusLatest = new Result(sConn);
            GridViewMain.DataSource = Result.getAuditOverallStatusLatest();            
            GridViewMain.PageIndex = 0;
            GridViewMain.DataBind();
            GridViewMain.AllowPaging = true;
            GridViewMain.BottomPagerRow.Visible = true;
            GridViewMain.TopPagerRow.Visible = true;
        } 
```

**后面的 DDL 代码**

```
protected void GridViewMain_RowCreated(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.Pager)
            {
                DropDownList GridViewMainddl = new DropDownList();
                //adds variants of pager size
                GridViewMainddl.Items.Add("5");
                GridViewMainddl.Items.Add("10");
                GridViewMainddl.Items.Add("20");
                GridViewMainddl.Items.Add("50");
                GridViewMainddl.Items.Add("100");
                GridViewMainddl.Items.Add("200");
                GridViewMainddl.Items.Add("500");
                GridViewMainddl.Items.Add("All");
                GridViewMainddl.AutoPostBack = true;
                //selects item due to the GridView current page size
                ListItem li = GridViewMainddl.Items.FindByText(GridViewMain.PageSize.ToString());
                if (li != null)
                    GridViewMainddl.SelectedIndex = GridViewMainddl.Items.IndexOf(li);
                GridViewMainddl.SelectedIndexChanged += new EventHandler(GridViewMainddl_SelectedIndexChanged);
                //adds dropdownlist in the additional cell to the pager table
                Table pagerTable = e.Row.Cells[0].Controls[0] as Table;
                TableCell cell = new TableCell();
                cell.Style["padding-left"] = "15px";
                cell.Controls.Add(new LiteralControl("Page Size:"));
                cell.Controls.Add(GridViewMainddl);
                pagerTable.Rows[0].Cells.Add(cell);
                //add current Page of total page count
                TableCell cellPageNumber = new TableCell();
                cellPageNumber.Style["padding-left"] = "15px";
                cellPageNumber.Controls.Add(new LiteralControl("Page " + (GridViewMain.PageIndex + 1) + " of " + GridViewMain.PageCount));
                pagerTable.Rows[0].Cells.Add(cellPageNumber);

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:54:48.483

把它放在你的`Page_Init`：

`GridViewMain.PreRender += new EventHandler(GridViewMain_PreRender);`

然后在你`Page`班上的其他地方：

```
void GridViewMain_PreRender(object sender, EventArgs e)
{
    var pagerRow = (sender as GridView).BottomPagerRow;
    if (pagerRow != null)
    {
        pagerRow.Visible = true;
    }
} 
```

然后对于您的下拉事件：

```
void GridViewMainddl_SelectedIndexChanged(object sender, EventArgs e)
{
    MyServices fServices = new FAServices(sConn);
    Result fAuditOverallStatusLatest = new Result(sConn);
    var data = Result.getAuditOverallStatusLatest();

    //changes page size
    if ((((DropDownList)sender).SelectedValue).ToString() == "All")
    {
        GridViewMain.PageSize = data.Count();
    }
    else
    {
        GridViewMain.PageSize = int.Parse(((DropDownList)sender).SelectedValue);
    }

    //binds data source
    GridViewMain.DataSource = data;            
    GridViewMain.PageIndex = 0;
    GridViewMain.DataBind();
    GridViewMain.AllowPaging = true;
} 
```

在该 PreRender 事件中，您必须为顶部寻呼机复制该代码。

编辑：要被`All`选中，请在 GridViewMain_RowCreated 中进行此更改：

```
if (li != null)
{
    GridViewMainddl.SelectedIndex = GridViewMainddl.Items.IndexOf(li);
}
else
{
    GridViewMainddl.SelectedIndex = GridViewMainddl.Items.Count - 1;
} 
```

# unit-testing - 单元测试 MVC 4 RedirectToAction

> ID：12503403
> 
> 赞同：23
> 
> 时间：2012-09-19T21:48:02.720
> 
> 标签：unit-testing, asp.net-mvc-4, asp.net-4.5

我正在尝试在 MVC 4 .Net 4.5 中对我的控制器的重定向进行单元测试。这是一个例子：

```
 [TestMethod]
    public void Register_PassValidModel_RedirectToHomeIndexShouldBeTrue()
    {
        //Arrange
        var registerModel = new RegisterModel
        {
            Email = "validEmailAddress@domain.com",
            Password = "password"
        };

        //Assign
        var result = _controller.Register(registerModel) as RedirectToRouteResult;

        //Assert
        result.RouteValues["Action"].ShouldBeEqual("Index");
        result.RouteValues["Controller"].ShouldBeEqual("Home");
    } 
```

这是控制器：

```
 [HttpPost]
    public ActionResult Register(RegisterModel model)
    {
         if (ModelState.IsValid)
        {
            var userToRegister = new User { Email = model.Email, Password = model.Password };
            var service = new UserService(_userRepository);

            User user = service.RegisterUser(userToRegister);

            if (user.UserErrorMessages.Count != 0)
            {
                user.UserErrorMessages.ForEach(x => ModelState.AddModelError("", x));
                return View(model);
            }

            SetCookie(model.Email);

            return RedirectToAction("Index", "Home");
        }
        return View(model);
    } 
```

`result`单元测试中变量的问题是`null`. 我从一个从事 MVC 2 项目的人那里找到了这段代码，它似乎对他有用。MVC 4 有什么改变吗？

提前致谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-10-01T11:51:21.643

试试这个希望它对你有用

```
 var result= (RedirectToRouteResult)controller.Register(registrModel);

           result.RouteValues["action"].Equals("Index");
           result.RouteValues["controller"].Equals("Home");

           Assert.AreEqual("Index", action.RouteValues["action"]);
           Assert.AreEqual("Home", action.RouteValues["controller"]); 
```

# vim - gvim：更改默认工作目录

> ID：12503405
> 
> 赞同：22
> 
> 时间：2012-09-19T21:48:29.730
> 
> 标签：vim

当我使用它打开 gvim 时，`Alt+F2`它会将我的主文件夹作为其默认工作目录。

如何在运行 gvim 之后或期间更改工作文件夹？打开gvim时我可以将该文件夹作为参数传递吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-19T21:58:15.283

您可以使用快捷方式。

不过，最简单的方法是

```
:edit $MYVIMRC 
```

追加一行

```
cd /home/user/my/work/dir 
```

保存（可选执行`:w|source %`以立即重新加载）

* * *

## vim里面

利用

```
:pwd
:cd some/other/dir 
```

查看/更改当前工作目录。

使用例如

```
:cd %:h 
```

切换到包含在活动窗口中加载的文件的目录。如果您需要/想要经常这样做，请考虑设置**[“autochdir”](http://vimdoc.sourceforge.net/htmldoc/options.html#%27autochdir%27)**

```
:se autochdir 
```

从文档：

> ```
> When on, Vim will change the current working directory
> whenever you open a file, switch buffers, delete a
> buffer or open/close a window.  It will change to the
> directory containing the file which was opened or
> selected.  This option is provided for backward
> compatibility with the Vim released with Sun ONE
> Studio 4 Enterprise Edition. 
> ```
> 
> **注意：**当此选项在某些插件上时可能不起作用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-19T21:59:58.623

~~您可以将一个文件夹传递给`gvim`（当您有 NERDTree 时，它​​将是一个文件树）~~您可以`cd`在开始之前在您想要的目录中开始或使用`:cd <path>`命令来更改当前工作目录，可以`-c`在运行 Vim 时将其传递给 flag：

```
$ [g]vim -c 'cd <path>' 
```

您还可以使用`:pwd`命令检查当前目录。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-20T00:40:07.550

您可以使用命令更改工作目录`:cd`。您也可以在命令行选项中传递它，如下所示：

```
vim -c "cd wherever" 
```

如果您希望工作目录始终是您当前正在编辑的文件，您可以使用该`set autochdir`选项。把它放在你的 ~/.vimrc 中或查看`:help autochdir`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-10T12:33:08.050

我知道我迟到了，但我开始使用[CDargs](http://www.skamphausen.de/cgi-bin/ska/CDargs)这是一个 bash 工具来将某些目录标记为书签，然后使用`cdb`并按 Tab 列出所有书签目录。
有一个与此工具的设置文件交互的 vim 插件：[vim-cdargs](https://github.com/gaffneyc/vim-cdargs)。
这个组合非常适合我在项目之间切换。
或者打开 gvim 后快速转到某个书签文件夹，然后使用 Ctrl-p 插件快速找到我要编辑的文件。

额外提示：我什至不想输入 :Cdb 所以我缩写 c 通过将其添加到我的 vimrc 来扩展为 :Cdb:
`cnoreabbrev c Cdb`
之后键入`:c`后跟一个空格，将扩展为`:Cdb`.

编辑：我现在使用[vim-startify](https://github.com/mhinz/vim-startify)，它为 vim 提供一个起始页，显示最近使用的文件。通过该选项`let g:startify_change_to_vcs_root = 1`，它会将工作目录更改为您打开的文件的最外层 vcs 根文件夹。这几乎总是我想要的。
此外，我创建了自己的“插件”，其中包含一些键映射，这些映射将切换到当前缓冲区路径中最近或最远的目录，其中包含 .git 目录或文件。为了在当前 git 子模块或整个超级模块中搜索文件之间轻松切换。

此外，我使用[fzf-vim](https://github.com/junegunn/fzf.vim)而不是 Ctrl-p 切换到 fzf，它的工作速度明显更快，并且可配置性更高。

* * *

# shell - KSH Shell 双变量名称？

> ID：12503406
> 
> 赞同：2
> 
> 时间：2012-09-19T21:48:30.840
> 
> 标签：shell, variables, set, ksh, typeset

我正在尝试基于 $i 创建一个变量

```
i=1
line="one two three four five six"

while [[ $i -lt 3 ]]; do 
set string$i=`echo $line | cut -d" " -f1-3`
echo $string$i
do_stuff_here
done 
```

当我这样做时，我得到以下输出

```
1 
```

预期的输出是

```
one two three 
```

事实上，当我回显 $String1 时……我得到了预期的输出……所以它的存储正确。我知道它是我调用 $string$1 的方式......但我尝试了各种引号/括号，但它不起作用。有人可以告诉我如何调用我的变量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T22:17:08.583

除非您在 do_stuff_there 中增加 i ，否则您的 while 循环永远不会停止，无论如何，这应该更接近您的预期：

```
i=1
line="one two three four five six"

while [[ $i -lt 3 ]]; do
  eval string$i=\"`echo $line | cut -d" " -f1-3`\"
  eval echo \$string$i
  do_stuff_here
done 
```

# python - Python 面向对象的实现

> ID：12503408
> 
> 赞同：0
> 
> 时间：2012-09-19T21:48:42.700
> 
> 标签：python

我在下面尝试这段代码，但想知道为什么它不起作用..

你能告诉我是什么问题吗？

代码.py

```
class Example():

    def A1(self):
        return self.B1() + self.B2()

    def B1(self):
        return 4 * self.C1() 

    def B2(self):
        return 5

    def C1(self):
        return 2

def main():
    spreadsheet = Example()
    print spreadsheet.A1()

    spreadsheet.C1 = 3
    print spreadsheet.A1() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T21:52:03.010

C1 一开始是一个方法——你调用 .A1()，它调用 .B1()，它调用 .C1()，它返回 2。到目前为止，一切都很好。

然后，您将 .C1 设为值 (3) - 您调用 .A1()，它调用 .B1()，它试图调用 .C1()，因为*值 3 不可调用*而导致崩溃。

也许你想要类似的东西

```
class Spreadsheet(object):
    def __getattribute__(self, cell):
        val = object.__getattribute__(self, cell)
        return val(self) if callable(val) else val

def main():
    s = Spreadsheet()

    s.a1 = lambda self: self.b1 + self.b2
    s.b1 = lambda self: 4 * self.c1
    s.b2 = 5

    s.c1 = 2
    print s.a1  # => 13

    s.c1 = 3
    print s.a1  # => 17 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T21:55:43.463

在您的类中，该变量`C1`只是一个包含实例方法的变量。将其设置为等于会`3`覆盖该功能。

例如：

```
def foo():
  print 4

foo = 12  # foo is now the number 12, not a function 
```

你做了同样的事情：

```
spreadsheet.C1 = 3 
```

`C1` *是*一个函数，但现在它是一个数字。你不能拨打一个号码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T22:04:55.987

你的意思是，如果你执行 main 你在打印电子表格时会得到一个 TypeError.A1()

这是因为您覆盖了实例变量 C1。它被分配给一个函数，但随后您将其重新分配给整数 3。当它尝试处理实例方法 A1 时，它最终会尝试调​​用 self.C1() 并找到一个整数，该整数不能被调用且不应该t 后面有括号，所以它会正确地引发错误。

根据您想要发生的情况，您有多种选择。

*   接受这是正常行为，不要覆盖实例过程。
*   为 C1 定义一个设置器，该设置器要么在该点返回错误，要么静默不做任何事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T21:52:10.007

名称“C1”指的是一种方法（可调用对象）。但是随后您将“C1”属性分配给一个整数（不可调用），并破坏该方法。然后，当您使用它调用它时`self.C1()`，它将不再起作用。

# javascript - 使用 jQuery 更改文本字段的值

> ID：12503412
> 
> 赞同：-1
> 
> 时间：2012-09-19T21:49:14.000
> 
> 标签：javascript, jquery, forms, textfield

我有一个表单输入文本字段，我想在用户单击按钮时更改文本字段内的文本。我可以使用 jQuery 获取特定的文本字段，但不能使用 .val() 更改文本。有没有其他方法可以做到这一点，或者我做错了什么。

这是文本字段：

```
<input type="text" name="textBox" id="Stage 1text" size="20" value="Enter Current Comp." align="center"> 
```

然后我用它来识别和更改文本字段。在这种情况下，stage =“Stage 1”，而 dance 是我想放在文本字段中的字符串。

```
str = "#" + stage + 'text';
alert(str + '::' + dance); // confirm that strings are correct
jQuery(str).val(dance); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:52:25.990

`id`属性不应包含空格。

您可以像这样更改代码：

```
<input type="text" name="textBox" id="Stage_1text" size="20" value="Enter Current Comp." align="center">

str = "#" + stage.replace(' ','_') + 'text';
alert(str + '::' + dance); // confirm that strings are correct
jQuery(str).val(dance); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T21:53:16.077

ID 不应包含空格。第 1 阶段文本是无效 ID

添加下划线而不是空格

```
<input type="text" name="textBox" id="Stage_1text" size="20" value="Enter Current Comp." align="center"> 
```

并在下面尝试，

```
//           v--- assuming this will be Stage_1
str = "#" + stage + 'text';
alert(str + '::' + dance); // confirm that strings are correct
jQuery(str).val(dance); 
```

如果从后端返回阶段，则只需将空格替换为 _

```
 str = "#" + stage.replace(/ /g,"_") + 'text'; 
```

# web-applications - 可用于开发跨平台 Web 应用程序界面的工具/技术有哪些？

> ID：12503417
> 
> 赞同：2
> 
> 时间：2012-09-19T21:49:41.590
> 
> 标签：web-applications, mobile-website

我想开发一个可以从 PC 和移动设备访问的基于位置的社交网络。对于移动设备，我想提供一个看起来像原生的应用程序来访问网络。对于 WP7、iOS 和 Android。但我不想编写真正的原生应用程序，这样我就不必为每个 Platformm 重新编写应用程序，其次因为应用程序都是基于 Web 的。所以我最好使用网络技术。问题是，对于这些客户端应用程序，可以使用哪些框架或库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:10:31.053

在你的情况下，我会选择 PhoneGap。一次编写，无处不在。它还可以让您轻松使用其他库和框架，如 Secha。

其他选项是 Titanium AppAccelerator、MoSync。

# c# - Microsoft Speech - 识别和提取可变长度的数字

> ID：12503418
> 
> 赞同：2
> 
> 时间：2012-09-19T21:49:45.640
> 
> 标签：c#, speech-recognition, sapi

我试图在我的语音识别中使用某种语法。

我的语法定义如下：

```
<rule id="showFlight">
<example>Show me Alaska Airlines flight number 2117</example>
<example>Where is US Airways flight 45</example>
<item>
  <one-of>
    <item>show me</item>
    <item>where is</item>
  </one-of>
</item>
<item>
  <ruleref uri="#airline" />
  <tag>out.Carrier = rules.airline;</tag>
</item>
flight
<item repeat="0-1">number</item>
<item repeat="1-">
  <ruleref uri="#digit" />
  <tag>out.Number = rules.digit;</tag>
</item>
</rule> 
```

我的问题在于最后一个 - 数字。我定义语法中可以存在一个或多个数字，这是有效的。但是当我去提取 OnSpeechRecognized 回调中的值时，我只得到了最后一个数字。

```
 public override bool OnSpeechRecognized(object sender, Microsoft.Speech.Recognition.SpeechRecognizedEventArgs e)
    {
        String output = String.Format("Recognition Summary:\n" +
            "  Recognized phrase: {0}\n" +
            "  Confidence score {1}\n" +
            "  Grammar used: {2}\n",
            e.Result.Text, e.Result.Confidence, e.Result.Grammar.Name);
        Console.WriteLine(output);

        // Display the semantic values in the recognition result.
        Console.WriteLine("  Semantic results:");
        //Console.WriteLine(e.Result.Semantics["Flight"].Value);

        foreach (KeyValuePair<String, SemanticValue> child in e.Result.Semantics["ShowFlight"])
        {
            Console.WriteLine("    {0} is {1}",
              child.Key, child.Value.Value ?? "null");
        }
        Console.WriteLine();

... 
```

或者，更直接地：

```
e.Result.Semantics["ShowFlight"]["Number"].Value.ToString() 
```

如果我说“二一一七”，[“Number”] 中唯一的数字是 7。同样，如果我说“四五”，我得到的唯一数字是 5。

如何提取作为航班号一部分的所有说出的数字？

另外，是否有一个我可以加载的秘密内部语法，可以让我轻松识别“四五”和“四十五”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:11:35.183

您可以简单地将最后一个“项目”元素替换为以下内容：

```
 <tag>out.Number = &quot;&quot;</tag>
  <item repeat="1-">
    <ruleref uri="#digit" />
    <tag>out.Number += rules.digit;</tag>
  </item> 
```

这会将所有识别的数字连接到`out.Number`.

关于第二个问题，不幸的是，没有这样的“秘密内部语法”。您必须自己编写代码。

# functional-programming - 评估期间的堆栈溢出（循环递归？）。OCaml

> ID：12503419
> 
> 赞同：2
> 
> 时间：2012-09-19T21:49:52.033
> 
> 标签：functional-programming, ocaml

我正在尝试编写一个接受 int n 并返回从 n 到 0 的列表的函数。

这就是我所拥有的

```
let rec downFrom n =
let m = n+1 in
if m = 0 then                                                                                  
  []                                                                                           
else                                                                                            
  (m-1) :: downFrom (m - 1);; 
```

该函数编译正常，但是当我使用任何 int 对其进行测试时，它会在评估期间给我错误堆栈溢出（循环递归？）。

我知道这是阻碍的本地变量，但我不知道另一种声明它的方式。谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:54:15.667

首先，你的程序*真正*的问题是你有一个无限循环。为什么，因为你的归纳基本情况是 0，但你总是停留在`n`！这是因为你递归`m - 1`哪个是真的`n + 1 - 1`

我对为什么会编译感到惊讶，因为它不包含`rec`递归函数所必需的关键字。为了避免 OCaml 中的堆栈溢出，您通常会切换到[尾递归](http://c2.com/cgi/wiki?TailRecursion)样式，如下所示：

```
let downFrom n =
  let rec h n acc = 
    if n = 0 then List.rev acc else h (n-1) (n::acc)
  in
  h n [] 
```

* * *

有人建议进行以下编辑：

```
let downFrom n =
    let rec h m acc =
        if m > n then acc else h (m + 1) (m::acc)
    in
    h 0 []; 
```

我同意，这节省了对 List.rev 的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T21:55:21.463

递归的关键是递归调用必须是问题的较小版本。您的递归调用不会创建较小版本的问题。它只是重复同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:10:47.277

您可以尝试使用过滤参数语法：

```
let f = function
   p1 -> expr1
 | p2 -> expr2
 | p3 -> ...;; 
```

* * *

```
let rec n_to_one =function
  0->[]
  |n->n::n_to_one (n-1);;

# n_to_one 3;;
- : int list = [3; 2; 1] 
```

# authentication - .hg/hgrc 中未指定 hg 推送错误和用户名。不会使用钥匙圈

> ID：12503421
> 
> 赞同：2
> 
> 时间：2012-09-19T21:49:52.917
> 
> 标签：authentication, mercurial, ldap, credentials, mercurial-keyring

我做了以下事情：

hg clone ...somelink.to.repo.in.hg ... Giga

光碟千兆

ls (...它显示 Giga 目录中存在 giga.txt 文件)

vi giga.txt (...做了一些改变..)

hg 提交 -m “字节”

hg out（出现以下错误）

```
** unknown exception encountered, details follow
** report bug details to http://mercurial.selenic.com/bts/
** or mercurial@selenic.com
** Mercurial Distributed SCM (version 1.5)
** Extensions loaded: acl, bugzilla, children, churn, color, convert, extdiff, fetch, gpg, graphlog, hgcia, hgk, highlight, interhg, keyword, mercurial_keyring, mq, notify, pager, patchbomb, progress, purge, rebase, record, relink, schemes, share, transplant, zeroconf
Traceback (most recent call last):
  File "/usr/bin/hg", line 27, in <module>
    mercurial.dispatch.run()
  File "/usr/lib/python2.6/site-packages/mercurial/dispatch.py", line 16, in run
    sys.exit(dispatch(sys.argv[1:]))
  File "/usr/lib/python2.6/site-packages/mercurial/dispatch.py", line 30, in dispatch
    return _runcatch(u, args)
  File "/usr/lib/python2.6/site-packages/mercurial/dispatch.py", line 47, in _runcatch
    return _dispatch(ui, args)
  File "/usr/lib/python2.6/site-packages/mercurial/dispatch.py", line 466, in _dispatch
    return runcommand(lui, repo, cmd, fullargs, ui, options, d)
  File "/usr/lib/python2.6/site-packages/mercurial/dispatch.py", line 336, in runcommand
    ret = _runcommand(ui, options, cmd, d)
  File "/usr/lib/python2.6/site-packages/mercurial/extensions.py", line 128, in wrap
    return wrapper(origfn, *args, **kwargs)
  File "/usr/lib/python2.6/site-packages/hgext/pager.py", line 66, in pagecmd
    return orig(ui, options, cmd, cmdfunc)
  File "/usr/lib/python2.6/site-packages/mercurial/dispatch.py", line 517, in _runcommand
    return checkargs()
  File "/usr/lib/python2.6/site-packages/mercurial/dispatch.py", line 471, in checkargs
    return cmdfunc()
  File "/usr/lib/python2.6/site-packages/mercurial/dispatch.py", line 465, in <lambda>
    d = lambda: util.checksignature(func)(ui, *args, **cmdoptions)
  File "/usr/lib/python2.6/site-packages/mercurial/util.py", line 401, in check
    return func(*args, **kwargs)
  File "/usr/lib/python2.6/site-packages/mercurial/extensions.py", line 116, in wrap
    util.checksignature(origfn), *args, **kwargs)
  File "/usr/lib/python2.6/site-packages/mercurial/util.py", line 401, in check
    return func(*args, **kwargs)
  File "/usr/lib/python2.6/site-packages/hgext/color.py", line 352, in nocolor
    return orig(*args, **opts)
  File "/usr/lib/python2.6/site-packages/mercurial/util.py", line 401, in check
    return func(*args, **kwargs)
  File "/usr/lib/python2.6/site-packages/mercurial/extensions.py", line 116, in wrap
    util.checksignature(origfn), *args, **kwargs)
  File "/usr/lib/python2.6/site-packages/mercurial/util.py", line 401, in check
    return func(*args, **kwargs)
  File "/usr/lib/python2.6/site-packages/hgext/mq.py", line 2648, in mqcommand
    return orig(ui, repo, *args, **kwargs)
  File "/usr/lib/python2.6/site-packages/mercurial/util.py", line 401, in check
    return func(*args, **kwargs)
  File "/usr/lib/python2.6/site-packages/mercurial/extensions.py", line 116, in wrap
    util.checksignature(origfn), *args, **kwargs)
  File "/usr/lib/python2.6/site-packages/mercurial/util.py", line 401, in check
    return func(*args, **kwargs)
  File "/usr/lib/python2.6/site-packages/hgext/graphlog.py", line 365, in graph
    return orig(*args, **kwargs)
  File "/usr/lib/python2.6/site-packages/mercurial/util.py", line 401, in check
    return func(*args, **kwargs)
  File "/usr/lib/python2.6/site-packages/mercurial/commands.py", line 2275, in outgoing
    other = hg.repository(cmdutil.remoteui(repo, opts), dest)
  File "/usr/lib/python2.6/site-packages/mercurial/hg.py", line 82, in repository
    repo = _lookup(path).instance(ui, path, create)
  File "/usr/lib/python2.6/site-packages/mercurial/httprepo.py", line 271, in instance
    inst.between([(nullid, nullid)])
  File "/usr/lib/python2.6/site-packages/mercurial/httprepo.py", line 190, in between
    d = self.do_read("between", pairs=n)
  File "/usr/lib/python2.6/site-packages/mercurial/httprepo.py", line 134, in do_read
    fp = self.do_cmd(cmd, **args)
  File "/usr/lib/python2.6/site-packages/mercurial/httprepo.py", line 85, in do_cmd
    resp = self.urlopener.open(req)
  File "/usr/lib/python2.6/urllib2.py", line 397, in open
    response = meth(req, response)
  File "/usr/lib/python2.6/urllib2.py", line 510, in http_response
    'http', request, response, code, msg, hdrs)
  File "/usr/lib/python2.6/urllib2.py", line 429, in error
    result = self._call_chain(*args)
  File "/usr/lib/python2.6/urllib2.py", line 369, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.6/urllib2.py", line 855, in http_error_401
    url, req, headers)
  File "build/bdist.linux-i686/egg/mercurial_keyring.py", line 339, in basic_http_error_auth_reqed
  File "/usr/lib/python2.6/urllib2.py", line 833, in http_error_auth_reqed
    return self.retry_http_basic_auth(host, req, realm)
  File "/usr/lib/python2.6/urllib2.py", line 836, in retry_http_basic_auth
    user, pw = self.passwd.find_user_password(realm, host)
  File "build/bdist.linux-i686/egg/mercurial_keyring.py", line 333, in find_user_password
  File "build/bdist.linux-i686/egg/mercurial_keyring.py", line 184, in find_auth
  File "build/bdist.linux-i686/egg/mercurial_keyring.py", line 67, in get_http_password
  File "/usr/local/lib/python2.6/site-packages/keyring/core.py", line 37, in get_password
    return _keyring_backend.get_password(service_name, username)
  File "/usr/local/lib/python2.6/site-packages/keyring/backend.py", line 143, in get_password
    items = gnomekeyring.find_network_password_sync(username, service)
gnomekeyring.IOError 
```

## 我的 ~/.hgrc（OpenSUSE 机器）

```
[ui]
username=c123456 <Arun.Sangal@MyCompany.com>

[extensions]
mercurial_keyring = /root/mercurial_keyring.py

#[trusted]
#users = *
#groups = *

[extensions]
acl =
bugzilla =
children =
churn =
color =
convert =
eol = !
extdiff =
factotum = !
fetch =
gpg =
graphlog =
hgcia =
hgcr-gui-qt = !
hgk =
highlight =
interhg =
keyword =
largefiles = !
mercurial_keyring =
mq =
notify =
pager =
patchbomb =
perfarce = !
progress =
projrc = !
purge =
rebase =
record =
relink =
schemes = 
```

.... ........ETC

* * *

我的本地存储库（在 OpenSuse 克隆文件夹上 - 内部：/Giga/.hg/hgrc）是：

* * *

```
[paths]
default = http://the.hg.server.com/hg/TestHgRepo1/
myrepo = http://the.hg.server.com/hg/TestHgRepo1/

[auth]
myrepo.schemes = http https
myrepo.prefix = the.hg.server.com/hg
myrepo.username = c123456 
```

* * *

我尝试了一切，但这个钥匙圈的东西不起作用。每次我都会得到提示：

*   汞输出

*   汞推

*   等 hg 操作，但不是当我做的时候

汞提交

有人可以告诉我我在这里想念什么。在 Windows 上使用 TortoiseHg 尝试了相同的练习，使用 C:...\mercurial.ini（Windows 端有点像 unix ~/.hgrc 文件）.. 并更新/确保本地存储库克隆文件夹的 ../clonedfolder/.hg/ hgrc 文件包含类似的 [auth] ..3 行，但在 Linux OpenSUSE 和 Windows 上使用 TortoiseHg 的 Mercurial 不能使用密钥环。

它再次提示我再次输入用户凭据 :((

有人可以纠正我应该怎么做才能解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T17:45:51.437

如果在 mercurial 中多次提示用户凭据。设置 Mercurial_Keyring 然后

这个问题来了，没有人以简单的方式解释。

？？？如果我使用 servername、servername 的 IP 或 servername 的 FQDN，如何使 [auth] xx.prefix = servername/hg_or_something 对 servername/hg 位置下的所有存储库起作用？

最终答案：Arun • 2 分钟前 -</p>

好的，我把它放在 ~/.hgrc（Linux/Unix -home 目录的 .hgrc 隐藏文件）或 Windows 用户的 %UserProfile%/mercurial.ini 或 %HOME%/mercurial.ini 文件中。

```
[auth]
default1.schemes = http https
default1.prefix = hg_merc_server/hg
default1.username = c123456

default2.schemes = http https
default2.prefix = hg_merc_server.company.com/hg
default2.username = c123456

default3.schemes = http https
default3.prefix = 10.211.222.321/hg
default3.username = c123456 
```

现在，我可以使用任一服务器/IP/服务器的 FQDN 结帐。

# java - 扫描仪添加和删除项目

> ID：12503422
> 
> 赞同：2
> 
> 时间：2012-09-19T21:49:54.047
> 
> 标签：java, linked-list, java.util.scanner

我在这里的主要课程中遇到了麻烦，我正在尝试在我的列表中添加新项目、删除、查找和显示，我已经用扫描仪尝试了所有方法，但它似乎不起作用..这是我到目前为止的代码和我做了什么......我怎么能做到呢？

```
 import java.util.*;
  import java.util.LinkedList;

    public class Main {
public static void main(String[] args) {
    Scanner input = new Scanner(System.in);
    SinglyLinkedList<String> names = new SinglyLinkedList<String>();
    names.add("Fred");
    names.add("Earl");
    names.add("Dan");
    names.add("Carl");
    names.add("Ben");

    System.out.println(names);

    System.out.println("Add an item");
    System.out.println("" + input.nextLine());
    names.add();
    System.out.println("LinkedList:" + names);

    System.out.println("Remove an item");
    System.out.println("" + input.nextLine());
    names.remove();
    System.out.println("LinkedList:" + names);

    System.out.println("Find an item");
    System.out.println("" + input.nextLine());
    names.findFirst(element);
    System.out.println("LinkedList:" + names);

    System.out.println("Display an list");
    System.out.println("LinkedList:" + names);

    System.out.println("Exit");
    input.close();

}

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:59:06.197

您实际上并没有添加或删除任何内容，`LinkedList`因为您从未将任何参数传递给`add`and`remove`方法。尝试这样的事情：

```
System.out.println("Add an item");
names.add(input.nextLine());
System.out.println("LinkedList: " + names);

System.out.println("Remove an item");
names.remove(input.nextLine());
System.out.println("LinkedList: " + names);

System.out.println("Find an item");
names.findFirst(input.nextLine());
System.out.println("LinkedList: " + names); 
```

# architecture - Autoconf 标准化配置目标命名

> ID：12503427
> 
> 赞同：0
> 
> 时间：2012-09-19T21:50:25.733
> 
> 标签：architecture, autotools, configure, autoconf, prefix

有没有一种方法可以自动查找标准化的目标命名，例如我通常希望在特定于平台的构建中将`i686-pc-linux-gnu`其作为参数提供给 configure 标志？`--exec-prefix`我已经看到s 在没有指定的情况下`./configure && make && make install`自动安装东西，所以一些自动命名逻辑必须存在于 autoconf 中。`$PREFIX/i686-pc-linux-gnu``--exec-prefix`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:53:27.507

autotools 生成的文件`config.guess`就是答案。

# sql-server - 使用 SSMS 将 CSV 导入 SQL Azure 数据库

> ID：12503430
> 
> 赞同：6
> 
> 时间：2012-09-19T21:50:45.823
> 
> 标签：sql-server, azure, azure-sql-database

我有一组包含许多列的大型 CSV 文件，我需要将这些文件导入到 SQL Azure 数据库中。通常我会使用 SQL Server Management Studio 中的导入向导。但是，在 SSMS 中连接到 SQL Azure 时，该向导似乎不是一个选项。那是对的吗？如果是这样，完成这项任务的推荐工具是什么？我正在寻找一种工具，可以从数据中推断出哪些列应该允许我根据需要覆盖数据类型。由于我在每个文件中都有很多列，因此我想避免手动编写 SQL 代码以生成表的繁琐工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-08T19:27:30.887

这对我有用：

*   打开 SQL Server 管理工作室
*   连接到 Azure
*   右键单击数据库
*   转到任务 > 导入数据
*   选择您的平面文件
*   上传到 Azure SQL 并基于此工作流创建 SSIS 包

我有时会以这种方式收到 CSV 文件的错误，但使用 Excel 文件或检查导入向导中的 CSV 数据列的选项就足够了。

确保为您的用户帐户分配了适当的权限。

他们本可以/应该使这更容易，例如 SFTP + 插入或 GUI 直接导入到 Azure SQL，如在 Hue 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:29:48.573

当您将任何数据传输到 SQL 数据库时，数据应该是结构化的。过程是将您的 CSV 转换为表结构，然后将其直接迁移到 SQL Azure。实际上，您可以在 SSMS 中编写一个存储过程来一次性完成所有操作。

因为 CSV 文件可以是制表符、逗号或任何其他字符分隔的，所以您可以先按照[此处](http://blog.sqlauthority.com/2008/02/06/sql-server-import-csv-file-into-sql-server-using-bulk-insert-load-comma-delimited-file-into-sql-server/)所述在本地 DB 中进行批量插入，然后将表同步到 SQL Azure。

# php - jquerymobile选择菜单未填充

> ID：12503436
> 
> 赞同：0
> 
> 时间：2012-09-19T21:51:18.027
> 
> 标签：php, json, jquery-mobile

我试图在创建页面时填充选定的菜单，但没有显示选项。

```
$(document).ready(function() {
$.ajax('patientlist.php', function(data){
    var html = '';
    var len = data.length;
    for (var i = 0; i< len; i++) {
        html += '<option value="' + data[i].patient_id + '">' + data[i].patient_firstname + data[i].patient_lastname + '</option>';}
    $('#patientselect').append(html);
}); 
```

});

我的 Patientlist.php

```
$result = mysql_query("SELECT `patient_id`, `patient_firstname`, `patient_lastname` FROM `patients` WHERE `company_id` = " . $user_data['company_id'] . " ORDER BY `patient_firstname`"); 
```

而($row = mysql_fetch_assoc($result)) {

```
$data[] = $row;

echo json_encode( $data ); 
```

我的结果来自 php 页面

[{"patient_id":"9","patient_firstname":"Adam","patient_lastname":"Steve"}] 等等...

非常感谢任何帮助，已经坚持了一周！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:55:38.107

于是，再次发帖。

首先，你应该把`echo json_encode( $data );`你的while循环

```
while($row = mysql_fetch_assoc($result)) {
  $data[] = $row;
}
echo json_encode( $data ); 
```

其次，您的`$ajax`语法不正确，将其更改为`$.post`并告诉`$.post`您期望`'json'`响应的请求`patientlist.php`

```
$(document).ready(function() {
  $.post('patientlist.php', {}, function(data){
    /* code */
  }, 'json'); // <= set data type json here
}); 
```

检索有效字符串时，可以使用方法`json`进行迭代`data``$.each`

```
$.each(data, function(index, patient) {
  console.log(patient.patient_id); // or use patient['patient_id']
}); 
```

至少你现在会收到一个有效的请求。

注意您的 HTML，如果它不是 DOM 元素，请不要使用`.append`，您只是将 html 元素构建为字符串，因此请改用

```
$('#patientselect').html(html); 
```

# java - Google Drive 服务帐号返回 403 usageLimits

> ID：12503437
> 
> 赞同：4
> 
> 时间：2012-09-19T21:51:23.133
> 
> 标签：java, google-app-engine, oauth-2.0, google-drive-api

我正在尝试编写一个 AppEngine 应用程序，它将 Google 文档写入 Google Drive，放入一组特定的文件夹并设置访问权限。我可以使用旧的 DocsList API，但由于它刚刚被弃用，我决定更新我的代码（无论如何我还有一些额外的功能要添加）。

我面临的问题是：当我使用服务帐户并尝试模拟特定用户时，即使我没有用完任何配额，我也会得到一个带有 usageLimits 的 403。

这是我正在使用的代码：

```
GoogleCredential credentials = new GoogleCredential.Builder()
                 .setTransport(HTTP_TRANSPORT)
                 .setJsonFactory(JSON_FACTORY)
                 .setServiceAccountId("xxxxxxxxxxgserviceaccount.com")
                 .setServiceAccountScopes(DriveScopes.DRIVE)
                 .setServiceAccountPrivateKeyFromP12File(
                                    new java.io.File("xxxx-privatekey.p12"))
                 .setServiceAccountUser("user@xxxxxx.org").build(); 
```

我比使用这些凭据来启动我的 Drive 对象：

```
Drive d = Drive.builder(httpTransport, jsonFactory)
               .setHttpRequestInitializer(credentials)
               .setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {
                @Override
                public void initialize(JsonHttpRequest request) {
                    DriveRequest driveRequest = (DriveRequest) request;
                    driveRequest.setPrettyPrint(true);
                }
            }).setApplicationName("MYAPPNAME").build(); 
```

顺便说一句：我尝试过使用 new Drive(....) 但无论我尝试什么，这都行不通。不断抛出找不到内部方法的错误！

回到这个问题：当我使用 'd' 调用类似 .files().get("SOMEFILEID").execute() 的东西时，我得到一个 403

```
{ "code" : 403,
"errors" : [ {
    "domain" : "usageLimits",
    "message" : "Daily Limit Exceeded. Please sign up",
    "reason" : "dailyLimitExceededUnreg",
    "extendedHelp" : "https://code.google.com/apis/console"
  } ],
  "message" : "Daily Limit Exceeded. Please sign up"
} 
```

我不明白为什么这不起作用。我在网上看了一整天，但找不到合适的答案。非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:46:48.730

所以 pinoyyid 的回答确实有帮助，尽管它不是最终的答案。

我最终像这样解决它：

我使用了我的 AppID (xxxxx.apps.googleusercontent.com) 并将其添加到我的 CPanel https://www.google.com/a/cpanel/[[YOURDOMAIN]]/ManageOauthClients 中，范围如下：

*   [https://www.googleapis.com/auth/drive](https://www.googleapis.com/auth/drive)
*   [https://www.googleapis.com/auth/drive.file](https://www.googleapis.com/auth/drive.file)
*   [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)
*   [https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)

之后，我可以向 Drive 环境发出经过身份验证的请求。现在遇到一堆不同的问题，但 403 得到了解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T01:42:34.177

当 API 调用缺少 Authorization http 标头时，我通常会收到 403。跟踪 http 并查看标头。“配额”消息的基本原理是，如果没有 Auth 标头，您就是匿名的，并且匿名使用的配额为零。

您还可以检查您的应用是否已为两个 Drive API 注册，因为我听说这可能会导致相同的问题。

在内部方法问题上，听起来您使用的是不兼容的库版本。对我来说最有效的方法是删除我使用示例代码下载的所有库，然后使用 Google Eclipse 插件“Google/Add Google APIs...”下载所有最新版本。

# .net - 从 DB2 模式自动生成 DataTable

> ID：12503438
> 
> 赞同：0
> 
> 时间：2012-09-19T21:51:23.563
> 
> 标签：.net, visual-studio-2010, ado.net, datatable, db2

我正在做一个项目，我们有一个预先存在的`DataSet`. 我们不做任何持久性类型的东西。它只是充当我们从 DB2 读入的数据的持有者。

我需要在其中一个表中添加一个新列。我可以打开设计器并查看`DataTable`...我当然可以手动添加列，但我想知道是否有办法告诉 Visual Studio 从 DB2 获取表模式并`DataTable`为我构建？如果这也能在未来通过模式更改轻松更新它，那将是非常酷的。我希望我的`DataTable`/`DataSet`是强类型的，这是现在在设计器中手动添加列的东西。

我没有太多运气找到任何教程。一个[中间解决方案](http://support.microsoft.com/kb/317940)可能是`XSD`从 DB2 模式生成并导入它，但考虑到我缺乏这方面的知识，我认为从其他人那里获得一些输入会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:04:58.663

有很多方法可以做到这一点。在 POCO（普通旧 CLR 对象）上进行搜索应该会给您带来许多满意的结果。（注意，这是 POJO 一词的“笑话”）。

当然这是 stackoverflow.com，所以你*可以*使用他们写的……它位于：

[http://code.google.com/p/dapper-dot-net/](http://code.google.com/p/dapper-dot-net/)

我不推荐 EF，它对于快速简单的解决方案来说有点沉重。

祝你好运。

# ruby-on-rails - 如何将插件“转换”为 gem 并使其“私有”？

> ID：12503439
> 
> 赞同：2
> 
> 时间：2012-09-19T21:51:23.300
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, plugins, rubygems

我正在使用 Ruby on Rails 3.2.2。我已经实现了一个`Something`插件（它几乎是一个 gem，但不是一个 gem）并且所有相关文件都在`lib/something`目录中。

1.  我应该完成哪些步骤才能将`Something`插件“转换”为 Ruby gem？
2.  如何`Something`在我的应用程序中使用新实现的gem而不将其公开（即，不将其放在公共服务器上）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:03:03.800

1.  [http://guides.rubygems.org/make-your-own-gem/](http://guides.rubygems.org/make-your-own-gem/)
2.  上一个链接也涵盖了这一点 - gem install something-1.2.3.gem

# c# - 从动态变量中的集合中获取项目

> ID：12503445
> 
> 赞同：7
> 
> 时间：2012-09-19T21:51:45.583
> 
> 标签：c#, dynamic, ienumerable

我正在处理一些使用动态变量的代码。

```
dynamic variable; 
```

在幕后，这个变量包含 Shapes 的集合，它又是动态变量的集合。所以像这样的代码工作正常：

```
foreach(var shape in variable.Shapes) //Shapes is dynamic type too
{
    double height = shape.Height; 
} 
```

我需要从这个集合中获取第一个项目的高度。这个 hack 效果很好：

```
double height = 0;
foreach(var shape in variable.Shapes)
{
    height = shape.Height; //shape is dynamic type too
    break;
} 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T21:57:49.730

因为`variable`is `dynamic`，您将无法评估`variable.Shapes.First()`，因为扩展方法的确定发生在编译时，而动态调用发生在运行时。您将不得不显式调用静态方法，

`System.Linq.Enumerable.First<TType>(variable.Shapes).Height`. `TType`可枚举项的预期类型在哪里。

否则，请按照其他人的建议使用 LINQ。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T21:55:19.000

### 描述

您可以使用 `LINQ`方法`First()`或`FirstOrDefault()`获取第一个项目。

> **First()** - 返回序列的第一个元素。
> 
> **FirstOrDefault()** - 返回序列的第一个元素，如果序列不包含任何元素，则返回默认值。

### 样本

```
using System.Linq;

double height = 0;

// this will throw a exception if your list is empty
var item = System.Linq.Enumerable.First(variable.Shapes);
height = item.Height;

// in case your list is empty, the item is null and no exception will be thrown
var item = System.Linq.Enumerable.FirstOrDefault(variable.Shapes);
if (item != null)
{
     height = item.Height;
} 
```

### 更多信息

*   [MSDN - LINQ（语言集成查询）](http://msdn.microsoft.com/en-us/library/bb397926.aspx)
*   [MSDN - Enumerable.First 方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx)
*   [MSDN - Enumerable.FirstOrDefault 方法](http://msdn.microsoft.com/en-us/library/bb340482.aspx)

# ruby - Ruby 哈希中的 : 和 "" 有什么区别？

> ID：12503446
> 
> 赞同：3
> 
> 时间：2012-09-19T21:51:55.533
> 
> 标签：ruby, syntax, semantics

我看到有些人像这样使用哈希：

```
end_points = { "dev" => "http://example.com"} 
```

在其他地方使用这个：

```
 end_points = { :dev => "http://example.com"} 
```

这两种方法有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:55:20.700

`""`声明一个[String](http://www.ruby-doc.org/core-1.9.3/String.html)。`:`声明一个[Symbol](http://www.ruby-doc.org/core-1.9.3/Symbol.html)。如果您使用的是散列，并且您不需要更改键的值或将其保留在任何地方，请使用符号。

查看[此](http://www.robertsosinski.com/2009/01/11/the-difference-between-ruby-symbols-and-strings/)内容以获得更详细的解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T21:55:29.793

`:dev`是一个符号，`'dev'`是一个字符串。

大多数时候，使用符号，但两者都是正确的。一些关于这个主题的阅读：

[什么是符号，我们如何使用它们？](https://stackoverflow.com/questions/6745010/what-are-symbols-and-how-do-we-use-them)

[为什么在 Ruby 中使用符号作为哈希键？](https://stackoverflow.com/questions/8189416/why-use-symbols-as-hash-keys-in-ruby)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T21:57:18.060

在第一种情况下，您在第二种情况下使用字符串，您使用符号。符号是 Ruby 中的特定类型。在整个程序中只有一个符号实例，但字符串可以有很多。IE

```
> :sym.__id__
=> 321608
> :sym.__id__
=> 321608
> "sym".__id__
=> 17029680
> "sym".__id__
=> 17130280 
```

如您所见，符号始终具有相同的 ID，这意味着它始终是同一个对象，但字符串每次都是新字符串在新的内存位置。这就是为什么符号作为散列键更常见的原因，它只是更快。

# cordova - 固定的页脚隐藏在焦点上

> ID：12503450
> 
> 赞同：0
> 
> 时间：2012-09-19T21:52:17.563
> 
> 标签：cordova, jquery-mobile

我正在使用**jQuery Mobile**和**Phonegap**开发一个移动应用程序。我想要一个固定的页脚，并希望当用户单击文本字段或文本区域等输入字段时隐藏页脚。我可以通过使用页脚上的`data-position="fixed"`属性来固定页脚位置。

问题是当我单击文本字段输入数据时，页脚与输入字段重叠并且看起来很奇怪。我尝试使用**hideDuringFocus**但没有用，因为它不适用于固定页脚。

有没有其他人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:48:51.470

我不确定这个解决方案是否是您正在寻找的，但您可以尝试一下。

尝试将选项添加`data-tap-toggle="false"`到您的页脚，并保留`data-position="fixed"`.

上面的解决方案允许您选择输入文本，而不会让您的页脚与它重叠。

但是，使用此解决方案，您的页脚不会被隐藏，而是完全移动到页面底部（就像没有 的页脚一样`data-position="fixed"`），一旦失去对输入的关注，您的页脚将恢复正常（位置固定）。

希望这可以帮助。

# php - hmailserver 550 无效地址错误通过 php 表单发送

> ID：12503451
> 
> 赞同：0
> 
> 时间：2012-09-19T21:52:18.313
> 
> 标签：php, smtp

我已经无休止地收到这个错误两天了。尽管遵循所有正确的协议调用。该错误表明电子邮件无效，但我将它与松鼠邮件一起使用没有问题，并且在 php.ini 中看起来完全相同但是我可以弄清楚当我回显 $header 它显示“发件人：admin@daysshared.local”时会是什么是正确的，它是否认为发件人是电子邮件地址的一部分。我正处于一起放弃的风口浪尖，所以如果可以的话，请帮助我。谢谢。继承人的PHP：

```
$subject = "Your New Password";
$headers = "FROM: admin@dayshare.local";
$message = "Your new password is as follows:

----------------------------
Password:$emailpassword
----------------------------

This email was automatically generated.";

      if (!mail($email,$subject,$message,$headers)){
         echo ("error");
      }else{
            echo"password sent"; 
```

在 php.ini 中：

```
SMTP = localhost
smtp_port = 25
sendmail_from = admin@dayshare.local 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:27:52.193

我知道这是旧的，但只是偶然发现它。你现在可能已经修复了它......你提到

显示“发件人：admin@daysshared.local”

但你的标题是

$headers = "来自：admin@dayshare.local";

这是不同的dayshared.local & dayshare.local

# javascript - jquery .each() 在 IE 9 中不起作用

> ID：12503453
> 
> 赞同：0
> 
> 时间：2012-09-19T21:52:30.793
> 
> 标签：javascript, internet-explorer, jquery

我试图用 .each 函数替换在 IE9 中不起作用的 for 循环来隐藏一系列元素，而代码在 FF 中工作它在 IE 中不起作用。

```
var myArray=document.getElementsByName("hide[]");
$.each(myArray, function(i, id) {$("#" + myArray[i].attributes["id"].value).hide();}); 
```

不完全确定什么失败了

以 for 循环形式

```
for (var i = 0; i < myArray.length; i++)
  {
  $("#" + myArray[i].attributes["id"].value).hide();
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T21:55:40.767

你为什么用`getElementsByName`？只需使用 jQuery 来获取元素，然后就`.hide`可以了。

```
$('[name="hide[]"]').hide(); 
```

# jquery - 使用 JQuery 将 DIV 添加到活动菜单项

> ID：12503459
> 
> 赞同：0
> 
> 时间：2012-09-19T21:52:58.287
> 
> 标签：jquery, html, css, menu

在帮助[这个](http://www.eggprocessinginnovations.com/site/about)网站的朋友时，我已经设法（在很多 SO 帮助下）使用 JQuery 在相关页面上突出显示活动菜单标题。“活动”类已添加到列表项的“a”对象中。

```
<script type="text/javascript">
    jQuery(document).ready(function($){
        var url = window.location;
        $('#nav-menu li a[href="'+url+'"]').addClass('active');
    });
</script> 
```

我的问题是，当每个菜单项被选中时（不是悬停时），我还需要一个图标出现在每个菜单项的左侧。如何添加到以前的 JQuery 代码以显示一个不可见的 DIV？我也愿意接受不使用 JQuery 的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:59:14.337

只需给班级一个背景（如果你只是给箭头或一些基本图像）

像这样 。

```
.active{
background: url('location') no-repeat 0% 50%;
padding: 10px //some value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:00:52.163

如果您创建一个将 div 显示为未隐藏的类，那么您可以使用相同的代码将该类添加到隐藏的 DIV 中。

我个人会做的是将图标嵌套在与按钮的其余部分相同的 div 中，例如：

```
<div class="button-holder">
     <div class="icon"></div>
     <div class="button-text">Contact Page</div>
</div> 
```

然后，如果您使用 JQuery 为 .button-holder 提供 .active 类，您还可以操作 .icon 类

```
.button-holder {
    /*some properties*/
}
.button-holder .icon {
    /* hide the icon if .button-holder is not active*/
    display: none;
}
.button-holder.active .icon {
    /* if .button-holder is also .active make it visible */
    display: inline-block;
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T22:05:01.037

如果链接属于活动类，则将该图像的可见性属性设置为 true

```
var icon_visibility = $('#link').hasClass('active') ? 'visible' : 'hidden';
$('#icon').css('visibility', icon_visibility); 
```

# python - 在 Scrapy Items 中存储重定向

> ID：12503460
> 
> 赞同：0
> 
> 时间：2012-09-19T21:53:03.093
> 
> 标签：python, redirect, scrapy

我想在我的scrapy`items.py`文件中包含一个响应字段，如下所示：

```
class ScrapyItem(Item):
    title = Field()
    h1 = Field()
    response = Field() 
```

我以为我可以`response.status`在我的`spider.py`文件中使用，但这`200`每次都会给我一个状态码。我希望它用 , 填充`301`，`302`或者`404`如果页面被重定向或找不到。

有没有办法在 Scrapy 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:35:07.747

Scrapy 会为你提供一些东西（这是一个设计决定）。你需要做两件事：

1.  在您的蜘蛛中，编写以下内容来[处理错误响应](http://doc.scrapy.org/en/0.14/topics/spider-middleware.html#module-scrapy.contrib.spidermiddleware.httperror)

    `handle_httpstatus_list = range( 400, 427 ) + range( 500, 511 )`

2.  禁用处理 3xx 状态标头的[RedirectMiddleware](https://github.com/scrapy/scrapy/blob/master/scrapy/contrib/downloadermiddleware/redirect.py)

现在您可以从`response.status`字段中读取状态。

# android - 在应用程序中关闭 LED 触摸灯（Android 手机）

> ID：12503461
> 
> 赞同：0
> 
> 时间：2012-09-19T21:53:09.770
> 
> 标签：android, led

在 android 手机中，当我使用我的应用程序时，退出后它仍然显示触摸按钮的 LED 灯（主页/返回/菜单）（我没有设置有关该按钮灯的任何内容，仅更改程序中的屏幕亮度）。有什么办法可以永久关闭那盏灯吗？（禁用它）。（HTC One X 手机）。我的程序会干扰电力系统吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T19:19:37.727

如果您必须关闭 HTC ONE X 中的这些按钮 LED 灯，您需要按住电源和主页按钮，几秒钟后这些 LED 灯将开始闪烁。之后松开电源按钮。您的按钮的 LED 灯将关闭。只为 HTC ONE X！

# php - 如何从 PDO 故障“错误！：SQLSTATE [HY093]：无效参数号：未定义参数”中获取更多信息？

> ID：12503462
> 
> 赞同：3
> 
> 时间：2012-09-19T21:53:09.197
> 
> 标签：php, error-handling, pdo

每隔一段时间，我就会收到类似 PDO 的错误：

> 错误！：SQLSTATE[HY093]：无效参数号：未定义参数

有什么方法可以得到更具体的错误，例如行号、文件名、缺少的参数等，而不是模糊的消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T22:29:47.387

首先，确保您已将 PDO 设置为在错误时引发异常：

```
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

现在，确保每个 PDO 操作/操作集都包含在`try`/`catch`块中，如下所示：

```
try {

  $stmt = $pdo->prepare("SELECT * FROM Whatever");
  // ...yada yada yada, your PDO code goes here

} catch (PDOException $e) {

  // This will echo the error message along with the file/line no on which the
  // exception was thrown. You could e.g. log the string to a file instead.
  echo $e->getMessage().' in '.$e->getFile().' on line '.$e->getLine();

} 
```

所有异常都从基[`Exception`](http://www.php.net/manual/en/class.exception.php)类扩展，因此继承它的方法和它携带的有关错误的信息。

附带说明，如果将 PDO 与 MySQL 一起使用，请确保禁用模拟的预准备语句。有关如何执行此操作以及为什么要执行此操作的更多信息，[请参见此处。](https://stackoverflow.com/a/12202218/889949)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:09:47.083

您可以做的是注册一个全局错误处理程序和一个全局异常处理程序。这些函数接收文件名、行号和错误消息。在这些函数中，将数据回显到屏幕上并死掉。

# c++ - 是否允许在模板中使用本地定义的类型？

> ID：12503465
> 
> 赞同：0
> 
> 时间：2012-09-19T21:53:30.023
> 
> 标签：c++

在[回答另一个问题](https://stackoverflow.com/a/12487715/315052)时，我找不到以下代码被禁止的原因。

```
template <typename F> void bar (F *f) { f->a = 0; }

int main () {
    struct Foo { int a; } f = { 3 };
    bar(&f);                         // fail
} 
```

我提供的解释是编译器无法合法地表达模板扩展，但这更多是我的直觉而不是原因。关于为什么代码不应该编译有明确的解释吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T21:54:25.400

这在 C++03 中是明确禁止的，但在 C++11 中是合法代码。

不确定这是否与[Using local classes with STL algorithms](https://stackoverflow.com/questions/742607/using-local-classes-with-stl-algorithms)完全相同，因为自从我问这个问题以来标准已经改变。

# css - IE中某些分辨率的填充问题

> ID：12503466
> 
> 赞同：0
> 
> 时间：2012-09-19T21:53:36.843
> 
> 标签：css

在 IE 的某些分辨率中，我的页脚溢出到新行。我认为这是一个填充问题，它只是将内容推得比容器更宽。它似乎只是在某些分辨率上包装，这对我来说没有意义，因为容器的宽度远小于屏幕的分辨率。似乎找不到解决办法。

CSS：

```
#footer
{
    width: 100%;
    background-color: #4e4e4e;
    padding: 0 0 0;
    margin: 0;
    clear: both;
}
#sitemap
{
    width: 300px;
    padding: 20px 0;
    margin: 0 auto;
    clear: both;
}

#left_map
{
    float: left;
    border-right: 1px dotted #ffffff;
}
#right_map
{
    float: right;
    padding: 30px 0;
}
#copyright
{
    font-size: 10px;
    font-family: inherit;
    color: #ffffff;
    text-align: center;
    padding: 20px 0 0;
    clear: both;
} 
```

HTML（片段）：

```
<div class="clear"></div>
<div id= "footer">
    <div id="sitemap">
        <div id="left_map">
            <h4>Sitemap</h4>
            <ul>
                <li><a class="selected" href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="services.html">Services</a></li>
                <li><a href="gallery.html">Gallery</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </div>
        <div id="right_map">
            <img src="images/footer_logo.png">
        </div>
    </div>
    <div id= "copyright">
        <p>Copyright © 2012 Cornerstone Masons</p>

    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:58:26.190

需要考虑的一些想法：

*   IE 使用自己的盒子模型。关于在 Quirks 模式下添加或忽略容器宽度和边框宽度，IE 上的填充计算方式与 Moz 和 Webkit 不同，因此请确保您有一个 doctype 强制 IE 使用标准兼容模式以避免这种打嗝。
*   确保溢出的屏幕不会在浏览器级别无意中放大。在 Windows 上按 CTRL+0 或在 Mac 上按 command+0 以设置默认缩放。
*   您的填充`padding: 0 0 0;`意味着左侧填充可能会恢复为默认值。我这么说是因为 IE 是迟钝的，我不会因为在特定版本上误读它而把它放在一边。

# android - 关于安卓问题的高分辨率用户界面

> ID：12503468
> 
> 赞同：-2
> 
> 时间：2012-09-19T21:53:52.300
> 
> 标签：android, android-layout

我主要有2个问题。

事实上：我制作了一个使用简洁 ui 元素的应用程序。由于它们的细节，它们必须为每个屏幕提供合适的分辨率，所以我在 drawable-xhdpi 中制作大图片，在 drawable-hdpi 中制作较小的图片等...

问题是：使用如此高分辨率的 UI 元素会降低整个应用程序的速度。这还不是最坏的情况，但我真的很紧张，因为我无法制作一个漂亮且不滞后的“完美”应用程序。

第二个问题是：在考虑平板电脑时，应用程序确实变得很大（xhdpi 图像更大）。出于兼容性原因，我不想制作额外的平板电脑应用程序......

有人得到一些关于高分辨率问题的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:12:14.310

在 android 上使用大图像时，我发现可用堆可能是一个约束。

随着较低分辨率的图像被放大，简单的绘图性能本身应该没有任何问题。

但是，您需要保留在堆中的每个图像都在减少您可以在不获取 onLowMemory 回调的情况下执行的所有其他操作的可用内存。

Android Manifest 中有一个选项允许在较新的设备上使用更多堆

```
android:largeHeap="true" 
```

这不会在大多数设备上为您提供更多的堆，但是如果您在现代设备上尝试它，您可以看到确定内存是否有问题是否会有所不同。

它还可以帮助启用硬件加速。

```
<application android:hardwareAccelerated="true" ...> 
```

另一种选择是提高您经常需要的图像的性能。BitmapFactory.Options 有一个 inPurgeable，它控制在内存不足时是否释放 Bitmap。

但是......即使内存是一个问题，视图的布局也很可能过于复杂。

# c# - 可视化 Web 开发人员 C# 问题

> ID：12503473
> 
> 赞同：0
> 
> 时间：2012-09-19T21:54:31.637
> 
> 标签：c#, asp.net, ado.net

因此，在页面上线并且尝试发布信息后，我收到了错误消息。

```
 SqlConnection conn = new SqlConnection("AddusConString");
        SqlCommand cmd = new SqlCommand(sql);

        int checkValue = 0;
        checkValue++; //increment ID used to build parameter name
        string parmName = String.Format("@Value{0}", checkValue);
        SqlParameter newParameter = new SqlParameter();
        newParameter.ParameterName = parmName;
            // Handle TextBox value
            cmd.Parameters.Add("@FName", FName.Text);
            cmd.Parameters.Add("@LName", LName.Text); 
```

它突出了

```
 SqlConnection conn = new SqlConnection("AddusConString"); 
```

说“初始化字符串的格式不符合从 index0 开始的规范”

这是我的 web.config 页面的代码

```
 <configuration>
<connectionStrings>
    <add name="AddusConString" connectionString="Data Source=localhost;Initial Catalog=AddusWebsite;Integrated Security=True" providerName="System.Data.SqlClient"/>
</connectionStrings>
<system.web>
    <compilation debug="true">
        <assemblies>
            <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/></assemblies></compilation>
</system.web> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T21:57:07.957

您正在使用包含值“AddusConString”的字符串，而不是来自 Web.Config 的值。要从 web.config 的连接字符串部分获取值，您需要使用[ConfigurationManager](http://msdn.microsoft.com/en-us/library/ms134260.aspx)类。

尝试：

```
string connString = System.Configuration.ConfigurationManager.ConnectionStrings["AddusConString"].ConnectionString;
SqlConnection conn = new SqlConnection(connString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T22:02:09.927

你有几个问题。

首先，您必须通过类似于以下的代码引用来自 web.Config 的连接字符串：

```
string myConnectionString = ConfigurationManager.ConnectionStrings["AddusConString"].ConnectionString;
SqlConnection conn = new SqlConnection(myConnectionString); 
```

其次，没有任何东西将 SqlCommand 与您创建的 SqlConnection 相关联，因此：

```
SqlCommand cmd = new SqlCommand(sql, conn); 
```

最后，也许出于示例的目的，它被简单地省略了，没有代码表明查询将被触发，例如：

```
cmd.ExecuteNonQuery(); //assuming the query is an Insert. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T21:58:33.823

`"AddusConstring"`您的代码不能像那样识别。引用它，以便它在 web.config 中查找：

```
string connString =  ConfigurationManager.ConnectionStrings["AddusConstring"].ToString(); 
```

# ruby - 什么是“pythonic”的 Ruby 等价物？

> ID：12503477
> 
> 赞同：10
> 
> 时间：2012-09-19T21:55:02.650
> 
> 标签：ruby, idioms, vocabulary

在 Python 社区中，术语*pythonic*指的是惯用的 Python ^([1])。在 Ruby 社区中是否有与惯用 Ruby ^([2])相同的术语？

[[1] 例如，使用`enumerate(l)`而不是`range(len(l))`pythonic。]

^([2] 例如，使用`.each`代替`for`是惯用的 Ruby。)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T21:58:46.493

我没有听说过任何这样的速记，大概是因为没有方便的后缀可以附加到 Ruby 以将其变成形容词:)

如果你说某事是*惯用*的，而且你是在 ruby​​ists 周围，我想每个人都会明白你的意思。

# django - Apache 下 Django 的内容类型问题，带有静态 HTML + CSS 文件？

> ID：12503478
> 
> 赞同：0
> 
> 时间：2012-09-19T21:55:16.597
> 
> 标签：django, apache, nginx, content-type, x-sendfile

我正在尝试在 Django 下提供静态文件（HTML + CSS）。（稍后，我将使用密码保护它们）。但是，我得到了错误的内容类型。HTML 文件被下载，而不是显示。

我的网络服务器是 Apache，我在 Webfaction 下运行它。我正在查看 Chromium 18 下的站点。

我正在尝试一种简单的 FileWrapper（从 Django 发送文件）方法，我使用 mimetype 来确定类型，以及 x_modsendfile，我让网络服务器决定。

HTML 文件被下载，而不是显示。

当我通过我的 Apache 网络服务器而不是 Django 提供服务时，内容标题*应该是这样的：*

```
HTTP/1.1 200 OK => 
Server => nginx
Date => Wed, 19 Sep 2012 21:51:35 GMT
Content-Type => text/html
Content-Length => 9362
Connection => close
Vary => Accept-Encoding
Last-Modified => Wed, 19 Sep 2012 05:53:00 GMT
ETag => "e3a0c43-2492-4ca079e8fea23"
Accept-Ranges => bytes 
```

观察服务器声称是 nginx。Webfaction 说它为静态服务设置了 Apache，事实上我一直在为 Django 配置一个 Apache 服务器。但是响应说 Nginx (!)

这是来自天真的 FileWrapper 实现的响应，其中我使用 mimetypes 选择 Content-Type：

```
HTTP/1.1 200 OK => 
Server => nginx
Date => Wed, 19 Sep 2012 21:53:28 GMT
Content-Type => ('text/html', none)
Content-Length => 9362
Connection => close 
```

内容类型是一个 TUPLE。

这是 mod_xsendfile 实现的响应，其中我没有选择 Content-Type：

```
HTTP/1.1 200 OK => 
Server => nginx
Date => Wed, 19 Sep 2012 21:52:40 GMT
Content-Type => text/plain
Content-Length => 9362
Connection => close
Vary => Accept-Encoding
Last-Modified => Wed, 19 Sep 2012 05:53:00 GMT
ETag => "e3a0c43-2492-4ca079e8fea23" 
```

这是我的代码：

```
def _serve_file_xsendfile(abs_filename):
    response = django.http.HttpResponse() # 200 OK
    del response['content-type'] # We'll let the web server guess this.
    response['X-Sendfile'] = abs_filename
    return response

def _serve_file_filewrapper(abs_filename):
    p_filename = abs_filename
    if not os.path.exists(p_filename):
        raise Exception('File %s does not exist!')

    try:
        _content_type = mimetypes.guess_type(p_filename)
    except:
        _content_type = 'application/octet-stream'

    print p_filename, _content_type

    wrapper = FileWrapper(file(p_filename))
    response = HttpResponse(wrapper, content_type=_content_type)
    response['Content-Length'] = os.path.getsize(p_filename)
    response['Content-Type'] = _content_type
    return response

def _serve_file(filename):
    abs_filename = _get_absolute_filename(filename)
    return _serve_file_filewrapper(abs_filename)

def public_files(request, filename):
    return _serve_file(filename) 
```

对于 FileWrapper 或 mod_xsendfile 方法，如何获得正确的 Content-Type？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:54:34.513

`_content_type = mimetypes.guess_type(p_filename)`

应该

`_content_type, encoding = mimetypes.guess_type(p_filename)`

# c++ - 程序在删除结构中的指针数组时崩溃

> ID：12503486
> 
> 赞同：1
> 
> 时间：2012-09-19T21:55:49.107
> 
> 标签：c++, delete-operator

当删除命令出现时崩溃。它应该用指向数组的指针创建一个结构，用随机数填充它们，然后释放内存。工作正常，直到删除命令，在没有 for 循环或布尔检查的情况下它与我们的崩溃。

```
int main() {

    cout << "start" << endl;
    //Creating Struct
    struct 
    {
        int* ptrarray[10];
        bool boolarray[10];
    } data;

    //Initializing Random Generator
    srand ( time(NULL) );
    cout << "Initializing: ";

    //Allocating Memory and generating random numbers with for loops

    for (int i = 0; i < 10; i++)
    {   
        int counter = 0; //Counts numbers set   
        cout <<  i << " "; //Counting arrays initialized    
        data.ptrarray[i] = new int [12582912]; // Memory Allocation 

        for (int j = 0; j < 12582912; j++)//Number Generating
        {
            *data.ptrarray[i] = rand() % 899 + 100;
            data.ptrarray[i]++;
            counter++;
        }

        //Checking for failed initializations and declaring if success
        if (counter == 12582912)
        {
            data.boolarray[i] = true;
        }
        else
        {
            data.boolarray[i] = false;
        }
    }

    cout << endl;

    //This is where it always crashes.
    for (int i=0; i<10; i++)
    {
        if (data.boolarray[i] == true)
            delete[] data.ptrarray[i];
    }
    cout << endl;

    return 0;
} 
```

我正在使用 MS Visual Studio 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:00:57.687

罪魁祸首是这一行：

```
data.ptrarray[i]++; 
```

您正在更改指针，然后`delete []`在修改后的指针上使用。这将不起作用：您必须使用`delete[]`与从`new[]`.

尝试

```
data.ptrarray[i][j] = rand() % 899 + 100; 
```

相反，因此您不必更改指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:02:29.823

你的问题在于：

```
data.ptrarray[i]++; 
```

这是修改指针。然后，当您尝试释放该修改后的指针时，它会崩溃。

您可以通过使用指针的副本遍历数组来解决此问题，或者也可以通过使用`j`变量进行索引来解决此问题：

```
data.ptrarray[i][j] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T22:04:06.827

`data.ptrarray[i]++;`是问题所在。

您正在增加对数据的引用，但在尝试删除它之前没有将其重置为开始。

# php - JS/php 日历在 IE8 中不工作，但在 FF/Chrome/Etc 中工作正常

> ID：12503488
> 
> 赞同：-1
> 
> 时间：2012-09-19T21:56:13.460
> 
> 标签：php, javascript, internet-explorer, calendar

我的 Javascript 和 PHP 日历（可在“选择日期”按钮下访问：http: [//xenon.colorado.edu/portal/index.php](http://xenon.colorado.edu/portal/index.php?product=snow&dyndate=true) ?product=snow&dyndate=true ）在 IE8 下无法运行，但在 FF 和 Chrome 中运行良好.

IE 在 calendar.js 的第 13 行抛出错误：

```
document.getElementById(objname+'_frame').contentWindow.adjustContainer(); 
```

```
ERROR MSG: Object doesn't support this property or method
Line: 13
Char: 5
Code: 0
URI: http://xenon.colorado.edu/portal/calendar/calendar.js 
```

任何帮助将不胜感激。谢谢！

编辑：这个页面似乎暗示它可能与函数名称和 onclick 调用有关？[http://www.javascriptjunkie.com/?p=12](http://www.javascriptjunkie.com/?p=12)有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:36:20.863

从你的 body 标签中移除对 GUnload() 的调用。这是来自现已弃用的 API V2，但您正在加载 API V3。

```
<body class="" onload="load()" onunload="GUnload()"> 
```

**编辑：**

此外，在第 91 行还有一个额外的逗号：

```
icon: 'images/Dyn2.png',
shadow: circleshadow,
    //zindex: 0,
    hover: 'images/Dyn1.png'
 }, //<------------------------Remove this comma on line 91. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T00:18:01.363

弄清楚了。我有一个 IFrame，它的网址是：

[http://xenon.colorado.edu/portal/calendar/calendar_form.php?objname=date1&selected_day=1&selected_month=1&selected_year=2012&year_start=2010&year_end=2012&dp=1&da1=1290236400&da2=1338184800&sna=1&aut=&frm=&tar=&inp=f](http://xenon.colorado.edu/portal/calendar/calendar_form.php?objname=date1&selected_day=1&selected_month=1&selected_year=2012&year_start=2010&year_end=2012&dp=1&da1=1290236400&da2=1338184800&sna=1&aut=&frm=&tar=&inp=&fmt=j)˚FY'DIS = PR1 = PR2＆=＆PRV =＆PTH =日历/＆SPD = [[1290409200,1291705200,1291618800,1293087600,1290754800,1293346800,1292137200,1291791600,1293174000,1291186800,1290582000,1290236400,1292310000,1291359600,1292482800,1290927600,1293519600 ，1292828400,1293606000,1291878000,1293433200,1290495600,1292655600,1291100400,1291964400,1292742000,1292050800,1293778800,1290668400,1290322800,1292396400,1291273200,1291532400,1293001200,1292569200,1290841200,1291446000,1292914800,1293692400,1293260400,1292223600,1291014000 ，1298098800,1321945200,1303452000,1299222000,1303711200,1301032800,1302501600,1323241200,1299394800,1323154800,1320300000,1300600800,1302328800,1302588000,1296370800,1297234800,1296802800,1299308400,1301983200,1300341600,1324623600,1295593200,1302760800,1296975600,1304143200 ,1320649200,1294383600,1320213600,1296198000,1301119200,1296630000,1300773600,1296889200,1297926000,1301464800,1322290800,1294815600,1320994800,1324882800,1323673200,1298617200,1320386400,1320735600,1298530800,1298703600,1323327600,1297062000,1299567600,1301551200,1299913200,1324710000,1297753200,1303884000,1304488800， 1299049200,1296457200,1322722800,1320472800,1300428000,1322118000,1302069600,1321772400,1301378400,1297321200,1323846000,1298271600,1301292000,1322895600,1298444400,1303192800,1297839600,1324018800,1322463600,1295938800,1325055600,1321513200,1294988400,1301896800,1324364400， 1321254000,1325142000,1302933600,1298962800,1323414000,1301205600,1324969200,1322031600,1294642800,1303538400,1294297200,1298185200,1324191600,1295420400,1294210800,1321167600,1298358000,1322636400,1294902000,1301637600,1296025200,1320559200,1295247600,1294470000,1323500400， 1324278000,1299654000,1323586800,1297407600,1325314800,1302156000,1294038000,1322204400,1317967200,1303279200,1320908400,1300687200,1321599600,1295074800,1299135600,1298876400,1299826800,1303624800,1321858800,1323932400,1304316000,1295766000,1321340400,1296716400,1301724000,1293951600,1299740400,1300082400， 1295506800,1296284400,1296111600,1304229600,1322809200,1295161200,1294729200,1299481200,1293865200,1297580400,1300514400,1302415200,1323068400,1295334000,1303797600,1298790000,1324537200,1300860000,1303106400,1302674400,1297494000,1321426800,1303020000,1295679600,1297666800， 1302847200,1300946400,1324105200,1322377200,1322982000,1298012400,1321081200,1301810400,1319695200,1303970400,1294556400,1324450800,1325228400,1294124400,1295852400,1324796400,1299999600,1296543600,1303365600,1300168800,1320822000,1323759600,1321686000,1297148400,1300255200， 1322550000,1329634800,1336284000,1335074400,1330498800,1330844400,1335333600,1332655200,1334124000,1331017200,1338184800,1332223200,1333951200,1334210400,1327906800,1328770800,1328338800,1330930800,1333605600,1331964000,1327129200,1334383200,1328511600,1335765600,1325919600,1327734000,1332741600,1325401200， 1328166000,1332396000,1328425200,1329462000,1333087200,1337925600,1326351600,1330153200,1330066800,1330239600,1336197600,1328598000,1331190000,1333173600,1331532000,1329289200,1335506400,1336111200,1330671600,1327993200,1332050400,1333692000,1333000800,1328857200,1329807600， 1332914400,1329980400,1334815200,1329375600,1327474800,1335679200,1326524400,1333519200,1334556000,1330585200,1332828000,1326178800,1335160800,1325833200,1329721200,1326956400,1325746800,1329894000,1326438000,1336024800,1333260000,1327561200,1333864800,1326783600,1326006000， 1331276400,1328943600,1333778400,1325574000,1336370400,1334901600,1332309600,1326610800,1330758000,1330412400,1331449200,1335247200,1335938400,1327302000,1338098400,1328252400,1333346400,1325487600,1336543200,1331362800,1331704800,1327042800,1327820400,1327647600,1335852000,1326697200,1326265200,1331103600， 1329116400,1332136800,1334037600,1326870000,1335420000,1330326000,1332482400,1334728800,1334296800,1329030000,1334642400,1327215600,1329202800,1336456800,1334469600,1332568800,1329548400,1333432800,1335592800,1326092400,1325660400,1327388400,1331618400,1328079600,1334988000， 1331791200,1328684400,1331877600],[],[]]&spt=1&och=phpCal%28%29&str=0&rtl=0&wks=&int=1&hid=1&hdt=1000&hl=en_US1336543200,1331362800,1331704800,1327042800,1327820400,1327647600,1335852000,1326697200,1326265200,1331103600,1329116400,1332136800,1334037600,1326870000,1335420000,1330326000,1332482400,1334728800,1334296800,1329030000,1334642400,1327215600,1329202800,1336456800,1334469600， 1332568800,1329548400,1333432800,1335592800,1326092400,1325660400,1327388400,1331618400,1328079600,1334988000,1331791200,1328684400,1331877600]，[]，[]]＆SPT = 1＆OCH = phpCal％28％29＆STR = 0＆RTL = 0＆周= INT = 1＆HID =1&hdt=1000&hl=zh_CN1336543200,1331362800,1331704800,1327042800,1327820400,1327647600,1335852000,1326697200,1326265200,1331103600,1329116400,1332136800,1334037600,1326870000,1335420000,1330326000,1332482400,1334728800,1334296800,1329030000,1334642400,1327215600,1329202800,1336456800,1334469600， 1332568800,1329548400,1333432800,1335592800,1326092400,1325660400,1327388400,1331618400,1328079600,1334988000,1331791200,1328684400,1331877600]，[]，[]]＆SPT = 1＆OCH = phpCal％28％29＆STR = 0＆RTL = 0＆周= INT = 1＆HID =1&hdt=1000&hl=zh_CN1325660400,1327388,1328079600,1334988000,1331791200,1328684400,1331877600,1331877600,1331877600]和SPT = 1＆Och = PHPCAL％28％29＆RTR = 0＆RTL = 0＆WKS = 1＆HID = 1＆HDT = 1000＆HL = EN_US1325660400,1327388,1328079600,1334988000,1331791200,1328684400,1331877600,1331877600,1331877600]和SPT = 1＆Och = PHPCAL％28％29＆RTR = 0＆RTL = 0＆WKS = 1＆HID = 1＆HDT = 1000＆HL = EN_US

那是4282个字符。IE 的 src 属性的最大长度为 2,083 个字符。因此带有日期选择器的 iframe 仍然为空.. 所以我必须解决这个问题......

# php - 使用 shopify webhook 行项目的 XML 解析器

> ID：12503492
> 
> 赞同：2
> 
> 时间：2012-09-19T21:56:26.857
> 
> 标签：php, xml, shopify

我正在使用 shopify webhook 在订单更新时更新我的​​ sql server 的“数量”字段，下面是我的 php 代码

```
?php
$xmlData = fopen('php://input' , 'rb'); 
while (!feof($xmlData)) { $xmlString .= fread($xmlData, 4096); }
fclose($xmlData);
$xml = new SimplexmlElement($xmlString);

file_put_contents('orders/order' . '.xml', $xmlString);

$dom = new DomDocument();

$dom->load('orders/order.xml');

$itemList = $dom->getElementsByTagName('line-item');
foreach($itemList as $item) {
  $sku='';
  $qty='';
  foreach($item->childNodes as $child) {
    if ($child->localName == 'sku') {
      $sku = $child->textContent;
    }
    if ($child->localName == 'quantity') {
      $qty = $child->textContent;
    }
  }
  mysql_connect ("?????????????????????????");
mysql_select_db("??????????");

$query = "UPDATE xcart_categories SET product_count = product_count - $qty WHERE description='$sku';";

mysql_query($query);
} 
```

下面是我从 shopify webhook 获取的 xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<order>
  <buyer-accepts-marketing type="boolean">true</buyer-accepts-marketing>
  <closed-at type="datetime" nil="true"></closed-at>
  <currency>USD</currency>
  <email>yeongju_l@yahoo.com</email>
  <financial-status>pending</financial-status>
  <fulfillment-status>fulfilled</fulfillment-status>
  <gateway>Local Pick-Up</gateway>
  <id type="integer">140303247</id>
  <name>#1012</name>
  <note></note>
  <number type="integer">12</number>
  <subtotal-price type="decimal">0.2</subtotal-price>
  <taxes-included type="boolean">false</taxes-included>
  <total-discounts type="decimal">0.0</total-discounts>
  <total-line-items-price type="decimal">0.2</total-line-items-price>
  <total-price type="decimal">0.2</total-price>
  <total-price-usd type="decimal">0.2</total-price-usd>
  <total-tax type="decimal">0.0</total-tax>
  <total-weight type="integer">0</total-weight>
  <updated-at type="datetime">2012-09-16T21:20:07-04:00</updated-at>
  <created-at type="datetime">2012-09-16T21:08:30-04:00</created-at>
  <token>dcf523d93c68159c15a7c8d1fabbee07</token>
  <landing-site>/products/test</landing-site>
  <referring-site></referring-site>
  <cancelled-at type="datetime" nil="true"></cancelled-at>
  <cancel-reason nil="true"></cancel-reason>
  <cart-token>a9a7bc5d8103f6a3bb45e827f0cb8928</cart-token>
  <browser-ip nil="true"></browser-ip>
  <landing-site-ref nil="true"></landing-site-ref>
  <order-number type="integer">1012</order-number>
  <discount-codes type="array"/>
  <note-attributes type="array">
  </note-attributes>
  <processing-method>manual</processing-method>
  <line-items type="array">
    <line-item>
      <id type="integer">228531213</id>
      <requires-shipping type="boolean">false</requires-shipping>
      <fulfillment-service>manual</fulfillment-service>
      <grams type="integer">0</grams>
      <price type="decimal">0.2</price>
      <quantity type="integer">1</quantity>
      <sku>1234567</sku>
      <title>test</title>
      <product-id type="integer">104663831</product-id>
      <variant-id type="integer">240660979</variant-id>
      <vendor>5 Second</vendor>
      <variant-title nil="true"></variant-title>
      <fulfillment-status>fulfilled</fulfillment-status>
      <name>test</name>
      <variant-inventory-management></variant-inventory-management>
      <properties type="array">
      </properties>
    </line-item>
  </line-items>
  <shipping-lines type="array"/>
  <tax-lines type="array">
    <tax-line>
      <title>NY State Tax</title>
      <price type="decimal">0.0</price>
      <rate type="float">0.04</rate>
    </tax-line>
    <tax-line>
      <title>Queens County Tax</title>
      <price type="decimal">0.0</price>
      <rate type="float">0.04875</rate>
    </tax-line>
  </tax-lines>
  <billing-address>
    <first-name>Yeongju</first-name>
    <last-name>Lee</last-name>
    <address1>14809 northern blvd</address1>
    <address2></address2>
    <city>Flushing</city>
    <company></company>
    <country>United States</country>
    <phone></phone>
    <province>New York</province>
    <zip>11354</zip>
    <latitude type="decimal">40.76529</latitude>
    <longitude type="decimal">-73.81831</longitude>
    <name>Yeongju Lee</name>
    <country-code>US</country-code>
    <province-code>NY</province-code>
  </billing-address>
  <fulfillments type="array">
    <fulfillment>
      <id type="integer">67712419</id>
      <order-id type="integer">140303247</order-id>
      <created-at type="datetime">2012-09-16T21:20:07-04:00</created-at>
      <updated-at type="datetime">2012-09-16T21:20:07-04:00</updated-at>
      <tracking-number nil="true"></tracking-number>
      <tracking-company nil="true"></tracking-company>
      <status>success</status>
      <service>manual</service>
      <tracking-url>http://www.google.com/search?q=</tracking-url>
      <receipt>
      </receipt>
      <line-items type="array">
        <line-item>
          <id type="integer">228531213</id>
          <requires-shipping type="boolean">false</requires-shipping>
          <fulfillment-service>manual</fulfillment-service>
          <grams type="integer">0</grams>
          <price type="decimal">0.2</price>
          <quantity type="integer">1</quantity>
          <sku>1234567</sku>
          <title>test</title>
          <product-id type="integer">104663831</product-id>
          <variant-id type="integer">240660979</variant-id>
          <vendor>5 Second</vendor>
          <variant-title nil="true"></variant-title>
          <fulfillment-status>fulfilled</fulfillment-status>
          <name>test</name>
          <variant-inventory-management></variant-inventory-management>
          <properties type="array">
          </properties>
        </line-item>
      </line-items>
    </fulfillment>
  </fulfillments>
  <customer>
    <id type="integer">96489088</id>
    <email>yeongju_l@yahoo.com</email>
    <accepts-marketing type="boolean">true</accepts-marketing>
    <first-name>Yeongju</first-name>
    <last-name>Lee</last-name>
    <orders-count type="integer">12</orders-count>
    <total-spent type="decimal">16.26</total-spent>
    <note nil="true"></note>
    <created-at type="datetime">2012-08-17T11:31:50-04:00</created-at>
    <updated-at type="datetime">2012-09-16T21:20:07-04:00</updated-at>
    <state>enabled</state>
    <last-order-id type="integer">140303509</last-order-id>
    <tags>C</tags>
    <last-order-name>#1013</last-order-name>
  </customer> 
```

就像您看到的那样，由于重复的行项目，我得到了两个 sku 和数量，例如，当客户订购一个“产品名称 - 在这种情况下进行测试时，我在我的 sql server sku 测试字段中得到了“-2”数量更新，但是当我在创建订单时使用 webhook 事件它起作用我的意思是我只看到一个订单项，但所有其他情况（订单更新时、订单付款时、订单完成时......）即使我认为只订购了一件商品，也会向我显示重复的订单项我正在严重解析我的 XML 任何能教我正确代码以从第一个 line-items 节点中提取“line items”的人，我将非常感激！再次感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:20:26.710

您正在执行大量冗余步骤来在那里解析您的 XML。您不需要在处理数据之前将其保存到文件中，并且您对未使用的 SimpleXML 进行了杂散调用。你只需要这样：

```
$xmlString = file_get_contents('php://input');
$dom = new DomDocument();
$dom->loadXML($xmlString); 
```

之后，您的解析逻辑看起来不错**，但**您只运行一个 SQL 查询，其中包含一个 SKU。

在循环内部`foreach`，您定义变量`$sku`and `$qty`，但在循环内部不对它们执行任何操作。因此，下一次循环时，您将覆盖它们的值，而对旧值一无所知。

有几种方法可以做到这一点：

*   在循环内运行 SQL（效率不高）
*   建立一个 SKU 和数量数组 ( `$sku[] = ...; $qty[] = ...;`)，然后从这些数组构建你的 SQL
*   稍微整洁，构建一个单一的数组，其中 SKU 数量对作为嵌套数组 ( `$sku_list[] = array('sku' => ..., 'qty' => ...)`)
*   在循环 ( `$sql .= '...'`) 内逐步构建您的 SQL 字符串并在最后执行一次

# javascript - 修复在流体容器网格中将最后一行元素居中对齐，而容器保持居中

> ID：12503497
> 
> 赞同：4
> 
> 时间：2012-09-19T21:57:06.597
> 
> 标签：javascript, html, css

我无法在流体容器内左对齐“ul”元素的最后一行。我让容器与页面正确居中，但当最后一行元素未完全填充时，它最终居中。似乎无法弄清楚解决方案。

我在核心使用 Twitter Bootstrap，外部 div 使用 container-fluid。并将列表元素居中，如下所示：

```
ul {
    text-align: center;
    list-style:none;
}

ul li {
    display: inline-block;
} 
```

我试过使用 text-align: justify and centering the div with margins 但它似乎并没有随着页面大小的调整而移动。建议？

这是正在发生的事情的两个屏幕截图：

![在此处输入图像描述](../Images/8238e3ed7cbd5891e74c555ad15b415e.png)

![在此处输入图像描述](../Images/12bf59eb1441e26d14480d1b2f34d9e0.png)

JS 小提琴示例：http: [//jsfiddle.net/Z9uqQ/](http://jsfiddle.net/Z9uqQ/)

最后一行应与 1 相同的垂直边缘左对齐。

![在此处输入图像描述](../Images/a2f4063952cd218abb9436e32f427da1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:33:45.840

如果我理解正确`margin: 0 auto`会这样做：

```
ul {
    width: 90%;
    margin: 0 auto;
} 
```

**演示：http:** [//jsfiddle.net/elclanrs/GdAvm/](http://jsfiddle.net/elclanrs/GdAvm/)

# javascript - window.print() 在请求页面之前打印 6 个空白页面

> ID：12503499
> 
> 赞同：0
> 
> 时间：2012-09-19T21:57:14.460
> 
> 标签：javascript, asp.net

我有一个网页，其中包含一个带有 7 个选项卡的菜单栏。菜单栏正下方是一个调用 javascript window.prin() 函数的打印按钮。但是，每次按下此按钮时，都会打印所有 7 个选项卡的页面。有什么方法可以准确指定要打印的页面吗？

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="DistEducation.aspx.vb" Inherits="Periscope.DistEducation" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>DistEducation</title>

    <%--Added the following three scripts for the TableSorter--%>
    <script type="text/javascript" src="../Scripts/jquery-1.4.1.min.js"></script>  
    <script type="text/javascript" src="../Scripts/jquery.tablesorter.min.js"></script>

    <script type="text/javascript">

        $(document).ready(function() {
            $("#grdTraining").tablesorter();
        });
        $(document).ready(function () {
            $("#grdExpTraining").tablesorter();
        });
        $(document).ready(function () {
            $("#grdProduct").tablesorter();
        });
        $(document).ready(function () {
            $("#grdExpProd").tablesorter();
        });

        function GridChanger() {
            var linker = document.getElementById("expTrainingShow");
            var grid = document.getElementById("expTraining");

            if ((grid != null) & (linker != null)) {
                if (linker.innerHTML == "+ Show Expired Continuing Education") {
                    grid.style.display = "block";
                    linker.innerHTML = "- Hide Expired Continuing Education";
                }
                else {
                    grid.style.display = "none";
                    linker.innerHTML = "+ Show Expired Continuing Education";
                }
            }

        } //end GridChanger

        function GridChangerProd() {
            var linker = document.getElementById("expProdShow");
            var grid = document.getElementById("expProd");

            if ((grid != null) & (linker != null)) {
                if (linker.innerHTML == "+ Show Expired Product Training") {
                    grid.style.display = "block";
                    linker.innerHTML = "- Hide Expired Product Training";
                }
                else {
                    grid.style.display = "none";
                    linker.innerHTML = "+ Show Expired Product Training";
                }
            }

        } //end GridChangerProd

        function doPrint() {
            window.print();
        }
    </script>

    <LINK href="../Stylesheets/Default.css" type="text/css" rel="stylesheet">
</head>
<body>
    <form id="form1" runat="server">
        <table width="100%">
            <tr>
                <td width="70%" align="left"></td>
                <td width="25%" align="right"><asp:label id="lblTime" Runat="server" CssClass="clsLabelStatus"></asp:label></td>
                <td width="5%" align="right"><input id="cmdPrint" title="Print" onclick="doPrint();" type="button" value="Print" name="cmdPrint"></td>
            </tr>
        </table>

    <div style="margin-left: 0px">
    <br />
<%--    <h2 style="background-position: center; background-color: #CCCCCC; font-family: Arial, Verdana, sans-serif; color: #000000; text-align: left; width: 100%;">Training and Continuing Education</h2>--%>
<%--        <asp:Label ID="TempMessage" runat="server" Font-Bold="True" Font-Size="Large" 
            ForeColor="Red" Text="This tab will display Agent training in the near future."></asp:Label>--%>
        <h1 class="clsSectionBar" width: 100%;" 
            style="font-size: small; height: 20px; vertical-align: middle;">Continuing Education</h1>
        <asp:Label ID="UserMessage" runat="server" Text="" CssClass="clsLabel"></asp:Label>
        <br />
        <span id="expTrainingShow" class="clsLink" style="margin-left: 20px;" runat="server" onclick="GridChanger();">
            + Show Expired Continuing Education</span>

        <div id="expTraining" style="display:none;">
            <asp:GridView 
                AllowSorting="True"
                ID="grdExpTraining" 
                runat="server" BackColor="White" BorderColor="White" 
                BorderWidth="3px" CellPadding="2" Width="98%" AutoGenerateColumns="False" 
                HorizontalAlign="Center" Font-Names="Arial" 
                style="margin-top: 0px" HeaderStyle-ForeColor="White">
                <RowStyle ForeColor="Black" />            
                <Columns>

                    <asp:BoundField DataField="StateCode" HeaderText="State" 
                        SortExpression="StateCode">
                        <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                    </asp:BoundField>

                    <asp:BoundField DataField="CourseDesc" HeaderText="Course" 
                        SortExpression="CourseDesc">
                        <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                    </asp:BoundField>

                    <asp:BoundField DataField="Hours" HeaderText="Hours" SortExpression="Hours">
                        <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                    </asp:BoundField>

                    <asp:BoundField DataField="EffectiveDate" HeaderText="Effective" 
                        SortExpression="EffectiveDate" DataFormatString="{0:d}">
                        <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                    </asp:BoundField>

                    <asp:BoundField DataField="ExpirationDate" HeaderText="Expiration" 
                        SortExpression="ExpirationDate" DataFormatString="{0:d}">
                        <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                    </asp:BoundField>

                <%--<asp:BoundField DataField="Notes" HeaderText="Notes" 
                        SortExpression="Notes">
                        <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" Width="200" />
                    </asp:BoundField> Commented out until further notice (Neal Rodruck 7/26/12)--%>

                    <asp:BoundField DataField="LastChange" HeaderText="Last Chg"
                        SortExpression="LastChange" DataFormatString="{0:d}"> 
                        <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" Width="145" />
                    </asp:BoundField>

                </Columns>
                <FooterStyle BackColor="White" ForeColor="#000066" />
                <PagerStyle BackColor="White" ForeColor="#000066" HorizontalAlign="Left" />
                <SelectedRowStyle BackColor="#669999" Font-Bold="True" ForeColor="White" />
                <HeaderStyle CssClass="clsListHeading" Font-Size="Small" />
            </asp:GridView>
        </div>

        <asp:GridView 
            AllowSorting="True"
            ID="grdTraining"  
            runat="server" BackColor="White" BorderColor="White" 
            BorderWidth="3px" CellPadding="2" Width="98%" AutoGenerateColumns="False" 
            HorizontalAlign="Center" Font-Names="Arial" 
            style="margin-top: 0px" HeaderStyle-ForeColor="White" >
            <RowStyle ForeColor="Black" />            
            <Columns>

                <asp:BoundField DataField="StateCode" HeaderText="State" 
                    SortExpression="StateCode">
                    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                </asp:BoundField>

                <asp:BoundField DataField="CourseDesc" HeaderText="Course" 
                    SortExpression="CourseDesc">
                    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                </asp:BoundField>

                <asp:BoundField DataField="Hours" HeaderText="Hours" SortExpression="Hours">
                    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                </asp:BoundField>

                <asp:BoundField DataField="EffectiveDate" HeaderText="Effective" 
                    SortExpression="EffectiveDate" DataFormatString="{0:d}">
                    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                </asp:BoundField>

                <asp:BoundField DataField="ExpirationDate" HeaderText="Expiration" 
                    SortExpression="ExpirationDate" DataFormatString="{0:d}">
                    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                </asp:BoundField>

            <%--<asp:BoundField DataField="Notes" HeaderText="Notes" 
                    SortExpression="Notes">
                    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" Width="200" />
                </asp:BoundField> Commented out until further notice (Neal Rodruck 7/26/12)--%>

                <asp:BoundField DataField="LastChange" HeaderText="Last Chg"
                    SortExpression="LastChange" DataFormatString="{0:d}"> 
                    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" Width="145" />
                </asp:BoundField>

            </Columns>
            <FooterStyle BackColor="White" ForeColor="#000066" />
            <PagerStyle BackColor="White" ForeColor="#000066" HorizontalAlign="Left" />
            <SelectedRowStyle BackColor="#669999" Font-Bold="True" ForeColor="White" />
            <HeaderStyle CssClass="clsListHeading" Font-Size="Small" />
        </asp:GridView>
        <br />
        <h1 class="clsSectionBar" width: 100%;" 
            style="font-size: small; height: 20px; vertical-align: middle;" 
            id="prodInfo" >Product Training</h1>
        <asp:Label ID="ProductMessage" runat="server" Text=""></asp:Label>
        <br />

                <span id="expProdShow" class="clsLink" style="margin-left: 20px;" runat="server" onclick="GridChangerProd();">
            + Show Expired Product Training</span>

        <div id="expProd" style="display:none;">
            <asp:GridView 
                AllowSorting="True"
                ID="grdExpProd"
                runat="server" BackColor="White" BorderColor="White" 
                BorderWidth="3px" CellPadding="2" Width="98%" AutoGenerateColumns="False" 
                HorizontalAlign="Center" Font-Names="Arial" 
                style="margin-top: 0px" HeaderStyle-ForeColor="White">
                <RowStyle ForeColor="Black" />            
                <Columns>

                    <asp:BoundField DataField="Partner" HeaderText="Partner"
                        SortExpression="Partner">
                        <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                    </asp:BoundField>

                    <asp:BoundField DataField="ProductDesc" HeaderText="Product"
                        SortExpression ="ProductDesc">
                        <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                    </asp:BoundField>

                    <asp:BoundField DataField="DateTaken" HeaderText="Date Taken" 
                        SortExpression="DateTaken" DataFormatString="{0:d}">
                        <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                    </asp:BoundField>

                    <asp:BoundField DataField="DateExpired" HeaderText="Date Expired" 
                        SortExpression="DateExpired" DataFormatString="{0:d}">
                        <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                    </asp:BoundField>

                    <asp:BoundField DataField="CourseDesc" HeaderText="Course"
                        SortExpression="CourseDesc">
                        <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                    </asp:BoundField>

                    <asp:BoundField DataField="Status" HeaderText="Status" 
                        SortExpression="Status" >
                        <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                    </asp:BoundField>

                </Columns>
                <FooterStyle BackColor="White" ForeColor="#000066" />
                <PagerStyle BackColor="White" ForeColor="#000066" HorizontalAlign="Left" />
                <SelectedRowStyle BackColor="#669999" Font-Bold="True" ForeColor="White" />
                <HeaderStyle CssClass="clsListHeading" Font-Size="Small" />
            </asp:GridView></div>

        <asp:GridView 
            AllowSorting="True"
            ID="grdProduct"  
            runat="server" BackColor="White" BorderColor="White" 
            BorderWidth="3px" CellPadding="2" Width="98%" AutoGenerateColumns="False" 
            HorizontalAlign="Center" Font-Names="Arial" 
            style="margin-top: 0px" HeaderStyle-ForeColor="White" >
            <RowStyle ForeColor="Black" />
            <Columns>

                <asp:BoundField DataField="Partner" HeaderText="Partner"
                    SortExpression="Partner">
                    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                </asp:BoundField>

                <asp:BoundField DataField="ProductDesc" HeaderText="Product"
                    SortExpression ="ProductDesc">
                    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                </asp:BoundField>

                <asp:BoundField DataField="DateTaken" HeaderText="Date Taken" 
                    SortExpression="DateTaken" DataFormatString="{0:d}">
                    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                </asp:BoundField>

                <asp:BoundField DataField="DateExpired" HeaderText="Date Expired" 
                    SortExpression="DateExpired" DataFormatString="{0:d}">
                    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                </asp:BoundField>

                <asp:BoundField DataField="CourseDesc" HeaderText="Course"
                    SortExpression="CourseDesc">
                    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                </asp:BoundField>

                <asp:BoundField DataField="Status" HeaderText="Status" 
                    SortExpression="Status" >
                    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" Font-Size="Small" />
                </asp:BoundField>

            </Columns>
            <FooterStyle BackColor="White" ForeColor="#000066" />
            <PagerStyle BackColor="White" ForeColor="#000066" HorizontalAlign="Left" />
            <SelectedRowStyle BackColor="#669999" Font-Bold="True" ForeColor="White" />
            <HeaderStyle CssClass="clsListHeading" Font-Size="Small" />
        </asp:GridView>
         &nbsp;&nbsp;&nbsp;&nbsp;</div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:25:58.603

在我的应用程序中，我使用弹出窗口来打印页面的一部分。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#printButton').click(function () {
            PrintElement($('#mainContent'));
        });
    });

    var PrintElement = function (element) {
        Popup($(element).html());
    }
    var Popup = function (data) {
        var mywindow = window.open('', 'print_div', 'resizable=1,scrollbars=1,height=400,width=600');
        mywindow.document.write('<html><head><title>Print Window</title><link href="../../Includes/Styles/Global.css" type="text/css" rel="Stylesheet" />');
        mywindow.document.write('</head><body><div id="mainMasterDiv">');
        mywindow.document.write(data);
        mywindow.document.getElementById("printButton").style.display = "none";
        mywindow.document.write('</div></body></html>');
        mywindow.document.close();
        mywindow.print();
        return true;
    }
</script> 
```

一旦用户单击打印按钮，我将 resultDetailsDiv 传递给 PrintElement 函数，该函数会打开一个具有相同内容的弹出窗口，打印并关闭它。只有我必须使用 javascript 包含 css 来维护 div 内容的布局和样式。Popup 函数是用 Javascript 编写的，你可以尝试用 Jquery 编写函数，这样可以减少你的代码行。

printButton 是打印的按钮，mainContent 是包含要打印的内容的 div。

# web-services - SpringMVC Restful Web 服务

> ID：12503507
> 
> 赞同：1
> 
> 时间：2012-09-19T21:58:15.017
> 
> 标签：web-services, spring, rest, spring-mvc, jdbc

我正在尝试构建一个 RESTFUL Web 服务，但是在我的代码下出现错误：

**jsp**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>

    <style>
        <%@ include file="../css/forms.css" %>
    </style>
    <script type="text/javascript">
        <%@ include file="../js/off_reg.js"%>

        $(document).ready(function(){

            $('#userName').blur(function(evt){

                CheckAvailability();                    
            });
        });         

        function CheckAvailability(){

            $.ajax( {
                  type:'GET', //Could be 'get' depending on your needs
                  url:'validateUserName.htm',
                  data:{userName:$('#userName').val()},
                  dataType: 'json',
                  success:function(data) {
                    alert(data);
                  }
                });

    }

    </script> 
```

**道**

```
public boolean OfficerExist(String userName){

    try{

        logger.debug("About to check if officers existing");

        String sql = "SELECT userName FROM crimetrack.tblofficers WHERE userName = ?";

        logger.info("at this point 1");

        //String dbUserName = (String)results.get("userName");

        String dbUserName = (String)getJdbcTemplate().queryForObject(sql, new Object[]{userName},String.class);

        logger.info("after JdbcTemplate");

        if (dbUserName.equals(userName)) {

            logger.info("User Name Exists");
            return true;

        }else{
            logger.info("User Name Does NOT Exists");
            return false;
        }

    }catch(Exception e){

        logger.info(e.getMessage());
        return false;
    }
} 
```

**FireBug 控制台错误：**

```
GET http://localhost:8084/crimeTrack/validateUserName.htm?userName=hello

500 Internal Server Error
    70ms    
jquery.min.js (line 2)

"NetworkError: 500 Internal Server Error - http://localhost:8084/crimeTrack            /validateUserName.htm?userName=hello" 
```

**汤姆猫错误日志：**

```
 com.crimetrack.web.OfficerRegistrationController.validateUserName(java.lang.String,com.crimetrack.business.Officers,org.springframework.validation.BindingResult,org.springframework.ui.ModelMap) throws java.lang.Exception
306270 [http-8084-1] DEBUG com.crimetrack.web.OfficerRegistrationController  - Inside Controller validateUserName
306270 [http-8084-1] DEBUG com.crimetrack.web.OfficerRegistrationController  - The user name that came in is hello
306270 [http-8084-1] INFO  com.crimetrack.service.ValidateUserNameManager  - Inside Do UserNameExist
306270 [http-8084-1] DEBUG com.crimetrack.jdbc.JdbcOfficersDAO  - About to check if officers existing
306270 [http-8084-1] INFO  com.crimetrack.jdbc.JdbcOfficersDAO  - User Name Found 1
306270 [http-8084-1] INFO  com.crimetrack.jdbc.JdbcOfficersDAO  - User Name Found 2
306270 [http-8084-1] DEBUG org.springframework.jdbc.core.JdbcTemplate  - Executing prepared SQL query
306270 [http-8084-1] DEBUG org.springframework.jdbc.core.JdbcTemplate  - Executing prepared SQL statement [SELECT userName FROM crimetrack.tblofficers WHERE userName = ?]
306270 [http-8084-1] DEBUG org.springframework.jdbc.datasource.DataSourceUtils  - Fetching JDBC Connection from DataSource
306285 [http-8084-1] DEBUG org.springframework.jdbc.core.StatementCreatorUtils  - Setting SQL statement parameter value: column index 1, parameter value [hello], value class [java.lang.String], SQL type unknown
306289 [http-8084-1] DEBUG org.springframework.jdbc.datasource.DataSourceUtils  - Returning JDBC Connection to DataSource
306289 [http-8084-1] INFO  com.crimetrack.jdbc.JdbcOfficersDAO  - Incorrect result size: expected 1, actual 0
306289 [http-8084-1] DEBUG org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver  - Resolving exception from handler [com.crimetrack.web.OfficerRegistrationController@a32cdd]: java.lang.IllegalArgumentException: Invalid handler method return value: false
306289 [http-8084-1] DEBUG org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver  - Resolving exception from handler [com.crimetrack.web.OfficerRegistrationController@a32cdd]: java.lang.IllegalArgumentException: Invalid handler method return value: false
306289 [http-8084-1] DEBUG org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver  - Resolving exception from handler [com.crimetrack.web.OfficerRegistrationController@a32cdd]: java.lang.IllegalArgumentException: Invalid handler method return value: false
306290 [http-8084-1] DEBUG org.springframework.web.servlet.DispatcherServlet  - Cleared thread-bound request context: org.apache.catalina.connector.RequestFacade@1cbab62
306290 [http-8084-1] DEBUG org.springframework.web.servlet.DispatcherServlet  - Could not complete request
java.lang.IllegalArgumentException: Invalid handler method return value: false
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter$ServletHandlerMethodInvoker.getModelAndView(AnnotationMethodHandlerAdapter.java:971)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:438)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
306290 [http-8084-1] DEBUG org.springframework.web.context.support.XmlWebApplicationContext  - Publishing event in WebApplicationContext for namespace 'crimetrack-servlet': ServletRequestHandledEvent: url=[/crimeTrack/validateUserName.htm]; client=[127.0.0.1]; method=[GET]; servlet=[crimetrack]; session=[null]; user=[null]; time=[28ms]; status=[failed: java.lang.IllegalArgumentException: Invalid handler method return value: false]
306290 [http-8084-1] DEBUG org.springframework.web.context.support.XmlWebApplicationContext  - Publishing event in Root WebApplicationContext: ServletRequestHandledEvent: url=[/crimeTrack/validateUserName.htm]; client=[127.0.0.1]; method=[GET]; servlet=[crimetrack]; session=[null]; user=[null]; time=[28ms]; status=[failed: java.lang.IllegalArgumentException: Invalid handler method return value: false] 
```

**官员注册控制器**

```
package com.crimetrack.web;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.validation.Valid;

import org.apache.log4j.Logger;
import org.springframework.beans.propertyeditors.CustomDateEditor;
import org.springframework.beans.propertyeditors.StringTrimmerEditor;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.ui.ModelMap;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.WebDataBinder;
import org.springframework.web.bind.annotation.InitBinder;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.servlet.ModelAndView;

import com.crimetrack.business.Login;
import com.crimetrack.business.Officers;
import com.crimetrack.service.DivisionManager;
import com.crimetrack.service.GenderManager;
import com.crimetrack.service.OfficerRegistrationValidation;
import com.crimetrack.service.PositionManager;
import com.crimetrack.service.ValidateUserNameManager;

@Controller
public class OfficerRegistrationController {

    private final Logger logger = Logger.getLogger(getClass());
    private DivisionManager divisionManager;
    private PositionManager positionManager;
    private GenderManager genderManager;
    private Officers officer = new Officers();

    private ValidateUserNameManager validateUserNameManager;

    Map<String, Object> myDivision = new HashMap<String, Object>();
    Map<String, Object> myPosition = new HashMap<String, Object>();
    Map<String, Object> myGender = new HashMap<String, Object>();

    OfficerRegistrationValidation validateData = new OfficerRegistrationValidation();

    @InitBinder("officers")
    protected void initBinder(WebDataBinder binder){
        //removes white spaces 
        binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));

        //formats date 
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

        //By passing true this will convert empty strings to null
        binder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, true));
        dateFormat.setLenient(false);

        binder.setValidator(new OfficerRegistrationValidation());

    }

     @RequestMapping(value="officer_registration.htm", method = RequestMethod.GET)
        public ModelAndView loadPage(HttpServletRequest request,
                HttpServletResponse response,@ModelAttribute Officers officer, BindingResult result, ModelMap m, Model model) throws Exception {     

         try{            

             logger.debug("In Http method for OfficerRegistrationController");

                myDivision.put("divisionList", this.divisionManager.getDivisions());

                myPosition.put("positionList", this.positionManager.getPositionList());

                myGender.put("genderList", this.genderManager.getGenderList());

                model.addAttribute("division", myDivision);
                model.addAttribute("position", myPosition);
                model.addAttribute("gender", myGender);

             return new ModelAndView("officer_registration");            

         }catch(Exception e){

            request.setAttribute("error",e.getMessage());
            return new ModelAndView("error_page");           
         }       
     }

     @RequestMapping(value="officer_registration.htm", method=RequestMethod.POST)
     public ModelAndView handleRequest(@Valid @ModelAttribute Officers officer, BindingResult result, ModelMap m, Model model)throws Exception{

         if(result.hasErrors()){

             model.addAttribute("division", myDivision);
             model.addAttribute("position", myPosition);
             model.addAttribute("gender", myGender);
             return new ModelAndView("officer_registration");

        }else{

            return null;
        }   

     }

     @RequestMapping(value="validateUserName.htm", method=RequestMethod.GET)
     public boolean validateUserName(@RequestParam String userName, @ModelAttribute Officers officer, BindingResult result, ModelMap m)throws Exception{

         try{

             logger.debug("Inside Controller validateUserName");
             logger.debug("The user name that came in is " + userName);

            if (validateUserNameManager.DoesUserNameExist(userName)== true){

                 return true;
             }

                 return false; 

            // return true;

         }catch(Exception e){

             logger.debug("Error in validateUserName Controller " + e.getMessage());
             return false;

         }

     }

     public void setDivisionManager(DivisionManager divisionManager){

         this.divisionManager = divisionManager;
     }

     public void setPositionManager(PositionManager positionManager){

         this.positionManager = positionManager;

     }

     public void setGenderManager(GenderManager genderManager){

         this.genderManager = genderManager;
     }

    /**
     * @return the validateUserNameManager
     */
    public ValidateUserNameManager getValidateUserNameManager() {
        return validateUserNameManager;
    }

    /**
     * @param validateUserNameManager the validateUserNameManager to set
     */
    public void setValidateUserNameManager(
            ValidateUserNameManager validateUserNameManager) {
        this.validateUserNameManager = validateUserNameManager;
    }

    /**
     * @return the officer
     */
    public Officers getOfficer() {
        return officer;
    }

    /**
     * @param officer the officer to set
     */
    public void setOfficer(Officers officer) {
        this.officer = officer;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:38:17.070

根据 Spring 的`@RequestMapping`文档：

> 任何其他返回类型将被视为向视图公开的单个模型属性，使用在方法级别通过 ModelAttribute 指定的属性名称（或基于返回类型的类名称的默认属性名称）。该模型将隐含地丰富命令对象和 ModelAttribute 注释的参考数据访问器方法的结果。

因为这个方法在一个官员对象上有 ModelAttribute 注释，所以返回类型应该是一个官员对象。

您可能希望此方法返回 void，并自己写入响应对象。（为此，您需要在方法中添加一个 HttpServletResponse 参数。）

或者，您可以返回 JSON 视图。见[spring：从控制器返回 JSON 作为 ModelAndVIew](https://stackoverflow.com/questions/6173093/spring-return-json-from-controller-as-modelandview)

例如：

```
public View validateUserName(@RequestParam String userName, ModelMap m) {

    // Do validation

    m.addAttribute("isValid", validationResult);

    return new MappingJacksonJsonView();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:53:04.937

看来您正在运行此查询：

```
SELECT userName FROM crimetrack.tblofficers WHERE userName = 'hello' 
```

查询运行成功，但是表中没有匹配的记录`userName = 'hello'`，所以返回一个空的结果集。然后创建官员失败，因为没有要创建的官员并且没有处理该条件。

独立运行查询并确认没有这样的记录。然后查看您的映射代码，看看应该如何处理这种情况。

跟进... [JdbcTemplate.queryForObject](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/jdbc/core/JdbcTemplate.html#queryForObject%28java.lang.String,%20java.lang.Class%29)状态的java文档：

> 此方法对于运行具有已知结果的静态 SQL 很有用。该查询预计为单行/单列查询；返回的结果会直接映射到对应的对象类型。
> 
> ...
> 
> 抛出：IncorrectResultSizeDataAccessException - 如果查询没有准确返回一行，或者没有准确返回该行中的一列

因此，如果您不确定数据库中的记录，则不应调用它，否则该行：

```
String dbUserName = (String)getJdbcTemplate().queryForObject(sql, new Object[]{userName},String.class); 
```

需要用 try-catch 包装来处理这种情况。

# jquery - 激活另一个切换时取消切换？

> ID：12503521
> 
> 赞同：0
> 
> 时间：2012-09-19T21:59:39.950
> 
> 标签：jquery, jquery-animate, height, toggle, opacity

我在使用一些简单的代码时遇到了（可能是不必要的）麻烦。我有 3 张图片，当点击打开下面的三个 div 之一时。我只是希望能够取消任何以前打开的 div 上的切换，以便在任何给定时间只能打开一个。

目前，问题是当第二次单击其中一个按钮时，没有任何反应，因为它取消了切换，而不是打开了 div。正如您可能从我糟糕的措辞中看出的那样，我对此很陌生，所以请善待！

设置 css 以使 div 的高度和不透明度从 0 开始。

代码：

```
$(document).ready(function() {
    $("#picone").toggle(function() {
        $("#divone").animate({
            height: 400,
            opacity: 1
        }, 500);
        $("#divtwo, #divthree").animate({
            height: 0,
            opacity: 0
        }, 500);
    }, function() {
        $("#divone").animate({
            height: 0,
            opacity: 0
        }, 500);
        $("#divtwo, #divthree").animate({
            height: 0,
            opacity: 0
        }, 500);
    });
});

$(document).ready(function() {
    $("#pictwo").toggle(function() {
        $("#divtwo").animate({
            height: 400,
            opacity: 1
        }, 500);
        $("#divone, #divthree").animate({
            height: 0,
            opacity: 0
        }, 500);
    }, function() {
        $("#divtwo").animate({
            height: 0,
            opacity: 0
        }, 500);
        $("#divone, #divthree").animate({
            height: 0,
            opacity: 0
        }, 500);
    });
});

$(document).ready(function() {
    $("#picthree").toggle(function() {
        $("#divthree").animate({
            height: 400,
            opacity: 1
        }, 500);
        $("#divone, #divtwo").animate({
            height: 0,
            opacity: 0
        }, 500);
    }, function() {
        $("#divthree").animate({
            height: 0,
            opacity: 0
        }, 500);
        $("#divone, #divtwo").animate({
            height: 0,
            opacity: 0
        }, 500);
    });
}); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:10:49.333

谢谢你们的反馈。

事实证明，切换功能并不是我想要的。我删除了多余的

> $(文档).ready(函数(){

就像@hsalama 建议的那样，并将

> .toggle

@François Wahl 建议的活动。

结果是这样的：

```
$(document).ready(function(){
    $("#picone").click(function() {
        $("#divone").animate(
            {height:300, opacity:1}, 500
        );
        $("#divtwo, #divthree").animate(
            {height:0, opacity:0}, 500
        );
    });

    $("#pictwo").click(function() {
        $("#divtwo").animate(
            {height:300, opacity:1}, 500
        );
        $("#divone, #divthree").animate(
            {height:0, opacity:0}, 500
        );
    });

    $("#picthree").click(function() {
        $("#divthree").animate(
            {height:300, opacity:1}, 500
        );
        $("#divone, #divtwo").animate(
            {height:0, opacity:0}, 500
        );
    });
}); 
```

多谢你们 ：）

# asp.net-mvc - 如何将局部视图绑定到布局视图中的模型？

> ID：12503522
> 
> 赞同：0
> 
> 时间：2012-09-19T21:59:41.127
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我的 MVC4 应用程序中有一个特定部分（视图组）的布局视图，并且此布局应包含一个动态树视图，其中包含使用此布局视图的视图的导航选项。例如，我的布局视图说每个依赖视图将在左侧有一个树视图。现在，我能想到的在每个依赖视图的布局中正确加载此树视图的唯一方法是将其作为每个依赖视图中的必需部分，并为每个带有树视图视图模型的依赖视图使用公共基础视图模型。这似乎很尴尬。我还能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:10:34.697

我不确定我是否正确理解了您的问题，但我认为您正在寻找的概念被称为“儿童操作” - 请参阅MSDN 上的[RenderAction](http://msdn.microsoft.com/en-us/library/ee728607%28v=vs.108%29.aspx)。

这使您可以在概念上与`RenderPartial`您的视图中执行类似的操作，但不必将模型传递给它，而是`RenderAction`让您创建一个操作来检索模型。

这使您从需要每个局部视图的模型的视图中解放出来。

# mysql - MySQL：如何检索具有重复字段的所有行，在任何匹配行中的某个字段上匹配 LIKE

> ID：12503525
> 
> 赞同：2
> 
> 时间：2012-09-19T22:00:02.467
> 
> 标签：mysql

我有一个包含大约 300,000 行产品信息的数据库。
我需要检索具有**重复 UPC** (COUNT(upc) > 1) 的行，其中**至少有一个**结果描述与某个字符串匹配（例如，“Reed”。）

例如，以下行将全部被选中（desc、upc 对）

```
Deer D7394    62226173
Reed R2536    62226173
Deer D7217    62226173 
```

但没有一个

```
Deer D0173    62278389
Deer D7289    62278389
Deer D9272    62278389 
```

这是我正在使用的查询：

```
SELECT a.desc, a.upc, a.sku, a.short_description 
FROM inventory a 
JOIN 
    (SELECT upc, desc 
    FROM inventory 
    GROUP BY upc 
    HAVING COUNT(upc) > 1) b 
ON a.upc = b.upc 
WHERE ((a.desc LIKE '%Reed%') OR (b.desc LIKE '%Reed%'))
AND a.upc != '' 
AND a.upc != 0 
ORDER BY upc; 
```

我对 MySQL 比较陌生，但这似乎应该可以工作。但是，**某些**结果无法返回不匹配的行（即，将返回 Reed R2536，但不会返回 Deer D7394）。

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T23:04:02.470

当重复的数量很少时， Brian 的`group_concat`方法会起作用，但如果不是，它会默默地失败。你永远不会知道; 你只会丢失应该存在的行。

您要做的是选择至少一个描述匹配（并且存在重复项）的所有 UPC，然后从该列表中选择与这些 UPC 中的每一个匹配的所有行。

如果您按 UPC 对所有项目进行分组，那么您可以用计数注释每个项目，并标记是否有任何描述匹配：

```
SELECT upc, COUNT(*) c, MAX(`desc` LIKE '%Reed%') desc_matches
FROM inventory
GROUP BY upc 
```

（这利用了布尔运算符，如`LIKE`，实际上返回`0`false 和`1`true 的事实。取该列的最大值告诉您是否有任何行匹配）

然后，您可以根据您的条件过滤该列表，以获得您感兴趣的 UPC：

```
SELECT upc, COUNT(*) c, MAX(`desc` LIKE '%Reed%') desc_matches
FROM inventory
GROUP BY upc
HAVING desc_matches = 1 AND c > 1 
```

获得该列表后，您希望查看与这些 UPC 中的任何一个匹配的所有产品。你可以通过一个简单的（不是外部的）加入来做到这一点：

```
SELECT a.desc, a.upc, a.sku, a.short_description 
FROM inventory a 
JOIN 
    ( SELECT upc, COUNT(*) c, MAX(`desc` LIKE '%Reed%') desc_matches
      FROM inventory
      GROUP BY upc
      HAVING desc_matches = 1 AND c > 1
    ) b USING (upc) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:22:25.617

假设您没有太多重复记录，另一种可能的方法是：

```
select * from inventory i
  join (
         SELECT upc 
           FROM inventory 
            GROUP BY upc 
            HAVING COUNT(upc) > 1
              and group_concat(`desc`) like '%reed%') as available_upc 
          on available_upc.upc = i.upc 
```

这假设您的表格看起来像：

```
CREATE TABLE inventory(
  sku CHAR(32) NOT NULL,
  `desc` CHAR(32) NOT NULL,
  upc CHAR(32) NOT NULL,
  short_description CHAR(32) NOT NULL,
  PRIMARY KEY (sku)
);

insert into inventory values ('D7394','Deer','62226173','Small Deer');
insert into inventory values ('R2536','Reed','62226173','Small Reed');
insert into inventory values ('D7217','Deer','62226173','Large Deer');

insert into inventory values ('D0173','Deer','62278389','Small Deer');
insert into inventory values ('D7289','Deer','62278389','Small Reed');
insert into inventory values ('D9272','Deer','62278389','Large Deer'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T22:17:35.720

没有测试很难说，但试试：

```
SELECT a.desc, a.upc, a.sku, a.short_description 
FROM inventory a 
OUTER RIGHT JOIN 
    (SELECT upc
    FROM inventory 
    GROUP BY upc 
    HAVING COUNT(upc) > 1) b 
ON a.upc = b.upc 
WHERE ((a.desc LIKE '%Reed%') OR (b.desc LIKE '%Reed%'))
AND a.upc != '' 
AND a.upc != 0 
ORDER BY upc; 
```

关键是`OUTER RIGHT JOIN`. 请参阅文章： http: [//www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

此外，您只需要从内部`SELECT`查询返回 upc。

# java - 如何在不使用任何已弃用的类的情况下将日期从一种格式转换为另一种格式的另一种日期对象？

> ID：12503527
> 
> 赞同：57
> 
> 时间：2012-09-19T22:00:17.507
> 
> 标签：java

我想将 date1 格式的日期转换为 date2 格式的日期对象。

```
 SimpleDateFormat simpleDateFormat = new SimpleDateFormat("MMMM dd, yyyy");
    SimpleDateFormat simpleDateFormat1 = new SimpleDateFormat("yyyyMMdd");
    Calendar cal = Calendar.getInstance();
    cal.set(2012, 8, 21);
    Date date = cal.getTime();
    Date date1 = simpleDateFormat.parse(date);
    Date date2 = simpleDateFormat.parse(date1);
    println date1
    println date2 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-09-19T22:01:44.143

使用[`SimpleDateFormat#format`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#format%28java.util.Date,%20java.lang.StringBuffer,%20java.text.FieldPosition%29)：

```
DateFormat originalFormat = new SimpleDateFormat("MMMM dd, yyyy", Locale.ENGLISH);
DateFormat targetFormat = new SimpleDateFormat("yyyyMMdd");
Date date = originalFormat.parse("August 21, 2012");
String formattedDate = targetFormat.format(date);  // 20120821 
```

另请注意，它`parse`需要一个`String`，而不是一个`Date`对象，它已经被*parsed*。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-02-15T04:28:05.043

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-26T09:58:19.760

从 Java 8 开始，我们可以通过以下方式实现：

```
private static String convertDate(String strDate) 
{
    //for strdate = 2017 July 25

    DateTimeFormatter f = new DateTimeFormatterBuilder().appendPattern("yyyy MMMM dd")
                                        .toFormatter();

    LocalDate parsedDate = LocalDate.parse(strDate, f);
    DateTimeFormatter f2 = DateTimeFormatter.ofPattern("MM/d/yyyy");

    String newDate = parsedDate.format(f2);

    return newDate;
} 
```

输出将是：“07/25/2017”

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-10T17:16:40.223

# 试试这个

这是将一种日期格式更改为另一种日期格式的最简单方法

```
public String changeDateFormatFromAnother(String date){
    @SuppressLint("SimpleDateFormat") DateFormat inputFormat = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
    @SuppressLint("SimpleDateFormat") DateFormat outputFormat = new SimpleDateFormat("dd MMMM yyyy");
    String resultDate = "";
    try {
        resultDate=outputFormat.format(inputFormat.parse(date));
    } catch (ParseException e) {
        e.printStackTrace();
    }
    return resultDate;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-05T09:05:26.230

请参考以下方法。它将您的日期字符串作为参数1，您需要将日期的现有格式指定为参数2，并将结果（预期）格式指定为参数3。

请参阅此链接以了解各种格式： [可用的日期格式](http://www.tutorialspoint.com/java/java_date_time.htm)

```
public static String formatDateFromOnetoAnother(String date,String givenformat,String resultformat) {

    String result = "";
    SimpleDateFormat sdf;
    SimpleDateFormat sdf1;

    try {
        sdf = new SimpleDateFormat(givenformat);
        sdf1 = new SimpleDateFormat(resultformat);
        result = sdf1.format(sdf.parse(date));
    }
    catch(Exception e) {
        e.printStackTrace();
        return "";
    }
    finally {
        sdf=null;
        sdf1=null;
    }
    return result;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-08-29T10:28:06.233

Kotlin 相当于回答的答案`João Silva`

```
 fun getFormattedDate(originalFormat: SimpleDateFormat, targetFormat: SimpleDateFormat, inputDate: String): String {
    return targetFormat.format(originalFormat.parse(inputDate))
} 
```

用法（在 Android 中）：

```
getFormattedDate(
            SimpleDateFormat(FormatUtils.d_MM_yyyy, Locale.getDefault()),
            SimpleDateFormat(FormatUtils.d_MMM_yyyy, Locale.getDefault()),
            dateOfTreatment
    ) 
```

注意：常数值：

```
// 25 Nov 2017
val d_MMM_yyyy = "d MMM yyyy"

// 25/10/2017
val d_MM_yyyy = "d/MM/yyyy" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-11T06:48:37.280

```
 private String formatDate(String date, String inputFormat, String outputFormat) {

    String newDate;
    DateFormat inputDateFormat = new SimpleDateFormat(inputFormat);
    inputDateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
    DateFormat outputDateFormat = new SimpleDateFormat(outputFormat);
    try {
        newDate = outputDateFormat.format((inputDateFormat.parse(date)));
    } catch (Exception e) {
        newDate = "";
    }
    return newDate;

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-30T09:55:20.280

希望这会对某人有所帮助。

```
 public static String getDate(
        String date, String currentFormat, String expectedFormat)
throws ParseException {
    // Validating if the supplied parameters is null 
    if (date == null || currentFormat == null || expectedFormat == null ) {
        return null;
    }
    // Create SimpleDateFormat object with source string date format
    SimpleDateFormat sourceDateFormat = new SimpleDateFormat(currentFormat);
    // Parse the string into Date object
    Date dateObj = sourceDateFormat.parse(date);
    // Create SimpleDateFormat object with desired date format
    SimpleDateFormat desiredDateFormat = new SimpleDateFormat(expectedFormat);
    // Parse the date into another format
    return desiredDateFormat.format(dateObj).toString();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-15T05:18:05.760

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;

             String fromDateFormat = "dd/MM/yyyy";
             String fromdate = 15/03/2018; //Take any date

             String CheckFormat = "dd MMM yyyy";//take another format like dd/MMM/yyyy
             String dateStringFrom;

             Date DF = new Date();

              try
              {
                 //DateFormatdf = DateFormat.getDateInstance(DateFormat.SHORT);
                 DateFormat FromDF = new SimpleDateFormat(fromDateFormat);
                 FromDF.setLenient(false);  // this is important!
                 Date FromDate = FromDF.parse(fromdate);
                 dateStringFrom = new 
                 SimpleDateFormat(CheckFormat).format(FromDate);
                 DateFormat FromDF1 = new SimpleDateFormat(CheckFormat);
                 DF=FromDF1.parse(dateStringFrom);
                 System.out.println(dateStringFrom);
              }
              catch(Exception ex)
              {

                  System.out.println("Date error");

              }

output:- 15/03/2018
         15 Mar 2018 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-02-19T21:02:23.110

```
 //Convert input format 19-FEB-16 01.00.00.000000000 PM to 2016-02-19 01.00.000 PM
    SimpleDateFormat inFormat = new SimpleDateFormat("dd-MMM-yy hh.mm.ss.SSSSSSSSS aaa");
    Date today = new Date();        

    Date d1 = inFormat.parse("19-FEB-16 01.00.00.000000000 PM");

    SimpleDateFormat outFormat = new SimpleDateFormat("yyyy-MM-dd hh.mm.ss.SSS aaa");

    System.out.println("Out date ="+outFormat.format(d1)); 
```

# image - 验证码 img 和头像 img 未显示

> ID：12503528
> 
> 赞同：0
> 
> 时间：2012-09-19T22:00:24.690
> 
> 标签：image, captcha

我正在尝试在我的网站上运行评级和评论软件。我无法显示头像或验证码图像。如何在运行 Windows IIS 的服务器上进行调整？

`extension=php_gd2.dll`

```
<label class="xcFormLabel" for="idRegAvatar">
  Avatar - images will be resized to 80px x 80px (100k):
</label>
<div class="xcDivClear">
</div>
<input type="file" name="avatar" id="idRegAvatar" value="" class="xcRegInputText" />
<br /><br />
<img class="xcRegCaptchaImg" src="../xcommentpro/Captcha.php?type=reg">
<br /><br />
<label class="xcFormLabel" for="idRegCaptcha">
  Enter the code above:
</label>
<br />
<input type="text" name="captcha" id="idRegCaptcha" class="xcRegInputText" />
<br /><br /> 
```

出现以下错误：

> 致命错误：在第 64 行的 C:\www\recipes4cakes\xcommentpro\fileupload.php 中调用未定义的函数 imagecreatefromjpeg()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:45:25.230

错误来自 GD 库的问题。您需要在 phpinfo()（GD 部分）中检查 JPEG 支持，否则 imagecreatefromjpeg() 函数将不起作用。

# vb.net - 根据另一个类 VB.nET 的线程引发的事件更新 GUI 项

> ID：12503532
> 
> 赞同：2
> 
> 时间：2012-09-19T22:00:48.403
> 
> 标签：vb.net, event-handling, multithreading

**如何使用另一个类的线程正在接收的消息更新 GUI 中的数据？**

我有一个带有从服务器接收数据的线程的类。每当从服务器收到消息时，该线程就会引发一个事件。此事件在 Starter 类（包含 GUI 的主类）中处理。事件处理程序（比如说`DisplayData()` 必须显示其他类收到的消息。我的代码是这样的

```
Class GUI
    receiverObj = New Receiver()
    Addhandler receiverObj.MessageAlert, Addressof DisplayData
    ...
    ...
    Sub DisplayData()
        Dim str As receiverObj.ReceiveData

        lbEvents.Add.Items(str)   ' lbEvents is a ListBox inside the GUI that displays messages from Receiver 
    End Sub
End Class

Class Receiver

    Public Event MessageAlert()
    Sub New ()
        MyTcpClient = New TcpClient(hostIP, port)               
        MyTcpClient.GetStream.BeginRead(ReceiveData, 0, PacketSize, AddressOf ReceiveStream, Nothing)
    End Sub

    Public Sub ReceiveStream(ByVal ar As IAsyncResult)
        Dim ByteCount As Integer

        Try
            ByteCount = MyTcpClient.GetStream.EndRead(ar)
            Dim t As New Threading.Thread(Sub() RaiseEvent MessageAlert())
            MyTcpClient.GetStream.BeginRead(ReceiveData, 0, PacketSize, AddressOf ReceiveStream, Nothing)
     End Sub
End Class 
```

Window 崩溃或挂起，并且列表框不显示数据。抛出异常说

**跨线程操作无效：控件 xxx 从创建它的线程以外的线程访问。**

任何人都可以提出解决此错误的方法吗？如何使用另一个类的线程正在接收的消息更新 GUI 中的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T22:34:20.833

对 Windows 应用程序的 GUI 元素的更新必须在创建 GUI 的线程上进行。

为了解决这个问题，有一个名为 Invoke 的方法允许您触发一个*委托*，该委托可以确保将控制权传递给 GUI 线程并执行您正在尝试的更新。

你需要做一些事情来完成这项工作：

1.  *委托*类型，例如

    ```
    Delegate Sub MyGUIUpdateDelegate()
    ```

2.  代表类型的变量

    ```
    Public myGUIUpdateDelegate as MyGUIUpdateDelegate
    ```

3.  具有与委托匹配的签名并完成工作的方法：

    ```
    Public Sub MyGuiEventHandler()

            ' Do work on proper GUI thread, via Control.Invoke,
            ' such as listbox population

            If (Me.InvokeRequired) Then
                Me.Invoke( myGUIUpdateDelegate)
            Else
                // do control specific work, we're on the GUI thread here
            End If`End Sub`
    ```

4.  将事件处理程序分配给您的委托：

    `myGUIUpdateDelegate = New MyGuiUpdateDelegate(AddressOf myForm.MyGuiEventHandler)`
5.  通过 Control.Invoke 从事件线程调用您的更新程序方法到正确的线程（假设您的表单实例变量名为 myForm）：

    `myForm.Invoke(myForm.myGUIUpdateDelegate);`

这至少是一个可以帮助您入门的框架。这个想法是，想要引发更新的后台线程不应该（实际上也不能）进行直接的 GUI 更新。启动上下文切换到 GUI 线程的正确方法是调用 Invoke 方法来调用正确 GUI 线程上的 GUI 更新程序。

此外，如果您需要将参数传递给您的委托，只需更改您定义的委托的签名以包含参数，并修改 Invoke 方法以在处理程序中提供参数，并将第二个参数提供给 Invoke。

希望这可以帮助。

# android - 如何在 Android 测试中正确模拟 HttpGet 调用

> ID：12503537
> 
> 赞同：3
> 
> 时间：2012-09-19T22:01:03.130
> 
> 标签：android, unit-testing, http, mocking, robotium

我有一个执行 HTTP GET 调用的应用程序，[`HttpGet`](http://developer.android.com/reference/org/apache/http/client/methods/HttpGet.html)我想模拟响应以测试不同的场景，而不必设置任何特定的本地服务器，就像远程服务器一样。

目标是进行非常高级的测试，就像真正的用户 ( [Robotium](http://code.google.com/p/robotium/) ) 一样，并伪造应用程序调用真实服务器所获得的响应。如果您需要一个示例，就像测试 Twitter 客户端一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:51:41.713

好的，这就是我在我的 Robotium 测试中获得假 HttpResponses 所做的： - 我有一个类 HttpCallBuilder，它通常只返回一个 DefaultHttpClient - 我添加了一个 setHttpClient() 方法来在我的测试中设置一个 MockHttpClient（你需要实现（空）HttpClient接口中的很多方法，我这里省略了）：

```
public class MockHttpClient implements HttpClient {

private static Context context;
private final BasicHttpParams params = new BasicHttpParams();

@Override
public HttpResponse execute(HttpUriRequest request) throws IOException,
        ClientProtocolException {
    InputStream mockInputStream = context.getAssets().open(
            MockResponses.forRequest(request));
    return new MockHttpResponse(mockInputStream);
}

@Override
public HttpParams getParams() {
    return params;
}

public static void setContext(Context applicationContext) {
    MockHttpClient.context = applicationContext;
}
} 
```

MockResponses 允许您为您的 Mock 提供针对该情况的正确响应：

```
public class MockResponses {

private static final List<String[]> responseMapping = new ArrayList<String[]>();
private static final String BASE = "mocks/";

public static String forRequest(final HttpUriRequest request) {
    final String requestString = request.getURI().toString();
    for (final String[] mapping : responseMapping) {
        if (requestString.matches(mapping[0])) {
            return BASE + mapping[1];
        }
    }
    throw new IllegalArgumentException(
            "No mocked reply configured for request: " + requestString);
}

public static void forRequestDoAnswer(final String regex,
        final String fileToReturn) {
    responseMapping.add(new String[] { regex, fileToReturn });
}

public static void reset() {
    responseMapping.clear();
}
} 
```

在您的测试中，您可以像这样准备测试：

```
HttpCallBuilder.setHttpClient(new MockHttpClient());
MockHttpClient.setContext(context);
MockResponses.reset();
MockResponses.forRequestDoAnswer(".*method=Login.*", "loginform.html"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-27T06:16:14.940

Google 提供了一个名为 Mockwebserver 的库，可用于模拟 Web 服务响应。[https://code.google.com/p/mockwebserver/](https://code.google.com/p/mockwebserver/)你可以参考这个链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T22:05:21.993

使用[Mockito](http://code.google.com/p/mockito/)怎么样？

根据[这篇文章](http://corner.squareup.com/2012/10/mockito-android.html)，它的最新版本应该支持 dalvik，所以你应该能够将它与 robotsium 一起使用。

使用 mockito，您可以模拟任何对象以返回您想要的任何内容。我发现它非常强大和简洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T10:04:04.170

试试 XML Mimic，这将解决您的问题。它易于配置和作为独立服务器运行。

[http://sourceforge.net/projects/xmlmimic/](http://sourceforge.net/projects/xmlmimic/)

# ios - 处理删除 EKEvent.recurrenceRule 属性

> ID：12503540
> 
> 赞同：2
> 
> 时间：2012-09-19T22:01:27.373
> 
> 标签：ios, api, deprecated

Apple 最近从 iOS 6 Api 中删除了recurrenceRule 属性，所以我收到一个编译器错误，说在EKEvent 类型的对象上找不到它。

但是，替换（recurrenceRules）直到 iOS 5 才添加。如果我们想支持 iOS < 5，那么让编译器满意的正确方法是什么？

编辑：我在 EKEvent 中添加了一个类别，重新定义了recurrenceRule 属性，这会导致应用被拒绝吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:17:27.437

这个怎么样：

```
EKEvent* myEvent = ...;

if ( [myEvent respondsToSelector: @selector( recurrenceRule ) ] )
{
   EKRecurrenceRule* rr = (EKRecurrenceRule*)[myEvent performSelector: @selector( recurrenceRule ) withObject: nil];

   ...
} 
```

# c# - 如果应用程序作为 RemoteApp 运行，EMF 中报告打印 (C# .Net) 的比例错误

> ID：12503544
> 
> 赞同：1
> 
> 时间：2012-09-19T22:01:44.567
> 
> 标签：c#, reporting-services, remoteapp

我有一个使用 PrintDocument 对象打印报告的应用程序。报告在 EMF 中呈现，一切都很好，直到您将应用程序作为 RemoteApp 运行。

作为 RemoteApp，应用程序无法获取客户端监视器的 DPI，并将默认为 4:3 比率。如果客户端的桌面分辨率与此比例不匹配，则报告将不正确地缩放，因此打印也不正确。例如，字体将相互重叠。

我知道以 PDF 格式渲染很好，但它需要保存临时文件。先存档。但是，我也需要批量打印，所以这可能不是性能方面的最佳解决方案。

除了确保客户端桌面具有相同的 4:3 分辨率之外，还有人知道如何解决这个问题吗？

# ios5 - existingObjectWithID:error: 返回 nil，但 objectWithID: 返回一个实际可用的对象

> ID：12503545
> 
> 赞同：9
> 
> 时间：2012-09-19T22:02:04.753
> 
> 标签：ios5, core-data, nsmanagedobjectcontext

我从文档和[这个答案](https://stackoverflow.com/a/3010043/291280)的理解是，如果数据存在，则 NSManagedObjectContext`existingObjectWithID:error:`和`objectWithID:`方法应该返回相同的对象，但是当数据不存在时，`existingObjectWithID:error:`将返回`nil`，而`objectWithID:`将返回一个有故障的对象而不是数据。

我在应用程序中看到的是一个实例（在子托管对象上下文中的后台线程上创建对象并保存之后，然后转到主线程，保存并将对象 ID 从子上下文带到父对象上下文），`existingObjectWithID:error:`返回`nil`，但`objectWithID:`返回具有有效数据的实际可用对象，而不是错误。

我对这两种方法的理解不正确吗？难道我做错了什么？

（我想要`nil`返回--when-there's-no-data 的行为`existingObjectWithID:error:`，但是无法获取新创建的对象的数据是有问题的。）

* * *

***编辑***：我想我可以使用（[如此处所做的](https://github.com/jerrykrinock/CategoriesObjC/blob/master/NSManagedObjectContext+Cheats.m#L267)`objectWithID:`）替换伪造的对象，但 try-catch 在Objective-C，这似乎是一个非常糟糕的主意。`nil`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T11:44:30.107

问题可能出在临时对象 ID 中。对象 ID 在保存到存储之前不是永久的。所以问题是您何时从子上下文中的托管对象获取对象 ID：在保存父对象之前或之后。

如果在保存父级之前执行此操作（反过来，如果父级配置了持久存储协调器而不是另一个父级，则会导致保存到存储中），那么您可能会获得临时对象 ID。由于 Apple 未向我们披露的某些原因，其中一种从对象 ID 返回托管对象的方法有效，而另一种则无效。

# linux - 如何使用 awk 选择“第二个”值？

> ID：12503555
> 
> 赞同：1
> 
> 时间：2012-09-19T22:02:59.200
> 
> 标签：linux, bash, awk

迄今为止精心制作的脚本

```
iostat -p -x 1 2| grep $1[^[:digit:]] | awk '{print $9}' 
```

将返回两行：

```
0.16
0.00 
```

因为 iostat 正在采集两个样本。但你已经知道了。我的问题是，既然你和我都知道每次都会恰好是两行，我如何准确地挑选出第二行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T22:14:47.737

添加`NR==2`之前`{print $9}`告诉`awk`匹配记录 2。

例如，在我的系统上，

```
$ iostat -x /dev/sda 1 2 | grep sda

$ iostat -x /dev/sda 1 2 | grep sda | awk 'NR==1 {print $9}'

$ iostat -x /dev/sda 1 2 | grep sda | awk 'NR==2 {print $9}' 
```

生产

```
sda               0.11     1.04    2.00    1.28   125.95    63.24   115.15     0.07   21.04    4.66   46.60   2.36   0.78
sda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00
0.07
0.00 
```

其中“0.00”行是第三个命令的结果。

附加说明：不必像匹配文本那样运行单独的`grep`命令。`awk`然而，awk 脚本需要一个索引变量。以下示例中的第一个是一个简单的示例，`grep`以显示其`awk`工作原理。接下来的两个示例是简单的`awk`代码，其中有一个匹配测试来增加索引，另一个匹配测试加上索引测试要打印。最后一个例子展示了如何去掉匹配表达式的额外出现。请注意，在这些示例中，为了清楚起见，我将`print $9`其替换为. 以下是匹配 in而不是 in的示例：`print``$1[^[:digit:]]``sda[^0-9]``awk``grep`

```
$ iostat -p -x 1 2  | grep 'sda '
sda               0.11     1.04    2.00    1.28   125.70    63.16   115.09     0.07   21.04    4.66   46.57   2.36   0.78
sda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00

$ iostat -p -x 1 2  | awk '/sda[^0-9]/ {++t} t==1 && /sda[^0-9]/ {print}'
sda               0.11     1.04    2.00    1.28   125.70    63.16   115.09     0.07   21.04    4.66   46.57   2.36   0.78

$ iostat -p -x 1 2  | awk '/sda[^0-9]/ {++t} t==2 && /sda[^0-9]/ {print}'
sda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00

$ iostat -p -x 1 4  | awk '/sda[^0-9]/ && t++ && t==2 {print}'
sda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T22:04:00.773

通过管道将其传输到`tail -1`，这将选择最后一行。

```
iostat -p -x 1 2| grep $1[^[:digit:]] | awk '{print $9}' | tail -1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T22:08:06.180

组合`head`并`tail`允许您从输入中选择任何行序列：

```
(cmd) | tail -n+2 | head -n 1 
```

无论命令的输出有多长，都会获取第二行输入。

# kml - GE 方法 FlyToObject 的 API 对象是什么？

> ID：12503561
> 
> 赞同：1
> 
> 时间：2012-09-19T22:03:20.897
> 
> 标签：kml, google-earth-plugin

在 GE 插件 API GEHelper.cs 中有一个函数 FlyToObject。由于我无法让 kml 将我带到地标，我想我会使用 API 调用。

FlyToObject 所需的参数是：“动态 ge”、“动态特征”

我坚持“功能”论点是什么。描述说“api对象”。我不确定指的是哪个 api 对象或如何创建它。

我想要做的是自动（在加载文件时）“飞到”我的 kml 文件中的地标。

如果有人知道如何用 KML 做我所要求的，那就太好了。这是我正在加载但不起作用的 KML 文件。这是 Google 的示例文件之一。

```
<kml xmlns="http://www.opengis.net/kml/2.2">
    <Placemark>
      <name>300m straight down</name>
      <Camera>
        <longitude>-122.4783</longitude>
        <latitude>37.812</latitude>
        <altitude>300</altitude>
        <heading>0</heading>
        <tilt>0</tilt>
        <roll>0</roll>
        <altitudeMode>absolute</altitudeMode>
      </Camera>
    </Placemark>
</kml> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:29:36.360

如果您将 Google 地球加载到您自己的网页中，您可以通过 javascript 访问 GE API。因此，如果要设置某个视图，请使用以下代码

```
 // Create a new LookAt.
      var lookAt = ge.createLookAt('');

      // Set the position values.
      lookAt.setLatitude(36.584207);
      lookAt.setLongitude(-121.754322);
      lookAt.setRange(5000.0); //default is 0.0

      // Update the view in Google Earth.
      ge.getView().setAbstractView(lookAt); 
```

更高级：如果您使用自己的地标加载自定义 kml 文件。在您的 kml 文件中将它们分配为 id

```
 <Placemark id="uniqueId"> 
```

然后，一旦加载，使用此代码

```
 placemark = ge.getElementById(uniqueId);
       if (placemark == null) {
            return false;
       } else if (placemark.getAbstractView()) {
            ge.getView().setAbstractView(lastViewLoaded);
      } 
```

# c++ - std::unordered_map 和链接器错误

> ID：12503562
> 
> 赞同：2
> 
> 时间：2012-09-19T22:03:41.507
> 
> 标签：c++, dll, linker

我在编译我的新项目时遇到了一些问题。

编译器输出：

```
1>------ Build started: Project: IRPCore, Configuration: Debug Win32 ------
1>  core.cpp
1>     Creating library D:\Repo\Inter Role Play Gamemode\sa-mp-0.2-plugin-sdk\IRP\Debug\IRPCore.lib and object D:\Repo\Inter Role Play Gamemode\sa-mp-0.2-plugin-sdk\IRP\Debug\IRPCore.exp
1>core.obj : error LNK2001: unresolved external symbol "public: static class std::tr1::unordered_map<int,struct item,class std::hash<int>,struct std::equal_to<int>,class std::allocator<struct std::pair<int const ,struct item> > > core::itemCache" (?itemCache@core@@2V?$unordered_map@HUitem@@V?$hash@H@std@@U?$equal_to@H@3@V?$allocator@U?$pair@$$CBHUitem@@@std@@@3@@tr1@std@@A)
1>main.obj : error LNK2001: unresolved external symbol "public: static class std::tr1::unordered_map<int,struct item,class std::hash<int>,struct std::equal_to<int>,class std::allocator<struct std::pair<int const ,struct item> > > core::itemCache" (?itemCache@core@@2V?$unordered_map@HUitem@@V?$hash@H@std@@U?$equal_to@H@3@V?$allocator@U?$pair@$$CBHUitem@@@std@@@3@@tr1@std@@A)
1>D:\Repo\Inter Role Play Gamemode\sa-mp-0.2-plugin-sdk\IRP\Debug\IRPCore.dll : fatal error LNK1120: 1 unresolved externals 
```

这里来了 core.cpp

```
#include <iostream>
#include <unordered_map>
#include "core.h"

core::core(void)
{

}

core::~core(void)
{

}

void core::Item_Insert(int uid, item Item)
{
    core::itemCache.insert(std::make_pair<int,item>(uid, Item));

    return;
}

std::string core::convertNativeStringToString(AMX *amx, cell input)
{
    char *string = NULL;
    amx_StrParam(amx, input, string);
    return string ? string : "";
} 
```

我应该链接更多的库吗？

提前致谢。

**编辑：**这是来自 core.h 的核心定义

```
class core
{
    public:
        static std::unordered_map<int, item> itemCache;
        core(void);
        ~core(void);
        static void Item_Insert(int uid, item Item);
        static std::string convertNativeStringToString(AMX *amx, cell input);
    private:
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T22:08:33.990

`core::itemCache`向 core.cpp添加一个定义。通常，类的静态数据成员在类定义中声明并**在****源**文件中定义。

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-09T01:38:30.903

正如@Pete Becker 所说，将其放在 cpp 的顶部：

```
std::unordered_map<int, item> core::itemCache; 
```

除了

```
static std::unordered_map<int, item> itemCache; 
```

已经在.h。**

# ios - iOS6手机配置CA链改

> ID：12503563
> 
> 赞同：1
> 
> 时间：2012-09-19T22:03:42.333
> 
> 标签：ios, configuration, certificate, profile, ota

我使用此页面：[iOS mobileconfig walkarounds](https://stackoverflow.com/questions/9277426/ios-mobileconfig-walkarounds)在 iOS 上设置我的移动配置文件。我将我的 SSL 证书/CA 与它关联起来。

突然之间，iOS6 使配置文件在 iOS5.1 上显示为“未验证”，而在 iOS5.1 下显示“已验证”。发生了什么变化或我可以进行哪些更改以使其显示为已验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:37:54.183

好。我在使用 openSSL 命令签署配置文件时遇到了同样的问题。

它在 iOS5 上运行良好，在 iOS6 上“未验证”。

你能给我你用来签署文件的“命令”吗？它会让事情变得更容易帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:11:18.610

看起来问题在于您使用了哪些 SSL 提供程序。Apple 有一个经过批准的提供商列表，直到 iOS6 之前他们都忽略了该列表。

# python - 遍历文件结构Python的最有效方法

> ID：12503574
> 
> 赞同：5
> 
> 时间：2012-09-19T22:04:10.913
> 
> 标签：python, optimization, directory, subdirectory

是否以以下最耗时的方式使用 os.walk 递归搜索文件夹并返回所有以 .tnt 结尾的文件？

```
for root, dirs, files in os.walk('C:\\data'):
    print "Now in root %s" %root
    for f in files:
        if f.endswith('.tnt'): 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T22:12:23.600

是的，使用`os.walk`确实是最好的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T22:43:21.970

正如每个人所说，`os.walk`几乎可以肯定是最好的方法。

如果您确实有性能问题，并且分析表明它是由 os.walk（和/或使用 .endswith 迭代结果）引起的，那么您最好的答案可能是跳出 Python。将上面的所有代码替换为：

```
for f in sys.argv[1:]: 
```

现在您需要一些可以收集路径并运行脚本的外部工具。（理想情况下，将尽可能多的路径批处理到每个脚本执行中。）

如果您可以依靠 Windows 桌面搜索对驱动器进行索引，则只需执行快速数据库操作即可找到特定路径下具有特定扩展名的所有文件。我不知道如何编写一个批处理文件来运行该查询并将结果作为参数列表传递给 Python 脚本（或运行查询并将结果传递给 IronPython 而不将其序列化为列表的 PowerShell 文件论点），但值得先研究这一点。

如果你不能依赖你平台的桌面搜索索引，在任何 POSIX 平台上，使用这个单行 shell 脚本几乎肯定是最快和最简单的：

```
find /my/path -name '*.tnt' -exec myscript.py {} + 
```

不幸的是，您不是在 POSIX 平台上，而是在 Windows 上，该工具不附带该`find`工具，而这正是在这里完成所有繁重工作的事情。

有本地 Windows 的 find 端口，但是您必须弄清楚命令行的复杂性才能正确引用所有内容并格式化路径等，这样您就可以编写单行批处理文件。或者，您可以安装 cygwin 并使用在 POSIX 系统上使用的完全相同的 shell 脚本。或者您可以找到一个更符合 Windows 的工具来满足您的需要。

可以想象，这可能会更慢而不是更快——Windows 并非旨在以尽可能少的开销执行大量小进程，而且我相信它对命令行的限制比 linux 或 OS X 等平台更小，因此您可能会花费更多等待解释器启动和退出的时间比您节省的时间要长。你必须测试才能看到。事实上，您可能希望同时测试本机和 cygwin 版本（在后一种情况下，使用本机和 cygwin Python）。

您实际上*不必*将`find`调用移动到批处理/shell 脚本中；这可能是最简单的答案，但还有其他答案，例如用于从 Python`subprocess`中调用。`find`这可能会解决由于启动解释器次数过多而导致的性能问题。

获得适量的并行性也可能会有所帮助——将脚本的每次调用分拆到后台，不要等待它们完成。（我相信在 Windows 上，shell 不参与其中；取而代之的是一个名为“run”的工具，它启动了一个与 shell 分离的进程。但我不记得细节了。）

如果这些都不起作用，您可能必须编写一个自定义 C 扩展，以实现最快的 Win32 或 .NET 功能（这也意味着您必须进行研究以找出它是什么……），以便您可以从在 Python 中。

# ios - 安装 XCode 4.5 会删除 iOS Simulator 5.1 吗？

> ID：12503575
> 
> 赞同：9
> 
> 时间：2012-09-19T22:04:18.367
> 
> 标签：ios, xcode, ios-simulator, xcode4.5

我有2台机器。在其中一个上，我更新到 xcode 4.5，但这样做会卸载我的 iOS 模拟器 5.1。

我犹豫要不要更新我的另一台机器，因为我有一个需要 5.1 模拟器的项目。

我的假设是否正确，还是我在不知情的情况下删除了旧模拟器？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T22:06:17.700

您可以在 Xcode 首选项中重新下载模拟器。

![在此处输入图像描述](../Images/f0f7129c9cebf560c966b41134754f8f.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T18:12:33.130

为lion下载Xcode 4.3.3并打开dmg，然后单击并显示包内容，并将`Contents\Developer\platforms\iPhoneOS.platform\sdks\iPhoneOs5.1sdk`文件夹复制到您的xcode4.5`Contents\Developer\platorms\iPhoneOS.platform\sdks`文件夹中，它可以工作

# jquery - 引用元素 id -bone.js、jquery 自动完成

> ID：12503576
> 
> 赞同：0
> 
> 时间：2012-09-19T22:04:48.107
> 
> 标签：jquery, backbone.js, jquery-autocomplete

自动完成工作正常并绑定到所有输入字段。但是，如果出现错误，我需要引用输入的 id，以便显示适当的错误消息，有人能指出我正确的方向吗？引用 this 是页面并且引用 $(this) 是未定义的。

```
 render: function() {
                this.$(".inputClass").autocomplete({ // add book dialog
                    source: function(request, response ) {
                         $.ajax({
                             url: someurl + request.term,
                             dataType: "json",
                             global: false, // disable loadingScreen
                             success: function(json) {
                                 books = json.data.list;
                                 response( $.map( i, function( item ) {
                                     return {
                                         test: item.test,
                                     };
                                 }));
                             },
                             error: function(json) {
                                //get element id and apply error class
                             } // error
                         }); // ajax
                    }, // source
                    minLength:1
                 });
      return this;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:21:03.923

Javascript 中的`this`关键字会在函数内更改其上下文。为了解决这个问题，您可以保存对原始上下文的引用（按照惯例将其称为*“that”*或*“self”*）。

```
render: function() { 
    var that = this;

    // ...

    error: function(json() {
        that.$el.addClass("error");
    } 
```

# php - PHP（Windows 和 Linux）- 根据 IP 地址获取主机名

> ID：12503580
> 
> 赞同：1
> 
> 时间：2012-09-19T22:05:02.737
> 
> 标签：php, networking, dns, host, lan

有时，当我调用 gethostbyaddr() 时，它会返回正确的主机名，但有时它会返回 IP 地址，我知道它的设计目的是在调用无法解析主机名时执行此操作。

获取主机名绝对**至关重要**，因为所有 IP 地址都是动态的（2 天租约），因此我需要主机名，以便在将主机名和 IP 对保存到一个数据库。我实际上并排有 2 台打印机和 2 台计算机，每个 PHP 中的一个可以解析为主机名，另一台打印机和计算机返回 IP 地址。

如何让 PHP 解析所有设备的主机名？

另外，有谁知道它如何解析主机名？域名系统？赢了？

如有必要，我可以在这两台打印机上运行任何测试来检查它们的 IPv4 配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:54:57.223

[`gethostbyaddr()`](http://php.net/manual/en/function.gethostbyaddr.php)成功时返回主机名，失败时返回未修改的*ip_address*，或错误输入时返回 FALSE。

在检查了大约 20 台静态 ip 分配的机器和大约 5 台打印机的功能后，它返回给我机器和打印机的 ip，这些机器和打印机要么关闭，要么配置不同，例如路由器或网关。

因此，您需要检查哪些策略限制`gethostbyaddr()`从您的一台计算机和打印机返回主机名。

# bash - Bash：警告：此处文档位于由文件结尾分隔的行（需要“EOF”）

> ID：12503581
> 
> 赞同：12
> 
> 时间：2012-09-19T22:05:11.070
> 
> 标签：bash, eof, heredoc

bash 中的以下函数会出现标题中提到的错误。当final`EOF`不在行首时，通常会出现错误。

`EOF`是在开始，所以我看不出有什么问题。在脚本（未显示）的更深处，还有其他 here-docs 并且它们可以工作。

```
add_testuser()
{
    kadmin -p admin -q addprinc test
    cat <<EOF > ~/test.ldif
dn: cn=test,ou=groups,dc=${ARRAY[1]},dc=${ARRAY[2]}
cn: test
gidNumber: 20001
objectClass: top
objectClass: posixGroup

dn: uid=test,ou=people,dc=${ARRAY[1]},dc=${ARRAY[2]}
uid: test
uidNumber: 20001
gidNumber: 20001
cn: First_name
sn: Last_name
objectClass: top
objectClass: person
objectClass: posixAccount
objectClass: shadowAccount
loginShell: /bin/bash
homeDirectory: /home/test
userPassword: {CRYPT}*
EOF 

    ldapadd -Qf ~/test.ldif
    kdestroy; kinit test
    klist
    ldapwhoami
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-16T07:10:36.557

你在决赛之后有一个空间，`EOF`因此它无法终止heredoc。

p/s：在复制粘贴代码时注意到了这一点。

# azure - 使用 DrawImage 的代码在本地工作，但在 Azure 中失败并出现 ArgumentException

> ID：12503583
> 
> 赞同：2
> 
> 时间：2012-09-19T22:05:43.960
> 
> 标签：azure, argumentexception

我从我的源代码中提取了以下与此相关的代码：

```
using (Bitmap spriteBitmap = new Bitmap(Width, Height, PixelFormat.Format32bppArgb))
{
        using (Graphics spriteGraphics = Graphics.FromImage(spriteBitmap))
        {
                Rectangle imageRect = new Rectangle(0, 0, imageInfo.Width, imageInfo.Height);

                using (Bitmap clonedImageBitmap = imageInfo.ImageBitmap.Clone(imageRect, spriteBitmap.PixelFormat))
                {
                        clonedImageBitmap.SetResolution(spriteBitmap.HorizontalResolution, spriteBitmap.VerticalResolution);

                        spriteGraphics.DrawImage(
                                clonedImageBitmap,
                                mappedImageInfo.X, mappedImageInfo.Y,
                                imageRect,
                                GraphicsUnit.Pixel);

                                spriteGraphics.Flush(FlushIntention.Flush);
                }

                imageInfo.DisposeBitmap();
        }
} 
```

此代码与 azure 的计算模拟器在本地完美配合。但是，当我部署它并执行代码时，它不再起作用，并且在 spriteGraphics.DrawImage 处失败，并出现著名的 ArgumentException“参数无效”。

出于测试目的，我记录了 clonedImageBitmap 的详细信息，以查看是否有不同之处。我发现在本地和云中唯一不同的是 .Flags -> 在本地我有 77842 和在云中 77846 所以看起来 ImageFlagsHasTranslucent 已设置，但如果这会导致云中的问题以及如何可以是我目前不知道的。

也许有人可以帮助我解决这个奇怪的问题？

提前致谢。

赫曼新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:11:19.897

我会说，由于应用程序的性质和运行的位置，工作肯定是一个难题。

这里的主要问题是您使用的类/API 来自 System.Drawing 命名空间，并且您必须知道此命名空间中的类是为与 Windows 窗体一起使用而设计的。它们不支持在 Windows 或 ASP.NET 服务中使用，这就是为什么您可以避免在 Windows Azure Web 角色或辅助角色中使用这些 API，这是最佳选择。云应用程序主要是 Web 应用程序或在后台工作的应用程序，这是避免类/api 对 System.Drawing 的依赖的主要原因。绘图是进一步依赖 GDI 使情况更加复杂的关键。

如果 API 失败，这仅仅是它在 Web 环境中不兼容的原因，即使它可用。即使在 Windows Azure 文档中，也建议完全避免使用 System.Drawing 中的 API/类，如果必须在您的代码中使用，如果您打算在自己的 Windows Azure 应用程序中使用这些类，则应该进行详尽的测试。

# html - 仅使用 CSS 和 HTML 的简单列布局

> ID：12503585
> 
> 赞同：1
> 
> 时间：2012-09-19T22:05:57.357
> 
> 标签：html, css, multiple-columns

这似乎比您单击此问题时最初想象的要复杂一些。

我正在寻找一个非常简单的可以容纳文本的 2 列布局。问题是，文本是通过内容管理系统导入的，因此可能会更改。这个想法是有一个标签，当它用完它的所有空间时，它可以在另一列上进行内容。

```
<p>Content goes here ... for quite a while ... lorum ipsum would be better.</p>

|-------------|  |-------------|
| Content     |  | while ...   |
| goes here   |  | lorum ipsum |
| ... for     |  | would be    |
| quite a     |  | better.     |
|-------------|  |-------------| 
```

因此，这排除了浮动左/右功能，因为它包含两个不同的列，而本质上它需要是一个。只是分开。

我曾想过使用 PHP 的`strlen`函数来计算字符数，但众所周知，在不同的字体中，`i`小于`w`意味着实际的字符数与内容的高度完全无关。不，我不能使用固定宽度的字体。我有一种感觉，这将是最后的手段，但我讨厌轻易放弃。

任何建议或想法都会有很大帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T22:10:29.660

您所描述的内容已经通过`column-count`属性在 CSS3 中实现：

**CSS**：

```
p {
    -webkit-column-count: 2;
    -moz-column-count: 2;
    -o-column-count: 2;
    column-count: 2;
} 
```

**演示：http: [//jsfiddle.net/WDgsv/](http://jsfiddle.net/WDgsv/)**

如果您也想支持 IE，请使用 JS polyfill：[http ://www.csscripting.com/css-multi-column/](http://www.csscripting.com/css-multi-column/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:41:16.887

对于那些正在寻找不同解决方案的人（以及由于 IE 是绝对痛苦而使用的不幸解决方案），我创建了这段简洁的代码：

```
<? $array_content = explode("</p>", $page_content);
$i = 0;
foreach($array_content as $paragraph) {
  echo $paragraph;
  if($i == (round(count($array_content)/2, 0, PHP_ROUND_HALF_DOWN))-1) {
    echo "</div><div class=\"column\">";
  }
  $i++;
}?> 
```

也适用于句子，只需将您的指针改为句号：`explode(".", $page_content);`.

# xml - 在 Activiti/Alfresco 工作流程中创建弹出窗口

> ID：12503587
> 
> 赞同：1
> 
> 时间：2012-09-19T22:06:20.627
> 
> 标签：xml, alfresco, bpmn, activiti, alfresco-share

好的，所以我一直在互联网上寻找将弹出窗口合并到 activiti/alfresco 工作流程中的任何示例，但没有找到任何结果。我只是想知道是否有人以前有这样做的经验，或者甚至知道是否有可能做这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T06:55:07.063

你想触发什么弹窗？我可以看到您可能在这里尝试完成的两件事，每件事都有非常不同的实现。

如果您想在任务编辑页面中为工作流的某些特定任务创建一个弹出窗口，您可以添加一个带有 javascript 的控件来生成它（我猜您已经知道工作流设计的基础知识，如果不知道，Jeff Potts'教程很棒-> [http://ecmarchitect.com/images/articles/alfresco-workflow/advanced-workflow-article-2ed.pdf](http://ecmarchitect.com/images/articles/alfresco-workflow/advanced-workflow-article-2ed.pdf)）。为此，请在 tomcat/shared/classes/alfresco/web-extension/site-webscripts/org/alfresco/components/form/controls 中创建一个文件，例如：tomcat/shared/classes/alfresco/web-extension/site -webscripts/org/alfresco/components/form/controls/myWorkflowPopup.ftl。使用包括 javascript 在内的 freemarker 语法设置文件，以便在您喜欢的情况下创建您喜欢的弹出窗口 - 我从您的帖子中不确定您是否想要一个弹出式浏览器窗口、一个小的 javascript 警报或一个 YUI 对话框，但是您可以做任何这些。同样，我不确定您要如何触发此操作-从按钮，当有人在表单字段中选择“批准”时，等等。设置控件后，您可以将其添加到工作流任务中。要添加控件，请编辑 tomcat/shared/classes/alfresco/web-extension/share-config-custom.xml；

```
<config evaluator="task-type" condition="[workflowNS]:[someTask]">
    <forms>
        <form>
            <field-visibility>
                ...
            </field-visibility>
            <appearance>
                ...
                <field id="[workflowNS]:[someField]">
                    <control template="/org/alfresco/components/form/controls/[myWorkflowPopup].ftl" />
                </field>
            </appearance>
        </form>
    </forms>
</config> 
```

如果您需要在弹出窗口中使用它，[workflowNS]:[someField] 的值将在模板中作为 field.value 提供给您。这些步骤有点高级，但我什至不知道这是否是您正在寻找的解决方案，因此如果您需要，我可以提供更多详细信息。

另一种可能性是您正在寻找一个由工作流触发但看起来独立于任何工作流 UI 的弹出窗口。在这种情况下，我们分为另外两种可能性-

a) 当工作流完成或达到 x 状态时，您希望在用户桌面上出现一个弹出窗口。我会用一个 java 通知区域应用程序来做到这一点。实际上，我之前曾考虑过这样做，并在意识到需要做多少工作时选择使用电子邮件。如果你决定试试这个，祝你好运——你不像我那么懒惰。

b) 您希望在浏览器中出现一个弹出窗口（这可能是另一个浏览器窗口、yui 对话框或 jscript/vbscript 警报/msgbox）。这可以通过 AJAX 完成。如果是我，我会在每个用户主文件夹中保留一个 xml 文件。我会将其设置为对用户查看的权限太高，但使用工作流定义中的 run-as 选项以管理员用户身份运行脚本任务以更新这些文件。例如，您可能有一个财务审批工作流，需要在提交新请求时通知财务组中的每个人。该脚本任务将遍历财务组，选择每个用户，并将一个元素附加到他们用户主页中的 xml 文件中。

对于弹出逻辑，我将在 share-config-custom.xml 中添加一个 javascript 依赖项，以便您可以在每个页面中包含一个外部脚本文件。在该脚本文件中，使用 setInterval 每 x 秒获取一个 uri（x 的正确值由您决定 - 平衡性能/带宽使用与功能）。

在脚本命中的 uri 处，设置一个 repo webscript 以从当前用户的用户主 xml 文件中提取数据。在每个元素上使用一个属性来保持消息的查看状态。当 webscript 运行时，它应该返回任何未查看的消息（可能通过 json）并将它们设置为已查看。

再一次 - 非常高水平的指导，仍然需要你做很多工作，但如果你有问题回复你想要完成的这些（如果有的话），我可以更详细地帮助你。

# c# - DLR 项目死了吗？

> ID：12503588
> 
> 赞同：3
> 
> 时间：2012-09-19T22:06:26.923
> 
> 标签：c#, .net, dynamic-language-runtime

我正在考虑将[.NET DLR](http://dlr.codeplex.com/)用于一个项目，但我发现它自 2010 年以来没有改变。有谁知道这个项目是否会被维护或者它是否已被其他任何东西取代？如果 Microsoft 不再支持 DLR，我恐怕会启动一个严重依赖 DLR 的项目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T22:08:03.147

它于 2010 年 4 月在 4.0 版中集成到 .net。因此，DLR 项目本身不再更新。msdn 有一个很好的概述：[动态语言运行时概述](http://msdn.microsoft.com/en-us/library/dd233052.aspx)。

# http - 是否可以可靠地检测清漆中的文件上传？

> ID：12503591
> 
> 赞同：2
> 
> 时间：2012-09-19T22:06:51.953
> 
> 标签：http, varnish

我正在探索将所有文件上传路由到清漆中的给定后端。显而易见的方法是匹配可以发布到的 url，但我也想尝试配置一个包罗万象的方法，它将路由我们在 url 匹配中遗漏的任何内容。

是否有可能可靠地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T22:06:51.953

在我思考这个问题时，我突然想到要检查

```
req.http.Content-Type ~ "multipart/form-data" 
```

在 vcl_recv 中应该是一种可靠的方法来做到这一点。

编辑：这似乎在我需要执行此操作的上下文中捕获了 90% 的上传。

# c++ - 判断线程是否退出

> ID：12503594
> 
> 赞同：0
> 
> 时间：2012-09-19T22:06:55.090
> 
> 标签：c++, mfc

我用`AfxBeginThread`. 我尝试使用 AfxExitThread 退出线程并返回一个值。这两种方法都应该是退出线程的有效方式。

然而，当我打电话给`GetExitCodeThread`我`STILL_ACTIVE`几个小时后。使用时也`(WaitForSingleObject(ahtRespondThreads[i], 0) == WAIT_OBJECT_0)`显示线程对象仍然有效。

您应该如何判断线程是否真正退出？是的，我知道我可以在函数退出之前设置一些变量，但我认为我应该能够查询线程句柄以知道它已经退出或者不再是有效线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T22:24:08.050

`GetExitCodeThread()`不要撒谎，`WaitForSingleObject()`所以如果两者都说线程仍然处于活动状态，那么线程确实仍然处于活动状态并且尚未退出其控制功能。检查您的函数中的错误，以确保它确实在您期望的时候退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:28:04.907

这两种方法都应该有效，我建议检查您的代码是否有任何您可能遗漏的错误，我在[这里](https://stackoverflow.com/questions/1006691/check-if-a-win32-thread-is-running-or-in-a-suspended-state)遇到了另一篇文章，它可能可以帮助您。

注意事项：

我所知道的结束线程的最佳方法是确保线程不会无限期地休眠。当它完成它的任务时让它检查一个变量。这将告诉它是否应该退出。

IE

1.  设置标志
2.  如果睡着了唤醒线程
3.  检查工作是否完成
4.  清理资源
5.  出口

# css - 无法在 Safari 中隐藏 youtube iframe？

> ID：12503598
> 
> 赞同：2
> 
> 时间：2012-09-19T22:07:40.260
> 
> 标签：css, iframe, safari, youtube, visibility

我注意到，当使用任何隐藏 div 的典型方法时，当 youtube 视频在其中时，它在 safari 中不起作用。看看这个基本的网页 -

```
<!DOCTYPE html>
<html>
<head><title>Safari Test</title></head>
<body>
<div id="test">
<iframe width="560" height="315" src="http://www.youtube.com/embed/Nry5zSJxG9k" frameborder="0" allowfullscreen></iframe>
</div>
<div id="safari" style="display: none;">
<iframe width="560" height="315" src="http://www.youtube.com/embed/Nry5zSJxG9k" frameborder="0" allowfullscreen></iframe>
</div>
</body>
</html> 
```

div 现在被隐藏了，但试试这个 - 在 safari 中查看并打开开发者工具。如果您转到 safari div 并单击 off display none，视频将重新出现。现在，再次单击它以隐藏它，您会注意到它没有隐藏。为什么这会是一个问题，您可能想知道？好吧，我正在使用 youtube 视频的轮播，它通过隐藏不活动的视频来工作。在 5.1.7 版的 safari 中，视频根本不会消失。有谁知道解决这个问题？我试过用不透明度、高度、宽度和可见性隐藏它，但你仍然可以在 Safari 中看到它。有人有想法么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T22:23:07.923

> 我试过用不透明度、高度、宽度和可见性隐藏它，但你仍然可以在 Safari 中看到它。有人有想法么？

您是否尝试将 iframe 移出屏幕？

```
position: absolute;
left: -10000px;
top: -10000px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-02T08:25:47.370

像这样检查无证的 'wmode': 'transparent' ....

```
 player = new YT.Player('player', {
        height: '476',
        width: '400',
        videoId: 'yourvidhere',
        playerVars: {
            'autoplay': 0,
                'controls': 0,
                'rel': 0,
                'showinfo': 0,
                'modestbranding': 1,
          'wmode': 'transparent'
        },
        events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T14:32:01.087

你看到这个答案了吗？它为我解决了同样的问题！

[iframe 中的 Youtube 视频未隐藏在 Safari 5.1 中](https://stackoverflow.com/questions/10700577/youtube-video-inside-iframe-not-hiding-in-safari-5-1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T14:37:41.350

我尝试了一些方法来解决 safari 与 iframe 的问题，这个方法似乎可以工作，同时在其他浏览器上保持一致的行为：

```
function Hide_Handler(oEvent)
{
   try
   {
      $('#iframecontainer').css
      ({ 
         background : {?}  // Where ? == color, loading image, whatever..
      })
      .find('.iframeClass').css // http://stackoverflow.com/a/12503745/1257652
      ({
         position : "absolute",
         left     : "-10000px",
         top      : "-10000px"
      });
   }
   catch (ex) { }
}

function Show_Handler(oEvent)
{
   try
   {
      $('#iframecontainer').css
      ({ 
         background : "" // Where ? == color, loading image, whatever..
      })
      .find('.iframeClass').css // http://stackoverflow.com/a/12503745/1257652
      ({
         position : "",
         left     : "",
         top      : ""
      });
   }
   catch (ex) { }
} 
```

我发现了一个用于滚动 iframe 的小技巧以及拥有 iframeContainer 元素的原因：

```
#iframeContainer
{
   height   : (n)px; // Where n is a number
   width    : (n)px; // Where n is a number
   overflow : auto;
}

.iframeClass
{
   margin   : 0px;
   padding  : 0px;
   width    : 100%;
   height   : 99%;
   border   : none;
   overflow : hidden;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T22:20:03.357

隐藏 div 时清空 iframe 的 src 属性，`document.getElementById("iframetab").setAttribute("src","");`并在显示 div 时设置属性 `document.getElementById("iframetab").setAttribute("src","www.google.com");`
给 iframe id。

# javascript - 如何同步包含 json 的 textarea 和链接到特定 json 属性的文本字段

> ID：12503600
> 
> 赞同：1
> 
> 时间：2012-09-19T22:07:47.810
> 
> 标签：javascript, ember.js

我正在试验 ember.js。我的目标是拥有一个包含一些 json 的文本区域和一些靠近它的文本字段，其中包含 json 的某些特定属性的值。假设这是json：

```
{
  property1 : "value1",
  property2 : "value2"
} 
```

第一个文本字段将连接到 property1，第二个文本字段将连接到 property2。每当我在其中一个文本字段上键入内容时，我都希望使用新的 json 使 textarea 保持最新。每当我从 textarea 更新 json 时，我也想让文本字段保持最新，只要 json 仍然有效。

我使用一个包含 json 本身的模型和一个计算属性来让它工作模型。

```
App.JsonModel = Ember.Object.extend({
    json : {property1:"value1",property2:"value2"},
    asString : function(key, value) {
        //getter
        if (arguments.length === 1) {
            return JSON.stringify(this.get('json'), null, '  ');
        //setter
        } else {
            try {
                this.set('json', JSON.parse(value));
            } catch(err) {

            }    
            return value;
        }
    }.property('json', 'json.property1', 'json.property2')
}); 
```

这是带有视图的 html：

```
json:
{{view Ember.TextArea valueBinding="App.jsonModel.asString" class="json"}}
property1:
{{view Ember.TextField valueBinding="App.jsonModel.json.property1"}}
property2:
{{view Ember.TextField valueBinding="App.jsonModel.json.property2"}} 
```

您也可以查看[工作示例](http://jsfiddle.net/javanna/9P9KD/1/)。

在我当前的代码中有几件事我不喜欢：

*   我需要指定所有可能导致 json 的版本字符串发生变化的属性，因为 json 本身是不够的，不确定这是否是预期的行为：`.property('json', 'json.property1', 'json.property2')`. 我想让 asString 函数尽可能通用，而不提及任何特定的 json 属性。
*   在我看来，基于 的计算属性 getter 和 setter`if (arguments.length === 1)`不太好读。

还有其他（希望是更好的）方法可以使用 ember.js 实现相同的目标吗？我怎样才能改善我不喜欢的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:45:39.687

我没有完整的答案给你。我确实有一些可能被证明有用的点点滴滴。

获取任何对象的属性键，包括匿名 json 对象：

```
Ember.keys(someObject); 
```

从 json 中设置对象的任何随机属性：

```
someObject.setProperties({json:"data"}); 
```

还有配套的吸气剂：

```
someObject.getProperties("key1", "key2");
someObject.getProperties(Ember.keys(someObject)); 
```

在您的情况下，列出键对于整理视图和在动态变化的数据集中逐个遍历每个属性非常有用。

我无法利用 Ember.keys() 动态列出要观察的属性。我担心你必须将你的简单 json 属性变成一个更智能的 Ember 对象，并通过实现“propertyDidChange”或其他东西在其上的一些“假”属性上设置观察者。

使用 setProperties 将允许您将“json”作为 Ember.Object 并仍然设置任何动态属性。观察对象的“任何”属性是困难的部分。我对 Ember 太陌生了，无法找到一种干净的方式来做到这一点……没有一堆观察者的东西。

# email - 使用脚本语言动态处理传入的电子邮件数据 -> 数据库

> ID：12503602
> 
> 赞同：3
> 
> 时间：2012-09-19T22:08:01.920
> 
> 标签：email, unix, scripting, imap, solaris

我想将传入的电子邮件（在 IMAP 帐户上）作为电子邮件获取客户端处理，并将电子邮件数据输入脚本语言以填充数据库中的特定表。主要目标是为数据挖掘和度量处理电子邮件正文。

最好在常见的类 UNIX 系统上运行：Linux、*BSD、Solaris

```
Infrastructure:

Mail Server <---using-IMAP--client<--- My Server--> Scripting lang. -> Database 
```

到目前为止我发现了什么：

*   MTA / [fetchmail](http://www.fetchmail.info/) & [procmail](http://www.procmail.org/)
*   [获取邮件](http://pyropus.ca/software/getmail/)（python 脚本）
*   使用[普通电子邮件客户端](http://www.washington.edu/pine/)将电子邮件抓取到 ~/.Mailbox 并处理它们（预计性能不佳）

关于什么可用于执行此类任务的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:09:23.033

对于 Python，[imaplib](http://docs.python.org/library/imaplib.html)实现了一个 IMAP4 客户端。

这和尼尔森的回答应该为您提供要遵循的模板：

1.  选择要在服务器上使用的脚本语言。
2.  它是否具有 IMAP 客户端库、扩展或内置功能？
3.  它是否有连接到您要使用的特定数据库（MySQL、Postgres、MSSQL 等）的连接器？
4.  如果 (2) 或 (3) 的答案为“否”，则返回步骤 1。
5.  ...
6.  利润！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T03:45:20.433

我自己完成了这个，我使用了 Python 和 imaplib。定期轮询 IMAP 服务器以查找和检索新邮件。就这么简单。简单是用引号引起来的，因为您需要了解 IMAP 协议才能使用 imaplib。

或者，您可以编写一个使用[context.io](http://context.io) API 的脚本。如果你这样做，你可能会在学习 IMAP 的复杂性方面为自己省去一些痛苦。

如果您能够自动将电子邮件从邮件服务器转发到另一个地址，那么您可能会考虑将您的电子邮件转发到 SendGrid 的 Parse API 或 Mailgun 等服务，它们会为您处理电子邮件并通过 API 调用（通常是比 IMAP 更容易理解）。

至于数据库，我发现 MongoDB使用 pymongo 库*非常*容易设置连接到 Python。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T15:44:24.463

您可以使用[**php-imap**](http://code.google.com/p/php-imap/)从 php 连接到 imap 帐户、检索电子邮件、搜索消息、删除它，当然还可以将其保存到数据库中。

# jquery - 如何在 jQuery Mobile 框架中使用图标（不使用按钮）

> ID：12503606
> 
> 赞同：12
> 
> 时间：2012-09-19T22:08:13.200
> 
> 标签：jquery, jquery-mobile

我希望使用 jQuery Mobile 内置的删除图标。

我知道如何使用按钮，您只需使用`data-role`- 但我想在普通的旧`span`或`div`.

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-30T23:08:33.850

刚刚升级到 JQuery Mobile 1.4.0 - 呃！......没有任何效果，直到以下解决方法：

```
<span class="ui-icon-delete ui-btn-icon-left " style="position:relative;" /> 
```

注意这个类`ui-btn-icon-left`（你可以使用其他类`-right`, `-top`, `-bottom`, `-notext`，但这一个似乎效果最好）。最重要的是，`style="position:relative"`最后把它放在我的容器里。

快乐的编码...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-20T14:42:44.477

例如，您可以将 a`div`与指定的类一起使用

```
<div class="ui-icon ui-icon-delete"></div> 
```

更新：

自首次发布以来，JQM 的样式表已更改，您可以通过将`ui-btn-icon-notext`类添加到您的元素来获得相同的效果（至少从 JQM 1.4.5 开始）。此外，您可能需要添加一个`position:relative;`以使其正确定位。

例如

```
 <span class="ui-btn-icon-notext ui-icon-delete" style="position:relative" /> 
```

[这是相关 API 的链接](http://api.jquerymobile.com/icons/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T22:14:48.250

如何在标记中使用`<span class="ui-icon ui-icon-delete ui-icon-shadow" style="display:block" />`或简单地引用`ui-icon-delete`该类？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-26T09:11:06.830

添加数据-iconpos="notext"

图标定位：

[http://demos.jquerymobile.com/1.1.2/docs/buttons/buttons-icons.html](http://demos.jquerymobile.com/1.1.2/docs/buttons/buttons-icons.html)

# jquery - 如何触发点击相应的索引

> ID：12503607
> 
> 赞同：0
> 
> 时间：2012-09-19T22:08:29.360
> 
> 标签：jquery, indexing

好的，

我有一个`div`锚点：

```
<div class="allTabs">
<a href="#">link 1a</a>
<a href="#">link 1b</a>
<a href="#">link 1c</a>
<a href="#">link 1d</a>
<a href="#">link 1e</a>
<a href="#">link 1f</a>
<a href="#">link 1g</a>
<a href="#">link 1h</a>
</div> 
```

然后是 ul：

```
<ul class="ppItemTabs">
<li>
<a href="#">link 2a</a>
</li>
<li>
<a href="#">link 2b</a>
</li>
<li>
<a href="#">link 2c</a>
</li>
<li>
<a href="#">link 2d</a>
</li>
<li>
<a href="#">link 2e</a>
</li>
<li>
<a href="#">link 2f</a>
</li>
<li>
<a href="#">link 2g</a>
</li>
</ul> 
```

我想要做的是点击函数`allTabs a`，它将获取那个a的索引，然后`trigger("click")`在`.ppItemTabs`（a）中的相应索引上。

我在让它工作时遇到了问题（换句话说，我尝试过的一切都没有奏效）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:18:24.020

```
$('.allTabs').on('click', 'a', function()
{
    $('.ppItemTabs').find('a:eq(' + $(this).index() + ')').trigger('click');
}); 
```

演示：[jsfiddle.net/6mqBt/](http://jsfiddle.net/6mqBt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:12:31.513

这样的事情怎么样。

```
$('.allTabs a').click(function(){
  $('.ppItemTabs li:eq('+$(this).index()+' a').click();
}); 
```

# php - 将变量从一个控制器方法传递到另一个

> ID：12503615
> 
> 赞同：0
> 
> 时间：2012-09-19T22:09:31.603
> 
> 标签：php, jquery, codeigniter, shared-state

我正在使用 CodeIgniter 框架。我加载了一个主视图，其中包含几个选项卡，这些选项卡`<div>`通过 AJAX 加载其他视图。我的控制器类如下所示：

```
class MainController extends MY_Controller
    function main($id=0)
    {
        $this->load->model('main_model');
        $this->data['info'] = $this->main_model->foo($id);
        $this->load->view('main_view', $this->data);
    }

    function tab1()
    {
        $this->load->view('tab1_view', $this->data);
    } 
```

}

我通过调用加载主页`mywebapp/main/123`。可`id`用于`main`方法和`main_view`. 但是当我单击选项卡时，我也想`id`在`<div>`in 中使用`main_view`。最好的方法是什么？也许有什么方法可以使这个变量对控制器中的每个方法都是全局的？

我使用 jQuery 加载选项卡：

```
$("#div").load(mywebapp/tab1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:14:27.967

利用`__construct()`

```
class MainController extends MY_Controller

protected $_id;

    public function __construct()
{
        $this->_id = $this->uri->segment(3);
}

    function main()
    {
        $this->load->model('main_model');
        $this->data['info'] = $this->main_model->foo($this->_id);
        $this->load->view('main_view', $this->data);
    }

    function tab1()
    {
        //available here too
        echo $this->_id;
        $this->load->view('tab1_view', $this->data);
    }
} 
```

或者，您可以将其更改为使用：`$this->uri->uri_to_assoc(n)`之后的键值对`/method/controller/key/value/key2/value2`

**例子：**

```
/user/search/name/joe/location/UK/gender/male

[array]
(
    'name' => 'joe'
    'location'  => 'UK'
    'gender'    => 'male'
) 
```

# javascript - 有什么方法可以从函数外部访问变量名作为函数的参数？

> ID：12503623
> 
> 赞同：1
> 
> 时间：2012-09-19T22:10:00.893
> 
> 标签：javascript, variables

我有一个简单的 JavaScript 函数，它允许访问者动态地将输入字段添加到表单中。在某些情况下，我需要在一个页面上多次调用这个函数，我试图通过只创建一个函数并将必要的参数传递给它来简化事情。

我的症结是我需要为我正在创建的每个输入类别设置一个计数器，以便我可以根据需要添加/删除输入。这是我到目前为止所得到的：

```
var assigneeCounter = 1;
var uploadCounter = 1;

function addInput(fieldlabel, inputclasses, inputCounterID, inputCounter){
  alert(inputCounter);
} 
```

调用该函数的 HTML 如下：

```
<a href="javascript:addInput('Assignee','required-text', 'assignees', 'assigneeCounter');">Add Another Assignee</a>
<a href="javascript:addInput('File Uploads','', 'uploads', 'uploadCounter');">Add Another File Upload</a> 
```

我的目标是让函数调用查找与其相关的特定变量（例如，assigneeCounter 用于 Assignees 输入，uploadCounter 用于 Uploads 等）。但是，当我警告该变量时，它只是写“assigneeCounter”而不是“1”。

我确定我只是在这里遗漏了一些关于变量范围的基本知识，而且我不是 JavaScript 专家，所以我想我会问那些是。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:12:09.443

您可以像这样访问它：

```
alert(window[inputCounter]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:12:37.187

是的。如果这些变量在全局范围内，您可以通过`window`对象访问它们：

```
window[inputCounter]; 
```

有关其工作原理的更多详细信息，请参阅[在 JavaScript 中使用动态变量名。](https://stackoverflow.com/questions/5117127/javascript-dynamic-variable-name)

# javascript - 了解 Document.createElement()

> ID：12503624
> 
> 赞同：3
> 
> 时间：2012-09-19T22:10:07.773
> 
> 标签：javascript, gwt, dom

我正在使用`GWT`它的底层`DOM`功能。

我基本上想要实现的是：

*   有一个包含`div`一些文本的元素
*   其中一些文本将被`span`元素包围
*   跨度元素可以相互拖拽并提供上下文菜单
*   `span`最终用户可以动态创建新元素

***这就是它的样子：***

![这就是它的样子](../Images/f987808d514736038aac9dfa6702ff13.png)

在应用程序启动时，以及在最终用户动态创建的过程中`spans`，我必须做一些操作（创建`Element`、`Nodes`插入、修改、删除）。为了实现这一点，我必须通过 DOM 树才能找到特定的元素。

我正在寻找方法来减少**在应用程序启动**时花费的无用时间，我在其中构建我的`div`元素（包含所有文本和`span`元素）。

举个例子：

```
DivElement outermostDiv = Document.get().createDivElement();
processText(outermostDiv, text); // text could be a Java String element
turnTheseIntoSpans(listOfSpans, outermostDiv); // listOfSpans could be a list of text that must be surrounded by span elements. 
```

让我们想象一下，使用 : , , ...等方法对元素进行`turnTheseIntoSpans`大量修改`outermostDiv``appendChild()``removeFromParent()`

***我的问题是：***

1.  *在将outermostDiv*及其子项插入 DOM 之前修改它是一种好习惯吗？

2.  我可以访问`outermostDiv`孩子，孩子的兄弟姐妹，而无需将其添加到`DOM`. 我想了解在`outermostDiv`添加到 DOM 之前如何存在可浏览的元素树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:08:55.497

`Document.createDivElement()``com.google.gwt.dom.client.Node`通过调用以下 JavaScript创建一个实现 的对象：

```
return doc.createElement('div'); 
```

这样的节点最初并未附加到文档树，但即使在它之前，您已经可以对其执行大多数操作（除了需要其父节点的操作，因为它仍然为空）。

注意：节点是由稍后将附加到的同一文档创建的（这是必要的，因为由不同文档创建的节点可能不兼容 - 所以您不能总是将所有节点附加到任何地方）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:39:26.510

为了限定这个问题，我必须首先承认我是一个纯粹的前端——我没有玩过 GWT，我写的是原始的 Javascript，所以这个答案是基于浏览器内 DOM 的深奥知识。

1.  是的！实时文档 DOM 操作成本很高。在插入之前操作 DOM 要快得多，因为样式计算、布局重排计算和 DOM 突变事件等只运行一次，而不是每次修改都运行一次。

2.  它存在于 DOM 中——DOM 只是最初用于创建它的 XML 操作抽象——它根本还不是文档 DOM 的一部分，以及由此带来的所有其他复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:29:02.973

我认为您应该使用 StringBuilder 来实现。您可以使用 StringBuilder 进行所有操作（插入标签、更改其位置等），完成后，将其内容作为字符串添加到 HTML 小部件。它比创建元素、添加子元素等要快得多。

# ruby-on-rails - Rails 的空表单数据问题

> ID：12503629
> 
> 赞同：0
> 
> 时间：2012-09-19T22:10:39.397
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我厌倦了拉扯我的头发......有人可以告诉我这段代码发生了什么吗？

基本上，我只是想从表单中获取数据。我检查了数百次我的控制器、模型和视图，但没有机会让事情正常工作。尽管我填写了所有字段，但我的调试 @program 结果总是这样：空白。

```
 --- !ruby/object:Program attributes:   
id:    
title:    
content:   
active:    
created_at:    
updated_at: 
```

以下是代码：

控制器：

```
 class ProgramsController < ApplicationController
  def index
    @program = Program.all
  end

  def show
    @program = Program.find(params[:id])
  end

  def create
    @program = Program.new

    if @program.save
      redirect_to 'index'
    else
      render 'new'
    end
  end

  def new 
    @program = Program.new
  end

  def edit
  end

  def destroy
  end
end 
```

模型：

```
class Program < ActiveRecord::Base
  attr_accessible :active, :content, :title

  validates :title, presence: true
  validates :content, presence: true

end 
```

看法：

```
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Program Adding</title>
</head>
<body>

    <% if @program.errors.any? %>
    <% @program.errors.full_messages.each do |msg| %>
    <%= msg %>
    <% end %>
    <% end %>

    <%= form_for(@program) do |p|%>
    <%= p.label :title%><br />
    <%= p.text_field :title %><br />

    <%= p.label :content%><br />
    <%= p.text_area :content %><br />

    <%= p.label :active%><br />
    <%= p.text_field :active %><br />

    <%= p.submit %>

    <% end %>

    <%= debug @program %>

</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:09:42.370

您似乎没有将表单值传递给您的创建操作。

```
@program = Program.new 
```

尝试将该行替换为

```
@program = Program.new(params[:program]) 
```

这一切都假设您使用的是标准的宁静路由。

干杯。

# ruby - 如何在 Ruby 中修改以前设置的 XML 节点？

> ID：12503630
> 
> 赞同：0
> 
> 时间：2012-09-19T22:10:42.620
> 
> 标签：ruby, xml-builder

我有这样的功能：

```
def add_auth_fields
    xml = Builder::XmlMarkup.new(:target => '')
    xml.instruct! :xml

    xml.inquiry do |inquiry|
      inquiry.authentication do |auth|
        auth.username USERNAME
        auth.password PASSWORD
      end
    end

    xml
end 
```

以后如何访问该`xml.inquiry`节点以在该节点内添加更多数据？

如果我`xml.inquiry do |inquiry|`再次调用，它只会向我的 xml 添加另一个节点。

这是另一个示例，我想更改 foo 的值，但它正在向 xml 添加另一个 foo 节点。

```
[195] pry(main)> xml_markup = Builder::XmlMarkup.new
=> <pretty_inspect/>

[196] pry(main)> xml_markup.foo 'bar'
=> "<pretty_inspect/><foo>bar</foo>"

[197] pry(main)> xml_markup.foo 'test'
=> "<pretty_inspect/><foo>bar</foo><foo>test</foo>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:35:40.243

Builder 似乎不支持您要查找的内容，生成的 XML 存储为字符串而不是节点或任何其他数据类型。

您应该重构您的代码，以便您希望在 XML 中呈现的数据至少在一个变量中进行管理，或者作为模型类或类集合进行管理；并将 XML 的表示与数据的存储和逻辑分开。

您还可以尝试另一个支持使用非字符串数据类型的 gem，例如[Gyoku](https://github.com/savonrb/gyoku "玉")或[Nokogiri](http://nokogiri.org/Nokogiri/XML/Builder.html "野小切")。例如，使用 Gyoku，您可以从普通的 ruby​​ 散列创建 XML，并在必要时简单地编辑散列中的值。您可以在任何时候使用`Gyoku.xml(my_hash)`.

# php - JQuery .eq 选择器不选择元素

> ID：12503634
> 
> 赞同：-1
> 
> 时间：2012-09-19T22:11:22.543
> 
> 标签：php, jquery, html, css, wordpress

我正在尝试制作一个简单的图像旋转器，它将通过 php 数组中的多个设置图像进行旋转。数组输出正确地放置图像，样式工作，甚至淡出活动元素的 JQuery。它只是找不到下一个元素并使用console.log（），我知道它正在计算正确的元素。我什至尝试在 .eq() 中输入一个数字（如 3），以查看它是否会选择该元素，但它不会。这是我的代码：

PHP代码：

```
$randomNumber = rand(0);

$performanceImages = array("09_15_11-Lorton_opening_088.jpg", 
                            "09_15_11-Lorton_opening_120.jpg",
                            "09_15_11-Lorton_opening_123.jpg",
                            "09_15_11-Lorton_opening_125.jpg",
                            "09_15_11-Lorton_opening_126.jpg",
                            "09_15_11-Lorton_opening_128-150x150.jpg",
                            "09_15_11-Lorton_opening_131.jpg",
                            "09_15_11-Lorton_opening_132.jpg",
                            "09_15_11-Lorton_opening_135-199x300.jpg",
                            "09_15_11-Lorton_opening_137-150x150.jpg",
                            "09_15_11-Lorton_opening_144.jpg",
                            "09_15_11-Lorton_opening_161.jpg");

$randomNumber = rand(0, (sizeof($performanceImages) - 1) );

for ($cnt = 0; $cnt < sizeof($performanceImages); $cnt++) {
    if ($cnt == $randomNumber) {
        echo '<div id="rotator-image" class="active" style="display:block;"><img src="'.get_bloginfo('template_directory').'/images/rotation-images/'.$performanceImages[$cnt].'" /></div>';
    } else {
        echo '<div id="rotator-image" style="display:none;"><img src="'.get_bloginfo('template_directory').'/images/rotation-images/'.$performanceImages[$cnt].'" /></div>';
    }
} 
```

CSS：

```
#sidebar-image-rotator {
width: 180px;
height: 263px;
position: relative; 
}

#rotator-image {
position: absolute;
top: 0;
left: 0;    
} 
```

查询：

```
function sidebarImageRotator(){

var count = $("#sidebar-image-rotator").children("#rotator-image").length;
//console.log(count);
var active = $('#rotator-image.active').index();
//console.log(active);

if ((active + 1) < count) {
    var next = active + 1;
} else {
    var next = 0;
}
//console.log(next);

//change div classes
$("#rotator-image.active").fadeOut('slow', function () {
    $("#rotator-image.active").removeClass("active").css("display","none");
    $('#sidebar-image-rotator').find('#rotator-image').eq(next).addClass('active').fadeIn('slow', function () {
        $('#rotator-image.active').css('display', 'block');
    })
}); 
}  

function startTimer() {
//timer for the box
window.timer = window.setInterval(function() {
    $("#sidebar-image-rotator").timer();
}, 7000);

jQuery.fn.timer = function() {
    sidebarImageRotator();
}
} 
```

加载页面时正在调用 startTimer()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:20:43.303

HTML id 必须是 unqiue。jQuery 只会找到第一个 id，改为使用类。

类似于以下内容

示例 PHP 循环：

```
for ($cnt = 0; $cnt < sizeof($performanceImages); $cnt++) {
    if ($cnt == $randomNumber) {
        echo '<div class="rotator-image active" style="display:block;"><img src="'.get_bloginfo('template_directory').'/images/rotation-images/'.$performanceImages[$cnt].'" /></div>';
    } else {
        echo '<div class="rotator-image" style="display:none;"><img src="'.get_bloginfo('template_directory').'/images/rotation-images/'.$performanceImages[$cnt].'" /></div>';
    }
} 
```

示例 CSS

```
.rotator-image {
position: absolute;
top: 0;
left: 0;    
} 
```

示例 jQuery

```
var count = $("#sidebar-image-rotator").children(".rotator-image").length;
//console.log(count);
var active = $('.rotator-image.active').index();
//console.log(active);

if ((active + 1) < count) {
    var next = active + 1;
} else {
    var next = 0;
}
//console.log(next);

//change div classes
$(".rotator-image.active").fadeOut('slow', function () {
    $(".rotator-image.active").removeClass("active").css("display","none");
    $('#sidebar-image-rotator').find('.rotator-image').eq(next).addClass('active').fadeIn('slow', function () {
        $('.rotator-image.active').css('display', 'block');
    })
}); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T22:26:47.903

`id`属性应该是唯一的；您的选择器`#rotator-image`将返回*id=rotator-image*的第一个元素并忽略其余元素。您可以明确地选择 id 代替：

```
$('#sidebar-image-rotator').find('[id=rotator-image]').eq(next) 
```

一个更好的主意是在你的元素上使用一些其他属性，比如`rel`or`data-type`或其他。

```
<div rel='rotator-image' ... ></div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T22:25:14.313

认为这是问题

```
if ((active + 1) < count) {
        **var next = active + 1;**
    } else {
        var next = 0;
    } 
```

您需要在函数之外声明**var next**。否则每次调用该函数时，它都会被一个新实例替换

# android - 我可以通过电子邮件发送 apk 文件而不创建密钥库/签署我的应用程序吗？

> ID：12503636
> 
> 赞同：0
> 
> 时间：2012-09-19T22:11:29.940
> 
> 标签：android, apk

我想通过电子邮件将我的 apk 文件发送给某人。我一开始只是`apk`从我的`/bin`文件夹中复制文件，但是当它安装在另一台设备上时，它得到了一个`Parse Error`. 我一直在环顾四周，发现人们说要导出文件的一些问题。我开始了导出过程，但它要求我创建一个密钥库。我不太确定那是什么，但从我读到的内容来看，你是如何签署你的申请的。

有没有在不签署应用程序的情况下向某人发送 apk 文件？

如果用户将他们的平板电脑设置为调试模式，是否需要对应用程序进行签名？

它在我的测试设备上运行，是因为我通过 Eclipse 运行它吗？

如果我需要签署我的申请，这是一个永久性的举动，还是我可以回去编辑我所做的事情？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T22:34:27.317

阅读官方开发指南 -[签署您的应用程序](http://developer.android.com/tools/publishing/app-signing.html)，它回答了您的所有问题。

### 有没有在不签署应用程序的情况下向某人发送 apk 文件？

是的，通过电子邮件、闪存驱动程序等，但他们将无法安装它们。

### 如果用户将他们的平板电脑设置为调试模式，是否需要对应用程序进行签名？

> 所有申请都必须签名。如果未签名，系统将不会在模拟器或设备上安装应用程序。

### 它在我的测试设备上运行，是因为我通过 Eclipse 运行它吗？

> 为了测试和调试您的应用程序，构建工具使用由 Android SDK 构建工具创建的特殊调试密钥对您的应用程序进行签名。

### 如果我需要签署我的申请，这是一个永久性的举动，还是我可以回去编辑我所做的事情？

一般来说，您可以在代码中编辑您想要的所有内容，签名仅用于 Google Play 的发布过程，如果您希望您的用户接收更新，请使用相同的密钥库对修改后的 apk 进行签名。因此，请务必将您自己的私钥存储文件安全地保存在云端，因为相同的私钥不可重新创建。有关更多详细信息，请参阅开发指南。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T22:35:57.893

如果您正在使用 Eclipse，您可以右键单击该项目并选择“Android 工具 > 导出未签名应用程序”（如果需要，也可以选择已签名应用程序）。

但是，我不知道 Android 是否允许安装未签名的应用程序。可能不是，这是我的猜测。

你有什么不想签的理由吗？真的不难。

如果您在 Mac 或 Linux 上工作，则可以从命令行轻松完成：

如果您的系统上安装了 Java，则 keytool 应该已经在您的路径中。您还需要将*androidsdk* /tools/ 放在您的路径中，或者您可以在需要时输入完整路径。

只需给出以下命令：

```
 keytool -genkey -alias JuiCe -validity 20000 -keystore ~/.android/my-keystore
  jarsigner -keystore ~/.android/my-keystore myApplication.apk JuiCe
  zipalign -v 4 myApplication.apk myapp.zip 
```

然后将 myapp.zip 发送给您的用户。

编辑添加：

我认为 yorkw 有更好的答案。

我还想提一下，Eclipse 用来为您的 apk 签名的调试签名*应该*有效。我怀疑该 apk 在交付给您的用户时以某种方式损坏。或者你可能安装错了。

首先，在接收设备上，您需要转到**Settings > Applications**并检查**Unknown sources**。

接下来，如果 adb 可用，请执行“adb install *myapp* .apk”。

如果 adb 不可用，请将 apk 文件放在 sdcard 上的某个位置并运行文件管理器（OIFileManager 或 Astro 是不错的选择）。文件管理器将允许您在设备上安装 apk。

您还可以让您的用户从 Internet 下载 apk。然后浏览器的**下载**菜单项将允许您安装它。

# tablesorter - 为什么我的 tablesorter 不断缓存我的旧行？

> ID：12503637
> 
> 赞同：7
> 
> 时间：2012-09-19T22:11:33.247
> 
> 标签：tablesorter

我正在使用 tablesorter 对我的一个页面上的网格进行排序。我每 10 秒进行一次 AJAX 调用以获取更新的股票信息，并相应地更新我的网格。这么多工作，但我无法让我的排序选项正确缓存。相反，我似乎已经缓存了排序，但是当我这样做时，tablesorter 也会缓存我以前的行，并将它们与新的、已排序的行集一起显示。

例如，我的初始网格有 10 行数据。我在第二列排序。10 秒后，一组新的 10 行进入，但我最初的 10 行仍然显示，即使我已经清空它们。我已经研究过，我似乎无法找到答案。

如果我根本不排序，并且我没有调用“sorton”的触发器，我会根据需要得到我的 10 行，但这些行当然没有排序。如果我将该触发器称为“sorton”，我的数据将被排序，但每次调用该函数时我都会获得 10 行新行（总共 20 行，然后总共 30 行等）。

这是我的 AJAX 调用中的代码：

```
if (myResult.Data.length > 0) {
    $.each(myResult.Data, function() {
        myRows += "<tr><td>" + this.column1 + "</td><td>" + this.column2 + "</td></tr>";
    });
    $("#myTBody").empty();
    //    $("#myTBody").append(myRows);    //tried this first
    //    $("#myTable").trigger("update"); // combined with this
    $("#myTBody").append(myRrows).trigger("update");
    var sorting = $("#myTable")[0].config.sortList;
    $("#myTable").trigger("sorton", [sorting]);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-01T03:06:10.667

虽然这篇文章很旧，但以防万一像我这样的人正在寻找原始表格排序器的修复程序，我通过`sorton`以下“延迟”方式触发来解决问题。

```
$("#myTBody").append(myRrows).trigger("update");
var sorting = $("#myTable")[0].config.sortList;
setTimeout(function () {
    $("#myTable").trigger("sorton", [sorting]);
}, 100); 
```

这样做的原因是因为`update`原始 tablesorter 中的函数不会立即更新缓存。`update`它在调用方法后 1ms 更新它。因此，`sorton`无法立即获取更新的缓存。这是我阅读原始JS代码后得出的结论，如果我错了，请纠正我。

演示：http: [//jsfiddle.net/eY8uH/692/](http://jsfiddle.net/eY8uH/692/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T02:49:45.203

嗯，这似乎是原始 tablesorter ( [demo](http://jsfiddle.net/Mottie/eY8uH/208/) ) 的问题。

抱歉，我不记得更新期间没有清除缓存的原因；但是这个问题并没有发生在我[的 tablesorter 分支](http://mottie.github.com/tablesorter/docs/)（[demo](http://jsfiddle.net/Mottie/eY8uH/209/)）中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T10:35:44.190

不使用超时的解决方案：

```
$("#myTBody")
  .append(myRrows);
$("#myTable")
  .trigger("update")
  .trigger("sorton", [$("#myTable")[0].config.sortList])
  .trigger("appendCache"); 
```

基于：[https ://stackoverflow.com/a/2013571/451962](https://stackoverflow.com/a/2013571/451962)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-24T02:51:06.007

旧帖子，但最近遇到了这个问题，对我来说这很有效

```
$("#myTable")[0].config.cache = null;
$("#myTable").trigger("sorton"); 
```

它只是保留缓存，要么我找不到任何合理的标志来避免它，所以我将它设置为 null

# python - python 列表似乎随着 self.request.get_all(

> ID：12503642
> 
> 赞同：1
> 
> 时间：2012-09-19T22:12:06.960
> 
> 标签：python, google-app-engine

**更新 0**

下面是我的模板代码。

```
There is a potential collision in your reservation at <emph style="font-weight: bold">{{ location_id }}</emph>
<br /><br />
<form action="/unexpected" method="post" >
       <input type="hidden" name="location_id" value="{{ location_id }}"></input>
       <input type="hidden" name="cases" value="{{ cases|safe }}"></input>
    <table border="1" cellpadding="2" 
      cellspacing="0" class="sortable" id="unique-id" align="center">
      <thead> 
<tr> 
<td>Time</td>
<td>Court</td>
<td>Currently signed up</td>
<td>You could sign up this person</td>
</tr></thead>

    <tbody>
    {% for time in times %}
<tr> 
    {% for column in time %}
    <td >
    {{ column|safe }}
    </td>
    {% endfor %}
</tr> 
{% endfor %}
    </tbody>
</table>
<div id="inputdata">

<label>Click the "Submit" button after selecting your option(s) above. Another option is to press the browser back button and then refresh/reload the page to see the current status without taking action here.
</label>
<input type="submit" value="submit" />
</div>
</form> 
```

**更新 0**

[这个问题来自这个问题](https://stackoverflow.com/questions/12502612)

我有这个`def post()`代码。

```
 cases=[]
    for res in tempres:
        r = TempReservations.get_or_insert(time[2],parent=res[8], day = int(res[9]))
        r.hour = res[0][0]
        r.minute = res[0][1]
        r.time = res[0][2]
        r.name = res[4]
        r.hiddenname = res[5]
        r.court_id = res[6]
        r.weekday = res[7]
        r.weekday_key = str(res[8])
        r.put()

        cases.append(r.court_id+str(r.hour)+str(r.minute))
        tt=r.court_id+str(r.hour)+str(r.minute)
        logging.info("string: %s" % tt)
        logging.info("cases: %s" % cases)
        for case in cases:
            logging.info("case: %s" % case)
    template_values = {'times':times,'cases':cases,'location_id':location_id}
    path = os.path.join(TEMPLATE_DIR, 'collisions.html')
    self.response.out.write(template.render(path, template_values)) 
```

这会在日志中产生以下内容。

```
INFO     2012-09-19 21:46:43,064 views.py:207] string: court11730
INFO     2012-09-19 21:46:43,064 views.py:208] cases: [u'court11730']
INFO     2012-09-19 21:46:43,064 views.py:210] case: court11730
INFO     2012-09-19 21:46:43,080 dev_appserver.py:2967] "POST /read/Rogers HTTP/1.1" 200 - 
```

在用户进行了需要下面代码的更改后，下面的 post 代码从前面的代码中获取提交按钮的输出。

```
def post(self):
    location_id=self.request.get('location_id')
    cases=self.request.get_all('cases')
    for case in cases:
        logging.info("cases: %s " % cases)
        logging.info("case: %s " % case)
        logging.info("kcase: %s " % 'k'+case)
        key=str(self.request.get('k'+case))
        logging.info("key: %s " % key) 
```

日志为此代码生成了以下内容。

```
INFO     2012-09-19 21:47:47,320 views.py:678] cases: [u"[u'court11730']"] 
INFO     2012-09-19 21:47:47,320 views.py:679] case: [u'court11730'] 
INFO     2012-09-19 21:47:47,320 views.py:680] kcase: k [u'court11730']
INFO     2012-09-19 21:47:47,320 views.py:682] key:  
ERROR    2012-09-19 21:47:47,321 webapp2.py:1553] Invalid string key .
  File "/Users/brian/googleapps/scheduler/views.py", line 684, in post
    res = Reservations.get(key) 
```

注意上面的第 208 行和上面的第 678 行是如何`cases`变化的，现在似乎是列表中的列表，而不仅仅是列表，因此现在`case`单数是单个列表而不是字符串。我认为这会导致错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:35:02.907

要将列表作为隐藏元素传递到表单中，您需要为`<input type="hidden"/>`列表中的每个项目创建一个新元素：

```
<form action="/unexpected" method="post" >
<input type="hidden" name="location_id" value="{{ location_id }}"/>
{% for item in cases %}
  <input type="hidden" name="cases" value="{{ item }}" />
{% endfor %} 
```

请注意，根据 HTML 标准，`<input />`元素必须是空元素（因此使用）。`<../>`

# javascript - 有没有办法重新加载 iframe 正文内容并跳过脚本重新加载？

> ID：12503648
> 
> 赞同：0
> 
> 时间：2012-09-19T22:12:36.130
> 
> 标签：javascript, html, iframe

我有一个页面，其中包含一个 iframe 和一个菜单，该菜单在位于我的服务器上的页面之间导航，应该加载到 iframe 中。
所有页面共享大的javascript文件，我想知道是否有办法只重新加载内页的内容，而不重新加载脚本，或者是否有办法在“主”页面上加载脚本，并使用他们在内页。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:49:16.837

如果您担心大小并害怕重复下载相同的文件 - 最好的方法是让浏览器缓存这些文件。实际上，如果您做对了 - js 文件已经必须被缓存并且不会在 iframe 重新加载时再次下载。（此外，您可以将 AppCache 用于现代浏览器）。

缓存可能是一件棘手的事情，但您可以检查 HTTP 标头在请求此文件时返回的内容，并根据您的需要调整它们。 **缓存控制**，**最大年龄**和**过期**你的第一个朋友。

# java - 无法加载 ApplicationContext

> ID：12503650
> 
> 赞同：0
> 
> 时间：2012-09-19T22:12:54.667
> 
> 标签：java, eclipse, spring

我正在尝试从 Eclipse 中运行 junit 测试，但出现“加载 ApplicationContext 失败”异常。原因是它试图加载一个使用另一个 spring-config 中定义的变量的 spring-config。例如：

common-beans.xml 使用 ${domain} 和 ${realm}
，它们在 config2.xml 中定义为：

```
<bean id="AppConfigHelper" class="AppConfigHelper">
    <property name="appName" value="Service"/>
    <property name="domain" value="unittest"/>
    <property name="realm" value="asdf"/>
    <property name="root" value="./build/private/unittestroot"/>
</bean> 
```

java.lang.IllegalStateException：无法加载ApplicationContext org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 原因：org.springframework.beans.factory.BeanDefinitionStoreException：无效的bean定义与名称URL [file:spring-configuration/common/common-beans.xml] 中定义的“bucketPartitionMapper”：***无法解析占位符“域”***

我如何让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:03:02.547

如错误所述，Spring 无法解析“域”占位符。这意味着，在 common-beans.xml 中，您正在使用 ${domain}，但 Spring 无法找到该占位符的值。您粘贴的代码仅为 AppConfigHelper 的域属性设置域属性，它*没有*设置占位符。

为了设置占位符，创建一个名为 application.properties 的文件并让它包含以下内容：

> 域=YOUR_DOMAIN_HERE

然后您需要在您的应用程序中设置一个 PropertyPlaceholderConfigurer，如下所示：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location">
        <value>application.properties</value>
    </property>
</bean> 
```

这里有一些资源可以帮助您： [PropertyPlaceHolderConfigurer javadoc](http://static.springsource.org/spring/docs/3.1.0.RELEASE/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html) and [an example](http://www.mkyong.com/spring/spring-propertyplaceholderconfigurer-example/)

# c# - 获取 IEnumerable 从 WCF RIA DomainServiceClass 到 Silverlight

> ID：12503652
> 
> 赞同：0
> 
> 时间：2012-09-19T22:13:01.407
> 
> 标签：c#, silverlight, wcf-ria-services

我目前正在使用 WCF RIA 域服务类来生成字典对象列表。

```
 [Invoke]
    public IEnumerable<IDictionary> GenerateData()
    {
        List<IDictionary> newList = new List<IDictionary>();
        for (var i = 0; i < 10; i++)
        {
            var dict = new Dictionary<string, object>();
            dict["ID"] = Guid.NewGuid();
            dict["Name"] = "Name_" + i;
            dict["Index"] = i;
            newList.Add(dict);
        }
        return newList;
    } 
```

我想将此列表传递给 Silverlight：

```
DomainContext _myContext = new DomainContext();
InvokeOperation<IEnumerable<IDictionary>> loadop4 = this._myContext.GenerateData();
loadop4.Completed += new System.EventHandler(loadop4_callback);

void loadop4_callback(Object sender, System.EventArgs e)
{
    InvokeOperation<IEnumerable<IDictionary>> iop = sender as InvokeOperation<IEnumerable<IDictionary>>;
    //... do stuff with IOP  
} 
```

但它在 VS2010 中给了我这个错误：

```
Error 1 Operation named 'GenerateData' does not conform to the required signature. Return types must be an entity or complex type, a collection of entities or complex types, or one of the predefined serializable types. 
```

我该如何解决？我认为 Silverlight 支持字典列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:08:55.233

ria 服务支持的唯一字典是字典，因此，无法发送如此复杂的对象。我宁愿序列化我的字典（DataContractSerializer 可以很容易地做到这一点）并将字符串的 IEnumerable 返回给客户端，然后您可以在其中对其进行反序列化。

编辑：我刚刚在我的博客上为此写了[一篇小帖子](http://mcasamento.blogspot.it/2012/09/wcf-ria-services-overcoming-limitations.html)

# python - 如何以表格形式打印多个对象的参数？

> ID：12503655
> 
> 赞同：3
> 
> 时间：2012-09-19T22:13:24.743
> 
> 标签：python, layout

我有一个对象列表，我想在一个漂亮的表中打印每个对象的参数。

我的代码在这里：

```
class item(object):
    def __init__(self, thing, owner, color):
        self.thing = thing
        self.owner = owner
        self.color = color

bin = []
bin.append(item('shirt', 'John', 'red'))
bin.append(item('skirt', 'Jane', 'blue'))    

## Need help here
## Can't figure this out

print '%-10s %-10s %-10s' % (bin[0].thing, bin[0].owner, bin[0].color) 
```

我想要得到的输出是

```
shirt       skirt
John        Jane
red         blue 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T22:30:50.897

这是我很久以前发现的东西，它非常有用并且仍然有效。我最近终于开始让它与大多数最新的 Py 2.7.x 和 3.x 标准保持同步，尽管大多数更改都是我所说的装饰性和/或相当微不足道的。

```
# File:    textformatter.py
# Author:  Hamish B Lawson
# Date:    19 Nov 1999
# from http://www.faqts.com/knowledge_base/view.phtml/aid/4517
# Viewable via Internet Archive WayBackMachine:
# https://web.archive.org/web/20080709071216/http://www.faqts.com/knowledge_base/view.phtml/aid/4517
"""
Here is TextFormatter, a simple module for formatting text into
columns of specified widths. It does multiline wrapping and supports
LEFT, CENTER (or CENTRE), and RIGHT alignment.

Revisions:
    SKWM    Made filling & padding optional, tweaked some edge cases.
    MRM     Removed import of deprecated string module, made all classes
            explicitly new style, capitalized public constants, updated
            documentation. Tweaked test() function.
    MRM     Modified to work in both Python 2.7 and 3.x.
"""
from __future__ import print_function

LEFT, CENTER, RIGHT = range(3)
CENTRE = CENTER

class TextFormatter(object):
    """
    Formats text into columns.

    Constructor takes a list of dictionaries that each specify the
    properties for a column. Dictionary entries can be:

       'width'     : the width within which the text will be wrapped
       'alignment' : LEFT | CENTER | RIGHT
       'margin'    : number of space characters to prefix in front of column

    The compose() method takes a list of strings and returns a formatted
    string consisting of each string wrapped within its respective column.

    Example:
        import textformatter

        formatter = textformatter.TextFormatter(
            (
                {'width': 10},
                {'width': 12, 'margin': 4},
                {'width': 20, 'margin': 8, 'alignment': textformatter.RIGHT},
            )
        )

        print(formatter.compose(
            (
                "A rather short paragraph",
                "Here is a paragraph containing a veryveryverylongwordindeed.",
                "And now for something on the right-hand side.",
            )
        ))

    gives:

        A rather      Here is a                    And now for
        short         paragraph               something on the
        paragraph     containing a            right-hand side.
                      veryveryvery
                      longwordinde
                      ed.

    """
    class Column(object):

        def __init__(self, width=75, alignment=LEFT, margin=0, fill=1, pad=1):
            self.width = width
            self.alignment = alignment
            self.margin = margin
            self.fill = fill
            self.pad = pad
            self.lines = []

        def align(self, line):
            if self.alignment == CENTER:
                return line.center(self.width)
            elif self.alignment == RIGHT:
                return line.rjust(self.width)
            else:
                if self.pad:
                    return line.ljust(self.width)
                else:
                    return line

        def wrap(self, text):
            self.lines = []
            words = []
            if self.fill:  # SKWM
                for word in text.split():
                    wordlen = len(word)
                    if wordlen <= self.width:  # fixed MRM
                        words.append(word)
                    else:
                        for i in range(0, wordlen, self.width):
                            words.append(word[i:i+self.width])
            else:
                for line in text.split('\n'):
                    for word in line.split():
                        for i in range(0, len(word), self.width):
                            words.append(word[i:i+self.width])
                    words.append('\n')
                if words[-1] == '\n': words.pop() # remove trailing newline

            if words:
                current = words.pop(0)
                for word in words:
                    increment = 1 + len(word)
                    if word == '\n':
                        self.lines.append(self.align(current))
                        current = ''
                    elif len(current) + increment > self.width:
                        self.lines.append(self.align(current))
                        current = word
                    else:
                        if current:
                            current = current + ' ' + word
                        else:
                            current = word
                if current: self.lines.append(self.align(current))

        def getline(self, index):
            if index < len(self.lines):
                return ' '*self.margin + self.lines[index]
            else:
                if self.pad:
                    return ' ' * (self.margin + self.width)
                else:
                    return ''

        def numlines(self):
            return len(self.lines)

    def __init__(self, colspeclist):
        self.columns = []
        for colspec in colspeclist:
            self.columns.append(TextFormatter.Column(**colspec))

    def compose(self, textlist):
        numlines = 0
        textlist = list(textlist)
        if len(textlist) != len(self.columns):
            raise IndexError("Number of text items does not match columns")
        for text, column in zip(textlist, self.columns):
            column.wrap(text)
            numlines = max(numlines, column.numlines())
        complines = [''] * numlines
        for ln in range(numlines):
            for column in self.columns:
                complines[ln] = complines[ln] + column.getline(ln)
        return '\n'.join(complines) + '\n'

def test():
    import textformatter

    formatter = textformatter.TextFormatter(
        (
            {'width': 10},
            {'width': 12, 'margin': 4, 'fill': 0},
            {'width': 20, 'margin': 8, 'alignment': textformatter.RIGHT},
        )
    )

    print(formatter.compose(
            (
                "A rather short paragraph",
                "Here is\na paragraph containing a veryveryverylongwordindeed.",
                "And now for something\non the RIGHT-hand side.",
            )
         )
    )

__all__ = [TextFormatter, LEFT, CENTER, CENTRE, RIGHT]

if __name__ == '__main__':
    test() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T22:16:11.250

```
for attr in ('thing', 'owner', 'color'):
    for item in bin:
        print '%-10s'%getattr(item, attr),
    print 
```

使用列表推导更紧凑

```
for atts in ('thing', 'owner', 'color'):
    print ' '.join('%-10s'%getattr(item, attr) for item in bin) 
```

# perl - 在 Perl 中按值和键的一部分对哈希进行排序

> ID：12503657
> 
> 赞同：0
> 
> 时间：2012-09-19T22:13:33.367
> 
> 标签：perl, sorting, hash

我有一个名称和等级（键）的哈希值和一个数字（值），格式如下：

```
"\nName\nSecondName\nRank: 12345/150000" => 100

"\nThirdName\nFourthName\nRank: 24567/150000" => 71

"\nFifthName\nSixthName\nRank: 10101/150000" => 71 
```

等等 150,000 次...

使用 Perl，我想主要按值编号对哈希进行排序，然后再按排名的第一个数字，如下所示：

```
"\nName\nSecondName\nRank: 12345/150000" => 100

"\nFifthName\nSixthName\nRank: 10101/150000" => 71

"\nThirdName\nFourthName\nRank: 24567/150000" => 71 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:23:33.867

```
my @ordered_keys =
    sort {
       $hash{$b} <=> $hash{$a}
    ||
       ($a =~ m{: ([0-9]+)/})[0] <=> ($b =~ m{(: [0-9]+)/})[0]
    }
    keys %hash;

for my $key (@ordered_keys) {
   my $val = $hash{$key};
   ...
} 
```

# ios6 - iOS6模拟器中的顶部主页按钮纵向方向不起作用

> ID：12503658
> 
> 赞同：7
> 
> 时间：2012-09-19T22:13:34.523
> 
> 标签：ios6, xcode4.5

几分钟前我设置了 XCode 4.5 和 iOS6 模拟器。我的应用程序支持 iPhone 的所有**4 个**方向，纵向底部和顶部主页按钮，横向左右。

好吧，我把它放到 .plist 中，因为它是 iOS6 所要求的，而且旧的 shouldRotateTo... 方法仍然存在，返回 YES。

但在模拟器中，应用程序**不会**旋转到纵向顶部主页按钮。

为什么？这是故意的吗？它会在设备上正常工作吗？

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T18:22:48.833

好的，我现在自己找到了答案。

拥有是不够的

```
- (BOOL)shouldAutorotate {

    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskAll;
} 
```

在您的 ViewController 中，如果它被推入`UINavigationViewController`. `UINavigationViewController`也得有那些方法。最好通过在`UINavigationViewController`.

这是我的`UINavigationController-Rotation.h`：

```
@interface UINavigationController (Rotation)
@end 
```

和我的 UINavigationController-Rotation.m：

```
#import "UINavigationController-Rotation.h"

@implementation UINavigationController (Rotation)

#pragma From UINavigationController

- (BOOL)shouldAutorotate {

    BOOL result = self.topViewController.shouldAutorotate;

    return result;
}

- (NSUInteger)supportedInterfaceOrientations {

    NSUInteger result = self.topViewController.supportedInterfaceOrientations;

    return result;
}

#pragma -

@end 
```

谢谢你帮助我！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:20:43.563

iPhone 上 iOS6 的默认行为是没有颠倒方向。

[来自 UIViewController 类参考：视图控制器支持的界面方向的默认值设置为 iPad 惯用语的 UIInterfaceOrientationMaskAll 和 iPhone 惯用语的 UIInterfaceOrientationMaskAllButUpsideDown 。](https://developer.apple.com/library/prerelease/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations)

您也可以在 Safari 或地图中看到此行为。

我试图用 UIInterfaceOrientationMaskAll 覆盖它，就像 Dean 说的那样，但没有效果。我决定不再使用颠倒模式，因为它是一种我喜欢遵循的用户界面指南，而不是让用户感到困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T03:04:42.300

我认为您的 viewControllers 将返回几乎颠倒的默认值。你需要实现：

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

对于您想要支持所有方向的所有视图控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T21:59:36.393

以防即使在遵循 Christoh 的回答后仍有问题的其他人：

我刚刚注意到项目 plist 有 iPad 和 iPhone 的单独条目（支持的界面方向（iPad）和支持的界面方向（iPhone））。

希望有帮助。

# android - 从视图内修改视图

> ID：12503661
> 
> 赞同：1
> 
> 时间：2012-09-19T22:14:03.737
> 
> 标签：android, android-activity, android-view

我有两节课。第一个是包含通常布局的 Activity。第二个是基于线程的 SurfaceView 类。我的问题与本主题完全相同，但使用 Thread 而不是 AsyncTask：

[Android/Java：从另一个类更改视图？](https://stackoverflow.com/questions/10677675/android-java-change-view-from-another-class/12503502#12503502)

当线程导致某些事件时，我希望能够更新 Activity 中的其他视图，但我似乎无法找到从 SurfaceView 中正确访问这些视图的方法。

```
public class MyActivity extends Activity{

    Button myButton = (Button)findViewById(R.id.my_button);
    ...
}

public class MySurfaceView extends SurfaceView implements Runnable{

    // Need code here that can access myButton to call myButton.setText("Some Text")
} 
```

大多数建议是这样说的：

```
((Button)findViewById(R.id.my_button)).setText("My Text"); 
```

其中 my_button 最初是在 Activity 的 onCreate() 中设置的。但是，当从 SurfaceView 中调用时，这总是会导致一个空指针。进一步的推理会告诉我，我想访问应用程序上下文以以这种方式找到视图，但这似乎为可怕的上下文内存泄漏敞开了大门。

这似乎在 Android 程序中应该相当普遍，但我似乎找不到合适的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:20:53.320

您是否尝试过从 SurfaceView 实现一个侦听器，该侦听器在活动上广播事件和 setListener。在这里查看如何实现[http://tseng-blog.nge-web.net/blog/2009/02/17/how-implement-your-own-listener-android-java/](http://tseng-blog.nge-web.net/blog/2009/02/17/how-implement-your-own-listener-android-java/)

# javascript - 计时功能的精度/分辨率| 如何量化

> ID：12503665
> 
> 赞同：2
> 
> 时间：2012-09-19T22:14:26.410
> 
> 标签：javascript

谁能给点建议

JavaScript中计时的[准确性和精度？](http://en.wikipedia.org/wiki/Accuracy_and_precision)

我需要以计算出的准确度和精确度来计时用户响应。

```
Date().getTime 
```

是我正在考虑用来进行测量的功能。我想精度接近完美，但我想计算精度。

我想使用 setTimeout() 模拟用户，以便计算 getTime() 的精度。

```
setTimeOut() 
```

这两个函数使用相同的时钟吗？如果一个变化说+10毫秒，另一个也会有效地使我的计算精度的实验无用吗？

有人已经这样做了：

[http://ejohn.org/blog/accuracy-of-javascript-time/](http://ejohn.org/blog/accuracy-of-javascript-time/)

分辨率信息

[https://bugzilla.mozilla.org/show_bug.cgi?id=363258](https://bugzilla.mozilla.org/show_bug.cgi?id=363258)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:55:45.923

你应该阅读这篇[文章](http://updates.html5rocks.com/2012/08/When-milliseconds-are-not-enough-performance-now)。它谈论新的[高分辨率计时器](http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/HighResolutionTime/Overview.html)并将其与当前`Date`对象进行比较。

> ```
> Date.now()         //  1337376068250
> performance.now()  //  20303.427000007 
> ```

基本上有两个关键点：

1.  > performance.now() 是自该特定页面开始加载以来浮点毫秒的测量值

2.  > 也许较少考虑的是，基于系统时间的 Date 也不是真正的用户监控的理想选择。大多数系统运行一个定期同步时间的守护进程。时钟每 15-20 分钟调整几毫秒是很常见的。在那个速率下，测量的 10 秒间隔的大约 1% 是不准确的。

尽管不能保证其`Date`准确性，但您将获得毫秒级的分辨率。根据[高分辨率计时器](http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/HighResolutionTime/Overview.html)规格：

> 对于某些任务，这种时间定义可能不够充分，因为它不允许亚毫秒级的分辨率，并且会受到系统时钟偏差的影响。

我建议您阅读这两篇文章以更清楚地了解这一点。

# regex - 带有正则表达式循环值的 shell 脚本输入字符串

> ID：12503666
> 
> 赞同：2
> 
> 时间：2012-09-19T22:14:26.593
> 
> 标签：regex, bash, shell, brace-expansion

我希望能够让用户输入：

```
./script.sh server[01-10]type 
```

我已经得到了这个，并且可以与 [az] 或 [0-99] 一起使用，或者它的数值很高。虽然真的不确定我是否以正确的方式进行了这件事，以及是否有更简单的方法来做同样的事情。

想检查是否有更简单的方法来做这样的事情，以及有多个通配符输入有多容易，比如：

```
./script.sh (server|web)[01-10][a-z] 
```

然后它将解析 web01-10a-z 或 server01-10a-z 并列出所有服务器。

这是我到目前为止所拥有的，我承认我需要整理它，但我想在专注于更整洁的代码调用之前让它更好地工作。

```
 #!/bin/bash
 input=$1;
 if [[ $input =~ \[ ]];then
     s="["
     f="]"
     host_start=`echo $input|awk -F"[" '{print $1}'`
     host_end=`echo $input|awk -F"]" '{print $2}'`
     start=`awk -v a="$input" -v b="$s" 'BEGIN{print index(a,b)}'`
     fin=`awk -v a="$input" -v b="$f" 'BEGIN{print index(a,b)}'`
     vals=`expr $fin - $start`
     ((start++))
     ((vals--))
     in1=`echo $input| awk -v s=$start -v f=$vals '{ print substr( $0, s($0),f($0) ) }'`
     val1=`echo $in1|awk -F"\-" '{print $1}'`
     val2=`echo $in1|awk -F"\-" '{print $2}'`
     for index in $(eval echo {$val1..$val2})
     do
         server="$host_start$index$host_end"
         echo "Current server: $server "
     done
fi 
```

当我执行此操作时，我得到：

```
./run.bash apache[9-11]
Current server: apache9 
Current server: apache10 
Current server: apache11 

$ ./run.bash apache[f-k]
Current server: apachef 
Current server: apacheg 
Current server: apacheh 
Current server: apachei 
Current server: apachej 
Current server: apachek 

$ ./run.bash apache[f-k]abc
Current server: apachefabc 
Current server: apachegabc 
Current server: apachehabc 
Current server: apacheiabc 
Current server: apachejabc 
Current server: apachekabc 
```

**更新感谢大家**

3 行完成上述所有操作并处理我想要的所有类型，方法如下：

```
#!/bin/bash
val=$1;

value=`echo "$val"|sed 's:(:{:g; s:):}:g; s:|:,:g; s/^//;s/$//'`
value=`echo "$value"|sed 's:\[:{:g; s:\]:}:g; s:-:\.\.:g; s/^//;s/$//'`
(eval echo $value)

./test-brace.sh "(server|apache)[0-2][a-c]"
server0a server0b server0c server1a server1b server1c server2a server2b server2c apache0a apache0b apache0c apache1a apache1b apache1c apache2a apache2b apache2c 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:23:46.990

你不需要脚本。您只需要大括号扩展：

```
echo {server,web}{01..10}{a..z}

for s in {server,web}{01..10}{a..z}; do
    echo Current Server: $s
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T09:12:37.393

除了其他答案之外，使用分叉让`awk`我觉得浪费了几百万个 CPU 周期。如果您只想删除 shell 变量中的一些子字符串，请使用以下 (POSIX) 修饰符：

```
$ foo=bar-baz-frob
$ echo ${foo%-*}    # Remove shortest match from the end
bar-baz
$ echo ${foo%%-*}   # Remove longest match from the end
bar
$ echo ${foo#*-}    # Remove shortest match at the beginning
baz-frob
$ echo ${foo##*-}   # Remove longest match at the beginning
frob
$ 
```

除了`*`and 还`?`接受`[0-9a-f]`范围，但不`{}`用于多重性。

如果你愿意交换你的 shell，`zsh`可以通过大括号扩展来做到这一点：

```
zsh$ setopt BRACE_CCL
zsh$ echo {server,web}{01..10}{a-h}
server01a server01b server01c server01d server01e server01f server01g server01h 
server02a server02b server02c server02d server02e server02f server02g server02h 
server03a server03b server03c server03d server03e server03f server03g server03h 
server04a server04b server04c server04d server04e server04f server04g server04h 
server05a server05b server05c server05d server05e server05f server05g server05h 
server06a server06b server06c server06d server06e server06f server06g server06h 
server07a server07b server07c server07d server07e server07f server07g server07h 
server08a server08b server08c server08d server08e server08f server08g server08h 
server09a server09b server09c server09d server09e server09f server09g server09h 
server10a server10b server10c server10d server10e server10f server10g server10h 
web01a web01b web01c web01d web01e web01f web01g web01h web02a web02b web02c web02d 
web02e web02f web02g web02h web03a web03b web03c web03d web03e web03f web03g web03h 
web04a web04b web04c web04d web04e web04f web04g web04h web05a web05b web05c web05d 
web05e web05f web05g web05h web06a web06b web06c web06d web06e web06f web06g web06h 
web07a web07b web07c web07d web07e web07f web07g web07h web08a web08b web08c web08d 
web08e web08f web08g web08h web09a web09b web09c web09d web09e web09f web09g web09h
web10a web10b web10c web10d web10e web10f web10g web10h 
```

我只是用bash尝试过。略有不同：

```
echo {server,web}{01..10}{a..h} 
```

# mysql - MySQL 使用 Count 连接查询

> ID：12503669
> 
> 赞同：-3
> 
> 时间：2012-09-19T22:14:31.187
> 
> 标签：mysql, sql

我有 2 张桌子，`EVENT`并且`EVENT_INVITATION`. 我想选择所有事件：

```
EVENT.creator_id = x
OR
EVENT_INVITATION.invitee_id = x 
```

但我还需要返回`EVENT_INVITATION`每个结果的总行数`EVENT`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:33:04.970

我认为这会做到：

```
SELECT count(*), EVENT.event_id
FROM EVENT, 
EVENT_INVITATION, 
(
  SELECT event_ID
  FROM EVENT
  WHERE creator_id = x
  UNION
  SELECT event_id
  FROM EVENT_INVITATION.
  WHERE invitee_id = x) temp
WHERE EVENT.event_ID = EVENT_INVITATION.event_ID
AND EVENT.event_ID = temp.event_ID
GROUP BY EVENT.event_id 
```

我建议在没有你的数据结构和样本集的情况下做一个[sql fiddle](http://sqlfiddle.com/)原因，我无法测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:32:30.320

获取您关心的所有事件的列表，然后计算相关的邀请。在没有邀请的情况下外部加入。

```
WITH selectEvents AS (
    SELECT event_id
      FROM event
      WHERE creator_id = <x>
    UNION
    SELECT event_id
      FROM event_invitation
      WHERE invitee_id = <x>
)
SELECT s.event_id, COUNT(i.event_id) AS theCount
  FROM selectEvents s
  LEFT OUTER JOIN event_invitation i ON (i.event_id = s.event_id)
  GROUP BY s.event_id 
```

# javascript - 对象仅在 IE8 上不支持此属性或方法

> ID：12503671
> 
> 赞同：4
> 
> 时间：2012-09-19T22:14:34.660
> 
> 标签：javascript, internet-explorer-8

此代码在 Chrome、FF、Safari、IE9 上运行，但在 IE8 上我收到此错误：

> 消息：对象不支持此属性或方法行：80 字符：7 代码：0

这就是它停止的代码：（第 80 行在“return [”上，但开发人员工具调试器在下面突出显示了所有这些代码）

```
return [
    {
        title:'Edit',
        customClass:'actionEdit',
        action:{
            type:'getLink',
            url:'/admin/products/edit/'+data.id()+''
        }
    },
    {
        title:'Attaches',
        customClass:'actionAttaches',
        action:{
            type:'getLink',
            url:'/admin/attaches/index/product/'+data.id()+''
        }
    },
    {
        title:'Delete',
        customClass:'actionDelete',
        action:{
            type:'postLink',
            url:'/admin/products/delete/'+data.id()+'',
            confirm:'Are you sure you want to delete %s?',
            arg:$('#ProductAdminIndexList #'+data.id()+' .productId').text().trim()
        }
    }
]; 
```

我发现了其他类似的情况，但我不知道为什么会发生以及如何解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T22:17:51.563

像这样解决它。

```
arg: $.trim($('#ProductAdminIndexList #'+data.id()+' .productId').text()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T22:17:47.910

我几乎肯定 IE8 没有`trim()`方法。然而，jQuery[提供了一个实现](http://api.jquery.com/jQuery.trim/)，像这样称呼它，`$.trim()`因为看起来您已经在使用 jQuery。

# iphone - 从 Plist 字符串设置 UITableViewCell 标题

> ID：12503676
> 
> 赞同：0
> 
> 时间：2012-09-19T22:15:00.363
> 
> 标签：iphone, uitableview, plist, xcode4.4

> **可能重复：**
> [来自 pList 的分段 UITableView](https://stackoverflow.com/questions/4850659/sectioned-uitableview-sourced-from-a-plist)

我很难尝试将单元格的文本标签设置为我的 plist 中字符串的值。该应用程序崩溃了`cell.textlabel.text = [array objectAtIndex:indexPath.row];`。我很确定其他一切都很好，只是不知道最后一部分。提前致谢。

这是我的清单：

```
Root - Array
    Item 0 - Dictionary
        Key 0 - Array
            Item 0 - String - Value 0
        Key 1 - Array
            Item 1 - String - Value 1 
```

这是我的 tableview 数据源方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

return _objects.count;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

NSDictionary *dict = [_objects objectAtIndex:section];
return [dict.allValues count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

NSArray *array = [_objects objectAtIndex:indexPath.section];
cell.textLabel.text = [array objectAtIndex:indexPath.row];

return cell;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:25:56.343

那么你的结构`_object`还不清楚。我假设它`Item 0 - Dictionary`在 plist 中引用。

在`numberOfRowsInSection:`您将其称为字典：

```
NSDictionary *dict = [_objects objectAtIndex:section] 
```

而在`cellForRowAtIndexPath:`您将其称为数组时：

```
NSArray *array = [_objects objectAtIndex:indexPath.section]; 
```

无论如何，如果我的假设是正确的，那么将`cellForRowAtIndexPath`代码更改为以下内容：

```
NSDictionary *dict = [_objects objectAtIndex:indexPath.section];
NSarray *array = [dict objectForKey:myKey]; //myKey is whatever key you are assigning
cell.textLabel.text = [array objectAtIndex:indexPath.row]; 
```

希望这可以帮助。

**编辑：**

好吧，您可以重组您的 plist 来实现这一目标。你基本上只是摆脱了`dictionary`水平..尝试这样的事情：

```
Root - Array
    Item 0 - Array                   <-- this is a section
        Item 0 - String - Value 0    <-- this is a cell
    Item 1 - Array                   <-- section
        Item 0 - String - Value 1    <-- cell 
```

# flot - 用符号替换图例方块？

> ID：12503677
> 
> 赞同：0
> 
> 时间：2012-09-19T22:15:05.157
> 
> 标签：flot

有没有办法让图例匹配线点？如果我将线中的点更改为交叉点，如何更改图例以匹配。颜色匹配，但如果可能的话，我希望符号也匹配。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:39:18.883

目前，没有，但如果您有兴趣贡献，这将是符号插件的一个很好的补充。否则，您至少应该将其作为 bug 跟踪器中的增强功能提交（如果您还没有的话）。

# android - Android MapView 缩放到一个半径

> ID：12503681
> 
> 赞同：4
> 
> 时间：2012-09-19T22:15:24.807
> 
> 标签：android, zooming, android-mapview

在我的应用程序中，我有一个 MapView。

我想根据用户设置的半径更改地图的缩放。我在[这个](https://stackoverflow.com/a/6452332/1092770)链接中找到了答案，但问题是该函数只考虑屏幕的宽度..我也想考虑高度。

例如：如果我想查看 1 公里的半径 - 链接中的函数将显示 1 公里的宽度，但不会显示 1 公里的高度.. 对我来说非常重要的是它会同时显示宽度和高度，即使当高度为 1 公里时，宽度为 1.5 公里

我该怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-14T04:50:14.220

这是工作代码，结果准确。

1）在具有所需半径的对象上画一个圆圈

```
Circle circle = mGoogleMap.addCircle(new CircleOptions().center(new LatLng(latitude, longitude)).radius(getRadiusInMeters()).strokeColor(Color.RED));           
        circle.setVisible(true);
        getZoomLevel(circle); 
```

2）将该对象传递给此函数并设置缩放级别这是[一个链接](https://stackoverflow.com/questions/5939983/how-does-this-google-maps-zoom-level-calculation-work)

```
public int getZoomLevel(Circle circle) {
if (circle != null){
    double radius = circle.getRadius();
    double scale = radius / 500;
    zoomLevel =(int) (16 - Math.log(scale) / Math.log(2));
}
return zoomLevel;
} 
```

# javascript - 带有页眉和页脚的 jQuery 列表视图

> ID：12503683
> 
> 赞同：0
> 
> 时间：2012-09-19T22:15:26.040
> 
> 标签：javascript, html, css, jquery-mobile

我正在使用 jQuery mobile 构建一个移动应用程序，我想显示一个项目列表。这里明显的选择是使用列表视图。但是这个列表有一个标题（包含列表的名称）和一个页脚（包含列表的摘要）。为了显示标题，我认为我应该使用列表分隔符。但我不知道应该用什么来显示页脚。该列表看起来像：

![在此处输入图像描述](../Images/3c65699739795aedf694fdb554dabfa0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:23:32.403

我认为您可以为两者都使用分隔符吗？我想这取决于你的风格。您还可以为每一个设置独特的样式。

在你的开始和结束时做一个

*   ```
     <ul>
            <li data-role="list-divider" role="heading">Sheet: Scores</li>
            <li></li>
            <li></li>
            <li></li>
            <li data-role="list-divider" role="heading">Total</li>
        </ul> 
    ```

# excel-2007 - Excel 2007 条件格式中的列偏移减法

> ID：12503686
> 
> 赞同：0
> 
> 时间：2012-09-19T22:16:19.323
> 
> 标签：excel-2007, conditional-formatting

条件格式中的以下公式的行为与工作表单元格中的行为不同：

```
 IF(OFFSET(INDIRECT("RC",FALSE),0,4-COLUMN())="Answer Changed",TRUE,FALSE) 
```

我将此公式应用于 3 列单元格，并需要它查看每一行的第 4 列。在工作表的单元格中，这按预期工作。这有什么技巧吗，因为我知道行和列函数在我使用的其他条件格式公式中工作（即，`IF(MOD(ROW(),2)=1,TRUE,FALSE)`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:05:12.137

如果我理解正确，如果 D 列包含“答案已更改”，您希望列 A 到 C 被格式化。如果是这种情况，并且假设您的数据从第 2 行开始，您可以通过选择单元格 A2:C2 并输入以下条件格式公式来完成此操作：

```
=$D2="Answer Changed" 
```

然后根据需要将其复制下来。

请注意，您不需要使用 IF 语句。条件格式评估语句是否为 TRUE，如果是，则应用格式。

![在此处输入图像描述](../Images/f90b455af1cd9afd4b092458253bc6ce.png)

# c# - 实体框架不会将更新保存到底层数据库

> ID：12503688
> 
> 赞同：0
> 
> 时间：2012-09-19T22:16:48.933
> 
> 标签：c#, entity-framework, sql-server-2012, localdb

我正在使用以下代码更新记录表中的打卡和打卡时间，但它不会将数据保存到数据库中。我用sql management studio检查了mdf文件，没有保存数据。我究竟做错了什么？

```
private void btClockIn_Click(object sender, EventArgs e)
    {
        using (TimeKeepEntities ctx = new TimeKeepEntities())
        {
          // if employee clocked out add new clock in record else update existing record with clock out time
            if (cmbProjects.Enabled)
            {
                tblTimeRecord record = new tblTimeRecord();
                record.RecordID = DateTime.Now; 
                record.EmployeeID = (int)cmbEmployees.SelectedValue;
                record.ProjectID = (int)cmbProjects.SelectedValue;
                record.ClockIn = DateTime.Now;

                ctx.tblTimeRecords.Add(record);
                ctx.SaveChanges();

                update_cmbProjects_btClockIn();

            }
            else
            {
                tblTimeRecord record = (from r in ctx.tblTimeRecords
                                        where r.EmployeeID == (int)cmbEmployees.SelectedValue && !r.ClockOut.HasValue
                                        select r).FirstOrDefault();
                record.ClockOut = DateTime.Now;
                ctx.SaveChanges();

                update_cmbProjects_btClockIn();
            }
        }
    } 
```

编辑 1：这是我的 app.config 文件（包括看起来像连接字符串的内容）

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <connectionStrings>
    <add name="TimeKeepEntities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=(LocalDB)\v11.0;attachdbfilename=|DataDirectory|\TimeKeep.mdf;integrated security=True;connect timeout=30;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:48:57.763

正如 MM 在评论中所建议的那样，我也怀疑您第一次查看的 MDF 文件是错误的。使用 SQL Express，这些向导往往会对其进行复制，并且应用程序使用的最终副本有时与向导创建的位置不同。使用的最后一个通常位于解决方案的 App_Data 文件夹中，但您可以在保存更改的 Debug 中进行跟踪以确保。

这是一个类似问题的答案：[Entity Framework 4.1 is not added any rows to SQL Server Express database](https://stackoverflow.com/questions/11548422/entity-framework-4-1-is-not-adding-any-rows-to-sql-server-express-database)

# matlab - 矢量化插值matlab

> ID：12503690
> 
> 赞同：4
> 
> 时间：2012-09-19T22:17:09.977
> 
> 标签：matlab, interpolation, vectorization

我在 S 个时间点进行了一组 N 次测量（不同测量的时间点不同）。我有两个矩阵：

V - 表示测量值的 NxS 矩阵

T - 表示测量时间的 NxS 矩阵

我想生成一个矩阵 VI，它表示时间 TI 的线性插值测量值。代码的非矢量化版本如下：

```
tic;
VI = zeros([size(V,1), size(TI,2)]);
for j = 1:size(V,1)
    VI(j,:) = interp1(T(j,:),V(j,:),TI);
end
toc; 
```

我想重写此代码以消除 for 循环，以便使用矩阵运算和函数实现它。可以矢量化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:50:15.107

如果没有数据并运行分析器，很难说任何事情，但如果您的数据已排序，您可以使用`interp1q`而不是`interp`，它不会对数据进行任何检查。

取自 Matlab 帮助：

> 要使 interp1q 正常工作，x 必须是单调递增的列向量。Y 必须是具有长度 (x) 行的列向量或矩阵。xi 必须是列向量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:39:07.367

如您所说，如果您对所有测量有不同的测量时间（T 是矩阵而不是向量），则可以通过一次调用 arrayfun 来执行您想要的操作，如下所示：

```
VI = arrayfun(@(x)(interp1(T(x,:),V(x,:),TI)), 1:size(V, 1), 'UniformOutput', false);
VI = cell2mat(VI'); 
```

arrayfun 类似于循环，但由于它是一个内部 matlab 函数，它可能会更快。它返回一个向量单元，因此第二行确保您有一个矩阵作为输出。您可能不需要它 - 这取决于您以后如何处理数据。

另一方面，如果在同一时间对不同的 N 值进行了测量（T 是大小为 S 的向量，而不是矩阵，或者换句话说，T 的所有行都相等），您可以在一次调用中进行插值到interp1。

```
VI = interp1(T(1,:), V', TI) 
```

在这里你必须转置 V 因为 interp1 在列内插值。这是因为 MATLAB 按列存储矩阵（列在内存中是连续的）。如果将 V 作为 SxN 矩阵传递，它可能会允许更有效的 interp1 并行化，因为所有 CPU 都可以以更有效的方式访问内存。因此，我建议您在整个代码中转置矩阵，除非您出于性能原因在其他地方依赖此确切的数据布局。

**编辑**由于矩阵的列布局，您的原始代码可以通过转置矩阵和按列工作来改进。对于 N=1000、S=10000 和 10000 个元素的 TI，以下版本在我的计算机上快了大约 20%。由于内存带宽利用率更高，它可能会随着系统大小而增长。

```
tic;
VI = zeros(size(TI,2), size(V,2));
for j = 1:size(V,2)
    VI(:,j) = interp1(T(:,j),V(:,j),TI);
end
toc; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T04:45:37.820

Matlab 将数据打包成列而不是行，所以我怀疑你会看到速度的提高，只需将循环从遍历行更改为遍历列：

```
[N, S] = size(V);

VT = V';                             % Value series in columns
TT = T';                             % Time series in columns
VIT = zeros(length(TI), N);          % Interpolated value series in columns

for j = 1:N
    VIT(:, j) = interp1(VT(:, j), TT(:, j), TI);
end

VI = VIT';                           % Interpolated value series in rows 
```

不幸的是，由于不同的值序列没有相关的时间序列，因此我认为无法做太多事情来进一步提高此代码的性能。如果它们有相同的时间，这样我们就可以折叠`T`成一个带有 的向量`length(T) = S`，那么这样做很容易：

```
VIT = interp1(VT, T, TI);            % (see VIT and VT from above) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T03:02:56.043

我在工作，所以没有时间熟悉`interp1`（我以前从未使用过），所以如果以下答案不恰当，我提前道歉。

话虽如此，由于循环的迭代不相互依赖，向量化应该是可能的。`mat2cell`在我看来，您可以使用and摆脱显式循环`cellfun`。

我的意思的一个简单例子如下：

```
NumRow = 4;
NumCol = 3;
V = randn(NumRow, NumCol);
VCell = mat2cell(V, ones(NumRow, 1), NumCol);
A = cellfun(@sum, VCell); 
```

当然，我所做的相当于`sum(V, 2)`. 但是我认为我使用的方法可以扩展到您的情况。该`mat2cell`函数转换`V`为一个单元格列向量，其中每个单元格包含一行 V。然后调用将函数`cellfun`应用于 中的每个单元格，并返回 中的结果。您可以简单地替换为，当然，适当地调整输入。`sum``VCell``A``@sum``@interp1``cellfun`

如果你不能让它工作，请告诉我，我回家后会尝试整理一些更明确的东西。另外，如果你确实让它工作了，但它并没有加快速度，我很想知道，所以请在这里发布结果。

# c# - 根据路径将文件节点添加到树

> ID：12503691
> 
> 赞同：0
> 
> 时间：2012-09-19T22:17:25.320
> 
> 标签：c#, algorithm, tree, filetree

我有结构：

```
public struct BaseFile
{
    public string FileName;
    public string Path; // this is not the full path. it is the fullPath of it's parent directory in other words.
} 
```

我有课

```
 public class MyFileDir // can be a file or directory
 {
      public string Name;
      public string FullPath;
      public List<MyFileDir> Children;
      public bool IsDirectory;
      // many more other properties
 } 
```

所以我有一个线程放置文件`LinkedList<BaseFile> myLinkedList` ，我希望另一个线程也开始投射这些文件`MyFileDir root`（注意我使用linkedList而不是list，因为linkedList的地址不会改变List每次需要增长时都会改变它的地址）

我有一个布尔变量 IsRunning，它会让我知道其他线程是否仍在将基本文件添加到链接列表中。所以我有类似的东西：

```
 var curNode = myLinkedList.First;

        while (IsRunning)
        {
            if (curNode.Next == null) // wait until next node is not null
            {
                Thread.Sleep(100);
                continue;
            }

            curNode = curNode.Next;
            AddItemToTree(curNode.Value);
        } 
```

如您所见，我在实现该方法时遇到了麻烦，`AddItemToTree`我基本上想开始以该方法构建树。所以首先我将查看根目录并搜索我应该添加的目录`curNode.Value`。我很难做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:12:20.820

```
 MyFileDir root = new MyFileDir(); //root Node 
```

&

```
 var curNode = myLinkedList.First;

    while (IsRunning)
    {
        if (curNode.Next == null) // wait until next node is not null
        {
            Thread.Sleep(100);
            continue;
        }

        curNode = curNode.Next;
        curFileDir = new MyFileDir(curNode);// your cast here

    List<string> mylist = curFileDir.FullPath.Split(new string[] { @"\" }, StringSplitOptions.RemoveEmptyEntries).ToList(); // this gives a list of dirs in FullPath to explore

        MyFileDir temp = root;
        foreach (string filedirName in mylist)
        {
            temp = AddNode(temp, filedirName );
        }

  } 
```

第一个循环意味着如果节点存在则返回它，否则创建它并返回它

```
 private MyFileDir AddNode(MyFileDir parent, string filedirName)
{
    foreach (MyFileDir subfiledir in parent.Children)
        if (subfiledir.Name == header)
            return subfiledir;

    MyFileDir filedir = new MyFileDir(fileName);
    parent.Children.Add(fileName);
    return fileName;
} 
```

# windows-phone-7 - 有没有办法让 WP7 Mail 与 GMail 对话一起工作？

> ID：12503694
> 
> 赞同：3
> 
> 时间：2012-09-19T22:17:31.543
> 
> 标签：windows-phone-7, smtp

我查看了外发邮件的 SMTP 标头，Windows Phone 似乎没有设置`In-Reply-To`or`References`字段，我相信 GMail 使用它来设置对话。

有没有办法启用这些，或其他方式让 gmail 将回复检测为对话的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:17:52.420

我使用默认设置来设置我的 GMail 帐户并将其同步到我的 Windows Phone。默认情况下对话正在工作。

我认为通过对话，你的意思是线程视图？

# mysql - SELECT CHAR(224 USING UTF8) 什么都不返回？

> ID：12503701
> 
> 赞同：0
> 
> 时间：2012-09-19T22:17:58.033
> 
> 标签：mysql, function, char

考虑这个简单的 MySQL 查询：

```
SELECT CHAR(224 USING UTF8) 
```

这对我没有任何回报。我希望它返回à。

我尝试指定一个排序规则：

```
SELECT CHAR(224 USING UTF8) COLLATE UTF8_BIN 
```

但这也没有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:23:06.100

下面怎么样

```
SET CHARSET utf8;
SET NAMES utf8;
SELECT char(0x00E0 using ucs2); 
```

# c# - Entity Framework Code First 不允许Entity直接实现接口

> ID：12503704
> 
> 赞同：0
> 
> 时间：2012-09-19T22:18:14.337
> 
> 标签：c#, entity-framework-4.1, entity-framework-4.3, entity-framework-5

实体框架可以忽略我在实体中实现接口的事实吗？情况是我有一个实现 IModelObject 接口的 Tag 类，它定义了实现它的每个类都需要具有 Id 属性。课程如下：

```
public class Tag : IModelObject, IEquatable<Tag>
{
    [ScaffoldColumn(false)]
    public virtual int Id
    {
        get;
        set;
    }

    [Required]
    public virtual string Name
    {
        get;
        set;
    }...

} 
```

我的域模型中的每个实体都实现了 IModelObject。没有基类，只有一个接口。默认映射有效，但在数据库中添加了鉴别器列。而且这个鉴别器不是我的域模型的一部分，所以我的数据库中不需要它。
实现一个接口不是继承，我也在实现一个 IEquatable 接口。那么为什么实体框架的行为就像继承并添加了鉴别器列，我怎样才能通过不使用基类或抽象类来避免这种情况呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:30:26.497

我对你的推理有点困惑。继承与你的问题无关。您的问题是您的实体包含属性（以及虚拟属性。EF 使用虚拟属性执行特殊操作）。EF 将为您实体上的每个公共属性创建一个列。我不确定你为什么认为它不应该，因为它就是这样做的。

如果您希望 EF 忽略某个属性，那么您可以使用该`[NotMapped]`属性上的属性，EF 将忽略它。

# objective-c - 提示用户输入密码的正确方法是什么？

> ID：12503708
> 
> 赞同：1
> 
> 时间：2012-09-19T22:18:45.910
> 
> 标签：objective-c, cocoa, security, osx-mountain-lion, keychain

[这是对这个问题](https://stackoverflow.com/questions/12450866/am-i-allowed-to-ask-for-and-store-a-users-itunesconnect-password)的跟进。

如果我要使用 Keychain Services 存储用户的用户名和密码，我是否应该简单地使用 NSSecureTextField 为密码创建自己的提示视图，然后一旦用户输入他们的信息，将其传递给 Keychain Services API（[我发现了这个一](https://github.com/samsoffes/sskeychain)）？

我担心 Apple 不喜欢我像这样直接与用户的敏感数据进行交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:34:14.413

这听起来很合适。以下函数调用将完成您需要的工作。

```
SecKeychainAddGenericPassword();
SecKeychainFindGenericPassword();
SecKeychainItemModifyAttributesAndData();
SecKeychainItemCopyContent();
SecKeychainItemFreeContent();
SecKeychainItemDelete(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:10:03.120

看来，为 Apple 的 Autoingest 工具使用用户密码的唯一方法是直接在代码中处理密码。我确保持有它的时间不会超过我需要的时间，当然我将它与钥匙串服务一起存储以确保它的安全。

# sql-server - 在 SQL Server 中强制部分连接顺序

> ID：12503709
> 
> 赞同：3
> 
> 时间：2012-09-19T22:18:48.137
> 
> 标签：sql-server, sql-server-2008, join, sql-server-2008-r2, left-join

**编辑**：人们很难理解我想要什么。所以这里有漂亮的图片来解释它的细节。

首先将**Transactions**加入**Strange**：

![在此处输入图像描述](../Images/87a40605d1438dfe15c01e7b264fed00.png)

到目前为止的结果

```
Customer  Invoice  TransactionID  Mass  Length                LeptonNumber
========  =======  =============  ====  ====================  ============
Ian       One      1              Ian   Judgement Spaulders   50
Ian       One      1              Ian   Glorious Breastplate  50
Chris     Two      2              Chris Barenavel             2 
```

现在尝试使用*Down*连接剩余的行：

![在此处输入图像描述](../Images/e467faaa67b0578dfe1749cbbe6199b1.png)

到目前为止的结果

```
Customer  Invoice         TransactionID  Mass  Length                LeptonNumber
========  =======         =============  ====  ====================  ============
Ian       One             1              Ian   Judgement Spaulders   50
Ian       One             1              Ian   Glorious Breastplate  50
Chris     Two             2              Chris Barenavel             2
Jamie     Krol Blade      3              Jay   Krol Blade            90
Jay       Arcanite Reaper 4              Ian   Arcanite Reaper       90 
```

最后，将剩余的行加入**Charmed**：

![在此处输入图像描述](../Images/65ba24f44efa9f1a895ec6a9527f05c1.png)

到目前为止的结果

```
Customer  Invoice         TransactionID  Mass    Length                LeptonNumber
========  =======         =============  ====    ====================  ============
Ian       One             1              Ian     Judgement Spaulders   50
Ian       One             1              Ian     Glorious Breastplate  50
Chris     Two             2              Chris   Barenavel             2
Jamie     Krol Blade      3              Jay     Krol Blade            90
Jay       Arcanite Reaper 4              Ian     Arcanite Reaper       90
Potatoe   Dan Quayle      5              Potatoe Dan Quayle            90 
```

以及如何查看我们剩下的行：

![在此处输入图像描述](../Images/63e0bed546fcfd9688632189c1fc195b.png)

给我我想要的结果集

```
Customer  Invoice         TransactionID  Mass    Length                LeptonNumber
========  =======         =============  ====    ====================  ============
Ian       One             1              Ian     Judgement Spaulders   50
Ian       One             1              Ian     Glorious Breastplate  50
Chris     Two             2              Chris   Barenavel             2
Jamie     Krol Blade      3              Jay     Krol Blade            90
Jay       Arcanite Reaper 4              Ian     Arcanite Reaper       90
Potatoe   Dan Quayle      5              Potatoe Dan Quayle            90
Stapler   Alexstraza      6              NULL    NULL                  NULL 
```

* * *

我有一个主表：

```
Transactions
+----------+
|          |
|          | 
|          |
|          |
|          |
|          |
|          |
+----------+ 
```

我希望此表中的每一行仅加入**一个**可能的匹配表：

```
Tranasctions        Strange
+----------+      +----------+
| row 1 ===|=====>| row 1    |         Down
| row 2 ===|=====>| row 2    |       +---------+
| row 3 ===|======+----------+======>| row 1   |        Charmed
| row 4 ===|========================>| row 2   |       +---------+
| row 5 ===|=========================+---------+======>| row 1   |
| row 6 ===|==========================================>| row 2   |
+----------+                                           +---------+ 
```

通常我会作为`Transactions`以下集合的连接执行`Strange || Down || Charmed`：

```
SELECT
   Transactions.*,
   Quarks.Mass,
   Quarks.Length,
   Quarks.LeptonNumber
FROM Transactions
    INNER JOIN NationalSecurityLetters
    ON Transactions.TransactionID = NationalSecurityLetters.ReferenceNumber

    LEFT JOIN (
       SELECT 'Strange' AS Type, * FROM Strange
       UNION ALL
       SELECT 'Down' AS Type, * FROM Down
       UNION ALL
       SELECT 'Charmed' AS Type, * FROM Charmed
    ) Quarks
    ON (
        (Quarks.Type = 'Strange' AND Transactions.Customer = Quarks.Mass)
        OR
        (Quarks.Type = 'Down' AND Transactions.Invoice = Quarks.Length)
        OR
        (Quarks.Type = 'Charmed' AND Transactions.Customer = Quarks.Length)    
    ) 
```

问题是我希望加入以首选顺序发生：

*   `Strange`
*   `Down`
*   `Charmed`

单个事务完全有可能在多个表中具有匹配的条目。但是对于其他表的每个可能的**JOIN**，`Transactions`我希望 SQL Server*更喜欢*该`Strange`表。如果没有匹配，然后去`Down`表。如果没有匹配`Charmed`上桌。

```
If you find a match in      Prefer the matching row from
==========================  ============================
Strange                     Strange
Strange and Down            Strange
Strange, Down, and Charmed  Strange
Down                        Down
Down and Charmed            Down
Charmed                     Charmed
(no match?)                 (then there's no match) 
```

我考虑过使用一个`OPTION(FORCE ORDER)`子句：

```
SELECT *
FROM Transactions
    INNER JOIN NationalSecurityLetters
    ON Transactions.TransactionID = NationalSecurityLetters.ReferenceNumber

    LEFT JOIN (
       SELECT 'Strange' AS Type, * FROM Strange
       UNION ALL
       SELECT 'Down' AS Type, * FROM Strange
       UNION ALL
       SELECT 'Charmed' AS Type, * FROM Strange
    ) Quarks
    ON (
        (Quarks.Type = 'Strange' AND Transactions.Customer = Quarks.Mass)
        OR
        (Quarks.Type = 'Down' AND Transactions.Invoice = Quarks.Length)
        OR
        (Quarks.Type = 'Charmed' AND Transactions.Customer = Quarks.Length)    
    )       
OPTION (FORCE ORDER) 
```

但我不想强制 SQL Server 加入

*   `Transactions`==> `NationalSecurityLetters`，当加入可能更有利时
*   `NationalSecurityLetters`==>`Transactions`

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T22:35:16.717

正如@AaronBertrand 提到的那样，我有点不清楚您要做什么，但是如果您正在谈论更改输出，您可以只使用 COALESCE 吗？例子：

```
SELECT COALESCE(s.Value, d.Value, c.Value), t.*
FROM Transactions as t
LEFT JOIN Strange as s
ON t.id = s.tid
LEFT JOIN Down as d
ON t.id = d.tid
LEFT JOIN Charmed as c
ON t.id = c.tid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T02:02:28.427

也许这个解决方案会帮助你：

```
SET ANSI_WARNINGS ON;
GO
BEGIN TRAN;

CREATE TABLE dbo.TableA (
    TableAID INT PRIMARY KEY,
    DescriptionA VARCHAR(50) NOT NULL
);
INSERT dbo.TableA 
VALUES (1,'A-1'), (2,'A-2');

CREATE TABLE dbo.TableB (
    TableBID INT PRIMARY KEY,
    DescriptionB VARCHAR(50) NOT NULL
);
INSERT dbo.TableB
VALUES (1,'B-1'), (2,'B-2'), (4,'B-4');

CREATE TABLE dbo.TableC (
    TableCID INT PRIMARY KEY,
    DescriptionC VARCHAR(50) NOT NULL
);
INSERT dbo.TableC
VALUES (1,'C-1'),(3,'C-3'), (4,'C-4');
GO

CREATE TABLE dbo.[Transaction] (
    TransactionID INT IDENTITY PRIMARY KEY,
    TranDate DATE NOT NULL,
    Col1 INT NULL
);
INSERT dbo.[Transaction]
VALUES ('20120101', 1), ('20120202',2), ('20120303',3), ('20120404',4), ('20120505',5);
GO

SELECT  *
FROM    dbo.[Transaction] t
OUTER APPLY (
    SELECT * FROM TableA a WHERE t.Col1=a.TableAID
) j1 --first join
OUTER APPLY (
    SELECT * FROM TableB b WHERE j1.TableAID IS NULL AND t.Col1=b.TableBID --First condition will force the join order (dbo.TableA.TableAID should be NOT NULL)
) j2 --second join
OUTER APPLY (
    SELECT * FROM TableC c WHERE j1.TableAID IS NULL AND j2.TableBID IS NULL AND t.Col1=c.TableCID ---First two conditions will force the join order (dbo.TableA.TableAID & dbo.TableB.TableBID should be NOT NULL)
) j3 --third join
WHERE   j1.TableAID IS NOT NULL
OR      j2.TableBID IS NOT NULL
OR      j3.TableCID IS NOT NULL

ROLLBACK; 
```

在这种情况下，*连接顺序*为：

1) t.Col1=a.TableAID

2) 如果不是 1) 则 t.Col1=b.TableBID

3) 如果不是 1) 和 2) 则 t.Col1=c.TableCID

结果：

```
TransactionID TranDate   Col1 TableAID DescriptionA TableBID DescriptionB TableCID DescriptionC
------------- ---------- ---- -------- ------------ -------- ------------ -------- ------------
1             2012-01-01 1    1        A-1          NULL     NULL         NULL     NULL
2             2012-02-02 2    2        A-2          NULL     NULL         NULL     NULL
3             2012-03-03 3    NULL     NULL         NULL     NULL         3        C-3
4             2012-04-04 4    NULL     NULL         4        B-4          NULL     NULL 
```

# asp.net-mvc - MVC 动作结果

> ID：12503711
> 
> 赞同：1
> 
> 时间：2012-09-19T22:19:00.097
> 
> 标签：asp.net-mvc, http, routes, asp.net-mvc-routing

我有一个名为`ToolsController`. 这个控制器有一个`ActionResult GetName`返回字符串（“Hello name”）。我能够像这样击中 ActionResult `localhost:52703/Tools/GetName?name=Ed`。现在突然停止工作，我不明白为什么。

`localhost:52703/Tools/GetName?name=Ed`

```
 public ActionResult GetName(string name)
    {            
        return Content("Hello " + name);

    } 
```

注意：我没有为此创建路线，也不想创建路线。

所以 ActionResult 不再受到打击，过去 3 周它一直在工作。有任何想法吗？提前致谢。

# heroku - 在 Heroku 上运行时如何监控 New Relic 中的 resque worker？

> ID：12503712
> 
> 赞同：7
> 
> 时间：2012-09-19T22:19:00.563
> 
> 标签：heroku, resque, newrelic

我们有一个在 Heroku 上运行 resque workers 的应用程序。我们已经安装了 New Relic 插件，根据[文档](https://newrelic.com/docs/ruby/monitoring-ruby-background-processes-and-daemons)，New Relic Agent 应该自动检测 resque 工作人员。但是，我们在 New Relic 仪表板上的“后台作业”选项卡上没有看到任何输出。

根据相同的[文档](https://newrelic.com/docs/ruby/monitoring-ruby-background-processes-and-daemons)，我们没有触及`newrelic.yml`文件。我们既不确定出了什么问题，也不确定如何有效地调试它。我们需要做什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T21:41:43.003

事实证明，我们的问题是由我们自己的自定义`Resque.before_fork`和`Resque.after_fork`处理程序引起的。

NewRelic 的 RPM gem 将自动设置挂钩`Resque.before_fork`并`Resque.after_fork`为工作人员建立沟通渠道。作为 Resque 的限制，它仅将最后分配的块/Proc 运行到 before_fork 和 after_fork 挂钩。因此，如果您有自己的自定义 before_fork/after_fork 钩子，您 *必须 * 手动设置代理的通信通道，例如在 config/initializers/custom_resque.rb 文件中：

```
Resque.before_fork do |job|
  NewRelic::Agent.register_report_channel(job.object_id)

  # extra custom stuff here
end

Resque.after_fork do |job|
  NewRelic::Agent.after_fork(:report_to_channel => job.object_id)

  # extra custom stuff here
end 
```

此代码直接取自 RPM gem 的文件`gems/newrelic_rpm-3.5.0/lib/new_relic/agent/instrumentation/resque.rb`

**RPM 错误更新 12/27/2012：**部署上述技术后，我们发现 RPM gem 在分叉模式下使用时会泄漏文件句柄（例如 Resque）。我们观察到了这种错误信息`ActiveRecord::StatementInvalid: ArgumentError: too large fdsets: SET client_min_messages TO ''`。经过大量挖掘，我们发现这些是由于 ActiveRecord 尝试打开数据库连接而无法打开数据库连接时造成的，因为文件描述符的数量已用尽。New Relic 在对解释计划进行抽样时确认代理存在错误。当运行大量连接到数据库的 Resque 作业时会发生这种情况。

**错误更新 2013 年 1 月 28 日：**经过多次摸索后，我们发现这个错误是由与[resque-lonely_job](http://rubygems.org/gems/resque-lonely_job) gem 的不受支持的交互引起的，该 gem 使用了 Resque 的`before_perform`钩子，可能会在`Resque::Job::DontPerform`异常情况下停止 Resque 作业。在这种情况下，RPM 客户端无法正确清理并泄漏文件描述符。New Relic 已被告知并正在修复。

**错误更新 2013 年 4 月 10 日：**已修复。我们使用的是 3.6.0.78，它可以处理这种情况。不再有文件描述符泄漏！谢谢新遗物。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T03:09:49.223

我遇到了同样的问题，因为 New Relic 代理没有在我的 Resque 工作人员中启动。所以我更新了我的`resque:setup`rake 任务以[手动启动代理](https://newrelic.com/docs/ruby/how-do-i-make-sure-the-ruby-agent-starts#manual_start "新遗物文档")：

```
task "resque:setup" => :environment do
  if ENV['NEW_RELIC_APP_NAME']
    NewRelic::Agent.manual_start :app_name => ENV['NEW_RELIC_APP_NAME']
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T12:49:55.900

尝试了@trliner 的建议，但我一直收到此错误：

```
rake aborted!
undefined local variable or method `establish_connection' for ActiveRecord::Base:Class 
```

有更简单的解决方案，只需将 NEWRELIC_ENABLE env 添加到您的 heroku 实例中，一切都应该工作：

```
heroku config:set NEWRELIC_ENABLE=true 
```

# sql - SQL server 表到 FoxPro 表的问题

> ID：12503713
> 
> 赞同：0
> 
> 时间：2012-09-19T22:19:06.707
> 
> 标签：sql, sql-server, tsql, foxpro, bcp

我正在尝试将一些 SQL 服务器表放入 FoxPro dbf。

我成功地 bcp 导出数据，这样当我使用 FoxPro 导入向导时，数据可以正确导入。但是当我尝试在命令行中执行此操作时，我最多只能导入前几列，而所有其他列都消失了。

在以下目录中，我将 .CSV 文件和成功的 DBF 导入表都放入了。

[这里有 2 个文件的目录](http://witold.org/se/)

我需要弄清楚的是如何从 FoxPro 的命令行导入这些 CSV 文件。

我尝试了各种组合；

```
APPEND FROM D:\work\oh\output\sqloutput.csv TYPE CSV
APPEND FROM D:\work\oh\output\sqloutput.csv DELIMITED WITH TAB 
```

它都不起作用。

有任何想法吗？我知道我以前这样做过，我不记得诀窍是什么......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T23:53:43.913

哇..我认为您的做法是错误的...只需对 SQL 数据库执行一个简单的 SQLCONNECT()，对数据源、存储过程或其他任何内容运行查询，并且它位于 VFP 中的游标中。 .然后，你可以“复制”到一个DBF，你就完成了......像

```
lnH = SQLCONNECT() 
```

（为您弹出 ODBC 连接对话框）。

如果不是这样，你可以做

```
lnH = SQLStringConnect("Provider=... for sql server, server name, etc") 
```

然后

```
if lnH > 0
   sqlexec( lnH, "select * from someTableOnServer where whateverConditon", "C_LocalCursor" )

   select C_LocalCursor
   copy to PermanentTable

   sqldisconnect( lnH )
endif 
```

现在，如果有超过 10 个字符的列名的列，并且您没有使用数据库容器，您可能必须通过将查询更改为 GET 列名来进行调整，或者重新选择本地数据以适应到 10 个字符的非 dbc 表上下文中。

构建查询的另一个示例可能是 - 为了在键入时便于阅读，我使用 text/endtext 例如

```
text to lcSQLCmd noshow pretext 1+2
   select
         t1.Column1,
         t1.AVeryLongColumnName as AVLColName,
         t1.AnotherLongColumn2  as ALC2,
         t1.SomeFlag,
         t2.ColumnFromAnotherTable as CFATbl,
         t2.AnotherCol
      from
         SQLDatabase.dbo.SQLTable1 t1
            join SQLDatabase.dbo.SQLTable2 t2
               on t1.SomeKey = t2.SomeKey
      where
         t1.SomeCriteria = 'whatever'
      order by
         t1.SomeFlag
endtext

*/ Then, to "clean up" the string for VFP to pass properly, 
*/ strip out the cr/lf from the text such as
lcSQLCmd = chrtran( lcSQLCmd, chr(13)+chr(10), "" )

*/ THEN, pass this command through sqlexec()
sqlexec( lnH, lcSQLCmd, "C_LocalCursor" ) 
```

第二个显然更容易阅读您想要获得的内容，并注意我还预先将长列名缩短为 VFP 10 char 非 DBC 列名限制。然后，像第一个例子一样复制出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:38:32.397

接收 FoxPro 表中的所有字段是否与您尝试添加到其中的 CSV 中的列具有相同的顺序和相同的数据类型？它们都足够大以处理数据吗？您是否确保 CSV 中的所有文本字段都不在其文本中包含字段分隔符？

# c++ - CUDA 执行时间

> ID：12503717
> 
> 赞同：0
> 
> 时间：2012-09-19T22:19:58.287
> 
> 标签：c++, cuda

我在知道执行时间时遇到了一点麻烦，我已经准备好尝试使用事件、time.h 库和 cutTimer，问题是它只打印到单位矩阵，程序的其余部分是大矩阵，内核调用和结果向量不打印。如果我删除它`t1 = clock()`并且`t2 = clock()`它打印得很好，我不知道我做错了什么或者编码是否错误。

```
# include <iostream>
# include <conio.h>
# include <time.h>

using namespace std;

# define N 7

__global__ void mult(int *MAT, int *VEC, int *SOL, int b) {
int bx = blockIdx.x;
int tx = threadIdx.x;
int i = 32 * bx + tx;
for (int j = 0; j < b; j++) {
    SOL[i] = ((MAT[i * b + j] * VEC[j]) + SOL[i]) % 2;
}
}

int main () {

int i, j, k, a, s, b;
int Q1[100][100], Q[100][100], Qg[100][100], MI[100][100];
int MAT[N][N], VEC[N], SOL[N];
int *MAT_dev, *VEC_dev, *SOL_dev;
int coef, aux[N], element;

clock_t t1, t2;

cout << "Size of the matrix: ";
cin >> k;
cout << endl << endl;

cont = 0;
a = k + 2;
b = (k * 2) + 1;
size_t nBytes = b * b * sizeof(int);

cudaMalloc((void**)&MAT_dev, nBytes);
cudaMalloc((void**)&VEC_dev, nBytes);
cudaMalloc((void**)&SOL_dev, nBytes);

//-----------------------------------------
//----- MATRIX 
//-----------------------------------------
// Matrix Q1.
for (i = 0; i < a; i++) {
    for (j = 0; j < a; j++) {
        Q1[i][j] = 0;
    }
}
//Matrix Q1 XOR.
Q1[0][1] = 1;
for (i = 0; i < k; i ++) {
    for (j = 0; j < k; j++) {
        Q1[i + 1][j + 1] = Q1[i][j] ^ Q1[i][j + 2];
    }
}

// Q1 to Q
for (i = 0; i < k; i++) {
    for (j = 0; j < k; j++) {
        Q[i][j] = Q1[i][j + 1];
    }
}

// Matrix Inverse Q.
for (i = 0; i < k; i++) 
    for (j = k; j < 2*k; j++) {
        if (i == (j-k))
            Q[i][j] = 1;
        else
            Q[i][j] = 0;
    }
    // Iterations
    for (s = 0; s < k; s++) {
        element = Q[s][s];
        for (j = 0; j < 2*k; j++)
            Q[s][j] = Q[s][j] / element;
        for (i = 0; i < k; i++) {
            if (i == s)
                ;
            else
            {
                coef = Q[i][s];
                for (j = 0; j < 2*k; j++)
                    aux[j] = Q[s][j] * (coef*-1);
                for (j = 0; j < 2*k; j++)
                    Q[i][j] = abs(Q[i][j] + aux[j]) % 2;
            }
        }
    }

//Print Matrix Q Inverse.
cout << endl << endl;
cout << "Inverse of Q.\n\n";
for (i = 0; i < k; i++) {
    for (j = k; j < k * 2; j++) {
        cout << Q[i][j] << " ";
    }
    cout << endl;
}
cout << endl << endl;

// Matrix Q Hat
cout << "Q Hat. \n\n";
for (i = 0; i < k; i++) {
    for (j = 0; j < k + 1; j++) {
        Qg[i][j] = Q[i + 1][j + k];
        if (i == (k - 1) || j == k)
            Qg[i][j] = 0;
        if (i == (k - 1) && j == k)
            Qg[i][j] = 1;
        cout << Qg[i][j]<< " ";
    }
    cout << endl;
}
cout << endl << endl;
// Matrix Identity
cout << "Matrix Identity.\n\n";
for (i = 0; i < k + 1; i++) {
    for (j = 0; j < k + 1; j++) {
        if (i == j)
            MI[i][j] = 1;
        else
            MI[i][j] = 0;
        cout << MI[i][j] << " ";
    }
    cout << endl;
}
cout << endl << endl;

//-----------------------------------------
//----- Big Marix 
//-----------------------------------------

// Big Matrix of Ceros
for(i = 0; i < b; i++) {
    for (j = 0; j < b; j++) {
        MAT[i][j] = 0;
    }
}
// Big Matrix - Matrix Inverse
for (i = 0; i < k; i++) {
    for (j = 0; j < k; j++) {
        MAT[i][j] = Q[i][j + k];
    }
}
// Big Matrix - Matrix Hat
for (i = 0; i < k; i++) {
    for (j = 0; j < k + 1; j++) {
        MAT[i][j + k] = Qg[i][j];
    }
}
// Big Matrix - Matrix Identity
for (i = 0; i < b; i++) {
    for (j = 0; j < (k + 1); j++) {
        MAT[i + k][j] = MI[i][j];
    }
}
// Print Big Matrix
cout << "Big Matrix. \n\n";
for (i = 0; i < b; i++) {
    for (j = 0; j < b; j++) {
        cout << MAT[i][j] << " ";
    }
    cout << endl;
}
cout << endl << endl;

//-----------------------------------------
//----- VECTOR 
//-----------------------------------------

// VECTOR.
cout << "Vector: " << endl;
for (i = 0; i < b; i++) {
    cin >> VEC[i];
}
cout << endl << endl;

//-----------------------------------------
//-----  Assign and Invocation
//-----------------------------------------
t1 = clock();
cudaMemcpy(MAT_dev, MAT, nBytes, cudaMemcpyHostToDevice);
cudaMemcpy(VEC_dev, VEC, nBytes, cudaMemcpyHostToDevice);

mult<<< 1, b >>>(MAT_dev, VEC_dev, SOL_dev, b);

cudaMemcpy(SOL, SOL_dev, nBytes, cudaMemcpyDeviceToHost);

for (i = 0; i < b; i++) {
    cout << SOL[i] << " ";
}
cout << endl;

for (i = 0; i < b; i++) {
    VEC[i] = SOL[i];
}

//-----------------------------------------
//----- Free Memory
//-----------------------------------------
cudaFree(MAT_dev);
cudaFree(VEC_dev);
cudaFree(SOL_dev);
t2 = clock();

cout << "Time of Execution: " << t2 - t1;
cout << endl;

system("PAUSE");
return 0;
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:29:00.000

**count**变量在给定代码中未声明。（其实这个变量不是必须的）否则这段代码没有其他错误。它将正确执行并显示时间。请在计时器内添加 cudaMalloc，并从计时器中排除输出打印。这将给出正确的 CUDA 运行时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:56:30.447

您可以尝试使用 cuda-memcheck 来运行您的程序吗？还是cuda-gdb 呢？您可能会发现一些导致提前戒烟的问题。

# java - SourceDataLine.start() 使对象为空

> ID：12503719
> 
> 赞同：1
> 
> 时间：2012-09-19T22:20:06.630
> 
> 标签：java, audio, nullpointerexception, javasound, xuggler

这是有症状的代码：

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.zove.xuggleraudio;

import com.xuggle.xuggler.IAudioSamples;
import com.xuggle.xuggler.IContainer;
import com.xuggle.xuggler.IStream;
import com.xuggle.xuggler.IStreamCoder;
import com.xuggle.xuggler.ICodec;
import com.xuggle.xuggler.IPacket;

import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.Line;
import javax.sound.sampled.LineUnavailableException;

import javax.sound.sampled.SourceDataLine;

/**
 * Class that represents an audio player with the expected
 * controls (start, stop, pause, resume).
 * @author Mciavilli
 */
public class Audio 
{
    //The name of the file to be played
    private final String filename;
    //Our connection to the mixer
    private final SourceDataLine mLine;
    //The index of the audio stream inside the file
    private final int audioId;
    //Xuggler media container
    private final IContainer container;
    //The stream decoder
    private final IStreamCoder streamCoder;

    /*
     * Constructor that takes a String argument
     */
    public Audio(String filename)
    {
        this.filename = filename;
        //Create Xuggler container object
        this.container = IContainer.make();
        //Open the container
        if(container.open(filename, IContainer.Type.READ, null) < 0)
            throw new IllegalArgumentException("Invalid file name: " + this.filename);
        //find the audio stream within contained streams
        this.audioId = getAudioId(container);
        //get the audio stream
        IStream stream = container.getStream(audioId);
        //get the stream decoder
        this.streamCoder = stream.getStreamCoder();
        //open the stream decoder
        if (this.streamCoder.open() < 0)
            throw new RuntimeException("could not open audio decoder for container: "
              + filename);
        //Get a pipe to the sound mixer
        this.mLine = readySoundSystem(streamCoder);
    }

    private int getAudioId(IContainer container)
    {
        //see how many streams are there
        int numStreams = container.getNumStreams();
        int audioId = -1;
        for(int i = 0; i < numStreams ; i++)
        {
            IStream stream = container.getStream(i);
            IStreamCoder streamCoder = stream.getStreamCoder();
            if(streamCoder.getCodecType() == ICodec.Type.CODEC_TYPE_AUDIO)
                audioId = i;
                break;
        }//end for statement
        //No audio stream found
        if(audioId == -1)
            throw new RuntimeException("Failed to find an audio stream in:" +
                    this.filename);

        return audioId;
    }//end method getAudioId

    private SourceDataLine readySoundSystem(IStreamCoder aAudioCoder)
    {
        AudioFormat audioFormat = new AudioFormat(aAudioCoder.getSampleRate(),
            (int)IAudioSamples.findSampleBitDepth(aAudioCoder.getSampleFormat()),
            aAudioCoder.getChannels(),
            true, /* xuggler defaults to signed 16 bit samples */
            false);
        DataLine.Info info = new DataLine.Info(SourceDataLine.class, audioFormat);
        try
        {
          SourceDataLine mLine = (SourceDataLine) AudioSystem.getLine(info);
          /**
           * if that succeeded, try opening the line.
           */
          mLine.open(audioFormat);
          /**
           * And if that succeed, start the line.
           */
          mLine.start();
        }
        catch (LineUnavailableException e)
        {
          throw new RuntimeException("could not open audio line");
        }
        return mLine;
      }//end method readySoundSystem
    /*
     * starts playing the file.
     * returns true if successful.
     * should be called only once per Audio object
     */ 
    public boolean start()
    {
        if(!mLine.isActive())
        {
            IPacket packet = IPacket.make();
            while(container.readNextPacket(packet) >= 0)
            {
              /*
               * Now we have a packet, let's see if it belongs to our audio stream
               */
              if (packet.getStreamIndex() == this.audioId)
              {
                /*
                 * We allocate a set of samples with the same number of channels as the
                 * coder tells us is in this buffer.
                 * 
                 * We also pass in a buffer size (1024 in our example), although Xuggler
                 * will probably allocate more space than just the 1024 (it's not important why).
                 */
                IAudioSamples samples = IAudioSamples.make(1024, this.streamCoder.getChannels());

                /*
                 * A packet can actually contain multiple sets of samples (or frames of samples
                 * in audio-decoding speak).  So, we may need to call decode audio multiple
                 * times at different offsets in the packet's data.  We capture that here.
                 */
                int offset = 0;

                /*
                 * Keep going until we've processed all data
                 */
                while(offset < packet.getSize())
                {
                  int bytesDecoded = this.streamCoder.decodeAudio(samples, packet, offset);
                  if (bytesDecoded < 0)
                    throw new RuntimeException("got error decoding audio in: " + filename);
                  offset += bytesDecoded;
                  /*
                   * Some decoder will consume data in a packet, but will not be able to construct
                   * a full set of samples yet.  Therefore you should always check if you
                   * got a complete set of samples from the decoder
                   */
                  if (samples.isComplete())
                  {
                    playSound(samples);
                  }
                }//end inner while block
              }//end inner if block
              else
              {
                /*
                 * This packet isn't part of our audio stream, so we just silently drop it.
                 */
                do {} while(false);
              }//end else block
            }//end outer while block
            //success!
            return true;
     }//end outer if block
        //The sound is already playing
        return false;
    }//end method start

    private void playSound(IAudioSamples aSamples)
      {
        /**
         * We're just going to dump all the samples into the line.
         */
        byte[] rawBytes = aSamples.getData().getByteArray(0, aSamples.getSize());
        this.mLine.write(rawBytes, 0, aSamples.getSize());
      }//end method playJavaSound

    /*
     * stops the playback
     * returns true if suucessful
     */
    public boolean stop()
    {
        if(mLine.isActive())
        {
            this.mLine.stop();
            return true;
        }
        return false;
    }

    public static void main(String args[]) throws InterruptedException 
    {
        if(args.length != 1)
            throw new IllegalArgumentException("illegal arguments passed");
        Audio audio = new Audio(args[0]);
        audio.start();
        Thread.sleep(10 * 1000);
        audio.stop();
    }

}//end class Audio 
```

导致问题的行是第 104 行：

```
mLine.start(); 
```

当我检查调试器时，mLine 对象（一个 SourceDataLine 对象）很好，直到执行此行，这导致 mLine 等于“null”。

我认为这个问题和[这里](https://stackoverflow.com/questions/7396364/null-pointer-exception-while-writing-to-sourcedataline)一样。

我还尝试使用 Clip 而不是 SourceDataLine 最终遇到了同样的问题。

有趣的是，这个问题在[最初的 Xuggler 程序](http://xuggle.googlecode.com/svn/trunk/java/xuggle-xuggler/src/com/xuggle/xuggler/demos/DecodeAndPlayAudio.java)中并没有发生，调用 start() 并没有那么糟糕的效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:47:47.367

您同时拥有一个成员变量 mLine 和一个局部变量 mLine。只有后者被分配。当它超出范围时，您在调试器中看到的是成员变量，它仍然为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:45:45.523

EJP 在上面是正确的，因为您的 mLine 变量仅适用于 try 块。（在它对我有意义之前，我必须自己在调试器中运行它。语法高亮帮助之后，为我的实例变量着色与局部变量不同。）您返回的 mLine 实际上是实例变量。

```
 try
    {
      SourceDataLine mLine = (SourceDataLine) AudioSystem.getLine(info);
      /**
       * if that succeeded, try opening the line.
       */
      mLine.open(audioFormat);
      /**
       * And if that succeed, start the line.
       */
      mLine.start();
    }
    catch (LineUnavailableException e)
    {
      throw new RuntimeException("could not open audio line");
    }
    return mLine; 
```

本质上是一样的：

```
 try
    {
      SourceDataLine mLine = (SourceDataLine) AudioSystem.getLine(info);
      /**
       * if that succeeded, try opening the line.
       */
      mLine.open(audioFormat);
      /**
       * And if that succeed, start the line.
       */
      mLine.start();
    }
    catch (LineUnavailableException e)
    {
      throw new RuntimeException("could not open audio line");
    }
    return this.mLine; 
```

因为返回的 mLine 位于声明它的 try 块之外。实际上，出于这个原因，将实例变量的名称重新用作局部变量是不安全的。如果您尝试使用 Eclipse 或 Idea 等 IDE 中的重构工具将变量重命名为“line”，那么它只会重命名 try 范围内的引用，从而进一步突出您的错误。

```
 try
    {
      SourceDataLine line = (SourceDataLine) AudioSystem.getLine(info);
      /**
       * if that succeeded, try opening the line.
       */
      line.open(audioFormat);
      /**
       * And if that succeed, start the line.
       */
      line.start();
    }
    catch (LineUnavailableException e)
    {
      throw new RuntimeException("could not open audio line");
    }
    return mLine; 
```

如果您随后尝试手动重新键入 return 语句中的引用，您将收到编译错误。

```
 try
    {
      SourceDataLine line = (SourceDataLine) AudioSystem.getLine(info);
      /**
       * if that succeeded, try opening the line.
       */
      line.open(audioFormat);
      /**
       * And if that succeed, start the line.
       */
      line.start();
    }
    catch (LineUnavailableException e)
    {
      throw new RuntimeException("could not open audio line");
    }
    return line; //Will not compile! 
```

正确的解决方法是将 return 语句放入 try 块中：

```
 try
    {
      SourceDataLine line = (SourceDataLine) AudioSystem.getLine(info);
      /**
       * if that succeeded, try opening the line.
       */
      line.open(audioFormat);
      /**
       * And if that succeed, start the line.
       */
      line.start();
      return line;
    }
    catch (LineUnavailableException e)
    {
      throw new RuntimeException("could not open audio line");
    } 
```

# dynamics-ax-2009 - 如何在不重新创建表的情况下更改表中的字段顺序？

> ID：12503720
> 
> 赞同：0
> 
> 时间：2012-09-19T22:20:08.497
> 
> 标签：dynamics-ax-2009, x++, axapta

在 AX 客户端中，是否可以在不删除和重新创建表的情况下更改表中的字段顺序？有没有一种快速简便的方法来做到这一点？

我正在使用动态 AX 2009。

我试过了：

*   在 AX 中，更改表中字段的顺序并保存表。客户端关闭并重新打开后，字段的顺序恢复到原来的顺序。
*   在 AX 中，同步表，然后更改字段的顺序，然后同步表，然后重新打开客户端。
*   在数据库中（使用 Management Studio 的 SQL Server），重新排序字段然后：重新启动 AOS，从 AX 同步等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T05:46:19.160

字段按顺序列出，`fieldId`除非删除字段然后以“正确”顺序重新创建它们（通过导入），否则无法更改。这当然会删除表中包含的所有数据。

在 AX 2012 中，字段始终按字母顺序列出，因此任何`fieldId`顺序都无效。

不要浪费您的时间：将字段添加到`AutoReport`字段组。这更有用，因为您可以在表单网格甚至表格浏览器中使用字段组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:52:08.673

我不知道你为什么需要，但是如果表是空的，你可以：

1.  导出表格，勾选“使用 ID 值导出”复选框
2.  删除表
3.  修改导出的 XPO 文件中的字段 ID
4.  导入表格，勾选“使用 ID 值导入”复选框

因此，AOT 中的表字段将按字段 ID 排序

从技术上讲，该表将被删除并重新创建，但您无需重新创建其结构并手动添加所有字段。

# .net - 使用任务在循环中调用异步 WCF

> ID：12503721
> 
> 赞同：0
> 
> 时间：2012-09-19T22:20:14.007
> 
> 标签：.net, wpf, wcf, task-parallel-library

我正在编写一个 WPF 应用程序，它需要根据列表中的项目对 WCF 服务进行多次调用。

```
foreach(var item in items)
{
    var dataAboutItem = MethodThatCallsWCFService(item);

    //  Do work to update UI
    .
    .
    .
} 
```

是否有一种聪明的方法可以使用 Tasks/Parallel.ForEach 或 TPL 中的某些构造来执行此操作，它可以让我在后台线程上进行所有服务调用，然后在每次调用的结果出现时相应地更新 UI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:33:00.700

如果您可以使用 C# 5.0，那么`async`-`await`可以帮助您。WCF 服务的代码生成器支持`async`- `await`，因此它可以生成方法的异步版本，这将很有用。

您要做的是异步启动所有请求，并将`Task`它们返回的 s 存储在一个集合中。然后，在`Task`完成时处理 s。.Net 不支持开箱即用，但您可以使用[Stephen Toub 的`Interleaved()`方法](http://blogs.msdn.com/b/pfxteam/archive/2012/08/02/processing-tasks-as-they-complete.aspx)：

```
var tasks = new List<Task<DataAboutItem>>();

foreach (var item in items)
{
    // don't await here yet
    Task<DataAboutItem> dataAboutItemTask = MethodThatCallsWCFServiceAsync(item);

    tasks.Add(dataAboutItemTask);
}

foreach (var bucket in Interleaved(tasks))
{
    var dataAboutItemTask = await bucket;
    DataAboutItem dataAboutItem = await dataAboutItemTask;

    //  Do work to update UI
} 
```

如果您想限制调用 WCF 服务（例如，一次只发出 10 个请求），您可以改用 TPL 数据流，指定`MaxDegreeOfParallelism`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:32:47.420

任务并行库

[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)

最后一个示例有 UI

[数据和任务并行的潜在陷阱](http://msdn.microsoft.com/en-us/library/dd997392.aspx)

或者更新 UI 绑定的公共属性，而不是直接更新 UI。

如果这不会加载 CPU，您可能需要使用 MaxDegreeOfParallelism 来防止过多的线程启动。

[ParallelOptions.MaxDegreeOfParallelism](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)

# python - 如何在 OS X 10.8 上更正我的 Python/pip 配置？

> ID：12503723
> 
> 赞同：2
> 
> 时间：2012-09-19T22:20:26.287
> 
> 标签：python, macos, unix, pip, osx-mountain-lion

我有一台运行 OS X 10.8、Xcode 4.4 的 MacBook Pro。我最近安装了 lxml，但是当我去导入它时，我得到了以下信息：

```
MacBook-Pro:~ jedc$ sudo pip install lxml==2.3.5
Password:
Downloading/unpacking lxml==2.3.5
  Downloading lxml-2.3.5.tar.gz (3.2Mb): 3.2Mb downloaded
  Running setup.py egg_info for package lxml
    Building lxml version 2.3.5.
    Building without Cython.
    Using build configuration of libxslt 1.1.26
    warning: no previously-included files found matching '*.py'
Installing collected packages: lxml
  Running setup.py install for lxml
    Building lxml version 2.3.5.
    Building without Cython.
    Using build configuration of libxslt 1.1.26
    building 'lxml.etree' extension
    /usr/bin/cc -fno-strict-aliasing -O3 -w -pipe -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/usr/include/libxml2 -I/usr/local/Cellar/python/2.7.1/include/python2.7 -c src/lxml/lxml.etree.c -o build/temp.macosx-10.4-x86_64-2.7/src/lxml/lxml.etree.o -w -flat_namespace
    /usr/bin/cc -L/usr/local/Cellar/readline/6.1/lib -bundle -undefined dynamic_lookup -L/usr/local/Cellar/readline/6.1/lib build/temp.macosx-10.4-x86_64-2.7/src/lxml/lxml.etree.o -lxslt -lexslt -lxml2 -lz -lm -o build/lib.macosx-10.4-x86_64-2.7/lxml/etree.so
    building 'lxml.objectify' extension
    /usr/bin/cc -fno-strict-aliasing -O3 -w -pipe -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/usr/include/libxml2 -I/usr/local/Cellar/python/2.7.1/include/python2.7 -c src/lxml/lxml.objectify.c -o build/temp.macosx-10.4-x86_64-2.7/src/lxml/lxml.objectify.o -w -flat_namespace
    /usr/bin/cc -L/usr/local/Cellar/readline/6.1/lib -bundle -undefined dynamic_lookup -L/usr/local/Cellar/readline/6.1/lib build/temp.macosx-10.4-x86_64-2.7/src/lxml/lxml.objectify.o -lxslt -lexslt -lxml2 -lz -lm -o build/lib.macosx-10.4-x86_64-2.7/lxml/objectify.so

Successfully installed lxml
Cleaning up...
MacBook-Pro:~ jedc$ python
Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 15:22:34) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import lxml
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named lxml 
```

由于 lxml 已成功安装，但 Python 找不到它，我显然配置错误。这是其他信息：

```
MacBook-Pro:~ jedc$ which python
/Library/Frameworks/Python.framework/Versions/2.7/bin/python
MacBook-Pro:~ jedc$ which pip
/usr/local/bin/pip
MacBook-Pro:~ jedc$ echo $PATH
/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/go/bin:/Users/jedc/.rvm/bin 
```

我的 ~/.bash_profile 包含以下内容：

```
PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:${PATH}"
export PATH 
```

有人告诉我，我可能因为（在以前的某个时候）安装了非 Apple 默认版本的 Python 而搞砸了。 **谁能帮我弄清楚我需要做什么来诊断这个然后修复它？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T22:25:51.577

你的`pip`命令是为不同的 python 安装的（一个安装在`/usr/local/bin`. 你会发现`/usr/local/bin/python`导入工作。

您需要为您的其他 python（中的那个）单独[安装 pip](http://www.pip-installer.org/en/latest/installing.html)`/Library/Frameworks/Python.framework/Versions/2.7/bin/python` ，以便为该 python 版本安装 lxml。

用于确保安装后使用`/Library/Frameworks/Python.framework/Versions/2.7/pip`正确的`pip`命令进行安装。`lxml``pip`

# html - DIV 的 IE7 问题，子 div 宽度取自父级

> ID：12503731
> 
> 赞同：2
> 
> 时间：2012-09-19T22:21:13.570
> 
> 标签：html, internet-explorer-7, width

DIV 的 IE7 问题，子 div 宽度取自父级！它在 IE9 中运行良好，但 IE7 显示垂直堆叠的子 div 和父 div 的 100% 宽度。IE9 显示子 div 首先水平堆叠，然后根据需要显示到第二行，它们是子 div 宽度的 100%，具体取决于内容。

```
<style type="text/css">
    body {
        margin-left: 0px;
        margin-top: 0px;
        margin-right: 0px;
        margin-bottom: 0px;
        padding-left: 0px;
        padding-top: 0px;
        padding-right: 0px;
        padding-bottom: 0px;
        background-image: url(/CIRCUITS/framework/Images/masterpagedefault/bg_texturedphoto.jpg);
        background-repeat: repeat;
    }
    .menuItems 
    {
        list-style-image: none;
        list-style-type: none;
        padding:5px 10px 10px 10px;
        margin: 0px 0px 0px 0px;
    }
    .menuItemHeader {
        background-color: #272727;
        padding: 5px 20px 5px 5px;
        margin: 10px 10px 0px 10px;
        font-family: Arial;
        font-size: 11px;
        font-weight: bold;
        color: white;
        text-align: left;
        border-top: 1px;
        border-left: 1px;
        border-bottom: 0px;
        border-right: 1px;            
        border-style: solid;
        border-color: #666;
    }
    .menuItemHeader2 {
        background-color: #272727;
        padding: 5px 5px 5px 5px;
        margin: 0px 0px 0px 0px;
        font-family: Arial;
        font-size: 11px;
        font-weight: bold;
        color: white;
        text-align: left;
        border-top: 1px;
        border-left: 1px;
        border-bottom: 0px;
        border-right: 1px;            
        border-style: solid;
        border-color: #333;
    }
    .menuItemContainer2 {
        background-image: url(/CIRCUITS/framework/Images/masterpagedefault/dropshadow.png);
        background-repeat: repeat;
        padding: 5px 5px 5px 5px;
        margin: 0px 0px 0px 0px;
        font-family: Arial;
        font-size: 11px;
        font-weight: bold;
        color: white;
        text-align: left;
        border: 1px;
        border-style: solid;
        border-color: #333; 
        vertical-align:top;
    }
    .menuItemContainer {
        background-color: #333;
        padding: 0px 0px 0px 0px;
        margin: 0px 10px 0px 10px;
        font-family: Arial;
        font-size: 11px;
        font-weight: bold;
        color: white;
        text-align: left;
        border: 1px;
        border-style: solid;
        border-color: #666;
    }
    .menuFramework2 {
         background-image: url(/CIRCUITS/framework/Images/masterpagedefault/HSubmenuBG.png);
         border-top: none;
         border-left: solid;
         border-left-color: black;
         border-left-width: 1px;
         border-bottom: solid;
         border-bottom-color: black;
         border-bottom-width: 1px;
         border-right: solid;
         border-right-color: black;
         border-right-width: 1px;
         visibility: hidden;
         position: absolute;
         top: 10px;
         font-family: Arial, Helvetica, sans-serif;
         font-size: 10px;
         color: white;
    }
    .menuFramework {
         background-image: url(/CIRCUITS/framework/Images/masterpagedefault/HSubmenuBG.png);
         border-top: none;
         border-left: solid;
         border-left-color: black;
         border-left-width: 1px;
         border-bottom: solid;
         border-bottom-color: black;
         border-bottom-width: 1px;
         border-right: solid;
         border-right-color: black;
         border-right-width: 1px;
         visibility: hidden;
         position: absolute;
         font-family: Arial, Helvetica, sans-serif;
         font-size: 10px;
         color: white;
    }
    .MainMenu {
         background-image: url('/CIRCUITS/framework/Images/masterpagedefault/dropshadow.png');
         border-top-width: 0px; 
         border-left: 2px solid transparent;
         border-bottom: 2px solid transparent;
         border-right: 2px solid transparent;
         visibility: hidden; 
         position: absolute;
         width: 1009px;
         font-family: Arial, Helvetica, sans-serif;
         font-size: 10px;
         color: white;
         padding: 0px 0px 0px 0px;
         margin: 0px 0px 0px 0px;
         top: 55px;
    }
    .menulinks {
         font-family: Arial, Helvetica, sans-serif;
         font-size: 11px;
         color: white;
         outline: none;
         text-decoration: none;
    }
    a {
         font-family: Arial, Helvetica, sans-serif;
         font-size:12px;
         color: white;
         outline:none;
     }
     a:link {
         text-decoration: none;
         outline:none;
     }
     a:visited {
         text-decoration: none;
         color: white;
         outline:none;
     }
     a:hover {
         text-decoration: none;
         color: #99ccff;
         outline:none;
     }
     a:active {
         text-decoration: none;
         outline:none;
     }
</style>
<script language="javascript" type="text/javascript">
    function MM_preloadImages() { //v3.0
        var d = document; if (d.images) {
            if (!d.MM_p) d.MM_p = new Array();
            var i, j = d.MM_p.length, a = MM_preloadImages.arguments; for (i = 0; i < a.length; i++)
                if (a[i].indexOf("#") != 0) { d.MM_p[j] = new Image; d.MM_p[j++].src = a[i]; }
        }
    }
    function On(objMenuButton, objMenu, TopOffset, LeftOffset, imgButton) {
        if (objMenu.style.visibility == "visible") {
            return;
        }
        //alert(document.getElementById("divER").style.clientLeft);
        //alert(document.getElementById("divER").clientLeft);
        //return;
        //alert(objMenuButton.offsetTop);
        objMenu.style.visibility = "visible";
        //objMenu.style.left = (objMenuButton.offsetLeft + LeftOffset) + "px";
        //alert(objMenu.offsetLeft);
        //alert(objMenu.style.bottom);
        //objMenu.style.top = (objMenuButton.offsetTop + objMenuButton.offsetHeight + TopOffset) + "px";
        //this.divER.style.left.
        //alert("bot:" + (parseInt(ImgHeight) + parseInt(TopOffset) + 0));
        //alert(objMenuButton.style.height);
        //alert(objMenu.style.left);
        //alert(objMenuButton.offsetLeft);
        imgButton.src = "/CIRCUITS/framework/Images/masterpagedefault/HMenuUA_On.png";
    }
    function Off(objMenu, imgButton) {
        //alert(event.srcElement.id + " " + objMenu.id);
        //alert(objMenu.id);
        imgButton.src = "/CIRCUITS/framework/Images/masterpagedefault/HMenuUA.png";
        objMenu.style.visibility = "hidden";
    }
</script> 
```

UA Menu Small Large Largetestryareyareyaetuyateru*   菜单项小*   菜单项二*   菜单项三*   菜单项四*   菜单项五*   菜单项六UA 菜单 小 大 最大 ateru*   菜单项小*   菜单项二*   菜单项三*   菜单项四*   菜单项五*   菜单项六UA 菜单 小 大 最大 aterudfhs dfhdfhdfh dahfh dfh afd a df hh*   菜单项小*   菜单项二*   菜单项三*   菜单项四*   菜单项五*   菜单项六UA 菜单 小 大 最大 ateru*   菜单项小*   菜单项二*   菜单项三*   菜单项四*   菜单项五*   菜单项六UA 菜单 小 大 最大 ateru*   菜单项小*   菜单项二*   菜单项三*   菜单项四*   菜单项五*   菜单项六

# c# - 引入 CLR 类型（类或接口）的性能成本是多少？

> ID：12503732
> 
> 赞同：2
> 
> 时间：2012-09-19T22:21:17.350
> 
> 标签：c#, .net, performance, clr

虽然.Net允许动态调用（比如用反射，C#动态关键字），但是在使用C#这样的语言时，我们有时觉得有必要使用静态类型，以证明我们的程序是正确的，不会有运行时的打字问题。

有时这会导致我们引入接口或基类，这些接口或基类只是为了向编译器解释‘是的，我知道我传递给这个上下文的所有对象都将被理解为调用带有 arg Y 的方法 X - 这里，我会用接口定义来证明给你看！（例如 - .net 内部使用 IReadChunkBytes 接口来允许将 SteamReadChunkBytes 或 BufferReadChunkBytes 对象传递给某个方法或其他。）

其他时候，我们创建类或类型来服务于其他感觉不是很有用的类型-y，例如作为具有小附加行为的唯一标识符（有点像枚举），或者保存一组常量等。

当我面临这样的设计决策时，我想更好地了解编译时间、运行时和其他成本将是多少 显然，每次这样的比较都会有两个方面的成本和收益，但总的来说，我们应该希望在每次这样的比较/讨论中看到“定义新类型”的相同成本。我们如何量化这些成本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T22:28:38.260

静态创建新接口或类的性能和/或空间成本总是可以忽略不计。在这个意义上不要想太多。相反，反射和后期绑定会导致严重的性能问题。你应该在每一个机会都使用静态类型。

与创建新类或接口相关的成本不是性能成本。它们是更多的人力成本。下面列出了在添加新类或接口之前应考虑的一些事项。无论如何，使用后期绑定或反射可能对您的程序没有帮助。这些是最后的手段。

*   程序复杂性。虽然通常情况并非如此，但一般的经验法则是，每个类都会为您的应用程序增加额外的复杂性，从而使其在运行时更难理解、传递给新的项目成员、记住和绘制图表。改变变得更加难以实施。
*   如果你真的不觉得上课是必要的，也许不是。也许还有其他方法可以解决您的问题，例如使用更多动态类。也许您可以使用继承或其他技术来减少重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T23:10:23.480

几乎所有东西都有一些运行时成本。唯一的例外是空白空间之类的东西。原因是几乎所有内容都记录在 IL 映像中，甚至是局部变量名、参数名、常量。所以至少会有磁盘成本、虚拟内存空间成本、工作空间成本。

在 CPU 方面，更多的元数据会减慢程序启动、令牌解析、JIT/NGEN 的速度。

但有时添加类型也会对​​性能产生积极影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T22:36:34.093

在强类型上使用动态更有可能给您带来性能问题。因此，如果您可以很好地使用`dynamic`大多数对象，您可能无需担心创建静态类型的成本。

旁注：如果您更喜欢动态类型，C# 可能不是最好的语言。由于大多数 C# 代码都针对强类型对象，因此很难获得好的样本。

# regex - 使用 sed 将 IP 地址数字替换为“X”字母（保留字符编号）

> ID：12503733
> 
> 赞同：1
> 
> 时间：2012-09-19T22:21:19.423
> 
> 标签：regex, sed

我有一个包含多个 IP 的字符串。我需要使用 sed 将所有 IP 中的所有数字替换为字母“X”，`10.135.1.03`即将变为`XX.XXX.X.XX`.

**UPDATE** String 不仅包含 IP，还包含其他字符：字母和数字。只需要替换 IP 的数字。类似于“收到来自 192.168.1.1 的 5 个连接，来自 10.0.0.1 的 26 个连接，总共 31 个 - 星期二，2012 年 9 月 20 日。消息 ID：212.132.15”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T22:23:00.870

```
$ str="10.135.1.03"
$ echo $str | sed -e "s/[0-9]/X/g"
XX.XXX.X.XX 
```

或者在脚本上下文中，这可能更好：

```
out=$(sed -e "s/[0-9]/X/g" <<< "$str") 
```

不知道你为什么想要`sed`顺便说一句，`tr`语法稍微干净一些：

```
out=$(tr [:digit:] X <<< "$str") 
```

使用 bash 时，甚至更清洁：

```
out=${str//[0-9]/X} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T05:49:54.370

这可能对你有用（GNU sed、tr 和 Bash）：

```
sed -r 's/\<[0-9]{1,3}(\.[0-9]{1,3}){3}\>/$(tr [0-9] X <<<&)/g;s/.*/echo &/e' file 
```

你可以作弊并做：

```
sed -r 's/\<[0-9]{1,3}(\.[0-9]{1,3}){3}\>/X.X.X.X/g' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T00:09:09.373

就个人而言，我会发现这非常困难`sed`。我认为这会容易得多`GNU awk`：

```
awk --re-interval '{ for (i=1; i<=NF; i++) if ($i ~ /([[:digit:]]{1,3}\.){3}[[:digit:]]{1,3}/) gsub(/[[:digit:]]/, "X", $i) }1' file.txt 
```

结果：

```
Received 5 connections from XXX.XXX.X.X, 26 connections from XX.X.X.X, total 31 - Tuesday, 20.09.2012\. MessageID: 212.132.15 
```

# tridion - 在 SDL Tridion 2011 中检索用户登录时间

> ID：12503734
> 
> 赞同：7
> 
> 时间：2012-09-19T22:21:22.973
> 
> 标签：tridion

我需要编写一个脚本来生成一年未登录 Tridion 的用户报告。我知道我们可以检索所有文件的修改日期和用户，但是我们如何跟踪没有进行任何修改的用户的登录日期，即只有只读访问权限？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T01:04:24.713

查看 Tridion 2011 应用程序的 IIS 日志。在那里，您应该看到不同用户对 Tridion 中所有页面的请求。一些条目将如下所示：

```
2012-09-20 00:48:53 ::1 GET /WebUI/Editors/CME/Views/TridionDashboard/TridionDashboard.aspx - 81 TRIDION\Administrator ::1 Mozilla/5.0+(Windows+NT+6.1;+WOW64)+AppleWebKit/537.1+(KHTML,+like+Gecko)+Chrome/21.0.1180.89+Safari/537.1 200 0 0 48 
```

从上面的项目你可以看到 TridionDashboard 页面，即你登录后得到的第一页，是由 TRIDION\Administrator 用户访问的（是的，我的 Tridion VM 被称为“TRIDION”，我使用管理员帐户登录它）。

因此，您需要做的是确保日志在填满后不会被覆盖并存档到您可以抓取并解析它们的位置。

您需要的唯一信息是用户名。只需将其放入某种 HashSet 数据结构（仅存储唯一键）中，键是用户名，值是时间戳。我敢打赌，您可以使用 Powershell 用几行代码完成所有解析（或者，如果您使用 Cygwin，使用 grep 命令也可以解决问题）。

日志通常位于 %SystemDrive%\inetpub\logs\LogFiles 中，但请检查您的系统以确保该位置未被修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T00:23:08.303

我从来没有写过这样的东西，我能想到的唯一方法是创建一个 GUI 扩展，它在用户打开 CME 时向用户对象添加指示登录时间的 AppData。

我不相信登录发生时会触发事件，否则我建议创建一个偶数系统。

您可能会考虑阅读 Nuno 的这篇文章 (http://www.tridiondeveloper.com/inheriting-metadata-on-organizational-items)，它描述了执行由用户打开项目触发的操作。我的猜测是，即使用户只有只读访问权限，它也会被触发（但您需要检查这一点）。如果在所有读取操作上触发它，您可以在用户打开 CME 中的任何 IdentifiableObject 时更新用户 AppData。这将告诉您用户上次查看 CME 中任何项目的时间。

希望有帮助

克里斯

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T11:49:12.177

Mihai 前段时间写过这个，这里是链接，它也有一些代码示例：http: [//yatb.mitza.net/2012/03/capturing-users-last-login-date-into.html](http://yatb.mitza.net/2012/03/capturing-users-last-login-date-into.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T11:57:00.800

您可以实现 Load 事件。这几乎被 GUI 中的每个操作调用。只要有人使用 Tridion，就肯定会调用该事件。但要小心：你必须编写超级高效的代码，否则会减慢系统速度。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-19T22:43:37.070

Tridion 不会跟踪“此用户所做的最后修改”，因此您必须自己滚动某些内容。

我想到的第一件事是为 的事件编写一个[处理](https://stackoverflow.com/questions/11072387/sample-event-system-code-for-tridion-2011-sp1)[程序`Save`](https://stackoverflow.com/questions/11072387/sample-event-system-code-for-tridion-2011-sp1)`IdentifiableObject`。在该处理程序中，您可以更新用户的[应用程序数据](https://stackoverflow.com/a/10801337/209103)属性。然后，该脚本可以简单地遍历所有用户，获取您的 AppData 并确定哪些用户已超过一年不活动。

# xcode4 - 应用程序将在设备上运行，但不在 iOS 模拟器上

> ID：12503738
> 
> 赞同：0
> 
> 时间：2012-09-19T22:22:06.023
> 
> 标签：xcode4, ios-simulator, ios6, xcode4.5

我可以在我的 iPod Touch 上运行我的应用程序，但我不能在模拟器上运行它。如果我为模拟器编译它，它构建得很好但是当它即将在模拟器上运行时，我在控制台中收到这个错误

```
 dyld: Library not loaded: @rpath/SenTestingKit.framework/Versions/A/SenTestingKit
  Referenced from: /Users/bbrandy95/Library/Application Support/iPhone Simulator/6.0/Applications/5BEEC98E-0F91-46C2-AF63-F695995A224D/Brandsonic Web mobile.app/Brandsonic Web mobile
  Reason: image not found 
```

这里有什么问题？它编译得很好，但它不会在模拟器上运行。这是在 Xcode 3 中创建的较旧项目，因此它没有测试目标。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:26:15.540

仔细检查该库是否确实在您指定的路径中 ( `@rpath/SenTestingKit.framework/Versions/A/SenTestingKit`)

# playframework - Play 框架中的资产指纹识别

> ID：12503742
> 
> 赞同：3
> 
> 时间：2012-09-19T22:22:54.230
> 
> 标签：playframework, playframework-2.0, cdn

Rails 提供了一个非常简单的静态资产指纹解决方案。Play 框架有类似的东西吗？在 Google 上似乎找不到任何东西。

谢谢。

[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

更新：我的公司最终在内部实施了一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T00:57:23.213

你可能想看看新的 require.js 支持[1]，可在 play 2.1 master 上找到

[1] [https://github.com/playframework/Play20/commit/e3c2ffb0d4779863374c44c5ec1a588a1eca4474](https://github.com/playframework/Play20/commit/e3c2ffb0d4779863374c44c5ec1a588a1eca4474)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-20T01:20:43.013

[Play 2.3](http://www.playframework.com/documentation/2.3.x/Highlights23)（目前在 RC1 上）引入了类似 Rails 的资产管道，支持[资产指纹](http://www.playframework.com/documentation/2.3.x/Assets)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T22:40:14.733

Play framework 2 内置了对[CofeeScript](http://www.playframework.org/documentation/2.0.3/AssetsCoffeeScript)、[LESS](http://www.playframework.org/documentation/2.0.3/AssetsLess)和[Closure](http://www.playframework.org/documentation/2.0.3/AssetsGoogleClosureCompiler)的支持，但是它们都不被视为“静态”资源，因为它们是在运行时编译的。

目前还没有等价物`fingerprint`，因此您需要自己编写（可能很短）动作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T19:06:59.150

正如一个答案所提到的，我不确定您如何通过一个很短的动作来做到这一点。

但是您可以像 James Ward 在这里创建一个包装的资产控制器： [https ://github.com/jamesward/play2-cloudfront](https://github.com/jamesward/play2-cloudfront)

这将只处理使用 CDN 信息装饰链接。然后，您可以获得链接的 MD5 并将其附加到文件名中。因此，如果您有 foo.js，它将是 foo-fp-XXXXXXXXXXXXXX.js”。

我认为当 CDN 来寻找它时，您必须更改路由文件以将该资产路由到正确的文件。因此，该路线必须剥离“-fp-XXXXXXXXXXXXXX”中的所有内容并获取文件名和扩展名。

编辑：这是 git repo，我有一个示例，说明我们如何在我的公司进行资产指纹识别。 [https://github.com/Egraphs/play-assets-improvements](https://github.com/Egraphs/play-assets-improvements)

# c# - 具有多段的 ZedGraph 曲线

> ID：12503746
> 
> 赞同：1
> 
> 时间：2012-09-19T22:23:11.793
> 
> 标签：c#, zedgraph

是否可以绘制由多个段组成的曲线？例如，我有 4 个点，我需要绘制从*point1*到*point2*以及从*point3*到*point4的曲线，* *point2*和*point3*之间没有连接。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:10:15.527

想到的一个想法是绘制两条不同的曲线。

1) 创建两个`ZedGraph.PointPairList`项目，一个带有 Point1 和 Point2，另一个带有 Point3 和 Point4。

2)`ZedGraph.GraphPane.AddCurve`用于添加两条曲线，使用采用PointPairList/iPointList 的重载方法。

# ruby-on-rails - 调用模块子类而不指定名称

> ID：12503747
> 
> 赞同：0
> 
> 时间：2012-09-19T22:23:13.487
> 
> 标签：ruby-on-rails, ruby, module

我想只使用我的模块名称来访问我的子类。

```
module MyModule
    class UselessName
        include OtherModel
        # only self method
        def self.x
        end
    end
    # No other class
end 
```

我想写`MyModule.x`而不是`MyModule::UselessName.x`

我可以在课堂上转换我的模块，但我使用 RoR Helpers，我希望 MyModule 仍然是一个模块而不是一个类。

有没有办法做到这一点 ？谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:06:15.890

好的，我找到了一种非常肮脏的方法来完成我认为你的意思：

```
module MyModule
  class UselessName
    include OtherModule

    # have whatever you want here
  end

  def self.x
    # whatever
  end
end 
```

因此，您可以在代码中的某个地方执行此操作，我再说一遍，这非常非常脏！

```
MyModule.methods(false).each do |m|
  # m = method

  # now you can redefine it in your class
  # as an instance method. Not sure if this
  # is what you want though
  MyModule::UselessName.send(:define_method, :m) do
    # in this NEW (it's not the same) method you can
    # call the method from the module to get the same
    # behaviour
    MyModule.send(m)
  end
end 
```

我不知道这是否会覆盖具有相同名称的实例方法，如果它之前在类中，或者如果它抛出异常，你必须尝试一下。

在我看来，你应该过度考虑你的应用程序设计，因为这不是它应该的方式，但是你去......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T23:26:25.823

好的，让我们将问题分成两部分 - 获取此类方法的列表并在模块中制作代理。

获取列表可能有点棘手：

```
MyModule::UselessName.public_methods(false) - MyModule::UselessName.superclass.public_methods(false) 
```

在这里，我们从所有公共类方法的列表开始，并从中减去所有超类的公共类方法的列表。

现在，假设我们知道方法的名称，我们需要创建代理方法。

```
metaclass = class << MyModule; self; end
metaclass.send(:define_method, :x) do |*args, &block|
  MyModule::UselessName.send(:x, *args, &block)
end 
```

此代码将在运行时等同于以下定义。

```
module MyModule
  def x(*args, &block)
    MyModule::UselessName.send(:x, *args, &block)
  end
end 
```

所以让我们把它放在一个简单的函数中。

```
def make_proxies(mod, cls)
  methods = cls.public_methods(false) - cls.superclass.public_methods(false)
  metaclass = class << mod; self; end

  methods.each do |method|
    metaclass.send(:define_method, method) do |*args, &block|
      cls.send(method, *args, &block)
    end
  end
end 
```

所以现在你只需要为需要的模块和类调用它。请注意，“目标”模块可能与拥有该类的“源”模块不同，因此您可以将所有方法（假设它们具有不同的名称，或者您将使用类名称作为前缀）添加到一个模块中。例如，对于您的情况，只需拨打以下电话。

```
make_proxies(MyModule, MyModule::UselessName) 
```

# ios - 在屏幕捕获期间显示图形叠加而不捕获它

> ID：12503751
> 
> 赞同：1
> 
> 时间：2012-09-19T22:23:32.167
> 
> 标签：ios, objective-c, cocoa-touch, uiview, uikit

我正在开发一个可以进行全屏捕获的应用程序，但需要同时显示一个控制视图。但是，我希望能够在不捕获视图的情况下进行屏幕捕获。我正在将屏幕活动记录到 .mov 文件中，而不是进行离散的屏幕截图。

我正在使用 AVCaptureScreenInput 并成功进行屏幕截图。我意识到这是一个开放式问题（抱歉！），但我不确定从哪里开始寻找答案。

是否有可以应用的 UIView 的属性？

# android - 使用 sqlite 的一次性活动

> ID：12503756
> 
> 赞同：0
> 
> 时间：2012-09-19T22:24:13.473
> 
> 标签：android, sqlite, passwords, authorize

我了解如何创建一个一次性活动，该活动保存到首选项以使活动只出现一次。但是有人可以告诉我如何将“第一次打开”屏幕保存到 sqlite。我想防止用户清除数据并再次看到屏幕。

澄清

我正在查看密码登录教程，我希望用户使用应用程序注册密码，但是一旦设置了密码，出于安全目的，我希望删除注册屏幕。有人可以帮忙吗。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:27:22.547

使用 SQLite 作为存储将无济于事。

Android 会将您的数据库存储在下面`/data/data/your.package.name/databases/yourfilename`，因此，当用户清除应用程序的数据时，它会删除所有数据库以及共享首选项。

# jquery - 文本的jQuery淡入不平滑淡入

> ID：12503757
> 
> 赞同：1
> 
> 时间：2012-09-19T22:25:06.360
> 
> 标签：jquery, fadein

与我在这里看到的其他帖子不同，我将 jQuery fadeIn 用于可变文本而不是图像。我看到它随着最后一个脉冲逐渐变成全彩色，有点波涛汹涌。我希望它逐渐消失。我已经在 jsFiddle 上发布了它：http: [//jsfiddle.net/9sPFa/](http://jsfiddle.net/9sPFa/)

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T15:56:36.257

它看起来像一个 webkit 渲染问题，一个静态元素和中间动画之间的区别（可能与字体平滑相关）。这个“错误”可以通过对你的文本定位 webkit 应用不透明度来~~修复（因为它不是 Firefox 的问题）：~~

```
-webkit-opacity: .99; 
```

你的动画在 chrome/safari 中会很流畅：http: [//jsfiddle.net/davechiu/9sPFa/3/](http://jsfiddle.net/davechiu/9sPFa/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:28:19.677

对我来说看起来不错..也许尝试将时间间隔从 1300 增加到 2500 并检查您是否看到相同的结果..

```
// fade in of 3 phrases
        $("#fade1").fadeIn(2500, function() {
            $("#fade2").fadeIn(2500, function() {
                $("#fade3").fadeIn(2500);
            });
        });​ 
```

# java - JBoss“表中的JPA实体”未创建带注释的POJO类

> ID：12503760
> 
> 赞同：2
> 
> 时间：2012-09-19T22:25:23.287
> 
> 标签：java, eclipse, hibernate, jpa, jboss

我在 Eclipse 中使用 JBoss 工具时遇到了一个奇怪的问题。

我想使用逆向工程功能生成带有 JPA 注释的 POJO 类。我右键单击相关包并选择 New -> "JPA Entities from Tables"，然后完成向导。我已经正确设置了我的 PostgreSQL 连接，我可以在我的数据库中看到我的表，并且我选择了我想用来生成 POJO 的特定表。我什至可以修改我想要的列及其映射的字段名称。

但是，在我单击“完成”后，在包中或项目中的任何地方都没有创建 POJO。但是persistence.xml 使用对缺失类的类引用进行更新。

例如，我有一个名为 Users 的表，我希望创建一个名为 User.java 的 POJO，但它没有被创建。然而，persistence.xml 有一个新行 org.example.model.User

谁能帮我？

# javascript - Javascript HTML5 FileAPI：未捕获的 ReferenceError：未定义 utils

> ID：12503761
> 
> 赞同：0
> 
> 时间：2012-09-19T22:25:25.317
> 
> 标签：javascript, html, fileapi

我在任何地方都找不到这个，据我所知，没有其他人有这个问题。

我直接使用[http://www.w3.org/TR/FileAPI/](http://www.w3.org/TR/FileAPI/)的代码，我根本无法让它工作。

这是我用来测试它的 jsfiddle [http://jsfiddle.net/4k5xa/](http://jsfiddle.net/4k5xa/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:34:32.527

该示例不是一个完整的工作示例。它调用假设的库函数。您将需要实施它们或不使用它们。

# iphone - 无法在 iOS6 中的 UITextField 或 UITextView 中输入文本

> ID：12503764
> 
> 赞同：19
> 
> 时间：2012-09-19T22:25:49.820
> 
> 标签：iphone, uitextfield, uitextview, ios6, first-responder

在我的一个应用程序中，当我尝试编辑（输入一些文本）`UITextField`或`UITextView`任何其他“可文本”`UIControl`时，光标只会闪烁，但除了 BACKSPACE 之外**没有输入任何字符**（只有当我有一些初始文本时才可能），返回和切换字符类型。这适用于整个应用程序的所有控件。

概括：

1.  它只发生在 iOS 6.0 上（不会发生在 iOS 5.x、4.x 模拟器或真实设备上）
2.  所有委托方法都被触发（shouldBeginEditing: didBeginEditing:)**除了**shouldChangeCharactersInRange:
3.  isFirstResponder 标志的行为设置正确（shouldBeginEditing：记录 NO，而 didBeginEditing：正确记录 YES）。它还使用 THE firstResponder 是已编辑的日志进行测试。
4.  **在将任何`UIAlertView`内容呈现给用户并关闭**后，它会自行修复。**此警报是否显示在同一屏幕（UIViewController 视图）或任何其他屏幕上都没有关系。**

 **我什至不知道如何处理或调试它。

我应该在哪里寻找提示？有跟踪响应者链相关问题等的专家吗？

如何追踪`UIAlertView`' 对问题的影响？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-20T10:53:42.243

根据您的实现，它可能是您忘记在应用程序委托的方法中调用`makeKeyAndVisible`的类的方法，也可能是主界面 xib 文件中的相应标志。`UIWindow``- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions``Visible at Launch`

干杯... :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T05:13:51.863

就我而言，主窗口上有一个“启动时可见”，它未选中，仅适用于 iOS5，需要检查它才能使其在 iOS6 上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T20:13:55.347

在我的情况下，我将 UITextField 的 becomeFirstResponder 从 ViewDidLoad 移动到 ViewDidAppear ，这解决了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T00:34:46.043

在我的情况下，我有一个活动指示器，它会在后台活动期间在主窗口上弹出。在这种情况下，活动指示器视图有自己的窗口，该窗口设置为 UIWindowLevelAlert。我无意中在这个窗口上调用了 makeKeyAndVisible。稍后我会调用 resignKeyWindow。这曾经适用于 iOS 4 和 5，但不再适用于 iOS 6。我发现这在技术上不是必需的，因为简单地使用 window.hidden = Y/N 也可以。**

# html - 页脚没有停留在 wordpress 主题中

> ID：12503769
> 
> 赞同：1
> 
> 时间：2012-09-19T22:26:20.307
> 
> 标签：html, css, wordpress, wordpress-theming, sticky-footer

我知道这已经发布了好几次，但我可能在这里弄乱了我的代码，需要一些帮助来解决它。

我想在我设计的 wordpress 主题中制作一个粘性页脚。对于粘性页脚，我一直在使用本教程： [http ://www.wordimpressed.com/wordpress/put-a-css-sticky-footer-in-your-wordpress-theme/](http://www.wordimpressed.com/wordpress/put-a-css-sticky-footer-in-your-wordpress-theme/)

我希望有人可以触发它并告诉我问题是什么。

这是我正在建立的有问题的网站的链接：

[http://www.lufter.dk/test/wordpress/](http://www.lufter.dk/test/wordpress/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:46:50.670

如果添加 CSS：

```
body, #wrapper { height: 100% } 
```

然后它会工作......（在[http://www.lufter.dk/test/wordpress/om-sonhks/](http://www.lufter.dk/test/wordpress/om-sonhks/)上）

# xslt - 如何让 XSLT 以最不具侵入性的方式表达属性？

> ID：12503772
> 
> 赞同：0
> 
> 时间：2012-09-19T22:26:50.403
> 
> 标签：xslt, xslt-1.0

我有这样的 XSLT 1.0：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:template match="paragraph">
    <p>
      <xsl:apply-templates/>
    </p>
  </xsl:template>
</xsl:stylesheet> 
```

只是，有很多很多模板与第一个类似。我想在这些模板中的每一个中发出一个特定的属性，但我想做出最小侵入性的改变来实现它。这是我尝试的第一件事：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:template match="paragraph">
    <p>
      <xsl:apply-templates/>
    </p>
  </xsl:template>

  <xsl:template match="@class">
    <xsl:attribute name="class">
      <xsl:value-of select="@class"/>
    </xsl:attribute>
  </xsl:template>
</xsl:stylesheet> 
```

但这没有用。我试过这个：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:template match="paragraph">
    <p>
      <xsl:attribute name="class">
        <xsl:value-of select="@class"/>
      </xsl:attribute>
      <xsl:apply-templates/>
    </p>
  </xsl:template>
</xsl:stylesheet> 
```

但是要在每个模板中实现这一点，需要大量的代码重复。这是我能做的最好的事情，还是有更合适的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:06:32.990

如果您真的不想对现有的模板规则进行任何更改，则添加一个优先级高于“p”等规则的模板规则，如下所示：

```
<xsl:template match="*[@class]" priority="100">
  <xsl:variable name="v">
    <xsl:next-match/>
  </xsl:variable>
  <xsl:apply-templates select="$v" mode="add-attribute">
    <xsl:with-param name="att" select="@class"/>
  </xsl:apply-templates>
</xsl:template>

<xsl:template match="*" mode="add-attribute">
  <xsl:param name="att" as="attribute()"/>
  <xsl:copy>
     <xsl:copy-of select="@*, $att"/>
     <xsl:apply-templates mode="#current"/>
  </xsl:copy>
</xsl:template> 
```

在 1.0 中，您必须将其放在单独的模块中并使用 apply-imports 而不是 next-match。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T22:30:15.373

在您最初的尝试中

```
 <xsl:template match="@class">
    <xsl:attribute name="class">
      <xsl:value-of select="@class"/>
    </xsl:attribute>
  </xsl:template> 
```

此模板的上下文节点是`class`属性节点，因此`value-of`应该选择`.`：

```
 <xsl:template match="@class">
    <xsl:attribute name="class">
      <xsl:value-of select="."/>
    </xsl:attribute>
  </xsl:template> 
```

但是，您还应该注意，bare`<xsl:apply-templates/>`仅应用与当前节点的*子*节点匹配的模板，并且由于属性节点在 XSLT 数据模型中不算作子节点，因此该`@class`模板不会触发。你可能需要修改你的`paragraph`模板说

```
 <xsl:template match="paragraph">
    <p>
      <xsl:apply-templates select="@*|node()"/>
    </p>
  </xsl:template> 
```

应用匹配`paragraph`元素属性及其子元素的模板。

# c# - 类型 xxx 不是预期的。使用 XmlInclude 或 SoapInclude 属性指定静态未知的类型

> ID：12503773
> 
> 赞同：2
> 
> 时间：2012-09-19T22:27:01.083
> 
> 标签：c#, wcf, serialization

因此，当我可以在 MSMQ 上放置消息时，旧代码库运行良好。但是，我收到的新代码库不起作用，老实说，我不知道我缺少什么。

基类：

```
 [DataContract]
    [KnownType(typeof (ReportA))]
    [KnownType(typeof (AUpdate))]
    [KnownType(typeof (AStatusReport))]
    [KnownType(typeof (MsgHeader))]
    [KnownType(typeof(BRegistationReport))]
    [KnownType(typeof(BAlarmReport))]
    [KnownType(typeof(AlarmData))]
    [KnownType(typeof(DmpAlarmData))]
    public class MyMessage {....} 
```

然后是这里的具体类，BAarmReport（派生自MyMessage）：

```
[DataContract]
public class BAlarmReport: MyMessage 
{ ... } 
```

然后您可以将 AlarmData 作为继承自 DmpAlarmData 的基础：

```
[DataContract]
    public class DmpAlarmData : AlarmData
{ .. } 
```

我将它放在 MSMQ 上的方式与以前相同，在我获得新的代码库之前一直有效：

```
var queue = new MessageQueue(@"FormatName:Direct=OS:" + mMSMQQueueNameAndLocation);
var msg = new Message {Body = MyMessage.CreateMessage() };

using (var ts = new TransactionScope(TransactionScopeOption.Required))
{
    queue.Send(msg, MessageQueueTransactionType.Automatic); // send the message
    ts.Complete(); // complete the transaction
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:25:43.803

固定的。*叹*

挖掘内部异常导致我发现一些类没有无参数构造函数的问题。但也应该使用基类本身的 XmlInclude 属性声明子类。

# jquery - JQuery 插件未正确显示

> ID：12503778
> 
> 赞同：-5
> 
> 时间：2012-09-19T22:28:01.573
> 
> 标签：jquery, html, jquery-plugins, scroll

> **可能重复：**
> [JQuery 可滚动文本](https://stackoverflow.com/questions/12503389/jquery-scrollable-text)

我正在尝试使用[这个](http://www.class.pm/files/jquery/uscrollbar/demo/)插件，这是我的代码：

```
<script>
$(document).ready(function(e) {
    $(".Information").uscrollbar();
});
</script>

<div id="Hotel" class="Information">
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
    </div> 
```

但是当我打开页面时，它只显示文本，但没有包含文本的框或演示图片中显示的滚动条。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:40:54.707

尝试将 div 的高度设置为 50px，然后重试..

```
.Information
 {
    height: 50px;
 }    
    <script>
    $(document).ready(function(e) {
        $(".Information").uscrollbar();
    });
    </script>

<div id="Hotel" class="Information">
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
        <p>blah</p>
    </div> 
```

看起来 div 的高度小于可滚动长度

# php - 致命错误：找不到类“CI_Model”

> ID：12503783
> 
> 赞同：0
> 
> 时间：2012-09-19T22:28:35.160
> 
> 标签：php, codeigniter, webserver

突然间，我的网络服务器上的页面失败了。一切都在当地工作得很好。

有问题的错误

`[Wed Sep 12 03:37:49 2012] [error] [client _______] PHP Fatal error:  Class 'CI_Model' not found in /home/webuser/public_html/website.com/public/application/models/userModel.php on line 2`

userModel.php 的开头行

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
Class UserModel extends CI_Model{ 
```

直到今天我最近进行了一次代码拉取，这一直有效。这只是对视图、控制器和这个特定模块的更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T22:37:42.987

显然无法找到应该在`system/core/Model.php`.

确保文件仍然存在并且文件名由于某种原因没有更改，并且文件中没有错字。

最后，在主 index.php（位于`application`和`system`目录之外的那个）中，确保`$system_path`设置正确。

# gnuplot - Gnuplot 为 3D 向量着色

> ID：12503786
> 
> 赞同：1
> 
> 时间：2012-09-19T22:29:02.400
> 
> 标签：gnuplot

我正在尝试从两个不同的文件中绘制 3d 矢量，以将第一个文件中的矢量用黑色着色，将其他文件用红色着色。有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T23:42:54.063

这是一个很容易的。

首先设置你的箭头样式：

```
set style arrow 1 linecolor rgb "red"
set style arrow 2 linecolor rgb "black" 
```

现在制作你的情节：

```
splot 'datafile1' u 1:2:3:4:5:6 with vectors arrowstyle 1, \
      'datafile2' u 1:2:3:4:5:6 with vectors arrowstyle 2 
```

当然，这假设您的数据文件设置为：

```
x1 y1 z1 dx1 dy1 dz1
x2 y2 z2 dx2 dy2 dz2
... 
```

# assembly - 汇编：字符串输入（字长）和重新打印

> ID：12503787
> 
> 赞同：0
> 
> 时间：2012-09-19T22:29:02.563
> 
> 标签：assembly, x86, dos, 16-bit

我不知道出了什么问题。我想输入 WORD 大小的字符串并将一个整数添加到字符串的输入值并重新打印结果。我不太确定算术运算，因为这是我第一次在单个程序中使用许多运算，它们是 16 位的。

```
clr macro  
mov ax, 03h  
int 10h  
endm  

cseg segment para 'code'  
assume cs:cseg; ds:cseg; ss:cseg; es:cseg  
org 100h  

start: jmp begin  

amount_s label word  
amount_max dw 3  
amount_length dw ?  
amount_field dw 3 dup (?)  

x1 dw 0  
x2 dw 0  

sum1 dw 0
sum2 dw 0

bal dw 10

begin:  clr

mov ah, 0Ah     ;input string
lea dx, amount_s
mov cx, amount_length
lea si, amount_field
int 21h

mov ax, [si]        ;copy si to ax
sub ax, 30h     ;converts value of ax to integer
mov bx, 10      ;copy 10 to bx      
mul bx          ;multiply it ax by bx
mov x1, ax      ; copy ax to x1
inc si          ;move si pointer by 1

mov ax, [si]        ;copy si to ax
sub ax, 30h     ;converts value of ax to integer
mov x2, ax      ; copy ax to x2

add ax, x1      ;add ax which is x2 by x1
add ax, bal     ; add ax by bal which is 10
mov sum1, ax        ;copy the result to sum1

mov dx, 0       ; copy 0 to dx  
mov bx, 10      ; copy 10 to bx
div bx          ;divides ax by bx
mov sum1, ax        ; copy quotient to sum1
mov sum2, dx        ; copy remainder to sum2

add sum1, 30h       ;convert for printing
add sum2, 30h       ;convert for printing

mov ah, 02h     ;prints sum1
mov dx, sum1
int 21h

mov ah, 02h     ;prints sum2
mov dx, sum2
int 21h

int 20h
cseg ends
end start 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:52:41.073

调试和检查参考文档以查看问题所在以及如何解决如何？:)

一件事我可以直截了当地说，int 21h 的函数 0ah 使用的结构包含字节字段，而不是字字段。

然而你将它们声明为单词（`dw`），而不是字节（`db`）：

```
amount_max dw 3
amount_length dw ?
amount_field dw 3 dup (?) 
```

而且您不应该像使用以下内容那样访问它们：

```
mov ax, [si] 
```

相反，读取字节：

```
mov al, [si] 
```

如果要将字节值转换为字值，只需将 0 粘贴到字寄存器的顶部字节中，如下所示：

```
mov ah, 0 
```

其余的看起来很合理，但我还没有运行代码。你应该这样做。在调试器中，如果它不能正常工作。

# android - 什么样的 Android 设备有报告 IMEI？

> ID：12503794
> 
> 赞同：0
> 
> 时间：2012-09-19T22:29:47.183
> 
> 标签：android, imei

有谁知道什么类型的Android设备报告没有IMEI？有没有办法以编程方式定位它们？例如，它们往往是运行 3.x 的平板电脑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T22:47:20.193

据我了解，IMEI 是针对 GSM 手机报告的。其余设备（基于 CDMA 或 WiFi）将没有 IMEI。

但是，请注意，如果您使用 TelephonyManager.getDeviceId() API (http://developer.android.com/reference/android/telephony/TelephonyManager.html#getDeviceId%28%29)，它将返回（基于文档）：

> 返回唯一的设备 ID，例如，GSM 的 IMEI 和 CDMA 手机的 MEID 或 ESN。如果设备 ID 不可用，则返回 null。

如果您有兴趣寻找既没有 IMEI 也没有 MEID 或 ESN 的设备，那么您应该寻找任何只有 WiFi/蓝牙连接的平板电脑。操作系统版本无关紧要。

顺便提一句。你为什么需要这个？你想在这种类型的设备上测试一些代码吗？

# winapi - Win32、串口读/写和重叠

> ID：12503798
> 
> 赞同：4
> 
> 时间：2012-09-19T22:30:11.847
> 
> 标签：winapi, serial-port, wait

我正在尝试整理一个用于读取/写入串行端口的概念证明，但我在设计/概念方面遇到了问题。我不想轮询，所以我尝试使用 Overlapped I/O。在这种情况下，它不是一个多线程应用程序——它只是使用高效的等待。

1.  打开端口（重叠）
2.  SetCommState（设置端口波特率、奇偶校验、CTS/RTS 等）
3.  SetCommMask（EV_BREAK、EV_CTS、EV_DSR、...、EV_RXCHAR、EV_RXFLAG、EV_TXEMPTY）
4.  创建重叠的结构和事件
5.  WriteFile（到端口）
6.  WaitCommEvent（由于写入）
7.  WaitCommEvent（待读）
8.  读取文件（来自端口）
9.  检查读缓冲区

MSDN 示例有点蹩脚（[监控通信事件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363424%28v=vs.85%29.aspx)）。我目前正在使用两个事件，但该`ReadFile`步骤以`ERROR_INVALID_PARAMETER`.

在上述步骤中，我需要一个或两个重叠结构吗？如果是一种`OVERLAPPED`结构，是步骤`WriteFile`，`WaitCommEvent`（用于写入），重置事件，`WaitCommEvent`（用于读取）`ReadFile`，？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T23:02:34.317

看看这篇文章，关于如何使用重叠 I/O 和串行端口更彻底：

[串行通信](http://msdn.microsoft.com/en-us/library/ff802693.aspx)

# vb.net - 用 vb 删除然后替换复制的文件仍然充当旧文件

> ID：12503801
> 
> 赞同：0
> 
> 时间：2012-09-19T22:30:18.807
> 
> 标签：vb.net, winforms

这是一个 winforms vb.net 应用程序。由于某些限制，我无法使用 VS 中提供的内置 clickOnce 更新。因此，为了处理我的应用程序的更新，我编写了一个更新应用程序。它会下载电子邮件附件并对其进行处理。一切都很好，包括从应用程序安装文件夹中删除旧文件，然后将更新的文件移动到该文件夹​​。

但是新文件似乎对应用程序没有任何影响。只是为了测试，我在应用程序表单加载事件中放置了一个 MessageBox.Show。当我调试时，该应用程序在 VS 中显示消息框。以及当我从 bin 文件夹运行应用程序时。当我的更新程序应用程序复制文件时，文件在那里但没有任何变化，并且在应用程序加载时没有消息框显示。进一步调查问题，我手动删除了应用程序文件夹中要替换的文件，然后将更新 zip 文件的内容解压缩到该文件夹​​。启动应用程序，现在显示一个消息框。如果我复制文件app 直接从 bin 文件夹到它显示的 app 文件夹。

这让我相信，在下面的函数中，幕后发生了一些我没有捕捉到的事情。任何想法为什么这会失败？？？

```
 Function ApplyUpdates(ByVal c As Integer, ByVal e As List(Of MessagePart))
    Dim xxxxState As Boolean = False
    Dim _path As String = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)) + "\XXXX\UpdateFiles\"
    Dim d As Integer = 20

    xxxxState = isProcessRunning("xxxx")
    If xxxxState = True Then
        KillxxxxTask()
    End If

    For Each _S In System.IO.Directory.GetFiles(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)) + "XXXX\UpdateFiles")
        System.IO.File.Delete(_S)
    Next

    For Each att In e
        Dim y As Boolean = UnZip(att.FileName)
    Next

    For Each f In System.IO.Directory.GetFiles(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)) + "\XXXX\UpdateFiles")
        Dim y As String = Path.GetExtension(f)
        Dim _fNM As String = Path.GetFileNameWithoutExtension(f)
        If y.Contains("ex0") Then
            My.Computer.FileSystem.RenameFile(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)) + "\XXXX\UpdateFiles" + "\" + _fNM + y, _fNM + "." + "exe")
            f = f.Replace("ex0", "exe")
        End If
        If y.Contains("dl0") Then
            My.Computer.FileSystem.RenameFile(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)) + "\XXXX\UpdateFiles" + "\" + _fNM + y, _fNM + "." + "dll")
            f = f.Replace("dl0", "dll")
        End If
        updating(d, "Copying File : " + f)
        d += 10
        Dim fName As String = Path.GetFileName(f)
    Next

        For Each S In System.IO.Directory.GetFiles(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)) + "\XXXX\UpdateFiles")
            Dim _ofile As String = Path.GetFileName(S)
            If File.Exists("C:\XXXX\" + _ofile) Then
                File.Delete("C:\XXXX\" + _ofile)
            End If
            '  File.Copy(S, "C:\XXXX\" + _ofile, True)

        Next
        For Each S In System.IO.Directory.GetFiles(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)) + "\XXXX\UpdateFiles")
            Dim _ofile As String = Path.GetFileName(S)
            File.Move(S, "C:\XXXX\" + _ofile)

        Next
        updating(100, "Update Completed")

    Return Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:22:19.290

这听起来*很像*Windows 文件虚拟化。

搜索文件 `C:\Documents and Settings\<userName>\Application Data`和子​​文件夹，我怀疑你会在那里找到它们。

如果您的项目中没有包含 app.manifest，Windows 会这样做以保护您的程序不受自身影响。Windows 将假定您的应用程序是不支持 UAC 的旧的遗留应用程序，除非它具有 app.manifest。为了防止您的应用程序因文件访问被拒绝而崩溃，它允许执行文件操作，而是秘密地将文件操作映射到安全的本地文件夹。

只需添加一个app.Manifest：Project Add -> New Item -> Application Manifest File

那应该这样做。您可能会发现您需要请求提升的权限，但详细信息都在 app.manifest 文件中。

有关文件虚拟化的详细信息，请查看[此说明](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756960.aspx)。这是一篇大文章，但如果你 Ctrl-Find 'Virtualization process' 它将带你到相关部分。

有关 app.manifest 的更多详细信息，请参阅[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx)。

# java - Java 与 Web 服务通信

> ID：12503804
> 
> 赞同：-1
> 
> 时间：2012-09-19T22:30:39.167
> 
> 标签：java, php, web-services, sockets

我需要用java编写一个与Web服务器通信的应用程序。我知道如何做到这一点，使用 PHP，但恐怕它不会在这个中削减它。

这是我的情况。我有多个客户端，当其中一个向服务器发送特定消息时（到目前为止，PHP 没有问题），我希望它向所有其他连接的客户端发送特定消息。问题是，我几乎找不到任何关于 PHP 中服务器套接字的信息，这让我相信这不是实现这一目标的正确方法。到目前为止，我正在使用付费托管 (x10premium) 来托管我的服务器，所以我想用这个来做，但是，我不确定 PHP 是否可行。目前，我让每个客户端定期检查服务器是否收到来自其他任何客户端的消息，但我不喜欢这个解决方案......我希望有人能指出我正确的方向。我不太了解 Ruby 和其他用于执行此类操作的语言，

提前致谢

编辑：忘了提，服务器（目前是 PHP）也将与 MySQL 表通信。如果重要的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:37:01.767

这是 PHP 套接字服务器/客户端的一个很好的例子：http: [//tech.navarr.me/2010/07/how-to-create-a-socket-server-in-php.html](http://tech.navarr.me/2010/07/how-to-create-a-socket-server-in-php.html)

您可以像使用 JAVA 一样执行此操作，但请记住 PHP 不支持多线程或多处理，因此如果 10 个客户端同时连接到您的服务器，您将一个一个地处理它们，因此最终 1 个必须等待其他 9 个完成 - 一切，数据库和连接开销。

例如，如果您使用 JAVA 或 Python 执行此操作，则可以在单独的线程中处理每个请求，以便同时处理 DB 和网络通信开销。

Python 内置了套接字服务器组件和漂亮且易于使用的 mysql 组件，这将使实现这一目标变得轻而易举，甚至根本不需要了解线程。

对于 python 套接字服务器，请参见此处：

[http://docs.python.org/library/socketserver.html](http://docs.python.org/library/socketserver.html)

基本上，您只需定义一个将为每个新客户端连接执行的函数并告诉服务器`serve_forever()`- 直到它死亡，它会做你想做的事。

# android - 检索由 String.xml 数组组成的 Spinner 中项目的位置

> ID：12503805
> 
> 赞同：0
> 
> 时间：2012-09-19T22:30:40.413
> 
> 标签：android, android-spinner

我正在开发一个 android 项目，并且有一个微调器，其中包含来自 string.xml 文件中的字符串数组的项目。

在 strings.xml 我有以下数组

```
<string-array name="array_loginType">
        <item>Select Login Type</item>
        <item>Website</item>
        <item>App</item>
        <item>Other</item>
</string-array> 
```

并且微调器包含以下 XML

```
<Spinner  android:id="@+id/add_cboLoginType"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:prompt="@string/add_select_login_type"
    android:padding="4dp" 
    android:entries="@array/array_loginType"/> 
```

在某些时候，用户可以从微调器中选择项目，并在提交时将项目保存在数据库中。然后，我允许用户编辑详细信息，并尝试根据从数据库中检索到的项目在微调器中设置所选项目。即，如果数据库中保存的项目说`Website`然后`Website`将在微调器中被选中。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:38:16.580

如果您知道数组中的哪个位置包含正确的选择，您可以使用`Spinner.setSelection();`- 方法设置微调器以显示它。

在您的示例中，`Website`在数组的位置 1 中找到 （第一个实际条目是数字 0）。

因此，您的代码应如下所示：

```
// Declare the spinner object
Spinner mySpinner = (Spinner) findViewById(R.id.add_cboLoginType);
// Set the correct selection
mySpinner.setSelection(1, true); 
```

第二个参数告诉微调器“动画”选择 - 所以它实际上显示了正确的选择，而不仅仅是设置正确的值（如果它设置为 false 或根本不包含，微调器将会改变（所以任何取决于选择将按预期工作）但它仍将显示为默认选择）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:40:57.180

因此，您希望用户选择一种类型并将其与其他一些数据一起保存在数据库中，当用户尝试编辑该数据时，您希望编辑屏幕以具有预选的微调器，对吗？

首先你需要一个`OnItemClickListener`. 这将让您知道用户何时选择了某些内容：

```
Spinner spin = (Spinner) findViewById(R.id.add_cboLoginType);
spin.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    public void onItemClick(final AdapterView<?> parent, final View view, 
                            final int position, final long id) {
           // update the type field on the data object you are creating or editing
           // position is the type index
           obj.setTypeIndex(position);
        }
    }
); 
```

这就是您看到更改的方式，现在预选处于编辑模式：

```
//editMode boolean.. why not
if (editMode) {
     spin.setSelection(obj.getTypeIndex, true);
} 
```

# android - Android ListView 项 - 从右到左的动画菜单

> ID：12503807
> 
> 赞同：1
> 
> 时间：2012-09-19T22:30:50.660
> 
> 标签：android, listview, animation, row, slide

在我的 android 应用程序中，我希望 ListView 项目从右向左移动并显示该行的额外选项。我不知道如何问我的问题，所以我想给你看我拍的照片。我该怎么做或者它叫什么？

1.  这是第一个状态。![这是第一个状态](../Images/a8f9911b0da67b57cc32b992233d01d1.png)
2.  这是第二种状态（点击右侧的“加号”图标后）。![这是第二个状态（点击后](../Images/a369b9b61112a04a8d7941a0317ca722.png)
3.  这是显示额外选择的最终状态

    ![最后的截图](../Images/72ce7cece0fee96ad39c3beba1c5d039.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:32:20.273

更新：感谢“ToVine”，我研究了视图转换。ViewFlipper 适合我提到的 belove :)。这是我的自定义列表视图行的 xml。

```
<ViewFlipper xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:onClick="buttonClickHandler" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:onClick="buttonClickHandler"
        android:src="@android:drawable/btn_star_big_on" />

</LinearLayout>

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical|center_horizontal"
    android:text="TextView2" /> 
</ViewFlipper> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T23:25:01.390

是否可以使用[ViewPager](http://android-developers.blogspot.no/2011/08/horizontal-view-swiping-with-viewpager.html?m=1)？

我不确定它是否只适用于屏幕的一小部分，但值得一试...... :)
可以在[此处](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)找到更多信息（d.android.com）

# python - Tornado 中 RequestHandler.initialize() 的用例

> ID：12503810
> 
> 赞同：7
> 
> 时间：2012-09-19T22:31:36.970
> 
> 标签：python, tornado

说应该使用`initialize`方法来准备将由 RequestHandler 子类的所有其他方法（例如，等）共享的资源`get`是否`post`正确？

`initialize`在 Tornado中使用的其他常见用例是什么？有一些例子会很棒！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T06:05:14.830

为什么你不喜欢[龙卷风](https://github.com/facebook/tornado/blob/master/tornado/web.py#L194)代码中的例子？

```
def initialize(self):
    """Hook for subclass initialization.

    A dictionary passed as the third argument of a url spec will be
    supplied as keyword arguments to initialize().

    Example::

        class ProfileHandler(RequestHandler):
            def initialize(self, database):
                self.database = database

            def get(self, username):
                ...

        app = Application([
            (r'/user/(.*)', ProfileHandler, dict(database=database)),
            ])
    """
    pass 
```

# python - 将 n 个文件中的列表（列表）打印为 n 列

> ID：12503811
> 
> 赞同：1
> 
> 时间：2012-09-19T22:31:42.610
> 
> 标签：python, list, file-io

我正在尝试从 n 个文件中读取行。然后我要将所有数据打印到一个文件中。棘手的事情是我不知道目录包含多少文件，我想把它打印出来，这样每个文件都有自己的列。示例：（文本是一些我不关心的数据，可以使用split来抓取[1]）

```
File 1 contains:
text Line1
text Line2
text Line3 
```

文件 2 包含：

```
text Line01
text Line02
text Line03 
```

我想像这样合并到一个文件中：

```
File 1 File 2
Line1  Line01
Line2  Line02
Line3  Line03 
```

我遇到的一个问题是，当我读取文件时，我一次读取一个文件并将每一行附加到一个列表中，但是我如何以我想要的方式打印出来。

```
fromfiles = ['Line1','Line2','Line3','Line01','Line02','Line03'] 
```

或者

```
fromfiles2 = [['Line1','Line2','Line3'],['Line01','Line02','Line03']] 
```

如果是formfiles：如何同时打印出line1和line01，然后继续？

如果 formfiles2: 确实与上述相同的问题。我需要在不知道列表中有多少项目的情况下同时访问多个元素，然后打印出所有内容。

如果有人可以帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:44:46.757

[`zip()`](http://docs.python.org/library/functions.html#zip)是为此而生的！让我们从你的开始`fromfiles2`：

```
>>> fromfiles2 = [['Line1','Line2','Line3'],['Line01','Line02','Line03']]
>>> outputlines = zip(*fromfiles2)
>>> for l in outputlines:
...     print "\t".join(l)
...
Line1   Line01
Line2   Line02
Line3   Line03 
```

`zip`基本上是这样工作的：

```
>>> l1 = [1, 2, 3]
>>> l2 = ['a', 'b', 'c']
>>> zip(l1, l2)
[(1, 'a'), (2, 'b'), (3, 'c')] 
```

当然，这也适用于两个以上的参数:-)。

当您的文件很小时，这是一个很好的方法。然后，您可以安全地先将它们读入内存，合并内存中的数据，然后将合并后的数据写入输出文件。但是，如果您的输入非常大（GB 数据），那么您应该同时逐行读取输入文件，构建输出行，将其写入文件，然后才继续输入文件中的下一行。

如果你有 的概念`zip`，那么你可以考虑`itertools.izip`让事情更节省内存：

```
>>> from itertools import izip
>>> for l in izip(*fromfiles2):
...     print "\t".join(l)
...
Line1   Line01
Line2   Line02
Line3   Line03 
```

此外，如果您的文件没有相同数量的输入文件，您可能需要查看[itertools.izip_longest](http://docs.python.org/library/itertools.html#itertools.izip_longest)：

```
>>> fromfiles3 = [['Line1','Line2','Line3'],['Line01','Line02']]
>>> for l in izip_longest(*fromfiles3, fillvalue="Nothing"):
...     print "\t".join(l)
...
Line1   Line01
Line2   Line02
Line3   Nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:48:40.203

当您阅读每个文件时，请继续查找您在文件中遇到的最大行数（可能使用 len()）。

使用第二个解决方案，并遍历每个行号 1 到全局最大值。如果该文件存在行条目，则打印它；否则，跳过它。

```
# loop through files
# max = number of lines max

for i in range(max):
  line = []
  for file in fromfiles2:
    if len(file) > i:
      line.append(file[i])
    else:
      line.append('')
  # print your line here 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-19T22:39:46.967

将其保存为 fromfiles2 ... 列表列表。

然后检查最大行数（所有列表中最大的 .count() ）。

然后从 0 到`<<maximum number of lines -1>>`这样的 for 循环（伪代码）：

```
for(int i = 0; i < maxNumOfLines; i++) {
  String lineToPrint = "";
  for(int j = 0; j < numberOfLists; j++) {
    lineToPrint += listOfLists[j][i];
  }
  File.Write(lineToPrint);
} 
```

注意：您必须检查索引 [j][i] 是否存在，因为文件的长度不同。

# flash - Red5 上传/记录：M4A，不是 FLV

> ID：12503813
> 
> 赞同：1
> 
> 时间：2012-09-19T22:31:47.407
> 
> 标签：flash, streaming, flv, red5, m4a

我正在将音频网络流式传输到 RED5 服务器，目前该文件似乎以 FLV 格式存储。我想以不同的格式存储它，比如 M4A。

这有可能吗？我对 M4A 并不太感兴趣，并且对不同的格式持开放态度，但除了 FLV 以外的其他格式。如果可能，我需要为此更改哪些配置文件？

谢谢。

编辑：作为背景信息，我希望上传的文件可以在 iOS 设备上播放。iPhone 不支持 flv 格式。所以 iOS 支持的任何格式都适合我。我只是担心Red5只记录FLV，是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:53:31.707

不，您不能将 red5 配置为以不同的格式存储文件。但是您可以安装 FFMPEG 并添加一个 Job/Code 转换器，该转换器可以将您的所有 FLV 转换为 mp4、mp3 或任何您想要的格式。

# nsis - 如何使用 NSIS 脚本将文本框值替换为属性文件？

> ID：12503814
> 
> 赞同：0
> 
> 时间：2012-09-19T22:31:48.637
> 
> 标签：nsis

我在 eclipse 中使用 NSIS 插件创建了 nsi 文件。我已经使用以下代码读取了属性文件值，

```
${ConfigWrite} "C:\resource\conf.properties" "WEBSERVICE.URL"  $0 
```

现在我想创建一个文本框并将“WEBSERVICE.URL”的值复制到该文本框中。如果用户在文本框中输入输入，那么它应该替换配置属性文件中 WEBSERVICE.URL 的值。否则它将采用默认值值。有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:27:50.163

您应该查看[nsDialogs](http://nsis.sourceforge.net/Docs/nsDialogs/Readme.html)的示例。

查看`Examples\nsDialogs`您的 NSIS 安装目录：该`InstallOptions.nsi`脚本应该可以帮助您。

# iphone - iOS 6 破坏了 webapps 中的 GeoLocation (apple-mobile-web-app-capable)

> ID：12503815
> 
> 赞同：24
> 
> 时间：2012-09-19T22:31:58.167
> 
> 标签：iphone, ipad, ios6, geolocation, iphone-standalone-web-app

我有一个应用程序，它执行一个简单的教科书 navigator.geoLocation.watchPosition(...) ，它在 iOS 5.x 中运行良好，无论是在 Safari 还是作为网络应用程序（使用 apple-mobile-web-app-capable 元标记）。

但是，在 iOS6 中，GeoLocation 在 webapp 中不起作用。它仍然可以按预期在 safari 中运行，但是当我运行 webapp 时，它会提示我提供位置许可，然后静默失败。我看到了位置图标，但 watchLocation 没有引发任何事件。我没有收到错误事件或任何位置事件。

有没有人遇到过这个？任何解决方法？它绝对是特定于 iOS6 的，也特定于 apple-mobile-web-app-capable/webapp。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T06:07:56.120

这绝对是一个错误，但我找到了解决方法。你不会喜欢这个，但至少它会让你的网络应用程序再次运行。您需要检查 User Agent 标头，如果它包含“iPhone OS 6”，则不要使用：

```
<meta content="yes" name="apple-mobile-web-app-capable" /> 
```

是的，这意味着它不是一个真正的 Web 应用程序，您将获得 Safari 页眉和​​页脚栏。但至少它会让你的应用在主屏幕上再次运行。[您可以访问我的网站www.nextbus.com](http://www.nextbus.com)来了解它是如何工作的。

请注意，谷歌似乎遇到了这个问题。尝试转到`maps.google.com`然后将 Web 应用程序添加到您的主屏幕。地理位置将适用于它，但您确实会看到丑陋的 Safari 页眉和​​页脚栏。

请向苹果大声抱怨！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T01:11:36.560

好消息是：我已经做到了……我已经弄清楚了。坏消息是：比我更聪明的人将不得不告诉你为什么这有效，而此解决方案的任何其他变体或提供的任何其他解决方案都不起作用。这是一场艰苦卓绝的胜利，但我不好意思说我花了多少小时（天）才弄清楚这一点。无需再费周折：

```
if (window.navigator.geolocation) {

            var accuracyThreshold = 100,
            timeout = 10 * 1000,
            watchID = navigator.geolocation.watchPosition(function(position) {
                $('#latitude').val(position.coords.latitude); // set your latitude value here
                $('#longitude').val(position.coords.longitude); // set your longitude value here

                // if the returned distance accuracy is less than your pre-defined accuracy threshold,
                // then clear the timeout below and also clear the watchPosition to prevent it from running continuously
                position.coords.accuracy < accuracyThreshold && (clearTimeout(delayClear), navigator.geolocation.clearWatch(watchID))
            }, function(error) {

                // if it fails to get the return object (position), clear the timeout
                // and cancel the watchPosition() to prevent it from running continuously
                clearTimeout(delayClear);

                navigator.geolocation.clearWatch(watchID);

                // make the error message more human-readable friendly
                var errMsg;

                switch (error.code) {
                    case '0':
                        errMsg = 'Unknown Error';
                        break;
                    case '1':
                        errMsg = 'Location permission denied by user.';
                        break;
                    case '2':
                        errMsg = 'Position is not available';
                        break;
                    case '3':
                        errMsg = 'Request timeout';
                        break;
                }
            }, {
                enableHighAccuracy: true,
                timeout: timeout,
                maximumAge: 0
            }),
            delayClear = setTimeout(function() {
                navigator.geolocation.clearWatch(watchID);
            }, timeout + 1E3); // make this setTimeout delay one second longer than your watchPosition() timeout
        }
        else {
            throw new Error("Geolocation is not supported.");
        } 
```

注意：由于某种原因，如果此代码的执行在最初启动应用程序后的某个时间点延迟，这似乎并不能始终如一地工作。所以，这是我在初始化方法中执行的第一件事。

注意：我添加到我的应用程序中的唯一另一件事是，当我需要使用地理位置数据时（对我来说，这发生在其他几个类/对象文字的初始化之后），是检查纬度/经度值。如果存在，继续；如果没有，请再次运行上述地理定位方法，然后继续。

注意：让我很长时间的一件事是我只需要获取用户的当前位置。我不需要跟踪用户的动作。我一直在用 getCurrentPosition() 方法尝试不同的迭代。无论出于何种原因，它都不起作用。所以，这就是我想出的解决方案。像要跟踪用户位置一样运行它（首先获取他们的位置），然后在获得他们的位置后，清除 watchPosition ID 以防止它跟踪他们。如果您需要随着时间的推移跟踪他们的位置，您当然可以......不清除 watchPosition ID。

HTH。从我所阅读的所有内容来看，有很多开发人员需要此功能才能为他们的任务关键型应用程序工作。如果此解决方案对您不起作用，我不确定我还能给出什么其他方向。话虽如此，我已经对此进行了数百次测试，并且成功地在 iOS 6 上的 WebApp (navigator.standalone) 中检索了用户的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T23:30:19.513

这是我复制错误并演示解决方法的视频。这个错误似乎存在于您是否使用网络应用元标记的天气。

[http://youtu.be/ygprgHh6LxA](http://youtu.be/ygprgHh6LxA)

更新：121212 - IOS 6.1 Beta 3 测试显示该错误仍未解决...

更新：122012 - IOS 6.1 Beta 4 测试显示该错误仍未解决...

* * *

**更新：031113 - 复制示例**

好的，只需几秒钟即可复制一个简单的问题。我觉得这不是野生动物园，而是IOS问题。这几乎就像 Google 为 IOS 编写了 bios 以满足 WC3 html 地理位置规范，并在 IOS6 将它们踢下巴士时随身携带。使用 IOS 设备去这里：

[http://uc.myaesc.com/geoloctestorig.htm](http://uc.myaesc.com/geoloctestorig.htm)

点击开始，手表几乎每秒都会返回结果。然后单击 Google 链接离开此页面。然后用户浏览器返回按钮返回点击开始。Watch 将返回 1 到 3 条记录并挂起。最小化 safari（主页按钮）然后恢复（safari 图标）；停止悬挂

而已。直到它没有挂起，问题仍然存在。

标记

更新：

IOS 7.1 解决了这个问题...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T15:21:58.597

这并不完全是一个答案，因为 ios6 中的主屏幕应用程序似乎有一些与 GeoLocation 相关的错误，但我发现以下链接非常有帮助。它解释说，由于主屏幕应用程序现在像本地应用程序一样存储，它们有自己的存储/缓存。

地理位置在第一次迭代时有效，但从那时起无法更新。解决方法是删除以下元标记，以便主屏幕应用程序在浏览器模式下运行（我不确定它是否完全称为浏览器模式）。不幸的是，该应用程序将使用浏览器的页眉和页脚呈现，但 GeoLocation 将再次工作。

`<meta content="yes" name="apple-mobile-web-app-capable" />`

[iOS 6 地理位置和本地数据存储](http://www.elevatedgis.com/blog/2012/09/21/ios-6-geolocation-and-local-data-storage/)

> “主屏幕应用程序中的数据现在像原生应用程序一样存储。每个原生应用程序都有自己的沙箱，用于存储、备份和恢复数据。在 iOS 6 之前，主屏幕应用程序与在浏览器中运行的同一个应用程序共享数据. 如果用户清除浏览器中的缓存，主屏幕版本的应用程序也会丢失数据。在 iOS 6 中，主屏幕应用程序的数据会像原生应用程序一样保存到沙箱中。备份和恢复可以正确处理数据，并且清除浏览器中的缓存不会影响它们。”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T19:56:08.160

看来它只工作一次，然后任何辅助调用都会失败。一种替代方法是缓存结果并使用缓存的结果（如果有），尽管这意味着您不能拥有一个跟随某人位置的应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-04T23:17:54.013

这最终在 iOS7 beta 中得到修复（我测试过的只有 beta 2）！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T12:08:45.997

终于在 iOS 6.1 中修复了！请参阅我的网站 www.slople.com，它在 6.1 下再次运行

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-19T22:44:30.210

我有同样的问题。看起来 watchPosition 在收到第一个位置后只是失败了。我还没有找到解决方法，但我想确认我遇到了问题。

使用这些示例： [http ://www.w3schools.com/html/html5_geolocation.asp](http://www.w3schools.com/html/html5_geolocation.asp)

我在 ios5 上得到了预期的结果，但 ios6 用 watchPosition 丢球了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-28T10:59:00.480

我可以确认在全屏运行我的网络应用程序时遇到了同样的问题。

有趣的是，当全屏 Safari 请求允许使用我的位置时，网站标题是“网络”而不是网站的标题，就像以前的 iOS 版本一样。

删除“apple-mobile-web-app-capable”元标记很好，它可以工作，但前提是您再次“添加到主屏幕”。我们每天有大约 7000 名用户已经将我们的图标添加到他们的主屏幕。让他们再次这样做，然后在实施修复时可能再次这样做并不是很好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-29T05:26:48.643

这似乎在 iOS 6.1 下已修复！它不在最近的测试版中，但今天的最终 6.1 版本似乎对我的测试很好。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-13T11:01:16.560

您必须注意加载的非安全内容。对我来说，从安全上下文加载所有 javascript、图像和 css 解决了 safari 的问题。

# ruby - ruby 将参数传递给 Symbol

> ID：12503816
> 
> 赞同：0
> 
> 时间：2012-09-19T22:32:05.687
> 
> 标签：ruby, hash, symbols

这是我发现可以将传递参数传递给哈希的符号键的一种方法。

```
task :test,:server do |t,args|
  puts args.server
  puts end_points[:"#{args.server}"]
end 
```

end_points 的定义

```
 end_points = { :dev ==> "http://mysite.com" } 
```

这就是我称之为 rake 任务的方式：

```
rake test[dev] 
```

是否有更简洁的方法将 args.server 作为 end_points 的键传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:41:57.323

要将字符串转换为符号，请使用 String.to_sym 方法。这应该会让您的实现更加简洁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T22:41:58.223

“更清洁”是一个视角问题，但`puts end_points[args.server.to_sym]`如果您不喜欢所有标点符号并且只想使意图更清晰一些，您可以编写。

# java - 使用自签名证书从 Java 客户端进行 SSL 连接

> ID：12503817
> 
> 赞同：1
> 
> 时间：2012-09-19T22:32:05.603
> 
> 标签：java, client, self-signed

我需要使用自签名的可信证书，但在从 java 客户端建立连接时遇到问题。

我使用自签名证书/密码设置了信任库。

我遇到的问题是如何将 wsse 安全标头合并到 java Web 服务调用中。有人告诉我，在建立 ssl 连接后，我需要将此自签名证书包含在 soap 有效负载中。

我正在按如下方式设置 ConfigurationContext...如何在实际的 Web 服务调用中包含安全标头...请告知...谢谢 jim

```
System.setProperty("javax.net.ssl.keyStore", "c:\\cvp.keystore");
System.setProperty("javax.net.ssl.keyStorePassword", "changeit");

ConfigurationContext ctx = getConfigurationContext(getMaxOutgoingConnections(appDir, getHostName(), LOBSB_TYPE));
String epLoc = getEndpointLocation(appDir, getHostName(), SERVICE_TYPE);
ListParticipantExport4_ListParticipantHttpServiceStub stub = new ListParticipantExport4_ListParticipantHttpServiceStub(ctx,epLoc);

/*
if (!setSecurityOptions(stub._getServiceClient())) {
    throw new Exception("Error setting up security options!");
}
*/

int timeOut = getTimeout(appDir, getHostName(), SERVICE_TYPE);
if (timeOut > 0) {
    //Only set the timeout value if greater
    //than zero!
            stub._getServiceClient().getOptions().setTimeOutInMilliSeconds(timeOut);
        }

ListParticipantDocument doc = ListParticipantDocument.Factory.newInstance();
ListParticipant part = ListParticipant.Factory.newInstance();
ListParticipantRequest req = ListParticipantRequest.Factory.newInstance();

ServiceAttributesType saType = ServiceAttributesType.Factory.newInstance();
saType.setApplicationIdentifier("IVR");
saType.setLogLevel(ServiceAttributesType.LogLevel.ERRORS);
saType.setVersion("1.0");
req.setServiceAttributes(saType);

ParticipantSelection partSel = ParticipantSelection.Factory.newInstance();
partSel.setAccountHolderSSN(accountHolderSSN);
req.setParticipantSelection(partSel);

part.setListParticipantRequest(req);
doc.setListParticipant(part);

long startTime = System.currentTimeMillis();
sharedlib.listparticipant_v3.ListParticipantResponseDocument respDoc = stub.listParticipant(doc);
long endTime = System.currentTimeMillis();
respTime = (endTime-startTime);

ResponseReturnStatusType retStatus = respDoc.getListParticipantResponse().getListParticipantResponse().getResponseReturnStatus();
returnCode = retStatus.getResponseReturnCode().getCode();
returnCodeName = retStatus.getResponseReturnCode().getCodeName(); 
```

# javascript - 在 Jquery 自动完成中替换损坏的图像

> ID：12503819
> 
> 赞同：0
> 
> 时间：2012-09-19T22:32:27.390
> 
> 标签：javascript, jquery, json, autocomplete

我正在使用以下使用 Jquery Auto Complete 的自动完成插件。它运行良好并且完全符合我的需要，但我的问题是我的 JSON 文件有数千个带有描述和图像的产品。许多图像已关闭并且无法正常工作。

有谁知道如何用一般的本地图像替换那些损坏的图像链接？我无法手动进入 JSON 文件并替换这些图像，因为这需要数周时间。

我看着这个但没有帮助：“http://stackoverflow.com/questions/92720/jquery-javascript-to-replace-broken-images”

很感谢任何形式的帮助。

这是 FoxyComplete 的 JS 和完整脚本的链接（抱歉无法让 JsFiddle 工作——http : [//www.bcreatives.com.au/wp-content/uploads/dev/foxycomplete-local/](http://www.bcreatives.com.au/wp-content/uploads/dev/foxycomplete-local/)）：

```
(function($) {
$(document).ready(function() {

    $( '#s' ).each( function(){
    $(this).attr( 'title', $(this).val() )
      .focus( function(){
        if ( $(this).val() == $(this).attr('title') ) {
          $(this).val( '' );
        }
      } ).blur( function(){
        if ( $(this).val() == '' || $(this).val() == ' ' ) {
          $(this).val( $(this).attr('title') );
        }
      } );
    } );

    $('input#s').result(function(event, data, formatted) {
        $('#result').html( !data ? "No match!" : "Selected: " + formatted);
    }).blur(function(){     
    });

    $(function() {      
    function format(mail) {
        return "<a href='"+mail.permalink+"'><img src='" + mail.image + "' /><span class='title'>" + mail.title +"</span></a>";         
    }

    function link(mail) {
        return mail.permalink
    }

    function title(mail) {
        return mail.title
    }

    $("#s").autocomplete(completeResults, {
        width: $("#s").outerWidth()-2,          
        max: 5,         
        scroll: false,
        dataType: "json",
        matchContains: "word",
        parse: function(data) {
            return $.map(data, function(row) {
                return {
                    data: row,
                    value: row.title,
                    result: $("#s").val()
                }
            });
        },
        formatItem: function(item) {                
            return format(item);
        }
        }).result(function(e, item) {
            $("#s").val(title(item));
            //location.href = link(item);
        });                     
    });

});
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:16:58.760

我相信[您链接的 SO 问题](https://stackoverflow.com/questions/92720/jquery-javascript-to-replace-broken-images)的公认答案应该有效。只需将您的`format`功能替换为以下内容：

```
function format(mail) {
    return "<a href='"+mail.permalink+"'>" +
        "<img src='" + mail.image + "' onerror='this.src=\'/img/error.jpg\'' />" +
        "<span class='title'>" + mail.title +"</span></a>";         
} 
```

并确保您有一个名为`/img/error.jpg`, natch 的图像。

# javascript - 哪些 css 属性允许将“auto”作为值？

> ID：12503821
> 
> 赞同：-1
> 
> 时间：2012-09-19T22:32:46.357
> 
> 标签：javascript, css, internet-explorer

我正在尝试在 IE<9 中为计算样式实现 polyfill。我已经想出了如何处理将 em、pt 和 % 转换为 px，但我需要一个 auto 的解决方案。

我需要一个允许自动的属性列表，这样我就可以弄清楚如何处理以“自动”为值的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:42:04.233

我会说这是一个懒惰的问题。我在 2 秒内在谷歌上找到了这个[列表](http://meiert.com/en/indices/css-properties/)。

```
align-self
alignment-adjust
background-size
bottom
break-after
break-before
break-inside
clip
color-profile
column-count
column-width
crop
cursor
dominant-baseline
drop-initial-size
flex-basis
font-kerning
grid-column
grid-column-sizing
grid-row
grid-row-sizing
height
icon
image-orientation
image-rendering
left
line-break
marker-offset
nav-down
nav-index
nav-left
nav-right
nav-up
overflow-style
page
page-break-after
page-break-before
page-break-inside
play-during
rendering-intent
right
size
speak
table-layout
text-height
text-justify
text-underline-position
top
width
z-index 
```

# javascript - 固定位置窗口滚动问题

> ID：12503827
> 
> 赞同：0
> 
> 时间：2012-09-19T22:33:14.067
> 
> 标签：javascript, html, css, layout

所以我有一个页面布局，它有一个相对位置的主要内容容器 div。在这个容器中，我还有另外两个布局 div，一个用作侧边栏，另一个用作可以上下滚动的内容容器。此 div 也有一个标题栏，当您滚动浏览此 div 时，该标题栏必须保持在原位。如果我修复标题栏的位置，只要您在该容器中滚动，它就会保持原位而不会出现问题。如果您滚动整个窗口（在包装器 div 之外），标题栏也会随之滚动。我知道为什么会发生这种情况，但想知道是否有办法解决它或防止这种行为。我也不介意使用 Javascript 来做到这一点。我知道固定定位只会使元素固定到其父容器。

这很可能很难理解，至少通过文本布局明智，所以这里是一个非常简单的例子，只是一些标记，显示哪些项目是固定的以及它们是如何布局的。 [http://jsfiddle.net/gvNqv/](http://jsfiddle.net/gvNqv/)

非常感谢您对此提供的任何帮助！

编辑：从这里添加小提琴代码

```
.maincontent{ 
    position:relative; 
    width:760px;
}
.sidebar{
    float:left;
}
.stage{
    float:right;
    position:relative;
}
.headbar{
    position:fixed;
} 
```

​</p>

```
<div class="wrapper">
   <div class="mainContent">

      <div class="sideBar"></div>

      <div class="stage">
         <div class="headbar">banner text</div>        
      </div>

   </div>
</div>​

enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:52:45.893

您不需要使用顶部、左侧、底部或右侧来固定某些东西吗？

# android - 如何在 Android 屏幕旋转上保存自定义 ArrayList？

> ID：12503836
> 
> 赞同：51
> 
> 时间：2012-09-19T22:34:31.163
> 
> 标签：android, object, arraylist, parcelable, screen-rotation

我有一个`ArrayList`自定义对象，我希望能够在屏幕旋转上保存和恢复。

我知道这可以做到，`onSaveInstanceState`如果`onRestoreInstanceState`我要创建`ArrayList`它自己的类，它实现`Parcelable`或者`Serializable`......但是有没有办法在不创建另一个类的情况下做到这一点？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-09-19T22:40:07.593

您无需创建新类来传递自定义对象的 ArrayList。您应该简单地为您的对象实现 Parcelable 类并在 和 中使用Bundle # [putParcelableArrayList()](http://developer.android.com/reference/android/os/Bundle.html#getParcelableArrayList%28java.lang.String%29)。此方法将自行存储 Parcelables 的 ArrayList。`onSaveInstanceState()``onRestoreInstanceState()`

* * *

因为 Parcelables（以及 Serializables 和 Bundles）的主题有时让我头疼，这里有一个 ArrayList 的基本示例，其中包含存储在 Bundle 中的自定义 Parcelable 对象。（这是可剪切和粘贴运行的，无需布局。）

**实现 Parcelable**

```
public class MyObject implements Parcelable {
    String color;
    String number;

    public MyObject(String number, String color) {
        this.color = color;
        this.number = number;
    }

    private MyObject(Parcel in) {
        color = in.readString();
        number = in.readString();
    }

    public int describeContents() {
        return 0;
    }

    @Override
    public String toString() {
        return number + ": " + color;
    }

    public void writeToParcel(Parcel out, int flags) {
        out.writeString(color);
        out.writeString(number);
    }

    public static final Parcelable.Creator<MyObject> CREATOR = new Parcelable.Creator<MyObject>() {
        public MyObject createFromParcel(Parcel in) {
            return new MyObject(in);
        }

        public MyObject[] newArray(int size) {
            return new MyObject[size];
        }
    };
} 
```

**保存/恢复状态**

```
public class Example extends ListActivity {
    ArrayList<MyObject> list;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if(savedInstanceState == null || !savedInstanceState.containsKey("key")) {
            String[] colors = {"black", "red", "orange", "cyan", "green", "yellow", "blue", "purple", "magenta", "white"};
            String[] numbers = {"one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten"};

            list = new ArrayList<MyObject>();
            for(int i = 0; i < numbers.length; i++) 
                list.add(new MyObject(numbers[i], colors[i]));
        }
        else {
            list = savedInstanceState.getParcelableArrayList("key");
        }

        setListAdapter(new ArrayAdapter<MyObject>(this, android.R.layout.simple_list_item_1, list));
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        outState.putParcelableArrayList("key", list);
        super.onSaveInstanceState(outState);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T00:11:54.827

您可以使用`onRetainNonConfigurationInstance()`. 它允许您在配置更改之前保存任何对象，并在使用`getLastNonConfigurationInstanceState`() 之后将其恢复。

活动内部：

```
 @Override
    public Object onRetainNonConfigurationInstance() {
        return myArrayList;
    } 
```

内部`onCreate()`：

```
 try{
        ArrayList myArrayList = (ArrayList)getLastNonConfigurationInstance();
    } catch(NullPointerException e) {} 
```

处理运行时更改： http: [//developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html) 文档：http: [//developer.android.com/reference/android/app/Activity.html#onRetainNonConfigurationInstance%28 %29](http://developer.android.com/reference/android/app/Activity.html#onRetainNonConfigurationInstance%28%29)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-19T00:54:36.353

```
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    ArrayList<Integer> id=new ArrayList<>();
    ArrayList<String> title=new ArrayList<>();
    for(int i=0;i<arr.size();i++){
        id.add(arr.get(i).id);
        title.add(arr.get(i).title);
    }
    outState.putIntegerArrayList("id",id);
    outState.putStringArrayList("title",title);
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-07-06T11:37:44.697

是的，您可以将复合对象保存在共享首选项中。比方说：

```
Student mStudentObject = new Student();
     SharedPreferences appSharedPrefs = PreferenceManager
      .getDefaultSharedPreferences(this.getApplicationContext());
      Editor prefsEditor = appSharedPrefs.edit();
      Gson gson = new Gson();
      String json = gson.toJson(mStudentObject);
      prefsEditor.putString("MyObject", json);
      prefsEditor.commit(); 
```

现在您可以将对象检索为：

```
 SharedPreferences appSharedPrefs = PreferenceManager
     .getDefaultSharedPreferences(this.getApplicationContext());
     Editor prefsEditor = appSharedPrefs.edit();
     Gson gson = new Gson();
     String json = appSharedPrefs.getString("MyObject", "");
     Student mStudentObject = gson.fromJson(json, Student.class); 
```

# php - 现有 Zend 1.10 框架项目并入 Symfony 2 框架

> ID：12503840
> 
> 赞同：0
> 
> 时间：2012-09-19T22:35:09.850
> 
> 标签：php, zend-framework, symfony, doctrine-orm

我有一个使用 zend 1.10 框架的现有项目。我不喜欢 zend，但我不能出售转换为 symfony 的想法，我只想将 symfony 2 合并到代码库中，至少将它用于新代码（教义、表单和树枝模板至少，即使我坚持使用 zends 的 MVC 结构）。

不知道如何进行设置。我看到很多提到在 Symfony 中使用 Zend 类，但反之则不然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:39:52.057

您可以将[Twig](http://www.rmauger.co.uk/2011/05/using-twig-with-zend-framework/)和[Doctrine](http://www.spiffyjr.me/2010/11/17/zend-framework-1-11-doctrine-2-lets-play-nice-part-1/)与 ZF 一起使用，所以没问题。然而，表单组件不在 Symfony 2 的[独立组件](http://symfony.com/doc/current/components/index.html)列表中，因此在 ZF 1.10 中实现 Symfony 2 表单可能会很棘手。

祝你好运。

# jquery - 使用 .load() 将页面交换到 div 中，但无法正常工作

> ID：12503843
> 
> 赞同：0
> 
> 时间：2012-09-19T22:35:23.780
> 
> 标签：jquery, load

我用 JS 设置了[我的海滩页面](http://www.tremyfoel.co.uk/beaches.htm)`<div>`，该页面将海滩信息页面交换为via hidden`<iframe>`但重新调整为使用 jQuery 作为更有效、更优越的解决方案。尝试了几种不同的语法：

```
function loadContent(elementSelector, sourceUrl) {
    $(""+elementSelector+"").load("http://yoursite.com/"+sourceURL+"");
} 
```

和

```
function loadSomething{
    $("#divid").load("http://place.com/to/content.php");
} 
```

并使用后者设置[一个测试页面](http://www.tremyfoel.co.uk/jqueryTest.htm)，因为这似乎有效。

我做了一些 Java 编程，这些都很简单，但我不知道为什么它不起作用。在测试页面上，有几个文本链接有效（在 FF 和 Chrome 中测试过），但图片链接无效。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:52:03.010

正如其他人已经指出的那样，您的网站上存在一些语法错误，因此您绝对应该首先修复这些错误。我只是想我会把你推向一些 DRYer 代码......你有很多重复。你所做的基本结果是说“对于这些`<a>`标签，当你点击它们时，将`<a>`标签加载到另一个元素中而不是正常行为。而不是在*每个*`href`图像元素上设置那个 jQuery ，你可以做到这一切在一个功能中：

 *```
$('a').click(function() {
    $('#beachInfo').load($(this).attr('href'));
    return false;
}); 
```

这将一举覆盖所有这些。如果您希望某些链接正常运行并在页面中加载某些链接，您可以为它们分配一个类，如下所示：

```
<a class="loadInPage" href="http://...">load me in-page</a> 
```

然后相应地修改您的选择器：

```
$('a.loadInPage').click(function() {
    $('#beachInfo').load($(this).attr('href'));
    return false;
}); 
```

我希望这可以帮助您清理一些东西。但是请注意这些错误！Javascrcipt 控制台是您的朋友！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:42:55.140

据我所知，您粘贴的站点链接目前存在语法错误：

```
<script type="text/javascript">
  $(function() {
    $('a[href=beachPenmm.htm]').click(function() {
      $('#beachInfo').load('beachPenmm.htm');
      return false;
    });
</script>       

<script type="text/javascript">
  }); 
```

不允许在脚本标签之间扩展语法。然而，这可能不是唯一的问题......但首先解决这个问题:)*

# reporting-services - 如何用 NULL 参数替换子报表？

> ID：12503847
> 
> 赞同：0
> 
> 时间：2012-09-19T22:35:56.810
> 
> 标签：reporting-services, parameters

我正在使用 SSRS 2008 R2。我的 RDL 中有几个子报表，它们都只从这个父 RDL 中获取一个字段值作为输入。这一字段值称为“people_id”。但在某些情况下，父 RDL 返回了 0 条记录。发生这种情况时，我从父 RDL 运行此报告时收到以下错误：

```
An error occurred during local report processing.  Object reference not set to an instance of an object. 
```

即使我尝试将子报表的参数值设置为两者：

```
people_id 
```

和

```
=iif(isnothing(Fields!people_id.Value),"",Fields!people_id.Value) 
```

没有记录时如何成功避免此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-13T05:31:15.887

我想现在为时已晚，但以防万一帮助其他人。

在报表处理时，表达式中的某些值可能会计算为 null 或未定义。这可能会创建运行时错误，从而导致在文本框中显示 #Error 而不是评估的表达式。IIF 函数对这种行为特别敏感，因为与 If-Then-Else 语句不同，IIF 语句的每个部分都在传递给测试真假的例程之前进行评估（包括函数调用）。如果 Fields!Sales.Value 为 NOTHING，则语句 =IIF(Fields!Sales.Value is NOTHING, 0, Fields!Sales.Value) 在呈现的报告中生成 #Error。

来自[http://msdn.microsoft.com/en-us/library/ms157328.aspx](http://msdn.microsoft.com/en-us/library/ms157328.aspx)

我遇到了类似的问题，最终编写了一个自定义函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:13:37.937

代替 =iif(isnothing(Fields!people_id.Value),"",Fields!people_id.Value)，你可以试试 =iif(isnothing(Fields!people_id.Value),NOTHING,Fields!people_id.Value) 吗？

# java - 如何在 Glassfish 中部署 Jasper 报告

> ID：12503849
> 
> 赞同：0
> 
> 时间：2012-09-19T22:36:38.617
> 
> 标签：java, glassfish, jasper-reports

我是 Jasper Reports 的新手。

我目前正在使用带有 Netbeans 7 的 Glassfish 3.1 开发一个玩具应用程序。我能够在 Netbeans 中创建一个 Jasper 报告并对其进行测试（在 Netbeans 中），但是当我尝试使用它显示的报告部署应用程序时启动应用程序时日志中的错误以及尝试运行 Jasper 报告（由 Servlet 动态创建）时会出现编译错误。

我直接从 JavaBean 数据源（而不是从数据库）获取报告的信息。报告是 PESMModelReport.jsrxml 我不知道有什么问题。

这是我使用 Jasper 报告启动 Glassfish 时的日志：

```
SEVERE: Exception while visiting SimModSystem-web-1.0-SNAPSHOT_war/WEB-INF/classes/com/librethinking/simmodsys/jasper/PESMModelReport.class of size 0
java.lang.ArrayIndexOutOfBoundsException: 8
    at org.objectweb.asm.ClassReader.readUnsignedShort(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:362)
    at com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.handleEntry(ReadableArchiveScannerAdapter.java:171)
    at com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.onSelectedEntries(ReadableArchiveScannerAdapter.java:133)
    at org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:348)
    at org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:70)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:307)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:296)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

SEVERE: Exception while visiting SimModSystem-web-1.0-SNAPSHOT_war/WEB-INF/classes/com/librethinking/simmodsys/jasper/ModelReport.class of size 0
java.lang.ArrayIndexOutOfBoundsException: 8
    at org.objectweb.asm.ClassReader.readUnsignedShort(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:362)
    at com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.handleEntry(ReadableArchiveScannerAdapter.java:171)
    at com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.onSelectedEntries(ReadableArchiveScannerAdapter.java:133)
    at org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:348)
    at org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:70)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:307)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:296)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

SEVERE: Exception while visiting com/librethinking/simmodsys/jasper/PESMModelReport.class of size 0
java.lang.ArrayIndexOutOfBoundsException: 8
    at org.objectweb.asm.ClassReader.readUnsignedShort(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:362)
    at org.glassfish.hk2.classmodel.reflect.util.DirectoryArchive.parse(DirectoryArchive.java:123)
    at org.glassfish.hk2.classmodel.reflect.util.DirectoryArchive.parse(DirectoryArchive.java:135)
    at org.glassfish.hk2.classmodel.reflect.util.DirectoryArchive.parse(DirectoryArchive.java:135)
    at org.glassfish.hk2.classmodel.reflect.util.DirectoryArchive.parse(DirectoryArchive.java:135)
    at org.glassfish.hk2.classmodel.reflect.util.DirectoryArchive.parse(DirectoryArchive.java:135)
    at org.glassfish.hk2.classmodel.reflect.util.DirectoryArchive.onSelectedEntries(DirectoryArchive.java:92)
    at org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:348)
    at org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:70)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:307)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:296)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

SEVERE: Exception while visiting com/librethinking/simmodsys/jasper/ModelReport.class of size 0
java.lang.ArrayIndexOutOfBoundsException: 8
    at org.objectweb.asm.ClassReader.readUnsignedShort(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:362)
    at org.glassfish.hk2.classmodel.reflect.util.DirectoryArchive.parse(DirectoryArchive.java:123)
    at org.glassfish.hk2.classmodel.reflect.util.DirectoryArchive.parse(DirectoryArchive.java:135)
    at org.glassfish.hk2.classmodel.reflect.util.DirectoryArchive.parse(DirectoryArchive.java:135)
    at org.glassfish.hk2.classmodel.reflect.util.DirectoryArchive.parse(DirectoryArchive.java:135)
    at org.glassfish.hk2.classmodel.reflect.util.DirectoryArchive.parse(DirectoryArchive.java:135)
    at org.glassfish.hk2.classmodel.reflect.util.DirectoryArchive.onSelectedEntries(DirectoryArchive.java:92)
    at org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:348)
    at org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:70)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:307)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:296)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

这是我尝试执行报告时的日志：

```
java.lang.NoClassDefFoundError: org/codehaus/groovy/control/CompilationFailedException
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at net.sf.jasperreports.engine.util.JRClassLoader.loadClassForRealName(JRClassLoader.java:157)
    at net.sf.jasperreports.engine.util.JRClassLoader.loadClassForName(JRClassLoader.java:115)
    at net.sf.jasperreports.engine.JasperCompileManager.getCompiler(JasperCompileManager.java:730)
    at net.sf.jasperreports.engine.JasperCompileManager.compile(JasperCompileManager.java:240)
    at net.sf.jasperreports.engine.JasperCompileManager.compileReport(JasperCompileManager.java:490)
    at com.librethinking.simmodsys.web.ModelsController.prepareReport(ModelsController.java:298)
    at com.librethinking.simmodsys.web.ModelsController.showReport(ModelsController.java:313)
    at com.librethinking.simmodsys.web.ModelsController.processRequest(ModelsController.java:93)
    at com.librethinking.simmodsys.web.ModelsController.doGet(ModelsController.java:145)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: org.codehaus.groovy.control.CompilationFailedException
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1519)
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1369)
    ... 38 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:49:00.553

Jasper 尝试在类路径中查找 Groovy 库。似乎默认情况下，新创建的 Jasper 报告的表达式语言是 Groovy。您应该在“报告属性”中找到一个名为“语言”的部分。选择它为 Java，然后重新编译并重新部署您的报告。

我设法附上了我的 iReport 的屏幕截图。

![这是 iReport 的截图](../Images/bd42772491658248e100b492fc927a9c.png)

# assembly - 为什么在使用 PUSH 或 POP 指令时不鼓励使用 ESP 寄存器？

> ID：12503850
> 
> 赞同：2
> 
> 时间：2012-09-19T22:36:43.267
> 
> 标签：assembly, x86, stack-pointer

我正在查看 C 代码，其中我必须找出在特定程序跟踪中使用的寄存器数量。每当遇到推送或弹出命令时，代码都会忽略存储 ESP 寄存器。我还提到了 X86 指令，它写在那里“ESP，堆栈指针，不应该使用”。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-12-30T07:21:15.343

在 x86 上，`ESP`是堆栈指针。最初，在 16 位 8088 和 8086 处理器上，该寄存器被简单地称为`SP`S **tack** P**指针**。在 386 处理器中添加 32 位支持时，`E`前缀（用于“扩展”）被添加到所有寄存器名称中，所以它变成了`ESP`. 在当前模式下，堆栈指针始终具有与处理器的本机字长相同的位宽。也就是说，如果您在 32 位保护模式下执行，堆栈指针将是 32 位宽并存储在`ESP`. 如果您在 16 位实模式下执行，堆栈指针将为 16 位宽并存储在`SP`.

x86 架构的 64 位扩展（也称为 AMD64、x86-64 或只是 x64）将寄存器扩大到 64 位并添加了`R`前缀。因此，`RSP`寄存器包含堆栈指针，在长（64 位）模式下执行时为 64 位宽。

尽管此寄存器在概念上与其他寄存器（`EAX`、`ECX`、`EDX`、`EBX`、`ESI`、`EDI`和`EBP`）相似，但它不能以等效方式使用。它*仅*用于保存堆栈指针，不能用作通用寄存器。

您不显式推送或弹出堆栈指针的原因是因为这是由其他指令隐式完成的。实际上，`PUSH`and`POP`指令是操纵堆栈指针的指令，因为它们将东西压入堆栈并将其弹出。

在 x86 上，堆栈在内存中总是向下增长，因此`PUSH`会从堆栈指针中减去适当数量的字节（根据操作数的大小），同时`POP`会添加适当数量的字节。

[`CALL`](http://x86.renejeschke.de/html/file_module_x86_id_26.html)and指令还隐式地[`RET`](http://x86.renejeschke.de/html/file_module_x86_id_280.html)操作堆栈指针。[您可以通过阅读此处提供](https://software.intel.com/en-us/articles/intel-sdm#combined)的 Intel x86 架构手册找到更多详细信息。[x86](/questions/tagged/x86 "显示标记为“x86”的问题")标签 wiki中还有许多其他可用资源。

唯一一次您会看到`ESP`寄存器被显式操作是当它用作`ADD`or`SUB`指令中的目标操作数时。这些通常通过优化编译器、根据需要增加或减少堆栈指针以腾出额外空间来存储值或清理堆栈来插入函数的序言和结尾。它们的功能类似于`PUSH`and `POP`，除了它们可以具有连续多次推送和弹出的效果。例如：

```
push eax
push eax
push eax
push eax
...
pop  eax
pop  eax
pop  eax
pop  eax 
```

可以简单地替换为：

```
sub esp, 16
...
add esp, 16 
```

（假设您实际上并没有尝试*存储*的值，`EAX`而只是使用`PUSH`来在堆栈上腾出空间）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:40:46.810

它不应该用作通用寄存器。随意将其用作堆栈指针，并小心谨慎。例如，您可以使用 'sub esp, ...' 指令为堆栈上的本地变量保留一些内存，但您必须在 ret 指令之前恢复其原始值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-23T22:29:36.973

**ESP*是*push/pop 依赖的堆栈指针。**

* * *

`ret`ESP 是保留调用的（或者在调用者将 args 从堆栈中弹出的约定中大致如此），但是您可以通过平衡推送和弹出来实现这一点，因此当您到达指令时，它最终指向调用者推送的返回地址。

您实际上并没有保存/恢复 ESP，因为您在函数执行时让它指向堆栈。

`[esp]`是`push ebx`写入的隐含目的地。（将 ESP 减 4 后）。

**您不能使用`push`/`pop`来保存/恢复 ESP 并将其用于其他用途，因为 ESP*是指向您推送内容的位置的指针。***

`pop esp` [相当于](https://stackoverflow.com/questions/14968824/what-is-an-assembly-level-representation-of-pushl-popl-esp)`mov esp, [esp]`; _ 它取决于旧值，如果您将其销毁，则对“恢复”没有用处。

如果您想将 ESP 用作额外的临时寄存器，您可以将其保存在`mm0`, 或（在非线程安全函数中）静态存储位置。您通常*不*应该这样做；了解您*可以*作为了解机器如何工作的练习非常有用。

任何在 ESP 指向堆栈以外的地方时尝试运行的信号处理程序或异常处理程序都会导致大问题。（但在多任务操作系统下的用户空间中，中断处理程序将在内核堆栈上运行。只有在内核代码中，硬件才会异步使用低于 ESP 的内存）。

# c# - 如何调用派生类的方法？

> ID：12503851
> 
> 赞同：3
> 
> 时间：2012-09-19T22:36:51.240
> 
> 标签：c#, wpf, observablecollection, base, derived-class

## 简而言之

我希望能够调用一个方法，该方法需要一个类型的参数，`ObservableCollection<Base>`但我想用`ObservableCollection<Derived>`. 它说它不能在两者之间转换。

## 更长

我想调用一个 WPF 窗口，它是一个将绑定到`ObservableCollection`. 我希望窗口显示两个不同类共有的一些基本信息。这些类是`Derived1`和`Derived2`，并且基于`BaseClass`. 我可以调用该方法的类型只是 be `BaseClass`，但我想传递一个列表。

所以我有两个系列：

```
ObservableCollection<Derived1> A;
ObservableCollection<Derived2> B; 
```

并且希望能够使用上述两个集合调用如下所示的方法，因此我不需要重复代码。

```
public void InitialiseWindow(ref ObservableCollection<BaseClass> List)
{
    this.List=List;
} 
```

但它会抛出一个错误：

```
cannot convert from 'ref System.Collections.ObjectModel.ObservableCollection<Derived1>' to 'ref System.Collections.ObjectModel.ObservableCollection<Base>' 
```

## 虽然我在这里

是否有更好的方法来绑定集合中所做的更改`Window`将反映在源上，而不是使用`ref`？

## 解决方案

我修改了 的构造函数，`Window`以便将 转换`IEnumerable`为类型的公共成员`ObservableCollection`。由于窗口只会以模态方式显示，因此可以在窗口关闭后访问该成员。

```
public ObservableCollection<BaseClass> List;

public InitialiseWindow(IEnumerable<BaseClass> List)
{
    InitializeComponent();
    this.List=new ObservableCollection<BaseClass>(List);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:41:22.050

如果您仅出于绑定目的而公开它，则传递`IEnumerable<BaseClass>`引用就足够了。数据绑定系统将自动检查实际实例以查看它是否实现`INotifyCollectionChanged`，因此它不需要将绑定属性显式键入为`ObservableCollection`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:43:55.180

类型不同，`ref`类型必须完全匹配。

在某些情况下，您可以以类似的方式使用派生类 - 阅读[C# 模板的协方差/反方差](http://msdn.microsoft.com/en-us/library/ee207183%28v=vs.100%29.aspx)。即你可以做

```
IEnumerable<Object> objects = new List<String>(); 
```

因为 IEnumerable 将其参数定义为[`out`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)

```
 public interface IEnumerable<out T> : IEnumerable 
```

# wpf - WCF 异步操作不是真正异步的

> ID：12503852
> 
> 赞同：2
> 
> 时间：2012-09-19T22:37:00.637
> 
> 标签：wpf, wcf, blocking, async-await

想知道是否有人可以告诉我哪里出错了。我在我的 wpf 应用程序 VS2012 中添加了服务引用

但是我对异步调用的等待被阻塞了，我现在没有做任何事情。添加服务参考时我免费获得的异步调用...

然而当我`await ma.searchModelsAsync`被封锁时...

任何人都可以对此有所了解吗？

首先我这样调用函数：

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
{
    button1.IsEnabled = false;

    var cnt = await GetDataFromWcf();
    button1.IsEnabled = true;
} 
```

这是我调用的实际函数

```
public async Task<List<ViewModels.ModelInfo>> GetDataFromWcf()
{
    using (var ma = new DataGenic.ModelActionsServiceTypeClient())
    {
        var modelInfos = await ma.searchModelsAsync(new ModelSearchCriteria { Category = "ECB" }, 1, 50);
        return modelInfos.Select(mi => new ViewModels.ModelInfo { Id = mi.Id, Name = mi.Name, Uri = mi.Uri }).ToList();
    }
} 
```

顺便说一句：如果我把函数放在 a`Task.Run(() => ...`那么它的行为就像我预期的那样......

不确定 WCF 是否真的给了我想要的东西.. 任何人的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:34:47.893

根据迄今为止的评论线程，听起来在 WCF 任务启动之前发生了足够的工作，因此您希望 GetDataFromWcf 比这更早地返回给调用者。这是异步方法（恕我直言）的一个常见问题 - 它们在第一个“等待”调用之前同步运行的“陷阱”，因此如果在第一个“等待”之前发生太多事情，它们仍然会导致明显的 UI 延迟 :)

因此，一个简单的更改是使用 Task.Yield（通过添加`await Task.Yield();` 为 GetDataFromWcf 中的第一行）来更改行为以使异步方法立即返回给调用者。正如 MSDN 文档所述，[您可以使用 await Task.Yield(); 在异步方法中强制方法异步完成](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.yield.aspx)。仅这句话（以及表面上听起来多么愚蠢）有助于显示“陷阱”恕我直言：）

# git - 远程服务器上的 Git 存储库和接收后挂钩

> ID：12503856
> 
> 赞同：1
> 
> 时间：2012-09-19T22:37:30.410
> 
> 标签：git, workflow, git-post-receive

为了更好地理解 Git 和正确的 Web 部署工作流程，我遇到了另一面墙。我是服务器相关软件和 unix 命令的新手，所以在回答时请记住这一点。已经就类似主题提出了很多问题，但我没有找到任何关于特定推送和合并到远程存储库的接收后挂钩。

我为部署设置了 3 个阶段。

生产（远程服务器我假设是裸存储库）
^
暂存（远程服务器裸存储库）
^
开发（本地机器）

到目前为止，我已经在本地和暂存环境中启动并运行了 Git。我在登台服务器上设置了一个接收后挂钩。到目前为止，这似乎工作得很好，但似乎这个钩子不允许我推送可以在登台服务器上看到的分支。登台服务器仅提供处于 master 分支状态的页面。这可能是预期的行为。

我应该在登台服务器上使用这个钩子吗？我似乎可以使更改生效的唯一方法是首先合并到本地计算机上的主服务器，然后将其推送到登台。这似乎不对，因为如果更改需要调整。我将不得不撤消本地的合并？

我很确定裸存储库和接收后挂钩将在生产服务器上很好地工作。因为它真的应该只有一种状态。

这些可能都是正常行为，我的工作流程可能不正确。对此或指导的任何帮助表示赞赏。我对此进行了搜索，但没有找到任何明确的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:18:52.847

如果您无法控制`Staging`post-receive 钩子（`Staging`即将始终服务`master`, 期间），您可以随时将您想要的任何分支推送到`master`远程分支：

```
git push --force Staging my-funky-branch:master 
```

请注意，像这样重新定义远程分支`master`将为来自.`pull``fetch``Staging`

您还可以创建一个特殊的本地分支来跟踪`Staging` `master`，并将所有更改合并到该分支。

```
git branch --set-upstream staging-master Staging/master
git checkout staging-master
git merge --no-ff my-funky-branch
git push 
```

如果您可以控制 post-receive 钩子，则可以使用类似的[方法](http://blog.ekynoxe.com/2011/10/22/git-post-receive-for-multiple-remote-branches-and-work-trees/)自动为您推送的分支提供服务。

# qt - Qt 和链接到外部 DLL

> ID：12503858
> 
> 赞同：2
> 
> 时间：2012-09-19T22:37:38.007
> 
> 标签：qt, dll, dynamic-linking, qlibrary

我已经开发了一个程序，我正试图使这个程序与其他公司制造的可控光源一起工作。我已经给公司发了电子邮件，他们同意将他们的外部库作为 DLL 发送给我。

我已经使用**Qt 4.8.1**开发了我的所有软件，并且已经使用**MSVC2008**进行了编译。

可控灯的 DLL 在 Visual Studio 2008 中编译，**用 C++ 或 C# 编写**（制造商不确定）。我得到的只是 DLL 和一个文本文件，说我必须：

1.  添加 DLL 作为对我的项目的引用
2.  添加`using LightName;`到班级顶部
3.  像这样实例化对象的实例：`LightName *ln = new LightName();`
4.  使用新创建的 LightName 实例调用函数 void turnOn()。

首先，我觉得奇怪的是外部库需要我实例化他们的对象的一个​​实例，尤其是当它用于一个简单的硬件时。

其次，对方公司没有给我提供接口文件。

**我的问题是：** 如果没有 Qt 环境中的接口头文件，我怎么可能链接到 C++ DLL 并公开嵌套在这个库中的函数？有没有办法为外部库制作接口？

* * *

我已经尝试使用[QLibrary](http://doc.qt.digia.com/4.7-snapshot/qlibrary.html#details)并执行以下操作：

```
 QLibrary myLib("mylib");
 typedef void (*MyPrototype)();
 MyPrototype myFunction = (MyPrototype) myLib.resolve("mysymbol");
 if (myFunction)
     myFunction(); 
```

但是，这不起作用，因为给我的 DLL 不是 C DLL，而且我没有接口，所以 Qt 不知道它需要解析哪些符号。

* * *

我尝试使用 dumpbin /EXPORTS 命令显示从我的 DLL 导出的所有定义。不幸的是，这无法产生任何东西。我希望我能从中得到某种被破坏的 C++，然后我可以整理出自己的标题。

* * *

我尝试使用[依赖walker](http://www.dependencywalker.com/)（非常有用的工具），但是它无法解析任何符号来给我一些函数定义。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:25:02.263

Well it's absolutely legal to ask you for "instantiating an instance of their object". It's been simply their design decision to make the dll interface object oriented (as contrary to plain `extern "C"`). `QtCore.dll` is just someone else's DLL too, and you are instantiating their objects all the time.

But it also means that you will have harder time to call the DLL. The symbols are not "C" symbols (you can't export class that way) so `QLibrary` can't do anything for you. You can try `dumpbin /EXPORTS` from the DLL and then [tediously unmangle them](http://en.wikipedia.org/wiki/Name_mangling#Complex_example) to reconstruct the class declaration. Luckily there are tools to help you ([even online](http://slush.warosu.org/c++filtjs/))

But not providing a header file for such DLL is completely dumb in the first place.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:23:22.377

QLibrary 仅在库具有导出为 C 符号的函数时为您提供帮助。如果那是 C++，您可以转储符号表并查看这对您是否足够。必须对名称进行解构：尝试查找 dumpbin 或类似名称。但是，您可能无法执行此操作，这取决于符号的定义方式。在这种情况下，您必须要求提供标题：[阅读此](https://stackoverflow.com/questions/11852329/linking-library-without-a-header-file)。

# .net - 多个重复的 TcpClient 连接是性能瓶颈吗？

> ID：12503865
> 
> 赞同：0
> 
> 时间：2012-09-19T22:38:50.913
> 
> 标签：.net, performance, networking, tcp, network-programming

我想知道与 .NET 的 TcpClient 建立重复的 TCP 连接会在多大程度上影响应用程序的性能。

我正在处理的应用程序最初是一个客户端/服务器应用程序，旨在让客户端和服务器位于同一个 LAN 网络上。

我们已删除客户端上的 ODBC 数据库连接，并使用自定义服务器，该服务器在从数据库读取二进制数据后使用协议缓冲区提供二进制数据。

我们的代码为每个 SQL 语句连接到服务器，序列化结果以类似于 DataTable 的结构返回。

在我们公司的网络上，应用程序非常快，但是我们已经开始使用远程客户端进行测试，并且遇到了延迟问题。我们的服务器在东海岸，我们的远程客户端在西海岸。

我怀疑为每个 SQL 语句打开连接的开销实际上是远程客户端的瓶颈，但是我不确定这一点。

**我的问题：反复打开 TCP 连接是性能瓶颈吗？持久连接会提高性能吗？如果我们使用持久连接会有什么问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:44:26.153

是的。使用连接池。有很多可用的。

# php - 使用 dd 标签 php 抓取 url

> ID：12503866
> 
> 赞同：0
> 
> 时间：2012-09-19T22:38:53.127
> 
> 标签：php, dom

我必须抓取一个网址并获取商品的价格。我正在尝试简单的 php DOM，但有些事情我做错了。这是价格为的代码的一部分：

```
 <div class="Right">

                    <dl class="Price Offer" itemprop="offers" itemscope itemtype="http://schema.org/Offer">
                        <dt>Price:</dt>
                        <dd itemprop="price">$49.99</dd>
                        <link itemprop="availability" href="http://schema.org/InStock" content="In Stock"/>
                    </dl>

                    <dl class="Identifier">
                        <dt>Prod ID:</dt>
                        <dd itemprop="productID">68947</dd>
                    </dl>
                </div> 
```

我需要得到 49.99 美元，没有别的，但我真的迷路了。我试过使用 ->plaintext 然后做一些爆炸或 str_replace 但似乎我做错了什么。

[这是我要抓取的网址](http://www.buycostumes.com/Zombie-Hunter-Child-Costume/68947/ProductDetail.aspx)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:42:38.007

一个愚蠢而简单的解决方案：

```
<?php
$scraptedText; //<-- your scraped site

$scraptedText = split('<dd itemprop="price">',$scraptedText);
$scraptedText = split('</dd>',  $scraptedText[1]);
$scraptedText = $scraptedText[0]; 
```

我不是很喜欢正则表达式，但这应该可以。

# powershell - 从 PowerShell 中的文件名中删除路径和扩展名

> ID：12503871
> 
> 赞同：137
> 
> 时间：2012-09-19T22:39:35.503
> 
> 标签：powershell

我有一系列字符串，它们是文件的完整路径。我想只保存文件名，没有文件扩展名和前导路径。所以从这里：

```
c:\temp\myfile.txt 
```

至

```
myfile 
```

我实际上并没有遍历目录，在这种情况下`basename`可以使用 PowerShell 的属性之类的东西，而是我单独处理字符串。

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2015-09-17T15:34:44.633

解决显示完整路径、目录、文件名或文件扩展名的问题比我想象的要容易得多。

```
 ## Output:
$PSCommandPath                             ## C:\Users\user\Documents\code\ps\test.ps1
(Get-Item $PSCommandPath ).Extension       ## .ps1
(Get-Item $PSCommandPath ).Basename        ## test
(Get-Item $PSCommandPath ).Name            ## test.ps1
(Get-Item $PSCommandPath ).DirectoryName   ## C:\Users\user\Documents\code\ps
(Get-Item $PSCommandPath ).FullName        ## C:\Users\user\Documents\code\ps\test.ps1

$ConfigINI = (Get-Item $PSCommandPath ).DirectoryName+"\"+(Get-Item $PSCommandPath ).BaseName+".ini"

$ConfigINI                                 ## C:\Users\user\Documents\code\ps\test.ini 
```

其他形式：

```
$scriptPath = split-path -parent $MyInvocation.MyCommand.Definition
split-path -parent $PSCommandPath
Split-Path $script:MyInvocation.MyCommand.Path
split-path -parent $MyInvocation.MyCommand.Definition
[io.path]::GetFileNameWithoutExtension($MyInvocation.MyCommand.Name) 
```

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2012-09-19T22:43:32.187

有一个方便的 .NET 方法：

```
C:\PS> [io.path]::GetFileNameWithoutExtension("c:\temp\myfile.txt")
myfile 
```

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2014-08-12T09:44:21.527

受@walid2mi[回答的启发：](https://stackoverflow.com/a/12512709/1811525)

```
(Get-Item 'c:\temp\myfile.txt').Basename 
```

**请注意：**这仅在给定文件*确实存在*时才有效。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2012-09-20T12:36:35.267

或者

```
([io.fileinfo]"c:\temp\myfile.txt").basename 
```

或者

```
"c:\temp\myfile.txt".split('\.')[-2] 
```

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2012-09-20T04:57:39.997

你可以使用**basename**属性

```
PS II> ls *.ps1 | select basename 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2019-10-30T14:49:47.137

从 PowerShell 6 开始，您将获得不带扩展名的文件名，如下所示：

```
split-path c:\temp\myfile.txt -leafBase 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-09-20T18:13:02.443

[@基思](https://stackoverflow.com/questions/12503871/removing-path-and-extension-from-filename-in-powershell#comment16849589_12512709)，

这里有另一个选择：

```
PS II> $f="C:\Downloads\ReSharperSetup.7.0.97.60.msi"

PS II> $f.split('\')[-1] -replace '\.\w+$'

PS II> $f.Substring(0,$f.LastIndexOf('.')).split('\')[-1] 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-04-14T20:46:53.403

扩展 René Nyffenegger 的回答，对于那些无法访问 PowerShell 版本 6.x 的人，我们使用不测试文件存在的拆分路径：

```
Split-Path "C:\Folder\SubFolder\myfile.txt" -Leaf 
```

这将返回“ *myfile.txt* ”。如果我们知道文件名中没有句点，我们可以拆分字符串并取第一部分：

```
(Split-Path "C:\Folder\SubFolder\myfile.txt" -Leaf).Split('.') | Select -First 1 
```

或者

```
(Split-Path "C:\Folder\SubFolder\myfile.txt" -Leaf).Split('.')[0] 
```

这将返回“ *myfile* ”。如果文件名可能包含句点，为了安全起见，我们可以使用以下内容：

```
$FileName = Split-Path "C:\Folder\SubFolder\myfile.txt.config.txt" -Leaf
$Extension = $FileName.Split('.') | Select -Last 1
$FileNameWoExt = $FileName.Substring(0, $FileName.Length - $Extension.Length - 1) 
```

这将返回“ *myfile.txt.config* ”。在这里，我更喜欢使用 Substring() 而不是 Replace()，因为前面有句点的扩展名也可以是名称的一部分，如我的示例所示。通过使用 Substring，我们根据请求返回不带扩展名的文件名。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-06-06T22:59:59.807

给定任意路径字符串，System.IO.Path 对象上的各种静态方法给出以下结果。

```
strTestPath = C:\Users\DAG\Documents\Articles_2018\NTFS_File_Times_in_CMD\PathStringInfo.ps1
GetDirectoryName = C:\Users\DAG\Documents\Articles_2018\NTFS_File_Times_in_CMD
GetFileName = PathStringInfo.ps1
获取扩展 = .ps1
GetFileNameWithoutExtension = PathStringInfo

```

以下是生成上述输出的代码。

```
[console]::Writeline( "strTestPath                 = {0}{1}" ,
                      $strTestPath , [Environment]::NewLine );
[console]::Writeline( "GetDirectoryName            = {0}" ,
                      [IO.Path]::GetDirectoryName( $strTestPath ) );
[console]::Writeline( "GetFileName                 = {0}" ,
                      [IO.Path]::GetFileName( $strTestPath ) );
[console]::Writeline( "GetExtension                = {0}" ,
                      [IO.Path]::GetExtension( $strTestPath ) );
[console]::Writeline( "GetFileNameWithoutExtension = {0}" ,
                      [IO.Path]::GetFileNameWithoutExtension( $strTestPath ) ); 
```

编写和测试生成上述脚本的脚本发现了一些关于 PowerShell 与 C#、C、C++、Windows NT 命令脚本语言以及几乎所有其他我有经验的东西的不同之处。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-10-29T05:14:08.327

这是一个没有括号的

```
[io.fileinfo] 'c:\temp\myfile.txt' | % basename 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-11-17T14:16:56.627

此脚本在文件夹和子文件夹中搜索并通过删除文件的扩展名来重命名文件

```
 Get-ChildItem -Path "C:/" -Recurse -Filter *.wctc |

    Foreach-Object {

      rename-item $_.fullname -newname $_.basename

    } 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-09-19T10:32:03.050

这可以通过将字符串拆分几次来完成。

```
#Path
$Link = "http://some.url/some/path/file.name"

#Split path on "/"
#Results of split will look like this : 
# http:
#
# some.url
# some
# path
# file.name
$Split = $Link.Split("/")

#Count how many Split strings there are
#There are 6 strings that have been split in my example
$SplitCount = $Split.Count

#Select the last string
#Result of this selection : 
# file.name
$FilenameWithExtension = $Split[$SplitCount -1]

#Split filename on "."
#Result of this split : 
# file
# name
$FilenameWithExtensionSplit = $FilenameWithExtension.Split(".")

#Select the first half
#Result of this selection : 
# file
$FilenameWithoutExtension = $FilenameWithExtensionSplit[0]

#The filename without extension is in this variable now
# file
$FilenameWithoutExtension 
```

这是没有注释的代码：

```
$Link = "http://some.url/some/path/file.name"
$Split = $Link.Split("/")
$SplitCount = $Split.Count
$FilenameWithExtension = $Split[$SplitCount -1]
$FilenameWithExtensionSplit = $FilenameWithExtension.Split(".")
$FilenameWithoutExtension = $FilenameWithExtensionSplit[0]
$FilenameWithoutExtension 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-01-07T08:25:50.870

下面的命令会将文件夹中的所有文件存储在一个变量中，与扩展名“.txt”匹配：

```
$allfiles=Get-ChildItem -Path C:\temp\*" -Include *.txt
foreach ($file in $allfiles) {
    Write-Host $file
    Write-Host $file.name
    Write-Host $file.basename
} 
```

`$file`给出带有路径、名称和扩展名的文件：c:\temp\myfile.txt

`$file.name`给出文件名和扩展名：myfile.txt

`$file.basename`只给出文件名：myfile

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-06-28T18:33:06.680

这里有几个 PowerShell 5.1 单行选项，它们将路径放在行首。

```
'c:\temp\myfile.txt' |%{[io.fileinfo]$_ |% basename} 
```

或者

```
"c:\temp\myfile.txt" | Split-Path -Leaf | %{$_ -replace '\.\w+$'} 
```

# php - 在 SQL SELECT 语句中设置列值

> ID：12503880
> 
> 赞同：0
> 
> 时间：2012-09-19T22:40:20.507
> 
> 标签：php, mysql, arrays

我有一个数组，它有两个值，一个 ID 值和一个价格值，如下所示：

***购物车***
**ID** -**价格**
23 - 0.10
24 - 10.00

使用 ID，SQL 查询从数据库中选择数据行，如下所示：

```
SELECT * FROM video A 
JOIN artists B 
    ON(A.UPLOADERID=B.ARTISTID) 
WHERE ID='".mysql_real_escape_string($cartarray[0]['ID'])."' 
    OR ID='".mysql_real_escape_string($cartarray[1]['ID'])."' 
ORDER BY ID 
```

问题是价格不再与新获取的数据中的行相关联，我将如何编写代码以在检索到的数据中有一个新列，即合适的价格？

# xcode - -fno-objc-arc 标志设置但 ARC 转换仍在尝试在 iOS 中转换文件

> ID：12503882
> 
> 赞同：4
> 
> 时间：2012-09-19T22:40:33.423
> 
> 标签：xcode, automatic-ref-counting

我正在尝试将我的项目转换为弧。我已经为我想从 arc 中排除的所有文件设置了 -fno-objc-arc。然后我去编辑>转换为objective-c arc，转换过程仍然尝试转换它们。他们未能转变并拖着我前进。

有谁知道我可以做些什么来让转换过程识别我的不转换标志（-fno-objc-arc）？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T00:17:21.847

首先选择**Edit -> Refactor -> Convert To Objective-C ARC**，然后选择要转换的目标，然后展开目标并取消选中您不想转换的任何源文件。

ARC 转换器将跳过取消选择的文件并`-fno-objc-arc`在必要时添加标志。

# xml - 为什么这个 DTD 会失败，而它几乎是同卵双胞胎却没有呢？

> ID：12503889
> 
> 赞同：0
> 
> 时间：2012-09-19T22:41:31.983
> 
> 标签：xml, dtd

给定这个 XML 文件的片段：

```
<Active>
  <SystemName Permissions="RW" Datatype="STRING" Case="MIXED_RESPECT">NASCENT Default System Name</SystemName>
  <ModelNumber Permissions="RO" Datatype="STRING" Case="MIXED_RESPECT">A104S2</ModelNumber>

<!-- snip snip snip --> 
```

以及与之匹配的相应 DTD 片段：

```
<!ELEMENT Active (SystemName,ModelNumber,SerialNumber....)>
   <!ELEMENT ModelNumber (#PCDATA)>
      <!ATTLIST ModelNumber Permissions   CDATA #FIXED "RO">
      <!ATTLIST ModelNumber Datatype      CDATA #FIXED "STRING">
      <!ATTLIST ModelNumber Case          CDATA #FIXED "MIXED_RESPECT">
   <!ELEMENT SystemName (#PCDATA)>
      <!ATTLIST SystemName  Permissions   (RW|RO) "RO"
                            Datatype      CDATA #FIXED "STRING"
                            Case          CDATA #FIXED "MIXED_RESPECT">

<!-- snip snip snip --> 
```

针对 DTD 运行 XML 时出现以下错误：

```
/home/.../Active.xml:7: element ModelNumber: validity error : No declaration for attribute Permissions of element ModelNumber
  <ModelNumber Permissions="RO" Datatype="STRING" Case="MIXED_RESPECT">A104S2</M
                                                                          ^
/home/.../Active.xml:7: element ModelNumber: validity error : No declaration for attribute Datatype of element ModelNumber
  <ModelNumber Permissions="RO" Datatype="STRING" Case="MIXED_RESPECT">A104S2</M
                                                                          ^
/home/.../Active.xml:7: element ModelNumber: validity error : No declaration for attribute Case of element ModelNumber
  <ModelNumber Permissions="RO" Datatype="STRING" Case="MIXED_RESPECT">A104S2</M

<!-- snip snip snip --> 
```

有人可以解释它在抱怨什么吗？我看着谷歌，直到我睁一只眼闭一只眼。SystemName 有效，它识别 ModelNumber 等是它只能看到 !Attlist 的元素！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:36:05.950

您的分析在我看来是正确的：您的验证器没有看到 ModelNumber 属性的声明。您显示的 DTD 片段确实有它们，并且 DTD 和文档实例以相同的方式拼写所有内容，我无法使用您显示的片段在我的系统上复制问题。

一个可能的原因是您的验证器没有读取您认为它正在读取的 DTD。一种测试方法是在您认为正在使用的 DTD 中引入语法错误或抑制 SystemName 的属性之一，并查看错误消息是否更改。

祝你好运。

# java - 如何在java中向应用程序顶部绘制一个矩形

> ID：12503897
> 
> 赞同：6
> 
> 时间：2012-09-19T22:42:18.510
> 
> 标签：java, swing, awt, graphics2d

如何在 java 中向应用程序顶部绘制一个矩形？通常 drawRect 方法向底部绘制我尝试使用负数但这不起作用

```
Graphics g = p.getGraphics();
g.fillRect(50, 200,50,100); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T22:48:02.480

在矩形中，X 和 Y 坐标代表左上角。然后长度和宽度远离定义点。您的示例绘制了一个矩形，其左上角为 50,200，宽度为 50，高度为 100，两者都在正方向上远离这些点。如果您想要一个 50,200 代表左下角的矩形，只需从该 y 坐标 (200) 中减去高度，并将其用作起始 y：

```
Graphics g = p.getGraphics();
g.fillRect(50, 100, 50, 100); 
```

要解决您的示例，请尝试以下操作（我将只使用矩形对象而不是实际填充图形）：

```
int baseline = 200;
Rectangle rect1 = new Rectangle(50, baseline - 100, 50, 100);
Rectangle rect2 = new Rectangle(150, baseline - 50, 50, 50);
Rectangle rect3 = new Rectangle(250, baseline - 80, 50, 80); 
```

在图形对象上用这些尺寸填充矩形后，您将拥有三个矩形，每个宽度为 50，间隔 50，底部都在 y=200 线上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T23:04:09.853

Java 的`Graphics`类假定原点`(0, 0)`是框架的左上角，`(1, 1)`即`(0, 0)`. 这与数学相反，其中标准笛卡尔平面的原点是左下角，并且`(1, 1)`在 的上方和右侧`(0, 0)`。

此外，Java 不允许您对宽度和高度使用负值。这导致特殊的逻辑通常将矩形与正常的正尺寸矩形区别对待。

为了得到你想要的，首先扭转你对 Java`Graphics`坐标系中 y 坐标的想法。正 y 下降，而不是上升（尽管正 x 仍然是正确的，就像标准笛卡尔图一样）。

话虽如此，`drawRect`和的字段`fillRect`是：

1.  矩形左上角的 x 坐标
2.  矩形左上角的 y 坐标
3.  矩形的正宽度
4.  矩形的正高度

佐伊的回答展示了如何获得你想要的东西的一个很好的例子，我只是想你可能想要更彻底地解释为什么“`drawRect`方法会趋于底部”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-04T10:51:36.773

运行它..在小程序窗口上向任何方向拖放鼠标..看看发生了什么......希望你能从中得到一些想法......

```
//Simulation of the desktop screen

package raj_java;
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;

public class DesktopDemo extends Applet implements MouseListener, MouseMotionListener {

    int x1, y1, x2, y2;
    Image img;

    public void init() {
        setSize(1200, 700);
        setVisible(true);
        img = getImage(getCodeBase(), "Nature.jpg");
        addMouseListener(this);
        addMouseMotionListener(this);
    }

    public void mouseEntered(MouseEvent me) {
        //blank
    }

    public void mouseExited(MouseEvent me) {
        //blank
    }

    public void mouseClicked(MouseEvent me) {
        //blank
    }

    public void mouseReleased(MouseEvent me) {
        Graphics g = getGraphics();
        g.drawImage(img, 0, 0, 1200, 700, this);
    }

    public void mouseMoved(MouseEvent me) {
        //blank
    }

    public void mousePressed(MouseEvent me) {
        x1 = me.getX();
        y1 = me.getY();
    }

    public void mouseDragged(MouseEvent me) {
        x2 = me.getX();
        y2 = me.getY();
        repaint();
    }

    public void paint(Graphics g) {
        g.drawImage(img, 0, 0, 1200, 700, this);
        g.setColor(new Color(10, 99, 126));
        g.drawLine(x1, y1, x2, y1);
        g.drawLine(x2, y1, x2, y2);
        g.drawLine(x2, y2, x1, y2);
        g.drawLine(x1, y2, x1, y1);
        g.setColor(new Color(193, 214, 220, 70));
        int width = Math.abs(x2 - x1);
        int height = Math.abs(y2 - y1);
        if(x2 < x1) {
            g.fillRect(x2, y1, width, height);
        }else if(y2 < y1) {
            g.fillRect(x1, y2, width, height);
        }else {
            g.fillRect(x1, y1, width, height);
        }
    }

} 
```

# javascript - 如何在 javascript 中编写参数大小的通用函数？

> ID：12503900
> 
> 赞同：1
> 
> 时间：2012-09-19T22:42:27.993
> 
> 标签：javascript, node.js

在 node.js 中，一个 tcp 服务器有以下方法来监听：

```
server.listen(port, [host], [backlog], [listeningListener])
server.listen(path, [listeningListener])
server.listen(handle, [listeningListener]) 
```

我想创建一个特定于应用程序的服务器，它调用这个较低级别的 tcp 服务器。我想为我的用户提供一个监听方法，它只调用 tcp 服务器的正确监听方法。

有没有办法让我避免编写三种不同的监听方法，并将它们的参数传递给三个 tcp 服务器的监听方法？它会传递可选参数吗？

我可以做这样的事情吗（稍微编造的语法）：

```
myapp.listen(args*){
    tcpserver.listen(args*);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:47:46.177

在 JavaScript 中，[函数的所有参数总是在 name 下可用`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)，无论它们是否也有自己的名称；所以你可以写：

```
myapp.listen(){
    tcpserver.listen.apply(tcpserver, arguments);
} 
```

使用[该函数`Function.apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)转发`arguments`到所需的方法调用。

* * *

**编辑添加：**我还应该澄清一下，尽管这样：

> 在 node.js 中，一个 tcp 服务器有以下方法来监听 […] 三个 tcp 服务器的监听方法 […]

[与Node.js 文档描述事物](http://nodejs.org/api/net.html#net_class_net_server)的方式一致，但并不*完全*准确。JavaScript 没有任何函数/方法重载的概念；相反，一个`Server`对象必须有一个`listen`方法来检查其第一个参数以确定要执行的“重载”。

# r - 循环遍历向量的向量

> ID：12503901
> 
> 赞同：16
> 
> 时间：2012-09-19T22:42:32.597
> 
> 标签：r, vector, for-loop, loops

当我遍历一个向量向量时，每个循环的结果是几个向量。我希望每个循环的结果都是一个向量。请看下面的例子：

```
foo <- seq(from=1, to=5, by=1)
bar <- seq(from=6, to=10, by=1)
baz <- seq(from=11, to=15, by=1)
vects <- c(foo,bar,baz)
for(v in vects) {print(v)}

# [1] 1
# [1] 2
# [1] 3
# [1] 4
# [1] 5
# [1] 6
# [1] 7
# [1] 8
# [1] 9
# [1] 10
# [1] 11
# [1] 12
# [1] 13
# [1] 14
# [1] 15 
```

这很奇怪，因为我期望给定三个向量（应该）在给定向量的情况下迭代三次`c(foo,bar,baz)`。就像是：

```
# [1]  1  2  3  4  5
# [1]  6  7  8  9 10
# [1] 11 12 13 14 15 
```

谁能解释为什么我得到这个结果（15 个向量）以及如何实现我正在寻找的结果（3 个向量）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-19T22:46:45.883

看看是什么`vects`：

```
> vects
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 
```

连接（在这种`c()`情况下）三个向量，将它们连接成一个向量。在`for()`循环`v`中，依次获取每个值`vects`并打印它，因此您会看到结果。

您想要三个独立向量的列表吗？如果是这样

```
> vects2 <- list(foo, bar, baz)
> for(v in vects2) {print(v)}
[1] 1 2 3 4 5
[1]  6  7  8  9 10
[1] 11 12 13 14 15 
```

换句话说，形成一个向量列表，而不是向量的组合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T22:46:17.917

代替. `vects <- list(foo,bar,baz)`_`vects <- c(foo,bar,baz)`

没有向量的向量（真的）这样的东西。

# c - 在 C 中初始化二维数组

> ID：12503904
> 
> 赞同：1
> 
> 时间：2012-09-19T22:42:52.910
> 
> 标签：c

这是我的代码：

```
int main() { 
    int x, y; 
    int *xptr, *yptr; 
    int array[10][10]; 
    int j; 
    int k; 
    int z = 0; 

    for(j = 0; j < 10; j++) { 
        for(k = 0; k < 10; k++) { 
            array[j][k] = j * 10 + k; 
        } 
    } 

    xptr = &array[0][0]; 

    for(j = 0; j < 10; j++) { 
        for(k = 0; k < 10; k++) { 
            printf("array[%d][%d] = %d \n", j, k, *(xptr + j), (xptr + k)); 
        } 
    } 

    system("PAUSE"); 
} 
```

我正在尝试初始化一个二维数组，以便在 [0][0] 处等于 0，在 [9][9] 处等于 99。按照现在的方式，[0][0-9] 都等于0 然后 [1][0-9] 都等于 1。如何以我提到的方式正确加载此数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:45:03.470

```
for(j = 0; j < 10; j++) {
      for(k = 0; k < 10; k++) {
            array[j][k] = j*10 + k;
      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:45:16.280

我假设您实际上已经声明了所有内容，但没有将其包含在示例中。你只是想要

`array[j][k] = j*10 + k;`

# ruby-on-rails - 运行简单的 Rails 模板时找不到 gem 'ffi'

> ID：12503909
> 
> 赞同：0
> 
> 时间：2012-09-19T22:43:31.350
> 
> 标签：ruby-on-rails, templates, bundler, ffi, libnotify

尝试运行我的收据时出现错误：

并运行以下命令：

```
$> rails _3.2.8_ new demo_app -T

$> cd demo_app

$> rake rails:template LOCATION=https://raw.github.com/gist/3752746/a259f4307b65493f4b7043bd78f30efa3ba6191e/test.rb 
```

收据在这里[https://raw.github.com/gist/3752746/a259f4307b65493f4b7043bd78f30efa3ba6191e/test.rb](https://raw.github.com/gist/3752746/a259f4307b65493f4b7043bd78f30efa3ba6191e/test.rb)

然后我收到以下错误

```
Could not find gem 'ffi (~> 1.0.0) ruby', 
which is required by gem 'libnotify (= 0.5.9) ruby', in any of the sources. 
```

当我使用带有复制粘贴 gem 的手动安装并运行“捆绑安装”时，一切正常。
怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T03:49:25.880

尝试这个：

```
require 'bundler'

# do your template gem adding stuff...

Bundler.with_clean_env do
  run 'bundle install'
end 
```

参考：[https ://github.com/rails/rails/issues/3153](https://github.com/rails/rails/issues/3153)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:51:55.303

`gem install ffi`

然后再次运行。

# javascript - 孩子们如何收听/捕捉父母的事件

> ID：12503911
> 
> 赞同：12
> 
> 时间：2012-09-19T22:43:32.313
> 
> 标签：javascript, html, dom, javascript-events

父母如何触发自定义事件以通知其孩子/兄弟姐妹？例如：

```
<div id="div1">
   <div id="div2"></div>
</div> 
```

div2 有 addEventListener('customEvent2', doSth)，然后 div1 将触发自定义事件 (customEvnet2)。但这永远不会触发 div2 的“doSth”功能

示例代码：http: [//jsfiddle.net/r4tcT/2/](http://jsfiddle.net/r4tcT/2/)

“div 1 trigger customEvent 2”按钮永远不起作用

因此，当父级触发自定义事件（dispatchEvent[IE9]/fireEvent[IE9-]/trigger[jQuery]）时，子级无法捕获该事件。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T22:57:02.040

您正在谈论的区别在于“捕获”事件模型或“冒泡”事件模型之间。jQuery 的触发器在 Bubble 模型上运行可能是因为这是更受支持的事件模型——主要归功于 Internet Explorer。Bubble 模型仅通过元素父母向后移动......这就是为什么您的事件在从 触发`div2`时不会触发的原因`div1`，因为它总是在冒泡而不是向下。

我之前没有尝试使用本机函数自定义事件，但大多数现代浏览器允许您在设置事件侦听器时决定使用哪种类型的模型：

```
addEventListener (type, listener[, useCapture]) 
```

[https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)

基本上，如果您将事件侦听器`true`用作最后一个参数，则事件侦听器应在 Capture 阶段*（即事件沿 dom 树传播时）*触发。如果设置为 false，则事件将在返回 dom 树时发生的冒泡阶段触发。

这已经在这里讨论过：

[事件捕获与事件冒泡](https://stackoverflow.com/questions/2661199/event-capturing-vs-event-bubbling)

正如我所说，这是否适用于定制活动，我不确定。我很确定你不能用 jQuery 做这个*（到目前为止）*可能是由于旧浏览器缺乏支持。

## **更正**

看来我在上面的猜测不起作用。由于“捕获”一词让您考虑捕获用户输入，我想了很多——当涉及到定制事件时，没有办法定义一种新的用户输入。所以考虑到这一点，我把这个快速的 jQuery 插件放在一起......它只是经过粗略的测试，但逻辑应该是合理的 - 希望它有用：

```
/**
 * unbubble v0.2
 *
 * trigger an event down through the children of a collection, 
 * rather than up through it's parents
 *
 *  @update 2013/03/18 - fixed the problem of triggering bubble phase each
 *    step down the element tree as pointed out by @vine.
 */
$.fn.unbubble = function( eventNames ){
  var names = eventNames.split(' '), 
      non = names.length, 
      args = Array.prototype.slice.call(arguments);
  /// our own trigger function designed to bubble down... not up!
  var trigger = function(){
    var i, events, elm = $(this);
    /// make sure we can read the events array
    if ( $._data ) {
      /// make sure events is defined
      if ( (events = $._data(this, 'events')) ) {
        /// do a quick check, saves firing trigger on every element found
        for ( i=0; i<non; i++ ) {
          /// make sure our eventName appears in the event list
          if ( names[i] && ( names[i] in events ) ) {
            /// trigger the standard jQuery trigger function
            elm.triggerHandler.apply(elm, args);
            /// escape as trigger should fire for multiple names
            break;
          }
        }
      }
    }
    /// if we can't access the events array, just trigger and hope
    else {
      /// trigger the standard jQuery trigger function
      elm.triggerHandler.apply(elm, args);
    }
    /// trigger for all the children, and on, and on...
    elm.children().each(trigger);
  };
  /// foreach element trigger now...
  this.each(trigger);
}

/**
 * Example usage
 */
$(function(){
  /// bind our event as usual
  $('.div2').bind('customEvent', function(){
    alert('I should trigger!');
  });
  /// rather than use trigger, fire with unbubble
  $('#div1').unbubble( 'customEvent' );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:25:21.037

pebbl 的答案很好，但它有缺陷。捕获阶段是通过从文档到相关元素的正常触发事件以某种方式模拟的。但问题是，在任何元素上调用标准的 jQuery 触发器函数将立即跟随从该元素开始的冒泡阶段。所以我相信他可以坚持直接从元素集合中访问事件数据并直接调用它而不使用标准触发函数，就像这样

```
var JQ_LT_17 = parseFloat($.fn.jquery) < 1.7;

function getEventsData(element) {
        return JQ_LT_17 ? $(element).data('events') : $._data(element).events;
} 
```

代码片段借用自 jQuery.bind-first library v0.1 Vladimir Zhuravlev

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T23:01:12.540

我已经玩了一点代码，[这](http://jsfiddle.net/r4tcT/4/)就是我现在拥有的。这是一个黑客，但也许它可以帮助你解决你的问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T22:52:14.773

`customEvent2`只限于`div2`. 当您尝试触发它时`div1`，没有任何反应，因为该事件不存在于`div1`.

如果你想触发`customEvent2`，它必须在它实际绑定的元素（或一个元素的子元素）上触发。

# azure - 以编程方式配置 Windows Azure 缓存（预览版）缓存客户端

> ID：12503913
> 
> 赞同：2
> 
> 时间：2012-09-19T22:43:40.877
> 
> 标签：azure, azure-caching

尝试从 Windows Azure 共享缓存转换为 Windows Azure 缓存（预览版），我能够通过 DataCacheFactoryConfiguration 类以编程方式配置 DataCacheFactory。缓存（预览版）中是否有可能？如果是这样，需要为服务器配置设置哪些值？

查看旧文档 ( [http://technet.microsoft.com/en-us/library/gg618003.aspx](http://technet.microsoft.com/en-us/library/gg618003.aspx) ) 我无法找到该文档的“预览”版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:56:08.250

有关使用 Windows Azure 缓存预览的“操作方法”文档在[此处](https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)。要包含缓存预览版的 nuget 包，请查看“Windows Azure 缓存入门（预览版）”部分，并查看“使用缓存”部分，其中显示了有关如何使用 API 的代码。

由于这两个缓存根本不同，因为 on 是本地可用的，而另一个是在云中，所以用于配置 Cache 和 Cache 对象的库和 API 在两者之间是不同的。关键区别在于缓存预览使用以下不同的参考：

```
using Microsoft.ApplicationServer.Caching; 
```

并且依赖于上面的代码与上面提供的链接中记录的不同，即

```
DataCacheFactory cacheFactory = new DataCacheFactory();
DataCache cache = cacheFactory.GetDefaultCache(); 
```

# c++ - 类型转换结构和类

> ID：12503914
> 
> 赞同：0
> 
> 时间：2012-09-19T22:43:45.603
> 
> 标签：c++, class, casting

我对 C++ 很陌生。目前我正在查看一个源代码，其中我看到了一些类型转换，但我不明白。
这是代码。

```
struct str {
    char *a;
    int b;
};

class F {
public:
    char* val;
};  

F f1; 
```

任何人都可以解释下面的作业吗？或者这种类型转换有效吗？

```
 str* ptr = (str*) f1->val; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T22:57:01.123

> 任何人都可以解释下面的作业吗？

它的意思是“假装`val`指针指向一个类型的对象`str`，即使它被声明指向一个完全不同的类型`char`；给我那个指针并相信我知道我在做什么”。

这是假设真正的代码要么声明`F * f1;`，要么访问它为`f1.val`; 您发布的代码不会编译。

> 还是那个类型转换有效？

**If** the pointer really does point to an object of the correct type, then it's valid; otherwise, using the pointer will cause the program to fail in all sorts of catastrophic ways.

Typecasting is something that should very rarely be necessary. If you really do need it, you should never (as in absolutely never, under any circumstances) use that C-style cast; it means "force the conversion with no checks whatsoever, as long as there's some way to do it, even if it makes absolutely no sense". Use `static_cast` or `dynamic_cast` when you can, and `reinterpret_cast` or `const_cast` when you're doing something really dodgy. And don't use any of them unless you know what you're doing, and have a very good reason for circumventing the type system.

# c# - 我可以在列表中搜索特定值吗 ?

> ID：12503917
> 
> 赞同：1
> 
> 时间：2012-09-19T22:44:12.910
> 
> 标签：c#, list, generics

我有一个列表`<customClass`>。

自定义类包含两个成员，它们一起形成一个伪复合键。

我希望能够多次写入自定义类的每个实例（“逐步填充”——几个成员在某一点分配值，然后再有几个成员在稍后分配值，等等）。

将数据保存到此列表`<T`> 时，我希望能够找到我将要部分填充的特定实例（如果它已经被实例化）。

例如，假设“伪复合键”是：

```
class.member1 == "a"
class.member2 == "42" 
```

我想搜索以查看是否已经存在具有这些值的自定义类的实例，如果有，请使用它；否则，创建该类的新实例以添加到 List `<T`>。

*有*没有办法找到自定义类的特定实例，以便我可以将成员分配给该实例的尚未分配的成员？

我需要这样做的原因是，在保存值时（在它们“消失”之前），如果不是所有的自定义类实例，一些但可能不是所有的值都是已知的；下次保存时，这些相同类实例的*其他*部分是已知的，必须添加到现有的类实例中；等等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T22:45:49.210

```
myList.Where(x => x.Member1 == "a" && x.Member2 == "42"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:51:27.393

```
try {   
    var obj = list.First(x => x.Property1 == "1" && x.Property2 == "a");
} catch {
    // Not found
} 
```

# android - 什么是最常见的游戏开发框架

> ID：12503918
> 
> 赞同：-1
> 
> 时间：2012-09-19T22:44:13.767
> 
> 标签：android, ios, game-engine

我正计划为智能手机启动游戏开发
我有使用 xna 和 maya 的经验，
那么什么是开始学习的最佳框架，
有没有可以为多个平台发布的框架，如 android、ios .. 无需重写所有内容
或我应该选择opengl ES
，opengl相对于框架有什么优势（如果有优势的话）
，所以基本上我想要“一个框架来统治它们”

我知道这个问题可能是可以回答的，但我只需要一些开始链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:01:34.207

我认为您应该查看统一 (http://unity3d.com/) 或在基本 HTML5 (http://gamesalad.com/creator) 布局中进行操作...为什么或不...不是最技术性的人，但形成我所读到的这些接缝是最好的选择......

# xcode - ios6振动停止工作

> ID：12503930
> 
> 赞同：1
> 
> 时间：2012-09-19T22:45:23.533
> 
> 标签：xcode, ios6

我今天将我的 iPhone4S 升级到 iOS6。我的应用程序中的振动功能停止工作。我还升级到 Xcode4.5 并重新构建测试。它还是坏了。有没有其他人注意到`kSystemSoundID_Vibrate`升级到 iOS 6.0 后停止工作？

# iphone - 在 iOS 的 UI 工具栏中导航

> ID：12503932
> 
> 赞同：0
> 
> 时间：2012-09-19T22:45:29.383
> 
> 标签：iphone, objective-c, ios, ios5

看看这张照片：

![在此处输入图像描述](../Images/45a8ab828fabe1792636129c24852c0a.png)

我有类似工具栏的东西，包括一些按钮。如您所见，用户可以左右移动。我知道如何在工具栏中设置按钮，但我不知道如何在工具栏上修复这种导航。工具栏中可以吗？

如果是，如何？

如果没有，你知道 iOS 中有什么可以帮助我的控件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:22:46.960

可能值得浏览[Cocoa Controls](http://www.cocoacontrols.com/platforms/ios/controls)。他们确实为 iOS 和 Mac 提供了很多出色的预制自定义控件。

就个人而言，我只会创建自己的自定义 UIScrollView 子类，其中包含一些 UIButtons。然后`scrollView.pagingEnabled = YES`在设置正确的内容大小后将滚动视图设置为。

Apple 有一个很好的使用滚动视图和分页的指南：

[http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/UIScrollView_pg/ScrollViewPagingMode/ScrollViewPagingMode.html](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/UIScrollView_pg/ScrollViewPagingMode/ScrollViewPagingMode.html)

# pdf - 如何将矢量eps文件转换为pdf？

> ID：12503934
> 
> 赞同：1
> 
> 时间：2012-09-19T22:45:40.833
> 
> 标签：pdf, converter, vector-graphics, eps

我有一个矢量格式的 EPS 文件，我需要将其转换为 PDF，并保留其矢量格式。我正在使用 Windows 7 系统，并且正在尝试找到一个可以与我的应用程序一起重新分发的工具。它不能是 GUI 或基于在线的；我需要我的应用程序将其用作库或通过系统调用。

我尝试了以下工具但没有成功：

*   ghostscript 9.06 - ps2pdf - 输出空白 pdf。
*   ImageMagick - 使用正确的图像生成 pdf，但它是一个光栅转换器，因此它不保留矢量格式。
*   UniConvertor - 输出一个空白的 pdf。
*   pstoedit - 输出一个空白的 pdf。

当然，我不是列出的任何这些工具的专家，所以很可能我只是没有以正确的配置运行该工具；如果有人认为空白 pdf 是使用其中一种工具配置不正确的症状，请让我知道可能的修复。感谢您的任何帮助。

这是eps文件的标题：

```
%!PS-Adobe-2.0 EPSF-1.2
%%Creator:Adobe Illustrator(TM) 1.1
%%For:OPS MANUAL FLOE
%%Title:ILLUS.MAC
%%CreationDate:7/27/87 3:40 PM
%%DocumentProcSets:Adobe_Illustrator_1.1 0 0
%%DocumentSuppliedProcSets:Adobe_Illustrator_1.1 0 0
%%DocumentFonts:Courier
%%+Helvetica
%%BoundingBox:000 -750 650 50
%%TemplateBox:288 -360 288 -360
%%EndComments
%%BeginProcSet:Adobe_Illustrator_1.1 0 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:45:29.503

边界框表示标记从 0,-750 延伸到 650, 50

所以几乎整个内容（750/800）都在页面下方。请注意，Ghostscript 会*忽略*DSC 评论，毕竟它们是评论。

为了将其定位在页面上，您必须平移原点并可能缩放页面。请注意，EPS 文件旨在包含在其他文档中，而不是单独打印，这取决于文档管理器来阅读 BoundingVox 注释并正确定位 EPS。

在没有文档管理器的情况下，您将不得不自己执行此操作。请注意，更改*评论*完全没有效果。

我建议您先添加以下行：

```
0 750 translate 
```

这将使原点垂直移动 750 个单位，因此页面将从 0,0 扩展到 650,800，看看有什么效果。

# javascript - 我尝试使用“The Crockford Way”来构建我的 JS，但我有一些担忧

> ID：12503938
> 
> 赞同：0
> 
> 时间：2012-09-19T22:46:17.707
> 
> 标签：javascript, jquery, refactoring

我试图弄清楚如何开始新页面的一些结构。

该页面名为“Orders”，现在将有几个选项卡：“OrdersTab”和“TasksTab”

我的布局设置如下：

```
//Namespace for the 'Orders' page.
var Orders = (function () {
    "use strict";
    var tabs = $('#OrdersTabs').tabs();
    var ordersTab = new OrdersTab();
    var tasksTab = new TasksTab();

    //Public methods:
    return {

    };
})(); //Load when ready. 
```

我的意图是让 Orders 命名空间负责加载选项卡。我正在努力理解如何将我的 OrdersTab 和 TasksTab 保持在与 Orders 相同的“命名空间”中。理想情况下，另一个页面将无法实例化 OrdersTab。

```
//Namespace for the 'OrdersTab' from the 'Orders' page.
function OrdersTab() {
    "use strict";
    var ordersGrid = $('#OrdersGrid');
    var ordersGridPager = $('#OrdersGridPager');

    ordersGrid.jqGrid({
        url: '../Orders/GetOrders/',
        datatype: 'json',
        colNames: ['Name', 'Description'],
        colModel: [
            { name: 'Name', index: 'Name', sortable: false, width: 150 },
            { name: 'Description', index: 'Description', sortable: false, width: 300 }
        ],
        gridview: true,
        height: 'auto',
        rowNum: 10,
        pager: ordersGridPager,
        viewrecords: true
    });

    //Public methods:
    return {

    };
}; 
```

Orders 位于 Orders.js 中，而 OrdersTab 位于 OrdersTab.js 中。在我看来，一个新的 OrdersTab 可能是由其他人“意外”创建的，或者函数名称意外地变得模棱两可。是否可以将 OrdersTab 包含在 Orders 的“命名空间”中，同时将其保存在单独的文件中？我认为如果每个选项卡都比预期的大/允许将来引入其他选项卡，则需要单独的文件。

此外，我想知道是否可以在两个文件之间使用相同的设置结构。对我来说，我为 Orders 分配一个变量似乎很尴尬，但只是使用 OrdersTab 创建一个函数。也许这是可以的和标准的，不过，我只是想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:15:47.193

有几种解决方案，从将所有内容都放在一个函数中（您不想这样做）到完全沙箱化每个模块，并为它们提供一个消息传递系统以相互通信（类似于 MacOS 的运行方式），无处不在.

一个快乐的媒介是在您的主要应用程序中构建一个加载系统：

```
var APPNAME = (function () {
    var load = function (name) { /* load name.js */ },
        add = function (name, implementation) { this[name] = implementation; };
        public_interface = {
            load : load,
            add : add
        };

    return public_interface;
}()); 
```

随意构建一个承诺系统或中介系统。使用这些，您可以触发应用程序内部的自定义事件，以处理依赖关系和初始化，以及所有其他操作。

然后，您将能够在其他文件中执行以下操作：

```
// module-1.js
APPNAME = APPNAME || {add: function () {}}; // the second part is to die without error
APPNAME.add("publiclyAccessibleName", function () { /* whatever you need it to be */ }); 
```

因此，在您的实际文档中，您只需要使用`APPNAME.load("modulename");`加载“modulename.js”，然后就可以像`APPNAME.publicName`您决定的那样访问它。

再一次，您可以进一步抽象... ...您可以有一个`addPublic`和一个`addPrivate`用于服务或模块。您可以将模块存储在隐藏对象中，而不是在公共对象上，您可以将其`implementation`用作构造函数，或用作另一个 IIFE 来返回另一个对象。

在高级沙箱中，您可能会将这些加载到一个`modules`对象中，然后当您初始化每个模块时，您可以将其初始化函数传递给可以访问的对象，例如您的 JS 库（jQuery/Dojo）和应用程序的消息传递系统.

为了真正被沙盒化，该系统对象将只是一个实例，而不是共享对象，因此篡改它只会将该模块封闭，而不是弄乱系统中的任何其他东西。

...当然，到这个时候，你真的，真的参与其中，这可以相对安全地扩展一个大型应用程序。

我不是说你应该走那么远。我要说的是，总是有更多，而且事情总是可以进一步抽象，以完成你需要做的事情。

我喜欢 JS。

# jboss7.x - 在 JBoss 7 中配置 WorkManager

> ID：12503945
> 
> 赞同：0
> 
> 时间：2012-09-19T22:47:10.413
> 
> 标签：jboss7.x

我对 JSF 很陌生（我是一名移动开发人员），我需要在一个线程中运行大量进程。我读过我需要使用 WorkManager，但我找不到它是怎么回事，以及如何在 JBoss 7 中配置它。

有没有人知道一个易于理解的教程？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:11:48.880

`@Aysnchronous`EJB 可能是最简单的解决方案。

**编辑1：**

这或多或少看起来像这样：

```
@Singleton
public BulkProcessor {

    @Asynchronous
    public void doWork(){
        // code there
    }
} 
```

当您调用该方法时，它将立即返回，但 JBoss 将`#doWork`在它自己的线程中运行。请记住，您必须拥有`@Inject`该对象，而不是自己实例化它。

**编辑2：**

这是一个快速简单的示例 [http://satishgopal.wordpress.com/2011/04/24/ejb-3-1-asynchronous-methods/](http://satishgopal.wordpress.com/2011/04/24/ejb-3-1-asynchronous-methods/)

# linux - Bash中的递归广度优先遍历

> ID：12503958
> 
> 赞同：0
> 
> 时间：2012-09-19T22:48:17.143
> 
> 标签：linux, bash, recursion, tree, breadth-first-search

我试图找出为什么我的遍历不起作用。我相信我已经将问题隔离到代码中它说“目录包含”的地方，然后是传递给函数的内容。该函数被传递了一个数组，其中包含所有要回显的新文件路径，但由于某种原因，它只接收第一个。我是错误地传递了数组还是可能是别的东西？

```
#!/bin/bash

traverse(){
  directory=$1
  for x in ${directory[@]}; do
    echo "directory contains: " ${directory[@]}
    temp=(`ls $x`)
    new_temp=( )
    for y in ${temp[@]}; do
      echo $x/$y
      new_temp=(${new_temp[@]} $x/$y)
    done
  done

  ((depth--))

  if [ $depth -gt 0 ]; then
    traverse $new_temp
  fi
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:54:02.370

您不能将数组作为参数传递。你只能传递字符串。您必须首先将数组扩展为其内容列表。我冒昧`depth` 地将您的函数设为本地，而不是我假设的全局变量。

```
traverse(){
  local depth=$1
  shift
  # Create a new array consisting of all the arguments.
  # Get into the habit of quoting anything that
  # might contain a space
  for x in "$@"; do
    echo "directory contains: $@"
    new_temp=()
    for y in "$x"/*; do
      echo "$x/$y"
      new_temp+=( "$x/$y" )
    done
  done

  (( depth-- ))
  if (( depth > 0 )); then
    traverse $depth "${new_temp[@]}"
  fi
}

$ dir=( a b c d )
$ init_depth=3
$ traverse $init_depth "${dir[@]}" 
```

# c++ - 在套接字上设置 IO

> ID：12503962
> 
> 赞同：0
> 
> 时间：2012-09-19T22:48:28.710
> 
> 标签：c++, io, winsock, iocp

我有一个 C++ 程序，我用一个套接字连接到我的服务器，我需要为套接字设置重叠。执行以下操作不起作用：

**功能**

```
int set_wsa_proxy_client ( proxy_client *node ) {
    WSABUF  wbuf;
    DWORD   bytes, flags;
    int BufLen = 1024;
    wbuf.buf = node->buf;
    wbuf.len = node->len;
    flags = 0;
    int rr = WSARecv ( node->s , &wbuf , 1 , &bytes , &flags , &node->ov , NULL );

    if (rr == FALSE) {
        if (WSAGetLastError() != WSA_IO_PENDING) {
            printf("PostRecv: WSARecv* failed: %d\n", WSAGetLastError());

            if ( WSAGetLastError() == ERROR_SUCCESS ) { // this means it completed right away ...
                //cout << endl << "ERROR_SUCCESS - set_wsa_lobby_client completed" << endl;
                //cout << endl << "BYTES: " << node->len << endl;
                return 0;
            }
            return WSAGetLastError();
        }
    }
    return 0;
} 
```

**扩大**

```
typedef struct OverlappedEx : OVERLAPPED {
int id;
} OverlappedEx; 
```

**proxy_client 结构**

```
struct proxy_client {
    // ... blah blah blah
    SOCKET s;
    OverlappedEx ov;
    // ... blah blah blah
} 
```

**主要的**

```
HANDLE ServerCompletionPort = CreateIoCompletionPort ( INVALID_HANDLE_VALUE , NULL , (ULONG_PTR)NULL , 0 );
if ( ServerCompletionPort == NULL ) { fprintf( stderr , "CreateIoCompletionPort failed: %d\n" , GetLastError() ); return -1; }

proxy_client *new_c = new proxy_client;
memset(&new_c->ov , 0 , sizeof(new_c->ov));
new_c->ov.hEvent = ServerCompletionPort;
new_c->s = (make socket)

// ... Connect and other stuff ...

HANDLE hrc = CreateIoCompletionPort( (HANDLE)new_c->s, new_c->ov.hEvent, (ULONG_PTR)pc,  0 ); // pc is the global struct of proxy_client
if (hrc == NULL)
    fprintf(stderr, "CompletionThread: CreateIoCompletionPort failed: %d\n", GetLastError());

int r = 0;
if ( ( r = set_wsa_proxy_client ( new_c ) ) != 0 ) {
    //
} else {
    //
} 
```

在发送套接字数据（从服务器）之后，当我 GetQueuedCompletionStatus for ServerCompletionPort 时，这似乎不会触发套接字。我想知道如何为套接字设置 IO！感谢您的帮助！:-)

# javascript - 如何将选择的 twitter 引导选项卡包装为一种形式？

> ID：12503966
> 
> 赞同：4
> 
> 时间：2012-09-19T22:49:01.427
> 
> 标签：javascript, forms, jquery-plugins, twitter-bootstrap

我有一个 twitter 引导标签组件。

我希望两个选项卡成为表单的一部分。第三个不是。

所以我想，我只需将两个选项卡包装在一个表单中。

但它不起作用：http: [//jsfiddle.net/gLrr4/1/](http://jsfiddle.net/gLrr4/1/)

基本上，虽然类被应用于正确的元素，但似乎表单正在阻止相应的选项卡改变它们的可见性。

我怎样才能解决这个问题？

演示： http: [//jsfiddle.net/gLrr4/1/](http://jsfiddle.net/gLrr4/1/)
演示代码：

```
<html>
<head>
    <link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" type="text/css"/>
    <script src='http://twitter.github.com/bootstrap/js/bootstrap-tab.js'></script>
</head>
<body>
<div class="alert alert-error">Tab 1 and two are wrapped in a form tag!</div>
<div class='row'>
    <div class="span12">

        <div class="tabbable">
            <ul class="nav nav-tabs">
                <li class="active"><a href="#tab1" data-toggle="tab">#tab1</a></li>
                <li><a href="#tab2" data-toggle="tab">#tab2</a></li>
                <li><a href="#tab3" data-toggle="tab">#tab3</a></li>
            </ul>

            <div class="tab-content">
                <form class="form-vertical">
                    <div class="tab-pane active" id="tab1">
                        <div class="alert alert-info">
                            This is #tab1
                        </div>
                        <div class='form-actions'>
                            <button type='submit' class='btn btn-primary'>Save changes</button>
                            <button id='cancel' class='btn'>Cancel</button>
                        </div>
                    </div>

                    <div class="tab-pane" id="tab2">
                        <div class="alert alert-info">
                            This is #tab2
                        </div>
                        <div class='form-actions'>
                            <button type='submit' class='btn btn-primary'>Save changes</button>
                            <button id='cancel' class='btn'>Cancel</button>
                        </div>
                    </div>
                </form>

                <div class="tab-pane" id="tab3">
                    <div class="alert alert-info">
                        This is #tab3
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

</body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T23:49:54.510

行，

找到了解决方案：

使用一点 Javascript：

```
$('a[data-toggle="tab"]').on('shown', function (e) {
    $(e.target.hash).closest('.tab-content')
        .find('> form > .tab-pane.active:not(' + e.target.hash + '), 
               > .tab-pane.active:not(' + e.target.hash + ')')
        .removeClass('active');
}); 
```

还有一点css：

```
.tab-content > form > .tab-pane,
.pill-content > form > .pill-pane {
    display: none;
}
.tab-content > form > .active,
.pill-content > form > .active {
    display: block;
} 
```

我们现在可以在表单中嵌套选项卡，当然这仅支持表单标签，不支持任何子标签，
我可以通过删除 's 使其支持任何元素，`>`但问题是如果我们有嵌套的选项卡，那将会级联！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T23:45:58.127

是的，答案有点长，但请耐心等待 - 有两个问题需要“修复”才能使其正常工作......

## 第一个问题：前两个标签同时显示。

**原因**：boostrap.css（未缩小）第 4042 和 4047 行仅选择 div 的直接后代：

```
.tab-content > .tab-pane 
```

和

```
.tab-content > .active 
```

**解决**方法：将以下 CSS 添加到单独的 CSS 文件中：

```
.tab-content .tab-pane
{
  display: none;
}

.tab-content .active
{
  display: block;
} 
```

## 第二个问题：第三个选项卡现在总是在单击并选择另一个选项卡后显示。

**原因**：这是因为当 boostrap 从尚未单击的选项卡中清除“活动”类时，它只查找容器的直接后代。在 bootstrap.js 的第 1563 行：

```
var $active = container.find('> .active') 
```

**解决方案**：要解决此问题，您需要将此行更改为：

```
var $active = container.find('.active') 
```

然而，这并不理想。因此，如果您不想更改引导代码，您可以...

*   复制第 1510 行和第 1624 行之间的所有引导选项卡内容
*   将所有出现的 重命名`Tab`为`NewTab`
*   `$.fn.tab`从第 1602 行更改为`$.fn.modifiedTab`或类似
*   `(data = new Tab(this))`从第 1606 行更改为`(data = new NewTab(this))`
*   [按照文档](http://twitter.github.com/bootstrap/javascript.html#tabs)使用它，但`.tab`变成`.modifiedTab`

希望有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T23:27:30.293

我希望这是您正在寻找的，这是链接[http://jsfiddle.net/gLrr4/2/](http://jsfiddle.net/gLrr4/2/)

似乎将表单标签放在 div-tab 内容之外使其工作。

# c - 在 main 中调用函数，它使用 strtok 分隔字符串（指针问题）

> ID：12503967
> 
> 赞同：0
> 
> 时间：2012-09-19T22:49:07.903
> 
> 标签：c, string, pointers, strtok

我正在用 C 语言编写一个程序，其中用户输入一个没有空格的字符串（电话联系信息），但姓氏、名字等信息用逗号分隔。

我想要做的是编写一个函数，其中逗号之间的字符串字段成为一个标记（使用`strtok_r`函数）并分配给一个字符串数组并在程序结束时打印每个标记。

下面的代码是我迄今为止的尝试，但它没有打印出我期望的内容。结果是随机的 ASCII 字符，我猜这是因为我的指针有多糟糕。任何帮助表示赞赏。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
void commaCut(char *input, char *command, char *last, char *first, char *nick, char *detail, char *phone);

int main()
{
char *str, *token, *command;
char *last, *first, *nick, *detail, *phone, *saveptr;

char input[100];
int commaCount = 0;
int j;
str = fgets(input,100,stdin);
commaCut(str, command, last, first, nick, detail, phone);
printf("%s %s %s %s %s %s\n",command,last,first,nick,detail,phone);
exit(0);
}

void commaCut(char *input, char *command, char *last, char *first, char *nick, char *detail, char *phone)
{
  char *token, *saveptr;
  int j;
  int commaCount = 0;
  for (j = 0; ; j++, commaCount++, input = NULL)
  {
    token = strtok_r(input, ",", &saveptr);
    if (token == NULL)
      break;
    if (commaCount == 0)
      command = token;
    if (commaCount == 1)
      last = token;
    if (commaCount == 2)
      first = token;
    if (commaCount == 3)
      nick = token;
    if (commaCount == 4)
      detail = token;
    if (commaCount == 5)
      phone = token;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:59:26.340

问题是函数`first`中修改的指针等是中的指针的*副本*，因此中的指针保持不变且未初始化，并指向任意内存位置。您需要传递这些指针的地址来更改指针的值。`commaCut`*`main``main``main`*

 *将函数更改为

```
void commaCut(char *input, char **command, char **last, char **first, char **nick, char **detail, char **phone)
{
  char *token, *saveptr;
  int j;
  int commaCount = 0;
  for (j = 0; ; j++, commaCount++, input = NULL)
  {
    token = strtok_r(input, ",", &saveptr);
    if (token == NULL)
      break;
    if (commaCount == 0)
      *command = token;
    if (commaCount == 1)
      *last = token;
    if (commaCount == 2)
      *first = token;
    if (commaCount == 3)
      *nick = token;
    if (commaCount == 4)
      *detail = token;
    if (commaCount == 5)
      *phone = token;
 } 
```

并称之为

```
commaCut(str, &command, &last, &first, &nick, &detail, &phone); 
```

在`main`.*

# blackberry - 黑莓消失的图标

> ID：12503970
> 
> 赞同：0
> 
> 时间：2012-09-19T22:49:19.047
> 
> 标签：blackberry, java-me

有谁之前经历过这个吗？

每当我在 9900 设备上安装我的应用程序时，图标似乎很好，但过了一会儿（它随机发生），图标就变成了一个空白问号图标（就像我在构建应用程序时从未添加过图标一样）。我已经在 9700 设备上测试过，看起来还不错，我已经在 9700 上安装了几天，图标没有消失。

我使用带有 Blackberry 插件的 Eclipse Indigo 编写了我的 BlackBerry Java 应用程序，并使用 BlackBerry App Descriptor 编辑器添加了我的图标。我按照通常的步骤添加图标，方法是单击“图标文件”部分中的“添加”，然后在 res/img/icon.png 中浏览我的 PNG 文件。我有一个 64x48 png 文件。我正在使用 Eclipse BB 5.0 插件构建它。

我不知道我做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:51:13.693

我遇到了类似的问题，每当我在我的设备上加载一个项目进行测试（我的模拟器由于某种原因无法工作）时，我的图标都会回到默认图标，而不是使用我自己的图标。我从另一篇文章中看到，如果您刷新 res 下的 img 文件夹，然后将项目加载到您的设备上，它就会出现（虽然这对我不起作用，但它可能适合您）。

我只是通过拔出电池来重置我的设备，然后我的自定义图标就会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T05:29:24.860

似乎这是特定 RIM OS 版本中的错误。要克服这个问题，请像您一样使用带有图标集的应用程序描述符和`set the icon explicitly in your application`.

RIM API 中有一个[HomeScreen](http://tinyurl.com/bq5sxdz)类。使用它并调用它的方法：

```
public static final void updateIcon(Bitmap newIcon) 
```

在您的应用程序启动时再次设置图标。要正确访问项目中包含的图标文件，请查看[这篇文章](https://stackoverflow.com/questions/7022256/blackberry-runtime-error-fridg-could-not-find-img-logo-png/7026039#7026039)。我在那里描述了黑莓如何处理嵌入式文件。

为避免在设置应用程序图标时锁定 UI 事件，请使用`invokeLater()`如下方法：

```
UiApplication.
    getUiApplication().
        invokeLater(
            new Runnable() {
                public void run() {

                    // set app icon here

                                  }
}); 
```

# ios - 我刚刚升级到xcode到4.5，现在无法安装iOS5.1

> ID：12503973
> 
> 赞同：2
> 
> 时间：2012-09-19T22:50:01.767
> 
> 标签：ios, xcode, simulator

我刚刚将我的 xcode 升级到 4.5，但现在当我尝试安装 iOS 5.1 模拟器时，我收到以下错误：

> [我的用户电子邮件] 无法访问 iOS 5.1 模拟器。请联系 Apple 开发人员支持以解决帐户访问问题。

有没有人见过这个错误？我已经能够毫无问题地下载和安装 4.3 和 5.0 模拟器。我也能够在以前版本的 xcode 中使用 5.1 模拟器。我在 OSX 10.7.4 上。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T22:55:54.723

我必须在 developer.apple.com 的会员中心接受新的开发者协议。之后我可以下载旧的模拟器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:46:14.547

我存档了之前的 4.4.1 版本，其中有 iPhoneSimulator5.0.sdk 和 iPhoneSimulator5.1.sdk（Xcode 显示内容：Contents/Developer/Platforms/）

当 XCode 4.5 安装结束时，我将这 2 个之前的 sdk 转移到 4.5 对应的文件夹中.. 然后我可以删除（或保留）存档..

在 XCode iOS 模拟器中，我现在拥有所有 3 个 sdk ...等等，无需支付开发费用，如果您想访问 FUTURE 版本的预览，这很好...

# wpf - 如何在 wpf 中添加自定义可忽略属性

> ID：12503974
> 
> 赞同：4
> 
> 时间：2012-09-19T22:50:08.293
> 
> 标签：wpf, silverlight

我想用自定义属性标记任何控件。例如像“过时”。

以及我希望 microsoft visual studio 和 blend 忽略此属性的其他要求！

我注意到混合使用`mc:Ignorable="d"`并添加`d:DesignerWidth`属性。

如何使用自定义属性标记我的控件？而且我需要确保如果 dll 缺少 Visual Studio 和 Blend 将忽略此属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:26:31.397

您的请求的第一部分可以通过使用依赖属性或附加属性来完成。

请参阅以下示例代码：

```
public static readonly DependencyProperty ObsoleteAttached = DependencyProperty.RegisterAttached(
  "ObsoleteAttached", typeof(Boolean), typeof(UserControl1), new UIPropertyMetadata(false)
);

public static Boolean GetObsoleteAttached(DependencyObject obj)
{
    return (Boolean)obj.GetValue(ObsoleteAttached);
}
public static void SetObsoleteAttached(DependencyObject obj, Boolean value)
{
    obj.SetValue(ObsoleteAttached, value);
}

public Boolean Obsolete
{
    get { return (Boolean)this.GetValue(ObsoleteProperty); }
    set
    {
        this.SetValue(ObsoleteProperty, value);
    }
}
public static readonly DependencyProperty ObsoleteProperty = DependencyProperty.Register(
  "Obsolete", typeof(Boolean), typeof(UserControl1), new PropertyMetadata(false)); 
```

您的第二部分需要更多说明，例如为什么您希望 Visual Studio 或 Blend 忽略此属性？此外，'如果 dll 缺少 Visual Studio 和 Blend 将忽略此属性'是什么意思？为了改进这个答案，我需要您提供更多细节，否则它仍然主要是猜测。

[您可以在此处](http://sdrv.ms/RNzHXF)下载完整的源代码。该应用程序允许您选择不同的图像资源，但是，它是为了展示“请求”的目的。

* * *

进一步参考：

*   [附加属性概述](http://msdn.microsoft.com/en-us/library/ms749011.aspx)
*   [依赖属性概述](http://msdn.microsoft.com/en-us/library/ms752914.aspx)
*   [附加属性在 WPF 中究竟是如何工作的？](https://stackoverflow.com/questions/1173494/how-exactly-do-attached-properties-work-in-wpf)

# .net - 如何在 Visual Studio 2012 中编辑 SSRS 2008R2 报告？

> ID：12503976
> 
> 赞同：22
> 
> 时间：2012-09-19T22:50:15.337
> 
> 标签：.net, ssrs-2008, reporting-services

我是一名能够在 Visual Studio 2008 中编辑/更新报告的报告作者（我们使用 SSRS2008R2）。我刚刚安装了 Visual Studio 2012，当我去转换我的报告项目时它不起作用，因为我似乎缺少一个组件。

本质上 - 项目转换，但在解决方案资源管理器中，我在我的项目下看到消息“未安装应用程序”。

除了 Visual Studio 2012 之外，我还需要安装什么才能像在 Visual Studio 2008 中一样在可视化设计器中编辑 rdl 文件？

我安装了 Visual Studio 2012 Premium + Expression Blend。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-19T20:07:26.600

SSRS 开发功能于 2013 年 3 月可用于[Visual Studio 2012](http://visualstudiomagazine.com/blogs/data-driver/2013/03/bids-templates-added-to-visual-studio-2012.aspx)。

[SSRS开发所需](http://msdn.microsoft.com/en-us/data/hh297027)的组件如下：

*   [下载适用于 Visual Studio 2012 的 SSDT](http://go.microsoft.com/fwlink/?LinkID=274984)
*   [下载适用于 Visual Studio 2012 的 SSDT-BI](http://www.microsoft.com/en-us/download/details.aspx?id=36843)
*   [下载数据层应用程序框架（2013 年 3 月）](http://www.microsoft.com/en-us/download/details.aspx?id=36842)

# asp.net - ASP.NET 下拉列表 selectedindex 更改触发以进行编程选择更改

> ID：12503977
> 
> 赞同：1
> 
> 时间：2012-09-19T22:50:15.973
> 
> 标签：asp.net, drop-down-menu, selectedindexchanged

我有带有动态下拉控件的 asp.net 页面，我只需要`selectedIndexchanged`为用户选择触发事件。

目前，`selectedIndexchanged`事件正在为每个编程选择更改触发。

有人可以建议如何`selectedIndexchanged`仅在“用户”选择中检查/触发事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:07:50.943

我希望这对你有用

```
protected void Page_Load(object sender, System.EventArgs  e){

    DropDownList cbTest = new DropDownList();
    cbTest.ID = "cbot";
    //create an event handler for the SelectedIndexChanged event
    cbTest.SelectedIndexChanged += new EventHandler(cbt_SelectedIndexChanged);        
    cbTest.Items.Add("1");
    cbTest.Items.Add("2");
    cbTest.Items.Add("3");
    //set the AutoPostBack property to sends the data back to the server
    cbTest.AutoPostBack = true;
    this.form1.Controls.Add(cbTest);

}
//handle the selections made by the User
void cbt_SelectedIndexChanged(object sender, EventArgs e)
{
    Response.Write("This works");
} 
```

# php - 未找到存储的 MySQL 函数

> ID：12503980
> 
> 赞同：-2
> 
> 时间：2012-09-19T22:51:04.690
> 
> 标签：php, mysql

当我尝试运行此脚本时出现此错误。我在调用它之前创建了这个函数，所以我不确定它为什么会返回它不存在的事实。

错误：

> FUNCTION db.fn_distance_cosine 不存在[]

此外，相同的脚本在本地运行良好，但在另一台机器上遇到了这个问题。

想法？

谢谢！

```
<?php

$con = mysql_connect("localhost","username","password") or die ('Error connecting to mysql'); //remote
$db_selected = mysql_select_db('db', $con); //remote

if (!$db_selected) {
    die ('Can\'t use selected database : ' . mysql_error());
} 

$lat = $_GET["lat"];
$lon = $_GET["lon"];
$rows = array();

$establishFunction = mysql_query("DROP FUNCTION IF EXISTS fn_distance_cosine;
CREATE FUNCTION fn_distance_cosine (
    latitude_1 DOUBLE,
    longitude_1 DOUBLE,
    latitude_2 DOUBLE,
    longitude_2 DOUBLE
)
RETURNS DOUBLE
DETERMINISTIC
SQL SECURITY INVOKER
RETURN ACOS(
      SIN(RADIANS(latitude_1)) * SIN(RADIANS(latitude_2))
      + COS(RADIANS(latitude_1)) * COS(RADIANS(latitude_2))
      * COS(RADIANS(longitude_2 - longitude_1))
    ) * 3956.547;
");

mysql_query("SET @input_lat :=" . $lat . ";");
mysql_query("SET @input_lon :=" . $lon . ";");

mysql_query("SET @max_latitude := @input_lat + DEGREES(50.0/3956.547);");
mysql_query("SET @min_latitude := @input_lat - DEGREES(50.0/3956.547);");
mysql_query("SET @max_longitude := @input_lon + DEGREES(50.0/3956.547/COS(RADIANS(@input_lat)));");
mysql_query("SET @min_longitude := @input_lon - DEGREES(50.0/3956.547/COS(RADIANS(@input_lat)));");

if($result = mysql_query("SELECT
      *,
      fn_distance_cosine(lat, lon, @input_lat, @input_lon) AS distance_in_miles,
      COUNT(*) AS store_number_count
    FROM stores
    JOIN items_stores
    ON stores.store_number=items_stores.store_number
    WHERE `lat` BETWEEN @min_latitude AND @max_latitude
      AND `lon` BETWEEN @min_longitude AND @max_longitude
    GROUP BY stores.store_code
    HAVING store_code_count > 1
    ORDER BY distance_in_miles
    LIMIT 10;
    ")){  
        while ($r = mysql_fetch_assoc($result)){
        $rows[] = $r;
    }
}else{
    //failed.
    echo (mysql_error ());
}

print json_encode($rows);

mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:59:54.183

我的 db 用户没有存储过程的正确权限。

# c# - C# 在项目中使用类

> ID：12503981
> 
> 赞同：1
> 
> 时间：2012-09-19T22:51:10.217
> 
> 标签：c#, class, project

我已经用单独的文件夹为类组组织了我的项目，但现在为了获得任何方法，我必须引用整个路径，例如：

```
 Classes.Users.UsersClass.Get();
            Classes.Database.ConnectionClass.Test();
            if (!Classes.Database.UsersMethods.Authenticate())
            {
                Classes.Users.UsersClass.LoginFailed();
            } 
```

正如你所看到的，这会在一段时间后变得混乱，所以有没有办法我可以直接调用类？

* * *

/编辑

这是固定版本：

```
 Users.GetWindowsUser();
    Connection.Test();
    if (!UserMethods.Authenticate())
    {
        Users.LoginFailed();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:52:58.207

您可以在 C# 文件的顶部添加[`using`指令：](http://msdn.microsoft.com/en-US/library/sf0df423%28v=vs.110%29.aspx)

```
using Classes.Users;
using Classes.Database; 
```

然后，您可以键入：

```
UserClass.Get();
ConnectionClass.Test(); 
```

话虽如此，我强烈建议不要在每个类上都使用“Class”作为后缀，并且也建议不要使用名为“Classes”的命名空间。C# 中的大多数东西都是类——就命名而言，没有必要为每个类加上后缀。

有关详细信息，请参阅 MSDN 上的[命名空间命名](http://msdn.microsoft.com/en-us/library/893ke618%28v=vs.71%29.aspx)和[类命名](http://msdn.microsoft.com/en-us/library/4xhs4564%28v=vs.71%29.aspx)指南。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T22:54:23.090

将适当的 using 语句添加到文件顶部。例如使用 Classes.Database；

此外，在 VS 2010 中，如果您只键入没有命名空间的类的名称（例如 ConnectionClass），则按 ctrl+。它将为您提供自动添加适当 using 语句的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T23:03:30.710

您可以简单地将 using 指令放在文件顶部，*或者*
如果您不希望类位于单独的命名空间中，请转到类文件并将命名空间更改为项目原始命名空间

```
namespace myProject.SubFolder
{
.......
} 
```

将会

```
namespace myProject
{
.........
} 
```

# facebook - 如何将 facebook apprequests 限制为某些用户？

> ID：12503983
> 
> 赞同：0
> 
> 时间：2012-09-19T22:51:24.890
> 
> 标签：facebook, facebook-ios-sdk

我有一个需要向用户的朋友发送应用请求的*iOS 移动应用程序。*从这里：[https](https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk) ://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk和这里：https [://developers.facebook.com/docs/reference/dialogs/requests/#mfs](https://developers.facebook.com/docs/reference/dialogs/requests/#mfs)看来我可以建议将此应用请求发送给的用户。我正在拨打这样的电话：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                        @"Check out this awesome app", @"message",
                        @"1xxx4,10xxxx0,", @"suggestions",
                        nil];
[self.facebook dialog:@"apprequests"
            andParams:params 
          andDelegate:nil]; 
```

但是，一旦出现多朋友请求对话框，我仍然可以输入朋友的名字，即使它不是“建议”的一部分。我该如何做这个限制？

最终目标是将该列表限制为不是此应用用户的 Facebook 朋友。文档还提到了“过滤器”参数，但我还没有让它起作用。

想法？

# java - 如何检查类类型并查看它是否实现了接口

> ID：12503986
> 
> 赞同：2
> 
> 时间：2012-09-19T22:51:39.977
> 
> 标签：java, oop

我有一个 arrayList 包含许多不同的对象，包括、 、`Log`等`Frog`。我想执行一些仅适用于实现和接口的类类型的操作，。`Turtle``Rock``IAction`

有没有内置在 Java 中的东西可以做到这一点？我的尝试：

```
for(Object o : objectList){
    if(o.getClass instanceof IAction){ // doesnt work
        // doWork
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T22:52:51.040

您检查实例，而不是类：

```
for (Object o : objectList){
    if (o instanceof IAction) { 
        // doWork
    }
} 
```

# php - 使用 PHP 从表单中过滤数据以存储到 mysql 数据库中

> ID：12503994
> 
> 赞同：0
> 
> 时间：2012-09-19T22:52:32.187
> 
> 标签：php, mysql, forms, sql-injection

我知道这里和网络上有很多关于从表单获取数据并将它们安全地存储到数据库中的问题。

我正在运行`magic_quotes_gpc`启用的 PHP 版本 5+。

我已经使用`strip_slashes`并`mysql_real_escape_string`存储了数据，但是似乎没有人给出明确的答案，哪种方法最好。

我有几种类型的数据要收集：纯文本输入、电子邮件输入和包含所见即所得的文本区域。

数据是通过 POST 方法收集的。

我一直在寻找一个安全的答案来让我的心平静下来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:01:38.750

1）不要使用magic_quotes_gpc。

2) 不要使用 strip_slashes

3) 使用准备好的语句

“纯文本”、“电子邮件”和“文本区域”都可能在数据库中作为 TEXT 数据类型（或它的子类型，如 VARCHAR）输入。

# php - 为什么 MySQL 不返回最后插入的 id，它返回 0？

> ID：12503996
> 
> 赞同：0
> 
> 时间：2012-09-19T22:52:36.227
> 
> 标签：php, mysql, database, insert, opencart

我有一个表，它有一个自动递增的主键。每次我在该表中插入一行并用于`mysql_insert_id()`获取为该表插入的最后一个 id 时，它都会返回 0。

还有哪些可能的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T23:41:10.313

使用[OpenCart](http://www.opencart.com/)提供的方法：

```
$this->db->getLastId() 
```

# joomla - 到 Joomla 还是不到 joomla？当你知道如何用 CSS 做梦时，值得吗？

> ID：12503997
> 
> 赞同：0
> 
> 时间：2012-09-19T22:52:36.753
> 
> 标签：joomla, dreamweaver

好的大佬们 我应该考虑 joomla 还是坚持使用硬核编码的 web 开发？

解释：

我基本上是一名熟练掌握 HTML、Flash、Dreamweaver、Javascript 的程序员（虽然还不是专家……但）。

我不打算为客户设计网站，我会定期为自己的项目设计网站。

我见过一些用 joomla 和 wordpress 等完成的非常酷的网页布局。现在我知道这些是内容管理系统，而我的项目（通常，但不总是）不是内容管理系统。

**例如：假设我必须用他们的手机和优惠来为 t-mobile、verizon 或 vodafone 设计网站，而现在我应该从头开始考虑一个完整的设计，还是应该选择一个漂亮的 joomla 模板和修改它，以便用户可以浏览手机、订购手机、按合同购买（我实际上正在开发此类网站的较小版本）**

关键是，是否值得花时间根据您的需要修改 joomla 模板，或者您应该从头开始构建整个网站，因为毕竟，“真正的编码员是硬编码员？？” :) 你们中的任何人对此有所了解都会有很大的帮助！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T00:30:31.380

老实说，我会更关心功能而不是设计。如果您正在寻找类似电子商务网站的东西，那么一定要选择 Joomla 并使用商店扩展，例如 JoomShopping 的 VirtueMart。有了这样的东西，您将需要极端的 PHP 知识，因此可以通过使用 Joomla 和扩展来让生活变得非常简单。然后你可以选择一个你选择的模板来改造一个基本的模板。

建议的话，请哦，请不要使用闪光灯；）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:17:08.517

这取决于你真正需要什么。

多年来我一直在构建由 joomla 驱动的网站，我从未修改或使用现成的模板，但总是根据 PSD（自定义设计）构建它们，而对于 joomla（不像 wordpress 例如）所有你需要构建自定义外观的 joomla 网站是 HTML / CSS 知识，希望是一个好的框架。

# ios - semaphore_wait_trap、GCD 和 CocoaAsyncSocket

> ID：12503998
> 
> 赞同：3
> 
> 时间：2012-09-19T22:52:39.470
> 
> 标签：ios, multithreading, grand-central-dispatch, fmdb, cocoaasyncsocket

我目前正在使用 CocoaAsyncSocket 构建一个应用程序。我连接到 TCP 服务器并读/写一些数据。

我使用创建套接字

```
self.socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()]; 
```

收到数据后，我使用 FMDB 将其保存到数据库中。一切正常，直到我将应用程序发送到后台（使用主页按钮），然后恢复到它。UI 被冻结并且没有响应，调试器显示它正在 semaphore_wait_trap 处等待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:38:50.830

不要将主队列用作 delegateQueue 参数的参数。使用您自己创建的全局并发队列或串行/并行队列之一。

更新：我刚刚查看了 GCDAsyncSocket 的实现，现在意识到委托队列和方法与实际的读/写操作异步触发，这些操作发生在内部队列上，所以我的建议要么无关紧要（取决于你是什么实际上在完成方法中做），或者至少与您遇到的问题无关。[根据iOS App Programming Guide](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)，我认为正在发生的事情是内部套接字正在关闭。以机智：

*   准备好处理基于网络的套接字中的连接故障。当您的应用因多种原因暂停时，系统可能会断开套接字连接。只要您的基于套接字的代码为其他类型的网络故障（例如丢失信号或网络转换）做好准备，就不会导致任何异常问题。当您的应用程序恢复时，如果它在使用套接字时遇到故障，只需重新建立连接。

您正在使用的 GCDAsyncSocket 类具有一些似乎旨在处理此问题的方法，例如 -autoDisconnectOnClosedReadStream，我认为您只需要添加一些代码来处理断开连接/重新建立连接的情况。

# javascript - 如何通过 javascript 单击链接并触发 mousedown/mouseup 事件

> ID：12503999
> 
> 赞同：1
> 
> 时间：2012-09-19T22:52:39.653
> 
> 标签：javascript, events, mouse

我正在开发一个小书签以打开页面中的链接，但它还需要触发 mousedown/mouseup 事件......我制作了小书签以单击并打开链接，但无法触发鼠标事件:( ...

```
javascript:(function(){
        function clickLink(link) {
            if (document.createEvent) {
                var event=document.createEvent("MouseEvents"); 
                event.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
                link.dispatchEvent(event);
            } else if (link.fireEvent) {
                link.fireEvent("onclick");
            }
        } 
        l=document.links;
        for(var i=0;i<l.length;++i) {
                 clickLink(l[i]);
};})(); 
```

请帮忙！... 提前致谢！