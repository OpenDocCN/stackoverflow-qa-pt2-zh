# StackOverflow 问答 14540000-14540999

# php - PHP将带有分号的textarea插入MYSQL

> ID：14540006
> 
> 赞同：0
> 
> 时间：2013-01-26T18:17:17.163
> 
> 标签：php, mysql

我正在用 php 制作一个具有标题和描述区域的表单。当我提交表单并尝试将数据插入 MYSQL 时，我收到一个错误，这似乎是由于标题中的分号造成的。

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以*在第 1 行的“俱乐部”、“设计和开发”、“1”）附近使用正确的语法*

# 询问

```
INSERT INTO Projects (ID, Title, Description, Status) 
        VALUES (0, 'Women's Club', 'Description of Project', '1') 
```

我尝试使用 mysql_real_escape_string() 但我仍然收到此错误。

我需要使用另一种方法来允许将分号插入 mysql 吗？

这是我使用的一些代码。

```
$desc =  mysql_real_escape_string($_POST['desc']);

$q = "INSERT INTO Projects (ID, Title, Description, Status) 
           VALUES (0, '$title', '$desc', '1')"; 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:19:42.940

错误不在于您的`$desc`. 相反，它与您的`$title`.

也添加这一行：

```
$title = mysql_real_escape_string($title); 
```

就在插入查询之前。

**旁注**：不要使用`mysql_*`函数。它们已被弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:20:15.483

您应该使用`mysqli_`or`PDO`绑定参数。`mysql_`函数已被弃用，您的代码易受 SQL 注入攻击。只要确保魔术引号被禁用。

```
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'world');

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}
$stmt = mysqli_prepare($link, "INSERT INTO Projects (ID, Title, Description, Status)  VALUES (0, ?, ?, 1)");
mysqli_stmt_bind_param($stmt, 'ss', $title, $desc);

/* execute prepared statement */
mysqli_stmt_execute($stmt); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T18:21:07.723

你显然是在给*自己*注射。标题也需要转义。

您的代码非常不安全。不要使用`mysql_*`并且不要让您的查询未参数化（它们需要进行清理）！

```
$pdo = new PDO('mysql:host=localhost', $username, $password);
$stmt = $pdo->prepare("INSERT INTO Projects VALUES (null, ?, ?, 1)");
$stmt->execute($title, $desc); 
```

如果`magic_quotes_gpc`启用，`stripslashes`请在 POST 标量值上使用。这不会影响安全性，但如果您不这样做，您的行将有额外的斜线。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-26T18:21:05.603

您必须在特殊的 mysql 字符中添加斜杠。

[http://php.net/manual/en/function.addslashes.php](http://php.net/manual/en/function.addslashes.php)

# javascript - prettyPrint() 不会在页面加载时被调用

> ID：14540009
> 
> 赞同：16
> 
> 时间：2013-01-26T18:17:36.203
> 
> 标签：javascript, blogger, google-code-prettify

我正在尝试在 Blogger 中美化我的代码。我已将 Google JS 和 CSS 文件链接到我的模板。问题是我希望代码在页面加载时得到美化，所以我`prettyPrint();`在模板上添加了页面加载事件。

`<body onload="prettyPrint();">`

此代码不会被执行。但是，如果我在控制台中手动键入 prettyPrint()，我的代码会得到正确的美化。博主模板会阻止手动调用 JS 函数吗？

**编辑**我通过在我需要代码美化的每篇文章中手动调用该函数来使其工作（见下文）。不过，我想知道为什么我不能在模板上做到这一点。

```
<pre class="prettyprint linenums lang-js">
function testCode(){

}
</pre>
// I have to do this in every post :-s
<script type="text/javascript">
prettyPrint();
</script> 
```

**编辑 2**自述[文件](http://google-code-prettify.googlecode.com/svn/trunk/README.html)说我不应该`prettyPrint()`直接用作处理程序，而是将它包装在一个闭包中。所以我添加了这段代码，类似于 README 中的示例，`<head>`但无济于事。

```
<script type='text/javascript'>
window.addEventListener('load', function (event) { prettyPrint() }, false); 
</script> 
```

***或者***

```
<script type='text/javascript'>
document.addEventListener('DOMContentLoaded',function() {
    prettyPrint();
});
</script> 
```

**编辑 3**我的模板 HTML 只是默认的动态视图（经典）模板，上面添加了美化库。

**编辑 4**这是一个演示问题的链接：http: [//testprettyprint.blogspot.com/2013/02/blog-post.html](http://testprettyprint.blogspot.com/2013/02/blog-post.html) - 代码块不会自动美化，但如果您打开 Chrome 的控制台并输入 prettyPrint()代码将正确突出显示。

**编辑 5**我认为这是我的问题而不是博主的原因，因为这个人仍然使用相同的技术美化了他的代码：http: [//errorbuster.blogspot.com/2012/07/prettify-syntax-highlighter-for-blogger.html](http://errorbuster.blogspot.com/2012/07/prettify-syntax-highlighter-for-blogger.html)

**编辑 6**正如 Jeffery To 在他的回答中指出的那样，动态视图使用 AJAX 加载博客内容，因此任何 JS 对文档加载的调用都将在加载实际内容之前执行。因此，对实际博客内容而非文档执行的任何 JavaScript 都是无效的。所以我想现在的问题是如何挂钩 Dynamics View`ajax:complete`事件，如果有这样的事情，但我怀疑有。感谢所有回复的人。我不确定这是否可以算作一个错误，但我会向博主提出问题。

**结论**请阅读 Jeffery To 的回答。他找到了调用函数的事件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-02T07:10:12.660

我相信您的测试页面使用的是 Blogger 的“Ajax 模板”（不确定正式名称是什么），而您发布的另一个链接使用的是经典模板。

如果您重新加载测试页，您首先会在页面中间看到 Blogger 徽标，然后您的内容就会出现。如果您查看测试页源代码，您会看到很多代码，但看不到您的内容。我相信对于布局模板，Blogger 的代码首先运行，然后使用 Ajax 获取您的内容。任何在文档就绪 (DOMContentLoaded) 或窗口加载时运行的 JavaScript 代码都将在您的内容加载到页面之前运行。

我相信如果您向页面[添加一个 HTML/Javascript 小部件](http://www.wikihow.com/Add-a-Widget-to-Blogger)（在您的内容块之后），然后在该小部件中包含一个调用`prettyPrint()`，则每次显示帖子时都应该调用它。

* * *

**更新：**这个模板的正式名称是“动态视图”，动态视图似乎不支持 HTML / JavaScript 小部件。我找不到任何提及可以让您连接到 Blogger 的 JavaScript 的 API，所以我相信答案（至少现在）是不可能添加模板级代码来执行您想要的操作。最实用的方法是在每个帖子中包含一个`script`标签`prettyPrint()`:-(

* * *

**更新 2：**我已经通过 Blogger 的代码进行了跟踪，并且我认为我找到了一个合适的（并且可绑定的）事件。尝试在动态视图代码之后（在`head`元素中，在`<script src='//www.blogblog.com/dynamicviews/...'></script>`标签之后）包含这个：

```
<script>
$(window.blogger.ui()).on('viewitem', function (event, post, element) {
    prettyPrint();
});
</script> 
```

`viewitem`每次用户查看项目时都会触发该事件（在页面的生命周期中可能会发生多次）。参数是项目容器元素的`element`jQuery 对象，所以如果你想节省`prettyPrint()`一点时间，你可以这样做：

```
<script>
$(window.blogger.ui()).on('viewitem', function (event, post, element) {
    element.each(function () {
        // first argument is a callback function
        // second argument is a root element or document to check
        prettyPrint(null, this);
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T17:17:50.373

上面的代码段可能存在一些问题。如果您使用其他 javascript 代码挂钩事件`<body onload="...">`可能会覆盖它。 `Dom.addEventListener`不适用于 Internet Explorer，您需要在`Dom.attachEvent`那里使用。基本上，当我不使用或不能使用 javascript 框架（例如 jquery 进行事件处理）时，我会使用旧代码进行 onload 事件处理：

```
// window.ready
function register_onload(func){
    var oldOnload = window.onload;
    if(typeof(oldOnload) == 'function'){
        window.onload = function(){
            oldOnload();
            func();
        }
    }else{
        window.onload = function(){
            func();
        }
    }
}

// document.ready
function register_onload(func){
    var old_onload = document.onreadystatechange;
    if(typeof old_onload == 'function'){
        document.onreadystatechange = function(){
            old_onload();
            if(document.readyState == 'complete'){
                func();
            }
        }
    }else{
        document.onreadystatechange = function(){
            if(document.readyState == 'complete'){
                func();
            }
        }
    }
} 
```

我附上了两个代码，它们的工作方式略有不同。主要是如果您使用 document.ready( 2nd snippet )，那么当页面加载并创建所有 HTML 元素时，挂钩代码将运行。但是在 document.ready 上，不能保证所有的 javasript 和 css 代码也会被加载，所以如果你想加载所有的代码和脚本，那么你需要 window.ready( 1st snippet )。

对于您的情况，我相信您需要第二个 document.ready 片段，您可以通过以下方式使用它：

```
// copy 2nd snippet here...
register_onload(function(){
    prettyPrint();
}); 
```

另外，我建议您将 javacript 代码放在`/*<![CDATA[*/ ... /*]]>*/`符号之间，这样您的最终代码将如下所示：

```
<script type="text/javascript">/*<![CDATA[*/
// shorter version of the 2nd snippet
function register_onload(f){
    var d=document,o=d.onreadystatechange;
    if(typeof(o)=='function'){
        d.onreadystatechange=function(){o();if(d.readyState=='complete')f();}
    }else{
        d.onreadystatechange=function(){if(d.readyState=='complete')f();}
    }
}
register_onload(function(){
    prettyPrint();
});
/*]]>*/</script> 
```

希望这可以帮助您解决问题。

# php - 在同一页面上插入两个图表

> ID：14540010
> 
> 赞同：0
> 
> 时间：2013-01-26T18:17:46.323
> 
> 标签：php, javascript, morris.js

可以在同一页面上插入两个图表吗？我从数据库中提取数据，然后在页面上绘制图表。这是我用于绘制图形的伪代码，我更改了 id 元素但我只显示了第一个图形，而第二个不起作用。

```
<? $res_app = mysql_query("SELECT ... ") 
...
?>
<div id="graph"></div>
<pre id="code" class="prettyprint linenums">
Morris.Donut({
  element: 'graph',
  data: [
    {value: 70, label: 'foo'},
    {value: 15, label: 'bar'},
    {value: 10, label: 'baz'},
    {value: 5, label: 'A really really long label'}
  ],
  formatter: function (x) { return x + "%"}
});
</pre>

<? $res_app = mysql_query("SELECT ... ") 
...
?>
<div id="graph1"></div>
<pre id="code" class="prettyprint linenums">
Morris.Donut({
  element: 'graph1',
    data: [
      {value: 50, label: 'foo', formatted: 'at least 50%' },
      {value: 25, label: 'bar', formatted: 'approx. 25%' },
      {value: 20, label: 'baz', formatted: 'approx. 20%' },
      {value: 5, label: 'A really really long label', formatted: 'at most 5%' }
    ],
   formatter: function (x, data) { return data.formatted; }
});
</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-19T12:39:12.750

我想出了以下解决方案，以便在一页上呈现多个图表：

```
var $lineChart = $('.line-chart-js');
if($lineChart.length) {
    $lineChart.each(function (index, element) {
        var chartData = JSON.parse($(this).attr('data-chart'));
        new Morris.Line({
            // ID of the element in which to draw the chart.
            element: $(this),
            // Chart data records -- each entry in this array corresponds to a point on
            // the chart.
            data: chartData,
            // The name of the data record attribute that contains x-values.
            xkey: $(this).attr('data-x'),
            // A list of names of data record attributes that contain y-values.
            ykeys: [$(this).attr('data-y')],
            // Labels for the ykeys -- will be displayed when you hover over the
            // chart.
            labels: [$(this).attr('data-label')]
        });
    });
} 
```

HTML 看起来像这样：

```
<div class="line-chart-js" data-x='xkey' data-y='ykey' data-label='label' data-chart='<?php echo json_encode($yourArray); ?>'></div> 
```

这样您就可以重用您的课程，而不必为每个图表编写单独的 javascript。

# python - 用于 json api 的烧瓶 mongoengine

> ID：14540011
> 
> 赞同：2
> 
> 时间：2013-01-26T18:17:52.013
> 
> 标签：python, flask, json, mongoengine

我想使用flask-mongoengine开发一个json api，但是返回json响应似乎有点困难。

这是我的观点的代码：

```
@users.route('/', methods=["GET"])
def index():
    return json_util.dumps(User.objects.first(), default=encode_model) 
```

所有这些返回是这样的：

```
["username", "password", "email", "foods", "id"] 
```

并且不返回对象值。如何以 json 格式返回所有用户的列表，而无需手动构建字典？

我想要实现的是这样的：

```
[
 "this_documents_id" : {
    "username" : "superjhondoe",
    "password" : "12345",
    "email" : "jhon@doe.com",
    "foods" : ["hot dog", "pasta", "banana"]
 },
 ...
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:33:17.880

将其更改为：

```
@users.route('/', methods=["GET"])
def index():
    return json_util.dumps(User._collection_obj.find(User.objects().first())) 
```

根据您使用的版本，在 mongonengine 0.8 中有一个[to_json](https://github.com/MongoEngine/mongoengine/blob/0.8/mongoengine/base/document.py#L279)方法。

# debugging - 如何使用 GNOME 的窥镜？

> ID：14540012
> 
> 赞同：14
> 
> 时间：2013-01-26T18:17:52.243
> 
> 标签：debugging, gnome-shell, gnome-shell-extensions, looking-glass

我想进入 Gnome Shell 的扩展开发，但我似乎无法理解我如何在 Look Glass 中执行一些任务`lg`来实际调试我的东西。

1.  当我输入`global.log("hi");`LG 时，它把我扔回去了`r(...) = undefined`。为什么？
2.  当我想调试无法加载的扩展时，我该怎么做？
    很高兴看到为什么无法加载扩展。
    我试过了，但无论我给它扩展名字符串还是扩展名对象，`Main.ExtensionSystem.loadExtension()`它都会返回。`undefined`
3.  我在哪里可以找到类、对象和成员方法的文档？
    （LG 检查员似乎无法检查功能。）

如果我有这些资源，我至少可以开始为更新的 Gnome 版本更新一些扩展。如果他们能在某个地方得到很好的解释，我不会问这些*简单的*问题，但要获得所有信息似乎真的很难（我已经用谷歌搜索了几个小时）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-07-09T08:15:17.817

1：LookingGlass 基本上是一个 GJS 控制台。它允许您执行和测试 GJS 的行，抓取和操作对象并用于`r(...)`在以下命令中使用结果。你得到的原因`r(...) = undefined`是因为`log(String);`没有返回任何东西，因此结果是`undefined`.

2：要么记录整个`init()`和`enable()`，然后检查它中断的位置，并尝试使用 log 或注释掉代码行来查明断行（尽管罪魁祸首可能在一般日志中定义，在底部的部分中进行了描述）。

3：没有官方文档。他们有一些关于 GNOME Shell 3.4 的过时教程，与 3.6 的解释略有不同，在您使用的库的 C(++) 端有几页（尽管大多数函数、变量和常量使用相同的名称），但是对于您需要经验的任何真实信息，挖掘其他 GNOME 和 shell 扩展代码或一些非官方资源。然而，非官方来源并不总是最新的。

*   [在 RooJS 生成的最新文档](https://www.roojs.com/seed/gir-1.2-gtk-3.0/seed/)，尽管至少事件是关闭的，因为它们用 -（减号）而不是 _（下划线）分隔。
*   [旧的，但最有用的文档](http://mathematicalcoffee.blogspot.com/2012/09/gnome-shell-javascript-source.html)，MathematicalCoffee 有更多有用的东西，比如深入解释的代码，它是一个非常可靠的学习资源。
*   [生成的文档，几乎所有东西都在那里](https://devdocs.baznga.org/)，非常广泛，但有时该网站会离线几天。您可以尝试克隆 git repo 以在本地运行它，但 readme.md 是他们分叉的内容的逐字副本......
*   [用户最近的参考](https://github.com/julio641742/gnome-shell-extension-reference)，虽然这非常广泛，但如果您使用的是旧版本的 GNOME Shell，它并没有多大用处，因为已弃用和旧版本比下一代产品更有可能工作。我建议您查看官方扩展网站并浏览您可以获得的任何有趣的扩展源代码，因为这是您学习任何东西的最佳选择。

通常调试 gnome 可以通过多种方式完成。- 使用该`log()`函数并在命令行中遵循 journalctl，检查 GNOME 或 JS，使用`journalctl -f | grep -i js`（或使用`grep -i gnome`）。无论如何，您都会看到一些警告，但大多数都会提到它们来自哪个扩展名。这很好，适用于所有实现 systemd 的发行版 - 或者记录作为 GNOME 一部分的特定进程，`journalctl /usr/bin/gnome-session -f -o cat`请注意，某些发行版和版本会记录到不同的文件，而旧 GNOME 版本通常会记录到您的显示管理器登录的任何内容。- 使用官方（虽然很棘手）的日志记录方式：[GNOME 进行调试](https://wiki.gnome.org/Projects/GnomeShell/Debugging)。我个人无法让它发挥作用。

# java - Eclipse 没有在 IE 中遇到断点

> ID：14540018
> 
> 赞同：0
> 
> 时间：2013-01-26T18:18:20.457
> 
> 标签：java, eclipse, internet-explorer

我正在尝试调试应用程序引擎项目。当我在 chrome 中测试我的代码时，我的 break 语句命中，我可以在 eclipse 中单步执行我的代码。当我在 IE 中测试同一页面时，break 语句永远不会命中，并且我在没有执行 break 的情况下得到响应。这里发生了什么？

# python - 如何使用 SQLalchemy Core 动态连接多个表？

> ID：14540019
> 
> 赞同：4
> 
> 时间：2013-01-26T18:18:27.570
> 
> 标签：python, sqlalchemy

我有一个父表，其中包含多个子表的主键。子表的数量在运行时可以是任意的。使用 SQLalchemy 核心，如何将多个子表加入到这个父表中？

假设我有具有有效 FK 约束的 sqlalchemy.schema.Table 类的表；我如何构建这个查询？

我试过了；

```
childJoins= [sa.join(parentTable,childTables[0]),sa.join(parentTable,childTables[1])]
# childTables is a list() of Table objects who are guaranteed linked by pk 

qry = sa.select(["*"],from_obj=childJoins) 
```

这使;

```
SELECT * 
FROM 
parentTable JOIN child1 ON child1.P_id = parentTable.C1_Id, 
parentTable JOIN child2  ON child2.P__id = parentTable.C2_Id 
```

所以 parentTable 被列出了两次......

使用 join() 等尝试了更多变体。查看了文档，但我仍然无法得到我想要的；

```
SELECT *
FROM parentTable
JOIN child1 ON parentTable.C1_Id=child1.P_Id
JOIN child2 ON parentTable.C2_Id=child2.P_Id 
...
JOIN childN ON parentTable.CN_Id=childN.P_Id 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T20:45:46.510

简单地链接连接：

```
childJoins = parentTable
for child in childTables:
    childJoins = childJoins.join(child)

query = sa.select(['*'], from_obj=childJoins) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-02T05:36:34.547

我的多表连接解决方​​案，灵感来自上面的 Audrius Kažukauskas 的解决方案，使用 SQLAlchemy 核心：

```
from sqlalchemy.sql.expression import Select, ColumnClause

select = Select(for_update=for_update)
if self.columns:              # a list of ColumnClause objects
    for c in self.columns:
       select.append_column(c)

# table:  sqlalchemy Table type, the primary table to join to
for (join_type,left,right,left_col,right_col) in self.joins:
    isouter = join_type in ('left', 'left_outer', 'outer')
    onclause = (left.left_column == right.right_column)
    # chain the join tables
    table = table.join(right, onclause=onclause, isouter=isouter)

# if no joins, 'select .. from table where ..'
# if has joins, 'select .. from table join .. on .. join .. on .. where ..
select.append_from(table)

if self.where_clauses:
    select.append_whereclause(and_(*self.where_clauses))
... 
```

# android - 将图像添加到列表视图行

> ID：14540026
> 
> 赞同：0
> 
> 时间：2013-01-26T18:18:49.547
> 
> 标签：android, android-listview

以下是我用来向列表视图中的每一行添加图像的片段：

```
while (adapterDeal.getNextImageLink() != null) {
            System.out.println("Inside while loop for images");
            try {
                url = new URL(adapterDeal.getNextImageLink());
                stream = (InputStream) url.getContent();
                drawable = Drawable.createFromStream(stream, "src");
                adapterDeal.setImage(drawable);
                handler.sendEmptyMessage(IMAGE_DOWNLOADED);
            } catch (MalformedURLException e) {
                System.out.println("Inside MalformedURLException"+e);
                packAndSendMessage(e);
            } catch (IOException e) {
                System.out.println("Inside IOException"+e);
                packAndSendMessage(e);
            }
            break;
        } 
```

在处理程序内部，我执行 notifydatasetchanged 以使用图像更新 listview 行。

我遇到的问题是，它只进入 while 循环一次，尽管我在 listview 中有“n”行，并且每行也有一个图像 url。

第一次进入 while 循环后，在 DDMS 中，它显示：

```
01-26 23:32:27.104: I/System.out(1628): Inside while loop for images
01-26 23:32:28.434: D/dalvikvm(1628): GC_FOR_ALLOC freed 45K, 8% free 5901K/6407K, paused 120ms
01-26 23:32:28.453: I/dalvikvm-heap(1628): Grow heap (frag case) to 6.467MB for  640016-byte allocation
01-26 23:32:28.714: D/dalvikvm(1628): GC_CONCURRENT freed 1K, 8% free 6525K/7047K, paused 16ms+12ms 
```

可能是什么原因，它只进入while循环一次。和内存有关吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T21:23:45.927

因为你在循环的底部有一个休息;-)

# css - 如何将多个图像添加到 CSS 标头？

> ID：14540027
> 
> 赞同：0
> 
> 时间：2013-01-26T18:18:53.993
> 
> 标签：css, image, html, header

我试图在我的标题中并排添加 2 个图像，然后我想要我的网站标题 GARY MANN LLC 和那个 Residential Contractor 下方，然后在标题的右侧我想要空间来添加社交按钮/链接。如何仅使用 css 和 html 以最干净的方式划分空间，这是我必须使用的：

HTML：

```
<!DOCTYPE HTML>
<html lang="eng">
<head>
    <meta charset="UTF-8" />
    <title>GARY MANN LLC</title>
    <link rel="stylesheet" href="styles/gmann.css" type="text/css" />
</head>

<body>

<header>
<center>GARY MANN LLC</center>
<center>Residential Contractor</center>
</header>

<nav>
<ul>
  <li><a href="/">Home</a></li>
  <li><a href="/about">About Us</a>
    <ul>
        <li><a href="/crew">Our Crew</a></li>
        <li><a href="/history">History</a></li>
        <li><a href="/vision">Vision</a></li>
    </ul>
  </li>
  <li><a href="/products">Services</a>
    <ul>
        <li><a href="/carpentry">Carpentry</a></li>
        <li><a href="/waterproof">Waterproofing</a></li>
        <li><a href="/concrete">Concrete</a></li>
        <li><a href="/masonry">Masonry</a></li>
        <li><a href="/prop">Property Maintenance</a></li>
        <li><a href="/metal">Metal Construction</a></li>
        <li><a href="/design">Interior Design</a></li>
        <li><a href="/demo">Demo & Salvage</a></li>
    </ul>
  </li>
  <li><a href="/services">Portfolio</a>
  </li>          
  <li><a href="/contact">Contact</a>
    <ul>
        <li><a href="/email">Via Email</a></li>
        <li><a href="/contact_form">Web Form</a></li>
        <li><a href="/pigeon">Carrier Pigeon</a></li>
    </ul>
  </li>
</ul>
</nav>

<div id="wrapper">

    <section id="content">
        <!-- all the content in here -->
    </section>

    <section id="left_side">

    </section>

</div> <!-- end wrapper -->

<footer>
    <div id="footer_center">
        <section id="social_links">
            <h3>Connect With Us</h3>
        </section>

        <section id="site_map">
            <h3>Site Map</h3>
        </section>
    </div>
    <div id="copy">
        <p>Copywright</p>
    </div>
</footer>

</body>
</html> 
```

CSS：

```
/* HEADER */
*  {
margin:0;
padding:0;
}

header {
width:100%;
height:110px;
background-color:#FF6600;
border-bottom:2px solid black;
}
/* END OF HEADER */

/* START NAV MENU */
nav {
background-color:#333333;
height:40px;
width:100%;
float:left;
position: relative;
}

nav ul {
font-family: Sonoma, Arial;
font-size: 20px;
margin: 0;
padding: 0;
list-style: none;
text-align:center;
position: relative;
float: left;
clear: left;
left: 50%;
}

nav ul li {
float: left;
position: relative;
display: block;
right:50%;

}

nav li ul { 
display: none; 
}

nav ul li a {
display: block;
text-decoration: none;
background: #666666;
color: #ffffff;  
padding: 5px 20px 3px 15px;
margin-left: 1px;
white-space: nowrap;
height:30px; /* Width and height of top-level nav items */
width:90px;
text-align:center;
border-right: 3px solid black;
border-left: 3px solid black;
border-top: 1px solid black;

}

nav ul li a:hover { 
background: #999999; 
}

nav li:hover ul {
display: block;
position: absolute;
height:30px;
}

nav li:hover li {
float: none;
font-size: 11px;

}

nav li:hover a { 
background: #534635; 
height:30px; /* Height of lower-level nav items is shorter than main level */
}

nav li:hover li a:hover { 
background: #999999; 
}

nav ul li ul li a {
text-align:left;
}

/* END NAV MENU */

/* WRAPPER */
#wrapper {
    width:100%;
    height:600px;
    background-color:#CCCCCC;
    margin-left:auto;
    margin-right:auto;
    border-left:1px solid black;
    border-right:1px solid black;
}
#content {
width:85%;
height:100%;
float:right;
background-color:#999999;
}
#left_side {
width:15%;
height:100%;
float:left;
background-color:#333333
}

/* END WRAPPER */

/* FOOTER */
footer {
width:100%;
height:170px;
background-color:#e7e7e7;
border-top:1px solid black;
}
#footer_center {
width:900px;
height:145px;
margin-left:auto;
margin-right:auto;
border-bottom:1px dotted #333;
}
#social_links {
width:435px;
height:100%;
float:left;
border-right:1px dotted #333;

}
#site_map {
width:435px;
height:100%;
float:right;
border-left:1px dotted #333;
}
/* END FOOTER */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:26:22.073

您需要添加 2 张图片、一些文本和社交网络按钮。

```
<header>
    <img id="img1" src="" />
    <img id="img2" src="" />
    <div id="text">
        <span id="title">GARY MANN LLC</span>
        <span id="description">Residential Contractor</span>
    </div>
    <div id="social">
    </div>
</header> 
```

CSS：

```
header {
width:100%;
height:110px;
background-color:#FF6600;
border-bottom:2px solid black;
}

#img1
{
   float:left;
   width:100px;
   height:100px;
}
#img2
{
   float:left;
   width:100px;
   height:100px;
   margin-left:5px; //If you want some space between them
}
#text
{
   float:left;
   margin-left:10px;
}
#title
{
   font-weight:20px;
   float:left;
}
#description
{
   font-weight:10px;
   float:left;
   clear:both;
}
#social
{
   float:right;
} 
```

检查这个[http://jsfiddle.net/5KRbh/](http://jsfiddle.net/5KRbh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:32:18.927

有几种方法。如果您无法更改 html，请尝试 :before 选择器。

```
header {
 position:relative;
 background: url(image.gif) no-repeat top left;
 padding-left:200px;

}
header:before {
    content:url(image.gif);
    top: 0;
    left: 100px;
    position: absolute;
    z-index: -1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T18:34:43.653

您可以通过制作课程来实现这一点。

```
.header{
   width:100%;
   height:20%;
   float:left;
   text-align:center
}
.logo{
   width:80%;
   height:100%;
}
   .upperlogo{
   background:url('path of the upper logo') 0 0 no-repeat;
   height:10%;
   width:100%;
}
.lowerlogo{
   background:url('path of the lower logo') 0 0 no-repeat;
   height:10%;
   width:100%;
}
.social-icons{
   width:20%;
   height:100%;
   float:right;
} 
```

在你的`HTML`：

```
<header class="header">
   <div class="logo">
      <div class="upperlogo"></div>
      <div class="lowerlogo"></div>
   </div>
   <div class="social-icon">
   ....
   </div>
</div> 
```

调整`height`&`width`以适合您的图像。通过加载图像`CSS`始终是更优雅的方式。

# java - Swing JTree - 如何使用 Netbeans GUI 进行树单选？

> ID：14540039
> 
> 赞同：1
> 
> 时间：2013-01-26T18:19:59.023
> 
> 标签：java, swing, netbeans, jtree

我正在使用 Netbeans GUI 界面来创建 Swing 组件。

我在面板中添加了一个 JTree。默认情况下，它似乎是多选的。

有人知道如何在 Netbeans 中将其更改为单选吗？我没有看到属性中暴露的任何东西。

完整答案：在构造函数中的“initComponents()”之后，我添加了以下内容：

```
TreeSelectionModel model = jTreeInput.getSelectionModel();
model.setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION); 
```

“jTreeInput”是我的 jTree 的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:23:04.357

最简单的选择是在代码中设置它：

```
myJTree.getSelectionModel().setSelectionMode
                       (TreeSelectionModel.SINGLE_TREE_SELECTION); 
```

在 Netbeans 中，`JTree`有一个`selectionModel`用于此目的的属性，但需要您创建一个派生自的自定义类`TreeSelectionModel`，并将选择模式设置为`SINGLE_TREE_SELECTION`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T18:23:11.087

我不知道如何在 netbeans 中做到这一点，但您也可以编写几行代码：

```
TreeSelectionModel model = yourJTree.getSelectionModel();
model.setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION); 
```

# r - 从有向二元数据创建矩阵

> ID：14540042
> 
> 赞同：0
> 
> 时间：2013-01-26T18:20:07.907
> 
> 标签：r

我有一个看起来像这样的定向二元数据框。

```
 ccode.a ccode.b year  mindist int.a2b
167603     220     570 1976 8.985324       0
624316     781     770 1976 7.914206       0
593896     740     620 1976 9.128673       0
669443     900     660 1976 9.235735       1
323404     434      20 1976 8.764419       0
353101     451     432 1976 5.390160       0
37109       53     700 1976 9.373724       0
624853     790       2 1976 8.949047       0
242472     355      53 1976 9.030233       0
35129       53     350 1976 9.006963       0
481129     600     140 1976 8.377329       0
621802     781     310 1976 8.885368       0
236655     350     600 1976 7.587584       0
192503     290     950 1976 9.636472       1
464722     580      94 1976 9.551535       0
550661     694      42 1976 9.377167       0
585022     712     625 1976 8.586424       0
637007     812       2 1976 8.902645       0
539818     678     572 1976 8.402542       0
690214     950     900 1976 7.859377       1
135804     160     135 1976 6.314121       0
554291     694     811 1976 8.603649       0
496453     620     680 1976 7.565657       0
68160       90     220 1976 9.003781       0
605932     770     482 1976 8.355514       0
509185     640     660 1976 4.873909       0
24928       42     830 1976 9.774045       0
454705     570     666 1976 8.740049       0
92800      100      51 1976 6.631003       1
492025     616     651 1976 7.140152       0
598335     750     663 1976 7.997375       0
485329     615     130 1976 8.951390       0
330093     435     520 1976 8.560956       0
74135       91     570 1976 9.453192       0
465351     580     235 1976 8.989404       1
227129     345     165 1976 9.296795       0
488046     615     696 1976 8.298939       0
381548     483     375 1976 8.325534       0
237750     350     840 1976 9.103709       0
402138     510     265 1976 8.688151       0
372394     475     950 1976 9.798338       0
216445     338     570 1976 8.890926       1
598308     750     660 1976 8.082419       0
613237     775     235 1976 9.100852       0
310790     420      42 1976 8.617836       0
611272     771     696 1976 8.065013       0
183450     235     551 1976 8.739090       0
659939     840     590 1976 8.879307       0
506308     640      70 1976 9.232063       0
188756     290      91 1976 9.120557       1 
```

我想创建一个所有对`ccode.a`和的矩阵`ccode.b`，

```
d.sender <- matrix(0, nrow = 192, ncol = 192, dimnames = list(unique(dyad$ccode.a), unique(dyad$ccode.a))) 
```

然后将`int.a2b`（我必须为一堆变量执行此操作）的值分配给矩阵中的适当单元格。这将在数​​据集中的每一年单独完成。由于数据帧是双向的，因此我还将有一个与我现在尝试创建的发送者矩阵具有相同维度的接收者矩阵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:27:39.337

如果我正确理解你想要什么，这是一种方法：

```
 x <- data.frame(a=(1:3),b=(4:6),val=c(8,3,7))
 library(reshape2)

 acast(x, a~b, value.var="val")
#   4  5  6
#1  8 NA NA
#2 NA  3 NA
#3 NA NA  7 
```

# php - 使用设置提交按钮确认后提交 Jquery 表单

> ID：14540043
> 
> 赞同：2
> 
> 时间：2013-01-26T18:20:08.883
> 
> 标签：php, javascript, jquery

我正在使用 JQuery 和 SimpleModal Confirm Modal Dialog 在上传前显示确认框。表单提交正常，但由于我正在检查 PHP 中的 isset 提交按钮，因此它失败了。我如何使用带有设置提交按钮的 JQuery 提交帖子。这是代码

HTML

```
<form enctype="multipart/form-data" action="#duc" method="post" id="uploadform" >
    <input name="file" type="file" >
    <input name="Submit_upload" type="submit" value="Upload" id="Upload" >
</form> 
```

jQuery

```
jQuery(function ($) {
  $('#Upload').click(function (e) {
    e.preventDefault();
    confirm("Continue to the Upload?", function () {
        $('#uploadform').submit();
    });
  });
}) 
```

PHP

```
if(isset($_POST['Submit_upload']) && $_FILES['file']['name'])
{
    // file uploading process.
} 
```

我认为在确认 JQuery 提交表单之后，实际的提交按钮不会添加到 post 数组中。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:27:11.673

当您通过 提交表单时`.submit`，`type=submit`输入值不会同时发送。有很多不同的方法可以解决/处理这个问题。一是做：

```
<input name="Submit_upload" type="hidden" value="true">
<input type="submit" value="Upload" id="Upload"> 
```

隐藏的输入*将*被发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:40:51.040

我试过你的代码，它工作正常

我只使用一页来使用您的代码。最重要的是，我将您的 PHP 代码和 jquery 代码放在 jquery.in 之后的头部，然后是 html 部分，它工作正常，为什么它不能在您的机器上工作，您可以清理缓存或浏览器吗？这是我的代码

```
<?php
if(isset($_POST['Submit_upload']) && $_FILES['file']['name'])
{
   echo $_POST['Submit_upload'];die;
}
?>
<html>
<head>
<script src="jquery.min.js" type="text/javascript"></script>

<script>
jQuery(function ($) {
$('#Upload').click(function (e) {
e.preventDefault();
confirm("Continue to the Upload?", function () {
    $('#uploadform').submit();
 });
});
})
</script>

</head>
<body>
<form enctype="multipart/form-data" action="#duc" method="post" id="uploadform" >
    <input name="file" type="file" >
    <input name="Submit_upload" type="submit" value="Upload" id="Upload" >
</form>

</body>

</html> 
```

# c - 在 C 中使用 realloc 进行动态内存分配

> ID：14540044
> 
> 赞同：1
> 
> 时间：2013-01-26T18:20:14.333
> 
> 标签：c, memory, dynamic, allocation

我已经阅读了另一个关于使用 realloc 获取指向更大内存地址空间开头的新指针的 SO question，但我无法弄清楚我做错了什么。它打印回溯和内存转储。后来我尝试访问 strhldr 但我认为它甚至没有那么远。

```
char *strhldr = (char *)malloc(strsize);

 int chrctr = 0;
 if(chrctr == strsize - 3){ // when you get close
  strsize = strsize*2; //double size
  char *temp = realloc(strhldr, strsize); //make more room
    if(temp == NULL)
     printf("reallocate failed\n");
    else{
     strhldr = temp;
     free(temp); // removed same issue
    }
} 

// Later attempt to add it to an array
cmdargs[i] =  strhldr; 
```

这都在一个 while 循环中，其中 chrctr 和 strsize 递增

完整代码

```
 int argctr = 64;
  char **cmdargs = (char **) malloc(argctr * sizeof(char*));
  char c = getchar();
  int i = 0;

  while(c != '\n' && c != EOF){ //read through a String of stdin
  int strsize = 32;
  char *strhldr = (char *)malloc(strsize);
  char *strstarthldr = strhldr;

    if(c == ' ')
      c = getchar();
    while(c != ' ' && c != '\n' && c != EOF){

      int chrctr = 0;
     if(chrctr == strsize - 3){ // when you get close
      strsize = strsize*2; //double size
      char *temp = realloc(strhldr, strsize); //make more room
        if(temp == NULL)
         printf("reallocate failed\n");
        else
         strhldr = temp;

    }      //add that word to the array of strings
      strhldr[chrctr] = c;
      chrctr++;
      c = getchar();

    }
    strhldr[charctr] = '\0';
    //strhldr = strstarthldr;
    cmdargs[i] =  strhldr;
    i++;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T18:22:26.577

成功后，如果需要， realloc 将释放其参数。所以删除对 free(temp) 的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:33:51.560

我不太清楚您要做什么，但我相信`free(temp);`会使*strhldr*无效，并且将来对它的读/写访问会给您带来麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T18:42:36.880

第二个问题 - 未设置您的值 charctr（不是 chrctr）。这是您的循环的一个版本。我还没有测试它，但它应该很接近。

```
 if(c == ' ') {
      c = getchar();
  }

  int chrctr = 0;
  while(c != ' ' && c != '\n' && c != EOF){
     if(chrctr == strsize - 3){ // when you get close
        strsize = strsize*2; //double size
        char *temp = realloc(strhldr, strsize); //make more room
        if(temp == NULL) {
           printf("reallocate failed\n");
           break;
        }
        else {
           strhldr = temp;
        }
     } 
     strhldr[chrctr] = c;
     chrctr++;
     c = getchar();
  }
  strhldr[chrctr] = 0; 
```

# ssl - 在 Android 上调试 SSL 连接的明智方法（在应用程序中）

> ID：14540047
> 
> 赞同：0
> 
> 时间：2013-01-26T16:02:45.000
> 
> 标签：ssl, android, proxy

我正在寻找一种明智的方法来测试我的 android 应用程序正在执行的 SSL 连接。我正在运行[charlesproxy](http://www.charlesproxy.com/documentation/using-charles/ssl-certificates/)来调试 iOS 应用程序，但还没有找到让它在 android 上运行的方法。我看到连接尝试在 charles 中弹出，但无法选择它们。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T10:39:56.870

好的，经过一番修修补补，我想出了一个很好的解决方案。但是，它需要有根设备 - 并且仅适用于 Android > 4.0。真正的来源来自[Dan & David](http://danamodio.com/application-security/mobile/mobile-applications-and-proxy-shenanigans/) 如果你有一个 root 设备，请按照以下步骤操作：

1.  设置代理
2.  将您的代理证书复制到设备的 SD 卡
3.  导航到设置 -> 从 SD 卡安装证书
4.  安装[ProxyDroid](https://play.google.com/store/apps/details?id=org.proxydroid&hl=de)（取得了最大的成功）
5.  将 ProxyDroid 配置为指向您的代理 - 您应该已准备就绪！

# asp.net-mvc - 如何告诉 MEF 为每个应用程序的给定类型实例化单个对象？

> ID：14540051
> 
> 赞同：0
> 
> 时间：2013-01-26T18:21:06.427
> 
> 标签：asp.net-mvc, dependency-injection, singleton, mef, repository-pattern

假设我有一个名为 FooController 的类，其中我有一个名为 Bar 的 IBar 类型（接口）的属性。我需要通过 MEF 初始化 Bar。但是，我需要 MEF 在应用程序期间只创建一个 IBar 类型的实例（尽管由于多个请求而多次调用来初始化它）并使其同时可用于所有请求。请注意，可以假定 IBar 实现是线程安全的。

IE

```
public interface IBar
{
    string Method();
}

[Export(typeof(IBar))]
public class MyBar: IBar
{
    public string dateTimeCreated;

    public MyBar()
    {
        System.Threading.Thread.Sleep(1000);
        dateTimeCreated = DateTime.Now.ToLongTimeString() + " ";
    }

    public string Method()
    {
        return dateTimeCreated;
    }
}

public class FooController : ApiController
{
    [Import(typeof(IBar), RequiredCreationPolicy = CreationPolicy.Shared)]
    public IBar Bar { get; set; }

    public FooController()
    {
        //Assume CompositionContainer.ComposeParts call here
    }

    public string Get()
    {            
        return Bar.Method();
    }
} 
```

问题是每次我在 FooController 上调用 Get() 时，返回的时间值都会发生变化。这意味着每次调用都会重新实例化 MyBar 对象。我基本上需要它返回相同的值，这意味着我需要告诉 MEF 在我的应用程序中只创建一个 IBar 实例，尽管有多个请求。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:13:45.350

您需要在导出中指定`PartCreationPolicy`属性。`MyBar`像这样：

```
[Export(typeof(IBar))]
[PartCreationPolicy(CreationPolicy.Shared)]
public class MyBar : IBar
{
    // ...
} 
```

这也意味着您不需要在导入时指定创建策略：

```
[Import]
public IBar Bar { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:40:04.407

MEF 的 ASP.NET MVC 集成将每个 HTTP 请求解释为单个实例`CreationPolicy.Any`。`CreationPolicy.Shared`您需要将该`ApplicationShared`属性应用于部件以在 HTTP 请求之间共享它。

更新：

`ApplicationSharedAttribute`可以在程序集中找到`System.ComponentModel.Composition.Web.Mvc`。不幸的是，这并没有随 Framework 4.5 一起发布。可以在*lib*文件夹中的[Using MEF with ASP.NET MVC 3 示例代码](http://mef.codeplex.com/releases/view/76703)示例中找到它。缺点是您必须参考找到它的组合程序集，而不是最新的样本。

 *如果您不想这样做，请从这个非常简单的方法开始：

1.  `CompositionContainer`在您的`MvcApplication`班级中添加 a作为`public`属性。
2.  在`MvcApplication`构造函数上创建容器并添加一些目录。
3.  在控制器上从 HttpContext 获取应用程序并使用`GetExport`//的方法之一`GetExportedValue`。无需调用容器。`GetExportedValues``CompositionContainer``ComposeParts`

还有很多其他更复杂的方法，但这应该可以帮助您入门。*

# android - 将字符添加到json android

> ID：14540056
> 
> 赞同：1
> 
> 时间：2013-01-26T18:21:18.967
> 
> 标签：android

我有以下问题。我必须发送以下 json  

```
tosend = {"tn": 37537.6015625,
"d":
{"fa": 12, "nt": 37537.6015625, "ca": 1, "a": 4692.2001953125, "p": 4692.2001953125, "a": 1116861},
"tb": -27182.3984375}. 
```

为此，我使用了 json.put () 方法，然后使用了 json.acummulate ("d", JsonObject)。

尽我所能给我以下结果  

```
 tosend = {"tn": 37537.6015625,
"d":
[{"Fa": 12, "nt": 37537.6015625, "ca": 1, "a": 4692.2001953125, "p": 4692.2001953125, "a": 1116861}
], "Tb": -27182.3984375}. 
```

当我添加两个数据fuciona“[”。我需要以这种方式发送它，因为我无法更改服务器上的脚本。

我曾经使用 json.append。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:34:46.670

创建当前 jsonObject 为：

```
//Create main json object
JSONObject json = new JSONObject();

//Create d JSONArray
JSONArray dJsonarray = new JSONArray();

// Create JSONObject
JSONObject djson = new JSONObject();
// put value inside d json object
dJson.put("fa", "12");
dJson.put("nt", "37537.6015625");
dJson.put("ca", "1");
dJson.put("a", "4692.2001953125");
dJson.put("p", "4692.2001953125");
dJson.put("a", "1116861");

// put JSONObject to json Array
dJsonarray.put(dJson);    

//put tn key-value in json object
json.put("tn","37537.6015625");
//put d json object name-value in json object
json.put("d",dJsonarray); 
```

并且无需调用[JSONObject。累积](http://developer.android.com/reference/org/json/JSONObject.html#accumulate%28java.lang.String,%20java.lang.Object%29)，因为此方法*将值附加到已映射到 name 的数组中* 。因为您要发送到服务器的主要 json 字符串只有 jsonObject

# c# - 从文件中解析 JSON 需要很多时间

> ID：14540057
> 
> 赞同：0
> 
> 时间：2013-01-26T18:21:24.543
> 
> 标签：c#, json, performance, json.net, windows-phone-8

我有以下代码从本地文件夹加载一个带有 JSON 的文件，然后解析它：

```
async public static void TryLoad(Callback Ok, Action Fail, string key, int offset)
{
    try
    {
        var now = DateTime.Now;
        ItemsCache cacheItem;
        var folder = ApplicationData.Current.LocalFolder;
        var stream = await folder.OpenStreamForReadAsync(key);
        using (stream)
        {
            var result = await new StreamReader(stream).ReadToEndAsync();
            Debug.WriteLine("Raw data loaded: " + (DateTime.Now - now).TotalMilliseconds);

            cacheItem = JsonConvert.DeserializeObject<ItemsCache>(result);
            Debug.WriteLine("Json has been parsed: " + (DateTime.Now - now).TotalMilliseconds);

            stream.Close();
        }

        bool isOK = cacheItem.IsValid(offset);
        if (isOK) Ok(cacheItem.Data); else Fail();
    }
    catch (Exception)
    {
        Fail();
    }
} 
```

而`ItemsCache`它本身：

```
public class ItemsCache
{
    public string Stamp { get; set; }
    public JToken Data { get; set; }
    public bool IsValid(int ofs)
    {
        DateTime moment = DateTime.Parse(Stamp);
        return (DateTime.Now - moment).TotalSeconds < ofs;
    }
} 
```

连续两次加载数据后的输出：

```
Raw data loaded: 356,7372
Json has been parsed: 855,588
Raw data loaded: 1269,6079
Json has been parsed: 1300,8621 
```

JSON：

```
{"Stamp":"26.01.2013 20:49:26","Data":[{"id":188357911,"user":123145, ... a few more more key-value pairs}, ... the rest of the objects]} 
```

问题是，整个过程大约需要 750 毫秒，其中 150 毫秒用于加载原始数据，600 毫秒用于使用 Newtonsoft JSON 库对其进行解析。数据量本身很小，包含大约 20 个序列化对象，这些对象本质上是一个小的键值对（尽管我发现我可以添加更多数据并且不会对解析时间造成太大影响）。

问题是花这么多时间来加载数据甚至更多时间来解析它是否正常？如果不正常我该怎么办？

# special-characters - 如何在 Imperavi Redactor 中显示特殊字符？

> ID：14540058
> 
> 赞同：2
> 
> 时间：2013-01-26T18:21:25.630
> 
> 标签：special-characters, redactor

我想找到一种在 Imperavi 的编辑器中插入特殊字符的简单方法。

在 Windows 中，用户可以使用键盘快捷键 Alt+225 插入希腊字母，例如 ß。

但是有没有办法在 Redactor 中有一个更用户友好的功能来插入这样的字符，也许是通过一个专门的菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:06:25.123

终于找到了一种使用自定义下拉按钮的方法：

```
buttonsCustom: {
            greek: {
                title: 'Special Characters', 
                dropdown: {
                    alpha: {title: '&alpha;',callback: function(obj){obj.insertHtml('&alpha;');}},
                    beta: {title: '&beta;',callback: function(obj){obj.insertHtml('&beta;');}}
                }
            } 
        } 
```

# c - 线程停止...在 0x6 处的访问冲突：读取地址 0x6

> ID：14540061
> 
> 赞同：-1
> 
> 时间：2013-01-26T18:21:49.417
> 
> 标签：c

我收到一条错误消息：线程停止......在 0x6 处的访问冲突：读取地址 0x6。但是我的代码没有这样的地址。

```
 #include<stdio.h>
    #include<conio.h>
    void main ()
    {
     int i,j,A[4][5],c=0;
     for(j=0;j<5;j++)
      for(i=0;j<4;i++)
       {
        A[i][j]=c;
        c++;
       }
     for(i=0;i<4;i++)
      {
       for(j=0;j<5;j++)
        printf("%d\t",A[i][j]);
       printf("\n");
      }
     getch();
    } 
```

我被要求逐列而不是逐行输入双数组，我想验证我的方法，所以我尝试将其打印出来但没有运气。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T18:23:35.993

```
 for(i=0;j<4;i++)
          ^^ 
```

这不应该是：

```
 for(i=0;i<4;i++) 
```

`j<4`一旦它第一次进入循环内部，它总是正确的，并且是内存访问冲突的原因。

# java - 填充哈希映射时出现异常

> ID：14540062
> 
> 赞同：0
> 
> 时间：2013-01-26T18:21:51.967
> 
> 标签：java, hashmap

类`Test`是我的单独类，它有两个字段`String`和`Float`类型，我将这个类与列表集合一起使用，最终将作为值填充到`HashMap`.

但是，当我尝试使用键和 List 对象（值）将 Map 填充到地图中时，Java 似乎不接受它，因为它不是有效的语法：

```
ArrayList <Test> list = new ArrayList <Test> ();

Map<Integer, ArrayList <Test>> mp = new HashMap<Integer, ArrayList <Test>>();  

list.add(new Telephone ( 0.9 , "A"));
list.add(new Telephone(5.1 , "A"));

mp.put(0,list.get(0)); // this Does Not work :(, it should work 
```

输出：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
The method put(Integer, ArrayList<Telephone>) in the type  
   Map<Integer,ArrayList<Telephone>> is not applicable for the arguments 
   (int,   Telephone) at Main.main(Main.java:64) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:25:58.303

您的地图接受 Integer 作为键和 Test 的 ArrayList 作为值。但是，您尝试放置 Telephone 对象，而不是 Test 对象的 arrayList。您的 IDE 清楚地说明了这一点。

```
Map<Integer,ArrayList<Telephone>> is not applicable for the arguments 
   (int,   Telephone) at Main.main(Main.java:64) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T18:48:01.823

按照您在上面的评论和问题中提出的要求，我认为您需要以下语法来声明 Map：

```
Map<Integer,Test> mp = new HashMap<Integer,Test>(); 
```

**编辑**

好的，这里是编辑：

```
ArrayList<Test> list = new ArrayList<Test>();
Map<Integer,ArrayList<Test>> mp = new HashMap<Integer,ArrayList<Test>>();
list.add(new Test(0.1,"A"));
list.add(new Test(0.2,"B"));
mp.put(1,list); 
```

如果您再次想在键 1 上放置更多 Test 对象，请执行以下操作：

```
List<Test> value = mp.get(1);
value.add(0.3,"c");
value.add(0.5,"E");

mp.put(1,value); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T18:23:28.397

您映射只能接受`List`对象作为值，而您试图将简单的`Telephone`对象放在那里。

# javascript - JavaScript 自定义方法

> ID：14540064
> 
> 赞同：2
> 
> 时间：2013-01-26T18:21:54.480
> 
> 标签：javascript, javascript-objects

我创建了一个自定义对象并向其添加了一个名为 changeColor 的方法，其中包含一个属性。这个想法是当我将此方法附加到任何 DOM 元素时，元素的所有内容颜色都必须更改。

这是我开始的代码：

```
function CustomColor() {

}

CustomColor.prototype.changeColor = function(color){
   //here what I have to specify.

} 
```

这是非常基本的，但我是 JavaScript 新手。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T22:15:40.483

像这样使用 CustomColor：

```
function CustomColor(element) {
    this.element = element;
}
CustomColor.prototype.changeColor = function (color) {
    this.element.style.color = color;
} 
```

CustomColor 的新实例：

```
var element = new CustomColor(document.body);
element.changeColor('red'); 
```

您还可以扩展实际的 dom 元素，而无需使用任何额外的类，如下所示：

```
Element.prototype.changeColor = function (color) {
    this.style.color = color;
}; 
```

并像这样使用它：

```
document.body.changeColor('red') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T22:05:46.917

我想这就是你要照顾的：

```
var elem = document.getElementById('some_element'),
    CustomColor = function (element) {
        this.htmlElement = element;
    };
CustomColor.prototype.changeColor = function (color) {
    this.htmlElement.style.color = color;
    return;
};
elem.customColor = new CustomColor(elem); 
```

使用附加属性：

```
elem.customColor.changeColor('#00f'); 
```

获取对宿主 HTML 元素的引用的唯一方法是将其作为参数传递给构造函数。但是，`changeColor`您不能引用任何“私有”变量`CustomColor`（包括其参数），因此您需要为所有要在`changeColor`. [MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain)上的更多信息

[jsFiddle](http://jsfiddle.net/46P6Q/)的现场演示。

上面的代码只为特定的 HTML 元素创建自定义属性。不建议为`prototype`DOM 元素创建自定义属性，因为并非所有浏览器都支持这些属性。

# ruby-on-rails-3 - 你如何在 Rails 中路由 [OPTIONS]？

> ID：14540065
> 
> 赞同：17
> 
> 时间：2013-01-26T18:22:04.207
> 
> 标签：ruby-on-rails-3, rest, activerecord, routes

我正在 Rails 中创建 REST 服务。这是我的路线。

```
 resources :users
  match '/users', :controller => 'users', :action => 'options', :constraints => {:method => 'OPTIONS'} 
```

我能够 [GET] 我的用户。我正在尝试更新我的用户，但出现错误：

```
ActionController::RoutingError (No route matches [OPTIONS] "/users/1"): 
```

当我在`rake routes`这里跑步时，我得到的路线是：

```
 users GET    /users(.:format)          users#index
          POST   /users(.:format)          users#create
 new_user GET    /users/new(.:format)      users#new
edit_user GET    /users/:id/edit(.:format) users#edit
     user GET    /users/:id(.:format)      users#show
          PUT    /users/:id(.:format)      users#update
          DELETE /users/:id(.:format)      users#destroy
                 /users(.:format)          users#options {:method=>"OPTIONS"} 
```

有人可以告诉我如何修复我的路线，以便我可以进行任何类型的 REST 调用吗？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-08-26T17:18:52.530

```
match '/users' => "users#options", via: :options 
```

would also be a possible route if placed before the other routes.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-07T01:12:56.450

如果您不想为`/users`和 为您创建两个额外的路线，`/users/id`您可以这样做：

```
match 'users(/:id)' => 'users#options', via: [:options] 
```

在这种情况下，`id`成为可选的，两者都`/users`将`/users/id`响应相同的路由。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T20:48:26.947

我无法路由请求的原因是我`match`没有用户 ID。我添加了这一行：

```
match '/users/:id', :controller => 'users', :action => 'options', :constraints => {:method => 'OPTIONS'} 
```

现在我可以路由我所有的 GET 请求了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-03T07:10:04.277

如果您使用 javascript 的 ajax 调用遇到此问题，您可能会遇到跨站点问题。（例如，您的浏览器当前的 url 是 :`http://a.xx.com`并且 ajax 向 发送请求`http://b.xx.com`），然后 Rails / other-backend-server 将得到这种`OPTIONS`请求。

为避免这种情况，除了更改`ruby`代码外，我建议您执行以下两种解决方案之一：

1.  [使用https://github.com/cyu/rack-cors](https://github.com/cyu/rack-cors)添加 CORS 支持，代码行就可以了。

2.  将所有请求发送到`a.xx.com`，然后更改 Nginx 的配置，将这些请求重定向到`b.xx.com`.

顺便说一句，我不建议您更改`routes.rb`文件以支持 OPTIONS 请求。这会弄乱你的代码。

参考：[AXIOS 请求方法更改为 'OPTIONS' 而不是 'GET'](https://stackoverflow.com/questions/63752007/axios-request-method-changes-to-options-instead-of-get)

# c# - 回发后的模态弹出c#

> ID：14540066
> 
> 赞同：0
> 
> 时间：2013-01-26T18:22:19.087
> 
> 标签：c#, model, popup, controls, autopostback

我有一个要求，例如，

一个带有三个图像按钮的母版页，一旦单击它重定向到适当页面的任何按钮，在该页面（它是请求者表单）中，我已将所有控件放在一个面板控件（id =“MyPanel”）中，一个链接按钮（MyLinkBut​​ton）该面板的外侧和一个模式弹出控件（id = MyModalpopup）作为目标控件id = MyLinkBut​​ton，popupcontrolid = MyPanel。在这个页面加载我做了代码（MyModalpopup.show（））来显示模式弹出窗口中的所有控件。

一切正常，但是，我有下拉菜单，复选框列表等控件，autopostback=true，这些都在更新面板中，对于这些控件，我从后面的代码绑定数据。现在这里的问题是我无法绑定的数据，当这些控件回发时，模式弹出窗口不可见。

我正在使用 C# 和 3.5 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:26:18.443

我要做的是有一个隐藏字段（使用 runat=server），它具有在激活/隐藏模式时设置的真/假值。

然后在回发的客户端页面加载期间，读取该值并适当地隐藏/显示模式。

另一种选择是弄清楚如何使这些控件在没有自动回发的情况下工作（即通过 ajax 填充控件）。

# qt - QWidget::geometry() 与 QWidget::frameGeometry()

> ID：14540075
> 
> 赞同：5
> 
> 时间：2013-01-26T18:23:25.710
> 
> 标签：qt, qt4

尽管[Qt 的文档](http://qt-project.org/doc/qt-4.8/application-windows.html#window-geometry)表明这两个函数是不同的（第一个函数不包括框架），但无论我选择什么小部件——包括我的应用程序的主窗口——`someWidget->frameGeometry().height()`总是返回与`someWidget->geometry.height()`.

我在这里想念什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T18:42:24.130

我认为，您没有给小部件足够的时间来绘制小部件。有一个小例子：

```
#include <QApplication>
#include <QMainWindow>
#include <QDebug>

class MainWindow : public QMainWindow
{
public:
    MainWindow() {
        startTimer(500);
    }

    void timerEvent(QTimerEvent *e) {
        // Here values are different
        qDebug() << geometry().height() << frameGeometry().height();
    }
};

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    MainWindow mainWin;
    mainWin.show();

    // Here values are equals
    qDebug() << mainWin.geometry().height() << mainWin.frameGeometry().height();

    return app.exec();
} 
```

第一个调试输出将为`geometry`and产生相同的值`frameGeometry`，但第二个 (in `timerEvent`) 将产生不同的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:41:22.473

QWidget 类不能有框架。例如，QWidget 没有框架，但 QFrame 有框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-11T18:55:06.463

如果 QWidget 是顶级窗口，那么您可以看到它周围的边框和标题栏。我们称之为框架或装饰框架，frameGeometry() 准确地返回：窗口大小和位置，包括操作系统装饰。另一方面，geometry() 返回 QWidget 内部矩形，可用于其他子控件或绘画。参见[http:// doc.qt.io/qt-4.8/application-windows.html#window-geometry](http://doc.qt.io/qt-4.8/application-windows.html#window-geometry)了解更多详细信息。如果我们的窗口不是无框或全屏的，Toplevel geometry() / frameGeometry() 会有所不同......或者我们正在谈论一些无框x11下的窗口管理器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-28T14:59:55.237

这是一篇旧帖子，但这可以帮助那些寻找相同问题的人。

打电话

```
adjustSize(); 
```

在提示一些几何属性之前

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-24T06:23:05.653

正如用户*伪造*的注释，`frameGeometry()`在窗口创建生命周期的早期可能不包括框架边距。我发现以下代码在某些调用`frameGeometry()`不起作用的情况下有效。

```
QMargins frameMargins;
QWindow *window = widget->windowHandle();
if (window) {
    window->create();
    frameMargins = window->frameMargins();
}

QRect myFrameGeometry = widget->geometry().adjusted( 
        -frameMargins.left(), -frameMargins.top(),
        frameMargins.right(), frameMargins.bottom()); 
```

# javascript - 使用 javascript switch 语句检查数组中的项是否相等

> ID：14540079
> 
> 赞同：0
> 
> 时间：2013-01-26T18:23:35.497
> 
> 标签：javascript, dom

我有一个项目清单。列表中的项目动态变化。我已经设置，当你将鼠标悬停在一个元素上时，它会调用一个函数：`onmouseover="hover(this)"`然后我有一个列表中所有项目的数组`document.getElementById("list").getElementsByTagName("li")`

我将如何编写一个贯穿数组并检查列表项所在位置的 switch 语句？

# java - 使用 Gridbag 布局时的动画。

> ID：14540080
> 
> 赞同：1
> 
> 时间：2013-01-26T18:23:38.757
> 
> 标签：java, multithreading, swing, animation, gridbaglayout

我最近开始使用 Java，想知道是否可以在使用 GridBag 布局的同时制作动画。

这些可能吗？如何？任何教程、帮助等将不胜感激:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T21:16:24.170

为了执行这种性质的任何类型的动画，您将需要某种代理布局管理器。

它需要确定所有组件的当前位置，布局管理器希望它们具有的位置，然后将它们移动到位。

以下示例演示了基本思想。动画引擎的使用非常基础，不包括慢进和慢出基础等功能，而是使用线性方法。

```
public class TestAnimatedLayout {

    public static void main(String[] args) {
        new TestAnimatedLayout();
    }

    public TestAnimatedLayout() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestAnimatedLayoutPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestAnimatedLayoutPane extends JPanel {

        public TestAnimatedLayoutPane() {
            setLayout(new AnimatedLayout(new GridBagLayout()));
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            add(new JLabel("Value:"), gbc);
            gbc.gridx++;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            gbc.weightx = 1;
            add(new JComboBox(), gbc);

            gbc.gridx = 0;
            gbc.gridy++;
            gbc.fill = GridBagConstraints.BOTH;
            gbc.weightx = 1;
            gbc.weighty = 1;
            gbc.gridwidth = 2;
            add(new JScrollPane(new JTextArea()), gbc);

            gbc.gridwidth = 0;
            gbc.gridy++;
            gbc.gridx++;
            gbc.weightx = 0;
            gbc.weighty = 0;
            gbc.fill = GridBagConstraints.NONE;
            gbc.anchor = GridBagConstraints.EAST;
            add(new JButton("Click"), gbc);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

    }

    public class AnimatedLayout implements LayoutManager2 {

        private LayoutManager2 proxy;
        private Map<Component, Rectangle> mapStart;
        private Map<Component, Rectangle> mapTarget;
        private Map<Container, Timer> mapTrips;
        private Map<Container, Animator> mapAnimators;

        public AnimatedLayout(LayoutManager2 proxy) {
            this.proxy = proxy;
            mapTrips = new WeakHashMap<>(5);
            mapAnimators = new WeakHashMap<>(5);
        }

        @Override
        public void addLayoutComponent(String name, Component comp) {
            proxy.addLayoutComponent(name, comp);
        }

        @Override
        public void removeLayoutComponent(Component comp) {
            proxy.removeLayoutComponent(comp);
        }

        @Override
        public Dimension preferredLayoutSize(Container parent) {
            return proxy.preferredLayoutSize(parent);
        }

        @Override
        public Dimension minimumLayoutSize(Container parent) {
            return proxy.minimumLayoutSize(parent);
        }

        @Override
        public void layoutContainer(Container parent) {
            Timer timer = mapTrips.get(parent);
            if (timer == null) {
                System.out.println("...create new trip");
                timer = new Timer(125, new TripAction(parent));
                timer.setRepeats(false);
                timer.setCoalesce(false);
                mapTrips.put(parent, timer);
            }
            System.out.println("trip...");
            timer.restart();
        }

        protected void doLayout(Container parent) {

            System.out.println("doLayout...");

            mapStart = new HashMap<>(parent.getComponentCount());

            for (Component comp : parent.getComponents()) {
                mapStart.put(comp, (Rectangle) comp.getBounds().clone());
            }

            proxy.layoutContainer(parent);

            LayoutConstraints constraints = new LayoutConstraints();
            for (Component comp : parent.getComponents()) {
                Rectangle bounds = comp.getBounds();
                Rectangle startBounds = mapStart.get(comp);
                if (!mapStart.get(comp).equals(bounds)) {
                    comp.setBounds(startBounds);
                    constraints.add(comp, startBounds, bounds);
                }
            }

            System.out.println("Items to layout " + constraints.size());
            if (constraints.size() > 0) {
                Animator animator = mapAnimators.get(parent);
                if (animator == null) {
                    animator = new Animator(parent, constraints);
                    mapAnimators.put(parent, animator);
                } else {
                    animator.setConstraints(constraints);
                }
                animator.restart();
            } else {
                if (mapAnimators.containsKey(parent)) {
                    Animator animator = mapAnimators.get(parent);
                    animator.stop();
                    mapAnimators.remove(parent);
                }
            }

        }

        @Override
        public void addLayoutComponent(Component comp, Object constraints) {
            proxy.addLayoutComponent(comp, constraints);
        }

        @Override
        public Dimension maximumLayoutSize(Container target) {
            return proxy.maximumLayoutSize(target);
        }

        @Override
        public float getLayoutAlignmentX(Container target) {
            return proxy.getLayoutAlignmentX(target);
        }

        @Override
        public float getLayoutAlignmentY(Container target) {
            return proxy.getLayoutAlignmentY(target);
        }

        @Override
        public void invalidateLayout(Container target) {
            proxy.invalidateLayout(target);
        }

        protected class TripAction implements ActionListener {

            private Container container;

            public TripAction(Container container) {
                this.container = container;
            }

            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("...trip");
                mapTrips.remove(container);
                doLayout(container);
            }

        }

    }

    public class LayoutConstraints {

        private List<AnimationBounds> animationBounds;

        public LayoutConstraints() {
            animationBounds = new ArrayList<AnimationBounds>(25);
        }

        public void add(Component comp, Rectangle startBounds, Rectangle targetBounds) {

            add(new AnimationBounds(comp, startBounds, targetBounds));

        }

        public void add(AnimationBounds bounds) {

            animationBounds.add(bounds);

        }

        public int size() {
            return animationBounds.size();
        }

        public AnimationBounds[] getAnimationBounds() {

            return animationBounds.toArray(new AnimationBounds[animationBounds.size()]);

        }

    }

    public class AnimationBounds {

        private Component component;
        private Rectangle startBounds;
        private Rectangle targetBounds;

        public AnimationBounds(Component component, Rectangle startBounds, Rectangle targetBounds) {
            this.component = component;
            this.startBounds = startBounds;
            this.targetBounds = targetBounds;
        }

        public Rectangle getStartBounds() {
            return startBounds;
        }

        public Rectangle getTargetBounds() {
            return targetBounds;
        }

        public Component getComponent() {
            return component;
        }

        public Rectangle getBounds(float progress) {

            return calculateProgress(getStartBounds(), getTargetBounds(), progress);

        }

    }

    public static Rectangle calculateProgress(Rectangle startBounds, Rectangle targetBounds, float progress) {

        Rectangle bounds = new Rectangle();

        if (startBounds != null && targetBounds != null) {

            bounds.setLocation(calculateProgress(startBounds.getLocation(), targetBounds.getLocation(), progress));
            bounds.setSize(calculateProgress(startBounds.getSize(), targetBounds.getSize(), progress));

        }

        return bounds;

    }

    public static Point calculateProgress(Point startPoint, Point targetPoint, float progress) {

        Point point = new Point();

        if (startPoint != null && targetPoint != null) {

            point.x = calculateProgress(startPoint.x, targetPoint.x, progress);
            point.y = calculateProgress(startPoint.y, targetPoint.y, progress);

        }

        return point;

    }

    public static Dimension calculateProgress(Dimension startSize, Dimension targetSize, float progress) {

        Dimension size = new Dimension();

        if (startSize != null && targetSize != null) {

            size.width = calculateProgress(startSize.width, targetSize.width, progress);
            size.height = calculateProgress(startSize.height, targetSize.height, progress);

        }

        return size;

    }

    public static int calculateProgress(int startValue, int endValue, float fraction) {

        int value = 0;
        int distance = endValue - startValue;
        value = (int) ((float) distance * fraction);
        value += startValue;

        return value;

    }

    public class Animator implements ActionListener {

        private Timer timer;
        private LayoutConstraints constraints;
        private int tick;
        private Container parent;

        public Animator(Container parent, LayoutConstraints constraints) {
            setConstraints(constraints);
            timer = new Timer(16, this);
            timer.setRepeats(true);
            timer.setCoalesce(true);
            this.parent = parent;
        }

        private void setConstraints(LayoutConstraints constraints) {
            this.constraints = constraints;
        }

        public void restart() {
            tick = 0;
            timer.restart();
        }

        protected void stop() {
            timer.stop();
            tick = 0;
        }

        @Override
        public void actionPerformed(ActionEvent e) {

            tick += 16;
            float progress = (float)tick / (float)1000;
            if (progress >= 1f) {
                progress = 1f;
                timer.stop();
            }

            for (AnimationBounds ab : constraints.getAnimationBounds()) {
                Rectangle bounds = ab.getBounds(progress);
                Component comp = ab.getComponent();
                comp.setBounds(bounds);
                comp.invalidate();
                comp.repaint();
            }

            parent.repaint();

        }

    }

} 
```

**更新**

你也可以看看[AurelianRibbon/Sliding-Layout](https://github.com/AurelienRibon/sliding-layout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:51:23.973

这是我很久以前刚开始上课时做的程序。我`Java`在不同的选项卡上做了简单的动画`JTabbedPane`（根据需要更改图像/声音文件的路径），希望这会有所帮助：

**更新：**

很抱歉没有在 Swing 中遵循并发。

这是更新的答案：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.ImageIcon;
import javax.swing.JApplet;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class ClassTestHello extends JApplet {
  private static JPanel j1;
  private JLabel jl;
  private JPanel j2;
  private Timer timer;
  private int i = 0;
  private int[] a = new int[10];

  @Override
  public void init() {
    SwingUtilities.invokeLater(new Runnable() {
      public void run() {
        start();
        paint();
      }
    });
  }

  public void paint() {
    jl = new JLabel("hiii");
    j1.add(jl);

    a[0] = 1000;
    a[1] = 800;
    a[2] = 900;
    a[3] = 2000;
    a[4] = 500;

    ActionListener actionListener = new ActionListener() {
      public void actionPerformed(ActionEvent actionEvent) {
        if(i % 2 == 0)
          jl.setText("hiii");
        else
          jl.setText("byee");

        i++;
        if(i > 4)
          i=0;
        timer.setDelay(a[i]);
      }
    };

    timer = new Timer(a[i], actionListener);
    timer.setInitialDelay(0);
    timer.start();
  }

  @Override
  public void start() {
    j1 = new JPanel();
    j2 = new JPanel();

    JTabbedPane jt1 = new JTabbedPane();

    ImageIcon ic = new ImageIcon("e:/guitar.gif");
    JLabel jLabel3 = new JLabel(ic);
    j2.add(jLabel3);

    jt1.add("one", j1);
    jt1.addTab("hii", j2);

    getContentPane().add(jt1);    
  } 
} 
```

# python - Python中的导入错误：多边形

> ID：14540083
> 
> 赞同：0
> 
> 时间：2013-01-26T18:24:21.627
> 
> 标签：python, polygon, importerror

我在 Python 2.7.3 中安装了这个名为 Polygon 的库。但是，每次我导入它时，我都会收到下一条错误消息：

```
Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
  File "Polygon/__init__.py", line 5, in <module>
   from Polygon.cPolygon import *
ImportError: No module named cPolygon 
```

我不知道可能出了什么问题。[而且，我已经尝试在他的个人网页](http://www.j-raedler.de/projects/polygon/)上联系这个原作者。

但他没有回复:(我想知道是否有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:32:48.037

听起来您实际上*并没有*安装它，而是将其复制到您的工作目录中。与往常一样，使用适当的参数[运行`setup.py`install](http://docs.python.org/2/install/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T12:07:51.570

如果您尝试从用于安装 Polygon 的目录中运行 python，则可能会发生此错误。移动到其他目录并重试。

# java - RSS AsyncTask - ArrayAdapter 未定义

> ID：14540093
> 
> 赞同：1
> 
> 时间：2013-01-26T18:25:58.797
> 
> 标签：java, android, rss, android-asynctask, rss-reader

我正在为 android 4.0+ 创建一个 RSS 阅读器应用程序。由于 NetworkOnMainThreadException，我已将阅读器代码放在 AsyncTask 中。该代码几乎可以正常工作，但是一行有错误。这是我的代码：

Java代码：

```
 private class PostTask extends AsyncTask<String, Integer, String> {
   @Override
   protected void onPreExecute() {
   super.onPreExecute();
   }

   @Override
   protected String doInBackground(String... params) {
  String url=params[0];
   headlines = new ArrayList();
   links = new ArrayList();

   //Download and parse xml feed
   headlines = new ArrayList();
   links = new ArrayList();

   try {
    URL url1 = new URL("http://feeds.pcworld.com/pcworld/latestnews");

    XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
    factory.setNamespaceAware(false);
    XmlPullParser xpp = factory.newPullParser();

           // We will get the XML from an input stream
    xpp.setInput(getInputStream(url1), "UTF_8");

           /* We will parse the XML content looking for the "<title>" tag which appears inside the "<item>" tag.
            * However, we should take in consideration that the rss feed name also is enclosed in a "<title>" tag.
            * As we know, every feed begins with these lines: "<channel><title>Feed_Name</title>...."
            * so we should skip the "<title>" tag which is a child of "<channel>" tag,
            * and take in consideration only "<title>" tag which is a child of "<item>"
            *
            * In order to achieve this, we will make use of a boolean variable.
            */
    boolean insideItem = false;

           // Returns the type of current event: START_TAG, END_TAG, etc..
    int eventType = xpp.getEventType();
    while (eventType != XmlPullParser.END_DOCUMENT) {
        if (eventType == XmlPullParser.START_TAG) {

            if (xpp.getName().equalsIgnoreCase("item")) {
                insideItem = true;
            } else if (xpp.getName().equalsIgnoreCase("title")) {
                if (insideItem)
                    headlines.add(xpp.nextText()); //extract the headline
            } else if (xpp.getName().equalsIgnoreCase("link")) {
                if (insideItem)
                    links.add(xpp.nextText()); //extract the link of article
            }
        }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){
            insideItem=false;
        }

        eventType = xpp.next(); //move to next element
    }

   } catch (MalformedURLException e) {
    e.printStackTrace();
   } catch (XmlPullParserException e) {
    e.printStackTrace();
   } catch (IOException e) {
    e.printStackTrace();
   }

  return "Feed parsed!";
   }

   @Override
   protected void onProgressUpdate(Integer... values) {
  super.onProgressUpdate(values);
   }

   @Override
   protected void onPostExecute(String result) {
  super.onPostExecute(result);
   // Binding data
  ArrayAdapter adapter = new ArrayAdapter(this,
          android.R.layout.simple_list_item_1, headlines);
  setListAdapter(adapter);

   }
   } 
```

在此代码段中，我收到一个错误：

```
@Override
protected void onPostExecute(String result) {
super.onPostExecute(result);
// Binding data
ArrayAdapter adapter = new ArrayAdapter(this,
          android.R.layout.simple_list_item_1, headlines);
setListAdapter(adapter);
} 
```

错误：构造函数 ArrayAdapter(MainActivity.PostTask, int, List) 未定义。

日志猫：

```
01-26 20:55:53.811: E/AndroidRuntime(1830): FATAL EXCEPTION: AsyncTask #1
01-26 20:55:53.811: E/AndroidRuntime(1830): java.lang.RuntimeException: An error occured while executing doInBackground()
01-26 20:55:53.811: E/AndroidRuntime(1830):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
01-26 20:55:53.811: E/AndroidRuntime(1830):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-26 20:55:53.811: E/AndroidRuntime(1830):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-26 20:55:53.811: E/AndroidRuntime(1830):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-26 20:55:53.811: E/AndroidRuntime(1830):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-26 20:55:53.811: E/AndroidRuntime(1830):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
01-26 20:55:53.811: E/AndroidRuntime(1830):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-26 20:55:53.811: E/AndroidRuntime(1830):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-26 20:55:53.811: E/AndroidRuntime(1830):     at java.lang.Thread.run(Thread.java:856)
01-26 20:55:53.811: E/AndroidRuntime(1830): Caused by: java.lang.IllegalArgumentException
01-26 20:55:53.811: E/AndroidRuntime(1830):     at org.kxml2.io.KXmlParser.setInput(KXmlParser.java:1615)
01-26 20:55:53.811: E/AndroidRuntime(1830):     at com.mysoftware.mysoftwareos.mobile.MainActivity$PostTask.doInBackground(MainActivity.java:343)
01-26 20:55:53.811: E/AndroidRuntime(1830):     at com.mysoftware.mysoftwareos.mobile.MainActivity$PostTask.doInBackground(MainActivity.java:1)
01-26 20:55:53.811: E/AndroidRuntime(1830):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
01-26 20:55:53.811: E/AndroidRuntime(1830):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-26 20:55:53.811: E/AndroidRuntime(1830):     ... 5 more 
```

有人可以调查我的问题并提出解决方案吗？或者告诉我是否应该做一些不同的事情？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:26:49.187

将其更改为：

```
ArrayAdapter adapter = new ArrayAdapter(MainActivity.this,
      android.R.layout.simple_list_item_1, headlines); 
```

`this`指的是`AsyncTask`，所以你必须明确地引用`MainActivity`'s `this`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:27:30.217

使用 Activity Context 而不是 AsyncTask 在方法内创建 ArrayAdapter `onPostExecute`：

```
ArrayAdapter<String> adapter = 
                      new ArrayAdapter<String>(Your_Current_Activity.this,
                      android.R.layout.simple_list_item_1, headlines);
  setListAdapter(adapter); 
```

**编辑：** 日志发布后也改变

```
xpp.setInput(getInputStream(url1), "UTF_8"); 
```

到

```
xpp.setInput(url1.openConnection().getInputStream(), "UTF_8"); 
```

# javascript - 用于删除所有空格的Javascript正则表达式，除了双引号之间的内容

> ID：14540094
> 
> 赞同：5
> 
> 时间：2013-01-26T18:26:01.847
> 
> 标签：javascript, regex, string, replace

我有一个字符串，我需要去掉所有空格，除了`""`. 这是我用来去除空格的正则表达式。

```
str.replace(/\s/g, ""); 
```

我似乎无法弄清楚如何让它忽略引号之间的空格。例子

```
str = 'Here is my example "leave spaces here", ok im done'
Output = 'Hereismyexample"leave spaces here",okimdone' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T18:28:00.143

```
var output = input.split('"').map(function(v,i){
   return i%2 ? v : v.replace(/\s/g, "");
}).join('"'); 
```

请注意，我重命名了变量，因为我*无法*使用名称以大写开头的变量编写代码，尤其是当它是语言的标准构造函数时。我建议您在有疑问时坚持[这些准则。](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-26T18:47:35.577

另一种方法。这假设在字符串的双引号部分（例如 no `"leave \" space \" here"`）内不允许转义，但可以轻松修改以允许转义。

```
str.replace(/([^"]+)|("[^"]+")/g, function($0, $1, $2) {
    if ($1) {
        return $1.replace(/\s/g, '');
    } else {
        return $2; 
    } 
}); 
```

修改正则表达式以允许`"`在带引号的字符串中转义：

```
/([^"]+)|("(?:[^"\\]|\\.)+")/ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-19T22:30:14.660

Rob，重新提出这个问题，因为它有一个简单的解决方案，只需要一个`replace`电话，而不是两个电话。[（在对正则表达式赏金任务](https://stackoverflow.com/q/23589174)进行一些研究时发现了您的问题。）

正则表达式很短：

```
"[^"]+"|( ) 
```

交替的左侧匹配完整的引号字符串。我们将忽略这些匹配。右侧匹配并捕获第 1 组的空格，我们知道它们是正确的间隔，因为它们与左侧的表达式不匹配。

这是工作代码（参见[演示](http://js.do/code/38310)）：

```
var subject = 'Here is my example "leave spaces here", ok im done';
var regex = /"[^"]+"|( )/g;
replaced = subject.replace(regex, function(m, group1) {
    if (group1 == "" ) return m;
    else return "";
});
document.write(replaced); 
```

**参考**

1.  [除了情况 s1、s2、s3 之外，如何匹配模式](https://stackoverflow.com/q/23589174)
2.  [如何匹配模式，除非...](http://www.rexegg.com/regex-best-trick.html)

# html - CSS Sprites 在博客中不起作用

> ID：14540099
> 
> 赞同：0
> 
> 时间：2013-01-26T18:26:37.927
> 
> 标签：html, css, hover, sprite

我一直试图让我的悬停精灵在博客平台上工作，但只会显示第一张图片。

我的CSS如下：

```
.imagesprite {
    display: block;
    background-image: url(xxx);
    width: 400px;
    height: 400px;
    overflow: hidden;
    background-position: 0 0;
}
.imagesprite:hover {
    width: 400px;
    height: -400px;
    overflow: hidden;
    background-position: 0, -400px;
} 
```

什么都没有发生，然后我的鼠标悬停。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:50:32.373

尼科是正确的。宽度和高度通常不会在悬停时改变。您在 :hover 语句中唯一真正需要的是新的背景位置（不需要逗号）。如果 .imagesprite 是一个 div，你可能也不需要 display: block 或 overflow: hidden 。

```
.imagesprite {
    background-image: url(xxx);
    width: 400px;
    height: 400px;
    background-position: 0 0;
}
.imagesprite:hover {
    background-position: 0 -400px;
} 
```

# css - 如何删除div周围的白色边框

> ID：14540102
> 
> 赞同：7
> 
> 时间：2013-01-26T18:26:58.770
> 
> 标签：css, html

我正在尝试从头开始开发一个网站。这是代码

```
<html>
<head>
</head>
<body >
<div id="top" style="height:200px;background-color:green">
</div>
<div id="middle" style="height:800px;background-color:white">
</div>
<div id="footer" style="height:200px;background-color:green">
</div>

</body>
</html> 
```

问题是 div 标签上方有一个空白区域。`margin: -10px;`我可以使用属性删除空格。但我不喜欢这样处理。有没有办法在css中以体面的方式处理这个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-26T18:28:53.560

`<body style="margin: 0;">`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-26T18:35:50.970

将正文的边距设置为 0；

```
<body style = "margin:0"> 
```

# ios - 在 MKMapView 中隐藏“合法”是否会导致 App Store 被拒绝？

> ID：14540112
> 
> 赞同：11
> 
> 时间：2013-01-26T18:27:50.683
> 
> 标签：ios, app-store, mkmapview

我在一个有点小的正方形中显示一个 MKMapView。它足够小，“法律”文本几乎挡住了一半的地图，所以我想摆脱它。

这是否允许：

```
for (UIView *view in mapView.subviews) {
    if ([NSStringFromClass([view class]) isEqualToString:@"MKAttributionLabel"]) {
        view.hidden = YES;
        break;
    }
} 
```

不确定我是否会因隐藏或使用此方法而冒着被 App Store 拒绝的风险？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:41:01.640

是的，它可能会被拒绝。要么是因为拥有链接是法律要求，要么会检测到您正在使用私有类 ( `MKAttributionLabel`)。

话虽如此，如果他们没有注意到，您可能会在几个版本中侥幸逃脱。

您是否考虑过使用静态图像而不是图像`MKMapView`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:45:32.227

您正在使用未记录的功能/类。由于您的地图功能非常有限，因此您最好使用 google 的静态地图 api，而不是链接到完整的功能框架只是为了显示一个小方块的地图。

# jquery - 可访问的切换导航

> ID：14540113
> 
> 赞同：1
> 
> 时间：2013-01-26T18:27:57.460
> 
> 标签：jquery, css, mobile, navigation

我正在寻找有关我正在尝试创建的可访问切换导航的帮助。“可访问”是指我试图避免使用 jQuery slideUp 和 SlideDown 时默认添加的“display:none”。

我已经知道了：http: [//jsfiddle.net/6KX49/2/](http://jsfiddle.net/6KX49/2/)，这是我由 Chris Coyier 发现的一个糟糕的科学怪人：http: [//jsfiddle.net/chriscoyier/zgtfA/1/](http://jsfiddle.net/chriscoyier/zgtfA/1/) .

这是我的脚本（更多关于 jsfiddle 链接）：

```
var $button = $('.navigation-title a'),
    $accordion = $('.global-nav ul');

$button.click(function () {

    if ($accordion.hasClass('inactive')) {
        $accordion.slideDown(1000, function () {
            $accordion.removeClass('inactive');
        });
    } else {
        $accordion.slideUp(1000, function () {
            $accordion.addClass('inactive').slideDown(0);
        });
    }
}); 
```

它似乎正在工作 - 折叠的导航具有“显示：块”的样式；所以“显示：无”以某种方式被覆盖。说到 jQuery，我绝对是个傻瓜，所以我不能老实说我真的知道它是如何做到的。

我需要帮助的问题是 slideDown 动画不起作用。任何想法为什么会这样？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:36:33.107

*slideDown*有两个问题。第一个是您仅在所有*slideDown*效果完成后才删除*非活动类。*因此，在整个效果期间*导航是不可见的。*

 **```
$accordion.slideDown(1000, function () {
  $accordion.removeClass('inactive'); //Only executed after the slideDown effect being executed.
}); 
```

第二个问题是在菜单处于非活动状态时执行幻灯片效果的“hack”是错误的：

```
$accordion.slideDown(1000, function () { //$accordion.slideUp(0, function () {
  $accordion.removeClass('inactive'); //$accordion.removeClass('inactive').slideDown(1000);
}); 
```

*您可以使用slideToggle*简化此代码：http : [//jsfiddle.net/bpinto/aAQcJ/](http://jsfiddle.net/bpinto/aAQcJ/)它使用*display:none*来隐藏您的*导航*。

*关于slideDown/slideUp*函数需要注意的一件重要事情是 jquery 将添加一个*display:none*样式来控制元素展示。所以，我没有看到 hack 的好处——它使用它的位置来控制元素的外观。

即使，我相信 slideToggle 版本更好，这是您更新的代码：http: [//jsfiddle.net/bpinto/smh8T/](http://jsfiddle.net/bpinto/smh8T/)**

# javascript - 如何在新窗口上打开相同的页面，并与它们交叉 JavaScript？

> ID：14540114
> 
> 赞同：0
> 
> 时间：2013-01-26T18:27:59.050
> 
> 标签：javascript, jquery, dom, window

我知道这是一个不寻常的问题。不，这不是错字。

我希望在新窗口中打开**同一页面。**有了这个新窗口，我想进行跨 javascript 操作。意味着新窗口可以操作旧窗口，反之亦然；从 JavaScript（可以是 jQuery）到完整的 DOM。加同步滚动

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:32:07.143

这里：

```
// you use a regular window.open()
var w = window.open(window.location.href);
// the variable w now contains a reference to the newly opened window.

// from the newly opened window use window.opener : 
window.opener.alert("Called in parent window."); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:03:50.073

行。终于找到了解决我所有头痛的真正答案。

我将解释在同一页面中的父窗口和子窗口之间进行通信的最佳方式是什么。可以针对不同的页面（但来自同一主机）调整此逻辑。

使用：JavaScript + PHP

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
 <!--
 var window_ = null;
 var n = false;  //Variable n

<?php
    if(isset($_GET['n'])) //This will make the n variable go true if 
    //'?n' (without quotes) is found in the URL. Meaning, that the child exists
    {
        print('n = true;');
    }
?>

function openChildWindow()  //function which opens the child window. 
 {
  if (window_ != null) //This will check if the window is opened
  {
   if  ( window_.closed == false ) //if the window is opened, a.k.a is not closed
    window_.close(); // close the window
   window_ = null; // and nullify the variable, so it can be reopened if desired. 
  }

else
{
 window_ = window.open(window.location.href+'?n'); //This is the tricky part. 

/*Assign the window.location.href so it will open a new window with the same page 
BUT assign it the n variable, so the GET function will receive it, and set n to true.
*/

 window_.focus();
}
 // Need to call on a delay to allow
  // the child window to fully load...

 }

function callChildWindowFunction()
 {
  if ( (window_ != null) && (window_.closed == false) )
        {
        window_.shout('bearl');
        }

 }
 // -->

 function shout(val)
 {
     alert(val);
 }
 $(document).ready(function(e) { 
 /*Wait for the document to load, so you can check if the variable n is true,
 which means that **IT IS** the child window and it has been loaded completely. Meaning 
 that you can finally manipulate the child window with the parent document*/
    if(n == true)
 {
    window.opener.callChildWindowFunction(); //Call the parent telling it "I'm ready" 
 } 
});

 </script>

 <input type="button" value="Blear" onClick="openChildWindow();"> 
```

现在，解释代码。

这里的技巧是创建一个“人工开关”，它会告诉浏览器哪个页面是父页面，哪个页面是子页面。

这样做的人是变量***n***。通过为其分配一个错误值，我告诉它是已加载的父级而不是子级。

当子窗口打开时，（请参见 openChildWindow() 函数），它将验证窗口是否已打开，以便根据情况关闭/打开它。

如果窗口打开，它将分配 EXACT URL 和 ?n 变量，这将帮助 PHP 识别它是子窗口。

在打开的页面底部，文档加载完成后，n 为 true，因此它会通过**window.opener**函数调用父级。这将触发一个函数，该函数将触发子函数 (shout(val))。

您也可以使用两个不同的页面来执行此操作。

创建一个页面“A.html”和一个页面“B.html”（不带引号）。

A页面会得到如下代码：

```
<script type="text/javascript">
 <!--
 var window_ = null;
function openChildWindow() 
 {
  if ( (window_ != null))
  {
   if  ( window_.closed == false )
    window_.close();
   window_ = null;
  }

 var windowUrl = 'B.html';

 window_ = window.open(windowUrl);

 window_.focus();
 }

function callChildWindowFunction()
 {
  if ( (window_ != null) && (window_.closed == false) )
        {
        window_.shout('bearl');
        }
}
 // -->
 </script>

 <input type="button" value="Blear" onClick="openChildWindow();"> 
```

B页会得到这个

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
 function shout(val)
 {
     alert(val);
 }
 $(document).ready(function(e) {
 {
    window.opener.callChildWindowFunction(); 
 } 
});

 </script> 
```

请注意，机制是相同的。唯一不需要“人工切换”的事情，因为页面不同。

只需将要创建的页面 B 分配一个 $(document).ready() 函数来验证它是否已完全加载，并通过 window.opener 函数调用父级，以便它可以开始调用子级。

If you've found a better way to do this, then go ahead and show me. setTimeOut, setInterval functions did not work because the code pre-executed before the time was out (Opera). Furthermore, this will assure you that the document was 100% loaded, and the code will not break if the user has slowpoke Internet connection.

# c - 如何获取活动窗口的名称？

> ID：14540118
> 
> 赞同：1
> 
> 时间：2013-01-26T18:28:35.877
> 
> 标签：c, winapi, active-window

我遇到了获取活动窗口名称的问题。

当我使用此代码时：

```
HWND currentWindowHWND = GetForegroundWindow();
char title[100];
GetWindowTextA(currentWindowHWND, title, 100); 
```

我得到类似：“如何获取活动窗口的名称？ - 堆栈溢出 - 谷歌浏览器”。

但是我想获得“谷歌浏览器”，我应该使用哪个 WINAPI 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:33:19.440

在`c`代码中使用以下 winapi 函数：

```
DWORD WINAPI GetModuleFileName(
  _In_opt_  HMODULE hModule,
  _Out_     LPTSTR lpFilename,
  _In_      DWORD nSize
); 
```

或者

```
DWORD WINAPI GetModuleBaseName(
  _In_      HANDLE hProcess,
  _In_opt_  HMODULE hModule,
  _Out_     LPTSTR lpBaseName,
  _In_      DWORD nSize
); 
```

[如何在 C++ 中获取进程名称](https://stackoverflow.com/questions/4570174/how-to-get-process-name-in-c)

* * *

在`c#`：

```
Int32 pid = win32.GetWindowProcessID(hwnd);
Process p = Process.GetProcessById(pid);
string appName = p.ProcessName; 
```

[您应该获得进程名称而不是窗口的标题。](http://facstaff.elon.edu/dhutchings/miscellany/appnamefromhwnd.shtml)

# scheme - 球拍上的钥匙

> ID：14540119
> 
> 赞同：1
> 
> 时间：2013-01-26T18:28:50.527
> 
> 标签：scheme, racket

```
(require 2htdp/image)
(require 2htdp/universe)

(define (render t)
  (text (number->string t) 10 "red"))

(define (ball-image t)
  (place-image (circle 10 "solid" "red")
              150
              150

               (empty-scene 300 300)))

(define (change w a-key)
  (cond
    [(key=? a-key "left")  (ball-image w)]
    [(key=? a-key "right") (ball-image w )]
    [(= (string-length a-key) 1) w] 
    [(key=? a-key "up")    (ball-image w )]
    [(key=? a-key "down")  (ball-image w )]
    [else w]))

(big-bang 100
          (on-tick sub1 )
          (to-draw ball-image)
          (on-key change)) 
```

我试图让我放在中间的红球向上、向下、向左或向右移动。当我按下任何箭头键时，它说它需要一个数字，但给出了一个图像。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:01:04.023

首先你需要了解这个主循环中的世界是如何被处理的：

*   系统采用 big-bang-100 的第一个参数，并将其记住为*WorldState*。
*   然后它将它传递给 on-tick ( **sub1** ) 函数，前提是它存在于每个滴答上。
*   当按键被按下时，它会调用 on-key ( **change** ) 并将*woldState*作为 aw 参数传递到那里。
*   在那里你画一些图片并在按下箭头键的情况下返回它。所以当一个箭头被按下时，它会返回**ball-image**的结果 = **place-image**的结果- *image*
*   系统将其记住为当前的*worldState*，并在下一个滴答声中将新值传递给旧过程：**sub1**。
*   由于该值现在是*image*，因此**sub1**拒绝它。

--

如果要在两个方向上移动球，则必须存储至少两个坐标 (x . y)。所以现在让*WorldState*成为两个数字的对。我们不需要即时功能，因为它本身没有任何变化。此外，我们不需要在键盘处理器中绘制球，所以让我们简单地更改对 ( *worldState* ) 中的相应值，并仅在将球放入新位置的调用 ( **ball-image** ) 期间绘制它 (请记住，x = (car t)、y = (cdr t) 和 (x . y) = (cons xy))：

```
(require 2htdp/image)
(require 2htdp/universe)

(define (ball-image t) ;<-- the t-parameter is our WorldState
  (place-image (circle 10 "solid" "red")
               (car t) ;<-- here now x variable coordinate
               (cdr t) ;<-- here now y variable, instead of 150
               (empty-scene 300 300)))

(define (change w a-key)
  (cond ;w - is the previous worldState, V here we change it
    [(key=? a-key "left")  (cons (sub1 (car w)) (cdr w))];and 
    [(key=? a-key "right") (cons (add1 (car w)) (cdr w))];return 
    [(= (string-length a-key) 1) w] ;<-- this line is excess
    [(key=? a-key "up")    (cons (car w) (sub1 (cdr w)))]
    [(key=? a-key "down")  (cons (car w) (add1 (cdr w)))]
    [else w])) ;<-- If the key of no interest, just
                    return the previous WorldState

(big-bang '(150 . 150) ;<-- initial state
          (to-draw ball-image) ;<-- redraws the world
          (on-key change)) ;<-- process the event of key press 
```

# ios - 我可以为我的应用只使用 2 组背景图片并且仍然支持 iphone 5 吗？

> ID：14540120
> 
> 赞同：0
> 
> 时间：2013-01-26T18:28:51.063
> 
> 标签：ios, objective-c, xcode, cocoa-touch, cocoa

我有 2 个名为 image.png 和 image@2x.png 的文件，大小分别为：320x568 和 640x1136。如果我使用这些文件作为背景，这是否解决了 iphone 5 上的死区？iphone 5会加载@2x图片吗？我知道在 3.5 及更低版本的 iphone 中，背景图片会被剪切，但我并不真正关心它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:53:17.010

我有一个适用于 iPhone 5 和 iPhone 4 的项目。对于我的背景图像，我制作了一个与整个视图大小相同的 uiview。然后我将它连接到我的背景 jpeg 文件。在属性检查器的模式下，我选择了要填充的比例。由于 uiview 位于视图的所有侧面，因此它适用于两者。在任何尺寸的屏幕上看起来都很棒。jpeg 的分辨率很高，但我不需要放置任何@2x。希望这可以帮助你。

# ms-office - 使用不同的程序办公室扩展

> ID：14540123
> 
> 赞同：-3
> 
> 时间：2013-01-26T18:29:08.810
> 
> 标签：ms-office, office-addins

我有一个程序可以访问包含大量文章的数据库。

由于版权原因，我无法直接从我的程序访问数据库，但我有一个不同的程序可以访问它，并且从文章中复制少量内容是合法的。

因为我和我的朋友从这些文章中引用了很多内容，所以我认为如果我们能找到一个 Word 插件，可以从文章中复制所请求的部分，那将会很有用。

是否有任何 Word 插件可以让我使用上面提到的程序，以便我可以从 Word 中访问数据库？

如果可能的话，我想自己编写这个插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:36:33.723

如果没有关于您使用的操作系统和 Word 版本的更多信息，我只能提供一个大致的概述。

1) 在我看来，您想使用 Word Basic 或 Visual Basic 制作 Word 宏。2) 当您想调用 Word 外部的程序时，您需要使用[Microsoft 网页](http://support.microsoft.com/KB/79696)中列出的 shell 命令。

我希望这可以帮助您开始编写宏！

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:26:19.740

[好吧，它是一种解决方法，但是您可以使用自动化工具，该工具可以在给定的 GUI（例如Winrunner](http://www.loadtest.com.au/Technology/winrunner.htm)或[TestQuest](http://www.bsquare.com/products/testquest-automated-testing-platform)）上运行一系列操作来模拟程序的使用，我假设这些工具可以从给定的 xml 或文本文件中获取输入，并且在日志文本文件中记录输出。

如果您在文本文件中有输出，您将能够使用任何编程语言解析文件并获取所需的信息并将其写入 eord 或使用 OLE 对象的任何格式。

# django - 在模板中使用 userena 配置文件

> ID：14540124
> 
> 赞同：0
> 
> 时间：2013-01-26T18:29:15.620
> 
> 标签：django, django-users

有没有办法从模板中的 userena 个人资料中获取个人资料信息？是否有某种变量自动传递？

例如：我可以像这样获取 django 用户变量：

```
{% if user.is_authenticated %}
   Hey {{ user.username }}.
{% endif %} 
```

因为这是随每个请求一起传递的。

是否有一种内置方法可以对 userena 配置文件执行相同操作，而无需为每个视图传递配置文件？理想情况下，我想做某事。像这样：

```
{% if user.is_authenticated %}
    {% if user.profile.likes_cookies %}
       Hey cookiemonster
    {% endif %}
{% endif %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T02:59:26.527

您可以直接在模板中访问用户的个人资料。

假设我已将我的 userena 配置文件定义如下：

```
class MyProfile(UserenaBaseProfile):
    user = models.OneToOneField(User,
                                unique=True,
                                verbose_name=_("user"),
                                related_name="my_profile")
    # Example of adding additional fields below.
    likes_cookies = models.BooleanField(_("likes cookies")) 
```

OneToOneField 上的related_name 与 User 类是这里的重要部分，因为它是您访问 userena 配置文件的方式。

现在在模板中，您将能够访问配置文件，如下所示：

```
{% if user.is_authenticated %}
    {% if user.my_profile.likes_cookies %}
       Hey cookiemonster
    {% endif %}
{% endif %} 
```

# php - 如果非主键列重复，则更新 MySQL 表，否则插入？

> ID：14540126
> 
> 赞同：2
> 
> 时间：2013-01-26T18:29:23.153
> 
> 标签：php, mysql

我有一个带有自动递增主键的 MySQL 表、一个人名列和一些数据。

是否有一个 MySQL 查询，如果该人的姓名是唯一的，我可以在其中插入一个新行，但如果它是一个重复的姓名，那么我会更新该行？

IE

```
ID, Name,        Data
1 , Michael,     x
2 , Stephen,     y
3 , Christopher, z 
```

如果我要使用“qq”数据将“Michael”添加到数据库中，我希望数据库看起来像这样：

```
ID, Name,        Data
1 , Michael,     qq
2 , Stephen,     y
3 , Christopher, z 
```

如果我用“zz”数据添加“John”，数据库将如下所示：

```
ID, Name,        Data
1 , Michael,     x
2 , Stephen,     y
3 , Christopher, z
4 , John,        zz 
```

我知道命令 ON DUPLICATE KEY UPDATE，但我只想在名称相同时更新，而不是在主键相同时更新。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T18:44:22.507

Create a `UNIQUE` index on `Name`. `ON DUPLICATE KEY UPDATE` will then work correctly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:57:00.207

创建一个存储过程并在您的查询代码中简单地调用它

> **程序：**

```
 DROP PROCEDURE IF EXISTS InsUpdTable $$
        CREATE PROCEDURE InsUpdTable
        (
          IN _name VARCHAR(45),
          IN _data VARCHAR(45)
        )
        BEGIN
        if exists (select ID from mytable where name = _name)
        Then
          update mytable set data = _data where name=_name;
        else
          insert into mytable(name, data) values(_name, _data);
        END IF;
        END $$
        DELIMITER ; 
```

> **询问：**

```
call InsUpdTable('John','zzz') 
```

# mysql - MYSQL 标记列冗余

> ID：14540128
> 
> 赞同：1
> 
> 时间：2013-01-26T18:29:29.267
> 
> 标签：mysql, database-design

我有一个这样的标签表：

```
TAG ID | TAG_NAME | IMAGE_ID 

ex: 
1 | FUNNY | 10 <br />
2 | DOG   | 10
3 | SUNNY | 10 
4 | JULY  | 10 
```

我还保留了对图像表中与图像关联的所有标签的引用

```
IMAGE_ID | IMAGE_NAME | IMAGE_TAGS ( varchar(255) utf8_general_ci )     

ex: 
10 | dog.jpg | FUNNY,DOG,SUNNY,JULY 
```

图像表中标签列的原因是，如果检索到图像，也可以检索所有关联的标签，而无需深入到标签表中。但出于某种原因，我开始认为它最好从标签表中获取所有相关标签以减少冗余并确定它与该标签相关联（它可能已被删除或删除但数据不匹配） -
但我也再次感受到它保留标签列可能是有益的。我不知道是应该保留还是删除它。我是不是在想这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T18:35:18.053

是的，`image_tags`应该删除该列。

当您存储逗号分隔的数据时，您将失去数据库引擎附带的所有索引和完整性优势。这就是为什么它被认为是 sql 反模式。

您的标签表可能也不应该有该`image_id`列。考虑使用此架构：

```
tags
---
tag_id *
tag_name

images
---
image_id *
image_name 

imagetags
----
it_image_id *
it_tag_id * 
```

每个图像的标签都保存在 am:n table 中`imagetags`。外键约束将有助于进一步加强数据完整性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T18:32:58.873

您需要重新设计标签表。关系数据库表单要求每列只有一个值。这意味着您应该在每列中只有一个标签。关系数据库就是这样设计的；有效地`JOIN`标记`ON`您的图像。

```
> 形象
编号 | 图像名称
1 条狗.jpg

> 图像标签
image_id | 标签
1 搞笑
1 条狗
1 晴天
```

您不需要标签的代理键，因为您的表`image_id, tag`中有一个主复合键 ( ) `image_tag`。

# php - 调用函数时包含

> ID：14540129
> 
> 赞同：-3
> 
> 时间：2013-01-26T18:29:30.270
> 
> 标签：php

我只想在调用方法时才包含文件。所以，如果我正在做这样的事情：

```
class foo
{
   function printer()
   {
      //Do something
      return $something;
   }

   function some_math($a, $b)
   {
      if($a == $b)
      {
          require_once('path/to/some_class.php');
          $instance = new some_class();
          //Do something with some_class
      }
      else
      {
          //Do another things
      }
      return $some_result;
   }

}

$var = new foo();
$var->some_math(2, 3); 
```

在这种情况下会解析 some_class.php 吗？

我有一些繁重的库，我不想在不需要它们时对它们进行 PHP 解析。

这是一个正常的解决方案吗？如果没有，我该如何解决这个问题？=)（自动加载不起作用，正如我所愿。当我使用它时，自动加载每次都包含文件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:37:18.490

仅当调用 $var->some_math() 并且 $a == $b 时才会加载 some_class.php。但是，就像其他人提到的那样；很容易测试；

将此添加到 some_class.php 的开头；

```
echo 'Hello world'; exit(); 
```

并在不调用 $var->some_math(..); 的情况下运行您的代码 不应出现“Hello world”。

然后修改您的代码并*调用*$var->some_math(1,1); “Hello world”应该出现

# powershell - PowerShell ComboBox 回显填充列表

> ID：14540130
> 
> 赞同：-3
> 
> 时间：2013-01-26T18:29:31.447
> 
> 标签：powershell, combobox

当我的 ComboBox 被填充时，如下代码所示：

```
 ForEach ($Item in $ComboBoxArray) 
{
    $ComboBox.Items.Add($Item)
} 
```

它与控制台上所有填充的项目相呼应。有人会建议如何静音显示此列表！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:41:21.897

您可以通过重定向输出或将结果强制转换为 void 来修复它。例子：

```
$ComboBox.Items.Add($Item) | Out-Null 
```

或者

```
[void]$ComboBox.Items.Add($Item) 
```

# flash - 嵌入的 Youtube 在 Firefox 中不起作用

> ID：14540132
> 
> 赞同：0
> 
> 时间：2013-01-26T18:29:38.423
> 
> 标签：flash, firefox, youtube

这在 IE 中有效，但在 Firefox 中无效？

```
<object  type="application/x-shockwave-flash" id="live_embed_player_flash" data="http://www.youtube.com/embed/videoseries?list=PLF58B42DA866233A8&showinfo=1" bgcolor="#000000" />
                        <param name="allowFullScreen" value="true" />
                        <param name="allowScriptAccess" value="always" />
                        <param name="allowNetworking" value="all" />
                        <param name="movie" value="http://www.youtube.com/embed/videoseries?list=PLF58B42DA866233A8&showinfo=1" />
                    </object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:32:07.097

你的第一行是自动关闭的

```
<object  type="application/x-shockwave-flash" id="live_embed_player_flash" data="http://www.youtube.com/embed/videoseries?list=PLF58B42DA866233A8&showinfo=1" bgcolor="#000000" /> 
```

去掉最后一个斜线，然后重试。

# model - 如何访问父范围的数据？例如：child.$parent.id

> ID：14540133
> 
> 赞同：0
> 
> 时间：2013-01-26T18:29:38.917
> 
> 标签：model, scope, angularjs

我的例子是肤浅的，简而言之，我试图访问我所拥有的当前范围的父数据：

我有一堆任务正在看。我需要注意 task.data 何时更改

```
<div ng-repeat='task in tasks'>
  <input type='checkbox' ng-model='task.data' />
</div> 
```

但我需要根据它的id更新任务，所以我在想像child.$parent这样的东西

```
exp = 'tasks.task[0].data'
$scope.$watch exp, (old_val,new_val,child)=>
  if new_value is 'something'
    id = child.$parent.id
    @MyService.do_stuff id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:37:16.783

在大多数情况下，您不应该尝试访问父范围。就您而言，我不确定您为什么要这样做。如果您只需要对更改做出反应，为什么不这样做：

```
$scope.checkTask = function( id ) {
  MyService.do( id )
}; 
```

```
<div ng-repeat="task in tasks">
  <input type="checkbox" ng-model="task.data" ng-change="checkTask(task.id)" />
</div> 
```

# php - 如何创建动态 WHERE 子句

> ID：14540135
> 
> 赞同：1
> 
> 时间：2013-01-26T18:30:10.877
> 
> 标签：php, mysqli

我正在尝试创建一个动态 WHERE 子句，根据从下拉菜单中选择的选项，它将编译正确的 WHERE 子句。但我不认为我做得对。

首先应该有一个默认的 WHERE 子句，无论从下拉菜单中选择哪个选项，都应该有一个 WHERE 子句检查选中，`SessionId`所以这应该是`SessionId = ?`

然后根据从下拉菜单中选择的选项，它将编译 WHERE 子句中的其他字段。有两个下拉菜单，分别是`Students`和`Questions`。可能的结果是：

`Student selected != 'All'`: 添加`StudentId`= ? 在 WHERE 子句中 `Student selected == 'All'`：删除`StudentId`= ？从 WHERE 子句 `Question selected != 'All'`：添加`QuestionId`= ？在 WHERE 子句中 `Question selected == 'All'`：删除`QuestionId`= ？从 WHERE 子句

我的问题是我该如何设置？

以下是我目前拥有的：

```
 if(isset($_POST['answerSubmit'])) // we have subbmited the third form
        {

    $selectedstudentanswerqry = "
    SELECT
    StudentAlias, StudentForename, StudentSurname, q.SessionId, QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT( DISTINCT Answer
    ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, QuestionMarks, 
    GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, StudentMark
    FROM Student s
    INNER JOIN Student_Answer sa ON (s.StudentId = sa.StudentId)
    INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId)
    INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
    INNER JOIN Answer an ON q.QuestionId = an.QuestionId
    LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
    LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
    ";

    if ($_POST['student'] != 'All'){
    $selectedstudentanswerqry .= "
    WHERE (SessionId = ? AND StudentId = ?)
    ";
    }

    if ($_POST['question'] != 'All'){
    $selectedstudentanswerqry .= "
    WHERE (SessionId = ? AND QuestionId = ?)
    ";
    }

    $selectedstudentanswerqry .= "
    GROUP BY sa.StudentId, q.QuestionId
    ORDER BY StudentAlias, q.SessionId, QuestionNo
    ";

    global $mysqli;
    $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
    if ($_POST['student'] != 'All'){
    // You only need to call bind_param once
    $selectedstudentanswerstmt->bind_param("ii",$_POST["session"],$_POST["student"]);
    }
    if ($_POST['question'] != 'All'){
    // You only need to call bind_param once
    $selectedstudentanswerstmt->bind_param("ii",$_POST["session"],$_POST["question"]);
    }
    // get result and assign variables (prefix with db)
    $selectedstudentanswerstmt->execute(); 
    $selectedstudentanswerstmt->bind_result($detailsStudentAlias,$detailsStudentForename,$detailsStudentSurname,$detailsSessionId,$detailsQuestionNo, 
    $detailsQuestonContent,$detailsOptionType,$detailsNoofAnswers,$detailsAnswer,$detailsReplyType,$detailsQuestionMarks,$detailsStudentAnswer,$detailsResponseTime,
    $detailsMouseClick,$detailsStudentMark);
    $selectedstudentanswerstmt->store_result();
    $selectedstudentanswernum = $selectedstudentanswerstmt->num_rows();     

    }

    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T19:22:10.173

尝试构建 where 数组

```
$where = array();

if ((int) $studentID >0) {
   $where[] = " studentID = '{$studentID}' ";
}
if ((int) $QuestionId  >0) {
   $where[] = " QuestionId  = '{$QuestionId }' ";
} 
```

最后通过 AND 语句 implode $where

```
if (!empty($where)) 
$query['where'] = ' WHERE '. implode(' AND ', $where); 
```

这只是一种方式。我没有调试这段代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:56:21.380

您的案例：

```
- Student selected != 'All' : Add StudentId = ? in WHERE clause 
- Student selected == 'All' : Remove StudentId = ? from WHERE clause 
- Question selected != 'All' : Add QuestionId = ? in WHERE clause 
- Question selected == 'All' : Remove QuestionId = ? from WHERE clause

<?php
$selectedstudentanswerqry = "WHERE SessionId = ? ";
if ($_POST['student'] != 'All'){
 $selectedstudentanswerqry .= " and StudentId = ? ";
}
else{
/*
$selectedstudentanswerqry .= "
//what is condition for if student == all ?
";
*/
}
if ($_POST['question'] != 'All'){
  $selectedstudentanswerqry .= " and QuestionId = ? ";
}
else{
}
?> 
```

考虑到

```
student = 1 then:

if student != All = true
if question != AA = true

student = All
if student != All = false
if question != AA = true

question = 1 
if student != All = true
if question != AA = true

question = All
if student != All = true
if question != AA = false 
```

## 检查你是否想要这个？我想不是。

```
 //case1
    if ($_POST['student'] != 'All'){
      $selectedstudentanswerqry .= "
      WHERE (SessionId = ? AND StudentId = ?)
      ";
    }

    //case2
    if ($_POST['question'] != 'All'){
      //case 2.1
      if ($_POST['student'] != 'All'){
        $selectedstudentanswerqry .= "
         and  (QuestionId = ?)
        ";
      }
      //case 2.2
      else{
        $selectedstudentanswerqry .= "
        WHERE (SessionId = ? AND QuestionId = ?)
        ";
      }

    }
/*
    testing
    1- student != All, question != All
    case1: true
    case1: result: $selectedstudentanswerqry = WHERE (SessionId = ? AND StudentId = ?)
    case2 : true
    case 2.1: true
    case2.1 result:  $selectedstudentanswerqry .= and  (QuestionId = ?)

    2- student != All question = All
    case1: true
    case1: result: $selectedstudentanswerqry = WHERE (SessionId = ? AND StudentId = ?)
    case2: false

    3- student = All question != All
    case1: false
    case2: true
    case2.1: false
    case2.2: true
    case2.2 result: $selectedstudentanswerqry = WHERE (SessionId = ? AND QuestionId = ?)

    4- student = All question = All
    case1: false
    case2: false
*/ 
```

# opengl - 着色器中的纹理重复和钳位

> ID：14540137
> 
> 赞同：1
> 
> 时间：2013-01-26T18:30:43.323
> 
> 标签：opengl, glsl

我有以下片段和顶点着色器，我在其中重复纹理：

```
//Fragment
vec2 texcoordC = gl_TexCoord[0].xy;
texcoordC *= 10.0;
texcoordC.x = mod(texcoordC.x, 1.0);
texcoordC.y = mod(texcoordC.y, 1.0);
texcoordC.x = clamp(texcoordC.x, 0.0, 0.9);
texcoordC.y = clamp(texcoordC.y, 0.0, 0.9);
vec4 texColor = texture2D(sampler, texcoordC);
gl_FragColor = texColor;

//Vertex
gl_TexCoord[0] = gl_MultiTexCoord0;
colorC = gl_Color.r;
gl_Position = ftransform(); 
```

添加：在此过程之后，我获取纹理坐标并使用纹理包：

```
vec4 textureGet(vec2 texcoord) {
    // Tile is 1.0/16.0 part of texture, on x and y
    float tileSp = 1.0 / 16.0;

    vec4 color = texture2D(sampler, texcoord);
    // Get tile x and y by red color stored
    float texTX = mod(color.r, tileSp);
    float texTY = color.r - texTX;
    texTX /= tileSp;
    // Testing tile
    texTX = 1.0 - tileSp;
    texTY = 1.0 - tileSp;

    vec2 savedC = color.yz;
    // This if else statement can be ignored. I use time to move the texture. Seams show without this as well.
    if (color.r > 0.1) {
        savedC.x = mod(savedC.x + sin(time / 200.0 * (color.r * 3.0)), 1.0);
        savedC.y = mod(savedC.y + cos(time / 200.0 * (color.r * 3.0)), 1.0);
    } else {
        savedC.x = mod(savedC.x + time * (color.r * 3.0) / 1000.0, 1.0);
        savedC.y = mod(savedC.y + time * (color.r * 3.0) / 1000.0, 1.0);
    }
    vec2 texcoordC = vec2(texTX + savedC.x * tileSp, texTY + savedC.y * tileSp);

    vec4 res = texture2D(texturePack, texcoordC);
    return res;
} 
```

但是，我在显示接缝（似乎是 1 像素）时遇到了一些麻烦。如果我省略 texcoord *= 10.0 ，则不会显示（或几乎不显示）接缝，如果我将其留在其中，它们会出现。我钳制坐标（甚至尝试低于 1.0 和大于 0.0）无济于事。我强烈地感觉它是某个地方的舍入错误，但我不知道在哪里。*补充：需要注意的是，在实际情况下，我将 texcoordC x 和 y 转换为 8 位浮点数。我认为原因就在这里；我在上面添加了另一个着色器来描述这一点。*

我展示的案例在现实中要复杂一些，所以我在着色器之外没有用（！）。我添加了前面的问题，它解释了这个案例。

编辑：如您所见，自然纹理跨度除以 10，纹理重复（10 次）。接缝出现在每个重复纹理的边界处。我还添加了一个屏幕截图。接缝是非常细的线（~1pixel）。图片是从屏幕截图中截取的，未按比例缩放。重复纹理为 16x16，总共 256 个子像素。![接缝](../Images/bc9bf3412ae0a74130482fef34fb30f2.png)

编辑：这是一个后续问题：[this question](https://stackoverflow.com/questions/14440910/precision-loss-with-mod-in-glsl)，尽管所有必要的信息都应包含在此处。

![在此处输入图像描述](../Images/134d709e89de74c48d61902a33b09f51.png) 最后一张图片没有添加时间。

![UV 的坐标为绿色、蓝色和红色作为纹理通道。](../Images/fb99e040a39554bba4a384b10c5c0d50.png)

![另一个没有红色](../Images/67df1fd70bc8537d3a57b95d259ccf66.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:52:33.007

查看 UV 坐标的渲染，它们正在被过滤，这将导致与您之前的问题相同的问题，但规模较小。发生的情况是，通过在两个不连续值之间的点（即纹理坐标包裹的两个相邻点）对 UV 坐标纹理进行采样，您会得到一个不在纹理右侧的插值值。因此，纹理图块之间的边界是来自整个图块的一堆像素。

![在此处输入图像描述](../Images/cb83a11fd4d5f5527641c3ca2fac9380.png)

您需要在屏幕像素和捕获的 UV 值之间获得 1:1 的映射。使用最近的采样可能会让您有一些方法，但如果您首先拥有正确的纹理和像素坐标，则应该可以不使用它。

其次，您可能会发现由于您执行纹理图集查找的方式而产生出血效果，因为您没有考虑对纹素进行采样的方式。如果您使用任何 mipmapping，这将被放大。理想情况下，您需要一个边框，并且可能需要对坐标进行一些按摩以解决半纹素偏移。但是，我认为这不是您在这里看到的主要问题。

# c# - 未按顺序触发的功能

> ID：14540138
> 
> 赞同：0
> 
> 时间：2013-01-26T18:31:04.800
> 
> 标签：c#, wpf, xaml, soap

WPF 和 c# 爱好者的新手...

出于某种原因，我无法在按下按钮后和调用 SOAP 之前立即运行 loadingAnimation（或任何其他）函数。

我的xml：

```
 <Grid>
    <TextBox Height="220" HorizontalAlignment="Left" Margin="12,79,0,0" Name="txtResults" VerticalAlignment="Top" Width="337" />
    <TextBox Height="23" HorizontalAlignment="Left" Margin="12,29,0,0" Name="txtServiceTag" VerticalAlignment="Top" Width="120" />
    <CheckBox Content="This computer's service tag" Height="16" HorizontalAlignment="Left" Margin="151,32,0,0" Name="chkThisST" VerticalAlignment="Top" Checked="chkThisST_Checked" Unchecked="chkThisST_Unchecked"/>
    <Button Content="Get Info" Height="23" HorizontalAlignment="Left" Margin="12,324,0,0" Name="btnGetInfo" VerticalAlignment="Top" Width="75" Click="btnGetInfo_Click" />
    <my:LoadingAnimation HorizontalAlignment="Center" Margin="128,154,419,127" VerticalAlignment="Center" Name="loadingAnimation" Visibility="Hidden" />
    </Grid> 
```

我的.cs：

```
 private void btnGetInfo_Click(object sender, RoutedEventArgs e)
    {
        txtResults.Text = "Retrieving information..."; 
        ShowHideLoading();
        SoapCall();
        ShowHideLoading();
    } 
```

我的 SoapCall() 似乎在 txtResults.Text 有时间填充之前运行。SoapCall() 大约需要 5 秒钟才能返回一条消息。我已经弄乱了对象的顺序，但无济于事。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:38:39.577

原因是`SoapCall()`阻塞了 UI 线程。换句话说，在它完成之前 - 不会调用任何 UI 操作。

您可以通过将`SoapCall()`内部放入**[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)**来解决此问题。然后， `ShowHideLoading`可以将其放入[RunWorkerCompleted](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)事件中。

这是一个关于[如何使用 BackgroundWorker的示例](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:39:03.617

当您在主线程（在本例中为调用 _Click 方法的线程）上执行操作时，UI 不会真正更新，直到调用完成，并且框架会提醒 UI 重绘自身。您从未看到更新的原因是因为 SoapCall 阻止了主线程执行任何更新。

为了使其正常工作，我建议更新 UI，分叉一个新线程来执行 Soap 调用，然后在操作完成后，将 UI 重置回其原始状态。

您可能还想了解如何正确使用 Dispatcher 对象，因为 WPF 要求所有 UI 更新都在主线程上进行。Dispatcher 允许您强制一段代码在特定线程上运行。

# simulation - ModelSim - 模拟按钮按下

> ID：14540139
> 
> 赞同：0
> 
> 时间：2013-01-26T18:31:22.200
> 
> 标签：simulation, vhdl, fpga, modelsim, intel-fpga

我想使用四个按钮作为输入，三个七段 LED 显示器作为输出。两个按钮应通过 16 个 RAM 位置上下移动；另外两个应该增加和减少当前显示的内存位置的内容。我现在正在尝试使用 ModelSim 测试台模拟我的设计，并按下按钮。这是我认为是我的代码的相关部分：

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity DE2_TOP is

  port (
    KEY : in std_logic_vector(3 downto 0);         -- Push button
    );

end DE2_TOP;

architecture datapath of DE2_TOP is

begin  
  U1: entity work.lab1 port map (
    key => key,         
  );

end datapath;

library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity raminfr is                     -STANDARD RAM INFERENCE
    port (
        clk : in std_logic;
        we : in std_logic;
        a : in unsigned(3 downto 0);
        di : in unsigned(7 downto 0);
        do : out unsigned(7 downto 0)
    );
end raminfr;

architecture rtl of raminfr is

type ram_type is array (0 to 15) of unsigned(7 downto 0);
signal RAM : ram_type;
signal read_a : unsigned(3 downto 0);
begin
process (clk)
begin
    if rising_edge(clk) then
        if we = '1' then
            RAM(to_integer(a)) <= di;
        end if;
        read_a <= a;
    end if;
end process;
do <= RAM(to_integer(read_a));
end rtl;

library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity lab1 is
    port(
        clock : in std_logic;
        key : in std_logic_vector(3 downto 0); 
        );
end lab1;

architecture up_and_down of lab1 is
    signal value_in_ram : unsigned(7 downto 0);
    signal clk : std_logic;
    signal we : std_logic;
    signal value_counter    : unsigned(7 downto 0) ;
    signal register_counter : unsigned(3 downto 0);
        begin
    U1: entity work.raminfr port map (
        a   => register_counter,
        di  => value_counter,
        do  => value_in_ram,
        clk => clk,
        we  => we
    );

    process(clock)
        begin
            if rising_edge(clock) then
                if (key(3)='0' and key(2)='0' and key(1)='1' and key(0)='0') then
                    value_counter <= value_counter + "1";   
                elsif (key(3)='0' and key(2)='0' and key(1)='0' and key(0)='1') then  
                    value_counter <= value_counter - "1";   
                elsif (key(3)='1' and key(2)='0' and key(1)='0' and key(0)='0') then
                    register_counter<= register_counter + "1";
                    value_counter <= value_in_ram;
                elsif (key(3)='0' and key(2)='1' and key(1)='0' and key(0)='0') then
                    register_counter<= register_counter - "1";
                    value_counter <= value_in_ram;
                end if;
            end if;
    end process;
end architecture up_and_down; 
```

问题是，尽管在我的测试台中初始化了“键”（按钮），ModelSim 仍然将对象列为“UUUU”。这是我的测试台的代码，它位于一个单独的文件中：

```
library ieee;
use ieee.std_logic_1164.all;

entity DE2_TOP_TEST is
end;

architecture BENCH of DE2_TOP_TEST is
signal KEY : std_logic_vector(3 downto 0);

begin
    KEY<="0010";
    U1: entity work.DE2_TOP port map (
        key=>key,
    );
end BENCH; 
```

有谁知道怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:44:24.043

您在设计中使用寄存器。因此，您需要在时钟输入中添加一个信号：

```
constant tb_clk_period : time       := (1 sec) / 10_000_000; -- 10 MHz
signal   tb_clk        : std_ulogic := '0';
...
-- clock generator
tb_clk <= not tb_clk after tb_clk_period / 2; 
```

# antlr4 - 需要一个 ANTLR4 树行走线索

> ID：14540142
> 
> 赞同：5
> 
> 时间：2013-01-26T18:31:27.037
> 
> 标签：antlr4

自从我的（一个）编译器课程以来已经有很多年了，如果这个问题不恰当，请原谅我。我也是 ANTLR 和 C 而不是 Java 编码器的新手。我想做的是描述我的问题，然后寻求最佳技术的建议。

我正在尝试将 ASN.1 作品翻译成 ML。例如，

```
Foo ::= ENUMERATED {
  bar  (0),    -- some comment 0
  baz  (1)     -- some comment 1
} 
```

进入

```
<Enumerated name="Foo">
  <NamedValues>
    <Unsigned name="bar" value="0" comment="some comment 0"/>
    <Unsigned name="baz" value="1" comment="some comment 1"/>
  </NamedValues>
</Enumerated> 
```

我的（简化的）ASN1 语法是：

```
assignment : IDENTIFIER typeAssignment ;
typeAssignment : '::=' type ;
type : builtinType ;
builtinType : enumeratedType ;
enumeratedType : 'ENUMERATED' '{' enumerations '}' ;
... 
```

“The Definitive ANTLR4 Reference”中的几个示例演示了在 BaseListener 中覆盖某些 enterNode 或 exitNode 方法，所需的一切都在 Node 的上下文中。我的问题是我想覆盖`enterTypeAssignment`and `exitTypeAssignment`，但我需要的一些信息位于解析树上更高（例如分配）或更低（例如枚举）的节点中。

这里是否有足够的描述来询问我是否应该使用访问者或侦听器模式？任何关于关注哪些书本示例的建议将不胜感激。

我对蛮力方法有一些运气：

```
import org.antlr.v4.runtime.TokenStream;
import org.antlr.v4.runtime.misc.Interval;

public class MylListener extends ASN1BaseListener {
  ASN1Parser parser;
  String id = "";
  String assignedType =  "";

  public MyListener(ASN1Parser parser) {this.parser = parser;}

  @Override
  public void enterAssignment(ASN1Parser.AssignmentContext ctx) {
    id = ctx.IDENTIFIER().getText();
  }

  /** Listen to matches of typeAssignment **/
  @Override
  public void enterTypeAssignment(ASN1Parser.TypeAssignmentContext ctx) {
    if ( ctx.type() != null ) {
      if ( ctx.type().builtinType() != null ) {
        if ( ctx.type().builtinType().enumeratedType() != null ) {
          assignedType =  "Enumerated";
          System.out.println("");
          System.out.println("<Enumerated name=\""+id+"\">");
          ...
        }
      }
    }
  }

  @Override
  public void exitTypeAssignment(ASN1Parser.TypeAssignmentContext ctx) {
    if (assignedType.length() > 0) {
      System.out.println("</"+assignedType+">");
      assignedType =  "";
    }
  }
} 
```

但可能有一个更优雅的解决方案......

* * *

更新：我得到了我想要的结果，方法是在树下的途中将 TerminalNodes 保存在全局变量中，并让这些变量可以访问以覆盖树下更远的侦听器中的方法。有没有更好的方法从给定节点访问父或祖父上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-11T08:43:04.357

我会先解析这个东西，然后使用一个访问者。使用 Listener 的优势在于您拥有所有可用的信息。

您还可以使用 C# 目标，它可能更容易与 C 背景一起使用。

# python - Python 3 浮点小数点/精度

> ID：14540143
> 
> 赞同：50
> 
> 时间：2013-01-26T18:31:29.220
> 
> 标签：python, python-3.x, floating-point

我正在阅读一个带有浮点数的文本文件，所有这些都带有 1 或 2 个小数点。我`float()`用来将一行转换为浮点数，`ValueError`如果失败则提高 a 。我将所有浮点数存储在一个列表中。打印出来时，我想将其打印为小数点后 2 位的浮点数。

假设我有一个带有数字 -3,65, 9,17, 1 的文本文件。我阅读了每个文件，一旦将它们转换为浮点数并将它们附加到列表中。现在在 Python 2 中，调用`float(-3.65)`返回`-3.65`. 然而，在 Python 3 中，`float(-3.65) returns`-3.6499999999999999` 会失去其精度。

我想打印浮点数列表，`[-3.6499999999999999, 9.1699999999999999, 1.0]`只有 2 个小数点。做一些事情`'%.1f' % round(n, 1)`会返回一个字符串。如何返回浮点数的所有两个小数点的列表，而不是字符串？到目前为止，我使用四舍五入，`[round(num, 2) for num in list]`但需要设置小数点/精度而不是`round()`.

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2017-03-29T03:01:53.323

注释说明目标是*打印到小数点后 2 位*。

Python 3 有一个简单的答案：

```
>>> num=3.65
>>> "The number is {:.2f}".format(num)
'The number is 3.65' 
```

或等效地使用 f 字符串（Python 3.6+）：

```
>>> num = 3.65
>>> f"The number is {num:.2f}"
'The number is 3.65' 
```

与往常一样，浮点值是一个近似值：

```
>>> "{}".format(num)
'3.65'
>>> "{:.10f}".format(num)
'3.6500000000'
>>> "{:.20f}".format(num)
'3.64999999999999991118' 
```

我认为大多数用例都希望使用浮点数，然后只*打印*到特定的精度。

那些希望将*数字本身*存储为精确到 2 个十进制数字的人，我建议使用[十进制](https://docs.python.org/3/library/decimal.html)类型。[感兴趣的读者可以阅读更多关于浮点精度](https://docs.python.org/3/tutorial/floatingpoint.html)的文章。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-10-30T00:47:30.947

执行此操作的简单方法是使用圆形内置。

`round(2.6463636263,2)`将显示为`2.65`.

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-01-26T18:34:18.777

一句话，你不能。

`3.65`不能完全表示为 a `float`。您得到的数字是最接近`3.65`具有精确`float`表示的数字。

（旧的？）Python 2 和 3 之间的区别纯粹是由于默认格式。

我在 Python 2.7.3 和 3.3.0 中都看到了以下内容：

```
In [1]: 3.65
Out[1]: 3.65

In [2]: '%.20f' % 3.65
Out[2]: '3.64999999999999991118' 
```

有关精确的十进制数据类型，请参阅[`decimal.Decimal`](http://docs.python.org/2/library/decimal.html).

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-04-26T08:13:42.473

尝试这个：

```
num = input("Please input your number: ")

num = float("%0.2f" % (num))

print(num) 
```

我相信这要简单得多。对于 1 位小数，使用`%0.1f`. 对于 2 位小数使用`%0.2f`，依此类推。

或者，如果您想将其全部减少为 2 行：

```
num = float("%0.2f" % (float(input("Please input your number: "))))
print(num) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-10-26T01:15:37.667

尝试使用python3通过以下函数来理解

```
def floating_decimals(f_val, dec):
    prc = "{:."+str(dec)+"f}" #first cast decimal as str
    print(prc) #str format output is {:.3f}
    return prc.format(f_val)

print(floating_decimals(50.54187236456456564, 3)) 
```

**输出为：50.542**

希望这对你有帮助！

# c# - C# JSON 反序列化

> ID：14540146
> 
> 赞同：0
> 
> 时间：2013-01-26T18:31:56.360
> 
> 标签：c#, json, serialization

我不知道如何反序列化这个 json 字符串：

```
[ [ [ "JR10", "Test1", 142, 199, 66 ], [ "JR10", "Test2", 142, 199, 66 ] ] ] 
```

放入数组内的数组中。

例如： `messages[0]`将包含一个数组包含`"JR10", "Test1", 142, 199, 66` `messages[0][0]`将包含字符串`"JR10"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:47:32.710

> 我不知道如何反序列化这个 json 字符串：

通常，当您想将 JSON 字符串反序列化为对象时，您会使用 JSON 序列化程序。例如使用内置[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)类：

```
var json = "[ [ [ \"JR10\", \"Test1\", 142, 199, 66 ], [ \"JR10\", \"Test2\", 142, 199, 66 ] ] ]";
var serializer = new JavaScriptSerializer();
var result = serializer.Deserialize<object[][][]>(json);
Console.WriteLine(result[0][0][0]); // "JR10"
Console.WriteLine(result[0][0][1]); // "Test1"
Console.WriteLine(result[0][1][0]); // "JR10"
Console.WriteLine(result[0][1][1]); // "Test2"
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:45:35.433

There is an object that can deal with serialising and desierialising:

System.Web.Script.Serialization.JavaScriptSerializer

Code similar to this should achieve what you want.

```
JSONSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();

Array[][] anArray = JSONSerializer.Deserialize<Array[][]>(JSON); 
```

# jsf - javax.el.PropertyNotWritableException：集合操作的非法语法

> ID：14540153
> 
> 赞同：14
> 
> 时间：2013-01-26T18:32:32.990
> 
> 标签：jsf

我正在 JSF 中为学校制作一个项目，对此我几乎没有问题。

首先，当我想通过推送将自己重定向到项目的另一个页面时，h:commandButton 无法正常工作。显示错误：

javax.el.PropertyNotWritableException：集合操作的非法语法

index.jsp：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %>  
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %>  

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core">
  <head>
<title>Firma Komputerowa - Baza Danych</title>
<link rel="stylesheet" href="${pageContext.request.contextPath}/resources/table-style.css" />
  </head>
     <body>
       <f:view>
         <h:form>   
        <h:panelGrid columns="3">
     <h:commandButton action="#{producentBean.redirect }" value="Dodaj"/>
</h:panelGrid>
<h:panelGrid>
    <h:dataTable value="#{producentBean.List}" var="p" 
                styleClass="order-table"
                headerClass="order-table-header"
                rowClasses="order-table-odd-row,order-table-even-row" border="1" > 
        <h:column>
            <f:facet name="header">ID producenta</f:facet>
            <h:inputText value="#{p.getId}"/>
        </h:column>

        <h:column>
            <f:facet name="header">Nazwa producenta</f:facet>
            <h:inputText value="#{p.getNazwa}" />
        </h:column>

        <h:column>
            <f:facet name="header">NIP</f:facet>
            <h:inputText value="#{p.getNip}" />
        </h:column>

        <h:column>
            <f:facet name="header">REGON</f:facet>
            <h:inputText value="#{p.getRegon}" />
        </h:column>

        <h:column>
            <f:facet name="header">Miasto</f:facet>
            <h:inputText value="#{p.getMiasto}" />
        </h:column>

        <h:column>
            <f:facet name="header">Adres</f:facet>
            <h:inputText value="#{p.getAdres}" />
        </h:column>

        <h:column>
            <f:facet name="header">Telefon</f:facet>
            <h:inputText value="#{p.getTel}" />
        </h:column>

        <h:column>
            <f:facet name="header">E-mail</f:facet>
            <h:inputText value="#{p.getEmail}" />
        </h:column>
    </h:dataTable>
</h:panelGrid>
        </h:form>
       </f:view>
    ...
   </body>
</html> 
```

ProducentBean.java：

```
 public class ProducentBean extends Polacz implements Serializable {

   public String redirect() {
    return "dodaj_pr";
}
} 
```

我试图以多种方式做到这一点，但我无法应对。

我还有另一个问题：在 JSF 中是否有可能从数据库中动态显示一个表，例如通过选择一个表名来选择一个选项？我的数据库包含三个表，每个表的列数不同。

如果有人给我一些建议，我会很高兴。

* * *

编辑：

好的，我试着这样做：

```
private String dodajPrUrl = "dodaj_pr?faces-redirect=true";

public String getDodajPrUrl() {
    return this.dodajPrUrl;
}

public void setDodajPrUrl(String newUrl) {
    this.dodajPrUrl = newUrl;
} 
```

在 index.jsp 中：

```
<h:commandButton action="#{producentBean.redirect }" value="Dodaj" /> 
```

它仍然给我同样的错误。

## 编辑2：

堆栈跟踪：

```
SEVERE: javax.faces.FacesException: javax.el.PropertyNotWritableException: Illegal Syntax for Set Operation
javax.faces.FacesException: javax.el.PropertyNotWritableException: Illegal Syntax for  Set Operation
    at com.sun.faces.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl.java:142)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.faces.component.UpdateModelException: javax.el.PropertyNotWritableException: Illegal Syntax for Set Operation
    at javax.faces.component.UIInput.updateModel(UIInput.java:853)
    at javax.faces.component.UIInput.processUpdates(UIInput.java:735)
    at javax.faces.component.UIData.iterate(UIData.java:2001)
    at javax.faces.component.UIData.processUpdates(UIData.java:1253)
    at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
    at javax.faces.component.UIForm.processUpdates(UIForm.java:281)
    at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
    at javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:1231)
    at com.sun.faces.lifecycle.UpdateModelValuesPhase.execute(UpdateModelValuesPhase.java:78)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    ... 26 more
Caused by: javax.el.PropertyNotWritableException: Illegal Syntax for Set Operation
    at com.sun.el.parser.AstValue.setValue(AstValue.java:207)
    at com.sun.el.ValueExpressionImpl.setValue(ValueExpressionImpl.java:291)
    at javax.faces.component.UIInput.updateModel(UIInput.java:818)
    ... 35 more 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-26T20:57:47.837

查看堆栈跟踪。这是最重要的部分：

```
Caused by: javax.faces.component.UpdateModelException: javax.el.PropertyNotWritableException: Illegal Syntax for Set Operation
    at javax.faces.component.UIInput.updateModel(UIInput.java:853)
    at javax.faces.component.UIInput.processUpdates(UIInput.java:735)
    at javax.faces.component.UIData.iterate(UIData.java:2001)
    at javax.faces.component.UIData.processUpdates(UIData.java:1253)
    at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
    at javax.faces.component.UIForm.processUpdates(UIForm.java:281)
    at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
    at javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:1231)
    at com.sun.faces.lifecycle.UpdateModelValuesPhase.execute(UpdateModelValuesPhase.java:78)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    ... 26 more 
```

从下往上阅读。在更新模型值阶段，JSF 从`UIViewRoot`组件 ( `<f:view>`) 开始遍历组件树。在一个`UIForm`组件 ( `<h:form>`) 中有一个`UIData`组件 ( `<h:dataTable>`)，它有一个需要处理的`UIInput`组件 ( )。基本上需要将提交、转换和验证的值放入模型（托管 bean）中`<h:inputText>`。`updateModel()`但是，该操作失败了，因为该属性不可写（即根据 EL 表达式语法找不到 setter 方法）。

好吧，让我们看一下`<h:inputText>`组件的一般属性。

```
<h:inputText value="#{p.getId}"/>
...
<h:inputText value="#{p.getNazwa}" />
...
<h:inputText value="#{p.getNip}" /> 
```

等等，这很奇怪。他们都是从“get”开始的！这绝对不正常。然后，JSF 正在寻找诸如`setGetId()`,之类的方法`setGetNazwa()`，这些方法只是没有意义（鉴于此例外，您可能也没有）。预计它们代表具体的属性名称，如“id”、“nazwa”、“nip”等，而不是完整的方法名称。

因此，在模型中：

```
private Long id;
private String nazwa;
private String nip;

// Add/generate getters and setters in the following syntax:

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

// ... 
```

所以在视图中：

```
<h:inputText value="#{p.id}"/>
...
<h:inputText value="#{p.nazwa}" />
...
<h:inputText value="#{p.nip}" /> 
```

然而，这已经包含在有点理智的 JSF 书籍/教程/资源中。你绝对肯定你读的是正确的吗？您的问题还表明您将 JSF 2.0 与*已弃用*的JSP 视图技术而不是其后续 Facelets 结合使用。从[我们的 JSF wiki 页面](https://stackoverflow.com/tags/jsf/info)开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T20:28:32.743

您在这里几乎没有问题。首先，在您的输入组件中，您有类似`p.getId`. 在您的 bean 中，您可能有称为`getId`and的方法`setId`，但这意味着您有`id`可以读取和写入的属性。因此，将您的值更改为：`p.id`, `p.nazwa`, `p.nip`... 您可以看到我使用的是所有小写字母，而不是**Id**而是**id**。

其次，您应该将您的操作方法更改为类似这样（如果您想要重定向）：

```
public String redirect() {
  return "dodaj_pr?faces-redirect=true";
} 
```

和命令按钮标签是这样的：

```
<h:commandButton action="#{producentBean.redirect}" value="Dodaj" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-14T02:08:09.047

我有同样的错误。错误是在 EL 中 inputext 的 value 属性中 } 和 " 之间有空格，如下所示。

```
<h:inputText id="txtNroOficio" value="# {bean.nombre}  "   /> 
```

我删除了空格，它起作用了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-26T18:36:30.940

不要在命令按钮中添加 ()。在您的 bean 方法中返回一些字符串并使用导航移动到另一个页面。

# date - Date.now() 在 PhoneGap 中返回 NaN

> ID：14540155
> 
> 赞同：1
> 
> 时间：2013-01-26T18:32:48.113
> 
> 标签：date, cordova

我似乎无法在我的 phonegap 应用程序中获得时间戳。对 Date.now() 的简单调用，例如以下，会导致 NaN。

```
console.log("lastEditedOn: " + Date.now().toString() ); 
```

日志猫：

```
01-26 18:28:59.997: I/Web Console(17970): LastEditedOn: NaN:220 
```

谁能看到我做错了什么？

干杯，唐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T19:08:57.590

设法通过以下方式获得正确的时间戳：

```
var d = new Date();
var lastEditedOn;
lastEditedOn = d.getTime();
console.log(lastEditedOn); 
```

干杯，唐

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:44:57.073

您不能直接 toString 日期.now() 因为它返回从 1970 年 1 月 1 日午夜开始的毫秒数。

您需要像这样转换它们：

```
function printDate() {
var temp = new Date();
var dateStr = padStr(temp.getFullYear()) +
              padStr(1 + temp.getMonth()) +
              padStr(temp.getDate()) +
              padStr(temp.getHours()) +
              padStr(temp.getMinutes()) +
              padStr(temp.getSeconds());
debug (dateStr );
}

function padStr(i) {
return (i < 10) ? "0" + i : "" + i;
} 
```

# php - 将 MySql Query 转换为 yii 框架查询系统

> ID：14540157
> 
> 赞同：0
> 
> 时间：2013-01-26T18:33:00.860
> 
> 标签：php, mysql, yii

我想在 Yii 框架中将此 SQL 查询转换为 CDbCriteria 格式，以便在 Yii 中使用它：

```
SELECT title FROM project WHERE ((title like 'to %') or (title like ' % to %') or (title like '% to')); 
```

Yiiframework CDbCriteria 描述链接如下：

[http://www.yiiframework.com/doc/api/1.1/CDbCriteria](http://www.yiiframework.com/doc/api/1.1/CDbCriteria)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:21:15.393

你也可以试试这个

```
$criteria = new CDbCriteria;
$criteria->select = "title";
$criteria->compare('title',' to ',true);

$model = new Project;
$models = $model->findAll($criteria); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T20:22:38.393

干得好：

```
$criteria = new CDbCriteria;
$criteria->select = "title";
$criteria->condition = "((title like ':to%') or (title like ' % :to %') or (title like '% :to'))";
$criteria->params = array(':to' => 'to');

$model = new Project;
$models = $model->findAll($criteria); 
```

# jsp - Tiles 3 不渲染列表属性

> ID：14540158
> 
> 赞同：3
> 
> 时间：2013-01-26T18:33:05.353
> 
> 标签：jsp, struts2, apache-tiles, struts-tags, tiles-3

在尝试将列表属性添加到定义之前，我对瓷砖 3.0.1 没有任何问题。没有错误并且定义正确呈现，但列表属性似乎不存在于 JSP 上。

我正在使用 CompleteAutoloadListener 加载磁贴，这里是 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <listener>
        <listener-class>org.apache.tiles.extras.complete.CompleteAutoloadTilesListener</listener-class>
    </listener>
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:applicationContext.xml</param-value>
    </context-param> 
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener> 
    <welcome-file-list>
        <welcome-file>/index.action</welcome-file>
    </welcome-file-list>
</web-app> 
```

以下是定义的外观 (tiles-defs.xml)：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE tiles-definitions PUBLIC "-//Apache Software Foundation//DTD Tiles Configuration 3.0//EN" "http://tiles.apache.org/dtds/tiles-config_3_0.dtd">
<tiles-definitions>
    <definition name="head-default" template="/WEB-INF/template/head.jsp">
        <put-list-attribute name="items">
            <add-attribute value="/style/cssbase-min.css" />
            <add-attribute value="/style/cssfonts-min.css" />
            <add-attribute value="/style/cssreset-min.css" />
            <add-attribute value="/style/grids-min.css" />
            <add-attribute value="/style/style.css" />
        </put-list-attribute>   
    </definition>

    <definition name="default" template="/WEB-INF/template/template.jsp">
        <put-list-attribute name="items" inherit="true"/>
        <put-attribute name="head" value="head-default"/>
        <put-attribute name="header" value="/WEB-INF/template/header.jsp"/>
        <put-attribute name="body" value="/WEB-INF/template/body.jsp"/>
        <put-attribute name="footer" value="/WEB-INF/template/footer.jsp"/>
    </definition>
    <definition name="REGEXP:\/recruiter#candidate-input\.(.*)"  extends="default">
        <put-attribute name="head" value="/WEB-INF/template/recruiter/head.jsp"/>
        <put-attribute name="body" value="/WEB-INF/content/recruiter/candidate-input.jsp"/>
    </definition>
    <definition name="REGEXP:(.*)#(.*)"  extends="default">
        <put-list-attribute name="items" inherit="true"/>
        <put-attribute name="body" value="/WEB-INF/content{1}/{2}"/>
    </definition>
</tiles-definitions> 
```

最后这是一个图块（head.jsp），我试图输出“项目”的值，实际上我放弃了，只是想看看迭代是否可行（列表中应该有 5 个项目），所以只是想打印五个字符串，但没有输入循环。

```
<%@taglib prefix="tiles" uri="http://tiles.apache.org/tags-tiles"%>
<%@taglib prefix="s" uri="/struts-tags"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <s:iterator value="items">
        iterator,
    </s:iterator>
    <c:forEach var="item" items="${items}">
        ${item}
    </c:forEach>
    <script src="<s:url value='/script/jquery/1.8.1/jquery.min.js'/>"></script>
    <script src="<s:url value='/script/jquery.sort.js'/>"></script>
    <title>A Title</title>
</head> 
```

有任何想法吗？

**更新：最终工作标题图块，包括使用 struts 标签。**

```
<%@taglib prefix="tiles" uri="http://tiles.apache.org/tags-tiles"%>
<%@taglib prefix="s" uri="/struts-tags"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <tiles:importAttribute name="items"/>
    <s:iterator value="#attr.items">
        <s:property/>
    </s:iterator>
    <script src="<s:url value='/script/jquery/1.8.1/jquery.min.js'/>"></script>
    <script src="<s:url value='/script/jquery.sort.js'/>"></script>
    <title>A Title</title>
</head> 
```

因为tiles将导入的属性“items”放在页面范围内，所以只能使用#attr范围从struts2访问。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T18:52:10.437

在 Tiles 2.2 中，您的代码中缺少一个额外的行，这是[Tiles 2.2 文档中的一个示例](http://tiles.apache.org/2.2/framework/tutorial/advanced/list-attributes.html)：

```
<tiles:useAttribute id="list" name="items" classname="java.util.List" /> 
```

然而，在瓷砖 3.0.1 中，现在使用 importAttribute 标签：

```
<tiles:importAttribute name="items"/> 
```

一个可行的解决方案是：

```
<tiles:importAttribute name="items"/>
<c:forEach var="item" items="${items}">
    ${item}
</c:forEach> 
```

# reporting-services - BIDS 和报表服务器中的 PDF 布局不同

> ID：14540164
> 
> 赞同：0
> 
> 时间：2013-01-26T18:33:41.740
> 
> 标签：reporting-services, ssrs-2008, bids

我有一个跨越多个页面并具有重复行标题的报告。当我在 BIDS 中预览/导出 PDF 时，一切看起来都很好，行标题在每一页上重复。

但是，将报表部署到报表服务器并通过 Internet Explorer 打开它，然后也将其导出为 PDF 后，行标题不会显示在所有页面上。

我不知道这是否是一般性问题，或者它是否依赖于 tablix、子报告……如果这不是一般性问题，我也可以提供一些屏幕截图。

截图：
投标开发：![投标发展](../Images/bdbf42003f8a88fec12d852cf48137b0.png)

投标 PDF 第 3 页：![投标 PDF 第 3 页](../Images/3bb4c12b2ac813042e924b6767c71186.png)

投标 PDF 第 4 页：![投标 PDF 第 3 页](../Images/546953249d3e2ef0070b7d0b527d4bfa.png)

服务器 PDF 第 3 页：![服务器 PDF 第 3 页](../Images/b0f107584f4ce470bb88139982205e5d.png)

服务器 PDF 第 4 页：![服务器 PDF 第 4 页](../Images/2bf4ed910c360ad117e27dfcf63886ce.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:10:07.633

忽略来自 BIDS 的结果 - 它们通常与来自 Report Server 的结果不同。如果在服务器上禁用了远程错误，我只会在 BIDS 中预览。

通过部署到测试站点/文件夹进行测试。一旦您开始使用它，它还有其他优势，例如记住参数、多个窗口/选项卡。

# javascript - HTML5 游戏 - 导入的 JQuery 文件不起作用

> ID：14540165
> 
> 赞同：0
> 
> 时间：2013-01-26T18:33:48.493
> 
> 标签：javascript, css, html

我正在尝试使用 HTML 5、CSS 和 JQuery 制作一个简单的游戏。但是，我用作测试的导入 .js 文件“game.js”对游戏的布局没有任何影响（css 代码使 pong paddles 变蓝，但 jquery 代码应该覆盖并制作桨红色）。在我的 HTML 文件中，我引用了“http://code.jquery.com/jquery-1.9.0.min.js”作为我的 jquery 源。任何帮助，将不胜感激。

HTML (index.html):

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="styles.css"/>
</head>
<body>
  <header>
    <h1>Pong</h1>
  </header>
  <div id = "game">
  <div id = "playArea">
    <div id= "paddleA" class="paddle"></div>
    <div id= "paddleB" class="paddle"></div>
    <div id= "ball"></div>
  </div>
  </div>
  <footer>
    Its like Pong. Exactly like Pong.
  </footer>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
  <script type="text/javascript" src="game.js"></style>
</body>
</html> 
```

CSS（样式.css）：

```
#playArea{
background: #FFFF99; 
width: 650px;
height: 400px;
position: relative;
overflow: hidden;
}

#ball {
background: #990000;
position: absolute;
width: 20px;
height: 20px;
left: 320px;
top: 100px;
border-radius: 10px;                
}

.paddle {
background: #66FF99;
left: 50px;
top: 70px;
position: absolute;
width: 30px;
height: 70px;
}

#paddleB {
left: 570px;
} 
```

jQuery（游戏.js）：

```
$(function(){
    $("#paddleB").css("top", "100px");
    $("#paddleA").css("top", "60px");
    $(".paddle").css("background", "red");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:39:42.377

`$(document).ready(function(){}`并且`$(function(){}`是同一件事，所以这可能会导致问题。我建议您尝试只使用其中之一。

例如

```
$(function(){
    $("#paddleB").css("top", "100px");
    $("#paddleA").css("top", "60px");
    $(".paddle").css("background", "red");
}); 
```

**编辑**

刮那个！你`</style>`在包含的末尾`game.js`而不是`</script>`

# hadoop - 使用协处理器 HBase 创建二级索引

> ID：14540167
> 
> 赞同：4
> 
> 时间：2013-01-26T18:34:00.637
> 
> 标签：hadoop, indexing, hbase

我一直在尝试编写自己的协处理器，使用 prePut 挂钩创建二级索引。首先，我一直在尝试让 prePut 协处理器工作。到目前为止，我可以让协处理器添加到传递给它的 put 对象中。我发现我无法让协处理器写入与传入的 put 对象正在写入的内容分开的行。显然，要创建二级索引，我需要弄清楚这一点。

下面是我的协处理器的代码，但它不起作用。
是的，所有表都存在，“colfam1”也存在。
HBase 版本：来自 Cloudera 的 CDH4 的 HBase 0.92.1-cdh4.1.2

有谁知道问题是什么？

```
 @Override
        public void prePut(final ObserverContext<RegionCoprocessorEnvironment> e,final Put put, final WALEdit edit, final boolean writeToWAL) throws IOException {          
            KeyValue kv = new KeyValue(Bytes.toBytes("COPROCESSORROW"), Bytes.toBytes("colfam1"),Bytes.toBytes("COPROCESSOR: "+System.currentTimeMillis()),Bytes.toBytes("IT WORKED"));
            put.add(kv);
        } 
```

我收到以下错误：

```
 ERROR: org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException: Failed 1 action: IOException: 1 time, servers with issues: 
```

更新：

我已将协处理器修改为以下内容，但仍然出现错误。现在post-Put（二级索引）写好了，但是还是有超时错误。
该区域的整个表也崩溃了，需要我重新启动该区域。有时区域重新启动不起作用，整个区域（所有表）都已损坏，需要重新构建服务器。

我不知道为什么...！？

```
@Override
      public void start(CoprocessorEnvironment env) throws IOException {        
        LOG.info("(start)");
        pool = new HTablePool(env.getConfiguration(), 10);
     }

    @Override
    public void postPut(final ObserverContext<RegionCoprocessorEnvironment> observerContext,final Put put,final WALEdit edit,final boolean writeToWAL) throws IOException {
        byte[] tableName  = observerContext.getEnvironment().getRegion().getRegionInfo().getTableName();

        //not necessary though if you register the coprocessor for the specific table , SOURCE_TBL
        if (!Bytes.equals(tableName, Bytes.toBytes(SOURCE_TABLE))) 
            return;         

        try {           
            LOG.info("STARTING postPut");
            HTableInterface table = pool.getTable(Bytes.toBytes(INDEX_TABLE));
            LOG.info("TURN OFF AUTOFLUSH");
            table.setAutoFlush(false);
            //create row              
            LOG.info("Creating new row");            
            byte [] rowkey = Bytes.toBytes("COPROCESSOR ROW");
            Put indexput  = new Put(rowkey); 
            indexput.add(Bytes.toBytes ( "data"),  Bytes.toBytes("CP: "+System.currentTimeMillis()),  Bytes.toBytes("IT WORKED!"));
            LOG.info("Writing to table");
            table.put(indexput);
            LOG.info("flushing commits");            
            table.flushCommits();
            LOG.info("close table");
            table.close();

        } catch ( IllegalArgumentException ex) {

            //handle excepion.
        }

      }

      @Override
      public void stop(CoprocessorEnvironment env) throws IOException {
        LOG.info("(stop)");
        pool.close();
      } 
```

这是区域服务器日志：（注意我的日志注释）

```
2013-01-30 19:30:39,754 INFO my.package.MyCoprocessor: STARTING postPut
2013-01-30 19:30:39,754 INFO my.package.MyCoprocessor: TURN OFF AUTOFLUSH
2013-01-30 19:30:39,755 INFO my.package.MyCoprocessor: Creating new row
2013-01-30 19:30:39,755 INFO my.package.MyCoprocessor: Writing to table
2013-01-30 19:30:39,755 INFO my.package.MyCoprocessor: flushing commits
2013-01-30 19:31:39,813 WARN org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Failed all from region=test_table,,1359573731255.d41b77b31fafa6502a8f09db9c56b9d8., hostname=node01, port=60020
java.util.concurrent.ExecutionException: java.net.SocketTimeoutException: Call to node01/<private_ip>:60020 failed on socket timeout exception: java.net.SocketTimeoutException: 60000 millis timeout while waiting for channel to be ready for read. ch : java.nio.channels.SocketChannel[connected local=/<private_ip>:56390 remote=node01/<private_ip>:60020]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatchCallback(HConnectionManager.java:1557)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatch(HConnectionManager.java:1409)
    at org.apache.hadoop.hbase.client.HTable.flushCommits(HTable.java:949)
    at org.apache.hadoop.hbase.client.HTablePool$PooledHTable.flushCommits(HTablePool.java:449)
    at my.package.MyCoprocessor.postPut(MyCoprocessor.java:81)
    at org.apache.hadoop.hbase.regionserver.RegionCoprocessorHost.postPut(RegionCoprocessorHost.java:682)
    at org.apache.hadoop.hbase.regionserver.HRegion.doMiniBatchPut(HRegion.java:1901)
    at org.apache.hadoop.hbase.regionserver.HRegion.put(HRegion.java:1742)
    at org.apache.hadoop.hbase.regionserver.HRegionServer.multi(HRegionServer.java:3102)
    at sun.reflect.GeneratedMethodAccessor22.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:364)
    at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1345) 
```

已解决：我试图在协处理器中写入协处理器正在处理的同一张表：简而言之，当我写一个单元格时，CP 写了一个单元格，导致 CP 再次触发并写入另一个，依此类推。我通过写 CP 行的行检查 b4 来阻止它，以防止这个循环。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T06:48:38.520

下面是关于我们如何在 Hbase 中使用协处理器来创建二级索引的代码片段。可以对你有所帮助。

```
public class TestCoprocessor extends BaseRegionObserver{

    private HTablePool pool = null;

    private final static String  INDEX_TABLE  = "INDEX_TBL";
    private final static String  SOURCE_TABLE = "SOURCE_TBL";

    @Override
    public void start(CoprocessorEnvironment env) throws IOException {  
        pool = new HTablePool(env.getConfiguration(), 10);
    }

    @Override
    public void postPut(
        final ObserverContext<RegionCoprocessorEnvironment> observerContext,
        final Put put,
        final WALEdit edit,
        final boolean writeToWAL)
        throws IOException {

        byte[] table = observerContext.getEnvironment(
            ).getRegion().getRegionInfo().getTableName();

        // Not necessary though if you register the coprocessor
        // for the specific table, SOURCE_TBL
        if (!Bytes.equals(table, Bytes.toBytes(SOURCE_TABLE))) {
            return; 
        }

        try {
            final List<KeyValue> filteredList = put.get(
                Bytes.toBytes ( "colfam1"), Bytes.toBytes(" qaul"));
            filteredList.get( 0 ); //get the column value

            // get the values 
            HTableInterface table = pool.getTable(Bytes.toBytes(INDEX_TABLE));

            // create row key             
            byte [] rowkey = mkRowKey () //make the row key
            Put indexput = new Put(rowkey); 
            indexput.add(
                Bytes.toBytes( "colfam1"),
                Bytes.toBytes(" qaul"),
                Bytes.toBytes(" value.."));

            table.put(indexput);
            table.close();

        } catch ( IllegalArgumentException ex) {
            // handle excepion.
        }

    }

    @Override
    public void stop(CoprocessorEnvironment env) throws IOException {
        pool.close();
    }

} 
```

要在 SOURCE_BL 上注册上述协处理器，请转到 hbase shell 并按照以下步骤操作

1.  禁用“SOURCE_TBL”
2.  改变'SOURCE_TBL', METHOD => 'table_att','coprocessor'=>'file:///path/to/coprocessor.jar|TestCoprocessor|1001'
3.  启用“SOURCE_TBL”

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-27T02:30:10.000

二级索引现已内置到 HBase 中。看看这个[博客条目](http://blog.rajeevsharma.in/2009/06/secondary-indexes-in-hbase.html)是一样的。没有必要在 HBase 中使用 CoProcessors。

# paypal - 使用 Umbraco 进行在线销售

> ID：14540168
> 
> 赞同：5
> 
> 时间：2013-01-26T18:34:03.503
> 
> 标签：paypal, umbraco, shopping-cart, add-on

我需要使用 asp.net + sql server 为体育商品业务建立一个网站，该网站要求在国际上展示和销售商品。

经过一番研究，我决定使用 Umbraco 来构建网站。

但是我不知道我还需要为这个网站购买什么，比如贝宝插件、购物车、托管空间（去爸爸？）等

我在 Umbraco 或在线销售方面没有经验，所以在这里需要一些指导。

谢谢你！阿尔夏

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T12:02:19.310

我绝不会建议有人*不*使用 Umbraco，因为我个人认为它很棒，但我想问您为什么选择 Umbraco 而不是“专用”.Net 电子商务平台？

Umbraco 有一个名为[uCommerce](http://www.ucommerce.dk/en/products.aspx)的软件包可用，它的评价非常好，还有一个免费版本，尽管它有一些关键限制，比如营销方面，多语言/多货币版本每年收费。但是，如果您是 Umbraco 的新手，但不是 .Net 的新手，那么看看像[nopCommerce](http://www.nopcommerce.com)这样免费和开源的东西可能会更好。

Umbraco 是一个出色的 CMS，它允许最灵活的站点创建 - 但这就是它的本质，一个站点创建工具。nopCommerce 是一个开箱即用的电子商务应用程序，可为您提供预建的购物网站和管理区域。

nopCommerce 的唯一缺点是它的 CMS 功能并不出色。我的意思是虽然你可以创建非购物页面，但你不能像在 Umbraco 中那样创建定制的页面/内容结构。

无论哪种方式，在愤怒发展之前，我建议检查您的实际要求和优先事项。您想要具有电子商务功能的 CMS，还是具有 CMS 功能的电子商务平台？

**更新：**

自从写这篇文章以来，我使用了一个名为 uWebshop 的 Umbraco 包，它功能齐全，但速度慢、有缺陷，并且由于缺少文档而难以扩展。它是开源的，所以我能够深入研究并找到各种扩展点，但它有太多的错误，该项目最终被搁置。

还有另一个名为[Merchello](http://merchello.com/)的 Umbraco 包可用，它也是开源的，我听说它非常好，文档看起来非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T00:19:28.473

Umbraco 是一个很好的 CMS - 在线入门视频会很有用（[http://umbraco.com/help-and-support/video-tutorials](http://umbraco.com/help-and-support/video-tutorials)）

我玩过 nopcommerce，它似乎是一个不错的平台——我部署了 ucommerce，它是一个很好的软件包，与 Umbraco 的工作方式很好地集成在一起。如果您习惯了 Umbraco，那么包含 ucommerce 功能是轻而易举的事。

如果您使用 ucommerce，我发现的一个问题是免费版本中没有营销基础——这意味着您不能使用折扣和优惠券的概念。对于可能使用折扣、销售、促销等手段来降低建议零售价的正版商店，您可能需要考虑付费版的 ucommerce。

# jquery - 根据添加到页面的内容更改 div 类

> ID：14540171
> 
> 赞同：0
> 
> 时间：2013-01-26T18:34:09.410
> 
> 标签：jquery, date, html

jQuery 有没有办法`<div>`根据添加内容的时间来更改类？例如，如果我有一个包含多个`<div>`s 的页面并且该页面使用新的 s 进行了更新，那么`<div>`jQuery 可以为此更改类`<div>`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:38:18.413

[这个答案](https://stackoverflow.com/questions/1091661/detect-element-content-changes-with-jquery)似乎解决了你的问题。具体来说，Emile 提出的通用 JavaScript 解决方案的答案似乎是一个很好的起点。

```
$("#content").html('something').triggerHandler('customAction');

$('#content').unbind().bind('customAction', function(event, data) {
   //Custom-action
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:45:16.597

这取决于您的内容是如何更新的。如果您想选择在用户重新加载页面后出现的新元素（例如通过按 F5），纯 javascript/jquery 解决方案将无济于事。您需要一个服务器端解决方案，将内容元素的创建日期发送到客户端或告诉客户端哪些元素是新的。

如果您尝试选择因客户端操作而出现的元素（无需用户重新加载页面），JakeGould 的解决方案可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T18:52:28.143

如果您可以在这里分享代码，我们会更容易回答。但是，据我了解，您可以使用 removeClass 和 addClass 的组合：

```
$("#div_id").removeClass("oldclass");
$("#div_id").addClass("newclass"); 
```

或者

```
$("#div_id").toggleClass("newclass"); 
```

# c# - C# 反序列化 JSON

> ID：14540173
> 
> 赞同：0
> 
> 时间：2013-01-26T18:34:29.737
> 
> 标签：c#, json.net, deserialization

> {"result":1,"message":"客户端应用已加载","extras":{"jobs":{"5":{"jobName":"Ford Otomobil Afi\u015fi","jobMaxIdleTime":"2060 ","jobMaxTime":"2040"}},"customers":{"8":"Seker LTD"}}}

```
public class Extras
        {
            public string loginID { get; set; }
            public string loginToken { get; set; }
            public string employeesNameSurname { get; set; }
            public string employeesLanguage { get; set; }

            public Dictionary<string, string> jobs { get; set; }
            public Dictionary<string, string> customers { get; set; }

        }

 public class Dict
        {
            public int result { get; set; }
            public string message { get; set; }
            public Extras extras { get; set; }

        } 
```

> 公共词典工作{得到; 放; } // 错误

我无法从“工作”中获取数据

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T18:41:55.877

关于这个有一个类似[的帖子](https://stackoverflow.com/questions/401756/parsing-json-using-json-net/402694#402694)。看看这对你有没有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:40:20.907

```
 using System;
using Newtonsoft.Json;

namespace {

    [Serializable]
     class  {

        public int Result;
        public string Message;
        public Extras Extras;

        //Empty Constructor
        public (){}

        public string Serialize()
        {
            return JsonConvert.SerializeObject(this);
        }
        public static  FromJson(string json)
        {
            return JsonConvert.DeserializeObject<>(json);
        }
    }

    [Serializable]
     class 5 {

        public string JobName;
        public string JobMaxIdleTime;
        public string JobMaxTime;

        //Empty Constructor
        public 5(){}

    }

    [Serializable]
     class Jobs {

        public 5 5;

        //Empty Constructor
        public Jobs(){}

    }

    [Serializable]
     class Customers {

        public string 8;

        //Empty Constructor
        public Customers(){}

    }

    [Serializable]
     class Extras {

        public Jobs Jobs;
        public Customers Customers;

        //Empty Constructor
        public Extras(){}

    }

} 
```

# c# - UnitOfWork 模式是否会在 EF 应用程序中增加价值？

> ID：14540174
> 
> 赞同：4
> 
> 时间：2013-01-26T18:34:32.677
> 
> 标签：c#, entity-framework, tdd, unit-of-work

`EntityFramework`允许我从`POCO`类创建表。这`Repository pattern`允许我在数据库概念之上创建一个抽象层，以便我可以专注于对实际应用程序进行编程。

但是，`UnitOfWork`（UoW）模式。这是一种在 Web 上大肆宣传的模式，尤其是与 EF 结合使用时。

我正在使用多个存储库，并且确实需要以原子方式提交内容。然后我在每个 UoW 示例中，我看到他们实现了一个方法，该方法`SaveChanges`什么都不做，然后将调用传递给`DbContext.SaveChanges`. 感觉有点薄，所以我可能错过了重点。或者`UnitOfWork`仅仅是一个`DbContext`包装？

**示例场景：**

我有一个多租户网络应用程序。创建新的时`Tenant`，创建的用户`Tenant`也需要存储为新创建的用户`Tenant`。在我当前的情况下，负责创建新`Tenant`并分配第一个的类是类本身。如果发生故障，则不应将 和 存储在数据库中。`User``Tenant``Tenant``User`

我现在处理的方式`DbContext.SaveChanges`是在所有操作成功执行之前不调用。

有人（更喜欢在实际 EF 解决方案中实际使用 UoW 的该领域专家）解释使用`UnitOfWork`过度依赖的优势`DbContext`吗？

专家能否也给我一些关于命名约定的提示？`TenantAndUserUnitOfWork`让我印象深刻*并且*可以自由解释（这不是您在面向对象的世界中所期望的，还是我错了？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:43:09.683

> UnitOfWork 模式是否会在 EF 应用程序中增加价值？

工作单元是表示域事务的好方法。那么，它是否为使用它的应用程序增加了价值（具有实体框架或任何其他底层存储方法）？

**是的：一个好的软件应该在某些场景下实现原子操作**。

*   我需要注册一个用户并为其创建个人资料。
*   我需要删除一个订单并通知用户它已被删除。
*   ...

一切都可以成为一个工作单元的一部分。

**答：是的，如果你想制作严肃的软件。**

# c++ - vxFloatingPointValidator 未将值传递给关联变量

> ID：14540178
> 
> 赞同：0
> 
> 时间：2013-01-26T18:34:57.233
> 
> 标签：c++, user-interface, wxwidgets

在我的项目（Visual C++ 2010 Express，wxWidgets 2.9.4）中，我使用了一些 TextCtrl 对象，这些对象应该通过 wxFloatingPointValidator 与三个变量（a0、a1、a2 - 表示抛物线的系数）相关联。然后使用 wxMathPlot 绘制函数。系数是定义其他所有内容的 wxFrame 类的成员。该程序围绕“计算”按钮旋转 - 触发 OnCalculate() 方法，该方法计算函数的 x 和 y 坐标并向 m_plot wxMathPlot 对象添加一个图层。出于某种原因，验证器根本没有将输入值传递给成员字段（我在调试模式下跟踪了这一点）。我一直在参考一些示例代码片段，例如：[http ://docs.wxwidgets.org/trunk/classwx_floating_point_validator.html](http://docs.wxwidgets.org/trunk/classwx_floating_point_validator.html) 在我看来，我的实现几乎相同，但没有达到预期的效果。任何帮助都感激不尽...

注意：我尝试了不同的方法，例如将验证器和文本框放在向量中以使代码更整洁，但使用此版本以使其对我正在做的事情更加明显。此外，以前没有具有相同效果的 a0、a1 和 a2 的默认值（它在 y=0 处绘制一条直线）。

编辑：我还尝试将变量 a0、a1 和 a2 放在一个单独的类中，并像在官方 wxValidator 示例中一样全局定义它们-> 相同效果...

```
#include "wx/wx.h"
#include <wx/valnum.h>      // wxFloatingPointValidator
#include <wx/bookctrl.h>    // make tabs in the window
#include "mathplot.h"       // plotting
#include <vector>

class MyApp: public wxApp
{
    virtual bool OnInit();
};

class MyFrame: public wxFrame
{
public:
    MyFrame(const wxString& title, const wxPoint& pos, const wxSize& size);
    wxBookCtrl * book;
    wxTextCtrl * _textBox0, * _textBox1, * _textBox2;
    double a0,a1,a2;
    std::vector<double> _xcoords, _ycoords;
    mpWindow * m_plot;

    void OnQuit(wxCommandEvent& event);
    void OnCalculate(wxCommandEvent& event);

    DECLARE_EVENT_TABLE()
};

enum
{
    ID_Quit = 1,
    ID_textBox,
    BUTTON_calculate
};

BEGIN_EVENT_TABLE(MyFrame, wxFrame)
    EVT_MENU(ID_Quit, MyFrame::OnQuit)
    EVT_BUTTON(BUTTON_calculate, MyFrame::OnCalculate)
END_EVENT_TABLE()

IMPLEMENT_APP(MyApp)

bool MyApp::OnInit()
{
    MyFrame *frame = new MyFrame( _("wxPlotter"), wxPoint(50, 50), wxSize(450,340) );
    frame->Show(true);
    SetTopWindow(frame);
    return true;
}

MyFrame::MyFrame(const wxString& title, const wxPoint& pos, const wxSize& size)
: wxFrame( NULL, -1, title, pos, size )
{
    a0=0; a1=0; a2=0;   // default values

    wxMenu *menuFile = new wxMenu;
    menuFile->Append( ID_Quit, _("&Exit") );
    wxMenuBar *menuBar = new wxMenuBar;
    menuBar->Append( menuFile, _("&File") );
    SetMenuBar( menuBar );

    book = new wxBookCtrl(this, -1);

    wxPanel *panel1 = new wxPanel(book);

    wxFloatingPointValidator<double> _val0(4,&a0,wxNUM_VAL_DEFAULT);
    _textBox0 = new wxTextCtrl(panel1, ID_textBox, "0.0000", wxPoint(40, 30), wxSize(60,20), wxTE_PROCESS_ENTER, _val0, wxTextCtrlNameStr);

    wxFloatingPointValidator<double> _val1(4,&a1,wxNUM_VAL_DEFAULT);
    _textBox1 = new wxTextCtrl(panel1, ID_textBox, "0.0000", wxPoint(40, 60), wxSize(60,20), wxTE_PROCESS_ENTER, _val1, wxTextCtrlNameStr);

    wxFloatingPointValidator<double> _val2(4,&a2,wxNUM_VAL_DEFAULT);
    _textBox2 = new wxTextCtrl(panel1, ID_textBox, "0.0000", wxPoint(40, 90), wxSize(60,20), wxTE_PROCESS_ENTER, _val2, wxTextCtrlNameStr);

    new wxButton( panel1, BUTTON_calculate, _T("Calculate"), wxPoint(150,30), wxSize(100,30) );
    book->AddPage(panel1, _T("Input"), true);   // move the page to the tab

    wxBoxSizer *topsizer = new wxBoxSizer( wxVERTICAL );
    wxPanel *panel2 = new wxPanel(book);
    panel2->SetSizer(topsizer);

    m_plot = new mpWindow( panel2, -1, wxPoint(0,0), wxSize(100,100), wxSUNKEN_BORDER );
    m_plot->SetMargins(0,0,50,70);
    mpScaleX* xaxis = new mpScaleX(wxT("x"), mpALIGN_BOTTOM, true);
    mpScaleY* yaxis = new mpScaleY(wxT("y"), mpALIGN_LEFT, true);
    xaxis->SetDrawOutsideMargins(false);
    yaxis->SetDrawOutsideMargins(false);
    m_plot->AddLayer(xaxis);
    m_plot->AddLayer(yaxis);
    m_plot->Fit(-5.,5.,-5,5.,0,0);
    topsizer->Add( m_plot, 1, wxEXPAND );
    book->AddPage(panel2, _T("Plot"), false);   // false to make this a secondary tab -> not displayed upon initialisation
}

void MyFrame::OnQuit(wxCommandEvent& WXUNUSED(event))   // defines what happens when quit is pressed
{
    Close(TRUE);    // closes the window
}

void MyFrame::OnCalculate(wxCommandEvent& WXUNUSED(event))
{
    for (int i=0; i<1000; i++)
    {
        _xcoords.push_back(i*.1);
        _ycoords.push_back(a0+a1*_xcoords[i]+a2*pow(_xcoords[i],2.));
    }

    mpFXYVector* vectorLayer = new mpFXYVector(_("Parabola"));

    vectorLayer->SetData(_xcoords, _ycoords);
    vectorLayer->SetContinuity(true);
    wxPen vectorpen(*wxBLUE, 2, wxSOLID);
    vectorLayer->SetPen(vectorpen);
    vectorLayer->SetDrawOutsideMargins(false);

    m_plot->AddLayer(vectorLayer);
    m_plot->Fit(-5.,5.,-5,5.,0,0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:01:35.943

验证器仅在`wxDialog`. 由于您在这里不使用一个，因此您必须`TransferData{To,From}Window()`在适当的时候给自己打电话。请注意，您不需要*像*以前那样在验证器本身上调用它，在父窗口上调用它会对其中的所有验证器执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T21:13:19.350

我设法通过在 OnCalculate() 方法中使用以下内容来解决问题：

```
_textBox0->GetValidator()->TransferFromWindow(); 
```

这利用了将数据从 wxTextCtrl 对象传输到关联变量的内置函数。另一种解决方法是直接在 TextCtrl 上调用 GetValue() 方法，但这不会通过验证器 - 猜测这取决于应用程序和您想要实现的目标。

# android - 搜索存储在数据库中的英语单词列表

> ID：14540182
> 
> 赞同：-1
> 
> 时间：2013-01-26T18:35:27.220
> 
> 标签：android, database, sqlite

我将建立一个需要英语单词的项目。我需要我的应用程序的所有单词。为此，我需要一个可用于我的项目的 sql lite 数据库。我已经搜索了很多包含英文单词的数据库。但是找不到任何解决方案。让我解决我的问题。我的 android 项目需要一个 sql lite 数据库，它可以连接到我的 android 应用程序进行查询。这个数据库将包含所有以“a%”到“z%”开头的单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:43:11.417

你可能想用谷歌搜索拼字游戏单词列表。它们基本上包含您需要的所有内容，并且您可以以 Excel 格式找到它们，以及 .csv 以便轻松导入数据库。

更流行的称为 TWL 和 SOWPODS，因此搜索那些特别适合您的将得到您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:07:51.543

尝试使用 firefox 字典中的文件。某处犹豫下载所有单词由`<ENTER>`(#13)分隔的文件

[https://addons.mozilla.org/en-US/firefox/language-tools/](https://addons.mozilla.org/en-US/firefox/language-tools/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T18:43:07.703

谷歌搜索 excel 或任何其他 db 格式的字典数据库，然后将其导入。

# php - 将对象属性设置为等于另一个对象的实例

> ID：14540185
> 
> 赞同：0
> 
> 时间：2013-01-26T18:36:23.613
> 
> 标签：php, parse-error

> **可能重复：**
> [使用简单表达式初始化 PHP 类属性声明会产生语法错误](https://stackoverflow.com/questions/2702863/initializing-php-class-property-declarations-with-simple-expressions-yields-synt)

我不想在每个方法中都实例化我的会话对象。为什么我不能这样做：

```
class Foo {

   public $session = Session::instance();

   public function bar() {
      // Pass success message in session
      $this->session('message', 'Success');

   }
} 
```

我得到的错误：

```
[ Parse Error ]: syntax error, unexpected '(', expecting ',' or ';' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:39:28.123

PHP 不允许您在类定义中使用表达式（这在许多语言的类定义中是标准的）。你可以做几件事：

```
public function __construct() {
   $this->session = Session::instance();
}

//Dependency Injection
public function __construct(Session $session) {
   $this->session = $session;
} 
```

# php - 我不断收到来自网络表单的垃圾邮件

> ID：14540187
> 
> 赞同：-1
> 
> 时间：2013-01-26T18:36:27.167
> 
> 标签：php, javascript, spam

我不断收到来自联系我们页面的垃圾邮件。

在所有垃圾邮件中都没有正确的电子邮件，电子邮件地址是这样的：阿姆斯特丹

我已经在联系我们表单上应用了 javascript 验证，因此应该没有机会传递无效的电子邮件地址。

黑客是否直接将数据发布到我的 php 文件中？

作为我的表单操作 HTMLFORMresponseFeedback.php 到这个文件。

我听说我们可以通过 curl 将数据发布到任何 phpfile。

我需要应用什么安全措施来禁用这种方法？

这种情况会起作用吗？

```
if($_SERVER['HTTP_REFRER']=='http://abc.com/contact_us') {

} else {
    // redirect
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:38:19.140

You have used JavaScript so that it's impossible to pass an invalid email? Sorry that isn't true. Most spam bots do not have JS engines, and so your validation is irrelevant.

You should look at implementing the following:

*   Server-side email address format validation
*   Look into CAPTCHA options, such as reCAPTCHA, or an alternative method of verifying the sender is actually a human.
*   [Akismet](http://akismet.com/), a great way to identify spam clients.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T18:38:09.633

你可以做几件事，包括：

1）放置一个只有机器人才能看到的假字段。然后，如果该字段与表单的其余部分一起提交，您可以忽略它（如果需要，可以禁止它们）。您还可以[捕获跟踪隐藏链接的恶意机器人](http://www.kloth.net/internet/bottrap.php)。

2) 使用验证码，如[reCAPTCHA](http://recaptcha.com/)

3) 使用一个字段，要求用户回答什么是 5 + 3 之类的问题。任何人都可以回答，但机器人不知道该怎么做，因为它会根据字段名称自动填充字段。因此，该字段将不正确或丢失，在这种情况下，提交将被拒绝。

4）使用令牌并将其放入会话并将其添加到表单中。如果令牌未与表单一起提交或不匹配，则它是自动的并且可以被忽略。

5) 寻找来自同一 IP 地址的重复提交。如果您的表单不应该收到太多请求，但它可能突然被机器人攻击，您应该考虑暂时阻止 IP 地址。

6）使用[Askimet](http://akismet.com/)。它非常擅长识别垃圾邮件。

# uitableview - UITableView 重新排序控件 - 隐藏白线？

> ID：14540190
> 
> 赞同：1
> 
> 时间：2013-01-26T18:36:33.490
> 
> 标签：uitableview

![UITableView 重新排序控件](../Images/545e20b665eb0f186aa4b6f4161a5a86.png)

当我的 UITableView 处于编辑模式时，是否可以摆脱出现的这条白线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:31:04.950

我最终找到了解决方案：

通过可见单元格中的子视图将其删除：

```
-(void)editTableView {
    [self setEditing:YES animated: YES];
    for (UITableViewCell *cell in [self.tableView visibleCells]) {
        for (UIView *control in cell.subviews) {
            if (control.frame.size.width == 1.0f) {
                control.backgroundColor = [UIColor clearColor];
            }
        }
    }
} 
```

为正在显示的任何单元格删除它：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (self.editing) {
        for (UIView *control in cell.subviews) {
            if (control.frame.size.width == 1.0f) {
                control.backgroundColor = [UIColor clearColor];
            }
        }
    }
} 
```

# c# - 更改 GridView 一行的背景

> ID：14540192
> 
> 赞同：0
> 
> 时间：2013-01-26T18:36:55.743
> 
> 标签：c#, wpf, listview, gridview, background

我在WPF中有`GridView`一个。`ListView`（`ListView`和`GridView`列）有一个`ObservableCollection`填充它们的边界。

`GridView`给定 中的索引，如何更改 中的一行的背景`ObservableCollection`？我需要在 C# 中以编程方式执行此操作。

```
<ListView Margin="12,39,0,0" Name="Library" DataContext="{Binding}" ItemsSource="{Binding _songData}" Height="681" VerticalAlignment="Top" MouseDoubleClick="Library_MouseDoubleClick"  ContextMenu="{StaticResource MyContextMenu}" AlternationCount="2" Background="AliceBlue" HorizontalAlignment="Left" Width="846">
        <ListView.View>
            <GridView x:Name="gvLibrary">
                <!--<GridViewColumn Width="20" Header="hi" DisplayMemberBinding="{Binding isSongPlaying}" x:Name="gvColumnPlaying" />-->
                <GridViewColumn Width="220" Header="Title" DisplayMemberBinding="{Binding Title}" x:Name="gvColumnTitle" />
                <GridViewColumn Width="180" Header="Artist" DisplayMemberBinding="{Binding Artist}" x:Name="gvColumnArtist" />
                <GridViewColumn Width="180" Header="Album" DisplayMemberBinding="{Binding Album}" x:Name="gvColumnAlbum" />
                <GridViewColumn Width="180" Header="Location" DisplayMemberBinding="{Binding Location}" x:Name="gvColumnLocation" />
                <GridViewColumn Width="80" Header="File Type" DisplayMemberBinding="{Binding Ext}" x:Name="gvColumnFileType" />
            </GridView>
        </ListView.View>
    </ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:31:23.480

最简单的方法是使用 a`Style`和 a `DataTrigger`。首先`IsSelected`在 中包含的项目类上添加一个属性`ListView`：

```
public class Song : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public void NotifyPropertyChanged(String propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    private bool _IsSelected;
    public bool IsSelected 
    {
        get { return _IsSelected; }
        set
        {
            _IsSelected = value;
            NotifyPropertyChanged("IsSelected");
        }
    }

    ...
} 
```

然后将样式应用于您`ListViewItem`的 s：

```
 <Style TargetType="{x:Type ListViewItem}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=IsSelected}" Value="True">
                <Setter Property="Background" Value="Red"/>
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

现在，每当您以编程方式设置 IsSelected 属性时，都会突出显示相应的行：

```
_songData[5].IsSelected = true; 
```

# pdo - PDO fetch() 错误

> ID：14540194
> 
> 赞同：0
> 
> 时间：2013-01-26T18:37:02.187
> 
> 标签：pdo, fetch

这是我的代码：

```
 $qer="insert into users (user,first,last,bio,email,pass,date,bd) values ('$name','$first','$last','$bio','$email','$pass','$date','$bd')";
$query=$con->query("select * from 'users'");
while($row=$query->fetch(PDO::FETCH_ASSOC)){
    echo $row['user'];
} 
```

这是我的错误：

```
Fatal error: Call to a member function fetch() on a non-object in /opt/lampp/htdocs/it/newuser.php on line 97 
```

当然，第 97 行是 while 语句。

我不确定为什么它认为它没有处理一个对象......或者为什么我认为它是。帮助表示赞赏。谢谢！

# magento - magento 订单确认电子邮件被发送给老板而不是客户服务

> ID：14540195
> 
> 赞同：0
> 
> 时间：2013-01-26T18:37:07.753
> 
> 标签：magento, confirmation-email

我的一位客户非常恼火，因为他收到了客户的所有回复电子邮件，这些电子邮件回复了发送到他们电子邮件的订单发票。我已经在数据库中的所有表中对他的电子邮件进行了大规模搜索，并且在任何事务性电子邮件模板中也没有看到它。知道我还能在哪里找到这个变量！？

我看到 $mailer->setSender(Mage::getStoreConfig(self::XML_PATH_EMAIL_IDENTITY, $storeId)); 在帖子所指的功能中。我在哪里可以找到这个 xml_path_email_identity 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:40:54.143

我猜他在某种邮件列表上，会收到这封电子邮件。

如果您让他将此类电子邮件转发给您，您可能会在邮件标题中看到原始发送到的地址。

此外，目标电子邮件地址可以在 core_config_data 或代码中（取决于实现）。如果它在 core_config_data 中，它应该可以通过 magento 后端接口进行更改。

# c++ - Allegro 更新图纸

> ID：14540197
> 
> 赞同：1
> 
> 时间：2013-01-26T18:37:17.220
> 
> 标签：c++, windows, allegro

嘿，首先我只想说我是 allegro 的一个完整的菜鸟，而且几乎刚刚开始。我想要做的是在屏幕上保持一条线一秒钟，然后让它消失。现在所发生的只是线路只是停留在屏幕上。

这是我的代码：

```
#include <allegro.h>
#include <cstdlib>

BITMAP *buffer;

int main(){

    allegro_init();
    install_mouse();
    install_keyboard();
    set_color_depth(16);
    set_gfx_mode( GFX_AUTODETECT, 640, 480, 0, 0);
    buffer = create_bitmap( 640, 480);

    while( !key[KEY_ESC]){

     if (key[KEY_SPACE]){

      line( buffer, 30, 450, mouse_x, mouse_y, makecol( 255, 0, 0));

      }

    draw_sprite( screen, buffer, 0, 0);
    release_screen();

    rest(10);

    }

    return 0;

}
END_OF_MAIN(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:50:57.680

这里发生的是你只是在同一个地方重复画线，而没有清除屏幕。您可以使用以下命令清除屏幕：

```
clear_to_color(buffer,makecol(r,g,b)); 
```

最简单的解决方案是使用您喜欢的 RGB 值将此行添加到循环的开头。

# python - opencv/python：在网络摄像头流上绘制图像

> ID：14540210
> 
> 赞同：3
> 
> 时间：2013-01-26T18:38:38.013
> 
> 标签：python, opencv, numpy, webcam, roi

嘿大家我正在尝试使用我的网络摄像头制作游戏，我需要一些物体从屏幕上掉下来，同时我用我的网络摄像头流式传输视频（那个流是我的背景）。

**问题是：我如何在这个背景上绘制图像？我知道如何捕捉每一帧，并且我必须在帧上绘制图像，但是使用什么？**

*   为此，我**使用 python 和 opencv 以及 cv2 模块**。
*   我已经搜索过，我发现你可以使用感兴趣的区域来做到这一点，但我使用的是 cv2，据说使用更简单的 numpy 数组..但我不明白该怎么做..

谁能给我一些提示或例子来说明如何做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:50:16.430

[这](https://stackoverflow.com/questions/14063070/overlay-a-smaller-image-on-a-larger-image-python-opencv/14102014#14102014)是一个例子。它也显示了如何覆盖透明图像。您也可以使用[内置的绘图功能](http://docs.opencv.org/modules/core/doc/drawing_functions.html)。绘制透明形状也有一个巧妙的小[技巧。](http://bistr-o-mathik.org/2012/06/13/simple-transparency-in-opencv/)

# java - Java 使用滑块调整形状大小

> ID：14540212
> 
> 赞同：1
> 
> 时间：2013-01-26T18:38:44.363
> 
> 标签：java, swing, resize, java-2d, shapes

这是代码：

## 主.java：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;

/**
 * Winter Assignment for Java 2012/13
 */

// Class definition

public class Main extends JPanel implements ActionListener {

    private JSlider sizeslider;
    private int startX, startY, endX, endY, val;
    private Color shapeColor = Color.black;
    private JComboBox shapeChoice, colorChoice;
    private Point firstPoint;
    private Circle firstCircle;
    private Square firstSquare;
    private Doughnut firstDoughnut;
    private Triangle firstTriangle;
    private Pentagon firstPentagon;
    private Point aShape;
    static final int SlideMin = 10;
    static final int SlideMax = 110;
    static final int SlideInit = 50;

    // Constructor method declaration

    public Main() {

        //Create the slider.
        sizeslider = new JSlider(JSlider.HORIZONTAL, SlideMin, SlideMax, SlideInit);
        add(sizeslider, BorderLayout.NORTH);

        shapeChoice = new JComboBox();
        shapeChoice.addItem("Point");
        shapeChoice.addItem("Square");
        shapeChoice.addItem("Circle");
        shapeChoice.addItem("Doughnut");
        shapeChoice.addItem("Triangle");
        shapeChoice.addItem("Pentagon");
        add(shapeChoice);
        shapeChoice.addActionListener(this);

        colorChoice = new JComboBox();
        colorChoice.addItem("Black");
        colorChoice.addItem("Red");
        colorChoice.addItem("Green");
        colorChoice.addItem("Blue");
        colorChoice.addItem("Yellow");
        colorChoice.addItem("Purple");
        colorChoice.addItem("Turquoise");
        add(colorChoice);
        colorChoice.addActionListener(this);

    this.addMouseListener(new MouseAdapter() {
    public void mouseReleased(MouseEvent me) {
        repaint();
    }

    public void mouseDragged(MouseEvent me) {
        aShape.moveXY(me.getX(), me.getY());
        repaint();
    }
});

    this.addMouseMotionListener(new MouseAdapter() {
    public void mouseReleased(MouseEvent me) {
        repaint();
    }

    public void mouseDragged(MouseEvent me) {
        aShape.moveXY(me.getX(), me.getY());
        repaint();
    }
});

    sizeslider.addChangeListener(new ChangeListener() {
  public void stateChanged(ChangeEvent e) {
     JSlider source = (JSlider)e.getSource();  // get the slider
     if (!source.getValueIsAdjusting()) {
         val = source.getValue();  // get slider value
         aShape.reSize(val);
         repaint();
  }
}
});

        // Instantiate shape classes
        firstPoint = new Point();
        firstCircle = new Circle();
        firstSquare = new Square();
        firstDoughnut = new Doughnut();
        firstTriangle = new Triangle();
        firstPentagon = new Pentagon();

        // Initially assign aShape a Point object
        aShape = firstPoint;

        // Create a new window using the Swing class JFrame and add this panel
        makeFrame();
    }

    public void actionPerformed(ActionEvent e) {
        // Manipulate respective object when buttons pressed

       // checkbox assigns object to aShape
        if (e.getSource() == shapeChoice) {
            if (shapeChoice.getSelectedItem().equals("Circle"))
                aShape = firstCircle;
            else if (shapeChoice.getSelectedItem().equals("Square"))
                aShape = firstSquare;
            else if (shapeChoice.getSelectedItem().equals("Point"))
                aShape = firstPoint;
            else if (shapeChoice.getSelectedItem().equals("Doughnut"))
                aShape = firstDoughnut;
            else if (shapeChoice.getSelectedItem().equals("Triangle"))
                aShape = firstTriangle;
            else if (shapeChoice.getSelectedItem().equals("Pentagon"))
                aShape = firstPentagon;
        }

        // Assigns color to shape
        else if (e.getSource() == colorChoice) {
            if (colorChoice.getSelectedItem().equals("Black")) {
                shapeColor = Color.black;
                repaint();
            }
            else if (colorChoice.getSelectedItem().equals("Red")) {
                shapeColor = Color.red;
                repaint();
            }
            else if (colorChoice.getSelectedItem().equals("Green")) {
                shapeColor = Color.green;
                repaint();
            }
            else if (colorChoice.getSelectedItem().equals("Blue")) {
                shapeColor = Color.blue;
                repaint();
            }
            else if (colorChoice.getSelectedItem().equals("Yellow")) {
                shapeColor = Color.yellow;
                repaint();
            }
            else if (colorChoice.getSelectedItem().equals("Purple")) {
                shapeColor = Color.decode("#9B30FF"); //Assignment said purple, but purple isn't defined in the Java api, so I used the hex code. The closest color in the API is Magenta.
                repaint();
            }
            else if (colorChoice.getSelectedItem().equals("Turquoise")) {
                shapeColor = Color.decode("#40E0D0"); //Turquoise hex code
                repaint();
            }
        }

        // Ask Java to repaint the window to reflect the updates made
        repaint();
    }

    // Provide this method to instruct Java what to do when repainting the window
    public void paintComponent(Graphics g) {

        super.paintComponent(g);

        g.setColor(shapeColor);

        // Call the respective methods from respective class to print the new co-ordinate values
        aShape.outputXYCoords(g);

        // Call the respective methods from respective class to redraw the shape
        aShape.display(g);
    }

    // Create a window frame

    public void makeFrame() {

        // Instantiate a window frame using Swing class JFrame
        JFrame frame = new JFrame("Winter Assignment");

        // When the window is closed terminate the application
        frame.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });

        // set initial size of window
        frame.setSize(800, 600);

        // add the current object to the centre of the frame and make visible
        frame.getContentPane().add(this, BorderLayout.CENTER);
        frame.setVisible(true);
    }   
} 
```

## 三角.java

形状文件之一，它们都具有相同的结构：

三角.java

```
import java.awt.*;

public class Triangle extends Point {
    protected int size;
    private int p1x, p2x, p3x, p1y, p2y, p3y;

    //Create a new triangle
    public Triangle()
    {
        super();
        size = 50;
        yPos = 100;
    }

    public void reSize(int newSize) {
        size = size + newSize;
    }

    //Draw the triangle with current specifications on screen.
    public void display(Graphics g) {
        p1x = xPos;
        p2x = xPos + size/2;
        p3x = xPos + size;
        p1y = yPos + size;
        p2y = yPos;
        p3y = yPos + size;
        int[] xPoints = { p1x, p2x, p3x };
        int[] yPoints = { p1y, p2y, p3y };
        int npoints = 3;
        g.fillPolygon(xPoints, yPoints, npoints);
    } 
} 
```

*   **我希望会发生什么：** 滑块会将形状调整为它所放置的值。
*   **实际发生的情况：** `aShape.reSize(val);`通过增加滑块的值来增加形状的大小。

我不知道如何解决它。那里也有一些垃圾代码，但我只是用它来参考发生了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T19:03:50.893

> 我希望会发生什么：滑块会将形状调整为它所放置的值。

这是我制作的一个简短示例，它将增加/减少正方形的宽度和高度到滑块上的数量，即在 50 时，正方形的宽度和高度为 50，在 60 时它们为 60，依此类推。

这是通过允许访问实例字段的*getter 和 setter*`ChangeListener`完成的，然后我们添加一个来`JSlider`检测值的变化，并在那里我们使用我们的 setter 设置实例的值并调用哪个`repaint()`调用`paintComponent`将`JPanel`调用`draw(Graphcis2D g2d)`形状以反映容器上的变化：

![在此处输入图像描述](../Images/15b1b98ee20cb1c8268ca532066ef6da.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.SwingUtilities;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class ShapeAndSliderTest {

    public ShapeAndSliderTest() {
        createAndShowGui();
    }

    private void createAndShowGui() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        final MyRectangle myRectangle = new MyRectangle(10, 10, 50,50, Color.RED);

        JSlider jslider = new JSlider();
        jslider.setValue(50);
        jslider.setMaximum(250);
        jslider.setMinorTickSpacing(5);
        jslider.setMajorTickSpacing(10);
        jslider.setPaintTicks(true);
        jslider.setPaintLabels(true);

        // We'll just use the standard numeric labels for now...
        jslider.setLabelTable(jslider.createStandardLabels(50));

        final JPanel panel = new JPanel() {
            @Override
            protected void paintComponent(Graphics grphcs) {
                super.paintComponent(grphcs);

                Graphics2D g2d = (Graphics2D) grphcs;
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);

                myRectangle.draw(g2d);
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 300);
            }
        };

        jslider.addChangeListener(new ChangeListener() {
            @Override
            public void stateChanged(ChangeEvent ce) {
                JSlider slider = (JSlider) ce.getSource();

                if (!slider.getValueIsAdjusting()) {
                    int newW = slider.getValue();
                    int newH = slider.getValue();

                    myRectangle.setWidth(newW);
                    myRectangle.setHeight(newH);

                    System.out.println(newW + "," + newH);

                    panel.repaint();
                }
            }
        });

        frame.add(jslider, BorderLayout.SOUTH);
        frame.add(panel, BorderLayout.CENTER);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ShapeAndSliderTest();
            }
        });
    }
}

class MyRectangle {

    private int x, y, width, height;
    private final Color color;

    public MyRectangle(int x, int y, int w, int h, Color color) {
        this.x = x;
        this.y = y;
        this.width = w;
        this.height = h;
        this.color = color;
    }

    void draw(Graphics2D g2d) {
        Color prevState = g2d.getColor();

        g2d.setColor(color);

        g2d.drawRect(x, y, width, height);

        g2d.setColor(prevState);

    }

    public void setX(int x) {
        this.x = x;
    }

    public void setY(int y) {
        this.y = y;
    }

    public void setWidth(int w) {
        this.width = w;
    }

    public void setHeight(int h) {
        this.height = h;
    }

    public int getHeight() {
        return height;
    }

    public int getWidth() {
        return width;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }
} 
```

# java - 握手后Web套接字断开连接？

> ID：14540216
> 
> 赞同：2
> 
> 时间：2013-01-26T18:39:02.203
> 
> 标签：java, google-chrome, websocket

经过一些修改，这是我的 chrome 客户端和 java 服务器之间的转换：

```
GET / HTTP/1.1
Upgrade: websocket
Connection: Upgrade
Host: localhost:4444
Origin: chrome-extension://hgmloofddffdnphfgcellkdfbfbjeloo
Pragma: no-cache
Cache-Control: no-cache
Sec-WebSocket-Key: Gh/WYxZXrUNZdPc2+LQ/Tg==
Sec-WebSocket-Version: 13
Sec-WebSocket-Extensions: x-webkit-deflate-frame
Sent text to CLIENT_1
-------------Response to handshake------------
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: NmkE36ZEsC5baQaMjLPb5CxHwDM= 
```

握手答复由以下人员提供：

```
public static String Key(String thekey) throws NoSuchAlgorithmException {
    String base64;

    thekey = thekey + "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
    MessageDigest md = MessageDigest.getInstance("SHA-1");
    byte[] digest = md.digest(thekey.getBytes()); // Missing charset
    base64 = Base64.encodeBase64URLSafeString(digest);
    base64=base64.replace("_", "/");
    base64=base64.replace("-", "+");
    return new String(base64);
}
 Send("HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: " + Key(key) +"=\r\n\r\n"); 
```

然后我可以发送 10 个字节的数据，然后客户端断开连接。我能做些什么？提前致谢！斯莫列特。

# vb.net - 客户端更新时以编程方式从 ClickOnce 部署位置安装 setup.exe

> ID：14540219
> 
> 赞同：0
> 
> 时间：2013-01-26T18:39:12.830
> 
> 标签：vb.net, .net-4.0, clickonce, bootstrapper

当我的客户想要在下一个角色之后升级时，我需要允许他们运行 setup.exe。我们已将代码从 .NET Framework 2.0 更新到 4.0。我知道客户可以简单地访问我们的网站并从中下载应用程序，以升级现有的并获取 setup.exe，它将检查先决条件。但是，我被要求这样做，以便当他们选择从客户端本身更新时，它首先运行引导程序。我了解 ClickOnce 不直接支持这一点。我已经使用 System.Deployement.Application 命名空间以编程方式处理更新检查/安装。我是否可以只在应用程序本身中包含 setup.exe，然后在用户选择下载时运行该文件？也许我可以拉设置。用户想要升级时直接从安装位置执行exe？以前有人做过吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:16:00.507

这与这里的问题大致相同：[Clickonce .net upgrade](https://stackoverflow.com/questions/11053737/clickonce-net-upgrade)。如果您查看示例程序，它会显示如何卸载当前版本并使用新 URL 运行 setup.exe 并安装新版本并检查先决条件。它可以被修改或直接使用以满足您的需求。

# cocoa - NSOutlineView：点击编辑不选择文本

> ID：14540223
> 
> 赞同：0
> 
> 时间：2013-01-26T18:39:35.623
> 
> 标签：cocoa, nsoutlineview

我有一个基于视图的 NSOutlineView，我正在努力使项目可编辑。如果我单击一个项目进行编辑，它会从我单击的插入点开始，而不是选择整个文本。按 enter/return 进行编辑确实会选择整个文本。

将我的代码与不存在此问题的 TableViewPlayground 示例进行比较，我无法找到任何显着差异。我发现的唯一区别是示例使用了绑定，但是当我尝试进行更改时，它并没有帮助。

我的单元格视图的文本视图将我的视图控制器设置为它的委托（我什至重新设置它`outlineView:viewForTableColumn:item:`以确保），但`control:textShouldBeginEditing:`永远不会被调用。我想也许我可以从那里选择文本。

我可以做些什么来使点击编辑时自动选择文本？当编辑会话开始时，是否有另一种方法可以通知我，以便我可以手动选择文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-28T12:21:23.003

创建一个名为`MyTextField`扩展类的自定义`NSTextField`类。

```
class MyTextField: NSTextField {

    override func mouseDown(with event: NSEvent) {
        currentEditor()?.selectAll(self)
    }
} 
```

转到情节提要，设置`NSTextField`控件的类。完毕。[![在此处输入图像描述](../Images/0aa2a802a927fd972c3dd3533ed082a6.png)](https://i.stack.imgur.com/fh2Ul.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:36:02.340

尝试下载苹果的示例项目“DragNDropOutlineView”（google it）

在这个示例中，几乎可以看到使用大纲视图完成的所有功能（如编辑、拖放、添加节点、删除节点等）。

希望能帮助到你 ！！！

# python - 将结果写入 Python 中的参数？

> ID：14540226
> 
> 赞同：1
> 
> 时间：2013-01-26T18:39:44.897
> 
> 标签：python

如何将结果写入传递的参数（参数）？

```
### permutation function

def xchg(a, b):
    """ xchg function that does a permution for two integers
    """
    a=a+b
    b=a-b
    a=a-b

a=int(input("Enter a number: "))
b=int(input("Enter another number: "))
xchg(a,b)
print("a= ", a)
print("b= ", b) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T18:41:01.393

如果你正在学习 Python，你应该学习如何编写 Python，而不是学习如何用 Python 编写 C 或 Java。

在 Python 中，这样做没有意义。好多了：

```
b, a = a, b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T18:46:59.927

你应该知道你想要做的事情是***不可能***的。

在 Python 中，有值，也有名称（变量）。

赋值使名称*引用*一个值。因此，同一个值可以有多个名称。

函数参数是该函数的*本地*名称。分配给它们*不能*使不同的名称神奇地引用不同的值。它所做的只是将本地名称“绑定”到不同的值。

现在，有可变值，也有不可变值。请记住，不同的名称可以引用相同的值。如果您*更改*值，而不是将名称绑定到不同的值，则绑定到该值的所有其他名称也将看到更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T18:49:37.497

尝试：

```
def xchg(a, b):
    return b, a 
```

然后：

```
a, b = xchg(a, b) 
```

# iphone - 在后台预加载图像

> ID：14540227
> 
> 赞同：0
> 
> 时间：2013-01-26T18:39:45.250
> 
> 标签：iphone, ios, uiscrollview, uiimage, grand-central-dispatch

我正在开发一个带有文档查看器的 iOS 应用程序。每个文档都有许多页面重绘为图像。

查看器使用 an`UIScrollView`和 an`UIImageView`来显示当前页面。

为了提高应用程序的响应能力，我在后台预加载了下一页和上一页。我正在使用 GCD 来执行此操作，但是如果用户在加载下一张图片之前更改了页面（fe: go next），我无法取消后台加载。目前我正在再次加载页面，然后预加载下一张图片。

我认为 GCD 不是这样做的正确方法。实现我的目的的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:48:35.237

有更好的方法来做到这一点。使用CATiledLayer作为UIImageView子类的backing layer类，通过类方法+(Class)layerClass的子类化；. CATiledLayer 自动从主线程异步绘制。有关详细信息，请参阅 CATiledLayer 文档：

[https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CATiledLayer_class/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CATiledLayer_class/Introduction/Introduction.html)

# android - Android ListView 选择器

> ID：14540228
> 
> 赞同：2
> 
> 时间：2013-01-26T18:39:46.493
> 
> 标签：android, android-widget

我的应用程序中有一个具有以下属性的 ListView：

```
 android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:choiceMode="singleChoice"
    android:clickable="true"
    android:fastScrollEnabled="true"
    android:drawSelectorOnTop="true" 
    android:focusable="true"
    android:focusableInTouchMode="true" 
```

但我在屏幕上看不到选择器。我需要一个可见的选择器，如何使选择器可见并正常工作？在“触摸模式”中也一样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:45:52.490

```
 <ListView 
            android:id="@+id/..."
            android:choiceMode="singleChoice" 
            android:listSelector="@android:color/darker_gray" /> 
```

# php - 在 ajax 弹出窗口中使用 CK Editor 时不起作用

> ID：14540229
> 
> 赞同：3
> 
> 时间：2013-01-26T18:39:48.310
> 
> 标签：php, jquery, ckeditor

在我的项目中，CKEditor 用于富文本界面。问题是：- 我有一个 jquery 弹出框。在显示此弹出框之前，我在获取记录后对服务器进行了 ajax 调用以获取记录，它显示用于编辑记录的编辑界面有一个文本区域，我需要集成 CKEditor。当我集成编辑器时，文本区域已成功更改为编辑器，但未在文本区域内显示文本。我可以看到 textarea 在 firebug 中填充了文本，但编辑器为空白且无法编辑。

这是我的代码

这是主页

```
<?php $this->load->view('menu'); ?>
<div id="rightContent">
    <h3>Events&nbsp;&&nbsp;News</h3>
    <div align="right">
    <?php echo anchor('eventsandnews/add','ADD NEW',array('class'=>'button')); ?>
    </div>
        <div class="sukses" style="display:none;">

        </div>
        <table class="data">
            <tr class="data">
                <th class="data" width="30">No</th>
                <th class="data">Text</th>
                <th class="data">Date</th>
                <th class="data" width="75">Actions</th>
            </tr>
            <?php 
            $i=1;
            foreach ($query->result() as $row){ ?>
            <tr class="data" id="an<?php echo $row->id; ?>">
                <td class="data" width="30"><?php echo $i; ?></td>
                <td class="data"><?php echo substr($row->newstxt,0,30); ?></td>
                <td class="data"><?php echo $row->ndate; ?></td>
                <td class="data" width="75">
                <center>
                <a href="<?php echo $row->id; ?>" id="edit" class="edit" name="edit"><img src="<?php echo base_url(); ?>mos-css/img/edit.png"></a>&nbsp;&nbsp;&nbsp;
                <a href="<?php echo $row->id; ?>" id="delete" class="delete" name="delete"><img src="<?php echo base_url(); ?>mos-css/img/delete.png"></a>
                </center>               </td>
            </tr>
            <?php
            $i++;
             } ?>
        </table>
        <div id="paging">
        <?php echo $paging; ?>
        </div>
</div>
<script>
  $(function() {  
  $( "#dialog" ).dialog({
      autoOpen: false,
      height: 350,
      width: 500,
      show: {
        effect: "slide",
        duration: 500
      },
      hide: {
        effect: "slide",
        duration: 500
      }
    });
    $(".edit").click(function(event){
        event.preventDefault();
        var id = $(this).attr("href");      
        $.ajax({
            url: '<?php echo site_url().'eventsandnews/edit/'; ?>'+id,
            success: function(data) {
            $("#dialog").html(data);
            $( "#dialog" ).dialog( "open" );
            debugger;
            CKEDITOR.replace( 'update' );

            }
        });
    });

    $(".delete").click(function(event){
        event.preventDefault();
        var v = confirm('Are you sure to delete?');
        if(v==true){
            var id = $(this).attr("href");      
            $.ajax({
                url: '<?php echo site_url().'eventsandnews/delete/'; ?>'+id,
                success: function(data) {
                    $('.sukses').html('Deleted successfully');
                    $('#an' +id).remove();
                    $('.sukses').show('slow');
                     setTimeout(function() {
                        $('.sukses').hide('slow');
                      }, 2500);
                }
            });
        }

    }); 

  });
  </script>

<div id="dialog" title="Edit">

</div> 
```

这是 Ajax 页面

```
<script>
$(document).ready(function(){
    $( "#eventsandnewsdate" ).datepicker();
    $( "#eventsandnewsdate" ).datepicker( "option", "dateFormat", "dd/mm/yy" );

    $("#sub").click(function(){
     var a =    $("#update").val();
        if($.trim(a)==''){
            $('.gagal').html('Must enter a announcement !');
            $('.gagal').show('slow');           
        }else{
            var hiddenid = $('#id').val();
            var text = $('#update').val();
            $.ajax({
              type: "POST",
              url: "<?php echo site_url().'announcements/update/'; ?>",
              data: { id: hiddenid, announce: text }
            }).done(function( msg ) {
                if(msg==1){
                    $( "#dialog" ).dialog( "close" );
                    setTimeout(function() {
                        document.location.reload();
                     }, 600);

                }
            });

            ;
        }       
    });
});
</script>
<div class="gagal" style="display:none;">

</div>
<table width="95%">         
            <tr>
              <td><strong>Annoucement</strong></td>
              <td><textarea onclick="$('.gagal').hide('slow');" name="update" id="update" ><?php echo $query[0]['atext']; ?>
              </textarea></td>
  </tr>
            <tr>
            <td width="125">Date</td><td>&nbsp;</td></tr>
            <tr><td></td><td><input type="button" class="button" id="sub" name="sub" value="Submit">
            <input type="hidden" name="id" id="id" value="<?php echo $id; ?>">
            </td></tr>
        </table> 
```

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:08:27.920

如果我理解正确，您正试图在 CKEditor 加载后直接影响 textarea 字段。另外，您似乎使用了错误的方法。

你试过这个： [CKEDITOR.editor.html#setData](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#setData)吗？

在您的情况下，它类似于（来自他们的文档）

```
CKEDITOR.instances.editor1.setData( '<p>This is the editor data.</p>' ); 
```

# javascript - 在 Javascript 中监视 window.location URL 中的片段更改

> ID：14540235
> 
> 赞同：1
> 
> 时间：2013-01-26T18:40:26.000
> 
> 标签：javascript, url

如果 URL 有内容，我有两个工作代码可以做某事

首先 ：

```
var oldLocation = location.href;
     function() {
          if ( document.location.href.indexOf('#3') > -1 ) {
               $(document).ready(function(){
                  // Do somthing
               oldLocation = location.href
          }
      }); 
```

如果我在完整背景滑块的右侧幻灯片上，它允许启动我的动画。问题：如果我刷新这张幻灯片有效，但如果我使用幻灯片 2 上的“下一张幻灯片”按钮访问幻灯片 3 则无效

第二 ：

```
var oldLocation = location.href;
 setInterval(function() {
      if(location.href != oldLocation) {
           do your action
           oldLocation = location.href
      }
  }, 1000); // check every second 
```

问题：工作但每秒重新启动我的动画

那么有没有混合它们的解决方案

如果我在幻灯片 3 上，无论我来自哪里，我只想启动我的 jQuery 动画。

我希望被理解

非常感谢<3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:09:56.467

使用 HTML`hashchange`事件来监听 URL 的变化，所以你不需要手动轮询它：

[https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)

# php - 如何检查 URL 是指网页还是文件？

> ID：14540236
> 
> 赞同：0
> 
> 时间：2013-01-26T18:40:31.853
> 
> 标签：php, file, url

如何检查给定的 URL 是指网页还是原始文件？现在，我检查整个文件是否包含字符串`<html>`，但这既不有效也不可靠。

```
$content = file_get_contents($url);
if($content)
{
    // is directory
    if(strrpos($content, "<html>"))
    {
        echo $url . " is a folder." . "<br>";
    }
    else // use raw file...
}
else echo $url . " was not found." . "<br>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:42:10.847

您可以获取标题并检查`content-type`标题。如果它包含`text/html`，则它是一个 HTML 文件。

请参阅[使用 PHP 获取 HTTP 响应标头/重定向状态](https://stackoverflow.com/q/1356640)

不过，这不会是 100% 可靠的——在极少数情况下，服务器可能不会发送`content-type`标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:49:50.823

来自 URL 的数据可以是任何东西，基于磁盘的文件、动态生成的数据流、数据库查询结果等。如果 url 的所有者很有趣，甚至可以将 content-type 标头设置为任何东西或邪恶（例如将内容类型设置为 text/html 并提供几 GB 的随机文本）。

除此之外，您的代码远非最佳解决方案，请考虑一个 url 服务于具有 1 GB 数据大小的文件：您的服务器将受到影响。使用 PHP 的 CURL 扩展的更好解决方案：向 url 发送 HEAD 查询以发现属性，然后将内容下载到磁盘文件并稍后检查（使用 mime 类型检测器或任何其他解决方案）。警告：即使使用 CURL 也不能保护您免受恶意 URL 的侵害（如前所述）。

# node.js - 使用 Pushstate 和 NodeJS

> ID：14540243
> 
> 赞同：2
> 
> 时间：2013-01-26T18:41:02.673
> 
> 标签：node.js, express

我正在使用 NodeJS 和 HTML5 pushstate。我的 index.html 位于“/”，并带有通过 pushstate 转到“/home/”的链接。没关系，但如果我在 /home/ 上刷新页面，我的服务器会返回“无法获取 /home/”。

我只想让“/home/”像“/”一样返回我的 index.html 文件

我的代码：

```
var express = require("express"),
    app = express();

app.use(express.static(__dirname + '/public'));

app.get('/home/', function(req, res, next) {
 //what to do here?
});

app.listen(3001); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:42:39.570

删除`/`之后`/home`：

```
app.get('/home', function(req, res, next) { 
```

关于`what to do here`，您可以收集您需要的数据，并返回响应。例如：`res.end("Hello world!");`

如果您希望在 处提供静态文件`/home`，则：

```
app.use("/home", express.static(__dirname + "/public")); 
```

# ruby-on-rails - 从 3.0 / 1.8.7 移动到 3.2 / 1.9.2 后，在 params 中发送文件数据的功能测试失败

> ID：14540244
> 
> 赞同：1
> 
> 时间：2013-01-26T18:41:11.567
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, ruby-1.9.2

我正在将 ruby​​ 1.8.7 上的 rails 3.0 应用程序迁移到 1.92 上的 3.2 应用程序。所有的测试都通过了，只有一个。下面有很多文字，但问题并不复杂。我只是有点啰嗦。

我有一个电子邮件模型，其中包含文件，用 Paperclip 处理。我有一个在 3.0 / 1.8.7 中工作的创建测试，它使用本地文件为上传文件发送嵌套属性。对于测试，我使用了 Gemfile，因为它很小并且总是在我的仓库中。

测试是这样写的：

```
creatable_attributes = creatable_resource.attributes.merge( {"uploads_attributes"=>[{"name"=>"", "member_id"=>"764", "file"=>File.new('Gemfile')}]} )

post :create, post_var => creatable_attributes 
```

我现在将向您展示 3 件事的调试信息，针对**两个**repo 分支（3.0/1.8.7 和 3.2/1.92）。您会看到导致嵌套上传无法保存的关键区别，我不知道如何修复它。

1) 在测试中看到的 BEFORE SENDING 发送的数据 2) 在接收控制器中看到的数据 3) 在控制器中创建的相应上传

* *3.0/1.8.7 -- “工作”版本 **

**1)**测试中发送的数据如 BEFORE SENDING 所见

```
{
    "uploads_attributes" => [
        [0] {
                 "file" => #<File:Gemfile> -rw-r--r--  1 benlieb  staff  2506 Jan 26 13:15 Gemfile,
            "member_id" => "764",
                 "name" => ""
        }
    ],
            "created_at" => nil,
               "subject" => "string_28636",
         "markup_filter" => nil,
             "member_id" => 6891662,
                  "body" => "string_29201",
            "updated_at" => nil
} 
```

**2)**在接收控制器中看到的参数

```
{
    "controller" => "emails",
         "email" => {
        "uploads_attributes" => [
            [0] {
                     "file" => #<File:Gemfile>   -rw-r--r--  1 benlieb  staff  2506 Jan 26 13:15 Gemfile,
                "member_id" => "764",
                     "name" => ""
            }
        ],
                "created_at" => nil,
                   "subject" => "string_28636",
                 "member_id" => 6891662,
             "markup_filter" => nil,
                "updated_at" => nil,
                      "body" => "string_29201"
    },
        "action" => "create"
} 
```

**3）**在控制器中创建的相应上传（这工作并保存）

```
[
    [0] #<Upload:0x104a9b168> {
                       :id => nil,
                     :name => "",
                :member_id => 764,
           :file_file_name => "Gemfile",
        :file_content_type => "text/plain",
           :file_file_size => 2506,
          :file_updated_at => Sat, 26 Jan 2013 13:16:51 EST -05:00,
               :created_at => nil,
               :updated_at => nil
    }
] 
```

* *3.2/1.9.2 -- '失败' 版本 **

**1）**发送的数据如BEFORE SENDING所示，在测试中（注意文件与3.0/1.9.2相同）

```
{
                    "id" => nil,
               "subject" => "string_3556259",
                  "body" => "string_35571",
             "member_id" => 1644867,
         "markup_filter" => nil,
            "created_at" => nil,
            "updated_at" => nil,
    "uploads_attributes" => [
        [0] {
                 "name" => "",
            "member_id" => "764",
                 "file" => #<File:Gemfile>   -rw-r--r--  1 benlieb  staff  2828 Jan 26 13:34 Gemfile
        }
    ]
} 
```

**2）**接收控制器中看到的参数（注意文件数据已更改）

```
{
         "email" => {
                        "id" => nil,
                   "subject" => "string_3556259",
                      "body" => "string_35571",
                 "member_id" => "1644867",
             "markup_filter" => nil,
                "created_at" => nil,
                "updated_at" => nil,
        "uploads_attributes" => [
            [0] {
                     "name" => "",
                "member_id" => "764",
                     "file" => "#<File:0x0000010343d1f0>"
            }
        ]
    },
    "controller" => "emails",
        "action" => "create"
} 
```

**3）**控制器中创建的对应上传（该文件保存失败，出错了）

```
[
    [0] #<Upload:0x000001061aeee0> {
                       :id => nil,
                     :name => "",
                :member_id => 764,
           :file_file_name => nil,
        :file_content_type => nil,
           :file_file_size => nil,
          :file_updated_at => nil,
               :created_at => nil,
               :updated_at => nil
    }
] 
```

这里有一些文件可以很好地衡量：[https ://gist.github.com/4643779](https://gist.github.com/4643779)

所以我的问题是发生了什么，我该如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:59:03.507

找到了解决方案。我不得不将 File.new 更改为 Rack::Test::UploadedFile.new

# javascript - 如何获取json文件的数组javascript？

> ID：14540248
> 
> 赞同：1
> 
> 时间：2013-01-26T18:41:42.813
> 
> 标签：javascript, jquery, arrays, json

我有一个外部文件**contacts.json**。如何将其转换为 javascript 数组？
这是**contacts.json**内容：

```
{
    "ppl1":{
        "Name":"Jhon",
        "Surname":"Kenneth",
        "mobile":329129293,
        "email":"jhon@gmail.com"
    },
    "ppl2":{
        "Name":"Thor",
        "Surname":"zvalk",
        "mobile":349229293,
        "email":"thor@gmail.com"
    },
    "ppl3":{
        "Name":"Mila",
        "Surname":"Kvuls",
        "mobile":329121293,
        "email":"mila@gmail.com"
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T11:10:36.677

解决了：

```
$.getJSON('contacts.json', function (json) {
var array = [];
for (var key in json) {
    if (json.hasOwnProperty(key)) {
        var item = json[key];
        array.push({
            name: item.Name,
            surname: item.Surname,
            mobile: item.mobile,
            email: item.email
        });            
    }
}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:44:18.607

```
var items = [];
$.each(JSONObject.results.bindings, function(i, obj) {
    items.push([obj.place.value, obj.lat.value, obj.long.value, obj.page.value]);
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-26T18:44:12.273

[在这里](https://stackoverflow.com/questions/10356370/convert-array-of-json-object-strings-to-array-of-js-objects)回答。

```
// JavaScript array of JavaScript objects
var objs = json_string.map(JSON.parse);

// ...or for older browsers
var objs=[];
for (var i=json_string.map.length;i--;) objs[i]=JSON.parse(json_string.map[i]);

// ...or for maximum speed:
var objs = JSON.parse('['+json_string.map.join(',')+']'); 
```

# c# - 如何使用正则表达式从 url 中提取某些值？

> ID：14540253
> 
> 赞同：1
> 
> 时间：2013-01-26T18:42:20.447
> 
> 标签：c#, regex

> **可能重复：**
> [在 C# 中解析字符串中查询字符串的最佳方法](https://stackoverflow.com/questions/1206548/most-optimal-way-to-parse-querystring-within-a-string-in-c-sharp)

我有以下网址作为输入。

```
string strInput = @"http://ping.com/default.aspx?
val=88.998~98.3399&val=12.55_14.55&val=8.299&val=7.299&val=9.299"; 
```

我想提取值 88.998 ,98.3399 和 7.299。有时这些值可能为空。我尝试了`@"(?\=<val1>\d+\~$)"`提取 88.998 的模式，但没有奏效。而且我也无法获得其他两个值 98.3399 和 7.299。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:45:47.833

See [https://stackoverflow.com/a/1206659/284795](https://stackoverflow.com/a/1206659/284795)

> You can do it this way:
> 
> ```
> using System.Collections.Specialized;
> 
> NameValueCollection query = HttpUtility.ParseQueryString(queryString);
> Response.Write(query["id"]); 
> ```
> 
> Hope it helps.

# c++ - 逆总函数

> ID：14540255
> 
> 赞同：5
> 
> 时间：2013-01-26T18:42:27.357
> 
> 标签：c++, c, algorithm

鉴于`n`，我想找到我这样`phi(i) = n`。`n <= 100,000,000`. 的最大值`i = 202918035 for n = 99683840`。我想解决[这个问题](http://www.spoj.com/problems/INVPHI/)

我的方法是预先计算所有数字的全部函数，直到最大值`i`。为此，我首先`i`使用 erathronese 的筛子找到最大的所有质数。在筛分时记录素数的总数。然后使用

![在此处输入图像描述](../Images/fb4a8378513caae4e5d74fab0cbd91db.png)

然后我在数组中搜索输入数字`phi`并将结果打印到输出。但它超出了时间限制。在预计算中可以进一步优化什么，或者有更好的方法来做到这一点？

我的代码是：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

using namespace std;

int* Prime = (int*)malloc(sizeof(int) * (202918036 >> 5 + 1));
int* pos = (int*)malloc(sizeof(int) * (11231540));
int* phi = (int*)malloc(sizeof(int) * 202918036);

#define prime(i) ((Prime[i >> 5]) & (1 << (i & (31))))
#define set(j) (Prime[j >> 5] |= (1 << (j & (31))))
#define LIM 202918035
#define SLIM 14245

int sieve() {
    int i, j, m, n, t, x, k, l, h;
    set(1);
    phi[0] = 0;
    phi[1] = 0;
    pos[1] = 2;
    phi[2] = 1;
    pos[2] = 3;
    phi[3] = 2;
    for (k = 2, l = 3, i = 5; i <= SLIM; k++, i = 3 * k - (k & 1) - 1)
    if (prime(k) == 0) {
        pos[l++] = i;
        phi[i] = i - 1;
        for (j = i * i, h = ((j + 2) / 3); j <= LIM; h += (k & 1) ? (h & 1 ? ((k << 2) - 3) : ((k << 1) - 1)) : (h & 1 ? ((k << 1) - 1) : ((k << 2) - 1)), j = 3 * h - (h & 1) - 1)
        set(h);
    }

    i = 3 * k - (k & 1) - 1;
    for (; i <= LIM; k++, i = 3 * k - (k & 1) - 1)
    if (prime(k) == 0) {
        pos[l++] = i;
        phi[i] = i - 1;
    }
    return l;
}

int ETF() {
    int i;
    for (i = 4; i < LIM; i++) {
        if (phi[i] == 0) {
            for (int j = 1; j < i; j++) {
                if (i % pos[j] == 0) {
                    int x = pos[j];
                    int y = i / x;
                    if (y % x == 0) {
                        phi[i] = x * phi[y];
                    } else {
                        phi[i] = phi[x] * phi[y];
                    }
                    break;
                }
            }
        }
    }
}

int search(int value) {
    for (int z = 1; z < LIM; z++) {
        if (phi[z] == value) return z;
    }
    return -1;
}

int main() {

    int m = sieve();

    int t;
    ETF();

    scanf("\n%d", &t);
    while (t--) {
        int n;
        scanf("%d", &n);
        if (n % 2 == 1) {
            printf("-1\n");
        } else {
            int i;
            i = search(n);
            if (i == -1) printf("-1\n");
            else printf("%d\n", i);
        }

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:59:11.877

这

```
 for(int j=1;j<i;j++)
     {            
        if(i%pos[j]==0)
        { 
```

表示您正在`i`通过试除法找到最小的质因数。这使得你的算法`O(n^2/log^2 n)`，因为有大约`n/log n`不超过的素数`n`，并且对于素数`i`，你测试所有不超过的素数`i`。

如果您使用筛子找到最小的 [或任何] 素因子，您可以获得更快的算法（不过我怀疑它是否足够快）。这是对埃拉托色尼筛法的简单修改，而不是仅仅将一个数字标记为合数，而是将素数存储为该数字的一个因子。在用每个数字的素因子填充筛子后，您可以像您一样计算总分

```
phi[i] = p*phi[i/p] 
```

如果`p²`划分`i`或

```
phi[i] = (p-1)*phi[i/p] 
```

如果没有。

使用该方法计算 totients 是一种`O(n*log n)`[也许甚至`O(n*log log n)`，我还没有详细分析过它] 算法。

此外，您的搜索

```
int search(int value) {
    for (int z = 1; z < LIM; z++) {
        if (phi[z] == value) return z;
    }
    return -1;
} 
```

很慢。您可以制作一个查找表来进行 O(1) 查找。

# python - 脚本打印乱序

> ID：14540256
> 
> 赞同：3
> 
> 时间：2013-01-26T18:42:32.247
> 
> 标签：python, printing, python-2.7

我正在使用 Python 2.7.3 并试图理解为什么这个脚本会乱序执行打印语句。即“-”在第二个 for 循环之后打印。

我的脚本：

```
def cheeseshop(kind, *arguments, **keywords):
    print "-- Do you have any", kind, "?"
    print "-- I'm sorry, we're all out of", kind
    for arg in arguments:
        print arg
    print "-" * 40
    keys = sorted(keywords.keys())
    for kw in keys:
        print kw, ":", keywords[kw]

cheeseshop("Limburger", "It's very runny, sir.",
           "It's really very, VERY runny, sir.",
           {'shopkeeper':'Michael Palin',
           'client':"John Cleese",
           'sketch':"Cheese Shop Sketch"}) 
```

输出：

```
-- Do you have any Limburger ?
-- I'm sorry, we're all out of Limburger
It's very runny, sir.
It's really very, VERY runny, sir.
{'shopkeeper': 'Michael Palin', 'sketch': 'Cheese Shop Sketch', 'client': 'John Cleese'}
---------------------------------------- 
```

为什么按预期打印“-”* 40 在字典之前执行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T18:45:10.433

You didn't pass in the dictionary as keywords. Use the `**` syntax to do so:

```
cheeseshop("Limburger", "It's very runny, sir.",
           "It's really very, VERY runny, sir.",
           **{'shopkeeper':'Michael Palin',
           'client':"John Cleese",
           'sketch':"Cheese Shop Sketch"}) 
```

or don't use a dictionary at all:

```
cheeseshop("Limburger", "It's very runny, sir.",
           "It's really very, VERY runny, sir.",
           shopkeeper='Michael Palin',
           client="John Cleese",
           sketch="Cheese Shop Sketch") 
```

# audio - 在C#中以编程方式同时播放多个音频文件的好工具是什么

> ID：14540261
> 
> 赞同：2
> 
> 时间：2013-01-26T18:42:46.527
> 
> 标签：audio, mp3, wav, playback, simultaneous

我需要一些能让我的程序同时播放多个音频文件（.wav 和/或 .mp3）的东西。如果我可以简单地将文件路径传递给某个方法，那将是*理想*的，它会播放该文件，而我不必担心任何细节。

其他要求：

1）我需要能够随时以编程方式开始和停止播放任何音频文件。

2）我需要知道每个音频文件何时完成播放（通过响应事件或通过某些属性知道声音文件的持续时间（样本、秒等））

3) 此工具必须能够播放任何长度/持续时间的 .wav（最好是 .mp3）文件。

4）此工具必须能够同时播放多个音频文件（最好同时播放至少5或6个音频文件）。

我已经尝试过使用 SlimDX 和 SharpDX，但我找不到任何以编程方式确定文件何时停止播放或找到文件的持续时间（长度）的方法。

编辑：

我相信我找到了我要找的东西！GStreamer 似乎可以满足我的所有要求。[http://www.gstreamer.com/](http://www.gstreamer.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:24:20.097

所有音频 API 都将允许同时播放多个文件（混合在幕后进行，您无需担心）。

原生 API：

*   `waveOut*`函数族，用于解压的 ACM
*   DirectSound（播放）
*   DirectShow（解码、播放）
*   WASAPI（回放）
*   媒体基金会

或者，将[NAudio](http://naudio.codeplex.com/)用于上述 C# 包装器。当您需要某些详细信息和代码片段时，您会在 StackOverflow 上找到许多关于 NAudio 的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:28:19.053

这个问题的通用答案（适用于*我如何在框架/语言 X 问题中一次播放多个样本*的大多数问题）是软件将文件混合在一起。

这样做的好处是让您可以完全控制各个音频流何时开始和停止以及同步——这在使用更高级别的媒体播放器组件时通常非常困难。

这样做的步骤是：

1.  将所有要输出的音频加载（和格式转换/解码）到内存缓冲区
2.  对于在给定时刻播放的每个音频文件，通过将它们加在一起来混合每个文件中的相应样本。
3.  [并非总是必要] 调整所得样本的增益 - 通常这是除以混合样本的数量
4.  将结果存储到另一个内存缓冲区

您现在已将问题简化为要输出的单个音频流。您很可能使用您选择的框架的音频输出 API，它会定期请求输出样本缓冲区。

如果您的音频流很大，问题会变得有点复杂，因为您需要一次处理一些输入流。

# android - git push 如何与 android 的 repo 工具配合使用？

> ID：14540262
> 
> 赞同：13
> 
> 时间：2013-01-26T18:42:51.137
> 
> 标签：android, git, github, gerrit, repository

我习惯于使用`git`单个存储库。但是，我最近一直在涉足 Android 开发，并试图将我的头脑围绕在`repo`. 我通过在`.repo/local_manifests`目录中创建 xmls 设置了一些自定义 git repos（我使用的是 repo 1.19）并且`repo sync`工作正常。

当我查看自定义 git 存储库时，他们说`# Not currently on any branch.`这看起来就像我使用类似命令`git checkout abcd1234`（检查提交 abcd1234）而不是`git checkout origin/master`. 至于做出改变，我不知道如何推回原点。这是我正常的 git 工作流程。

```
git checkout origin/master
#make changes to working directory
git add .
git commit -m 'useful message'
#assume time has passed and there could be changes upstream
git fetch
git rebase origin/master
git push origin master 
```

现在我在技术上不再在分支上，我如何推送更改？我知道有一个工具`repo upload`，但我不确定它是如何工作的。我从未使用过 Gerrit，但也许值得进行设置，以便其他团队成员可以在将代码推送到 Github 之前对其进行审查。`repo`老实说，我对和的理解仍然非常抽象`Gerrit`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-27T07:11:54.470

从技术上讲，如果你这样做

```
git checkout origin/master 
```

您立即进入分离的 HEAD 状态。

无论好坏，这正是`repo sync`默认情况下所做的 - 这样清单中列出的每个存储库在 fresh 之后都处于分离的 HEAD 状态`repo sync`。

分离的 HEAD 是完全正常的状态`repo`- 如果 origin/master 向前移动，`repo sync`也会移动你的本地状态（实际上它会`git checkout origin/master`再次移动）。

但是，如果您想进行自己的更改并将它们推送到上游，那么这种奇怪的状态并不好。在这种情况下，您可以执行以下操作之一：

```
repo start master . 
```

这意味着开始跟踪`master`当前项目（`.`）中调用的分支。

或者，您可以使用（实际上我更喜欢这个）：

```
git checkout --track origin/master 
```

这两种方法都会给你几乎相同的结果：你将不再处于分离的 HEAD 状态，而是在将跟踪远程分支的本地分支上。

此时，您可以进行本地提交并使用标准将它们直接推送到上游`git push`（但服务器策略可能不允许这样做），或者您可以提交 Gerrit 代码审查（强烈推荐，并且是大多数 Android 商店的默认选择）。一旦跟踪分支到位，提交给 Gerrit 就像

```
repo upload     # upload changes in multiple repositories at once 
```

或者

```
repo upload .   # upload changes in current git repo only, fast! 
```

（这假设您的清单包含审查服务器的正确设置）。

# jquery - 制作jquery滑块全屏并使用html 5元素？

> ID：14540264
> 
> 赞同：1
> 
> 时间：2013-01-26T18:43:04.487
> 
> 标签：jquery, html

在我开始为 html5 编写 jquery 滑块全屏这个漫长的任务之前，我想知道你们中是否有人以前做过这个，或者知道可以完成这个的插件吗？

当大小固定时，很容易实现这一点，但是如何制作全屏滑块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:45:19.473

我最近在[pixolith](http://pixolith.de)网站上使用[Nivo Slider完成了这项工作。](http://nivo.dev7studios.com/)只需确保滑块的宽度为 100%。

# asp.net - 确定在运行网站的服务器上安装的 .Net Framework 和服务包，而无需访问服务器

> ID：14540265
> 
> 赞同：1
> 
> 时间：2013-01-26T18:43:05.547
> 
> 标签：asp.net, windows-server-2008

我发现了一些类似的问题来提出这个问题，但通常是在能够查看服务器或访问桌面的情况下。这个问题的一些答案提到了如何远程进行：

[如何判断是否安装了 .NET 3.5 SP1？](https://stackoverflow.com/questions/198931/how-do-i-tell-if-net-3-5-sp1-is-installed)

但我不确定在我的情况下答案是否准确或可能。

所以**TL;DR：**在没有登录访问权限的情况下，有什么确定的方法不仅可以确定框架版本和服务包，还可以确定 windows 服务器操作系统本身（我现在还不确定）？

说明：我正在开发一个托管在我无权访问的服务器上的 Intranet asp.net 应用程序。我无法远程桌面。我没有登录名。我唯一可以访问的是我网站文件系统的虚拟目录。现在，当我添加这些程序集时，我的站点出现错误：

```
<add assembly="System.Web.Entity, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Data.Entity, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/> 
```

研究指出，必须在 Web 服务器上安装 .net 3.5 Service Pack 1 才能获取这些添加的程序集。

[我使用了这段代码](https://stackoverflow.com/a/2748208/983106)，[这段代码](https://stackoverflow.com/a/198959/983106)在网页中运行，结果返回显示相同的内容：该框架 3.5 是在没有 sp1 的情况下安装的。

所以我给运行服务器的 IT 组发了电子邮件，告诉他们他们没有安装 sp1。好吧，这引起了一些高层的关注，这封电子邮件也引起了一些热议。然后 IT 小组回邮件说他们实际上已经安装了 SP2，其中包括所有 SP1 的东西。我重新进行了测试，得到了相同的结果。这是令人担忧的，因为如果他们之前没有安装它，他们肯定会尝试现在安装它......所以我担心我使用的代码不起作用，或者没有检测到他们是否有已安装 SP2。服务器仍然没有检测到我的程序集。

我现在看起来很糟糕，如果我对此有误或真的表明他们没有安装它，我想尽快道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:12:50.087

.NET 3.5 没有 SP2，而 .NET 3.0 和 .NET 2.0 有 SP2，参见。[http://en.wikipedia.org/wiki/.NET_Framework_version_history](http://en.wikipedia.org/wiki/.NET_Framework_version_history)和[http://social.msdn.microsoft.com/Search/en-US?query=.net%203.5%20sp2](http://social.msdn.microsoft.com/Search/en-US?query=.net%203.5%20sp2)。他们不可能安装它。不幸的是，这会让您回到起点；您需要尝试与系统管理员建立工作关系，以便您可以继续前进。

# javascript - 通过一个旋钮滑块导航图像

> ID：14540271
> 
> 赞同：1
> 
> 时间：2013-01-26T18:43:57.820
> 
> 标签：javascript, jquery, slider, jquery-ui-slider

我想用一个旋钮滑块浏览一组 10 张图像。想象一下，我有一个图像序列和一个旋钮位置 1。

显示的图像 1
1 2 3 4 5 6 7 8 9 10
x - - - - - - - - -

如果用户知道用鼠标将滑块上的旋钮向右拖动

显示图像 4
1 2 3 4 5 6 7 8 9 10
- - - - x - - - - -

基本上我想一次总是显示一张图像，但用户可以通过拖动滑块上的旋钮从左到右轻弹图像（http://jquerymobile.com/demos/1.0/docs/forms/slider/ index.html)

这个问题已经有解决方案了吗？

谢谢你，周末愉快。

inbox.php (this page is loaded inside home.php, using Ajax)  ............ //some other scriptNieuw bericht

| Aan: |  |
| Onderwerp: |  |

<textarea id="BerichtTextarea"></textarea>
And this is the Ajax part. This script is being called when clicking on a button in home.php (link not included, but is called through onClick='showInbox(id)'). function showInbox(id){ if (id==''){ document.getElementById("middenpag").innerHTML=""; return; } if (window.XMLHttpRequest){ xmlhttp=new XMLHttpRequest(); } else{ xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); } xmlhttp.onreadystatechange=function(){ if(xmlhttp.readyState==4 && xmlhttp.status==200){ document.getElementById("middenpag").innerHTML=xmlhttp.responseText; } } xmlhttp.open("GET","inbox.php?id="+id,true); xmlhttp.send(); } I hope you guys can see what I am doing wrong here! Thank you :) var items = []; $.each(JSONObject.results.bindings, function(i, obj) { items.push([obj.place.value, obj.lat.value, obj.long.value, obj.page.value]); }); phpjqueryajaxjquery-ui-autocomplete 4 2 回答 2 This answer is useful 1 正如评论所指出的，不要包含多个 jQuery 库。选择您想要/需要的一个版本并使用它。您包含 jQuery-ui 版本 1.10.0，它实际上是最新的并且仅与 jQuery 核心 1.6+ 兼容，因此请取出您的 1.3.0 包含。 您正在从内联事件调用autocomplete()home.php 中定义的自定义方法。onkeydown这是不必要的，就像autocomplete()您声明的整个方法一样。从基本的自动完成示例开始，您需要做的唯一代码如下： 配置文件.php html  在您的示例中，我看到您还错过了输入元素上的结束标记。此外，如果您将其作为表单的一部分提交，您将需要填写name=''输入的属性，否则处理表单提交的服务器脚本将无法获取变量的请求。 javascript 数组声明 - 如果你只在 profile.php 中使用它，那么把它放在那里。如果您在不同的包含文件之间重用相同的自动完成选项，请将其放在 home.php 中。或者将它放在一个单独的 .php 文件中，您可以include_once从最终使用它的任何文件中获取它。  javascript 自动完成绑定 - 每次自动完成只需执行一次，使用document.ready处理程序，不要尝试将它与 onkeydown 内联事件一起使用。 **  <link rel="stylesheet" href="autocomplete/token-input.css" type="text/css"> <link rel="stylesheet" href="autocomplete/token-input-facebook.css" type="text/css"> <link rel="stylesheet" href="../../css/ui.all.css"> <link rel="stylesheet" href="../../css/styler.css"> ****   我在我的模板中添加了新的 jquery.min.js 用于自动完成， ...  ... 我发现问题是（.. bla bla object#() has no method...），问题的关键是这个... ...  <--  --> ... 所以我禁用了那个链接，Alhamdulilah 它工作了。我希望，可能有用 于 2013-03-17T13:48:59.677 回答 Related 1 ghostscript - 由 ghostscript 创建的图像变色 2 java - 在单个进程中运行 DB2 java 存储过程 1 google-app-engine - 在 BigQuery 上加载 Google App Engine 备份时出错 5 c - 带有 void 参数列表的 main 与带有空参数列表的 main 是否不同？ 1 c# - .NET Framework 3.5 和 .NET 4.0 下的并行执行 0 java - 将android java代码转录为Objective-C Xcode 2 wpf - WPF DataGrid，Ctrl+C后复制到剪贴板，OnCopyingRowClipboardContent 12 linux - 如何使 rpm 自动安装依赖项 2 c# - 在 Visual Studio 2010 中创建 .exe 1 ios - iOS从pdf获取文本 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# php - 未捕获的类型错误：对象# has no method 'autocomplete' I got a problem and I hope you guys can help me solve it. I have this function in which I want to use autocomplete. With the help below, I managed to remove the error but now it j 问问题 问问题 2013-01-26T18:44:16.343 6047 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I got a problem and I hope you guys can help me solve it. I have this function in which I want to use autocomplete. With the help below, I managed to remove the error but now it just doesn't work when using Ajax. Like I wrote before, the bottom script (inbox.php) is loaded inside the top script (home.php). I found out that the autocomplete script works if I open the page seperately (so just going to localhost/inbox.php), but when going through Ajax, it loses this. That's why I think now, that the problem is in the Ajax script, which can be found at the last part of the examples. home.php (main page)  <link rel="stylesheet" href="homeV2.css" type="text/css" media="screen">    <link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.0/themes/black-tie/jquery-ui.css"> <title> Homepage Westpop Intranet </title>  inbox.php (this page is loaded inside home.php, using Ajax)  ............ //some other scriptNieuw bericht

| Aan: |  |
| Onderwerp: |  |

<textarea id="BerichtTextarea"></textarea>
And this is the Ajax part. This script is being called when clicking on a button in home.php (link not included, but is called through onClick='showInbox(id)'). function showInbox(id){ if (id==''){ document.getElementById("middenpag").innerHTML=""; return; } if (window.XMLHttpRequest){ xmlhttp=new XMLHttpRequest(); } else{ xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); } xmlhttp.onreadystatechange=function(){ if(xmlhttp.readyState==4 && xmlhttp.status==200){ document.getElementById("middenpag").innerHTML=xmlhttp.responseText; } } xmlhttp.open("GET","inbox.php?id="+id,true); xmlhttp.send(); } I hope you guys can see what I am doing wrong here! Thank you :) var items = []; $.each(JSONObject.results.bindings, function(i, obj) { items.push([obj.place.value, obj.lat.value, obj.long.value, obj.page.value]); }); phpjqueryajaxjquery-ui-autocomplete 4 2 回答 2 This answer is useful 1 正如评论所指出的，不要包含多个 jQuery 库。选择您想要/需要的一个版本并使用它。您包含 jQuery-ui 版本 1.10.0，它实际上是最新的并且仅与 jQuery 核心 1.6+ 兼容，因此请取出您的 1.3.0 包含。 您正在从内联事件调用autocomplete()home.php 中定义的自定义方法。onkeydown这是不必要的，就像autocomplete()您声明的整个方法一样。从基本的自动完成示例开始，您需要做的唯一代码如下： 配置文件.php html  在您的示例中，我看到您还错过了输入元素上的结束标记。此外，如果您将其作为表单的一部分提交，您将需要填写name=''输入的属性，否则处理表单提交的服务器脚本将无法获取变量的请求。 javascript 数组声明 - 如果你只在 profile.php 中使用它，那么把它放在那里。如果您在不同的包含文件之间重用相同的自动完成选项，请将其放在 home.php 中。或者将它放在一个单独的 .php 文件中，您可以include_once从最终使用它的任何文件中获取它。  javascript 自动完成绑定 - 每次自动完成只需执行一次，使用document.ready处理程序，不要尝试将它与 onkeydown 内联事件一起使用。 **  <link rel="stylesheet" href="autocomplete/token-input.css" type="text/css"> <link rel="stylesheet" href="autocomplete/token-input-facebook.css" type="text/css"> <link rel="stylesheet" href="../../css/ui.all.css"> <link rel="stylesheet" href="../../css/styler.css"> ****   我在我的模板中添加了新的 jquery.min.js 用于自动完成， ...  ... 我发现问题是（.. bla bla object#() has no method...），问题的关键是这个... ...  <--  --> ... 所以我禁用了那个链接，Alhamdulilah 它工作了。我希望，可能有用 于 2013-03-17T13:48:59.677 回答 Related 1 ghostscript - 由 ghostscript 创建的图像变色 2 java - 在单个进程中运行 DB2 java 存储过程 1 google-app-engine - 在 BigQuery 上加载 Google App Engine 备份时出错 5 c - 带有 void 参数列表的 main 与带有空参数列表的 main 是否不同？ 1 c# - .NET Framework 3.5 和 .NET 4.0 下的并行执行 0 java - 将android java代码转录为Objective-C Xcode 2 wpf - WPF DataGrid，Ctrl+C后复制到剪贴板，OnCopyingRowClipboardContent 12 linux - 如何使 rpm 自动安装依赖项 2 c# - 在 Visual Studio 2010 中创建 .exe 1 ios - iOS从pdf获取文本 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14540275
> 
> 赞同：2
> 
> 时间：
> 
> 标签：php, jquery, ajax, jquery-ui-autocomplete

I got a problem and I hope you guys can help me solve it.

I have this function in which I want to use autocomplete. With the help below, I managed to remove the error but now it just doesn't work when using Ajax. Like I wrote before, the bottom script (inbox.php) is loaded inside the top script (home.php).

I found out that the autocomplete script works if I open the page seperately (so just going to localhost/inbox.php), but when going through Ajax, it loses this. That's why I think now, that the problem is in the Ajax script, which can be found at the last part of the examples.

*home.php (main page)*

```
<head>

    <meta charset="UTF-8">
    <link rel="stylesheet" href="homeV2.css" type="text/css" media="screen">
    <script type="text/javascript" src="javascript/index.js"></script>
    <script type='text/javascript' src='http://code.jquery.com/jquery-1.6.4.js'></script>
    <script type='text/javascript' src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.0/jquery-ui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.0/themes/black-tie/jquery-ui.css">

    <title> 
        Homepage Westpop Intranet 
    </title>

    <script>
        window.onload = function()
            {
                showHome(<?=$gid?>);
                refreshChat();
                countdown();                                
            }           
    </script>

</head> 
```

*inbox.php (this page is loaded inside home.php, using Ajax)*

```
<script type="text/javascript">
   var names = ['hi', 'bye', 'foo', 'bar'];

    $(document).ready(function() {
        $("#inputNaam").autocomplete({
          source: names
        });
    });
</script>
............ //some other script
    </div>
            </div>
        <div id='profielNieuwBericht'>
            <div id='nieuwBerichtKop'>
                Nieuw bericht
            </div>
            <table>
                <tr>
                    <td>Aan: </td>
                    <td><input type='text' class='inputNieuwBericht' id='inputNaam' /> </td>
                </tr>
                <tr>
                    <td> Onderwerp: </td>
                    <td> <input type='text' class='inputNieuwBericht' id='inputOnderwerp' /></td>
            </table>
            <textarea id='BerichtTextarea'></textarea></br>
            <input type='button' id='BerichtManagementButton' value='Stuur' />
        </div>
    </div> 
```

*And this is the Ajax part. This script is being called when clicking on a button in home.php (link not included, but is called through onClick='showInbox(id)').*

```
function showInbox(id){
if (id==''){
    document.getElementById("middenpag").innerHTML="";
    return;
}

if (window.XMLHttpRequest){
    xmlhttp=new XMLHttpRequest();
}
else{
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.onreadystatechange=function(){
    if(xmlhttp.readyState==4 && xmlhttp.status==200){
        document.getElementById("middenpag").innerHTML=xmlhttp.responseText;
    }
}
xmlhttp.open("GET","inbox.php?id="+id,true);
xmlhttp.send(); 
```

}

I hope you guys can see what I am doing wrong here! Thank you :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:17:07.920

正如评论所指出的，不要包含多个 jQuery 库。选择您想要/需要的一个版本并使用它。您包含 jQuery-ui 版本 1.10.0，它实际上是最新的并且[仅与 jQuery 核心 1.6+ 兼容](http://jqueryui.com/upgrade-guide/1.10/)，因此请取出您的 1.3.0 包含。

您正在从内联事件调用`autocomplete()`home.php 中定义的自定义方法。`onkeydown`这是不必要的，就像`autocomplete()`您声明的整个方法一样。从[基本的自动完成示例](http://jqueryui.com/autocomplete/)开始，您需要做的唯一代码如下：

配置文件.php html

```
<input type="text" class="inputNieuwBericht' id="inputNaam' /> 
```

在您的示例中，我看到您还错过了输入元素上的结束标记。此外，如果您将其作为表单的一部分提交，您将需要填写`name=''`输入的属性，否则处理表单提交的服务器脚本将无法获取变量的请求。

javascript 数组声明 - 如果你只在 profile.php 中使用它，那么把它放在那里。如果您在不同的包含文件之间重用相同的自动完成选项，请将其放在 home.php 中。或者将它放在一个单独的 .php 文件中，您可以`include_once`从最终使用它的任何文件中获取它。

```
<script type="text/javascript">
   var names = ['hi', 'bye', 'foo', 'bar'];
</script> 
```

javascript 自动完成绑定 - 每次自动完成只需执行一次，使用`document.ready`处理程序，不要尝试将它与 onkeydown 内联事件一起使用。

```
<script type="text/javascript">
    $(document).ready(function() {
        $( "#tags" ).autocomplete({
          source: names
        });
    }); 
```

你完成了。最后，正如其他人也提到的，不要发布代码的屏幕截图。复制/粘贴您的代码，将其缩进以使其格式化为代码，并指出错误发生在哪一行。此外，您应该在包含 profile.php 的地方包含一些代码。您对其工作原理的描述不充分。

> 底部图片 (​​profiel.php) 在顶部图片 (​​home.php) 的脚本中加载。

这可能是一个 iFrame、一个 php include 或 require、任意数量的 javascript/ajax 加载等，所有这些都会对代码的工作方式产生不同的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:48:59.677

是的，我有解决该问题的方法之一。

在我的程序中，问题是**template.tpl**文件中的 jquery 重复

```
**<script type="text/javascript" src="autocomplete/jquery.min.js"></script>**
<script type="text/javascript" src="autocomplete/jquery.tokeninput.js"></script>

<link rel="stylesheet" href="autocomplete/token-input.css" type="text/css" />
<link rel="stylesheet" href="autocomplete/token-input-facebook.css" type="text/css" />
<link rel="stylesheet" href="../../css/ui.all.css" rel="stylesheet" />
<link rel="stylesheet" href="../../css/styler.css"> 

**<script type="text/javascript" src="../../jsd/jquery-1.3.2.js"></script>**
<script type="text/javascript" src="../../jsd/ui.core.js"></script>
<script type="text/javascript" src="../../../js/ui.datepicker.js"></script> 
```

我在我的模板中添加了新的 jquery.min.js 用于自动完成，

```
...
<script type="text/javascript" src="autocomplete/jquery.min.js"></script>
... 
```

我发现问题是（.. bla bla object#() has no method...），问题的关键是这个...

```
...
<!-- Trouble Autocomplete, so I disable this code -->
<-- <script type="text/javascript" src="../../jsd/jquery-1.3.2.js"></script> -->
... 
```

所以我禁用了那个链接，Alhamdulilah 它工作了。我希望，可能有用

# android - Phonegap navigation and session maintenance

> ID：14540277
> 
> 赞同：1
> 
> 时间：2013-01-26T18:44:19.827
> 
> 标签：android, session, cordova

I am trying to convert a website to a phonegap android application. The web server sets the session id on the client as a cookie. This session id has to be maintained for the complete session.

When I move from one page to another ( the second page is a local html file in the app), using href, or window.location, or navigator.app.loadUrl, it loads the second page in a browser, and the cookies get destroyed, so I can't make an valid ajax request from the second page.

I wouldn't prefer putting all the pages in a single html file ( like jquery mobile) . Given that I have seperate html files, how to navigate between them, such that the second page is loaded in the same webview,( so that the cookies are preserved) rather than in a browser. Do I have to create another activity for it ?

Is there any other way of navigation in phonegap, except those mentioned above ? Or is the only way of staying in the same webview is to dynamically load pages using ajax and replace the existing page with them ?

Another possibility is I can parse the session id from the response, store it in the local storage and append with every request. But this cookie is HTTP Read only, so I can't read it using javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:17:32.753

Backbone.js 是一个很棒的工具，它有很好的分页路由功能，hash 会改变，但是你的 js 对象会保持不变，因为页面没有被刷新，试试看。

我认为它比使用 cookie 更好地使用 localStorage，它更容易并且会与您的页面一起使用。

得到通知，即使用户关闭并重新打开您的应用程序，localStorage 仍保留在设备上。

用法：

```
localStorage.setItem("foo","bar");
console.log(localStorage.getItem("foo")); //Output: bar 
```

# jquery - 使用 jquery 对列表项进行分组

> ID：14540285
> 
> 赞同：1
> 
> 时间：2013-01-26T18:45:11.507
> 
> 标签：jquery, html

我的 html 文件中有以下简单的列表项代码

```
<ul>
    <li>item one</li>
    <li>item two</li>
    <li>item three</li>

    <li>item four</li>
    <li>item five</li>
    <li>item six</li>

    <li>item seven</li>
    <li>item eight</li>
    <li>item nine</li>

    <li>item ten</li>
    <li>item eleven</li>
    <li>item twelve</li>    
</ul> 
```

我想使用 jQuery 以这种方式输出。

```
item one     item four    item seven    item ten
item two     item five    item eight    item eleven
item three   item six     item nine     item twelve 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:39:06.793

这是一个创建多个`UL`并浮动它们的解决方案

CSS

```
.col_4 {
    width:25%;
    float:left
} 
```

HTML

```
<ul class="list"><li></li></ul> 
```

JS

```
/* config*/
var numCols = 4,
    listClass = 'list';

var $list = $('.' + listClass),
    $container = $list.parent(),
    $items = $list.children().detach(),
    numItems = $items.length,
    itemsPerCol = Math.ceil(numItems / numCols),
    sliceStart = 0;

/* remove original empty list and create new ones*/
$list.remove();

for (i = 0; i < numCols; i++) {
    var endSlice = sliceStart + itemsPerCol + 1;
    $('<ul class="' + listClass + ' col_' + numCols + '">')
                        .append($items.slice(sliceStart, endSlice))
                        .appendTo($container);
    sliceStart += itemsPerCol;
}; 
```

演示[http://jsfiddle.net/G7BfY/](http://jsfiddle.net/G7BfY/)

# java - FileInputStream 问题 - 没有段落

> ID：14540289
> 
> 赞同：0
> 
> 时间：2013-01-26T18:45:20.037
> 
> 标签：java, android

我正在创建一个应用程序，要求用户输入一些关于他们自己的信息。信息必须有几段长，为此，他们必须使用手机键盘上的输入按钮来创建新行。这可行，但是当用户回来编辑他们的信息时，它已经忘记了所有新的行。例如

如果他们写

```
> line one
> 
> 
> 
> line five 
```

然后当他们再次打开应用程序时，它会显示

> `line oneline five`

第五行的文字直接附加到第一行的文字上。

我该怎么做才能让它记住新行？这是我从文本框写入文件，然后再次从文件读取到文本框的代码：

```
public void save() {

        String FILENAME = "item_1_content.txt";
        String string = name.getText().toString();

        FileOutputStream fos = null;
        try {
            fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            fos.write(string.getBytes());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            fos.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

        public String readSavedData ( ) {
            String datax = "" ;
            try {
                FileInputStream fIn = openFileInput ( "item_1_content.txt" ) ;
                InputStreamReader isr = new InputStreamReader ( fIn ) ;
                BufferedReader buffreader = new BufferedReader ( isr ) ;

                String readString = buffreader.readLine ( ) ;
                while ( readString != null ) {
                    datax = datax + readString ;
                    readString = buffreader.readLine ( ) ;
                }

                isr.close ( ) ;
            } catch ( IOException ioe ) {
                ioe.printStackTrace ( ) ;
            }
            name.setText(String.valueOf(datax));
            return datax ;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:02:19.767

用这个：

```
String readString = buffreader.readLine();
while( readString != null ) {
    datax = datax + readString + "\n";
    readString = buffreader.readLine();
} 
```

您需要附加换行符。它由 编码`"\n"`。

# iphone - 获取百分比值

> ID：14540290
> 
> 赞同：1
> 
> 时间：2013-01-26T18:45:23.383
> 
> 标签：iphone, ipad, percentage

我在下面使用来获取在 iPhone 上玩游戏的剩余时间。

> int minutes_games_iPhone5 = 600;//10 小时的分钟数（静态）
> 
> ```
>  int games_iPhone5=(minutes_games_iPhone5*batteryinfo)/100;
>     int hour_game_iPhone5 = games_iPhone5/60;
>     int min_game_iPhone5 = games_iPhone5%60; 
> ```
> 
> 日志：小时：分钟 = 8:30

我猜哪个效果很好。现在我需要弄清楚如何以百分比显示相同的输出，比如 50%。

所以 8:30 也应该代表百分比值。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:51:16.217

8 小时 30 分钟等于 8*60 + 30= 480+30=510 分钟

总时间为 600 分钟。

因此 % 为 510/600*100。

将此东西转换为代码，您将获得百分比。

但是使用 double/float 否则你可能会得到 0*100 in (510/600=0)。使其成为 510.0/600。

# ios - 如何仅重新加载 UICollectionView 的数据部分？

> ID：14540291
> 
> 赞同：4
> 
> 时间：2013-01-26T18:45:25.503
> 
> 标签：ios, objective-c, ios6, uicollectionview

我正在尝试仅重新加载 UICollectionView 的数据部分，而不是页眉或页脚（补充视图）。

当我使用`reloadData`方法时，页眉和页脚部分也会重新加载，这就是我想要的。

我找到了方法`reloadSections:`，但我不知道为什么它不起作用。

因为我的集合视图只包含一个部分，所以我尝试使用这样的方法：

```
[collectionViewController.collectionView reloadSections:[NSIndexSet indexSetWithIndex:0]]; 
```

但是在调用该方法时会产生运行时错误。错误内容为：

```
'NSInvalidArgumentException', reason: '-[UICollectionViewUpdateItem action]:
unrecognized selector sent to instance 0x90aec00' 
```

`reloadSections:`是不是不允许这样使用方法？有没有其他方法可以仅重新加载数据部分，而不是页眉或页脚部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T13:43:17.160

`reloadSections:`我认为该错误仅在搜索栏是集合视图的子视图时发生，并且在键盘输入启动时尝试调用。

[本文](https://stackoverflow.com/questions/12894172/deleting-cells-from-uicollectionview-via-nsnotification)给出了类似问题的答案，但这对我不起作用。

所以我使用了另一种方法，可以调用几乎相同的功能。

我没有将标题添加为补充视图，而是将标题设置为“视图”的子视图。（不是collectionView）

并添加了一些滚动委托来模仿表格视图的标题。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    CGFloat y = scrollView.contentOffset.y;
    if (y < 44) {
        [self.searchBar setFrame:CGRectMake(0, -y, 320, 44)];
        [self.searchBar setHidden:NO];
    } else if (y >= 44) {
        [self.searchBar setHidden:YES];
    }  
} 
```

# android - How to set text size using dimension from xml at runtime programmatically?

> ID：14540293
> 
> 赞同：113
> 
> 时间：2013-01-26T18:45:29.243
> 
> 标签：android, textview, dimensions

In dimens.xml, I have:

```
<dimen name="text_medium">18sp</dimen> 
```

In runtime, I get this value and set the text size of a text view:

```
int size = context.getResources().getDimensionPixelSize(R.dimen.text_medium);
textView.setTextSize(size). 
```

On a 10″ tablet (1280 x 800), everything is ok; but on a phone (800 x 480), the text view has a very large font. On the tablet, the size equals 18; on the phone, it's 27.

If I set the size manually by:

```
textView.setTextSize(size) 
```

the size is normal on both devices.

* * *

## 回答 #1

> 赞同：317
> 
> 时间：2013-05-23T15:31:06.197

**在dimens.xml**添加维度：

```
 <dimen name="text_medium">18sp</dimen> 
```

在代码中设置大小：

```
textView.setTextSize(TypedValue.COMPLEX_UNIT_PX, getResources().getDimension(R.dimen.text_medium)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-06T14:56:00.953

getDimensionPixelSize() 和 getDimension() 两种方法都使用屏幕密度来计算像素。您的手机屏幕密度显然是 hdpi (240dpi)，因此它使用 1.5 比例将 dp 转换为 sp。简单数学 18 * 1.5 = 27。

您的平板电脑密度似乎是 mdpi (160dpi)，因此比例仅为 1:1。

但是，如果您比较两个文本的实际大小，它应该是相同的。

最好的方法是创建两个 dimens.xml 文件，一个在 values 文件夹中用于手机，另一个在 values-sw600dp 中用于平板电脑（您也可以使用 values-sw720dp-land 文件夹来存储横向方向的 10 英寸平板电脑的尺寸）。

您可以在以下网址阅读更多关于 Android 尺寸的信息：[http ://android4beginners.com/2013/07/appendix-c-everything-about-sizes-and-dimensions-in-android/](http://android4beginners.com/2013/07/appendix-c-everything-about-sizes-and-dimensions-in-android/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-31T11:23:07.470

您可以使用 sdp（可缩放密度像素）[https://github.com/intuit/sdp](https://github.com/intuit/sdp)代替 dp，这肯定会挽救您的生命

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-14T05:52:37.423

To expand on Kostek Poland's answer,

The reason why your text size doesn't appear as expected is because in this line:

```
int size = context.getResources().getDimensionPixelSize(R.dimen.text_medium); 
```

*getDimensionPixelSize()* converts "18sp" to pixel size, so the returned value is a different value than 18\. Lets say for example the method returns a value of 23\. Therefore when this line is executed:

```
textView.setTextSize(size) 
```

The method sets your text size to 23sp, so your text size will appear larger than expected.

**The Solution** is to use this line instead when setting your text size:

```
textView.setTextSize(TypedValue.COMPLEX_UNIT_PX, getResources().getDimension(R.dimen.text_medium)); 
```

This works because the first argument states that the second argument is of type pixel. So now if the second argument is 23 then it wont be treated like it is 23sp, but instead means 23 pixels which is equivalent to the 18sp but in pixel units.

# android - 如何从父视图中捕获子视图点击事件

> ID：14540300
> 
> 赞同：0
> 
> 时间：2013-01-26T18:46:05.923
> 
> 标签：android

我有一个从布局膨胀的视图，如果它被点击，我需要隐藏它，所以我有

```
mViewBar.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            //Code to remove the view
        }
    }); 
```

但是这个视图有一些子视图，我还需要捕获它们的点击事件，我该如何以干净的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:40:14.593

隐藏膨胀的布局。获取膨胀视图的父视图 ID 和所有其他子视图 ID。为每个视图注册点击监听器。不要删除整个视图，只需设置其可见性。

# android - Android 键盘关闭

> ID：14540307
> 
> 赞同：6
> 
> 时间：2013-01-26T18:46:45.857
> 
> 标签：android, keyboard, dismiss

我正在处理的应用程序中有几个 EditText 对象，并且需要学习如何在用户完成输入文本后关闭键盘，以便屏幕上被键盘阻止的按钮再次可见，并准备好执行操作.

在 Xcode 中，我使用 ResignFirstResponder 方法来执行此操作，例如，当用户单击键盘上的“完成”按钮时。我假设这在 Android 中也是可能的，但我不确定。我很感激任何帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T18:53:54.373

隐藏虚拟键盘的代码：

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

将它放在*“完成”按钮的 onClick() 中*，您将有理由相信 Android 与 Xcode 一样强大（如果不是更多的话）。

# sql - SQL Server 中的递归查询问题

> ID：14540308
> 
> 赞同：3
> 
> 时间：2013-01-26T18:46:48.210
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2012

我在 SQL Server 中遇到递归查询问题。

假设我有 2 个表：

1.  `Holiday`：此表存储所有假期（`holidayDate`非工作日）
2.  `Invoice`：此表存储下一个付款日期（`nextPaymentDate`）

如果`nextPaymentDate`在 `holidayDate`假期表上，那么我需要更新它：

```
nextPaymentDate = nextPaymentDate + 1 day 
```

这一步需要处理，直到`nextPaymentDate`不再存在`holidayDate`。

请参阅下面的示例数据示例：

`Holiday`桌子：

```
HolidyaID      HolidayDate
-----------------------------
   1           2012-01-02
   2           2012-01-03
   3           2012-01-04
   4           2012-01-08
   5           2012-01-12
   6           2012-01-13
   7           2012-01-20
   8           2012-01-21
   9           2012-01-22
   10          2012-01-23
   11          2012-01-29
   12          2012-01-30 
```

`Invoice`桌子

```
InvoiceID      NextPaymentDate
------------------------------
   1           2012-01-01
   2           2012-01-02
   3           2012-01-09
   4           2012-01-20 
```

运行此查询后，我想像这样查看`Invoice`表中的数据

```
InvoiceID      NextPaymentDate
-------------------------------
   1               2012-01-01
   2               2012-01-05
   3               2012-01-09
   4               2012-01-24 
```

如何创建 SQL 查询来输出此结果？

[您可以在http://sqlfiddle.com/#!6/de346/3](http://sqlfiddle.com/#!6/de346/3)测试此查询

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:53:47.457

```
 select invoiceid, coalesce(nd,NextPaymnetDate) dd from invoice i left join
    (
    select *,(select min(dateADD(dd,1,holidaydate)) from holiday 
where holidaydate>=h.holidaydate and 
dateADD(dd,1,holidaydate) not in (select holidaydate from holiday)) nd 
    from holiday h) h on NextPaymnetDate = holidaydate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:06:05.223

```
select InvoiceID,
Case when [holidaydate] is null then [NextPaymnetDate]
else
DateAdd(dd,1,
(Select min([holidaydate]) from holiday h
where  h.[holidaydate]>[NextPaymnetDate]
and not exists(Select * from holiday h2 where h2.[holidaydate]=DateAdd(dd,1,h.[holidaydate])) 
))
end
from invoice
left Join holiday on [holidaydate]=[NextPaymnetDate] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T19:09:09.320

```
with holidayBatch as
(
  select workingdate = dateadd(dd, 1, holidayDate)
  from Holiday h
  where not exists (select 1 from Holiday nxt
                    where nxt.holidaydate = dateadd(dd, 1, h.holidaydate))
)
select i.invoiceid,
  case when h.holidaydate is null then i.NextPaymentDate else hb.workingdate end
from Invoice i
  left join Holiday h on i.NextPaymentDate = h.holidaydate
  outer apply (select top 1 workingdate
              from holidayBatch hb where workingdate > NextPaymentDate
              order by workingdate) hb
order by i.invoiceid 
```

[SQL小提琴](http://sqlfiddle.com/#!3/53db1/6)

# c++ - C ++：对象anf文件的文件处理_操作+二进制文件未读取

> ID：14540309
> 
> 赞同：1
> 
> 时间：2013-01-26T18:46:58.527
> 
> 标签：c++, file-handling

我一直在使用 Turbo C++ (:/) 并且遇到了一个问题。

我正在制作一个需要文件处理的学校项目。我的程序接受用户的输入并为他们提供 4 个选项：

1.  覆盖/修改现有文件
2.  创建文件
3.  删除文件
4.  查看所有文件

类定义：

```
#define max 20
class playlist{
    static int ctr;
    int sr;
    char name[max];
    class favsong
    {

        char song[max];
        char genre[max];
        char artist[max];
        int rating;

    public:
        void playin()
        {
            cout<<"Enter song name"<<endl;
            gets(song);
            cout<<"Enter genre"<<endl;
            gets(genre);
            cout<<"Enter artist"<<endl;
            gets(artist);

            cout<<"Enter rating (out of 5)"<<endl;
            cin>>rating;

        }
        void playout()
        {
            cout<<"\nSong:";
            puts(song);
            cout<<"Artist:";
            puts(artist);
            cout<<"Genre:";
            puts(genre);
            cout<<"rating:"<<rating<<endl;
        }
        favsong()
        {
            rating=0;
            strcpy(song,"Not Assigned");
            strcpy(genre,"Not Assigned");
            strcpy(artist,"Not Assigned");
        }
        ~favsong(){}
    }favs[5];

public:
    void input();
    void output();

    void showname()
    {
        puts(name);
    }

    int givesr()
    {
        return sr;
    }

    int existp (int n)
    {
        if(n==sr)
            return 1;
        else
            return 0;
    }

    playlist()//constructor
    {
        strcpy(name,"Default playlist");
        sr=ctr;
        ctr++;
    }

    ~playlist(){}

    int existp(char arr[])
    {
        if(strcmp(name,arr)==0)
            return 1;
        else
            return 0;
    }

}wmp[max],obj;
int playlist::ctr=1;

void playlist::input()
{
    cout<<"Enter playlist name"<<endl;
    gets(name);
    for(int i=0;i<5;i++)
        favs[i].playin();
    cout<<"Input complete"<<endl;

}

void playlist::output()
{
    cout<<"Playlist no"<<sr;
    for(int i=0;i<5;i++)
        favs[i].playout();
    cout<<"\noutput complete"<<endl;
} 
```

当我尝试创建播放列表时，我遇到了运行时错误：代码：

```
case 2: cout<<"Creating new playlist...press enter to continue"<<endl;
getch();
obj.input();
h=0;
while(!file.eof()){
    fileo.read((char*)&wmp[h],sizeof(wmp));
    if(wmp[h].existp("Default playlist")){ //int existp(int*a) compares the object's
                                           // name to the string"Default Playlist
        pos=fileo.tellg();
        file.seekp(-pos,ios::cur);
        file.write((char*)&wmp,sizeof(wmp) );
    }
    h++;
}
break; 
```

我已经做了3天了。看起来很简单，但我不知道问题出在哪里。

此外，每次运行后文件都会被擦除：代码：

```
ofstream file("playlist.dat",ios::out|ios::app|ios::noreplace|ios::binary|ios::ate);
ifstream fileo("playlist.dat",ios::in|ios::binary); 
```

- - - - - - -编辑 - - - - - -

我接受了 WhozCraig 和 qPCR4vir 的建议，并为班级成员提供了单独的功能将自己插入文件中。事情是我再次遇到了障碍。输出显示所有数据成员，而它应该只显示 sr 号。和播放列表名称。我认为输入或输出是错误的。代码：

```
void existp()  //function to show all existing playlists in the file.
            {  ifstream tmp("playlist.dat",ios::in|ios::binary);
                tmp.seekg(ios::beg);
                tmp.read((char*)&wmp,sizeof(wmp));
                for(int i=0;i<max;i++){
                cout<<wmp[i].givesr();
                wmp[i].showname();
           }
           tmp.close();
            }

    void fileput(){  //fileput and fileget are functions to put inner class member in //file
    ofstream file("Playlist.dat",ios::out|ios::app|ios::nocreate|ios::binary);
    file<<song<<endl<<artist<<endl<<genre<<endl<<rating<<endl;
file.close();
            }

void fileget(){
ifstream file("Playlist.dat",ios::in|ios::binary);
file.getline(song,max,'\n');
    file.getline(artist,max,'\n');
file.getline(genre,max,'\n');
file>>rating;
file.close();
        } 
```

//外部类函数的函数定义，将外部类数据成员放入文件中

```
void playput(long int pos){
ofstream file("Playlist.dat",ios::out|ios::app|ios::nocreate|ios::binary);
file.seekp(pos,ios::beg);
file<<name<<"\n";
for(int i=0;i<5;i++)
favs[i].fileput();
file.close();
}

void playget(long int pos){
ifstream file("Playlist.dat",ios::in|ios::binary);
file.seekg(pos,ios::beg);
file.getline(name,max,'\n');
for(int i=0;i<5;i++)
favs[i].fileget();
file.close();
     } 
```

-------------编辑2------------- 终于完成了！输入，输出，删除都很好。只有一个小问题是“sr”正在获取内存值而不是序列号。文件中的值。因此，不是将第二个播放列表打印为 2.Second Playlist，而是打印 2609.Second Playlist。

谢谢你们，你们所有人。我真的很感激，你真的帮了我很多！@WhozCraig 和@qPCRvir：谢谢你们的回答和建议。我真的很感激。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T21:23:46.837

这段代码存在*多个*问题，以至于您可能会考虑退后一步，重新考虑您真正想做的事情。

对于初学者来说，循环读取逻辑在其项目读取大小方面存在根本缺陷。您应该每次迭代读取一个项目，或者只读取整个数组一次，然后枚举该数组以查找可用于新播放列表的项目。问题的核心是这样的：

```
fileo.read((char*)&wmp[h],sizeof(wmp)); 
```

这会从当前文件位置开始读取*最大为整个* `wmp` *数组*大小的项目，并将结果存储在内存中数组中`h`第 th 个元素所在的位置`wmp`（`wmp+h`）。我真诚地希望您看到，如果*大于*`h`0 ，*这*可能会读取到数组末尾并进入未定义的行为。

 **如果这是唯一改变的事情，那么应该这样做：

```
fileo.read((char*)&wmp[h],sizeof(wmp[h])); 
```

但这只是冰山一角。循环本身存在根本缺陷，因为您也有固定的固定文件大小。没有理由在从磁盘读取播放列表数组（或就此写入磁盘）进行迭代循环。只需批量写入整个数组，例如

```
ofstream ofs(filename, ios::out|ios::binary|ios::trunc);
ofs.write((char*)&wmp, sizeof(wmp));
ofs.close(); 
```

并以类似的偏见阅读它：

```
ifstream ifs(filename, ios::in|ios::binary)
ifs.read((char*)&wmp, sizeof(wmp));
ifs.close(); 
```

但老实说，正确的方法***不是***上面的。例如，将播放列表写入磁盘的正确方法是：

1.  编写一个类的成员函数`playlist::favorite`，给定一个二进制流对象，它可以将*自己*写入该输出流。
2.  写一个类的成员函数`playlist`，给定一个二进制流对象，可以写*它自己*，以及它当前最喜欢的歌曲数量，然后使用上面（1）中的 favorite-writer 成员函数来编写*每首最喜欢的歌曲。*
3.  编写一个知道如何以二进制输出模式打开文件（给定名称）的全局函数，写出*被占用*的播放列表条目的数量，然后对于每个占用的条目，调用上面（2）中的播放列表写入器成员函数。

类似的逻辑将用于读取文件。

1.  写一个成员函数`playlist::favorite`，给定一个输入二进制流对象引用，可以从流中读取*自己*。
2.  写一个成员函数`playlist`，给定一个输入二进制流对象引用，可以读取它自己，以及它的收藏计数，然后对于每个收藏，调用上面（1）中的收藏阅读器。
3.  编写一个知道如何打开输入二进制文件流对象的全局函数，然后读取其播放列表计数，然后为每个播放列表调用上面（2）中编写的播放列表读取器。

只是这样做的众多方法之一，但相当合乎逻辑，并且链接得很好。考虑一下。即使这样，也存在平台可移植性问题，但除非您将播放列表文件从一个平台共享到另一个平台，否则这不应该成为问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:04:38.423

我不想触及其他答案，而现在我们还有其他问题，我不能把所有的事情都搞砸。我无法调试，这不是完整的代码，只是我试图解释这些想法的更好方法。

```
#include <iostream> 
#include <fstream> 
using namespace std;

#define max 20

class playlist
{   static int ctr;
    int sr;
    char name[max];
    class favsong
    {   char song[max];
        char genre[max];
        char artist[max];
        int rating;
      public:
        void playin()
        {   cout<<"Enter song name"<<endl;            gets(song);
            cout<<"Enter genre"<<endl;                gets(genre);
            cout<<"Enter artist"<<endl;               gets(artist);
            cout<<"Enter rating (out of 5)"<<endl;    cin>>rating;
        }
        void playout()
        {   cout<<"\nSong:";            puts(song);
            cout<<"Artist:";            puts(artist);
            cout<<"Genre:";             puts(genre);
            cout<<"rating:"         <<rating    <<endl;
        }
        void fileput(ofstream &file)   //  (Point 1:) put (get) inner class member (favsong) in file
        {   // txt variant  
            file<<song<<endl<<artist<<endl<<genre<<endl<<rating<<endl;
            // or the pure binary variant:
            //file.write ((char*)this, sizeof(favsong));
        }
        void fileput()   //  put (get) inner class member (favsong) in file
        {   ofstream file("Playlist.dat",ios::out|ios::app|ios::nocreate|ios::binary);
            file<<song<<endl<<artist<<endl<<genre<<endl<<rating<<endl;
            file.close();
        }
        void fileget(ifstream &file)
        {   // txt variant
            file.getline(song,  max,'\n');
            file.getline(artist,max,'\n');
            file.getline(genre, max,'\n');
            file>>rating;
        }
        void fileget()
        {
            ifstream file("Playlist.dat",ios::in|ios::binary);
            file.getline(song,  max,'\n');  
            file.getline(artist,max,'\n');
            file.getline(genre, max,'\n');
            file>>rating;
            file.close();
        }
        favsong()
        {   rating=0;
            strcpy(song,  "Not Assigned");
            strcpy(genre, "Not Assigned");
            strcpy(artist,"Not Assigned");
        }
        ~favsong(){}
    }favs[5];

 public:
    void input();
    void output();
    void playput(ofstream &file)        //  (Point 2:) puts outer class data members in file
    {
        // txt
        file<<name<<"\n";
        // or one "pure" binary variant
        //file.write (name, sizeof(name));

        for(int i=0;i<5;i++)
            favs[i].fileput(file);  // equal for both bin or txt

        // or one pure binary variant to put the entery list at once:
        //file.write ((char*)this, sizeof(playlist));
    }
    void playput( ofstream &file, long int pos)     //puts outer class data members in file
    {
        file.seekp(pos,ios::beg);
        playput(file);              // equal for both bin or txt
    }
    void playput(long int pos)      //puts outer class data members in file
    {
        ofstream file("Playlist.dat",ios::out|ios::app|ios::nocreate|ios::binary);
        file.seekp(pos,ios::beg);
        playput(file);
        file.close();
    }

    // now write the equivalent for get.....
    void playget(long int pos)
    {
        ifstream file("Playlist.dat",ios::in|ios::binary);
        file.seekg(pos,ios::beg);
        file.getline(name,max,'\n');
        for(int i=0;i<5;i++)
        favs[i].fileget(file);
        file.close();
     }
    void showname()     {        puts(name);    }
    int givesr()        {        return sr;     }
    int existp (int n)  {        return (n==sr) ?   1 : 0;    }

    playlist()//constructor
    {   strcpy(name,"Default playlist");
        sr=ctr;
        ctr++;
    }
    ~playlist(){}
    int existp(char arr[])  {    return (strcmp(name,arr)==0)  ?   1 : 0;    }

}wmp[max],obj;

int playlist::ctr=1;

void playlist::input()
{   cout<<"Enter playlist name"<<endl;
    gets(name);
    for(int i=0;i<5;i++)
        favs[i].playin();
    cout<<"Input complete"<<endl;
}

void playlist::output()
{   cout<<"Playlist no"<<sr;
    for(int i=0;i<5;i++)
        favs[i].playout();
    cout<<"\noutput complete"<<endl;
}

void existp()  //function to show all existing playlists in the file.
{  ifstream tmp("playlist.dat",ios::in|ios::binary);
    tmp.seekg(ios::beg);
    tmp.read((char*)&wmp,sizeof(wmp));
    for(int i=0;i<max;i++)
    {   cout<<wmp[i].givesr();
        wmp[i].showname();
    }
    tmp.close();
}
void save_playlist(const char *file_name)  //    (Point 3:)
{   ofstream file(file_name,ios::out|ios::binary);
    for(int i=0;i<max;i++)
        wmp[i].playput (file);

    // or one pure binary variant to put all list at once:
    //file.write((char*)&wmp,sizeof(wmp));

    file.close();
}
void load_playlist(const char *file_name)  //    (Point 3:)
{   ifstream file(file_name,ios::in|ios::binary);
    file.seekg(ios::beg);
    for(int i=0;i<max;i++)
        wmp[i].playget(file);

    // or one pure binary variant to get all list at once:
    //file.read((char*)&wmp,sizeof(wmp));

    file.close();
} 
```

现在，操作列表....

```
void using_play_list (const char *file_name)
{
    /*case 2:*/ cout<<"Creating new playlist...press enter to continue"<<endl;
    getch();
    obj.input();

    load_playlist(file_name);

    // now test and modify wmp as need.

    int h=0;
    while(h<max){
        if(wmp[h].existp("Default playlist"))
        {   //int existp(int*a) compares the object's
            // name to the string"Default Playlist
            //    ????????????
        }
        h++;
    }

    save_playlist(file_name);

    break;
} 
```

这是@WhozCraig 的全部想法，只是为了使代码更简单，而不是为了解决您的最终问题。**

# c# - 多行字符串中的奇怪空格

> ID：14540311
> 
> 赞同：0
> 
> 时间：2013-01-26T18:47:04.223
> 
> 标签：c#, string, multiline

在以下代码中：

```
static void Main(string[] args)
{
    string MultiLineString = @"This is a
random sentence";
    int index=0;

    string test = "";

    Console.WriteLine(MultiLineString[9].ToString()); //it should print 'r' but it prints a white space

    for (int i = 0; i < MultiLineString.Length; i++)
    {
        if (MultiLineString[i] == 'r')
            index = i;
    }
    Console.WriteLine(index); // 11 is the index of 'r' in "random"

    foreach (char ch in MultiLineString)
        if (ch == ' ')
            test += "_";
        else
            test += ch;

    Console.WriteLine(test);
    // the output is:
    // This_is_a
    //random_sentece

} 
```

我很难理解 9-10 索引中发生了什么。起初我以为这是一个空格，当我跳过一行时以某种方式创建了它，但后来它没有包含在测试字符串中。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:54:45.583

```
MultiLineString[0] -> 'T'
MultiLineString[1] -> 'h'
MultiLineString[2] -> 'i'
MultiLineString[3] -> 's'
MultiLineString[4] -> ' '
MultiLineString[5] -> 'i'
MultiLineString[6] -> 's'
MultiLineString[7] -> ' '
MultiLineString[8] -> 'a'
MultiLineString[9] -> '\r'
MultiLineString[10] -> '\n'
MultiLineString[11] -> 'r' 
```

根据您的环境，换行符可以是`"\r\n"`、`"\r"`或`"\n"`。对于大多数 Windows 环境，换行符通常表示为`"\r\n"`（两个字符）。

通过执行以下操作，您可以查看字符串中字符的 ASCII 值（而不仅仅是它们的视觉表示）：

```
for(int i = 0; i < MultiLineString.Length; i++)
{
    Console.WriteLine("{0} - {1}", i, (int)MultLineString[i]);
} 
```

`\r`将是 13 和`\n`将是 10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:00:28.723

正如其他人所说，您没有考虑换行符转义序列，`\n`因此，您的索引关闭了 1。

举个例子，这段代码：

```
using System;

public class Test
{
    public static void Main()
    {
        string test = @"T
e
s
t";
        for (int i =0 ; i < test.Length; i++)
        {
            Console.WriteLine("{0} == \\n? {1}", test[i], test[i] == '\n');
        }
    }
} 
```

输出是：

> T == \n？错误的
> 
> == \n? 真
> e == \n? 错误的
> 
> == \n? 真
> s == \n? 错误的
> 
> == \n? 真
> t == \n? 错误的

如您所见，每个其他字符都是换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T18:53:57.743

当将字符串声明为多行文字时，您明确地将新行包含在字符串 ("\n\r") 中。换行符分别位于第 9 位和第 10 位。

C# 语言规范中涵盖的“逐字字符串文字” [- 字符串文字](http://msdn.microsoft.com/en-us/library/aa691090.aspx)以及 SO：[Multiline String Literal in C#](https://stackoverflow.com/questions/1100260/multiline-string-literal-in-c-sharp)。

当您搜索`' '`代码为 32 的字符时，与`'\n'`(10) 和`'\r'`(13) 不同的是，您只会找到真正的空格，而不是换行的“空白”字符。

请注意，还有许多其他“类似空格”的字符，因此如果您需要对它们执行一些特殊处理 - 请查看[Char 结构](http://msdn.microsoft.com/en-us/library/system.char(v=vs.100).aspx)的方法，例如 Char.IsWhiteSpace

# android - Viewpager 显示错误的页面

> ID：14540320
> 
> 赞同：6
> 
> 时间：2013-01-26T18:47:44.677
> 
> 标签：android, android-viewpager, viewpagerindicator

我有一个由 Jake Wharton 编写的 viewpagerindicator，在那个 viewpager 中我有 6 页。所有页面都包含列表视图，我正在使用 AsyncTask 加载它们。有时 viewpager 在错误的索引处显示错误的页面。这是我的 viewpager 适配器：

```
public class TestFragmentAdapter extends FragmentPagerAdapter{
    protected static final String[] CONTENT = new String[] { "a","b","c","d","e","f" };

    private int mCount = CONTENT.length;
    Fragment fragment1,fragment2,fragment3,fragment4,fragment5,fragment6;

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
        fragment1 = new CategoryListView();
        fragment2 = CustomizedListviewRecent.newInstance(41);
        fragment3 = CustomizedListviewMostRecents.newInstance(0);
        fragment4 = CustomizedListviewPopulars.newInstance();
        fragment5 = CustomizedListviewRecent.newInstance(42);
        fragment6 = CustomizedListviewRecent.newInstance(43);

    }

    @Override
    public Fragment getItem(int position) {
        if(position == 0)
            return fragment1;
        else if(position == 1)
            return fragment2;
        else if(position == 2)
            return fragment3;
        else if(position == 3)
            return fragment4;
        else if(position == 4)
            return fragment5;
        else
            return fragment6;
    }
    @Override
    public int getCount() {
        return mCount;
    }

    @Override
    public CharSequence getPageTitle(int position) {
      return TestFragmentAdapter.CONTENT[position % CONTENT.length];
    }

    public void setCount(int count) {
        if (count > 0 && count <= 10) {
            mCount = count;
            notifyDataSetChanged();
        }
    }

} 
```

这是我创建viewpager的方式：

```
public class SampleTitlesDefault extends BaseSampleActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mAdapter = new TestFragmentAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (TitlePageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);
        mIndicator.setCurrentItem(1);
    }

} 
```

这里有什么问题？我该如何解决？感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-12T08:05:11.680

我知道为时已晚，但可能有人需要它。

我也遇到过关于错误位置的类似问题，有时由于位置错误，它在两个片段上显示相同的结果。我通过替换解决了我的`FragmentPagerAdapter`问题`FragmentStatePagerAdapter`

而且我还从使用接口的`onPageScrolled`方法中传递了索引位置`OnPageChangeListener`

```
 viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

        }

        @Override
        public void onPageSelected(int position) {

            bundle = new Bundle();
            bundle.putInt("position", position);
            primaryFragment.setCurrentPostionAndData(position);

        }

        @Override
        public void onPageScrollStateChanged(int state) {

        }
    }); 
```

> 就像文档说的那样，这样想。如果你要做一个像阅读器这样的应用程序，你不会希望一次将所有片段加载到内存中。您想在用户阅读时加载和销毁片段。在这种情况下，您将使用 FragmentStatePagerAdapter。如果您只是显示 3 个不包含大量数据（如位图）的“选项卡”，那么 FragmentPagerAdapter 可能很适合您。另外，请记住，默认情况下 ViewPager 会将 3 个片段加载到内存中。您提到的第一个适配器可能会破坏视图层次结构并在需要时重新加载它，第二个适配器仅保存片段的状态并完全销毁它，如果用户随后返回该页面，则检索状态。

[FragmentPagerAdapter 和 FragmentStatePagerAdapter 的区别](https://stackoverflow.com/questions/18747975/difference-between-fragmentpageradapter-and-fragmentstatepageradapter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T01:31:42.733

请不要自己“缓存” `Fragment`s，因为它已经为您做到了。

也就是说，您应该`newInstance`在`getItem`方法中使用它们，而*不是*在创建适配器时。例子：

```
public TestFragmentAdapter(FragmentManager fm) {
    super(fm);
}

@Override
public Fragment getItem(int position) {
    if(position == 0)
        return new CategoryListView();
    else if(position == 1)
        return CustomizedListviewRecent.newInstance(41);
    else if(position == 2)
        return CustomizedListviewMostRecents.newInstance(0);
    else if(position == 3)
        return CustomizedListviewPopulars.newInstance();
    else if(position == 4)
        return CustomizedListviewRecent.newInstance(42);
    else
        return CustomizedListviewRecent.newInstance(43);
} 
```

这样做的常见原因是：

1.  人们认为这样做更有效率；或者
2.  `Fragment`稍后可能需要对的引用。

对于（1），正如我所说，您不必担心它（除非您想学习它并稍后进行调整，但现在就让它吧）。如果你需要（2），那么你可以这样做[（](https://stackoverflow.com/a/10022665/489607)最初在[这里](https://stackoverflow.com/a/9744146/489607)看到）。

# java - 如何在休眠中的 OneToMany 关系中仅添加一个实体

> ID：14540324
> 
> 赞同：0
> 
> 时间：2013-01-26T18:48:05.520
> 
> 标签：java, hibernate, jpa

有两个表，其中一个是客户，另一个是产品，如您所知，客户与产品具有 OneToMany 关系，如下所示

在客户实体中，

```
private Set<Product> products; 
```

如您所见，我使用`Set`实现 OneToMany 关系，但是当我想在将来只添加一个实体作为产品时，我必须获取所有这些产品并执行类似的操作，

```
Set<Product> products = customer.getProduct();
products.add(new Product(id, name, price));
dao.update(customer); 
```

我认为从数据库中获取所有产品只是为了添加一个新实体，这真的很繁重，在休眠中有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:54:40.957

如果您使用双向映射以使 Product 具有 Customer 属性，则可以单独保存 Product

```
private Customer Customer;

dao.Save(new Product(Customer, id, name, price)); 
```

这显然打破了你的聚合根......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:16:05.557

请改用列表或袋子。从[休眠文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-collections-mostefficentinverse)：

> 我们可以将元素添加到包或列表中，而无需初始化（获取）包元素。

# javascript - Firefox中的定位

> ID：14540329
> 
> 赞同：2
> 
> 时间：2013-01-26T18:48:17.713
> 
> 标签：javascript, jquery, css, firefox

我使用 jQuery 和 css 创建了一个简单的数独设计。该设计在 Chrome 和 IE8 中看起来不错，但在 Firefox 18.0.1 中并不好。

这是**[小提琴](http://jsfiddle.net/Mwb2E/13/)**

对我来说，问题似乎在于 CSS 样式（定位）。

```
 #main>div>div>div>button {
     margin:0;
     border:none;
     background-color:white;
     position:absolute;
     top:0.5px;
     bottom:0.5px;
     left:0.5px;
     right:0.5px;
     color:#1a1a1a;
 } 
```

如果您认为问题出在其中，请查看 jQuery 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:47:25.283

问题是因为 Button在 firefox (Gecko) 中作为[**替换元素的行为。**](http://reference.sitepoint.com/css/replacedelements)我通过使用`min-width: -moz-available;`本文中提到的方法解决了这个[**问题**](https://stackoverflow.com/a/7271936/1577396)。我什至意识到我的帖子与那个链接是重复的。

```
#main>div>div>div>button
{
     min-width: -moz-available;     /* added */
     min-width: -webkit-available;  /* just added(optional for me) */
     min-width: available;          /* optional for me */
     /* other properties */
} 
```

正如@axel.michel 在上面的评论中提到的，我们可以给出固定的宽度和高度，或者如果你不确定长度是多少，只需给出`width:100%;height:100%;display:block;`.

**编辑**`1px`：如果您想与按百分比分配的尺寸有差距，也可以使用以下属性。（正如@BorisZbarsky 在下面的评论中提到的）

```
#main>div>div>div>button
{
     width: -webkit-calc(100% - 1px);
     height: -webkit-calc(100% - 1px);
     width: -moz-calc(100% - 1px);
     height: -moz-calc(100% - 1px);
     width: calc(100% - 1px);
     height: calc(100% - 1px);
     /* other properties */
}
 //Doesn't work in IE8 
```

# ios - 在 Cocoa 中编程创建 NSView

> ID：14540331
> 
> 赞同：6
> 
> 时间：2013-01-26T18:48:22.507
> 
> 标签：ios, objective-c, macos, cocoa

我习惯于为 iOS 编程，而且我已经非常习惯于`UIViewController`. 现在，我正在创建一个 OSX 应用程序，并且我有一些关于最佳实践的一般性问题。

在一个`UIViewController`我通常在`-(void)viewDidLoad`方法中设置我的视图 - 我实际上并没有为它创建一个自定义`UIView`，`UIViewController`除非它真的需要它 - 所以`UIViewController`将视图添加到它自己的视图，删除它们，动画它们等等 - 首先，是一个好习惯?

对于我的主要问题 - OSX 的最佳实践是什么？我喜欢以编程方式创建接口，并且更喜欢这种方式。如果我说创建一个新的自定义窗口并想要管理它的视图。最好的方法是什么，我在哪里最好地实例化用户界面？

摘要：我如何以编程方式构建自定义视图并在 OSX 中的视图和控制器之间建立最佳实践关系？使用视图控制器在其视图中创建视图是否被认为是一种好习惯？

亲切的问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T21:27:27.850

要在 NSViewController 的代码中构造视图，请覆盖 loadView 并确保设置视图变量。*不要调用 super 的实现*，因为它会尝试从 NSViewController 的 nibName 和 nibBundle 属性加载一个 nib。

```
-(void)loadView
{
    self.view = [[NSView alloc] init];
    //Add buttons, fields, tables, whatnot
} 
```

对于 NSWindowController，过程非常相似。您应该在 loadWindow 的实现结束时调用 windowDidLoad。此外，如果窗口为 nil，则窗口控制器不会调用 loadWindow，因此您需要在初始化期间调用它。NSWindowController 似乎假设您将在创建控制器*之前*在代码中创建窗口，除非从笔尖加载。

```
- (id)initWithDocument:(FFDocument *)document
                   url:(NSURL *)url
{
    self = [super init];
    if (self)
    {
        [self loadWindow];
    }

    return self;
}    
- (void)loadWindow
{
    self.window = [[NSWindow alloc] init];
    //Content view comes from a view controller
    MyViewController * viewController = [[MyViewController alloc] init];
    [self.window setContentView:viewController.view];
    //Your viewController variable is about to go out of scope at this point. You may want to create a property in the WindowController to store it.
    [self windowDidLoad];
} 
```

## 一些可选的幻想（10.9 及更早版本）

在 10.10 之前，NSViewControllers 不在 OSX 的第一响应者链中。当响应链中存在项目时，菜单将自动为您启用/禁用菜单项。您可能希望使用 NSViewController 属性创建自己的 NSView 子类，以允许它将控制器添加到响应者链中。

```
-(void)setViewController:(NSViewController *)newController
{
    if (viewController)
    {
        NSResponder *controllerNextResponder = [viewController nextResponder];
        [super setNextResponder:controllerNextResponder];
        [viewController setNextResponder:nil];
    }

    viewController = newController;

    if (newController)
    {
        NSResponder *ownNextResponder = [self nextResponder];
        [super setNextResponder: viewController];
        [viewController setNextResponder:ownNextResponder];
    }
}

- (void)setNextResponder:(NSResponder *)newNextResponder
{
    if (viewController)
    {
        [viewController setNextResponder:newNextResponder];
        return;
    }

    [super setNextResponder:newNextResponder];
} 
```

最后，我使用自定义 NSViewController 覆盖 setView 以在使用自定义视图时设置 viewController 属性。

```
-(void)setView:(NSView *)view
{
    [super setView:view];
    SEL setViewController = @selector(setViewController:);
    if ([view respondsToSelector:setViewController])
    {
        [view performSelector:setViewController withObject:self];
    }
}

- (BOOL)acceptsFirstResponder
{
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:18:55.130

> 对于我的主要问题 - OSX 的最佳实践是什么？我喜欢以编程方式创建接口，并且更喜欢这种方式。如果我说创建一个新的自定义窗口并想要管理它的视图。最好的方法是什么，我在哪里最好地实例化用户界面？

所有这些都是在 `awakeFromNib`和中完成的`init`。

以下代码创建了许多窗口并将它们存储在数组中。您可以为每个窗口添加视图。每个视图都可能包含您希望拥有的所有控件。

```
self.myWindow= [[NSWindow alloc] initWithContentRect:NSMakeRect(100,100,300,300)
                                                   styleMask:NSTitledWindowMask
                                                     backing:NSBackingStoreBuffered
                                                       defer:NO];

[self.myWindowArray addObject:self.myWindow];

for (NSWindow *win in self.myWindowArray) {
    [win makeKeyAndOrderFront:nil];
} 
```

# javascript - node.js - 我无法从服务器重现渐进式响应

> ID：14540335
> 
> 赞同：7
> 
> 时间：2013-01-26T18:49:01.930
> 
> 标签：javascript, node.js, webserver

出色地，

我对 node.js 完全陌生。开始尝试它，我正在关注 Ryan Dahl ( [http://www.youtube.com/watch?v=jo_B4LTHi3I](http://www.youtube.com/watch?v=jo_B4LTHi3I) ) 的介绍，此时（大约 0:17:00）有一个关于如何服务器的解释处理响应，

基本示例是从网络服务器获得“hello”输出，然后在 2 秒后出现“世界”，这段代码应该这样做

```
//Require the webserver library 
var http = require('http');

var server = http.createServer(function(req, res) {
    res.writeHead(200, { 'content-type' : 'text-plain' });
    res.write('Hello\n');

    //Asynchronous behavior
    setTimeout(function() {
        res.end('World\n');
    }, 2000);
});

server.listen(3000); 
```

所以我运行它，我得到了 Hello World，但只有一个来自服务器的完整结果响应，即 request > 2 sec > 'Hello World'。而不是请求 > Hello > 2 secs > World。

**为什么会这样？，我该如何改变这种行为？**

我正在使用 v0.8.18， curl -i`http://localhost:3000`返回正确的标题... `HTTP/1.1 200 OK content-type: text-plain Date: Sat, 26 Jan 2013 18:10:05 GMT Connection: keep-alive Transfer-Encoding: chunked`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T19:15:27.180

在开始渲染之前，浏览器会缓冲传入的数据，直到收到一定数量的数据。您的 Node 代码会按照您的预期执行，它将发送响应的第一部分，然后等待 2 秒，然后发送后半部分。

如果你想观察这种行为，你可以发送一堆空格让浏览器清空它的缓冲区。如果您在初始写入后添加它，您将看到浏览器呈现请求的前半部分。

```
var str = '';
for (var i = 0; i < 2000; i++){
  str += ' ';
}
res.write(str); 
```

显然不要在实际代码中这样做，但最好演示一下行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:12:12.520

使用 curl，您的代码将按预期执行。浏览器等待整个正文，但 curl 打印“hello”，等待 2 秒然后打印“worls”。我复制了你的确切代码，没关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-22T23:43:13.297

您可以使用内容类型 text/html 更改行为

```
res.writeHead(200, { 'content-type' : 'text/html' }); 
```

浏览器将对不同的内容类型采取不同的行动。也使用 content-type text-html 将使 curl 保持缓冲区并且仅在缓冲区完成后打印

我只是在实验中测试这个，但我仍然不知道为什么在浏览器和 curl 上这样做

# ruby-on-rails - 无法访问家乡路线？

> ID：14540342
> 
> 赞同：1
> 
> 时间：2013-01-26T18:49:53.657
> 
> 标签：ruby-on-rails, ruby, syntax

尝试访问 localhost:3000/static_pages/home 时出现以下错误：

```
SyntaxError in StaticPagesController#home

/Users/user/Sites/rails_projects/sample_app/app/helpers/application_helper.rb:9: syntax error, unexpected keyword_end, expecting $end
Rails.root: /Users/user/Sites/rails_projects/sample_app

Application Trace | Framework Trace | Full Trace
app/controllers/application_controller.rb:1:in `<top (required)>'
app/controllers/static_pages_controller.rb:1:in `<top (required)>' 
```

routes.rb 内容：

```
SampleApp::Application.routes.draw do

  get "static_pages/home"

  get "static_pages/help"

  get "static_pages/about"

  get "static_pages/contact"

end 
```

application_helper.rb 内容：

```
def full_title(page_title)
base_title = "Ruby on Rails Tutorial Sample App"
if page_title.empty?
base_title
else
"#{base_title} | #{page_title}"
end
end
end 
```

static_pages_controller.rb 内容：

```
class StaticPagesController < ApplicationController
  def home
  end

  def help
  end

  def about
  end

  def contact
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:08:16.817

你`application_helper.rb`好像坏掉了 你可能想要这样的东西：

```
module ApplicationHelper

  def full_title(page_title)
    base_title = "Ruby on Rails Tutorial Sample App"
    if page_title.empty?
      base_title
    else
      "#{base_title} | #{page_title}"
    end
  end

end 
```

似乎`module`线路丢失了。这就是为什么 Ruby 抱怨`end`最后一行有一个额外的内容。

# android - 从其类调用服务方法

> ID：14540346
> 
> 赞同：1
> 
> 时间：2013-01-26T18:50:22.450
> 
> 标签：android, broadcastreceiver, android-service

我有一项服务，我可以从该服务中恢复我的`ScreenReceiver`班级。触发`OnRecieve`方法时如何通知服务？`ScreenReceiver`我希望在`update()`触发“onRecieve”时调用该方法。

StateChecker.java（草案）：

```
public class StateChecker extends Service {
   //...
   // setting TimeAlarm
   TimeAlarm mTimeAlarm = new TimeAlarm();
   mTimeAlarm.SetAlarm(this.getApplicationContext(),10);

   public void update() {
   //update sth
   }
   //...
} 
```

ScreenReceiver.java（草稿）：

```
public class ScreenReceiver extends BroadcastReceiver {
    //...   

   @Override
   public void onReceive(Context context, Intent intent) {
    //...
    PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
   }
    //...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:54:43.410

您可能可以执行以下操作：

从 中创建一个新`Intent`的，传递一个 Extra，然后在服务中覆盖。检查 Extra 的意图，如果 Extra 存在，则调用.`Service``Receiver``onStartCommand()``update()`

此外，如果您使用`this`而不是，您的参数`this.getApplicationContext()`很可能是服务。然后你就可以投了。`Receiver``onReceive()` `Context`

例如

```
if (context instanceof StateChecker)
  ((StateChecker) context).update(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:59:08.470

定义一个接口并使用回调让活动知道已收到屏幕事件。

```
public Interface ScreenReceiverListener {
    void onScreenReceive(int arg1, string arg2); ..<----add arguments you want to pass back
} 
```

在你的 ScreenReceiver 类中

```
ArrayList<ScreenReceiveListener > listeners = new ArrayList<ScreenReceiveListener >();

...

public void setScreenReceiveListener(ScreenReceiveListener listener){
    listeners.add(listener);
} 
```

在您的 OnReceive 中

```
for (ScreenReceiveListener listener:listeners){
   listener.onSCreenReceive(arg1, arg2);
} 
```

在您的服务中：

```
public class StateChecker extends Service implements ScreenReceiveListener {

    ...

    screenReceiver.setScreenReceiveListener(this);

    ...
}

public void onScreenReceive(int arg1, string arg2){
   // do whatever you need to do
} 
```

全部来自记忆，所以请原谅拼写错误，您应该通过添加 removeScreenReceiveistener 并检查您没有在 setScreenReceiveListener 中添加两次相同的侦听器来改进 ScreenReceiver 类。

笔记。因为您使用接口，所以任何类（不仅仅是服务）都可以实现它，因此您可以在应用程序的任何位置进行更新。ScreenReceiver 类不知道也不关心。它只是调用侦听器，如果有的话。

# maya - NURBS 曲面中的控制点如何连接？

> ID：14540347
> 
> 赞同：0
> 
> 时间：2013-01-26T18:50:30.580
> 
> 标签：maya, nurbs

我正在尝试学习如何处理项目的 NURBS 曲面。基本上我不想用 NURBS 在一些 3D 程序中构建几何，然后导出几何，并用它运行一些模拟。我已经弄清楚了 NURBS 曲线，并且我认为我主要了解曲面是如何工作的，但我不知道控制点是如何连接的。显然你不需要像多边形那样的拓扑矩阵？当我从 Maya 导出 NURBS 曲面时，以 .ma 文件格式（纯文本文件），我可以看到节点向量，然后只是一个点列表。无拓扑信息。这是如何运作的？在不知道点如何相互连接的情况下如何重建 NURBS 曲面？导出的文件如下所示：

```
//Maya ASCII 2013 scene
//Name: test4.ma
//Last modified: Sat, Jan 26, 2013 07:21:36 PM
//Codeset: UTF-8
requires maya "2013";
requires "stereoCamera" "10.0";
currentUnit -l centimeter -a degree -t film;
fileInfo "application" "maya";
fileInfo "product" "Maya 2013";
fileInfo "version" "2013 x64";
fileInfo "cutIdentifier" "201207040330-835994";
fileInfo "osv" "Mac OS X 10.8.2";
fileInfo "license" "student";
createNode transform -n "loftedSurface1";
    setAttr ".t" -type "double3" -0.68884794895562784 0 -3.8172687581953233 ;
createNode nurbsSurface -n "loftedSurfaceShape1" -p "loftedSurface1";
    setAttr -k off ".v";
    setAttr ".vir" yes;
    setAttr ".vif" yes;
    setAttr ".covm[0]"  0 1 1;
    setAttr ".cdvm[0]"  0 1 1;
    setAttr ".dvu" 0;
    setAttr ".dvv" 0;
    setAttr ".cpr" 4;
    setAttr ".cps" 4;
    setAttr ".cc" -type "nurbsSurface" 
        3 3 0 0 no 
        8 0 0 0 1 2 3 3 3
        11 0 0 0 1 2 3 4 5 6 6 6

    54
    0.032814107781307778 -0.01084889661073064 -2.5450696958149557
    0.032814107781308312 -0.010848896610730773 -1.6967131305433036
    0.032824475105651972 -0.010848896610730714 -0.0016892641735144487
    0.032777822146102309 -0.01084889661073018 2.5509821204222565
    0.032948882997777158 -0.010848896610730326 5.3256822304677218
    0.032311292550627417 -0.010848896610730283 7.5033561343333179
    0.034690593487551526 -0.010848896610730296 11.39484483093603
    0.014785648001686571 -0.010848896610730293 11.972583607988943
    -0.00012526283089935193 -0.010848896610730293 12.513351622510489
    0.87607723187763198 -0.023973071493875439 -2.5450696958149557
    0.87607723187766595 -0.023973071493876091 -1.6967131305433036
    0.87636198619878247 -0.023973071493875821 0.00026157734839016289
    0.87508059175355446 -0.023973071493873142 2.5441541750955903
    0.87977903805225144 -0.023973071493873861 5.3510431702524812
    0.86226664730269065 -0.02397307149387367 7.4087403205209448
    0.9276177640022375 -0.023973071493873725 11.747947146400762
    0.39164345444212556 -0.023973071493873704 12.72679599298271
    -0.003344290659457324 -0.023973071493873708 13.356608602511475
    2.7585407036097025 0.080696275184513055 -2.5450696958149557
    2.7979735813230628 0.036005680442686323 -1.6988092981025378
    2.7828331201271896 0.05438167150027777 0.0049374879309111996
    2.6143679292284574 0.23983328019207673 2.5309327393956176
    2.67593270347135 0.19013709747074492 5.3992530024698517
    2.5981387973985108 0.20347021966427298 7.2291224273514345
    2.8477496474469728 0.19983391361149261 12.418208886861429
    1.1034136098865515 0.20064198162322153 14.474560637904968
    -0.010126299867110311 0.20064198162322155 15.133224682698101
    4.5214126649737496 0.45953483463333544 -2.5450696958149557
    4.6561826938778452 0.23941045408996731 -1.7369291398229287
    4.6267725925384751 0.29043329565744253 0.025561242784985394
    3.9504978751410711 1.3815767918640129 2.5159293599869446
    4.1596851721552888 1.0891788615080038 5.438642765250469
    3.9992107014958198 1.1676270867254697 7.0865667556376426
    4.4319212871194775 1.1462321162116154 12.949041810935984
    1.6384310220676352 1.1509865541035829 15.927795222282771
    -0.015643773215464073 1.1509865541035829 16.578582772395933
    5.2193823159440154 3.0233786192453191 -2.5450696958149557
    5.2193823159440162 3.0233786192453196 -1.6967131305433036
    5.2218229691816047 3.0233786192453191 0.0091618497226043649
    5.2108400296124504 3.0233786192453196 2.5130032217858407
    5.251110808032692 3.0233786192453191 5.4667467111172652
    5.1010106339208772 3.0233786192453191 6.9770771103715621
    5.6611405519478906 3.0233786192453205 13.358896446133507
    2.0430537629341199 3.0233786192453183 17.059047057656215
    -0.019924192630756767 3.0233786192453191 17.6998820408444
    5.1365144716134976 5.4897102753589557 -2.5450696958149557
    5.1365144716134994 5.4897102753589566 -1.6967131305433036
    5.1389093836131625 5.4897102753589566 0.0089946049919694682
    5.1281322796146718 5.4897102753589566 2.5135885783430627
    5.1676483276091361 5.4897102753589548 5.4645725296190131
    5.0203612396297714 5.4897102753589566 6.9851884798073476
    5.5699935435527692 5.4897102753589566 13.328625149888618
    2.0133428487217855 5.4897102753589557 16.975388787391935
    -0.01960785732642523 5.4897102753589557 17.617014800296868

    ;
select -ne :time1;
    setAttr ".o" 1;
    setAttr ".unw" 1;
select -ne :renderPartition;
    setAttr -s 2 ".st";
select -ne :initialShadingGroup;
    setAttr ".ro" yes;
select -ne :initialParticleSE;
    setAttr ".ro" yes;
select -ne :defaultShaderList1;
    setAttr -s 2 ".s";
select -ne :postProcessList1;
    setAttr -s 2 ".p";
select -ne :defaultRenderingList1;
select -ne :renderGlobalsList1;
select -ne :hardwareRenderGlobals;
    setAttr ".ctrs" 256;
    setAttr ".btrs" 512;
select -ne :defaultHardwareRenderGlobals;
    setAttr ".fn" -type "string" "im";
    setAttr ".res" -type "string" "ntsc_4d 646 485 1.333";
select -ne :ikSystem;
    setAttr -s 4 ".sol";
connectAttr "loftedSurfaceShape1.iog" ":initialShadingGroup.dsm" -na;
// End of test4.ma 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:39:23.830

NURBS 曲面的 CV 始终布置在网格中。可以使用曲面的度数和每个方向上的结数来计算 nurbs 曲面中的 CV 数量。然后，简历只是以某种特定的顺序呈现，通常是行优先的。

让我们看看你的例子。我主要是在猜测格式，所以你要检查我的假设。

```
3 3 0 0 no 
```

看起来你有一个双三次表面。它在任何一个方向上都不是周期性的（也就是说，你有一个薄片而不是一个圆柱体或圆环）。您的 CV 是非理性的，这意味着它们是 [x,y,z] 而不是 [xw,yw,zw,w]。

换句话说，第一行的格式似乎是：

```
[degree in s] [degree in t] [periodic in s] [periodic in t] [rational] 
```

接下来，一个节点向量有 8 个节点值，另一个节点有 11 个节点。对于 3 阶非周期性 nurbs，CV 的数量是 num_knots - 2。所以，这个表面上有 6 x 9 个 CV。

前 6 个 CV 位于第一行。接下来的 6 个在下一行，依此类推。

如果您正在寻找有关 NURBS 的更多信息，我建议您使用[此文本](http://tom.cs.byu.edu/~557/text/cagd.pdf)作为理论依据。对于 Maya 特定的东西，他们在 maya API 中有一些不错的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:04:10.820

NURBS 曲面在 u 方向上是度数+跨度点和 v 方向上 (degree-1)+spans+1* 点的拓扑正方形。（单个 NURBS 曲面就像多边形的一个面，只是更复杂）

“.cc”中的前 2 个属性是方向的度数，接下来的两行定义了每个单独的值代表一个跨度的节点。重复只是权重，因此该点重复 x 次，因此：

```
8 0 0 0 1 2 3 3 3 
```

表示有 8 个结（在本例中为 U 方向），跨度为 0 1 2 3，共 6 个点，因此它是 U 方向的三度单跨曲线。该示例在 V 方向上有 9 个点，因此 7*9 = 总共 54 个点

然而，这还不够，NURBS 甚至可以远程使用。您必须实现修剪曲线，这些曲线是位于曲面的 UV 参数化上的曲线，它们可以将单个 NURBS 裁剪为不同的形状。

然而，在实践中，maya 用户依赖于手动绗缝。被子** 是网格的高阶 NURBS 等效项，大多数 nurbs 建模者将其用作概念。要处理这些，通常连修剪曲线都不够。因为修剪曲线不能在应用程序之间可靠传输，无需缝合。因此，许多应用程序依赖于实际告知所述表面到表面被子集合地形连接的空间历史。因此，准备好为任何有意义的 NURBS 兼容性制作自己的交集算法等。

有关数学基础信息的更多信息，请参阅 Wikipedia、wolfram 等。

* 如果我没记错的话。

** 由于在几个不同的语言领域同时发现，被子在不同的应用程序中具有不同的名称。

# java - 一个加法程序，它不断将您输入的数字相加，直到您输入一个零。在 Java 中

> ID：14540348
> 
> 赞同：0
> 
> 时间：2013-01-26T18:50:46.370
> 
> 标签：java, nested-loops

在这个程序中，您（用户）一直输入数字，直到您输入零，这是列表终止的时候，您会得到正偶数、奇数和负数的总和。我已经尽力完成它，但问题是当我尝试运行它们时[http://ideone.com/和 DrJava 都挂起。](http://ideone.com/)但他们编译得很好。这是我的程序：

```
 /**
*@author DarkIceDragon
*/
 import java.util.*;
 class huge_addition
{
public static void main (String[] args)
{
    Scanner sc = new Scanner (System.in);
    System.out.println ("Enter numbers. List terminates when you enter a zero. Enter a zero when you want to begin the addition.");
    int a = sc.nextInt();
    int esum=0;
    int osum=0;
    int nsum=0;
    while (a !=0)
    {
        if (a>0)
        {
            if (a%2==0)
            {
                esum = esum+a;
            }// end of 3rd innermost if statement
            else
            {
            osum = osum+a;
            }// end of 3rd else statement
        }//end of 2nd middle if-else-loop
        else if (a<0)
        {
            nsum=nsum+a;
        }//end of 2nd middle else statement
    }//end of while loop
        System.out.println ("The sum of even positive numbers is "+esum);
        System.out.println ("The sum of odd positive numbers is "+osum);
        System.out.println ("The sum of negative numbers is "+nsum);
    }//end of main
        }//end of class 
```

我承认它是上学的，但我自己完成了所有其余的工作（大约有 16 个左右），现在是晚上 12:00，我一直在努力让这个程序运行一个多小时. 而且我在Java中仍然是一个完整的新手（虽然noob会更合适），所以我现在只有基本命令等。哎呀，直到今天，我仍然在我的程序中使用`void main()`而不是`public static void main(String[] args)`在我的程序中使用了 2 个小时，想知道为什么它们不在 NetBeans 上运行。太糟糕了 BlueJ 停止为我工作。

任何帮助将不胜感激。感谢您观看并祝您有美好的一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:59:27.620

因为这是你的学校作业，所以我只会回答一个提示：检查 sc.nextInt() 在你的代码中的位置。第二个提示：运行代码时尝试输入数字零作为第一个输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:19:26.820

您应该每次在 while 循环中使用 接受数字`sc.nextInt()`，而您所做的只是进入 while 循环，什么也不做。每次都接受数字，并根据该数字检查它是偶数还是奇数，然后添加。

这是更正后的代码：

```
import java.util.*;
class huge_addition
{
public static void main (String[] args)
{
Scanner sc = new Scanner (System.in);
System.out.println ("Enter numbers. List terminates when you enter a zero. Enter a zero when you want to begin the addition.");

// no need ->> int a = sc.nextInt();
int num=-1;
int esum=0;
int osum=0;
int nsum=0;
while (num !=0)
{

    System.out.println("enter the number");
       num= sc.nextInt();
        if (num%2==0)
        {
            esum = esum+num;
        }// end of 3rd innermost if statement
        else
        {
        osum = osum+num;
        }// end of 3rd else statement
    //end of 2nd middle if-else-loop
    if (num<0)
    {
        nsum=nsum+num;
    }//end of 2nd middle else statement
 }//end of while loop
    System.out.println ("The sum of even positive numbers is "+esum);
    System.out.println ("The sum of odd positive numbers is "+osum);
    System.out.println ("The sum of negative numbers is "+nsum);
 }//end of main
    }//end of class 
```

# javascript - javascript正确排序十进制数字

> ID：14540356
> 
> 赞同：2
> 
> 时间：2013-01-26T18:51:51.553
> 
> 标签：javascript, sorting

好的，我有一段代码按字母顺序对给出的名称进行排序。

然而，代码并没有按照我想要的方式处理小数。

它以以下方式对名称进行排序（我希望它以数字方式递增）：

它会订购它：

*   苹果 - 1.0051
*   苹果 - 1.1071
*   苹果 - 11.1592
*   苹果 - 12.0692
*   苹果 - 12.1717
*   APPLE - 2.0186 << 这显然应该在“APPLE - 1.1071”之后
*   苹果 - 21.1407
*   苹果 - 22.089
*   苹果 - 23.069
*   香蕉 - 1.0051
*   香蕉 - 1.1071
*   香蕉 - 11.1592
*   香蕉 - 12.0692
*   香蕉 - 12.1717
*   BANANA - 2.0186 << 这显然应该在“BANANA - 1.1071”之后
*   香蕉 - 21.1407
*   香蕉 - 22.089
*   香蕉 - 23.069

这是我正在使用的代码。我不完全理解代码，因为它是我一直在使用的一个片段。

```
function(a, b){
         var nameA=a.myname.toLowerCase(), nameB=b.myname.toLowerCase()
         if (nameA < nameB) //sort string ascending
          return -1 
         if (nameA > nameB)
          return 1
         return 0 //default return value (no sorting)
    } 
```

问候，强尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T20:23:30.007

[Demo](http://jsfiddle.net/rlemon/wphH8/) ，这里是源码+小解释：

```
function fruit_sort(a, b) {
    var parts = {
        a: a.split('-'),
        b: b.split('-')
    };
    if (parts.a[0] == parts.b[0]) // strings are the same
        return parseFloat(parts.a[1]) - parseFloat(parts.b[1]); // sort by number
    return parts.a[0] > parts.b[0] ? 1 : -1; // sort by string
}
var arr = ["APPLE - 1.0051",
    "APPLE - 1.1071",
    "APPLE - 11.1592",
    "APPLE - 12.0692",
    "BANANA - 1.0051",
    "BANANA - 1.1071",
    "BANANA - 11.1592",
    "BANANA - 12.0692",
    "BANANA - 12.1717",
    "APPLE - 12.1717",
    "APPLE - 2.0186",
    "APPLE - 21.1407",
    "BANANA - 23.069",
    "APPLE - 22.089",
    "APPLE - 23.069",
    "BANANA - 2.0186",
    "BANANA - 21.1407",
    "BANANA - 22.089"];
arr.sort(fruit_sort);
console.log(arr);
// outputs
[
    "APPLE - 1.0051",
    "APPLE - 1.1071",
    "APPLE - 2.0186",
    "APPLE - 11.1592",
    "APPLE - 12.0692",
    "APPLE - 12.1717",
    "APPLE - 21.1407",
    "APPLE - 22.089",
    "APPLE - 23.069",
    "BANANA - 1.0051",
    "BANANA - 1.1071",
    "BANANA - 2.0186",
    "BANANA - 11.1592",
    "BANANA - 12.0692",
    "BANANA - 12.1717",
    "BANANA - 21.1407",
    "BANANA - 22.089",
    "BANANA - 23.069"
] 
```

首先，该函数将术语拆分为它们的文本和数字部分——如果文本是偶数，它只按数值的 parseFloat 值排序——否则它首先按字符串值排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T19:34:17.927

Like @Steve Wellens suggested in his comment, I modified your existing snippet to compare the text parts first, then in the event of a tie compare the numeric portions of the string, by converting them to `float`s. If you would like to sort **solely** by the numeric portion of the string then @extramaster 's answer should serve you well.

```
function(a, b){
        var parts, textPartA, textPartB, numericPartA, numericPartB;

        parts = a.split('-');
        textPartA = parts[0];
        numericPartA = parseFloat(parts[1]);

        parts = b.split('-');
        textPartB = parts[0];
        numericPartB = parseFloat(parts[1]);

        //sort by text first
        if(textPartA < textPartB) {
            return -1;
        }
        if(textPartA > textPartB) {
            return 1;
        }

        //text parts are equal, now sort by the numeric parts
        if(numericPartA < numericPartB){
            return -1;
        }
        if(numericPartA > numericPartB){
            return 1;
        }

        return 0;
    } 
```

@Jonny: [A quick example](http://jsfiddle.net/H2w9B/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T19:12:25.633

试试这个代码：

```
function (x, y) {
    x=x.myname;
    y=y.myname;

    var nameA = x.toLowerCase().split("-")[0],
        nameB = y.toLowerCase().split("-")[0]
    if (nameA < nameB) //sort string ascending
    return -1
    if (nameA > nameB) return 1
    var floatExtract = /(([1-9][0-9]*\.?[0-9]*)|(\.[0-9]+))([Ee][+-]?[0-9]+)?/;
    if (floatExtract.test(x) && floatExtract.test(y)) {
        x = x.match(floatExtract)[1];
        y = y.match(floatExtract)[1];
        if (!isNaN(parseFloat(x)) && !isNaN(parseFloat(y))) {
            x = parseInt(x);
            y = parseInt(y);
        }
        return ((x > y) ? 1 : ((x < y) ? -1 : 0));
    }
    return 0;
} 
```

它拆分您的字符串并与第一部分[连字符之前]进行简单比较，然后在您的字符串中搜索一个浮点数并在列表中针对该浮点数进行另一种排序......

[演示](http://jsfiddle.net/YDf4Y/6/show)| [资源](http://jsfiddle.net/YDf4Y/6/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-30T09:53:19.947

这是另一个页面上的类似解决方案： [Javascript notsorting DECIMAL numbers correct](https://stackoverflow.com/questions/14683662/javascript-not-sorting-decimal-numbers-correctly)

这个想法是先按字符串排序，然后按数字排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T20:47:08.070

好的，我使用了 rlemon 的代码示例并将其编辑为以下内容：

```
function(a, b) {
var parts = {
    a: a.myname.split(' - '),
    b: b.myname.split(' - ')
};
if (parts.a[0] == parts.b[0]) // strings are the same
    return parseFloat(parts.a[1]) - parseFloat(parts.b[1]); // sort by number
return parts.a[0] > parts.b[0] ? 1 : -1; // sort by string 
```

}

# visual-studio-2010 - 无法创建团队项目

> ID：14540357
> 
> 赞同：0
> 
> 时间：2013-01-26T18:51:56.220
> 
> 标签：visual-studio-2010

我在创建团队项目时遇到以下问题。

TF30172 : 您正在尝试创建团队项目，没有必要的许可或使用旧版本的团队资源管理器。

已安装 VS2010、SP1 和 TFS 2012。

请让我知道如何解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:28:03.343

您需要安装 Team Explorer 2012 才能创建团队项目。

无论 Service Pack 版本如何，都不支持从 Team Explorer 2010 创建 TFS 2012 的团队项目。如果您限制团队项目的创建方式（推荐），那么您可以只在 TFS 服务器上安装 Team Explorer 2012。您需要确保在更新可用时更新两者。

# regex - 拒绝 lex 中的重复字符

> ID：14540364
> 
> 赞同：1
> 
> 时间：2013-01-26T18:52:27.760
> 
> 标签：regex, character, lex, flex-lexer

我需要为 flex 程序编写一个正则表达式，它会在其中找到重复的字符并拒绝它们，例如它批准 ABD 但不批准 ABDA 或 AABD，因为表达式中重复了“A”。这让我头疼了一个星期，提前感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:58:44.620

如果不区分大小写：

```
.*(A.*A|B.*B|C.*C|D.*D|E.*E|F.*F|G.*G|H.*H|I.*I|J.*J|L.*L|M.*M|N.*N|O.*O|P.*P|Q.*Q|R.*R|S.*S|T.*T|U.*U|V.*V|X.*X|Y.*Y|W.*W|Z.*Z).* 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-26T18:56:25.107

匹配任何字符，后跟与括号中相同的匹配：`/(.)\1/`

**编辑：**这只匹配连续的字母。用于`/(.).*\1/`所有比赛。

# nsstring - 如果 NSString 尚未存在，则将 NSString 添加到 NSMutableArray - 不工作

> ID：14540365
> 
> 赞同：0
> 
> 时间：2013-01-26T18:52:35.487
> 
> 标签：nsstring, nsmutablearray, nsarray

无法理解为什么这不起作用，它只是说 id num 每次都没有被使用过......并且永远不会将它添加到数组中。对此的任何帮助将不胜感激。我几乎可以肯定错过了一些明显的东西，但这让我发疯。

```
- (IBAction)idNumInputEnd:(id)sender
{
    // Check if ID Number has been used before, if it hasnt, add it to the list.
    NSString *idNumCheck = idNumberInput.text;

    if ([idNumberList containsObject:idNumCheck])
    {
        NSLog(@"This id number has been used before, ask user if he would like to reload the       data");
    }
    else
    {
        NSLog(@"This id number hasn't been used before and is thus being added to the array");
        [idNumberList addObject:idNumCheck];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:37:17.923

我的嫌疑人（由 Martin 分享，根据他的评论）`idNumberList`从未被分配和初始化为空的`NSMutableArray`.

如果是这种情况，ARC 将分配`nil`给`idNumberList`，因此`[idNumberList containsObject:idNumCheck]`将评估为`nil`，以及`[idNumberList addObject:idNumCheck]`

换句话说，您评估的代码变成了类似

```
if (nil) {
    NSLog(@"This id number has been used before, ask user if he would like to reload the       data");
} else {
    NSLog(@"This id number hasn't been used before and is thus being added to the array");
    nil;
} 
```

鉴于此，`else`将始终采用分支，对对象的`addObject`调用`nil`将静默失败，这会导致您遇到的行为。

为了解决这个问题，初始化`idNumberList`如下：

```
idNumberList = [[NSMutableArray alloc] init]; 
```

# css - css 不工作背景悬停活动 - 不是语法问题

> ID：14540367
> 
> 赞同：0
> 
> 时间：2013-01-26T18:52:49.173
> 
> 标签：css, syntax, hover

您好，我真的尝试搜索并进行多项实验，无论如何我都能得到这个工作..

我使用 javascript 菜单，工作完美，但我尝试更改每个菜单的背景，它也很好.. 但是 HOVER 和 ACTIVE 不适用于这些元素，为什么.. 这段代码必须这样做或者那是我的想法.. =（请帮助我学习。

CSS代码

```
/* COMIENZA  TOP NAVI*/
 .topnavi a {
    width:90px;
    height:65px;
    float:left;
    margin:3px;
    background:url(../imagenes/topnav_01.png) 0 0 no-repeat;
    display:block;
    font-size:1px;
}

#tn02 {background:url(../imagenes/topnav_02.png) 0 0 no-repeat;}     
#tn03 {background:url(../imagenes/topnav_03.png) 0 0 no-repeat;}
#tn04 {background:url(../imagenes/topnav_04.png) 0 0 no-repeat;}
#tn05 {background:url(../imagenes/topnav_05.png) 0 0 no-repeat;}

/* mouseover state */
.topnavi a:hover {
    background-position:0 -65px;
}

/* active state (current page state) */
.topnavi a.active {
    background-position:0 -130px;
}        

/* TERMINA TOP NAVI*/ 
```

html代码

```
<div class="topnavi">
  <a href="1" class="active" id="tn01"/>
  <a href="2" class="" id="tn02"/>
  <a href="3" class="" id="tn03"/>
  <a href="4" class="" id="tn04"/>
  <a href="5" class="" id="tn05"/>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:56:00.097

ID 引用优先于类引用。不要忘记 CSS 中的“C”代表级联！您的`#tn0*`规则优先于`background-position`您稍后定义的属性。尝试添加`!important`.

```
/* mouseover state */
.topnavi a:hover {
    background-position:0 -65px !important;
}

/* active state (current page state) */
.topnavi a.active {
    background-position:0 -130px !important;
} 
```

# encoding - 在我的源代码中插入了额外的字符，它不会再编译了

> ID：14540368
> 
> 赞同：0
> 
> 时间：2013-01-26T18:53:07.097
> 
> 标签：encoding, compiler-errors

当我在代码块中创建一个新项目并运行默认（hello world！）程序时，一切都很好。但是当我突然改变程序中的某些内容时，它会出现如下错误：

```
expected unqualified-id before '+' token 
```

在第一行。当我`main.cpp`用记事本打开文件时，我看到每个单词之前和之后都添加了“+”和相同的其他符号，例如，在添加 #include 之前 +ACM。

它看起来像这样：

```
+ACM-include+ACAAPA-iostream+AD4ADQAKAA0ACg-using+ACA-namespace+ACA-std+ADsADQAKAA0ACg-int+ACA-main()+AA0ACgB7AA0ACgAgACAAIAAg-printf(+ACIAJQ-d+ACI-,+ACA-454565)+ADsADQAKACAAIAAgACA-return+ACA-0+ADsADQAKAH0ADQAK- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:04:19.667

它是 UTF-7 编码，你的例子是这样的：

```
#include <iostream>

using namespace std;

int main()
{
    printf("%d", 454565);
    return 0;
} 
```

一旦某些东西以 UTF-7 保存，就不可能自动检测它是 UTF-7 还是 ASCII。您的编辑器可能*配置*为以 UTF-7 保存；您必须找到此设置并替换为合理的设置（例如 UTF-8）。

# sql-server - 从 Progress 数据库提取到 SQL Server

> ID：14540369
> 
> 赞同：0
> 
> 时间：2013-01-26T18:53:09.290
> 
> 标签：sql-server, odbc, progress-db

我正在寻找从进度数据库（v10.2b）中提取的最佳方法（或几个可供选择的好方法）。最终目标将是 SQL Server (v2008)。我说“最终目标”，因为我不一定要从 SQL Server 中直接连接到 Progress，即我不反对从 Progress 提取到文本文件，然后将其导入 SQL Server。

我对方法的研究提出了与我不匹配的方案；

*   将整个 Progress DB 迁移到 SQL Server
*   将整个表从 Progress 导出到 SQL Server
*   使用特定于进度的工具，我无权访问

我能够使用 ODBC 连接到 Progress，并在 Visual Studio (v2010) 中编写了一些查询。我还针对 Progress 数据库进行了一些自定义编程，构建了一个简单的 Web 界面来证明一些事情。

因此，我的要求是使用 ODBC，并构建一个每天运行特定查询的例程。然后，此查询的结果将被导入 SQL Server 数据库。在此先感谢您的帮助。

**更新**
经过一些额外的研究，我确实发现我正在寻找链接服务器。给使用 SQL Server Express 的其他人的一些注意事项；

*   如果您使用的是 SQL Server Express，您可能在桌面或 DTS 的“开始”菜单中看不到程序。我发现 DTSWizard.exe 嵌套在我的 SQL Server 程序文件（对我来说是 C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn）中，并且能够简单地创建一个快捷方式。
*   此外，由于我使用的是 SQL Server 的 SQL Express 版本，因此无法保存我创建的包。因此，在创建包并运行一次之后，我只需重新运行包，并保存我的 SQL 以供将来使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-15T19:50:19.967

答案有点晚，但万一其他人想要这样做......

您可以使用链接服务器，但您会发现性能不如直接通过 ODBC 驱动程序连接，而且数据类型的转换可能意味着您无法访问某些表。尽管对于探索数据，链接服务器可能很方便。

如果您将 SSIS 与 ODBC 驱动程序一起使用（您将必须使用 ADO.NET 数据源），那么这将最有效地执行，并且您应该获得更准确的数据类型（请记住，正在进行的数据类型可以动态更改） .

如果您必须提取大量表格，我会查看 BIML 来帮助您实现这一目标。BIML（商业智能标记语言）可以帮助您动态创建许多可以从主包调用的 SSIS 包。然后可以安排或运行该主包，也可以根据需要运行任何子包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:46:11.037

您可以使用 OLE 连接到 Progress DB 吗？如果是这样，您可以使用[SQL Server Linked Server](http://msdn.microsoft.com/en-us/library/ms188279.aspx)来绕过提取到文件的需要，然后将其加载到 SQL Server 中。或者，您可以提取到 Excel，然后从 Excel 导入到 SQL Server。

# architecture - IoC 和单例 - 何时不注入

> ID：14540370
> 
> 赞同：1
> 
> 时间：2013-01-26T18:53:20.147
> 
> 标签：architecture, domain-driven-design, inversion-of-control

阅读一些有关领域驱动设计的有趣书籍，其中一个示例如下：

```
// Order
IOrderNumberService orderNumberService;
public void Accept()
{
    this.orderNumber = this.orderNumberService.GetNextAvailableNumber();
} 
```

上面代码中没有显示的是，`OrderNumberService`已经被 IoC 框架注入。我们不知道服务对象的生命周期范围（可以为每次注入创建一个新服务，或者每次注入一个单例）。

对于其工作是从数据库中检查下一个可用数字的服务，我认为不需要状态并且可以安全地（可能应该）使用单例。

对于这种情况，我认为不需要换掉这个服务，并且可以直接调用单例类的具体实现`OrderNumberService.GetNextAvailableNumber()`，或者至少如果我需要使用一个接口进行抽象，我可以在以后随时重构。

除了从实现中抽象出服务接口允许更轻松的测试之外，注入服务还有其他好处吗？

我很谨慎地将我读过的所有东西都写进代码中，因为它们很酷——那么抽象在什么时候创建了这么多的层，使得代码更难阅读，应该注意哪些警告信号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:21:36.700

服务在 DDD 中没有状态 (Evans p. 107)，无论它们属于哪个层

> 当域中的重要过程或转换不是实体或值对象的自然责任时，将操作添加到模型中作为声明为服务的独立接口。根据模型的语言定义接口，并确保操作名称是 UBIQUITOUS LANGUAGE 的一部分。**使服务无状态**

使用高级抽象（接口）而不是实现（类）是[依赖倒置原则](http://en.wikipedia.org/wiki/Dependency_inversion_principle)，而不是依赖注入，依赖倒置是关于抽象和实现的关系，而依赖注入是关于删除硬编码的依赖——即使你的领域是一个接口，您仍然需要以某种方式对其进行初始化，即为某个类实例分配一个值。

至于注入服务实例的技术，DDD 与技术无关。如果您认为使用 IoC 容器会使事情变得更难阅读，您可以考虑改用服务定位器模式，完整的推理请参见[Martin J Fowler 关于 DI 容器的文章](http://martinfowler.com/articles/injection.html)。但是 tbh DDD 需要一些复杂的团队（Evans 在一些关于 infoq 的谈话中提到过）所以我认为将是能够掌握 IoC 概念的人，所以服务定位器在这里没有太大的优势（除非你正在工作是一些有限的环境，如 IoC 框架过于重量级的 Android 手机解决方案）

至于臭名昭著的单例模式（用静态类方法实现）我认为它根本不合适，因为它不可测试。

DDD 还提倡使用**轻量级**框架（参见架构框架，Evans p. 74），而现代框架（Spring、Fluent NHibernate 等）的开发考虑到了这一点，因此它们实际上旨在使 POJO/POCO 的工作更简单（您可以在 Fluent NHibernate 架构师 Jeremy Miller [http://codebetter.com/jeremymiller/2010/01/11/patterns-in-practice-a-retrospective/](http://codebetter.com/jeremymiller/2010/01/11/patterns-in-practice-a-retrospective/)撰写的一组关于框架设计的文章中阅读更多内容），许多Spring项目，例如直接引用DDD。因此，框架不太可能强迫您在代码中添加依赖项，或者降低其可读性 - 它宁愿使用反射 API 来设置值，并且会使用一些非侵入性的方法，如 XML 或属性（注释）配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T01:53:00.323

> 除了从实现中抽象出服务接口允许更轻松的测试之外，注入服务还有其他好处吗？

依赖注入通过易于管理的配置将元素连接在一起。正如您所指出的，一个用例是使用模拟服务测试组件。总的来说，未来可能会出现这种服务实现的许多不同变体，通过配置来切换它们会更容易，而不是在很多地方重构代码。

虽然`OrderNumberService.GetNextAvailableNumber()`最初可能看起来是微不足道的实现，可能不会改变，但从理论上讲，未来的需求仍然可能发生变化。

想象一下这种情况：您的客户使用您的系统获得了一些其他业务，并希望您在那里安装另一个系统实例。但是他们的会计部门在对订单进行编号时使用了一些基于日期的模式，而不是简单地增加 ID。通过使用 DI，您可以让两个实例运行不同的配置，而无需重构代码。

# android - 在 Android 中解析 XML 文件

> ID：14540371
> 
> 赞同：1
> 
> 时间：2013-01-26T18:53:26.663
> 
> 标签：android, web-services, xml-parsing

我正在开发一个用于在线投票的应用程序，其中登录过程是通过 dotnet 中的 web 服务进行的。网络服务部分已准备就绪并且可以工作，但我想看看返回了什么响应。

```
URL url=new URL("http://www.example.com/login");
            HttpURLConnection urlconnection=(HttpURLConnection)url.openConnection();
            String requestXML="<data><username>sachin.t@gmail.com</username><password>sachin</password></data>";
            urlconnection.setRequestMethod("POST");
            urlconnection.setDoInput(true);
            urlconnection.setDoOutput(true);
            urlconnection.setRequestProperty("Accept-Charset", "UTF-8");
            urlconnection.setRequestProperty("Content-type", "application/xml");
            urlconnection.setRequestProperty("Content-Length", ""+Integer.toString(requestXML.length()));

            //Send request
            DataOutputStream dout=new DataOutputStream(urlconnection.getOutputStream());
            dout.writeBytes(requestXML);
            dout.flush();
            dout.close();
            if(urlconnection.getResponseCode()==HttpURLConnection.HTTP_OK)
            {
                InputStream is=urlconnection.getInputStream();
                BufferedReader breader=new BufferedReader(new InputStreamReader(is));
                String temp;
                String resp="";
                while((temp=breader.readLine())!=null)
                {
                    resp+=temp;
                }

                Document respdoc=null;
                DocumentBuilderFactory docbuilderfactory=DocumentBuilderFactory.newInstance();
                DocumentBuilder docbuilder=docbuilderfactory.newDocumentBuilder();
                InputSource isource=new InputSource();
                isource.setCharacterStream(new StringReader(resp));
                respdoc=docbuilder.parse(isource); 
```

从网上我得到了这个，但我想解析下面给出的响应。

```
<login>
    <login_validation>"1/2/3"</login_validation> 
    ( 1-invalid username,2-successfull and 3- already voted)

    <voter_id>" 0/voter_id "</voter_id> 
    (if sucessfull then only voter_id else value will return 0)
</login> 
```

有什么建议吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:10:23.970

您可以使用 Xpath (http://developer.android.com/reference/javax/xml/xpath/package-summary.html)。如果我的回答正确，您的回答是“respdoc”。要选择 login_validation 节点，您必须这样做：

```
XPath xpath = XPathFactory.newInstance().newXPath();
String expression = "/login/login_validation";
Node loginValidation = (Node) xpath.evaluate(expression, respdoc, XPathConstants.NODE); 
```

选择 voter_id 节点：

```
expression = "/login/voter_id";
Node voterId = (Node) xpath.evaluate(expression, respdoc, XPathConstants.NODE); 
```

之后，您可以使用 loginValidation 和 voterId 做任何您想做的事情。

# cuda - 优化 X_transpose*X CUDA 内核的技巧

> ID：14540372
> 
> 赞同：0
> 
> 时间：2013-01-26T18:53:32.237
> 
> 标签：cuda

我正在编写我的第一个 CUDA 应用程序，并且正在编写我自己的所有内核以供练习。

在一部分中，我只是在计算 X_transpose * X。

我一直在使用 cudaMallocPitch 和 cudaMemcpy2D，我首先在设备上为 X 和 X_transpose*X 分配足够的空间。我将 X 复制到设备，我的内核接受两个输入，即 X 矩阵，然后是写入 X_transpose * X 结果的空间。

使用分析器，内核最初需要 104 秒才能在大小为 5000x6000 的矩阵上执行。我在主机上用零填充矩阵，使其成为块大小的倍数，以避免检查内核中矩阵的边界。我使用 32 x 32 的块大小。

我进行了一些更改以尝试最大化对全局内存的合并读/写，这似乎有很大帮助。使用可视化分析器来分析我的代码的发布版本，内核现在需要 4.27 秒来执行。

我还没有对我的 matlab 执行进行准确的计时（只是操作 X'*X;），但它似乎大约是 3 秒。我希望我能比使用 CUDA 的 matlab 获得更好的加速。

nvidia 视觉分析器无法找到我的内核的任何问题，我希望这里的社区可能对我如何使它更快地运行有一些建议。

内核代码：

```
__global__ void XTXKernel(Matrix X, Matrix XTX) {

//find location in output matrix
int blockRow = blockIdx.y;
int blockCol = blockIdx.x;

int row = threadIdx.y;
int col = threadIdx.x;

Matrix XTXsub = GetSubMatrix(XTX, blockRow, blockCol);
float Cvalue = 0;

for(int m = 0; m < (X.paddedHeight / BLOCK_SIZE); ++m) {

    //Get sub-matrix
    Matrix Xsub = GetSubMatrix(X, m, blockCol);
    Matrix XTsub = GetSubMatrix(X, m, blockRow);

    __shared__ float Xs[BLOCK_SIZE][BLOCK_SIZE];
    __shared__ float XTs[BLOCK_SIZE][BLOCK_SIZE];

    //Xs[row][col] = GetElement(Xsub, row, col);
    //XTs[row][col] = GetElement(XTsub, col, row);
    Xs[row][col] = *(float*)((char*)Xsub.data + row*Xsub.pitch) + col;
    XTs[col][row] = *(float*)((char*)XTsub.data + row*XTsub.pitch) + col;

    __syncthreads();

    for(int e = 0; e < BLOCK_SIZE; ++e)
        Cvalue += Xs[e][row] * XTs[col][e];

    __syncthreads();
}

//write the result to the XTX matrix
//SetElement(XTXsub, row, col, Cvalue);
((float *)((char*)XTXsub.data + row*XTX.pitch) + col)[0] = Cvalue;
} 
```

我的矩阵结构的定义：

```
struct Matrix {
matrixLocation location;
unsigned int width;             //width of matrix(# cols)
unsigned int height;            //height of matrix(# rows)
unsigned int paddedWidth;       //zero padded width
unsigned int paddedHeight;      //zero padded height
float* data;                    //pointer to linear array of data elements
size_t pitch;               //pitch in bytes, the paddedHeight*sizeof(float) for host, device determines own pitch
size_t size;                //total number of elements in the matrix
size_t paddedSize;          //total number of elements counting zero padding
}; 
```

提前感谢您的建议。

编辑：我忘了提，我在开普勒卡 GTX 670 4GB 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T02:35:31.627

1.  较小的块大小（如 16x16 或 8x8）可能更快。[这张幻灯片](http://coachk.cs.ucf.edu/courses/CDA6938/s08/matrix_multiplication_hongliang.ppt)还演示了更大的非正方形大小的块/共享内存对于特定矩阵大小可能更快。
2.  对于共享内存分配，在前导维度上添加一个虚拟元素，`[BLOCK_SIZE][BLOCK_SIZE+1]`以避免银行冲突。
3.  尝试使用展开内部 for 循环`#pragma unroll`

另一方面，对于足够大的 A'*A，您可能不会比 matlab GPU 代码快多少。由于 matlab 的性能瓶颈是调用开销而不是内核性能。

cuBLAS 例程`culas_gemm()`可能具有最高的矩阵乘法性能。你可以把你的和它比较。

[在某些情况下， MAGMA](https://developer.nvidia.com/magma)例程`magma_gemm()`比 cuBLAS 具有更高的性能。这是一个开源项目。你也可以从他们的代码中得到一些想法。

# ruby - 如何在 ruby 中通过长度控制创建/生成字符和数字的排列

> ID：14540373
> 
> 赞同：0
> 
> 时间：2013-01-26T18:53:37.823
> 
> 标签：ruby, random, permutation, metasploit

我需要创建/生成包含字符和数字排列的长字符串，同时我需要控制字符串长度这种方法最著名的例子是

**Metasploit 项目**：

pettern_create.rb [字符串长度为 arg]

前任。模式创建.rb 100

和

**浪人项目：**

```
String.generate([:alpha, 1], :numeric).take(100).each do |pattern| 
   print pattern
end 
```

两者都会产生

> A0A1A2A3A4A5A6A7A8A9B0B1B2B3B4B5B6B7B8B9C0C1C2C3C4C5C6C7C8C9D0D1D2D3D4D5D6D7D8D9E0E1E2E3E4E5E6E7E8E9F0F1F2F3F4F5F6F7F8F9G0G1G2G3G4G5G6G7G8G9H0H1H2H3H4H5H6H7H8H9I0I1I2I3I4I5I6I7I8I9J0J1J2J3J4J5J6J7J8J9

**我试过了**

```
all  = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z",
         "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z",
         "0","1", "2", "3", "4", "5", "6", "7", "8", "9"]

puts  all.permutation(4).to_a 
```

认为这将花费大量时间，因为它将在没有控制的情况下生成所有排列，控制是防止不需要的字符串的方法

指定我可以使用的“4C5C6”之类的字符串的特定位置没有问题

```
str = "A0A1A2A3A4A5A6A7A8A9B0B1B2B3B4B5B6B7B8B9C0C1C2C3C4C5C6C7C8C9D0D1D2D3D4D5D6D7D8D9E0E1E2E3E4E5E6E7E8E9F0F1F2F3F4F5F6F7F8F9G0G1G2G3G4G5G6G7G8G9H0H1H2H3H4H5H6H7H8H9I0I1I2I3I4I5I6I7I8I9J0J1J2J3J4J5J6J7J8J9"
puts str.index("4C5C6")   #=> 46 
```

**笔记：**

*   应该始终以相同的序列生成排列。
*   我不想强迫用户为小功能宝石巨大的项目
*   我需要了解这样做的算法或程序技巧

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T19:10:53.827

该`permutation`方法产生一个枚举器，这是您想要的。不要把它变成一个数组`to_a`，只需要你需要的。

```
all  = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z",
         "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z",
         "0","1", "2", "3", "4", "5", "6", "7", "8", "9"]

p  all.permutation(4).first(100) #take(100) is fine too 
```

Ruby 字符串在 Range btw 中工作，所以你可以这样做：

```
('aaaa'..'zzzz').first(100) #or
('A0'..'Z9').first(100).join
#=> "A0A1A2A3A4A5A6A7A8A9B0B1B2B3B4B5B6B7B8B9C0C1C2C3C4C5C6C7C8C9D0D1D2D3D4D5D6D7D8D9E0E1E2E3E4E5E6E7E8E9F0F1F2F3F4F5F6F7F8F9G0G1G2G3G4G5G6G7G8G9H0H1H2H3H4H5H6H7H8H9I0I1I2I3I4I5I6I7I8I9J0J1J2J3J4J5J6J7J8J9" 
```

# php - 来自 $_GET 的 PHP 值不适用于回显数组

> ID：14540375
> 
> 赞同：1
> 
> 时间：2013-01-26T18:53:48.673
> 
> 标签：php, arrays, get, multidimensional-array

我有一个从 $_GET 获取值的 php 页面，并根据该值在多维数组中选择不同的值

```
$data =
array(
     "index" => array(
         "name" => "title",
         "title" => "<img src = 'logo.png' alt=''>",
         "fallback_html" => "main.php",
         "gallery" => array("1" => "nothing")),
     "gallery1" => array(
         "name" => "gallery1",
         "title" => "Gallery 1",
         "fallback_html" => "",
         "gallery" => array("1" => "jpg1.jpg","2" => "jpg2.jpg")
     )
); 
```

这是代码

```
if(isset($_GET['p'])){
  $page = $_GET['p']; 
} 
else { 
  $page = "index"; 
} 

echo $data[$page]['title']; 
```

我得到了这样的输出

```
Notice: Undefined index: 'index' in D:\xampp\htdocs\egliphp\index.php on line 66 
```

如果我将 $page 值更改为 'index' 或 'gallery1' 它工作得很好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T19:00:43.010

逻辑似乎合理，因此可能是空格和非字母数字字符问题。所以我建议这样做：

```
$raw_page = preg_replace('/[^a-zA-Z0-9]+/', '', trim($_GET['p']));
if(!empty($raw_page) && array_key_exists($raw_page, $data)){
  $page = $raw_page; 
} 
else { 
  $page = "index"; 
} 
```

我还添加了一个`array_key_exists`，以便逻辑可以处理对不存在的页面或数组索引发出的请求。

**编辑：**另外，您的数组数据不一致。东安`echo $data['index']['title'];`将导致：

```
<img src = 'logo.png' alt=''> 
```

但是这样做`echo $data['gallery1']['title'];`会导致：

```
Gallery 1 
```

所以我认为你也需要解决这个问题。

**编辑关于混合数组值的附加信息：**好的，从编程的角度来看，数组对 value 具有混合值类型的方式仍然存在问题`$data['title']`。我认为这是一个等待发生的问题。所以我建议重新修改 $data 数组结构，如下所示：

```
$data =
array(
     "index" => array(
         "name" => "title",
         "title" => array("type" => "image", "value" => "<img src = 'logo.png' alt=''>"),
         "fallback_html" => "main.php",
         "gallery" => array("1" => "nothing")),
     "gallery1" => array(
         "name" => "gallery1",
         "title" => array("type" => "text", "value" => "Gallery 1"),
         "fallback_html" => "",
         "gallery" => array("1" => "jpg1.jpg","2" => "jpg2.jpg")
     )
); 
```

具体来说，我对`$data["index"]["title"]`具有图像标签的对象执行了此操作：

```
"title" => array("type" => "image", "value" => "<img src = 'logo.png' alt=''>"), 
```

而这`$data["gallery1"]["title"]`有一个文本字符串：

```
"title" => array("type" => "text", "value" => "Gallery 1"), 
```

这将帮助您在事物的渲染方面更好地处理每种情况。所以你可以有如下代码：

```
if ($data["gallery1"]["title"]["type"] == "image") {
  echo $data["gallery1"]["title"]["value"] . "<br clear="all" />";
}
else if ($data["gallery1"]["title"]["type"] == "text") {
  echo "<h1>" . $data["gallery1"]["title"]["value"] . "</h1>";
} 
```

上面的示例表明，如果您在数据源中标记类型，则可以在渲染时对每种类型执行不同的操作。如果你觉得工作量太大，那是公平的。但是如果没有明确区分它们的方式，在值中混合数据类型绝不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:03:23.383

检查什么 var_dump 给你

```
var_dump(isset($_GET['p'])); 
```

但我建议您创建允许值数组

```
$allowed_vals = array_keys($data); 
```

然后使用 in_array() 函数

```
if(in_array($_GET['p'], $allowed_vals )){
...
else
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T19:08:59.233

$data 数组是否与“$page”处理代码在同一个文档中定义？（从你的问题中不完全清楚）。可以肯定的是，检查 $data 数组是否存在并包含请求的“索引”键，方法是使用以下命令对其进行调试：

```
// Just to check if the $data array actually exists and contains the 'index' key:
print_r($data);exit();

if(isset($_GET['p']) && array_key_exists(trim($_GET['p']), $data)){
  $page = trim($_GET['p']); 
} 
else { 
  $page = "index"; 
} 
```

[更新] 根据您的最后一行，应该存在 $data 数组，因此调试 $_GET 数组可能是检查它是否包含“p”条目和正确值的好选择；

```
print_r($_GET); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T19:11:24.693

尝试这个

```
 $page = "$_GET['p']"; 
```

# c# - 当前icecast流媒体歌曲的标题

> ID：14540380
> 
> 赞同：1
> 
> 时间：2013-01-26T18:54:07.933
> 
> 标签：c#, title, icecast

我读过一些问题，但没有一个能解决我。我制作了一个简单的客户端来通过 icecast2 服务器读取声音流。我读了声音：

```
 a = new WMPLib.WindowsMediaPlayer();
    a.URL = "http://radiolink:8000/music";
    a.controls.play(); 
```

它的作品，我听音乐。现在我想阅读当前歌曲的标题。我在这里发现我必须创建一个请求，例如：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://radiolink:8000/music");

            request.Headers.Clear();

            request.Headers.Add("GET", " HTTP/1.0");
            request.UserAgent = "WinampMPEG/5.09";

            request.Headers.Add("Icy-MetaData", "1");
            request.KeepAlive = true;

            WebResponse fifo = request.GetResponse();

            Console.WriteLine(fifo.Headers); 
```

那个代码控制台只写输出（`content-type=audio-mpg`）。可以帮助我，并让我以正确的方式正确读取数据吗？

// 解决了第一部分。现在我接受了：

> icy-br: 128,128 ice-audio-info: ice-samplerate=44100;ice-bitrate=128;ice-channels=2 icy-description: 无线电 fff icy-genre: 各种 icy-name: RADIO icy-pub: 0​​ icy -url：[http](http://url.com) ://url.com icy-mettaint：16000 缓存控制：无缓存内容类型：音频/mpeg

如何读取其他元数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:44:00.947

SHOUTcast/Icecast 流的元数据不在标头中，而是在实际流本身中。

`icy-metaint: 16000`您拥有的标题是关键。每 16,000 个字节，您将获得一个元数据块。该块中的第一个字节表示元数据长度。将其值乘以 16 以获得以字节为单位的长度。一旦你这样做了，你最终会得到这样的东西：

```
StreamTitle='Awesome Trance Mix - DI.fm';StreamUrl='' 
```

它将在最后填充空字节，直到达到块的长度。

我在这里为 PHP 回答了同样的问题，但无论使用什么语言，概念都是一样的： [Pulling Track Info From an Audio Stream Using PHP](https://stackoverflow.com/questions/4911062/pulling-track-info-from-an-audio-stream-using-php/4914538#4914538)

# javascript - 如何使用overflow-x剪切左侧内容：隐藏

> ID：14540382
> 
> 赞同：0
> 
> 时间：2013-01-26T18:54:32.097
> 
> 标签：javascript, html, css

我想使用overflow-x:hidden 从左侧剪辑内容。默认情况下，它从右侧剪切内容。我希望内容从左侧增长，一旦它到达父边界，它应该从左侧而不是右侧剪辑内容。任何想法？以下是我目前面临的问题。

```
div {
height: 120px;
background: #666;
overflow-x: hidden;
overflow-y: hidden;
white-space: nowrap;
} 
```

[http://jsfiddle.net/LxYGN/5/](http://jsfiddle.net/LxYGN/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:05:13.027

尝试将其添加到您的 CSS 中。它将导致文本从右向左流动并随后隐藏左侧的溢出：

```
direction: rtl; 
```

更多信息在这里：[https ://developer.mozilla.org/en-US/docs/CSS/direction](https://developer.mozilla.org/en-US/docs/CSS/direction)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:59:50.770

你是这个意思吗？

```
div > * {
    float: right;
} 
```

[http://jsfiddle.net/LxYGN/6/](http://jsfiddle.net/LxYGN/6/)

# c# - 低级键盘挂钩自动安装并减慢计算机速度？

> ID：14540386
> 
> 赞同：1
> 
> 时间：2013-01-26T18:54:54.447
> 
> 标签：c#, desktop-application, keyboard-hook

我在桌面应用程序中使用键盘低级挂钩来监视用户活动。我用于挂钩的代码如下。在这段代码中（据我所知），当我必须开始监控用户活动时，我称之为`SetHook()`安装钩子，我可以监控键盘上按下的键。当我想停止捕获键时，我只需调用 UnHook() 方法。

问题是当我的应用程序启动（`SetHook()`尚未调用方法）时，我的应用程序会自动安装挂钩，它会减慢系统速度。系统每 1 分钟挂起 2-3 秒。

为了诊断问题，我注释掉了下面提到的所有代码和安装的应用程序。现在系统工作得很好。

我不确定为什么会这样？

1.  为什么我的应用程序开始捕获密钥，即​​使我还没有调用`SetHook()`方法？
2.  有没有其他方法可以在不使用钩子的情况下捕获全局键？

挂钩代码：

```
public static class WinKeyCapture5   {

   private const int WH_KEYBOARD_LL = 13;
   private const int WM_KEYDOWN = 0x0100;
   private static LowLevelKeyboardProc _proc = HookCallback;
   public static DateTime LastKeyPressTime;

   public static void SetHook()
   {
       SetHook(_proc);
   }

   public static void UnHook()
   {
       UnhookWindowsHookEx(_hookID);
   }

   private static IntPtr SetHook(LowLevelKeyboardProc proc)
   {
       using (Process curProcess = Process.GetCurrentProcess())
       using (ProcessModule curModule = curProcess.MainModule)
       {
           return SetWindowsHookEx(WH_KEYBOARD_LL, proc, GetModuleHandle(curModule.ModuleName), 0);
       }
   }

   private static IntPtr _hookID = IntPtr.Zero;

   private delegate IntPtr LowLevelKeyboardProc(int nCode, IntPtr wParam, IntPtr lParam);

   private static IntPtr HookCallback(int nCode, IntPtr wParam, IntPtr lParam)
   {
       //if (nCode >= 0 && wParam == (IntPtr)WM_KEYDOWN)
       //{
           int vkCode = Marshal.ReadInt32(lParam);
           //if (vkCode == 44)
               //ScreenCapture.Load();

           LastKeyPressTime = System.DateTime.Now;

       //}

       return CallNextHookEx(_hookID, nCode, wParam, lParam);
   }
   [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
   private static extern IntPtr SetWindowsHookEx(int idHook,
       LowLevelKeyboardProc lpfn, IntPtr hMod, uint dwThreadId);
   [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
   [return: MarshalAs(UnmanagedType.Bool)]
   private static extern bool UnhookWindowsHookEx(IntPtr hhk);
   [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
   private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode,
       IntPtr wParam, IntPtr lParam);
   [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
   private static extern IntPtr GetModuleHandle(string lpModuleName); 
} 
```

# codeigniter - 使用 Codeigniter 进行浏览器检查

> ID：14540388
> 
> 赞同：0
> 
> 时间：2013-01-26T18:55:06.167
> 
> 标签：codeigniter

我想知道是否可能以及这样做的更好方法。我想使用 codeigniter 检查特定的浏览器和浏览器版本，以便在浏览器不符合查看我的应用程序所需的情况下重定向到页面，我想知道这是否可行以及实现此目的的最佳方法使用codeigniter，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:59:00.230

使用[用户代理类](http://ellislab.com/codeigniter/user-guide/libraries/user_agent.html)：

```
if ($this->agent->is_browser('Safari')) {

} 
```

如果要检查特定版本：

```
if ($this->agent->is_browser('Safari') && $this->agent->version() == 5) {

} 
```

# php - 当他们使用 WooCommerce 进行购买时，如何将客户帐单信息添加到 MailChimp 组

> ID：14540389
> 
> 赞同：7
> 
> 时间：2013-01-26T18:55:14.647
> 
> 标签：php, wordpress, mailchimp, woocommerce

我一直在寻找解决这个问题的方法，但没有运气。我认为我缺少一些非常基本的东西，因为修复听起来很简单。

我正在尝试将客户帐单详细信息添加到 MailChimp 组。

它适用于销售在线课程的网站。

我想要发生的是：用户在现场购买并根据他们的购买自动注册适当的 MailChimp 组（即用户购买每月视频课程，被添加到“每月视频课程”MailChimp 组。）

我已经编写了一些代码，但它不起作用（我收到“未定义变量”错误）。我不确定变量/语法是否正确。我绝不是编码员。

有人可以帮助我吗？

这是我的代码（我把它放在functions.php中）：

```
function pass_wp_to_mc() {
require_once 'inc/MCAPI.class.php';
require_once 'inc/config.inc.php'; //contains apikey
require_once 'wp-content/plugins/woocommerce/classes/class-wc-checkout.php';

$api = new MCAPI($apikey);

// Grabs the WooCommerce Product IDs and associates them with the Mailchimp Group IDs - users are put into Groups based on product purchase.

if ($product_id == 42) {
$mailchimpGroupingId = 1;
$mailchimpGroup = 'Monthly';

} elseif ($product_id == 142) {
$mailchimpGroupingId = 1;
$mailchimpGroup = 'Weekly';

} else ($product_id == 144); 
$mailchimpGroupingId = 1;
$mailchimpGroup = 'Audio';

}

$merge_vars = array(
'FNAME' => $billing_first_name,
'LNAME'=> $billing_last_name,
'EMAIL'=> $billing_email,
'GROUPINGS'=>array(
array('id'=>$mailchimpGroupingId, 'groups'=>$mailchimpGroup),
)
);
$listId = 33833; //List ID found inside MailChimp on the page for your List
$my_email = '$email'; 
$double_optin = false; // People are automatically added in to List
$update_existing = true; // Will update users if they are already on the list

$retval = $api->listSubscribe( $listId, $my_email, $merge_vars, $double_optin, $update_existing);

if ($api->errorCode){
echo "Unable to load listSubscribe()!\n";
echo "\tCode=".$api->errorCode."\n";
echo "\tMsg=".$api->errorMessage."\n";
} else {
echo "Subscribed - look for the confirmation email!\n";
} 
```

我的问题是：这段代码正确吗？如果是这样，functions.php 是放置它的地方吗？如果是这样，我如何“调用”它，我将把调用放在哪里 - WordPress 文件？电子商务？谢谢你.php？结帐.php？购物车.php？

非常感谢任何帮助 - 我已经尝试解决这个问题好几个星期了！

**更新**：我想通了！首先，代码不正确。这是有效的：

```
require_once dirname(__FILE__).'/inc/MCAPI.class.php';
require_once dirname(__FILE__).'/inc/config.inc.php';

add_action('woocommerce_checkout_order_processed', 'get_info');

function get_info($order_id) { 
global $woocommerce;

$order = new WC_Order( $order_id );
$firstname = $order->billing_first_name;
$lastname = $order->billing_last_name;
$email = $order->billing_email;
$product_id=unserialize($order->order_custom_fields["_order_items"][0]);
$product_id=$product_id[0]['id'];

    global $apikey;
$api = new MCAPI($apikey);

if ($product_id == *GET THIS ID AT THE EDITING SCREEN OF YOUR PARTICULAR WOOCOMMERCE PRODUCT*) {
$mailchimpGroup = '*ENTER THE NAME OF YOUR MAILCHIMP GROUP (NOT THE TITLE)*';

} elseif ($product_id == *GET THIS ID AT THE EDITING SCREEN OF YOUR PARTICULAR WOOCOMMERCE PRODUCT*) {
$mailchimpGroup = '*ENTER THE NAME OF YOUR MAILCHIMP GROUP (NOT THE TITLE)*';

} else ($product_id == *GET THIS ID AT THE EDITING SCREEN OF YOUR PARTICULAR WOOCOMMERCE PRODUCT*); 
$mailchimpGroup = '*ENTER THE *NAME* OF YOUR MAILCHIMP GROUP (NOT THE TITLE)*';

$merge_vars = array(
                    'FNAME' => $firstname,
                    'LNAME'=> $lastname,
                    //'EMAIL'=> $email,
                    'GROUPINGS'=>array(
                        array('name'=>'*ENTER THE TITLE OF YOUR MAICHIMP GROUP (NOT THE NAME)', 'groups'=>$mailchimpGroup),
                        )
                    );
$listId = 'YOUR LIST ID HERE'; //List ID found inside MailChimp on the page for your List
$my_email = $email; 
$double_optin = false; // People are automatically added in to List
$update_existing = true;    // Will update users if they are already on the list               

$retval = $api->listSubscribe( $listId, $my_email, $merge_vars, $double_optin, $update_existing); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-08T14:31:06.030

现在有一个插件 - 看看[WooChimp - MailChimp WooCommerce Integration](http://codecanyon.net/item/woochimp-woocommerce-mailchimp-integration/6044286?ref=RightPress)。这里有些人不太了解 PHP，所以我认为这可能会有所帮助。

完全披露：我是插件的作者。

# html - iPhone HTML 使用 XPath 解析子元素

> ID：14540390
> 
> 赞同：1
> 
> 时间：2013-01-26T18:55:17.510
> 
> 标签：html, objective-c, xpath

我正在尝试从元素中获取“标题”字段和“背景颜色”样式。- 我对objective-c很陌生，这很容易......

我的 HTML（示例重复不同`<TD class='class name'>`：

```
 </table>
</TD><TD class="targetmonth calday">
<table style="height: 60px;" WIDTH="100%" CELLSPACING="0" CELLPADDING="0" BORDER="0">
<tr>
<td align="right" valign="middle">
<table style="background-color: #008000; border-style: none;" border="0" cellpadding="2"     cellspacing="2">
<tr>
<td><img height="5" width="5" border="0" src="https://static.xxx.net/xxx/images/2.60.D1/spacer.gif" title="07:00,24hrs: B Shift /.../E704/RS704/Firefighter #2" alt="07:00,24hrs: B Shift /.../E704/RS704/Firefighter #2"></td>
</tr>
</table>
<img height="2" width="2" border="0" src="https://static.xxxx.net/xxx/images/2.60.D1/spacer.gif" alt=""><img alt="" height="1" width="1" border="0" src="https://static.xxx.net/xxx/images/2.60.D1/spacer.gif"></td><TD ALIGN="RIGHT" VALIGN="TOP" width="17%"><a href="javascript:void(0)" title="01/09/2013" class="daylink" onClick="return DayClick('01/09/2013');">09</a></TD><td rowspan="2" width="5"><img alt="" height="1" width="1" border="0" src="https://static.xxx.net/xxx/images/2.60.D1/spacer.gif"></td>
</tr>
<tr>
<TD COLSPAN="2">
<TABLE>
<TR>
<TD style="background-color: #FFFFFF; " class="calexception"><a href="javascript:void(0)" onClick="return ShowRemoveExceptionWindow(&quot;4A3254517F256810DE1689CEE3FF0E80.fre01&quot;,&quot;3283507&quot;);" title="24hrs Mu,  07:00 - 07:00 /.../M704/Firefighter (pp)" style="color: #000000; text-decoration: none; font-weight: bold;">Mu</a></TD>
</TR>
</TABLE>
</TD>
</tr> 
```

我的目标-c：

```
NSString *tutorialsXpathQueryString = @"//a";

NSArray *tutorialsNodes = [tutorialsParser searchWithXPathQuery:tutorialsXpathQueryString];
NSLog(@"here is url: %@", tutorialsNodes);

NSMutableArray *newTutorials = [[NSMutableArray alloc] initWithCapacity:0];
for (TFHppleElement *element in tutorialsNodes) {

    Tutorial *tutorial = [[Tutorial alloc] init];
    [newTutorials addObject:tutorial];

    tutorial.title = [[element firstChild] content];

    tutorial.url = [element objectForKey:@"style"];

    tutorial.title = [element objectForKey:@"title"]; 
```

# c# - 如何以编程方式打开/关闭机箱风扇？

> ID：14540391
> 
> 赞同：2
> 
> 时间：2013-01-26T18:55:20.927
> 
> 标签：c#

我需要能够关闭/打开机箱风扇以将 CPU 温度设置在所需范围内。可以专门做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:59:01.083

[有一个名为lm-sensors](http://www.lm-sensors.org/wiki/man/fancontrol)的开源项目。

> fancontrol 是一个用于 lm_sensors 的 shell 脚本。它从文件中读取其配置，然后根据温度计算风扇速度，并将相应的 PWM 输出设置为计算值。

也退房；

*   [在 C# 中设置风扇速度](https://stackoverflow.com/questions/10655263/set-fan-speed-in-c-sharp)

您还应该了解 Windows 系统管理界面。

*   [CIM_Fan 类的 SetSpeed 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393599%28v=vs.85%29.aspx)
*   [调用提供者方法](http://msdn.microsoft.com/en-us/library/aa390421%28VS.85%29.aspx)

# android - 收听传入的 Whatsapp 消息/通知

> ID：14540394
> 
> 赞同：36
> 
> 时间：2013-01-26T18:55:49.927
> 
> 标签：android, android-intent, android-notifications, android-notification-bar, android-broadcast

我正在开发一个基于通知的应用程序，为此我需要收听传入的通知。我已经能够收听来电、短信、邮件等。我不知道如何通过代码在 Whatsapp 上收听朋友的 ping 或消息。这真的可以做到吗？如果是这样，怎么做？可以使用[辅助功能服务](http://developer.android.com/training/accessibility/service.html#create)，使用包名称作为“com.whatsapp”吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-16T06:53:22.137

我能够使用[Accessibility Service](http://developer.android.com/training/accessibility/service.html#create)做到这一点。使用它，您可以收听通知栏上的所有通知。我通过将包名称添加到 Accessibility Service 来听取应用程序规范`service info`，在本例中为`com.whatsapp`. 我无法阅读这些消息，但只要有消息到达，我就会收到通知。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-11-15T23:22:22.253

# 2020 年 8 月 11 日更新

我必须使用[`NotificationListenerService`](https://developer.android.com/reference/android/service/notification/NotificationListenerService)来获取有关通知的详细信息。

这是Java中的服务代码：

```
public class NotificationListener extends NotificationListenerService {

    private static final String TAG = "NotificationListener";
    private static final String WA_PACKAGE = "com.whatsapp";

    @Override
    public void onListenerConnected() {
        Log.i(TAG, "Notification Listener connected");
    }

    @Override
    public void onNotificationPosted(StatusBarNotification sbn) {
        if (!sbn.getPackageName().equals(WA_PACKAGE)) return;

        Notification notification = sbn.getNotification();
        Bundle bundle = notification.extras;

        String from = bundle.getString(NotificationCompat.EXTRA_TITLE);
        String message = bundle.getString(NotificationCompat.EXTRA_TEXT);

        Log.i(TAG, "From: " + from);
        Log.i(TAG, "Message: " + message);
    }
} 
```

以及需要放在AndroidManifest.xml中的代码：

```
<service
    android:name=".NotificationListener"
    android:label="@string/notification_listener_service"
    android:permission="android.permission.BIND_NOTIFICATION_LISTENER_SERVICE">
    <intent-filter>
        <action android:name="android.service.notification.NotificationListenerService" />
    </intent-filter>
</service> 
```

要拦截通知，需要特殊权限。这是您可以用来打开设置页面的代码，用户必须允许应用程序收听传入的通知。我将此片段放在 MainActivity`onCreate`函数中。

```
startActivity(new Intent(ACTION_NOTIFICATION_LISTENER_SETTINGS)) 
```

如果您需要使用以下代码检查是否授予通知侦听器权限：

```
private boolean isNotificationServiceEnabled(){
    String pkgName = getPackageName();
    final String flat = Settings.Secure.getString(getContentResolver(),
            ENABLED_NOTIFICATION_LISTENERS);
    if (!TextUtils.isEmpty(flat)) {
        final String[] names = flat.split(":");
        for (String name: names) {
            final ComponentName cn = ComponentName.unflattenFromString(name);
            if (cn != null) {
                if (TextUtils.equals(pkgName, cn.getPackageName())) {
                    return true;
                }
            }
        }
    }
    return false;
} 
```

PS：我不知道或无法解释它为什么/如何工作，因为我从我 1 岁的项目中复制了代码。

# 旧答案

我在这篇 2 篇文章的帮助下收听了传入的 WhatsApp 消息通知，您可以从[这里](https://medium.com/@vanshikaa937/a-complete-guide-to-accessibility-service-part-1-c00387230019)阅读。

1.  配置 AndroidManifest.xml

```
<!-- AndroidManifest.xml -->
<service
    android:name=".MyAccessibilityService"
    android:enabled="true"
    android:exported="true"
    android:label="My application"
    android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE">
    <intent-filter>
        <action android:name="android.accessibilityservice.AccessibilityService" />
    </intent-filter>

    <meta-data
        android:name="android.accessibilityservice"
        android:resource="@xml/serviceconfig" />
</service> 
```

2.  `serviceconfig.xml`在*/xml/*目录中创建一个名为的新文件。

```
<!-- serviceconfig.xml -->
<accessibility-service
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:accessibilityEventTypes="typeAllMask"
    android:accessibilityFeedbackType="feedbackAllMask"
    android:accessibilityFlags="flagDefault"
    android:canRequestEnhancedWebAccessibility="true"
    android:notificationTimeout="100"
    android:packageNames="@null"
    android:canRetrieveWindowContent="true"
    android:canRequestTouchExplorationMode="true"  /> 
```

3.  创建一个`MyAccessibilityService`扩展的新类`AccessibilityService`。

```
@Override
protected void onServiceConnected() {
        System.out.println("onServiceConnected");
        AccessibilityServiceInfo info = new AccessibilityServiceInfo();
        info.eventTypes = AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED;
        info.feedbackType = AccessibilityServiceInfo.FEEDBACK_ALL_MASK;
        info.notificationTimeout = 100;
        info.packageNames = null;
        setServiceInfo(info);
}

@Override
public void onAccessibilityEvent(AccessibilityEvent event) {
    if (event.getEventType() == AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED) {
        if (event.getPackageName().toString().equals("com.whatsapp")){
            StringBuilder message = new StringBuilder();
            if (!event.getText().isEmpty()) {
                for (CharSequence subText : event.getText()) {
                    message.append(subText);
                }

                // Message from +12345678

            }
        }
    }
} 
```

4.  准备好了。现在您可以根据自己的需要定制服务。

> 注意：由于无障碍服务能够探索屏幕内容并与之交互，因此用户必须在“设置”>“无障碍”中明确启用服务。*[更多细节](https://stackoverflow.com/a/12336085/7616528)*

# 编辑

要发送对收到通知的回复，[请查看此](https://stackoverflow.com/a/57306364/7616528)答案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-26T19:01:28.303

除非该应用程序的开发者故意共享服务、内容提供者，或故意发送事件的公共广播，或公开自定义广播注册系统，否则 android 中没有合法的方式来监听第三方应用程序的内部工作。在 Android 中设计应用程序隔离有一个非常重要的原因：**安全性**。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-19T09:18:20.443

辅助功能事件仅捕获传入的通知事件，而不是在它们更新时。目前，WhatsApp 通知不显示消息，只显示发件人。然后，WhatsApp 应用程序会通过更新添加该消息，该更新无法被无障碍服务捕获。

您只会收到“来自 XXX 的 1 条新消息”之类的内容，但这可能足以满足您的需求。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-22T06:35:17.620

请参阅以下示例以捕获 whatsapp 通知：

```
public class Notifier extends AccessibilityService {

@Override
public void onCreate(){
    //Toast.makeText(this,"Oncreate", Toast.LENGTH_LONG).show();

}

@Override
protected void onServiceConnected() {
    // Set the type of events that this service wants to listen to.  Others
    // won't be passed to this service.
    Toast.makeText(this,"Service connected", Toast.LENGTH_LONG).show();
    AccessibilityServiceInfo info = new AccessibilityServiceInfo();
    info.feedbackType = AccessibilityServiceInfo.FEEDBACK_ALL_MASK;;
    info.eventTypes = AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED ;

    // If you only want this service to work with specific applications, set their
    // package names here.  Otherwise, when the service is activated, it will listen
    // to events from all applications.
    info.packageNames = new String[] {"com.whatsapp"};
    info.notificationTimeout = 100;

    setServiceInfo(info);

}

@Override
public void onAccessibilityEvent(AccessibilityEvent event) {

    if(event.getEventType() == AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED) {

            Toast.makeText(this,"Notification Catched", Toast.LENGTH_LONG).show();
        }

    }
} 
```

并且不要忘记从设置>辅助功能设置权限以访问系统事件。允许来自设置的权限。

检查这个链接

[无障碍服务未启动](https://stackoverflow.com/questions/11087758/accessibility-service-is-not-started)

# javascript - 为什么 JavaScript 使用以 10 为底的浮点数（根据 w3schools）？

> ID：14540398
> 
> 赞同：5
> 
> 时间：2013-01-26T18:56:10.100
> 
> 标签：javascript

[我在 W3Schools 上](http://www.w3schools.com/js/js_obj_number.asp)读到这个：

> JavaScript 中的所有数字都存储为 64 位（8 字节）以 10 为底的浮点数。

这听起来很奇怪。现在，要么是错误的，要么应该有充分的理由不使用像 IEEE 标准那样的 base 2。

我试图找到一个真正的 JavaScript 定义，但我找不到。在 V8 或 WebKit 文档中，我可以在 Wikipedia 上找到我最熟悉的两个 JavaScript 实现，我可以找到它们如何存储 JavaScript Number 类型。

那么，JavaScript 使用 base 10 吗？如果是这样，为什么？我能想出的唯一原因是，当您希望能够准确地存储整数和浮点数时，使用 base 10 可能会有优势，但我不知道使用 base 10 会有什么优势我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T19:00:49.940

这不是[万维网联盟 (W3C)](http://www.w3.org/)，而是 w3schools，一个对任何网络标准都没有任何权威的网站。

Javascript 中的数字是双精度浮点数，遵循 IEEE 标准。

该网站得到了关于每个数字都是 64 位浮点数的部分。以 10 为底与数字表示无关，这可能是因为浮点数总是使用以 10 为底的解析和格式化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T19:07:47.583

根据 ECMA-262 标准 (ECMAScript 5.1)[第 4.3.19 节](http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.19)，JavaScript 中的数字是：

> 对应于双精度 64 位二进制格式**IEEE 754**值的原始值。

因此，任何使用以 10 为基数的浮点数的实现都不符合 ECMA-262。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-26T18:59:51.297

与大多数现代语言一样，JavaScript 使用[IEEE754](http://en.wikipedia.org/wiki/IEEE_754-1985)。它根本不存储在以 10 为基数的情况下。

JavaScript 的特殊性在于只有一种数字类型，即双精度浮点数。如果您想处理整数，则与其他语言相反，它的副作用是有些限制：您不能存储任何双精度整数，只能存储适合分数大小（52位）的整数。

# jsp - 自动完成 texinput：Struts 2.1.8.1、jsp、ActionClass

> ID：14540404
> 
> 赞同：2
> 
> 时间：2013-01-26T18:56:31.030
> 
> 标签：jsp, autocomplete, struts2

我正在尝试创建一个自动完成的文本输入。

我听说现在最好使用它，`<sj:autocompleter>`而不是`<sx:autocompleter>`因为 dojo 已被弃用但我被卡住了。

我想知道如何在我的 Action 类中调用方法并将其显示在 JSP 上。

我已经看到其他人建议`struts.xml`从`json-default`.

我试过了，然后我的课程就不起作用了（因为它是在不同的包中定义的）。

我已经将文件削减到裸露，所以这就是我所拥有的，请帮助：

pom依赖：

```
<dependencies>
<!--  Struts 2 -->
<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-core</artifactId>
    <version>2.1.8.1</version>
</dependency>

<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-sitemesh-plugin</artifactId>
    <version>2.1.8.1</version>
</dependency>

<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-spring-plugin</artifactId>
    <version>2.1.8.1</version>
</dependency>

<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jsp-api</artifactId>
    <version>2.0</version>
    <scope>provided</scope>
</dependency>

<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.0.5</version>
</dependency>

<dependency>
    <groupId>org.apache.ibatis</groupId>
    <artifactId>ibatis-sqlmap</artifactId>
    <version>2.3.0</version>
</dependency>

</dependencies> 
```

完整的 application-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC 
    "-//SPRING//DTD BEAN//EN" 
    "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
    <bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:jdbc.properties"/>
    </bean>

    <bean id="baseCarsAction" class="com.microed.cars.web.BaseCarsAction" singleton="false" >
            <property name="carsService" ref="carsService"/>
    </bean>

<bean id="homeAction" class="com.microed.cars.web.HomeAction" singleton="false" parent="baseCarsAction" >
    </bean>

    <bean id="carsService" class="com.microed.cars.business.CarsService" singleton="false" >
        <property name="carsDAO" ref="carsDAO"/>
    </bean>

    <bean id="carsDAO" class="com.microed.cars.dataaccess.CarsDAO" singleton="false" />
</beans> 
```

完成 home.jsp（请注意我的评论“我如何在此处获得结果”）

```
 <!DOCTYPE html PUBLIC 
        "-//W3C//DTD XHTML 1.1 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <%@taglib prefix="s" uri="/struts-tags" %>

    <s:form action="index" >
      <s:url id="loginURL" action="login" />
        <div class="row">
            <div class="span4">
            </div>
        </div>

      <div class="transBlock">
        <div class="row">
            <div class="span7 offset1">
                <s:textfield name="searchTags" cssClass="span7" placeholder="%{getText('placeholder.search.home')}" />      
            </div>

            <div class="span2 offset1" title="<s:text name='tooltip.search.keywords'/>" >
                <s:submit key="button.search" method="searchTags" cssClass="btn btn-success span2" id="btnSearch" />        
            </div>

            <!--  after calling getData in action class - how do I display it here? -->
        </div>

      </div>
    </s:form> 
```

完成 HomeAction：

```
package com.microed.cars.web;

import java.sql.SQLException;

public class HomeAction extends BaseCarsAction {
    /** How do I call this when user inputs into a text field? **/
    public void getData() throws SQLException {
    }

    @Override
    public String execute() throws Exception {
        return INPUT;
    }

} 
```

注入服务的基本动作类：

```
package com.microed.cars.web;

import org.springframework.beans.factory.annotation.Required;

import com.microed.cars.business.CarsService;
import com.opensymphony.xwork2.ActionSupport;

public class BaseCarsAction extends ActionSupport {

    protected CarsService carsService;
    protected String searchTags;

    @Required
    public void setCarsService(CarsService carsService) {
        this.carsService = carsService;
    }

} 
```

# php - 主题集成到插件 wordpress

> ID：14540407
> 
> 赞同：1
> 
> 时间：2013-01-26T18:57:07.400
> 
> 标签：php, wordpress, plugins, themes

我正在编写一个 wordpress 插件，我想对网站的外观进行一些更改。如何使用我的插件更改一些 html 和 css？

我的意思是：我用我的插件做了一些事情，我得到了一些结果。我想添加一些 css 并让它变得漂亮。我想改变的是主屏幕。我该怎么做？

例如，一个主题的 div 类名是 foo，另一个是 hoo。

现在，当我想在那个 div 前面添加一些东西时，没有相似之处。所以我决定编写一个集成到我的插件中的小主题。

换句话说，我想通过我的插件自动更改主题。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:38:29.910

您可以使用在您网站的标题中添加新的“CSS”和“Javascript”

```
<?php
add_action('wp_head', 'your_function');
?> 
```

在那个 CSS 文件中，你可以创建任何你想要的 CSS 类。是的，这可以使用插件来完成（但不推荐）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T21:40:23.337

您将需要阅读一些有关以下内容的信息：

*   [https://codex.wordpress.org/Writing_a_Plugin](https://codex.wordpress.org/Writing_a_Plugin)
*   [http://www.onextrapixel.com/2009/07/01/how-to-design-and-style-your-wordpress-plugin-admin-panel/](http://www.onextrapixel.com/2009/07/01/how-to-design-and-style-your-wordpress-plugin-admin-panel/)
*   [http://wp.tutsplus.com/articles/how-to-include-javascript-and-css-in-your-wordpress-themes-and-plugins/](http://wp.tutsplus.com/articles/how-to-include-javascript-and-css-in-your-wordpress-themes-and-plugins/)

祝你好运，最终请让我们知道:)

# ruby-on-rails - 如何在 Rails 3.2.3 中将 span 元素添加到 i18n 本地化标签？

> ID：14540415
> 
> 赞同：0
> 
> 时间：2013-01-26T18:58:26.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我想在 Rails 3.2.3 中向我的**i18n**本地化标签添加一个`span`元素。

 **这就是我所拥有的：

```
<%= f.label :address, "<span class=\"optional\">optional</span>".html_safe %> 
```

但是，在输出中它产生：

```
<label for="person_address">
  <span class="optional">optional</span>
</label> 
```

我需要的是这个：

```
<label for="person_address">
  Address <span class="optional">optional</span>
</label> 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:02:08.980

使用块形式并“手动”翻译属性名称：

```
<%= f.label :address do %>
  <%= f.object.class.human_attribute_name :address %>
  <span class="optional">optional</span>
<% end %> 
```

笔记

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T20:01:58.970

'label' 助手中的第二个参数将是标签的文本。如果你这样做：

```
<%= f.label :address, "Address <span class=\"optional\">optional</span>".html_safe %> 
```

我想它会正确显示。

您还可以将 html 添加到 yml 文件并在 yml 项目上明确使用 .html_safe 它也可以工作。

```
<%= f.label :address, t('path.to.label').html_safe %> 
```

我也很想尝试使用 javascript 和 css - 对字段进行分类并通过 jquery 或使用 css :after 添加一些内容到标签。**

# javascript - Chrome/WebKit XHR 文件上传

> ID：14540418
> 
> 赞同：1
> 
> 时间：2013-01-26T18:58:48.827
> 
> 标签：javascript, xmlhttprequest

我一直在无情地搜索，但就是无法弄清楚这一点。为什么这个 XHR 连接**在 Firefox**中可以正常工作，但在 Chrome 中会中断？顺便说一句，我将它与 AngularJS 结合使用。

```
$scope.upload = function(project, file) {
                var formData = new FormData();  //Not really sure why we have to use FormData().  Oh yeah, browsers suck.
                formData.append('', file.file); //The real file object is stored in this file container

                file.xhr = new XMLHttpRequest();
                file.xhr.open('PUT', '/api/projects/'+project._id+'/files', true);

                //Progress event listener
                file.xhr.upload.onprogress = function(event) {
                    if(event.lengthComputable) {
                        file.uploadPercent = Math.round(event.loaded / event.total * 100);
                    }
                };

                //Upload complete listener
                file.xhr.upload.onload = function(event) {
                    file.uploaded = true;
                };

                //Every time the status changes
                file.xhr.onreadystatechange = function(event) {
                    if(event.target.readyState == 4) {
                        //The file has been added, so tag the ID onto the file object
                        console.log(event.target.responseText);
                        file._id = JSON.parse(event.target.responseText)._id;
                    } else {
                        return;
                    }
                };

                file.xhr.send(formData);
            }; 
```

在 Firefox 中，文件被很好地发送到我的服务器，并且`responseText`完全按照我的预期返回。但是，在 Chrome 中，我收到此错误： `Error: INVALID_STATE_ERR: DOM Exception 11 Error: An attempt was made to use an object that is not, or is no longer, usable.`如果它准确地告诉我尝试使用哪个对象，这将更有帮助。我在[这里](https://stackoverflow.com/a/5319647/371273)读到我应该尝试设置`async`为 false 和 use `onreadystatechange`，但我不确定这有什么帮助，因为我已经在使用`onreadystatechange`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T11:37:09.180

2009 年的错误：提交表单时 XMLHttpRequest 不起作用 - [https://bugs.webkit.org/show_bug.cgi?id=23933](https://bugs.webkit.org/show_bug.cgi?id=23933)

# jquery - Phonegap/Android pagechange 处理程序触发两次

> ID：14540432
> 
> 赞同：0
> 
> 时间：2013-01-26T19:00:18.710
> 
> 标签：jquery, ajax, cordova, jquery-mobile

我有一个问题，pagechange 处理程序在我的应用程序中为某些页面转换触发了两次。在 deviceready 处理程序中：

```
$(document).bind("pagechange", onPageChange); 
```

然后是hander：

```
var onPageChange = function (event, data) {
    var fromPageId = null;

    //Get the ID of the page we are transitioning to.
    var toPageId = data.toPage.attr("id");

    //Get the ID of the page we are coming from.
    if (data.options.fromPage) {
        fromPageId = data.options.fromPage.attr("id");
    }

    console.log("pagechange to " + toPageId + " from " + fromPageId);

    switch (toPageId){
        ...
    }
} 
```

当应用程序从一页转换到下一页时，我可以在 LogCat 中看到 onPageChange 触发了两次：

```
01-26 18:49:50.490: I/Web Console(18244): pagechange to care-plan-view from care-plan-view:25
01-26 18:49:50.490: I/Web Console(18244): pagechange to care-plan-view from care-plans:25 
```

这是它们在日志中出现的顺序，奇怪的是护理计划视图是目标页面，护理计划是起始页面！

这是一个将导致页面转换问题的示例链接：

```
<a data-role="button" data-icon="arrow-r" data-iconpos="right" href="#care-plan-view?id=9e273f31-2672-47fd-9baa-6c35f093a800&amp;name=Sat"><h3>Sat</h3></a> 
```

任何想法为什么会发生这种情况？

干杯，唐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:45:05.907

事件发生两次的原因**`pagechange`**是由于在**`changePage`**toPage 不是 jQuery 增强 DOM 对象时的递归调用。

这种递归是危险的，因为允许开发人员在事件中更改 toPage。如果开发人员始终将 toPage 设置为字符串，则在**`pagechange`**事件处理程序中，无论它是否是对象，都会导致无限递归循环。

该**`pageload`**事件将新页面作为数据对象的页面属性传递（这应该添加到文档中，当前未列出）。因此，该**`pageload`**事件可用于访问加载的页面。

简而言之，这是因为您正在通过**`pageChange`**.

要解决此问题，请选择另一个页面事件，例如：

```
event pagebeforecreate
event pagecreate
event pageinit
event pagebeforehide
event pagebeforeshow
event pageremove
event pagehide
event pageshow 
```

关于这个问题的更多信息可以在我的博客**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**中找到，只需搜索章节：**防止多事件触发**。或者你可以在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。

# jquery - jQuery将元素添加/链接到一个变量

> ID：14540443
> 
> 赞同：3
> 
> 时间：2013-01-26T19:01:45.633
> 
> 标签：jquery, jquery-chaining, jquery-append

我怎样才能把它变成更快的东西：

```
$.each(data, function(key, val) 
{ 
    rcItemsLi.eq(index++).append('<div class="rc-item-content clear hidden"><p class="rc-item-context">' + val[0] + '</p>' + val[1] + '</div>'); 
}); 
rcItemsContent = $('.rc-item-content'); 
```

在此示例中，我首先将元素附加到我想要的位置，然后使用 .rc-item-content 选择器“查找”所有元素并将它们存储在 rcItemsContent 变量中。

例如：

```
$.each(data, function(key, val) 
{ 
    rcItemsContent.add($('<div class="rc-item-content clear hidden"><p class="rc-item-context">' + val[0] + '</p>' + val[1] + '</div>').appendTo(rcItemsLi.eq(index++))); 
}); 
```

在这个例子中，我想要实现的（当然我没有）是在变量中添加/链接元素，并同时将其附加到我想要的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:23:15.833

`.add`创建一个新集合。

```
rcItemsContent = rcItemsContent.add(... 
```

# android - 布局宽度等于高度

> ID：14540444
> 
> 赞同：10
> 
> 时间：2013-01-26T19:01:51.697
> 
> 标签：android, android-layout, button

有没有一种方法可以让高度取决于我的 xml 中的宽度？

我有一些线性布局的按钮。按钮的宽度取决于设备，因为它们水平填充屏幕。我想要方形按钮，这是我的问题。有没有人可以帮助我？

```
<Button
            android:id="@+id/b_0xa"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_0xa" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-04-03T04:31:15.823

要使`height`of view 等于`width`of view，可以使用`ConstraintLayout`

```
 app:layout_constraintDimensionRatio="1:1" 
```

`1`之前`:` 是宽度

`1`之后`:`是身高

请尝试以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">
    <Button
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        app:layout_constraintDimensionRatio="1:1"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        android:text="Button"/>

</androidx.constraintlayout.widget.ConstraintLayout> 
```

上面代码的输出是：

[![在此处输入图像描述](../Images/d5a4731160414adee2b42db08508ba32.png)](https://i.stack.imgur.com/NCC0T.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:11:52.010

您可以在 Java 代码中以编程方式轻松完成。

[使用]动态获取按钮的宽度**`int x = mButton.getWidth()`**，然后使用返回的值设置高度[ **`mButton.setHeight(x)`**]。

**PS：**建议使用 LayoutParams 设置任何 View 的高度和宽度。因此，您应该使用 setLayoutParams()，而不是使用 setHeight()。

**`mButton.setLayoutParams(new LinearLayout.LayoutParams(x, x));`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T15:56:33.623

您应该通过为它们分配固定值来更改赋予`android:layout_width`and的值`android:layout_height`

```
<Button
            android:id="@+id/b_0xa"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_weight="1"
            android:clickable="false"
            android:text="@string/b_0xa" /> 
```

为它们分配固定值可确保无论屏幕大小如何，您的按钮都保持不变，因为使用的单位是 dp。确保您分配的值相同，因为您需要一个正方形。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-01T06:54:10.603

您可以使用约束布局来实现这一点。我正在使用宽高比属性和按钮宽度的绝对值。当我的 Button 根据它的宽度达到约束时，它会相应地设置我的高度。

```
 <?xml version="1.0" encoding="utf-8"?>
  <androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <Button
        android:id="@+id/b_0xa"
        android:clickable="false"
        android:text="@string/app_name"
        android:layout_width="300dp"
        android:layout_height="0dp"
        android:src="@android:drawable/dark_header"
        app:layout_constraintDimensionRatio="h,16:9"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-06T16:22:55.483

在这种情况下，我建议您使用 layout_weight 作为您的高度属性，然后它将按比例分配给将在不同屏幕尺寸上缩放的按钮的权重：

```
<Button
        android:id="@+id/b_0xa"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight=".4"
        android:clickable="false"
        android:text="@string/b_0xa" /> 
```

为了使这种方法起作用，您必须对布局中其他视图的高度应用权重。总重量必须等于 1，因此您必须使用布局和重量来实现最佳设计。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-11T23:44:41.447

正如我[在此处](https://stackoverflow.com/a/41942442/3495069)解释的，如果您想 100% 使用 XML 进行操作，您可以使用 PercentRelativeLayout 并执行以下操作：

```
<android.support.percent.PercentRelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <Button
        app:layout_aspectRatio="100%"
        app:layout_widthPercent="100%" />
</android.support.percent.PercentRelativeLayout> 
```

确保将库包含在您的应用程序 gradle 文件中：

```
compile 'com.android.support:percent:XX.X.X' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-28T04:01:43.987

```
<Button
  android:id="@+id/random"
  android:layout_width="60dp"
  android:layout_height="60dp"
  android:layout_weight="1"
  android:text="text view" 
/> 
```

确保您提供此代码或手动更改高度和宽度

# zend-framework - Zend_Acl，如何检查具有多个角色的用户的资源访问权限

> ID：14540445
> 
> 赞同：6
> 
> 时间：2013-01-26T19:01:55.000
> 
> 标签：zend-framework, zend-acl

我正在为我的应用程序实现 RBAC，一切都从数据库进行管理。

例如，我将所有资源/权限存储在一个名为 的表中`permission`，将所有角色存储在`role`表中，以及另一个名为`role_permission`定义哪个角色可以访问哪些资源/权限的表中。

采用这种方法的目的是因为我希望应用程序的管理员自己创建`role`角色并将权限分配给角色。

应用程序的用户可以具有多个角色，例如`administrator`, `supervisor`,`player`等`referee`。

我创建了一个模型类`Zend_Acl`来添加角色和资源并为其分配权限。

下面是我所做的。

```
foreach($this->_roles as $role) {
    $this->addRole(new Zend_Acl_Role($role['id']));
}
foreach($this->_permissions as $permmission) {
    $this->addResource(new Zend_Acl_Resource($permmission['id']));
}
foreach($this->_rolePermissions as $value) {
    $this->allow($value['role_id'], $value['permmission_id']);
}
$this->allow($this->_roleAdmin); 
```

如果我想检查特定角色是否存在权限，例如使用此代码，它工作正常。

```
echo $acl->isAllowed($role, $permission) ? 'allowed' : 'denied'; 
```

但是我想检查多个角色是否存在具有多个角色的用户的当前权限。

我应该如何检查具有多个角色的用户是否`referee`有权`supervisor` 访问资源`create report`。使用 isAllowed() 您只能检查 1 个角色的权限。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T19:09:06.060

我通常采用的方法是创建一个扩展类`Zend_Acl`，并扩展`isAllowed()`函数，以便它可以将我的用户对象作为参数。然后它循环遍历该用户的角色，为每个角色执行检查。例如：

```
public function isAllowed($roleOrUser = null, $resource = null, $privilege = null)
{
    if ($roleOrUser instanceof Users_Model_User) {
        // check each of that user's roles
        foreach ($roleOrUser->roles as $role) {
            if (parent::isAllowed($role, $resource, $privilege)) {
                return true;
            }
        }

        return false;
    } else {
        return parent::isAllowed($roleOrUser, $resource, $privilege);
    }
} 
```

# django - django RequestFactory 文件上传

> ID：14540446
> 
> 赞同：12
> 
> 时间：2013-01-26T19:01:58.610
> 
> 标签：django, testing

我尝试创建一个请求，使用 RequestFactory 并发布文件，但我没有得到 request.FILES。

```
 from django.test.client import RequestFactory
    from django.core.files import temp as tempfile

    tdir = tempfile.gettempdir()
    file = tempfile.NamedTemporaryFile(suffix=".file", dir=tdir)
    file.write(b'a' * (2 ** 24))
    file.seek(0)
    post_data = {'file': file}

    request = self.factory.post('/', post_data)
    print request.FILES  # get an empty request.FILES : <MultiValueDict: {}> 
```

如何使用我的文件获取 request.FILES ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-15T20:02:56.807

如果您先打开文件，然后将 request.FILES 分配给打开的文件对象，您就可以访问您的文件。

```
request = self.factory.post('/')
with open(file, 'r') as f:
    request.FILES['file'] = f
    request.FILES['file'].read() 
```

现在您可以像往常一样访问 request.FILES 了。请记住，当您离开打开块时 request.FILES 将是一个关闭的文件对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-20T20:09:24.017

我对@Einstein 的答案进行了一些调整，以使其适用于将上传文件保存在 S3 中的测试：

```
request = request_factory.post('/')
with open('my_absolute_file_path', 'rb') as f:
    request.FILES['my_file_upload_form_field'] = f
    request.FILES['my_file_upload_form_field'].read()
    f.seek(0)
    ... 
```

*   没有打开文件，因为`'rb'`我在文件数据中遇到了一些不寻常的编码错误
*   没有`f.seek(0)`我上传到 S3 的文件是零字节

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-18T08:21:08.397

在更新`FILES`.

```
from django.core.files.uploadedfile import File
# Let django know we are uploading files by stating content type
content_type = "multipart/form-data; boundary=------------------------1493314174182091246926147632"
request = self.factory.post('/', content_type=content_type)
# Create file object that contain both `size` and `name` attributes 
my_file = File(open("/path/to/file", "rb"))
# Update FILES dictionary to include our new file
request.FILES.update({"field_name": my_file}) 
```

这`boundary=------------------------1493314174182091246926147632`是多部分表单类型的一部分。我从我的网络浏览器完成的 POST 请求中复制了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-02T13:50:14.943

以前的所有答案都对我不起作用。这似乎是另一种解决方案：

```
from django.core.files.uploadedfile import SimpleUploadedFile
with open(file, "rb") as f:
    file_upload = SimpleUploadedFile("file", f.read(), content_type="text/html")
    data = {
        "file" : file_upload
    }
    request = request_factory.post("/api/whatever", data=data, format='multipart') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-11T12:56:03.697

确保“文件”确实是表单中文件输入字段的名称。当它不是时我得到了那个错误（使用名称，而不是 id_name）

# c++ - Allegro C++如何刷新删除行？

> ID：14540449
> 
> 赞同：1
> 
> 时间：2013-01-26T19:02:05.657
> 
> 标签：c++, allegro

嘿，所以我正在尝试制作一个程序，您可以在其中从一点到鼠标所在的位置画一条线，但我无法弄清楚如何在画出这条线后将其删除。

```
#include <allegro.h>
#include <cstdlib>

BITMAP *buffer;

int main()
{
    allegro_init();
    install_mouse();
    install_keyboard();
    set_color_depth(16);
    set_gfx_mode(GFX_AUTODETECT, 640, 480, 0, 0);
    buffer = create_bitmap(640, 480);

    while (!key[KEY_ESC]) {
        if (key[KEY_SPACE]) {
            line(buffer, 30, 450, mouse_x, mouse_y, makecol(255, 0, 0));
        }

        draw_sprite(screen, buffer, 0, 0);
        release_screen();

        rest(10);
    }

    return 0; 
}
END_OF_MAIN(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:05:47.630

您需要将线的坐标存储在某种数据结构中（例如，结构数组）。当您想删除一行时，请将其从数据结构中删除。

您的绘图代码如下所示：

1.  清除缓冲区
2.  遍历每一行，将其绘制到缓冲区
3.  将缓冲区绘制到屏幕

并且不要调用获取/释放屏幕。它们通常是不需要的，如果你滥用它们，你会给自己带来很多问题。

# php - 编辑照片 PHP FACEBOOK API 时出错

> ID：14540454
> 
> 赞同：-4
> 
> 时间：2013-01-26T19:02:30.847
> 
> 标签：php, facebook, facebook-graph-api, image-processing

我想做的是：

*   获取人物头像；
*   获取使用 de 开关设置的随机图片
*   并将随机图片与个人资料图片混合
*   并把它展示给那个家伙！

可以这样做吗？

```
require_once("src/facebook.php");

$configurar = array();
$configurar['appId'] = '2033xxxxx389';
$configurar['secret'] = 'cc3xxxx9b1';
$configurar['fileUpload'] = true;

$facebook = new Facebook($configurar);

$signed_request = $facebook->getSignedRequest();
$__idPagina = $signed_request["page"]["id"];
$__adminPagina = $signed_request["page"]["admin"];
$__statusLike = $signed_request["page"]["liked"];
$__pais = $signed_request["user"]["country"];
$__locale = $signed_request["user"]["locale"];

$_idUsuario = $facebook->getUser();
?>
<html>
    <head></head>
    <body>

        <?
            if($_idUsuario)
            {
                try
                {
                    if($__statusLike)
                    {
                        //AQUI VAI A PARTE QUE FUNCIONA A MÁGICA DA FOTO! POORRA
                        // DEFINIR VARIAVEIS
                        $foto_x = $_idUsuario."_x.jpg";
                        $foto_y = $_idUsuario."_y.jpg";
                        $img = $_idUsuario.".jpg";

                        copy('http://graph.facebook.com/'.$_idUsuario.'/picture?width=150&height=150', 'lixeira/'.$foto_x);

                        //ARMA ALEATÓRIA NA BAGAÇA
                        $armaRandomica = rand(1,10);

                        //DEFINE O MOLDE DE ACORDO COMO O NUMERO QUE PEGOU AI /\

                        switch ($armaRandomica) {
                            case 1:
                                $moldeArma = "molde/_bazuka.jpg";
                                break;
                            case 2:
                                $moldeArma = "molde/_espada.jpg";
                                break;
                            case 3:
                                $moldeArma = "molde/_espingarda.jpg";
                                break;
                            case 4:
                                $moldeArma = "molde/_faca.jpg";
                                break;
                            case 5:
                                $moldeArma = "molde/_granada.jpg";
                                break;
                            case 6:
                                $moldeArma = "molde/_metralhadora.jpg";
                                break;
                            case 7:
                                $moldeArma = "molde/_nokia.jpg";
                                break;
                            case 8:
                                $moldeArma = "molde/_pistola.jpg";
                                break;
                            case 9:
                                $moldeArma = "molde/_shotgun.jpg";
                                break;
                            case 10:
                                $moldeArma = "molde/_sniper.jpg";
                                break;
                            }

                        echo '<img src="'.$moldeArma.'" />';

                        //JUNTAR A FOTO DO PERFIL COM O MOLDE!

                        header("Content-type:image/jpeg");

                        $stamp = imagecreatefromjpeg($foto_x);
                        $im = imagecreatefromjpeg($moldeArma);
                        $marge_right = 20;
                        $marge_bottom = 330;
                        $sx = imagesx($stamp);
                        $sy = imagesy($stamp);
                        imagecopy($im, $stamp, imagesx($im) - $sx - $marge_right, imagesy($im) - $sy - $marge_bottom, 0, 0, imagesx($stamp), imagesy($stamp));
                        imagejpeg($im, $foto_y,100);
                        imagedestroy($im);                      
                        exit;

                        //USA ISSO COMO $perfilUsuario['name'] e talz!
                        $perfilUsuario = $facebook->api('/me','GET');

                        //MOSTRA A FOTO PRO NEGRO!
                        echo '<img src="lixeira/'.$foto_x.'" />';
                    }
                    else
                    {
                        echo '<center><img src="imagens/curta.png"/></center>';
                    }
                }
                catch(FacebookApiException $e)
                {
                    $urlLogin = $facebook->getLoginUrl();
                    echo 'Porfavor <a href="'.$urlLogin.'">LOGUE!</a>';
                    error_log($e->getType());
                    error_log($e->getMessage());
                }
            }
            else
            {
                $urlLogin = $facebook->getLoginUrl();
                echo 'Porfavor <a href="'.$urlLogin.'">LOGUE!</a>';
            }
        ?>
    </body>
</html> 
```

这就是我从该代码中得到的，我应该怎么做才能修复这个错误？

[http://i.stack.imgur.com/lrFKd.png](http://i.stack.imgur.com/lrFKd.png)

帮助我的人=D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:54:16.937

您的代码有两个问题：

1.  在第 81 行，您正在输出一个内容类型的标题。单个文件只能输出 1 种内容类型，即 HTML 文件或图像文件。稍后会详细介绍

2.  在第 83 行，您尝试从 Facebook (imagecreatefromjpeg($foto_x);) 加载图像，但无法加载。您在此处仅指定图像的名称 (1100000000_x.jpg)，没有目录或位置，因此 PHP 假定是本地文件并尝试加载与 PHP 脚本位于同一目录中的文件。我不熟悉 Facebook API，但我怀疑应该通过 HTTP 从他们的服务器下载图像，具体取决于您的服务器设置，这可能会或可能不会被允许；

    $stamp = imagecreatefromjpeg('http://facebook.com/path/to/image/' . $foto_x);

回到第一期；不可能在单个 PHP 脚本中同时输出图像和 HTML。一种选择可能是从 Facebook 加载图像，对其进行操作，将其写入文件并将其用作 IMG 标记的“src”，例如：

```
imagejpeg($im, $foto_y,100, '/full/path/to/mynewfilename.jpg'); 
```

但是，这可能会很快填满您的服务器

另一种选择是将脚本拆分为两个单独的文件；

1) 输出 HTML 的文件

2）生成图像的文件

此页面将输出 HTML 并包含一个指向您的图像生成 .php 页面的 IMG 标记

```
<!DOCTYPE HTML>
<html>
    <head>.....</head>
    <body>
        <img src='./my_super_image.php' /><!-- <<<< The name of your image script -->
    </body>
</html> 
```

这个页面会生成并输出一张图片（只有一张图片，没有别的）！：

```
<?php
require_once("src/facebook.php");

.....

header("Content-type:image/jpeg");

$stamp = imagecreatefromjpeg('http://facebook.com/path/to/' . $foto_x);
$im = imagecreatefromjpeg($moldeArma);
$marge_right = 20;
$marge_bottom = 330;
$sx = imagesx($stamp);
$sy = imagesy($stamp);
imagecopy($im, $stamp, imagesx($im) - $sx - $marge_right, imagesy($im) - $sy - $marge_bottom, 0, 0, imagesx($stamp), imagesy($stamp));
imagejpeg($im, $foto_y,100);
imagedestroy($im);                      
?> 
```

上面的代码只是为了说明，没有经过任何测试！

# linux - 无法打开 x11 显示器：无法连接

> ID：14540457
> 
> 赞同：4
> 
> 时间：2013-01-26T19:02:46.100
> 
> 标签：linux, ssh, x11-forwarding

支持图形显示的服务器与我进入的服务器不同。当我尝试打开 virtualbox 时，我收到此消息。

```
$ Failed to open the X11 display! 
```

当我尝试 startx 时，我收到三个错误消息。

```
$ PAM authentication failed, cannot start X server

$ giving up.
$ xinit:  No such file or directory (errno 2):  unable to connect to X server
$ xinit:  No such process (errno 3):  Server error. 
```

我不知道显示变量在哪里，因为我对 linux 很陌生。任何直接的建议和帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T19:40:20.890

在命令行上提供选项 -X 以启用 X11 转发（图形界面）。

```
ssh -X user@hostname 
```

也可以通过在配置文件 (~/.ssh/config) 中将“ForwardX11”设置为“yes”来启用每个主机。还需要在目标服务器的 sshd 配置文件 (/etc/ssh/sshd_config) 中使用选项启用对 X11 转发的支持`X11Forwarding yes`。

您还应该知道启用 X11 转发存在一些安全隐患。从 ssh 和 sshd 手册页或[此处](https://security.stackexchange.com/questions/14815/security-concerns-with-x11-forwarding)阅读更多信息。如果您同时控制服务器和客户端并同等信任两者，则启用转发应该没有任何问题。

# caching - 如何清除与 WinJS.xhr 关联的缓存？

> ID：14540459
> 
> 赞同：0
> 
> 时间：2013-01-26T19:02:57.940
> 
> 标签：caching, windows-8, visual-studio-2012, xmlhttprequest, winjs

我正在尝试使用 WinJS 库和 Visual Studio 2012（更新 1）在 Windows 8 上进行应用程序开发，并且在使用 WinJS.xhr 缓存来自我在我的应用程序中查询的外部 REST API 的响应时遇到了困难。

我通过修改服务器以发送将“Expires”标头设置为值“0”的响应来部分解决了该问题。

但是，在我修改服务器的响应标头之前，缓存中仍然存在旧响应，现在可以追溯到两天前。我不知道如何清除与 WinJS.xhr 关联的缓存——有没有一种编程方式可以做到这一点？隐藏在 Visual Studio 中的选项/工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:23:31.450

发送带有如下`If-Modified-Since`标头的请求：

```
WinJS.xhr({ 
    url: "http://www.microsoft.com",
    headers: {
        "If-Modified-Since": "Mon, 27 Mar 1972 00:00:00 GMT"
    } })
    .done(function complete(result) {
        // Report download.
        xhrDiv.innerText = "Downloaded the page";
        xhrDiv.style.backgroundColor = "#00FF00";
}); 
```

链接关闭页面，可在[此处](http://msdn.microsoft.com/en-us/library/windows/apps/ms537417.aspx)[`If-Modified-Since`](http://msdn.microsoft.com/en-us/library/windows/apps/hh868281.aspx)找到其他标题。重要的是标题。[此处](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)的其他缓存指令包括：`CACHE-CONTROL`

```
Cache-Control   = "Cache-Control" ":" 1#cache-directive

cache-directive = cache-request-directive
     | cache-response-directive

cache-request-directive =
       "no-cache"                          ; Section 14.9.1
     | "no-store"                          ; Section 14.9.2
     | "max-age" "=" delta-seconds         ; Section 14.9.3, 14.9.4
     | "max-stale" [ "=" delta-seconds ]   ; Section 14.9.3
     | "min-fresh" "=" delta-seconds       ; Section 14.9.3
     | "no-transform"                      ; Section 14.9.5
     | "only-if-cached"                    ; Section 14.9.4
     | cache-extension                     ; Section 14.9.6

 cache-response-directive =
       "public"                               ; Section 14.9.1
     | "private" [ "=" <"> 1#field-name <"> ] ; Section 14.9.1
     | "no-cache" [ "=" <"> 1#field-name <"> ]; Section 14.9.1
     | "no-store"                             ; Section 14.9.2
     | "no-transform"                         ; Section 14.9.5
     | "must-revalidate"                      ; Section 14.9.4
     | "proxy-revalidate"                     ; Section 14.9.4
     | "max-age" "=" delta-seconds            ; Section 14.9.3
     | "s-maxage" "=" delta-seconds           ; Section 14.9.3
     | cache-extension                        ; Section 14.9.6 
```

从[这里](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.4)：

> 有时，用户代理可能希望或需要坚持让缓存重新验证其与源服务器的缓存条目（而不仅仅是沿着通往源服务器的路径的下一个缓存），或者从源服务器重新加载其缓存条目。如果缓存或源服务器高估了缓存响应的到期时间，则可能需要端到端重新验证。如果缓存条目由于某种原因已损坏，则可能需要端到端重新加载。

和

> 特定的端到端重新验证
> 
> 该请求包括一个“max-age=0”缓存控制指令，该指令强制每个缓存沿着到源服务器的路径重新验证其自己的条目（如果有的话）与下一个缓存或服务器。初始请求包括一个带有客户端当前验证器的缓存验证条件。

# jquery - 用一个测试用多个 jQuery 版本测试 Jasmine

> ID：14540460
> 
> 赞同：1
> 
> 时间：2013-01-26T19:03:11.747
> 
> 标签：jquery, jquery-plugins, version, jasmine, jasmine-jquery

我在 PhpStorm 上使用 Jasmine 和 JSTestDriver，我正在尝试使用一个 js 测试文件对多个版本的 jquery（即 1.7.x、1.8.x、1.9.0 和 2.0b）进行单元测试。做这个的最好方式是什么？我在这里阅读了一些没有实际答案的问题。

*   将描述放在循环中并手动加载/删除每个jQuery？
*   我正在使用 jasmine-jquery，所以我可以加载固定装置，但我不知道如何用它加载 js 文件，因为它似乎只是 HTML（和 json / css）
*   逐步加载每个脚本，调用 jQuery.noConflict 可以让它工作吗？
*   每次 jQuery 版本更改时，我是否必须重新加载我的 jQuery 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:46:55.410

经过几个小时的尝试，我设法做到了。实际上很简单，我只是想重新发明轮子，使用[LAB.js](http://labjs.com/documentation.php#optionsobject)我可以很容易地做到这一点，这在你的内部`test.js`（结果日志也很不错）：

```
function run() {
  describe("My code on jQuery " + ($().jquery), function () {
    // do your thing
  });
}

var
  $versions = ['1.7.1','1.7.2','1.8.0','1.8.1','1.8.2','1.8.3','1.9.0','2.0.0b1'];

for (var i = 0; i < $versions.length; i++) {
  $LAB
    .setOptions({AlwaysPreserveOrder:true, AllowDuplicates:true, CacheBust:true, BasePath:'/test/'})
    .script('tests/lib/jquery-' + ($versions[i]) + '.js')
    .script('tests/lib/jasmine-jquery.js')
    /* .script('any-other-lib.js') */
    .wait(run);
} 
```

$LAB 中加载的所有内容都是同步按顺序加载的，因此您始终可以确保脚本的加载顺序。非常简单并且通过持续集成，它可以在 IDE 的后台运行而没有任何麻烦（除非有时运行程序不会清理并会抛出异常说`$ is undefined`）

# php - 开发 Laravel 3 和 laravel 4

> ID：14540465
> 
> 赞同：7
> 
> 时间：2013-01-26T19:03:47.083
> 
> 标签：php, frameworks, laravel, laravel-4, laravel-3

基于 Laravel 3 构建的应用程序是否可以在 Laravel 4 上运行？

几天前我发现了 Laravel，现在我尝试学习它。当 Laravel 4 即将到来时，我是否会浪费时间学习 Laravel 3？LV4中的一些插件也是这样吗？我在 LV3 中构建的应用程序会在 LV4 中工作吗？
从哪里以及如何开始学习 LV4？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-26T19:59:28.940

Laravel 4 目前处于 beta 1 阶段，beta 2 将于本周或下周发布。直接回答您的问题：是的，您的 Laravel 3 (L3) 应用程序将在 Laravel 4 (L4) 中中断，因为 L4 在很多方面与 L3 不同。但是 L4 的设计考虑了从 L3 安装迁移，因此您绝对不必重写整个应用程序。你可能只需要更新一些路由、函数并实现一些新的方式 L4 处理某些关键方面。与此处所述的其他人一样，迁移指南尚不可用，但您可以打赌，当 L4 发布时，将提供大量教程和指南。

您不会浪费时间学习 L3，因为 L4 的大部分内容仍然与 L3 相同。L4 的文档将帮助您从 L3 转移到 L4。泰勒说（我同意）你不应该等到 L4 完成。如果您想构建一个应用程序并尽快将其发布用于生产，只需使用 L3 并稍后迁移。

L4 实现捆绑包的方式与 L3 不同。L4 使用 composer 将依赖项安装到框架中。你仍然可以直接在应用程序中使用捆绑包，但它们可能需要更新才能与 L4 中的更新很好地配合使用。

要开始学习 L4，文档是一个很好的方法。您不会学到所有东西，但也不会在文档上完成工作。随着更多测试版的发布，还会有更多内容。

如果您想了解有关 L4 的更多信息，这里有一些不错的教程可以帮助您入门：

*   [nettuts.com 对 Laravel 4](http://net.tutsplus.com/tutorials/php/what-to-expect-from-laravel-4/)有什么期望
*   Jason Lewis 的[Laravel 4 教程](http://jasonlewis.me/laravel-tutorials)

还有更多，但这应该让你开始:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:10:44.710

这应该有望回答你所有的问题： http: [//four.laravel.com/](http://four.laravel.com/)

我还没有看到迁移指南，但是我并没有太努力。我敢肯定，如果还没有，很快就会有

# c# - 向表中插入多行，对数据库有 1 次命中

> ID：14540473
> 
> 赞同：1
> 
> 时间：2013-01-26T19:04:38.950
> 
> 标签：c#, sql-server, linq, database-performance

`dbContext`通过使用 LINQ，我在对象中添加了多行。在`dbcontext.SaveChanges()`，sql profiler 分别插入每一行，如图所示，这表明数据库有多个命中。

经过大量谷歌搜索后，我找不到正确的答案。你能给我一个 C# + 存储过程的方法来保存数据库命中的所有行吗？

![多次命中数据库](../Images/94343138ab696eb4d52debad51b81e0c.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:39:29.690

[Elegantcode.com](http://elegantcode.com/2012/01/26/sqlbulkcopy-for-generic-listt-useful-for-entity-framework-nhibernate/)在“纯 C#”中有一个相当简单的批量插入方法，它应该完全符合您的要求。

> 实体框架的一个常见抱怨是较大数据集的插入时间很慢......我......粗略地制作了下面的可重用通用版本，它在 2.4 秒内产生 15k 插入或每秒 +- 6200 行。

# jquery - 使用 jQuery 动画（滑动）一个 div

> ID：14540476
> 
> 赞同：0
> 
> 时间：2013-01-26T19:04:51.217
> 
> 标签：jquery, html, css, jquery-animate

我正在尝试从左侧为 div 设置动画。我正在学习网络上的一个教程，但由于某种原因，查询不起作用。我不明白为什么。查询有问题吗？

```
<%@ Page Language="C#" %>
<!DOCTYPE html>
<html>
    <head>
        <title>jquery practice page</title>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
       <script type="text/javascript">

$(document).ready(function() {
 $('#slideleft button').click(function() {
    var $lefty = $(this).next();
    $lefty.animate({
      left: parseInt($lefty.css('left'), 10) == 0 ?
      -$lefty.outerWidth() :
      0
    });
  });
  });

</script>

<style type="text/css">

.slide {
  position: relative;
  overflow: hidden;
  height: 120px;
  width: 350px;
  margin: 1em 0;
  background-color: #ffc;
  border: 1px solid #999;
}
.slide .inner {
  position: absolute;
  left: 0;
  bottom: 0;
  width: 338px;
  height: 36px;
  padding: 6px;
  background-color: #4c5;
  color: #333;
  }

#slidebottom .inner{
    display:none;
}

.slide button {
  margin: .7em 0 0 .7em;
}

</style>

    </head>
    <body>

<div id="slidebottom" class="slide">
  <button>slide it</button>
  <div class="inner">This is supposed to slide in from the left</div>
</div>    
    </body>
</html> 
```

以上就是全部内容。我似乎无法找到错误。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:33:27.110

在您的代码中需要编辑三件事：

**1.错误的选择器：**
change

```
$('#slideleft button').click(function() { 
```

到

```
$('#slidebottom button').click(function() { 
```

**2.元素需要可见**：
你在你的CSS中隐藏滑动元素。因此，在将其滑入之前，您需要再次使其可见。

```
$lefty.animate({
    left: parseInt($lefty.css('left'), 10) == 0 ? -$lefty.outerWidth() : 0,
    opacity: "show"
}); 
```

**3\. 元素在错误的位置**
您还需要将滑动 div 向左移动，所以它会在第一次按下按钮时滑入：

```
slide .inner {
    position: absolute;
    left: -350px; 
```

看到这个 JSFiddle：http: [//jsfiddle.net/ax4AC/2/](http://jsfiddle.net/ax4AC/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:13:08.033

演示中的一些错误：

$('#slideleft button') 不正确。它应该是 $('#slidebottom button')。

应该在css下面删除这个，否则你什么也看不到

```
#slidebottom .inner{
    display:none;
} 
```

在这里演示：http: [//jsfiddle.net/8FLZC/1/](http://jsfiddle.net/8FLZC/1/)

# java - 使用扫描仪在java中分离html的元素和标签

> ID：14540477
> 
> 赞同：0
> 
> 时间：2013-01-26T19:04:59.330
> 
> 标签：java, html, html-parsing, java.util.scanner

我是编程新手，刚开始学习java。我想尝试打开一个 HTML 文件并将其划分为每个标签的标签和每个内容的内容。

我刚刚学会了如何使用 Scanner 进行扫描，然后检查 hasNext() 但我发现它只检查空格。

```
Scanner input = new Scanner (new FileReader("simple.html"));
while (input.hasNext())
{   
String content = input.next().toString();
System.out.println(content);
} 
```

问题是...

```
//INPUT
<html><head><title>Hello</title></head>
<body>
<table border=1>
Hello World!
</table>
</body>
</html>

//DESIRED OUTPUT
<html>
<head>
<title>
Hello
</title>
</head>
<body>
<table border=1>
Hello
World!
</table>
</body>
</html>

//WHAT MY CODE OUTPUTS
<html><head><title>Hello</title></head>
<body>
<table
border=1>
Hello
World!
</table>
</body>
</html 
```

谁能帮我？我被困住了。一步一步的指南将不胜感激。

我见过一些第三方程序可以自动执行此类操作，但我想以“编码方式”来学习它。因为我正在尝试自学编程，特别是 Java ......

太感谢了！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:47:08.920

扫描仪不是您的工具，因为“”是单独的标记。

您需要逐个字符地扫描输入，如果您在标签内，则使用标志。类似的东西（伪代码）

```
if char is > flag off
if char is < flag on
if char is whitespace and not flag than print ENDLINE
else if char is (ENDLINE or whitespace) and flag print whitespace
else print char 
```

现在您可以通过从伪代码制作 Java 来学习。

# java - Java 5 中涵盖的等待和通知的任何限制

> ID：14540479
> 
> 赞同：-6
> 
> 时间：2013-01-26T19:05:07.223
> 
> 标签：java, multithreading

一个一般性的问题 - Java 5 版本中已经涵盖了等待和通知的任何限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:11:04.660

java 5 自带的锁允许你在获取之前尝试是否有锁；还迎合了在 Java 5 之前的版本中不容易实现的公平性。你应该读[这个](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)。

此外，java 5 引入了原子类，这有助于使用硬件 CAS 支持编写等待免费算法。您应该阅读有关原子类的信息（例如 AtomicInteger）

Tha java 5 版本有一个丰富的 API，它主要消除了客户端代码中对等待和通知的任何使用——用更强大的锁和条件代替这种使用。此外，阻塞队列、信号量、锁存器、线程安全集合都是一个节目知道的重要介绍。特别是如果您查看 Condition 类，它提供了一种更强大的方式来执行之前使用等待/通知实现的操作。[在这里](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html)阅读

如果您是 Java 专业人士，我建议您阅读[这本书和 Brian Goetz 的《concurrency in practice》一书。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/package-summary.html)

# ios - 如何验证客户端代码没有被更改？

> ID：14540481
> 
> 赞同：0
> 
> 时间：2013-01-26T19:05:16.033
> 
> 标签：ios, objective-c, security

我正在开发一个客户端/服务器 SDK 项目，其中 iOS 客户端 SDK 作为代码而不是静态库分发给开发人员（我们有这种分发方法的商业原因）。我遇到过一些我们怀疑某些开发人员正在更改客户端 SDK 代码的情况。我想更新我们的客户端 SDK 以更主动地检测到这一点。

我的一个想法是在编译代码文件时以某种方式校验和，并让客户端 SDK 在与服务器交互时报告校验和以及 SDK 版本。在我们发布客户端 SDK 之前，我们会在我们这边记录每个版本的校验和，然后在客户端 SDK 校验和与其版本不正确时拒绝发送到我们服务器的任何内容。

我在这里有几个问题：

1.  我如何在编译时不显眼地校验客户端 SDK Objective-C 代码？
2.  有没有更好的方法来实现我的总体目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:11:39.320

> 我如何在编译时不显眼地校验客户端 SDK Objective-C 代码？

我认为这不可能如您想象/想要的那样。如果一个人可以访问源代码，那么他将能够修改任何东西——包括硬编码的校验和（无论如何他都可以修补检查代码）。

> 有没有更好的方法来实现我的总体目标？

嗯......如果你不能将你的库作为封闭源分发，那么不，不是真的......也许在许可证中要求不要修改代码，并阻止 - 使用服务器 - 那些怀疑改变代码。

但是尽管如此：你为什么这么关心代码的修改？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:51:16.980

这种方法比没有提供更多的安全性：

1.  添加在编译时生成库源代码的加密哈希的构建规则，并将结果构建到库中。
2.  将哈希与库版本号一起发送到服务器。
3.  在服务器上验证哈希和版本号在服务器上匹配。

对于坚定的攻击者来说，这是不安全的，因为他们可以简单地使用未修改版本的预先计算的哈希为库构建脚本。您可能会在某种程度上混淆该过程。

# vim - 将纸上的 Vim 命令理解为键盘操作

> ID：14540484
> 
> 赞同：2
> 
> 时间：2013-01-26T19:05:24.810
> 
> 标签：vim

我在理解 Vim 命令应该如何作为键盘操作执行时遇到问题。这是一个我不经常讨论的话题。一些例子是：

```
<s-tab> 
```

我相信这是`s`+ `tab`，但我没有得到预期的结果。

```
<c-k> 
```

我相信这是`ctrl`+ `k`。

```
<C-k> 
```

我有时会看到大写字母`c`，但有什么区别？

而且，在 Vim .vimrc 文件中：

```
noremap <D-M-Left> :tabprevious<cr>
noremap <D-M-Right> :tabnext<cr>
nnoremap <c-j> <c-w>j
map <D-1> 1gt 
```

我的问题是：

1.  字母的大小写与命令有什么关系？
2.  大`"<"` `">"`括号代表任何动作吗？
3.  `"-"`破折号是否代表任何行动？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T19:09:50.277

我想`:help key-notation`会回答你关于这个话题的所有问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-26T19:10:27.030

1.  没有。 `<c-k>`和`<C-k>`意思一样。顺便说一句，`<s`是`Shift`。
2.  在`<..>`这种情况下是 for `Control`/`Shift`组合键。它在其他上下文中可能具有不同的含义，例如搜索/替换。
3.  破折号只是表示这些组合的语法的一部分。

还有其他特殊的键，例如`<CR>`for `Return`/ `Enter`，`<Tab>`for`Tab`等。它们通常很直观，Vim 在接受这些方面非常灵活，尤其是在大小写方面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T00:02:10.190

你没有特别问但是`<S-Tab>`是`Shift`+ `Tab`，`<c-K>`and`<C-K>`是等价的，都意味着`Ctrl`+ `K`。

# encoding - Vary: Accept-Encoding 是否矫枉过正？

> ID：14540490
> 
> 赞同：26
> 
> 时间：2013-01-26T19:06:34.800
> 
> 标签：encoding, proxy, webserver, compression, gzip

在阅读[了 gzip 压缩的工作原理](https://developers.google.com/speed/articles/gzip?hl=en)之后，我开始思考。如果源服务器和代理服务器 (CDN) 都支持 gzip 是否`Vary: Accept-Encoding`需要添加标头？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-26T20:51:28.657

标`Vary: Accept-Encoding`头与缓存有关，而不是与压缩有关。当`Vary: Accept-Encoding`标头存在时，它告诉客户端文件可以被缓存/无论客户端是否请求压缩都是相同的。

如果出于某种原因，客户端在其缓存中具有文件的未压缩版本，它将知道随后不再请求它的压缩版本，而是仅使用缓存中的未压缩文件。

更多在这里：[什么是变化：接受编码是什么意思？](https://stackoverflow.com/questions/7848796/what-does-varyaccept-encoding-mean)

# internationalization - Typo3：获取可用语言列表作为 ISO 语言代码

> ID：14540492
> 
> 赞同：2
> 
> 时间：2013-01-26T19:06:45.380
> 
> 标签：internationalization, typo3

我需要将可用语言列表作为 2 个字母的 ISO 代码。

我知道我可以从“sys_language”中选择来获取已定义语言的列表，但这些语言不包含这样的 ISO 代码。

“sys_language”的表结构如下：

```
 1  uid                 int(11)     UNSIGNED    AUTO_INCREMENT
 2  pid                 int(11)     UNSIGNED
 3  tstamp              int(11)     UNSIGNED
 4  hidden              tinyint(4)      UNSIGNED
 5  title   varchar(80) utf8_general_ci
 6  flag    varchar(20) utf8_general_ci
 7  static_lang_isocode int(11) 
```

我尝试通过单击标志通过后端管理界面添加一些语言，但是虽然这会在 sys_language 表中添加另一行，但我看不到如何将这种定义的语言转换为 2 个字母的 ISO 语言代码.

最接近的是插入“标志”字段的 2 个字母标志代码，但标志不能真正转换为语言代码（想想瑞士，它有 3 种（实际上我认为甚至 4 种）官方语言）。

那么，如何获取已安装/激活语言的 2 字母 iso 代码列表？

问候/谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:18:05.260

查看[1.]中的扩展**static_info_tables**

这提供了所有地区、国家、国家区域（州、地方政府区域）、语言、货币的完整列表，作为后端中的预填表。此外，它扩展了 sys_language 以轻松选择与这些表的关系。

之后，可能会使用您选择的方法来查询此关系。

***链接***：

1.  [http://typo3.org/extensions/repository/view/static_info_tables](http://typo3.org/extensions/repository/view/static_info_tables)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-26T21:07:55.053

恐怕我对typo3一无所知，但可以在这个repo中找到有效的ISO 6391-alpha2代码列表（以及其他代码）：[https ://github.com/tigrish/iso](https://github.com/tigrish/iso)

# xml - 从手机中找不到 XML 提要 URL 强制站点 url 使用主版本而不是移动版本

> ID：14540497
> 
> 赞同：0
> 
> 时间：2013-01-26T19:07:39.397
> 
> 标签：xml, dom, web, rss, feed

我制作了一个 java 程序，它调用并使用来自的 xml 提要`http://www.somewhereinblog.net/indexblog/rss`并且工作正常。

但是当我制作了一个 android 版本并调用它时，程序找不到主机，因为这个站点有一个移动版本是 m.somewhereinblog.net ，每当我尝试调用提要 url 时，它会自动更改它的 url 并转到`m.somewhereinblog.net/indexblog/rss` 没有饲料。

那么如何强制我的手机不拨打手机版呢？请有任何想法或帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:10:01.593

该网站正在根据它收到的 User-Agent 标头重定向您的 Android 程序。解决方法：在检索提要时发送桌面用户代理标头。查看[http://www.useragentstring.com/pages/useragentstring.php](http://www.useragentstring.com/pages/useragentstring.php)以获取 User-Agent 标头的详尽列表。

根据您的评论 - 这是一个澄清。当浏览器连接到网络服务器时，它会在其标头中发送一个用户代理字符串。User-Agent 识别客户端请求，通常指定操作系统、它使用的浏览器版本等。

例如，运行 Android 的移动浏览器可能会将自己标识为：

```
User-Agent: Mozilla/5.0 (Linux; U; Android 2.2.1; en-ca; LG-P505R Build/FRG83) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1 
```

而 Windows 8 上的桌面浏览器可能会发送如下内容：

```
User-Agent: Mozilla/6.0 (Windows NT 6.2; WOW64; rv:16.0.1) Gecko/20121011 Firefox/16.0.1 
```

请注意，在上面的示例中，User-Agent 包含有关操作系统以及发起请求的浏览器的版本和名称的信息。Web 服务器使用此信息来确定应提供哪些页面。

由于您在 Android 上的程序在请求提要时被重定向到移动页面，因此您在 Android 上用于生成请求的 API 很可能正在发送一个将其标识为移动设备的 User-Agent 字符串。

解决方法是覆盖在标头中发送的 User-Agent 字符串，以便网络服务器认为请求来自桌面系统。这就是我发布指向用户代理字符串列表的链接的原因 - 以便您可以选择和测试不同的设置。

总而言之 - 您不需要请求不同的 URL - 从与桌面版本相同的 URL 请求提要，但确保传递给网络服务器的标头中的 User-Agent 字符串将请求识别为来自桌面浏览器和不是移动版本，以避免被重定向到移动版本。

# java - 检索 cookie

> ID：14540502
> 
> 赞同：0
> 
> 时间：2013-01-26T19:08:09.610
> 
> 标签：java, servlets

我是 servlet 的新手，我有一个关于 cookie 的问题。

我有一个 servlet，我在其中创建了一个 cookie，并编写了一个页面，我在其中放置了指向另一个要检索 cookie 的 servlet 的链接。

由于某种原因，我无法检索它。任何建议为什么它是空的？

谢谢

第一个小服务程序：

```
/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
 */
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();
        // create new cookies
        Cookie FirstCookie = new Cookie("user", "This is the value of my first Cookie");
        //all pages on the server should receive the cookie
        FirstCookie.setPath("/");
        FirstCookie.setVersion(0);
        FirstCookie.setSecure(false);
        //60 sec * 60 min * 24h * 5d = 
        FirstCookie.setMaxAge(432000);
        FirstCookie.setComment("some comment");
        // save the cookies
        response.addCookie(FirstCookie);

    out.println("<html><body>");
    out.println("<h1>CookieServlet</h1>");
    out.println("<a href='ReadCookiesServlet'>To the Cookie page</a>");
    out.println("</body></html>");
    out.close();
} 
```

第二个小服务程序：

```
/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
 *      response)
 */
protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {

    response.setContentType("Text/html");

    PrintWriter pw = response.getWriter();
    pw.println("<html><body>");
    pw.println("<h1>Bestaande cookies:</h1>");
    Cookie[] myCookies = request.getCookies();
    if (myCookies != null) {
        for (int i = 0; i < myCookies.length; i++) {
            pw.println("<table border=1 ALIGN=\'CENTER\'>");
            Cookie currentCookie = myCookies[i];
            if (currentCookie.getName().equalsIgnoreCase("user")) {

                pw.println("<tr><td>" + "Name : " + currentCookie.getName() + "<td></tr>");
                pw.println("<tr><td>" + "Path : " + currentCookie.getPath() + "<td></tr>");
                pw.println("<tr><td>" + "Version : " + currentCookie.getVersion() + "<td></tr>");
                pw.println("<tr><td>" + "Secure : " + currentCookie.getSecure() + "<td></tr>");
                pw.println("<tr><td>" + "Age : " + currentCookie.getMaxAge() + "<td></tr>");
                pw.println("<tr><td>" + "Value : " + currentCookie.getValue() + "<td></tr>");
                pw.println("<tr><td>" + "Comment : " + currentCookie.getComment() + "<td></tr>");
                pw.println("</table>");
            }
        }

    }

    pw.println("</body></html>");

    pw.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:28:41.340

我怀疑它是空的，因为它没有被第一个 servlet 设置。按照目前的编写方式，您必须提供这样的用户参数：`FirstServletThatSetsCookie?user=flup`当您浏览第一个 servlet 时，它根本不会设置 cookie！

请注意这一点：

```
String[] user = request.getParameterValues("user");
if (user != null) {
    // create new cookies 
```

# scala - 比较 sbt 中的版本

> ID：14540503
> 
> 赞同：1
> 
> 时间：2013-01-26T19:08:09.790
> 
> 标签：scala, version, sbt

有没有一种简单的方法来比较 sbt 构建文件中的版本而无需手工制作。例如

```
scalacOptions <++= scalaVersion { sv =>
  if (sv >= "2.10.0") "-feature" :: Nil else Nil
} 
```

（上面编译，但出于某种原因`"2.9.2" >= "2.10.0"`......？！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T00:34:14.947

[semverfi](https://github.com/softprops/semverfi)是一个 Scala 库，您可以将其添加到您的库中，`project/plugins.sbt`并且可以在构建定义中使用：

```
libraryDependencies += "me.lessis" %% "semverfi" % "0.1.2" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-13T19:02:48.923

由于 sbt 1.2.0 有一个内置 API：[https ://www.scala-sbt.org/1.0/docs/sbt-1.2-Release-Notes.html#Semantic+Version+selector+API](https://www.scala-sbt.org/1.0/docs/sbt-1.2-Release-Notes.html#Semantic+Version+selector+API)

例如你可以做

```
VersionNumber("2.12.5").matchesSemVer(SemanticSelector(">=2.12")) 
```

# python - 在 csv 文件中计算 python 中的特定事件

> ID：14540504
> 
> 赞同：4
> 
> 时间：2013-01-26T19:08:11.107
> 
> 标签：python, csv

我有一个包含 4 列 {Tag、User、Quality、Cluster_id} 的 csv 文件。使用 python 我想做以下事情：对于每个 cluster_id（从 1 到 500），我想查看每个用户的好标签和坏标签的数量（从质量列获得）。有超过6000个用户。我只能在 csv 文件中逐行读取。因此，我不确定如何做到这一点。

例如：

```
Columns of csv = [Tag User Quality Cluster]   
Row1= [bag  u1  good     1]  
Row2 = [ground u2 bad   2]  
Row3 = [xxx  u1 bad  1]  
Row4 = [bbb  u2 good 3] 
```

我刚刚设法获取了 csv 文件的每一行。

我一次只能访问每一行，没有两个 for 循环。我要实现的算法的伪代码是：

```
for cluster in clusters:  
    for user in users:  
        if eval == good:  
            good_num = good_num +1  
        else:  
            bad_num = bad_num + 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:47:56.793

`collections.defaultdict`在这里应该有很大的帮助：

```
# WARNING: Untested
from collections import defaultdict

auto_vivificator = lambda: defaultdict(auto_vivificator)

data = auto_vivificator()

# open your csv file

for tag, user, quality, cluster in csv_file:
    user = data[cluster].setdefault(user, defaultdict(int))
    if is_good(quality):
        user["good"] += 1
    else:
        user["bad"] += 1

for cluster, users in enumerate(data):
    print "Cluster:", cluster
    for user, quality_metrics in enumerate(users):
       print "User:", user
       print quality_metrics
       print  # A blank line 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T20:46:40.953

由于有人已经发布了`defaultdict`解决方案，我将给[熊猫](http://pandas.pydata.org/)一个，只是为了多样化。 `pandas`是一个非常方便的数据处理库。在其他不错的功能中，它可以在一行中处理此计数问题，具体取决于所需的输出类型。真的：

```
df = pd.read_csv("cluster.csv")
counted = df.groupby(["Cluster_id", "User", "Quality"]).size()
df.to_csv("counted.csv") 
```

--

为了`pandas`方便起见，我们可以加载文件——其中的主要数据存储对象`pandas`称为“DataFrame”：

```
>>> import pandas as pd
>>> df = pd.read_csv("cluster.csv")
>>> df
<class 'pandas.core.frame.DataFrame'>
Int64Index: 500000 entries, 0 to 499999
Data columns:
Tag           500000  non-null values
User          500000  non-null values
Quality       500000  non-null values
Cluster_id    500000  non-null values
dtypes: int64(1), object(3) 
```

我们可以检查前几行是否正常：

```
>>> df[:5]
   Tag  User Quality  Cluster_id
0  bbb  u001     bad          39
1  bbb  u002     bad          36
2  bag  u003    good          11
3  bag  u004    good           9
4  bag  u005     bad          26 
```

然后我们可以按 Cluster_id 和 User 分组，并在每个组上工作：

```
>>> for name, group in df.groupby(["Cluster_id", "User"]):
...     print 'group name:', name
...     print 'group rows:'
...     print group
...     print 'counts of Quality values:'
...     print group["Quality"].value_counts()
...     raw_input()
...     
group name: (1, 'u003')
group rows:
        Tag  User Quality  Cluster_id
372002  xxx  u003     bad           1
counts of Quality values:
bad    1

group name: (1, 'u004')
group rows:
           Tag  User Quality  Cluster_id
126003  ground  u004     bad           1
348003  ground  u004    good           1
counts of Quality values:
good    1
bad     1

group name: (1, 'u005')
group rows:
           Tag  User Quality  Cluster_id
42004   ground  u005     bad           1
258004  ground  u005     bad           1
390004  ground  u005     bad           1
counts of Quality values:
bad    3
[etc.] 
```

如果您要对`csv`文件进行大量处理，那么绝对值得一看。

# python - 不能在文件中写入超过 204800 个字符？

> ID：14540507
> 
> 赞同：3
> 
> 时间：2013-01-26T19:08:30.257
> 
> 标签：python, html, file-io, debian, linux-mint

编辑 2：对于那些想仔细查看代码的人，这里是： [https ://github.com/pikzen/ffbookmark/blob/python-rewrite/ffbookmark.py](https://github.com/pikzen/ffbookmark/blob/python-rewrite/ffbookmark.py)

我在这里遇到了一些麻烦：每当我尝试将超过 204800 个字符写入文件时，python 都会引发 IOError。我在另一台计算机上尝试过，它以 768k 个字符崩溃。这是一个python问题，操作系统是否限制了什么？这是我正在使用的代码：

```
with open('out.json', 'w') as f:
    json.dump(items, f) 
```

`items`是一个简单的字典。我从一个包含大约 800 个元素的 HTML 文件构建它。每个元素都是这样构建的：

```
bookmark = {}
            bookmark["title"] = link.contents[0]
            bookmark["id"] = id
            bookmark["parent"] = 5
            bookmark["dateAdded"] = 1
            bookmark["lastModified"] = 1
            bookmark["type"] = "text/x-moz-place"
            uri = link.get('href')
            # Shaarli's self links are totally messed up : ?xGRpkrp
            # But we can't simply oust links containing '?'s, because
            # php uses it, and pretty much everything does
            # however, if there's not dot, we can assume it's a 
            # Shaarli link.
            # If it's not, well too bad, false positive.
            if "?" in uri and not '.' in uri:
                bookmark['uri'] = "about:blank"
            else:
                bookmark['uri'] = uri
            id += 1

            try:
                # This line messes up when the end of the file has been reached
                # Rather than coding properly, let's just catch the exception
                desc = link.parent.next_sibling.next_sibling
                if desc and desc.name == "dd":
                    bookmark["annos"] = []
                    annos = {}
                    annos["name"] = "bookmarkProperties/description"
                    annos["flags"] = 0
                    annos["expires"] = 4
                    annos["mimeType"] = ""
                    annos["type"] = 3
                    annos["value"] = desc.contents[0]
                    bookmark["annos"].append(annos) 
```

输出 ：

```
IOError (Errno 27) : File too large 
```

编辑：附加信息：Python 信息：

```
$ python --version
Python 2.7.3 
```

使用的操作系统：

Linux Mint 13：限制：204.8kB

Debian 6.0：限制：768kB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:13:14.093

这不是 Python 错误，而是您正在写入的文件系统的限制，或者您的操作系统的等效（人为）限制。

用于`ulimit -f`检查您的文件大小限制。应该说`unlimited`。如果没有，您很可能需要编辑`/etc/security/limits.conf`. 您可以使用以下命令搜索有问题的配置：

```
grep fsize /etc/security/limits.conf /etc/security/limits.d/ -r 
```

您可能还想检查您的[文件系统`quota`](http://linux.die.net/man/1/quota)或 grsecurity 限制。

最后，您可能需要检查`mount`以确保您希望挂载的文件系统就是您看到的那个。

# java - Java android如何使用联系人选择器

> ID：14540514
> 
> 赞同：1
> 
> 时间：2013-01-26T19:09:11.293
> 
> 标签：java, android, android-intent, android-contacts

我编写了一个应用程序来发送关联短信，我需要您的帮助...我想通过联系人选择器从联系人中检索手机号码。我无法检索用户选择的结果...

我的代码：

```
public class MainActivity extends Activity {
    private static final int CONTACT_PICKER_RESULT = 0;
    private Button contacts = null;
    private Button envoyer = null;
    private TextView mobile = null;
    private int PICK_CONTACT;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Elements of th activity
        contacts = (Button) findViewById(R.id.contacts);
        envoyer = (Button) findViewById(R.id.envoyer);
        mobile = (TextView) findViewById(R.id.mobile);

        contacts.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Intent contactPickerIntent = new Intent(Intent.ACTION_PICK, Phone.CONTENT_URI);  
                startActivityForResult(contactPickerIntent, 1001); 
            }
        });

        envoyer.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

            }
        });

    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
      // How to retrieve the mobile and the name of the contact selected ?
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void open_contacts(){

    }

} 
```

非常感谢你... ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:28:28.070

**使用权限：**

```
<uses-permission android:name="android.permission.READ_CONTACTS" /> 
```

**onClick 调用：**

```
doLaunchContactPicker(new View(mContext));

public void doLaunchContactPicker(View view)
{
    Intent contactPickerIntent = new Intent(Intent.ACTION_PICK, Contacts.CONTENT_URI);
    startActivityForResult(contactPickerIntent, CONTACT_PICKER_RESULT);
} 
```

**onActivityResult ：**

```
Uri result = data.getData();
String id = result.getLastPathSegment();

cursor = getContentResolver().query(Phone.CONTENT_URI, null,
    Phone.CONTACT_ID + " = ? AND " + Phone.TYPE + " = ? ",
    new String[] { id, String.valueOf(Phone.TYPE_WORK) }, null);

phoneIdx = cursor.getColumnIndex(Phone.NUMBER);
if (cursor.moveToFirst())
{
    phone = cursor.getString(phoneIdx);
} 
```

您可以使用上面的光标来检索针对所选联系人存储的任何号码。

# c - 通过c进行网络编程编译执行但不打印IP地址...！

> ID：14540516
> 
> 赞同：1
> 
> 时间：2013-01-26T19:09:30.217
> 
> 标签：c, api, sockets, networking, network-programming

这里包括我编写的代码代码编译并执行，但 IP 地址没有打印出来，而是得到以下输出。我已经包含了下面的代码，请帮助我。

```
 //This is the executed code printed out  
    -Inspiron-1318:~$ ./com2 google.com
    Networks use Big Endian order

    This machine uses Little Endian

    google.com to 
    // here I need to print the ip addresses but I am unable to// 
```

这是我写的代码；请帮我找出我的错误：

```
#include <stdio.h>
#include <stdlib.h>
#include <netdb.h>
#include <netinet/in.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <string.h>
#include <arpa/inet.h>

void checkEndian()
{
    uint32_t a=0x10de7623;
    uint32_t b = ntohl(a);
    if(b == a)
    {
        printf("This machine uses Big Endian\n");
    } 
    else if(b ==0x2376de10 )
    {
        printf("\nThis machine uses Little Endian\n");
    }
    else
    {
        printf("This machine uses Other Endian\n");
    }
}

int main(int argc,char* argv[])
{
    printf("Networks use Big Endian order\n");
    checkEndian();

    if(argc<2)
    {
        printf("expected a name for resolving");
        exit(1);
    }

    char *name=argv[1];
    char ip[100];

    name_ip(name , ip);
    printf("%s to %s\n",name,ip); 
}

int name_ip(char *name,char *ip)
{
    struct addrinfo hints , *answer , *h;
    char buf[1024];

    memset(&hints,0,sizeof hints);

    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM; 

    int error = getaddrinfo(name, NULL, &hints, &answer);

    if(error!=0)
    {
    fprintf(stderr,"\n error in getaddrinfo: %s\n",gai_strerror(error));
    exit(EXIT_FAILURE);
    }

    for(h = answer; h != NULL; h = h->ai_next)
    {
    if(h->ai_family=AF_INET)
    {
    struct sockaddr_in *x;

    x=(struct sockaddr_in *)h->ai_addr;

    //// this inet_ntop is the root of whole problem//
    inet_ntop(h->ai_family,&(((struct sockaddr_in *)h->ai_addr)->sin_addr),buf,1024);

    }

    if(hints.ai_family=AF_INET6)
    {
    struct sockaddr_in6 *x;

    x=(struct sockaddr_in6*)h->ai_addr;
    // this inet_ntop is the root of whole problem//

    inet_ntop(h->ai_family,&(((struct sockaddr_in6 *)h->ai_addr)->sin6_addr),buf,1024);
    }
    printf("%s\n",ip);
    }

    freeaddrinfo(answer);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T20:43:02.970

这是一个错误，其中有两种情况：

```
if(h->ai_family=AF_INET) 
```

因为它是一个*assignment*，而不是一个相等性检查。改用`==`：

```
if(h->ai_family==AF_INET) 
```

此外，`ip`永远不会在函数中填充`name_ip()`.

# html - HTML标记不起作用

> ID：14540517
> 
> 赞同：6
> 
> 时间：2013-01-26T19:09:30.413
> 
> 标签：html, image, xhtml

我正在使用以下简单的 HTML：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html>
    <body>
            <img src="loading.gif" alt="MISSING GIF"> 
            <img src="j.JPG" alt="MISSING JPG">              
    </body>
    </html> 
```

`loading.gif`并且`j.jpg`与 html 文件位于同一目录中。`loading.gif`在 ie 8 中显示良好，但`j.jpg`无法加载。

当我使用 firefix 时，两个图像都正确显示。

请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T19:11:23.663

检查`JPG`文件系统中的文件扩展名是否为大写。我怀疑它是小写的。还要确保关闭图像标签。

```
<img src="j.jpg" alt="MISSING JPG"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T19:14:07.023

```
<img src="loading.gif" alt="MISSING GIF"> 
```

会是这样

```
<img id="ImgEmployee" src="Photos/loading.gif" alt="MISSING GIF" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-02T00:31:01.693

img 文件最初是在另一个扩展名中吗？如果是这样，请恢复为原始扩展名。

我在我的 Windows PC 上截取了 .png 格式的屏幕截图。我将扩展名更改为 .jpg（认为它与我的 Mac 一样）。IE 不喜欢它，但 Firefox 没问题。

```
<img src="1.jpg" /> 
```

我将扩展名改回.png，它在两个浏览器中都运行良好。

```
<img src="1.png" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-02T11:59:09.800

我遇到了同样的问题，我发现在使用 wordpress 时，您应该将以下代码用于图像：

```
<img src="<?php bloginfo('template_directory'); ?>/images/example.jpg" alt = "example"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T19:12:40.710

小写扩展名并关闭 img 标签，您使用的是 XHTML 1.0 Strict ！

```
<img src="loading.gif" alt="MISSING GIF" />  
<img src="j.jpg" alt="MISSING JPG" /> 
```

**编辑**：也许你遇到了一个 IE8 错误... +1 的问题:)

让我们尝试这样：使用真正符合 XHTML 1.0 Strict 的页面，

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
   <head>
      <title>hi!</title>
   </head>
   <body>
      <div>
         j.JPG : <img src="j.JPG" alt="MISSING JPG" /> 
                 (upper case) <br/>
         j.jPG : <img src="j.jPG" alt="MISSING JPG" /> 
                 (first lower case, others upper case <br/>
         j.jpg : <img src="j.jpg" alt="MISSING JPG" /> 
                 (lower case) <br/> 
      </div>
   </body>
</html> 
```

创建文件的两个副本，因此您将拥有上面列出的三个文件。然后在 IE8 中运行该页面并告诉我们哪个在工作...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-26T04:30:17.643

最近我在一个使用 WAMP 服务器的 Web 项目中工作。我将我的网站放在**`c:/wamp/www/my_site`**文件夹下，并在页面上引用了该文件夹中的图像。图像没有显示。我在...宾果游戏中引用了另一张图片`desktop`，它起作用了。我认为这*是许可的事情*...... :)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-21T05:56:37.020

我认为这是因为特定的图像。检查您是否有权使用这些文件。我也有同样的问题。我有两个操作系统（Ubuntu 和 Windows）正在运行，我使用的图像来自 Windows 本地磁盘。在我解决了这个权限问题后，它起作用了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-26T19:55:43.437

它在 IE9/10 中也坏了吗？

此外，如果您在上面发布的代码正是您文件中的内容，那么您在 doctype 声明之前的字符 (`) 不正确。

当您的 HTML 错误时，Internet Explorer 会中断，像 Firefox 这样的浏览器会更加宽容，并尝试为您修复问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-09T17:25:24.883

您是否检查了标题是否存在差异？有时会发生这种情况，因为某些 GET 请求标头更改为以下内容：{https:www.xyz.com/?id=blah-blah}。现在，由于目录中不存在这样的文件，因此 img 标记仍然无法确定它必须在哪里寻找资源。您需要再次将发送标头更改为同一页面，以便这次没有 GET 请求连接到该地址。我花了很长时间才弄清楚。

# php - 如何在 PHP 中覆盖 Apache 404 状态？

> ID：14540519
> 
> 赞同：3
> 
> 时间：2013-01-26T19:09:37.230
> 
> 标签：php, linux, apache, http

我有一个使用 404 页面设置的 PHP 站点来处理漂亮的 URL 和一些缓存。这工作得非常好，并且比重负载下[通常的 htaccess 重定向规则](https://stackoverflow.com/a/3160066/1154998)更快。

```
ErrorDocument 404 /damncache/index.php 
```

问题是 Apache 将 HTTP 状态设置为 404，我似乎无法覆盖它。因此，当谷歌索引网站时，所有这些页面都没有被索引（根据谷歌网站管理员工具）。

这是我目前尝试覆盖它的方式：

```
header($_SERVER['SERVER_PROTOCOL'] . " 200 OK");
header("Status: 200 OK"); // for fast cgi 
```

有了这个，它对人类/浏览器工作正常，但谷歌显然收到 404 状态并停止。这是[一个例子](http://www.damninteresting.com/lucid-decapitation/)。

它托管在 Dreamhost 专用 Linux 服务器上，运行 PHP 5.3.x 和 FastCGI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:17:36.167

[http://web-sniffer.net/](http://web-sniffer.net/)报告 200 OK 标头 - 您是否给 Google 足够的时间重新抓取页面？

如果它已经从索引中删除了它们，您可能需要再次提交它们 - 它可能会通过抓取其他链接来获取它们，但无论如何网站管理员工具中的站点地图可能是一个好主意。

# compiler-errors - SML 错误：语法错误：插入 DOT

> ID：14540520
> 
> 赞同：3
> 
> 时间：2013-01-26T19:09:42.877
> 
> 标签：compiler-errors, syntax-error, sml, smlnj

当我在 REPL 中运行此代码时，它会抛出`Error: syntax error: inserting DOT`. 我想知道那个错误信息是什么意思。

我已经修复了代码，但仍然想知道该消息的含义以供将来参考。

`part_dir`是返回`direction`具有可能模式`Left`和的自定义数据类型的函数`Right`。

```
fun same (fs)=
    case fs of
         (f1::f2::fs') => case (part_dir(f1),part_dir(f2)) of
                               (dir1=dir2) => same (f2::fs')
                             | _           => false
        | _            => true 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T19:38:40.797

“语法错误：插入点”意味着在它抱怨的位置有一个意外的标记，并且在该位置一个点是合法的。但是，这并不意味着点是该位置唯一允许的东西，或者用点替换标记可以解决您的错误。

在大多数情况下，除了告诉您该位置存在语法错误之外，错误消息毫无用处。您可能应该忽略“插入 DOT”部分，因为它通常不会引导您朝着正确的方向前进。只需查看它所抱怨的行和列，并尝试找出存在的语法错误。

在您的情况下，问题在于这`dir1=dir2`不是法律模式。合法模式将是数据类型的构造函数，其每个参数、变量名、`_`常量或模式元组都有模式。没有模式可以说“包含两个相等元素的元组”。为此，您需要模式`(dir1, dir2)`，然后`dir1=dir2`是`if`.

在您的情况下，您甚至不需要`if`。你可以写：

```
(dir1, dir2) => dir1 = dir2 andalso same (f2 :: fs) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T01:50:22.230

另请注意，您的两个 case 表达式不会像您期望的那样工作。外壳的最后一个模式匹配实际上是内部案例的一部分。换句话说，您的代码实际上具有此含义

```
fun same (fs)=
    case fs of
      (f1::f2::fs') => case (part_dir(f1),part_dir(f2)) of
                         (dir1=dir2) => same (f2::fs')
                       | _           => false
                       | _           => true 
```

当修复 sepp2k 指出的错误并且您的代码编译时，您会注意到解释器吐出警告和错误。首先是内部案例的最后一个匹配是多余的错误，然后是外部案例具有非详尽匹配的警告。也就是说，它没有适用于所有可能输入的案例。

因此，在 case 表达式周围加上括号总是一个好主意，因为如果您的函数`same`在 case 下有其他匹配项，也会发生相同的情况。原因是管道是匹配多个模式的常见语法。

加上括号，您的函数将获得预期的含义

```
fun same (fs)=
    case fs of
      (f1::f2::fs') => (case (part_dir(f1),part_dir(f2)) of
                         (dir1=dir2) => same (f2::fs')
                       | _           => false)
    | _             => true 
```

# c# - 在方法之间传递变量值...？

> ID：14540528
> 
> 赞同：0
> 
> 时间：2013-01-26T19:10:46.603
> 
> 标签：c#, oop

有人可以帮助我在 c# 中将值从一个类方法传递到另一个类方法吗？我试过查找它，但我迷失在代码页面中，我找不到一个简单的例子。看看以下内容：

```
//Main Program Program.cs
namespace simplecode
{

    class Program
    {
        static void Main(string[] args)
        {
            Values Values = new Values();
            Values.getName();
        }
    }
}

//Separate class file or object Values.cs 

namespace simplecode
{
    public class Values
    {
        public static void getName()
        {
            Console.Clear();
            Console.Write("Enter name: ");
            string myName = Console.ReadLine();
        }
    }
} 
```

现在，如果我执行这个主程序运行 getName 并且我可以存储 myName 变量。如何从主程序或另一个单独的类方法中获取 myName 的值？我试图从概念上理解这一点，我需要正确的语法。如果有人可以解释需要什么或提供学习链接 id 不胜感激。

谢谢迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:12:22.093

您可以让该方法返回此值：

```
public static string getName()
{
    Console.Clear();
    Console.Write("Enter name: ");
    return Console.ReadLine();
} 
```

然后在您的主程序中调用该方法并将结果存储在局部变量中：

```
static void Main(string[] args)
{
    string myName = Values.getName();
} 
```

请注意，由于`getName`是静态方法，因此您无需创建`Values`类的实例即可调用它。您可以直接在类型名称上调用它。

另一方面，如果该`getName`方法不是静态的：

```
public string getName()
{
    Console.Clear();
    Console.Write("Enter name: ");
    return Console.ReadLine();
} 
```

那么你需要这个实例：

```
static void Main(string[] args)
{
    Values values = new Values();
    string myName = values.getName();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:16:18.707

首先，您需要将变量实际存储在某处。现在它是方法中的一个局部变量，所以在你给它赋值后它就会消失。

使其成为类中的属性，并使该方法成为实例方法而不是静态方法：

```
namespace simplecode
{
    public class Values
    {

        public string MyName { get; set; }

        public void getName()
        {
            Console.Clear();
            Console.Write("Enter name: ");
            MyName = Console.ReadLine();
        }
    }
} 
```

现在您可以调用该方法并随后获取该值：

```
namespace simplecode
{

    class Program
    {
        static void Main(string[] args)
        {
            Values myValues = new Values();
            myValues.getName();
            Console.WriteLine(myValues.MyName);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T19:17:55.767

通常，您会从函数返回值。您将需要考虑您的代码如何调用不同的模块。

您可能会发现流程是否复杂，您可能希望查看控制反转，尽管偏离主题且更高级，它与代码如何链接在一起，我认为这是您的潜在问题/问题。

如果您要返回多个值，则可以使用结构/类或将参数标记为 ref，从而允许您从函数内部进行修改（通过引用传递变量，而不是通过默认值传递它们）。

# jquery - 如何使我的本地滚动偏移与此固定标题一起使用？

> ID：14540535
> 
> 赞同：2
> 
> 时间：2013-01-26T19:11:14.887
> 
> 标签：jquery, scroll, responsive-design, offset, zurb-foundation

所以我已经用 zurb 基金会的响应模板设计这个网站几天了...作为最后一分钟的决定，我决定修复标题 #header...除了每个滚动的标题下的内容幻灯片之外，一切都一样事件。

我一生都无法弄清楚如何使偏移正常工作？！？！

我正在使用 jQuery localscroll 插件，就像这样

```
$.localScroll({hash:true, offset: {top: 65},duration: 1000,easing:'easeInOutExpo'}); 
```

我曾尝试将偏移量：{top:} 参数更改为 60 和 -60，但我尝试的任何东西充其量都会给我一个摇晃的动画：-/

所以...我想也许我可以不理会 .js 并通过使用 css 将面板向下移动来修复它？或者可能是#main 容器？...但是不...不能让它工作吗？

所以我正在寻找一种方法来修复本地滚动偏移......或者......以某种方式向下移动所有内容以适应#header？

此处可能存在冲突文件：

[http://example.com/javascripts/foundation/jquery.offcanvas.js](http://example.com/javascripts/foundation/jquery.offcanvas.js)
[http://example.com/js/main2.js](http://example.com/js/main2.js)
[http://example.com/index.php](http://example.com/index.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T21:12:35.387

偏移量的语法是：

`offset: -50`

不是：

`offset {top:50}`

这可能是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:18:20.760

通过简单地在每张幻灯片的顶部添加填充来解决......不是我想象的......但它有效！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T16:08:22.840

我遇到了同样的问题，即使修复了语法，也无法让 localScroll 工作。我最终切换到另一个工具，[SmoothScroll]：[https ://github.com/cferdinandi/smooth-scroll#readme](https://github.com/cferdinandi/smooth-scroll#readme)

太棒了。尝试一下。

# php - 在 php 中导入选定的 gmail 联系人

> ID：14540539
> 
> 赞同：0
> 
> 时间：2013-01-26T19:11:30.463
> 
> 标签：php, oauth, oauth-2.0, preg-match

我正在使用 oauth 通过 gmail 导入联系人： [Import Gmail or Google contacts using Google Contacts Data API and OAuth 2.0 in PHP](http://25labs.com/import-gmail-or-google-contacts-using-google-contacts-data-api-3-0-and-oauth-2-0-in-php/)

但是，我只想显示电子邮件中包含@xyz.com 的那些结果。我尝试将 oauth.php 的最后一条语句修改为：

```
foreach ($result as $title) {
if(preg_match("/@xyz.com/",$title->attributes()->address))
echo $title->attributes()->address . "<br>";
} 
```

但我没有得到任何结果。并不是所有的联系人都被导入。我相信@xyz.com 没有得到gmail 的反馈，尽管用户已经从@xyz.com 发送和接收了邮件。谁在这里被称为联系人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:14:48.217

尝试使用[`strpos`](http://php.net/manual/en/function.strpos.php)：

```
foreach ($result as $title) 
{
    if(strpos($title->attributes()->address, '@xyz.com') !== false)
    {
        echo $title->attributes()->address . "<br>";
    }
} 
```

# c# - 菜单控件在 chrome 中无法正常工作

> ID：14540541
> 
> 赞同：1
> 
> 时间：2013-01-26T19:11:40.417
> 
> 标签：c#, asp.net, cross-browser

> **可能重复：**
> [这些 WebKit ASP：菜单修复之间的差异](https://stackoverflow.com/questions/5505433/difference-between-these-webkit-aspmenu-fixes)

当我遇到菜单控件问题时，我目前正在做一个项目。菜单控件在 IE 和 Firefox 中运行良好，但在 Chrome 中无法正常运行（下拉列表不会出现）。我寻找修复或解决方法，并找到了以下代码。

```
if (Request.UserAgent.IndexOf("AppleWebKit") > 0)
    {

        Request.Browser.Adapters.Clear();

    } 
```

我发现这个修复对我来说效果很好，但我想知道实际发生了什么，而不是仅仅把它扔到我的代码中而不理解为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:22:12.757

您可以按 F12 查看菜单在客户端上的呈现方式。

如果不添加 Request.Browser.Adapters.Clear(); **菜单使用div**呈现，但不起作用。

**通常，菜单控件使用table, tr, td**呈现。

# javascript - Html/CSS/JavaScript 删除图片预览 onmousehold

> ID：14540545
> 
> 赞同：0
> 
> 时间：2013-01-26T19:11:44.547
> 
> 标签：javascript, html, css

嗨，上下文是我正在为“mousehold”事件开发一个 jQuery 插件，它已经存在一些，但它们主要使用 intval 触发回调函数，对于这个特定的项目，我需要它在 mousemove 上触发，一切都很好，但我遇到图像问题。

我试图重现的效果是，例如，当您想要拖动并重新定位您的 facebook 缩略图个人资料图片时。

问题是，正如您在图片上看到的那样，当您拖动图片时，它会显示我不想要的图像，无论如何要避免这种情况，我也不想要它，因为我的 mouseup/out/move 事件因此无法正确触发。

[http://imageshack.us/photo/my-images/703/sanstitrebzs.png/](http://imageshack.us/photo/my-images/703/sanstitrebzs.png/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:15:53.920

如果你使用 jQuery：

```
$("image").on("selectstart dragstart", function(e) { 
     e.preventDefault();
} 
```

或 CSS 解决方案：

```
user-select: none;
-webkit-user-select: none;
-khtml-user-select: none; 
```

# qt - QtCreator：在内部断点处停止

> ID：14540550
> 
> 赞同：2
> 
> 时间：2013-01-26T19:12:02.543
> 
> 标签：qt, gdb, qt-creator, archlinux

我在 Arch Linux 上使用 Qt Creator (QtCreator2.6.1 & Qt4.8.4 64bit)，调试时出现问题。如果我运行调试版本，无论我是否设置了任何断点，Creator（或 GDB，我想）都会在标准 Qt 函数处停止并说**Stopped at internal breakpoint 2 in thread 1** .. 它总是相同的信息。

我怎样才能停止打破“内部断点”？

我在几个 Qt 函数上遇到了这个问题，但我唯一记得的唯一一个是“addWidget”。在我当前的项目中，我有一个 QMainWindow，它的中心小部件是 QGLWidget。我可以通过调用“layout()->addWidget(m_DlgCur);”向主窗口添加一个小部件 从主窗口。但是，它总是在那条线上中断。在我的一些大型项目中，它也破坏了其他功能！

为了完整起见，我已经包含了主窗口的整个代码：

```
qrpgWND::qrpgWND( QWidget *Parent )
:   QMainWindow( Parent )
,   m_CntWgt( QGLFormat(QGL::SampleBuffers|QGL::DoubleBuffer|QGL::AlphaChannel|QGL::HasOverlay), this, 0 )
,   m_Layout( NULL ), m_DlgCur( NULL )
{
    m_Layout = new QHBoxLayout();
    m_CntWgt.setLayout( m_Layout );
    setCentralWidget( &m_CntWgt );
    m_BtnCls.setText( "Exit" );
    Q_ASSERT(
        connect(    &m_BtnCls,  SIGNAL(clicked(bool)),
                    this,           SLOT(btnCls())  )
    );
    Q_ASSERT(
        connect(    &m_BtnCraft,    SIGNAL(clicked(bool)),
                    this,               SLOT(btnCraft())    )
    );
    m_Layout->addWidget( &m_BtnCls );
    m_BtnCraft.setText( "Craft" );
    m_Layout->addWidget( &m_BtnCraft );
return;
}

void qrpgWND::btnCraft()
{
    if( m_DlgCur == NULL )  {
        m_DlgCur = new qrpgDlgCrafting( &m_DlgCur, &m_CntWgt );
        layout()->addWidget( m_DlgCur );
        m_DlgCur->show();
    }
return;
} 
```

# javascript - 如何从文本框中获取元素并将它们存储在数组中

> ID：14540556
> 
> 赞同：-1
> 
> 时间：2013-01-26T19:12:28.823
> 
> 标签：javascript, jquery, arrays, associative-array

任何人都可以帮我将数据存储在从文本框中获取的数组中。我需要设计一种格式，以便在按下空格时它应该在空格字符之前显示不同的字体颜色。空格后面的元素应该和往常一样。

编辑：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
  var x = 0

  function abc() {
      var a = new Array("a", "b", "c", "d", "e", "f", "g", ..... "h", "x", "y", "z")
      document.getElementById("type").value = a[x]

      var i = document.getElementById("type").value
      var n = i.charAt(i.length - 1)
      alert(n)
      var n = i.substring(0, i.length - 1)
      document.getElementById("type").value = n.concat(a[x]);
      if (x >= 0) x++
      if (x >= 26) x = 0

  }
</script>

</head>
<body>
<!--<input type="text" name="type" id="type" size="100" onkeyup="abc()">-->

<input type="text" name="type" id="type" size="100" onkeypress="abc()">
<div id="log"></div> 
```

另一种尝试：

```
<script>
  e = jQuery.Event("keypress", {
      keyCode: 32
  });
  jQuery('#type').bind('keydown', function (e) {
      var s = e.which;
      jQuery('#log').html(e.which);

      if (s == 8) { //backspace
          alert('back space');
      }
      if (s == 32) { //space bar
          alert('space');
          var z = document.getElementById("type").value
          jQuery('#type').css({
              'color': 'blue'
          });
      }
  });
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T21:20:10.127

由于您不能在输入中具有多种颜色，因此您应该没有输入，只有一个标签，并且在用户键入时，您捕获事件并附加到该标签。

```
$("body").keypress(function (e) {
    var s = e.which;
    var c = String.fromCharCode(e.which);

    $("#log").children(":last").append(document.createTextNode(c));

    if (s == 32)  { // Space
        $("#log").children(":last").css({ 'color': 'blue' });
        $("#log").append($("<span/>"));
    }
}); 
```

这是示例：http: [//jsfiddle.net/B5wwP/](http://jsfiddle.net/B5wwP/)

只需单击结果区域并开始输入。我只完成了空格功能，您需要添加其他内容，例如退格...

# ios - 需要针对 Objective C 的 MVC 建议

> ID：14540560
> 
> 赞同：1
> 
> 时间：2013-01-26T19:12:41.040
> 
> 标签：ios, objective-c, model-view-controller

我有一个关于 MVC 的非常普遍的问题。我有一个应用程序，它使用标签栏控制器来显示来自网络服务的不同类型的数据。

我有一个“模型”类，它完成所有脏活，比如获取数据并修改它以进行演示，但我在每个 MVC 中都实例化了该类。这就是问题所在。例如，应用程序的两个选项卡是销售和评论。当应用程序启动时，我希望它获取并显示销售，如果有新评论，还获取评论并在评论选项卡上放置一个徽章。

该获取过程涉及从 Web 服务中提取数据、将其存储到核心数据、从缓存中提取、比较等。当用户点击评论时，它会变得很难看，但他们仍在“销售”选项卡中获取数据（仅用于该徽章）。当评论出现时，Sales MVC 已经死了，我不能告诉它任何事情来防止它搞砸。

我的问题是，如何使“大脑”类独立于 MVC？这意味着我不想为每个 MVC 拥有一个大脑（这没有任何意义），但对所有 MVC 只拥有一个大脑并使用委托来推送数据和徽章之类的东西？我曾考虑将 UITabBarController 子类化并将大脑类放在那里，但我不确定这样做是否是一个好习惯。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:36:33.910

子类化绝对没有问题`UITabBarController`。继续并在那里放置获取逻辑。获取后，您可以更新选项卡控制器和选项卡徽章。

PS 在我的应用程序中，我只是简单地将逻辑放在第一个选项卡控制器中，然后更新其他访问它的选项卡控制器，例如`self.tabBarController.tabBar.items[1]`.

此外，我添加到除第一个以外的选项卡控制器：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(contextDidChange:)
                                             name:NSManagedObjectContextObjectsDidChangeNotification
                                           object:self.managedObjectContext]; 
```

并寻找核心数据变化：

```
- (void)contextDidChange:(NSNotification *)notification
{
    dispatch_async(dispatch_get_main_queue(), ^{

        NSLog(@"%s",__PRETTY_FUNCTION__);

        assert([NSManagedObjectContextObjectsDidChangeNotification isEqual:notification.name]);
        for (NSManagedObject *mo in [notification.userInfo objectForKey:NSUpdatedObjectsKey])
        {
            if ([mo isKindOfClass:[Place class]]) {
         ...
        }
} 
```

# mysql - 如何在每 XX:50 秒安排一次 MySQL 事件？

> ID：14540561
> 
> 赞同：1
> 
> 时间：2013-01-26T19:12:44.307
> 
> 标签：mysql, database

我有一个带有字段名称结果的 MySQL 表。我想使用一个事件**在每 XX:50**秒执行一次，并通过随机数更新字段的值。

需要有关每 XX:50 秒的语法的帮助。

我试过这个查询。

```
CREATE EVENT `testEvent` 
ON  SCHEDULE EVERY 50 SECOND 
DO BEGIN

SET @A := (SELECT MAX(`id`) FROM `table`);

UPDATE `table` SET `field` = (RAND()*18) WHERE `id` = @A;   

END 
```

使用此查询第一次更新在 00:00:50 完成，然后下一次更新将在 00:01:40、00:02:30 等完成。

但我想在 00:00:50、00:01:50、00:02:50 等执行它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T19:41:38.717

[MySql 事件](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)

每 50 秒执行一次更新：

```
CREATE EVENT myevent
ON SCHEDULE EVERY 50 SECOND
DO
   UPDATE yourdb.yourtable SET yourcolumn = RAND(); 
```

每 2 分 50 秒执行一次：

```
CREATE EVENT myevent
ON SCHEDULE EVERY '2:50' MINUTE_SECOND
DO
   UPDATE yourdb.yourtable SET yourcolumn = RAND(); 
```

用于`SHOW PROCESSLIST`检查是否启用了事件调度程序。如果它打开，您应该看到`Daemon`用户“ ”的进程“ `event_scheduler`”。`SET GLOBAL event_scheduler = ON;`如果当前未启用，则用于启用调度程序。[有关在此处](http://dev.mysql.com/doc/refman/5.1/en/events-configuration.html)配置事件调度程序的更多信息

# erlang - 从erlang中的字符串中提取数据

> ID：14540562
> 
> 赞同：0
> 
> 时间：2013-01-26T19:12:47.197
> 
> 标签：erlang

我用这种语法声明了 Line 变量：

Line =“1;nabil;chouaib;法国;27”,

我想声明 5 个变量：**Id 、 Firsname 、 lastname 、 address 、 age**

Id 应包含 1 Firsname 应包含 nabil 姓应包含 chouaib 地址应包含 france 年龄应包含 27

所以我必须解析变量**Line的内容**

在这种情况下，分隔符是**;**

我有这个功能：

```
test()->

    ForEachLine = fun(Line,Buffer)-> 
                          io:format("Line: ~s~n",Line),

                          [IdStr, FirstnameStr, LastnameStr, AddressTr, AgeStr] = string:tokens(Line, ";"),
   Buffer end,

 InitialBuffer = [],

 csv:parse("/var/lib/mysql/test/person1.csv",ForEachLine,InitialBuffer). 
```

但是当我执行测试功能 T 有这个错误：

```
1> model:test().
Line: 1;nabil;chouaib;france;27
** exception error: no match of right hand side value [["1;nabil;chouaib;france;27"]]
     in function  model:'-test/0-fun-0-'/2
     in call from csv:start_parsing/3 
```

问题与此行有关：

```
[IdStr, Firstname, Lastname, Address, AgeStr] = string:tokens(Line, ";") 
```

我认为**Line**的类型不是字符串（但在错误之前的控制台中显示此行 `Line: 1;nabil;chouaib;france;27`）

所以我应该只知道**Line的类型**

csv.erl 模块是：

```
%%% --- csv parser in Erlang. ------
%%% To help process large csv files without loading them into
%%% memory. Similar to the xml parsing technique of SAX

-module(csv).
-compile(export_all).

parse(FilePath,ForEachLine,Opaque)->
    case file:open(FilePath,[read]) of
        {_,S} ->
            start_parsing(S,ForEachLine,Opaque);
        Error -> Error
    end.

start_parsing(S,ForEachLine,Opaque)->
    Line = io:get_line(S,''),
    case Line of
        eof -> {ok,Opaque};
        "\n" -> start_parsing(S,ForEachLine,Opaque);
        "\r\n" -> start_parsing(S,ForEachLine,Opaque);
        _ -> 
            NewOpaque = ForEachLine(scanner(clean(clean(Line,10),13)),Opaque),
            start_parsing(S,ForEachLine,NewOpaque)
    end.

scan(InitString,Char,[Head|Buffer]) when Head == Char -> 
    {lists:reverse(InitString),Buffer};
scan(InitString,Char,[Head|Buffer]) when Head =/= Char ->
    scan([Head|InitString],Char,Buffer);
scan(X,_,Buffer) when Buffer == [] -> {done,lists:reverse(X)}.
scanner(Text)-> lists:reverse(traverse_text(Text,[])).

traverse_text(Text,Buff)->
    case scan("",$,,Text) of
        {done,SomeText}-> [SomeText|Buff];
        {Value,Rem}-> traverse_text(Rem,[Value|Buff])
    end.

clean(Text,Char)-> 
    string:strip(string:strip(Text,right,Char),left,Char). 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T20:04:49.547

[您可以使用string:tokens/2](http://www.erlang.org/doc/man/string.html#tokens-2)函数将字符串拆分为字符串列表，并[模式匹配](http://www.erlang.org/doc/reference_manual/patterns.html)列表以提取变量：

```
1> [IdStr, Firstname, Lastname, Address, AgeStr] = string:tokens(Line, ";").
["1","nabil","chouaib","france","27"] 
```

然后可以使用[list_to_integer/1](http://www.erlang.org/doc/man/erlang.html#list_to_integer-1)函数将 IdStr 和 AgeStr 转换为整数：

```
2> Id = list_to_integer(IdStr).
1
3> Age = list_to_integer(AgeStr).
27 
```

# java - 修改 Minecraft 错误

> ID：14540564
> 
> 赞同：1
> 
> 时间：2013-01-26T19:12:54.843
> 
> 标签：java, minecraft

各位程序员，大家好，今天，我一直在观看和阅读 Minecraft 改装教程。它进展顺利，除了我的代码中有一个奇怪的错误。

我正在创建“翡翠工具”，它基本上是常规工具的重新纹理化和 OP:ed 版本。

到目前为止，我已经学会了如何制作不同的工具集（剑、镐、斧头、铲子和锄头），但每当我想在游戏中制作工具时，我都会得到意想不到的结果。例如，当我制作斧头时，它变成了镐，要查看我在说什么树篱，请查看我的源代码，如果您有可用的 ModLoader 和 MCP，请编译。

```
package net.minecraft.src;
import java.util.Random;

public class mod_minecraft extends BaseMod //Main modding file, extends BaseMod
{

public static final Item mew = new ItemMew(2085).setItemName("Mew"); //Mew, Item tutorial.
public static final Item EmeraldSword = new ItemSword(3077, EnumToolMaterial.MCM).setItemName("EmeraldSword"); //Emerald Sword, sword tutorial
public static final Item EmeraldPickaxe = new ItemPickaxe(2102, EnumToolMaterial.MCM).setItemName("EmeraldPickaxe"); //Emerald Pick
public static final Item EmeraldAxe = new ItemAxe(2096, EnumToolMaterial.MCM).setItemName("Emerald Axe");
public static final Item EmeraldShovel = new ItemSpade(2107, EnumToolMaterial.MCM).setItemName("Emerald Shovel");
public static final Item EmeraldHoe = new ItemHoe(2099, EnumToolMaterial.MCM).setItemName("Emerald Shovel");

public void load()
{

//Mew
mew.iconIndex = ModLoader.addOverride("/gui/items.png", "/items/151Mew.png");
ModLoader.addName(mew, "Mew");
//

//Emerald Sword
EmeraldSword.iconIndex = ModLoader.addOverride("/gui/items.png" , "/items/greensword.png");
ModLoader.addName(EmeraldSword, "Emerald Sword");
ModLoader.addRecipe(new ItemStack(EmeraldSword, 1), new Object[]
{
" * ", " * ", " X ",
'X', Item.stick, '*', Item.emerald
});
//

///Emerald pickaxe
EmeraldPickaxe.iconIndex = ModLoader.addOverride("/gui/items.png", "/items/greenpick.png");
ModLoader.addName(EmeraldPickaxe, "Emerald Pickaxe");
ModLoader.addRecipe(new ItemStack(EmeraldPickaxe, 1), new Object[]
{
"***", " X ", " X ",
'X', Item.stick, '*', Item.emerald
});
//

//Emerald Axe
EmeraldAxe.iconIndex = ModLoader.addOverride("/gui/items.png", "/items/greenaxe.png");
ModLoader.addName(EmeraldAxe, "Emerald Axe");
ModLoader.addRecipe(new ItemStack(EmeraldPickaxe, 1), new Object[]
        {
    "** ", "*X ", " X ",
    'X', Item.stick, '*', Item.emerald
        });
//

//Emerald Shovel
EmeraldShovel.iconIndex = ModLoader.addOverride("/gui/items.png", "/items/greenshovel.png");
ModLoader.addName(EmeraldShovel, "Emerald Shovel");
ModLoader.addRecipe(new ItemStack(EmeraldShovel, 1), new Object []
{
    " * ", " X ", " X ",
    '*', Item.emerald, 'X', Item.stick
});
//

//Emerald Hoe
EmeraldHoe.iconIndex = ModLoader.addOverride("/gui/items.png", "/items/greenhoe.png");
ModLoader.addName(EmeraldHoe, "Emerald Hoe");
ModLoader.addRecipe(new ItemStack(EmeraldHoe, 1), new Object []
{
    "** ", " X ", " X ", 
    'X', Item.stick, '*', Item.emerald
});
//

}

public String getVersion()
{
return "3.14159265";
} 
```

如果您想知道，我的第一个“测试”项目是 Mew（传说中的口袋妖怪：D）的像素化版本，出于某种原因，我仍然在代码中实现了它。

怎么了？我可以正确构建的唯一工具是剑，所有其他工具都有不同的制作方法/没有方法。

如果你不理解下面的源代码并且你是一个不错的程序员，别担心，这就是我的世界，你显然没有尝试过。

我正在使用 ModLoader 和 MCP（Minecraft Coder Pack。

如果您想知道，我能够编译代码，只是制作表给出了意想不到的结果。

感谢所有答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:17:39.147

马上，您的**斧头**制作配方是：

`    ModLoader.addRecipe(new ItemStack(Emerald**Pickaxe**, 1), new Object[] { "** ", "*X ", " X ", 'X', Item.stick, '*', Item.emerald });`

既然你说镐，你就会有问题。我的猜测是镐和它之后的所有东西都会受到那个错字的影响。

# capybara - Ruby/Capybara：我们可以使用 Cucumber 和 Capybara&selenium 自动化 Omniture 测试用例吗？

> ID：14540566
> 
> 赞同：0
> 
> 时间：2013-01-26T19:13:06.547
> 
> 标签：capybara

我们可以使用 Cucumber 和 Capybara&selenium 自动化 Omniture 测试用例吗？如果可以，任何人都可以告诉我步骤是什么。很多天以来，我一直在努力自动化生成事件但不知道如何自动化的 Omniture 测试用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:35:44.923

您应该可以通过浏览器访问 javascript 变量。访问您的站点并打开控制台。输入 s.events 并查看值是什么。因此，假设您想在用户单击按钮后使用值填充 s.events，但您不想触发页面加载事件，只要您知道单击和页面加载事件的值应该是什么那么您的测试将如下所示：

```
Given I visit a page
When I click a button
Then I should see "this" and not "that"

Then /^I should see "(.*?)" and not "(.*?)"$/ do |good, bad|
   events = page.evaluate_script("s.events")
   events.should include(good), "expected events to include #{good} but saw #{events}"
   events.should not_include(bad), "did not expect to see #{bad} in events" 
```

# python - 4D 数组的 Numpy 加权平均值，具有 2D 权重数组，没有列表理解

> ID：14540569
> 
> 赞同：3
> 
> 时间：2013-01-26T19:13:15.803
> 
> 标签：python, multidimensional-array, numpy

（这个问题类似于[Numpy 平均沿轴的多维权重](https://stackoverflow.com/questions/14508570/numpy-averaging-with-multi-dimensional-weights-along-an-axis)，但更复杂。）

我有一个 numpy 数组`d`,`d.shape=(16,3,90,144)`和一个 numpy 权重数组`e`, `e.shape=(16,3)`。我想`a`使用沿轴 1的加权平均值`e`。所以输出应该是一个形状为 numpy 的数组`(16,90,144)`。我可以通过列表理解来完成此操作：

```
np.array([np.average(d[n], weights=e[n], axis=0) for n in range(16)]) 
```

但与上一个问题一样，我想避免将列表转换回 numpy 数组。这种情况比前一个问题更复杂，因为每次的权重都不相同（即`weights=e[n]`，不`weights=b`）。

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T19:25:16.670

直接使用就好了`np.average`。但是，要这样做，`d`权重`e`必须具有相同的形状，并且广播不会在这里为您隐式完成。

显式广播`e`（使用`np.broadcast_arrays`）使其具有`d`尽可能相同的形状，但会浪费内存。因此，与其这样做，不如看看[定义 numpy.average 的源代码](https://github.com/numpy/numpy/blob/master/numpy/lib/function_base.py#L412)并尝试重现计算：

```
In [121]: d = np.random.random((16,3,90,144))

In [122]: e = np.random.random((16,3))

In [123]: f = e[:,:,None,None]

In [124]: scl = f.sum(axis = 1)

In [125]: avg = np.multiply(d,f).sum(axis = 1)/scl 
```

下面检查计算返回的结果是否与列表推导式相同：

```
In [126]: avg_lc = np.array([np.average(d[n], weights=e[n], axis=0) for n in range(d.shape[0])])

In [127]: np.allclose(avg, avg_lc)
Out[127]: True 
```

# postgresql - 如何让 psql 从 shell 在 ubuntu 中工作： $ psql -U admin -d mydb

> ID：14540570
> 
> 赞同：9
> 
> 时间：2013-01-26T19:13:39.853
> 
> 标签：postgresql

显然，这是一个很难问的问题，因为尽管它很简单，但似乎没有人回答它。

我在 ubuntu 12.10 服务器（无 GUI）上运行 PostgreSQL。

我的目标——我的问题——是创建一个名为“mydb”的数据库和一个用户“admin”，这样我就可以从 shell 以普通用户的身份给出这个命令并连接到数据库：

> $ psql -U 管理员 -d mydb

但我无法在任何地方找到答案。

我可以通过 su'ing 并运行*psql*命令以用户*postgres身份登录：*

 *```
$ sudo su -m postgres
postgres@baseubu1210dev:~$ psql
psql (9.1.7)
Type "help" for help.

postgres=# 
```

我已经想出了如何创建一个名为“mydb”的数据库和一个用户“admin”，这样：

```
postgres=# \du
 Role name |                 List of roles Attributes       | Member of 
-----------+------------------------------------------------
 admin     | Superuser, Create role, Create DB              | {}
 postgres  | Superuser, Create role, Create DB, Replication | {} 
```

我还*没有*弄清楚如何确保用户“admin”可以连接到“mydb”数据库——也许拥有这种权限的人不需要？[在我写的时候，我注意到我可能应该撤销管理员的超级用户权限。]

我真正想知道的是如何从*普通用户的 shell*连接：

```
$ psql -U postgres
psql: FATAL:  Peer authentication failed for user "postgres" 
```

我误解了关于运行 postgreSQL 的一些不成文的假设，但是几个小时的搜索、查看教程等并没有解决问题。如果有人说这已经得到了回答，我会非常高兴，尤其是如果已经回答了。我假设并希望答案很简单，并感谢您的帮助。

谢谢，格

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T19:21:31.470

从错误消息看来，身份验证设置似乎没有正确设置。

除了数据库本身的设置之外，PostgreSQL 还使用一个配置文件 (pg_hba.conf) 来指定每个用户、主机和数据库可以使用哪些身份验证机制。您可以指定用户只能通过密码/md5 密码甚至“无需身份验证”进行连接

当前，您的配置可能对所有用户使用“Peer”身份验证，这仅意味着：仅当该用户是当前登录的用户时才允许该用户（例如，您的外壳用户也应称为“管理员”）。从您的问题来看，这*不是*您想要的，您可能想要使用密码或 md5 身份验证机制。

我认为这些页面将为您提供所需的答案：

[http://web.archive.org/web/20131001194046/http://blog.deliciousrobots.com/2011/12/13/get-postgres-working-on-ubuntu-or-linux-mint/](http://web.archive.org/web/20131001194046/http://blog.deliciousrobots.com/2011/12/13/get-postgres-working-on-ubuntu-or-linux-mint/)（存档版本）

官方文档：

[http://www.postgresql.org/docs/current/static/auth-pg-hba-conf.html](http://www.postgresql.org/docs/current/static/auth-pg-hba-conf.html)

修改pg_hba.conf文件后记得重新加载postgresql！

**更新**

我提到的原始博客文章现已离线，链接现在指向存档版本。感谢@O_the_Del 的报告。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T03:46:18.200

在 Debian 上，PostgreSQL 默认在 localhost 上侦听，因此如果您在 pg_hba.conf 中有一个允许 TCP/IP 连接的规则，那么您可以使用 -h 参数来匹配该规则：

```
psql -U admin -h localhost mydb 
```*

# c++ - 风寒因子

> ID：14540571
> 
> 赞同：1
> 
> 时间：2013-01-26T19:13:49.970
> 
> 标签：c++

试图用 C++ 编写风寒因子方程，但我的方程和返回值有问题。

这是出现错误的函数。

```
void eqfunction(int temperature, int windspeed){
    int windindex;
    windindex = 35.74 + (0.6215 * temperature);
    windindex = windindex - (35.75 * windspeed^0.16);
    windindex = windindex + ((0.4275 * temperature)*windspeed^0.16);
    return windindex;
} 
```

**编辑**：（Ed.）在按照答案中给出的建议修复功能后，会出现新的错误：

```
float windChillFactor(float temperature, float windspeed){
    float windindex = 35.74f + 0.6215f * temperature;
    windindex -= 35.75f * std::pow(windspeed, 0.16f);
    windindex += 0.4275f * temperature * std::pow(windspeed, 0.16f);
    return windindex;
} 
```

我知道有两件事我做错了，我只是不知道如何解决它们。显然它是“^”和我的返回值。我将如何从 0.16 为风速创建一个正方形？我将如何创建正确的 windindex 返回值？

这些是我的错误

```
1>c:\users\ryan\desktop\final.cpp\final.cpp\final project.cpp(18):
  warning C4244: 'argument' : conversion from 'int' to 'float',
  possible loss of data
1>c:\users\ryan\desktop\final.cpp\final.cpp\final project.cpp(18):
  warning C4244: 'argument' : conversion from 'int' to 'float',
  possible loss of data
1>c:\users\ryan\desktop\final.cpp\final.cpp\final project.cpp(18):
  error C2440: '=' : cannot convert from 'void' to 'int'
1>          Expressions of type void cannot be converted to other types
1>c:\users\ryan\desktop\final.cpp\final.cpp\final project.cpp(22):
  error C2556: 'float eqfunction(float,float)' : overloaded function differs
  only by return type from 'void eqfunction(float,float)'
1>          c:\users\ryan\desktop\final.cpp\final.cpp\final project.cpp(6) :
            see declaration of 'eqfunction'
1>c:\users\ryan\desktop\final.cpp\final.cpp\final project.cpp(22):
  error C2371: 'eqfunction' : redefinition; different basic types
1>          c:\users\ryan\desktop\final.cpp\final.cpp\final project.cpp(6) :
            see declaration of 'eqfunction' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T19:30:44.967

虽然您没有包含编译器给出的错误消息（您应该始终这样做），但我看到的错误如下：

* * *

```
void eqfunction(int temperature, int windspeed){ 
```

*   错误：您的函数返回一个值。`void`函数是不返回任何内容的函数，在其他一些编程语言中也称为“过程”。因为要返回实数，所以可能要使用`float`（也有`double`and `long double`，但在日常使用中，`float`通常足够精确）。
*   设计错误：温度和风速是实数，所以你的函数不应该取`int`但是`float`
*   给你的函数一个描述性的名字是很好的做法，就像你对变量名所做的那样（与 C 不同，在 C++ 中，*不*使用记忆函数名更常见）

* * *

```
 int windindex; 
```

*   始终初始化内置类型是一种很好的做法
*   您正在使用实数类型计算最终结果，但如果您用于`int`存储中间结果，则可能会丢失重要信息（将实数类型分配给整数类型时，小数部分被丢弃）；所以代替`int`, 使用`float`

* * *

```
 windindex = 35.74 + (0.6215 * temperature);
    windindex = windindex - (35.75 * windspeed^0.16);
    windindex = windindex + ((0.4275 * temperature)*windspeed^0.16); 
```

*   错误：运算符`^`是 C++ 中的按位异或运算符。power函数是C++中的一个库函数，即`std::pow(x,y)`从头`cmath`文件
*   算术运算`a = a + something`, `a = a - something`,`a = a * something`和`a = a / something`可以简化为`a += something`, 其他的也一样
*   在 C++ 中，形式中的文字`1.0`表示一个`double`值，而形式中的文字`1.0f`表示一个`float`值

* * *

```
 return windindex;
} 
```

*   没关系。

* * *

因此，考虑到这些要点，这可能更适合您的需求：

```
#include <cmath>

float windChillFactor(float temperature, float windspeed){
    float windindex = 35.74f + 0.6215f * temperature;
    windindex -= 35.75f * std::pow(windspeed, 0.16f);
    windindex += 0.4275f * temperature * std::pow(windspeed, 0.16f);
    return windindex;
} 
```

请注意，由于运算符优先级，`*`并且在and`/`之前进行了评估，因此不需要括号。`+``-`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T19:19:52.193

这是可能的错误：

```
windspeed^0.16 
```

在 C++ 中，`^`是按位异或 (XOR) 运算符。

您可能的意思是提高`windspeed`的力量`0.16`，您可以使用`std::pow`：

除此之外，你的函数应该返回 void 以外的东西。看起来它应该返回 float 或 double，`windindex`而不应该是`int`，而是一些浮点类型。`+=`最后，您可以使用and稍微简化表达式`-=`：

```
#include <cmath> // for std::pow
double eqfunction(int temperature, int windspeed)
{
    double windindex = 35.74 + 0.6215 * temperature;
    windindex -= 35.75 * std::pow(windspeed, 0.16);
    windindex += 0.4275 * temperature * std::pow(windspeed, 0.16);
    return windindex;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T19:19:27.163

```
double eqfunction(int temperature, int windspeed)
{
    double windindex = 35.74 + 0.6215 * temperature;
    windindex -= 35.75 * std::pow(windspeed, 0.16);
    windindex += 0.4275 * temperature * std::pow(windspeed, 0.16);
    return windindex;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T19:19:20.370

```
double eqfunction(int temperature, int windspeed){
    double windindex;
    windindex = 35.74 + (0.6215 * temperature);
    windindex = windindex - (35.75 * pow(windspeed,0.16));
    windindex = windindex + ((0.4275 * temperature)*pow(windspeed,0.16));
    return windindex;
} 
```

# php - 获取登录用户的用户名

> ID：14540572
> 
> 赞同：1
> 
> 时间：2013-01-26T19:14:00.137
> 
> 标签：php, session

我想获取登录用户的用户名，以便我可以将其与我的表单一起插入数据库，以便我可以将插入的数据与登录用户相关联..任何想法？

```
 <?php 
require_once("models/config.php");
securePage($_SERVER['PHP_SELF']);
?>

<form action="" method="post" enctype="multipart/form-data">
<label  for="file"><font  size="5"><b>Choose Photo:</b></font></label>
<input type="file" name="file" onchange="file_selected = true;" required><br>
Last Name:<input  type="text" name="fname" required><br> 
Last Name:<input  type="text" name="lname" required><br> 
Age:<input type="text" name="age" required><br>
<input id="shiny" type="submit" value="Submit" name="submit">
</form> 
```

这是我的插入查询..如您所见，我没有指定任何值，`$username`这是我的问题，我应该放什么？

```
$photo= "pictures/" . $_FILES["file"]["name"];
$fname = $_POST["fname"];
$lname = $_POST["lname"];
$age   =$_POST["age"];
$username = ?
$stmt = $mysqli->prepare("INSERT INTO photos (Firstname, Lastname, Age, author) VALUES (?, ?, ?, ?, ?)");

// TODO check that $stmt creation succeeded

// "s" means the database expects a string
$stmt->bind_param("ssss", $photo, $fname, $lname, $age, $username);

$stmt->execute();

$stmt->close();

$mysqli->close(); 
```

这就是我在 config.php 中的内容...

```
<?php
require_once("db-settings.php"); //Require DB connection

//Retrieve settings
$stmt = $mysqli->prepare("SELECT id, name, value
FROM ".$db_table_prefix."configuration");   
$stmt->execute();
$stmt->bind_result($id, $name, $value);

while ($stmt->fetch()){
$settings[$name] = array('id' => $id, 'name' => $name, 'value' => $value);
}
$stmt->close();

//Set Settings
$emailActivation = $settings['activation']['value'];;
$mail_templates_dir = "models/mail-templates/";
$websiteName = $settings['website_name']['value'];
$websiteUrl = $settings['website_url']['value'];
$emailAddress = $settings['email']['value'];
$resend_activation_threshold = $settings['resend_activation_threshold']['value'];
$emailDate = date('dmy');
$language = $settings['language']['value'];
$template = $settings['template']['value'];

$default_hooks = array("#WEBSITENAME#","#WEBSITEURL#","#DATE#");
$default_replace = array($websiteName,$websiteUrl,$emailDate);

if (!file_exists($language)) {
$language = "models/languages/en.php";
}

if(!isset($language)) $langauge = "models/languages/en.php";

//Pages to require
require_once($language);
require_once("class.mail.php");
require_once("class.user.php");
require_once("class.newuser.php");
require_once("funcs.php");

session_start();

//Global User Object Var
//loggedInUser can be used globally if constructed
if(isset($_SESSION["userCakeUser"]) && is_object($_SESSION["userCakeUser"]))
{
$loggedInUser = $_SESSION["userCakeUser"];
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:18:00.790

当用户登录时，为什么不将其保存为 Session 变量，然后访问它？

例如：

```
//Login page
//After user is authenticated

session_start();
$_SESSION['username'] = $username 

//$username is whatever you grabbed as the supplied login details 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:19:54.720

我认为从您的代码中您会使用

```
$loggedInUser = $_SESSION["userCakeUser"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T19:21:35.263

据我了解：您需要在表“照片”中添加其他列，列名将是：用户 ID 而不是用户名，因为最好依赖于用户的键 ID 而不是名称。

然后，像任何其他插入一样，将新列添加到查询中。

现在，您可以尝试使用当前选项，将用户名字段添加到表中，值为：$_SESSION["userCakeUser"];

# node.js - 节点js将上下文传递给回调

> ID：14540575
> 
> 赞同：5
> 
> 时间：2013-01-26T19:14:13.490
> 
> 标签：node.js

我正在使用 node.js。我有这个 handlers.js 文件：

```
exports.Handlers = function(prefix) {
    this.prefix = prefix;
    this.db = new DBInstance();
};

exports.Handlers.prototype.getItemById = function(id) {
    var item = this.db.getItemById(id, function(error, item) {
        item.name = this.prefix + item.name;
        ...
        ...
    });
}; 
```

当我打电话时：

```
var h = new Handlers();
h.getItemById(5); 
```

我收到一个错误，因为上下文不是处理程序并且 this.prefix 不存在。我可以用这个来修复它：

```
exports.Handlers.prototype.getItemById = function(id) {
    var scope = this;
    var item = this.db.getItemById(id, function(error, item) {
        item.name = scope.prefix + item.name;
        ...
        ...
    });
}; 
```

有没有更好的方法将上下文传递给回调？将上下文传递给回调的nodejs常用方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-26T19:57:41.237

Node 实现了 ECMAScript 5，它具有[`Function.bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind).

我认为这就是你要找的。

```
exports.Handlers.prototype.getItemById = function(id) {
    var item = this.db.getItemById(id, (function(error, item) {
        item.name = this.prefix + item.name;
        ...
        ...
    }).bind(this)); //bind context to function
}; 
```

这可行，但是当使用闭包作为回调时，就像您正在做的那样，最常见的方法是将上下文存储在可以在闭包中使用的变量中。

这种方法更常见，因为多次回调可能很深，`bind`每次回调的调用可能很重；而定义`self`一次很容易：

```
SomeObject.prototype.method = function(id, cb) {
    var self = this;
    this.getSomething(id, function(something) {
        //self is still in scope
        self.getSomethingElse(something.id, function(selse) {
            //self is still in scope and I didn't need to bind twice
            self.gotThemAll(selse.id, cb);
        });
    });
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:33:10.440

This problem is not related to Node.js, it's a general problem in JavaScript - and you already figured out the usual solution in JavaScript: Bind the `this` context to another variable (the one that you called `scope`), and use that within the callback to access the outer context.

Common names for this variable include `that` and `self`.

There *may* be a solution in ECMAScript 6 (codename "harmony") with the so-called *fat-arrow operator* that binds a function to an outer context. If you want to play with it today you might want to check out [TypeScript](http://www.typescriptlang.org/), a pre-compiler for JavaScript made by Microsoft which focuses on ES6-compatible syntax. Then your callback becomes something such as

```
foo(() => { console.log(this.bar); }); 
```

instead of:

```
var that = this;
foo(function () { console.log(that.bar); }); 
```

Just for the sake of completeness: jQuery's (and other frameworks) `bind` function generally works similar. See [http://api.jquery.com/bind/](http://api.jquery.com/bind/) for an example.

HTH.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-26T19:31:42.400

That is the common way. You will find your `scope` var named `self` or `_self`.

Later edit:

If you want to call a function within another context, this is the way:

```
getItemById.call(context, vars); 
```

# jquery - jquery 将 div 内容与插件中的操作交换

> ID：14540578
> 
> 赞同：2
> 
> 时间：2013-01-26T19:14:43.040
> 
> 标签：jquery

我知道这应该是一件容易的事情......我想交换 2 个 div 的内容，并将保持动作绑定到每个元素。现在我有这个：

```
<div class="From">
    //something here, doesnt matter
</div>

<div class="To">
    //something here, doesnt matter
</div>
....
function switchElems() {
    var from = $( ".From" );
    var to = $( ".To" );
    var fromHtml = from.html();
    var toHtml = to.html();
    from.html( toHtml );
    to.html( fromHtml );
} 
```

但它只切换内容，解除与内部元素相关的每个动作。操作是指包含在内容中的整个逻辑，并附加了其他插件。例如，在带有类`from`的 div 中，`input`绑定了 jQuery geocomplete 插件。切换 elems 后，我希望该输入仍然具有地理完整功能，但现在`input`应该在`div`named中`To`。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T19:17:47.917

使用[事件委托](http://api.jquery.com/on/)将事件绑定到每个 div 内的元素。这样，即使您更改了`div`的 HTML，事件侦听器也将起作用。

例如：

```
$('#from').on('click', '.my-element', handler); 
```

在这种情况下，如果您更新 #from 的内容并且新的 my-elements 出现在其中，它们将具有处理程序

也是`switch`JavaScript 中的一个保留词，你不应该将你命名为 function `switch`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:23:30.700

一方面，你的课程最后`"`不见了

html:

```
<div class="From">
    //something here, doesnt matter
</div>
<div class="To">
     //something here, doesnt matter
 </div> 
```

Javascript：

```
$('class_or_id').change(function(){
     var from = $( ".From" );
     var to = $( ".To" );
     var fromHtml = from.html();
     var toHtml = to.html();
     from.html( toHtml );
     to.html( fromHtml );
}); 
```

或者

```
$('class_or_id').click(function(){
     var from = $( ".From" );
     var to = $( ".To" );
     var fromHtml = from.html();
     var toHtml = to.html();
     from.html( toHtml );
     to.html( fromHtml );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T21:07:17.857

如果要保留元素，请不要使用`html()`，它将所有内容转换为字符串，而是移动本机元素：

```
$('class_or_id').click(function(){
    var from = $(".From"),
        to = $(".To"),
        fromContents = from.contents(),
        toContents = to.contents();

    to.append(fromContents);
    from.append(toContents);
}); 
```

# html - 嵌入无透明背景的 SWF 视频

> ID：14540581
> 
> 赞同：1
> 
> 时间：2013-01-26T19:15:12.907
> 
> 标签：html, video, flash, transparency

我一直在努力嵌入 SWF 视频，以便其跨浏览器友好。此时我一直在使用[Kroc Camen 的方法](http://camendesign.com/code/video_for_everybody#video-encode)。因此，我将视频转换为 mp4、ogv 并创建一个 img 作为辐射图像（如果不支持）。

我遇到的问题是图像仅占总分辨率 500x500 的一半。在使用 SWF 文件之前，背景被视为透明并且看不到白色背景。现在它会产生令人不安的效果，并且与背景不匹配。你能给我建议如何进行吗？如何使该背景在所有格式中都是透明的？

![在此处输入图像描述](../Images/d721b069fed7f066811bfbbd5a992b18.png)

它让我很头疼：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:13:35.670

有[一个](http://hacks.mozilla.org/2009/06/tristan-washing-machine/)解决方案，但是我认为在这种情况下很难实现，我建议只将页面背景设置为白色。

您可能想看看这个问题：[我可以使用 HTML5 视频标签制作具有透明背景的视频吗？](https://stackoverflow.com/questions/4073303/can-i-have-a-video-with-transparent-background-using-html5-video-tag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:40:50.110

由于技术原因，我的问题似乎没有答案。似乎他们还没有发明一种系统来让视频具有透明背景。SWF 现在确实支持它，所以它们是我唯一的手段。如果有人找到另一种解决方案，请告诉我。

最后，我的解决方案是一种解决方法。对于 Ipad，我创建了带有动画图像后备的 flash 内容。这意味着使用其他设备他们将能够看到动画，但不能看到动画本身。因此，我创建了以下“解决方案”：

```
<div id="flashContent">
            <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="500" height="500" id="ani.rosa1">
                <param name="movie" value="_swf/ani-rosa.swf" />
                <param name="quality" value="best" />
                <param name="bgcolor" value="#ffffff" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="transparent" />
                <param name="scale" value="showall" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="sameDomain" />
                <!--[if !IE]>-->
                <object type="application/x-shockwave-flash" data="_swf/ani-rosa.swf" width="500" height="500">
                    <param name="movie" value="_swf/ani-rosa.swf" />
                    <param name="quality" value="best" />
                    <param name="bgcolor" value="#ffffff" />
                    <param name="play" value="true" />
                    <param name="loop" value="true" />
                    <param name="wmode" value="transparent" />
                    <param name="scale" value="showall" />
                    <param name="menu" value="true" />
                    <param name="devicefont" value="false" />
                    <param name="salign" value="" />
                    <param name="allowScriptAccess" value="sameDomain" />
                <!--<![endif]-->
                    <img src="_swf/ani.rosa1.png" alt="Get Adobe Flash player" />
                <!--[if !IE]>-->
                </object>
                <!--<![endif]-->
            </object>
        </div> 
```

# c# - 我可以创建碰撞遮罩吗？

> ID：14540598
> 
> 赞同：1
> 
> 时间：2013-01-26T19:17:06.493
> 
> 标签：c#, xna

目前，我通过查看方形精灵的任何角是否相交来检查两个对象之间的碰撞。

我要检查像素是否相交并且它们不是目标上的透明像素。然而，这对让我走在树后不起作用。

相反，我想知道是否有一种简单的方法来使用掩码，可能存储在我可以用来检查的 .png 中。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:26:57.787

一种方法是使用图像的 alpha 通道作为遮罩，假设您只想要剪辑不透明的像素。尝试使用`Texture2D.GetData`来获取所需的图像帧并检查`.A`alpha 分量的值。

我认为旧游戏有单独的单色纹理作为蒙版，有些甚至使用二维位数组（或布尔值）。当然，这可能会更快，消耗更少的 CPU 资源，但也更难实现。

# php - 尝试访问数组索引时无法识别错误

> ID：14540600
> 
> 赞同：0
> 
> 时间：2013-01-26T19:17:15.207
> 
> 标签：php

以下php代码：

```
<?php
class foo {
   $arr = array("First","Second","Third","Fourth");
}

$obj = new foo();
echo $obj->$arr[1];
?> 
```

* * *

生成以下错误：

```
Parse error: syntax error, unexpected '$arr' (T_VARIABLE), expecting function (T_FUNCTION) in /opt/lampp/htdocs/tester.php on line 3 
```

我正在使用 php5.4 。这是什么错误？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:18:14.043

访问对象的属性时，不要使用`$`. 只会`echo $obj->arr[1]`做得很好。

编辑：另外，正如 Explosion Pills 所说，您需要指定可见性。在这种情况下，您可能想要

```
public $arr = array("First","Second","Third","Fourth"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T19:17:56.717

您需要`private|public|protected`在前面添加`$arr`

此外，访问 with`$obj->arr[1]`而不是，但`$obj->$arr[1]`实际上是有效的语法。

这是有效的语法，因为它将被插入为带有变量名的字符串。这将起作用，例如：

```
$arr = array(1 => 'arr');
$obj->$arr[1]; 
```

内插为`$obj->arr`

# css - Selector for all but first of class

> ID：14540602
> 
> 赞同：12
> 
> 时间：2013-01-26T19:17:26.817
> 
> 标签：css

HTML:

```
<ul>
    <li></li>
    <li></li>
    <li class="img"></li>        
    <li></li>
    <li class="img"></li>        
    <li class="img"></li>        
    <li></li>
</ul> 
```

CSS:

```
ul {
 list-style-type: none;   
}

li {
    background-color: red;
    margin: 5px;
    width: 30px;
    height: 30px;
    float: left;
}

li.img:not(:first-child) {
    background-color: blue;
} 
```

Result:

[http://jsfiddle.net/benfosterdev/K3ZnA/](http://jsfiddle.net/benfosterdev/K3ZnA/)

I want all but the first `li.img` to have a blue background.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-26T19:24:06.167

You cannot do this with `:not(:first-child)` because all `li.img` elements except the first `li` (no matter if it's `.img` or not) are indeed not the first child of their parent. So that selector would exclude the first `li.img` only if it were the first `li` without qualification.

However, you can do it with the [general sibling combinator](http://www.w3.org/TR/selectors/#general-sibling-combinators) `~`:

```
li.img ~ li.img {
    background-color: blue;
} 
```

This selector matches any `li.img` that is the sibling of any other `li.img` but appears after it in document order, or in other words every `li.img` but the first.

**[See it in action](http://jsfiddle.net/rbfdn/)**, and be aware that IE < 9 does not support this selector.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-26T19:23:44.433

If you want to select all other li.img and give them a different backgroundColor:

```
li.img ~ li.img {
   background-color: blue;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-26T19:40:12.867

May be, you could add a javascript like in case IE 8 (and older) or such browser does not support ~ selector as told by Jon above:

```
document.getElementsByClassName("img")[0].style.backgroundColor = "red"; 
```

# jquery - 如何使用 jQuery 更改文档中的文本？

> ID：14540614
> 
> 赞同：1
> 
> 时间：2013-01-26T19:18:26.513
> 
> 标签：jquery, html

所以最初我有以下内容，这使我可以在单击链接时更改文本：

```
<p id="message">Starting Text</p>
<a href="#" class="link">Show message #1</a><br>

<script>
   var test = 'test text';

   $(".link").click(function() {
      $("#message").text(test);
   });
</script> 
```

我怎样才能改变它，以便从 .txt 文档中提取文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:20:22.623

如果这些`.txt`文档存储在服务器上，您可以使用 AJAX 调用来检索它们的内容：

```
<script type="text/javascript">
    $(".link").click(function() {
        $.get('/some_text_document.txt', function(result) {
            $("#message").text(result);
        });
    });
</script> 
```

为您进一步阅读有关 jQuery 和 AJAX 的信息：

*   [`$.ajax()`](http://api.jquery.com/jQuery.ajax/)
*   [`$.get()`](http://api.jquery.com/jQuery.get/)
*   [`$.post()`](http://api.jquery.com/jQuery.post/)
*   [`$.getJSON()`](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:21:59.550

假设文本文件在您的服务器上，您应该使用`load`jquery 方法。

```
var url = 'content/file.txt';

$(".link").click(function() {
   $("#message").load(url);
}); 
```

# java - Eclipse 重新安装后无法再构建项目

> ID：14540622
> 
> 赞同：3
> 
> 时间：2013-01-26T19:19:26.477
> 
> 标签：java, android, eclipse, viewpagerindicator

我的笔记本电脑最近崩溃了，所以我启动并运行了一台旧台式电脑。安装了 Eclipse 和 Android SDK。

但是当我将我的 Android 项目从 Subversion 中检查到 Eclipse 中时，我收到错误提示它找不到 ViewPagerIndicator 库（我已经将它*作为*库添加到我的工作区/项目中）。

当我转到我的 Android 项目的属性时，在底部的 Android 选项卡上，并将 ViewPagerIndicator 添加为库时，它会显示一个绿色复选框：

![在此处输入图像描述](../Images/2b38df6912fee00298b404e61acaf090.png)

我单击确定，对话框消失。但是当我尝试构建时，我得到了这些错误：

```
E:\Workspace\foobar\res\values\styles.xml:4: error: Error: No resource found that matches the given name: attr 'vpiTabPageIndicatorStyle'.
E:\Workspace\foobar\res\values\styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'Widget.TabPageIndicator'. 
```

如果我回到 Android 选项卡上的项目属性，在 3 秒前有一个绿色复选框的同一个 ViewPagerIndicator 库现在有一个红色 X，并且在“项目”列中它旁边有一个问号：

![在此处输入图像描述](../Images/76356031939764d45bd043d50b6ebe69.png)

我的项目和 ViewPagerIndicator 项目都设置为使用 Java 1.6 编译，并且都针对 SDK v16。

哦，是的，相同的 Subversion 版本在我的笔记本电脑上构建得很好，所以所有文件都和以前一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:53:37.230

我觉得将其发布为我自己问题的答案是不对的，因为我仍然对自己做错的事情感到茫然，如果有的话。

但我最终从我的工作区中删除了我的项目和 ViewPageIndicator 库项目，然后将它们重新添加回来。一切正常。去搞清楚。也许这会帮助别人。

# eclipse - “无法使用所选类型创建服务器”Windows xp 上的 Eclipse Juno

> ID：14540625
> 
> 赞同：2
> 
> 时间：2013-01-26T19:19:33.940
> 
> 标签：eclipse, tomcat7, eclipse-juno

我在带有 jdk1.6.0_23 和 Tomcat 7.0 的 Windows xp 上使用 eclipse juno。直到几天前，我都能够很好地运行 web 项目。但是现在当我尝试运行 web 项目时，它显示了一些“bootstrap.jar “找不到所以我删除了下面服务器选项卡中的所有tomcat运行环境。然后当我尝试再次创建时，它显示“无法使用所选类型创建服务器”当我谷歌时我发现解决方案仅适用于linux，unix os但不是WinXP :(如何在Windows xpo上解决这个问题提前谢谢

# design-patterns - 什么时候服务定位器方法变得更受欢迎？

> ID：14540626
> 
> 赞同：1
> 
> 时间：2013-01-26T19:19:40.963
> 
> 标签：design-patterns, factory-pattern

要实现控制反转，可以使用服务定位器或依赖注入器。服务定位器的编码可能比 DI 更难或更长。我认为服务定位器就像工厂模式的另一个名称，对吧？而且我不知道什么时候必须使用 SL 而不是 DI ？您是否有任何实际案例可以应用其中任何一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:30:08.710

作为默认位置，避免使用 ServiceLocators。请参阅 Mark Seemann 关于该主题的[出色博客文章](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。

依赖注入更容易维护，并且根本不需要“注入器”或 DI 框架。这只是一个问题或为对象提供它的依赖项（最好在构造函数中），而不是让对象自己收集它们。我是一个非常严格的 DI 拥护者，而且我几乎从不使用 DI 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:30:35.840

我认为 SL 和工厂模式之间存在细微差别。

一般来说，工厂模式会创建一个新的服务实例，调用者成为该实例的所有者。

另一方面，服务定位器将提供服务的预先存在的实例。调用者不会成为此实例的“所有者”。这种*预先存在的实例*通常在所有客户端之间共享。大多数情况下，实例化*预先存在的实例*的责任留给了一些第三方代码。

# c# - 使用 Excel 和 C# 读取搜索和编写工作簿的应用程序

> ID：14540627
> 
> 赞同：0
> 
> 时间：2013-01-26T19:19:43.950
> 
> 标签：c#, excel, interop

需要使用 Win Forms 在 C# 中创建应用程序，应用程序需要执行以下操作：

1.在后台打开一个excel工作簿，用户不应该看到这一步 2.然后以某种方式将数据保存到应用程序中，以便以后可以访问 3.从文本框中接收一个 8 位识别码并搜索excel 工作簿中包含相同数字的条目 4\. 找到相关条目后，应用程序应将当前时间和日期写入单元格登录，并在特定日期完成输入。5\. 应用程序应该会自动保存工作簿，然后 6\. 然后关闭应用程序。

任何人都可以帮助我，这`Microsoft.Office.Interop`是非常复杂的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:22:47.083

试试[closedXML](http://closedxml.codeplex.com/)，它位于 Excel 互操作之上，让事情变得更容易。但是没有任何你尝试过的例子，很难告诉你如何完成你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:28:23.010

如果您没有旧的 Excel 支持 (.xls)，您可以使用`Wrapper.OpenXml`作为[Nuget 包](http://nuget.org/packages/Wrapper.OpenXml)可用的。

# machine-learning - 情感分析/分类任务中二进制与 tfidf Ngram 特征的比较？

> ID：14540630
> 
> 赞同：4
> 
> 时间：2013-01-26T19:19:52.833
> 
> 标签：machine-learning, nlp, artificial-intelligence, n-gram, tf-idf

又是一个简单的问题：使用 Ngrams（unigram/bigrams 等）作为简单的二元特征，还是在 ML 模型（如支持向量机）中使用它们的 Tfidf 分数来执行情绪分析或文本分类/分类等 NLP 任务更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:42:22.600

正如史蒂夫在评论中提到的，最好的答案（和 ML 风格的方式）是尝试！

话虽如此，我将从二进制特征开始。您的 ML 模型（如 SVM）的目标是确定这些特征的“权重”，因此如果它有效，则不必尝试提前设置此权重（使用 TFIDF 或其他）。

# c# - 具有多个 web.config 的 Web 应用程序

> ID：14540634
> 
> 赞同：3
> 
> 时间：2013-01-26T19:20:43.653
> 
> 标签：c#, asp.net, visual-studio-2008

我正在开发一个 Web 应用程序，该应用程序在 Web 项目中有多个文件夹及其页面。还有一个web.config 将所有的繁体标记起来。我需要创建另一个名为“customerportal”的文件夹，在这个文件夹中我创建了 3 个页面`customerlogin.aspx`，`customerdefault.aspx`和`customerhelp.aspx`. 我还在该文件夹中添加了 3 个文件夹、图像、css 和脚本。

现在，当我导航到该文件夹​​时`http://mysite.com/customerportal/customerlogin.aspx`，它工作正常。我添加了一个`web.config`文件，因为现在我需要将此文件夹限制为仅适用于客户的角色，同样我需要将主应用程序（父应用程序）限制为客户角色。因此，没有客户无法进入客户门户，也没有客户门户用户可以进入主应用页面。所以我添加了限制孩子角色的标记`web.config.`，这不起作用，因为它告诉我

```
 Parser Error Message: It is an error to use a section registered as
allowDefinition='MachineToApplication' beyond application level.  
This error can be caused by a virtual directory not being 
configured as an application in IIS. 
```

所以，我把文件夹转换成虚拟目录，然后转换成iis中的应用程序。然后错误消失了，但我遇到了其他问题，比如 main`web.config`被继承给 child `web.config`。所以我开始调查，我看到了很多答案，比如：

`<location path="." inheritInChildApplications="false">`在该部分之前放置一个，我试过这个，但现在我在标签`<system.web>`上得到一个错误。`<membership>`会员资格位于不同的 aspmembership 数据库中，因此孩子有不同的连接字符串等。但我无法做类似的事情

```
<membership>
  <clear /> 
```

或一个`<membership> <remove name=..>`

就像会员资格仍然以某种方式被继承。解决此子 web.config 问题的最佳方法是什么？，在子文件夹需要自己的 web.config 的情况下进行这种设置的最佳做法是什么？这是我第一次这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:17:30.397

如果我正确理解您的问题，您不能只在根 web.config 中添加授权并给出路径“~/customerportal/customerlogin.aspx”等等吗？我认为因为你有一个 web.config 它认为该目录是它自己的应用程序。

# codeigniter - PDO 不可用

> ID：14540638
> 
> 赞同：0
> 
> 时间：2013-01-26T19:21:30.627
> 
> 标签：codeigniter, pdo

我不是 php 开发人员，刚开始学习并将我的 php 网站迁移到代码点火器。以前我尝试在我的生产网站（付费托管）上部署代码，但带有 PDO 引用的类不起作用，所以我退出了。我的托管公司告诉我将计划更改为更昂贵的计划。我不想这样做，但我仍然想使用基于 PDO 的代码；（从我的 CPanel 我可以看到“PHP 版本 5.2.17”，但是 PDO 不起作用......我认为 PDO 与 PHP 5 捆绑在一起......）

无论如何-即使环境不提供，这是否可以添加到代码点火器中？作为图书馆..等？- 或者如果我将托管公司更改为免费托管公司，它是否通常可用/提供？

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:53:23.473

PDO 内置在 CodeIgniter(system/database/drivers/pdo/) 中；但是，如果您的主机不支持它，则无法使用它。

至于提供 PDO 的免费托管，您必须对此进行研究。

# javascript - 与标准 HTTP 相比，WebSockets 如何扩展？

> ID：14540640
> 
> 赞同：4
> 
> 时间：2013-01-26T19:21:35.260
> 
> 标签：javascript, node.js, http, tcp, websocket

与仅通过 AJAX 提供信息相比，使用 TCP 编程的站点（即站点上的某人连接到服务器并通过 TCP 交换信息）如何扩展？假设交换的信息是相同的。

试图澄清：我特别问的是规模：我已经读过，与仅静态提供信息相比，保持数千个 TCP 连接需要资源（哪个？）。我想知道这是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:33:20.283

Websockets are not a one-for-one with AJAX; they offer substantially different features. Websockets offers the ability to 'push' data to the client. AJAX works by 'pushing' data and returning a response.

The purpose of WebSockets is to provide a low-latency, bi-directional, full-duplex and long-running connection between a browser and server. WebSockets opens up possibilities with browser applications that were previously unavailable using HTTP or AJAX.

However, there is certainly an overlap in purpose between WebSockets and AJAX. For example, when the browser wants to be notified of server events (i.e. push) either AJAX or WebSockets are both viable options. If your application needs low-latency push events then this would be a factor in favor of WebSockets which would definitely scale better in this scenario. On the other hand, if you need to work with existing frameworks and deployed technologies (OAuth, RESTful API's, proxies, etc.) then AJAX is preferable.

If you don't need the specific benefits that WebSockets provides, then it's probably a better idea to stick with existing techniques like AJAX because this allows you to re-use and integrate with an existing ecosystem of tools, technologies, security mechanisms, knowledge bases that have been developed over the last 7 years.

But overall, Websockets will outperform AJAX by a significant factor.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:24:27.103

WebSockets 是一种允许服务器向客户端推送通知的技术。另一方面，AJAX 是一种拉取技术，这意味着客户端正在向服务器发送请求。

因此，例如，如果您有一个应用程序需要定期从服务器接收通知并更新其 UI，那么 WebSocket 更适合并且更好。使用 AJAX，您将不得不定期向服务器发送请求，以查看服务器上的某些状态是否发生了变化。使用 WebSockets，服务器会通知客户端服务器上发生的某些事件。这将在一个请求中发生。

所以我想这真的取决于你正在开发的应用程序的类型，但是 WebSockets 和 AJAX 是解决不同类型问题的两种完全不同的技术。选择哪一个取决于您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T20:04:20.450

我认为 WebSockets 和标准 TCP 连接之间的可伸缩性没有任何区别。WebSocket 是从静态单向管道到双工管道的升级。物理资源完全相同。

WebSockets 的主要优点是它们在端口 80 上运行，因此它避免了大多数防火墙问题，但您必须首先通过标准 HTTP 连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T00:54:31.173

这是一个很好的页面，它清楚地展示了 WebSocket API 与 Ajax 长轮询（尤其是大规模）相比的优势：[http ://www.websocket.org/quantum.html](http://www.websocket.org/quantum.html)

这基本上归结为这样一个事实，即一旦建立了初始 HTTP 握手，数据可以更快地来回传输，因为标头开销大大减少（这就是大多数人所说的双向通信）。

顺便说一句，如果您只需要能够定期从服务器推送数据，但您不需要发出许多客户端发起的请求，那么使用[HTML5 服务器发送的事件](http://www.websocket.org/quantum.html)和偶尔的 Ajax 请求客户端可能正是您所需要的，并且比 WebSocket API 更容易实现。

# html - DIV 以自动宽度向左浮动，以适应宽度为 980 像素的 MAN div

> ID：14540645
> 
> 赞同：1
> 
> 时间：2013-01-26T19:21:51.843
> 
> 标签：html, css

我有那些 DIV'S

```
<div class='content'>
  <div class='div2'>content 2</div>
  <div class='div2'>content 2</div>
  <div class='div2'>content 2content 2</div>
  <div class='div2'>content 2</div>
  <div class='div1'>content 1</div>
</div> 
```

主 div 是固定大小 = 980px，在它里面我有 DIV class'div1' 它的浮动 RIGHT 并且是固定大小。我希望DIV2类的DIVS是：1.向左浮动，2.自动宽度，以便填充所有剩余大小740px，3.'div2'内的内容对齐中心。

我有这个 CSS 代码：

```
.content { width:980px; overflow: hidden; border: 1px solid #ccc; padding:5px;}
.div1 { overflow: hidden; float:right; width: 140px;}
.div2 { float:left; width: auto; border-right: 1px solid #ccc; text-align:center;} 
```

但我无法达到 2\. 自动宽度，因此 thay 将填充所有剩余大小 740px

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:37:04.077

最简单的方法是用一张桌子来做，你可能知道怎么做。

```
<div class='content'>
    <table class="divs2">
        <tr>
        <td class='div2'>content 2</td>
        <td class='div2'>content 2</td>
        <td class='div2'>content 2content 2</td>
        <td class='div2'>content 2</td>
        </tr>
    </table>
  <div class='div1'>content 1</div>
</div> 
```

CSS：

```
.content { width:980px; overflow: hidden; border: 1px solid #ccc; padding:5px;}
.div1 { overflow: hidden; float:right; width: 140px;}
.divs2{ float:left; width:740px;  }
.div2 { border-right: 1px solid #ccc; text-align:center;} 
```

看看这个：http: [//jsfiddle.net/UCJA3/](http://jsfiddle.net/UCJA3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:28:36.327

为什么不将**.div2**上的**width: 20%**设置为 ？

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T20:13:00.607

首先将“.div-2”包装在一个外部容器中：

```
<div class='content'>
   <div class="div-2-wrapper">
      <div class='div2'>content 2</div>
      <div class='div2'>content 2 content 2</div>
      <div class='div2'>content 2</div>
      <div class='div2'>content 2</div>
  </div>
  <div class='div1'>content 1</div>
</div> 
```

现在将“div-2-wrapper”类的宽度设为 840px（剩余的总空间）并将其浮动到左侧：

```
.div-2-wrapper{
    float: left;
    width: 840px;   
} 
```

最后，给每个“div-2”类一个 209px 的宽度。您希望它们为 209 而不是 210 像素宽的原因是因为每个都包含一个 1px 右边框。[jsFiddle](http://jsfiddle.net/A74PP/1/)**

# php - 使用 Zend Form 的动态表单

> ID：14540648
> 
> 赞同：1
> 
> 时间：2013-01-26T19:22:08.050
> 
> 标签：php, zend-framework, zend-form, zend-form-sub-form, dynamicform

大家好，我正在使用 Zend Framework 1 构建一个联系人应用程序。我有一个联系人表和一个contact_data 表。

```
Contact
|NAME|DESCRIPTION|...

CONTACT DATA
|TYPE|LOCATION|DETAILS|CONTACT_ID

ADDRESS
STREET|ZIP|CITY|STATE|COUNTRY|CONTACT_ID 
```

联系数据包含所有联系方式，例如电话、电子邮件、传真等，地址表是不言自明的。诀窍是我需要设置它，以便我可以添加无限的联系数据和地址。我之前通过大量处理自定义视图来完成这一点，但是那是在视图中放置了很多我不想要的代码逻辑。所以我正在使用 Zend_Form 重做它，但在设置从同一个表单部分添加/编辑/删除多个联系人详细信息时遇到了困难。

我已经制定了 javascript，并且知道如何使用视图来完成它 - 但我需要在这里使用 Zend Forms 来完成它。我已经研究了子表单的想法，但是在我的情况下，我需要执行以下操作：

我的表格结构如下：

列出的所有联系方式的文本和输入

一个特殊的联系人数据区域，其中包含添加电话、添加传真、添加地址的链接。单击这些链接将打开并向表中添加一组输入，例如添加地址链接将街道、城市、国家和州的输入集添加到表中。

我已经破解了一个小时，在这里我很迷失。关于我该如何处理的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:28:36.780

我认为解决这个问题的最好方法是创建新元素。一个用于联系数据，一个用于地址。这些元素中的每一个都应该具有自定义 viewHelper 来呈现您的复杂界面。每个视图助手都可以分配 javascript 文件来处理动态添加/删除。

```
class Form_Element_Contact extends Zend_Form_Element_Xhtml {

    public $helper = 'contact';

}

class Zend_View_Helper_Contact extends Zend_View_Helper_FormElement {

    public function contact($name, $value = null, $attribs = null, $options = null) {
        $this->view->headScript()->appendFile("/js/dynamicInterfaceForContacts.js");
        $info = $this->_getInfo($name, $value, $attribs, $options);

        $html = $this->generateHtml(); // elements should be part of an array
        return $html;
    }

} 
```

如果您需要更多详细信息，请告诉我。

# c++ - 递归二分搜索实现正在崩溃……为什么？

> ID：14540652
> 
> 赞同：0
> 
> 时间：2013-01-26T19:22:31.077
> 
> 标签：c++, pointers, recursion, binary-search

我正在尝试查找并修复此代码的问题。它是通过递归实现的二分查找。我不知道为什么它返回堆栈溢出和崩溃。

```
bool find( const int x, const int* pBegin, const int* pEnd)
{
    int medel = (*pBegin +(( *pEnd-1) - *pBegin)/2) ;

    if(x == medel)
        return true ;

    else if( x > medel) 
    {
        int begin = (medel +1);

        return find (x, &begin, pEnd);
    }
    else if( x< medel)
    {
        int last = (medel-1);

        return find(x,pBegin, &last);
    }

}

void main()
{
    int arr[10];
    for (int i=0;i<10;++i)
        arr[i] = i;
    bool hittat = find(7, &arr[0], &arr[9]);
    cout << "hittat = " << hittat << endl;

    system("pause");
} 
```

当我调试代码时，我看到当函数“find”被调用时，它需要奇怪的参数，就像在[这张图片](http://imageshack.us/photo/my-images/580/capturepzr.jpg/)中一样。

它应该取 0 和 9，而不是这些巨大的数字：/ 我的指针有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:34:01.063

You should compute the average of the **pointers** and check what it's the **value** of the element hallway between them. Instead you compute the average of the **values** pointed by them which is significantly different.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:28:38.507

您在某些地方使用`medel`（我假设应该是`middle`）作为指向 an 的指针`int`，但`int`在其他地方使用 an 。

尝试像这样声明它：

```
const int* middle = pBegin + (pEnd - pBegin + 1) / 2; 
```

然后，当您想要访问存储在那里的内容时，请使用`*medel`.

此外，您还需要第二个终止条件（当它找不到时）。就像是：

```
if (((middle == pEnd) && (x > *middle)) ||
         ((middle == pBegin) && (x < *middle))) {
  // Terminating condition                                                                                                                                                                              
  return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T19:35:42.157

您正在将 int 和 int 上的指针与您的 medel 混合，只需将其设置为指针并使用`*medel`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T19:45:50.527

您图片中显示的问题看起来像是从您的原始代码中获取的，如先前问题中所示。在那里，您有 pEnd 指向数组的末尾，因此不允许取消引用它（并产生奇怪的值）。

发布的代码不应发生这种情况。

您当前的代码仅使用指向有效整数的指针。但是其中大多数并不指向您的数组，因此您所做的不是在您的数组中进行搜索。该程序仅使用整数进行计算。只有数组的第一个和最后一个元素的值被使用过。

该程序令人困惑，因为您将整数值作为指向它们的存储的指针传递。从指向数组的指针开始，然后混合指向自动变量 (`begin`和`end`) 的指针，其中存储了计算值。（除了第一个和最后一个之外，您永远不会使用指向数组元素的指针。

# python - 打开文件时出错 - Python 3.3

> ID：14540653
> 
> 赞同：0
> 
> 时间：2013-01-26T19:22:43.553
> 
> 标签：python, file, python-3.x

> **可能重复：**
> [尝试打开现有文件时出现 IOError](https://stackoverflow.com/questions/10802418/ioerror-when-trying-to-open-existing-files)

我在 python 3.3 中使用 open() 打开文件时遇到问题，知道为什么吗？
我正在努力

```
import os

filelist = [ f for f in os.listdir( os.curdir )]
singleFile = filelist[a]
hppfile = open(singleFile, 'r') 
```

我得到

```
FileNotFoundError: [Errno 2] No such file or directory: '-file that is actually inside the directory-' 
```

想法？
在 Windows 上，我刚开始学习这个以编写一些快速脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:30:06.333

如果您阅读[listdir 的文档，](http://docs.python.org/3.3/library/os.html#os.listdir)您会看到它返回文件名而不是完整路径。

您将需要类似的东西

```
current_dir_path = os.getcwd()
open(os.path.join(curren_dir_path, file), 'r') 
```

# google-maps - 谷歌地图图像检索

> ID：14540655
> 
> 赞同：0
> 
> 时间：2013-01-26T19:22:58.137
> 
> 标签：google-maps

谁能说如何以图像的形式检索指定区域的卫星图像？

我更喜欢java代码。

我在javascript中尝试了以下代码。但它没有响应。

```
<html>
<head>
<title>Google Maps API - Map Type</title>
<style type="text/css">
div #map {
width: 100%;
height: 1000px;
}
</style>
<script type="text/javascript"
src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
function loadGoogleMap() {
    var latlng = new google.maps.LatLng(8.70386, 77.11423);
    var mapOptions = {
        zoom : 13,
        center : latlng,
        mapTypeId : google.maps.MapTypeId.SATELLITE,
        mapTypeControlOptions : {
            style : google.maps.MapTypeControlStyle.DROPDOWN_MENU,
            position : google.maps.ControlPosition.TOP_CENTER
        }
    };
    var map = new google.maps.Map(document.getElementById("map"),
            mapOptions);

    var marker = new google.maps.Marker( {
        position : latlng,
        map : map,
        title : ""
    });
}
</script>
</head>
<body onload="loadGoogleMap()">
<div id="map"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:00:13.040

使用以下 java 代码：-

```
String temp;
Image image = null;
temp="http://maps.googleapis.com/maps/api/staticmap?center="+latitude+","+longitude+"& zoom=18&size=100x100&sensor=false&maptype=satellite";
URL url = new URL(temp);
image = ImageIO.read(url);
ImageIO.write((RenderedImage) image, "jpg",new File("D:\\map.jpg"));

// give the latitude and the longitude as 25.165173,47.237548 
```

并运行代码，您将获得沙特阿拉伯某个地区的图像。

# linux - 为什么内核需要虚拟寻址？

> ID：14540656
> 
> 赞同：23
> 
> 时间：2013-01-26T19:23:01.153
> 
> 标签：linux, linux-kernel

在 Linux 中，每个进程都有自己的虚拟地址空间（例如，在 32 位系统的情况下为 4 GB，其中 3 GB 为进程保留，1 GB 为内核保留）。这种虚拟寻址机制有助于隔离每个进程的地址空间。这在流程的情况下是可以理解的，因为有很多流程。但是既然我们只有 1 个内核，那么为什么我们需要内核的虚拟寻址呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-26T20:00:39.240

内核是“虚拟”的原因并不是要处理分页，而是因为处理器一次只能以一种模式运行。因此，一旦您打开分页内存映射（x86 上 CR0 中的第 31 位），处理器就会期望所有内存访问都通过页面映射机制。因此，即使在启用分页（虚拟内存）之后，我们也确实想访问内核，因此它需要存在于虚拟空间中的某个位置。

内存的“保留”更多的是“确定地址是内核空间还是用户空间的简单方法”，而不是其他任何东西。完全有可能在地址 12345-34121 放置一点内核，在 101900-102400 放置另一位内核，在 40000000-40001000 放置一些其他内核。但这会让内核和用户空间的每个方面都变得困难——会有差距/漏洞需要处理[已经有这样的漏洞/漏洞，但拥有更多不会完全有帮助]。通过为“用户空间从这里到这里，内核从用户空间的末端到 X”设置一个固定的限制，它在这方面让生活变得更加轻松。我们可以`kernel = 0; if (address > max_userspace) kernel=1;`在一些代码中说。

当然，内核只占用它实际使用的物理内存——所以“为内核占用整个千兆字节是浪费”的普遍想法是错误的——内核本身只有几个（十几个或所以对于一个非常“大”的内核）兆字节。加载的模块可以轻松增加几兆字节，而来自 ATI 和 nVidia 的图形驱动程序很容易再增加几兆字节，仅用于内核模块本身。内核还使用一些内存来存储“内核数据”，例如任务、队列、信号量、文件和内核必须处理的其他“东西”。为此也使用了几兆字节。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T17:03:35.093

虚拟内存管理是 Linux 的一个特性，它可以在系统中实现多任务，没有任何限制。每个任务使用的任务或内存量。Linux 内存管理器子系统（连同 MMU 硬件）促进了 VMM 支持，其中内存或内存映射设备通过虚拟地址访问。在 Linux 中，除了处理真实硬件外，内核和用户组件都使用虚拟地址。这就是内存管理器取代它的位置，进行虚拟到物理地址的转换并指向物理内存/开发位置。

进程是一个抽象实体，由内核定义，为执行程序分配系统资源。在 Linux 进程管理中，内核是进程内存映射的一个集成部分。一个过程有两个主要区域，例如一枚硬币的两个面：

*   用户空间视图 - 包含进程使用的用户程序部分（代码、数据、堆栈、堆等）

*   内核空间视图 - 包含维护有关进程的信息（PID、状态、FD、资源使用等）的内核数据结构

    ![在此处输入图像描述](../Images/3c5f5cd2debb364e28cc04540846b893.png)

Linux 系统中的每个进程都有一个唯一且独立的用户空间区域。Linux VMM 的这一特性将每个进程程序部分彼此隔离开来。但是系统中的所有进程共享一个公共内核空间区域。当一个进程需要内核提供服务时，它必须在这个区域执行内核代码，或者换句话说，内核代表用户进程请求执行。

# ocaml - OCaml 程序可以使用多个处理器内核吗？

> ID：14540660
> 
> 赞同：4
> 
> 时间：2013-01-26T19:23:42.203
> 
> 标签：ocaml

能够做到这一点以获得最大速度不是很重要吗？

编辑：

例如，Clojure 有**pmap**，它使用多个核心。

Harrop 博士写道（2011 年 1 月 9 日）：
添加到语言中的新功能，例如 OCaml 3.12 中的一流模块，远没有多核功能那么有价值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T23:27:58.593

是的，它可以; 为此，您应该使用多处理模型，在该模型中，您的程序会产生多个进程以独立进行计算，然后合并结果。

最简单的方法是使用`Unix.fork`系统调用将您的程序分成两个进程。例如，在线书籍[Unix system programming in OCaml](http://ocamlunix.forge.ocamlcore.org/processes.html)中对此进行了描述。如果您要跨内核拆分的计算具有简单的结构（迭代，映射到输入池），[Parmap](http://www.dicosmo.org/code/parmap/)是一个库，它可以让您轻松地从并行性中受益，只需更改应用程序中的一些函数调用（如果它结构已经很好了）。如果您想做更复杂的事情（直接访问共享内存结构、消息框...），Ocaml-net 项目通过[Netmulticore](http://projects.camlcity.org/projects/dl/ocamlnet-3.3.0test1/doc/html-main/Netmcore_tut.html)库支持许多方便的功能。

如果你想做分布式编程（在多台机器的集群上运行的程序），[OcamlMPI](http://forge.ocamlcore.org/projects/ocamlmpi/)库为著名的分布式消息传递框架 MPI 提供支持。还有更具实验性和高级别的[JoCaml](http://jocaml.inria.fr/)扩展，它使用一种有趣的、更具研究性的方法来进行并发通信。

请注意，如果您没有特定的性能限制，或者如果您的应用程序本质上是顺序的，那么尝试并行化一些计算是没有意义的（以更高的同步簿记开销为代价），在后一种情况下，因为[阿姆达尔](http://en.wikipedia.org/wiki/Amdahl%27s_law)定律。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T13:43:48.287

如果您的并行代码生成大量数据，那么在 OCaml 中没有简单的方法可以有效地将其取回。传统的解决方法是派生进程并将结果编组回父进程，但您的父进程随后将所有数据反序列化在一个核心上，将所有数据重新分配到自己的堆上。这在多核上效率非常低，并且意味着 OCaml 无法表达大多数并行算法的有效实现，包括`pmap`.

# java - 是否有一些完全配置的 Spring Wicket Hibernate 原型，包括注释？

> ID：14540661
> 
> 赞同：4
> 
> 时间：2013-01-26T19:23:42.703
> 
> 标签：java, spring, hibernate, maven, wicket

我想有很多人问过这个问题，但到目前为止，我还没有找到足够的答案：我是 Java-WebApp-Development 的新手。我非常习惯在工作中使用完全配置的 Spring-Wicket-Hibernate 环境。虽然我仍然无法自己建立这样的项目。

我尝试使用[http://blog.iprofs.nl/2011/02/15/a-maven-quickstart-on-wicket-spring-and-hibernate/](http://blog.iprofs.nl/2011/02/15/a-maven-quickstart-on-wicket-spring-and-hibernate/)，但在解决最简单的任务（例如实施通用道中的计数（*）方法）。虽然我知道我*应该*更深入地研究这些框架，但我知道由于我的空闲时间很少，这是不可能的。目前我正在研究 Wicket，但这只是我需要学习配置和使用的 3 个框架之一。

虽然这有点天真，但我希望像我这样的人可能会有*maven*原型：一个完全配置的 Spring-Wicket-Hibernate-Annotated maven-project，我可以修改并学习如何自己走路。

有什么东西可以满足我的需要吗？我说的不一定是 maven-archetype，写得很好的教程也可以。

现在，我对那些阻碍我开发第一个 WebApp 的小问题感到非常沮丧。

最好的问候，弗兰兹

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T06:36:13.900

我整理了一下，希望对你有帮助

[wicket-spring-hibernate](https://github.com/robobario/wicket-spring-hibernate)

我从 wicket quickstart 开始，所以你有 mvn:jetty-run 它将在端口 9005 上启动应用程序

# wcf - WCF HTTP 绑定是否在 TCP 上运行？

> ID：14540663
> 
> 赞同：3
> 
> 时间：2013-01-26T19:23:44.790
> 
> 标签：wcf, http, tcp, wcf-binding

我试图了解 WCF 中标准绑定之间的区别。作为其中的一部分，我正在阅读[WCF Bindings in Depth](http://msdn.microsoft.com/en-us/magazine/cc163394.aspx "深入了解 WCF 绑定")。图 2 显示了传输是 HTTP 的绑定和一些是 TCP 的绑定。我很困惑 b/c 我认为 HTTP 是一个应用程序级协议，而不是一个传输协议——而且 HTTP 运行在 TCP 之上。那么通过称它为 HTTP 绑定，我们是否理解它实际上是在 TCP 之上的 HTTP 上运行的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:32:50.033

> So by calling it an HTTP binding, are we to understand that it's actually running on HTTP on top of TCP?

Yes, exactly. But that's implicit. Because HTTP runs on top of TCP.

The binary bindings (such as `netTcpBinding`) run directly on TCP. They do not use HTTP at all.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:45:18.477

tcp/ip 包含 4 层：

```
application
transport
network
data link 
```

您可以使用任何层，但 wcf 具有使用传输层和应用层的绑定，fe`netTcpBinding`和`wsHttpBinding`

tpc/ip 与 tcp 层不同

```
application layer protocols f.e.: HTTP, RTP, FTP, DNS
transport layer protocols f.e.: TCP, UDP, SCTP, DCCP 
```

所以http可以基于UDP协议，`wsHttpBinding` 或者如果你选择tcp它将是`netTcpBinding`，这个层在http下面，应用程序是多余的

# java - 从 JList 中删除元素的问题

> ID：14540668
> 
> 赞同：3
> 
> 时间：2013-01-26T19:24:15.383
> 
> 标签：java, swing, jlist

我在从 JList 中删除元素时遇到问题，我的应用程序是客户端服务器应用程序，客户端具有 JList（视图）。服务器以向量的形式拥有 JList 的实际数据。当客户端发生某个动作时，服务器必须从向量中删除一个元素，然后更新客户端上的视图。我试图在从服务器中删除后获取向量，然后构造一个新的 JList，然后在视图中设置它，但没有发生更新。

有哪些可能的方法来做到这一点？

注意：我这样使用 DefaultListModel：

```
DefaultListModel model=(DefaultListModel)myList.getModel();
model.removeElement(myElement);
myList.setModel(model); 
```

但它在运行时给出了 ClassCastException，它说`javax.swing.JList cannot be cast to javax.swing.DefaultListModel`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:32:18.457

You can add elements to a list by just passing it a `Vector` in the constructor or using the `setListData` method, but that is not the best way to do it.

You would usually want to use a `ListModel` implementation like `DefaultListModel`. It defines methods for handling data (`addElement`, `removeElement`,...).

You could reduce the amount of exchanged data between the server and the client(s) by querying the server for the removed element only and not getting all the data.

**Update**: Now I see you are using a model. The default implementation of a `JList` model is not of type `DefaultListModel`. You can set the model in the `JList` constructor, when you instantiate your `JList` at the beginning.

```
DefaultListModel model = new DefaultListModel();
JList list = new JList(model); 
```

Don't instantiate it again, you need to do that only once. Then, you can use the code you posted, but you don't have to call the `setModel()` method after you remove an element.

# windows-phone-7 - 来自Xaml中Json的数据绑定？

> ID：14540670
> 
> 赞同：0
> 
> 时间：2013-01-26T19:24:21.427
> 
> 标签：windows-phone-7, xaml, data-binding, json.net

我正在制作一个 WP7 应用程序并从我的 webapi 作为 json 获取数据。我想知道如何进行数据绑定？我需要创建一个具体的类还是可以只使用 JArray？

```
[{"Id":"fe480d76-deac-47dd-af03-d5fd524f4086","Name":"SunFlower Seeds","Brand":"PC"}]

  JArray jsonObj = JArray.Parse(response.Content);
   this.listBox.ItemsSource = jsonObj;

        <ListBox x:Name="listBox" FontSize="26" Margin="0,67,0,0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Id}" Width="100"/>
                        <TextBlock Text="{Binding Brand}" Width="100"/>
                        <TextBlock Text="{Binding Name}" Width="100"/>
                    </StackPanel>

                </DataTemplate>

            </ListBox.ItemTemplate>

        </ListBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:01:11.103

与 WPF 绑定时，需要使用属性。创建一个强类型对象，然后反序列化 JSON。

创建你的对象：

```
public class MyObject
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public string Brand { get; set; }
} 
```

这是一个非常松散的绑定示例，它基于您指示您将设置列表框的 ItemsSource 的方式：

```
string json = "[{\"Id\":\"fe480d76-deac-47dd-af03-d5fd524f4086\",\"Name\":\"SunFlower Seeds\",\"Brand\":\"PC\"}]";

var jsonObj = JArray.Parse( json );

var myObjects = jsonObj.Select( x => JsonConvert.DeserializeObject<MyObject>( x.ToString() ) );

this.listBox.ItemsSource = myObjects; 
```

注意：我没有使用过 json.net，所以可能有更好的方法来使用我发布的 json.net 反序列化数组。

# symfony - 我不知道如何启用我的开发环境

> ID：14540673
> 
> 赞同：0
> 
> 时间：2013-01-26T19:24:51.403
> 
> 标签：symfony

每当我尝试切换到我的开发环境时，我的网站都会崩溃而没有任何错误（即使在 apache 日志中）

当我尝试运行 composer update 时，我总是遇到这个问题：

[Symfony\Component\DependencyInjection\Exception\ServiceNotFoundException] 服务“web_profiler.controller.profiler”依赖于不存在的服务“profiler”。

下面是我的 AppKernel 的内容

```
<?php

use Symfony\Component\HttpKernel\Kernel;
use Symfony\Component\Config\Loader\LoaderInterface;

class AppKernel extends Kernel
{
    public function registerBundles()
    {
        $bundles = array(
            new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
//            new Symfony\Bundle\SecurityBundle\SecurityBundle(),
            new Symfony\Bundle\TwigBundle\TwigBundle(),
            new Symfony\Bundle\MonologBundle\MonologBundle(),
//            new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
//            new Symfony\Bundle\AsseticBundle\AsseticBundle(),
            new Doctrine\Bundle\DoctrineBundle\DoctrineBundle(),
            new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
//            new JMS\AopBundle\JMSAopBundle(),
//            new JMS\DiExtraBundle\JMSDiExtraBundle($this),
//            new JMS\SecurityExtraBundle\JMSSecurityExtraBundle(),
            new Zepluf\Bundle\StoreBundle\StoreBundle(),
        );

        if (in_array($this->getEnvironment(), array('dev', 'test'))) {
//            $bundles[] = new Acme\DemoBundle\AcmeDemoBundle();
            $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle();
            $bundles[] = new Sensio\Bundle\DistributionBundle\SensioDistributionBundle();
            $bundles[] = new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle();
        }

        return $bundles;
    }

    public function registerContainerConfiguration(LoaderInterface $loader)
    {
        $loader->load(__DIR__.'/config/config_'.$this->getEnvironment().'.yml');
    }
} 
```

我的作曲家.json：

```
{
    "name": "zepluf/standard-edition",
    "description": "The \"ZePLUF Standard Edition\" distribution",
    "authors": [
        {
            "name": "Raine Ng",
            "email": "vunguyen@rubikin.com",
            "homepage": "http://rubikin.com"
        }
    ],
    "autoload": {
        "psr-0": {
            "": "src/",
            "Zepluf" : "src/Zepluf/",
            "plugins": "app/"
        }
    },
    "require": {
        "php": ">=5.3.3",
        "composer/installers": "*",
        "zepluf/installer": "*",
        "symfony/symfony": "2.2.*",
        "symfony/framework-bundle": ">=2.1",
        "symfony/web-profiler-bundle": "2.2.*@dev",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.2.*",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.2.*",
        "symfony/monolog-bundle": "2.2.*",
        "sensio/distribution-bundle": "2.2.*",
        "sensio/framework-extra-bundle": "2.2.*",
        "sensio/generator-bundle": "2.2.*",
        "zepluf/plugin-ricache": "dev-master",
        "zepluf/plugin-ricjloader": "dev-master"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    }
} 
```

我想知道发生了什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:31:37.983

要回答我自己的问题，如果我想使用 web_profiler，我需要在配置文件中设置探查器。

所以我在我的 config_dev.yml 中使用了类似的东西：

```
framework:
  profiler: { only_exceptions: false } 
```

# c - Linux 中的重定向

> ID：14540676
> 
> 赞同：0
> 
> 时间：2013-01-26T19:25:16.510
> 
> 标签：c, linux, input, io-redirection

测试项目 2 的输入文件。旨在通过重定向使用。

我的教授给了我们一个 txt 文件，用于测试我们的程序是否有效。它读取约 1000 个数字（因此我们不必手动输入它们）。但我不知道如何使用这个 txt 文件的 linux 命令。

```
ccarri7@ubuntu:~/C$ ls
ccarri7lab2  ccarri7lab2.c  lab2input.txt
ccarri7@ubuntu:~/C$ 
```

这是我的可执行文件/源文件/txt 文件所在的文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:44:31.617

```
./ccarri7lab2 < lab2input.txt 
```

将使用 lab2input.txt 中的文本作为 ccarri7lab2 的参数

[http://linux.about.com/od/itl_guide/a/gdeitl42t01.htm](http://linux.about.com/od/itl_guide/a/gdeitl42t01.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T19:41:28.637

你试过了吗

```
ccarri7lab2 < lab2input.txt 
```

希望这是您想要的，否则您可以提供更多信息。

# http - 内部保存 HTTP 连接的 DLL

> ID：14540678
> 
> 赞同：0
> 
> 时间：2013-01-26T19:26:00.710
> 
> 标签：http, dll, connection

是否有可能，一个 C# 编写的 DLL 可以保持 HTTP 连接，只要它可以（直到服务器超时）？如果外部应用程序将使用 DLL 的函数，我是否可以在此 DLL 中的此 DLL 调用之间保持连接（并在丢失时通过调用其方法之一重新打开它）？

# wordpress - 前缀更改后的 Wordpressmenu

> ID：14540680
> 
> 赞同：1
> 
> 时间：2013-01-26T19:26:11.723
> 
> 标签：wordpress, menu, prefix

为了增加 Wordpress 网站的安全性，我更改了数据库前缀。大多数情况下一切正常，但网站的自定义导航菜单不见了。现在它在导航菜单中显示了网站的所有文章。

当我登录管理面板时，“菜单配置站点”无法正常工作。我没有创建自定义菜单。如果我尝试创建一个新的导航菜单，我会收到一条消息，说创建了一个新的导航菜单。但它不存在，我无法按下复选框以向菜单添加帖子。

目前，我正在使用 Wordpress 3.5 在本地服务器（我的计算机上的 Xampp）上对其进行测试，在更改 db 前缀之前它正在工作。

我在数据库中更改的内容：我重命名了每个“wp”

```
wp_commentmeta
wp_comments
wp_links
wp_options
wp_postmeta
wp_posts
wp_terms
wp_term_relationships
wp_term_taxonomy
wp_usermeta
wp_users

wp_user_roles 
```

以及以“wp”开头的“wp_usermeta”中的所有内容

有人知道吗？

问候，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:57:09.973

您是否尝试将菜单设置为主要菜单？

* * *

我建议阅读下一篇关于如何更改 wp db 前缀的文章：http: [//digwp.com/2010/10/change-database-prefix/](http://digwp.com/2010/10/change-database-prefix/)

特别注意“*安装 WordPress 后更改默认表前缀*”部分。

# c - 用C计算字符串的长度

> ID：14540681
> 
> 赞同：1
> 
> 时间：2013-01-26T19:26:34.007
> 
> 标签：c, string, pointers

```
int strlength(const char *myStr){
    //variable used for str length counter
    int strlength = 0;
    //loop through string until end is reached. Each iteration adds one to the string length
        while (myStr[strlength] != '\0'){
            putchar(myStr[strlength]);
            strlength++;
        }

    return strlength;
} 
```

为什么这不能按预期工作？我只想找到一个字符串的长度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T19:35:41.000

从对另一个答案的评论：

> 我正在使用 fgets 读取字符串。我已经检查以确保输入的字符串正确存储

在这种情况下，存储了一个尾随换行符，因此您的函数计算

```
strlength("hello\n") 
```

代码是正确的，您只是没有将您认为可以通过的输入传递给它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T19:30:22.373

更可靠的版本：

```
size_t strlength(const char * myStr)
{
    return strlen(myStr);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T19:29:45.307

你也可以试试这个：-

```
int string_length(char *s)
{
   int c = 0;

   while(*(s+c))
      c++;

   return c;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T19:37:18.763

无需担心 fgets() 和删除尾随`\n`.

```
while (myStr[strlength] != '\0'){
            putchar(myStr[strlength]);
            strlength++; //When mysStr[strlength] == \0, this line would have already incremented by 1
} 
```

快速解决：

```
return (strlength-1);//This will return correct value. 
```

更好的方法：

```
int strlen(const char *s)
{
   char *str=s;
   while(*str)
   {
      str++;
   }
   return (s-str);
} 
```

# c++ - 状态寄存器错误？

> ID：14540683
> 
> 赞同：0
> 
> 时间：2013-01-26T19:26:43.967
> 
> 标签：c++, keyboard, x86, kernel, hardware

在一个项目上工作。教授给了我们一个 .zip 文件，里面有一些测试，所以我们可以看看我们的项目是否正常工作。我们正在用 c++ 构建一个小内核。

无论如何，有一个线程等待键盘中断（event9.wait()），然后它应该将字符放入缓冲区或结束程序（如果按“esc”）。

```
while (!theEnd) {

        event9.wait();

        status = inportb(0x64); // reading status reg. from 64h
        while (status & 0x01){ //while status indicates that keys are pressed
                .... 
```

我检查并确定它会定期等待中断。出现问题是因为 status&0x01 为 0。

然后我得到了从 0x60 获取字符的代码部分，它工作得很好。

测试文件的代码有问题吗？如果是，是什么？如果代码正确，可能导致问题的原因是什么？

我可以更改测试文件，但我需要有充分的理由这样做。到目前为止，我唯一的原因是它不起作用。

*注意：评论是从塞尔维亚语翻译过来的，但我几乎可以肯定它们的翻译是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:43:22.540

我认为`status & 0x01`完全没问题。但是，您需要在读取端口 0x60 后再次读取该端口 - 很可能您稍后会在代码中执行此操作，但我个人只是将代码重写为：

```
 while ((status = inportb(0x64)) & 0x01){ //while status indicates that keys are pressed
            .... 
```

请注意，在这种情况下，您不应在循环内再次读取端口 0x64。

# visual-studio-2010 - 在 Visual Studio 2010 中编辑自动完成设置

> ID：14540688
> 
> 赞同：4
> 
> 时间：2013-01-26T19:27:59.273
> 
> 标签：visual-studio-2010, autocomplete, intellisense

我在哪里可以更改 Visual Studio 2010 中的自动完成/智能感知设置？- 建议列表显示每个键入的字符，有点烦人。- 空格键（和许多其他角色）正在提交建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T19:27:59.273

在 Visual Studio 2010 中编辑自动完成/智能感知设置。转到工具 -> 选项... -> TextEditor -> C# -> IntelliSense

默认设置将始终为您键入的每个字符显示一个建议列表，按空格键（以及许多其他愚蠢的字符）将始终“提交”当前选定的建议。关掉那些愚蠢的东西。当然，您希望 Enter 键作为“提交”操作，只需删除所有字符并取消选中“按空格键提交”即可。

[http://msdn.microsoft.com/en-us/library/vstudio/fcf2zk43(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/fcf2zk43(v=vs.100).aspx)

# ios - 无法使用 sdwebimage 类别（mach 链接器错误）

> ID：14540694
> 
> 赞同：3
> 
> 时间：2013-01-26T19:28:26.187
> 
> 标签：ios, linker-errors, sdwebimage

我想`SDWebImage`用于我的图像视图，以便我可以从网络上获取图像。我从github下载了zip，解压了。我将文件从 SDWebImage 文件夹拖到 xcode 中，检查了复制项目，还检查了我的目标。然后，我用`#import "UIImageView+WebCache.h"`. 我做了两个`UIImageViews`，我正在使用该方法

`[self.sdFeedImageView setImageWithURL:[NSURL URLWithString:feed.pictureURL]placeholderImage:[UIImage imageNamed:@"placeholder.png"]];`

但是当我尝试运行我的项目时，构建失败并出现 8 个 Apple Mach-O 链接器错误。什么是 Apple Mach-O 链接器错误？在 xcode 的左窗格中选择错误后，我看到了：

```
Undefined symbols for architecture i386:
  "_CGImageSourceCopyPropertiesAtIndex", referenced from:
      ___59-[SDWebImageDownloaderOperation connection:didReceiveData:]_block_invoke_0 in SDWebImageDownloaderOperation.o
  "_CGImageSourceCreateImageAtIndex", referenced from:
      ___59-[SDWebImageDownloaderOperation connection:didReceiveData:]_block_invoke_0 in SDWebImageDownloaderOperation.o
  "_CGImageSourceCreateIncremental", referenced from:
      ___59-[SDWebImageDownloaderOperation connection:didReceiveData:]_block_invoke_0 in SDWebImageDownloaderOperation.o
  "_CGImageSourceUpdateData", referenced from:
      ___59-[SDWebImageDownloaderOperation connection:didReceiveData:]_block_invoke_0 in SDWebImageDownloaderOperation.o
  "_OBJC_CLASS_$_MKAnnotationView", referenced from:
      l_OBJC_$_CATEGORY_MKAnnotationView_$_WebCache in MKAnnotationView+WebCache.o
  "_kCGImagePropertyPixelHeight", referenced from:
      ___59-[SDWebImageDownloaderOperation connection:didReceiveData:]_block_invoke_0 in SDWebImageDownloaderOperation.o
  "_kCGImagePropertyPixelWidth", referenced from:
      ___59-[SDWebImageDownloaderOperation connection:didReceiveData:]_block_invoke_0 in SDWebImageDownloaderOperation.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

**编辑：** 这是代码：

```
self.sdUserImageView=[[UIImageView alloc]initWithFrame:CGRectMake(18, 26, 51, 51)]; [self.contentView addSubview:self.sdUserImageView];
self.sdFeedImageView=[[UIImageView alloc]initWithFrame:CGRectMake(18, 110, 284, 174)]; [self.contentView addSubview:self.sdFeedImageView]; 
```

然后

```
[self.sdUserImageView setImageWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"graph.facebook.com/%@/… imageNamed:@"placeholder.png"]]; 
```

# mysql - 是否可以仅在一个 mysql 查询中执行此操作

> ID：14540695
> 
> 赞同：0
> 
> 时间：2013-01-26T19:28:26.193
> 
> 标签：mysql

这可以通过一个查询来完成吗？

餐桌日：

```
dID
enable
holiday
fewMore 
```

表段：

```
d_ID //foregn key to day->dID
startTime
endTime
fewMore 
```

询问：

```
SELECT dID, enabled,holiday,  
       TIME_TO_SEC(dHaurs) as wsTimeHHmm,
       DATE_FORMAT(dDate, '%d') as dateForComparing,
       DATE_FORMAT(start, '%H:%i') as startTime,
       DATE_FORMAT(end, '%H:%i') as endTime 
FROM day d                                  
LEFT JOIN segment ws 
ON ws.d_ID = d.dID
WHERE dDate BETWEEN '" . $startDate . "' AND  '" . $endDate . "'                                
ORDER by dateForComparing 
```

结果我得到：

```
dID:10, start time:08:00, end time:09:00, holiday:0, enabled:1
dID:10, start time:09:00, end time:10:00, holiday:0, enabled:1
dID:11, start time:08:00, end time:10:00, holiday:1, enabled:1 
```

但我想用相同的 d_ID 对所有段进行分组。

```
dID:10, array((start time:08:00, end time:09:00),(start time:09:00, end time:10:00)), holiday:0, enabled:1 
```

我试过`GROUP_CONCAT(wsID,start, end)`......`GROUP BY dID`但我不确定这是正确的方式，而且我也无法使用功能`DATE_FORMAT(start, '%H:%i') as startTime`

这只能用mysql来完成吗？

更新：现在，我正在从结果创建数组：

```
 $returnData  [] =array(array(dID =>"dID",
                         endTime => $end_time,
                         startTime=> $start_time,...
                               ),
                        array( enabled=> $enabled,
                                holiday =>$holiday
                               )
                         );
echo json_encode($returnData); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:34:49.720

你不能在 MySQL 中返回数组，但你可以像这样操作输出：

```
dID:10, start time:08:00, end time:10:00, holiday:0, enabled:1 
```

# sql - SQL 查询 - 从表中选择不同的值

> ID：14540701
> 
> 赞同：3
> 
> 时间：2013-01-26T19:29:27.710
> 
> 标签：sql, oracle

我有一张表，其中有多个针对 FK 的条目。我想找出没有某些条目的 FK 的值，例如
我的表有以下条目。

```
PK----------------FK-----------------列条目

1----------------100----------------ab1
2----------------100-----------------ab2
3----------------100-----------------ab4
4----------------200-----------------ab1
5----------------200-----------------ab2
6----------------200-----------------ab3
7----------------300-----------------ab1
8----------------300-----------------ab2
9----------------300-----------------ab3
10---------------300------ab4

```

现在，从这张表中，我想过滤所有那些没有 ab3 或 ab4 的 FK。当然，我期望不同的值，即在这种情况下结果将是 FK= 100 和 200。
我正在使用的查询是

```
select distinct(FK) 
from table1 
where column_entries != 'ab3' 
   or column_entries != 'ab4'; 
```

当然，此查询未获取所需的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T19:47:40.553

尝试以下方法：-

```
select distinct fk_col from table1
minus
(select distinct fk_col from table1 where col_entry='ab3'
intersect
select distinct fk_col from table1 where col_entry='ab4') 
```

这将显示所有没有“ab3”和“ab4”的 FK。即在您的情况下为 100 和 200

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T20:35:37.143

如果我以正确的方式提出您的问题，下面的脚本可能是解决方案。

```
SELECT DISTINCT(TableForeignKey)
FROM Test
WHERE TableForeignKey NOT IN (
SELECT T1.TableForeignKey
FROM Test T1 INNER JOIN Test T2 ON T1.TableForeignKey = T2.TableForeignKey
WHERE T1.TableEntry = 'ab3' AND T2.TableEntry = 'ab4') 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!4/28a6e/7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T23:38:20.460

您可以在 HAVING 中将 GROUP BY 与条件聚合一起使用：

```
SELECT FK
FROM table1
GROUP BY FK
HAVING COUNT(CASE column_entries WHEN 'ab3' THEN 1 END) = 0
    OR COUNT(CASE column_entries WHEN 'ab4' THEN 1 END) = 0
; 
```

这两个条件聚合分别计数`'ab3'`和`'ab4'`条目。如果两者的结果都大于 0，则对应的结果`FK`同时具有`'ab3'`，`'ab4'`因此不会返回。如果至少有一个计数评估为 0，则`FK`认为满足要求。

# haskell - lambda 表达式中的 Haskell 类型签名

> ID：14540704
> 
> 赞同：15
> 
> 时间：2013-01-26T19:30:02.980
> 
> 标签：haskell

假设我的程序中有一个 lambda 表达式，例如：

```
\x -> f $ x + 1 
```

我想为类型安全指定 x 必须是整数。就像是：

```
-- WARNING: bad code
\x::Int -> f $ x + 1 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-26T19:34:56.633

你可以改写`\x -> f $ (x::Int) + 1`。或者，也许更具可读性，`\x -> f (x + 1 :: Int)`. 请注意，类型签名通常包含其左侧的所有内容，在语法意义上的最左侧，这与延伸到右侧的 lambda 表达式相反。

GHC 扩展`ScopedTypeVariables`顺便允许直接在模式中编写签名，这将允许`\(x::Int) -> f $ x + 1`. 但是该扩展还添加了许多您可能不想担心的其他东西；我不会仅仅为了语法上的好处而打开它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-26T21:20:13.687

我想通过指出您不需要 `ScopedTypeVariables`. 即使您从不使用该变量，您仍然可以执行以下操作：

```
\x -> let _ = (x :: T) in someExpressionThatDoesNotUseX 
```

# java - 将 int 值转换为不同的字符串值

> ID：14540709
> 
> 赞同：-1
> 
> 时间：2013-01-26T19:30:12.593
> 
> 标签：java, string, integer, type-conversion

> **可能重复：**
> [如何在java中将数字转换为单词](https://stackoverflow.com/questions/3911966/how-to-convert-number-to-words-in-java)

我有一些 Java 代码，它们接受参数，将它们转换为 int 值，对它们进行一些数学运算，然后将它们输出为最大为 10 的 int 值。我需要获取这些输出 int 值并将它们转换为另一个字符串。

例如：

```
int a = 6;
int b = a + 2;
System.out.print(b); 
```

这将打印值 8。我知道我可以将 int b 转换为字符串：

```
int a = 6;
int b = a + 2;
String b1 = Integer.toString(b);
System.out.print(b1); 
```

这会将我的 int b 转换为 String b1，但输出仍然是 8。由于我的值将只是 1 到 10 的数字，我如何将这些值转换为对应的字符串（1 = 1，2 = 2，等）我知道我必须声明值 8 是字符串 8，但我无法弄清楚。我什至走在正确的道路上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:35:50.160

这是一种方法：

```
String[] asString = new String[] { "zero", "one", "two" };    
int num = 1;
String oneAsString = asString[num]; // equals "one" 
```

或者更好的说法：

```
public class NumberConverter {
  private static final String[] AS_STRING = new String[] { "zero", "one", "two" };    

  public static String getTextualRepresentation(int n) {
    if (n>=AS_STRING.length || n<0) {
       throw new IllegalArgumentException("That number is not yet handled");
    }
    return AS_STRING[n];
  }
} 
```

--

编辑参见：[How to convert number to words in java](https://stackoverflow.com/questions/3911966/how-to-convert-number-to-words-in-java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T19:36:28.073

有几种不同的方法可以做到这一点。我个人的喜好是这样的。

```
String text[] = {"zero","one","two","three","four","five","six","seven",
    "eight","nine","ten"};

void printValue(int val, int off)
{
   //Verify the values are in range do whatever else
   System.out.print(text[val+off]);
} 
```

# angularjs - 调用服务工厂函数（http）的角度选择

> ID：14540711
> 
> 赞同：0
> 
> 时间：2013-01-26T19:30:17.323
> 
> 标签：angularjs

简单的情况，我有一个服务来检索一个名为`lists(<list_id>).` 但我不明白如何自动调用该服务......

## [JS Fiddle 我的问题](http://jsfiddle.net/ncapito/4PZGs/)

```
<select name='lists' 
   ng-model="list" 
   ng-options="t.title for t in lists._lists">
       <option value="">-- chose list --</option>
</select>
<h1>List was  -{{ list.title }}</h1>
<ul>
    <li ng-repeat="t in lists.lists(list)" class='task'>{{t.title}}: {{t.id}}</li>
 </ul> 
```

* * *

# 主要服务

```
angular.module('service',['ngResource']).factory('List', function($http) {
  var List= function(data) {
#magic to build List from json
#save to ._lists
#or if just one build List
  }
  List.lists = function(list_id, query) {
    url = '/tasks/lists/';
    #if list_id is there use it else give all lists
    return $http.get(url).then(function(response) {
      return new List(response.data);
   });
 }; 
```

# 主要js

```
//this initially populates lists._lists with all the available lists
//it also has a List method on the object   
$scope.lists= List.lists(); 
```

当我更改选择时，我可以看到标题更新。我的控制器有一个“列表”方法，它接受一个列表对象，并会执行查询，但它永远不会被调用。

关于我所缺少的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:13:26.067

我认为最好对所选列表的更改做出反应，然后查询服务。否则，您将查询每个 $digest 循环的服务。

```
$scope.$watch('list', function(list) {
       $scope.tasks = List.lists(list).tasks;    }); 
```

使用此解决方案更新小提琴：http: [//jsfiddle.net/4PZGs/1/](http://jsfiddle.net/4PZGs/1/)

（但没有得到你的数据操作，但可能是一些更复杂的代码......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:10:01.600

您不能从模板调用服务 - 您也不想这样做，因为这意味着您没有适当的关注点分离。解决方案是使用范围方法包装您的服务：

```
$scope.getList = function ( list ) {
    if ( ! angular.isDefined( list ) ) return;
    $scope.currentList = List.lists(list);
} 
```

然后在您的模板中使用*它：*

```
<ul>
    <li ng-repeat="t in currentList" class='task'>{{t.title}}: {{t.id}}</li>
</ul> 
```

# xna - 使用旋转在 XNA 中绘制 2D 线

> ID：14540712
> 
> 赞同：0
> 
> 时间：2013-01-26T19:30:17.970
> 
> 标签：xna, rotation, 2d, line

我正在尝试从玩家到目标小行星画一条线作为“Grapple”钩子，我在 xna 中找到了一些在 2D 中执行此操作的示例，但我的“位置”和“原点”vector2 似乎会根据谁以及何时使用它们。在线条的情况下，它们似乎在目标的相反方向上绘制位置（大约 100 像素）的右侧，并在玩家移动时围绕目标左侧某处的原点旋转。

这是玩家代码，包括抓斗代码和目标分配

```
namespace Sparatius.Sprites
{
    public class PlayerSprite : BaseSprite
    {
        ControlInput controlInput;

        Texture2D Grapple;

        SpriteFont font;

        bool LeftGrapple = false, RightGrapple = false;

        int GrappleRange = 300;

        Sprites.AsteroidSprite LeftTarget, RightTarget;

        public BoundingSphere grappleHitBox
        {
            get { return new BoundingSphere(new Vector3(Position.X + Origin.X, Position.Y + Origin.Y, 0), GrappleRange); }
        }

        public float speed
        {
            get { return Speed; }
        }

        public PlayerSprite(Vector2 spriteLocal)
            :base(spriteLocal)
        {
            this.Rotation = 0;
            this.Speed = 0;
            this.FrameCount = new Point(4, 2);
            this.ColorTint = Color.White;
            this.controlInput = new ControlInput();
        }

        public void LoadContent(ContentManager content)
        {
            Texture = content.Load<Texture2D>("Sprites/PinballSpin");
            font = content.Load<SpriteFont>("Fonts/Font1");
            Grapple = content.Load<Texture2D>("Sprites/Grapple");
            FrameSize = new Point((int)Texture.Width / FrameCount.X, (int)Texture.Height / FrameCount.Y);
            Origin = new Vector2(FrameSize.X / 2, FrameSize.Y / 2);

            Animation = new Animation(Texture, FrameSize);
        }

        public override void Update(GameTime gameTime)
        {
            base.Update(gameTime);

            controlInput.GetControlStates();

            if (controlInput.JustPressed(Keys.W))
                Speed += 2;
            else if (controlInput.JustPressed(Keys.S))
                Speed -= 2;

            if (controlInput.IsHeld(Keys.A))
                Rotation -= 0.05f;
            if (controlInput.IsHeld(Keys.D))
                Rotation += 0.05f;

            if (LeftTarget != null)
            {
                LeftTarget.Distance = Vector2.Distance(Position, LeftTarget.Position);
                if (LeftTarget.Distance > GrappleRange)
                {
                    LeftTarget.isTarget = false;
                    LeftTarget = null;
                }
                if (controlInput.IsHeld(Keys.Q))
                {
                    LeftGrapple = true;
                }
                else
                    LeftGrapple = false;
            }
            if (RightTarget != null)
            {
                RightTarget.Distance = Vector2.Distance(Position, RightTarget.Position);
                if (RightTarget.Distance > GrappleRange)
                {
                    RightTarget.isTarget = false;
                    RightTarget = null;
                }
                if (controlInput.IsHeld(Keys.E))
                {
                    RightGrapple = true;
                }
                else
                    RightGrapple = false;
            }
        }

        public override void Draw(SpriteBatch spriteBatch)
        {
            base.Draw(spriteBatch);

            if (LeftGrapple)
            {
                float leftRotation = (float)Math.Atan2(LeftTarget.Position.Y - Position.Y, LeftTarget.Position.X - Position.X);
                //spriteBatch.Draw(Texture, Position, null, ColorTint, leftRotation, Position, 1f, SpriteEffects.None, 0f);
                spriteBatch.Draw(Grapple,
                    new Rectangle((int)Position.X, (int)Position.Y, 2, (int)LeftTarget.Distance),
                    null, Color.Blue, leftRotation, Position, SpriteEffects.None, 0f);
            }
            if (RightGrapple)
            {
                float rightRotation = (float)Math.Atan2(RightTarget.Position.Y - Position.Y, RightTarget.Position.X - Position.X);
                //spriteBatch.Draw(Texture, Position, null, ColorTint, rightRotation, Position, 1f, SpriteEffects.None, 0f);
                spriteBatch.Draw(Grapple,
                    new Rectangle((int)Position.X, (int)Position.Y, 2, (int)RightTarget.Distance),
                    null, Color.Blue, rightRotation, Position, SpriteEffects.None, 0f);
            }

            spriteBatch.DrawString(font, "Player Rotation: " + Rotation, Position, Color.Red);
            spriteBatch.DrawString(font, "Player RoationDegree: " + (int)MathHelper.ToDegrees(Rotation), origin, Color.Blue);
        }

        public void GrappleCheck(AsteroidSprite target)
        {
            float targetTragectory = (float)Math.Atan2(Position.Y - target.Position.Y, Position.X - target.Position.X);

            if ((targetTragectory < (rotation - (float)MathHelper.PiOver4)) && ((targetTragectory > (rotation - (float)MathHelper.Pi + (float)MathHelper.PiOver4))))
            {
                target.Distance = Vector2.Distance(Position, target.Position);
                if (LeftTarget != null)
                {
                    if (LeftTarget.Distance > target.Distance)
                    {
                        LeftTarget.isTarget = false;
                        LeftTarget = target;
                        LeftTarget.isTarget = true;
                    }
                }
                else
                {
                    LeftTarget = target;
                    LeftTarget.isTarget = true;
                }
            }

            if ((targetTragectory > (rotation + (float)MathHelper.PiOver4)) && ((targetTragectory < (rotation + (float)MathHelper.Pi - (float)MathHelper.PiOver4))))
            {
                target.Distance = Vector2.Distance(Position, target.Position);
                if (RightTarget != null)
                {
                    if (RightTarget.Distance > target.Distance)
                    {
                        RightTarget.isTarget = false;
                        RightTarget = target;
                        RightTarget.isTarget = true;
                    }
                }
                else
                {
                    RightTarget = target;
                    RightTarget.isTarget = true;
                }
            }
        }
    }
} 
```

知道出了什么问题吗？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T21:09:49.087

```
public static void DrawLine(SpriteBatch spriteBatch, Vector2 begin, Vector2 end, Color color, int width = 1)
    {
        Rectangle r = new Rectangle((int)begin.X, (int)begin.Y, (int)(end - begin).Length()+width, width);
        Vector2 v = Vector2.Normalize(begin - end);
        float angle = (float)Math.Acos(Vector2.Dot(v, -Vector2.UnitX));
        if (begin.Y > end.Y) angle = MathHelper.TwoPi - angle;
        spriteBatch.Draw(Pixel, r, null, color, angle, Vector2.Zero, SpriteEffects.None, 0);
    } 
```

像素只是一个 1x1 的精灵

您还可以使用`this`关键字来制作方便的扩展方法。

# php - PHP数据上传安全与优化

> ID：14540715
> 
> 赞同：0
> 
> 时间：2013-01-26T19:30:34.243
> 
> 标签：php, security, upload

我正在创建一个 PHP 网站。我想上传视频。我希望所有流量都安全，所以我加密所有流量。

如果我在客户端压缩数据并在服务器端解压缩，是否会在上传优化和速度方面做出改变？

# c - 为 GTK+ 创建网格布局

> ID：14540717
> 
> 赞同：0
> 
> 时间：2013-01-26T19:30:44.080
> 
> 标签：c, gtk

我正在用 C 语言编写一个应用程序，并且我使用 GTK+ 作为 GUI 部分。我正在阅读有关布局部分以及如何使用垂直框和水平框将我的网格组织成网格。但是我在一些论坛上读到不推荐使用 gtk_vbox_new() 函数。创建网格以便我可以使用 GTK+ 定位小部件的最佳方法是什么？我应该使用一个表格并只是处理它，还是有什么方法可以定位我的元素，类似于我在 HTML 中使用 CSS 定位元素的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T02:44:15.747

`gtk_vbox_new`不赞成使用`gtk_box_new`和传入`GTK_ORIENTATION_VERTICAL`. 如果您需要表格布局，`GtkGrid`则可以选择（不要使用 deprecated `GtkTable`）。

设计布局的一个好方法是使用[Glade](http://glade.gnome.org/)。即使您最终对小部件进行硬编码而不是使用`GtkBuilder`，Glade 也将允许您快速布局小部件并实时尝试不同的设计。

# php - 只允许在下拉菜单中选择可用日期？php mysql html

> ID：14540719
> 
> 赞同：-1
> 
> 时间：2013-01-26T19:30:57.643
> 
> 标签：php, html, mysql

在用户填写并将他们的数据发送到 mysl 数据库的表单上，有一个包含日期的下拉菜单。我需要做的是制作下拉菜单，以便它只包含可用的日期。所以我可以查询数据库以找到某个日期，如果该日期已经有事件，那么我可以以某种方式从下拉菜单中取出该日期？我可以想象这是冗长而复杂的，并且想知道是否有人知道如何有效地做到这一点？有很多日期，比如两个月，我真的不想对每个日期进行查询，但我不完全确定我还能做什么。感谢您的回复。

我还没有尝试过任何东西，只有想法。我只是想知道是否有人有更好的想法，它们没有从 mysql 获取每个可用日期，而是从 mysql 查询不可用的日期，然后从下拉列表中删除该日期？删除表单的其余输入 - html：

```
<div class="title"><h1>Booking Private Hire</h1></div>
</head>
<body>
<form name="second" onsubmit="return validateFormOnSubmit(this)" method="POST"     action="thirdform.php">
<table summary="Second form">

<tr>
<td><label for="date">Date:</label></td>
<td><select name="date" size="1">
<option value="01-03-13">01-03-13</option>
<option value="02-03-13">02-03-13</option>
<option value="03-03-13">03-03-13</option>
<option value="04-03-13">04-03-13</option>
<option value="05-03-13">05-03-13</option>
<option value="06-03-13">06-03-13</option>
<option value="07-03-13">07-03-13</option>
<option value="08-03-13">08-03-13</option>
<option value="09-03-13">09-03-13</option>
<option value="10-03-13">10-03-13</option>
<option value="11-03-13">11-03-13</option>
<option value="12-03-13">12-03-13</option>
<option value="13-03-13">13-03-13</option>
<option value="14-03-13">14-03-13</option>
<option value="15-03-13">15-03-13</option>
<option value="16-03-13">16-03-13</option>
<option value="17-03-13">17-03-13</option>
<option value="18-03-13">18-03-13</option>
<option value="19-03-13">19-03-13</option>
<option value="20-03-13">20-03-13</option>
<option value="21-03-13">21-03-13</option>
<option value="22-03-13">22-03-13</option>
<option value="23-03-13">23-03-13</option>
<option value="24-03-13">24-03-13</option>
<option value="25-03-13">25-03-13</option>
<option value="26-03-13">26-03-13</option>
<option value="27-03-13">27-03-13</option>
<option value="28-03-13">28-03-13</option>
<option value="29-03-13">29-03-13</option>
<option value="30-03-13">30-03-13</option>
<option value="31-03-13">31-03-13</option>
</select></td></tr>
<tr>
<td>&nbsp;</td>
<td><input name="Continue" value="Continue" type="submit" ></td>
<td>&nbsp;</td>
</tr> 

</table>
</form> 

</body>
</html> 
```

目前我有一张租用表，如下所示：

hireid int(5)
customerid int(5)
driverid int(5)
time time
endtime time
date varchar(8)
length int(11)
Pickuplocation varchar(25)
destination varchar(25)
useofbus varchar(20)
numberofpeople int(16)
cost decimal(10,2)
日 int(2)
月 int(2)
年 int(2)
付款 varchar(6)
信息 varchar(6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:34:29.610

您需要创建一个临时参考表来比较和查询预订的缺失日期。

[存储过程来完成它](https://stackoverflow.com/questions/510012/get-a-list-of-dates-between-two-dates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:39:53.517

您需要创建一个 SQL 查询，它只选择没有事件链接的日期。
我不知道，你的 er-scheme 看起来如何，所以我不能告诉你这个查询应该是什么样子。
但是您可能想查看 sql 语句[NOT EXISTS](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)。

# oracle - ORACLE: multiple column subqueries

> ID：14540722
> 
> 赞同：-2
> 
> 时间：2013-01-26T19:31:15.910
> 
> 标签：oracle, select, subquery

This is from Oracle Database 10g: SQL Fundamentals. Original Oracle textbook. Francly speaking, this all is actual so far.

There is a task which troubles me:

**Display the last name, department name, and salary of any employee whose salary and commission match the salary and commission of many employee located in location ID 1700.**

The topic to be learned is multiple column subqueries. This mean that we can't deviate from the offered model which is:

```
SELECT column, column, ...
FROM table
WHERE (column, column, ...) IN
(SELECT column, column, ...
FROM table
WHERE condition); 
```

Well, my database:

```
describe employees
Name           Null     Type         
-------------- -------- ------------ 
EMPLOYEE_ID    NOT NULL NUMBER(6)    
FIRST_NAME              VARCHAR2(20) 
LAST_NAME      NOT NULL VARCHAR2(25) 
EMAIL          NOT NULL VARCHAR2(25) 
PHONE_NUMBER            VARCHAR2(20) 
HIRE_DATE      NOT NULL DATE         
JOB_ID         NOT NULL VARCHAR2(10) 
SALARY                  NUMBER(8,2)  
COMMISSION_PCT          NUMBER(2,2)  
MANAGER_ID              NUMBER(6)    
DEPARTMENT_ID           NUMBER(4)    

describe departments
Name            Null     Type         
--------------- -------- ------------ 
DEPARTMENT_ID   NOT NULL NUMBER(4)    
DEPARTMENT_NAME NOT NULL VARCHAR2(30) 
MANAGER_ID               NUMBER(6)    
LOCATION_ID              NUMBER(4) 
```

There is a solution:

```
select
  e.last_name,
  d.department_name, 
  e.salary
from employees e, departments d
where e.department_id = d.department_id
and (salary, nvl(commission_pct, 0)) in
  (select salary, nvl(commission_pct, 0)
   from employees e, departments d
   where e.department_id = d.department_id
   and d.location_id = 1700); 
```

SELECTED 36 ROWS.

Well, I started checking. It seems that employees from location 1700 duplicated against themselves. Look: we take the whole list of employees and then juxtapose it with employees from location 1700\. Of course, there will be duplicates.

I have prepared an excel file with some data (all employees, employees from location 1700, the result of my own desired result etc.). In the file it is more picturesque, with examples and so on. Please, have a look.

This is the file: [https://skydrive.live.com/redir?resid=8CDFFBA921B002FE!150&authkey=!ADMRAE466BIunQM](https://skydrive.live.com/redir?resid=8CDFFBA921B002FE!150&authkey=!ADMRAE466BIunQM)

Well, what I would like to do is to control that no employee is compared with themselves. This was my variant bevore I checked the solution.

```
select lnme, dpt, slry 
from
(
  select       
      employee_id eid,
      last_name lnme, 
      salary slry, 
      nvl(commission_pct,0) cpct,
      d.department_name dpt,
      location_id
  from employees e
  left join departments d
  on e.department_id = d.department_id
)
where (slry, cpct) in
(select 
    employee_id ide,
    salary slry, 
    nvl(commission_pct,0) cpct    
from employees e
join departments d
on e.department_id = d.department_id and location_id = 1700)
and ide <> eid 
```

I wanted to make sure that no employee is compared with the same employee. But I failed.

Could you comment on all this situation: 1\. Whether I'm completely wrong and the solution of Oracle is perfect. 2\. If Oracle is wrong, could you help me with this code?

Thank you in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:55:35.400

该问题要求您识别其薪水和佣金与部门 1700 中员工的薪水和薪水的任意组合匹配的任何*员工*。该问题并未说要从该部门排除员工。所以它们出现在结果集中是完全正确的。

> “一个员工比不上自己。”

您不是在匹配员工，而是在匹配*薪水*。碰巧的是，目标工资列表是从部门 1700 的子查询中生成的：它可以很容易地成为 CSV 文件中的数字列表。

* * *

让我们做一个思想实验。部门 1700 有 3 名员工：

```
name       | salary  | comm
-----------+---------+-----
CHIP       |  10,100 |    0  
RUNCITER   |  12,200 |    0  
CONLEY     |  10,500 |    0 
```

公司里没有其他人的收入超过 10K。

那么这个问题的答案是什么：有多少员工的薪水和佣金与部门 1700 中任何员工的薪水和佣金相匹配？

1.  三
2.  零

然后乔得到了适度的加薪，薪水如下：

```
name       | salary  | comm
-----------+---------+-----
CHIP       |  10,500 |    0  
RUNCITER   |  12,200 |    0  
CONLEY     |  10,500 |    0 
```

那么现在同一个问题的答案是什么？

1.  还是三个
2.  二

在这两种情况下，答案都是“三”。

为什么？

因为 SQL 是一种基于集合的编程语言，所以在部门 1700 中获得确切工资和佣金的所有员工的集合必须包括在部门 1700 工作的所有员工。

有一个不同的集合，它是所有在部门 1700 中赚取确切工资和佣金的员工的集合，他们自己不在部门 1700 工作。但这不是 SQL 基础知识测验要寻找的集合。

# sql - Calculating Geometrically Linked Returns in SQL SERVER 2008

> ID：14540724
> 
> 赞同：2
> 
> 时间：2013-01-26T19:31:31.127
> 
> 标签：sql, sql-server, sql-server-2008

Calculating geometrically link returns

How do you multiply record2 * record1?

The desire is to return a value for actual rate and annulized rate

Given table unterval:

```
 EndDate    PctReturn
-------------------------------
1\. 05/31/06   -0.2271835
2\. 06/30/06   -0.1095986
3\. 07/31/06    0.6984908
4\. 08/31/06    1.4865360
5\. 09/30/06    0.8938896 
```

The desired output should look like this:

```
EndDate    PctReturn    Percentage   UnitReturn         
05/31/06   -0.2271835   -0.002272    0.997728               
06/30/06   -0.1095986   -0.001096    0.996634669                
07/31/06    0.6984908    0.006985    1.00359607             
08/31/06    1.4865360    0.014865    1.018514887                
09/30/06    0.8938896    0.008939    1.027619286

Percentage = PctReturn/100                          

UnitReturn  (1 + S1) x (1 + S2) x ... (1 + Sn) - 1 
```

Aggregating values desired:

```
Actual Rate 2.761928596             
Annulized   6.757253223 
```

Mathematics on aggregating value:

```
 Actual Rate    1.027619    1.027619-1  =   0.027619    * 100 = 2.761928596

 Annulized Rate 6.757253    (ActualRate^(12/number of intervals)-1)*100

 Number of intervals in Example = 5 
```

there are only 5 records or intervals

I did try utilizing the sum in the select statement but this did not allow for multiplying record2 by record1 to link returns. I thought utilizing the while function would allow for stepping record by record to multiply up the values of unitreturn. My starter level in SQL has me looking for help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T21:16:33.053

在 SQL Server 中获取产品有两种选择。

**1\. 使用对数和指数进行模拟：**

[SQL小提琴](http://sqlfiddle.com/#!3/7339e/8)

```
create table returns
(
  returnDate date,
  returnValue float
)

insert into returns values('05/31/06', -0.002271835)
insert into returns values('06/30/06', -0.001095986)
insert into returns values('07/31/06', 0.006984908)
insert into returns values('08/31/06', 0.014865360)
insert into returns values('09/30/06', 0.008938896)

select totalReturn = power
  (
    cast(10.0 as float)
    , sum(log10(returnValue + 1.0))
  ) - 1
from returns;

with tr as
(
  select totalReturn = power
  (
    cast(10.0 as float)
    , sum(log10(returnValue + 1.0))
  ) - 1
  , months = cast(count(1) as float)
  from returns
)
select annualized = power(totalReturn + 1, (1.0 / (months / 12.0))) - 1
from tr; 
```

这利用日志和指数来模拟产品计算。更多信息：[用户定义函数](http://www.sql-server-performance.com/2007/user-defined-functions/)。

这里的一个问题是它会在 return < -100% 时失败。如果您不期望这些没关系，否则您需要将任何值设置为 < 100% 到 -100%。

然后，您可以根据需要使用此实际回报来获得年化回报。

**2\. 使用 CLR 定义自定义聚合：**

请参阅[在线图书](http://msdn.microsoft.com/en-us/library/ms182741%28v=sql.100%29.aspx)。

您可以创建一个 CLR 自定义函数，然后将其链接到一个聚合以在您的查询中使用。这是更多的工作，您必须在服务器上启用 CLR，但一旦完成，您就可以根据需要使用它。

# ember.js - createRecord called w/o params does not add object to collection

> ID：14540727
> 
> 赞同：2
> 
> 时间：2013-01-26T19:31:43.150
> 
> 标签：ember.js, ember-data

Using:

*   ember-1.0.0-pre.4.js
*   ember-data.js REVISION:11
*   handlebars-1.0.rc.2.js

Please have a look at this [jsFiddle](http://jsfiddle.net/bazzel/BkFYd/) illustrating the described problem.

I have a list of items that are displayed in a template. The template contain a linkTo helper that let's the controller add an item to the collection and is shown as a text input on the page.

Adding the item to the collection is done by the controller:

```
App.TodoItem = DS.Model.extend({
    title: DS.attr('string', { defaultValue: "unknown" })
});

App.Router.map(function () {
    this.resource('todo_items')
});

App.TodoItemsRoute = Em.Route.extend({
    model: function () {
        return App.TodoItem.find();
    }
});

App.TodoItemsController = Em.ArrayController.extend({
    addTodoItem: function () {
        App.TodoItem.createRecord();
    }
}); 
```

If I want the new item to be shown is the list, I have to pass params to `createRecord`, otherwise the item is not visible. The same behaviour can be reproduced by using Chrome's inspector and then the item can be made visible as follows:

```
// Open the jsFiddle http://jsfiddle.net/bazzel/BkFYd/ and select 'result(fiddle.jshell.net) in the inspector, then:
var item = App.TodoItem.createRecord();
// Nothing visible yet.

item.set('title', 'Whatever');
// Now the text input appear with the title as its value. 
```

Is this expected behaviour and if so, what am I missing here?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:31:04.783

我花时间重做你的例子，我觉得应该用 Emberjs 正确地完成事情。您应该确保交易并正确定义您的观点，然后您的所有问题都会得到处理。所以我认为你应该这样做

*   为文本字段定义一个视图以捕获输入的值或将其绑定到模型属性。

*   列出项目和向列表添加新项目应在两个不同的视图中完成，不应混合在一起

> ```
> <script type="text/x-handlebars">
>     {{outlet}}
>     <div>
>         {{outlet 'addItem'}}
>     </div>
> </script>
> 
> <script type="text/x-handlebars" data-template-name="todo_items">
>     {{#linkTo 'todo_items.new'}}Add Todo Item{{/linkTo}}
>   <ul>
>     {{#each item in controller}}
>         <li>
>             {{#unless item.isNew}}
>               {{item.title}}
>             {{/unless}}
>         </li>
>     {{/each}}
>     </ul>
> </script> 
> ```

*   为列出项目和添加新项目定义不同的状态

*   要从将文本字段值自动绑定到模型属性中受益，您需要将 an 关联`ObjectController`到`TodoItemsNew`路由

*   最后，利用事务创建并提交记录到存储

> ```
> window.App = Em.Application.create();
> 
> App.TodoItem = DS.Model.extend({
>     title: DS.attr('string')
> });
> 
> App.TodoItem.FIXTURES = [{
>     id: 1,
>     title: 'Lorem'
> }, {
>     id: 2,
>     title: 'Ipsum'
> }];
> 
> App.store = DS.Store.create({
>     revision: 11,
>     adapter: DS.FixtureAdapter.create()
> });
> 
> App.Router.map(function () {
>     this.resource('todo_items',function(){
>       this.route('new');
>     })
> });
> 
> App.IndexRoute = Em.Route.extend({
>     redirect: function () {
>         this.transitionTo('todo_items');
>     }
> });
> 
> App.TodoItemsRoute = Em.Route.extend({
>     model: function () {
>         return App.TodoItem.find();
>     }
> });
> 
> App.TodoItemsNewRoute = Em.Route.extend({
>     transaction: App.store.transaction(),
> 
>     setupController:function(controller) {
>         console.info(controller.toString());
>         controller.set('content',this.transaction.createRecord(App.TodoItem));
>     },
> 
>     renderTemplate: function() {
>         this.render('addItem',{
>             into:'application',
>             outlet:'addItem',
>         })
>     },
>     events: {
>       addItem: function() {
>           this.transaction.commit();
>             this.transitionTo('todo_items');
>       }
>     }
> });
> 
> App.TodoItemsController = Em.ArrayController.extend();
> App.TodoItemsNewController = Em.ObjectController.extend();
> App.TextField = Ember.TextField.extend({
>     insertNewline: function () {
>       this.get('controller').send('addItem')
>     }
> }); 
> ```

[这里](http://jsfiddle.net/AaZGw/1/)' 是 jsfiddle 上示例的工作版本。希望我帮助这个例子澄清了你的一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:42:22.513

谢谢肯回答我的问题。在 Ember 中这样做确实感觉像是一种更合适的方式。但是，我仍然认为很难掌握从哪里可以访问哪些对象......

你的例子启发了我重写我的代码。我还对您的方法进行了一些更改：

*   我不确定这是否是最佳实践，我没有创建`store`实例。相反，我定义了一个`Store`类。
*   **TodoItemsNewController**的内容是通过调用相应路由上的模型属性来设置的。
*   TodoItemsNewRoute 中的 renderTemplate 只需要 outlet 键。

    ```
    <script type="text/x-handlebars">
        {{outlet}}
    </script>

    <script type="text/x-handlebars" data-template-name="todo_items">
        {{#linkTo 'todo_items.new'}}Add Todo Item{{/linkTo}}
        <ul>
        {{outlet "addItem"}}
        {{#each controller}}
            <li>
            {{#unless isNew}}
                {{title}}
            {{/unless}}
            </li>
        {{/each}}
        </ul>
    </script>

    <script type="text/x-handlebars" data-template-name="todo_items/new">
        {{view Ember.TextField valueBinding="title" placeholder="Enter title"}} 
    ```

    ```
    window.App = Em.Application.create();

    App.TodoItem = DS.Model.extend({
        title: DS.attr('string', {
            defaultValue: "unknown"
        })
    });

    App.TodoItem.FIXTURES = [{
        id: 1,
        title: 'Lorem'
    }, {
        id: 2,
        title: 'Ipsum'
    }];

    App.Store = DS.Store.extend({
        revision: 11,
        adapter: DS.FixtureAdapter.create()
    });

    App.Router.map(function() {
        this.resource('todo_items', function() {
            this.route('new');
        });
    });

    App.IndexRoute = Em.Route.extend({
        redirect: function() {
            this.transitionTo('todo_items');
        }
    });

    App.TodoItemsRoute = Em.Route.extend({
        model: function() {
            return App.TodoItem.find();
        }
    });

    App.TodoItemsNewRoute = Em.Route.extend({
        model: function() {
            return App.TodoItem.createRecord();
        },
        renderTemplate: function() {
            this.render({
                outlet: 'addItem'
            });
        }
    });

    App.TodoItemsNewView = Em.View.extend({
        tagName: 'li'
    }); 
    ```

更新的示例在[jsFiddle](http://jsfiddle.net/bazzel/BkFYd/)上。

欢迎任何评论。

# android - Using Android device credentials to access critical part of the app

> ID：14540728
> 
> 赞同：2
> 
> 时间：2013-01-26T19:31:43.607
> 
> 标签：android, security

How do I show lock screen if user tries to access critical part of my application. I want him to be able to access the critical part only if he can then unlock the device using the device credentials.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:42:42.213

您可以为您的应用程序创建一个密码屏幕，而不是依赖于 android 的安全锁。因为您无法在所有版本的 android 上管理锁屏。

# ruby-on-rails - How do I map an application/json POST request to the params in rails?

> ID：14540729
> 
> 赞同：8
> 
> 时间：2013-01-26T19:31:46.767
> 
> 标签：ruby-on-rails

I am being passed in a json body for a post request, but i'm not sure the best way to map this json body to request params in rails:

```
{
   username: "example-user",
   password: "password",
   email: "example@gmail.com",
} 
```

and in the controller i wish to acccess params["username"], is this possible? how should i do it?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T19:36:48.023

有关全面信息，请参阅[指南。](http://guides.rubyonrails.org/action_controller_overview.html#json-xml-parameters)

您可以简单地访问`params[:username]`甚至`params['username']`因为 params 是一个`HashWithIndifferentAccess`.

请注意，您可以使用调试器 gem 轻松检查参数，或者`raise`在开发模式下在控制器操作中猛击 a 以在错误页面上查看它们。

# c++ - 使用元组和可变参数模板编译问题

> ID：14540730
> 
> 赞同：0
> 
> 时间：2013-01-26T19:31:47.770
> 
> 标签：c++, tuples, variadic-templates, template-meta-programming, decltype

我遇到了一个看似复杂的问题。

我正在尝试为 zip 函数创建一个迭代器类（试图模仿 python 的生成器 zip 函数）。

我在[http://ideone.com/c7rm40上全班](http://ideone.com/c7rm40)

```
 template<size_t I = 0, typename... Tp>
  inline typename std::enable_if<(I == sizeof...(Tp)), typename std::tuple<decltype(*Tp)...>>::type
  constructImpl(std::tuple<Tp...> const& its) {

core/StarAlgorithm.hpp|550 col 3| error: expected ‘(’ before ‘constructImpl’
core/StarAlgorithm.hpp|550 col 3| error: expected ‘&gt;’ before ‘constructImpl’
core/StarAlgorithm.hpp|550 col 45| error: template argument 2 is invalid
core/StarAlgorithm.hpp|550 col 47| error: expected ‘::’ before ‘{’ token
core/StarAlgorithm.hpp|550 col 47| error: expected identifier before ‘{’ token
core/StarAlgorithm.hpp|550 col 47| error: expected unqualified-id before ‘{’ token 
```

我的问题是，这种方法是否有效？我不知道为什么它一定是错误的，或者编译器想从我这里得到什么。

但除此之外，如果我缺少一种更简单的方法，我会很高兴听到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:48:19.153

我猜问题是这`*Tp`不是`decltype`.

也许试试`declval`？

```
std::tuple<decltype(*std::declval<Tp>())...> 
```

或迭代器特征：

```
 std::tuple<typename std::iterator_traits<Tp>::value_type...> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:52:19.227

```
typename std::tuple<decltype(*Tp)...>>::type 
```

这根本没有意义，因为：

*   `Tp`是一个类型参数，所以`*Tp`没有任何意义。

*   `std::tuple`没有任何嵌套`::type`的 . 所以`std::tuple<whatever>::type`没有意义。

根据您的评论，我*想*您需要[`std::iterator_traits`](http://en.cppreference.com/w/cpp/iterator/iterator_traits)：

```
std::tuple<typename std::iterator_traits<Tp>::value_type...> 
```

希望有帮助。

# data-structures - Optimal vector data structure?

> ID：14540731
> 
> 赞同：3
> 
> 时间：2013-01-26T19:31:51.020
> 
> 标签：data-structures, vector, language-agnostic, dynamic-arrays

> **Possible Duplicate:**
> [A data structure supporting O(1) random access and worst-case O(1) append?](https://stackoverflow.com/questions/4834490/a-data-structure-supporting-o1-random-access-and-worst-case-o1-append)

I saw an answer a while ago on StackOverflow regarding a provably *optimal* `vector` ("array list") data structure, which, if I remember correctly, *lazily* copied elements onto a larger vector so that it wouldn't cause a huge pause every time the vector reallocated.

I remember it needed O(sqrt(n)) extra space for bookkeeping, and that the answer linked to a published paper, but that's about it... I'm having a really hard time searching for it (you can imagine that searches like *optimal vector* are getting me nowhere).

Where can I find the paper?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T20:14:30.573

我认为您所指的论文是Brodnik 等人的[“Resizable Arrays in Optimal Time and Space” 。](https://cs.uwaterloo.ca/research/tr/1999/09/CS-99-09.pdf)他们的数据结构使用您在问题中提到的惰性复制动态数组作为构建此结构的构建块。Stack Overflow 上有一个[较早的问题，](https://stackoverflow.com/questions/4834490/a-data-structure-supporting-o1-random-access-and-worst-case-o1-append)描述了延迟复制数据结构，这可能有助于更好地了解它的工作原理。

希望这可以帮助！

# javascript - innerhtml not working in Javascript

> ID：14540732
> 
> 赞同：0
> 
> 时间：2013-01-26T19:31:57.240
> 
> 标签：javascript

I want to insert values into a table using Javascript. It adds row and the required cells, and also an element i want to add, but the cell into which I want to insert a value through `.innerHTML` remains empty.

Here is my code.

```
 var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var cell1 = row.insertCell(0);
        var element1 = document.createElement("input");
        element1.type = "checkbox";
        element1.name="chkbox[]";
        cell1.appendChild(element1);

        var cell2 = row.insertCell(1);
        cell2.innerHTML = rowCount + 1;

        var cell3 = row.insertCell(2);
        var element2 = document.createElement("input");
        element2.type = "text";
        element2.name = "txtbox[]";
        cell3.appendChild(element2); 
```

`cell2` remains empty...what's wrong with it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:36:24.603

没有什么。它工作正常：

[http://jsfiddle.net/jmorgan123/vB8PN/](http://jsfiddle.net/jmorgan123/vB8PN/)

我在 Windows 7 上的 Chrome 和 FF 中对其进行了测试，并且都可以正常工作。

*   你确定要`tableID`提前设置？
*   如果`cell1`并且`cell3`正在设置，表中是否存在少于 3 列的预先存在的行？这可能会导致奇怪的行为。
*   我能想到的唯一另一种可能性——而且不太可能——是可能`cell2`已经在某个地方定义了。这**不应该**有什么区别（变量应该被重新分配）但我不知道你使用的是什么浏览器，所以它可能有一个错误。它可能会窒息，即使它不应该。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T20:21:56.240

这确实是一个奇怪的问题。正如大多数答案已经说明的那样；它在众所周知的现代浏览器中运行良好。

既然您已经说过您使用的是 Firefox 和 Chrome，那么它在您的浏览器中也应该可以正常工作（您是否更新到最新和最好的版本，或者您可能使用的是 beta 版本？

我唯一能找到的是 Quirksmode.org 上的参考资料： [http ://www.quirksmode.org/dom/w3c_html.html](http://www.quirksmode.org/dom/w3c_html.html)

它指出`innerHTML`IE5-9 中“几乎”支持。但这是我在那里发现的最有趣的部分：

> 在 IE 和 Konqueror`innerHTML`中更新表时无法正常工作。通过使用纯 DOM 方法来解决这个问题。请参阅的发明者对行为的[解释。](http://www.ericvasilik.com/2006/07/code-karma.html)`innerHTML`

这也可能与您的问题有关，因为您正在尝试使用`innerHTML`. 也许您应该查看他们链接的解释，看看它是否适合您的情况。

# sql - sql avoid cartesian product

> ID：14540736
> 
> 赞同：7
> 
> 时间：2013-01-26T19:32:23.980
> 
> 标签：sql

I'm pretty new to SQL and am struggling with a query (using Access, FWIW). I have Googled and searched StackOverflow, but I haven't seen this exact scenario. (That could also be because I don't know the correct search terms.)

I have two pretty simple tables that contain similar data.

```
table1: state, lname, fname, network
table2: state, lname, fname, network 
```

What I want is to find each person/state combo that match in the two tables plus the networks from each table that the person is in:

```
state, lname, fname, t1.network, t2.network. 
```

The person may be in more than one network in each table. I want to see each network (from both tables) that the person belongs to.

I started by using a JOIN as below:

```
SELECT t1.state, t1.lname, t1.fname, t1.network, t2.network
FROM t1 INNER JOIN t2 
ON t1.fname=t2.fname AND t1.lname=t2.lname AND t1.state=t2.state
GROUP BY t1.state, t1.lname, t1.fname, t1.network, t2.network 
```

I quickly figured out that I get a Cartesian product. So if "NY, Smith, John" was in two networks in t1 and three networks in t2 I would get something like this:

```
NY, Smith, John, NetworkA, NetworkB
NY, Smith, John, NetworkA, NetworkA
NY, Smith, John, NetworkB, NetworkA
NY, Smith, John, NetworkB, NetworkB
NY, Smith, John, NetworkA, NetworkC
NY, Smith, John, NetworkB, NetworkC 
```

What I really want to see is just:

```
NY, Smith, John, NetworkA, NetworkA
NY, Smith, John, NetworkB, NetworkB
NY, Smith, John, NULL, NetworkC 
```

Can anyone give me some advice on how to proceed or point me in the right direction?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T21:25:57.607

因此，看起来您希望每个表中的所有记录都相同，然后只希望每个表中的记录不同。这意味着您需要 UNION 3 组查询。

尝试这样的事情：

```
SELECT t1.state, 
   t1.lname, 
   t1.fname, 
   t1.network as t1Network, 
   t2.network as t2Network
FROM table1 t1 
   INNER JOIN table2 t2 
      ON t1.fname=t2.fname 
      AND t1.lname=t2.lname 
      AND t1.state=t2.state
      AND t1.network=t2.network
UNION 
SELECT t1.state, 
   t1.lname, 
   t1.fname, 
   t1.network as t1Network, 
   t2.network as t2Network
FROM table1 t1 
   LEFT JOIN table2 t2 
      ON t1.fname=t2.fname 
      AND t1.lname=t2.lname 
      AND t1.state=t2.state
      AND t1.network=t2.network
WHERE t2.network IS NULL
UNION 
SELECT t2.state, 
   t2.lname, 
   t2.fname, 
   t1.network as t1Network, 
   t2.network as t2Network
FROM table2 t2 
   LEFT JOIN table1 t1
      ON t1.fname=t2.fname 
      AND t1.lname=t2.lname 
      AND t1.state=t2.state
      AND t1.network=t2.network
WHERE t1.network IS NULL 
```

这应该会给你想要的结果。

这是要确认的[SQL Fiddle 。](http://sqlfiddle.com/#!3/55076/6)

- 编辑

今天不去想——你真的不需要第一个查询。您可以从第二个查询中删除 WHERE 条件，它的工作方式相同。疲劳的 ：-）

这是更新后的查询 - 两者都应该可以正常工作，这更容易阅读：

```
SELECT t1.state, 
   t1.lname, 
   t1.fname, 
   t1.network as t1Network, 
   t2.network as t2Network
FROM table1 t1 
   LEFT JOIN table2 t2 
      ON t1.fname=t2.fname 
      AND t1.lname=t2.lname 
      AND t1.state=t2.state
      AND t1.network=t2.network
UNION 
SELECT t2.state, 
   t2.lname, 
   t2.fname, 
   t1.network as t1Network, 
   t2.network as t2Network
FROM table2 t2 
   LEFT JOIN table1 t1
      ON t1.fname=t2.fname 
      AND t1.lname=t2.lname 
      AND t1.state=t2.state
      AND t1.network=t2.network
WHERE t1.network IS NULL 
```

和[更新的小提琴](http://sqlfiddle.com/#!3/55076/9)。

顺便说一句 - 这些都应该在 MSAccess 中工作，因为它支持`UNION`。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:36:10.767

```
SELECT DISTINCT t1.state, t1.lname, t1.fname, t1.network, t2.network
FROM t1 INNER JOIN t2 
ON t1.fname=t2.fname AND t1.lname=t2.lname AND t1.state=t2.state
GROUP BY t1.state, t1.lname, t1.fname, t1.network, t2.network 
```

你得到你想要的。

无论如何，几乎每个连接都是从构建笛卡尔积开始的（请参阅内部 SQL Server：查询书）。通常，当您尝试过滤掉数据时，创建的虚拟表将在您使用 distinct 时返回一个 distinct set。实际上，没有停止笛卡尔积。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T19:37:19.580

在这种情况下，UNION 应该是您最好的选择：

```
SELECT * FROM t1
UNION
SELECT * FROM t2 
```

（请注意，只有在两个表中的所有列都具有相同类型、相同顺序时，此查询才能按原样工作 - 否则最好指定每个所需的列，而不是使用`SELECT *`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T19:47:27.677

一种选择是使用完全外连接：

```
SELECT coalesce(t1.state, t2.state), coalesce(t1.lname, t2.lname), coalesce(t1.fname, t2.fname),
  t1.network, t2.network
FROM t1 FULL OUTER JOIN t2 
ON t1.fname=t2.fname AND t1.lname=t2.lname AND t1.state=t2.state
and t1.network = t2.network 
```

输出：

```
NY  SMITH   JOHN    A   A
NY  SMITH   JOHN    B   B
NY  SMITH   JOHN    NULL    C 
```

编辑：我没有看到您正在使用 Access - 这是标准 SQL，但我不知道它是否可以在那里工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T19:43:02.803

你想要的是一个UNION。

我会创建一个查询（在 SQL 视图中），其效果是：

```
SELECT state, lname, fname, network, network
FROM t1
UNION ALL
SELECT state, lname, fname, network, network
FROM t2 
```

然后我会创建其他查询来查询那个。

我会亲自尝试为您提供更多详细信息，但我没有安装 MS Access。

# integer - How to break apart an Integer in VHDL?

> ID：14540738
> 
> 赞同：2
> 
> 时间：2013-01-26T19:32:47.843
> 
> 标签：integer, vhdl

I need to break apart an integer result of a calculation in order to display its digits on a 7-segment but ISE won't 'accept' anything I try! Maybe convert it to integer_vector? How?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:47:04.467

我假设您想在七段显示器上显示以 10 为底的数字，在这种情况下，这实际上是一项相对复杂的任务。它涉及将在硬件中以二进制形式存储的整数转换为[二进制编码的小数](http://en.wikipedia.org/wiki/Binary-coded_decimal)。可以在[此处](http://vhdlguru.blogspot.no/2010/04/8-bit-binary-to-bcd-converter-double.html)找到 VHDL 中的 8 位二进制到 BCD 转换器。请注意，如果需要，将此算法扩展到更多位/数字并不是直接的。

另请注意，如果可以接受的话，以十六进制显示数字会简单得多。

# quickbooks - How do I get the balance of an account (on a given day) using the Quickbooks SDK?

> ID：14540741
> 
> 赞同：1
> 
> 时间：2013-01-26T19:33:10.797
> 
> 标签：quickbooks, qbfc

I'd like to query for an account balance as of a given day.

It looks like I could probably do this using the CustomDetailReportQuery, but seems like overkill.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:33:10.797

The only way I know how is to use the CustomDetailReportQuery and set the appropriate dates, and look for the Total Row.

```
public bool GetBalance(string sAccount, DateTime dt, out decimal balance)
{
    balance = 0.0M;

    IMsgSetRequest msr = sm.CreateMsgSetRequest("US", 7, 0);
    msr.Attributes.OnError = ENRqOnError.roeStop;

    ICustomDetailReportQuery q = msr.AppendCustomDetailReportQueryRq();
    q.ReportOpenBalanceAsOf.SetValue(ENReportOpenBalanceAsOf.robaoReportEndDate);
    q.DisplayReport.SetValue(false);
    q.IncludeColumnList.Add(ENIncludeColumn.icDate);
    q.IncludeColumnList.Add(ENIncludeColumn.icName);
    q.IncludeColumnList.Add(ENIncludeColumn.icMemo);
    q.IncludeColumnList.Add(ENIncludeColumn.icDebit);
    q.IncludeColumnList.Add(ENIncludeColumn.icCredit);
    q.IncludeColumnList.Add(ENIncludeColumn.icRunningBalance);
    q.ORReportPeriod.ReportPeriod.ToReportDate.SetValue(dt);
    q.ReportAccountFilter.ORReportAccountFilter.FullNameList.Add(sAccount);

    q.CustomDetailReportType.SetValue(ENCustomDetailReportType.cdrtCustomTxnDetail);
    q.SummarizeRowsBy.SetValue(ENSummarizeRowsBy.srbTotalOnly);

    IMsgSetResponse msrgrsp = sm.DoRequests(msr);
    try
    {
        if (msrgrsp.ResponseList.Count == 1)
        {
            IResponse resp = msrgrsp.ResponseList.GetAt(0);
            if (resp.StatusCode == 0)
            {
                IReportRet rp = (IReportRet)resp.Detail;
                IORReportData data = rp.ReportData.ORReportDataList.GetAt(rp.NumRows.GetValue() - 1);
                if (data.TotalRow != null)
                {
                    balance = decimal.Parse(data.TotalRow.ColDataList.GetAt(data.TotalRow.ColDataList.Count - 1).value.GetValue());
                    return true;
                }
            }
        }
    }
    catch (Exception e)
    {
        Log("Error finding balance of " + sAccount + ":");
        Log(e.Message);
    }

    return false;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T02:52:09.040

我更喜欢做一个[CustomSummaryReportQuery](https://developer-static.intuit.com/qbSDK-current/Common/newOSR/index.html)这将返回所需的最少数据。

大多数代码是标准的，但使用它来构建查询和遍历返回的报告。将 QBCustName 留空以获取所有客户。客户余额将在结束日期退还。

代码是 VB.net

```
Imports QBFC7Lib

Private Sub BuildCustomSummaryReportQueryRq(ByVal requestMsgSet As IMsgSetRequest, _
                                            ByVal EndDate As Date, ByVal QBCustName As String)

    Dim CustomSummaryReportQueryRq As ICustomSummaryReportQuery
    CustomSummaryReportQueryRq = requestMsgSet.AppendCustomSummaryReportQueryRq()

    'Set field value for CustomSummaryReportType
    CustomSummaryReportQueryRq.CustomSummaryReportType.SetValue(ENCustomSummaryReportType.csrtCustomSummary)

    'Set field value for DisplayReport
    CustomSummaryReportQueryRq.DisplayReport.SetValue(False)

    'Set FromReportDate to earliest possible date
    CustomSummaryReportQueryRq.ORReportPeriod.ReportPeriod.FromReportDate.SetValue(DateTime.Parse("1/1/1901"))
    'Set field value for ToReportDate
    CustomSummaryReportQueryRq.ORReportPeriod.ReportPeriod.ToReportDate.SetValue(EndDate)

    'Set field value for AccountTypeFilter
    CustomSummaryReportQueryRq.ReportAccountFilter.ORReportAccountFilter.AccountTypeFilter.SetValue(ENAccountTypeFilter.atfAccountsReceivable)

    'Set field value for EntityTypeFilter
    If QBCustName = "" Then
        'all customers
        CustomSummaryReportQueryRq.ReportEntityFilter.ORReportEntityFilter.EntityTypeFilter.SetValue(ENEntityTypeFilter.etfCustomer)
    Else
        'limit by customer name
        CustomSummaryReportQueryRq.ReportEntityFilter.ORReportEntityFilter.FullNameList.Add(QBCustName)
    End If

    'Set field value for ReportDetailLevelFilter
    CustomSummaryReportQueryRq.ReportDetailLevelFilter.SetValue(ENReportDetailLevelFilter.rdlfSummaryOnly)

    'Set field value for ReportPostingStatusFilter
    CustomSummaryReportQueryRq.ReportPostingStatusFilter.SetValue(ENReportPostingStatusFilter.rpsfEither)

    'Set field value for SummarizeColumnsBy
    CustomSummaryReportQueryRq.SummarizeColumnsBy.SetValue(ENSummarizeColumnsBy.scbTotalOnly)

    'Set field value for SummarizeRowsBy
    CustomSummaryReportQueryRq.SummarizeRowsBy.SetValue(ENSummarizeRowsBy.srbCustomer)

    'Set field value for ReportCalendar
    CustomSummaryReportQueryRq.ReportCalendar.SetValue(ENReportCalendar.rcCalendarYear)

    'Set field value for ReturnRows
    CustomSummaryReportQueryRq.ReturnRows.SetValue(ENReturnRows.rrActiveOnly)

    'Set field value for ReturnColumns
    CustomSummaryReportQueryRq.ReturnColumns.SetValue(ENReturnColumns.rcActiveOnly)

    'Set field value for ReportBasis
    CustomSummaryReportQueryRq.ReportBasis.SetValue(ENReportBasis.rbAccrual)
End Sub

'class to hold customer balance
Public Class CustBalReport
    Public QBCustName As String
    Public EndBal As Decimal
End Class

Private Sub WalkReportRetCustom(ByVal ReportRet As IReportRet)

    'new list of customer bal items
    Dim CustBalList As New List(Of CustBalReport)

    'report title
    Dim ReportTitle7 As String = ReportRet.ReportTitle.GetValue()

    'report date
    Dim ReportSubtitle8 As String = ReportRet.ReportSubtitle.GetValue()

    Dim ErrNum As Integer = 1
    Try

        'iterate the report lines
        ErrNum = 2
        For RowNum As Integer = 0 To ReportRet.ReportData.ORReportDataList.Count - 1

            'get new item
            Dim ReportLine As CustBalReport = Nothing
            ReportLine = New CustBalReport

            'get row
            ErrNum = 3
            Dim ORReportData17 As IORReportData = Nothing
            ORReportData17 = ReportRet.ReportData.ORReportDataList.GetAt(RowNum)

            'don't care about total line; only get data rows
            If ORReportData17.ortype = ENORReportData.orrdDataRow Then

                'get customer name
                ErrNum = 5
                Dim ColCustName As IColData = Nothing
                ColCustName = ORReportData17.DataRow.ColDataList.GetAt(0)
                ReportLine.QBCustName = ColCustName.value.GetValue

                'get customer balance
                ErrNum = 6
                Dim ColBalance As IColData = Nothing
                ColBalance = ORReportData17.DataRow.ColDataList.GetAt(1)
                ReportLine.EndBal = ColBalance.value.GetValue

                'add to list
                CustBalList.Add(ReportLine)
            End If

        Next RowNum

        'assign to class variable
        lCustBalList = CustBalList

    Catch ex As Exception
        Dim errMsg As String = ErrNum & ": Error getting customer balance summary"
        Throw New ApplicationException(errMsg)
    End Try

End Sub 
```

# c# - 在 TextChanged 事件上刷 新文本框

> ID：14540757
> 
> 赞同：0
> 
> 时间：2013-01-26T19:35:07.240
> 
> 标签：c#, ado.net

```
private void txtItems_TextChanged(object sender, EventArgs e)
{
   try
   {
      MySqlCommand com = new MySqlCommand();
      MySqlDataReader read;
      com.CommandText = "SELECT * FROM Inventory where ProductID ='" + txtbCode.Text + "'";
      com.Connection = MySQLConnection.con;
      MySQLConnection.con.Open();
      read = com.ExecuteReader();
      while (read.Read())
      {
         txtCatogery.Text = read["Catogery"].ToString();
         txtDiscriptions.Text = read["Description"].ToString();
         txtQTY.Text = read["QTY"].ToString();
         txtPrice.Text = read["Price"].ToString();
      }
    //Rest of code
   }
} 
```

当我在`txtbCode`TextBoxes 中输入条形码时，会从 db 中获取值，但如果我有带有条形码的产品，请`1234`继续输入 56 (123456) 我没有带有该条形码的产品，但文本框的值不会刷新，它们会保持读取的值约为 1234。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:42:21.277

此代码存在多个问题，但要回答您的主要问题，这是因为您的`while (read.Read())`线路。如果他们查询返回`0`行，`while statement`则永远不会执行。

如果您期望单行，则应`if (read.Read())`改为，并添加`else`条件以清除文本框。

您可能想要研究的其他问题是确保在完成阅读器后将其处置，并使用参数而不是将用户输入直接嵌入到查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:40:13.520

首先，您应该对查询进行*参数化*- 请参阅**[Sql Injection](http://en.wikipedia.org/wiki/SQL_injection)**。

关于您的问题，您应该在查询数据库之前清除以前的值，因为在您当前的代码中，只有在 Read() 成功时才会更新文本框（例如，您在数据库中有一行）...但是如果您没有它不会被更新的行，并且以前的条目将保留。

```
 private void txtbCode_TextChanged(object sender, EventArgs e)
 {
     txtCatogery.Text = String.Empty;
     txtDiscriptions.Text = String.Empty;
     ...

     try
     {
        MySqlCommand com = new MySqlCommand();
        MySqlDataReader read;
        ..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T19:50:08.407

您应该检查查询的返回值，如果没有返回值，请清除您的`Textboxes`

```
 MySQLConnection.con.Open();
        read = com.ExecuteReader();
    if(read != null)
    {
        while (read.Read())
        {
        txtCatogery.Text = read["Catogery"].ToString();
        txtDiscriptions.Text = read["Description"].ToString();
        txtQTY.Text = read["QTY"].ToString();
        txtPrice.Text = read["Price"].ToString();
        }
    }
    else
    {
        txtCatogery.Text = "";
        txtDiscriptions.Text =  "";
        txtQTY.Text =  "";
        txtPrice.Text =  "";
    } 
```

Beer 请记住，您的代码可能会产生一些错误，例如，如果从数据库返回多条记录，您`TextBoxes`将只显示最后一条记录数据。如果任何记录具有空字段，则会由于您的`.ToString()`. 最后`SQL injection`是一个主要威胁，除非您编写此代码用于学习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T19:50:56.963

你可以使用[`.HasRows`](http://www.devart.com/dotconnect/mysql/docs/Devart.Data.MySql~Devart.Data.MySql.MySqlDataReader~HasRows.html)之前你可以去[`.Read()`](http://www.devart.com/dotconnect/mysql/docs/Devart.Data.MySql~Devart.Data.MySql.MySqlDataReader.html)

```
...
MySqlDataReader read = cmd.ExecuteReader(); 
if (read.HasRows) 
{ 
  while (read.Read())
  {
      //Do Stuff
  }
}
else
{
   //Do Stuff
   txtPrice.Clear();
} 
```

# iphone - 将混合 NSData 转换为 NSString

> ID：14540758
> 
> 赞同：0
> 
> 时间：2013-01-26T19:35:11.857
> 
> 标签：iphone, ios, nsstring, nsdata, nsmutablestring

我的要求是转换以 2 种格式编写的 NSData 流：十六进制字节和普通字符串数据（不知道它的正确名称是什么，但如果你看看你就知道了）。

我正在尝试找到一种从中获取重要内容的方法。

这是一个示例：

```
bbbbbb02bbbbbb
bbbbbb 
```

从上面的部分，我可以使用[这里](https://stackoverflow.com/a/7520655/1506363)显示的方法获取 02 。（bbbbbb 只是一个分隔符）

但是我不确定以下部分 - 我不知道我应该怎么做才能将其转换为合理的东西。最好我知道它是一个格式化为 xml 的 ascii 字符字节。（注意末尾的 bbbbbb 分隔符）

```
3c3f786d....long pattern of hex....bbbbbb 
```

我已经完成了[这个](https://stackoverflow.com/questions/2467844/convert-utf-8-encoded-nsdata-to-nsstring)，但是由于我需要的数据片段，utf-8 编码的 nsdata 到 nsstring 的转换似乎需要整个 nsdata，而我有字节。

任何人都可以提出一种明智和累积的方法将整个模式转换为所需的格式，即 bbbbbb02bbbbbb 转换为 02、3c3f786d.... 转换为 ascii xml 等等？

# javascript - javascript ISO8601 3.5.2 时间（24 小时）数据类型与日历断开连接

> ID：14540759
> 
> 赞同：0
> 
> 时间：2013-01-26T19:35:17.583
> 
> 标签：javascript, iso8601

ISO 8601 3.5.2 区分日期时间组合值和仅时间值。仅时间值模拟日历上未确定日期的 24 小时制。对于 Time-Only 值，24:00 是一个有效值，用于区分一天的结束和一天的开始 (00:00)。

在明确附加到日历上的一天之前，仅时间值只是从 00:00 到 24:00 的有限时间段上的一个点。

当前的 ECMA 标准关于 Time-only 值是什么？编辑：是否有解决此问题的拟议标准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:38:11.563

在*当前*JavaScript 的 ECMA 标准中，没有 time-only 类型。只是`Date`。

# cryptography - 使用确定性算法加密布尔值的最安全方法？

> ID：14540760
> 
> 赞同：4
> 
> 时间：2013-01-26T19:35:24.477
> 
> 标签：cryptography, boolean, primes, deterministic

在我的一项学校工作中，我需要使用确定性算法 (http://en.wikipedia.org/wiki/Deterministic_encryption) 来加密几个字段。

在这种特定情况下，我必须用布尔值加密一个表。这很好，除了使用确定性算法这样做几乎没有用处。

为什么呢？（你可能会问）

碰巧当我加密（例如）值“true”时，我总是得到“AB1”的密文，而当我加密值 false 时，我总是得到“SQ2”的密文。因此，我没有用值“真”和“假”填充表，而是用值“AB1”和“SQ2”填充表。任何攻击者都会立即明白我的表存储布尔值，他很快就会发现 AB1=true 和 SQ2=false。

这是我想在作业中防止的。为了避免这个问题，我尝试使用具有某些属性的数字。例如，“真”的值被一个素数替换，而“假”的值被一个非素数替换。因此，我的表将充满许多不同的素数和非素数。

如果不是为了一件小事，这将是一个可以接受的解决方案：我们可以计算的素数是“有限的”（计算大素数需要很长时间）。在 10000000 个数字的区间中，只有 664579 是素数（只有 6.64579% ）。

所以我考虑使用奇数而不是质数，但我不确定奇数的质量。我认为攻击者将能够从密码中检索“奇怪”的属性，从而进行攻击。

我对奇数的假设正确吗？还有其他解决方案吗？你们有什么想法吗？

我真的很感激任何帮助或想法，提前佩德罗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T19:31:51.623

根据论文，CryptDB 的工作原理是根据执行的查询调整加密级别。

当不执行查询时，所有值都使用所谓的`Random`加密存储。这基本上是 CBC 模式下的 AES，带有随机 IV。由于所有字段的 IV 都不同，因此所有字段将具有不同的加密。

当他们需要对列（对于 JOIN、GROUP BY 等）执行相等检查时，他们会将加密降级为`Deterministic`加密。这种加密级别的主要要求是给定的明文总是被加密为相同的密文。所以对于这个级别，一个布尔列将只有两个可能的密文值。是的，这会将信息泄露给可以观察表格的攻击者，但没有办法绕过它。存储素数/非素数将不起作用：数据库将无法执行所需的操作。

对不起，但你需要为你的作业找到另一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:41:40.993

您可以获取一组布尔值并将它们视为二进制数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T19:41:54.987

这里最大的误解是*您不会单独加密每个值*。您应该做的是将所有值打包到某种数据结构中（例如，数组`bool`），然后将数据结构作为一个整体进行加密（使用 CBC 模式，如果您还没有这样做的话）。

就加密而言，选择的数据结构（即如何选择将表打包成单个二进制实体）并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T18:40:16.683

好吧，我不知道这是否会对你们有所帮助，但我的最终结论是结合了我的一些建议。

我通过进行以下分配解决了这个问题：

true = 随机整数 PRIME 数

false = 随机整数（不是素数）

现在显而易见的问题来了：

问：如果我选择随机数，如何保证不重复而不保存每个生成的数字？

A：我把随机数转换成字节，和同一张表的ID混在一起。这样，如果我生成一个随机重复的数字并不重要，因为当我将它与 ID（这是唯一的）混合时，我搞砸了输出。

然而，计算素数可能非常繁重，因此我将在此处发布我的报告的一小部分，其中有其他建议：

```
Although we selected the property of being prime as an equivalent to the boolean of true, we could have also used other properties, such as:
  <li>
    <ul>
        Representing a true boolean by a random odd number and 
        a false boolean by a random even value
    </ul>
    <ul>
        Representing a true boolean by a sequence of numbers 
        that belongs to PI and a false boolean by a random 
        number sequence that doesn't belong to PI
    </ul>
  </li> 
```

这对我来说是一个非常有趣和意想不到的挑战。我从来没有想过，这么简单的事情需要这么聪明。

我希望我的解决方案对大家有所帮助，如果您喜欢密码学，请看一下该项目：P

# java - 如何将字符串转换为字母并添加

> ID：14540761
> 
> 赞同：-6
> 
> 时间：2013-01-26T19:35:29.740
> 
> 标签：java

我有一个小项目工作。情况如下。

我得到一个字符串，首先我必须将它们转换为等效数字并将它们相加。

数字如下

```
a=1,b=2,c=3....z=4\. 
```

这里的另一个条件是

```
A==a==1; 
```

A 和 a 相同，其他字母 caps 和 small 相同。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T19:38:43.793

```
String str = "ABcDe";
str = str.toUpperCase();//just to be sure you have only capital letters in your string

int sum=0;
for(int i=0;i<str.length();i++){//cycle until the string ends
    sum = sum + str.charAt(i)-64;//'A' in ascii is 65, so 65-'A' = 65-64=1, etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:50:41.753

```
 //your input string
    String string = "Aab";

    char offset1 = 'a';
    char offset2 = 'A';
    int sum = 0;
    StringBuilder stringCode = new StringBuilder();
    for (int i=0; i<string.length(); i++){
        int curSymbol = string.charAt(i);
        if (curSymbol >= offset1){
            //caps
            int symbolNumber = curSymbol-offset1+1;
            stringCode.append(symbolNumber);
            sum += symbolNumber;
        }else{
            int symbolNumber = curSymbol-offset2+1;
            stringCode.append(symbolNumber);
            sum += symbolNumber;
        }
        stringCode.append(" ");
    }
    System.out.println("Strung code = "+stringCode.toString());
    System.out.println("Sum = " + sum); 
```

# python - 为什么我的双 for 循环不起作用？

> ID：14540767
> 
> 赞同：0
> 
> 时间：2013-01-26T19:35:59.963
> 
> 标签：python, csv, for-loop, bioinformatics

我试过这个不起作用的双循环。（见下文。）

基本上，我有一个构造列表和一个引物列表。引物通过“构建体编号”和“部件编号”与构建体相关联。（每个构造都由多个部分组成。）对于每个部分，都有一个“正向”和“反向”引物。对于那些倾向于分子生物学的 SO 成员，我基本上是在编写一个脚本来帮助我进行 PCR。

我想要做的是：我想在引物列表中搜索应该与构造部分相关联的引物，并将它们连接到一个主列表中。例如，如果我有一个包含 EMP792 (fw) 和 EMP793 (re) 的列表（它们位于不同的行上），并且它们与我的构造列表中构造 #1 的部分 #2 相关联，我希望能够在“primers_list”中搜索相应的 fw 和 re 引物。如果构造的部分在列表中没有关联的引物，我想先跳过这些构造。

我使用的策略是这样的：我做了一个嵌套的 for 循环。对于构造列表中的每个构造，我希望它在引物列表中搜索 fw 和 re 引物。我知道这是低效的，但作为一个初学者程序员，这是我能想出的唯一方法。我包括了一些条件来检查这些结构是否存在引物，方法是检查与引物相关的结构编号和部件号。

我面临的问题是：对于列表中的每个构造，循环不会搜索整个primer_list。它似乎会自动跳过之前比较的所有引物，只比较下一个尚未比较的引物。这会导致处理过程中出现问题，如果您使用关联的数据集（我也粘贴在代码下方）运行代码，您会发现应该打印出相关引物的构造没有其关联底漆，这让我很头疼，试图弄清楚出了什么问题（哈哈，哈哈......）！

我会很感激任何帮助！

代码：

```
with open('constructs-to-make-shortened2.csv', 'rU') as constructs:
    construct_list = csv.DictReader(constructs)

    with open('primers-with-notes-names.csv', 'rU') as primers:
        primers_list = csv.DictReader(primers)

        #make list of constructs for checking later on#
##        construct_numbers_list = []
##        for row in primers_list:
##            construct_numbers_list.append(row['construct number'])
##
##        print(construct_numbers_list)

        for construct in construct_list:
##            print('Currently at construct number ' + construct['Construct'])
##            print('Construct counter at ' + str(construct_counter))
##            print('Part number counter is at ' + str(part_number))
            master_row = {}
            master_row['construct'] = construct['Construct']
            master_row['strategy'] = construct['Strategy']
            master_row['construct name'] = construct['Construct Name']
            master_row['sequence'] = construct['Sequence']
            master_row['source'] = construct['Source']
            master_row['content'] = construct['Content']

            print('We are at construct number ' + str(construct['Construct']))
            print('Construct counter is at ' + str(construct_counter))
            is_next_construct = (int(construct['Construct']) > construct_counter)
            print('Are we at the next construct?')
            print(is_next_construct)

            if is_next_construct:
                part_number = 1
                construct_counter = int(construct['Construct'])
            print('Part number is now ' + str(part_number))

            for primer in primers_list:
                print(primer)

##                    print('Is primer ' + str(primer['name']) + ' associated with the construct?')
                is_associated_with_construct = bool(primer['construct number'] == construct['Construct'] and str(primer['part number']) == str(part_number))
##                    print(is_associated_with_construct)
                if(is_associated_with_construct == False):
                    break

                is_forward = bool(primer['construct number'] == construct['Construct'] and str(primer['part number']) == str(part_number) and primer['direction'] == 'fw primer')

                print('Primer ' + str(primer['name']) + ' is a forward primer?')
                print(is_forward)

                is_reverse = bool(primer['construct number'] == construct['Construct'] and str(primer['part number']) == str(part_number) and primer['direction'] == 're primer')

                print('Primer ' + str(primer['name']) + ' is a reverse primer?')
                print(is_reverse)

                if is_forward:
                    master_row['primer1'] = primer['name']
                    master_row['primer1 sequence'] = primer['primer sequence']
                    master_row['primer1 description'] = primer['notes']
                    master_row['primer1 length'] = primer['length']
##                        print(master_row)
                    continue

                elif is_reverse:
                    master_row['primer2'] = primer['name']
                    master_row['primer2 sequence'] = primer['primer sequence']
                    master_row['primer2 description'] = primer['notes']
                    master_row['primer2 length'] = primer['length']
##                        print(master_row)
                    part_number += 1
                    print('Part number now = ' + str(part_number) + '\n')
                    master_list.append(master_row)
                    break 
```

DATA SUBSET（构造）（精确序列被消除以保持在 SO 字符限制内）：

```
{'Sequence': '', 'Construct': '12', 'Strategy': 'Gibson', 'Content': 'Amp resistance marker', 'Source': 'pEM096', 'Construct Name': 'T7 RNAP core on BAC ori only with AmpR'}
{'Sequence': '', 'Construct': '12', 'Strategy': 'Gibson', 'Content': 'BAC origin and T7 RNAP core', 'Source': 'THSS301', 'Construct Name': 'T7 RNAP core on BAC ori only with AmpR'}
{'Sequence': '', 'Construct': '13', 'Strategy': 'Cut Gibson', 'Content': 'lycopene pathway (crtE.B.I.dxs.idi)', 'Source': 'KT-537', 'Construct Name': 'Combined vio and lyc plasmid'}
{'Sequence': '', 'Construct': '13', 'Strategy': 'Cut Gibson', 'Content': 'vioABE pathway and pSC101 ori and CmR;  digest with EcoRI and XbaI', 'Source': 'KT-587', 'Construct Name': 'Combined vio and lyc plasmid'}
{'Sequence': '', 'Construct': '14', 'Strategy': 'Cut Gibson', 'Content': 'lycopene pathway (crtE.B.I.dxs.idi)', 'Source': 'KT-537', 'Construct Name': 'Combined vio and lyc plasmid, with lyc in reverse direction'}
{'Sequence': '', 'Construct': '14', 'Strategy': 'Cut Gibson', 'Content': 'vioABE pathway and pSC101 ori and CmR;  digest with EcoRI and XbaI', 'Source': 'KT-587', 'Construct Name': 'Combined vio and lyc plasmid, with lyc in reverse direction'}
{'Sequence': '', 'Construct': '15', 'Strategy': 'Gibson', 'Content': 'vioABE pathway with random nucleotide spacers', 'Source': 'KT-587', 'Construct Name': 'Combined vio and lyc plasmid made by high GC polymerase'}
{'Sequence': '', 'Construct': '15', 'Strategy': 'Gibson', 'Content': 'lycopene pathway (crtE.B.I.dxs.idi)', 'Source': 'KT-537', 'Construct Name': 'Combined vio and lyc plasmid made by high GC polymerase'}
{'Sequence': '', 'Construct': '15', 'Strategy': 'Gibson', 'Content': 'pSC101 origin of replication and CmR resistance marker', 'Source': 'KT-537', 'Construct Name': 'Combined vio and lyc plasmid made by high GC polymerase'}
{'Sequence': '', 'Construct': '16', 'Strategy': 'Gibson', 'Content': 'P(tac)-SynZip18-T7 fragment', 'Source': 'THSS303', 'Construct Name': 'P(tac)-T7 fragment controller'}
{'Sequence': '', 'Construct': '16', 'Strategy': 'Gibson', 'Content': 'IncW backbone and TpR resistance and lacIq', 'Source': 'pEM103', 'Construct Name': 'P(tac)-T7 fragment controller'}
{'Sequence': '', 'Construct': '17', 'Strategy': 'Gibson', 'Content': 'P(tac)-SynZip18-T3 fragment', 'Source': 'THSS304', 'Construct Name': 'P(tac)-T3 fragment controller'}
{'Sequence': '', 'Construct': '17', 'Strategy': 'Gibson', 'Content': 'IncW backbone and TpR resistance and lacIq', 'Source': 'pEM103', 'Construct Name': 'P(tac)-T3 fragment controller'} 
```

数据子集（引物）：

```
{'part number': '1', 'direction': 'fw primer', 'name': 'EMP790', 'primer sequence': 'gtttgtcggtgaactaattCttattaccaatgcttaatcagggaggcacctatctcagcg', 'notes': 'Fw Gibson primer on pEM096 to extract Amp resistance marker', 'length': '60', 'construct number': '12'}
{'part number': '1', 'direction': 're primer', 'name': 'EMP787', 'primer sequence': 'gatgaggatcgtttcgcatgctaaatacattcaaatatctatccgctcatgagacaataa', 'notes': 'Re Gibson primer on pEM096 to extract Amp resistance marker', 'length': '60', 'construct number': '12'}
{'part number': '2', 'direction': 'fw primer', 'name': 'EMP788', 'primer sequence': 'agatatttgaatgtatttagcatgcgaaacgatcctcatcctgtctcttgatcagatctt', 'notes': 'Fw Gibson primer on THSS301 to extract BAC and R6K origins and T7 RNAP core', 'length': '60', 'construct number': '12'}
{'part number': '2', 'direction': 're primer', 'name': 'EMP791', 'primer sequence': 'tgattaagcattggtaataaGaattagttcaccgacaaacaacagataaaacgaaaggcc', 'notes': 'Re Gibson primer on THSS301 to extract BAC origin and T7 RNAP core', 'length': '60', 'construct number': '12'}
{'part number': '1', 'direction': 'fw primer', 'name': 'EMP792', 'primer sequence': 'aaggaatattcagcaatttgGTTGGGGATAGCGCTAGCTATAATAactaTCACTATAGGG', 'notes': 'Fw Gibson primer on KT-587 to extract vioABE pathway with random nucleotide spacers', 'length': '60', 'construct number': '15'}
{'part number': '1', 'direction': 're primer', 'name': 'EMP793', 'primer sequence': 'gggcctttcttcggcacgggGTTGTAGCAGGCGTCTTTGTCAAAAAACCCCTCAAGACCC', 'notes': 'Re Gibson primer on KT-587 to extract vioABE pathway with random nucleotide spacers', 'length': '60', 'construct number': '15'}
{'part number': '2', 'direction': 'fw primer', 'name': 'EMP794', 'primer sequence': 'ACAAAGACGCCTGCTACAACcccgtgccgaagaaaggcccacccgtgaaggtgagccagt', 'notes': 'Fw Gibson primer on KT-537 to extract lycopene pathway (crtE.B.I.dxs.idi)', 'length': '60', 'construct number': '15'}
{'part number': '2', 'direction': 're primer', 'name': 'EMP795', 'primer sequence': 'gaggtcattactggatctaTcccgtgccgaagaaaggcccacccgtgaaggtgagccagt', 'notes': 'Re Gibson primer on KT-537 to extract lycopene pathway (crtE.B.I.dxs.idi)', 'length': '60', 'construct number': '15'}
{'part number': '3', 'direction': 'fw primer', 'name': 'EMP796', 'primer sequence': 'gggcctttcttcggcacgggAtagatccagtaatgacctcagaactccatctggatttgt', 'notes': 'Fw Gibson primer on KT-537 to extract pSC101 origin of replication and CmR resistance marker', 'length': '60', 'construct number': '15'}
{'part number': '3', 'direction': 're primer', 'name': 'EMP797', 'primer sequence': 'TAGCTAGCGCTATCCCCAACcaaattgctgaatattccttttcttagacgtcaggtggca', 'notes': 'Re Gibson primer on KT-537 to extract pSC101 origin of replication and CmR resistance marker', 'length': '60', 'construct number': '15'}
{'part number': '1', 'direction': 'fw primer', 'name': 'EMP798', 'primer sequence': 'aaatattctgaaatgagctgttgacaattaatcatcggctcgtataatgtgtggaattgt', 'notes': 'Fw Gibson primer on THSS303 to extract P(tac)-SynZip18-T7 fragment', 'length': '60', 'construct number': '16'}
{'part number': '1', 'direction': 're primer', 'name': 'EMP799', 'primer sequence': 'attaccgcctttgagtgagccccaatgataaccccaagggaagttttagtcaaaagcctc', 'notes': 'Re Gibson primer on THSS303 to extract P(tac)-SynZip18-T7 fragment', 'length': '60', 'construct number': '16'}
{'part number': '2', 'direction': 'fw primer', 'name': 'EMP800', 'primer sequence': 'cccttggggttatcattggggctcactcaaaggcggtaatcagataaaaaaaatccttag', 'notes': 'Fw Gibson primer on pEM103 to extract IncW backbone and TpR resistance and lacIq', 'length': '60', 'construct number': '16'}
{'part number': '2', 'direction': 're primer', 'name': 'EMP801', 'primer sequence': 'agccgatgattaattgtcaacagctcatttcagaatatttgccagaaccgttatgatgtc', 'notes': 'Re Gibson primer on pEM103 to extract IncW backbone and TpR resistance and lacIq', 'length': '60', 'construct number': '16'}
{'part number': '1', 'direction': 'fw primer', 'name': 'EMP798', 'primer sequence': 'aaatattctgaaatgagctgttgacaattaatcatcggctcgtataatgtgtggaattgt', 'notes': 'Fw Gibson primer on THSS303 to extract P(tac)-SynZip18-T7 fragment', 'length': '60', 'construct number': '17'}
{'part number': '1', 'direction': 're primer', 'name': 'EMP799', 'primer sequence': 'attaccgcctttgagtgagccccaatgataaccccaagggaagttttagtcaaaagcctc', 'notes': 'Re Gibson primer on THSS303 to extract P(tac)-SynZip18-T7 fragment', 'length': '60', 'construct number': '17'}
{'part number': '2', 'direction': 'fw primer', 'name': 'EMP800', 'primer sequence': 'cccttggggttatcattggggctcactcaaaggcggtaatcagataaaaaaaatccttag', 'notes': 'Fw Gibson primer on pEM103 to extract IncW backbone and TpR resistance and lacIq', 'length': '60', 'construct number': '17'}
{'part number': '2', 'direction': 're primer', 'name': 'EMP801', 'primer sequence': 'agccgatgattaattgtcaacagctcatttcagaatatttgccagaaccgttatgatgtc', 'notes': 'Re Gibson primer on pEM103 to extract IncW backbone and TpR resistance and lacIq', 'length': '60', 'construct number': '17'} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T19:42:48.893

问题是您正在迭代一个[`csv.DictReader`](http://docs.python.org/2/library/csv.html#csv.DictReader)对象，该对象不是一个列表，而是一个迭代器。

两者的区别在于，使用迭代器，您不能“回到开头”。内部循环的每一步，您的迭代都`primer_list`从上次停止的地方开始。

如果您希望能够多次迭代所有项目并且如果您有足够的内存，请将它们存储在列表中：

```
primers_list = list(csv.DictReader(primers)) 
```

如果您想保持较低的内存使用率，您可以`DictReader`每次在循环内从头开始创建对象。但是，这会在执行时间上增加一些（可能很小的）开销，您应该通过将`with`语句移入循环来关闭文件。

另一种方法是`primers.seek(0)`在循环体的末尾执行，以便它在下一次迭代时从文件的开头开始读取，但我不确定这是否是一个好的 hack。

# ruby-on-rails - Rails 4强参数-更新时堆栈级别太深

> ID：14540769
> 
> 赞同：2
> 
> 时间：2013-01-26T19:36:01.110
> 
> 标签：ruby-on-rails, ruby-on-rails-4, strong-parameters

我一直在玩 Rails 4，并且在使用强参数更新记录时遇到了一些问题。我不断收到“堆栈级别太深”错误。我正在尝试更新 has_one meta_data 的帖子记录。

post.rb

```
 has_one :meta_data, :as => :meta_dataeable, :dependent => :destroy
  accepts_nested_attributes_for :meta_data
  after_initialize do
    self.build_meta_data unless self.meta_data.present?
  end 
```

post_controller.rb

```
def create
  @post = Post.create(permitted_params)
  redirect_to :action => 'index'
end

def update
  @post = Post.find(params[:id])
  @post.update_attributes(permitted_params)
  redirect_to :action => 'index'
end

def permitted_params
  params.require(:post).permit(
    :title, 
    :body, 
    :excerpt, 
    :permalink, 
    :content_type, 
    :author_id, 
    :media, 
    :commenting, 
    :published_at, 
    :public, 
    {:meta_data_attributes => [:title, :description, :keywords, :menu_name]}
  )    
end 
```

创建新记录没有任何问题，并保存关联的 meta_data 记录。更新给了我一个 Stack Level Too Deep 错误。当我`{:meta_data_attributes => [:title, :description, :keywords, :menu_name]}`从允许的参数中删除时，保存工作没有问题

任何帮助都会很棒，在此先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:28:57.853

想通了问题，需要添加`:id`为 meta_data_attributes 的允许参数。

# ios - iOS 模拟器在 Mac 上测试网站

> ID：14540780
> 
> 赞同：19
> 
> 时间：2013-01-26T19:37:13.170
> 
> 标签：ios, testing, safari-web-inspector

我需要在 Mac 上的 iOS 设备上测试我的网站。

是否有可用的桌面模拟器来执行此操作？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-26T20:12:01.747

您可以使用 iOS 模拟器来执行此操作。您需要在 Safari 上启用“开发者模式”（首选项 -> 高级）。

然后在iOS模拟器中打开你要调试的网站。回到 safari，在开发下，您将看到模拟器和 safari 上打开的选项卡。

如果你想测试一个实际的设备，那么只需将它插入你的计算机，它也应该在那里显示。

我就是这样做的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-15T19:01:01.397

如果您在 Mac OS X 上，只需使用[Simulator](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/iOS_Simulator_Guide/GettingStartedwithiOSSimulator/GettingStartedwithiOSSimulator.html)。我不知道它是否默认可用，但它看起来像是 Xcode 套件的一部分。

无论如何，它是免费且非常有用的，它允许您模拟许多流行的 Apple 设备：

[![在此处输入图像描述](../Images/a7a90f61fbc87fe858bc43e912b3d2b2.png)](https://i.stack.imgur.com/gA8NW.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-21T14:34:13.057

您可以查看并使用他们的免费试用[browserstack](http://www.browserstack.com)、[saucelabs](http://saucelabs.com/)或[浏览器截图](http://browsershots.org/) 我知道这是一个非常古老的问题，我回答得太晚了，今天有很多可用的选项，但可能有人会得到这个有用的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-26T20:07:49.977

您可以考虑使用 BrowserStack：[http ://www.browserstack.com](http://www.browserstack.com)

虽然不是免费的，但它相当便宜。它允许您在 iPhone 和 iPad、Android 以及各种桌面浏览器和操作系统上针对多个 iOS 版本进行测试。事实证明，仅进行此类测试对我的工作场所来说非常宝贵。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-26T05:34:12.463

您也可以将 Xcode 下载到您的 Mac 并使用 iPhone 模拟器。

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2013-01-26T19:40:21.000

我主要使用这个网站

它的好一个

[http://iphone4simulator.com/](http://iphone4simulator.com/)

仍然最好在真实设备上进行测试..

希望这些信息对你有帮助..

# quickbooks - 如何使用 Quickbooks SDK 查询交易的清算状态？

> ID：14540783
> 
> 赞同：1
> 
> 时间：2013-01-26T19:37:33.077
> 
> 标签：quickbooks

使用 QB SDK 将 txn 标记为已清除非常容易，但您似乎无法查询此值（例如，查看它是否已清除）。

```
public bool MarkAsCleared(string sTxnID, string sTxnLineID)
{
    // sm is class variable of type QBSessionManager
    IMsgSetRequest msr = sm.CreateMsgSetRequest("US", 7, 0);
    msr.Attributes.OnError = ENRqOnError.roeStop;

    IClearedStatusMod q = msr.AppendClearedStatusModRq();
    q.ClearedStatus.SetValue(ENClearedStatus.csCleared);
    q.TxnID.SetValue(sTxnID);
    q.TxnLineID.SetValue(sTxnLineID);

    IMsgSetResponse resp = sm.DoRequests(msr);
    if ( resp.ResponseList.Count == 1 && resp.ResponseList.GetAt(0).StatusCode == 0 )
        return true;

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:59:37.127

这是上面发布的代码的 VB 版本。我测试了它，它似乎正在工作。我没有做日志查询部分。您只需传递 TxnID（交易查询中的 listID、txn 日期和帐户列表 ID。该函数将返回 True 或 False，具体取决于您传递的 txn 是否为该帐户清除。

```
Public Function IsCleared(ByVal sTxnID As String, ByVal dTxnDate As DateTime, ByVal sAccount As String) As Boolean

    Dim bCleared As Boolean = False

    Dim requestMsgSet As IMsgSetRequest
    requestMsgSet = sessionManager.CreateMsgSetRequest("US", 8, 0.0)
    requestMsgSet.Attributes.OnError = ENRqOnError.roeContinue

    Dim rq As ICustomDetailReportQuery
    rq = requestMsgSet.AppendCustomDetailReportQueryRq()
    rq.CustomDetailReportType.SetValue(ENCustomDetailReportType.cdrtCustomTxnDetail)
    rq.IncludeColumnList.Add(ENIncludeColumn.icClearedStatus)
    rq.IncludeColumnList.Add(ENIncludeColumn.icTxnID)
    ' Is Cleared status per txn or per txn line?
    rq.ReportAccountFilter.ORReportAccountFilter.ListIDList.Add(sAccount)
    rq.ORReportPeriod.ReportPeriod.FromReportDate.SetValue(dTxnDate)
    rq.ORReportPeriod.ReportPeriod.ToReportDate.SetValue(dTxnDate)
    rq.SummarizeRowsBy.SetValue(ENSummarizeRowsBy.srbItemDetail)

    Dim responseMsgSet As IMsgSetResponse
    responseMsgSet = sessionManager.DoRequests(requestMsgSet)

    Dim rp As IReportRet
    rp = responseMsgSet.ResponseList.GetAt(0).Detail

    Try
        Dim data As IORReportData = Nothing
        For i = 0 To rp.ReportData.ORReportDataList.Count - 1
            data = rp.ReportData.ORReportDataList.GetAt(i)
            If (Not data.DataRow Is Nothing) Then
                If (data.DataRow.ColDataList.Count > 1) Then
                    If (data.DataRow.ColDataList.GetAt(1).value.GetValue() = sTxnID) Then
                        bCleared = (data.DataRow.ColDataList.GetAt(0).value.GetValue() = "Cleared")
                        Return bCleared
                    End If
                End If
            End If
        next

    Catch ex As Exception
        MsgBox("Error looking up cleared status: " + ex.Message)
    End Try
    Return False
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:37:33.077

有一种使用 CustomDetailReportQuery 的 hacky 方法。我想不出一种方法来获取单个交易的报告，因此必须对整个帐户进行报告，然后循环遍历，直到找到正确的 txn 并返回其清除状态：

```
public bool IsCleared(string sTxnID, string sTxnLineID, string sAccount, out bool bCleared)
{
    bCleared = false;

    IMsgSetRequest msr = sm.CreateMsgSetRequest("US", 7, 0);
    msr.Attributes.OnError = ENRqOnError.roeStop;

    IJournalEntryQuery cq = msr.AppendJournalEntryQueryRq();
    cq.metaData.SetValue(ENmetaData.mdMetaDataAndResponseData);
    cq.ORTxnQuery.TxnIDList.Add(sTxnID);
    cq.IncludeLineItems.SetValue(true);

    IMsgSetResponse resp = sm.DoRequests(msr);

    try
    {
        IJournalEntryRetList crl = (IJournalEntryRetList)resp.ResponseList.GetAt(0).Detail;
        IJournalEntryRet r = crl.GetAt(0);
        msr.ClearRequests();

        ICustomDetailReportQuery rq = msr.AppendCustomDetailReportQueryRq();
        rq.CustomDetailReportType.SetValue(ENCustomDetailReportType.cdrtCustomTxnDetail);
        rq.IncludeColumnList.Add(ENIncludeColumn.icClearedStatus);
        rq.IncludeColumnList.Add(ENIncludeColumn.icTxnID);

        // Is Cleared status per txn or per txn line?
        rq.ReportAccountFilter.ORReportAccountFilter.FullNameList.Add(sAccount);
        rq.ORReportPeriod.ReportPeriod.FromReportDate.SetValue(r.TxnDate.GetValue());
        rq.ORReportPeriod.ReportPeriod.ToReportDate.SetValue(r.TxnDate.GetValue());
        rq.SummarizeRowsBy.SetValue(ENSummarizeRowsBy.srbItemDetail);

        resp = sm.DoRequests(msr);
        IReportRet rp = (IReportRet)resp.ResponseList.GetAt(0).Detail;
        IORReportData data = null;
        for (int i = 0; i < rp.ReportData.ORReportDataList.Count; i++)
        {
            data = rp.ReportData.ORReportDataList.GetAt(i);
            if (data.DataRow != null)
            {
                if (data.DataRow.ColDataList.Count > 1)
                {
                    if (data.DataRow.ColDataList.GetAt(1).value.GetValue() == sTxnID)
                    {
                        bCleared = (data.DataRow.ColDataList.GetAt(0).value.GetValue() == "Cleared");
                        return true;
                    }
                }
            }
        }
    }
    catch (Exception e)
    {
        Log("Error looking up cleared status: " + e.Message);
    }
    return false;
} 
```

# android - Android SQLite 数据库：无法查看数据文件夹内容

> ID：14540785
> 
> 赞同：0
> 
> 时间：2013-01-26T19:37:40.253
> 
> 标签：android, android-sqlite

我正在按照 Learning Android 书中的示例创建数据库，看起来我正在成功创建数据库（在我的 SQLiteOpenHelper 中，它没有重新运行 onCreate）。但是当我尝试使用 Eclipse 文件资源管理器查看 data/data/ 中的数据库文件时，没有文件出现。

我也尝试通过 adb shell 打开 sqlite 文件，但是当我尝试列出目录 data/data/ 中的文件时，它告诉我“opendir failed, Permission denied”

我的问题是我需要root手机才能查看数据库文件吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:39:27.370

是的。除非您根手机，否则您看不到任何应用程序的数据/数据文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:59:41.170

谢谢大家的帮助。我最终启动了我的手机，但我无法在 Eclipse 文件资源管理器中查看我的任何文件：

[Android：文件资源管理器中没有文件](https://stackoverflow.com/questions/14542914/android-no-files-appearing-in-file-explorer)

如果您知道如何解决此问题，请告诉我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T19:46:47.313

使用模拟器查看数据库文件。在 Eclipse 中寻找**文件资源管理器。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T19:58:20.890

Eclipse 有一个简洁的小插件，称为[CellObject SQLite Browser](http://marketplace.eclipse.org/content/cellobject-sqlite-xml-browser#.UQQ00Wfw6RM)，它允许您查看 sqlite 数据库及其内容（而不是修改）。尝试启动模拟器，然后导航到文件资源管理器选项卡，找到应用程序的包名称、数据文件夹，然后通过单击插件图标打开 db 文件（它会自动在 DDMS 选项旁边包含一个图标）

# html - 响应式网页 - 随着外部 div 大小的变化调整图像大小？

> ID：14540786
> 
> 赞同：1
> 
> 时间：2013-01-26T19:38:02.327
> 
> 标签：html, css, resize, responsive-design

我正在设计一个页面，上面会有一些小图像。我希望它们在两列中并随着窗口的变化而增长/缩小。

看看我的[jsFiddle](http://jsfiddle.net/A9WAa/)：

您会注意到，当您调整窗口大小时，图片会左右移动，因此当窗口很小时，只有一列，如果窗口很宽，则会有很多。而不是这种行为，我想调整图像的大小，以便始终有两列。

我认为将宽度设置为 45% 是一个简单的例子……显然不是。

下面是小提琴的代码：

```
<div id="Thumbs">
<ul>
    <li>
        <img src="http://goo.gl/LXa6K">
    </li>
    <li>
        <img src="http://goo.gl/LXa6K">
    </li>
    <li>
        <img src="http://goo.gl/LXa6K">
    </li>
    <li>
        <img src="http://goo.gl/LXa6K">
    </li>
    <li>
        <img src="http://goo.gl/LXa6K">
    </li>
    <li>
        <img src="http://goo.gl/LXa6K">
    </li>
</ul> 
```

-

```
#Thumbs ul {
list-style: none;
}
#Thumbs ul li {
float:left;
margin: 10px 0 0 5%;
}
#Thumbs ul li img {
/*
How do you resize the images?
*/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:40:37.953

我认为将它们的大小设置为父级的 100% 应该可以：

```
#Thumbs ul li img {
    width: 100%;
    height: 100%;
} 
```

**未经测试！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:43:08.587

在 CSS 中将`height`和设置为 100%。`width`

```
#Thumbs ul li img {
    height: 100%;
    width: 100%;
} 
```

[请参阅此处](http://jsfiddle.net/A9WAa/1/)的编辑。

您可以看到这些屏幕截图的变化：

![在此处输入图像描述](../Images/d65675a107ce6dadb41a6d0766a9bc01.png) ![在此处输入图像描述](../Images/4965558c30b4671591a375dc27a23ad2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T20:00:30.910

[http://jsfiddle.net/johnkoht/jHm8w/3/](http://jsfiddle.net/johnkoht/jHm8w/3/)

将图像宽度设置为 100% 是一个好的开始

```
#thumb ul li img {
  width: 100%;
} 
```

我将您的 li 样式更新为：

```
#Thumbs ul li {
  display: inline-block;
  margin: 10px 0 0 5%;
  width: 44.6%;
} 
```

不知道你为什么将你的 li 边距设置为，`margin: 10px 0 0 5%;`但我一直这样。我更新了显示和宽度。如果您需要正确的列齐平，请尝试添加

```
#thumbs ul li:nth-child(2n+2) {
  float: right;
} 
```

希望有帮助。

# node.js - Jade - 将新行转换为 并保持内容编码

> ID：14540788
> 
> 赞同：10
> 
> 时间：2013-01-26T19:38:19.033
> 
> 标签：node.js, pug

我对 Jade 模板引擎还不是很熟悉。有没有办法将新行（如**\n** ）转换为**br**标签，同时保持其他内容的编码？

例如

```
.replace(/\n/g,'</br>') 
```

应用于编码值应该可以完成工作。但是我不确定如何对值进行编码并获得结果。有什么帮手吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-26T19:49:20.417

您可以使用翡翠转义方法并替换返回值中的换行符，如下所示：

```
p !{escape(foo).replace(/\n/g, '<br/>')} 
```

我不知道您的用例有任何内置功能。

* * *

看起来 pug 摆脱了转义功能，所以这就是你现在必须使用的：

```
p !{foo.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\n/g, '<br/>')} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-07-25T12:39:36.410

如果你不完全需要`<br>`，你可以简单地将你的文本放在[**`<pre>`**](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/pre)标签内。所有空格（包括新行）都将显示为已键入。

或者您可以设置 css 规则**`white-space: pre`**以保留空白预格式化。检查[MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-06-29T17:09:11.007

转义方法，甚至将简单的空格（''）字符转换为“%20”。

[MDN 说转义已被弃用](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/escape)，它用于在 url 中编码字符串，而不是 html 内容。另一种解决方案，

```
each line in foo.split(/\n/)
  = line
  br 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-30T18:50:27.163

大多数答案说你需要做`p !{foo.replace(/\n/g)}`。但是，这还不够：`\n`in 正则表达式匹配换行符，因此您需要转义`\`in `\n`。您可以通过添加附加`\`到`\n`.

**最终结果：**

```
p !{foo.replace(/\\n/g, '<br />')} 
```

**注意：**如果您也想转义其他字符，您可以添加：
`.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')`

**编辑：**
您可以使用`p #{foo.replace...}`正确转义 html 标签中的所有字符。如果您想防止用户`<script>...</script>`在输入字段中插入标签来入侵您的网站，这可能会很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-21T09:45:14.710

考虑你是否真的想要`<br>`标签。

## 如果您可以改用 CSS

最好使用`white-space: pre-line`. 查看[MDN 页面](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)，上面写着

> `pre-line`
> 
> 空白序列被折叠。在换行符处、在 处`<br>`和根据需要填充行框时会换行。

这与正常行为相同，只是换行符变成换行符。

这应该做你想要的。

## 如果你想要`<br>`标签

此处提供`<br>`标签的所有现有答案要么不转义 HTML 的输出（这可能很危险），要么重新实现转义逻辑，要么留下尾随换行符。

这个基于[帕拉尼的回答](https://stackoverflow.com/a/24478350/496046)，但没有留下尾随换行符，并且还可以防止`foo`无效或错误。

```
each line in (foo || '').split('\n').slice(0, -1)
  = line
  br
= (foo || '').split('\n').pop() 
```

我不喜欢这个解决方案，但如果你想要`<br>`标签，我认为它比其他解决方案更可取。

如果您可能要通过它放置大字符串，那么为结果创建一个临时变量可能是个好主意，`split`因此它不会执行两次。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-02-13T14:38:58.277

你可以这样做：

```
p !{someString.replace(/\n/g, '<br/>')} 
```

请注意，此方法将正确转义字符串。

# python - 为什么 python 全局作用域会受到局部作用域操作的影响？

> ID：14540789
> 
> 赞同：0
> 
> 时间：2013-01-26T19:38:38.907
> 
> 标签：python, scope

我认为传递给 python 函数的变量的更改保留在函数的本地范围内，而不是传递到全局范围内。但是当我写一个测试脚本时：

```
#! /usr/bin/python
from numpy import *

def fun(box, var):
    box[0]=box[0]*4
    var=var*4
    return 0

ubox,x = array([1.]), 1.
print ubox,x
fun(ubox,x)
print ubox,x 
```

输出是：

```
[myplay4]$ ./temp.py 
[ 1.] 1.0
[ 4.] 1.0 
```

整数变量 x 不受函数内部操作的影响，但数组受。列表也会受到影响，但这只发生在对列表/数组切片而不是对单个元素进行操作时。

谁能解释为什么在这种情况下本地范围会传递给全局范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:45:53.047

在你的功能

```
def fun(box, var):
    box[0]=box[0]*4
    var=var*4
    return 0 
```

两者`box`和`var`都是本地的，并且更改它们不会更改它们在调用范围内的值。但是，这一行：

```
box[0]=box[0]*4 
```

不改变`box`；`box`它改变了引用的对象。如果那行写成

```
box = box[0]*4 + box[1:] 
```

那么`box`在调用范围内确实会保持不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T19:48:18.297

要意识到的重要一点是，当将对象传递给函数时，该函数不能与该对象的独立副本一起使用，它与同一个对象一起使用。因此，对对象的任何更改对外部都是可见的。

您说对局部变量的更改仍然是局部的。这是真的，但它只适用于改变变量（即重新分配它们）。它不适用于改变变量指向的对象。

在您的示例中，您 reassign `var`，因此更改在外部不可见。但是，您正在变异`box`（通过重新分配其元素之一）。这种变化在外部是可见的。如果您只是简单地重新分配`box`以引用不同的对象 ( `box = something`)，则该更改不会在外部可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T19:43:22.990

这与范围完全无关。

您正在将一个对象传递给一个函数。在该函数内部，该对象发生了变异。关键是函数内部的变量与调用函数中引用的对象相同，因此更改在外部可见。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-26T19:48:20.193

这不取决于范围。这取决于 Python 如何复制对象。在这方面，存在三种对象：标量、可变对象、不可变对象。

标量是按值复制的，可变对象是按引用复制的，不可变对象可能是按引用复制的，但是由于您无法修改它们，因此没有任何含义。

例如，标量是所有数字类型。不可变的有：字符串和元组。可变的有：列表、字典和其他对象。

# php - 防止直接访问 PHP 文件

> ID：14540793
> 
> 赞同：0
> 
> 时间：2013-01-26T19:38:45.370
> 
> 标签：php

假设我有两个域：*domainA.com*和*domainB.com*。在*domainB.com*上，我将使用 iframe 访问*domainA.com*上的 PHP 文件。

有没有办法我可以设置一个`if/else`语句，以便没有用户可以访问该 PHP 文件`domainA.com/file.php`？该文件只能从*domainB.com*上的 iframe 加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:46:29.297

多种方式。我想到的一个是使用 $_SERVER['SERVER_NAME']。如果不是“domainB.com”，则退出执行或执行其他操作。如果您必须修改许多文件，请编辑 VHOST 并创建将在全局范围内处理它的前置脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T21:29:10.533

如果您在 Apache 上运行您的网站，您可能会阻止通过 .htaccess 或您的虚拟主机访问 file.php；

[http://httpd.apache.org/docs/2.2/howto/access.html](http://httpd.apache.org/docs/2.2/howto/access.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T19:55:28.303

在 file.php 顶部尝试此操作，以确保 file.php 仅作为 iframe 在另一个页面上加载：

```
<script type="text/javascript">
var isInIFrame = (window.location != window.parent.location) ? true : false;

if(!isInIframe){
 document.execCommand('Stop'); //or window.stop(); dunno if this works on IE
}
</script> 
```

# java - Spring MVC 表单标签 - 单选按钮

> ID：14540794
> 
> 赞同：1
> 
> 时间：2013-01-26T19:38:47.707
> 
> 标签：java, spring-mvc

我一直在尝试遍历承包商的 ArrayList 并选择其中一个传递给控制器​​ POST 方法。我无处可去。

下面给出了第二个块中显示的错误。我认为我没有正确取消它。

我只需要选择 loginId 并将其传递给控制器​​。

```
<c:forEach items="${searchResults}" var="searchResult">
    <tr>
        <td><c:out value="${searchResult.loginId}" /></td>
        <td><c:out value="${searchResult.email}" /></td>
        <td><c:out value="${searchResult.firstName}" /></td>
        <td><c:out value="${searchResult.lastName}" /></td>
        <td><form:radiobutton path="${searchResult.loginId}" value="${searchResult.loginId}"/></td>
    </tr>
</c:forEach> 
```

错误消息（对不起长度）。

```
org.apache.jasper.JasperException: org.springframework.beans.NotReadablePropertyException: Invalid property 'BC2506E93E207D1AE040700ACA2479D7' of bean class [java.util.ArrayList]: Bean property 'BC2506E93E207D1AE040700ACA2479D7' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T20:53:29.090

`path`应该是与表单关联的命令对象的属性名称。在单选按钮标签的情况下，如果路径属性引用的属性中的值与属性引用的值具有相同的值，则将检查单选按钮`value`。

所以，如果命令对象有一个`getFoo()/setFoo()`属性，并且如果`getFoo()`返回“hello”，并且`searchResult.getLoginId()`返回“hello”，下面的标签

```
<form:radiobutton path="foo" value="${searchResult.loginId}"/> 
```

将生成以下选中的 HTML 单选输入：

```
<input type="radio" value="hello" checked="checked"/> 
```

如果`searchResult.getLoginId()`返回“goodbye”，那么下面的标签

```
<form:radiobutton path="foo" value="${searchResult.loginId}"/> 
```

将生成以下未选中的 HTML 单选输入：

```
<input type="radio" value="goodbye"/> 
```

# java - 自动装箱不适用于实例变量？

> ID：14540801
> 
> 赞同：1
> 
> 时间：2013-01-26T19:40:12.333
> 
> 标签：java, autoboxing

我定义了一个 Double 实例变量，如下所示：

```
public class CurrencyActivity extends Activity {

    private Button convertBtn;
    private Double SEKrate;

....
public void convertCurrency() {
....
Double inputNum = Double.parseDouble(editTextStr);
Double result = inputNum*SEKrate;
....
}
....
} 
```

运行时，它在该行显示 NullPointer 异常

```
Double result = inputNum*SEKrate; 
```

似乎 SEKrate 已初始化为 null，但此处未执行自动装箱。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:42:32.150

如果您不初始化 a`Double`它是`null`并且`null`不能拆箱为 a `double`。

所以初始化你的变量。

```
 private Double SEKrate=0; 
```

# if-statement - 我不知道为什么我的批次 if 和 goto 不起作用

> ID：14540805
> 
> 赞同：1
> 
> 时间：2013-01-26T19:40:19.997
> 
> 标签：if-statement, batch-file, goto

我不知道为什么我的批处理 if 和 goto 无法正常工作，直到用户必须选择运行。整个事情刚刚关闭这是我的脚本：

```
@Echo off
:Password  
set input=
set b=
set c=
set /p input=Password:
if %input%==******** goto yes
if not %input%==******** goto no
cls
:yes
cls
echo Access Accepted! Welcome Tucker!
echo.
set /p op=Enter Your Full-Name For Access:
if %op%== TuckerGarySiegel goto home
cls
:no
echo Wrong Password. Access Denied. No Entry.
goto password
cls
:home
color 1f 
```

这就是我认为的问题区域

```
Echo Welcome Tucker!
echo 1) My Batch Files
echo 2) Google Chrome
set /p input=Type Your Selection: 
if %c%== 1 goto batch

if not %c%== 1 goto home

pause
cls
:batch
echo Choose File:
echo 1) Password Script

set /p b=Make Selection: 
if %b%== 1 goto passscript
pause
cls
:passscript 
```

我还需要做剩下的

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T20:46:10.180

```
set /p input=Type Your Selection: 
if %c%== 1 goto batch
if not %c%== 1 goto home 
```

您正在设置变量`input`，然后检查变量`c`。试试这个，这将允许它工作：

```
set /p input=Type Your Selection: 
if %input%== 1 goto batch
if not %input%== 1 goto home 
```

* * *

PS你不需要检查 an`if`和 an `if not`。这样做会很好：

```
set /p input=Type Your Selection: 
if %input%== 1 goto batch
goto home 
```

# ios - 初始化时可以在视图控制器的 loadview 中调用 IOS 属性访问器吗？

> ID：14540811
> 
> 赞同：-1
> 
> 时间：2013-01-26T19:40:50.137
> 
> 标签：ios, properties, initialization

在我的项目中，我正在创建没有 IB 的 UIViewControllers，因此没有 nib 文件，因此所有可见或其他的控制器内容都是在**loadView:**中以编程方式创建的。因此，我本质上是在**loadView:**中“初始化”我的所有对象。这是正确的做法吗？或者我应该把我所有的初始化都放在**initWithNibName:bundle:**中吗？

因为它是我在控制器的**loadView 中创建我的 UIView 子视图的实例：**像这样：

```
self.mySubView =  [[SubView alloc] initWithFrame:aframe];
[self.view addSubView:self.mySubView];
[self.mySubView release]; 
```

所以我正在使用合成属性来实例化其中的几个子视图。由于我不在初始化程序中，因此我通过调用它们的访问器来创建这些视图，如上所述。但是，它确实感觉这本质上是初始化代码，所以也许我应该直接在我的 ivars 上调用 alloc/init，而不是通过访问器，这让我认为我应该在**initWithNibName:bundle:**中执行此操作。

如果我在**loadView:**中初始化对象是正确的，我真的应该使用访问器来分配/初始化吗？

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:08:02.837

在`initWithNibName:bundle:`调用时（这里我假设您没有使用 nib 文件），您的视图控制器的受控视图尚未创建。它在第一次`self.view`被引用时被创建。最好不要在 init 方法中执行此操作。因此，最好不要在 init 方法中创建子视图。

第一次`self.view`以任何方式引用，该`loadView`方法由视图控制器自动调用。此时以编程方式创建受控视图是您的工作。在该`loadView`方法中创建您的子视图是完全可以的，如果您遵循我建议的良好做法，您将需要这样做。但是您应该只`self.view`在`loadView`方法中引用以将受控视图分配给它，这意味着您应该在方法中只引用它一次`loadView`。

您不应该在`loadView`方法中这样做：

```
[self.view addSubView:self.mySubView]; 
```

这是因为您在调用创建它的方法中引用受控视图。`self.view`不是为您创建的，您必须在“loadView”方法中创建它。

相反，使用局部变量来创建受控视图，然后在方法`self.view`结束时将该局部变量分配给`loadView`。

# java - 在java中对txt文件的列求和

> ID：14540812
> 
> 赞同：0
> 
> 时间：2013-01-26T19:41:00.043
> 
> 标签：java

我有一个文本文件，内容如下：

1 2 3 4 5

6 7 8 9 1

8 3 9 7 1

9 3 4 8 2

8 7 1 6 5

其中每个数字由制表符分隔。

我的问题是，有没有一种简单的方法可以使用 java 对数字列求和？我希望它求和 1+6+8+9+8、2+7+3+3+7 等。我正在使用以下方法读取文件：

```
 public static boolean testMagic(String pathName) throws IOException {
    // Open the file
    BufferedReader reader = new BufferedReader(new FileReader(pathName));

    // For each line in the file ...
    String line;
    while ((line = reader.readLine()) != null) {
        // ... sum each column of numbers
        }

    reader.close();
    return isMagic;
}

public static void main(String[] args) throws IOException {
    String[] fileNames = { "MyFile.txt" }; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:48:29.830

列数是已知的还是可变的？您可以创建一个总和数组并将每一行解析为整数并将其添加到正确的总和中。

```
// For each line in the file ...
String line;
int sums[5]; //Change to the number of columns
while ((line = reader.readLine()) != null) {
    String tokens[] = line.split("\t");
    for(int i = 0; i < 5; i++)
    {
       sums[i] += Integer.parseInt(tokens[i]);
    }
 } 
```

如果您事先不知道列数，请使用 an`ArrayList`并以不同的方式执行第一行，以便您可以计算出列数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:45:22.050

在`while`-loop 中拆分字符串（用 分隔`\t`）然后解析`int`值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T19:48:47.237

从文本文件中解析数字的最简单方法是使用[`java.util.Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)，如下所示：

```
import java.util.Scanner;
import java.io.File;

public class Summer {
    public static void main(String[] args)
    throws Exception
    {
        Scanner sc = new Scanner(new File("file.txt"));
        while (sc.hasNext()) {
            System.out.println(sc.nextInt());
        }
    }
} 
```

由于您想逐行总结，您可以使用两个扫描仪：

```
import java.io.File;
import java.util.ArrayList;
import java.util.Scanner;

public class Summer {
    public static void main(String[] args)
    throws Exception
    {
        /* List to hold sums */
        ArrayList<Integer> sums = new ArrayList<Integer>();

        Scanner sc_file = new Scanner(new File("file.txt"));
        while (sc_file.hasNextLine()) {
            Scanner sc_line = new Scanner(sc_file.nextLine());

            /* Process each column within the line */
            int column = 0;
            while (sc_line.hasNext()) {
                /* When in column n, make sure list has at least n entries */
                if (column >= sums.size()) {
                    sums.add(0);
                }
                sums.set(column, sums.get(column) + sc_line.nextInt());
                column++;
            }
        }

        System.out.println(sums);
    }
} 
```

# asp.net-mvc-4 - ASP.NET MVC 4 数据库脚手架自引用模型

> ID：14540815
> 
> 赞同：2
> 
> 时间：2013-01-26T19:41:25.857
> 
> 标签：asp.net-mvc-4, entity-framework-migrations

我首先在 C# 中使用代码构建了一个模型。该模型从字面上表示一个用于网站构建应用程序的容器元素，换句话说，该模型定义了一个 Div 标记或一些这样的 HTML 元素。就像一个可以包含多个子元素的 Div 标签一样，我试图在我的模型中表示它，但是到数据库的脚手架并没有给我我所期望的。

我应该得到一个新的多对多连接表，但我只在数据库中得到一个需要单个 int 数据类型的列。

这是模型：

```
 public class ElementContainer
{
    public int ElementContainerID { get; set; }
    public int PageId { get; set; }
    public int? ParentElementContainerID { get; set; }
    public string ElementContainerName { get; set; }
    public ElementType ElementType { get; set; }
    public string ElementClass { get; set; }
    public PageAsset PageAsset { get; set; } // content of container

    public List<ElementContainer> NestedContainers { get; set; }
} 
```

最后一行是自引用属性，它只是显示为名为 ElementContainer_ElementContainerID 的列

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:45:10.170

我同意 Bahman，DB 首先更容易。

虽然我没有尝试做您正在尝试的事情，但您的代码看起来像一个自我加入，可以完全按照您的描述进行。

这是一对多的关系。EF Navigation 将提取所有嵌套子容器的列表。

如果要使用 EF Code-First 创建多对多关系，则应创建另一个实体

```
 public class ContainerChildren
{
    public int ElementContainerID { get; set; }
    public List<ElementContainer> NestedContainers { get; set; }
} 
```

这个参考应该可以帮助你得到确切的想法[http://blogs.msdn.com/b/wriju/archive/2011/05/14/code-first-ef-4-1-building-many-to-many-关系.aspx](http://blogs.msdn.com/b/wriju/archive/2011/05/14/code-first-ef-4-1-building-many-to-many-relationship.aspx)

# php - Android-PHP-mysql 其他设备无法写入数据

> ID：14540817
> 
> 赞同：0
> 
> 时间：2013-01-26T19:41:29.007
> 
> 标签：php, android, mysql

我创建了一个 android 应用程序，它使用 PHP 和 mysql 在我的网站上注册和登录。我已经在我的设备和模拟器上测试了几次，它工作得很好。

然后我让我的朋友在他的设备上尝试一下，但是当他尝试注册（通过他的设备，通过他的互联网连接通过 php 和 json 将数据写入 mysql）时，它失败了。应用程序挂起一段时间，然后显示警告应用程序停止......或类似的东西......

是什么让这发生？是从php方面造成的吗？文件权限？从mysql方面？或者是其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:00:00.253

网络服务器在您的位置吗？也许这是您配置设置的方式。确保您的端口正确转发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T20:07:33.290

请提供更多信息，改进您的问题，例如：

*   您的朋友可以通过浏览器连接到 php 网站吗？
*   您是否检查过您的网络服务器的日志文件（您的朋友是否真的连接到您的网络服务器？）

您可以尝试使用调试代理工具调试数据流量并检查“发生了什么”，例如： [http ://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

# asp.net - 无法将 AspNetSynchronizationContext 传播到 TPL 任务

> ID：14540821
> 
> 赞同：1
> 
> 时间：2013-01-26T19:41:44.607
> 
> 标签：asp.net, multithreading, c#-4.0

我已经阅读了许多文章，为了在 4.5 之前的版本中保留 HttpContext.Current，我们应该传递处理线程的 SynchornizationContext。
这是我试图执行的代码：

```
TaskScheduler taskScheduler = TaskScheduler.FromCurrentSynchronizationContext();
Task.Factory.StartNew(() => HandleInquiry(currentInquiry, request),
                                                    CancellationToken.None,
                                                    TaskCreationOptions.None, 
                                                    taskScheduler) 
```

当我通过这段代码进行调试时，我可以在任务调度之前确认 taskScheduler 包含 AspNetSynchronizationContext。但是，在 HandleInquiry 方法内（在任务内）， SynchronizationContext.Current 为空，而 HttpContext.Current 也为空。我确定我遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T20:01:24.553

在后台任务中访问 HttpContext 是一个糟糕的设计。正确的方法是仅将所需的信息作为参数传递。但是，如果您依赖一些在此阶段无法修改的遗留和编写错误的代码，您可以将整个 HttpContext 作为参数传递并在任务中重新分配它：

```
Task.Factory.StartNew(
    state => 
    {
        System.Web.HttpContext.Current = (HttpContext)state;
        HandleInquiry(currentInquiry, request);
    },
    System.Web.HttpContext.Current
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T05:39:28.273

您可以在 Web.config 文件的 appSettings 部分添加**key="aspnet:UseTaskFriendlySynchronizationContext" value="true"**的键/值对

# c# - 在 Windows 窗体中有效地突出显示带有大文本的富文本框

> ID：14540823
> 
> 赞同：0
> 
> 时间：2013-01-26T19:42:01.150
> 
> 标签：c#, .net, winforms, richtextbox, scintilla

我有巨大的文本文件，我逐行处理并将结果添加到 a 中`StringBuilder`，因此我不会在主窗体中加载单行文本。

处理完成后，我将结果转储到`richtext textbox`. 我想根据我拥有的关键字突出显示一些文本。我最终使用了一个字符串。查找每个单词的所有文本以突出显示它。我尝试使用 lambda 表达式 Richbox.BeginInvoke 来突出显示文本。该线程工作正常，但处理富文本框并且非常慢。

考虑到 50-100 MB 的文本，如何`richtext box`逐行循环并以可理解的性能突出显示其中的一些单词？

这个问题已从超级用户移出，因为它与编程相关。有一些建议的解决方案，例如： [http](http://www.dotnetcurry.com/ShowArticle.aspx?ID=146) ://www.dotnetcurry.com/ShowArticle.aspx?ID=146 和 [http://www.codeproject.com/Articles/4031/Background-Highlighting-with-the-RichTextBox- the-S](http://www.codeproject.com/Articles/4031/Background-Highlighting-with-the-RichTextBox-the-S) ，但它们对于大文本仍然效率低下。

```
foreach (string x in LArgs)
{
    int len =0;
    int index = 0;
    int lastIndex=0;
    output.Invoke(() => { len=output.Text.Length; });
    output.Invoke(() => { lastIndex=output.Text.LastIndexOf(x); });
    while (index < lastIndex)
    {
        output.Invoke(() => { output.Find(x, index, len, RichTextBoxFinds.None); });
        output.Invoke(() => { this.output.SelectionBackColor = Color.Yellow; });
        output.Invoke(() => { index = this.output.Text.IndexOf(x, index) + 1; });
    }
} 
```

我添加了库并使用了以下代码：

```
scintilla1.Text = output.Text;

StringBuilder conf = new StringBuilder();
conf.AppendLine("<?xml version=\"1.0\" encoding=\"utf-8\" ?>");
conf.AppendLine(@"<ScintillaNET>");
conf.AppendLine("<Language Name=\"log\">");
conf.AppendLine("<lexer LexerName=\"log\">");
conf.AppendLine("<Keywords List=\"0\">");

foreach (string x in LArgs)
{
    conf.Append(x + " ");
}
//var
conf.AppendLine("</Keywords>");
conf.AppendLine(@"</lexer >");
conf.AppendLine(@"<Styles>");

conf.AppendLine(@"</Language>");
conf.AppendLine(@"</ScintillaNET>");

File.WriteAllText(AppDomain.CurrentDomain.BaseDirectory+@"ScintillaNET.xml", conf.ToString());
scintilla1.Lexing.LexerLanguageMap["log"] = "cpp";
scintilla1.ConfigurationManager.CustomLocation = AppDomain.CurrentDomain.BaseDirectory + @"ScintillaNET.xml";
scintilla1.ConfigurationManager.Language = "log";
scintilla1.ConfigurationManager.Configure(); 
```

文本已加载，但未突出显示任何文本或我稍后添加的任何文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:20:21.083

你可以使用外部库吗？

那么[Scintilla.Net呢？](http://scintillanet.codeplex.com/)

这是一个基于 Scintilla（SciTE，Notepad++）的非常好的快速高亮控件

# c# - 为什么在 WCF 服务中向我抛出 FaultException？

> ID：14540827
> 
> 赞同：0
> 
> 时间：2013-01-26T19:42:20.260
> 
> 标签：c#, wcf, entity-framework, entity-framework-4.1, entity-framework-5

让我澄清一下我的情况。我有一个使用库的 WCF 服务，在这个库中存在数据库模型（edmx）。

在我的 WCF 服务中：

```
[DataContract]
public class QuestionSetInformation
{
    [DataMember]
    public string Id { get; set; }
    [DataMember]
    public string SetName { get; set; }
    [DataMember]
    public string ObjectiveName { get; set; }
}

[ServiceContract]
public interface IService1
{
    [OperationContract]
    QuestionSetInformation[] GetQuestionSets(string objectiveName);
}

public QuestionSetInformation[] GetQuestionSets(string objectiveName)
{
    var query = from r in QuestionRepositoryManager.GetRepositories()
                select new QuestionSetInformation()
                {
                   Id = r.Id,
                   SetName = r.SetName,
                   ObjectiveName = r.ObjectiveName
                };

    return query.ToArray();
} 
```

由于我的库使用 EDMX，所以我将连接字符串移动到了我的 WCF，它使用 WCF 测试客户端完美运行。它给了我我所期待的。

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="ContosoDb" connectionString="metadata=res://*/Entities.Model1.csdl|res://*/Entities.Model1.ssdl|res://*/Entities.Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=X;initial catalog=contoso2_db;persist security info=True;user id=X;password=X;multipleactiveresultsets=True;application name=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework> 
```

但是在桌面应用程序中使用这个 WCF 时，我遇到了以下异常：

```
 ServiceReference1.Service1Client service = new ServiceReference1.Service1Client("BasicHttpsBinding_IService1");
        ServiceReference1.QuestionSetInformation[] qss = service.GetQuestionSets("something"); 
```

> FaultException`1 未处理 如果在 Code First 模式下使用，使用 T4 模板生成的用于 Database First 和 Model First 开发的代码可能无法正常工作。要继续使用 Database First 或 Model First，请确保在执行应用程序的配置文件中指定了实体框架连接字符串。要使用从 Database First 或 Model First 生成的这些类，使用 Code First 添加使用属性或 DbModelBuilder API 的任何其他配置，然后删除引发此异常的代码。

我在网上调查了这个错误，每个人都告诉使用连接字符串有问题，但我认为情况不一样。我不知道如何解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:36:29.373

这是它使用的连接字符串的问题...它使用某种默认的 SqlClient 连接字符串（即不是指定三个 EF 元数据文件的实体框架连接字符串），使其认为您正在以代码优先模式运行。

确保连接字符串的名称相同，或者将要使用的连接字符串名称传递给 DbContext 构造函数。

# java - 需要帮助改进我的正则表达式

> ID：14540829
> 
> 赞同：0
> 
> 时间：2013-01-26T19:42:29.857
> 
> 标签：java, regex

我有一个文本文件，其中我说了这三行文本。

```
.....03122      25   8.2  "'Allo 'Allo!" (1982) {Fleeing Monks (#7.3)}
0.1.1.2003      15   5.6  "$weepstake$" (1979)
0..0012101      45   6.6  "$#*! My Dad Says" (2010) {Make a Wish (#1.9)} 
```

我只想提取以下内容。

```
8.2  "'Allo 'Allo!" (1982)
5.6  "$weepstake$" (1979)
6.6  "$#*! My Dad Says" (2010) 
```

我尝试在 Java 中使用扫描仪，但失败了。我还尝试使用制表符分隔字符串。看起来有一些不均匀间隔的标签。

我虽然使用正则表达式很容易获得这三个值。这是我到目前为止能够写的。有人可以帮帮我。

```
\\d\\.\\d 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:54:57.803

使用这个正则表达式`\d+\.\d+\s+".+?"\s+\(\d+?\)`

分组使用这个`(\d+\.\d+)\s+"(.+?)"\s+\((\d+?)\)`

```
8.2          - 1 group
'Allo 'Allo! - 2 group
1982         - 3 group 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T19:51:00.680

我不知道是否有一个正确的答案，这取决于数据的确切性质，但我建议这样：

```
 [0-9.]+\s+\d+\s+(\d\.\d\s+.*" \(\d\d\d\d\)) 
```

您需要捕获 () 中的内容。

这意味着匹配数字/点，后跟 1 个或多个空格，然后是数字，然后是 1 个或多个空格。然后在实际匹配中，数字、点、数字、1 个或多个空格、引号、空格、文字（4 位数字和文字）。

# c - 在 C 中使用 openMP 并行化函数

> ID：14540832
> 
> 赞同：0
> 
> 时间：2013-01-26T19:42:42.917
> 
> 标签：c, parallel-processing, openmp, openmpi

我编写了一个程序，它输入矩阵大小和线程数，然后生成一个由 0 和 1 组成的随机二进制矩阵。然后我需要找到 1 的集群并给每个集群一个唯一的数字。

我得到了正确的输出，但我在并行化函数时遇到了问题。

我的教授要求我将矩阵行分解为“thread_cnt”部分。即：线程大小为 4，矩阵大小为 8，然后它分成 4 个矩阵，每个矩阵有 2 行。

代码如下：

```
//Inputted Matrix size n and generated a binary matrix rand1[][]
//
begin = omp_get_wtime();
width = n/thread_cnt;
#pragma omp parallel num_threads(thread_cnt) for
for(d=0;d<n;d=d++)
{
    b=d+width;
    Mat(d,b);
    d=(d-1)+width;    
}

Mat(int w,int x)
{
//printf("\n Entered function\n");
for(i=w;i<x;i++)
{    
    for(j=0;j<n;j++)
    {
        //printf("\n Entered the loop also\n");
        //printf("i = %d, j = %d\n",i,j);
        if(rand1[i][j]==1)
        {
            rand1[i][j]=q;
            adj(i,j,q);
            q++;
        }
    }
}
}

adj(int p, int e, int m)            //Function to find adjacent 1's 
{   
//printf("\n Entered adj function\n");
//printf("\n p = %d e = %d m = %d\n",p,e,m);
if (rand1[p][e+1] == 1)
{
    //printf("Test1\n");
    rand1[p][e+1]=m;
    adj(p,e+1,m);
}
if (rand1[p+1][e] == 1)
{
    rand1[p+1][e]=m;        
    //printf("Test2\n");
    adj(p+1,e,m);
}
if (rand1[p][e-1] == 1 && e-1>=0)
{
    rand1[p][e-1]=m;
    //printf("Test3\n");
    adj(p,e-1,m);

}
if (p-1>=0 && rand1[p-1][e] == 1)
{
    rand1[p-1][e]=m;
    //printf("Test4\n");
    adj(p-1,e,m);
}

} 
```

该代码给了我正确的输出。但是当我增加线程数时，时间会增加而不是减少。对于 1 个线程，我得到**0.000076**，对于 2 个线程，我得到 **0.000136**。

它看起来像它的迭代而不是并行化。谁能帮我解决这个问题？

PS：我需要同时显示串行时间和并行时间，并表明我由于并行化而获得了性能提升。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:36:33.730

线程数增加时时间增加的原因是每个线程都在执行第一个循环。看来，您没有将子矩阵放入线程中，而是每个线程都对每个子矩阵（即所有矩阵）进行操作。要使线程单独在矩阵上工作，您应该使用它们唯一的 tid 编号，您可以通过以下行获得：

```
 tid = omp_get_thread_num(); 
```

然后你应该做一个简单的映射：如果 pid 是我在 (i+1)th 子矩阵上操作，其中 0<=i<=nthreads-1 可以编码为：

```
Mat(i*width,i*width+width) 
```

# javascript - 如何将对象对象转换为对象数组？

> ID：14540837
> 
> 赞同：0
> 
> 时间：2013-01-26T19:43:04.550
> 
> 标签：javascript, jquery, arrays, json

我有一个外部文件**people.json**。如何将其转换为具有 json 语法的 javascript 数组？
这是**people.json**的内容：

```
{
"1":{
    "Name":"Jhon",
    "Surname":"Kenneth",
    "mobile":329129293,
    "email":"jhon@gmail.com"
},
"2":{
    "Name":"Thor",
    "Surname":"zvalk",
    "mobile":349229293,
    "email":"thor@gmail.com"
},
"3":{
    "Name":"Mila",
    "Surname":"Kvuls",
    "mobile":329121293,
    "email":"mila@gmail.com"
}
} 
```

我想要一个这种格式的数组

```
var person = [
{ "name":"jhon" , "surname":"kenneth", "mobile":329129293, "email":"jhon@gmail.com"}, 
{ "Name":"Thor", "Surname":"zvalk", "mobile":349229293, "email":"thor@gmail.com" }, 
{ "Name":"Mila", "Surname":"Kvuls", "mobile":329121293, "email":"mila@gmail.com"}
]; 
```

我尝试使用下一个代码，但它不起作用：

```
 var person;   
$.getJSON('people.json', function (json) {
person[]= json
}); 
```

顺便说一句，文件contacts.json 在我的服务器中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T19:52:33.573

可以使用 jQuery`$.map()`

```
var newArray=$.map( originalObject, function(item){
    return item;
}) 
```

演示：http: [//jsfiddle.net/qmfn2/](http://jsfiddle.net/qmfn2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T19:49:23.110

试试这样：

```
$.getJSON('people.json', function (json) {
    var people = [];
    for (var key in json) {
        if (json.hasOwnProperty(key)) {
            var item = json[key];
            people.push({
                name: item.Name,
                surname: item.Surname,
                mobile: item.mobile,
                email: item.email
            });            
        }
    }

    // at this stage the people object will contain the desired output
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T19:50:44.373

首先，您需要使用 AJAX 请求获取 JSON 文件。然后遍历接收到的 JSON 对象并将每个属性添加到数组中。

```
function convertToArray (receivedObj) {
    var array = [], key;
    for (key in receivedObj) {
        array.push(receivedObj[key]);
    }
    return array;
}

$.getJSON('people.json', function (json) {
    var array = convertToArray(json);
}); 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T20:04:21.457

像这样：

```
var array = $.map($.parseJSON(data), Object); 
```

[http://jsfiddle.net/mXFKL/](http://jsfiddle.net/mXFKL/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T18:40:07.587

```
$.getJSON('people.json', function (json) {
var array = convertToArray(json);
}); 
```

# php - Windows 2008 上的 ImageMagik 转换命令

> ID：14540842
> 
> 赞同：0
> 
> 时间：2013-01-26T19:43:26.437
> 
> 标签：php, windows, exec

我正在尝试从 php 脚本执行一个简单的 ImageMagick 转换命令，我可以转换相同的文件并通过命令提示符获得结果，但是在 php 中我无法以任何方式执行相同的命令，代码是：

```
exec('convert -density 350 '.__DIR__ . DIRECTORY_SEPARATOR .'test.pdf '. __DIR__ . DIRECTORY_SEPARATOR . 'image.png'); 
```

这个错误是由 php 抛出的

> convert.exe：此图像格式没有解码委托 'C:\XAMPP\htdocs\test.pdf'@error/constitute.c/ReadImage/532。convert.exe：缺少图像文件名“C:\XAMPP\htdocs\image.png”@error/convert.c/ConvertImageCommand/3016。

在 Windows 7 x64 上使用相同的配置，我可以执行并获得结果，但在 Windows 2008 R2 上我无法，这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:38:09.310

好的，所以解决方案非常简单明了，您只需要确保 C:\Windows\Temp 和 Imagick "CONVERT.EXE" 文件夹的权限设置为 "EVERYONE -> ALL" 所以，将所有人分组有权对 convert 和 Temp 文件夹执行任何操作。

希望能帮助到你。

# jquery - 在 div 中选择复选框时，它会返回动画

> ID：14540845
> 
> 赞同：1
> 
> 时间：2013-01-26T19:43:32.633
> 
> 标签：jquery

```
$('.selector').click(function() {
    $(this).children('.drop_down_label').animate({ height: 'toggle' });
 }); 
```

我有一个包含复选框的 div '.drop_down_label'，当我为 div 设置动画时，它可以正常工作

但如果我选中某个复选框，它就会动画回来。

我怎样才能避免这种情况？

我的目标是单击->动画“.drop_down_label”->**选中一些复选框**->然后单击**页面中的任何元素**

导致 '.drop_down_label' 返回**动画**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:46:00.700

[HTML 事件](http://www.quirksmode.org/js/events_order.html)的工作方式是它们冒泡。单击 div 内的复选框也会触发 div 的单击事件。

将单击处理程序附加到执行以下操作的复选框：

```
$("input[type=checkbox]", ".selector").click(function(e){
    e.stopPropagation();
}); 
```

对于单击页面上任何元素的后半部分（尽管我认为您的意思是div*之外*的任何元素），这*应该可以*工作（未经测试）。`.selector`

 *```
$('.selector').click(function() {
    $(this).children('.drop_down_label').animate({ height: 'toggle' });
    $(document).one('click', function(e) {
        $(this).children('.drop_down_label').animate({ height: 'toggle' });
    })
}) 
```*

# php - 在 POST 上生成并保存序列号

> ID：14540849
> 
> 赞同：0
> 
> 时间：2013-01-26T19:44:06.313
> 
> 标签：php, mysql, forms, post

我有一个使用**Post**将信息发送到 PHP 页面的表单。

**PHP页面；**

*   获取表单信息。
*   重新排列它。
*   格式化它。
*   然后将其转换为最终发送到另一个页面并使用该信息执行一些任务的代码字符串。

**表格代码：**

```
<form method="post" action="_php/buildMyPNR.php" name="GuestInfo" 
      onSubmit="return validateFormMethod1();">

<input type="text" name="AccountNumber" id="BID" 
       onkeypress="return isNumberKey(event)" size ="16"/>

<input type="hidden" name="requestID" id="RID" value="" />

..... bunch of other fields

<input type="submit" name="loadURL" id="submit" value="Submit" 
       onsubmit="return ValidateFields();" />

</form> 
```

**我需要做的是；**

*   每次使用页面时生成一个序号。
*   将该号码与发布请求（有点像请求的序列号）一起传递到另一种形式，比如**_php/buildMyPNR.php**。
*   当**_php/buildMyPNR.php加载时，将****AccountNumber**和**requestID**的值保存 到数据库或类似的数据库中。
*   最终它将转到**_php/usageSummary.php**，用户可以在其中单击一个按钮以返回与为请求生成的**requestID**配对 的**AccountNumbers列表。**
***   可以下载 Excel 电子表格格式的列表，但这不是绝对必要的。**

 **实现这一目标的最佳方法是什么？

主要是我需要帮助来生成**requestID**。我需要它们是连续的，所以我假设我需要从我的数据库中的一个数字开始，比如 00001，从我的表单中查询该数字，将 1 添加到返回值，然后在提交时将新值与**AccountNumber**一起保存按下。

我对数据库没有经验，任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:46:59.120

理想情况下，我们会看到一些您已经尝试过的代码架构和示例......

但是，您可以在数据库表中使用自动递增字段，这将为您完成 ID 递增。

![在此处输入图像描述](../Images/8b0a84971a5050a0cdc66efe72baddaf.png)

如果您使用 mysqli 进行 mysql 数据库交互（您可能应该这样做），那么您可以使用以下方法检索此自动编号；

```
$PassedRequestID = $mysqli->insert_id 
```

然后将其传递到您的下一页。

然后，您需要使用（伪代码）之类的内容查询您的数据库；

```
SELECT Accounts.*, Requests.*
INNER JOIN Requests ON Requests.AccountID = Accounts.AccountID
WHERE Requests.RequestID = $PassedRequestID 
```

对于导出到 Excel，如果您使用 Google 搜索*PHP 导出 CSV*，那里将有大量示例可供选择。但是，作为一个例子；

[http://code.stephenmorley.org/php/creating-downloadable-csv-files/](http://code.stephenmorley.org/php/creating-downloadable-csv-files/)**

# php - 启用 PHP 扩展时出错

> ID：14540850
> 
> 赞同：2
> 
> 时间：2013-01-26T19:44:28.953
> 
> 标签：php, apache, windows-xp

我在 Win XP SP3 上运行 PHP 5.4.11 VC9 和 Apache 2.4.3 (apacheLounge)。

我想使用`mb_convert_encoding`，但我得到了：

> PHP 致命错误：调用未定义函数 mb_convert_encoding()

我发现我需要启用扩展`php_mbstring.dll`。但是当我`;`在开始时删除并重新启动 Apache 时，在我的 php 错误日志文件中我得到：

> [26-Jan-2013 19:40:13 UTC] PHP 警告：PHP 启动：在第 0 行未知
> 
> [26-Jan-2013 19:40:15 UTC] PHP 警告：PHP 启动：在第 0 行未知

我试图禁用它并启用其他扩展，但我得到了同样的错误（每次两行）。如果我禁用所有扩展，则没有错误。

啊，当我启用时`php_mbstring.dll`，它不起作用，因为我无法调用`mb_convert_encoding()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T20:13:53.543

我已经解决了将 PHP 文件夹添加到 PATH 并重新启动计算机的问题。

# php - 将一个表中的值插入到另一个表中

> ID：14540854
> 
> 赞同：0
> 
> 时间：2013-01-26T19:44:39.743
> 
> 标签：php, mysql, foreign-keys

我试图将一个值从一个表创建到另一个表中插入我有两个数据库'mem'和'location'

我想从 mem 表中添加主键 'id' 并将其插入到 location 表中的列 'user_id' 中。

我的注册表单页面中有一个 sql 查询，它自动增加 mem 表中的“id”，但似乎没有将相同的值添加到 location 表中的 user_id 中，

```
$id = mysql_insert_id(); mysql_query("INSERT INTO location (user_id) 
            VALUES (SELECT id FROM mem)"); 
```

有人可以帮忙吗！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:47:05.763

正确的查询是：

```
INSERT INTO location (user_id) SELECT id FROM mem 
```

但是，此查询实际上会将“mem”中的*所有*id 值插入“location”。要添加最新的 id，您需要使用

```
INSERT INTO location (user_id) VALUES ($id) 
```

# java - 简单的进出动画与android

> ID：14540857
> 
> 赞同：1
> 
> 时间：2013-01-26T19:44:55.937
> 
> 标签：java, android, android-animation

我对android上的动画有一些疑问：

首先，有人有很好的链接到解释 android 动画的网站吗？请只使用 XML 动画，我不想为动画使用 java 代码..

第二个问题：我想简单地为活动设置动画，当它出现时从紧到左，从左到右，但我无法实现这个简单的动画。

我的 XML 文件如下所示：

```
 push left in:
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="@android:integer/config_shortAnimTime"
        android:fromXDelta="-100%p"
        android:toXDelta="0" />

    <alpha
        android:duration="@android:integer/config_shortAnimTime"
        android:fromAlpha="1.0"
        android:toAlpha="1.0" />

</set>
push right out:
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="@android:integer/config_shortAnimTime"
        android:fromXDelta="0"
        android:toXDelta="100%p" />

    <alpha
        android:duration="@android:integer/config_shortAnimTime"
        android:fromAlpha="1.0"
        android:toAlpha="1.0" />

</set> 
```

在我的代码中，我使用：`overridePendingTransition(R.anim.push_left_in,R.anim.push_right_out);`并且`overridePendingTransition(R.anim.push_right_out,R.anim.push_left_in);`在`super.finiah();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T20:07:49.170

这就是我如何设置一个简单的淡入淡出动画

这是我的incoming.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/decelerate_interpolator" >

<alpha
    android:duration="@android:integer/config_mediumAnimTime"
    android:fromAlpha="1.0"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:toAlpha="0.0" /> 
```

这是我的传出.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/decelerate_interpolator" >

<alpha
    android:duration="@android:integer/config_mediumAnimTime"
    android:fromAlpha="0.0"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:toAlpha="1.0" /> 
```

这就是我如何在我的活动中设置动画

```
 Intent i = new Intent(this, ABCActivity.class);
                startActivity(i);
                ModeSelectActivity.this.overridePendingTransition(
                    R.anim.outgoing, R.anim.incoming); 
```

另外，一定要为反向动画覆盖 onBackPressed()

```
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();

    ModeSelectActivity.this.overridePendingTransition(R.anim.outgoing,
            R.anim.incoming);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:54:21.580

您在此页面上有许多动画：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.5_r1/frameworks/base/core/res/res/anim/](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.5_r1/frameworks/base/core/res/res/anim/)

您可以查看 slide_in_left.xml、slide_in_right.xml、slide_out_left.xml 和 slide_out_right.xml。

您可以将这些转换与 overridePendingTransition() 一起使用。

# .net - 使用反射的原型序列化层次结构类型

> ID：14540862
> 
> 赞同：1
> 
> 时间：2013-01-26T19:45:30.743
> 
> 标签：.net, serialization, reflection, protocol-buffers, protobuf-net

当尝试使用已通过反射加载的 proto 序列化程序序列化层次结构类型时，它似乎有一些奇怪的行为，并且似乎并没有真正起作用。

这是代码：

```
 [ProtoContract]
    [ProtoInclude(10, typeof(Derived))]
    class Base
    {
        [ProtoMember(1)]
        public string BaseFirstProperty { get; set; }
        [ProtoMember(2)]
        public string BaseSecProperty { get; set; }
    }

    [ProtoContract]
    class Derived : Base
    {
        [ProtoMember(1)]
        public string DerivedFirstProperty { get; set; }
    }

    static void Main(string[] args)
    {
        var assembly = Assembly.LoadFile(@"c:\protobuf-net.dll");

        var derived = new Derived()
        {
            BaseFirstProperty = "BaseFirst",
            BaseSecProperty = "BaseSec",
            DerivedFirstProperty = "DerivedFirst"
        };

        var reflectionSerializer = assembly.GetType("ProtoBuf.Serializer");
        var getTypeSerializer = typeof(Serializer);

        var reflectionMethods = reflectionSerializer.GetMethods(BindingFlags.Static | BindingFlags.Public);
        var reflectionGenericMethodInfo = reflectionMethods.First<MethodInfo>(method => method.Name == "SerializeWithLengthPrefix");
        var reflectionSpecificMethodInfo = reflectionGenericMethodInfo.MakeGenericMethod(new Type[] { derived.GetType() });

        var getTypeMethods = getTypeSerializer.GetMethods(BindingFlags.Static | BindingFlags.Public);
        var getTypeGenericMethodInfo = getTypeMethods.First<MethodInfo>(method => method.Name == "SerializeWithLengthPrefix");
        var getTypeSpecificMethodInfo = getTypeGenericMethodInfo.MakeGenericMethod(new Type[] { derived.GetType() });

        var reflectionStream = new MemoryStream();
        var getTypeStream = new MemoryStream();
        reflectionSpecificMethodInfo.Invoke(null, new object[] { reflectionStream, derived, PrefixStyle.Base128 });
        getTypeSpecificMethodInfo.Invoke(null, new object[] { getTypeStream, derived, PrefixStyle.Base128 });

        Console.WriteLine(reflectionStream.ToArray().Length); // Prints out 15
        Console.WriteLine(getTypeStream.ToArray().Length); // Prints out 37
    } 
```

据我所知，它应该是一样的......我做错了什么？请注意，我使用的是 Proto-buf 2.0.0.431。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:01:29.847

错误的排序

```
[ProtoContract]
[ProtoInclude(10, typeof(Derived))]
class Base
{
    [ProtoMember(1)]
    public string BaseFirstProperty { get; set; }
    [ProtoMember(2)]
    public string BaseSecProperty { get; set; }
}

[ProtoContract]
class Derived : Base
{
    [ProtoMember(3)]
    public string DerivedFirstProperty { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:25:34.043

好的; 我已经通过当前的主干代码运行它；我最初得到一个错误处理`ImplicitFields`，但我已经在本地更正了。然后运行它，我得到：

```
37
37 
```

这向我表明，如果最后一次 (625-431)=194 提交，问题已经解决。别问我是哪一个！我建议您尝试 r625 看看效果如何，我还没有部署它，但是应该构建 protobuf-net 项目，或者如果您希望我通过电子邮件将其发送给您，请告诉我。

另外：您可能会发现使用非通用 API 比使用`MakeGenericMethod`; 或者`ProtoBuf.Serializer.NonGeneric`，或者`ProtoBuf.RuntimeTypeModel.Default`（基本上，*通用* `Serializer`API 现在只是转发到*非通用*API，因为 v2 核心删除了所有通用代码；使用通用 API 绝对没有任何优势，除了方便 - 你使用反射时没有）。

# jquery - 如何使用 jquery 切换 li id='' sprite 背景

> ID：14540873
> 
> 赞同：1
> 
> 时间：2013-01-26T19:46:34.707
> 
> 标签：jquery, css, image, switch-statement, sprite

如何在单击事件发生后使用 jquery 切换 li id='' 精灵背景，并在单击另一个导航元素时将其切换回其原始状态，该元素也将切换到另一个精灵图像......我只使用改变的 CSS当我将鼠标悬停在元素上时的背景..它工作正常但我真正想要的是点击后出现的第二个精灵图像在我点击另一个导航元素之前不会改变..

这是html代码

```
<ul  id="navlist">
<li id="ico1"><a href="#"></a></li>
<li id="ico2"><a href="#"></a></li>
<li id="ico3"><a href="#"></a></li>
<li id="ico4"><a href="#"></a></li>
<li id="ico5"><a href="#"></a></li>
<li id="ico6"><a href="#"></a></li>
<li id="ico7"><a href="#"></a></li>
<li id="ico8"><a href="#"></a></li> 
```

CSS代码：

```
#navlist{position:relative;}
#navlist li{margin:0;padding:0;list-style:none;position:relative;top:0;}
#navlist li, #navlist a{height:40px;display:block;}

#ico1{width:73px;height:40px;background:url(../img/sprite.png) no-repeat -96px 0px;transition: 500ms ease-in-out;}

#ico1:hover{width:96px;height:40px;background:url(../img/sprite.png) no-repeat 0px 0px;transition: 500ms ease-in-out;} 
```

.... ETC

这是示例：http: [//jsfiddle.net/facemoi/nvQRf/](http://jsfiddle.net/facemoi/nvQRf/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:53:57.233

假设您有一个所有列表项都继承的公共类：

```
.ico{
   background: url(images/sprite.jpg);
} 
```

现在为每个项目和悬停/活动状态创建类：

```
.ico1{
   background-position: 0 12px;
}

.ico1:hover{
   background-position: 0 24px;
}

.ico1.active{
   background-position: 0 32px;
}

... 
```

使用 jQuery，您只需`active`在点击时切换类

```
$('li').click(function(){

  // remove active class for all other list items
  $(this).parents('ul').find('li').not(this).removeClass('active');

  // add active class on this item
  $(this).addClass('active');
}); 
```

（[一个演示](http://jsfiddle.net/smB7b/)）

这实际上在没有 javascript 的情况下*是*可能的，但是您需要在标记中添加隐藏的单选按钮并制作图标标签

# zurb-foundation - 如何使用 Yeoman 覆盖 Zurb Foundation 中的默认设置？

> ID：14540880
> 
> 赞同：1
> 
> 时间：2013-01-26T19:46:59.320
> 
> 标签：zurb-foundation, gruntjs, yeoman

我已经将**Zurb Foundation**安装到我的**Yeoman**项目中，`yeoman install foundation`然后通过使用更新我的 Gruntfile.js 将其包含在我的项目中`require: 'zurb-foundation'`

当我尝试编辑我的`app/styles/main.scss`文件时，现在出现了问题。我无法覆盖默认的 Zurb 基础 SASS 变量。

我试图在主目录`_settings.scss`内`app/components`和主目录下编辑文件`components`- 但无济于事。

有没有人有任何运气或有解决这个困境的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:40:26.777

我自己找到了答案。

关键是`!important`在你的覆盖之后放置一个声明（基本的 CSS doh！），并将这个覆盖放在你自己的 main.scss 或等效文件中：

```
$mainColour: red!important 
```

并且不要忘记在**Gruntfile.js**中添加 require 语句：

```
compass: {
  dist: {
    options: {
      require: 'zurb-foundation',// ADD THIS LINE
      css_dir: 'temp/styles',
      sass_dir: 'app/styles',
      images_dir: 'app/images',
      javascripts_dir: 'temp/scripts',
      force: true
    }
  }
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T20:00:34.003

您是否尝试过使用来自 github 的 yeoman-foundation-generator？[https://github.com/pchen/yeoman-foundation-generator](https://github.com/pchen/yeoman-foundation-generator)

这就像使用独立的 SASS 和 Foundation。您必须将 git repo 中的文件夹放入 NPM 安装中。

# java - 嵌套项目符号列表的文本到 HTML

> ID：14540887
> 
> 赞同：2
> 
> 时间：2013-01-26T19:47:39.540
> 
> 标签：java, html, text-to-html

我有这个： 示例输入：

```
* First item
* Second item
    * Subitem 1
        * sub-subitem!
    * Subitem 3
* Third item 
```

示例输出：

```
<ul>
    <li>First item</li>
    <li>Second item
        <ul>
            <li>Subitem 1
                <ul>
                    <li>sub-subitem!</li>
                </ul>
            </li>
            <li>Subitem 3</li>
        </ul>
    </li>
    <li>Third item</li>
</ul> 
```

我创建了一个 Java 类，它将每个字符串行发送到一个字符数组，并且我单独处理每个字符。我的问题是何时关闭标签有什么想法吗？

这是我的代码：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class TextToHtml {
    StringBuilder itemName = new StringBuilder();
    String sCurrentLine;
    int usingUlTAG=0;

public TextToHtml(){
        BufferedReader br = null; 
        try {
            boolean closeLItag=false;
            br = new BufferedReader(new FileReader("NestedText.txt"));
            System.out.println("<ul>");
            while ((sCurrentLine = br.readLine()) != null) {
                    char[] item = sCurrentLine.toCharArray();
                    for(int i=0; i<item.length;i++){
                            if(item[i]!='*' && item[i]!='\n' && item[i]!='\t'){
                                    itemName.append(item[i]); 
                continue;
            }   
            if(item[i]=='*'){   
                itemName.append("<li>");
                closeLItag=true;
            }
            else if(item[i]=='\t'){ 
                if(item[i+1]=='*'){ 
                    if(usingUlTAG<1)
                    itemName.append("\t<ul>\n\t\t");
                    itemName.append("\t\n\t\t");
                    usingUlTAG= 1;
                    continue;
                }
                if(item[i+1]=='\t'){    
                    itemName.append("\t\t<ul>\n\n\t\t");
                    usingUlTAG=2;
                    continue;
                }
            }
        }
        if(closeLItag){
            itemName.append("</li>\n");
        }

    }       
    System.out.println(itemName+"/ul>");
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (br != null)br.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
}

public static void main(String[] args) {
    new TextToHtml();   
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:50:43.887

您必须向前看下一行，看看它的列表级别是否与当前项目的不同。然后，您可以根据级别差异添加或关闭标签（如果有）。这是执行此操作的代码：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class TextToHtml
{
    StringBuilder itemName = new StringBuilder();
    String sCurrentLine;
    String sNextLine; // A "peek" at what's next to determine if </li> is needed

    public TextToHtml()
    {
        BufferedReader br = null;
        try
        {
            br = new BufferedReader(new FileReader("NestedText.txt"));
            System.out.println("<ul>");
            sNextLine = br.readLine();
            while ((sCurrentLine = sNextLine) != null)
            {
                sNextLine = br.readLine();

                char[] item = sCurrentLine.toCharArray();
                int itemLevel = 0;
                for (int i = 0; i < item.length; i++)
                {
                    if (item[i] != '*' && item[i] != '\n' && item[i] != '\t')
                    {
                        itemName.append(item[i]);
                    }
                    else if (item[i] == '*')
                    {
                        itemName.append("\t<li>");

                        // Trim leading space character
                        if (item[i + 1] == ' ')
                            i++;
                    }
                    else if (item[i] == '\t')
                    {
                        itemLevel++;
                        itemName.append("\t\t");
                    }
                }

                int nextItemLevel = 0;
                if (sNextLine != null)
                {
                    char[] nextItem = sNextLine.toCharArray();
                    for (int i = 0; i < nextItem.length; i++)
                    {
                        if (nextItem[i] == '\t')
                            nextItemLevel++;
                        else
                            break;
                    }
                }
                // Next is the same level; there are no subitems
                if (itemLevel == nextItemLevel)
                    itemName.append("</li>");
                // Next is a deeper level; there are subitems
                else if (itemLevel < nextItemLevel)
                {
                    // In case the next item is more than 1 level deeper
                    for (int i = itemLevel + 1; i <= nextItemLevel; i++)
                    {
                        itemName.append("\n");
                        for (int j = 0; j < i; j++)
                            itemName.append("\t\t");
                        itemName.append("<ul>");

                        // If the next item's level is reached, it will create its own     <li>
                        if (i != nextItemLevel)
                        {
                            itemName.append("\n");
                            for (int j = 0; j < i; j++)
                                itemName.append("\t\t");
                            itemName.append("\t<li>");
                        }
                    }
                }
                // Next is a higher level; there are tags to close
                else // (itemLevel > nextItemLevel)
                {
                    itemName.append("</li>");
                    for (int i = itemLevel - 1; i >= nextItemLevel; i--)
                    {
                        itemName.append("\n");
                        for (int j = 0; j <= i; j++)
                            itemName.append("\t\t");
                        itemName.append("</ul>\n");
                        for (int j = 0; j < i; j++)
                            itemName.append("\t\t");
                        itemName.append("\t</li>");
                    }
                }
                itemName.append("\n");
            }
            System.out.println(itemName + "</ul>");
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        finally
        {
            try
            {
                if (br != null)
                    br.close();
            }
            catch (IOException ex)
            {
                ex.printStackTrace();
            }
        }
    }

    public static void main(String[] args)
    {
        new TextToHtml();
    }
} 
```

请注意，这仅在级别使用制表符而不是空格缩进时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:06:26.877

如果，正如您当前的代码所建议的那样，原始文本中的列表项行都使用硬制表符进行缩进，那么您需要做的就是一次一行地处理文本，跟踪缩进级别（制表符的数量）的*上*一行。这段代码不会在生成的 HTML 中产生很好的缩进，但它得到了正确的嵌套`<ul>`和`<li>`嵌套，这是 HTML 浏览器真正关心的

```
import java.io.*;
import java.util.regex.*;

public class Main {
  public static void main(String[] args) throws Exception {
    StringBuilder result = new StringBuilder();
    BufferedReader br = new BufferedReader(new FileReader("NestedText.txt"));
    try {
      int lastIndent = -1; // indent level of last line
      int depth = 0; // number of levels of <ul> we are currently inside
      String line;
      Pattern indentPattern = Pattern.compile("((\\t*)\\* )?(.*)");
      while((line = br.readLine()) != null) {
        Matcher m = indentPattern.matcher(line);
        m.matches(); // guaranteed to be true, but needed to update matcher state

        if(m.group(1) != null) { // this is a new list item
          int thisIndent = m.end(2); // number of leading tabs, may be zero

          // there are three possible cases
          if(thisIndent == lastIndent) {
            // same level as last list item
            result.append("</li>");
          } else if(thisIndent > lastIndent) {
            // starting a child list
            result.append("<ul>");
            depth++;
          } else {
            // returning to parent list
            result.append("</li>");
            depth--;
            result.append("</ul>");
            result.append("</li>");
          }

          result.append("<li>");
          lastIndent = thisIndent;
        } else { // this is a continuation of the previous list item
          result.append(" ");
        }
        // append this line's text (not including the indent and *)
        result.append(m.group(3));
      }

      // run out of items, close any outstanding lists
      while(depth-- > 0) {
        result.append("</li>");
        result.append("</ul>");
      }

      System.out.println(result);
    } finally {
      br.close();
    }
  }
} 
```

在这里，我将任何不以制表符和星号开头的行视为前一个的延续`<li>`，即

```
* This is a very long list
item that continues over several
  lines
* This is a second item
    * this is a child item
  that also continues
   over several lines 
```

没关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T22:16:32.347

我已经按照 Jan Dvorak 的建议解决了这个问题。以下代码适用，如果它对其他人有帮助，我会放在下面。感谢您的所有贡献

```
MarkdownProcessor m = new MarkdownProcessor(); 
String html = null;
try {
html = m.markdown(MyString));
} catch (IOException e) {
e.printStackTrace();
} 
System.out.println(html); 
```

# c# - Magicknet 获取和设置图像分辨率 (PPI)

> ID：14540890
> 
> 赞同：0
> 
> 时间：2013-01-26T19:47:48.890
> 
> 标签：c#, asp.net, image-processing, imagemagick, magicknet

我在我的 ASP.NET 项目中使用 Magicknet 进行图像处理。如何获取和设置图像的图像分辨率？- 当我调整 300 像素/英寸的图像大小时，默认情况下它显然会生成 72 像素/英寸的图像，并且因为我保持相同的大小，所以我得到的图像质量非常低。所以我需要能够保持图像的ppi。

我还想补充一点，这可能会导致 magicknet 或 System.Drawing.Image，但我不能 100% 确定。

我正在使用的代码：

```
 img.ModulusDepth = 10;   
    img.Compression = CompressionType.JPEGCompression;
    img.Quality = 80;

    string optimizedImage = System.Web.HttpContext.Current.Server.MapPath(".") + "\\temp\\" + Guid.NewGuid().ToString() + ".jpg";
    img.Write(optimizedImage); // save optimized image as temp file

    Magick.Term();

    System.Drawing.Image tempimage = System.Drawing.Image.FromFile(optimizedImage);  // load the optimized image into an image objec 
```

从[我在这里阅读](http://www.imagemagick.org/script/command-line-options.php?#density)的内容来看，默认值为每英寸 72 像素。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-12T14:00:02.973

图像 DPI 在网络环境中是完全不相关的；这是所有浏览器和几乎所有打印机都忽略的元数据设置。

像素是您必须使用的单位；DPI 是每个库和 UI 以不同方式处理的泄漏抽象。

您也[可以考虑使用服务器安全的 Magicknet 替代方案](http://imageresizing.net)。

# php - PHP 变量在文件中丢失

> ID：14540891
> 
> 赞同：-2
> 
> 时间：2013-01-26T19:47:50.943
> 
> 标签：php, variables

我希望我只是在这里遗漏了一些明显的东西......我试图弄清楚为什么 PHP 变量似乎在同一个文件中“丢失”了。我的项目的代码可以在[这里](http://pastebin.com/3i4p8hKg)看到。

基本上，我将其简化为在第 27 行声明一个简单变量，并在第 120 行将其拉入 $data。$data 存储在创建的文件中，并且在任何情况下，$i 都是空的。

这很奇怪！

有人可以请，请帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:51:39.367

您似乎正在用 PHP 编写 PHP 文件。这不仅是一个坏主意，而且非常危险。
~~（自写代码是机器人天启的第一步！）~~

原因`$i`是 null 是因为您没有以任何方式传递变量。仅仅写入`$i`一个文件并不能神奇地`$i`保持它以前的值。

认真想想什么~~地狱~~你正在尝试做...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:50:33.517

那么，您不认为设置`$i`为`0`第 71 行是问题的一部分吗？`for`或者，也许在第 112 行的循环中再次使用它是您的问题？实际上，您到处都在使用它。我认为您需要将“特殊”变量重命名为更有意义的名称。

编程中没有什么是奇怪的。严重地。

~~并且不要将您的代码粘贴到 Pastebin 中，将其粘贴到 SO 上！~~

# html - 无法使用 css 显示文本覆盖

> ID：14540893
> 
> 赞同：1
> 
> 时间：2013-01-26T19:47:56.397
> 
> 标签：html, css

我想我很接近，但我不知道缺少什么。我正在使用与此小提琴相同的代码：http: [//jsfiddle.net/2tPGy/3/](http://jsfiddle.net/2tPGy/3/)

HTML：

```
 <ul class="projectGrid align">
        <li id="project-1">
             <a href="#">
                 <div class="img-overlay">
                     <h4>Title</h4>
                     <p>A description of the image</p>
                 </div>
             </a>
        </li>
      </ul> 
```

CSS：

```
 .projectGrid li {
 display: inline-block;
 margin: 0 20px 20px;
 box-shadow: 0px 0px 8px rgba(0,0,0,0.2);
 opacity:0.7;
 border-radius: 11px;
 -moz-border-radius: 11px;
 -webkit-border-radius: 11px;

 text-indent: -9000px;
-webkit-transition: box-shadow .25s  ease-in-out, opacity .25s ease-in-out;
-moz-transition: box-shadow .25s  ease-in-out, opacity .25s ease-in-out;
-o-transition: box-shadow .25s  ease-in-out, opacity .25s ease-in-out;
-ms-transition: box-shadow .25s  ease-in-out, opacity .25s ease-in-out;
 transition: box-shadow .25s  ease-in-out, opacity .25s ease-in-out;

 }  
   .projectGrid li a {
   display: block;
   width: 280px;
   height: 280px;
   background-color: grey;
   border: solid;
   border-radius: 11px;
  -moz-border-radius: 11px;
  -webkit-border-radius: 11px;
  } .projectGrid li:hover {
   box-shadow: 0px 0px 8px rgba(0,0,0,0.7);
   opacity:1.0;

  }
 #project-1 {
    height:286px;
    overflow:hidden;
    position:relative;
    width:286px;
 }
.img-overlay {
    background-color:#000;
    bottom:0;
    color:#fff;
    opacity:0;
    filter: alpha(opacity=0);
    position:absolute;
    width:100%;
    z-index:1000;
}
#project-1:hover .img-overlay {
    opacity:0.75;
    filter: alpha(opacity=75);
    transition:opacity 0.25s;
    -moz-transition:opacity 0.25s;
    -webkit-transition:opacity 0.25s;
}
#project-1 a {
    background: url('../images/1.png') no-repeat scroll;
    background-size: 280px 280px;
} 
```

该代码适用于小提琴，但不适用于我的网站。div 中的文本未显示在我的网站上。谁能指导我为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:55:30.563

不仅`<ul>`标签拼写错误，`<ui>`而且`<ul>`未关闭。jsFiddle 更新在这里：http: [//jsfiddle.net/KwyDt/3/](http://jsfiddle.net/KwyDt/3/)

```
<ul class="blah">
  <li id="project-1">
      <a href="#">
      <div class="img-overlay">
          <h4>Title</h4>
          <p>A description of the image</p>
      </div>
      </a>
  </li>
</ul> 
```

此外，`<a href="#"></a>`环绕 a`<div>`是完全错误的。打算更多地调试 CSS，但您可能需要澄清最终结果是什么。就目前而言，这真的很混乱且难以破译。我认为它现在可以工作，但我仍然不确定基于代码格式的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:58:45.017

查看[我的 jsFiddle 分支](http://jsfiddle.net/amullins/vRQP2/)。这是你要找的吗？基本上，不是对不透明度进行调整，而是`display:none`在常规`.img-overlay`css 上使用，然后更改为`display:block`on `:hover`。这在您的网站上有效吗？`ui`假设您的意思是`ul`.

另外，为什么这条线在这里？

```
text-indent:-9000px; 
```

[我对此发表了评论，并且在更新的 jsFiddle](http://jsfiddle.net/amullins/H4pKe/)中一切看起来都很棒。让我知道这是否可以解决您的问题。

# cordova - 使用带有 Ripple 的 PhoneGap 媒体 API

> ID：14540894
> 
> 赞同：1
> 
> 时间：2013-01-26T19:48:17.603
> 
> 标签：cordova, media

我是 PhoneGap/Cordova 的新手，我正在尝试使用一些 API。

我一直在使用 Ripple Emulator for Chrome 中的文档示例，但是在尝试使用[媒体示例](http://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html#media.play)时，我在控制台中收到以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'hasResource'
Uncaught TypeError: undefined is not a function
Uncaught TypeError: undefined is not a function 
```

我错过了什么吗，这可以在 Ripple Emulator 中使用吗？

我试过用很少的信息来搜索我正在寻找的东西。

抱歉，如果这是一个简单的问题，但我似乎无法找到任何信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:07:15.930

我不确定在发布 Cordova 2.0 版时是否已经发布。但是你应该在 1.0 中遵循这个 API 指南

[http://docs.phonegap.com/en/2.0.0/cordova_media_media.md.html#Media](http://docs.phonegap.com/en/2.0.0/cordova_media_media.md.html#Media)

# asp.net-mvc-4 - 未触发 MVC4 自定义 OnActionExecuting Global.asx 过滤器

> ID：14540899
> 
> 赞同：4
> 
> 时间：2013-01-26T19:48:23.850
> 
> 标签：asp.net-mvc-4

我正在尝试创建一个全局过滤器，如果用户登录，它将针对我拥有的每个操作运行。从我所阅读的内容来看，有两个步骤是必要的。首先，在 Global.asx 文件中添加新过滤器。

```
public class MvcApplication : System.Web.HttpApplication
{
    //I added this
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new NotificationFilter());
    }
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();
    }
} 
```

然后我必须在过滤器文件夹中创建过滤器本身。

```
public class NotificationFilter : ActionFilterAttribute 
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    { //Breakpoint here is never triggered
        //This code doesn't work, but it's what I want to do
        if (WebSecurity.CurrentUserId > 0)
        {
            var notificationCount = db.Notifications.GroupBy(i => i.UserID).Count();
            if (notificationCount > 99)
            {
                ViewBag.Notifications = "99+";
            }
            else
            {
                ViewBag.Notifications = notificationCount;
            }
        }
        base.OnActionExecuting(filterContext);
    }
} 
```

我怎样才能使这项工作？有没有更好的办法？我可以将它添加到所有控制器中并且它可以工作，但这并不理想。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T20:01:17.743

我也有同样的经历。您可以构建一个 BaseController 类并将过滤器定义放入其中。那么你所有的控制器都必须继承自 BaseController 类。因此，您不必在所有控制器中都使用过滤器类。

像这样的东西：

```
 public class BaseController : Controller
    {

        protected override void OnActionExecuting(ActionExecutingContext filterContext)
        {
         ...
         }
    } 
```

在控制器中：

```
public class SampleController : BaseController
{
 ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T12:08:57.567

您可以使用此代码解决您的问题：

```
public class ParentController : Controller
{

   protected override void OnActionExecuting(ActionExecutingContext filterContext)
   {
       /* take current action*/
       action = (string)filterContext.RouteData.Values["action"];

       /* check if your action have your filter */
       if (!string.IsNullOrEmpty(action) && Methods.
                    Where(
                           method => method.Name == action
                           &&        method.GetCustomAttributes(typeof(/* your filter name */), true).Length > 0
                    ).Count() > 0)
          {
            // do your work    
          }

   }
} 
```

和

```
public class YourController : ParentController 
{

  // implementation of your controller
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T23:37:31.490

Jed，据我了解，您希望您的所有页面都以相同的方式运行并为经过身份验证的用户呈现通知。

我建议，在您的 _layout 中，放置一个左上角的 Div 和 jquery Ajax 调用（您可以稍后将 jquery 推送到 alert.js 文件中）。

```
 <div id='divNotifications'></div>

    <script type="text/javascript">
       $(document).ready(function() {
       $('#divNotifications').load('Notifications/UserNotifications');
       }
    </script> 
```

在您的通知控制器中有 UserNotifications 方法返回：

```
public JsonResult AjaxUserNotifications()
{

    Notifications Notifications = new GetNotifications();

    return Json(Notifications, JsonRequestBehavior.AllowGet);
} 
```

首先，我建议您将此渲染一次作为功能证明，然后我建议您将其设为重复调用。

[如何在不不断通知用户的情况下使用 setInterval 不断检查新消息？](https://stackoverflow.com/questions/10600327/how-to-constantly-check-for-new-message-with-setinterval-without-constantly-noti)

这个堆栈线程介绍了如何使 Ajax 调用按时间间隔重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-21T13:05:52.490

一种可能的方法是使用 little view 和 SignalR 进行推送通知。

# objective-c - 确定 NSString 是否具有所有唯一字符

> ID：14540901
> 
> 赞同：-2
> 
> 时间：2013-01-26T19:48:32.247
> 
> 标签：objective-c, nsstring, unique

（例如，“assdf”和“aash”将被视为错误）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T20:15:02.870

我认为您倒退了问题，但是要测试 NSString 中的每个字符是否都是唯一的，我认为以下应该可行。可能有一些有趣的 unicode 边缘情况不起作用，其中相同的字形显示为不同的代码点。

```
@interface NSString(_uniqueChars)
-(BOOL) isEveryCharacterUnique;
@end

@implementation NSString(_uniqueChars)
-(BOOL) isEveryCharacterUnique
{
    NSMutableSet *set = [NSMutableSet setWithCapacity:self.length];
    for ( NSUInteger i = 0; i < self.length; ++i )
    {
        unichar c = [self characterAtIndex:i];
        [set addObject:[NSNumber numberWithUnsignedShort:c]];
    }

    return (set.count == self.length);
}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:39:19.693

我也在尝试 NSCharacterSet 但没有结果。这可能是另一种解决方案，但 +1 是更好的解决方案。

```
 - (BOOL) isUnique: (NSString *) aString{

        int len = (int)aString.length;
        for(int i=0;i<len;i++)
        {
            NSString *tmp = [aString substringWithRange:NSMakeRange(i, 1)];
            for(int j=i+1;j<len;j++)
            {
                if([[aString substringWithRange:NSMakeRange(j, 1)]isEqualToString: tmp])
                {
                    return NO;
                }
            }
        }
        return YES;
   } 
```

# android - 导入 android.R 不修复错误

> ID：14540904
> 
> 赞同：2
> 
> 时间：2013-01-26T19:49:13.253
> 
> 标签：android, eclipse, ubuntu

我已经在我的 ubuntu eclipse 和 android sdk 和 adt 上安装了。

现在，如果我在创建后立即创建一个新的 android 项目，我会在 Mainactivity.java: 中看到错误`R cannot be resolved`。我添加了`import android.R`，现在它说它`activity_main cannot be resolved or is not a field`说我可以将其更改为，`activity_list_item`但随后它列出了其他错误。如果我导入已经在另一台计算机中完成的示例项目或项目，也会出现此问题。

我知道这个问题已经被问了很多次，但它无法像那里写的那样解决它。

谢谢你，

Boaz 代码：MainActivity.java：

```
package com.example.test;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

 } 
```

构建配置.java：

```
/** Automatically generated file. DO NOT MODIFY */
package com.example.test;

public final class BuildConfig {
public final static boolean DEBUG = true; 
```

} activity_Main.xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
    android:id="@+id/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="never"
    android:title="@string/menu_settings"/>

 </menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:52:02.217

这听起来像是生成的文件的问题。如果您使用的是 Eclipse，请尝试创建一个干净的项目并确保您的 gen 文件夹位于项目构建路径中。如果不使用 Eclipse，请确保您的 gen 文件夹位于它尝试构建的文件列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:54:14.127

这可能是 XML 文件的错误导致构建无法成功完成，因此您的 R 文件没有生成。单击错误日志或“问题”选项卡并确保其中没有任何与 xml 相关的错误。

无论哪种方式，导入 com.example.test.R; 绝对是必需的导入，而不是 android.R

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T18:45:09.380

好的，我修好了，我刚刚在终端写了 `sudo apt-get install ia32-libs` ：[https ://askubuntu.com/questions/204694/how-to-install-ia32-lib-on-64-bit-system](https://askubuntu.com/questions/204694/how-to-install-ia32-lib-on-64-bit-system)

# android - Android：尝试从 SQLite 数据库条目创建 JSON 文件

> ID：14540908
> 
> 赞同：0
> 
> 时间：2013-01-26T19:49:48.873
> 
> 标签：android, json, sqlite

所以我试图从我的数据库中提取数据并创建一个看起来像这样的 JSON 文件。我知道我可以使用 my_json_object.put(); 但这似乎只适用于字符串，字符串。我和我想用 2 个条目创建值，而第二个条目实际上是一个包含许多值的数组。我怎样才能做到这一点？多谢你们。

```
{"value": {
"name": "History",
"values": [ 
{"front": "History Market", "back": " It is the world of the world that the world    could not say that", "color": "Yellow"},
{"front": "History Market", "back": " It is the world of the world that the world could not say that", "color": "Red"},
{"front": "History Market", "back": " It is the world of the world that the world could not say that", "color": "Purple"},
{"front": "History Market", "back": " It is the world of the world that the world could not say that", "color": "Blue"},
{"front": "History Market", "back": " It is the world of the world that the world could not say that", "color": "Blue"}
]}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T20:03:52.963

将您当前的 jsonObject 创建为：

```
//Create main json object
JSONObject json = new JSONObject();

//Create value json object
JSONObject valueJson = new JSONObject();

//Create values JSONArray
JSONArray valuesarray = new JSONArray();

for(int i=0;i<=4;i++){
 // Create values jsonObject
JSONObject valuesJson = new JSONObject();
valuesJson.put("front","front_value");
valuesJson.put("back","back_value");
valuesJson.put("color","color_value");
 // put values jsonObject to valuesarray JSONArray
valuesarray.put(valuesJson);    

}
 // put name key-value to value jsonObject
valueJson.put("name","History");
 // put values JSONArray to value jsonObject
valueJson.put("values",valuesarray);

 // put value jsonObject to final json Object
json.put("value",valueJson); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T20:08:27.890

使用 google [gson](http://code.google.com/p/google-gson/)，它非常简单，可以完美地处理数组和列表

```
public class CollectionToJson {
public static void main(String[] args) {
    //
    // Converts a collection of string object into JSON string.
    //
    List<String> names = new ArrayList<String>();
    names.add("Alice");
    names.add("Bob");
    names.add("Carol");
    names.add("Mallory");

    Gson gson = new Gson();
    String jsonNames = gson.toJson(names);
    System.out.println("jsonNames = " + jsonNames);

    //
    // Converts a collection Student object into JSON string
    //
    Student a = new Student("Alice", "Apple St",
            CollectionToJson.getDOB(2000, 10, 1));
    Student b = new Student("Bob", "Banana St", null);
    Student c = new Student("Carol", "Grape St",
            CollectionToJson.getDOB(2000, 5, 21));
    Student d = new Student("Mallory", "Mango St", null);

    List<Student> students = new ArrayList<Student>();
    students.add(a);
    students.add(b);
    students.add(c);
    students.add(d);

    gson = new Gson();
    String jsonStudents = gson.toJson(students);
    System.out.println("jsonStudents = " + jsonStudents);

    //
    // Converts JSON string into a collection of Student object.
    //
    Type type = new TypeToken<List<Student>>(){}.getType();
    List<Student> studentList = gson.fromJson(jsonStudents, type);

    for (Student student : studentList) {
        System.out.println("student.getName() = " + student.getName());
    }
}

private static Date getDOB(int year, int month, int date) {
    Calendar calendar = Calendar.getInstance();
    calendar.set(Calendar.YEAR, year);
    calendar.set(Calendar.MONTH, month - 1);
    calendar.set(Calendar.DATE, date);
    calendar.set(Calendar.HOUR, 0);
    calendar.set(Calendar.MINUTE, 0);
    calendar.set(Calendar.SECOND, 0);
    return calendar.getTime();
} 
```

}

**输出**

```
 jsonNames = ["Alice","Bob","Carol","Mallory"]
jsonStudents = [{"name":"Alice","address":"Apple St","dateOfBirth":"Nov 1, 3900 12:00:00 AM"},{"name":"Bob","address":"Banana St"},{"name":"Carol","address":"Grape St","dateOfBirth":"Jun 21, 3900 12:00:00 AM"},{"name":"Mallory","address":"Mango St"}]
student.getName() = Alice
student.getName() = Bob
student.getName() = Carol
student.getName() = Mallory 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T20:05:52.120

JSONObject 可以将 JSONArray 嵌套在其中，反之亦然。

在您的示例中，您必须创建：

*   项目清单
*   JSON对象
*   在其中有一个名为“value”的 JSONObject
*   在其中有一个名为“name”的字符串条目，其值为“History”。
*   和一个 JSONArray 条目。
*   项目清单
*   在那个 JSONArray 里面有一组 JSONObjects。

# qemu - 写入 QEMU 客户系统寄存器和内存？

> ID：14540910
> 
> 赞同：3
> 
> 时间：2013-01-26T19:49:53.003
> 
> 标签：qemu, kvm

您如何写入在 QEMU 中运行的虚拟系统的处理器寄存器和特定内存地址？

我的愿望是通过在 QEMU 之外运行的用户空间程序来实现这一点。这将引发中断并精细控制处理器和虚拟硬件的执行。

[QEMU Monitor](http://en.wikibooks.org/wiki/QEMU/Monitor)应该读取参数或进行简单的鼠标或键盘事件注入，但我还没有看到任何关于写入的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:43:19.210

QEMU Monitor 中的 GDB 服务器似乎最适合您的目的。您的选项之一是实现`gdb` [协议](http://www.embecosm.com/appnotes/ean4/embecosm-howto-rsp-server-ean4-issue-2.html)，另一个选项是`gdb`通过其命令行自行驱动。

我已经测试了一下：附加，读取和写入内存似乎工作（我读我写的）；跳转到另一个地址似乎也可以。（如果你可以`call`注入代码，理论上你可以做任何事情）。写入文本模式视频内存*不起作用*（我什至不阅读我写的内容，并且显示没有任何变化）。

# objective-c - 解决 LLDB 打印问题，例如 CLLocationCoordinate2D 和在调试器中识别宏

> ID：14540913
> 
> 赞同：2
> 
> 时间：2013-01-26T19:50:03.333
> 
> 标签：objective-c, debugging, lldb

LLDB 在打印 double 类型的结构字段时存在各种问题，如下所述： [奇怪的行为-in-lldb-when-printing-a-double-type-struct-member](https://stackoverflow.com/questions/9900929/strange-behavior-in-lldb-when-printing-a-double-type-struct-member)。

在我自己的情况下，我尝试打印 CLLocationCoordinate2D 类型的结构。从 Xcode 4.5.2 开始，打印 CLLocationCoordinate2D 的错误仍然存​​在。

寻找解决此错误的方法，我在此博客中遇到了一个不错的宏 LOG_EXPR：http: [//vgable.com/blog/2010/08/19/the-most-useful-objective-c-code-ive-ever -书面/](http://vgable.com/blog/2010/08/19/the-most-useful-objective-c-code-ive-ever-written/)

它在将类型记录到调试器方面做得很好，但不能从调试器中调用。

有没有人想出一种方法来在 LLDB 命令行界面中调试时执行 LOG_EXPR 之类的操作，或者任何其他改进的打印可以从命令行处理任意结构，而不是切换回 GDB？

这是我输入 LLDB 时发生的情况：

```
(lldb) p (CLLocationCoordinate2D)[self mapSetPointLatLon]
(CLLocationCoordinate2D) $4 = {
  (CLLocationDegrees) latitude = 42.4604
  (CLLocationDegrees) longitude = 42.4604
  (double) easting = 42.4604
  (double) northing = -71.5179
} 
```

注意 lldb 添加的多余和错误的行。

当我将 LOG_EXPR 编译到我的代码中时，会发生以下情况（在同一断点处）：

```
Line of Code (not debugger):

 LOG_EXPR(self.mapSetPointLatLon);

produces the correct output in the debugger output:
  2013-01-26 14:02:17.555 S6E11[79116:c07] self.mapSetPointLatLon = {latitude=42.4604,longitude=-71.5179} 
```

如果我尝试从命令行调用 LOG_EXPR 在同一断点处，会发生以下情况：

```
(lldb) expr LOG_EXPR(self.mapSetPointLatLon);
error: use of undeclared identifier 'LOG_EXPR'
error: 1 errors parsing expression
(lldb) 
```

这是另一个示例，因为事实证明，您可以让调试器做正确的事情。

这是我的代码片段，我在其中分配了 2 种方式的结构：

```
CLLocationCoordinate2D defloc = CLLocationCoordinate2DMake(kStartingLat, kStartingLon);
[[self.verticalPagingViewController mapPagingViewController] setMapSetPointLatLon: defloc]; 
```

如果我只是打印它的工作变量。

```
(lldb) p defloc
(CLLocationCoordinate2D) $1 = {
  (CLLocationDegrees) latitude = 42.4604
  (CLLocationDegrees) longitude = -71.5179
} 
```

如果我正在转换访问器方法的返回值的类型，它会失败。

```
(lldb) p (CLLocationCoordinate2D)[[self.verticalPagingViewController mapPagingViewController] mapSetPointLatLon]
(CLLocationCoordinate2D) $2 = {
  (CLLocationDegrees) latitude = 0
  (CLLocationDegrees) longitude = 0
  (double) easting = 0
  (double) northing = 0
} 
```

# sql - 如何从单行创建多行（sql server 2008）

> ID：14540917
> 
> 赞同：0
> 
> 时间：2013-01-26T19:50:10.417
> 
> 标签：sql, sql-server-2008

在我们的组织中，我们有一个中央采购公司 (CPC)，然后通过内部公司采购订单向我们的零售公司 (Company_X) 销售产品，然后再向客户销售产品。我需要做的是将我们的零售销售链接回原始采购订单。

例如，我有一个表，其中包含以下内容（以及许多其他列）：

`Company_X_Sales`：

```
InterCO_PO_no  Sales_Order_No  Part_No  Qty
-------------  --------------  -------  ---
12345          98765           ABCD     10 
```

然后我有一个表，其中包含以下内容：

`CPC_Sales`：

```
PO_Number  InterCO_SO_No  Part_No  Qty
---------  -------------  -------  ---
00015      12345          ABCD     5  
00012      12345          ABCD     2  
00009      12345          ABCD     4   
00007      12345          ABCD     3 
```

因此，您可以看到 10 件商品的最终销售是由来自中央公司中超过 1 个外部 PO 的零件组成的。

我需要能够做的是复制中的行`Company_X_Sales`，包括原始采购订单号并设置数量为`CPC_Sales`。

我需要得到这样的结果：

`Company_X_Sales_EXTD`：

```
PO_Number  InterCO_PO_no  Sales_Order_No  Part_No  Qty
---------  -------------  --------------  -------  ---
00007      12345          98765           ABCD     3
00009      12345          98765           ABCD     4
00012      12345          98765           ABCD     2
00015      12345          98765           ABCD     1 
```

我必须使用`Company_X_Sales`作为我的驱动表 - 这`CPC_Sales`只是作为一个查找来导出原始采购订单号。

希望你能帮助我在整个周末工作，因为它是一项具有非常激进的时间表的工作的一部分。

我不介意该解决方案是否需要不止一次通过表或在需要时创建视图。我真的很挣扎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:54:40.177

我对你的问题有点困惑，但听起来你正试图让你的 Company_X_Sales 表有 3 行而不是 1 行，只是数量不同？如果是这样，这样的事情应该可以工作：

```
SELECT S.PO_Number, C.InterCO_PO_no, C.Sales_Order_No, C.Part_No, S.Qty
FROM Company_X_Sales C
   JOIN CPC_Sales S ON C.InterCO_PO_no = S.InterCO_SO_No 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!3/0abfe/1)。

这将为您提供正确数量的 4 行。然后您可以相应地删除并重新插入。

要将这些行放入表中，您有几个选项，但这样的事情应该有效：

```
--Flag the rows for deletion
UPDATE Company_X_Sales SET Qty = -1 -- Or some arbitrary value that does not exist in the table

--Insert new correct rows
INSERT INTO Company_X_Sales 
SELECT C.InterCO_PO_no, C.Sales_Order_No, C.Part_No, S.Qty
FROM Company_X_Sales C
   JOIN CPC_Sales S ON C.InterCO_PO_no = S.InterCO_SO_No

--Cleanup flagged rows for deletion
DELETE FROM Company_X_Sales  WHERE Qty = -1 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T20:13:46.537

```
select [PO_Number],[InterCO_SO_No], Company_X_Sales.Sales_Order_No, [Part_No],[Qty] from CPC_Sales inner join Company_X_Sales on Company_X_Sales.InterCO_PO_no = CPC_Sales.InterCO_SO_no 
```

两个表上的简单内部连接将为您提供所需的结果恕我直言。

# forms - Spring 3 + Tiles 2 表单错误

> ID：14540918
> 
> 赞同：1
> 
> 时间：2013-01-26T19:50:11.037
> 
> 标签：forms, spring, exception, casting, tiles

当我在 Spring 3 + Tiles 2 中单击表单上的提交时出现此错误...我不知道，但其他不是表单的页面工作正常...代码是：

错误 500--内部服务器错误 java.lang.ClassCastException: org.springframework.web.bind.ServletRequestDataBinder 无法在 org.springframework.web.bind.annotation.support 中转换为 org.springframework.web.bind.support.WebRequestDataBinder。 HandlerMethodInvoker.doBind(HandlerMethodInvoker.java:754) at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doBind(HandlerMethodInvoker.java:744) at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments( HandlerMethodInvoker.java:296) 在 org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:163) 在 org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java: 354）在 org.springframework.web.servlet.mvc.annotation。AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:342) at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:763) at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:709) at org .springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:613) at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:536) at javax.servlet.http.HttpServlet.service(HttpServlet.java :727) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:820) 在 weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227) 在 weblogic.servlet.internal.StubSecurityHelper.invokeServlet( StubSecurityHelper.java:125) 在 weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300) 在 weblogic。servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183) 在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3717) 在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java: 3681) 在 weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) 在 weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext .java:2277) 在 weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454) 在 weblogic.work.ExecuteThread.execute(ExecuteThread. java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176)ServletStubImpl.execute(ServletStubImpl.java:183) 在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3717) 在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681) 在 weblogic .security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277) 在 weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) ) 在 weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:207)在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176)ServletStubImpl.execute(ServletStubImpl.java:183) 在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3717) 在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681) 在 weblogic .security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277) 在 weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) ) 在 weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:207)在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176)在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681) 在 weblogic.security .acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277) 在 weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) 在weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) 在 weblogic .work.ExecuteThread.run(ExecuteThread.java:176)在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681) 在 weblogic.security .acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277) 在 weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) 在weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) 在 weblogic .work.ExecuteThread.run(ExecuteThread.java:176)internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3717) 在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681) 在 weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java: 321) 在 weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277) 在 weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java :2183) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176)internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3717) 在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681) 在 weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java: 321) 在 weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277) 在 weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java :2183) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176)3717) 在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681) 在 weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) 在 weblogic.security.service.SecurityManager.runAs (SecurityManager.java:120) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277) 在 weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183) 在 weblogic.servlet.internal.ServletRequestImpl。在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176) 运行(ServletRequestImpl.java:1454)3717) 在 weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681) 在 weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) 在 weblogic.security.service.SecurityManager.runAs (SecurityManager.java:120) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277) 在 weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183) 在 weblogic.servlet.internal.ServletRequestImpl。在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176) 运行(ServletRequestImpl.java:1454)java:321) 在 weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277) 在 weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext .java:2183) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java: 176)java:321) 在 weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) 在 weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277) 在 weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext .java:2183) 在 weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java: 176)ExecuteThread.execute(ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176)ExecuteThread.execute(ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176)

* * *

```
package com.ultimatix.framework.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.SessionAttributes;
import org.springframework.web.servlet.ModelAndView;

import com.ultimatix.framework.vo.Contact;

@Controller
@SessionAttributes
public class ContactController
{
    @RequestMapping(value = "/addContact", method = RequestMethod.POST)
    public ModelAndView addContact(@ModelAttribute("command")Contact _objContact)
    {
        System.out.println(_objContact.toString());
        return new ModelAndView("welcome");
    }

    @RequestMapping("/contact")
    public ModelAndView showContacts()
    {   
        return new ModelAndView("contact", "command", new Contact());
    }
} 
```

* * *

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Spring 3.0 + Tiles 2.0 - Contact Manager</title>
</head>
<body>
<h2 align="center">Contact Manager</h2>
<form:form method="post" commandName="command" action="addContact.do">
    <table border="0" cellpadding="2" cellspacing="2" align="center"
        width="50%">
        <tr>
            <td width="30%">First Name</td>
            <td width="70%"><form:input path="strFirstName" /></td>
        </tr>
        <tr>
            <td width="30%">Last Name</td>
            <td width="70%"><form:input path="strLastName" /></td>
        </tr>
        <tr>
            <td width="30%">Email</td>
            <td width="70%"><form:input path="strEmailId" /></td>
        </tr>
        <tr>
            <td width="30%">Contact No.</td>
            <td width="70%"><form:input path="strContactNo" /></td>
        </tr>
        <tr>
            <td width="30%" align="center"><input type="submit" value="Add Contact" /></td>
            <td width="70%"><input type="reset" value="Clear Details" /></td>
        </tr>
    </table>
</form:form>
</body>
</html> 
```

# windows - 无法在 Go 中编译测试程序

> ID：14540922
> 
> 赞同：1
> 
> 时间：2013-01-26T19:50:43.723
> 
> 标签：windows, compilation, go

编译器：[http ://code.google.com/p/go/downloads/detail?name=go1.0.3.windows-386.zip&can=2&q=](http://code.google.com/p/go/downloads/detail?name=go1.0.3.windows-386.zip&can=2&q=)

我已将其解压缩到`d:\`，然后创建了另一个目录`d:\testgo`，其中放置了两个文件：

编码：

```
package main
import "fmt"

func main() {
  fmt.Println("Hello world!")
} 
```

以及运行编译的 CMD 文件：

```
SET PATH=%PATH%;D:\go\bin
go build test.go
@pause>nul 
```

我没有exe，但这个：

```
test.go:3:8: import "fmt": cannot find package
package runtime: import "runtime": cannot find package 
```

那么出了什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:53:54.860

文件说明如下：

> 如果您选择了 c:\Go 以外的目录，则必须将 GOROOT 环境变量设置为您选择的路径。

`SET GOROOT=d:\Go`应该这样做。

# ruby-on-rails - Rails - 我如何做这个查询？获取每条记录之一

> ID：14540926
> 
> 赞同：1
> 
> 时间：2013-01-26T19:50:54.970
> 
> 标签：ruby-on-rails, postgresql, rails-activerecord

我有一个`BlogPost`带有`:category`属性的模型。我正在制作一个新`BlogPost`表单，我希望选择菜单能够使用用户在以前的记录中输入的每个类别来填充自己。

因此，我需要一个查询来查找所有`BlogPosts`带有 a 的内容`User ID`，然后将他们输入的每个类别的列表进行四舍五入。同一类别将存在于多个记录中，但我当然只想为选择菜单返回它的副本。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T20:10:16.390

您可以`SELECT DISTINCT`将类别返回`INNER JOIN`给正确的用户：

```
Category
  .joins( :posts )
  .where( posts: { user_id: current_user.id } )
  .uniq 
```

这应该发送这样的查询：

```
SELECT DISTINCT categories.*
FROM categories
  INNER JOIN posts ON posts.category_id = categories.id
WHERE posts.user_id = [whatever] 
```

*编辑注意：*要小心，`uniq`这既是 a 上的方法，`Relation`又是`Array`. 确保在将其转换为数组之前在关系上调用它，否则您将对一组不明确的结果执行 uniq，这也有效，但在性能方面是荒谬的。

# c# - 如何解决 FileLoadException：linqPad 中的混合模式程序集

> ID：14540928
> 
> 赞同：-2
> 
> 时间：2013-01-26T19:50:57.930
> 
> 标签：c#, exception, linqpad

我是 linqpad 的新用户，当我尝试将它用于 explorer MS UCMA sdk

```
ProvisionedApplicationPlatformSettings paps = new ProvisionedApplicationPlatformSettings("string","string");
CollaborationPlatform platform = new CollaborationPlatform(paps);
platform.Dump(); 
```

给我一个例外

```
FileLoadException: Mixed mode assembly is built against version 'v2.0.50727' of the runtime and cannot be loaded in the 4.0 runtime without additional configuration information 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:02:18.780

我获得了 beta LinqPad .NET 4.0，它毫无例外地工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T04:40:47.750

如果您使用的是 LINQPad 的独立可执行版本，请确保提供的配置文件存在 (LINQPad.exe.config)。

# perl - 通过 HTTP 将视频从 Perl 发送到客户端

> ID：14540936
> 
> 赞同：0
> 
> 时间：2013-01-26T19:51:40.187
> 
> 标签：perl, video-streaming, html5-video, audio-streaming

我目前正在制作一个 perl 脚本，它将文件转换为 webm/ogg/mp4 格式，然后将其发送回用户，但嵌入视频。除了我无法发送 EOF 之外，这一切都有效，因此 HTML5 视频播放器知道结尾是什么，因此他可以正确使用文件（比如转到特定时间，甚至知道文件何时结束（现在它只是停止但你不能再对视频做任何事情了。

开始代码：

```
elsif ($path =~ /^\/((\w|\d){11})\.webm$/ig) {
    print "HTTP/1.0 200 OK\r\n";
    $handler = \&resp_youtubemovie;
    $handler->($cgi,$1); 
```

发送webm文件的功能

```
sub resp_youtubemovie {
    my $cgi = shift;
    my $youtubeID = shift;
    return if !ref $cgi;
    open(movie,"<$youtubeID.webm");
    local($/);
    $movie = <movie>;
    close(movie);
    print "Content-type: movie/webm\n";
    print $movie;
} 
```

我已经尝试过使用 while 循环和缓冲区，但这也不起作用，我还尝试将 HTTP 状态代码更改为 206 Partial Content，因为我对其他一些视频流网站使用了它，但它没有事情。那么有人知道如何打开电影文件并正确流式传输吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T20:50:03.277

无需手动执行此操作，[Dancer](https://metacpan.org/module/Dancer)之类的框架可以解决此问题。这将为您省去很多很多很多的麻烦。它还允许您利用[Plack/PSGI 强力](https://metacpan.org/module/PSGI%3a%3aFAQ#So-what-is-this-)胶，它可以为您确定如何与 Web 服务器通信。

```
use Dancer;

get qr{/(\w{11}\.webm)$}i => sub {
    my($video_file) = splat;

    return send_file(
        $video_file,
        streaming => 1,
    );
} 
```

使用[Dancer 路由](https://metacpan.org/module/Dancer%3a%3aIntroduction#ROUTE-HANDLERS)，您应该能够很容易地调整现有代码，特别是如果它与各种路径匹配的 if/elsif 很大。Dancer 在让简单的事情变得简单方面做得非常好，如果您需要，它还可以让您对确切的 HTTP 响应进行大量控制。

一些笔记...

*   [webm](https://en.wikipedia.org/wiki/WebM)的内容类型`video/webm`可能是您问题的根源。舞者应该做对了。如果不是，您可以明确告诉[send_file](https://metacpan.org/module/Dancer#send_file)内容类型。

*   `(\w|\d){11}`写得更好，`\w{11}`因为`\w`包括`\d`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T22:27:16.413

您必须使用 206 Partial Content HTTP 状态并且还必须发送：

*   标`Accept-Range: bytes`头。
*   一个`Content-Range: 0-2048/123456`标头，您在其中发送内容的开始和结束字节索引，后跟内容的总字节长度。客户端将在请求标头中向您发送它想要的字节范围。客户端可能会在单个请求中发送多个字节范围，在这种情况下，您还需要发送具有多部分字边界的内容。

Finally, to get back to your question, if the client requests a byte range that isn't satisfiable then you send a 416 HTTP status and close the connection.

# java - 3 个最大数字的数组

> ID：14540941
> 
> 赞同：0
> 
> 时间：2013-01-26T19:52:21.003
> 
> 标签：java

我正在研究一种方法，试图创建一个包含 3 个最大数字的数组。但是我的代码中有一个错误，我无法理解我做错了什么。谢谢！

公共类方法3 {

```
public static void main(String[] args) {
    int[] a={2,5,6,7,9,1,2,3,5,9,7};

    System.out.print(largestSum(a));

}

public static int[] largestSum(int[] a){

    int temp, first, second, third;
    first=second=third=a[0];

    for(int element: a){

        if(first < element)
            {
                temp=first;
                first=element;
                second=temp;
            }

        if(second<element && first> element)
            {

                temp=element;
                second=element;
                third=temp;
            }

        if(third< element && second> element)
            {
            temp=element;
            third=element;

            }

    }

    int [] array=new int[3];
    array[0]=first;
    array[1]=second;
    array[3]=third;

    return array;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:57:33.257

您错过了一些情况：并且您无法 initalize `first`，`second`并且`third`全部使用，`a[0]`因为该值仅有效一次。

```
first=second=third=Integer.MIN_VALUE;

for(int element: a){
    if(first <= element){
            third=second;
            second=first;
            first=element;
            continue;
    }
    if(second <= element ){
            third=second;
            second=element;
            continue;
    }
    if(third < element){
            third=element;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:58:47.263

您所拥有的存在一些问题。您将所有值设置为`a[0]`这意味着如果`a[0]`是最大的，它将永远不会被更新。当您更新第一个最大值时，您会丢失第二个值而不是第三个值。并且您正在设置 array[3] 这对于 3 元素数组无效。

尝试。

```
 public static int[] largestSum(int[] a)
  {
    int largest[3] = {Integer.MIN_VALUE, Integer.MIN_VALUE, Integer.MIN_VALUE};

    for(int i = 0; i < a.length; i++)
    {
       if(a[i] > largest[0])
       {
          largest[2] = largest[1];
          largest[1] = largest[0];
          largest[0] = a[i];
       }
       else if(a[i] > largest[1])
       {
          largest[2] = largest[1];
          largest[1] = a[i];
       }
       else if(a[i] > largest[2])
       {
         largest[2] = a[i];
       }
    }

    return largest;
 } 
```

# alloy - Alloy Analyzer 4.2 (mac) 与合金 api

> ID：14540945
> 
> 赞同：2
> 
> 时间：2013-01-26T19:52:47.233
> 
> 标签：alloy

我目前正在制作一个程序，该程序在 java 中处理一些注释，然后构建一个合金模型，使用合金 api 对其进行解析，然后运行一些合金命令。当我在合金应用程序中测试生成的合金模型时，它工作正常并给了我预期的结果。但是，当我通过 API 运行生成的合金模型时，它告诉我：“您必须为 sig this/ObjectName 指定范围”。我从这样的字符串中读取合金代码。

```
world = CompUtil.parseOneModule(String model); 
```

我使用的唯一选项是 SAT4J 求解器和 1 的 skolemdepth。

然后我遍历来自世界的命令，将它们转换为 kodkod，然后执行它们。

```
for(Command command: world.getAllCommands()) {
    A4Solution ans = null;
        try {
            ans = TranslateAlloyToKodkod.execute_command(rep, world.getAllReachableSigs(), command, options);
        } catch (Err ex) {
            Logger.getLogger(AlloyTest.class.getName()).log(Level.SEVERE, null, ex);
        }
} 
```

我更新的合金代码如下所示：

```
module mvc
// General model
abstract sig Configuration { elements: set Element }
abstract sig Element { references: set Element }

// MVC Style
abstract sig Model extends Element { }
abstract sig View extends Element { }
abstract sig Controller extends Element { }

pred mvc_model_style [c: Configuration] {
all m: c.elements & Model | all r: m.references | r not in View
}
pred mvc_view_style [c: Configuration] {
all view: c.elements & View | all ref: view.references | ref not in Model
}

pred mvc_controller_style [c: Configuration] {
    all controller: c.elements & Controller | all ref: controller.references | ref in Model or ref in View or ref in Controller
}

pred mvc_style [c: Configuration]{
 mvc_model_style[c] mvc_view_style[c]
}
one sig testMvc extends Configuration { } {
elements = TestController + ViewTest + TestModel + TestController3
}
one sig TestController extends Controller { } {
references = TestController + TestModel
}
one sig ViewTest extends View { } {
references = TestController
}
one sig TestModel extends Model { } {
references = ViewTest + TestController3
}
one sig TestController3 extends Controller { } {
references = TestController + TestModel
}
assert testcontroller {
mvc_controller_style[testMvc]
}
assert viewtest {
mvc_view_style[testMvc]
}
assert testmodel {
mvc_model_style[testMvc]
}
assert testcontroller3 {
mvc_controller_style[testMvc]
}
check testcontroller for 8 but 1 Configuration
check viewtest for 8 but 1 Configuration
check testmodel for 8 but 1 Configuration
check testcontroller3 for 8 but 1 Configuration 
```

那么有没有人知道我该如何解决这个问题，因为我认为 for 1 Configuration, 8 Elements 将为所有扩展信号设置范围？

编辑*

我用建议更新了我的合金模型，但仍然收到相同的错误：“您必须为 sig “this/Controller”指定一个范围以上合金代码在合金分析器中工作并给出以下结果：

```
Executing "Check testcontroller for 8 but 1 Configuration"
   Solver=sat4j Bitwidth=0 MaxSeq=0 SkolemDepth=1 Symmetry=20
   83 vars. 26 primary vars. 98 clauses. 5ms.
   No counterexample found. Assertion may be valid. 1ms.

Executing "Check viewtest for 8 but 1 Configuration"
   Solver=sat4j Bitwidth=0 MaxSeq=0 SkolemDepth=1 Symmetry=20
   65 vars. 25 primary vars. 75 clauses. 5ms.
   No counterexample found. Assertion may be valid. 0ms.

Executing "Check testmodel for 8 but 1 Configuration"
   Solver=sat4j Bitwidth=0 MaxSeq=0 SkolemDepth=1 Symmetry=20
   65 vars. 25 primary vars. 75 clauses. 5ms.
   found. Assertion is invalid. 6ms.

Executing "Check testcontroller3 for 8 but 1 Configuration"
   Solver=sat4j Bitwidth=0 MaxSeq=0 SkolemDepth=1 Symmetry=20
   83 vars. 26 primary vars. 98 clauses. 6ms.
   No counterexample found. Assertion may be valid. 0ms. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:36:47.667

您的 Alloy 模型包含语法错误，因此您也无法使用 Alloy Analyzer 运行它。

首先，为您的测试控制器检查指定范围的正确方法是这样

```
check testcontroller for 8 but 1 Configuration 
```

这意味着“所有事物的 8 个原子，但配置的 1 个原子”，而您编写的内容不会解析事件。

接下来，`mvc_controller_style`谓词未定义，这也会给您带来问题。

至于您的 API 使用，只需更改`parseOneModule`为`parseEverything_fromFile`，它应该可以工作。我也希望`parseOneModule`在这种情况下工作（因为您的模型中只有一个模块），但它只是没有，因为出于某种原因，某些名称没有得到正确解析。我不确定这是否是一个错误，或者该方法不应该是公共 API 的一部分。无论如何，这是我的代码，适用于您的示例：

```
public static void main(String[] args) throws Exception {
    A4Reporter rep = new A4Reporter();

    Module world = CompUtil.parseEverything_fromFile(rep, null, "mvc.als");
    A4Options options = new A4Options();
    options.solver = A4Options.SatSolver.SAT4J;
    options.skolemDepth = 1;

    for (Command command : world.getAllCommands()) {
        A4Solution ans = null;
        try {
            ans = TranslateAlloyToKodkod.execute_commandFromBook(rep, world.getAllReachableSigs(), command, options);
            System.out.println(ans);
        } catch (Err ex) {
            Logger.getLogger(AlloyTest.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

# c - 可以将 int 指针转换为 char * 吗？

> ID：14540946
> 
> 赞同：11
> 
> 时间：2013-01-26T19:53:00.583
> 
> 标签：c, pointers, alignment

以下程序测试英特尔处理器上的小/大端。实际上小端是正确的输出。首先，我在没有初始化的情况下投射`int`并`char*`访问它的值`int *`。我不理解输出的第二部分。这里`int`指针被强制转换为`char *`. 那么为什么`int`指针没有改变它的对齐方式`char *`呢？

```
00000000 00000000 00000011 01111111 = 895
0        0         3       127

int main() {
    int num = 895;
    if(*(char *)&num == 127)
    {
        printf("\nLittle-Endian\n");
    }
    else
    {
        printf("Big-Endian\n");
    }

    int *p = (char *)&num ;
    if(*p == 127)
    {
        printf("\nLittle-Endian\n");
    }
    else
    {
        printf("Big-Endian\n");
    }
    printf("%d\n",*p);
}

o/p

Little-Endian
Big-Endian
895 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T19:57:04.773

1.  使用此比较的程序的前半部分：

    ```
    if(*(char *)&num == 127) 
    ```

    看起来不错。

2.  您的程序的后半部分包含以下作业：

    ```
    int *p = (char *)&num ; 
    ```

    这不是有效的代码。如果没有显式强制转换，您将无法转换指针类型。在这种情况下，您的编译器可能会让您侥幸逃脱，但严格来说，这是不正确的。此行应为：

    ```
    int *p = (int *)(char *)&num; 
    ```

    或者只是这个等价的声明：

    ```
    int *p = &num; 
    ```

    从这个例子中，我相信你可以明白为什么你的第二个测试没有按照你想要的方式工作——你仍然在整体上运行`int`，而不是在你感兴趣的单个字节上。如果你做了`p`a `char *`，它将按您预期的方式工作：

    ```
    char *p = (char *)&num; 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T19:55:42.283

> 可以将 int 指针强制转换为`char *`吗？

是的，只有反向才会调用未定义的行为，更准确地说，使用从`char *`to 转换的结果`int *`（因为`char`是 1 字节对齐的，所以任何数据指针类型都可以安全地转换为`char *`）。

# mysql - 如何在mysql中获取两个日期之间有时间的记录？

> ID：14540949
> 
> 赞同：2
> 
> 时间：2013-01-26T19:53:12.377
> 
> 标签：mysql

我正在制作一个考勤系统，它包含一个介于两个日期之间的时间表，例如（晚上 10:00 到凌晨 3:00）。如何从 mysql 数据库中检索时间范围在 2 个日期之间的行？

我已经知道如何在 mysql 中使用 BETWEEN，我的问题是如何在不知道确切时间范围的情况下查询 mysql？因为它可能是任何东西（晚上 11:00 到凌晨 4:00）

我正在使用 3 个表： time_tbl：存储有关员工时间表的信息（例如晚上 10 点到凌晨 3 点） date_tbl：存储有关员工的日期安排的信息（例如星期一、星期二等） time_date_tbl：是一个连接表，时间和日期安排为从表 time_tbl 和 date_tbl 中获取的员工。

```
 time_tbl
    --------------------------------
    |  ID  |  Start    |  End      |
    --------------------------------
    |  1   |  22:00:00 |  03:00:00 |
    |  2   |  23:00:00 |  04:00:00 |
    |  3   |  08:00:00 |  11:00:00 |
    |  4   |  13:00:00 |  17:00:00 |
    --------------------------------

    date_tbl
    ---------------------
    |  ID  |  Days      |
    ---------------------
    |  1   |  Monday    |
    |  2   |  Tuesday   |
    |  3   |  Wednesday |
    ---------------------

    time_date_tbl
    -------------------------------------
    |  emp_id  |  time_id    |  date_id |
    -------------------------------------
    |  1       |  1          |  1       |
    |  1       |  1          |  2       |
    |  2       |  1          |  1       |
    |  3       |  3          |  1       |
    |  4       |  4          |  1       |
    |  4       |  1          |  1       |
    ------------------------------------- 
```

我想查询 mysql 以便检索数据（例如今天是星期一）我想检索日期等于今天“星期一”的记录，还包括晚上 10:00 到凌晨 3:00 的记录，其中晚上 10 点在星期天，星期一的前一天……

```
 desired result:
    -----------------------------------------------
    |  emp_id  |  time                 |  date    |
    -----------------------------------------------
    |  1       |  22:00:00 - 03:00:00  |  ?       | <-- started @ Sunday 10pm
    |  2       |  22:00:00 - 03:00:00  |  ?       | <-- started @ Sunday 10pm
    |  3       |  08:00:00 - 11:00:00  |  Monday  |
    |  4       |  13:00:00 - 17:00:00  |  Monday  | 
    |  4       |  22:00:00 - 03:00:00  |  ?       | <-- started @ Sunday 10pm
    ----------------------------------------------- 
```

mysql 中是否有某种“日期交叉器”函数/算法来完成这项工作？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T20:05:14.990

感谢您使用更多信息更新问题。如果您想按天查询并返回时间范围...您的表格会使这有点复杂...

```
SELECT tdt.emp_id,CONCAT(DATE_FORMAT(tt.Start,'%H:%m:%s'),' - ',DATE_FORMAT(tt.End,'%H:%m:%s')),dt.Days
FROM time_date_tbl tdt INNER JOIN date_tbl dt ON (tdt.date_id=dt.`ID`) INNER JOIN time_tbl tt ON (tt.`ID`=tdt.time_id)
WHERE dt.ID=1 
```

现在我在上面没有看到的是一个带有日期的实际日期字段......换句话说，上面的查询将列出所有星期一......永远。您可能需要向 WHERE 部分添加更多内容以对其进行更多限制。

现在，如果这是一个较新的项目并且您仍然有能力重组......如果 time_tbl 是一个带有两个日期的 id - 一个开始日期时间和一个结束日期时间，那么您真的不需要其余的表：

```
SELECT emp_id,CONCAT(DATE_FORMAT(tt.Start,'%H:%m:%s'),' - ',DATE_FORMAT(tt.End,'%H:%m:%s'))
FROM time_tbl tt
WHERE (DATE_FORMAT('%w',tt.Start)=1) OR (DATE_FORMAT('%w',tt.End)=1) 
```

这将再次列出所有星期一。您可以添加到 where 以进一步限制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T20:05:34.447

尝试这个：

```
WHERE scheduleStartDate >= givenStartDate
     AND scheduleEndDate <= givenEndDate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T20:06:07.003

一个例子。

```
DROP TABLE IF EXISTS `datetime`;

CREATE TABLE `datetime` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `datetime` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `datetime` (`id`, `datetime`)
VALUES
    (1,'2013-01-27 08:00:00'),
    (2,'2013-01-27 10:00:00'),
    (3,'2013-01-27 12:00:00'),
    (4,'2013-01-27 13:00:00');

select * from `datetime` where `datetime` >= '2013-01-27 10:00:00' and `datetime` <= '2013-01-27 12:00:00'

-- results
2   2013-01-27 10:00:00
3   2013-01-27 12:00:00 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T06:33:38.533

主要问题是没有时间间隔可供搜索。

以下代码创建要搜索的内部时间间隔。

```
DROP VIEW IF EXISTS    `time_view` ;
DROP VIEW IF EXISTS    `employee_schedule_view` ;
DROP TABLE IF EXISTS `employee_schedule`;
DROP TABLE IF EXISTS `day`;   
DROP TABLE IF EXISTS `time`;

CREATE TABLE `time` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `employee_id` int(11) unsigned NOT NULL,
  `start_time` time DEFAULT NULL,
  `hours` int(11) DEFAULT '0',
  `minutes` int(11) DEFAULT '0',
  `seconds` int(11) DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `time` (`id`, `employee_id`, `start_time`, `hours`, `minutes`, `seconds`)
VALUES
    (1,1,'22:00:00',5,0,0),
    (2,2,'23:00:00',5,0,0),
    (3,3,'08:00:00',3,0,0),
    (4,4,'13:00:00',4,0,0),
    (5,5,'17:00:00',24,0,0),
    (6,6,'23:00:00',26,0,0);

/* create a time view that contains interval information */
create or replace view time_view as 
select 
    id as time_id
,    start_time
-- calculate the time interval
,   SEC_TO_TIME( hours * 3600 +  minutes * 60  + seconds ) `interval`
-- calculate the time if we assume time is contiguous
,    SEC_TO_TIME( ( hour(start_time) + hours ) * 3600 + ( minute(start_time) + minutes) * 60 + second(start_time) + seconds ) contiguous_time
-- modulate to the number of seconds in a day to get the end time suitable for humans to read
,  SEC_TO_TIME((( hour(start_time) + hours ) * 3600 + ( minute(start_time) + minutes) * 60 + second(start_time) + seconds ) % 86400 ) end_time
,  floor( (( hour(start_time) + hours ) * 3600 + ( minute(start_time) + minutes) * 60 + second(start_time) + seconds ) / 86400 ) dayOffset
from `time` ;

CREATE TABLE `day` (
  `id` int(11) unsigned NOT NULL,
  `name` varchar(15) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `day` (`id`, `name`)
VALUES
    (0,'Monday'),
    (1,'Tuesday'),
    (2,'Wednesday'),
    (3,'Thursday'),
    (4,'Friday'),
    (5,'Saturday'),
    (6,'Sunday');

CREATE TABLE `employee_schedule` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `employee_id` int(11) unsigned NOT NULL,
  `time_id` int(11) unsigned NOT NULL,
  `day_id` int(11) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `time_id` (`time_id`),
  KEY `day_id` (`day_id`),
  CONSTRAINT `employee_schedule_ibfk_2` FOREIGN KEY (`day_id`) REFERENCES `day` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `employee_schedule_ibfk_1` FOREIGN KEY (`time_id`) REFERENCES `time` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `employee_schedule` (`id`, `employee_id`, `time_id`, `day_id`)
VALUES
    (1,1,1,0),
    (2,1,1,1),
    (3,2,1,0),
    (4,3,3,0),
    (5,4,4,0),
    (6,4,1,0),
    (7,5,1,5),
    (8,4,5,6),
    (9,3,6,6),
    (10,6,6,1);

/* create an employee view that has interval information */
create or replace view employee_schedule_view as
select  schedules.id schedules_id
, employee_id
, day_id as start_day_id
, start_days.name as start_day_name
, `start_time`
, `interval`
, `contiguous_time`
, `end_time`
, `end_days`.`id` as end_day_id
, `end_days`.name as end_day_name
-- some starting point - note the date is incorrect - it is merely here to define a starting point of the interval
,  timestamp( concat( date_format( date_add( date( now() ), interval `day_id` day ), '%Y-%m-%d' ) , ' ' , start_time )) `internal_start`
-- some ending point - note the date is incorrect - it is merel here to define an ending point of the interval
,  addtime( timestamp( concat( date_format( date_add( date( now() ), interval `day_id` day ), '%Y-%m-%d' ) , ' ' , `start_time` )) , `interval` ) `internal_finish`
from `employee_schedule` `schedules`
inner join `day` `start_days`
on `schedules`.`day_id` = `start_days`.id
inner join `time_view` `times`
on `schedules`.`time_id` = `times`.`time_id`
inner join `day` `end_days`
-- use mod to allow for instance when the start day is 'after' the end day -- think about sunday
on `end_days`.`id` = ( `start_days`.id + `times`.dayOffset ) % 7 
```

一旦支持间隔，就可以轻松运行以下 sql ...并理解。

```
-- example
-- find who is working at 11:00 on a Wednesday
set @dayID := 2 ;
set @time := '11:00:00' ;
select employee_schedule_view.schedules_id
, employee_schedule_view.employee_id
, employee_schedule_view.start_day_name
, employee_schedule_view.start_time
, employee_schedule_view.interval
, employee_schedule_view.end_time
, employee_schedule_view.end_day_name
from `employee_schedule_view` 
inner join
(
    select concat( date_format( date_add( date(now()), interval @dayID day ), '%Y-%m-%d' ), ' ', @time) internal_check
) internal_check
where 
internal_check.internal_check >= internal_start
and internal_check.internal_check <= internal_finish 
;

-- find who is working at 23:00 on a Monday
set @dayID := 0 ;
set @time := '23:00:00' ;
select employee_schedule_view.schedules_id
, employee_schedule_view.employee_id
, employee_schedule_view.start_day_name
, employee_schedule_view.start_time
, employee_schedule_view.interval
, employee_schedule_view.end_time
, employee_schedule_view.end_day_name
from `employee_schedule_view` 
inner join
(
    select concat( date_format( date_add( date(now()), interval @dayID day ), '%Y-%m-%d' ), ' ', @time) internal_check
) internal_check
where 
internal_check.internal_check >= internal_start
and internal_check.internal_check <= internal_finish 
;

-- example results
1   1   Monday  22:00:00    05:00:00    03:00:00    Tuesday
3   2   Monday  22:00:00    05:00:00    03:00:00    Tuesday
6   4   Monday  22:00:00    05:00:00    03:00:00    Tuesday 
```

# node.js - 文件更改后的 Node.js 流式传输

> ID：14540957
> 
> 赞同：0
> 
> 时间：2013-01-26T19:53:46.307
> 
> 标签：node.js

如何使流到浏览器而不刷新？例如：我在文件中写一些东西并在浏览器中显示我的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:56:05.353

您可以使用套接字。试试这个`socket.io`包：`npm install socket.io`。

如果你想读/写一个流，你可以通过管道将流传输到 socket.io。

# c++ - 添加常量对象

> ID：14540969
> 
> 赞同：1
> 
> 时间：2013-01-26T19:55:08.243
> 
> 标签：c++

我有一个自定义课程。我们就叫它苹果吧。我这样重载加法运算符：

```
apple apple::operator+(const apple & other)
{
    return apple
    (
        this->x + other.x,
        this->y + other.y,
        this->z + other.z
    );
} 
```

它工作得很好......直到我尝试添加两个 const 苹果。

```
const apple apple1;
const apple apple2;

auto apple3 = apple1 + apple2; 
```

给我一个错误'没有运算符“+”匹配这些操作数操作数类型是：const apple + const apple'

添加 const 对象有什么技巧吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T19:56:06.727

您需要将加法运算符本身标记为`const`：

```
apple apple::operator+(const apple & other) const; 
```

运算符的当前形式不能保证它`this`不会被改变（即使它实际上并没有改变它），所以当加法的 LHS 是 a 时`const apple`，编译器不能使用它并抱怨没有合适的运算符可用。

请注意，通常的做法是通过定义一个自由函数`operator+`而不是成员来实现自定义加法，因为这样编译器可以使用构造函数将加法的 LHS 转换为如果需要 - 如果是成员函数`apple`，这是不可能的`operator+`.

# javascript - 如何使用 JavaScript 正则表达式提取此字符串中的位置？

> ID：14540975
> 
> 赞同：-1
> 
> 时间：2013-01-26T19:55:29.363
> 
> 标签：javascript, html, regex

```
"Lives in <a href="http://www.facebook.com/pages/Salt-Lake-City-Utah/106057819434480" data-hovercard="/ajax/hovercard/page.php?id=106057819434480">Salt Lake City, Utah</a></span></span><span class="fbProfileBylineFragment"><span class="fbProfileBylineIconContainer"><i class="mrs fbProfileBylineIcon img sp_19lyo5 sx_3060a4"></i></span><span class="fbProfileBylineLabel">In a Relationship</span></span><span class="fbProfileBylineFragment"><span class="fbProfileBylineIconContainer"><i class="mrs fbProfileBylineIcon img sp_19lyo5 sx_02e908"></i></span><span class="fbProfileBylineLabel">From <a href="http://www.facebook.com/pages/Ho-Chi-Minh-City-Vietnam/108458769184495" data-hovercard="/ajax/hovercard/page.php?id=108458769184495">Ho Chi Minh City, Vietnam</a></span></span></div></div></div><a class="title" href="http://www.facebook.com/thdnguyen/info" aria-label="About Thang Duc Nguyen"><span class="text">About</span></a></div></div></li><li class="friends tile firstTab" id="pagelet_timeline_friends_nav_top"><div id="pagelet_timeline_friends_nav_top" data-referrer="pagelet_timeline_friends_nav_top_tc"><div class="modify" id="u_0_u"><a class="tab" href="http://www.facebook.com/thdnguyen/friends?ft_ref=mni"><div class="detail"><img class="friend hovercard_trigger img" src="http://profile.ak.fbcdn.net/hprofile-ak-ash4/372716_1823442806_2006030279_q.jpg" alt="Thanh Tu" data-hovercard="/ajax/hovercard/hovercard.php?id=1823442806" data-gt="&#123;&quot;coeff2_registry_key&quot;:&quot;0171&quot;,&quot;coeff2_info&quot;:&quot;AavbyaRCgBvdhZfDCJWU-1D0XS9C9xYK9mP-XAjVkbJZISJXe7vormiJvifh83A0MaQ&quot;,&quot;coeff2_action&quot;:&quot;7&quot;,&quot;coeff2_pv_signature&quot;:&quot;900209238&quot;&#125;" tabindex="-1" id="u_0_v" /><img class="friend hovercard_trigger img" src="http://profile.ak.fbcdn.net/hprofile-ak-prn1/157747_1207242302_43629620_q.jpg" alt="Khuong Ly" data-hovercard="/ajax/hovercard/hovercard.php?id=1207242302" data-gt="&#123;&quot;coeff2_registry_key&quot;:&quot;0171&quot;,&quot;coeff2_info&quot;:&quot;AavPGDyDTok7B4j0_HSLcSkhQ3kZ0ZJp6DuZ66N3ieCvIbwAElfVzNWwcDWmaCtMZxk&quot;,&quot;coeff2_action&quot;:&quot;7&quot;,&quot;coeff2_pv_signature&quot;:&quot;900209238&quot;&#125;" tabindex="-1" id="u_0_w" /><img class="friend hovercard_trigger img" src="http://profile.ak.fbcdn.net/hprofile-ak-ash4/274290_1289768677_1335638163_q.jpg" alt="Jimmy Nguyen" data-hovercard="/ajax/hovercard/hovercard.php?id=1289768677" data-gt="&#123;&quot;coeff2_registry_key&quot;:&quot;0171&quot;,&quot;coeff2_info&quot;:&quot;AavimNr_nNQOjE_GUv9rK9Y53Wb0AINs2esyyYHwWkYlCUR9k4s3bjv2zuX9ZC_zl0Y&quot;,&quot;coeff2_action&quot;:&quot;7&quot;,&quot;coeff2_pv_signature&quot;:&quot;900209238&quot;&#125;" tabindex="-1" id="u_0_x" /><img class="friend hovercard_trigger img" src="http://profile.ak.fbcdn.net/hprofile-ak-ash4/371515_1595704919_1332516967_q.jpg" alt="Phan Huu Duong" data-hovercard="/ajax/hovercard/hovercard.php?id=1595704919" data-gt="&#123;&quot;coeff2_registry_key&quot;:&quot;0171&quot;,&quot;coeff2_info&quot;:&quot;AauiC-fIYS2uiXgKMG1caBF5Oa7EQ5G8fw1cj_BytuODRnvmIXrcupg5R_oaUapQrwc&quot;,&quot;coeff2_action&quot;:&quot;7&quot;,&quot;coeff2_pv_signature&quot;:&quot;900209238&quot;&#125;" tabindex="-1" id="u_0_y" /><img class="friend hovercard_trigger img" src="http://profile.ak.fbcdn.net/hprofile-ak-prn1/27350_579556704_1248743264_q.jpg" alt="Shinbi Han" data-hovercard="/ajax/hovercard/hovercard.php?id=579556704" data-gt="&#123;&quot;coeff2_registry_key&quot;:&quot;0171&quot;,&quot;coeff2_info&quot;:&quot;AavEMYXuvUDOiYAw0rF9CRUi99YwRuu2lfGGx7fTwpCNfOSr4ZfXWNSAb94LtYaL52U&quot;,&quot;coeff2_action&quot;:&quot;7&quot;,&quot;coeff2_pv_signature&quot;:&quot;900209238&quot;&#125;" tabindex="-1" id="u_0_z" /><img class="friend hovercard_trigger img" src="http://profile.ak.fbcdn.net/hprofile-ak-snc6/187628_536415512_687099069_q.jpg" alt="Ph&#x1b0;&#x1a1;ng Dung" data-hovercard="/ajax/hovercard/hovercard.php?id=536415512" data-gt="&#123;&quot;coeff2_registry_key&quot;:&quot;0171&quot;,&quot;coeff2_info&quot;:&quot;AattmnwhiMdkaTVRwQWbQOW6LgoyyJLT0YiOtB8mJMN2ClaSo0eRUG65DVpL0aIdhs0&quot;,&quot;coeff2_action&quot;:&quot;7&quot;,&quot;coeff2_pv_signature&quot;:&quot;900209238&quot;&#125;" tabindex="-1" id="u_0_10" /></div><div class="frame"><div class="mat"></div></div><div class="fbTimelineRibbon"><div class="text">56 Mutual</div></div><div class="title"><span class="icon"><i class="img sp_19lyo5 sx_9f0f9c"></i></span><span class="text">Friends</span><span class="count">343</span></div></a></div></div></li><li class="photos tile " id="pagelet_timeline_photos_nav_top"><div id="pagelet_timeline_photos_nav_top" data-referrer="pagelet_timeline_photos_nav_top_tc"><div class="modify" id="u_0_17"><a class="tab" href="http://www.facebook.com/thdnguyen/photos"><div class="detail"><i style="background-image: url(&#039;http://photos-d.ak.fbcdn.net/hphotos-ak-snc7/312328_540065199344675_1438624962_a.jpg&#039;);background-position: 10% 79%;" class="photo"></i></div><div class="frame"><div class="mat"></div></div><div class="title"><span class="icon"><i class="img sp_4mjn73 sx_636b00"></i></span><span class="text">Photos</span><span class="count">217</span></div></a></div></div></li><li class="map tile " id="pagelet_timeline_map_nav_top"><div id="pagelet_timeline_map_nav_top" data-referrer="pagelet_timeline_map_nav_top_tc"><div class="modify" id="u_0_15"><a class="tab" href="http://www.facebook.com/thdnguyen/map"><div class="detail"><img class="img" src="http://external.ak.fbcdn.net/safe_image.php?d=AQAC3nvFphWDJjkh&amp;url=http%3A%2F%2Ffb.ecn.api.tiles.virtualearth.net%2Fapi%2FGetMap.ashx%3Fb%3Dr%252Cmkt.en-US%252Cstl.fb%26key%3DAqSHdMNkhSvgWwMhbqyiqgW1IhMNeV56Gb0WkfgEDm6jSsfX9gDGmlOUEt3i44Jk%26td%3DD1%26h%3D74%26w%3D111%26ppl%3D54%252C%252C40.2487%252C-111.6467%26z%3D8&amp;jq=100" alt="" width="111" height="74" /><div class="mapSubtitle">BYU Wilkinson Center</div></div><div class="frame"><div class="mat"></div></div><div class="title"><span class="icon"><i class="img sp_6b0izw sx_dbd31f"></i></span><span class="text">Map</span><span class="count">26</span></div></a></div></div></li><li class="favorites tile " id="pagelet_timeline_favorites_nav_top"><div id="pagelet_timeline_favorites_nav_top" data-referrer="pagelet_timeline_favorites_nav_top_tc"><div class="modify" id="u_0_14"><a class="tab" href="http://www.facebook.com/thdnguyen/favorites"><div class="detail"><div class="first panel"><img class="liked img" src="http://profile.ak.fbcdn.net/hprofile-ak-snc6/203541_422548671139516_791692913_s.jpg" alt="" /></div><div class="panel"><img class="liked img" src="http://profile.ak.fbcdn.net/hprofile-ak-snc6/203522_363819460365598_301463621_s.jpg" alt="" /></div></div><div class="frame"><div class="mat"></div></div><div class="title"><span class="icon"><i class="img sp_8y8k5s sx_d48dae"></i></span><span class="text">Likes</span><span class="count">44</span></div></a></div></div></li><li class="followers tile " id="pagelet_timeline_followers_nav_top"><div id="pagelet_timeline_followers_nav_top" data-referrer="pagelet_timeline_followers_nav_top_tc"><div class="modify" id="u_0_p"><a class="tab" href="http://www.facebook.com/thdnguyen/followers"><div class="detail"><div><table class="uiGrid statsContainer" cellspacing="0" cellpadding="0"><tbody><tr><td class="vMid hCent stats"><span class="_wj fwb">1</span></td></tr></tbody></table></div></div><div class="frame"><div class="mat"></div></div><div class="title"><span class="icon"><i class="img sp_19lyo5 sx_910af8"></i></span><span class="text">Followers</span></div></a></div></div></li><li class="following tile " id="pagelet_timeline_following_nav_top"><div id="pagelet_timeline_following_nav_top" data-referrer="pagelet_timeline_following_nav_top_tc"><i id="u_0_11"></i></div></li><li class="events tile " id="pagelet_timeline_events_nav_top"><div id="pagelet_timeline_events_nav_top" data-referrer="pagelet_timeline_events_nav_top_tc"><div class="modify" id="u_0_16"><a class="tab" href="http://www.facebook.com/thdnguyen/events"><div class="detail"><i style="background-image: url(&#039;http://profile.ak.fbcdn.net/hprofile-ak-snc6/276528_475960892426464_856733486_n.jpg&#039;)" class="event"></i></div><div class="frame"><div class="mat"></div></div><div class="title"><span class="icon"><img class="img" src="http://static.ak.fbcdn.net/rsrc.php/v2/yS/r/UcZE_y8-JDf.png" alt="" width="15" height="16" /></span><span class="text">Events</span></div></a></div></div></li><li class="notes tile " id="pagelet_timeline_notes_nav_top"><div id="pagelet_timeline_notes_nav_top" data-referrer="pagelet_timeline_notes_nav_top_tc"><div class="modify" id="u_0_13"><a class="tab" href="http://www.facebook.com/thdnguyen/notes"><div class="detail"><div class="note"><div class="content"><div class="name">8 months</div><span>        I should start this boring thing when the college is over on May 16 that</span></div></div></div><div class="frame"><div class="mat"></div></div><div class="title"><span class="icon"><i class="img sp_4mjn73 sx_f82ad6"></i></span><span class="text">Notes</span><span class="count">1</span></div></a></div></div></li><li class="og_ns_music tile " id="pagelet_timeline_og_nav_og_ns_music_top"><div id="pagelet_timeline_og_nav_og_ns_music_top" data-referrer="pagelet_timeline_og_nav_og_ns_music_top_tc"><div class="modify" id="u_0_12"><a class="tab" href="http://www.facebook.com/thdnguyen/music"><div class="detail"><div class="uiScaledImageContainer photo"><img class="scaledImageFitWidth img" src="http://external.ak.fbcdn.net/safe_image.php?d=AQD8v7DoEhwQwP1p&amp;w=200&amp;h=200&amp;url=http%3A%2F%2Fo.scdn.co%2Funbranded%2Fdd77ec2b2f2a51017d8ebe60413400bf193a8de2&amp;crop" style="top:-17px;" alt="" width="109" height="109" /></div></div><div class="frame"><div class="mat"></div></div><div class="title"><span class="icon"><i class="img sp_4mjn73 sx_040c01"></i></span><span class="text">Music</span></div></a></div></div></li><li class="hidden_elem empty tile"><div class="add"><a class="tab" href="#"><div class="detail"></div><div class="frame"><div class="mat"></div></div><div class="title"></div></a></div></li><li class="hidden_elem empty tile"><div class="add"><a class="tab" href="#"><div class="detail"></div><div class="frame"><div class="mat"></div></div><div class="title"></div></a></div></li><li class="hidden_elem empty tile"><div class="add"><a class="tab" href="#"><div class="detail"></div><div class="frame"><div class="mat"></div></div><div class="title"></div></a></div></li><li class="hidden_elem empty tile"><div class="add"><a class="tab" href="#"><div class="detail"></div><div class="frame"><div class="mat"></div></div><div class="title"></div></a></div></li><li class="hidden_elem empty tile"><div class="add"><a class="tab" href="#"><div class="detail"></div><div class="frame"><div class="mat"></div></div><div class="title"></div></a></div></li><li class="hidden_elem empty tile"><div class="add"><a class="tab" href="#"><div class="detail"></div><div class="frame"><div class="mat"></div></div><div class="title"></div></a></div></li><li class="hidden_elem empty tile"><div class="add"><a class="tab" href="#"><div class="detail"></div><div class="frame"><div class="mat"></div></div><div class="title"></div></a></div></li><li class="hidden_elem empty tile"><div class="add"><a class="tab" href="#"><div class="detail"></div><div class="frame"><div class="mat"></div></div><div class="title"></div></a></div></li></ul><a class="fbTimelineMoreButton seemore stat_elem fbTimelineMoreButtonZero" href="#" id="u_0_o"><div class="detail frame"><div class="mat"></div><div class="fbTimelineRibbon"><div class="text"> </div></div></div><div class="title">More</div></a>" 
```

我需要的只是刚开始**时犹他州盐湖城**。

我是 JavaScript 正则表达式的新手，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:57:43.590

不需要正则表达式，使用 DOM 方法：

```
var element = document.createElement("div");
element.innerHTML = responseText;

console.log(element.getElementsByTagName("a")[0].innerHTML); 
```

**演示：http:** [//jsfiddle.net/j3MLa/](http://jsfiddle.net/j3MLa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:57:48.797

看起来你只是想匹配一个值，在这种情况下不需要使用正则表达式，只需搜索字符串。更一般地说，虽然这样做很诱人，但您[不能使用正则表达式解析 html](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

# sql - 我该如何查询这个案例

> ID：14540983
> 
> 赞同：0
> 
> 时间：2013-01-26T19:56:52.907
> 
> 标签：sql, postgresql

数据库：PostgreSQL

假设我有

```
table A(integer a_id, timestamp x, timestamp y) 
table B(int b_id, timestamp n, timestamp m) 
```

`m`可`null`

我想用这个结构获取数据

```
SELECT a_id, j.b_id, k.b_id 
FROM A, B AS j, B AS k 
WHERE (x BETWEEN j.n AND j.m) AND (y BETWEEN k.n AND k.m.) 
```

何时`(x BETWEEN j.n AND j.m) AND (y BETWEEN k.n AND k.m.)`找不到匹配项

`null j.b_id`我仍然希望查询使用or获取数据`null k.b_id`

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:02:57.450

使用外连接并考虑 NULL：

```
SELECT a_id, j.b_id, k.b_id 
FROM A
LEFT JOIN B AS j ON x >= j.n AND (x <= j.m OR j.m IS NULL)
LEFT JOIN B AS k ON y >= k.n AND (y <= k.m OR k.m IS NULL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T20:13:32.513

我对这个神秘问题的解释......

```
SELECT a_id, j.b_id, k.b_id 
FROM   a
LEFT   JOIN b j ON a.x BETWEEN j.n AND j.m
LEFT   JOIN b k ON a.y BETWEEN k.n AND k.m 
```

`j`如果在or中没有找到匹配的行`k`，`NULL`则分别为`j.b_id`or传递`k.b_id`。

该查询受到主要设计缺陷的影响，即多个匹配项将以某种方式`b`返回的行数成倍增加。`CROSS JOIN`

# php - 打印可以从电话号码形成的字符串的所有排列

> ID：14540990
> 
> 赞同：2
> 
> 时间：2013-01-26T19:57:36.653
> 
> 标签：php, algorithm

我正在尝试打印可以从 php 中的电话号码形成的可能单词。我的一般策略是将每个数字映射到可能的字符数组。然后我遍历每个数字，递归调用函数来遍历每个可能的字符。

这是我的代码到目前为止的样子，但它还没有成功。我可以进行任何语法更正以使其正常工作吗？

```
$pad = array(
        array('0'), array('1'), array('abc'), array('def'), array('ghi'),
        array('jkl'), array('mno'), array('pqr'), array('stuv'), array('wxyz')    
);   

function convertNumberToAlpha($number, $next, $alpha){

    global $pad;
    for($i =0; $i<count($pad[$number[$next]][0]); $i++){
        $alpha[$next] = $pad[$next][0][$i];

        if($i<strlen($number) -1){
            convertNumberToAlpha($number, $next++, $alpha);
        }else{
            print_r($alpha);
        }
    }    
}

$alpha = array();
convertNumberToAlpha('22', 0, $alpha); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T20:01:25.160

这将如何使用？这不是您所建议的简单递归算法的工作，甚至不是迭代方法。平均 10 位数字将产生 59,049 (3^10) 种可能性，如果您想确定实际单词，则必须根据字典对每种可能性进行评估。

很多时候，最好的方法是预编译一个字典，将 10 位数字映射到各种单词。然后，您的查找是一个常数 O(1) 算法，只需选择一个 10 位数字，该数字映射到一个可能的单词数组。

事实上，预编译字典是 T9 的工作方式，将字典映射到具有对数查找函数的树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T20:58:41.480

下面的代码应该做到这一点。相当直接：它使用递归，每个级别处理一个输入字符，在每次递归调用时构建/传递当前组合的副本，递归在处理输入的最后一个字符的级别停止。

```
function alphaGenerator($input, &$output, $current = "") {
    static $lookup = array(
        1 => "1",    2 => "abc", 3 => "def",
        4 => "ghi",  5 => "jkl", 6 => "mno",
        7 => "pqrs", 8 => "tuv", 9 => "wxyz",
        0 => "0"
    );
    $digit = substr($input, 0, 1);          // e.g. "4"
    $other = substr($input, 1);             // e.g. "3556"
    $chars = str_split($lookup[$digit], 1); // e.g. "ghi"
    foreach ($chars as $char) {             // e.g. g, h, i
        if ($other === false) {             // base case
            $output[] = $current . $char;
        } else {                            // recursive case
            alphaGenerator($other, $output, $current . $char);
        }
    }
}
$output = array();
alphaGenerator("43556", $output);
var_dump($output); 
```

输出：

```
array(243) {
  [0]=>string(5) "gdjjm"
  [1]=>string(5) "gdjjn"
  ...
  [133]=>string(5) "helln"
  [134]=>string(5) "hello"
  [135]=>string(5) "hfjjm"
  ...
  [241]=>string(5) "iflln"
  [242]=>string(5) "ifllo"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T20:05:01.280

您应该阅读 Norvigs 关于用 Python 编写拼写检查器的文章[http://norvig.com/spell-correct.html](http://norvig.com/spell-correct.html)。虽然它是一个拼写检查器，并且在 python 中不是 php，但它是围绕查找可能变化的单词的相同概念，可能会给你一些好主意。

# eclipse - 尝试在 eclipse juno Java EE 中安装 zend pdt 失败

> ID：14540991
> 
> 赞同：1
> 
> 时间：2013-01-26T19:57:36.243
> 
> 标签：eclipse, jakarta-ee, eclipse-pdt

我已经阅读了您在 juno 帖子中如何安装 eclipse pdt 的内容。我排除所有选项，例如。mylin，从安装但反复尝试得到以下内容：

> 收集要安装的项目时发生错误会话上下文是：（profile=epp.package.jee，phase=org.eclipse.equinox.internal.p2.engine.phases.Collect，operand=，action=）。未找到包含：osgi.bundle,org.eclipse.dltk,4.0.0.201206120848 的存储库包含：osgi.bundle,org.eclipse.dltk.console,4.0.0.201206120848 未找到包含：osgi.bundle,org.eclipse 的存储库.dltk.console.ui,4.0.0.201206120848

这在各种存储库中重复出现。我在一个版本中拥有 Juno Java EE。面向 Web 开发人员的 Eclipse Java EE IDE。

版本：Juno Service Release 1 内部版本 ID：20121004-1855

# c - C 宏表达式返回值

> ID：14540993
> 
> 赞同：1
> 
> 时间：2013-01-26T19:57:40.247
> 
> 标签：c, macros, bit-manipulation, bitmask

我正在为我的嵌入式系统类编写一个设备处理程序，并且我正在尝试使用宏来检查第 i 位是否已设置。我的宏似乎无法正常工作，但内联函数可以。这是为什么？

```
#define TEST0 i&0x01
#define CLEAR0 i &= 0x01

inline short test0(short i) {
    return i&0x01;
}

int main() {
    short flag = 1;

    //this doesnt work
    if (TEST0(flag) == 0x01) {
        CLEAR0(flag);
    }

    //but this does
    if (test0(flag) == 0x01) {
        CLEAR0(flag);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T20:00:17.360

语法错误。宏需要一个参数。

```
#define TEST0(i) ((i) & 0x01) 
```

此外，使用空格来提高可读性，使用括号来提高安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:59:12.303

这是由于运算符优先级问题。此外，您需要宏的参数。

它被解析如下：

```
if (i & (0x01 == 0x01)) 
```

添加括号和参数来修复：

```
#define TEST0(i) ((i)&0x01)
#define CLEAR0(i) ((i) &= 0x01) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T20:01:15.803

如果要将参数传递给宏，则应将其定义为接受参数：

```
#define TEST0(i) ((i)&0x01)
#define CLEAR0(i) do { i&=0x01; } while(0) 
```

（其他修改处理优先级和语法）。

# ios - ARC 兼容项目中的非 ARC 类？

> ID：14540997
> 
> 赞同：1
> 
> 时间：2013-01-26T19:58:04.807
> 
> 标签：ios, xcode

我正在开发一个进行一些视频处理的 iPhone 应用程序，我必须包含不符合 ARC 的类（ dealloc ，release stuff ）。所以我手动去使它们符合弧形。后来我发现了任何可以在 ARC 项目中使其非 ARC 的类的编译器标志`-fno-objc-arc`。

我的问题是，如果我用编译器标志标记这些类，这会有什么影响？性能受到打击？这是个好主意吗？我的应用程序 iOS 5.0 及更高版本。我找不到任何谈论这样做的利弊的资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T21:57:20.363

你问：

> 如果我用编译器标志标记这些类，这会产生什么影响？

我认为您唯一需要担心的是确保非 ARC 库遵循与内存管理相关的 Cocoa 命名约定（例如，`retainCount`如果名称以`alloc`、`new`、`copy`或开头，则仅返回带有 +1 的对象`mutableCopy`）。否则，您的 ARC 将无法正确管理生成的对象。大多数编写良好的类都符合这种模式，所以你应该完全可以使用该`fno-objc-arc`标志，但这完全取决于所讨论的类。

> [有] 性能受到影响吗？

不存在实际性能问题。

> [这是不是一个好主意？

在所有条件相同的情况下，我通常喜欢将代码转换为 ARC。我可能会避免转换的几种情况：

*   这是一个正在积极开发的库，如果我创建自己的个人 ARC 分支，我将失去该库的未来修订版。

*   该库非常复杂和/或具有不易转换为 ARC 的构造。

* * *

最重要的是，如果我可以转换为 ARC，我会的。通常在这个过程中，我会进行必要的测试，以确保我对库感到满意，没有泄漏等，所以这是一个富有成效（如果烦人）的过程。我们都对我们项目中包含的代码负责，我认为任何人都应该在没有经过尽职调查的情况下集成代码，这是 ARC 转换和测试过程的自然副产品。

如果我转换为 ARC，我愿意将转换回馈给原始作者（例如，通过 GitHub “拉取请求”或作者开放的任何机制），以便可以将其集成到代码库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T20:03:16.747

乍一看，使用或不使用 ARC 没有性能问题。`release`ARC基本上是正常的引用计数，插入调用的不是程序员，而是编译器。