# StackOverflow 问答 15122000-15122999

# r - k-means 聚类与 pamk CBI 问题

> ID：15122013
> 
> 赞同：1
> 
> 时间：2013-02-27T20:44:11.187
> 
> 标签：r, cluster-analysis, k-means

我一直在尝试对我的数据进行聚类，以便能够整理出不同的强度。从下图中，您可以看到两个不同的组。像这样的其他图并不那么容易区分，所以我认为带有聚类估计的 k-means 将是一个很好的方法。所以我从`fpc`包中使用了函数 pamkCBI （基本上与 pamk 相同，只是输出我发现更容易使用）并且我试图让我的数据（也在下面）聚集。我遇到的问题是数据沿着 x 轴聚集，这会产生两个集群，其中一个是顶峰，另一组是低峰。我需要它来区分 V1-V8 行。我在想通过转移列和行来沿着 y 轴聚集，但后来我得到了这个错误：

```
Error in summary(silhouette(clustering[ss[[i]]], dx))$avg.width : 
  $ operator is invalid for atomic vectors 
```

必须有一种方法可以做到这一点。如果有人有任何建议或其他方式来做到这一点，使用不同的包（甚至不同的程序或不同的集群技术），我会很感激。对不起，很长的问题。

```
library(flexmix)
library(fpc)
cluster <- pamkCBI(mt,krange=1:100,criterion="multiasw", usepam=FALSE,
     scaling=FALSE, diss=FALSE,
     critout=FALSE, ns=10, seed=NULL) 
```

[示例测试矩阵](http://sdrv.ms/WrLHjS)

![数据是什么样的](../Images/abd2f7cccae2f407279ce09ded80c5b1.png)

# javascript - 在javascript中访问多维数组的最有效方法

> ID：15122016
> 
> 赞同：0
> 
> 时间：2013-02-27T20:44:18.827
> 
> 标签：javascript, arrays, performance, multidimensional-array

我在 javascript 中有一个 *n*n 数组，我需要在其中执行大量访问。

我不需要按顺序访问所有元素，而只需要在特定位置访问。如果可能的话，我还希望在使用之前不要分配数组单元的所有内存（否则将直接占用几 MB 内存）。

我正在寻找最有效的方法。我尝试使用由内置键（ x + '#' + y + '#' + z ）索引的字典，但它显然不够有效。

您能否提出一些其他有效的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:43:34.473

恐怕没有比字典方法更快的访问对象的方法了，因为这就是 Javascript 中的一切，真的。要不分配内存，您可以使用对象而不是数组：

```
var x = {};
var key = x + '#' + y + '#' + z;
x[key] = 'some value'; 
```

这至少会给您带来记忆问题，但我不确定这是否真的很令人担忧。（另外，我什至不确定如果你使用数组它会分配内存，因为我不熟悉 Javascript 中的内存分配）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:44:51.450

我认为您的多维数组非常好。如果创建稀疏，它不会占用所有内存，并且更像一个简单的“字典”对象 - 您也可以使用嵌套对象。然而，我建议嵌套查找将比在一个巨大的字典中更快，因为散列函数使用更少的键变得更简单。此外，从最里面的维度加载或迭代一个完整的数组将明显快于从巨大的字典中查询每个项目。

毕竟，如果您实际上没有遇到任何基本的性能问题，请使用您认为更容易编写/阅读/使用的内容。

# ios - Core Data 属性的自定义 Getter

> ID：15122021
> 
> 赞同：2
> 
> 时间：2013-02-27T20:44:36.310
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, core-data

我在我的应用程序中引入了软删除模式。我不会从我的上下文中删除对象，而是将它们标记为“已删除”。我将在这里使用从食谱中（软）删除成分的示例。

我在很多地方都要求提供食谱的成分。如果可能的话，我想避免更新所有这些（并冒着丢失的风险）。相反，我可以重新定义`ingredients`配方类的 getter，我将在其中过滤掉软删除的对象吗？

我需要完整成分列表（包括软删除）的少数情况将使用新属性，例如`ingredientsIncludingDeleted`.

这合理吗？使用自定义 getter 是否有任何显着的副作用，而不仅仅是返回预期的内容？我应该注意什么特定的核心数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T20:51:44.093

是的，你可以这么做。但是，您的方法是倒退。默认的 getter 不应该有任何谓词。它应该完全按照它所暗示的那样做，这是一个未过滤的结果集。想想有人在 6 个月后阅读您的代码。他们会知道“成分”实际上意味着“过滤的成分”吗？不。

因此，不要更改**默认**getter 的含义，而是创建一个新的 getter（命名为“filteredIngredients”，并在任何地方使用它。这是正确的长期解决方案。

如果您担心忘记更改某些地方的属性，请执行以下操作：暂时将您的成分吸气剂重命名为其他名称，例如“tempIngredients”。这将在任何使用它的地方导致编译器错误。使用适当的 getter 修复所有这些编译器错误，然后将默认的 getter 重命名为“ingredients”。

希望这可以帮助。

# c# - C# 名称 brojevi 在当前上下文中不存在

> ID：15122022
> 
> 赞同：-1
> 
> 时间：2013-02-27T20:44:44.327
> 
> 标签：c#

我想制作一个简单的程序（彩票号码生成器），它采用特定范围内的数字并将它们随机播放“n”次，在每次随机播放后它选择一个随机数并将其从给定范围的列表中移动到一个新的列表，并执行“n”次（直到它选择特定数量的数字，确切地说是 7）。我找到了一种完全可以做到这一点的算法（扩展方法或改组通用列表）。但我不是那么喜欢编程，我在将结果（带有绘制数字的列表）显示到 TextBox 或 Label 时遇到问题，但是我已经让它与 MessageBox 一起工作。但是使用 TextBox/Label 我收到错误“名称***在当前上下文中不存在”。我已经用谷歌搜索了一个解决方案，但没有任何帮助。

这是代码：

```
 private void button1_Click(object sender, EventArgs e)
      {
         List<int> numbers;
         numbers = Enumerable.Range(1, 39).ToList();
         numbers.Shuffle();
      }

      private void brojevi_TextChanged(object sender, EventArgs e)
      {          
      }
  }
}

/// <summary>
/// Class for shuffling lists
/// </summary>
/// <typeparam name="T">The type of list to shuffle</typeparam>
public static class ListShufflerExtensionMethods
{
    //for getting random values
    private static Random _rnd = new Random();

    /// <summary>
    /// Shuffles the contents of a list
    /// </summary>
    /// <typeparam name="T">The type of the list to sort</typeparam>
    /// <param name="listToShuffle">The list to shuffle</param>
    /// <param name="numberOfTimesToShuffle">How many times to shuffle the list,    by default this is 5 times</param>
    public static void Shuffle<T>(this List<T> listToShuffle, int numberOfTimesToShuffle = 7)
    {          
        //make a new list of the wanted type
        List<T> newList = new List<T>();

        //for each time we want to shuffle
        for (int i = 0; i < numberOfTimesToShuffle; i++)
        {
            //while there are still items in our list
            while (listToShuffle.Count >= 33)
            {
                //get a random number within the list
                int index = _rnd.Next(listToShuffle.Count);

                //add the item at that position to the new list
                newList.Add(listToShuffle[index]);

                //and remove it from the old list
                listToShuffle.RemoveAt(index);
            }

            //then copy all the items back in the old list again
            listToShuffle.AddRange(newList);

            //display contents of a list
            string line = string.Join(",", newList.ToArray());
            brojevi.Text = line;

            //and clear the new list
            //to make ready for next shuffling
            newList.Clear();
            break;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:51:29.053

ListShufflerExtensionMethods 不知道您的文本框（brojevi），因为它超出了范围。您可以重组并让 Shuffle 返回一个值，然后在调用者范围内设置文本框文本的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T20:55:34.023

问题是`brojevi`(either `TextBox`or `Label`) 没有在扩展方法的范围内定义，它是 a`Control`所以它应该在你的`Form`. 所以，当你打乱你的号码时，把它们放在事件处理程序`TextBox`的执行过程中`button1_Click`

删除行：

```
 string line = string.Join(",", newList.ToArray());
    brojevi.Text = line; 
```

**编辑：**

您可以像这样更改扩展方法以返回绘制项目的字符串或绘制的项目列表。让我们来看看列表，因为您可能想将这些数字用于其他事情。另外，我看不出洗牌 7 次的意义，因为你只能看到最后一次洗牌。因此，我认为一个就足够了。检查代码：

```
public static List<T> Shuffle<T>(this List<T> listToShuffle)
        {
            //make a new list of the wanted type
            List<T> newList = new List<T>();

            //while there are still items in our list
            while (listToShuffle.Count >= 33)
            {
                //get a random number within the list
                int index = _rnd.Next(listToShuffle.Count);

                //add the item at that position to the new list
                newList.Add(listToShuffle[index]);

                //and remove it from the old list
                listToShuffle.RemoveAt(index);
            }

            //then copy all the items back in the old list again
            listToShuffle.AddRange(newList);

            return newList;
        } 
```

在 button1_Click1 事件处理程序中，我们可以拥有：

```
List<int> numbers;
numbers = Enumerable.Range(1, 39).ToList();
List<int> drawnNumbers = numbers.Shuffle();
string line = string.Join(",", drawnNumbers.ToArray());
brojevi.Text = line; 
```

# javascript - 循环对象属性与数字索引数组

> ID：15122030
> 
> 赞同：1
> 
> 时间：2013-02-27T20:45:14.853
> 
> 标签：javascript, arrays, performance, loops, map

在 JavaScript 中哪个更快：循环遍历具有整数索引的数组或遍历具有属性的对象？如果有的话，性能差异是什么？

```
var array = [1, 2, 3];
for (var i = 0; i < array.length; i++) {
} 
```

相比：

```
var object = {"1":1, "2":2, "3":3};
for (var x in object) {
} 
```

据我所知，JavaScript 数组实际上是由映射支持的，所以我希望两者都执行相同的操作。非常感谢任何信息！

编辑：我可能应该澄清我对循环开销（比如 if`for in`更昂贵）以及访问每个元素（`object[x]`vs `array[i]`）的查找时间感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-31T06:18:44.413

接受的答案使用了无效的基准，并且是完全错误的。正如评论指出的那样，`console.log`它将主导测试结果，使它们变得无用。看看这个比较：http: [//jsperf.com/performance-of-array-vs-object/17](http://jsperf.com/performance-of-array-vs-object/17)

数组迭代比对象迭代快大约 48 倍。如果您提前知道对象的键的范围，它会大大提高，但仍然比数组迭代慢得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:01:47.473

我创建了一个 jsperf [http://jsperf.com/array-vs-object-loop](http://jsperf.com/array-vs-object-loop)。

我认为额外的财产访问需要更多时间。在 chrome 24 中它没有太大区别，在 Firefox 19 中，对象方式需要长 5-10%。

您可能还应该考虑对象/数组的大小。

编辑：忘记那个答案，看看接受的答案！

# php - 当我删除文件中的最后一行时，我得到一个空行 PHP

> ID：15122031
> 
> 赞同：1
> 
> 时间：2013-02-27T20:45:15.927
> 
> 标签：php, arrays, file, line

嗨，我在重写文件时遇到问题。当我删除文件中的最后一行并将数组重写回临时文件时，我会得到一个空白，就像最后会弄乱项目中的其他文件一样。

这是联系人文本文件

```
1|Mr.|Blank|Blank|||||||||
2|Mr.|Blank2|Blank2|||||||||
3|Mr.|Blank3|Blank3||||||||| 
```

这是删除的代码

```
<?php

    $select = 3;

    $tempFilename = 'contacts_temp';
    touch($tempFilename);

    $file_name = "contacts";
    $file = fopen($file_name, "r+")or exit("Unable to open file!");

    $tempfile = fopen($tempFilename, "r+")or exit("Unable to open file!");

    for($c=0;!feof($file);$c++)
    {
        $top = fgets($file);
        $contactsArray[$c] = $top;
    }

    for ($d=0; $d!=count($contactsArray);$d++){
            //echo $usersArray[$d];
            $tempusersArray[$d] = explode('|', $contactsArray[$d]);
    }

    rewind($tempfile);
    for ($c=0;$c<count($contactsArray);$c++){
        if($tempusersArray[$c][0]==$select){
            unset($contactsArray[$c]);
        }elseif($contactsArray[$c]==NULL){
            unset($contactsArray[$c]);
            break;
        }else{
            trim($contactsArray[$c]);
        }
    }

    var_dump($contactsArray);

    file_put_contents($tempFilename,$contactsArray);

?> 
```

当它运行时，我会像这样得到一个文件

```
1|Mr.|Blank|Blank|||||||||
2|Mr.|Blank2|Blank2|||||||||
//There would be a blank line here 
```

谢谢是提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:33:47.697

在您的联系人文本文件中，第 1 行和第 2 行以换行符 (\n) 结尾，第 3 行没有。因此，如果您删除第 3 行，文件将以换行符结束，因此显示一个空行。如果您删除第 1 行或第 2 行，则没有换行符的第 3 行将保留，并且您不会得到额外的空行。要么在行的每一端添加一个换行符并处理空行，要么删除数组最后一个元素中的换行符，将其写入磁盘。

# c# - 使用 FK 删除实体

> ID：15122034
> 
> 赞同：0
> 
> 时间：2013-02-27T20:45:31.003
> 
> 标签：c#, linq, entity-framework, primary-key, sql-delete

我想用 FK 删除实体。这是我的代码：

```
var db = new DeresyDBEntities();
var item=db.Items.Where(p => p.ID == ItemId).SingleOrDefault();
if(item!=null)
{
    foreach (var tag in db.ItemsTags.Where(p => p.ItemId == ItemId))
        db.ItemsTags.Remove(tag);
    foreach (var comment in db.ItemsComments.Where(p => p.ItemId == ItemId))
        db.ItemsComments.Remove(comment);
    foreach (var rate in db.ItemsVotes.Where(p => p.ItemId == ItemId))
        db.ItemsVotes.Remove(rate);

    db.Items.Remove(item);
    db.SaveChanges();
    return true;
} 
```

有没有其他方法可以删除？

# c# - 如何在 Windows Phone 中使用必应搜索 API？

> ID：15122037
> 
> 赞同：4
> 
> 时间：2013-02-27T20:45:37.410
> 
> 标签：c#, windows-phone-8, windows-phone, bing-api, azure-marketplace

我正在尝试使用 Bing Search API 来查找图像作为我应用程序内图块的背景。我已将 BingSearchContainer.cs 包含在我的项目中，但我无法使用此处提供的示例代码使其工作。

任何关于如何在我的 Windows Phone 8 应用程序中使用 Bing 搜索 API 的指南都会被应用！

感谢您的任何回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T20:45:37.410

我希望您已经拥有一个 AccountKey，所以我不会告诉您必须获得一个。

## 执行

1.  首先，将[BingSearchContainer.cs](https://datamarket.azure.com/dataset/explore/getproxy/5ba839f1-12ce-4cce-bf57-a49d98d29a44)添加到您的项目中
2.  实现[Bing API 快速入门和代码中的示例 C# 代码](http://go.microsoft.com/fwlink/?LinkID=272626&clcid=0x409)
3.  此后，右键单击**References**并选择**Manage NuGet Packages...**并搜索并安装`Microsoft.Data.Services.Client.WindowsP`.
4.  修改示例代码，使其适用于 Windows Phone：

    ```
    using Bing;
    using System;
    using System.Data.Services.Client;
    using System.Linq;
    using System.Net;

    namespace StackOverflow.Samples.BingSearch
    {
        public class Finder
        {
            public void FindImageUrlsFor(string searchQuery)
            {
                // Create a Bing container. 
                string rootUri = "https://api.datamarket.azure.com/Bing/Search";
                var bingContainer = new Bing.BingSearchContainer(new Uri(rootUri));
                bingContainer.UseDefaultCredentials = false;

                // Replace this value with your account key. 
                var accountKey = "YourAccountKey";

                // Configure bingContainer to use your credentials. 
                bingContainer.Credentials = new NetworkCredential(accountKey, accountKey);

                // Build the query. 
                var imageQuery = bingContainer.Image(query, null, null, null, null, null, null);

                imageQuery.BeginExecute(_onImageQueryComplete, imageQuery);

            }

            // Handle the query callback. 
            private void _onImageQueryComplete(IAsyncResult imageResults)
            {
                // Get the original query from the imageResults.
                DataServiceQuery<Bing.ImageResult> query =
                    imageResults.AsyncState as DataServiceQuery<Bing.ImageResult>;

                var resultList = new List<string>();

                foreach (var result in query.EndExecute(imageResults))
                    resultList.Add(result.MediaUrl);

                FindImageCompleted(this, resultList);
            }

            public event FindImageUrlsForEventHandler FindImageUrlsForCompleted;
            public delegate void FindImageUrlsForEventHandler(object sender, List<string> result);
        }
    } 
    ```

## 例子

1.  现在，让我们使用我提供给您的代码：

    ```
    using Bing;
    using System;
    using System.Data.Services.Client;
    using System.Linq;
    using System.Net;

    namespace StackOverflow.Samples.BingSearch
    {
        public class MyPage
        {
            private void Button_Click_1(object sender, RoutedEventArgs e)
            {
                var finder = new Finder();
                finder.FindImageUrlsForCompleted += finder_FindImageUrlsForCompleted;
                finder.FindImageUrlsFor("candy");
            }

            void finder_FindImageUrlsForCompleted(object sender, List<string> result)
            {
                Deployment.Current.Dispatcher.BeginInvoke(() =>
                {
                    foreach (var s in result)
                        MyTextBox.Text += s + "\n";
                });
            }
        }
    } 
    ```

# javascript - Facebook 应用程序请求不显示消息

> ID：15122048
> 
> 赞同：1
> 
> 时间：2013-02-27T20:46:00.873
> 
> 标签：javascript, facebook, api, notifications, request

我正在尝试处理 Javascript Facebook API 应用程序请求功能。我使用 FB.init 方法成功登录，而无需请求任何扩展权限。我完全能够获取他的个人资料图片、他的朋友列表等。但是当向我的用户的朋友发送应用程序请求时，我成功显示了对话框，实际上是发送通知，通知显示在 Facebook 上，但没有信息！我以这种方式使用 FB.ui：

```
function sendRequest(to) {
FB.ui({method: 'apprequests', to: to, message: 'You should learn more about this awesome site.', data: 'tracking information for the user'});
return false;
} 
```

我尝试了各种消息，但没有显示任何消息，只有“**用户**名向您发送了请求”。以前未使用我的应用程序登录的用户和已经授权我的应用程序的用户都会发生这种情况。我应该怎么办？有没有办法显示该消息？

非常感谢。

马泰奥

# python - 将 django 与其他应用程序的模块链接

> ID：15122057
> 
> 赞同：1
> 
> 时间：2013-02-27T20:46:22.137
> 
> 标签：python, django, apache

我想将 django 与现有的 python 应用程序链接，重用此应用程序中定义的模块、类和一些配置文件。所有模块都驻留在此应用程序的 ./bin 目录中。实际上应用程序是一个预测系统，django 将用作前端来可视化结果。

当前目录结构如下所示。

```
./application/bin/module1.py
                 /module2.py
             /config.txt
             /datadir/...
             /webresults/run1/myfig.png
                        /run2/myfig.png
                        /...

./django/manage.py
        /project1/urls.py
                 /settings.py
                 /wsgi.py
        /app1/views.py
             /models.py
             /forms.py
             /...
        /templates/base.html
                  /showResults.html
                  /... 
```

设置了一个 apacheserver 来提供来自目录 ./application/webresults/ 的静态页面和图像以及来自 /django/project1/wsgi.py 的 django 页面。

目前我已经将所有相关模块从 /application/bin/ 复制到 django/app1/ 以便我可以重用它们，例如。在views.py 和models.py 中。关于系统维护不是最佳解决方案。

所以我正在寻找一个更优雅的解决方案来解决这个问题。我们希望实现的一些目标：

*   在后端应用程序中移动比在 django 实例中移动更难，因此更可取的 django 被重新定位（它没有以最有效的方式编码:-)）
*   在 django 中重用应用程序类
*   在应用程序中重用 django 的模型
*   在应用程序中重用 SQL_objectmapping
*   使用一个配置文件进行与 django 和应用程序相关的设置

我们正在考虑的解决方案是将所有 djangocode 合并到 /application/bin/ 并在 apacheconfiguration 中重新映射 djangopath

```
./application/bin/manage.py
                 /module1.py
                 /module2.py
                 /project1/urls.py
                          /settings.py
                          /wsgi.py
                 /app1/views.py
                      /models.py
                      /forms.py
                      /...
                 /templates/base.html
                           /showResults.html
                           /... 
```

有没有关于如何处理的食谱？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:36:45.880

将 Django 项目扔到另一个模块中并没有错。只要您的 PYTHONPATH 设置正确，并且您的 WSGI 配置正确，一切都应该正常工作。

我唯一的评论是，同义反复，“分开的东西应该分开。”

当我遇到类似问题时，我通常会创建一个简单的 UNIX 套接字服务器（使用 Tornado），Django 可以与之通信以进行 API 调用等。

如果我需要公开套接字服务器的功能，我将投入一个廉价的 WSGI 服务器（同样，使用 Tornado）来提供请求，并将它放在我的托管配置中的不同子域下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:13:15.753

我认为我最初的问题不是很清楚。从那时起，我偶然发现了一些对我有帮助的其他答案和页面，主要是关于如何在外部模块和应用程序中重用 django 功能。

*   [http://www.b-list.org/weblog/2007/sep/22/standalone-django-scripts/](http://www.b-list.org/weblog/2007/sep/22/standalone-django-scripts/)
*   [为什么在我的 django 代码中“列出索引超出范围”；](https://stackoverflow.com/questions/2211705/why-list-index-out-of-range-in-my-django-code)
*   [https://docs.djangoproject.com/en/dev/ref/models/options/#app-label](https://docs.djangoproject.com/en/dev/ref/models/options/#app-label)

有了这些信息，我设法从应用程序根目录上的 pythonscripts（例如 module1.py）访问我的模型（在应用程序子文件夹中）。

简而言之，从 module1.py 访问 app1.models.Mymodel 的代码现在看起来像这样：

```
os.environ['DJANGO_SETTINGS_MODULE'] = 'project1.settings'
from django.core.management import setup_environ
from project1 import settings
setup_environ(settings)
import app1.models

class MyChildmodel(app1.models.Mymodel):
     class Meta:
          app_label = 'app1'

     def myfunction():
          .... 
```

# jquery - 加载内容 onload insted of click

> ID：15122058
> 
> 赞同：0
> 
> 时间：2013-02-27T20:46:28.143
> 
> 标签：jquery, ajax

当页面加载时，我会更改代码以直接加载 content.php 吗？

```
$("#refresh").click(function(evt) {
     $("#content").load("content.php")
     evt.preventDefault();
  })
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T20:48:29.140

```
$(document).ready(function() {
   $("#content").load("content.php")
}) 
```

# powershell - Power shell 传递参数

> ID：15122062
> 
> 赞同：1
> 
> 时间：2013-02-27T20:46:40.653
> 
> 标签：powershell

我将 $nextday 和 $currrentyear 传递给我在我的 powershell 脚本中执行的 .exe。似乎争论没有通过，为什么？

```
$nextday = (Get-Date).AddDays(-1).ToString("M/dd/yyyy")
$currentgetyear = (Get-Date).ToString("yyyy")

& "C:\tmt.exe" YEAR=  $currentgetyear DATE=  $nextday 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T20:53:41.583

为什么在单词之间使用空格？看看它是如何被软件解析的：

```
[21:50:46] > & echoargs YEAR=  $currentgetyear DATE=  $nextday
Arg 0 is <YEAR=>
Arg 1 is <2013>
Arg 2 is <DATE=>
Arg 3 is <2.26.2013> 
```

然而，这被解析了我猜它应该是什么。

```
[21:50:58] > & echoargs YEAR=$currentgetyear DATE=$nextday
Arg 0 is <YEAR=2013>
Arg 1 is <DATE=2.26.2013> 
```

所以我的解决方案：删除空格，如下所示：

```
& "C:\tmt.exe" YEAR=$currentgetyear DATE=$nextday 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:54:15.707

尝试

```
& "C:\tmt.exe" ("YEAR={0}" -f (get-date).Year) ("DATE={0:M/dd/yyyy}" -f (get-date).AddDays(-1)) 
```

账单

# sql - 用于显示特定数据的 SQL 查询

> ID：15122065
> 
> 赞同：0
> 
> 时间：2013-02-27T20:47:00.047
> 
> 标签：sql, reporting

我正在尝试获取具有特定代码的人数。

下面是我现在正在做的一个例子。 `select * from persons where code in ('1', '2', '3', '4', '5')`

它将向我显示拥有这些数字的`in`每个人，但这并不排除任何东西。我不知道如何展示那些只有这些代码而没有别的东西。

希望这有点道理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:51:49.320

为此，您需要查看所有数字。最好的方法是使用`group by`and `having`：

```
select personid
from person
group by personid
having sum(case when code not in ('1', '2', '3', '4', '5') then 1 else 0 end) = 0 
```

该`having`子句计算不是这些代码的记录数。如果计数为 0，则返回记录。

如果您想确保选择了所有 5 个代码，请使用以下条件：

```
having sum(case when code not in ('1', '2', '3', '4', '5') then 1 else 0 end) = 0 and
       count(distinct code) = 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:52:20.153

这又快又脏，我假设persons表上存在一个ID字段......

```
select a.*
  from persons a
  join (select id,count(*) count
          from persons b
         where code in ('1','2','3','4','5')
         group by id
        having count()=1) b
    on a.id=b.b.id 
```

**编辑：认为我更喜欢这个版本 :) **

这里的想法是只从列表中获取那些只有一个 ID 的人员记录，从而进行计数。将其加入到同一个人员表中，它将列出目标列表中唯一具有该值的记录。

# javascript - 想要通过 js 检测旧 Flash 版本是否被 safari 阻止

> ID：15122067
> 
> 赞同：4
> 
> 时间：2013-02-27T20:47:08.703
> 
> 标签：javascript, flash, safari

我有一个使用 SWFobject 来检测 Flash 的站点。

不幸的是，现在除非用户升级到最新的 Flash，否则 safari 会阻止 Flash，我们的页面无法提供非 Flash 内容。是否有一种简单的方法可以确定用户是否拥有正常运行的闪存版本？

我想我也希望能够将非闪存内容提供给具有各种闪存块（包括 chrome 原生闪存块）的用户

我读过一种从javascript 调用flash 的方法（例如GetVariable("$version")）的技术。在尝试调用该方法之前，我是否必须设置一个超时以确保闪存已实例化？

# java - 未捕获的异常错误android

> ID：15122068
> 
> 赞同：1
> 
> 时间：2013-02-27T20:47:14.570
> 
> 标签：java, android, eclipse

我知道SO上有很多这样的东西，但我还有一个给你们。我知道我在某处有一个空指针异常错误，但我不知道在哪里。Java 不是我最好的语言，所以我有点摸不着头脑。

我的 logcat 看起来像这样：

```
W/dalvikvm( 6062): threadid=1: thread exiting with uncaught exception (group=0x413e5438)
E/AndroidRuntime( 6062): FATAL EXCEPTION: main
E/AndroidRuntime( 6062): java.lang.NullPointerException
E/AndroidRuntime( 6062):    at com.zach.ReportingTool.ReportingTool$1.handleMessage(ReportingTool.java:152)
E/AndroidRuntime( 6062):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 6062):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 6062):    at android.app.ActivityThread.main(ActivityThread.java:4918)
E/AndroidRuntime( 6062):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 6062):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 6062):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
E/AndroidRuntime( 6062):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
E/AndroidRuntime( 6062):    at dalvik.system.NativeStart.main(Native Method)
E/android.os.Debug(  714): !@Dumpstate > dumpstate -k -t -z -d -o /data/log/dumpstate_app_error 
```

[我从这里](http://www.gregbugaj.com/?attachment_id=70)的一个开源项目中获取了代码。该代码用于速度测试应用程序。我真正更改/删除的唯一一件事是删除了位于屏幕顶部的动画更新进度条，并且我摆脱了指示速度是 3g 还是边缘的网络文本视图。

要启动代码，按钮如下所示：

```
 bSpeed.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(final View view) {
            confirmation.setText("Test started");   
            bSpeed.setEnabled(false);
            new Thread(mWorker).start();    

        }
    }); 
```

其余代码如下所示：

```
 @SuppressLint("HandlerLeak")
private final Handler mHandler=new Handler(){
    @Override
    public void handleMessage(final Message msg) {
        try {
        switch(msg.what){
        case MSG_UPDATE_STATUS:
            final SpeedInfo info1=(SpeedInfo) msg.obj;
            speed.setText(String.format(getResources().getString(R.string.update_speed), mDecimalFormater.format(info1.kilobits)));
            progress.setText(String.format(getResources().getString(R.string.update_downloaded), msg.arg2, EXPECTED_SIZE_IN_BYTES));
            break;
        case MSG_UPDATE_CONNECTION_TIME:
            conspeed.setText(String.format(getResources().getString(R.string.update_connectionspeed), msg.arg1));
            break;              
        case MSG_COMPLETE_STATUS:
            final  SpeedInfo info2=(SpeedInfo) msg.obj;
            speed.setText(String.format(getResources().getString(R.string.update_downloaded_complete), msg.arg1, info2.kilobits));          
            progress.setText(String.format(getResources().getString(R.string.update_downloaded), msg.arg1, EXPECTED_SIZE_IN_BYTES));
            bSpeed.setEnabled(true);
            break;  
        default:
        super.handleMessage(msg);
        }
        } catch (Exception e) {confirmation.setText("6: " + e.getMessage());}
    }
};

private final Runnable mWorker=new Runnable(){      
    @Override
    public void run() {
        InputStream stream=null;
        try {
            int bytesIn=0;
            String downloadFileUrl="http://www.gregbugaj.com/wp-content/uploads/2009/03/dummy.txt"; 
            long startCon=System.currentTimeMillis(); 
            URL url=new URL(downloadFileUrl);
            URLConnection con=url.openConnection();
            con.setUseCaches(false);
            long connectionLatency=System.currentTimeMillis()- startCon;
            stream=con.getInputStream();

            Message msgUpdateConnection=Message.obtain(mHandler, MSG_UPDATE_CONNECTION_TIME);
            msgUpdateConnection.arg1=(int) connectionLatency;
            mHandler.sendMessage(msgUpdateConnection);

            long start=System.currentTimeMillis();
            int currentByte=0;
            long updateStart=System.currentTimeMillis();
            long updateDelta=0;
            int  bytesInThreshold=0;

            while((currentByte=stream.read())!=-1){ 
                bytesIn++;
                bytesInThreshold++;
                if(updateDelta>=UPDATE_THRESHOLD){
                    int progress=(int)((bytesIn/(double)EXPECTED_SIZE_IN_BYTES)*100);
                    Message msg=Message.obtain(mHandler, MSG_UPDATE_STATUS, calculate(updateDelta, bytesInThreshold));
                    msg.arg1=progress;
                    msg.arg2=bytesIn;
                    mHandler.sendMessage(msg);
                    //Reset
                    updateStart=System.currentTimeMillis();
                    bytesInThreshold=0;
                }
                updateDelta = System.currentTimeMillis()- updateStart;
            }

            long downloadTime=(System.currentTimeMillis()-start);
            if(downloadTime==0){
                downloadTime=1;
            }

            Message msg=Message.obtain(mHandler, MSG_COMPLETE_STATUS, calculate(downloadTime, bytesIn));
            msg.arg1=bytesIn;
            mHandler.sendMessage(msg);
        } 
        catch (MalformedURLException e) {
            confirmation.setText("1: " + e.getMessage());
        } catch (Exception e) {
            confirmation.setText("2: " + e.getMessage());
        }finally{
            try {
                if(stream!=null){
                    stream.close();
                }
            } catch (Exception e) { 
                confirmation.setText("3: " + e.getMessage());
            }
        }
    }
};

private SpeedInfo calculate(final long downloadTime, final long bytesIn){
    SpeedInfo info=new SpeedInfo();
    long bytespersecond   =(bytesIn / downloadTime) * 1000;
    double kilobits=bytespersecond * BYTE_TO_KILOBIT;
    double megabits=kilobits  * KILOBIT_TO_MEGABIT;
    info.downspeed=bytespersecond;
    info.kilobits=kilobits;
    info.megabits=megabits;
    return info;    
}

private static class SpeedInfo{
    public double kilobits=0;   
    public double megabits=0;
    public double downspeed=0;  
}
private static final int EXPECTED_SIZE_IN_BYTES = 1048576;
private static final double BYTE_TO_KILOBIT = 0.0078125;
private static final double KILOBIT_TO_MEGABIT = 0.0009765625;

private Button bSpeed;
private TextView conspeed;
private TextView progress;
private TextView speed;
private TextView confirmation;

private final int MSG_UPDATE_STATUS=0;
private final int MSG_UPDATE_CONNECTION_TIME=1;
private final int MSG_COMPLETE_STATUS=2;

private final static int UPDATE_THRESHOLD=300;
private DecimalFormat mDecimalFormater;
} 
```

我认为错误来自哪里，是 case 语句中的对象。(ReportingTool.java:152) 指向这一行：

```
 conspeed.setText(String.format(getResources().getString(R.string.update_connectionspeed), msg.arg1)); 
```

如果我将该行注释掉，它会指向前一个 case 语句中该行上方的 progress.setText()。忽略所有的 try/catch 块，我只是想缩小错误的来源。

如果有人可以看一下这段代码，将不胜感激，谢谢-Z

## **更新**

谢谢你们的快速回复。在调试了那条线和它周围的线之后，看起来 conspeed、speed 和 progress 都返回空值，我不是在启动它们吗？

首先，我在“oncreate”中更新了所有内容以匹配此：

```
 TextView speed = (TextView) findViewById(R.id.speed);
    TextView progress = (TextView) findViewById(R.id.progress);
    TextView connectionspeed = (TextView)findViewById(R.id.connectionspeed); 
```

所以现在第 152 行是 connectionspeed.setText()

**更新 2**

这是 Main.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/textView3"
android:layout_width="fill_parent" 
android:layout_height="wrap_content"  >

<TextView
    android:id="@+id/progress"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/bSip"
    android:layout_marginTop="16dp"
    android:text="@string/progress" />

<Button
    android:id="@+id/bSip"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="29dp"
    android:text="@string/EnableSip" />

<TextView
    android:id="@+id/speed"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/progress"
    android:text="@string/Speed"/>

<TextView
    android:id="@+id/connectionspeed"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/speed"
    android:text="@string/ConSpeed"/>

<Button
    android:id="@+id/bSpeed"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/progress"
    android:layout_alignParentRight="true"
    android:layout_marginRight="30dp"
    android:text="@string/SpeedTest" />

<TextView
    android:id="@+id/Confirmation"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/bmail"
    android:layout_marginTop="22dp"
    android:fitsSystemWindows="true"
    android:maxLines="@integer/MaxLines"
    android:scrollHorizontally="false"
    android:visibility="visible" />

<Button
    android:id="@+id/bmail"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/connectionspeed"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="33dp"
    android:text="@string/Export" />

<Button
    android:id="@+id/bDelete"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/bmail"
    android:layout_alignParentBottom="true"
    android:text="@string/deleteSelf" /> 
```

再次感谢-Z

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:51:18.820

在有问题的第 152 行上方，执行以下操作：

```
 if (conspeed == null){
      Log.e("TAG", "conspeed is null!");
 }
 if (getResources() == null){
      Log.e("TAG", "getResources() is null!");
 }
 if (msg == null){
      Log.e("TAG", "msg is null!");
 }
 conspeed.setText(String.format(getResources().getString(R.string.update_connectionspeed), msg.arg1)); 
```

然后你就会知道是什么`null`，下一步就是找出原因。

**编辑：**

我看到你正在使用`findViewById`. 在您的 XML 文件中，您是否真的定义了那些具有与您要查找的内容匹配的 id 字段的 TextView？像这样：`android:id="@+id/speed"`

**编辑 2**

嗯，你的 XML 看起来不错。你这样做的事实让`onCreate()`我相信你可能只是过早地打电话给这些。参考这篇文章：[findViewByID 返回 null](https://stackoverflow.com/questions/3264610/findviewbyid-returns-null)

在您的 UI 的所有内容都初始化后，尝试重构您的代码以进行此调用？它可能为 null 只是因为尚未设置所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:07:58.567

所以我想通了，这对我来说似乎也很愚蠢。

当我初始化时：

```
TextView speed = (TextView) findViewById(R.id.speed);
TextView progress = (TextView) findViewById(R.id.progress);
TextView connectionspeed = (TextView)findViewById(R.id.connectionspeed);
TextView confirmation = (TextView) findViewById(R.id.speed); 
```

我也在初始化：

```
private TextView connectionspeed;
private TextView progress;
private TextView speed;
private TextView confirmation; 
```

我应该在 onCreate() 中拥有的只是：

```
speed = (TextView) findViewById(R.id.speed);
progress = (TextView) findViewById(R.id.progress);
connectionspeed = (TextView)findViewById(R.id.connectionspeed);
confirmation = (TextView) findViewById(R.id.speed); 
```

我认为 .Net 等效项会调用 Dim 或 var 两次……我想……无论如何，我取出了 TextView 部分，它现在可以工作了。如果有人有更好的解释，我会全力以赴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T20:55:20.673

NullPointerException 将在`handleMessage`方法为 ( `ReportingTool.java`)的文件中的第 152 行

查看该行有哪些变量在起作用；至少有一个正在发生`null`，并且您正在尝试对其进行操作，从而导致异常。

# java - 如何在 Android 中使用 RestClientException 捕获

> ID：15122072
> 
> 赞同：3
> 
> 时间：2013-02-27T20:47:47.537
> 
> 标签：java, spring, rest

我有一个 Rest Web 服务，我正在使用下面的 android 代码中的这个 Web 服务。

Web 服务运行良好，我已经对其进行了测试。

但是在下面的代码中，我收到了错误

```
 String url ="http://10.0.2.2:29512/Restweb_2/webresources/generic/shirish";

  RestTemplate resttemplate = new RestTemplate();
    Log.v("in1", "in1");
 resttemplate.getMessageConverters().add(new StringHttpMessageConverter());
    Log.v("in2", "in2");
   String result;
        try {            
            result = resttemplate.getForObject(url,String.class);
        } 
        catch (RestClientException ex) {
           ![I am getting this error while using this exception and I am not able to proceed further if I don't use this exception(Or it is giving me error in result assign statment)][1]. So how to use RestClient!Exception ????? Also I already import the needed jar files.

        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-12T04:35:13.123

> 不兼容的类型需要 throwable 发现 RestClientException

当您包含 spring-android-rest-template-xxxx.jar 并且未包含 spring-android-core-xxxx.jar 时，可能会导致这种情况

# iphone - 为什么解析 JSONArray 时不填充 NSSArray？

> ID：15122075
> 
> 赞同：0
> 
> 时间：2013-02-27T20:47:57.617
> 
> 标签：iphone, json, parsing, nsarray, nsdictionary

我是 iphone 开发的菜鸟，我正在尝试从此[链接](http://bitcoincharts.com/t/markets.json)解析 JSONArray 。问题是，当执行此代码时，它返回我的 NSArray 仅包含 4 个值，而不是链接处的 jSONArray 包含的 80 个值。我是否正确地将 NSDictionary 转换为 NSArray。任何帮助是极大的赞赏。我在[这里](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)学习本教程。

```
 //parse out the json data
NSError* error;
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData //1
                                                     options:kNilOptions 
                                                       error:&error];
NSArray* bitcoin = json; //2
NSLog(@"size of bitcoin is %lu", sizeof(bitcoin));

// 1) Get the bitcoin rate mtgoxUSD
for(int i = 0; i < sizeof(bitcoin); i++){
    NSDictionary* forex = [bitcoin objectAtIndex:i];
    NSString *mtgoxUSD = [forex objectForKey:@"symbol"];
    NSLog(@"value against mtgoxUSD %@", mtgoxUSD);

    if (mtgoxUSD==@"mtgoxUSD") {
        NSString *bitcoinrate = [forex objectForKey:@"avg"];
        if (bitcoinrate==@""||bitcoinrate==NULL) {
            currencyBTC=1;
            NSLog(@"currencyBTC: is 1");
        }else{
            currencyBTC=[bitcoinrate floatValue];
            NSLog(@"currencyBTC: %f", currencyBTC);
        }
        break;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:52:18.470

`sizeof`将以字节为单位返回指针结构的大小，这就是为什么您总是将 4 视为值的原因。

您应该改用该`count`方法：

```
for(int i = 0; i < [bitcoin count]; i++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T20:53:41.657

> “我是否正确地将 NSDictionary 转换为 NSArray”

不，不完全是！`JSONObjectWithData`可以返回数组*或*字典，具体取决于您正在解析的 JSON。在这种情况下，您的 JSON 有一个顶级数组，因此您根本不需要转换它。

所以首先，用这个替换你的前几行：

```
NSArray* json = [NSJSONSerialization JSONObjectWithData:responseData //1
                                                 options:kNilOptions 
                                                   error:&error]; 
```

然后，您想要遍历您的数组，但您当前的迭代代码并不完全正确。您可以使用`count`pgb 在另一个答案中建议的方法，或者您可以使用 Objective-C 的非常漂亮的“快速枚举”功能，如下所示：

```
for id item in json {
    // Will iterate through all objects in the json array, accessible via item 
} 
```

# jboss7.x - @Inject 不工作 EJB 调用它自己的方法

> ID：15122078
> 
> 赞同：4
> 
> 时间：2013-02-27T20:48:08.373
> 
> 标签：jboss7.x, cdi, ejb-3.1

平台：JBoss AS 7.1.1。

我有一个无状态 bean 方法，它需要调用同一个 bean 的另一个方法，但必须通过 EJB 容器。

```
@Stateless
public class OrderManager {
    @Resource
    SessionContext ctx;
    @Inject
    MailUtil mm;
    Logger logger = Logger.getLogger("Test");

    public void method1() {
        if (mm == null) {
            logger.info("MailUtil is null");
        }

        ctx.getBusinessObject(OrderManager.class).method2();
    }

    @Asynchronous
    public void method2() {
        if (mm == null) {
            logger.info("MailUtil is null");
        }
    }
} 
```

不幸的是，注入的变量 mm 在 method2() 中为空。而在 method1() 中，存在一个正确注入的 mm 变量。

这是JBOss的缺陷，还是我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-13T10:08:09.817

使用 WebSphere 8.5.5.5 的我也发生了同样的事情。自注入 bean 在*其*注入的 bean 中有 null。

解决方案是将第二种方法从 更改`private`为`public`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:45:59.027

根据 Pete Muir 的说法，这是一个错误，但是，我们不确定它是否已修复。尝试更新版本的 JBoss（从源代码构建）将起作用。如果仍然存在问题，请创建[错误报告](https://issues.jboss.org)。

# xml - 使用 WIX 进行 MSI 安装后的 COPYFILE

> ID：15122080
> 
> 赞同：1
> 
> 时间：2013-02-27T20:48:21.843
> 
> 标签：xml, installation, wix

请参阅以下声明；暂时我在 MSI 的安装项目中有硬编码的源和目标文件夹（这个文件夹是在安装过程中形成的）。注意：下面的文件路径是 MSI 软件包安装目标所在的路径，而不是源位置。如何通过隐藏 [INSTALLLOCATION]\App_Config\ 等硬编码值来设置目标或源属性值的问题

截至目前，我正在通过命令行传递 INSTALLLOCATION (E:\Websites\SCBUDirect\Website\SCBUDirect.B2CWeb) 并希望将目标文件夹值设置为 [INSTALLLOCATION]\App_Config\ 但不确定如何通过属性设置来实现或我尝试但未能使其工作的自定义操作。

下面是需要复制的文件组件的片段（来自 heat.exe）。

```
<Component Id="cmp209B0DBB82F9FF15193D29F0BD337B7F" Directory="dirB0A921E55A598C65B18B4E47885629C3" Guid="{3B140259-FCC7-4D2E-8629-CBB879BBA46C}">
  <File Id="filBC5CC5B8DCC504F6DC75A7B2673E7D0D" KeyPath="yes" Source="C:\Workspaces\Chatra\Website\SCBUDirect.B2CWeb\App_Config\basic.log4net.dev" />
</Component> 
```

这是我在 product.wxs 中的部分代码

```
<Fragment>
    <Property Id="SourceFilesFolder" Value="E:\Websites\SCBUDirect\Website\SCBUDirect.B2CWeb\App_Config\basic.log4net.dev" />

    <Property Id="DestFilesFolder" Value="E:\Websites\SCBUDirect\Website\SCBUDirect.B2CWeb\App_Config\" />

  <ComponentGroup Id="CopyFiles">
         <ComponentRef Id="CMP_LOG4TXT" />
    </ComponentGroup>

      <Component Id="CMP_LOG4TXT" Guid="341BD660-7249-42DD-9744-DBEF0776AD52"  Directory="INSTALLLOCATION" KeyPath="yes">
        <CopyFile Id="Copy_LOG4TXT" 
              SourceProperty="SourceFilesFolder" 
              DestinationProperty="DestFilesFolder" 
              DestinationName="basic.log4net" />
      </Component>

</Fragment> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:14:34.383

您可以像这样使用相对路径：

```
<Component Id="comp_Include_0" DiskId="1" KeyPath="yes" Guid="D026AE84-0F34-4715-810D-4EB6656DFECD">
    <File Id="file_Include_0" Source="..\Include\3rdParty\ac_types2.6\ac_complex.h" />
</Component> 
```

“..\”
表示例如 bin\release 文件夹，它的声明如下：

```
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="ProgramFiles64Folder">
      <Directory Id="INSTALLFOLDER" Name="ATE" >
      </Directory>
    </Directory>
</Directory> 
```

你需要申报

```
<DirectoryRef Id="INSTALLFOLDER"> 
```

我发现创建 wix 安装程序的最简单方法是将石蜡用于完整目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:43:19.923

[INSTALLLOCATION] 文件路径的Pattern Saving 需要在这里完成，以便在安装和卸载时保存文件路径。否则我们会得到网络搜索错误。

```
<product>

    <Property Id="INSTALLLOCATION">
          <RegistrySearch Id="REMEMBERPROPERTY" Root="HKCU" Key="Websites\SCBUDirect" Name="Remembered" Type="raw"/> 
    </Property>

        <CustomAction Id="SAVEINSTALLDIR" Property="CMDREMEMBERPROPERTY" Value="[INSTALLLOCATION]"/>
        <CustomAction Id="SETINSTALLDIR" Property="INSTALLLOCATION" Value="[CMDREMEMBERPROPERTY]" />

        <InstallExecuteSequence>
          <Custom Action="SAVEINSTALLDIR" Before="AppSearch"></Custom>
         <Custom Action="SETINSTALLDIR" After="AppSearch">CMDREMEMBERPROPERTY</Custom>
        </InstallExecuteSequence>

        <SetProperty Id="DestFilesFolder" Value="[INSTALLLOCATION]\Website\App_Config" After="CostInitialize" />

</product>

<fragment>

  <ComponentGroup Id="CopyFiles">
         <ComponentRef Id="CMP_LOG4TXT" />
    </ComponentGroup>

      <Component Id="CMP_LOG4TXT" Guid="341BD660-7249-42DD-9744-DBEF0776AD52"  Directory="dir572C565E70B3AEE6F0C29D3EE9056E9B" KeyPath="yes">
        <CopyFile Id="Copy_LOG4TXT"         Source="E:\Websites\SCBUDirect\Website\SCBUDirect.B2CWeb\App_Config\basic.log4net.dev" DestinationProperty="DestFilesFolder" DestinationName="basic.log4net" />
      </Component>

</fragment> 
```

# html - 谷歌浏览器位置：固定

> ID：15122082
> 
> 赞同：0
> 
> 时间：2013-02-27T20:48:32.343
> 
> 标签：html, google-chrome, position

在我的网站[http://stevengeorgeharris.com](http://stevengeorgeharris.com)上，我有一个固定的标题，它会随着用户向下滚动。它在 Firefox、Safari 即 ipad、iphone 中完美运行，但在 CHROME 中不适用。当我向下滚动时，标题 (#nav) 会消失/跳跃，然后再向下出现。似乎是当它滚动到#info 时。

任何人都可以帮我调试它，尝试了很长时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:55:04.770

摆脱视频上的 z-index。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:51:31.207

我在 chrome 中尝试了你的链接，这是我在滚动时得到的：

[关联](http://prntscr.com/uedey)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T20:54:48.960

尝试删除顶部和左侧，并使用 margin-top 代替。这应该有效。

# c# - 在文本框中选择特定行？

> ID：15122086
> 
> 赞同：7
> 
> 时间：2013-02-27T20:48:44.440
> 
> 标签：c#, winforms, textbox

![来自1张图片](../Images/05aa9a47732f55f1c42f1fba57522559.png) ![在此处输入图像描述](../Images/c06106907184d88ac45dda0a36dbe034.png)我有两个表单，1 和 2。Form1 有一个文本框，form2 有一个文本框和按钮。我想转到指定的行，这意味着当我输入 form2 的文本框的值时，我的鼠标光标会转到 form1 的文本框。

```
private void button1_Click(object sender, EventArgs e)
{
  int line = Form1.ab;
  for (int i = 1; i < line; i++)
  {
      if (i == Convert.ToInt16( textBox1.Text))
      {
        // fr.textbox1 is a textbox form1 and 
        // textbox1.text is a textbox of the form1
        fr.textBox1.SelectionStart =
           int.Parse( textBox1.Text) ;
        fr.textBox1.ScrollToCaret();
        break;
      }
  }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T21:16:24.263

该`TextBox.GetFirstCharIndexFromLine`方法查找行的第一个字符的索引。所以你的选择从那里开始。然后找到那行的结尾，也就是`Environment.NewLine`文本的结尾。由于行号是由用户输入的，因此您应该使用它`int.TryParse`来处理无效输入。

```
private void button1_Click(object sender, EventArgs e)
{
    int lineNumber;
    if (!int.TryParse(textBox2.Text, out lineNumber) || lineNumber < 0)
    {
        textBox1.Select(0, 0);
        return;
    }

    int position = textBox1.GetFirstCharIndexFromLine(lineNumber);
    if (position < 0)
    {
        // lineNumber is too big
        textBox1.Select(textBox1.Text.Length, 0);
    }
    else
    {
        int lineEnd = textBox1.Text.IndexOf(Environment.NewLine, position);
        if (lineEnd < 0)
        {
            lineEnd = textBox1.Text.Length;
        }

        textBox1.Select(position, lineEnd - position);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:10:53.260

将此逻辑应用于您的代码，并根据需要重新编码。

```
private void button1_Click(object sender, EventArgs e)
            {
                if (textBox_Form1.Text.Contains(textBox_Form2.Text))
                {
                    textBox_Form1.Focus();
                    textBox_Form1.SelectionStart = textBox_Form1.Text.IndexOf(textBox_Form2.Text);
                    textBox_Form1.SelectionLength = textBox_Form2.Text.Length;
                }
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:24:12.830

尝试类似的东西；

```
int lineNumber = Form1.ab;

// split the contents of the text box
string text = textBox1.Text;
string[] lines = text.Split(new string[] { Environment.NewLine }, StringSplitOptions.None);
if (lineNumber < 0 || lineNumber > lines.Length)
{
    MessageBox.Show("The line number is does not exist");
    return;
}

// get the character pos
int selStart = 0;
for (int i = 0; i < (lineNumber - 1); i++)
{
    selStart += lines[i].Length + Environment.NewLine.Length;
}
textBox1.Focus();
textBox1.SelectionStart = selStart;
textBox1.SelectionLength = lines[lineNumber - 1].Length; 
```

注意：您可以直接在另一个表单中访问另一个文本框，方法是转到 Form2 设计器，单击文本框并转到属性。在“属性”对话框中，查找名为 Modifiers 的属性并将值更改为`internal`或`public`。这将允许您像这样直接访问其他形式的文本框值；

```
private void Form1_Load(object sender, EventArgs e)
{
    Form2 form2Instance = new Form2();
    string sampleText = form2Instance.textBox1.Text;
} 
```

如果您需要了解有关如何访问其他表单上的控件/详细信息的更多示例，请告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T11:29:29.030

您正在创建一个新表单1，其中文本框可能为空白，并在该空表单上调用 GetPass()。您需要一个已经打开的 form1 的实例，其中文本框可能有一个值。了解更多信息

[点击这里](https://stackoverflow.com/questions/10808314/how-to-get-value-from-a-textbox)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-13T12:15:21.477

试试下面的代码

```
var sdr = (System.Windows.Controls.TextBox) sender;
if (!string.IsNullOrEmpty(sdr.Text)) {
  var start = sdr.Text.LastIndexOf(Environment.NewLine, sdr.CaretIndex);
  var lineIdx = sdr.GetLineIndexFromCharacterIndex(sdr.CaretIndex);
  var lineLength = sdr.GetLineLength(lineIdx);

  sdr.SelectionStart = start + 1;
  sdr.SelectionLength = lineLength;

  sdr.SelectedText.Substring(0, sdr.SelectedText.IndexOf(Environment.NewLine) + 1);
  Clipboard.SetText(sdr.SelectedText);

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-16T17:44:50.487

也许这更好：

```
{
    ...
    string SelectedText = fr.textBox1.Lines[line];
    int SelectedTextPos = fr.textBox1.Text.IndexOf(SelectedText);
    int SelectedTextLen = SelectedText.Lenght;

    fr.textBox1.Select(SelectedTextPos, SelectedTextLen);
    fr.textBox1.ScrollToCaret();
    ...
} 
```

# asp.net-mvc - 对象的 JSON 集合未正确绑定

> ID：15122092
> 
> 赞同：1
> 
> 时间：2013-02-27T20:49:04.597
> 
> 标签：asp.net-mvc, json, jquery, serialization

我有一个网站，我通过 AJAX（Telerik 控件）将 Excel 文档上传到服务器。上传文档后，它将返回一个 JSON 对象集合的货币汇率。然后我使用 jQuery $.data() 方法保存该集合。然后我调用网格来绑定并将我的 JSON 对象传递给我的控制器以将数据绑定到网格。一切似乎都在工作到控制器上的 Action 绑定到集合的地步。

我错过了什么，请注意*SelectImportedCurrencyRates 的响应*如何返回日期的“1/1/1”，国家代码为“null”，汇率为“0”。当我调试并检查绑定对象`ICollection<CurrencyExchangeRate> currencyRatesImported`时，它与这些值绑定为“0”、“1/1/1”和 null

**控制器**

```
 [HttpPost]
    public ActionResult UploadRates(HttpPostedFileBase importRateDocument)
    {
        var rates = CurrencyExchangeRateRepository.ReadExcelRates(importRateDocument.InputStream, importRateDocument.FileName);
        return Json(rates);
    }

    [HttpPost]
    [GridAction]
    public ActionResult SelectImportedCurrencyRates([Bind(Prefix = "CurrencyRatesImported")] ICollection<CurrencyExchangeRate> currencyRatesImported)
    {
        return View(currencyRatesImported != null ? 
            new GridModel(currencyRatesImported) : 
           new GridModel(new List<CurrencyExchangeRate>()));
    } 
```

**Javascript**

```
<script type="text/javascript">
function onUploadRatesSuccess(e) {
    $('body').data('CurrencyRatesImported', e.response);

    var grid = $('#CurrencyExchangeRates').data('tGrid');
    grid.ajaxRequest();
}

function onCurrencyRatesImportedDataBinding(args) {
    var currencyRatesImported = $('body').data('CurrencyRatesImported');
    console.log(currencyRatesImported);
    args.data = $.extend(args.data, { CurrencyRatesImported: currencyRatesImported });

    args.data = args.data;
} 
```

**e. 传递给 onUploadRatesSuccess 的响应（来自 ActionResult UploadRates()**

```
[{"CountryCode":"CAD","Date":"\/Date(1325656800000)\/","ExchangeRate":1.0145},{"CountryCode":"CAD","Date":"\/Date(1325743200000)\/","ExchangeRate":1.0212},{"CountryCode":"CAD","Date":"\/Date(1325829600000)\/","ExchangeRate":1.0241},{"CountryCode":"CAD","Date":"\/Date(1326088800000)\/","ExchangeRate":1.0265},{"CountryCode":"CAD","Date":"\/Date(1326175200000)\/","ExchangeRate":1.0187},{"CountryCode":"CAD","Date":"\/Date(1326261600000)\/","ExchangeRate":1.0209},{"CountryCode":"CAD","Date":"\/Date(1326348000000)\/","ExchangeRate":1.0207},{"CountryCode":"CAD","Date":"\/Date(1326434400000)\/","ExchangeRate":1.0245},{"CountryCode":"CAD","Date":"\/Date(1326693600000)\/","ExchangeRate":1.0182},{"CountryCode":"CAD","Date":"\/Date(1326780000000)\/","ExchangeRate":1.0143},{"CountryCode":"CAD","Date":"\/Date(1326866400000)\/","ExchangeRate":1.0139},{"CountryCode":"CAD","Date":"\/Date(1326952800000)\/","ExchangeRate":1.0091},{"CountryCode":"CAD","Date":"\/Date(1327039200000)\/","ExchangeRate":1.014},{"CountryCode":"CAD","Date":"\/Date(1327298400000)\/","ExchangeRate":1.0066},{"CountryCode":"CAD","Date":"\/Date(1327384800000)\/","ExchangeRate":1.0108},{"CountryCode":"CAD","Date":"\/Date(1327471200000)\/","ExchangeRate":1.0121},{"CountryCode":"CAD","Date":"\/Date(1327557600000)\/","ExchangeRate":0.9997},{"CountryCode":"CAD","Date":"\/Date(1327644000000)\/","ExchangeRate":1.0015},{"CountryCode":"CAD","Date":"\/Date(1327903200000)\/","ExchangeRate":1.0046},{"CountryCode":"CAD","Date":"\/Date(1328162400000)\/","ExchangeRate":0.9978},{"CountryCode":"CAD","Date":"\/Date(1328248800000)\/","ExchangeRate":0.9986},{"CountryCode":"CAD","Date":"\/Date(1328508000000)\/","ExchangeRate":0.9957},{"CountryCode":"CAD","Date":"\/Date(1328594400000)\/","ExchangeRate":0.9949},{"CountryCode":"CAD","Date":"\/Date(1328680800000)\/","ExchangeRate":0.9953},{"CountryCode":"CAD","Date":"\/Date(1328767200000)\/","ExchangeRate":0.994},{"CountryCode":"CAD","Date":"\/Date(1328853600000)\/","ExchangeRate":0.9956},{"CountryCode":"CAD","Date":"\/Date(1329112800000)\/","ExchangeRate":0.9998},{"CountryCode":"CAD","Date":"\/Date(1329199200000)\/","ExchangeRate":1.0007},{"CountryCode":"CAD","Date":"\/Date(1329285600000)\/","ExchangeRate":0.9976},{"CountryCode":"CAD","Date":"\/Date(1329372000000)\/","ExchangeRate":1.0003},{"CountryCode":"CAD","Date":"\/Date(1329458400000)\/","ExchangeRate":0.9969},{"CountryCode":"CAD","Date":"\/Date(1329717600000)\/","ExchangeRate":0.9924},{"CountryCode":"CAD","Date":"\/Date(1329804000000)\/","ExchangeRate":0.9957},{"CountryCode":"CAD","Date":"\/Date(1329890400000)\/","ExchangeRate":0.9996},{"CountryCode":"CAD","Date":"\/Date(1329976800000)\/","ExchangeRate":0.9973},{"CountryCode":"CAD","Date":"\/Date(1330063200000)\/","ExchangeRate":0.9987},{"CountryCode":"CAD","Date":"\/Date(1330322400000)\/","ExchangeRate":1.0002},{"CountryCode":"CAD","Date":"\/Date(1330408800000)\/","ExchangeRate":0.9958},{"CountryCode":"CAD","Date":"\/Date(1330581600000)\/","ExchangeRate":0.9958},{"CountryCode":"CAD","Date":"\/Date(1330668000000)\/","ExchangeRate":0.9878},{"CountryCode":"CAD","Date":"\/Date(1330927200000)\/","ExchangeRate":0.9937},{"CountryCode":"CAD","Date":"\/Date(1331013600000)\/","ExchangeRate":1.0017},{"CountryCode":"CAD","Date":"\/Date(1331100000000)\/","ExchangeRate":1.0023},{"CountryCode":"CAD","Date":"\/Date(1331186400000)\/","ExchangeRate":0.9934},{"CountryCode":"CAD","Date":"\/Date(1331272800000)\/","ExchangeRate":0.9889},{"CountryCode":"CAD","Date":"\/Date(1331528400000)\/","ExchangeRate":0.9935},{"CountryCode":"CAD","Date":"\/Date(1331614800000)\/","ExchangeRate":0.9906},{"CountryCode":"CAD","Date":"\/Date(1331701200000)\/","ExchangeRate":0.9915},{"CountryCode":"CAD","Date":"\/Date(1331787600000)\/","ExchangeRate":0.9929},{"CountryCode":"CAD","Date":"\/Date(1331874000000)\/","ExchangeRate":0.9913},{"CountryCode":"CAD","Date":"\/Date(1332133200000)\/","ExchangeRate":0.988},{"CountryCode":"CAD","Date":"\/Date(1332219600000)\/","ExchangeRate":0.9934},{"CountryCode":"CAD","Date":"\/Date(1332306000000)\/","ExchangeRate":0.9931},{"CountryCode":"CAD","Date":"\/Date(1332392400000)\/","ExchangeRate":1.0003},{"CountryCode":"CAD","Date":"\/Date(1332478800000)\/","ExchangeRate":0.9984},{"CountryCode":"CAD","Date":"\/Date(1332738000000)\/","ExchangeRate":0.9915},{"CountryCode":"CAD","Date":"\/Date(1332824400000)\/","ExchangeRate":0.9925},{"CountryCode":"CAD","Date":"\/Date(1332910800000)\/","ExchangeRate":0.9965},{"CountryCode":"CAD","Date":"\/Date(1332997200000)\/","ExchangeRate":0.9992},{"CountryCode":"CAD","Date":"\/Date(1333429200000)\/","ExchangeRate":0.9896},{"CountryCode":"CAD","Date":"\/Date(1333515600000)\/","ExchangeRate":0.9971},{"CountryCode":"CAD","Date":"\/Date(1333602000000)\/","ExchangeRate":0.99385},{"CountryCode":"CAD","Date":"\/Date(1333688400000)\/","ExchangeRate":0.99565},{"CountryCode":"CAD","Date":"\/Date(1333947600000)\/","ExchangeRate":0.99761},{"CountryCode":"CAD","Date":"\/Date(1334034000000)\/","ExchangeRate":1.0027},{"CountryCode":"CAD","Date":"\/Date(1334120400000)\/","ExchangeRate":1.002},{"CountryCode":"CAD","Date":"\/Date(1334206800000)\/","ExchangeRate":0.9966},{"CountryCode":"CAD","Date":"\/Date(1334293200000)\/","ExchangeRate":0.9975},{"CountryCode":"CAD","Date":"\/Date(1334552400000)\/","ExchangeRate":1.0016},{"CountryCode":"CAD","Date":"\/Date(1334638800000)\/","ExchangeRate":0.9876},{"CountryCode":"CAD","Date":"\/Date(1334725200000)\/","ExchangeRate":0.9958},{"CountryCode":"CAD","Date":"\/Date(1334811600000)\/","ExchangeRate":0.99},{"CountryCode":"CAD","Date":"\/Date(1334898000000)\/","ExchangeRate":0.9909},{"CountryCode":"CAD","Date":"\/Date(1335157200000)\/","ExchangeRate":0.995},{"CountryCode":"CAD","Date":"\/Date(1335243600000)\/","ExchangeRate":0.9885},{"CountryCode":"CAD","Date":"\/Date(1335330000000)\/","ExchangeRate":0.9853},{"CountryCode":"CAD","Date":"\/Date(1335416400000)\/","ExchangeRate":0.9841},{"CountryCode":"CAD","Date":"\/Date(1335502800000)\/","ExchangeRate":0.981},{"CountryCode":"CAD","Date":"\/Date(1335848400000)\/","ExchangeRate":0.981},{"CountryCode":"CAD","Date":"\/Date(1335934800000)\/","ExchangeRate":0.9891},{"CountryCode":"CAD","Date":"\/Date(1336021200000)\/","ExchangeRate":0.9867},{"CountryCode":"CAD","Date":"\/Date(1336107600000)\/","ExchangeRate":0.9863},{"CountryCode":"CAD","Date":"\/Date(1336366800000)\/","ExchangeRate":0.99636},{"CountryCode":"CAD","Date":"\/Date(1336453200000)\/","ExchangeRate":0.996},{"CountryCode":"CAD","Date":"\/Date(1336539600000)\/","ExchangeRate":1.0044},{"CountryCode":"CAD","Date":"\/Date(1336626000000)\/","ExchangeRate":1.0022},{"CountryCode":"CAD","Date":"\/Date(1336712400000)\/","ExchangeRate":0.9968},{"CountryCode":"CAD","Date":"\/Date(1336971600000)\/","ExchangeRate":1.0024},{"CountryCode":"CAD","Date":"\/Date(1337058000000)\/","ExchangeRate":1.0038},{"CountryCode":"CAD","Date":"\/Date(1337144400000)\/","ExchangeRate":1.0088},{"CountryCode":"CAD","Date":"\/Date(1337230800000)\/","ExchangeRate":1.0163},{"CountryCode":"CAD","Date":"\/Date(1337317200000)\/","ExchangeRate":1.0179},{"CountryCode":"CAD","Date":"\/Date(1337576400000)\/","ExchangeRate":1.0218},{"CountryCode":"CAD","Date":"\/Date(1337662800000)\/","ExchangeRate":1.0172},{"CountryCode":"CAD","Date":"\/Date(1337749200000)\/","ExchangeRate":1.0283},{"CountryCode":"CAD","Date":"\/Date(1337835600000)\/","ExchangeRate":1.0262},{"CountryCode":"CAD","Date":"\/Date(1337922000000)\/","ExchangeRate":1.0289},{"CountryCode":"CAD","Date":"\/Date(1338181200000)\/","ExchangeRate":1.0253},{"CountryCode":"CAD","Date":"\/Date(1338267600000)\/","ExchangeRate":1.0222},{"CountryCode":"CAD","Date":"\/Date(1338354000000)\/","ExchangeRate":1.0297},{"CountryCode":"CAD","Date":"\/Date(1338526800000)\/","ExchangeRate":1.0297},{"CountryCode":"CAD","Date":"\/Date(1338786000000)\/","ExchangeRate":1.04141},{"CountryCode":"CAD","Date":"\/Date(1338872400000)\/","ExchangeRate":1.04154},{"CountryCode":"CAD","Date":"\/Date(1338958800000)\/","ExchangeRate":1.0333},{"CountryCode":"CAD","Date":"\/Date(1339045200000)\/","ExchangeRate":1.0242},{"CountryCode":"CAD","Date":"\/Date(1339131600000)\/","ExchangeRate":1.0314},{"CountryCode":"CAD","Date":"\/Date(1339390800000)\/","ExchangeRate":1.0289},{"CountryCode":"CAD","Date":"\/Date(1339477200000)\/","ExchangeRate":1.0293},{"CountryCode":"CAD","Date":"\/Date(1339563600000)\/","ExchangeRate":1.025},{"CountryCode":"CAD","Date":"\/Date(1339650000000)\/","ExchangeRate":1.0252},{"CountryCode":"CAD","Date":"\/Date(1339736400000)\/","ExchangeRate":1.0236},{"CountryCode":"CAD","Date":"\/Date(1339995600000)\/","ExchangeRate":1.0254},{"CountryCode":"CAD","Date":"\/Date(1340082000000)\/","ExchangeRate":1.018},{"CountryCode":"CAD","Date":"\/Date(1340168400000)\/","ExchangeRate":1.0202},{"CountryCode":"CAD","Date":"\/Date(1340254800000)\/","ExchangeRate":1.0231},{"CountryCode":"CAD","Date":"\/Date(1340341200000)\/","ExchangeRate":1.0272},{"CountryCode":"CAD","Date":"\/Date(1340600400000)\/","ExchangeRate":1.0304},{"CountryCode":"CAD","Date":"\/Date(1340773200000)\/","ExchangeRate":1.0283},{"CountryCode":"CAD","Date":"\/Date(1340859600000)\/","ExchangeRate":1.0339},{"CountryCode":"CAD","Date":"\/Date(1341205200000)\/","ExchangeRate":1.0261},{"CountryCode":"CAD","Date":"\/Date(1341291600000)\/","ExchangeRate":1.0132},{"CountryCode":"CAD","Date":"\/Date(1341378000000)\/","ExchangeRate":1.0126},{"CountryCode":"CAD","Date":"\/Date(1341464400000)\/","ExchangeRate":1.0139},{"CountryCode":"CAD","Date":"\/Date(1341550800000)\/","ExchangeRate":1.0188},{"CountryCode":"CAD","Date":"\/Date(1341810000000)\/","ExchangeRate":1.0199},{"CountryCode":"CAD","Date":"\/Date(1341896400000)\/","ExchangeRate":1.0209},{"CountryCode":"CAD","Date":"\/Date(1341982800000)\/","ExchangeRate":1.0206},{"CountryCode":"CAD","Date":"\/Date(1342069200000)\/","ExchangeRate":1.0248},{"CountryCode":"CAD","Date":"\/Date(1342155600000)\/","ExchangeRate":1.014},{"CountryCode":"CAD","Date":"\/Date(1342414800000)\/","ExchangeRate":1.0159},{"CountryCode":"CAD","Date":"\/Date(1342501200000)\/","ExchangeRate":1.0166},{"CountryCode":"CAD","Date":"\/Date(1342587600000)\/","ExchangeRate":1.0109},{"CountryCode":"CAD","Date":"\/Date(1342674000000)\/","ExchangeRate":1.0073},{"CountryCode":"CAD","Date":"\/Date(1342760400000)\/","ExchangeRate":1.0102},{"CountryCode":"CAD","Date":"\/Date(1343019600000)\/","ExchangeRate":1.0176},{"CountryCode":"CAD","Date":"\/Date(1343106000000)\/","ExchangeRate":1.0198},{"CountryCode":"CAD","Date":"\/Date(1343192400000)\/","ExchangeRate":1.0195},{"CountryCode":"CAD","Date":"\/Date(1343278800000)\/","ExchangeRate":1.0097},{"CountryCode":"CAD","Date":"\/Date(1343365200000)\/","ExchangeRate":1.0058},{"CountryCode":"CAD","Date":"\/Date(1343624400000)\/","ExchangeRate":1.0027},{"CountryCode":"CAD","Date":"\/Date(1343797200000)\/","ExchangeRate":1.0027},{"CountryCode":"CAD","Date":"\/Date(1343883600000)\/","ExchangeRate":1.0041},{"CountryCode":"CAD","Date":"\/Date(1343970000000)\/","ExchangeRate":0.9997},{"CountryCode":"CAD","Date":"\/Date(1344229200000)\/","ExchangeRate":0.9995},{"CountryCode":"CAD","Date":"\/Date(1344315600000)\/","ExchangeRate":0.9967},{"CountryCode":"CAD","Date":"\/Date(1344402000000)\/","ExchangeRate":0.995},{"CountryCode":"CAD","Date":"\/Date(1344488400000)\/","ExchangeRate":0.9917},{"CountryCode":"CAD","Date":"\/Date(1344574800000)\/","ExchangeRate":0.991},{"CountryCode":"CAD","Date":"\/Date(1344834000000)\/","ExchangeRate":0.9932},{"CountryCode":"CAD","Date":"\/Date(1344920400000)\/","ExchangeRate":0.9919},{"CountryCode":"CAD","Date":"\/Date(1345006800000)\/","ExchangeRate":0.9897},{"CountryCode":"CAD","Date":"\/Date(1345093200000)\/","ExchangeRate":0.9883},{"CountryCode":"CAD","Date":"\/Date(1345179600000)\/","ExchangeRate":0.9882},{"CountryCode":"CAD","Date":"\/Date(1345438800000)\/","ExchangeRate":0.9894},{"CountryCode":"CAD","Date":"\/Date(1345525200000)\/","ExchangeRate":0.9855},{"CountryCode":"CAD","Date":"\/Date(1345611600000)\/","ExchangeRate":0.993},{"CountryCode":"CAD","Date":"\/Date(1345698000000)\/","ExchangeRate":0.9916},{"CountryCode":"CAD","Date":"\/Date(1345784400000)\/","ExchangeRate":0.99121},{"CountryCode":"CAD","Date":"\/Date(1346043600000)\/","ExchangeRate":0.99234},{"CountryCode":"CAD","Date":"\/Date(1346130000000)\/","ExchangeRate":0.9855},{"CountryCode":"CAD","Date":"\/Date(1346216400000)\/","ExchangeRate":0.9885},{"CountryCode":"CAD","Date":"\/Date(1346302800000)\/","ExchangeRate":0.9923},{"CountryCode":"CAD","Date":"\/Date(1346648400000)\/","ExchangeRate":0.9923},{"CountryCode":"CAD","Date":"\/Date(1346734800000)\/","ExchangeRate":0.9865},{"CountryCode":"CAD","Date":"\/Date(1346821200000)\/","ExchangeRate":0.9917},{"CountryCode":"CAD","Date":"\/Date(1346907600000)\/","ExchangeRate":0.9819},{"CountryCode":"CAD","Date":"\/Date(1346994000000)\/","ExchangeRate":0.9771},{"CountryCode":"CAD","Date":"\/Date(1347253200000)\/","ExchangeRate":0.9757},{"CountryCode":"CAD","Date":"\/Date(1347339600000)\/","ExchangeRate":0.9727},{"CountryCode":"CAD","Date":"\/Date(1347426000000)\/","ExchangeRate":0.9751},{"CountryCode":"CAD","Date":"\/Date(1347512400000)\/","ExchangeRate":0.9751},{"CountryCode":"CAD","Date":"\/Date(1347598800000)\/","ExchangeRate":0.9687},{"CountryCode":"CAD","Date":"\/Date(1347858000000)\/","ExchangeRate":0.9719},{"CountryCode":"CAD","Date":"\/Date(1347944400000)\/","ExchangeRate":0.9743},{"CountryCode":"CAD","Date":"\/Date(1348030800000)\/","ExchangeRate":0.9761},{"CountryCode":"CAD","Date":"\/Date(1348117200000)\/","ExchangeRate":0.9777},{"CountryCode":"CAD","Date":"\/Date(1348203600000)\/","ExchangeRate":0.9763},{"CountryCode":"CAD","Date":"\/Date(1348462800000)\/","ExchangeRate":0.9795},{"CountryCode":"CAD","Date":"\/Date(1348549200000)\/","ExchangeRate":0.9769},{"CountryCode":"CAD","Date":"\/Date(1348635600000)\/","ExchangeRate":0.9855},{"CountryCode":"CAD","Date":"\/Date(1348722000000)\/","ExchangeRate":0.984},{"CountryCode":"CAD","Date":"\/Date(1349067600000)\/","ExchangeRate":0},{"CountryCode":"CAD","Date":"\/Date(1349154000000)\/","ExchangeRate":0.9832},{"CountryCode":"CAD","Date":"\/Date(1349240400000)\/","ExchangeRate":0.988},{"CountryCode":"CAD","Date":"\/Date(1349326800000)\/","ExchangeRate":0.9816},{"CountryCode":"CAD","Date":"\/Date(1349413200000)\/","ExchangeRate":0.9756},{"CountryCode":"CAD","Date":"\/Date(1349672400000)\/","ExchangeRate":0.9761},{"CountryCode":"CAD","Date":"\/Date(1349758800000)\/","ExchangeRate":0.9783},{"CountryCode":"CAD","Date":"\/Date(1349845200000)\/","ExchangeRate":0.9787},{"CountryCode":"CAD","Date":"\/Date(1349931600000)\/","ExchangeRate":0.977},{"CountryCode":"CAD","Date":"\/Date(1350018000000)\/","ExchangeRate":0.9801},{"CountryCode":"CAD","Date":"\/Date(1350277200000)\/","ExchangeRate":0.9805},{"CountryCode":"CAD","Date":"\/Date(1350363600000)\/","ExchangeRate":0.9861},{"CountryCode":"CAD","Date":"\/Date(1350450000000)\/","ExchangeRate":0.9818},{"CountryCode":"CAD","Date":"\/Date(1350536400000)\/","ExchangeRate":0.9823},{"CountryCode":"CAD","Date":"\/Date(1350622800000)\/","ExchangeRate":0.991},{"CountryCode":"CAD","Date":"\/Date(1350882000000)\/","ExchangeRate":0.9933},{"CountryCode":"CAD","Date":"\/Date(1350968400000)\/","ExchangeRate":0.9926},{"CountryCode":"CAD","Date":"\/Date(1351054800000)\/","ExchangeRate":0.9916},{"CountryCode":"CAD","Date":"\/Date(1351141200000)\/","ExchangeRate":0.9938},{"CountryCode":"CAD","Date":"\/Date(1351227600000)\/","ExchangeRate":0.9976},{"CountryCode":"CAD","Date":"\/Date(1351486800000)\/","ExchangeRate":1.0004},{"CountryCode":"CAD","Date":"\/Date(1351573200000)\/","ExchangeRate":0.9993},{"CountryCode":"CAD","Date":"\/Date(1351746000000)\/","ExchangeRate":0.9993},{"CountryCode":"CAD","Date":"\/Date(1351832400000)\/","ExchangeRate":0.99925},{"CountryCode":"CAD","Date":"\/Date(1352095200000)\/","ExchangeRate":0.9966},{"CountryCode":"CAD","Date":"\/Date(1352181600000)\/","ExchangeRate":0.9948},{"CountryCode":"CAD","Date":"\/Date(1352268000000)\/","ExchangeRate":0.9959},{"CountryCode":"CAD","Date":"\/Date(1352354400000)\/","ExchangeRate":0.9979},{"CountryCode":"CAD","Date":"\/Date(1352440800000)\/","ExchangeRate":1.0017},{"CountryCode":"CAD","Date":"\/Date(1352700000000)\/","ExchangeRate":1.0004},{"CountryCode":"CAD","Date":"\/Date(1352786400000)\/","ExchangeRate":1.0013},{"CountryCode":"CAD","Date":"\/Date(1352872800000)\/","ExchangeRate":1.0032},{"CountryCode":"CAD","Date":"\/Date(1352959200000)\/","ExchangeRate":1.0027},{"CountryCode":"CAD","Date":"\/Date(1353045600000)\/","ExchangeRate":1.0034},{"CountryCode":"CAD","Date":"\/Date(1353304800000)\/","ExchangeRate":0.9956},{"CountryCode":"CAD","Date":"\/Date(1353391200000)\/","ExchangeRate":0.9979},{"CountryCode":"CAD","Date":"\/Date(1353477600000)\/","ExchangeRate":0.9977},{"CountryCode":"CAD","Date":"\/Date(1353564000000)\/","ExchangeRate":0.9981},{"CountryCode":"CAD","Date":"\/Date(1353650400000)\/","ExchangeRate":0.9928},{"CountryCode":"CAD","Date":"\/Date(1353909600000)\/","ExchangeRate":0.9951},{"CountryCode":"CAD","Date":"\/Date(1353996000000)\/","ExchangeRate":0.9943},{"CountryCode":"CAD","Date":"\/Date(1354082400000)\/","ExchangeRate":0.9936},{"CountryCode":"CAD","Date":"\/Date(1354168800000)\/","ExchangeRate":0.9917},{"CountryCode":"CAD","Date":"\/Date(1354514400000)\/","ExchangeRate":0.9917},{"CountryCode":"CAD","Date":"\/Date(1354600800000)\/","ExchangeRate":0.9927},{"CountryCode":"CAD","Date":"\/Date(1354687200000)\/","ExchangeRate":0.9929},{"CountryCode":"CAD","Date":"\/Date(1354773600000)\/","ExchangeRate":0.9895},{"CountryCode":"CAD","Date":"\/Date(1354860000000)\/","ExchangeRate":0.9887},{"CountryCode":"CAD","Date":"\/Date(1355119200000)\/","ExchangeRate":0.9872},{"CountryCode":"CAD","Date":"\/Date(1355205600000)\/","ExchangeRate":0.9868},{"CountryCode":"CAD","Date":"\/Date(1355292000000)\/","ExchangeRate":0.9852},{"CountryCode":"CAD","Date":"\/Date(1355378400000)\/","ExchangeRate":0.9841},{"CountryCode":"CAD","Date":"\/Date(1355464800000)\/","ExchangeRate":0.9866},{"CountryCode":"CAD","Date":"\/Date(1355724000000)\/","ExchangeRate":0.9844},{"CountryCode":"CAD","Date":"\/Date(1355810400000)\/","ExchangeRate":0.9846},{"CountryCode":"CAD","Date":"\/Date(1355896800000)\/","ExchangeRate":0.9869},{"CountryCode":"CAD","Date":"\/Date(1355983200000)\/","ExchangeRate":0.9887},{"CountryCode":"CAD","Date":"\/Date(1356069600000)\/","ExchangeRate":0.9947},{"CountryCode":"CAD","Date":"\/Date(1356328800000)\/","ExchangeRate":0.99358},{"CountryCode":"CAD","Date":"\/Date(1356415200000)\/","ExchangeRate":0.99304},{"CountryCode":"CAD","Date":"\/Date(1356501600000)\/","ExchangeRate":0.99125},{"CountryCode":"CAD","Date":"\/Date(1356588000000)\/","ExchangeRate":0.9936},{"CountryCode":"CAD","Date":"\/Date(1356674400000)\/","ExchangeRate":0.9956},{"CountryCode":"CAD","Date":"\/Date(1357106400000)\/","ExchangeRate":0.9837},{"CountryCode":"CAD","Date":"\/Date(1357192800000)\/","ExchangeRate":0.9851},{"CountryCode":"CAD","Date":"\/Date(1357279200000)\/","ExchangeRate":0.9857},{"CountryCode":"CAD","Date":"\/Date(1357538400000)\/","ExchangeRate":0.9859},{"CountryCode":"CAD","Date":"\/Date(1357624800000)\/","ExchangeRate":0.9871},{"CountryCode":"CAD","Date":"\/Date(1357711200000)\/","ExchangeRate":0.9874},{"CountryCode":"CAD","Date":"\/Date(1357797600000)\/","ExchangeRate":0.9866},{"CountryCode":"CAD","Date":"\/Date(1357884000000)\/","ExchangeRate":0.9837},{"CountryCode":"CAD","Date":"\/Date(1358143200000)\/","ExchangeRate":0.9857},{"CountryCode":"CAD","Date":"\/Date(1358229600000)\/","ExchangeRate":0.9837},{"CountryCode":"CAD","Date":"\/Date(1358316000000)\/","ExchangeRate":0.9858},{"CountryCode":"CAD","Date":"\/Date(1358402400000)\/","ExchangeRate":0.9854},{"CountryCode":"CAD","Date":"\/Date(1358488800000)\/","ExchangeRate":0.9938},{"CountryCode":"CAD","Date":"\/Date(1358748000000)\/","ExchangeRate":0.9939},{"CountryCode":"CAD","Date":"\/Date(1358834400000)\/","ExchangeRate":0.9935},{"CountryCode":"CAD","Date":"\/Date(1358920800000)\/","ExchangeRate":0.9986},{"CountryCode":"CAD","Date":"\/Date(1359007200000)\/","ExchangeRate":1.0032},{"CountryCode":"CAD","Date":"\/Date(1359093600000)\/","ExchangeRate":1.0087},{"CountryCode":"CAD","Date":"\/Date(1359352800000)\/","ExchangeRate":1.0092},{"CountryCode":"CAD","Date":"\/Date(1359439200000)\/","ExchangeRate":1.0042},{"CountryCode":"CAD","Date":"\/Date(1359525600000)\/","ExchangeRate":1.0029}] 
```

**绑定调用 SelectImportedCurrencyRates** ![绑定调用 SelectImportedCurrencyRates'](../Images/d86bc793878c25e94a38c28b17f3ce08.png)

**来自 SelectImportedCurrencyRates 的响应** ![在此处输入图像描述](../Images/b6cd042d44b049bd560722f585e31646.png)

**CurrencyExchangeRate 类**

```
[Serializable()]
public class CurrencyExchangeRate
{

    public string CountryCode
    {
        get;
        set;
    }

    public System.DateTime Date
    {
        get;
        set;
    }

    public double ExchangeRate
    {
        get;
        set;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:19:30.200

问题在于我发送的集合的序列化。它传递的是一个数组，而不是一个序列化的 JSON 对象。

这是序列化方法的外观。

```
function serialize(prefix, data) {
    var result = {},
        dateRegex = /^\/Date\((.*?)\)\/$/;
    for (var i = 0; i < data.length; i++) {
        for (var field in data[i]) {
            var value = data[i][field];
            if (typeof value === "string") {
                var date = dateRegex.exec(value);
                if (date) {
                    value = $.telerik.formatString("{0:d}", new Date(parseInt(date[1])));
                }
            }
            result[prefix + "[" + i + "]." + field] = value;
        }
    }

    return result;
} 
```

因此，当我调用**onCurrencyRatesImportedDataBinding**时，它将序列化我的货币汇率对象并正确传递它们。

```
function onCurrencyRatesImportedDataBinding(args) {
    var currencyRatesImported = $('body').data('CurrencyRatesImported');
    console.log(currencyRatesImported);
    args.data = $.extend(args.data, serialize("currencyExchangeRates", currencyRatesImported));

    args.data = args.data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:13:29.683

我认为问题在于通过网络发送的日期格式。

不幸的是`DefaultModelBinder`，MVC 中的不知道如何绑定这些日期。

您需要扩展`DefaultModelBinder`. 参见例如

*   [http://taintedsanctity.tumblr.com/post/6425063095/asp-mvc-model-binding-json-dates-serialized-in](http://taintedsanctity.tumblr.com/post/6425063095/asp-mvc-model-binding-json-dates-serialized-in)
*   [https://stackoverflow.com/a/7849322/206297](https://stackoverflow.com/a/7849322/206297)

# php - php搜索发布的文件

> ID：15122093
> 
> 赞同：-1
> 
> 时间：2013-02-27T20:49:05.660
> 
> 标签：php, file-io, search-engine, displayobject

我的脚本在类别中搜索文件，然后必须显示该文件。示例：X 用户正在 PCgames 类别中搜索 Y 游戏。X 用户按下“搜索”按钮后，脚本必须显示在类别中找到的所有文件。但我在脚本 search.php 文件中有一些问题：

```
<html>
<body>
<center>
<font color="black" size="4">
<?php
//define each directory here, the index starts with 0 == all and so on.
$categorydir = array('/Category/All/', '/Category/PCGames/', '/Category/Console/', '/Category/Movies/', '/Category/Music/', '/Category/XXX/', '/Category/Windows/', '/Category/Linux/', '/Category/Software/', '/Category/Documents/');
//if option selected and its valid number
if (isset($_POST['category']))
 if(ctype_digit($_POST['category']) && isset($categorydir[$_POST['category']]))
if(array_key_exists($_POST['category'], $categorydir) && is_dir($categorydir[$_POST['category']])) //LINE 13
  $handle = opendir($categorydir[$_POST['category']]); //LINE 14
is_dir($categorydir[$_POST['category']]);
  $files = scandir($categorydir[$_POST['category']]);
  echo 'target directory not found';
echo 'Results of search:<br></br>';
foreach($files as $file){ //LINE 17
  echo($file);
}
?>
</font>
</center>
</body>
</html>
<html>
<head>
<title>DataHunters</title>
<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
<div id="header">
<h1 id="logo"><a href="index.html">DataHunters</a>
</h1>
</div>
<div id="navigation">
<ul>
<li><a class="active" href="index.html">Home</li></a>
<li><a href="chat.html">Chat</li></a>
<li><a href="contact.html">Contact</li></a>
<li><a href="http://www.forum.datahunters.ro">Forum</li></a>
</ul>
</li>
</div>
</body>
</html> 
```

脚本给了我下一个错误：

> 注意：未定义索引：第 13 行 C:\xampp\htdocs\search.php 中的类别
> 
> 注意：未定义的索引：在第 13 行的 C:\xampp\htdocs\search.php
> 
> 注意：未定义的索引：第 14 行 C:\xampp\htdocs\search.php 中的类别
> 
> 注意：未定义的索引：在第 14 行的 C:\xampp\htdocs\search.php
> 
> 警告：scandir()：目录名称不能为空 C:\xampp\htdocs\search.php 中第 14 行目标目录未找到搜索结果：
> 
> 警告：第 17 行 C:\xampp\htdocs\search.php 中为 foreach() 提供的参数无效

一些帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:56:53.223

您的类别似乎没有定义。您需要一个表单来创建类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:57:59.243

将条件部分括在花括号 {} 中，如下所示：

```
if (isset($_POST['category'])) {
    if(ctype_digit($_POST['category']) && isset($categorydir[$_POST['category']])) {
        if(array_key_exists($_POST['category'], $categorydir) && is_dir($categorydir[$_POST['category']])) {
            $handle = opendir($categorydir[$_POST['category']]); //LINE 14
            $files = scandir($handle);
            echo 'Results of search:<br></br>';
            foreach($files as $file){ //LINE 17
                echo($file);
            }
        } else {
            echo 'target directory not found';
    }
} 
```

我在这里也做了一些其他的改进。

# asp.net - 如何让 .NET 使用 SiteMapDataSource 报告当前节点级别？

> ID：15122095
> 
> 赞同：0
> 
> 时间：2013-02-27T20:49:12.803
> 
> 标签：asp.net

我正在使用 SiteMapDataSource 使用菜单控件来驱动我的网站导航。我想创建一些上下文感知的子导航，即在 Web.sitemap 中显示某些子节点。

我知道请求页面的上下文被报告给控件，但是我如何访问这个数字定位以在编程逻辑中使用？

在伪代码中，我想说，当在站点地图的**X 级**找到页面时，执行 Y。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:18:46.490

可能有更好的方法来做到这一点。获取节点级别的一种方法：

```
SiteMapNode c = System.Web.SiteMap.CurrentNode;
int lvl = 0;
while (c.ParentNode != null)
{
    c = c.ParentNode;
    lvl++;
} 
```

# scala - Source.fromURL 不会为无效的 URL 抛出异常

> ID：15122097
> 
> 赞同：2
> 
> 时间：2013-02-27T20:49:21.993
> 
> 标签：scala

我正在尝试检索其 URL 将传递给我的脚本的各种网站的大小，但是当我传递一个无效的 URL 时，我没有得到异常，而只是得到一个非常小的页面。我正在使用`Source.fromURL`，我得到以下结果：

```
thisIsClearlyABoggusURLThatCantPossiblyLeadAnyway 1052
www.bbc.co.uk 113871 
```

正如它所说，第一个不应该有任何东西，但它确实有。我的脚本如下：

```
def main( args:Array[String] ){
    val tasks = for(arg <- args) yield future {
        try {
            println(arg + " " + Source.fromURL( attachPrefix(arg) ).length)
        } catch {
            case e : java.net.UnknownHostException => println(arg + " *")
        }
    }

    awaitAll(20000L, tasks: _*)
}

def attachPrefix( url:String ) = url.slice(0, 4) match {
    case "http" => url
    case "www." => "http://" + url
    case _ => "http://www." + url
} 
```

每个参数都被传递到函数`attachPrefix`中，以确保它在使用之前具有必要的前缀。自从我开始将 url 作为参数传递而不是将其映射`arg`到

```
args map attachPrefix 
```

两者有什么区别，为什么我现在的人会出现这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:27:51.767

您可以使用`Source.fromURL(URI)`签名。创建一个`URI`将有效地验证[此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URI.html)`URL`记录的内容。但是，在这种情况下，就而言是有效的。另一方面，om-nom-nom 的建议认为它无效，因为顶级域段有超过 4 个已经过时的字符。我不知道任何完整的 Scala 验证库或为什么这是一个要求，但您可以尝试使用正则表达式进行验证。例如，这将捕获您的示例，因为顶级域超过 6 个字母：`URL` `http://www.thisIsClearlyABoggusURLThatCantPossiblyLead‌​Anyway``URI``UrlValidator`

```
val re = """^(https?://)?(([\w!~*'().&=+$%-]+: )?[\w!~*'().&=+$%-]+@)?(([0-9]{1,3}\.){3}[0-9]{1,3}|([\w!~*'()-]+\.)*([\w^-][\w-]{0,61})?[\w]\.[a-z]{2,6})(:[0-9]{1,4})?((/*)|(/+[\w!~*'().;?:@&=+$,%#-]+)+/*)$""".r
re.pattern.matcher("http://google.com").matches // true
re.pattern.matcher("http://www.thisIsClearlyABoggusURLThatCantPossiblyLeadAnyway").matches // false 
```

# html - 以编程方式删除 CSS 类文件 - jQuery

> ID：15122102
> 
> 赞同：0
> 
> 时间：2013-02-27T20:49:35.797
> 
> 标签：html, css, jquery-ui

我正在使用该`jQueryUI`库来利用页面上的选项卡，并且选项卡的 CSS 样式正在应用于`div`标签内的内容。

当我使用 Chrome 开发人员工具时，我将其范围缩小到 jquery-ui.css 类中的以下 CSS 类：

```
.ui-widget {
    /*font-family: Verdana,Arial,sans-serif;*/
    font-size: 1.1em/*{fsDefault}*/;
}
.ui-widget .ui-widget {
    font-size: 1em;
} 
```

如何从我的`div`内容容器中删除这些 CSS 样式。我尝试了以下 jQuery 代码段，但没有成功。

```
$("#nameSearch").removeClass("ui-widget"); 
```

这是我的 HTML 页面的片段：

```
<div id="searchTabs">
    <ul>
        <li><a href="#nameSearch">Name</a></li>
        <li><a href="#caseNumberSearch">Case Number</a></li>
    </ul>
    <div id="nameSearch">
        <b>First Name:</b>&nbsp;<asp:TextBox ID="txtFirstNameSearch" runat="server" CssClass="txt" /><br />
        <b>Last Name:</b>&nbsp;<asp:TextBox ID="txtLastNameSearch" runat="server" CssClass="txt" /><br />
        <b>Date of Birth:</b>&nbsp;<asp:TextBox ID="txtDateOfBirth" runat="server" CssClass="txt" /><br />
    </div>
    <div id="caseNumberSearch">
        <b>Case Number:</b>&nbsp;<asp:TextBox ID="txtCaseNumberSearch" runat="server" CssClass="txt" /><br />
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:13:49.730

如果您知道这些 CSS 规则的位置，那么：

**IE**

```
document.styleSheets[0].removeRule(i);

//i = position of the rule. 
```

**其它浏览器**

```
document.styleSheets[0].deleteRule(i); 
```

# gwt-celltable - GWT - 如何在 CellTable 或 DataGrid 中显示 String[][] 数组

> ID：15122103
> 
> 赞同：0
> 
> 时间：2013-02-27T20:49:41.557
> 
> 标签：gwt-celltable

我在`String[][]`a 中显示一个大数组`FlexTable`，但速度很慢。如何在`CellTable`or中显示数组`DataGrid`？

示例显示`CellTable< some class>`，但我只想要类似`CellTable< String>`, `CellTable< String[]>`, `CellTable< List< String> >`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:50:31.037

我通过修改 Google 的 ListDataProviderExample 以使用 CellTable 解决了这个问题。由于在编译时不知道列的数量，我使用了 Thomas Broyer 的 IndexedColumn 类（[动态创建 GWT CellTable](https://stackoverflow.com/questions/7172262/create-gwt-celltable-dynamically)），正如 Juan Pablo Gardella 所提到的（[https://groups.google.com/forum/?fromgroups=# !topic/google-web-toolkit/v6vZT0eUQKU](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/v6vZT0eUQKU)）。这是我的测试代码：

```
package com.google.gwt.examples.view.client;

import com.google.gwt.cell.client.TextCell;
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.user.cellview.client.CellTable;
import com.google.gwt.user.cellview.client.Column;
import com.google.gwt.user.cellview.client.TextHeader;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.VerticalPanel;
import com.google.gwt.view.client.ListDataProvider;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class ListDataProviderExample implements EntryPoint {

  String[][] rowsA = {{"aaaaa","bbbbb","ccccc"}, 
    {"111", "222", "333"}, {"A", "B", "C"}};

  public void onModuleLoad() {
    // Create a CellTable.
    CellTable<List<String>> table = new CellTable<List<String>>();

    // Get the rows as List
    int nrows = rowsA.length;
    int ncols = rowsA[0].length;
    ArrayList rowsL = new ArrayList(nrows);
    //List rowsL = new ArrayList(nrows);
    for (int irow = 0; irow < nrows; irow++) {
        List<String> rowL = Arrays.asList(rowsA[irow]);
        rowsL.add(rowL);
    }

    // Create table columns
    for (int icol = 0; icol < ncols; icol++) {
        table.addColumn(new IndexedColumn(icol), 
              new TextHeader(rowsA[0][icol]));
    }

    // Create a list data provider.
    final ListDataProvider<List<String>> dataProvider 
      = new ListDataProvider<List<String>>(rowsL);

    // Add the table to the dataProvider.
    dataProvider.addDataDisplay(table);

    // Add the widgets to the root panel.
    VerticalPanel vPanel = new VerticalPanel();
    vPanel.add(table);
    RootPanel.get().add(vPanel);
  }
}

class IndexedColumn extends Column<List<String>, String> {
    private final int index;
    public IndexedColumn(int index) {
        super(new TextCell());
        this.index = index;
    }
    @Override
    public String getValue(List<String> object) {
        return object.get(this.index);
    }
} 
```

# iphone - viewdidload 中的 UISwitch 状态

> ID：15122106
> 
> 赞同：0
> 
> 时间：2013-02-27T20:49:48.193
> 
> 标签：iphone, ios, uilocalnotification, uiswitch

所以，伙计们，我上周一直在努力让它发挥作用。

我有一个应用程序，我需要一个 UISwitch 来打开本地通知。
开关状态的标准是关闭的，但是当警报打开时，我需要在负载时更改它。我已经尝试了 scheduleLocalNotification，我尝试了 BOOL，我尝试将 int isOn 设置为 1，当它打开时设置为 0，当它关闭时，似乎没有什么对我有用。

我使用的 if 循环在 ViewDidLoad 中，如下所示：

```
if (isAlarmOn == 1) {
        NSLog(@"You have notifications");
        [setAlarm setOn:YES];

    }
    else{
        NSLog(@"You have no notifications");
        [setAlarm setOn:NO];
    } 
```

无论我尝试使用哪种策略，我似乎都不起作用，希望我能得到你们的帮助。

**更多代码：**

我的 setAlarm 的代码

```
- (IBAction)setAlarm:(id)sender {
    NSArray *notificationArray=[[UIApplication sharedApplication] scheduledLocalNotifications];

        if (setAlarm.on) {
            [alarmStatus setText:@"Alarmen er tændt"];
            //Metode til at undersøge om klokken før eller efter officiel solned
            NSTimeInterval checkTime = [[astronomicalCalendar sunset] timeIntervalSinceDate:[NSDate date]];

            NSLog(@"Alarmen er tændt");

            if (checkTime >= 0) {
                [self scheduleNotificationToday];
            }
            else{
                [self scheduleNotificationTomorrow];
            }

             NSLog(@"antal alamer %@", notificationArray);
            isAlarmOn = 1;

                }
        else {
            //Metode til at slette alle notifikationer
             [[UIApplication sharedApplication] cancelAllLocalNotifications];
            NSLog(@"Alarmen er slukket");

            NSLog(@"antal alamer %@", notificationArray);

            isAlarmOn = 0;
        }
    } 
```

我的 UILocalNotification 代码

```
 - (void)scheduleNotificationToday {
        Class cls = NSClassFromString(@"UILocalNotification");
        if (cls != nil) {
    //Just some stuff determine which time to alert on. 

                UILocalNotification *notif = [[cls

 alloc] init];
            notif.fireDate = [gregorian dateByAddingComponents:traekFraDag toDate:[astronomicalCalendar sunset] options:0];
            notif.timeZone = [NSTimeZone defaultTimeZone];

            notif.alertBody = @"Nu går solen snart ned";
            notif.alertAction = @"Show me";
            notif.soundName = @"Waterline.caf";
            notif.applicationIconBadgeNumber = 1;

            [[UIApplication sharedApplication] scheduleLocalNotification:notif];
        }
    } 
```

请告诉我您是否想查看代码的任何其他部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:11:19.160

您需要发布更多代码，以便我们更好地了解这些变量是什么以及您的问题实际上是什么，但我认为您可能正在寻找：

```
[setAlarm setOn:YES animated:YES]; 
```

和

```
[setAlarm setOn:NO animated:YES]; 
```

..如果 setAlarm 是您的开关名称？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:14:36.757

确保它`setAlarm`确实指向开关，即它不是 nil 并且它不指向其他开关。请为您的变量选择其他名称！;-)

此外，请确保您没有代码或在重置开关值`-viewWillAppear`之后调用的其他方法。`-viewDidLoad`事实上，您可能希望将开关和其他 UI 元素的设置推迟到`-viewWillAppear`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:34:59.970

> 但是每次**从内存中卸载**应用程序时，uiswitch 都会显示默认状态（关闭）

您没有将交换机的状态存储在任何持久存储中。这就是为什么如果应用程序退出它总是显示为关闭（为您的班级调用了dealloc）。

如果即使应用程序不在内存中也想保存开关状态，那么您需要将该值保存在某处。`NSUserDefaults`如果你愿意，你可以使用它。

# java - 如何 访问java bean的变量？

> ID：15122107
> 
> 赞同：0
> 
> 时间：2013-02-27T20:49:49.997
> 
> 标签：java, jsp, javabeans, jsp-tags

在我的 .jsp 上，我使用以下代码从我的 java bean“Bean”返回一个 INT 值“foo”。这里还有一个方法叫做 getFoo();

```
<jsp:getProperty name="bean" property="foo" /> 
```

如何检索此值？它是从 Bean.getFoo() 方法返回任何值，还是从变量本身返回 Bean.foo ？

我实际上希望我的 getFoo() 方法返回一个存储在我编码的自定义对象数组中的变量。如果我没有 foo 变量而是 getFoo() 方法会发生什么？

编辑：我可以有一个 getFoo() 方法，它不仅仅返回一个类似命名的变量吗？如，比下面更复杂的东西，其他东西在哪里返回？

```
public getFoo() {return this.foo;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:58:30.837

方法`getFoo()`是这里的关键，而不是变量`foo`。这就是 Java bean 属性的工作方式。可以省略 variable `foo`。

# c++ - C++11 直接列表初始化语法

> ID：15122109
> 
> 赞同：2
> 
> 时间：2013-02-27T20:49:52.147
> 
> 标签：c++, opengl-es, c++11, initialization

在阅读了列表初始化及其各种风格之后，我决定在我使用 Xcode 和 Objective-C++ 编写的 openGL ES 应用程序中测试一些功能，直到遇到一些相当模糊的东西。

我知道（并且经常实现）使用以下语法初始化 POD 的传统 C 样式结构初始化，例如 GLKVector2：

```
GLKVector2 point = { 0,0 };    //copy-initialized 
```

但这种方法可能并不总是程序员想要的。因此，通过删除分配（和不必要的复制构造操作），有利于直接初始化，人们会假设（从文档中）上述声明看起来像这样：

```
GLKVector2 point{ 0,0 };    //direct-initialized, but generates compile error 
```

但是，当代码如下所示时，编译器不会抱怨：

```
GLKVector2 point{ { 0,0 } }; 
```

对我来说，这似乎`point`是从内部结构创建的临时直接初始化的`{ 0,0 }`，因此与第一种方法相比没有任何优势；仍然必须分配和释放临时人员。

或者这个问题可能只是 GLKit 类型使用的 union/struct 布局的性质使编译器感到困惑。

在代码中进一步实现之前，对这种奇怪的语法进行一些澄清，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:28:12.533

The outer braces delimit the initializer for the object itself, the inner braces are the initializer for a member inside the object, e.g.

```
GLKVector2 v = { initializers-for-members }; 
```

where `initializers-for-members` is `{ 0, 0 }` because the type has an array member, of two elements, and you initialize an array of two members with `{ a, b }`.

C++ supports "brace elision" (8.5.1 [dcl.init.aggr] paragraph 11) which means nested braces can be left out of the initializer under certain circumstances, but in C++11 brace elision is only allowed for copy-initialization. This is why you don't need two sets of braces for the copy-init case, but do need them for direct-init.

Since C++11 was completed the rules have been changed by [DR 1270](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1270) to allow brace elision in the direct-list-initialization case too, but that's a change made to the post-C++11 draft and not widely supported yet.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:47:46.237

根据[文档](http://developer.apple.com/library/ios/documentation/GLkit/Reference/GLKVector2/Reference/reference.html#//apple_ref/doc/uid/TP40010978-CH3-SW1) `GLKVector2`是：

```
union _GLKVector2
   {
   struct { float x, y; };
   struct { float s, t; };
      float v[2];
};
typedef union _GLKVector2 GLKVector2; 
```

这就是你需要双括号的原因，你通过初始化一个联合成员来初始化。成员聚合初始化发生*在原地*。如果它是一个扁平结构，那么您的单大括号假设将起作用。这在初始化`std::array`（例如`std::array<int, 2> a{{1, 2}}`）时也会发生，因为它是 POD 聚合，并且不涉及临时 C 数组。

您应该查看[聚合初始化](http://en.cppreference.com/w/cpp/language/aggregate_initialization)。

## 编辑

实际上，查找文档，可能会感兴趣关于*括号省略*的规则（仅在复制初始化上下文中允许）。

# android - TelephonyManager.getDeviceId 可以在没有 SIM 卡的情况下工作吗？

> ID：15122114
> 
> 赞同：4
> 
> 时间：2013-02-27T20:49:57.460
> 
> 标签：android

我有一个简单的问题 ：

做

```
 TelephonyManager.getDeviceId(); 
```

设备中没有 SIM 卡（SIM_STATE_ABSENT）可以工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:51:36.180

它应该工作。我刚刚在我的 CDMA Galaxy Nexus 上进行了测试，它返回了一个值，即使它根本没有 SIM 卡。当我在模拟器上运行它时，它返回了一长串零。

更新：根据[文档](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getDeviceId%28%29)，getDeviceId() 返回 GSM 设备的 IMEI。而且 IMEI 不是 SIM 卡功能，它是设备自带的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:30:08.667

代码对话：

最后`telephony.getDeviceId()`调用Phone.getDeviceId()，这个方法的实现在CDMA手机和GSM手机等不同的手机上是不同的。例如，CDMA 电话。

```
public String getMeid() {
    return mMeid;
}
//returns MEID or ESN in CDMA
public String getDeviceId() {
    String id = getMeid();
    if ((id == null) || id.matches("^0*$")) {
        Rlog.d(LOG_TAG, "getDeviceId(): MEID is not initialized use ESN");
        id = getEsn();
    }
    return id;
} 
```

它没有检查 SIM ABSENT 状态。因此，您当然可以在没有 sim 卡的情况下获得结果。

但是，请查看此 mMeid 何时重置。

```
case EVENT_GET_IMEI_DONE:
            ar = (AsyncResult)msg.obj;

            if (ar.exception != null) {
                break;
            }

            mImei = (String)ar.result;
case EVENT_RADIO_AVAILABLE: {
            mCM.getBasebandVersion(
                    obtainMessage(EVENT_GET_BASEBAND_VERSION_DONE));

            mCM.getIMEI(obtainMessage(EVENT_GET_IMEI_DONE));
            mCM.getIMEISV(obtainMessage(EVENT_GET_IMEISV_DONE));
        } 
```

所以它会在收到 EVENT_RADIO_AVAILABLE 消息时被重置。该事件是从[RIL](http://en.wikipedia.org/wiki/Radio_Interface_Layer)发送的。只有当它收到一个 EVENT_RADIO_AVAILABLE 消息时，它才会发出一个消息来请求设备身份。虽然获取设备身份与sim卡无关，但EVENT_RADIO_AVAILABLE可能会（需要进一步确认）。

我进一步检查系统何时会发出 EVENT_RADIO_AVAILABLE 消息。最后发现 RadioState 包含：

```
enum RadioState {
    RADIO_OFF,         /* Radio explictly powered off (eg CFUN=0) */
    RADIO_UNAVAILABLE, /* Radio unavailable (eg, resetting or not booted) */
    SIM_NOT_READY,     /* Radio is on, but the SIM interface is not ready */
    SIM_LOCKED_OR_ABSENT,  /* SIM PIN locked, PUK required, network
                           personalization, or SIM absent */
    SIM_READY,         /* Radio is on and SIM interface is available */
    RUIM_NOT_READY,    /* Radio is on, but the RUIM interface is not ready */
    RUIM_READY,        /* Radio is on and the RUIM interface is available */
    RUIM_LOCKED_OR_ABSENT, /* RUIM PIN locked, PUK required, network
                              personalization locked, or RUIM absent */
    NV_NOT_READY,      /* Radio is on, but the NV interface is not available */
    NV_READY;          /* Radio is on and the NV interface is available */
    ...
} 
```

当 isAvailable() 返回 true 时，它​​会发出事件。而且imei会更新。

```
public boolean isAvailable() {
    return this != RADIO_UNAVAILABLE;
} 
```

因此，SIM_ABSENT 与设备 ID 无关。

# kendo-ui - 来自一个数据源的多个组合框 [剑道]

> ID：15122117
> 
> 赞同：0
> 
> 时间：2013-02-27T20:50:04.993
> 
> 标签：kendo-ui

有没有已知的方法，如何从一个数据源构建 N 个分隔的组合框，而不为每个组合框创建新的 ViewModel，在 KendoUI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:06:32.133

将多个小部件绑定到单个数据源意味着每次您对数据源进行过滤或排序时，每个小部件都会接受更改——我认为这不是一个好主意。

如果您希望所有小部件都使用具有相同设置的 dataSource，请创建一个代表您的设置的对象，并在每次为不同的组合创建新的 dataSource 时使用它。

# vb.net - VB.NET 如何从占位符中查找 id

> ID：15122119
> 
> 赞同：1
> 
> 时间：2013-02-27T20:50:08.410
> 
> 标签：vb.net, placeholder

```
<input name="ctl00$ContentPlaceHolder1$txtUsername" type="text" id="ctl00_ContentPlaceHolder1_txtUsername" style="width:95%;" class="TextBoxWatermark" autocomplete="off"> 
```

^^^^^^ html代码

我使用 ctl00_ContentPlaceHolder1_txtUsername 作为 id 元素但没有找到！

什么是 id 元素？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:55:39.630

如果您使用的是母版页，您可以像这样访问它：

```
Dim MainContent as ContentPlaceHolder = CType( Page.Master.FindControl("MainContent"), ContentPlaceHolder)
 Dim myTextbox as Textbox = Ctype(MainContent.FindControl("txtUsername"),Textbox) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:42:36.973

试试这些

1.  您可以检查元素（例如在 chrome 中）以了解生成的 id

2.  `var elem = document.getElementById('<%= ContentPlaceHolder1.FindControl("txtUsername").ClientID %>');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:02:38.890

你试过'focus（）'命令吗？你只是想让它成为选定的字段吗？

```
document.getElementById("ctl00_ContentPlaceHolder1_txtUsername").focus(); 
```

希望有帮助！

# c++ - 使用 new int[10] 分配的内存必须使用 delete[] 释放

> ID：15122121
> 
> 赞同：-1
> 
> 时间：2013-02-27T20:50:09.863
> 
> 标签：c++, memory

陈述：

> 使用 new int[10] 分配的内存必须使用 delete[] 释放。

所以..

```
new int[10]; 
```

那我怎么删除呢？

编辑：谢谢你们 :) 我认为威尔逊、保罗、蒂姆等人是对的，声明省略了一些词因此让我感到困惑 - -...这很简单

```
int * p = new int[10];

delete [] p; 
```

不过，我从未见过 Rob 的答案，对我来说看起来真的很新！任何解释将不胜感激。:)

```
delete[] new int[10]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T20:54:58.653

您缺少一个变量来保存从 new 返回的值。你应该有类似的东西：

```
int* intArray = new int[10]; 
```

然后当你想删除内存时，你通过变量引用它：

```
delete[] intArray; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T20:54:06.453

就像它说的：

```
int *foo = new int[10];
delete[] foo; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T20:54:25.720

```
int * p = new int[10]; // allocate p

// do stuff with p

delete [] p;           // release p when you're done 
```

# python - ARTXP时间序列预测算法和ARTXP理论的Python代码

> ID：15122123
> 
> 赞同：0
> 
> 时间：2013-02-27T20:50:14.550
> 
> 标签：python, algorithm, tree, data-mining, time-series

问题：随时间推移连续变量值的模型演变。

我通过一篇论文介绍了一种预测时间序列下一个值的方法。虽然 ARIMA 模型对于长期预测更准确，但 ARTXP 模型更适合推断下一个值。

用于数据挖掘算法的 Microsoft 库实现了 ARTXP，它是自回归树模型的一种变体。

算法是如何工作的？你有这个模型的 Python 实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:52:10.180

我们可以参考[这篇论文](http://research.microsoft.com/en-us/um/people/dmax/publications/dmart-final.pdf)，下面的解释总结了这篇论文的方法。

**时间序列模型**

给定变量的时间序列， [![在此处输入图像描述](../Images/aadc8e92152f7a26659fc14b5078cf33.png)](https://i.stack.imgur.com/ONlPN.gif)时间序列是这些变量的值序列，[![在此处输入图像描述](../Images/845a9b093f5dbfce793cee5a154cee5b.png)](https://i.stack.imgur.com/cj88g.gif)。如果[![在此处输入图像描述](../Images/21cefd50bb66b12c65764032ccbe29c9.png)](https://i.stack.imgur.com/jv4d2.gif)是概率分布或模型，我们限制为具有形式的模型

[![在此处输入图像描述](../Images/0890df09af64ec650822089f514cd569.png)](https://i.stack.imgur.com/a9MI0.gif)

模型是概率的、平稳的，并且具有 p-Markov 属性。

**自回归树模型**

首先，*AR 模型*的形式为

[![在此处输入图像描述](../Images/c3eed9f129015048d29f5f62f7d4ee36.png)](https://i.stack.imgur.com/7tlFF.gif)

其中[![在此处输入图像描述](../Images/faff03975a76e53036af8da641885873.png)](https://i.stack.imgur.com/YO4AL.gif)是具有明显符号的正态分布。

也就是说，在每一次，一个值的概率都具有“自回归”的平均值，取决于该系列的最后 p 个值。

*ART 模型*是一种分段线性的 AR 模型，因此可以表示为树。每个非叶子都是一个布尔公式，每个叶子都是一个 AR 模型。

这很简单：沿树的分支取决于该系列的过去值。然后，每个叶子都是一个 AR 模型，用于预测下一个时间序列值。

AR 模型是退化的 ART 模型，其中有一个“布尔”决策节点和一个叶 AR 模型。

# perl - Perl DBI 使用数组而不是标量列表执行

> ID：15122125
> 
> 赞同：1
> 
> 时间：2013-02-27T20:50:29.713
> 
> 标签：perl, dbi

我根据某些条件（例如操作类型或某个值的存在）通过向`INSERT`语句添加字段来构建查询。但是随后我必须为`execute`具有不同参数列表的不同 DBI 分支，如下所示：

```
if ($x) {$extraFields .= ' , X'; $extraValues= ',? '}
if ($y) {$extraFields .= ' , Y, Z'; $extraValues= ',?, ? '}

my $theBasicQuery = "INSERT INTO sometable (A, B, $extraFields) VALUES (?, ? $extraValues)";

$sth = $dbh->prepare($theBasicQuery) or error

# but I dont want to have to do this if for execute
if ($x) {$sth->execute(1,2,99);}
if ($y) {$sth->execute(1,2,88, 77);} 
```

我宁愿做这样的事情：

```
{$sth->execute($anArrayWithDifferentParams);} 
```

这可能吗？还是有另一种方法可以做类似的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T21:32:40.730

为了更直接地回答这个问题，使用数组而不是标量列表执行查询的方法只是将数组传递给它。 `$sth->execute(@params)`会工作得很好。

```
if ($x) {$extraFields .= ' , X'; $extraValues = ',? '; @params = (99); }
if ($y) {$extraFields .= ' , Y, Z'; $extraValues = ',?, ? '; @params = (88, 77); }

my $theBasicQuery = "INSERT INTO sometable (A, B, $extraFields) VALUES (?, ? $extraValues)";

$sth = $dbh->prepare($theBasicQuery) or error

$sth->execute(1,2, @params); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T20:58:01.723

我强烈建议使用 SQL 构建工具来帮助您解决此问题。我最喜欢的是[SQL::Interp](https://metacpan.org/module/SQL%3a%3aInterp)，与[DBIx::Simple](https://metacpan.org/module/DBIx%3a%3aSimple)结合使用。这样的工具将为您管理绑定变量，并且 DBIx::Simple 还自动为您处理准备和重用语句句柄。使用 DBIx::Simple/SQL::Interp 的解决方案如下所示：

```
$db->iquery("INSERT INTO sometable", {
    a => 1,
    b => 2,
    %extra
}); 
```

SQL::Abstract 也很流行，并且有一个语法相似的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T21:27:15.970

**一种方法：**

```
my %insert = ( A => 1, B=> 2 );

if ($condition_x) {
  $insert{X} = 99;
}

if ($condition_y) {
  $insert{Y} = 88;
  $insert{Z} = 77;
}

# 1\. sprintf isn't very perlish, but I find it clearer here
# 2\. quote_identifier():  you won't ever need this until you need it very badly
#
my $query = sprintf('INSERT INTO tbl (%s) VALUES (%s)',
                       join ', ' => map { $dbh->quote_identifier($_) } keys %insert,
                       join ', ' => ('?') x keys %insert);

my $sth = $dbh->prepare($query);  # Perhaps prepare_cached, instead?
$sth->execute(values %insert); 
```

**警告：！DIY**

如果可能的话，不要自己做！按照其他地方的建议使用模块。其他人已经解决了这个问题，比上面的更令人信服和可靠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T23:46:13.547

您可能会发现我的[DBIx::PreQL](http://search.cpan.org/?module=DBIx%3a%3aPreQL)库对此类任务很有帮助。它提供了一种标记 SQL 查询以根据可用数据进行处理的方法。

DBIx::PreQL 使用简单的前缀和命名占位符来标记应该包含哪些查询行。

例如，`*`表示“始终包含”和`&`表示“如果该行的所有数据字段都存在，则包含”。

您的查询将被标记如下：

```
*  INSERT INTO sometable (
*     A
*    ,B
&    ,C !C!  
&    ,D  !D!
)
*VALUES (
*   ?A?
*  ,?B?
&  ,?C?
&  ,?D?
* ) 
```

然后您将查询和数据哈希传递`{ A => '123', B => 'foo', D => 'bar' }`给查询处理器，它将返回查询：

```
INSERT INTO sometable (
     A
    ,B
    ,D
)
VALUES (
   ?
  ,?
  ,?
 ) 
```

和参数列表`(123, 'foo', 'bar')`。

# vba - 将所有图表导出为图形

> ID：15122128
> 
> 赞同：0
> 
> 时间：2013-02-27T20:50:41.433
> 
> 标签：vba, excel

我正在尝试找到一种方法来轻松地将 Excel 中的工作簿中的所有图表导出为图形。我有以下代码：

```
Option Explicit

Sub ExportChart()
     '   Export a selected chart as a picture
    Const sSlash$ = "/"
    Const sPicType$ = ".png"
    Dim sChartName$
    Dim sPath$
    Dim sBook$
    Dim objChart As ChartObject

    On Error Resume Next
     '   Test if there are even any embedded charts on the activesheet
     '   If not, let the user know
    Set objChart = ActiveSheet.ChartObjects(1)
    If objChart Is Nothing Then
    MsgBox "No charts have been detected on this sheet", 0
    Exit Sub
    End If

     '   Test if there is a single chart selected
    If ActiveChart Is Nothing Then
    MsgBox "You must select a single chart for exporting ", 0
    Exit Sub
    End If

Start:
    sChartName = Application.InputBox("Please Specify a name for the exported chart" & vbCr & _
    "There is no default name available" & vbCr & _
    "The chart will be saved in the same folder as this file", "Chart Export", "")

     '   User presses "OK" without entering a name
    If sChartName = Empty Then
    MsgBox "You have not entered a name for this chart", , "Invalid Entry"
    GoTo Start
    End If

     '   Test for Cancel button
    If sChartName = "False" Then
    Exit Sub
    End If

     '   If a name was given, chart is exported as a picture in the same
     '   folder location as their current file
    sBook = ActiveWorkbook.Path
    sPath = sBook & sSlash & sChartName & sPicType
    ActiveChart.Export Filename:=sPath, FilterName:="PNG"

End Sub 
```

这将导出活动图表，但如何导出所有图表？如果图表以它们来自的工作表命名，则可获得奖励积分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T21:26:44.380

```
Sub Test()

Dim sht As Worksheet, cht As ChartObject
Dim x As Integer

    For Each sht In ActiveWorkbook.Sheets
        x = 1
        For Each cht In sht.ChartObjects
            cht.Chart.Export "C:\local files\temp\" & sht.Name _
                              & "_" & x & ".png", "PNG"
            x = x + 1
        Next cht

    Next sht

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:31:50.300

又快又脏。
您希望将其放在代码的底部以循环遍历工作表和每张工作表上的所有图表对象。

我没有对此进行测试，因为我没有时间重新创建您的文件或情况。希望这可以帮助

```
For each x in worksheets.count then
  For Each objChart In ActiveSheet.ChartObjects then
    sChartName = activesheet.name
    sBook = ActiveWorkbook.Path
    sPath = sBook & sSlash & sChartName & sPicType
    ActiveChart.Export Filename:=sPath, FilterName:="PNG"
  Next objChart
Next x 
```

# java - 如何从 Java ResultSet 中确定列数？

> ID：15122130
> 
> 赞同：4
> 
> 时间：2013-02-27T20:50:52.863
> 
> 标签：java, sql, swing, jtable, resultset

我想在`jtable`. 第一步是创建一个`tablemodel`：

```
public DefaultTableModel createTableModel(String sqlStatement) {
    int rowCount       = 0;
    int colCount       = 0;
    Vector data        = new Vector();
    Vector columnnames = new Vector();
    String sql = sqlStatement;
    try {
        open();

        ResultSet rs = befehl.executeQuery(sql);
        ResultSetMetaData metaData = rs.getMetaData();
        for(int i = 1; i<=metaData.getColumnCount();i++)
            columnnames.add(metaData.getColumnName(i));
        DefaultTableModel model = new DefaultTableModel(null,columnnames);
        close();
        return model;
    } catch (SQLException e) {
        e.printStackTrace();
        close();
        return null;
    }
} 
```

如果我的 SQL 语句选择整个表，这很好用：`SELECT* FROM test;`，但如果我只想显示前两列`Select ColumnName1, ColumName2 from test;`，我会得到一个`ArrayIndexOutOfBoundsException`. 我一直以为`columncount`依赖于`resultSet`，而依赖于 sql 语句。我怎样才能得到正确的`columncount`？

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 4 >= 2
at java.util.Vector.elementAt(Vector.java:470)
at javax.swing.table.DefaultTableColumnModel.getColumn(DefaultTableColumnModel.java‌​:294)
at sun.swing.SwingUtilities2.convertColumnIndexToModel(SwingUtilities2.java:1841)
at javax.swing.JTable.convertColumnIndexToModel(JTable.java:2585)
at javax.swing.JTable.getValueAt(JTable.java:2720) at Main.KassePanel.<init>(KassePanel.java:186)
at Main.Main.<init>(Main.java:36) at Main.Main.main(Main.java:20) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:55:58.753

您应该使用***DatabaseMetaData***而不是***ResultSetMetaData***。我已经完成了一个名为**dbproxy**的 java 项目，该项目旨在操作和访问关系数据库的结构（元数据）。我很快就会把它变成一个开源项目。查看我的代码：

```
@Override
public List<ColumnDetail> getColumns(String table) throws SQLException {
    List<ColumnDetail> columnList = new ArrayList<ColumnDetail>();
    ResultSet resultSet = null;
    String catalog = getCatalog();
    String schema = getSchema();

    try {
        DatabaseMetaData databaseMetaData = connection.getMetaData();
        if(databaseMetaData == null) {
            return columnList;
        }
        resultSet = databaseMetaData.getColumns(catalog, schema, table, null);
        if(resultSet == null) {
            return columnList;
        }
        while(resultSet.next()) {
            columnList.add(extractColumnDetail(resultSet));
        }
    }
    catch (SQLException e) {
        throw new SQLException("Could not get columns: " + e.toString());
    }
    catch (Exception e) {
        throw new SQLException("Could not get columns: " + e.toString());
    }
    finally {
        DatabaseUtil.close(resultSet);
    }
    return columnList;
} 
```

参考[Apress.JDBC.Metadata.MySQL.and.Oracle.Recipes.A.Problem.Solution.Approach.Mar.2006](https://rads.stackoverflow.com/amzn/click/com/B0047TEVLY)

# jquery - jQuery选择问题

> ID：15122137
> 
> 赞同：1
> 
> 时间：2013-02-27T20:51:15.703
> 
> 标签：jquery, html, css, jquery-selectors, html-table

好的，所以我需要选择一个 td 并让它更改其中的图像，这很好。但是，我需要能够同时显示选择的 td 的 id，但是我的函数必须选择图像来更改它。有没有办法同时做到这一点，以便 onclich 它选择图像，更改它，然后显示带有 td id 的警报？下面的代码

jQuery：

```
$(document).ready(function(){
  $("td img").click(function() {
    $(this).attr('src', 'images/d.gif');
    alert($(this).attr("td id"));
    return false;
  });
}); 
```

html

```
<div id='plan'>
<table>
 <tr>
   <td class='n' id='a1'><img src='images/a.gif'/></td>
   <td class='n' id='a2'><img src='images/a.gif'/></td>
   <td class='n' id='a3'><img src='images/a.gif'/></td>
   <td class='n' id='a4'><img src='images/a.gif'/></td>
   <td></td>
   <td class='n' id='a6'><img src='images/a.gif'/></td>
   <td class='n' id='a7'><img src='images/a.gif'/></td>
   <td class='n' id='a8'><img src='images/a.gif'/></td>
   <td class='n' id='a9'><img src='images/a.gif'/></td>
 </tr>
 <tr>
   <td class='n' id='b1'><img src='images/a.gif'/></td>
   <td class='n' id='b2'><img src='images/a.gif'/></td>
   <td class='n' id='b3'><img src='images/1.gif'/></td>
   <td class='n' id='b4'><img src='images/1.gif'/></td>
   <td></td>
   <td class='n' id='b6'><img src='images/1.gif'/></td>
   <td class='n' id='b7'><img src='images/a.gif'/></td>
   <td class='n' id='b8'><img src='images/a.gif'/></td>
   <td class='n' id='b9'><img src='images/a.gif'/></td>
 </tr>
 <tr>
   <td class='n' id='c1'><img src='images/1.gif'/></td>
   <td class='n' id='c2'><img src='images/1.gif'/></td>
   <td class='n' id='c3'><img src='images/a.gif'/></td>
   <td class='n' id='c4'><img src='images/a.gif'/></td>
   <td></td>
   <td class='n' id='c6'><img src='images/1.gif'/></td>
   <td class='n' id='c7'><img src='images/1.gif'/></td>
   <td class='n' id='C8'><img src='images/a.gif'/></td>
   <td class='n' id='C9'><img src='images/a.gif'/></td>
 </tr>
 <tr>
   <td class='n' id='d1'><img src='images/1.gif'/></td>
   <td class='n' id='d2'><img src='images/1.gif'/></td>
   <td class='n' id='d3'><img src='images/1.gif'/></td>
   <td class='n' id='d4'><img src='images/1.gif'/></td>
   <td></td>
  <td class='n' id='d6'><img src='images/1.gif'/></td>
  <td class='n' id='d7'><img src='images/1.gif'/></td>
  <td class='n' id='d8'><img src='images/1.gif'/></td>
  <td class='n' id='d9'><img src='images/1.gif'/></td>
 </tr>
 <tr>
  <td class='p' id='e1'><img src='images/1.gif'/></td>
  <td class='p' id='e2'><img src='images/1.gif'/></td>
  <td class='p' id='e3'><img src='images/1.gif'/></td>
  <td class='p' id='e4'><img src='images/1.gif'/></td>
  <td></td>
  <td class='p' id='e6'><img src='images/a.gif'/></td>
  <td class='p' id='e7'><img src='images/a.gif'/></td>
  <td class='p' id='e8'><img src='images/1.gif'/></td>
  <td class='p' id='e9'><img src='images/1.gif'/></td>
</tr>
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:52:48.943

我想你的意思是`$(this).parent().attr("id");`

你的代码：

```
alert($(this).attr("td id")); 
```

实际上是在寻找标签`td id`上命名的属性。`img`

# ios - 在块之间传递值类型

> ID：15122140
> 
> 赞同：0
> 
> 时间：2013-02-27T20:51:21.600
> 
> 标签：ios, grand-central-dispatch

据我了解，可以使用 __block 修饰符使对象在块（和队列？）之间可用。

```
-(void)performRequest: (void (^)(NSArray* outcome))completion
 {
    dispatch_async(dispatch_get_global_queue(0,0), ^{
                // do some request

            __block NSArray * result = [[NSArray alloc]init]; //Outcome of the request.

            completion(result);
        });
} 
```

**让我们假设完成块将在主线程上 dispatch_async**

我想应该可以使用没有 __block 标识符的值类型来做到这一点。我说得对吗？

```
-(void)performRequest: (void (^)(int outcome))completion
{
    dispatch_async(dispatch_get_global_queue(0,0), ^{
            // do some request

        int result = 10; //Outcome of the request.

        completion(result);
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:59:09.557

在您的第一个代码片段中使用`__block`完全没有意义。

的全部目的`__block`是使值在另一个块中捕获时保持可变。你没有在`result`任何地方捕捉。

请注意，在 MRR 下，`__block`具有阻止捕获块保留值的副作用，使其成为打破保留周期的常用方法。在 ARC 下，这不是真的。如果您需要避免保留循环，则需要使用`__unsafe_unretained`or`__weak`值。也就是说，这一切都不适用于您提供的代码片段。

# php - php 从 mysql 数据库中检索数据

> ID：15122144
> 
> 赞同：0
> 
> 时间：2013-02-27T20:51:28.133
> 
> 标签：php, mysql, function, dreamweaver

我正在创建一个搜索过程，我想检索 MySQL 数据库中的数据并将其显示在下拉列表中，每个表包含 2 个字段，一个是 id，另一个是名称

该国家的代码或功能运行良好，但专业化的其他功能不显示任何内容。如果有人可以帮助请

# 函数.php

```
<?php
 require_once('db.inc.php'); 

function connect(){
   mysql_connect(DB_Host, DB_User ,DB_Pass )or die("could not connect to the database" .mysql_error());

   mysql_select_db(DB_Name)or die("could not select database");

}
  function close(){

  mysql_close();

  }

  function countryQuery(){

  $countryData = mysql_query("SELECT * FROM country");

  while($record = mysql_fetch_array($countryData)){

     echo'<option value="' . $record['country_name'] .  '">' . $record['country_name'] . '</option>';

  }

}

function specializtionQuery(){

$specData = mysql_query("SELECT * FROM specialization");

  while($recordJob = mysql_fetch_array($specData)){

     echo'<option value="' . $recordJob['specialization'] .  '">' . $recordJob['specialization'] . '</option>';

  }

}
?> 
```

# 索引.php

```
<?php
  require_once('func.inc.php'); 
  connect(); 

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>testDroplistdown</title>
</head>

<body>
<p align="center">
<select name="dropdown">
  <?php countryQuery(); ?>
</select>
  <?php close(); ?>
</p>
<p align="left">
<select name="dropdown2">
  <?php specializationQuery(); ?>
</select>
  <?php close(); ?>
</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:52:59.777

您在定义中拼错了函数名称：

```
function specializtionQuery(){ 
```

...然后你打电话给：

```
<?php specializationQuery(); ?> 
```

请注意函数名称中的缺失`a`。

# php - Ajax 文件、模块和请求流

> ID：15122147
> 
> 赞同：0
> 
> 时间：2013-02-27T20:51:35.920
> 
> 标签：php, jquery, ajax, kohana

我正在创建自己的模块，并且在其中一个模块的文件中的某个地方我正在使用 ajax。现在：

我应该如何调用要从中获取响应的文件？我想在这个文件中使用 kohana 类，所以直接通过 MODPATH 到达那里当然会给我“找不到类”。

我应该如何处理？

我不能使用路由，因为我不想只为一个模块在引导程序中添加新路由。而且我不太确定允许模块的类扩展 kohana 控制器是否是一个好习惯。

任何建议将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:58:39.667

在 Kohana 中，无论如何您都应该在 Controller 中使用您的模块。为什么不在引导程序中使用路由？它正是为此类任务而设计的。

# c# - 如何在 EWL 中正确设置表单身份验证？

> ID：15122148
> 
> 赞同：1
> 
> 时间：2013-02-27T20:51:41.320
> 
> 标签：c#, forms-authentication, enterprise-web-library

我想在 EWL 中对整个网站使用表单身份验证。它只是不工作。

*   我创建了一个扩展 FormsAuthCapableUserManagementProvider 的 UserManagementProvider。
*   我已将根实体设置设置为强制存在经过身份验证的用户（受保护的覆盖 bool UserCanAccessEntitySetup { get { return AppTools.User != null; } }）
*   我在 Global.asax 中有以下 GetShortcutUrlResolvers 的实现：

    ```
    protected override IEnumerable<ShortcutUrlResolver> GetShortcutUrlResolvers() {
        yield return new ShortcutUrlResolver( "", ConnectionSecurity.SecureIfPossible, () => AppTools.User == null ? null : Pages.Dashboard.GetInfo() );
    } 
    ```

访问站点的根目录时出现访问被拒绝异常。如果我删除 AppTools.User == null ？null 三元，我得到一个未处理的异常，说 GetUrl 是为没有权限的用户调用的。如果我仅在存在经过身份验证的用户时添加快捷方式 URL，我会收到“此页面不再可用”错误，因为当我转到根 URL 时它不知道将我发送到哪里。我从来没有看到登录页面。我还需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:15:52.420

也许 EWL 没有选择您的提供商。确保该类被调用`UserManagement`（不是 UserManagementProvider）并且在`YourLibraryProjectNamespace.Configuration.Providers`命名空间中。

# android - Android 解析错误 - ClassCastException - Collections$EmptyList

> ID：15122160
> 
> 赞同：0
> 
> 时间：2013-02-27T20:52:42.707
> 
> 标签：android, xml-parsing

我在以下 2 行中一直收到一个错误空指针，我不知道如何纠正它。

```
NodeList textList = NameElement.getChildNodes();
String name = ((Node)textList.item(0)).getNodeValue().trim();

   import java.io.FileInputStream;
import java.util.ArrayList;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Element;
import org.w3c.dom.Document;
import org.w3c.dom.Node;

import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;
import org.xml.sax.SAXParseException;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.Spinner;

public class PlayActivity extends Activity {
    private Spinner spntreasure;
    private static final String FILENAME = "data.xml";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.play_activity);
        ImageButton cancelBtn =  (ImageButton)findViewById(R.id.cancelBtn1);

        addItemsOnspnTreasure();

        cancelBtn.setOnClickListener(new View.OnClickListener() 
        {           
            @Override
            public void onClick(View v) 
            {
                finish();
            }

        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.play_activity, menu);
        return true;
    }

    // add items into spinner dynamically
      public void addItemsOnspnTreasure() 
      {

          ArrayList<String> List = new ArrayList<String>();

          spntreasure = (Spinner) findViewById(R.id.spntreasure);

          try {
                DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
                DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
                FileInputStream fis = openFileInput(FILENAME);
                Document doc = docBuilder.parse(fis);
                fis.close();

                // normalize text representation
                doc.getDocumentElement ().normalize ();
                String myRoot = doc.getDocumentElement().getNodeName();

                NodeList listOfTreas = doc.getElementsByTagName("Treasure");
                int totalTreas = listOfTreas.getLength();
                int myTotalTreasure = totalTreas;

                for(int s=0; s<listOfTreas.getLength() ; s++){

                    Node firstTreasNode = listOfTreas.item(s);
                    if(firstTreasNode.getNodeType() == Node.ELEMENT_NODE)
                    {

                        Element firstTreasElement = (Element)firstTreasNode;

                        //-------
                        NodeList NameList = firstTreasElement.getElementsByTagName("Name");
                        Element NameElement = (Element)NameList.item(0);

                        NodeList textList = NameElement.getChildNodes();
                        String name = ((Node)textList.item(0)).getNodeValue().trim();

                        //-------
                        NodeList Clue1List = firstTreasElement.getElementsByTagName("Clue1");
                        Element Clue1Element = (Element)Clue1List.item(0);

                        NodeList textLNList = Clue1Element.getChildNodes();
                        String clue1 =((Node)textLNList.item(0)).getNodeValue().trim();

                        //----
                        NodeList Clue2List = firstTreasElement.getElementsByTagName("Clue2");
                        Element Clue2Element = (Element)Clue2List.item(0);

                        NodeList textClue2List = Clue2Element.getChildNodes();
                        String clue2 = ((Node)textClue2List.item(0)).getNodeValue().trim();

                        //------

                    }//end of if clause

                }//end of for loop with s var

          }catch (SAXParseException err) {
                System.out.println ("** Parsing error" + ", line " 
                     + err.getLineNumber () + ", uri " + err.getSystemId ());
                System.out.println(" " + err.getMessage ());

                }catch (SAXException e) {
                Exception x = e.getException ();
                ((x == null) ? e : x).printStackTrace ();

                }catch (Throwable t) {
                t.printStackTrace ();
                }

        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, List);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spntreasure.setAdapter(dataAdapter);
      }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:10:46.420

NameElement 在您的 XML 中没有子节点。如果您尝试访问 NameElement.getChildNodes()，它将返回 NULL，而 textList.item(0) 将导致 NullPointerException。

现在，我希望这个问题出现在 StackOverflow 上，这样我就可以获得一些代表。<_<

（这个答案是提问者发布他的 xml 代码的 G+ 帖子的延续）。

在第 88 行尝试这个，看看它是否有效，然后对 Clue 节点尝试同样的方法

```
String name = ((Element) NameList.item(0)).getAttribute("Name"); 
```

根据这份文件：[http ://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Node.html](http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Node.html)

当 Node 被强制转换为 Element 时， nodeValue 变为 null 因为没有明显的映射，或者我认为 Element 的 nodeValue 始终为 null (？) 是该文档试图说的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:29:04.440

您正在将 NodeList 转换为 Element：

```
NodeList fstNode = doc.getElementsByTagName("Name");
Element fstElmnt = (Element) fstNode; 
```

这是错误的。尝试：

```
......
NodeList fstNode = doc.getElementsByTagName("Name");
int size = fstNode.getLength();
for(int i=0; i< size; i++){
   Node curr= nodeList.item(i);
   if (curr.getNodeType() == Node.ELEMENT_NODE) {
       Element elem = (Element) curr;
       .... 
   }
   ......
}
....... 
```

# c# - 拦截传出响应的 MVC 属性

> ID：15122164
> 
> 赞同：1
> 
> 时间：2013-02-27T20:52:50.013
> 
> 标签：c#, .net, asp.net-mvc-4, asp.net-web-api

我在 MVC 应用程序中使用属性来捕获传入请求并授权它们的性质，也就是前端控制器模式。我还想在我的 WebApi 中有一个属性，一旦服务器处理了请求，它就会拦截传出的响应。

我想这样做是为了检查 API 返回的对象的类型，以确保没有泄露敏感的内部数据。虽然彻底的测试应该可以防止这种情况发生，但我想实现这个传出属性检查以加倍确定。

是否有内置到 MVC 中的框架组件来促进传出回调？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:04:04.340

您可能想查看 DelegatingHandler

它位于 MVC 管道之外，可以处理 HttpRequest 以及来自控制器的响应。这将使您有机会预处理 HttpRequest，或对来自控制器的响应进行后处理，以及将 HttpResponse 与控制器的响应分开处理

[WebApi 中响应的 DelegatingHandler](https://stackoverflow.com/questions/11970313/delegatinghandler-for-response-in-webapi)

# r - 在 R 中从 TM 导出语料库

> ID：15122170
> 
> 赞同：4
> 
> 时间：2013-02-27T19:39:04.620
> 
> 标签：r, text-mining

我正在尝试将`Corpus`对象从 R 导出到静态文件。语料库包含通过解析文件系统中现有的预处理文件创建的词干文档。作者在他的“R 中的文本挖掘简介”（第 2 页）中描述了一种方法，建议

```
> writeCorpus(file) 
```

但到目前为止我的尝试只产生以下结果：

```
Error in UseMethod("as.PlainTextDocument", x):
    no applicable method for 'as.PlainTextDocument' applied to an object of class "character" 
```

到目前为止，我的脚本非常简单，我预计这可能是一个简单的疏忽。非常感谢任何建议：这似乎是边缘问题。

```
# Turn off Java so it doesn't interfere with Weka interface
Sys.setenv(NOAWT=1)

# Load required text mining packages
require(tm)
require(rJava)
require(RWeka)
require(Snowball)

# Populate a vector with the number of subdirectories in preprocessed dir
preprocessed <- list.files(path="preprocessed_dir", include.dirs=TRUE, full.names=TRUE)

# For each element in the vector
for(i in 1:length(preprocessed)) {
# Get the files in each subdirectory by appending a number to the absolute path
    files <- list.files(sprintf("preprocessed_dir/%.0f", i))
    # Create a Corpus object of all the files in the subdirectory
    corpora <- Corpus(VectorSource(files))
    # Stem the words in the Corpus object
    corpora <- tm_map(corpora, SnowballStemmer)
    # (Try to) write the object to the file system
    writeCorpus(corpora)
} 
```

FWIW：调用`class(corpora)`返回 `[1] "VCorpus" "Corpus" "list"` ，因此对象显然不是类型`character`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-26T13:16:16.993

我在措辞为什么要导出语料库。如果您想将文本显示给其他人，您可以使用原始文本。

如果您想将其导出并与 R 一起重用，我的建议是您可以使用函数 save() 将语料库保存到 .RData 中。

然后，如果要加载它，只需使用 load() 函数。

# javascript - 将焦点设置在隐藏的元素上

> ID：15122172
> 
> 赞同：0
> 
> 时间：2013-02-27T20:53:04.747
> 
> 标签：javascript, jquery

我正在寻找一种方法来触发在元素被识别为 DOM 中可聚焦之后发生的焦点事件。

我正在根据先前的输入显示表单元素。这样可行。然后我想为用户输入设置焦点。

除非我使用 setTimeout 在行上设置断点，否则以下函数将无法工作。我尝试使用也失败的函数回调。

```
function triggerFocus(id,timeout){
    console.log('triggerFocus') ;
    console.log(id) ;
    /* the following works if a breakpoint is set*/
    setTimeout( function() { $( id ).focus() }, timeout ) ;
}

/* code used to show the elements from another function */
if ( $('#first').val() == '') {
    $('#firstRow').show() ;
    $('#middleRow').show() ;
    $('#lastRow').show() ;
    $('#emailRow').show() ;    
    triggerFocus($('#first'),100) ;    
} else {
    $('#docket').blur(docketBlur) ;
    $('#firstRow').show() ;
    $('#docketRow').show() ;
    triggerFocus($('#docket'),100) ;    
} 
```

[在http://jsfiddle.net/pvrSU/](http://jsfiddle.net/pvrSU/)上显示了如何使用选项卡 keyCode 实现此目的的示例 我发现在触发模糊事件之前其他元素必须是可聚焦的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:11:34.470

该[`show()`](http://api.jquery.com/show/)函数有一个`complete`回调，您可以在这种情况下使用它：

```
$('#emailRow').show(400, function(){
 .
 .
 .
}) 
```

示例：http: [//jsfiddle.net/ar5wS/](http://jsfiddle.net/ar5wS/)

# ruby - Rails 资产预编译：Segmentation Fault + Ruby 1.9.3p392

> ID：15122196
> 
> 赞同：1
> 
> 时间：2013-02-27T20:53:55.250
> 
> 标签：ruby, ruby-on-rails-3, capistrano, asset-pipeline

我正在使用 Capistrano 将一个简单的 rails 应用程序部署到 SUSE 服务器。在执行以下钩子时进行部署

```
after "deploy:update_code" do
  run <<-CMD
  cd #{current_release} &&
   RAILS_ENV=#{rails_env} bundle exec rake assets:precompile --trace
  CMD
end 
```

我得到以下长错误跟踪

```
 servers: ["application_server.com"]
    [application_server.com] executing command
*** [err :: application_server.com] ** Invoke assets:precompile (first_time)
*** [err :: application_server.com] ** Execute assets:precompile
*** [err :: application_server.com] /usr/local/rvm/rubies/ruby-1.9.3-p392/bin/ruby /opt/apps/myapplication.com/shared/bundle/ruby/1.9.1/bin/rake assets:precompile:all RAILS_ENV=devutility RAILS_GROUPS=assets --trace
*** [err :: application_server.com] 
*** [err :: application_server.com] /opt/apps/myapplication.com/shared/bundle/ruby/1.9.1/gems/therubyracer-0.11.4/lib/v8/init.so:
*** [err :: application_server.com] [BUG]
*** [err :: application_server.com] Segmentation fault
*** [err :: application_server.com] ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-linux]
*** [err :: application_server.com] -- Control frame information -----------------------------------------------
*** [err :: application_server.com] c:0054
*** [err :: application_server.com] p:-4755442
*** [err :: application_server.com] s:0156 b:0156
*** [err :: application_server.com] l:000155
*** [err :: application_server.com] d:000155
*** [err :: application_server.com] TOP
*** [err :: application_server.com] 
*** [err :: application_server.com] c:0053
*** [err :: application_server.com] p:----
*** [err :: application_server.com] s:0154 b:0154
*** [err :: application_server.com] l:000153
*** [err :: application_server.com] d:000153
*** [err :: application_server.com] CFUNC
*** [err :: application_server.com] :require
*** [err :: application_server.com] 
*** [err :: application_server.com] c:0052
*** [err :: application_server.com] p:0035
*** [err :: application_server.com] s:0150 b:0150
*** [err :: application_server.com] l:000149
*** [err :: application_server.com] d:000149
*** [err :: application_server.com] TOP 
```

在我的 GIST [https://gist.github.com/ankit8898/5051531](https://gist.github.com/ankit8898/5051531)中找到完整的跟踪，Gemfile 也存在于其中。

任何帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:20:58.580

我建议你从 Gemfile 中删除 therubyracer 并安装[node.js](http://nodejs.org/)作为你的 javascript 运行时，不要再担心它了。

Therubyracer 往往很麻烦并且[消耗太多内存](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar#troubleshooting)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:01:20.933

也许尝试以前版本的 therubyracer。在您的 Gemfile 中：

```
gem 'therubyracer', '0.11.3' 
```

# javascript - 在 IE5+ 中设置 div 的不透明度/过滤器

> ID：15122197
> 
> 赞同：0
> 
> 时间：2013-02-27T20:53:56.390
> 
> 标签：javascript, internet-explorer, html, filter, opacity

是的，我在网上看到了大量关于这个问题的帖子，但我似乎无法让我的不透明性在 Internet Explorer 5+ 中使用。

```
var container_div = document.getElementById(id);       
var container_filter = 0;
container_div.style.filter = container_filter; 
```

这在所有其他标准浏览器中都有效。

```
var container_div = document.getElementById(id);       
var container_opacity = 0;
container_div.style.opacity = container_opacity; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:06:54.910

IE5？*认真的*？？？

无论如何，简短的回答是 IE 的`filter`风格比这复杂得多，因为它处理许多不同的效果。您需要设置整个过滤器字符串，而不仅仅是一个整数值。

语法相当复杂，并且在 Javascript 中不太容易使用。结果也可能有点偶然。它并不总是很好，即使你做对了。

与其试图告诉你如何完成这项`filter`工作，我将向你介绍一个可能使事情变得更容易的第三方 Javascript 库：[cssSandpaper](http://www.useragentman.com/blog/csssandpaper-a-css3-javascript-library/)。

cssSandpaper 是一个 JS 库，它在旧版本的 IE 中实现了几个现代 CSS 功能。

然后，您可以使用 CSS 为 IE 设置不透明度，如下所示：

```
opacity: 0.3; 
```

...或像这样的Javascript：

```
cssSandpaper.setOpacity(container_div, 0.3); 
```

这两个示例都根据我上面链接的页面上的文档。

注意：我非常怀疑这个库是否可以与 IE5 一起使用，但坦率地说，不要让你担心。现在大多数人甚至支持 IE6 都被认为是浪费时间。

# ruby - 列出类对象的名称

> ID：15122198
> 
> 赞同：3
> 
> 时间：2013-02-27T20:53:58.007
> 
> 标签：ruby, class, object

我今天刚开始学习 Ruby，并学会了创建一个类并创建属于该类的对象。我想知道是否有办法检索我在所述类中创建的所有实例的名称。前任）

```
class Clothes
  attr_accessor:color
end

shirt=Clothes.new
#=> #<Clothes:0x007f89208cd330> 
pants=Clothes.new
#=> #<Clothes:0x007f89208c18f0> 
socks=Clothes.new
#=> #<Clothes:0x007f8920861748> 
```

是否有一个命令可以按我给它们的名称列出属于 Clothes 类（衬衫、裤子、袜子）的所有对象？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:13:50.050

**免责声明：您尝试做的事情很可能会更优雅地解决。**

我只是将我想记住的对象存储在一个数组中。不过，这是您问题的解决方案：

```
local_variables.select{|v| eval(v.to_s).class == Clothes }
#=> [:socks, :pants, :shirt] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:55:24.693

我建议使用类变量来收集所有实例的名称，并在初始化方法中传递某种符号。

```
class Clothes
    attr_accessor :color

    @@instances = []
    def initialize(name)
        @@instances << name
    end

    def all
       puts @@instances
    end
end

shirt = Clothes.new(:shirt)
pants = Clothes.new(:pants)

puts pants.all
# outputs the names 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:02:30.117

不，没有。但是，您可以通过修改`new`方法来实现类似的效果，以便它将此类的所有新实例存储在类变量中。这将使您可以轻松访问此类的所有对象，但不能访问变量名（无论如何我都找不到需要）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T21:04:54.633

您可以使用 ruby[​​ ObjectSpace](http://www.ruby-doc.org/core-2.0/ObjectSpace.html)收集类的所有实例/对象，[each_object](http://www.ruby-doc.org/core-2.0/ObjectSpace.html#method-c-each_object)方法将帮助您做到这一点

例如

```
all = []
ObjectSpace.each_object Clothes {|cloth| all << cloth } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T21:13:57.373

您可以使用实例变量来做到这一点：

```
class Clothes; end
@a = Clothes.new
@b = Clothes.new
@c = 1

p instance_variables.select{|v|instance_variable_get(v).class == Clothes}
#=>[:@a, :@b] 
```

# java - JSlider ChangeListener 值到 JTextArea

> ID：15122199
> 
> 赞同：1
> 
> 时间：2013-02-27T20:53:59.290
> 
> 标签：java, jslider, changelistener

我需要更改哪些代码才能使 JTextArea 显示 JSlider 的最终值？目前它会打印滑块到过的所有位置。我只希望它在 JTextArea 中显示滑块的最终位置，而不是它已经到达的所有数字。

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
import javax.swing.event.*;

public class SliderDemo extends JPanel
                    implements 
                               WindowListener,
                               ChangeListener {
//Set up animation parameters.
static final int FPS_MIN = 0;
static final int FPS_MAX = 30;
static final int FPS_INIT = 15;    //initial frames per second

//This label uses ImageIcon to show the doggy pictures.

public SliderDemo() {
    setLayout(new BoxLayout(this, BoxLayout.PAGE_AXIS));

    //Create the label.
    JLabel sliderLabel = new JLabel("Frames Per Second", JLabel.CENTER);
    sliderLabel.setAlignmentX(Component.CENTER_ALIGNMENT);

    //Create the slider.
    JSlider framesPerSecond = new JSlider(JSlider.HORIZONTAL,
                                          FPS_MIN, FPS_MAX, FPS_INIT);

    framesPerSecond.addChangeListener(this);

    //Turn on labels at major tick marks.

    framesPerSecond.setMajorTickSpacing(10);
    framesPerSecond.setMinorTickSpacing(1);
    framesPerSecond.setPaintTicks(true);
    framesPerSecond.setPaintLabels(true);
    framesPerSecond.setBorder(
            BorderFactory.createEmptyBorder(0,0,10,0));
    Font font = new Font("Serif", Font.ITALIC, 15);
    framesPerSecond.setFont(font);

    add(sliderLabel);
    add(framesPerSecond);

    setBorder(BorderFactory.createEmptyBorder(10,10,10,10));}

/** Add a listener for window events. */
void addWindowListener(Window w) {
    w.addWindowListener(this);
}

//React to window events.

public void windowOpened(WindowEvent e) {}
public void windowClosing(WindowEvent e) {}
public void windowClosed(WindowEvent e) {}
public void windowActivated(WindowEvent e) {}
public void windowDeactivated(WindowEvent e) {}

/** Listen to the slider. */
public void stateChanged(ChangeEvent e) {
    JSlider source = (JSlider)e.getSource();
    if (!source.getValueIsAdjusting()) {
        int fps = (int)source.getValue();

        String rick = Integer.toString(fps);

        JTextArea bob = new JTextArea();
        add(bob);

        bob.setText(rick);

        }
    }

private static void createAndShowGUI() {
    //Create and set up the window.
    JFrame frame = new JFrame("SliderDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    SliderDemo animator = new SliderDemo();

    //Add content to the window.
    frame.add(animator, BorderLayout.CENTER);

    //Display the window.
    frame.pack();
    frame.setVisible(true);

}

public static void main(String[] args) {
    /* Turn off metal's use of bold fonts */
    UIManager.put("swing.boldMetal", Boolean.FALSE);

    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
}

@Override
public void windowDeiconified(WindowEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void windowIconified(WindowEvent arg0) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:58:06.610

每次您的状态更改时，您都会添加一个新的`JTextArea`：

```
JTextArea bob = new JTextArea();
add(bob); 
```

相反，`JTextArea`只需在`SliderDemo`构造函数中添加一次并简单地使用：

```
bob.setText(...) 
```

在你的`ChangeListener`.

# google-bigquery - Google BigQuery 中的“超出配额：为此项目扫描的免费查询字节太多”

> ID：15122202
> 
> 赞同：5
> 
> 时间：2013-02-27T20:54:10.583
> 
> 标签：google-bigquery, quota

从昨天开始，在使用 JasperReports Server 试用 Google BigQuery 后，我收到了上述错误。我找不到这方面的任何信息，因为前 100GB 应该是免费的，而且 BigQuery 访问报告说：

API 项目数据分析的 BigQuery 资源使用情况 2013 年 1 月 31 日 – 2013 年 2 月 27 日

每天处理的数据 0 MB 峰值 0.00 MB 平均

我也没有达到免费查询/用户/天的限制： API Per-User Limit Used Billable Limit Courtesy Limit
BigQuery API 5.0 requests/second/user
0% 200,000 requests/day 10,000 requests/day

和

API 项目的流量报告 总请求 935 请求/天 856 峰值 33.39 平均

开始日期 2013 年 1 月 31 日

样品期 28 天

我正在尝试在我的大学的一个项目中使用出生样本数据，这非常紧迫。它工作了一天左右。查询由 JasperSoft BigQuery 连接器 ( [http://code.google.com/p/jaspersoft-bigquery-datasource/](http://code.google.com/p/jaspersoft-bigquery-datasource/) ) 使用 Ad-hoc-View（基于 JasperReport 作为主题）进行。

我正在使用以下语句：

```
SELECT
    STRING($P!{dimension1}) as dimension_1,
    STRING($P!{dimension2}) as dimension_2,
    SUM(record_weight)  as count_group,
    AVG(weight_pounds)  as avg_weight_pounds,
    AVG(apgar_1min) as apgar_1min,
    AVG(apgar_5min) as apgar_5min
FROM publicdata:samples.natality
WHERE
    year >= $P!{year_first}
    AND year <= $P!{year_last}
GROUP BY dimension_1, dimension_2
ORDER BY dimension_1, dimension_2 
```

任何帮助将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T09:12:21.670

为了其他人的利益，总结上面和下面的评论：

*   如果您不启用计费，您的使用配额不会显示在开发者控制台中。
*   如果您不启用计费，查看报告页面将显示 0GB 已使用。
*   除非您启用计费，否则您每月的查询限制为 100GB。
*   启用计费将使您能够查询超过 100GB 的数据。
*   BigQuery 团队正在修复报告页面，不包括在您未启用结算时对数据的查询

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-08-06T10:16:01.643

即使在 2021 年仍然是一个相关的问题。现在将 PowerBi 连接到 BigQuery（直接查询）。它显示一条错误消息，在我的例子中，代码为 31780：配额超出扫描的免费查询字节。

**这就是问题所在**

*   当数据连接 BQ 似乎没有连接到正确的项目。

**以下是解决方法：**

*   单击具有 BQ 连接的表
*   单击转换数据（位于主页选项卡上）
*   在转换数据中转到视图选项卡
*   点击高级编辑器
*   你会看到这一行：

```
 Source = GoogleBigQuery.Database(null), 
```

*   将其更改为：

```
 Source = GoogleBigQuery.Database([BillingProject="project-id"]), 
```

*注意：不是项目名称，是项目ID*

**对从 BQ 获取数据的所有表执行此操作。**

来源：[https ://docs.microsoft.com/en-gb/power-bi/connect-data/desktop-connect-bigquery#considerations-and-limitations](https://docs.microsoft.com/en-gb/power-bi/connect-data/desktop-connect-bigquery#considerations-and-limitations)

# unix - 550 目录名无效

> ID：15122207
> 
> 赞同：1
> 
> 时间：2013-02-27T20:54:16.853
> 
> 标签：unix, ftp

我在使用 UNIX FTP over TLS 脚本时遇到了一些麻烦。当我拉文件（复制到本地主机）时没有问题但是当我从远程 Windows 服务器中删除文件时我收到 FTP 错误`550 The directory name is invalid`我试图找出是什么导致了这个，当与系统管理员检查时对于 Windows 机器，他们声明我连接的帐户具有适当的删除权限来完成此操作。任何帮助是极大的赞赏。

以下是使用 ftp -s 连接并登录后。

```
ftp> passive 

Passive mode  on.

ftp> ls -al

227 Entering Passive Mode (192,168,2,50,238,107).

125 Data connection already open; Transfer starting.

TLSv1/SSLv3 ( AES128-SHA ), 128 bits

02-04-13  01:47PM                27696 20130204T134747Z.csv 

02-05-13  01:36PM                 3423 20130205T133659Z.csv

02-08-13  03:40PM                 2674 appimport.csv

02-03-13  03:14PM       <DIR>          aspnet_client

02-25-13  03:07PM                 6566 exportedAll.csv

226 Transfer complete.

ftp> rm exportedAll.csv 
```

**错误：** 550 目录名称无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:03:26.170

```
ftp> delete exportedAll.csv 
```

`rm`是 的缩写`rmdir`，所以它只适用于删除一个目录，而不是普通文件。

# jquery - ajax 调用不返回任何内容到 $post

> ID：15122208
> 
> 赞同：0
> 
> 时间：2013-02-27T20:54:23.517
> 
> 标签：jquery

这是我的代码：

```
<div id="test"></div>

<form id="form-lecturer-login"> 

    <table>
        <tbody>
        <tr>
            <td>
                <label class="label">Username : </label><br>
                <input name="username" value="" type="text">
            </td>
        </tr>
        <tr>
            <td>
                <label class="label">Password : </label><br>
                <input name="password" value="" type="text">
            </td>
        </tr>
    </tbody>
    </table>
    <input value="Log In" type="submit">
</form>

<script type="text/javascript">
$('#form-lecturer-login').submit(function(){
    $.post("../php/lecturer_login.php",$(this).serialize(),
    function(data){
    $('#test').html(data[0]).show();
    }, "json");
});
</script> 
```

在讲师_login.php 中：

```
<?php
$stack = array();
array_push($stack,"test");
echo json_encode($stack);    
?> 
```

注意：我知道我正在传递我不使用的数据。仅用于测试目的。

'test' div 不会将文本更改为“test”。

我正在通过示例学习这一点，并且我遵循了 jquery 文档。我错过了什么？除了：

```
<script type="text/javascript" src="../js/jquery-1.4.2.min.js" ></script> 
```

在我需要的文件头中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:06:38.357

我会做类似的事情

```
<?php
$stack = array();
$stack['info']='test';
echo json_encode($stack);    
?> 
```

并且安装了 $.post 我更喜欢 $.ajax

```
 $.ajax({
                url:'../php/lecturer_login.php',
                type:'POST',
                dataType:'json',
                success:function (result) {
                    $('#test').html(result.info);//since info is the key of the json maybe the same for $.post
                }
        }); 
```

我忘了你需要

```
event.preventDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:06:52.687

我认为问题在于您没有阻止回发。

尝试这样做：

```
<script type="text/javascript">
$('#form-lecturer-login').submit(function(event){
   event.preventDefault();
   ... 
```

向您的函数添加一个参数并调用 preventDefault() 方法。

# java - 为什么不在类路径中时加载一个类？

> ID：15122210
> 
> 赞同：1
> 
> 时间：2013-02-27T20:54:25.527
> 
> 标签：java, jar, classpath, classloader

我的应用程序是由某个进程（control-m）启动的。它从一个我可以修改的 bash 脚本开始（该脚本由另一个进程调用）。

该应用程序正在使用错误版本的 spring 运行。问题是 - 我知道正在加载哪个 jar，但它不在类路径上！类路径在 bash 脚本中提供。我还通过执行验证了它：

```
ClassLoader cl = ClassLoader.getSystemClassLoader();
java.net.URL[] urls = ((URLClassLoader)cl).getURLs();
for(java.net.URL url: urls){
    System.out.println(url.getFile());
} 
```

但是仍然有一些罐子被装满了，这是不应该的。我在命令行中有 -verbose:class 。我怎样才能找出为什么我需要的类是从无效的 jar 中加载的？为什么这些 jars 甚至被加载？如何调试类加载过程？

当我从我的用户帐户运行脚本（而不是其他进程）时，一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:12:57.020

我找到了原因。类路径上有一个 jar，其权限设置为普通用户无权访问，但 control-m 有。从我的帐户运行时，它忽略了这个 jar，一切正常。

但是当由 control-m 运行时，它正在加载该 jar，该 jar 在清单中还有“Class-Path”条目，并且正在改变类加载过程。

# javascript - 如何将字符串转换为适当的日期格式javascript

> ID：15122214
> 
> 赞同：0
> 
> 时间：2013-02-27T20:54:32.620
> 
> 标签：javascript, date

我有这样的日期字符串：

周三 02 月 27 日 - 太平洋标准时间晚上 10 点

星期四 02/28 - 太平洋标准时间下午 1 点

如何将其转换为适当的 javascript 日期格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:10:20.353

```
> new Date(Date.parse("Thu, 01 Jan 1970 10:00 GMT-0400"))
Thu Jan 01 1970 15:00:00 GMT+0100 (CET) 
```

通过一点字符串操作，你应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T23:03:31.690

```
var match = /.+? (\d{2})\/(\d{2}) - (\d+)([AP]M) PST/.exec(someDateString);
if (!match)
    return new Date(NaN); // or something else indicating a parse error
var year = 2013,
    month = parseInt(match[1], 10) - 1; // zero-based
    day = parseInt(match[2], 10);
var hour = parseInt(match[3], 10) + (match[3] == "PM" ? 12 : 0);
    hour += 8; // adjust from PST to UTC
return new Date(Date.UTC(year, month, day, hour)); 
```

# excel - 如何根据旁边的列的值选择行

> ID：15122216
> 
> 赞同：-1
> 
> 时间：2013-02-27T20:54:49.137
> 
> 标签：excel, vba

我有三列：

```
14:40 1 4
14:40 1 0
14:40 1 4
14:45 1 3
14:45 1 2
14:45 1 1
14:45 1 1
14:45 1 2

```

我需要根据 1 中的值从第 2 列和第 3 列中选择、剪切和复制单元格。我需要找到 14:40 更改为 45 的行并移动两列（向右），用 45 重复该过程直到最后一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:08:11.017

我认为这接近您的要求。

在第二行 D2 中，键入函数`=IF($A2<>$A1,B2,"")`。将其复制到右侧（我使用填充权），进入 E2。然后将D2和E2复制到最后一行并填写下来。

（该函数的作用是查看 A2 是否等于 A1。美元符号保留 A2 和 A1 之间其他列的比较，例如 E。如果它们不相等，则打印 B2，如果相等则打印空白。 )

每次 A 列中的时间发生变化时，您都会将 B 和 C 中的数字复制到 D 和 E 中。

您也可以使用条件格式使它们变为粗体。

# ruby-on-rails-3 - Rails jbuilder在数组中给了我未定义的条目

> ID：15122220
> 
> 赞同：0
> 
> 时间：2013-02-27T20:54:57.833
> 
> 标签：ruby-on-rails-3, jbuilder

我正在使用 jbuilder 构建一个数组。

这是 tree.json.jbuilder 代码：

```
json.array!(@locations) do |location|
  if location.is_root?
    json.label location.name
    json.id location.id
    ...
  end
end 
```

生成的 json 在开头包含一些“未定义”条目：

```
[
   { },
   { },
   { },
   { },
   {
     label: "First Label",
     id: 1,
 ... 
```

有什么方法可以停止未定义的（空白）条目吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:52:37.610

您过滤块内的数组元素`#array!`。要禁用停止空白条目，您必须先制作选定的数组。然后构建json内容。

```
json.array! @locations.select{ |location| location.is_root? } do |location|
  json.label location.name
  json.id location.id
  ...
end 
```

然而，上述解决方案的顺序是 O(2n)，即使之前的（您的）解决方案是 O(n)。如果您坚持服务器端的计算速度，请使用前一个并正确处理客户端的 json 数据。

# android - 处理程序可运行函数上的 NullPointerException

> ID：15122221
> 
> 赞同：1
> 
> 时间：2013-02-27T20:54:57.893
> 
> 标签：android, handler, google-maps-android-api-2

我正在尝试通过`GroundOverlay`使用预设雷达图像阵列的顺序 s 的演示在 Google 地图上显示渐进式雷达图像。为了不让用户界面忙碌，我为此使用了不同的线程。不幸的是，似乎正在发生奇怪`NullPointerException`的事情。我已经调试了代码，并且没有找到任何可能导致此问题的空变量。

我应该怎么办？

我将只显示相关代码：（请注意，radaroverlay、map、images、image_index 和 MAP_BOUNDS 是全局变量，不为 null - 请参见[1](https://i.stack.imgur.com/Y7hP9.jpg)）。

编辑 - 简化了下面的代码。仍然给出完全相同的错误。

```
public void createLooper() {
    final Runnable runnable = new Runnable() {
        public void run() {
            if(run == true) {
                mHandler.postDelayed(this,500);
            } else {
                return;
            }

            if(radaroverlay != null) {
                radaroverlay.remove();
            }
            // Problem happens in the line below.
            try {
                GroundOverlayOptions opts = new GroundOverlayOptions()
                                             .image(images[image_index])
                                             .positionFromBounds(MAP_BOUNDS)
                                             .transparency((float) 0.3);
                radaroverlay = map.addGroundOverlay(opts);

            } catch (Exception e) {
                e.printStackTrace();
                run = false;
            }

            if(image_index == 19) {
                image_index = 0;
            } else {
                image_index++;
            }
        }
    };
    //mHandler.postDelayed(runnable, 500);
    new Thread(runnable).start(); 
```

和对应的`logcat`

```
02-27 16:58:04.815: E/AndroidRuntime(6791): FATAL EXCEPTION: main
02-27 16:58:04.815: E/AndroidRuntime(6791): java.lang.NullPointerException
02-27 16:58:04.815: E/AndroidRuntime(6791):     at maps.z.aa.<init>(Unknown Source)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at maps.z.bi.a(Unknown Source)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at maps.z.bi.b(Unknown Source)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at maps.z.ag.addGroundOverlay(Unknown Source)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at com.google.android.gms.maps.internal.IGoogleMapDelegate$Stub.onTransact(IGoogleMapDelegate.java:182)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at android.os.Binder.transact(Binder.java:249)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at com.google.android.gms.maps.internal.IGoogleMapDelegate$a$a.addGroundOverlay(Unknown Source)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at com.google.android.gms.maps.GoogleMap.addGroundOverlay(Unknown Source)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at com.aquamet.saramap.MapActivity$2$1.run(MapActivity.java:520)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at android.os.Handler.handleCallback(Handler.java:587)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at android.os.Looper.loop(Looper.java:123)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at android.app.ActivityThread.main(ActivityThread.java:4627)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at java.lang.reflect.Method.invokeNative(Native Method)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at java.lang.reflect.Method.invoke(Method.java:521)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:876)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:634)
02-27 16:58:04.815: E/AndroidRuntime(6791):     at dalvik.system.NativeStart.main(Native Method) 
```

调试： ![调试变量](../Images/8712ab9360486b14218f6875b92d1b6c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:56:01.590

原来问题在于，当我使用线程更新 GroundOverlays 时，虽然我可以从变量中读取（如果在创建新线程之前由主线程写入，就像这种情况一样），但我无法写入变量和期望主线程得到相同的结果。

`images`这解释了为什么我可以生成选项（从和读取） `image_index`，`MAP_BOUND`但无法使地图设置新的 GroundOverlay（写入`map`对象）。

我最终使用了[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)而不是线程，它负责处理并发变量问题。

结果代码：

```
public void createLooper() {
    final Runnable runnable = new Runnable() {
        public void run() {
            if(run == true) {
                mHandler.postDelayed(this,500);
            } else {
                return;
            }
            if(image_index == img_size) {
                image_index = 0;
            }
            if(radaroverlay != null) {
                radaroverlay.remove();
            }
            // Problem happens in the line below.
            try {
                GroundOverlayOptions opts = new GroundOverlayOptions()
                                             .image(images[image_index])
                                             .positionFromBounds(MAP_BOUNDS)
                                             .transparency((float) 0.3);
                radaroverlay = map.addGroundOverlay(opts);
                image_index++;

            } catch (Exception e) {
                e.printStackTrace();
                run = false;
            }
        }
    };
    runOnUiThread(runnable);
} 
```

# c - 通过使用结构不同的代码与 c 程序联系管理器

> ID：15122225
> 
> 赞同：0
> 
> 时间：2013-02-27T20:55:10.730
> 
> 标签：c, visual-studio-2012, system, structure, contact

现在我遇到了另一个问题，在我更改了如下所示的编码后，它仍然显示错误。在编码中，没有任何红色下划线，因此我无法找出错误在哪里。那么这个编码有什么错误吗？

```
struct contact
{
    char name[20],email[20];
    int hpnum;
}add;
int option;
FILE *f;

void addcontact(struct contact list[100]);
void read(struct contact list[100]);

int main (void)
{
    struct contact list[100];
    system("cls");
    printf("==========Welcome to Jeffery's Contact System Management==========\n");
    printf("\t\t\tContact System Main Menu\n");
    printf("[1] Create a New Contact\n");
    printf("[2] Modified Existing Contact\n");
    printf("[3] Delete Existing Contact\n");
    printf("[4] Search Existing Contact\n");
    printf("[5] Exit\n");
    printf("Please enter one of your option.\n");
    scanf("%d",&option);
    switch(option)
    {
        //add new contact
        case 1:addcontact(list);read(list);
        break;
    }

    getch();
}

void addcontact(struct contact list[100])
{
    char name[20],email[20];
    int hpnum,no;

    printf("\nContact Name: ");
    scanf("%s",list[no-1].name);
    fflush(stdin);
    printf("\nHandphone Number: ");
    scanf("%d",&list[no-1].hpnum);
    fflush(stdin);
    printf("\nE-mail: ");
    scanf("%s",list[no-1].email);
}

void read(struct contact list[100])
{
  FILE *f;
  f=fopen("contact.txt","w");
  fwrite(list,sizeof(list),100,f);
  fclose(f);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:06:18.870

**首先，** `fflush(stdin);`是[未定义](https://stackoverflow.com/questions/2979209/using-fflushstdin)的错误。应该使用`fflush(stdout);`

**其次，**在函数`addcontact(struct contact list[100])`变量*no*中没有分配任何值，并且您正在使用`scanf()`带有垃圾值的函数。

**第三**，在`read()`功能`fwrite(list,sizeof(list),100,f);`上是错误的应该是这样的。

```
fwrite(list, sizeof(struct contact), 100, f); 
```

[我不确定，但看起来你打算阅读多个联系人所以你还需要一个循环机制，可能在 addcontact() 函数中]

# asp.net - 预生成视图以提高查询性能

> ID：15122226
> 
> 赞同：0
> 
> 时间：2013-02-27T20:55:19.923
> 
> 标签：asp.net, entity-framework

我试图通过以下[步骤](http://msdn.microsoft.com/en-us/library/bb896240.aspx)来提高性能，

我已经有了我的模型，但我没有`edmx`文件，并且要求有一个的步骤，所以我创建了一个并按照[这些步骤](http://msdn.microsoft.com/en-us/library/vstudio/cc716703%28v=vs.100%29.aspx) 为我拥有的每个表创建了模型。

我如何让 edmx 文件使用现有模型而不现在创建一个模型，您建议我做些什么其他事情来绕过其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:10:18.073

假设您使用的是 EF5 - 您可以通过以下方式执行此操作（为了使其正常工作，您的所有模型都必须位于同一命名空间中）：

1.  单击 edmx 文件的设计图面，并将 Namespace 属性设置为模型所在的命名空间。
2.  您的 edmx 文件下应该有以下文件：
    *   YourModelName.Context.tt
    *   YourModelName.Designer.cs
    *   YourModelName.edmx.diagram
    *   你的型号名称.tt

删除 YourModelName.tt 文件，将不再创建自动生成的模型，如果您正确设置了命名空间（步骤 1），实体框架应该使用您的模型。

# javascript - 如何使用 Ember.js SortableMixin 按自然顺序排序？

> ID：15122229
> 
> 赞同：2
> 
> 时间：2013-02-27T20:55:27.220
> 
> 标签：javascript, sorting, ember.js, natural-sort

[Ember.SortableMixin](http://emberjs.com/api/classes/Ember.SortableMixin.html)

[自然排序](https://stackoverflow.com/questions/5167928/what-is-natural-ordering-when-we-talk-about-sorting)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:09:30.150

我在我的项目中所做的是覆盖 mixin 的 orderBy 函数（[https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/mixins/sortable.js #L52](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/mixins/sortable.js#L52)）并将 Ember.compare() 替换为这种自然排序算法：[https ://github.com/overset/javascript-natural-sort](https://github.com/overset/javascript-natural-sort)

```
orderBy: function (item1, item2) {
  var result = 0,
    sortProperties = this.get('sortProperties'),
    sortAscending = this.get('sortAscending');

  Ember.assert("you need to define `sortProperties`", !!sortProperties);

  sortProperties.forEach(function (propertyName) {
    if (result === 0) {
      naturalSort.insensitive = true;
      result = naturalSort(Ember.get(item1, propertyName), Ember.get(item2, propertyName));
      if ((result !== 0) && !sortAscending) {
        result = (-1) * result;
      }
    }
  });

  return result;
} 
```

我做了一个 PR，以便更容易在 sortable mixin 中插入任何排序功能，但它已关闭。在此处查看详细信息：

[https://github.com/emberjs/ember.js/pull/1216](https://github.com/emberjs/ember.js/pull/1216) [https://github.com/emberjs/ember.js/pull/1562](https://github.com/emberjs/ember.js/pull/1562)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:18:16.523

您必须定义额外的“自然”属性

```
App.Group = DS.Model.extend                                  
  name: DS.attr 'string'                                             
  natural_name: ( ->                                                
    # Split string into numeric and non-numeric parts
    # and convert numeric parts to actual numbers
    # Sort by resulting array of strings and numbers
    @get('name').split(/([0-9]+)/g).map (str) =>                     
      if str.match(/[0-9]+/) then parseInt(str, 10) else str         
  ).property('name')    

App.GroupsIndexController = Ember.ArrayController.extend
  sortProperties: ['natural_name'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T02:09:57.017

如果你想使用 SortableMixin，你可以这样做：

```
childrenSorted: function() {
  return Ember.ArrayProxy.createWithMixins(Ember.SortableMixin, {
    sortProperties: ['name'],
    content: this.get('model.children')
  });
}.property('model.children.@each.name') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T00:07:37.573

从 Ember Data 1.0（可能更早）开始，您可能希望使用`Ember.computed.sort`：

[http://emberjs.com/api/#method_computed_sort](http://emberjs.com/api/#method_computed_sort)

# java - 基于 Google Guava 中身份的带有弱键的简单 Java 哈希映射？

> ID：15122232
> 
> 赞同：4
> 
> 时间：2013-02-27T20:55:37.703
> 
> 标签：java, hashmap, guava, identity, weak-references

我需要一个带有弱键的简单哈希映射。Java 自己的`WeakHashMap`给了我这一点，但没有身份语义（它`equals()`用于键比较）。

Google 的 Guava 库已经改进了它的哈希映射方法。在最新版本（14.0）中`MapMaker`，我现在显然应该使用 a ，而不是使用 a （如果不是大多数的话，它有很多已弃用的东西），`CacheBuilder`它有各种选项。好吧，它有一个`weakKeys()`选项，所以这就是我将使用的。但是生成的缓存也是并发的（即，它在内部保存各种映射并使用自己的内部密钥集来同时控制访问），我无法将其关闭；我不需要并发，因为我已经在使用我自己的`ReadWriteLock`来管理对我的地图的访问。

好吧，我会接受并发；把地图给我！我尝试：

```
Map<Foo, Bar> map = CacheBuilder.newBuilder().weakKeys().build(); 
```

等等，这给了我 a `Cache<Object, Object>`，这不是 a `Map<Foo, Bar>`！如何在 Google Guava 中获得简单的基于身份的弱键映射？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:22:20.263

假设你愿意接受并发，你就快到了：

```
CacheBuilder.newBuilder().weakKeys().build().asMap(); 
```

但这就是说……您的用例并不完全清楚，也就是说，*为什么*需要具有这些属性的映射，以及当键具有另一种相等概念时，为什么需要具有标识语义的映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:53:32.690

> 我需要一个带有弱键的简单哈希映射。

我不明白你为什么要切换`MapMaker`到`CacheBuilder`那时。听起来你想要什么就是什么`MapMaker`。

You may not think you need concurrency, but remember that GC can run concurrently, and cause stale entries to be cleaned up. Anyway, the concurrency won't even cost you much.

# flash - NumericStepper flash 组件值

> ID：15122239
> 
> 赞同：0
> 
> 时间：2013-02-27T20:55:47.487
> 
> 标签：flash

我正在尝试使用 numericstepper flash 组件（adobe flash cs6），不幸的是我只能设置最小值/最大值，例如 0、1、2、3、4、5、6 ++++++++

我想要的，是这样的：

> -2 -1.75 -1.50 -1.25 -1.00 -0.75 -0.50 -0.25 0 +0.25 +0.50 +0.75 +1.00 +1.25 +1.50 +1.75 +2.00

等，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:18:21.813

[http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00002742.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00002742.html)

请使用 numericStepperInstance.stepSize

# python - 从命令行使用 Python2.7 (Linux)

> ID：15122243
> 
> 赞同：0
> 
> 时间：2013-02-27T20:55:49.813
> 
> 标签：python

我的问题是当我尝试从命令行运行 python 脚本时，如下所示；

```
python_projects # python variable.py 
```

它使用 Python 版本 3，我希望将其更改为 2.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:01:27.110

你试过[shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)线吗？

例如：

```
#!/path/to/2.7/python 
```

也没有什么能阻止您调用 2.7 解释器：

```
./path/to/2.7/python python_projects 
```

您可以创建一个 bash 别名：

```
alias py27=/path/to/2.7/python 
```

等等

```
py27 python_projects 
```

读者消化：很多解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:04:30.193

如果您以默认方式同时安装了 Python 2.7 和 Python 3.something，则应满足以下条件：

*   `python3`始终运行您最好的 3.x 版本
*   任何一个：
    *   `python`运行你最好的 2.x 版本，或者
    *   `python`运行相同的东西`python3`，但`python2`运行你最好的 2.x 版本

`python2`所以，如果它存在，你总是可以使用，`python`如果不存在。

此外：

*   `python2.7`始终运行您最好的 2.7.x 版本。

所以，你可以使用它。

如果`python2.7`、`python2`、 甚至`python`不在您的 PATH 中，或者您进行了某种奇怪的安装，违反了预期的规则（或者您的发行版为您完成），您始终可以通过完整路径指定 Python。而不是说，`/usr/bin/env python`或者`/usr/local/bin/python`你正在使用的任何东西，使用`/opt/local/python2.7/bin/python`，或者你安装它的任何地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:21:55.777

假设你在一个 linux 机器上，你可以在你的 .zshrc / .bashrc 文件中添加这样的东西来在不同的 python 版本之间切换。

```
py25() {
    rm -rf ~/.ipython
    alias ipython="/usr/local/bin/ipython-2.5"
    alias pip="/usr/local/bin/pip-2.5"
    alias python="/usr/local/bin/python-2.5"
 }

py27() {
    rm -rf ~/.ipython
    alias ipython="/usr/local/bin/ipython-2.7"
    alias pip="/usr/local/bin/pip-2.7"
    alias python="/usr/local/bin/python-2.7"
 }
py33() {
    rm -rf ~/.ipython
    alias ipython="/usr/local/bin/ipython-3.3"
    alias pip="/usr/local/bin/pip-3.3"
    alias python="/usr/local/bin/python-3.3"
 } 
```

那么您可以在 cmd 行上将它们称为`py25`or`py27`或`py33`。这也同时处理了 pip 和 iPython。

# java - grails嵌套bean错误

> ID：15122245
> 
> 赞同：0
> 
> 时间：2013-02-27T20:55:51.800
> 
> 标签：java, grails, javabeans

我在 grails 中有一个使用内存数据库的网站，在我进行一些严重的域类更改之前正在工作。对此有什么想法吗？以前从未见过类似的东西。

```
Error executing bootstraps: Error creating bean with name 'messageSource':     Initialization of bean failed; nested exception is   org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is   org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is java.lang.ExceptionInInitializerError
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'messageSource': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is java.lang.ExceptionInInitializerError 
```

**编辑**

全栈跟踪

```
/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java -  Dgrails.home=/Users/afrieden/grails/grails-1.3.7 -Dbase.dir=/Users/afrieden/GrailsProjects/GRVariantInterface/trunk -Dtools.jar=/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/tools.jar -Dgroovy.starter.conf=/Users/afrieden/grails/grails-1.3.7/conf/groovy-starter.conf -Xmx512M -XX:MaxPermSize=192m -Didea.launcher.port=7537 "-Didea.launcher.bin.path=/Applications/IntelliJ IDEA 12.app/bin" -Dfile.encoding=UTF-8 -classpath "/Users/afrieden/grails/grails-1.3.7/lib/groovy-all-1.7.8.jar:/Users/afrieden/grails/grails-1.3.7/dist/grails-bootstrap-1.3.7.jar:/Applications/IntelliJ IDEA 12.app/lib/idea_rt.jar" com.intellij.rt.execution.application.AppMain org.codehaus.groovy.grails.cli.support.GrailsStarter --main org.codehaus.groovy.grails.cli.GrailsScriptRunner --conf /Users/afrieden/grails/grails-1.3.7/conf/groovy-starter.conf run-app
Welcome to Grails 1.3.7 - http://grails.org/
Licensed under Apache Standard License 2.0
Grails home is set to: /Users/afrieden/grails/grails-1.3.7

Base Directory: /Users/afrieden/GrailsProjects/GRVariantInterface/trunk
Resolving dependencies...
Dependencies resolved in 747ms.
Running script /Users/afrieden/grails/grails-1.3.7/scripts/RunApp.groovy
Environment set to development
[groovyc] Compiling 1 source file to /Users/afrieden/GrailsProjects/GRVariantInterface/trunk/target/classes
[delete] Deleting directory /Users/afrieden/.grails/1.3.7/projects/trunk/tomcat
Running Grails application..
2013-02-27 16:04:33,160 [main] ERROR context.GrailsContextLoader  - Error executing bootstraps: Error creating bean with name 'messageSource': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is   org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is java.lang.ExceptionInInitializerError
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'messageSource': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is java.lang.ExceptionInInitializerError
at org.grails.tomcat.InlineExplodedTomcatServer.doStart(InlineExplodedTomcatServer.groovy:112)
at org.grails.tomcat.InlineExplodedTomcatServer$doStart.callCurrent(Unknown Source)
at org.grails.tomcat.TomcatServer.start(TomcatServer.groovy:97)
at grails.web.container.EmbeddableServer$start.call(Unknown Source)
at _GrailsRun_groovy$_run_closure5_closure12.doCall(_GrailsRun_groovy:158)
at _GrailsRun_groovy$_run_closure5_closure12.doCall(_GrailsRun_groovy)
at _GrailsSettings_groovy$_run_closure10.doCall(_GrailsSettings_groovy:280)
at _GrailsSettings_groovy$_run_closure10.call(_GrailsSettings_groovy)
at _GrailsRun_groovy$_run_closure5.doCall(_GrailsRun_groovy:149)
at _GrailsRun_groovy$_run_closure5.call(_GrailsRun_groovy)
at _GrailsRun_groovy.runInline(_GrailsRun_groovy:116)
at _GrailsRun_groovy.this$4$runInline(_GrailsRun_groovy)
at _GrailsRun_groovy$_run_closure1.doCall(_GrailsRun_groovy:59)
at RunApp$_run_closure1.doCall(RunApp.groovy:33)
at gant.Gant$_dispatch_closure5.doCall(Gant.groovy:381)
at gant.Gant$_dispatch_closure7.doCall(Gant.groovy:415)
at gant.Gant$_dispatch_closure7.doCall(Gant.groovy)
at gant.Gant.withBuildListeners(Gant.groovy:427)
at gant.Gant.this$2$withBuildListeners(Gant.groovy)
at gant.Gant$this$2$withBuildListeners.callCurrent(Unknown Source)
at gant.Gant.dispatch(Gant.groovy:415)
at gant.Gant.this$2$dispatch(Gant.groovy)
at gant.Gant.invokeMethod(Gant.groovy)
at gant.Gant.executeTargets(Gant.groovy:590)
at gant.Gant.executeTargets(Gant.groovy:589)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is java.lang.ExceptionInInitializerError
... 26 more

Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is java.lang.ExceptionInInitializerError
... 26 more
Caused by: java.lang.ExceptionInInitializerError
... 26 more
Caused by: groovy.lang.GroovyRuntimeException: Could not find matching constructor for: grvariant.vardb.UserRole(java.lang.String, java.lang.Integer, java.lang.String)
at grvariant.vardb.UserRole.$INIT(UserRole.groovy)
at grvariant.vardb.UserRole.<clinit>(UserRole.groovy)
... 26 more

Process finished with exit code 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:53:15.400

您似乎使用了 Spring Security 插件，并且在 UserRole 类中出现了问题。

关键错误信息是：

```
Caused by: groovy.lang.GroovyRuntimeException: Could not find matching constructor for: 
grvariant.vardb.UserRole(java.lang.String, java.lang.Integer, java.lang.String) 
```

我的猜测是 2 个字符串和 1 个整数属性与 Spring Security 想要的原始用户和角色引用不匹配，或者您添加了一个与 Grails/MySQL 有冲突的字符串属性，例如使用保留字作为属性名称。

发布此类的定义可能有助于进一步讨论。

# sql - 创建用于计算作业计划的 NextRunDate 的 C# 算法作为 SQL 代理

> ID：15122246
> 
> 赞同：1
> 
> 时间：2013-02-27T20:55:53.077
> 
> 标签：sql, schedule, agent

**你好，**我目前正在用 C# 创建一个作业计划系统（与 SQL 代理完全相同），但我无法创建一个 C# 算法来根据频率类型（如每日、每周等）计算 NextRunDate，产生与 SQL 代理相同的行为；注意我使用了与 sql 代理相同的表设计，例如 Frequency Inteval、Frequency Type 等。

# django - /admin/ 处的 ImportError 没有名为 wiki 的模块，urls.py 包含 wiki.urls 失败

> ID：15122263
> 
> 赞同：0
> 
> 时间：2013-02-27T20:56:59.687
> 
> 标签：django, django-urls

我在向 Django 添加新应用程序时遇到问题。

urls.py 中的一行打破了管理员，我确切地知道哪一行，它是我包含的位置（'apps.wiki.urls'）

网址.py

```
from django.conf.urls.defaults import patterns, include, url
from django.views.generic.simple import redirect_to, direct_to_template
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^$', direct_to_template, { "template" : "welcome.html"}),
    url(r'^accounts/', include('registration.backends.default.urls')),
    url(r'^admin/', include(admin.site.urls)), 
    url(r'^examples/', include('apps.examples.urls')),
    url(r'^polls/', include('apps.polls.urls')),
    url(r'^wiki/', include('apps.wiki.urls')), #Commenting out this line restores admin
) 
```

其他应用程序仍然有效。如果我去我的投票页面，它可以工作。示例和帐户应用程序也适用。/wiki/ 页面返回与 /admin/ 相同的 ImportError，但在此行的模板渲染期间发生错误：

```
<a href="{% url wiki_article_add %}">Create new article</a> 
```

这是未能包含的 wiki.urls.py 文件：

```
from django.conf.urls.defaults import *
from apps.wiki.models import Article

urlpatterns = patterns('',
    url(r'^$', 
        'django.views.generic.list_detail.object_list',
        {
            'queryset': Article.published.all(),
        },
        name='wiki_article_index'),
    url(r'^article/(?P<slug>[-\w]+)$', 
        'django.views.generic.list_detail.object_detail',
        {
            'queryset': Article.objects.all(),
        },
        name='wiki_article_detail'),
    url(r'^history/(?P<slug>[-\w]+)$',
        'wiki.views.article_history',
        name='wiki_article_history'),
    url(r'^add/article$',
        'wiki.views.add_article',
        name='wiki_article_add'),
    url(r'^edit/article/(?P<slug>[-\w]+)$',
        'wiki.views.edit_article',
        name='wiki_article_edit'),
) 
```

有人知道为什么这个模块不导入吗？wiki 目录包含：

```
__init__.py
forms.py
models.py
urls.py
views.py 
```

**编辑：**我尝试将 admin.autodiscover() 移动到 urls.py 的底部，没有变化。异常发生在 django/utils/importlib.py 的 import_module 第 35 行 __ import __(name) 中，此错误导致其他应用程序出现多个错误。我说其他安装的应用程序仍然有效，但我发现它们返回错误。当我提交投票时，我的投票应用程序（是的，标准的 Django 入门投票应用程序）将返回相同的错误。我应该发布完整的跟踪吗？

这是我的 INSTALLED_APPS 设置

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.markup',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'djcelery',
    'bootstrap_toolkit',
    'registration',
    'apps.examples',
    'apps.polls',
    'apps.wiki',
    'south',
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:40:38.297

[http://codepatter.com/2009/04/10/how-to-add-locations-to-python-path-for-reusable-django-apps/](http://codespatter.com/2009/04/10/how-to-add-locations-to-python-path-for-reusable-django-apps/)

归功于此解决方案的上述链接。

隐藏在“应用程序”目录中的可重用应用程序没有被作为我的 python 路径的一部分。将此添加到您的设置文件以解决此问题。

```
import sys

PROJECT_ROOT = os.path.dirname(__file__)
sys.path.insert(0, os.path.join(PROJECT_ROOT, "../apps")) 
```

我的设置在他们自己的目录中，所以我使用“../apps”向上导航一个目录以找到应用程序目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:01:49.857

您是否添加`apps.wiki`了`settings.py`on 参数`INSTALLED_APPS`？

并尝试将该`admin.autodiscover()`行向下移动到 的最底部`urls.py`，使其成为该文件中的最后一行。（基于[2079898](https://stackoverflow.com/questions/2079898/what-happen-when-i-add-a-django-app-to-installed-apps)）

# virtualbox - 如何使用桥接网络连接创建 VirtualBox 图像模板

> ID：15122265
> 
> 赞同：0
> 
> 时间：2013-02-27T20:57:07.510
> 
> 标签：virtualbox

我需要使用桥接网络连接创建 VirtualBox 图像。它应该在另一台机器上启动，没有任何问题或警告，桥接连接可用作 eth0。

.vbox 配置具有 BridgedInterface 元素，但它包含接口名称并在另一台机器上打开时发出警告：

```
<Adapter slot="0" enabled="true" MACAddress="080027111111" cable="true" speed="0" type="82540EM">
      <DisabledModes>
        <NAT>
          <DNS pass-domain="true" use-proxy="false" use-host-resolver="false"/>
          <Alias logging="false" proxy-only="false" use-same-ports="false"/>
        </NAT>
      </DisabledModes>
      <BridgedInterface name="en0: Wi-Fi (AirPort)"/>
    </Adapter> 
```

我可以用 VmWare 做到这一点（使用桥接连接启动图像时没有警告）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:30:33.823

虽然我无法配置桥接连接，但我可以配置 NAT 和端口转发以实现相同的（无缝）安装体验。使用 NAT 端口转发的配置：

```
<Adapter slot="0" enabled="true" MACAddress="080027111111" cable="true" speed="0" type="82540EM">
      <NAT>
        <DNS pass-domain="true" use-proxy="false" use-host-resolver="false"/>
        <Alias logging="false" proxy-only="false" use-same-ports="false"/>
        <Forwarding name="Tomcat" proto="1" hostport="8443" guestport="8443"/>
      </NAT>
</Adapter> 
```

# class - 如何从 sqlite 在 Python 中动态创建类的实例

> ID：15122266
> 
> 赞同：0
> 
> 时间：2013-02-27T20:57:14.333
> 
> 标签：class, python-3.x

我需要查询表，并为数据库中的每一行创建一个 Car 类的实例。我已经达到了这一点，但我收到了一个错误

return [Car(*row) for row in rows] TypeError: **init** () 接受 1 个位置参数，但给出了 7 个……汽车表有 6 个属性……哎呀！

```
import sqlite3 as lite

def db_connect():
        con = lite.connect('ins.sqlite')

    with con:
        cur = con.cursor()
        cur.execute('select * from cars;')
        rows = cur.fetchall()
        for row in rows:
            #return (row) #Use list comprehension to get all rows
            return [Car(*row) for row in rows]

class Car:
    def car_info(self):
        'Add all the necessary methods and properties you want'
        a = db_connect()
        return a 

   def __init__(self, **kwargs):
    self.variables = kwargs

def main():
    x = Car() #Create a Object x
    a = x.car_info() 
    ok = tuple(map(str, a)) #convert float data into string
    print ('Make           Model          Model     Displacement     
            Power  Luxury')
    print ('        '.join(ok))

main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:03:33.747

这显然是不对的：

```
for row in rows:
    #return (row) #Use list comprehension to get all rows
    return [Car(*row) for row in cur] 
```

我认为这应该是

```
return [Car(*row) for row in rows] 
```

你明白这是为什么吗？ `rows`已设置为从数据库中提取的所有数据（所有行）。然后，“列表理解”将调用`Car()`每一行以将其转换为`Car`. 列表理解中有一个隐式循环，所以你不要把它放在一个`for`循环中。

另一个主要问题：您需要编写一些代码`Car.__init__()`才能实际`Car`从一行中创建一个实例。类中的`__init__()`函数`Car`需要接受一系列参数，相同的数据将出现在数据库的每一行中，然后需要将每个参数存储在`self`.

这对于课堂项目来说非常明显。您应该`Car`按照老师的要求设计课程。但我通常会建议该`car_info()`函数不应该在类中；该类应该只实现`Car`. 所以这个类应该有一个`__init__()`函数来创建一个类实例，一个`__str__()`生成一个表示类实例的漂亮输出字符串的函数，以及其他适当的方法函数；然后你可以有一个函数去数据库，拉出所有的行并`Car`从每一行中创建实例。或者，如果您想要一个提取行的类函数，那么所有数据库代码都应该在类中。`db_connect()`按照目前的设计，这是一个普通的功能，但看起来很奇怪`car_info()`是一个方法函数……但它是一个对值不做任何事情的方法函数`self`，所以它并不是一个真正的好方法函数；它真的应该是一个类函数。但正如我所说，如果你的老师想要这样做，就这样做。

# c# - 在内存中绘制一个实心多边形（不在屏幕上）

> ID：15122269
> 
> 赞同：0
> 
> 时间：2013-02-27T20:57:23.520
> 
> 标签：c#, arrays, polygon

我需要在内存中绘制一个实心多边形（进入二维数组）并用数值“填充”多边形（比如“3”）。

我希望在 C# 中做到这一点。

我正在使用 Catfood 的 Shapefile 阅读器从 Shapefile 中获取实心多边形（非常好）。

有任何想法吗？

* * *

在我已经“映射”了代表圣地亚哥周围道路网络的 16,000 条折线（它们显示为数字“9”）之后，我将附加这个 2D 数组的一小部分。我希望通过上传实心多边形的 shapefile 和数字“3”的“绘图”来做同样的事情。 ![内存中“地形图”的一小部分](../Images/9712e20622112275fbc9efea24a2e029.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:08:41.587

去获取[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)扩展。这将允许您在图像内存中绘制几乎任何您想要的东西。

或者，您可以制作一个 DrawingVisual，用它绘制任何您想要的东西，然后渲染到图像目标；请参阅：[此示例](http://msdn.microsoft.com/en-us/library/aa969775.aspx)

如果你想通过 System.Drawing 路线；

```
using System.Drawing;

Bitmap bmp = new Bitmap(200, 100);
Graphics g = Graphics.FromImage(bmp);
g.DrawLine(Pens.Black, 10, 10, 180, 80); 
```

REF:(Henk Holterman)[在不使用 Windows 窗体的情况下绘制 C# 图形](https://stackoverflow.com/questions/2425033/c-sharp-graphics-without-windows-form)

但是我怀疑（根据措辞）这是家庭作业，并且您被告知要手动完成；

所以; 对于你想要 Bresenham's Line Algorithm 的线条，然后用填充算法填充它们；[看到这个](http://www.sunshine2k.de/coding/java/TriangleRasterization/TriangleRasterization.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:02:40.390

在 C# 中，您可以使用 Bitmap 类进行任何您想要的屏幕外绘图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:02:55.477

创建一个`Bitmap`，从中获取一个，`Graphics`调用`FillPolygon`.`Graphics`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T21:46:33.990

由于您正在绘制二维整数数组（据我在编辑问题后所见），您似乎应该实现自己的多边形填充，将数字存储在二维数组中。为此，您可以使用这篇文章[Good algorithm for drawing solid 2-dimensional polygons？](https://stackoverflow.com/questions/356968/good-algorithm-for-drawing-solid-2-dimensional-polygons)

另一个解决方案是一个小解决方法。您可以使用已经实现`PolygonFill`的填充位图中的多边形。看一下这个。我必须警告您，获取位图像素非常慢，为此您可以使用一些 FastBitmap 实现。在这里，我将使用常规位图。

```
Bitmap bmp = new Bitmap(0,0,mostRightPoint.X - mostLeftPoint.X, mostUpperPoint.Y - mostLowerPoint.Y);
//this implies that you are on the northern hemisphere
Graphics g = Graphics.FromImage(bmp);
g.Clear(Color.White); //clear the whole bitmap into white color
int [] points = new points[nmbOfPoints];

for(int i = 0;i<nmbOfPoints;i++)
{
      //put the points in the points array
}
g.FillPolygon(Brushes.Black, points);
g.Dispose(); 
```

现在您应该遍历位图，在像素为黑色的那些地方，将数字 3 放入您的 2D 数组中，就像这样。

```
for(int i = 0;i<bmp.Width;i++)
for(int j = 0;j<bmp.Height;j++)
if(Bitmap.GetPixel(i,j) == Color.Black)
{
     2DArray[mostLeftPoint.X + i, mostLowerPoint.Y + j] = 3;
} 
```

我想你明白了这个问题和一个可能的解决方案。

# php - 搜索 php + mysql 关闭词？

> ID：15122270
> 
> 赞同：-2
> 
> 时间：2013-02-27T20:57:28.867
> 
> 标签：php, mysql, search, tags

首先对不起我的英语...

我在数据库上有一个标签字段，我正在搜索

```
SELECT * FROM table WHERE tags LIKE '%$keyword%' and tags LIKE '%$keyword%' 
```

我按空格分隔标签，例如；

```
 america  england  france 
```

我想向您展示我的表格结构

```
id | title | tags

1    title1  america france
2    title2  american english
3    title3  england  french 
```

例如，当我想搜索“美国”时

结果是 title1 和 title2 因为 **美国**和**美国**标签看起来像同一个词..

我怎样才能使它们独一无二？当我搜索美国时，结果应该只有 title1 ......

感谢您的帮助，希望您能理解我的问题。祝您有美好的一天

编辑 ：

感谢**Akam**，他写了解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:01:12.280

你可以使用这样的东西：

```
SELECT *
FROM tbl
WHERE CONCAT(' ', tags, ' ') LIKE CONCAT('% ', 'america', ' %') 
```

请[在此处](http://sqlfiddle.com/#!2/12ccf/1)查看小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:09:51.817

您还可以使用 MySQL 的 REGEXP 而不是 LIKE 使用单词边界修饰符来仅匹配整个单词。您的查询将如下所示：

```
SELECT * FROM table WHERE tags REGEXP '[[:<:]]$keyword[[:>:]]'; 
```

如果您需要，这还有一个额外的好处，就是让您可以在单个查询中查找与给定标签集的任何（或全部）匹配的行：

```
SELECT * FROM table WHERE tags REGEXP '[[:<:]]$keyword_one[[:>:]]|[[:<:]]$keyword_two[[:>:]]' 
```

请注意 REGEXP 条件中两个表达式之间的管道`|`字符，这意味着它将匹配至少匹配其中一个标记的任何记录。

我没有亲自测试过这种方法的性能，但在其他 StackOverflow 帖子中读到它几乎等同于开头`LIKE`带有`%`通配符的 a（因为这种类型的查询会导致 MySQL 不使用索引）。所以我想这对你来说是最好的选择。

更多信息在这里：[http ://dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

# android - 在 Android Chrome/Webkit 上用作背景图像或带有 img 标签时模糊 SVG

> ID：15122272
> 
> 赞同：0
> 
> 时间：2013-02-27T20:57:36.453
> 
> 标签：android, svg, image, inline

Chrome 版本：25.0.1364.123 | 操作系统：安卓

 ``Chrome for Android 在密集像素显示器上渲染 css 背景 SVG 和 img 标签 SVG 非常糟糕。我的 GS3 和 Nexus 7 都有问题。

为什么它会像光栅图像一样输出 SVG？我尝试将 SVG 保存为 4 倍大，将宽度和高度属性放在 imgs 上，然后使用 CSS 更改大小，但仍然没有运气。

我知道我可以将 SVG 内联，但内联 SVG 完全破坏了 IE8 或更低版本的网站。我拒绝使用多个媒体查询和不同大小的 png 来弥补这个错误。

我附上了一些截图，一张来自 Chrome，一张来自原生默认浏览器。与 Chrome 相比，默认浏览器似乎可以很好地处理背景 SVG。另一方面，我还附上了一张 Firefox 截图；为什么 Gecko 可以处理这个问题，而 Android 上的 Webkit 却不能？我并不是说 Webkit 是罪魁祸首，因为我 iPad 3 上的 Chrome 可以处理所有事情。看看这里的屏幕：

[http://jsfiddle.net/h5SJP/](http://jsfiddle.net/h5SJP/)``

# java - 套接字侦听器正在杀死我的 CPU，如何提高我的代码的性能？

> ID：15122276
> 
> 赞同：3
> 
> 时间：2013-02-27T20:57:57.730
> 
> 标签：java, multithreading, sockets, listener, port

我已经实现了一个套接字侦听器来读取从 GPS 发送的数据，但它消耗了我 90% 的 CPU。我知道这是我的代码造成的，但我看不到在哪里。

这是我的主要课程：

```
public class PortToDB {

    ServerSocket serverSocket = null;

    public void listenSocket(){
        try{
            serverSocket = new ServerSocket(50000);
        } catch (IOException e) {
            System.out.println("Could not listen on port 50000\. " + e);
            System.exit(-1);
        }

        while(true){
            GPSData gd;
            try{
                gd = new GPSData(serverSocket.accept());
                Thread t = new Thread(gd);
                t.start();
            } catch (IOException e) {
                System.out.println("Accept failed: 50000\. " + e);
                System.exit(-1);
            }
        }
    }

    public static void main(String[] args) {    
        PortToDB portToDb = new PortToDB();
        portToDb.listenSocket();
    }
} 
```

这是我的可运行类：

```
class GPSData implements Runnable {

    private Socket client;
    DBHandler dbhandler = new DBHandler();

    GPSData(Socket client) { this.client = client; }

    public void run(){
        String line;
        BufferedReader in = null;

    try{
        in = new BufferedReader(new InputStreamReader(client.getInputStream()));
    } catch (IOException e) {
        System.out.println("in or out failed");
        System.exit(-1);
    }

    while(true){
      try{
          if((line = in.readLine()) != null){
              dbhandler.dbInsert(line);
          }
      } catch (IOException e) {
          System.out.println("Read failed");
          System.exit(-1);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T21:22:55.430

如果`readLine()`返回`null`，您必须关闭套接字，退出读取循环，然后忘记该客户端。你在 EOS 旋转。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T21:01:45.937

不要为每个传入请求创建新线程，而是使用线程池：

```
private ExecutorService executor = Executors.newFixedThreadPool(15);

// ...

gd = new GPSData(serverSocket.accept());
executor.submit(gd); 
```

这样，您将消除在接收请求时创建无限线程的开销，而是在打开套接字端口接收请求之前创建有限线程。

* * *

`null`此外，正如@EJB 所说，每当您收到来自`readLine()`作为流结束（EOS）的指示符时，退出客户端 for 循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:56:45.050

感谢所有回答我问题的人。

我通过结合 Eng.Fouad 和 EJP 的建议解决了这个问题：

这是我在代码中更改的内容：

执行人：

```
 private ExecutorService executor = Executors.newFixedThreadPool(15);

    try{
        gd = new GPSData(serverSocket.accept());
        executor.submit(gd);
    } 
```

循环控制：

```
 try{            
        while((line = in.readLine()) != null){         
        dbhandler.dbInsert(line);
        }
    } 
```

现在该过程停留在 0% :)。

感谢 EJP 和 Eng.Fouad。

# javascript - 是否可以隐藏浏览器窗口的滚动条而不影响页面的可滚动性？

> ID：15122280
> 
> 赞同：1
> 
> 时间：2013-02-27T20:58:04.617
> 
> 标签：javascript, html, css, scroll

[注意：我使用的是最新版本的 Chrome。]

我正在开发一个使用大量 JavaScript 驱动布局的 Web 应用程序。我遇到的主要问题是某些布局使窗口的垂直滚动条出现（因为内容溢出窗口），这会在布局过程中影响页面的宽度。在大多数情况下，我通过两次调用布局函数来解决这个问题——第一次调用使滚动条出现，第二次调用使用了正确的页面宽度。不过，这仍然是最经常出现的头痛。

我想通过完全删除默认滚动条来解决这个问题，然后实现一个轻量级的自定义滚动条，它透明地浮动在内容*之上*，而不是影响页面的宽度。我似乎无法删除窗口的滚动条，即使使用鼠标滚轮也无法滚动。[这是一个 JSFiddle 示例](http://jsfiddle.net/xmrFr/)。

如您所见， using`overflow-y: hidden`隐藏滚动条但无法滚动，`overflow-y: visible`并使滚动条出现。是否可以隐藏窗口的滚动条而不影响窗口的可滚动性？

*请注意：*我说的是浏览器窗口的滚动条，而不是其中可滚动元素的滚动条。两者在性能方面以及在不同浏览器和移动平台上的行为方面都非常不同。

* * *

### 我的沉思。

我可以看到几种方法来实现这一点。

1.  我可以使用 JavaScript 来获取 body 标签的高度，然后模拟滚动和我的自定义滚动条。不过，出于性能和跨平台兼容性的原因，我很确定我更喜欢浏览器进行本机滚动。我相当肯定这也会在移动浏览器上滑动滚动。
2.  在较新版本的 WebKit 中，我可以使用 CSS: 隐藏滚动条`body::-webkit-scrollbar { display: none; }`。这是完美的，但它不会帮助 Opera 或 Firefox 用户。（拧 IE 用户。）

如您所见，这些方法都不是好方法，所以我真的需要您的意见。

# actionscript-3 - AS3 沿直线路径的额外运动

> ID：15122283
> 
> 赞同：2
> 
> 时间：2013-02-27T20:58:11.163
> 
> 标签：actionscript-3, math, actionscript

我正在尝试制作 shmup 并尝试制作特定的“子弹图案”。基本上，我有一个敌人发射了一些围绕一个圆圈移动的子弹。假设那个子弹圈向右移动。接下来，我希望圆自行塌陷，因此我在子弹的 x 和 y 速度上添加了第二个脉冲。从本质上讲，发射的子弹的形状在行进时看起来像这样（我希望这个伪劣的符号是有意义的）：

```
O  o  •  o  O 
```

这样可行。

然后我只想让它折叠它的垂直定位，而不是水平放置，所以它看起来像这样：

```
O  —  O 
```

我也可以这样做。但是，如果我尝试对角地拍摄这个圆圈，或者在完全水平或垂直之外的方向拍摄，它会有点崩溃。

这是我正在使用的代码，带有 clusterGrowthX & Y 的部分是我遇到问题的部分。解决方案可能正盯着我看，但我现在无法弄清楚。有任何问题，尽管问。谢谢。

```
 for(var j:int = 0; j < _info.clusterAmount; j++)
            {
                var around  : Number = _info.angle - (_info.clusterRange/2) + (_info.clusterRange/_info.clusterAmount/2) + j * (_info.clusterRange/_info.clusterAmount);
                var xOff    : Number = (Math.cos(around) * _info.clusterRadius);
                var yOff    : Number = (Math.sin(around) * _info.clusterRadius);

                var bullet = new _info.bulletShape(_info);
                bullet.x = startPoint.x + xOff;
                bullet.y = startPoint.y + yOff;
                if(_info.dParent is PlayerControl)
                {
                    bullet.x += Math.cos(_info.angle) * 40;
                    bullet.y += Math.sin(_info.angle) * 40;
                }
                var sign    : Number = (_info.angle < 0) ? -1 : 1;

                trace(Math.cos(around),Math.sin(around));

                bullet.info.vx += Math.cos(around) * _info.clusterGrowthX;
                bullet.info.vy += Math.sin(around) * _info.clusterGrowthY;

                bullet.rotation = _info.angle * 180 / Math.PI;
                _info.dLevel.addChild(bullet);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T21:00:29.000

您需要做的是让您的 clusterGrowth 沿任意角度增加和减少。

那么我们如何沿任意角度投影一个点呢？

```
var amountOfOffset:Number = 10// how far along the angle you want to go.
var angleInDegrees:Number = 45; // this is the angle you want it to expand on.
var angleInRadians:Number = angleInDegrees * 0.0174532925;
clusterGrowthX = amountOfOffset * cos(angleInRadians);
clusterGrowthY = amountOfOffset * sin(angleInRadians); 
```

你应该这样做。

您要问的内容与在圆上查找点非常相似： [Find the point with radius and angle](https://stackoverflow.com/questions/2887513/find-the-point-with-radius-and-angle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T21:03:06.613

Tween / Tweenlite 库。解决您的所有问题 ^_^ 简单、轻松、干净、优化到天堂。

# javascript - 发布带有新行的推文

> ID：15122284
> 
> 赞同：6
> 
> 时间：2013-02-27T20:58:14.413
> 
> 标签：javascript, api, twitter, utf-8

我知道推特说用户不应该在推文中使用新行，因为它是否显示取决于客户端，但我编写了一个将推文绘制到推特时间线的应用程序 aLa [http://www.drawatweet.com](http://www.drawatweet.com)。所以它是必须的。

问题是，在我尝试了所有可能的方法之后，我无法强制将推文分成多行。我已经修改了他们发布它的方式，并发送了与 drawatweet.com 不显示的完全相同的“换行符”代码。

我尝试使用 twitter api 和 twitter 意图推文页面但没有成功。

另一个例子是它的[http://www.preservatweets.com/](http://www.preservatweets.com/)使用多行来显示消息，而且，我再次使用相同的机制，但我的新行不起作用。

我开始认为 Twitter 对这个“应用程序”有一些安排，并且它正在被推荐人检查。我知道这听起来很疯狂，但我找不到另一个合乎逻辑的答案。有人知道它是如何工作的吗？

**更新**

不可能在 twitter 中使用新行。我要做的是生成非常大的字符串（内部没有空格）和新行（或空格），如果两个字符串都不可分割，将强制换行。

在此先感谢贡萨洛

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-02T13:47:16.147

最简单的方法是..

```
var msg = "This is a test message. \n is used for new line character.";
var twitterHref = "http://twitter.com/intent/tweet?text=" + escape(msg); 
```

然后将其动态设置为您的`<a/>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T21:48:34.007

Twitter 的网站*从不*在推文中显示新行，看起来就是这样。有些客户端会显示新行，但 Twitter 不会。他们只是将它们显示为空间。不过，他们确实在推文中留下了实际的换行符。

*看起来*drawatweet 工作的原因是因为自动换行。使用什么字符或字符集并不重要，使用*多少*字符也不重要。如果推文中的下一个单词太长而无法容纳其段落的宽度，它将换行。他们用块字符制作了“单词”（不含空格的字符串），但您可以使用任何您想要的字符。

要对此进行测试，请将它们的新行替换为空格。它仍然包裹。您还可以在第二行添加一个空格，您会看到新行*没有*保留，因为第二行的第一部分现在将位于第一行。用您自己的角色替换积木，它也会起作用。

所以解决方案是像他们一样伪造它，并使线条足够长以始终换行。如果您正在处理单个“单词”，您可以使用 unicode `no-break space`( `%C2%A0`) 替换您不希望它换行的空格。您也可以用它填充短线，以使它们足够长以包裹。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/3GMkf/)]]]

```
<a href="https://twitter.com/intent/tweet?text=123456789012345678901234567890%0A123456789012345678901234567890%0A123456789012345678901234567890" target="_blank">long lines with \n - works!</a><br />
<a href="https://twitter.com/intent/tweet?text=123456789012345678901234567890%20123456789012345678901234567890%20123456789012345678901234567890" target="_blank">long lines with spaces instead of \n - works! (same as \n)</a><br />
<a href="https://twitter.com/intent/tweet?text=123456789012345678901234567890%0A12345678 9012345678901234567890%0A123456789012345678901234567890" target="_blank">long lines with \n - space in line - doesn't work</a><br />
<a href="https://twitter.com/intent/tweet?text=123456789012345678901234567890%0A12345678%C2%A09012345678901234567890 %0A123456789012345678901234567890" target="_blank">long lines with \n - no-break space (%C2%A0) in line - works!</a><br />
<a href="https://twitter.com/intent/tweet?text=12345678901234567890%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%0A12345678901234567890%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%0A12345678901234567890" target="_blank">short lines with \n - no-break space (%C2%A0) padding - works!</a><br /> 
```

# core-data - 具有多个版本的核心数据迁移（轻量级）

> ID：15122285
> 
> 赞同：0
> 
> 时间：2013-02-27T20:58:16.713
> 
> 标签：core-data, migration

我使用 ABC.xcdatamodel 开发了核心数据存储。分发应用程序版本 1。

需要对属性名称进行一些简单的更改，所以我创建了一个新版本的 ABC 2.vcdatamodel。分发了应用程序版本 2。效果很好。迁移是完美的。

然后，我需要进行一些更简单的更改（添加一个属性），因此我创建了另一个基于 ABC 2 的新版本；ABC 3.xcdatamodel。从版本 2 更新时自动迁移失败。

但是，如果我尝试从版本 1 构建（使用 ABC.xcdatamodel）升级，一切都会像魅力一样。

我错过了一些明显的东西吗？想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:02:02.507

一个想法 - 您可能无意中修改了您的第 2 版数据模型，使其不再匹配在修改之前创建的第 2 版存储。现在，当加载具有“真实”版本 2 存储的实例时，找不到匹配的数据模型，因此无法从 2 转换为 3。在处理版本之前，您是否将版本 2 模型签入到 git/svn 3? 是否显示为已修改？

请注意，“修改”并不一定意味着添加任何属性 - 只是任何会改变 Core Data 用于定义版本的哈希值的小东西。

# google-checkout - 如何将已计算的税款总额传递给 Google Checkout HTML API

> ID：15122286
> 
> 赞同：0
> 
> 时间：2013-02-27T20:58:16.837
> 
> 标签：google-checkout, android-pay

我有一个处理销售酒精的购物车系统，并且在我所在的州销售时，每件商品都有非常具体的税收规则。

我想使用 Google Checkout 但我无法只传递税额，相反，我只能找到 Google 想为我计算税率的地方，这不起作用，因为您无法定义我需要的规则他们的图形用户界面。

我只想将税款总额传递给谷歌......即

```
<input type="hidden" tax_total="12.17"> 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:51:40.933

除了将预先计算的税款作为*行项目*（订单行项目）发送之外，您还可以查看[Merchant Calculations API](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Merchant_Calculations_API) - 但是它仅在 XML API 中可用。

Google Checkout 的前提是，唯一确定送货目的地的时间是**在**您的买家登录并为订单选择或创建送货地址之后。这就是为什么除非您有统一的运费/税费（对于所有可能的交付目的地），否则必须计算它们。

# c# - 是否有特定的设计模式来帮助管理外部连接和并发请求？

> ID：15122287
> 
> 赞同：0
> 
> 时间：2013-02-27T20:58:28.027
> 
> 标签：c#, multithreading, design-patterns

我目前正在为 Web 应用程序使用外部 API。当用户点击一个按钮时，我打开连接，进行适当的调用，然后关闭连接。这可以正常工作，但是，在多线程 Web 环境中，当同时单击两次时，应用程序崩溃......这是由于连续调用关闭连接所致。

理想情况下，我想在第一个请求上打开一个连接，然后进行所有调用。如果有一个并发请求进来，并且它看到有一个打开的连接，那么它应该使用它。然后应该只关闭连接如果当前没有处理请求。

我开始编写一些代码来实现我想要的，但我想知道是否有任何人都知道的特定设计模式来解决这个问题，或者是否有人有任何建议......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:24:25.683

我猜你正在寻找[lock](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.110%29.aspx)。
我不知道我头顶上有合适的图案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:11:07.737

1-为每个请求建立新连接的成本是多少？

2-图书馆作者是否发布了任何指南来限制连接数？如果不是，那么完全不在您的设计中引入锁定或多线程将非常有帮助。

这是我在深入研究多线程场景之前问自己的最初问题。

同样在您上面解释的情况下，您永远无法确定下一个请求何时到来，因此如果您使用该类的单个对象，那么使用 wikipedia 中解释的双重检查锁定技术会很有帮助

[双重检查锁定](http://en.wikipedia.org/wiki/Double-checked_locking)

# arrays - R 三维数组

> ID：15122291
> 
> 赞同：-7
> 
> 时间：2013-02-27T20:58:47.780
> 
> 标签：arrays, r

我有一个 3D 数组 - arr

```
dim(arr)
[1] 2000   22    3 
```

让我们调用 2000 `dim1`、 22`dim2`和 3 `dim3`。我想做这样的事情：

```
for(d1 in 1:dim1){
    for(d2 in 1:dim2){
        #compute the mean across the 2000 values of arr[d1,d2]
        m<-mean(arr[d1,d2])
    }
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T21:30:40.990

因此，您提出问题的方式有点草率，但是您可能尝试做的一个示例是对其中 3 个数组中的每一个取每个 2000 x 22 数组的平均值。这是如何做到的：

```
arr = array(1, dim=c(2000,22,3))
dim(arr)

m = NULL
dim3 = 3
for(d3 in 1:dim3){
    m[d3] = mean(arr[,,d3]) 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T21:21:22.457

我猜你可能想要这个结果：

```
m <- apply(arr, 1:2, mean) 
```

您当前的代码将在每次内部迭代时覆盖 m 并且您最终会得到一个值，并且在遇到 时也会抛出维度不匹配错误`arr[d1,d2]`。如果您想使用 for-loop starategy，您需要定义`m`为 dim1 x dim2 矩阵，然后使用`m[d1,d2] <- mean(arr[d1, d2, ])`.

下次如果您想避免所有这些反对意见，为什么不使用小示例对象进行一些测试：

```
arr <- array(1:5*4*3, c(5,4,3)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T22:21:42.590

没关系，我明白了。这就是我创建 3 [4 x 6] 矩阵列表的方式：

```
arr = array(1, dim=c(6,4,3));
l<-list(length=dim(arr)[3]);
for (i in 1:dim(arr)[3]){
    l[[i]]<-arr[,,i];
} 
```

干杯

# c++ - 混合 C/C++ 源代码：在 C 代码中获取 sizeof(C++ struct)

> ID：15122295
> 
> 赞同：2
> 
> 时间：2013-02-27T20:58:57.560
> 
> 标签：c++, c, compilation, compiler-errors, mixed-code

在这个项目中，我需要从 C 文件中获取头文件中结构的大小。

我不能在 C 文件中包含头文件，因为该结构包含不会在 C 中编译的类。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T21:02:15.230

在 C++ 中提供一个实用函数：

```
extern "C" size_t ReturnSizeOfMyStruct(void) {
 return sizeof(MyStruct);
} 
```

然后在您的 C 代码中调用它：

```
extern size_t ReturnSizeOfMyStruct(void);
size_t howBig = ReturnSizeOfMyStruct(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T21:19:21.480

您可以在`.h`文件中声明：

```
extern const size_t SIZE_OF_MY_STRUCT; 
```

并`SIZE_OF_MY_STRUCT`在`.cpp`文件中定义为：

```
extern const size_t SIZE_OF_MY_STRUCT = sizeof(MyStruct); 
```

所以你不会有函数调用的开销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:05:28.823

如果`struct`实际上正在使用 C++ 特性（成员函数，`private`//成员，构造函数和`protected`/`public`或析构函数，继承自另一个类/结构）[或者反过来具有使用这些特性中的任何一个的成员]，那么您没有太多选择：

1.  编写一个返回大小的函数，该函数被编译为 C++，但具有`extern "C"`调用约定。
2.  重新组织你的代码，这样你就不需要以其他方式在你的 C 代码中使用 sizeof(C++ struct) 了。
3.  更改您的 C 代码，使其与 C++ 兼容并使用 C++ 编译器对其进行编译。

上述主题可能还有其他一些变体，但本质上，假设它是一个不能用 C 编译的“C++ 结构”，你就会坚持以某种 C++ 友好的方式来修复它。

显然，如果 C++ 结构没有使用任何 C++ 特性——它只是一个普通的旧数据，那么解决方案显然是将结构移出当前标头并将其放在可以包含在 C 和 C++ 中的标头中.

# cuda - CUDA 中跨块的联合访问？

> ID：15122297
> 
> 赞同：1
> 
> 时间：2013-02-27T20:59:05.447
> 
> 标签：cuda

假设我们有 16 个线程在块 1 上运行，另外 16 个线程在块 2 上运行。

每个线程从内存中读取 1 个 double：块 1 上的 16 个线程需要从内存地址 0-127 读取 16 个 double，块 2 上的 16 个线程需要从地址 128-255 读取。

我知道，由于合并访问，块 1 上的 16 个线程的内存读取可以在一个内存事务中完成。

我的问题是，当我们考虑这两个块时，我们需要多少内存事务，一个还是两个？换句话说，不同块的内存访问可以同时发生吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:34:57.560

块是完全独立的——硬件可能会选择（并且可能会）在不同的多处理器上启动它们。

来自不同块的线程将在不同的 warp 中运行。因此，不可能合并它们之间的内存访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T23:26:47.297

您至少需要两个内存事务。确保每个块的线程将在不同的扭曲中处理。

此外，即使线程已形成一个 warp 或占用相同的多处理器并共享 L1 缓存，来自 warp 的地址也会转换为 128B 或 32B 行（取决于缓存/非缓存模式），因此在缓存模式的情况下，您会至少需要 2 个事务，在非缓存模式的情况下需要 8 个事务。查看[这个](http://developer.download.nvidia.com/CUDA/training/cuda_webinars_GlobalMemory.pdf)非常有用的演示文稿，以更好地理解全局内存访问。

# c# - 如何从框架中获取页面实例？

> ID：15122299
> 
> 赞同：6
> 
> 时间：2013-02-27T20:59:13.753
> 
> 标签：c#, wpf, xaml, frame

我有一个在 xaml 中初始化的框架，如下所示：

```
<window>
   <Frame Name="myframe" NavigationUIVisibility="Hidden" Source="mypage.xaml"/>
</window> 
```

我正在尝试从包含 c# 代码中的框架（按顺序包含页面）的窗口获取页面实例，但我不知道如何获取它。

```
public partial class mywindow : Window
    {
        public mywindow()
        {
            BusinessLogic.Initialize();
            InitializeComponent();
            var a = myframe.Content;
         }
} 
```

我怎么得到它？

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-15T12:21:10.413

您的代码是正确的，但缺少内容的返回。

```
public partial class mywindow : Window
    {
        public mywindow()
        {
            BusinessLogic.Initialize();
            InitializeComponent();
            var a = (MyPage)myframe.Content;
         }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:33:33.067

我想这个解决方案应该可以解决问题吗？

[按类型查找 WPF 窗口中的所有控件](https://stackoverflow.com/questions/974598/find-all-controls-in-wpf-window-by-type)

```
 FindVisualChildren<Frame>(this).FirstOrDefault() 
```

# c# - C#将整数发送到python

> ID：15122300
> 
> 赞同：0
> 
> 时间：2013-02-27T20:59:14.903
> 
> 标签：c#, python, sockets, integer

我正在尝试使用套接字技术从在 pc 上运行的 C# 程序（服务器）将两个整数发送到 python 客户端脚本（在 Linux 机器上运行）。到目前为止，我能够发送字符串。

服务器：

```
TcpListener listener = new TcpListener(IPAddress.Any, 12345);
Invoke(new PrintMsg(printMsg), new object[] { "Trying to connect" });
listener.Start();

for(; ; ;)
{
   TcpClient client = null;

   try
   {
      client = listener.AcceptTcpClient();
      netStream = client.GetStream();
      Invoke(new PrintMsg(printMsg), new object[] { "Found client" });

      //send command to client
      ASCIIEncoding encoder = new ASCIIEncoding();
      byte[] buffer = encoder.GetBytes("Hello client");
      netStream.Write(buffer, 0, buffer.Length);
      netStream.Flush();

   }

   catch (Exception ex)
   {
      Invoke(new PrintMsg(printMsg), new object[] { ex.ToString() });
   }
} 
```

客户端代码是：

```
while True:
    msg = s.recv(1024)
    print 'SERVER:', msg 
```

所以我想将一个整数“放入”缓冲区数组，然后将其发送到 python 脚本。可能吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:06:13.420

很难从您的客户端代码中分辨出您用于建立 TCP 连接的客户端库类型。

为什么不使用一些支持 C# 和 Python 的消息队列实现，例如 ZeroMQ？如果您需要更复杂的数据结构传递，您还可以考虑使用一些内存键值存储解决方案来实现队列，例如 Redis。优点是消息队列服务器/客户端实现设计良好，您只需编写一两行代码即可在业务逻辑中发送/接收。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:13:27.297

在解决“我如何发送整数？”的问题之前，您需要解决一个更大的问题：“我如何发送消息？”

在 TCP 中，当您`send`在一侧调用时，即使它一次发送整个缓冲区（不能保证），另一端可能会在多个单独的`recv`调用中获取数据，而不是一次全部调用。`send`更糟糕的是，它可能会`send`在单个`recv`.

您可以使用更高级别的协议（例如 ZeroMQ，甚至 HTTP）来为您处理这些问题。但是如果你只想使用原始 TCP，你必须自己处理它。

一个明显的解决方案是像换行符（或 NUL 字节等）这样的分隔符——但当然你需要某种方式在消息中间转义换行符。另一种可能性是使用某种描述消息其余部分的标头，例如[netstring](http://en.wikipedia.org/wiki/Netstring)。或者，您可以使用像 JSON 这样的自定界消息类型。

许多非常简单的处理分隔符问题的方法会自动处理发送整数。JSON 将数字作为一种类型。或者您可以将整数作为字符串发送到网络字符串或换行符分隔的字符串上。

如果您真的想以某种“二进制”方式对数字进行编码，则必须选择一个表示，并编写代码以在每一侧与该表示进行转换。例如，如果您想将事物限制为 32 位有符号整数，并以大端 C 整数格式发送它们，那么 Python 代码就是`buf = struct.pack('!I', number)`and `number = struct.unpack('!I', buf)`.

但是您应该考虑是否需要二进制格式。作为人类，显然更难阅读和调试。它也更容易出错（例如，通过忘记字节顺序或字长）。并且简单的方法是有限的（例如，上述`!I`格式对于大于约 20 亿的数字将失败）。它甚至不一定更紧凑。通常，您会发送大量小数字，它们需要 2-3 个字节作为带有换行符的字符串，但 4 个字节是二进制形式。

这是基于行的数字阅读器的简单 Python 实现：

```
def read_numbers_off_socket(s):
    buf = ''
    while True:
        newbuf = s.recv(4096)
        if not newbuf:
            yield int(buf)
            break
        buf += newbuf
        lines = buf.split('\n')
        for line in lines[:-1]:
            yield int(line) 
```

但是你可以更简单地做到这一点[`s.makefile`](http://docs.python.org/2/library/socket.html#socket.socket.makefile)：

```
def read_numbers_off_socket(s):
    with s.makefile() as f:
        for line in f:
            yield int(line) 
```

# algorithm - 使用动态规划用定义数量的监督者监督价值最高的项目

> ID：15122302
> 
> 赞同：1
> 
> 时间：2013-02-27T20:59:25.967
> 
> 标签：algorithm, dynamic, dynamic-programming

我有这个问题，我想解决。我有 n 个项目，每个项目都有一个值 v 放在一行中。然后我有k个监督项，位置x的一个监督项可以监督x-1，x，x+1项。我要计算的是 k 主管可以使用动态编程监督的最大值。

例如。n = {1,2,3,4} v = {7,10,5,8} 这意味着职位 1 -> 17 的主管的总价值（可以覆盖 n = 1 和 2）。
位置 2 -> 22（可以覆盖 n = 1,2,3）。
位置 3 -> 23（可以覆盖 n = 2,3,4）。
位置 4 -> 19（可以覆盖 n = 3,4）。

那么如何计算给定数量的supervisor可以覆盖的最大值呢？
在这个例子中，有 1 个主管，我们得到最大值 23，有 2 个我们得到 36（选择 1 和 4），之后我们不能做得更好，因为所有项目都被覆盖了。

我曾尝试利用背包问题，但后来我陷入了如何解决覆盖重叠的问题。
我也尝试使用加权间隔调度问题，但它仅适用于计算可能的总最大值而不是 k 间隔的最大值。

我非常感谢有关如何使用动态编程解决此问题的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:52:33.710

对于 1 <= i <= n 和 0 <= j <= k 将 DP[i][j] 定义为这些监督项目中的最大值，当*j*个监督者可以设置时，索引在 {1..i} 中。然后 DP[i + 1][j + 1] = max(A, B, C) 其中

A = DP[i][j + 1] // 这涵盖了最后一个主管在*i-1*或更早的所有情况

B = DP[i-2][j] + val(i - 1) + val(i) + val(i + 1) // 将主管放在*i*

C = DP[i - 1][j] + val(i) + val(i + 1) // 将监督者放在*i+1*

给出 O(n*k)

# javascript - {name: "Name", value: 1} 是无效的 JSON？

> ID：15122306
> 
> 赞同：-1
> 
> 时间：2013-02-27T20:59:40.410
> 
> 标签：javascript, json

我有一个字符串，我试图将其转换为 JSON 对象并使用语法`var json = JSON.parse(myjson);`，但它说的是预期的令牌 }，但我看不到在哪里？

有谁知道这会在哪里？

```
[{name:"After", value:1},{name:"watching", value:1},{name:"you", value:1},{name:"at", value:3},{name:"Birmngm", value:1},{name:"my", value:1},{name:"new", value:2},{name:"athlete", value:1},{name:"to", value:1},{name:"follow.", value:1},{name:"Love", value:2},{name:"the", value:4},{name:"passion,", value:1},{name:"enthusiasm", value:1},{name:"and", value:3},{name:"big", value:1},{name:"smiles!!", value:1},{name:"Long", value:1},{name:"may", value:1}] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T21:01:02.057

这是完全无效的 JSON。必须引用每个键。例如

```
[{"name":"After","value":1}, ....
  ^--  ^--       ^--   ^-- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:06:30.503

如果您尝试构建 JS 对象，则提供的字符串是正确的。但是，为了创建有效的 JSON 字符串，您需要将键括在引号中。`name`因此，您应该将and封装`value`在双引号或单引号中。您可以使用[jsonlint.com](http://jsonlint.com)进行验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:01:47.093

它不是有效的 json。你需要像这样在你的键周围加上引号

```
{
    "name": "After",
    "value": 1
}, 
```

[JSONLint](http://jsonlint.com/)是调试 JSON 问题的好工具，它可以告诉您特定字符串是否有效并指出问题所在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T21:02:00.070

这是有效的 JavaScript，不是有效的 JSON。您可以打开 chromes 开发者控制台，并将其字符串化以获得有效的 JSON：

```
[{"name":"After","value":1},{"name":"watching","value":1},{"name":"you","value":1},{"name":"at","value":3},{"name":"Birmngm","value":1},{"name":"my","value":1},{"name":"new","value":2},{"name":"athlete","value":1},{"name":"to","value":1},{"name":"follow.","value":1},{"name":"Love","value":2},{"name":"the","value":4},{"name":"passion,","value":1},{"name":"enthusiasm","value":1},{"name":"and","value":3},{"name":"big","value":1},{"name":"smiles!!","value":1},{"name":"Long","value":1},{"name":"may","value":1}] 
```

# ajax - 通过ajax发送和接收httponly cookie时浏览器的正确行为应该是什么？

> ID：15122308
> 
> 赞同：2
> 
> 时间：2013-02-27T21:00:04.300
> 
> 标签：ajax, cookies, browser, httponly

我目前遇到 Firefox 的问题，它接收带有 httponly 标志的 cookie。但是，当随后的响应发送到服务器时，请求不包含任何 httponly 标志（这可能是正确的行为），但是当响应返回时，它返回 cookie 但是它没有附加 httponly 标志，正如我假设的那样它以与它相同的状态返回它。

那么这是正确的行为吗？我应该为每个请求手动更新服务器上 cookie 的 httponly 状态吗？还是应该在调用之间保持 httponly 状态？我确信每个浏览器可能会有一些不同的行为，但只是假设现代主流浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:18:11.860

发送此消息后不久，我发现：

[了解 HTTPOnly 标志的预期行为](https://stackoverflow.com/questions/10698349/understanding-the-intended-behaviour-of-httponly-flag)

这表明这是正确的行为，服务器必须不断附加 httponly 标志。似乎有点古怪，但只要我知道预期的行为是什么。

# sql - ORACLE 从 3 个表中选择

> ID：15122309
> 
> 赞同：0
> 
> 时间：2013-02-27T21:00:12.710
> 
> 标签：sql, oracle, subquery

我有从 Oracle 中的某些表中获取数据的问题；表方案：

学生（身份证、姓名、年份）

标记（ID、代码、标记）

课程（代码、定义、年份）

* * *

在学生> ID - 主键

IN MARKS> ID 和 CODE - 都是关键

在类>代码 - 主键

如您所见，有 3（三）张桌子，我想获取学生参加的所有课程。例如，约翰只有 2 个班级有 2 分，所以我想显示学生的姓名和他参加的班级。

所以我必须将 MARKS 连接到 CLASSES 以获取定义，然后将 STUDENTS 表连接到 MARKS 表。我试图创建一个子查询，但效果不佳。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:04:10.313

根据您的表结构，您加入的字段并不完全清楚，但您应该能够使用`JOIN`与此类似的表：

```
select s.name,
  m.mark,
  c.definition
from students s
inner join marks m
  on s.id = m.id
inner join classes c
  on m.code = c.code 
```

# python - 如何从 Flask 中的配置文件导入？

> ID：15122312
> 
> 赞同：48
> 
> 时间：2013-02-27T21:00:25.250
> 
> 标签：python, python-2.7, flask

我从[http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world](http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world)遵循了我的 Flask 项目的布局。

我有以下结构：

```
app/
    __init__.py
    views.py
    forms.py
    myFile.py
run.py
config.py 
```

在views.py，forms.py中我可以使用

```
from config import basedir 
```

但是我不能在 myFile.py 中使用它

我添加了

```
import Flask 
```

当我修改它时，Flask Web 服务器会重新启动，但它并没有说在 app/myFile.py 中找到了更改重新启动它只是重新启动。

我需要做什么才能使用

```
from config import basedir 
```

在我的python文件中。我没有看到`__init__.py`forms.py 有什么特别之处。

编辑：这是我的`__init__.py`文件：

```
from flask import Flask
from config import basedir

app = Flask(__name__)
app.config.from_object('config')
from app import views 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-02-27T23:13:16.770

当人们谈论 Flask 中的配置时，他们通常是在谈论将值加载到应用程序的配置中。`app.config.from_object('config')`在您上面的示例中，您的文件中可能有类似的`init.py`内容。然后所有配置值将被加载到`app.config`字典中。

然后在您的任何文件中，您只需导入应用程序对象即可访问该字典。我倾向于`app`通过`from flask import current_app as app`then来访问该对象，`app.config['MY_SETTING']`以获得我关心的值。[在文档中阅读更多内容](http://flask.pocoo.org/docs/config/)。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-10-14T12:53:14.240

经过一番摆弄（以及来自网络的一点帮助），我可以通过将代码更改为包含配置来进一步改进这一点：

```
app.config.from_object('config.ProductionConfig') 
```

这为配置启用了这种很酷的模式：

```
class Config(object):
    DEBUG = True
    DEVELOPMENT = True
    SECRET_KEY = 'do-i-really-need-this'
    FLASK_HTPASSWD_PATH = '/secret/.htpasswd'
    FLASK_SECRET = SECRET_KEY
    DB_HOST = 'database' # a docker link

class ProductionConfig(Config):
    DEVELOPMENT = False
    DEBUG = False
    DB_HOST = 'my.production.database' # not a docker link 
```

现在剩下的就是看看如何将测试配置集成到其中，但至少感觉不那么笨拙。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-23T12:26:40.337

我在我的烧瓶项目 - 根文件夹中创建了一个 config.json 文件，如下所示：

> 配置文件

```
{
    "mail_settings":{
        "MAIL_SERVER": "smtp.gmail.com",
        "MAIL_PORT": 465,
        "MAIL_USE_TLS": "False",
        "MAIL_USE_SSL": "True",
        "MAIL_USERNAME": "your_mail@gmail.com",
        "MAIL_PASSWORD": "your_password"
    },
    "database":{
        "MYSQL_HOST":"localhost",
        "MYSQL_USER": "user_name",
        "MYSQL_PASSWORD":"password",
        "MYSQL_DB":"database_name"
    }
} 
```

只需在我们要访问配置值的地方添加下面的代码。例如，我将在 app.py 中使用，如下所示：

首先导入flask json库：

```
import json 
```

第二次打开文件以读取json并将其存储在一些变量中，如下所示：

```
with open('config.json') as config_file:
    config_data = json.load(config_file) 
```

在创建一个 Flask 应用程序后添加以下代码，如下所示，命名为 app `app = Flask(__name__)`，用于访问 config.json - 配置值。

```
# mail configuration
mail_settings = config_data['mail_settings']
app.config.update(mail_settings)

# database configuration
db_settings = config_data['database']
app.config.update(db_settings) 
```

# debugging - 自添加 chrome.storage 以来，代码似乎没有执行

> ID：15122317
> 
> 赞同：0
> 
> 时间：2013-02-27T21:00:37.007
> 
> 标签：debugging, google-chrome, google-chrome-extension, local-storage, google-chrome-devtools

在调试器中查看我的扩展时，我的 chrome.tabs.query 代码似乎没有执行。我正在尝试使用 chrome.storage API 来记录访问 nytimes.com 上的文章的次数，并且由于我在开头添加了 chrome.storage 代码，因此调试器似乎没有进入 chrome.tabs.query功能。

```
var nytCount = chrome.storage.local.get["nyt"];

// if nytCount doesn't exist in chrome local storage, set to 0
if (nytCount === undefined)
{
    nytCount = 0;
}

/*
* Below is adapted from user Rob W at Stack Overflow (http://stackoverflow.com/questions/10413911/how-to-get-the-currently-opened-tabs-url-in-my-page-action-popup/10417327#10417327)
*
// Gets URL from currently active window (this should all be onload I suspect)*/
chrome.tabs.query({
    // Select active tabs
    active: true,
    // In the current window                              
    windowId: chrome.windows.WINDOW_ID_CURRENT 
}, function(array_of_Tabs) {
    // Since there can only be one active tab in one active window, the array has only one element
    var tab = array_of_Tabs[0];
    var title = tab.title;

    if (title.indexOf("NYTimes.com") !== -1)
    {
        nytCount++;
    }

    // rest of if conditions for those sites that have identifiers in tab titles
});

alert(nytCount); 
```

有任何想法吗？在我将 nytCount 初始化为 0 之前它工作得很好，但是当然它的值只能上升到 1，然后它会在下一次运行代码时重新初始化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:16:51.643

`chrome.tabs.query`仅当您想立即查询选项卡的状态时才应使用。

要监控您访问网站的频率，请使用其中一个[`chrome.tabs`事件](http://developer.chrome.com/extensions/tabs.html#events)，例如[`chrome.tabs.onUpdated`](http://developer.chrome.com/extensions/tabs.html#event-onUpdated). 为避免重复计算，您应该检查`changeInfo.status`属性是否“完整”。

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    var url = changeInfo.url; // String or undefined
    if (changeInfo.status == 'complete' && url && url.indexOf("nytimes.com") !== -1) {
        // TODO: increase counter by one
    }
}); 
```

你的下一个问题是如何`chrome.storage`使用。它是一个异步 API，因此您不能使用 getter 来读取实际值。此外，读取后的值不会神奇地保存回存储中。

对于存储计数器，我推荐`localStorage`over `chrome.storage`。它是一个同步 API，非常适合存储少量数据（例如计数器）。只能存储字符串，因此请确保在读取后将值转换为数字：

```
var nytCount = +localStorage.getItem('nyt') || 0;

// Whenever you want to increase the counter:
localStorage.setItem('nyt', ++nytCount); 
```

这假设只有一页与 nyt 变量交互。当变量被多个页面（例如选项+背景页面）使用（读/写）时，您不能依赖局部变量，并且必须在写入之前读取最新值：

```
localStorage.setItem('nyt', (+localStorage.getItem('nyt') || 0) + 1); 
```

如果您想采用异步路由 ( [`chrome.storage`](https://developer.chrome.com/extensions/storage.html))，您可以在加载时读取值（并延迟/排队`chrome.tabs.onUpdated`事件），或者始终在更新时读取+写入计数器：

```
chrome.storage.local.get('nyt', function(items) {
    var nyt = items.nyt || 0;
    chrome.storage.local.set({
        nyt: nyt + 1
    }, function() {
        // Only here, you can be certain that the value has been saved
        // Usually less than one millisecond
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:54:02.013

那么我看到的主要问题是`chrome.storage.local.get`调用是异步的并且有一个必需的回调。尝试将其更改为以下内容：

```
var nytCount = 0;
chrome.storage.local.get("nyt", function(items) {
    doStuff(items.nyt);
   // items.nyt is the value you want out of this
});

function doStuff(nyt){
  nytCount = nyt;
  if(nytCount == undefined)
    nytCount = 0;
  //put the rest of your code in here
  //so that it all runs after you get the number out of storage
} 
```

不要忘记通过`chrome.storage.local.set`调用来更新存储中的值。对于那个回调是可选的。

# javascript - Knockout js 将多个 observables 设置在一起

> ID：15122318
> 
> 赞同：0
> 
> 时间：2013-02-27T21:00:38.120
> 
> 标签：javascript, knockout.js

我想知道是否有任何方法可以使用单个对象更新整个视图模型。
例如，说我们的视图模型如下：

```
 Function ExampleViewModel(){
     this.name = ko.observable();
     this.lastname = ko.observable();
     this.phone = ko.observable();
    }
    var viewmodel = new ViewModel();
    ko.applyBindinings(viewmodel); 
```

然后假设我创建了一个对象，例如：

```
 var newObject = {name: "newname", lastname: "lastname", phone: 432} 
```

而不是单独设置每个可观察对象，如下所示：

```
 viewmodel.name(newObject.name);
             or
        viewmodel.name(newObject.name).lastname(newObject.lastname) etc etc 
```

我可以更新整个视图模型吗？

```
 viewmodel.update(newObject)? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:06:41.463

只需遍历对象：

```
for (var key in newObject) {
    if (viewModel[key] && ko.isObservable(viewModel[key])) {
        viewModel[key](newObject[key]);
    }
} 
```

# scala - 仅在模式匹配时产生

> ID：15122322
> 
> 赞同：15
> 
> 时间：2013-02-27T21:00:50.790
> 
> 标签：scala, for-loop, pattern-matching, yield

我正在基于循环和模式匹配构建不同案例类对象的列表。**我想排除（跳过）符合默认情况的项目**（本质上是过滤列表，并在一步中映射到类型）。

我可能对 Scala 太陌生，看不到所有的可能性。我的尝试：

```
 val events = for (ev <- data ) yield {

        ev.sport match {
            case "FOOTBALL" => new FootballEvent(ev)
            case "SOCCER" => new SoccerEvent(ev)
            case _ => None
        }

    } 
```

之后我可以过滤列表，但我怀疑有一些花哨的 Scala 方法可以做到这一点:)

如果您对如何最好地完成此操作有任何想法，请告诉我！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-27T21:07:57.360

并不是说它是 yield 语法，而是您可以将 collect 与模式匹配一​​起使用：

```
val events = data.collect { ev => ev.sport match {
     case "FOOTBALL" => new FootballEvent(ev) 
     case "SOCCER"   => new SoccerEvent(ev)
}} 
```

与众所周知的不同`.map`，`.foreach`它不会在“其他”情况下失败，而只会丢弃不匹配的项目。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-27T22:40:42.217

中的标准过滤器`for-yield`是用 获得的`x <- y if f(x,..)`。这是一个使用偏函数的示例。

```
val m: PartialFunction[Event, Event] = ev => ev.sport match {
  case "FOOTBALL" => new FootballEvent(ev)
  case "SOCCER" => new SoccerEvent(ev)
};

for { ev <- data if m.isDefindAt(ev)  
      val x = m(ev)
} yield x

// or, without the temporary binding:
for (ev <- data if m.isDefindAt(ev)) yield m(ev) 
```

请注意与另一个答案中提到的¹的相似性，它具有此签名并返回“通过将给定的偏函数 pf 应用于定义它的每个元素并收集结果而产生的新集合”。[`Traversable.collect`](https://scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.collection.Traversable)^(`def collect[B](pf: PartialFunction[A, B]): CC[B]`)

没有的替代方案`if`是 bwroga 已删除答案的变体：

```
for { ev <- data;
      x <- ev.sport match {
        case "FOOTBALL" => Some(new FootballEvent(ev))
        case "SOCCER" => Some(new SoccerEvent(ev))
        case _ => None
      }
} yield x 
```

这通过随后在初始映射之后迭代无（即“0 项”）或某些（即“1 项”）进行过滤。

* * *

¹如果有人能告诉我如何链接到“新”scaladoc 中的各个方法，我将不胜感激。

# jquery - 如果 TR TH 元素包含某些特定文本，则选择表中的所有 TR TD 元素

> ID：15122323
> 
> 赞同：-1
> 
> 时间：2013-02-27T21:00:53.657
> 
> 标签：jquery

如果同一表中的 TR TH 元素包含某些特定文本，我正在尝试使用 jquery 来选择表中的所有 TR TD 元素。然后，我想遍历所有 TR TD 元素。我尝试了很多方法都没有成功。我在文档中有多个表，它们具有不同的 th 元素，但在其他方面是相同的。

```
<tbody>
<tr>
<th>header1</th>
<tr><td>data1</td><tr>
<tr><td>data2</td><tr>
<tr><td>data3</td><tr> 
```

在这种情况下，如果 th = header1，则选择所有 tr td 元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:07:15.737

如果它只是一个维度，为什么你不这样做：

[编辑代码]

```
var td_selection = null ;
var th_to_check = $('tbody tr th') ;
if(th_to_check.text() == 'header1') {
     td_selection = th_to_check.children() ;
} 
```

?

但我认为最好的选择是玩类。将类设置为所需的 td，然后使用

```
td_selection = $('.td_class') ; 
```

# excel - 在 Excel VBA 中确定一个点的值

> ID：15122329
> 
> 赞同：5
> 
> 时间：2013-02-27T21:01:21.990
> 
> 标签：excel, vba, charts

我试图让图表中的点在某些值参数内改变颜色（即，>1 是绿色，<1 是红色，其他都是蓝色）。我无法确定如何让 VBA 给我任何给定点的值。

在[此线程](https://stackoverflow.com/questions/11136194/change-the-point-color-in-chart-excel-vba)中，先前已回答，答案（在其他方面非常有帮助）表明 points(num).value 将返回该点的值。但是，这样做时我收到一条错误消息，在网上或 VBA 帮助中找不到与此相对应的方法。有没有其他人在这方面取得过任何成功？

这是给我带来麻烦的代码片段：

```
For Count = 1 To 7
    If Worksheets("Sheet1").ChartObjects("ChartName").Chart.SeriesCollection(1).Points(Count).Value > 1 Then
    '... do stuff 
```

由于数据存储在数据集中的方式，直接从图表中获取值肯定会更好。我可以使用数据集本身找出解决方法，但我宁愿避免这种情况。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T21:52:26.770

```
Sub Tester()

Dim cht As Chart, s As Series, p As Point
Dim vals, x As Integer

    Set cht = ActiveSheet.ChartObjects(1).Chart
    Set s = cht.SeriesCollection(1)

    vals = s.Values

    For x = LBound(vals) To UBound(vals)
      If vals(x) > 10 Then
        With s.Points(x)
            .MarkerBackgroundColor = RGB(255, 0, 0)
            .MarkerForegroundColor = RGB(255, 0, 0)
        End With
      End If
    Next x

End Sub 
```

# firefox - Selenium firefox 配置文件未正确设置

> ID：15122332
> 
> 赞同：3
> 
> 时间：2013-02-27T21:01:32.050
> 
> 标签：firefox, selenium

我有以下代码片段。我希望 pdf 文件自动保存到目录中。

```
profile = Selenium::WebDriver::Firefox::Profile.new
profile['browser.download.dir'] = "//Users/mmuenster/www/pc_interface/pdf_downloads"
profile['browser.download.folderList'] = 2
profile['browser.helperApps.neverAsk.saveToDisk'] = 'application/pdf'

driver = Selenium::WebDriver.for :firefox, :profile => profile
driver.manage.window.maximize 
```

然而，虽然 Firefox 中的“about:config”显示此选项已设置，但当我进入 Firefox 中的首选项和应用程序时，pdf 被设置为“在 Firefox 中预览”。

有什么想法有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T21:18:21.397

我发现了问题。我升级到内置 pdfjs 插件的 Firefox 19。解决方案是添加以下内容

```
profile['pdfjs.disabled'] = true 
```

这行得通！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T02:56:43.003

这是我使用的 Python 解决方案，现在使用上面建议的 pdfjs diable。

```
fp = webdriver.FirefoxProfile()
fp.set_preference("browser.download.folderList", 2)
fp.set_preference("browser.download.manager.showWhenStarting", False)
fp.set_preference("browser.download.dir", "~/somewhere/here/")
fp.set_preference("browser.helperApps.neverAsk.saveToDisk", "application/pdf")
fp.set_preference("pdfjs.disabled", True)
fp.update_preferences() 
```

# cakephp - cakePHP - 移动到子目录，现在 css 样式表不起作用

> ID：15122343
> 
> 赞同：1
> 
> 时间：2013-02-27T21:02:08.213
> 
> 标签：cakephp, url-rewriting, iis-7.5

我已将整个 cakephp 站点/应用程序（托管在 Windows 服务器上）文件夹移动到一个名为“数据”的子文件夹中，一切正常，该应用程序工作正常，但由于某种原因它没有拉入 css 或 js 文件。查看显示的页面源代码...

```
<link rel="stylesheet" type="text/css" href="/data/css/bootstrap.min.css" /> 
```

我不熟悉 cakephp 或 URL 重写规则，我需要更新重写规则吗？

原来 Cake 的根目录如下...

```
 define('APP_DIR', 'app');
define('DS', DIRECTORY_SEPARATOR);
define('ROOT', dirname(__FILE__));
define('WEBROOT_DIR', 'webroot');
define('WWW_ROOT', ROOT . DS . APP_DIR . DS . WEBROOT_DIR . DS); 
```

我已经尝试了以下更新...

```
define('APP_DIR', 'app');
define('DS', DIRECTORY_SEPARATOR);
define('ROOT', dirname(__FILE__));
define('WEBROOT_DIR', 'webroot');
define('WWW_ROOT', ROOT . DS . APP_DIR . DS . WEBROOT_DIR . DS . 'data' . DS); 
```

但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:10:28.840

您需要小心绝对链接。您从 / 开始，您的应用程序 webroot 是否从 / 开始？

我的意思是，您的 cakephp app/webroot 是否是您的根网络服务器目录？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-15T18:31:41.133

您需要使用助手来计算子文件夹：

```
<?php echo $this->Html->css('data/css/bootstrap.min'); ?> 
```

确保 data/css 目录位于 app/webroot/css 目录中

# javascript - 在不使用 ExternalInterface 的情况下使用 JavaScript 设置 Flash 文本字段值（我无法控制 SWF）

> ID：15122346
> 
> 赞同：1
> 
> 时间：2013-02-27T21:02:26.090
> 
> 标签：javascript, flash, xul

我创建了一个 FireFox 扩展，我们的客户服务代理使用它来将预定义的支持响应放入各种 CRM 系统。

很容易; 获取活动元素，确定现有文本的范围并使用现有文本和新文本更新值。

我的问题是其中一个 CRM 系统是用 Flash 编写的。

我无法控制 Flash，因此无法使用 ExternalInterface。

我发现这整个问题令人不安。我可以轻松地使用 control-v 将文本粘贴到任何 Flash 字段中......为什么不能用 JavaScript 来完成？

谢谢你。

埃里克

# javascript - 基本的javascript华氏/摄氏度计算器

> ID：15122347
> 
> 赞同：4
> 
> 时间：2013-02-27T21:02:27.807
> 
> 标签：javascript, html, forms

我正在尝试做一个摄氏/华氏转换计算器，每个转换都有一个按钮，结果显示在适当的文本框中。我必须在这里遗漏一些明显的东西......我是javascript的新手，只是没有得到它。这是我到目前为止所做的：

```
<!DOCTYPE html>
<html>
    <head> 
        <meta charset = "utf-8"/>
        <title>Convert Fahrenheit and Celsius</title>
        <script type="text/javascript">
            <!--
                function convertToC() {
                    var fTempVal = parseFloat(document.getElementById('fTemp').value);
                var cTempVal = (fTempVal - 32) * (5/9);
                document.getElementById('cTemp').value = cTempVal;
            }

            function convertToF() {
                var cTempVal = parseFloat(document.getElementById('cTemp').value);
                var fTempVal = (cTempVal * (9/5)) + 32;
                document.getElementById('fTemp').value = fTempVal;
            }
        // -->
    </script>
    </head>
    <body>
    <form name="conversionForm">
    <table border="1">
    <tbody>
    <tr>
        <td>Fahrenheit</td>
        <td><input name="fTemp" type="text"/></td>
        <td><button onclick="convertToC">Convert to Celsius</button></td>
    </tr>
    <tr>
        <td>Celsius</td>
        <td><input name="cTemp" type="text"/></td>
        <td><button onclick="convertToF">Convert to Fahrenheit</button></td>
    </tr>
    </form>
    </tbody>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T21:09:39.160

你有几个错误。请参阅这个更正**[的 jsFiddle 示例](http://jsfiddle.net/j08691/Qbssd/)**。

1.  您的输入框缺少您尝试引用的 ID`document.getElementById`
2.  您的 HTML 未正确关闭。
3.  您的按钮缺少类型，这使得它们在您真正想要按钮时[默认提交](https://developer.mozilla.org/en-US/docs/HTML/Element/button)
4.  为了防止表单被实际提交，您应该返回 false。

**JavaScript**

```
 function convertToC() {
        var fTempVal = parseFloat(document.getElementById('fTemp').value);
        var cTempVal = (fTempVal - 32) * (5 / 9);
        document.getElementById('cTemp').value = cTempVal;
        return false;
    }

    function convertToF() {
        var cTempVal = parseFloat(document.getElementById('cTemp').value);
        var fTempVal = (cTempVal * (9 / 5)) + 32;
        console.log(fTempVal);
        document.getElementById('fTemp').value = fTempVal;
        return false;
    } 
```

**HTML**

```
<form name="conversionForm">
    <table border="1">
        <tbody>
            <tr>
                <td>Fahrenheit</td>
                <td>
                    <input name="fTemp" id="fTemp" type="text" />
                </td>
                <td>
                    <button type="button" onclick="convertToC();return false">Convert to Celsius</button>
                </td>
            </tr>
            <tr>
                <td>Celsius</td>
                <td>
                    <input name="cTemp" id="cTemp" type="text" />
                </td>
                <td>
                    <button type="button" onclick="convertToF();return false">Convert to Fahrenheit</button>
                </td>
            </tr>
        </tbody>
    </table>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:08:29.713

您正在使用该[`document.getElementById()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)函数查询 DOM，但两个`input`元素当前都没有属性，`id`只有一个`name`属性。因此，在您的示例中，没有任何元素与您传递给函数的 ID 实际匹配。

您应该`id`像这样设置两个元素的属性：

```
<input id="fTemp" name="fTemp" type="text">

<input id="cTemp" name="cTemp" type="text"> 
```

# java - 从我的jsp文件中删除大开关的正确方法是什么

> ID：15122350
> 
> 赞同：5
> 
> 时间：2013-02-27T21:02:36.420
> 
> 标签：java, jsp, tags, factory

从我的 JSP 文件中删除开关的正确方法是什么？我有一个可以返回多种类型对象的工厂。他们每个人都有自己的表示逻辑，所以我需要这样的东西：

```
//From controller
@RequestMapping(value = "/source", method = RequestMethod.POST)
public ModelAndView doMainJob(@RequestParam("text") String text) {
    ResultState state = new ResultStateFactory().fromString(text);
    ModelAndView model = new ModelAndView("result/view");
    model.addObject("state", state);
    model.addObject("stateType", state.getClass());
    return model;
}

//from jsp/result/view.jsp
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib prefix="main"  tagdir="/WEB-INF/tags" %>
<%@taglib prefix="r"  tagdir="/WEB-INF/tags/result" %>
<main:basic_layout>
  <jsp:body>
    <c:choose>
      <c:when test="${stateType == StateA}"><r:stateA param=${state} /></c:when>
      <c:when test="${stateType == StateB}"><r:stateB param=${state} /></c:when>
      <c:when test="${stateType == StateC}"><r:stateC param=${state} /></c:when>
      .
      .
      .
      <c:when test="${stateType == StateX}"><r:stateX param=${state} /></c:when>
      <c:when test="${stateType == StateY}"><r:stateY param=${state} /></c:when>
    </c:choose>
  </jsp:body>
</main:basic_layout> 
```

我的工厂是基于注解的，所以我可以很容易地用正确的注解添加状态。我想做一些类似于标签视图的事情。如果我只添加 2 个文件，那将是理想的：1 个带有正确注释的状态和 1 个标记文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:21:17.173

将`sateType`放入标签结果中：

```
<r:state param=${state} type="${stateType}" /> 
```

# go - len 方法未定义

> ID：15122361
> 
> 赞同：0
> 
> 时间：2013-02-27T21:03:13.267
> 
> 标签：go

我一直在阅读 [golang-book]：[http](http://www.golang-book.com) ://www.golang-book.com并在进行过程中完成练习。在第 6 章中，有一个练习必须找到未排序列表 [x] 中的最小元素。

我有以下代码，但不知何故我不知道为什么方法长度 (len) 在**第 14 行给我一个错误：x.len undefined (type []int has no field or method len)**

```
package main

import "fmt"

func main() {
    x := []int{
        48, 96, 86, 68,
        57, 82, 63, 70,
        37, 34, 83, 27,
        19, 97, 9, 17,
    }

    small := x[0]
    for i := 1; i < x.len(); i++ {
        if x[i] < small {
            fmt.Println(x[i])
        }
    }
} 
```

我使用的逻辑是用谷歌搜索的，所以数组上可能没有 len 方法？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T21:07:52.570

数组和切片没有 len() 方法。len() 函数是一种内置语言。

所以你的代码

```
for i := 1; i < x.len(); i++ { 
```

应该

```
for i := 1; i < len(x); i++ { 
```

这是[操场](http://play.golang.org/p/hVetB2_acU)上的工作版本。

```
package main

import "fmt"

func main(){
    x := []int{
        48,96,86,68,
        57,82,63,70,
        37,34,83,27,
        19,97, 9,17,
    }   

    small := x[0]
    for i := 1; i < len(x); i++ {
        if x[i] < small { 
        fmt.Println(x[i]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T21:07:23.467

`len()`不是切片的方法。这是一个全局函数。你想说`len(x)`。

```
package main

import "fmt"

func main() {
    x := []int{
        48, 96, 86, 68,
        57, 82, 63, 70,
        37, 34, 83, 27,
        19, 97, 9, 17,
    }

    small := x[0]
    for i := 1; i < len(x); i++ {
        if x[i] < small {
            fmt.Println(x[i])
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T22:39:48.937

事实上，数组和切片类型**可以**有一个`len()`方法，像这样：

[http://play.golang.org/p/CkU4LJZgUb](http://play.golang.org/p/CkU4LJZgUb)

```
package main

import "fmt"

type SliceType []int

func (s SliceType) len() int {
    return len(s)
}

func main() {
    s := SliceType{1, 2, 3, 4, 5, 6, 7, 8, 9}
    for i := 0; i < s.len(); i++ {
        fmt.Println(s[i])
    }
} 
```

您找到的代码可能是[`container/list`](http://golang.org/pkg/container/list/#List.Len)or的实现[`container/ring`](http://golang.org/pkg/container/ring/#Ring.Len)，两者都指定了一个`Len()`方法。

但是，原始切片和数组没有附加**任何**方法，您必须使用内置函数`len()`。

# codeigniter - 动态获取 Clumn 值

> ID：15122363
> 
> 赞同：1
> 
> 时间：2013-02-27T21:03:15.467
> 
> 标签：codeigniter, codeigniter-2

我想为客户分配一张卡，我想获得未分配的卡号。假设我有 2 类卡：1 是签证卡，2 是预付卡。我想在分配万事达卡时只需要显示万事达卡的未分配卡号和签证卡相同的卡号。这是我的代码。

型号代码

```
function getUnallocatedCards($object)
{
        $this->db->select('*');
        $this->db->from('cards');
        $this->db->where('catagory_id',$object->catagory_id);
        $this->db->where('status',$object->status);
        $query = $this->db->get();
         echo $this->db->last_query();
        if($query->num_rows() == 0){
            return null;
        }

        return $query->result();
} 
```

控制器

```
public function AllocateCustomerCards($id='')
{
    $userinfo='';
    $contentObj='';
    $submit=$this->input->post('submit');
    if($submit=='submit')
    {    
         $userinfo->customer_id  = $this->input->post('cust_id');
         $userinfo->status_id  = $this->input->post('status_id');
         $userinfo->card_number  = $this->input->post('card_number');   
         $userinfo->card_id  = $this->input->post('card_id');
         $userinfo->print_date =$this->input->post('print_date');
         $userinfo->issue_date =$this->input->post('issue_date');   

         $this->Cards_model->saveCardAllocat($userinfo);
         echo $this->db->last_query();

    }
    $contentObj['unallocatedcards']=$this->Cards_model->getUnallocatedCards($userinfo);
    $contentObj['cardtype']=$this->Cards_model->cardCatagories();
    $contentObj['cardrequest']=$this->Cards_model->getCustomerCardRequst($id);
    $this->load->view('admin/cardsystem/allocate_card',$contentObj);    

} 
```

看法

```
<tr><td><label>Select Card No. :</label><span style="display:inline;color:red;"> *</span> </td>
<td>
    <select name="card_number" id="card_number" class="medium-input">
                            <option value=""> -- Select Card No. -- </option>
                            <?php
                            foreach($unallocatedcards as $customer)
                            {
                                echo '<option value="'.$customer->card_no.'">'.$customer->card_no.'</option>';
                            }
                            ?>
                        </select><span class="input-notification error png_bg" id="error_number_id" style="display:none;"></span>
</td>
</tr> 
```

但它显示以下错误

> 遇到 PHP 错误
> 严重性：通知
> 消息：尝试获取非对象
> 文件名的属性：models/cards_model.php
> 行号：339
> 
> 遇到 PHP 错误
> 严重性：通知
> 消息：尝试获取非对象
> 文件名的属性：models/cards_model.php
> 行号：340

第 339 行：

```
$this->db->where('catagory_id',$object->catagory_id); 
```

第 340 行：

```
$this->db->where('status',$object->status); 
```

我打印查询，这是我的查询结果：

```
SELECT * FROM (`cards`) WHERE `catagory_id` IS NULL AND `status` IS NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:21:46.307

在第一行试试这个

```
$userinfo= new stdClass(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:36:45.693

这条信息：

> 试图获取非对象的属性

意味着您在不是对象的变量上使用对象表示法。
实际上，您可以在两行（339 和 340）中找到符号：`$object->catagory_id`和`$object->status`. 结论很明显：变量`$object`不是对象。

控制器中`getUnallocatedCards($object)`调用的函数将变量作为参数：`AllocateCustomerCards``$userinfo`

```
$contentObj['unallocatedcards']=$this->Cards_model->getUnallocatedCards($userinfo); 
```

但`$userinfo`在控制器一开始就被定义为 String 类型：

```
$userinfo=''; 
```

您尝试设置`$userinfo`on submit 的属性，但为时已晚。
最简单的解决方案是 Fabio 给出的解决方案：`$userinfo`作为一个类启动：

```
$userinfo = new stdClass(); 
```

但请注意，因为您`$userinfo`仅在用户提交表单时填充 's 参数。它可能会导致其他问题。

# zend-framework2 - ZF2 - 如果路由器匹配多个路由，将分派什么？

> ID：15122366
> 
> 赞同：9
> 
> 时间：2013-02-27T21:03:32.263
> 
> 标签：zend-framework2

那么 - 如果我有一个可能与许多路线匹配的网址怎么办......哪条路线会赢？将分派哪个动作？

它是简单的-首先定义-首先发送的吗？

以下是路线示例：

```
'route-catchall' => array(
    'type' => 'regex',
    'options' => array(
        'regex' => '/api/v1/.*',
        'defaults' => array(
            'controller' => 'IndexController',
            'action'     => 'apiCatchAll',
        ),
    ),
),
'route-test1' => array(
    'type' => 'literal',
    'options' => array(
        'route' => '/api/v1/route1',
        'defaults' => array(
            'controller' => 'IndexController',
            'action'     => 'apiRoute1',
        ),
    ),
), 
```

这个 url`example.com/api/v1/route1`会被路由到`apiRoute1`或 `apiCatchAll`吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-27T21:32:12.177

由于附加到路由堆栈的路由存储在[优先级列表中](https://github.com/zendframework/zf2/blob/release-2.1.3/library/Zend/Mvc/Router/SimpleRouteStack.php#L49)，因此第一个匹配的路由将获胜。

路线通过[`priority`设置](https://github.com/zendframework/zf2/blob/release-2.1.3/library/Zend/Mvc/Router/SimpleRouteStack.php#L252-L280)附加到主路线。较高的优先级意味着首先检查路线。默认情况下，读取第一个附加的路由（如果它们都具有相同的优先级或根本没有优先级）。

```
'route-catchall' => array(
    'type' => 'regex',
    'options' => array(
        'regex' => '/api/v1/.*',
        'defaults' => array(
            'controller' => 'IndexController',
            'action'     => 'apiCatchAll',
        ),
    ),
    'priority' => -1000,
),
'route-test1' => array(
    'type' => 'literal',
    'options' => array(
        'route' => '/api/v1/route1',
        'defaults' => array(
            'controller' => 'IndexController',
            'action'     => 'apiRoute1',
        ),
    ),
    'priority' => 9001, // it's over 9000!
), 
```

在此示例中，`route-test1`将首先匹配，因为它的优先级很高。

# integration - Maple 中的复杂集成

> ID：15122374
> 
> 赞同：0
> 
> 时间：2013-02-27T21:03:55.740
> 
> 标签：integration, maple

以下代码在 Maple 中需要永远计算。基本上，我试图在以原点为中心的圆上找到复值函数的均方模。代码应该如何更正，或者有没有在线计算器可以做到这一点？

```
evalf(subs(subs([n=3, p=1.2451, z=exp(x*I)/2], subs(s=(p/2)*(1+1/(4*z)^n), subs(t=s+sqrt(s^2-1/(4*z)^n), w=z*t^(2/n)))), Int(abs(w)^2, x=0..2*Pi)/(2*Pi))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:18:18.087

这有什么用吗？我的意思是它给出了预期的结果吗？通过提供被积函数作为操作符（黑匣子），可以防止 evalf/Int 引擎过于昂贵地戳它。这可以节省时间，尽管存在风险，因为它可能会错过某些问题的关键不连续性。

```
> U:=subs(subs([n=3, p=1.2451, z=exp(x*I)/2],
>         subs(s=(p/2)*(1+1/(4*z)^n),
>              subs(t=s+sqrt(s^2-1/(4*z)^n),
>                   w=z*t^(2/n)))),
>         Int(X->eval(abs(w)^2,x=X), 0..2*Pi)/(2*Pi)):

> st:=time():
> evalf(U);
                             0.3351666815

> time()-st;
                                 0.109 
```

另一个（可能不太普遍有用的可能性）可能是，

```
> restart:
> U:=subs(subs([n=3, p=1.2451, z=exp(x*I)/2],
>         subs(s=(p/2)*(1+1/(4*z)^n),
>              subs(t=s+sqrt(s^2-1/(4*z)^n),
>                   w=z*t^(2/n)))),
>         Int(abs(w)^2, x=0..2*Pi)/(2*Pi)):             

> st:=time():
> simplify(U);

                                                -20
                  0.3351666815 - 0.5131390209 10    I

> time()-st;
                                 3.150 
```

# python - 获取 ipdb 的 IPython 选项卡完成

> ID：15122375
> 
> 赞同：21
> 
> 时间：2013-02-27T21:04:00.817
> 
> 标签：python, debugging, ipython, pdb

我已经安装`IPython(0.13.1)`并安装了，我在脚本中`ipdb(0.7)`插入了该行并运行. 现在我在 ipdb 提示符下，有一些自动补全（例如一个裸标签），但它与我进入 IPython 时得到的自动补全不同。然后（导入后）在 ipdb 提示符中没有像在 IPython 中那样给我一个属性列表。如何使用 ipdb 获得与 IPython 中相同的选项卡完成？`import ipdb;ipdb.set_trace()``python my_script.py``requests.``<tab>`

顺便说一句，当我运行`python -m ipdb my_script.py`选项卡完成时，就像在 IPython 中一样，但它的缺点是它从第一行而不是我放置的行启动调试器`import ipdb;ipdb.set_trace()`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-06T09:22:43.103

我在使用virtualenv的 Mac 上`ipython==0.13.2`和`ipdb==0.7`内部也遇到了同样的现象。`Python 2.7.5`当我尝试调试时，我有内置的选项卡完成，但不是当前范围内的变量。我发现，我有一个自定义`.pdbrc`位于我的主文件夹（[http://docs.python.org/2/library/pdb.html#id2](http://docs.python.org/2/library/pdb.html#id2)）。在我将所有内容注释掉后，选项卡完成再次起作用。

我不知道我何时以及为什么添加此文件，但这就是其中的内容：

```
# See http://docs.python.org/2/library/pdb.html#id2 for the structure of this file.
import pdb

# 'inspect x' will print the source code for a method, class or function.
alias inspect import inspect;print inspect.getsource(%1)
alias i import inspect;print inspect.getsource(%1)
# 'help x' opens the man-style help viewer from the interpretter on an object
alias help !print help(%1)
alias h !print help(%1)
# For ordinary Python objects, ppo will pretty-print members and their values.
alias ppo pp %1.__dict__
# ppio runs ppo over a sequence of objects
alias ppio pp [a.__dict__ for a in %1]

# This tries to enable tab-completion of some identifiers.
!import rlcompleter
!pdb.Pdb.complete = rlcompleter.Completer(locals()).complete

# Taken from https://gist.github.com/1125049
# There are a couple of edge cases where you can lose terminal
# echo. This should restore it next time you open a pdb.
!import termios, sys
!termios_fd = sys.stdin.fileno()
!termios_echo = termios.tcgetattr(termios_fd)
!termios_echo[3] = termios_echo[3] | termios.ECHO
!termios_result = termios.tcsetattr(termios_fd, termios.TCSADRAIN, termios_echo) 
```

需要进一步的研究来检查是什么破坏了那里的制表符完成......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-09T10:06:25.743

我有同样的问题，我用以下方法解决了它：

```
sudo pip install --upgrade ipdb ipython readline 
```

如果您还没有`readline`安装，请确保`libncurses5-dev`按照@musashi14 的建议安装。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T01:23:29.997

有`easy_install readline`帮助吗？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-12T18:19:11.730

我在 ubuntu 14.04 上遇到了同样的问题，并通过以下方式解决了这个问题：

`apt-get install libncurses5-dev`

`pip install --upgrade readline`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-27T12:01:47.177

截至**2019-11**年，一些事情发生了变化，所以这里应该解决它：

```
pip install --upgrade ipdb gnureadline ptpython

# Handly to enable ipdb on pytest exceptions
export PYTEST_ADDOPTS='--pdb --pdbcls=IPython.terminal.debugger:Pdb' 
```

# javascript - 递归 JavaScript 方法范围

> ID：15122378
> 
> 赞同：1
> 
> 时间：2013-02-27T21:04:11.297
> 
> 标签：javascript, recursion

我有这个递归函数，它假设通过一个 JSON 对象来查找所有子组。这是我所拥有的：

```
var subgroupIds = [];
this.getSubGroups = function (groupId) {
    this.getGroups("groupId="+groupId, function(groups) {
        if ($.isEmptyObject(groups)) {
            return subgroupIds;
        } else {
            $.each(groups, function(index,group) {
            subgroupIds.push(group.id);
                this.getSubGroups(group.id);
            });
        }
    });
} 
```

...其中 getGroups 是返回所有组的异步函数。

我的问题是当它进行递归调用时，我收到错误消息：

```
Uncaught TypeError: Object #<Object> has no method 'getSubGroups' 
```

我猜这是一个范围问题，但我无法弄清楚它有什么问题。有任何想法吗？

**编辑：**

正如Bergi 指出的那样，我需要回电。这就是我现在所拥有的：

```
var subgroupIds = [];
var that = this;
this.getSubGroups = function (groupId,callback) {
    this.getGroups("groupId="+groupId, function(groups) {
        if ($.isEmptyObject(groups)) {
            return;
        } else {
            $.each(groups, function(index,group) {
            subgroupIds.push(group.id);
                callback(group.id);
                that.getSubGroups(group.id);
            });
        }
    });
} 
```

现在的问题是当我调用回调时，它说函数未定义。

最终，我想返回一个子 group.id 的数组。我不知道怎么去那里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:06:45.927

这是因为定义的内部函数`each`不属于`this`您的类/对象的实例，而不是指回调函数本身。为了绕过这个问题，在对象构造函数中，我输入了以下内容：

### 一般解决方案：

```
function SimpleClass() {
     var _this = this;    //Private property, will be shared in all functions defined in the class
     this.value = "Hello";
     this.value2 = " world!";

     function say() {        //private function - use _this (this means something else here)
         return _this.say;   //Gets property of the object
     }
     this.say = function() { //Public function - use this
        alert(this.value+say());  //Here, we can use both this and _this
     }

} 
```

### 修复您的代码：

```
var _this = this;
var subgroupIds = [];
this.getSubGroups = function (groupId) {
    this.getGroups("groupId="+groupId, function(groups) {
        if ($.isEmptyObject(groups)) {
            return subgroupIds;
        } else {
            $.each(groups, function(index,group) {
            subgroupIds.push(group.id);
                _this.getSubGroups(group.id);
            });
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:06:46.893

你的和以前`this`不一样`this`了。也许在您第一次调用之前保存`this`到一个与其引用的对象更相关的变量名（我将使用`someObject`...）`getSubGroups`，然后再调用`someObject.getSubGroups`。

```
var subgroupIds = [];
var someObject = this;
someObject.getSubGroups = function (groupId) {
    this.getGroups("groupId="+groupId, function(groups) {
        if ($.isEmptyObject(groups)) {
            return subgroupIds;
        } else {
            $.each(groups, function(index,group) {
            subgroupIds.push(group.id);
                someObject.getSubGroups(group.id);
            });
        }
    });
} 
```

发生这种情况的原因是因为您的函数是从`$.each`实现中调用的。我会参考[“this”的 MDN 文档以](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this "MDN 文档")获取更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:06:52.820

内部`this`指的是`$.each`回调，你可以这样做：

```
var subgroupIds = [];
var self = this;
self.getSubGroups = function (groupId) {
    self.getGroups("groupId="+groupId, function(groups) {
        if ($.isEmptyObject(groups)) {
            return subgroupIds;
        } else {
            $.each(groups, function(index,group) {
            subgroupIds.push(group.id);
                self.getSubGroups(group.id);
            });
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T21:07:16.820

这是因为`this`在函数级别定义，并且在这种情况下绑定到您为内部函数迭代的数组中的项目。 `this`内部函数中的`this`内容与外部函数中的内容不同。您可以通过 `var that = this;`在外部级别设置并`that`从内部函数内部引用来解决此问题

```
var subgroupIds = [];
var that = this;
this.getSubGroups = function (groupId) {
    this.getGroups("groupId="+groupId, function(groups) {
        if ($.isEmptyObject(groups)) {
            return subgroupIds;
        } else {
            $.each(groups, function(index,group) {
            subgroupIds.push(group.id);
                that.getSubGroups(group.id);
            });
        }
    });
} 
```

有关更多信息，请参阅[闭包如何工作](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

在这里了解[这在 JS 中的工作原理](https://stackoverflow.com/questions/5429739/this-keyword-not-clear?lq=1)

# django - Django：我可以以相同的形式使用 CreateView 和 DeleteView 吗？

> ID：15122382
> 
> 赞同：4
> 
> 时间：2013-02-27T21:04:35.367
> 
> 标签：django, django-forms, django-templates, django-views, django-generic-views

我想以相同的形式显示两个按钮，第一个按钮用于删除对象，第二个按钮用于创建对象。

例如，我想创建简单的模型，例如：

**模型.py：**

```
class UrlStatus_Proxy(models.Model):

    urls = models.URLField(u'Site URL', max_length=100, null=True, unique=True)
    status_url = models.CharField(u'Site', max_length=20, choices=STATUS_URL) 
```

**网址.py**

```
url(r'^url_status/$',ProxyUrlCreateView.as_view(model=UrlStatus_Proxy,
     get_success_url=lambda: reverse('proxy_url_status'),template_name='proxy_url_status.html'), name='proxy_url_status'), 
```

**proxy_url_status.html**

```
<form action="" method="post">    
    {{form.as_p}}
    <input type="submit" name="delete" id="delete">
    <input type="submit" name="add" id="add">
</form> 
```

如果我在数据库中没有对象，那么什么也不做，只是从模型中显示表单，您只有一个选项可以在数据库中添加新对象。

如果我在数据库中有对象，则列出像表这样的对象，并且在表中我有一个复选框字段。当我检查其中一个对象并单击“删除”按钮时，我想删除该对象。

在第二种情况下，如果我从对象填充输入字段并按下按钮“添加”，我想在基础中添加对象。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:11:32.580

首先将所有现有对象添加到 CreateView 的上下文中并更新 HTML 模板以将它们呈现为表单上方的表格。然后创建一个 DeleteView 并将一个 URL 映射到它。

### 网址

```
url(r"^url_status/$",
    ProxyUrlCreateView.as_view(),
    name="proxy_url_status"),

url(r"^url_status/(?P<pk>\d+)/delete/?$",
    DeleteProxyURLView.as_view(),
    name="delete_proxy"), 
```

### 意见

```
from django.views.generic import DeleteView
from django.core.urlresolvers import reverse

# add existing objects to the context, making them available to the template
class ProxyUrlCreateView(CreateView):
    model = UrlStatus_Proxy
    template_name = "proxy_url_status.html"

    def get_success_url(self):
        return reverse("proxy_url_status")

    def get_context_data(self, **kwargs):
        kwargs["object_list"] = UrlStatus_Proxy.objects.all()
        return super(ProxyUrlCreateView, self).get_context_data(**kwargs)

class DeleteProxyURLView(DeleteView):
    model = UrlStatus_Proxy

    def get_success_url(self):
        """
        Redirect to the page listing all of the proxy urls
        """
        return reverse("proxy_url_status")

    def get(self, *args, **kwargs):
        """
        This has been overriden because by default
        DeleteView doesn't work with GET requests
        """
        return self.delete(*args, **kwargs) 
```

### 模板

```
<table>
    {% for proxy_url in object_list %}
    <tr>
        <td>{{ proxy_url.urls }}</td>
        <td><a href="{% url delete_proxy %}">Delete</a></td>
    </tr>
    {% endfor %}
</table>

<form action="" method="post">    
    {{form.as_p}}
    <input type="submit" name="add" id="add">
</form> 
```

# jquery - jQuery显示和隐藏在div内滚动的链接

> ID：15122383
> 
> 赞同：1
> 
> 时间：2013-02-27T21:04:43.630
> 
> 标签：jquery, scroll, hide, show, scrollto

我在下面的作品。但是，我确定这不是正确的编写方式。在 jQuery 中编写此代码以显示或隐藏两个不同的链接以滚动浏览 div 中的文本的正确方法是什么？

这是对以下内容的简要说明。

1.  “换行” div 包含溢出自身的文本。这是隐藏在 css 中的溢出。
2.  反向链接最初是隐藏的。
3.  用户点击越多，div 滚动到 div 底部，越多的链接淡出，反向链接淡入。
4.  用户单击后退，div 中的文本向上滚动，后退链接淡出，更多链接淡入。

jQuery

```
$(document).ready(function() {

    $('#scroll-up').click(function(){
        $('#div').animate({scrollTop: $('#div').offset().top}, 1500);
        $("#scroll-up").fadeOut("fast");
        $("#scroll-down").fadeIn("fast");
    });

     $('#scroll-down').click(function(){
        $('#div').animate({scrollTop:0}, 1500);
        $("#scroll-down").fadeOut("fast");
        $("#scroll-up").fadeIn("fast");
    });

}); 
```

css

```
#outer-wrap { margin-top: -50px; padding: 24px 12px 12px 24px; width: 330px; height: 450px; background: rgba(255, 255, 255, 0.5); }
#outer-wrap a { display: block; }
#outer-wrap a#scroll-down { display: none; }
#wrap { margin: 12px 0; width: 330px; height: 360px; overflow: hidden; } 
```

html

```
<div id="outer-wrap">
     <a href="javascript:void(0)" id="scroll-down">Back</a>
     <div id="wrap" class="column first">
         <p>Long paragraph of text.</p>
     </div>
     <a href="javascript:void(0)" id="scroll-up">More</a>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T00:01:15.647

我认为 fadeIn - fadeOut 链接编写正确并且运行良好。但是我注意到您正在使用`.offset()`，您应该知道这将为您提供元素相对于文档的位置。因此，即使只是添加一个边距顶部或将元素放置在其他地方也会给你一个不同的值。

而不是`$('#wrap').offset().top`为什么不使用`$('#wrap')[0].scrollHeight`向下滚动并显示最底部的文本。但是，考虑到这一点，我也想知道 $('#wrap') 中的隐藏文本是否比您设置的 360px 高度长得多。你会跳过那里的几行文字然后继续到底部吗？

为什么不使用简单的显示更多 - 显示更少，用户阅读文本会更容易。见样品[小提琴](http://jsfiddle.net/mark_s/YKBb9/1/)

# cassandra - 时间线的 Cassandra 模式

> ID：15122386
> 
> 赞同：2
> 
> 时间：2013-02-27T21:04:51.043
> 
> 标签：cassandra, phpcassa

我想为我的时间线设计一个 Cassandra 模式：

我有用户，每个用户都有一个时间线，每个时间线值都是一个字符串。

由于每个用户都有一个字符串时间线，我需要尽快从末尾填充每个用户时间线。

我估计每个用户会有 10000 个时间线对象，而我将有 10000 个用户，所以我将轻松拥有 100,000,000 个对象。这意味着速度非常重要。

这是我使用的代码，对吗？

```
$pool = new ConnectionPool('Keyspace', array('127.0.0.1'));
$cf = new ColumnFamily($pool, 'timeline');

// Insert a few records
$columns = array(microtime() => "event1", microtime() => "event2", microtime() => "event3", microtime() => "event4" );
$cf->insert('usera', $columns); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:28:32.853

您可以`TimeUUID`用作列键，即使您有多个应用程序服务器同时写入数据，它们也可以确保您获得唯一的键（尽管两个应用程序服务器不太可能`microtime`为同一个用户插入完全相同的值），并且它们将像常规时间戳一样按时间顺序排序。

如果您希望更频繁地显示最近的项目（例如，如果您想为用户显示十个最近的时间线项目），您可能还需要使用反向比较器。使用反向比较器意味着 Cassandra 将以相反的顺序存储行，最近的项目在前。这意味着 Cassandra 最容易找到最新的项目，并且您将获得非常好的性能。

要考虑的另一件事是您的行将变得多宽。如果您不希望时间线会超过一百万个左右的项目（确切的数量取决于每个项目中有多少数据），那么每个用户只有一行可能会起作用（但再次尝试使用反向比较器，否则读取最近的项目会很慢）。如果您希望您的用户生成数以百万计的时间线项目，您需要想办法将用户的时间线分成许多行。也许每个用户每月或每天一行。它必须是确定性的，这样您就不必进行查询来查找您应该阅读的哪一行——而且由于您的列是按时排序的，因此使用时间来划分为多行是很自然的。

# c++ - While 循环和生成 rand()

> ID：15122391
> 
> 赞同：0
> 
> 时间：2013-02-27T21:04:57.867
> 
> 标签：c++, loops, random, while-loop

所以我基本上是在创建一个二十一点游戏，我卡在我必须询问用户是否想要另一张牌（Take a HIT）的地方，我决定做一个 while 循环。我想弄清楚的一个问题是我如何才能做到这一点，所以为第一个 HIT 选择的随机数不能再次选择，我被卡住了，因为我将该变量分配给“card3”

```
while (hit == 'yes' || hit == 'Yes' || hit =='Y' || hit == 'y')
{
//create new card, add onto total, ask again
card3 = rand() % 51 + 1;
while (card3 == card1 || deal1 == card2 || card3 == deal1){
  card3 = rand() % 52 + 1;
}
if (card3 == 1 || card3 == 2 || card3 == 3 || card3 == 4){
cout <<"|A|";
total = total + 11;}
else if (card3 == 5 || card3 == 6 || card3 == 7 || card3 == 8){
cout <<"|2|";
total = total + 2;}
else if (card3 == 9 || card3 == 10 || card3 == 11 || card3 == 12){
cout <<"|3|";
total = total + 3;}
else if (card3 == 13 || card3 == 14 || card3 == 15 || card3 == 16){
cout <<"|4|";
total = total + 4;}
else if (card3 == 17 || card3 == 18 || card3 == 19 || card3 == 20){
cout <<"|5|";
total = total + 5;}
else if (card3 == 21 || card3 == 22 || card3 == 23 || card3 == 24){
cout <<"|6|";
total = total + 6;}
else if (card3 == 25 || card3 == 26 || card3 == 27 || card3 == 28){
cout <<"|7|";
total = total + 7;}
else if (card3 == 29 || card3 == 30 || card3 == 31 || card3 == 32){
cout <<"|8|";
total = total + 8;}
else if (card3 == 33 || card3 == 34 || card3 == 35 || card3 == 36){
cout <<"|9|";
total = total + 9;}
else if (card3 == 37 || card3 == 38 || card3 == 39 || card3 == 40){
cout <<"|10|";
total = total + 10;}
else if (card3 == 41 || card3 == 42 || card3 == 43 || card3 == 44){
cout <<"|J|";
total = total + 10;}
else if (card3 == 45 || card3 == 46 || card3 == 47 || card3 == 48){
cout <<"|Q|";
total = total + 10;}
else if (card3 == 49 || card3== 50 || card3 == 51 || card3 == 52){
cout <<"|K|";
total = total + 10;}
cout << endl;
cout <<"Your total is: " << total << endl;
cout <<"Would you like another card? yes or no: " << endl;
cin >> hit; 
cout << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:07:12.813

你可以把所有的牌放在一个容器里，然后用来[`std::random_shuffle`](http://en.cppreference.com/w/cpp/algorithm/random_shuffle)洗牌。然后从容器背面一次弹出一张卡片。甲板完成后，重新开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:09:56.610

看起来像一个你应该使用数组的练习。我无法为您编写程序，但请阅读数组 - 它们是解决方案的重要组成部分。您可以创建一个由 52 个布尔变量组成的数组，以指示哪些卡片已被选中。你应该设计一个算法来检查一张牌是否被选中，当我们得到一张随机挑选的牌时，继续挑选一张新牌。

# file-upload - 使用通过类 FileUpload 上传的数据

> ID：15122393
> 
> 赞同：1
> 
> 时间：2013-02-27T21:05:18.837
> 
> 标签：file-upload, user-interface, google-apps-script, google-sheets

也许是一个基本问题，但我似乎无法在文档中找到参考。

我有一个电子表格和一个包含 FileUpload 和 Submit 小部件的 UI 表单。

```
function displayFileDialog() {

  var fileDialog = UiApp.createApplication()
  .setTitle("Select PROJECT XML File")
  .setHeight(100)
  .setWidth(200);
  var form = fileDialog.createFormPanel();
  var flow = fileDialog.createFlowPanel();
  var file = fileDialog.createFileUpload().setName("fileUL");      
  var button = fileDialog.createSubmitButton('submit'); 
  var textedit = fileDialog.createTextBox().setName("textBox");

  flow.add(file);      // add file to flo                                  
  flow.add(textedit);  // testing textedit
  flow.add(button);    // add button to flow                                 
  form.add(flow);      // add flow to form
  fileDialog.add(form);// add form to application

  SpreadsheetApp.getActiveSpreadsheet().show(fileDialog);  // Display dialog in spreadsheet.
} 
```

运行此函数会按预期在工作表中显示 UI。

当按下提交按钮时，此`doPost`函数运行：

```
function doPost(e) {
  Logger.log("doPost - fileUL is-" + e.parameter.fileUL + "-");
  Logger.log("doPost - textEdit is-" + e.parameter.textBox + "-");
} 
```

现在，如果我将一个小的 XML 文件加载到 FileUploader 中并将测试`TESTING`输入到 textEdit 中，我会在 Log 窗口中得到以下内容：

```
doPost-fileUL is-FileUpload-
doPost - textEdit is-TESTING-
```

不管文件是什么，它总是说`FileUpload`。我猜我错过了一些东西，因为 textEdit 有效，但是我不能同时调试和上传我不确定我在这里做错了什么。并且[文档](https://developers.google.com/apps-script/class_fileupload?hl=en)似乎没有任何进一步的信息。

我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:25:21.730

在您提供的文档的第一行：

> FileUpload 的结果是“Blob”

您可以通过使用读取[Blob的内容](https://developers.google.com/apps-script/class_blob)

```
e.parameter.fileUL.getDataAsString(); 
```

# linux - LD_LIBRARY_PATH 不适用于多个路径

> ID：15122394
> 
> 赞同：-1
> 
> 时间：2013-02-27T21:05:25.613
> 
> 标签：linux, bash, terminal, shared-libraries

我正在尝试在我的 .bashrc 中设置 LD_LIBRARY_PATH，但是当我添加多个路径时它不会起作用：

```
export LD_LIBRARY_PATH=/path/to/lib1 
```

工作正常，当我在新终端上键入 $LD_LIBRARY_PATH 时，我得到

```
$ $LD_LIBRARY_PATH
bash: /path/to/lib1: is a directory 
```

但是当我尝试

```
export LD_LIBRARY_PATH=/path/to/lib1:/path/to/lib2 
(I also tried export LD_LIBRARY_PATH=/path/to/lib2:$LD_LIBRARY_PATH) 
```

我明白了

```
$ $LD_LIBRARY_PATH
bash: /path/to/lib1:/path/to/lib2: No such file or directory 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:07:24.227

我猜你想检查 $LD_LIBRARY_PATH 的值。

利用

```
echo $LD_LIBRARY_PATH 
```

否则 bash 会认为您要求它执行存储在 $LD_LIBRARY_PATH 中的命令。

# perl - Perl 多语言排序：希望空格在字母上方排序

> ID：15122396
> 
> 赞同：1
> 
> 时间：2013-02-27T21:05:29.583
> 
> 标签：perl, unicode, multilingual

我有一个以下 Perl 脚本，它对单词列表进行排序，使用 utf-8 编码：

```
use HTML::Entities;
use Unicode::Collate::Locale;
use utf8;

my @array = (
     "Another", 
     "An Other", 
     "Anóther", 
     "An Óther", 
     "Anòther", 
     "An Òther", 
     "Anôther", 
     "An Ôther", 
     "Anöther", 
     "An Öther", 
     "Anõther", 
     "An Õther"
     );

my $lang = "da";

printf ("Lang code is: %s\n", $lang);

my $coll = Unicode::Collate::Locale->new(locale => "$lang");

my @result = $coll->sort(@array);

foreach my $item (@result){

print $item, "\n";
} 
```

这是它的输出：

```
Lang code is: da
An Other
Another
An Óther
Anóther
An Òther
Anòther
An Ôther
Anôther
An Õther
Anõther
An Öther
Anöther 
```

但是，我希望它输出：

```
An Other
An Óther
An Òther
An Ôther
An Õther
An Öther
Another
Anóther
Anòther
Anôther
Anõther
Anöther 
```

理由是我希望空格字符排在其他字母之前。有没有办法让我的 Collat​​or 对象帮助我做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:35:45.487

尝试将变量权重设置为`'non-ignorable'`：

```
my $coll = Unicode::Collate::Locale->new(
    locale   => $lang,
    variable => 'non-ignorable',
); 
```

有关详细信息，请参阅Unicode 排序算法 (UCA) 规范中的[变量加权部分。](http://www.unicode.org/reports/tr10/#Variable_Weighting)

# html - 锚链画面移位

> ID：15122399
> 
> 赞同：2
> 
> 时间：2013-02-27T21:05:42.157
> 
> 标签：html, css, position

单击锚链接时是否可以更改屏幕位置？默认情况下，当单击锚链接时，它会移动屏幕，使锚位于屏幕的最顶部。我希望它移动，但我不想一直移动到屏幕顶部，我希望顶部有一些空间，也许说距离顶部 50px。

例子：

```
<a href="#section1">section 1</a>
<a href="#section2">section 2</a>

....
....

<div id="text">
    <div id="section1">text text text</div>
    <div id="section2">text text text</div>
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T17:47:32.413

JavaScript 不是必需的。这会做你想要的，我怀疑。

此解决方案允许您将锚点放置在您希望屏幕滚动到与类的 CSS 规则中指定的锚点偏移的位置`adjusted-anchor`。

```
<style>

  .anchor-container {
     position:relative;
  }

  .adjusted-anchor {
     position:absolute;
     top: -150px;
  }

</style>

<a href="#anchor">CONTINUED BELOW</a>

...

<div class="anchor-container"><div name="anchor" class="adjusted-anchor"></div></div>
<div>...continued from above</div> 
```

偏移量是固定的，因此如果您的内容在调整屏幕大小时重新流动，您将不得不使用百分比或 JavaScript 来响应浏览器大小调整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-17T04:38:07.127

纯 CSS 选项，不添加任何额外元素：

```
a.shifted-anchor {
  display: block;
  position: relative;
  top: -100px;
} 
```

```
<a name="something" class="shifted-anchor"></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:36:24.600

没有办法用纯 html 做到这一点 - 你会在不同的浏览器中得到不同的结果。

看看 javascript 的 window.scrollTo()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-16T17:48:55.143

另一种选择是：

```
<style>
div.shifted {padding-top: 70px; margin-top: -70px;}
</style>

<div class="shifted" id="section1">text</div> 
```

如果您在页面顶部有一个绝对定位菜单之类的东西，这也会使锚位置混乱。如果菜单是 70px 高，上面的代码将使锚点显示菜单正下方的 div。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-01T03:57:31.733

如果您需要将所有锚点放在页面下方：

```
a[id] {
     padding-top: 170px;
     margin-top: -170px;
} 
```

玩得开心 ！

# android - Android 语音识别命令

> ID：15122400
> 
> 赞同：1
> 
> 时间：2013-02-27T21:05:52.103
> 
> 标签：android, voice-recognition

**目标**

语音识别开始，说出语音命令并完成正确的操作。（播放一些音乐会启动任何应该发生的音乐播放器。）

**现在的情况**

我有一个正在运行的测试应用程序，它启动 Android 语音识别，成功监听并将结果返回给我的 Activity。

开始语音识别的片段：

```
 Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
 intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
 intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Speak your mind.");
 startActivityForResult(intent, REQUEST_CODE); 
```

结果片段：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_CODE && resultCode == RESULT_OK) {
            ArrayList<String> matches = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
            // matches hold the spoken words
        }
        super.onActivityResult(requestCode, resultCode, data);
    } 
```

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-29T10:21:15.753

最简单的方法是..

```
 if (matches.contains("close"))
        {
            finish();
        } 
```

# c++ - 指定了多个存储类

> ID：15122403
> 
> 赞同：1
> 
> 时间：2013-02-27T21:05:53.040
> 
> 标签：c++, map, unordered

我试图在 int main 之前创建两种不同的方法来存储数据。我有一张无序的地图，只有一张普通的地图。我收到错误，指定了多个存储类..

我只是想知道为什么 C++ 不允许这样做？

```
typedef struct dictionary{ 
 std::string word; 
unsigned char hash[20]; 

 std::string hex;
 int number;
 } a_dictionary;

 typedef struct brute{
int entry;
string secWord;
string secHex;
}

typedef std::unordered_map<std::string, dictionary*> Mymap;
typedef std::map<int, brute*> Solved;
int _tmain(int argc, _TCHAR* argv[])
{
string option;
string pass;
int choice=0;

Solved solution;
Mymap c1; 
```

错误 C2159：指定了多个存储类错误 C2146：语法错误：缺少“；” 在标识符“Mymap”之前出现错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数错误 C2146：语法错误：缺少“；” 在标识符“c1”之前出现错误 C2065：“c1”：未声明的标识符

错误 C2159：指定了多个存储类

# sql - 选择查询到数据库

> ID：15122404
> 
> 赞同：0
> 
> 时间：2013-02-27T21:05:55.043
> 
> 标签：sql, ruby-on-rails, cancan

我想执行一个 SQL 查询并将结果应用于我的能力等级：

```
res_sql = "SELECT * FROM people 
             where trainer_id != null and people.user_id = user.id 
             and user.role = 'Trainerone'" 
```

sql 应该从 Typ Sportler 返回对象，我可以将其应用于 cancan：

```
can :manage, **:sportler** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:14:16.167

我不确定我是否理解你的问题，但也许这可以帮助你一点：

```
People.joins(:trainer).
       includes(:user).
       where(user_id: user.id, user: { role: 'Trainerone' }) 
```

此代码暗示以下内容：

*   `has_many`培训师
*   人员`belongs_to`培训师
*   人`belongs_to`用户
*   `role`是用户表的一列（`joins`和`includes`（以及 where 子句中的不同关系）可能需要复数，具体取决于您的对象关系）

# javascript - 如何从文本区域获取输入的文本

> ID：15122407
> 
> 赞同：1
> 
> 时间：2013-02-27T21:06:04.967
> 
> 标签：javascript, jquery, tinymce

我正在尝试在 ASP.NET MVC 4 Web 应用程序中建立与 SignalR 的连接。我需要做的是让用户在文本区域中书写，然后单击我试图将用户编写的消息发送给同一页面上的所有客户端。

我被困在一个非常简单的步骤中。要阅读用户在 textarea 中写入的内容，我使用以下代码：

```
var msg = $('#editor').text();
alert(msg); 
```

我正在使用警报框进行测试。问题是警告框显示为空，即未正确读取消息。editor 是 html 文件中我的文本区域的 id。

这是所有的 JavaScript 文件：

```
$(function ()
    {
        var edit = $.connection.editorHub;

        edit.client.broadcastMessage = function (message) {

            var msg = $('#editor').text();
            alert(msg);

            // Add the message to the page. 
            $('#editor').append(msg);
        };

        $.connection.hub.start().done(function () {
            $('#button').click(function () {
               // call the send method in EditorHub
                chat.server.send($('#editor').val());
            });
        });
    }); 
```

这是 HTML 文件：

```
@{
   ViewBag.Title = "- Editor";
   ViewBag.ContentStyle = "/Content/CSS/editor.css";
}

 <script src="/Scripts/jquery-1.6.4.min.js" ></script>
 <script src="/Scripts/jquery.signalR-1.0.0.js"></script>
 <script src="/signalr/hubs"></script>
 <script type="text/javascript" src="~/Content/tinyMCE/tiny_mce.js" ></script> 
 <script type="text/javascript" src="~/Scripts/EditorHandler.js"></script>

 <button id="button">Click me</button>

 <form>  
       <textarea id="editor" name="content" cols="100" rows="30">
   </textarea>
 </form> 
```

它是通过 ajax 加载的，因此这是内容.. 其余部分在主文件中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T21:07:38.460

您需要从 textarea 获取值，而不是 text() ：

```
$('#editor').val(); 
```

或者从 TinyMCE 获取内容：

```
var msg = tinyMCE.get('#editor').getContent() 
```

或者

```
var msg = tinyMCE.activeEditor.getContent(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:09:24.317

我注意到您的代码的两个部分之间存在一个奇怪的区别：

这里我们使用`val()`

```
 chat.server.send($('#editor').val()); 
```

这里我们使用`text()`

```
 var msg = $('#editor').text(); 
```

我猜你希望这些使用相同的功能。可能是 val() 但无法确定您发布的代码。

# c++ - std::equal_to 是否保证默认调用 operator== ？

> ID：15122410
> 
> 赞同：2
> 
> 时间：2013-02-27T21:06:14.397
> 
> 标签：c++, std, comparison-operators

我一直认为该标准需要非专用模板`std::equal_to<T>`来调用`T::operator==`，但我注意到[cppreference.com 上的描述](http://en.cppreference.com/w/cpp/utility/functional/equal_to)几乎暗示它是相反的；当然，它没有将其作为要求提及。我还检查了 C++11 草案标准 N3337，也找不到任何保证。

如果您使用 an 创建一个类，`operator==`您希望它可以在所有情况下使用。

老实说，我想不出一种无法以`std::equal_to`这种方式实现的方法，但是我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T21:08:53.567

> std::equal_to 是否保证`operator ==`默认调用？

**是**的。

如果没有专门化，`equal_to`的调用运算符将​​调用`operator ==`。来自 C++11 标准的第 20.8.5 段：

> 1 该库为该语言（5.9、5.10）中的所有比较运算符提供基本函数对象类。

```
template <class T> struct equal_to 
{
    bool operator()(const T& x, const T& y) const;
    typedef T first_argument_type;
    typedef T second_argument_type;
    typedef bool result_type;
}; 
```

> 2**`operator()`返回`x == y`**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:09:02.500

`std::equal_to`定义为：

```
template <class T> struct equal_to {
  bool operator()(const T& x, const T& y) const;
  typedef T first_argument_type;
  typedef T second_argument_type;
  typedef bool result_type;
}; 
```

> `operator()`返回`x == y`。

所以是的，如果`T`是一个为它定义了重载作为左操作数的类类型`operator==`，它将被使用。

# java - 在 Java 中与基于文本的游戏中的其他对象交互

> ID：15122429
> 
> 赞同：2
> 
> 时间：2013-02-27T21:07:06.143
> 
> 标签：java, oop, model-view-controller, object, text-based

我会尽量清楚地说明这一点，以免造成混淆。另外，我不是在寻找一个操作过程，只是一些关于如何开始和朝着正确方向前进的提示。

总的来说，我对编程比较陌生（用 Java 编程才 5 个月），而且我几乎没有学到很多关于编程的东西。我已经了解了一些概念，但我一直在尝试了解 MVC（模型、视图、控制器）的概念。我做了一些研究，想把它应用到基于视觉文本的游戏中。

在游戏中，玩家可以在一系列“房间”中导航，其中一些是用于探索的，一些是我所说的“死亡房间”，玩家最终会死去，必须在第一个房间重新开始。游戏的重点是逃离并找到出口房间，四个大方向的每个方向都使用四个按钮控制导航；现在没什么难的。但是，我无法理解如何使房间对象相互交互。例如，如果玩家点击一个按钮向左走，他们应该能够进入他们当前所在房间左侧的房间。模型将负责根据方向更新玩家所在的房间玩家想去。

换句话说，任何人有什么技巧可以模拟一系列房间，这些房间与玩家当前所在房间的北、南、东、西其他房间交互？（希望我足够清楚。如果您需要澄清，我会回答任何问题。）再次，我正在寻找可以集中我思考的建议，而不是完整的操作方法。另外，我已经为房间设置了类和接口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:19:47.663

这是一个有趣的用例。`Model-View-Controller pattern`在 Web 应用程序中最常见，但您当然可以使其适用于基于文本的游戏。

**模型**

在模型层中，我们将拥有实体 -`User`和`Room`.

**控制器**

控制器解析输入，更新模型并为视图传递必要的数据。因此，在输入“东”时，示例控制器代码可能是：

```
User user = User.current();
Room east = user.getRoom().getEast();
user.move(east);
render(east); 
```

**看法**

Render 方法会将新房间作为参数，并且可能会解析某种显示新房间名称和描述的模板。

希望这可以帮助。在这种特殊情况下，我个人会使用[命令模式。](http://en.wikipedia.org/wiki/Command_pattern)

# java - 打印给定数字的所有唯一因子组合

> ID：15122437
> 
> 赞同：12
> 
> 时间：2013-02-27T21:07:31.770
> 
> 标签：java, algorithm, recursion, time-complexity, factors

打印正整数因子的所有唯一组合的最有效算法是什么。例如，如果给定的数字是 24，那么输出应该是

```
24*1
12*2
8*3
6*4
6*2*2
4*3*2
3*2*2*2 
```

请注意，当打印 6*4 时，不会打印 4*6。所以基本上这是一个在不考虑顺序的情况下获取唯一子集的问题（一种看待问题的方法）。但目标是拥有一个运行速度最快的函数，因此将因子存储在数据结构中以进行进一步操作可能会消耗更多时间。我已经尝试了我的算法并在下面粘贴了我的代码，但它似乎没有给我想要的结果，我在递归调用中犯了一些错误。你能帮我找出一个有效的方法来做到这一点吗？

```
public static void printfact(int num){
        int temp=0;
        for(int i=num-1;i>=num/2;i--){
            if(num % i == 0){
                temp = num/i;
                System.out.println(temp + " * " + i);
                if(isprime(i)==false){
                    System.out.print(temp + " * ");
                    printfact(i);
                }
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T01:24:34.767

尝试这种递归方法，它还接受另外 2 个输入，即在 for 循环中传递 i 的当前值以执行后续缩减的字符串，以及用于知道何时不打印重复反转的临时 int，即 8*3 和 3* 8.

```
public static void printFactors(int number, String parentFactors, int parentVal) {
    int newVal = parentVal;
    for (int i = number - 1; i >= 2; i--) {

        if (number % i == 0) {
            if (newVal > i) {
                newVal = i;
            }
            if (number / i <= parentVal && i <= parentVal
                    && number / i <= i) {
                System.out.println(parentFactors + i + "*" + number / i);
                newVal = number / i;
            }

            if (i <= parentVal) {
                printFactors(number / i, parentFactors + i + "*", newVal);
            }
        }

    }

} 
```

并使用 printFactors(12,'',12) 调用此方法，
如果您发现此方法中的缺陷，请告诉我。谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:30:16.640

1) 如果`i < num`和`i > num/2`，那么`num % i == num - i`。（易于证明。）因此，您的`for`循环将毫无意义地检查所有大于的整数，`num/2`并且该`if`语句只会成功一次，使用`temp == 2`. 我不认为那是你想要的。

2）在你解决了这个问题时，递归可能需要产生很多答案。但是你只打印`temp *`一次。所以输出看起来有点奇怪。

3)`isprime`是不必要的。`num`只要您遵循以下几点，它始终是一个合法因素，无论它是否是素数。

4）最后，您需要弄清楚如何避免多次打印出相同的因式分解。简单的解决方案是仅生成因子单调不增加的分解（如您的示例中所示）。为了做到这一点，递归需要产生具有一些最大因子（这将是先前发现的因子）的因子分解。因此，递归函数应该（至少）有两个参数：要因子的数量和最大允许因子​​。（您还需要处理我在第 4 点中提到的问题。）

下面的 Python 代码确实（我相信）解决了这个问题，但它仍然做了很多不必要的划分。与 python 风格不同，它打印每个分解而不是充当生成器，因为这样更容易翻译成 Java。

```
# Uses the last value in accum as the maximum factor; a cleaner solution
# would have been to pass max_factor as an argument.
def factors(number, accum=[]):
  if number == 1:
    print '*'.join(map(str, accum))
  else:
    if accum:
      max_factor = min(accum[-1], number)
    else:
      max_factor = number
    for trial_factor in range(max_factor, 1, -1):
      remnant = number / trial_factor
      if remnant * trial_factor == number:
        factors(remnant, accum + [trial_factor,]) 
```

可以优化`for`语句。例如，一旦你计算`remnant`了 ，你就知道下一个`remnant`必须至少大一个，所以你可以在很小的`trial_factor`时候跳过一堆值。`remnant`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T21:34:05.997

此代码查找数字的所有因子，对它们进行排序（本地和全局）：

```
public class PrimeFactors {

   final SortedSet< List< Integer >> _solutions = new TreeSet<>(
      new Comparator<List<Integer>>(){
         @Override
         public int compare( List<Integer> left, List<Integer> right ) {
            int count = Math.min( left.size(), right.size());
            for( int i = 0; i < count; ++i ) {
               if( left.get(i) < right.get(i)) {
                  return -1;
               }
               if( left.get(i) > right.get(i)) {
                  return +1;
               }
             }
            return left.size() - right.size();
         }});

   public SortedSet< List< Integer >> getPrimes( int num ) {
      _solutions.clear();
      getPrimes( num, new LinkedList< Integer >());
      return _solutions;
   }

   private void getPrimes( int num, List< Integer > solution ) {
      for( int i = num - 1; i > 1; --i ) {
         if(( num % i ) == 0 ) {
            int temp = num / i;
            List< Integer > s = new LinkedList<>();
            s.addAll( solution );
            s.add( temp );
            s.add( i );
            Collections.sort( s );
            if( _solutions.add( s )) { // if not already found
               s = new LinkedList<>();
               s.addAll( solution );
               s.add( temp );
               getPrimes( i, s );
             }
         }
      }
   }
   public static void main( String[] args ) {
      SortedSet< List< Integer >> solutions =
         new PrimeFactors().getPrimes( 24 );
      System.out.println( "Primes of 24 are:" );
      for( List< Integer > l : solutions ) {
         System.out.println( l );
      }
   }
} 
```

输出：

```
Primes of 24 are:
[2, 2, 2, 3]
[2, 2, 6]
[2, 3, 4]
[2, 12]
[3, 8]
[4, 6] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-16T20:20:31.850

我有一个在 C/C++ 中没有递归、排序或堆栈的解决方案。

```
#include <vector>
#include <iostream>

// For each n, for each i = n-1 to 2, try prod = prod*i, if prod < N.

int
g(int N, int n, int k)
{
        int i = k;
        int prod = n;
        std::vector<int> myvec;

        myvec.push_back(n);
        while (i > 1) {
                if (prod * i == N) {
                        prod = prod*i;
                        myvec.push_back(i);
                        for (auto it = myvec.begin();
                                it != myvec.end(); it++) {
                                std::cout << *it << ",";
                        }
                        std::cout << std::endl;
                        return i;
                } else if (prod * i < N) {
                        prod = prod*i;
                        myvec.push_back(i);
                } else { i--;}
        }

        return k;
}

void
f(int N)
{
        for (int i = 2; i <= N/2; i++) {
                int x = g(N, i, i-1);
                // Extract all possible factors from this point
                while (x > 0) {
                        x = g(N, i, x-1);
                }
        }
}

int
main()
{
        f(24);

        return 0;
} 
```

输出是这样的：

```
$ ./a.out
    3,2,2,2,
    4,3,2,
    6,4,
    6,2,2,
    8,3,
    12,2, 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-25T20:33:56.250

这是我基于@rici 想法的解决方案。

```
def factors(number, max_factor=sys.maxint):
    result = []

    factor = min(number / 2, max_factor)
    while factor >= 2:
        if number % factor == 0:
            divisor = number / factor

            if divisor <= factor and divisor <= max_factor:
                result.append([factor, divisor])

            result.extend([factor] + item for item in factors(divisor, factor))

        factor -= 1

    return result

print factors(12) # -> [[6, 2], [4, 3], [3, 2, 2]]
print factors(24) # -> [[12, 2], [8, 3], [6, 4], [6, 2, 2], [4, 3, 2], [3, 2, 2, 2]]
print factors(157) # -> [] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-12T02:21:15.353

```
vector<unsigned int> GetAllFactors(unsigned int number)
{
    vector<unsigned int> factors;

    for (int i = 2; i <= number; i++)
    {
        if (number % i == 0)
        {
            factors.push_back(i);
        }
    }

    return factors;
}

void DoCombinationWithRepetitionFactors(vector<unsigned int> allFactors, unsigned currentProduct, unsigned targetProduct, vector<unsigned int> currentFactorSet, unsigned currentFactorIndex)
{
    if (currentProduct == targetProduct)
    {
        for (auto a : currentFactorSet)
        {
            cout << a << " , ";
        }

        cout << endl;

        return;
    }

    for (int i = currentFactorIndex; i < allFactors.size(); i++)
    {
        if (currentProduct * allFactors[i] <= targetProduct)
        {
            currentFactorSet.push_back(allFactors[i]);
            DoCombinationWithRepetitionFactors(allFactors, currentProduct * allFactors[i], targetProduct, currentFactorSet, i);
            currentFactorSet.pop_back();
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-18T22:23:37.450

```
bool isprime(int n){
for(int i=2; i<=sqrt(n); i++)
    if(n%i==0)
        return false;
return true;
}

void printprime(int n){

int i,j,y=n;

while(y%2==0){
    cout<<"2 * ";
    y/=2;
}

for(i=3; i<=sqrt(y); i+=2){
    while(y%i==0){
        cout<<i<<" * ";
        y/=i;
    }
}

if(y>2)
    cout<<y;
}

void allfacs(int n){

int i;
unordered_set<int> done;

for(i=2; i<sqrt(n); i++){
    if(n%i==0){
        cout<<i<<" * "<<n/i<<endl;

        if(!isprime(i) && done.find(i) == done.end()){
            done.insert(i);
            printprime(i);
            cout<<n/i<<endl;
        }
        if(!isprime(n/i) && done.find(n/i) == done.end()){
            done.insert(n/i);
            cout<<i<< " * ";
            printprime(n/i);
            cout<<endl;
        }
    }
}
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-19T23:20:39.380

```
#include<bits/stdc++.h>
using namespace std;
int n;
// prod = current product of factors in combination vector
// curr = current factor
void fun(int curr, int prod, vector<int> combination )
{
    if(prod==n)
    {
        for(int j=0; j<combination.size(); j++)
        {
            cout<<combination[j]<<" ";
        }
        cout<<endl; 
        return;
    }

    for(int i=curr; i<n; i++)
    {
        if(i*prod>n) break;
        if(n%i==0)
        {
            combination.push_back(i);
            fun(i, i*prod, combination);
            combination.resize(combination.size()-1);
        }
    }
}

int main()
{
    cin>>n;
    vector<int> combination;
    fun(2, 1, combination);
    cout<<1<<" "<<n;
    return 0;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-11T23:14:00.170

我想出了这个，似乎很容易阅读和理解。希望能帮助到你！

```
def getFactors(num):

    results = []

    if num == 1 or 0:
        return [num]

    for i in range(num/2, 1, -1):

        if (num % i == 0):
            divisor = num / i

            if(divisor <= i):
                results.append([i, divisor])

            innerResults = getFactors(divisor)

            for innerResult in innerResults:
                if innerResult[0] <= i:
                    results.append([i] + innerResult)

    return results 
```

# coldfusion - ColdFusion pdf生成的页码似乎发生了变化

> ID：15122438
> 
> 赞同：0
> 
> 时间：2013-02-27T21:07:35.050
> 
> 标签：coldfusion, coldfusion-10

我们最近从 CF8 升级到 CF10，一个异常抬起了头。而以前，当我将几个文档合并在一起时，页码是连续的，但现在它在每个部分的开头重新开始。

所以如果我合并两个 3 页的文档，那么我会得到页码：1,2,3,1,2,3。

当然，它曾经是：1,2,3,4,5,6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:00:20.317

您可以简单地删除合并 PDF 的页眉和页脚，然后添加带有页码的新页眉和页脚

```
<cfpdf action="merge" source="1.pdf,2.pdf" destination="3.pdf"  >  
<cfpdf action="removeheaderfooter" source="3.pdf" destination="3.pdf" overwrite="yes" >
<cfpdf action="addheader" source="D:/Sites/cf9/3.pdf" text="_PAGENUMBER"
 destination="3.pdf" overwrite="yes" > 
```

# python - KeyError，与 ANSI 与 UTF-8 编解码器有关？

> ID：15122442
> 
> 赞同：1
> 
> 时间：2013-02-27T21:07:42.327
> 
> 标签：python, python-2.7

我是 python**和**编程的新手，所以我确定我的代码与“pythonic”相反。

我的目标是从服务器获取一个 excel 文件，打开它，将文件中的数据写入一个新文件。接下来，我打开该文件并使用 dictReader 从文件中打印几列。首先，我编写了一个脚本来打开一个 excel 文件并打印列。我能够做到这一点。现在我正在添加获取文件的下一步，将其写入本地文件，然后打开它。

我收到以下错误，在发布之前我已经研究了很多：

```
 File "request.py", line 20, in <module>
    if line['Change'] == ticket_ID:
KeyError: 'Change' 
```

下面是我的代码：

```
import csv
import sys
import urllib2

data = urllib2.urlopen("URL-HERE")

new_file = open("c:\\file-here", "w")
for fields in data:
    new_file.write(fields)
new_file.close()

test_file = 'getrequest6.csv'

csv_file = csv.DictReader(open(test_file, 'r'))

# ticket_ID = sys.argv[1]
ticket_ID = "RMSDB00010243"

for line in csv_file:
    if line['Change'] == ticket_ID:
        change_col = line['Change']
        review_col = line['Review']
        phase_col = line['Phase']
        print change_col, review_col, phase_col 
```

我发现我从服务器手动下载的文件是 ANSI 编解码器。这个文件在我打开时有效。我创建和编写的新文件 (getrequest6) 是一个 UTF-8 编解码器。我假设这是 KeyError 的原因，因为当我将数据从 getrequest6 文件复制并粘贴到 ANSI 文件时，上面的代码可以正常工作。

任何帮助，将不胜感激。我搜索了编解码器类，但我不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:15:51.663

如果问题出在某些行只是缺少“更改”的源 csv 文件中，那么您可以做的（通常也是一个好习惯）是检查字典中该键的可用性：

```
# ...
if 'Change' in line and line['Change'] == ticket_id:
    # the rest 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:49:39.977

> 当列名为“Change”时，它会打印第一列：“\xef\xbb\xbfChange”

`b"\xef\xbb\xbf"`是utf-8 中的[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)。

csv 模块不直接支持读写 Unicode。但是，如果您删除 BOM，则可以使用`csv`带有使用 utf-8 编码的数据的模块：

```
import os
import shutil
from codecs import BOM_UTF8

with open(test_file, 'rb') as file, open(test_file+".utf8", 'wb') as outfile:
     chunk = file.read(len(BOM_UTF8))
     if chunk != BOM_UTF8: # don't write BOM
        outfile.write(chunk)
     shutil.copyfileobj(file, outfile)
os.remove(test_file)
os.rename(test_file+".utf8", test_file) 
```

# jsf - ui:repeat 中 selectManyCheckbox 的集合知道它属于中继器的哪个元素

> ID：15122443
> 
> 赞同：0
> 
> 时间：2013-02-27T21:07:42.907
> 
> 标签：jsf, uirepeat, selectmanycheckbox

我正在使用 JSF 2 开发一个 Web 应用程序。我的 Web 应用程序除其他外包含一系列问题，一次提出一个问题（因此一次可以看到一个问题）并且有多个答案（我使用 h:selectManyCheckbox）。

我将问题和可能的答案存储在 ArrayList（“gridQuestionListClone”）中，用户的答案（在最后检查它们之前）存储在 HashMap（“allQuestionUserAnswerMap”）中。（如果答案需要，我可以更改存储方式）。

当用户回答完所有问题后，我希望用户可以重新检查页面中的所有问题和答案（我希望预先加载答案）。因此，所有问题及其对应的复选框（每个问题 3 个），用户在一页中选中了复选框。

所以我使用 ui:repeat 来检查所有问题和可能的答案，我需要一种机制来检查正确的复选框（用户检查过的）并让用户可以更改他/她的答案以及当我按下提交按钮时（例如）知道哪些复选框对应于哪些问题。让事情更清晰的草图:)）（也许）。因此，当用户回答完我要向他展示的所有单个问题时：

```
Question 1:
a) answer1 - CHECKED
b) answer2 - UNCHECKED
c) answer3 - CHECKED
------------------------
Question 2:
a) answer1 - UNCHECKED
b) answer2 - UNCHECKED
c) answer3 - CHECKED
------------------------
Question 3:
a) answer1 - CHECKED
b) answer2 - CHECKED
c) answer3 - UNCHECKED
------------------------
.
.
.
Question n:
a) answer1 - CHECKED
b) answer2 - UNCHECKED
c) answer3 - CHECKED
------------------------ 
SUBMIT button 
```

用户检查他/她的答案并在需要时对其进行修改，然后按下提交按钮。然后我想收集某种（或多个我并不关心，之后我可以合并它们）的集合，其中包含问题的数量和可能的答案，例如在乞讨时的“allQuestionUserAnswerMap”或类似的东西.

我的琐碎代码（不正确）：

```
<ui:repeat var="p" value="#{gridPopUpBean.gridQuestionListClone}">
                    <hr />
                    <h:panelGrid columns="2">
      ...
                        <h:panelGroup style="text-align: left">
                            <h:selectManyCheckbox
                                value="#{gridPopUpBean.oneQuestionUserAnswerList}"
                                layout="pageDirection">
                                <f:selectItem itemValue="a"
                                    itemLabel="#{p.a}" />
                                <f:selectItem itemValue="b"
                                    itemLabel="#{p.b}" />
                                <f:selectItem itemValue="c"
                                    itemLabel="#{p.c}" />
                            </h:selectManyCheckbox>
        ...
                        </h:panelGroup>
                    </h:panelGrid>
                </ui:repeat> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:12:16.103

最简单的方法是将复选框组的值绑定到当前迭代的对象，而不是将所有复选框组绑定到一个相同的父 bean 属性。

在代码中，只需替换

```
value="#{gridPopUpBean.oneQuestionUserAnswerList}" 
```

经过

```
value="#{p.oneQuestionUserAnswerList}" 
```

并相应地更改模型。

或者，您也可以`Map`通过父 bean 中的问题 ID 提供所有答案。这是一个启动示例，它使用了比您拥有的更多的自记录变量名称，以便更好地理解：

```
<ui:repeat value="#{bean.questions}" var="question">
    ...
    <h:selectManyCheckbox value="#{bean.answers[question.id]}">
        <f:selectItems value="#{question.answers}" />
    </h:selectManyCheckbox>
    ...
</ui:repeat> 
```

与例如

```
private Map<Long, Answer[]> answers = new HashMap<Long, Answer[]>(); 
```

# jquery - AJAX - 脚本不起作用

> ID：15122445
> 
> 赞同：0
> 
> 时间：2013-02-27T21:07:49.207
> 
> 标签：jquery

我正在尝试实现 - 当我单击*链接* **Name of movie**时，调用 getSummary 函数并且 iframe.php 数据显示在*摘要*div 中。下面的代码有效，但是，有一个问题。*摘要*div中的脚本（如本例中的 datepicker）将不起作用（但是它们仍然在不是通过 ajax 制作的 div 中工作）。我做错了什么？谢谢参观！

**索引.php**：

```
 <html>
        <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    ... other scripts ...

<script type="text/javascript">
    function getSummary(id)
    {
       $.ajax({

         type: "GET",
         url: 'include/iframe.php',
         data: "id=" + id, // appears as $_GET['id'] @ ur backend side
         success: function(data) {
               // data is ur summary
              $('#summary').html(data);
         }

       });

    }
    </script>
    </head>
        <body>

    <a href="javascript:void(0);" class="movie" onclick="getSummary(2)">Name of movie</a <br/>

    <div id="summary">Here is summary of movie</div>

        </body>
    </html> 
```

**包括/iframe.php**：

```
<form class="form-horizontal">
              <fieldset>
                <div class="input-prepend">
                  <span class="add-on"><i class="icon-calendar"></i></span><input type="text" name="range" id="range" />
                </div>
              </fieldset>
            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:16:31.737

您是否尝试过重新初始化 datapicker 插件？但是，如果您需要处理诸如“单击”之类的事件，则需要绑定它：`$(elementcontainer).on("click","elementtoclick",function (){...})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:11:26.187

我认为您需要在将 dom 添加到文档后绑定事件侦听器。或者使用 on 绑定代替[http://api.jquery.com/on/](http://api.jquery.com/on/)

# javascript - 为什么 var o = {"a" : "b"}; 执行并按照我的预期执行，而 eval('{"a": "b"}') 失败？

> ID：15122448
> 
> 赞同：1
> 
> 时间：2013-02-27T21:07:54.950
> 
> 标签：javascript

当我使用 eval 修复旧代码中的错误时，我意识到表达式求值非常奇怪。

如果您打开 JavaScript 控制台并键入

```
eval ('{"a": "b"}') 
```

或者

```
{"a": "b"} 
```

你得到

```
SyntaxError: Unexpected token : 
```

但是如果你输入

```
var o = {"a": "b"}; 
```

该语句以预期的结果执行。

如果你输入

```
(function() {return {"a": "b"};})() 
```

你得到：

```
Object {a: "b"} 
```

此外，如果您键入`{a: "b"}`，您会得到“b”。我完全不明白。

我曾经认为这`var o = {"a": "b"};`意味着“评估表达式`{"a": "b"}`并将结果分配给`o`.

但显然它比这更复杂。我试图在语言规范中找到关于这一点的解释，但我认为我没有使用正确的措辞进行搜索。

任何人都可以提供关于为什么我可以将本身不是有效可评估表达式的值返回或分配给变量的线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T21:10:14.573

原因是花括号在 Javascript 中用于两个目的：它们围绕对象文字，并且它们还围绕代码块。

控制台`eval`将大括号解释为开始代码块，但您输入的是对象文字。这导致了错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:09:27.243

不，写作`var o = {"a":"b"}`的意思是“创建一个具有一个名为的成员的对象，`a`其值为`b`，并将该对象分配为局部变量的值`o`”。

括号与评估表达式无关，它们在 JavaScript 中用于对象表示法：

```
var a = {
   foo:1,
   baz:2
}

console.log(a.foo);
console.log(a.baz); 
```

这将输出：

```
1
2 
```

JS 对象表示法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T21:17:31.013

你可以使用

```
eval('({"a":"b"})'); // mind the parens 
```

需要它们的原因与以下答案中描述的相同：[JavaScript 对象/函数/类声明周围的括号是什么意思？](https://stackoverflow.com/q440739/)

尽管您可能想使用正确的 JSON 解析：[`JSON.parse(str)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse).

# python - Boto 在 ssl.c 中不断崩溃

> ID：15122452
> 
> 赞同：2
> 
> 时间：2013-02-27T21:08:12.290
> 
> 标签：python, ssl, boto

当我们尝试打开一个连接时，每 3 个连接（大约）一次 boto 崩溃。

我在它离开python之前打印了所有参数，并且在每个连接上参数都是相同的。

这是堆栈跟踪：

```
boto/sqs/connection.pyc in get_queue(self, queue_name)
    292         :returns: The requested queue, or ``None`` if no match was found.
    293         """
--> 294         rs = self.get_all_queues(queue_name)
    295         for q in rs:
    296             if q.url.endswith(queue_name):

boto/sqs/connection.pyc in get_all_queues(self, prefix)
    281         if prefix:
    282             params['QueueNamePrefix'] = prefix
--> 283         return self.get_list('ListQueues', params, [('QueueUrl', Queue)])
    284 
    285     def get_queue(self, queue_name):

boto/connection.pyc in get_list(self, action, params, markers, path, parent, verb)
    880         if not parent:
    881             parent = self
--> 882         response = self.make_request(action, params, path, verb)
    883         body = response.read()
    884         boto.log.debug(body)

boto/connection.pyc in make_request(self, action, params, path, verb)
    866         if self.APIVersion:
    867             http_request.params['Version'] = self.APIVersion
--> 868         return self._mexe(http_request)
    869 
    870     def build_list_params(self, params, items, label):

boto/connection.pyc in _mexe(self, request, sender, override_num_retries, retry_handler)
    792             raise BotoServerError(response.status, response.reason, body)
    793         elif e:
--> 794             raise e
    795         else:
    796             msg = 'Please report this exception as a Boto Issue!'

SSLError: _ssl.c:316: Invalid SSL protocol variant specified. 
```

这是相关的C代码：

```
PySSL_BEGIN_ALLOW_THREADS
if (proto_version == PY_SSL_VERSION_TLS1)
    self->ctx = SSL_CTX_new(TLSv1_method()); /* Set up context */
else if (proto_version == PY_SSL_VERSION_SSL3)
    self->ctx = SSL_CTX_new(SSLv3_method()); /* Set up context */
else if (proto_version == PY_SSL_VERSION_SSL2)
    self->ctx = SSL_CTX_new(SSLv2_method()); /* Set up context */
else if (proto_version == PY_SSL_VERSION_SSL23)
    self->ctx = SSL_CTX_new(SSLv23_method()); /* Set up context */
PySSL_END_ALLOW_THREADS

if (self->ctx == NULL) {
    errstr = ERRSTR("Invalid SSL protocol variant specified.");
    goto fail;
} 
```

我们`proto_version`总是打印它`PY_SSL_VERSION_SSL23`，我认为`SSL_CTX_new`由于某种原因失败了。

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:27:41.133

原来这是由于我们加载的一个证书在某种程度上可能很糟糕，奇怪的是为什么它不会每次都崩溃。

无论如何，删除证书解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-29T12:41:52.333

certifi 最新版本存在一些问题，因此降级 certifi 将解决问题

```
pip uninstall -y certifi && pip install certifi==2015.04.28

                            or 

pip install requests[security] 
```

# javascript - 了解 javascript 闭包

> ID：15122455
> 
> 赞同：1
> 
> 时间：2013-02-27T21:08:16.003
> 
> 标签：javascript

```
function makeHelpCallback(help) {
  return function() {
    showHelp(help);
  };

//array elements here

  for (var i = 0; i < helpText.length; i++) {
    var item = helpText[i];
    document.getElementById(item.id).onfocus = makeHelpCallback(item.help);
} 
```

我无法理解最后一行。我从未见过以这种方式使用的等号，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T21:10:57.350

> 我从未见过以这种方式使用的等号

它将函数调用的返回值（在这种情况下是另一个函数；它们是第一类对象，因此可以传递）给对象的属性。

# asp.net-mvc - 在 MVC 上设置用户角色

> ID：15122456
> 
> 赞同：0
> 
> 时间：2013-02-27T21:08:22.867
> 
> 标签：asp.net-mvc, active-directory, roles

我需要一些帮助，我正在制作基于角色的菜单。我正在使用 LDAP Active Directory 登录。

我可以登录，但无法从 AD 组中获取角色。

我尝试使用角色提供程序，但无法使其正常工作。我使用以下方法获取组：

```
private ArrayList setRoles()
{
    ArrayList rolesList = new ArrayList();
    DirectoryEntry de = new DirectoryEntry("LDAP://**********");
    DirectorySearcher ds = new DirectorySearcher(de);
    ds.PropertiesToLoad.Add("memberOf");
    ds.SearchScope = SearchScope.Subtree;
    ds.Filter = "(sAMAccountName=test)"; // your username

    SearchResult result = ds.FindOne();

    foreach (string g in result.Properties["memberOf"])
        rolesList.Add(g);
    return rolesList;
} 
```

现在，我需要在某处“设置”角色才能使用

```
User.IsInRole("Admin") 
```

和

```
[Authorize role...]
public bla bla bla() 
```

任何想法，链接等？

PD：我正在使用表单授权。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:22:43.490

您不必手动执行此操作。使用内置角色提供程序应该通过在 web.config 中进行设置来完成任务。

[Active Directory 成员资格提供程序](http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx)

[Windows 令牌角色提供程序](http://msdn.microsoft.com/en-us/library/system.web.security.windowstokenroleprovider.aspx)

**更新：**这是关于 StackOverflow 的一个问题，其中涉及使用 ActiveDirectory 成员资格提供程序进行设置，但仍使用表单身份验证。

[ASP.NET MVC - 针对 Active Directory 对用户进行身份验证，但需要输入用户名和密码](https://stackoverflow.com/questions/6147864/asp-net-mvc-authenticate-users-against-active-directory-but-require-username)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:23:26.430

我没有使用 AD 的经验，但是，您需要做的是使用具有角色的 Principal 设置 HttpContext 的 User 属性。

我之前创建的一种方法是创建一个继承自 AuthorizationAttribute 的自定义授权属性。

```
public class AuthorizeActiveDirectoryAttribute : AuthorizeAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        var user = filterContext.HttpContext.User;

        //Your code to get the list of roles for the current user

        var formsIdentity = filterContext.HttpContext.User.Identity as FormsIdentity;
        filterContext.HttpContext.User = new System.Security.Principal.GenericPrincipal(formsIdentity, rolesList.ToArray());

        base.OnAuthorization(filterContext);
    }

} 
```

然后，您将其应用于您的操作方法

```
[AuthorizeActiveDirectory role...]
public bla bla bla() 
```

这也将允许您使用`User.IsInRole("Admin")`

# .net - 我需要什么同步原语？

> ID：15122460
> 
> 赞同：0
> 
> 时间：2013-02-27T21:08:42.130
> 
> 标签：.net, multithreading, synchronization

这是一个假设场景（这不是家庭作业）：

几个人在一个有桌子和水槽的厨房里。他们都可以同时吃饭。但是，一次只能使用一个水槽，而且每当有人使用水槽时，就没有人可以吃饭了。

需要什么同步原语以及如何设置？如果这需要一个信号量（例如，一个 .NET 一个[http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)），如何配置和使用它来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T21:11:57.180

这是典型的读写器问题。读者可以同时阅读（假设没有作者在写），并且任何时候只有一个作者可以写，当有人在写的时候没有人在读。

[读写器问题](http://en.wikipedia.org/wiki/Readers-writers_problem)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:15:15.410

正如 zzk 所说，这是一个多读/单写场景，在 .NET 上，您通常会使用[ReaderWriterLockSlim](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)类型的锁来同步对资源的访问

# r - as.character 的结果取决于向量内容（重新：粘贴 POSIX 日期时间）

> ID：15122461
> 
> 赞同：3
> 
> 时间：2013-02-27T21:08:51.960
> 
> 标签：r, datetime

我有个约会。

这是一个示例（由 生成`mydate <- lubridate::now()`）：

```
mydate <- structure(1361998255.23362, class = c("POSIXct", "POSIXt"), tzone = "") 
```

如果我把它放在一个向量中，它看起来还可以：

（根据@joran 的评论，我减少了最初`as.character`只使用的示例`c`。现在我提供两种情况）

```
> c(mydate)
[1] "2013-02-27 14:50:55 CST"
> as.character(mydate)
[1] "2013-02-27 14:50:55" 
```

但是，如果我尝试将它与另一个字符元素结合使用，则会删除日期时间格式：

```
> c('a', mydate)
[1] "a"                "1361998255.23362"
> as.character('a', mydate)
[1] "a"                "1361998255.23362" 
```

在这两种情况下，输出都是“字符”类

为什么会`c`根据输入向量的内容提供不同的结果？是否添加`as.character(mydate)`合适的解决方案？

```
> c('a', as.character(mydate))
[1] "a"                   "2013-02-27 14:50:55" 
```

唯一的缺点：如果我输入一个包含五个日期的向量，我宁愿不必写 as.character 五次。

*上下文：*以上是一个最小的可重现示例。上下文是我将一个向量传递给一个函数，该函数将一个向量转换为一个逗号分隔的字符串，以便编写 sql 语句：`function(x) paste(paste("'", x, "'", sep=''), collapse=',')`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T21:34:11.630

> 在这两种情况下，输出都是“字符”类

这是不正确的

```
> class(c(mydate))
[1] "POSIXct" "POSIXt" 
> dput(c(mydate))
structure(1361998255.23362, class = c("POSIXct", "POSIXt")) 
```

`c(mydate)`仍然是一个`POSIXt`对象。打印时，它看起来像一个字符，但它不是一个字符。因为有一个专门的功能，所以`c`对对象有这种行为。`POSIXt``c.POSIXct`

在第二种情况下，第一个参数是一个字符，所以它默认为`c`. 这做了两件事：它去除了除名称之外的属性，并将提升到可以表示所有元素的类型（请参阅帮助页面`c`）。剥离给的`mydate`属性

```
> as.vector(mydate)
[1] 1361998255 
```

将数字提升为字符给出

```
> as.character(as.vector(mydate))
[1] "1361998255.23362" 
```

这个字符串现在连接起来`"a"`给出你看到的结果。

```
> c('a', mydate)
[1] "a"                "1361998255.23362" 
```

* * *

关于在正确的时间获得强制的多次调用，您可以将所有日期`as.character()`与`c`(which uses `c.POSIXct`) 和调用`as.character`

```
> c('a', as.character(c(mydate, mydate)))
[1] "a"                   "2013-02-27 12:50:55" "2013-02-27 12:50:55" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T21:28:54.600

c() 函数强制转换为“公分母类型”。当您连接数字和字符向量时，您将获得所有字符值。将逻辑向量和数字向量结合起来，就可以得到所有的数值。如果您希望这些保持单独的模式，请使用`list()`函数而不是`c()`函数。完整的层次结构列在“

```
 ?c 
```

“输出类型由层次结构中组件的最高类型 NULL < 原始 < 逻辑 < 整数 < 实 < 复杂 < 字符 < 列表 < 表达式确定。” 请注意，这实际上是在谈论类型，因为“整数”、“真实”和“复杂”都是“数字”模式。然而，它并不是所有类型的完整列表：

```
?mode
?typeof 
```

在您的用例中，为什么不使用它：

```
function(x) paste(paste("'", as.character(x), "'", sep=''), collapse=',') 
```

# c - 如何在linux下编写一个使用xbox控制器的程序

> ID：15122476
> 
> 赞同：0
> 
> 时间：2013-02-27T21:09:57.243
> 
> 标签：c, linux, xbox360

目前我是一名IT学生，我想制作一个游戏作为我的学期工作。我想完全用*C制作一个**Geometry Wars*克隆（因为我们绑定到 C，所以没有 C++/C#，***只有 C 和 OpenGL***），当它完成时，我想将它作为 Linux 的开源游戏发布/苹果电脑/电脑。请问，Xbox360手柄***（有线）***如何作为游戏输入设备使用？经过一些研究，我了解到 XInput 可以做这些事情，但这真的是多平台的东西吗？我很好奇你们在 Linux 下用 C 语言对 Xbox 控制器输入进行编码。

 **** * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-13T22:10:03.533

我看了一下并找到了一些关于此的信息，我发现：

1.  使用[SDL 库](https://en.wikipedia.org/wiki/Simple_DirectMedia_Layer)
2.  使用 github [linux/joystick.h中的函数](https://github.com/torvalds/linux/blob/master/include/uapi/linux/joystick.h)

我不知道该怎么做，但一个好的开始是研究什么是 SDL，在[那里](https://wiki.libsdl.org/CategoryGameController)或上面的 github。

**解决方法：** 在 github 上查看[这个repo。](https://github.com/AntiMicro/antimicro/releases/tag/2.21)它是 JoyToKey 的 Linux 替代品。你可以用它来为你的控制器绑定键，并绑定像 CRTL+SPACE 这样的键或者将一些按钮绑定到虚拟键盘。***

# c# - AutoMapper 是否也可以用作 Re-Shape 映射工具

> ID：15122485
> 
> 赞同：1
> 
> 时间：2013-02-27T21:10:20.797
> 
> 标签：c#, viewmodel, automapper, dto

我知道 AutoMapper 只是在 2 个对象之间映射属性。

Automapper 不适用于重塑数据，我认为这必须编程。

我有一个`PeriodDTO.IEnumerable<Period>`需要重新塑造成`PeriodListViewModel.List<CellViewModel>`.

每人`CellViewModel`持有一个`List<RowViewModel>`

这不是一对一的映射，我想也许这不应该被映射 - 因为它不可能 -

```
public class PeriodRequest
    {
        public IEnumerable<Period> Periods { get; set; }
        public IEnumerable<DateTime> Weeks { get; set; }
    }

public class PeriodListViewModel
{       
    public PeriodListViewModel(IEnumerable<Period> periods)
    {
        CellViewModels = new List<CellViewModel>();
        var groupedPeriods = periods.GroupBy(p => p.LessonNumber).OrderBy(p => p.Key).ToList();
        foreach (var groupedPeriod in groupedPeriods)
        {
            var cellViewModel = new CellViewModel();
            CellViewModels.Add(cellViewModel);
            foreach (var period in groupedPeriod)
            {
                var rowViewModel = new RowViewModel();
                rowViewModel.Content = period.Content;
                rowViewModel.SchoolclassCode = period.SchoolclassCode;
                rowViewModel.DayName = period.LessonDate.ToShortDateString();
                rowViewModel.DayIndex = (int)period.LessonDate.DayOfWeek;
                rowViewModel.LessonNumber = period.LessonNumber;
                cellViewModel.Rows.Add(rowViewModel);
            }
        }
    }
    public List<CellViewModel> CellViewModels { get; set; }
}

public class CellViewModel
    {
        public CellViewModel()
        {
            Rows = new List<RowViewModel>();
        }
        public List<RowViewModel> Rows { get; set; }
    }

public class RowViewModel
    {
        public string DayName { get; set; }
        public string SchoolclassCode { get; set; }
        public string Content { get; set; }
        public int DayIndex { get; set; }
        public int LessonNumber { get; set; }
    }

public class Period
    {
        public int PeriodId { get; set; }
        public DateTime LessonDate { get; set; }
        public int LessonNumber { get; set; }
        public string SchoolclassCode { get; set; }
        public string Content { get; set; }
        public int SchoolyearId { get; set; }
        public Schoolyear Schoolyear { get; set; }
...
} 
```

目前 PeriodListViewModel 可以很容易地进行单元测试。我现在问自己 AutoMapper 如何才能让情况变得更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:02:51.233

虽然您没有微不足道的 1:1 映射 from `IEnumerable<Period>`to `List<CellViewModel>`，但您仍然可以从 Automapper 中获得一些价值，方法是仅在您获得类到类联系的地方使用它，在您的示例中是介于`Period`and之间`RowViewModel`。

`Period`考虑到这一点，您还可以更好地利用 LINQ 并在一个全面的动作中完成所有事情，前提是您设置了需要从到重新整形的投影`RowViewModel`。

这是一个控制台代码示例，它正好演示了这一点。请注意，我们通过`ValueResolve<TSource,TDestination>`重塑使用 Automapper 的解析器类的概念，并且我添加了一个额外的构造函数`CellViewModel`来接受一个`IEnumerable<RowViewModel>`，这有助于改进我们的声明。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using AutoMapper;

namespace GroupingMapping
{
    public class PeriodRequest
    {
        public IEnumerable<Period> Periods { get; set; }
        public IEnumerable<DateTime> Weeks { get; set; }
    }

    public class RowViewModel
    {
        public string DayName { get; set; }
        public string SchoolclassCode { get; set; }
        public string Content { get; set; }
        public int DayIndex { get; set; }
        public int LessonNumber { get; set; }
    }

    public class Period
    {
        public int PeriodId { get; set; }
        public DateTime LessonDate { get; set; }
        public int LessonNumber { get; set; }
        public string SchoolclassCode { get; set; }
        public string Content { get; set; }
        public int SchoolyearId { get; set; }
        // No definition provided for Schoolyear
        //public Schoolyear Schoolyear { get; set; }
    }

    public class CellViewModel
    {
        public CellViewModel()
        {
            Rows = new List<RowViewModel>();
        }

        public CellViewModel(IEnumerable<RowViewModel> rowVMSet)
        {
            Rows = new List<RowViewModel>(rowVMSet);
        }

        public List<RowViewModel> Rows { get; set; }
    }

    public class PeriodListViewModelEx
    {
        public PeriodListViewModelEx(IEnumerable<Period> periods)
        {
            CellViewModels = new List<CellViewModel>(periods
                .GroupBy(p => p.LessonNumber)
                .OrderBy(grp => grp.Key)
                .Select(grp =>
                {
                    return new CellViewModel(
                        grp.Select(p => { return Mapper.Map<Period, RowViewModel>(p); }));
                }));
        }
        public List<CellViewModel> CellViewModels { get; set; }
    }

    class DateTimeToDateNameResolver : ValueResolver<DateTime, string>
    {
        protected override string ResolveCore(DateTime source)
        {
            return source.ToShortDateString();
        }
    }

    class DateTimeToDayOfWeekResolver : ValueResolver<DateTime, int>
    {
        protected override int ResolveCore(DateTime source)
        {
            return (int)source.DayOfWeek;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Mapper.CreateMap<Period, RowViewModel>()
                .ForMember(dest => dest.DayName, opt => opt.ResolveUsing<DateTimeToDateNameResolver>().FromMember(src => src.LessonDate))
                .ForMember(dest => dest.DayIndex, opt => opt.ResolveUsing<DateTimeToDayOfWeekResolver>().FromMember(src => src.LessonDate));

            Period[] periods = new Period[3];

            periods[0] = new Period { PeriodId = 1, LessonDate = DateTime.Today.Add(new TimeSpan(1, 0, 0, 0)), LessonNumber = 101, SchoolclassCode = "CS101", Content = "Intro to CS", SchoolyearId = 2013 };
            periods[1] = new Period { PeriodId = 2, LessonDate = DateTime.Today.Add(new TimeSpan(2, 0, 0, 0)), LessonNumber = 101, SchoolclassCode = "CS101", Content = "Intro to CS", SchoolyearId = 2013 };
            periods[2] = new Period { PeriodId = 3, LessonDate = DateTime.Today.Add(new TimeSpan(1, 0, 0, 0)), LessonNumber = 102, SchoolclassCode = "EN101", Content = "English (I)", SchoolyearId = 2013 };

            PeriodListViewModelEx pvModel = new PeriodListViewModelEx(periods);

            Console.WriteLine("CellViews: {0}", pvModel.CellViewModels.Count);

            foreach (CellViewModel cvm in pvModel.CellViewModels)
            {
                Console.WriteLine("{0} items in CellViewModel Group", cvm.Rows.Count);
            }

            Console.WriteLine("Inspecting CellViewModel Rows");
            foreach (CellViewModel cvm in pvModel.CellViewModels)
            {
                foreach (RowViewModel rvm in cvm.Rows)
                {
                    Console.WriteLine("  DayName: {0}", rvm.DayName);
                    Console.WriteLine("  SchoolclassCode: {0}", rvm.SchoolclassCode);
                    Console.WriteLine("  Content: {0}", rvm.Content);
                    Console.WriteLine("  DayIndex: {0}", rvm.DayIndex);
                    Console.WriteLine("  LessonNumber: {0}", rvm.LessonNumber);
                    Console.WriteLine("  -");
                }
                Console.WriteLine("--");
            }

            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:32:36.280

几个月来，我主要使用 AutoMapper 从我的实体模型创建我的视图模型，基本上就是你在那里所做的。我使用 AutoMapper 来展平和展平非常复杂的模型。

不过，我个人不会在视图模型的构造函数中这样做。原因是您可能有不同的 PeriodListViewModel 来源。这个想法是，一旦您创建/配置了映射器，您就可以随意`Mapper.Map<PeriodViewModel(collectionOfCells);`或`Mapper.Map<PeriodViewModel(periodEntity);`根据情况要求进行操作。 **这样，您的 PeriodViewModels 和 Period 类都没有任何知识或相互关系。** 如果 Period 类响应数据库更改而更改，那么您只需调整自动映射器映射以适应更改，使 PeriodViewModel 类保持不变，因此不必触及任何使用它的视图。反之亦然。

即使我没有使用自动映射器，我仍然可以使用静态辅助方法将实体模型复制到视图模型。像 View Model 这样简单的东西应该有一个简单的默认构造函数以使其易于使用。

但是，我会说在 AutoMapper 中进行复杂的映射非常具有挑战性，而且调试有时令人生畏。很多时候，我发现自己在另一个开发人员的办公室帮助他们了解正在发生的映射链。顾名思义，当它深入研究子对象/集合/导航属性时，它会自动映射它们，因此很多事情都在**隐含地**发生，这真的很难调试。您基本上必须对这些对象图进行大量心理可视化，然后寻找您*认为*正在使用的映射。一些映射选项不允许多行匿名方法，因此您不能放置断点或额外的日志记录代码。

作为一个经常将数据从数据库推送到前端的开发人员，AutoMapper 几乎是我一直梦寐以求的，但在使用了几个月后，我可能会避免使用它来翻译超过 2 层深度的对象图。对于您在示例中所做的事情，我认为 AutoMapper 会很好。

**更新：**

我会继续单独查询和映射。第一个查询以取回我的实体，因为我可能还需要将参数传递给 where 条件。然后将来自 ToList 的结果列表传递给 automapper.map 以将 Period 实体转换为 PeriodViewModel。在您的情况下，由于 group by，您有一个嵌套集合。您可以创建从 Periods(groupedPeriod) 集合到单个 CellViewModel 的映射，然后

```
foreach (var groupOfPeriods in groupedPeriods)
{
            Mapper.Map<CellViewModel>(groupOfPeriods );
            CellViewModels.Add(cellViewModel);
} 
```

我相信这会起作用（假设您为它创建了一个映射，因为 IGrouping 实现了 IEnumerable 并且在这种情况下 TElement 是一个句点。

另一种选择不是创建从 IEnumerable 到 CellViewModel 的映射，而是创建从 Period 到 RowViewModel 的映射并执行以下操作：

```
...
foreach (var groupedPeriod in groupedPeriods)
{
    var cellViewModel = new CellViewModel();
    CellViewModels.Add(cellViewModel);
    foreach (var period in groupedPeriod)
    {
        var rowViewModel = Mapper.Map<RowViewModel>(period); 
        cellViewModel.Rows.Add(rowViewModel);    
    }
}
... 
```

第二个选项可能是更简单的选项，因为映射会更简单。我认为第一个选项可能更难以维护/调试，因为 CreateMap 中会包含太多的“魔法”。

虽然我手头没有任何旧的自动映射器代码，所以我无法为您提供有关如何配置实际 CreateMap 部件的准确代码示例，但第二个选项应该相当简单。

此外，由于 automapper 仅通过告诉它如何映射单个项目就可以了解如何映射事物列表，因此您可能会侥幸逃脱：

```
...
foreach (var groupedPeriod in groupedPeriods)
{
    var cellViewModel = new CellViewModel();
    CellViewModels.Add(cellViewModel);
    cellViewModel.Rows = Mapper.Map<List<RowViewModel>>(groupedPeriod);
}
... 
```

这完全取决于集合的类型`Rows`，如果不是，`List<RowViewModel>`则更改该部分，以便 AutoMapper 创建正确的集合类型。有关映射列表的更多信息，请参阅：[https ://github.com/AutoMapper/AutoMapper/wiki/Lists-and-arrays](https://github.com/AutoMapper/AutoMapper/wiki/Lists-and-arrays)

# javascript - jquery倒计时脚本不更新

> ID：15122486
> 
> 赞同：-2
> 
> 时间：2013-02-27T21:10:23.960
> 
> 标签：javascript, jquery

我有一个 jquery 倒计时脚本，但它似乎不会每秒更新一次，所以每次你想知道新的倒计时时间时都必须更新网页。你能帮我改一下，让它自动更新吗？

```
(function ($) {
function Countdown() {
    this.regional = [];
    this.regional[''] = {
        labels: ['Years', 'Months', 'Weeks', 'Days', 'Hours', 'Minutes', 'Seconds'],
        labels1: ['Year', 'Month', 'Week', 'Day', 'Hour', 'Minute', 'Second'],
        compactLabels: ['y', 'm', 'w', 'd'],
        whichLabels: null,
        digits: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],
        timeSeparator: ':',
        isRTL: false
    };
    this._defaults = {
        until: null,
        since: null,
        timezone: null,
        serverSync: null,
        format: 'dHMS',
        layout: '',
        compact: false,
        significant: 0,
        description: '',
        expiryUrl: '',
        expiryText: '',
        alwaysExpire: false,
        onExpiry: null,
        onTick: null,
        tickInterval: 1
    };
    $.extend(this._defaults, this.regional['']);
    this._serverSyncs = [];

    function timerCallBack(a) {
        var b = (a || new Date().getTime());
        if (b - d >= 1000) {
            x._updateTargets();
            d = b
        }
        c(timerCallBack)
    }
    var c = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || null;
    var d = 0;
    if (!c || $.noRequestAnimationFrame) {
        $.noRequestAnimationFrame = null;
        setInterval(function () {
            x._updateTargets()
        }, 980)
    } else {
        d = window.mozAnimationStartTime || new Date().getTime();
        c(timerCallBack)
    }
}
var Y = 0;
var O = 1;
var W = 2;
var D = 3;
var H = 4;
var M = 5;
var S = 6;
$.extend(Countdown.prototype, {
    markerClassName: 'hasCountdown',
    propertyName: 'countdown',
    _rtlClass: 'countdown_rtl',
    _sectionClass: 'countdown_section',
    _amountClass: 'countdown_amount',
    _rowClass: 'countdown_row',
    _holdingClass: 'countdown_holding',
    _showClass: 'countdown_show',
    _descrClass: 'countdown_descr',
    _timerTargets: [],
    setDefaults: function (a) {
        this._resetExtraLabels(this._defaults, a);
        $.extend(this._defaults, a || {})
    },
    UTCDate: function (a, b, c, e, f, g, h, i) {
        if (typeof b == 'object' && b.constructor == Date) {
            i = b.getMilliseconds();
            h = b.getSeconds();
            g = b.getMinutes();
            f = b.getHours();
            e = b.getDate();
            c = b.getMonth();
            b = b.getFullYear()
        }
        var d = new Date();
        d.setUTCFullYear(b);
        d.setUTCDate(1);
        d.setUTCMonth(c || 0);
        d.setUTCDate(e || 1);
        d.setUTCHours(f || 0);
        d.setUTCMinutes((g || 0) - (Math.abs(a) < 30 ? a * 60 : a));
        d.setUTCSeconds(h || 0);
        d.setUTCMilliseconds(i || 0);
        return d
    },
    periodsToSeconds: function (a) {
        return a[0] * 31557600 + a[1] * 2629800 + a[2] * 604800 + a[3] * 86400 + a[4] * 3600 + a[5] * 60 + a[6]
    },
    _attachPlugin: function (a, b) {
        a = $(a);
        if (a.hasClass(this.markerClassName)) {
            return
        }
        var c = {
            options: $.extend({}, this._defaults),
            _periods: [0, 0, 0, 0, 0, 0, 0]
        };
        a.addClass(this.markerClassName).data(this.propertyName, c);
        this._optionPlugin(a, b)
    },
    _addTarget: function (a) {
        if (!this._hasTarget(a)) {
            this._timerTargets.push(a)
        }
    },
    _hasTarget: function (a) {
        return ($.inArray(a, this._timerTargets) > -1)
    },
    _removeTarget: function (b) {
        this._timerTargets = $.map(this._timerTargets, function (a) {
            return (a == b ? null : a)
        })
    },
    _updateTargets: function () {
        for (var i = this._timerTargets.length - 1; i >= 0; i--) {
            this._updateCountdown(this._timerTargets[i])
        }
    },
    _optionPlugin: function (a, b, c) {
        a = $(a);
        var d = a.data(this.propertyName);
        if (!b || (typeof b == 'string' && c == null)) {
            var e = b;
            b = (d || {}).options;
            return (b && e ? b[e] : b)
        }
        if (!a.hasClass(this.markerClassName)) {
            return
        }
        b = b || {};
        if (typeof b == 'string') {
            var e = b;
            b = {};
            b[e] = c
        }
        this._resetExtraLabels(d.options, b);
        $.extend(d.options, b);
        this._adjustSettings(a, d);
        var f = new Date();
        if ((d._since && d._since < f) || (d._until && d._until > f)) {
            this._addTarget(a)
        }
        this._updateCountdown(a, d)
    },
    _updateCountdown: function (a, b) {
        var c = $(a);
        b = b || c.data(this.propertyName);
        if (!b) {
            return
        }
        c.html(this._generateHTML(b)).toggleClass(this._rtlClass, b.options.isRTL);
        if ($.isFunction(b.options.onTick)) {
            var d = b._hold != 'lap' ? b._periods : this._calculatePeriods(b, b._show, b.options.significant, new Date());
            if (b.options.tickInterval == 1 || this.periodsToSeconds(d) % b.options.tickInterval == 0) {
                b.options.onTick.apply(a, [d])
            }
        }
        var e = b._hold != 'pause' && (b._since ? b._now.getTime() < b._since.getTime() : b._now.getTime() >= b._until.getTime());
        if (e && !b._expiring) {
            b._expiring = true;
            if (this._hasTarget(a) || b.options.alwaysExpire) {
                this._removeTarget(a);
                if ($.isFunction(b.options.onExpiry)) {
                    b.options.onExpiry.apply(a, [])
                }
                if (b.options.expiryText) {
                    var f = b.options.layout;
                    b.options.layout = b.options.expiryText;
                    this._updateCountdown(a, b);
                    b.options.layout = f
                }
                if (b.options.expiryUrl) {
                    window.location = b.options.expiryUrl
                }
            }
            b._expiring = false
        } else if (b._hold == 'pause') {
            this._removeTarget(a)
        }
        c.data(this.propertyName, b)
    },
    _resetExtraLabels: function (a, b) {
        var c = false;
        for (var n in b) {
            if (n != 'whichLabels' && n.match(/[Ll]abels/)) {
                c = true;
                break
            }
        }
        if (c) {
            for (var n in a) {
                if (n.match(/[Ll]abels[02-9]/)) {
                    a[n] = null
                }
            }
        }
    },
    _adjustSettings: function (a, b) {
        var c;
        var d = 0;
        var e = null;
        for (var i = 0; i < this._serverSyncs.length; i++) {
            if (this._serverSyncs[i][0] == b.options.serverSync) {
                e = this._serverSyncs[i][1];
                break
            }
        }
        if (e != null) {
            d = (b.options.serverSync ? e : 0);
            c = new Date()
        } else {
            var f = ($.isFunction(b.options.serverSync) ? b.options.serverSync.apply(a, []) : null);
            c = new Date();
            d = (f ? c.getTime() - f.getTime() : 0);
            this._serverSyncs.push([b.options.serverSync, d])
        }
        var g = b.options.timezone;
        g = (g == null ? -c.getTimezoneOffset() : g);
        b._since = b.options.since;
        if (b._since != null) {
            b._since = this.UTCDate(g, this._determineTime(b._since, null));
            if (b._since && d) {
                b._since.setMilliseconds(b._since.getMilliseconds() + d)
            }
        }
        b._until = this.UTCDate(g, this._determineTime(b.options.until, c));
        if (d) {
            b._until.setMilliseconds(b._until.getMilliseconds() + d)
        }
        b._show = this._determineShow(b)
    },
    _destroyPlugin: function (a) {
        a = $(a);
        if (!a.hasClass(this.markerClassName)) {
            return
        }
        this._removeTarget(a[0]);
        a.removeClass(this.markerClassName).empty().removeData(this.propertyName)
    },
    _pausePlugin: function (a) {
        this._hold(a, 'pause')
    },
    _lapPlugin: function (a) {
        this._hold(a, 'lap')
    },
    _resumePlugin: function (a) {
        this._hold(a, null)
    },
    _hold: function (a, b) {
        var c = $.data(a, this.propertyName);
        if (c) {
            if (c._hold == 'pause' && !b) {
                c._periods = c._savePeriods;
                var d = (c._since ? '-' : '+');
                c[c._since ? '_since' : '_until'] = this._determineTime(d + c._periods[0] + 'y' + d + c._periods[1] + 'o' + d + c._periods[2] + 'w' + d + c._periods[3] + 'd' + d + c._periods[4] + 'h' + d + c._periods[5] + 'm' + d + c._periods[6] + 's');
                this._addTarget(a)
            }
            c._hold = b;
            c._savePeriods = (b == 'pause' ? c._periods : null);
            $.data(a, this.propertyName, c);
            this._updateCountdown(a, c)
        }
    },
    _getTimesPlugin: function (a) {
        var b = $.data(a, this.propertyName);
        return (!b ? null : (!b._hold ? b._periods : this._calculatePeriods(b, b._show, b.options.significant, new Date())))
    },
    _determineTime: function (k, l) {
        var m = function (a) {
            var b = new Date();
            b.setTime(b.getTime() + a * 1000);
            return b
        };
        var n = function (a) {
            a = a.toLowerCase();
            var b = new Date();
            var c = b.getFullYear();
            var d = b.getMonth();
            var e = b.getDate();
            var f = b.getHours();
            var g = b.getMinutes();
            var h = b.getSeconds();
            var i = /([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;
            var j = i.exec(a);
            while (j) {
                switch (j[2] || 's') {
                    case 's':
                        h += parseInt(j[1], 10);
                        break;
                    case 'm':
                        g += parseInt(j[1], 10);
                        break;
                    case 'h':
                        f += parseInt(j[1], 10);
                        break;
                    case 'd':
                        e += parseInt(j[1], 10);
                        break;
                    case 'w':
                        e += parseInt(j[1], 10) * 7;
                        break;
                    case 'o':
                        d += parseInt(j[1], 10);
                        e = Math.min(e, x._getDaysInMonth(c, d));
                        break;
                    case 'y':
                        c += parseInt(j[1], 10);
                        e = Math.min(e, x._getDaysInMonth(c, d));
                        break
                }
                j = i.exec(a)
            }
            return new Date(c, d, e, f, g, h, 0)
        };
        var o = (k == null ? l : (typeof k == 'string' ? n(k) : (typeof k == 'number' ? m(k) : k)));
        if (o) o.setMilliseconds(0);
        return o
    },
    _getDaysInMonth: function (a, b) {
        return 32 - new Date(a, b, 32).getDate()
    },
    _normalLabels: function (a) {
        return a
    },
    _generateHTML: function (c) {
        var d = this;
        c._periods = (c._hold ? c._periods : this._calculatePeriods(c, c._show, c.options.significant, new Date()));
        var e = false;
        var f = 0;
        var g = c.options.significant;
        var h = $.extend({}, c._show);
        for (var i = Y; i <= S; i++) {
            e |= (c._show[i] == '?' && c._periods[i] > 0);
            h[i] = (c._show[i] == '?' && !e ? null : c._show[i]);
            f += (h[i] ? 1 : 0);
            g -= (c._periods[i] > 0 ? 1 : 0)
        }
        var j = [false, false, false, false, false, false, false];
        for (var i = S; i >= Y; i--) {
            if (c._show[i]) {
                if (c._periods[i]) {
                    j[i] = true
                } else {
                    j[i] = g > 0;
                    g--
                }
            }
        }
        var k = (c.options.compact ? c.options.compactLabels : c.options.labels);
        var l = c.options.whichLabels || this._normalLabels;
        var m = function (a) {
            var b = c.options['compactLabels' + l(c._periods[a])];
            return (h[a] ? d._translateDigits(c, c._periods[a]) + (b ? b[a] : k[a]) + ' ' : '')
        };
        var n = function (a) {
            var b = c.options['labels' + l(c._periods[a])];
            return ((!c.options.significant && h[a]) || (c.options.significant && j[a]) ? '<span class="' + x._sectionClass + '">' + '<span class="' + x._amountClass + '">' + d._translateDigits(c, c._periods[a]) + '</span><br/>' + (b ? b[a] : k[a]) + '</span>' : '')
        };
        return (c.options.layout ? this._buildLayout(c, h, c.options.layout, c.options.compact, c.options.significant, j) : ((c.options.compact ? '<span class="' + this._rowClass + ' ' + this._amountClass + (c._hold ? ' ' + this._holdingClass : '') + '">' + m(Y) + m(O) + m(W) + m(D) + (h[H] ? this._minDigits(c, c._periods[H], 2) : '') + (h[M] ? (h[H] ? c.options.timeSeparator : '') + this._minDigits(c, c._periods[M], 2) : '') + (h[S] ? (h[H] || h[M] ? c.options.timeSeparator : '') + this._minDigits(c, c._periods[S], 2) : '') : '<span class="' + this._rowClass + ' ' + this._showClass + (c.options.significant || f) + (c._hold ? ' ' + this._holdingClass : '') + '">' + n(Y) + n(O) + n(W) + n(D) + n(H) + n(M) + n(S)) + '</span>' + (c.options.description ? '<span class="' + this._rowClass + ' ' + this._descrClass + '">' + c.options.description + '</span>' : '')))
    },
    _buildLayout: function (c, d, e, f, g, h) {
        var j = c.options[f ? 'compactLabels' : 'labels'];
        var k = c.options.whichLabels || this._normalLabels;
        var l = function (a) {
            return (c.options[(f ? 'compactLabels' : 'labels') + k(c._periods[a])] || j)[a]
        };
        var m = function (a, b) {
            return c.options.digits[Math.floor(a / b) % 10]
        };
        var o = {
            desc: c.options.description,
            sep: c.options.timeSeparator,
            yl: l(Y),
            yn: this._minDigits(c, c._periods[Y], 1),
            ynn: this._minDigits(c, c._periods[Y], 2),
            ynnn: this._minDigits(c, c._periods[Y], 3),
            y1: m(c._periods[Y], 1),
            y10: m(c._periods[Y], 10),
            y100: m(c._periods[Y], 100),
            y1000: m(c._periods[Y], 1000),
            ol: l(O),
            on: this._minDigits(c, c._periods[O], 1),
            onn: this._minDigits(c, c._periods[O], 2),
            onnn: this._minDigits(c, c._periods[O], 3),
            o1: m(c._periods[O], 1),
            o10: m(c._periods[O], 10),
            o100: m(c._periods[O], 100),
            o1000: m(c._periods[O], 1000),
            wl: l(W),
            wn: this._minDigits(c, c._periods[W], 1),
            wnn: this._minDigits(c, c._periods[W], 2),
            wnnn: this._minDigits(c, c._periods[W], 3),
            w1: m(c._periods[W], 1),
            w10: m(c._periods[W], 10),
            w100: m(c._periods[W], 100),
            w1000: m(c._periods[W], 1000),
            dl: l(D),
            dn: this._minDigits(c, c._periods[D], 1),
            dnn: this._minDigits(c, c._periods[D], 2),
            dnnn: this._minDigits(c, c._periods[D], 3),
            d1: m(c._periods[D], 1),
            d10: m(c._periods[D], 10),
            d100: m(c._periods[D], 100),
            d1000: m(c._periods[D], 1000),
            hl: l(H),
            hn: this._minDigits(c, c._periods[H], 1),
            hnn: this._minDigits(c, c._periods[H], 2),
            hnnn: this._minDigits(c, c._periods[H], 3),
            h1: m(c._periods[H], 1),
            h10: m(c._periods[H], 10),
            h100: m(c._periods[H], 100),
            h1000: m(c._periods[H], 1000),
            ml: l(M),
            mn: this._minDigits(c, c._periods[M], 1),
            mnn: this._minDigits(c, c._periods[M], 2),
            mnnn: this._minDigits(c, c._periods[M], 3),
            m1: m(c._periods[M], 1),
            m10: m(c._periods[M], 10),
            m100: m(c._periods[M], 100),
            m1000: m(c._periods[M], 1000),
            sl: l(S),
            sn: this._minDigits(c, c._periods[S], 1),
            snn: this._minDigits(c, c._periods[S], 2),
            snnn: this._minDigits(c, c._periods[S], 3),
            s1: m(c._periods[S], 1),
            s10: m(c._periods[S], 10),
            s100: m(c._periods[S], 100),
            s1000: m(c._periods[S], 1000)
        };
        var p = e;
        for (var i = Y; i <= S; i++) {
            var q = 'yowdhms'.charAt(i);
            var r = new RegExp('\\{' + q + '<\\}(.*)\\{' + q + '>\\}', 'g');
            p = p.replace(r, ((!g && d[i]) || (g && h[i]) ? '$1' : ''))
        }
        $.each(o, function (n, v) {
            var a = new RegExp('\\{' + n + '\\}', 'g');
            p = p.replace(a, v)
        });
        return p
    },
    _minDigits: function (a, b, c) {
        b = '' + b;
        if (b.length >= c) {
            return this._translateDigits(a, b)
        }
        b = '0000000000' + b;
        return this._translateDigits(a, b.substr(b.length - c))
    },
    _translateDigits: function (b, c) {
        return ('' + c).replace(/[0-9]/g, function (a) {
            return b.options.digits[a]
        })
    },
    _determineShow: function (a) {
        var b = a.options.format;
        var c = [];
        c[Y] = (b.match('y') ? '?' : (b.match('Y') ? '!' : null));
        c[O] = (b.match('o') ? '?' : (b.match('O') ? '!' : null));
        c[W] = (b.match('w') ? '?' : (b.match('W') ? '!' : null));
        c[D] = (b.match('d') ? '?' : (b.match('D') ? '!' : null));
        c[H] = (b.match('h') ? '?' : (b.match('H') ? '!' : null));
        c[M] = (b.match('m') ? '?' : (b.match('M') ? '!' : null));
        c[S] = (b.match('s') ? '?' : (b.match('S') ? '!' : null));
        return c
    },
    _calculatePeriods: function (c, d, e, f) {
        c._now = f;
        c._now.setMilliseconds(0);
        var g = new Date(c._now.getTime());
        if (c._since) {
            if (f.getTime() < c._since.getTime()) {
                c._now = f = g
            } else {
                f = c._since
            }
        } else {
            g.setTime(c._until.getTime());
            if (f.getTime() > c._until.getTime()) {
                c._now = f = g
            }
        }
        var h = [0, 0, 0, 0, 0, 0, 0];
        if (d[Y] || d[O]) {
            var i = x._getDaysInMonth(f.getFullYear(), f.getMonth());
            var j = x._getDaysInMonth(g.getFullYear(), g.getMonth());
            var k = (g.getDate() == f.getDate() || (g.getDate() >= Math.min(i, j) && f.getDate() >= Math.min(i, j)));
            var l = function (a) {
                return (a.getHours() * 60 + a.getMinutes()) * 60 + a.getSeconds()
            };
            var m = Math.max(0, (g.getFullYear() - f.getFullYear()) * 12 + g.getMonth() - f.getMonth() + ((g.getDate() < f.getDate() && !k) || (k && l(g) < l(f)) ? -1 : 0));
            h[Y] = (d[Y] ? Math.floor(m / 12) : 0);
            h[O] = (d[O] ? m - h[Y] * 12 : 0);
            f = new Date(f.getTime());
            var n = (f.getDate() == i);
            var o = x._getDaysInMonth(f.getFullYear() + h[Y], f.getMonth() + h[O]);
            if (f.getDate() > o) {
                f.setDate(o)
            }
            f.setFullYear(f.getFullYear() + h[Y]);
            f.setMonth(f.getMonth() + h[O]);
            if (n) {
                f.setDate(o)
            }
        }
        var p = Math.floor((g.getTime() - f.getTime()) / 1000);
        var q = function (a, b) {
            h[a] = (d[a] ? Math.floor(p / b) : 0);
            p -= h[a] * b
        };
        q(W, 604800);
        q(D, 86400);
        q(H, 3600);
        q(M, 60);
        q(S, 1);
        if (p > 0 && !c._since) {
            var r = [1, 12, 4.3482, 7, 24, 60, 60];
            var s = S;
            var t = 1;
            for (var u = S; u >= Y; u--) {
                if (d[u]) {
                    if (h[s] >= t) {
                        h[s] = 0;
                        p = 1
                    }
                    if (p > 0) {
                        h[u]++;
                        p = 0;
                        s = u;
                        t = 1
                    }
                }
                t *= r[u]
            }
        }
        if (e) {
            for (var u = Y; u <= S; u++) {
                if (e && h[u]) {
                    e--
                } else if (!e) {
                    h[u] = 0
                }
            }
        }
        return h
    }
});
var w = ['getTimes'];

function isNotChained(a, b) {
    if (a == 'option' && (b.length == 0 || (b.length == 1 && typeof b[0] == 'string'))) {
        return true
    }
    return $.inArray(a, w) > -1
}
$.fn.countdown = function (a) {
    var b = Array.prototype.slice.call(arguments, 1);
    if (isNotChained(a, b)) {
        return x['_' + a + 'Plugin'].apply(x, [this[0]].concat(b))
    }
    return this.each(function () {
        if (typeof a == 'string') {
            if (!x['_' + a + 'Plugin']) {
                throw 'Unknown command: ' + a;
            }
            x['_' + a + 'Plugin'].apply(x, [this].concat(b))
        } else {
            x._attachPlugin(this, a || {})
        }
    })
};
var x = $.countdown = new Countdown()})(jQuery); 
```

由于某种原因，代码在这里出现......

*更新* 对不起，忘记了“真实的东西”：P

```
$(document).ready(function() {
    // Countdown date
    var end = new Date("March, 25, 2013");
    // Countdown handler
    var countdownObj = {
        until : end,
        layout : '{dn}<span> {dl} </span>{hnn}<span> {hl} </span>{mnn}<span> {ml} </span>{snn}<span> {sl}</span>',
        labels: ['years', 'months', 'weeks', 'days', 'hours', 'min', 'sec'],
        labels1: ['year', 'month', 'week', 'day', 'hour', 'min', 'sec'],
        expiryText : "Countdown is complete!"
    };
    $('#countdown').countdown(countdownObj);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:35:43.380

看来您正在使用[**此 jQuery 插件**](http://keith-wood.name/countdown.html)的修改版本。我不知道它为什么不工作，但是当我链接到一个新的[**实时脚本**](http://keith-wood.name/js/jquery.countdown.js)副本时，它工作得很好（[**演示**](http://jsfiddle.net/wxDDa/1/)）。

```
<script src="http://keith-wood.name/js/jquery.countdown.js"></script> 
```

我建议下载插件的新副本并将其添加到您的项目中，看看是否可以解决问题。

# gcc - 使用 MinGW 为 ARM 编译 GCC

> ID：15122488
> 
> 赞同：1
> 
> 时间：2013-02-27T21:10:33.883
> 
> 标签：gcc, cross-compiling

我正在尝试使用 MinGW for ARM 在 Windows 上编译 GCC。我真的是一个 linux-/make-noob，所以如果我的问题很愚蠢，请不要打我。我刚刚下载并安装了 MinGW。然后我 mingw-get install ed mpfr、gmp 和 mpc。然后我下载了 GCC 源代码 (4.7.2) 并将其复制到我 PC 上的一个目录中。我打开 MinGW shell，浏览到目录并输入：

```
./configure --target=arm-none-eabi --with-arch=armv6 --disable-shared
make 
```

一切都很顺利，我想，直到我得到错误：

```
configure: error: cannot compute suffix of object files: cannot compile 
see 'config.log' for more details. 
```

好吧，我已经用谷歌搜索了错误并找到了[http://gcc.gnu.org/wiki/FAQ#configure_suffix](http://gcc.gnu.org/wiki/FAQ#configure_suffix)但这并没有真正帮助我。config.log 文件也没有真正告诉我任何有用的信息。知道我应该尝试什么吗？

以防万一有人想看到这个：config.log 文件：[http://pastebin.com/FY5DZXfw](http://pastebin.com/FY5DZXfw)

# wordpress - 您如何使用 Wordpress MU 域映射将子域博客更改为自己的域？

> ID：15122491
> 
> 赞同：1
> 
> 时间：2013-02-27T21:10:56.570
> 
> 标签：wordpress

在按照官方[wordpress 法典](http://codex.wordpress.org/Create_A_Network)所述创建网络并安装[Wordpress MU Domain Mapper Plugin](http://wordpress.org/extend/plugins/wordpress-mu-domain-mapping/)后，使用推荐的设置并在必要时对文件进行修改和添加。

然后我创建了一个新的辅助站点（子域）。现在`main.co.za`and`sec.main.co.za`已经存在并且两个仪表板都可以工作，但是用户在登录到`sec.main.co.za`来自 的链接时必须再次登录`main.co.za`。我相信这是标准的，浏览器不允许不同 url 之间的持久连接/cookie 会话。

一切似乎都很好，除了我已经注册`sec.co.za`并希望那是`sec.main.co.za`家里的地址。如何做到这一点？

工具中“域映射”中的设置是辅助站点吗？我应该在“网络管理员”设置中的域下更改它吗？或者我应该在网络管理员的“站点”->“所有站点”下更改站点的 URL。

让我知道最佳做法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T22:10:46.907

以网络管理员身份运行，确保在“域映射”中选择以下内容：

*   远程登录
*   永久重定向（更适合您的博主的页面排名）
*   用户域映射页面
*   将管理页面重定向到站点的原始域（如果禁用此重定向，则禁用远程登录）

现在代替网络管理员，在站点 ID 上出错并在域下输入错误的条目。让特定站点的管理员登录，`tools->domain mapping`然后简单地输入用户需要的域的 URL。

还要确保在网络管理员中的网络下正确输入了 IP 地址。如果您出于某种原因拥有动态 IP，请确保使用 CNAME/ANAME

# c++ - 我是过度组织还是组织不足 C++ 代码？

> ID：15122493
> 
> 赞同：2
> 
> 时间：2013-02-27T21:11:17.207
> 
> 标签：c++, code-organization

所以我正在做我的第一个严肃的项目。

命名空间结构：

*   蛋
    *   数学
    *   物理
    *   ...
    *   模拟

一个标题：

```
#ifndef EGG_PHYSICS_WORLD_HPP
#define EGG_PHYSICS_WORLD_HPP

namespace Egg {
namespace Physics {

class Body
{
public:
   Body();

   const Math::Vector2& GetPosition() const;

   /* ... */
};

} // namespace Physics
} // namespace Body

#endif // EGG_PHYSICS_WORLD_HPP 
```

问题：

*   整体上它是一个理智的组织吗？
*   创建嵌套命名空间是一种好习惯吗？
*   可以使用未完全指定的名称（例如。`Math::Vector2`）名称而不是名称空间`::Egg::Math::Vector2`中的名称吗？`::Egg::Physics`
*   如果嵌套命名空间组织过度，是否可以使用单个命名空间但仍使用文件夹结构，例如。Egg::World 位于“Egg/Physics/World.hpp”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:17:38.820

是的，你组织过度了。如果是应用程序代码，我通常根本不会使用命名空间。如果您将代码移动到可重用库，则将其包装到命名空间，而不是之前。使用在没有命名空间的情况下有意义的类名。

# java - jmap中显示的“From Space”和“To Space”是什么意思？

> ID：15122502
> 
> 赞同：14
> 
> 时间：2013-02-27T21:11:34.877
> 
> 标签：java, memory, garbage-collection, heap-memory, jmap

我了解 new gen / old gen / perm gen 之间的区别，但我不知道“To Space”和“From Space”是什么。我看到我的“From Space”使用率达到 99.8%，而“To Space”似乎总是保持在 0% 的使用率。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T21:17:22.843

VM 中使用的垃圾收集算法中的两个区域。

Java 细节可以在这里找到：[Java 中的垃圾收集是如何工作的](http://javarevisited.blogspot.de/2011/04/garbage-collection-in-java.html)

以及关于“从太空”和“到太空”的一般解释：[WP](https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)

> 最直接的方法是半空间收集器，它可以追溯到 1969 年。在这种移动 GC 方案中，内存被划分为**“从空间”**和**“到空间”**。最初，对象被分配到“空间”中，直到它们变满并触发收集。在集合开始时，“to space”变成“from space”，反之亦然。从根集可达的对象从“从空间”复制到“到空间”

您的“到空间”为 0% 的原因是，除了收集期间，只使用其中一个；当收集完成并且所有 obj 都在“to space”中时，名称将被交换，“to space”现在称为“from space”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-16T14:20:03.430

不同的来源用不同的术语指代这些：这些是幸存者“乒乓”空间，如[https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/sizing.html中所述](https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/sizing.html)

另一个地方称它们为 S0 和 S1： [https ://codeahoy.com/2017/08/06/basics-of-java-garbage-collection/](https://codeahoy.com/2017/08/06/basics-of-java-garbage-collection/)

JDK 的 jmap 实用程序称它们为“From Space”和“To Space”。

“PS Old Generation”中的 PS PS 代表 Parallel Scavenge

# c# - 更改 xaml 中的绑定值

> ID：15122503
> 
> 赞同：1
> 
> 时间：2013-02-27T21:11:36.377
> 
> 标签：c#, wpf, data-binding

我想知道是否有办法将一个元素的属性绑定到另一个元素的属性，但修改其间的数据。例如，我可以将文本块的 FontSize 绑定到窗口的宽度/20 或类似的东西吗？我已经遇到过几次这很有用的领域，但总是找到解决方法（通常涉及向我的 viewModel 添加字段）。优选完全xaml溶液。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:23:08.970

是的，通过实施[IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)。

对于转换器，您的方案看起来像这样：

```
[ValueConversion(typeof(double), typeof(double))]
public class DivideBy20Converter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var f = (double) value;
        return f/20.0;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var f = (double)value;
        return f * 20.0;
    }
} 
```

...以及 XAML 中的类似内容：

```
<Window x:Class="WpfApplication3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:wpfApplication3="clr-namespace:WpfApplication3"
        Title="MainWindow" Height="350" Width="525"
        x:Name="Window">
    <Window.Resources>
        <wpfApplication3:DivideBy20Converter x:Key="converter"></wpfApplication3:DivideBy20Converter>        
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <TextBox FontSize="{Binding ElementName=Window, Path=Width, Converter={StaticResource converter}}"></TextBox>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:24:43.283

你可以`IValueConverters`用来处理这样的逻辑。

这是您提到的场景的示例，您可以绑定到窗口宽度并使用`Converte`r 将宽度除以中提供的值`ConverterParameter`

```
public class MyConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value != null && parameter != null)
        {
            double divisor = 0.0;
            double _val = 0.0;
            if (double.TryParse(value.ToString(), out _val) && double.TryParse(parameter.ToString(), out divisor))
            {
                return _val / divisor;
            }
        }
        return value;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return null;
    }
} 
```

xml:

```
<Window x:Class="WpfApplication7.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:WpfApplication7"
        Title="MainWindow" Height="124" Width="464" Name="YourWindow" >

    <Window.Resources>
        <converters:MyConverter x:Key="MyConverter" />
    </Window.Resources>

    <StackPanel>
        <TextBlock FontSize="{Binding ElementName=YourWindow, Path=ActualWidth, Converter={StaticResource MyConverter}, ConverterParameter=20}" />
    </StackPanel>
</Window> 
```

# xml - 为 XML 编码 RTFD

> ID：15122504
> 
> 赞同：1
> 
> 时间：2013-02-27T21:11:43.677
> 
> 标签：xml, cocoa, rtf, nsattributedstring

我需要在 XML 文件中嵌入 RTFD 字符串（通常很短）。

```
XMLWriter writer(...)

NSAttributedString *ns=.....
NSRange all=NSMakeRange(0,[s length]);
NSData *rtfd=[s RTFDFromRange:all documentAttributes:nil];

writer.Write(rtfd); 
```

RTFD 不能保证（据我所知——我似乎找不到标准文档）数据字节即使作为 CDATA 也是安全的——或者实际上可以表示为 UTF8。我应该如何编码它们？

目标包括：

*   人类可读性
*   紧凑
*   编码和解码速度

尽管显然妥协可能是必要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:17:47.273

**更新：** 这真的只适用于 RTF，而不是 RTFD。也就是说，如果`[ns containsAttachments]`，最后可能无法创建`rtfString`。

* * *

您可以在创建 RTFD 时指定一些选项以使其采用 UTF8 编码。

这段代码对我们来说效果很好（尽管我们正在使用属性列表序列化）：

```
NSAttributedString *ns = ...;
NSError *error = nil;
NSString *rtfString = nil;
NSData *rtfdData = [ns dataFromRange:NSMakeRange(0, [ns length])
                   documentAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                       NSRTFDTextDocumentType, NSDocumentTypeDocumentOption,
                                       [NSNumber numberWithInt:NSUTF8StringEncoding], NSCharacterEncodingDocumentAttribute,
                                           nil]
                                error:&error];
if (error == nil) {
    rtfString = [[[NSString alloc] initWithData: rtfdData encoding:NSUTF8StringEncoding] autorelease];
} 
```

然后，`writer.Write(rtfString);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:09:30.303

似乎没有一个很好的答案。

属性列表序列化程序使用的`description`NSData 方法写入十六进制转储。这是可靠且 XML 安全的，但不是紧凑或易读的。

我目前正在使用 Base64 编码，它不紧凑（但比十六进制更好）并且不清晰，但对于 XML 来说也是完全安全的。

ISTM 认为 UTF8 应该很容易适应 Base256-37=Base219 编码，其中我们省略了控制字符 00-31 以及 XML 中的特殊字符（ < > " ' & ）。我是否遗漏了什么，或者是否存在一个好名字？

# cakephp - cakephp 模型 virtualFields 不能通过包含工作

> ID：15122506
> 
> 赞同：6
> 
> 时间：2013-02-27T21:11:51.830
> 
> 标签：cakephp, cakephp-1.3, php

我有一个名为的模型，`User`它有一个[名为](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Models.html#virtual-fields)`full_name`. 当我在 find() 查询中访问我的模型`User`时，我可以在我的虚拟字段上设置条件，而不会出现这样的问题：

```
$user = $this->User->find('first', array(
    'recursive' => -1, 
    'conditions' => array(
        'User.full_name' => 'Bruce Thomas'
    )
)); 
```

上面的查询将成功地为我返回名为 Bruce Thomas 的用户的数据。但是，当我尝试通过像这样的可包含行为通过另一个模型使用我的模型用户时，就会出现问题：

```
$user = $this->MyOtherModel->find('first', array(
    'contain' => array('User'),
    'conditions' => array(
        'MyOtherModel.id' => $my_other_model_id
        'User.full_name' => 'Bruce Thomas'
    )
)); 
```

（上面的这个例子假设与我的模型`MyOtherModel`有关系）`belongsTo``MyOtherModel`

上面的查询给了我以下错误：

> 警告 (512)：SQL 错误：1054：“on 子句”中的未知列“User.full_name”[CORE\cake\libs\model\datasources\dbo_source.php，第 681 行]

请帮助我如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T21:46:23.723

根据最新的 CakePHP 文档（适用于 v2 及更高版本），这是虚拟字段的限制 -[这就是它所说的](http://book.cakephp.org/2.0/en/models/virtual-fields.html#limitations-of-virtualfields)：

> virtualFields 的实现有一些限制。首先，您不能在关联模型上将 virtualFields 用于条件、顺序或字段数组。这样做通常会导致 SQL 错误，因为字段不会被 ORM 替换。这是因为很难估计可能找到相关模型的深度。此实现问题的常见解决方法是在运行时将 virtualFields 从一个模型复制到另一个模型，当您需要访问它们时：

```
$this->virtualFields['name'] = $this->Author->virtualFields['name']; 
```

或者

```
$this->virtualFields += $this->Author->virtualFields; 
```

More details here: [http://book.cakephp.org/2.0/en/models/virtual-fields.html](http://book.cakephp.org/2.0/en/models/virtual-fields.html) - if you're planning on implementing the options they suggest (which look quite alright to me) you should take a look at the "Virtual fields and model aliases" section to avoid field name clashes (i.e. if you have a field called `full_name` in two models and try issuing a query that uses both, you'll get an ambiguous field SQL error; that is avoided with aliases).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-08T07:29:25.570

In your model you have to create virtual field using below code :

```
public $virtualFields = array(
    'full_name' => 'CONCAT(YourModelName.first_name, " ", YourModelName.last_name)' 
```

);

Now You simply need to call the below code inside your controller's condition array :

```
$condition=array($this->YourModelName->virtualFields['your_virtual_field_name'].' LIKE "%'.$YourSearchKeyword.'%"'); 
```

# java - FlowPane 中的可变大小数组

> ID：15122508
> 
> 赞同：1
> 
> 时间：2013-02-27T21:11:57.513
> 
> 标签：java, javafx-2, fxml

如果我有一个可变大小的数组（例如一组卡片）。

我如何构建一些东西来显示元素（例如在 FlowPane 中）并且每个元素都有自己的控制器（每个卡的 fxml + 控制器），所以元素（卡）的容器（流窗格）可以有它的元素交换、删除或添加新的？

控制器：

```
public class HandController extends FlowPane implements Initializable{
    @Override public void initialize(URL arg0, ResourceBundle arg1){
    }
    public void setHand(ArrayList<Cards> Hand){
        //this would work if the hand were static
        for(int i = 0; i < Hand.size(); ++i){
            FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("CardView.fxml"));
            CardController controller = new CardController();
            fxmlLoader.setController(controller);
            fxmlLoader.setRoot(controller);
            Parent card = (Parent)fxmlLoader.load();
            fxmlLoader.setRoot(card);
            this.getChildren().add(card);
            controller.setCard(Hand.get(i));
        }
    }
} 
```

文件格式：

```
<fx:root type="FlowPane" xmlns:fx="http://javafx.com/fxml"
         stylesheets="view/Style.css">
    <children>
        <!--should i put something here?-->
    </children>
</fx:root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:13:31.980

FXML 是静态语言（至少目前如此）。它描述了静态页面。

如果您想拥有动态内容，则需要对其进行编码。

例如，您可以在控制器中引入方法，这些方法将使用卡片执行操作，然后适当地调用这些方法。也修正了一点你的代码。

```
<!-- HandView.fxml -->
<fx:root type="FlowPane" xmlns:fx="http://javafx.com/fxml" stylesheets="view/Style.css">
  <children>
    <!-- just leave it emtpy -->
  </children>
</fx:root> 
```

手控器：

```
public class HandController extends FlowPane {

 HandController() {
   FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("HandView.fxml"));
   fxmlLoader.setController(this);
   fxmlLoader.setRoot(this);
   fxmlLoader.load();
 }

 public void setHand(ArrayList<Cards> hand){
    for(int i = 0; i < hand.size(); ++i){
        addCard(hang.get(i));
    }    
 }

 public void addCard(Cards card) {
    getChildren().add(new CardController(card));
 }
} 
```

将所有 CardController 初始化放在构造函数中：

```
public class CardController extends Pane {
 private final Card card;
 CardController(Card card) {
   this.card = card;
   FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("CardView.fxml"));
   fxmlLoader.setController(this);
   fxmlLoader.setRoot(this);
   fxmlLoader.load();
 }
} 
```

# php - XAMPP 上 Magento 中的空白页

> ID：15122509
> 
> 赞同：1
> 
> 时间：2013-02-27T21:12:04.807
> 
> 标签：php, magento

我正在尝试在 XAMPP（在 OS X 上）上设置 Magento 站点的本地副本，并且得到一个空白页面，即使我已经浏览了此问题的常见违规者列表。我已将内存限制增加到 256M，将错误报告设置为 E_ALL，检查 magento index.php 文件是否被命中，从 index.php 文件中检查错误确实已打开（使用 ini_get('display_errors')） . 我检查了 /var/cache 但 Magento 没有在 /var 中为我的安装创建缓存目录。

还有什么可能是问题吗？我在 Ubuntu 上的 LAMP 设置上尝试了相同的安装，它运行良好。不幸的是，XAMPP 中的错误日志中没有任何帮助。

谢谢你的帮助！

# android - 如何将侦听器添加到画布中的位图？（ 安卓）

> ID：15122513
> 
> 赞同：0
> 
> 时间：2013-02-27T21:12:42.037
> 
> 标签：android, canvas, bitmap, touch-event

我在其他问题中阅读了如何获取位图的位置以及如何定义 OnTouchEvent 如下但使用位图对象无法设置侦听器，我该怎么办？

```
public boolean onTouchEvent(MotionEvent event){
int action = event.getAction();
int x = event.getX()  // or getRawX();
int y = event.getY();

switch(action){
case MotionEvent.ACTION_DOWN:
    if (x >= xOfYourBitmap && x < (xOfYourBitmap + yourBitmap.getWidth())
            && y >= yOfYourBitmap && y < (yOfYourBitmap + yourBitmap.getHeight())) {
        //tada, if this is true, you've started your click inside your bitmap
    }
    break;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:17:53.250

您必须在 a 内绘制位图`View`（例如纯色`View`并绘制`Bitmap`为背景或作为 an 的源/图像`ImageView`）。然后您可以附加一个并在该侦听器中进行`onTouchListener`处理。`View``onTouchEvent`

# html - 动画悬停效果在 ul > li 内部不起作用

> ID：15122514
> 
> 赞同：0
> 
> 时间：2013-02-27T21:12:45.363
> 
> 标签：html, css, animation, hover

所以我正在尝试重新创建[这里看到的非常酷的悬停效果](http://www.uniqlo.com/us/mens-clothing)，当您悬停左侧的大型销售图像时。

Chris Coyier 然后在[这里创建了一个超级详细的教程。](http://css-tricks.com/uniqlo-stripe-hovers/) 基本上在翻转时，这个很酷的对角线剥离背景开始在你的 div/box/image 后面动画。

除非我将 div 包含在列表 (ul li) 中，否则一切正常。一旦我这样做了，我的代码就会停止工作:(有没有办法解决这个问题？或者我犯了什么新手错误？

**这是我的代码笔：http:** [//codepen.io/leongaban/pen/hpzqD](http://codepen.io/leongaban/pen/hpzqD)

HTML

```
<ul>
  <li>

    <div class="thumb">
      <div class="thumb-hover"></div>
        <a href="#">
            <img src="http://f.cl.ly/items/3k3d1g3K34470d2v2K3O/50d942d85384a.jpeg"/>
        </a>
    </div>

  </li>
</ul> 
```

CSS

```
ul li {
list-style: none;
float: left;
}

.thumb {
  width: 376px;
  padding: 15px;
  position: relative;
  float: left;
  margin: 0 20px 0 0;
}
.thumb > img {
  display: block;
  position: relative;
}
.thumb:hover .product-hover, .thumb:active .product-hover {
  opacity: 1;
}

.thumb-hover {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0;
  transition: opacity 0.3s ease;
  background-size: 30px 30px;
  background-image: linear-gradient(45deg, rgba(0, 0, 0, 0.1) 25%, transparent 25%,   transparent 50%, rgba(0, 0, 0, 0.1) 50%, rgba(0, 0, 0, 0.1) 75%, transparent 75%, transparent);
  animation: barberpole 0.5s linear infinite;
}

@keyframes barberpole {
  from {
    background-position: 0 0;
  }

  to {
    background-position: 60px 30px;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:06:09.747

看起来您的示例中有一个小错字。.product-hover 应该变成 .thumb-hover

此外，你会希望你的 css 是 .thumb > a{ display: block; 位置：相对；没有那个条动画将在您的图像之上。

在您的 codepen 中，将 scss 更改为以下内容：

```
> a {
 display: block;
 position: relative;
}
&:hover, &:active {
 .thumb-hover {
   opacity: 1; 
 } 
```

}

[http://codepen.io/anon/pen/ACewa](http://codepen.io/anon/pen/ACewa)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:15:25.070

假设您试图影响`<img>`代码片段中的 ，这将不起作用：

```
.thumb > img { ... } 
```

那（特别是`>`）意味着*“将以下规则应用于`<img>`任何具有 class 的元素的直接后代（子）元素`.thumb`。”* 但是根据您的标记，情况并非如此。尝试仅删除该`>`CSS 规则定义中的 。

# android - Android 版谷歌地图，如何与用户进行测试？

> ID：15122515
> 
> 赞同：0
> 
> 时间：2013-02-27T21:12:48.090
> 
> 标签：android, google-maps, testing

我正在一个团队尝试制作一个使用 Google 地图的 Android 应用程序。我们每个人都注册了自己的地图 api 密钥（调试，版本 1）。几乎任何时候个人在 Eclipse 中工作，我们都必须将我们的 api 密钥重新粘贴到 xml 文件中，否则我们只会得到灰色网格。

我们一直在处理这个问题，但我们需要能够与没有地图 api 的用户一起测试它。

解决方案是什么？我进行了搜索，但没有看到我能理解的解决方案。我是Android新手，所以请充分解释。~~像我智障一样跟我说话~~

如果您通过指向一个页面来回答并且上面有4-6个不同的“解决方案”，我不知道您指的是哪个。我看到的答案都是针对非ANDROID的网页。我没有要在 Android 中编辑的 CSS 文件。或者他们正在谈论与开发人员而不是用户共享密钥。用户无权更改文件！另外，正如我提到的，我们使用的是版本 1，因此不能对版本 2 或 3 使用“解决方案”。由于与此问题无关的原因，我们无法切换版本。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:18:11.813

为什么不直接向其他人发送 APK 而不是源代码？基本上就像您在 Google Play 商店上发布应用程序一样。生成发布密钥，使用该密钥签署应用程序，然后向该人发送 APK。然后，他们可以将 APK 加载到他们的手机上，或者，如果安装了 Android SDK，则可以加载到随附的模拟器上。在任何一种情况下，他们都需要在他们的设备上安装所需的组件——例如 Google Play 服务、地图等——就像下载应用程序的任何人一样。但这解决了复制粘贴密钥问题。

# java - 休眠 - 在重复键上自动填充记录 ID

> ID：15122516
> 
> 赞同：2
> 
> 时间：2013-02-27T21:12:50.673
> 
> 标签：java, database, hibernate, unique-key, on-duplicate-key

我正在从文本文件（一个投标一个文件）源加载投标列表，我想将其存储到数据库中。我有表 address_point、street、city 和 country，其中 address_point 是从许多表（组织、投标等）中引用的。

![方案](../Images/e406654738417e216e20a606d34df7c6.png)

当脚本正在加载数据并尝试在一个失败并出现错误的事务中保存相同的地址时 - 重复键。

例如脚本将添加新的投标，并且投标由新公司拥有。新投标和新公司具有相同的地址，这两个对象被插入到一个事务中，并且它们都包含相同的地址哪个城市已经存储在数据库中所以首先我必须找到这个组织的城市并将其替换为找到的对象或设置主要关键和做同样的招标。

下一个示例脚本将添加未存储在数据库中的城市的新投标和新组织，我必须检查该城市是否在数据库中。下一步是我必须比较这两个城市，如果城市相等，则将它们作为一个对象以避免重复键。

但是我有超过 3 个参考来解决招标、组织、旅游等交易中的要点。这两个示例仅适用于城市，而不适用于国家，地区，......所以设置条件有点混乱。

如何解决这个问题最有效的方法是什么？我已经定义了 isEqueal 和 hashCode 但我读过这些方法仅适用于集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:00:46.967

我认为 isEqual 和 hashCode 不一定是您在这里寻找的东西，实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html "可比")接口可能更适合。

我从您上面的帖子中得到的印象是您正在创建具有相同值的新（尚未附加到休眠会话）对象，然后尝试保存它们。也许您可以在保存之前识别这些重复的案例，并让您的公司和投标人在保存之前引用相同的 POJO。

# google-dfp - DFP %%PATTERN%% 未在广告素材中呈现

> ID：15122519
> 
> 赞同：2
> 
> 时间：2013-02-27T21:13:10.760
> 
> 标签：google-dfp

我正在使用 DFP 使用自定义条件定位广告位，例如：

```
googletag.defineSlot("/example/adunit", [728, 90], "div-gpt-ad-123456789-0")
.addService(googletag.pubads())
.setTargeting("var1", "value"); 
```

在我的广告素材中，我正在广告素材中编写等效的宏来输出值：

```
%%PATTERN:var1%% 
```

问题是，我知道向 DFP 提供了自定义属性，因为它定位正确的广告，并且您可以在请求中看到自定义条件（通过 Fiddler 查看），但宏不会在广告素材中呈现值。

我遵循了文档中的建议，但我看不出哪里出了问题。有谁知道我做错了什么？对如何以及在何处使用此宏有任何限制吗？

谢谢

# qt - 如何判断 QtMainWindow 是否正在调整大小？

> ID：15122520
> 
> 赞同：0
> 
> 时间：2013-02-27T21:13:10.870
> 
> 标签：qt, pyqt

我不想在*事后*知道（为此，我可以赶上 resizeEvent），我想在实际发生任何事情*之前*知道，当用户点击一侧/角落并开始拖动东西时，然后在调整大小完成后释放鼠标时再次。（我知道我可以捕捉到鼠标事件，但是有没有办法告诉这些事件会导致窗口调整大小？）

# asana - 如何通过 API 将任务移动到子任务 Asana

> ID：15122522
> 
> 赞同：0
> 
> 时间：2013-02-27T21:13:25.917
> 
> 标签：asana

有没有办法将现有任务转换为另一个任务的子任务？它适用于拖放我想知道如何通过 API 做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:46:01.080

任务的 Parent 字段是只读的，不能通过 API 修改。

根据 Asana API 文档：[https ://asana.com/developers/api-reference/tasks](https://asana.com/developers/api-reference/tasks)

# jquery - jQuery中的禁用按钮

> ID：15122526
> 
> 赞同：440
> 
> 时间：2013-02-27T21:13:33.013
> 
> 标签：jquery

我的页面创建多个按钮为`id = 'rbutton_"+i+"'`. 下面是我的代码：

```
<button type='button' id = 'rbutton_"+i+"' onclick=disable(i);>Click me</button> 
```

在 Javascript 中

```
function disable(i){
    $("#rbutton'+i+'").attr("disabled","disabled");
} 
```

但是当我点击它时它不会禁用我的按钮。

* * *

## 回答 #1

> 赞同：741
> 
> 时间：2013-02-27T21:15:06.487

改为使用`.prop`（并清理您的选择器字符串）：

```
function disable(i){
    $("#rbutton_"+i).prop("disabled",true);
} 
```

生成的 HTML：

```
<button id="rbutton_1" onclick="disable(1)">Click me</button>
<!-- wrap your onclick in quotes --> 
```

* * *

但“最佳实践”方法是使用 JavaScript 事件绑定，`this`而不是：

```
$('.rbutton').on('click',function() {
    $(this).prop("disabled",true);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<button class="rbutton">Click me</button>
```

[http://jsfiddle.net/mblase75/2Nfu4/](http://jsfiddle.net/mblase75/2Nfu4/)

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2016-08-25T20:08:13.207

这是我认为最简单的方法：

```
// All buttons where id contains 'rbutton_'
const $buttons = $("button[id*='rbutton_']");

//Selected button onclick
$buttons.click(function() {
    $(this).prop('disabled', true); //disable clicked button
});

//Enable button onclick
$('#enable').click(() =>
    $buttons.prop('disabled', false) //enable all buttons
);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<button id="rbutton_200">click</button>
<button id="rbutton_201">click</button>
<button id="rbutton_202">click</button>
<button id="rbutton_203">click</button>
<button id="rbutton_204">click</button>
<button id="rbutton_205">click</button>
<button id="enable">enable</button>
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2013-02-27T21:15:12.503

试试这个代码：
HTML

```
<button type='button' id = 'rbutton_'+i onclick="disable(i)">Click me</button> 
```

功能

```
function disable(i){
    $("#rbutton_"+i).attr("disabled","disabled");
} 
```

* * *

使用 jquery 的其他解决方案

```
$('button').click(function(){ 
    $(this).attr("disabled","disabled");
}); 
```

[演示](http://jsfiddle.net/CFv4M/)

* * *

纯javascript的其他解决方案

```
<button type='button' id = 'rbutton_1' onclick="disable(1)">Click me</button>

<script>
function disable(i){
 document.getElementById("rbutton_"+i).setAttribute("disabled","disabled");
}
</script> 
```

[演示2](http://jsfiddle.net/WuyJD/)

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2015-11-13T15:48:05.560

这里有两件事，根据 OPs 问题，最高投票的答案在技术上是正确的。

简要概括为：

```
$("some sort of selector").prop("disabled", true | false); 
```

但是，如果您使用 jQuery UI（我知道 OP 不是，但有些人可能会到达这里），那么虽然这将禁用按钮单击事件，但它不会使按钮根据 UI 样式显示为禁用。

如果您使用的是 jQuery UI 样式按钮，则应通过以下方式启用/禁用它：

```
$("some sort of selector").button("enable" | "disable"); 
```

[http://api.jqueryui.com/button/#method-disable](http://api.jqueryui.com/button/#method-disable)

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2017-11-07T02:10:37.820

禁用按钮：

```
$('#button_id').attr('disabled','disabled'); 
```

启用按钮：

```
$('#button_id').removeAttr('disabled'); 
```

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2016-10-04T13:00:45.187

尝试这个

```
function disable(i){
    $("#rbutton_"+i).attr("disabled",true);
} 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2014-08-21T04:21:05.420

简单地说，它工作正常，在 HTML 中：

```
<button type="button" id="btn_CommitAll"class="btn_CommitAll">save</button> 
```

在 JQuery 方面，将此功能用于禁用按钮：

```
function disableButton() {
    $('.btn_CommitAll').prop("disabled", true);
} 
```

对于启用按钮：

```
function enableButton() {
    $('.btn_CommitAll').prop("disabled", false);
} 
```

就这样。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-08-17T17:16:15.910

这是使用 ajax 的方法。

```
$("#updatebtn").click(function () {
    $("#updatebtn").prop("disabled", true);
    urlToHandler = 'update.ashx';
            jsonData = data;
            $.ajax({
                url: urlToHandler,
                data: jsonData,
                dataType: 'json',
                type: 'POST',
                contentType: 'application/json',
                success: function (data) {
                    $("#lbl").html(data.response);
                    $("#updatebtn").prop("disabled", false);
                    //setAutocompleteData(data.response);
                },
                error: function (data, status, jqXHR) {
                    alert('There was an error.');
                    $("#updatebtn").prop("disabled", false);
                }
            }); // end $.ajax 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-05-10T10:18:17.703

这对我有用：

```
<script type="text/javascript">
function change(){
    document.getElementById("submit").disabled = false;
}
</script> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-09-22T11:52:09.783

我想在某些情况下禁用按钮，我使用的是第一种解决方案，但它对我不起作用。但是当我使用第二个时它起作用了。下面是浏览器控制台的输出。

1. **$('#psl2 .btn-continue').prop("禁用", true)**

```
<a class=​"btn btn-yellow btn-continue" href=​"#">​Next​&lt;/a>​ 
```

2. **$('#psl2 .btn-continue').attr("disabled","disabled")**

```
<a class=​"btn btn-yellow btn-continue" href=​"#" disabled=​"disabled">​Next​&lt;/a>​ 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-26T13:25:17.883

对于 Jquery UI 按钮，这有效：

```
$("#buttonId").button( "option", "disabled", true | false ); 
```

# java - Java：按类字段从数组中选择元素

> ID：15122531
> 
> 赞同：-2
> 
> 时间：2013-02-27T21:13:50.370
> 
> 标签：java, arrays, class, select

```
public class Book {
public String author;
public String title;
public int pages;
//...
} 
```

我有课书，创建数组`Book[] books=new Book[4];` 如何选择作者，写了最多的书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:23:50.033

遍历数组，并为每个唯一的作者记录作者在单独数组中出版的书籍总数.......我建议您为作者创建一个新类，其中包含他们的姓名和数量他们出版的书籍，并且每次添加带有他们名字的书籍时都会增加它。

# asp.net-mvc-4 - 从视图中获取实体的名称 - 最好是复数名称

> ID：15122532
> 
> 赞同：0
> 
> 时间：2013-02-27T21:13:56.870
> 
> 标签：asp.net-mvc-4, entity-framework-5, pluralize

我的视图直接将实体作为模型：

```
@model MyProject.Models.MyEntity 
```

有没有一种简单的方法可以在视图中获取实体的复数名称？在上面的例子中，我想要`MyEntities`.

我知道我可以在助手中或在控制器中执行此操作并将其传递到 ViewBag 或 ViewModel 中 - 但是是否有直接的方法可以在视图中获取它？

非复数名称可以，因为我在`String`对象上创建了一个扩展方法，该方法使单词复数：

```
using System.Data.Entity.Design.PluralizationServices;

namespace System
{
    public static class StringExtensionMethods
    {
        public static string Pluralise(this string word, CultureInfo culture)
        {
            var service = PluralizationService.CreateService(culture);

            if (service.IsSingular(word))
            {
                return service.Pluralize(word);
            }

            return word;
    }
} 
```

PS。如果有人想使用上述内容，则`System.Data.Entity.Design`需要参考。

编辑：

我刚刚意识到我可以做到`Model.GetType().Name.Pluralise();`，因为这就是我所传递的。

嗯……有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:52:14.317

这几乎是最好的方法，但是大多数人会认为你应该在控制器中做它，并通过 ViewModel 将复数名称传递给视图

# ssas - MDX Where vs SubCube 混淆

> ID：15122534
> 
> 赞同：0
> 
> 时间：2013-02-27T21:14:01.360
> 
> 标签：ssas, mdx, olap

我有以下 MDX：

```
SELECT NON EMPTY 
       {
            [Measures].[My Measure]
       } ON COLUMNS 
FROM 
(
    SELECT 
           NONEMPTY(StrToMember(@StartDate,CONSTRAINED):StrToMember(@EndDate,CONSTRAINED)) 
           ON COLUMNS,

           NONEMPTY( STRTOSET(@Division)) 
           ON ROWS
    FROM
    (
        SELECT 
               NONEMPTY({[Project].[Project Status].&[Open],[Project].[Project Status].&[Closed]}) 
               ON COLUMNS,

               NONEMPTY(STRTOSET(@TargetLanguage)) 
               ON ROWS
        FROM [My Cube]
    )
    WHERE STRTOSET(@Project)
)
WHERE STRTOSET(@Requestor) 
```

**我的目标如下：** 过滤@StartDate、@EndDate、@Division、@TargetLanguage、@Project、@Requestor（除了过滤项目状态以打开/关闭...）

他们唯一能让这些工作的方法是玩弄子立方体和轴，直到我得到一个正确的结果......例如，我不明白为什么，在第二个子选择中，我不能简单地说：

```
Where STRTOSET(@TargetLanguage) 
```

而不是把它放在行上。我不能 100% 确定这是否返回了正确的数据，因为它是如此令人费解……有什么解释吗？到目前为止，谷歌一直没有帮助，这让我相信将事物放在子立方体中的行上并不是正确的解决方案......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:41:15.147

尝试这个：

我不是 100% 使用子多维数据集，但重构您的代码我认为它与以下内容相同：

```
SELECT NON EMPTY 
       {
            [Measures].[My Measure]
       } ON COLUMNS 
FROM 
       [My Cube]
WHERE 
(
    STRTOSET(@Requestor),
    STRTOSET(@TargetLanguage), 
    {[Project].[Project Status].&[Open],[Project].[Project Status].&[Closed]},
    STRTOSET(@Division),
    {StrToMember(@StartDate,CONSTRAINED):StrToMember(@EndDate,CONSTRAINED)},
    STRTOSET(@TargetLanguage)
) 
```

说实话，第一个非空似乎也不需要。

我看到它的方式是内部子立方体只是过滤切片，我认为它们非常简单，可以添加到主过滤器中。

# c# - ASP.NET MVC4 不在 IIS 中呈现布局

> ID：15122535
> 
> 赞同：3
> 
> 时间：2013-02-27T21:14:02.187
> 
> 标签：c#, visual-studio-2010, windows-7, iis-7, asp.net-mvc-4

几年来一直在使用 ASP.NET 和 MVC，但之前从未见过这个......

刚收到一台新机器。创建了一个新的 MVC4 Web 项目（用于 Internet，在向导中）。我正在使用“开箱即用”的项目来测试一切是否正确设置和配置。

如果我使用内置的 Web 服务器从 Visual Studio (2010) 运行它，那么一切都很好。但是，我在 IIS 中设置了一个应用程序，它没有呈现布局（默认生成的代码位于 ~/Views/Shared/_Layout.cshtml 的默认位置），但我确实得到了 Index.cshtml（~/Views/Home/Index.cshtml）。 cshtml) 内容。布局中没有呈现任何内容：没有 html 标记、没有样​​式、没有 javascript、没有 body 标记，什么都没有。

是否进行了基本诊断... IIS 中没有出现服务器错误。事件/应用程序日志中没有任何错误记录。Chrome 网络检查器工具中没有显示任何内容（甚至没有 404s 或 500s）。

有任何想法吗？我被难住了……感觉它的东西非常非常简单。

Index.cshtml（默认生成的代码，除了我在底部的测试代码，只是为了确保 MVC dll 被正确提取）：

```
<h3>We suggest the following:</h3>
<ol class="round">
    <li class="one">
        <h5>Getting Started</h5>
        ASP.NET MVC gives you a powerful, patterns-based way to build dynamic websites that
        enables a clean separation of concerns and that gives you full control over markup
        for enjoyable, agile development. ASP.NET MVC includes many features that enable
        fast, TDD-friendly development for creating sophisticated applications that use
        the latest web standards.
        <a href="http://go.microsoft.com/fwlink/?LinkId=245151">Learn more…&lt;/a>
    </li>

    <li class="two">
        <h5>Add NuGet packages and jump-start your coding</h5>
        NuGet makes it easy to install and update free libraries and tools.
        <a href="http://go.microsoft.com/fwlink/?LinkId=245153">Learn more…&lt;/a>
    </li>

    <li class="three">
        <h5>Find Web Hosting</h5>
        You can easily find a web hosting company that offers the right mix of features
        and price for your applications.
        <a href="http://go.microsoft.com/fwlink/?LinkId=245157">Learn more…&lt;/a>
    </li>
</ol>

@foreach(var i in new int[]{1,2,3,4,5})
{
    <div>Test @i.ToString()</div>
} 
```

在 Chrome 中渲染：

```
<h3>We suggest the following:</h3>
<ol class="round">
    <li class="one">
        <h5>Getting Started</h5>
        ASP.NET MVC gives you a powerful, patterns-based way to build dynamic websites that
        enables a clean separation of concerns and that gives you full control over markup
        for enjoyable, agile development. ASP.NET MVC includes many features that enable
        fast, TDD-friendly development for creating sophisticated applications that use
        the latest web standards.
        <a href="http://go.microsoft.com/fwlink/?LinkId=245151">Learn more…&lt;/a>
    </li>

    <li class="two">
        <h5>Add NuGet packages and jump-start your coding</h5>
        NuGet makes it easy to install and update free libraries and tools.
        <a href="http://go.microsoft.com/fwlink/?LinkId=245153">Learn more…&lt;/a>
    </li>

    <li class="three">
        <h5>Find Web Hosting</h5>
        You can easily find a web hosting company that offers the right mix of features
        and price for your applications.
        <a href="http://go.microsoft.com/fwlink/?LinkId=245157">Learn more…&lt;/a>
    </li>
</ol>

    <div>Test 1</div>
    <div>Test 2</div>
    <div>Test 3</div>
    <div>Test 4</div>
    <div>Test 5</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T20:57:17.900

所以，这是最终的解决方案（*垂头丧气*）：

首先，打开 IIS，点击网站，打开 IIS 组下的 Authentication settings，点击 Anonymous Authentication 并点击右侧 Actions 面板中的“Edit”。在这里，请注意匿名身份验证是如何执行的。它可以是特定用户或应用程序池目录。

无论哪种方式，您都需要确保此帐户在您为网站提供服务的目录的安全对话框中具有适当的权限。在我的情况下（我相信默认情况下，因为这是一个全新的盒子）它将被设置为特定用户：IUSR。如前所述，为该用户提供读取/执行文件的适当权限，您应该一切顺利。

对此我的提示是，我试图在网站上加载静态文件，例如 css 或图像，并且我得到 404 或重定向到登录这些文件（我尝试了一些关于帐户和权限的不同解决方案）。

参考：

*   [https://stackoverflow.com/a/10834906/298758](https://stackoverflow.com/a/10834906/298758)
*   [https://serverfault.com/questions/260777/why-isnt-iis-serving-my-static-css-js-files](https://serverfault.com/questions/260777/why-isnt-iis-serving-my-static-css-js-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:18:17.797

听起来好像`~\Views\_ViewStart.cshtml`没有正确设置布局。

通常它的内容应该是这样的......

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-07T21:08:43.043

其他可能的问题可能是：

1.  _layout.cshtml 文件上的构建操作不正确（确保将其设置为“内容”，以便将其包含在 webdeploy 包中）。

2.  _ViewStart.cshtml 文件上的构建操作不正确（确保将其设置为“内容”，以便将其包含在 webdeploy 包中）。

3.  确保这两个文件都包含在您的项目中（我知道这听起来很傻，但确实发生在我身上）。

# cloudbees - 如何将工件从存储库部署到 AppEngine

> ID：15122536
> 
> 赞同：0
> 
> 时间：2013-02-27T21:14:07.510
> 
> 标签：cloudbees

我想创建一个 Jenkins，它将我的 Maven 存储库中已经存在的工件部署到 Google AppEngine。

目前我有一个构建和部署的工作，但我想把它分成两个独立的工作：

*   一项构建工件并将其部署到存储库的工作
*   从存储库获取工件并将其部署到 AppEngine 的第二个作业

AppEngine 部署任务期望该项目在工作区中可用，因此我想我需要创建一个下载和提取工件的任务，但我不知道如何执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:51:53.687

第一个选项是使用 copy-artifact 插件从另一个作业中复制构建的工件。另一个可能更好的选择是让您在构建作业中设置[升级](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)以部署到 AppEngine，因此您有一个独特的部署过程（工件不会在每个构建上部署）但不需要复杂的作业设置。

# codeigniter - 如何在 CodeIgniter DataMapper ORM 中有效地加载多个 has_many 关系？

> ID：15122537
> 
> 赞同：1
> 
> 时间：2013-02-27T21:14:10.080
> 
> 标签：codeigniter, codeigniter-2, codeigniter-datamapper

给定以下模型：

类别：has_many('template') 模板：has_many('tag', 'procedure')

加载与所有类别相关的所有对象的最有效方法是什么？

例如，我目前正在执行以下操作，但希望有更好的方法：

```
// Load all Category objects
$categories = new Category();
$categories->get();

// Load all Template objects related to each Category
foreach($categories as $category)
{
  $category->templates->get();

  // Load all the Tag and Procedure objects related to each template
  foreach($category->templates as $template)
  {
    $template->tags->get();
    $template->procedures->get();
  }
} 
```

现在，这段代码在一个特定页面上执行了 200 多个查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:32:47.677

您可以使用以下

```
foreach($categories as $category)
    {
        // here you can use the $category object
        foreach($category->templates as $template){
            // here you can use the $template object
            foreach($template->tags as $tags){
                // here you can use the $tags object
            }
            foreach($template->procedures as $proceadures){
                // here you can use the $proceadures object
            }
        }
    } 
```

确保您已激活 datamapper 配置 application/config/datamapper.php 中的自动填充选项，并且您不需要在所有模型上运行 get()

```
$config['auto_populate_has_many'] = TRUE;
$config['auto_populate_has_one'] = TRUE; 
```

希望能帮助到你！

# php - 检查预订空位是否在 MySQL 数据库表中可用的最佳方法

> ID：15122539
> 
> 赞同：3
> 
> 时间：2013-02-27T21:14:11.383
> 
> 标签：php, mysql, database, pdo

我现在为我的预订系统准备好了数据库和表结构。我现在需要能够搜索以查看在一组日期内是否有可用的汽车。我的表结构是：

car_table：（存储汽车信息）

```
ID     | car_make | car_name
1      | Ford     | Focus
2      | BMW      | Z3
3      | Audi     | A5 
```

booking_table：（存储大部分信息 - 日期、ID 等）

```
booking_ID  | start_date | end_date
125674      | 2013-02-27 | 2013-03-01    
887463      | 2013-03-05 | 2013-03-07     
209930      | 2013-03-16 | 2013-03-22 
```

reservation_table：（将汽车链接到预订）

```
ID     | booking_ID | car_ID
1      | 125674     | 2
2      | 887463     | 2
3      | 209930     | 1 
```

使用 PDO PHP，最好的搜索查询是什么，以确保只有可用日期显示为可预订，因为我需要确保我不会收到重复的预订/日期。目前我所能想到的就是在客户要求的日期内搜索任何预订，如果我得到任何结果，那么这意味着它不可用，否则我可以继续：

```
$query_params = array( 
   ':start_search' => $_POST['user_selected_startdate'],
    ':end_search' => $_POST['user_selected_enddate'],
);

$query = " 
    SELECT 
        *
    FROM 
        booking_table
    WHERE 
        start_date BETWEEN :start_search AND :end_search AND
        end_date BETWEEN :start_search AND :end_search 
"; 

try { 
    $stmt = DB::get()->prepare($query); 
    $stmt->execute($query_params); 

    $rows = $stmt->fetchAll();
}  
catch(PDOException $ex) { 
    die("Failed to run query: " . $ex->getMessage()); 
} 

if(!$rows) {
    // booking is available, continue and pay
}
else {
    // booking is unavailable, try again
} 
```

这是确保没有人在另一个插槽上预订的最佳程序和更安全的方法吗？

# javascript - 为什么 div count 一直返回 0

> ID：15122540
> 
> 赞同：1
> 
> 时间：2013-02-27T21:14:13.110
> 
> 标签：javascript, jquery

我有一个真正简单的问题，我似乎无法找到一个真正简单的答案。简单的问题是我的 jQuery div 计数一直返回 0，我不知道为什么。我试过 .children()，但无济于事。我使用的是 1.8.3，所以，我相信 size() 不起作用 - 我试过了，但无济于事。它应该和我下面的代码一样简单。

我正在使用的 HTML 示例：

```
<div id="someID">
  <div class="someClass">blah</div>
  <div class="someClass">blah</div>
  <div class="someClass">blah</div>
  <div class="someClass">blah</div>
  <div class="someClass">blah</div>
  <div class="someClass">blah</div>
</div> 
```

jQuery 示例：

```
var number = $('#someID > div').length;
alert(number); 
```

我的警报一直返回 0，而实际上它应该返回 6。我错过了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:17:00.753

您在页面加载完成后使用它吗？使用 $(document).ready() 块：

```
$(document).ready(function(){
   var number = $('#someID > div').length;
   alert(number);
} 
```

确保您的项目已加载。您也可以将选择器更改为：

```
$('#someID div') 
```

# javascript - 仅显示要单击的选项卡的内容

> ID：15122542
> 
> 赞同：0
> 
> 时间：2013-02-27T21:14:24.160
> 
> 标签：javascript, jquery, html

我正在尝试使用选项卡导航并根据单击的选项卡，我需要根据该选项卡显示内容并隐藏属于其他选项卡的内容。我已经包含了选项卡部分、选项卡内容所在的内部 html 以及执行此操作的 javascript。不工作，有什么想法我想念的吗？页面的选项卡部分

```
<ul class="wui-tab-nav">
    <li class="wui-first"><a class="wui-link" href="index.html">Home </a></li>
    <li class="wui-sub" id="vol"><a class="wui-link" href="#Vol" rel="tabs1">Business Volume </a></li>
    <li class="wui-sub"><a class="wui-link" href="#Vol2"  rel="tabs2">Infras Volume</a></li>
    <li class="wui-sub"><a class="wui-link" href="#Vol3"  rel="tabs3" >Database Volume</a></li>
    <li class="wui-sub"><a class="wui-link" href="#Vol4"  rel="tabs4">Customer Volume</a></li>
</ul> 
```

放置选项卡内容的 div 部分

```
<DIV id=chart class=wui-inpage-container style="float:left; display: block; overflow: hidden; padding:0; margin:0 auto; border:0;">
    <ul class="tab-content" id="tabs1"> 
            <li id="business_vol1"></li>
            <li id="business_vol2"></li>
            <li id="business_vol3"></li>
            <li id="business_vol4"></li>    
    </ul>

    <ul class="tab-content" id="tabs2"> 
            <li id="Infras1"></li>
            <li id="Infras2"></li>
            <li id="Infras3"></li>                    
    </ul>
</DIV> 
```

javascripts 只显示点击标签内容

```
<script type="text/javascript">
    $(document).ready(function () {

        $('.wui-link a').click(function () {
            switch_tabs($(this));
        });

        switch_tabs($('#vol'));

    });
</script>

<script type="text/javascript">
    function switch_tabs(obj) {
        $('.tab-content').hide();
        $('.tab-content a').removeClass("selected");
        var id = obj.attr("rel");

        $('#' + id).show();
        obj.addClass("selected");
    } 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:18:10.197

您可以创建函数来隐藏所有内容的 div (jquery .hide() )，然后单击 li 您将调用 jquery .show() 函数以显示带有ceratin ID的div。然后在单击另一个 li 时，您需要再次隐藏所有内容并仅显示一个 div。希望我帮助了你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:22:15.540

您正在 #vol 上运行第一次迭代，它不是. `<A>`，而是包含`div`. 这个 div，#vol 没有 rel="" 来完成功能。

否则，它看起来没问题。可能会加入一些 alert() 以确保您在某些断点处获得正确的数据。

改变：

```
switch_tabs($('#vol')); 
```

到：

```
switch_tabs($('.wui-link:first')); 
```

并测试

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:33:38.103

改变

```
$('.wui-link a').click() 
```

到

```
$('a.wui-link').click() 
```

# javascript - 停止在额外点击时重新加载子页面

> ID：15122543
> 
> 赞同：0
> 
> 时间：2013-02-27T21:14:28.433
> 
> 标签：javascript, jquery, parent-child

单击按钮时，将打开一个子窗口。然后，如果再次单击它，它将重新加载该页面。即使重新加载父页面，我也试图避免这种情况发生。只要子页面“测试”打开，我希望点击事件中的条件不对子窗口执行任何操作并发出警告。这可能吗？谢谢

```
$('#send').click(function(){

   if(*child page already open*){
    alert('already open');
 }else{
        window.open("test.html","Ratting","width=550,height=170,0,status=0,");
      }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T21:19:28.927

您需要测试子窗口是否*存在* **并且**仍然*打开*：

```
var childWindow;

$('#send').click(function(){
    if (childWindow && !childWindow.closed) {
        alert('already open');
    } else {
        childWindow = window.open("test.html","Ratting","width=550,height=170,0,status=0,");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:16:45.227

```
var childPage = null;
$('#send').click(function(){
  if(childPage && !childPage.closed){
    alert('already open');
  } else{
    childPage = window.open("test.html","Ratting","width=550,height=170,0,status=0,");
  }
}); 
```

# python - 循环父外键

> ID：15122547
> 
> 赞同：2
> 
> 时间：2013-02-27T21:14:55.840
> 
> 标签：python, django

我的 Django 项目中有一个模型，如下所示：

```
class Category(models.Model):
   parentCategory = models.ForeignKey(Category,null=True,blank=True)
   category = models.CharField(max_length=255)

   def __unicode__(self):
       return self.category 
```

我用它来设置类别 heirachy。一些类别的父类别有一个父类别，也有一个父类别等。我想知道如何在`__unicode__`方法中循环这个结构？

干杯，本

**更新：** 以下是我的类别表中的结构：

```
Parent
Parent -> Sub Parent
Parent -> Sub Parent -> Sub Sub Parent 
```

Aamir Adnan 的“get_name”函数正在返回：

```
Parent
Sub Parent -> Sub Sub Parent
Sub Sub Parent 
```

我需要它显示如下：

```
Parent
Parent -> Sub Parent
Parent -> Sub Parent -> Sub Sub Parent 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:18:37.530

怎么样..

```
 def __unicode__(self):
       str = self.category
       obj = self
       while obj.parentCateogry:
            str += " " + obj.parentCategory.category 
            obj = obj.parentCategory
       return str 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T04:55:42.813

您所描述的是树结构，不幸的是，遍历递归外键关系的所有父元素是一项非常昂贵的操作；每次查找父项都需要一次数据库命中，因为其他答案演示了执行方法。

我建议您改为使用允许高效树查询的表结构。有几种方法可以做到这一点，但为了给你指明正确的方向，我建议你研究[django-mptt](https://github.com/django-mptt/django-mptt)或[django-treebeard](https://github.com/tabo/django-treebeard)。

例如，使用 django-mptt，您可以使用以下通用结构实现此目的，这只会导致额外的数据库命中来查询目标类别的所有祖先。

```
from django.db import models
from mptt.models import MPTTModel, TreeForeignKey

class Category(MPTTModel):
    name = models.CharField(max_length=255)
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')

    def __unicode__(self):
        ancestors = self.get_ancestors(ascending=False, include_self=True)
        return ' -> '.join(category.name
                           for category in ancestors) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:20:30.467

你可以这样做：

```
class Category(models.Model):
    parentCategory = models.ForeignKey('self', null=True, blank=True,
        related_name="categories")
    category = models.CharField(max_length=255)

    def get_name(self, obj, name=''):
        name += ' - ' + obj.category
        categories = obj.categories.all()
        if categories:
            for category in categories:
                name = self.get_name(category, name)
            return name
        else:
            return name

    def __unicode__(self):
        return self.get_name(self).strip(' - ').strip() 
```

# algorithm - 有人可以解释在排序表中搜索的四元分区和二元分区的递归关系吗？

> ID：15122551
> 
> 赞同：1
> 
> 时间：2013-02-27T21:15:08.947
> 
> 标签：algorithm, recursion, recurrence

如果您有一个包含各种数字的正方形区域，每个递归关系的结果是什么？：

T(n) = 3T(n/2) + c 和 T(n) = 2T(n/2) + cn

我知道第一个应该导致四分区，第二个应该导致二进制分区，但是我不能直观地理解*为什么*会这样。为什么我们在第一种情况下进行 3 次递归调用，在第二种情况下进行 2 次递归调用？为什么 +c 或 +cn 会影响我们正在解决的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:03:40.633

我想这就是你要找的

[http://leetcode.com/2010/10/searching-2d-sorted-matrix-part-ii.html](http://leetcode.com/2010/10/searching-2d-sorted-matrix-part-ii.html)

如果您的问题只是关于递归解释，我建议阅读使用递归树和主方法解决递归

[http://courses.csail.mit.edu/6.006/spring11/rec/rec08.pdf](http://courses.csail.mit.edu/6.006/spring11/rec/rec08.pdf)

这解释了第二次递归和方法。基本上，您将拥有一个高度 (lgn) 的递归树，并且每个级别的成本等于 n。

在第一个中，递归树将具有树中节点数量顺序的运行时间。高度仍为 lgn，但每个级别的成本为 3^h * c。对此的总结会给你带来复杂性

# wordpress - wordpress 主页不是主要网址

> ID：15122555
> 
> 赞同：2
> 
> 时间：2013-02-27T21:15:25.693
> 
> 标签：wordpress, url

我们目前正在为 Wordpress 开发自己的主题。现在我们设置 index.php 并添加作为主页的第一页。（我们已经在子目录中安装了 WP）

我们设置 Wordpress，将主页设置为新添加的页面。但是现在这个新页面只能由 www.domain.com/wp/home 而不是 www.domain.com/wp 访问

我们如何设置 WP 以在主页上显示新添加的页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:29:40.897

默认情况下，WordPress 在首页显示您最近的帖子。为了改变这一点，您需要将 Wordpress 首页设置为静态页面。

1.  转到**管理菜单 > 设置 > 阅读**面板。
2.  将“首页显示：”设置为“静态页面”，然后选择您已经为“首页：”创建的页面。
3.  保存更改。

> 了解更多信息：
> 
> *   [创建静态首页](http://codex.wordpress.org/Creating_a_Static_Front_Page)
> *   [WordPress 设置阅读屏幕](http://codex.wordpress.org/Settings_Reading_SubPanel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:19:50.597

您必须在主题菜单中进行设置。您会在那里找到一个选项，您想在起始页、博客或页面上显示什么。在那里指定您的页面。

# java - Java - 异形框架：锯齿状边缘和小程序

> ID：15122557
> 
> 赞同：1
> 
> 时间：2013-02-27T21:15:26.167
> 
> 标签：java, applet, shape, minecraft, antialiasing

我正在编写一个重新设计的框架，其中包含一个 Java Applet。（在这种情况下，它是一个 Minecraft Java 小程序）

框架具有类似的属性`setUndecorated(true);`。

使用绝对坐标布置组件。( => `setLayout(null);`& `element.setBounds(posX, posY, sizeX, sizeY);`)

我`setShape`在 JFrame 上使用了 a 来获得一些圆角。可悲的是，框架的边缘是锯齿状的，这有点难看。

* * *

下面是一些代表图片：

[我的世界框架 http://nicnl.com/Autre/minecraftFrame.jpg](http://nicnl.com/Autre/minecraftFrame.jpg) [我的世界框架缩放 http://nicnl.com/Autre/minecraftFrame_zoom.jpg](http://nicnl.com/Autre/minecraftFrame_zoom.jpg)

* * *

我在网上搜索，找到了应该在`paint(Graphics g)`方法中实现的解决方案：

```
Graphics2D graphics2D = (Graphics2D)g;
RenderingHints renderingHints = new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
graphics2D.setRenderingHints(renderingHints); 
```

此 Java 代码应在我的框架上添加抗锯齿效果。遗憾的是，此渲染属性仅适用于绘制的组件。而且，显然，Minecraft Applet 不是使用 SWING 绘制的，因此“解决方案”根本不起作用。

所以这是我的问题：有没有办法让这个框架的角落更漂亮？

<[ 提前致谢 =) ]>

# ruby-on-rails - Ruby - 尝试访问数组中的数据时“无法将符号转换为整数”

> ID：15122559
> 
> 赞同：3
> 
> 时间：2013-02-27T21:15:34.857
> 
> 标签：ruby-on-rails, ruby, arrays, integer, symbols

这是一个数组示例：

```
{"C1"=>[
        {:upc=>"51857195821952", :product_id=>"1234", :name=>"name", :price=>" $15 ", :color=>"green", :size=>"L", :description=>"descr"},
        {:upc=>"352353wegs", :product_id=>"456", :name=>"name2", :price=>"$21", :color=>"black", :size=>"S", :description=>"descr"}, # ...
       ],
 #...
} 
```

在这里，当我试图从该数组中获取数据时：

```
@array.each do |p|
  product = Product.new
  product.sku = p[0]
  product.name = p[1][0][:name] #can't convert Symbol into Integer
  price = p[1].select{ |pr| !pr[:price].nil? and pr[:price] != "0" }.min_by{ |i| i[:price].to_f }[:price]
  product.price = "%.2f" % (price.to_f)
  ...
end 
```

每次我尝试从数组中获取数据时，我都会遇到`product.name =`错误**can't convert Symbol into Integer**。

在这种情况下有什么问题？我花了一个下午的时间在这个问题上，但不幸的是我仍然无法弄清楚......

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T21:26:15.270

你`@array`实际上是一个哈希。它的格式如下：

```
{ 
  'name1' => [{:upc => "..."},{:upc => "..."}],
  'name2' => [{:upc => "..."},{:upc => "..."}],
  #...
} 
```

由于它是一个哈希，您可以在`each`（也适用于`map`）方法中使用 2 个参数（一个用于键，另一个用于值）：

```
@array.each do |name, array|
  product = Product.new
  product.sku = name # returns "C1"
  array.each do |data|
    data[:upc]
    data[:name]
    #etc...
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:30:00.013

根本问题是您上面显示的*示例数组实际上***不是**一个数组。它是一个带有键值对的散列。因此，您的代码喜欢`p[0]`或`p[1][0]`没有意义，因为散列没有`index`喜欢的数组。哈希没有排序。哈希值是通过“键”而不是像数组那样的“索引”来访问的。

遍历散列的键值对是这样完成的。

```
1.9.3p194 :001 > x = {:x => 10, :y => 9, :z => 10}
 => {:x=>10, :y=>9, :z=>10} 
1.9.3p194 :002 > x.each do |key, value|
1.9.3p194 :003 >   puts "#{key} : #{value}"
1.9.3p194 :004?> end 
x : 10
y : 9
z : 10
 => {:x=>10, :y=>9, :z=>10} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:33:23.417

看起来你可能有点混淆了数组和哈希。

鉴于这种：

```
@array = {"C1"=>[
  {:upc=>"51857195821952", :product_id=>"1234", :name=>"name", :price=>" $15 ", :color=>"green", :size=>"L", :description=>"descr"}, 
  {:upc=>"352353wegs", :product_id=>"456", :name=>"name2", :price=>" $21 ", :color=>"black", :size=>"S", :description=>"descr"} 
] } 
```

然后`@array.class.name`是`Hash`

您可以通过像这样访问它来获取实际的数组：

```
@actual_array = @array["C1"] 
```

那么，`@actual_array.class.name`将`Array`

因此，采用这种方法并重写：

```
@array = {"C1"=>[
  {:upc=>"51857195821952", :product_id=>"1234", :name=>"name", :price=>" $15 ", :color=>"green", :size=>"L", :description=>"descr"}, 
  {:upc=>"352353wegs", :product_id=>"456", :name=>"name2", :price=>" $21 ", :color=>"black", :size=>"S", :description=>"descr"} 
 ] }

@actual_array = @array["C1"]

@actual_array.each do |p|
  puts p[:name]
end 
```

如果你这样做，你会发现`:name`元素的值会被整齐地打印出来。

# c#-4.0 - “多重”继承的替代方式

> ID：15122560
> 
> 赞同：-1
> 
> 时间：2013-02-27T21:15:36.147
> 
> 标签：c#-4.0

我有一个场景如下：

```
 public class A : class B
    {
         public SomeMethodA()
         {
              //.... do some logics here
              SomeMethodB();
         }

         private SomeMethodB()
         {
              //.... do some logics here
         }

    }

class B : class C 
```

* * *

```
class X : class Y
{
     public SomeMethodA()
     {
          //.... do some logics here
          SomeMethodB();
     }

     private SomeMethodB()
     {
          //.... do some logics here
     }
}

class Y : class Z 
```

A 类具有与 X 类完全相同的方法。现在的问题是：我如何在集中式中组合这种方法，以便我的代码在不修改/触及 Y、Z 类和 B、C 类的情况下具有 DRY（不要重复自己）？B、C、Y 和 Z 类是我们的遗留代码，我们不会尝试更改/修改这些类。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:40:58.697

由于您进行了编辑并使其更加清晰。我相信这会奏效。只需创建一个 X 和 A 将继承的公共类。

```
public abstract class Common
{
     public SomeMethodA()
     {
          //.... do some logics here
          SomeMethodB();
     }

     private SomeMethodB()
     {
          //.... do some logics here
     }
}

public class A : Common { /* some other methods */ }
public class B : A { /* some other methods */ } //B inherits A
public class C : B { /* some other methods */ } //C inherits B

public class X : Common { /* some other methods */ }
public class Y : X { /* some other methods */ } //Y inherits Z
public class Z : Y { /* some other methods */ } //Z inherits Y 
```

**第二次编辑：**

```
public class Common
{
     public void SomeMethodA()
     {
          //.... do some logics here
          SomeMethodB();
     }

     private void SomeMethodB()
     {
          //.... do some logics here
     }
} 
```

然后在 A 类和 X 类中，执行以下操作：

```
public void SomeMethod() {
    Common c = new Common();
    c.SomeMethodA();
} 
```

# freeswitch - 如何让 FreeSWITCH 从 Originate 为我锻炼索非亚个人资料

> ID：15122562
> 
> 赞同：0
> 
> 时间：2013-02-27T21:15:41.220
> 
> 标签：freeswitch

我有一些通过套接字使用 FreeSWITCH api 的代码。我正在发起呼叫。

当我使用我的 SIP 电话进行测试时，我可以简单地输入一个数字，然后 mod_dialplan_xml 在 FreeSWITCH 上启动以计算出必要的 sofia 配置文件。

当我想在代码中发起调用时，在我看来，我需要知道要使用哪个 sofia 配置文件。

例如

用于外部呼叫

起源于“sofia/gateway/provider/012345678”

内部呼叫

源自“sofia/internal/1000%”

我想做的是让我的代码询问 FreeSWITCH 正确的 sofia 配置文件是什么，或者提供一个配置文件来指示 FreeSWITCH 为我弄清楚。

我查看了文档和论坛并搜索了谷歌，但我找不到答案，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T00:52:11.907

您可以尝试运行“sofia status gateway”等并解析出哪些网关可用

# css - CSS沿DIV动画对象

> ID：15122563
> 
> 赞同：0
> 
> 时间：2013-02-27T21:15:41.230
> 
> 标签：css, animation

提前感谢您提供的任何帮助。这是我的目标。

**当前设置**：我在 DIV 中有一个图像，它基本上是一条垂直的直线。该网站主要使用 PHP 完成。

**目标**：我想根据我在某处传递的百分比值沿这条垂直线的长度为水平线或其他小图像设置动画。

![示例图像](../Images/ccb8631464ff7aead36abc01c49f4d64.png)

**可能的选项**： - DIV 顶部的透明 DIV，图像根据高度的百分比上下移动。

*   相邻 DIV 中的图像（线或图标）根据百分比完成相同的移动

*   如果无法通过百分比执行此操作，我可能会在穿过这条路径的特定点时发送信息，并使用它来更新水平线。

**关注**点： - 如果我可以在 DIV 中实现这种类型的动画，我应该在哪里动态传递百分比信息以使 DIV 移动？

*   我假设需要一些涉及 jQuery/Ajax 的解决方案来更新百分比值，所以我可能不得不在另一个问题中提出这个问题，除非有人可以概述一个简单的方法。

*   与高度为容器的百分比或以 px 静态设置的 DIV 一起使用的解决方案将是理想的。

再次感谢你的帮助。

*   d -

# apache - awstats 不解析 logformat 操作系统、移动浏览器、机器人、keyworks

> ID：15122564
> 
> 赞同：1
> 
> 时间：2013-02-27T21:15:43.483
> 
> 标签：apache, awstats

我让我的 Apache 以**组合**模式配置了 logfomat：

```
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %b" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent 
```

此示例来自结果日志：

```
192.168.201.156 - - [02/Feb/2013:00:00:10 -0430] "GET /conseme/styles/datePicker.css HTTP/1.1" 304 0 "http://myserver.com.com:49004/conseme/iniciar.do?APP_CODE=ICA&pms=9eew1896ugjew8SxfYG2s8XxdYML4qZAVEX4lbkZUGo&aux=SM010213235332219&incrustado=1&usession=6172996210449710866&mainappcode=PORTPROV" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
192.168.201.156 - - [02/Feb/2013:00:00:11 -0430] "GET /conseme/styles/calendario.css HTTP/1.1" 304 0 "http://myserver.com.com:49004/conseme/iniciar.do?APP_CODE=ICA&pms=9eew1896ugjew8SxfYG2s8XxdYML4qZAVEX4lbkZUGo&aux=SM010213235332219&incrustado=1&usession=6172996210449710866&mainappcode=PORTPROV" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
192.168.201.156 - - [02/Feb/2013:00:00:11 -0430] "GET /conseme/styles/windows_modal.css HTTP/1.1" 304 0 "http://myserver.com.com:49004/conseme/iniciar.do?APP_CODE=ICA&pms=9eew1896ugjew8SxfYG2s8XxdYML4qZAVEX4lbkZUGo&aux=SM010213235332219&incrustado=1&usession=6172996210449710866&mainappcode=PORTPROV" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
192.168.201.156 - - [02/Feb/2013:00:00:11 -0430] "GET /conseme/styles/confirm.css HTTP/1.1" 304 0 "http://myserver.com.com:49004/conseme/iniciar.do?APP_CODE=ICA&pms=9eew1896ugjew8SxfYG2s8XxdYML4qZAVEX4lbkZUGo&aux=SM010213235332219&incrustado=1&usession=6172996210449710866&mainappcode=PORTPROV" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
192.168.201.156 - - [02/Feb/2013:00:00:11 -0430] "GET /conseme/js/jquery/jquery.js HTTP/1.1" 304 0 "http://myserver.com.com:49004/conseme/iniciar.do?APP_CODE=ICA&pms=9eew1896ugjew8SxfYG2s8XxdYML4qZAVEX4lbkZUGo&aux=SM010213235332219&incrustado=1&usession=6172996210449710866&mainappcode=PORTPROV" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
192.168.201.156 - - [02/Feb/2013:00:00:11 -0430] "GET /conseme/js/jquery/jquery.min.js HTTP/1.1" 304 0 "http://myserver.com.com:49004/conseme/iniciar.do?APP_CODE=ICA&pms=9eew1896ugjew8SxfYG2s8XxdYML4qZAVEX4lbkZUGo&aux=SM010213235332219&incrustado=1&usession=6172996210449710866&mainappcode=PORTPROV" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
192.168.201.156 - - [02/Feb/2013:00:00:12 -0430] "GET /conseme/js/calendario/date.js HTTP/1.1" 304 0 "http://myserver.com.com:49004/conseme/iniciar.do?APP_CODE=ICA&pms=9eew1896ugjew8SxfYG2s8XxdYML4qZAVEX4lbkZUGo&aux=SM010213235332219&incrustado=1&usession=6172996210449710866&mainappcode=PORTPROV" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
192.168.201.156 - - [02/Feb/2013:00:00:12 -0430] "GET /conseme/js/calendario/jquery.datepicker.js HTTP/1.1" 304 0 "http://myserver.com.com:49004/conseme/iniciar.do?APP_CODE=ICA&pms=9eew1896ugjew8SxfYG2s8XxdYML4qZAVEX4lbkZUGo&aux=SM010213235332219&incrustado=1&usession=6172996210449710866&mainappcode=PORTPROV" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
192.168.201.156 - - [02/Feb/2013:00:00:12 -0430] "GET /conseme/js/jquery.maskedinput.js HTTP/1.1" 304 0 "http://myserver.com.com:49004/conseme/iniciar.do?APP_CODE=ICA&pms=9eew1896ugjew8SxfYG2s8XxdYML4qZAVEX4lbkZUGo&aux=SM010213235332219&incrustado=1&usession=6172996210449710866&mainappcode=PORTPROV" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
192.168.201.156 - - [02/Feb/2013:00:00:13 -0430] "GET /conseme/js/Validador.js HTTP/1.1" 304 0 "http://myserver.com.com:49004/conseme/iniciar.do?APP_CODE=ICA&pms=9eew1896ugjew8SxfYG2s8XxdYML4qZAVEX4lbkZUGo&aux=SM010213235332219&incrustado=1&usession=6172996210449710866&mainappcode=PORTPROV" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
192.168.202.244 - - [02/Feb/2013:00:00:13 -0430] "GET /portalasegurado/3/BOTPAGO/50/50.10/opcion.do HTTP/1.1" 200 1837 "http://myserver.com.com:49004/portalasegurado/menu.do" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; GTB6; BTRS129265; .NET CLR 2.0.50727; .NET CLR 1.1.4322; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; AskTbBCPA/5.14.1.20007; 89770703; compat/4.1.08010)"
192.168.202.244 - - [02/Feb/2013:00:00:13 -0430] "GET /portalasegurado/styles/style.css HTTP/1.1" 200 1228 "http://myserver.com.com:49004/portalasegurado/3/BOTPAGO/50/50.10/opcion.do" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; GTB6; BTRS129265; .NET CLR 2.0.50727; .NET CLR 1.1.4322; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; AskTbBCPA/5.14.1.20007; 89770703; compat/4.1.08010)"
192.168.201.156 - - [02/Feb/2013:00:00:13 -0430] "GET /conseme/js/validation.js HTTP/1.1" 304 0 "http://myserver.com.com:49004/conseme/iniciar.do?APP_CODE=ICA&pms=9eew1896ugjew8SxfYG2s8XxdYML4qZAVEX4lbkZUGo&aux=SM010213235332219&incrustado=1&usession=6172996210449710866&mainappcode=PORTPROV" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
192.168.202.244 - - [02/Feb/2013:00:00:13 -0430] "GET /portalasegurado/js/jquery/jquery.min.js HTTP/1.1" 200 26048 "http://myserver.com.com:49004/portalasegurado/3/BOTPAGO/50/50.10/opcion.do" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; GTB6; BTRS129265; .NET CLR 2.0.50727; .NET CLR 1.1.4322; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; AskTbBCPA/5.14.1.20007; 89770703; compat/4.1.08010)"
192.168.201.156 - - [02/Feb/2013:00:00:13 -0430] "GET /conseme/js/interfaz.js HTTP/1.1" 304 0 "http://myserver.com.com:49004/conseme/iniciar.do?APP_CODE=ICA&pms=9eew1896ugjew8SxfYG2s8XxdYML4qZAVEX4lbkZUGo&aux=SM010213235332219&incrustado=1&usession=6172996210449710866&mainappcode=PORTPROV" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)" 
```

awstats 的日志格式与配置文件示例相同：

```
LogFormat = "%host %other %logname %time1 %methodurl %code %bytesd %refererquot %uaquot" 
```

这与 apache 输出完美匹配，并且**ACCURACY SETUP SECTION** *（机器人、浏览器、操作系统、引用者、文件类型）检测*的每个属性的值为 2。我尝试使用 LevelForBrowsersDetection=allphones 进行测试，但对移动浏览器检测不起作用

我运行 awstats.pl 来构建数据库：

```
perl C:\mysoft\awstats-7.1\wwwroot\cgi-bin\awstats.pl -config=www.myserver.com -lang=en -staticlinks -update -month=2 -year=2013 ^
LogFile="C:\mysoft\awstats-7.1\tools\logresolvemerge.pl -showsteps C:\temp\awstats\log\2013\02\* |" 
```

接下来运行 builstatic_pages 以生成 html 完整报告

```
perl C:\mysoft\awstats-7.1\tools\awstats_buildstaticpages.pl -awstatsprog=C:\mysoft\awstats-7.1\wwwroot\cgi-bin\awstats.pl ^
-config=www.myserver.com -lang=en -staticlinks -output -month=2 -year=2013 -dir=.\stats\2013\02  1>awstats_buildstaticpages_last_execution.log 
```

所有这些运行正常，但在主 HTML 页面中的部分：

*   **操作系统**：只显示**未知**
*   **浏览器**：没有检测到手机/手机和版本，显示未知对 IE、Safari、Chrome、FF 和 Opera 的所有差异。
*   **来自 Internet 搜索引擎的链接**：为空。查看日志，有来自 Google 和其他人的参考资料。
*   **搜索关键词**：空
*   **搜索关键字**：空

我的系统环境是： - Windows 7 64b 并在 Windows Server 2003 32b 上测试 - ActivePerl-5.16.2.1602-MSWin32-x86-296513 - Awstats-7.1

我尝试在互联网上查找相关问题，但未成功。
请让我知道任何想法，这对我的移动浏览器和操作系统系列/类型很重要。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T23:07:19.307

如果您使用高于 5.12.4 的 perl 版本和低于或等于 7.1 的 awstats，您目前将丢失操作系统和搜索引擎检测的统计信息。

然后2个解决方案：

*   降级perl
*   将 awstats 升级到 >=7.1.1

看 ：

*   错误报告[http://sourceforge.net/p/awstats/discussion/43430/thread/455f24ce/](http://sourceforge.net/p/awstats/discussion/43430/thread/455f24ce/)
*   Awstats 更改日志：[http ://awstats.sourceforge.net/docs/awstats_changelog.txt](http://awstats.sourceforge.net/docs/awstats_changelog.txt)

# .net-4.0 - 找不到/打开 Bing 地图模块果园

> ID：15122567
> 
> 赞同：1
> 
> 时间：2013-02-27T21:16:04.750
> 
> 标签：.net-4.0, orchardcms, orchardcms-1.6

将“Bing Maps”模块安装到 Orchard 1.6（源版本）时，该模块不会显示在解决方案资源管理器的模块下。

其他模块只是在模块下的根目录中找到，但由于某种原因，这个模块不是。

它位于以下位置：`C:\Orchard\src\Orchard.Web\Modules\Bing.Maps`

为什么它位于此处而不显示在解决方案资源管理器中（Orchard.web 未在解决方案资源管理器中显示模块）？

对于安装，我只是去了管理仪表板-> 库并安装。

*我需要编辑此模块，因为我的区域设置存在问题，但我不喜欢编辑无法在解决方案资源管理器中打开的文件（通过文件/打开文件打开时，许多行标记为红色）。*

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T22:37:20.550

模块总是物理地位于路径下的文件系统上，例如`C:\Orchard\src\Orchard.Web\Modules\SomeModule`当你安装一个模块时，文件被复制到这个文件夹中。

您引用的根`Modules`文件夹是 Visual Studio 中用于在解决方案资源管理器中组织项目的解决方案文件夹。项目可以移动到这些虚拟文件夹，而不会影响它们在文件系统上的位置。要将新模块添加到 Visual Studio 解决方案资源管理器中的此文件夹，请右键单击`Modules`解决方案文件夹并选择添加 => 现有项目，然后为新模块选择项目文件。

# iphone - 如何在 iOS / Objective C 中将图像发布到 reddit？

> ID：15122585
> 
> 赞同：2
> 
> 时间：2013-02-27T21:17:24.997
> 
> 标签：iphone, objective-c, http, http-headers

我正在尝试将图像发布到 reddit；但是，我只知道我在做什么。我正在为我的 iphone 应用程序使用目标 c。

在下面列出的代码之前，我通过在上传之前登录并使用 NSLog 来确定我确实收到了它们，从而获得了 modhash 和 cookie。然后我使用 JSON Parser 将它们分成单独的变量。

我不确定所有 POST 参数值应该是什么，所以我猜到了。必要的参数是 uh、file、formid、header、ing_type、name 和赞助商。

reddit api 的文档是[http://www.reddit.com/dev/api](http://www.reddit.com/dev/api) 我相信我想使用 POST /api/upload_sr_img 方法...

```
NSURL *url = [NSURL URLWithString:@"http://www.reddit.com/api/upload_sr_img"];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
[request setHTTPMethod:@"POST"];

NSString *httpBody = [NSString stringWithFormat:@"?uh=%@&file=%@&formid=''header=%@&img_type=%@&name=%@&sponsor=%@",modhash,UIImagePNGRepresentation(self.memeImage.image),@"test",@"png",@"Drew",@"Drew'sApp"];

[request setHTTPBody:[httpBody dataUsingEncoding:NSASCIIStringEncoding]];

NSURLResponse *response = NULL;
NSError *imgError = NULL;
NSData *result = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&imgError];

NSDictionary *json = [NSJSONSerialization JSONObjectWithData:result options:NSJSONReadingMutableContainers error:nil];
NSDictionary *responseJson = [json valueForKey:@"json"];

NSLog(@"response is: %@",response);
NSLog(@"imgError is: %@",imgError);
NSLog(@"result is: %@",result);
NSLog(@"json is: %@",json);
NSLog(@"responseJson is: %@",responseJson); 
```

可以使用我能得到的任何帮助。

另外，我不确定是否需要发送内容类型，甚至是什么类型。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:29:19.190

检查这个库：[https ://github.com/MattFoley/MFRedditPostController](https://github.com/MattFoley/MFRedditPostController)

*   您可以使用提供的 UI 或创建自己的 UI。

# maps - 有人知道如何“修复” Foursquare 商业列表上的地图以显示正确的位置吗？

> ID：15122591
> 
> 赞同：0
> 
> 时间：2013-02-27T21:17:59.903
> 
> 标签：maps, foursquare

我无法确定数据的确切来源... Google 地图正确显示了我们的位置，但 Foursquare 使用的地图系统会产生错误的结果... BAAAAD 业务，没有直观的方法来纠正问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:58:51.760

我对 Foursquare 做的不多，但我在其他地图服务上也遇到过同样的问题，我知道解决它可能会很痛苦。Foursquare 可能只使用 Twitter 来提供支持，但他们很快就会回复您。对于踢球，我在这样的推文中总结了您遇到的问题：

> 如果您的公司地址正确，但在地图上显示错误，我该如何更正？

几分钟后，他们回复：

> 不用担心。将您的 Foursquare 列表的 URL 发送给我们，我们会处理它。谢谢您的合作！

听起来您只需要将地址发推给他们，让他们知道这是错误的，他们会为您更新。

# perl - 保存树状结构

> ID：15122593
> 
> 赞同：1
> 
> 时间：2013-02-27T21:18:00.113
> 
> 标签：perl, persistence

我有以下树状结构，其中每个级别都由单独的类表示：

```
Book ------ Page ------ Line
     1    n      1    n 
```

每个类都有一个属性来保存它的所有成员（例如/g/ `Book::pages`，作为祝福引用的数组），一些特定于级别的属性（例如`Book::author`）以及一些添加/删除其成员的方法。

现在我想将所有数据保存/加载到单个文件中。它不会是一个关系数据库（很可能会使用 YAML），所以基本上我需要在某个时候得到类似的东西：

```
my $book = {
    author  => "Fred Flinstone",
    name    => "My Favorite Stones",
    pages   => [
        {
            number  => 1,
            footer  => "Dedicated to Wilma",
            lines   => [ ],
        },
        {
            number  => 2,
            lines   => [
                { text => "Preface", style => "h1" },
                { text => "This book is about my favorite stones:" },
                { text => "Marble" },
                # ...
            ]
        },
        # ...
    ]
}; 
```

Book 中是否应该有一对智能方法知道所有成员类？或者每个类是否应该实现它的一部分，以便例如`Line::save`返回类似的东西`{ text => "Marble" }`？

实现这一点的*正确*方法是什么？我想要尽可能不受实际数据限制的解决方案。如果我决定明天添加`Page::bookmarks`并想保存`Bookmark`s 怎么办？

哦，我正在使用 Moose，尽管这应该没什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:05:36.920

如果您使用 Moose，我建议您查看[MooseX::Storage](https://metacpan.org/module/MooseX%3a%3aStorage)来处理此问题。您将在包中使用此模块，然后添加`with Storage('format' => 'YAML', 'io' => 'File');`.

这个快速示例可以帮助您入门：

```
package Book;
use Moose;
use MooseX::Storage;

with Storage('format' => 'YAML', 'io' => 'File');

...

1;

my $book = Book->new();

...

# to store object
$book->store('book.yml');

# to get object back
my $book2 = Book->load('book.yml'); 
```

# android - 来自 db 的 AchartEngine 负载值永远存在

> ID：15122594
> 
> 赞同：0
> 
> 时间：2013-02-27T21:18:07.227
> 
> 标签：android, sqlite, achartengine

Goodevening，
我正在开发一个 android 应用程序，我正在使用 achartengine 来绘制我在查询到 sqlite 数据库后检索到的值。如果值是从 0 到 1000，那么我会得到一个加载图标，并且在 10 秒后，最多，我会得到我需要的图表。如果值超过 1000 并且如果我有多线图，那么我会得到一个永远不会离开的加载图标。我使用的代码如下所示。我做错什么了吗？我使用来自 achartengine 的示例代码来制作我自己的代码。

代码：

```
 public void createGraph(Context ctx){
    // x data
    dateList = DateDataReturn(ctx , table, accessPointList_Filtered);
    Log.d(TAG,"dateList len:" + String.valueOf(dateList.size()));
    // y data
    dataList = yDataReturn(ctx, column, table, accessPointList_Filtered);
    Log.d(TAG, "dataList len:" + String.valueOf(dataList.size()));
    // y axis title
    yaxis = yAxisReturn(column);
    // lines titles
    titles = titleReturn(ctx, column, accessPointList_Filtered);
    Log.d(TAG,"titles length:" + String.valueOf(titles.length));
    // line colors
    colors = retColor(ctx, table, accessPointList_Filtered);
    Log.d(TAG,"colors length:" + String.valueOf(colors.length));
    // line point styles
    styles = retPointStyle(ctx, table, accessPointList_Filtered);
    Log.d(TAG,"style length:" + String.valueOf(styles.length));
    // x axis min value
    xmin = dateList.get(0)[0].getTime();
    Log.d(TAG, "1");
    // x axis max value
    xmax = dateList.get(0)[dateList.get(0).length - 1].getTime();
    Log.d(TAG, "2");
    // Create the renderer
    renderer = buildRenderer(colors, styles);
    // Create the dataset
    dataset = buildDateDataset(titles, dateList, dataList);
    Log.d(TAG, "3");
    for (int i = 0; i < renderer.getSeriesRendererCount(); i++) {
        ((XYSeriesRenderer) renderer.getSeriesRendererAt(i)).setFillPoints(true);
    }

    setChartSettings(renderer, // POINTS
            "Interface Monitoring", // PLOT LABEL
            "Time", // X LABEL
            yAxisTitleReturn(column), // Y LABEL
            xmin, 
            xmax, 
            yaxis[0], // Y AXIS START VALUE
            yaxis[1], // Y AXIS FINISH VALUE
            Color.LTGRAY, // AXIS COLOR
            Color.LTGRAY); // LABELS COLOR

    renderer.setXLabels(10);
    renderer.setYLabels(10);
    renderer.setBackgroundColor(Color.BLACK);
    renderer.setApplyBackgroundColor(true);
    renderer.setXLabelsAlign(Align.CENTER);
    renderer.setYLabelsAlign(Align.RIGHT);
    renderer.setShowGrid(true);
    renderer.setZoomEnabled(true, true);
    renderer.setPanEnabled(true, true);
}

/**
 * 
 * @param context
 * @return GraphicalView, returns the view
 */
public GraphicalView getView(Context context) {
    return (GraphicalView)ChartFactory.getTimeChartView(context, dataset, renderer, "h:mm:ss a");   
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:33:43.463

当您希望将大量值添加到图表中时，您必须降低详细程度。这是因为大部分时间都花在了渲染上，所以这是你可以改进的地方：

*   禁用抗锯齿`renderer.setAntialiasing(false);`
*   不要使用`PointStyle`s

其他建议：

*   Add only data that is to be displayed into the model. How does a chart with so many points look like?

Also, the 1.1.0 version has a set of performance improvements included. You can download this version [here](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/).

# c++ - MongoDB C++ 驱动程序断言失败

> ID：15122595
> 
> 赞同：1
> 
> 时间：2013-02-27T21:18:08.660
> 
> 标签：c++, mongodb, exception, insert, assertion

### 问题

当我尝试使用 C++ 驱动程序将文档插入 MongoDB 时，我收到以下异常消息：

```
Wed Feb 27 15:21:38   Assertion failure p src/mongo/client/dbclientinterface.h 1096
0 assertion src/mongo/client/dbclientinterface.h:1096 
```

据我所知，它似乎与端口号有关？dbclientinterface.h:1096 包含以下行：

```
MessagingPort& port() { verify(p); return *p; } 
```

### 设置连接 (main.cpp)

```
mongo::DBClientConnection DBConn( "localhost" );
mongo::DBClientConnection DBConn( "localhost:27017" ); // I've also tried this... 
```

### 插入一个文档 (differ_file.h)

```
while( m_Entries.size() ){
    JsonBox::Value Data( m_Entries.front() );

    try {
        std::stringstream   JSONDoc;
        mongo::BSONObj      BSONDoc;

        Data["doc"].writeToStream( JSONDoc, false );
        BSONDoc = mongo::fromjson( JSONDoc.str() );

        // std::cout << Data["ns"].getString() << std::endl;
        // std::cout << BSONDoc.toString() << std::endl;

        // This is where the exception is thrown...
        m_DBConn.insert( Data["ns"].getString(), BSONDoc );

    } catch( const mongo::DBException& e ){
        std::cout << e.toString() << std::endl;

    }

    m_EntriesMutex.lock();
    m_Entries.pop();
    m_EntriesMutex.unlock();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:37:02.877

我在文档中简单地翻了一下，偶然发现了一个令人吃惊的事实，即您无法从构造函数连接到 mongodb 数据库。我不得不改变这个：

```
mongo::DBClientConnection DBConn( "localhost" ); 
```

对此：

```
mongo::DBClientConnection DBConn;

DBConn.connect( "localhost" ); 
```

# java - IndexOutOfBoundsException with DatagramChannel.receive(buf);

> ID：15122603
> 
> 赞同：0
> 
> 时间：2013-02-27T21:18:27.507
> 
> 标签：java, android, datagram

在网络编程方面，我完全是个菜鸟。

我收到以下错误：

```
E/AndroidRuntime( 4095): Caused by: java.lang.IndexOutOfBoundsException: length=18, offset=0, buffer size=0 
```

在以下行：

```
SocketAddress servaddr = udpChannel.receive(rcvHskBuf); 
```

这就是我创建缓冲区的方式

```
ByteBuffer rcvHskBuf = ByteBuffer.allocateDirect(packetSize); 
```

为了调试，我将参数（可以在应用程序中更改）从默认`1432`更改`1432*20`为如下所述。

我该如何调试呢？我尝试将`allocateDirect()`参数更改为比以前大 20 倍，但我仍然遇到这个问题。

这是完整的错误日志：

```
02-27 22:28:01.739: E/AndroidRuntime(2753): FATAL EXCEPTION: AsyncTask #1
02-27 22:28:01.739: E/AndroidRuntime(2753): java.lang.RuntimeException: An error occured while executing doInBackground()
02-27 22:28:01.739: E/AndroidRuntime(2753):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at java.lang.Thread.run(Thread.java:856)
02-27 22:28:01.739: E/AndroidRuntime(2753): Caused by: java.lang.IndexOutOfBoundsException: length=18, offset=0, buffer size=0
02-27 22:28:01.739: E/AndroidRuntime(2753):     at java.net.DatagramPacket.setLengthOnly(DatagramPacket.java:234)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at java.net.DatagramPacket.setLength(DatagramPacket.java:222)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at libcore.io.IoBridge.postRecvfrom(IoBridge.java:528)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at libcore.io.IoBridge.recvfrom(IoBridge.java:516)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at java.nio.DatagramChannelImpl.receiveDirectImpl(DatagramChannelImpl.java:232)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at java.nio.DatagramChannelImpl.receive(DatagramChannelImpl.java:185)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at com.alu.wireless.puredata.PSConnection.UDPInitialization(PSConnection.java:315)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at com.alu.wireless.puredata.PSConnection.PSInitialization(PSConnection.java:73)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at com.alu.wireless.puredata.PureDataActivity$MyTask.doInBackground(PureDataActivity.java:262)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at com.alu.wireless.puredata.PureDataActivity$MyTask.doInBackground(PureDataActivity.java:1)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
02-27 22:28:01.739: E/AndroidRuntime(2753):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-27 22:28:01.739: E/AndroidRuntime(2753):     ... 4 more 
```

奇怪的是，应用程序可以很好地打印缓冲区的内容。显然，打印缓冲区内容的代码位于导致异常的行**之后**（第 315 行，写在上面，我创建缓冲区的位置）。

任何提示或指针将不胜感激。提前致谢。

# android - 模拟器上的语音到文本

> ID：15122605
> 
> 赞同：-3
> 
> 时间：2013-02-27T21:18:31.923
> 
> 标签：android, emulation, voice

我正在开发一个将语音转换为文本的应用程序，但是，根据我在论坛上研究的内容，模拟器似乎没有麦克风功能。

我有安卓手机，可以在手机上运行。

但是有什么方法可以从电话中获取语音，并在模拟器上运行应用程序，因为我想在比我的手机更高的 api 上开发我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:37:53.427

This may be a little involved but you could try writing a socket server that would run on the emulator while creating a socket client that runs on the physical phone. The phone would capture the audio and send it via socket stream to the server which would make it available to your app via an interface. The hidden benefit here would be that your app would bind to an interface rather than a concrete class which would make altering the source of the incoming audio more flexible. The socket server may sound like a lot but it's not too difficult, I've written such a socket server for desktop to device communication and it feels difficult until you realize how to properly read/close your streams.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:03:49.127

这不是一个完美的答案，但是有一个很棒的社区可以将 ROM 刷到你的手机上，并将更新版本的 android 放到手机上。最常见的一种是[CyanogenMod](http://www.cyanogenmod.org)，我建议您查看是否有适用于您的特定手机型号的 ROM。

# java - JTextPane 的 setContentType("text/html") 无法按预期工作

> ID：15122611
> 
> 赞同：8
> 
> 时间：2013-02-27T21:18:48.757
> 
> 标签：java, html, swing, jtextpane

当您 setContentType("text/html") 时，它仅适用于通过 JTextPane.setText() 设置的文本。通过样式放入 JTextPane 的所有其他文本对内容类型“免疫”。

这就是我的意思：

```
private final String[] messages = {"first msg", "second msg <img src=\"file:src/test/2.png\"/> yeah", "<img src=\"file:src/test/2.png\"/> third msg"};

public TestGUI() throws BadLocationException {
    JTextPane textPane = new JTextPane();
    textPane.setEditable(false);
    textPane.setContentType("text/html");

    //Read all the messages
    StringBuilder text = new StringBuilder();
    for (String msg : messages) {
        textext.append(msg).append("<br/>");
    }
    textPane.setText(text.toString());

    //Add new message
    StyledDocument styleDoc = textPane.getStyledDocument();
    styleDoc.insertString(styleDoc.getLength(), messages[1], null);

    JScrollPane scrollPane = new JScrollPane(textPane, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);

    //add scrollPane to the main window and launch
    //...
} 
```

一般来说，我有一个由 JTextPane 表示的聊天。我从服务器接收消息，处理它们 - 为特定情况设置文本颜色，将微笑标记更改为图像路径等。一切都是在 HTML 范围内完成的。但是从上面的例子可以清楚地看出，只有 setText 是 setContentType("text/html") 的主题，而第二部分，其中添加的新消息由 "text/plain" 表示（如果我没记错的话）。

是否可以将“text/html”内容类型应用于插入到 JTextPane 的所有数据？没有它，几乎不可能在不实现非常复杂的算法的情况下处理消息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T22:32:23.730

我认为您不应该使用 insertString() 方法来添加文本。我认为你应该使用类似的东西：

```
JTextPane textPane = new JTextPane();
textPane.setContentType( "text/html" );
textPane.setEditable(false);
HTMLDocument doc = (HTMLDocument)textPane.getDocument();
HTMLEditorKit editorKit = (HTMLEditorKit)textPane.getEditorKit();
String text = "<a href=\"abc\">hyperlink</a>";
editorKit.insertHTML(doc, doc.getLength(), text, 0, 0, null); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T21:25:51.490

重新编辑

抱歉，我误解了问题：将字符串插入为 HTML。为此，需要借助 HTMLEditorKit 功能：

```
 StyledDocument styleDoc = textPane.getStyledDocument();
            HTMLDocument doc = (HTMLDocument)styleDoc;
            Element last = doc.getParagraphElement(doc.getLength());
            try {
                doc.insertBeforeEnd(last, messages[1] + "<br>");
            } catch (BadLocationException ex) {
            } catch (IOException ex) {
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-02T00:37:14.403

这是一种更简单的方法。

```
JTextPane pane = new JTextPane();
pane.setContentType("text/html");

pane.setText("<html><h1>My First Heading</h1><p>My first paragraph.</p></body></html>"); 
```

# java - Java 编译时错误：编译器无法识别方法覆盖

> ID：15122613
> 
> 赞同：0
> 
> 时间：2013-02-27T21:19:07.750
> 
> 标签：java

我正在修改一个相当基本的 Java 日志链表实现以使用泛型。我的项目有 3 个 .java 文件：

*   GenericLogInterface.java -> 定义日志的接口
*   LLGenericNode.java -> 定义 LL 节点的类
*   LinkedGenericLog.java -> 定义 LL 的接口扩展

不幸的是，我收到了来自 LinkedGenericLog.java 的编译时错误：

> ch02/genericStringLogs/LinkedGenericLog.java:10：ch02.genericStringLogs.LinkedGenericLog 不是抽象的，不会覆盖 ch02.genericStringLogs.GenericLogInterface 中的抽象方法 contains(java.lang.Object)

通过在 LinkedGenericLog.java 中覆盖 GenericLogInterface.java 中的 contains() 方法，这似乎很容易解决。

然而，有一个巨大的障碍：我已经覆盖了它。

以下是三个 .java 文件的来源：

**GenericLogInterface.java**

```
package ch02.genericStringLogs;

public interface GenericLogInterface<T>
{
  void insert(T element);
  // Precondition:   This GenericLog is not full.
  //
  // Places element into this GenericLog.

  boolean isFull();
  // Returns true if this GenericLog is full, otherwise returns false.

  int size();
  // Returns the number of Strings in this GenericLog.

  boolean contains(T element);
  // Returns true if element is in this GenericLog,
  // otherwise returns false.
  // Ignores case differences when doing string comparison.

  void clear();
  // Makes this GenericLog empty.

  String getName();
  // Returns the name of this GenericLog.

  String toString();
  // Returns a nicely formatted string representing this GenericLog.
} 
```

**LLGenericNode.java**

```
package ch02.genericStringLogs;

public class LLGenericNode<T>
{
  private T info;
  private LLGenericNode link;

  public LLGenericNode(T info)
  {
    this.info = info;
    link = null;
  }

  public void setInfo(T info)
  // Sets info of this LLGenericNode.
  {
    this.info = info;
  }

  public T getInfo()
  // Returns info of this LLGenericNode.
  {
    return info;
  }

  public void setLink(LLGenericNode link)
  // Sets link of this LLGenericNode.
  {
    this.link = link;
  }

  public LLGenericNode getLink()
  // Returns link of this LLGenericNode.
  {
    return link;
  }
} 
```

**LinkedGenericLog.java**

```
package ch02.genericStringLogs;

public class LinkedGenericLog<T> implements GenericLogInterface
{
  protected LLGenericNode log; // reference to first node of linked
                              // list that holds the GenericLog items
  protected String name;      // name of this GenericLog

  public LinkedGenericLog(String name)
  // Instantiates and returns a reference to an empty GenericLog object
  // with name "name".
  {
    log = null;
    this.name = name;
  }

  public void insert(T element)
  // Precondition:   This GenericLog is not full.
  //
  // Places element into this GenericLog.
  {
    LLGenericNode newNode = new LLGenericNode(element);
    newNode.setLink(log);
    log = newNode;
  }

  public boolean isFull()
  // Returns true if this GenericLog is full, false otherwise.
  {
    return false;
  }

  public int size()
  // Returns the number of items in this GenericLog.
  {
    int count = 0;
    LLGenericNode node;
    node = log;
while (node != null)
    {
      count++;
      node = node.getLink();
    }
    return count;
  }

  public boolean contains(T element)
  // Returns true if element is in this GenericLog,
  // otherwise returns false.
  // Ignores case difference when doing comparison.
  {
    LLGenericNode node;
    node = log;

    while (node != null)
    {
      if (element.equals(node.getInfo()))  // if they match
        return true;
      else
        node = node.getLink();
    }

   return false;
  }

  public void clear()
  // Makes this GenericLog empty.
  {
    log = null;
  }

  public String getName()
  // Returns the name of this GenericLog.
  {
    return name;
  }

  public String toString()
  // Returns a nicely formatted string representing this GenericLog.
  {
    String logString = "Log: " + name + "\n\n";
    LLGenericNode node;
node = log;
    int count = 0;

    while (node != null)
    {
      count++;
      logString = logString + count + ". " + node.getInfo() + "\n";
      node = node.getLink();
    }

    return logString;
  }
} 
```

你可以清楚地看到，我已经在 LinkedGenericLog.java 中覆盖了 contains() 然而，编译器仍然会抛出这个错误。我认为这与我在 contains() 方法的参数中使用泛型有关，但我是泛型新手，无法理解这个问题。

谁能帮我？

（顺便说一句，我正在运行 java 版本“1.6.0_15”并使用命令行编译）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:21:30.650

在 java 中，方法签名包括参数及其类型。所以我不得不说 in 的类型与`T`in的类型`LinkedGenericLog`不同`GenericLogInterface`

```
public class LinkedGenericLog<T> implements GenericLogInterface 
```

此行并不表示 T 相同，您应该将其替换为：

```
public class LinkedGenericLog<T> implements GenericLogInterface<T> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:22:01.030

问题是您正在*实现*. `GenericLogInterface`这会导致各种问题，涉及两个不同的类型参数。你需要做的就是改变这个：

```
public class LinkedGenericLog<T> implements GenericLogInterface<T> 
```

对此：

```
public class LinkedGenericLog<T> implements GenericLogInterface 
```

那么你*也*应该停止使用原始类型`LLGenericNode`。所以：

```
protected LLGenericNode log; 
```

应该：

```
protected LLGenericNode<T> log; 
```

这（在`insert`）：

```
LLGenericNode newNode = new LLGenericNode(element); 
```

应该：

```
LLGenericNode<T> newNode = new LLGenericNode<T>(element); 
```

同上使用`LLGenericNode`in`toString()`和`contains()`。

...而且在其内部`LLGenericNode`。基本上，无论您在哪里使用原始类型，都不要这样做:)

# django - Django 将表单动态限制为指定字段

> ID：15122614
> 
> 赞同：0
> 
> 时间：2013-02-27T21:19:10.213
> 
> 标签：django, django-forms

我想知道如何最好地动态限制哪些字段是 ModelForm 实例的一部分。具体来说，

```
class ModelWithManyFields(models.Model):
    many fields ....

class FormOfSelectedModelFields(forms.ModelForm):
    class Meta:
        model = ModelWithManyFields
        fields = [  a dynamic list for model fields determined by the view  ] 
```

`FormOfSelectdModelFields()`使用视图固有的某些逻辑动态确定的字段列表创建实例的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:28:18.103

好吧，您可能想为此 ModelForm 创建类似工厂的东西。

在简单的情况下，您可能只想使用[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform-factory-function](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform-factory-function)

# c++ - 在 std::deque 的文件中存储、检索二进制数据或字节？

> ID：15122615
> 
> 赞同：0
> 
> 时间：2013-02-27T21:19:15.223
> 
> 标签：c++, file, memory-management, c++11, deque

我正在为游戏编写“重播系统”，我想知道如何存储录制的帧？

至于现在我有这个代码/结构（注意：这个代码被缩短了）：

```
struct Point4D { float x, y, z, w; };
struct Point3D { float x, y, z; };
struct Point2D { float x, y; };
struct QuatRot { Point4D Front,Right,Up; };
struct VehicleInfo
{
    Point3D     Pos,Velocity,TurnSpeed;
    QuatRot     Rotation;
};
namespace Recorder
{
    struct FrameInfo
    //~380 bytes / frame| max 45600 bytes @ 120 fps
    //max 3.7 GB raw data for 24 hours of recording, not bad..
    {
        std::chrono::high_resolution_clock::duration time;
        VehicleInfo Vehicle;
        int Nitro;
        float RPM;
        int CurrentGear;
    };

    std::deque<FrameInfo> frames;
    FrameInfo g_Temp;

    void ProcessRecord()
    {
        //record vehicle data here to g_Temp
        frames.push_back(g_Temp);
        return;
    }
    //other recording code.......
}; 
```

我在想的是，制作一个原始字节数组，将其分配给双端队列容器的大小，用 memcpy 将它们从双端队列复制到数组，然后将所有数组字节写入文件。

然后，如果我想读取我的记录数据，我只需读取文件的字节并将它们分配给一个新数组，然后使用 memcpy 将数组内容复制到一个双端队列..

这很像..好吧.. C方式？必须有其他方法来做到这一点，将数据存储在文件中，然后将其读回双端队列（也许使用一些 C++11 功能？）。

我将如何做到这一点？

您推荐哪种方法？

如果这很重要，我正在使用 Windows。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:27:38.467

`memcpy`是过早的优化。

从磁盘读取内容时，您的瓶颈是磁盘 IO，而不是将其从内存的一部分复制到另一部分。

修复您的数据结构，使其使用固定大小的数据结构（而不​​是`int`使用 32 位 int 等）。

不要`std::chrono::high_resolution_clock::duration`用二进制写——库更新可以完全改变它的大小，而不用眨眼或流泪，更不用说它的意义了。写出`ms`或其他东西，因此含义始终保持不变，以（例如）64位整数。然后，您可以将其读回您的`std::chrono::high_resolution_clock::duration`.

序列化时总是写出版本号和结构大小，因此反序列化甚至可以处理基本的版本控制。

我会写一个“流”和“从流”。“to stream”写出版本号和大小。“从流”读取版本号和大小，加载当前版本和流版本中的每个字段，清除剩余的，然后从流中读取剩余的数据。

如果你发现你需要更高的性能，你会注意到你的车的位置和角度会比齿轮更频繁地变化。此外，丢弃在现有帧之间合理插值的帧会大大减少重播格式的大小（根据您的描述，这不像是在重播中运行物理）。最后，如果你有一个一致的物理模型，那么只存储用户输入和基于它的重放是可能的（但这很难实现）。

其他疯狂：只需调用相关结构即可替换 SRECORDASSIGN `operator=`。`0x4C`像应用于指针这样的幻数是愚蠢的，并且几乎总是可以用简单的结构成员访问来替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:46:21.107

如果我正确解释了您的问题（我很累，所以如果我错了，请发表评论），您想在文件中写入和读取您的录音。

这可以通过任何结构轻松完成：

```
struct Foo
{
   float bar;
   int baz;
};
std::ostream& operator<<(std::ostream& stream, const Foo &foo)
{
   stream << foo.bar << " " << foo.baz;
}
std::ofstream& operator<<(std::ofstream& stream, Foo &foo)
{
   stream.write(reinterpret_cast<char*>(&foo.bar), sizeof(bar));
   stream.write(reinterpret_cast<char*>(&foo.baz), sizeof(baz));
}
std::ifstream& operator>>(std::ifstream& stream, Foo &foo)
{
   stream.read(reinterpret_cast<char*>(&foo.bar), sizeof(bar));
   stream.read(reinterpret_cast<char*>(&foo.baz), sizeof(baz));
} 
```

你可以用

```
#include <fstream>
#include <iostream>

int main()
{
   Foo foo;
   foo.bar = -1.2f;
   foo.baz = 37;
    std::cout << foo << "\n";
   std::ofstream output;
   output.open("myfile", std::ios::binary);
   output << foo;
   output.close();
   std::ifstream input;
   input.open("myfile", std::ios::binary);
   input >> foo;
   input.close();
   std::cout << foo << "\n";
} 
```

有关[`std::basic_ostream::write`](http://en.cppreference.com/w/cpp/io/basic_ostream/write)and的更多信息[`std::basic::istream::read`](http://en.cppreference.com/w/cpp/io/basic_istream/read)，我建议查看[cppreference.com](http://en.cppreference.com/w/)

# c++ - 在 GDAL 中创建 3D shapefile

> ID：15122616
> 
> 赞同：3
> 
> 时间：2013-02-27T21:19:20.273
> 
> 标签：c++, shapefile, gdal

我正在尝试使用 GDAL 创建一个 3D shapefile。我创建 3D 块的代码如下所示：

```
OGRLayer *poLayer = ds->CreateLayer("Floor", NULL, wkbPolygon25D, NULL);
OGRFeature *poFeature;

poFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() );

OGRLinearRing ring1, ring2;
OGRPolygon poly;

double x0=y0=z0 = 0;
double x1=y1=z1 = 1;

ring1.addPoint(x0, y0, z0);
ring1.addPoint(x1, y0, z0);
ring1.addPoint(x1, y1, z0);
ring1.addPoint(x0, y1, z0);
ring1.addPoint(x0, y0, z0);
ring1.closeRings();
ring2.addPoint(x0, y0, z1);
ring2.addPoint(x1, y0, z1);
ring2.addPoint(x1, y1, z1);
ring2.addPoint(x0, y1, z1);
ring2.addPoint(x0, y0, z1);
ring2.closeRings();

poly.addRing(&ring1);
poly.addRing(&ring2);
poFeature->SetGeometry(&poly);

poLayer->CreateFeature(poFeature); 
```

但是，当我稍后打开文件并查询功能中的一个点时：

```
OGRGeometry* pGeometry = pFeature->GetGeometryRef();
OGRSpatialReference* pSpaRef = pGeometry->getSpatialReference();

OGRPoint point(0.5, 0.5,0.5);
point.assignSpatialReference(pSpaRef);    
OGRBoolean bContains = pGeometry->Contains(&point); 
```

我得到了 FALSE 的结果。

我搜索了 GDAL 文档和许多其他地方，找不到任何关于如何构建 3D 对象的示例，所以我猜如果您创建了顶面和底面，它将连接它们。

所以，总而言之，问题是......如何在 GDAL 中创建 3D 块对象（如立方体）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:23:43.353

问题是你要制作两个环——一个“盒子”的顶部和底部。这不是一个封闭的盒子（没有边），而是顶部和底部的 2 个“板”。

话虽这么说，即使你把它做成一个封闭的盒子，包含仍然会失败。这不会进行体积包含检查，而是检查点是否包含在框的实际表面内。包含定义为`(0.5, 0.5, 1.0)`应该返回 true 的点（假设 OGR 使用 GEOS 编译），因为该点位于“盒子”的表面内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T22:42:22.020

GEOS（在 GDAL 中使用）是一个 2D 几何引擎，但可以存储来自第三维的坐标（因此在 中命名为 2.5 维`wkbPolygon25D`）。因此，它有效地评估了二维几何之间的二元谓词：

```
A: POLYGON((0 0, 1 0, 1 1, 0 1, 0 0), (0 0, 1 0, 1 1, 0 1, 0 0))
B: POINT(0.5 0.5) 
```

由于两个环`A`相同，它们相互“抵消”，内部被“擦除”（这种技术通常用于在多边形中放置一个洞）。这个多边形被认为是不简单的，因为环相交（记住，它被认为是二维的）。

GEOS / GDAL 不能用于执行 3D 谓词，例如“包含”。

# java - 可能的精度损失

> ID：15122617
> 
> 赞同：6
> 
> 时间：2013-02-27T21:19:20.787
> 
> 标签：java

我试图在java中运行这段代码并得到以下错误，需要int found double。

```
public class UseMath{
public static void main(String[]args){
  int x = Math.pow (2,4);
System.out.println ("2 to the power of 4 is" + x);

 }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T21:24:38.827

如果你看一下[文档](https://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#pow%28double,%20double%29)，它会说，它`Math.pow()`需要两个`doubles`，并返回一个`double`。当您将 int 传递给此函数时，这意味着没有害处，因为将 an 转换（转换）`int`为`double`意味着没有损失。但是，当您将值分配给 a 时`int`，这意味着它可能会丢失精度。

只需这样做：

```
int x = (int)Math.pow (2,4); 
```

或者

```
double x = Math.pow (2,4); 
```

# jquery - 带有本地主机的 jquery.exif.js - badrequest 问题

> ID：15122620
> 
> 赞同：1
> 
> 时间：2013-02-27T21:19:27.233
> 
> 标签：jquery, asp.net, exif, bad-request

再会！

我正在尝试运行这个插件 - [http://www.nihilogic.dk/labs/exifjquery/jquery.exif.js](http://www.nihilogic.dk/labs/exifjquery/jquery.exif.js)

在 asp.net 网站上。目前我正在通过我的本地 IIS 或我的 asp.net 开发服务器运行该站点。

每当此插件尝试调用`function sendRequest(strURL, fncCallback, fncError, aRange, bAcceptRanges, iFileSize){//...}`第 195 行时`oHTTP.send(null);`

我加载的图像返回错误请求（400）。

请求网址类似于：*192.168.#.###/MyWebsite/img1.jpg*或*localhost/MyWebsite/img1.jpg*。

我尝试按原样复制/粘贴此示例（我将引用更改为指向我的目录）到一个新项目中，但没有成功：[JQuery EXIF Demo](http://blog.rrikesh.com/demo/jquery-exif.html)

不用说，调用 exif 方法时我得到空结果。

我不知道这是否会有所帮助 -[请求标头](http://sdrv.ms/13opryl)

该插件对我不起作用。我认为这是某种域请求问题。

对此的任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:29:50.663

从您在这里给我们的行中，`localhost/MyWebsite/img1.jpg`我了解到您使用 Visual Studio 的 Web 服务器运行您的网站，即使用与默认 80 不同的端口。

所以我希望看到有类似的东西`localhost:8080/MyWebsite/img1.jpg`，有端口，所以，没有端口可能会调用其他不存在以太的东西，以太与你工作的网络不同 - 这就是你错误的原因。

# java - 我可以将手动实例化与自动装配结合起来吗？

> ID：15122622
> 
> 赞同：0
> 
> 时间：2013-02-27T21:19:32.180
> 
> 标签：java, spring, binding, code-injection, autowired

行。我什至不知道如何问这个问题，这是我一定错过了什么的迹象。我能做的最好的事情是：“有没有办法手动实例化一个对象并仍然在该对象中使用注入？”

具体来说，说我有：

```
class A {

   public A(MyObject1 obj1, MyObject2 obj2, ..., MyObjectn objn) {
     ...
   }

} 
```

我想连接除 MyObjectn 之外的所有这些对象。据我所知，如果我在上面的构造函数前面使用@Autowired，那么我应该只在使用该类实例的代码中实例化该对象，如下所示：

```
@Autowired
A a; 
```

这不允许我在构造函数中手动传递 objn 。除了在使用该类的实例的代码中手动初始化 A 之外，有没有办法绕过这个限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:29:19.290

简短的回答 - 不。您要么使用 IoC，要么手动实例化对象。

我想到的一种解决方法：

使用每个 MyObject1 创建一个服务`@Autowired`

在此服务中创建一个方法：

```
public A createA(MyObjectN objn) {
   return new A(object1, object2... objn); //note that object1 .. objectn-1 are autowired.
} 
```

使用 ;) 注入服务`@Autowired`并调用`service.createA()`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T11:40:11.887

来自 vmoksha 的 sunilkumar

**不**，我们不能那样创造

# c - 使用 C 的频率阵列动态分配

> ID：15122624
> 
> 赞同：1
> 
> 时间：2013-02-27T21:19:33.690
> 
> 标签：c

我有一个函数可以遍历我的字符串数组，以找出该字符串在数组中出现的次数。如果找到，该字符串将被设置为`NULL`，并且计数器会跟踪找到该字符串的次数。然后我在循环中调用另一个函数来为我的频率数组分配内存，以便我可以存储`count`. 它似乎工作正常，但是当我在 main 中创建任何其他变量时，我的程序崩溃了。这是我的两个功能：

```
int search(char **table, int **frequency, int wordSize)
{
//  Local Declaration
int i, j, k;
int count = 1;
int strCount = 0;
char target[25];

// Statement
for(i = 0, k = 0; i < wordSize; i++)
{
    if(table[i] != NULL)
    {
        strcpy(target, table[i]);
        for(j = i + 1; j < wordSize; j++)
        {
            if(table[j] != NULL &&
               strcmp(target, table[j]) == 0 &&
               target != table[i])
            {
                count++;
                free(table[j]);
                table[j] = NULL;
            }
        }
    strCount += makeFreq(frequency, k, count);
    k++;
    }
    count = 1;
}

return strCount;
}// search

int makeFreq(int **frequency, int k, int count)
{
//  Local Declaration
int strCount = 0;

//  Statement
frequency[k]=(int*)malloc(sizeof(int));
frequency[k][0] = count;
strCount += 1;

return strCount;
}// makeFreq 
```

有人可以向我解释为什么我的程序崩溃了吗？

在这里，我为我的表分配了 1000 个指针。

```
char** getPoint(void)
{
//  Local Declaration
char **table;

//  Statement
table = (char**)calloc(MAX_SIZE + 1, sizeof(char));
if(table == NULL)
{
    MEM_ERROR, exit(100);
}

return table;
}// getPoint 
```

比我读到的，我为文件中的字符串分配内存并将其存储到字符串数组中。

```
int scanFile(char **table, FILE *fpFile)
{
//  Local Declaration
int count = 0;
char temp[500];
char **ptr = table;

//  Statement

//  scan file, allocate, and copy string to array.
while(fscanf(fpFile, "%s", temp) != EOF)
{
    *(ptr + count) =(char*)calloc(strlen(temp)+1, sizeof(char));
    strcpy(*(ptr + count), temp);
    count++;
}

return count;
}// scanFile 
```

这是我为频率数组分配指针数组的方式。

```
void aloFreqAry(int **frequency, int wordSize)
{
//  Local Declaration

//  Statement
frequency =(int**)calloc(wordSize + 1, sizeof(int));
if(frequency == NULL)
{
    MEM_ERROR, exit(103);
}

return;
}// aloFreqAry 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:13:14.200

除了分配中的大小问题（应该`sizeof(char*)`在分配中`table`，`sizeof(int*)`在分配中`frequency`），

```
void aloFreqAry(int **frequency, int wordSize)
{
//  Local Declaration

//  Statement
frequency =(int**)calloc(wordSize + 1, sizeof(int));
if(frequency == NULL)
{
    MEM_ERROR, exit(103);
}

return;
}// aloFreqAry 
```

不`frequency`为调用者分配任何东西。它只是为该指针的本地副本分配内存，并在函数返回时丢失该句柄。

函数应该返回一个，而不是`int**`作为参数，

```
frequency = calloc(wordSize + 1, sizeof(int*)); // size of a _pointer_ to int
if(frequency == NULL)
{
    MEM_ERROR, exit(103);
}

return frequency; 
```

您在调用者中分配的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:06:40.897

这个语句看起来很可疑（你说“我在这里为我的表分配了 1000 个指针”）：

```
table = (char**)calloc(MAX_SIZE + 1, sizeof(char)); 
```

这看起来不像是指针分配，而是 char 缓冲区的分配。

也许你的意思是：

```
table = (char**)calloc(MAX_SIZE + 1, sizeof(char*)); 
```

# outlook - 从 Outlook 发送到 Gmail 时向 HTML 电子邮件添加的额外空间

> ID：15122625
> 
> 赞同：7
> 
> 时间：2013-02-27T21:19:37.167
> 
> 标签：outlook, gmail, whitespace, html-email

如果我在 Gmail 或 Outlook 中打开以下 HTML 电子邮件，它会按原样呈现：

```
<img src="img.png" /> 
```

但是，如果我在 Outlook 中打开它，然后将其转发到 Gmail，它会添加额外的垃圾 HT​​ML，使该区域高于应有的高度（“p”标签负责增加高度 - 特别是 3px）：

```
<p class="MsoNormal">
    <span style="font-size:10.0pt">
        <img src="img.png">
        <u></u>
        <u></u>
     </span>
</p> 
```

Gmail中有很多解决间距问题的解决方案，比如在图像中添加display:block，将font-size和line-height设置为0等。我已经尝试了十几种方法，但没有一个因为落后而奏效我无法控制的场景 HTML 修改 - 样式和属性被剥离，带有自己属性的标签被添加等等。

是否有一种解决方法可以始终保留原始格式？我很乐意提供所需的任何其他详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:00:10.380

对此没有解决办法，但有一些方法可以限制和隐藏分隔的大小。我将其称为分离，但由于 Outlook 应用了 mso-normal p 标签，它实际上是顶部单元格的扩展。[这是一篇相关文章。](http://commadot.com/gmail-and-p-msonormal/)

表之间的间隙（大约 15 像素）比表行之间的间隙（2 像素）更大。它更复杂，但试着把你负担不起的所有东西都放在一张大桌子上。Colspans 和 rowspans 可能很复杂，但如果设置正确，它们就可以工作。

要隐藏分隔，请使用 bgcolor 集将所有表包装在主内容表中。例如，将一个大的内容窗格设置为白色。从 Outlook 发送时，您的所有子表都将移动，但间隙将保持白色，从而阻止不需要的行出现在您的电子邮件正文中。

页脚技巧 - 作为主白色面板的最后一个子表，当它分开时，它将在其下方创建一条白线。从主面板中删除页脚表格或将单元格 bgcolor 设置为与您的电子邮件背景相同以隐藏此分隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-30T11:02:21.183

我设法通过更改 MsoNormal 类来改变这种情况

```
 <style>
    td p.MsoNormal {margin: -4px !important}

    /* ou */

    .MsoNormal {
        margin: -4px !important;
    }
 </style> 
```

# ruby - 安装 gtk2 ruby gem 时出错

> ID：15122626
> 
> 赞同：0
> 
> 时间：2013-02-27T21:19:38.233
> 
> 标签：ruby, rvm, gtk2

我已经设置了 rvm 并想做教程[http://zetcode.com/gui/rubygtk/](http://zetcode.com/gui/rubygtk/)

它需要gtk2所以我跑了：

```
gem install gtk2 
```

它要求我授权安装 libglib2.0-dev

最后它因错误而失败。

```
 This is the log
    /home/max/.rvm/rubies/ruby-2.0.0-p0/bin/ruby extconf.rb
    checking for -Wall option to compiler... yes
    checking for -Waggregate-return option to compiler... yes
    checking for -Wcast-align option to compiler... yes
    checking for -Wextra option to compiler... yes
    checking for -Wformat=2 option to compiler... yes
    checking for -Winit-self option to compiler... yes
    checking for -Wlarger-than-65500 option to compiler... yes
    checking for -Wmissing-declarations option to compiler... yes
    checking for -Wmissing-format-attribute option to compiler... yes
    checking for -Wmissing-include-dirs option to compiler... yes
    checking for -Wmissing-noreturn option to compiler... yes
    checking for -Wmissing-prototypes option to compiler... yes
    checking for -Wnested-externs option to compiler... yes
    checking for -Wold-style-definition option to compiler... yes
    checking for -Wpacked option to compiler... yes
    checking for -Wp,-D_FORTIFY_SOURCE=2 option to compiler... yes
    checking for -Wpointer-arith option to compiler... yes
    checking for -Wswitch-default option to compiler... yes
    checking for -Wswitch-enum option to compiler... yes
    checking for -Wundef option to compiler... yes
    checking for -Wunsafe-loop-optimizations option to compiler... yes
    checking for -Wwrite-strings option to compiler... yes
    checking for rb_define_alloc_func() in ruby.h... yes
    checking for rb_block_proc() in ruby.h... yes
    checking for new allocation framework... yes
    checking for attribute assignment... no
    checking for rb_errinfo()... yes
    checking for cairo... yes
    checking for rb_cairo.h... yes
    checking for Win32 OS... no
    checking for gtk+-2.0... yes
    checking for st.h... yes
    checking for ruby/st.h... yes
    checking for target... x11
    checking for gtk_plug_get_type() in gtk/gtk.h... yes
    checking for gtk_socket_get_type() in gtk/gtk.h... yes
    checking for pango_render_part_get_type() in gtk/gtk.h... yes
    checking for gtk/gtkfilesystem.h... no
    checking for X11/Xlib.h... yes
    checking for main() in -lX11... yes
    checking for XReadBitmapFileData() in X11/Xlib.h... yes
    checking for XGetErrorText() in X11/Xlib.h... yes
    checking for gtk+-unix-print-2.0... yes
    creating ruby-gtk2.pc
    creating Makefile

    make
    compiling rbgtkfilesel.c
    In file included from /home/max/.rvm/gems/ruby-2.0.0-p0/gems/glib2-1.2.1/ext/glib2/rbgobject.h:28:0,
                     from rbgtk.h:28,
                     from global.h:28,
                     from rbgtkfilesel.c:25:
    /home/max/.rvm/gems/ruby-2.0.0-p0/gems/glib2-1.2.1/ext/glib2/rbglib.h:67:0: Warnung: »rb_str_new_cstr« redefiniert [standardmäßig aktiviert]
    /home/max/.rvm/rubies/ruby-2.0.0-p0/include/ruby-2.0.0/ruby/intern.h:747:0: Anmerkung: dies ist die Stelle der vorherigen Definition
    compiling rbgtkvruler.c

[a lot of further errors that variable »rb_str_new_cstr« is being redefined]

    rbgdkevent.c: In Funktion »gdkevent_s_setting_get«:
    rbgdkevent.c:390:8: Fehler: expected »(« before »!« token
    rbgdkevent.c:390:8: Warnung: Anweisung ohne Effekt [-Wunused-value]
    rbgdkevent.c:391:9: Fehler: expected »;« before »gtype«
    rbgdkevent.c: In Funktion »gdkeventexpose_set_area«:
    rbgdkevent.c:468:20: Warnung: Variable »event« gesetzt, aber nicht verwendet [-Wunused-but-set-variable]
    make: *** [rbgdkevent.o] Fehler 1 
```

请问有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:00:04.837

编译 ruby​​ 时，这些错误看起来像是`clang`OSX 上的问题，但它可能只是与 不兼容`ruby-2.0.0-p0`，请确保您拥有`gcc`不是`LLVM`基于的：

```
gcc -v | grep -i llvm 
```

输出应该是空的，然后得到旧的红宝石：

```
rvm use 1.9.3 --install --default 
```

并再次安装 gem：

```
gem install gtk2 
```

如果可行，则为 gem 打开一个错误，以提高与任一`clang`和/或的兼容性`ruby-2.0.0`

# bash - 提取 ping 时间并以时间戳为前缀

> ID：15122631
> 
> 赞同：3
> 
> 时间：2013-02-27T21:19:49.313
> 
> 标签：bash, sed, awk, ping

我正在尝试以对数据更友好的格式提取 ping 时间。我的目标是变成这样：

```
64 bytes from arn06s02-in-f0.1e100.net (173.194.32.32): icmp_seq=59 ttl=54 time=31.8 ms 
```

变成类似的东西：

```
1361999357 31.8 
```

其中第一个数字来自 $(date +%s)，第二个数字是 ping 命令的第 8 列。

我希望能够长时间运行它并获得一个很长的两列时间戳和 ping 时间列表。

**时间戳** 我的时间戳使用以下内容：

```
ping google.com | while read line; do echo "$(date +%s) $line"; done 
```

但是当我尝试添加 sed、awk 或 cut 到管道中以获得正好的时间时，我最终没有输出！

我对 sed 或 awk 不是很熟悉，但我确信它们一定是适合这项工作的工具。我的尝试导致没有输出。我认为这是因为 awk 在将输出传递给下一个管道程序之前期待 EOF？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T21:39:17.830

使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")：

```
$ ping google.com | awk -F'[ =]' 'NR>1{print system("echo -n $(date +%s)"), $11}' 
```

短而高效，不是吗？=）并且没有缓冲问题发生......

注意：`system("")`可以用作避免缓冲的技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:27:12.257

尝试这个：

```
ping -c 1 google.com | grep "bytes from" | while read line; do echo "$(date +%s) $line"; done | awk '{print $1 " " $8}' | sed 's,time=,,' 
```

请注意，如果您不使用“-c”，则在获得任何输出之前会发生一定量的缓冲。离开“-c”可以让您更快地查看结果并验证事情是否正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T22:09:27.650

只是为了与众不同...

```
( date '+%s' ; ping -c 1 google.com; ) | sed -ne '/^[0-9][0-9]*$/h;/ bytes from /{s/^.*time=\([0-9.]*\).*/ \1/;H;g;s/\n//;p;}' 
```

结果：1362002815 7.52

# java - 这是 2 个离散池的最合适的 java 集合

> ID：15122633
> 
> 赞同：1
> 
> 时间：2013-02-27T21:19:55.790
> 
> 标签：java

我有两个系列 - 基本上是“失业”和“就业”对象。

当需要一个新对象时，我会检查未使用的集合 - 如果有任何元素，则从该集合中删除其中一个（无论是第一个、最后一个，还是什么）从该集合中删除并添加到已使用的集合中。如果未使用的集合中没有元素，则实例化一个新对象。

如果不再使用某个对象，则将其从已使用的集合中删除并发送到未使用的集合。

什么具体的 java 集合最合适？

任何一个集合中的顺序都无关紧要。

我需要一个`add()`方法，一个`size()`方法和一个`pop/poll()`类型方法。

到目前为止，优先级队列看起来最接近，但我不关心插入顺序（尽管我认为它没有伤害）。

蒂亚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:22:22.790

听起来 a[`LinkedList<E>`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)就完全足够了：它提供`add`, `size`, 和从两端添加/删除的能力 ( `addFirst`, `removeFirst`, `addLast`, 和`removeLast`)，所有这些都是有`O(1)`代价的。

# ios - 使用情节提要在不同屏幕（视图）之间滑动

> ID：15122638
> 
> 赞同：5
> 
> 时间：2013-02-27T21:20:15.383
> 
> 标签：ios, objective-c, xcode

在我的项目中，我使用带有 2 个选项卡的情节提要。我要创建的是在第一个选项卡中，当您向左滑动时，将显示另一个带有文本的布局，当您再次向左滑动时，另一个布局会显示其他信息（所以假设我想要 10 个不同的布局模板，但我需要能够从布局模板中更改文本。所以这是我的故事板：

![http://i52.tinypic.com/28at3yh.png](../Images/ecef214b76b5c7e2abb7acbae566a66f.png)

在“第一个视图”中，我需要能够向左滑动并显示带有文本的布局，再次向左滑动并显示（例如）带有另一个文本的相同布局，再次向左滑动以显示另一个带有文本的布局等等。所以总共有 10 个布局模板，我需要在其中更改代码中的文本。

所以基本上我的目标是与 iPhone/iPad 上的开始窗口相同，您可以在其中滑动应用程序图标所在的屏幕。如何使用相同的动画完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:34:06.330

您要查找的内容称为`UIPageControl`. 类参考可以在[这里](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPageControl_Class/Reference/Reference.html)找到，一个非常好的教程可以在[这里](http://www.wannabegeek.com/?p=168)找到。

如果您想要`UIPageControl`更多可定制的选项，我建议您尝试其中的任何[一个](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=uiPagecontrol)。（这`SMPageControl`是我个人的最爱之一）

**编辑由于评论：**

[这](https://github.com/wannabegeek/PageViewController)是上面教程中的项目链接。

在`CustomPagerViewController`他打电话

```
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View1"]]; 
```

这给出了等效的结果

```
UIViewController *aViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"View1"];
[self addChildViewController:aViewController]; 
```

现在，如果你想添加几个 ViewControllers 你可以做一个循环如下

```
for(int i = 0; i<yourNumberOfViewControllers; i++) {
    YourViewControllerClass *aViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"YourIdentifier"];
    [aViewController setSomeProperty:someValue];
    [self addChildViewController:aViewController];
} 
```

希望能帮助到你！

# magento - Magento 结帐工作除了进度框

> ID：15122640
> 
> 赞同：0
> 
> 时间：2013-02-27T21:20:24.250
> 
> 标签：magento, checkout, progress

我[最近](https://stackoverflow.com/questions/15099201/magento-one-page-checkout-getting-typeerror-checkout-undefined-in-opcheckout)遇到了 Magento 的一页结帐系统的问题。

目前它以基本方式工作，但通常显示在右侧的进度步骤在步骤完成时不会更新。步骤标题正在显示（帐单地址、送货地址等），我可以通过 box.css 设置控制它们的样式，但是当客户逐步完成流程时，它们不会被内容填充。

我尝试了多种解决方案，包括：

[更改 xml](http://www.magentocommerce.com/boards/viewthread/130739/#t408264)并 [调整 opchecout.js 文件](http://blog.baobaz.com/en/blog/magento-checkout-progress-with-custom-layout)

调试这样的东西的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T14:20:29.983

检查您插入的块的 ID 是否与 JavaScript 函数刷新的 ID 匹配。我有那个问题。如果您使用的是 base/default/js/opcheckout.js 文件，它应该是

```
id='checkout-progress-wrapper' 
```

像这样（在你的 onepage.phtml 模板中）：

```
<div id="checkout-progress-wrapper">
    <?php echo $this->getChildHtml('checkoutProgress') ?>
</div> 
```

最好也检查一下 js 文件

# xquery - 使用 XQuery 计算字符串中单词出现的次数

> ID：15122641
> 
> 赞同：0
> 
> 时间：2013-02-27T21:20:26.607
> 
> 标签：xquery

我们有一个与此非常相似的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<nodeOne>
  <nodeTwo>
    <nodeThree>
      foo bar zoo
    </nodeThree>
  </nodeTwo>
</nodeOne>
<nodeOne>
  <nodeTwo>
    <nodeThree>
      foo bar
    </nodeThree>      
  </nodeTwo>
</nodeOne>
<nodeOne>
  <nodeTwo>
    <nodeThree>
      zoo bar
    </nodeThree>      
  </nodeTwo>
</nodeOne> 
```

我想要实现的是计算每个单词（由空格分隔）内部的出现次数`nodeThree`。考虑到上面的示例，输出将类似于：

```
foo 2
bar 3
zoo 2 
```

我试图获取每个`text()`，`nodeThree`并尝试将`tokenize()`其转换为字符串序列。然后，我想，我也许可以加入他们并分组，然后数数，但我不能这样做。到现在为止尝试了很多东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:50:21.973

首先请注意，您的 XML 格式不正确（即它不是真正的 XML），除非您创建一个根节点来包装它。

如果性能是一个问题，这个问题更适合利用带有频率数据的词索引，就像在 XML 数据库中一样。对于大型 XML，在纯 XQuery 中解决这个问题可能要慢得多，但可以解决问题：

```
let $xml :=
    <root>
    <nodeOne>
      <nodeTwo>
        <nodeThree>
          foo bar zoo
        </nodeThree>
      </nodeTwo>
    </nodeOne>
    <nodeOne>
      <nodeTwo>
        <nodeThree>
          foo bar
        </nodeThree>      
      </nodeTwo>
    </nodeOne>
    <nodeOne>
      <nodeTwo>
        <nodeThree>
          zoo bar
        </nodeThree>      
      </nodeTwo>
    </nodeOne>
    </root>
let $toks := $xml//text()/fn:tokenize(fn:normalize-space(.),'\s')
for $t in distinct-values($toks)
let $count := count($toks[. = $t])
return element { $t } {
    attribute count { $count }
} 
=>
<foo count="2"/>
<bar count="3"/>
<zoo count="2"/> 
```

# html - 需要什么才能得到' ' 重新加入 HTML 标准？

> ID：15122642
> 
> 赞同：0
> 
> 时间：2013-02-27T21:20:28.450
> 
> 标签：html, standards, forum

我理解作为标签从 HTML 规范中删除的整个演示文稿与关系参数，但是：

*   一些浏览器仍然需要/识别这个标签。
*   （各种）替代方案存在各种问题。
*   “中心”这个词有一些有争议的关系用法，因为这个元素相对于它的邻居来说被认为是中心的，没有包含实际的表示意义（尽管可以应用默认的 CSS 样式）。

这种推理方式是否足以将 HTML 标准作为一种功能性和实用性的做事方式重新引入？

如果这个问题具有挑衅性，请提前道歉，这是我的第一个 SO 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:34:57.293

在这里回答核心问题：

> 重新接纳 HTML 标准需要什么？

我认为这需要很多。

事情是这样的：就目前而言，它在`<center>`很大程度上是一个布局标签。任何足以改变标签以使其重新进入争用状态的东西都会同时改变它的使用方式，以至于使用一个全新的标签来实现向后兼容性会更好。

元素和/或文本的居中可以使用成熟的技术在 CSS 中完成，并且没有兼容性问题，即使在较旧的浏览器中也是如此，因此也不需要`<center>`标签，就像`<b>`或`<i>`标签一样。

但我认为主要的一点是，不管标签有什么优点或缺点，`<center>`负责开发 HTML 规范的团队已经决定弃用它，我无法想象有任何想法会改变他们头脑。

您可能会问“为什么不？”，但我认为他们的回答是“为什么？”。而且我认为你无法给出足以影响他们的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:58:01.450

您需要回答的关键问题是“需要解决的问题是什么？” 这是所有新元素或复活元素的起点。如果问题是表现性的，那么它的解决方法将是 CSS，而不是 HTML。预计您将提供从现实世界网页收集的数据，以证明问题的真实性。

一旦确定了问题，并且认为需要适当的解决方案并且应该使用 HTML，并且 HTML 中没有现有的解决方案，您可以参与该过程以确定问题的最佳解决方案是什么.

如果您同意添加`<center>`元素是解决问题的最佳方法，那么它很可能会添加到 HTML 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:34:08.397

“'中心'这个词有一些有争议的关系用法，因为这个元素相对于它的邻居来说被认为是中心的”

这是非常抽象的语义，在文档中实际上没有任何作用。我看不出它有用。甚至不清楚“中心”是否是一个很好的术语——`<focus>`听起来更像是你想要表达的观点。

在更大的点上。它需要与网络上大多数内容的实际结构相关的明确语义含义。因此推动了`<video>`,`<navigation>`和等标签`<email>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T21:26:46.967

我认为`center`-tag 是一个用于样式的元素，因此应该使用 CSS 处理。它不会向页面添加语义。

看到[这个](https://stackoverflow.com/questions/1798817/why-is-the-center-tag-deprecated-in-html)问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T21:28:23.883

在网页上，“”到底是什么？

考虑到标签应该描述内容是什么。这个标签只告诉你它在页面上的位置，而不是关于它本身的任何信息。

要带回这个标签，必须有一个非常令人信服的理由来将页面内容描述为中心。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T21:23:45.623

*   浏览器处理许多不推荐使用的标签是出于礼貌，而不是因为开发人员一定认为它们应该在规范中
*   如？
*   这将从根本上改变标签的使用，从格式到表示结构，不是吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-27T21:43:28.580

这个标签在 HTML5 中无效的原因是他们想要删除大部分样式标签和属性，以便样式只能由 CSS 进行，还删除`<font`了 >、align 属性、bgcolor 属性和更多与设计相关的东西。您可以在 CSS 中使用“”居中元素`margin: 0px auto`。

# sql - 如何在没有重复行的情况下使用带有内部连接的选择查询？

> ID：15122643
> 
> 赞同：0
> 
> 时间：2013-02-27T21:20:28.160
> 
> 标签：sql, select, inner-join

我有以下表格：

```
CREATE TABLE [dbo].[Clientes](
    [IdCliente] [int] IDENTITY(1,1) NOT NULL,
    [ApellidoPaterno] [varchar](max) NULL,
    [ApellidoMaterno] [varchar](max) NULL,
    [Nombre] [varchar](max) NULL,
    [Empresa] [text] NULL,
    [Estado] [varchar](20) NULL,
 CONSTRAINT [PK_Clientes] PRIMARY KEY CLUSTERED 
)

CREATE TABLE [dbo].[DatosLegales](
    [IdDatoLegal] [int] IDENTITY(1,1) NOT NULL,
    [IdCliente] [int] NULL,
    [Nombre] [varchar](max) NULL,
    [RFC] [varchar](20) NULL,
 CONSTRAINT [PK_DatosLegales] PRIMARY KEY CLUSTERED 
)

CREATE TABLE [dbo].[Facturas](
    [IdFactura] [int] IDENTITY(1,1) NOT NULL,
    [IdCliente] [int] NULL,
    [IdDatoLegal] [int] NULL,
    [Serie] [varchar](20) NULL,
    [Folio] [varchar](20) NULL,
    [UUID] [varchar](50) NULL,
    [FechaEmision] [date] NULL,
    [HoraEmision] [varchar](10) NULL,
    [RutaXML] [varchar](max) NULL,
    [RutaCBB] [varchar](max) NULL,
    [RutaPDF] [varchar](max) NULL,
    [Estado] [varchar](50) NULL,
 CONSTRAINT [PK_Facturas] PRIMARY KEY CLUSTERED 
) 
```

Clientes.IdCliente 上的外键 = DatosLegales.IdCliente DatosLegales.IdDatoLegal = Facturas.IdDatoLegal

我正在使用以下查询

```
SELECT Facturas.IdFactura, Facturas.IdGrupo, (Clientes.ApellidoPaterno + ' ' + Clientes.ApellidoMaterno + ' ' + Clientes.Nombre) AS Cliente, DatosLegales.Nombre, Facturas.Serie, Facturas.Folio, Facturas.UUID, Facturas.Estado, Facturas.FechaEmision, Facturas.HoraEmision 
FROM Facturas 
INNER JOIN Ventas ON (Facturas.IdFactura = Ventas.IdFactura) 
INNER JOIN Clientes ON (Clientes.IdCliente = Ventas.IdCliente) 
INNER JOIN DatosLegales ON (DatosLegales.IdDatoLegal = Facturas.IdDatoLegal) 
WHERE Facturas.IdGrupo = 1 AND (Clientes.ApellidoPaterno + ' ' + Clientes.ApellidoMaterno + ' ' + Clientes.Nombre LIKE '%55%' OR  Clientes.Nombre + ' ' + Clientes.ApellidoPaterno + ' ' + Clientes.ApellidoMaterno LIKE '%55%' OR DatosLegales.Nombre LIKE '%55%' OR Facturas.Serie LIKE '%55%' OR Facturas.Folio LIKE '%55%' OR Facturas.UUID LIKE '%55%' OR Facturas.IdFactura LIKE '%55%') 
ORDER BY IdFactura DESC 
```

而且我得到一个特定的行至少三遍......我认为这是因为（因为我使用 Like%55%）对于 55 上的每场比赛它都会显示该行。但是我只需要显示这些行一次。我能做些什么来解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T21:28:39.883

你的逻辑不正确。子句中的匹配数`where`与重复项无关。

创建重复项是因为一个或多个用于连接的表中存在重复项。如果您得到完全重复（所有列），您可以执行以下操作：

```
select distinct . . . 
```

关键字删除行`distinct`重复。

我鼓励你找到问题的根源。Distinct 是一个相对昂贵的操作。在这种情况下，它将被用作隐藏实际问题的绷带——这是基础表中的重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:28:28.470

```
SELECT DISTINCT Facturas.IdFactura,
     Facturas.IdGrupo,
     (Clientes.ApellidoPaterno + ' ' + Clientes.ApellidoMaterno + ' ' + Clientes.Nombre)
         AS Cliente,
     DatosLegales.Nombre,
     Facturas.Serie,
     Facturas.Folio,
     Facturas.UUID,
     Facturas.Estado,
     Facturas.FechaEmision,
     Facturas.HoraEmision
FROM Facturas
     INNER JOIN Ventas
         ON (Facturas.IdFactura = Ventas.IdFactura)
     INNER JOIN Clientes
         ON (Clientes.IdCliente = Ventas.IdCliente)
     INNER JOIN DatosLegales
         ON (DatosLegales.IdDatoLegal = Facturas.IdDatoLegal) WHERE Facturas.IdGrupo = 1
     AND (Clientes.ApellidoPaterno + ' ' + Clientes.ApellidoMaterno + ' ' + Clientes.Nombre LIKE
              '%55%'
          OR Clientes.Nombre + ' ' + Clientes.ApellidoPaterno + ' ' + Clientes.ApellidoMaterno LIKE
                 '%55%'
          OR DatosLegales.Nombre LIKE '%55%'
          OR Facturas.Serie LIKE '%55%'
          OR Facturas.Folio LIKE '%55%'
          OR Facturas.UUID LIKE '%55%'
          OR Facturas.IdFactura LIKE '%55%') ORDER BY IdFactura DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:30:53.170

```
SELECT Facturas.IdFactura,
         Facturas.IdGrupo,
         (Clientes.ApellidoPaterno + ' ' + Clientes.ApellidoMaterno + ' ' + Clientes.Nombre)
             AS Cliente,
         DatosLegales.Nombre,
         Facturas.Serie,
         Facturas.Folio,
         Facturas.UUID,
         Facturas.Estado,
         Facturas.FechaEmision,
         Facturas.HoraEmision
    FROM Facturas
         INNER JOIN Clientes
             ON (Clientes.IdCliente = Facturas.IdCliente)
         INNER JOIN DatosLegales
             ON (DatosLegales.IdDatoLegal = Facturas.IdDatoLegal)
   WHERE Facturas.IdGrupo = 1
         AND (Clientes.ApellidoPaterno + ' ' + Clientes.ApellidoMaterno + ' ' + Clientes.Nombre LIKE
                  '%55%'
              OR DatosLegales.Nombre LIKE '%55%'
              OR Facturas.Serie LIKE '%55%'
              OR Facturas.Folio LIKE '%55%'
              OR Facturas.UUID LIKE '%55%'
              OR Facturas.IdFactura LIKE '%55%')
ORDER BY IdFactura DESC; 
```

删除了以下检查，因为由于您使用的是 LIKE 子句，因此您不需要两次

```
OR Clientes.Nombre + ' ' + Clientes.ApellidoPaterno + ' ' + Clientes.ApellidoMaterno LIKE
                     '%55%' 
```

我还删除了以下 JOIN 并修复了 Facturas 和 Client 之间的 JOIN，因为您在 obth 表中有 Id。：

```
INNER JOIN Ventas
             ON (Facturas.IdFactura = Ventas.IdFactura) 
```

IF与删除它也是`DatosLegales.Nombre`相同的字段。`Clientes.Nombre`

不确定这两件事是否会解决您的问题，但至少可以改善您的查询。

# bash - bash 脚本 - 为什么它不打开第一个文件？

> ID：15122645
> 
> 赞同：0
> 
> 时间：2013-02-27T21:20:32.143
> 
> 标签：bash, file

我想同时对两个文件中的文本做一些事情。

```
fname3=XX1.txt fname2=XX2.txt

while read -r -u3 line1; read -r -u4 line2; do
    echo "$line1:$line2";
done 3< "$fname3" 4< "$fname2" 
```

输出总是显示“：（文本）”，我希望它输出“（文本）：（文本）”。文件很大，有关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:36:01.417

这适用于任何大小的文件。这是一个完整的、独立的脚本，用于演示百万行文件：

```
#!/bin/bash
printf "foo%s\n" {1..1000000} > XX1.txt
printf "bar%s\n" {1..1000000} > XX2.txt

fname3=XX1.txt fname2=XX2.txt

while read -r -u3 line1; read -r -u4 line2; do
    echo "$line1:$line2";
done 3< "$fname3" 4< "$fname2" 
```

输出是：

```
foo1:bar1
foo2:bar2
...
foo999999:bar999999
foo1000000:bar1000000 
```

如果第一个文件比第二个文件短，最后剩余的行将`:line`一直持续到第二个文件被完全读取。如果第二个文件较短，脚本将在完成后停止并忽略第一个文件的其余部分。

要在任何文件用完行时停止，请使用`&&`而不是`;`分隔读取语句。要读取直到两个文件都超出行数，请使用`||`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T23:16:48.930

如果您只想连接相应的行，请使用`paste`：

```
paste -d : $fname3" "$fname2" 
```

# javascript - Jquery 工具提示总是将头部标题名称显示为工具提示

> ID：15122647
> 
> 赞同：1
> 
> 时间：2013-02-27T21:20:33.620
> 
> 标签：javascript, jquery, tooltip

我正在使用内置的 Jquery 工具提示库，它工作得很好，除了在 Firefox 中，它总是显示页面的标题（在里面`<head>`，像这样：）`<title>My Title</title></head>`。

我尝试使用“禁用：true”选项，它仍然显示。任何线索我可以如何隐藏这个？

我用这一行初始化它：

```
$(function() {
   $( document ).tooltip({ position: { my: "left+15 center", at: "right center" } });
   $('.head-title').tooltip( "option", "disabled", true );
}); 
```

我尝试了以下两种禁用方法，但都没有奏效。我将标题包裹在另一个名为“head-title”的div中

```
$('.head-title').tooltip({ disabled: true });
$('.head-title').tooltip('disabled');
$('.head-title').tooltip( "option", "disabled", true ); 
```

我正在使用 JQuery v1.8.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:48:45.573

关闭但它是`.tooltip('disable')`，不是`.tooltip('disabled')`。

JAVASCRIPT：

```
$( document ).tooltip('disable'); 
```

演示：http: [//jsfiddle.net/dirtyd77/5F3kf/18/](http://jsfiddle.net/dirtyd77/5F3kf/18/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T23:36:03.367

实际上有两个问题。第一个是Dom提到的那个。第二个是`$(document)`选择器与禁用一起导致问题。我不得不将选择器更改为`$('*')`，然后一切正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-20T14:44:11.403

您必须指定“body”标签才能应用您的工具提示..只需这样写，它肯定会起作用：

```
$( "body" ).tooltip(); 
```

而不是这个：

```
$( document ).tooltip(); 
```

# php - PHP 设计模式

> ID：15122651
> 
> 赞同：1
> 
> 时间：2013-02-27T21:20:55.153
> 
> 标签：php, oop, design-patterns

我有一个反复出现的问题，我目前正在处理这样的问题 -

进入具有平台的脚本的 POST 变量，平台来自列表，例如：xbox、ps3、pc、mobileapp、mobilegame 等

对于每个不同的平台，我希望能够在我的脚本中做一些不同的事情，但在某些情况下，我希望代码做非常相似的事情，我现在做这样的事情：

```
$platformArray = array(
   'ps3'=>array('displayName'=>'playstation 3','function'=>'funcPS3'),
   'xbox'=>array('displayName'=>'Xbox','function'=>'funcXbox')
)
//similar amongst all platforms code on line below
echo 'you have a :'.$platformArray[$_POST['platform']]['displayName'].' for playing       games';

call_user_func($platformArray[$_POST['platform']['function']);

function funcPS3(){
   echo 'ps3 specific code'; 
}

 function funcXbox(){
   echo 'xbox specific code';
 } 
```

我想在我的代码中转向 OOP 方法，我想使用对象作为我的数据存储介质，而不是像现在这样使用数组，但我有时确实需要提前在代码中定义属性，我怎么能做上述但有对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:56:49.850

我建议您从了解多态性开始。[这个讲座](https://www.youtube.com/watch?v=-FRm3VPhseI)应该是一个好的开始。

当您尝试基于某些标志创建行为时，您应该实现两个具有相同接口的类：

```
class Xbox
{
    private $displayName = 'XBox 360';

    public function identify()
    {
        // Xbox-specific stuff
        return  ':::::::::::'. $this->displayName;
    }
}

class PS3
{

    private $displayName = 'Playstation 3';

    public function identify()
    {
        // playstation-specific stuff
        return '+++'. $this->displayName . '+++';
    }
} 
```

这两个类具有*相同名称*的方法，可以做不同的事情；

```
$platform = $_POST['platform'];
// classes in PHP are case-insensitive
// expected values would be:  xbox, Xbox, ps3, pS3
if ( !class_exists($platform) )
{
     echo "Platform '{$platform}' is not supported";
     exit; 
     // since continuing at this point would cause a fatal error, 
     // better to simply exit
}

$object = new $platform;
echo $object->identify(); 
```

基本上，在这种情况下，您真的不关心您正在使用哪种类型的平台。您只需要知道它们都具有相同的公共接口。这被称为“多态行为”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:35:03.057

我将从一个非常幼稚的 OO 版本开始工作，到被认为是“好的”OO 代码，使用多态行为并避免全局状态。

# 1\. 非多态，具有全局静态数据

这很糟糕，因为它实际上只是过程代码的包装对象。它需要一个函数映射来调用每种类型的平台。

```
class Platform {    
    private static $platformArray = array(
       'ps3' => array(
           'displayName'=>'playstation 3',
           'function'=>'funcPS3'
        ),
       'xbox' => array(
           'displayName'=>'Xbox',
           'function'=>'funcXbox'
       )
    );

    private $type;

    public function __construct($type) {
        if (!array_key_exists($type, self::$platformArray)) {
             throw new Exception("Invalid Platform type $type" );
        }
        $this->type = $type;
    } 

    public function printCode() {
        // This was a question embedded within your question, you can use 
        // http://php.net/manual/en/function.call-user-func.php
        // and pass an instance with a method name.     
        return call_user_func( array($this, self::$platformArray[$this->type]) );
    }

    private function funcPS3(){
        echo 'ps3 specific code'; 
    }

    private function funcXbox(){
        echo 'xbox specific code';
    }    
}

$plat = new Platform($_POST['platform']);
$plat->printCode(); 
```

# 2\. 多态...但它仍然使用全局数据

[通过创建基类](http://sandbox.onlinephpfunctions.com/code/1c051d0079fee496d59a1eee5185ca223645f718)，您可以在子类中实现行为，为每个关注点创建单独的类。这里最大的问题是子类需要在全局注册表中注册。

```
abstract class Platform {
    abstract protected function getCode();
    public function printCode() {
        echo $this->getCode();
    }

    private function __construct() {} // so only factory can instantiate it
    private static $platformArray = array();

    public static function create($type) {
        if (!array_key_exists($type, self::$platformArray)) {
             throw new Exception("Invalid Platform type $type" );
        }
        return new self::$platformArray[$type];

    }         

    public static function addPlatform($type, $ctor) {
        if (!is_subclass_of($ctor, 'Platform')) {
             throw new Exception("Invalid Constructor for Platform $ctor" );   
        }
        self::$platformArray[$type] = $ctor;
    }
}

class PlatformXBox extends Platform{
     protected function getCode() {
         return 'xbox specific code';
     }
}
Platform::addPlatform('xbox', 'PlatformXBox');

class PlatformPs3 extends Platform {
     protected function getCode() {
         return 'ps3 specific code';
     }
}
Platform::addPlatform('ps3', 'PlatformPs3');

$plat = Platform::create($_POST['platform']);
$plat->printCode(); 
```

# 3.多态，无全局数据

[通过将代码放入命名空间](http://sandbox.onlinephpfunctions.com/code/1c051d0079fee496d59a1eee5185ca223645f718)，您可以避免基类中的静态代码，并避免将后参数直接映射到类中的危险。

```
namespace platform {

interface IPlatform {
   public function getDisplayName();
   public function getCode();
}

class PlatformFactory {
    static public function create($platformType) {           
        $className = "\\platform\\$platformType";
        if ( !is_subclass_of($className, "\\platform\\IPlatform") ){
            return null;
        }
        return new $className;
    }
}

class Xbox implements IPlatform {
    public function getDisplayName(){
        return 'xbox';
    }
    public function getCode(){
       return 'xbox code';   
    }
}

class Ps3 implements IPlatform {
    public function getDisplayName(){
        return 'ps3';
    }
    public function getCode(){
        return 'ps3 code';   
    }
}

} 
```

现在您可以像下面这样使用这些类

```
$platform = platform\PlatformFactory::create('xbox');
echo $platform->getCode() ."\n" ;

$platform2 = platform\PlatformFactory::create('ps3');
echo $platform2->getDisplayName()."\n";

$noPlatform = platform\PlatformFactory::create('dontexist');
if ($noPlatform) {
    echo "This is bad, plaftorm 'dontexist' shouldn't have been created";
} else {
    echo "Platform 'dontexist' doesn't exist";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:40:04.427

您可能希望创建一个名为平台的类，并在该类中为每个平台创建不同的方法：

```
class platforms {
   //Create your variables here, also called properties.
   public $displayName;

   //Create a function, also called a method for each platform you intent to use.
   public function xboxPlatform(){
        //Code comes here what you want to do.
   }
} 
```

希望这可以帮助。

# nunit - 让 NUnit 从引用的程序集中使用 SetUpFixture

> ID：15122659
> 
> 赞同：2
> 
> 时间：2013-02-27T21:21:37.940
> 
> 标签：nunit

我们正在尝试使用 NUnit 进行集成测试，但在准备系统进行测试时遇到了一些问题。在系统准备好进行测试之前，需要运行一些代码。所以我想我们可以写一个`SetUpFixture`来运行这个初始化代码。只要该类在正在测试的程序集中，它就可以正常工作。然而，我们可能要编写大约 20-30 个这样的程序集，所以我想把它放在一些可以简单地引用到每个测试程序集的帮助项目中。如果我这样做，NUnit 不会运行这些`SetUp`方法（我猜它只会在被测试的程序集中查找它们）。

有没有办法让 NUnit 知道这个外部设置代码？我想避免使用专门的属性和查找器，因为我们是一个大型组织，人们往往会忘记特殊的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:05:11.787

`SetUpFixture`您可以使用反射从被测程序集的 [ ] 中的外部程序集实例化您的“设置助手”对象。就像是：

```
Assembly asm = Assembly.LoadFrom(pathToSetupHelperDll);            
Type setupHelper = asm.GetType("Setup.Helper");
object h  = Activator.CreateInstance(setupHelper); 
MethodInfo m = setupHelper.GetMethod("DoSomething");            
m.Invoke(h, someParameter); 
```

# php - CURL - 无响应且无错误

> ID：15122662
> 
> 赞同：0
> 
> 时间：2013-02-27T21:21:49.050
> 
> 标签：php, curl

我希望有人可以帮助我，因为我没有得到任何回应、没有错误，也没有任何迹象表明我的 CURL 在这里不起作用。我四处搜索并添加了一个忽略 SSL 的子句（SSLVerify 设置为 false），并尝试了多种方法来获得响应。

有人可以指出我正确的方向吗？

谢谢！

```
<?php
function sendContactInfo() {

//Process a new form submission in HubSpot in order to create a new Contact.

$hubspotutk = $_COOKIE['hubspotutk'];  //grab the cookie from the visitors browser.
$ip_addr = $_SERVER['REMOTE_ADDR'];  //IP address too.
$hs_context = array(
        'hutk' => $hubspotutk,
        'ipAddress' => $ip_addr,
        'pageUrl' => 'https://www.myfoodstorage.com/onestepcheckout/',
        'pageTitle' => 'MyFoodStorage.com Cart Checkout'
    );
$hs_context_json = json_encode($hs_context);

//Need to populate these varilables with values from the form.
$str_post = "firstname=" . urlencode($firstname)
        . "&lastname=" . urlencode($lastname)
        . "&email=" . urlencode($email)
        . "&phone=" . urlencode($telephone)
        . "&address=" . urlencode($street)
        . "&city=" . urlencode($city)
        . "&state=" . urlencode($region)
        . "&country=" . urlencode($country)
        . "&hs_context=" . urlencode($hs_context_json);  //Leave this one be :)

 //replace the values in this URL with your portal ID and your form GUID
$endpoint = 'https://forms.hubspot.com/uploads/form/v2/234423/4a282b6b-2ae2-4908-bc82-b89874f4e8ed';

$ch = @curl_init();
@curl_setopt($ch, CURLOPT_POST, true);
@curl_setopt($ch, CURLOPT_POSTFIELDS, $str_post);
@curl_setopt($ch, CURLOPT_URL, $endpoint);
@curl_setopt($ch, CURLOPT_HTTPHEADER, array('application/x-www-form-urlencoded'));
@curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
@curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
$response = @curl_exec($ch);
$info = @curl_getinfo($ch);
@curl_close($ch);
}

echo sendContactInfo();
echo $response;
print_r($info);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:00:10.187

1.你不能打印函数外定义的变量值，像这样：

```
function sendContactInfo() {

 $response = @curl_exec($ch);

 $info = @curl_getinfo($ch);

}

echo $response;

print_r($info); 
```

但你可以这样打印价值：

```
function sendContactInfo() {

 $response = @curl_exec($ch);

 $info = @curl_getinfo($ch);

 echo $response;

 print_r($info);

}

sendContactInfo(); 
```

2.当你想运行函数并获取值时，使用“return”，像这样：

```
function sendContactInfo() {

 $response = @curl_exec($ch);

 $info = @curl_getinfo($ch);

 return $response;

 //or return $info;, when you want to get array values from @curl_getinfo

}

print_r(sendContactInfo()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:25:58.183

sendContactInfo 是一个函数，但它不像一个函数那样使用。

您无法访问函数内部使用的变量。它还需要返回一些东西

改变：

```
$response = @curl_exec($ch); 
```

至

```
return @curl_exec($ch); 
```

# c - 链表实现上的结构指针

> ID：15122667
> 
> 赞同：1
> 
> 时间：2013-02-27T21:22:08.110
> 
> 标签：c

我正在研究 C 中的链表实现，以掌握指针和结构的窍门。这是我的 LL 数据结构的基本代码：

```
struct Node {
    void *data;
    struct Node *next;
};

struct List {
    struct Node *head;
};

void initList(struct List *list) {
    list->head = 0;
}

struct Node *addFront(struct List *list, void *data) {
    struct Node *newNode;
    newNode->data = data;
    newNode->next = list->head;
    list->head = newNode;
    return newNode;
} 
```

这是我在`int main()`函数中对其运行的测试：

```
int main() {
    /* test addFront */
    double *data1;
    double *data2;
    *data1 = 10.5;
    *data2 = 10.7;
    struct List *newList;
    initList(newList);
    addFront(newList, data1);
    printf("%s\n", newList->head->data);
    addFront(newList, data2);
    printf("%s\n", newList->head->data);

    return 0;
} 
```

我的问题是 printf 没有打印输出。就目前而言，它显然不会打印，因为 %s 与双精度数据类型不匹配。如果我将字符串格式更改为 %d，则会出现分段错误。如果我添加一个（双）强制转换，它表示第二个参数的类型为 double *，这让我感到困惑，因为我认为该`->`符号取消引用了一个指针。

我迷路了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:29:35.430

您没有为`double`指针`data1`和`data2`.

看起来，实际上，您几乎没有为任何指针分配内存。

指针本身所做的只是引用内存中的地址。它不*分配*支持引用的结构或变量所需的内存。

如果你有

```
double *data1; // or any other kind of pointer 
```

你需要类似的东西

```
data1 = (double *) malloc(sizeof(double)); 
```

那么你可以取消引用所有你喜欢的，例如

```
*data1 = 12.34; 
```

但是没有那个，你引用了一个指向加尔各答黑洞的指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T21:24:09.363

您正在取消引用`data1`并且`data2`没有为它们分配内存。尝试：

```
double data1 = 10.5;

addFront(newList, &data1); 
```

或者，您可以执行 a `malloc`，尽管在这种情况下我认为您不应该这样做。

此外，当您想打印它们时，请尝试：

```
printf("%f\n", *(double *)newList->head->data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:28:21.727

你做了什么来试图解决这个问题？

尝试使用“assert.h”来确保您的断言是正确的，或者使用 puts/exit 的 if 语句。

特别是，如果它不打印某些东西，很明显你正在打印的不是你想要打印的，所以在某个地方，一个断言肯定会失败，你的大脑会“点击”你错过了一步的地方。

我不能立即这样做的原因是因为我不是你，而且我不知道你在做什么断言，所以我需要比你更长的时间来放置它们。

此外，如上所述，您没有为 newNode 分配内存，也没有访问任意内存，这会导致分段错误。

我在那里修好了。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <assert.h>

struct Node {
    void *data;
    struct Node *next;
};

struct List {
    struct Node *head;
};

void initList(struct List **newList)
{
    struct List* tmpList = 0;

    assert(newList != 0);
    tmpList = (struct List*)malloc(sizeof(struct List*));
    assert(tmpList != 0);
    tmpList->head = 0;
    *newList = tmpList;
}

void addFront(struct List* list, void* data)
{
    struct Node* currNode = 0;
    struct Node* prevNode = 0;

    assert(list != 0);
    assert(data != 0);

    currNode = list->head;
    while (currNode != 0) {
        prevNode = currNode;        
        currNode = currNode->next;
    }
    if (prevNode == 0) {
        list->head = (struct Node*)malloc(sizeof(struct Node));
        list->head->data = data;
        list->head->next = 0;
    } else {
        prevNode->next = (struct Node*)malloc(sizeof(struct Node));
        prevNode->next->data = data;
        prevNode->next->next = 0;
    }
}

void test(const struct List *list)
{
    const struct Node *iter;
    assert(list != 0);
    assert(list->head != 0);
    iter = list->head;

    while (iter != 0) {
        assert(iter->data != 0);
        printf("%f\n", *((double*)iter->data));
        iter = iter->next;
    }   
}

int main()
{
    double* data1 = (double*)malloc(sizeof(double));
    double* data2 = (double*)malloc(sizeof(double));
    *data1 = 10.5;
    *data2 = 10.7;
    struct List* newList = 0;

    initList(&newList);
    assert(newList->head == 0);
    puts("pass[0].");

    addFront(newList, data1);
    assert(newList->head != 0);
    assert(newList->head->data == data1);
    puts("pass[1].");

    addFront(newList, data2);
    assert(newList->head != 0);
    assert(newList->head->data == data1);
    assert(newList->head->next != 0);
    assert(newList->head->next->data == data2);
    puts("pass[2].");

    test(newList);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T21:33:48.100

除了 2 之外，`printf("%f")`还缺少**4 个**malloc：

我用以下标记了更改的行`###`：

```
#include "stdlib.h"
#include "stdio.h"
struct Node {
    void *data;
    struct Node *next;
};

struct List {
    struct Node *head;
};

void initList(struct List *list) {
    list->head = 0;
}

struct Node *addFront(struct List *list, void *data) {
    struct Node *newNode = malloc(sizeof(struct Node)); //###
    newNode->data = data;
    newNode->next = list->head;
    list->head = newNode;
    return newNode;
}
int main() {
    /* test addFront */
    double *data1 = malloc(sizeof(double)); //###
    double *data2 = malloc(sizeof(double)); //###
    *data1 = 10.5;
    *data2 = 10.7;
    struct List *newList = malloc(sizeof(struct List)); //###
    initList(newList);
    addFront(newList, data1);
    printf("%f\n", *(double*)newList->head->data);//###
    addFront(newList, data2);
    printf("%f\n", *(double*)newList->head->data);//###
    // TODO: free()'s //###
    return 0;
} 
```

# ruby - rbenv 安装 ruby 校验和不匹配 osx

> ID：15122668
> 
> 赞同：5
> 
> 时间：2013-02-27T21:22:11.980
> 
> 标签：ruby, macos, curl, rbenv

我已经在山狮上成功安装了 rbenv 和 ruby​​ 构建。运行`rbenv install 1.9.3-p392`结束于：

`checksum mismatch: ruby-1.9.3-p392.tar.gz (file is corrupt) expected f689a7b61379f83cbbed3c7077d83859, got 1cfc2ff433dbe80f8ff1a9dba2fd5636`

它正在下载的文件似乎很好，如果我使用 curl 手动下载文件，我会得到相同的错误校验和。

有没有人遇到过这个？他们是如何解决的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T21:22:11.980

tl：博士；使用浏览器从[http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p392.tar.gz](http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p392.tar.gz)下载 ruby​​ 并将其放入`~/.rbenv/caches/ruby-1.9.3-p392.tar.gz`，然后运行`rbenv install 1.9.3-p392`

问题在于`curl`, 和`ftp.ruby-lang.org`服务器。因为 curl 不通过`Accept-Encoding: gzip`，服务器提供了 ruby​​ 的非 gzip 版本（~60mb）而不是压缩版本（~12mb）。这会导致校验和失败，并且构建停止。

使用 curl --header "Accept-Encoding: gzip" 下载文件，会给出正确的校验和。但是，最新版本的 rbenv 将 -q 标志传递给 curl，它会忽略 .curlrc 文件，这使得在不编辑源代码的情况下很难进行配置。

简单的解决方案是手动下载 ruby​​.tar.gz 并将其放在缓存文件夹中，完全跳过该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T22:00:20.587

不确定是否相关，但是在我遇到这个问题并阅读了@Cam 的答案之后，我决定从 brew 安装 curl，当我再次尝试安装 ruby​​ 时，它起作用了。

所以`brew install curl`并检查它是否适合你。

# jakarta-ee - useSharedSubscriptionInClusteredContainer 似乎不起作用

> ID：15122672
> 
> 赞同：0
> 
> 时间：2013-02-27T21:22:21.623
> 
> 标签：jakarta-ee, glassfish, jms, cluster-computing, jms-topic

我在 GlassFish 3.1.2.2 中配置 JMS 主题时遇到问题。

我有一个集群，该集群中有一个节点和 4 个本地实例。我想要一个 JMS 主题，我在该主题上发送消息并且所有实例都接收消息。

我阅读了有关 useSharedSubscriptionInClusteredContainer 的信息，并将其设置为 false ，这应该可以做我想做但没有做的事情。在我的测试中，当我在 Topic 上发送消息时，四个实例中只有一个接收到消息。

我知道这是集群上 JMS 主题的默认行为，但这不是我想要的。谁能告诉我我做错了什么？感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:56:16.747

假设您正在使用消息驱动 Bean 侦听该主题，那么默认情况下它们都使用相同的客户端 ID 进行侦听。

通过设置以下注释，我设法为每个实例指定了不同的客户端 ID：

```
@MessageDriven(mappedName="jms/YourTopic", 
activationConfig =  {
  @ActivationConfigProperty(propertyName = "clientID", propertyValue="${com.sun.aas.instanceName}")
}) 
```

# android - Android CookieManager getCookie 问题

> ID：15122674
> 
> 赞同：1
> 
> 时间：2013-02-27T21:22:29.000
> 
> 标签：android, cookies

我正在使用 cookiemanager setcookie API 设置一个 cookie，当我执行 cookiemanager getcookie 时，我没有得到域，下面的到期日期是我的代码。

```
String cookieString = cookie.getName() + "=" + cookie.getValue() + "; Domain=" + cookie.getDomain()+"; expires=" + cookie.getExpiryDate();
CookieManager.getInstance().setCookie("http://mydomainname.com", cookieString);

 String cookie = CookieManager.getInstance().getCookie("http://mydomainname.com"); 
```

知道为什么 cookiemanager getcookie 不返回域和到期日期。这是一个错误吗？

谢谢，库马尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T23:05:12.250

不是错误 - 只需阅读文档。Android API 文档说 getCookie() 返回一个字符串“使用 'Cookie' HTTP 请求标头的格式”

Cookie: 请求标头的格式是由分号分隔的 cookie 名称/值对列表 - 它不包含域或到期信息，因为仅当 URL 匹配且未到期时才会发送 cookie。CookieManager.getCookie() 方法的作用相同 - 它返回与提供的 URL 匹配且尚未过期的所有 cookie。

# java - 在java绘图应用程序中检测Graphics2d绘制的线条及其曲线手绘

> ID：15122676
> 
> 赞同：0
> 
> 时间：2013-02-27T21:22:36.770
> 
> 标签：java, user-interface, detection, bufferedimage, graphics2d

我正在制作一个音乐应用程序，它使您能够从指定的颜色中自由绘制线条，然后轨迹栏会在其顶部传递，并且应该检测曲线和颜色以根据曲线输出声音和修改的音高等。

我正在寻找的是帮助检测线条和曲线。它们以 BUfferedImage 的形式绘制在 Label 中。以下是截图：

![绘图/音乐应用的GUI](../Images/a7d7be5c799897dafefd5b4049fa4f7e.png)

我画的黑线代表轨迹栏，但实际上它是一个由 drawRect 绘制的矩形，或者它可能是一个图像面板，这取决于你检测线条的方式。

我的问题：

*   我如何检测黄色、绿色等线条及其曲线并处理该数据？如果我得到这些数据，我可以轻松地修改每种颜色的每个分配声音的增益和音高。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:23:02.747

您至少要存储用户绘图动作的坐标。您可以根据您的要求将它们存储为点或将它们转换为线段和/或曲线的表示。当然，将笔画、颜色和您想要的任何内容存储为该模型的一部分。

为了做到这一点，我认为阻力最小的路径可能会让你利用`java.awt.Shape`一切`java.awt.geom`。具体来说，我认为您希望将每个用户绘制的元素表示为一个或多个`Path2D`和/或`Area`响应用户绘制动作的对象。然后，让您的 GUI 在您的自定义组件上呈现这些模型。

Path2D 会将运动存储为可通过 PathIterator 访问的直线和曲线。给定一个由 a 表示的轨迹栏`Rectangle2D`，您可以使用各种可用于比较和组合几何图形的方法——即`intersects(Rectangle2D)`此处的 Shape 接口。如果几何模型与您的轨迹栏相交，则您可以遍历路径组件，直到找到相交的实际子段。这会让你得到当地的斜坡。

# html - 删除图像周围的默认边框

> ID：15122685
> 
> 赞同：1
> 
> 时间：2013-02-27T21:23:15.103
> 
> 标签：html, css

我已经环顾了一段时间，找不到解决这个特定问题的解决方案。我`<img...>`在网页上有一张图片（它不在图像周围，而是在最外面的像素上。

![在此处输入图像描述](../Images/2b8b43379eeca8bc62bb4bbea8915649.png)

关联的 CSS 如下：

```
cursor: pointer;
display: inline-block;
float: left 
```

我试过使用

```
border: none
border: 0
outline: none
outline: 0
-webkit-border-before: 0px solid #fff
-webkit-border-after: 0px solid #fff 
```

并且我很难过，我让部分白线消失的唯一方法是增加边框半径以切断图像的角落。我已经验证并重新验证了此轮廓不在图像上。

原图： ![在此处输入图像描述](../Images/c9405107dd5d7de7f160cce3561ba28d.png)

包含此图像（以及没有相同问题的其他类似图像）的 div 具有如下 css（如果这有帮助）：

```
text-align: center;
height: 60px;
display: inline-block;
position: absolute;
width: 270px;
bottom: 0px;
left: 0px;
padding: 0px 20px; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:29:13.357

终于找到解决办法了！

我最初将它作为一个`img`包含一个类，该类引用了我们的精灵表中的图像。通过将`img`标签更改为 a`div`并保留原始引用，边框被移除并且精灵正确显示。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T21:36:04.317

你可以试试这个：

```
border-width: 0px; 
```

# css - 使用可变高度的两个模块侧边栏固定页眉和页脚

> ID：15122686
> 
> 赞同：1
> 
> 时间：2013-02-27T21:23:15.863
> 
> 标签：css, position, html, css-position

我有一个带有固定页脚和页眉的布局，我想要的是“信息框”div 的高度可变，并让“滚动 div”填充右列中剩余的垂直高度。从[这个 fiddle](http://jsfiddle.net/GYzJL/)可以看出，如果我将 scrolling-div 的高度设置为 100%，它将变得与右列一样高，而不是剩余空间。

这是页面的 HTML：

```
<body>
    <div id="header">
    </div>
    <div id="main-container">
        <div id="page-content">
        <div id="left-column">
        </div>
        <div id="right-column">
            <div id="info-box">
            This is a variable height div</div>
            <div id="scrolling-div">
                Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br /> Loads and loads of scrolling content<br /><br />

            </div>
        </div>
        </div>
    </div>
    <div id="footer">
    </div>
</body> 
```

这是CSS：

```
body {
    height:100%;
    width:100%;
    margin:0;
    padding:0;
}

#header {
    position:fixed;
    height:45px;
    width:100%;
    background-color:#FF0000;
    top:0;
}

#footer {
    position:fixed;
    height:45px;
    width:100%;
    background-color: #FF00FF;
    bottom:0
}

#main-container {
    background:#00FF00;
    position:absolute;
    top:45px;
    bottom:45px;
    width:100%
}

#page-content {
    width:960px;
    position:relative;
    margin: 0 auto;
    background-color:#FFF000;
    height:100%;
}

#left-column {
    background-color:#444444;
    width:400px;
    height:100%;
    float:left;
}

#right-column {
    background-color:#0000FF;
    float:right;
    width:560px;
    z-index:10000;
    height:100%;
}

#info-box {
    width:100%;
    height:200px;
    background-color:#0F0F0F;
    color: #FFFFFF;
}
#scrolling-div {
   background-color:#FFFFFF;
    height:200px;
    overflow:scroll;
} 
```

再一次，一个[指向小提琴的链接](http://jsfiddle.net/GYzJL/)可以看到它的实际效果。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:55:05.197

您可能需要依靠一些 JS 技巧来做到这一点 - 我正在考虑`calc()`在 CSS 中使用，但意识到这`#info-box`将是可变高度的。您可以使用简单的 jQuery 行将高度设置为`#scrolling-div`其父容器的高度减去其兄弟容器的高度：

```
$(document).ready(function() {
   $("#scrolling-div").height($("#right-column").height()-$("#info-box").height());
}); 
```

如果您想对这个设置进行未来验证（例如，如果容器中有多个同级），您可以使用以下函数：

```
$(document).ready(function() {
    // Define some variables
    var $sdiv = $("#scrolling-div"),
        sibHeight = 0;

    // Get sum of siblings height
    $sdiv.siblings().each(function() {
       sibHeight += $(this).height(); 
    });

    // Set own height to parent's height - sum of siblings height
    $sdiv.height($sdiv.parent().height()-sibHeight);
}); 
```

而不是使用`overflow: scroll`，我建议使用`overflow-y: auto`;)

在此处查看已编辑的小提琴 - [http://jsfiddle.net/teddyrised/2qXZG/](http://jsfiddle.net/teddyrised/2qXZG/)

# joomla - Joomla - 从 1.5 迁移到 2.5 - 未在修订的 2.5 模板中呈现内容

> ID：15122687
> 
> 赞同：0
> 
> 时间：2013-02-27T21:23:17.447
> 
> 标签：joomla, joomla2.5, joomla-template

我们正在从 1.5 迁移（*我应该说*是迁移）到 2.5 并且我们从 1.5 修订的模板正在工作，除了它在使用时不会显示任何内容。请帮忙！

这是代码：

```
 <body>
    <div id="container">
      <div id="header"> <a href="<?php echo $this->baseurl ?>/home.html"><img src="images/stories/blank.gif" width="180" height="93" border="0" alt="Home"></a>
        <div id="hdnav">
          <jdoc:include type="modules" name="headnav" style="none" />
        </div>
      </div>
      <div style="clear:both;"></div>
      <div id="navigation">
        <div id="topnav">
          <jdoc:include type="modules" name="topnav" style="none" />
        </div>
      </div>
      <div style="clear:both;"></div>
      <div id="content">
        <div id="maincontent">
          <jdoc:include type="message" />
          <jdoc:include type="component" />
        </div>
        <?php if($this->countModules('right')) : ?>
        <div id="rightcol">
          <jdoc:include type="modules" name="right" style="xhtml" />
        </div>
        <?php endif; ?>
      </div>
      <div id="footer">
        <jdoc:include type="modules" name="footer" style="none" />
      </div>
    </div>
    <jdoc:include type="modules" name="debug" />
    </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:22:07.853

1.  风格

请花时间为 div 编写新的 CSS。桌子很古老，很容易损坏，在移动设备上简直就是一场噩梦。

1.  覆盖

如果你这样做 1\. 你将不需要它们。无论如何，他们真的很容易。

模板覆盖只是一个组件或模块视图模板，它被复制到模板的 html 子文件夹下（在稍微不同的文件夹结构中），Joomla 将使用这些而不是原始文件。
因此，例如，如果您想覆盖文章视图，它位于

```
/components/com_content/views/article/tmpl/ 
```

它的覆盖将被放置在

```
/templates/your_template/html/com_content/article 
```

一个小问题：确保您始终复制整个 tmpl 组件文件夹，您必须覆盖模板内的所有布局。

[您可以在http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)上找到更多信息

# machine-learning - SGE 集群上的 libsvm grid.py

> ID：15122689
> 
> 赞同：1
> 
> 时间：2013-02-27T21:23:25.043
> 
> 标签：machine-learning, svm, libsvm, sungridengine

正如 libsvm 网站和自述文件中所述，python 工具**grid.py**可以在不同的计算机上运行，​​如下所述：

> “您可以通过将作业分派到共享相同文件系统的计算机集群来进行并行网格搜索。首先，您在 grid.py 中添加机器名称：
> 
> ssh_workers = ["linux1", "linux5", "linux5"]"

我在这里有两个问题：通过 SSHWorker 运行的每个命令 - 它们是否相互独立？看起来他们并没有试图在实例之间传递信息（例如 MPI）——对吗？

我的第二个问题是：我们可以修改这个 python 脚本以通过 qsub 在 SGE 上运行，而不是在脚本中提供节点名称吗？

谢谢

辐射

# java - 在 Gae 上创建一个大的 Zip 文件（在 blobstore 中）

> ID：15122692
> 
> 赞同：1
> 
> 时间：2013-02-27T21:23:34.363
> 
> 标签：java, google-app-engine, zip, blobstore, task-queue

我正在尝试在谷歌应用引擎（java 版本）上生成 XML 格式的报告。我处理存储在数据存储中的几个对象，并创建表示所述对象的 XML 块，这些对象通过流发送到 blobstore。问题是生成的 xml 可能很大，所以我想使用 zip 压缩来缩小它。然后可以将 Xml 数据减少到原始大小的十分之一以下。zip 文件很简单，因为它只包含一个带有原始 xml 数据的文件。

我使用发送到任务队列的任务来处理数据，并使用[此处](https://stackoverflow.com/a/14315315/1015437)描述的配方来创建 zip 文件并将其放入 blobstore。如果数据可以在一个任务执行（大约 10 分钟）内完全处理，那么一切正常。我不知道如何（或是否有可能）以某种方式存储 zip 流的状态并继续在上一个任务停止的地方写入 zip 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:49:10.920

在后端运行您的任务。那么您将不会被限制在 10 分钟的最后期限内。您的任务也可能运行得更快（如果 CPU 是您的瓶颈）。

# python - Python中的正则表达式引用

> ID：15122698
> 
> 赞同：2
> 
> 时间：2013-02-27T21:23:56.653
> 
> 标签：python, regex

我应该如何声明正则表达式？

```
mergedData = re.sub(r'\$(.*?)\$', readFile, allData) 
```

我有点想知道为什么这会奏效。我认为我需要使用`r''`来传递正则表达式。

```
mergedData = re.sub("\$(.*?)\$", readFile, allData) 
```

`"\$"`在这种情况下会导致什么结果？为什么？我会想到`"$"`的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T21:32:32.070

> 我认为我需要使用 r'' 来传递正则表达式。

`r`before 字符串文字表示原始字符串，这意味着通常的转义序列，例如`\n`or`\r`不再被视为换行符或回车符，而是简单地`\`跟随`n`or `r`。要指定 a `\`，您只需要`\`原始字符串文字，而您需要将其加倍为`\\`普通字符串文字。^(这就是为什么在指定正则表达式1)时通常使用原始字符串的原因。它减少了阅读代码时的混乱。如果使用普通字符串文字，则必须进行两次转义：一次用于普通字符串文字转义，第二次用于正则表达式中的转义。

> `"\$"`在这种情况下会产生什么结果？为什么？我本来以为`"$"`

在 Python 普通字符串文字中，如果`\`后面没有转义序列，`\`则保留 。因此`"\$"`导致. `\`_`$`

这种行为与 C/C++ 或 JavaScript 处理类似情况的方式略有不同：`\`被视为下一个字符的转义，并且只保留下一个字符。所以`"\$"`在那些语言中会被解释为`$`.

**脚注**

¹：Python 中原始字符串的设计存在一个小缺陷：[为什么 Python 的原始字符串文字不能以单个反斜杠结尾？](https://stackoverflow.com/questions/647769/why-cant-pythons-raw-string-literals-end-with-a-single-backslash)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T21:31:21.863

`r'...'` [转义序列](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)如`'\1'`（引用正则表达式中的第一组，但如果未转义，则与 ' 相同）`'\x01`。

一般来说，`r'...'`反斜杠不会充当转义字符。

尝试

```
 re.split('(.).\1', '1x2x3')  # ['1x2x3'] 
```

对比

```
 re.split(r'(.).\1', '1x2x3') # ['1', 'x', '3'] 
```

因为`'\$'`它不是 python 中的转义序列，所以它实际上与`'\\$'`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:31:51.580

只问蛇：

```
>>> r'\$(.*?)\$'=='\$(.*?)\$'
True
>>> r'\vert'=='\vert'
False
>>> r'\123'=='\123'
False
>>> r'\#23'=='\#23'
True 
```

基本上如果`\x` [会在 C 中创建一个转义字符，](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)则在字符串前缀中使用 r 与`\\x`：

```
>>> r'\123'=='\\123'
True
>>> r'\tab'=='\\tab'
True 
```

# c# - 如何地址列表 > 使用数组 [] 运算符的项目

> ID：15122699
> 
> 赞同：1
> 
> 时间：2013-02-27T21:24:01.020
> 
> 标签：c#, arrays, list, object

这是我的问题：我有一个对象“Strip”，我需要这些条带“stripList”的列表或数组，之后我需要有一个来自不同stripList的列表，我称之为“listOfStripList”。我知道我可以用这种方式保存：

```
List<List<Strip>> listOfStripList=new List<List<Strip>>(); 
```

我想以这种方式拥有这些对象的原因是因为每次我都想在不使用 For Loop 的情况下访问每个 stripList。例如，我想说 listOfStripList[1] 这与第一个条带列表有关。

有没有办法通过数组来定义这些列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-16T22:12:29.067

`List<T>`并且`T[]`两者都允许使用索引器（又名`[]`操作员）。所以你可以像下面这样使用你的列表：

```
List<Strip> firstList = listOfStripList[0]; 
```

虽然，如果你必须将它作为一个数组，你可以这样做：

```
List<Strip>[] arrayOfListStrip = listOfStripList.ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T22:20:18.217

`listOfStripList[0]`会给你一个`List<Strip>` 对象。调用`listOfStripList[0][0]`应该给你第一个列表中的第一个项目`listOfStripList`

这是一个小提琴： [https ://dotnetfiddle.net/XdDggB](https://dotnetfiddle.net/XdDggB)

```
using System;
using System.Collections.Generic;

public class Program
{
    public static void Main()
    {
        List<List<Strip>> listOfStripLists = new List<List<Strip>>();

        for(int j = 65; j < 100; j++){

            List<Strip> stripList = new List<Strip>();

            for(int i = 0; i < 10; i++){
                stripList.Add(new Strip(){myval = ((char)j).ToString() + i.ToString()});
            }

            listOfStripLists.Add(stripList);
        }// end list of list

        Console.WriteLine(listOfStripLists[0][1].myval);
    }

    public class Strip
    {
        public string myval {get;set;}  
    }
} 
```

# java - 码头用户定义的配置

> ID：15122700
> 
> 赞同：3
> 
> 时间：2013-02-27T21:24:00.623
> 
> 标签：java, servlets, jetty

在我的应用程序中，我想在服务器之间更改某些参数（字符串）。

例如，这些参数之一是表示服务器是否为生产环境的是/否值。另一个是运行应用程序的特定机器中给定资源的文件路径。等等。

我想将这些值保存在我的 Jetty Web 服务器的目录结构中的单独配置文件（纯文本、xml、JSON 或其他简单格式）中。

有没有一种方法可以实现这一点，它允许从我的 servlet 中通过键简单地检索字符串值，而无需安装其他软件或配置复杂的 Jetty 选项？我真的很想避免只需要检索两个或三个值的并发症。

编辑：我直接使用 servlet，没有任何额外的 web 框架，没有 Spring 等。该软件是用 Scala 编码的。

JNDI 可能会做我需要的，但我想要一些更简单的设置。

我想我正在寻找类似 ServletConfig 的东西，但在服务器级别，而不是 Web 应用级别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:07:52.467

这是一个简单的例子。

在您的 jetty-distribution 目录中，您有一个目录（通过文件中的配置`/resources/`默认包含在服务器级别的类加载器中）`OPTIONS``/start.ini`

如果您创建`/resources/myconfig.properties`（例如）具有以下内容：

```
food=fruit
fruit.color=yellow
fruit.name=banana 
```

然后你可以让一个 Servlet 在 init() 上加载它，如下所示：

```
public class LoadResourceServlet extends HttpServlet
{
    private Properties props;

    @Override
    public void init(ServletConfig config) throws ServletException
    {
        super.init(config);

        props = new Properties();
        URL url = this.getClass().getResource("/myconfig.properties");
        if (url != null)
        {
            try (InputStream stream = url.openStream())
            {
                props.load(stream);
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
        }
    }

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException
    {
        resp.setContentType("text/plain");

        try (PrintWriter writer = resp.getWriter())
        {
            writer.printf("food = %s%n",props.getProperty("food"));
            writer.printf("fruit.color = %s%n",props.getProperty("fruit.color"));
            writer.printf("fruit.name = %s%n",props.getProperty("fruit.name"));
        }
    }
} 
```

# c# - 简单的基准测试

> ID：15122701
> 
> 赞同：-1
> 
> 时间：2013-02-27T21:24:03.400
> 
> 标签：c#, for-loop, console-application, benchmarking

快速简单的问题，我找不到一个好的解决方案：

什么是一个简单的循环，可以让处理器“咀嚼”至少十秒钟？我已经尝试过这样的事情，但它们眨眼间就完成了：

```
int max = 300000;
for (int i = 0; i < max; i++)
{
    //do some random math here
} 
```

是否有某种计算或其他操作可以在那里占用更多时间并使用一些处理器能力？还是另一种实现方式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T21:29:20.140

如果您想在一段时间内阻塞线程但不用完 CPU 周期，您可以使用`Thread.Sleep`.

如果您想在一段时间内浪费 CPU 周期而不做任何有成效的事情，您可以使用`Thread.SpinWait`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:29:26.670

根据您的要求：

> 是否有某种计算或其他操作可以在那里占用更多时间并使用一些处理器能力？

您可以使用 DateTime 和 while 循环：

```
var start = DateTime.Now();
var end = start.AddSeconds(10);
while (DateTime.Now() != end) {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:29:12.393

你可以一直致力于寻找素数、冒泡排序和类似的事情，你在循环内部有一个循环。您必须有一个大数组才能进行排序，或者选择一个较大的随机数整整 10 秒，但它们将是我想象的最好、最快的赌注。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T22:30:45.813

尝试使用基于时间的物理方程。

例如：一个自由落体的物体在一定的时间内（以秒为单位），直到它到达 X 距离所经过的距离。

```
private float Gety(float t){float V=t*9.8f; return ((V*V)/19.6f);} 
```

您可以在循环中设置它，当返回等于或大于所选距离时，您的退出点将位于该循环中。

通过增加和减少时间步长，您将执行越来越多的计算，直到达到该距离或更大。

Fe：将初始时间设置为 0.0f，目标距离设置为 500，将时间步长从每次迭代的 0.01f 增加到 0.001f 将相应地执行更多计算，直到达到中断距离。

如果在一个循环内循环并且步长为 0.0000000000001f 你会做得很好。

# android - android在edittext中显示表情并允许用户删除它们

> ID：15122704
> 
> 赞同：3
> 
> 时间：2013-02-27T21:24:18.143
> 
> 标签：android, android-edittext, emoticons

我的问题是这样的，我设法在 中正确显示表情符号`EditText`，但是如果用户尝试在某些设备中删除此表情符号，则在按一次键盘删除图标后删除而不是删除表情符号，则需要按两三个根据表情符号串的时间

下面是我的代码：

```
Drawable d = getResources().getDrawable(emoticon.getResourceId());    
int startCursor = mTextInput.getSelectionStart();
int endCursor = mTextInput.getSelectionEnd();
d.setBounds(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight());
SpannableStringBuilder builder = new SpannableStringBuilder();
builder.append(emoticon.getStr());
builder.setSpan(new ImageSpan(d), builder.length() - emoticon.getStr().length(), builder.length(),
Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
mTextInput.getText().replace(startCursor, endCursor, builder); 
```

# bash - 嵌套 for 循环中的 vlookup 样式查询（

> ID：15122705
> 
> 赞同：1
> 
> 时间：2013-02-27T21:24:20.840
> 
> 标签：bash, for-loop, nested, vlookup

我一直在使用这个问题的建议： [Find value from one csv in another one (like vlookup) in bash (Linux)](https://stackoverflow.com/questions/10697724/find-value-from-one-csv-in-another-one-like-vlookup-in-bash-linux)

尝试创建一个脚本，在其中遍历多个数据文件，并以 vlookup 样式的方式从其他几个（单个）参考文件中添加列。

数据文件示例 (*.data)

```
info1   7   44567    1   2  marker1
info2   3   143679   2   2  marker2 
```

参考文件示例（ref.txt，要查找的文件）

```
marker1     66%
marker2     34% 
```

第二个参考文件示例（ref2.txt，第二个要查找的文件）

> ```
> info1 准确
> info2 部分
> ```

需要输出

```
info1   7   44567    1   2  marker1   66%   exact
info2   3   143679   2   2  marker2   34%   partial 
```

尝试循环（仅显示一个参考文件，因为我还没有工作！）

```
#!/bin/bash
for file in `ls /path/*.data`; 
do
for i in $file; 
do 
KEY=$(cut -f 6 $file);
    printf "%s\t" $i;
    grep "${KEY}" /path/ref1.txt | cut -f 2 ; 
done
done 
```

我认为我编写的脚本有两个问题当前输出是每个输入文件一行，而不是附加的输入文件的所有行，它是文件的文件名而不是文件中的一行。不过，参考位似乎确实有效（据我所知，单行输出）。IE：

```
/path/1.data    66% 
```

谁能告诉我出了什么问题，或者请提出一个更聪明的方法来做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:46:18.357

有一个`join`实用程序。特别是，给定您的示例：

```
join -o 1.1,1.1,1.3,1.4,1.5,1.6,2.2 -1 6 -2 1 test.data ref.txt |
  join -o 1.1,1.1,1.3,1.4,1.5,1.6,1.7,2.2 -j 1 - ref2.txt 
```

这会产生您建议的输出。该`-o <list>`选项指定要以格式打印的每个字段`<filenumber>.<fieldnumber>`。`-1 <n>`并`-2 <n>`指定要在每个文件中分别匹配哪个字段，并且`-j <n>`是当两个文件中的字段编号相同时可以使用的快捷方式。

# jquery - 删除命令不触发数据源的破坏传输方法

> ID：15122709
> 
> 赞同：4
> 
> 时间：2013-02-27T21:24:33.773
> 
> 标签：jquery, kendo-ui, kendo-grid, datasource

我在剑道网格的一列中定义了一个销毁命令：

```
columns: [
    {
        field: "Address",
        width: "200px"
    },
    {
        field: "City"
    },
    {
        field: "State",
        width: "40px"
    },
    {
        field: "Zip",
        width: "60px"
    },
    {
        field: "Active",
        width: "50px"
    },
    {
        command: ["edit", "destroy"],
        title: "&nbsp;",
        width: "210px" 
    }
] 
```

可编辑设置为网格的**内联。**数据源的 Batch 设置为 true。

编辑和保存工作正常（所有模型都以 JSON 格式发送到 SAVE 方法）。

但是，当我为其中一行单击删除时，它会从网格中删除该行，但它的行为就像我保存所有项目一样。它调用 save 方法并在 JSON 对象中发送每一行，除了我要删除的那一行。

问题是：为什么不调用destroy方法？

它不应该调用destroy方法并只发送被删除的行吗？

数据源定义：

```
dataSource: {
    error    : function (e) {
        CustomError(e);
    },
    type     : "json",
    transport: {
        read        : {
            contentType: "application/json; charset=utf-8",
            type       : "POST",
            url        : "../Services/svcPerson_Address.asmx/Search",
            dataType   : "json",
            cache      : false,
            complete   : function (e) {
                //alert(e);
            }
        },
        update      : {
            contentType: "application/json; charset=utf-8",
            type       : "POST",
            url        : "../Services/svcPerson_Address.asmx/Save",
            dataType   : "json",
            cache      : false,
            complete   : function (e) {
                if (typeof (e.responseText) != "undefined") {
                    var response = $.parseJSON(e.responseText);
                }
            }
        },
        destroy     : {
            contentType: "application/json; charset=utf-8",
            url        : "../Services/svcPerson_Address.asmx/Delete",
            type       : "POST",
            dataType   : "json",
            cache      : false,
            complete   : function (e) {
            }
        },
        create      : {
            contentType: "application/json; charset=utf-8",
            type       : "POST",
            url        : "../Services/svcPerson_Address.asmx/Save",
            cache      : false,
            complete   : function (e) {
                if (typeof (e.responseText) != "undefined") {
                    var response = $.parseJSON(e.responseText);
                }
            }
        },
        parameterMap: function (options, operation) {
            if (operation !== "read" && options.models) {
                return kendo.stringify({ models: options.models });
            }

            options.PersonId = 0;
            if (viewModel.SelectedPreceptor != null) {
                if (viewModel.SelectedPreceptor.PersonId != "" && viewModel.SelectedPreceptor.PersonId != null) {
                    options.PersonId = viewModel.SelectedPreceptor.PersonId;
                }
            }

            return kendo.stringify(options);
        }
    }, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-20T12:19:30.883

我遇到了同样的问题：模型中设置了错误的 id。

我的代码是：

```
model: {
    id: "Id",
    fields: {
        UserId: { editable: false },
        .... 
```

但应该是：

```
model: {
    id: "UserId",
    fields: {
        UserId: { editable: false },
        .... 
```

# javascript - 无法从 onkeydown 事件中警告值

> ID：15122710
> 
> 赞同：0
> 
> 时间：2013-02-27T21:24:38.313
> 
> 标签：javascript

到目前为止，我发现或尝试过的任何东西都没有帮助或产生任何正常工作的东西。

这是我的几十次失败尝试的一个例子：

```
<html>
<head>
<title>Keyboard Test</title>
<script type="text/javascript">
onkeydown=text
function test() {
var key=String.fromCharCode;
if (key=="a")
alert("Hello!");
}
</script>
</head>
</html> 
```

有人可以告诉我如何正确地尝试这个以及为什么它有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:29:47.567

“onkeydown=text”——这是一个错字吗？你的意思是“onkeydown=test”吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:30:01.397

这是一个示例，它主要完成您想要做的事情，但方式非常不同：http: [//jsbin.com/usonoh/1/edit](http://jsbin.com/usonoh/1/edit)

HTML：

```
<input id="foo"> 
```

Javascript：

```
document.getElementById("foo").addEventListener("keydown", function (ev) {
  if (ev.which === 'A'.charCodeAt(0)) {
    alert("A!");
  }
}); 
```

希望它非常简单，但它所做的是获取 ID 为“foo”的 HTML 元素，向“keydown”事件添加一个事件侦听器（这只是您传入的一个函数），然后在侦听器本身中我们检查刚刚在“foo”输入中按下的键是否是 charcode 65（“a”键）。

通常，您应该在 Javascript 中附加事件侦听器，并且应该使用 addEventListener 方法而不是设置 on* 属性。

我强烈推荐 Mozilla Developer Network 来查找 DOM API 信息；以下是此示例的相关页面：

[https://developer.mozilla.org/en-US/docs/DOM/document.getElementById](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById) [https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:37:27.713

[像这样](http://jsfiddle.net/dx6eJ/1/)试试

```
document.onkeydown = function test(ev) {
    var key = String.fromCharCode(ev.keyCode);
    if (key === "A") {
        alert("Hello!");
    }
} 
```

# javascript - 如何将覆盖统计数据发送到媒体管理器分析服务器？

> ID：15122714
> 
> 赞同：2
> 
> 时间：2013-02-27T21:24:44.140
> 
> 标签：javascript, media-manager

如果网页使用 SDL Media Manager HTML5 播放器播放视频分发，则访问者可以采取导航到横幅等操作，这将被视为一次转化。

网页或 Web 应用程序如何通知媒体管理器分析服务器有关此转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:46:17.857

媒体管理器中的转化率百分比由媒体上触发的自定义事件数除以观看次数乘以 100 计算得出。

启用自定义事件（在视频资产中），转换率将随着事件的计数而提高。

# asp.net - GUID 与随机字符串作为标识符

> ID：15122715
> 
> 赞同：1
> 
> 时间：2013-02-27T21:24:47.227
> 
> 标签：asp.net, sql-server, uniqueidentifier

我有一个表，我希望在其中有一个唯一标识符，该标识符在我可以在我的代码中引用的数据库实例中是相同的。该表不太可能有 > 500 行。使用 GUID 和使用由 LEFT(NEWID(),6) 填充的 NVARCHAR(6) 作为标识符之间有区别吗？当然假设该字段被标记为 PK 并且是唯一的。

该 ID 将用于自定义控件，我认为：

```
<cc1:mycontrol id="test" runat="server" code="71E29D" /> 
```

比以下更具可读性和更易于使用：

```
<cc1:mycontrol id="test" runat="server" code="71E29D4C-A00A-4F1A-9785-08D030A9B764" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:32:48.477

请注意不同的 GUID 生成方案。在某些情况下，很多字节不是随机的，而是基于 MAC 地址和其他类似系统的东西。这可能意味着您的前 6 个字符将始终相同...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:29:42.893

GUID 不应该是真正可读的。它们用于确保 ID 的唯一性。如果您只使用 GUID 的一部分，官方不能保证它是唯一的。考虑有一对，我有一个 GUID 作为我的 rowId，然后是第二列作为一些可读值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T21:31:04.717

通过截断 GUID，您可能会得到重复。只需使用 GUID。（或者想出另一种更短的唯一 ID 方案）

# cvs - CVS 递归获取特定日期的文件

> ID：15122716
> 
> 赞同：2
> 
> 时间：2013-02-27T21:24:49.973
> 
> 标签：cvs

我希望在特定日期对特定 cvs 存储库目录中的 cvs 文件进行递归获取。

我在以下位置看到特定文件的类似内容：[cvs checkout time series](https://stackoverflow.com/questions/4587679/cvs-checkout-time-series)

我想要一个可以递归方式获取所有文件的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:47:23.827

如果您指定文件夹名称而不是特定文件名，则相同的命令将执行递归获取。

# android - 从android源代码导入文件

> ID：15122719
> 
> 赞同：2
> 
> 时间：2013-02-27T21:25:07.063
> 
> 标签：android, android-source, android-4.2-jelly-bean, android-keystore

我正在研究在我的 VPN android 应用程序中复制 Always-On VPN（在 Android 4.2 中引入）功能。我当然可以将用户引导到设置页面并让他们单击复选框，但我真的很想将它烘焙到我的应用程序中。我浏览了这个对话框的 android 源代码（因为 SDK 中没有公开相应的设置），看起来很简单：

```
 public void onClick(DialogInterface dialog, int which) {
      final int newIndex = listView.getCheckedItemPosition();
      if (mCurrentIndex == newIndex) return;
      if (newIndex == 0) {
            keyStore.delete(Credentials.LOCKDOWN_VPN);

      } else {
            final VpnProfile profile = mProfiles.get(newIndex - 1);
            if (!profile.isValidLockdownProfile()) {
                Toast.makeText(context, R.string.vpn_lockdown_config_error,
                        Toast.LENGTH_LONG).show();
                return;
             }
            keyStore.put(Credentials.LOCKDOWN_VPN, profile.key.getBytes());
      }

      // kick profiles since we changed them
      ConnectivityManager.from(getActivity()).updateLockdownVpn();
   } 
```

不幸的是，这里的密钥库是 android.security.KeyStore 文件，而不是通常的 java.security.KeyStore。因此，我的问题是，在我的应用程序中实现此代码块的最佳方式是什么？我是否可以在没有 root 访问权限的情况下更改我的应用程序中的此设置？有没有办法让我包含 android.security.KeyStore 文件？任何想法都会非常有帮助！

# sql - Groovlet ServletContextListener 无法在销毁时关闭 SQL 连接

> ID：15122721
> 
> 赞同：1
> 
> 时间：2013-02-27T21:25:11.933
> 
> 标签：sql, jdbc, servletcontextlistener, groovlet

我有一个 Groovlet (Groovy Servlet)，它在各个方面都运行良好，除非是时候破坏上下文并部署更新。当我删除 war 文件时，会在我的实现上调用 ServletContextListener.destroy，这反过来又会尝试关闭所有打开的数据库连接。这似乎陷入困境。

我通常在此应用程序中对我的大多数查询使用 sql.firstRow，并且似乎没有任何方法可以关闭底层 PreparedStatement 和 ResultSet（除了方法关闭）。我没有缓存结果，而是使用 BeanUtils.populate 将值复制到目标 bean 中进行处理。

在最后关闭之前，我应该在每个 firstRow 或 eachRow 之后调用其他方法吗？

我在 Java 6 和 Groovy 2.1.1 下运行 Tomcat 6。

# java - Android 应用程序未收到 UDP 数据包

> ID：15122722
> 
> 赞同：2
> 
> 时间：2013-02-27T21:25:14.330
> 
> 标签：java, android, datagram

服务器在PC上：

```
sendData = "server msg here".getBytes();

DatagramPacket sendPacket = new DatagramPacket(sendData,
        sendData.length, ipAddr, portNb);
try {
    sendSock.send(sendPacket);
    Thread.sleep(1000);
    System.out.println("sent msg");

} catch (IOException e) {
    e.printStackTrace();
} catch (InterruptedException e) {
    e.printStackTrace();
} 
```

字段`ipAddr`和`portNb`不为空。在 android 应用程序中运行一个线程：

```
sendSocket = new DatagramSocket();

sendSocket.setSoTimeout(3000);
sendSocket.setReuseAddress(true);

//...

try {
    receivePacket = new DatagramPacket(receiveData, receiveData.length);
    serverSocket.receive(receivePacket);
    System.out.println("droid now is "
            + new String(receivePacket.getData()));

} catch (IOException e) {
    e.printStackTrace();
} 
```

我在两边都使用了 57111 端口，并在同一端口上的 Android 模拟器上将其重定向。

在Android中我已经硬编码了我的电脑的IP地址，在服务器端我尝试了10.0.2.2、10.0.2.15以及使用[此](https://stackoverflow.com/questions/6064510/how-to-get-ip-address-of-the-device)问题第二个答案的方法获得的IP地址。

我在 Android 端为套接字设置了超时，跟踪是：

```
`02-27 23:12:57.907: W/System.err(13993): java.net.SocketTimeoutException: Try again
02-27 23:12:57.907: W/System.err(13993):    at  org.apache.harmony.luni.platform.OSNetworkSystem.recv(Native Method)
02-27 23:12:57.917: W/System.err(13993):    at dalvik.system.BlockGuard$WrappedNetworkSystem.recv(BlockGuard.java:321)
02-27 23:12:57.927: W/System.err(13993):    at org.apache.harmony.luni.net.PlainDatagramSocketImpl.doRecv(PlainDatagramSocketImpl.java:172)
02-27 23:12:57.927: W/System.err(13993):    at org.apache.harmony.luni.net.PlainDatagramSocketImpl.receive(PlainDatagramSocketImpl.java:181)
02-27 23:12:57.927: W/System.err(13993):    at java.net.DatagramSocket.receive(DatagramSocket.java:402)
02-27 23:12:57.938: W/System.err(13993):    at com.example.testinger.ReceiveThread.run(ReceiveThread.java:39)
02-27 23:12:58.987: W/KeyCharacterMap(13993): No keyboard for id 0
02-27 23:12:58.987: W/KeyCharacterMap(13993): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
02-27 23:12:59.377: W/IInputConnectionWrapper(13993): showStatusIcon on inactive InputConnection
02-27 23:13:00.947: W/System.err(13993): java.net.SocketTimeoutException: Try again
02-27 23:13:01.057: W/System.err(13993):    at org.apache.harmony.luni.platform.OSNetworkSystem.recv(Native Method) ` 
```

我也在实际的手机上试过，结果是一样的。在 Android 端，消息没有到达，receive 方法一直等到超时。它有权限

*   android.permission.INTERNET
*   android.permission.ACCESS_NETWORK_STATE
*   android.permission.ACCESS_WIFI_STATE
*   android.permission.CHANGE_WIFI_MULTICAST_STATE

**更新**：我尝试了一个简单的发送接收程序，但也没有用：[客户端](http://pastebin.com/ZBD0z5TN)在显示之前等待来自[服务器的数据包。](http://pastebin.com/rn5gQp7A)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:56:08.920

似乎您的服务器或端口无法从设备访问。您是否在您的机器上运行任何 HTTP 服务器，您可以使用浏览器进行测试。

或者，您可以使用代码 - 请参阅以下 - [Android：如何检查服务器是否可用？](https://stackoverflow.com/questions/1443166/android-how-to-check-if-the-server-is-available) [如何测试远程系统是否可达](https://stackoverflow.com/questions/7685439/how-to-test-if-a-remote-system-is-reachable)

# python - simplejson: 加载西班牙语字符 -- utf-8

> ID：15122725
> 
> 赞同：1
> 
> 时间：2013-02-27T21:25:25.410
> 
> 标签：python, json, internationalization, simplejson

我正在尝试使用 Python 加载一些地理数据`simplejson`。

```
<!-- language: lang-py -->
string = file("prCounties.txt","r").read().decode('utf-8')  
d = simplejson.loads(string) 
```

文本文件有一个波浪号，这个词应该是*Añasco*而不是`u"A\xf1asco"`SimpleJson 不解析的词。来源是[来自github的geoJson文件](https://github.com/johan/world.geo.json/blob/master/countries/USA/PR/An%CC%83asco.geo.json)

```
{"type": "FeatureCollection", "properties": {"kind": "state", "state": "PR"}, "features": [[{"geometry": {"type": "MultiPolygon", "coordinates": [[[[-67.122, 18.3239], [-67.0508, 18.3075], [-67.0398, 18.291], [-67.0837, 18.2527], [-67.122, 18.2417], [-67.1603, 18.2746], [-67.1877, 18.2691], [-67.2261, 18.2965], [-67.1822, 18.3129], [-67.1275, 18.3184]]]]}, "type": "Feature", "properties": {"kind": "county", "name": u"A\xf1asco", "state": "PR"}}]]} 
```

Python给了我错误`simplejson.decoder.JSONDecodeError: Expecting object`

* * *

我用来从 GitHub 加载的脚本来生成`prCounties.txt`. 该变量`counties`是与相关 GEOjson 数据的位置相关的字符串列表。

很明显，这不是保存这些数据的正确方法：

```
<!-- language: lang-py -->
countyGeo = [ ]

for x in counties:      
    d = simplejson.loads(urllib.urlopen("https://raw.github.com/johan/world.geo.json/master/countries/USA/PR/%s" % (x)).read())         
    countyGeo += [ d["features"][0]]
    d["features"][0]=countyGeo  
file("prCounties.txt", "w").write(str(d)) 
```

**编辑**：在最后一行，我`str`用`simplejson.dumps`. 我猜它现在可以正确编码。文件（“prCounties.txt”，“w”）.write（simplejson.dumps（d））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:32:33.423

您的输入文件不是有效的 JSON。`u`字符串前有一个`"A\xf1asco"`，是 Python 语法，不是 JSON 语法。它应该是：

```
"name":"A\xf1asco", 
```

这有效：

```
>>> import json
>>> json.loads(u'{"name":"A\xf1asco"}')
{u'name': u'A\xf1asco'} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:47:05.270

这里有两个问题。第一的：

```
string = file("prCounties.txt","r").read().decode('utf-8') 
```

你为什么要解码？JSON 显式采用 UTF-8 字符串。这是 JSON 定义的一部分。可以处理 Unicode 字符串的事实`simplejson`使它更易于使用，但它通过将它们编码回 UTF-8 来有效地处理它们，所以……为什么不首先保持这种方式呢？

更重要的是，您的数据来自哪里？如果`prCounties.txt`有`u"Añasco"`它，它不是 JSON。您不能仅仅因为它们看起来相似而将某些东西编码为一种标准并解码为完全不同的标准。

例如，如果您这样做了，则必须使用 Python解析器`open('prCounties.txt', 'w').write(repr(my_dict))`将其读回（可能，或者您必须自己编写一些东西）。`repr``ast.literal_eval`

或者，或者，如果您想将数据解析为 JSON，请首先将其编写为 JSON。

* * *

根据您的评论，数据来自[https://raw.github.com/johan/world.geo.json/master/countries/USA/PR](https://raw.github.com/johan/world.geo.json/master/countries/USA/PR) /Añasco.geo.json

该 URL 的原始内容是：

```
{"type":"FeatureCollection","properties":{"kind":"state","state":"PR"},"features":[
{"type":"Feature","properties":{"kind":"county","name":"Añasco","state":"PR"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-67.1220,18.3239],[-67.0508,18.3075],[-67.0398,18.2910],[-67.0837,18.2527],[-67.1220,18.2417],[-67.1603,18.2746],[-67.1877,18.2691],[-67.2261,18.2965],[-67.1822,18.3129],[-67.1275,18.3184]]]]}}
]} 
```

您会注意到那里没有`"name": u"Añasco"`（或`"name": u"A\xf1asco"`，或类似的东西）。你可以通过调用来阅读它`read`——不需要从 UTF-8 或任何东西中解码它——只需将它传递给`simplejson.loads`它就可以了：

```
$ curl -O https://raw.github.com/johan/world.geo.json/master/countries/USA/PR/Añasco.geo.json
$ cp Añasco.geo.json prCounties.txt
$ python
>>> import simplejson
>>> string = file("prCounties.txt","r").read()
>>> d = simplejson.loads(string)
>>> print d
{u'type': u'FeatureCollection', u'properties': {u'kind': u'state', u'state': u'PR'}, u'features': [{u'geometry': {u'type': u'MultiPolygon', u'coordinates': [[[[-67.122, 18.3239], [-67.0508, 18.3075], [-67.0398, 18.291], [-67.0837, 18.2527], [-67.122, 18.2417], [-67.1603, 18.2746], [-67.1877, 18.2691], [-67.2261, 18.2965], [-67.1822, 18.3129], [-67.1275, 18.3184]]]]}, u'type': u'Feature', u'properties': {u'kind': u'county', u'name': u'A\xf1asco', u'state': u'PR'}}]} 
```

看，完全没有错误。

在某个地方，您已经对这些数据进行了一些处理，以将其转换为不是 JSON 的其他东西。我的猜测是，除了做一堆不必要的额外`decode`和`encode`调用之外，你还做了一个`simplejson.loads`，然后尝试重新-你回来了`simplejson.loads`。或者，您可能已经对完整的已编码 JSON 字符串进行了 JSON 编码。不管你做了什么，那个代码，而不是你展示给我们的代码，才是错误所在。`repr``dict``dict`

最简单的解决方法可能是`prCounties.txt`首先正确生成。每行只需要 70 多次下载，可能需要 2 行 bash 或 4 行 Python 才能完成……</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:22:06.680

您必须删除 prCounties.txt 文件中的“u”（如前所述）。然后您可以使用此代码，它可以很好地以 simplejson.loads() 函数可读的格式创建变量“string”：

```
import simplejson
string = file("prCounties.txt", "r").read().decode("string-escape")
string = unicode(string, "latin-1")
simplejson.loads(string) 
```

# html - 如何放置 z-index div？

> ID：15122727
> 
> 赞同：3
> 
> 时间：2013-02-27T21:25:39.060
> 
> 标签：html, css, position, z-index

我有一个固定宽度为 960px 的主包装器。在顶部和最右侧有一个登录按钮。通过按下这个按钮，它将在主包装器的正下方和前面打开一个 div 层。因此我使用 z-index： 1\. 问题是我不知道如何根据主包装而不是浏览器窗口宽度设置固定位置。现在在设置左/右位置时，将根据整个浏览器窗口的宽度放置 div。在分辨率较大的情况下，主包装器由 0 auto 放置。

举个例子：

代码：

```
#main {
    width:300px;
    height: 500px;
    background-color: #f23;
    margin: 0 auto;
}
#zindex{
    font-size: 11px;
    width: 50px;
    height: 50px;
    background-color: #dedede;
    position: absolute;
    right: 0;--> will place the div depending from the browser window and not main
} 
```

[例子](http://jsfiddle.net/RQm5b/)

如果有人能告诉我如何解决这个问题，我真的很感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T21:28:25.127

```
#main {
    position:relative
} 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:29:27.187

```
#main {
    width:300px;
    height: 500px;
    background-color: #f23;
    margin: 0 auto;
    position: relative;

} 
```

`position:relative`将使任何子元素相对于它定位自己，而不是`body`.

[在halffitz.com](http://www.barelyfitz.com/screencast/html-training/css/positioning/)上有一些关于“职位”如何运作的好例子

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:31:07.697

你只需要给#main div的相对位置。例如：

```
#main { position: relative } 
```

# jquery - 动画高度 - 否则不起作用

> ID：15122728
> 
> 赞同：1
> 
> 时间：2013-02-27T21:25:39.983
> 
> 标签：jquery

只是第一个“其他”不起作用。向下滚动时，topColor div 将从原来的 15 高扩展到 150 高，但当我在顶部附近滚动时不会收缩回 15 高。

```
$(document).ready(function () {
    $(window).scroll(function () {
        if ($(this).scrollTop() > 20) {
            $('#topColor').animate({
                height: "150px"
            });
        } else {
            $('#topColor').animate({
                height: "15px"
            });
        }
        if ($(this).scrollTop() > 300) {
            $("#fixedMenuBar").fadeIn('slow', 'linear');
        } else {
            $("#fixedMenuBar").fadeOut('fast', 'linear');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:37:34.937

您不应该`else`在滚动响应动画中使用，`else if`而是使用更具体的并且`animate`会产生冲突，因为滚动值将始终更改并且 jQuery 不能无限重复相同的动画。

但如果你坚持`animate`试试这个：

```
 var scrollVal = $(this).scrollTop();

    if ( scrollVal < 20 )
      if ( $("#fixedMenuBar").is(':visible') ) {
        $("#fixedMenuBar").fadeOut('fast', 'linear');
      }
      if ( parseInt($('#topColor').css('height')) != 150 ) {
        $('#topColor').animate({ height: "150px" });
      }

    }else if ( scrollVal >= 20 && scrollVal < 300 ) {
      if ( $("#fixedMenuBar").is(':visible') ) {
        $("#fixedMenuBar").fadeOut('fast', 'linear');
      }
      if ( parseInt($('#topColor').css('height')) != 15 ) {
        $('#topColor').animate({ height: "15px" });
      }

    }else if ( scrollVal >= 300 ) {
       if ( !$("#fixedMenuBar").is(':visible') )
        $("#fixedMenuBar").fadeIn('slow', 'linear');
    } 
```

这个答案也应该对您有所帮助：[设置窗口滚动动画的 CSS 值限制](https://stackoverflow.com/questions/11971475/setting-css-value-limits-of-the-window-scrolling-animation/11971912#11971912)

# time - 如何在 Loadrunner 中以毫秒为单位获取当前时间？

> ID：15122732
> 
> 赞同：1
> 
> 时间：2013-02-27T21:25:50.350
> 
> 标签：time, epoch, loadrunner

我正在 Loadrunner 中寻找相当于 Java 的 System.currentTimeMillis() 的东西。我只能找到 lr_save_datetime("%x%X", 0, "now"); 它以日期和时间格式输出，但不是自纪元以来的时间。

在 C 中，time.h 可以提供此功能，但 LR 脚本中的 #include "time.h" 会导致编译错误。time.h 可能依赖于其他 .h 和 .inl 文件。

我得到#error 错误：仅支持 Win32 目标！即使我已经从 Visual Studio C++ 编译器文件夹中复制了它抱怨丢失的所有文件。(C:\Program Files\Microsoft Visual Studio 9.0\VC\include\time.h)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-16T16:16:49.587

另一种方法是使用**lr_save_timestamp**以秒为单位获取时间戳——它比 web_save_timestamp_param 更强大。

我的函数文档：

```
int lr_save_timestamp( const char* tmstampParam, [DIGITS,] LAST ); 
```

**时间戳参数**

存储时间戳的参数名称。

**数字**

可选的。时间戳的位数（整数）。默认值为 13（纪元时间，包括 3 位毫秒精度）。

如果 DIGITS 的值小于 1 或大于 16，则使用默认值

在本例中，保存时间戳并指定 10 位长度。以秒为单位返回纪元时间

```
lr_save_timestamp(“param”, “DIGITS=10″, LAST ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:59:00.390

您可以使用 'time()' 函数像 UNIX 样式格式一样输出自 1970 年 1 月 1 日以来的秒数：

```
long t;  // create the variable

// output the seconds to the log
lr_output_message("seconds since 01/01/1970 : %d", 
                   time(t) ); // populate the variable
                              // with the current seconds count 
------------------------------------------------------------------
Output: Action.c(11): time : 1362080852 
```

如果您正在寻找当前毫秒，您可以在 LoadRunner 中通过在参数列表中创建一个新的“日期/时间”参数并使用格式代码“%S.000”来获取它。一旦到位，就这样称呼它：

`lr_eval_string("{datetime_param_name}");`

例如，如果您在日期/时间参数格式字段中输入：
%H%M%S.000

...对于您得到的当前小时、分钟、秒和毫秒...
133808.132

由于某种原因，格式代码“%S.000”在日期/时间参数列表中有效，但不适用于 lr_save_datetime() 函数。如果你在函数上使用相同的代码，你会得到：
133808.000

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T13:28:23.550

您可以使用 ftime 实用程序功能。它接受指向*timeb*结构的指针并用当前时间值填充它。

*timeb*结构定义如下：

```
struct timeb {
   time_t time; //seconds since epoch
   unsigned short millis; //milliseconds since time field
   short timezone;
   short daytimesaveflag;
} 
```

根据 LR 函数参考使用 ftime 函数需要定义 timeb 结构（**不包括 time.h**）

```
 struct timeb {
   long time; //seconds since epoch
   unsigned short millis; //milliseconds since time field
   short timezone;
   short daytimesaveflag;
} timestruct;
long millisSinceEpoch=0 
ftime(&timestruct);
millisSinceEpoch=timestruct.time_t*1000+timestruct.millis; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T20:40:53.490

web_save_timestamp_param(); 返回自纪元以来的 13 位毫秒精度时间。

LoadRunner 不将 Visual C/C++ 用于 C 运行时引擎。它使用轻量级跨平台 C 编译器 LCC。因此，如果您需要使用其他库进行扩展，我推荐 LCC 附带的库。有关 LCC 的更多信息，请参阅 [弗吉尼亚大学计算机科学系网站 LCC for Windows](http://www.cs.virginia.edu/~lcc-win32/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-06T12:18:11.617

在参数化下选择日期和时间参数类型，我们有这么多格式。检查一次....我希望它可以解决您的问题而无需任何编码工作

# twitter-bootstrap - grails google.visualization.Map 调整大小事件

> ID：15122737
> 
> 赞同：1
> 
> 时间：2013-02-27T21:26:00.870
> 
> 标签：twitter-bootstrap, google-visualization

我正在努力寻找解决此问题的方法：

我有最新的 twitter bootstrap 插件和 google 可视化插件，但我无法使 google 可视化插件的地图包正常工作。确实显示的地图只是部分地图，只显示了地图的一小部分，其余部分显示为灰色。我尝试使用“最大宽度：无”更改地图图像的 CSS 样式；但它不起作用。当我调整浏览器大小时，地图会调整大小并正确显示。我找到了类似的帖子，但没有适合我的答案。

地图显示在 twitter 引导模式窗口的选项卡中。我确定这与调整大小有关，所以您知道如何触发事件来调整地图大小吗？谷歌可视化地图甚至可能吗？

谢谢

# cocoa-touch - 单个视图上的两个手势识别器？

> ID：15122739
> 
> 赞同：0
> 
> 时间：2013-02-27T21:26:15.910
> 
> 标签：cocoa-touch, uigesturerecognizer

我已经尝试将 a`UIPanGestureRecognizer`和都添加`UILongPresGestureRecognizer`到一个`UIView`中，而第二个似乎没有被使用。

一个视图可以有两个手势吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:50:54.003

是的，您可以在一个视图上拥有多个手势识别器。
在您的情况下，当您点击视图并移动手指时，平移 GR 会触发。当您点击视图并且不移动手指时，长按 GR 会触发。我猜你的长按 GR 失败是因为被识别为平底锅的手指的微小移动。
您可以尝试将`allowableMovement`长按 GR 的属性设置为更高的值，该属性确定手势失败前手指在视图上的最大移动。然后，两个 GR 都应该触发。

# objective-c - 如何在 iOS 6 的 UICollectionView 中实现无限水平和垂直滚动？

> ID：15122743
> 
> 赞同：4
> 
> 时间：2013-02-27T21:26:27.983
> 
> 标签：objective-c, ios6, uiscrollview, uicollectionview, infinite-scroll

我正在尝试`UICollectionView`在 iOS 6 中实现无限的水平和垂直滚动。我已经设法让它工作，但它很慢而且不稳定。

StackOverflow 上也有类似的问题，但其中最深入的问题是遵循 Apple 的 WDC 视频并使用集合而不是滚动来实现。我的设计基于这个和类似问题中的其他评论，但仍然无法让它看起来很流畅。

我基本上是在尝试模仿 HBO GO iPad 应用程序的行为，它显示了一个节目网格，并允许您向任何方向滚动它们，当您到达终点时，它只会将节目包裹起来，让您感觉自己在无限滚动.

我所做的是创建一个自定义布局，将单元格排列`UICollectionView`在网格中。然后我继承了一个`UICollectionView`重写它​​的`layoutSubviews`方法并创建了一个`reecenterIfNecessary`函数，就像 Eliza 的 WDC 视频节目一样。这行得通，我得到了无限的“滚动”，但内容没有改变。

所以我创建了一个指向视图控制器的委托，每当它包装时，我告诉委托移动它的数据源，它确实如此，但它没有反映在 中`UICollectionView`，所以最后一次调用`[self reloadData]`刷新视图，一切都“正常” ”。我得到无限滚动。

但是因为我打电话`reloadData`，延迟很明显，滚动条闪烁（从“内容”被“重新加载”）。这是不可接受的，我不知道如何解决它！

任何帮助表示赞赏。我包含了recenterIfNecessary 函数以防万一。

```
- (void) recenterIfNecessary{

CGPoint currentOffset = [self contentOffset];
CGFloat contentHeight = [self contentSize].height;
CGFloat contentWidth = [self contentSize].width;

//calc center point which would leave same amount of content on both sides
CGFloat centerY = (contentHeight - [self bounds].size.height) / 2.0;
CGFloat centerX = (contentWidth - [self bounds].size.width) / 2.0;

if (currentOffset.x == 0 && currentOffset.y == 0){
    //assume this is first load. Set offset to content center.
    self.contentOffset = CGPointMake(centerX, centerY);
    return;
}

//distance from center is abs of where we are and where we want to be:
CGFloat offsetY = centerY-currentOffset.y;
CGFloat offsetX = centerX-currentOffset.x;

//now we decide if we want to recenter
int deltaX = 0;
int deltaY = 0;
if (fabs(offsetX) > CELL_WIDTH){

    if (offsetX < 0){
        deltaX = -ceil(offsetX / CELL_WIDTH);
    }else{
        deltaX = -floor(offsetX / CELL_WIDTH);
    }
    offsetX += offsetX + (CELL_WIDTH * deltaX);
    self.contentOffset = CGPointMake(centerX, currentOffset.y);
}
if (fabs(offsetY) > CELL_HEIGHT){

    if (offsetY < 0){
        deltaY = -ceil(offsetY / CELL_HEIGHT);
    }else{
        deltaY = -floor(offsetY / CELL_HEIGHT);
    }

    offsetY += offsetY + (CELL_HEIGHT * deltaY);

    self.contentOffset = CGPointMake(currentOffset.x, centerY);

}
if (fabs(offsetX) > CELL_WIDTH || fabs(offsetY) > CELL_HEIGHT){
    //move subviews to reflect scrolling
    for (UIView *subview in self.subviews) {
        CGPoint center = subview.center;
        center.x += offsetX;
        center.y += offsetY;
        subview.center = center;
    }

    if ([self.infiniteDataModelDelegate conformsToProtocol:@protocol(InfiniteDataModelProtocol)]){
        //moves the data model to reflect "scrolling"
        [self.infiniteDataModelDelegate contentDidChangeModelDeltaX:deltaX deltaY:deltaY];
    }
    [self reloadData];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T02:16:31.423

我已经建立了一个库，可以在各个方向提供无限滚动的视图。当用户滚动时，框架会布置图块并让代理知道，以便它可以设置图块的演示文稿。至于性能，该框架没有引入延迟：全 60 fps。

带有在无限滚动墙上显示 Flickr 图像的示例应用程序的框架在这​​里：[https](https://github.com/vovagalchenko/scroll-for-days) ://github.com/vovagalchenko/scroll-for-days 。此外，这里是示例应用程序的视频：[https ://cloud.box.com/s/d6bgvlot175au5a3jeh5](https://cloud.box.com/s/d6bgvlot175au5a3jeh5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T22:21:42.943

你试过这种方法吗？

```
-(void)collectionView:(UICollectionView *)collectionView didEndDisplayingCell:(UICollectionViewCell *)cell forItemAtIndexPath:(NSIndexPath *)indexPath{
    if ([self.products count] > 8 && indexPath.row == [self.products count] - 8) {
        [self loadMoreItems];
        [self.collectionView reloadData];

    }
} 
```

# android - android活动线程settext错误

> ID：15122746
> 
> 赞同：1
> 
> 时间：2013-02-27T21:26:40.103
> 
> 标签：android, settext

```
02-27 22:53:13.047: E/AndroidRuntime(11744): FATAL EXCEPTION: main
02-27 22:53:13.047: E/AndroidRuntime(11744): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.itcuties.android.reader/com.itcuties.android.reader.ItemDescriptionActivity}: java.lang.NullPointerException
02-27 22:53:13.047: E/AndroidRuntime(11744):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at android.os.Looper.loop(Looper.java:137)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at android.app.ActivityThread.main(ActivityThread.java:5041)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at java.lang.reflect.Method.invokeNative(Native Method)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at java.lang.reflect.Method.invoke(Method.java:511)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at dalvik.system.NativeStart.main(Native Method)
02-27 22:53:13.047: E/AndroidRuntime(11744): Caused by: java.lang.NullPointerException
02-27 22:53:13.047: E/AndroidRuntime(11744):    at com.itcuties.android.reader.ItemDescriptionActivity.onCreate(ItemDescriptionActivity.java:18)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at android.app.Activity.performCreate(Activity.java:5104)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-27 22:53:13.047: E/AndroidRuntime(11744):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-27 22:53:13.047: E/AndroidRuntime(11744):    ... 11 more 
```

和**ItemDescriptionActivity.java**

```
package com.itcuties.android.reader;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import com.itcuties.android.reader.R;

public class ItemDescriptionActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.item);

        Bundle bundle = getIntent().getExtras();
        String item_description = bundle.getString("description");

        TextView desc = (TextView) findViewById(R.layout.item);
        desc.setText(item_description);
    }
} 
```

应用程序正在获取 rss 数据，在列表视图中显示标题。我正在尝试在点击时添加显示描述，但点击时应用程序崩溃。什么会导致这些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:27:54.550

你需要传递一个`id`to `findViewById()`，也许你打算使用`findViewById(R.id.item);`. 如果您*仍然*收到相同的 LogCat 错误，请确保布局`item.xml`实际上有一个带有 id: 的 TextView `@+id/item`。

此外，并非每个 Activity 都以 Intent 启动，并且并非每个 Intent 都有额外内容，您应该确保`null`在使用它们之前没有这些值。

* * *

**添加另一个 RSS 值**

让我们将链接与描述一起传递：

```
public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {   
    Intent intent = new Intent(activity, ItemDescriptionActivity.class);

    RSSItem item = listItems.get(pos);
    intent.putExtra("description", item.getDescription());
    intent.putExtra("link", item.getLink());
    activity.startActivity(intent);
} 
```

接下来我们将在里面创建一个新的类变量`ItemDescriptionActivity`：

```
String item_link; 
```

最后设置 Button 以在网页中打开链接：

```
item_link = bundle.getString("link");
Button link = (Button) findViewById(R.id.button1);
link.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View view) {
        Intent browse = new Intent(Intent.ACTION_VIEW, Uri.parse(item_link));
        startActivity(browse);
    }
} 
```

# python - 优化 Django：嵌套查询与关系查找

> ID：15122750
> 
> 赞同：5
> 
> 时间：2013-02-27T21:27:05.037
> 
> 标签：python, django, optimization

我有一个使用嵌套 ORM 查询的遗留代码，它生成带有 JOIN 的 SQL SELECT 查询，以及还包含 SELECT 和 JOIN 的条件。执行此查询需要大量时间。顺便说一句，当我在原始 SQL 中执行此查询时`Django_ORM_query.query`，它会在合理的时间内执行。

在这种情况下优化的最佳实践是什么？
如果我将使用`ManyToMany`和`ForeignKey`关系，查询会执行得更快吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T22:21:06.897

Django 中的性能问题通常是由循环中的跟随关系引起的，这会导致多个数据库查询。如果您安装了[django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)，您可以检查您正在执行的查询数量并找出需要优化的查询。调试工具栏还向您显示每个查询的时间，这对于优化 django 至关重要，如果您没有安装或没有使用它，您会错过很多。

您通常会使用[select_related()](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)或[prefetch_related()](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)来解决跟随关系的问题。

**一个页面通常最多**应该有20-30 个查询，如果再多的话，它会严重影响性能。大多数页面应该只有 5-10 个查询。您希望减少查询的数量，因为往返是数据库性能的第一杀手。一般来说，一个大查询比 100 个小查询快。

数据库性能的第二大杀手是很少见的问题，尽管它有时是由于减少查询数量的技术而出现的。您的查询可能只是太大了，如果是这种情况，您应该使用 defer() 或 only() 这样您就不会加载您知道不会使用的大字段。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T21:29:53.313

如有疑问，请使用[原始](https://docs.djangoproject.com/en/dev/topics/db/sql/#performing-raw-queries)SQL。这是 Django 世界中完全有效的优化。

# c# - ThreadPool.QueueUserWorkItem 和 Parallel.ForEach 的区别？

> ID：15122756
> 
> 赞同：23
> 
> 时间：2013-02-27T21:27:31.337
> 
> 标签：c#, multithreading, windows-services, parallel.foreach, queueuserworkitem

以下两种方法的主要区别是什么：

**ThreadPool.QueueUserWorkItem**

```
 Clients objClient = new Clients();
    List<Clients> objClientList = Clients.GetClientList();

    foreach (var list in objClientList)
    {
        ThreadPool.QueueUserWorkItem(new WaitCallback(SendFilesToClient), list);
    } 
```

**System.Threading.Tasks.Parallel ForEach**

```
 Clients objClient = new Clients();
    List<Clients> objClientList = Clients.GetClientList();

    Parallel.ForEach<Clients>(objClientList, list =>
    {
        SendFilesToClient(list);
    }); 
```

我是多线程的新手，想知道每种情况下会发生什么（就执行过程而言）每种方法的多线程级别是多少？帮助我可视化这两个过程。

***SendFilesToClient：***从数据库中获取数据，转换为 Excel 并将 Excel 文件发送到相应的客户端。

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-27T21:30:29.507

主要区别在于功能。 `Parallel.ForEach`将阻塞（按设计），因此在处理完所有对象之前它不会返回。您的`foreach`排队线程池线程工作会将工作推送到后台线程，而不是阻塞。

此外，该`Parallel.ForEach`版本还有另一个主要优势 - 未处理的异常将被推回此处的调用站点，而不是在 ThreadPool 线程上未处理。

一般来说，`Parallel.ForEach`效率会更高。这两个选项都使用 ThreadPool，但`Parallel.ForEach`执行智能分区以防止线程过多并减少调度程序所需的开销。单个任务（将映射到 ThreadPool 线程）被重用，并有效地“池化”以降低开销，特别是如果`SendFilesToClient`是快速操作（在这种情况下不会是真的）。

请注意，作为第三种选择，您还可以使用 PLINQ：

```
objClientList.AsParallel().ForAll(SendFilesToClient); 
```

`Parallel.ForEach`这在性能和功能方面与该方法非常相似。

# c# - 如何释放 Texture2D 数据/内存？XNA

> ID：15122760
> 
> 赞同：1
> 
> 时间：2013-02-27T21:27:41.773
> 
> 标签：c#, memory-leaks, xna-4.0

我正在将一个 Texture2D 绘制到屏幕上。此纹理以空白（完全透明）800*350 纹理开始。此纹理从 LoadContent 加载到两个不同的纹理，即空白纹理和填充纹理。然后我在更新方法中将像素绘制到填充纹理。用精灵批处理绘制填充的纹理，并重复该过程。

fillTexture 在每次更新调用开始时“更新”，以消除那里的像素，因此可以重新填充。我发现更新纹理根本没有正确摆脱旧数据，问题就从这里开始了。首先，我尝试在每次调用开始时将filledTexture = 设置为blankTexture，但这仍然保留了上一次调用的数据。然后我尝试了以下方法：

```
 public void LoadContent(graphicsDeviceManager graphics, ContentManager content)
    {
        //some code

        blankTexture = content.Load<Texture2D>("blank");
        filledTexture = content.Load<Texture2D>("blank");

        //some more code
    }

   public void Update()
   {       
        filledMap = new Texture2D(graphicsDevice.GraphicsDevice, blankMap.Width, blankMap.Height);

        //some code that messed around with the pixel locations
        Color[] color = new Color[1];
        color[0] = someNewColor;
        //some code that set the new position of the pixel

        //where R is a 1x1 rectangle with some location
        //this sets one pixel of the filledMap at a time at R.Location
        filledMap.SetData(0, R, color, 0, 1);

   }

   public void Draw(SpriteBatch batch)
   {
         batch.Draw(filledMap);
   } 
```

现在，这些方法都可以正常工作。除了每 20 秒左右，帧率会下降大约 20 到 30 点，然后恢复正常。我看不出这是什么原因，因为所有代码路径都在不断地运行，像素数以恒定的速率上升并保持在那里，所以帧丢失不会那么不一致。

I opened up task manager, looked at the physical memory, aaaand it turned out the RAM was filling up and dumping itself every 20 seconds or so. After commenting out the line of code that set the filledMap to a new Texture2D at the start of each update, the memory leak was gone (about 1.5 gigs were filled and dumped every 20 seconds). So I need some ideas on how to clear up the memory properly! Using texture.SetData was too frame rate costly (it would drop to about 2 FPS quickly), so I guess that method is out. Any ideas?

Thanks for the help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:35:39.170

Just a suggestion.

The `Texture2D` ([MSDN](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.texture2d_members.aspx)) class implements `IDisposable`, so you could run the `Dispose` method on the texture when you don't need it anymore. That will free any unmanaged resources used by the texture and will probably free the memory.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:41:17.803

Try adding `filledMap.Dispose()` at the end of the Update method.

# xaml - 如何将 html 绑定到 WebView

> ID：15122763
> 
> 赞同：1
> 
> 时间：2013-02-27T21:27:58.857
> 
> 标签：xaml, binding, windows-8

我正在搜索如何在 webview 中绑定 html，我发现了这个：

```
public static class WebBrowserHelper
{

public static readonly DependencyProperty HtmlProperty = DependencyProperty.RegisterAttached(
    "Html", typeof(string), typeof(WebBrowserHelper), new PropertyMetadata(null, OnHtmlChanged));

public static string GetHtml(DependencyObject dependencyObject)
{
    return (string)dependencyObject.GetValue(HtmlProperty);
}

public static void SetHtml(DependencyObject dependencyObject, string value)
{
    dependencyObject.SetValue(HtmlProperty, value);
}

private static void OnHtmlChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    var browser = d as WebView;

    if(browser == null)
        return;

    var html = e.NewValue.ToString();

    browser.NavigateToString(html);
} 
```

}

xamls 代码应该是这样的

```
<WebView Grid.Column="1" Height="628" Margin="10,0" VerticalAlignment="Top" cxi:WebBrowserHelper.Html="{Binding Question.Body}" /> 
```

但我无法在 xaml 中访问此属性，我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:03:36.990

我看到您正在按照[此处](http://compiledexperience.com/blog/posts/binding-html-to-the-web-browser-control)列出的示例进行操作。

如果没有看到完整的 XAML 列表，我猜你没有**cxi**命名空间的命名空间声明。您可能从页面复制代码并将其粘贴到您自己的类中，该类位于您自己的命名空间中。您需要确保为此类所在的名称空间定义了名称空间前缀，然后才能使用它。

假设您在“MyStuff”命名空间中定义了**WebBrowserHelper 。**你会使用：

```
xmlns:ms="using MyStuff" 
```

在您的 xaml 文件的顶部。然后稍后您将使用

```
ms:WebBrowserHelper.Html 
```

因此，您将使用**ms**前缀而不是**cxi**前缀。

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

# c++ - 自定义迭代器上的前缀和后缀 ++ 做同样的事情

> ID：15122764
> 
> 赞同：3
> 
> 时间：2013-02-27T21:28:10.570
> 
> 标签：c++, iterator, iteration

首先，我对 C++ 相当陌生，所以如果这是初学者编码错误，那么我很抱歉。

我目前正在为我在学校得到的家庭作业准备一个绘图课。我应该能够将边存储在集合、数组和链表中。由于我在单独的课程中完成了所有这些工作，因此我现在正试图通过模板使它们全部一起工作。对ie来说一切正常。std::set，但是当我使用我自己的链表实现时，它会以某种方式失败 - 看起来我的迭代器在某个地方搞砸了，并且它们上的前缀和后缀运算符都会导致相同的行为（在 for 循环中）。我还要补充一点，我没有使用 std::list 因为我应该自己实现链表。

我当前的迭代器实现：

```
template<typename T>
class Iterator{
    public: node<T>* pointer;
    public:
        Iterator(): pointer(0){}
        Iterator(node<T>* _pointer): pointer(_pointer){}

        Iterator<T> operator++()    { pointer = pointer->next; }
        Iterator<T> operator++(int) { pointer = pointer->next; }

        bool operator!=(Iterator<T> rval){ return !(pointer == rval.pointer); }
        bool operator==(Iterator<T> rval){ return (pointer == rval.pointer); }

        node<T>* operator()(){ return pointer; }

        T operator*(){ return pointer->data; }

}; 
```

单链表节点：

```
template <typename T>
struct node{
    node(): next(0){}
    node(T val): data(val), next(0){}
    node(node<T>* _next): data(0), next(_next){}
    node(T val, node<T>* _next): data(val), next(_next){}

    T data;
    node<T>* next;
}; 
```

以及我的列表类如何实现 begin() 和 end()：

```
typedef Iterator<T> iterator;
iterator  begin()   { return iterator(new node<T>(b)); }
iterator  end()     { return iterator(); } 
```

注意`b`指向链表中的第一个元素

最后是我如何访问元素（这是在包含列表的不同类中）：

```
void tree_recurse_f(int node, std::ofstream* file, int level = 0){
   [some output code here]
   typename T::iterator it;
   for (it = Database[node].first.begin(); it != Database[node].first.end(); ++it){
      tree_recurse_f(*it, file, (level+1));
   }
} 
```

`Database`是一个`std::map<int,std::pair<>>`并且`.first`指向由`T`(set, list or vector)指定的类型

现在解决问题：

1.  不知何故，对于 list' 的当前实现`begin()`，它指向输出函数中的一个空节点（++it 和 it++ 产生相同的结果）
2.  更改`begin()`to`return iterator(b)`似乎消除了 for 循环中的错误，尽管 ++it 和 it++ 都导致相同的事情
3.  我已经设法通过仅测试列表类来发现这两个错误 - 如果我将它实现到图形类中，它会在输出函数中进入一个永无止境的循环（*它总是指向 0 并且似乎不会随着 + +它）

对我来说，迭代器看起来像是一些奇怪的东西（尤其是它单独工作的事实，但在另一个类中却没有）

[// 如果有人好奇，我会大致遵循http://www.cplusplus.com/articles/Lw6AC542/](http://www.cplusplus.com/articles/Lw6AC542/)上的链表教程

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T21:36:49.930

您的前缀和后缀运算符执行相同的操作，因为您将它们定义为执行相同的操作：

```
Iterator<T> operator++()    { pointer = pointer->next; }
Iterator<T> operator++(int) { pointer = pointer->next; } 
```

代码是相同的，但最重要的是，它具有**Undefined Behavior**，因为您的函数应该返回一个类型的值`Iterator<T>`，相反，它们什么也不返回。根据 C++11 标准的第 6.6.3/2 段：

> [...] 从函数末尾流出相当于没有值的返回；这会导致值返回函数中的未定义行为。

您应该将前缀迭代器更改为如下内容：

```
Iterator<T> operator++() 
{ 
    pointer = pointer->next; 
    return *this;
} 
```

你的后缀迭代器变成这样的：

```
Iterator<T> operator++(int) 
{ 
    node<T>* previous = pointer;
    pointer = pointer->next; 
    return Iterator<T>(previous);
} 
```

另外，如果我正确理解您的设计，我真的认为您不应该这样做：

```
iterator begin() { return iterator(new node<T>(b)); } 
```

我宁愿这样做：

```
iterator begin() { return iterator(b); } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:37:29.537

这里的`operator++`实现没有`return`声明。返回值是前增量和后增量之间的关键区别。Pre-increment 接受一个迭代器，递增它，并返回新的迭代器值。它通常通过引用返回，因为原始迭代器与返回值相同。后增量获取一个迭代器，将其松鼠，增加原始迭代器，并返回保存的副本。这通常按值返回，因为它返回的迭代器与其应用的迭代器不同。所以更改签名以匹配这些：

```
Iterator<T>& operator++();
Iterator<T> operator++(int); 
```

并更改实现以匹配我所描述的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:35:59.040

您的前缀和后缀`++`运算符实际上并没有返回任何内容。我很惊讶你的编译器没有抱怨。

前缀`++`运算符应该只返回`*this`. 后缀`++`运算符应在修改之前创建一个临时副本，`*this`然后返回该副本。

# html - XPath 选择所有文本内容 除了特定标签 我搜索并尝试了几个解决这个问题的方法，但没有一个有效：我有这个 HTML

##### Descrição completa

Sala de e 问问题 问问题 2013-02-27T21:28:16.863 17113 次 This question shows research effort; it is useful and clear 9 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我搜索并尝试了几个解决这个问题的方法，但没有一个有效：我有这个 HTML

##### Descrição completa

Sala de estar/jantar,2 vagas de garagem cobertas.

##### Valores

Venda: R$ 600.000,00
Condomínio: R$ 660,00
并且想通过 XPath 仅提取第一个 div class="detalhescolunadados_blocos" 中不是 h5 标记的文本内容。 我试过了：//div[@class='detalhescolunadados_blocos']/[1]/*[not(self::h5)] 为了更直接地回答这个问题，使用数组而不是标量列表执行查询的方法只是将数组传递给它。 $sth->execute(@params)会工作得很好。 if ($x) {$extraFields .= ' , X'; $extraValues = ',? '; @params = (99); } if ($y) {$extraFields .= ' , Y, Z'; $extraValues = ',?, ? '; @params = (88, 77); } my $theBasicQuery = "INSERT INTO sometable (A, B, $extraFields) VALUES (?, ? $extraValues)"; $sth = $dbh->prepare($theBasicQuery) or error $sth->execute(1,2, @params); htmlxpathsiblings 4 3 回答 3 This answer is useful 12 试试下面的 XPath 表达式： //div[@class='detalhescolunadados_blocos'][1]//text()[not(ancestor::h5)] 这将返回： $ xmllint --html --shell so.html / > xpath //div[@class='detalhescolunadados_blocos'][1]//text()[not(ancestor::h5)] Object is a Node Set : Set contains 2 nodes: 1 TEXT content= 2 TEXT content= Sala de estar/jantar,2 vagas de gar... 于 2013-02-27T22:01:55.193 回答 This answer is useful 0 在我看来，这可行： //div[@class="detalhescolunadados_blocos"]/text() 于 2013-02-27T21:59:33.557 回答 This answer is useful 0 尝试这样做： //div[@class="detalhes_colunadados"]/div/text() 于 2013-02-27T22:01:31.650 回答 Related 2 beanstalkd - 如果队列很大并且需要一段时间来处理，如何将就绪队列中的 beanstalkd 作业移到前面？ 1 java - How to make a string 'invokable' then convert it to integer (Android) 2 c++ - c++排序算法持续时间 2 javascript - 如何使用 JavaScript 将文本从一个字段复制到另一个字段？ 3 c++ - 如何引用 C++ 中的函数？ 1 regex - 正则表达式从字符串中提取前三个字符 1 html - 尽管有内容，但缩小表格单元格的高度 2 java - 漂亮的 GUI 控件阻止我的应用程序的其余部分呈现 2 jquery - 具有溢出的 Div：隐藏、边界半径和画布作为子项。取决于尺寸画布的溢出错误 1 ruby-on-rails - cloudfoundry worker 是与服务器相同的应用程序实例 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15122767
> 
> 赞同：9
> 
> 时间：
> 
> 标签：html, xpath, siblings

我搜索并尝试了几个解决这个问题的方法，但没有一个有效：我有这个 HTML

```
<div class="detalhes_colunadados">
   <div class="detalhescolunadados_blocos">
     <h5>Descrição completa</h5>
    Sala de estar/jantar,2 vagas de garagem cobertas.<br>
    </div>
    <div class="detalhescolunadados_blocos">
      <h5>Valores</h5>
            Venda: R$ 600.000,00<br>
          Condomínio: R$ 660,00<br>
    </div>
</div> 
```

并且想通过 XPath 仅提取第一个 div class="detalhescolunadados_blocos" 中不是 h5 标记的文本内容。

我试过了：//div[@class='detalhescolunadados_blocos']/[1]/*[not(self::h5)]

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T22:01:55.193

试试下面的 XPath 表达式：

```
//div[@class='detalhescolunadados_blocos'][1]//text()[not(ancestor::h5)] 
```

这将返回：

```
$ xmllint --html --shell so.html
/ > xpath //div[@class='detalhescolunadados_blocos'][1]//text()[not(ancestor::h5)]    
Object is a Node Set :
Set contains 2 nodes:
1  TEXT
    content=      
2  TEXT
    content=     Sala de estar/jantar,2 vagas de gar... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:59:33.557

在我看来，这可行：

```
//div[@class="detalhescolunadados_blocos"]/text() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:01:31.650

尝试这样做：

```
//div[@class="detalhes_colunadados"]/div/text() 
```

# javascript - 显示来自数据文本属性的数据

> ID：15122796
> 
> 赞同：0
> 
> 时间：2013-02-27T21:29:31.507
> 
> 标签：javascript, jquery, jquery-ui, css, javascript-events

我正在尝试在立方体下方显示一个文本....当我独自在小提琴中工作时，代码工作正常....但是当我把它放在我的项目中时它不起作用....你能告诉我如何显示**data-text="Cube1"**值.....

工作代码[http://jsfiddle.net/PKwDp/4/](http://jsfiddle.net/PKwDp/4/)

不工作代码[http://jsfiddle.net/rajkumart08/EDKkg/1/](http://jsfiddle.net/rajkumart08/EDKkg/1/)

```
 $('document').ready(function () {
            window.setTimeout(function () {
                $('.cubeCell').each(function () {
                    var htmlText = $(this).attr('data-text');
                    $(this).append('<div class="cubeTextStyle">'+htmlText+'</div>');
                });
            }, 600);

        });

<div  data-text="Cube1" data-caption="&lt;a style='margin-left: 92px; font-size: 18px; color: grey;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/inventoryControl.png">testing</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:32:18.540

我相信您使用这样的数据属性：

```
$(this).data('text').val() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:35:00.240

您的（非工作）示例中的问题是具有该`data-text`属性的元素没有`cubeCell`类。

这是您在 jsFiddle 中的 HTML：

```
<div  data-text="Cube1" data-caption="&lt;a style='margin-left: 92px; font-size: 18px; color: grey;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/inventoryControl.png">testing</div> 
```

编辑：

更新到 jsFiddle 后，现在可以正确添加文本。但是，您看不到它，因为它隐藏在立方体本身的后面。但现在这是一个 CSS 问题，因为您的 CSS 与工作示例完全不同。

编辑2：

您缺少`div.cubeTextStyle`. 您的工作示例如下：

```
div.cubeTextStyle {
  position: relative;
  top: 105px;
  background: none !important;
  color: #333 !important;
  border: none !important;
  box-shadow: none !important;
  -webkit-box-shadow: none !important;
} 
```

# tridion - 从 Razor 模板获取二进制文件的全名，包括扩展名

> ID：15122799
> 
> 赞同：3
> 
> 时间：2013-02-27T21:29:36.017
> 
> 标签：tridion

我正在使用我在 SO（[此处](https://stackoverflow.com/questions/10210636/publishing-pdfs-when-using-tridion-razor-templates)）上找到的一种技术从 Razor 模板发布二进制文件。除了一个小缺点外，它工作得很好。

我想用上传到 Tridion 的文件名推送一个项目。我可以使用大部分内容的标题，但我如何确定文件扩展名？在这种情况下，我需要知道模板中文件的名称，因为我将使用它进行一些 javascript 操作。

同样，一切正常，但我想做的不仅仅是连接“.jpg”。看起来我可以解析 WebDavUrl 属性。那是我唯一的选择吗？

```
@{ 
  var item1 = TridionHelper.Package.CreateMultimediaItem(@Fields.closed.ID);
  TridionHelper.Package.PushItem(@Fields.closed.Title + ".jpg", item1);

  string closed = @Publication.MultimediaUrl + "/"+(@Fields.closed.Title) + ".jpg";

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T00:04:59.967

您可以从 Razor Mediator 完全访问 TOM.NET API，因此您还可以从组件的 BinaryContent 字段访问文件名。假设 @Fields.closed 是一个多媒体组件链接，您可以这样做：

```
@Fields.closed.TridionObject.BinaryContent.Filename 
```

请注意，这将是上传的原始路径/文件名。您还可以访问 System.IO.Path，因此您可以：

```
@System.IO.Path.GetFileName(Fields.closed.TridionObject.BinaryContent.Filename)
@System.IO.Path.GetExtension(Fields.closed.TridionObject.BinaryContent.Filename)
@System.IO.Path.GetFileNameWithoutExtensions(Fields.closed.TridionObject.BinaryContent.Filename) 
```

如果您有一个发布二进制文件的自定义 TBB，则必须小心，因为此 TBB 实际上可能会更改已发布的文件名，并且 BinaryContent 的 Filename 属性将仅包含原始上传的路径和文件名。

# objective-c - 无法将填充颜色设置为 CGRect/路径石英

> ID：15122802
> 
> 赞同：-1
> 
> 时间：2013-02-27T21:29:47.557
> 
> 标签：objective-c, core-graphics

我想用颜色制作并填充一个矩形。但我的代码不起作用（没有出现矩形）。请告诉我这段代码有什么问题？

```
- (void)drawRect:(CGRect)rect
{
context = UIGraphicsGetCurrentContext();
CGContextSetRGBFillColor(context, 84, 84, 84, 1);
firstTower = CGRectMake(20, 20, 50, 200);
CGContextDrawPath(context, kCGPathFillStroke);

if (_touchHasBegun)
{
    context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 2.0);
    CGContextSetRGBStrokeColor(context, 0, 34, 102, 1);                    
    CGContextSetRGBFillColor(context, 135, 206, 250, 0.25);
    rectangle = CGRectMake(1, 1, 500, 500);
    CGContextAddArc(context, pointWhereUserClickedX, pointWhereUserClickedY, 50, 0, 2*3.14159265359, YES);
    CGContextDrawPath(context, kCGPathFillStroke);

} 
```

}

如果语句是一个圆圈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:04:02.467

矩形没有出现，因为您没有将它添加到上下文中。您已经创建了 a`CGRect`并将其分配给`firstTower`变量，但您从未告诉上下文有关它的内容。

您可能想要添加

```
CGContextAddRect(context, firstTower); 
```

分配给`firstTower`.

同样，您不会`rectangle`在第二次抽奖时添加值。

# c# - WPF 数据绑定 ObservableCollection 到数据网格

> ID：15122811
> 
> 赞同：7
> 
> 时间：2013-02-27T21:30:12.317
> 
> 标签：c#, wpf, data-binding, datagrid

我正在尝试在其 DataContext 是 T 列表的单独 UserControl 中创建 DataGrid。

在后面的代码中，我创建了一个列表，填充该列表，然后将其发送到 UserControl 的构造函数，在该构造函数上我有我要填充的 DataGrid。

UserControl 类如下。

```
public partial class QuotePreview : UserControl
{
    private static SelectionList  previewList = new SelectionList();

    public SelectionList PreviewList
    {
        get { return previewList; }
    }

    public QuotePreview()
    {
        InitializeComponent();
    }

    public QuotePreview(SelectionList selectedOptions)
    {
        InitializeComponent();

        previewList = selectedOptions;

        QuotePreviewDataGrid.DataContext = previewList;
    }
} 
```

Xaml 看起来像：

```
<DataGrid Name="QuotePreviewDataGrid"
          AutoGenerateColumns="False" 
          ItemsSource="{Binding}">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Model Number" Binding="{Binding ModelNumber}"/>
        <DataGridTextColumn Header="Description" Binding="{Binding Description}"/>
        <DataGridTextColumn Header="List Price per Unit" Binding="{Binding Price}"/>
    </DataGrid.Columns>
</DataGrid> 
```

我也尝试使用设置 ItemSource

```
QuotePreviewDataGrid.ItemsSource = PreviewList; 
```

我还尝试设置数据上下文和 itemsource 以及刷新：

```
QuotePreviewDataGrid.Items.Refresh(); 
```

我在应用程序的其余部分中为列表框设置的数据绑定工作得很好。在列表框中，我将 itemsource 设置为 {Binding} 并将 ListItems 绑定设置为 {Binding Property}。在后面的代码中设置的列表框的数据上下文。

我这里的数据网格是以相同的方式设置的，但由于某种原因，网格内没有显示任何内容。

当我通过调试器并观察信息流时，我可以看到 T 的列表，SelectionsList 正在创建并传递给数据网格所在的用户控件的构造函数。我可以看到 DataContext 确实正在设置并显示列表中的项目，但是当我回到我的应用程序并尝试查看数据网格时，它是空白的。

任何帮助将不胜感激。在过去的一天半里，我一直在努力解决这个问题。谢谢！

**更新**

SelectionList 的设置如下：

```
public class SelectionList : List<Selection>
{
    public List<Selection> availableSelections = new List<Selection>();

    public List<Selection> AvailableSelections
    {
        get { return availableSelections; }
    }
} 
```

然后通过以下方式定义选择：

```
public class Selection : DependencyObject
{
    public bool IsChecked { get; set; }
    public string ModelNumber { get; set; }
    public string Description { get; set; }
    public string Price { get; set; }
} 
```

当应用程序启动时，我构建了一个现有产品的目录（选择）。在不同的选项卡上，每个产品系列一个，产品列表框的数据上下文使用它从目录中获取的可用产品进行初始化。然后等待用户选择哪个产品，与该产品相关的可用选项或子选择被填充到适当的列表框、附件和保修中。

一旦用户选择了他们想要的选项，就会单击一个按钮来预览应该填充上述数据网格的所选项目。

我可以构建所选选项的列表，但是当我尝试设置数据网格的数据上下文时，什么也没有出现。可用选择的列表已构建并设置为适当的数据上下文，就像我尝试对数据网格执行此操作一样，但是数据网格不想显示我的信息。

**更新**

因此，经过更多调试后，我将问题范围缩小了一点。数据绑定正常工作。我认为那里没有真正的问题。但是，我现在遇到的问题是我认为是我的用户控件的 2 个不同实例，但只显示原始版本，而不是更新的副本。

这是该类的副本，其中包含我添加的几行以帮助调试问题。

```
public partial class QuotePreview : UserControl
{
    private SelectionList _selectionList;
    private SelectionList temp;

    public QuotePreview()
    {
        InitializeComponent();
        _selectionList = (SelectionList)this.DataContext;
    }

    private void QuotePreview_Loaded(object sender, RoutedEventArgs e)
    {
        _selectionList.SelectedOptions.Add(
            new Selection
            {
                ModelNumber = "this",
                Description = "really",
                Price = "sucks"
            });
    }

    public QuotePreview(SelectionList selectedOptions)
    {
        InitializeComponent();
        _selectionList = (SelectionList)this.DataContext;

        temp = selectedOptions;

        _selectionList.AddRange(selectedOptions);

        QuotePreview_Loaded();
    }

    private void QuotePreview_Loaded()
    {
        foreach (var options in temp.SelectedOptions)
        {
            _selectionList.SelectedOptions.Add(options);
        }

        QuotePreviewDataGrid.ItemsSource = _selectionList.SelectedOptions;
    }
} 
```

每次单击用户控件/选项卡时都会调用默认构造函数的实现。发生这种情况时，_selectionList 被设置为用户控件的数据上下文，然后是 Loaded Event，它在我的数据网格中添加了一行。

在另一个用户控件中，我选择要添加到数据网格用户控件的选项，单击一个按钮，该按钮创建要添加的选项列表并调用我编写的自定义构造函数。构造函数完成后，它会调用我为狗屎和傻笑创建的自定义 Loaded Event 方法，该方法将选定的选项添加到我的 _selectionList。

现在，一旦我再次单击数据网格用户控件，它就会经历整个默认过程，并添加另一个默认行。

如果我返回一个选项卡并再次说我想要这些选项并返回数据网格，它会再次执行默认过程并添加另一个默认行。

最有趣的是我可以看到两个 selectionLists 的构建，因为我没有清除进程之间的内容。我看到了我要显示的选项的列表构建和默认选项构建的列表构建...

哦，另外，SelectionList 确实实现了 ObservableCollection。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:26:40.273

我终于想出了解决问题的办法。

```
public static class QuotePreview
{
    public static ObservableCollection<PurchasableItem> LineItems { get; private set; }

    static QuotePreview()
    {
        LineItems = new ObservableCollection<PurchasableItem>();
    }

    public static void Add(List<PurchasableItems> selections)
    {
        foreach (var selection in selections)
        {
            LineItems.Add(selection);
        }
    }

    public static void Clear()
    {
        LineItems.Clear();
    }
}

public class QuoteTab : TabItem
{
    public ObservableCollection<PurchasableItem> PreviewItems { get; private set; }

    public QuoteTab()
    {          
        Initialize()

        PreviewItems = QuotePreview.LineItems;

        DataGrid.ItemSource = PreviewItems
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:24:49.063

尝试改变：

```
QuotePreviewDataGrid.DataContext = previewList; 
```

到

```
this.DataContext = previewList; 
```

我的怀疑是`ItemsSource="{Binding}"`您的 xaml 中的 重写了您的构造函数中的 DataContext 代码。

通过将 previewList 更改为整个 UserControl 的 DataContext，DataGrid 的绑定`ItemsSource`可以正确评估。

在旁注中，我将开始研究`ObservableCollection<T>`MVVM 设计模式的使用。您最终可能遇到的一个问题是，`DataGrid`当基础列表更改时您不会更新，使用`ObservableCollection<T>`将解决此问题。

使用 MVVM 设计模式将使您的逻辑和数据（在本例中为您的列表及其加载方式）与物理显示（DataGrid）很好地分离

# symfony - 检查每个请求 Symfony2 的数据库字段

> ID：15122816
> 
> 赞同：0
> 
> 时间：2013-02-27T21:30:39.493
> 
> 标签：symfony

如果用户登录时检查他/她是否在数据库中完成了所有字段（用户字段），我想做什么。

我可以检查他们何时登录这些字段，然后重定向到配置文件视图，但是一旦他们进入配置文件视图，他们仍然可以看到菜单，因此他们可以轻松转到其他选项，并且由于他们已经在登录，我无法再检查它这样。

所以我虽然可能使用控制器事件侦听器我可以检查，所以我检查控制器是否不同于 accountController（具有编辑配置文件的视图），如果不同，我可以检查字段。

这种方法的问题在于 accountController 和其他控制器中，它们是树枝 {%render....%} 再次触发控制器事件并给我无限调用。

什么方法会更好？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:04:59.847

您使用控制器事件 ( `kernel.controller`) 检查字段的想法是正确的。在您的事件处理程序中，您只需要检查请求是否是主请求...

```
use Symfony\Component\HttpKernel\HttpKernel;

class FieldUpdater
{
    /**
     * Updates user's fields
     *
     * @param \Symfony\Component\HttpKernel\Event\FilterControllerEvent $event
     *
     * @return void
     */
     public function onCoreController(FilterControllerEvent $event)
     {
         //if this isn't the main http request, then we aren't interested...
         if (HttpKernel::MASTER_REQUEST !== $event->getRequestType()) {
             return;
         }

         // update fields
      }
 } 
```

这样你就不会在每次调用时都被解雇`{% render ... %}`

# python - 构建 Python 项目的 .deb 失败 - dpkg-buildpackage 正在尝试将文件作为目录删除？

> ID：15122820
> 
> 赞同：0
> 
> 时间：2013-02-27T21:30:53.177
> 
> 标签：python, debian, ubuntu-12.04, deb, dpkg

这是我第二次尝试创建 deb 文件 - 第一次是我使用 FPM 的 C 项目 - 这工作得很好，尽管是一个不可接受的包 - 它工作正常。然而，这是一个 Python 项目 (GNS3)，我更愿意正确地完成它，因为如果我要这样做 - 它也可能是正确的。话虽如此，现在我会接受一个有效的 .deb 文件。

问题：我一直在将 GNS3 修改为一个项目，我需要做的最后一步是将它重新打包成一个 .deb 文件。我知道这是可以做到的，因为它在 Ubuntu 存储库中，但我的研究让我了解到 Debian 的一个叫 Erik Wenzel 的人构建了 deb 并且他不再可用 - 而 GNS3 的开发人员显然专注于 Windows并且没有当前的知识来打包它（“据称”-我最近问过他们但还没有收到回复-如果我这样做了，我会将他们提供的任何信息添加到这个问题中）。

我尝试了各种不同的方法来获取 debian 软件包，但我尝试的最后一种方法似乎最有希望。我用过（来自：[https](https://pypi.python.org/pypi/stdeb) ://pypi.python.org/pypi/stdeb ）：

```
python setup.py --command-packages=stdeb.command bdist_deb 
```

这给了我压缩包，然后尝试：

```
dpkg-buildpackage -rfakeroot -uc -us 
```

这没有用。此输出失败（从末尾截断）：

```
...
dh_python2 -O--buildsystem=python_distutils
dh_usrlocal -O--buildsystem=python_distutils
dh_usrlocal: debian/python-gns3/usr/local/share/examples/gns3/baseconfig.txt is not a directory
dh_usrlocal: debian/python-gns3/usr/local/share/examples/gns3/baseconfig_sw.txt is not a directory
rmdir: failed to remove `debian/python-gns3/usr/local/share/examples/gns3': Directory not empty
dh_usrlocal: rmdir debian/python-gns3/usr/local/share/examples/gns3 returned exit code 1
make: *** [binary] Error 25
dpkg-buildpackage: error: fakeroot debian/rules binary gave error exit status 2 
```

错误是正确的（？！） - 这两个文件不是目录 - 它们是文本文件 - 它们似乎没有任何不寻常的特征：

```
drwxr-xr-x 2 steved swdept 4096 Feb 27 16:57 ./
drwxr-xr-x 3 steved swdept 4096 Feb 27 16:57 ../
-rw-r--r-- 1 steved swdept 3146 Feb 26 15:00 baseconfig_sw.txt
-rw-r--r-- 1 steved swdept 257 Feb 26 15:00 baseconfig.txt 
```

看来 STDEB 正在正确地发挥其作用——但我不能肯定地说。它可能正在做一些导致 dpkg-buildpackage 失败的事情。我希望有人会看到这个然后说，“当然那是行不通的——你需要做 x 和 y，然后它就会建立起来”。或者至少是“试试这个和这个”。

如果我能做到这一点，那么我也可以将知识贡献回 GNS3 项目，这将是很棒的。

任何帮助表示赞赏。

干杯

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-14T08:33:13.313

只需将它放在您的 debian/rules 文件中`override_dh_usrlocal:`，这将阻止 dh_usrlocal 运行，我认为这实际上会导致您出现问题。我遇到了类似的情况，这样做对我有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:59:05.387

不要在`/usr/local`. 如果你想打包一个已经有官方包的新版本的软件，不要尝试从头开始制作一个包，而是修改现有的包。

# android - 变量的值突然被设置为0

> ID：15122828
> 
> 赞同：0
> 
> 时间：2013-02-27T21:31:29.073
> 
> 标签：android, android-activity

我正在做一项活动来衡量一个人进行锻炼需要多长时间，但它有一个我还无法解决的错误......

TrainingFragment 显示用户可以单击的练习列表，然后我的 ExerciseActivity 启动并运行，直到变量“remainingsSets”设置为 0。

当我在任何练习中第一次单击时，一切正常，ExerciseActivity 正常工作，结束返回 TrainingFragment。但是，如果我尝试单击另一个练习，ExerciseActivity 就会关闭。

在我的调试中，我可以看到变量“remainingSets”具有正确的值`remainingSets = getIntent().getIntExtra("remaining_sets", 3)`（这种情况：`if (remainingSets > 0){...}`。

这是我的训练片段：

```
public class TrainingFragment extends Fragment {

private final static int START_EXERCISE = 1;

private Training training;
private String lastItemClicked;
private String[] values;

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    Bundle bundle = getArguments();
    if (bundle != null) {
        training = bundle.getParcelable("training");
    }
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return (ScrollView) inflater.inflate(R.layout.template_exercises, container, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    LinearLayout exercisesContainer = (LinearLayout) getView().findViewById(R.id.exercises);
    LayoutInflater inflater = (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    List<Exercise> exercises = training.getExercises();
    values = new String[exercises.size()];

    if (savedInstanceState != null) {
        values = savedInstanceState.getStringArray("values");
    }

    for (int i = 0; i < exercises.size(); i++) {
        final View exerciseView = inflater.inflate(R.layout.template_exercise, null);

        exerciseView.setTag(String.valueOf(i));

        TextView remainingSets = (TextView) exerciseView.findViewById(R.id.remaining_sets);

        if (savedInstanceState != null) {
            remainingSets.setText(values[i]);
        } else {
            String sets = exercises.get(i).getSets();
            remainingSets.setText(sets);
            values[i] = sets;
        }

        exerciseView.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent(getActivity(), ExerciseActivity.class);
                intent.putExtra("remaining_sets",
                        Integer.valueOf(((TextView) v.findViewById(R.id.remaining_sets)).getText().toString()));

                lastItemClicked = v.getTag().toString();

                startActivityForResult(intent, START_EXERCISE);
            }
        });

        exercisesContainer.addView(exerciseView);
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putStringArray("values", values);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    View view = ((LinearLayout) getView().findViewById(R.id.exercises)).findViewWithTag(lastItemClicked);

    if (requestCode == START_EXERCISE) {
        if (resultCode == Activity.RESULT_OK) { // the exercise had been
                                                // finished.
            ((TextView) view.findViewById(R.id.remaining_sets)).setText("0");

            view.setClickable(false);

            values[Integer.valueOf(lastItemClicked)] = "0";

        } else if (resultCode == Activity.RESULT_CANCELED) {

            String remainingSets = data.getStringExtra("remaining_sets");
            ((TextView) view.findViewById(R.id.remaining_sets)).setText(remainingSets);

            values[Integer.valueOf(lastItemClicked)] = remainingSets;
        }
    }
}
} 
```

我的锻炼活动：

```
public class ExerciseActivity extends Activity {

private Chronometer chronometer;
private TextView timer;
private Button startButton;
private Button endButton;
private int remainingSets;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_exercise);

    ExerciseEvents.addExerciseListener(new PopupExerciseListener());

    chronometer = (Chronometer) findViewById(R.id.exercise_doing_timer);
    timer = (TextView) findViewById(R.id.timer);

    startButton = (Button) findViewById(R.id.start_exercise);
    startButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            ExerciseEvents.onExerciseBegin();
        }
    });

    endButton = (Button) findViewById(R.id.end_exercise);
    endButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            ExerciseEvents.onExerciseRest();
        }
    });
}

@Override
public void onBackPressed() {
    Intent intent = new Intent();
    intent.putExtra("remaining_sets", String.valueOf(remainingSets));
    setResult(RESULT_CANCELED, intent);

    super.onBackPressed();
}

public class PopupExerciseListener implements ExerciseListener {

    public PopupExerciseListener() {
        remainingSets = getIntent().getIntExtra("remaining_sets", 3);
    }

    @Override
    public void onExerciseBegin() {
        if (remainingSets > 0) {
            chronometer.setVisibility(View.VISIBLE);
            timer.setVisibility(View.GONE);

            chronometer.setBase(SystemClock.elapsedRealtime());
            chronometer.start();

            startButton.setVisibility(View.GONE);
            endButton.setVisibility(View.VISIBLE);
        } else {
            ExerciseEvents.onExerciseFinish();
        }
    }

    @Override
    public void onExerciseFinish() {
        setResult(RESULT_OK);

        finish();
    }

    @Override
    public void onExerciseRest() {
        chronometer.setVisibility(View.GONE);
        endButton.setVisibility(View.GONE);
        timer.setVisibility(View.VISIBLE);

        long restTime = getIntent().getLongExtra("time_to_rest", 60) * 1000;
        new CountDownTimer(restTime, 1000) {

            @Override
            public void onTick(long millisUntilFinished) {
                timer.setText(String.valueOf(millisUntilFinished / 1000));
            }

            @Override
            public void onFinish() {
                ExerciseEvents.onExerciseBegin();
            }
        }.start();

        remainingSets--;
    }
}
} 
```

还有我的运动事件：

```
public class ExerciseEvents {

private static LinkedList<ExerciseListener> mExerciseListeners = new LinkedList<ExerciseListener>();

public static void addExerciseListener(ExerciseListener listener) {
    mExerciseListeners.add(listener);
}

public static void removeExerciseListener(String listener) {
    mExerciseListeners.remove(listener);
}

public static void onExerciseBegin() {
    for (ExerciseListener l : mExerciseListeners) {
        l.onExerciseBegin();
    }
}

public static void onExerciseRest() {
    for (ExerciseListener l : mExerciseListeners) {
        l.onExerciseRest();
    }
}

public static void onExerciseFinish() {
    for (ExerciseListener l : mExerciseListeners) {
        l.onExerciseFinish();
    }
}

public static interface ExerciseListener {

    public void onExerciseBegin();

    public void onExerciseRest();

    public void onExerciseFinish();
}
} 
```

谁能给我任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:13:19.500

更新代码后，我发现代码中有很大的内存泄漏：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_exercise);

    ExerciseEvents.addExerciseListener(new PopupExerciseListener());
    ....
} 
```

该调用`ExerciseEvents.addExerciseListener(new PopupExerciseListener())`将一个新的添加`PopupExerciseListener`到静态/全局列表中：`ExcerciseEvents.mExerciseListeners`. 由于该类`PopupExerciseListener`是内部类，因此它隐含地持有对其封闭的 . 的引用`ExcerciseActivity`。`ExcerciseActivity`这意味着您的代码将永远保留每个实例。不好。

这也可以解释你看到的奇怪行为。当其中一个`onExcersizeXXX()`方法被调用时，它将调用链表中的所有 ExcerciseListeners，来自之前屏幕的和当前屏幕的。

在您的 ExcerciseActivity.java 中试试这个：

```
....
ExerciseListener mExerciseListener;
....

@Override
protected void onCreate(Bundle savedInstanceState) {
    ....
    ....
    mExerciseListener = new PopupExerciseListener()
    ExerciseEvents.addExerciseListener(mExerciseListener);
    ....
    ....
}

@Override
protected void onDestroy() {
    ExerciseEvents.removeExerciseListener(mExerciseListener);
    super.onDestroy();
}

.... 
```

在`onDestroy`中，您取消注册您的侦听器，防止内存泄漏并防止对附加到不再存在的活动的 PopupExerciseListeners 进行奇怪的多次回调。

# javascript - 按名称获取 JSON 对象值

> ID：15122829
> 
> 赞同：1
> 
> 时间：2013-02-27T21:31:32.037
> 
> 标签：javascript, jquery, json

我有一个像这样的有效 JSON 对象：

```
{
    "reasons": {
        "options": [
            {
                "value": "",
                "label": "Choose a reason",
                "selected": true,
                "requiresValidation": false
            },
            {
                "value": "small",
                "label": "Too little",
                "selected": false,
                "requiresValidation": false
            },
            {
                "value": "big",
                "label": "Too big",
                "selected": false,
                "requiresValidation": false
            },
            {
                "value": "unsuitable",
                "label": "I don't like it",
                "selected": false,
                "requiresValidation": true
            },
            {
                "value": "other",
                "label": "Other",
                "selected": false,
                "requiresValidation": true
            }
        ]
    }
} 
```

我有一个变量，它存储一个`unsuitable`可用选项的值（例如）`options`。如何检索`requiresValidation`存储在变量中的值的字段值，而不必遍历里面的所有对象值`options`？

例如，如果 var 内容是`other`我想访问`requireValidation`其值为`other`（即`true`）的对象的字段。是否可以？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:41:25.073

您在这里并没有真正处理 JSON，而是在处理 JS 对象。JSON 只是一种发送 JS 对象的格式。

`options`是一个数组。访问它的唯一方法是通过索引，这意味着您必须一次进行一项搜索。有一些函数，例如`indexOf()`将返回数组中值的第一个索引，但是，您有一个对象数组，因此在这种情况下将不起作用。（在内部，它仍在进行搜索）。

```
function getReqVal(val) {
    for (var item in mydata.reasons.options) {
       if(item.value == val) {
           return item.requiresValidation;
       }
    }
}

getReqVal("other"); 
```

需要注意的是，这将返回第一个，所以如果你有多个`other`，你将不会得到它们。

如果选项确实是唯一值，我会将您的对象重新排列为关联数组，键是“值”项，值是具有其余数据的对象：

```
{
    "reasons": {
        "options": {
            "" : {
                "label": "Seleziona una voce",
                "selected": true,
                "requiresValidation": false
            },
            "small" : {
                "label": "Too little",
                "selected": false,
                "requiresValidation": false
            },
            "big" : {
                "label": "Too big",
                "selected": false,
                "requiresValidation": false
            },
            "unsuitable" : {
                "label": "I don't like it",
                "selected": false,
                "requiresValidation": true
            },
            "other" : {
                "label": "Other",
                "selected": false,
                "requiresValidation": true
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:38:20.813

如果您正在（或可能）使用[underscore.js](http://underscorejs.org/)，您可以使用[find](http://underscorejs.org/#find)方法：

```
var item = _.find(myObj.reasons.options, 
                  function(option){ return option.value == 'some value' }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:53:22.340

假设您无法更改 JSON 结构本身（因为您可能是从外部来源获取它的？），您可以按照 Marc B 的建议将其读入您设计的新对象中。理想情况下，这个新对象可以让您使用`value`键索引到您的选项数组。让我们这样做：

```
function MyOptions(optionsJSON) {
    this.original_json = optionsJSON;
    this.length = optionsJSON.reasons.options.length;
    var original_options = optionsJSON.reasons.options;
    for(var i = 0; i < this.length; i++)
       this[original_options[i].value] = original_options[i];
}

var my_opts = new MyOptions(original_JSON);

var item_requiresValidation = my_opts["unsuitable"].requiresValidation;
console.log(item_requiresValidation); // should log "true" 
```

这里的权衡是您的代码将需要遍历整个选项数组一次，但之后您可以使用`value`键索引对象而无需搜索。使用[此 jsfiddle](http://jsfiddle.net/amullins/9JVfd/2)进行验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T21:59:27.670

您可以使用数组过滤器。一些变化：

```
var $reasons = //Your JSON

function checkVal(element, index, array) {

    return (element.value == "other");
}

var filtered = $reasons.reasons.options.filter(checkVal);

alert(filtered[0].requiresValidation); 
```

或者 jQuery grep 可能会在不循环的情况下帮助您使用过滤器：http: [//api.jquery.com/jQuery.grep/](http://api.jquery.com/jQuery.grep/)

# jquery - Jquery：页面加载淡入并移动

> ID：15122839
> 
> 赞同：0
> 
> 时间：2013-02-27T21:32:25.997
> 
> 标签：jquery, html, jquery-animate, fadein

我是 Jquery 的新手，我试图让一个 div 淡入，然后在页面加载时向左移动。我似乎无法弄清楚如何链接它。我可以让它淡入淡出，但之后就不动了。这就是我所拥有的。

```
<script type="text/javascript">

$(document).ready(function(){ 
    $('#PageTitle').fadeIn(5000)
});

</script> 
```

我努力了

```
$(document).ready(function(){ 
    $('#PageTitle').fadeIn(2000);
    $('#PageTitle').animate({"left" : "300px",}, 4000);
}); 
```

和其他几个变体，但似乎无法得到它。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T21:38:08.707

如果`PageTitle`绝对定位，则：

```
$('#PageTitle').fadeIn(5000).animate({"left":"300px"},4000); 
```

[会很好用](http://jsfiddle.net/EZTax/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:36:05.067

你的问题有点含糊，但我会这样链接它

```
$(document).ready(function(){ 
    $('#PageTitle').fadeIn(2000,function(){
       $(this).animate({"left" : "300px"}, 4000);
     });    
}); 
```

一个例子在这里[http://jsfiddle.net/domjgreen/Hx6rX/](http://jsfiddle.net/domjgreen/Hx6rX/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:35:37.467

在 jQuery 中的每个动画上都有一个回调函数。所以你应该尝试：

```
$(document).ready(function(){ 
    $('#PageTitle').fadeIn(2000, function(){
        $('#PageTitle').animate({"left" : "300px",}, 4000);
    });
}); 
```

查看[http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-07T21:01:30.240

你可以使用这个[aos](https://michalsnik.github.io/aos/)包。首先，您必须删除不需要的 CSS 以在您自己的网页中使用。

# android - ADB 无法启动确保插件配置正确

> ID：15122846
> 
> 赞同：5
> 
> 时间：2013-02-27T21:32:50.760
> 
> 标签：android, plugins, adt

我时不时遇到这个问题，它说“ **ADB 服务器没有确认，无法启动守护进程**”。

所以首先，我按照一些说明在 DDMS 中重置了 adb，然后它给了我“ **adb 无法启动，请确保插件配置正确**”。在阅读了一些其他解决方案后，我在任务管理器中杀死了 adb.exe，但 2 秒后它又恢复了活力。

我已经重新启动了我的eclipse和pc几次，仍然没有运气。有谁知道是什么问题？我用的是win8，不知道是不是这个问题...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-05T04:56:23.653

您可以按照以下提到的步骤解决此问题

1.  转到任务管理器并从进程选项卡中杀死**adb.exe**
2.  在 Eclipse 中转到**DDMS->Devices**选项卡并选择选项**Reset adb**。
3.  您的模拟器将上线并可以走得更远。

如果这不起作用，请尝试重新启动 Eclipse 和模拟器，然后再次尝试这些步骤。

# c++ - 搜索集合中项目的一部分

> ID：15122849
> 
> 赞同：1
> 
> 时间：2013-02-27T21:32:58.433
> 
> 标签：c++, key, set, std-pair

有没有办法在集合中搜索项目的一部分？我有一组对`std::set< std::pair<double, unsigned> >`，想通过给定的双精度搜索一个项目。有什么方法可以方便地做到这一点，而不是手动创建一对并搜索它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T02:01:36.743

假设您的集合使用标准比较运算符来定义集合内的排序，并且假设`double`元素在配对中排在第一位，那么集合内的排序顺序主要由`double`配对的元素定义（并且仅适用于共享该`double`元素将在排序时考虑第二个元素）。

因此，您唯一需要做的就是定义一个比较运算符，用于在两个方向上比较对与单个双精度数（注意我在几个地方使用 C++11 语法）：

```
using std::pair;
using std::set;

typedef pair<double,unsigned>  pair_t;
typedef set<pair_t>            set_t;
typedef set_t::iterator        it_t;

struct doublecmp
{
  /* Compare pair with double. */
  bool operator()(const pair_t &p, double d)
  { return (p.first < d); }

  /* Compare double with pair. */
  bool operator()(double d, const pair_t &p)
  { return (d < p.first); }
}; 
```

有了这个，您可以使用该算法来查找集合中具有给定作为第一个元素`std::equal_range`的所有对的范围：`double d`

```
std::equal_range(begin(s),end(s),d,doublecmp()); 
```

如果这是使用优化编译的，则 的实例化`doublecmp()`是无操作的。

您将在[此处](http://liveworkspace.org/code/4gfsag$15)找到一个完整工作的代码示例。

**为什么这行得通？**
鉴于您的集合被声明为`set<pair<double,unsigned>>`，您使用的是默认比较运算符，这与 . 的标准`less<pair<double,unsigned>>`相同。这被定义为字典顺序（C++11 中的 20.3.3/2，或 C++03 中的 20.2.2/2），因此每对的第一个元素是主要的排序标准。`operator<``pair`

**警告 1**如果您声明您的集合使用与默认值不同的比较运算符，则该解决方案通常不起作用。如果您用作搜索条件的对的部分是第二个元素，而不是第一个元素，它也将不起作用。

**注意事项 2**搜索条件中使用的数据类型是浮点类型。浮点数的等式检查（包括由`operator<`执行的基于 - 的间接等式检查）通常很困难。`std::equal_range`您正在搜索的`double`可能已经以某种方式计算，表明它应该在数学上与集合中的某些值相同，但`std::equality_range`可能找不到它们（`std::find_if`在其他答案中也不会建议）。对于相等性检查，允许您正在查找的值与您认为匹配的值之间存在小的（“最多一些 epsilon”）差异通常是一个好主意。`std::equal_range`您可以通过显式调用替换并考虑参数来完成`std::lower_bound`此`std::upper_bound`操作`epsilon`：

```
pair<it_t,it_t> find_range(set_t &s, double d, double epsilon)
{
   return {std::lower_bound(begin(s),end(s),d - epsilon,doublecmp()),
           std::upper_bound(begin(s),end(s),d + epsilon,doublecmp())};
} 
```

这就留下了如何确定正确值的问题`epsilon`。这通常是困难的。它通常被计算为 的整数倍`std::numeric_limits<double>::epsilon`，但选择正确的因子可能很棘手。[您将在比较浮点值有多危险中](https://stackoverflow.com/questions/10334688/how-dangerous-is-it-to-compare-floating-point-values)找到有关此的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:35:54.500

由于该集合不是根据您的搜索条件排序的，因此您可以将[std::find_if](http://en.cppreference.com/w/cpp/algorithm/find)与仅检查该对`first`元素的谓词一起使用。这将返回一个迭代器到第一个匹配元素，通常需要注意的是比较浮点数是否相等。

```
double value = 42.;
auto it = std::find_if(the_set.begin(), the_set.end(), 
                       [&value](const std::pair<double, unsigned>& p) { return p.first==value; }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:55:54.813

我不确定这是否是您要查找的内容：

```
#include <iostream>
#include <set>
#include <utility>
#include <algorithm>

using namespace std;

struct Finder{
    template<typename Value>
    bool operator()(const Value& first, const Value& v) const{
        return first == v;      
    }
};

template <typename Value>
struct FirstValueValue{
    FirstValueValue(const Value& value): value(value){};
    template<typename Pair>
    bool operator()(const Pair& p) const{
        return p.first == value;
    }
    Value value;
};

int main(int argc, char *argv[]) {
    typedef std::set<std::pair<double,unsigned int> > SetOfPairs;
    SetOfPairs myset;
    myset.insert(std::make_pair(2.0,1));
    myset.insert(std::make_pair(5.7,2));

    Finder finder;
    double v = 2.0;
    for(SetOfPairs::iterator it = myset.begin(); it != myset.end(); it++){

        if( finder(it->first,v) ){
            cout << "found value " << v << std::endl;
        }
    }

    FirstValueValue<double> find_double_two(2.0);

    myset.insert(std::make_pair(2.0,100));
    unsigned int count =    std::count_if(myset.begin(),myset.end(),find_double_two);
    cout << "found " << count << " occurances of " << find_double_two.value;

} 
```

打印出来：

```
found value 2
found 2 occurances of 2 
```

我不知道您的需求是什么，或者是否允许使用 boost 库，但如果您必须大量索引该对的一部分，您可以查看 Boost Multi Index。

希望这可以帮助。祝你好运。

# java - 在android中通过java动态添加微调器

> ID：15122852
> 
> 赞同：0
> 
> 时间：2013-02-27T21:33:15.920
> 
> 标签：java, android, dynamic, spinner

我目前正在尝试获得一个类似于在您的 android 手机联系人列表中添加电话号码的功能。我的意思是，如果一个联系人有多个电话号码，您可以单击 + 按钮，它会在显示中添加另一个字段以显示另一个号码。

我要做的是当用户单击 + 按钮时，它会在现有微调器的正下方添加一个新微调器，其中包含相同的数据。我不太确定如何创建微调器以显示在现有微调器下方，但仍高于现有微调器下方的所有内容。有什么建议么？

# c++ - 可变参数模板类的部分特化是否支持非可变参数特化

> ID：15122854
> 
> 赞同：2
> 
> 时间：2013-02-27T21:33:32.397
> 
> 标签：c++, templates, c++11, variadic-templates

我想知道用于构建元组的经典递归模式是否应该使用一个常规模板参数，或者是否需要两个。这是一个参数的情况：

```
// Forward declaration of main tuple class template.
template<typename... Ds> class Tuple;

// Tuple class specialization for the general case
template<typename D, typename... Ds> class Tuple<D, Ds...> {
public:

    typedef D HeadType;
    typedef Tuple<Ds...> TailType;

    Tuple() {}

    Tuple(const D& head, const Ds&... ds) : mHead(head), mTail(ds...) {}

    HeadType mHead;
    TailType mTail;
};

// Sentinel one element case
template<typename D> class Tuple<D> {
public:
    typedef D HeadType;

    Tuple() {}
    Tuple(const D& d) : mHead(d) {}

    HeadType mHead;
}; 
```

在这里，您可以争辩说，当使用一个模板参数（直接或在递归中）实例化时：`Tuple<int>`两种特化都是有效的，并且声明应该是模棱两可的。但是，VS2012 Nov CTP 接受此代码，所以我不知道它是否可以，或者编译器是否很好。我无法在标准文本中找到任何提到这种情况的段落，但它编译肯定很方便，并且在某种程度上，“更具体”的非可变特化获胜是合乎逻辑的。

现在，如果这不是正确的 C++11，下面的代码是一个替代方案，使用两个常规模板参数，因此 1 参数案例不能选择一般特化：

```
// Forward declaration of main tuple class template.
template<typename... Ds> class Tuple;

// Tuple class specialization for the general case
template<typename D, typename D2, typename... Ds> class Tuple<D, D2, Ds...> {
public:

    typedef D HeadType;
    typedef Tuple<D2, Ds...> TailType;

    Tuple() {}

    Tuple(const D& head, const D2& d2, const Ds&... ds) : mHead(head), mTail(d2, ds...) {}

    HeadType mHead;
    TailType mTail;
};

// Sentinel one element case
template<typename D> class Tuple<D> {
public:
    typedef D HeadType;

    Tuple() {}
    Tuple(const D& d) : mHead(d) {}

    HeadType mHead;
}; 
```

遗憾的是，这不能在 VS2012 Nov CTP 上编译，但这肯定是一个错误：当第一个特化被两种类型调用时，对 mTail 的 ctor 调用不理解空参数包是空的......

所以主要问题仍然是：第一个版本是有效的 C++ 吗？

如果有人可以在第二种选择中查明我的错误，请这样做！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T23:46:16.287

> 在这里，您可以争辩说，当使用一个模板参数（直接或在递归中）实例化时：`Tuple<int>`两种特化都是有效的，并且声明应该是模棱两可的。

按照现在的标准，是的，这确实应该是模棱两可的。请参阅[此缺陷报告](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1395)。然而，委员会表示非可变变量的排名要好于可变变量，甚至*依赖*于当前标准中的这一点。我将方便地链接[到我的另一个答案，](https://stackoverflow.com/a/14005158/500104)其中包含一个示例。

现在，基本上所有好的编译器都已经实现了这个 DR 的解析，他们必须这样做，因为否则`std::common_type`会被简单地破坏（如果定义为指定）。所以，是的，从某种意义上说，编译器对你很好，但这是有充分理由的。

> 遗憾的是，这不能在 VS2012 Nov CTP 上编译，但这肯定是一个错误

是的，这是一个错误，众所周知，11 月的 CTP*非常*错误。当我玩弄它时，那天晚上我提交了 11 个可变参数错误（我想还有 3 个 decltype 错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T14:06:53.087

您是否尝试过专门化空元组版本？我是类型列表的实现，我总是这样做：

```
template<typename... T> 
struct Tuple;

template<typename HEAD , typename... TAIL>
struct Tuple<HEAD,TAIL...>
{
    using mHead = HEAD;
    using mTail = typename std::enable_if<sizeof...(TAIL) > 0,Tuple<TAIL...>>::type;

    ...
};

template<>
struct Tuple<>
{
    static_assert(false , "Empty tuples are not valid tuples");
}; 
```

# mysql - 设置电子邮件字段在 wamp 中是唯一的

> ID：15122859
> 
> 赞同：0
> 
> 时间：2013-02-27T21:33:41.647
> 
> 标签：mysql, wamp

我只是想使我的数据库中的电子邮件字段唯一，以便不允许两个用户使用相同的电子邮件地址进行注册。但我不断收到此错误：#1170 - BLOB/TEXT 列“电子邮件”在没有密钥长度的密钥规范中使用。我该如何解决这个问题？

# binary-search-tree - 红黑树的最坏情况黑色高度的插入顺序

> ID：15122860
> 
> 赞同：7
> 
> 时间：2013-02-27T21:33:41.860
> 
> 标签：binary-search-tree, red-black-tree, insertion-order

假设我们正在处理键 1-15。要获得常规 BST 的最坏情况性能，您可以按升序或降序插入键，如下所示：

1、2、3、4、5、6、7、8、9、10、11、12、13、14、15

那么BST本质上就会变成一个链表。

对于 BST 的最佳情况，您可以按以下顺序插入键，它们的排列方式是，插入的下一个键是要插入的总范围的一半，所以第一个是 15/2 = 8，然后是 8 /2 = 4 等等...

8, 4, 12, 2, 6, 10, 14, 1, 3, 5, 7, 9, 11, 13, 15

那么 BST 将是一棵平衡良好的树，最佳高度为 3。

红黑树的最佳情况也可以用 BST 的最佳情况来构造。但是我们如何构建红黑树的最坏情况呢？它与 BST 的最坏情况相同吗？是否存在会产生最坏情况的特定模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T18:51:01.580

你在找一棵瘦树，对吧？这可以通过`[1 ... , 2^(n+1)-2]`以相反的顺序插入来产生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T21:27:56.777

你将无法做到。红黑树保持自己“浓密”，因此它会旋转以修复不平衡。红黑树的上述最坏情况的长度仅限于两个元素，但这仍然不是“坏”情况；这是预期的，因为 lg(2) = 1，并且您在根之后有 1 层，其中包含两个元素。添加第三个元素后，您将得到以下信息：

```
B                   B
 \                 / \
  R       =>      R   R
   \
    R 
```

# selenium - Selenium 等到文档准备好

> ID：15122864
> 
> 赞同：143
> 
> 时间：2013-02-27T21:34:01.547
> 
> 标签：selenium, load, document, wait

谁能让我如何让硒等到页面完全加载？我想要一些通用的东西，我知道我可以配置 WebDriverWait 并调用类似“find”的东西来让它等待，但我没有走那么远。我只需要测试页面是否成功加载并转到下一页进行测试。

我在 .net 中找到了一些东西，但无法使其在 java 中工作......

```
IWait<IWebDriver> wait = new OpenQA.Selenium.Support.UI.WebDriverWait(driver, TimeSpan.FromSeconds(30.00));
wait.Until(driver1 => ((IJavaScriptExecutor)driver).ExecuteScript("return document.readyState").Equals("complete")); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-02-28T13:08:52.827

您建议的解决方案只等待[DOM`readyState`](https://developer.mozilla.org/en-US/docs/DOM/document.readyState)发出信号`complete`。[`driver.get()`](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/WebDriver.html#get-java.lang.String-)但是默认情况下，Selenium 会尝试通过and[`element.click()`](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/WebElement.html#click--)方法在页面加载时等待那些（以及更多） 。他们已经被阻塞了，他们等待页面完全加载并且应该可以正常工作。

显然，问题是通过 AJAX 请求和运行脚本进行的重定向 - Selenium 无法捕获这些，它不会等待它们完成。此外，您不能通过可靠地捕获它们`readyState`- 它会等待一段时间，这可能很有用，但它会`complete`在下载所有 AJAX 内容之前很久就发出信号。

没有通用的解决方案可以在任何地方对每个人都有效，这就是为什么它很难并且每个人都使用一些不同的东西。

一般规则是依靠 WebDriver 来完成他的工作，然后使用隐式等待，然后对要在页面上声明的元素使用显式等待，但是还有更多技术可以完成。您应该在测试页面上选择最适合您的情况的一个（或其中几个的组合）。

有关更多信息，请参阅我的两个答案：

*   [如何在 Web 驱动程序中检查页面是否已完全加载](https://stackoverflow.com/a/11002061/1273080)
*   [Selenium Webdriver：等待带有javascript的复杂页面加载](https://stackoverflow.com/a/10726369/1273080)

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2013-02-28T04:14:06.767

**试试这个代码：**

```
 driver.manage().timeouts().pageLoadTimeout(10, TimeUnit.SECONDS); 
```

上面的代码将等待页面加载长达 10 秒。如果页面加载时间超过了会抛出`TimeoutException`. 您捕获异常并满足您的需求。我不确定它是否在抛出异常后退出页面加载。我还没有尝试过这段代码。只想试一试。

这是一个隐含的等待。如果您设置一次，它将具有范围，直到 Web 驱动程序实例销毁。

有关更多信息，请参阅[文档。`WebDriver.Timeouts`](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html)

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2013-02-27T23:25:39.403

这是您提供的示例的有效 Java 版本：

```
void waitForLoad(WebDriver driver) {
    new WebDriverWait(driver, 30).until((ExpectedCondition<Boolean>) wd ->
            ((JavascriptExecutor) wd).executeScript("return document.readyState").equals("complete"));
} 
```

c# 示例：

```
public static void WaitForLoad(IWebDriver driver, int timeoutSec = 15)
{
    IJavaScriptExecutor js = (IJavaScriptExecutor)driver;
    WebDriverWait wait = new WebDriverWait(driver, new TimeSpan(0, 0, timeoutSec));
    wait.Until(wd => js.ExecuteScript("return document.readyState").ToString() == "complete");
} 
```

PHP 示例：

```
final public function waitUntilDomReadyState(RemoteWebDriver $webDriver): void
{
    $webDriver->wait()->until(function () {
        return $webDriver->executeScript('return document.readyState') === 'complete';
    });
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-09-03T18:28:20.700

这是我在 Python 中尝试一个完全通用的解决方案：

首先，一个通用的“等待”函数（如果你愿意，可以使用 WebDriverWait，我觉得它们很难看）：

```
def wait_for(condition_function):
    start_time = time.time()
    while time.time() < start_time + 3:
        if condition_function():
            return True
        else:
            time.sleep(0.1)
    raise Exception('Timeout waiting for {}'.format(condition_function.__name__)) 
```

接下来，该解决方案依赖于 selenium 记录页面上所有元素（包括顶级元素）的（内部）id-number 的事实`<html>`。当页面刷新或加载时，它会获得一个具有新 ID 的新 html 元素。

因此，假设您要单击带有文本“我的链接”的链接，例如：

```
old_page = browser.find_element_by_tag_name('html')

browser.find_element_by_link_text('my link').click()

def page_has_loaded():
    new_page = browser.find_element_by_tag_name('html')
    return new_page.id != old_page.id

wait_for(page_has_loaded) 
```

要获得更多 Pythonic、可重用、通用的帮助器，您可以创建一个上下文管理器：

```
from contextlib import contextmanager

@contextmanager
def wait_for_page_load(browser):
    old_page = browser.find_element_by_tag_name('html')

    yield

    def page_has_loaded():
        new_page = browser.find_element_by_tag_name('html')
        return new_page.id != old_page.id

    wait_for(page_has_loaded) 
```

然后你可以在几乎任何 selenium 交互中使用它：

```
with wait_for_page_load(browser):
    browser.find_element_by_link_text('my link').click() 
```

我认为这是防弹的！你怎么看？

更多信息请参见[此处的博客文章](http://www.obeythetestinggoat.com/how-to-get-selenium-to-wait-for-page-load-after-a-click.html)。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-11-09T14:53:11.410

我有一个类似的问题。我需要等到我的文档准备好，还要等到所有 Ajax 调用都完成。事实证明，第二种情况很难检测到。最后，我检查了活动的 Ajax 调用，它起作用了。

Javascript：

```
return (document.readyState == 'complete' && jQuery.active == 0) 
```

完整的 C# 方法：

```
private void WaitUntilDocumentIsReady(TimeSpan timeout)
{
    var javaScriptExecutor = WebDriver as IJavaScriptExecutor;
    var wait = new WebDriverWait(WebDriver, timeout);            

    // Check if document is ready
    Func<IWebDriver, bool> readyCondition = webDriver => javaScriptExecutor
        .ExecuteScript("return (document.readyState == 'complete' && jQuery.active == 0)");
    wait.Until(readyCondition);
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-06-09T06:19:18.417

```
WebDriverWait wait = new WebDriverWait(dr, 30);
wait.until(ExpectedConditions.jsReturnsValue("return document.readyState==\"complete\";")); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-02-17T06:19:59.190

对于 C# NUnit，你需要将 WebDriver 转换为 JSExecuter，然后执行脚本来检查 document.ready 状态是否完整。检查以下代码以供参考：

```
 public static void WaitForLoad(IWebDriver driver)
    {
        IJavaScriptExecutor js = (IJavaScriptExecutor)driver;
        int timeoutSec = 15;
        WebDriverWait wait = new WebDriverWait(driver, new TimeSpan(0, 0, timeoutSec));
        wait.Until(wd => js.ExecuteScript("return document.readyState").ToString() == "complete");
    } 
```

这将等到条件满足或超时。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-06-04T06:56:15.200

对于初始页面加载，我注意到“最大化”浏览器窗口实际上会等到页面加载完成（包括源代码）

代替：

```
AppDriver.Navigate().GoToUrl(url); 
```

和：

```
public void OpenURL(IWebDriver AppDriver, string Url)
            {
                try
                {
                    AppDriver.Navigate().GoToUrl(Url);
                    AppDriver.Manage().Window.Maximize();
                    AppDriver.SwitchTo().ActiveElement();
                }
                catch (Exception e)
                {
                    Console.WriteLine("ERR: {0}; {1}", e.TargetSite, e.Message);
                    throw;
                }
            } 
```

比使用：

```
OpenURL(myDriver, myUrl); 
```

这将加载页面，等到完成，最大化并专注于它。我不知道为什么会这样，但它有效。

如果您想在单击下一步或“Navigate()”以外的任何其他页面导航触发器后等待页面加载，Ben Dyer 的回答（在此线程中）将完成工作。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-12-23T15:50:57.137

在 Nodejs 中，您可以通过 Promise 获得它...

如果您编写此代码，则可以确定当您到达 then 时页面已完全加载...

```
driver.get('www.sidanmor.com').then(()=> {
    // here the page is fully loaded!!!
    // do your stuff...
}).catch(console.log.bind(console)); 
```

如果您编写此代码，您将导航，selenium 将等待 3 秒...

```
driver.get('www.sidanmor.com');
driver.sleep(3000);
// you can't be sure that the page is fully loaded!!!
// do your stuff... hope it will be OK... 
```

来自 Selenium 文档：

this.get( url ) → Thenable

安排一个命令导航到给定的 URL。

返回一个将在文档**完成加载**时解决的承诺。

[Selenium 文档 (Nodejs)](http://seleniumhq.github.io/selenium/docs/api/javascript/module/selenium-webdriver/chrome_exports_Driver.html#get)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-06-06T08:13:59.050

看看[挂毯](http://tapestry.apache.org/)网络框架。你可以在那里[下载源代码](http://tapestry.apache.org/download.html)。

这个想法是通过 body 的 html 属性表示页面已准备好。您可以使用这个想法忽略复杂的诉讼案件。

```
<html>
<head>
</head>
<body data-page-initialized="false">
    <p>Write you page here</p>

    <script>
    $(document).ready(function () {
        $(document.body).attr('data-page-initialized', 'true');
    });
    </script>  
</body>
</html> 
```

然后创建 Selenium webdriver 的扩展（根据 Tapestry 框架）

```
public static void WaitForPageToLoad(this IWebDriver driver, int timeout = 15000)
{
    //wait a bit for the page to start loading
    Thread.Sleep(100);

    //// In a limited number of cases, a "page" is an container error page or raw HTML content
    // that does not include the body element and data-page-initialized element. In those cases,
    // there will never be page initialization in the Tapestry sense and we return immediately.
    if (!driver.ElementIsDisplayed("/html/body[@data-page-initialized]"))
    {                
        return;
    }

    Stopwatch stopwatch = Stopwatch.StartNew();

    int sleepTime = 20;

    while(true)
    {
        if (driver.ElementIsDisplayed("/html/body[@data-page-initialized='true']"))
        {
            return;
        }

        if (stopwatch.ElapsedMilliseconds > 30000)
        {
            throw new Exception("Page did not finish initializing after 30 seconds.");
        }

        Thread.Sleep(sleepTime);
        sleepTime *= 2; // geometric row of sleep time
    }          
} 
```

[使用由 Alister Scott 编写的](https://watirmelon.com/2014/01/29/waiting-in-c-webdriver/)扩展 ElementIsDisplayed 。

```
public static bool ElementIsDisplayed(this IWebDriver driver, string xpath)
{
    try
    {
        return driver.FindElement(By.XPath(xpath)).Displayed;
    }
    catch(NoSuchElementException)
    {
        return false;
    }
} 
```

最后创建测试：

```
driver.Url = this.GetAbsoluteUrl("/Account/Login");            
driver.WaitForPageToLoad(); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-06-21T20:59:49.043

Ben Dryer 的答案没有在我的机器上编译（`"The method until(Predicate<WebDriver>) is ambiguous for the type WebDriverWait"`）。

工作 Java 8 版本：

```
Predicate<WebDriver> pageLoaded = wd -> ((JavascriptExecutor) wd).executeScript(
        "return document.readyState").equals("complete");
new FluentWait<WebDriver>(driver).until(pageLoaded); 
```

Java 7 版本：

```
Predicate<WebDriver> pageLoaded = new Predicate<WebDriver>() {

        @Override
        public boolean apply(WebDriver input) {
            return ((JavascriptExecutor) input).executeScript("return document.readyState").equals("complete");
        }

};
new FluentWait<WebDriver>(driver).until(pageLoaded); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-08-12T18:47:39.570

我尝试了这段代码，它对我有用。每次我移动到另一个页面时我都会调用这个函数

```
public static void waitForPageToBeReady() 
{
    JavascriptExecutor js = (JavascriptExecutor)driver;

    //This loop will rotate for 100 times to check If page Is ready after every 1 second.
    //You can replace your if you wants to Increase or decrease wait time.
    for (int i=0; i<400; i++)
    { 
        try 
        {
            Thread.sleep(1000);
        }catch (InterruptedException e) {} 
        //To check page ready state.

        if (js.executeScript("return document.readyState").toString().equals("complete"))
        { 
            break; 
        }   
      }
 } 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-03-05T13:50:34.127

等待 document.ready 事件并不是解决这个问题的全部，因为这段代码仍然处于竞争状态：有时这段代码在点击事件处理之前被触发，所以直接返回，因为浏览器还没有启动正在加载新页面。

经过一番搜索，我在[Obay the testing goat](http://www.obeythetestinggoat.com/how-to-get-selenium-to-wait-for-page-load-after-a-click.html "服从测试山羊")上找到了一个帖子，其中有解决此问题的方法。该解决方案的 c# 代码如下所示：

```
 IWebElement page = null;
 ...
 public void WaitForPageLoad()
 {
    if (page != null)
    {
       var waitForCurrentPageToStale = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
       waitForCurrentPageToStale.Until(ExpectedConditions.StalenessOf(page));
    }

    var waitForDocumentReady = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
    waitForDocumentReady.Until((wdriver) => (driver as IJavaScriptExecutor).ExecuteScript("return document.readyState").Equals("complete"));

    page = driver.FindElement(By.TagName("html"));

} 
```

` 我在 driver.navigate.gotourl 之后直接触发这个方法，以便它尽快获得页面的引用。玩得开心！

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-09-01T14:56:44.780

通常，当 selenium 通过单击或提交或获取方法打开新页面时，它会等待页面已加载，但问题是当页面有 xhr 调用（ajax）时，他永远不会等待 xhr 被加载，所以创建一个新的方法来监控 xhr 并等待他们，这将是一件好事。

```
public boolean waitForJSandJQueryToLoad() {
    WebDriverWait wait = new WebDriverWait(webDriver, 30);
    // wait for jQuery to load
    ExpectedCondition<Boolean> jQueryLoad = new ExpectedCondition<Boolean>() {
      @Override
      public Boolean apply(WebDriver driver) {
        try {
            Long r = (Long)((JavascriptExecutor)driver).executeScript("return $.active");
            return r == 0;
        } catch (Exception e) {
            LOG.info("no jquery present");
            return true;
        }
      }
    };

    // wait for Javascript to load
    ExpectedCondition<Boolean> jsLoad = new ExpectedCondition<Boolean>() {
      @Override
      public Boolean apply(WebDriver driver) {
        return ((JavascriptExecutor)driver).executeScript("return document.readyState")
        .toString().equals("complete");
      }
    };

  return wait.until(jQueryLoad) && wait.until(jsLoad);
} 
```

`if $.active == 0`所以没有活动的 xhrs 调用（仅适用于 jQuery）。对于 javascript ajax 调用，您必须在项目中创建一个变量并对其进行模拟。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-03-13T11:29:59.260

您可以编写一些逻辑来处理这个问题。我写了一个返回的方法，`WebElement`这个方法将被调用三次，或者你可以增加时间并添加一个空检查`WebElement`这是一个例子

```
public static void main(String[] args) {
        WebDriver driver = new FirefoxDriver();
        driver.get("https://www.crowdanalytix.com/#home");
        WebElement webElement = getWebElement(driver, "homekkkkkkkkkkkk");
        int i = 1;
        while (webElement == null && i < 4) {
            webElement = getWebElement(driver, "homessssssssssss");
            System.out.println("calling");
            i++;
        }
        System.out.println(webElement.getTagName());
        System.out.println("End");
        driver.close();
    }

    public static WebElement getWebElement(WebDriver driver, String id) {
        WebElement myDynamicElement = null;
        try {
            myDynamicElement = (new WebDriverWait(driver, 10))
                    .until(ExpectedConditions.presenceOfElementLocated(By
                            .id(id)));
            return myDynamicElement;
        } catch (TimeoutException ex) {
            return null;
        }
    } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-08-11T00:26:55.763

我执行了一个 javascript 代码来检查文档是否准备好。为具有客户端渲染的站点调试 selenium 测试节省了我很多时间。

```
public static boolean waitUntilDOMIsReady(WebDriver driver) {
def maxSeconds = DEFAULT_WAIT_SECONDS * 10
for (count in 1..maxSeconds) {
    Thread.sleep(100)
    def ready = isDOMReady(driver);
    if (ready) {
        break;
    }
} 
```

}

```
public static boolean isDOMReady(WebDriver driver){
    return driver.executeScript("return document.readyState");
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-02-14T11:19:13.453

```
public boolean waitForElement(String zoneName, String element, int index, int timeout) {
        WebDriverWait wait = new WebDriverWait(appiumDriver, timeout/1000);
        wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(element)));
        return true;
    } 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-07-31T08:26:03.083

就像 Rubanov 为 C# 编写的一样，我为 Java 编写它，它是：

```
 public void waitForPageLoaded() {
    ExpectedCondition<Boolean> expectation = new
            ExpectedCondition<Boolean>() {
                public Boolean apply(WebDriver driver) {
                    return (((JavascriptExecutor) driver).executeScript("return document.readyState").toString().equals("complete")&&((Boolean)((JavascriptExecutor)driver).executeScript("return jQuery.active == 0")));
                }
            };
    try {
        Thread.sleep(100);
        WebDriverWait waitForLoad = new WebDriverWait(driver, 30);
        waitForLoad.until(expectation);
    } catch (Throwable error) {
        Assert.fail("Timeout waiting for Page Load Request to complete.");
    }
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-08-11T09:34:45.073

在 Java 中，它会像下面这样：-

```
 private static boolean isloadComplete(WebDriver driver)
    {
        return ((JavascriptExecutor) driver).executeScript("return document.readyState").equals("loaded")
                || ((JavascriptExecutor) driver).executeScript("return document.readyState").equals("complete");
    } 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-12-01T07:35:56.943

以下代码应该可以工作：

```
WebDriverWait wait = new WebDriverWait(driver, 10);
wait.until(ExpectedConditions.presenceOfAllElementsLocated(By.xpath("//*"))); 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-02-13T23:28:27.513

如果您的页面或网络连接速度较慢，则上述方法可能都不起作用。我已经尝试了所有这些，唯一对我有用的是等待该页面上的最后一个可见元素。以必应网页为例。他们在主搜索按钮旁边放置了一个相机图标（按图像搜索按钮），该按钮仅在整个页面加载后才可见。如果每个人都这样做，那么我们所要做的就是使用上面示例中的显式等待。

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2013-10-07T08:49:46.837

```
public void waitForPageToLoad()
  {
(new WebDriverWait(driver, DEFAULT_WAIT_TIME)).until(new ExpectedCondition<Boolean>() {
      public Boolean apply(WebDriver d) {
        return (((org.openqa.selenium.JavascriptExecutor) driver).executeScript("return document.readyState").equals("complete"));
      }
    });//Here DEFAULT_WAIT_TIME is a integer correspond to wait time in seconds 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2015-04-24T21:18:44.373

这是类似的东西，在 Ruby 中：

```
wait = Selenium::WebDriver::Wait.new(:timeout => 10)
wait.until { @driver.execute_script('return document.readyState').eql?('complete') } 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2016-06-08T15:13:14.070

您可以让线程休眠，直到重新加载页面。这不是最佳解决方案，因为您需要估计页面加载所需的时间。

```
driver.get(homeUrl); 
Thread.sleep(5000);
driver.findElement(By.xpath("Your_Xpath_here")).sendKeys(userName);
driver.findElement(By.xpath("Your_Xpath_here")).sendKeys(passWord);
driver.findElement(By.xpath("Your_Xpath_here")).click(); 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2018-09-26T06:41:22.910

我检查了页面加载完成，在 Selenium 3.14.0 中工作

```
 public static void UntilPageLoadComplete(IWebDriver driver, long timeoutInSeconds)
    {
        Until(driver, (d) =>
        {
            Boolean isPageLoaded = (Boolean)((IJavaScriptExecutor)driver).ExecuteScript("return document.readyState").Equals("complete");
            if (!isPageLoaded) Console.WriteLine("Document is loading");
            return isPageLoaded;
        }, timeoutInSeconds);
    }

    public static void Until(IWebDriver driver, Func<IWebDriver, Boolean> waitCondition, long timeoutInSeconds)
    {
        WebDriverWait webDriverWait = new WebDriverWait(driver, TimeSpan.FromSeconds(timeoutInSeconds));
        webDriverWait.Timeout = TimeSpan.FromSeconds(timeoutInSeconds);
        try
        {
            webDriverWait.Until(waitCondition);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }
    } 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2018-10-19T08:14:27.603

对于需要等待特定元素出现的人。（使用 C#）

```
public static void WaitForElement(IWebDriver driver, By element)
{
    WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(20));
    wait.Until(ExpectedConditions.ElementIsVisible(element));
} 
```

然后，如果您想等待，例如 DOM 中是否存在 class="error-message"，您只需执行以下操作：

```
WaitForElement(driver, By.ClassName("error-message")); 
```

对于 id，它将是

`WaitForElement(driver, By.Id("yourid"));`

* * *

## 回答 #27

> 赞同：-3
> 
> 时间：2017-01-11T13:57:11.170

你在使用 Angular 吗？如果您是 webdriver 可能无法识别异步调用已完成。

我建议看一下[Paul Hammants ngWebDriver](https://github.com/paul-hammant/ngWebDriver)。waitForAngularRequestsToFinish() 方法可以派上用场。

# facebook - Facebook oAuth 扩展权限请求

> ID：15122865
> 
> 赞同：0
> 
> 时间：2013-02-27T21:34:04.487
> 
> 标签：facebook, api, oauth

我喜欢在用户已经通过身份验证后使用 FB API 请求更多（扩展）权限。是否可以发送有效的访问令牌或任何其他方式不使用 OAuth 身份验证再次登录？

网址如下所示：[https://www.facebook.com/dialog/oauth?client_id=](https://www.facebook.com/dialog/oauth?client_id=) {clientid}&redirect_uri={callback_url}&scope=read_stream,publish_actions&display=popup&response_type=token

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:29:23.280

不，您必须再次通过登录对话框发送用户。

虽然，如果用户已经登录到您的应用程序，他会得到一个不同的（更简单的）对话框，只请求额外的权限。这是由 Facebook 自动处理的。

# lua - 随机选择3张图片

> ID：15122868
> 
> 赞同：0
> 
> 时间：2013-02-27T21:34:07.687
> 
> 标签：lua, coronasdk

嗨，我正在尝试在 3 张图片“BCloud1.png、BCloud2.png、BCloud3.png”之间随机选择什么是最好的方法，我确实尝试添加一个赞`math.random(1, 3);`： `star4.imgpath = "BCloud .. math.random(1, 3); .. .png";`

但这不起作用

```
-- select randomly between BCloud1.png, BCloud2.png, BCloud3.png

    local star4 = {}
    star4.imgpath = "BCloud1.png";
    star4.movementSpeed = 16000;
    table.insert(starTable, star4); 
```

这个问题有什么简单的解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T21:38:37.380

你的陈述有一点*语法错误*。它应该是：

```
star4.imgpath = "BCloud"..tostring(math.random(1, 3))..".png"; 
```

# c++ - 未找到具有相关库的 Makefile

> ID：15122873
> 
> 赞同：1
> 
> 时间：2013-02-27T21:34:37.763
> 
> 标签：c++, makefile

我正在做一个项目，并决定使用 Boost 的正则表达式类。所以我只编译了 regex 类并将 libboost_regex.a 移动到我的项目目录中的子文件夹 regex 中。我怎样才能得到这个文件链接？

我有以下生成文件：

```
rm=/bin/rm -f
CC= clang++
PROGNAME= story
CFLAGS= -L ./regex
LIBS=-llibboost_regex

SRCS = main.cpp  Environment.cpp 
OBJS = main.o Environment.o 

.cpp.o:
    $(rm) $@
    $(CC) $(CFLAGS) -c $*.cpp -o $*.o

all: $(PROGNAME)

$(PROGNAME) : $(OBJS)
    $(CC) $(CFLAGS) -o $(PROGNAME) $(OBJS) $(LIBS) 
```

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:35:51.347

在您的情况下，最简单的方法可能只是：

```
LIBS=-L./regex -lboost_regex 
```

或者

```
LIBS=./regex/libboost_regex.a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:45:00.307

这两行：

```
CFLAGS= -L ./regex
LIBS=-llibboost_regex 
```

应该：

```
LDFLAGS= -L./regex
LIBS= -lboost_regex 
```

`LDFLAGS`用于链接器，并且`lib`库不需要前缀。

# php - 将 PHP 变量导入数据库

> ID：15122874
> 
> 赞同：0
> 
> 时间：2013-02-27T21:34:40.680
> 
> 标签：php, mysql

得到：可捕获的致命错误：无法将类 stdClass 的对象转换为字符串...从以下代码：

```
$url = "{$row['url']}";

$embed_info = json_decode($client->get('oembed', array('url' => $url)));
$sql="INSERT INTO persons (iframe) VALUES('$embed_info')"; 
```

如何让 $embed_info 作为字符串工作并很好地进入我的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:39:17.837

看着这个：

```
$embed_info = json_decode($client->get('oembed', array('url' => $url))); 
```

假设`$client->get`调用返回 JSON（一个字符串），那可能就是您想要存储的内容。一旦你调用`json_decode`那个 JSON，`$embed_info`它就是一个对象（解码的 JSON）。然后你不能做类似的事情，`$sql = "...$embed_info...";`因为 PHP 会尝试隐式尝试将*Object*转换为 String。

如果您只想存储 JSON，请跳过`json_decode`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:50:04.827

不确定是一个好的做法，或者它是否符合您的需要，但您可以序列化对象并使用 base64 对其进行编码（用于逗号和其他字符）

```
$embed_info = json_decode($client->get('oembed', array('url' => $url)));
$data = base64_encode(serialize($embed_info));
$sql = "INSERT INTO persons (iframe) VALUES ('{$data}')"; 
```

稍后您可以检索该对象：

```
$sql = "SELECT iframe FROM persons WHERE <the where>";
// ... execute the query and fetch in $row
$embed_info = unserialize(base64_decode($row['iframe']));
// Now in $embed_info you get back the object 
// Note that the object's class must be loaded before do that 
```

# sockets - MPI 消息可用性通知

> ID：15122875
> 
> 赞同：2
> 
> 时间：2013-02-27T21:34:40.510
> 
> 标签：sockets, parallel-processing, signals, ipc, mpi

MPI 中有没有办法通知特定进程的消息可用性？当前，我使用异步 MPI_Iprobe 轮询，然后是 MPI_Recv 。这意味着进程必须停止它正在做的事情并时不时地调用这个方法。有没有办法通过信号/中断通知消息的可用性？另一种选择是使用单独的线程进行轮询，但我不确定这是否可以接受，因为它会消耗 cpu 时间。

```
 int poll(int& source,int& message_id) {
     int flag;
     MPI_Status mpi_status;
     MPI_Iprobe(MPI_ANY_SOURCE, MPI_ANY_TAG, MPI_COMM_WORLD,&flag,&mpi_status);
     if(flag) {
       message_id = mpi_status.MPI_TAG;
       source = mpi_status.MPI_SOURCE;
       return true;
     }
     return false;
    } 
```

* * *

**编辑：** 看起来 MPI 实现使用轮询[http://blogs.cisco.com/performance/polling-vs-blocking-message-passingprogress/](http://blogs.cisco.com/performance/polling-vs-blocking-message-passingprogress/)

最好的解决方案似乎是使用阻塞 MPI_Probe() 然后 mpirun -n 2 --mca yield_when_idle 这将使轮询线程阻塞，直到发送消息。但是一些 mpi 实现没有 mca 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:48:43.703

这种机制不能以可移植的方式直接使用。

您可以使用带有`MPI_Wait`（或其风味）的线程 - 甚至更简单`MPI_Recv`。但是，不能保证您的 MPI 实现在等待消息时不会消耗 CPU。（虽然可以保证轮询`MPI_Iprobe`确实会消耗 100% 的 CPU。）还要小心 MPI 和线程，存在缺陷和不同的操作模式。

你为什么要首先这样做？您所做的事情可能有更好的机制，例如使用单方面的沟通。

# ios - iOS 将字符串格式化为分钟和秒

> ID：15122883
> 
> 赞同：14
> 
> 时间：2013-02-27T21:35:36.767
> 
> 标签：ios, time, youtube, json-c

我从 YouTube JSONC api 收到一个字符串，但持续时间是一个完整的数字，即 2321 而不是 23:21 或 2 而不是 0:02。我将如何解决这个问题？

[JSON C](http://gdata.youtube.com/feeds/api/users/Apple/uploads?v=2&alt=jsonc)

**编辑：**

```
int duration = [videos valueForKey:@"duration"];
int minutes = duration / 60;
int seconds = duration % 60;

NSString *time = [NSString stringWithFormat:@"%d:%02d", minutes, seconds]; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-27T21:44:05.233

假设持续时间值实际上是以秒为单位的持续时间，那么您可以计算分钟和秒数，然后将它们格式化为字符串。

```
int duration = ... // some duration from the JSON
int minutes = duration / 60;
int seconds = duration % 60;

NSString *time = [NSString stringWithFormat:@"%d:%02d", minutes, seconds]; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-03-21T04:34:52.383

如果持续时间旨在面向用户，则应使用[DateComponentsFormatter ：](https://developer.apple.com/reference/foundation/datecomponentsformatter)

```
let formatter = DateComponentsFormatter()
formatter.allowedUnits = [ .minute, .second ]
formatter.zeroFormattingBehavior = [ .pad ]
let formattedDuration = formatter.string(from: duration)! 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-08-26T08:53:39.043

试试这个非常优化

```
+ (NSString *)timeFormatConvertToSeconds:(NSString *)timeSecs
{
    int totalSeconds=[timeSecs intValue];

    int seconds = totalSeconds % 60;
    int minutes = (totalSeconds / 60) % 60;
    int hours = totalSeconds / 3600;

    return [NSString stringWithFormat:@"%02d:%02d:%02d",hours, minutes, seconds];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T02:41:54.623

```
int sec = diff;//INFO: time in seconds

int a_sec = 1;
int a_min = a_sec * 60;
int an_hour = a_min * 60;
int a_day = an_hour * 24;
int a_month = a_day * 30;
int a_year = a_day * 365;

NSString *text = @"";
if (sec >= a_year)
{
    int years = floor(sec / a_year);
    text = [NSString stringWithFormat:@"%d year%@ ", years, years > 0 ? @"s" : @""];
    sec = sec - (years * a_year);
}

if (sec >= a_month)
{
    int months = floor(sec / a_month);
text = [NSString stringWithFormat:@"%@%d month%@ ", text, months, months > 0 ? @"s" : @""];
    sec = sec - (months * a_month);

}

if (sec >= a_day)
{
    int days = floor(sec / a_day);
text = [NSString stringWithFormat:@"%@%d day%@ ", text, days, days > 0 ? @"s" : @""];

    sec = sec - (days * a_day);
}

if (sec >= an_hour)
{
    int hours = floor(sec / an_hour);
text = [NSString stringWithFormat:@"%@%d hour%@ ", text, hours, hours > 0 ? @"s" : @""];

    sec = sec - (hours * an_hour);
}

if (sec >= a_min)
{
    int minutes = floor(sec / a_min);
text = [NSString stringWithFormat:@"%@%d minute%@ ", text, minutes, minutes > 0 ? @"s" : @""];

    sec = sec - (minutes * a_min);
}

if (sec >= a_sec)
{
    int seconds = floor(sec / a_sec);
text = [NSString stringWithFormat:@"%@%d second%@", text, seconds, seconds > 0 ? @"s" : @""];
}
   NSLog(@"<%@>", text); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-02T14:58:07.407

[这](https://stackoverflow.com/questions/1189252/how-to-convert-an-nstimeinterval-seconds-into-minutes)是我为此找到的很棒的代码

```
int duration = 1221;
int minutes = floor(duration/60)
int seconds = round(duration - (minutes * 60))
NSString * timeStr = [NSString stringWithFormat:@"%i:%i",minutes,seconds];
NSLog(@"Dilip timeStr : %@",timeStr); 
```

输出将是这样的

```
Dilip timeStr : 20:21 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T21:44:14.770

您可以`subString`将`2321`第一个字符串设为 23，将第二个字符串设为 21，然后将它们转换为`int`. 还要检查文本的长度：

```
if (text.length < 4)
   //add zeros on the left of String until be of length 4 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-26T12:37:53.533

目标 C：

```
NSDateComponentsFormatter * formatter = [[NSDateComponentsFormatter alloc]init];
[formatter setUnitsStyle:NSDateComponentsFormatterUnitsStyleShort];
[formatter setAllowedUnits:NSCalendarUnitSecond | NSCalendarUnitMinute];
[formatter setZeroFormattingBehavior:NSDateComponentsFormatterZeroFormattingBehaviorPad];
return [formatter stringFromTimeInterval:duration]; 
```

# jquery - 验证多个值

> ID：15122888
> 
> 赞同：1
> 
> 时间：2013-02-27T21:35:38.483
> 
> 标签：jquery

检查选项值是否等于多个值中的任何一个的最简单方法是什么？

这有效，但只允许检查一个值。

```
if ($(this).val() == 'QA') {
   //do something
} 
```

我想检查多个值。

```
if ($(this).val() == 'QA, Efficiency, Legal, Time, BadDebt, WriteOff, BusinessInterruption') {
   //do something
} 
```

我想我可以做到这一点，但似乎代码太多了？

```
if ($(this).val() == 'QA' || $(this).val() == 'Efficiency') {
   //do something
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:39:08.377

你可以使用`$.inArray()`：

```
var valuesArray = ['QA', 'Efficiency', 'Legal', 'Time', 'BadDebt', 'WriteOff','BusinessInterruption'];

if ($.inArry($(this).val(),valuesArray) !== -1) {
    // value is present
} 
```

或者，在支持的浏览器中`Array.indexOf()`：

```
if (valuesArray.indexOf($(this).val()) !== -1) {
    // value is present
} 
```

你也可以使用一个简单的开关：

```
switch($(this).val()) {
    case 'QA':
    case 'Efficiency':
    case 'Legal':
    case 'Time':
    case 'BadDebt':
    case 'WriteOff':
    case 'BusinessInterruption':
         /* switches continue with all subsequent comparisons until they reach
            a `break`, so this function 'doStuff()' will be executed if *any*
            of the above match */
        doStuff();
    break;
    default:
        noneOfTheAboveMatched();
        break;
} 
```

参考：

*   [`Array.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf).
*   [JavaScript`switch`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)。
*   [`jQuery.inArray()`](http://api.jquery.com/jQuery.inArray/).

# java - java.lang.VerifyError：在分支目标 JDK 1.7 处期望堆栈图帧

> ID：15122890
> 
> 赞同：89
> 
> 时间：2013-02-27T21:35:39.993
> 
> 标签：java, jaxb, java-7

升级到 JDK 1.7 后，出现以下异常：

```
java.lang.VerifyError: Expecting a stackmap frame at branch target 71 in method com.abc.domain.myPackage.MyClass$JaxbAccessorM_getDescription_setDescription_java_lang_String.get(Ljava/lang/Object;)Ljava/lang/Object; at offset 20
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2413)
    at java.lang.Class.getConstructor0(Class.java:2723)
    at java.lang.Class.newInstance0(Class.java:345)
    at java.lang.Class.newInstance(Class.java:327)
    at com.sun.xml.internal.bind.v2.runtime.reflect.opt.OptimizedAccessorFactory.instanciate(OptimizedAccessorFactory.java:184)
    at com.sun.xml.internal.bind.v2.runtime.reflect.opt.OptimizedAccessorFactory.get(OptimizedAccessorFactory.java:129)
    at com.sun.xml.internal.bind.v2.runtime.reflect.Accessor$GetterSetterReflection.optimize(Accessor.java:384)
    at com.sun.xml.internal.bind.v2.runtime.property.SingleElementLeafProperty.<init>(SingleElementLeafProperty.java:72)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.sun.xml.internal.bind.v2.runtime.property.PropertyFactory.create(PropertyFactory.java:113)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.<init>(ClassBeanInfoImpl.java:166)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(JAXBContextImpl.java:494)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:311)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:126)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1148)
    at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:130)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:248)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:235)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:445)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:637)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:584)
    at com.abc.domain.myPackage.MyClass.marshalFacetsTest(MyClass.java:73)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:128)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1203)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)
    at org.testng.TestNG.run(TestNG.java:1036)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175) 
```

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-02-27T21:40:50.130

Java 7 引入了更严格的验证并稍微改变了类格式——包含用于验证代码是否正确的堆栈映射。您看到的异常意味着某些方法没有有效的堆栈映射。

Java 版本或字节码检测都可能是罪魁祸首。通常这意味着应用程序使用的库会生成未通过更严格验证的无效字节码。因此，开发人员只能将其作为错误报告给库。

作为一种解决方法，您可以添加`-noverify`到 JVM 参数以禁用验证。在 Java 7 中，也可以`-XX:-UseSplitVerifier`使用不太严格的验证方法，但在 Java 8 中删除了该选项。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-01-28T11:16:08.183

如果您使用的是 java 1.8，请在您的 JVM 属性中删除`XX:-UseSplitVerifier`并使用。`-noverify`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-03T02:21:34.900

我遇到了这个问题并尝试使用`-noverify`真正有效的标志。这是因为新的字节码验证器。所以旗帜应该真的有效。我正在使用 JDK 1.7。

注意：如果您使用的是 JDK 1.8，这将不起作用

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-06T00:51:13.123

`-noverify`将 JVM 参数传递给您的测试任务。如果你使用 gradle，`build.gradle`你可以有类似的东西：

```
test {
  jvmArgs "-noverify"
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-02T02:41:20.560

导致问题的文件之间的唯一区别是文件的第 8 个字节

CA FE BA BE 00 00 00 33 - Java 7

对比

CA FE BA BE 00 00 00 32 - Java 6

设置`-XX:-UseSplitVerifier`解决了这个问题。但是，此问题的原因是[https://bugs.eclipse.org/bugs/show_bug.cgi?id=339388](https://bugs.eclipse.org/bugs/show_bug.cgi?id=339388)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-04T12:16:21.183

当您使用 Mockito**模拟最终类**时，可能会发生此错误。

考虑改用 Mockito inline 或 Powermock。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-10-16T14:38:02.863

抱歉挖掘，但我遇到了同样的问题并找到了更简单的解决方案。

在 Java 编译器选项中，您需要取消选中**“保留未使用（从不读取）的局部变量”**，因此无需更改回目标 JVM 版本。

这似乎是旧 Ecipe 版本中的一个错误。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2014-08-09T16:41:46.053

如果您自己构建代码，则可以通过向 java 编译器提供“-target 1.5”（或通过在 IDE 或构建配置中设置相应的选项）来解决此问题。

* * *

## 回答 #9

> 赞同：-11
> 
> 时间：2013-05-23T05:45:59.243

这个链接很有帮助。 [java.lang.VerifyError：期望堆栈图帧](https://stackoverflow.com/questions/8958267/java-lang-verifyerror-expecting-a-stackmap-frame)

最简单的方法是将 JRE 更改为 6。

# scala - Scalatra 如何将参数发送到路线？

> ID：15122893
> 
> 赞同：2
> 
> 时间：2013-02-27T21:35:44.687
> 
> 标签：scala, scalatra

我问这个作为 Scala 的一个相对较新的人。我已经看到了如何在 Scala 中创建“控制结构”的示例，但我不太了解它，无法遵循 Scalatra 本身的代码。

有人可以解释一下“参数”是如何传递给定义的路由处理程序的吗？我觉得这是一种有用的技术，我想知道它是如何完成的。

谢谢！

编辑：添加来自 Scalatra 网站的示例代码来说明我在说什么：

```
class HelloWorldApp extends ScalatraFilter {
  get("/") {
    <h1>Hello, {params("name")}</h1>
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:47:22.547

这些是涉及的特征：

```
trait ScalatraFilter extends Filter with ServletBase
trait ServletBase extends ScalatraBase with SessionSupport with Initializable
trait ScalatraBase extends ScalatraContext with CoreDsl with DynamicScope..... 
```

使用 params 时，您使用的是 ScalatraBase 中定义的少数重载方法之一

```
def params(key: String)(implicit request: HttpServletRequest): String = params(request)(key)
def params(key: Symbol)(implicit request: HttpServletRequest): String = params(request)(key)
def params(implicit request: HttpServletRequest): Params = new ScalatraParams(multiParams) 
```

检查代码

[https://github.com/scalatra/scalatra/blob/develop/core/src/main/scala/org/scalatra/ScalatraBase.scala](https://github.com/scalatra/scalatra/blob/develop/core/src/main/scala/org/scalatra/ScalatraBase.scala) [https://github.com/scalatra/scalatra/blob/develop/core/src /main/scala/org/scalatra/ScalatraFilter.scala](https://github.com/scalatra/scalatra/blob/develop/core/src/main/scala/org/scalatra/ScalatraFilter.scala) [https://github.com/scalatra/scalatra/blob/develop/core/src/main/scala/org/scalatra/servlet/ServletBase.scala](https://github.com/scalatra/scalatra/blob/develop/core/src/main/scala/org/scalatra/servlet/ServletBase.scala)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T18:24:27.333

它是通过使用 Scala 的`DynamicVariable`类来完成的。这是一篇简短的博客文章，它很好地解释了它。

[http://www.riffraff.info/2009/4/11/step-a-scala-web-picoframework](http://www.riffraff.info/2009/4/11/step-a-scala-web-picoframework)

# django - 默认创建用户不活动（is_active 默认为 False）

> ID：15122895
> 
> 赞同：6
> 
> 时间：2013-02-27T21:35:47.820
> 
> 标签：django, django-models, django-authentication

我在我使用[omab / django-social-auth 的网站中有 facebook 身份验证](https://github.com/omab/django-social-auth)

我想将用户重定向到另一个网站，让他们填写他们的详细信息。所以我想让用户在他们第一次使用他们的 facebook 帐户进行身份验证时处于非活动状态，然后在他们完成表单后我将它们保存为活动用户。

我在我的环境下操作了 django/contrib/auth/models.py，就像使用 is_active 字段一样 default=False; 但它们被保存为活动用户但仍然是相同的结果，即使我从管理面板添加了一个普通用户。有什么我想念的吗？

```
class User(models.Model):
    """
    Users within the Django authentication system are represented by this
    model.

    Username and password are required. Other fields are optional.
    """
    username = models.CharField(_('username'), max_length=30, unique=True,
        help_text=_('Required. 30 characters or fewer. Letters, numbers and '
                    '@/./+/-/_ characters'))
    first_name = models.CharField(_('first name'), max_length=30, blank=True)
    last_name = models.CharField(_('last name'), max_length=30, blank=True)
    email = models.EmailField(_('e-mail address'), blank=True)
    password = models.CharField(_('password'), max_length=128)
    is_staff = models.BooleanField(_('staff status'), default=False,
        help_text=_('Designates whether the user can log into this admin '
                    'site.'))
    is_active = models.BooleanField(_('active'), default=False,
        help_text=_('Designates whether this user should be treated as '
                    'active. Unselect this instead of deleting accounts.'))
    is_superuser = models.BooleanField(_('superuser status'), default=False,
        help_text=_('Designates that this user has all permissions without '
                    'explicitly assigning them.'))
    last_login = models.DateTimeField(_('last login'), default=timezone.now)
    date_joined = models.DateTimeField(_('date joined'), default=timezone.now)
    groups = models.ManyToManyField(Group, verbose_name=_('groups'),
        blank=True, help_text=_('The groups this user belongs to. A user will '
                                'get all permissions granted to each of '
                                'his/her group.'))
    user_permissions = models.ManyToManyField(Permission,
        verbose_name=_('user permissions'), blank=True,
        help_text='Specific permissions for this user.')
    objects = UserManager()

 def create_user(self, username, email=None, password=None):
    """
    Creates and saves a User with the given username, email and password.
    """
    now = timezone.now()
    if not username:
        raise ValueError('The given username must be set')
    email = UserManager.normalize_email(email)
    user = self.model(username=username, email=email,
                      is_staff=False, is_active=False, is_superuser=False,
                      last_login=now, date_joined=now)

    user.set_password(password)
    user.save(using=self._db)
    return user 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T21:38:57.653

1.  避免修改内置插件。有更好的方法来做事。
2.  喜欢[信号](https://docs.djangoproject.com/en/dev/topics/signals/)。信号很棒。
3.  在这种情况下，我将附加到 pre_save 信号`django.contrib.auth.models.User`，并手动更正`is_active`模型实例的属性（如果对象是新的）。
4.  这样，您可以添加一些逻辑以确保您正确地将用户标记为非活动用户。
5.  因为在管理员中添加的用户应该是活跃的，如果管理员将他们标记为活跃的话。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-01-26T18:17:08.543

jack_shed 建议的信号，这帮助我找到了方向。但是仍然有工作要弄清楚在接收到信号后如何进行测试和修改。

这对我有用。

```
from django.dispatch import receiver
from django.db.models.signals import pre_save
from django.contrib.auth.models import User

@receiver(pre_save, sender=User)
def set_new_user_inactive(sender, instance, **kwargs):
    if instance._state.adding is True:
        print("Creating Inactive User")
        instance.is_active = False
    else:
        print("Updating User Record") 
```

这将在保存发生之前捕获创建用户的操作，然后测试此实例状态是否为“正在添加”。这区分了创建和更新模型实例。

如果你不做这个测试，更新用户设置 is_active 也为 False，最终无法通过 django 激活它们。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-11T22:06:49.533

# 使用 django-allauth 时的优雅解决方案。

还有另一种非常好的解决方案..听起来很像你想要的。

我创建了一个自定义表单（在我的例子中是 ModelForm），我可以通过设置将其交给 django-allauth `ACCOUNT_SIGNUP_FORM_CLASS`。这是做什么的......是要求新的潜在用户在注册过程中提供额外的字段。

这有一些非常好的优点：

1.  除了默认内容之外，您还可以非常优雅地添加一些字段。
2.  它适用于社交和“正常”注册。
3.  无需修补 3rd 方应用程序。
4.  您仍然可以在管理员中修改和维护所有内容。
5.  在自定义表单中，您可以在将新用户实例保存到数据库之前访问它。这意味着您甚至可以一次性处理提供的信息，例如为他创建配置文件对象并将用户设置为非活动..all。这是有效的，因为您可以检查一切是否正常......然后才承诺执行所有这些步骤或拒绝带有验证错误的表单。:)

嗯..听起来不错吧？
但它究竟是如何工作的（即看起来像）？
我很高兴你问.. ^_^

对于您的用例，它可能看起来像这样：

# 设置.py

```
[...]
ACCOUNT_SIGNUP_FORM_CLASS = "<your_app>.forms.SignupForm"
[...] 
```

# 表格.py

```
class SignupForm(forms.Form):
    first_name = forms.CharField(max_length=30)
    last_name = forms.CharField(max_length=30)

    def signup(self, request, user):
        user.first_name = self.cleaned_data['first_name']
        user.last_name = self.cleaned_data['last_name']
        user.is_active = False
        user.save() 
```

# ruby-on-rails - 正则表达式：匹配一个独占的非此即彼

> ID：15122896
> 
> 赞同：1
> 
> 时间：2013-02-27T21:35:48.803
> 
> 标签：ruby-on-rails, ruby, regex

我想要一个匹配`RACE`or字符串`RACE_1`但不匹配`RACE_2`and的正则表达式`RACE_3`。我在[Rubular](http://rubular.com/)上已经有一段时间了，现在试图弄清楚，但似乎无法满足我需要的所有条件。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:42:59.033

```
/^RACE(_1)?$/ 
```

[此处为 Rubular 示例](http://rubular.com/r/OStEsRwJGq)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T21:43:31.387

```
RACE(_1)?\b 
```

\b 表示单词的结尾，这会阻止匹配 RACE_2 中的 RACE。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T21:42:48.990

您可以使用： `(\bRACE(_[1])?\b)`

它需要 的​​一份副本`RACE`，然后`0 -> N`出现`_[1]`. 在方括号中，您可以包含任何您想要的数字。示例： `(\bRACE(_[12345])?\b)`将匹配到`RACE_5`. 然后，您可以自定义它甚至跳过数字，如果您想要`[1245]`但`RACE_1, RACE_2, RACE_4, RACE_5`不是`RACE_3`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T21:40:02.673

`/RACE(?!_)|RACE_1/`

它有点黑客，但可能适合您的需求

编辑：这可能是一个更具体的，效果更好 `/RACE(?!_\d)|RACE_1/`

在这两种情况下，您都使用否定前瞻来强制 RACE 后面不能跟`_`一个数字，但随后特别允许它后面有 or 语句。

此外，如果您计划仅搜索整个单词的所述匹配实例，请在前面/附加 \b 以指定单词边界。

`/\bRACE(?!_\d)|RACE_1\b/`

# ruby-on-rails - Accepts_nested_attributes_for 没有使用引导程序和简单表单填充 Rails 3.2 应用程序中嵌套项的 id

> ID：15122899
> 
> 赞同：0
> 
> 时间：2013-02-27T21:35:57.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, simple-form

我已经更新了这个问题，以反映那些提出建议的人的意见。

在具有引导程序和简单表单的 Rails 3.2 应用程序中，发票模型中有以下内容：

```
has_many :line_items
accepts_nested_attributes_for :line_items
attr_accessible :user_id, :project_name, :date1, :date2, :date3, :paid, :memo, :line_items_attributes 
```

在 line_item 模型中：

```
belongs_to :invoice
# validates_presence_of :invoice_id (COMMENTED THESE OUT to generate a clearer error)
# validates_uniqueness_of :invoice_id 
```

在我的发票控制器中，我有：

```
 def new
     @users = User.find(:all, :order => "username asc")

     @line_items = [] # got "undefined method `<<' for nil:NilClass" until defined as array
     Product.find(:all, :order => "position asc").each do |p|
        @line_items << LineItem.new(:product_id => p.id, :cost => p.unit_cost, :name => p.name, :description => p.description, :position => p.position, :quantity => 0)
     end

     @invoice = Invoice.new(:line_items_attributes => @line_items) # PRODUCING ERROR
  end 
```

在我的表格中，我有以下内容：

```
<%= simple_form_for @invoice do |f| %>
    <%= f.input :user_id, :collection => @users.map(&:username) %>
    <%= f.input :project_name %>
    <%= f.input :date1, :as => :date, :order => [:month, :day, :year], :label => "3rd Invoice" %>

    <%= f.simple_fields_for :line_items do |li_fields| %>
        <%= li_fields.input :name %>
        <%= li_fields.input :quantity %>
        <%= li_fields.input :unit_cost %>
    <% end %>

    <%= f.button :submit, "Save", :class => "btn btn-primary" %>
<% end %> 
```

再次在我的控制器中：

```
 def create
    @invoice = Invoice.new(params[:invoice])

    respond_to do |format|
      if @invoice.save
         ...
      else
         ...
      end
    end
  end 
```

错误信息：

```
undefined method `with_indifferent_access' for #<LineItem:0x007ffc9ebc0730> 
```

p @line_items 产生：

```
[#<LineItem id: nil, invoice_id: nil, product_id: 5, cost: #<BigDecimal:7ffc9e45d330,'0.69E2',9(18)>, name: "Account", description: "Account", quantity: 0, position: 2, created_at: nil, updated_at: nil>, 
 #<LineItem id: nil, invoice_id: nil, product_id: 12, cost: #<BigDecimal:7ffc9e45c9f8,'0.3E3',9(18)>, name: "Consultant Training", description: "Consultant Training", quantity: 0, position: 12, created_at: nil, updated_at: nil>] 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:04:49.363

您的问题出在您的表单设置中。你`@invoice.line_items.each_with_index do |line_item, index|`在你的 f.simple_fields_for 之前有，你不需要它。相反，您应该...

```
<%= simple_form_for(@invoice) do |f| %>
    ...some inputs    
    <%= f.simple_fields_for :line_items do |li_fields| %>
        ...more inputs
    <% end %>
<% end %> 
```

然后，在您的发票模型中，您要确保使`line_items_attributes`attr_accessible。

# javascript - 散点图 html5/javascript 库，允许为每个点设置颜色和 alpha

> ID：15122901
> 
> 赞同：1
> 
> 时间：2013-02-27T21:35:58.787
> 
> 标签：javascript, html, colors, alpha, scatter-plot

我正在寻找一个免费的散点图 html5/javascript 库，它允许为每个点设置颜色和 alpha。

我知道[http://www.rgraph.net/](http://www.rgraph.net/)有这个功能，但我正在寻找一个限制较少的库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:41:02.300

您可能可以使用 Raphael.js 完成此操作。这是他们演示站点的示例散点图： [http ://raphaeljs.com/github/dots.html](http://raphaeljs.com/github/dots.html)

您可能会考虑将此作为起点： [https ://github.com/stringfellow/raphael-scatter](https://github.com/stringfellow/raphael-scatter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-20T09:54:33.733

RGraph ( [https://www.rgraph.net](https://www.rgraph.net) ) 现已获得 MIT 许可 - 完全免费。

# ruby-on-rails - Rails 中的控制器和视图之间的连接

> ID：15122905
> 
> 赞同：0
> 
> 时间：2013-02-27T21:36:14.940
> 
> 标签：ruby-on-rails, view, controller, connection

在**users_controller.rb**我有我的方法：

```
def showallusers
 @users = User.all

 respond_to do |format|
  format.html  # showallusers.html.erb
  format.json  { render :json => @users }
 end
end 
```

在**app/views/users**我有**showallusers.html.erb**并在其中：

```
<p>test</p> 
```

但是当我输入

```
 http://localhost:3000/users/showallusers 
```

在浏览器中，它向我显示**show.html.erb**。

我的**路线.rb**

```
 resources :users

  resources :projects do
    resources :issues  
  end

  #resources :issues

  resources :projects

  resources :sessions

  root :to => "users#index"

  match "/auth/:provider/callback" => "sessions#create"
  match "/signout" => "sessions#destroy", :as => :signout 
```

你知道，出了什么问题，我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:46:03.130

在您的 routes.rb 中：

```
resources :users do
  collection do
    get :showallusers # why not :show_all_users? Isn't it more readable?
    # you may also need
    # post :showallusers
  end
end 
```

然后重新启动服务器以确保生成了新的 url-helper（新的 helper 应该是`showallusers_users_path`）

# c++ - DBGP 实现 C/C++

> ID：15122906
> 
> 赞同：0
> 
> 时间：2013-02-27T21:36:16.467
> 
> 标签：c++, wxwidgets, xdebug

是否有在 C/C++中实现 XDebug 的[DBGP的库？](http://xdebug.org/docs-dbgp.php)我对编写调试器很感兴趣，如果存在这样的库将为我节省很多！我想将调试器添加到我用 C++ 语言编写的编辑器中，但它是 PHP 文件的编辑器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T07:14:23.763

不存在。有一个来自 GSOC（应用程序不是库），但我不能花时间阅读和转换为我的需要加上它为 wx2.8 编写的所以我将推出一个类来与我的编辑器粘在一起

**编辑** 正如我所说，我结束了使用那个。里面有错误的 libDBGp，但我会自己修复它，呵呵！如果你对[这里](https://github.com/LawnGnome/dubnium)感兴趣（感谢 GitHub）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:52:50.147

有一些基于 GDB 的库可以帮助调试器前端编写器，如 libgdb。DBGP 是一个非常愚蠢且功能集非常小的协议 - 不足以调试 C++。

对于 Windows，没有这样的东西。您可以读取 PDB 数据库，但这非常困难。我花了一个星期来看看我能走多远，但不是很成功。只有理论是容易的。为命令行调试器 windbg 编写前端可能会更好，就像过去必须为 GDB 执行此操作一样。

# vim - Sublime Text 2 - 在命令模式下像 Vim 一样搜索突出显示？

> ID：15122907
> 
> 赞同：6
> 
> 时间：2013-02-27T21:36:21.543
> 
> 标签：vim, sublimetext2

*在 Vim 中，如果我在fooBar*上按SHIFT * ，或者输入

```
 /fooBar 
```

文件中的所有 'fooBar' 实例都将突出显示，我可以使用 N 键浏览它们。

如何在启用 Vintage 并安装 VintageEx 插件的 Sublime Text 2 中突出显示（**不是**使用 ALT F3 的插入模式）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:20:49.913

在 SublimeText 2 中，使用 / 开始并键入您的搜索，按住 command 并按 g 以循环显示突出显示的结果。在您选择的结果上按 Enter 键进入可视模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T22:42:48.450

我也是一个沉重的 vimer，我想尝试按 N 跳转到下一个搜索词，以及我正在寻找一个应该按照您过去的期望完成的插件，但我已经改变了使用`shift+enter`或`minimap to scroll`代替按 N 的习惯跳跃，它现在对我有效。

`ENTER`注意：在使用 Vintage 插件完成按下时不要按下`/foo`，这会停止绘制轮廓。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-17T16:54:49.367

Vintageous包[默认](https://github.com/guillermooo/Vintageous)突出显示所有`/`实例。

# facebook - 基于应用可见性设置获取用户的 FQL 查询

> ID：15122909
> 
> 赞同：1
> 
> 时间：2013-02-27T21:36:37.767
> 
> 标签：facebook, facebook-fql

我发现查询可以告诉您哪些朋友正在使用应用程序：

```
SELECT uid, name FROM user WHERE uid IN(SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user = 1 
```

但是，假设您有一个更私密的应用程序，并且用户将该应用程序的可见性设置为“仅限我”。除了那些想保持隐藏的人之外，是否可以使用该应用程序结交朋友？

我查看了权限表，但据我所知，没有任何权限与“应用程序的可见性”设置相关。

作为旁注，如果您将“应用程序的可见性”设置设置为“仅限我”，当其他人注册该应用程序时，您的照片将不会显示在应用程序身份验证屏幕中。所以看起来这种行为是存在的。

有没有更好的“用户友好”方式来复制这种行为？

# security - 哈希表漏洞（属性覆盖）？

> ID：15122913
> 
> 赞同：7
> 
> 时间：2013-02-27T21:37:00.030
> 
> 标签：security, powershell

我在 PowerShell 中使用哈希表，我注意到一些与访问项目相关的奇怪行为。众所周知，PowerShell 至少允许三种不同的方式将值分配给哈希表条目：

```
$hashtable["foo"] = "bar"        #1
$hashtable.Item("foo") = "bar"   #2
$hashtable.foo = "bar"           #3 
```

同时，我们使用#3 语法来访问 Hashtable 对象本身的属性，例如`Count`, `Keys`,`Values`等。如果我们添加一个键与内部属性名称冲突的项，PowerShell 允许我们这样做，并且我们实际上不再能够读取属性的值（使用反射除外）。

我猜在密钥来自不可靠来源（例如来自外部文件或网络）的情况下，这可能会对流控制产生不良影响，并且可能被恶意用户利用。

这个片段演示了这个问题：

```
function Get-HashtableProperties($hashTable, $header)
{
    "{0} {1} {0}" -f ("-" * 10), $header

    "Count                      : {0}" -f $hashtable.Count
    "Keys.Count                 : {0}" -f $hashtable.Keys.Count
    "Values.Count               : {0}" -f $hashtable.Values.Count
    "Actual Count (Reflection)  : {0}" -f $hashtable.GetType().GetProperty("Count").GetValue($hashtable)

    "`nItems (Keys iteration):"
    $hashtable.Keys | ForEach-Object { "  [ {0} = {1} ]" -f $_, $hashtable.Item($_) }

    "`nItems (Enumerator iteration):"
    $enumerator = $hashTable.GetEnumerator()
    while ($enumerator.MoveNext())
    {
        "  [ {0} = {1} ]" -f $enumerator.Current.Key, $enumerator.Current.Value
    }
}

$fileContent = @"
    Foo = a
    Bar = b
"@

$maliciousFileContent = @"
    Foo = a
    Bar = b
    Count = 0
    Keys =
    Values =
"@

$hashtable = ConvertFrom-StringData $fileContent
$damagedHashtable = ConvertFrom-StringData $maliciousFileContent

Get-HashtableProperties $hashtable "Normal Hash Table"
Get-HashtableProperties $damagedHashtable "Damaged Hash Table" 
```

输出：

```
---------- Normal Hash Table ----------
Count                      : 2
Keys.Count                 : 2
Values.Count               : 2
Actual Count (Reflection)  : 2

Items (Keys iteration):
  [ Bar = b ]
  [ Foo = a ]

Items (Enumerator iteration):
  [ Bar = b ]
  [ Foo = a ]
---------- Damaged Hash Table ----------
Count                      : 0
Keys.Count                 : 1
Values.Count               : 1
Actual Count (Reflection)  : 5

Items (Keys iteration):
  [  =  ]

Items (Enumerator iteration):
  [ Count = 0 ]
  [ Bar = b ]
  [ Foo = a ]
  [ Values =  ]
  [ Keys =  ] 
```

**问题**：有没有办法防止这个问题，除了在分配之前手动检查每个键和/或在我们需要访问某些`Hashtable`属性的值时在代码中的任何地方使用反射？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T22:24:22.610

在这种情况下，您可以像这样访问 Hashtable 的 count 属性：

```
C:\PS> $ht = @{Count = 99}
$ht.psbase.Count
1 
```

PowerShell 中的扩展类型系统通过这些 PS* 属性为对象提供了几种不同的视图。有关详细信息，请参阅[PowerShell 团队博客文章](http://blogs.msdn.com/b/powershell/archive/2006/11/24/what-s-up-with-psbase-psextended-psadapted-and-psobject.aspx)。

# spring - 使用 JPA 的 Spring 不持久化对象

> ID：15122920
> 
> 赞同：0
> 
> 时间：2013-02-27T21:37:32.327
> 
> 标签：spring, hibernate, jpa, entitymanager

我已经阅读了许多使用 JPA 配置 spring 的教程。我正在使用本地 MySQL 数据库，我有这个上下文：

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- DataSource Setup -->
    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/test" />
        <property name="username" value="vitornobrega" />
        <property name="password" value="" />
    </bean>

    <!-- Entity Manager Factory -->
    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="com.vitornobrega.myapp.entities" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="true" />
                <property name="generateDdl" value="true" />
                <property name="databasePlatform" value="org.hibernate.dialect.MySQLDialect" />
            </bean>
        </property>
    </bean>

    <bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>
    <tx:annotation-driven transaction-manager="txManager" />
</beans> 
```

我在 JUnit 上进行了测试以测试我的 DAO 并且效果很好，但是当我尝试使用此配置持久化实体时，我从未在休眠日志中记录插入命令，但在测试用例中我看到了它。如果我尝试创建 entitymanager.flush，则会出现异常，因为任何事务都在运行。

我应该改变什么可以使这个实体在我的本地数据库上持久化？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:29:12.950

> 如果我尝试创建 entitymanager.flush，则会出现异常，因为任何事务都在运行。

如果我没看错，问题是你试图在不开始交易的情况下保存一些东西。更改持久状态时需要事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T19:49:54.387

为了能够在数据库中持久化，必须在事务中。因此，您可以更好地解决它是注释@Transactional ...例如在方法上

这也让我前段时间疯狂了几个小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-17T15:14:07.823

你在课堂上使用注释吗？如果是这样，请确保你 `<context:component-scan base-package="com.vitornobrega.myapp">`因为来自 jpa 配置的 arpart 我可以看到你在哪里注入你的依赖项。

# qt - Qt - 验证加载的图像是否为灰度

> ID：15122922
> 
> 赞同：-1
> 
> 时间：2013-02-27T21:37:36.933
> 
> 标签：qt, qt4, qt5, grayscale, qimage

我在 C++/Qt 中开发了一个小型 GUI，我想知道一种快速测试加载的图像是否为灰度的方法。在实践中，当我加载 gif 格式的灰度图像时，我希望它被识别为深度（）=8 的灰度图像，而当我加载彩色 gif 图像时，QImage 的深度将为 32。

这是我的开放方法：

```
void ImageViewer::open()
{
  int status_off = 0;
  fileName = QFileDialog::getOpenFileName(this, tr("Open File"), QDir::currentPath());

  if (!fileName.isEmpty()) {
    current_qimage = QImage(fileName);
    if (current_qimage.isNull()) {
      QMessageBox::information(this, tr("Image Viewer"),
          tr("Cannot load %1.").arg(fileName));
      return;
    }
    updateStatus(status_off);
    // Image is colored with depth=8
    if (current_qimage.depth()/8 != 4)
      {rgblum_status = 0;}
      else // Image is grayscale with depth=32
      {rgblum_status = 1;}

    loadImage();
  }
} 
```

从我的第一次测试来看，current_qimage 似乎 `current_qimage = QImage(fileName);`首先继承了图像内容之前的格式（此处为 gif）。因此，QImage 在两种情况下的 depth() 等于 32。

如何区分这两个 gif 图像（一个灰度和另一个彩色）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:46:24.943

该类`QImage`有一个函数，您可以调用该函数来测试图像是否为灰度：`QImage::isGrayscale()`. 它适用于 8 位颜色表索引图像和 32 位图像。

# eclipse - eclipse下tomcat不保存session信息

> ID：15122923
> 
> 赞同：2
> 
> 时间：2013-02-27T21:37:40.650
> 
> 标签：eclipse, tomcat, session-state

尝试使用会话时，我在使用此代码时遇到了这个问题：

```
<%@ page
    language="java"
    contentType="text/html; charset=UTF-8"
   pageEncoding="UTF-8"

   import="java.util.Date"
%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta
            http-equiv="Content-Type"
            content="text/html; charset=UTF-8"
        >
        <title>Session problem</title>
    </head>

    <body>
    <%
        out.println("Are we using cookies? " + request.isRequestedSessionIdFromCookie() + "<BR>");      
        out.println("Are we using URL? " + request.isRequestedSessionIdFromURL() + "<BR>");     
        out.println("This is my session Id " + session.getId().toString() + "<BR>");
        out.println("It was created on: " + new Date(session.getCreationTime()) + "<BR>");
        out.println("The servlet context is: " + session.getServletContext().toString() + "<BR>");
        out.println("Is this session new? " + session.isNew() + "<BR><BR>");
    %>
    </body>
</html> 
```

但是每次我点击重新加载时，它都会显示一个新的会话 ID，并且新属性始终为真。我找了类似的问题，最常见的问题是 cookie 没有启用，所以我检查了我的 cookie 是否启用。

有趣的是，我上传了 .war 文件，在测试服务器中它运行良好。所以我从eclipse和我的硬盘中删除了我的tomcat服务器（7.0.22）并得到了一个新的（7.0.34），它也没有工作，会话信息仍然没有保存。

我怀疑 Eclipse 配置中有问题，所以下一步是下载新的 Eclipse，我仍然使用 Eclipse Java EE Helios，即使我对这个版本感到满意，我也可能会使用新版本，但我可以防止这不再发生。

提前致谢

# c# - 从 WebBrowser 打印时出现 ThreadStateException

> ID：15122926
> 
> 赞同：0
> 
> 时间：2013-02-27T21:38:06.313
> 
> 标签：c#, multithreading, printing, browser

这是我试图用我的应用程序完成的任务——当一个 HTML 文件被添加到一个目录时，（使用 FileSystemWatcher），我想立即使用 WebBrowser 打印它。除了发生这种情况时我遇到以下错误：

```
System.Threading.ThreadStateException: ActiveX control GUID cannot be instantiated because the current thread is not in a single-threaded apartment 
```

这是我正在使用的遇到此问题的代码。（我在 Main() 之前有 [STAThread]）

```
public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        //  Create a FileSystemWatcher to monitor all files on drive C.
        FileSystemWatcher fsw = new FileSystemWatcher("C:\\Test");

        //  Watch for changes in LastAccess and LastWrite times, and 
        //  the renaming of files or directories. 
        fsw.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
            | NotifyFilters.FileName | NotifyFilters.DirectoryName;

        //  Register a handler that gets called when a  
        //  file is created, changed, or deleted.
        //fsw.Changed += new FileSystemEventHandler(OnChanged);

        fsw.Created += new FileSystemEventHandler(OnChanged);

        //fsw.Deleted += new FileSystemEventHandler(OnChanged);
        fsw.EnableRaisingEvents = true;

        PrinterSettings settings = new PrinterSettings();
        label2.Text = settings.PrinterName;

        Thread.CurrentThread.SetApartmentState(ApartmentState.STA);
    }

    private void OnChanged(object source, FileSystemEventArgs e)
    {
        notifyIcon1.BalloonTipText = "Printing document " + e.Name + "...";
        notifyIcon1.BalloonTipTitle = "Printing Application";
        notifyIcon1.BalloonTipIcon = ToolTipIcon.Info;
        notifyIcon1.ShowBalloonTip(500);

        PrintCOAPage(e.Name);
    }

    private void PrintCOAPage(string name)
    {
        try
        {
            // Create a WebBrowser instance. 
            WebBrowser webBrowserForPrinting = new WebBrowser();

            // Add an event handler that prints the document after it loads.
            webBrowserForPrinting.DocumentCompleted +=
                new WebBrowserDocumentCompletedEventHandler(PrintDocument);

            // Set the Url property to load the document.
            webBrowserForPrinting.Url = new Uri(@"C:\\Test\\" + name);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    }

    private void PrintDocument(object sender,
        WebBrowserDocumentCompletedEventArgs e)
    {
        try
        {
            // Print the document now that it is fully loaded.
            ((WebBrowser)sender).Print();

            // Dispose the WebBrowser now that the task is complete. 
            ((WebBrowser)sender).Dispose();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }

    }

    private void notifyIcon1_MouseDoubleClick(object sender, MouseEventArgs e)
    {
        this.Show();
        this.Activate();
        if (this.WindowState == FormWindowState.Minimized)
        {
            this.WindowState = FormWindowState.Normal;
        }
    }

    private void Form1_Resize(object sender, EventArgs e)
    {
        if (FormWindowState.Minimized == WindowState)
        {
            Hide();
        }  
    } 
```

如果你们对此有任何见解，我将不胜感激！也许我不应该使用 WebBrowser 来打印 HTML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:51:54.783

FSW 引发的事件（如 Created）在工作线程上触发。这是相当重要的，它确保通知尽可能快地传递，并且 FSW 使用的内部缓冲区不会溢出。顺便说一句，您应该检查一下，不要忘记订阅 Error 事件。

您在事件处理程序中可以做的事情是有限的，但是您始终需要注意您的代码在另一个线程中运行。线程安全始终是一个问题。您在这里遇到的具体错误是由此引起的，WebBrowser 不是线程安全的类。您实际上收到警告说您正在使用不支持线程的类的少数情况之一，更常见的问题是随机错误行为。

Anyhoo，FSW 使解决这个问题变得非常简单。您可以要求它在 UI 线程上引发事件。它需要一行代码：

```
 fsw.SynchronizingObject = this; 
```

请注意，这会使 FSW 陷入困境，如果事件频率很高，您*必须保持 UI 线程响应。*不要跳过那个错误事件。使用线程安全队列在技术上可以将 FSW 与浏览器分离，您将在[此答案](https://stackoverflow.com/a/4271581/17034)中找到在单独线程上运行 WebBrowser 所需的代码类型。

# c - 递归导致的分段错误

> ID：15122928
> 
> 赞同：1
> 
> 时间：2013-02-27T21:38:18.743
> 
> 标签：c, recursion, segmentation-fault, sequence, coredump

我正在编写一个程序，该程序将取 1-10 之间的数字并显示所有可能的排列数字的方式。

防爆输入：3 输出：

```
 1 2 3
   1 3 2
   2 1 3
   2 3 1
   3 1 2
   3 2 1 
```

每当我输入 9 或 10 时，程序都会给出分段错误并转储内核。我相信问题是我的递归算法被调用了太多次。有人可以帮助指出我如何限制必要的递归调用量吗？这是我当前的代码：

```
void rearange(int numbers[11], int index, int num, int fact) {

  int temp = numbers[index];
  numbers[index] = numbers[index-1];
  numbers[index-1] = temp;

  int i;
  for (i = 1; i <= num; ++i) // print the current sequence
  {
    printf("%d ", numbers[i]);
  }
  printf("\n");

  fact--;  // decrement how many sequences remain
  index--; // decrement our index in the array

  if (index == 1) // if we're at the beginning of the array
    index = num;    // reset index to end of the array

  if (fact > 0) // If we have more sequences remaining
    rearange(numbers, index, num, fact);    // Do it all again! :D
}

int main() {
  int num, i; // our number and a counter

  printf("Enter a number less than 10: ");
  scanf("%d", &num); // get the number from the user

  int numbers[11]; // create an array of appropriate size
  // fill array
  for (i = 1; i <= num; i++) { // fill the array from 1 to num
    numbers[i] = i;
  }

  int fact = 1; // calculate the factorial to determine
  for (i = 1; i <= num; ++i) // how many possible sequences
  {
    fact = fact * i;
  }

  rearange(numbers, num, num, fact); // begin rearranging by recursion

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T21:50:30.197

`9!`(362880) 和(3628800) 是在执行尽可能多的递归调用时会`10!`溢出**[调用堆栈的巨大数字。](http://en.wikipedia.org/wiki/Call_stack)**因为必须存储所有局部变量和形式参数。您要么必须增加堆栈大小，要么将递归转换为迭代。

在 Linux 上，您可以执行以下操作：

```
ulimit -s unlimited 
```

将堆栈大小设置为无限制。默认值通常为 8MB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T22:15:46.927

计算排列可以迭代地完成，但即使你递归地做，也不需要有一个巨大的堆栈（就像建议增加你的系统堆栈的答案一样）。事实上，你只需要很少的筹码量。考虑一下：

```
0 1      <- this needs **2** stackframes 
1 0                and an for-loop of size 2 in each stackframe

0 1 2    <- this needs **3** stackframes 
0 2 1              and an for-loop of size 3 in each stackframe
1 0 2
1 2 0
2 1 0
2 0 1 
```

排列 9 个元素需要**9 个**堆栈帧和一个循环遍历每个堆栈帧中的 9 个元素。

**编辑：**我冒昧地为您的重新排列功能添加了一个递归计数器，它现在打印如下：

```
Enter a number less than 10: 4
depth 1      1 2 4 3
depth 2      1 4 2 3
depth 3      4 1 2 3
depth 4      4 1 3 2
depth 5      4 3 1 2
depth 6      3 4 1 2
depth 7      3 4 2 1
depth 8      3 2 4 1
depth 9      2 3 4 1
depth 10      2 3 1 4
depth 11      2 1 3 4
depth 12      1 2 3 4
depth 13      1 2 4 3
depth 14      1 4 2 3
depth 15      4 1 2 3
depth 16      4 1 3 2  which is obviously wrong even if you do it recursively.
depth 17      4 3 1 2
depth 18      3 4 1 2
depth 19      3 4 2 1
depth 20      3 2 4 1
depth 21      2 3 4 1
depth 22      2 3 1 4
depth 23      2 1 3 4
depth 24      1 2 3 4
.... 
```

递归叶应该是唯一输出的叶，因此深度应该是恒定的并且很小（等于您输入的数字）。

**编辑2：**

好的，写了代码。试试看：

```
#include "stdio.h"
void betterRecursion(int depth, int elems, int* temp) {
    if(depth==elems) {
        int j=0;for(;j<elems;++j){
            printf("%i ", temp[j]);
        }
        printf("   (at recursion depth %u)\n", depth);
    } else {
        int i=0;for(;i<elems;++i){
            temp[depth] = i;
            betterRecursion(depth+1, elems, temp);
        }
    }
}
int main() {
    int temp[100];
    betterRecursion(0, 11, temp); // arrange the 11 elements 0...10
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:59:52.383

我会让你的`rearange`函数迭代 -`do while`添加，并删除递归调用：

```
void rearange(int numbers[11], int index, int num, int fact) {
    int temp;
    do
    {
      temp = numbers[index];
      numbers[index] = numbers[index-1];
      numbers[index-1] = temp;

      int i;
      for (i = 1; i <= num; ++i) // print the current sequence
      {
        printf("%d ", numbers[i]);
      }
      printf("\n");

      fact--;  // decrement how many sequences remain
      index--; // decrement our index in the array

      if (index == 1) // if we're at the beginning of the array
        index = num;    // reset index to end of the array

    } while (fact > 0);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T22:09:53.953

这不是深度递归的任务。尝试发明一些对堆栈更友好的算法。与堆栈大小相比，以下代码在速度方面存在相当大的问题......它有点慢，例如对于 n=1000，但它可以工作。

```
#include <stdio.h>

void print_arrangement(int n, int* x)
{
  int i;
  for(i = 0; i < n; i++)
  {
  printf("%s%d", i ? " " : "", x[i]);
  }
  printf("\n");
}

void generate_arrangements(int n, int k, int* x)
{
    int i;
    int j;
    int found;

    if (n == k)
    {
        print_arrangement(n, x);
    }
    else
    {
    for(i = 1; i <= n; i++)
    {
        found = 0;
        for(j = 0; j < k; j++)
        {
            if (x[j] == i)
            {
                found = 1;
            }
        }
        if (!found)
        {
            x[k] = i;
            generate_arrangements(n, k + 1, x);
        }
    }   
    }
}

int main(int argc, char **argv)
{
  int x[50];
  generate_arrangements(50, 0, x);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T04:28:26.550

您的程序不必要地使用了太多递归。它在实际足够的情况下使用`n!`递归。`n`

要仅使用`n`递归，请考虑递归函数的以下逻辑：

*   它接收一组`nums[]`唯一`n`的数字来排列
*   这些排列可以有不同的第一个数字，因为数组中`n`有不同的数字`n`
*   （关键步骤）循环遍历 的元素`nums[]`，并在每次迭代中创建一个新数组，但删除当前元素，然后递归到相同的函数，将这个较短的数组作为参数传递
*   随着递归的深入，参数数组会越来越小
*   当只剩下一个元素时，递归结束

使用此算法，您的递归不会比您的递归更深，`n`并且不会出现分段错误。关键在于关键步骤，您可以在其中构建一个新的数字数组，该数组始终比输入数组短 1 项。

作为旁注，请确保在提交之前检查程序的输出，例如运行它`| sort | uniq | wc -l`以确保您获得正确数量的组合，并检查是否没有重复`| sort | uniq -d`（如果输出应该为空，如果没有重复）。

**剧透警报：**这是我`C++`使用上述算法的变体的实现： [https ://gist.github.com/janosgyerik/5063197](https://gist.github.com/janosgyerik/5063197)

# git - 使用 Git 和 Sbt 自动部署网站

> ID：15122931
> 
> 赞同：1
> 
> 时间：2013-02-27T21:38:26.033
> 
> 标签：git, sbt

我有一个 git 存储库，其中包含一个简单的 Web 应用程序。Web 应用程序作为典型的 Scala 应用程序运行（我使用未过滤来具体说明）。换句话说，我可以使用“sbt start”在生产环境中运行 Web 应用程序。

我希望有一种更简单的方法来将更新部署到 Web 应用程序。我一直在创建一个程序集，将其复制到服务器，手动停止旧服务器，并启动一个新的服务器实例。

我的想法是拥有一个`web`直接推送到生产服务器的新远程存储库。然后我可以在生产 git 存储库上添加一个`post-receive`钩子，它会杀死旧服务器并启动一个新服务器。

这是自动部署的合理设置吗？是否有任何工具可以帮助执行此操作`sbt`和`git`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:17:41.713

我通常使用 Git 钩子部署 PHP 应用程序。基本思想是，从更新后挂钩执行第二个（非裸）存储库的更新和新版本的签出。之后，更新脚本更新数据库并向我发送电子邮件。

您可以使用这种方法进行最少的更改。克隆您的存储库以在 Web 服务器上构建区域并制作一个脚本，该脚本将：

1.  cd 到第二个存储库。
2.  重置 GIT_DIR 环境变量（它说明您的原始存储库在哪里，但您现在不想使用它）。
3.  从原始存储库 ( `git fetch origin`) 获取更改。
4.  检查它们（`git checkout --force master && git reset --hard`或类似的东西，只是为了确保它总是会成功）。
5.  构建您的应用程序并进行部署。

然后从原始存储库中的更新后挂钩运行此脚本。这里没有什么复杂的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:38:56.497

是的，您的解决方案适用于简单的情况。但它的扩展性很差，因为当你的软件变得更复杂时，你需要以*命令*的方式改变钩子。

看看其中一个[持续集成服务器](http://en.wikipedia.org/wiki/Continuous_integration#Software)（[Jenkins](http://jenkins-ci.org/)或[Travis](https://travis-ci.org/)是很好的起点）。当您只指定所需的结果时，使用 CI 服务器允许您使用*声明性方法。*CI 服务器负责您的大部分任务：从 repo 中获取最新代码、构建它、测试、打包、部署、发送电子邮件。此外，在与并行分支中的团队合作时，它也会很有用。总结：CI 为您的构建过程带来可扩展性，当您的代码库日益复杂并不会干扰您的部署时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T01:58:12.733

[https://rubygems.org/gems/git-runner](https://rubygems.org/gems/git-runner)

它是一个 ruby​​ gem（你不需要在你的应用程序中使用 Ruby 来利用它）在推送到 git 存储库后执行任务。然后，您可以编写自己的类来执行所需的部署任务（或查看使用/修改现有的 git-runner-deploy gem）。这可能符合您的要求，但如果您已经在流程中的某个地方使用了 ruby​​，那么使用它可能会更开心？

# c# - 编写一个等待 bool 的 Async 方法

> ID：15122936
> 
> 赞同：25
> 
> 时间：2013-02-27T21:38:45.977
> 
> 标签：c#, .net, asynchronous, async-await

我想编写一个将`await`变量设置为true的方法。

这是伪代码。

```
bool IsSomethingLoading = false
SomeData TheData;

public async Task<SomeData> GetTheData()
{
   await IsSomethingLoading == true;
   return TheData;
} 
```

`TheData`将由 Prism 事件与`IsSomethingLoading`变量一起设置。

我调用了该`GetTheData`方法，但我希望它运行异步（现在，如果数据尚未准备好，它只会返回 null。（这会导致其他问题。）

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-27T21:47:58.267

在许多这样的情况下，您需要的是一个`TaskCompletionSource`.

您可能有一种方法能够在某个时间点生成数据，但它不使用任务来完成它。也许有一个方法接受提供结果的回调，或者触发一个事件以指示有结果，或者只是使用 a`Thread`或`ThreadPool`您不倾向于重新考虑使用的代码`Task.Run`。

```
public Task<SomeData> GetTheData()
{
    TaskCompletionSource<SomeData> tcs = new TaskCompletionSource<SomeData>();
    SomeObject worker = new SomeObject();
    worker.WorkCompleted += result => tcs.SetResult(result);
    worker.DoWork();
    return tcs.Task;
} 
```

虽然您可能需要/想要向`TaskCompletionSource`工作人员或其他班级提供，或以其他方式将其暴露给更广泛的范围，但我发现通常不需要它，即使它在适当的时候是一个非常强大的选项。

您也可以使用`Task.FromAsync`基于异步操作创建任务，然后直接返回该任务，或者`await`在您的代码中返回。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-27T21:48:55.310

您可以使用[TaskCompletionSource](http://msdn.microsoft.com/en-us/library/dd449174.aspx)作为信号，并且`await`：

```
TaskCompletionSource<bool> IsSomethingLoading = new TaskCompletionSource<bool>();
SomeData TheData;

public async Task<SomeData> GetTheData()
{
   await IsSomethingLoading.Task;
   return TheData;
} 
```

在您的 Prism 活动中，请执行以下操作：

```
IsSomethingLoading.SetResult(true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-13T18:10:32.523

这对我有用：

```
while (IsLoading) await Task.Delay(100); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-29T21:31:43.253

我提出了一个非常简单的解决方案，但不是回答原始问题的最佳解决方案，如果您不关心速度性能：

```
...
public volatile bool IsSomethingLoading = false;
...
public async Task<SomeData> GetTheData()
{
    // Launch the task asynchronously without waiting the end
    _ = Task.Factory.StartNew(() =>
    {
        // Get the data from elsewhere ...
    });

    // Wait the flag    
    await Task.Factory.StartNew(() =>
    {
        while (IsSomethingLoading)
        {
            Thread.Sleep(100);
        }
    });

   return TheData;
} 
```

**重要提示**：@Theodor Zoulias 建议：`IsSomethingLoading`应使用`volatile`关键字声明，以避免编译器优化和从其他线程访问时潜在的多线程问题。有关编译器优化的更多信息，请参阅本文： [理论与实践中的 C# 内存模型](https://docs.microsoft.com/en-us/archive/msdn-magazine/2012/december/csharp-the-csharp-memory-model-in-theory-and-practice)

我在下面添加了一个完整的测试代码：

**XAML：**

```
<Label x:Name="label1" Content="Label" HorizontalAlignment="Left" Margin="111,93,0,0" VerticalAlignment="Top" Grid.ColumnSpan="2" Height="48" Width="312"/> 
```

**测试代码：**

```
public partial class MainWindow : Window
{
    // volatile keyword shall be used to avoid compiler optimizations
    // and potential multithread issues when accessing IsSomethingLoading
    // from other threads.
    private volatile bool IsSomethingLoading = false;

    public MainWindow()
    {
        InitializeComponent();

        _ = TestASyncTask();
    }

    private async Task<bool> TestASyncTask()
    {
        IsSomethingLoading = true;

        label1.Content = "Doing background task";

        // Launch the task asynchronously without waiting the end
        _ = Task.Factory.StartNew(() =>
        {
            Thread.Sleep(2000);
            IsSomethingLoading = false;
            Thread.Sleep(5000);
            HostController.Host.Invoke(new Action(() => label1.Content = "Background task terminated"));
        });
        label1.Content = "Waiting IsSomethingLoading ...";

        // Wait the flag    
        await Task.Run(async () => { while (IsSomethingLoading) { await Task.Delay(100); }});
        label1.Content = "Wait Finished";

        return true;
    }

}

/// <summary>
/// Main UI thread host controller dispatcher
/// </summary>
public static class HostController
{
    /// <summary>
    /// Main Host
    /// </summary>
    private static Dispatcher _host;
    public static Dispatcher Host
    {
        get
        {
            if (_host == null)
            {
                if (Application.Current != null)
                    _host = Application.Current.Dispatcher;
                else
                    _host = Dispatcher.CurrentDispatcher;
            }

            return _host;
        }
    }
} 
```

# python - 试图将 ffprobe 的输出转换为变量

> ID：15122942
> 
> 赞同：1
> 
> 时间：2013-02-27T21:39:11.660
> 
> 标签：python, ffprobe

我试图将视频文件中的 ffprobe 值抓取到一个变量中，我可以将其与其他变量进行比较或将值移动到数据库中。我的问题；有没有比下面更好的方法？

我不喜欢多个 if/elif/line.startswith 语句，我不确定 split 是获取 ffprobe 值的最佳方式吗？

```
#!/usr/bin/python
import os, sys, subprocess, shlex, re, fnmatch
from subprocess import call 

videoDrop_dir="/mnt/VoigtKampff/Temp/_Jonatha/test_drop"

for r,d,f in os.walk(videoDrop_dir):
    for files in f:
        print "Files: %s" % files
        if files.startswith(('._', '.')):
            print "This file: %s is not valid" % files
         elif files.endswith(('.mov', '.mpg', '.mp4', '.wmv', '.mxf')):
            fpath = os.path.join(r, files)
            def probe_file(fpath):
                cmnd = ['ffprobe', '-show_format', '-show_streams', '-pretty', '-loglevel', 'quiet', fpath]
                p = subprocess.Popen(cmnd, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
                print files
                out, err = p.communicate()
                print "===============================OUTPUT START: %s ===============================" % files
                print out
                for line in out.split('\n'):
                line = line.strip()
                if line.startswith('codec_name='):
                    s = line 
                    codec_name = s.split('codec_name=', 1)
                    print "Codec is: %s" % codec_name[1]
                    codec_1 = codec_name[1]
                elif line.startswith('codec_type='): 
                    s = line 
                    codec_type = s.split('codec_type=', 1)
                    print "Codec type is: %s" % codec_type[1]
                    codec_type1 = codec_type[1]   
                elif line.startswith('codec_long_name=', 1):
                    s = line 
                    codec_long_name = s.split('codec_long_name=', 1)
                    print "Codec long name: %s" % codec_long_name[1]
                    codec_long_name = codec_long_name[1]
                elif line.startswith('format_long_name=', 1):
                    s = line 
                    format_long_name = s.split('format_long_name=', 1)
                    print "Format long name: %s" % format_long_name[1]
                    format_long_name = format_long_name[1]
                elif line.startswith('width='): 
                    s = line 
                    width = s.split('width=', 1)
                    print "Video pixel width is: %s" % width[1]
                    p_width = width[1]
                elif line.startswith('height='): 
                    s = line 
                    height = s.split('height=', 1)
                    print "Video pixel height is: %s" % height[1]
                    p_height = height[1]    
                elif line.startswith('bit_rate='):
                    s = line 
                    bit_rate = s.split('bit_rate=', 1)
                    print "Bit rate is: %s" % bit_rate[1]
                    bit_rate1 = bit_rate[1]
                elif line.startswith('display_aspect_ratio=', 1):
                    s = line 
                    display_aspect_ratio = s.split('display_aspect_ratio=', 1)
                    print "Display aspect ratio: %s" % display_aspect_ratio[1]
                    display_aspect_ratio1 = display_aspect_ratio[1]
                elif line.startswith('avg_frame_rate=', 1):
                    s = line 
                    avg_frame_rate = s.split('avg_frame_rate=', 1)
                    print "Average Frame Rate: %s" % avg_frame_rate[1]
                    avg_frame_rate1 = avg_frame_rate[1]

            print "===============================OUTPUT FINISH: %s ===============================" % files
            if err: 
                print "===============================ERROR: %s ===============================" % files
                print err
        probe_file(fpath)
    else:
        if not files.startswith(('.mov', '.mpg', '.mp4', '.wmv', '.mxf')):
            print "This file: %s is not a valid video file" % files 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-29T07:03:30.630

这有点晚了，但希望它可以帮助其他人寻找类似的答案。

```
import json, subprocess

# grab info about video_file
ffprobe_cmd = '/home/ubuntu/bin/ffprobe -v quiet -print_format json -show_format -show_streams -  i ' + v + ' 2>&1'
# print ffprobe_cmd        
s = subprocess.Popen(ffprobe_cmd, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)

ffprobe_out, err = s.communicate()

ffprobe_dict = json.loads(ffprobe_out) 
```

从这里开始，我重用了一个常用方法 search_dict，它可以像这样使用：

```
search_dict(ffprobe_dict, 'height')

def search_dict(my_dict, field):
"""Takes a dict with nested lists and dicts,
and searches all dicts for a key of the field
provided.
"""
fields_found = []

for key, value in my_dict.iteritems():

    if key == field:
        fields_found.append(value)

    elif isinstance(value, dict):
        results = search_dict(value, field)
        for result in results:
            fields_found.append(result)

    elif isinstance(value, list):
        for item in value:
            if isinstance(item, dict):
                more_results = search_dict(item, field)
                for another_result in more_results:
                    fields_found.append(another_result)

return fields_found 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:18:19.443

[你应该在https://codereview.stackexchange.com/](https://codereview.stackexchange.com/)上问这个问题

# android - Android Circle 在 imageview 中的显示低于预期

> ID：15122946
> 
> 赞同：0
> 
> 时间：2013-02-27T21:39:27.010
> 
> 标签：android, android-canvas, android-imageview, touch-event

一旦触摸事件发生，我一直在尝试在 ImageView 内绘制一个圆圈，在 Touch 的位置。我已经制定了一些例子，包括[Android - Canvas drawLine inside ImageView](https://stackoverflow.com/questions/8445161/android-canvas-drawline-inside-imageview)。我的问题是，圆圈出现在大约。比触摸点低 117px。我的代码 -

```
public boolean onTouchEvent(MotionEvent event){
        Canvas c;
        Paint p;
        ImageView v;
        Bitmap bm;

    v = (ImageView)findViewById(R.id.image1);
    bm = Bitmap.createBitmap(v.getWidth(),v.getHeight(),Config.ARGB_8888);
    c = new Canvas(bm);
    p = new Paint();        
    p.setColor(Color.GREEN);        
    float x = event.getX(); float y = event.getY();
    c.drawCircle(x, y, 20, p);      

    v.setImageBitmap(bm);

    return true;
} 
```

[这](https://docs.google.com/file/d/0B_SOwlrEMpB9Z1JtVndhQlFxMG8/edit?usp=sharing)是 AVD 的屏幕截图（我也在真实设备上对其进行了测试）。我不知道出了什么问题或我遗漏了什么基本事实。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:46:01.163

看起来您正在覆盖 Activity 的 onTouchEvent？如果是这样，定位将相对于它的视图而不是图像视图。您必须考虑图像视图的位置并相应地进行翻译。

```
int relPosX = event.getX() - getLeft();
int relPoxY = event.getY() - getTop(); 
```

# html - CSS Float 不会拉伸 div 高度

> ID：15122949
> 
> 赞同：5
> 
> 时间：2013-02-27T21:39:41.970
> 
> 标签：html, css, css-float

在使用 HTML/CSS 和 Floats 时，我已经遇到这个问题很长时间了。

在图像中，您可以看到我有一个向左浮动的 Box Div，因为有很多这样的 Box。在盒子里面我有一个`<UL>`列表。列表项`<li>`也向左浮动。

正如您在图像中看到的那样，List 项目不会使它们位于 Expand 内部的 Box Div。我已经尝试了几件事，但运气不佳，希望有更多经验的人可以提供帮助？我无法在 Box Div 上设置固定高度，因为图标的数量总是不同的，并且需要扩展以修复它们。

![在此处输入图像描述](../Images/8901cdaa8acdc96f9c2020d322eaa957.png)

现场演示：http: [//jsfiddle.net/jasondavis/u5HXu/](http://jsfiddle.net/jasondavis/u5HXu/)

```
<div class="module-box">
    <div class="module-box-title">
        <h4><i class="icon-cogs"></i>Admin Settings</h4>
        <div class="tools">
            <a href="#" class="collapse">-</a>
        </div>
    </div>
    <div class="module-box-body" style="display: block;">

        <ul>
            <li>
                <a href="#">
                    <img src="http://cp.codedevelopr.com/modules/password_assistant/assets/icon.png" border="0">
                    <span class="module-icon password_assistant"></span>
                </a><br>
                <a href="#">Change<br>Password</a>
            </li>
            <li>
                <a href="#">
                    <img src="http://cp.codedevelopr.com/modules/password_assistant/assets/icon.png" border="0">
                    <span class="module-icon password_assistant"></span>
                </a><br>
                <a href="#">Change<br>Password</a>
            </li>
            <li>
                <a href="#">
                    <img src="http://cp.codedevelopr.com/modules/password_assistant/assets/icon.png" border="0">
                    <span class="module-icon password_assistant"></span>
                </a><br>
                <a href="#">Change<br>Password</a>
            </li>
        </ul>

    </div>
</div> 
```

CSS

```
/* Modules homepage */
.module-box {
    margin: 0px 0px 25px 25px;
    padding: 0px;
    float: left;
    width: 464px;
}

.module-box-title {
    margin-bottom: 0px;
    padding: 8px 10px 2px 10px;
    border-bottom: 1px solid #eee;
    color: #fff !important;
    background-color: #333;
    height: 51px;
    line-height: 45px;
    border-radius: 3px 3px 0 0;
}

.module-box-title h4 {
    display: inline-block;
    font-size: 18px;
    font-weight: 400;
    margin: 0;
    padding: 0;
    margin-bottom: 7px;
}

.module-box-title .tools {
    display: inline-block;
    padding: 0;
    margin: 0;
    margin-top: 6px;
    float: right;
}
.module-box-title .tools a {
    font-size: 31px;
    color: #fff;
    text-decoration: none;
    line-height: 29px;
}

.module-box-body {
    background-color: #fff;
    border: 1px solid #ccc;
    border-top: 0;
    padding: 10px;
    clear: both;
}

.module-box-body a {
    font-family: 'Source Sans Pro', sans-serif;
    font-size: 11px;
    color: #888;
    text-decoration: none;
}

.module-box-body li {
    float: left;
    margin: 0 12px 0 0;
    list-style: none;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T21:41:48.633

您需要使用 clearfix 或 clearing 元素清除浮动。

**方法#1 clearfix**

```
.clearfix:before,
.clearfix:after {
    content: " ";
    display: table;
}

.clearfix:after {
    clear: both;
}

.clearfix {
    *zoom: 1;
} 
```

然后在包含元素上添加类

```
 <div class="module-box-body clearfix" style="display: block;"> 
```

[http://jsfiddle.net/u5HXu/8/](http://jsfiddle.net/u5HXu/8/)

**方法#2 清除元素**

```
.clear {
    clear: both;
} 
```

然后在浮动元素之后添加以下 HTML。

```
<div class="clear"></div> 
```

[http://jsfiddle.net/u5HXu/9/](http://jsfiddle.net/u5HXu/9/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T21:42:35.990

您可以`overflow: hidden`在父容器上使用技巧 (..module-box-body) ;) 修复一切。

[http://jsfiddle.net/teddyrised/ct6gr/](http://jsfiddle.net/teddyrised/ct6gr/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T21:44:05.363

改变你`.module-box-body li`的

```
.module-box-body li {
    display: inline-block;
    margin: 0 12px 0;
    list-style: none;
} 
```

更新[了小提琴](http://jsfiddle.net/u5HXu/6/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T21:41:58.677

尝试应用`overflow:auto`到容器，您想根据其内容（浮动项目）的高度调整其高度。

我会添加一个 jsfiddle 链接，但它最近对我来说*根本*不起作用。：/

# ios - 前向地理编码不适用于 CLGeocoder，但可在 Apple Native Map 上按预期工作

> ID：15122950
> 
> 赞同：2
> 
> 时间：2013-02-27T21:39:44.250
> 
> 标签：ios, objective-c, xcode

我尝试使用 Apple GeoCoderDemo 进行前向地理编码。我尝试使用“Walmart Michigan”，与设备上的苹果本地地图应用程序相比，返回的结果完全不同。

搜索 stackOverflow 后，我知道 CLGeocoder 只能进行地址搜索而不是地址/企业名称搜索，这意味着它正在寻找包含密歇根州沃尔玛的街道名称。

但我很想知道为什么苹果的原生地图可以完美地完成这项工作。有谁知道其中的秘密？

感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:58:05.077

在 iOS 6.1 中，Apple 向我们[`MKLocalSearch`](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKLocalSearch/Reference/Reference.html#//apple_ref/doc/uid/TP40012893)展示了真正的搜索功能，类似于 Maps 应用的功能。例如：

```
MKLocalSearchRequest *request = [[MKLocalSearchRequest alloc] init];
request.naturalLanguageQuery = @"restaurant";
request.region = mapView.region;

MKLocalSearch *localSearch = [[MKLocalSearch alloc] initWithRequest:request];
[localSearch startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error) {

    NSMutableArray *annotations = [NSMutableArray array];

    [response.mapItems enumerateObjectsUsingBlock:^(MKMapItem *item, NSUInteger idx, BOOL *stop) {
        CustomAnnotation *annotation = [[CustomAnnotation alloc] initWithPlacemark:item.placemark];
        annotation.title = item.name;
        annotation.phone = item.phoneNumber;
        annotation.subtitle = item.placemark.addressDictionary[(NSString *)kABPersonAddressStreetKey];
        [annotations addObject:annotation];
    }];

    [self.mapView addAnnotations:annotations];
}]; 
```

# c++ - 我认为下面的陈述不正确还是我遗漏了什么？

> ID：15122953
> 
> 赞同：6
> 
> 时间：2013-02-27T21:40:16.190
> 
> 标签：c++

以下段落摘自 Stroustup 书“The C++ Programming Language”（第三版）的第 420 页：

> 因为指向虚拟成员（本例中为 s）的指针是一种偏移量，所以它不依赖于对象在内存中的位置。因此，只要在两个地址空间中使用相同的对象布局，指向虚拟成员的指针就可以安全地在不同地址空间之间传递。与指向普通函数的指针一样，指向非虚拟成员函数的指针不能在地址空间之间交换。

我对本段的最后一句话提出异议。下面，您将找到一个代码片段，其中指向**非虚拟**成员函数`foo()`和的指针在一个基础对象和派生对象`foo1()`之间进行交换，没有问题。`a``b`

不能重载基类`foo()`或`foo1()`派生类中的任何函数，因为在这种情况下，编译器将发出如下所示的错误。

```
#include <iostream>

class A
{
    int i;
    public:
    A() : i(1) {}
    void foo() { std::cout << i << '\n'; }
    void foo1() { std::cout << 2 * i << '\n'; }
};

class B: public A
{
    int j;
    public:
    B() : A(), j(2) {}
//  void foo() { std::cout << j << '\n'; }
};

int main()
{
    typedef void (A::* PMF)();
    PMF p = &B::foo;    //   error C2374: 'p' redefinition, multiple initialization
                        //   if foo() is overloaded in B.
    PMF q = &B::foo1;
    B b;
    (b.*p)();
    (b.*q)();

    A a;
    (a.*p)();
    (a.*q)();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:33:10.803

那句话是正确的：在（标准）C++ 中，一个程序，或者更确切地说是进程，只有一个地址空间。所以正如 ulidtko 所指出的，这句话是指在不同进程的地址空间之间交换指向虚拟与非虚拟成员函数的指针的可能性。

类的**非虚拟成员函数**几乎是一个标准函数，带有一个隐含参数到您调用它的对象（*this*指针）。因此，它会在加载时在进程的地址空间中分配一些地址。它最终在您的地址空间中的确切位置当然取决于您的平台以及该成员函数是否是动态链接库的一部分。关键是，对于两个进程，它不一定是相同的地址。因此，传递一个指针然后在另一个进程中执行这样的函数可能会“让你的机器着火（TM）”。

虚拟**成员函数**仍然与非虚拟成员函数几乎相同，例如“在执行时跳转到内存中的某个地址并将 this 指针传递给它”，但**它是通过虚拟函数表（vtable）调用的**的直接。因此，指向虚成员函数的指针几乎只是对象虚函数表的索引。调用该函数然后按照'获取对象指针，可能会增加指针以到达对象的 vtable 并跳转到该表的给定索引处的地址，将对象本身的地址作为*this*指针传递'。

免责声明：我有点倾向于“我真的知道我在说什么”——这里的舒适区。因此，如果我过分简化了某些事情或更糟，但从事散布虚假信息的活动，请随时将我的答案撕碎；)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:01:08.987

指针将始终作为虚拟内存存在，因此它是正确的，您可以检查地址并看到没有指向内存地址的物理指针

因为指向**虚拟成员**（本例中为 s）的指针是一种偏移量，所以它不依赖于对象在内存中的位置。因此，只要在两个地址空间中使用相同的对象布局，指向虚拟成员的指针就可以安全地在不同地址空间之间传递。与指向普通函数的指针一样，指向非虚拟成员函数的指针不能在地址空间之间交换。

# java - 如何对文件夹应用正确的“读取”权限？

> ID：15122956
> 
> 赞同：1
> 
> 时间：2013-02-27T21:40:20.223
> 
> 标签：java, windows, file

如何对文件夹应用正确的“读取”权限？

你好，

请问，我们如何在Windows上的java类中对文件夹应用正确的“读取”权限，我们如何知道我们是否有权“读取”文件夹？“阅读”当然

我用“io”java的“File”类提供的canRead()和setReadable(true)进行了测试，但还是不行！

即使您无权“读取”文件夹，canRead() 方法也始终返回 true。

setReadable(true) 方法没有对文件夹应用正确的“读取”

```
import java.io.File;

public class TestTest {
public static void main(String[] args) {
    File f = new File("D:/Test");
    if(f.canRead())
        System.out.println("OK => "+f.setWritable(true));
    else
        System.out.println("KO");
}
} 
```

有解决方案吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:43:22.647

看看新的 NIO.2 File API：

[http://docs.oracle.com/javase/tutorial/essential/io/fileAttr.html](http://docs.oracle.com/javase/tutorial/essential/io/fileAttr.html)

# javascript - 我的脚本如何更改特定字体（针对特定类）？

> ID：15122959
> 
> 赞同：6
> 
> 时间：2013-02-27T21:40:37.960
> 
> 标签：javascript, css, fonts, greasemonkey, tampermonkey

我正在尝试制作自己的 Tampermonkey 脚本，以将特定站点上的特定字体样式从草书样式更改为无衬线样式。

该网站的 HTML 是：

```
<div class="text">Ask more leading questions</div> 
```

这嵌套在 2 个 id 和一个其他类中。

我正在编写的脚本基于我尝试遵循的几个示例：

```
// ==UserScript==
// @name       Change annoying fonts
// @namespace  http://use.i.E.your.homepage/
// @version    0.1
// @description  change annoying FaracoHandRegular font to a more readable one
// @match      https://apps.bloomboard.com/*
// @copyright  2012+, You
// ==/UserScript==

function addCss(cssString) { 
var head = document.getElementsByClassName('text')[0]; 
var newCss = document.createElement('style');
newCss.type = "text/css"; 
newCss.innerHTML = cssString; 
head.appendChild(newCss); 
} 

addCss ( 
'* { font-family: Helvetica, sans-serif ! important; }' 
); 
```

但它不起作用。

我以前从未为 Greasemonkey 或 Tampermonkey 制作过自己的脚本。如何更改此字体？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T02:27:32.637

几件事：

1.  首先，**对于简单的 CSS 更改，请使用[*Stylus*](https://github.com/openstyles/stylus)。** 它更快更简单。

    在这种情况下，等效的 Stylus 脚本将是：

    ```
    @namespace url(http://www.w3.org/1999/xhtml);

    @-moz-document domain("apps.bloomboard.com") {
        .text {
            font-family: Helvetica, sans-serif !important;
        }
    } 
    ```

    或者可能：

    ```
    @namespace url(http://www.w3.org/1999/xhtml);

    @-moz-document domain("apps.bloomboard.com") {
        * {
            font-family: Helvetica, sans-serif !important;
        }
    } 
    ```

    `*`尽管应该谨慎设置通用样式。

2.  不要重新发明轮子。大多数用户脚本引擎支持[GM_addStyle()](https://www.tampermonkey.net/documentation.php#GM_addStyle)。用那个。您的脚本将变为：

    ```
    // ==UserScript==
    // @name       Change annoying fonts
    // @namespace  http://use.i.E.your.homepage/
    // @version    0.1
    // @description  change annoying FaracoHandRegular font to a more readable one
    // @match      https://apps.bloomboard.com/*
    // @copyright  2012+, You
    // @grant      GM_addStyle
    // ==/UserScript==

    GM_addStyle ( `
        .text {
            font-family:    Helvetica, sans-serif !important;
        }
    ` ); 
    ```

3.  另请参阅并阅读：

    1.  [关于 CSS](https://stackoverflow.com/tags/css/info)
    2.  [理解 CSS 中的样式优先级：特异性、继承和级联](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)
    3.  [关于 CSS 选择器](https://stackoverflow.com/tags/css-selectors/info)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-03T00:22:56.463

我不反对 Stylish 可能是 OP 特定用例的更好选择。也就是说，可能在其他情况下使用用户脚本很有用。

您的用户脚本的问题是您混合了两种不同的方式来更改元素的 CSS。第一个是为`<head>`标签添加一个额外的样式表。另一种是使用 DOM 方法来抓取元素并直接更改其样式。

前者的优点是您可以在元素实际加载之前进行更改（`@run-at document-start`例如，通过使用）。这意味着该元素在首次显示时已经更改。后者的优点是您可以只更改单个元素，而不用更改所有元素 `class="text"`。

对于第一种方法，您需要修改传递给的 css 选择器`addCss`。：

```
function addCss(cssString) {
    //...
}  
 addCss (
     '.text { font-family: Helvetica, sans-serif !important; }' ); 
```

或替代方案：

```
var text = document.getElementsByClassName('text')[0];
text.style.fontFamily = "Helvetica, sans-serif"; 
```

最后，这是我倾向于在我的用户脚本中使用的第一个选项的较短版本^*：

```
var style = document.createElement('style'); style.innerHTML = `
  .text { font-family: Helvetica, sans-serif !important; }
`; document.head.appendChild(style); 
```

^(**虽然 GM_addStyle 也可用，但使用任何 GM_* 函数会将所有内容加载到沙箱中，需要使用 unsafeWindow 来修改页面的 JavaScript。对于这样一个简单的功能，这是不必要的。此外，由于无需使用特权 GM_* 代码即可轻松完成，因此 GreaseMonkey 的设计者建议不要使用此功能，并且一直在考虑删除该功能。*)

# magento - Magento - 获取交易电子邮件变量

> ID：15122963
> 
> 赞同：1
> 
> 时间：2013-02-27T21:41:03.377
> 
> 标签：magento, transactional-email

我只是在阅读

```
http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/system_email_template/index#email_variables 
```

有人知道我如何自己找到这些变量吗？wiki 页面说它们实际上可能不起作用，我尝试使用的变量是 {{var shippingMethod}}，但是，它返回空白。

我想知道，一个是不是正确的变量名，二是如果这是正确的变量名，我需要在我的自定义运输方式中添加什么功能？

谢谢！

杰夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T02:11:35.117

这是一段可以帮助您的代码：

```
public function sendMail() {
    $mailTemplate = Mage::getModel('core/email_template');
    $template = Mage::getStoreConfig(self::XML_PATH_EMAIL_TEMPLATE); // template id of email template
    $email = Mage::getStoreConfig(self::XML_PATH_EMAIL_RECIPIENT); // recipient example: example@yahoo.com
    $mailTemplate->setDesignConfig(array('area'=>'frontend'))
        ->sendTransactional(
        $template,
        Mage::getStoreConfig(self::XML_PATH_EMAIL_IDENTITY),
        $email,
        null,
        array(
            'subject'   => $this->getSubject(),
            'line'      => $this->getLine(),
            'message'   => $this->getMessage()
        )
    );
    $translate->setTranslateInline(true);
    return $this;
} 
```

的数组

```
 array(
            'subject'   => $this->getSubject(),
            'line'      => $this->getLine(),
            'message'   => $this->getMessage()
        ) 
```

可以通过 {{var subject}} {{var line}} {{var message}} 获取

* * *

那么如何获取 shippingMethod 呢？

您必须先获取**运输方式**的模型并**加载运输方式**，然后**将其设置为数组**。

# django - Imagekit SpecFields 缩小图像，但不放大

> ID：15122964
> 
> 赞同：1
> 
> 时间：2013-02-27T21:41:07.933
> 
> 标签：django, imagekit

Imagekit 会缩小大于 800x500 的上传图像，但也会放大小于 800x500 的图像。

如何创建 ImageSpecField 以便不放大适合定义大小的图像？

```
post_embed_image = ImageSpecField([SmartCrop(800, 500)], image_field='original_image')
post_embed_resized_image = ImageSpecField([SmartResize(800, 500)], image_field='original_image') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:02:45.680

它改变了[imagekit 文档](http://django-imagekit.readthedocs.org/en/latest/)是如何过时的，并且没有提到带有 Upscale 布尔值的 ResizeToFit 处理器

[https://github.com/jdriscoll/django-imagekit/blob/master/imagekit/processors/resize.py](https://github.com/jdriscoll/django-imagekit/blob/master/imagekit/processors/resize.py)

以下 ImageSpecField 将调整大图像的大小并保留较小的图像。

```
post_resized_image = ImageSpecField([ResizeToFit(800, 500, False)], image_field='original_image') 
```

# c# - 使 GridView 页脚数据像行数据一样绑定

> ID：15122965
> 
> 赞同：0
> 
> 时间：2013-02-27T21:41:08.457
> 
> 标签：c#, asp.net, data-binding, gridview, footer

我有一个使用 GridViews 的 C# 创建的 ASP.NET 项目。页脚行包含基于列数据的总数与来自数据的设定值的比率，说明应该有多少。用户需要能够修改第二个值并更新页脚。我无法找出如何做到这一点，或者即使有可能。我考虑在下面使用另一个 GridView，但确保两者之间的列线同步是一场噩梦。有任何想法吗？

此外，当我更改列数据（使用编辑/更新行）时，当我单击更新时总数不会更新，但当我再次单击编辑时会更新。谁能告诉我为什么会这样以及如何在更新时更新页脚中的总数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-14T22:01:12.623

如果您发现您编辑的字段被“单击后”刷新，通常是因为您认为您已经反弹`GridView`但实际上没有，或者您在进行更新之前已经反弹。

使用 Gridview，每当您在页脚中放置字段时，一个典型的场景是在页面生命周期的数据绑定操作期间计算它的值

就像这样，您的 .aspx 文件定义了一些页脚字段，通常是一些`BoundField`已转换为`TemplateField`s 的字段。这是一个片段：

```
<asp:GridView ID="GridView1" runat="server" ShowFooter="true" ...>
  <Columns>
    <asp:BoundField DataField="Field1" HeaderText="Title" SortExpression="Field1" />
    <asp:TemplateField>
      <ItemTemplate>
        <asp:Label ID="Label1" runat="server" Text='<%# Bind("Field2") %>' ></asp:Label>
      </ItemTemplate>
      <FooterTemplate>
        <asp:Label ID="FooterLabel1" runat="server" Text="" ></asp:Label>
      </FooterTemplate>
    </asp:TemplateField>
  </Columns>
</asp:GridView> 
```

后面代码中的 GridView 事件：这通常是根据更改的行值填充页脚字段所需执行的操作。这是 VB 但你应该能够很容易地转换它。

```
// Create a variable at the Page level that will exist for 
// the duration of the Page LifeCycle
Private FooterLabel1SubTotal as Double

// Initialize
Private Sub GridView1_DataBinding(sender As Object, e As EventArgs) Handles GridView1.DataBinding
  FooterLabel1SubTotal = 0.0
End Sub

// Accumulate
Private Sub GridView1_RowDataBound(sender As Object, e As GridViewRowEventArgs) Handles GridView1.RowDataBound
  If e.Row.RowType = DataRow Then
    Dim Field2 as Label = e.Row.FindControl("Field2")
    FooterLabel1SubTotal += Convert.ToDouble(Field2.Text)
  End If
End Sub

// Populate Footer with formated value
Private Sub GridView1_DataBound(sender As Object, e As EventArgs) Handles GridView1.DataBound
  FooterLabel1 = GridView1.FooterRow.FindControl("FooterLabel1")
  FooterLabel1.Text = String.Format("{0:F2}", FooterLabel1SubTotal)

End Sub 
```

现在，如果您使用 GridView 的任何内置编辑功能，这将导致回发并导致`GridView`重新绑定，这将每次重新计算页脚字段。

# javascript - 如何让表单中的提交按钮在执行表单的操作之前做一些事情

> ID：15122966
> 
> 赞同：0
> 
> 时间：2013-02-27T21:41:10.377
> 
> 标签：javascript, jquery, html

晚上好，我有一个 HTML 表单，其中包含一个提交按钮，该按钮执行表单操作以外的其他操作，我希望这些提交按钮先执行操作，然后执行表单操作，该按钮执行一个不错的 jquery slideUp () 但是当我将它嵌入到表单中时，它会执行表单的操作并忽略 slideUp() 行为，在提交表单之前让该按钮首先执行 slideUp() 的可能方法是什么？

这是表格：

```
 <form action="AddNewCar" method="get">
            <table BORDER=2 BORDERCOLOR=YELLOW width="300px">
                <tr>
                    <td>Description: <input type="text" name="desc" /></td>
                    <td>Quantity:<input type="text" name="qunt" /></td>
                    <td>Price: <input type="text" name="price" /></td>
                </tr>

                <tr>
                    <td>CC.No: <input type="text" name="cc" /></td>
                    <td>Engine: <input type="text" name="engine" /></td>
                    <td>Cylinder.No: <input type="text" name="cylinder" /></td>
                </tr>

                <tr>
                    <td>Max-speed: <input type="text" name="speed" /></td>
                    <td>Petrol-type: <input type="text" name="ptr-type" /></td>
                    <td>Petrol-capacity: <input type="text" name="ptr-cpcty" /></td>

                </tr>
                <tr>

                    <td colspan="3"><input type="submit" class="btn1" value="Add" onclick="addNewCar()" /></td>

                </tr>
            </table>

        </form> 
```

这是脚本应该在其他任何事情之前执行：

```
<script type="text/javascript" src="jquery-1.9.1.min.js"></script> 
```

```
$(".btn1").click(function() {
        $('#toggleText').slideUp();
    });

</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:43:03.280

```
$(".btn1").on('click', function(e) {
    e.preventDefault()

    var self = this;
    $('#toggleText').slideUp('fast', function() {
         self.form.submit();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:55:58.450

您可以创建一个提交按钮，该按钮使用 onclick 触发功能，然后提交您的表单。例如。

提交的html按钮

```
<input type="button" value="Submit Order" class="btn_submit" onclick="submitOrder()" /> 
```

你的javascript函数

```
//function called when submit button pressed
function submitOrder() {

    //perform client side form validation and other things

    //submit the form
    $('#yourFormId').submit();
} 
```

或者，使用您当前拥有的按钮。您可以在按下按钮时阻止表单提交，执行所需的操作，然后提交表单。

javascript

```
$('form').submit(function(evt){
//prevent form from submitting
evt.preventDefault();
//do required actions

//submit form
$('form').submit();

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:34:36.430

您应该将幻灯片放在一个方法中并在提交时调用它

```
<form action="AddNewCar" onsubmit="slideupmethod" method="get">

function slideupmethod(){
   $('#toggleText').slideUp();
} 
```

# java - 使用 form:options 进行表单验证

> ID：15122968
> 
> 赞同：1
> 
> 时间：2013-02-27T21:41:13.843
> 
> 标签：java, spring, jsp

`Form:Options`工作得很好，但是如果我在表单中提交了错误的数据，则`form:options`显示为选中`newContact.jsp`的第一个元素。`departmentList`

联系人控制器：

```
@RequestMapping(value="/saveContact", method=RequestMethod.GET)
public ModelAndView newuserForm(){
    ModelAndView mav = new ModelAndView("newContact");
//  Contact contact = new Contact();        
//  Department department = new Department();
    User user = (User)SecurityContextHolder.getContext().getAuthentication().getPrincipal();
    String name = user.getUsername();
    mav.addObject("username", name);
    mav.addObject("newContact", new Contact());
//  mav.addObject("department", department);
    mav.addObject("departmentList", departmentService.listDepartment());

    //mav.getModelMap().put("newContact", contact);
    return mav;
}

@RequestMapping(value="/saveContact", method=RequestMethod.POST)
public String create(@ModelAttribute("newContact")Contact contact, BindingResult result, SessionStatus status,Map<String, Object> map)
{
    User user = (User)SecurityContextHolder.getContext().getAuthentication().getPrincipal();
    String name = user.getUsername();

    map.put("departmentList", departmentService.listDepartment());
    map.put("username", name);

    contactFormvalidator.validate(contact, result);
    if (result.hasErrors()) 
    {               
        return "newContact";
    }
    contactService.addContact(contact);
    status.setComplete();
    //return "redirect:/showContacts.do";
    return "newContactSuccess";
} 
```

newContact.jsp：

```
<%@include file="header.jsp"%>

<div id="menu">
    <div id="subMenu"></div>
</div>

<div id="main">

    <h2>Contact Manager</h2>

    <form:form  method="post" action="saveContact.do" commandName="newContact" >

        <table>
            <tr>
                <td><form:label path="firstname">
                        <spring:message code="label.firstname" />
                    </form:label></td>
                <td><form:input path="firstname" /></td>
                <td><form:errors path="firstname" cssStyle="color:red"></form:errors> </td>
            </tr>
            <tr>
                <td><form:label path="lastname">
                        <spring:message code="label.lastname" />
                    </form:label></td>
                <td><form:input path="lastname" /></td>
                <td><form:errors path="lastname" cssStyle="color:red"></form:errors> </td>
            </tr>
            <tr>
                <td><form:label path="email">
                        <spring:message code="label.email" />
                    </form:label></td>
                <td><form:input path="email" /></td>
                <td><form:errors path="email" cssStyle="color:red"></form:errors> </td>
            </tr>
            <tr>
                <td><form:label path="telephone">
                        <spring:message code="label.telephone" />
                    </form:label></td>
                <td><form:input path="telephone" /></td>
                <td><form:errors path="telephone" cssStyle="color:red"></form:errors> </td>
            </tr>

            <tr>    
                <td><form:label path="department">
                        <spring:message code="label.department" />
                    </form:label></td>  
                    <td><form:select path="department" >        
                    <form:option  label="**SELECT**" value="0"></form:option>                           
                            <form:options  items="${departmentList}"  itemValue="id" itemLabel="name"></form:options>                           
                        </form:select> </td>
                    <td><form:errors path="department" cssStyle="color:red"></form:errors> </td>
            </tr>  

            <tr>
                <td colspan="2"><input type="submit"
                    value="<spring:message code="label.addcontact"/>" /></td>
            </tr>

        </table>
    </form:form>        

</div>

<%@ include file="footer.jsp"%> 
```

ContactFormValidator：

```
package pl.ivmx.contact.validator;

import java.util.regex.*;

import org.springframework.stereotype.Component;
import org.springframework.validation.Errors;
import org.springframework.validation.Validator;
import pl.ivmx.contact.form.Contact;;

//@Component("contactFormValidator")
public class ContactFormValidator implements Validator{
    @Override
    public boolean supports(Class clazz) {
        return Contact.class.isAssignableFrom(clazz);
    }

    @SuppressWarnings("unchecked")
    @Override
    public void validate(Object obj, Errors errors) {       
        Contact contact = (Contact) obj;
        Pattern p = Pattern.compile("[a-zA-Z]*[0-9]*@[a-zA-Z]*.[a-zA-Z]*");
        Matcher m = p.matcher(contact.getEmail());
        boolean b = m.matches();
        if (b != true) {
            errors.rejectValue("email", "error.is.not.valid",
                    "Email  does not Valid ");
        }

        if (contact.getFirstname() == null || contact.getFirstname().length() < 3) {
            errors.rejectValue("firstname", "error.empty.field",
                    "Please Enter First Name");
        }

        if (contact.getLastname() == null || contact.getLastname().length() < 4) {
            errors.rejectValue("lastname", "error.empty.field",
                    "Please Enter Last Name");
        }

        if (contact.getTelephone() == 0 || String.valueOf(contact.getTelephone()).trim().length() < 2 ||
                String.valueOf(contact.getTelephone()).trim().length() > 9) {
            errors.rejectValue("telephone", "error.empty.field",
                    "Please Enter Telephone");
        }

        if (contact.getDepartment() == null) {
            errors.rejectValue("department", "error.empty.field",
                    "Please select department");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:55:13.100

而不是在您的提交方法中返回 String 而是返回 ModelAndView ...

```
@RequestMapping(value="/saveContact", method=RequestMethod.POST)
public ModelAndView create(@ModelAttribute("newContact")Contact contact, BindingResult result, SessionStatus status,ModelMap map)
    {
       User user = (User)SecurityContextHolder.getContext().getAuthentication().getPrincipal();
       String name = user.getUsername();

       map.addAttribute("departmentList", departmentService.listDepartment());
       map.addAttribute("username", name);

       contactFormvalidator.validate(contact, result);
       if (result.hasErrors()) 
       {               
         return new ModelAndView("newContact",map);
       }
       contactService.addContact(contact);
       status.setComplete();
       //return new ModelAndView("redirect:/showContacts.do");
       return new ModelAndView("newContactSuccess"); 
```

}

# django - manage.py - 不在项目文件夹中？

> ID：15122971
> 
> 赞同：4
> 
> 时间：2013-02-27T21:41:18.000
> 
> 标签：django, django-admin, django-manage.py, manage.py

我是第一次尝试 Django，我正在尝试按照django 团队提供[的教程进行操作。](https://docs.djangoproject.com/en/dev/intro/tutorial01/)

在我创建了一个新项目后，我得到了以下文件夹/文件结构，正如教程所说的那样：

```
mysite/
    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py 
```

当我创建一个应用程序时，我运行：

```
python manage.py startapp polls 
```

...它在与 manage.py 文件相同的文件夹中创建应用程序“polls” - 这给了我：

```
mysite/
    manage.py
    polls/
        __init__.py
        admin.py
        models.py
        tests.py
        views.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py 
```

这意味着我创建的应用程序是在我的项目文件夹之外创建的，当然，情况不应该如此。我试图将 manage.py 移动到项目文件夹中。但是当我这样做并运行时：

```
python manage.py syncdb 
```

...我收到以下错误：

```
raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" %     (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'testproject.settings' (Is it on sys.path?): No     module named testproject.settings 
```

我想我可以手动将应用程序移动到项目文件夹，但这是我不应该做的事情。

所以，要么是教程中有问题（我很难相信），要么我在这里遗漏了一些东西（更有可能）。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T21:43:24.883

这是新的正确布局。“mysite/mysite”是一个应用程序，“mysite/polls”是一个应用程序。“mysite”父文件夹是您的项目文件夹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T21:45:04.163

@holyredbeard 这是正确的布局你在阅读旧文档吗？

有用的阅读：[http ://www.tdd-django-tutorial.com/blog/articles/2012/tutorials-updated-django-14-and-its-weird-new-fold/](http://www.tdd-django-tutorial.com/blog/articles/2012/tutorials-updated-django-14-and-its-weird-new-fold/)

不要移动 manage.py 它应该位于应用程序和项目文件夹之外。

从 1.4 开始的常见布局示例...

```
project_root/
   project_name/
       media/
       static/
       static_root/ (in production)
       templates/some_app/foo.html (overriding some_app at project level)
                /admin/some_app/some_model/change_list.html
                (overriding admin changelist for some_app.models.some_model)
       settings.py
       settings_deployment.py
       urls.py
   some_app/
       templates/some_app/foo.html
       urls.py
       views.py
       models.py
   manage.py 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:52:29.743

这是自 1.4 版本以来的官方布局。

发行说明中很好地解释了背后的基本原理： [https ://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py](https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py)

不要动`manage.py`。一般来说，你可以期望 Django 自己的脚本总是做正确的事情，你不需要移动任何文件来让它工作。

# algorithm - 为随机森林训练过程构建数据集

> ID：15122974
> 
> 赞同：1
> 
> 时间：2013-02-27T21:41:29.167
> 
> 标签：algorithm, machine-learning, decision-tree, random-forest

我应该使用*bagging*（*bootstrap 聚合*的缩写）技术来训练随机森林分类器。我[在这里](http://en.wikipedia.org/wiki/Bootstrap_aggregating)阅读了这种学习技术的描述，但我还没有弄清楚我最初是如何组织数据集的。

目前，我首先加载所有正面示例，然后立即加载负面示例。而且，正例少于负例的一半，所以*通过从数据集中均匀采样，*得到负例的概率大于得到正例的概率。

我应该如何构建初始数据集？我应该打乱包含正面和负面例子的初始数据集吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T04:06:40.700

Bagging 依赖于使用[引导样本](http://en.wikipedia.org/wiki/Bootstrapping_%28statistics%29)来训练不同的预测变量，并聚合它们的结果。有关完整详细信息，请参阅上面的链接，但简而言之 - 您需要从数据中重复采样（即，如果您有 N 个编号为 1 到 N 的元素，请在 1 和 N 之间选择 K 个随机整数，然后选择那些 N 个元素作为训练集），通常创建与原始数据集大小相同的样本（即 K=N）。

您可能应该记住的另一件事 - 随机森林不仅仅是对原始数据的引导聚合 - 还有一个随机选择的特征子集用于每个单独的树。

# java - Jenkins：构建步骤的条件触发器

> ID：15122977
> 
> 赞同：0
> 
> 时间：2013-02-27T21:41:41.610
> 
> 标签：java, jenkins

我们在同一个 SVN 存储库中有一个包含几个子项目的项目。例如：

```
svn://ip/svn/ trunk/subproject1
svn://ip/svn/ trunk/subproject2 
```

Jenkins 是否可以在构建步骤中创建条件触发器？

我将澄清：我只想在其 SVN 树已更改时执行 Maven 构建步骤。

例如，svn://ip/svn/trunk/subproject1 树已更改。在这种情况下，应该触发整个构建。

然后，（因为 svn://ip/svn/trunk/subproject1 树已更改）将执行 subproject1 的 Maven 构建步骤。

但是 subproject2 的 Maven 构建步骤不会被执行，因为 svn://ip/svn/trunk/subproject2 没有改变。

任何帮助将不胜感激！

最好的问候，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:52:34.160

简短的回答：没有。

长答案：是的，如果您为每个模块创建单独的 Jenkins 构建，*并且*父项目不会尝试同时成为“聚合器”POM（包含子模块列表）和“父”POM（包含孩子们）。这还具有正确重建依赖项目的好处。

也就是说，你为什么担心用 Jenkins 重建一切？这通常是最好的方法，因为它会清除子项目之间的任何意外关系。

# javascript - JavaScript 语法错误，但仅在 IE7/8 中

> ID：15122982
> 
> 赞同：0
> 
> 时间：2013-02-27T21:42:03.343
> 
> 标签：javascript, internet-explorer, syntax-error

我在 IE 7 和 8 中遇到以下 javascript 错误 - 我得到的错误代码是：

消息：预期 ')' 行：1 字符：19 代码：0

有问题的 JS 是：

```
var lct_days = 0;
var lct_hours = 0;
var lct_minutes = 0;
var lct_seconds = 0;

function calc_data(dateandtime) {
    dateandtime = datetime.split(" ");
    tempdate = dateandtime[0].split("/");
    temptime = dateandtime[1].split(":");

    var seconds = 1000;
    var minutes = seconds * 60;
    var hours = minutes * 60;
    var days = hours * 24;
    var years = days * 365;

    var db_time = new Date(tempdate[0], tempdate[1] - 1, tempdate[2], temptime[0], temptime[1], 00);
    var now_time = new Date();
    db_time = db_time.getTime();
    now_time = now_time.getTime();
    var lctresult = db_time - now_time;

    lct_years = Math.floor(lctresult / years);
    lct_days = Math.floor(lctresult / days) - (lct_years * 365);
    lct_hours = Math.floor(lctresult / hours) - (lct_days * 24) - (lct_years * 365 * 24);
    lct_minutes = Math.floor(lctresult / minutes) - (lct_hours * 60) - (lct_days * 24 * 60) - (lct_years * 365 * 24 * 60);
    lct_seconds = Math.floor(lctresult / seconds) - (lct_minutes * 60) - (lct_hours * 60 * 60) - (lct_days * 60 * 24 * 60) - (lct_years * 365 * 24 * 60 * 60);
    singlebox = false;
    if (lct_years > 99) {
        lct_years = 99;
    }
    if (lct_days > 99) {
        singlebox = true;
    }
    if (lct_years < 0) lct_years = 0;
    if (lct_days < 0) lct_days = 0;
    if (lct_hours < 0) lct_hours = 0;
    if (lct_minutes > 60) lct_minutes = 60;
    if (lct_minutes < 0) lct_minutes = 0;
    if (lct_seconds < 0) lct_seconds = 0;
}

function setlct(datetime) {
    calc_data(datetime);
    if (lct_years == 0) {
        jQuery('.LCT').find('div:nth-child(1)').removeClass('hide').addClass('hide');
        if (lct_days == 0) {
            jQuery('.LCT').find('div:nth-child(2)').removeClass('hide').addClass('hide');
            if (lct_hours == 0) {
                jQuery('.LCT').find('div:nth-child(3)').removeClass('hide').addClass('hide');
                if (lct_minutes == 0) {
                    jQuery('.LCT').find('div:nth-child(4)').removeClass('hide').addClass('hide');
                    //if(lct_seconds==0)
                    //jQuery('.LCT').find('div:nth-child(5)').removeClass('hide').addClass('hide');
                }
            }
        }
    }

    if (jQuery('.LCT').find('div.type').siblings().length == 5) {
        jQuery('.LCT').find('div:nth-child(1) .bg p').html(lct_years);
        jQuery('.LCT').find('div:nth-child(2) .bg p').html(lct_days);
        jQuery('.LCT').find('div:nth-child(3) .bg p').html(lct_hours);
        jQuery('.LCT').find('div:nth-child(4) .bg p').html(lct_minutes);
        jQuery('.LCT').find('div:nth-child(5) .bg p').html(lct_seconds);

        if (jQuery('.LCT div:nth-child(2)').hasClass('big')) {
            if (singlebox == true) jQuery('.LCT  div:nth-child(2).big .bg p').addClass("evensmaller");
        }
        if (jQuery('.LCT div:nth-child(2).medium').hasClass('medium')) {
            if (singlebox == true) jQuery('.LCT div:nth-child(2).medium .bg p').addClass("evensmaller");
        }
        if (jQuery('.LCT div:nth-child(2).small').hasClass('small')) {
            if (singlebox == true) jQuery('.LCT div:nth-child(2).small .bg p').addClass("evensmaller");
        }
    } else {
        if (lct_years != 0 && lct_years > 0) {
            jQuery('.LCT').find('div .bg p').html(lct_years);
            jQuery('.LCT div .type').html('YEARS');
        } else if (lct_days != 0 && lct_days > 0) {
            jQuery('.LCT').find('div .bg p').html(lct_days);
            jQuery('.LCT div .type').html('DAYS');
        } else if (lct_hours != 0 && lct_hours > 0) {
            jQuery('.LCT').find('div .bg p').html(lct_hours);
            jQuery('.LCT div .type').html('HOURS');
        } else if (lct_minutes != 0 && lct_minutes > 0) {
            jQuery('.LCT').find('div .bg p').html(lct_minutes);
            jQuery('.LCT div .type').html('MINUTES');
        } else if (lct_seconds != 0 && lct_seconds > 0) {
            jQuery('.LCT').find('div .bg p').html(lct_seconds);
            jQuery('.LCT div .type').html('SECONDS');
        }

        if (jQuery('.LCT div:nth-child(1).big').length != 0) {
            if (singlebox == true) jQuery('.LCT  div:nth-child(1).big .bg p').addClass("evensmaller");
        }
        if (jQuery('.LCT div:nth-child(1).medium').length != 0) {
            if (singlebox == true) jQuery('.LCT div:nth-child(1).medium .bg p').addClass("evensmaller");
        }
        if (jQuery('.LCT div:nth-child(1).small').length != 0) {
            if (singlebox == true) jQuery('.LCT div:nth-child(1).small .bg p').addClass("evensmaller");
        }
    }

    var lctTimer = setInterval("setlct(" + datetime + ");", 1000);
    clearTimeout(lctTimer);
}
var lctTimer = '';
jQuery(document).ready(function ($) {
    datetime = $('input.lct_datetime').val();
    lctTimer = setInterval('setlct(\'' + datetime + '\');', 1000);
}); 
```

有任何想法吗？？？不知道我得到的错误也与什么有关......这似乎没有意义？

PS 它是 WordPress 的实时倒计时时钟插件 > [http://wordpress.org/extend/plugins/live-countdown-timer/](http://wordpress.org/extend/plugins/live-countdown-timer/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:46:00.243

不确定，但尝试换行：

```
var lctTimer = setInterval("setlct(" + datetime + ");", 1000); 
```

至

```
var lctTimer = setInterval(function() {
   setlct(datetime);
},1000); 
```

# php - 使用会话和 cookie

> ID：15122984
> 
> 赞同：1
> 
> 时间：2013-02-27T21:42:07.070
> 
> 标签：php, codeigniter, session, cookies

我有这个问题，或者我不知道它是如何工作的概念，我已经使用记住功能进行了登录。如果用户检查它，我会保存在 cookie 中，所以当他再次进入网页时，可以直接访问主页面而不是再次登录。问题是当用户正常登录时，我会在会话中保存一些信息，但是什么当用户有remmber的cookie并没有登录网站直接进入时会发生什么？我丢失了该会话信息..我必须做什么？

我希望你不理解评论，我解释得更好，谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:29:35.720

我假设您在会话中存储的信息是与用户相关的数据，而这些数据又从某处的数据库中提取出来？如果是这种情况，那么我推荐的解决方案是：

当用户选择记住我选项时，您设置的 cookie 需要包含一个值，该值允许您在数据库中再次找到同一用户，以便您可以像找到该用户时一样实例化他们的会话通过他们在登录时提供的凭据。很诱人（但不安全），以简单的方式执行此操作并简单地为您的用户信息存储唯一的数据库 ID，但不要这样做！

相反，创建一个名为会话的表，其中包含三列：user_id、session_id、expire_time。当您的用户登录时，将“记住我”位设置为 true，您将存储他们的用户 ID、会话 ID（可通过调用 session_id() 函数获得）以及您想要的时间“记住”会话到期。

当用户登录并将他们的数据添加到会话中时，您可以调用类似于以下的函数：

```
<?php
   function persist_session(){
     $user_id     = $_SESSION['user']->id;
     $session_id  = session_id();
     $expire_time = time() + (60 * 60) * 24; // 24 hours
     $sql         = "INSERT INTO sessions (user_id, session_id, expire_time), VALUES ($user_id, $session_id, $expire_time)";
     mysqli_query($sql); // This assuming you've already set up your DB connection and so on
     $_COOKIE['session_id'] = $session_id; // Write the persisted session ID to a cookie
   }
?> 
```

这不是一个非常完整的例子。一方面，您需要编写一些代码来确保没有用户一次将多个会话持久化到表中，但这很容易......

保存会话信息并将其写入 cookie 以供以后参考后，从 cookie 中取回用户信息非常简单：

```
<?php
    function reinstantiate_session(){
      if(isset($_COOKIE['session_id')){
        $session_info = mysqli_fetch_object(mysqli_query("SELECT * FROM sessions WHERE session_id = '{$_COOKIE[session_id]}'")); 
        if($session_info){
          $_SESSION['user_id'] = $session_info->user_id;
        }
      }
    }
?> 
```

同样，这个例子并不像它可能的那样完整......您需要处理错误，特别是，您可能需要更新您的查找 sql 以排除过期信息，但这应该足以获得你开始了！

# ios - Jetsam 的真正作用是什么？

> ID：15122986
> 
> 赞同：4
> 
> 时间：2013-02-27T21:42:14.617
> 
> 标签：ios, performance

在几个月前我问[的一个问题中，我问是否可以观察到 Jetsam 对内存使用的影响。](https://stackoverflow.com/questions/9978135/jettisoned-tasks-still-in-multitasking-bar/10003119#10003119)我使用工具回答了我自己的问题，发现被 Jetsam 杀死的应用程序仍然具有与终止前相同的内存占用。

~~即使在今天，我仍然在正在运行的任务栏中~~最近使用的应用列表中看到被抛弃的应用。除非我自己删除它们，否则即使在 Jetsam 杀死它们之后，我也不会得到任何性能改进。

如果是这样，Jetsam 的目的是什么，它在做什么（除了杀死应用程序）？我没有看到任何好处。这是一个错误吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T21:45:28.767

> 即使在今天，我仍然在正在运行的任务栏中看到被抛弃的应用程序。除非我自己删除它们，否则即使在 Jetsam 杀死它们之后，我也不会得到任何性能改进。

胡说。没有“正在运行的任务栏”之类的东西。您正在考虑最近使用的应用程序列表。此栏中的应用程序的存在并不表示该应用程序仍在运行，并且从此栏中删除已终止的应用程序对性能/内存没有影响。从该栏中删除应用程序唯一有益的是，如果该应用程序仍在运行，它将终止该应用程序。

至于 jetsammed 应用程序，该应用程序在重新启动后将具有相同的内存占用也就不足为奇了。应用程序通常是 jetsammed，因为它们被挂起并且前台应用程序需要更多内存。应用程序被喷射的事实并不表明该应用程序一定使用了不可接受的内存量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-07T05:23:33.893

事实证明，当程序离开前台时，它会进入“暂停”状态。只要操作系统不需要它来做其他事情，操作系统就会为该应用程序保留内存，以便程序加载更快。

Jettison 的工作方式相同：它释放内存……这与清除内存不同。

重要的区别是内存在被抛弃时保持不变，直到操作系统需要将其用于其他用途。清除是一样的……除了你在释放内存之外还要擦除内容。

# java - 从 Java 中的 HTTP 请求中获取表单请求

> ID：15122987
> 
> 赞同：0
> 
> 时间：2013-02-27T21:42:16.123
> 
> 标签：java, web, client-server

我创建了一个完美运行的 HTTP 服务器！没有问题，使用 Sockets 和 ServerSockets。

现在我需要制作表单条目——这些条目在网络浏览器中完成，当它们被提交时，它们由 Java 处理。

我试过制作一个表格，然后按 sumbit，但它给出了 501 错误……第一部分是“POST /”。我想这意味着传递了一个隐藏变量......但是我如何让服务器识别隐藏变量并让它处理它？

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:49:04.160

你如何解码参数取决于很多事情。如果请求是 POST 请求，则这些值是请求正文的一部分（即，在将请求的头部和主体分开的空白链接之后发送值）。然后请求正文的编码是“application/x-www-form-urlencoded”或“multipart/form-data”。您可以在此处阅读这两种编码的工作原理：http: [//www.w3.org/TR/html401/interact/forms.html#h-17.13.4](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4)

我假设这是一个玩具项目，并且您想自己编写此代码。否则，那里有许多用于 Java 的 HTTP 协议的服务器实现......

# html - CSS div 不工作

> ID：15122988
> 
> 赞同：-3
> 
> 时间：2013-02-27T21:42:20.120
> 
> 标签：html, css

我的页脚 div 不显示背景颜色..

这是 style.css 文件，除了页脚之外，所有背景都在其中工作。

[样式.css]

```
 .Footer {
width: 200px;
border: 1px solid blue;
padding: 5px;
font-weight: bold;
color: #ffffff;
background-color: #000000;
}

body {
background: #b3dced; /* Old browsers */
background: -moz-linear-gradient(top,  #b3dced 0%, #29b8e5 50%, #bce0ee 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#b3dced), color-stop(50%,#29b8e5), color-stop(100%,#bce0ee)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #b3dced 0%,#29b8e5 50%,#bce0ee 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #b3dced 0%,#29b8e5 50%,#bce0ee 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #b3dced 0%,#29b8e5 50%,#bce0ee 100%); /* IE10+ */
background: linear-gradient(to bottom,  #b3dced 0%,#29b8e5 50%,#bce0ee 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b3dced', endColorstr='#bce0ee',GradientType=0 ); /* IE6-9 */
}

.body {
padding-top: 1px;
margin-top: 2px;
width: 1200px;
height: 500px;
}

.about_this_site__title {
width: 200px;
border: 1px solid blue;
padding: 5px;
font-weight: bold;
color: #ffffff;
}

.logo {
   margin-top: 10px;
   margin-right: 500px;
}

#menu {
padding: 0;
margin: 0;
width: 1000px;
margin-right: auto;
margin-left: auto;
border-radius: 2px;
}

#menu ul {
margin: 0;
padding: 0;
border-radius: 3px;
}

#menu ul li {
background: #ffffff;
float: left;
position: relative;
border-radius: 2px;
list-style-type: none;
}

#menu ul li a {
font-family: Verdana;
font-size: 14px;
color: blue;
text-decoration: none;
display: block;
line-height: 30px;
width: 160px;
height: 30px;
text-align: center;
}

#menu ul ul {
position: absolute;
visibility: hidden;
top: 31px;
}

#menu ul li ul li a:hover {
color: white;
background: #b8e1fc; /* Old browsers */
background: -moz-linear-gradient(top,  #b8e1fc 0%, #a9d2f3 10%, #90bae4 25%, #90bcea 37%, #90bff0 50%, #6ba8e5 51%, #a2daf5 83%, #bdf3fd 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#b8e1fc), color-stop(10%,#a9d2f3), color-stop(25%,#90bae4), color-stop(37%,#90bcea), color-stop(50%,#90bff0), color-stop(51%,#6ba8e5), color-stop(83%,#a2daf5), color-stop(100%,#bdf3fd)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #b8e1fc 0%,#a9d2f3 10%,#90bae4 25%,#90bcea 37%,#90bff0 50%,#6ba8e5 51%,#a2daf5 83%,#bdf3fd 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #b8e1fc 0%,#a9d2f3 10%,#90bae4 25%,#90bcea 37%,#90bff0 50%,#6ba8e5 51%,#a2daf5 83%,#bdf3fd 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #b8e1fc 0%,#a9d2f3 10%,#90bae4 25%,#90bcea 37%,#90bff0 50%,#6ba8e5 51%,#a2daf5 83%,#bdf3fd 100%); /* IE10+ */
background: linear-gradient(to bottom,  #b8e1fc 0%,#a9d2f3 10%,#90bae4 25%,#90bcea 37%,#90bff0 50%,#6ba8e5 51%,#a2daf5 83%,#bdf3fd 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b8e1fc', endColorstr='#bdf3fd',GradientType=0 ); /* IE6-9 */

}

#menu ul li:hover ul {
visibility: visible;
font-weight: bold;
}

#menu ul li:hover {
background: #87e0fd; /* Old browsers */
background: -moz-linear-gradient(top,  #87e0fd 0%, #53cbf1 40%, #05abe0 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#87e0fd), color-stop(40%,#53cbf1), color-stop(100%,#05abe0)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #87e0fd 0%,#53cbf1 40%,#05abe0 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #87e0fd 0%,#53cbf1 40%,#05abe0 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #87e0fd 0%,#53cbf1 40%,#05abe0 100%); /* IE10+ */
background: linear-gradient(to bottom,  #87e0fd 0%,#53cbf1 40%,#05abe0 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#87e0fd', endColorstr='#05abe0',GradientType=0 ); /* IE6-9 */

} 
```

文本显示，但背景不显示。

[索引.html]

```
<div class="Footer">Copyright bla blah</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:43:46.633

您正在打开一个`p`标签并用一个标签关闭`div`。

```
<p class="Footer">Copyright bla blah</p> 
```

此外，您还没有定义背景颜色。

在 css 中使用`background-color`而不是for 它。`color`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:54:25.657

对不起，我要把你的问题撕开，因为有人必须这样做。

首先，您使用标签打开并使用`<p>`标签关闭`</div>`。这是你的第一个错误。其次，您根本没有在提供的 CSS 中声明`background-color`变量。第三，你不应该`<p>`为页面上的任何 BLOCK 元素使用标签。始终使用 a`<div></div>`作为您的块元素。这只是很好的做法和有效的 HTML 编码。

话虽如此，您的代码应如下所示： [ Style.css]

```
.Footer {
width: 200px;
border: 1px solid blue;
padding: 5px;
font-weight: bold;
color: #ffffff;
background-color: red;
} 
```

[索引.html]

```
<div class="Footer"><p>Copyright bla blah</p></div> 
```

（`<p></p>`上面的标签完全取决于您是否拥有，因为它确实为您的设计提供了更大的灵活性，但不是必须拥有的。

希望这对未来的努力有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:44:28.453

代替

```
color: #ffffff; 
```

和

```
background-color: #ffffff; 
```

# c - strtok 和 strncat 错误

> ID：15122990
> 
> 赞同：2
> 
> 时间：2013-02-27T21:42:24.307
> 
> 标签：c, string, strtok, strcat

我想通过使用 strtok 和 strncat 为每个单词添加字符串“ay”。但似乎在我找不到的地方发生了冲突。它只给了我输出的第一个单词“Computeray”。帮助？

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    char str[] = "Computer science is hard";
    char* Token;
    char* work = "ay";
    Token = strtok(str, " ");

    while (Token != NULL)
    {
        strncat(Token, work, 2);
        printf("%s", Token);
        Token = strtok(NULL, " ");
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:45:21.373

您正在修改字符串（使用`strcat`）并期望`strtok`仍能正常运行 - 这是行不通的。而不是使用`strcat`，只需单独打印`"ay"`：

```
while (Token != NULL)
{
    printf("%say ", Token);
    Token = strtok(NULL, " ");
} 
```

即使它以您想要的方式工作，您也会在此过程中覆盖大量输入。可能不是你想要的——如果你需要建立一个全新的字符串，你应该在一个新的缓冲区中做，而不是覆盖输入。

# jquery - 是否可以在 jQuery 中为每个包含正则表达式匹配的元素添加类？

> ID：15122994
> 
> 赞同：-1
> 
> 时间：2013-02-27T21:42:38.987
> 
> 标签：jquery, regex, string, each

有没有办法使用正则表达式编写一个 jQuery 函数，以便对于每个跨度，如果它的内容以数字开头，它会获得一个添加的 "numberFirst" 类？

```
<span>123 abc</span> <!-- should get new class -->
<span>abc 123</span> <!-- should not -->
<span>456 def</span> <!-- should --> 
```

它可以完成`.addClass()`还是你必须用替换所有的html

`<span class='numberFirst'>$1</span>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:46:41.890

```
$('span').filter(function() {
    return $(this).text().match(/^[^\D]/);
}).addClass('numberFirst'); 
```

[**小提琴**](http://jsfiddle.net/GjuZD/)

# silverlight - 没有 api 的 Azure Blob 共享访问签名

> ID：15122998
> 
> 赞同：1
> 
> 时间：2013-02-27T21:42:47.250
> 
> 标签：silverlight, rest, azure, azure-storage, azure-blob-storage

我正在尝试创建对 Azure 的 REST 调用以列出容器中的 Blob。该容器是私有的，因此我需要通过共享访问签名 (SAS) 访问它。

我在 Silverlight 应用程序中进行了该调用，因此无法使用客户端 API。

我找到了很多有关 ClientAPI 的示例，但对于 REST 来说并没有什么非常清楚和明显的。

任何人都有一个很好的...干净简单的例子来说明如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:06:00.200

几天前我写了一篇关于完全相同的博客文章：http: [//gauravmantri.com/2013/02/13/revisiting-windows-azure-shared-access-signature/](http://gauravmantri.com/2013/02/13/revisiting-windows-azure-shared-access-signature/)。我已经包含了使用 REST API 和客户端库的各种常见函数的示例。就列出 blob 而言，如果您使用 REST API，您将获得原始 XML，您需要在您的 SL 应用程序中对其进行解析。