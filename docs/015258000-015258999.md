# StackOverflow 问答 15258000-15258999

# ajax - 阻止用户在网站上进行多次登录

> ID：15258003
> 
> 赞同：0
> 
> 时间：2013-03-06T21:04:11.723
> 
> 标签：ajax, login, coldfusion, cfml

我想阻止用户同时多次访问我的 ColdFusion 应用程序。

我有一个带有 dtLogin、dtLogLastUpdate、ip 和 isLogged 的​​ SQL 表。

逻辑是：

会话超时为 1 小时。

当用户登录时，

*   现在设置 dtLogin = 日期戳
*   dtLogLastUpdate = 现在的日期戳
*   ip = 用户 IP
*   isLogged = 1

我正在使用 AJAX 调用`dtLogLastUpdate`每 1 分钟更新一次。

当我收到用户的登录请求时，只有在`isLogged`0 或 `dtLogLastUpdate`超过我过去的会话超时时才允许它。

当用户关闭浏览器但之前未注销时，我该如何管理？他们是否需要等到会话超时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:10:31.480

我将创建一个名为 currentUsers 的应用程序变量。

您可以使用数组或列表，我认为数组函数更快，但根据您的 ColdFusion 版本，搜索数组可能会很痛苦。为简单起见，我将使用列表函数。

当用户尝试登录时，请检查用户名列表。如果不存在，则将用户名添加到列表中并允许他们登录。如果用户名存在，则将其发送到默认的“太糟糕了，太难过了”登录页面。

```
<cfif listFindNoCase(application.currentUsers, form.userName)> 
    <cflocation url = "shameOnYou.cfm">
<cfelse>
    <cfset listAppend(application.currentUsers, form.userName)>
    <cfset session.whatever>
</cfif> 
```

在您的 application.cfc 中，使用 onSessionEnd 从列表中删除用户名。

```
<cffunction onSessionEnd...>
    <cfset listDeleteAt(application.currentUsers,listFind(application.currentUsers, session.userName))>
</cffunction> 
```

这样做的好处是您不需要每 60 秒使用 AJAX 更新日志文件，从而减少后台进程。

# node.js - 在目录中的每个 HTML 文件中查找图像的坐标？

> ID：15258013
> 
> 赞同：0
> 
> 时间：2013-03-06T21:04:37.360
> 
> 标签：node.js, zend-framework, imagemagick, lamp

我有一个带有类似图像标签的平面 HTML 文件库。我应该如何遍历所有这些并在特定图像标签的页面上找到特定的 x、y 坐标？

我在想我需要将每个页面呈现为图像（用我可以匹配的特定颜色替换我正在寻找的图像标签）或者我可以渲染无头渲染页面类似于phantom.js 并以这种方式找到坐标（尽管我不知道这是否可行）。有什么想法会更容易吗？

我更喜欢使用 LAMP 堆栈或 Node.js。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:50:29.123

我认为使用 PhantomJS 将是最简单的。不需要 node.js。

你可以结合`examples/scandir.js`并`examples/phantomwebintro.js`得到你想要的。

```
var system = require('system');
var fs = require('fs');

if (system.args.length !== 2) {
    console.log("Usage: phantomjs scandir.js DIRECTORY_TO_SCAN");
    phantom.exit(1);
}

function scanDirectory(path, cb) {
    if (fs.exists(path) && fs.isFile(path)) {
        cb(path);
    } else if (fs.isDirectory(path)) {
        fs.list(path).forEach(function (e) {
            if (e !== "." && e !== "..") {
                scanDirectory(path + '/' + e, cb);
            }
        });
    }
}

function parsePage(path) {
    var page = require('webpage').create();
    page.open(path, function(status) {
        if (status === "success") {
           page.includeJs("http://code.jquery.com/jquery-latest.js", function() {
               var images = page.evaluate(function() {
                    var images = [];
                    $('img').each(function() {
                        images.push({ src: $(this).attr('src'), pos: $(this).position() });
                    });
                    return images;
               });
               console.log(images);
           });
         }
    });
}

scanDirectory(system.args[1], parsePage); 
```

此脚本 ( `phantomjs img.js kittens`) 将扫描目录中的文件，加载该目录（以及子目录，您可以在 中修改此行为`scanDirectory`）中的每个文件，并查找`<img>`该页面上的所有标签并返回一个数组及其`src`属性和`.position()`.

我花了大约 20 分钟才让它工作，所以我认为这是最简单的方法。

# android - 将数据库中的结果显示到新的黑色活动

> ID：15258016
> 
> 赞同：0
> 
> 时间：2013-03-06T21:04:40.573
> 
> 标签：android, database

我创建了一个数据库并运行了一个查询，该查询向结果中添加了一些元素。我希望我拥有的按钮能够在单击时做出响应并将结果显示给新的黑色活动。我将发布我当前的课程。

对不起，我对 android 编程很陌生。:)

```
 package com.example.pota;

 import java.util.ArrayList;

 import android.app.ListActivity;
 import android.content.Context;
 import android.database.Cursor;
 import android.database.sqlite.SQLiteDatabase;
 import android.os.Bundle;

    public class createDatabase extends ListActivity{

private final String DATABASE_NAME = "potaDB";
private final String DATABASE_TABLE = "olaPota";
private final String DATABASE_TABLE2 = "favorites";
private final int DATABASE_VERSION = 1;
private SQLiteDatabase potaDB=null;;

//Kaleitai otan dimiourgeitai to activiy

public void onCreate(Bundle icicle, Context ctx){

    super.onCreate(icicle);
    ArrayList <String> results = new ArrayList<String>();

    try {

        //Dhmiourgei ti vasi an den uparxei alliws tin anoigei

        this.openOrCreateDatabase(DATABASE_NAME, DATABASE_VERSION, null);

        //Dhmiourgei ena table sti vasi me ta ekseis paidia 

        potaDB.execSQL("CREATE TABLE IF NOT EXISTS" + DATABASE_TABLE + "(id INT PRIMARY KEY AUTOINCREMENT, name VARCHAR, category VARCHAR, info TEXT, difficulty INT);", null); 

        //Vazei eggrafes ston pinaka

        potaDB.execSQL("INSERT INTO" + DATABASE_TABLE + "(name, category, info, difficulty)" + "VALUES ('Screwdriver', 'Pota', 'i klassiki vodka lemoni', 5);");

        //Ena query pou tha mas gurisei ta stoixeia tou pinaka

        Cursor c = potaDB.rawQuery("SELECT *" + "FROM" + DATABASE_TABLE,null);

        //Pernoume ta dedomena tou pinaka pou xreiazomaste

        int name1=c.getColumnIndex("name");
        int category1=c.getColumnIndex("category");
        int info1=c.getColumnIndex("info");
        int difficulty1=c.getColumnIndex("difficulty");

        //Pernei ta dedomena ekei pou deixnei o Cursor
        String name = c.getString(name1);
        String category = c.getString(category1);
        String info = c.getString(info1);
        int difficulty = c.getInt(difficulty1);

        //Prosthetei ta trexontai dedomena sto results
        results.add("Onoma Potou: " + name + "Katigoria Potou: " + category + "Suntagi: "+ info + "Duskolia: " + difficulty);

    } catch(Exception e) {
        System.out.println(e);
    }finally {
            if (potaDB != null)
                potaDB.close();
        }

        }
 } 
```

主要活动：

```
 package com.example.pota;

 import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.Menu;
 import android.view.View;

 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:35:28.670

好的，我不确定`Activity`您要使用哪个按钮，但请执行以下操作：

```
public class MainActivity extends Activity {
 Button myBtn;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
myBtn = (Button) findViewById(R.id.my_button);
mBtn.setOnclickListener(new OnClickListener() {         
    @Override
    public void onClick(View v)
    {
          Intent intent = new Intent(MainActivity.this, ReceivingActivity.class);
          intent.putExtra("key", value); //name key whatever you want then value is whatever you are sending 
          startActivity(intent); //this starts the next activity through an intent
      }

    } 
```

有不同的使用方法，`onClick()`但这可能是最流行的，但这取决于您的需要。[这是我的答案之一，显示了如何使用 xml](https://stackoverflow.com/questions/14966838/how-to-return-to-previous-activity-from-about-with-a-button-click/14967290#14967290)

您还需要[阅读 Intents](http://developer.android.com/reference/android/content/Intent.html)并了解如何使用它们以及它们的功能。

要获取其他数据，您`Activity`将执行类似的操作

```
public void onCreate()
{
    ...
    Intent recIntent = getIntent();
    String variableName = recIntent.getStringExtra("key");
} 
```

# python - ipython后面的config方法的实现

> ID：15258017
> 
> 赞同：1
> 
> 时间：2013-03-06T21:04:41.913
> 
> 标签：python, ipython, enthought

基于此视频教程 [http://www.youtube.com/watch?v=2G5YTlheCbw#t=01h07m41s](http://www.youtube.com/watch?v=2G5YTlheCbw#t=01h07m41s)

演讲者提到了用于处理 iPython 的输入配置的方法。我不明白他用的是什么方法。我唯一能听到的是“n个想法追踪机器”。通过谷歌搜索没有结果。

有人可以再听一听并告诉我他的意思吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:06:41.383

他在说“Enthought的特质机器”：

[深思熟虑](http://www.enthought.com/products/epd.php)

[免费](http://www.enthought.com/products/epd_free.php)[版](http://code.enthought.com/projects/traits/)包括 特征

来自@Matt 的链接：

在底层，`Configurable`基类是`IPython.utils.traitlets.HasTraits`. 该`IPython.utils.traitlets`模块是`enthought.traits`. 我们的实现是纯 Python 子集（大多数 API 兼容），`enthought.traits`它没有任何自动 GUI 生成功能。我们的计划是实现 100% 的 API 兼容性，以便`enthought.traits`最终使用实际的 API。目前，我们无法使用`enthought.traits`，因为我们致力于 IPython 的核心是纯 Python。

# ios - Monotouch - QLPreviewController 的问题

> ID：15258023
> 
> 赞同：2
> 
> 时间：2013-03-06T21:05:03.037
> 
> 标签：ios, mono, xamarin.ios

我正在尝试使用 QLPreviewController 查看 PDF 文件并将其发送，但在预览 PDF 文档后操作按钮出现问题。

当我按下操作按钮（在右上角）时，应用程序崩溃并且我得到：“未处理的托管异常：引发了 Objective-C 异常。名称：NSInternalInconsistencyException 原因：UIDocumentInteractionController：无效方案（null）。仅支持文件方案。（ MonoTouch.Foundation.MonoTouchException)"

我做了一些研究，如果您从 Internet 下载文件或文件类型不是“file:// ..........”，则可能会出现此问题。我的 NSUrl 是这种格式，所以我不知道为什么会出现这个错误。

有人有什么想法吗？

谢谢

这是我调用控制器的代码：

```
QLPreviewController previewController= new QLPreviewController();             

previewController.DataSource=new MyQLPreviewControllerDataSource();     

this.PresentViewController(previewController,true, null); 
```

这是我的数据源代码：

```
public class MyQLPreviewControllerDataSource : QLPreviewControllerDataSource { public     override int PreviewItemCount (QLPreviewController controller) {

    return 1;
}

public override QLPreviewItem GetPreviewItem (QLPreviewController controller, int index)
{

    string fileName = @"example.pdf";
    var documents = Environment.GetFolderPath (Environment.SpecialFolder.MyDocuments);
    var library = Path.Combine (documents,fileName);
    NSUrl url = NSUrl.FromFilename (library);
    return new QlItem ("Title", url);
}
} 
```

这是我的项目代码：

```
public class QlItem : QLPreviewItem { string _title; Uri _uri;

public QlItem (string title, Uri uri) 
{ 
    this._title = title; 
    this._uri = uri; 
} 

public override string ItemTitle { 
    get { return _title; } 
} 

public override NSUrl ItemUrl { 
    get { return _uri; } 
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-19T14:51:03.287

您的 QlItem 类将原始 NSUrl 转换为 Uri，然后再将其转换回 NSUrl，并且在此过程中丢失了一些东西。

它应该看起来更像：

```
 public class QlItem : QLPreviewItem 
    { 
        string title; 
        NSUrl uri; 

        public QlItem(string title, NSUrl uri) 
        { 
            this.title = title; 
            this.uri = uri; 
        } 

        public override string ItemTitle { 
            get { return title; } 
        } 

        public override NSUrl ItemUrl { 
            get { return uri; } 
        } 
    } 
```

# android - 如何在 webview 中加载一些 html 代码？

> ID：15258027
> 
> 赞同：1
> 
> 时间：2013-03-06T21:05:07.133
> 
> 标签：android, android-webview

如何在 webview 中加载一些 html 代码？

我想从一个有布局的地方发送一些`HTML`代码，我想获取 代码并显示为页面。我的代码是：`MainActivity``WebViewActivity``WebView``HTML``webview``HTML``HTML`

```
<p><span style=\"font-size: 12pt;\">Sample text<\/span><\/p>\r\n<p><span style=\"font-size: 14pt; color: #00ffff;\">Sample text<\/span><\/p>\r\n<p><span style=\"font-size: 36pt; color: #99cc00;\">Sample text<\/span><\/p>\r\n<p><span style=\"font-size: 36pt; color: #ff0000;\">Sample text<\/span><\/p>\r\n<p>&nbsp;<\/p> 
```

我`WebViewActivity`的是：

```
String value;
private WebView webView;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    value = getIntent().getStringExtra(MY_EXTRA);
    Log.w(MY_EXTRA, "Data recieved is >> " + value);

    setContentView(R.layout.webview);
    this.getIntent().putExtra("loadUrlTimeoutValue", 60);       

    webView = (WebView) findViewById(R.id.webView1);

    webView.setWebViewClient(new WebViewClient() {

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {             

            view.loadData(value, "text/html", null);
            return true;
        }
    });

    new getData().execute(null, null, null);

}

private class getData extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        webView.getSettings().setDomStorageEnabled(true);
    }

    @SuppressLint("SetJavaScriptEnabled")
    @Override
    protected Void doInBackground(Void... params) {

        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(
                false);
        webView.getSettings().setSupportMultipleWindows(false);
        webView.getSettings().setSupportZoom(false);
        webView.getSettings().setRenderPriority(
                WebSettings.RenderPriority.HIGH);
        webView.getSettings().setSavePassword(false);
        webView.setVerticalScrollBarEnabled(false);
        webView.setHorizontalScrollBarEnabled(false);
        webView.getSettings().setAppCacheEnabled(true);
        webView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
        webView.getSettings().setAppCacheMaxSize(200);
        webView.getSettings().setDatabaseEnabled(true);
        webView.clearCache(true);
        // webView.clearHistory();
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        webView.loadUrl(value);
    }

} 
```

现在我看不到我的`HTML`代码的任何结果，并且我`webview`没有显示任何东西。如何查看我的结果？任何身体！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:10:54.960

我认为您的所有代码都是正确的，但您现在错误地`webView.loadUrl(value)`设置`onPostExecute()`如下：

```
@Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        webView.loadData(value, "text/html", null);
    } 
```

这对我有用，希望对你也有用。

# r - 替代 for-loop 以通过唯一行填充 data.frame

> ID：15258030
> 
> 赞同：1
> 
> 时间：2013-03-06T21:05:12.047
> 
> 标签：r, for-loop, apply

我正在尝试制作一个脚本来使用 R 生成一组具有人口统计信息的随机人。我希望它按行而不是按列生成，以便函数可以基于同一行中前一个函数的结果。我知道这可以通过 for 循环来完成（如下所示），但 for 循环在 R 中非常慢。我读过您可以使用*apply*或*while*更有效地执行循环，但我还没有弄清楚如何尽管许多尝试都失败了。下面是带有循环的功能代码示例。我将如何使用*apply*或*while*来做到这一点？

```
y <- 1980 ## MedianYr
d <- 0.1 ## Rate of NA responses

AgeFn <- function(y){
  Year <- 1900 + as.POSIXlt(Sys.Date())$year
  RNormYr <- as.integer((rnorm(1)*10+y))
  Age <- Year - RNormYr
}

EduByAge <- function (Age, d) {
  ifelse(Age < 17, sample(c("Some High School",NA), size=1,prob=c((1-d),d)),
    ifelse(Age > 16 & Age < 19, sample(c("Some High School", "High School Grad",NA), size=1, prob=c(0.085, 0.604,d)),
      ifelse(Age > 18 & Age < 21, sample(c("Some High School", "High School Grad", "Associates",NA), size=1,prob=c(0.085, 0.25, 0.354,d)),
        ifelse(20 > Age & Age < 23, sample(c("Some High School", "High School Grad", "Associates", "Bachelors",NA), size=1,prob=c(0.085, 0.25, 0.075, 0.279,d)),
          ifelse(Age > 22, sample(c("Some High School", "High School Grad", "Associates", "Bachelors", "Masters", "Professional", "Doctorate",NA),size=1,prob=c(0.085, 0.25, 0.075, 0.176, 0.072, 0.019, 0.012,d)), NA)))))
}

GenderFn <- function(d){
   Gender1 <- sample(c("Male","Female","Trans", NA), 1, replace=TRUE, prob=c(0.49, 0.5, 0.01, d))
   return(Gender1)
}

UserGen <- function(n,s) {
  set.seed(s)  
  Rows <- function(y,d){
    Age <- abs(AgeFn(y))
    Gender <- GenderFn(d)
    Education <- EduByAge(Age,d)
    c(i, Age, Gender, Education)
  } 
  df <- data.frame(matrix(NA, ncol = 4, nrow = n))
  for(i in (1:n)) {
    df[i,] <- Rows(y,d)
  }
  colnames(df) <- c("ID", "Age", "Gender", "Education")
  return(df)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:21:32.440

因此，您编写代码的方式意味着您将至少结束一个循环。

`apply`用于将功能应用于另一个结构的每个元素。因此，当您要将包含所有年龄的向量传递给其他函数时，它将起作用。但是，它对于运行`AgeFn()`您拥有的函数并不那么热，因为它不会将您想要迭代的任何内容作为参数。

这是另一种可能性，它放弃了获取随机年龄的方法，转而使用该`sample`函数。我做了一些假设，但我希望这个解释能帮助你弄清楚这一切在 R 中是如何工作的。

```
y <- 1980       ## MedianYr
d <- 0.1        ## Rate of NA responses
agemin <- 14
agemax <- 90

# The stats guy in me thinks that you might have some
# methodological problems here with how the ages are assigned
# But I'm just going to stick with it for now
EduByAge <- function (Age, d) {
    ifelse(Age < 17, sample(c("Some High School",NA), size=1,prob=c((1-d),d)),
           ifelse(Age > 16 & Age < 19, sample(c("Some High School", "High School Grad",NA), size=1, prob=c(0.085, 0.604,d)),
                  ifelse(Age > 18 & Age < 21, sample(c("Some High School", "High School Grad", "Associates",NA), size=1,prob=c(0.085, 0.25, 0.354,d)),
                         ifelse(20 > Age & Age < 23, sample(c("Some High School", "High School Grad", "Associates", "Bachelors",NA), size=1,prob=c(0.085, 0.25, 0.075, 0.279,d)),
                                ifelse(Age > 22, sample(c("Some High School", "High School Grad", "Associates", "Bachelors", "Masters", "Professional", "Doctorate",NA),size=1,prob=c(0.085, 0.25, 0.075, 0.176, 0.072, 0.019, 0.012,d)), NA)))))
}

NewUserGen <- function(n,s) {

    set.seed(s)

    ## Start by creating a data frame with IDs
    fakedata <- data.frame(ID=1:n)

    # Rather than a function, here I just used the built-in sample function
    # I am sampling for n ages lying between agemin and agemax
    # Using dnorm(), I assume a normal distribution of the ages, with
    # mean age equal to today's year minus the "MedianYr" you were using above
    # I assume that the mean and the SD are equal, you don't have to do that

    # I put in a few extra carriage returns here to make things not quite so
    # tight together - figured it would be easier to read.
    fakedata$Age <- sample(x=agemin:agemax,size=n,replace=TRUE,
                           prob=
                           dnorm(agemin:agemax,
                           mean=abs(y-as.numeric(format.Date(Sys.Date(),"%Y"))),
                           sd=abs(y-as.numeric(format.Date(Sys.Date(),"%Y")))))

    # I'm sure you know this, but you have some issues here
    # namely that you have a probability vector that totals to more than 1.
    # You might be getting no NAs as a result.
    fakedata$Gender <- sample(c("Male","Female","Trans", NA), 
                              n, replace=TRUE, prob=c(0.49, 0.5, 0.01, d))

    # Here is the actually sapply()
    fakedata$Edu <- sapply(fakedata$Age,FUN=EduByAge,d=0.1)

    return(fakedata)
}

outdata <- NewUserGen(300,10201) 
```

这就是数据在之后的聚合方式：

```
outdata$Edu <- factor(outdata$Edu,levels=c("Some High School",
                                           "High School Grad",
                                           "Associates",
                                           "Bachelors",
                                           "Masters",
                                           "Doctorate"),ordered=TRUE)

hist(outdata$Age)
barplot(table((outdata$Gender)))
par(mai=c(3,1,1,1))
barplot(table((outdata$Edu)),las=2) 
```

![教育分布](../Images/a7288df46f2b71749fee9123552401e6.png) ![性别分布](../Images/32403048e258144883ea19c8dd8a6ba3.png) ![年龄直方图](../Images/2c92055dede931f7ee3f79ec94ec638c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:29:58.680

我会修改 Rows 函数以获取 ID，而不是使用作用域“i”。

```
Rows <- function(i, y,d){
    Age <- abs(AgeFn(y))
    Gender <- GenderFn(d)
    Education <- EduByAge(Age,d)
    c(i, Age, Gender, Education)
} 
```

然后你可以用 lapply 调用你的函数：

```
res1 = lapply(1:3000, function(i){
    Rows(i, y, d)
}) 
```

仅此一项并不能真正提高速度，但是如果您使用的是具有多核的机器，则可以通过其 mclapply 函数从“多核”库中获得一些用途。

```
library("multicore")
res2 = mclapply(1:3000, function(i){
    Rows(i, y,d)
}) 
```

哦，如果你想将结果用作数据框，你可以这样做：

```
df = data.frame(do.call(rbind, res1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:32:12.960

对于 main 函数，您可以使用`apply`函数族中的某些内容，即`replicate`. 速度的提高来自于 R 是一种按复制分配的语言，并且`for`循环不必要地复制了您的数据框：

```
UserGen2 <- function(n,s) {
  set.seed(s)  
  Rows <- function(y,d) {
    Age <- abs(AgeFn(y))
    Gender <- GenderFn(d)
    Education <- EduByAge(Age,d)
    c(Age, Gender, Education)
  } 
  samp <- t(replicate(n,Rows(y,d)))
  colnames(samp) <- c("Age","Gender","Education")
  data.frame(ID=seq_len(dim(samp)[1]),samp)
} 
```

您可能还可以进行其他改进。

# twitter - 我的小型 Twitter iOS 应用会受到 Twitter 用户限制的影响吗？

> ID：15258031
> 
> 赞同：0
> 
> 时间：2013-03-06T21:05:15.550
> 
> 标签：twitter, twrequest

我正在使用 Twitter/Social 框架来构建一个小型 Twitter 应用程序。它不是真正的客户端，但您可以从中发送推文并做一些其他事情（例如查看关注者）。

我的问题是，我是否受制于 100,000 个令牌用户限制？我正在使用 TWRequest 处理从发布推文到拉入关注者/列表等的所有事情。

据我所知，100,000 个用户的限制不适用于这种情况（因为我不需要生成令牌来访问任何功能）并且我没有复制 twitter 的核心功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:23:50.223

访问主时间线或直接消息 API 的任何应用程序消费者用户令牌。但是，您的应用程序似乎是供您个人使用的。因此，您永远不需要 100,000 个用户令牌。

# entity-framework - 什么是哈希集 在示例代码中？

> ID：15258032
> 
> 赞同：-1
> 
> 时间：2013-03-06T21:05:16.557
> 
> 标签：entity-framework, generics, hashset

在 EF 类中使用的这个虚拟属性中，为什么它会返回`HashSet<T>`？那是什么课？

```
 public virtual ICollection<TownShip> TownShips
    {
        get
        {
            return this.TownShips ?? (this.TownShips = new HashSet<TownShip>());
        }

        set
        {
            this.TownShips = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T21:11:27.693

`HashSet<T>`是实现`ICollection<T>`接口的泛型类。从文档中：

> HashSet 类提供高性能的集合操作。集合是不包含重复元素且其元素没有特定顺序的集合。

在代码中，如果 Townships 属性为空，则返回一个空集合 (HashSet)。

[T 的文档的 HashSet 在这里](http://msdn.microsoft.com/en-us/library/bb359438.aspx)

# javascript - 横向分布的动态内容

> ID：15258036
> 
> 赞同：1
> 
> 时间：2013-03-06T21:05:31.430
> 
> 标签：javascript, jquery, css, text-alignment, dynamic-content

我有一个流体宽度的 div，其中填充了来自 JSON 查询的缩略图，并且我试图将这些缩略图均匀地分布在 div 的宽度上。如果封闭 div 的宽度发生变化，则必须允许这些缩略图进行换行和重排，并且 x 和 y 尺寸以及加载的缩略图数量可能会有所不同。

我发现使用静态 HTML 元素`text-align: justify;`并`display: inline-block`完全满足我的要求，例如：http:
[//jsfiddle.net/skywalkar/gUcvq/](http://jsfiddle.net/skywalkar/gUcvq/)

但是，当我对通过 JavaScript 获取的内容执行相同操作时，它会恢复为普通的左对齐（如果它甚至完全呈现——Chrome 和 Firefox 将其呈现为左对齐，但 IE 似乎放弃了显示缩略图完全！）：http:
[//jsfiddle.net/skywalkar/KdLyx/](http://jsfiddle.net/skywalkar/KdLyx/)

那么，我的问题是：
**如何强制加载 JavaScript 的缩略图像 HTML 版本一样水平对齐？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:17:25.423

你在这里有两个问题。首先，您的跨度在 div*之外*（老实说，您甚至不需要跨度，只需使用`:after`伪元素）。

其次，对齐依赖于空格。您正在插入图像而不包括空格/换行符/等。这就是为什么他们不会辩解。

[http://jsfiddle.net/KdLyx/7/](http://jsfiddle.net/KdLyx/7/)

# c++ - 错误必须具有类类型

> ID：15258041
> 
> 赞同：-5
> 
> 时间：2013-03-06T21:05:45.487
> 
> 标签：c++, types, expression

我在*C++*中有点新，在尝试编译这段代码时，我得到了一个我不知道如何修复的错误：

```
int main()
{
    typedef pair<int,int> nodo;
    int x;
    cin >> x; 
    int *g;                
    g = new int[x];   

    vector <nodo> g;

    g[1].push_back(nodo(2,5));
    g[1].push_back(nodo(3,10));
    g[3].push_back(nodo(2,12));
    g[2].push_back(nodo(4,1));
    g[4].push_back(nodo(3,2));

    for (int i = 1; i <=4; ++i){
        //    cout << i << " -> ";
        for (int j = 0; j<g[i].size(); ++j){
            //    cout << g[i][j].first << " c: " << g[i][j].second << " ";    
        }
        //   cout << endl;
    }

    dijkstra(1, x);
    system("pause");
    return 0;
} 
```

我收到的错误是：

```
Error: Expression must have a class type. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:08:32.317

这里：

```
int *g;
g = new int[x];
vector <nodo> g; // ERROR: Redeclaration! 
```

您首先声明`g`为 type `int*`，然后重新声明为 type `vector<nodo>`。这是非法的。

`using namespace std`此外，如果您想省略`std::`标准命名空间中类型的限定条件，则需要有一个指令。我不建议你使用它。更好地明确指定`std::`，或者更确切地说使用特定的`using`声明。

例如：

```
 typedef std::pair<int,int> nodo;
//          ^^^^^
    int x;
    std::cin >> x;
//  ^^^^^
    int *g;
    g = new int[x];

    std::vector <nodo> g;
//  ^^^^^ 
```

还要确保您正在导入所有必要的标准标头：

```
 Type     |  Header
--------------------------
std::vector -> <vector>
std::pair   -> <utility>
std::cin    -> <iostream> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:08:23.097

您正在重新声明`g`，首先它是 an`int*`然后您将其变为 a `vector<int>`。我不确定它是如何通过编译器的。

此外，与其使用，不如`nodo(1,2)`考虑使用`make_pair`。使用`new`也被认为是不好的做法，您应该使用动态容器`std::vector`或静态容器，如`std::array`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:08:44.547

`pair`不是一个类，因为你没有包括`<utility>`

你也没有包括`<vector>`or `<iostream>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:09:17.653

你有两个东西命名`g`：

```
int* g; 
```

和

```
vector <nodo> g; 
```

这甚至不会编译。

看起来你想要一个向量数组，在这种情况下你需要类似的东西

```
std::vector<std::vector<nodo> > g(x); // size x vector of vectors. 
```

然后你可以做这种事情：

```
g[1].push_back(nodo(2,5));
g[1].push_back(nodo(3,10)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T21:12:32.967

所以这个版本可以编译，我认为这就是你要做的：

```
// Need to include these headers
#include <utility>
#include <iostream>
#include <vector>

using namespace std;

int main()
{
    typedef pair<int,int> nodo;
    int x;
    cin >> x; 
    //int *h;                
    //h = new int[x];   

    //specify size of vector
    std::vector< std::vector<nodo> > g(x);

    g[0].push_back(nodo(2,5));
    g[1].push_back(nodo(3,10));
    g[2].push_back(nodo(2,12));
    g[3].push_back(nodo(4,1));
    g[4].push_back(nodo(3,2));

    for (int i = 0; i < g.size(); ++i){
        std::cout << i << " -> ";
        for (int j = 0; j<g[i].size(); ++j){
                cout << g[i][j].first << " c: " << g[i][j].second << " ";    
        }
         cout << endl;
    }

    //dijkstra(1, x);
    //system("pause");
    return 0;
} 
```

很多问题，你`g`一次用两次。我不确定你想做什么，`vector`但也许你想要一个更像这样`vector`的s：`vector`

```
 std::vector< std::vector<nodo> > g(x) ; 
```

那么这将更有意义：

```
 g[0].push_back(nodo(2,5)) ; 
```

a 的第一个元素`vector`将在`0`not `1`。

# php - 动态构建的表的点击事件不会触发

> ID：15258043
> 
> 赞同：0
> 
> 时间：2013-03-06T21:05:46.860
> 
> 标签：php, jquery, events, html-table, click

我有一些 jQuery 在单击时处理使用 PHP 构建的表行上的单击事件。只要表构建在同一个文件中，它就可以正常工作。但是，如果我让 jQuery 输出到 PHP 文件，让 PHP 构建表，然后将输出发送回以写入 div 标记，则它将不起作用。我曾尝试将 .live 添加到活动中，但这也不起作用？有什么建议么？

html和jQuery：

```
<html>
    <head>
        <script type='text/javascript' src='jquery.js'></script>
        <script type='text/javascript'>

        var name;
        var text;
        var subject;
        var id;
        var key;

        $(document).ready(function(){

            buildMsgTable();

            //Load Message Data in click
            $('#messages tr').click(function(){

                $(this, 'tr').each(function(index, tr) {

                    var lines = $('td', tr).map(function(index, td) {
                        return $(td).text();
                    });

                    key = lines[0];

                    name = lines[1];

                    textarea = lines[2];

                    subject = lines[3];

                    //alert(textarea);

                    $('#name').val(name);
                    $('#subject').val(subject);
                    $('#body').val(textarea); 

                })
            });

        function buildMsgTable(){
            $.post('/php_webfiles/edit/buildMsgTable.php',
                      {},
                      function(output){ $('#existingMessagesDiv').html(output); });
        }
        </script>
    </head>
</body>
<div id='existingMessagesDiv'></div>
<div id = 'debug'></div>
</body>
</html> 
```

以及 buildMsgTable 调用的 php：

```
<?php
include "hawkfunctions.php";

$tsql = "SELECT * FROM Messages";

$conn  = mssqlConnect();
$stmt = sqlsrv_query($conn, $tsql);
//$stmt2 = sqlsrv_query($conn, $tsql2);

if ($stmt1 === false) {
    echo "Error in query preparation/execution (contacts_in_list).<br/>$tsql1<br/>";
    //die( print_r( sqlsrv_errors(), true));

    echo "Errors while connecing attempting to run query:<br/><ol>";
    $i = 1;

    foreach (sqlsrv_errors() as $masterError) {
        $errorlist .= "<li>Heading $i<ol>";

        foreach ($masterError as $root => $error) {
            if (!is_numeric($root)) {
                $errorlist .= "<li><b>$root:</b> $error</li>\n";
            }
        }
        $errorlist .= "</ol></li>\n";
        $i++;
    }
    $errorlist .= "</ol>";
    die($errorlist);
}

echo "<table border='1' id= 'messages'><th>Key</th><th>Name</th><th>Text</th><th>Subject</th>";

while( $row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC)){
    echo "<tr><td class='key'>";
    echo $row['MessageKey'];
    echo "</td>";
    echo "<td class = 'name'>";
    echo $row['Name'];
    echo "</td><td class = 'text'>";
    echo $row['Text'];
    echo "</td><td class = 'subject'>";
    echo $row['Subject'];
    echo "</td>";
    echo "<td class = 'delete'>";
    echo "<input type='button' value='Delete' id='delete' onclick='deleteMessage(".$row['MessageKey'].")' />";
    echo "</td>";
    echo "</tr>";
}

/* Free statement and connection resources.*/
sqlsrv_free_stmt( $stmt);
sqlsrv_close($conn);

echo "</table>";
?> 
```

认为我剪掉了所有与我的问题无关的绒毛。

# css - CSS 文本对齐属性

> ID：15258048
> 
> 赞同：0
> 
> 时间：2013-03-06T21:06:01.900
> 
> 标签：css, html

我有以下 HTML：

```
<!DOCTYPE html>
<HTML>
    <HEAD>
        <style type="text/css">
            .name {
                font-size: 18px;
                margin-top: 1px;
                text-align: right;
            }

            .contactInfo {
                font-size: 12px;
                margin-top: 1px;
                text-align: left;
            }
        </style>
        <TITLE>Joe Sixpack</TITLE>
    </HEAD>
    <BODY>
        <div id="name">
            <span class="name">Joe Sixpack</span>
        </div>

        <div id="contactInfo">
            <span class="contactInfo">
                123 Electric Ave, Mudflap, NS 12345 &#8226; (888) 555-1212 &#8226; <A HREF="mailto:Joe@Sixpack.com">Joe@Sixpack.com</A>
            </span>
        </div>

        <HR>
    </BODY>
</HTML> 
```

问题是我希望名称类与右侧对齐，但它没有发生。名字和地址都在左边。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:09:13.047

在名称 div 上设置样式，而不是名称跨度：

```
#name {
    font-size:18px;
    margin-top:1px;
    text-align:right;
} 
```

此外，您可能不希望 div 和 span 具有相同的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:07:39.627

您只能在块级元素内对齐文本。将你的 CSS 重写为：

```
#name {
     font-size:18px;
     margin-top:1px;
     text-align:right;
}

#contactInfo {
     font-size:12px;
     margin-top:1px;
     text-align:left;
} 
```

# ember.js - Ember.computed.alias 和 Ember.binding 有什么区别？

> ID：15258054
> 
> 赞同：17
> 
> 时间：2013-03-06T21:06:27.370
> 
> 标签：ember.js

在 Ember 中，将属性定义为另一个属性（或另一个对象的属性）的计算别名 using`Ember.computed.alias('otherProperty')`似乎与使用`propertyNameBinding: 'otherProperty'`.

我查看了源代码和文档，但我找不到任何理由说明为什么其中一个比另一个更受欢迎。显然模板使用绑定，这很好，但是对于控制器中的属性，或者在视图上引用控制器的属性，有区别吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-06T21:36:49.327

可以在extend() 上覆盖别名，从而完全消除与其他键的关系。

一个简单的例子：我有一个与时间相关的函数和类，这些类既有一个`unit`属性（用于 Day、Minute 等），也有一个`precision`属性。通常这些在功能上是相同的。在一个或两个类别中，它们是不同的。`Ember.computed.alias`在大多数情况下允许`precision`使用别名`unit`，但可以根据需要用自己的值覆盖。

请注意， create() 将使用别名设置器，而不是覆盖。

此外，在路径中设置一个带有空对象的别名可能会崩溃，而如果路径没有通向任何地方，绑定将根本不同步。

**请参阅**下面对 *Binding 语法的软弃用的 morgoth 评论

# emacs - 在组织模式下，如何折叠/隐藏脚注？

> ID：15258055
> 
> 赞同：6
> 
> 时间：2013-03-06T21:06:31.657
> 
> 标签：emacs, lisp, elisp, org-mode, footnotes

在 Emacs org-mode 中，有没有办法让内联脚注定义显示为折叠？

例如，像这样的一行：

```
This effect is due to the strength of weak ties[fn:: Newman, Mark, Albert-László Barabási, and Duncan J. Watts. 2006\. The Structure and Dynamics of Networks. Princeton, NJ: Princeton University Press]. 
```

可能看起来像这样：

```
This effect is due to the strength of weak ties[✭]. 
```

必要时我还需要一个命令来显示脚注。所以也许需要的是两个命令：`org-hide-footnotes`和`org-show-footnotes`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:59:06.267

我不相信目前这是可能的。也`TAB`用作其中的扩展键可能会导致键的更多重载。

另一方面，有什么特别的理由不为脚注使用脚注部分吗？

`C-c C-x f`将创建/与您拥有的任何脚注进行交互。

> (org-footnote-action & optional SPECIAL)
> 
> 为脚注做正确的事情。
> 
> 在脚注引用时，跳转到定义。
> 
> 在定义时，如果存在引用，则跳转到引用，否则请提供创建它们。
> 
> 当既不是定义也不是参考时，以交互方式创建一个新的脚注。
> 
> 使用前缀 arg SPECIAL，在菜单中提供附加命令。

附加命令是：

```
 s   Sort the footnote definitions by reference sequence.  During editing,
          Org makes no effort to sort footnote definitions into a particular
          sequence.  If you want them sorted, use this command, which will
          also move entries according to org-footnote-section.  Automatic
          sorting after each insertion/deletion can be configured using the
          variable org-footnote-auto-adjust.
      r   Renumber the simple fn:N footnotes.  Automatic renumbering
          after each insertion/deletion can be configured using the variable
          org-footnote-auto-adjust.
      S   Short for first r, then s action.
      n   Normalize the footnotes by collecting all definitions (including
          inline definitions) into a special section, and then numbering them
          in sequence.  The references will then also be numbers.  This is
          meant to be the final step before finishing a document (e.g., sending
          off an email).  The exporters do this automatically, and so could
          something like message-send-hook.
      d   Delete the footnote at point, and all definitions of and references
          to it. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-06T04:50:30.960

**初始**（2014 年 2 月 6 日）：第一个工作草案。

**编辑**2014 年 2 月 18 日：修改了函数`lawlist-toggle-block-visibility`，使其包含正确的 if/then/else 语句 - 即，如果该行包含必要的开始区域正则表达式，则将切换块可见性，否则会显示一条消息 sorry 。. . . 为代码折叠添加了对相关线程的引用。修改了错误消息以引用点而不是线。

以下答案的源代码也存储在 Github 上： [https ://github.com/lawlist/lawlist-org-block-toggle/blob/master/lawlist-org-block-toggle.el](https://github.com/lawlist/lawlist-org-block-toggle/blob/master/lawlist-org-block-toggle.el)

关于相关问题（即完全隐藏包含单词的属性抽屉`:PROPERTIES:`），请参考以下线程： [完全隐藏 :PROPERTIES: org-mode 中的抽屉](https://stackoverflow.com/questions/17478260/completely-hide-the-properties-drawer-in-org-mode)

关于半相关问题（即，创建要折叠代码的自定义块），另请参阅： [https ://tex.stackexchange.com/a/161196/26911](https://tex.stackexchange.com/a/161196/26911)

此解决方案已使用相当新版本的 Emacs Trunk（构建于 2014 年 1 月 19 日）进行了测试，其中包含 org-mode 版本 8.2.5c。由于`:PROPERTIES:`抽屉通过其`:END:`与脚注和 html 块分开折叠，因此该解决方案设想脚注和/或 html 代码块*不会*位于该属性抽屉内的任何位置。脚注可以出现在文本段落的任何位置，但不能在脚注内有另一对方括号——因为此代码查找第一个结束方括号以标记折叠区域的结束。此代码考虑了这一点，`#+BEGIN_HTML`并且`#+END_HTML`都将是*左对齐的*与左边距。启动视图仍然以相同的方式工作——例如，变量`org-startup-folded`和`org-hide-block-startup`.

的修改为`org-cycle-internal-local`org-mode 中的所有折叠形式启用选项卡循环。我们所做的只是修复函数​​的分页以使其更具可读性，并添加以下条件： `((eq org-cycle-subtree-status 'subtree) (org-show-subtree) (message "ALL") (setq org-cycle-subtree-status 'all))`. 交互功能`org-cycle`仍用于在所有各种折叠/展开视图之间进行选项卡循环。该功能`lawlist-block-org-cycle-internal-local`是由 . 使用的*非交互式*支持功能`org-cycle`。此解决方案中的两`defalias`部分代码是一切正常工作所必需的。除了使用制表符循环，用户还可以直接在标题或子标题的开头调用交互功能： `M-x org-cycle RET`

要直接切换脚注或 html 块的可见性，我们使用交互功能`lawlist-toggle-block-visibility`。将光标放在包含脚注开头或*html*块 *开头的行上的任意位置，然后键入：*`M-x lawlist-toggle-block-visibility RET`

```
(require 'org)

(defalias 'org-cycle-hide-drawers 'lawlist-block-org-cycle-hide-drawers)

(defun lawlist-block-org-cycle-hide-drawers (state)
  "Re-hide all drawers, footnotes or html blocks after a visibility state change."
  (when
    (and
      (derived-mode-p 'org-mode)
      (not (memq state '(overview folded contents))))
    (save-excursion
      (let* (
          (globalp (memq state '(contents all)))
          (beg (if globalp (point-min) (point)))
          (end
            (cond
              (globalp
                (point-max))
              ((eq state 'children)
                (save-excursion (outline-next-heading) (point)))
              (t (org-end-of-subtree t)) )))
        (goto-char beg)
        (while
          (re-search-forward
            ".*\\[fn\\|^\\#\\+BEGIN_HTML.*$\\|^[ \t]*:PROPERTIES:[ \t]*$" end t)
          (lawlist-org-flag t))))))

(defalias 'org-cycle-internal-local 'lawlist-block-org-cycle-internal-local)

(defun lawlist-block-org-cycle-internal-local ()
  "Do the local cycling action."
  (let ((goal-column 0) eoh eol eos has-children children-skipped struct)
    (save-excursion
      (if (org-at-item-p)
        (progn
          (beginning-of-line)
          (setq struct (org-list-struct))
          (setq eoh (point-at-eol))
          (setq eos (org-list-get-item-end-before-blank (point) struct))
          (setq has-children (org-list-has-child-p (point) struct)))
        (org-back-to-heading)
        (setq eoh (save-excursion (outline-end-of-heading) (point)))
        (setq eos (save-excursion (1- (org-end-of-subtree t t))))
        (setq has-children
          (or
            (save-excursion
              (let ((level (funcall outline-level)))
                (outline-next-heading)
                (and
                  (org-at-heading-p t)
                  (> (funcall outline-level) level))))
            (save-excursion
              (org-list-search-forward (org-item-beginning-re) eos t)))))
      (beginning-of-line 2)
      (if (featurep 'xemacs)
        (while
            (and
              (not (eobp))
              (get-char-property (1- (point)) 'invisible))
          (beginning-of-line 2))
        (while
            (and
              (not (eobp))
              (get-char-property (1- (point)) 'invisible))
          (goto-char (next-single-char-property-change (point) 'invisible))
          (and
            (eolp)
            (beginning-of-line 2))))
      (setq eol (point)))
    (cond
      ((= eos eoh)
        (unless (org-before-first-heading-p)
          (run-hook-with-args 'org-pre-cycle-hook 'empty))
        (org-unlogged-message "EMPTY ENTRY")
        (setq org-cycle-subtree-status nil)
        (save-excursion
          (goto-char eos)
          (outline-next-heading)
          (if (outline-invisible-p)
            (org-flag-heading nil))))
      ((and
          (or
            (>= eol eos)
            (not (string-match "\\S-" (buffer-substring eol eos))))
          (or
            has-children
            (not (setq children-skipped
              org-cycle-skip-children-state-if-no-children))))
        (unless (org-before-first-heading-p)
          (run-hook-with-args 'org-pre-cycle-hook 'children))
        (if (org-at-item-p)
          ;; then
          (org-list-set-item-visibility (point-at-bol) struct 'children)
          ;; else
          (org-show-entry)
          (org-with-limited-levels (show-children))
          (when (eq org-cycle-include-plain-lists 'integrate)
            (save-excursion
              (org-back-to-heading)
              (while (org-list-search-forward (org-item-beginning-re) eos t)
                (beginning-of-line 1)
                (let* (
                    (struct (org-list-struct))
                    (prevs (org-list-prevs-alist struct))
                    (end (org-list-get-bottom-point struct)))
                  (mapc (lambda (e) (org-list-set-item-visibility e struct 'folded))
                    (org-list-get-all-items (point) struct prevs))
                  (goto-char (if (< end eos) end eos)))))))
        (org-unlogged-message "CHILDREN")
        (save-excursion
          (goto-char eos)
          (outline-next-heading)
          (if (outline-invisible-p)
            (org-flag-heading nil)))
        (setq org-cycle-subtree-status 'children)
        (unless (org-before-first-heading-p)
          (run-hook-with-args 'org-cycle-hook 'children)))
      ((or
          children-skipped
          (and
            (eq last-command this-command)
            (eq org-cycle-subtree-status 'children)))
        (unless (org-before-first-heading-p)
          (run-hook-with-args 'org-pre-cycle-hook 'subtree))
        (outline-flag-region eoh eos nil)
        (org-unlogged-message
        (if children-skipped
          "SUBTREE (NO CHILDREN)"
          "SUBTREE"))
        (setq org-cycle-subtree-status 'subtree)
        (unless (org-before-first-heading-p)
          (run-hook-with-args 'org-cycle-hook 'subtree)))
      ((eq org-cycle-subtree-status 'subtree)
        (org-show-subtree)
        (message "ALL")
        (setq org-cycle-subtree-status 'all))
      (t
        (run-hook-with-args 'org-pre-cycle-hook 'folded)
        (outline-flag-region eoh eos t)
        (org-unlogged-message "FOLDED")
        (setq org-cycle-subtree-status 'folded)
        (unless (org-before-first-heading-p)
        (run-hook-with-args 'org-cycle-hook 'folded))))))

(defun lawlist-org-flag (flag)
  "When FLAG is non-nil, hide any of the following:  html code block;
footnote; or, the properties drawer.  Otherwise make it visible."
  (save-excursion
    (beginning-of-line 1)
    (cond
      ((looking-at ".*\\[fn")
        (let* (
          (begin (match-end 0))
          end-footnote)
          (if (re-search-forward "\\]"
                (save-excursion (outline-next-heading) (point)) t)
            (progn
              (setq end-footnote (point))
              (outline-flag-region begin end-footnote flag))
            (user-error "Error beginning at point %s." begin))))
      ((looking-at "^\\#\\+BEGIN_HTML.*$\\|^[ \t]*:PROPERTIES:[ \t]*$")
        (let* ((begin (match-end 0)))
          (if (re-search-forward "^\\#\\+END_HTML.*$\\|^[ \t]*:END:"
                (save-excursion (outline-next-heading) (point)) t)
            (outline-flag-region begin (point-at-eol) flag)
            (user-error "Error beginning at point %s." begin)))))))

(defun lawlist-toggle-block-visibility ()
"For this function to work, the cursor must be on the same line as the regexp."
(interactive)
  (if
      (save-excursion
        (beginning-of-line 1)
          (looking-at
            ".*\\[fn\\|^\\#\\+BEGIN_HTML.*$\\|^[ \t]*:PROPERTIES:[ \t]*$"))
    (lawlist-org-flag (not (get-char-property (match-end 0) 'invisible)))
    (message "Sorry, you are not on a line containing the beginning regexp."))) 
```

# sql - 将 Excel 工作表中的数据插入到链接的访问表中

> ID：15258056
> 
> 赞同：0
> 
> 时间：2013-03-06T21:06:34.253
> 
> 标签：sql, ms-access, vba, ms-access-2007

我有多个（大约 9 个）具有一对多和多对一关系的访问表（所有表都以某种方式链接，有一个主表与所有表具有一对多和多对一关系）。我想将数据从 Excel 表中插入三个表中。

提供的 Excel 表仅包含三个链接表的数据。我怎样才能最好地解决这个问题？我在这里查看的插入查询有多复杂？

非常感谢任何建议。

编辑：

这是我的表结构：

主题

```
SubjectID   (Autonumber)    Primary Key
MasterID    (Number)        Foreign Key
Description (Text) 
```

掌握

```
MasterID    (Autonumber)    Primary Key
StatusID    (Number)        Foreign Key
StudentID   (Text) 
Description (Text) 
```

地位

```
StatusID    (Autonumber)    Primary Key
Description (Text) 
```

表关系：

```
Master (One) --> (Many) Subject
Status (One) --> (Many) Master 
```

来自 Excel 的数据：

```
StudentID Subject    Status
JP121     Math       Active
SP223     Bio        Active
JK111     Chem       In Suspense
LS433     Bio        In Active
NP833     Math       In Active
SS777     Chem       Active
BK299     Bio        In Suspense 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:44:07.343

根据您的表结构，这是我推荐的过程

1.)通过从 Excel 中`Status`选择所有 Unique 来构建表格。`STATUS`

2.) 通过从 Excel 中`Subject`选择所有 Unique来构建表格。`Subjects`

3.) 填充这些表后，您可以继续构建您的主表。对于 excel 中的每一`student`行，`statusID`从`status`表和表中`subjectID`获取`subject`

这有意义吗？

关于`Status`表我的理解是你打算填充这样的`Status ID`东西

```
StatusID | Description
---------|------------
   1     | Active
   2     | InActive
   3     | In Suspense 
```

还要补充一点，`Subject`表不需要`MasterID`列。相反，您可以在表格中有`SubjectID`列`Master`

# android - adb logcat 无法使用 -f 选项写入文件（在 windows XP 下）

> ID：15258057
> 
> 赞同：2
> 
> 时间：2013-03-06T21:06:37.007
> 
> 标签：android, windows, file, windows-xp, logcat

我想将我的 android 设备中的日志写入 Windows XP 下的文件。我正在尝试使用命令：

```
adb logcat -f test 
```

但它返回：

```
log file locked.couldn't open output file: Bad file number 
```

如果我使用

```
adb logcat >test 
```

然后它工作正常，但它没有向控制台显示任何内容。我认为使用“-f”选项会在控制台中显示数据并同时写入文件。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-09T16:18:42.587

只是分享以防有人跌倒在这里。

这些`-f`选项需要来自手机文件夹（而不是来自您的 PC）的路径。例如：

```
adb logcat -f /sdcard/test.txt 
```

然后，在停止日志后，您必须从手机中提取该文件：

```
adb pull /sdcard/test.txt 
```

# java - 不重复的java随机值

> ID：15258063
> 
> 赞同：1
> 
> 时间：2013-03-06T21:06:50.223
> 
> 标签：java, random, duplicates

我需要从中挑选一些随机值`ArrayList`，但值不能重复。使用下面的代码，我只需选择随机值，但它们可以重复。

```
 for (int i = 0; i < 5; i++) {

        index = random.nextInt(menuItems.size());
        HashMap<String, String> urls = new HashMap<String, String>();

        urls.put("Value", menuItems.get(index).get(KEY_URL));

        randomitems.add(urls);

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T21:08:59.983

如果你不需要保持`menutItems`特定的顺序，你可以简单地洗牌并取前 5 个项目：

```
Collections.shuffle(menuItems);
for (int i = 0; i < 5; i++) {
    HashMap<String, String> urls = new HashMap<String, String>();
    urls.put("Value", menuItems.get(i).get(KEY_URL));
    randomitems.add(urls);
} 
```

如果您确实需要保持`menuItems`原样，您可以先制作一份副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:10:19.227

是的，可能会再次给出相同的数字，这是随机性的本质。

要摆脱这种情况，您必须手动检查新的随机数与以前收到的随机数并扔掉所有您不想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:10:29.087

复制你的清单，这样你就不会弄乱你的旧清单

```
List<Object> randomList = new ArrayList<Object>(oldList); 
```

选一个

```
int index = new Random().nextInt(randomList.size());
Object randomObj = randomList.get(index);
randomList.remove(index); 
```

所以每次你选一个，你就不能再选那个了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:14:49.957

我在这里回答你的问题的标题。我使用 a`Set`来确保每个数字都是唯一的，并且我不会停止添加数字，直到它等于我想要的大小。然后我将其转换为`List`：

```
package com.sandbox;

import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;
import java.util.Random;
import java.util.Set;

public class Sandbox {

    private static final int TOTAL_NUMBERS_I_WANT = 5;

    public static void main(String[] args) {
        Random random = new Random();
        Set<Integer> nonRepeatingRandomNumbers = new HashSet<Integer>();
        while (nonRepeatingRandomNumbers.size() < TOTAL_NUMBERS_I_WANT) {
            nonRepeatingRandomNumbers.add(random.nextInt());
        }
        List<Integer> result = new ArrayList<Integer>(nonRepeatingRandomNumbers);
        System.out.println(result);
    }
} 
```

# vb.net - Windows Phone 8 Web 浏览器控件不起作用

> ID：15258064
> 
> 赞同：0
> 
> 时间：2013-03-06T21:06:50.353
> 
> 标签：vb.net, xaml, windows-phone-8, webbrowser-control, windows-phone

我正在尝试导航到 URL，但 Web 浏览器控件显示空白页面或显示页面找不到错误。这是我的代码：

```
Private Sub qwb_Loaded(sender As Object, e As RoutedEventArgs) Handles qwb.Loaded
    NavigationContext.QueryString.TryGetValue("url", url)
    Dim urltonav = New Uri(url, UriKind.RelativeOrAbsolute)
    qwb.Navigate(urltonav)
End Sub 
```

PS：网址是[http://www.mobile.quora.com](http://www.mobile.quora.com)。在 Page1_Loaded 事件下加载页面也不起作用。

这是具有 Web 浏览器控件的页面的 XAML 代码：

```
<phone:PhoneApplicationPage
    x:Class="MyApp.Page1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    mc:Ignorable="d"
    shell:SystemTray.IsVisible="True">

       <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

               <StackPanel Grid.Row="0" Margin="12,17,0,28"/>
        <phone:WebBrowser x:Name="qwb" HorizontalAlignment="Left" VerticalAlignment="Top" Grid.RowSpan="2" Height="768" Width="480" IsScriptEnabled="True"/>

         </Grid>

</phone:PhoneApplicationPage> 
```

我正在尝试在设备上运行应用程序，而不是使用工作 WiFi 的模拟器。操作系统版本是 Windows Phone 8，我有 Visual Studio 2012。我认为网络没有问题。我什至尝试使用 .Source 属性而不是 Navigate ，但它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:44:16.873

您可能打算访问[http://mobile.quora.com](http://mobile.quora.com) （没有 www）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T07:39:33.180

你能显示你的网址吗？

*   如果它是 html 页面，那么您应该将其保存在解决方案的文件夹中并写入

    WebBrowser1.Navigate(new Uri("ch51130.html", UriKind.Relative));

*   如果是简单的网址，例如 www.google.com，那么

    Uri uri = new Uri(" [http://www.google.co.in](http://www.google.co.in) ");

# python - Linux 上 Python 的灵活 IPC 解决方案？

> ID：15258067
> 
> 赞同：7
> 
> 时间：2013-03-06T21:07:03.247
> 
> 标签：python, linux, client-server, ipc

我正在用 Python 编写一个程序，我正在考虑使用本地客户端-服务器模型，但我正在努力找出服务器与客户端通信的最佳方式。一个简单的、固定的解决方案是最好的——我不想重新发明轮子。这是我对这个程序的需求：

*   在 Linux 上运行
*   服务器和客户端在同一个系统上，所以我不需要通过网络。
*   对交互式用户来说不太可能烦人的延迟。
*   多个客户端可以连接到同一台服务器。
*   客户端独立于服务器启动，可以随时连接/断开连接。
*   客户数以数十计；我不需要扩展得很高。
*   客户可以有几种不同的口味：
    1.  流阅读器 - 读取连续的数据流（实际上，这都是文本）。
    2.  状态阅读器 - 读取一些不时更新的状态信息。
    3.  Writers - 向服务器发送一些数据，每次都会收到一些响应。

客户端类型 1 看起来很简单；这是一个单向哑管。客户端类型 2 更有趣一些。我想避免简单地轮询服务器以定期检查新数据，因为这会给用户增加明显的延迟。当状态信息更新时，服务器需要某种方式向所有且仅相关的客户端发出信号，以便客户端可以从服务器接收更新的状态。客户端类型 3 必须是双向的；它会将用户提供的数据发送到服务器，并在每次发送后接收某种响应。

我查看了 Python 的 IPC 页面（[http://docs.python.org/2/library/ipc.html](http://docs.python.org/2/library/ipc.html)），但我认为这些解决方案都不适合我的需求。subprocess 模块完全不合适，其他一切都比我想要的低级。

类似的问题[Efficient Python to Python IPC](https://stackoverflow.com/q/7839786/2141391)并不完全相同；我不需要传输 Python 对象，我并不特别担心我将拥有的客户端数量的 CPU 效率，我只关心 Linux，而且这个问题的答案都没有对我特别有帮助。

## 更新：

我不能接受一个只是将我指向框架/库/模块/工具的答案，而没有实际解释它如何用于我的三种不同的服务器-客户端关系。如果你说，“所有这些都可以通过命名管道来完成！” 我将不得不问“如何？” 代码片段将是理想的，但解决方案的高级描述也可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:01:56.637

你已经研究过[ZeroMQ](http://www.zeromq.org/)了吗？它具有出色的 Python 支持，并且文档中的示例已经涵盖了您的用例。

它很容易在单一平台、单一机器设置上使用，但它可以很容易地扩展到网络。

# android - Android：可以在TaskManager中杀死AlarmManager

> ID：15258072
> 
> 赞同：-1
> 
> 时间：2013-03-06T21:07:16.483
> 
> 标签：android, alarmmanager, taskmanager

当我使用 AlarmManager 时，它可以被 TaskManager 杀死，并且永远不会回来。Facebook 应用程序如何工作？它不会出现在任务管理器中，但会发送通知。即使我已经杀了它。

他们在使用推送消息吗？

或者他们正在使用后台服务......但它怎么能一直运行？一个永无止境的while循环和睡眠？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T21:21:05.687

自己找到的……在我调用的 onpause 函数中

```
finish(); 
```

现在我的应用程序不再显示在任务管理器中，但仍然调用警报管理器

# parsing - Parse.js + AngularJS 应用关系数据查询问题

> ID：15258075
> 
> 赞同：3
> 
> 时间：2013-03-06T21:07:29.007
> 
> 标签：parsing, angularjs, parse.js

我有两个解析类；公司和评级。这是一对多的关系。公司可以有许多评级。这是我将在 SQL 中执行的语句：

```
SELECT Companies.name, Ratings.rating
FROM Companies
INNER JOIN Ratings
ON Ratings.name_id = Companies.name_id
ORDER BY Companies.name 
```

我想要 Parse 中的等价物，但我不知道该怎么做。这是我目前尝试过的：

```
function getRatings() {
  var tableA = new Parse.Query(Companies);
  var tableB = new Parse.Query(Ratings);

  tableB.equalTo("name_id", tableA.name_id);
  tableB.find({
    success: function(results) {
      $scope.$apply(function() {
        $scope.companies = results.map(function(obj) {
          return {
            id: obj.get("name_id"), 
            name: obj.get(tableA.name), 
            rating: obj.get("rating"), 
            parseObject: obj
          };
        });
      });
    },
    error: function(error) {
      alert("Error: " + error.code + " " + error.message);
    }
  });
} 
```

我在控制器加载时调用此函数。此代码在我的输出中显示评级，但不显示公司名称。

我正在尝试获取公司对象中列出的所有公司，然后将它们与评级对象中的所有评级配对。它们的共同键是`name_id`. 这是我在 Angular 视图中使用的代码：

```
<div class="span12">
    <div ng-repeat="company in companies | filter: query | orderBy: orderList" 
         class="well company-description">
        <h1>{{company.name}}</h1>
        <h3>Rating: {{company.rating}}</h3>
    </div>
</div> 
```

如果我在此基础上有所偏离，请告诉我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T16:35:58.270

摆脱类中的`name_id`列`Ratings`。这不是您应该使用 Parse 定义关系的方式。

有几个选项供您选择。

**选项1**

使用 Parse 数据浏览器，在类下添加一个新列`Companies`，名为`ratings`. 它应该是一列类型`Relation`并指向`Ratings`目标类。（如果您需要有关如何执行此操作的更多信息，请告诉我。）

然后，当您创建或编辑公司时，添加如下评级：

```
var Companies = Parse.Object.extend("Companies");
var Ratings = Parse.Object.extend("Ratings");

var company = new Companies({name: "Some Company"});
company.relation("ratings").add(new Ratings({stars: 5}));
company.save(); 
```

然后，在查询时`Companies`，请执行以下操作：

```
new Parse.Query(Companies).find({
    success: function(companies) {
        for (var i = 0; i < companies.length; i++) {
            companies[i].relation("ratings").query().find({
                success: function(ratings) {
                    // Finally, I have the ratings for this company
                }
            }
        }
    }
}); 
```

**选项 2**

使用 Parse 数据浏览器，在类下添加一个新列`Companies`，名为`ratings`. 它应该是一个类型的列`Array`。

然后，当您创建或编辑公司时，添加如下评级：

```
var Companies = Parse.Object.extend("Companies");
var Ratings = Parse.Object.extend("Ratings");

var company = new Companies({
    name: "Some Company",
    ratings: [new Ratings({stars: 5})]
});
company.save(); 
```

然后，在查询时`Companies`，请执行以下操作：

```
new Parse.Query(Companies).include("ratings").find({
    success: function(companies) {
        // Yay, I have access to ratings via companies[0].get("ratings")
    }
}); 
```

`include("ratings")`告诉 Parse 包含实际对象，而不是指向给定键的对象的指针。

**结论**

如果您希望对每家公司都有大量评级，并且您并不总是计划在每次查询这些公司时检索所有评级，则选项 1 会更好。

如果每个公司的评级数量相对较少，并且您总是希望在查询公司时返回评级，则选项 2 会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:34:37.470

我发现了如何解决`Uncaught You can't add an unsaved Parse.Object to a relation.`错误。

```
 var addRating = new Ratings({stars: rating}); // save rating first, then associate it with a company
    addRating.save({
        success: function() {
            var addCompany = new Companies({name: name});
            addCompany.relation("ratings").add(addRating);
            addCompany.save();
        }
    }); 
```

评级必须先保存，然后可以稍后添加公司关系......有道理，但我花了一段时间才弄清楚！:S

# javascript - 为什么我不应该更改函数内部的全局变量？

> ID：15258077
> 
> 赞同：-1
> 
> 时间：2013-03-06T21:07:30.827
> 
> 标签：javascript, global-variables

我正在编写 JavaScript 代码，并被告知我不应该更改函数中的全局变量。为什么这会是个问题？有什么标准的替代品吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:15:45.613

在任何语言中，从函数更改全局变量通常会使函数的输出不确定，这使得代码难以遵循并且经常导致不必要的副作用。因此，如果可以通过适当地确定变量的范围，就应该避免它，如果没有看到代码就很难提供帮助

名称破坏也是一个问题。然而，这可以通过命名你的全局变量来轻松解决。

最后，正如您可能知道的那样，因为您的问题确实说“为什么我不应该更改全局变量”，只读全局变量（常量）并不是真正的问题，因为它们不会改变，因此没有任何副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:48:00.183

[看这幅漫画](http://www.datamation.com/imagesvr_ce/3549/global-variable.jpg)

全局变量是线程安全系统的对立面。你不应该拥有它们，但如果你拥有它们，那么只有一个线程应该拥有/更改它们。它们应该始终通过服务层来处理。

# android - 纬度/经度和米

> ID：15258078
> 
> 赞同：9
> 
> 时间：2013-03-06T21:07:33.473
> 
> 标签：android, math, distance, latitude-longitude

我有一个小算法问题。

我正在开发一个 Android 应用程序。我得到 GPS 坐标。例如：纬度：`23.23907`，经度：`50.45786`。

所以我得到了一点。我想计算这一点正负 5 米的边界细节。IE：

```
[23.23907 - 5 meters ; 23.23907 + 5 meters]
[50.45786 - 5 meters ; 50.45786 + 5 meters] 
```

如何进行这个计算？

非常感谢你！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T07:35:55.250

当您仅在南北和东西方向工作时，可以大大简化半正弦公式。

如果地球的周长是 C，则给定点以南 d 公里处的点是向南**360*d/C**度。向东 d 公里处的点是向东**360*d/(C*cos(纬度))**度。分母中的余弦来自这样一个事实，即给定纬度的经度长度比赤道短那么多。

因此，如果[地球的周长](http://www.wolframalpha.com/input/?i=earth%27s%20circumference)为 40075.04 公里，要向北/南移动 5 m，您将从纬度中添加/减去**0.0000449**并使用相同的经度。要向西/东移动 5 m，您将使用相同的纬度并将经度添加/减去**0.0000449/cos(latitude)**。但是不要忘记边缘情况：在极点附近，您必须将纬度限制在 90°，而在经度 180° 附近，您必须加或减 360°，以将经度保持在正确的范围内。

根据您的数字，范围大约是：

```
latitude:  [23.23903 ; 23.23911]
longitude: [50.45781 ; 50.45791] 
```

* * *

**更新：**请注意，这仍然假设地球是一个完美的球体，[但事实并非如此](http://en.wikipedia.org/wiki/Figure_of_the_Earth)。例如，GPS 系统将地球建模为一个椭球体，其中赤道位于 6378.137 公里处，两极位于距地球中心 6356.7523142 公里处。差异大约为 1/300，对于许多应用程序来说非常重要，但在这种情况下，它在误差范围内。

修正经度公式应该很简单，因为平行线仍然是圆圈：您只需要交换`cos(latitude)`正确的系数。计算[正确的纬度](http://en.wikipedia.org/wiki/Meridian_arc)比较困难，因为子午线不是圆而是椭圆，而且椭圆的弧长不能用初等函数计算，所以必须使用近似值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-09T12:10:49.990

我想添加一个非常重要的评论：

**余弦是在纬度上以弧度而不是度数计算的。**

*换算：弧度 = PI / 180 * 度*

# c++ - 如何在 C/C++ 中获取多维数组的列？

> ID：15258084
> 
> 赞同：3
> 
> 时间：2013-03-06T21:07:44.327
> 
> 标签：c++, c, arrays, multidimensional-array, variable-assignment

```
int matrix[9][9],*p;
p=matrix[0]; 
```

这有效并给出了第一行`matrix`，但是如何获得`matrix`我尝试过的第一列`p=matrix[][0];` ？另外我不明白为什么下面的代码会出现编译器错误？

```
int matrix[9][9],p[9];  // it looks really ugly, byt why it doesn't work ?
p=matrix[0];            // compiler gives "invalid array assigment" 
```

是因为多维数组是数组的数组 - 我们应该解释`matrix[i][j]`为第 i 个嵌套数组的第 j 个元素吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T21:11:58.637

在 C/C++ 中，多维数组实际上存储为一维数组（在内存中）。您的 2D 矩阵存储为具有行优先顺序的一维数组。这就是为什么要从中取出一列并不容易，并且默认情况下不提供。**内存中没有连续的数组，您可以获得一个指针，该指针表示多维数组的一列。**见下文：

当你这样做时`p=matrix[0]`，你只是得到指向第一个元素的指针`matrix[0][0]`，这让你认为你得到了指向第一行的指针。实际上，它是一个指向包含 的整个连续数组的指针`matrix`，如下所示：

```
matrix[0][0]
matrix[0][1]
matrix[0][2]
.
.
matrix[1][0]
matrix[1][1]
matrix[1][2]
.
.
matrix[8][0]
matrix[8][1]
matrix[8][2]
.
.
matrix[8][8] 
```

如上所见，任何给定列的元素都由相应行中的其他元素分隔。

因此，作为旁注，`p`如果您愿意，可以使用指针遍历矩阵的全部 81 个元素。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-06T21:13:02.783

您可以使用类似的循环获取第一列

```
for(int i = 0; i < 9; i++)
{
    printf("Element %d: %d", i, matrix[i][0]);
} 
```

我认为分配不能正常工作，因为您试图将不是地址的东西分配给指针。

（对不起，这是c代码）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T21:22:17.420

`matrix[81]`指定或指定没有区别`matrix[9][9]`

`matrix[r][c]`只是意味着相同`matrix[9*r+c]`

还有其他更适合多维数组的容器，例如`boost::multi_array`

[http://www.boost.org/doc/libs/1_53_0/libs/multi_array/doc/index.html](http://www.boost.org/doc/libs/1_53_0/libs/multi_array/doc/index.html)

将裸数组想象成分配一块连续的内存。你，程序员然后必须自己处理这块内存。数组的裸名，例如`matrix`是指向这块已分配内存的第一个元素的指针。然后与or`*(matrix+1)`相同。`matrix[0][1]``matrix[1]`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T21:11:13.997

p 是一个 int 数组，matrix[0] 是一个指针..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T21:13:35.820

`matrix`它本身是您可以得到的最接近数组列的东西，因为`(matrix + 1)[0][0]`它与`matrix[1][0]`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T21:45:33.853

如果您希望矩阵位于连续位置，请将其声明为一维数组并自己执行行和列计算：

```
int contiguous_matrix[81];

int& location(int row, int column)
{
  return contiguous_matrix[row * 9 + column];
} 
```

您还可以遍历一行的每一列：

```
typedef void (*Function_Pointer)(int&);

void Column_Iteration(Function_Pointer p_func, int row)
{
  row = row * MAXIMUM_COLUMNS;
  for (unsigned int column = 0; column < 9; ++column)
  {
    p_func(contiguous_matrix[row + column]);
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-26T08:26:47.593

对于静态声明的数组，您可以像连续一维数组一样访问它们，`p = matrix[0]`这将为您提供第一行的第一列。然后可以像`p[i]`、`*(p+i)`或一样访问一维数组`p[current_raw * raw_size + current_column)`。

如果用 表示二维数组，事情就会变得棘手，`**p`因为它将被解释为指向一维数组的指针数组。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-27T07:22:42.807

我不知道这是否是一个有效的解决方案，但通过这种方式，我可以获得专栏，

```
int arr[9][2] = { {2,  57}, {3,  66}, {4,  73}, {5,  76}, {6,  79}, {7,  81}, {8,  90}, {9,  96}, {10, 100}};

int c[18];
int co = 0;
for (auto & i : arr) {
    for (int j : i) {
        c[co++] = j;
    }
}

for (int i = 0; i < co; ++i) {
    if (i % 2 != 0)
        std::cout << c[i] << " ";
} 
```

# c# - 如何通过服务器上的 ftp 在服务器上提取 zip 文件？

> ID：15258087
> 
> 赞同：1
> 
> 时间：2013-03-06T21:08:00.833
> 
> 标签：c#, asp.net

我想将位于“Site1.Com”上的“Default.aspx”文件解压缩到“Site2.Com”，我的 zip 文件位于“Site2.Com”上，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:09:27.947

看看[System.IO.Compression.ZipFile](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile.aspx)。您将需要 .NET 4.5。

查看[Server.MapPath](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)以获取服务器的根目录，您可以使用从那里获取文件的相对位置。

# node.js - oAuth on NodeJs for Tumblr using Express

> ID：15258094
> 
> 赞同：0
> 
> 时间：2013-03-06T21:08:13.050
> 
> 标签：node.js, oauth, express

我尝试使用 Express Framework 使用 NodeJs 的 oauth 连接到**tumblr**，但我总是收到此消息**oauth_timestamp is too far; 我们相信现在是 1362603519，您发送了 1362599755，距离 3764 秒**

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:10:40.987

副手它看起来像一个时区问题；在提出请求之前，您是否没有将当前时间转换为 UTC？

# android - EditText：切换 InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS

> ID：15258100
> 
> 赞同：4
> 
> 时间：2013-03-06T21:08:33.097
> 
> 标签：android, android-edittext

我`EditText`通过扩展创建了一个自定义`android.widget.EditText`.

我希望只有在`EditText`有焦点时才能看到自动更正的跨度。所以我调用`setInputType(INPUT_NO_FOCUS);`构造函数并：

```
@Override
protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {
    super.onFocusChanged(focused, direction, previouslyFocusedRect);
    if (focused) {
        setInputType(INPUT_FOCUS);
    } else {
        setInputType(INPUT_NO_FOCUS);
    }
} 
```

和：

```
private final int INPUT_NO_FOCUS = TYPE_CLASS_TEXT | InputType.TYPE_TEXT_FLAG_MULTI_LINE
        | InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS;
private final int INPUT_FOCUS = TYPE_CLASS_TEXT | TYPE_TEXT_FLAG_MULTI_LINE
        | InputType.TYPE_TEXT_FLAG_AUTO_CORRECT | InputType.TYPE_TEXT_FLAG_AUTO_COMPLET; 
```

==> 确实没有自动更正和自动完成，但是点击后没有出现`EditText`。输入类型更改成功。

**如何触发自动更正/添加自动完成？**

//编辑：

我要存档的用户案例：

1.  `MyEditText extends EditText`视图显示且未聚焦。文本没有拼写检查（-->文本下没有红色跨度/线条）

2.  用户点击进入编辑字段。--> 触发拼写检查 --> 出现红线（用户可以点击拼写错误的单词并让操作系统更正它们）

3.  用户单击另一个视图元素 --> 红线/跨度消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:07:35.290

恐怕没有好的方法可以做到这一点。问题是 Android 框架并没有真正的机制来告诉键盘输入类型何时发生变化。键盘通常会在字段打开时检查类型。在那之后，如果类型发生变化，除非它轮询它，否则它不会知道，而且我认为任何现有的键盘都不会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:56:43.693

在 MyEditText 类中覆盖此方法

```
`@Override
    protected void onTextChanged(CharSequence text, int start, int lengthBefore, int lengthAfter) {
        super.onTextChanged(text, start, lengthBefore, lengthAfter);
        setInputType(INPUT_FOCUS);
    }`
```

`使用此方法，您可以将 EditText 的 inputType 更改为 INPUT_FOCUS，当用户编辑 MyEditText 的文本时，在文本下显示红线`

# android - 如何将 SD 卡中的图像附加到电子邮件中？

> ID：15258111
> 
> 赞同：0
> 
> 时间：2013-03-06T21:08:57.313
> 
> 标签：android, image, email, sd-card

我正在尝试将 SD 卡中的图像附加到电子邮件（从我的应用程序到 Gmail 应用程序）。

每次我尝试时，我都会选择 Gmail 应用程序并关闭它，它不会附加文件。

假设图像路径是：`/sdcard/DCIM/Snapseed/Snapseed4.jpg`. 这是我用来发送电子邮件的代码：

```
Intent emailintent2 = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
emailintent2.setType("image/*");
emailintent2.putExtra(Intent.EXTRA_EMAIL, emailaddress2);
emailintent2.putExtra(Intent.EXTRA_SUBJECT, CorAsunto);
emailintent2.putExtra(Intent.EXTRA_TEXT, message2);

Uri uris = Uri.fromFile(new File(Environment.getExternalStorageDirectory()
        + "/DCIM/Snapseed/Snapseed4.jpg"));

emailintent2.putExtra(Intent.EXTRA_STREAM, uris);
startActivity(emailintent2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:03:44.497

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.setType("text/plain");
    emailIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
    emailIntent.setType("image/jpeg");
    emailIntent.putExtra(Intent.EXTRA_STREAM,Uri.parse("SDCARD IMAGE PATH"));
    startActivity(Intent.createChooser(emailIntent,"Share image using")); 
```

# ruby-on-rails-3 - 从 id 列名获取类名

> ID：15258118
> 
> 赞同：0
> 
> 时间：2013-03-06T21:09:14.687
> 
> 标签：ruby-on-rails-3

给定字符串格式的列名（例如“hamburger_id”或“foo_bar_id”），是否有获取类（或类名）的标准方法。在这种情况下，汉堡包还是 FooBar？

我能想到的唯一方法是：

```
column_name[0, column_name.length - 3].camelize.constantize 
```

我可以假设（或规定）变量 column_name 始终包含一个以“_id”结尾的字符串，并且始终存在相应的类。

如果有人觉得它相关或好奇，我可以详细说明“为什么”，但我不想用这些细节来混淆这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:24:50.667

您可以执行以下操作（假设 Post 模型的传统 Rails 示例包含多个 Comment 模型）：

```
Model.reflect_on_all_associations.select{|a| a.foreign_key == 'column_name'}.first.class_name 
```

这样做的好处是，如果您的类名和外键不对齐，它仍然会给出正确的类名。例如，如果您的外键是`owner_id`但关联的模型实际上是命名的`User`，这将返回`"User"`而不是`"Owner"`。

这仍然感觉有点像 hack，但那是因为基于列名获取此信息并不是很像 Rails - 通常您会直接与关联进行交互（使用`reflect_on_association(:foos)`）。

# php - ajax 到 php 并从中获取 JSON

> ID：15258123
> 
> 赞同：2
> 
> 时间：2013-03-06T21:09:30.903
> 
> 标签：php, jquery, json

我有一个 php 文件，我用 ajax 连接到它，回调值为 JSON，当我从 php 获取数据时它不会显示，当警报数据我看到 Object

我的问题在哪里？

**PHP**：

```
if(isset($_SERVER["HTTP_X_REQUESTED_WITH"])){

    $query = mysql_query("select * from tab");

    for ($i=0;$i<mysql_num_rows($query);$i++){

         while($row = mysql_fetch_assoc($query)){
             $title['t'][i] = $row['title'];
             $title['d'][i] = $row['description'];
         }
    }

echo(json_encode($title));
exit();

?> 
```

**JS**：

```
$('#button').click(function(){
    $.ajax({
        url : "test2.php",
        data : $("#tab"),
        type : "GET",
        success : function(b){
                      b = eval('('+ b +')');    
                      console.log((b['t']));
                      alert(b);
                  }
    });
}); 
```

我怎样才能从这个 JSON 中获取所有数据并告诉我它是正确的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T21:15:52.983

这是一个完整的单行获取和多行获取的工作示例，没有使用 mysql_ 语法和使用准备好的语句来防止 sql 注入。

是的，不要使用 mysql 特定的语法，就像我在这里提到的：[我无法让表单数据进入数据库。我究竟做错了什么？](https://stackoverflow.com/questions/15256247/i-cant-get-the-form-data-to-go-into-database-what-am-i-doing-wrong/15256553#15256553)

```
function example()
{
    var select = true;
    var url = '../scripts/ajax.php';

    $.ajax(
    {
        // Post select to url.
        type : 'post',
        url : url,
        dataType : 'json', // expected returned data format.
        data : 
        {
                'select' : select // the variable you're posting.
        },
        success : function(data)
        {
            // This happens AFTER the PHP has returned an JSON array,
            // as explained below.
            var result1, result2, message;

            for(var i = 0; i < data.length; i++)
            {
                // Parse through the JSON array which was returned.
                // A proper error handling should be added here (check if
                // everything went successful or not)

                result1 = data[i].result1;
                result2 = data[i].result2;
                message = data[i].message;
                // Do something with result and result2, or message.
                // For example:
                $('#content').html(result1);

               // Or just alert / log the data.
               alert(result1);
            }
        },
        complete : function(data)
        {
            // do something, not critical.
        }
    });
} 
```

现在我们需要在 ajax.php 中接收发布的变量：

```
$select = isset($_POST['select']) ? $_POST['select'] : false; 
```

如果未设置，三元运算符让 $select 的值变为 false。

确保您可以在此处访问您的数据库：

```
$db = $GLOBALS['db']; // An example of a PDO database connection 
```

现在，检查是否请求了 $select (true)，然后执行一些数据库请求，并使用 JSON 返回它们：

```
if($select)
{
    // Fetch data from the database.
    // Return the data with a JSON array (see below).
}
else
{
    $json[] = array
    (
        'message' => 'Not Requested'
    );
}
echo json_encode($json);
flush(); 
```

您如何从数据库中获取数据当然是可选的，您可以使用 JSON 从数据库中获取单行，也可以使用它返回多行。

让我举一个例子，说明如何使用 json 返回多行（您将在 javascript（数据）中迭代）：

```
function selectMultipleRows($db, $query)
{
    $array = array();
    $stmt = $db->prepare($query);
    $stmt->execute();
    if($result = $stmt->fetchAll(PDO::FETCH_ASSOC))
    {
        foreach($result as $res)
        {
            foreach($res as $key=>$val)
            {
                $temp[$key] = utf8_encode($val);
            }
            array_push($array, $temp);
        }
        return $array;
    }
    return false;
} 
```

然后你可以做这样的事情：

```
if($select)
{
    $array = array();
    $i = 0;

    $query = 'SELECT e.result1, e.result2 FROM exampleTable e ORDER BY e.id ASC;';
    foreach(selectMultipleRows($db, $query) as $row)
    {
        $array[$i]["result1"] = $row['result1'];
        $array[$i]["result2"] = $row['result2'];
        $i++;
    }

    if(!(empty($array))) // If something was fetched
    {
        while(list($key, $value) = each($array))
        {
             $json[] = array
             (
                 'result1' => $value["result1"],
                 'result2' => $value["result2"],
                 'message' => 'success'
             );
       }
    }
    else // Nothing found in database
    { 
        $json[] = array
        (
             'message' => 'nothing found'
        );
    }
}
// ... 
```

或者，如果你想亲吻（保持简单愚蠢）：

初始化一个从数据库中选择一些值并返回单行的基本函数：

```
function getSingleRow($db, $query)
{
    $stmt = $db->prepare($query);
    $stmt->execute();
    // $stmt->execute(array(":id"=>$someValue)); another approach to execute.
    $result = $stmt->fetch(PDO::FETCH_ASSOC);
    if($result)
    {
        $array = (
            'result1' => $result['result1'], 
            'result2' => $result['result2']
        );
        // An array is not needed for a single value.
        return $array;
    }
    return false;
} 
```

然后获取行（或单个值）并使用 JSON 返回：

```
if($select)
{
    // Assume that the previously defined query exists.
    $results = getSingleRow($db, $query);
    if($results !== false)
    {
         $json[] = array
         (
             'result1' => $results['result1'],
             'result2' => $results['result2'],
             'message' => 'success'
         );
    }
    else // Nothing found in database
    { 
        $json[] = array
        (
             'message' => 'nothing found'
        );
    }
}
// ... 
```

如果你想获得 $("#tab") 的值，那么你必须执行类似 $("#tab").val() 或 $("#tab").text() 的操作。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:14:12.453

我建议使用：

```
b = jQuery.parseJSON(data) 
```

[在这里](http://api.jquery.com/jQuery.getJSON/)查看更多 或

[$.getJSON](http://api.jquery.com/jQuery.parseJSON/)

而不是 eval()

# python - 防御性编程还是浪费时间？

> ID：15258128
> 
> 赞同：2
> 
> 时间：2013-03-06T21:09:55.313
> 
> 标签：python

这个问题的一般要点：如果出现问题的可能性很小，我应该抓住可能的错误吗？具体来说：

我有一个应用程序，它可以读取程序以前的历史记录并将其写入 .txt 文件。初始化时，程序读取历史文件以确定它应该和不应该做的操作。如果还没有历史文件，它会创建一个。像这样：

```
global trackList
try:
    # Open history of downloaded MP3s and transfer it to trackList
    with open('trackData.txt', 'r') as f: 
        trackrackList = f.readlines()
except Exception, e: #if file does not exist, create a blank new one
    with open('trackData.txt', 'w') as f:
        f.write("") 
```

然后程序会根据 MP3 是否在`txt`文件中继续下载它们。下载 MP3 后，它会将其添加到`txt`文件中。像这样：

```
mp3File = requests.get(linkURL)
with open('trackData.txt', 'a') as f:
    f.write(linkURL + '\n') 
```

现在，几乎 100% 确定该`txt`文件自在第一个函数中创建以来将保留。我们正在处理在这里下载一些 MP3 ——该程序将永远不会运行超过几分钟。但是，在下载 MP3 时，历史`txt`文件很可能已被用户删除或以其他方式损坏，在这种情况下，由于没有错误处理，程序将崩溃。

如果它不存在，一个好的程序员会将最后一个代码块包装在一个`try ... except`创建历史文件的块中，或者这只是不必要的偏执狂和浪费空间？`txt`实现起来很简单，但请记住，我有这样的程序，用户在很短的时间内有数百个机会删除/损坏以前创建的 txt 文件。我通常扁平的 Python 代码会变成一个嵌套的`try ... except`雷区。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T21:12:22.623

更安全的解决方案是在您仍在下载时打开文件并保持打开状态。用户将无法删除它。下载并记录所有内容后，关闭文件。这也将带来更好的性能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T21:12:41.410

为什么在应用程序启动时创建一个空文件？如果文件在启动时不存在，则什么也不做 -`open('trackData.txt', 'a')`仍会创建一个新文件。

# haskell - 记录语法说明

> ID：15258129
> 
> 赞同：2
> 
> 时间：2013-03-06T21:09:56.277
> 
> 标签：haskell

好的，所以这是一个不寻常的。每次看到 Haskell 的记录语法示例时，它总是看起来像

```
Sphere {center = 0, radius = 2} 
```

或类似的。我的问题是……那些大括号实际上是记录语法的一部分吗？或者它们实际上是布局的简写？换句话说，你真的能写出类似的东西吗

```
Sphere
  center = 0
  radius = 2 
```

并让它工作？

我怀疑这样做会非常*有用*——它占用了大量的视觉空间——但我只是好奇这在语法上是否*有效*。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T21:20:17.060

*布局是显式大括号和分号*的替代方案。

记录语法使用显式大括号和*逗号*。

所以不，您不能将布局用作记录语法的一部分。

[Haskell 报告 2010 §2.7 布局：](http://www.haskell.org/onlinereport/haskell2010/haskellch2.html#x7-210002.7)

> Haskell 允许省略几个语法产生式中使用的大括号和分号，通过使用*布局*来传达相同的信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T21:21:00.237

好的，我想我会把这个问题放在这里，以防有人感兴趣。在查阅了 Haskell 报告本身之后，看起来大括号*实际上*是记录结构的正式部分：

[http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-690004.2.1](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-690004.2.1)

这意味着这些标记在 Haskell 中实际上有两个不同的含义——在不使用布局时作为声明分隔符，以及作为记录分隔符。我敢打赌，这会导致一些有趣的解析器边缘案例！

（顺便`EmptyDataDecls`提一下，Haskell 2010 中似乎默认开启，这是值得知道的......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T21:28:15.890

之后`Sphere`，词法分析器不会插入大括号。为什么要呢？您不希望在代码中插入大括号，例如：

```
z = x
     + y 
```

或者，你呢？

# javascript - 将 html 内容加载到 div 时，jQuery fadeIn() 方法不起作用

> ID：15258131
> 
> 赞同：0
> 
> 时间：2013-03-06T21:10:01.630
> 
> 标签：javascript, jquery, ajax, fadein

所以这是我正在使用的代码

```
<script>
    var num=0;

    $('.loadMore').click(function() {
        num+=12;
        $.ajax({
            url: '/blogtest.php',
            data: {Posts: num},
            success: function(data){
                $('.dynamic').append(data).fadeIn(3000);
            }
        });
    });
</script> 
```

基本上，它将“blogtest.php”正在处理的 html 数据从 rss 提要附加到 div 中。我想让它在附加时淡入，同时保持已经加载的数据完好无损（即我不希望它淡入）。因为这是我的代码，如果它有效，我认为它会在整个 div 中消失。由于它不起作用，我一直在投入一切以查看是否有任何效果，但无济于事。以下是我尝试过的

```
//Doesn't fade in, but does load
$('.dynamic').append(data).fadeIn(3000); 

// Doesn't fade in, but does load
$(data).appendTo('.dynamic').fadeIn(3000); 

//Doesn't display, I assume it stays hidden
$(data).hide().appendTo('.dynamic').fadeIn(3000);

//I even tried converting 'data' to an object
var data_object = $(data); //Tried all the above methods, with same results 
```

那么有什么想法或建议吗？

编辑----我添加了一个`$(document).ready()`电话，但这并没有真正改变任何东西。与上面的代码片段有相同的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:16:02.687

```
var $node = $("<div>").html(data).hide();
$('.dynamic').append($node);
$node.fadeIn(3000); 
```

应该管用！

# c# - add click on ASP.net

> ID：15258136
> 
> 赞同：0
> 
> 时间：2013-03-06T21:10:15.287
> 
> 标签：c#, asp.net, button

I am working on a college project and have a gridview that I have to add more rows to. I have two text fields and a button. Everything seems to be fine except the button part of the code in the .cs file What am I doing wring?

Its to make a list of Wines with an ID and a Title and a Year:

Wine.aspx:

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Wine.aspx.cs" Inherits="WineNotProject2.AdminPages.Wine" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
   <br /><br />
    <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" DataKeyNames="id" DataSourceID="SqlDataSource1">

        <Columns>
            <asp:CommandField ShowEditButton="True" />
            <asp:BoundField DataField="id" HeaderText="id" InsertVisible="False" ReadOnly="True" SortExpression="id" />
            <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
            <asp:BoundField DataField="Year" HeaderText="Year" SortExpression="Year" />

        </Columns>
    </asp:GridView>

<p><asp:Label ID="lblTitle" runat="server" Text="Wine Title"></asp:Label><br />
<asp:TextBox ID="txtTitle" runat="server" Width="176px"></asp:TextBox><br />

<p><asp:Label ID="lblYear" runat="server" Text="Wine Year"></asp:Label><br />
<asp:TextBox ID="txtYear" runat="server" Width="176px"></asp:TextBox><br />
</p>

<asp:Button ID="btnAdd" runat="server" Text="Add Wine" OnClick="btnAdd_Click" />

    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
        SelectCommand="SELECT [id], [Title], [Year] FROM [Wine]">
    </asp:SqlDataSource>

</asp:Content> 
```

Wine.aspx.cs:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WineNotProject2.AdminPages
{
    public partial class Wine : System.Web.UI.Page
    {
        private WineEntities10 ent2 = new WineEntities10();

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                RefreshGrid();
            }
        }
            private void RefreshGrid()
            {
                GridView2.DataSource = ent2.Wines.ToList();
                GridView2.DataBind();
            }
            protected void btnAdd_Click(object sender, EventArgs e)
            {
                Wine w2 = new Wine();
                w2.Title = txtTitle.Text;
                w2.Year = txtYear.Text;
                ent2.Wines.AddObject(w2);
                ent2.SaveChanges();

            }

        }
    } 
```

UPDATE:

The error message is:

Error 3 'WineNotProject2.AdminPages.Wine' does not contain a definition for 'Year' and no extension method 'Year' accepting a first argument of type 'WineNotProject2.AdminPages.Wine' could be found (are you missing a using directive or an assembly reference?) C:\Visual Studio 2010\Projects\WineNotProject7\WineNotProject2\AdminPages\Wine.aspx.cs 30 20 WineNotProject2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:15:15.827

I think you need to call `RefreshGrid` after you have added the new Wine:

```
protected void btnAdd_Click(object sender, EventArgs e)
{
    Wine w2 = new Wine();
    w2.Title = txtTitle.Text;
    w2.Year = txtYear.Text;
    ent2.Wines.AddObject(w2);
    ent2.SaveChanges();
    RefreshGrid(); // <-------
} 
```

Maybe you also need to parse the year to `int`:

```
w2.Year = int.Parse(txtYear.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:17:25.717

Your code was looking good ,But you miss call the RefreshGrid() end of add button

for

```
protected void btnAdd_Click(object sender, EventArgs e)
            {
                Wine w2 = new Wine();
                w2.Title = txtTitle.Text;
                w2.Year = txtYear.Text;
                ent2.Wines.AddObject(w2);
                ent2.SaveChanges();
                **RefreshGrid**

            } 
```

If `ent2.SaveChanges()`; is not working ,then use `ent2.SubmitChanges();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:43:50.583

The problem is you have two classes with same name **Wine**.

`public partial class **Wine** : System.Web.UI.Page`

`**Wine** w2 = new **Wine**();`

Rename ASP.Net page's name to ***WineList*** so that

its class name should become `public partial class **WineList**`

![enter image description here](../Images/591335feeec661fc1f0f39bcff2c742d.png)

# c# - 无法从共享文件夹中读取文件

> ID：15258140
> 
> 赞同：0
> 
> 时间：2013-03-06T21:10:25.790
> 
> 标签：c#, asp.net, iis-7

我正在尝试从 Asp.net 应用程序中的共享文件夹（ftp 位置）访问文件。它在视觉工作室工作正常。当我在 IIS 7 中部署相同时，我收到以下错误

**“登录失败：用户在这台计算机上没有被授予请求的登录类型。”**

堆栈跟踪：

> [IOException：登录失败：未授予用户在此计算机上请求的登录类型。]
> System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) +9723522 System.IO.FileSystemEnumerableIterator `1.CommonInit() +245 System.IO.FileSystemEnumerableIterator`1..ctor(String path, String originalUserPath, String searchPattern, SearchOption searchOption, SearchResultHandler`1 resultHandler) +556
> System.IO。 DirectoryInfo.InternalGetFiles(String searchPattern, SearchOption searchOption) +64 System.IO.DirectoryInfo.GetFiles() +14

……

我的应用程序池在 NETWORKSERVICE 模式下运行 我需要向 IIS 中的哪个用户授予访问此文件夹的权限？是 IUSER 还是 NT AUTHORITY\NETWORK SERVICE ？如何在 IIS 中识别当前正在运行的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:15:19.930

连接被拒绝的原因很可能是组策略不允许运行 IIS 服务的用户访问该服务。

我不想授予任何这些系统用户访问网络资源的权限。其他计算机也可能连接。

相反 - 让您的程序使用您创建的访客帐户或其他帐户进行身份验证并授予适当的权限。

我会说这将是一种更安全的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:36:30.287

调试 - 在异常时刻查看[Environment.UserName 。](http://msdn.microsoft.com/en-us/library/system.environment.username.aspx)它将是发起请求的用户或匿名用户。

修复：如果本地文件 - 授予权限可能没问题。如果远程并使用用户的模拟帐户 - 需要模拟另一个对远程计算机具有权限的帐户，因为您不能使用已经模拟的帐户来访问远程资源（“NTLM 一跳”）。

注意：确保在允许访问文件时查看安全要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:13:23.517

您可能正尝试以交互方式登录只能通过网络访问的计算机，反之亦然。

更改您的登录位置。根据需要尝试本地（交互）或远程（通过网络）登录。您可能想要求管理计算机安全的人员更改安全数据库，以便您可以本地或远程登录。

# playframework-2.0 - 如何配置 Logback 以打印出类名

> ID：15258144
> 
> 赞同：22
> 
> 时间：2013-03-06T21:10:45.190
> 
> 标签：playframework-2.0, playframework-2.1

我正在使用播放 2.1。我正在使用默认记录器 play.api.Logger。我对它是如何工作的感到困惑。

在我的scala代码中，方法“getPayment（）”中的“com.myapp.tickets”类中的一行如下所示

```
Logger.info("getTickets") 
```

生成这样的日志消息。

```
14:58:58.005 INFO  application play.api.LoggerLike$class info  getTickets 
```

我的 application-logger.xml 模式是

```
%d{HH:mm:ss.SSS} %-5level %logger %class %method  %msg%n 
```

我遇到的问题是 %logger 告诉我“应用程序”，%class 告诉我“play.api.LoggerLike$class”和 %method 告诉我“信息”。我知道所有这些。我当然想避免添加更多内容进入消息本身（如类名或方法）。

如果我打印出调用堆栈（%caller），那么级别 2 就有我想要的，但这似乎不是生成日志的可行方法。

如何配置它以输出应用程序特定的类和方法，而不是记录器本身的类和方法？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-18T11:16:58.513

`%class{0}`只会输出类名，而不是：

```
com.something.MyClass 
```

你会得到：

```
MyClass 
```

这就是我的 logback 模式通常的样子：

```
%d{HH:mm:ss} [%thread] %-5p %class{0} - %m%n 
```

如果您有兴趣，还可以通过以下方式添加方法和行：

```
%d{HH:mm:ss} [%thread] %-5p %class{0}.%method:%L - %m%n 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-11-13T09:29:21.477

回溯模式：

```
%d{HH:mm:ss.SSS} [%thread] %-5level %class{36}.%M %L - %msg%n 
```

结果 ：

```
14:53:47.816 [http-bio-8080-exec-3] DEBUG  c.f.s.w.s.i.example.ExServiceImpl.getStatus 993 - blocked-->0 
```

*   `[http-bio-8080-exec-3]`是线程名称

*   `c.f.s.w.s.i.example`是包名

*   `ExServiceImpl`是类名

*   `getStatus`是方法名

*   `993`是行号

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-02T22:10:07.290

旧线程，但常见问题。Play 使用 slf4j 的包装器，这会导致所有内容都记录为 [Logger$ALogger] 或 [application]。有几种方法可以记录实际的类名。

把它放在你的课堂上：

```
private static org.slf4j.Logger logger = play.logger.underlying(); 
```

并将其放入您的方法中：

```
logger.info("Your message"); 
```

另一种选择是用它替换所有 Logger 调用，但它会增加开销，因为它必须在每次要记录某些内容时获取底层对象：

```
Logger.underlying().info("Your message"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T08:10:29.820

我不确定这真的是你想要的，但你试试这个吗？：

记录器(this.getClass()).info("getTickets")

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-03T22:27:40.427

我正在放弃 Play 似乎默认使用其 Logger 的单一 application.log 方法。我的应用程序需要一种细粒度的日志记录和运行时调整，当 classname == Logger name 时直接 logback 做得很好。我在控制器中仅使用“老派”就取得了相当大的成功，例如...

```
package controllers
import play.api._
import play.api.mvc._
import org.slf4j.LoggerFactory

object Application extends Controller {
  val log = LoggerFactory.getLogger(getClass())

  def index = Action {
    log.trace("index")
    NotFound
  }

  def hb = Action {
    log.trace("hb")
    val message = makeMessage()
    log.info(message)
    Ok(message)
  }

  def makeMessage(): String = {
    val version = "@buildsig.version@"
    val tag = "@buildsig.tag@"
    val timestamp = "@buildsig.timestamp@"
    val status = makeStatus()
    return "DM2 [Version: %s] [Build: %s] [Date: %s] [Status: %s]".format(version, tag, timestamp, status)
  }

  def makeStatus(): String = {
    // TODO: Implement datastore healthcheck
    return "TODO"
  }
} 
```

对于任何习惯使用 slf4j/logback 或 log4j 的开发人员来说，这种方法似乎很熟悉。另一方面，我目前正在努力通过[“play dist”的启动 shell 脚本无法在 JAR 文件](https://stackoverflow.com/questions/16906837/start-shell-script-from-play-dist-fails-to-locate-logger-xml-in-jar-file)中找到 logger.xml，在该文件中，启动脚本无法使用我的 conf/logger.xml，它被“play dist”命令。

如果我只是稍微好一点的 Scala 开发人员，我认为使用 Logging trait 之类的东西可以达到同样的效果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-20T13:27:13.147

由于 Play 的 Logger 包装了底层的 SLF4J 调用，因此 logger 类始终是“应用程序”：

```
13:45:21 INFO  application: - Some message 
```

但是有一个简单的方法来解决这个问题。

创建一个特征：

```
import play.api.Logger

trait WithLogging {
   val logger: Logger = Logger(this.getClass())
} 
```

在您的课程中，只需混合以下特征：

```
import WithLogging

class Foobarr extends WithLogging {
   def doFoo = {
      logger.info("Im in foooo")
   }
} 
```

现在应该是：

```
13:45:21 INFO  models.Foobarr: - Im in foooo 
```

# java - 从 SD 卡读取

> ID：15258152
> 
> 赞同：1
> 
> 时间：2013-03-06T21:11:13.023
> 
> 标签：java, android, file-io, android-sdcard

我正在尝试使用 Java 从我的 SD 卡中读取一个简单的文本文件，但我似乎无法打开它。我在 Ubuntu 12.04 上为移动开发人员使用 Eclipse。这是`onCreate()`主要活动方法中的代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String status = "Hello, is it me you're looking for?";
    String storageState = Environment.getExternalStorageState();

    File dir = Environment.getExternalStorageDirectory();
    File f = new File(dir, "textTest.txt");

    if (f.exists()) {
        status = "File is found!";
    } else {
        status = "File is not found!";
    }

    this.text1 = (TextView) findViewById(R.id.textView1);
    text1.setText(status.subSequence(0, status.length()));
} 
```

另外，这里有一些我尝试过的构造函数`File f`，它们都不起作用：

```
File f = new File(dir, "textTest.txt");
File f = new File("/sdcard/textTest.txt");
File f = new File(dir, "mnt/sdcard/textTest.txt"); 
```

`storageState`最后，我使用上面的字符串检查了外部存储状态，返回的值`Environment.getExternalStorageState()`是[`mounted`](http://developer.android.com/reference/android/os/Environment.html#MEDIA_MOUNTED). 我唯一的线索是我认为可能与 SD 卡是否可读有关，但这只是一个猜测。有任何想法吗？

**补充：** 如果您没有猜到，当我启动活动时，`TextView`对象会显示“*未找到文件！ ”。*

**添加2：** 好的，我刚刚尝试了一些有效的方法。当我通过 USB 连接手机时，会打开两个与手机相关的文件夹：一个包含内部存储中的所有文件夹（数据、DCIM 等），另一个是我假设连接到 SD 卡的文件夹，因为我通过笔记本电脑读卡器添加了文件，然后将其输入到手机中。但是，当我将文件“testText.txt”复制到第一个文件夹（我假设它与内部存储相关）时，构造函数`File f = new File("/sdcard/textTest.txt");`工作。怎么来的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:27:17.887

根据评论..

将此添加到您的**AndroidManifest.xml**

```
android.permission.READ_EXTERNAL_STORAGE 
```

此外，如果您使用 WRITE 操作执行某些操作，请添加此权限

```
android.permission.WRITE_EXTERNAL_STORAGE 
```

# c# - 是否有与 IEnumerable 相同的结构 >?

> ID：15258155
> 
> 赞同：1
> 
> 时间：2013-03-06T21:11:23.813
> 
> 标签：c#, .net, data-structures, ienumerable, lazy-evaluation

我使用的结构可以表示为：

```
IEnumerable<KeyValuePair<TKey, TValue>> 
```

鉴于编写时间太长（不算代码分析可能会发出警告），我更喜欢使用一些更具表现力的类型。**.NET Framework 中是否有这种类型，或者我应该创建自己的类型？**

请注意，它与字典不同：

```
IDictionary<TKey, TValue> : IEnumerable<KeyValuePair<TKey, TValue>> 
```

因为字典确保每个键都是唯一的，这不是我的情况。我也不能使用查找：

```
Lookup<TKey, TValue> : IEnumerable<IGrouping<TKey, TValue>> 
```

因为查找不是惰性的，即它需要刷新所有数据才能对其进行分组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T21:15:58.487

如果键和值有两种特定类型，则可以通过执行以下操作使用类型别名：

```
using PairSequence = System.Collections.Generic.IEnumerable<
    System.Collections.Generic.KeyValuePair<string, int>>; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T21:15:13.897

这和它会得到的一样好。结构 KeyValuePair 并没有以接口的方式实现太多。您当然可以使用接口继承来创建自己的接口，基本上可以让您重命名`IEnumerable<KeyValuePair<TKey, TValue>>` ，但是这样做会失去更多，因为实现的类型`IEnumerable<KeyValuePair<TKey, TValue>>`不会实现您的自定义接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T21:17:45.883

（半开玩笑半认真）

```
IEnumerable<KeyValuePair<TKey, TValue>>  <= length: 40 chars
IEnumerable<Tuple<TKey,TValue>> <= length: 32 chars
IList<Tuple<TKey,TValue>> <= length: 26 chars 
```

在某些情况下，您也可能会破坏一些`using`用法：

```
using IEI = IEnumerable<int>;   // for example 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:13:56.730

除了您已经排除的字典之外，我不知道框架中有任何代表这种结构的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T21:15:56.057

不在 .NET Framework 中，不。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T21:30:35.703

**仅**实施的问题`IEnumerable<KeyValuePair<TKey,TValue>>`是您没有任何后备存储。

作为一般规则，您应该实现代表问题域中事物的类型，即使是数字和字符串之类的事物。例如，使用字符串来表示邮政编码并不能告诉您有关数据类型的太多信息，但是使用名为的自定义数据类型`PostalCode`可以告诉您更多信息。更好的是**抽象**数据类型`PostalCode`（可能具有特定于国家/地区的具体实现）。

您的自定义类型，尤其是集合，可以只公开您需要的功能，而无需提供非特定集合类所做的所有功能。此外，您可以实施与您的问题域相关的域限制。例如，`UsZipCode`从抽象类型继承的具体`PostalCode`可能会将值限制为 5 或 9 个十进制数字，而具体`CanadianPostalCode`可能要求值由 2 个 3 字符字母数字序列组成。

但我离题了。

我可能会像这样简单地创建自己的类：

```
public class MyListOfKeysAndValues : IList<KeyValuePair<MyKeyType,MyValueType>>
{
  private List<KeyValuePair<MyKeyType,MyValueType>> MyBackingStore ;
  ...
} 
```

公开所需的最少方法/属性。

# git - 仍然不明白如何恢复和执行“git reset HEAD”

> ID：15258161
> 
> 赞同：2
> 
> 时间：2013-03-06T21:11:55.873
> 
> 标签：git, xcode4.5, ios6.1

尝试将我的应用程序提交到 Git 时收到以下消息：

```
**The working copy "XYZ" failed to commit files.**
fatal: Repository has been updated, but unable to write
new_index file. Check that disk is not full or quota is
not exceeded, and then "git reset HEAD" to recover. 
```

我一直在尝试了解如何从中恢复并执行“git reset HEAD”而不丢弃任何已提交的内容。我已阅读有关终端命令并尝试过但仍然不明白要采取的步骤。

磁盘未满，但它位于我网络上的 Qnap NAS 上。

有人可以给我一个分步指南或指点我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:09:59.417

`git reset HEAD`不会改变你的工作树或提交历史，它只会改变*index*。因此，您不必担心丢失工作树中的实际文件。您只需要确保，当您准备好再次尝试提交时，您将所有内容添加到应该存在的索引中，例如使用`git commit -a`或明确使用`git add`（但是您上次上演了下一次提交，您可以这样做又是这样。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:26:30.917

我会使用 git 存储。首先存储您无法提交的工作，重置以恢复，然后取消存储您的工作并重新提交。

```
git stash
git reset HEAD
git stash show -p | git apply -R
git commit -am "new commit" 
```

# keyboard-shortcuts - 在 Sublime Text 2 中添加书签

> ID：15258164
> 
> 赞同：25
> 
> 时间：2013-03-06T21:11:59.877
> 
> 标签：keyboard-shortcuts, sublimetext2, bookmarks

在 Sublime Text 2 中，我希望能够为一行添加书签，这样我就可以轻松访问它。我正在使用 2011 iMac，各种消息来源告诉我快捷方式应该是 cmd + f2。

但是，当我按下它时，绝对没有任何反应。但是，如果我手动浏览 Goto 菜单并添加它，它确实有效。有没有其他人经历过键盘快捷键失败？有人对如何解决它有任何想法吗？

谢谢。

有关额外信息，我认为这是默认键绑定文件中的相关行。

{ "keys": ["super+f2"], "command": "toggle_bookmark" },

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-06T23:31:35.310

关键是：`F`mac上的键是通过按键触发的`fn`，所以在这种情况下，它可以作为`cmd+fn+f2`.

# javascript - 具有多个级别的 Javascript 对象到 XML 字符串

> ID：15258170
> 
> 赞同：1
> 
> 时间：2013-03-06T21:12:19.990
> 
> 标签：javascript, xml, object, recursion, stringify

我有一个多维 Javascript 对象，我可以使用 .stringify 方法轻松地将其转换为 JSON 字符串。我正在尝试编写一个函数来执行类似的操作，但采用 XML、标记、格式。问题是我希望它能够处理任意数量的维度。

假设我有以下多维对象，其值如下：

```
object['annualrevenues']['option0']['ID'] = 1;
object['annualrevenues']['option0']['text'] = '$50mil';
object['annualrevenues']['option1']['ID'] = 2;
object['annualrevenues']['option1']['text'] = '$100mil';
object['annualrevenues']['option2']['ID'] = 3;
object['annualrevenues']['option2']['text'] = '$200mil'; 
```

我想像这样构建一个字符串：

```
var xmlText = <xml><annualrevenues><option0><ID>1</ID><text>$50</text></option0></annualrevenues></xml> 
```

一旦作为内容类型为“XMLDOC”的响应返回，将如下所示：

```
<xml>
  <annualrevenues>
    <option0>
      <ID>1</ID>
      <text>$50</text>
    </option0>
  </annualrevenues>
</xml> 
```

所以我有以下功能：

```
var xmlText = '<xml>';
    xmlText += formatXMLSubObjects(objText,xmlText);

function formatXMLSubObjects(objText,xmlText){
  for (prop in objText) {
    if (typeof objText[prop] == 'object') {
        xmlText += '<'+prop+'>';
        for (subProp in objText[prop]) {
            if (typeof objText[prop][subProp] == 'object') {
                // Run the function again as recursion
                xmlText += formatXMLSubObjects(objText[prop][subProp],xmlText);
            }
            else {
                xmlText += '<' + subProp + '>' + objText[prop][subProp] + '</' + subProp + '>';
            }
        }
        xmlText += '</'+prop+'>';
    }
    else {
        xmlText += '<'+prop+'>'+objText[prop]+'</'+prop+'>';
    }
  }
return xmlText;
} 
```

问题是当 formatXMLSubObjects 函数从第二次调用返回时，第一次调用中的原始对象已被覆盖并且现在未定义。

任何人都可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:29:50.603

*将xmlText*的定义移到函数内部并在外部使用另一个变量来包含初始有效负载，以及 for 循环中的局部变量，否则它们被认为是全局的并被覆盖，并且不要将您的 xmlText 提前传递给调用，而只是简单地每次将结果与前一个结果连接起来。

```
function formatXMLSubObjects(objText) {
   var xmlText = ""; // this will contain only this chunk of the object

   for (var prop in objText) {
      xmlText += '<'+prop+'>'; // place the tag anyway
      if (typeof objText[prop] == 'object') {
            xmlText += formatXMLSubObjects(objText[prop]); // if it's an object recurse
      } else {
            xmlText += objText[prop]; // ... otherwise just add the value (this will work only for simple values
      }
   xmlText += '</' + prop + '>';
   }
   return xmlText;
}

var xml = '<xml>';
xml += formatXMLSubObjects(obj);
xml += '</xml>'; 
```

看看这个小提琴：http: [//jsfiddle.net/vZjAP/](http://jsfiddle.net/vZjAP/)

# python - 如何有效地从大小为 n 的列表中获取大小为 {n, n-1,n-2, ... 1} 的所有排列？

> ID：15258173
> 
> 赞同：1
> 
> 时间：2013-03-06T21:12:26.293
> 
> 标签：python, performance, permutation

我正在尝试从列表中查找与列表大小相同或小于列表的所有排列。

例如：

```
>>>allPermutations([a,b])
[[a,b], [b,a], [a], [b]] 
```

这是我目前在 python 中的迭代代码。我不确定它目前的效率如何。

```
import itertools

def getAllPossibleSubSchedules( seq ):
    fullSet = set()
    curSet = set()
    curSet.add(tuple(seq))
    for i in reversed(range(1, len(seq) + 1)):
        permutations = set()
        for curTuple in curSet:
            permutationsList = list(itertools.permutations(curTuple, i))
            for permutation in permutationsList:
                permutations.add(permutation)
        curSet = set()
        for permutation in permutations:
            curSet.add(permutation)
            fullSet.add(permutation)
    return fullSet 
```

我很确定该算法会产生**n 的总和！从 1 -> n**排列增长很快。到目前为止，我已经创建了一种非常慢的递归方式，因为它执行了许多重复操作。我一直在尝试通过迭代来做到这一点，但我不知道如何限制重复操作。我正在使用 python，但伪代码也会对我有很大帮助。任何帮助，将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:29:16.143

以下应该有效：

```
from itertools import permutations

def allPermutations(seq):
    return (x for i in range(len(seq),0,-1) for x in permutations(seq, i)) 
```

例如：

```
>>> list(allPermutations('abc'))
[('a', 'b', 'c'), ('a', 'c', 'b'), ('b', 'a', 'c'), ('b', 'c', 'a'), ('c', 'a', 'b'), ('c', 'b', 'a'), ('a', 'b'), ('a', 'c'), ('b', 'a'), ('b', 'c'), ('c', 'a'), ('c', 'b'), ('a',), ('b',), ('c',)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:29:10.213

也许迭代所有可能大小的列表的所有排列。澄清：

```
def all_permutations(input_list):
    for i in xrange(len(input_list)):
        sublist = input_list[:i]
        for variant in permutations(sublist):
            yield variant 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T21:19:12.097

我很确定你的`permutations.add()`and`curSet.add()`和`fullSet.add()`调用会导致你的例行程序很快停止。如果您不断更改数组的大小，分配的内存将“空间不足”并且必须找到新位置。这意味着整个数组都会被复制。然后你添加另一个元素 - 冲洗并重复。

您需要计算所需元素的数量，并为此预先分配空间。因此，如果您有 5 个元素，则需要为最终结果分配 ( 5! + 5*4! + 10*3! + 10*2! + 5 ) x 5 个元素，而为中间结果分配更少的元素。然后你填充这些数组，而不用改变内存块；这将使事情变得更快。

# ios - UIAppearance 没有为自定义 UITableViewCell 设置样式

> ID：15258174
> 
> 赞同：1
> 
> 时间：2013-03-06T21:12:31.373
> 
> 标签：ios

这是一个奇怪的问题！我正在使用 UIAppearance API 来设置 UITableViewCells 的样式。我使用以下代码来设置 UITableViewCell 的样式。

```
// table cell
    id tableCellAppearance = [UITableViewCell appearance];
    [tableCellAppearance setBackgroundView:[theme imageViewForTableViewCellBackground]];

// table cell
-(UIImageView *) imageViewForTableViewCellBackground
{
    UIImageView *backgroundView = [[UIImageView alloc] init];
    [backgroundView setImage:[UIImage imageNamed:@"tile_heading_background"]];

    return backgroundView;
} 
```

当我运行应用程序并看到 UITableViewCells 时，UITableView 中只有 1 个单元格设置了样式。中间的单元格。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:28:18.187

创建`CustomUITableViewCell`并实施`<UIAppearance>`协议

**自定义单元格.h**

```
@interface CustomCell : UITableViewCell <UIAppearance>

@property (nonatomic, weak) UIColor *backgroundCellColor UI_APPEARANCE_SELECTOR; 
```

**CustomCell.m**

```
@implementation CustomCell

@synthesize backgroundCellColor;

-(void)setBackgroundCellColor:(UIColor *)backgroundColor
{
    [super setBackgroundColor:backgroundColor];
} 
```

最后在您的视图中使用**CustomCell**并设置背景或图像

```
[[CustomCell appearance] setBackgroundCellColor:[UIColor redColor]]; 
```

# android - 解除软键盘的 Android Keycode 是什么？

> ID：15258182
> 
> 赞同：3
> 
> 时间：2013-03-06T21:13:01.693
> 
> 标签：android, keyboard

有人知道在 Android 中关闭软键盘的键码吗？

我已经浏览了 KeyEvent 类的文档

[http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_MEDIA_REWIND](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_MEDIA_REWIND)

但找不到合适的。

关闭软键盘的键码是指软键盘上能够关闭键盘面板的键码，而不是设备底部的“返回”键。

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T06:44:09.363

这个答案可能对你有用......试试这个

```
set android:codes="-3" to a key for dismissing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:15:58.660

也许这就是你的意思：我不确定

```
android:imeOptions="actionDone" 
```

这会将返回键变成完成键以关闭键盘

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:34:42.460

您是否在问如何像 onClick 方法一样关闭它？

我想你可能想要的是这样的：

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(text.getWindowToken(), 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:41:53.877

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

# sql-server - "thema.." 是什么意思 在 sql server 2008 中是什么意思？

> ID：15258183
> 
> 赞同：0
> 
> 时间：2013-03-06T21:13:02.620
> 
> 标签：sql-server

我有一个查询，如下所示：

```
SELECT * FROM thema.."<view_name>". 
```

当我检查数据库中的所有模式时，我看不到任何名为 thema 的模式名称。它是 sql server 2008 内部的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:33:16.850

SQL Server 在名称中最多使用四个部分：`server.database.schema.table`. 如果您省略架构名称 (fe `dbname..tablename`)，SQL Server 将为您的用户使用默认架构。

# css - IE7中的图标字体

> ID：15258186
> 
> 赞同：2
> 
> 时间：2013-03-06T21:13:06.520
> 
> 标签：css, internet-explorer-7, icon-fonts

我不使用 Font Awesome，但我确实以 Chris Coyier 在 CSS Tricks 上描述的方式使用图标字体。

我希望调整他的代码以使它们能够在 IE7 中工作。我意识到 IE7 不支持生成的内容，所以我查看了 Font Awesome 是如何处理这个问题的，看起来他们使用了这个 JS 表达式：

```
.ie7icon(@inner) {
  *zoom: ~"expression( this.runtimeStyle['zoom'] = '1', this.innerHTML = '@{inner}')";
} 
```

我的问题是我无法理解它实际上在做什么。我需要知道这一点，以便我可以调整它并使其适用于我使用图标的方式。

添加：

我现在在我的 Sass 文件中有这个：

```
[data-icon]:before {
  @extend %icon-font
  content: attr(data-icon)
  speak: none
  -webkit-font-smoothing: antialiased 
```

1.  如何使用 JS 表达式添加 IE7 支持？也许mixin会以某种方式帮助这里？

2.  你能解释一下实际的JS表达式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T03:21:22.970

该 mixin 的 Sass 等效项如下所示：

```
@mixin ie7icon($inner) {
    *zoom: expression(this.runtimeStyle['zoom'] = '1', this.innerHTML = '#{$inner}');
}

.foo {
    @include ie7icon(\f000);
} 
```

输出：

```
.foo {
  *zoom: expression(this.runtimeStyle['zoom'] = '1', this.innerHTML = '\f000');
} 
```

*Zoom 是一个专有的 IE CSS 属性，并且往往是触发HasLayout*的首选属性（参见：[http](http://haslayout.net/haslayout) ://haslayout.net/haslayout ），因为它对非 IE 浏览器没有任何副作用。

属性前面的星号`zoom`是您的标准*星*号。它利用 IE<8 的 CSS 解析器中的一个错误来专门为这些浏览器提供样式（参见：[http](http://en.wikipedia.org/wiki/CSS_filter#Star_hack) ://en.wikipedia.org/wiki/CSS_filter#Star_hack ）

表达式主要是 IE 唯一的东西。它们允许您通过 CSS 运行任意 JavaScript（请参阅：http: [//msdn.microsoft.com/en-us/library/ms537634](http://msdn.microsoft.com/en-us/library/ms537634(v=vs.85).aspx) (v=vs.85).aspx ）。这个特定的表达式将它应用到的任何标签的内容设置为 的值`$inner`，因此它实际上只打算与空标签一起使用，如下所示：

```
<p><i class="foo"></i> I have an icon!</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:25:19.793

首先，您需要将您的 img 转换为字体格式，[fontsquirrel.com](http://www.fontsquirrel.com/tools/webfont-generator)

和 css 想

```
@font-face { font-family: 'imgtoicon';
src:url('icons.eot');
src: url('icons.eot?#iefix') format('embedded-opentype'),
url('icons.ttf') format('truetype'),
url('icons.svg#icons') format('svg');
font-weight: normal;
font-style: normal;
} 
```

为字体创建一个类名

```
.iconic {
display:inline-block;
font-family: 'imgtoicon';
font-weight: normal;
-webkit-font-smoothing: antialiased;
} 
```

图标引用示例

```
.cat:before{content:'\e011';}
.dog:before{content:'\e022';} 
```

在你的 IE7 的 CSS 中

```
 .iconic {
        font-family: 'imgtoicon'; 
        font-weight: normal;
        }

    .cat{ *zoom: expression( this.runtimeStyle['zoom'] = "1", this.innerHTML = '\e011'); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T22:39:12.523

如果您的图标不打算在运行时更改，您可以使用以下内容：

```
.icon-glass {
  *zoom: expression( this.runtimeStyle['zoom'] = '1', this.innerHTML = '&#xf000;');
} 
```

如果您的图标打算在运行时更改，您可以执行以下操作：

```
.icon-glass {
  *top:expression(0, this.innerHTML = '&#xf000;');
} 
```

不幸的是，这非常慢。虽然它可能在 IE6 中工作，但会显着降低性能，但如果页面上有太多图标，IE7 可能会崩溃。所以我不会推荐第二种技术，除非你只使用很少的图标并且你可以承受性能下降。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:18:59.683

您可以使用这样的条件提供替代样式表（感谢[Paul Irish](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)）`<!--[if IE 7]><link rel="stylesheet" type="text/css" media="screen" href="css/ie7.css" />< ![endif]-->`

然后在你的 ie7.css 中：

```
[class^="icon-"],
[class*=" icon-"] {
  font-family: your-icon-font;
 } 
.icon-custom { *zoom: expression( this.runtimeStyle['zoom'] = "1", this.innerHTML = 'utf8-Custom'); } 
```

我认为 *zoom 有助于为元素提供布局并调试 IE+windows 奇怪的行为，而 this.innerHTML 使您能够提供与您的图标相对应的 utf8 值。

您也可以像这样（仍然是[Paul Irish 和 h5bp](http://html5boilerplate.com/)），或者通过将此行粘贴到您的 DOCTYPE 下方，为您的 html 选择器提供一个特定的类：

```
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8"> <![endif]--> 
```

然后你可以去

```
.lt-ie8 [class^="icon-"],
.lt-ie8 [class*=" icon-"] {
  font-family: your-icon-font;
 } 
.lt-ie8 .icon-custom { *zoom: expression( this.runtimeStyle['zoom'] = "1", this.innerHTML = 'utf8-Custom'); } 
```

h5bp 计划放弃对 IE6 IE7 的支持，并考虑[完全删除这些条件][3]，但我发现它们对此特别有用。

希望这有帮助 请让我知道它是怎么回事

查尔斯

# zend-framework - Zend 框架中的 render() 做了什么

> ID：15258188
> 
> 赞同：0
> 
> 时间：2013-03-06T21:13:11.007
> 
> 标签：zend-framework, rendering, zend-form

这是另一种实用程序，每个博主\导师都假设我们都知道它是什么，因此他们从不费心解释它的实际作用。他们只是继续在他们的例子中使用它，相信我们都知道发生了什么。

从人们使用或引用的方式来看`render()`，它会建议它显示内容（例如：查看内容），但如果是这样，那么我们为什么要使用`echo`它来实际显示它的内容呢？

其他用途表明它格式化内容，如在内部我们`sprintf()`用来将变量注入字符串的表单装饰器中使用的那样。

那么在,等`render()`情况下会做什么呢？有人可以解释它在基本层面上的工作原理（引擎盖下）。谢谢。`Zend_View``Zend_Layout`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:34:10.327

它加载一个视图脚本并将其作为字符串输出。

稍微简化一下，`Zend_View`获取一个视图脚本文件（如 index.phtml）并在内部包含它以生成 HTML 输出。通过使用该`render()`方法，可以获取一个额外的视图脚本（例如 nav.phtml）并将其输出到您的父视图脚本中。这个想法是只渲染一次在许多页面上重复的元素，而不是一遍又一遍地重复相同的 HTML。

可以在`Zend_View_Abstract`类中找到 render 方法的代码，如下所示：

```
/**
 * Processes a view script and returns the output.
 *
 * @param string $name The script name to process.
 * @return string The script output.
 */
public function render($name)
{
    // find the script file name using the parent private method
    $this->_file = $this->_script($name);
    unset($name); // remove $name from local scope

    ob_start();
    $this->_run($this->_file);

    return $this->_filter(ob_get_clean()); // filter output
} 
```

该`_run()`方法的实现可以在类中找到，`Zend_View`如下所示：

```
/**
 * Includes the view script in a scope with only public $this variables.
 *
 * @param string The view script to execute.
 */
protected function _run()
{
    if ($this->_useViewStream && $this->useStreamWrapper()) {
        include 'zend.view://' . func_get_arg(0);
    } else {
        include func_get_arg(0);
    }
} 
```

As you can see, `render()` takes a view script name, resolves its file name, initiates output buffering, includes the view script file (this is what the `_run()` method does internally), then passes the output through optional filters and finally returns the generated string.

The neat thing about it is that it retains the properties (variables) of the view object it is called from (because it's the same `Zend_View` object, just with a different view script loaded). In this respect, it differs from the `partial()` method, which has its own variable scope and you can pass variables into it (making it useful for rendering smaller elements, such as single rows of data when you `foreach` over a dataset).

# jackson - 使用杰克逊将 JSON 解组为字符串、BigInteger 和 BigDecimal 非常接近

> ID：15258191
> 
> 赞同：7
> 
> 时间：2013-03-06T21:13:26.990
> 
> 标签：jackson

我们正在使用杰克逊，我在代码中看到了这一点

```
DeserializationConfig.Feature.USE_BIG_DECIMAL_FOR_FLOATS
DeserializationConfig.Feature.USE_BIG_INTEGER_FOR_INTS 
```

但是我现在如何让杰克逊使用这些功能呢？

这将是完美的情况。我只想要一个包含 String、BigDecimal 和 BigIntegers 的 Map 结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T21:40:41.627

[在 ObjectMapper 上启用该功能。](http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/map/ObjectMapper.html#configure%28org.codehaus.jackson.map.DeserializationConfig.Feature,%20boolean%29)

```
ObjectMapper mapper = new ObjectMapper();
mapper.enable(DeserializationConfig.Feature.…); 
```

[更新版本 >= 2.0.0：](http://fasterxml.github.com/jackson-databind/javadoc/2.0.0/com/fasterxml/jackson/databind/ObjectMapper.html#enable%28com.fasterxml.jackson.databind.DeserializationFeature%29)

```
ObjectMapper mapper = new ObjectMapper();
mapper.enable(DeserializationFeature.USE_BIG_DECIMAL_FOR_FLOATS);
mapper.enable(DeserializationFeature.USE_BIG_INTEGER_FOR_INTS); 
```

# javascript - Backbone 中的 .get() 问题

> ID：15258192
> 
> 赞同：0
> 
> 时间：2013-03-06T21:13:26.637
> 
> 标签：javascript, backbone.js

我已经为此苦苦挣扎了一段时间，并认为我会屈服并在这里询问，而不是继续将头撞在桌子上。这是非常基本的东西，我只是从骨干开始。为什么我不能通过 .get() 函数访问人？

我正在为我的 ajax 代码使用[Mockjax](https://github.com/appendto/jquery-mockjax)，它看起来像这样：

```
$.mockjax({
    url: '/data',
    contentType: 'text/json',
    responseTime: 150,
    type: 'GET',
    responseText: '[{ "name": "Chance, Churc", "id_number": "", "w_time": null, "o_time": null }]'
}); 
```

和主干部分：

```
var PWItem = Backbone.Model.extend({});
var person = new PWItem();
person.fetch({
    url: '/data',
    success: function() {
        console.log(person.attributes[0].name);  //this prints the correct attribute
    }
}):

console.log(person);  //prints the person object
console.log(person.get('name'));  //prints 'undefined' 
```

对骨干中午的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:37:35.263

你有两个问题。

返回单个对象而不是数组。

```
$.mockjax({
    url: '/data',
    contentType: 'text/json',
    responseTime: 150,
    type: 'GET',
    // you are fetching a single model, so JSON should not be an array
    responseText: '{ "name": "Chance, Churc", "id_number": "", "w_time": null, "o_time": null }'
}); 
```

等到提取完成以访问属性。

```
var PWItem = Backbone.Model.extend({});
var person = new PWItem();
person.fetch({
    url: '/data',
    success: function() {
       // this will only work after success
       console.log(person.get('name')); // should print "Chance, Churc"
    }
}):

person.on('change:name', function(){
    console.log(person.get('name')); // should print "Chance, Churc"
});

console.log(person);  //prints the person object
// fetch is not done yet, 'undefined' is expected.
console.log(person.get('name'));  //prints 'undefined' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:25:28.810

你试过这样吗？

```
$.mockjax({
    url: '/data/1',
    contentType: 'text/json',
    responseTime: 150,
    type: 'GET',
    responseText: '{ "name": "Chance, Churc", "id_number": "", "w_time": null, "o_time":     null }'
});

var PWItem = Backbone.Model.extend({});
var person = new PWItem({url: '/data', id: 1});
person.fetch();
console.log(person.get('name')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:44:01.277

您编写的模拟 ajax 用于获取数据集合。`[]`. 您可以通过点击 url 端点来获取集合`/data`。您可以定义一个集合并使用如下。

```
 var PWItemColl = Backbone.Collection.extend({
    model: PWItem
    url: '/data'
    });

    var persons = new PWItemColl();
    persons.fetch ({
      success: function() {
       console.log(persons.at(0).get('name')); // "Chance, Churc"
      }
    }); 
```

# kineticjs - 动力学js在mousedown上将元素移动到另一层

> ID：15258198
> 
> 赞同：1
> 
> 时间：2013-03-06T21:13:40.230
> 
> 标签：kineticjs

我知道 dragOnTop 是最近推出的，但我想使用一个特定的图层，而不是始终在顶部自动生成的图层。所以我创建了一个小提琴：http: [//jsfiddle.net/jure/EwrkQ/](http://jsfiddle.net/jure/EwrkQ/)

```
darthVaderImg.on("mousedown", function() {
    this.moveTo(temp);
    this.setDraggable(true);
    //...
} 
```

但它不起作用！看来，当我更改图层时，我松开了鼠标事件挂钩...请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:34:12.367

大部分问题源于对象初始状态draggable: false

到目前为止，这是我的解决方案，希望它能让你更接近：http: [//jsfiddle.net/EwrkQ/4/](http://jsfiddle.net/EwrkQ/4/)

```
 darthVaderImg.on('mouseover', function() {
      document.body.style.cursor = 'move';
    });
    darthVaderImg.on('mousedown', function() {
      this.moveTo(temp);
      this.setDraggable(true);
      this.simulate('dragstart');
      layer.draw();
      temp.draw();
    });
    darthVaderImg.on('dragmove', function() {
      temp.draw();
    });
    darthVaderImg.on("dragend",function(){
        //this.setDraggable(false);
        this.moveTo(layer);
        layer.draw();
        temp.draw();
        this.off("mouseup");
      });

    darthVaderImg.on('mouseout', function() {
      document.body.style.cursor = 'default';
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:37:36.483

好吧，既然 dragOnTop 将您的项目移动到一个临时层，那么您应该禁用该功能。

```
 darthVaderImg = new Kinetic.Image({... , dragOnTop: false, ...}); 
```

那应该行得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T05:04:12.143

请参阅下面的链接，了解 kineticjs 在 mousedown 上将元素移动到另一层

[http://codedbot.com/questions/3016590/kineticjs-move-element-to-another-layer-on-mousedown](http://codedbot.com/questions/3016590/kineticjs-move-element-to-another-layer-on-mousedown)

# wpf - 混合触发器与 WPF 触发器

> ID：15258199
> 
> 赞同：7
> 
> 时间：2013-03-06T21:13:42.240
> 
> 标签：wpf, xaml, expression-blend, datatrigger

在我看来，在 Interactivity 命名空间中找到的 Blend-style与 WPF 中通过 Styles、s 等可用`Trigger`的经典s 之间存在重大差异（我认为这可能也适用于 SilverLight）。`Trigger``ControlTemplate`

在 WPF 中，当您`Trigger`使用 Setter 设置 a 时，您会得到两种行为：如果满足触发条件，则应用 Setter。但是，一旦不再满足触发器，就会恢复之前的值。这在编程 UI 时非常有用。

我尝试使用 Blend 方式编写类似的代码：我将 ChangePropertyAction 应用到我的控件，并使用绑定到我的 ViewModel`DataTrigger`让它触发交互性。`DataTrigger`

```
<Rectangle x:Name="SecondaryHighlightBackground" Fill="#FF505050">
            <i:Interaction.Triggers>
                <ei:DataTrigger Binding="{Binding IsHighlighted}" Value="Value">
                    <ei:ChangePropertyAction PropertyName="Opacity" Value="0.5"/>
                </ei:DataTrigger>
            </i:Interaction.Triggers>
...
</Rectangle> 
```

所以这按预期工作......除了我惊讶地发现当我将 IsHighlighted 值翻转为 false 时，原始不透明度为 0% 并没有恢复（我将其设置得更低）。为了仔细检查这一点，我写了这个例子来验证：

```
<Window x:Class="TestWpfApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Name="Window"
        Title="MainWindow"
        Width="640"
        Height="480">

    <Grid x:Name="LayoutRoot">
        <Button Name="button1"
                Width="173"
                Height="57"
                Margin="10,10,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top">
            <Button.Style>
                <Style TargetType="Button">
                    <Setter Property="Content" Value="foo" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsMouseOver, ElementName=button1}" Value="True">
                            <Setter Property="Content" Value="bar" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button>
    </Grid>
</Window> 
```

预期的行为是，如果您将鼠标悬停在按钮上，内容将变为“条形”。将鼠标移开会将内容恢复为样式指定的“Foo”。样式设置内容以避免属性优先级问题。

我的问题是：**双向触发真的只是在 Blend 扩展中丢失，还是有办法以某种方式启用它？**

我错过了什么吗？我认为这正是触发器的意义所在，它们具有双向功能。我想继续使用 Blend 交互操作，因为我发现它们有用且直观，但这种事情迫使我重新手动编写 XAML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-01-04T10:05:19.440

如其他答案所述，触发器设置的值似乎没有自动反转`Interaction`，但您可以使用显式取消设置触发器设置的值`DependencyProperty.UnsetValue`，从而使依赖属性当前值恢复为以前的值，如下所示：

```
<i:Interaction.Triggers>
  <ei:DataTrigger Binding="{Binding IsHighlighted}" Value="True">
    <ei:ChangePropertyAction PropertyName="Opacity" Value="0.5"/>
  </ei:DataTrigger>
  <ei:DataTrigger Binding="{Binding IsHighlighted}" Value="False">
    <ei:ChangePropertyAction PropertyName="Opacity" 
                             Value="{x:Static DependencyProperty.UnsetValue}"/>
  </ei:DataTrigger>
</i:Interaction.Triggers> 
```

免责声明：我实际上只使用[xaml 行为的新开源打包](https://devblogs.microsoft.com/dotnet/open-sourcing-xaml-behaviors-for-wpf/)在 .NET Core 3.1 上对此进行了测试。保留经典的 i/ei 命名空间以与原始问题保持一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:26:23.880

如果我理解正确，您只需考虑触发器中的其他值，因为默认情况下它不会执行此操作，因为您已经控制了该条件。就像是;

```
<i:Interaction.Triggers>
   <ei:DataTrigger Binding="{Binding IsHighlighted}" Value="True">
         <ei:ChangePropertyAction PropertyName="Opacity" Value="0.5"/>
   </ei:DataTrigger>
   <ei:DataTrigger Binding="{Binding IsHighlighted}" Value="False">
         <ei:ChangePropertyAction PropertyName="Opacity" Value="0"/>
   </ei:DataTrigger>
</i:Interaction.Triggers> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-12T22:46:18.457

是的，你必须把这两个条件都用这个 Blend 触发器，没有返回默认值。另一方面，使用混合触发器，您可以调用方法操作，这对动画非常有用。此外，使用 Blend 触发器，您还有 ControlStoryBoard 动作等等，但在您描述的情况下，您最好使用“正常”触发器。

# c++ - 在函数末尾添加 N 个字节数以进行热补丁

> ID：15258204
> 
> 赞同：0
> 
> 时间：2013-03-06T21:14:05.117
> 
> 标签：c++, performance, if-statement, hotpatching

是否可以在函数末尾添加 N 个字节数？

我的简单想法是添加以下代码：

```
_asm {
    NOP
    NOP
    NOP
    NOP
    NOP
} 
```

**还有其他方法吗？** *（使用代码、编译器或其他方法）*

我需要它来热补丁功能。我有一个有一些 IF 语句的函数，该函数每秒被调用 10 次或更频繁。所以，为了提高性能，我需要少做一些检查，比如“我需要执行那个代码吗？”。IF 语句中的布尔值不会经常更改（我会说很少）。我也想实现，如果我不需要执行一些代码，我不需要检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:19:10.977

MSVC 有编译器选项[/hotpatch](http://msdn.microsoft.com/en-us/library/ms173507.aspx) whick 允许链接器选项[/functionpadmin](http://msdn.microsoft.com/en-us/library/ms173524.aspx)修改最终二进制文件的处理，使热补丁应该适用于有效函数。您可以指定保留字节数以允许热补丁。有关详细信息，请参阅链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:23:33.733

一般来说，是的，尽管您需要在汇编中编写函数才能这样做。

另一方面，看起来您正在做的是对代码进行微优化而不是对其进行基准测试。C++ 中的 BOOL 和条件非常非常快，并且在现代系统上修补操作码的成本可能会导致非常非常糟糕的性能损失（例如，调用 VirtualProtect 以使代码可写将花费数十万比单个条件，即使您在嵌入式系统上运行，您也将通过更改内联函数来强制管道停止和缓存未命中）。

所以总而言之，是的，你正在做的事情是可能的。但是除非您将其作为“出于兴趣”的练习或在非常奇怪的环境中运行，条件的性能至关重要但您仍然使用 C 编写，否则您可能只想对代码进行基准测试并找到真正的地方它很慢，而不是付出巨大的痛苦和努力来修补实际上对性能并不重要的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T22:05:34.733

您可以编写一个单点返回的函数，并在返回语句之前添加 NOP。虽然这取决于平台。

另一种方法是在 return 语句之前放置垃圾代码，并使用标签和`goto`.

请注意可能会删除未使用代码的编译器和链接器优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:24:11.560

> 该函数每秒调用 10 次或更频繁。所以，为了提高性能

您的功能是否需要 50-100 毫秒的时间才能完成？我的意思是，这里真的有性能问题吗？每秒 10 次对于简单和常规的函数来说不算什么，但对于一些计算密集型的东西来说可能很多。

没有强制编译器这样做以保留一些空间的通用方法。您可能能够为特定的编译器找到一种特殊的方法，但更好的方法是拥有相同代码的多个版本或在运行时动态构建代码。

# redis - 主从和发布订阅连接

> ID：15258209
> 
> 赞同：4
> 
> 时间：2013-03-06T21:14:18.553
> 
> 标签：redis, publish-subscribe

假设我有一个 Redis 的主从部署（1 个主，1 个从）和一个将管理 Publish-Subscribe 的客户端（webapp）。

*   我可以向奴隶发布消息吗？他们会被主人“看到”吗？
*   或者我应该只使用 Master 发布和 Slave 订阅命令？

我一直在环顾四周，但找不到答案。有谁知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-22T12:39:54.827

编辑：正如@jameshfisher 指出的那样，下面的链接是关于`Redis Cluster`. @lionello 的评论似乎是正确的答案：

> 发布到从站不会传播到主站，反之亦然。

答案在*[集群规范](http://redis.io/topics/cluster-spec)*文档中：

> **发布/订阅**
> 
> 在 Redis 集群中，客户端可以订阅每个节点，也可以发布到每个其他节点。集群将确保根据需要转发已发布的消息。当前的实现将简单地将每个发布的消息广播到所有其他节点，但在某些时候，这将使用布隆过滤器或其他算法进行优化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T21:21:31.287

对于您存储在 Redis 中的典型数据，您应该只写入主服务器。

来自[http://redis.io/topics/replication](http://redis.io/topics/replication)：

> ...如果从站和主站将 [原​​文如此] 重新同步，或者如果从站重新启动，则 [对从站] 的写入将被丢弃...

事实上，从 v2.6 开始，您可以将 slave 置于`slave-read-only`mode 以防止错误地将数据写入 slave。

该文档确实继续提到了将数据写入从属设备的潜在用例：

> ...通常会有一些不重要的临时数据可以存储到从站中。例如，客户端可能会获取有关从属实例中主控的可达性的信息来协调故障转移策略。

# php - 数据被覆盖rabbitmq excel

> ID：15258210
> 
> 赞同：0
> 
> 时间：2013-03-06T21:14:19.420
> 
> 标签：php, symfony, rabbitmq, phpexcel, amqp

我正在使用 rabbitmq 队列从控制器获取数据，然后消费者服务处理数据并使用 php-excel 生成 excel 表。

我面临的问题是，如果只运行一个消费者，数据将在 Excel 工作表中被覆盖。如果我运行多个消费者，问题就基本解决了。

我使用直接作为 rabbitmq 类型和 luiggio excel 捆绑包用于 symfony2。

有没有人遇到过类似的问题？欢迎任何关于可能问题的提示。

//部分消费者代码

```
public function execute(AMQPMessage $msg)
    {
        $data = array();
        $data = unserialize($msg->body);

        if ($data['type'] == 'sometype') {
                $this->excel->excelObj->getProperties()->setCreator("something");
                $value = $this->excel->excelObj->setActiveSheetIndex(0);
                $value->setCellValue('A1', 'Some Number');
                $value->setCellValue('B1', 'Some Other Number');
                $incr = 2;
                foreach ($data['somedata'] as $datum) {
                  value->setCellValue('A'.$incr, $datum['that_number']);
                  value->setCellValue('B'.$incr, $datum['that_number']);
                }
        } else if ($data['type'] == 'sometype2') {
                $this->excel->excelObj->getProperties()->setCreator("something");
                $value = $this->excel->excelObj->setActiveSheetIndex(0);
                $value->setCellValue('A1', 'Some Number2');
                $incr = 2;
                foreach ($data['somedata'] as $datum) {
                  value->setCellValue('A'.$incr, $datum['that_number']);
                }
        }

        $this->excel->excelObj->getActiveSheet()->setTitle('Simple');
        $this->excel->excelObj->setActiveSheetIndex(0);
        $tempName = $data['type'] .microtime(). '.xls';
        $this->excel->getStreamWriter()->write('/tmp/'.$tempName);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:28:40.753

可能是因为您没有在`foreach`循环中增加 $incr ，所以您总是写入同一行；并且`value`也应该`$value`在这些循环内。

```
$value->setCellValue('A'.$incr++, $datum['that_number']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T19:10:41.627

问题在于正在创建的 PHP excel 对象。

最后通过在生成一张excel表后强制启动/重置excel对象来解决它。

# sql-server-2008 - 在查询中使用 union all 创建视图

> ID：15258214
> 
> 赞同：-4
> 
> 时间：2013-03-06T21:14:38.023
> 
> 标签：sql-server-2008

我从单个表创建了一个视图

```
Create view v1 as
    select severity,avg(days),count(bugid) from tabble1 where bugid in (105,109) group by severity
union all
    select severity,avg(days),count(bugid) from tabble1 where bugid in (105,109) group by severity
union all
    select severity,avg(days),count(bugid) from tabble1 where bugid in (105,109) group by severity 
```

* * *

视图已创建。但是当我在视图 ( ) 中看到的数据与`select * from v1`仅运行查询时不同时：

```
select severity,avg(days),count(bugid) from tabble1 where bugid in (105,109)group by severity
union all
select severity,avg(days),count(bugid) from tabble1 where bugid in (105,109)group by severity
union all
select severity,avg(days),count(bugid) from tabble1 where bugid in (105,109)group by severity 
```

可能是什么原因以及如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:27:40.560

我能看到的最有可能的可能性：

*   你的观点和你的查询其实并不完全相同。其中一个可能有错字。
*   您正在从一台服务器上的视图中运行选择，并在另一台服务器上运行特定查询（如果我在每次手动运行查询时都有一美元，我在错误的服务器上......）
*   在针对视图运行选择和另一个选择之间，数据发生了变化。

# xamarin.android - monodroid 应用程序无法在发布模式下更新 ui

> ID：15258227
> 
> 赞同：0
> 
> 时间：2013-03-06T21:15:21.443
> 
> 标签：xamarin.android

我们的 Monodroid 应用程序在调试模式下运行良好 - UI 是响应式的。问题在于，在发布模式下，UI 往往没有按预期更新——这意味着我们必须离开并返回应用程序，以便查看呈现的更改。当然，所有更改都在 UI 线程中执行。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:02:49.553

你是如何更新用户界面的？你能显示一些代码吗？

* * *

更改 debug->release 时出现问题的一个常见原因是 Mono Linker 可能会删除反射所需的属性。

要阻止这种情况发生，您可以更改链接器设置，或者您可以包含额外的代码来欺骗链接器不删除您需要的方法。

有关这方面的更多信息，请参阅[http://docs.xamarin.com/guides/android/advanced_topics/linking](http://docs.xamarin.com/guides/android/advanced_topics/linking)

欺骗链接器的文件示例是[LinkerIncludePlease.cs](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20BestSellers/BestSellers/BestSellers.Droid/LinkerIncludePlease.cs)

# python - python - 通过 xml 属性对字符串进行排序，.text 格式错误的 xml 数据

> ID：15258228
> 
> 赞同：0
> 
> 时间：2013-03-06T21:15:21.693
> 
> 标签：python, xml, elementtree

```
#!/usr/bin/env python
import os, sys, os.path
import string 

def sort_strings_file(xmlfile,typee):
    """sort all strings within given strings.xml file"""

    all_strings = {}
    orig_type=typee

    # read original file
    tree = ET.ElementTree()
    tree.parse(xmlfile)

    # iter over all strings, stick them into dictionary
    for element in list(tree.getroot()):
        all_strings[element.attrib['name']] = element.text

    # create new root element and add all strings sorted below
    newroot = ET.Element("resources")
    for key in sorted(all_strings.keys()):
        # Check for IDs
        if typee == "id":
            typee="item"

        # set main node type
        newstring = ET.SubElement(newroot, typee)

        #add id attrib
        if orig_type == "id":
            newstring.attrib['type']="id"

        # continue on
        newstring.attrib['name'] = key
        newstring.text = all_strings[key]

    # write new root element back to xml file
    newtree = ET.ElementTree(newroot)
    newtree.write(xmlfile, encoding="UTF-8") 
```

这很好用，但是如果一个字符串以 like 开头，`<b>`它会严重损坏。前任

```
<string name="uploading_to"><b>%s</b> Odovzdávanie do</string> 
```

变成

```
<string name="uploading_to" /> 
```

我查看了 xml.etree Element 类，但它似乎只有 .text 方法。我只需要一种方法将所有内容都放在 xml 标签之间。不，我无法更改输入数据。它直接来自一个准备好翻译的 Android APK，除了它必须是有效的 XML Android 代码之外，我无法预测数据是如何/什么进来的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:34:21.113

我认为您正在寻找`itertext()`方法。`.text`只返回直接包含在元素*开头的文本：*

```
>>> test = ET.fromstring('<elem>Sometext <subelem>more text</subelem> rest</elem>')
>>> test.text
'Sometext '
>>> ''.join(test.itertext())
'Sometext more text rest' 
```

`.itertext()`另一方面，迭代器让您找到元素中包含的*所有*文本，包括嵌套元素内部。

但是，如果您只希望文本*直接*包含在元素中，跳过包含的子元素，则需要每个子元素的组合`.text`和`.tail`值：

```
>>> (test.text or '') + ''.join(child.tail for child in test.getchildren())
'Sometext  middle  rest' 
```

如果您需要捕获包含的*所有*内容，那么您需要做更多的工作；捕获`.text`, 并将每个孩子投射到文本中`ElementTree.tostring()`：

```
>>> (test.text or '') + ''.join(ET.tostring(child) for child in test.getchildren())
'Sometext <subelem>more text</subelem> middle <subelem>other text</subelem> rest' 
```

`ET.tostring()`考虑元素尾部。我使用`(test.text or '')`是因为`.text`属性也可以`None`。

您可以在函数中捕获最后一个方法：

```
def innerxml(elem):
    return (elem.text or '') + ''.join(ET.tostring(child) for child in elem.getchildren()) 
```

# c# - 是否可以反映 csproj 程序集引用的细节？

> ID：15258229
> 
> 赞同：0
> 
> 时间：2013-03-06T21:15:22.207
> 
> 标签：c#, reflection, reference, assemblies

我们经常遇到麻烦，因为我们解决方案中的项目/包引用配置错误（例如，不正确地需要特定版本）。我想编写一个简单的 NUnit 测试来检查这些情况，以便我们尽早发现它们。理想情况下，我会在程序集上使用反射，而不是自己解析 csproj 文件。这可能吗？csproj 文件中的所有信息都可以通过对已编译程序集的反射获得吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:27:01.117

您可以通过调用来获取特定程序集的引用`Assembly.GetReferencedAssemblies`，这将返回被引用的 AssemblyName。这包括名称和版本。

```
Assembly a = Assembly.ReflectionOnlyLoadFrom(fileName);
var references = a.GetReferencedAssemblies(); 
```

# javascript - 使用从另一个网站获取的信息填写表格的书签

> ID：15258230
> 
> 赞同：-3
> 
> 时间：2013-03-06T21:15:22.807
> 
> 标签：javascript, bookmarklet

我的客户是房地产经纪人。他们使用网站管理员在其网站上发布房地产广告。然后他们在国家房地产网站上发布（相当）相同的广告。当然，他们希望保持干爽，不要重复工作。

我考虑过他们在物业网站表单上时会点击的书签。他们的房地产将显示在一个列表中，他们会选择其中一个。然后表格将填写通过代理网站 API 收到的信息。

你认为这是可能的吗？这是最好的方法吗？

感谢您的回答！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T21:27:33.867

是的，您可以尝试这样做。首先你可以加载外部脚本：

```
javascript:(function(){document.body.appendChild(document.createElement('script')).src='** your external file URL here **';})(); 
```

您可以创建动态 JS 文件，该文件将通过 url 中的 GET 变量定义您的代理 ID，或创建全局变量。什么 JS 脚本将由您决定。

# php - 通过 REST API 不断检查 TwitchTV 观众数量

> ID：15258232
> 
> 赞同：1
> 
> 时间：2013-03-06T21:15:30.950
> 
> 标签：php, ajax, api, codeigniter, curl

所以基本上我想做的是实时获取当前直播的流媒体的观众人数。我检查一下流是否是实时的。您如何不断地 ping API 以获取更新的值，以便我可以将更新的值发送到文档，在这种情况下，它最终会更新`$viewers`我设置的变量。如果它有所作为，我正在制作的应用程序正在使用`CodeIgniter framework`. 以下是我目前必须拨打电话的代码。现在我必须重新加载页面才能获得实际值，它使用 cURL 进行 API 调用。

```
class Streaming {   
    var $base_url = "https://api.twitch.tv/kraken/";
    var $client_id = 'client_id_here';
  public function load_stream_stats($channel) {
    $curl = curl_init();
    curl_setopt_array($curl, array( CURLOPT_RETURNTRANSFER => 1,
                                    CURLOPT_URL => $this->base_url . 'streams/'. $channel .'?client_id=' . $this->client_id
                                  )
    );
    $result = curl_exec($curl);
    //makes sure that the cURL was excuted if not it generates the error stating that it didn't succeed.
    if(!curl_exec($curl)){
        die('Error: "' . curl_error($curl) . '" - Code: ' . curl_errno($curl));
    } else {
        //cURL Response worked
        if(!empty($channel)) {
            $return = json_decode($result);
            if($return->stream == null) {
                return;
                // stream is offline no need to do anything
            } else {
                $stream_details = array('viewers' => $return->stream->viewers);
                // $return->stream->viewers gives a number e.g. 1052
                return $stream_details;
            }
        } 
    }
    curl_close($curl);
  }
} 
```

手头的问题是我如何 ping TwitchtV API 以从 REST API 获取更新的观众人数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:47:25.527

工作 ajax 就在这里。在 site_url/auto_update/broadcast/username 中，我有一个 json 值，其中包含从 API 中提取的查看者计数，以便我可以自动更新它。因此，从 api 编码查看器计数并将其编码为 json，然后您可以提取所有值。

```
<script type="text/javascript">
    var viewers = <?= $viewers ?>;
    var username = "<?= $username ?>";
    var site_url = "<?= base_url() ?>";
    var poll_interval = 3000;
</script>
<script type="text/javascript">
$(document).ready(function() {
    $('#viewers').append(viewers);

    setInterval(function(){
        $.ajax({
            url: site_url + "auto_update/broadcast/" + username,
            type: "GET",
            dataType: "json",
            cache: false,
            success: function(data) {
              if (data == null) return;
              var update_viewers = data['viewers'];
              console.log(update_viewers);
              $('#viewers').html(update_viewers);
            }
          });
    }, poll_interval);
});
</script> 
```

AJAX 调用包含新更新的查看者计数的函数，然后将其编码为 json。我每 3 秒调用一次这个函数。如果附加了客户端 ID，那么您不会受到速率限制。希望这可以帮助某人。

如果您有任何问题，请告诉我，我会尽力帮助您！

# r - 在R markdown文件上使用表格标题，使用knitr在pandoc中使用以转换为pdf

> ID：15258233
> 
> 赞同：14
> 
> 时间：2013-03-06T21:15:43.540
> 
> 标签：r, markdown, knitr, pandoc

我想知道是否可以在 .Rmd 文件中使用 knitr 的表格标题，如图形标题？

我看到了图形标题的选项，但我看不到表格标题的选项。我还想删除诸如`"% latex table generated in R 2.15.2 by xtable 1.7-0 package % Wed Mar 06 15:02:11 2013"`.

我使用X表创建表：我使用的示例代码如下：

```
```{r table2, results='asis', message=FALSE} 
library(xtable) 
print(xtable(head(iris))) 
``` 
```

我通过pandoc处理后得到的表如下：

![在此处输入图像描述](../Images/ef62e0f3027ddf14b9fd29975f94c551.png)

我尝试在 Rmd 文件中使用 message=FALSE 来消除上面显示的消息。我还想知道是否可以在 Rmd 中自动为表格添加标题？

通过标题，我的意思是如下所示（这是用于图形），并且图形编号会自动更新。

此输出是 pdf 使用 knitr 创建的 markdown 文件生成的 pdf 的快照。

![在此处输入图像描述](../Images/c8b053ae07207f51d27ce0b6a3cdec96.png)

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T19:57:18.413

如果您不坚持将 LaTeX/HTML-only 解决方案与其他很棒的`xtable`包一起使用，您可能会通过 Pandoc 的降价实现相同的效果。一种选择是在表格下方[手动添加标题，或使用我的](http://johnmacfarlane.net/pandoc/README.html#tables)[R Pandoc writer 包](http://rapporter.github.com/pander/)：

```
> library(pander)                         # load pkg
> panderOptions('table.split.table', Inf) # not to split table
> set.caption('Hello Fisher!')            # add caption
> pander(head(iris))                      # show (almost) any R object in markdown
-------------------------------------------------------------------
 Sepal.Length   Sepal.Width   Petal.Length   Petal.Width   Species 
-------------- ------------- -------------- ------------- ---------
     5.1            3.5           1.4            0.2       setosa  

     4.9            3.0           1.4            0.2       setosa  

     4.7            3.2           1.3            0.2       setosa  

     4.6            3.1           1.5            0.2       setosa  

     5.0            3.6           1.4            0.2       setosa  

     5.4            3.9           1.7            0.4       setosa  
-------------------------------------------------------------------

Table: Hello Fisher! 
```

然后使用 Pandoc 将此 markdown 文件转换为 HTML、LaTeX、docx、odt 或任何其他流行的文档格式。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-07T10:17:57.033

您可以在 markdown 中插入带有自动编号标题的表格，以便使用直 knitr 代码使用 pandoc 进行处理。将此代码段插入 .rmd 文件的顶部：

```
```{r setup, echo=FALSE}
tn = local({
  i = 0
  function(x) {
    i <<- i + 1
    paste('\n\n:Table ', i, ': ', x, sep = '')
    # The : before Table tells pandoc to wrap your caption in <caption></caption>
  }
})
knit_hooks$set(tab.cap = function(before, options, envir) {
  if(!before)
    tn(options$tab.cap)
})
default_output_hook = knit_hooks$get("output")
knit_hooks$set(output = function(x, options) {
  if (is.null(options$tab.cap) == F)  
    x
  else
    default_output_hook(x,options)
})
``` 
```

要插入编号的表格标题：

```
```{r myirischunk, tab.cap="This is the head of the Iris table"}
kable(head(iris))
``` 
```

通过覆盖输出挂钩并使用 tab.cap，您无​​需使用 results='asis' 来混淆块选项。

谢谢针织者！

PS：如果您想转换为 Latex/pdf，您可能希望 Latex 为您的表格编号。在这种情况下，您可以更改`tn(options$tab.cap)`为`paste('\n\n:', options$tab.cap, sep='')`- 但我尚未对此进行测试。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-06T05:27:44.647

您可以使用`xtable`. 添加`caption`到`xtable`和`comment=FALSE`到`print`函数。

```
print(
  xtable(
    head(iris),
    caption = 'Iris data'
  ),
  comment = FALSE,
  type = 'latex'
) 
```

请参阅[xtable](http://www.rdocumentation.org/packages/xtable/functions/xtable)和[print.xtable](http://www.rdocumentation.org/packages/xtable/functions/print.xtable.html)文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-28T21:02:18.100

我知道这是很多年前的事了，但是如果有像我这样的人来到这里寻找答案，我会告诉你我找到的相同问题的答案。

这真的很简单，我们只需要输入：

```
```{r mostrarSerie,results='asis',echo=FALSE}
library(xtable)
options(xtable.floating = TRUE)
print(xtable(AP, digits = 0,caption = "Serie de tiempo"),comment = FALSE)
``` 
```

重要的一步是输入选项`xtable.floating = TRUE`，因为 LaTeX 会识别表格。

# asp.net - 以经过身份验证的用户身份打开文件

> ID：15258235
> 
> 赞同：0
> 
> 时间：2013-03-06T21:15:48.297
> 
> 标签：asp.net, .net, file-io, iis-7.5, file-permissions

如何`System.IO.FileStream`以运行浏览器 ( `User.Identity.Name`) 而不是服务器上的本地网络帐户的用户身份打开文件 ( )？

请求：如果适用，请使用适当的术语编辑帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:20:22.537

您正在寻找的内容称为模拟。[这](https://stackoverflow.com/questions/13444334/impersonation-in-asp-net-failing)是一个关于它的问题。这是关于它[的](http://forums.asp.net/t/1835569.aspx/1?Impersonation+not+working+on+IIS+7+)另一个线程。

既然您知道要寻找什么，Google 也可能会提供很多帮助。

# java - 为 AppEngine Java 重新索引任务/映射器/作业

> ID：15258246
> 
> 赞同：1
> 
> 时间：2013-03-06T21:16:33.963
> 
> 标签：java, google-app-engine, indexing, mapreduce, objectify

是否有人知道可用于重新索引所有/某些名称空间中的所有/某些实体的库或好的代码示例？

如果我自己实现这个，我应该考虑 MapReduce 吗？

“我需要重新索引吗？” 感觉就像许多开发人员遇到的问题，但我能找到的最接近的是[这个](https://code.google.com/p/walkaround/source/browse/src/com/google/walkaround/wave/server/index/ReIndexMapper.java)，这可能是一个好的开始？

其他选项是使用迭代数据存储名称空间和实体的任务队列的自制解决方案，但我不希望重新发明轮子并寻求一个强大的、经过验证的解决方案。

有什么选择 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:45:35.940

恐怕我不知道任何预建系统。我认为您基本上需要创建一个游标来遍历所有实体，然后对所有实体执行 get 和 put（或者在执行 put 之前选择检查它们是否在索引中 - 如果您有一些不会不需要更新，这会以读取和/或小型操作为代价为您节省写入）。

按照此处的示例： [https ://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#Cursors](https://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#Cursors)

1.  创建一个 java.util.concurrent.SynchronousQueue 来保存成批的数据存储键。
2.  使用 ThreadManager 创建 10 个新的消费者线程（当前限制）： [https](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/ThreadManager) ://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/ThreadManager 这些线程应该执行以下操作：
    1.  创建一个新的 objectify 实例并关闭 objectify 的 session 缓存和 memcache。
    2.  从 SynchronousQueue 中获取一批密钥。
    3.  使用批处理获取所有这些实体。
    4.  *可以选择使用相关属性对所有这些实体进行仅键查询。*
    5.  放置所有这些实体*（或排除上面返回的实体）*。
    6.  从第 2 步开始重复。
3.  在一个循环中，使用仅键游标查询获取接下来的 30 个键并将它们放入 SynchronousQueue。
4.  将所有项目放入 SynchronousQueue 后，设置一个属性以在所有消费者线程完成工作后停止它们。

# vbscript - 如何使用VBscript在Excel中的单元格中输入值

> ID：15258255
> 
> 赞同：1
> 
> 时间：2013-03-06T21:17:06.557
> 
> 标签：vbscript

```
Set objReadFile = objFSO.OpenTextFile(objFile.Path, ForReading)
    strAll = Split(objReadFile.ReadAll, vbCrLf, -1, vbTextCompare) 'Gets each line from file
    i = LBound(strAll)
    Do While i < UBound(strAll)
       If (InStr(1, strAll(i), "DAU SNo.-C0", vbTextCompare) > 0) Then
          i = i + 4 'Skip 4 lines to get to first SN
          Do Until InStr(1, strAll(i), "+", vbTextCompare) > 0 'Loop until line includes "+"
             strSNO = Split(strAll(i), "|", -1, vbTextCompare)
             'put strSNO into next cell in column A
             **objSheet.Cells.Offset(1,0).Value = Trim(strSNO(1))**
             i = i + 1
          Loop
       End If
    i = i + 1
    Loop 
```

此代码成功拆分文本文件并将我想要的两个值放入 strSNO(1) 和 strSNO(2) 中。我想将它们写入 A 列第 2 行和 B 列第 2 行，然后在循环的下一次迭代中将下一个值放入第 3 行。我尝试了偏移方法，它给出了错误。我找到的所有帮助都是针对 VBA 的。谁能告诉我要在粗体字的地方放什么来修复它？

编辑：

解决了。​​这就是我所做的：

```
strAll = Split(objReadFile.ReadAll, vbCrLf, -1, vbTextCompare) 'Gets each line from file
    i = LBound(strAll)
    c=2
    Do While i < UBound(strAll)
       If (InStr(1, strAll(i), "DAU SNo.-C0", vbTextCompare) > 0) Then
          i = i + 4 'Skip 4 lines to get to first SN
          Do Until InStr(1, strAll(i), "+", vbTextCompare) > 0 'Loop until line includes "+"
            strSNO = Split(strAll(i), "|", -1, vbTextCompare) 
            i = i + 1
            objSheet.Cells(c,1).Offset(1,0).Value = Trim(strSNO(1))
            objSheet.Cells(c,2).Offset(1,0).Value = Trim(strSNO(2))
            c=c+1
            Loop
      End If
    i = i + 1
    Loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:46:38.050

代替

```
objSheet.Cells.Offset(1,0).Value = Trim(strSNO(1)) 
```

和

```
objSheet.Cells(i,1).Value = Trim(strSNO(1))
objSheet.Cells(i,2).Value = Trim(strSNO(2)) 
```

**编辑：**你确定你想要字段 1 和 2`strSNO`吗？VBScript 数组是从 0 开始的，所以第一个索引是 0，而不是 1。

要定位错误，请添加一些调试代码：

```
On Error Resume Next
objSheet.Cells(i,1).Value = Trim(strSNO(1))
If Err Then
  WScript.Echo i & ": " & strAll(i)
  WScript.Echo "strSNO(1) = " & strSNO(1)
  WScript.Echo "strSNO(1) is of type " & TypeName(strSNO(1))
End If
Err.Clear
objSheet.Cells(i,2).Value = Trim(strSNO(2))
If Err Then
  WScript.Echo i & ": " & strAll(i)
  WScript.Echo "strSNO(2) = " & strSNO(2)
  WScript.Echo "strSNO(2) is of type " & TypeName(strSNO(2))
End If
On Error Goto 0 
```

如果问题结果是`strAll(i)`不包含 a `|`for some `i`，因此`Split()`生成一个只有一个元素的数组，您可以通过以下方式解决该问题：

```
strSNO = Split(strAll(i) & "|", "|", -1, vbTextCompare) 
```

# c++ - 多线程的高分辨率计时 API

> ID：15258256
> 
> 赞同：1
> 
> 时间：2013-03-06T21:17:09.523
> 
> 标签：c++, windows, visual-c++, timing

我正在尝试实现一个多线程 3D 应用程序，其中一个线程执行恒定速率的场景更新（120Hz），另一个执行渲染（可能具有非常短的帧时间，例如 400Hz），共享数据三重缓冲。根据[MSDN](http://msdn.microsoft.com/en-gb/library/windows/desktop/ee417693%28v=vs.85%29.aspx)关于计时的文章`QueryPerformanceCounter`，多线程使用时表现不佳：

> 在多个线程上计算时序——例如，每个线程与特定处理器相关联——大大降低了多核系统的性能。

然而，更新线程需要高精度时序以确保更新以正确的间隔发生，并且渲染线程需要高精度的帧时间进行插值，那么解决这个问题的常用方法是什么？

**更新：**

我现在创建了一个小型测试程序来测试这种“大幅降低”的性能。它会调用`QueryPerformanceCounter`100000000 次。它为一个线程执行此操作，然后在不同的内核上为两个并行线程运行它。根据文章的建议，每个线程都将其亲和性设置为不同的核心。如果您按照文章的内容进行，我的机器上的测试结果令人惊讶。

结果：

*注意：这些结果包括递增循环计数器（64 位 int）和跳转到循环开头所花费的时间，因此实际执行时间更短。*

> ```
> 1 Thread:
> 
>    Execution in 3255313449 ns
> 
>    Approximately 32.6 ns per call
> 
> 2 Threads:
> 
> Thread 1:
> 
>    Execution in 3278105881 ns
> 
>    Approximately 32.8 ns per call
> 
> Thread 2:
> 
>    Execution in 3271422015 ns
> 
>    Approximately 32.7 ns per call 
> ```

这表明使用两个线程调用`QueryPerformanceCounter`. 这是异常行为，还是文章对大多数现代机器不正确？

# c# - 获取实体框架中列的最大长度

> ID：15258258
> 
> 赞同：3
> 
> 时间：2013-03-06T21:17:14.980
> 
> 标签：c#, entity-framework, linq-to-entities, intellisense, sqldatatypes

当我将数据库导入到我的 EDMX 模型时，我得到以下关于最大长度的信息

![在此处输入图像描述](../Images/80608562efef88d2646d1e4bdd7e562d.png)

在上图中，我有最大长度为**250的字符串列**

有没有办法检查（在编码时）这个最大长度，而不需要查看 EDMX 属性？

* * *

我希望如何显示信息的示例：

如果我键入类似`Class.ColumnName`它在 Intellisense 中显示的内容，例如摘要信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T17:58:55.507

一种方法是在一个类中声明它并使用这个类（不是 edmx），例如：

```
[Column("Name")]
[Required(ErrorMessage = "Name is obligatory")]
[StringLength(30, MinimumLength = 3, ErrorMessage = "Name has to have at least 3 characters")]
public string Name { get; set; } 
```

然后我使用用户控件在屏幕上检查它。（我知道有更好的解决方案）

* * *

PS：课程有点复杂，有很多自定义，如果有人需要，我可以在以后发布。

但是，您可以在以下链接中查看更多信息：

[StringLength vs MaxLength 属性 ASP.NET MVC3 with EF 4.1 Code First](https://stackoverflow.com/questions/5717033/stringlength-vs-maxlength-attributes-asp-net-mvc3-with-ef-4-1-code-first)
[C# 如何使用 DataAnnotations StringLength 和 SubString 删除文本](https://stackoverflow.com/questions/5287752/c-sharp-how-to-use-dataannotations-stringlength-and-substring-to-remove-text)
[StringLengthAttribute 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.stringlengthattribute.aspx)
和[字符串规范函数](http://msdn.microsoft.com/en-us/library/bb738534.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:08:15.800

Intellisense 将显示设计器的文档 -> 摘要字段中的任何文本。这为您提供了一些选择。

1) 你可能是真正的强迫症，在设计器中编辑你的 EDMX 时，你确保*总是*填写这个字段。

2）您创建一些脚本来解析您的 .edmx（您可以像编辑任何 XML 文件一样对其进行编辑），查找`<Property>`具有`MaxLength`指定的元素，并在其中添加`<Documentation>`和`<Summary>`元素，简单地说明最大长度是多少。例如，解析：

```
<Property Name="USER_NAME" Type="String" MaxLength="50" Unicode="true" FixedLength="false" > 
```

进入：

```
<Property Name="USER_NAME" Type="String" MaxLength="50" Unicode="true" FixedLength="false" >
  <Documentation>
    <Summary>Max length of 50</Summary>
  </Documentation>
</Property> 
```

然后在您的编辑完成后，您只需打开设计器并再次保存即可重建 .Designer.cs/vb。

3) 不知何故让 Visual Studio 知道一个类来自 EDMX，然后返回解析 EDMX 以获取 MaxLength，然后更新 Intellisense 以相应地显示。（我不知道这是否可能。）

# scala - 转换列表 进入序列[（字符串，字符串）]

> ID：15258259
> 
> 赞同：0
> 
> 时间：2013-03-06T21:17:15.840
> 
> 标签：scala, playframework-2.0, scala-java-interop

我想使用[`@helper.select`](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/select.scala.html)表单 Play 2 模板引擎，我应该在其中指定`Seq[(String,String)]`包含`<options>`. 但我有`List<Enum>`。而且我对 Scala 的了解相当微弱。

如果没有这个助手，我`<select>`使用以下代码填充：

```
@for( category <- Categories.values()){
   <option value="@category">@Messages.get( category.getI18NName )</option>
} 
```

以及类别的定义：

```
public enum Category{
    CATEGORY1{
        @Override
        public String getI18NName(){
            return "category.category1";
        }
    },
    CATEGORY2{
        @Override
        public String getI18NName(){
            return "category.category2";
        }
    };

    public String getI18NName(){
        return null;
    }
} 
```

对于测试，我在 Play2 中使用了`options = options("1" -> "1", "2" -> "2", "3" -> "3", "4" -> "4", "5" -> "5")`inputRadioGroup[的 Java 示例](https://stackoverflow.com/questions/15051711/java-example-of-inputradiogroup-in-play2)

我怎样才能`Seq[(String,String)]`从我的`List<Enum>`?

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:45:38.080

您可以在此处使用 for 理解：

```
for (c <- Category.values()) yield c.name() -> c.getI18NName() 
```

这将返回一个`Array[(String, String)]`但 scala 将在预期类型为 时处理转换`Seq[(String, String)]`。

# c# - 如何更改 ILoggerFacade 实现以使用 CallerMemberName 属性跟踪调用方方法？

> ID：15258263
> 
> 赞同：3
> 
> 时间：2013-03-06T21:17:25.877
> 
> 标签：c#, .net, prism, .net-4.5

我正在尝试在我的新 WPF 4.5 CompositeWPF (Prism) 项目中实现日志记录功能。这需要我在我的代码中实现 ILoggerFacade。该接口仅实现 1 个方法：`Log(string message, Category category, Priority priority)`.

`ILoggerFacade`界面：

```
public interface ILoggerFacade
{
    void Log(string message, Category category, Priority priority);
} 
```

我的实现：

```
public class Log4NetLogger : ILoggerFacade
{
    private static readonly ILog m_Logger = LogManager.GetLogger(typeof(ILoggerFacade));

    public void Log(string message, Category category, Priority priority)
    {
        switch (category)
        {
            case Category.Debug:
                m_Logger.Debug(message);
                break;
            case Category.Warn:
                m_Logger.Warn(message);
                break;
            case Category.Exception:
                m_Logger.Error(message);
                break;
            case Category.Info:
                m_Logger.Info(message);
                break;
        }
    }
} 
```

我相信有了新引入的`[CallerMemberName]`属性，如果我知道如何做这样的事情，我应该能够将调用者方法名称传递给记录器：

```
public class Log4NetLogger : ILoggerFacade
{
    public void Log(string message, Category category, Priority priority, [CallerMemberName] string callerMethod = "")
    {
         ... 
```

所以我的问题是，如何覆盖`Log`第三方（Prism）接口强制执行的方法以包含 1 个额外的可选参数？或者如何使用此属性传递调用方方法名称以便记录它？

我见过其他类似的问题，但 [CallerMemberName] 属性是 .NET 4.5 中的一个新功能，所以我希望有一个比所提供的解决方案更好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T21:41:45.593

不幸的是，您能够完成这项工作的唯一方法是修改 Prism 源并重建二进制文件。例如，将 callerMethod 参数添加到 ILoggerFacade 的 Log 方法中。

```
public interface ILoggerFacade
{
    void Log(string message, Category category, 
             Priority priority, [CallerMemberName] string callerMethod = "");
} 
```

如果有任何类已经实现了 ILoggerFacade，你也需要修改它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-19T19:45:30.523

您可以使用一些额外的方法扩展 ILoggerFacade 接口，如下所示：

```
public static class LoggerExtensions
{
    public static void LogError(this ILoggerFacade logger, string message, [CallerMemberName] string caller = "")
    {
        logger.Log(message + ' ' + caller, Category.Exception, Priority.High);
    }
} 
```

然后你只需使用扩展方法而不是 Log()：

```
logger.LogError("message"); 
```

# android - 单击时列表视图

> ID：15258267
> 
> 赞同：2
> 
> 时间：2013-03-06T21:17:42.107
> 
> 标签：android, json, listview, android-intent

我正在开发一个新闻应用程序。

在主页上，我使用 JSON 从服务器获取新闻。

我将这个新的标题放在列表视图中的缩略图旁边。新闻的正文（可能超过 15 行）不会出现在这里。

我希望它出现的地方是当用户单击 ListView 中特定行中的标题时，用户将进入一个新活动，其中显示更大的图像，以及标题和新闻文本。

我的问题如下。- 哪种方法更好？

1 - 获取第一个列表视图中的所有数据，并将它们作为附加内容发送到第二页？（我担心的是 jsons 有时会变得太长）并在那里展示它们？

2 - 只需在第一个列表视图中获取标题，然后获取大文本（和图像）的另一个链接，然后当用户单击新闻时，打开另一个活动，并这次使用新链接重新发布/获取数据.

欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:24:33.333

我更喜欢第二种选择。因为用户可能对所有新闻都不感兴趣。实际上，用户只会阅读很少的新闻。说 4 或 5。如果您选择第二个选项，您将只获取这 4 或 5 个数据。您一次获取所有可用数据将消耗大量数据流量和时间来加载列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:39:32.117

粗略地说，如果您不希望您的应用程序离线工作@Karthik Palanivelu 是正确的，并且您应该只在用户想要阅读它时请求额外的数据。

如果您这样做，那么这实际上取决于您的列表中有多少项目以及您对数据流量的关心程度。如果您有 1000 个项目，15 行，假设每行 100 个字符。这大约是 1.5Mb。如果用户使用移动数据，可能会很多，但如果用户使用 Wifi，也可能会有点。我个人喜欢让用户选择始终离线浏览应用程序，所以在这种情况下，我会立即获取所有文本。（或者至少是一些选项，可能是最新的 100 个左右。但这是我个人的看法）

请记住，这仅适用于文本，您不应该获取所有大图像，否则会消耗很多。现在很多人都在使用移动数据，所以您应该始终尽量将数据消耗保持在最低限度，同时也给用户带来良好的体验。

# 3d - 处理 3d 对象 .obj 导入

> ID：15258270
> 
> 赞同：2
> 
> 时间：2013-03-06T21:17:51.363
> 
> 标签：3d, processing

我正在尝试从网络上找到的 .obj 文件导入处理中的 3d 对象。我已经看到有几种方法可以将 obj 导入场景。

我在此示例中使用了 PShape，并在 [此处](http://thefree3dmodels.com/stuff/architecture/medieval_huts_set/11-1-0-4682)找到了一个 obj 文件。我从纹理工作的示例>基本>形状>LoadDisplayObJ 示例开始。

我能够使用 loadShape 函数导入 obj 文件，但没有显示纹理和颜色。我错过了什么吗？我也应该导入 .mtl 文件吗？

这是代码：

```
PShape house;

float ry;

public void setup() {
  size(640, 360, P3D);

  house = loadShape("huts/huts.obj");
}

public void draw() {
  background(100);
  lights();

  translate(width/3, height/3, 0); 
  //rotateX(QUARTER_PI * 1.0);            
  rotateZ(-PI );

  rotateY(map(mouseX, mouseY, width, 2.5, -2.5));

  //rotateY(ry);
  pushMatrix();
  translate(1500,-400,0);
  shape(house);
  popMatrix();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-27T22:47:15.473

是的，你也有那个文件的导入，如果你有类似的东西就是`.jpg`你的纹理。

# dotnetnuke - DNN 6 用户级模块权限

> ID：15258271
> 
> 赞同：0
> 
> 时间：2013-03-06T21:18:08.117
> 
> 标签：dotnetnuke

在 DNN 6 中管理 HTML 模块的设置时，我可以在用户角色下方的**权限选项卡中添加用户用户名。**

这样做之后，我得到了一个包含 2 列的新行，即 Edit 和 View 模块。

如果未选中**从页面继承查看权限，则****查看**和**编辑**模块列都被锁定。

如果选中**从页面继承查看权限，****查看**模块将被锁定，但**编辑**模块可以访问。

为什么我无法编辑单个用户的查看设置，有没有办法在用户级别为模块分配查看权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:43:41.310

我想这是 DNN6 中的一个错误，并鼓励您考虑升级到 DNN7。

另外，我建议不要使用用户权限。我建议您创建一个角色，并将该用户分配给该角色。

用户级别权限的问题在于它们的不灵活性，例如：如果用户离开了您的组织，而您需要用新用户替换他们，您必须重新申请所有权限。如果您使用了基于角色的权限，您需要做的就是从安全角色中删除 User1，并将新的 User2 添加到安全角色。

# php - 带有 exec 和 sed 命令的 php 表单

> ID：15258272
> 
> 赞同：0
> 
> 时间：2013-03-06T21:18:09.297
> 
> 标签：php, forms, sed, exec

我正在尝试创建一个 php 表单来更改我的 vps 上文件中的值。这是我正在尝试的代码：

```
<?php
echo "<form ";  
    $type = (int)$_POST['animal_type'];                  
    echo exec("sed -i 's/animal=*/animal=$type/g' /home/user1234/animals/file.props");
    echo "method='post'>";
    echo '<select name="animal_type" onChange="this.form.submit()">';
    echo '<option value="bat">bat</option>';
    echo '<option value="fish">fish</option>';
    echo '<option value="cat">cat</option>';
    echo '<option value="dog">dog</option>';
    echo '</select>';
 echo '</form>';
?> 
```

我再次更新了我的代码。目前，它只是将 00 添加到 file.props 中的 animal= 值，而不是用表单中选择的值覆盖当前值。

php 页面上表单中的值也永远不会改变，并且始终保持为 bat。

每次我尝试刷新页面时，我也会收到此消息：“要显示此页面，Firefox 必须发送将重复之前执行的任何操作（例如搜索或订单确认）的信息。”

除了 sed 和 exec 之外，还有更好的方法来更改这些值吗？或者我还在我的代码中做一些不正确的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:32:09.273

表单的[action 属性](http://www.w3.org/TR/html401/interact/forms.html#adef-action)需要指定一个 URI。相反，有一个[exec](http://www.php.net/manual/en/function.exec.php)函数返回一个字符串。我假设这个字符串不是有效的 URI。所以在 html 的源代码中，它看起来像这样：

```
<form action=some string returned by exec> 
```

正在发生的事情如下：

1.  页面已加载
2.  exec('sed....') 被处理并将结果放入 html
3.  用户单击提交并被带到操作中指定的 URI。在这种情况下，它是 exec('sed....') 结果的最后一行

我建议您通过更改表单以发布到另一个页面`<form action="changeFile.php">`然后在 changeFile.php 添加逻辑来修改 VPS 文件来简化此操作。

例如，在 changeFile.php 添加逻辑以更改内容，如下所示：

```
<?php    
exec("sed -i 's/animal=*/animal=$_REQUEST['type']/g' /home/user1234/animals/file.props");
echo 'file modified'
?> 
```

这也可以通过将页面发布到自身来实现，如下所示：

```
<?php
ini_set('display_errors', 1);
ini_set('error_reporting', E_ALL);

if(!empty($_REQUEST['animal_type'])){
    exec('sed -i '.escapeshellarg('s/animal=*/animal='.$_REQUEST['animal_type'].'/g')." /home/user1234/animals/file.props");
    echo 'File has been updated';
}
?>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <select name="animal_type">;
        <option value="true">bat</option>;
        <option value="false">fish</option>;
        <option value="cat">cat</option>;
        <option value="dog">dog</option>;
    </select>
    <input type="submit" name="Submit" value="Submit" />
</form> 
```

# iphone - 为什么带有 UITableView 的 SDWebImage 会导致异常？

> ID：15258273
> 
> 赞同：1
> 
> 时间：2013-03-06T21:18:24.553
> 
> 标签：iphone, uitableview, exception, imageview, sdwebimage

我是 iphone 开发的菜鸟，我正在尝试将 SDWebImage 库实现到我的项目中。我的项目构建良好，但是当我显示我的表格视图时，我的应用程序崩溃并出现无效参数异常。我完全按照安装说明进行操作。我添加了 ImageIO 框架，添加了 -fobjc-arc 标志，因为我的项目是非 ARC，并导入了适当的标头。任何帮助是极大的赞赏。

我的例外

```
'NSInvalidArgumentException', reason: '-[UIImageView setImageWithURL:placeholderImage:]: unrecognized selector sent to instance 0x6e47d50' 
```

我的代码

```
 // Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
}

//Lazy Loader
[cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
               placeholderImage:[UIImage imageNamed:@"mylogo.png"]];

// Configure the cell...

NSDictionary *aTweet = [tweets objectAtIndex:[indexPath row]];

cell.textLabel.text = [aTweet objectForKey:@"text"];
cell.textLabel.adjustsFontSizeToFitWidth = YES;
cell.textLabel.font = [UIFont systemFontOfSize:12];
cell.textLabel.minimumFontSize = 10;
cell.textLabel.numberOfLines = 4;
cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;

cell.detailTextLabel.text = [aTweet objectForKey:@"from_user"];

NSURL *url = [NSURL URLWithString:[aTweet objectForKey:@"profile_image_url"]];
NSData *data = [NSData dataWithContentsOfURL:url];
cell.imageView.image = [UIImage imageWithData:data];
cell.selectionStyle = UITableViewCellSelectionStyleNone;
return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:30:07.070

在该文件的顶部，您是否包含了 SDWebImage 标头，即：

```
#import <SDWebImage/UIImageView+WebCache.h> 
```

（如果您使用的是 cocoapods .. 否则类似:)

```
#import "SDWebImage/UIImageView+WebCache.h" 
```

或者

```
 #import "UIImageView+WebCache.h" 
```

编辑：

为什么你在顶部有这个代码：

```
[cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
               placeholderImage:[UIImage imageNamed:@"mylogo.png"]]; 
```

当您在底部再次进行此设置时：

```
NSURL *url = [NSURL URLWithString:[aTweet objectForKey:@"profile_image_url"]];
NSData *data = [NSData dataWithContentsOfURL:url];
cell.imageView.image = [UIImage imageWithData:data]; 
```

你不需要两者 - 也许删除底部不使用惰性加载器的代码？

# r - 使用 R 编程在 for 循环中制作线性模型

> ID：15258278
> 
> 赞同：-1
> 
> 时间：2013-03-06T21:18:56.750
> 
> 标签：r

我有一个数据集，我将使用预测变量（例如*Price ）调用**dataset1*。我希望根据数据集中存在的其他*n个预测变量获得一个不错的单一价格预测变量。*但是如果*n*很大，我不能手动制作和检查所有这些模型，所以我希望使用这样的东西：

 ***```
for (i in names(dataset1)) {
    model = lm(Price~i, dataset1)
    # Do stuff here with model, such as analyze R^2 values.
} 
```

（我认为这会起作用，因为用 print(i) 替换 for 循环的内部会导致正确的名称。）错误如下：

```
Error in model.frame.default(formula = Price ~ i, data = dataset1, drop.unused.levels =    TRUE) : 
variable lengths differ (found for 'i') 
```

有没有人建议处理有关 R 如何读取*i*变量的问题？我知道如何使用其他软件解决这个问题，但我想了解 R 的工作原理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:30:54.643

`*apply`我会亲自去这里：

```
dat <- data.frame(price=1:10,y=10:1,z=1:10)
sapply(dat[2:3], function(q) coef(summary(lm(dat$price ~ q)))[2])

 y  z 
-1  1 
```

或获取包含完整模型结果的列表：

```
lapply(dat[2:3], function(q) coef(summary(lm(dat$price ~ q))))

$y
            Estimate   Std. Error       t value      Pr(>|t|)
(Intercept)       11 1.137008e-15  9.674515e+15 1.459433e-125
q                 -1 1.832454e-16 -5.457163e+15 1.423911e-123

$z
                Estimate   Std. Error      t value      Pr(>|t|)
(Intercept) 1.123467e-15 2.457583e-16 4.571429e+00  1.822371e-03
q           1.000000e+00 3.960754e-17 2.524772e+16 6.783304e-129 
```

得到你提到的r平方值：

```
sapply(dat[2:3], function(q) summary(lm(dat$price ~ q))$r.squared) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:24:22.180

目前，您没有在名称中循环。尝试

```
for(i in 2:ncol(dataset1)) #assuming Price is column 1 
```

然后参考

```
Price ~ dataset1[, i] 
```

在你的循环中。

但我不确定从统计角度看你的方法。***

# c# - 云存储账户

> ID：15258280
> 
> 赞同：4
> 
> 时间：2013-03-06T21:19:04.350
> 
> 标签：c#, azure, azure-storage

在迁移到 2.0 之前，下面的代码有效（类型 CloudStorageAccount 在命名空间 StorageClient 中）：

```
CloudStorageAccount cloudStorageAccount = CloudStorageAccount.Parse(
    RoleEnvironment.GetConfigurationSettingValue(wadConnectionString));

var roleInstanceDiagnosticManager = cloudStorageAccount.CreateRoleInstanceDiagnosticManager(
    RoleEnvironment.DeploymentId,
    RoleEnvironment.CurrentRoleInstance.Role.Name,
    RoleEnvironment.CurrentRoleInstance.Id); 
```

StorageClient 在 2.0 中被删除，所以现在我必须使用

```
Microsoft.WindowsAzure.Storage.CloudStorageAccount 
```

，位此类型没有 CreateRoleInstanceDiagnosticManager 方法

那么如何获得 CreateRoleInstanceDiagnosticManager 之前返回的实例，因为我将它用于我的性能计数器和日志

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-04T23:21:48.887

看起来在 2.0 中确实发生了变化，并且不再像扩展方法一样起作用 - 这意味着您可能不需要顶部的 CloudStorageAccount 我自己也遇到过这个问题。

尝试这个：

```
CloudStorageAccount cloudStorageAccount = CloudStorageAccount.Parse(
                       RoleEnvironment.GetConfigurationSettingValue(wadConnectionString));

var roleInstanceDiagnosticManager = CloudAccountDiagnosticMonitorExtensions.CreateRoleInstanceDiagnosticManager(
            RoleEnvironment.GetConfigurationSettingValue(wadConnectionString),
            RoleEnvironment.DeploymentId,
            RoleEnvironment.CurrentRoleInstance.Role.Name,
            RoleEnvironment.CurrentRoleInstance.Id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:33:25.080

您要做的是首先包含以下名称空间：

```
using Microsoft.WindowsAzure.Diagnostics.Management; 
```

然后使用下面的代码：

```
 CloudStorageAccount cloudStorageAccount =
     cloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue
         (wadConnectionString));

 RoleInstanceDiagnosticManager roleInstanceDiagnosticManager =   
            cloudStorageAccount.CreateRoleInstanceDiagnosticManager
            (RoleEnvironment.DeploymentId,
            RoleEnvironment.CurrentRoleInstance.Role.Name,
            RoleEnvironment.CurrentRoleInstance.Id); 
```

我刚刚用 SDK 1.8 & Storage Client 2.0 测试了上面的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:09:00.987

它不起作用，因为*CreateRoleInstanceDiagnosticManager*扩展引用了旧的*CloudStorageAccount*。解决方法是使用*DeploymentDiagnosticManager*

```
var storageConnectionString = RoleEnvironment.GetConfigurationSettingValue(
                   "Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString");
var deploymentDiagnosticManager = new DeploymentDiagnosticManager(
                                      storageConnectionString,
                                      RoleEnvironment.DeploymentId);
return deploymentDiagnosticManager.GetRoleInstanceDiagnosticManager(
                        RoleEnvironment.CurrentRoleInstance.Role.Name,
                        RoleEnvironment.CurrentRoleInstance.Id);` 
```

除了*Microsoft.WindowsAzure.Storage*之外，您还需要引用旧的*Microsoft.WindowsAzure.StorageClient*，因为 AzureDiagnostics 引用了该程序集。

# javascript - 更改 ImageClick 上的 div 内容

> ID：15258285
> 
> 赞同：-1
> 
> 时间：2013-03-06T21:19:15.847
> 
> 标签：javascript, jquery

所以，我正在处理这个：[http](http://silviucazacu.com/cold) ://silviucazacu.com/cold ，当我点击左侧的图像时，我想更改内容（图像和播放器）。我希望所有内容都在同一页面上，但要隐藏并在图像上单击以显示在中心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:22:59.310

你能更精确一点吗？这很容易做到，你应该研究一下。

编辑您的 img 标签

```
<img onclick="someJScodethatwillbeexecutedonclicked"></img> 
```

# mysql - SQL - 每个访问者访问工具的次数

> ID：15258286
> 
> 赞同：0
> 
> 时间：2013-03-06T21:19:28.410
> 
> 标签：mysql, sql, select

我们有一个 MySql 表，我们在其中记录每个访问者访问应用程序的日期。因此，在任何时间点，该表可能如下所示：

```
| Tool   | Email                | Date     |
|--------+----------------------+----------|
| Tool 1 | boy1@gmail.com       | 03/03/13 |
| Tool 1 | boy2@gmail.com       | 03/05/13 |
| Tool 9 | anotherboy@yahoo.com | 09/01/13 |
| Tool 1 | boy1@gmail.com       | 10/07/12 |
| Tool 2 | boy1@gmail.com       | 01/01/10 |
| Tool 5 | boy2@gmail.com       | 05/04/12 |
| Tool 1 | boy1@gmail.com       | 05/10/13 |
| Tool 1 | boy2@gmail.com       | 09/10/12 |
| Tool 9 | anotherboy@yahoo.com | 10/07/13 | 
```

我们想要做的是获取每个访问者（由电子邮件 ID 标识）访问工具的次数。所以，对于上表，我们希望能够实现的是：

```
| Tool   | Email                | Number of Visits |
|--------+----------------------+------------------|
| Tool 1 | boy1@gmail.com       |                3 |
| Tool 1 | boy2@gmail.com       |                2 |
| Tool 9 | anotherboy@yahoo.com |                2 |
| Tool 2 | boy1@gmail.com       |                1 |
| Tool 5 | boy2@gmail.com       |                1 | 
```

我曾尝试在电子邮件列上使用 group by 子句，但这给了我不同的电子邮件 ID，这不是我想要的。我真正想做的是选择不同的工具 - 电子邮件对并计算它们在表格中的出现次数。实现这一目标的最佳方法是什么？我应该看联接吗？

将不胜感激任何正确方向的指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:20:28.833

这就是你所需要的吗？

```
SELECT Tool, Email, COUNT(*)
FROM tbl
GROUP BY Tool, Email
ORDER BY COUNT(*) DESC 
```

**结果**

```
| 工具 | 电子邮件 | 计数(*) |
------------------------------------------
| 工具 1 | boy1@gmail.com | 3 |
| 工具 1 | boy2@gmail.com | 2 |
| 工具 9 | anotherboy@yahoo.com | 2 |
| 工具 5 | boy2@gmail.com | 1 |
| 工具 2 | boy1@gmail.com | 1 |
```

[查看演示](http://sqlfiddle.com/#!2/82458/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T21:20:38.767

你想要[`GROUP BY`](http://msdn.microsoft.com/en-us/library/ms177673.aspx)声明。

```
SELECT Tool, COUNT(*), Email
FROM table
GROUP BY Tool, Email 
```

# c# - C# Generic T 分配类型元组

> ID：15258287
> 
> 赞同：0
> 
> 时间：2013-03-06T21:19:28.800
> 
> 标签：c#, generics

我有以下课程：

```
public static class Support<T>
{
    public static T CreateKeyNameJSONTT(IEnumerable<Tuple<T, T>> a, Action<T> b)
    {
        T result = default(T);

        try
        {
            foreach (var entry in a)
            {
              b((T)TypeDescriptor.GetConverter(typeof(T)).ConvertFromInvariantString("[ \"" + entry.Item1 + "\", " + entry.Item2 + "\" ]"));
            }
            result = (T)Convert.ChangeType(true, typeof(T));
        }
        catch
        {
            result = (T)Convert.ChangeType(false, typeof(T));
        }

        return result;
    }
} 
```

我似乎无法正确调用它：

```
var result = Support.CreateKeyNameJSONTT(List<Tuple<int, string>> list, (string entry) =>
{
}); 
```

我得到的错误是“使用泛型列表需要 1 个参数”

任何人都可以请帮忙。我所做的一切都不起作用，所以我可能会误解某些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:22:46.317

您将无法使用 a`List<Tuple<int, string>>`因为在您所说的方法的定义中，第一个参数是：`IEnumerable<Tuple<T, T>>`。这里的关键点是第一个和第二个泛型参数`Tuple`是相同的；它们在调用方法时传递的内容不能有所不同。

你可以这样称呼它：

```
List<Tuple<string, string>> list = null;
var result = Support<string>.CreateKeyNameJSONTT(list , (string entry) =>
{
}); 
```

那将编译。（并且在运行时失败，但这是另一个问题。）

请注意，需要以以下`Support`形式提供通用参数：`Support<string>`. 不能为类的泛型参数推断类型，只能（可能）为方法推断类型。如果您将定义更改为：

```
public static class Support
{
    public static T CreateKeyNameJSONTT<T>(...) 
```

# java - Java Web Start 可以安装 Windows 驱动程序，并将 dll 和 jar 复制到 Java 目录中吗？

> ID：15258288
> 
> 赞同：2
> 
> 时间：2013-03-06T21:19:32.830
> 
> 标签：java, javafx-2, java-web-start, rxtx

我的 Java FX2 应用程序配置了一个串行设备，作为部署的一部分，它必须安装 Windows 设备驱动程序并将本机库（RxTx 串行端口库）复制到 Java 目录中。

Java Web Start 可以处理吗？或者用户应该分阶段进行：手动安装驱动程序，然后复制库，然后通过 Web Start 安装应用程序。

* * *

**更新：** 下面的 MyApp.jar 是自签名的。我将dll放在项目名称下。我在 jnlp 中为 dll 添加了这一行。我使用的是 Netbeans 7.3，所以放了 VM args 行。我的 jnlp 看起来像这样：

```
 <resources>
    <j2se version="1.6+" java-vm-args="-Djava.library.path=. "  href="http://java.sun.com/products/autodl/j2se"/>
    <jar href="MyApp.jar" size="216992" download="eager" />
    <jar href="lib/RXTXcomm.jar" size="66493" download="eager" />
    <nativelib  href="rxtxSerial.dll" size="122880" download="eager" />
  </resources>
<security>
  <all-permissions/>
</security> 
```

我可以在 Netbeans IDE 中运行该应用程序。但是，单击 jnlp，我会弹出“运行时错误”。它要求我单击以查看详细信息，但没有显示任何内容。我在 Java 控制面板的 Temporary Internet Files 中删除了早期的 jnlps。在 Java 控制台中，我什么也看不到。

@AndrewThompson 我试过 Janela 来检查 jnlp。有用的工具！我看到 dll 没有进入 dist 文件夹。jnlp 由 NB 7.3 生成。有没有办法让它加入nativelib？我每次都必须手动完成。`

> JaNeLA 报告 - 版本 11.05.17
> 
> 文件报告：/D:/Profiles/Anil/My%20Documents/NetBeansProjects/MyApp/dist/MyApp.jnlp
> 
> 内容类型应用程序/xml 不等于预期的应用程序类型/x-java-jnlp-file cvc-complex-type.2.4.a：发现以元素“jfx:javafx-runtime”开头的无效内容。需要“{java, j2se, jar, nativelib, extension, property, package}”之一。cvc-complex-type.2.4.a：发现以元素“jfx:javafx-runtime”开头的无效内容。需要“{java, j2se, jar, nativelib, extension, property, package}”之一。cvc-complex-type.2.4.a：发现以元素“安全”开头的无效内容。需要“{resources, application-desc, applet-desc, component-desc, installer-desc}”之一。cvc-complex-type.2.4.a：发现以元素“安全”开头的无效内容。'{resources, application-desc, applet-desc, component-desc, 安装程序描述}' 是预期的。XML 编码未知，但声明为 utf-8 未指定代码库。默认为 file:/D:/Profiles/Anil/My%20Documents/NetBeansProjects/MyApp/dist/ MyApp.jar 中的资源下载可以通过删除 download='eager' 的（默认）值来优化。MyApp.jar 中的资源下载可以通过删除 main='false' 的（默认）值来优化。可能可以优化应用程序的启动。通过为 MyApp.jar 资源指定 download='lazy'。除非指定了下载“部分”，否则延迟下载可能无法按预期对 MyApp.jar 进行。资源“lib/RXTXcomm.jar”声明为大小“66490”，但实际上是“66512”。在 lib/RXTXcomm 下载资源。jar 可以通过删除 download='eager' 的（默认）值来优化。lib/RXTXcomm.jar 中的资源下载可以通过删除 main='false' 的（默认）值来优化。可能可以优化应用程序的启动。通过为 lib/RXTXcomm.jar 资源指定 download='lazy'。lib/RXTXcomm.jar 的延迟下载可能无法按预期工作，除非指定了下载“部分”。获取资源 rxtxSerial.dll 时出现问题。D:\Profiles\Anil\My Documents\NetBeansProjects\MyApp\dist\rxtxSerial.dll（系统找不到指定的文件）` 通过为 lib/RXTXcomm.jar 资源指定 download='lazy'。lib/RXTXcomm.jar 的延迟下载可能无法按预期工作，除非指定了下载“部分”。获取资源 rxtxSerial.dll 时出现问题。D:\Profiles\Anil\My Documents\NetBeansProjects\MyApp\dist\rxtxSerial.dll（系统找不到指定的文件）` 通过为 lib/RXTXcomm.jar 资源指定 download='lazy'。lib/RXTXcomm.jar 的延迟下载可能无法按预期工作，除非指定了下载“部分”。获取资源 rxtxSerial.dll 时出现问题。D:\Profiles\Anil\My Documents\NetBeansProjects\MyApp\dist\rxtxSerial.dll（系统找不到指定的文件）`

我将 dll 放入 jar 中，并添加了 `System.loadLibrary("./rxtxSerial");` That too failed。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:24:20.593

起作用的是这个

> 使用更简单的方法（确认在使用 NetBeans 或 Borland JBuilder 时有效）：
> 
> 添加 RXTXcomm.jar 作为库
> 
> 编译（构建）您的应用程序
> 
> **将 rxtxSerial.dll 添加到分发文件夹的根目录（使用 NetBeans 时为*projectname /dist）***

来自维基[http://rxtx.qbang.org/wiki/index.php/Deploying_JAVA_with_RXTX](http://rxtx.qbang.org/wiki/index.php/Deploying_JAVA_with_RXTX)

将“nativelib”指令放入 jnlp 的建议（来自 Andrew）没有奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:09:28.687

只要您留在沙箱（未签名的应用程序）中，您就无法访问本地文件系统。关于设备驱动程序的安装，我想签名的应用程序也可以这样做，但它可能会触发 Windows 确认。

请参阅[http://docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/security.html](http://docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/security.html)

# ios - 在 iOS 模拟器中恢复 iOS In App Purchase 时出现“无法连接到 iTunes 商店”

> ID：15258289
> 
> 赞同：24
> 
> 时间：2013-03-06T21:19:33.793
> 
> 标签：ios, in-app-purchase, storekit

我已经查看了许多与 iOS StoreKit 的“无法连接到 iTunes 商店”问题相关的现有问题，但我认为我的情况并未涵盖：

在 iOS 模拟器中运行时，我在恢复之前购买的应用程序购买后收到“无法连接到 iTunes 商店”错误。如果我点击取消，弹出窗口消失并且恢复成功。

购买应用内购买时完全没有问题，只有在恢复时。

此外，该问题仅发生在模拟器上，而不是在真实 iPhone 上进行测试时。

我很确定一切都很好，只是想确认它只是一个模拟器错误。这个还有人看过吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-14T16:06:13.257

尽可能多地研究了这一点，并确认在设备上运行时没有问题，无论是在沙盒模式下还是（从昨天开始，当 IAP 被 Apple 批准时）使用真实的 Apple ID，我假设这个是一个模拟器错误，可以忽略。

与下面[iLive](https://stackoverflow.com/users/1318213/ilive)发布的[答案](https://stackoverflow.com/a/15259971/368085)相反，并在 SO 的其他地方重复，Apple 明确支持在模拟器上测试 IAP **，**托管内容下载除外。

 ****更新：**从 iOS 7 开始，似乎不再正确支持在模拟器上测试 IAP。我已经使用非 64 位模拟器让它工作，但不能使用 64 位 iPhone 模拟器。您的里程可能会有所不同。根据下面[pix](https://stackoverflow.com/users/195061/pix)的评论，Apple 似乎也从他们的文档中删除了对 iOS 模拟器测试的提及。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T23:07:10.000

我不相信你可以用模拟器测试你的购买。

来自“应用内购买编程指南”：

> Store Kit 无法在 iOS 模拟器中运行。在 iOS 模拟器中运行您的应用程序时，如果您的应用程序尝试检索支付队列，Store Kit 会记录一个警告。必须在实际设备上测试商店。

如果您查看此链接，Apple 会告诉您应该做什么：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/DevelopingwithStoreKit/DevelopingwithStoreKit.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/DevelopingwithStoreKit/DevelopingwithStoreKit.html)

您还可以查看此链接：[restore button for in-app purchase error](https://stackoverflow.com/questions/11670538/restore-button-for-in-app-purchases-error)

希望这有帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T14:03:47.913

我遇到了同样的问题。我会得到“无法连接到 iTunes Store”。如果您按重试，它会将您发送到登录提示。但是，如果您按取消，您将获得“恢复购买成功”。这似乎仅限于模拟器。

![无法连接到 iTunes Store](../Images/11a377bcf8919b893a3a49f2650ab8a1.png)

![恢复购买成功](../Images/a40e56dcf327776416326af641c636f6.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-17T15:49:35.567

[https://developer.apple.com/library/ios/releasenotes/DeveloperTools/RN-Xcode/index.html#//apple_ref/doc/uid/TP40001051-SW241](https://developer.apple.com/library/ios/releasenotes/DeveloperTools/RN-Xcode/index.html#//apple_ref/doc/uid/TP40001051-SW241)

StoreKit（应用内购买）在模拟器中不起作用。13962338

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-23T07:29:45.460

确保您使用的是沙盒用户帐户。我试图在 Sandbox 上使用我的个人 iCloud 帐户，但同样的错误被拒绝。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-02T16:32:08.610

从最近的（版本 8 及更高版本）Xcode 版本开始，我将`StoreKit`模拟器中的状态限定为*部分实现*。

Apple 官方表示您需要在设备上对其进行测试，但模拟器似乎支持*某些*调用 - 至少`SKProductRequest`总是可以完美运行。完成购买可能会也可能不会。**

# ios - 如何将 YUVJ420P 中的 FFMPEG AVFrame 转换为 AVFoundation cVPixelBufferRef？

> ID：15258290
> 
> 赞同：7
> 
> 时间：2013-03-06T21:19:39.293
> 
> 标签：ios, ffmpeg, avfoundation, yuv

我有一个 FFMPEG `AVFrame`，`YUVJ420P`我想将它转换为`CVPixelBufferRef`with `CVPixelBufferCreateWithBytes`。我想这样做的原因是使用 AVFoundation 来显示/编码帧。

我选择`kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange`并尝试转换它，因为 AVFrame 在三个平面上有数据 `Y480` `Cb240` `Cr240`。根据我的研究，这与选定的`kCVPixelFormatType`. 由于是双平面的，我需要将其转换为包含`Y480`和`CbCr480`交错的缓冲区。

我试图用 2 个平面创建一个缓冲区：

*   `frame->data[0]`在第一架飞机上，
*   `frame->data[1]`并`frame->data[2]`在第二个平面上交错。

但是，我`-6661 (invalid a)`从以下位置收到返回错误`CVPixelBufferCreateWithBytes`：

```
"Invalid function parameter. For example, out of range or the wrong type." 
```

我根本没有图像处理方面的专业知识，因此任何可以让我以正确方法开始解决此问题的文档指针都将受到赞赏。我的 C 技能也不是一流的，所以也许我在这里犯了一个基本错误。

```
 uint8_t **buffer = malloc(2*sizeof(int *));
    buffer[0] = frame->data[0];
    buffer[1] = malloc(frame->linesize[0]*sizeof(int));
    for(int i = 0; i<frame->linesize[0]; i++){
        if(i%2){
            buffer[1][i]=frame->data[1][i/2];
        }else{
            buffer[1][i]=frame->data[2][i/2];
        }
    }

    int ret = CVPixelBufferCreateWithBytes(NULL, frame->width, frame->height, kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange, buffer, frame->linesize[0], NULL, 0, NULL, cvPixelBufferSample) 
```

该帧`AVFrame`带有来自 FFMPEG 解码的 rawData。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T03:49:47.127

> 我的 C 技能也不是一流的，所以我可能在这里犯了一个基本错误。

你正在制作几个：

*   你应该使用`CVPixelBufferCreateWithPlanarBytes()`. 不知道是否`CVPixelBufferCreateWithBytes()`可以用来创建平面视频帧；如果是这样，它将需要一个指向“平面描述符块”的指针（我似乎无法在文档中找到该结构）。
*   `frame->linesize[0]`是*每行的字节数*，而不是整个图像的大小。文档不清楚，但[用法](http://ffmpeg.org/doxygen/trunk/y41pdec_8c_source.html#l00044)相当明确。
*   `frame->linesize[0]`指 Y 平面；你关心紫外线飞机。
*   来自哪里`sizeof(int)`？
*   你过去了`cvPixelBufferSample`；你可能是说`&cvPixelBufferSample`。
*   您没有传递发布回调。文档没有说你可以通过`NULL`。

尝试这样的事情：

```
size_t srcPlaneSize = frame->linesize[1]*frame->height;
size_t dstPlaneSize = srcPlaneSize *2;
uint8_t *dstPlane = malloc(dstPlaneSize);
void *planeBaseAddress[2] = { frame->data[0], dstPlane };

// This loop is very naive and assumes that the line sizes are the same.
// It also copies padding bytes.
assert(frame->linesize[1] == frame->linesize[2]);
for(size_t i = 0; i<srcPlaneSize; i++){
    // These might be the wrong way round.
    dstPlane[2*i  ]=frame->data[2][i];
    dstPlane[2*i+1]=frame->data[1][i];
}

// This assumes the width and height are even (it's 420 after all).
assert(!frame->width%2 && !frame->height%2);
size_t planeWidth[2] = {frame->width, frame->width/2};
size_t planeHeight[2] = {frame->height, frame->height/2};
// I'm not sure where you'd get this.
size_t planeBytesPerRow[2] = {frame->linesize[0], frame->linesize[1]*2};
int ret = CVPixelBufferCreateWithPlanarBytes(
        NULL,
        frame->width,
        frame->height,
        kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange,
        NULL,
        0,
        2,
        planeBaseAddress,
        planeWidth,
        planeHeight,
        planeBytesPerRow,
        YOUR_RELEASE_CALLBACK,
        YOUR_RELEASE_CALLBACK_CONTEXT,
        NULL,
        &cvPixelBufferSample); 
```

内存管理留给读者作为练习，但对于测试代码，您可能会通过传入`NULL`而不是发布回调来逃避。

# ios - iOS 应用程序的 bundle 和 xcode 文件层次结构之间的关系

> ID：15258292
> 
> 赞同：-1
> 
> 时间：2013-03-06T21:19:46.643
> 
> 标签：ios, xcode

有人可以向我解释您在 xcode 中看到的内容与您的 iOS 应用程序包之间的关系吗？

例如，如果我在 xcode 中创建一个名为 Resources 的文件夹并将一些图片复制到其中，那么当我尝试使用`[[UIImage imageWithContentsOfFile: [NSBundle mainBundle] resourcePath];`

我正在尝试以某种有组织的方式让文件夹充满未指定数量的图像，然后加载它们`[[NSFileManager defaultManager] contentsOfDirectoryAtPath:]`

我很确定您在 xcode 中看到的文件层次结构不会在您的应用程序包中重复。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:33:54.507

在 XCode 中，放置在主包中的项目都放在顶层，除非您选择选项“为任何添加的文件夹创建文件夹引用”而不是默认的“为任何添加的文件夹递归创建组”。

[iPhone SDK：主包内的子文件夹](https://stackoverflow.com/questions/2398459/iphone-sdk-subfolders-inside-the-main-bundle)

# ruby - rb-appscript 停止使用 Ruby 2.0.0 - 修补想法使其再次工作？

> ID：15258297
> 
> 赞同：2
> 
> 时间：2013-03-06T21:20:22.470
> 
> 标签：ruby, ruby-2.0, sourceforge-appscript

我知道官方不再支持 rb-appscript。

然而，我尝试并发现重写现有库以使用替代方法（例如 osascript）是一项不平凡的工作，并且在我看来，猴子修补 rb-appscript 再次工作似乎是一种更好的方法，如果可能的话。

这就是发生的事情。

```
$ rvm 2.0.0
$ gem install rb-appscript
$ irb
> require 'appscript'
LoadError: cannot load such file -- _aem/mactypes
from ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
from ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
from ruby-2.0.0-p0/gems/rb-appscript-0.6.1/lib/appscript.rb:8:in `<top (required)>'
from ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:110:in `require'
from ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:110:in `rescue in require'
from ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:35:in `require' 
```

Ruby 2.0.0 的哪些变化导致了这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:33:09.980

似乎 Rubygems 2.0.0 中存在错误，并通过升级到 2.0.2

```
gem update --system 
```

解决了这个问题。

# jquery - 预加载下一页和上一页并在光标键上淡入

> ID：15258299
> 
> 赞同：0
> 
> 时间：2013-03-06T21:20:27.017
> 
> 标签：jquery, html

我看到许多网站实现了页面之间的无缝浏览，我想在我的一些网站上实现这一点。我正在使用 WordPress，但这并没有真正影响这一点。我从来没有走下使用 Javascript 加载新页面的路线，所以这对我来说是新的领域。但是我相信 HTML5 确实具有页面预加载功能。

我正在寻找从空白屏幕淡入的第一页并预加载上一页和下一页。下一页或上一页将无缝淡入（或滑动）在访问者之前已预先加载...

*   点击上一个或下一个链接
*   按向左或向右箭头键
*   如果在平板电脑、手机或其他触控设备上向左或向右滑动

一旦加载并更新浏览器历史记录，地址栏还应显示下一个/上一个页面的 url。

我见过的最好的实现是 The Next Web- [http://thenextweb.com/](http://thenextweb.com/)

[在他们的公告页面上](http://thenextweb.com/voice/2012/10/31/welcome-to-the-next-web-reader-edition/)，他们谈到了这个功能......

> 由于 HTML5 的出色表现，读者现在可以在浏览网站时减少刷新次数，并在文章之间几乎即时切换。试试看，点击本文的下一步按钮或使用...</p>

我不想重新发明轮子。是否有一个 jQuery 插件或一种简单的方法来实现上述目标？

谢谢。

# c# - 字符串到 MM/dd/yyyy

> ID：15258305
> 
> 赞同：-3
> 
> 时间：2013-03-06T21:20:47.137
> 
> 标签：c#, c#-4.0

我有一个这样的字符串：

**2013 年 3 月 4 日**或类似**2012**年 11 月 10 日。这是 mm/dd/yyyy 格式，我想将其转换为 MM/dd/yyy。我正在这样做：

```
 DateTime publicationDate = DateTime.ParseExact(myDate, "MM/dd/yyyy", CultureInfo.InvariantCulture); 
```

这给我一个错误：

```
String was not recognized as a valid DateTime. 
```

这里发生了什么？

**编辑：**

查看所有答案后，我想显示 DateTime 变量的月份和日期。

所以我不能做这样的事情：

```
 string publicationDate = DateTime.ParseExact(myDate, "M/d/yyyy", CultureInfo.InvariantCulture).ToString("MM/dd/yyyy"); 
```

有一个字符串不能解决我的问题，因为我使用这个变量只显示日期和月份。*当我尝试将此“publicationDate”*解析回 DateTime 时，会从月份和日期中截断“0”。

希望我在这里表达了我的观点。

**回答：**

```
string publicationDate = DateTime.ParseExact(myDate, "M/d/yyyy", CultureInfo.InvariantCulture).ToString("MM/dd"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T21:23:46.363

您应该在月份和日期前添加前导零。

这样：2013 年 4 月 3 日

```
var myDateTime = DateTime.ParseExact(
                     "03/04/2013", 
                     "MM/dd/yyyy", 
                     System.Globalization.CultureInfo.InvariantCulture); 
```

如果前导零有问题，请执行以下操作：

```
var myDateTime = DateTime.ParseExact(
                     "3/4/2013", 
                     "M/d/yyyy", 
                     System.Globalization.CultureInfo.InvariantCulture); 
```

最后，如果要添加前导零：

```
string myFormattedDateTime = DateTime.ParseExact(
                                "3/4/2013", 
                                "M/d/yyyy", 
                                System.Globalization.CultureInfo.InvariantCulture)
                             .ToString("MM/dd/yyyy"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T21:33:36.227

请改用此模式：`"M/d/yyyy"`解析它和`"MM/dd/yyyy"`for `ToString`：

```
DateTime publicationDate = DateTime.ParseExact(dt, "M/d/yyyy", CultureInfo.InvariantCulture);
// if you want to display two digits for day and month:
Console.WriteLine(publicationDate.ToString("MM/dd/yyyy")); 
```

它适用于两者，您可以在此处看到：http: [//ideone.com/M7luBD](http://ideone.com/M7luBD)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T22:09:17.907

简单的解决方案是这样的：

```
string publicationDate = DateTime.ParseExact(myDate, "M/d/yyyy", CultureInfo.InvariantCulture).ToString("MM/dd"); 
```

谢谢大家的答案！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:22:43.147

首先转换你的字符串`ToDateTime`。确保您有前导零。

```
string date = "03/04/2013";
DateTime dt = Convert.ToDateTime(date); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T21:25:47.827

```
 [TestCase("3/4/2013", 3, 4, 2013)]
    [TestCase("11/4/2013", 11, 4, 2013)]
    public void DateTest(string date, int month, int day, int year)
    {
        var publicationDate = DateTime.ParseExact(date, "M/d/yyyy", CultureInfo.InvariantCulture);
        Assert.AreEqual(day, publicationDate.Day);
        Assert.AreEqual(month, publicationDate.Month);
        Assert.AreEqual(year, publicationDate.Year);
    } 
```

两个测试用例都通过了。

* * *

如果您的格式要求 MM/dd/yyyy，那么您需要提供这样的字符串（04/03/2013 而不是 4/3/2013）。所以要么

*   如果您提供的日期没有前导零，请使用 M/d/yyyy
*   或者如果您可以提供前导零，请使用 MM/dd/yyyy

# c - 绑定在 UDP 端口上返回失败

> ID：15258307
> 
> 赞同：-3
> 
> 时间：2013-03-06T21:20:59.523
> 
> 标签：c, udp

考虑以下代码：

```
iSocket = socket(PF_INET, SOCK_DGRAM, 0);
memset(&sSocketAddr, 0, sizeof(sSocketAddr));

sSocketAddr.sin_family = AF_INET;
sSocketAddr.sin_addr.s_addr = htonl(INADDR_ANY); 
sSocketAddr.sin_port = htons(10003);
Res = bind(iSocket, (struct sockaddr *)&sSocketAddr, sizeof(struct sockaddr_in)); 
```

在上面的代码中，bind 返回 -1。但对于任何其他端口号，它返回 0（无错误）。我需要根据 UDP 客户端要求使用 10003。如何使它起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:38:41.180

正如绑定手册页（[http://linux.die.net/man/2/bind](http://linux.die.net/man/2/bind)）中所说：

> 出错时，返回 -1，并适当设置 errno。

我认为这是每个 POSIX 调用中的标准过程，有一个名为 errno 的整数包含实际错误的值。您可以手动检查其值，也可以使用原语作为 perror 或 strerror ( [http://www.beej.us/guide/bgnet/output/html/multipage/perrorman.html](http://www.beej.us/guide/bgnet/output/html/multipage/perrorman.html) )

```
if (Res  == -1) { // some error has occurred
    // prints "socket error: " + the error message:
    perror("socket error");
} 
```

你可能想要`#include<errno.h>`（以及`stdio.h`打印功能）

# ios - 何时调用引用属性“委托”？

> ID：15258309
> 
> 赞同：3
> 
> 时间：2013-03-06T21:21:03.390
> 
> 标签：ios, objective-c, cocoa-touch

在我的应用程序中，我有一个包含两个场景的故事板。第一个是Summary-View-Controller，只显示一些数据。但是您可以点击它并切换到可以进行更改的 Edit-View-Controller 场景。要将更改报告回 Summary-View-Controller，Edit-View-Controller 将获得对其父级的引用。编辑完成后，他将在其父视图控制器中调用一个方法。

Edit-View-Controller 中的属性如下所示：

```
@property (weak, nonatomic) id <NameEditViewChangedProtocol> parentController; 
```

我的应用程序运行良好。那不是我的问题。但是在许多教程中，我读到了这样一个属性，它被称为*delegate*。

```
@property (weak, nonatomic) id <NameEditViewChangedProtocol> delegate; 
```

我知道什么是委托以及它是如何工作的，但对我来说*parentController*是一个更有意义的名字。*代表*，那可以是任何东西。所以我的问题是：我什么时候应该调用像这个委托这样的属性？有什么规则如何使用这个名字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:32:47.783

通常类型属性的名称`id<some protocol>`与协议名称的最后部分相同，例如 UITableView 的“delegate”属性是 type 的属性`id<UITableViewDelegate>`，而“dataSource”属性是 type 的属性`id<UITableViewDataSource>`。如果您根据协议的用途来命名协议，那么类型属性的名称`id<some protocol>`应该自然地来自协议名称。值得一提的是，协议名称通常不包含“协议”一词。

如果您遵循我解释的协议/属性名称对应关系，Andrew 关于如何命名属性的回答也可以帮助您为协议取一个更好的名称。

编辑：修复格式丢弃`<protocol names>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T21:50:20.207

> 我知道什么是委托以及它是如何工作的，但对我来说 parentController 是一个更有意义的名字。代表，那可以是任何东西。

我想你已经在这里回答了你自己的问题。就委托类而言，*委托*是一个“可以是任何东西”的辅助对象。*parentController*这个名字假定了两个对象之间的特定关系。如果您知道这种关系将永远存在，那么使用该名称是合适的。另一方面，如果两个对象碰巧有这种关系，但这种关系对于一个对象使用另一个对象作为助手这一事实并不重要，那么使用*委托*（或类似的东西）。

那么，所讨论的对象是否有必要具有父/子关系？`parentViewController`您是否因为它是父母而专门向其发送消息？或者是否可以想象其他一些对象可以响应相同的消息？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T21:27:45.797

当它将用于在运行时决定编辑视图控制器的行为方式，或者通知事件、传入数据等时，将其称为委托。如果要在多个编辑视图控制器中重用，则将其称为委托上下文，并且委托的类可以是任何东西（可能符合委托协议）。

如果您知道两者之间的关系始终是父子关系，父子“拥有”子代，而不是更抽象的委托关系，则将其称为 parentController 可能是有意义的。

# javascript - 使用 CasperJS 的 Facebook 空屏幕截图

> ID：15258310
> 
> 赞同：3
> 
> 时间：2013-03-06T21:21:04.493
> 
> 标签：javascript, node.js, phantomjs, casperjs, headless-browser

我正在使用[SpookyJS](https://github.com/WaterfallEngineering/SpookyJS)（具有相同 API 的 CasperJS 的 nodejs 实现）导航到 facebook 的开发人员门户并返回我所有应用程序密钥和机密的列表。一切正常，直到我的代码将我带到developers.facebook.com/apps。一旦我点击该页面，屏幕截图 Spooky 会显示 facebook 页眉和页脚，但页面正文中没有显示任何内容，尽管它存在于我使用 Spooky 从页面下载的源代码中。有任何想法吗？

# jquery - 如何根据使用 jQuery 的输入单选选择向父 div 添加/删除类？

> ID：15258312
> 
> 赞同：1
> 
> 时间：2013-03-06T21:21:19.620
> 
> 标签：jquery, css, input, radio

下面的代码显示了 4 个默认隐藏的单选按钮，使用 CSS 中的 display:none 属性。但是，我使用“标签”标签选择它们。我也有一个 div 包装一切。

我想知道如果选中了包含的单选框，我如何向这个“div”标签添加/删除一个类。

因此，如果我选择一个收音机，父 div 将获得一个类，如果选择了另一个收音机，则该类将从该 div 中删除并添加到所选收音机的父 div 中。

```
<div class="plan">
   <h3 class="division-one">Division One<span>€2</span></h3>
   <div><label for="23">1 month</label><input type="radio" name="membershipPlanSID" value="23" id="23" /></div>
   <div><label for="24">3 months</label><input type="radio" name="membershipPlanSID" value="24" id="24" /></div>
   <div><label for="25">6 months</label><input type="radio" name="membershipPlanSID" value="25" id="25" /></div>
   <div><label for="26">12 months</label><input type="radio" name="membershipPlanSID" value="26" id="26" /></div>
   <input type="hidden" name="returnBackUri" value="{$returnBackUri}" />
   <input class="signup" type="submit" value="[[Sign Up:raw]]" />
</div> 
```

我尝试了这样的事情，但没有成功：

```
$('input:radio').click(function() {
if($(this).is(':checked')) {
    $(this).parent().addClass('label-selected');
} else {
    $(this).parent().removeClass('label-selected');
}
}); 
```

这样做，尽管有“else”，但该类永远不会被删除。

提前谢谢大家，Arky

编辑：非常感谢大家的快速回答！这里很棒的社区:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:27:17.953

尝试这个：

```
$('input:radio').click(function () {
    $('div.plan div').removeClass('label-selected');
    $(this).parent().addClass('label-selected');
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/cXLv6/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:24:28.583

触发事件的输入是选中的，所以不需要使用`if`语句。将类添加到父`div`元素并将其从其`div`兄弟元素中删除。

```
$(function(){
    $('.plan input[type=radio]').change(function() {
       $(this).closest('div')
              .addClass('label-selected')
              .siblings('div')
              .removeClass('label-selected');              
    });
}); 
```

[http://jsfiddle.net/GXdyP/](http://jsfiddle.net/GXdyP/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T21:28:15.550

**问题**

请记住，`radio`输入元素只有在单击其对应元素之一时才会“取消选中”。与`checkbox`输入元素不同，第二次单击`radio`输入不会清除其值。

在您的示例中，在第一次单击时，您成功地将类添加到父级，`div`因为`radio`输入确实是`:checked`，但是在第二次单击*同一* `radio`输入时，该元素仍然存在`:checked`，因此父级的类不会被删除。

**解决方案**

单击输入元素时，从*除*直接父元素之外的所有元素`radio`中删除该类。`div`

 *例如：

```
 $('.plan :radio').on('click', function() {
     var parent_div = $(this).parent().addClass('label-selected');
     $('.plan').find('div').not(parent_div).removeClass('label-selected');
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:33:09.323

如果这是复选框，它会起作用，但由于它只影响刚刚单击的那个，它不会从其他框中删除该类。尝试这个：

```
$('input[type=radio]').click(function() {
        $('div.plan div').removeClass('label-selected');
        $(this).parent().addClass('label-selected');
}); 
```

这将从所有其他元素中删除该类，然后将其添加到您想要的元素中。

[演示](http://jsfiddle.net/6MYtW/ "演示")*

# string - 寻找“。” 用 string.find()

> ID：15258313
> 
> 赞同：11
> 
> 时间：2013-03-06T21:21:21.987
> 
> 标签：string, lua, lua-patterns

我正在尝试进行简单的字符串操作：获取文件名，不带扩展名。只是，`string.find()`点似乎有问题：

```
s = 'crate.png'
i, j = string.find(s, '.')
print(i, j) --> 1 1 
```

而且只有点：

```
s = 'crate.png'
i, j = string.find(s, 'p')
print(i, j) --> 7 7 
```

这是一个错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-06T21:33:10.240

`string.find()`，默认情况下，不在字符串中查找字符串，而是在字符串中查找[模式](http://lua-users.org/wiki/PatternsTutorial)。可以在链接中找到更完整的信息，但这里是相关部分；

> 这 '。' 表示通配符，可以表示**任意字符**。

要真正找到字符串`.`，句点需要用百分号转义，`%.`

编辑：或者，您可以传入一些额外的参数，`find(pattern, init, plain)`这允许您`true`作为最后一个参数传入并搜索纯字符串。那将使您的陈述；

```
> i, j = string.find(s, '.', 1, true)   -- plain search starting at character 1
> print(i, j) 
6 6 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T21:57:51.503

要么做`string.find(s, '%.')`要么`string.find(s, '.', 1, true)`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-07T05:49:54.503

其他答案已经解释了问题所在。为了完整起见，如果您只对文件的基本名称感兴趣，您可以使用`string.match`. 例如：

```
string.match("crate.png", "(%w+)%.")  --> "crate" 
```

# c# - WiX 刻录：如何在引导程序应用程序中更改“WixBundleManufacturer”？

> ID：15258319
> 
> 赞同：1
> 
> 时间：2013-03-06T21:21:50.917
> 
> 标签：c#, wix, bootstrapper, burn

我正在使用 WiX 构建一个可自定义的设置应用程序，从本教程开始：http: [//bryanpjohnston.com/2012/09/28/custom-wix-managed-bootstrapper-application/](http://bryanpjohnston.com/2012/09/28/custom-wix-managed-bootstrapper-application/)

设置需要可定制，因此我需要从内部设置一些变量，`MainViewModel`这是一个示例：

```
var customProductName = "The Custom Product";
this.Bootstrapper.Engine.StringVariables["WixBundleName"] = theCustomProduct; 
```

这按预期工作。但是，我无法设置变量`WixBundleManufacturer`。我得到一个`System.ArgumentException: Value does not fall within the expected range`.

是否可以在运行时从我的视图模型内部设置制造商值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T05:32:04.390

`Bundle`不，WixBundleManufacturer 是由 authored元素`Manufacturer`属性设置的只读变量。您可以打开功能请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-04T23:24:38.440

[功能请求](http://wixtoolset.org/issues/3933/)在v3.10.0.1719 中实现。该变量现在像任何其他 Burn 变量一样可写。

# node.js - Jade/Node.js：从 Tumblr 加载帖子时显示加载消息

> ID：15258322
> 
> 赞同：0
> 
> 时间：2013-03-06T21:22:01.473
> 
> 标签：node.js, tumblr, pug

我有一个 Node.js 应用程序，它从 Tumblr 加载帖子然后显示它们。
当服务器收到来自客户端的请求时，服务器会从 Tumblr 获取最后 5 个帖子并将它们传递给 Jade，Jade 呈现模板并转换为 HTML，然后将整个内容传递给客户端。

当然，由于从 Tumblr 加载帖子是异步的，所以客户端第一次访问页面时，帖子对象将为空（因为请求在从 Tumblr 接收到帖子之前渲染和发送）。但是，刷新页面后，posts 对象不再为空，页面充满了来自 Tumblr 的帖子。

现在，就像任何体面的网页一样，如果传递的帖子对象为空或为空，我的网页会显示“正在从 Tumblr 加载帖子”。但是，由于 post-fetching 方法的异步特性，它确实需要刷新页面才能看到帖子。我想避免使用 JavaScript 刷新页面，那么如何动态加载页面，在从 Tumblr 检索时显示“正在从 Tumblr 加载帖子”，然后在不刷新的情况下更新页面？

下面是一些相关的代码片段。

后取器方法：

```
function getPosts() {
    var self = this;
    var posts = {};
    blog.text({limit: 5}, function(error, response) {
        if (error) {
           throw new Error(error);
        }

        self.posts = response.posts;
    });

    if (main.debug) console.log(posts);
    return this.posts;
} 
```

请求处理程序：

```
app.get('/', function(req, res) {
    res.render('index', {
        title: "My Site",
        posts: getPosts()
    });
}); 
```

显示帖子的 Jade 块扩展：

```
if posts == null
  .postContainer#nullPosts
    h1 Still loading!
    p
      | You caught us at a bad time: we're still loading posts from
      | Tumblr. Try refreshing the page in a few seconds.
    p#emote Sorry! (>u///u<)
else
  for post in posts
    .postContainer
      h1
        a(title='View on Tumblr', target='_blank', href='#{post.post_url}')
          if post.title == ""
            = post.timestamp
          else
            = post.title
      p !{post.body}
      p.tags
        for tag in post.tags
          = "#" + tag + " " 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T16:55:47.783

Socket.IO 可能会为您解决问题。打开一个套接字连接并通过它们发送图像。套接字在一定时间后轮询服务器。直到您没有来自套接字的任何数据，您可以通过显示消息从客户端处理该数据。

第二种选择是从客户端进行 ajax get 调用，直到它没有完成显示加载图像并成功阻止删除加载图像。

# php - Kohana 2 - force_login 不起作用

> ID：15258324
> 
> 赞同：0
> 
> 时间：2013-03-06T21:22:15.793
> 
> 标签：php, authentication, kohana

我正在使用 Kohana Auth 模块，如下所示：

```
$username = $this->input->post("username");
if( Auth::instance()->force_login($username) )
{}
else
echo "error"; 
```

回显“错误”。

我究竟做错了什么？用户存在于数据库中！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:11:16.040

[http://kohanaframework.org/3.0/guide/api/Auth_ORM#force_login](http://kohanaframework.org/3.0/guide/api/Auth_ORM#force_login)

force_login 什么都不返回，所以它总是假的。

# twitter-bootstrap - Handle multiple remote modal calls

> ID：15258330
> 
> 赞同：0
> 
> 时间：2013-03-06T21:22:31.433
> 
> 标签：twitter-bootstrap, modal-dialog

I would like to open (and close!) a modal with remote content, called by a model with remote content. Unfortunatelly when closing the "inner" modal, both modals are closed.

So what I practically do is the following:

The **index.html** file looks like this:

```
<div class="container">
    <h2>Modal example</h2>
        <a data-toggle="modal" href="#" data-target="#firstmodal"
            class="btn btn-primary btn-large">Launch modal</a>

    <div id="firstmodal" class="modal" tabindex="-1" style="display: none;" data-remote="/link/to/remote.html">
        <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal">×</button>
            <h3 id="firstModalLabel">First Modal</h3>
        </div>
        <div class="modal-body">Actual edit stuff</div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal">Close</button> 
            <button id="save_btn" class="btn btn-primary">Save changes</button></div>
    </div>
</div> 
```

The called **remote.html** is the following:

```
<p>
      <a data-toggle="modal" href="#" data-target="#secondmodal"
             class="btn btn-primary btn-large">Drück mich.</a>
</p>

<div id="secondmodal" data-target="/linkt/to/no_interaction.html" class="modal"     tabindex="-1" style="display: none; ">
    <div class="modal-header">
            <button class="close" type="button"    data-dismiss="modal">×</button>
                <h3 id="secondModalLabel">second header</h3>
    </div>
    <div class="modal-body">Actual edit stuff</div>
    <div class="modal-footer">`enter code here`
        <button class="btn" data-dismiss="modal">schließen</button> 
        <button id="save_btn" class="btn btn-primary">speichern</button
    </div>
    </div>
</div> 
```

And **no_interaction.html** looks like this:

```
<div><p>Hello</p></div> 
```

**Again my problem:** When I close the second (inner) modal, the first modal will also be closed too. Is it, because all the code from the second modal is placed within the

```
<div class="modal-body">Actual edit stuff</div> 
```

of the first modal? Is there a workaround? Or is it just my mistake? ;-)

Thanks in advance,

Peter

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:45:46.767

When using example code from bootsrap all seems ok. I couldn't use remote on jsfiddle but it shouldn't affect behavior of modals.

[http://jsfiddle.net/ZUVYU/1/](http://jsfiddle.net/ZUVYU/1/)

```
<a href="#myModal" role="button" class="btn" id="" data-toggle="modal">Launch demo modal</a>

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
     <h3 id="myModalLabel">Modal header 1</h3>

</div>
<div class="modal-body">
    <p>One fine body…&lt;/p> <a href="#myModal2" role="button" class="btn" id=""
    data-toggle="modal">Launch demo modal</a>

</div>
<div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
</div>
</div>
<div id="myModal2" class="modal hide fade" tabindex="-1" role="dialog"
aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
         <h3 id="myModalLabel">Modal header 2</h3>

    </div>
    <div class="modal-body">
        <p>One fine body 2...</p>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:48:06.053

If You embed modal within modal You fouled automated modal dissmis and thus it closes both modals. You need manualy bind events to close specific modal.

Heres working fiddle, BUT!, You shoudn't embed modals in such way - it's bad design! [http://jsfiddle.net/ZUVYU/3/](http://jsfiddle.net/ZUVYU/3/)

```
<a href="#myModal" role="button" class="btn" id="toggle">Launch demo modal</a>

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
     <h3 id="myModalLabel">Modal header 1</h3>

</div>
<div class="modal-body">
    <p>One fine body…&lt;/p> <a href="#myModal2" role="button" class="btn" id="toggle2">Launch demo modal</a>

    <div
    id="myModal2" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
    aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close closemodal2" data-dismiss="" aria-hidden="true">×</button>
             <h3 id="myModalLabel">Modal header 2</h3>

        </div>
        <div class="modal-body">
            <p>One fine body 2...</p>
        </div>
        <div class="modal-footer">
            <button class="btn closemodal2" data-dismiss="" aria-hidden="true">Close</button>
        </div>
</div>
</div>
<div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
</div>
</div> 
```

js: $('#myModal').modal({show:false}); $('#myModal2').modal({show:false});

```
$('#toggle').on('click', function () {
     $('#myModal').modal('show');    
});

$('#toggle2').on('click', function () {
     $('#myModal2').modal('show');
});

$('.closemodal2').on('click', function() {
    $('#myModal2').modal('hide');
}); 
```

# log4j - jboss 作为 7.1.1 的最终日志

> ID：15258331
> 
> 赞同：3
> 
> 时间：2013-03-06T21:22:32.037
> 
> 标签：log4j, jboss7.x, apache-commons-logging, jboss-logging

我的耳朵有一个作为子部署的战争。ear 文件有一个 META-INF 目录，其中有一个 jboss-ejb-client.xml 文件，该文件只有一个 ejb-recievers 元素和一个 webscheduler.war。这场战争使用了 commons-logging-api.jar。此应用程序在 jboss 上部署为 7.1.1.final。我想使用 apache log4j 进行日志记录。于是我在ear的meta-inf目录下添加了一个jboss-deployment-structure.xml

```
<jboss-deployment-structure>
<deployment>
    <!-- Exclusions allow you to prevent the server from automatically adding some dependencies -->
    <exclusions>
        <module name="org.apache.log4j" />
        <module name="org.log4j"/>  
                <module name="org.jboss.logging"/>   
    </exclusions>
</deployment>
<sub-deployment name="a.war">
    <exclusions>
        <module name="org.apache.log4j"/>
     <module name="org.log4j"/>  
        <module name="org.jboss.logging"/>
    </exclusions>
</sub-deployment>
</jboss-deployment-structure> 
```

我在战争的 lib 目录中有一个 commons-logging.properties 文件，其中包含以下内容，

```
 org.apache.commons.logging.LogFactory=org.apache.commons.logging.impl.LogFactoryImpl 
```

log4j.configuration=/usr/share/wth/jboss/jboss-as-7.1.1/standalone/configuration/log4j.xml

此外，除了 log4j-1.2.11.jar，我在 lib 中没有任何其他日志框架 jar。（如 SLF4j 等）。如您所见，log4j.xml 位于上述属性所描述的目录中。

问题是当我启动 jboss 时，一些应用程序日志确实被写入 log4j.xml 中描述的日志文件（比如 /a/b/c/srv.log），但同时日志也被写入默认 srv。直接登录 jboss 日志。（jboss/standalone/log/srv.log）。

我缺少什么让 jboss 不使用自己的日志记录并使用我提供的 log4j 配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:57:38.617

您的 jboss-deployment-structure.xml 应该如下所示：

```
<jboss-deployment-structure>
  <deployment>
    <exclusions>
      <module name="org.apache.log4j"/>
      <module name="org.apache.commons.logging"/>
    </exclusions>
  </deploymen>
  <sub-deployment name="a.war">
    <exclusions>
      <module name="org.apache.log4j"/>
      <module name="org.apache.commons.logging"/>
    </exclusions>
  </sub-deployment>
 </jboss-deployment-structure> 
```

并且您应该在项目 lib 目录中包含自己的 jar。例如：

```
EAR
|-- META-INF
|   |-- jboss-deployment-structure.xml
|   `-- MANIFEST.MF
|-- lib
|   |-- log4j.jar
|   `-- commons.logging.jar
`-- a.war 
```

确保您使用 flag 进行部署`-Dorg.jboss.as.logging.per-deployment=false`，否则日志记录可能无法正常工作。

例子：

```
$ cd $JBOSS_HOME/bin
$ ./standalone.sh -Dorg.jboss.as.logging.per-deployment=false 
```

# paypal - PayPal Adaptive Parallel Payments - 将表单数据发送到 paypal

> ID：15258332
> 
> 赞同：0
> 
> 时间：2013-03-06T21:22:32.153
> 
> 标签：paypal, paypal-adaptive-payments

我正在使用 PayPal API 进行自适应支付以在我的网站上购买产品，当用户想要在网站上进行“结帐”时，我将他们转移到 paypal 以登录或注册以完成付款流程。默认选项是注册表单，但是当从我的网站重定向到贝宝时，表单是空的，有没有办法将注册数据（如姓名、地址、电子邮件...）从重定向到贝宝传输到此表单，所以我用户不需要做两次（在我的网站和贝宝中）？

我知道在使用标准支付时，这是启用的，但我没有弄清楚如何使用自适应支付来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:07:55.673

目前没有通过 Adaptive Payments Parallel Payments 传递注册信息的选项。

但是，您可能希望查看 Express Checkout Parallel Payments，因为它将通过 API 支持客户注册详细信息并提供更大的灵活性。我在下面列出了一个示例请求。

这是一个“高级”请求。订单项详细信息不是必需的，但建议提供更好的结帐体验。

```
USER=
PWD=
SIGNATURE=
METHOD=SetExpressCheckout
VERSION=98.0
RETURNURL=http://www.yoursite.com/mts/pp_nvp_quick_test.php
CANCELURL=http://www.yoursite.com/mts/pp_nvp_quick_test.php
PAYMENTREQUEST_0_PAYMENTACTION=Sale
PAYMENTREQUEST_0_SHIPTONAME=Daffy Duck
PAYMENTREQUEST_0_SHIPTOSTREET=123 looney lane
PAYMENTREQUEST_0_SHIPTOSTREET2= Apt 7
PAYMENTREQUEST_0_SHIPTOCITY=Miami
PAYMENTREQUEST_0_SHIPTOSTATE=FL
PAYMENTREQUEST_0_SHIPTOZIP=33010
PAYMENTREQUEST_0_SHIPTOCOUNTRYCODE=US
PAYMENTREQUEST_0_AMT=524.20
PAYMENTREQUEST_0_ITEMAMT=458.00
PAYMENTREQUEST_0_SHIPPINGAMT=20.00
PAYMENTREQUEST_0_TAXAMT=46.20
PAYMENTREQUEST_0_CURRENCYCODE=USD
PAYMENTREQUEST_0_DESC=test EC payment
PAYMENTREQUEST_0_PAYMENTREQUESTID=111
L_PAYMENTREQUEST_0_NAME0=Books
L_PAYMENTREQUEST_0_AMT0=154.00
L_PAYMENTREQUEST_0_NUMBER0=ABC123
L_PAYMENTREQUEST_0_QTY0=2
L_PAYMENTREQUEST_0_NAME1=CDs
L_PAYMENTREQUEST_0_AMT1=50.00
L_PAYMENTREQUEST_0_NUMBER1=BY-Z4736
L_PAYMENTREQUEST_0_QTY1=3
PAYMENTREQUEST_0_SELLERPAYPALACCOUNTID=receivier@email.com
PAYMENTREQUEST_1_PAYMENTACTION=Sale
PAYMENTREQUEST_1_SHIPTONAME=Daffy Duck
PAYMENTREQUEST_1_SHIPTOSTREET=123 looney lane
PAYMENTREQUEST_1_SHIPTOSTREET2= Apt 7
PAYMENTREQUEST_1_SHIPTOCITY=Miami
PAYMENTREQUEST_1_SHIPTOSTATE=FL
PAYMENTREQUEST_1_SHIPTOZIP=33010
PAYMENTREQUEST_1_SHIPTOCOUNTRYCODE=US
PAYMENTREQUEST_1_AMT=494.20
PAYMENTREQUEST_1_ITEMAMT=428.00
PAYMENTREQUEST_1_SHIPPINGAMT=20.00
PAYMENTREQUEST_1_TAXAMT=46.20
PAYMENTREQUEST_1_CURRENCYCODE=USD
PAYMENTREQUEST_1_DESC=test EC payment
PAYMENTREQUEST_1_PAYMENTREQUESTID=222
L_PAYMENTREQUEST_1_NAME0=DVDs
L_PAYMENTREQUEST_1_AMT0=154.00
L_PAYMENTREQUEST_1_NUMBER0=ABC123
L_PAYMENTREQUEST_1_QTY0=2
L_PAYMENTREQUEST_1_NAME1=Computers
L_PAYMENTREQUEST_1_AMT1=40.00
L_PAYMENTREQUEST_1_NUMBER1=BY-Z4736
L_PAYMENTREQUEST_1_QTY1=3
PAYMENTREQUEST_1_SELLERPAYPALACCOUNTID=receivier@email.com 
```

# c# - 正则表达式字符串检索

> ID：15258333
> 
> 赞同：0
> 
> 时间：2013-03-06T21:22:37.297
> 
> 标签：c#, regex

我有这个字符串，我需要从字符串的最后提取 ID（IgnoreCase 为真）：

细绳：

```
[Test].Test Stuff].[Class].&[002 - My Hat]&[002-01 - Big Hat] 
```

我要提取的内容：

```
002-01 
```

到目前为止，我所拥有的是：

```
(?<=&\[).+(?=\s\-\s.+\]) 
```

但我得到了这个：

```
002 - My Hat]&[002-01 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:25:22.357

您需要在末尾添加一个输入结束锚`$`，并禁止匹配`[]`作为非空`.+`序列的一部分，如下所示：

```
(?<=&\[)([^\[\]]+)(?=\s\-\s[^\[\]]+\]$)
//       ^^^^^^^           ^^^^^^^   ^
//          |                 |      |
//        No square brackets here    |
//                                   |
//                        End of input marker here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:45:32.823

更简单的版本：

`(?<=\]\&\[)(\d+-\d+)`

解释：

`?<=`做一个[积极的 Lookbehind](http://www.regular-expressions.info/lookaround.html)。这意味着它将匹配 () 大括号内的字符，但不返回它们。我使用的这个 Positive Lookbehind 中的字符是`]&[`

然后它匹配`\d+`这意味着 1 到无穷大的连续数字，后跟一个连字符，然后是`-`一个`\d+`

此外，[http://regex101.com/r/iW4cP1](http://regex101.com/r/iW4cP1)用于玩同样的游戏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:31:19.197

如果字符串的格式始终相同，请`]&[`在正则表达式中使用最后一个，如下所示：

```
\]&\[([\d-]*).* 
```

如果数字总是跟随 ]&[，那应该可以解决问题

否则我认为这样的事情应该可以解决问题：

```
\[([\d-]+)[^\[]*\]$ 
```

所以后面跟着任何非[字符一直到最后一个]的一组数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:35:53.587

您的正则表达式实际上非常接近，如果您添加 ] 括号，您应该匹配您想要的。

```
(?<=\]&\[).+(?=\s\-\s.+\]) 
```

如果数字格式始终相同，则您实际上并不需要前瞻，而是可以匹配格式。

```
(?<=\]&\[)\d{3}-\d{2} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T21:50:03.877

如果您知道它位于字符串的末尾，为什么不使用该提示通知处理器呢？这是使用从右到左的正则表达式选项：

```
string data = @"[Test].Test Stuff].[Class].&[002 - My Hat]&[002-01 - Big Hat]";

string pattern = @"(?:\[)(?<Data>\d+-\d+)";

Console.WriteLine(Regex.Match(data, pattern, RegexOptions.RightToLeft).Groups["Data"].Value); // 002-01 
```

# python - “IOError：解码器 zip 不可用”：Ubuntu Python PIL

> ID：15258335
> 
> 赞同：11
> 
> 时间：2013-03-06T21:22:43.603
> 
> 标签：python, python-imaging-library, imaging

我正在尝试从以下位置运行示例 [heatmap.py：http://jjguy.com/heatmap/](http://jjguy.com/heatmap/)

```
#image.py
import heatmap
import random

if __name__ == "__main__":    
    pts = []
    for x in range(400):
        pts.append((random.random(), random.random() ))

    print "Processing %d points..." % len(pts)

    hm = heatmap.Heatmap()
    img = hm.heatmap(pts)
    img.save("classic.png") 
```

我得到这个错误：

```
Processing 400 points...
Traceback (most recent call last):
  File "/home/ec2usr/workspace/image/image.py", line 14, in <module>
    img.save("classic.png")
  File "/usr/local/lib/python2.7/dist-packages/PIL/Image.py", line 1437, in save
    save_handler(self, fp, filename)
  File "/usr/local/lib/python2.7/dist-packages/PIL/PngImagePlugin.py", line 572, in _save
    ImageFile._save(im, _idat(fp, chunk), [("zip", (0,0)+im.size, 0, rawmode)])
  File "/usr/local/lib/python2.7/dist-packages/PIL/ImageFile.py", line 481, in _save
    e = Image._getencoder(im.mode, e, a, im.encoderconfig)
  File "/usr/local/lib/python2.7/dist-packages/PIL/Image.py", line 399, in _getencoder
    raise IOError("encoder %s not available" % encoder_name)
IOError: encoder zip not available 
```

在 Ubuntu 12（64 位）系统上使用 Eclipse，使用 Python 2.7。

我在 /usr/lib 和 /usr/lib/x86_64-linux-gnu/ 中都找到了 libz.so。我已经尝试过这些解决方案，但没有结果：

[PIL 说它有“可用支持”但在保存文件时仍然给出 IOError](https://stackoverflow.com/questions/10626062/pil-says-it-has-support-available-but-still-gives-ioerror-when-saving-files)

[关于 PIL 错误 -- IOError: decoder zip not available](https://stackoverflow.com/questions/3544155/need-help-with-a-pil-error-ioerror-decoder-zip-not-available)

[IOError：“解码器 zip 不可用”在 Linux 上的 ReportLab 中使用 matplotlib PNG，适用于 Windows](https://stackoverflow.com/questions/9073455/ioerror-decoder-zip-not-available-using-matplotlib-png-in-reportlab-on-linux)

[http://www.foxhop.net/ubuntu-python-easy_install-pil-does-not-install-zlib-support](http://www.foxhop.net/ubuntu-python-easy_install-pil-does-not-install-zlib-support)

几天来我一直在为此烦恼，非常感谢任何人的帮助！

从 python-imaging 安装日志：

```
ubuntu@ip-10-241-17-21:/usr/lib$ sudo apt-get install python-imaging
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following packages were automatically installed and are no longer required:
  account-plugin-identica account-plugin-twitter gir1.2-messagingmenu-1.0
  hplip-data libgtkspell-3-0 libqt4-designer libqt4-help libqt4-scripttools
  libqt4-svg libqt4-test libqtassistantclient4 libsane-hpaio
  linux-headers-3.5.0-21 linux-headers-3.5.0-21-generic python-debtagshw
  python-lxml python-pexpect python-piston-mini-client python-qt4
  python-renderpm python-reportlab python-reportlab-accel python-sip
  software-center-aptdaemon-plugins ubuntu-extras-keyring
Use 'apt-get autoremove' to remove them.
Suggested packages:
  python-imaging-doc python-imaging-dbg
The following NEW packages will be installed:
  python-imaging
0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
Need to get 0 B/294 kB of archives.
After this operation, 996 kB of additional disk space will be used.
Selecting previously unselected package python-imaging.
(Reading database ... 189302 files and directories currently installed.)
Unpacking python-imaging (from .../python-imaging_1.1.7-4build1_amd64.deb) ...
Setting up python-imaging (1.1.7-4build1) ...
ubuntu@ip-10-241-17-21:/usr/lib$ 
```

安装日志（来自 Imaging 的 python install setup.py）：

```
PIL 1.1.7 SETUP SUMMARY
--------------------------------------------------------------------
version       1.1.7
platform      linux2 2.7.3 (default, Sep 26 2012, 21:51:14)
              [GCC 4.7.2]
--------------------------------------------------------------------
--- TKINTER support available
*** JPEG support not available
--- ZLIB (PNG/ZIP) support available
*** FREETYPE2 support not available
*** LITTLECMS support not available 
```

自我测试.py：

```
--------------------------------------------------------------------
PIL 1.1.7 TEST SUMMARY
--------------------------------------------------------------------
Python modules loaded from ./PIL
Binary modules loaded from /usr/local/lib/python2.7/dist-packages
--------------------------------------------------------------------
*** PIL CORE support not installed
*** TKINTER support not installed
--- JPEG support ok
--- ZLIB (PNG/ZIP) support ok
*** FREETYPE2 support not installed
*** LITTLECMS support not installed
-------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-18T23:39:09.317

我刚刚遇到了由 PIL（通过 python pip 安装程序安装）和通过 apt-get 安装的 python-imaging 包引起的类似问题。当我从 pip 中删除为我解决它的额外版本时。

如果您从源代码或使用 pip 安装 PIL，那么您可能会遇到同样的问题。

在构建 PIL 时，我还发现我必须将库链接到 /usr/lib。这可能会解决您上面的日志中不支持的消息。

```
sudo ln -s /usr/lib/x86_64-linux-gnu/libjpeg.so /usr/lib
sudo ln -s /usr/lib/x86_64-linux-gnu/libfreetype.so /usr/lib
sudo ln -s /usr/lib/x86_64-linux-gnu/libz.so /usr/lib 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-19T00:01:13.667

我记得在 64 位系统上安装 PIL 时，我得到了与 Kris 完全相同的解决方案。

但是现在我建议使用 Pillow（pip install 枕头）而不是 PIL。Pillow 只是 PIL 的一个分支，具有更频繁的发布和更少的问题，例如您遇到的问题。

如果您在 Ubuntu 上，我认为您需要在安装 PIL/Pillow**之前**安装 zlib1g-dev 和 libjpeg-dev ，以便获得对内置 jpeg/png 的支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-10T21:54:21.130

这对我来说非常有效：

```
apt-get install libjpeg62 libjpeg62-dev zlib1g-dev libfreetype6 libfreetype6-dev 
```

在 x86_64 中：

```
ln -s /usr/lib/x86_64-linux-gnu/libjpeg.so /usr/lib
ln -s /usr/lib/x86_64-linux-gnu/libfreetype.so /usr/lib
ln -s /usr/lib/x86_64-linux-gnu/libz.so /usr/lib 
```

在 i386 中：

```
ln -s /usr/lib/i386-linux-gnu/libz.so /usr/lib/
ln -s /usr/lib/i386-linux-gnu/libfreetype.so.6 /usr/lib/
ln -s /usr/lib/i386-linux-gnu/libjpeg.so /usr/lib/

pip install -U PIL --allow-external PIL --allow-unverified PIL
pip install -I pillow 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-20T04:58:07.117

即使我的 PIL 是最新的，我在 Ubuntu 12.04 上通过以下方式解决了这个问题：

```
pip uninstall PIL
pip install PIL 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-18T07:36:00.143

即使你测试

> **从 PIL 导入图像**

没关系，但保存/解码方法仍然存在错误。

你可以试试我的步骤：（根据我的情况，openerp 7 with ubuntu 13.10）

1.  删除python图像
2.  找到你的 libz
3.  重新安装 PIL

检查它[ht​​tp://febru.soluvas.com/2014/03/solved-openerp-7-ioerror-decoder-zip.html](http://febru.soluvas.com/2014/03/solved-openerp-7-ioerror-decoder-zip.html)

# sql-server - 将本地数据插入 SQL Server 临时表

> ID：15258336
> 
> 赞同：1
> 
> 时间：2013-03-06T21:22:45.750
> 
> 标签：sql-server, sql-server-2005, ms-access, odbc, ms-access-2007

我有一些使用临时表读取 ID 列表以执行更新的存储过程。我还有一个本地查询，其中包含我想传递给其中一个存储过程的 ID 列表。有没有办法做这样的事情？

```
INSERT INTO #MyBackendTempTable
SELECT ID
FROM MyLocalQuery 
```

我想我可以通过循环遍历 VBA 中的记录集来做到这一点，如果必须的话，我会这样做，但如果有一个明智的方法来做到这一点会更好。我知道 Access 可以进行直通查询，但据我所知，它们只能作用于服务器上的对象。有一些我不知道的简单方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:38:40.547

好吧，如果查询真的那么简单，并且您只有一组 ID（一列），您可以在前端构建一个逗号分隔的列表，然后将其传递给后端的存储过程并使用拆分它你最喜欢的拆分机制（[我有一个最喜欢的](http://www.sqlperformance.com/2012/07/t-sql-queries/split-strings)）。您的存储过程将是（假设先前在同一范围内创建了 #temp 表）：

```
CREATE PROCEDURE dbo.whatever
  @IDList VARCHAR(MAX)
AS
BEGIN
  SET NOCOUNT ON;
  INSERT #MyBackendTempTable(ID) SELECT Item FROM dbo.Split(@IDList);
END
GO 
```

在前端，您将构建一个逗号分隔的列表以传递给该参数。

或者，您可以使用基于 spid、应用程序实例、您拥有的某些密钥的永久表 - 假设您可以唯一标识每个用户。然后你会这样做：

```
INSERT dbo.MyBackEndPermanentTable(Session, ID)
  SELECT 'SessionSomething', ID
  FROM MyLocalQuery; 
```

# mysql - MySQL插入表和列

> ID：15258341
> 
> 赞同：0
> 
> 时间：2013-03-06T21:23:04.267
> 
> 标签：mysql, replace

我有一个从 xml 阅读器填充的临时表，然后替换为我的站点的最终生产表。现在列匹配，但我想在生产表中添加一个列，该列将被手动更新，并且在我们从临时表更新时不会被覆盖。

示例：临时表有列：

```
Name
Address
Phone 
```

生产表有：

```
Name 
Address 
Phone
Date 
```

目前我使用：

```
REPLACE INTO Tdata select * from temp_Tdata; 
```

如何在不更改当前日期列的情况下从临时表中提取数据。这些表有超过 25 列，所以如果可以的话，我宁愿不必列出所有列名。

谢谢你的帮助。

更新

```
REPLACE INTO Tdata (Name, Address, Phone) select (Name, Address, Phone) from temp_Tdata; 
```

不起作用，因为 Date 列被重置为默认值，丢失了对其进行的任何手动更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:26:49.153

**更新**解决方法`REPLACE`

```
REPLACE INTO Tdata (Name, Address, Phone, Date)
SELECT tt.Name, tt.Address, tt.Phone, t.Date
  FROM temp_Tdata tt LEFT JOIN 
       Tdata t ON tt.Name = t.Name; 
```

**[sqlfiddle](http://sqlfiddle.com/#!2/7b224/1)**

Now you can create a view that brings Date column to temp data

```
CREATE VIEW vw_temp_Tdata
AS
SELECT tt.Name, tt.Address, tt.Phone, t.Date
  FROM temp_Tdata tt LEFT JOIN 
       Tdata t ON tt.Name = t.Name; 
```

and then use it like this

```
REPLACE INTO Tdata 
 SELECT * FROM vw_temp_Tdata; 
```

**[sqlfiddle](http://sqlfiddle.com/#!2/05a71/1)**

**Original answer** was deleted since it won't work with `REPLACE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:28:26.187

```
UPDATE Tdata
SET Name = temp_TData.Name,
Address = temp_Tdata.Address,
Phone = temp_TData.Phone
WHERE Tdata.Name = temp_Tdata.Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:29:20.677

If I understand correctly, you need to:

1.  Add a column to your destination table
2.  Insert the data from your original table (which has more columns than the destination table *had*) into your destination table

If that's true, then you need to alter the destination table *before* updating it:

```
ALTER TABLE Tdata
    ADD COLUMN newColumn Varchar(50); -- Just an example 
```

Then you can update (or insert) the data.

# ios - 具有多个 .xcconfig 文件和 cocoapods 的复杂 Xcode 项目

> ID：15258343
> 
> 赞同：16
> 
> 时间：2013-03-06T21:23:09.677
> 
> 标签：ios, xcode, cocoapods

我正在开发一个 iOS 项目，不幸的是，我们必须使用的一些库有两个版本。一个用于调试的版本，一个用于生产的版本。无法使用生产库进行调试。并且同样不能使用调试库。在生产中。

为了解决这个问题，我们在项目中设置了多个目标（一个用于调试，一个用于生产）。这些目标使用单独的 .xcconfig 文件（App-Debug.xcconfig 和 App-Production.xcconfig）为每个目标定义：LIBRARY_SEARCH_PATHS、HEADER_SEARCH_PATHS 和 OTHER_LDFLAGS。

这一切都很好，但是手动跟踪我们所有的第三方依赖项变得很痛苦。因此，我们决定开始使用 CocoaPods 来管理我们的一些第三方依赖项。

但是由于这些“两个版本”的库，我们不能按预期使用 Pods.xcconfig，而是需要将其中的设置附加到我们自己的 App-Debug.xcconfig 和 App-Production.xcconfig 中。

我不确定执行此操作的正确方法，因为我尝试的所有操作似乎都无法编译，因为找不到我的 pod。

我们的 Pods.xcconfig：

```
ALWAYS_SEARCH_USER_PATHS = YES
HEADER_SEARCH_PATHS = ${PODS_HEADERS_SEARCH_PATHS}
LIBRARY_SEARCH_PATHS = "$(PODS_ROOT)/TestFlightSDK"
OTHER_LDFLAGS = -ObjC -lTestFlight -lz -framework SystemConfiguration -framework UIKit
PODS_BUILD_HEADERS_SEARCH_PATHS = "${PODS_ROOT}/BuildHeaders" "${PODS_ROOT}/BuildHeaders/AFNetworking" "${PODS_ROOT}/BuildHeaders/TestFlightSDK"
PODS_HEADERS_SEARCH_PATHS = ${PODS_PUBLIC_HEADERS_SEARCH_PATHS}
PODS_PUBLIC_HEADERS_SEARCH_PATHS = "${PODS_ROOT}/Headers" "${PODS_ROOT}/Headers/AFNetworking" "${PODS_ROOT}/Headers/TestFlightSDK"
PODS_ROOT = ${SRCROOT}/Pods 
```

应用调试.xcconfig：

```
#include "Config-XXX.xcconfig"
#include "Config-Tesseract.xcconfig"
#include "Config-AppMeasurement.xcconfig"
#include "Config-Libxml2.xcconfig"
#include "Config-Frameworks.xcconfig"

LIBRARY_SEARCH_PATHS = $(inherited) $(XXX_LIBRARY_SEARCH_PATH_DEBUG) $(TESSERACT_LIBRARY_SEARCH_PATH) $(APPMEASUREMENT_LIBRARY_SEARCH_PATH)

HEADER_SEARCH_PATHS = $(inherited) $(TESSERACT_HEADER_SEARCH_PATH) $(LIBXML2_HEADER_SEARCH_PATH) $(XXX_HEADER_SEARCH_PATH)

OTHER_LDFLAGS = $(inherited) -lz -lxml2 -lstdc++ -all_load -ObjC -lXXXLibrary $(APPLE_FRAMEWORKS) 
```

应用生产.xcconfig：

```
#include "Config-XXX.xcconfig"
#include "Config-Tesseract.xcconfig"
#include "Config-AppMeasurement.xcconfig"
#include "Config-Libxml2.xcconfig"
#include "Config-Frameworks.xcconfig"

LIBRARY_SEARCH_PATHS = $(inherited) $(XXX_LIBRARY_SEARCH_PATH_PRODUCTION) $(TESSERACT_LIBRARY_SEARCH_PATH) $(APPMEASUREMENT_LIBRARY_SEARCH_PATH)

HEADER_SEARCH_PATHS = $(inherited) $(TESSERACT_HEADER_SEARCH_PATH) $(LIBXML2_HEADER_SEARCH_PATH) $(XXX_HEADER_SEARCH_PATH)

OTHER_LDFLAGS = $(inherited) -lz -lxml2 -lstdc++ -all_load -ObjC -lXXXLibrary $(APPLE_FRAMEWORKS) 
```

配置-XXX.xcconfig：

```
XXX_LIBRARY_SEARCH_PATH_DEBUG = "$(SRCROOT)/External/XXX"
XXX_LIBRARY_SEARCH_PATH_PRODUCTION = "$(SRCROOT)/External/XXX/LibProd"

XXX_HEADER_SEARCH_PATH = "$(SRCROOT)/External/XXX/headers" 
```

我们可以看到 Pods.xcconfig 和我们自己的 App-Debug.xcconfig 设置了：LIBRARY_SEARCH_PATHS、HEADER_SEARCH_PATHS 和 OTHER_LDFLAGS。

我需要将 Pods.xcconfig 中声明的值附加到我们在 App-Debug.xcconfig 中声明的值上。

我们正在使用 Xcode 4.6 并为 iOS 4.3 构建。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-07T01:52:06.253

您的 podfile 可以支持这一点。你应该最终得到这样的东西

```
platform :ios, "5.0"
link_with ['App', 'App-Debug'] 

pod 'Shared-Pod'

target :App, :exclusive => true do
  pod 'Normal-Pod'
end

target :App-Debug, :exclusive => true do
  pod 'Debug-Pod'
end 
```

这将生成两个 xcconfig 文件，每个目标一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:55:34.810

`XXX_LIBRARY_PATH`不要使用两个目标，而是尝试在*配置*中定义不同的值（遗憾的是，在 GUI 中最简单）。如果您只有两个配置并且它们被适当命名，您甚至可以执行类似`XXX_LIBRARY_PATH = FooPath/$(CONFIGURATION)`.

一个目标配置不可能将属性附加到另一个目标配置；“继承”严格来说是 SDK → Project[Config] → Target[Config]。

# iphone - 选择时 UITableView 崩溃

> ID：15258345
> 
> 赞同：0
> 
> 时间：2013-03-06T21:23:15.990
> 
> 标签：iphone, uitableview, crash, nsfetchedresultscontroller

我有一个由 fetchedResultsController 驱动的简单表视图控制器，当我选择它时它经常崩溃，崩溃日志是这样的；

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0xc21eb7ad
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x3c0ce5d0 objc_msgSend + 16
1   UIKit                           0x3623c564 -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 404
2   UIKit                           0x3622138c -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1312
3   UIKit                           0x36238822 -[UITableView layoutSubviews] + 202
4   UIKit                           0x361f48c2 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 254
5   QuartzCore                      0x35fa050e -[CALayer layoutSublayers] + 210
6   QuartzCore                      0x35fa00b0 CA::Layer::layout_if_needed(CA::Transaction*) + 456
7   QuartzCore                      0x35fa0fd4 CA::Layer::layout_and_display_if_needed(CA::Transaction*) + 12
8   QuartzCore                      0x35fa09be CA::Context::commit_transaction(CA::Transaction*) + 234
9   QuartzCore                      0x35fa07d0 CA::Transaction::commit() + 312
10  QuartzCore                      0x35fa0634 CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 56
11  CoreFoundation                  0x343b793e __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 18
12  CoreFoundation                  0x343b5c34 __CFRunLoopDoObservers + 272
13  CoreFoundation                  0x343b5f8e __CFRunLoopRun + 742
14  CoreFoundation                  0x34329238 CFRunLoopRunSpecific + 352
15  CoreFoundation                  0x343290c4 CFRunLoopRunInMode + 100
16  GraphicsServices                0x37f07336 GSEventRunModal + 70
17  UIKit                           0x362452b4 UIApplicationMain + 1116
18  Introdex                        0x0011e538 0xa3000 + 505144
19  Introdex                        0x000a5a24 0xa3000 + 10788

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x3c5b75d0 kevent64 + 24
1   libdispatch.dylib               0x3c4f2d22 _dispatch_mgr_invoke + 806
2   libdispatch.dylib               0x3c4ee374 _dispatch_mgr_thread + 32

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x3c5b6e30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c5b6fd0 mach_msg + 48
2   CoreFoundation                  0x343b72b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x343b602c __CFRunLoopRun + 900
4   CoreFoundation                  0x34329238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x343290c4 CFRunLoopRunInMode + 100
6   WebCore                         0x3a328390 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x3c5200de _pthread_start + 306
8   libsystem_c.dylib               0x3c51ffa4 thread_start + 4

Thread 3:
0   libsystem_kernel.dylib          0x3c5b6e30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c5b6fd0 mach_msg + 48
2   CoreFoundation                  0x343b72b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x343b602c __CFRunLoopRun + 900
4   CoreFoundation                  0x34329238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x343290c4 CFRunLoopRunInMode + 100
6   Foundation                      0x34c4d5be -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
7   Foundation                      0x34cf0c40 -[NSRunLoop(NSRunLoop) run] + 76
8   Introdex                        0x0021924c 0xa3000 + 1532492
9   Foundation                      0x34cfa22c __NSThread__main__ + 968
10  libsystem_c.dylib               0x3c5200de _pthread_start + 306
11  libsystem_c.dylib               0x3c51ffa4 thread_start + 4

Thread 4 name:  com.apple.NSURLConnectionLoader
Thread 4:
0   libsystem_kernel.dylib          0x3c5b6e30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c5b6fd0 mach_msg + 48
2   CoreFoundation                  0x343b72b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x343b602c __CFRunLoopRun + 900
4   CoreFoundation                  0x34329238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x343290c4 CFRunLoopRunInMode + 100
6   Foundation                      0x34c76888 +[NSURLConnection(Loader) _resourceLoadLoop:] + 304
7   Foundation                      0x34cfa22c __NSThread__main__ + 968
8   libsystem_c.dylib               0x3c5200de _pthread_start + 306
9   libsystem_c.dylib               0x3c51ffa4 thread_start + 4

Thread 5 name:  com.apple.CFSocket.private
Thread 5:
0   libsystem_kernel.dylib          0x3c5c7594 __select + 20
1   CoreFoundation                  0x343bb474 __CFSocketManager + 676
2   libsystem_c.dylib               0x3c5200de _pthread_start + 306
3   libsystem_c.dylib               0x3c51ffa4 thread_start + 4

Thread 6 name:  JavaScriptCore::BlockFree
Thread 6:
0   libsystem_kernel.dylib          0x3c5c708c __psynch_cvwait + 24
1   libsystem_c.dylib               0x3c518afc _pthread_cond_wait + 644
2   libsystem_c.dylib               0x3c518870 pthread_cond_timedwait + 40
3   JavaScriptCore                  0x382fddf6 WTF::ThreadCondition::timedWait(WTF::Mutex&, double) + 102
4   JavaScriptCore                  0x38410532 JSC::BlockAllocator::blockFreeingThreadMain() + 78
5   JavaScriptCore                  0x38423030 WTF::wtfThreadEntryPoint(void*) + 12
6   libsystem_c.dylib               0x3c5200de _pthread_start + 306
7   libsystem_c.dylib               0x3c51ffa4 thread_start + 4

Thread 7 name:  JavaScriptCore::Marking
Thread 7:
0   libsystem_kernel.dylib          0x3c5c708c __psynch_cvwait + 24
1   libsystem_c.dylib               0x3c518afc _pthread_cond_wait + 644
2   libsystem_c.dylib               0x3c522cf8 pthread_cond_wait + 36
3   JavaScriptCore                  0x383a36dc JSC::SlotVisitor::drainFromShared(JSC::SlotVisitor::SharedDrainMode) + 140
4   JavaScriptCore                  0x383a3620 JSC::MarkStackThreadSharedData::markingThreadMain() + 140
5   JavaScriptCore                  0x38423030 WTF::wtfThreadEntryPoint(void*) + 12
6   libsystem_c.dylib               0x3c5200de _pthread_start + 306
7   libsystem_c.dylib 
```

有人可以解释一下这个崩溃日志的含义。我无法正确阅读它，也不知道这实际上意味着什么。如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:36:34.003

不看你的代码，很难知道你哪里出错了。

但据我所知，如果您能够成功显示 Table 上的数据并在单击特定行时崩溃。以下是一些可能性。

1）。确保您已在控制器的头文件中声明 UITableViewDelegate。

解决方案：确保你有这个（在 .h 文件中）

```
@interface FavViewController : UIViewController<UITableViewDataSource,UITableViewDelegate> 
```

2）。忘记将委托与文件所有者联系起来

解决方案：打开 Layout 的 XIB 文件 --> 选择 UITableView --> 在 Connection Inspector --> 将委托拖到文件的所有者（如下图所示）

![在此处输入图像描述](../Images/63ab03898f5c0e2944b31c31957644ff.png)

您可以通过在 .m 文件的 viewDidLoad 方法中以编程方式执行此操作来实现相同的目的

```
favourite_tbl.delegate=self;//favourite_tbl is instance of myTableView 
```

3）。你的**didSelectRowAtIndexPath**方法（点击行）应该像

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    selectedIndex = indexPath.row;

    NSLog(@"you have selected %d",selectedIndex);

} 
```

如果您对此有任何问题，请随时给我留言。

# c++ - 嵌套模板 typedef - 类型定义

> ID：15258346
> 
> 赞同：0
> 
> 时间：2013-03-06T21:23:20.043
> 
> 标签：c++, function, templates, nested, typedef

我正在尝试编译下面的代码。

文件 Class12.h

```
template <class T1>
class class1
{
public:
typedef T1 Type1;
void class1Method();
};

template <class T1>
void class1<T1>::class1Method()
{
}

template <class T1, class T2>
class class2
{
public:
typedef T2 Type2;
void class2Method();
};

template <class T1, class T2>
void class2<T1,T2>::class2Method()
{
  typedef typename::class2<typename class1<T1>::Type1, T2> Type3;
} 
```

文件类.h

```
#include "class12.h"

template<>
class class2<int,double>
{
}; 
```

但是我收到以下错误：

```
g++ -g -c class.h -o class.o
In file included from class.h:1:
class12.h: In member function `void class2<T1, T2>::class2Method()':
class12.h:27: error: expected nested-name-specifier
class12.h:27: error: expected init-declarator before "Type3"
class12.h:27: error: expected `,' or `;' before "Type3"
make: *** [class.o] Error 1 
```

有人可以帮我吗？

非常感谢您提前抽出时间。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:26:10.267

好吧，编译器非常明确：`class1`是一个类模板，所以它需要模板参数。你这里没有：

```
typedef typename class2<typename class1::Type1> Type3;
          //                           ^ here! 
```

你需要某种形式的东西

```
typedef class2<typename class1<T>::Type1> Type3; 
```

`T`大概*在* 哪里`T2`。请注意，不需要第一个`typename`.

与您之前的问题一样，`typedefs`应该是`public`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:29:54.240

在这一行：

```
typedef typename class2<typename class1::Type1> Type3; 
```

您没有为`class1<>`类模板提供任何模板参数。`typename`此外，除非您有一个合格的从属名称，否则您不需要关键字。您是否拥有一个取决于您要如何实例化`class1<>`.

此外，如果您想将`class1Method()`and`class2Method()`作为 and 的成员函数`class1`，`class2`您应该使用以下语法：

```
template <class T1>
class class1
{
    typedef T1 Type1;
    void class1Method();
};

template <class T2>
void class1<T2>::class1Method()
//   ^^^^^^^^^^^^
{
} 
```

**更新：**

编辑后，您问题中的代码还有一个问题：成员函数`class2`内部的 名称`class2Method()`是指函数所属的类，*它*是`class2`. 要引用`class2`类*模板*，您可以使用它所属的命名空间（在本例中为全局命名空间）来限定名称：

```
typedef typename ::class2<typename class1<T1>::Type1, T2> Type3;
//               ^^ 
```

另外，不要忘记为类的成员提供正确的访问级别，否则您将无法从其成员函数之外访问它们：对于`class`es，默认值为`private`. 我认为你应该`public`在这种情况下使用。例如：

```
template <class T1>
class class1
{
public: // <== MAKE THE MEMBERS AND TYPE DEFINITIONS ACCESSIBLE TO 
        //     FUNCTIONS WHICH ARE NOT MEMBER FUNCTIONS OF THIS CLASS
    typedef T1 Type1;
    void class1Method();
}; 
```

# c++ - 在数组 C++ 中添加一个对象

> ID：15258349
> 
> 赞同：-2
> 
> 时间：2013-03-06T21:23:31.043
> 
> 标签：c++, arrays, object

我有以下结构：

```
struct Photo{
    char name[30];          
};

struct List {
    Element *data;
    int count;
    int capacity;
}; 
```

和`typedef Photo* Element;`

另外，我有一个“List”类型的数组：`List *list = new List[100];`和一个“Photo”类型的元素：`Photo *e = new Photo;`

我想在数组列表的开头插入元素“*e”。我正在使用以下 C++ 语句： `list -> data[0] = e;`

但是，我最终得到了`Segmentation fault: 11`错误。

我是 C++ 新手，我需要知道如何将元素“e”保存在数组“list”的开头

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:28:35.643

`list -> data[0] = e;`没有定义。

你可能打算做的是`list[0].data = e;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:29:22.237

我不使用 C++ 编写代码，但如果我理解的话，您正在尝试将照片添加到列表数组中。您只需将 List 添加到您的 List 数组中。

# php - Zend Mail Imap - 将电子邮件复制到已发送文件夹

> ID：15258353
> 
> 赞同：0
> 
> 时间：2013-03-06T21:23:44.553
> 
> 标签：php, email, zend-framework, imap

我正在发送电子邮件，但它们没有出现在我的已发送文件夹中。我明白为什么。

我拥有所有 IMAP 信息，如何将电子邮件副本推送到已发送文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-01T13:28:35.787

发布@Wrikken 的评论作为答案，因为它可能是最好的答案（基于最初提供的有限信息），并且有人可能不会将其视为评论。

```
Zend\Mail\Storage\Imap::appendMessage() 
```

# angularjs - angularJS中的更改事件

> ID：15258357
> 
> 赞同：0
> 
> 时间：2013-03-06T21:23:58.727
> 
> 标签：angularjs

我有一个非常简单的应用程序：

```
app = angular.module("GetTravelTime", ["ngResource"])

app.config ($routeProvider) ->
  $routeProvider.when("/",
    {
      templateUrl: "assets/pages/partials/home_controls.html"
      controller: HomeCtrl
    }
  )

@HomeCtrl = ($scope) ->
  $scope.data = {
    address: ""
  }

  $scope.change = (event) ->
    console.log $scope.data.address 
```

home_controls.html

```
<section class="controls" ng-controller="HomeCtrl">
<input type="text" placeholder="Location name or Post Code" ng-model="data.address" ng-change="change()"/>
</section> 
```

我想要做的是当输入字段改变时我想触发一个事件，但只有当用户完成输入时。此时，每次击键都会触发更改事件。我想要它，所以当他们完成输入后会触发事件。

在 jquery 中，我会做一些类似点击开箱即用的事情。有没有一种巧妙的方法可以在角度上做到这一点？

# windows-7 - 启动进入安全模式Win7时运行程序

> ID：15258358
> 
> 赞同：1
> 
> 时间：2013-03-06T21:23:59.743
> 
> 标签：windows-7, batch-file, safe-mode

安全方面的尝试。

为了让我的电脑在被盗时无法使用，我有一个批处理文件，它在启动时测试我的笔式驱动器上的文件，如果没有找到，它会切换到虚拟背景并关闭窗口。如果我的笔式驱动器存在，它会备份我的关键文件并正常进行。

我想在启动到安全模式时做同样的事情。我找到了我认为需要的 Reg 密钥，但是如何告诉它运行 checkpen.bat ？

HKLM\系统\CurrentControlSet\Control\SafeBoot

伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:29:40.637

您需要执行以下操作

1.) 将批处理作业安装为服务。步骤可以在[这里找到](http://support.microsoft.com/kb/137890)

2.) 输入`HKLM\SYstem\CurrentControlSet\Control\SafeBoot\Minimal`服务名称。添加默认列并将其设置为“服务”

希望这可以帮助。

# graphviz - 有没有更好的方法来指向子图？

> ID：15258362
> 
> 赞同：0
> 
> 时间：2013-03-06T21:24:23.980
> 
> 标签：graphviz, dot

我想指向一个子图，其中线停在边缘。据我了解，我可以选择子图中的任何节点。有没有办法创建一个可以指向的不可见节点？

```
 digraph G {
    compound=true;
    subgraph cluster_a{ 
        label="node1";
        node1;
    }

    node2->node1 [lhead=cluster_a];
 } 
```

理想情况下 node1 不应该是可见的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:35:33.367

您可以简单地使用`style=invis`：

```
node1 [style=invis]; 
```

# ruby - 将字符分组以形成字符串

> ID：15258366
> 
> 赞同：2
> 
> 时间：2013-03-06T21:24:33.867
> 
> 标签：ruby, string, char

我刚开始学习 Ruby，无法弄清楚这一点。假设我有一个数组：

```
s = ["p", "e", "n", "c", "i", "l"] 
```

如何更改数组以使字符形成如下单词：

```
t = ["pencil"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:26:20.370

```
1.9.3-p194 :003 > s = ["p", "e", "n", "c", "i", "l"]
=> ["p", "e", "n", "c", "i", "l"] 
1.9.3-p194 :004 > t = [s.join]
=> ["pencil"] 
```

# knockout.js - 如何检测鼠标点击，在敲除的下拉列表框中输入键或选项卡项

> ID：15258367
> 
> 赞同：2
> 
> 时间：2013-03-06T21:24:43.933
> 
> 标签：knockout.js, knockout-mvc

当用户执行以下操作之一时，从下拉列表框中获取所选项目值的最佳方法是什么；

点击项目上的 tab 键，

按回车键或

鼠标单击该项目。

我是否必须为每个事件创建一个 javascript 事件处理程序，或者是否有一种通过淘汰赛来完成的好方法。

有没有我可以看的好的 jsfiddle 示例？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:01:29.833

您可以使用捕获这些事件的自定义绑定。

```
ko.bindingHandlers.tabEnterClick = {
    init: function(element, valueAccessor) {
        $(element).click(function() {
            valuAccessor()();
        }).keydown(function(event) {
            if (event.which == 13 /*enter*/ || event.which == 9 /*tab*/) {
                valuAccessor()();
            }
        }
    }
}; 
```

但是，如果您只想从下拉列表中了解所选项目，那么`value`绑定就可以了。

# javascript - 使用 jQuery 移动元素

> ID：15258374
> 
> 赞同：1
> 
> 时间：2013-03-06T21:25:13.880
> 
> 标签：javascript, jquery

我有一个带有可扩展链接的侧边栏。当它们扩展超过某个点时，我想将一些文本从一个 div 移动到另一个（红色到蓝色）。当我展开和折叠链接时，在某些时候，我计划移动的文本消失了。

有两个问题：

1.  展开时文本应移动到蓝色 div，折叠时返回红色
2.  文本完全消失，没有移动到另一个 div。

这是我的html：

```
<div id="sidebar">
  <div>
    <a href="#" class="cal-title">Test 1</a>
    <p class="cal-desc">Lorem ipsum</p>
  </div>
  <div>
    <a href="#" class="cal-title">Test 2</a>
    <p class="cal-desc">Lorem ipsum</p>
  </div>
  <div>
    <a href="#" class="cal-title">Test 3</a>
    <p class="cal-desc">Lorem ipsum</p>
  </div>
</div>

<div class="red">
    <p>Just some random text</p>
</div>

<div class="blue">
</div> 
```

这是 jQuery/js 代码：

```
$(document).ready(function() {  
    var isExtended = false;
    function placeTiles() {
        // When to move content from .red to .blue
        if ($('#sidebar').height() > 150 && isExtended == false) {
            $('.red').appendTo($('.blue'));
            isExtended = true;
        // When to move content from .red to .blue
        } else if ($('#sidebar').height() <= 150 && isExtended == true) {
            $('.blue').appendTo($('.red'));
            isExtended = false;
        }
    }

  $('.cal-desc').hide();
  // Check how thing are on init  
  placeTiles();

  $('.cal-title').click(function() {
    $(this).siblings('.cal-desc').toggle();
    placeTiles();
  });
}); 
```

这是我的[jsfiddle](http://jsfiddle.net/awden/2/)的链接。

我真的是 javascript 的新手，所以欢迎对我的代码提出任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:30:36.640

看到这个更新的小提琴：http: [//jsfiddle.net/awden/3/](http://jsfiddle.net/awden/3/)

问题是您将整个元素附加到元素`.red`的内部`.blue`

`$('.red').appendTo($('.blue'))`

相反，您想附加 to 的内容*，*反之亦然。换句话说，你想要这样的东西：`.red``.blue`

`$('.red > p').appendTo($('.blue'))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:31:08.960

我想你的意思是再次移动from`<p>`和back 。为此，只需添加到每个选择器，如下所示：`.red``.blue``> p`

```
$('.red > p').appendTo($('.blue')); 
```

和

```
$('.blue > p').appendTo($('.red')); 
```

# git - Git将一个分支合并到另一个分支是双向合并吗？

> ID：15258375
> 
> 赞同：36
> 
> 时间：2013-03-06T21:25:17.723
> 
> 标签：git, merge, git-merge, meld

我的 git 仓库看起来像这样：

```
 _ branch_a
        /
master /
        \_ branch_b 
```

现在我想将 branch_b 合并到 branch_a 中，**而不是**将任何一个分支合并到 master 中。

所以我做了

```
git checkout branch_a
git merge branch_b 
```

git 去发现了一些冲突。

当我`git mergetool`使用`meld`控制台上的内容时

```
 {local}: modified file
 {remote}: modified file 
```

和一个仅显示 LOCAL 和 REMOTE 的窗口。

我想知道的是：

1.  为什么没有显示 master 中的共享基础？

2.  在 LOCAL 和 REMOTE 之间，我应该编辑哪一个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T21:33:07.917

如果将分支 A 合并到分支 B 中，那么您得到的冲突来自两个分支之间的差异，而不是与 master 的差异。但是在 A 或 B 中执行`git diff`会给你与 mastere 的差异，因为它是祖先

通常，**本地**分支应该是您要**合并**的分支，而**远程**分支应该是您要**合并**的分支。无论如何，在您的计算机中，您将只有一份文件副本，因此只需修改它

# security - 你能安全地将凭据从 Flash 播放器传递到 Wowza 服务器吗？

> ID：15258379
> 
> 赞同：1
> 
> 时间：2013-03-06T21:25:32.397
> 
> 标签：security, ldap, video-streaming, credentials, wowza

我们希望要求对 LDAP 目录进行身份验证，以便从我们的 Wowza Flash 服务器访问流式视频内容。凭证最好通过 Flash 播放器本身输入。

Wowza 论坛帖子建议使用 MySQL 数据库身份验证后端代码示例作为开发 LDAP 身份验证后端的起点。并且存在修改现有 Flash 播放器以在播放时向用户质询凭据的示例。但是我发现的所有示例都显示了在连接字符串中作为查询字符串参数传递的凭据，例如：

`netconnection.connect("rtmp://[wowza-address]/[app-name]?user1&pass1");`

[本文](http://www.wowza.com/forums/showthread.php?17122-RTMP-Authentication-client-support)提出了一种更复杂的解决方案来避免明文传递凭据，包括在流式传输之前进行身份验证、设置专门为重新身份验证而设计的 cookie、在 Flash 播放器中获取 cookie 并将其传递给 Wowza。

有没有人见过这样的解决方案，它可以通过安全连接传递 LDAP 身份验证的凭据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T14:14:41.693

为您的 Wowza 服务器设置 SSL 并将您的 URI 更改为读取

```
rtmpe://.... 
```

然后你可以使用你描述的方法。您在没有 SSL 的情况下尝试的任何操作都容易受到中间人攻击。

# java - XSLT 解析带有转义字符和非转义字符（< 和 <）的字符串

> ID：15258384
> 
> 赞同：2
> 
> 时间：2013-03-06T21:26:07.427
> 
> 标签：java, html, xml, xslt, xslt-1.0

在 XSLT 1.0 中，处理这个 xml 元素的最佳方式是什么

```
<Product>This is a product. &lt; and its price is < 10</Product> 
```

请注意，“小于号”表示了两次。即作为`'&lt;' and '<'.`

为了逃避`<`角色，我可以这样做

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" method="html" indent="yes" />
<xsl:template match="/">
  <html>
  <body>
    <table border="1">
      <tr>
        <th>Product</th>
      </tr>
      <tr>
        <td><xsl:value-of select="Product" disable-output-escaping="yes" /></td>
      </tr>
    </table> 
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

*   如果我将 disable-output-escaping 设置为“yes”，则`<`字符会正确显示，但会`"&lt;"`被完全删除。
*   如果我将禁用输出转义设置为“否”，则该`<`字符会导致解析异常。

我能做些什么来允许两者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:40:56.540

总的来说，我认为在 XSLT 1.0 中处理您的输入的最佳方式是使用其他一些工具将您的输入转换为 XML，然后正常处理它。XSLT 处理器在面对非 XML 输入时的行为往往是不稳定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:07:16.407

简单的答案（正如其他人所暗示但没有直接说的！）是输入不是 XML。XSLT 根本无法处理该输入 - 您将需要对其进行预处理或修复生成它的任何系统，以便它生成实际的 XML 而不是*看起来像*XML 的东西！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:37:23.780

我认为第一种方法 ( `disable-output-escaping="yes"`) 是唯一的方法。否则你会得到一个错误，这是不可能的。

您必须弄清楚如何防止（或修补）实体解析（`&lt;`已解决并替换）。

# core-data - 使用属性获取一组 NSManagedObjects

> ID：15258385
> 
> 赞同：0
> 
> 时间：2013-03-06T21:26:09.043
> 
> 标签：core-data, distinct, nsfetchrequest

如何通过请求检查特定属性来获取一组唯一的托管对象。

例如，一些人员对象，我想检索所有唯一名称，每个唯一名称的一个托管对象，按名称排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:35:46.017

使用这样的请求怎么样

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Person" inManagedObjectContext:managedObjectContext];
request.entity = entity;
request.propertiesToFetch = [NSArray arrayWithObject:[[entity propertiesByName] objectForKey:@"name"]];
request.returnsDistinctResults = YES;
request.resultType = NSDictionaryResultType;

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
[request setSortDescriptors:[NSArray arrayWithObject:sortDescriptors]];

NSError *error = nil;
NSArray *distinctResults = [managedObjectContext executeFetchRequest:request error:&error];
// Use distinctResults 
```

试着让我知道。

PS 代码已启用 ARC。如果您不使用它，请`release`在必要时致电。

# r - 如果包已经加载，那么在函数中需要一个包有什么影响？

> ID：15258398
> 
> 赞同：15
> 
> 时间：2013-03-06T21:26:36.763
> 
> 标签：r, require

在将非常频繁地调用的函数中包含`library`/语句是否有任何不利影响？`require`

使用的时间似乎可以忽略不计，但我每隔几分钟就调用一次函数，我想知道重复`require`调用是否有任何缺点？
*请注意，该功能只是个人实用程序，不会被共享。即，我是唯一使用它的人*

顺便说一句，任何关于为什么`library`慢一半的见解`require`？我的印象是它们是同义词。

```
 WithREQUIRE <- function(x) {
    require(stringr)
    str_detect(x, "hello")
  }

  WithLIBRARY <- function(x) {
    library(stringr)
    str_detect(x, "hello")
  }

  Without <- function(x) {
    str_detect(x, "hello")
  }

  x <- "goodbye"

  library(rbenchmark)
  benchmark(WithREQUIRE(x), WithLIBRARY(X), Without(x), replications=1e3, order="relative")

  #            test replications elapsed relative user.self sys.self
  #      Without(x)         1000   0.592    1.000     0.262    0.006
  #  WithREQUIRE(x)         1000   0.650    1.098     0.295    0.015
  #  WithLIBRARY(X)         1000   1.359    2.296     0.572    0.024 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T22:06:44.457

`require`检查包是否已经加载（在搜索路径上）

使用

```
loaded <- paste("package", package, sep = ":") %in% search() 
```

并且只有在这样的情况下才会继续加载它`FALSE`

`library`包括一个类似的测试，但当它是 TRUE 时会做更多的`stuff`事情（包括创建可用包的列表。

`require`继续使用`tryCatch` 对 library 的调用并将创建一条 message 。

因此，单个调用`library`或`require`当一个包不在搜索路径上时可能会导致`library`更快

```
system.time(require(ggplot2))
## Loading required package: ggplot2
##   user  system elapsed 
##   0.08    0.00    0.47 
detach(package:ggplot2)
system.time(library(ggplot2))
##   user  system elapsed 
##   0.06    0.01    0.08 
```

但是，如果包已经加载，那么正如您所展示的那样，`require`它会更快，因为它除了检查包是否已加载之外没有做更多的事情。

最好的解决方案是创建一个导入的小包`stringr`（或至少`str_extract`从 stringr

# sql-server - 检查约束表达式错误

> ID：15258400
> 
> 赞同：0
> 
> 时间：2013-03-06T21:26:48.467
> 
> 标签：sql-server, constraints, check-constraints

我正在尝试使用 SQL Server Management Studio 2012 的向导创建一个检查约束，以仅在未启用元组时允许字段为空，但我得到一个`Error validating constraint`.

我试图使用的表达式是这样的：

```
TransactionalMerchantId IS NOT NULL
OR
(TransactionalMerchantId IS NULL AND Enabled IS false) 
```

我的桌子是这样设计的：

![餐桌商户](../Images/2dcb36f231f221c8a8ae5db1b9ca740c.png)

有人可以帮我弄清楚为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:33:16.277

尝试：

```
TransactionalMerchantId IS NOT NULL
OR
(TransactionalMerchantId IS NULL AND Enabled = 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:31:52.380

`is`仅用于比较`null`。尝试：

```
[Enabled] = false 
```

# php - “警告：无法修改标头信息 - 标头已发送”错误，php 中没有空格

> ID：15258403
> 
> 赞同：0
> 
> 时间：2013-03-06T21:26:53.180
> 
> 标签：php, sql, database, header, warnings

运行代码时仍然出现该错误。这是我的代码。我也删除了所有空格。我的 html 表单转到我的 php (action="lib/login.php") 文件以检查用户是否存在。如果存在，则重定向。dbconnect.php 只是连接到我的数据库。谁能帮忙？

文件夹布局：
lib
-dbconnect.php
-login.php（代码位于下方）
index.html

```
<?php
 require_once("dbconnect.php"); 

 $loginuser = $_POST['username'];
 $loginpw = $_POST['password']; 
 $usertable = "Users";
 $users="Username";
 $pw="Password";
 $query = "SELECT $users, $pw FROM $usertable WHERE $users='$loginuser' AND $pw='$loginpw'";           
 $result = mysql_query($query);
 $num_rows = mysql_num_rows($result);                                  
 if (!$result) {
    die('Invalid query: ' . mysql_error());
}

 if ($num_rows>0) {
    header("Location:../index.html");
    exit();       
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:33:49.900

如果您在完成某些输出后尝试发送 HTTP 标头，则会出现此消息。这是因为在 HTTP 中，首先出现的是标头，然后是正文。随着输出进入正文，输出后无法再发送标头。

由于您的代码中没有使用或使用任何输出函数，因此可以通过以下方式生成`echo`输出`print`

1.  PHP 错误信息
2.  开场前的内容`<?php`

* * *

到 1：

这`ob_*`组函数是捕获所有输出脚本的好方法，无论这是错误消息还是常规输出。因此，您可以添加以下行：

```
ob_start(); 
```

直接在开始`<?php`标签之后。

然后在调用之前`header()`添加：

```
if(ob_get_size() > 0) {
    // there was an error, display it and exit
    ob_end_flush();
    die();
} 
```

请注意，在生产环境中，您应该完全禁用错误消息的显示，因为它们可能包含敏感信息。您可以通过将 php.ini 中的 display_errors 设置为 0 或按脚本执行以下操作：

```
ini_set('display_errors', 0); 
```

* * *

至 2：

假设您发布的代码是 php 文件的完整内容（之前没有空格或空行`<?php`），则可能是您的 UTF-8 BOM 字符有问题。BOM 表示字节顺序标记，内部使用 utf-8 编码。它在文本编辑器中不可见。:)

要删除它，有几种解决方案......将为您搜索一个...... [http://www.w3.org/International/questions/qa-byte-order-mark.en.php](http://www.w3.org/International/questions/qa-byte-order-mark.en.php)

# c# - 在 asp.net 中报告的建议

> ID：15258405
> 
> 赞同：1
> 
> 时间：2013-03-06T21:27:03.510
> 
> 标签：c#, asp.net, report

我正在 asp.net (webforms) 中开发一个系统，用户可以在其中登录并查看他们的报告。我在我的报告中使用 RDL，但现在我想在报告更具动态性时使用另一种技术，就像这样：

[http://ap.demo.qlikview.com/QvAJAXZfc/opendoc.htm?document=qvdocs/Plant%20Operations.qvw&host=Demo11&anonymous=true](http://ap.demo.qlikview.com/QvAJAXZfc/opendoc.htm?document=qvdocs/Plant%20Operations.qvw&host=Demo11&anonymous=true)

但我需要一项免费技术，这必须与我在 asp.net 中的项目一起使用。我能用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:03:14.007

我玩过 Crystal Reports 或 SQL Reports 之类的报告系统，发现它们有一个学习曲线，但也很僵化和不灵活，或者生成可怕的 HTML。

ASP.NET MVC 可用作出色的报告系统，方法如下：

1.  可以选择使用 a`VirtualPathProvider`来允许您将 MVC`.aspx`文件存储在数据库中。
2.  有一个带有动作“GenerateReport”的控制器类，它只创建一个 EF 上下文/存储库对象甚至一个原始数据库连接并将其作为对象传递给视图，没有其他模型。
3.  打破MVC“视图中没有数据访问逻辑”的规则！您的视图（在`.aspx`文件中）应该有一个`<% %>`区域，该区域通过运行查询和其他内容来执行所有报告生成逻辑。
4.  对于图形和图表之类的东西，使用 RESTful 图表生成库，您也可以编写自己的。这基本上意味着报告不是生成静态图像文件并将其存储在某处并将路径放入`<img src="">`元素中，而是这样做：`<img src="RestfulImage.ashx?line1={1.2,4.6,8...." />`. Google 实际上有一项您可以使用的服务：[https ://developers.google.com/chart/image/docs/making_charts](https://developers.google.com/chart/image/docs/making_charts)

因此，每个报告都是一个`.aspx`文件，它被赋予一个数据访问对象，然后它直接查询并自己生成报告。显然，这不适用于需要很长时间才能构建的报告（但这通常是不良数据库设计或缺乏索引的症状），但如果您的要求很简单（即`SELECT`呈现给的一堆 SQL 查询`<table>`和一些图表一起去）那么这种方法效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:42:27.277

您可以将 SAP CRYSTAL REPORTS 用于您的报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T12:51:20.887

首先，选择您要使用的报告引擎... Crystal Reports、DevExpress Reporting、Telerik Reporting、ComponentOne ActiveReports 是 Microsoft SSRS 之外的主要参与者。根据您要“嫁给”哪种工具来决定，因为创建报告可能会很痛苦，也可能很容易，这取决于您为工作选择的工具。

一旦你有了它，选择适合你情况的服务器软件。Crystal 服务器（包括 SAP Crystal Server、VersaReports ReportServer 等）有多种选择，其他引擎只有少数选择。

# haskell - 管道的上游类型参数的真正好处是什么？

> ID：15258406
> 
> 赞同：10
> 
> 时间：2013-03-06T21:27:08.013
> 
> 标签：haskell, conduit, haskell-pipes

我试图了解管道概念的不同实现之间的差异。*导管*和*管道*之间的区别之一是它们如何将管道融合在一起。*导管*有

```
(>+>) :: Monad m
      => Pipe l a b r0 m r1 -> Pipe Void b c r1 m r2 -> Pipe l a c r0 m r2 
```

而*管道*有

```
(>->) :: (Monad m, Proxy p)
      => (b' -> p a' a b' b m r) -> (c' -> p b' b c' c m r) -> c' -> p a' a c' c m r 
```

如果我理解正确，则使用*管道*，当两个管道中的任何管道停止时，将返回其结果并停止另一个。使用*管道*，如果左管道完成，其结果将向下游发送到右管道。

我想知道，*管道*方法的好处是什么？我希望看到一些示例（最好是真实世界），使用管道和 很容易实现*，*但`>+>`使用*管道*和`>->`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T22:23:35.523

当前更容易实现的经典示例`conduit`是处理来自上游的输入结束。例如，如果你想折叠一个值列表并将结果绑定到管道中，如果没有`pipes`在`pipes`.

事实上，这正是即将推出的`pipes-parse`库所要解决的问题。它`Maybe`在上面设计了一个协议，`pipes`然后定义了方便的函数，用于从上游绘制尊重该协议的输入。

例如，您有一个`onlyK`函数，它接受一个管道并将所有输出包装在`Just`其中，然后以 a 结束`Nothing`：

```
onlyK :: (Monad m, Proxy p) => (q -> p a' a b' b m r) -> (q -> p a' a b' (Maybe b) m r) 
```

您还具有该`justK`函数，该函数定义了一个函子，`Maybe`从不知道的管道到知道的管道，以`Maybe`实现向后兼容性

```
justK :: (Monad m, ListT p) => (q -> p x a x b m r) -> (q -> p x (Maybe a) x (Maybe b) m r)

justK idT = idT
justK (p1 >-> p2) = justK p1 >-> justK p2 
```

然后，一旦你有了一个`Producer`尊重该协议的协议，你就可以使用各种各样的解析器来`Nothing`为你抽象检查。最简单的是`draw`：

```
draw :: (Monad m, Proxy p) => Consumer (ParseP a p) (Maybe a) m a 
```

如果上游输入不足，它会检索类型的值`a`或在代理转换器中失败。`ParseP`您也可以一次取多个值：

```
drawN :: (Monad m, Proxy p) => Int -> Consumer (ParseP a p) (Maybe a) m [a]

drawN n = replicateM n draw  -- except the actual implementation is faster 
```

...以及其他几个不错的功能。用户实际上根本不需要直接与输入信号的结尾进行交互。

通常当人们要求处理输入结束时，他们真正想要的是解析，这就是为什么`pipes-parse`将输入结束问题作为解析的子集。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T05:15:13.510

根据我的经验，上游终结器的实际好处非常渺茫，这就是为什么它们在此时对公共 API 隐藏的原因。我想我只在一段代码中使用过它们（wai-extra 的多部分解析）。

在最一般的形式中，管道允许您生成输出值流和最终结果。当您将该 Pipe 与另一个下游 Pipe 融合时，该输出值流将成为下游的输入流，而上游的最终结果将成为下游的“上游终结者”。所以从这个角度来看，拥有任意上游终止符允许对称 API。

然而，在实践中，这样的功能很少被实际使用，而且因为它只是混淆了 API，所以它在 1.0 版本中被隐藏在 .Internal 模块中。一个理论用例可能如下：

*   您有一个 Source 产生字节流。
*   消耗字节流的管道，计算哈希作为最终结果，并将所有字节传递到下游。
*   消耗字节流的接收器，例如，将它们存储在文件中。

使用上游终结器，您可以将这三个连接起来，并将来自 Conduit 的结果作为管道的最终结果返回。然而，在大多数情况下，有一种替代的、更简单的方法可以实现相同的目标。在这种情况下，您可以：

1.  用于`conduitFile`将字节存储在文件中，并将哈希 Conduit 转换为哈希 Sink 并将其放置在下游
2.  使用[zipSinks](http://hackage.haskell.org/packages/archive/conduit/1.0.2/doc/html/Data-Conduit-Util.html#v:zipSinks)将哈希接收器和文件写入接收器合并到单个接收器中。

# javascript - 如何对 jQuery DataTables 中的数字列进行排序

> ID：15258407
> 
> 赞同：3
> 
> 时间：2013-03-06T21:27:09.230
> 
> 标签：javascript, jquery, html, datatables

（看了一堆关于这个话题的答案，没有一个适用于这个问题。）

DataTables 具有让用户单击每列的向上/向下三角形图标以按升序或降序排序的功能。我已按如下方式加载数据

```
 oTable.fnAddData( ["Bogus data","1,541,512","12.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","3,541,512","2.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","541,512","1.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","2,541,512","32.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","741,512","3.5%","0","0","0"]);
        oTable.fnAddData( ["A Bogus data","41,512","1.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","2,541,512","12.5%","0","0","0"]);
        oTable.fnAddData( ["Z Bogus data","1,541,512","12.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","3,541,512","2.5%","0","0","0"]);
        oTable.fnAddData( ["La Bogus data","541,512","1.5%","0","0","0"]);
        oTable.fnAddData( ["The Bogus data","2,541,512","32.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","741,512","3.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","41,512","1.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","2,541,512","12.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","1,541,512","12.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","3,541,512","2.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","541,512","1.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","2,541,512","32.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","741,512","3.5%","0","0","0"]);
        oTable.fnAddData( ["Bogus data","41,512","1.5%","0","0","0"]); 
```

在第 2 列中，当我单击向上/向下三角形时，数值按字母顺序处理。如何调整它以便第二列向上/向下箭头将触发正确的方式，将字符视为数字。我尝试使用以下初始化：

```
oTable = $('.utable').dataTable( {
"aoColumns": [{ sWidth: '60%' },{sWidth: '30%', "sType": "numeric"},{ sWidth: '10%' }],
"sDom": 'rt',
"sScrollY":"200px",
"bPaginate":false,
"bFilter":false,
"bInfo": false}); 
```

所有这一切都是为了锁定列，并且向上/向下图标在该列的标题中不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:57:47.220

您的问题是数字没有被识别，即使它们是，数字中的逗号也可能会关闭排序功能（因为它可能无法正确删除它们）。

您拥有的一种选择是实现您自己的排序功能，以正确处理您的数字。这是一个满足您需要的示例：

[http://live.datatables.net/oborug/2/edit](http://live.datatables.net/oborug/2/edit)

PS——以下是相关文档：[http ://datatables.net/development/sorting](http://datatables.net/development/sorting)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T21:55:22.320

从技术上讲，第 2 列包含字符串 (1,000) - 带逗号的数字，第 3 列也是如此 - 带百分比的数字）。最好的办法是将数据作为整数（不带逗号和 %）传递给数据表，并编写自定义格式化程序以使用**mRender**选项添加逗号和百分比（在**[http://www.datatables.net /用法/列](http://www.datatables.net/usage/columns)**）。

如果您向数据添加自定义格式，请不要忘记将选项设置为使用基础数据作为排序源而不是显示的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:31:18.670

您必须定义排序功能（尝试使用选择排序或插入排序）尝试将数据变量存储在数组中并进行计算，否则您可以直接使用数据进行排序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-03T02:47:40.850

您好，我使用`parseFloat`和替换方法并使用此示例[http://datatables.net/release-datatables/examples/basic_init/multi_col_sort.html](http://datatables.net/release-datatables/examples/basic_init/multi_col_sort.html)

```
jQuery.fn.dataTableExt.oSort["string-nbr-asc"]  = function(x,y) {return ((parseFloat(x.replace(",","")) < parseFloat(y.replace(",",""))) ? -1 : ((parseFloat(x.replace(",","")) > parseFloat(y.replace(",",""))) ?  1 : 0));};

jQuery.fn.dataTableExt.oSort["string-nbr-desc"] = function(x,y) {return ((parseFloat(x.replace(",","")) < parseFloat(y.replace(",",""))) ?  1 : ((parseFloat(x.replace(",","")) > parseFloat(y.replace(",",""))) ? -1 : 0));}; 
```

如果您有 10 列并且想要使用`sort` `7,8,9`类似的数字`7,081 1,925.49`

```
"aoColumns":[null,null,null,null,null,null,{ "sType": "string-nbr" },{ "sType": "string-nbr" },{ "sType": "string-nbr" },null] 
```

# php - 我正在尝试扩展 CodeIgniter 表单验证库

> ID：15258409
> 
> 赞同：3
> 
> 时间：2013-03-06T21:27:14.913
> 
> 标签：php, codeigniter, validation, shared-libraries, codeigniter-2

这是我的自定义验证功能。它使用来自[Google Maps CodeIgniter 库的](http://in-the-attic.com/2010/08/02/codeigniter-google-maps-library-using-google-maps-api-version-3/)地理编码来检查位置是否存在。

```
public function address_check($str)
{
    $this->load->library('GMap');
    $this->gmap->GoogleMapAPI();

    // this method checks the cache and returns the cached response if available
    $geocodes = $this->gmap->getGeoCode("{$str}, United States");

    $this->form_validation->set_message('address_check', 'The %s field contains an invalid address');

    if (empty($geocodes))
    {
        return FALSE;
    }
    else
    {
        return TRUE;
    }
} 
```

如果我将上面的函数连同以下规则一起放在我的控制器中，它就可以很好地工作。

```
$this->load->library('form_validation');
$this->form_validation->set_rules('location', 'Location', 'callback_address_check'); 
```

* * *

现在我只想将它移出我的控制器。因此，我正在尝试根据此[SO 答案](https://stackoverflow.com/a/10652934/594235)和[CI 文档](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)扩展我的 CodeIgniter 表单验证库。

我在这里创建了一个文件 `/codeigniter/application/libraries/MY_Form_validation.php`：：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Form_validation extends CI_Form_validation {

    public function __construct()
    {
        parent::__construct();
    }

    public function address_check($str)
    {
        $this->load->library('GMap');
        $this->gmap->GoogleMapAPI();

        // this method checks the cache and returns the cached response if available
        $geocodes = $this->gmap->getGeoCode("{$str}, United States");

        $this->form_validation->set_message('address_check', 'The %s field contains an invalid address');

        if (empty($geocodes))
        {
            return FALSE;
        }
        else
        {
            return TRUE;
        }
    }

} 
```

在我的控制器中，我正在设置这样的规则......

```
$this->load->library('form_validation');
$this->form_validation->set_rules('location', 'Location', 'address_check'); 
```

我自己发现并解决的第一个问题是没有发生任何事情，因为[SO 答案](https://stackoverflow.com/a/10652934/594235)错误地将文件名指定为`My_Form_validation.php`应该在的位置`MY_Form_validation.php`

现在正在调用该函数，新问题是我收到以下错误：

> 消息：未定义的属性：MY_Form_validation::$load
> 
> 文件名：库/MY_Form_validation.php
> 
> 行号：12

这是第 12 行：

```
$this->load->library('GMap'); 
```

我无法从图书馆内访问图书馆？解决此问题的正确方法是什么？我不想自动加载 GMap 库，因为我不会一直使用它。我的方法中还有其他问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T21:31:21.017

用这个：

```
$CI =& get_instance();
$CI->load->library('GMap'); 
```

然后像这样使用它：

```
$CI->gmap->GoogleMapAPI(); 
```

你必须这样做，因为表单验证不像 CI 模型或控制器类，它只是一个库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T21:55:10.877

在您的库中，您可以通过首先加载 CI 类来扩展其他模型、库、配置、助手等。例如，在您的构造函数中，您可以通过以下方式完成此操作：

```
public function __construct()
{
    parent::__construct();

    $this->ci =& get_instance();
} 
```

加载 CI 类后，您可以加载可能需要加载的任何其他类。

例子：

```
$this->ci->load->library("session");
$this->ci->load->model("my_model");
$this->ci->load->helper("file"); 
```

或者在你的情况下：

```
$this->ci->load->library("GMap"); 
```

然后，您可以在整个类中以类似的方式从类中调用函数：

```
$this->ci->gmap->GoogleMapAPI();
$this->ci->gmap->getGeoCode("{$str}, United States"); 
```

# ios - 如何将 CustomCell 数据保存在数组中？

> ID：15258412
> 
> 赞同：0
> 
> 时间：2013-03-06T21:27:27.203
> 
> 标签：ios, xcode

我的 UITableView 中有一个 customcell。此自定义单元格有一个标签和文本框。当用户填写数据（4-5 个字段）并单击“保存”按钮时。我想保存他输入的数据。

我怎样才能做到这一点？？

我最多只有大约 5-6 个字段。如果您能举例说明我如何完成这项工作，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:56:03.217

您是否尝试将数据传递回表格视图？如果是这样，您必须将信息保存在数据结构中，然后使用定义的协议传递它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:16:32.237

试试下面的代码：

```
- (UITableViewCell *)tableView: (UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath
{
UITableViewCell *cell = [self.tabTeamDetails dequeueReusableCellWithIdentifier:@"customcellIdentifier"];

get UItextfeild and assign tag as below
   textbox.tag = indexpath.row; //used to refer particular textfiled
} 
```

在保存按钮操作中：

```
NSMutableDictionary *dic  = [[NSMutableDictionary alloc] init];
//for(i=0;i<noofrowsintableview;i++){
NSString *text = (NSString *)[self.view viewWithTag:i];
[dic addObject:[NSString stringWithFormat:text] forValue: i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:44:58.160

根据您的评论编辑：

在这种情况下，Apple 建议使用`Delegate-Pattern`. 基本上，你要做的是：

```
@protocol FirstDataVCDelegate;

@interface FirstDataVC : UIViewController

@property (weak, nonatomic) id<FirstDataVCDelegate> delegate;

//...

@end

@protocol FirstDataVCDelegate <NSObject>

- (void)firstDataVC:(FirstDataVC *)dataVC didCollectData:(NSDictionary *)data;

@end

@interface RootVC: UIViewController<FirstDataVCDelegate>

//...

@end

@implementation RootVC

- (void)firstDataVC:(FirstDataVC *)dataVC didCollectData:(NSDictionary *)data
{
    NSString *name = [data valueForKey:@"name"];
    [self.completeData setValue:name forKey:@"name"];
}

@end 
```

在这种情况下`RootVC`，将是想要发送整个数据的 VC。`FirstDataVC`是用户输入数据的 VC 之一。

每个获得用户输入的 VC 都必须提供一个协议，由其`RootVC`实现。

[这里](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html)有更多关于委托的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:40:31.787

一种方法：将数据保存在字典中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T21:43:03.573

单击保存按钮后，您可以制作他将填充的数据的数据结构。将这些值设置为数据结构也可以使用`NSMutableDictionary`键值存储

示例：假设我们有 4 个`UITextFeilds`textFeild1、textFeild2、textFeild3、textFeild14

```
NSMutableDictionary *dic  = [NSMutableDictionary dictionary];
[dic addObject: textFeild1.text forValue: @"val1"];
[dic addObject: textFeild2.text forValue: @"val2"]; 
[dic addObject: textFeild3.text forValue: @"val3"];
[dic addObject: textFeild4.text forValue: @"val4"];

//Now you have the values and can retrieve them by: 
NSString *value1 = [dic  valueForKey:@"val1"]; 
```

# r - R制作具有相等宽度和中断数的直方图

> ID：15258419
> 
> 赞同：1
> 
> 时间：2013-03-06T21:27:51.607
> 
> 标签：r, ggplot2

我一直无法使我的 R 图的图具有相等的宽度和中断数。

目前，我有

```
hist(result1,xlim=c(2,4),breaks=10)
abline(v=pi,col="red")
hist(result2,xlim=c(2,4),breaks=10) 
```

我正在尝试将 2 个图形叠加在一起，它们具有相同的条形轴 # 和相同的条形宽度。

奇怪的是，当我设置breaks = 10 时，顶部的图表偶尔会比底部的条形图多，并且它们的宽度不相等。我没有正确理解breaks参数吗？

[![](../Images/87223ca56e1cd773a8b648c19a2fc4cf.png "由 imgur.com 主办")](https://imgur.com/epCVPGV)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:59:56.963

我猜你正在将两个直方图绘制在彼此之上：

```
par(mfrow=c(2,1)) 
```

对于固定休息时间，我建议：

```
bins <- seq(2, 4, by=0.1)

hist(results1, breaks=bins, xlim=c(2,4))
hist(results2, breaks=bins, xlim=c(2,4)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T22:02:41.963

我认为使用`ggplot2`刻面非常适合这种情节。让我们创建一些数据：

```
carat1 = diamonds
carat1$id = "one"
carat2 = diamonds
carat2$id = "two"
carat2 = within(carat2, { carat = carat * 1000 })
carat_comb = rbind(carat1, carat2) 
```

让我们做一个情节：

```
ggplot(aes(x = carat), data = carat_comb) + 
    geom_histogram() + facet_wrap(~ id, ncol = 1) 
```

![在此处输入图像描述](../Images/7dbe4afe0b1ad17d23b5472ea36f9474.png)

当 x 轴完全不同时，要使这个绘图起作用，就是告诉 ggplot 轴值可以独立确定：

```
ggplot(aes(x = carat), data = carat_comb) + geom_histogram() + 
    facet_wrap(~ id, ncol = 1, scales = "free_x") 
```

![在此处输入图像描述](../Images/294273d649874fc5dfceec74dcadb3fb.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T21:46:27.183

我总是发现你描述的问题也很难处理，而且一般来说，如果你的数据非常不同，你可能无法做你想做的事。即便如此，使用`ggplot2`图形版本可能会更好：

```
library('ggplot2')
qplot(x = carat, data = diamonds, geom = "histogram", binwidth = 0.1) 
```

如果这种方法对您有用，您可以执行以下操作来获得两个图，一个在另一个之上：

```
library('grid')
a <- qplot(x = carat, data = diamonds, geom = "histogram", binwidth = 0.1)
b <- qplot(x = carat, data = diamonds, geom = "histogram", binwidth = 0.1)

vplayout <- function(x, y) viewport(layout.pos.row = x, layout.pos.col = y)
grid.newpage()
pushViewport(viewport(layout = grid.layout(2, 1)))
print(a, vp = vplayout(1,1))
print(b, vp = vplayout(2,1)) 
```

# java - Eclipse 导出为可运行的 JAR

> ID：15258421
> 
> 赞同：0
> 
> 时间：2013-03-06T21:27:56.130
> 
> 标签：java, eclipse, export

我知道 SO 不喜欢这类问题，但在谷歌搜索和检查 SO 近一个小时后，我离解决方案更近了。我有一个包含一些类的包，它们一起形成了一个基于 GUI 的游戏，当我这样做时运行良好，`CTRL-F11`但是当我右键单击包->导出->可运行 JAR 时，在启动配置下拉列表中找不到它，而其他包/项目是。

即使我现在不需要，我也希望能够在 Eclipse 之外运行这个游戏。我没有主要方法，我的可运行对象使用 acm。`public class SokobanGFX extends GraphicsProgram`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:07:20.430

在 Javadoc 中找到了这个：

[http://jtf.acm.org/javadoc/student/acm/program/Program.html](http://jtf.acm.org/javadoc/student/acm/program/Program.html)

“在许多编程环境中，作为 Program 子类的特定实例的对象将自动运行，而无需您进行任何特殊操作。为了获得最大的可移植性，您可能希望定义一个静态 main 方法，如 main 标准实现的注释中所述。”

之后应该很容易制作一个可执行的jar。

我不熟悉 ACM，但根据我对 Javadoc 的观察，我相信：

```
public static void main(String[] args){
    new SokobanGFX().start()
}
//http://jtf.acm.org/javadoc/student/acm/program/Program.html#main(String[]) 
```

应该启动程序。

# tcl - 滚动画布

> ID：15258422
> 
> 赞同：1
> 
> 时间：2013-03-06T21:27:57.410
> 
> 标签：tcl, tk

作为 tcl/tk 新手，这可能是**非常**基本的东西，但我已经花了一整天的时间，不知道我哪里出错了：

我正在从我得到的混合代码（可能写得不太好）和主要`tcl/tk`资源站点中自学，所以可能没有采用最佳实践！

我有一个包含单个画布的单个框架，带有一个滚动条。

```
#!/usr/bin/env wish

frame .f -bg blue
canvas .f.c1 -bg red -scrollregion "-1000 -1000 -1000 1000" \ 
        -yscrollcommand ".f.scroll set"

pack .f -fill both
pack .f.c1 -fill both -side left

scrollbar .f.scroll -command ".f.c1 yview scroll 10 units"
pack .f.scroll -side right -fill y -side right 
```

但是，当我运行它并尝试滚动时，出现错误：

```
wrong # args: should be ".f.c1 yview scroll number units|pages" 
```

这正是我所拥有的......我还需要添加什么？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:37:01.633

只需使用

```
scrollbar .f.scroll -command ".f.c1 yview" 
```

有关更多详细信息，请参阅[滚动条教程](http://wiki.tcl.tk/11211)

**编辑**：[从评论中添加一些信息]

滚动条`-command`回调本身添加了额外的参数，所以你不能提供它们，否则你的参数太多了。

# php - 将多个图像上传到一个文件夹，每个输入具有不同的名称

> ID：15258424
> 
> 赞同：3
> 
> 时间：2013-03-06T21:27:59.903
> 
> 标签：php, html

我正在尝试使用我管理的本教程使用 PHP 将多个图像上传到一个文件夹：

在 PHP 表单中

```
<?php
  $success = 0;
  $fail = 0;
  $uploaddir = 'uploads/';
  for ($i=0;$i<4;$i++)
  {
   if($_FILES['userfile']['name'][$i])
   {
    $uploadfile = $uploaddir . basename($_FILES['userfile']['name'][$i]);
    $ext = strtolower(substr($uploadfile,strlen($uploadfile)-3,3));
    if (preg_match("/(jpg|gif|png|bmp)/",$ext))
    {
     if (move_uploaded_file($_FILES['userfile']['tmp_name'][$i], $uploadfile)) 
     {
      $success++;
     } 
     else 
     {
     echo "Error Uploading the file. Retry after sometime.\n";
     $fail++;
     }
    }
    else
    {
     $fail++;
    }
   }
  }
  echo "<br> Number of files Uploaded:".$success;
  echo "<br> Number of files Failed:".$fail;
?> 
```

在 HTML 表单中

```
<form enctype="multipart/form-data" action="upload.php" method="post">
Image1: <input name="userfile[]" type="file" /><br />
Image2: <input name="userfile[]" type="file" /><br />
Image3: <input name="userfile[]" type="file" /><br />
Image4: <input name="userfile[]" type="file" /><br />
<input type="submit" value="Upload" />
</form> 
```

正如您在 HTML 表单中看到的那样，所有这些输入名称都是 userfile[]。现在在我的 HTML 中输入名称如下：picture01、picture02、picture 03 等...

如何修改**PHP 代码**以使用我的输入名称 {: picture01, picture02, picture 03} 而不是 userfile []。

谢谢。

**更新**

我希望以上内容适合我的 HTML 表单

```
<form enctype="multipart/form-data" action="upload.php" method="post">
    Picture 01<input id="picture01"  name="picture01" type="file" ><br />
    Picture 02<input id="picture02"  name="picture02" type="file" ><br />
   Picture 03<input id="picture03"  name="picture03" type="file" ><br />
    Picture 04<input id="picture04"  name="picture04" type="file" ><br />
    <input type="submit" value="Upload" />
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:05:32.553

此代码在本地工作。它结合了您的代码和 php.net 中的示例。您可能应该使用[pathinfo](http://www.php.net/manual/en/function.pathinfo.php)来获取扩展名，但这是一个小细节。

表单.html

```
<form enctype="multipart/form-data" action="upload.php" method="post">
Image1: <input name="userfile[]" type="file" /><br />
Image2: <input name="userfile[]" type="file" /><br />
Image3: <input name="userfile[]" type="file" /><br />
Image4: <input name="userfile[]" type="file" /><br />
<input type="submit" value="Upload" />
</form> 
```

上传.php：

```
<?php
error_reporting(E_ALL);
ini_set("display_errors",1);
$success = 0;
$fail = 0;

$uploads_dir = 'uploads';
$count = 1;
foreach ($_FILES["userfile"]["error"] as $key => $error) {
    if ($error == UPLOAD_ERR_OK) {
        $tmp_name = $_FILES["userfile"]["tmp_name"][$key];
        $name = $_FILES["userfile"]["name"][$key];
        $uploadfile = "$uploads_dir/$name";
        $ext = strtolower(substr($uploadfile,strlen($uploadfile)-3,3));
        if (preg_match("/(jpg|gif|png|bmp)/",$ext)){
            $newfile = "$uploads_dir/picture".str_pad($count++,2,'0',STR_PAD_LEFT).".".$ext;
            if(move_uploaded_file($tmp_name, $newfile)){
                $success++;
            }else{
                echo "Couldn't move file: Error Uploading the file. Retry after sometime.\n";
                $fail++;
            }
        }else{
            echo "Invalid Extension.\n";
            $fail++;
        }
    }
}
echo "<br> Number of files Uploaded:".$success;
echo "<br> Number of files Failed:".$fail; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:36:14.280

当您更改表单中的名称时，请在尝试获取文件的数组元素时更改名称

前任。

```
echo $_FILES["picture$i"]['name']; 
```

并更改为这样

```
for ($i=1;$i<=4;$i++) 
```

# java - 用 MySQL 准备好的语句？

> ID：15258425
> 
> 赞同：0
> 
> 时间：2013-03-06T21:28:06.920
> 
> 标签：java, mysql, jdbc, prepared-statement

对于准备好的语句，我在语法上遇到了一些麻烦。

我有以下代码

```
String query2="SELECT lname FROM school_student WHERE sid = ? ORDER BY sid;";

PreparedStatement ps = cn.prepareStatement(query2);
ps.setInt(1, 3);
ResultSet rs = ps.executeQuery(query2); 
```

我遇到的问题是我收到此错误消息：

> `com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '? ORDER BY sid' at line 1`

但是，当我替换“？”时 在我对 3 的查询中，查询工作正常，没有错误，并给了我想要的东西。我如何设置“？”的值似乎有问题。在我的查询中？我使用了错误的语法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T21:29:39.263

只需使用

```
ps.executeQuery(); 
```

（即使用`executeQuery()`不带任何参数的重载方法）。您在准备语句时已经通过了查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-14T11:50:48.890

使用此查询：-

> String query2 = "SELECT lname FROM school_student WHERE sid = "+attribute+" ORDER BY sid;";

并简单地使用

> ps.executeQuery();

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T22:19:58.510

我认为他们在准备查询时是语法问题尝试这个... String query2="SELECT lname FROM school_student WHERE sid = +variablename+ ORDER BY sid;"

# java - 将对象的 ArrayList 转换为二维数组

> ID：15258426
> 
> 赞同：0
> 
> 时间：2013-03-06T21:28:06.767
> 
> 标签：java, arrays, string, object, arraylist

我在将对象的 Arraylist 转换为二维数组时遇到了一些麻烦。arrayList ar 包含许多名为 Row 的对象。每行包含许多字符串。我希望能够通过arrayList，访问每一行并将字符串存储在一个数组中。如果这没有意义，我真的很抱歉。我什至觉得很难解释！这是我到目前为止所拥有的：

```
public String tableArray[][]; //Array of every applicant
private ArrayList<Row> ar;
private Row r;

public void display()
{
int i, j;
for (Row r: ar)
    i = 0;
    for(String s: r)
    {
        tableArray = new String[i][j];
        j++;
    }
    i++;
} 
```

这是 Row 类

```
import java.util.ArrayList;
import java.lang.String;

public class Row
{   
private String appNumber;
private String name;
private String date;
private String fileLoc;
private String country;
private String elementString;
public String results[];

public Row(String appNumber, String name, String date, String fileLoc, String country, Table table)
{
    this.appNumber = appNumber;
    this.name = name;
    this.date = date;
    this.fileLoc = fileLoc;
    this.country = country;
    asAString();
    table.addApplicant(this);

}

public void asAString()
{
    String elementString = appNumber +","+ name +","+ date +","+ fileLoc +","+ country;
    results = elementString.split(",");}
} 
```

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:33:28.877

```
final int listSize = list.size();
E[][] darr = new E[listSize][];
for(int i = 0; i < listSize; i++) {
    ArrayList<E> sublist = list.get(i);
    final int sublistSize = sublist.size();
    darr[i] = new E[sublistSize];
    for(int j = 0; j < sublistSize; j++) {
        darr[i][j] = sublist.get(j);
    }
} 
```

[我在这里](http://bit.ly/10gIaeK)找到了这个答案。

# actionscript-3 - 当玩家移动到世界墙外时，他应该移动到对面的墙

> ID：15258427
> 
> 赞同：-1
> 
> 时间：2013-03-06T21:28:08.593
> 
> 标签：actionscript-3

如果玩家移动到左侧世界墙之外，我该如何做到这一点，它应该出现在右侧墙，就像图片所示： http: [//prntscr.com/va69f](http://prntscr.com/va69f)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:19:47.493

您可能会使用这样的条件：

```
var worldWidth:int = rightWall.x - leftWall.x;
if (newX < leftWall.x)
{
    newX += worldWidth;
}
else if (newX > rightWall.x)
{
    newX -= worldWidth;
} 
```

即使您的左墙不在位置 0，此解决方案也可以工作。如果玩家在左侧或右侧移动到世界之外，它也可以工作（因为您的问题与您链接的图片不一致）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:33:11.817

你可以使用模运算。假设世界的大小`width`和玩家移动`distance`，你可以这样做：

```
new_x = (old_x + distance) % width; 
```

如果它超过世界的宽度，它的新 x 位置将在开头

# opencl - OpenCL：__constant 与 __local？

> ID：15258438
> 
> 赞同：0
> 
> 时间：2013-03-06T21:28:44.190
> 
> 标签：opencl, gpgpu

假设我有一大堆值（仍然小于 64 kB），它们在内核中经常被读取**，**但不被写入。然而，它可以从外部改变。该数组有两组值，让我们称它们为左右。所以问题是，将大数组作为 __global 并将其写入 __local left 和 __local right 数组是否更快？还是将其作为一个常量 __constant large 并处理内核中的访问？例如：

```
__kernel void f(__global large, __local left, __local right, __global x, __global y) {
    for(int i; i < size; i++) {
        left[i] = large[i];
        right[i] = large[i + offset];
    }
    ...
    x = foo * left[idx];
    y = bar * right[idx];
} 
```

与：

```
__kernel void f(__constant large, __global x, __global y) {
    ...
    x = foo * large[idx];
    y = bar * large[idx * offset];
} 
```

（索引有点复杂，但可以用宏来制作，例如）我读到常量内存存在于全局空间中，所以它应该更慢吗？它将在 Nvidia 卡中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:50:55.583

首先，在第二种情况下，您应该以某种方式使结果可用于您的 CPU。我假设您复制回`global` `space`计算后。

我认为这取决于你在内核中做了什么。例如，如果您的内核计算量很大（每个线程进行大量计算），那么第一个选项可能会付出代价。为什么？

*   `global large`您花了一些时间将数据从空间复制到`local`空间`left`并且`right`-*可以接受*
*   您对本地空间上的数据进行了大量计算 -*好的*
*   `local` `left`您花一些时间从和`right`复制回来`global` `large`。- 可以接受。

但是，如果您的内核相对较轻，即每个线程都会进行一些小计算，那么

*   您对`constant`空间数据进行了一些计算。这很可能意味着您不需要经常访问它。
*   您将中间结果存储在本地空间中。
*   `local`你花了一些时间从一个空间复制到`global`另一个空间。- 可以接受。

总而言之，对于大内核，第一个选项更好。对于小内核，第二个。

PS 还有一点需要注意的是，如果你有多个内核`large`一个接一个地工作，那么肯定会选择第一个选项。因为这样您就可以将数据保存在全局内存空间中，而不必每次启动内核时都进行复制。

编辑：既然你说它经常被访问，**那么**我认为你可能应该选择第一个选项。

# php - 您如何查看 mysqli_query 对象内部进行故障排除？

> ID：15258439
> 
> 赞同：0
> 
> 时间：2013-03-06T21:28:55.513
> 
> 标签：php, mysql, debugging, mysqli

我遇到过几次这个问题，这很痛苦。现在，该行`if(mysqli_num_rows($result) != 1)`给出了错误`mysqli_num_rows() expects parameter 1 to be mysqli_result, boolean given`，而 $result 是`mysqli_query()`. 我无法回`$result`显，我尝试了以下代码来找出 $result 里面的内容，但没有成功

```
if (!mysqli_query($link, "SET @a:='this will not work'"))
    printf("Error: %s\n", mysqli_error($link));

while ($row = mysqli_fetch_row($result))
    printf("%s\n", $row[0]); 
```

我正在尝试解决问题，但这就像我走到了死胡同，因为我看不到`mysqli_query()`.

我怎样才能找到问题的根源？我猜这是不好的 SQL 语法，但我需要更多细节。

`$result`这是定义的PHP代码

```
$result = mysqli_query($link, 'SELECT `password`
                        FROM `ajax_login`
                        WHERE userid = \''.$userName.'\' LIMIT 1'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:56:24.533

您是否正在检查错误代码/消息？就像是：

```
if(mysqli_errno($link)){
    die(mysqli_error($link));
} 
```

（当然，你不会`die`在生产中使用）

# android - EditText 小部件未显示在表单小部件中

> ID：15258442
> 
> 赞同：0
> 
> 时间：2013-03-06T21:29:01.947
> 
> 标签：android, forms, widget, android-edittext

我是否需要进行 SDK 更新或其他操作才能将 EditText 小部件添加到图形布局调色板下的可用表单小部件列表中？它没有出现在那里。我选择了最高的 API - 17，但仍然没有运气。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:16:55.363

我在调色板的文本字段组中有不同类型的编辑文本（普通、人名、密码、邮件、电话、日期等）。它在表单小部件下方。（我在 Eclipse 中工作。）这是[调色板](http://images.devs-on.net/Image/FAYm1NL3adInDqxG-.png)：

# highcharts - 在 Highcharts 面积图中的线条和填充之间添加空间

> ID：15258445
> 
> 赞同：0
> 
> 时间：2013-03-06T21:29:10.743
> 
> 标签：highcharts

我目前正在使用 Highcharts 图形库，并试图在面积图的线条和填充之间添加空间，但似乎找不到方法。有人对此有任何解决方案/黑客吗？

欢迎使用实际`highcharts.js`的 javascript hack。

这是我所拥有的：

![当前图表](../Images/eb9feec01b8d835c68abc6a73092c850.png)

这是我想要达到的目标：

![在此处输入图像描述](../Images/642b09a3b5eb5b9ffe5a8de2dbef19b5.png)

并不是说它会有所帮助，但这是我当前的代码：

```
var chart = new Highcharts.Chart({
    chart: {
        type: 'area',
        renderTo: 'test-trending-chart',
        backgroundColor:'#5473B4',
        spacingTop: 0,
        spacingBottom: 0,
        spacingLeft: 0,
        spacingRight: 0,
        marginLeft: -3,
        marginRight: -3
    },
    credits: {
        enabled: false
    },
    title: {
        text: ""
    },
    tooltip: {
        enabled: false
    },
    legend: {
        enabled: false
    },
    plotOptions:{
        area: {
            shadow: false,
            animation: false,
            states: {
                hover: {
                    enabled: false
                }
            },
            marker: {
                lineColor: '#5473B4',
                lineWidth: 2,
                radius: 5
            },
            lineWidth: 3,
            fillColor: {
                linearGradient: [0,0,0,100],
                stops: [
                    [0,'rgba(255,255,255,0.5)'],
                    [1,'rgba(255,255,255,0.75)']
                ]
            }
        }
    },
    series: [{
        color: 'white',
        data: [36,40,23,42,65]
    }],
    xAxis: {
       lineWidth: 0,
       minorGridLineWidth: 0,
       lineColor: 'transparent',        
       labels: {
           enabled: false
       },
       minorTickLength: 0,
       tickLength: 0
    },
    yAxis: {
        lineWidth: 0,
       minorGridLineWidth: 0,
       gridLineWidth: 0,
       lineColor: 'transparent',        
       labels: {
           enabled: false
       },
       minorTickLength: 0,
       tickLength: 0,
       title: {
            text: ""
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:17:33.587

编辑：一种更优雅的解决方案，不需要您进行编辑`highcharts.js`，而是使用原型来扩展 Highcharts。在实例化任何图表之前，将以下 Javascript 片段添加到您的代码中：

```
Highcharts.Series.prototype.drawGraph = (function (func) {
        return function () {
            func.apply(this, arguments);
            if (typeof this.options.areaPadding !== "undefined"){
                for (i=2;i<this.areaPath.length;i+=3){
                    this.areaPath[i]+=this.options.areaPadding;
                }
            }
        };
    } (Highcharts.Series.prototype.drawGraph)); 
```

然后`areaPadding`像这样使用参数在线条和区域之间添加空间：

```
var chart = new Highcharts.Chart({
    plotOptions:{
        area: {
            areaPadding: 4   
        }
    }
}); 
```

在此处查看实际操作：http: [//jsfiddle.net/AAQEq/](http://jsfiddle.net/AAQEq/)

# python - 如何使用 django 将字段数据渲染到模板文件中？

> ID：15258447
> 
> 赞同：0
> 
> 时间：2013-03-06T21:29:12.477
> 
> 标签：python, xml, django

我正在尝试使用以下代码将数据呈现到模板文件中。我遇到的错误是这样的：

```
This page contains the following errors:
error on line 13 at column 16: AttValue: " or ' expected

Below is a rendering of the page up to the first error.
Name,Author,Status 
```

**代码**

```
def editbook(request):
    if request.method == 'GET':
        name = request.GET.get('name',False)
        Details = bookInfo.objects.all().filter(Name=name)
        id = Details.values_list('id',flat=True)
        Name = Details.values_list('Name',flat=True)
        Author = Details.values_list('Author',flat=True)
        Status = Details.values_list('Status',flat=True)
        return render(request, 'app/add.html', {'Name' : Name, 'Author' : Author, 'Status' : Status}, content_type="application/xhtml+xml") 
```

**模板代码**

```
<html>
<head>
    <title>Add</title>
</head>
<body>
    <form action="add/" method="post">
        {% csrf_token %}
        <p style="font-family:Courier New;color:teal">Name <input type="text" placeholder="Name of the book" name="name"></input></p>

        <p style="font-family:Courier New;color:teal">Author <input type="text" placeholder="Author of the book" name="author"></input></p>
        <p style="font-family:Courier New; color:teal"> Status
        <select name="status">
                <option value=1>Read</option>
                <option value=1>Unread</option>
        </select>
        </p>
        <input type="submit" id="booksubmit" value="Add/Edit Book"></input>
</form>
</body>
</html> 
```

我通过谷歌搜索，发现这有点像 XML 解析错误（如果我错了，请纠正我）。现在我被困在这个位置上。请帮忙。

**编辑**这里添加书籍的表单具有将字段数据保存到数据库中的不同方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T07:24:53.783

无论是 html 还是 html5，您的 HTML 格式都是错误的。

为了挑剔，你的 python 代码也应该被重构。

通常我们用小写字母而不是大写字母来定义变量，所以

变量`Details, Name, Author, Status`应该是`details, name, author, status`。此外，您的班级名称`bookInfo`是这样拼写的吗？python 中的类应该以大写字母开头，所以`bookInfo`应该是`BookInfo`.

正确的 HTML5 是这样的：

```
<html>
<head>
    <title>Add</title>
</head>
    <body>
        <form action="add/" method="post">
        {% csrf_token %}
        <p style="font-family:Courier New;color:teal;">Name <input type="text" placeholder="Name of the book" name="name" /></p>

        <p style="font-family:Courier New;color:teal;">Author <input type="text" placeholder="Author of the book" name="author" /></p>
        <p style="font-family:Courier New; color:teal;"> Status
            <select name="status">
                <option value=1>Read</option>
                <option value=1>Unread</option>
            </select>
            </p>
            <input type="submit" id="booksubmit" value="Add/Edit Book" />
        </form>
    </body>
</html> 
```

如果您不使用 HTML5，这取决于您定义的 Doctype。您不能在输入字段中使用占位符。

输入需要用 a`/>`而不是 a关闭`</input>`。

您在 html 中提供的内联样式不完整：

```
style="font-family:Courier New; color:teal" 
```

应该

```
style="font-family:Courier New; color:teal;" 
```

您使用的回报不需要`content_type`您可以放弃它。你没有在任何地方使用你的模板变量，所以不是这样，但如果你想开始使用它们，模板语言的语法是 {{ variable_name }} 并且在你的情况下， `{{ Name }}, {{ Status }}`例如（直到你重构）。

此外，您会看到此错误，`content_type`因为您正在积极地告诉浏览器将文档解析为`xhtml+xml`带有规则的 XHTML，而您实际上正在破坏这些规则。

要将 Django 应用程序中的值添加到输入字段，请执行此操作，（没有 Django 表单）

```
<input type="text" value="{{ Name }}" /> 
```

但我建议改用 Django 表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T06:59:06.037

我认为您收到此错误是因为您的模板不是“格式正确”。我的猜测是正在输出的 xml 中有错误。

您已将 http 响应的内容类型声明为`application/xhtml+xml`. xhtml 要求您在所有属性周围加上引号。您可能在某处缺少/添加了引号。我看不到你的模板在哪里。

检查您的模板变量（`{{ Name }}`和`{{ Author }}`）`{{ Status }}`输出的内容，看看它们是否添加了杂散引号，或者尝试更改内容类型（可能只是删除您传递给`render`函数的 content_type 参数）。

# asp.net - 在 ASP.NET IIS 7 中通过 LAN 托管多个站点

> ID：15258449
> 
> 赞同：0
> 
> 时间：2013-03-06T21:29:16.563
> 
> 标签：asp.net, networking, iis-7, localhost

我们在内部服务器上运行了一些服务，名为`cpweb2`.

![CPWEB2 IIS 管理器](../Images/09fb5c2f5b0c1d4612e79b25a4e36c1c.png)

**默认网站**通过浏览到本地访问`http://cpweb2/`。

为了能够浏览到其他应用程序，其他站点被分配了不同的端口号。

例如：

*   **CapacityTracker**配置为使用端口 8081：`http://cpweb2:8081/`
*   **AcpWcfTool**配置为使用端口 8093：`http://cpweb2:8093/`
*   **ProductionScoreboard**配置为使用端口 8082：`http://cpweb2:8082/`
*   **ShopServices**配置为使用端口 8095：`http://cpweb2:8095/`

可以想象，没有多少人只记得这些网站的网址。

我目前正在创建一个名为**AcpMainframe**的新服务。我想给它一个更用户友好的 URL，例如`http://cpweb2/mainframe`or ，但如果**Default Web Site**不是我的项目之一，我`http://mainframe.cpweb2/`不知道该怎么做。

 **我想这个问题是两个部分。

1.  如果我没有根级网站的代码，我可以将我的新**AcpMainframe**服务添加到根级**默认网站吗？**

2.  如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:56:23.673

如果您可以使用除您拥有的主机名之外的其他主机名，您可以在 IIS 中设置允许多个站点在端口 80 上运行的绑定。可以在[此处](http://technet.microsoft.com/en-us/library/cc731692%28v=ws.10%29.aspx)找到示例。**

# windows-7 - Win7-64 位上的 32 位 Python，导入错误

> ID：15258455
> 
> 赞同：1
> 
> 时间：2013-03-06T21:29:33.487
> 
> 标签：windows-7, 64-bit, ipython

当我尝试`ipython qtconsole`从 Python 安装目录以外的任何地方启动时，我收到导入错误。它似乎只有在我 RUN->cmd.exe 时才有效；cd C:\Users\me\python\Python27; ipython qtconsole；。

我试过批处理文件，但如果我不在我的安装目录的上下文中运行它，它似乎仍然不起作用。总是 ipython-script 似乎在抱怨。这是输出...（这是来自 ipython 内部，使用 CurrentWorkingDirectory 作为我的桌面）

```
In [2]: !ipython qtconsole
Traceback (most recent call last):
  File "C:\Users\me\python\Python27\ipython-script.py", line 770, in <module
>
load_entry_point('ipython==0.12', 'console_scripts', 'ipython')()
File "c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin\lib\site-packages\ipy
thon-0.12-py2.7.egg\IPython\frontend\terminal\ipapp.py", line 402, in launch_new
_instance
  File "<string>", line 2, in initialize
  File "c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin\lib\site-packages\ipy
thon-0.12-py2.7.egg\IPython\config\application.py", line 84, in catch_config_err
or
  File "c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin\lib\site-packages\ipy
thon-0.12-py2.7.egg\IPython\frontend\terminal\ipapp.py", line 302, in initialize

  File "<string>", line 2, in initialize
  File "c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin\lib\site-packages\ipy
thon-0.12-py2.7.egg\IPython\config\application.py", line 84, in catch_config_err
or
  File "c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin\lib\site-packages\ipy
 thon-0.12-py2.7.egg\IPython\core\application.py", line 325, in initialize
   File "c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin\lib\site-packages\ipy
thon-0.12-py2.7.egg\IPython\frontend\terminal\ipapp.py", line 297, in parse_comm
and_line
  File "<string>", line 2, in parse_command_line
  File "c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin\lib\site-packages\ipy
thon-0.12-py2.7.egg\IPython\config\application.py", line 84, in catch_config_err
or
  File "c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin\lib\site-packages\ipy
thon-0.12-py2.7.egg\IPython\config\application.py", line 413, in parse_command_l
ine
  File "<string>", line 2, in initialize_subcommand
  File "c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin\lib\site-packages\ipy
 thon-0.12-py2.7.egg\IPython\config\application.py", line 84, in catch_config_err
or
   File "c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin\lib\site-packages\ipy
 thon-0.12-py2.7.egg\IPython\config\application.py", line 349, in initialize_subc
 ommand
   File "c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin\lib\site-packages\ipy
 thon-0.12-py2.7.egg\IPython\utils\importstring.py", line 40, in import_item
  File "c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin\lib\site-packages\ipy
 thon-0.12-py2.7.egg\IPython\frontend\qt\console\qtconsoleapp.py", line 30, in <m
 odule>
   File "c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin\lib\site-packages\ipy
 thon-0.12-py2.7.egg\IPython\external\qt.py", line 42, in <module>
 ImportError: Cannot import PySide >= 1.0.3 or PyQt4 >= 4.7 
```

就像我说的，它在我的安装目录中运行得非常好，而且我 96% 确定我的 ENV 变量 PATH、PYTHONPATH、PYTHONHOME 是洁净的。我已经从删除它们到一次完全重载一个目录，结果没有任何变化。

而且我已经确保存在 Wow6432None Python 条目（我尽量不污染这些条目）。

Ipython 不是唯一出现此类错误的模块（也有相同的解决方案），但这绝对是最烦人的（我无法从 Run Prompt 启动 qtconsole！）

编辑::我确实挖掘了一个开始菜单条目，在更改“开始”属性后，我能够启动 qtconsole，但我仍然不太明白为什么相对于当前目录执行此导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T15:36:37.910

我相信这与 qtconsole 依赖项有关，这些依赖项不直接位于我定义的位置`PATH`，并且我相信我的模块搜索路径中存在一些冲突。

我找到的最简单的解决方案是使用环境变量`PYTHONPATH`。

距离我最初的帖子已经有一段时间了，从那以后有几件事发生了变化，但我相信重要的因素是这些：

- 小心安装在 64 位 Windows 上的 32 位 python。

-利用 PYTHONPATH 包含重要的子目录，例如“/install-dir/Lib”或任何其他目录。

如果您的环境变量仍然存在问题，请使用绝对命令作为故障保护（将它们包装在一个更易于使用的脚本中），

```
C:\Users\johnny42\python\Python27\pythonw.exe
C:\Users\johnny42\python\Python27\ipython-script.py qtconsole 
```

上面的例子应该在 ONE LINE 上。不要只是复制和粘贴它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T09:21:14.653

我的 64 位 Windows 操作系统中有 Python 32 位。甚至我也有类似的错误“c:\cpd-svn\branches\qt-4.8\win32-12-01\install\bin”。我不知道它在哪里设置。您能否分享您对 Python 从何处获得这条路径的发现？它应该使用哪个路径进行更新？

# c - 从串口读取

> ID：15258456
> 
> 赞同：2
> 
> 时间：2013-03-06T21:29:34.223
> 
> 标签：c, linux, serial-port

这是[http://www.gravitech.us/7segmentshield.html](http://www.gravitech.us/7segmentshield.html)给出的代码。

```
void SerialMonitorPrint (byte Temperature_H, int Decimal, bool IsPositive)
{
Serial.print("The temperature is ");
if (!IsPositive)
{
  Serial.print("-");
}
Serial.print(Temperature_H, DEC);
Serial.print(".");
Serial.print(Decimal, DEC);
Serial.print(" degree C");
Serial.print("\n\n");
} 
```

但是当我尝试从串口读取数据时，我发现我是一个字符一个字符地读取数据。

**更新**

```
while(1)
{
    char buffer[100];
    int chars_read = read(fd, &buffer, sizeof(buffer));
    buffer[chars_read] = '\0';
    printf("%s", buffer);
} 
```

那么如何逐行阅读？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:39:46.270

您不能保证一次调用`read`就会给您准确的一行文本。您需要缓冲数据。最简单的方法是一次只读取一个字符，并在到达换行符时停止。如果你想每次读取尽可能多的字符，缓冲代码就变得更加复杂。

试试这个开始：

```
char buffer[100] = {0};
int pos = 0;

while( pos < 99 ) {
    read(fd, buffer+pos, 1);           // Note you should be checking the result
    if( buffer[pos] == '\n' ) break;
    pos++;
}

// Normally you would null-terminate string, but noticed I initialised the
// buffer to all zeroes at the beginning.  So this is not strictly necessary.
// However, in this case it will remove the newline character.
buffer[pos] = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T21:41:55.200

while 循环不一定逐个字符地读取，但它可能会根据串行端口设备和传输速率为每次读取一次返回一个字符。

我进行了一些更改以修复您的 while 循环中的一些错误：

```
while(1)
{
    char buffer[100];
    ssize_t length = read(fd, &buffer, sizeof(buffer));
    if (length == -1)
    {
        printf("Error reading from serial port\n");
        break;
    }
    else if (length == 0)
    {
        printf("No more data\n");
        break;
    }
    else
    {
        buffer[length] = '\0'
        printf("%s", buffer);
    }
} 
```

**变更清单**：

*   检查返回值`read`
*   我假设当读取失败或返回 0 时，这意味着不再读取数据并中断 while 循环执行。根据您的需要修改此行为。
*   在打印之前附加一个`'\0'`字符，否则`printf`会在缓冲区中打印垃圾值。

**注释：**

*   不要担心行，读取应该`\n`在缓冲区中返回一个字符，`printf`当你打印出来时它会解释为换行符。
*   如果您实际上只对抓取一条线并将其存储在某处感兴趣，则需要读取并附加到另一个缓冲区，直到您`\n`在缓冲区中获得 a ，并且还需要`\n`在同一个缓冲区中处理多个暗示多行的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:35:13.687

可能你必须自己实现。继续逐个字符地阅读，直到到达“\n”，然后返回你所阅读的内容。

我没有检查，但我怀疑“readline”通常是这样实现的。

# azure - 访问 azure 云服务中的某些文件夹

> ID：15258461
> 
> 赞同：0
> 
> 时间：2013-03-06T21:29:43.927
> 
> 标签：azure

在我的代码（具有工作者角色）中，我需要指定目录的路径（第三方库需要它）。在本地，我已将文件夹包含到项目中，并提供完整路径。但是，在部署之后，我当然需要一条新路径。如何确认已部署整个文件夹以及如何确定它的新路径？

**编辑：** 我将文件夹添加到 Visual Studio 中的角色节点并像这样访问它：`Path.Combine(Environment.GetEnvironmentVariable("RoleRoot"), "my_folder");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:52:54.290

我会采取稍微不同的方法。将第 3 方包放入 Windows Azure blob 存储，然后在角色启动期间，您可以下载/提取它并将文件放入可用的本地存储（为其提供应用所需的任何权限）。然后通过相同的本地存储配置条目从您的应用程序中利用该位置。

这应该可以帮助您减小部署包的大小，并让您能够在不完全重新部署解决方案的情况下更新第 3 方组件。通过在启动时利用它，您可以保证文件将在那里，以防角色实例被拆除和重建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T21:43:06.473

这个目录会用于读写吗？如果是，您应该使用 LocalStorage 资源。 [https://azure.microsoft.com/en-us/documentation/articles/cloud-services-configure-local-storage-resources/](https://azure.microsoft.com/en-us/documentation/articles/cloud-services-configure-local-storage-resources/)展示了如何使用它。

如果该目录仅用于读取（即您有二进制文件或配置文件），那么您可以使用 %RoleRoot% 环境变量来标识您的包部署到的路径，然后只需附加您在项目中引用的任何文件夹（即 %RoleRoot%\Myfiles）。

# c++-cli - Visual C++ 语句 + 变量

> ID：15258464
> 
> 赞同：0
> 
> 时间：2013-03-06T21:29:55.623
> 
> 标签：c++-cli

如何将例如 int 值绑定到下面的语句？

```
System::String^ Content = "just example";
int iAValue = 5;

lblOutput_{iValue}->Text = Content; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:32:20.360

你没有；您使用某种数组或集合。初学者经常尝试这种事情。将程序逻辑与变量名称联系起来是不可能的，也不是一个好主意。

```
auto labels = gcnew List<Label>();
labels->Add(lblOutput1);
labels->Add(lblOutput2);
labels->Add(lblOutput3);
labels->Add(lblOutput4);
labels->Add(lblOutput5);
// ...
String^ Content = "just example";
int iAValue = 4;
labels[iAValue].Text = Content; 
```

然后稍后您可以轻松地遍历所有这些：

```
for(int i = 0; i < labels->Count; ++i) {
    // i is the label "number"
    // labels[i] is the label
} 
```

# java - Java，如何仅将对话框弹出为图像？

> ID：15258467
> 
> 赞同：4
> 
> 时间：2013-03-06T21:30:01.730
> 
> 标签：java, image, swing, jdialog

我试图找到一种方法将 JDialog 的所有内容替换为简单的图像。它适用于我正在处理的项目的关于页面，当用户单击“关于”部分时，我希望以 JDialog 的样式弹出一个图像（并在失去焦点时消失）。示例：[http](http://www.tecmint.com/wp-content/uploads/2012/08/About-Skype.jpg) ://www.tecmint.com/wp-content/uploads/2012/08/About-Skype.jpg Skype 仅显示他们创建的图像作为“关于”页面。如何在 Java(swing) 中制作“图像对话框”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T04:43:27.503

> 如何在 Java(swing) 中制作“图像对话框”？

将未修饰的 JDialog 与包含 ImageIcon 的 JLabel 一起使用：

```
JDialog dialog = new JDialog();
dialog.setUndecorated(true);
JLabel label = new JLabel( new ImageIcon(...) );
dialog.add( label );
dialog.pack();
dialog.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T21:42:10.203

```
BufferedImage image = ImageIO.read(new File("myfile.png"));
JLabel picLabel = new JLabel(new ImageIcon(image));
JOptionPane.showMessageDialog(null, picLabel, "About", JOptionPane.PLAIN_MESSAGE, null); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T21:49:54.637

给你，我已经为你注释了代码

```
import javax.swing.JOptionPane; //imports
import javax.swing.JLabel;
import javax.swing.JFrame;
import javax.swing.ImageIcon;
import java.awt.Toolkit;
import java.awt.Dimension;

public class img{

  public static void main(String[] args){

    JFrame f = new JFrame(); //creates jframe f

    Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize(); //this is your screen size

    f.setUndecorated(true); //removes the surrounding border

    ImageIcon image = new ImageIcon(diceGame.class.getResource("image.png")); //imports the image

    JLabel lbl = new JLabel(image); //puts the image into a jlabel

    f.getContentPane().add(lbl); //puts label inside the jframe

    f.setSize(image.getIconWidth(), image.getIconHeight()); //gets h and w of image and sets jframe to the size

    int x = (screenSize.width - f.getSize().width)/2; //These two lines are the dimensions
    int y = (screenSize.height - f.getSize().height)/2;//of the center of the screen

    f.setLocation(x, y); //sets the location of the jframe
    f.setVisible(true); //makes the jframe visible

  }
} 
```

[[OLD]] 下面的代码将满足您的需求。

```
import javax.swing.JOptionPane;
import javax.swing.JLabel;
import javax.swing.ImageIcon;

public class img{

  public static void main(String[] args){

    JLabel lbl = new JLabel(new ImageIcon(diceGame.class.getResource("image.png")));
    JOptionPane.showMessageDialog(null, lbl, "ImageDialog", 
                                 JOptionPane.PLAIN_MESSAGE, null);

  }
} 
```

# node.js - 如何自动为 CouchDB 用户分配角色？

> ID：15258471
> 
> 赞同：1
> 
> 时间：2013-03-06T21:30:11.540
> 
> 标签：node.js, couchdb, couchdb-nano

我有以下注册用户的方法：

```
// Registration method
exports.register = function(req, res) {
    var username = req.body.username,
        password = req.body.password,
        first = req.body.first;
        last = req.body.last;
        role = req.body.institution;

    nano = require('nano')('http://127.0.0.1:5984');
    var users = nano.use('_users');

    var user = {
                    "_id": "org.couchdb.user:" + username,
                    "name": username,
                    "type": "user",
                    "roles": [],
                    "password": password,
                    "realname": first + " " + last
                };

    users.insert(user, function(err, body) {
        if(err) {
            res.send(err.reason, err.status_code);
        } else {
            res.send(body, 200);
        }
    });
}; 
```

如您所见，我有一个名为 role 的变量，我想在“roles”数组中设置它。不幸的是，您可能知道，CouchDB 只允许管理员设置角色。我对此没意见，但我将角色用作机构，所以我希望注册用户能够选择他们正在注册的机构，因此它应该自动为他们分配这个角色。如果没有将我的管理员凭据硬编码到此方法中，即 `nano.config.url = "http://admin:password@127.0.0.1:5984/"` 如何自动将新用户分配给他们指定的角色，正如我所提到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T04:28:33.357

CouchDB 使用角色数组来决定[数据库授权](http://wiki.apache.org/couchdb/Security_Features_Overview#Authorization)。这允许您通过用户角色配置对给定数据库的访问。如果用户可以设置自己的角色，那么某人可以授予自己访问任何机构的权限。他们甚至可以让自己成为管理员，这违背了保护您的管理员密码的目的。

我不确定您的用例是什么，但我认为您并没有试图阻止*访问*其他机构。相反，我怀疑您正在尝试使用这些角色来执行一些其他应用程序功能（例如，为他们过滤信息以简化他们所看到的内容）。由于您想要执行非安全功能，我强烈建议您将自己的字段添加到用户文档中。您可以为每个用户添加一个`institutions`属性。

* * *

如果你*真的*想这样做，有办法。您收到的错误来自数据库中的更新验证[功能](http://wiki.apache.org/couchdb/Document_Update_Validation)。作为管理员，您可以更改此功能。`_design/_auth``_users`

下载文件。打开文件并搜索`Only _admin may edit roles`以查看正在执行测试的位置。删除该条件并将文档保存回 CouchDB。

# php - 带有单独“添加到购物车”按钮的分组产品（Magento）

> ID：15258484
> 
> 赞同：1
> 
> 时间：2013-03-06T21:30:58.397
> 
> 标签：php, magento

我正在尝试在 Magento 中设置分组产品。我想要完成的是添加“添加到购物车” - 每个分组选项后面的按钮，该按钮仅将此产品添加到购物车而不是孔分组产品。

我已经设法获得“阅读更多”按钮来使用

```
<?php echo $this->htmlEscape($_item->getProductUrl()) ?> 
```

这将显示产品。

问题是，当我添加“添加到购物车”按钮时它显示错误，因为我还没有选择金额。（加入购物车前请选择数量）

是否可以为分组产品设置默认金额 = 1，然后为每个产品添加“添加到购物车”按钮？就像我对“阅读更多”所做的那样？

**更新**
这是我的 grouped.phtml 的外观：

```
?>
<?php $this->setPreconfiguredValue(); ?>
<?php $_product = $this->getProduct(); ?>
<?php $_associatedProducts = $this->getAssociatedProducts(); ?>
<?php $_hasAssociatedProducts = count($_associatedProducts) > 0; ?>
<?php if ($_product->isAvailable() && $_hasAssociatedProducts): ?>
    <p class="availability in-stock"><?php echo $this->__('Availability:') ?> <span><?php echo $this->__('In stock') ?></span></p>
<?php else: ?>
    <p class="availability out-of-stock"><?php echo $this->__('Availability:') ?> <span><?php echo $this->__('Out of stock') ?></span></p>
<?php endif; ?>
<?php echo $this->getChildHtml('product_type_data_extra') ?>
<table class="data-table grouped-items-table" id="responsive-table">
    <thead>
    <tr>
        <th><?php echo $this->__('Product Name') ?></th>
        <th><?php echo $this->__('Metode (hvordan)') ?></th>
        <th><?php echo $this->__('Sted (hvor)') ?></th>
        <th><?php echo $this->__('Tilgængelighed') ?></th>
        <th><?php echo $this->__('Fast Startdato') ?></th>
        <?php if ($this->getCanShowProductPrice($_product)): ?>
        <th><?php echo $this->__('Price') ?></th>
        <?php endif; ?>
        <?php if ($_product->isSaleable()): ?>
        <th><?php echo $this->__('Qty') ?></th>
        <?php endif; ?>
    </tr>
    </thead>
    <tbody>
    <?php if ($_hasAssociatedProducts): ?>
    <?php foreach ($_associatedProducts as $_item): ?>
    <?php $_finalPriceInclTax = $this->helper('tax')->getPrice($_item, $_item->getFinalPrice(), true) ?>
    <tr>
        <td data-title="Produkt navn"><?php echo $this->htmlEscape($_item->getName()) ?></td>
        <td data-title="Metode (hvordan)"><?php echo $_item->getAttributeText('prod_media'); ?></td>
        <td data-title="Sted (hvor)"><?php echo $_item->getAttributeText('prod_place_region'); ?></td>
        <td data-title="Tilgængelighed"><?php echo $_item->getAttributeText('prod_availability'); ?></td>
        <td data-title="Fast Startdato"><?php echo $this->htmlEscape($_item->getprod_date_startday()); ?></td>
        <td data-title="Pris">
        <?php if ($this->getCanShowProductPrice($_item)): ?>
        <?php echo $this->getPriceHtml($_item, true) ?>
        <?php echo $this->getTierPriceHtml($_item) ?>
        <?php endif; ?>
        </td>

        <?php echo $this->getTierPriceHtml($_item) ?></td>
        <?php if ($_product->isSaleable()): ?>
        <td>

        <button type="button" title="Læs mere" class="button " onclick="setLocation('<?php echo $this->htmlEscape($_item->getProductUrl()) ?>'); return false; "><span><span>Læs mere</span></span></button>
        <input type="button" title="<?php echo $this->__('Add to Cart') ?>" class="addtocart" onclick="setLocation('<?php echo Mage::getUrl('checkout/cart/add', array('product'=>$row['product_id'],'qty'=>1)) ?>')" />
        <?php if ($_item->isSaleable()) : ?>
        <input type="text" name="super_group[<?php echo $_item->getId() ?>]" maxlength="12" value="<?php echo $_item->getQty()*1 ?>" title="<?php echo $this->__('Qty') ?>" class="input-text qty" />
        <?php else: ?>
        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
        <?php endif; ?>

        </td>
        <?php endif; ?>
    </tr>
    <?php endforeach; ?>
    <?php else: ?>
       <tr>
       <td colspan="<?php if ($_product->isSaleable()): ?>4<?php else : ?>3<?php endif; ?>"><?php echo $this->__('No options of this product are available.') ?></td>
       </tr>
    <?php endif; ?>
    </tbody>
</table>
<script type="text/javascript">decorateTable('super-product-table')</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-27T18:03:25.800

```
 array('product'=>$_item->getId(),'qty'=>1)) ?>')" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:37:42.320

**编辑**：

```
<button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="addtocart" onclick="setLocation('<?php echo Mage::getUrl('checkout/cart/add', array('product'=>$_product->getProductId(),'qty'=>1)) ?>')"/> 
```

# python - 迁移 tkinter GUI 以进行远程访问？

> ID：15258488
> 
> 赞同：2
> 
> 时间：2013-03-06T21:31:11.397
> 
> 标签：python, tkinter, remote-access

我不是 UI 或网页设计师，尽管我已经制作了一堆简单的基于 Tkinter 的 GUI，它们是用于测试低级代码和硬件的简单包装器，例如用于通过串行端口或网络连接的设备的协议和数据采集测试器. 使用 Python 和 Tkinter 允许我的应用程序在每个支持 Python 的平台上运行。

现在我需要迁移我的 GUI 以支持单用户远程访问，同时仍支持本地用户的访问。而且我仍然希望该程序可以跨平台移植，甚至可以制成二进制可执行文件（通过 py2exe、pyinstaller、py2app 等）

是否有任何工具包支持类似 Tkinter 的简单性？理想情况下，我想逐行重写以将 Tkinter 换成其他东西，而不是重新实现或广泛重构我的应用程序。

我找到[了 Web2Py](http://www.web2py.com/)和[pyjs/Pyjamas](http://pyjs.org/)，但对于我的简单需求来说，它们似乎有点矫枉过正。我还搜索了基于单实例（或单窗口）VNC 或 NX 或 RDP 主机的解决方案，但没有发现任何适用的。

“远程化”我的 Tkinter GUI 最直接的方法是什么？

如果我确实需要完全转储我的 Tkinter 架构/代码并从头开始，那么哪种方法最能满足我的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:32:20.853

我建议检查一下 CherryPy。将您的头脑转起来并快速启动并运行服务器真的很容易 - 它没有许多其他框架强加的开销/复杂性（Django !!）。不幸的是，您将不得不用 html 重写 UI，但最终这很可能是值得的。查看 Twitter 的 Bootstrap，以快速且有吸引力的 UI 开始“工作”。

一个 CherryPy 应用程序如何简洁的示例：

```
import cherrypy

class SessionExample:
    @cherrypy.expose
    def index ( self ):
        if cherrypy.session.has_key ( 'color' ):
            out =  "<font color='{0}'>{0}</font>".format(cherrypy.session['color'])
        else:
            out = ""
        return out + ("<form method='POST' action='setColor'>\n"
                      "Please choose a color:<br />\n"
                      "<select name='color'>\n"
                      "<option>Black</option>\n"
                      "<option>Red</option>\n"
                      "<option>Green</option>\n"
                      "<option>Blue</option>\n"
                      "</select><br />\n"
                      "<input type='submit' value='Select' />\n"
                      "</form>"

    @cherrypy.expose
    def setColor (self, color):
        cherrypy.session ['color'] = color
        return "Color set to {}".format(color)

cherrypy.config.update({
    "server.socketPort" = 8080,
    "server.environment" = "development",
    "server.threadPool" = 10,
    "sessionFilter.on" = True
})
cherrypy.root = SessionExample()
cherrypy.server.start() 
```

在 Web 浏览器中导航到 localhost:8080，您应该会看到一个颜色选择器。简单的！

# jquery - 从对象访问控制器

> ID：15258495
> 
> 赞同：0
> 
> 时间：2013-03-06T21:31:39.353
> 
> 标签：jquery, ember.js

我有一个`currentUser`大多数时间都适合我的控制器。

我将 a 添加`findAll()`到 an`Ember.Object`以便从服务器获取所有项目。我只想获取 的项目`currentUser`，并且我试图将 合并`currentUserController`到`id`已登录的用户那里。

1.  从模型中访问控制器的用法是否不正确？
2.  如果没有，我应该如何到达控制器？

```
App.Project = Ember.Object.reopenClass({
    findAll: function() {
    allPosts = [];
    $.ajax({
      url: '/projects.json',
      type: 'GET',
      data: {'user_id': App.currentUserController.id},
      success: function(data, textStatus, xhr){

      },
      error: function(xhr, textStatus, errorThrown) {

      }
    });
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:02:59.690

是的，传统观点是模型永远不应该访问控制器。

您是否`currentUserController`有随附的路线和模板？我的意思是，如果不是，是否`currentUserController`只是作为全局变量？如果是这样，您可能只想存储`currentUserController.id`并`App.currentUserId`根据需要引用它。不是每个人都喜欢全局变量，但这将是一个使用全局变量的合理地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:39:46.187

请注意，这并不安全，因为用户可以更改变量以访问另一个帐户。后端是否没有状态能够根据会话或其他内容判断当前使用 ID 是什么？我会说使用它，不要费心将它添加到查询中。

# php - PHP自处理表单

> ID：15258502
> 
> 赞同：-1
> 
> 时间：2013-03-06T21:32:21.983
> 
> 标签：php, html

如果错误未填写表单部分，我正在尝试设置弹出错误。当我点击提交时，名称和电子邮件部分部分有效，但评论部分无效。我注意到，当我开始在评论部分输入内容时，它从大约 5 个空格开始，因此看起来该字段中有一些东西。一旦我删除它并提交表单，错误消息就会出现在评论部分，而不是像上面的 2 个字段那样位于字段的右侧？请帮忙？

```
<!DOCTYPE html>
<html>
<head>
<title>My Guestbook</title>
<style type="text/css">
.errors { color: ff0000; }
</style>
</head>
<body> 
```

```
<?php    /* Opening tag of php */

  //initialize error array
  $errors=array();

  //main logic
  if(isset($_REQUEST['submit'])){
    checkForm();
}
  else{
    printForm();
}
  //begin functions
  function checkForm()
{
  global $errors;
  if($_POST[name] == "")
      $errors['name']="<span class=\"errors\"><b>&nbsp Please, enter your Name!</span>";
  if($_POST[email] == "")
      $errors['email']="<span class=\"errors\"><b>&nbsp Please, enter your Email!</span>";
  if($_POST[myComments] == "")
      $errors['myComments']="<span class=\"errors\"><b>&nbsp Please, enter something!             </span>";          

  if(count($errors) !=0)
    printForm();
  else
    confirm();
} //end checkForm function

function confirm(){
print "<h2>Thank you for signing my guestbook</h2>";    
print "<p>Name: ".$_POST['name'];
print "</p><p>Email: ".$_POST['email'];    
print "</p><p>Comment: ".$_POST['myComments'];
print "</p><br />"; //Extra line break.

print "<em>Today is "  . date('F jS, Y.')."</em><br />"; //Extra line break. 
} //end confirm

function printForm() 
{
global $errors;
$place = $_POST[place];
// My old code I am trying to combine
print <<< HERE
 <h1>Please sign my guestbook.</h1>
 <form method="POST" action="{$_SERVER['PHP_SELF']}"> 
 <table> 
 <tr>
 <td class=name </td>Name: <br />
 <td><input type="text" name="name" id="name" value="{$_POST['name']}">
 {$errors['name']}</td>
 </tr>

 <tr>
 <td class=email</td>Email: <br />
 <td><input type="text" name="email" id="email" value"{$_POST['email']}">
 {$errors['email']}</td>
 </tr>  

 <tr>
 <td class=myComments</td>Comments:<br />
 <td><textarea type="text" name="myComments" id="mycomments" rows="4" cols="40" value"                 {$_POST['myComments']}">
 {$errors['myComments']}</textarea></td>
 </tr>

 <tr>
 <td>&nbsp;</td>
 <td><input type=submit name="submit" value="send"><input type="reset" name="clear" value=Clear>  </td>
 </tr>

 </table>
 </form>

 <br>
HERE;
 print "Today is "  . date('F jS, Y.')."<br>"; //Date printed in page below form.
 print "Form designed by Kevin O'Leary "."<br>"; //Date printed in page below form.
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:37:24.897

TextArea 没有`value`or`type`属性（即使有，值后也没有等号）。TextArea 和 /TextArea 之间的任何空格（换行符、空格、制表符等）都会显示出来，所以不要在开始和结束标记之间进行换行。

您可能希望您的 TextArea 标记看起来像这样：

```
<textarea name="myComments" id="mycomments" rows="4" cols="40">{$_POST['myComments']}</textarea> {$errors['myComments']} 
```

这将导致`$_POST['myComments']`显示在 TextArea 中，并`$errors['myComments']`显示在 textarea 的右侧（或下方，如果 textarea 太宽并导致它换行）。

此外，您的电子邮件字段在值之后也没有等号。

看看这个以获取有关 textarea 使用的更多信息：[https ://developer.mozilla.org/en-US/docs/HTML/HTML_Elements/textarea](https://developer.mozilla.org/en-US/docs/HTML/HTML_Elements/textarea)

# html - 悬停在菜单上时显示文本

> ID：15258504
> 
> 赞同：1
> 
> 时间：2013-03-06T21:32:27.770
> 
> 标签：html, css, twitter-bootstrap

我一直在使用 twitter 引导程序在我的网站上工作，但有一件事我可能做得不对。

当我将鼠标悬停在其中一个链接上时，我希望在菜单中显示一些文本。这是我所拥有的：

HTML：

```
<div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
          <!-- Responsive Navbar Part 1: Button for triggering responsive navbar (not covered in tutorial). Include responsive CSS to utilize. -->
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <!-- Responsive Navbar Part 2: Place all navbar contents you want collapsed withing .navbar-collapse.collapse. -->
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="portfolio.html" title="Back to Portfolio">Back</a></li>
              <li><a href="prev_page.html" class=""previous >Previous</a></li>
              <li><a href="next_page.html" class="next" >Next</a></li>
              <li><span class="shownext">View next</span></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div><!-- /.navbar-inner -->
      </div><!-- /.navbar navbar-inverse--> 
```

CSS：

```
.nav .shownext {
    font-weight: normal;
    font-style: italic;
    font-size: 11px;
    display: none;
}

.next:hover + .nav .shownext {
    display: block;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:14:23.487

您可以使用[工具提示](http://twitter.github.com/bootstrap/javascript.html#tooltips)来花哨或仅使用**标题**属性：

```
<div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
          <!-- Responsive Navbar Part 1: Button for triggering responsive navbar (not covered in tutorial). Include responsive CSS to utilize. -->
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <!-- Responsive Navbar Part 2: Place all navbar contents you want collapsed withing .navbar-collapse.collapse. -->
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="portfolio.html" data-toggle="tooltip" data-placement="left" title="first tooltip" title="Back to Portfolio">Back</a></li>
              <li><a href="prev_page.html" data-toggle="tooltip" data-placement="bottom" title="second tooltip" class=""previous >Previous</a></li>
              <li><a href="next_page.html" data-toggle="tooltip" data-placement="top" title="third tooltip" class="next" >Next</a></li>
              <li><span class="shownext" data-toggle="tooltip" data-placement="top" title="view next">View next</span></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div><!-- /.navbar-inner -->
      </div><!-- /.navbar navbar-inverse--> 

<script>$('li a').tooltip(options)</script> 
```

结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:18:16.160

这有点像你问的。但是由于您的问题并不具体，我认为这不是您真正想要的。

[http://jsfiddle.net/xM6u9/1/](http://jsfiddle.net/xM6u9/1/)

```
<div class="navbar">
    <div class="navbar-inner"> <a class="brand" href="#">Title</a>
        <ul class="nav">
            <li class="active"><a href="#">Home</a>
            </li>
            <li><a href="#">Link</a>
            </li>
            <li><a href="#">Link</a>
            </li>
            <li class="shownext"><a href="#">Next</a>
            </li>
        </ul>
    </div>
</div> 
```

CSS：

```
.shownext { display: none; }
li:hover + .shownext { display: block; } 
```

当您将鼠标悬停在最后一个项目上时，会显示“下一个”。

# python - os.path.islink 在 windows 上使用 python

> ID：15258506
> 
> 赞同：12
> 
> 时间：2013-03-06T21:32:33.637
> 
> 标签：python, windows, symlink, pywin32

在带有 Python 2.7 的 Windows 7 上，如何检测路径是否为符号链接？这不起作用`os.path.islink()`，它说如果 false 或不支持它会返回 false 并且我提供的路径绝对是符号链接，所以我假设它在 windows 上不受支持？我能做些什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-06T22:05:39.963

根本问题是您使用的 Python 版本太旧。如果您想坚持使用 2.x，您将无法利用 2010 年初之后添加的新功能。

其中一项功能是处理 NTFS 符号链接。该功能于 2010 年底在 3.2 中添加。（有关详细信息，请参阅[3.2](http://hg.python.org/cpython/file/3.2/Lib/ntpath.py#l321)、[3.1](http://hg.python.org/cpython/file/3.1/Lib/ntpath.py#l317)和[2.7](http://hg.python.org/cpython/file/2.7/Lib/ntpath.py#l210)源代码。）

在那之前 Python 没有处理 NTFS 符号链接的原因是直到 2009 年底才出现这种情况。（IIRC，支持包含在 6.0 内核中，但用户态支持需要 Vista/2008 上的服务包；只有 7/2008R2 和较新的内置了它。另外，您需要一个足够新的 MSVCRT 才能访问该用户区支持，并且 Python 有一个明确的政策，即在次要版本中不升级到新的 Visual Studio 版本。）

代码没有移植回 2.x 的原因是[永远不会有 2.8](http://www.python.org/dev/peps/pep-0404/)，并且像 2.7.3（或 2.7.4）这样的错误修复版本没有新功能，只有错误修复。

这已报告为[问题 13143](http://bugs.python.org/issue13143)，并且预期的修复是更改 2.7 文档以澄清`islink`始终`False`在 Windows 上返回。

所以，如果你想在 Windows 下阅读 NTFS 符号链接，要么升级到 Python 3.2+，要么你必须使用[`win32api`](http://sourceforge.net/projects/pywin32/),[`ctypes`](http://docs.python.org/2/library/ctypes.html)等自行完成。

或者，正如 Martijn Pieters 所建议的那样，与其自己做，不如使用第三方库[`jaraco.windows`](https://bitbucket.org/jaraco/jaraco.windows)和/或借用[他们的代码](https://bitbucket.org/jaraco/jaraco.windows/src/default/jaraco/windows/filesystem/__init__.py)。

或者，如果您真的愿意，可以从 3.2 源代码中借用代码并围绕它构建一个 C 扩展模块。如果您从`ntpath`to 到`os`to `nt`（实际上是`posixmodule.c`），我相信它的胆量在[`win32_xstat_impl`and`win32_xstat_impl_w`](http://hg.python.org/cpython/file/3.2/Modules/posixmodule.c#l1719)中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-26T23:51:09.883

这就是我最终用来确定文件或目录是否是 Windows 7 中的链接的方法：

```
from subprocess import check_output, CalledProcessError
import os.path
import ctypes
def isLink(path):
    if os.path.exists(path):
        if os.path.isdir(path):
            FILE_ATTRIBUTE_REPARSE_POINT = 0x0400
            attributes = ctypes.windll.kernel32.GetFileAttributesW(unicode(path))
            return (attributes & FILE_ATTRIBUTE_REPARSE_POINT) > 0
        else:
            command = ['dir', path]
            try:
                with open(os.devnull, 'w') as NULL_FILE:
                    o0 = check_output(command, stderr=NULL_FILE, shell=True)
            except CalledProcessError as e:
                print e.output
                return False
            o1 = [s.strip() for s in o0.split('\n')]
            if len(o1) < 6:
                return False
            else:
                return 'SYMLINK' in o1[5]
    else:
        return False 
```

编辑：根据 Zitrax 和 Annan 的建议修改代码

编辑：根据 shioko 的建议添加了包含语句

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-10T11:55:51.867

对于目录：

```
import os, ctypes
def IsSymlink(path):
    FILE_ATTRIBUTE_REPARSE_POINT = 0x0400
    return os.path.isdir(path) and (ctypes.windll.kernel32.GetFileAttributesW(unicode(path)) & FILE_ATTRIBUTE_REPARSE_POINT): 
```

[资源](https://web.archive.org/web/20170604142456/http://tomjbward.co.uk/detect-symlink-using-python-2-x-on-windows/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-10T15:25:28.380

也可以使用 pywin32 模块：`GetFileAttributes`在`win32api`子模块和模块`FILE_ATTRIBUTE_REPARSE_POINT`中都有`win32con`。例如，要测试给定路径是否是目录的符号链接，代码变为：

```
import os
import win32api
import win32con

def is_directory_symlink(path):
    return bool(os.path.isdir(path) 
                and (win32api.GetFileAttributes(path) &
                     win32con.FILE_ATTRIBUTE_REPARSE_POINT)) 
```

如果使用 Python 2 并且路径可能包含非 ascii 字符，则`GetFileAttributes`需要 unicode 字符串。但是，简单地使用`unicode(path)`通常会失败：您应该测试 if`path`是 a `str`，如果是，则使用它的`decode`方法。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-08-09T13:17:28.127

只为我使用`if file[-4:len(file)] != ".lnk":`作品

# amazon-web-services - 奇怪的 CloudWatch 警报行为

> ID：15258507
> 
> 赞同：7
> 
> 时间：2013-03-06T21:32:38.993
> 
> 标签：amazon-web-services, amazon-cloudwatch

我有一个每 2 小时运行一次的备份脚本。我想使用 CloudWatch 来跟踪此脚本的成功执行，并使用 CloudWatch 的警报来在脚本遇到问题时得到通知。

每次成功备份后，该脚本都会在 CloudWatch 指标上放置一个数据点：

```
 mon-put-data --namespace Backup --metric-name $metric --unit Count --value 1 
```

每当指标上的统计“总和”在 6 小时内小于 2 时，我就有一个警报进入 ALARM 状态。

为了测试这个设置，一天后，我停止将数据放入指标中（即，我注释掉了 mon-put-data 命令）。很好，最终警报进入 ALARM 状态，我收到了一封电子邮件通知，正如预期的那样。

问题是，一段时间后，警报又回到 OK 状态，但是没有新数据被添加到指标中！

已经记录了两个转换（OK => ALARM，然后 ALARM => OK），我在这个问题中重现了日志。请注意，虽然两者都显示“周期：21600”（即 6 小时），但第二个显示 startDate 和 queryDate 之间的 12 小时时间跨度；我看到这可能解释了这种转变，但我不明白为什么 CloudWatch 考虑使用 12 小时的时间跨度来计算 6 小时的统计数据！

我在这里想念什么？如何配置警报以实现我想要的（即，如果没有进行备份，则会收到通知）？

```
{
    "Timestamp": "2013-03-06T15:12:01.069Z",
    "HistoryItemType": "StateUpdate",
    "AlarmName": "alarm-backup-svn",
    "HistoryData": {
        "version": "1.0",
        "oldState": {
            "stateValue": "OK",
            "stateReason": "Threshold Crossed: 1 datapoint (3.0) was not less than the threshold (3.0).",
            "stateReasonData": {
                "version": "1.0",
                "queryDate": "2013-03-05T21:12:44.081+0000",
                "startDate": "2013-03-05T15:12:00.000+0000",
                "statistic": "Sum",
                "period": 21600,
                "recentDatapoints": [
                    3
                ],
                "threshold": 3
            }
        },
        "newState": {
            "stateValue": "ALARM",
            "stateReason": "Threshold Crossed: 1 datapoint (1.0) was less than the threshold (2.0).",
            "stateReasonData": {
                "version": "1.0",
                "queryDate": "2013-03-06T15:12:01.052+0000",
                "startDate": "2013-03-06T09:12:00.000+0000",
                "statistic": "Sum",
                "period": 21600,
                "recentDatapoints": [
                    1
                ],
                "threshold": 2
            }
        }
    },
    "HistorySummary": "Alarm updated from OK to ALARM"
} 
```

第二个，我根本无法理解：

```
{
    "Timestamp": "2013-03-06T17:46:01.063Z",
    "HistoryItemType": "StateUpdate",
    "AlarmName": "alarm-backup-svn",
    "HistoryData": {
        "version": "1.0",
        "oldState": {
            "stateValue": "ALARM",
            "stateReason": "Threshold Crossed: 1 datapoint (1.0) was less than the threshold (2.0).",
            "stateReasonData": {
                "version": "1.0",
                "queryDate": "2013-03-06T15:12:01.052+0000",
                "startDate": "2013-03-06T09:12:00.000+0000",
                "statistic": "Sum",
                "period": 21600,
                "recentDatapoints": [
                    1
                ],
                "threshold": 2
            }
        },
        "newState": {
            "stateValue": "OK",
            "stateReason": "Threshold Crossed: 1 datapoint (3.0) was not less than the threshold (2.0).",
            "stateReasonData": {
                "version": "1.0",
                "queryDate": "2013-03-06T17:46:01.041+0000",
                "startDate": "2013-03-06T05:46:00.000+0000",
                "statistic": "Sum",
                "period": 21600,
                "recentDatapoints": [
                    3
                ],
                "threshold": 2
            }
        }
    },
    "HistorySummary": "Alarm updated from ALARM to OK"
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T17:20:25.567

这种行为（您的监视器没有转换到 INSFUCCIENT_DATA 状态是因为 Cloudwatch 考虑“预时间戳”指标数据点，因此（对于 6 小时警报）如果当前 6 小时开放时间窗口中不存在数据..它将获取数据从前 6 小时窗口（因此您在上面看到的 12 小时时间戳）。

要提高警报的“保真度”，请将警报周期减少到 1 小时/3600 秒，并将评估周期数增加到您希望在失败时发出警报的周期数。这将确保您的警报按您的预期转换为 INSFUCCIENT_DATA。

> 如何配置警报以实现我想要的（即，如果没有进行备份，则会收到通知）？

如果您的工作成功，则警报的可能架构将发布 1，如果失败，则发布 0。然后创建一个阈值小于 1 的警报，持续 3 - 3600 秒，这意味着如果作业失败（即正在运行.. 但失败），您的警报将进入 ALARM。如果您还对该警报设置了 INSFUCCIENT_DATA 操作，那么如果您的作业根本没有运行，您也会收到通知。

希望这是有道理的。

# sql-server - 关于在 SQL Server 中使用 XQuery 进行排序的问题

> ID：15258516
> 
> 赞同：2
> 
> 时间：2013-03-06T21:33:11.113
> 
> 标签：sql-server, sorting, xquery, xquery-sql

像下面这样在 SQL Server 中使用 XQuery的结果是否`SELECT`保证按文档顺序排列，即节点按原始顺序列在 xml 字符串中？

```
DECLARE @x XML = '<hey i="3"/><hey i="4"/><hey i="0"/>'
SELECT t.i.value('.', 'int')
FROM @x.nodes('/hey/@i') t(i) 
```

我问是因为一般来说`SELECT`，除非提供订单，否则声明不保证订单。

此外，如果此订单得到（或不）保证，是否正式记录在某个地方，也许在微软的网站上？

最后，是否可以对文档顺序进行排序或根据`SELECT`语句中的原始文档顺序进行其他奇怪的排序和查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:06:33.857

这 `DECLARE @x XML = '<hey i="3"/><hey i="4"/><hey i="0"/>'` 是一个 XML“序列”的例子。根据定义，如果没有排序顺序，则选择应始终以文档的原始顺序返回。

如前所述，您可以更改排序顺序。这是一个例子：

选择 tivalue('.', 'int') 作为 x，ROW_NUMBER() OVER(ORDER BY (SELECT NULL)) 作为 rn

FROM @x.nodes('/hey/@i') t(i)

按 rn desc 排序

以下是 Microsoft 网站上有关序列的一些信息：

[http://msdn.microsoft.com/en-us/library/ms179215(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms179215(v=sql.105).aspx)

这是对 Xquery 中序列的更一般性的讨论。

[http://en.wikibooks.org/wiki/XQuery/Sequences](http://en.wikibooks.org/wiki/XQuery/Sequences)

* * *

在阅读了我上面提到的 Microsoft 网站上的页面后，我意识到我上面的原始答案是不正确的。该页面说您需要在元素之间使用逗号来构建序列。给出的示例不是“序列”。但是，我关于更改排序顺序的原始信息代表:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:24:21.840

您可以将 order by 子句添加到 select 语句中。

```
DECLARE @x XML = '<hey i="3"/><hey i="4"/><hey i="0"/>'SELECT [column1] = t.i.value('.', 'int') FROM @x.nodes('/hey/@i') t(i)  order by column1 desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T23:20:31.343

我知道你的意思。我怀疑该订单将是文档订单，但文档并没有说清楚，并且隐含地依赖它并不好。

对订单有信心的一种方法是：

```
DECLARE @x XML = '<hey i="3"/><hey i="4"/><hey i="0"/>';
select @x.value('(/hey[sql:column("id")]/@i)[1]', 'int'), id
from (
    select row_number() over (order by (select 0)) as id
    from @x.nodes('/hey') t(i)
) t
order by id 
```

然后，这将为您提供一种回答其他问题的方法，即以相反的顺序或其他顺序获取值。

注意随着 XML 大小的增加，这将比仅使用节点慢得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T13:17:27.527

我认为 Select 的相同规则在这里适用，无论您是从普通表还是 XML 中选择。有选择部分，还有投影部分，引擎可以采用不同的路径来检索您的数据（例如，从中间横向）。不幸的是，我找不到任何官方文件来支持这一点。当然，没有可以访问和操作的内在表格/文档顺序。

# android - 宽度为“wrap_content”的多行文本视图

> ID：15258522
> 
> 赞同：20
> 
> 时间：2013-03-06T21:33:21.037
> 
> 标签：android, textview

我想知道如何在[不硬编码 XML 中的宽度的情况下](https://stackoverflow.com/questions/6674578/multiline-textview-in-android)`TextView`在几行上显示其内容。

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:orientation="horizontal">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="false"
            android:text="Long multiline text"/>

        <TextView
            android:textColor="@color/text_color"
            android:layout_width="130dp"
            android:layout_height="wrap_content"
            />

    </LinearLayout> 
```

欢迎任何想法。

**编辑**：我的问题是，当文本超过设置的宽度时（因为它到达屏幕的末尾），部分文本不会显示。我希望文本分成两行

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-06T22:51:11.860

虽然我无法重现未换行的问题，但您可以通过`weight`在第一个上使用 a 来解决定位问题`TextView`。使用以下 XML 在 Eclipse 的图形布局视图中提供预期的输出：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:orientation="horizontal">

    <TextView
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:singleLine="false"
        android:text="Long multiline text"/>

    <TextView
        android:textColor="@color/text_color"
        android:layout_width="130dp"
        android:layout_height="wrap_content"
        />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-06T12:30:32.707

还添加

```
android:minLines="2"
android:scrollHorizontally="false" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T16:43:25.880

你可以试试

```
android:inputType="textMultiLine" 
```

在您的 TextView XML 中。这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-22T00:53:23.790

我想我有非常相似的问题。我有`TextView`一个文本，我不确定它需要多少行。它被封装为`LinearLayout`必须`android:layout_width="match_parent"`确保我的文本将水平填充所有空间。但是，问题是我的文本不适合 1 行，当它确实分成新行时，它下面的下一个视图组件没有向下移动以提供足够的空间让第二行完全可见。

我可以通过将`LinearLayout`包含 my的内容更改`TextView`为**`RelativeLayout`**. 通过这种方式，文本下方的元素（实际上是布局本身下方）被自动移动，以便为多行文本提供足够的空间。

# c++ - C++11：格式错误的调用是未定义的行为？

> ID：15258525
> 
> 赞同：13
> 
> 时间：2013-03-06T21:33:46.373
> 
> 标签：c++, templates, c++11, language-lawyer

N3485 的第 14.6.4.2 节规定了以下有关依赖候选函数查找的内容：

> 如果调用格式错误或找到更好的匹配，则在关联命名空间中的查找考虑所有翻译单元中这些命名空间中引入的具有外部链接的所有函数声明，而不仅仅是考虑在模板定义和模板中找到的那些声明实例化上下文，则程序具有未定义的行为。

调用“格式错误”究竟意味着什么，查找如何选择格式错误的调用？另外，如果考虑到所有翻译单元，为什么找到更好的匹配很重要？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-06T22:03:05.373

> 呼叫“格式错误”到底意味着什么

形式上，[defns.ill.formed] 将格式错误定义为格式不正确，[defns.well.formed] 将格式正确的程序定义为：

> 根据语法规则、可诊断语义规则和单一定义规则 (3.2) 构建的 C++ 程序。

因此，格式错误的调用是具有无效语法或可诊断错误的调用，例如传递错误数量的参数，或无法转换为参数类型的参数，或重载歧义。

> 查找如何选择格式错误的调用？

我认为它的意思是“如果（调用将不正确 || 会找到更好的匹配）在相关命名空间中的查找考虑了所有具有外部链接的函数声明......”，这意味着如果考虑到你有未定义的行为其他函数会找到相等或更好的匹配。同样好的匹配会使调用模棱两可，即格式错误，而更好的匹配会导致调用不同的函数。

因此*，如果*在另一个上下文中调用会模棱两可或导致另一种错误，但由于仅在实例化和定义上下文中考虑一组有限的名称而成功，则它是未定义的。如果*在*另一个上下文中调用会选择更好的匹配，那也是未定义的。

> 另外，如果考虑到所有翻译单元，为什么找到更好的匹配很重要？

我认为该规则的原因是不允许在两个不同的上下文中实例化相同的模板特化导致它调用两个不同的函数的情况，例如，如果在一个翻译单元中调用找到一个函数，而在另一个翻译单元中找到不同的函数函数，您将获得同一模板的两个不同实例化，这违反了 ODR，并且链接器只会保留一个实例化，因此链接器未保留的实例化将被调用的函数替换'甚至在模板被实例化的地方都不可见。

这与上一段的最后一句话相似（如果尚未涵盖）：

> 任何模板的特化都可能在多个翻译单元中具有实例化点。如果根据一个定义规则（3.2），两个不同的实例化点赋予模板特化不同的含义，则程序是非良构的，不需要诊断。

C++ ARM (Ellis & Stroustrup) 的第 426 页为该文本提供了一些上下文（我相信 14.6.4.2 也是如此），并比我上面所做的更简洁明了地解释它：

> 这似乎意味着从模板中使用的全局名称可以绑定到不同编译单元中的不同对象或函数，甚至可以绑定到编译单元中的不同点。但是，如果发生这种情况，生成的模板函数或类将被“单一定义”规则（第 7.1.2 节）视为非法。

[basic.def.odr]/6 中还有另一个相同规则的相关表述

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-06T23:17:48.087

问题是命名空间可以零碎地定义，所以没有**一个**地方可以保证定义一个命名空间的所有成员。因此，不同的翻译单元可以看到不同的命名空间成员集。本节所说的是，如果未看到的部分会影响查找，则行为未定义。例如：

```
namespace mine {
    void f(double);
}

mine::f(2); // seems okay...

namespace mine {
    void f(char);
}

mine::f(2); // ambiguous, therefore ill-formed 
```

该规则说，第一次调用会`f(2)`产生未定义的行为，因为如果此时所有的重载`mine`都可见，那么它将是不正确的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T22:29:27.267

基于[@tletnes 的部分答案](https://stackoverflow.com/a/15259162/1424877)，我想我想出了一个简单的程序来触发这种特殊的未定义行为。当然，它使用多个翻译单元。

```
cat >alpha.cc <<EOF
#include <stdio.h>
void customization_point(int,int) { puts("(int,int)"); }
#include "beta.h"
extern void gamma();
int main() {
    beta(42);
    gamma();
}
EOF

cat >gamma.cc <<EOF
#include <stdio.h>
void customization_point(int,double) { puts("(int,double)"); }
#include "beta.h"
void gamma() { beta(42); }
EOF

cat >beta.h <<EOF
template<typename T>
void beta(T t) {
    customization_point(t, 3.14);
}
EOF 
```

用不同的优化级别编译这个程序会改变它的行为。根据标准，这没关系，因为“alpha.cc”中的调用会调用未定义的行为。

```
$ clang++ alpha.cc gamma.cc -O1 -w ; ./a.out
(int,int)
(int,int)
$ clang++ alpha.cc gamma.cc -O2 -w ; ./a.out
(int,int)
(int,double) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T22:13:54.670

当我阅读这条规则时，我想类似于以下的代码至少是正在考虑的部分：

```
int foo(int a; int b){ printf("A"); }

int main(){
   foo(1, 1.0);
}

int foo(int a, double b){ printf("B"); } 
```

或者

```
int foo(int a);

int main(){
   foo(1);
}

int foo(int a, double b){ printf("B"); } 
```

# php - 过期时间导致缓存错误

> ID：15258544
> 
> 赞同：0
> 
> 时间：2013-03-06T21:35:29.557
> 
> 标签：php, caching, yii

我正在使用文件缓存 (CFileCache) 来显示来自数据库表的简单消息。第一次加载页面时它可以正常工作，但是当我重新加载页面时它会出错：include（CTimestampBehavior.php）[function.include]：无法打开流：没有这样的文件或目录

并且此错误一直存在，直到我在 cache->set() 中设置的 TIME EXPIRATION 并且下一页仅加载一次，然后再次出错，依此类推。

这是我处理缓存的方法：

```
public static function getLatest()
    {

        //see if it is in the cache, if so, just return it
        if( ($cache=Yii::app()->cache)!==null)
        {

            $key='TrackStar.ProjectListing.SystemMessage';
            if(($sysMessage=$cache->get($key))!==false)
            return $sysMessage;
        }
        //The system message was either not found in the cache, or
        //there is no cache component defined for the application
        //retrieve the system message from the database

        $sysMessage = SysMessage::model()->find(array(
        'order'=>'t.update_time DESC',
        ));
        if($sysMessage != null)
        {
            //a valid message was found. Store it in cache for future retrievals
            if(isset($key))
                //$cache->set($key,$sysMessage,300);
                $cache->set($key, $sysMessage, 300, new CDbCacheDependency('SELECT MAX(update_time) FROM tbl_sys_message'));
            return $sysMessage;
        }
        else
        return null;
    } 
```

此行出现错误：

```
if(($sysMessage=$cache->get($key))!==false) 
```

我是 Yii 和缓存的新手，对此一无所知。

更新：AR模型的行为方法：

```
public function behaviors()
        {
            return array(
                'CTimestampBehavior' => array(
                'class' => 'zii.behaviors.CTimestampBehavior',
                'createAttribute' => 'create_time',
                'updateAttribute' => 'update_time',
                'setUpdateOnCreate' => true,
                ),
            );
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:56:43.637

这看起来像您的问题是：

*   缺少框架/zii/behaviors/CTimestampBehavior.php
*   framework/zii/behaviors/CTimestampBehavior.php 没有正确的权限被您的服务器用户读取
*   您正在使用操作码缓存（APC？），并且在这方面存在一些问题（尽管对此的报告似乎是随机发生的）。尝试禁用它。
*   由于某些未知原因，Yii 不导入您的 zii 路线

无论如何，我建议尝试将“zii.behaviors.CTimestampBehavior”添加到您的 main.php 配置文件“导入”部分的解决方法。或者简单地调用 Yii::import('zii.behaviors.CTimestampBehavior'); 在你的功能中。希望这行得通，您可以在有时间的时候继续您的工作，同时深入研究这个问题。

如果不是，您可以调查上述内容（至少来这里的人会有更多信息可以使用）

# java - JAXB 从 xsds 生成类总是有 @XmlElement(required=true)

> ID：15258545
> 
> 赞同：2
> 
> 时间：2013-03-06T21:35:43.143
> 
> 标签：java, xml, xsd, jaxb, maven-jaxb2-plugin

我的 xml 架构定义如下

```
<?xml version="1.0" encoding="UTF-8"?>

<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns="http://poc/"
elementFormDefault="qualified"
targetNamespace="http://poc/"
attributeFormDefault="unqualified"
xmlns:tns="http://poc/">

<xs:simpleType name="custType">
    <xs:restriction base="xs:string">
        <xs:enumeration value="Primary"/>
        <xs:enumeration value="Coapplicant"/>
    </xs:restriction>
</xs:simpleType>
<xs:complexType name="addressType">
    <xs:sequence>
        <xs:element name="address" type="xs:string"/>
        <xs:element name="city" type="xs:string"/>
        <xs:element name="state" type="xs:string" minOccurs="0"/>
        <xs:element name="zip" type="xs:string" minOccurs="0"/>
    </xs:sequence>
</xs:complexType>

<xs:element name="request1">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="fname" type="xs:string" minOccurs="0"/>
            <xs:element name="lname" type="xs:string" minOccurs="0"/>
            <xs:element maxOccurs="1" name="categoryCode" minOccurs="0">
                <xs:simpleType>
                   <xs:restriction base="xs:integer">
                    <xs:maxLength value="4"/>
                   </xs:restriction>
               </xs:simpleType>
            </xs:element>
            <xs:element name="retiredInd" type="xs:boolean" minOccurs="0"/>
            <xs:element name="custType" type="tns:custType" minOccurs="0"/> 
        </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:element name="response1">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="addr" type="tns:addressType" minOccurs="0"/>
            <xs:element name="nation" type="xs:token" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
</xs:schema> 
```

我使用 maven-jaxb2-plugin 针对这个 xsd 生成 Java 类。

```
<plugin>
    <groupId>org.jvnet.jaxb2.maven2</groupId>
    <artifactId>maven-jaxb2-plugin</artifactId>
    <version>0.8.3</version>
    <configuration>
        <schemaDirectory>${basedir}/cfg</schemaDirectory>
        <schemaIncludes>
            <include>xsd/*.xsd</include>
        </schemaIncludes>
        <generateDirectory>${basedir}/src/main/java</generateDirectory>
        <strict>false</strict>
        <extension>true</extension>
        <removeOldOutput>false</removeOldOutput>
        <clearOutputDir>false</clearOutputDir>
        <forceRegenerate>true</forceRegenerate><plugins>
            <plugin>
                <groupId>org.jvnet.jaxb2_commons</groupId>
                <artifactId>jaxb2-basics</artifactId>
                <version>0.6.4</version>
            </plugin>
            <plugin>
                <groupId>org.jvnet.jaxb2_commons</groupId>
                <artifactId>jaxb2-basics-annotate</artifactId>
                <version>0.6.4</version>
            </plugin>
        </plugins>
    </configuration>
    <executions>
        <execution>
        <id>tsys-sources</id>
        <goals>
            <goal>generate</goal>
        </goals>
        </execution>
    </executions>
</plugin> 
```

生成代码后，我发现所有元素都有@XmlElement(required = true)的注解。为什么？我有很多 minOccurs="0" 元素。为什么总是在元素上添加 required=true。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T09:38:19.207

我从你的例子中生成源代码，使用你的例子中的插件
，我`@XmlElement(required = true)`只有

```
AddressType#address  
AddressType#city 
```

字段。

```
public class AddressType {

    @XmlElement(required = true)
    protected String address;
    @XmlElement(required = true)
    protected String city;
    protected String state;
    protected String zip;   
    // ...  
} 
```

因此，`minOcurrs`也添加到此字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:36:32.707

我的 binding.xml 中的本地配置问题。我在清除了一些无用的配置后修复了它。

# ms-access - Microsoft Access 可以自动完成字段吗？

> ID：15258547
> 
> 赞同：6
> 
> 时间：2013-03-06T21:35:49.317
> 
> 标签：ms-access, combobox, textbox, ms-access-2007

我正在使用 Microsoft Access 2007。当我开始输入新记录时，有没有办法访问建议我以前输入的内容，以节省我输入整个单词的时间？例如，当我开始输入 S 时，它可能会开始提示我已经输入的以 S 开头的单词，然后如果我输入 ST，它可能会提示 STATION，我可以按 Enter 键插入该单词？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T21:46:12.917

您的问题包括*combobox*的标签；在我看来，这可能是最便宜的解决方案。

使组合行源成为查询：

```
SELECT DISTINCT YourField
FROM YourTable
ORDER BY YourField; 
```

将组合的“列表限制”属性设置为“否”，用户可以添加先前存储的值中不存在的值。

或者，将该属性设置为“Yes”并为组合的“On Not in list”事件编写 VBA 代码。

无论哪种方式，您都应该在`YourField`. 您可以`.Requery`从表单的`On Current`事件中获取组合的行源，以便它“刷新”以获取最新添加的内容。

# android - 带有 GooglePlayServicesUtil.getErrorDialog() 的 GoogleMaps android 应用

> ID：15258550
> 
> 赞同：3
> 
> 时间：2013-03-06T21:35:54.800
> 
> 标签：android, google-maps, google-play-services

所以在这里的文档中

[http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)

它说要检查播放服务的状态，`isGooglePlayServicesAvailable()`如果不正常则显示错误对话框。

这对我来说似乎工作正常，显示它未安装的对话框带有打开播放商店的按钮似乎一切正常。我的问题是关于返回的结果`onActivityResult()`。

我们必须传递一个`requestCode`to `getErrorDialog()`，我把它拿回来`onActivityResult`就好了，但我更关心`resultCode`返回。到目前为止，我所有的测试都得到了 0 ( `RESULT_CANCELLED`)。我想知道是否有任何方法可以知道播放服务是否安装成功？

现在我正在处理它，只是假设这`RESULT_CANCELLED`意味着他们至少到达了 Play 商店并开始下载，并显示另一个对话框，上面写着“一旦 Play 服务完成安装，请重新启动这个应用程序”，然后是`finish()`.

这是最好的处理方式吗？或者是否有一种情况我错过了它会返回的地方`RESULT_OK`，我可以继续我的应用程序工作而无需重新启动它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T16:04:57.853

我必须说，今天我试过了，我从来没有调用过 onActivityResult()。

当对话框被取消时，我的 OnCancelListener（getErrorDialog() 参数）被调用，当从 PlayStore 返回时，无论是否安装 Google Play 服务，我的应用程序都会被破坏。

更重要的是，在安装 Google Play 服务时，会在安装开始时调用 onDestroy()。

我认为这可能是一种更新的行为，我认为是随之而来的，因为您可以在后台安装结束之前从 Play 商店返回。

尽管如此，我还是找到了一些带有示例代码的链接，如果使用 RESULT_OK 调用 onActivityResult() 可以确认，这意味着您可以继续：

[http://developer.android.com/training/location/activity-recognition.html](http://developer.android.com/training/location/activity-recognition.html)

[http://developer.android.com/training/location/retrieve-current.html](http://developer.android.com/training/location/retrieve-current.html)

希望能帮助到你

# jquery - JQuery将选择框选定的值从一个选择框复制到另一个

> ID：15258551
> 
> 赞同：3
> 
> 时间：2013-03-06T21:35:59.377
> 
> 标签：jquery, select, jquery-selectors

我有 3 个选择框，我想将所选值复制到第二个选择框，然后从第二个框复制到第三个选择框。选择框将通过 3 个选择框具有相同的选项。

我该怎么办？

JSFiddle [http://jsfiddle.net/andrewvmail/27rFQ/3/](http://jsfiddle.net/andrewvmail/27rFQ/3/)

```
 A:<select id="inputsa">
    <option id="inputa"  name="input[1][]">A</option>
    <option id="inputb" name="input"> B</option>
    <option id="inputc"  name="input[2][]"> C</option>
</select> 
B:<select id="inputsb">
    <option id="inputa"  name="input[1][]">A</option>
    <option id="inputb" name="input"> B</option>
    <option id="inputc"  name="input[2][]"> C</option>
</select> 
C:<select id="inputsc">
    <option id="inputa"  name="input[1][]">A</option>
    <option id="inputb" name="input">B</option>
    <option id="inputc"  name="input[2][]">C</option>
</select> 

<br>    

    <input id="copyAtoB" type="button" value="Copy A to B" onclick="functionCopyAtoB();">
        <br>
    <input id="copyBtoC" type="button" value="Copy B to C" onclick="functionCopyBtoC();"> 
```

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T21:55:44.267

```
function functionCopyAtoB() {
    $('#inputsb').val($('#inputsa').val());
}
function functionCopyBtoC() {
    $('#inputsc').val($('#inputsb').val());
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/27rFQ/44/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:59:34.940

用这个...

```
$(':button').on('click', function(){
    if($(this).attr('id') == 'copyAtoB'){
        $('#inputsb').val($('#inputsa').val());
        $('#inputsb').attr('selected', true);
    }else if($(this).attr('id') == 'copyBtoC'){
        $('#inputsc').val($('#inputsb').val());
        $('#inputsc').attr('selected', true);
    }
}); 
```

并看到这个[jsFiddle 示例](http://jsfiddle.net/27rFQ/17/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:59:57.627

请注意，以下*所有*示例均基于更正的 HTML（`<option>`标签以 结束`</option>`，而***不是***，正如您似乎认为的那样，`</input>`标签，*没有*元素以`</input>`标签结束）：

```
A:
<select id="inputsa">
    <option id="inputa" name="input[1][]">A</option>
    <option id="inputb" name="input">B</option>
    <option id="inputc" name="input[2][]">C</option>
</select>B:
<select id="inputsb">
    <option id="inputa" name="input[1][]">A</option>
    <option id="inputb" name="input">B</option>
    <option id="inputc" name="input[2][]">C</option>
</select>C:
<select id="inputsc">
    <option id="inputa" name="input[1][]">A</option>
    <option id="inputb" name="input">B</option>
    <option id="inputc" name="input[2][]">C</option>
</select>
<br>
<input id="copyAtoB" type="button" value="Copy A to B" data-from="a" data-to="b">
<br>
<input id="copyBtoC" type="button" value="Copy B to C" data-from="b" data-to="c"> 
```

一种方法：

```
function copyValue(from,to){
    /* these lines check if the supplied variables are Objects, with a
       typeof check, if they *are* they're assumed to be jQuery objects
       and that object is retained in the variable; otherwise it's assumed
       to be the String of an id, and a jQuery object is created, and
       assigned to the variable. */
    from = typeof from == "object" ? from : $('#' + from);
    to = typeof to == "object" ? to : $('#' + to);

    // gets the selected option, and copies that to the other node/object
    to[0].selectedIndex = from[0].selectedIndex;
}

$('#copyAtoB').click(function(e){
    e.preventDefault();
    copyValue($('#inputsa'),$('#inputsb'));
});

$('#copyBtoC').click(function(e){
    e.preventDefault();
    copyValue($('#inputsb'),$('#inputsc'));
}); 
```

[JS 小提琴演示](http://jsfiddle.net/andrewvmail/27rFQ/22/)。

一个整理的、更通用的 jQuery 选项：

```
function copyValue(from, to) {
    // same as above
    from = typeof from == "object" ? from : $('#' + from);
    to = typeof to == "object" ? to : $('#' + to);
    to[0].selectedIndex = from[0].selectedIndex;
}

$('input:button').click(function (e) {
    e.preventDefault();
    // retrieves the data from the current jQuery object
    var data = $(this).data(),
        // gets the 'from' data (where you're copying from)
        f = 'inputs' + data.from,
        // gets the 'to' data (where you're copying to)
        t = 'inputs' + data.to;
    /* calls the function, demonstrating passing both a jQuery object,
       and a String equal to the relevant id */
    copyValue($('#' + f), t);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/andrewvmail/27rFQ/21/)。

仅仅因为我非常喜欢纯 JavaScript：

```
function copyValue(from,to, prefix){
    // sets a default prefix to be used
    prefix = prefix || 'inputs';
    /* checks if the variables are element nodes, if they are that node
       is used. Otherwise we assume an id is passed, and use that to find
       the relevant element node */
    from = from.nodeType == 1 ? from : document.getElementById(prefix + from);
    to = to.nodeType == 1 ? to : document.getElementById(prefix + to);
    to.selectedIndex = from.selectedIndex;
}

// gets all input elements
var inputs = document.getElementsByTagName('input');

// iterates through those input elements, and...
for (var i = 0, len = inputs.length; i<len; i++){
    // if they have a type equal to 'button'...
    if (inputs[i].type == 'button') {
        // binds a click-handler
        inputs[i].onclick = function(e){

            // gets the values from 'data-from' and 'data-to' attributes
            var f = this.getAttribute('data-from'),
                t = this.getAttribute('data-to');
            // assigns the function to be called, with the arguments
            copyValue(f,t, 'inputs');
        };
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/andrewvmail/27rFQ/20/)。

参考：

*   jQuery，来自[jQuery API](http://api.jquery.com/)：
    *   [`:button`选择器](http://api.jquery.com/button-selector/)。
    *   [`click()`](http://api.jquery.com/click/).
    *   [`data()`](http://api.jquery.com/data/).
    *   [`event.preventDefault()`](http://api.jquery.com/event.preventDefault/).
    *   [`click()`](http://api.jquery.com/click/).
*   纯 JavaScript，来自[Mozilla 开发者网络的 JavaScript 资源](https://developer.mozilla.org/en/docs/JavaScript)：
    *   [`Element.getAttribute()`](https://developer.mozilla.org/en/docs/DOM/element.getAttribute).
    *   [`Node.nodeType`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType).
    *   [条件/三元运算符：`condition ? true : false`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator) .
    *   [`typeof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:01:50.720

```
$("#copyAtoB").click(function() {

   var o = new Option($('#inputsa :selected').text(), "value");

   $(o).html($('#inputsa :selected').text());
   $("#inputsb").append(o);
 });   

 $("#copyBtoC").click(function() {

   var o = new Option($('#inputsb :selected').text(), "value");
  $(o).html($('#inputsb :selected').text());
  $("#inputsc").append(o);
 }); 
```

[在这里](http://jsfiddle.net/27rFQ/18/)看小提琴

# ruby-on-rails - JOIN 在范围内的 corret 表上找不到列

> ID：15258552
> 
> 赞同：0
> 
> 时间：2013-03-06T21:36:00.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

我有一些这样的模型：

```
class Student < ActiveRecord::Base
  belongs_to :Teacher
  scope :rich_students, joins(:teachers).order('students.money DESC')
end 
```

然后是班主任

```
class Teacher < ActiveRecord::Base
  has_many :students
  belongs_to :Organization
end 
```

接着：

```
class Organization < ActiveRecord::Base
  has_many :teachers 
end 
```

现在我写一个这样的查询：

```
Student.rich_students.joins(:teachers).where("teachers.organization_id = ?", params[:id]).limit(5) 
```

但这不起作用。它给了我错误：

```
Association named 'teachers' was not found; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:38:06.027

不应该加入

Student.rich_students.joins(:teacher)

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:16:37.437

我认为您的学生“belongs_to”声明中应该有错误

```
class Student < ActiveRecord::Base
  belongs_to :teacher
  scope :rich_students, joins(:teachers).order('students.money DESC')
end 
```

“：老师”而不是“：老师”

希望这可能是问题的原因...

干杯

# c++ - 使用 RapidXML 解析

> ID：15258553
> 
> 赞同：1
> 
> 时间：2013-03-06T21:36:10.473
> 
> 标签：c++, xml, xml-parsing, rapidxml

我有一个 XML 文件，我应该使用 RapidXML 和 c++ 对其进行解析。该文件是系统发育树。每个节点都有一个节点，其中包含 1-3 个子节点，每个子节点都有值。节点可以是学名、通用名或等级。我的问题是，由于每个分类节点的子节点各不相同（例如，一个可能有学名和通用名，一个可能只有学名），我将如何访问子节点的每个值？例如，我写了代码：

```
for (xml_node<> * clade_node = root_node->first_node("clade"); clade_node; clade_node = clade_node->next_sibling())
    {
        xml_node<> * taxonomy_node = clade_node->first_node("taxonomy");

        xml_node<> * sciName_node = taxonomy_node->first_node("scientific_name");
        xml_node<> * comName_node = taxonomy_node->next_sibling("common_name");
        xml_node<> * rank_node = taxonomy_node->next_sibling("rank");

        string sciName = sciName_node->value();
        string comName = comName_node->value();
        string rank = rank_node->value();

    } 
```

但是我在该行`string comName = comName_node->value()`和 RapidXML 文件的这个方法中得到了 EXC_BAD_ACCESS 的线程错误

```
Ch *value() const
{
    return m_value ? m_value : nullstr();
} 
```

这是我正在解析的文件的一部分：

```
<phylogeny rooted="true" rerootable="false">
  <clade>
    <clade>
      <taxonomy>
        <scientific_name>Neomura</scientific_name>
      </taxonomy>
    </clade>
    <clade>
      <taxonomy>
        <id provider="uniprot">2</id>
        <scientific_name>Bacteria</scientific_name>
        <rank>superkingdom</rank>
      </taxonomy>
    </clade>
  </clade>
</phylogeny> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:44:04.880

如果某些节点是可选的，则库可能会`NULL`在找不到其中之一时返回。`NULL`在取消引用指针以获得任何可能之前，您可能需要检查返回的值是否`value()`：

```
string sciName = sciName_node->value();  // crash if scientific_name not present
string comName = comName_node->value();
string rank = rank_node->value(); 
```

我还认为您在调用节点/兄弟姐妹时使用名称有点脆弱。最好只调用没有名称的 first_node/next_sibling，然后在实际返回节点后检查名称（检查 NULL）。然后执行名称相关的逻辑。

这使您减少了对 XML 中数据顺序的依赖，这可能会改变。

# java - 如何访问图像路径？

> ID：15258554
> 
> 赞同：0
> 
> 时间：2013-03-06T21:36:11.100
> 
> 标签：java, android, filenotfoundexception

我正在尝试将照片上传到 Flickr，但此代码引发了找不到文件的异常。图像在文件夹中，但我不知道为什么 Android 会引发异常。请帮忙。

```
OAuthRequest request = new OAuthRequest(Verb.POST,
        "http://api.flickr.com/services/upload/");
service.signRequest(accessToken, request);
MultipartEntity entity = new MultipartEntity();
entity.addPart("photo", new FileBody(new File("/test/res/drawable-hdpi/icon.png"),
        "image/png"));
ByteArrayOutputStream out = new ByteArrayOutputStream();
try {
    entity.writeTo(out);
    request.addPayload(out.toByteArray());
    request.addHeader(entity.getContentType().getName(),
            entity.getContentType().getValue());

    Response response = request.send();
    String body = response.getBody();
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:08:32.437

尝试使用以下命令打开您的文件[`openRawResource(int id)`](http://developer.android.com/reference/android/content/res/Resources.html#openRawResource%28int%29)：

> 打开用于读取原始资源的数据流。这只能与值为资产文件名称的资源一起使用——也就是说，它可以用于打开可绘制、声音和原始资源；它会在字符串和颜色资源上失败。

我认为[`FileBody`](http://hc.apache.org/httpcomponents-client-ga/httpmime/apidocs/org/apache/http/entity/mime/content/FileBody.html)构造函数不接受`InputStream`，因此您可能需要其他方法来发送二进制数据（文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:42:11.700

您无法`drawable`通过绝对路径访问文件夹中的文件。

而是尝试移动`/assets`文件夹中的图片并通过 访问它`getAssets()`或将其移入`/res/raw`并通过访问它`R.raw.icon`。

# jquery - 有谁知道这两个插件是怎么叫的？

> ID：15258556
> 
> 赞同：0
> 
> 时间：2013-03-06T21:36:17.417
> 
> 标签：jquery, plugins

这些怎么叫，我在哪里可以找到好的？这是 Grocery CRUD 的屏幕截图，但我想为我自己的管理员实现类似的功能。

第一个插件由2个列表组成，右边是所有元素，通过拖动或按下+号，项目被移动到左边的列表是空的。

第二个是标签的输入字段，问题是我找不到像这样好的东西。当您按下该字段时，列表将打开，因此您可以通过单击鼠标进行选择。如果您键入一些字母，它也会为您提供预测。如果没有可用的标签，就可以插入一个新标签。

![插件](../Images/f67eb02cfd49e55854e43c7e319c015b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:38:26.737

第一个是 jQuery UI Multiselect ( [http://www.webresourcesdepot.com/attractive-multiple-select-inputs-with-jquery-ui/](http://www.webresourcesdepot.com/attractive-multiple-select-inputs-with-jquery-ui/) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:38:52.480

第二个插件看起来很像 jquery 插件[selected.js](http://harvesthq.github.com/chosen/)。在许多网站中使用过这个插件后，我强烈推荐它。

# load-balancing - 平衡 OpenMPI 工作负载 - 分布在主节点和从节点上

> ID：15258558
> 
> 赞同：2
> 
> 时间：2013-03-06T21:36:19.883
> 
> 标签：load-balancing, openmpi

希望这不是一个重复的问题，但我在平衡本地集群上的工作负载时遇到了问题。这是我当前的 MPI 主机文件：

```
#The Hostfile for Open MPI
#Master Node, 'slots=2' is used because we are running an 2-core machine
localhost slots=2

#Slave nodes, 8-core machines as well
slave1-ip slots=2
slave2-ip slots=2
slave3-ip slots=2 
```

当我运行时`mpirun -np 4 --hostfile my_hostfile program`，它会优先在本地主机上进行所有计算。

比如在我的nqueens代码中，最后的计算分布是：

```
Node 1 computed load of 1963
Node 2 computed load of 0
Node 3 computed load of 0
Node 4 computed load of 1 
```

但是，当我修改我的主机文件以便行`localhost slots=2`到 时`localhost slots=1`，所有计算都在从节点上运行，并且我得到了更均匀的分布：

```
Node 1 computed load of 497
Node 2 computed load of 486
Node 3 computed load of 493
Node 4 computed load of 488 
```

有没有办法在主线程上进行负载平衡，以便在我有的时候将工作分散到主节点和从节点上`localhost slots=2`？是否有某种配置文件可以指定这一点？我已经尝试过`--loadbalance`国旗，但什么也没做。

PS我在设置集群时遵循了本教程：http: [//techtinkering.com/2009/12/02/setting-up-a-beowulf-cluster-using-open-mpi-on-linux/](http://techtinkering.com/2009/12/02/setting-up-a-beowulf-cluster-using-open-mpi-on-linux/)

# python - Python：如何按两个字段对字典数组进行排序？

> ID：15258559
> 
> 赞同：5
> 
> 时间：2013-03-06T21:36:24.960
> 
> 标签：python, arrays, sorting

我对Python有点陌生......

我通过读取包含 JSON 消息的文件获得了一系列 dicts，即使用如下内容：

```
import json
ws = []
with open('messages.txt', 'r') as f:
    for line in f:
        data = json.loads(line)
        ws.append(data) 
```

除其他外，每条 JSON 消息都具有三个字段：“日期”、“类型”和“位置”。我需要先按日期对数组进行排序，然后按每个相同日期块中的类型，然后按每个相同类型块中的位置。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T21:38:30.043

```
ws.sort(key=lambda datum: (datum['date'], datum['type'], datum['location'])) 
```

元组自然首先按第一个元素排序，然后按后续元素排序。

# json - Soundcloud API 不明确支持使用 json 进行分页

> ID：15258561
> 
> 赞同：5
> 
> 时间：2013-03-06T21:36:26.347
> 
> 标签：json, api, pagination, soundcloud

我正在使用的具体示例：

[http://api.soundcloud.com/users/dubstep/tracks.json?client_id=YOUR_CLIENT_ID](http://api.soundcloud.com/users/dubstep/tracks.json?client_id=YOUR_CLIENT_ID)

您将获得他们的前 50 首曲目，但没有像您在 [xml 版本](http://api.soundcloud.com/users/dubstep/tracks.xml?client_id=YOUR_CLIENT_ID)中看到的那样的 next-href 对象。

但是，您可以使用偏移量和限制，它可以按预期工作 - 但是我需要“盲目地”爬过轨道，直到没有更多的轨道，这与为您提供“下一页”结果的 XML 版本不同。我什至不会注意到它是分页的，除非我在搜索 json 对象时偶然发现它正好有 50 条轨道（这甚至是可疑的）。

是否有计划支持 json 中的 next-href 标签？我错过了什么吗？它是一个缺少的错误吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-06T22:58:53.050

您可以使用一个未记录的参数`linked_partitioning=1`，它将添加`next_href`到响应中。

[http://api.soundcloud.com/users/dubstep/tracks.json?client_id=YOUR_CLIENT_ID&linked_pa​​rtitioning=1](http://api.soundcloud.com/users/dubstep/tracks.json?client_id=YOUR_CLIENT_ID&linked_partitioning=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-20T23:54:32.460

例如：

```
// build our API URL
$clientid = "Your API Client ID"; // Your API Client ID
$userid = "/ IDuser"; // ID of the user you are fetching the information for

// Grab the contents of the URL
//more php get
$number="1483";

$offset=1300;
$limit=200;

$soundcloud_url = "http://api.soundcloud.com/users/{$userid}/tracks.json?client_id={$clientid}&offset={$offset}&limit={$limit}";
$tracks_json = file_get_contents($soundcloud_url);
$tracks = json_decode($tracks_json);

foreach ($tracks as $track) {
    echo "<pre>";
     echo $track->title . ":";
    echo $track->permalink_url . "";
    echo "</pre>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-29T00:48:17.343

我已经看到这段代码应该有所帮助（这是在 Ruby 中）：

```
# start paging through results, 100 at a time
tracks = client.get('/tracks', :order => 'created_at', :limit => page_size,
                    :linked_partitioning => 1)
tracks.each { |t| puts t.title } 
```

但是，第一组结果将显示，我什至会在响应末尾看到“next_href”，但是您应该怎么做才能显示下一组结果？

# asp.net - 确认多个 parallel.foreach 循环

> ID：15258563
> 
> 赞同：1
> 
> 时间：2013-03-06T21:36:32.447
> 
> 标签：asp.net

我在数据库中有大约 450K 记录，我必须在这些记录上进行模糊匹配。我已经实现了`Parallel.foreach`循环来查看传入的请求是否与 450K 记录中的任何一个匹配。如果在搜索过程中找到任何匹配项，我会停止`foreach`循环并以 true 将响应返回给调用者（它表示已找到匹配项）。

我正在调用数据库并将所有 450K 记录存储在静态对象中（在内存中）。for 的逻辑`Parallel.foreach`运行良好。问题是确定它是否匹配需要将近 40-45 秒。

我计划`parallel.foreach`在每个循环上运行多个 100k 数据，以减少总时间。`parallel.foreach`我的挑战是，一旦我匹配到一个循环，我将如何停止执行其他循环`parrallel.foreach`？

以下是我的单个代码`parallel.foreach`：

```
public bool Checkmatch(CheckRequest request)
    {
        bool isPCCMatch = false;
        //This will load all the data in Static object to avoid db call for each request
        PolicyInformation.Initialize(request.IsCacheRefresher);

            try
            {
                logger.Debug(MethodBase.GetCurrentMethod().Name + ": Matching alogorithm is started");
                Parallel.ForEach(PolicyInformation.Policies, (policy, loopState) =>
                {

                    double state=0, stateF=0;
                    if (!request.stateF)
                    { 
                        state= GetPrecentageMatch(request.state, policy.state);
                        //this if condition is for checkibnf first field condition early so that it will not get all the percentage
                        if (state== OneFieldSSNPercentage)
                        {
                            isPCCMatch = true;
                            loopState.Stop();
                        }
                    }
                    else
                    {
                        stateF= GetPrecentageMatch(request.stateF, policy.stateF);
                        //this if condition is for checkibnf first field condition early so that it will not get all the percentage
                        if (stateF== OneFieldFEINPercentage)
                        {
                            isPCCMatch = true;
                            loopState.Stop();
                        }

                    }
                    double SEIN = GetPrecentageMatch(request.SEIN, policy.FEIN);
                    //this if condtion is for checkibnf first field condtion earily so that it will not get all the perecentage
                    if (SEIN == OneFieldSEINPercentage)
                    {
                        isPCCMatch = true;
                        loopState.Stop();
                    }
                    double WCIRB = GetPrecentageMatch(request.WCIRB, policy.WCIRB);
                    //this if condition is for checkibnf first field condition early so that it will not get all the percentage
                    if (WCIRB == OneFieldWCIRBPercentage)
                    {
                        isPCCMatch = true;
                        loopState.Stop();
                    }
                    double DUN = GetPrecentageMatch(request.DUNS,  policy.DUNS);
                    //this if condition is for checkibnf first field condition early so that it will not get all the percentage
                    if (DUN == OneFieldDUNSPercentage)
                    {
                        isPCCMatch = true;
                        loopState.Stop();
                    }
                    double legalNames = GetPrecentageMatch(request.LegalName, policy.LegalName);
                    //this if condition is for checkibnf first field condition early so that it will not get all the percentage
                    if (legalNames == OneFieldLegalNamePercentage)
                    {
                        isPCCMatch = true;
                        loopState.Stop();
                    }

                    double tradeNames = GetPrecentageMatch(request.TradeName, policy.TradeName);
                    //this if condition is for checkibnf first field condition early so that it will not get all the percentage
                    if (tradeNames == OneFieldTradeNamePercentage)
                    {
                        isPCCMatch = true;
                        loopState.Stop();
                    }
                    double mailingname = GetPrecentageMatch(request.MailingName, policy.MailingName);
                    //this if condition is for checkibnf first field condition early so that it will not get all the percentage
                    if (mailingname == OneFieldMailingNamePercentage)
                    {
                        isPCCMatch = true;
                        loopState.Stop();
                    }
                    double ownerInfo = GetPrecentageMatch(request.OwnerName, policy.Ownership);

                    int partitalmatchcount = 0;

                    int addressmatchcount = 0;

                    // condtion 2
                    // get the partial count. if it is not more than 2 then compare the address an 
                    if (GetPartialMatchFieldCount(SSN, FEIN, SEIN, DUN, legalNames, tradeNames, mailingname, ownerInfo, out partitalmatchcount) < 2)
                    {
                        // it will be hit if IsAddressmatch is true or count of partitalmatchcount & addressmatchcount is equal or more then 2
                        if (IsAddressmatch(request, policy, out addressmatchcount, partitalmatchcount) || (addressmatchcount + partitalmatchcount >= 2))
                        {
                            logger.Debug(MethodBase.GetCurrentMethod().Name + ": policy matched 2nd condition " + policy.ID);
                            isPCCMatch = true;
                            loopState.Stop();
                        }
                    }
                    else
                    {
                        isPCCMatch = true;
                        loopState.Stop();
                    }

                    // check for the 3 fields
                    if (GroupAmatchcount(SSN, FEIN, SEIN) + GroupBmatchcount(legalNames, tradeNames, mailingname) + GroupCMatchCount(request,
                        policy) + GroupDMatchCount(ownerInfo) >= 3)
                    {
                        logger.Debug(MethodBase.GetCurrentMethod().Name + ": policy matched 3rd condition " + policy.ID);
                        isPCCMatch = true;
                        loopState.Stop();
                    }
                    //else if ()

                });
                logger.Debug(MethodBase.GetCurrentMethod().Name + ": Matching algorithm is ended");
            }
            catch (Exception ex)
            {
                logger.ErrorException(MethodBase.GetCurrentMethod().Name, ex);
                throw;
            }
     //   }

        return isPCCMatch;
    } 
```

我想为 100k 条记录运行上述循环，因此它将有 4 个`parallel.foreach`循环。一旦我在一个循环上找到匹配项，我想停止其他`parallel.foreach`循环的执行。

# google-tv - 如何访问 Sony NSZ-GS7 Google TV 上的运动传感器

> ID：15258564
> 
> 赞同：0
> 
> 时间：2013-03-06T21:36:32.930
> 
> 标签：google-tv

索尼 NSZ-GS7 设备的网站称“还有一个用于游戏的 3 轴运动传感器。” 在控制器的描述中。 [http://store.sony.com/webapp/wcs/stores/servlet/ProductDisplay?langId=-1&storeId=10151&catalogId=10551&productId=8198552921666462151](http://store.sony.com/webapp/wcs/stores/servlet/ProductDisplay?langId=-1&storeId=10151&catalogId=10551&productId=8198552921666462151)

但是当我向 SensorManager 询问任何其他 android 设备上的传感器列表时，没有。我在这里想念什么吗？

可悲的是，谷歌电视支持功能上的谷歌页面告诉我也不支持传感器。 [https://developers.google.com/tv/android/docs/gtv_android_features#Hardware](https://developers.google.com/tv/android/docs/gtv_android_features#Hardware)

那么，知道这里发生了什么吗？索尼网站是不是在撒谎？或者此设备内部是否有运动传感器但操作系统未暴露？那么，你不能使用的传感器有什么意义呢？它会在未来的 Google TV 版本中使用吗？索尼支持似乎不喜欢我，因为他们没有回答这些问题:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:54:40.643

索尼为他们的设备开发了专有的 API，允许开发人员从他们的物理遥控器或索尼 MediaRemote 应用程序访问传感器数据。您需要将他们的库集成到您的应用程序中才能使用这些 API。索尼有一个包含更多信息的开发者网站：[https ://android.developer.sony.com/pages/documents/view/?id=4000080](https://android.developer.sony.com/pages/documents/view/?id=4000080)

请注意，其他 Google TV 设备不支持这些 API。

# c# - 使用 EF5 Code First 迁移执行 IDENTITY_INSERT

> ID：15258571
> 
> 赞同：8
> 
> 时间：2013-03-06T21:37:08.283
> 
> 标签：c#, asp.net-mvc, entity-framework, entity-framework-migrations

我有一个 POCO，我试图通过 Code First Migrations 创建一个 POCO，然后创建种子数据。问题是我想在播种时将特定值插入标识列。

这是我的 POCO

```
public class Result
{
    public long ResultId { get; set; }
    public long? TeamId { get; set; }

    public Team Team { get; set; }
} 
```

这是我在 Configuration.cs 的 Seed 方法中的 AddOrUpdate 调用

```
context.Results.AddOrUpdate
    (
         r => r.ResultId,
         new Result { ResultId = 101, TeamId = null },
         new Result { ResultId = 201, TeamId = null }
    ); 
```

正如预期的那样，它不会插入 101 和 201 的值，而是插入 1 和 2。我可以将任何 DataAttributes 应用于模型来帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-07T07:06:45.693

这是如何通过属性/约定关闭身份

```
public class Result
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.None)]
    public long ResultId { get; set; }
    public long? TeamId { get; set; }

    public Team Team { get; set; }
} 
```

这就是您通过 EntityTypeConfiguration 关闭身份的方式

```
public class ResultMapper : EntityTypeConfiguration<Result>
{
    public ResultMapper()
    {
        HasKey(x => x.ResultId);
        Property(x => x.ResultId)
                .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
    }
} 
```

或者您可以使用 OnModelCreating 重载

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Result>().Property(x => x.ResultId)
               .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-17T21:48:42.990

## 万一有人还在迷茫。. .

*有关使 IDENTITY_INSERT 与 Code-First Migration Seed() 方法一起使用所需的其他信息，请参见下文*

我确实使用 Aron 的`System.ComponentModel.DataAnnotations.Schema.DatabaseGenerated`属性实现将模型 ID 的 DB 生成属性设置为“无”，但我仍然无法通过身份插入错误。我想我会在这里发布我的发现，以防其他人仍然遇到问题。

为了让它工作，我将种子方法的逻辑包装在一个 SQL 事务中，并用于在运行该方法`context.Database.ExecuteSqlCommand("SET IDENTITY_INSERT myTable ON")`之前允许插入。`.AddOrUpdate()`这是我的 Configuration.vb 文件（使用 Google API 类型的表作为我们的示例数据）：

```
Imports System
Imports System.Data.Entity
Imports System.Data.Entity.Migrations
Imports System.Linq

Namespace Migrations

    Friend NotInheritable Class Configuration 
        Inherits DbMigrationsConfiguration(Of DAL.MyDbContext)

        Public Sub New()
            AutomaticMigrationsEnabled = False
            AutomaticMigrationDataLossAllowed = False
        End Sub

        Protected Overrides Sub Seed(context As DAL.MyDbContext)
            '  This method will be called after migrating to the latest version.

            Dim newContext As New MyDbContext(context.Database.Connection.ConnectionString)
            Using ts = newContext.Database.BeginTransaction()

                Try

                    ' Turn on identity insert before updating
                    newContext.Database.ExecuteSqlCommand("SET IDENTITY_INSERT GoogleApiTypeGroups ON")
                    ' Make sure the expected GoogleApiTypeGroups exist with the correct names and IDs.
                    newContext.GoogleApiTypeGroups.AddOrUpdate(
                        Function(x) x.Id,
                        New GoogleApiTypeGroup() With {.Id = 1, .name = "Google Cloud APIs"},
                        New GoogleApiTypeGroup() With {.Id = 2, .name = "YouTube APIs"},
                        New GoogleApiTypeGroup() With {.Id = 3, .name = "Google Maps APIs"},
                        New GoogleApiTypeGroup() With {.Id = 4, .name = "Advertising APIs"},
                        New GoogleApiTypeGroup() With {.Id = 5, .name = "Google Apps APIs"},
                        New GoogleApiTypeGroup() With {.Id = 6, .name = "Other popular APIs"},
                        New GoogleApiTypeGroup() With {.Id = 7, .name = "Mobile APIs"},
                        New GoogleApiTypeGroup() With {.Id = 8, .name = "Social APIs"})
                    ' Attempt to save the changes.
                    newContext.SaveChanges()
                    ' Turn off the identity insert setting when done.
                    newContext.Database.ExecuteSqlCommand("SET IDENTITY_INSERT GoogleApiTypeGroups OFF")

                    ' Turn on identity insert before updating
                    newContext.Database.ExecuteSqlCommand("SET IDENTITY_INSERT GoogleApiTypes ON")
                    ' Make sure the expected GoogleApiTypes exist with the correct names, IDs, and references to their corresponding GoogleApiTypeGroup.
                    newContext.GoogleApiTypes.AddOrUpdate(
                        Function(x) x.Id,
                        New GoogleApiType() With {.Id = 1, .name = "Google Maps JavaScript API", .GoogleApiTypeGroupId = 3})
                    ' Save the changes
                    newContext.SaveChanges()
                    ' Turn off the identity insert setting when done.
                    newContext.Database.ExecuteSqlCommand("SET IDENTITY_INSERT GoogleApiTypes ON")

                    ts.Commit()
                Catch ex As Exception
                    ts.Rollback()
                    Throw
                End Try
            End Using

        End Sub

    End Class

End Namespace 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-11T22:26:35.880

在对此进行研究之后，看起来是否先前已创建密钥，然后在迁移中添加 [DatabaseGenerated(DatabaseGeneratedOption.None)] 它实际上不会按照您的意图进行，您可以通过转到数据库资源管理器表来检查这一点 - > 键-> PK -> 修改并看到身份规范设置为是而不是否。

如果是这种情况，请尝试向下迁移到该表不存在的位置，然后重新迁移回来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T13:45:52.240

如果您使用 AutoMapper 并使用 for/foreach 模式，则必须在 for 循环中重新映射。

例子：

```
foreach (var item in Ids) {
    var page = Mapper.Map<Pages>(model);
    .
    .
    .
    .
    db.Pages.Add(page);
}
db.SaveChanges(); 
```

# jquery - 用于显示相关下载链接的 jQuery 验证器

> ID：15258573
> 
> 赞同：0
> 
> 时间：2013-03-06T21:37:12.650
> 
> 标签：jquery, html, jquery-validate, password-protection

我正在使用验证器插件向站点添加各种密码字段，每个字段都会在成功输入密码后发布一个相关的下载链接。问题是，当输入正确的密码时，会显示所有下载链接，而不仅仅是相关链接。所有字段都将具有相同的密码，并且随着时间的推移会添加更多文件，我只是想弄清楚如何只显示相关的下载链接而不是全部。
这是一个 jsfiddle（密码是“密码”）：http: [//jsfiddle.net/rqGWK/](http://jsfiddle.net/rqGWK/)

jQuery：

```
jQuery(document).ready(function(){

jQuery(".article-form").hide();
jQuery(".download-file").hide();

jQuery('.article-link').click(function() {
        jQuery(this).siblings('.article-form').fadeIn();
    });

    jQuery.validator.addMethod("pw_check", function (value) {
        return (value == 'password');
    }, "Invalid password");

    jQuery(".article-form").validate({
        rules: {
            password: {
                required: true,
                pw_check: true
            }
        },
        submitHandler: function (form) {
            jQuery(".article-form").hide();
            jQuery(".download-file").fadeIn("slow");
        }
    }); 

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:46:38.963

我不建议使用 jQuery 或任何客户端代码作为保护内容的工具。这不是真正的安全。

但是要回答您的问题..只需`.download-file`在您的函数中查找`.parent()`并包装您的`.validate()`函数，以便验证每个表单。

**[演示](http://jsfiddle.net/Hcjqj/1/)**更新。

```
jQuery('.article-link').click(function () {
    if(jQuery(this).siblings('.download-file').css('display')=='none')
       jQuery(this).siblings('.article-form').fadeIn();
});

jQuery(".article-form").each(function () {
    jQuery(this).validate({
        rules: {
            password: {
                required: true,
                pw_check: true
            }
        },
        submitHandler: function (form) {
            jQuery(form).hide();
            jQuery(form).siblings(".download-file").fadeIn("slow");
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:53:09.640

像这样的东西？

[演示视图](http://jsfiddle.net/rqGWK/2/)

```
jQuery(document).ready(function(){

 jQuery(".article-form").hide();
 jQuery(".download-file").hide();

var actual;
var validates = [];

 jQuery('.article-link').click(function() {
    actual = $(this).closest('.article-download');
if(!validates[actual.index()]){
    $(".article-form").hide()
    $(".article-form").eq(actual.index()).fadeIn();
}
});

jQuery.validator.addMethod("pw_check", function (value) {
    return (value == 'password');
}, "Invalid password");

jQuery(".article-form").validate({
    rules: {
        password: {
            required: true,
            pw_check: true
        }
    },
    submitHandler: function (form) {
        validates[actual.index()] = true;
        jQuery(".article-form").hide();
        jQuery(".download-file").eq(actual.index()).fadeIn("slow");
    }
 }); 

}); 
```

PS：客户端是可以绕过的，记得做服务端控制

# ruby-on-rails - 计算字段不等于值 X 的记录

> ID：15258574
> 
> 赞同：1
> 
> 时间：2013-03-06T21:37:19.533
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord

我正在尝试对字段不等于特定值的结果进行计数，但它总是无法返回结果。

例如，假设**Company**和**Products**有*一对多的关系*，我可能会通过查询从 ActiveRecord 中获取以下数组`Company.find(63).products`（这将是 SQL 的等价物`SELECT "products".* FROM "products" WHERE "products"."company_id" = 63;`）：

```
<Product id: 1, company_id: 63, foo_id: 1>,
<Product id: 2, company_id: 63, foo_id: 3>,
<Product id: 3, company_id: 63, foo_id: nil>, 
<Product id: 4, company_id: 63, foo_id: nil> 
```

但是，如果我尝试扩展上述查询以计算除第一条记录之外的所有内容，如下所示：

```
Company.find(63).products.where("foo_id != ?", 1).count 
```

在 SQL 中是：

```
SELECT COUNT(*) FROM "products" WHERE "products"."company_id" = 63 AND (foo_id != 1) 
```

当我期望看到**3**时，我似乎总是得到**1**结果。为什么会发生这种情况，我怎样才能让它正确计数？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:58:07.907

如果你说你应该得到 1 而不是 0。你正在寻找的是`DISTINCT FROM`as`=`和`!=`null 类型都返回 unknown 作为结果。

```
SELECT COUNT(*) FROM 
products 
WHERE products.company_id = 63 AND (foo_id IS DISTINCT FROM 1) 
```

[http://sqlfiddle.com/#!1/8b7a0/3](http://sqlfiddle.com/#!1/8b7a0/3)

至于进一步的信息。`DISTINCT FROM`是 PostgreSQL 独有的，所以这样做的标准版本是：

```
SELECT COUNT(*) FROM 
products
WHERE products.company_id = 63 AND (foo_id<>1 OR foo_id IS NULL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:48:37.380

你试过用`<>`instaed of`!=`

```
<> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:51:20.163

```
Company.find(63).products.where("foo_id != ?", 1).count 
```

应该

```
Company.find(63).products.where("foo_id <> ?", 1).count 
```

但你应该更进一步：

```
class Product
  def self.not_foo(foo_id)
    where("foo_id <> ?", foo_id)
  end
end 
```

现在

```
 Company.find(63).products.not_foo(1).count 
```**

# r - 将分辨率为 5 km*5km 的 SGDF 重新投影为 0.05*0.05

> ID：15258582
> 
> 赞同：0
> 
> 时间：2013-03-06T21:37:49.837
> 
> 标签：r, map-projections, spatial-interpolation

原谅我太天真了。我无法重新投影 SGDF。

我有一个 xyz (x=longitude, y=latitude, z=value) 3 列数据集。经度和纬度值是 EPSG:3035 格式的坐标。我将数据框转换为空间分辨率为 5 公里 * 5 公里的网格，投影在 EPSG:3035 中。我希望将网格重新投影到 EPSG:4326，空间分辨率为 0.05*0.05。但是我收到以下警告消息：

```
Warning messages:
1: In spTransform(radon, CRS("+init=epsg:4326")) :   Grid warping not available, coercing to points
2: In spTransform(as(x, "SpatialPixelsDataFrame"), CRSobj, ...) :   Grid warping not available, coercing to points 
```

谁能告诉我，我如何重新投影网格。下面是一个可重现的小例子：

```
library(sp)
library(rgdal)
library(raster)

x=c(5013500, 5018500, 4883500, 4888500, 4893500, 4898500, 4908500,4948500, 4953500, 4958500, 4963500, 4973500, 4978500, 4988500, 5008500, 5013500, 5028500, 4878500, 4883500, 4888500, 4893500,4898500, 4903500,4928500, 4963500, 4968500, 4973500, 4978500, 4983500, 4988500)

y=c(5395500, 5395500, 5390500, 5390500, 5390500, 5390500, 5390500,5390500, 5390500, 5390500, 5390500, 5390500, 5390500, 5390500, 5390500,5390500, 5390500, 5385500, 5385500, 5385500, 5385500, 5385500, 5385500,5385500, 5385500, 5385500, 5385500, 5385500, 5385500, 5385500)

z=c(1.74, 1.74, 1.82, 1.82, 1.82, 1.81, 1.81, 1.78, 1.77, 1.77, 1.76,1.76, 1.75, 1.74, 1.73, 1.73, 1.72, 1.82, 1.82, 1.81, 1.81, 1.80, 1.80, 1.78, 1.75, 1.75, 1.74, 1.74, 1.73, 1.73)

df1=data.frame(x,y,z)
coordinates(df1) <- c("x", "y")
proj4string(df1)=CRS("+init=epsg:3035")
gridded(df1)=TRUE
fullgrid(df1)=TRUE

getGridTopology(df1)

                     x       y
cellcentre.offset 4878500 5385500
cellsize             5000    5000
cells.dim              31       3

newgrid = spTransform(df1, CRS("+init=epsg:4326")) 
```

*好吧，感谢 Paul，我能够使用gdalwarp*重新投影网格。但是，空间分辨率仍然不同：

```
 Coordinates:
    min      max
x -31.34409 50.36650
y  34.07928 71.87206
Is projected: FALSE 
proj4string :
[+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0]
Grid attributes:
       cellcentre.offset   cellsize cells.dim
x         -31.31151 0.06515996      1254
y          34.11186 0.06515996       580
Data attributes:
Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-0.11290  0.00000  0.00000  0.06136  0.00000  1.90300 
```

有什么想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:45:31.873

您收到此消息是因为在重新投影后，经纬度规则网格上的点不再是另一个投影系统中的规则网格。重投影步骤不能保持规律性，因为对于很多投影，经纬度和投影系统之间的变化不是恒定的。因此，一个区域的失真或变化比另一个区域大，从而导致网格不规则。想象一下，经纬度网格的正方形在投影系统中变成非正方形。

最简单的解决方案就是先将点投影到 EPSG:4326，然后执行插值步骤。我不确定您使用哪个插值程序，但例如 gstat 不支持经纬度插值。因此，在插值数据之前使用投影系统而不是经纬度总是一个安全的选择。

如果您确实需要重新投影网格，则需要进行某种插值。你做了两件事：使用这样的工具`gdalwarp`可以执行坐标变换和结果网格的后续变形。或者，您可以使用最近邻或您喜欢的任何插值例程将非常规网格插值到常规网格。

# javascript - keydown 或 keyup 上的 jQuery 调用事件

> ID：15258584
> 
> 赞同：1
> 
> 时间：2013-03-06T21:38:07.707
> 
> 标签：javascript, jquery, event-handling, keydown, keyup

我正在尝试在 keydown 和 keyup 上更改 div 元素的颜色，但我似乎无法让它工作。我检查了我可以在互联网上找到的每个示例，但我的代码似乎不起作用。

我发现的所有示例似乎都使用表单输入文本字段作为按键的目标。我不想那样做。这是我的代码：

```
$(document).keydown(function(e){
    if(e.which == 'A')
    {
        alert('key was pressed');
        $(#k1).css('background-color', "blue");
    }
}); 
```

我的想法是 $(document) 不是正确的东西，因为该函数从未被调用过。但是因为我找到的所有示例都使用文本字段输入，所以我不知道该放什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:43:17.633

`**[LIVE DEMO](http://jsbin.com/onohoj/2/edit)**`

```
$(document).keydown(function(e){
    if(e.which == 65){
        alert('Pressed key was: '+ e.which );
        $("#k1").css( { backgroundColor:"blue" } );
    }
}); 
```

如果您需要`$('input')`而不是`$(document)`随意使用它，
`65`是`event.which``A`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:44:54.403

几件事。首先，`event.which`将返回一个与键相关的数字。其次，您的 jquery 目标需要是一个字符串。所以，改变`=='A'`to`==65`和`$(#k1)`to`$("#k1")`就可以了。这是一个演示：http: [//jsfiddle.net/AeBtV/](http://jsfiddle.net/AeBtV/)

js

```
$(document).keydown(function(e){
 if(e.which == 65)
 {
    alert('A key was pressed');
    $("#k1").css('background-color', "blue");
 }
}); 
```

关键代码的注意事项：

A 到 Z 的范围是 65-90。因此 A 是 65，Z 是 90，R 是 82。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:48:29.287

你的`which`条件无效。正如其他人提到的那样，应该是65。

[http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

如果向下滚动，您可以键入任何键并查看每个键的值。

或者，你可以做

```
console.log(e.which); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:41:20.177

我使用 .live 捕获了 keyup 和 keydown 事件：

$("#my_id").live('keydown',function(event) {

...

});

# ruby-on-rails - 能够在 JSON 中呈现 Active Record 模型，并在全球范围内包含和排除字段/关联

> ID：15258585
> 
> 赞同：0
> 
> 时间：2013-03-06T21:38:14.873
> 
> 标签：ruby-on-rails, rails-activerecord

我想要一种方法来设置 ActiveRecord 模型以仅输出我允许它访问的字段，而不管它在哪里访问。我不想在访问模型对象的任何地方执行此操作：

```
 @jobs = Job.all
    @jobs = @jobs.to_json(
          :include => {:job_status},
          :except  => [:created_at, :updated_at]
        ) 
```

我想设置它，以便在呈现作业模型对象的任何地方，它都会自动包含和排除这些字段/关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:56:02.330

您可以覆盖`as_json`类`Job`。

```
def as_json(options=nil)
  super(:include => {:job_status},
        :except  => [:created_at, :updated_at])
end 
```

# haskell - 管道的剩菜有什么好处？

> ID：15258587
> 
> 赞同：14
> 
> 时间：2013-03-06T21:38:29.823
> 
> 标签：haskell, conduit, haskell-pipes

我试图了解*导管*和*管道*之间的区别。与*管道*不同，*管道*有剩菜的概念。剩菜有什么用？我想看看一些剩菜必不可少的例子。

而且由于*管道*没有剩菜的概念，有没有办法用它们实现类似的行为？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T05:22:41.177

Gabriella 关于剩余部分总是解析的一部分的观点很有趣。我不确定我是否会同意，但这可能仅取决于解析的定义。

有一大类用例需要剩余部分。解析当然是一个：任何时候解析需要某种前瞻，你就需要剩余部分。一个例子是在 markdown 包的[getIndented](https://github.com/snoyberg/markdown/blob/master/Text/Markdown/Block.hs#L300)函数中，它将所有即将出现的行与某个缩进级别隔离开来，剩下的行留待以后处理。

但是，在管道本身中有一组更平凡的例子。每当您处理打包数据（如 ByteString 或 Text）时，您都需要读取一个块，以某种方式对其进行分析，使用剩余的东西来推回额外的内容，然后对原始内容做一些事情。也许最简单的例子是[dropWhile](https://github.com/snoyberg/conduit/blob/master/conduit/Data/Conduit/Binary.hs#L236)。

事实上，我认为 leftover 是流式库的核心、基本功能，以至于管道的新 1.0 接口甚至没有向用户公开禁用 leftovers 的选项。我知道很少有实际用例不需要以某种方式使用它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-06T22:11:53.123

我会回答的`pipes`。对您的问题的简短回答是，即将推出的`pipes-parse`库将支持作为更通用解析框架的一部分的剩余部分。我发现几乎每一种人们想要剩菜的情况，他们实际上都想要一个解析器，这就是为什么我将剩菜问题作为解析的一个子集。[您可以在此处](https://github.com/Gabriel439/Haskell-Pipes-Parse-Library)找到该库的当前草稿。

但是，如果您想了解`pipes-parse`它是如何工作的，实现剩余的最简单方法是仅用于`StateP`存储推回缓冲区。这只需要定义以下两个函数：

```
import Control.Proxy
import Control.Proxy.Trans.State

draw :: (Monad m, Proxy p) => StateP [a] p () a b' b m a
draw = do
    s <- get
    case s of
        []   -> request ()
        a:as -> do
            put as
            return a

unDraw :: (Monad m, Proxy p) => a -> StateP [a] p () a b' b m ()
unDraw a = do
    as <- get
    put (a:as) 
```

`draw`首先查询推回缓冲区以查看是否有任何存储的元素，如果可用则从堆栈中弹出一个元素。如果缓冲区为空，则改为从上游请求一个新元素。当然，如果我们不能推回任何东西，那么拥有缓冲区是没有意义的，所以我们还定义`unDraw`了将一个元素推入堆栈以供以后保存。

编辑：哎呀，我忘了包括一个有用的例子，说明剩菜什么时候有用。就像迈克尔说的那样`takeWhile`，`dropWhile`是剩菜的有用案例。这是`drawWhile`函数（类似于迈克尔所说的`takeWhile`）：

```
drawWhile :: (Monad m, Proxy p) => (a -> Bool) -> StateP [a] p () a b' b m [a]
drawWhile pred = go
  where
    go = do
        a <- draw
        if pred a
        then do
            as <- go
            return (a:as)
        else do
            unDraw a
            return [] 
```

现在想象你的制作人是：

```
producer () = do
    respond 1
    respond 3
    respond 4
    respond 6 
```

...并且您将其与使用以下内容的消费者联系起来：

```
consumer () = do
    evens <- drawWhile odd
    odds  <- drawWhile even 
```

如果第一个`drawWhile odd`没有推回它绘制的最终元素，那么您将删除`4`，它不会正确传递到第二个`drawWhile even`语句`。

# html - HTML 表格和行跨度和跨度行为

> ID：15258589
> 
> 赞同：0
> 
> 时间：2013-03-06T21:38:32.703
> 
> 标签：html, html-table

我正在做这个任务，几乎一切正常，但我不明白为什么顶部单元格没有占据整个空间。

此外，知道我是否可以格式化单元格（大小等）非常有用。

这是代码。

```
<html>
<head>
</head>
<body>
    <table border="1">
        <tr>
            <th colspan="4">Notas de HTML</th>
            <tr>
                <td colspan="2">Alumno</td>
                <td colspan="2">Conceptos (60%)</td>
                <td colspan="3">Procedimiento (30%)</td>
                <td rowspan="2">Actitud (10%)</td>
            </tr>
            <tr>
                <td>Apellidos</td>
                <td>Nombre</td>
                <td>Examen te&oacute;rico</td>
                <td>Examen pr&aacute;ctico</td>
                <td>Pr&aacute;ctica 1</td>
                <td>Pr&aacute;ctica 2</td>
                <td>Pr&aacute;ctica 3</td>
            </tr>
            <tr>
                <td>ape1</td>
                <td>nom1</td>
                <td>7</td>
                <td>6.5</td>
                <td>8</td>
                <td>4</td>
                <td>9</td>
                <td>9</td>
            </tr>
            <tr>
                <td>ape2</td>
                <td>nom2</td>
                <td>5</td>
                <td>4</td>
                <td>6</td>
                <td>4</td>
                <td>5</td>
                <td>7</td>
            </tr>
        </tr>
    </table>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:40:08.233

要跨越所有八列，您需要使用以下命令：

```
<th colspan="8">Notas de HTML</th> 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ycHu6/)**

通过使用 CSS，您可以随意格式化单元格。

# java - 未找到休眠异常 hibernate.cfg.xml

> ID：15258594
> 
> 赞同：5
> 
> 时间：2013-03-06T21:38:46.173
> 
> 标签：java, eclipse, hibernate, maven

我正在尝试使用 Hibernate 和 Maven 启动项目。

**我得到了这样的例外：**

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
Exception in thread "main" org.hibernate.HibernateException: /hibernate.cfg.xml not found
    at org.hibernate.util.ConfigHelper.getResourceAsStream(ConfigHelper.java:170)
    at org.hibernate.cfg.Configuration.getConfigurationInputStream(Configuration.java:2176)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:2157)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:2137)
    at FirstHibernate.com.myhib.CRUDS.CrudsOps.main(CrudsOps.java:15) 
```

这是我的项目结构的屏幕截图，（hibernate.cfg.xml 在 src/ 中）：http: [//imageshack.us/photo/my-images/692/screenshotxba.jpg/](http://imageshack.us/photo/my-images/692/screenshotxba.jpg/)

**CrudsOps.java**

```
package FirstHibernate.com.myhib.CRUDS;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

public class CrudsOps {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        SessionFactory sf = new Configuration().configure().buildSessionFactory();
        System.out.println("Cfg and hbm files loaded succesfully");
        Session session = sf.openSession();
        session.beginTransaction();
        System.out.println("Transaction began");

    }

} 
```

**pom.xml**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>FirstHibernate</groupId>
  <artifactId>com.myhib</artifactId>
  <packaging>war</packaging>
  <version>0.0.1-SNAPSHOT</version>
  <name>com.myhib Maven Webapp</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.6.8.Final</version>
    </dependency>
    <dependency>
        <groupId>postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>9.1-901.jdbc4</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.2.0.Final</version>
    </dependency>
  </dependencies>
  <build>
    <finalName>com.myhib</finalName>
    <resources>
        <resource>
            <filtering>true</filtering>
            <directory>src/main/resources</directory>
        </resource>
    </resources>
  </build>
</project> 
```

什么可能是该异常的来源？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-06T22:27:26.673

正如@JBNizet 所说，你`hibernate.cfg.xml`应该在 src/main/resources 中。在 src 中，它不会被添加到运行时的类路径中。

如果您在 Eclipse 中运行您的项目，请不要忘记在构建路径配置中的项目首选项中检查`src/main/resources`是否没有从您的类路径中排除并且确实是一个源文件夹。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-06T21:42:51.940

该文件应位于运行时类路径中。`target/classes`Maven 将 .目录下的资源复制到文件夹中`src/main/resources`。所以你的配置文件应该在那里。

也就是说，您没有显示加载文件的代码，因此可能存在其他问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-27T10:14:09.300

您可以使用带有 hibernateConfig File 参数的 configure(File configFile) 方法从不同的目录（不一定是类路径）加载 hibernate.cfg.xml。（注意，我使用的是休眠 4.3.7）

像这样：

* * *

```
String hibernatePropsFilePath = "/etc/configs/hibernate.cfg.xml";
File hibernatePropsFile = new File(hibernatePropsFilePath);

Configuration configuration = new Configuration(); 
configuration.configure(hibernatePropsFile);

StandardServiceRegistryBuilder serviceRegistryBuilder = new StandardServiceRegistryBuilder().applySettings(configuration.getProperties());

ServiceRegistry serviceRegistry = serviceRegistryBuilder.build();

SessionFactory sessionFactory = configuration.buildSessionFactory(serviceRegistry); 
```

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T02:51:04.280

```
For the People who are facing this issue while deploying on linux machine 
```

您需要将 hibernate.cfg.xml 复制到您的战争项目的 classes 目录。

```
In Eclipse/Maven Project: (During Development) 
```

您需要将 hibernate.cfg.xml 复制到 Eclipse/Maven 项目的 src 目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-23T06:01:39.007

如果您在 Intellij Idea 中工作，则在 src\main\java 下创建一个名为“resources”的文件夹。打开项目的模块设置，从左侧选择“模块”，然后在“源”选项卡中选择新创建的“资源”文件夹并将其标记为“资源”。[![在此处输入图像描述](../Images/3afd5f757c90bf022519fd3cf850dd91.png)](https://i.stack.imgur.com/vAlVR.png)

那么这应该工作

```
Configuration con = new Configuration().configure("hibernate.cfg.xml"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-01T14:28:34.053

如果您使用的是**Netbeans**，请将您的`hibernate.cfg.xml`文件放入`"Build > classes >"`目录中，它将起作用。

# c# - C#如何在BackgroundWorker中创建一个重复方法（不阻塞GUI），改变TreeView中的imageIndex

> ID：15258597
> 
> 赞同：0
> 
> 时间：2013-03-06T21:38:52.283
> 
> 标签：c#, treeview, backgroundworker

我有一个简单的 WindowsForm 应用程序，其中包含 TreeView。初始化时 - TreeView 使用默认 imageIndexes 从 XML 构建。我的 TreeView 由服务器名称组成。在标签元素中，我放置了由主机和 IP 组成的字典。初始化后我调用方法，如果服务器超时，则更改 imageIndex。我需要在非阻塞主线程（GUI）的 BackgroundWorker 中调用此方法。我计划每分钟运行一次这个方法。下面是这个方法：

```
 private void checkServersTree()
    {
        TreeNodeCollection rootNodes = treeViewSrv.Nodes;
        TreeNodeCollection childNodes;
        PingServers ps = new PingServers();
        for (int i = 0; i < rootNodes.Count; i++)
        {
            childNodes = treeViewSrv.Nodes[i].Nodes;
            treeViewSrv.Nodes[i].Text += string.Format(" ({0})", childNodes.Count);
            int downServers = 0;
            foreach (TreeNode tNode in childNodes)
            {
                if (tNode.Tag != null)
                {
                    Dictionary<string, string> dicParams = tNode.Tag as Dictionary<string, string>;

                    if (!ps.getServerStatus(dicParams["host"], dicParams["ip"]))
                    {
                        tNode.ImageIndex = 1;   //red
                        rootNodes[i].ImageIndex = 2;   //yellow
                        downServers++;
                    }
                }
            }

            if(downServers == childNodes.Count)
                rootNodes[i].ImageIndex = 4;   //fatal red
        }
    } 
```

提前致谢！

* * *

感谢您的回答！在我写到这里之前，我阅读了 Invoke 和 BeginInvoke。但我无法解决这个问题 - 运行更改 TreeView ImageIndexes 的异步线程。我去找您的链接并编写了代码（如下），但 GUI 仍然被阻止。我究竟做错了什么？

```
namespace CCCServers
{
    public partial class CCCServers : Form
    {
        public delegate void checkSrvDelegate();
        public checkSrvDelegate myDelegate;
        private Thread myThread;

        public CCCServers()
        {
            InitializeComponent();

            TreeFromXML tfXML = new TreeFromXML(treeViewSrv, "../../Servers.xml");
            tfXML.initTreeNodesFromXML();

            treeViewSrv.ExpandAll();

            //checkServersTree();
            myDelegate = new checkSrvDelegate(checkServersTree);
        }

        private void checkServersTree()
        {
            TreeNodeCollection rootNodes = treeViewSrv.Nodes;
            TreeNodeCollection childNodes;
            PingServers ps = new PingServers();
            for (int i = 0; i < rootNodes.Count; i++)
            {
                childNodes = treeViewSrv.Nodes[i].Nodes;
                treeViewSrv.Nodes[i].Text += string.Format(" ({0})", childNodes.Count);
                int downServers = 0;
                foreach (TreeNode tNode in childNodes)
                {
                    if (tNode.Tag != null)
                    {
                        Dictionary<string, string> dicParams = tNode.Tag as Dictionary<string, string>;

                        if (!ps.getServerStatus(dicParams["host"], dicParams["ip"]))
                        {
                            tNode.ImageIndex = 1;   //red
                            rootNodes[i].ImageIndex = 2;   //yellow
                            downServers++;
                        }
                    }
                }

                if(downServers == childNodes.Count)
                    rootNodes[i].ImageIndex = 4;   //fatal red
            }
        }

        private void btnRDP_Click(object sender, EventArgs e)
        {
            myThread = new Thread(new ThreadStart(threadFunction));
            myThread.Start();
        }

        private void threadFunction()
        {
            MyThreadClass myThreadClassObject = new MyThreadClass(this);
            myThreadClassObject.Run();
        }

        private void treeView1_AfterSelect(object sender, TreeViewEventArgs e)
        {
            MessageBox.Show(e.Node.Text, "Info", MessageBoxButtons.OK, MessageBoxIcon.Information);
        }

        private void treeViewSrv_AfterSelect(object sender, TreeViewEventArgs e)
        {
            e.Node.SelectedImageIndex = e.Node.ImageIndex;  //Что бы иконка не менялась при выборе узла
        }
    }

    //***************************************************************************

    public class MyThreadClass
    {
        CCCServers cccSrv;
        public MyThreadClass(CCCServers myForm)
        {
            cccSrv = myForm;
        }

        public void Run()
        {
            cccSrv.Invoke(cccSrv.myDelegate);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:41:53.657

我解决了我的问题。在特殊位置插入我的代码后，`Debug.WriteLine(String.Format("<<<<<<<< This is {0} thread", Thread.CurrentThread.ManagedThreadId));`我意识到`Control.Invoke`在主线程中调用了`Control.Invoke`. 请看下面的代码：

```
private delegate void setServersCountDelegate(int idx, int cnt);
private delegate void setChldNodeImgIndexDelegate(TreeNode tNode, int imgIdx);

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    testBuildTree();
}

private void testBuildTree()
{
    Thread.CurrentThread.Name = "CheckServers";
    Debug.WriteLine(String.Format("|||||||||| This is {0} thread", Thread.CurrentThread.ManagedThreadId));
    changeImgIndex();
}

private void changeImgIndex()
{
    Debug.WriteLine(String.Format("--------- This is {0} thread", Thread.CurrentThread.ManagedThreadId));
    TreeNodeCollection rootNodes = treeViewSrv.Nodes;
    TreeNodeCollection childNodes;

    for (int i = 0; i < rootNodes.Count; i++)
    {
        childNodes = treeViewSrv.Nodes[i].Nodes;
        //treeViewSrv.Nodes[i].Text += string.Format(" ({0})", childNodes.Count);
        treeViewSrv.Invoke(new setServersCountDelegate(setServersCount), new object[] { i, childNodes.Count });
        int downServers = 0;
        foreach (TreeNode tNode in childNodes)
        {
            if (tNode.Tag != null)
            {
                Dictionary<string, string> dicParams = tNode.Tag as Dictionary<string, string>;

                if (!getServerStatus(dicParams["host"], dicParams["ip"]))
                {
                    Debug.WriteLine(String.Format("<<<<<<<< This is {0} thread", Thread.CurrentThread.ManagedThreadId));
                    //tNode.ImageIndex = 1;   //red
                    treeViewSrv.Invoke(new setChldNodeImgIndexDelegate(setChldNodeImgIndex), new object[] { tNode, 1 });    //red
                    //rootNodes[i].ImageIndex = 2;   //yellow
                    treeViewSrv.Invoke(new setChldNodeImgIndexDelegate(setChldNodeImgIndex), new object[] { rootNodes[i], 2 }); //yellow
                    downServers++;
                }
            }
        }

        if (downServers == childNodes.Count)
        {
            //rootNodes[i].ImageIndex = 4;   //fatal red
            treeViewSrv.Invoke(new setChldNodeImgIndexDelegate(setChldNodeImgIndex), new object[] { rootNodes[i], 4 });
        }
    }
}

private void setServersCount(int idx, int cnt)
{
    string[] spltNodeText = treeViewSrv.Nodes[idx].Text.Split(' ');
    treeViewSrv.Nodes[idx].Text = string.Format("{0} ({1})", spltNodeText[0], cnt);
}

private void setChldNodeImgIndex(TreeNode tNode, int imgIdx)
{
    tNode.ImageIndex = imgIdx;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:56:27.877

您需要使用表单的[Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)方法在创建窗口句柄的线程上执行用户界面方法。例如

```
Invoke((Action) checkServersTree); 
```

# blackberry - 黑莓本地连接在 ~ 120000 之后超时

> ID：15258599
> 
> 赞同：0
> 
> 时间：2013-03-06T21:38:57.230
> 
> 标签：blackberry, java-me, httpconnection

我有以下工作正常的代码：

```
HttpConnection request =
    (HttpConnection) Connector.open("https://www.google.com");
// It locks at the following line until an exception is thrown 
int responseCode = request.getResponseCode(); 
```

突然间，它开始在 getResponseCode() 行阻塞，直到抛出异常并显示以下消息：

> 本地连接在 ~ 120000 之后超时

一切都在模拟器中进行，并且我启用了 MDS。

# php - 什么是适当的 SQL(MySQL) 数据结构，用于保存具有共享子类别的分层标签云/类别？

> ID：15258605
> 
> 赞同：1
> 
> 时间：2013-03-06T21:39:08.953
> 
> 标签：php, mysql, sql, hierarchical-data

根据这篇文章[在 mysql 中管理分层数据，](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)保存常规分层数据的最合适的解决方案是嵌套集模型，我非常喜欢，但不幸的是我的任务稍微困难一些。我需要管理一个分层模型，其中一些子类别可能有多个父类，比如交叉集。此处描述的类似问题。

确切地说，我有一些类别结构，其中每个项目都可以属于多个类别（而且在我的路上，我需要提供一些类别继承的平均值，如果项目属于电视，那么它也属于 Home_electronics，所以常规标签云不会在这里做）。

tl;dr：需要一种简单的方式/方法（可能实现复杂，但管理简单，如删除、添加和查找路径）来管理具有 M:M 关系的类别模型。

遗憾的是，我仅限于 MySQL，但如果仅使用 SQL 无法解决此任务，我将继续在 PHP 中实现此功能（因此我很高兴听到任何不合时宜的消息）这个问题的盒子解决方案 - 库或只是来源，但这是最坏的情况）。

看起来我正在寻找的东西被命名为有向无环图（这很明显，但我可能太笨了，无法考虑它:)）。

很高兴看到它的一些实现具有良好的可管理性。

顺便说一下，常规 ID、ParentID、Data 不是一个选项，因为 MySQL 没有递归，因此无法通过一个查询检索数据（如果您让 PHP 创建一个包含 1000 个 JOIN 的查询并传递它，那么它可以）到 MySQL，但那是迟缓的）。

PS：仅使用 MySQL 不是我的决定，它只是简单地给出，我知道任何 NoSQL DBMS 都会更合适。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:56:41.410

mysql 中的 M 到 N 类型的关系表不应该工作吗？

```
tbl_Category
cat_id, name

tbl_Cat_parent
cat_id, parent_cat_id 
```

其中 parent_cat_id 指的是 Category->cat_id

# ios - 如何补充 JMC (Jira Mobile Connect) 提供的“环境”详细信息？

> ID：15258606
> 
> 赞同：0
> 
> 时间：2013-03-06T21:39:12.137
> 
> 标签：ios, jira-mobile-connect

我正在使用 JMC 在 iOS 应用程序中收集反馈。我想通过添加登录销售代表的 ID 来补充它提供的环境详细信息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:46:14.047

我还没有找到一种方法来编辑`environment`发送到 JIRA 的数据，但我发现如果您`customFields`通过 a 提供该方法的实现，则`JMCCustomDataSource`可以提供要发送的值字典。这些将作为自定义字段值发送到 JIRA。出于我的目的，我创建了一个名为的自定义字段，并通过字典`Sales Rep`发送了登录代表的用户名。`customFields`工作完美。

# java - JAVA：使用DND重新排序的缩略图视图

> ID：15258607
> 
> 赞同：1
> 
> 时间：2013-03-06T21:39:18.007
> 
> 标签：java, swing, thumbnails, drag-and-drop

我有一个缩略图查看器的应用程序，它需要显示具有重新排序功能的缩略图（使用 DnD）。

缩略图是一个自定义组件 ( *JLayeredPane* )。

这是应用程序的线框，以获得更好的想法。

![在此处输入图像描述](../Images/f36241a54a5c2cff11f810027eba8aa8.png)

任何要实现的方向/指针或任何可以执行重新排序功能的现有组件都会有很大帮助。

我可以将 JList 与每个元素一起用作缩略图吗？

注意：我不期待这里的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:26:50.047

我基本上是从网上偷来的，然后稍微修改了一下……

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.io.IOException;
import java.util.ArrayList;
import javax.swing.BorderFactory;
import javax.swing.DefaultListModel;
import javax.swing.DropMode;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.ListSelectionModel;
import javax.swing.TransferHandler;

public class TestListReorder extends JPanel {

    ArrayListTransferHandler arrayListHandler;

    public TestListReorder() {
        arrayListHandler = new ArrayListTransferHandler();
        JList list1, list2;

        DefaultListModel list1Model = new DefaultListModel();
        list1Model.addElement("0 (list 1)");
        list1Model.addElement("1 (list 1)");
        list1Model.addElement("2 (list 1)");
        list1Model.addElement("3 (list 1)");
        list1Model.addElement("4 (list 1)");
        list1Model.addElement("5 (list 1)");
        list1Model.addElement("6 (list 1)");
        list1 = new JList(list1Model);
        list1.setDropMode(DropMode.USE_SELECTION);
        list1.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
        list1.setTransferHandler(arrayListHandler);
        list1.setDragEnabled(true);
        JScrollPane list1View = new JScrollPane(list1);
        list1View.setPreferredSize(new Dimension(200, 100));
        JPanel panel1 = new JPanel();
        panel1.setLayout(new BorderLayout());
        panel1.add(list1View, BorderLayout.CENTER);
        panel1.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));

        setLayout(new BorderLayout());
        add(panel1, BorderLayout.LINE_START);
        setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));
    }

    /**
     * Create the GUI and show it. For thread safety, this method should be
     * invoked from the event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Make sure we have nice window decorations.
        JFrame.setDefaultLookAndFeelDecorated(true);

        //Create and set up the window.
        JFrame frame = new JFrame("DragListDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        TestListReorder demo = new TestListReorder();
        frame.setContentPane(demo);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
}

/*
 * ArrayListTransferHandler.java is used by the 1.4 DragListDemo.java example.
 */
class ArrayListTransferHandler extends TransferHandler {

    DataFlavor localArrayListFlavor, serialArrayListFlavor;
    String localArrayListType = DataFlavor.javaJVMLocalObjectMimeType
            + ";class=java.util.ArrayList";
    JList source = null;
    int[] indices = null;
    int addIndex = -1; //Location where items were added
    int addCount = 0; //Number of items added

    public ArrayListTransferHandler() {
        try {
            localArrayListFlavor = new DataFlavor(localArrayListType);
        } catch (ClassNotFoundException e) {
            System.out
                    .println("ArrayListTransferHandler: unable to create data flavor");
        }
        serialArrayListFlavor = new DataFlavor(ArrayList.class, "ArrayList");
    }

    public boolean importData(JComponent c, Transferable t) {
        JList target = null;
        ArrayList alist = null;
        if (!canImport(c, t.getTransferDataFlavors())) {
            return false;
        }
        try {
            target = (JList) c;
            if (hasLocalArrayListFlavor(t.getTransferDataFlavors())) {
                alist = (ArrayList) t.getTransferData(localArrayListFlavor);
            } else if (hasSerialArrayListFlavor(t.getTransferDataFlavors())) {
                alist = (ArrayList) t.getTransferData(serialArrayListFlavor);
            } else {
                return false;
            }
        } catch (UnsupportedFlavorException ufe) {
            System.out.println("importData: unsupported data flavor");
            return false;
        } catch (IOException ioe) {
            System.out.println("importData: I/O exception");
            return false;
        }

        //At this point we use the same code to retrieve the data
        //locally or serially.

        //We'll drop at the current selected index.
        int index = target.getSelectedIndex();

        //Prevent the user from dropping data back on itself.
        //For example, if the user is moving items #4,#5,#6 and #7 and
        //attempts to insert the items after item #5, this would
        //be problematic when removing the original items.
        //This is interpreted as dropping the same data on itself
        //and has no effect.
        if (source.equals(target)) {
            if (indices != null && index >= indices[0] - 1
                    && index <= indices[indices.length - 1]) {
                indices = null;
                return true;
            }
        }

        DefaultListModel listModel = (DefaultListModel) target.getModel();
        int max = listModel.getSize();
        if (index < 0) {
            index = max;
        } else {
            index++;
            if (index > max) {
                index = max;
            }
        }
        addIndex = index;
        addCount = alist.size();
        for (int i = 0; i < alist.size(); i++) {
            listModel.add(index++, alist.get(i));
        }
        return true;
    }

    protected void exportDone(JComponent c, Transferable data, int action) {
        if ((action == MOVE) && (indices != null)) {
            DefaultListModel model = (DefaultListModel) source.getModel();

            //If we are moving items around in the same list, we
            //need to adjust the indices accordingly since those
            //after the insertion point have moved.
            if (addCount > 0) {
                for (int i = 0; i < indices.length; i++) {
                    if (indices[i] > addIndex) {
                        indices[i] += addCount;
                    }
                }
            }
            for (int i = indices.length - 1; i >= 0; i--) {
                model.remove(indices[i]);
            }
        }
        indices = null;
        addIndex = -1;
        addCount = 0;
    }

    private boolean hasLocalArrayListFlavor(DataFlavor[] flavors) {
        if (localArrayListFlavor == null) {
            return false;
        }

        for (int i = 0; i < flavors.length; i++) {
            if (flavors[i].equals(localArrayListFlavor)) {
                return true;
            }
        }
        return false;
    }

    private boolean hasSerialArrayListFlavor(DataFlavor[] flavors) {
        if (serialArrayListFlavor == null) {
            return false;
        }

        for (int i = 0; i < flavors.length; i++) {
            if (flavors[i].equals(serialArrayListFlavor)) {
                return true;
            }
        }
        return false;
    }

    public boolean canImport(JComponent c, DataFlavor[] flavors) {
        if (hasLocalArrayListFlavor(flavors)) {
            return true;
        }
        if (hasSerialArrayListFlavor(flavors)) {
            return true;
        }
        return false;
    }

    protected Transferable createTransferable(JComponent c) {
        if (c instanceof JList) {
            source = (JList) c;
            indices = source.getSelectedIndices();
            Object[] values = source.getSelectedValues();
            if (values == null || values.length == 0) {
                return null;
            }
            ArrayList alist = new ArrayList(values.length);
            for (int i = 0; i < values.length; i++) {
                Object o = values[i];
                String str = o.toString();
                if (str == null) {
                    str = "";
                }
                alist.add(str);
            }
            return new ArrayListTransferable(alist);
        }
        return null;
    }

    public int getSourceActions(JComponent c) {
        return COPY_OR_MOVE;
    }

    public class ArrayListTransferable implements Transferable {

        ArrayList data;

        public ArrayListTransferable(ArrayList alist) {
            data = alist;
        }

        public Object getTransferData(DataFlavor flavor)
                throws UnsupportedFlavorException {
            if (!isDataFlavorSupported(flavor)) {
                throw new UnsupportedFlavorException(flavor);
            }
            return data;
        }

        public DataFlavor[] getTransferDataFlavors() {
            return new DataFlavor[]{localArrayListFlavor,
                serialArrayListFlavor};
        }

        public boolean isDataFlavorSupported(DataFlavor flavor) {
            if (localArrayListFlavor.equals(flavor)) {
                return true;
            }
            if (serialArrayListFlavor.equals(flavor)) {
                return true;
            }
            return false;
        }
    }
} 
```

[您可以在此处](http://www.java2s.com/Code/Java/Swing-JFC/DragListDemo.htm)查看原始帖子。

就个人而言，我不喜欢新的“组件”拖放 API，但在您的情况下，它可能是最简单和最快的实现......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T12:53:33.027

这工作得很好，但原始代码包含一个错误，因此您无法一次移动多个项目而不会收到错误消息，您可以通过切换 exportDone 函数的一些代码来避免这种情况，使其看起来像这样

```
protected void exportDone(JComponent c, Transferable data, int action) {
    if ((action == MOVE) && (indices != null)) {
        DefaultListModel model = (DefaultListModel) source.getModel();

        // If we are moving items around in the same list, we
        // need to adjust the indices accordingly since those
        // after the insertion point have moved.

        for (int i = indices.length - 1; i >= 0; i--)
            model.remove(indices[i]);

    }
    if (addCount > 0) {
        for (int i = 0; i < indices.length; i++) {
            if (indices[i] > addIndex) {
                indices[i] += addCount;
            }
        }
    }

    indices = null;
    addIndex = -1;
    addCount = 0;
} 
```

# c# - 验证和发布模型内的模型列表

> ID：15258611
> 
> 赞同：0
> 
> 时间：2013-03-06T21:39:33.493
> 
> 标签：c#, asp.net-mvc

我很难弄清楚如何在主模型中验证/提交模型列表。例如：

控制器：

```
[HttpPost]
public ActionResult submitData(MyModel model){
   ...submit data...
} 
```

模型：

```
public class MyModel{
    [Required]
    public string Title{get;set;}
    ...
    [Required]
    IList<SubModel> SubModels{getset;}
}
public class SubModel{
    [Required]
    public string Title {get;set;}
} 
```

看法：

```
@using(Html.BeginForm("submitData", "Home", FormMethod.Post){
   @Html.TextBoxFor(x=>x.Title);
   ... Code for submodels
} 
```

子模型应该能够即时添加，我已经在 javascript 中设置了，但是子模型应该是任意数量，具体取决于用户想要添加的数量。我怎样才能做到这一点，以便我对子模型的验证工作，当我提交帖子时，一切都适合模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:54:50.717

我建议您在命名输入字段时使用非顺序索引。史蒂文·桑德森（Steven Sanderson）[`excellent article`](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)对此主题有一个分步示例说明如何实现这一目标。它使用一个自定义`Html.BeginCollectionItem`帮助器，该帮助器将注意使用 Guids 为集合属性的输入字段生成正确的名称，从而尊重[`naming convention`](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)默认模型绑定器使用的名称。

Steven Sanderson 还写了一篇文章[`another article`](http://blog.stevensanderson.com/2010/07/12/editing-a-variable-length-list-knockout-style/)，说明了如何使用纯客户端模板而不依赖 AJAX 调用来添加新项目。

但是请记住，无论您做什么，一旦提交表单，如果您希望默认模型绑定器能够正确绑定视图模型上的集合属性，则应遵守命名约定。

# c# - 从基本表创建复杂模型

> ID：15258613
> 
> 赞同：-1
> 
> 时间：2013-03-06T21:39:39.620
> 
> 标签：c#, entity-framework

我不确定如何表达这个问题。基本上我的数据库中有一个表，如下所示：

```
 Table1
 _________
|id       |
|_________|
|services |
|_________|
|solutions|
|_________| 
```

但在我的模型中，我试图将其映射到三个对象：

```
class studies
{
    public int id {get;set;}
    public List<Service> services {get;set;}
    public List<Solution> solutions {get;set;}
}

class Solution
{
    public int id {get;set;}
    public string description {get;set;}
}

class Service
{
    public int id {get;set;}
    public string description {get;set;}
} 
```

所以我需要做的是从数据库中提取所有表数据，然后将其重新分配给我的类。我该怎么做这样的事情？我在不允许更改表结构的约束下工作，因此仅重新设计数据库不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:12:24.657

我会从研究对象集合中的数据库中检索数据：

```
class Study 
{
    public int ID {get; set;}
    public string Solutions {get; set;}
    public string Services {get; set;}
} 
```

然后我必须遍历集合并解析解决方案和服务字符串，每个组合两个字典“解决方案”和“服务”，其中键分别是每个解决方案和服务的名称，值是关联服务的列表（对于解决方案密钥）或相关解决方案（用于服务密钥）。就像是：

```
var solutions = new Dictionary<string, List<string>>();
var services = new Dictionary<string, List<string>>(); 
```

不确定语法是否正确，但你明白了。在填充字典时，请确保您不会在任何特定键的解决方案/服务列表中插入重复值。

然后，查找“service1”的可用解决方案列表将类似于：

```
var service1Solutions = services["service1"]; 
```

# struts2 - Struts 2 选择标签 - 在页面上多次使用标签（具有相同列表）不起作用

> ID：15258614
> 
> 赞同：0
> 
> 时间：2013-03-06T21:39:41.470
> 
> 标签：struts2, html-select

我需要能够在一个页面上多次使用相同的下拉列表。我第一次在选择标签上使用“列表”时，它工作正常。相同的列表不会填充我使用它的第二个选择标签。这是详细信息。

在动作类中，我填充了包含填充选择标记所需的值的 ArrayList。

```
setNames(new SomeDAO().getNames()); 
```

在 JSP 中

```
<s:select list="names"  
id="nameList"
listKey="nameId"
listValue="userName"                      
/> 
```

这个选择列表填充得很好。如果我在同一页面上使用以下选择标签（使用相同的列表），则无法打印。

```
<s:select list="names"                                                      
      id="rName"                                 
      listKey="nameId"
      listValue="userName" /> 
```

如果我用 #{'test':'test'} （硬编码列表）替换上面的“列表”，则标签显示正常。看起来我在 Action 中设置的属性在第一次使用后被清除。这是发生了什么还是我做错了什么？我收到“IllegalStateException：响应已提交”错误

编辑1：在处理JSP页面的action方法中使用了setNames()。这是一个简单的getter函数。在 JSP 中，这就是我所拥有的。

```
 <tr>
          <td align="left" class="td-plain">Add New:</td>
          <td class="td-plain">
                    <s:select list="names"  
                              id="addNameID"                                                    
                              name="addUserNameID"
                              listKey="reinsId"
                              listValue="reinsName"                   
                                  headerKey=""
                              headerValue="--User Name--"
                     />
          </td>
          <td class="td-plain"><input id="addTreatyNumber" type="text" /></td>  
          <td class="td-plain"><input id="addReinsPercentage" type="text" /></td>
          <td class="td-plain"><input id="addFlatDollarRetentionAmt" type="text" /></td>            
          <td class="td-plain">
              <%if(finance){ %>
                   <input type="button" class="greyButton" value="Add" onclick="addReinsInfo()"/>
              <%}else{ %>
         None
         <%} %> 
         </td>

     </tr> 
```

然后在那个页面上，我有

```
<tr id='<s:property value="caseGroupId"/>:<s:property value="treatyId"/>'>
        <td class="td-plain"><input type='checkbox' id='<s:property value="caseGroupId"/>:<s:property value="treatyId"/>'/></td> 
        <td class="td-plain">
                            <s:select list="names"                                                      
                              id="rName"            
                              name="dName"                   
                              listKey="reinsId"
                              listValue="reinsName"                   
                              headerKey=""
                              headerValue="--User Name--"

                             />

        </td>
        <td class="td-plain_"><s:textfield id="tNumber" value="%{treatyNumber}"/></td>           
        <td class="td-plain_"><s:textfield id="tPercentage" value="%{reinspercentage}"/></td>
        <td class="td-plain_"><s:textfield id="rAmount" value="%{flatDollarRetentionAmt}"/></td>                        
       <td class="td-plain"><input type="button" value="Delete" class="greyButton"/></td>   
      </tr> 
```

如果我将第二个标签中的“列表”更改为

```
list="#{'Test':'Test'}" 
```

标签显示正常。如果我可以提供任何进一步的信息，请告诉我。

编辑 2：我能够通过将下拉列表值设置为会话来使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:27:23.903

按照@Dave 和@Quaternion 的要求，发布相关的Java/JSP 代码。

但在那之前...我注意到您没有`name`在 Struts 中使用属性`Select`；

虽然您可以从不同的标签多次引用同一个源（`list`属性），但`Select`要从相同的对象列表中填充，您应该`name`为每个对象指定不同的，以定义哪个变量（发送回操作）包含其中的选定值`Select`；

这可能不是当前问题的答案，但很快就会出现。

# c# - 获取 CSV 文件的单个元素

> ID：15258620
> 
> 赞同：-1
> 
> 时间：2013-03-06T21:39:54.933
> 
> 标签：c#, string, list, csv, split

我正在尝试将一些 csv 元素添加到 Alimento 列表中，其中 Alimento 被声明为：

```
namespace ContaCarboidrati
{
    class Alimento
    {
       public virtual string Codice { get; set; }
       public virtual string Descrizione { get; set; }
       public virtual int Carboidrati { get; set; }
    }
} 
```

我的 csv 看起来像这样：

`"C00, Pasta, 75"`.

这是应该从 csv 创建列表的方法：

```
private static List<Alimento> CreaListaAlimentiDaCsv()
{        
   List<Alimento> listaCsv = new List<Alimento>();
   StreamReader sr = new StreamReader(@"C:\Users\Alex\Documents\RecordAlimenti.csv");
   string abc = sr.ReadLine();
   //listaCsv = abc.Split(",");
} 
```

abc 是“C00，意大利面，75”。我想获取一个元素以将其添加到列表中，或者将所有 3 个元素添加到列表中，我认为单个元素更容易制作。

对不起，我的英语不好

提前致谢

亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:46:22.760

你走在正确的轨道上，但你不能只创建一个包含三个字符串的 Alimento，如果你执行 abc.Split(",") 就会得到这样的结果。您需要为 csv 文件中的每个项目（行）创建一个新的 Alimento 对象，并正确初始化每个对象。像这样的东西：

```
var item = abc.Split(',');
listaCsv.Add(new Alimento() { Codice = item[0], Descrizione = item[1], 
Carboidrati = int.Parse(item[2])}; 
```

此外，您的 csv 似乎包含您可能想要删除的逗号后的空格。您可以使用 string.Trim() 摆脱前导/尾随空格。您还必须确保第三项实际上是一个整数，如果不是这种情况，则采取措施（即添加一些错误处理）。

附带说明一下，实现一个 csv 阅读器并不像人们想象的那么简单，但是那里有几个免费的 C# 实现。如果您需要比仅仅阅读一个简单的（并且严格地每项一行）csv 更高级的东西，请尝试以下方法之一：

*   [http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)
*   [http://www.filehelpers.com/](http://www.filehelpers.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:46:41.077

您可以使用 LINQ 解析文件

```
var listaCsv = (from line in File.ReadAllLines("RecordAlimenti.csv")
                let items = line.Split(',')
                select new Alimento {
                      Codice = items[0],
                      Descrizione = items[1],
                      Carboidrati = Int32.Parse(items[2])
                }).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:51:57.240

假设您的数据还不错，您可以很容易地解析它。

```
private IEnumerable<Alimento> CreaListaAlimentiDaCsv(string fileName)
{        
    return File.Readlines(fileName) //@"C:\Users\Alex\Documents\RecordAlimenti.csv"
               .Select(line => line.Split(',').Trim())
               .Select(
                    values =>
                        new Alimento
                            {
                                Codice = value[0],
                                Descrizione  = values[0],
                                Carboidrati = Convert.ToInt32(values[3])
                            });
} 
```

您也可以在方法上使用 Linq，例如

```
//Takes one line without iterating the entire file
CreaListaAlimentiDaCsv(@"C:\Users\Alex\Documents\RecordAlimenti.csv").Take(1); 

//Skips the first line and takes the second line reading two lines total
CreaListaAlimentiDaCsv(@"C:\Users\Alex\Documents\RecordAlimenti.csv").Skip(1).Take(1); 
```

# eclipse - 从 Eclipse 运行的 Hadoop mapreduce 作业的日志文件在哪里

> ID：15258622
> 
> 赞同：3
> 
> 时间：2013-03-06T21:39:59.917
> 
> 标签：eclipse, hadoop, mapreduce

当我从 eclipse 作为 hadoop 项目运行 wordcount 作业时，我找不到日志文件的位置。我的工作名称是 job_local_0001。jobtracker 日志文件在哪里。当我通过 Eclipse 运行作业时，我在 hadoop/logs 目录中的日志文件不包含这些信息。帮助！

# iphone - NSString 内置方法来比较相似字符的数量

> ID：15258624
> 
> 赞同：1
> 
> 时间：2013-03-06T21:40:04.933
> 
> 标签：iphone, ios, objective-c

是否有内置方法（我无法通过搜索文档找到它）来查看两个字符串中相似字母的数量？字母的顺序不相关，因此比较“abc”和“cad”将有 66% 的匹配字符“c”和“d”。出现的次数也很重要。'a' 应该第一次匹配，但第二次不匹配，因为两个字符串之间只有一个共同的 'a'。目前是否有一种内置方法可以通过使用一些按位运算来做到这一点，还是我必须循环并手动比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:57:27.747

您必须自己构建它，但这里有一个捷径。有一个内置的集合类称为`NSCountedSet`. 此对象保留每个唯一对象以及添加的每个对象的数量。

您可以获取两个字符串并将它们的字符加载到两个不同的`NSCountedSet`集合中。然后只需检查结果集合中的项目。例如，从第一个`NSCountedSet`. 检查它是否存在于第二个`NSCountedSet`. 该特定字母的 2 个计数中较小的一个是 2 个字符串共有的这些字母的数量。要缩短迭代次数，请从具有较少对象的集合开始，然后枚举这些对象。

这是 Apple 的`NSCountedSet`. [https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSCountedSet_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSCountedSet_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:59:58.573

我很犹豫，但是，可能没有满足您要求的方法。我会这样做：

在 NSString 上创建一个类别。让我们称之为`-(float)percentageOfSimilarCharactersForString:(NSString*)targetString`

这是属于此类的粗略伪代码：

1.  制作一个`self`名为`selfCopy and trim`selfCopy` 的副本以仅包含唯一字符。
2.  同样修剪`targetString`为独特的字符。为了修剪到独特的字符，您可以使用`NSSet`它或其子类。循环遍历每个字符并添加到集合中会有所帮助。
3.  现在按 ASCII 值对两组进行排序。
4.  循环遍历`targetString`-related NSSet 的每个字符并检查它是否存在于`selfCopy`-related NSSet 中。为此，您可以使用另一个名为 containsString 的类别。[你可以在这里找到](https://stackoverflow.com/questions/2753956/string-contains-string-in-objective-c)。每次 containsString 返回 true 时，增加一个预定义的计数器。
5.  您的返回值将是`(counter_value/length_of_selfCopy)*100`.

# python - 了解内存消耗：释放 StringIO 的内存？

> ID：15258626
> 
> 赞同：1
> 
> 时间：2013-03-06T21:40:14.617
> 
> 标签：python, memory, buffer

我很想知道为什么在第一个示例中，内存消耗就像我想象的那样发生：

```
s = StringIO()
s.write('abc'*10000000)
# Memory increases: OK
s.seek(0)
s.truncate()
# Memory decreases: OK 
```

而在第二个示例中，最后，我使用了相同的东西，但是在 truncate 方法之后内存似乎没有减少。下面的代码在一个类的方法中。

```
from StringIO import StringIO
import requests

self.BUFFER_SIZE = 5 * 1024 * 2 ** 10 # 5 MB
self.MAX_MEMORY = 3 * 1024 * 2 ** 10 # 3 MB

r = requests.get(self.target, stream=True)  # stream=True to not download the data at once

chunks = r.iter_content(chunk_size=self.BUFFER_SIZE)
buff = StringIO()

# Get the MAX_MEMORY first data
for chunk in chunks:
    buff.write(chunk)
    if buff.len > self.MAX_MEMORY:
        break

# Left the loop because there is no more chunks: it stays in memory
if buff.len < self.MAX_MEMORY:
    self.data = buff.getvalue()

# Otherwise, prepare a temp file and process the remaining chunks
else:
    self.path = self._create_tmp_file_path()

    with open(self.path, 'w') as f:
        # Write the first downloaded data
        buff.seek(0)
        f.write(buffer.read())

        # Free the buffer ?
        buff.seek(0)
        buff.truncate()

        ###################
        # Memory does not decrease
        # And another 5MB will be added to the memory hiting the next line which is normal because it is the size of a chunk
        # But if the buffer was freed, the memory would stay steady: - 5 MB + 5 MB

        # Write the remaining chunks directly into the file
        for chunk in chunks:
            f.write(chunk) 
```

有什么想法吗？谢谢。

# powershell - 如何在 powershell 3 中管理计划作业？

> ID：15258627
> 
> 赞同：0
> 
> 时间：2013-03-06T21:40:16.947
> 
> 标签：powershell, powershell-3.0

根据文档， get-scheduledjob 仅返回所有者是当前用户的计划作业。其他计划作业命令行开关（如 set-scheduledjob）也仅适用于所有者为当前用户的计划作业。这使得非所有者无法获取作业状态、修改作业（例如设置其他凭据）等。

在一个适当的 IT 组织中，我要说的是，对于这些工作来说，允许来自不同管理员的管理至关重要。

我是否错过了一些管理、查看结果等的方法（除了直接查看所有者的 appdata 中的 powershell 输出文件）？

澄清一下 - 我正在寻找一种方法来使用 Powershell 创建和管理**ScheduledJobs**。如果您通过 UI、schtask 或其他计划任务特定工具修改执行计划作业的计划任务，您将得到意想不到的结果。如果您更改所有者/凭据，计划任务将失败。您可以使用 UI/schtasks 来更改计划而不会导致任何问题。除了更改所有者之外，我还想获取 get-job 的结果以监控作业进度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:10:57.947

我曾经能够使用 Powershell 让它工作的唯一方法是调用 schtask.exe 实用程序：

注意：“/U”用于本地管理，“/RU”用于远程管理，本地工作也不需要“/S”。

通过导入以前从任务计划程序导出的 XML 来创建

```
[string]$string = 'schtasks.exe /create /RU yourdomain\username /RP $password /TN Task-Name /XML "D:\Path\To\ExportedXML.xml" /S ServerName' 
```

删除：

```
[string]$string = 'schtasks.exe /delete /RU yourdomain\username /P $password /TN Task-Name /S ServerName /F' 
```

询问：

```
[string]$string = 'schtasks.exe /query /RU yourdomain\username /P $password' 
```

本地运行：

```
Invoke-Expression -Command $string 
```

远程运行：

```
Invoke-Command -ScriptBlock {$string} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:30:35.370

我编写了一些用于管理计划任务的 PowerShell 脚本（它们使用 TaskService COM 对象）：

[在 Windows 7、Windows Server 2008 和 Windows Vista 中重命名计划任务](http://www.windowsitpro.com/article/scripting/powershell-script-rename-tasks-140368)

[操作方法：使用 PowerShell 报告计划任务](http://www.windowsitpro.com/article/windows-powershell/how-to-powershell-scheduled-tasks-140978)

[更新计划任务的凭据](http://www.windowsitpro.com/article/scripting/updating-scheduled-task-credentials-142570)

账单

# php - 使用 PHP 获取文件扩展名的最短方法

> ID：15258628
> 
> 赞同：3
> 
> 时间：2013-03-06T21:40:25.010
> 
> 标签：php, file-extension

我见过很多处理特定文件名扩展名的函数。我自己总是使用我的这个解决方案：

```
function extension( $filename = __FILE__ ) {
    $parts = explode('.', $filename);
    return (strtolower($parts[(sizeof($parts) - 1)]));
}

echo extension();              // php
echo extension('.htaccess');   // htaccess
echo extension('htaccess');    // htaccess
echo extension('index.php');   // php 
```

这是最好和最快的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:42:57.337

我会继续说这不是最好的方法，我怀疑它也不是最快的。规范的方法是使用[`pathinfo`](http://www.php.net/manual/en/function.pathinfo.php).

```
$ext = pathinfo($file, PATHINFO_EXTENSION); 
```

使用的问题`explode`是您正在创建一个数组，这必然会占用更多内存（即使它是微不足道的），这几乎总是会导致速度下降。如果您真的想采用家常菜的非规范方式，我建议[`strrpos`](http://php.net/manual/en/function.strrpos.php)：

```
function get_extension($file)
{
    $pos = strrpos($file, '.');
    // for condition when strrpos returns FALSE on failure.
    if($pos !== FALSE) return substr($file, $pos);
    return FALSE;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T21:43:52.370

只需使用[pathinfo()](http://www.php.net/manual/en/function.pathinfo.php)

```
$file =  pathinfo('index.php');
echo $file['extension']; // 'php' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T21:52:19.413

```
$file = "filename.php.jpg.exe";
echo substr($file, strrpos($file, "."));//.exe 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T21:43:03.810

那行得通，我要改变的一件事是你的回报：

```
return strtolower(end($parts)); 
```

我同意 pathinfo 可能是我改进代码的更好方法。

# mdx - MDX - 计算成员 - 在所有时间段使用相同的值

> ID：15258629
> 
> 赞同：2
> 
> 时间：2013-03-06T21:40:26.743
> 
> 标签：mdx

我对 MDX 很陌生，但我坚持支持一个新工具，并且对我最近遇到的一个请求有疑问。我们有一个处方数据立方体，其中处方者被分配到不同的地区。我的客户想要一个函数来计算分配到一个地区的处方人数，所以我制作了这个：

```
COUNT(
     FILTER([M_Prescriber].[Prescriber].[Prescriber].Members*[Measures].[M-TRx],
     [M_Market_Product].[Product].[All]
     )                              
) 
```

这给出了在该时间段内开过处方的处方者的数量。客户遇到的问题是，这个功能每个月都会产生不同的结果，因为有些开药者自然不会每个月都开处方。有没有办法在不考虑他们在特定月份是否有任何处方数据的情况下返回分配到某个地区的处方者人数。或者我可以在最近的时间段计算这个值并在每个时间段使用那个值吗？

让我知道我是否可以提供更多详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:17:14.173

好的，如果我理解正确，您想要计算每个区域中的 Prescriber 成员，并且您已经建立了一个层次结构，描述了哪些 Prescriber 在哪个区域中。

这是一个针对 Adventure Works 的示例，说明您如何做到这一点：

```
WITH MEMBER [Measures].[count] AS 
    Count([Customer].[Customer Geography].CurrentMember.Children)
SELECT
    [Measures].[count] ON COLUMNS,
    DrilldownLevel([Customer].[Customer Geography].[All Customers]) ON ROWS
FROM [Adventure Works]; 
```

结果：

```
 count
All Customers       6
Australia           5
Canada              6
France             17
Germany             6
United Kingdom      1
United States      36 
```

这仅计算每个节点的直接子节点（层次结构中的省或州），因此所有客户的计数不是每个国家/地区计数的总和。

在您的情况下，您可以将 ROWS 选择更改为您的 Division -> District -> Territory 级别。

希望这至少可以帮助您走上正轨。

# java - 如何在 Java 中创建临时表并在其中插入 xml 数据

> ID：15258631
> 
> 赞同：1
> 
> 时间：2013-03-06T21:40:28.620
> 
> 标签：java, oracle, plsql

我有多个问题，其中一个显然是设计问题。我已经解释了我为客户要求提出的设计，但我遇到了一些实施挑战。

服务器：OracleE Linux
数据库：Oracle 11g

目标是通过从多个系统收集数据来生成报告。

*   库存系统：该系统提供视图，并为此系统数据库创建 dblink。*   订单系统：该系统提供 Web 服务以返回 XML 格式的数据。*   报告系统：这里是报告将被启动和生成的地方，这是一个从 WebUI 调用的 Web 服务。

    逻辑：

    *   从我们称为订单系统的报告系统 WS 中，这将返回一个 xml 格式的数据块（可以很大但只有三个字段）。*   创建一个临时表并将 XML 中的所有数据插入其中。*   加入库存系统视图和临时数据以获取所有需要的数据并发送到报告系统。

    问题 ：

    *   如何在java中创建临时表？*   如何将 XML 转换为 sql 数据并插入临时表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:50:37.987

当我看到问题时，我将使用[Java 的最佳 XML 解析器](https://stackoverflow.com/questions/373833/best-xml-parser-for-java)之一解析 XML，并为表创建一个数组。如果字段不是字符串，一种可能性是创建将 XML 值作为构造函数的对象。

# facebook - 社交网络帖子链接无法正常工作

> ID：15258634
> 
> 赞同：1
> 
> 时间：2013-03-06T21:40:48.353
> 
> 标签：facebook, metadata, hyperlink, google-plus

我遇到的问题是，当我将我网站上的帖子链接发布到 Facebook 或 Google+ 时，该链接指向我的主页。即使在预览中，显示的缩略图也是主页的缩略图。

从我发现的（并没有太多）看来，问题可能出在 facebook 元数据上。我试图在 facebook 的开放图形验证器上对其进行验证，起初，当链接正常工作时，我得到了 206 的结果。现在我明白了：此调试器无法抓取 Facebook URL。试试你自己的。不知道为什么。

Google+ 也有同样的问题。当我第一次发布该网站时，它运行良好，这突然发生了。

这是我的标题中的内容：

```
 <!--Facebook Metadata /-->
  <meta property="og:title" content="Website Title"/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="http://URL.com/"/>
  <meta property="og:image" content="http://URL.com/img.png"/>
  <meta property="og:site_name" content="Site Name"/>
  <meta property="fb:admins" content="User_1"/>
  <meta property="og:description" content="Website Descriptiom"/>

  <!--Google+ Metadata /-->
    <meta itemprop="name" content="Google+ ID">
    <meta itemprop="description" content="Description">
    <meta itemprop="image" content="Empty"> 
```

我已经尝试删除它，但问题仍然存在。我确实想指出，我有一个 html 网站，其中包含一个托管在我的服务器上的 wordpress 博客。想知道问题是否与wordpress有关？

元数据应该放在 index.html 和 wordpress 主页上还是只放在 index.html 上？任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:11:26.390

当您删除这些元数据标签时，特别是 og: 那些（facebook 的开放图形元标签） - 您必须告诉 Facebook 在缓存所有内容时获取您页面的新副本。如果您还没有尝试过：

1.  删除那些标签
2.  在您的实时站点上查看源代码，以确认它们实际上已被删除
3.  转到[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)并输入您正在测试的页面的 URL。这将告诉 Facebook 获取一个新副本。

如果这有效（应该如此），那么您可以尝试保留哪些标签以及如何使它们动态化 - 知道无论何时进行更改，您都必须重做第 3 步以告诉 FB 获取新副本.

# fluent-nhibernate - 在流利的 nhibernate 上映射一组自定义类型

> ID：15258635
> 
> 赞同：1
> 
> 时间：2013-03-06T21:40:50.453
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

我在 Fluent NHibernate 上有一个自定义类型，我需要使用 HasMany 关联将其映射到其类型的集合。但是，Fluent Nhibernate 不允许我在 HasMany 上指出它是关于自定义类型的，就像我在常规类型中所做的那样。

这是我的代码：

```
HasMany(x => x.AvailablePaymentOptions)
            .KeyColumn("OFFER_ID")
            .Cascade.None()
            .KeyNullable()
            .Not.LazyLoad(); 
```

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:38:47.290

完成不使用自定义类型，而是映射一个组件：

```
HasMany(x => x.AvailablePaymentOptions)
            .Table("MY_TABLE")
            .KeyColumn("MY_COLUMN")
            .Component(component =>
                           {
                               //MAP YOUR CUSTOM TYPE HERE
                           })
            .Cascade.None()
            .KeyNullable()
            .Not.LazyLoad(); 
```

# javascript - setRequestHeader 有什么作用？

> ID：15258639
> 
> 赞同：1
> 
> 时间：2013-03-06T21:41:21.680
> 
> 标签：javascript, xmlhttprequest

我使用 ajax 将文本发送到我的服务器。如果我删除下面的行，它就会中断。

```
xhr = new window.XMLHttpRequest();
xhr.open("POST", config.url, true);
xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");  // removal causes error 
```

我注意到我的 get 请求不需要请求标头。事实上，这是我用过的唯一 requestHeader。

x-www-form-urlencoded 到底是什么，为什么需要它？

它如何/它与 encodeURIComponent 相关，我发现我还必须在发送到服务器的文本上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:46:11.967

它确实与[`encodeURIComponent(str)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)，因为 encodeURIComponent 根据百分比编码对表单组件进行编码：[http](http://en.wikipedia.org/wiki/Percent-encoding) ://en.wikipedia.org/wiki/Percent-encoding 。

[WWW 表单 URL 编码](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1)进一步指定传输为 的字段，`NAME=CONTENT`其中名称和内容是百分比编码的，并且不同的字段由 & 分隔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:52:15.820

此标头为 POST 变量定义正确的编码。

请参阅：[http ://en.wikipedia.org/wiki/POST_(HTTP)#Use_for_submitting_web_forms](http://en.wikipedia.org/wiki/POST_(HTTP)#Use_for_submitting_web_forms)

# web-applications - 构建完整的应用程序（设计、语言和数据库）

> ID：15258640
> 
> 赞同：0
> 
> 时间：2013-03-06T21:41:36.573
> 
> 标签：web-applications, architecture

我有一个创建审查应用程序（后端和多个前端）的想法，但我正在努力寻找方向。

就上下文而言，假设应用程序类似于 Yelp.com，用户会发布评论（对产品），然后阅读其他用户的评论。

基本上，我的主要想法是创建一个基于 API 的后端，一旦完成，我将构建（或让它们构建）一个网站和移动应用程序（Android/iOS）来使用 API 来检索和发布数据。另请记住，此应用程序还将使用（只读）其他外部 API。

对于接下来的问题，请考虑托管。一开始，我可能会坚持使用常规的 Linux 主机，然后随着我们的成长升级到专用主机。另外，这是我的“家”项目，所以除了我的时间，没有太多的钱可以投入其中。

问题：

1) 设计：

这真的是最好的方法吗？是的，我很想从头开始创造一些伟大的东西，但我应该从一开始就担心吗？或者，我应该采取更简单的方法——没有 API，只是网站和移动应用程序直接查询和发布数据——然后在我们变成 Yelp 或 Facebook 时发疯，然后重构整个事情？

2）语言和框架：

我从事 Microsoft 开发已有 10 多年了，在过去的几年里，我越来越喜欢开源语言，我学习了一些 Ruby on Rails 和 PHP，我想坚持使用它们（开源语言）对于这个项目。考虑到应用程序的易用性、快速开发和未来增长（包括招聘开发人员等），您会建议哪些语言？

3) 数据库：

同样，来自 Microsoft 的 SQL Server 对我来说是一个简单的选择，坚持开源概念，MySQL 会是最佳选择吗？

我认为这涵盖了它。如果有任何问题，请提出，我将编辑原始帖子以包含我错过的任何内容。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:39:57.617

由于这是一个小项目，我建议使用它作为您的参考点。我认为这迫使你做出一些决定。

1.  如果您还没有立即准备好进行移动工作，那么 API 可能会过大。另外，您可以随时重构代码以稍后隐藏在服务层后面。

2.  选择你喜欢编码的语言。在我看来，语言之间的一些差异只是开始大规模出现。例如，许多拥有大量数据的大公司正在远离 Ruby。但现在不用担心。只要找到一种让你快乐的语言，你就可以快速完成一些事情。

3.  由于您的预算有限，我会选择 MySQL。如果您来自 SQL Server，这并不是一个巨大的学习曲线。许多概念——甚至语法——都可以很好地转移。

在我看来，要让一个想法落地，你需要让它变得有趣。这意味着有趣/有趣的语言和工具*，并*保持简单。

If you start to have tons of success you can always hire people smarter than you to help out. =)

# javascript - AJAX表单提交后如何使用成功回调函数重定向

> ID：15258641
> 
> 赞同：1
> 
> 时间：2013-03-06T21:41:39.977
> 
> 标签：javascript, ajax, jquery

我的表单中有一个按钮（不是提交），它触发了 AJAX 调用。我希望页面之后重新加载并反映新状态（由 AJAX 调用修改）。`success:`AJAX 调用工作正常，除非我尝试在回调函数的末尾添加重定向。当重定向在回调中工作时，页面重定向并且 AJAX 调用没有效果。

似乎重定向正在“中断” AJAX 调用而不是让它发生，但这让我感到困惑。我认为`success:`回调仅在拨打电话*后发生。*那么回调函数中的事情怎么会干扰应该已经发生的事情呢？

这是一些 HTML：

```
 <a href="http://example.dev/my-file-delete" id="deleteresume">Delete file</a> 
```

这是我的javascript：

```
 var deleteresume = function(event) {
        event.preventDefault();
        $.ajax({
            type: "POST",
            url: "<?php echo $link_to_delete; ?>",
            success: hideresumefile( event.target )
        });

    }
    $("#deleteresume").click( deleteresume );
    var hideresumefile = function( target ) {
        $(target).closest('div').css('display', 'none');
        //THIS IS THE PROBLEM...
        $(location).attr('href', 'http://example.dev/handler.php');
    } 
```

我尝试了许多重定向的变体，例如：

```
window.location.replace("url");
window.location.href = "url";
location.reload(true);
window.location.reload(true);
location.href('url');
window.location.href('url'); 
```

当这些工作时，AJAX 调用*不起作用*。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:46:10.813

```
success: hideresumefile( event.target ) 
```

您没有传递函数，而是在此处调用它。这意味着您的`hideresumefile`函数将在 AJAX 调用之前实际运行......

`success`必须是一个函数，为了保持相同的功能，你可以使用：

```
success: function () {
    hideresumefile( event.target );
} 
```

因此，您将函数调用包装在另一个函数中，该函数仅定义，未调用。只有在 AJAX 操作成功时才​​会调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:57:25.583

将您的 hideresumefile 调用包装在一个函数中。

```
var deleteresume = function(event) {
    event.preventDefault();
    $.ajax({
        type: "POST",
        url: "<?php echo $link_to_delete; ?>",
        success: function(result) { hideresumefile( event.target ); }
    });
}

$("#deleteresume").click( deleteresume );

var hideresumefile = function( target ) {
    $(target).closest('div').css('display', 'none');
    $(location).attr('href', 'http://example.dev/handler.php');
} 
```

# grails - Grails fork 是否使用端口 8080？

> ID：15258642
> 
> 赞同：0
> 
> 时间：2013-03-06T21:41:42.340
> 
> 标签：grails, grails-2.2

我尝试在以下位置使用新的分叉选项`buildConfig.groovy`：

```
grails.project.fork = [
   run: [maxMemory:1024, minMemory:64, debug:false, maxPerm:256]
] 
```

然后我启动了应用程序：

```
grails run-app 
```

并尝试访问 localhost:8080/myapp，但应用程序没有响应。

我缺少其他一些配置？

**编辑：**根据@c_maker 的回答，我检查了这个过程。更改为`debug:true`，`--stacktrace`我看到以下消息：

```
| Running Grails application
Listening for transport dt_socket at address: 5005 
```

并且该过程不退出，但不做任何其他事情（等待 3 分钟）。所以我不知道这是否与链接中指出的相同。

**有趣的是 stop-app 表示服务器已停止但进程仍然存在！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:09:59.040

看起来其他人也有类似的问题：

[http://grails.1312388.n4.nabble.com/Fork-mode-problems-td4641428.html](http://grails.1312388.n4.nabble.com/Fork-mode-problems-td4641428.html)

看起来像一个真正的错误，但我在上面找不到 JIRA。

# php - PHP和windows定时任务

> ID：15258653
> 
> 赞同：0
> 
> 时间：2013-03-06T21:42:28.583
> 
> 标签：php, scheduled-tasks

我正在使用 PHP 并设置了一些 Windows 计划任务来运行 .bat 文件，这些文件类似于

```
"C:\PHP\php.exe" "C:\inetpub\wwwroot\cron\run-me.php" 
```

在他们中。这些都很好用，我已将任务设置为每 30 分钟运行一次。“run-me.php”文件包含检查记录结束日期的脚本，如果结束日期小于现在，则将其过期（脚本中有更多功能，例如发送电子邮件等）。同样，它们都工作得很好。

因为该脚本仅每 30 分钟运行一次，所以我还希望在网站上有访问者时执行该脚本，所以基本上在每个页面加载时，检查结束项目，使它们过期，继续加载以保持所有记录是最新的。我在 windows 任务中执行的原因是因为几个小时内可能没有任何访问者，所以我需要使记录过期并发送电子邮件。

现在，我遇到的问题是，如果 Windows 任务正在运行并且访问者重新加载页面，我会遇到双重脚本正在执行，因为我经常收到具有相同内容的双重电子邮件。

我的 Windows 任务只允许执行单个实例，如果运行时间超过 5 分钟，它会被强制停止。

我的问题是：

1.  我可以从我的 PHP 脚本执行 Windows 计划任务，以便只执行同一脚本的一个实例吗？
2.  我正在为数据库使用 MySQL，我是否应该锁定该行以便没有其他东西可以对其执行任何操作，从而允许执行第一次访问记录的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:51:20.407

使用事务应该可以解决问题。但是，我建议您只在 cron（或 Windows 中的调度程序）中执行此操作，即使这意味着它每五分钟运行一次。

# java - 将图像加载到滚动视图会导致图像超出滚动视图

> ID：15258654
> 
> 赞同：0
> 
> 时间：2013-03-06T21:42:31.573
> 
> 标签：java, android, xml

我正在将 Android Camera 文件夹中的图像动态加载到水平滚动视图中。问题是滚动视图的末尾（右侧）有一个巨大的空间，并且当我填充滚动视图（向左）时，图像被推离前面的屏幕。加载的图像越多，滚动视图末端的间隙就越大，越多的图像被推离前面。

xml 只是作为父级的滚动视图，作为子级的线性布局。

```
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:id="@+id/scrollView1"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:layout_gravity="center_horizontal" >
  <LinearLayout
    android:id="@+id/imageList"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:orientation="horizontal" >
  </LinearLayout>
</HorizontalScrollView> 
```

该代码使用异步任务加载图像。

```
private class loadImages extends AsyncTask<Context, ImageView, Boolean> {
  @Override
  protected Boolean doInBackground(Context... params) {
    File sdCard = Environment.getExternalStorageDirectory();
    dir = new File(sdCard.getAbsolutePath() + "/DCIM/Camera");
    dir.mkdirs();
    ImageView gtbImage = null;

    if (dir.isDirectory()) {
      String[] children = dir.list();
      for (int i = 0; i < children.length; i++) {
          File imageLocation = new File(dir.getAbsolutePath() + "/" + children[i]);
          Bitmap myBitmap = decodeFile(imageLocation, 250, 250);

          gtbImage = new ImageView(getApplicationContext());
          gtbImage.setImageBitmap(myBitmap);
          imageList = (LinearLayout) findViewById(R.id.imageList);

          LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, Gravity.RIGHT);
          p.setMargins(5, 5, 5, 5);

          gtbImage.setLayoutParams(p);
          gtbImage.setPadding(1, 1, 1, 1);
          gtbImage.setBackgroundColor(Color.WHITE);
          gtbImage.setScaleType(ImageView.ScaleType.FIT_CENTER);
          publishProgress(gtbImage);
      }

    }

    return null;
  }

  protected void onProgressUpdate(ImageView... v) {
    imageList.addView(v[0]);
  } 
```

这是一个更好地描述滚动视图末端的图像。注意最后的大空白点。图像越多，空间就越大。

![在此处输入图像描述](../Images/b26a6b9a77459b509c69dd4eeaab69c5.png)

对此感到非常困惑，我敢肯定它是我想念的一些简单的东西，但是在一遍又一遍地研究之后，我已经走到了死胡同，需要一双更聪明的眼睛来看看:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:50:57.380

尝试删除xml中的`android:layout_gravity="center_horizontal"`行。`HorizontalScrollView`不久前我也遇到过一些类似的问题。

相反，您应该能够按照此处的建议在 上使用，或者按照此处的建议[同时](https://stackoverflow.com/a/8985568/675383)`android:fillViewPort="true"`使用和[在](http://javierloriente.wordpress.com/2010/08/20/android-development-centering-views-in-a-scrollview/)您的中。`HorizontalScrollView``android:layout_gravity="center"``android:gravity="center"``LinearLayout`

# r - 如何绘制一条稀疏（有间隙）线，其线段根据 R 中的某些因素着色？

> ID：15258656
> 
> 赞同：5
> 
> 时间：2013-03-06T21:42:46.787
> 
> 标签：r, ggplot2, lattice

我有一个`data.frame`时间序列。里面也有`NA`s 以及我想用一个因素来突出显示一条线的不同部分。

```
flow.mndnr <- function(id, start, end) {
  uri <- sprintf("http://maps1.dnr.state.mn.us/cgi-bin/csg.pl?mode=dump_hydro_data_as_csv&site=%s&startdate=%s&enddate=%s", id, start, end)
  dat <- read.csv(url(uri), colClasses=c(Timestamp="Date"))
  rng <- range(dat$Timestamp)
  d <- data.frame(Timestamp=seq(rng[1], rng[2], by='day'))
  merge(d, dat, all.x=TRUE)
}
dat <- flow.mndnr("28062001", as.Date("2002-04-02"), as.Date("2011-10-05")) 
```

我可以无条件地绘制它

```
library(lattice)
xyplot(Discharge..cfs. ~ Timestamp, dat, type='l', cex=0.5, auto.key=TRUE) 
```

![在此处输入图像描述](../Images/a48d86718508870d65d52666b52f5682.png)

但是当我尝试引入因子时，我无法摆脱连接线

```
xyplot(Discharge..cfs. ~ Timestamp, dat, type='l',
    groups=dat$Discharge..cfs..Quality, cex=0.5, auto.key=TRUE) 
```

![在此处输入图像描述](../Images/e597dee659ef94e2103106337e21bfb7.png)

与 ggplot2 相同

```
dat$quality <- dat$Discharge..cfs..Quality
ggplot(dat, aes(x=Timestamp, y=Discharge..cfs.)) +
  geom_path(aes(colour=quality)) + theme(legend.position='bottom') 
```

![在此处输入图像描述](../Images/4df0d3677ca6c27f800699a3aed63293.png)

我试过`geom_line`没有成功。我在[ggplot2 邮件存档](https://groups.google.com/d/msg/ggplot2/X6J1bxUSSyU/WxMENWQiuGEJ)中读到这`geom_path`是要走的路。但这对我来说不太适用。

PS为什么ggplot2不喜欢名字中的点所以我不得不使用另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:04:01.640

问题在于分组。您可以使用`year`跳过这些跳转。做就是了：

```
dat$grp <- format(dat$Timestamp, "%Y")
ggplot(dat, aes(x=Timestamp, y=Discharge..cfs.)) +
    geom_path(aes(colour = quality, group = grp)) + 
    theme(legend.position='bottom') 
```

你得到：

![在此处输入图像描述](../Images/24119dc94141ce59819dc0f407f0235d.png)

**编辑：**详细回答评论：只要您不知道要分组的变量，就无法正确分组。如果您在一年中缺少几个月，那么这段代码当然会产生跳跃。在这种情况下，我建议做这样的事情：

```
dat$grp <- paste(format(dat$Timestamp, "%Y"), format(dat$Timestamp, "%m"))
ggplot(dat, aes(x=Timestamp, y=Discharge..cfs.)) +
    geom_path(aes(colour = quality, group = grp)) + 
    theme(legend.position='bottom') 
```

你得到这个：

![在此处输入图像描述](../Images/1aafc59dfda5af3dee408851a4d2ccf9.png)

# ios - 拆分视图 MasterView 未显示在弹出窗口中但滑入

> ID：15258657
> 
> 赞同：1
> 
> 时间：2013-03-06T21:42:48.740
> 
> 标签：ios, xcode, ipad, cocoa-touch, uisplitviewcontroller

在许多 iPhone 应用程序之后，我正在尝试我的第一个 iPad 应用程序。当我加载 iPad 的 Master-Detail Application 模板时，当您按下 Bar Button 时，MasterView 列表会从左侧滑入，如下所示：

![幻灯片视图](../Images/0382a1c98d09200652daa66d89436d24.png)

但是我已经看到了很多这样的弹出列表的图像：

![弹出视图](../Images/a8f9681b3b7660d6ab5edd208f9e09f3.png)

要使标准模板使用弹出视图需要进行哪些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:57:16.817

主视图**曾经**是一个弹出窗口。它已更改（我相信在 iOS 5.1 中）从左侧滑入。这就是它现在的工作方式。要获得弹出窗口，您必须“自己动手”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T09:59:44.127

从苹果文档：

```
UISplitViewControllerDisplayModePrimaryOverlay
The primary view controller is layered on top of the secondary view controller, leaving the secondary view controller partially visible.

Available in iOS 8.0 and later. 
```

要获得弹出窗口，您必须在 to 上设置`preferredDisplayMode`属性。`UISplitViewController``UISplitViewControllerDisplayModePrimaryOverlay`

# asp.net-mvc - 在 ASP.NET MVC 中模拟 Controller.Url.Action(string, string, object, string)

> ID：15258669
> 
> 赞同：10
> 
> 时间：2013-03-06T21:43:16.667
> 
> 标签：asp.net-mvc, unit-testing, moq, urlhelper

我使用[NUnit](http://www.nunit.org/)和[Moq](http://code.google.com/p/moq/)库进行单元测试。我需要模拟重载[的 Url.Action(string, string, object, string)](http://msdn.microsoft.com/en-us/library/dd505232%28v=vs.108%29.aspx)，因为我的控制器的操作使用它来[获取 Action 的绝对网址](https://stackoverflow.com/a/3066943/815960)。

我现在的尝试（看看**MockUrlAction**测试）：

```
[TestFixture]
public class ControllerTests   
{
    [Test]
    public void MockUrlAction()
    {
        var controller = new TestController();

        controller.Url = new UrlHelper(new RequestContext(MvcMoqHelpers.FakeHttpContext(), new RouteData()), GetRouteCollection());

        // it works
        Assert.AreEqual("/PathToAction", controller.Url.Action("TestAction")); 

        // but it doesn't work
        Assert.AreEqual("http://example.com/PathToAction", controller.Url.Action("TestAction", null, null, "http")); 
    }

    private RouteCollection GetRouteCollection()
    {
        BundleTable.MapPathMethod = MapBundleItemPath;
        var routes = new RouteCollection();
        RouteConfig.RegisterRoutes(routes);

        var adminArea = new AdminAreaRegistration();
        var adminAreaRegistrationContext = new AreaRegistrationContext(adminArea.AreaName, routes);
        adminArea.RegisterArea(adminAreaRegistrationContext);

        return routes;
    }
}

public static class MvcMoqHelpers
{
    public static HttpContextBase FakeHttpContext()
    {
        var context = new Mock<HttpContextBase>();
        var request = new Mock<HttpRequestBase>();
        var response = new Mock<HttpResponseBase>();
        var session = new Mock<HttpSessionStateBase>();
        var server = new Mock<HttpServerUtilityBase>();

        request.Setup(r => r.AppRelativeCurrentExecutionFilePath).Returns("/");
        request.Setup(r => r.ApplicationPath).Returns("/");
        response.Setup(s => s.ApplyAppPathModifier(It.IsAny<string>())).Returns<string>(s => s);

        context.Setup(ctx => ctx.Request).Returns(request.Object);
        context.Setup(ctx => ctx.Response).Returns(response.Object);
        context.Setup(ctx => ctx.Session).Returns(session.Object);
        context.Setup(ctx => ctx.Server).Returns(server.Object);

        return context.Object;
    }
} 
```

并且在线

```
Assert.AreEqual("http://example.com/PathToAction", controller.Url.Action("TestAction", null, null, "http")); 
```

我得到一个例外

```
System.NullReferenceException : Object reference not set to an instance of an object.
at System.Web.Mvc.UrlHelper.GenerateUrl(String routeName, String actionName, String controllerName, String protocol, String hostName, String fragment, RouteValueDictionary routeValues, RouteCollection routeCollection, RequestContext requestContext, Boolean includeImplicitMvcValues)
at System.Web.Mvc.UrlHelper.Action(String actionName, String controllerName, Object routeValues, String protocol) 
```

对我来说很奇怪，它`controller.Url.Action("TestAction")`工作正常，但`controller.Url.Action("TestAction", null, null, "http")`没有。

PS MvcMoqHelpers.FakeHttpContext() 来自[这里](http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx)，也许它有助于回答这个问题。

所以问题是：我怎样才能得到 Url.Action(string, string, object, string) 的嘲笑？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T22:03:31.800

您必须设置 Request.Url，并且您在教程中提供了这段代码：

```
public static HttpContextBase FakeHttpContext(string url)
{
    HttpContextBase context = FakeHttpContext();
    context.Request.SetupRequestUrl(url);
    return context;
} 
```

原因是 - 在您的 Url.Action 重载中，您没有提供主机名和协议，因此 MVC 尝试从 Request.Url 中提取这些值

```
if (!String.IsNullOrEmpty(protocol) || !String.IsNullOrEmpty(hostName))
{
    Uri requestUrl = requestContext.HttpContext.Request.Url;
    protocol = (!String.IsNullOrEmpty(protocol)) ? protocol : Uri.UriSchemeHttp;
    hostName = (!String.IsNullOrEmpty(hostName)) ? hostName : requestUrl.Host; 
```

# html - 用html制作星星

> ID：15258675
> 
> 赞同：4
> 
> 时间：2013-03-06T21:43:43.683
> 
> 标签：html, css

我正在创建一个脚本，并希望使精选列表出现在列表旁边带有一个星号，就像这里，cardealerscript.com/demo/

虽然它适用于某些浏览器，但它不适用于移动浏览器。

我想把它保存在 html 中，我不想使用图像。

任何人都可以建议另一种方法来保持 html 中的星星吗？我现在正在使用这个★。

谢谢安东

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T21:45:26.830

★ `&#9733;`

[来自http://www.quackit.com/html/html_special_characters.cfm](http://www.quackit.com/html/html_special_characters.cfm)的黑星

或者，您可以对任何您想要的开始进行[base64编码并在css中使用它。](http://webcodertools.com/imagetobase64converter)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T21:46:00.313

我喜欢这些东西的字体真棒：

[http://fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T21:47:38.900

您可以在完全不需要字符实体的情况下在纯 CSS 中实现它。查看带有[6](http://css-tricks.com/examples/ShapesOfCSS/#star-six)和[5 尖](http://css-tricks.com/examples/ShapesOfCSS/#star-five)星（及以上）的[ShapesOfCSS 。](http://css-tricks.com/examples/ShapesOfCSS/)但是，仍然需要检查浏览器兼容性。

对于一个不太出众但得到很好支持的明星，您可以使用菱形，它是一个 html 实体`&diams;`♦ （或`&#9830;`）。([列表](http://www.htmlentities.com/html/entities/))

我将尝试回答浏览器兼容性问题。5-point start 使用了一些广泛支持的属性：[margin](http://www.quirksmode.org/css/quirksmode.html#t12)、[position](http://quirksmode.org/css/css2/position.html)、[display](http://quirksmode.org/css/css2/display.html)、color、width、height、[border](http://www.quirksmode.org/css/box.html)和 top/left/right 都是 css 2.0 属性并且没有太大变化（如果有的话？） css 3\. css 2.1 在*1998 年*达到了“推荐”状态，因此这些属性都应该在为仍在运行的任何手机发布的移动浏览器中得到统一支持。最初的 iPhone 于 2007 年发布，带有[Safari 3](http://en.wikipedia.org/wiki/Safari_version_history)的移动版本。[Android](http://en.wikipedia.org/wiki/Android_version_history)上的浏览​​器支持要粗略得多，因为制造商和最终用户对于使用哪种浏览器有许多不同的选择。

只剩下以下属性：

```
-moz-transform:    rotate(35deg);
-webkit-transform: rotate(35deg);
-ms-transform:     rotate(35deg);
-o-transform:      rotate(35deg); 
```

`-moz-transform`指 Mozilla，即[Gecko 布局引擎](http://en.wikipedia.org/wiki/Gecko_%28layout_engine%29)。支持[`-moz-transform`](https://developer.mozilla.org/en-US/docs/CSS/transform#Browser_compatibility)从 13.5 开始，带有`-moz`前缀，从 16.0 开始支持标准 CSS3 属性`transform`。

现在，Safari 使用 webkit 渲染引擎，它与 Chrome 和[许多其他浏览器](http://en.wikipedia.org/wiki/WebKit#Installed_base)共享。支持[`-webkit-transform`](http://www.quackit.com/css/properties/webkit/css_-webkit-transform.cfm)：

> **可用性** -webkit-transform 属性可用于：
> 
> 对于 2D 变换：
> 
> *   Safari 3.1 及更高版本
> *   iOS 2.0 及更高版本
> *   谷歌浏览器 1.0 及更高版本

`-ms-transform`在 IE9.0 及更高版本中受支持。它在 IE10 中被弃用，它支持 CSS3 标准`transform`属性。（[来源](http://msdn.microsoft.com/en-us/library/ie/jj127312%28v=vs.85%29.aspx)。）我不知道这如何转化为 Windows 移动支持。但请放心，Windows 仍然在移动领域占据个位数的市场份额。

`-o-transform`指的是Opera，实际上已经过渡到webkit渲染引擎。但是该属性是在['Presto 2.4'](http://www.opera.com/docs/specs/presto24/css/transforms/)中添加的，该版本与[Opera 10](http://en.wikipedia.org/wiki/Presto_%28layout_engine%29)一起发布，适用于桌面版和移动版，似乎已于 2009 年[12 月 10 日发布](http://en.wikipedia.org/wiki/Opera_Mobile#History)。

哦，如果你决定使用 css 星号，你应该将 CSS3`transform`属性添加到任何需要它的规则中。即添加

```
transform:      rotate(35deg); 
```

按照`star-five`规矩，

```
transform:      rotate(-35deg); 
```

遵守`star-five:before`规则，并且

```
transform:      rotate(-70deg); 
```

对`star-five:after`规则。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-06T22:06:13.127

[对 BLACK STAR 的字体支持](http://www.fileformat.info/info/unicode/char/2605/fontsupport.htm)是有限的，所以这种情况更多地取决于系统中安装的字体，而不是浏览器。为了克服这个限制，您可以使用合适的字体（至少对于星号）作为可下载字体，通过`@font-face`. 有几种包含 BLACK STAR 的免费字体，例如 DejaVu 字体、Linux Libertine 和 Symbola。有关使用特殊字符的一般说明，请参阅我[在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

当然，还有其他方法。最简单，也可能是最好的替代解决方案是仅使用具有足够`alt`属性的图像或一小组图像（包含不同数量的星星）。

# c# - 每个 ComputeSignature 调用的证书签名的强制 PIN 输入

> ID：15258676
> 
> 赞同：0
> 
> 时间：2013-03-06T21:43:44.723
> 
> 标签：c#, .net, x509certificate

我正在使用最初位于 USB 令牌设备中的证书对数据进行签名。该代码有效，但存在一个问题：第一次签名后，不再提示用户输入 PIN。只有当用户拔出 USB 设备并重新插入时，才需要再次输入 PIN。

```
SignedXml signedXml  = new SignedXml();
//...
signedXml.ComputeSignature(); //Here is when the user is asked to enter the PIN 
```

我需要确保每次`ComputeSignature()`调用时，都会要求用户输入他的 PIN。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:11:35.473

这由模块的设备驱动软件控制。大多数此类软件都有关于是否可以缓存 PIN 的设置。没有统一的界面来控制此设置。

不过有趣的是，大多数开发人员都有一个完全相反的问题，即每次都被提示。

# vb.net - 如何从 Silverlight 5 中的 WCF 服务获取服务器端分页的记录总数？

> ID：15258679
> 
> 赞同：0
> 
> 时间：2013-03-06T21:44:03.197
> 
> 标签：vb.net, wcf, silverlight-5.0

我正在尝试通过我的 WCF 服务进行服务器端分页。我的代码仅获取 50 条记录并显示它们，但总数为 57 条记录，我无法分页到第二页查看它们。这是我的服务代码：

```
<OperationContract()>
    Public Function QueryUsersForGroup(
        ByVal authentication As AuthenticationArgs,
        ByVal group As Guid,
        ByVal skip As Integer,
        ByVal take As Integer) As ResponseArgs(Of User())

        Dim exception As ExceptionArgs = Nothing

        If AuthenticationService.CheckPermissions(
            authentication,
            exception,
            PermissionType.AdministerUserAccounts) Then

            Dim model As CscModel = DataHelper.CreateModel()
            Dim currentGroup = model.Groups.FirstOrDefault(Function(row) row.Id.Equals(group))
            If currentGroup Is Nothing Then Return New ResponseArgs(Of User())(New User() {})

            ' This only returns 50 records since take is 50 from my callback
            Return New ResponseArgs(Of User())(currentGroup.Users.Ship(skip).Take(take).ToArray())

        Else

            Return New ResponseArgs(Of User())(exception)

        End If

    End Function 
```

我怎样才能通过记录的总数以及一次仅显示的 50 条记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:33:31.733

我想出了如何传递我的记录总数。我刚刚添加了第二个参数到我的

```
ResponseArgs(of User())(curretGroup.Users.Skip(skip).Take(take).ToArray(), totalCount) 
```

它奏效了！当然，我必须修改我的 ResponseArgs 类以允许 2 个参数。

# c++ - 使用 c++ Lambda 表达式

> ID：15258681
> 
> 赞同：0
> 
> 时间：2013-03-06T21:44:03.963
> 
> 标签：c++, list, c++11, lambda

我不太了解 Lambda 表达式。我创建了一个包含结构“brute”的列表；

```
typedef struct brute{
int entry;
string secWord;
string secHex;
}decrypt;

typedef list<brute*>Unsolved; 
```

然后我尝试使用 for_each 遍历列表。

```
char combo[] = {'a','a','b','c');
std::for_each(unsolved.begin(), unsolved.end(),[&combo](int i )
{

}); 
```

[&combo} 是我想要捕捉的。我有 3 个问题：“int i”是列表的迭代器吗？如何访问未解决列表中的成员？最后，我是否需要定义我的返回值应该是 char[]？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:48:25.990

[`std::for_each`](http://en.cppreference.com/w/cpp/algorithm/for_each)将期望一个一元谓词采用`brute*`or `brute*&`，形式为

```
T foo(brute*); 
```

会做。它忽略返回值。因此，您`for_each`使用 lambda 的调用可能具有以下形式：

```
std::array<char, 4> combo{'a','a','b','c'};
std::for_each(unsolved.begin(), unsolved.end(),[&combo](brute*& b) { .... } ); 
```

我使用了 an ，`std::array`因为它具有比普通数组更简单的复制/赋值语义。

所以，回答问题，

> “int i”是列表的迭代器吗？

不

> 如何访问未解决列表中的成员？

如示例所示

> 最后，我是否需要定义我的返回值应该是 char[]？

返回值被忽略。如果你需要它，那么你需要另一种算法。

# itext - Graphics2D 不在 iText 中呈现

> ID：15258685
> 
> 赞同：1
> 
> 时间：2013-03-06T21:44:29.330
> 
> 标签：itext, graphics2d

我有一个应用程序需要用图形标记现有的 PDF 文档。我正在尝试使用 iText，并且在大多数情况下，它可以工作。但是，我遇到的 PDF 文档没有基于 [0, 0] 的页面矩形或裁剪矩形。这是我的代码的精简版。

```
for (int i = 0; i < n; i++) {
    PdfImportedPage page = writer.getImportedPage(reader, i + 1);
    PdfCopy.PageStamp stamper = writer.createPageStamp(page);
    PdfContentByte cb = stamper.getOverContent();
    Rectangle cropRect = reader.getCropBox(i + 1);
    Rectangle pageRect = reader.getPageSize(i + 1);

    // construct the transform to place the crop rect of the original PDF into the new PDF
    // This transform is what places the original image content accurately on the page
    // construct a graphics2D object with the proper size (width, height of PDF in question)
    Graphics2D g = cb.createGraphics(2449, 1576);
    cb.saveState();

    // Crop Rectangle coordinates of PDF in question: [0, 24824]
    g.setTransform(AffineTransform.getTranslateInstance(cropRect.getLeft(), cropRect.getBottom()));

    cb.restoreState();
    g.setFont(new Font("Dialog", Font.BOLD, 48));
    g.setColor(Color.blue);
    g.drawString("Hello World", 1200, 800);
    g.dispose();

    stamper.alterContents();
    writer.addPage(page);
} 
```

在评论中，我指定了裁剪矩形的大小和位置（也与页面矩形相同）。此外，应用程序没有绘制“Hello World”，而是将 Graphics2D 对象传递给 Swing 面板的绘制方法。

提前致谢。

# algorithm - 找出一组字符串中最长的重复子串

> ID：15258687
> 
> 赞同：2
> 
> 时间：2013-03-06T21:44:39.087
> 
> 标签：algorithm, substring

我试图找到一种方法来找到一组字符串中最大的重复子字符串。[最长重复子串问题](http://en.wikipedia.org/wiki/Longest_repeated_substring_problem)通常适用于单个字符串，而不是一组字符串。什么类型的算法可用于在一组字符串中查找最大的重复子字符串？

在一组文件中查找最大的重复字符串（以删除大型软件库中的重复代码）是我想到的主要用例，但该算法也会有许多其他用例。

例如，我想在这组字符串中找到最长的重复子字符串：

```
"Hello world, this is the first string."
"Hello to the world, this is the second string."
"Hello world.  This is the third string."
"This is the third string." 
```

在这种情况下，`"This is the third string."`将是最长的重复字符串（即出现在多个这些字符串中的最长字符串）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T02:11:40.567

1.  Create a [Trie data structure](http://en.wikipedia.org/wiki/Trie) (a.k.a. a prefix tree) for each string
    *   Let's call it `T(i)` for string `i`
2.  Create an empty hash map with key `string` and value `int`
    *   Let's call it `M`
3.  For each Trie `T(i)`, for each node `P` (where `P` is a prefix string) in `T(i)`,
    *   if key `P` is already in `M`, then increment `M[P]`
    *   else, insert `M[P] = 1`
4.  Find the `(P*,C*)` pair in `M` such that:
    *   `C* >= 2` (*)
    *   `length(P*)` is maximum among all such pairs
5.  `P*` is the string that you want

(*) If you wanted to get the longest substring common to `K` of the strings, you would replace the `2` with `K`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:38:16.873

也许[这](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)就是您正在寻找的，但您需要将算法应用于两个以上的字符串。如果您考虑一下，这并不难。另外，看看[这个页面](http://en.wikipedia.org/wiki/Longest_common_substring_problem)。使用回溯不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T00:52:05.200

您的问题的答案从幻灯片 60 [点击这里开始](https://d396qusza40orc.cloudfront.net/algs4partII/slides/51StringSorts.pdf)

基本上，我们列出了字符串输入的所有可能后缀（线性时间）。对它们进行排序（NLogN），并通过排序列表找到最长的一个（线性时间）

# javascript - IP 地址正则表达式简化

> ID：15258689
> 
> 赞同：0
> 
> 时间：2013-03-06T21:44:51.423
> 
> 标签：javascript, regex, ip

我的目标是检测字符串是否采用 IP 格式（4 个数字由句点分隔），以下语句有效，但我觉得必须有一种方法可以缩短。如果有，请告诉我。如果没有，那也没关系，我只是想知道是否有。

```
/^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+/ 
```

请注意，这一切都在 JavaScript 中。哦，我正在寻找的唯一建议是缩短它。我不需要比它更严格的了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:53:11.113

如果您不关心数字模式的长度以及结构，那么它应该可以工作并且更简洁：

```
^([0-9]+\.){3}[0-9]+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:02:10.547

是的你可以。尝试使用以下代码

^([0-9]+.){3}[0-9]+

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T22:28:18.250

好吧，如果缺少肯特所说的案例

> `9898.2.2.34343434`或者`555.555.555.555`

没关系，您的数据表现良好`^(\d+\.){3}\d+`会稍微短一点。试图节省字节？

# javascript - 将 json 存储为变量以在另一个函数中重用

> ID：15258693
> 
> 赞同：1
> 
> 时间：2013-03-06T21:44:58.680
> 
> 标签：javascript, jquery, json, variables

我正在学习 jQuery，我想了解如何重用 ajax json 数据而无需发出第二次请求。

例如

类别选择框：

```
<select id="Categories">
    <option value="Vegetables">Vegetables</option>
    <option value="Fruits">Fruits</option>
</select> 
```

当使用 更改类别时`jQuery("#Categories").change(function(){...`，ajax 调用获取请求会提取以下 ajax 数据。

```
[{"Id":"1","Item":"Apples","PricePerKilo":"10.00"},
 {"Id":"3","Item":"Oranges","PricePerKilo":"12.00"}] 
```

然后产品选择框更新如下：

```
<select id="Products">
     <option value="1">Apples</option>
     <option value="3">Oranges</option>
</select> 
```

现在我想做的是有一个输入框来输入所需的重量。这样，当输入#weight 的值发生变化时，总标签也会随着价格而更新。

```
jQuery('#weight').bind('input', function() { 
   jQuery("#total").text( "£ " + (jQuery('#weight').val() * SOMETHING ).toFixed(2) ); 
)}; 
```

注意一些东西......这应该是......

```
data.PricePerKilo WHERE data.Id = jQuery("#products").val(); 
```

关于如何使 json 数据可重用的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:52:49.903

您可以将任意数据与 DOM 元素相关联[**`.data()`**](http://api.jquery.com/data/)。获取 JSON 后，使用以下内容存储它：

```
jQuery("#products").data('productData', myData); 
```

然后用这个检索它：

```
var myData = jQuery("#products").data('productData'); 
```

# windows-7 - 使用管道获取“文件名、目录名或卷标语法不正确”时。

> ID：15258695
> 
> 赞同：2
> 
> 时间：2013-03-06T21:45:03.603
> 
> 标签：windows-7, dos

当我在我的机器上运行以下命令（或任何带有管道 | 的命令）时：

> 目录 | findstr "目录"

我收到以下消息：

> 文件名、目录名或卷标语法不正确。

自己运行 dir 命令或 findstr 命令就可以了。

卷标是：

> 卷
> C 中的卷是 OSDisk
> 卷序列号是 685C-A5B5

版本是：

> 版本
> Microsoft Windows [版本 6.1.7601]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:34:41.403

检查您的 COMSPEC 变量。它应该包含 CMD.EXE 的完整绝对路径（包括文件名）。管道的每一侧都通过一个新的 CMD.EXE 线程执行，该线程通过 COMSPEC 值启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:40:41.377

正如@dbenham 之前提到的，您需要确保您的 COMSPEC 变量定义了正确的值。

它应该具有以下值：

`%SystemRoot%\system32\cmd.exe`

您可以通过右键单击我的电脑-->属性-->高级系统属性-->环境变量来检查它

如果您在那里找不到 COMSPEC，请通过提供上述值创建一个新变量，即`%SystemRoot%\system32\cmd.exe`

祝你好运

# java - 2d ArrayLists - 为什么将对象添加到一个子列表会将相同的对象添加到所有子列表？

> ID：15258697
> 
> 赞同：1
> 
> 时间：2013-03-06T21:45:11.313
> 
> 标签：java, collections, arraylist

在 Java 中，我正在为一个包含 4 支球队的联赛创建一个足球赛程生成器。

我有一个名为“matchDays”的二维数组列表，其中包含 6 个比赛日数组列表。每个比赛日包含 2 个夹具对象。

我正在尝试遍历 matchDays，并且对于每个比赛日，从我单独创建的所有可能的灯具列表中添加 2 个灯具对象。问题是当我添加一个夹具来匹配第 1 天时，它也会添加到第 2 天到第 6 天。

以下代码来自我编写的一个测试用例，它突出了我遇到的问题：

```
@Test
public void arrayListTest() {
    FixtureGenerator fixGen = new FixtureGenerator();

    // Generate all possible fixtures
    List<Fixture> fixtures = fixGen.generateFixtures();

    // Create list of all 4 participating teams
    List<Club> clubs = fixGen.createListOfClubs();

    // Create 6 lists (match days) to store 2 fixtures in each
    List<List<Fixture>> matchDays = fixGen.createMatchDaysList(clubs); 

    matchDays.get(0).add(fixtures.get(0));
    System.out.println("Match day 1, fixture 1: " + matchDays.get(0).get(0).getHomeTeam() + 
            " v " + matchDays.get(0).get(0).getAwayTeam());
    System.out.println("Match day 2, fixture 1: " + matchDays.get(1).get(0).getHomeTeam() + 
            " v " + matchDays.get(1).get(0).getAwayTeam());
    System.out.println("Match day 3, fixture 1: " + matchDays.get(2).get(0).getHomeTeam() + 
            " v " + matchDays.get(2).get(0).getAwayTeam());
} 
```

此代码产生以下控制台输出：

```
Match day 1, fixture 1: Team A v Team B
Match day 2, fixture 1: Team A v Team B
Match day 3, fixture 1: Team A v Team B 
```

如果我只在第 1 天比赛中添加了夹具“A 队对 B 队”，那么它在比赛第 2 天和第 3 天的表现如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:34:31.923

来自[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#subList%28int,%20int%29)：“返回的列表由该列表支持，因此返回列表中的非结构性更改会反映在该列表中，反之亦然。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:58:35.410

找到问题代码。我正在使用@LuiggiMendoza 和@DaveNewton 所述的相同参考填充matchDays 列表，如下所示：

```
List<List<Fixture>> matchdays = new ArrayList<List<Fixture>>();
List<Fixture> matchday = new ArrayList<Fixture>();
for (int i = 0; i < noOfMatchDays; i++) {
    matchdays.add(matchday);
} 
```

我所要做的就是将其更改为以下内容，因此每个比赛日都由它自己的列表对象表示：

```
List<List<Fixture>> matchdays = new ArrayList<List<Fixture>>();

for(int i = 0; i < noOfMatchDays; i++){
    matchdays.add(new ArrayList<Fixture>());
} 
```

谢谢大家的回答:)

# php - 在 Woocommerce 类别上运行柜台

> ID：15258702
> 
> 赞同：0
> 
> 时间：2013-03-06T21:45:30.547
> 
> 标签：php, wordpress, counter, woocommerce

我在我的主题中开发了一个自定义模板，我想在其中调用某些 Woocommerce 类别以显示在页面的不同部分。我知道我可以使用这个简码：

```
<?php echo do_shortcode('[product_categories columns="6" number="6"]'); ?> 
```

显示类别，但是我遇到的问题是我需要在模板中多次调用该短代码，每次调用它都会显示相同的 6 个类别。我想更自由地控制“数字”，所以我猜某种计数器会起作用，然后将它分配给一个变量？对此仍然有点新，但这似乎是基于我知道如何做的最合乎逻辑的方法，除非有人可以为我推荐不同的东西。

最终结果是页面顶部将有类别 1-6，页面中间可能有 6-9，页面底部将有 9-15 或其他。我什至不知道短代码是否是最好的方法，但我已经坚持了几个小时：/

我是否需要运行类似于：

```
<?php $categories = get_terms( 
                      'product_cat', 
                      array(
                          'hide_empty' => 0,
                          'number'     => 6,   // This gives you 6 terms
                          'offset'     => 6    // This offsets the query, 0 means 1-6, 6 means 7-12...etc
                      )
                  );

                foreach ($categories as $cat) {

                    //print_r($cat);

                    $category_id = $cat->term_id;
                        $thumbnail_id   = get_woocommerce_term_meta( $cat->term_id, 'thumbnail_id', true );
                        $image = wp_get_attachment_url( $thumbnail_id );
                        echo '<div class="two columns end"><a href="'. get_term_link($cat->slug, 'product_cat') .'"><img height="150" width="150" src="'.$image.'" alt="'. $cat->name .'"/>'. $cat->name .'</a></div>';
                    }
                 ?> 
```

我想我只需要一点帮助就可以了，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:09:40.310

看看[http://codex.wordpress.org/Function_Reference/get_terms](http://codex.wordpress.org/Function_Reference/get_terms)

你可以这样做：

```
$categories = get_terms( 
    'product_cat', 
    array(
        'hide_empty' => 0,
        'number'     => 6,   // This gives you 6 terms
        'offset'     => 0    // This offsets the query, 0 means 1-6, 6 means 7-12...etc
    )
); 
```

您仍然需要设置输出样式。

执行 a`print_r($categories);`查看输出的格式。

# python - Python：尝试检查有效的电话号码

> ID：15258708
> 
> 赞同：5
> 
> 时间：2013-03-06T21:45:36.160
> 
> 标签：python

我正在尝试编写一个程序，该程序接受格式中的电话号码`XXX-XXX-XXXX`并将条目中的任何字母转换为相应的数字。

现在我有了这个，如果开始不正确，它将允许您重新输入正确的数字，但随后它会翻译输入的原始数字。我该如何解决？

```
def main():
    phone_number= input('Please enter a phone number in the format XXX-XXX-XXXX: ')
    validNumber(phone_number)
    translateNumber(phone_number)

def validNumber(phone_number):
for i,c in enumerate(phone_number):
    if i in [3,7]:
        if c != '-':
            phone_number=input('Please enter a valid phone number: ')
        return phone_number
    elif not c.isalnum():
        phone_number=input('Please enter a valid phone number: ')
        return phone_number
return phone_number

def translateNumber(phone_number):
    s=""
    for char in phone_number:
        if char is '1':
            x1='1'
            s= s + x1
        elif char is '-':
            x2='-'
            s= s + x2
        elif char in 'ABCabc':
            x3='2'
            s= s + x3
        elif char in 'DEFdef':
            x4='3'
            s= s + x4
        elif char in 'GHIghi':
            x5='4'
            s= s + x5
        elif char in 'JKLjkl':
            x6='5'
            s= s + x6
        elif char in 'MNOmno':
            x7='6'
            s= s + x7
        elif char in 'PQRSpqrs':
            x8='7'
            s= s + x8
        elif char in 'TUVtuv':
            x9='8'
            s= s + x9
        elif char in 'WXYZwxyz':
            x10='9'
            s= s + x10
    print(s) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T21:51:18.330

```
import re

def validNumber(phone_nuber):
    pattern = re.compile("^[\dA-Z]{3}-[\dA-Z]{3}-[\dA-Z]{4}$", re.IGNORECASE)
    return pattern.match(phone_nuber) is not None 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T21:55:28.570

如果您不想使用正则表达式：您可以使用`isalnum`来检查某事物是数字还是字母。您可以`n`使用 so 访问字符串中的第 th 个字符`mystr[n]`，您可以尝试：

```
def validNumber(phone_number):
    if len(phone_number) != 12:
        return False
    for i in range(12):
        if i in [3,7]:
            if phone_number[i] != '-':
                return False
        elif not phone_number[i].isalnum():
            return False
    return True 
```

要查看`phone_number[i]`正在执行的操作，请尝试以下操作：

```
for i in range(len(phone_number)):
    print i, phone_number[i] 
```

使用`enumerate`：

```
def validNumber(phone_number):
    for i,c in enumerate(phone_number):
        if i in [3,7]:
            if c != '-':
                return False
        elif not c.isalnum():
            return False
    return True 
```

* * *

一旦你让它工作，你应该稍后（在里面`main`）使用它，比如：

```
def main():
    phone_number = '' # an invalid number to initiate while loop
    while not validNumber(phone_number):
        phone_number = input('Please enter a phone number in the format XXX-XXX-XXXX: ')
    translated_number = translateNumber(phone_number) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T22:04:19.383

1.  您应该使用正则表达式来匹配文本。
2.  string 模块有一个`translate`函数可以替换你的大部分逻辑

下面的代码示例。请注意我如何将所有内容转换为小写以简化正则表达式和翻译。

```
import string
import re

RE_phone = re.compile("^[a-z0-9]{3}-[a-z0-9]{3}-[a-z0-9]{4}$")

map_in  = 'abcdefghijklmnprstuvwxyz'
map_out = '222333444555667778889999'
mapped = string.maketrans( map_in , map_out )

def main():
    while True:
        phone_number= raw_input('Please enter a phone number in the format XXX-XXX-XXXX: ')
        phone_number = phone_number.lower()
        if RE_phone.match(phone_number):
            break
        print "Error. Please try again"
    print translateNumber(phone_number)

def translateNumber(phone_number):
    return phone_number.translate( mapped )

main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-07T08:03:46.233

你可以去：-

```
def contact_validate(s):
    try: 
        int(s)
        return True
    except ValueError:
        return False

>>> print contact_validate("+12345")
True
>>> print contact_validate("75.0")
False
>>> print contact_validate("hello")
False 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-14T17:40:01.487

我认为这可能会有所帮助

```
def checkvalidNumber(phone_number):
        T={"-":0,"+":0,"_":0}
        for i in str(phone_number):
            if i in list(T.keys()):
                if (i=="_" or i=="-") and (T["-"]>=1 or T['_']>=1):
                    return False
                elif i=="+" and T[i]>=1:
                    return False
                else:
                    T[i]+=1
           elif not i.isdigit():
                return False
        return True 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-06T22:37:38.970

在我看来，这是一种相当pythonic的方式

```
def validNumber(phone_number):
    return all([x.isdigit() for x in phone_number.split("-")]) 
```

它在“-”处拆分输入，检查每个剩余项目是否为数字并返回单个 True 或 False 值。

`all() - returns True if bool(x) is True for all x in iterable`

# jquery - JQuery 滚动动画颜色

> ID：15258712
> 
> 赞同：1
> 
> 时间：2013-03-06T21:45:54.560
> 
> 标签：jquery, css

我的网站上有一个固定位置的标题，当它位于页面顶部时，它具有 alpha 透明度。当用户滚动到页面顶部时，它会变为纯色。但是，当用户滚动回页面顶部时，我希望颜色恢复为 alpha 透明度。不幸的是，从我读过的内容来看，JQuery 颜色动画不支持 RGBA 值。当用户向下滚动时，我的颜色会发生变化，但是当它回到页面顶部时，我无法让它变成一种颜色。

```
<script type="text/javascript">
    $(window).scroll(function() {
        $("#header").css("position", "fixed");
        if ($(window).scrollTop() > 0) {
            $("header").animate({backgroundColor:'#2b2b2b'}, 'slow');
        }
        if ($(window).scrollTop() <= 0) {
            $("header").animate({backgroundColor: '#000000'}, 'slow');
        }
    });
</script> 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:55:59.047

**将 CSS3`transition`与 jQuery 一起使用：**

您可以将 CSS3 过渡附加`header`到自定义类中，您可以在其中设置所需的颜色。
与使用 jQuery 相比，您只需添加/删除该类：

`**[LIVE DEMO](http://jsbin.com/esudec/4/edit)**`

```
$(window).scroll(function() {
    var addRemClass = $(window).scrollTop() > 0 ? 'addClass' : 'removeClass';
    $("header")[addRemClass]('bgChange');
}); 
```

CSS：

```
header{
  background:#000;
  padding:20px;
  color:#fff;
  width:100%;
  transition:0.8s;   /* Our nice transition (you can also use 'ms' values) */
}

header.bgChange{
  background:#2b2b2b;/* I used #f00 in the demo to make it more obvious :) */
} 
```

* * *

**使用 jQuery UI 的解决方案：** 要支持更多浏览器，请执行以下操作：

`**[LIVE DEMO](http://jsbin.com/esudec/5/edit)**`

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
<script>
    $(window).scroll(function() {
        $("header").stop().animate({
          backgroundColor: $(window).scrollTop() > 0 ? '#2b2b2b' : '#000'
        }, 800);
    });
</script> 
```

# php - php://输出和内存使用

> ID：15258713
> 
> 赞同：0
> 
> 时间：2013-03-06T21:45:56.757
> 
> 标签：php, performance, memory, memory-management, fopen

所以我这样做是为了打印出一个 csv 文件：

```
 while(ob_end_clean());
 $fp = fopen('php://output', 'w');
 fputcsv($fp, $header_fields);
  foreach($j as $fields){
    $row = array();
    foreach ($fields as $field){
      $row[] = $r->$field;
    }
    //stream each row
    fputcsv($fp, $row);
  }
  fclose($fp);
  exit; 
```

我的问题是，假设 csv 将包含超过 100,000 行，这会导致内存不足错误还是有效利用内存？

# php - 使用 PHP，从 CSV 文件加载内容并对其进行过滤以满足用户输入条件并输出到表中

> ID：15258716
> 
> 赞同：0
> 
> 时间：2013-03-06T21:46:00.687
> 
> 标签：php, csv, filter, superglobals

对，所以我有一个 CSV 文件，其中的数据是这样存储的；

```
name,author,isbn,price
name,author,isbn,price
name,author,isbn,price
name,author,isbn,price 
```

我想要做的是在 URL 中使用一个值，该值是用户输入的，仅显示相应作者的书籍。例如，获取带有用户输入值的 URL，例如；

```
/books.php?author=J.R.R. Tolkien 
```

将以表格形式打印以下内容；

```
The Hobbit, J.R.R. Tolkien, ISBN#, #Price
The Lord Of The Rings, J.R.R. Tolkien, ISBN#, #Price 
```

我不是编码专家，因此我将不胜感激。到目前为止，我所管理的是；

```
$author = $_GET['author'];
IF (strtolower ($author)==strtolower('J.R.R. TOLKIEN'))
{
echo '<table border=1>'; //start table
$handle = fopen("books.csv", "r");
while (($books = fgetcsv($handle, 1000, ',')) !== FALSE)

echo '<tr><td>',$books[0], //names
'</td><td>',$books[1], //authors
'</td><td>',$books[2], //ISBN
'</td><td>',$books[3], //price
'</td></tr>';
fclose($handle);
echo '</table>'; //end table
} 
```

此代码是有效的，但是当我回显它时，所有书籍都会被回显，而不仅仅是所选作者的某些书籍。

我还在 IF 语句中尝试了 $books[1]，它说 JRR Tolkien 但它似乎不起作用。

我束手无策。我不是这方面的专家，因此将不胜感激所有帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:53:03.300

您需要将`if`语句移动到循环内部，以便根据用户的输入检查每本书。

IE

```
$author = $_GET['author'];
echo '<table border=1>'; //start table
$handle = fopen("books.csv", "r");
while (($books = fgetcsv($handle, 1000, ',')) !== FALSE)
{
    if (strtolower ($author)==strtolower($books[1]))
    {
        echo '<tr><td>',$books[0], //names
        '</td><td>',$books[1], //authors
        '</td><td>',$books[2], //ISBN
        '</td><td>',$books[3], //price
        '</td></tr>';
    }
}
fclose($handle);
echo '</table>'; //end table 
```

您还需要为没有与搜索参数匹配的书籍的情况添加一些逻辑。

# c# - 根据 EncryptionMethod 节点算法属性选择正确的 Asymmetric/SymmetricAlgorithm

> ID：15258725
> 
> 赞同：0
> 
> 时间：2013-03-06T21:46:26.023
> 
> 标签：c#, .net, xml, encryption

是否有内置的 .NET API 可以解析加密 XML 中元素的`Algorithm`属性并识别正确的/以用于解密数据？`EncryptionMethod``AsymmetricAlgorithm``SymmetricAlgorithm`

这是我将解密的示例加密 XML 片段：

```
<xenc:EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element"
  xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
  <xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes128-cbc"/>
  <xenc:CipherData>
    <xenc:CipherValue>fWDq0kmaii...U9Tng==</xenc:CipherValue>
  </xenc:CipherData>
</xenc:EncryptedData> 
```

我一直在使用`System.Security.Cryptography.Xml.EncryptedData`.NET 类，但没有看到任何有助于解析`Algorithm`属性中找到的 URI 并选择适当的子属性或方法`SymmetricAlgorithm`（在本例中，`System.Security.Cryptography.RijndaelManaged`使用 a `CipherMode`of`CBC`和 a `BlockSize`of `128`）。

是否有任何这样的内置 .NET API 方法可以正确识别和配置所需的`AsymmmetricAlgorithm`/`SymmetricAlgorithm`解析加密的 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:23:22.570

在类上使用反射器，我发现对类上`System.Security.Cryptography.Xml.EncryptedXml`命名的方法的引用。这几乎是我一直在寻找的一切。给定 any 的 URI ，它将为您构造~~和配置~~（请参阅下面的我的评论）算法。但是，它不适用于任何指示用于密钥传输的 URI。`CreateFromName``System.Security.Cryptography.CryptoConfig``SymmetricAlgorithm`~~`AsymmetricAlgorithm`~~

 ~~我发现的一件事是，对于许多人的需求，`EncryptedXml`该类可能会为您完成文档的解密，因此通过解析 URI 构建您自己的算法对象的这一步骤将是不必要的。我相信我的特定用例可能是例外的，但至少我现在可以使用正在使用的相同帮助程序类`EncryptedXml`（至少在`SymmetricAlgorithm`用于块加密/解密的情况下）。~~

# scala - 如何在 Akka 演员中记录未捕获的异常？

> ID：15258727
> 
> 赞同：18
> 
> 时间：2013-03-06T21:46:36.933
> 
> 标签：scala, playframework-2.0, akka

我们一直很难在 Play 2.0.4 应用程序中检测和调查 Akka Actor 中的错误。

如何使用有用的堆栈跟踪记录 Akka Actor 中*所有未捕获的异常？*

到目前为止，我们能做的最好的事情是将以下内容添加到`application.conf`：

```
logger.akka=DEBUG

akka {
    loglevel = DEBUG
    stdout-loglevel = DEBUG
    loggers = ["akka.event.slf4j.Slf4jLogger"]
    actor {
        debug {
            receive = on
            autoreceive = on
            fsm = on
            lifecycle = on
            unhandled = on
            event-stream = on
            router-misconfiguration = on
        }
    }
} 
```

但是，鉴于以下演员：

```
class ThrowingActor{
  def receive = {
    case _ => {
      throw new Exception("--------------ASDFASDFASDFASDFASDFASDFASDF------------------")
    }
  }
} 
```

我们看到的所有记录是：

```
[DEBUG] [03/06/2013 16:15:44.311] [application-akka.actor.default-dispatcher-16] [Future] --------------ASDFASDFASDFASDFASDFASDFASDF------------------ 
```

当有未捕获的异常时，任何人都可以帮助我们获取所有参与者的信息堆栈跟踪吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T18:53:23.790

如果您无法在 Akka 中找到开箱即用的处理方式，那么您可以创建一个简单的特征来混合到您的演员中，如下所示：

```
import akka.actor._

trait UnhandledExceptionLogging{
  self: Actor with ActorLogging =>

  override def preRestart(reason:Throwable, message:Option[Any]){
    super.preRestart(reason, message)
    log.error(reason, "Unhandled exception for message: {}", message)
  }
}

class MyActor extends Actor with ActorLogging with UnhandledExceptionLogging{
  def receive = {
    case _ =>
      throw new Exception("blah blah")
  }
} 
```

当发生未捕获的异常并且actor即将重新启动时，将调用预重新启动。似乎是一个挂钩到您自己的更详细日志记录的好地方。作为奖励，收到的导致失败的消息可用于日志中的其他上下文。

您还可以稍微重构此代码以将特征设置为可堆叠，以防您有其他演员已经被覆盖`preRestart`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:41:36.060

当您使用 slf4j 记录器时，不再使用 Akka 的日志记录配置。根据您的日志记录框架和设置，您可能必须：

*   更改 logback.xml、logback.groovy 或 logback-test.xml
*   更改 log4j.xml 或 log4j.properties
*   在你的类路径上添加一个 logback 或 log4j jar

通常，当系统启动时，它会打印一些有关日志框架的详细信息（特别是如果它配置错误）。可能有很多原因，但您很可能查看了错误的配置文件。

# python - 请求——如何判断你是否收到 404

> ID：15258728
> 
> 赞同：196
> 
> 时间：2013-03-06T21:46:37.613
> 
> 标签：python, python-requests

我正在使用 Requests 库并使用以下代码访问网站以从中收集数据：

```
r = requests.get(url) 
```

我想在输入不正确的 URL 并返回 404 错误时添加错误测试。如果我故意输入一个无效的 URL，当我这样做时：

```
print r 
```

我明白了：

```
<Response [404]> 
```

编辑：

我想知道如何测试。对象类型仍然相同。当我执行`r.content`or`r.text`时，我只是获取自定义 404 页面的 HTML。

* * *

## 回答 #1

> 赞同：402
> 
> 时间：2013-03-06T21:48:50.033

看[`r.status_code`属性](https://requests.readthedocs.io/en/latest/user/quickstart/#response-status-codes)：

```
if r.status_code == 404:
    # A 404 was issued. 
```

演示：

```
>>> import requests
>>> r = requests.get('http://httpbin.org/status/404')
>>> r.status_code
404 
```

如果您想`requests`针对错误代码（4xx 或 5xx）引发异常，请调用`r.raise_for_status()`：

```
>>> r = requests.get('http://httpbin.org/status/404')
>>> r.raise_for_status()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "requests/models.py", line 664, in raise_for_status
    raise http_error
requests.exceptions.HTTPError: 404 Client Error: NOT FOUND
>>> r = requests.get('http://httpbin.org/status/200')
>>> r.raise_for_status()
>>> # no exception raised. 
```

您还可以在布尔上下文中测试响应对象；如果状态代码不是错误代码（4xx 或 5xx），则视为“真”：

```
if r:
    # successful response 
```

如果您想更明确，请使用`if r.ok:`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-12-14T07:55:10.743

如果您的请求是在另一个函数内部发出的，但您想在更高级别捕获错误，那么很高兴知道您也可以直接从异常中获取状态码。在我的情况下，我无法访问响应，因为在我的函数能够传递响应之前引发了 HTTPError。我最终做了以下事情：

```
try:
     r = function_calling_request(the_request)
except HTTPError as e:
     if e.response.status_code == 404:
          return do_stuff_if_not_found() 
```

# css - 在不消耗父 div 的情况下放置子 div

> ID：15258736
> 
> 赞同：0
> 
> 时间：2013-03-06T21:47:09.477
> 
> 标签：css, html, position

我想定义以下子 div 位置。

```
|-------------------|
|  parent div       |
|                   |
|                   |
|                   |
|    |-------|      |
|    |  child|      |
|    |  div  |      |
-----|       |------|
     |-------| 
```

我正在使用相对位置来定义子 div 的位置，但它扩展了

```
|-------------------| 
|  parent div       |
|                   |
|                   |
|                   |
|    |-------|      |
|    |  child|      |
|    |  div  |      |
|    |       |      |
|----|-------|------| 
```

我想知道如何在不扩大父 div 高度的情况下定位子 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:53:32.617

您可以使用子 div 的相对定位来完成它

HTML

```
<div class="parent">
<div class="child">
    </div>
</div> 
```

CSS：

```
.parent
{
    background-color:green;
    height:500px;
    width:500px;
}
.child
{
    position:relative;
    top:350px;
    left:200px;
    height:200px;
    width:100px;
    background-color:red;
} 
```

您可以根据需要设置颜色和宽度。看看[JsFiddle](http://jsfiddle.net/xDEBX/)

# css - :before 和 :after 内容与父元素可见性问题

> ID：15258739
> 
> 赞同：0
> 
> 时间：2013-03-06T21:47:42.913
> 
> 标签：css, pseudo-element, css-content

我有一个容器`div`，其中包含使用and`input type="checkbox"`添加的伪元素。`::before``::after`

```
function hiding() {
    var child = document.getElementById("child");
    child.style.visibility = "hidden";
}
var hide = document.getElementById("hide");
hide.addEventListener("click", hiding);

function showing() {
    var child = document.getElementById("child");
    child.style.visibility = "visible";
}
var show = document.getElementById("show");
show.addEventListener("click", showing);
```

```
div {
    padding: 10px;
    border: 2px solid black;
    background-color: green;
}
div div {
    position: relative;
    top: 50px;
    background-color: white;
}
#parent {
    height: 150px;
}
#child {
    visibility: visible;
}
input[type=checkbox].toggle_switch::after {
    content:'';
    margin: 0;
    padding: 0;
    width: 20px;
    height: 20px;
    position: absolute;
    top: 0;
    left: 0;
    background: -webkit-linear-gradient(top, #cdcdcd, #fbfbfb);
    border: 1px solid #919191;
    border-radius: 3px;
    box-shadow: inset 0 1px 0 #f0f0f0;
    -webkit-transition: 1s all linear;
}
input[type=checkbox].toggle_switch::before {
    content:'OFF';
    margin: 0;
    padding: 0;
    width: 38px;
    height: 20px;
    position: absolute;
    top: 0;
    left: 18px;
    text-align: center;
    border-width: 1px;
    border-style: solid;
    border-radius: 3px;
    font: 700 14px sans-serif;
    line-height: 22px;
    color: #7f7f7f;
    text-shadow: none;
    background: -webkit-linear-gradient(top, #cfcfcf, #efefef 50%, #f9f9f9 50%, #fefefe);
    box-shadow: inset 0 2px 2px #b6b6b6, inset 3px 0 3px #b6b6b6;
    border-color: #7d7d7d;
}
input[type=checkbox].toggle_switch {
    -webkit-appearance: none;
    padding: 0;
    width: 58px;
    height: 22px;
    position: relative;
    border-radius: 3px 0 0 3px;
    -webkit-transition: 1s all linear;
    vertical-align: text-top;
}
input[type=checkbox].toggle_switch:checked::after {
    left: 36px;
}
input[type=checkbox].toggle_switch:checked::before {
    content:'ON';
    left: 0px;
    color: #fff;
    text-shadow: 0 -1px 0 #1b3b6f;
    background: -webkit-linear-gradient(top, #3672dc, #4085ec 50%, #4d8fef 50%, #76adfc);
    box-shadow: inset 0 2px 2px #2a5bb3, inset -3px 0 3px #2a5bb3;
    border-color: #1654b5;
}
```

```
<input id="hide" type="button" value="Hide" />
<input id="show" type="button" value="Show" />
<div id="parent">
    <div id="child">
        <input type="checkbox" class="toggle_switch" />
        <input type="checkbox" class="toggle_switch" />
        <input type="checkbox" class="toggle_switch" checked/>
        <input type="checkbox" class="toggle_switch" />
    </div>
</div>
```

[JSFiddle 示例](http://jsfiddle.net/xiondark2008/Zagmh/)注意：目前仅针对 webkit 编写。

使用 JavaScript 将容器元素的 CSS 可见性属性从“可见”更改为“隐藏”。这似乎只发生在从“可见”到“隐藏”时，反之亦然。

伪元素在消失之前保持可见片刻。

切换可见性时是否可以防止伪元素挥之不去？

PS：如果你能告诉我如何让它在 IE 和 Firefox 中工作，你将赢得我永远的感激（我知道我在示例中只有 webkit 标签，但我需要做的就是修复它吗？）

# email - 文本/纯等宽的内容类型？

> ID：15258743
> 
> 赞同：5
> 
> 时间：2013-03-06T21:48:04.150
> 
> 标签：email, content-type, monospace

我想发送比简单的文本块（添加表格、对齐方式、*样式*等）更复杂的电子邮件，例如：

```
+------------------------------------------------------------------------------+
|                                                                              |
|                               This is an email                               |
|                                                                              |
|  Hello, world!                                                               |
|                                                                              |
|  Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy  |
|  nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut    |
|  wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit  |
|  lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum        |
|  iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel   |
|  illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto   |
|  odio dignissim qui blandit praesent luptatum zzril delenit augue duis       |
|  dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis         |
|  eleifend option congue nihil imperdiet doming id quod mazim placerat facer  |
|  possim assum. Typi non habent claritatem insitam; est usus legentis in iis  |
|  qui facit eorum claritatem. Investigationes demonstraverunt lectores        |
|  legere me lius quod ii legunt saepius. Claritas est etiam processus         |
|  dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare  |
|  quam littera gothica, quam nunc putamus parum claram, anteposuerit          |
|  litterarum formas humanitatis per seacula quarta decima et quinta decima.   |
|  Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in    |
|  futurum.                                                                    |
|                                                                              |
|                                                                  Thank you!  |
|                                                                              |
+------------------------------------------------------------------------------+ 
```

有没有办法将字体系列放入 text/plain content-type ？

# jquery - 如何将 jQuery ajaxPrefilter 方法应用于所有 require.js 视图？

> ID：15258744
> 
> 赞同：2
> 
> 时间：2013-03-06T21:48:04.303
> 
> 标签：jquery, backbone.js, requirejs, underscore.js

这是我第一次问问题，所以要温柔。我第一次使用requirejs（以及Backbone和Underscore），我正在使用jQuery ajaxPrefilter方法来设置ajax调用的基本url，就像这样......

```
$.ajaxPrefilter(function(options, originalOptions, jqXHR) {
options.url = '//mysite.com' + options.url;}); 
```

这样我就可以在我的模型/集合中使用简单的 url，比如“/notes”。现在看来我必须将 ajaxPrefilter 调用放在每个视图中。有什么地方我可以调用它一次并将其应用于所有视图吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T22:48:40.020

我做了和你一样的事情：

```
 $.ajaxPrefilter( function( options, originalOptions, jqXHR ) {
        options.url = App.config.getValue('api') + options.url;
    }); 
```

如果你使用 Backbone.Router，你可以像我一样把它放在初始化函数中。

```
 define([
        'jquery',
        'underscore',
        'backbone',
        'app',
    ],
    function($, _, Backbone, App) {

        return Backbone.Router.extend({

            routes: {
                        '' : 'index'
                    },
                    start: function() {
                       Backbone.history.start({pushState: true});
                    }
                    initialize: function() {
                        $.ajaxPrefilter( function( options, originalOptions, jqXHR ) {
                         options.url = App.config.getValue('api') + options.url;
                       });
                    }
            });
    }); 
```

App.config 是我添加的，因此我为每个环境都获得了正确的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:53:22.707

如果您有多个路由器，不确定这真的是一个好主意...

在这种情况下，我们将 jquery inits 放在我们的主应用程序中，就在启动第一个 Backbone 路由器之前......

```
myApp = {
    (....)

initialize : function(){

    // jQuery.ajax()cross-domain config
    $.ajaxSetup({xhrFields: {withCredentials: true}});

    // Start routers
    DefaultRouter.initialize();
(....)
} 
```

# kml - 将 Google 地球 kml 转换为 Google 地图 kml - 使用图像叠加层

> ID：15258747
> 
> 赞同：1
> 
> 时间：2013-03-06T21:48:17.397
> 
> 标签：kml, google-earth

我使用 Google 地球创建了一个 kml 文件，该文件使用外部图像创建了一个叠加层。它运行良好，我想找到一种相当方便的方式来转换 kml，以便 Google 地图可以读取它并以类似的方式显示它。

谷歌地图无法处理谷歌地球坐标，所以我尝试自己转换它们。例如我替换了地球坐标：

```
<gx:LatLonQuad>
<coordinates>
-80.34344837780532,33.1105864538138,0 
-80.31934785561177,33.09410014458361,0 
-80.30034967982111,33.11373571527255,0 
-80.32473786478347,33.13044135685429,0 
</coordinates>
</gx:LatLonQuad> 
```

具有等效的地图坐标：

```
<LatLonBox>
<north>33.13044135685429</north>
<south>33.11373571527255</south>
<east>-80.31934785561177</east>
<west>-80.34344837780532</west>
</LatLonBox> 
```

不幸的是，它们并不完全“等效”。地图叠加层略微偏离并且旋转不正确。

以下是两人的照片：

**地球示例**

![在此处输入图像描述](../Images/464938e326b20c53ca645425bae8b9cd.png)

**地图示例**

![在此处输入图像描述](../Images/0b069ef994c38beee23cee7b3cf71872.png)

我知道为什么它不起作用，但我对另一种解决方案感到茫然。任何人都知道在涉及图像叠加时将 Google Earth kml 转换为 Google Maps kml 的简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:41:16.750

根据[KML 参考](https://developers.google.com/kml/documentation/kmlreference#latlonbox)a`<LatLonBox>`也有一个旋转。不确定 Google 地图是否支持该功能，但它应该可以解决您遇到的问题。允许您指定一个旋转框（这`<gx:LatLonQuad>`就是您正在做的事情），这就是指定的内容：

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/GoogleEarthPolygon.kml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/GoogleEarthPolygon.kml)

根据[Google Maps 的 KML 参考](https://developers.google.com/kml/documentation/kmlelementsinmaps)，支持 LatLonBox，不支持旋转：

```
 KML Element    Supported in Google Maps? 
 <LatLonBox>    yes
 <rotation>     no 
```

因此，您需要使您的叠加层在北/南东/西边界（未旋转的 LatLonBox）上对齐以在 Google 地图上工作。

您计算的 LatLonBox（小蓝框）有问题，您需要绿框：

[http://www.geocodezip.com/v3_GoogleEx_layer-kml_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/GoogleEarthPolygonA.kml](http://www.geocodezip.com/v3_GoogleEx_layer-kml_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/GoogleEarthPolygonA.kml)

我认为解决这个问题的唯一方法是让你的原始图像旋转它并保存一个在北/东南东/西边界上对齐的图像，该图像适合更大的盒子。

要么以某种方式制作支持旋转的自定义叠加层。

# vb.net - 嵌套查找函数？需要匹配两件事

> ID：15258751
> 
> 赞同：1
> 
> 时间：2013-03-06T21:48:26.100
> 
> 标签：vb.net, report, lookup, builder

所以我在microsoft sql server report builder中工作，这基本上是我在代码中尝试做的事情：

*（在报告变量下）*

**vChargeStatusID = 查找（字段！CREDIT_CARD_TRANSACTION_ID.Value，参数！CREDIT_CARD_TRANSACTION_ID.Value，字段！CHARGE_STATUS_ID.Value，“DataSet1”）**

*（作为过滤器的表达式）*

**查找（变量！vChargeStatusID.Value，字段！CHARGE_STATUS_FK.Value，字段！CONTRACT_NUMBER.Value，“DataSet1”）**

我尝试使用变量和变量表达式来尝试创建另一个计算字段，但没有运气。我不断收到无法使用嵌套查找函数的错误。

**基本上我想做的是，首先，找到两个彼此相等的东西来检索一个数字。然后我需要获取该号码并将其与其他内容匹配以最终返回合同号。**

我无法弄清楚这一点。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-24T16:37:46.987

因此，实现此目的的一个非常简单的方法是在您的报表 ( `TextBox1.value`) 上放置一个字段，该字段将保存您的第一个查找值。

例如，您的第一次查找将返回`DataSet2`来自客户订单 ( ) 的供应商 ID ( `DataSet1`)。

```
TextBox1.expression = Lookup(Fields!CustOrderID.Value,Fields!CustOrder_ID2.Value,Fields!VendorID.Value,"DataSet2") 
```

但是现在您需要从供应商主表 ( `DataSet3`) 中找到供应商名称。您可以使用`ReportItems!TextBox1.value`作为查找的第一个值对供应商主表进行另一次查找。这样你就不会遇到范围问题。

```
TextBox2.expression = Lookup(ReportItems!Textbox1.value,Fields!VendorID.Value,Fields!VendorName.Value,"DataSet3") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:50:31.680

***所有的功劳归功于我的老板，他发现了这一点！***

*第一步*：创建**另一个***嵌入*的数据集。然后，此数据集有一个过滤器，该过滤器采用一个字段，在本例中为**CREDIT_CARD_TRANSACTION_ID**，并评估它对参数**pCreditCardTransactionID**是否为真。这确保了第二个数据集只会向我显示合同编号，这是我从查找函数中需要的最后一件事。

*第二步*：创建一个*内部*参数，默认值设置为来自第二个数据集 ( **ContractNumberLookup** )的字段**CONTRACT_NUMBER 。**

 ***第三步*：在表上创建一个过滤器。原始数据集中的**CONTRACT_NUMBER**设置为等于内部参数。

多田！我希望这有帮助。如果需要任何澄清，请告诉我！**

# joomla - Joomla！实施 sh404sef 后模块未显示

> ID：15258754
> 
> 赞同：0
> 
> 时间：2013-03-06T21:48:35.497
> 
> 标签：joomla, joomla-sef-urls, joomla-module

我在我的 Joomla! 网站上的“内容下方”位置放置了一个模块。它应该显示在内容下方（嗯......），如附图所示。问题是，只有当我将它设置为“在所有页面上显示”时才会这样做，并且我只希望它出现在选定的几页上。当我将其设置为仅在这些页面上显示时，它就会消失！

这是名为“Andre modeller”的旋转木马，[请参见此处的图片](http://i.stack.imgur.com/Ua2Fd.png)

现在，除了此页面（和其他 beachflag 页面）之外，我已禁用该模块：http: [//anansi.dk/strandflag-a](http://anansi.dk/strandflag-a)

它消失了。在我实施 sh404SEF 之前它就起作用了。任何人？

:-) 阿斯特丽德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:06:37.373

[对于任何偶然发现此问题的人，有关缺少模块的故障排除问题](http://anything-digital.com/sh404sef/docs/troubleshooting-issues-with-missing-modules.html "对缺少模块的问题进行故障排除")的 sh404sef 用户手册页可能会有所帮助。

简而言之，首先确保模块设置为在特定菜单上显示。然后：

1.  在 Joomla 的菜单列表中，找到显示页面的菜单项的 Itemid。它将列在标记为 ID 的最后一列中。您将在最后一步稍后需要此 ID。
2.  打开 sh404SEF URL 管理器并找到未显示模块的页面的 SEF url。您会注意到 SEF url 将至少有 1 个重复的 URL 用于该项目。单击此数字以打开重复项管理器。
3.  应该有一个原生 URL，例如 (index.php?option=com_k2&Itemid=345&id=214&lang=en&view=item)，其中包含您在上面第 1 步中找到的 Itemid。您需要通过单击 Make Main 按钮将其设为 Main url。

希望这可以帮助。

# java - 如何初始化自己类型的Java数组

> ID：15258758
> 
> 赞同：2
> 
> 时间：2013-03-06T21:48:44.830
> 
> 标签：java

我有这个

```
Integer[] picIDs = {             
  R.drawable.whatever
  ,
  R.drawable.example
};
String[] picDescs = {
  "test1"
  ,
  "test2"      
}; 
```

最初我想创建一个包含字段“id”和“desc”的数据类型数组，但似乎不可能在声明中初始化这样的数组？（我无法谷歌操作方法。）真的是这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T21:50:23.737

这个怎么样？

```
YourType[] arr = {new YourType(12,"abc"), new YourType(13, "xyz")}; 
```

但请确保您有一个 Yourtype 的构造函数，它接受 int (id) 和 String 作为参数。

```
public class YourType{
String s;
int id;
    public YourType(int id, String s){
    this.id = id; 
    this.s = s;
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T21:51:45.053

你可以这样做：

```
public class Item {
    public int id;
    public String desc;
    public Item(int id, String desc) {
        this.id = id;
        this.desc = desc;
    }
}

Item[] items = {
    new Item(1, "one"),
    new Item(2, "two")
    // etc.
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T21:53:59.447

你有没有尝试过这样的：

```
MyClass[] array={new MyClass(),new MyClass()}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T21:59:39.337

```
class DataType {  
    private Integer id;  
    private Stirng desc;  
    public DataType(Integer id, String desc) { this.id = id; this.desc = desc;}  
}  

DataType[] dt = {new DataType(id1, desc1), new DataType(id2, desc2) and so on}; 
```

因此，您可以定义一个类，例如 DataType，然后在 DataType 数组中初始化 DataType 的匿名实例。

# javascript - javascript:popWin 取消编码我的 URL

> ID：15258761
> 
> 赞同：0
> 
> 时间：2013-03-06T21:48:52.887
> 
> 标签：javascript

我正在尝试将社交分享按钮添加到我管理的网站。我必须使用新选项卡或 popWin 来执行此操作，因为大多数社交网站都阻止通过 iframe 加载（这会阻止使用模式弹出窗口）。

我选择了 popWin，因为它可以让用户留在我的页面上。问题是我对 javascript 还很陌生，对 popWin 并不太熟悉。popWin 似乎对我的 URL 进行了编码，这适用于大多数社交共享网站，但 tumbler 存在问题。

如果我删除 popWin，则 URL 会打开一个新选项卡并按应有的方式共享产品页面。

我可以强制 popWin 按“url=http%3A%2F%2F”而不是“url=http://”使用我的 URL

```
<a href="javascript:popWin('http://www.tumblr.com/share/link?url=<?php echo urlencode($productUrl); ?>', 'tumbler', 'width=640,height=480,left=0,top=0,location=no,status=yes,scrollbars=yes,resizable=yes');" title="Share Link Via Tumblr">Tumblr</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:55:15.527

`encodeURIComponent`在 JavaScript 中使用。

```
<a href="javascript:popWin(encodeURIComponent('http://www.tumblr.com/share/link?url=<?php echo urlencode($productUrl); ?>)', 'tumbler', 'width=640,height=480,left=0,top=0,location=no,status=yes,scrollbars=yes,resizable=yes');" title="Share Link Via Tumblr">Tumblr</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T10:07:28.927

在 popWin 和 tumblr 遇到同样的问题后发现了这个。我修改了马特的答案以显示我是如何做到的。

```
<a href="javascript:popWin('http://www.tumblr.com/share/link?' + encodeURIComponent('url=<?php echo urlencode($productUrl); ?>')', 'tumblr', 'width=640,height=480,left=0,top=0,location=no,status=yes,scrollbars=yes,resizable=yes');" 
title="Share Link Via Tumblr">Tumblr</a> 
```

# recursion - 主方法不适用的重复

> ID：15258768
> 
> 赞同：0
> 
> 时间：2013-03-06T21:49:41.577
> 
> 标签：recursion, complexity-theory

假设您有一个由以下定义的重复：`T(n) = T(n/2) +1`。没有大师的方法，如何评价？到目前为止我所拥有的：

T(n) = T(n/2) + 1 T(n/2) = T(n/4) + 1 T(n/4) = T(n/8) + 1 ... T(1) = 1

看起来这将是 O(logn)。这是在没有出现大师定理的情况下解决这些问题的唯一方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:40:54.143

你是怎么得到这个的`T(1) = 1`？
让我们来看看：

```
T(0) = T(0/2) + 1 => 0 = 1! 
```

所以`T(x)`函数在 处有一个渐近线`x=0`。
请注意，我们可以将其重新定义为：

```
T(2^(x+1)) = T(2^x) + 1 
=> 
f(x+1) = f(x) + 1 
=> 
f(x) = x + a
=>
T(n) = Log2(n) + a(n) 
```

其中`a(n)`是间隔长度为 1 的函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T20:31:57.213

是什么让您认为主方法不适用？我们有：

```
T(n) = a T(n/b) + f(n) 
```

和

```
a = 1, b = 2, f(n) = 1 
```

我们可以看到

```
c = log_b a = log_2 1 = 0
f(n) = 1 = Theta(1) = Theta(n^0 log^0 n) = Theta(n^c log^k n) 
```

所以我们可以使用结果

```
T(n) = Theta(n^c log^(k+1) n) = Theta(n^0 log^(0+1) n) = Theta(log n) 
```

这是你的结果。

# ios - Xcode - 在设备上运行之前删除应用程序

> ID：15258777
> 
> 赞同：16
> 
> 时间：2013-03-06T21:50:15.863
> 
> 标签：ios, iphone, xcode

Xcode（4.6）中有没有办法在安装之前删除设备上的应用程序？

我需要它来进行测试，如果在再次安装之前从设备中删除应用程序会更容易。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-10-07T12:52:50.253

是的你可以。

获取[https://github.com/libimobiledevice/ideviceinstaller](https://github.com/libimobiledevice/ideviceinstaller)

这使您能够`ideviceinstaller --uninstall <app-id>`在 bash 环境中使用。

然后在 xcode 的构建配置中做一个脚本，例如：[http ://www.runscriptbuildphase.com/](http://www.runscriptbuildphase.com/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T21:55:24.887

唯一的方法是手动删除它。如果这是您所要求的，则无法让 xcode 在每次运行之前从设备中删除该应用程序。抱歉，这将是一个很棒的功能，但目前还没有办法做到这一点。甚至在模拟器上也没有。

我认为您应该向苹果提交错误/功能请求！该功能对我来说会派上用场！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-19T10:05:13.227

XCode 不提供每次运行时自动从设备中删除应用程序的选项，但简单的方法是使用“设备”屏幕一键将其删除。

[链接到 Apple 文档](https://developer.apple.com/library/ios/recipes/xcode_help-devices_organizer/articles/remove_app_from_device.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-06T23:07:21.617

如何创建一个 Xcode 构建脚本以退出 Simulator，然后删除 Simulator Applications 目录的内容。目录是

```
~/Library/Application Support/iPhone Simulator/6.1/Applications/ 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-19T10:16:38.347

不，没有办法自动删除应用程序。

但是您可以编写一个简单的函数来清除上次运行的所有应用程序资源，如下所示：

```
-（无效）清理{
    NSString *appDomain = [[NSBundle mainBundle] bundleIdentifier];
    [[NSUserDefaults standardUserDefaults] removePersistentDomainForName:appDomain];

    [MagicalRecord saveWithBlockAndWait:^(NSManagedObjectContext *context) {
        [[NSManagedObjectModel MR_defaultManagedObjectModel].entities enumerateObjectsUsingBlock:^(NSEntityDescription *entityDescription, NSUInteger idx, BOOL *stop) {
            [NSClassFromString([entityDescription managedObjectClassName]) MR_truncateAllInContext:context];
        }];
    }];
}

```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-06T22:28:05.963

像 HackyStack 一样，我认为你必须手动删除应用程序。也就是说，您可以使用调试启动方法来清除安装期间未覆盖的内容。例如，删除文档目录的内容、与应用程序关联的钥匙串项目、iCloud KV 信息和文档等的方法。这会有点痛苦，但可能会让你去你想去的地方......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-13T10:08:08.430

*2021 年更新（macOS 11.2.3、 Xcode12.4*）：我必须`mobiledevice uninstall_app com.example.bundleid`将

 ** * *

工作解决方案 macOS 10.15.2、Xcode11.3、iOS13.3 (iPhone XS)、iOS12.4.4 (iPhone 5S)

*   安装：`brew install mobiledevice`（[https://github.com/imkira/mobiledevice](https://github.com/imkira/mobiledevice)）
*   重新启动 macOS
*   创建/克隆方案
*   在运行/预操作中添加这一行：`mobiledevice uninstall_app com.example.bundleid`*

# python - 检查 C 中的两个“简单”“if 语句”是否等价

> ID：15258779
> 
> 赞同：9
> 
> 时间：2013-03-06T21:50:22.280
> 
> 标签：python, c, parsing, equivalence

我有来自两个不同来源的“if 语句”，它们试图以不同的方式实现相同的条件。“if 语句”是 C。如果可能的话，我需要一个 python 脚本来决定成对条件是否相等。一个基本的例子：

来源1：`((op1 != v1) || ((op2 != v2) || (op3 != v3)))`

来源2：`((op2 != v2) || (op1 != v1) || (op3 != v3))`

当然，任何运算符都是允许的，函数调用，当然还有括号。

欢迎任何想法。

编辑 1：函数调用没有副作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T05:03:30.670

事情就是这样，问题可能（也可能不是）是 NP 完全的，但除非这是在重要事物的内部循环中（并且变量的数量很小），否则请*构建整个真值表*！这非常容易做到。它显然增长为 2^n，但对于小的 n，这是完全可行的。就像评论所暗示的那样，我假设函数调用没有副作用，只是输出`True`or `False`。

我已经发布了一个模型示例，可以解决您提出的问题，根据需要进行调整。我依靠 python 解析器来处理表达式的评估。

```
import pyparsing as pypar
import itertools

def python_equiv(s):
    return s.replace('||',' or ').replace('&&',' and ')

def substitute(s,truth_table, VARS):
    for v,t in zip(VARS,truth_table):
        s = s.replace(v,t)
    return s

def check_statements(A1,A2):  
    VARS = set()
    maths    = pypar.oneOf("( ! = | & )")
    keywords = pypar.oneOf("and or")
    variable = pypar.Word(pypar.alphanums)
    variable.setParseAction(lambda x: VARS.add(x[0]))
    grammar  = pypar.OneOrMore(maths | keywords | variable)

    # Determine the variable names
    grammar.parseString(A1)
    grammar.parseString(A2)

    A1 = python_equiv(A1)
    A2 = python_equiv(A2)

    bool_vals = map(str, [False,True])

    for table in itertools.product(bool_vals,repeat=len(VARS)):
        T1 = substitute(A1,table,VARS)
        T2 = substitute(A2,table,VARS)
        if eval(T1) != eval(T2):
            print "FAIL AT ", table,
            return False

    print "Statements equiv:",

    return True

# Original example
A1 = '''((op1 != v1) || ((op2 != v2) || (op3 != v3)))'''
A2 = '''((op2 != v2) ||  (op1 != v1) || (op3 != v3))'''
print check_statements(A1,A2)

# Example with a failure
A1 = '''((op1 != v1) || ((op2 != v2) || (op3 != v3)))'''
A2 = '''((op2 != v2) ||  (op1 != v1) && (op3 != v3))'''
print check_statements(A1,A2) 
```

给出作为输出：

```
Statements equiv: True
FAIL AT  ('False', 'False', 'False', 'False', 'False', 'True') False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T23:27:12.653

为此，您需要控制流分析以确定两个条件是否具有相同的控制依赖关系（否则它们不会在相同的数据上下文中执行），完整的数据流分析包括 C 代码的点对点分析， - 函数的效果分析，在函数调用中从条件的根到表达式的叶子进行反向切片的能力，然后是一个解释 C 语义的布尔等价匹配器（例如短路、溢出……）

这远远超出了您从 C 解析器中得到的。

# sql-server - SQL Server 2005 维护计划，带完整和事务日志

> ID：15258780
> 
> 赞同：0
> 
> 时间：2013-03-06T21:50:23.107
> 
> 标签：sql-server, sql-server-2005

我正在尝试创建维护计划以在 SQL 2005 中备份我的数据库。SQL 2005 没有为完整备份和事务日志设置不同计划的选项。我是否应该创建两个不同的维护计划来实现让我的数据库在每晚午夜执行一次完整备份和`TRANSACTION LOG`每 30 分钟备份一次的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:24:56.197

无需添加单独的维护计划。在 SSMS 维护计划设计器中，您可以添加一个子计划，以按照您想要的任何时间表进行传输日志备份，独立于其他子计划。它将为子计划添加一个单独的 SQL 代理作业。

# c# - 在 C++ 中调用 C# WPF 代码

> ID：15258783
> 
> 赞同：1
> 
> 时间：2013-03-06T21:50:26.523
> 
> 标签：c#, c++, interop

这是我第一次在这里提问，虽然我经常使用这个网站！！

所以在我搜索了一段时间后，我发现了这个： [http ://tigerang.blogspot.pt/2008/09/reverse-pinvoke.html](http://tigerang.blogspot.pt/2008/09/reverse-pinvoke.html)

我认为这几乎是我想做的。我现在将解释：（请注意，我是 c++ 的新手，c#，我来自 java）我在 Visual Studio 上有一个解决方案，有两个项目，非托管 c++ 和一个 C# WPF 应用程序。c++ 只有一个类，使用 OpenCV 进行一些处理。WPF 类连接到图像，检索一些 (x,y) 点，我必须将它们传递给 c++。之后我将从 WPF 端调用一个 C++ 函数，在那里我将得到我的结果。

所以我现在的问题是，我想通过一个点列表（列表），但我无法根据我的情况调整我看到的示例，我发现关于这个的文档非常少（或者我可能太新手而且我不知道如何找到/使用它）。

示例代码：C#

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct Ponto
{
    public double x;
    public double y;
}

[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
public delegate List<Ponto> CallBackDelegate();

public class ManagedClass
{
    private CallBackDelegate _delegate;

    public List<Ponto> vectorp;

    public ManagedClass()
    {
        _delegate = new CallBackDelegate(this.Foo);
    }

    public CallBackDelegate GetDelegate()
    {
        return _delegate;
    }

    public List<Ponto> Foo()
    {
       //do shit
        Ponto p1 = new Ponto();
        p1.x = 10;
        p1.y = 2;
        Ponto p2 = new Ponto();
        p2.x = 5;
        p2.y = 7;
        Ponto p3 = new Ponto();
        p3.x = 3;
        p3.y = 8;
        vectorp.Add(p1);
        vectorp.Add(p2);
        vectorp.Add(p3);

        return vectorp; 
    }
} 
```

* * *

示例代码 C++；

```
 #include <iostream>

 #pragma once
 #include <windows.h>
 #include <list>

 #define INTEROPBRIDGE_API __declspec(dllexport)

 INTEROPBRIDGE_API void fnInteropBridge(list<Ponto> data) //IM GETTING ERRORS HERE
 {
     ManagedLib::ManagedClass^ c = gcnew ManagedLib::ManagedClass();
     IntPtr p = Marshal::GetFunctionPointerForDelegate(c->GetDelegate());

     NativeToManaged funcPointer = (NativeToManaged) p.ToPointer();

     // invoke the delegate
     funcPointer(data);
 }

 // data structure for the callback function
 struct Ponto
 {
     double x;
     double y;
 };

 // callback function prototype
 typedef void (*NativeToManaged)(list<Ponto> data);

 using namespace std;
 void main()
 {
   cout << "Hello World!" << endl;   
   cout << "Welcome to C++ Programming" << endl;

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:30:45.473

您的 C++ 代码将不起作用，因为 System.Collections.Generic.List 与 C++ 的 std::list 完全不同。

如果您的 C++ 代码是托管的（目前是这样），您可以直接引用 C# 类。不需要函数指针。

但如果你真的想从非托管 C++ 中使用 C# 代码，最简单的方法是通过 COM。您需要更改 C# 代码的唯一事情是更改 ManagedClass.Foo 以返回数组而不是 List，因为 List 对 COM 不可见，另外为类型添加几个属性并为类添加接口实施：

```
[ComVisible(true)]
[Guid("2EF06BCB-A25B-41AD-B233-33A956DBEB69")]
public struct Ponto
{
    public double x;
    public double y;

    public Ponto(double x, double y)
    {
        this.x = x;
        this.y = y;
    }
}

[ComVisible(true)]
[Guid("EB9258F5-DCFB-4F91-8342-5A05EB17557D")]
public interface IManagedClass
{
    Ponto[] Foo();
}

[ComVisible(true)]
[Guid("11B23AD7-F79E-45D7-BC87-89F0DBC8B83F")]
[ClassInterface(ClassInterfaceType.None)]
public class ManagedClass : IManagedClass
{
    private List<Ponto> points;

    public ManagedClass()
    {
        points = new List<Ponto>();
        points.Add(new Ponto(1.0, 1.0));
        points.Add(new Ponto(2.0, 2.0));
        points.Add(new Ponto(3.0, 3.0));
    }

    public Ponto[] Foo()
    {
        return points.ToArray();
    }
} 
```

构建项目，以管理员权限启动 Visual Studio 命令提示符，并使用如下命令导出程序集的类型库并注册它：

> regasm ManagedAssembly.dll /tlb:ManagedAssembly.tlb /codebase

C++ 代码会像这样使用它：

```
#import "ManagedAssembly.tlb"
#include <iostream>

using namespace ManagedAssembly;
using namespace std;

int main()
{
    ::CoInitialize(NULL);

    {
        IManagedClassPtr pManagedClass(__uuidof(ManagedClass));

        SAFEARRAY* psa = pManagedClass->Foo();
        Ponto* pPoints = (Ponto*)psa->pvData;

        for (int i = 0; i < 3; ++i)
            cout << pPoints[i].x << " " << pPoints[i].y << endl;
    }

    ::CoUninitialize();
} 
```

# regex - 正则表达式匹配和复制最多但不包括特定值的最后一次出现

> ID：15258784
> 
> 赞同：1
> 
> 时间：2013-03-06T21:50:27.843
> 
> 标签：regex, ksh

在一个正则表达式 ksh 行中，我需要：

1.  查找特定字符串的出现，后跟任意数量的字符，直到最后出现特定值（在本例中为逗号），
2.  复制与输出匹配的东西，然后
3.  在复制的文本之后和特定值的最后一次出现之前插入一个新值（在本例中为逗号）

因此，如果我的输入字符串如下所示：

```
SEARCH_STRING anything_else(foo,bar), 
```

我想输出的是：

```
SEARCH_STRING anything_else(foo,bar) INSERTED_VALUE, 
```

到目前为止，我的 sed 表达式看起来像这样（它只匹配并复制所有内容，直到第一次出现逗号，而不是最后一次）：

```
sed -e 's/SEARCH_STRING [^,]\+/& INSERTED_VALUE/' 
```

...这导致：

```
SEARCH_STRING anything_else(foo INSERTED_VALUE,bar) 
```

……这不太对。我知道我需要使用负面展望——但不能完全正确地使用语法。您能提供的任何建议将不胜感激，谢谢。即使没有找到逗号，我也需要在行尾顺便做同样的替换（尽管我很欣赏这可能需要一个单独的问题和表达）。提前感谢您提供的任何建议....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:55:43.947

使用`$`特殊字符匹配行尾，使用`.`特殊字符匹配之前的最后一个字符：

```
sed 's/\(SEARCH_STRING .*\)\(.\)$/\1INSERTED_VALUE\2/' 
```

如果您知道这始终是您要替换的字符，您可以用逗号替换匹配表达式中的最后一个点。如果最后一个字符不同，那么使用点将匹配任何这样的字符。然而，一个缺点是它也匹配空格，所以如果你的行在逗号后面有几个额外的空格，这个表达式将删除一个空格，而不是逗号。

要替换最后一个*非空白*字符，请改用此表达式：

```
sed 's/\(SEARCH_STRING .*\)\(\S\s*\)$/\1INSERTED_VALUE\2/' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:01:02.643

最简单的方法是使用前瞻`SEARCH_STRING .*(?=,)`，但 sed 不支持这一点，您可以这样做：

```
sed -e 's/\(SEARCH_STRING .*\)\(,.*\)/\1 INSERTED_VALUE\2/' 
```

`INSERTED_VALUE`基本上，我们对最后一个逗号之前和之后的内容进行反向引用，然后在中间将其拼凑起来。

# android - 如何克服 TextView 不适合屏幕并将其他内容推离屏幕的问题？

> ID：15258787
> 
> 赞同：1
> 
> 时间：2013-03-06T21:50:55.303
> 
> 标签：android, xml, android-layout, textview, android-xml

我正在尝试构建一个简单的表单，我想在顶部添加一个注释/标题/标题，以显示一条消息。我尝试过这样做，但文本已从屏幕上消失，并且其下方的内容也已被推开。我该如何反击？

这是我的`layout.xml`，它在 pastebin 上：http: [//pastebin.com/fNBfQiz8](http://pastebin.com/fNBfQiz8)

```
<TableLayout
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:shrinkColumns="1"
   android:stretchColumns="1" >

   <TableRow
       android:layout_marginBottom="2sp"
       android:layout_marginTop="2sp"
       android:layout_width="match_parent" >
        <TextView
           android:layout_width="match_parent"
           android:text="You can only add a spot based on your current location" />

    </TableRow>

   <TableRow
       android:layout_marginBottom="2sp"
       android:layout_marginTop="2sp" >
        <TextView android:text="Name:" />
        <EditText android:id="@+id/name" />
    </TableRow>

   <TableRow
       android:layout_marginBottom="2sp"
       android:layout_marginTop="2sp" >
        <TextView android:text="Address:" />
        <EditText android:id="@+id/addr" />
    </TableRow>

   <TableRow
       android:layout_marginBottom="2sp"
       android:layout_marginTop="2sp" >
        <TextView android:text="Type:" />
        <Spinner
           android:id="@+id/spinnerType"
           style="@style/AppBaseTheme"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_weight="1"
           android:entries="@array/types_array"
           android:prompt="@string/types_prompt" />
    </TableRow>

   <TableRow
       android:layout_marginBottom="2sp"
       android:layout_marginTop="2sp" >
        <TextView android:text="Terrain:" />
        <Spinner
           android:id="@+id/spinnerTerrain"
           style="@style/AppBaseTheme"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_weight="1"
           android:entries="@array/ratings_array"
           android:prompt="@string/ratings_prompt" />
    </TableRow>

    <TableRow>
        <TextView android:text="Difficulty:" />
        <Spinner
           android:id="@+id/spinnerDifficulty"
           style="@style/AppBaseTheme"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_weight="1"
           android:entries="@array/ratings_array"
           android:prompt="@string/ratings_prompt" />
    </TableRow>

   <TableRow
       android:layout_marginBottom="2sp"
       android:layout_marginTop="2sp" >
        <TextView android:text="Description:" />
        <EditText
           android:id="@+id/desc"
           android:gravity="top"
           android:inputType="textMultiLine"
           android:lines="2"
           android:maxLines="2"
           android:scrollHorizontally="false" />
    </TableRow>

    <Button
       android:id="@+id/save"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:text="Save"
                    android:layout_marginBottom="2sp"
       android:layout_marginTop="2sp" />
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:39:06.120

我不确定我是否完全理解您在没有看到图片的情况下遇到的问题，但我查看了您的 pastebin。作为一般评论，布局中的根视图（在您的情况下为 ScrollView）可能应该具有`match_parent`或`fill_parent`同时具有其宽度和高度，否则您可能会看到一些奇怪的渲染，您会看到没有布局覆盖屏幕的空白区域或得到一些奇怪的滚动行为。

[这是一个很好的教程，它对 TableLayouts 中的列间距做了一些漂亮的事情，并且可以帮助你弄清楚为什么你的视图被截断并且不适合适当的空间。](http://www.mkyong.com/android/android-tablelayout-example/) 请特别注意他在 TableRows 及其子项上使用了哪些属性，以实现他想要的布局。

至于您想要显示一些标题信息的问题，我可以想到两个选项。

1.  如果您希望它们在 TableLayout 滚动时固定显示在屏幕顶部，请创建一个 LinearLayout 作为您的布局的根视图并将其方向设置为垂直。将您的标头作为第一个子项添加到此 LinearLayout，并将您的 ScrollView 作为第二个子项。
2.  如果您希望标题信息与表格一起滚动，请将 ScrollView 作为您的根并创建一个 LinearLayout（同样具有垂直方向）作为它的唯一直接子级。将您的标题信息添加为 LinearLayout 的第一个子项，将 TableLayout 添加为第二个子项。

希望这可以帮助。如果您发布了您现在看到的屏幕截图以及您所针对的布局的某种类型的模型，它将有助于隔离您遇到的问题并帮助我们在社区中提供支持。

# regex - 从 Hiawatha 迁移时的 FCGI 和 url 问题

> ID：15258797
> 
> 赞同：3
> 
> 时间：2013-03-06T21:51:33.680
> 
> 标签：regex, rewrite, lighttpd, fastcgi, hiawatha

我们正在从 Hiawatha 网络服务器迁移到 Lighty。我希望在不对 FCGI 应用程序进行任何更改的情况下使此传输尽可能透明。

在 Hiawatha 中，我们在 UrlToolKit 块中有一个配置行

> 匹配 ^/load_app 使用FastCGI app_loader

这意味着，如果请求 URL 是 /load_app/index.html 或 /load_app/appOne 或 /load_app/appTwo/index.html 或以 /load_app 开头的任何内容，则将传递给 app_loader FCGI 应用程序。与此类似，我们有许多由不同 FCGI 应用程序处理的请求 URL。我如何在 Lighty 上完成这项工作？

配置

> "/load_app/" => (("host" => "127.0.0.1", "port" => 2020, "check-local" => "disable" )),

仅处理 /load_app/index.html，但不处理 /load_app/appTwo/index.html 或 /load_app/js/validate.js

我想让网络服务器的这种更改尽可能透明，因此任何轻量级的配置都不能更改 SCRIPT_NAME、REQUEST_URI 或 QUERY_STRING。更改这些变量将破坏 FCGI 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T06:27:15.093

现在有点晚了，但这行得通吗？

```
$HTTP["url"] =~ "/load_app/.*" {
    fastcgi.server = (
                       "/" =>
                         (
                           (
                             "host" => "127.0.0.1",
                             "port" => 2345,
                             "check-local" => "disable"
                           )
                         )
                     )
} 
```

应该匹配以 /load_app/ 开头的任何内容。

# c# - 从不同的服务器单元测试 Sitecore 安装

> ID：15258800
> 
> 赞同：0
> 
> 时间：2013-03-06T21:51:47.587
> 
> 标签：c#, .net, unit-testing, sitecore

所以，我是 Sitecore 的新手，不完全确定如何启用它。我在服务器 A 上安装了 Sitecore，并且正在从服务器 B 运行单元测试。但是，我遇到了通过其 API（在 Sitecore.Kernel.dll 中）远程访问 Sitecore 的问题。

1.  Sitecore 安装已正确设置，我可以访问 CMS 管理员，我可以添加项目，我可以看到数据库等。
2.  从下面的堆栈跟踪中，我可以看到它正在寻找数据文件夹（服务器 B 上不存在该文件夹，它是服务器 A 上 Sitecore 安装的一部分）。
3.  许可证存储在此目录（数据文件夹）中，并且由于失败的调用代码称为 LicenseManager，我猜测某些东西正在尝试验证许可证。
4.  我已经按照下面的参考链接中的说明设置了单元测试。这包含了我设置的所有具体细节（但请随时提出问题）。

**问题：**有没有办法设置它以针对来自不同服务器的 Sitecore 安装执行单元测试（最好通过 dll 中的 Sitecore API）？

参考：

*   [http://www.experimentsincode.com/?p=232](http://www.experimentsincode.com/?p=232) - 一般设置
*   [http://sdn.sitecore.net/upload/sitecore6/content_api_cookbook-a4.pdf](http://sdn.sitecore.net/upload/sitecore6/content_api_cookbook-a4.pdf) - 内容 api 参考

示例测试代码：

```
 [TestMethod]
    public void GetItemTest()
    {
        var database = global::Sitecore.Configuration.Factory.GetDatabase("master");
        Assert.IsNotNull(database);

        var item = database.GetItem("/sitecore/content");
        Assert.IsNotNull(item);
        Assert.AreEqual("content", item.Name);
    } 
```

例外：

```
System.TypeInitializationException was unhandled by user code
  Message=The type initializer for 'Sitecore.SecurityModel.License.LicenseManager' threw an exception.
  Source=Sitecore.Kernel
  TypeName=Sitecore.SecurityModel.License.LicenseManager
  StackTrace:
       at Sitecore.SecurityModel.License.LicenseManager.DemandRuntime(Boolean acceptExpress)
       at Sitecore.Data.Managers.ItemManager.get_Provider()
       at Sitecore.Data.Managers.ItemManager.GetItem(String itemPath, Language language, Version version, Database database)
       at Sitecore.Data.Database.GetItem(String path)
       at Spacely.Web.Tests.Services.SitecoreServiceTest.GetItemTest() in C:\Users\foo\src\spacely\Spacely.Web.Tests\Services\SitecoreServiceTest.cs:line 25
  InnerException: System.Reflection.TargetInvocationException
       Message=Exception has been thrown by the target of an invocation.
       Source=mscorlib
       StackTrace:
            at System.RuntimeMethodHandle._InvokeConstructor(IRuntimeMethodInfo method, Object[] args, SignatureStruct& signature, RuntimeType declaringType)
            at System.RuntimeMethodHandle.InvokeConstructor(IRuntimeMethodInfo method, Object[] args, SignatureStruct signature, RuntimeType declaringType)
            at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
            at System.Reflection.ConstructorInfo.Invoke(Object[] parameters)
            at Sitecore.Reflection.ReflectionUtil.CreateObject(Type type, Object[] parameters)
            at Sitecore.Reflection.ReflectionUtil.CreateObject(String assembly, String className, Object[] parameters)
            at Sitecore.Reflection.ReflectionUtil.CreateObject(String typeName, Object[] parameters)
            at Sitecore.Reflection.Nexus.GetApi[T](String typeName, T& api)
            at Sitecore.Reflection.Nexus.get_LicenseApi()
            at Sitecore.SecurityModel.License.LicenseManager.GetSnapshotData(Guid instance)
            at Sitecore.SecurityModel.License.LicenseManager.UpdateSnapshot()
            at Sitecore.SecurityModel.License.LicenseManager..cctor()
       InnerException: System.ArgumentException
            Message=The directory name \data is invalid.
            Source=System
            StackTrace:
                 at System.IO.FileSystemWatcher.set_Path(String value)
                 at Sitecore.IO.FileWatcher.InitializeWatcher(String filter, String folder)
                 at Sitecore.IO.FileWatcher..ctor(String folder, String filter)
                 at Sitecore.SecurityModel.License.LicenseWatcher..ctor()
                 at Sitecore.Nexus.Licensing.NexusLicenseApi.()
                 at Sitecore.Nexus.Licensing.NexusLicenseApi..ctor()
            InnerException: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T07:34:02.233

我写了几篇关于单元测试的博客文章，有些老旧但仍然适用：

[http://www.experimentsincode.com/?p=232](http://www.experimentsincode.com/?p=232)

另请查看 Dan Solovey 的博客：

[http://www.dansolovay.com/search/label/TDD](http://www.dansolovay.com/search/label/TDD)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:39:37.793

您描述的架构是不可能的，因为 Sitecore API 不能调用“到另一台服务器”，至少不能以您在此处执行的方式。您链接到的文章描述了如何使用 Sitecore 设置独立于 Web 服务器运行的单元测试项目。即它实际上会在 Web 上下文之外运行 Sitecore。这是可能的，但可能需要一些工作。所需设置的一部分是将 sitecore 许可证放置在运行单元测试的服务器上，并将 App.config 中的 dataFolder 指向该位置。

另一种方法是[使用网络工具来运行您的单元测试](http://marketplace.sitecore.net/en/Modules/NUnit_Web_Test_Runner.aspx)，但这可能不是您正在寻找的自动化解决方案。这个解决方案也[可以在 GitHub 上找到](https://github.com/jorgelusar/sctestrunner)。我们已经有一段时间的一个想法是通过 Web 服务调用远程测试工具。这将是实现从远程服务器运行测试目标的一种方法。

# python - 如何找出我未处理的异常是什么

> ID：15258801
> 
> 赞同：1
> 
> 时间：2013-03-06T21:51:48.767
> 
> 标签：python, exception, exception-handling, tkinter

这可能是有史以来最愚蠢的问题，但我完全不知道我得到了什么异常，我只知道我得到了一个，而谷歌不想让我知道为什么。

这是它所说的：

```
Unhandled exception in thread started by <function draw at 0x02A403B0> 
```

这就是造成它的原因，虽然如果有人能告诉我我的错误代码出了什么问题会很好，但我也很想知道下次发生这种情况时我怎么能找到自己，因为这种情况发生得太多了.

```
def draw():
    while True:
        for x in range(0,10):
            for y in range (0,10):
                if (coord[x][y] == 0):
                    canvas.create_rectangle((x * 40) + 10, (y * 40) + 10, (x * 40) + 50, (y * 40) + 50, fill="white")
                if (coord[x][y] == 1):
                    canvas.create_rectangle((x * 40) + 10, (y * 40) + 10, (x * 40) + 50, (y * 40) + 50, fill="red")
                if (coord[x][y] == 2):
                    canvas.create_rectangle((x * 40) + 10, (y * 40) + 10, (x * 40) + 50, (y * 40) + 50, fill="darkorange")
    time.sleep(0.03) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:55:56.513

仅用于调试，我会将整个内容包含在`try-except`打印异常中并重新引发它：

```
def draw():
    try:
        while True:
            for x in range(0,10):
                for y in range (0,10):
                    if (coord[i][j] == 0):
                        canvas.create_rectangle((x * 40) + 10, (y * 40) + 10, (x * 40) + 50, (y * 40) + 50, fill="white")
                    if (coord[i][j] == 1):
                        canvas.create_rectangle((x * 40) + 10, (y * 40) + 10, (x * 40) + 50, (y * 40) + 50, fill="red")
                    if (coord[i][j] == 2):
                        canvas.create_rectangle((x * 40) + 10, (y * 40) + 10, (x * 40) + 50, (y * 40) + 50, fill="darkorange")
        time.sleep(0.03)
    except Exception as e:
        print(e)
        raise 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:37:43.910

除了运行 mainloop 的线程之外，不能从任何线程调用 Tkinter 对象。相反，您应该删除线程的使用，并删除无限循环的使用。相反，做这样的事情（虽然，我不知道 i 和 j 来自哪里，我只是在复制你的代码......）：

```
def draw():
    for x in range(0,10):
        for y in range (0,10):
            item = canvas.create_rectangle((x * 40) + 10, (y * 40) + 10, 
                                           (x * 40) + 50, (y * 40) + 50)
            if (coord[i][j] == 0):
                canvas.itemconfig(item, fill="white")
            if (coord[i][j] == 1):
                canvas.itemconfig(item, fill="red")
            if (coord[i][j] == 2):
                canvas.itemconfig(item, fill="darkorange")
    canvas.after(30, draw) 
```

这利用了您已经有一个无限循环运行的事实——事件循环。事件循环的每次迭代（或者更准确地说，事件循环中的每 30 毫秒）您调用 draw。

然而，这段代码看起来会是一个真正的内存猪。你真的打算每 30 毫秒继续创建新的矩形吗？最终你会遇到性能问题，因为你最终会得到数十万个重叠的矩形。

# ruby - Ruby RPG：生物特征的未定义方法

> ID：15258807
> 
> 赞同：0
> 
> 时间：2013-03-06T21:52:10.980
> 
> 标签：ruby

好的，所以我之前用其他语言（即 python）写过一些简单的 RPG，所以我决定尝试用 ruby​​ 写一个。所以，今天早上，我坐下来输入了战斗机制的基础知识，制作了一些生物，然后开始讲故事。但是，由于某种原因，当我尝试运行程序时出现此错误：

`herosquest.rb:67: undefined method 'traits' for Creature::Hero:Class (NoMethodError)`

我回顾了代码（我将在最后提供完整的代码），并在第 26 到 55 行找到了定义，正是它应该在的位置。

```
class Creature
  # Creature attributes are used to determine the outcome of combat.
  traits :life, :strength, :charisma, :weapon
  attr_accessor :life, :strength, :charisma, :weapon
  #New class methods for hp, str, char, wep
  def self.life( val )
    @traits ||= {}
    @traits['life'] = val
  end

  def self.strength( val )
    @traits ||= {}
    @traits['strength'] = val
  end

  def self.charisma( val )
    @traits ||= {}
    @traits['charisma'] = val
  end

  def self.weapon( val )
    @traits ||= {}
    @traits['weapon'] = val
  end
    #initialize sets defaults for each attr
  def initialize
    self.class.traits.each do |k,v|
      instance_variable_set("@#{k}", v)
    end
  end
end 
```

为什么它不起作用？

这是其余的代码，如果有帮助的话。注意：当我复制我的代码时，一些缩进搞砸了。它比看起来要整洁得多。

```
#CREATURE MECHANICS
    #Create critters. Make them do stuff.
class Creature
  def self.metaclass; class << self; self; end; end
  def self.traits( *arr )
    return @traits if arr.empty?
    attr_accessor( *arr )
    arr.each do |a|
      metaclass.instance_eval do
        define_method( a ) do |val|
          @traits ||= {}
          @traits[a] = val
        end
      end
    end
    class_eval do
      define_method( :initialize ) do
        self.class.traits.each do |k,v|
          instance_variable_set("@#{k}", v)
        end
      end
    end
  end

class Creature
    # Creature attributes are used to determine the outcome of combat.
  traits :life, :strength, :charisma, :weapon
  attr_accessor :life, :strength, :charisma, :weapon
  #New class methods for hp, str, char, wep
  def self.life( val )
    @traits ||= {}
    @traits['life'] = val
  end

  def self.strength( val )
    @traits ||= {}
    @traits['strength'] = val
  end

  def self.charisma( val )
    @traits ||= {}
    @traits['charisma'] = val
  end

  def self.weapon( val )
    @traits ||= {}
    @traits['weapon'] = val
  end
    #initialize sets defaults for each attr
  def initialize
    self.class.traits.each do |k,v|
      instance_variable_set("@#{k}", v)
    end
  end
end

#CREATURE TYPES
  #Hero
    #Our brave Hero! Chosen by the gods! Mighty slayer
    #of beasts! Also, broke. Which is why he's hunting
    #a dragon. Poor, foolish mortal...
class Hero < Creature
  traits :bombs, :arrows, :money

  life 10
  strength 4
  charisma 4
  weapon 4
  bombs rand(3..10)
    arrows rand(15..100)
    money rand(0..25)               #Should be used with Traders for buying stuff

  #Bow. Needs arrows. Duh. Hero should start with, say, 50?
  def ^( enemy )
    if @arrows.zero?
      puts "[Twang. Your imaginary arrow, alas, fails to slay the creature. Or have any effect at all. Moron.]"
      return
    end
    @arrows -= 1
    fight( enemy, rand(0+((charisma+(0..4))*2)))    #Zero means you missed
  end
end

  #The hero's sword, given to him by the gods.
    #Unlimited uses. Also, shiny.
  def /( enemy )
    fight( enemy, rand(4+weapon+(strength*2)))
  end

    #Trading. Ah, commerce! Doesn't quite work yet.
    #Need a way to make sure money stays positive,
    #and some sort of way to make sure you can't
    #cheat the poor trader out of his goods.
    def trade( enemy )
        if @money.zero?
            puts "[ The trader ignores you. You need money.]"
            return
        else puts "[What do you want to buy?\n Arrows = 10 for 2 coins\n Bombs = 5 for 5 coins]"        #Should add new weapons someday
            purchase = gets.chomp
            if purchase == "Arrows"
                puts "[You buy 10 arrows for 2 coins]"
                @arrows += 10
                @money  -= 2
            elsif purchase == "Bombs"
                puts "[You buy 5 bombs for 5 coins]"
                @bombs += 5
                @money  -= 5
    end
end     

  #Mmm, tasty lembas. Elvish waybread. One small
    #bite is enough to fill the stomach of a grown man.
  def %( enemy )
    lembas = rand( charisma )
    puts "[Tasty lembas gives you #{ lembas } life.]"
    @life += lembas
    fight( enemy, 0 )
  end

  #Bombs. They explode. Hopefully, far away from you.
  def *( enemy )
    if @bombs.zero?
      puts "[You light your finger on fire instead of the fuze. Then, you realize you're out of bombs.]"
            @life -= 1
      return
    end
    @bombs -= 1
    fight( enemy, rand(weapon+(2..25)))
  end
end

#Man
    #Doesn't do much. Stands around and says boring things. Well, someday, anyway...
class Man < Creature
    traits :chat        #Will eventually say random stuff about the weather or whatever.

  life 4
  strength 2
  charisma 4
  weapon 1          
end

#Woman
    #Like Man. Except she smells nicer.
    #Oh, and she's got a frying pan...
    #Looks fierce.
class Woman < Creature
  life 4
  strength 2
  charisma 8
  weapon 4          
end

#Trader
    #Hangs around taverns and pushes
    #useless stuff on passers-by.
class Trader < Creature
  traits :bombs, :arrows, :money

  life 4
  strength 4
  charisma 16
  weapon 10         #Armed and dangerous. Sort of...
  bombs rand(0..100)
    arrows rand(0..500)
    money rand(100..2500)
end

#Monkey
    #Pain in the butt. Travels in packs. Makes
    #faces and throws bananas.
class Monkey < Creature
  life 8
  strength 5
  charisma 11
  weapon 2          #Beats you with its cute little fists.
end

#Cow
    #Cows won't attack you unless you hit them, or try to ride them, 
    #or make fun of them for chewing cud.
    #Also, they don't like it when people stare
    #at their udders. It makes them uncomfortable.
class Cow < Creature
  life 18
  strength 15
  charisma 2        #It's a cow, not a rocket scientist
  weapon 3
end

#Deer
    #The deer is not as timid as it appears. Serves you right
    #for picking on a poor, "helpless" creature. Jerk.
class Deer < Creature
  life 30
  strength 22
  charisma 5
  weapon 15
end

#Biker
    #Found on paths. Rides a bike.
    #Not *super* tough, but should be 
    #strong enough to make you fear
    #for your life.
class Biker < Creature
  life 34
  strength 10
  charisma 4        #They aren't very bright...
  weapon 8
end

#Angel
    #Heavenly host. "Information: Kill"
    #Seriously, don't screw around with these guys.
class Angel < Creature
  life 85
  strength 8
  charisma 60       #Seriously smart, since it's
  weapon 25                 #secretly a robot.
end

#Tentacle
    #Found in lakes by throwing things ala Merry and Pippin.
    #NOTE: Should include this in the first scene with a lake:
        #"I am afraid of the pool. Don't disturb it!"
    #Should preferably be said by a smallish man, muttering about
    #"My precious," Mordor, and someone called Sam.
class Tentacle < Creature
  life 9
  strength 3        #Not strong, but there's a lot of them.
  charisma 4
  weapon 8
end

#Watcher in the Water
    #Found after killing a bunch of tentacles.
    #Should be tough enough to scare you off,
    #but weak enough that you won't die
    #instantly.
class Watcher_in_the_Water < Creature
    life 250
  strength 10
  charisma 35
  weapon 4          #I don't want him to be too powerfull
end

#Dragon
    #Will totally kill you to death. A lot.
    #Final boss type thing. Surrounded
    #by his hoard of glittering treasure.
        #Oooh, shiny...
class Dragon < Creature
  life 500     # tough scales
  strength 95  # bristling veins
  charisma 65  # toothy smile
  weapon 157   # fire breath
end

#COMBAT MECHANICS
  #Hitting in combat
  def hit( damage )
    p_up = rand( charisma )
    if p_up % 9 == 7
      @life += p_up / 4
      puts "[#{ self.class } magic powers up #{ p_up }!]"
    end
    @life -= damage
    puts "[#{ self.class } has died.]" if @life <= 0
  end

    #Turn in combat
  def fight( enemy, weapon )
    if life <= 0
      puts "[#{ self.class } is dead, Jim. You can't fight!]"
      return
    end

    #You attack
    your_hit = rand( strength + weapon )
    puts "[Your #{weapon} hit the #{enemy} for #{ your_hit } points of damage!]"
    enemy.hit( your_hit )

    #Enemy fights back
    p enemy
    if enemy.life > 0
      enemy_hit = rand( enemy.strength + enemy.weapon )
      puts "[The #{enemy} hit with #{ enemy_hit } points of damage!]"
      self.hit( enemy_hit )
    end
  end
end

#PLACES, EVENTS, & STORY
    #First, generate the Player
h = Hero.new
    #Determine player name and gender
    print "What is your name, adventurer?\n"
        name=gets.chomp.to_s
    print "#{name}, are you male or female?\n"
        gender=gets
    print "\n"

    #player chooses his/her class
until heroclass = (1..3)
print"What class do you want?\n(1 for Scout, 2 for Fighter, or 3 for Ranger)\n"
heroclass = gets.to_i
        if heroclass == 1
            heroclass = "Scout"
            Hero.charisma = charisma + 3
            Hero.strength = strength - 1
            Hero.weapon = weapon + 1
            Hero.arrows = arrows + 50
            print"Scouts are quick and intelligent, but they are a bit weak.\nTheir prefered weapon is the bow.\n"
    break
        elsif heroclass == 2
            heroclass = "Fighter"
            Hero.strength = strength + 3
            Hero.charisma = charisma - 3
            Hero.weapon = weapon + 3
            Hero.life = life + 5
            print"Fighters are skilled at close combat, and their endurance is unmached by lesser mortals.\n(They aren't very bright though...)\nTheir prefered weapon is the sword\n"
    break
        elsif heroclass == 3
            heroclass = "Ranger"
            Hero.strength = strength - 1
            Hero.charisma = charisma + 2
            Hero.life = life + 2
            Hero.bombs = bombs + 5
            Hero.weapon = weapon + 2
            print"Rangers are highly skilled, but not as strong as fighters or as agile as scouts.\nThey fight well with all weapons, but they particularly enjoy blowing stuff up.\n"
    break
        else print "Please enter a valid class number."
end
print "Welcome, #{name}, the #{gender} #{heroclass}, Chosen Hero of the gods!\n"
print "The disembodied voice you are now hearing is your Spirit Guide"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:00:00.490

当我尝试运行您的代码时，出现错误

```
so_question.rb:28:in `<class:Creature>': undefined method `traits' for Creature::Creature:Class (NoMethodError)
    from so_question.rb:26:in `<class:Creature>'
    from so_question.rb:3:in `<main>' 
```

because you have a class called `Creature` within the class `Creature`, and `traits` is a class method on `Creature`, not on `Creature::Creature`.

# c# - 为什么当更改结构中的数组时所有引用都会更改？

> ID：15258810
> 
> 赞同：-1
> 
> 时间：2013-03-06T21:52:24.727
> 
> 标签：c#, list

我正在研究 C# 项目，我的代码是这样的：

```
public struct Point
{
    public int X;
    public int[,] arr;
}
List<Point> po=new List<Point>();
void func()
{
    Point p1;
    p1.arr = new int[1, 1];
    p1.X = 10;
    p1.arr[0, 0] = 1;
    func2(p2);
    p1.X=20;
    p1.arr[0,0]=10;
 }
void func2(Point h)
    {
        po.Add(h);
    } 
```

当我跟踪此代码并从 func2 返回时，当更改 p1.x 时，我在列表中的点（x 参数）没有改变，但是当将 p1.arr 更改为 10 时，我在列表中的点（arr 参数）也从 1 更改为 10。为什么会发生这种情况，如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:57:47.977

结构具有值语义。这意味着改变 p1.x 是改变一个值，而不是一个引用。您有一个正在更改的本地值 p1。当您更改数组*中的值时*，您正在更改该值的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:58:35.227

结构是 C# 中的值类型，而类是引用。尝试使用 ref 修饰符将点传递给 func2。

```
void func2(ref Point h){
    ....
} 
```

实际上，感谢SD评论中的JG，它应该更像这样：

```
void func2(ref Point po, Point h){
    po.Add(h);
} 
```

在进一步审查中，这仍然是错误的。基本上，当您将点添加到列表时，它会按值将点复制到列表中。

p1 和 po.Last() 具有相同的值，但引用不同的对象。如果 Point 是一个类，你就不会有这个问题。

您可以在将 p1 添加到 po 后立即执行此操作，但它既愚蠢又笨拙：

```
po.Add(p1);
var len = po.Count;
po[len-1].X = 20;
po[len-1].arr[0,0]=10; 
```

你不能这样做：

```
po.Add(p1);
var len = po.Count;
var pNew = po[len-1]; 
// p1 and pNew are different objects in memory, but with the same values
pNew.X = 20;
pNew.arr[0,0]=10; 
```

好吧，从技术上讲，你可以做到这一点，但由于它们是内存中的不同对象，它不会像你希望的那样做。

除非您非常需要，否则只需将 Point 切换到一个类。

# android - 如何显示从资产目录中的文本文件中读取的“®”？

> ID：15258811
> 
> 赞同：1
> 
> 时间：2013-03-06T21:52:29.163
> 
> 标签：android, special-characters, textview, symbols, android-assets

有人知道从资产目录中的文本文件读取时显示“®”符号的最佳方式吗？我尝试用 &® 或 ® 或 \u00AE 替换“®”符号，但这些都不起作用。

将其定义为html的唯一解决方案是什么？

这是我用来从资产中读取文本文件的代码：

```
 mTextViewTermsConditions = (TextView) findViewById(R.id.textView_terms_conditions);

    StringBuffer stringBufferEula = new StringBuffer();

    try
    {
        InputStream inputStream = getAssets().open("eula");

        BufferedReader f = new BufferedReader(new InputStreamReader(inputStream));

        String line = f.readLine();

        while (line != null)
        {
            Logger.d(line);

            stringBufferEula.append(line);

            line = f.readLine();
        }

    }
    catch (IOException e)
    {
        Logger.e(e.toString());
        e.printStackTrace();
    }

    mTextViewTermsConditions.setText(stringBufferEula); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T22:28:42.107

这是一个编码问题。确保您的资产文件以 UTF-8 编码存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:16:55.107

感谢上面的 Ted Hopp 回答：确保文本文件采用 UTF-8 编码。

# c++ - C++，复制构造函数混淆

> ID：15258816
> 
> 赞同：0
> 
> 时间：2013-03-06T21:52:58.470
> 
> 标签：c++, gcc, c++11, gcc-warning

假设我创建了一个自定义 Array 类并具有以下构造函数：

```
 Array::Array(size_t size)
    {
      mySize = size;
      //myData is of type int*
      myData = new int[mySize]; // this stuff is allocated on a heap
    } 
```

据我所知，这种情况下的默认复制构造函数将像这样实现：

```
 Array::Array(Array& a)
    {
      mySize = a.mySize;
      myData = a.myData; //points to the same memory on the heap
    } 
```

最后，假设我的 main.cpp 文件中有以下代码

```
 int main()
     {
       Array a(1);
       Array b(a); //copy constructor is invoked
     } 
```

我期望的是由于删除指向空闲存储内存的 myData 指针而导致的内存泄漏，但我有以下运行时错误：

```
*** glibc detected *** ./main.out: double free or corruption (fasttop): 0x086ad008 *** 
```

为什么？似乎 ~Array() 以某种方式自动释放分配在堆上的内存 - 但这对我来说非常违反直觉。也许我错过了什么？

更新：

```
 class Array{
         private:
           size_t mySize;
           int *myData;
           ... 
```

更新 2：

主.cpp：

```
 #include <iostream>
   #include "array.h"

   int main()
   {
     Array a(1);
     Array b(a);
   } 
```

数组.h：

```
 #ifndef ARRAY_H_
   #define ARRAY_H_
   #include <stddef.h>
   class Array{
   private:
       size_t mySize;
       int *myData;
   public:
       Array(size_t size);
       ~Array();
       void set(int i,int val);
       int get(int i);
       size_t getSize();
   };
   #endif 
```

数组.cpp：

```
 #include "array.h"

   Array::Array(size_t size)
   {
     mySize = size;
     myData = new int[mySize];
   }

   Array::~Array()
   {
     delete[] myData;
   }

   void Array::set(int i, int val)
   {
     if(i>=0 && i<mySize)
       myData[i] = val;
   }

   int Array::get(int i)
   {
     if(i>=0 && i<mySize)
       return myData[i];
     else return -1;
   }
   size_t Array::getSize()
   {
     return mySize;
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:59:38.933

我认为在你的析构函数中你有

```
 Array::~Array(void)
 {
      delete [] myData; //points to the same memory on the heap
 } 
```

问题是双重免费的

例子：

```
int main()
{
       Array a(1);  // here a.myData = 0x12345678
       Array b(a); //copy constructor is invoked // here b.myData = 0x12345678

       // pop  stack (call destroy of object)
       // delete b.myData
       // delete a.myData already delete
} 
```

**双人免费**

**编辑：** 供您的复制构造器使用`const`，因为您不修改 a.

```
 Array::Array(const Array& a)
 {
      mySize = a.mySize;
      myData = a.myData; //points to the same memory on the heap
 } 
```

祝你好运 ！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T22:11:50.607

所以......尽管你声称，事实证明你**确实**删除了析构函数中的数组，而复制构造函数是一个浅拷贝，所以你得到了双重删除。简单的。

```
Array::~Array()
{
  delete[] myData;
} 
```

由于这是一个动态数组，它应该拥有数据，因此您可以在析构函数中删除，但您需要在复制构造函数*和*赋值运算符中“深度”复制。见[*三法则*](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T22:02:40.110

你的副本是浅拷贝，所以*如果*你有一个释放内存的析构函数，每个对象都会尝试删除相同的内存。

你不必*做*一个浅拷贝。您可以编写自己的显式复制构造函数，将实际数据复制到新分配的数组中。

我喜欢谷歌关于[禁用复制和赋值构造函数](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml?showone=Copy_Constructors#Copy_Constructors)并更喜欢显式`CopyFrom()`方法的建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T22:00:01.427

“double free”意味着同一个指针被赋予了`delete[]`两次。因为在你的析构函数中（大概）它`delete[]`在 object`a`和`b`. 实用的解决方案：使用`std::vector`，不要乱用原始数组等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T22:03:05.597

我认为你的析构函数（来自数组'a'和'b'）正在尝试释放相同的内存（双重释放）。也许你应该在释放之前检查你的 myData 。

# c# - 反序列化 XML 数组，其中 Root 是数组且元素不遵循约定

> ID：15258818
> 
> 赞同：19
> 
> 时间：2013-03-06T21:53:04.783
> 
> 标签：c#, .net, xml-serialization

我得到的 XML 是由外部来源提供的，所以我无法轻松地重新格式化它。我想在我的实体上使用 xml 属性，而不必编写一个知道 XML 和实体格式的 linq 查询。这是一个例子：

```
<?xml version="1.0"?>
<TERMS>
    <TERM>
        <ID>2013-2</ID>
        <DESC>Spring 2013</DESC>
    </TERM>
    <TERM>
        <ID>2013-3</ID>
        <DESC>Summer 2013 Jun&amp;Jul</DESC>
    </TERM>
</TERMS> 
```

例如，我知道 XMLSerializer 需要 ArrayOfTerm 而不是 TERMS，但是我可以调整我的实体以使用具有 xml 属性的不同元素名称，例如：

```
public class TermData
{
    [XmlArray("TERMS")]
    [XmlArrayItem("TERM")]
    public List<Term> terms;
}

public class Term
{
    [XmlElement("ID")]
    public string id;

    [XmlElement("DESC")]
    public string desc;
} 
```

我正在反序列化数据，如下所示：

```
TermData data;

XmlSerializer serializer = new XmlSerializer(typeof(TermData));
using (StringReader reader = new StringReader(xml))
{
   data = (TermData)serializer.Deserialize(reader);
}

return View(data.terms); 
```

我面临的问题是 TERMS 是根和数组本身。如果 XML 有一个不是数组的根元素，我可以像这样编辑我的 TermData 类，它会正确反序列化（已经测试过）。

```
[XmlRoot("ROOT")]
public class TermData
{
    [XmlArray("TERMS")]
    [XmlArrayItem("TERM")]
    public List<Term> terms;
} 
```

请注意，使用 TERMS 作为 XMLRoot 不起作用。现在，我的代码正在抛出

```
 InvalidOperationException: There is an error in XML document (2,2).
 InnerException: "<TERMS xmlns=" was not expected. 
```

这会让我相信 XML 的格式不正确，但据我了解，我给出的示例是完全有效的 XML。

如果我可以编辑源 xml，这一切都将是微不足道的，但可能有很多其他类似的响应，我需要能够灵活处理我可能得到的任何东西。我要确认的是 XMLSerializer 是否可以支持这种类型的 XML 结构。我已经测试了几乎所有内容，如果不编辑 XML，就无法对其进行反序列化。如果我不必定义一个包装类（TermData）来保存列表，这也会很方便，但这似乎只有在 xml 遵循序列化程序的命名约定（ArrayOfTerm 等）时才有效。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-06T22:03:40.003

也许你可以试试：

```
[XmlRoot("TERMS")]
public class TermData
{
    public TermData()
     {
       terms = new List<Term>();
     }

    [XmlElement("TERM")]
    public List<Term> terms{get;set;}
}

public class Term
{
    [XmlElement("ID")]
    public string id{get;set;}

    [XmlElement("DESC")]
    public string desc{get;set;}
} 
```

希望这会有所帮助，

# php - 正则表达式和解析总是重复同一个组

> ID：15258819
> 
> 赞同：-1
> 
> 时间：2013-03-06T21:53:09.040
> 
> 标签：php, regex, parsing

有人可以帮助我在 PHP 中构建一个正则表达式并解析以下字符串以实现单个模块。

一些字符串格式的例子： ( ) => group

1.  str1 = ( A && B ) || ( C || D ) && !( E || F )

    O/P 数组 = ( group1, || , group2, && , group3)

2.  str2 = !( A || B ) && ( C || D ) && ( E && F )

    O/P 数组 = ( group1, && , group2, && , group3)

3.  str3 = !( A || B )

    O/P 数组 = ( group1)

4.  str4 = ( A && B )

    O/P 数组 = ( group1)

5.  str5 = ( A || B )

    O/P 数组 = ( group1)

6.  str5 = ( A && B )

    O/P 数组 = ( group1)

简而言之，这些组可以是任何顺序，或者每个组内的数据没有限制。

第 1 组 : ( A && B && C &&......n )

第 2 组 : ( A || B || C ||......n )

第 3 组：!( A || B || C ||......n )

提前致谢。如果需要，我可以发布我现在拥有的东西吗？

到目前为止有效的答案：'/(!?\(.*?\))|\|\||&&/'

但是对于以下示例，它给了我一个错误，其中只有一组没有括号：

1.  str1 = A && B

    O/P 数组 = group1（无括号）其中 group 1 = A && B

2.  str2 = A || 乙 || C

    O/P 数组 = group1（无括号）其中 group 1 = A || 乙 || C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:41:57.180

我不清楚你为什么期待！要在您的示例 3 中删除。我将假设您实际上是指 O/P 数组，因为该数组是 group3。我可以建议您在将来显示示例输入的实际输出。无论如何，根据您提出的内容以及我的假设，这似乎可以满足您的要求：

```
preg_match_all('/(!?\\(.*?\\))|\\|\\||&&/', $str, $matches); 
```

`$str`您的输入格式在哪里。

# java - Java为什么每种颜色都有两个颜色值？

> ID：15258824
> 
> 赞同：3
> 
> 时间：2013-03-06T21:53:14.347
> 
> 标签：java

为什么 Java 的每种预设颜色都有两个 java.awt.Color 值？它有一个第一个字母大写，另一个全大写。我做了一个测试类，打印出颜色的两个值，看看它们是否不同。

```
import java.awt.Color;
public class test{
   public static void main(String[] args){
       System.out.println("white is: "+Color.white+" and WHITE is: "+Color.WHITE);
   }
} 
```

这打印出相同的结果。那么为什么java会有两个完全相同的值呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T21:54:42.543

小写常量与大写常量同义。记录一下，小写字母是错误的——编码约定要求常量名称必须全部大写，这从 Java 1.4 版本开始就已修复；奇怪的是，它们一直没有被标记为已弃用。我想它们只是出于向后兼容性的原因而保留在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:54:04.920

与旧版本的兼容性；大写字母是在 JDK 1.4 中引入的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T21:56:13.557

**white**
public static final Color white 白色
的颜色。在默认的 sRGB 空间中。

**WHITE**
public static final Color WHITE
颜色白色。在默认的 sRGB 空间中。
**自：1.4**

**所以唯一的区别是 WHITE 是在 1.4 版本的 jdk 中引入的，** 白色的存在只是为了支持旧系统兼容性
[http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html#白色的](http://docs.oracle.com/javase/6/docs/api/java/awt/Color.html#white)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:57:21.750

```
Color.white.equals(Color.WHITE); 
```

是真的。

# visual-studio - 合并 C# 程序集并创建一个 nuget 包

> ID：15258830
> 
> 赞同：1
> 
> 时间：2013-03-06T21:53:50.367
> 
> 标签：visual-studio, nuget, ilmerge

我有一个生成 DLL 的解决方案。拥有多个 DLL 是有充分理由的，而且我不能将所有 dll 项目合并为一个，因此我使用`ilmerge`生成单个 DLL 作为我的最终产品。这`ilmerge`是在后期构建中完成的。

我遇到的问题是我想`nuget`使用这个生成的 DLL 创建一个包。

通常，您可以在后期构建中使用它：

```
c:\NuGet.exe pack "$(ProjectPath)" -Symbols -OutputDir "\\Some Path\NuGet Packages" 
```

这将使用您的解决方案的目标来创建`nuget`包。当然，问题在于解决方案的目标不是我想要使用的目标。

我可以使用一个`nuspec`文件。问题是我想使用 DLL 的版本号作为`nuget`包的版本号。

所以，我的问题可以通过几种不同的方式解决：

1.  创建某种`MyPackage.dll`以目标为目标但不做任何事情的项目。
2.  以某种方式创建一个`nuspec`使用 DLL 文件的版本号作为`nuget`版本的文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:32:04.763

> > 以某种方式创建一个使用 DLL 文件的版本号作为 nuget 版本的 nuspec 文件。

$version$ 替换令牌可以是这里的用户更多详细信息[http://docs.nuget.org/docs/reference/nuspec-reference](http://docs.nuget.org/docs/reference/nuspec-reference)

# python-sphinx - 如何在 ReST 中处理两个破折号

> ID：15258831
> 
> 赞同：13
> 
> 时间：2013-03-06T21:53:55.873
> 
> 标签：python-sphinx, restructuredtext

我正在使用 Sphinx 来记录一个用 Python 编写的命令行实用程序。我希望能够记录一个命令行选项，例如`--region`：

```
**--region**  <region_name> 
```

在 ReST 中，然后使用 Sphinx 为我生成我的 HTML 和手册页。

这在生成手册页时效果很好，但在生成的 HTML 中，`--`变成了`-`不正确的。我发现如果我将源 ReST 文档更改为如下所示：

```
**---region**  <region_name> 
```

HTML 生成正确，但现在我的手册页有`---`而不是`--`. 也不正确。

我试过用反斜杠字符（例如`\-\-`）转义破折号，但这没有效果。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T05:44:46.453

这是 Sphinx 中默认启用的配置选项：`html_use_smartypants`选项 ( [http://sphinx-doc.org/config.html?highlight=dash#confval-html_use_smartypants](http://sphinx-doc.org/config.html?highlight=dash#confval-html_use_smartypants) )。

如果您关闭该选项，那么您必须使用 Unicode 字符 '–' 如果您想要一个破折号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-30T15:53:50.553

和

```
**-\\-region**  <region_name> 
```

它应该工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-15T08:32:33.263

在 Sphinx 1.6[`html_use_smartypants`中已弃用](http://www.sphinx-doc.org/en/stable/config.html#confval-html_use_smartypants)，不再需要`html_use_smartypants = False`在您的`conf.py`or 中设置`sphinx-build`. 相反，您应该使用`smart_quotes = False`.

如果您想使用以前由 提供的转换`html_use_smartypants`，建议使用[`smart_quotes`](http://docutils.sourceforge.net/docs/user/config.html#smart-quotes)，例如`smart_quotes = True`。

请注意，在撰写本文时 Read the Docs pins `sphinx==1.5.3`，它不支持该`smart_quotes`选项。在此之前，您需要继续使用`html_use_smartypants`.

**编辑**看来，Sphinx 现在使用[`smartquotes`](https://www.sphinx-doc.org/en/master/usage/configuration.html#confval-smartquotes)而不是 docutils [`smart_quotes`](http://docutils.sourceforge.net/docs/user/config.html#smart-quotes)。h/t @bad_coder。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-20T05:11:00.673

正如@mzjn 评论的那样，解决原始提交者需求的最佳方法是使用[Option Lists](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#option-lists)。

`-`格式很简单：以、或开头的一系列行`--`，后跟实际选项，（至少）两个空格，然后是选项的描述：`+``/`

```
-l     long listing
-r     reversed sorting
-t     sort by time
--all  do not ignore entries starting with . 
```

选项和描述之间的空格数可能因行而异，它至少需要两个，这样可以在源代码以及生成的文档上清晰地展示（如上）。

`<>`选项列表也具有选项参数的语法（只需在两个空格之前添加一个或几个单词）；有关详细信息，请参阅链接页面。

此页面上的其他答案针对原始提交者的问题，这个解决了他们的实际需求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-28T20:16:38.733

要添加两个破折号，请添加以下内容：

```
.. include:: <isotech.txt>

|minus|\ |minus|\ region 
```

注意反斜杠和空格。这样可以避免在减号和参数名称之间有空格。

`isotech.txt`每页只需要包含一次。

使用此解决方案，您可以保留扩展 smartypants 并在所需文本的每个部分写两个破折号。不仅在选项列表或文字中。

# ruby-on-rails-3 - 连接 i18n 字符串与 HAML 中的变量

> ID：15258832
> 
> 赞同：2
> 
> 时间：2013-03-06T21:53:59.093
> 
> 标签：ruby-on-rails-3, haml

这是我的代码

```
%ul.thumbnails
  %li.span3
    %header
      %h2
        = link_to t('homepage.house.link'), houses_path 
```

我有一个变量@country.name。如何将此变量添加/连接到 t('homepage.house.link')？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:59:30.030

我不确定它是如何`t()`工作的。关于什么：

```
= link_to t("homepage.house.link" + @country.name), houses_path 
```

如果您只想更改链接名称，您可以执行以下操作：

```
= link_to t("homepage.house.link") + @country.name, houses_path 
```

或字符串插值整行：

```
= link_to "#{t('homepage.house.link')} #{@country.name}", houses_path 
```

# f# - Collections.map 的对象列表

> ID：15258834
> 
> 赞同：13
> 
> 时间：2013-03-06T21:54:02.510
> 
> 标签：f#

给定一个列表有点像（简化）：

```
type foo(n:string,m:string,l:string) = 
    member f.name=n
    member f.val1=m
    member f.val2=l
let dates = [
    foo("a","aa","aaa")
    foo("b","bb","bbb")
] 
```

如何制作表单的不可变字典类型结构（例如，Map、IDictionary...任何其他？）`key:foo.name,value:foo`？

我最好的猜测是

```
let fooDict = for f in foo do yield f.name,f 
```

但是这种理解语法只能用于创建列表、数组或序列？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-06T22:12:17.153

创建一个不可变的字典（接口是可变的，但如果你尝试修改它会抛出异常）

```
[ for f in dates -> f.name,f ] |> dict 
```

或者

```
dates |> Seq.map (fun f -> f.name, f) |> dict 
```

要创建不可变地图：

```
[ for f in dates -> f.name,f ] |> Map.ofSeq 
```

或者

```
dates |> Seq.map (fun f -> f.name, f) |> Map.ofSeq 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T22:15:03.990

我最终得到了更冗长的（并且对管道一无所知）：

```
Map.ofList([for f in foo do yield (f.name,f)]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T22:01:30.777

查看该[`dict`](http://msdn.microsoft.com/en-us/library/ee353774.aspx)函数——它接受一系列键值元组并从中创建一个不可变字典。

使用与您提供的列表类似的列表，您可以使用它`Seq.map`来创建序列，然后将其通过管道传输到`dict`.

# jquery - 如何仅在 IE8 中运行 jQuery 代码

> ID：15258837
> 
> 赞同：-1
> 
> 时间：2013-03-06T21:54:09.807
> 
> 标签：jquery, internet-explorer-8, browser-detection

我的任务是把 jQuery 放到一个 webapp 中，它需要 Internet Explorer 8 浏览器特有的功能（不需要 7）。这个怎么做？

在 jQuery 1.8 中可以这样做：

```
if ($.browser.msie && $.browser.version == '8') { /* does not matter */ } 
```

在 1.9 版`$.browser`中被删除。推荐`$.support`的没有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T21:59:47.093

## 浏览器检测与特征检测

`$.browser`*出于某种原因*（从 1.3 开始） ，不推荐使用 jQuery 。不建议将其用于您想要使用它的东西。如果您依赖于某个功能，请测试该功能（这称为[功能检测](http://www.nczonline.net/blog/2009/12/29/feature-detection-is-not-browser-detection/)，`$.support`是执行此操作的一种方法），而不是测试特定浏览器。

## 有条件的评论

如果您确实需要针对旧 IE，请使用[条件注释](http://www.quirksmode.org/css/condcom.html)（当旧 IE 不再存在并且不会不必要地膨胀其他浏览器时，可以轻松删除）：

```
<!--[if IE 8]>
<script src="my_ie8_specific_stuff.js"></script>
<![endif]--> 
```

在里面`my_ie8_specific_stuff.js`你可以写任何你需要的东西，它只会在 IE8 上执行。

## `<html>`元素上的条件类

另一种方法是在标签上放置一个`<html>`带有条件注释的类：

```
<!--[if IE 8]>         <html class="ie8"> <![endif]-->
<!--[if gt IE 8]><!--> <html>         <!--<![endif]--> 
```

[这种巧妙而棘手的技术](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)将在 IE8 中添加一个`ie8`类，任何其他浏览器都无法获得它。`html`

您可以在 jQuery 中轻松地检查这一点：

```
var isIE8 = $('html').hasClass('ie8'); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-03-04T07:51:57.513

如果您碰巧在应用程序中使用了剑道，则无需添加任何内容。当您在不同的浏览器中时，会自动生成一个类。如果你想检查它是否是 ie8，你可以这样做：

```
if($('html').hasClass('k-ie8'))
    // do something 
```

# ruby-on-rails - 使用设备发送密码更改确认

> ID：15258838
> 
> 赞同：2
> 
> 时间：2013-03-06T21:54:16.697
> 
> 标签：ruby-on-rails, ruby, devise

我想将设计配置为在用户更改密码时发送确认电子邮件作为安全措施。如果可能的话，我更愿意重复使用我的设计邮件。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:06:37.843

未经测试，但我会尝试在您的`User`模型中通过一个简单的`after_update`回调来执行此操作：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable, :recoverable # whatever

  after_update :send_password_changed_notification

  # attr_accessible, validations, ...

  private

    def send_password_changed_notification
      # Send email with the mailer of your choice,
      # e. g. your existing custom Devise mailer:
      YourDeviseMailer.password_changed_notification(self).deliver if password_changed?
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:07:52.020

[我会配置更新用户操作，您可以在他们的文档](https://github.com/plataformatec/devise)中阅读如何执行此操作。检查设计如何在注册操作中处理新注册用户的确认，并在新的重置密码操作中重新使用该代码。

# oracle - ODI Oracle 接口

> ID：15258839
> 
> 赞同：0
> 
> 时间：2013-03-06T21:54:18.100
> 
> 标签：oracle, interface

我实际上正在开发一个数据仓库（ ODI ），其中包含多个包含这么多接口的场景，问题是某些接口在执行时与某些表相关，如何找到与场景中每个接口相关的表？以另一种方式：我有一个引用这么多表的界面，我需要能够选择这些表的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T04:06:36.437

ODI 中的接口提供了脚本的可视化/图解解释，显示了如何使用一个或多个源表（包含各种连接和过滤器）更新目标表（插入/删除/更新）。然后在ODI中，有一些包组成了几个接口，以有序的方式执行。然后有些场景只是每个包的可执行文件。当您在仓库中运行批处理时，这些场景将针对实际数据加载 (ETL) 过程执行。

因此，对于您的问题，您只能通过查看 ODI 中的界面来查看界面中正在使用哪些表。如果你想要一个场景的所有表，先找到那个场景的包，然后打开包找到接口，打开接口找到所有表，如果你想要ODI，恐怕只有这样.

另一方面这些接口和包实际上是后端的一些脚本文件，通过后端（在服务器）查看信息完全取决于您使用什么样的后端系统进行数据仓库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T10:14:32.963

ODI 项目和模型存储为 xml 文件，以便于源代码控制。可以使用[导出](https://docs.oracle.com/cd/E14571_01/integrate.1111/e12643/export_import.htm)功能从 ODI 工作室中生成这些文件。

生成这些文件后，要在系统之间迁移 ODI 代码，必须将文件导入到不同的 ODI 安装中。导入这些文件时，会解析 xml 信息并将其存储到 ODI Master 存储库中的相关表中。

[因此，如果您知道需要查找哪个SNP_% 表](http://sonra.io/wp-content/uploads/2012/09/RWhitepaper.pdf)，您甚至可以从 ODI 主存储库中找到您要查找的信息。如果那不是您的一杯茶，我建议您目视检查上述表格。

希望这可以帮助。

# javascript - 初始加载后，JQuery 无法在 iFrame 中找到元素

> ID：15258842
> 
> 赞同：0
> 
> 时间：2013-03-06T21:54:32.970
> 
> 标签：javascript, jquery, caching, iframe

我将页面特定的 html 加载到 iFrame 中，该 iFrame 包含我试图用 jquery 引用的对象。当页面最初加载时，会按预期找到元素，但是如果我转到新页面并返回或刷新页面，则在清除缓存并重新加载页面之前，不再始终如一地找到元素（失败的频率更高）。

我尝试了 querySelectorAll 和 getElementsByClassName 的不同组合，但它们只能在第一次时始终如一地工作。这似乎是一种竞争条件，但为什么它第一次会起作用？

这个问题对任何人来说都很熟悉吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:03:14.873

事实证明，这确实是一种竞争条件，其中动态元素尚不可用于参考。在我的例子中，iFrame 元素是使用 ExtJS 创建的，所以它需要这个额外的监听器，这样我就可以在加载后采取行动（把这个延迟放在 afterrender 来自另一个我需要找到并归功于的帖子）；

```
afterrender: function (cmp) {
   var element = cmp.getEl();
   element.on('load', function () {
       renderer.onIFrameReady();
   });
} 
```

# bash - 如果布尔条件为假，如何跳出循环

> ID：15258849
> 
> 赞同：0
> 
> 时间：2013-03-06T21:55:14.273
> 
> 标签：bash, if-statement, command-line, terminal, while-loop

嗨，伙计们，我要解决的问题是，即使您输入 no，while 循环在这两种情况下都可以工作，如果我输入 yes，第二个问题 echo 你想继续，它会在两种情况下都出现

```
echo would you like to provide  more numbers: 
read des

while [ "$des"=="yes" ];  do

    echo provide a number please:
    read num
    let x=3num+$num
    echo $x

    echo would you like to carry on 
    read new

    if [ "$new"=='no' ]; then
        break
    fi
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:08:02.393

要完成字符串比较，请添加空格：

代替

```
while [ "$des"=="yes" ];  do 
```

写

```
while [ "$des" == "yes" ];  do 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:57:12.400

尝试这个：

如果 [ "$new" == "否" ]; 然后

# php - PHP 用户名和密码验证检查

> ID：15258851
> 
> 赞同：1
> 
> 时间：2013-03-06T21:55:18.443
> 
> 标签：php, validation, login

我正在创建一个登录页面，在其中输入用户名和密码，然后检查数据库以查看它们是否匹配（我之前已经发布过，但我的代码完全不正确，所以我不得不重新开始）点击提交按钮，如果两个值匹配，用户应该被引导到主页 (index.php)，或者应该出现一条错误消息，说明“登录无效。请重试。” 非常简单的基本东西。然而，我无法让任何变化发挥作用。

这是我没有验证检查的代码。我相信这段代码是正确的，但如果不是，有人可以解释一下原因。我不是要求任何人编写任何代码，只是解释为什么它不能正常工作。

```
<?php

function Password($UserName)
{   

//database login
$dsn = 'mysql:host=XXX;dbname=XXX';
$username='*****';
$password='*****';
//variable for errors
$options = array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION);
//try to run code
try {
//object to open database
$db = new PDO($dsn,$username,$password, $options);
//check username against password
    $SQL = $db->prepare("Select USER_PASSWORD FROM user WHERE USER_NAME = :USER_NAME");
    $SQL->bindValue(':USER_NAME', $UserName);
    $SQL->execute();
    $username = $SQL->fetch();

    if($username === false)
        {
            $Password = null;
        }
    else
        {
            $Password = $username['USER_PASSWORD'];
        }

    return $Password;
    $SQL->closeCursor();
    $db = null;

    } catch(PDOException $e){
        $error_message = $e->getMessage();
        echo("<p>Database Error: $error_message</p>");
        exit();
    }
?> 
```

现在是验证码。我用谷歌搜索了这个并找到了数百种方法，但这种方法最符合我的编码风格。它是不完整的，我想要一些关于如何正确完成它以及将它放在上面代码中的位置的帮助。我的假设是在此评论之后：“//检查用户名与密码”。现在我已经看过这个版本两次了，在一个版本中检查的是 txtUserName 而另一个只是用户名。我相信在每个 if 语句之后应该有 else 语句，以将它们引导到 index.php 页面。此外，第三个 if 语句是检查密码是否与用户名匹配。我不明白这一点的变化。它们太复杂了。

```
function Login()
{     
if(empty($_POST['txtUserName']))     
{         
    $this->HandleError("UserName is empty!");         
    return false;     
}          
if(empty($_POST['txtPassword']))     
{         
    $this->HandleError("Password is empty!");
            return false;     
}           

$username = trim($_POST['txtUserName']);
    $password = trim($_POST['txtPassword']);           

if(!$this->($username,$password))     
{         
    return false;     
}           
} 
```

我知道我在这里问了很多。但我对 PHP 很陌生，并且非常努力地学习它。而且那里的信息太多了，其中大部分不适合初学者。任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:19:43.407

首先，假设我们有一个 PDO 连接，就像你已经做的那样，例如使用这个函数：

您可以执行以下操作：

```
// Usage:   $db = connectToDataBase($dbHost, $dbName, $dbUsername, $dbPassword);
// Pre:     $dbHost is the database hostname, 
//          $dbName is the name of the database itself,
//          $dbUsername is the username to access the database,
//          $dbPassword is the password for the user of the database.
// Post:    $db is an PDO connection to the database, based on the input parameters.
function connectToDataBase($dbHost, $dbName, $dbUsername, $dbPassword)
{
    try
    {
         return new PDO("mysql:host=$dbHost;dbname=$dbName;charset=UTF-8", $dbUsername, $dbPassword);
    }
    catch(Exception $PDOexception)
    {
        exit("<p>An error ocurred: Can't connect to database. </p><p>More preciesly: ". $PDOexception->getMessage(). "</p>");
    }
} 
```

这样您就可以拥有这样的数据库连接：

```
$host = 'localhost';
$user = 'root';
$dataBaseName = 'databaseName';
$pass = '';

$db = connectToDataBase($host, $databaseName, $user, $pass); 
```

到目前为止，我们拥有与您相同的东西。

现在，我假设我们在用户提交用户名和密码的 PHP 页面上，首先：检查我们是否真的收到了用户名和密码，使用三元运算符：

```
// receive parameters to log in with.
$userName = isset($_POST['userName']) ? $_POST['userName'] : false;
$password = isset($_POST['password']) ? $_POST['password'] : false; 
```

现在您可以验证这些输入是否已实际发布：

```
// Check if all required parameters are set and make sure
// that a user is not logged in already

if(isset($_SESSION['loggedIn']))
{
    // You don't want an already logged in user to try to log in.
    $alrLogged = "You're already logged in.";
    $_SESSION['warningMessage'] = $alrLogged;
    header("Location: ../index.php");
}
else if($userName && $password)
{
    // Verify an user by the email address and password
    // submitted to this page
    verifyUser($userName, $password, $db);
}
else if($userName && (!($password)))
{
    $noPass = "You didn't fill out your password.";
    $_SESSION['warningMessage'] = $noPass;
    header("Location: ../index.php");
}
else if((!$userName) && $password)
{
    $noUserName = "You didn't fill out your user name.";
    $_SESSION['warningMessage'] = $noUserName;
    header("Location: ../index.php");
}
else if((!$userName) && (!($password)))
{
    $neither = "You didn't fill out your user name nor did you fill out your password.";
    $_SESSION['warningMessage'] = $neither;
    header("Location: ../index.php");
}
else
{
    $unknownError = "An unknown error occurred.". NL. "Try again or <a href='../sites/contact.php' title='Contact us' target='_blank'>contact us</a>.";
    $_SESSION['warningMessage'] = $unknownError;
    header("Location: ../index.php");
} 
```

现在，让我们假设一切顺利，并且您已经在变量 $db 中存储了一个数据库连接，那么您可以使用该函数

```
verifyUser($userName, $password, $db); 
```

就像第一个 else if 语句中已经提到的那样：

```
// Usage:   verifyUser($userName, $password, $db);
// Pre:     $db has already been defined and is a reference
//          to a PDO connection.
//          $userName is of type string.
//          $password is of type string.
// Post:    $user exists and has been granted a session that declares
//          the fact that he is logged in.
function verifyUser($userName, $password, $db)
{
    $userExists = userExists($userName, $db); // Check if user exists with that username.
    if(!($user))
    {
        // User not found.
        // Create warning message.
        $notFound= "User not found.";
        $_SESSION['warningMessage'] = $notFound;
        header("Location: ../index.php");
    }
    else
    {
        // The user exists, here you can use your smart function which receives
        // the hash of the password of the user:
        $passwordHash = Password($UserName);
        // If you have PHPass, an awesome hashing library for PHP
        // http://www.openwall.com/phpass/
        // Then you can do this:
        $passwordMatch = PHPhassMatch($passwordHash , $password);
        // Or you can just create a basic functions which does the same;
        // Receive 1 parameter which is a hashed password, one which is not hashed,
        // so you hash the second one and check if the hashes match.

        if($passwordMatch)
        {
            // The user exists and he entered the correct password.
            $_SESSION['isLoggedIn'] = true;
            header("Location: ../index.php");
            // Whatever more you want to do.
        }
        else
        {
            // Password incorrect.
            // Create warning message.
            $wrongPass = "Username or password incorrect."; // Don't give to much info.
            $_SESSION['warningMessage'] = $wrongPass;
            header("Location: ../index.php");
        }
    }
} 
```

函数 userExists($userName, $db) 可以是：

```
function userExists($userName, $db)
{
    $stmt = $db->prepare("SELECT * FROM users WHERE USER_NAME = :USER_NAME;");
    $stmt->execute(array(":USER_NAME "=>$userName));
    $result = $stmt->fetch(PDO::FETCH_ASSOC);
    if($result)
    {
        // User exists.
        return true;
    }
    // User doesn't exist.
    return false;
} 
```

功能密码是这样的：

```
function Password($UserName)
{
    $stmt = $db->prepare("Select USER_PASSWORD FROM user WHERE USER_NAME = :USER_NAME;");
    $stmt->execute(array(":USER_NAME"=>UserName));
    $result = $stmt->fetch(PDO::FETCH_ASSOC);
    if($result)
    {
        return $result['USER_PASSWORD'];
    }
    // No result.
    return false;
} 
```

再一次，确保你没有匹配纯文本密码，或者基本的 shai1、md5 加密等。我真的建议你看看 PHPass。

我希望我清楚自己。

# forms - PDF 表单设计器

> ID：15258853
> 
> 赞同：2
> 
> 时间：2013-03-06T21:55:20.327
> 
> 标签：forms, pdf, designer

我正在尝试使用名为**PDF 表单设计**器的工具从 Java Web 应用程序创建 Java 报告，它从动态设计生成 pdf 文件，我想知道如何在浏览器上打开 pdf 并收集所有信息从表格的领域？有谁知道如何使用这个工具

# c# - 自动编号文本框中的每一行

> ID：15258861
> 
> 赞同：1
> 
> 时间：2013-03-06T21:55:47.913
> 
> 标签：c#, .net, regex

我想对用户放入文本框中的每一行进行自动编号，并将结果显示在另一个文本框中。

转这个
`blah blah blah`
`some stuff to be numbered`
`more stuff to number`

对此
`1 blah blah blah`
`2 some stuff to be numbered`
`3 more stuff to number`

到目前为止我有
`output.Text = Regex.Replace(input.Text, input.Text, @"{1,}+");`

但这是用`{1,}`
我似乎无法弄清楚如何在放置数字和空格后将每一行循环回来替换所有文本。
（我是 C# 新手）有
什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:58:51.910

为什么不只是`split`by `\r\n`，将 的每一行`string[]`与递增的数字和空格连接起来，然后`join`通过`\r\n`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:00:09.707

实现非正则表达式解决方案可能更简单：

```
var numberedLines = input.Text
    .Split(new string[] { "\r\n", "\n" }, StringSplitOptions.None)
    .Select ((line, index) => (index + 1) + " " + line)
    .ToArray();
var result = string.Join(Environment.NewLine, numberedLines);
output.Text = result; 
```

第一行用于`string.Split()`将围绕行返回的字符串拆分为一个数组。然后我使用 LINQ`.Select`方法对数组中的每个元素应用一个函数——在这种情况下，在每行的开头添加行号和空格（`index + 1`因为索引值是从 0 开始的，所以这是必要的）。然后我使用`string.Join`方法将数组重新组合成一个字符串。

演示：http: [//ideone.com/DrFTfl](http://ideone.com/DrFTfl)

* * *

`MatchEvaluator`如果您使用委托来应用行号，它实际上可以使用正则表达式完成：

```
var index = 1;
output.Text = Regex.Replace(input.Text, "^",
    (Match m) => (index++).ToString() + " ",
    RegexOptions.Multiline); 
```

该模式`^`通常匹配表达式的开头。但是，`RegexOptions.Multiline`它与每行的开头匹配。然后为了替换，我使用了一个委托（匿名函数），将`#`+ 空格添加到行的开头，然后为下一行增加索引计数器。

演示：http: [//ideone.com/9LD0ZY](http://ideone.com/9LD0ZY)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:00:54.880

如果您是 C# 新手，请让它尽可能简单。

从外观上看，您已经拥有了所有的字符串。所以归结为：

```
 // store all lines in a list
        // ...

        var list = new List<string> {"blah", "blah2", "and some more blah"};
        var list2 = new List<string>();
        var i = 1;
        foreach (var str in list)
        {
            list2.Add(string.Format("{0} {1}", i, str));
            i++;
        }

        // write contents of list2 back to wherever you want them visualized 
```

# fsm - 大型 DFA 示例？

> ID：15258862
> 
> 赞同：1
> 
> 时间：2013-03-06T21:55:50.287
> 
> 标签：fsm, dfa

我正在做一些关于 DFA 优化的研究，这需要几个带有输入的大型 DFA 示例。

我尝试编写一个 DFA 生成器，其结果将是人为的。

您是否有机会知道一些我可以参考的大型 DFA 或 FSM？

# xml - Magento 购物选项阻止主页上的 URL 只需刷新主页

> ID：15258868
> 
> 赞同：1
> 
> 时间：2013-03-06T21:56:10.373
> 
> 标签：xml, magento

我试图在我的主页左栏中获取“购物选项”块。当我将代码放在主页设计部分时，它会完美显示，但是当我单击任何内容（制造商、价格、类别）时，它只会刷新主页。它不会带我到正确的页面。

当我点击一个类别时它显示的 URL 是：example.com/?cat="CAT_ID"

我在我的 catalog.xml 中使用相同的代码，它似乎在那里工作正常。单击以优化类别时的 URL 是：example.com/category.html?cat="CAT_ID"

这是我在主页 CMS 和 catalog.xml 中使用的代码

```
<!-- SHOP OPTIONS LEFT -->
  <reference name="left">
<block type="catalog/navigation" name="catalog.cat.leftnav" after="currency" template="catalog/navigation/left.phtml"/>
<block type="catalog/layer_view" name="catalog.leftnav" after="catalog.cat.leftnav" template="catalog/layer/view.phtml"/>
<action method="unsetChild"><alias>right.reports.product.viewed</alias></action>
<action method="unsetChild"><alias>right.reports.product.compared</alias></action>
</reference>
<!-- END SHOP OPTIONS --> 
```

关于为什么当代码在主页上时它只是刷新的任何想法？

以下是左栏中“购物选项”的示例： ![在此处输入图像描述](../Images/ade95b9363acd29dc54f5bc2f90f18ad.png)

# python - Python IDLE 2.7 在我点击“enter”之前不会执行文件

> ID：15258872
> 
> 赞同：3
> 
> 时间：2013-03-06T21:56:15.390
> 
> 标签：python, python-idle

出于某种原因，当我选择“运行模块”时，IDLE 不会运行第一行代码，直到我按“回车”。对于这种类型的程序来说，这不是一个大问题，但我很困惑为什么会这样。谁能帮我解决这个问题？这是代码：

```
print("Please think a number between 0 and 100!")
guess = 50
upper = 100
lower = 0
status = ""
while status != "c":
    print("Is your secret number ") + str(guess) + ("?")
    print ("Lower: ") + str(lower)
    print ("Upper: ") + str(upper)
    status = raw_input("Enter 'h' to indicate the guess is too high. Enter 'l' to indicate     the guess is too low. Enter 'c' to indicate I guessed correctly. ")
    if status == "h":
        upper = guess
        guess = guess - (guess - lower)/2
    elif status == "l":
        lower = guess
        guess = guess + (upper - guess)/2
    elif status == "c":
        break
    else:
    print("Sorry, I did not understand your input.")
print("Game over. Your secret number was: ") + str(guess) 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:43:26.567

参见[http://anh.cs.luc.edu/python/hands-on/3.1/handsonHtml/execution.html](http://anh.cs.luc.edu/python/hands-on/3.1/handsonHtml/execution.html)（参见第 1.9.2 节）。如果先前的程序被中断，有时会发生此错误。

# java - 如何在调整大小时让 FlowLayout 重新定位组件。

> ID：15258877
> 
> 赞同：2
> 
> 时间：2013-03-06T21:56:33.203
> 
> 标签：java, swing, border-layout, flowlayout

我想在`FlowLayout`里面放 5 个标签`BorderLayout`作为北面板 ( `BorderLayout.NORTH`)，当我调整窗口/框架的大小时，我希望标签不会消失，而是移动到新行。

我一直在阅读有关 min、max 值和 preferredLayoutSize 方法的信息。但是他们似乎没有帮助，我仍然很困惑。

另外，我不想使用其他布局，例如包装器或其他东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T22:44:45.653

令人讨厌的事情之一`FlowLayout`是，当可用的水平空间很小时，它不会“包装”它的内容。

相反，看看[WrapLayout](http://tips4java.wordpress.com/2008/11/06/wrap-layout/)，它`FlowLayout`带有包装......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:08:47.883

以下代码完全符合您的要求。

该程序有一个框架，其 contentPane 设置为`BorderLayout`. 它包含另一个面板`flowPanel`，该面板具有流布局并添加到`BorderLayout.NORTH`.

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class PanelFun extends JFrame {
    final JPanel flowPanel;

    public PanelFun() {
        setPreferredSize(new Dimension(300,300));
        getContentPane().setLayout(new BorderLayout());
        flowPanel = new JPanel(new FlowLayout());
        addLabels();
        getContentPane().add(flowPanel, BorderLayout.NORTH);

        addComponentListener(new ComponentAdapter() {

            @Override
            public void componentResized(ComponentEvent e) {
                PanelFun.this.getContentPane().remove(flowPanel); //this statement is really optional.
                PanelFun.this.getContentPane().add(flowPanel);
            }
        });
    }

    void addLabels(){
        flowPanel.add(new JLabel("One"));
        flowPanel.add(new JLabel("Two"));
        flowPanel.add(new JLabel("Three"));
        flowPanel.add(new JLabel("Four"));
        flowPanel.add(new JLabel("Five"));
    }

    public static void main(String[] args) {
        final PanelFun frame = new PanelFun();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                frame.setVisible(true);

            }
        });
    }
} 
```

**那么它是怎样工作的？**

调整框架大小时使内部组件`flowPanel`重新对齐的关键是这段代码

`Swing`PS：如果您是新手并且不了解代码的某些部分，请告诉我。

```
addComponentListener(new ComponentAdapter() {

                @Override
                public void componentResized(ComponentEvent e) {
                    PanelFun.this.getContentPane().remove(flowPanel);
                    PanelFun.this.getContentPane().add(flowPanel);
                }
            }); 
```

如果没有此代码，`flowPanel`则不会重新对齐其组件，因为在调整包含框架的大小时重新定位组件不是其正常行为。

然而，当`flowPanel`被添加到面板时，它的行为也是根据可用空间定位组件。因此，如果我们在`flowPanel`每次调整框架大小时添加，内部元素将重新定位以使用可用空间。

**更新：**

`BorderLayout.CENTER`正如 camickr 正确指出的那样，如果您将任何内容添加到中心（ ），此方法将不起作用

# javascript - 模态在大屏幕上不起作用

> ID：15258878
> 
> 赞同：0
> 
> 时间：2013-03-06T21:56:36.333
> 
> 标签：javascript, jquery, css, twitter-bootstrap, modal-dialog

模态显示为小屏幕....但模态未显示为更大的屏幕....如何解决问题....在下面提供我的代码和小提琴

工作：http: [//jsfiddle.net/rajkumart08/KNPZB/6/](http://jsfiddle.net/rajkumart08/KNPZB/6/)

不工作：

[http://jsfiddle.net/rajkumart08/KNPZB/6/embedded/result/](http://jsfiddle.net/rajkumart08/KNPZB/6/embedded/result/)

```
<script type="text/javascript">
      $('#myModal').modal({ show: false })
    </script>

<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

    <div id="myModal" class="modal hide fade">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" >&times;</button>
        <h3>Modal header</h3>
      </div>
      <div class="modal-body">
        <p>One fine body…&lt;/p>
      </div>
      <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close</a>
        <a href="#" class="btn btn-primary" data-dismiss="modal">Save changes</a>
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:02:58.270

只去掉css的5614行

从：

```
.navbar
{
    height:86px;
    margin-bottom:0
} 
```

到

```
.navbar
{
    margin-bottom:0
} 
```

小： http: [//jsfiddle.net/KNPZB/7/](http://jsfiddle.net/KNPZB/7/) 大： http: [//fiddle.jshell.net/KNPZB/7/show/](http://fiddle.jshell.net/KNPZB/7/show/)

# javascript - 使用 javascript 搜索 2000 多条 xml 记录会锁定浏览器

> ID：15258881
> 
> 赞同：1
> 
> 时间：2013-03-06T21:56:54.917
> 
> 标签：javascript, xml

我的客户想要为他拥有的静态 xml 文件中的条目创建一个搜索表单，并且不想使用服务器端技术。他希望它只在浏览器中使用 javascript。我有什么工作，除了如果你搜索有很多匹配条目的东西，它会锁定浏览器一段时间。我怎样才能防止这种情况？这是我所拥有的：

```
$(function(){
    var root, searchEvent = setTimeout(function(){}, 0);
    $.get('allitems.xml', function(xml){
        root = $(xml);
    });

    $('#search-field').on('keyup', function(e){
        clearTimeout(searchEvent);
        searchEvent = setTimeout($.proxy(function(){search($(this).val());}, this), 500);
    });

    function search(q){
        var results = 0;
        $('#searchResults').empty();

        root.find('Beskrivning').each(function(i, el){
            /*if(results > 9)
                return false;*/
            el = $(el);
            if(el.text().toLowerCase().indexOf(q) != -1){
                addToResults(el.parent());
                results++;
            }
        });
    }
    function addToResults(node){
        var div = $('<a>').attr(
                'href', 
                'http://www.pn-trading.se/Objekt/tabid/125/' +
                    (node.find('ID').text()) +
                    '/123055/auktion/' +
                    (node.find('paplatsnamn').text()) +
                    '/Default.aspx?tabselect=' +
                    (node.find('paplatsnamn').text())
            )
            .attr('target', '_blank')
            .addClass('sr-item')
            .append(
                $('<div>').addClass('sr-item-image').append(
                    $('<img>').attr(
                        'src', 
                        'http://www.pn-trading.se/Portals/0/' +
                            (node.find('katalog').text()) +
                            '/' + (node.find('bildnr').text()) + '-200.jpg'
                    )
                ),
                $('<div>').addClass('sr-item-details').append($('<div>').html(node.find('Beskrivning').text()))
            );
        $('#searchResults').append(div);
    }
}); 
```

它的工作原理是我抓取并缓存 xml 文件，然后在某个`keyup`事件中搜索 xml 文件。有关使性能更好的任何提示？我知道在搜索甚至分页之前我可能需要至少 2-3 个字符，但如果可能的话，我宁愿远离这些选项。

此外，它需要适用于所有标准浏览器，包括 >= IE7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:00:24.850

您可以进行“增量”搜索，将其与计时器分开。这样您的浏览器就不会冻结。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:24:32.667

`<button>search</button>`在文本框旁边添加一个，仅在单击它时搜索，而不是在每次按键释放时搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T05:51:35.680

一件事是，您在循环中使用了很多 .find() ，这本身并没有那么好。您可以编写一个小的 jQuery 插件来显着改善这一点。

[http://jsperf.com/node-vs-double-select/3](http://jsperf.com/node-vs-double-select/3)

另一件事是，您可以即时将 xml 转换为 json，将其存储在局部变量中并通过它进行搜索。阅读页面，了解他们如何在 studentlitteratur.se 上处理相同的问题

[http://www.thomasfrank.se/xml_to_json.html](http://www.thomasfrank.se/xml_to_json.html)

您可以选择一个插件，允许您指定哪些节点包含在转换中，哪些不包含。

然后为了进一步优化它，您可以使用 Modernizr 来检测 WebWorker 支持并将作业传递给 Web Worker。但前提是浏览器支持它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T06:02:30.323

我只能通过在每次按键后重置一个计时器来解决这个问题，这会在一段时间后延迟搜索，比如 200-300 毫秒。一旦用户停止输入片刻，搜索就会执行。

# ssh - ssh 到硬件的脚本

> ID：15258884
> 
> 赞同：0
> 
> 时间：2013-03-06T21:57:00.930
> 
> 标签：ssh, switch-statement

有一个我想自动化的开关。该脚本将使用适当的凭据（管理员/管理员）SSH 进入交换机并对其进行配置并注销。然后它会做 X 件事。然后它会再次登录并以不同的方式配置它来做 Y 件事。X 和 Y 很简单，不会造成任何问题。

请在这里帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:00:09.943

[这](http://www.debianadmin.com/sshpass-non-interactive-ssh-password-authentication.html)是一个工具，可以让你做我认为你想做的事。

它允许您通过命令行而不是交互方式向 ssh 提供密码。

# mysql - 默认mysql选择顺序

> ID：15258886
> 
> 赞同：1
> 
> 时间：2013-03-06T21:57:07.247
> 
> 标签：mysql

我已经更改了几行的 ID 字段。现在“SELECT * FROM table”以原始顺序返回我的行。

例子：

```
ID NAME
1 JOSJ
12 Matt
3 Tom 
```

默认情况下，如何让它们以正确的顺序显示？我不是在谈论一个简单的“ORDER BY”，尽管它可能很简单。表格需要以某种方式重新排列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:58:18.367

表中的默认顺序就是这样，默认的。如果它们出现故障，您的数据库不会感到困惑。您可以使用 将它们插入到新表中`ORDER BY`，但这比仅`ORDER BY`在查询中添加

```
SELECT *
FROM table
ORDER BY ID 
```

您可以使用下面的命令来更改排序，但是在一个`INSERT`or之后`DELETE`排序将被更改回它们被插入的顺序

```
ALTER TABLE tablename ORDER BY columnname ASC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:01:04.590

SQL 不保证任何默认排序。例如，符合标准的 SQL 实现可以在返回之前对所有行进行随机排序。

底线是，**如果您想要某种顺序 - 在查询中指定它。**这就是你所能要求的。

# mysql - MySQL root 密码被重置

> ID：15258888
> 
> 赞同：2
> 
> 时间：2013-03-06T21:57:15.493
> 
> 标签：mysql, passwords, root, reset

我最近购买了一台远程服务器作为数据库服务器。供应商预装了 MySQL 服务器 5.1.68。我通过登录mysql并发出来更改了root密码-

```
UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root';
FLUSH PRIVILEGES; 
```

更改密码后，我退出并能够使用新密码再次登录。

但是，我注意到每天左右之后我的root密码都被取消了。我的意思是我可以通过直接发出来访问 mysql 服务器 -

```
$>mysql -u root 
```

我曾多次尝试重置密码，但它一次又一次地超时。不知道我在这里错过了什么。

谢谢

**更多信息：**

```
mysql> SELECT User,Host FROM mysql.user;
+----------------+--------------------+
| User           | Host               |
+----------------+--------------------+
| root           | 127.0.0.1          |
| fsl            | 128.104.xxx.xx     |
| fsl            | 128.104.xxx.xx     |
| rvadmin_public | 67.228.xxx.xx      |
| cphulkd        | localhost          |
| cpldap         | localhost          |
| datahandler    | localhost          |
| eximstats      | localhost          |
| horde          | localhost          |
| leechprotect   | localhost          |
| logaholic      | localhost          |
| root           | localhost          |
| roundcube      | localhost          |
| rvadmin        | localhost          |
| rvadmin_public | localhost          |
| root           | xxx.xxxxx.com      |
| rvadmin_public | xxx.xxxxx.com      |
+----------------+--------------------+ 
```

我已从最后两个条目中删除了域名。

# python - 是否有对 mySQL 具有空间支持的 python 库？

> ID：15258892
> 
> 赞同：3
> 
> 时间：2013-03-06T21:57:27.107
> 
> 标签：python, mysql, spatial

是否可以将 sqlsoup 或其他一些 python MySQL 库与 MySql 的几何、点、多边形等任何空间类型一起使用？如果是这样，有人可以展示如何使用所述 python 库执行 SELECT 并从多边形中提取点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:00:48.777

我不知道有一个包既可以查询 MySQL 又可以处理空间数据，但是[MySQL 支持](http://dev.mysql.com/doc/refman/5.0/en/supported-spatial-data-formats.html)[众所周知的文本](http://en.wikipedia.org/wiki/Well-known_text)和众所周知[的二进制](http://en.wikipedia.org/wiki/Well-known_text#Well-known_binary)空间数据格式（这将允许您存储点、线、多边形等）。

您需要使用[MySQLdb](http://mysql-python.sourceforge.net/MySQLdb.html)对您的 MySQL 进行查询，使用SQL 语句获取数据（[此处的示例](http://dev.mysql.com/doc/refman/5.0/en/fetching-spatial-data.html)）。如果你想要的只是组成一个多边形的点，你可以做一些简单的字符串操作来构造一个点数组：

```
input = "POLYGON ((30 10, 10 20, 20 40, 40 40, 30 10))"

def polygon_to_points(polygon):
  geometry = polygon[10:-2]
  coordinates = geometry.split(', ')
  coord_pairs = []
  for c in coordinates:
    pair = c.split(' ')
    pair_num = [float(pair[0]), float(pair[1])]
    coord_pairs.append(pair_num)
  return coord_pairs 
```

这`[[30.0,10.0],[10.0,20.0],[20.0,40.0],[40.0,40.0],[30.0,10.0]]`将按预期返回。如果您想做一些更复杂的空间查询/分析，请查看[Shapely](https://pypi.python.org/pypi/Shapely)包。

# java - 将 GUI 连接到后端

> ID：15258894
> 
> 赞同：0
> 
> 时间：2013-03-06T21:57:31.577
> 
> 标签：java

我正在尝试将我的 GUI 连接到后端，但有些部分无法正常工作，而另一些则有错误。

1：这是通过按保存按钮来保存新客户。cb.closeBroker(); 用于释放分配给broker的资源并保存所有修改过的数据。

```
if( e.getSource() == saveButton ) {
   try {
      cb.persist(
         new Customer(
            idTextField.getText()+";"+firstNameTextField.getText()+ ";" +
            lastNameTextField.getText()+";"+ addressTextField.getText()+';'+
            postalCodeTextField.getText()+";"+phoneTextField.getText()+";"+
            searchTextField.getText()));
   } catch (InvalidPhoneNumberException e1) {
      JOptionPane.showMessageDialog(null, "Invalid phone number");
   } catch (InvalidPostalCodeException e1){
      JOptionPane.showConfirmDialog(null, "Invalid Postal Code");
   }
   cb.closeBroker();
} 
```

2：我尝试对另一个添加电影但不起作用的窗口执行相同操作，据说“构造函数 Movie(String) 未定义”

而且我需要添加另一个异常，但是当我尝试捕获时它给了我一个错误；

```
if( e.getSource() == saveButton ) {
   mb.persist(
      new Movie(
         movieIdTextField.getText()+";"+movieTitleTextField.getText()+ ";" +
         movieDirectorTextField.getText()+";"+movieLeadingTextField.getText()+';'+
         movieCategoryTextField.getText()+";"+movieRunningTextField.getText()+";"+
         movieRunningTextField.getText()+ ";"+movieRatingTextField.getText()+";"+
         movieReleaseTextField.getText()));
   mb.closeBroker();
} 
```

注意：我只需要将它连接到后端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:04:03.463

在类 Movie 中定义一个带有 String 参数的构造函数...

```
Movie( String arg ) {
   ...
} 
```

# javascript - 从多个 this.render() 在 Ember.js 中抛出“进入”警告

> ID：15258895
> 
> 赞同：5
> 
> 时间：2013-03-06T21:57:35.970
> 
> 标签：javascript, templates, ember.js, render

我已经搜索过这个问题的答案，但找不到。我正在开发的 ember 应用程序引发控制台错误：

```
WARNING: The immediate parent route did not render into the main outlet and the default 'into' option may not be expected 
```

我确实发现了这个建议修复：[https](https://github.com/emberjs/ember.js/pull/1838) ://github.com/emberjs/ember.js/pull/1838但不确定如何实现它。

我们应用程序中导致这种情况的代码位来自路由 renderTemplate 函数：

```
 renderTemplate: function(controller, model) {

        this.render({outlet: 'page'});
        this.render('stageSidebar', {outlet: 'stage_sidebar'});

    } 
```

麻烦来自在 renderTemplate 函数中调用“this.render”超过 1X。

一切都正确渲染，所有数据都在填充，但是这些错误让我在控制台中发疯，我想知道是否有人遇到过这个问题或在上面的链接中有更多关于修复的信息？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T12:51:27.653

尝试：

`this.render('<template name>', {outlet: 'page', into: '<parent template name>'});`

# forms - 表单焦点在颜色框中丢失

> ID：15258896
> 
> 赞同：1
> 
> 时间：2013-03-06T21:57:37.530
> 
> 标签：forms, focus, colorbox

我的 Drupal 网站有问题。我正在使用 Colorbox 加载订阅表单，但表单焦点丢失。示例可在[http://luchshieceni.ru/](http://luchshieceni.ru/)

```
window.jQuery(document).ready(function($) {
$('.colorbox5').colorbox({open:true, inline:true, href:'div#content5'});
}); 
```

这是表格

```
<form class="sr-box" method="post" action="https://smartresponder.ru/subscribe.html" target="_blank" name="SR_form_63724_75">    
<input type="text" name="field_name_first" class="form-txt" value="Ваше имя" onfocus="value='';">
<input type="text" name="field_email" class="form-txt" value="Ваша электронная почта" onfocus="value='';">
<input type="submit" value="Подписаться" name="subscribe" id="" class="sub-btn">                    
        </form> 
```

你能帮帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-30T08:32:07.830

I had the same problem. I followed your advice on Drupal forum (double post of the same question), and yes, it fixed my problem as well. I had:

```
$(popup).colorbox({rel:'nofollow', preloading:false, open:true, inline:true, href:popup, scalePhotos:false, iframe:true, arrowKey:false, transition:"none", slideshow:false }); 
```

Fixed it with:

```
$.colorbox({rel:'nofollow', preloading:false, open:true, inline:true, href:popup, scalePhotos:false, iframe:true, arrowKey:false, transition:"none", slideshow:false }); 
```

The jquery selector CAN'T be the same as a href.

This is very obscure, and not documented anywhere. And causes major problems. So I hope it helps someone.

# ios - 在后台模式下获取电池电量

> ID：15258897
> 
> 赞同：1
> 
> 时间：2013-03-06T21:57:41.760
> 
> 标签：ios, ios6

我们想构建一个应用程序，将监控我们拥有的每台设备的电池作为后台活动，并每小时将该信息上传到服务器。通过这种方式，我们将能够知道何时需要为设备充电。

我不确定如何在应用程序处于后台时获取此信息。如果它不活跃，我似乎没有收到通知。这可能吗？如果有任何帮助，这是我的代码。

```
[[UIDevice currentDevice] setBatteryMonitoringEnabled:YES];
// Request to be notified when battery charge or state changes
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryStatus) name:UIDeviceBatteryLevelDidChangeNotification object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryStatus) name:UIDeviceBatteryStateDidChangeNotification object:nil];

- (void)batteryStatus
{
    NSArray *batteryStatus = [NSArray arrayWithObjects:
                          @"Battery status is unknown.",
                          @"Battery is in use (discharging).",
                          @"Battery is charging.",
                          @"Battery is fully charged.", nil];

//    if ([[UIApplication sharedApplication] applicationState] == UIApplicationStateBackground)
//        [self notifyServer];
// do something. this is never called when in background.
    if ([[UIDevice currentDevice] batteryState] == UIDeviceBatteryStateUnknown)
    {
        [textViewStatus setText:[batteryStatus objectAtIndex:0]];
        NSLog(@"%@", [batteryStatus objectAtIndex:0]);
    }
    else
    {
        NSString *msg = [NSString stringWithFormat:
                     @"Battery charge level: %0.2f%%\n%@", [[UIDevice currentDevice] batteryLevel] * 100,
                     [batteryStatus objectAtIndex:[[UIDevice currentDevice] batteryState]] ];

        [textViewStatus setText:msg];  
        NSLog(@"%@", msg);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T14:21:51.150

如果您只是为自己的设备执行此操作并且不打算将应用程序放在应用程序商店中，您可以研究设置`voip`后台模式，然后继续注册后台任务。据我所知，使用`voip`或`audio`后台模式的应用程序可以在后台执行几乎任何他们想做的事情，并且不会在 10 分钟后终止。

进一步的文档可以在这里找到：http: [//developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:21:49.317

很抱歉告诉您，此类后台服务是不允许的，因此在未越狱的 iOS 设备上是不可能的。

# c# - 如何检查一个点是否包含在其他 4 个点之间？

> ID：15258900
> 
> 赞同：2
> 
> 时间：2013-03-06T21:57:50.857
> 
> 标签：c#, winforms, geometry, area

我有 4 个点可以创建一些四边形，我想知道第五个点是否在它们之间。像这些图像：

![在此处输入图像描述](../Images/57f7ad5136e07b9e216ac9fb516d7474.png)

![在此处输入图像描述](../Images/b21b8c3a056cadd448b1f52ba467a76a.png)

第五个点在哪里并不重要，我需要知道第五个点是否在其他 4 个点创建的区域内。

4个点也可以移动。我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T01:11:12.307

您可以使用**GraphicsPath**类。

```
Point p1 = new Point(1,0);
Point p2 = new Point(10, 3);
Point p3 = new Point(9, 13);
Point p4 = new Point(3,2);
Point p = new Point(5,5);
GraphicsPath g = new GraphicsPath();
g.AddPolygon(new Point[] { p1, p2, p3, p4 });
var result = g.IsVisible(p); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:36:26.973

如果您有这些点的坐标，请尝试获得创建四边形的点的线性方程。我会用三角形的点来解释它。假设我们在外面有 3 个点：

```
A(-1,-1)
B(0,2)
C(1,1) 
```

和一个里面：

```
D(0,0) 
```

您可以找到外部点的线性方程：

```
AB -> y = 3x + 2
BC -> y = -x + 2
CA -> y = x 
```

然后你计算 x=0 的 y（因为点 D 有 x=0）并且你知道 D 低于 AB，低于 BC 但它在 CA（如果它高于 CA，它将在三角形 ABC 内）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T14:06:19.333

```
public class PolygonFence
{
    public List<Point> PointList = new List<Point>();

    public PolygonFence(List<Point> points)
    {
        foreach (Point p in points)
        {
            this.PointList.Add(p);
        }
    }

    public int Count()
    {
        return PointList.Count;
    }

    public bool IsWithinFence(Point p)
    {
        int sides = this.Count();
        int j = sides - 1;
        bool pointStatus = false;
        for (int i = 0; i < sides; i++)
        {
            if (PointList[i].Y < p.Y && PointList[j].Y >= p.Y || PointList[j].Y < p.Y && PointList[i].Y >= p.Y)
            {
                if (PointList[i].X + (p.Y - PointList[i].Y) / (PointList[j].Y - PointList[i].Y) * (PointList[j].X - PointList[i].X) < p.X)
                {
                    pointStatus = !pointStatus;
                }
            }
            j = i;
        }
        return pointStatus;
    }
} 
```

将点添加到`PointList`并调用该`IsWithinFence()`方法。 `Point p`是您要检查它是否在多边形内的点。关于运动的部分，你必须自己弄清楚！

# algorithm - 将数字平均分配到组中的最佳策略

> ID：15258908
> 
> 赞同：2
> 
> 时间：2013-03-06T21:58:42.593
> 
> 标签：algorithm, branch, load-balancing

您有两个整数列表 A={1,3,60,24} 和 B={14,54,3}，顺序和列表长度未确定。将 A 中的数字放入 B 中的最佳策略是什么，以便 B 中结果的方差尽可能平衡。如果没有可用空间，您不必将 A 中的所有数字都放入 B。但是如果有可用空间，您必须输入数字

我正在考虑应用分支定界，但是，我不确定如何找到修剪条件，例如计算子问题的方差（未完全填充）来判断要剪切哪个分支？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:04:08.920

您描述的问题是分区问题（[http://en.wikipedia.org/wiki/Partition_problem](http://en.wikipedia.org/wiki/Partition_problem)）。找到最佳解决方案是 NP 完全的，但是对于大多数情况，有许多近似值几乎是完美的。

事实上，你描述的算法是操场上的孩子们挑选球队的方式。如果集合中的数字具有相似的数量级，则该贪心算法的性能非常好。当然，这不是最好的解决方案，但考虑到问题是 NP 完全的，它的简单性真是太棒了。

American Scientist 上的这篇文章对这个问题进行了很好的分析，你应该仔细阅读它：最简单的难题（[http://www.americanscientist.org/issues/pub/2002/3/the-easiest-hard-问题](http://www.americanscientist.org/issues/pub/2002/3/the-easiest-hard-problem)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T07:27:55.757

从 C[i]=A[i]-B[i] 的 A 和 B 之间的差异创建列表 c。然后你应该找到它们之和接近于零的所有元素。就像这个[问题](https://stackoverflow.com/questions/15175066/given-n-absolute-values-of-integers-find-the-combination-of-n-2-negative-and-n-2/15175585#15175585)一样。但在这个问题中你有一个负数。你必须找到一个子集，它们的总和接近于零。我认为这是一个 NP 完全问题。

# maven - 在 Intellij Idea 中单击即可根据另一个 WEB 应用程序运行 WEB 应用程序

> ID：15258909
> 
> 赞同：0
> 
> 时间：2013-03-06T21:58:46.043
> 
> 标签：maven, web-applications, intellij-idea

我有一个基于 Maven 的项目，它有模块 A 和 B，都打包为 WAR，并且只通过 REST 接口进行交互。

模块 B 本质上是 GWT 应用程序，模块 A 是普通的 REST 应用程序。所以我可以在 Intellij IDEA 中将 B 作为常规 GWT 应用程序运行。但目前尚不清楚如何在应用程序 B*之前*运行应用程序 A。

我可以在 IDEA 中创建 2 个运行配置并运行应用程序 A，然后运行应用程序 B，但这很难看。那么是否可以在运行应用程序 B 之前启动应用程序 A 作为依赖项？当 B 停止时 - 那么 A 也停止了吗？

# iphone - iOS Facebook SDK - 获取朋友的电子邮件

> ID：15258910
> 
> 赞同：1
> 
> 时间：2013-03-06T21:58:46.850
> 
> 标签：iphone, ios, facebook, facebook-graph-api, ios5

我正在开发一个 iPhone 应用程序，如果他们已经授予我的应用程序访问他们的电子邮件的权限，我希望能够列出连接到我的应用程序并访问他们的电子邮件的用户朋友。

这是我用来打开 Facebook 会话的代码：

```
 - (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {

     NSArray *permissions = [[NSArray alloc] initWithObjects:
                    @"email",
                    nil];

    return [FBSession openActiveSessionWithReadPermissions:permissions
                                      allowLoginUI:allowLoginUI
                                 completionHandler:^(FBSession *session,
                                                     FBSessionState state,
                                                     NSError *error) {
                                     [self sessionStateChanged:session
                                                         state:state
                                                         error:error];
                                 }];
} 
```

此外，在 ViewController.m 中，我使用以下代码列出朋友并获取他们的电子邮件：

```
 NSString *query =
         [NSString stringWithFormat:@"SELECT name, uid, pic_small, birthday,proxied_email, contact_email , email FROM user WHERE is_app_user = 1 and uid IN (SELECT uid2 FROM friend where uid1 = %@) order by concat(first_name,last_name) asc", my_fb_uid ];

        // Set up the query parameter
       NSDictionary *queryParam =
      [NSDictionary dictionaryWithObjectsAndKeys:query, @"q", nil];
       // Make the API request that uses FQL

    [FBRequestConnection startWithGraphPath:@"/fql"
                         parameters:queryParam
                         HTTPMethod:@"GET"
                  completionHandler:^(FBRequestConnection *connection,
                                      id result,
                                      NSError *error) {
                      if (error) {
                          NSLog(@"Error: %@", [error localizedDescription]);
                      } else {
                          NSLog(@"Result: %@", result);
                      }
                  }]; 
```

问题是返回的电子邮件始终为空，即使对于安装了我的应用程序并授权它访问他们的电子邮件的朋友也是如此。

对此有何建议？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-06T23:53:14.387

从[文档](https://developers.facebook.com/docs/reference/login/email-permissions/)中：

```
Note: There is no way for apps to obtain email addresses for a user's friends. 
```

该`email`权限仅适用于已登录用户

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T00:55:52.713

您应该做的是，当用户授予他们 Facebook 帐户的访问权限时，您应该存储他们的 FB 用户 ID。然后在尝试查找用户的朋友时，拉取用户的 FB 朋友的请求（[http://developers.facebook.com/docs/reference/ios/3.2/class/FBRequest#requestForMyFriends](http://developers.facebook.com/docs/reference/ios/3.2/class/FBRequest#requestForMyFriends)）并比较返回的 ID。这是做你想做的事情的正确方法。

# mysql - 有效地删除 Mysql 表中除前 n 行之外的所有行

> ID：15258914
> 
> 赞同：3
> 
> 时间：2013-03-06T21:58:57.207
> 
> 标签：mysql

我有一个包含大约 10000 个条目的大型高流量表，我需要一个命令来清除除顶部（**最高 ids**）n 个条目之外的所有条目。

我想要这样的东西，但它导致了语法错误：

```
ALTER TABLE table 
PARTITION BY RANGE(id)(
PARTITION p0 VALUES LESS THAN (MAX(id)-n),
PARTITION p1 VALUES LESS THAN (MAXVALUE));
ALTER TABLE table DROP PARTITION p0; 
```

唯一的问题是我需要清除除最高值之外的所有值，并且堆叠分区不起作用。此外，调度程序不适合我正在做的事情。如何有效地删除 Mysql 表中除 n 最高 id 行之外的所有行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:24:23.387

如果您想有效地执行此操作，请将行复制到另一个表中，截断原始表，然后将行重新插入。

```
create temporary table tosave as
    (select *
     from mytable
     order by id desc
     limit n
    );

truncate table mytable;

insert into mytable
    select * from tosave 
```

`truncate`效率更高，因为它不记录删除（如此处[所述](http://dev.mysql.com/doc/refman/5.5/en/truncate-table.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:32:02.130

你可以使用这样的东西：

```
DELETE
FROM ids
WHERE id NOT IN (select * from (select id from ids order by id desc limit 2) s) 
```

请[在此处](http://sqlfiddle.com/#!2/f827a/1)查看小提琴。

或者这个：

```
DELETE ids.*
FROM
  ids LEFT JOIN (select id from ids order by id desc limit 2) s
  ON ids.id = s.id
WHERE s.id is null 
```

[在这里](http://sqlfiddle.com/#!2/36784/1)拉小提琴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:05:55.297

我会这样做：

```
delete from `table`
where `key` not in (select `key` from `table` order by <...> limit n,100000) 
```

# ruby - Sinatra，发送一个空白页面

> ID：15258916
> 
> 赞同：0
> 
> 时间：2013-03-06T21:59:03.277
> 
> 标签：ruby, sinatra

这是我的代码在路由块中的结尾。发生的事情是 success_loader 从不渲染，而是 Sinatra 发送空响应（页面为空白）

```
if v.test
  mydata = v.sheetData
end
if v.errors.size == 0
  #success
  haml :success_loader, :layout => :base, 
       :locals => {:pub_path => settings.root, :app_ver => settings.version }
else
  #fail
  haml :failure_loader, :layout => :base, 
       :locals => {:pub_path => settings.root, :app_ver => settings.version, 
       :app_error => v.errors }
end 
File.delete(target) if File.exists?(target) 
```

使用调试器，我显示从对 haml 的调用开始的点开始的每一行

```
haml :success_loader, :layout => :base, 
     :locals => {:pub_path => settings.root, :app_ver => settings.version }
getter = proc { value }

value = :pub_path

getter = proc { value }

value = :apper_ver

File.delete(target) if File.exists?(target)
@params = @original_params
filter! :after unless env['sinatra.static_file']
res = [res] if Fixnum === res or String === res
if Array === res and Fixnum === res.first
status(res.shift)
body(res.pop)
headers(*res)
invoke { error_block!(response.status) }
unless @response['Content-Type' 
```

一堆更多类似的行。然后从 Thin 开始的几行：

```
log "!! Rack application returned nil body. Probably you wanted it to be an empty string?" if @response.body.nil? 
```

我在路由之外测试了代码，所以它不会抛出任何异常。当在其他路线中使用时，haml 模板可以正常工作。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:11:29.647

主体将是路由块中评估的最后一个东西。最后一件事是：

```
File.delete(target) if File.exists?(target) 
```

[File.delete](http://www.ruby-doc.org/core-2.0/File.html#method-c-delete)的文档告诉我们：

> 删除命名文件，返回作为参数传递的名称数。

所以我猜那`target`不存在或曾经是`nil`，这会使该陈述评估为零。

如果要在结束之前设置正文，请使用[正文助手](http://www.sinatrarb.com/intro#Setting%20Body,%20Status%20Code%20and%20Headers)：

```
body = if v.errors.size == 0
  #success
  haml :success_loader, :layout => :base, 
       :locals => {:pub_path => settings.root, :app_ver => settings.version }
else
  #fail
  haml :failure_loader, :layout => :base, 
       :locals => {:pub_path => settings.root, :app_ver => settings.version, 
       :app_error => v.errors }
end 
File.delete(target) if File.exists?(target) 
```

但这可以重构为：

```
template = v.errors.size == 0 ? :success_loader : :failure_loader
File.delete(target) if File.exists?(target)
haml template, :layout => :base, 
               :locals => {
                 :pub_path => settings.root,
                 :app_ver => settings.version, 
                 :app_error => v.errors
               }.delete_if{|k,v| v.nil?} 
```

# asp.net - response.redirect 和 response.end

> ID：15258918
> 
> 赞同：0
> 
> 时间：2013-03-06T21:59:11.707
> 
> 标签：asp.net, httpresponse

我有一些代码可以创建一个 Excel 表格，然后提示用户将其保存在某处，并将其附加到电子邮件中并将其发送到某处。当我有 Response.end() 时一切正常，但我想删除它以重定向到新页面。当我删除它并用 response.redirect 替换它时，它不会提示用户保存它。任何想法为什么这不再提示保存？

创建/保存Excel工作表的代码

```
 Protected Sub ExportToExcel(sender As Object, e As EventArgs, ByVal strPath As String)
    Response.ClearContent()

    Response.AddHeader("content-disposition", "attachment; filename=GridViewToExcel.xls")

    Response.ContentType = "application/excel"

    Dim sWriter As New StringWriter()

    Dim hTextWriter As New HtmlTextWriter(sWriter)

    Dim hForm As New HtmlForm()

    Panel1.Parent.Controls.Add(hForm)

    hForm.Attributes("runat") = "server"

    hForm.Controls.Add(Panel1)

    hForm.RenderControl(hTextWriter)

    ' Write below code to add cell border to empty cells in Excel file
    ' If we don't add this line then empty cells will be shown as blank white space

    Dim sBuilder As New StringBuilder()

    sBuilder.Append("<html xmlns:v=""urn:schemas-microsoft-com:vml"" xmlns:o=""urn:schemas-microsoft-com:office:office"" xmlns:x=""urn:schemas-microsoft-com:office:excel"" xmlns=""http://www.w3.org/TR/REC-html40""> <head><meta http-equiv=""Content-Type"" content=""text/html;charset=windows-1252""><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>ExportToExcel</x:Name><x:WorksheetOptions><x:Panes></x:Panes></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head> <body>")
    sBuilder.Append(Convert.ToString(sWriter) & "</body></html>")

    Response.Write(sBuilder.ToString())

    Dim fStream As FileStream = File.Create(strPath)
    fStream.Close()
    Dim Writer As New StreamWriter(strPath)
    Writer.Write(sBuilder)
    Writer.Flush()
    Writer.Close()
End Sub 
```

最后运行重定向的代码

```
Response.Redirect("~/Default.aspx") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:03:23.200

您正在做的是发送保存提示的响应，并发送重定向响应。您只能在一个响应中发送一个或另一个。

相反，您可以做的是在新选项卡/窗口中打开您正在下载的页面，然后将调用页面重定向到`~/Default.aspx`.

# ajax - jQuery ajax html回调中的换行导致错误

> ID：15258924
> 
> 赞同：6
> 
> 时间：2013-03-06T21:59:35.133
> 
> 标签：ajax, jquery

`$.ajax`我从通话中返回了一大块 HTML 。来自 PHP 的字符串在开头有两个换行符，例如

```
$data = "

<div>
     <p>Here is some text</p>
</div>"; 
```

这是`$.ajax`电话：

```
$('form#form_id').submit(function(e){
    e.preventDefault();
    $form = $(this);
    $.ajax({
        url: $form.attr('action'),
        type: $form.attr('method'),
        data: $form.serialize(),
        dataType: 'html',
        success: function(data) {
            var $html = $($.parseHTML(data));
            $html.appendTo('#container_id').hide().fadeIn(300);
        }
    });
}); 
```

一切正常，直到我添加`.hide().fadeIn(300)`它抛出的点：`TypeError: 'undefined' is not an object (evaluating 'hooks.cur = fn') jquery.js:1925`。如果我删除换行符，它会起作用。我正在使用，`$.parseHTML`因为 jQuery 说：

> 如果已知字符串是 HTML，但可能以非 HTML 标记的任意文本开头，则将其传递给 jQuery.parseHTML()，它将返回代表标记的 DOM 节点数组。可以由此创建一个 jQuery 集合，例如：$($.parseHTML(htmlString))。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T22:20:11.190

该问题似乎是由集合中的文本节点引起的，您可以将其过滤掉`.filter('*')`

```
var $html = $($.parseHTML(data)).filter('*'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T16:01:09.117

我的 HTML 字符串没有任何顶级文本节点，或者我认为......我发现问题只是额外的空格。这对我有用，感觉比以后过滤掉空节点要好：

```
$($.parseHTML($.trim(html_string))) 
```

# c - 使用 Eclipse 在 C 中使用 malloc() 和其他函数

> ID：15258926
> 
> 赞同：1
> 
> 时间：2013-03-06T21:59:38.007
> 
> 标签：c, eclipse, eclipse-plugin, eclipse-cdt

这是我第一次使用 Eclipse 编写 C 代码，所以答案可能很简单。我还认为 Eclipse 已经设置为可以适当地编译、构建和链接。这是在 Windows 7 64 位机器上运行的。

在我的 C 代码中，似乎每当我使用`malloc()`or`printf()`函数时，它都会在其下方放置红色波浪线。只是函数带有下划线，而不是转换甚至参数。

这是代码行：

```
#include <stdlib.h>
#include <stdio.h>

int* list; //This is a global variable

int main(){

    //...inside a function
    list = (int*) malloc( sizeof(int) ); // Out of this line, only the word "malloc" is underlined in red.
    printf(""); //printf also gives me an error

    return 0;
} 
```

当我将鼠标悬停在错误上时，它会显示以下内容：

> 无法解析函数“malloc”。

我用对了`malloc()`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:47:01.227

你没有提供足够的信息。您需要提供一个完整的程序，包括`malloc`无法编译的程序，无论多么小。您还需要给出您得到的编译器错误，以及问题是仅与标准库函数有关`malloc`还是所有标准库函数。

猜测一下，您的编译器软件没有正确安装并且找不到`stdlib.h`.

正如您现在添加的那样，没有标准库函数可以工作，您的编译器设置肯定存在问题（这与 无关`malloc`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:55:22.930

根据 clang 和 cc 编译器，您的代码没问题，它可以在 Eclipse Juno 中编译：

```
Building target: code
Invoking: GCC C Linker
gcc  -o "code"  ./code.o   
Finished building target: code 
```

我想你可以看看这个问题

[Eclipse CDT 用于 C 标准库头文件的“未解决的包含”错误](https://stackoverflow.com/questions/9337757/unresolved-inclusion-stdio-h)

如果你想要一个完整的解决方案。

# android - 在 Eclipse 上调试时无法使用 F5 进入功能

> ID：15258935
> 
> 赞同：5
> 
> 时间：2013-03-06T21:59:59.957
> 
> 标签：android, eclipse, multithreading, debugging, step-into

有时（大约 50% 的时间），在调试 Android 应用程序时，为了进入一个函数，我使用 F5（F6 用于遍历它）但它什么也没做

有时，常规调试键都不起作用（F5、F6、F7、F8，也许其他我也不知道）。

目前，克服这个问题的唯一方法是从“调试”视图（显示每个线程的当前堆栈）中选择当前线程，然后按 F5 。当情况更糟时（例如，无法使用内容辅助），我重新启动 eclipse。

说到线程，我注意到如果我有多个线程正在运行，有时当我试图走得更远时，它会转到另一个线程，这很烦人，因为我失去了对当前线程的注意力。我知道这确实有些道理，但它真的很烦人，尤其是如果我考虑到有多个线程。

为什么会发生这些事情，我该如何解决？

注意：我有 Eclipse、ADT 和 Android SDK 的最新版本。该问题出现在设备和模拟器上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T06:03:07.213

您无法控制线程的执行模式，因为它们不按顺序运行，但调试器可以。

我在后台运行的线程和异步操作中遇到了类似的问题。

我如何管理它：

*   我所做的是在没有线程的情况下运行相同的代码，并在确认后将其放入线程中
*   `android.os.Debug.waitForDebugger();`在你的线程中使用。它会自动将您带到那里并强制调试器在此处停止。从那里开始，您可以继续进行调试。

**预防措施**

在启动应用程序之前不要忘记注释此行，否则会导致无休止的等待，因为它也会在真实设备中进入调试模式。

此外，这不是 Eclipse 的错，纯粹是因为线程的性质，因为它开始在自己的环境中执行。Visual Studio 的行为与线程相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T22:09:14.503

您可能会尝试重新设置您的视角（以防万一您移动了某些东西而不想要）。

这可以通过以下方式在 Debug 透视图中完成：

1.  右键单击 Debug Perspective（Eclipse 的右上角“区域”）并选择“ `Reset`”

2.  切换到调试透视图并单击菜单`Window->Reset Perspective...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T06:42:37.200

> 有时，常规调试键都不起作用（F5、F6、F7、F8，也许其他我也不知道）。

~~这些键都不能在调试视图以外的视图中工作。这是设计使然。~~

> 当情况更糟时（例如，无法使用内容辅助），我重新启动 eclipse。

您的 Eclipse 安装有问题或键盘有问题。在阅读了您的其他评论后，我对此持肯定态度。我有插件弄乱了我的 Eclipse 安装，并且可以与此相关。在尝试使用快捷方式之前，请确保您的 Eclipse 代码窗口具有焦点。这也可能导致问题。如果所有其他方法都失败，请尝试移至另一个版本的 eclipse 以尝试隔离问题。

我有一段时间的 Eclipse 有这个奇怪的错误，当我按下退格键时，它会删除同一行先前打开的文件中的字符。这太可怕了，我不得不重新安装并转移到另一个版本的 eclipse（我不记得以前的版本是什么）。可能你的情况类似。

> 说到线程，我注意到如果我有多个线程正在运行，有时当我试图走得更远时，它会转到另一个线程，这很烦人，因为我失去了对当前线程的注意力。

我知道痛苦。不幸的是，没有办法绕过它。Eclipse 在挂起线程时不考虑断点的优先级。看看这个相关的问题 - [How to deprioritize Java testrunner in Eclipse breakpoints?](https://stackoverflow.com/questions/15682036/eclipse-debugging-multithreaded-breakpoint-priority) . 如果您可以设置[条件断点](http://wiki.eclipse.org/FAQ_How_do_I_set_a_conditional_breakpoint?)以防止调试器移动到另一个线程，那将有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T09:10:01.250

我找到了一个很好的线程，它解释了如何在 Eclipse 中使用 Step Filters 进行调试。该线程可以在[这里](http://www.onkarjoshi.com/blog/163/debug-with-step-filters-in-eclipse/)找到。由于显然这是 eclipse 中的一个问题，并且越来越多的人遇到它，所以这是目前的解决方法：

> 您可以通过配置“Step Filter”来配置 Eclipse Java 调试器，使其不单步执行这些代码。
> 
> 1.  转到 Windows -> 首选项 -> Java -> 调试 -> 步骤过滤。
> 2.  选中“使用步骤过滤器”。
> 3.  检查屏幕上的相应选项。您可以添加与您自己的代码库相关的部分。
> 4.  点击“应用”。

看看这是否对您有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-20T15:42:37.863

在我的情况下，键被分配做与 android studio 无关的事情，例如增加音量，所以我重新配置文件/设置/键盘映射以重新配置什么键做什么。

# bash - 如何删除变量中的字符串

> ID：15258938
> 
> 赞同：0
> 
> 时间：2013-03-06T22:00:09.163
> 
> 标签：bash

美好的一天如何删除 bash 中最后一个斜杠中的所有变量。

```
#!/bin/bash
VAR="/foo/bar/abcd ef gh" 
```

我需要删除：**abcd ef gh**

路径 /foo/bar/ 总是不同的

寻求简短的符号;-)谢谢你..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:02:45.370

如果你的 $VAR 总是一个目录/文件的路径，你可以使用这个：

```
$ VAR=$(dirname "$VAR")
$ echo $VAR
/foo/bar 
```

更新：您还可以在 bash 中使用参数替换：

```
$ echo ${VAR%/*}
/foo/bar 
```

# ruby - 如何从数组制作数组的Ruby散列

> ID：15258939
> 
> 赞同：1
> 
> 时间：2013-03-06T22:00:09.083
> 
> 标签：ruby, multidimensional-array, hashmap, ruby-datamapper

我是一名尝试学习 Ruby 的 Perl 开发人员……所以，我将在 Perl 中演示我在 Ruby 中尝试完成的工作，然后在最后进行总结……

```
#!/usr/bin/perl -w

use strict;
use Data::Dumper;

# Given the following data structure (an array of hashes)
my $j  = [ 
            {   
                id   => 1,
                key1 => 'name1',
                key2 => 'data',
                key3 => 'data',
                key4 => 'foo',
            },  
            {   
                id   => 2,
                key1 => 'name1',
                key2 => 'data',
                key3 => 'data',
                key4 => 'bar',
            },  
            {   
                id   => 3,
                key1 => 'name2',
                key2 => 'data',
                key3 => 'data',
                key4 => 'baz',
            },  
        ];  

print ~~@$j,"\n";
print Dumper($j)."\n";

my $myHash; # make it a reference to a hoa.

for my $array ( @{$j} )
{
   # the key to my new key-name is always known
    push(@{$myHash->{$array->{key1}}},$array->{key4});
}

print Dumper($myHash)."\n"; 
```

和输出：

初始数组：

```
$VAR1 = [
          {
            'key2' => 'data',
            'key4' => 'foo',
            'key1' => 'name1',
            'id' => 1,
            'key3' => 'data'
          },
          {
            'key2' => 'data',
            'key4' => 'bar',
            'key1' => 'name1',
            'id' => 2,
            'key3' => 'data'
          },
          {
            'key2' => 'data',
            'key4' => 'baz',
            'key1' => 'name2',
            'id' => 3,
            'key3' => 'data'
          }
        ]; 
```

我想要得到什么：

```
$VAR1 = {
          'name2' => [
                       'baz'
                     ],
          'name1' => [
                       'foo',
                       'bar'
                     ]
        }; 
```

...而且我试图用尽可能简洁的代码来完成它，由于我缺乏 Ruby 的优点，这已被证明是一种痛苦。我已经尝试了多次尝试，包括多次尝试 map 类似于我在 Perl 中使用的相同代码结构，但无济于事。

也就是说，我确实找到了以下代码片段，刚才，它几乎可以工作，但我确定我做错了什么......

```
h = Hash[j.collect {|array| [array.key1,array.key4] }] 
```

这让我得到了正确的哈希键，但它不会将 key4 值推送到哈希数组中。仍在寻找，但在正确的方向上轻推一些将不胜感激。如果我在这里得到答案之前找到了答案，我会回答这个问题以启发未来的读者。

编辑！我需要澄清一些我刚刚发现的东西，可能是我时钟上的扳手。我得到的数据不是纯数组。它实际上是来自 DataMapper 的一个对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T22:26:14.240

您正在按操作执行分组。[`Enumerable#group_by`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-group_by)生成一个散列，其键是块中的值，其值是具有该键的所有初始元素的数组。

然后，您可以使用[`Enumerable#each_with_object`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_object)这些键创建一个新的哈希，但值会减少到您想要的 key4 元素。

```
a = [
  { id: 1, key1: 'name1', key2: 'data', key3: 'data', key4: 'foo', },
  { id: 2, key1: 'name1', key2: 'data', key3: 'data', key4: 'bar', },
  { id: 3, key1: 'name2', key2: 'data', key3: 'data', key4: 'baz',  },
]

res = a.group_by { |e| e[:key1] }.
        each_with_object({}) { |(k,v),m| m[k] = v.map{|e| e[:key4]}  }

puts res.inspect
# => {"name1"=>["foo", "bar"], "name2"=>["baz"]} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:46:03.037

当您从“给定以下数据结构（哈希数组）”开始时，您已经在考虑 Perl。在惯用的 Ruby 中，它将是一个对象数组。事实上，这是数据库调用等的典型输出。示例类：

```
class Item
  attr_accessor :id, :name, :data, :foo
end 
```

如果您有一系列此类项目，您的答案可能如下所示：

```
items.group_by(&:name) 
```

这当然更干净，更具表现力。

请注意，以上内容并未为您提供所需的确切数据结构。到处乱扔数据结构是一种反模式。您要求的输出肯定是一个中间结构，它将完全用于其他用途（在视图中打印输出；序列化以进行存储等）。因此，我认为没有必要。您可以使用分组的对象列表来做您需要的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:31:59.457

这是一个单线器。假设 'ar' 绑定到您的数组。分配 r={} 然后：

```
ar.map { |a| { a[:key1] => a[:key4] }}.each { |m| m.each { |key,val| r[key] = if not r[key] then [val] else r[key].push(val) end } 
```

结果在 r 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:39:00.503

其他方式：

```
Hash[j.chunk {|e| e['key1'] }.map {|k, ary| [k, ary.map {|x| x['key4'] }] }]
=> {"name1"=>["foo", "bar"], "name2"=>["baz"]} 
```

但我认为迄今为止我最喜欢 dbenhur 的回答。

# sql - 必须有一些索引方案才能使这项工作

> ID：15258943
> 
> 赞同：0
> 
> 时间：2013-03-06T22:00:17.520
> 
> 标签：sql, sqlite, query-optimization, database-indexes

Sqlite 有一个限制，即每次查询只能使用一个索引。这个限制目前正在困扰我，但我需要 Sqlite，因为我不知道任何其他可以竞争插入速度的本地数据库引擎（尽管我愿意接受建议）。

我有一个包含一百万到一千万行的简单表（以及其他表）：

```
CREATE TABLE [Events] (
  [Id] INTEGER PRIMARY KEY, 
  [TelemetryId] INTEGER NOT NULL, 
  [TimestampTicks] INTEGER NOT NULL, 
  [Value] TEXT NOT NULL) 
```

查看我的数据，我有大约 2000 个唯一 TelemetryId 值和每个唯一 TelemetryId 大约 25000 行。我一直在使用这个索引：

```
CREATE INDEX [IX_Events_TimestampTicks_TelemetryId] 
  ON [Events] ([TimestampTicks], [TelemetryId]) 
```

但是，该索引在我没有传入 TimestampTicks 约束的查询中失败（显然）。该索引是在我尝试了 TimestampTicks 和 TelemetryId 上的单个索引之后。根据我的测试，甚至在运行之后`ANALYZE`，Sqlite 只会在引用 TelemetryId 时使用索引——这在我限制为时间戳范围的查询中是错误的。如果我颠倒组合索引中列的顺序，以前快速的查询就会变慢。

这是我的查询的完整列表。你能看到一个适用于所有这些的索引方案吗？

```
INSERT INTO Events (TelemetryId, TimestampTicks, Value) 
  VALUES(@TelemetryId, @TimestampTicks, @Value); SELECT last_insert_rowid()

SELECT * FROM Events e 
  INNER JOIN Telemetry ss ON ss.Id = e.TelemetryId 
  INNER JOIN Services s ON s.Id = ss.ServiceId 
  WHERE s.AssetId = @AssetId AND e.TimestampTicks >= @StartTime 
  ORDER BY e.TimestampTicks LIMIT 10000

SELECT * FROM Events e 
  WHERE e.TimestampTicks >= @StartTime 
  ORDER BY e.TimestampTicks LIMIT 10000

SELECT * FROM Events 
  WHERE TelemetryId = @TelemetryId AND TimestampTicks <= @TimestampTicks 
  ORDER BY TimestampTicks DESC LIMIT 1

SELECT MIN(TimestampTicks) FROM Events
SELECT MAX(TimestampTicks) FROM Events
SELECT COUNT(*) FROM Events

SELECT TimestampTicks, [Value] FROM Events 
  WHERE TelemetryId = @TelemetryId

SELECT Id FROM Events 
  WHERE TelemetryId = @TelemetryId LIMIT 2

SELECT MIN(e.TimestampTicks) FROM Events e 
  INNER JOIN Telemetry ss ON ss.ID = e.TelemetryID 
  INNER JOIN Services s ON s.ID = ss.ServiceID 
  WHERE s.AssetID = @AssetId

SELECT MAX(e.TimestampTicks) FROM Events e 
  INNER JOIN Telemetry ss ON ss.ID = e.TelemetryID 
  INNER JOIN Services s ON s.ID = ss.ServiceID 
  WHERE s.AssetID = @AssetId

SELECT * FROM Events 
  WHERE TimestampTicks <= @TimestampTicks AND TelemetryId = @TelemetryId 
  ORDER BY TimestampTicks DESC LIMIT 1

SELECT e.Id, e.TelemetryId, e.TimestampTicks, e.Value 
  FROM (SELECT e2.Id AS [Id], MIN(e2.TimestampTicks) as [TimestampTicks]
        FROM Events e2 WHERE e2.TimestampTicks 
            BETWEEN @Min AND @Max AND e2.TelemetryId in @TelemetryIds                                          
            GROUP BY e2.TelemetryId) AS grp
  INNER JOIN Events e ON grp.Id = e.Id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:44:02.070

没有人阻止您创建多个索引 - 每个索引都可以帮助执行某些查询。

如果我是你，我会创建至少以下两个索引：

```
CREATE INDEX events_1_ix ON Events(TimestampTicks,TelemetryId); 
```

（您一直在使用的），以及

```
CREATE INDEX events_2_ix ON Events(TelemetryId); 
```

SQLite 可以在以下情况下使用这些索引：

1.  搜索何时提供`TimestampTicks`和`TelemetryId`提供（第一个索引）
2.  `TimestampTicks`仅在提供时搜索（也是第一个索引）
3.  `TelemetryId`仅在提供时搜索（第二个索引）

如果您只为`TimestampTicks`and创建单独的索引`TelemetryId`，这将使选项 2 和 3 保持快速，但选项 1 将变得不可用。

您可以根据需要创建任意数量的索引，但请记住，索引维护不是免费的。首先，它会占用更多磁盘空间——索引占用表大小的 10%-30% 并不少见。因此，如果您创建太多索引，它们的总大小可能会超过可用表的大小。此外，当有许多索引时，插入或更新速度可能会比没有它们时慢得多。

**关于 SQLite每个查询**只能使用一个索引的原始声明- 这不太正确。

**正确的说法是 SQLite在给定查询中每个表**只能使用一个索引。如果您的 SQL 连接了多个表，则每个表都可以使用能够提供最佳性能的索引来访问该表。

# javascript - 无法使用 requirejs 加载 javascript 库

> ID：15258945
> 
> 赞同：2
> 
> 时间：2013-03-06T22:00:37.373
> 
> 标签：javascript, requirejs

无论超时设置如何，我都会收到以下错误：

> Uncaught ReferenceError: ko is not defined knockout.activity.js:381 Uncaught Error: Load timeout for modules: knockout [http://requirejs.org/docs/errors.html#timeout](http://requirejs.org/docs/errors.html#timeout)

```
var require = {
    baseUrl: "/app1/script",

    paths: {
        jquery: "lib/jquery/jquery-1.8.3",
        knockout: "lib/knockout/knockout-2.2.0",
        activity: "lib/knockout/knockout.activity"
    },

    shim: {
        "activity": {
            deps: [
                "jquery",
                "knockout"
            ],
            exports: "ko"
        } 
    }
}; 
```

在我的视图模型中：

```
define([
    "jquery",
    "knockout",
    "activity",
],

function ($, ko) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:33:29.637

将活动导出为 jQuery.fn.activity。

如果您查看 knockout.activity.js 的源代码，它期望 ko 被定义为 KnockoutJS 对象。但是你通过将 knockout.activity.js 定义为 ko 打破了这一点。

看看这个：[http ://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T15:22:46.693

在您的要求中将名称从 knockout 更改为 ko

```
define([
    "jquery",
    "ko",
    "activity",
],

function ($, ko) { 
```

ko 是根命名空间而不是“淘汰赛”。

# java - WordNet Java API

> ID：15258950
> 
> 赞同：13
> 
> 时间：2013-03-06T22:00:48.630
> 
> 标签：java, api, wordnet

我不得不为 WordNet 使用 Java API，这将是一个大的实现。我正在寻找但遇到很多；

1.  JWordNet( [http://sourceforge.net/projects/jwordnet/](http://sourceforge.net/projects/jwordnet/) )
2.  麻省理工学院 Java WordNet 接口 ( [http://projects.csail.mit.edu/jwi/](http://projects.csail.mit.edu/jwi/) )
3.  RiTa WordNet（[http://rednoise.org/rita/wordnet/documentation/index.htm](http://rednoise.org/rita/wordnet/documentation/index.htm)）

我能得到一些关于哪个更好的建议吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-25T04:02:44.097

你可以参考这篇文章[Java Libraries for Accessing the PrincetonWordnet: Comparison and Evaluation](http://projects.csail.mit.edu/jwi/download.php?f=finlayson.2014.procgwc.7.x.pdf)比较了 12 个 Java 库来访问 WordNet。它比较了它们的性能和其他功能。

# android - iOS 和 Android 中的 WebView 中的总缓存大小是多少？

> ID：15258951
> 
> 赞同：2
> 
> 时间：2013-03-06T22:00:51.300
> 
> 标签：android, ios, uiwebview, webview, android-webview

WebView的缓存大小有限制吗？iOS和Android webviews有区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:38:25.197

那么在 IOS5 Safari 浏览器缓存大小限制为 100MB。这不是持久缓存。如果您使用主页按钮关闭 web 视图，它将减少到零。

对于 IOS 设备上的 chrome 浏览器，缓存约为 200MB，并且是持久的。Android 4.1 有大约 85MB 的缓存并且是持久的，android 上的 chrome 也有 85MB 的持久缓存。

使用 localStorage，所有设备上的缓存都非常有限，最大约为 2.5MB。并且在 android 上使用 sessionStorage 是无限的。Android chrome 大约 2.5MB。Firefox .unlimited，在 IOS 上也是最大 2.5MB。你可以[在这里测试它](http://dev-test.nemikor.com/web-storage/support-test/)。

如果您谈论 HTML5 应用程序缓存 (AppCache)，Chrome mobile for android 几乎是无限的。Safari IOS 有大约 4-10MB 的 appCache。但是如果用户接受它，[正式](http://dev.w3.org/html5/webstorage/)它可以是无限的。[金融时报](http://apps.ft.com/ftwebapp/)移动网站就是一个很好的例子。

另一种方法是使用 HTML5 数据库存储，[例如](https://stackoverflow.com/questions/4777968/i-need-a-client-side-browser-database-what-are-my-options?lq=1)IndexDB 等。但[更受支持](http://www.html5rocks.com/en/features/storage)的存储 DB 是 web SQL 数据库。

# r - R文本挖掘-如何将R数据框列中的文本更改为具有词频的几列？

> ID：15258954
> 
> 赞同：2
> 
> 时间：2013-03-06T22:01:00.987
> 
> 标签：r, text-mining, tm

我有一个 4 列的数据框。第 1 列由 ID 组成，第 2 列由文本组成（每个约 100 个单词），第 3 列和第 4 列由标签组成。

现在我想从文本列中检索词频（最常见的词），并将这些频率作为额外的列添加到数据框中。我希望列名是单词本身，并且在文本中用它们的频率（范围从 0 到每个文本）填充的列。

我尝试了 tm 包的一些功能，但直到现在还不能令人满意。有谁知道如何处理这个问题或从哪里开始？有没有可以完成这项工作的软件包？

```
id  texts   label1    label2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T00:42:12.293

那么让我们解决这些问题......

我猜你有一个看起来像这样的data.frame：

```
 person sex adult                                 state code
1         sam   m     0         Computer is fun. Not too fun.   K1
2        greg   m     0               No it's not, it's dumb.   K2
3     teacher   m     1                    What should we do?   K3
4         sam   m     0                  You liar, it stinks!   K4
5        greg   m     0               I am telling the truth!   K5
6       sally   f     0                How can we be certain?   K6
7        greg   m     0                      There is no way.   K7
8         sam   m     0                       I distrust you.   K8
9       sally   f     0           What are you talking about?   K9
10 researcher   f     1         Shall we move on?  Good then.  K10
11       greg   m     0 I'm hungry.  Let's eat.  You already?  K11 
```

该数据集来自 qdap 包。让 qdap 使用`install.packages("qdap")`。

`DATA`现在，为了使我在您的数据集上讨论的可重现示例，使用来自 qdap的数据集执行我在此处所做的事情。

```
DATA
dput(head(DATA)) 
```

现在好了，对于你原来的问题，我认为`wfm`会做你想做的事：

```
freqs <- t(wfm(DATA$state, 1:nrow(DATA)))
data.frame(DATA, freqs, check.names = FALSE) 
```

如果您只想要顶部这么多的单词，请使用我在这里使用的排序技术：

```
freqs <- t(wfm(DATA$state, 1:nrow(DATA)))
ords <- rev(sort(colSums(freqs)))[1:9]      #top 9 words
top9 <- freqs[, names(ords)]                #grab those columns from freqs  
data.frame(DATA, top9, check.names = FALSE) #put it together 
```

结果如下所示：

```
> data.frame(DATA, top9, check.names = FALSE)
       person sex adult                                 state code you we what not no it's is i fun
1         sam   m     0         Computer is fun. Not too fun.   K1   0  0    0   1  0    0  1 0   2
2        greg   m     0               No it's not, it's dumb.   K2   0  0    0   1  1    2  0 0   0
3     teacher   m     1                    What should we do?   K3   0  1    1   0  0    0  0 0   0
4         sam   m     0                  You liar, it stinks!   K4   1  0    0   0  0    0  0 0   0
5        greg   m     0               I am telling the truth!   K5   0  0    0   0  0    0  0 1   0
6       sally   f     0                How can we be certain?   K6   0  1    0   0  0    0  0 0   0
7        greg   m     0                      There is no way.   K7   0  0    0   0  1    0  1 0   0
8         sam   m     0                       I distrust you.   K8   1  0    0   0  0    0  0 1   0
9       sally   f     0           What are you talking about?   K9   1  0    1   0  0    0  0 0   0
10 researcher   f     1         Shall we move on?  Good then.  K10   0  1    0   0  0    0  0 0   0
11       greg   m     0 I'm hungry.  Let's eat.  You already?  K11   1  0    0   0  0    0  0 0   0 
```

# javascript - 替换内容 在 jQuery 中

> ID：15258960
> 
> 赞同：-1
> 
> 时间：2013-03-06T22:01:14.343
> 
> 标签：javascript, jquery, html, replace

这是一个 jQuery 函数，它应该根据单击的 td 的类累积一个名为 p1 或 p2 的变量。然后它应该将其附加到段落中`cheap`并`premium`取决于类。写入类的函数在底部，尽管我觉得这可能是不正确的，因为段落中的变量可能不会与变量同时更新。此外，底部功能实际上并没有做任何事情。

```
$(document).ready(function () {
   $('td img').click(function () {
     if ($(this).parent().hasClass('x')) {
     alert("Seat " + ($(this).parent().attr("id")) + " is taken");
        } else if ($(this).parent().hasClass('selected')){
     $(this).attr('src', 'images/a.gif');
     $(this).parent().removeClass('selected');
 var z = $(this).parent().attr('id');
 $('#'+z+'1').remove();
     return false;
    } else {
        if ($(this).parent().hasClass('n')){
    p1=p1+1;                
    } else if ($(this).parent().hasClass('p')){
    p2=p2+1;
    }
$(this).attr('src', 'images/c.gif');
    $(this).parent().addClass('selected');
    alert($(this).parent().attr("class"));
var z = $(this).parent().attr('id');
$('<p>').attr('id', z+'1' ).text(z).appendTo('#order');
    return false;
       };
    });
  });

$(document).ready(function(){
$(p1' Standard seats= £'(p1*10)).appendTo('#cheap');
$(p2' Premium seats= £'(p2*20)).appendTo('#premium');
}); 
```

数学运算符似乎可以工作，但我正在寻找的是一种附加方法`$(p1' Standard seats= £'(p1*10)).appendTo('#cheap');`或高级等价物，而无需每次都添加新段落 - 即覆盖或类似。`replaceWith()`似乎也不起作用。

添加的HTML：

```
<!doctype html>
<html>
<head><title>Seat Booking</title>
<script type='text/javascript' src='jquery.min.js'></script>
<script type='text/javascript' src='hall.js'></script>
<link rel='stylesheet' href='hall.css'/>
</head>
<body>
<div id='content'></div>
<h1>Seat Booking</h1>
<div id='details'>
<div id='what'></div>
<div id='when'></div>
<div id='where'></div>
</div>
<div id='plan'>
<table>
  <tr>
   <td class='n' id='a1'><img src='images/a.gif'/></td>
   <td class='n' id='a2'><img src='images/a.gif'/></td>
   <td class='n' id='a3'><img src='images/a.gif'/></td>
   <td class='n' id='a4'><img src='images/a.gif'/></td>
   <td></td>
   <td class='n' id='a6'><img src='images/a.gif'/></td>
   <td class='n' id='a7'><img src='images/a.gif'/></td>
   <td class='n' id='a8'><img src='images/a.gif'/></td>
   <td class='n' id='a9'><img src='images/a.gif'/></td>
 </tr>
 <tr>
   <td class='n' id='b1'><img src='images/a.gif'/></td>
   <td class='n' id='b2'><img src='images/a.gif'/></td>
   <td class='n' id='b3'><img src='images/1.gif'/></td>
   <td class='n' id='b4'><img src='images/1.gif'/></td>
   <td></td>
   <td class='n' id='b6'><img src='images/1.gif'/></td>
   <td class='n' id='b7'><img src='images/a.gif'/></td>
   <td class='n' id='b8'><img src='images/a.gif'/></td>
   <td class='n' id='b9'><img src='images/a.gif'/></td>
 </tr>
 <tr>
   <td class='n' id='c1'><img src='images/1.gif'/></td>
   <td class='n' id='c2'><img src='images/1.gif'/></td>
   <td class='n' id='c3'><img src='images/a.gif'/></td>
   <td class='n' id='c4'><img src='images/a.gif'/></td>
   <td></td>
   <td class='n' id='c6'><img src='images/1.gif'/></td>
   <td class='n' id='c7'><img src='images/1.gif'/></td>
   <td class='n' id='C8'><img src='images/a.gif'/></td>
   <td class='n' id='C9'><img src='images/a.gif'/></td>
 </tr>
 <tr>
   <td class='n' id='d1'><img src='images/1.gif'/></td>
   <td class='n' id='d2'><img src='images/1.gif'/></td>
   <td class='n' id='d3'><img src='images/1.gif'/></td>
   <td class='n' id='d4'><img src='images/1.gif'/></td>
   <td></td>
   <td class='n' id='d6'><img src='images/1.gif'/></td>
   <td class='n' id='d7'><img src='images/1.gif'/></td>
   <td class='n' id='d8'><img src='images/1.gif'/></td>
   <td class='n' id='d9'><img src='images/1.gif'/></td>
 </tr>
 <tr>
   <td class='p' id='e1'><img src='images/1.gif'/></td>
   <td class='p' id='e2'><img src='images/1.gif'/></td>
   <td class='p' id='e3'><img src='images/1.gif'/></td>
   <td class='p' id='e4'><img src='images/1.gif'/></td>
   <td></td>
   <td class='p' id='e6'><img src='images/a.gif'/></td>
   <td class='p' id='e7'><img src='images/a.gif'/></td>
   <td class='p' id='e8'><img src='images/1.gif'/></td>
   <td class='p' id='e9'><img src='images/1.gif'/></td>
 </tr>
</table>
</div>
<div id='order'>
<h2>Order Summary:</h2>
</div>
<div id='subtotal'>
<h2>Total Price</h2>
<p id="cheap">hhh</p>
<p id="premium">jjj</p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:11:50.427

你能测试一下这段代码吗：

```
$(document).ready(function () {
var p1=0,
    p2=0;
$('#cheap').text(p1 + ' Standard seats= £' + (p1*10));
$('#premium').text(p2 + ' Premium seats= £' + (p2*20));
$('td img').click(function () {
    if ($(this).parent().hasClass('x')) {
        alert("Seat " + ($(this).parent().attr("id")) + " is taken");
    } else if ($(this).parent().hasClass('selected')){
        $(this).attr('src', 'images/a.gif');
        $(this).parent().removeClass('selected');
        var z = $(this).parent().attr('id');
        if ($(this).parent().hasClass('n')){
            p1--;                
        } else if ($(this).parent().hasClass('p')){
            p2--;
        }
        $('#'+z+'1').remove();
    } else {
        if ($(this).parent().hasClass('n')){
            p1++;                
        } else if ($(this).parent().hasClass('p')){
            p2++;
        }
        $(this).attr('src', 'images/c.gif');
        $(this).parent().addClass('selected');
        alert($(this).parent().attr("class"));
        var z = $(this).parent().attr('id');
        $('#order').append('<p id="'+z+'1">'+z+'</p>');            
    };
    $('#cheap').text(p1 + ' Standard seats= £' + (p1*10));
    $('#premium').text(p2 + ' Premium seats= £' + (p2*20));
    return false;
});
}); 
```

编辑：A 有一些全局变量来保存所选座位的数量（便宜和高级）。

一个动作

```
$('#cheap').text(p1 + ' Standard seats= £' + (p1*10));
        $('#premium').text(p2 + ' Premium seats= £' + (p2*20)); 
```

在点击事件中

并且在未选择座位时有这个：

```
if ($(this).parent().hasClass('n')){
            p1--;                
        } else if ($(this).parent().hasClass('p')){
            p2--;
        } 
```

**编辑2：** 交互式代码：

[http://jsfiddle.net/kdQmq/3/](http://jsfiddle.net/kdQmq/3/)

# c# - 如何将列表绑定到gridview？

> ID：15258961
> 
> 赞同：0
> 
> 时间：2013-03-06T22:01:15.713
> 
> 标签：c#, json, gridview

我正在尝试获取 JSON 文档，将其放入列表中，然后将其绑定到 gridview。我尝试了几种不同的方法，但没有任何效果。这是我的代码，问题出在最后 4 行。

```
 protected void Page_Load(object sender, EventArgs e)
    {

        var from = origin.Text;
        var to = destination.Text;
        var requesturl = @"http://maps.googleapis.com/maps/api/directions/json?origin =" + from + "&alternatives=false&units=imperial&destination=" + to + "&sensor=false;";
        string content = file_get_contents(requesturl); 

        JavaScriptSerializer jss = new JavaScriptSerializer();
        var d = jss.Deserialize<dynamic>(content);
        List<string> sl = d;

        GridView1.DataSource = content;
        GridView1.DataBind();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:31:00.463

以下是列出这些方向的两种方法：

**1 - 使用 GridView：**

```
<asp:GridView ID="grdExample" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField HeaderText="Directions">
            <ItemTemplate>
                <%# Container.DataItem %>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

绑定 GridView：

```
List<string> strings = new List<string>() { "Ha!", "Hey!", "Yo!" };

grdExample.DataSource = strings;
grdExample.DataBind(); 
```

**2 - 使用中继器（更简单、更灵活，需要您自己的 HTML）：**

```
<asp:Repeater ID="rptExample" runat="server" >
    <ItemTemplate>
        <%# Container.DataItem %>
    </ItemTemplate>
</asp:Repeater> 
```

绑定它：

```
List<string> strings = new List<string>() { "Ha!", "Hey!", "Yo!" };

rptExample.DataSource = strings;
rptExample.DataBind(); 
```

# ember.js - 使用基于历史的 Ember.Location 刷新后后退按钮损坏

> ID：15258962
> 
> 赞同：0
> 
> 时间：2013-03-06T22:01:16.697
> 
> 标签：ember.js

我正在尝试使用“历史”路由器实现而不是默认的“哈希”，并启用了转换记录：

```
App = Ember.Application.create({
  LOG_TRANSITIONS: true
});

App.Router.reopen({
  location: 'history'
}); 
```

这可行：单击页面之间的链接可以正常工作，后退按钮可以正常工作，所有路由器转换都记录在控制台中，等等。

但是，如果我手动刷新浏览器（Chrome 25），后退/前进按钮将停止工作。地址栏中的 URL 相应更改，但页面中没有任何更改。控制台中没有错误，也没有来自`LOG_TRANSITIONS`.

使用默认的基于散列的位置，刷新 + 后退/前进工作得非常好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:10:25.533

事实证明，这是 Ember 处理基于 pushState 历史的方式中的一个错误。已经修复，只是还没有发布：

[https://github.com/emberjs/ember.js/issues/2234](https://github.com/emberjs/ember.js/issues/2234)

# android - ios/android/windows-phone 游戏建议

> ID：15258963
> 
> 赞同：2
> 
> 时间：2013-03-06T22:01:21.160
> 
> 标签：android, ios, cross-platform, windows-phone, game-engine

我想为 ios/android/win-phone 写一个多人游戏。无论您使用何种设备，您都可以与他人在线玩游戏。我的问题是：我是否应该在 lua 中编写逻辑，并为每个平台（obj-c、java、c#）独立编写 UI？或者我应该使用支持所有三个平台的 SDK 开发整个游戏（UI、逻辑、一切）？

# facebook - fb应用程序未请求所有权限

> ID：15258969
> 
> 赞同：0
> 
> 时间：2013-03-06T22:01:45.743
> 
> 标签：facebook, permissions

我写了一个 facebook 连接器应用程序，它应该请求一些权限。当我单击应用程序编辑菜单中的预览登录对话框按钮时，会列出所有权限，但是当我从我的网站打开登录对话框时，仅请求标准权限（一般用户信息）。我已经保存了好几次并等待了几个小时，但它不起作用。我做错了什么还是我只是发现了一个错误或什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:05:43.750

Facebook 应用程序配置中的权限设置仅适用于 Facebook 应用中心的身份验证对话框。从您的网站打开登录对话框时，您需要指定所需的权限。例如，如果您使用 Javascript SDK 的 FB.login 进行登录，您将需要类似

```
FB.login(function(response) {
  // handle the response
}, {scope: 'email,publish_actions'}) 
```

特别注意范围参数。

# java - 如何在单独的表中实现 uniqueConstraint 和映射？

> ID：15258974
> 
> 赞同：0
> 
> 时间：2013-03-06T22:01:57.743
> 
> 标签：java, hibernate, jakarta-ee, jpa

```
@Entity
class Employee {
  @Column
  private UUID id;

  @Column
  private String firstName;

  @Column
  private String lastName;  

} 
```

和

```
@Entity
class Department {
  @Column
  private UUID id;

  @Column
  private List<Employee> employees;  
} 
```

*   我想要一个单独的表，该表与**DepartmentEmployee等员工具有****OneToMany**关系

 *** * *

```
--------------------------
departmentId | EmployeeId
--------------------------
      1      |     1     |
      1      |     2     |
      1      |     3     |
      2      |     5     |
-------------------------- 
```

*   我想确保有一个`uniqueConstraint`on`Department.id`和`Employee.id`

我如何做到这一点`JPA`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:11:14.360

使用`@OneToMany`on `employees`with `@JoinTable`annotaion。

就像是，

```
@OneToMany
@JoinTable(name="DEPT_EMP", 
          joinColumns=@JoinColumn(name="departmentId"),
          inverseJoinColumns=@JoinColumn(name="EmployeeId"))
private List<Employee> employees; 
```

希望您不必担心这里的唯一约束，默认情况下会创建一个。但是你想提供特定的名称，你可以利用`uniqueConstraints=@UniqueConstraint``JoinTable.propery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:11:52.397

使用`@JoinTable`, 和`uniqueConstraints`:

```
@Entity
class Employee {
    @Column
    private UUID id;

    @Column
    private String firstName;

    @Column
    private String lastName;
}

@Entity
class Department {

    @OneToMany
    @JoinTable(joinColumn = @JoinColumn(name = "employee_id"), 
        inverseJoinColumn(name = "department_id"),
        uniqueConstraints=@UniqueConstraint(columnNames={"employee_id", "department_id"}))
    private List<Employee> employees;  
} 
```

*警告：以上只是伪代码。***

# ios - 包含旋转的 UIImageView 的 UIScrollView 不会缩放

> ID：15258975
> 
> 赞同：1
> 
> 时间：2013-03-06T22:02:02.267
> 
> 标签：ios, cocoa-touch, uiscrollview, uiimageview

我正在使用带有多个 UIScrollViews 作为子视图的 UIScrollView，每个子视图都包含一个 UIImageView 来显示图片。
该应用程序本身仅支持纵向，但我确实希望图像视图在设备旋转时旋转（观察 UIDeviceOrientationDidChangeNotification）。
图像视图的旋转是通过`setTransform:`使用`CGAffineTransformScale`和的动画完成的`CGAffineTransformMakeRotation`。
缩放图像视图是通过从`viewForZoomingInScrollView:`包含图像视图的滚动视图返回图像视图来完成的。

这一切都很好，除了一件事：当图像视图旋转时，我不再能够缩放。`viewForZoomingInScrollView:`正在调用调试节目，但`scrollViewDidZoom:`不是。

有谁知道可能导致此问题的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T13:46:29.057

~~通过将转换应用于 UIScrollView（包含 UIImageView）而不是 UIImageView 本身来修复它。~~

仅将转换应用到 UIScrollView 并不能很好地工作。它会将旋转后的图像放在一个较小的视图中，并且缩放不会使用可用的屏幕空间。

我终于设法解决了这个问题，所以这就是方法。

**要求**

*   全屏图片的水平滚动列表
*   旋转设备*不能*旋转应用程序，但*必须*旋转显示的图片
*   必须能够在纵向和横向握持设备时缩放图片

**我是如何实现的**

一个主 UIScrollView，高度等于屏幕高度，宽度等于屏幕宽度 * 图片数。启用分页。
这个主 UIScrollView 包含每个图片的子视图。每个子视图如下所示：
UIScrollView > UIView > UIImageView

UIScrollView 有屏幕的大小，它的 origin.x 属性对于第一个子视图为 0，并且对于后续的每个 UIScrollView 都随着屏幕宽度而增加。结果是一个主 UIScrollView，所有子 UIScrollView 像这样彼此相邻（没有间距）：

```
┌────────────────────┐
│┌───┐┌───┐┌───┐┌───┐│
││ 1 ││ 2 ││ 3 ││ 4 ││
││   ││   ││   ││   ││
│└───┘└───┘└───┘└───┘│
└────────────────────┘ 
```

为了解决旋转问题，UIImageView 不再是 UIScrollView 的直接子视图，而是现在嵌入到容器 UIView 中。
主 UIScrollView 委托的`viewForZoomingInScrollView:`方法现在返回可见图片的容器 UIView，因此该容器 UIView 将用于缩放。图像视图的旋转仍然通过`setTransform:`使用`CGAffineTransformScale`和的动画来完成`CGAffineTransformMakeRotation`。

我猜测没有容器 UIView 的实现不起作用，是因为 UIImageView 不能再被主 UIScrollView 转换，而已经应用了转换。

# javascript - jQuery UI 模态对话框和 JSFiddle - 如何删除滚动条？

> ID：15258981
> 
> 赞同：0
> 
> 时间：2013-03-06T22:02:26.337
> 
> 标签：javascript, jquery, internet-explorer-9, internet-explorer-10, jsfiddle

我创建了一个使用 jQuery UI 对话框的简单示例

[http://jsfiddle.net/RTADa/](http://jsfiddle.net/RTADa/)

```
<div id="message">
    This is a test
</div>

$(function(){

    $("#message").dialog({modal: true, resizable: false});

}); 
```

在 IE9、IE10 和 Chrome 中，我得到了垂直和水平滚动条。这是 jQuery UI 中的错误还是我必须添加一些额外的 CSS 才能删除它们？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:06:28.713

设置body溢出隐藏

[演示](http://jsfiddle.net/RTADa/1/)

```
body{
   overflow:hidden;
} 
```

# c# - System.Speech.Recognition 是否使用“语音训练”？

> ID：15258987
> 
> 赞同：5
> 
> 时间：2013-03-06T22:02:47.633
> 
> 标签：c#, .net, speech-recognition, system.speech.recognition

我有一些`System.Speech.Recognition`工作正常的简单代码：

```
using (var recognizer = new SpeechRecognitionEngine(new CultureInfo("en-US")))
{
    recognizer.LoadGrammar(new DictationGrammar());
    recognizer.SpeechRecognized += recognizer_SpeechRecognized;
    recognizer.SetInputToDefaultAudioDevice();
    recognizer.RecognizeAsync(RecognizeMode.Multiple);
}

private void recognizer_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
{
    textBox1.Text = "Recognized text: " + e.Result.Text;
} 
```

使用 Windows 7 时，我在`"Control Panel" -> "Speech Recognition" -> "Train your computer to better understand you"`.

我的程序是否会自动利用已完成的任何培训？培训收益是基于用户还是基于机器？可以（轻松地）移动这些语音“配置文件”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:33:21.303

是的，培训（尤其是听写）很有用。通过培训，准确性可以提高 20-50%。（如果用户有口音，尤其如此。）

培训收益是按用户计算的。

微软有一个复制语音配置文件的工具，但它是为旧版本的 SR 引擎（XP 时代）构建的，据我所知，微软没有人愿意在新的 SR 引擎上更新或担保它. 如果你想尝试一下，Bing for "Speech Profile Manager"，它会立即弹出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:07:22.387

是的，看起来虽然可能没有必要对其进行培训，但可以做到：[this site](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/49f7fe53-a7d4-46be-a736-9b1632d8feb3)和[this site](http://msdn.microsoft.com/en-us/magazine/cc163663.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:51:46.977

我认为当您使用听写语法时，培训会有所帮助。如果您使用的是更有限的应用程序语法，那么培训的价值就会降低。

请记住，Windows 客户端语音识别 API (System.Speech) 和服务器语音识别 API (Microsoft.speech) 之间的主要区别之一是服务器 API 旨在用于多用户并且无法训练（想想语音自动电话系统，您无法为每个呼叫者进行培训）。如果您好奇，这个 SO 问题可能会有所帮助 - [System.Speech.Recognition 和 Microsoft.Speech.Recognition 有什么区别？](https://stackoverflow.com/q/2977338/90236)

# asp.net-mvc - MVC ModelState 和 EntityFramework 验证

> ID：15258993
> 
> 赞同：0
> 
> 时间：2013-03-06T22:03:16.367
> 
> 标签：asp.net-mvc, entity-framework

我有一个由 Database First 完成的 edmx 模型，并使用 VS 工具生成 DBSet。我用部分扩展类来添加数据注释验证。我在我的控制器上接收到我手动控制字段验证的视图模型。因此，即使我的部分类中有一个必填字段，我也会在我的控制器 ModelState.Remove("pasajeros[" + count + "].numResidencia"); 中删除它一次。因为一些条件。之前，我使用的是 LINQTOSQL，我没有遇到任何问题。但是现在实体框架不尊重我对 ModelState 的自定义。我如何使用 EntityFramework 传播或解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:47:41.537

将您的视图模型和实体模型分开。将您的验证注释放在您的视图模型上。然后使用[Automapper](https://github.com/AutoMapper/AutoMapper)之类的工具为您将实体映射到 ViewModel 字段。

在编辑时，您验证您的视图模型，然后更新您的实体字段，然后保存。

# visual-studio-2012 - 如何将 ajaxcontroltoolkit 添加到 Visual Studio 2012 中的工具箱

> ID：15258994
> 
> 赞同：16
> 
> 时间：2013-03-06T22:03:19.560
> 
> 标签：visual-studio-2012, ajaxcontroltoolkit

我已将 ajaxtoolkit 与 .NET 4 和 Visual Studio 2010 一起使用，并且能够将新选项卡添加到工具箱并将 ajaxtoolkit 控件添加到工具箱。如何在 Visual Studio 2012 中执行此操作？

我已经添加了带有[NuGet](http://en.wikipedia.org/wiki/NuGet)的 ajaxtoolkit ，但是我想查看工具箱中的控件，所以我可以将控件拖进去。这是如何完成的？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-23T14:41:43.613

它位于使用 NuGet 包管理器下载后由 Visual Studio 2012 创建的包文件夹中。

在 Visual Studio 中创建一个选项卡（您可以将其命名为 Ajax Toolkit）。

![在此处输入图像描述](../Images/a5f7d4d897443d7cc4ad13bbd3119189.png)

右键单击它并选择：选择项目..

![在此处输入图像描述](../Images/05ae2d4db7a70429371c942ad4e35f06.png)

单击浏览并导航到 Visual Studio 2012 使用您的源创建的包文件夹。像这样的东西：..\packages\AjaxControlToolkit.7.0123\lib\40\AjaxControlToolkit.dll

![在此处输入图像描述](../Images/5b462f216847b088bc2e4097dbd6a5c2.png)

![在此处输入图像描述](../Images/56e7df628785ec58715a7c9ec955611c.png)

选择 AjaxControlToolKit。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-17T16:38:41.260

我刚刚在 Visual Studio 2013 中安装了它。以下是该过程的摘要：

1.  单击解决方案并管理 Nuget 包
2.  过滤 AJAX 并选择 Ajax Control Toolkit
3.  NuGet 安装后，它不会在工具箱中！
4.  为 AJAX CONTROL TOOLKIT 创建一个新的工具箱组
5.  *添加项目*
6.  *浏览*
7.  导航到工具包 URL。项目是 c:\temp 文件夹中的 Webapplication1，因此工具包位于：C:\temp\WebApplication1\packages\AjaxControlToolkit.7.1213\lib\45（因为我使用的是框架 4.5）
8.  单击确定，应填充工具箱。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-24T03:10:37.077

用于查找 dll 文件夹的轻微排序剪切，例如 user3546149 给出的指令集中的步骤 7。

（干得好，我会投票给你的答案，但没有声誉）。

AjaxControlTookkit 应该显示在项目的参考下。右键单击它并选择属性。Path 属性是 AjaxControlToolkit.dll 的路径。复制该 Path 属性。然后在第 7 步中将 Path 属性直接粘贴到搜索框中。节省眼睛疲劳和咔哒声咔哒声综合症。

（也适用于 VS 2013，也许还有其他）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-28T22:09:07.763

当前版本的 AJAX 控件工具包可以将自身安装到 VS 工具箱中。首先退出 VS（如果不退出，它会告诉你退出），然后单击[AJAX Control Toolkit](http://devexpress.com/act)中的下载按钮。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-07-24T05:59:46.617

要安装 Ajax Control Toolkit，请在包管理器控制台中运行以下命令

```
PM> Install-Package AjaxControlToolkit 
```

这是在您当前的项目中安装 Ajaxtoolkit..