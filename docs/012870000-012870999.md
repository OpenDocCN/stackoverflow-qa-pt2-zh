# StackOverflow 问答 12870000-12870999

# java - 在创建 Android Intent 并指定目标 Activity 时，这个“.class”语法是什么？

> ID：12870001
> 
> 赞同：6
> 
> 时间：2012-10-13T04:40:27.363
> 
> 标签：java, android, android-intent

这也许是一个愚蠢的问题，但我在其他地方什么也没找到。我正在学习 Android 的基础知识，当我尝试创建一个专门用于运行我选择的另一个活动的意图时，本教程告诉我以这种方式构建它：

```
Intent intent = new Intent(this, DisplayMessageActivity.class); 
```

其中“DisplayMessageActivity”是我正在运行的活动的类。我不明白的是，“.class”部分是什么？据我了解，该参数应该是一个 Class 对象。“类”是我的 Activity 子类的一个字段吗？或者当我说“DisplayMessageActivity.class”时，我指的是一个实际的 .class 文件（这似乎有点奇怪）？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T04:52:09.120

虽然看起来是一个普通的字段访问，但它实际上是一种特殊的语言结构，这在[Retrieving Class Objects](http://docs.oracle.com/javase/tutorial/reflect/class/classNew.html) Java 教程`.class`中得到了很好的解释。

它说，引用：

> *如果类型可用但没有实例，则可以通过将“.class”附加到类型名称来获得类。这也是获取原始类型的 Class 的最简单方法。*

他们举了一个例子：

```
boolean b;
Class c = b.getClass();   // compile-time error

Class c = boolean.class;  // correct 
```

在我对 Java 的日常使用中，这并不是一个广泛使用的构造，而且很多人都没有意识到这一点。通常，在指定一般类而不是它们的实例时，它与泛型等一起使用。

我希望这有帮助。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T04:56:26.903

> 我不明白的是，“.class”部分是什么？据我了解，该参数应该是一个 Class 对象。

那是对的。

这`SomeClass.class`实际上是 Java 语法，意思是“给我`Class`对应`SomeClass`类型的对象”。请注意，您可以在任何类型上使用它……而不仅仅是类名。

> “类”是我的 Activity 子类的一个字段吗？

不，它不是一个字段。您可以将其视为类似于静态字段，但实际上并非如此。（就像`someArray.length`不是真正的数组对象的字段。）

> 或者当我说“DisplayMessageActivity.class”时，我指的是实际的 .class 文件

它指的是一个`Class` *对象*......而不是“.class”文件。

# selenium - Selenium WebDriverJS Using in Browser

> ID：12870004
> 
> 赞同：1
> 
> 时间：2012-10-13T04:40:36.613
> 
> 标签：selenium, selenium-webdriver

[http://code.google.com/p/selenium/wiki/WebDriverJs#In_the_Browser](http://code.google.com/p/selenium/wiki/WebDriverJs#In_the_Browser)

Where I can get javascript file "webdriver.js" from

So I can test and use it. Has anyone have done it..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T13:36:00.427

`webdriver.js`可以从硒源构建。您需要`java`并`svn`采取以下步骤：

1.  获取硒源：

    `svn checkout http://selenium.googlecode.com/svn/trunk/ selenium-read-only`

2.  更改为`trunk`：

    `cd selenium-read-only/trunk`

3.  构建`webdriver.js`：

    `./go webdriverjs`

    此步骤会在`build/javascript/webdriver/webdriver.js`. [然后，您可以按照selenium 的 wiki](http://code.google.com/p/selenium/wiki/WebDriverJs)中的说明继续使用此文件。

# c - Sparc Assembly: Printing a \n character with printf

> ID：12870006
> 
> 赞同：2
> 
> 时间：2012-10-13T04:40:47.847
> 
> 标签：c, assembly, printf, sparc

OK so i have two assembly .s files

the first function prototype is

```
void printCharacter( char c ) 
```

and in it I call printf to print the character

```
./global printCharacter

.section ".data"
format: .asciz "%c"

.section ".text"

printCharacter:
    save     %sp, -96, %sp

    set      format, %o0
    mov      %i0, %o1
    call     printf
    nop 
```

The problem is that I'm calling this function from another file. In the other file, I have this at the top declared

```
 NewLine: .byte '\n' 
```

and I use it like this

```
 set      NewLine, %o0
    call     printCharacter
    nop 
```

In my other function 'printCharacter' it uses

```
 mov      %i0, %o1 

           instead of

    set      %i0, %o1

    since I use printCharacter function for normal characters
    as well so I can't use set 
```

How do I use one function for both ASCII characters and something like \n that needs the 'set' command instead of mov?

The problem I get at the moment is that when I try to print a new line it prints out a ? in the terminal

# c++ - getting the 'name of the application' along with the key taps

> ID：12870007
> 
> 赞同：0
> 
> 时间：2012-10-13T04:40:50.937
> 
> 标签：c++, c, windows, hook

To record the key taps I install the hook as :

```
BOOL WINAPI installHook(HINSTANCE hinstDLL, DWORD fwdReason, LPVOID lpvReserved) {
handleKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc, hinstDLL, 0);
MSG msg;

while(GetMessage(&msg, NULL, 0, 0)){
  TranslateMessage(&msg);
  DispatchMessage(&msg);
}
return msg.wParam;
}

static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam) {
  // write here
} 
```

Is there any way I can know the application name where the keys are currently being tapped ? Like I have opened notepad an writing something , can I get the name of the application which is notepad along with the key taps ? Same goes for some other application like mozilla firefox.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:13:19.360

你的钩子内部应该是这样的：

```
static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    // if it is not a keydown event, continue the chain
    if(HC_ACTION != nCode || WM_KEYDOWN != wParam)
        return CallNextHookEx(0, nCode, wParam, lParam);

    const KBDLLHOOKSTRUCT* messageInfo = reinterpret_cast<const KBDLLHOOKSTRUCT*>(lParam);

    // add more code here...

    // tell Windows we processed the hook
    return 1;
} 
```

`messageinfo.vkCode`将包含您正在寻找的关键代码。这些代码的官方列表位于：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)

键通常被输入到前台窗口中（尽管有时会发生奇怪的窗口布局）。您可以像这样获取前景窗口的标题：

```
TCHAR title[100]; // increase size for longer titles
GetWindowText(GetForegroundWindow(), title, 100); 
```

如果您想获取程序的名称，请使用：

```
TCHAR title[100]; // increase size for longer program names
GetWindowModuleFileName(GetForegroundWindow(), title, 100); 
```

并且，请记住添加错误检查并检查文档。

# java - How do I check an array against itself in java

> ID：12870008
> 
> 赞同：-1
> 
> 时间：2012-10-13T04:41:04.743
> 
> 标签：java, arrays, slick2d, particles

I am trying to create a basic falling sand game in java, I have each particle store it's X and Y in a Point array. Each Point array is specific to it's element, so sand and water are two different arrays, what i would like to know is how do i check my sand array against itself to see if two particles have the same position, and if so, move them?

This is my Sand Class

```
 package testingzone;

import java.awt.Point;
import java.util.Stack;

import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;

public class Sand {

    public Graphics g = new Graphics();
    public float sizeX = 1;
    public float sizeY = 1;
    public int speed = 1;
    public String BaseState = "fall";
    public String state = "fall";
    public String Name = "Sand";
    public Point[] point = new Point[(600 * 800)];
    public Point[] pointcheck = new Point[(600 * 800)];
    public int num = 0;
    public boolean check = false;

    public org.newdawn.slick.Color c = org.newdawn.slick.Color.yellow;

    public void drawParticle(float x, float y) throws SlickException{
        g.setColor(c);
        g.drawRect(x, y, sizeX, sizeY);
    }

    public void createParticle() throws SlickException{
        if(state == "fall"){
            fall(point);
        } else {

        }
        if(state == "stay"){
            stay(point);
        } else {

        }
    }

    public void fall(Point[] point) throws SlickException{
        for (int index = 0; index < point.length; index++) {
            Point p = point[index];
            if (p != null) {
                if (p.y >= 598) {
                    drawParticle(point[index].x, 598);
                } else {
                    drawParticle(p.x, p.y);
                    p.y += speed;
                }
              }
            }
          }

    public void stay(Point[] point) throws SlickException{
        for (int index = 0; index < point.length; index++) {
            Point p = point[index];
            if (p != null) {
                drawParticle(p.x, p.y);
                }
              }
            }

} 
```

And this is a simplified version of my main class

```
 package testingzone;
import java.awt.Point;
import org.lwjgl.input.Mouse;
import org.newdawn.slick.Color;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.Input;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;

public class Control extends BasicGameState {
    public static final int ID = 2;

    public Sand s = new Sand();

    public Run run = new Run();
    int maxnum = (800 * 600);
    int pressedX;
    int pressedY;
    int num = 0;
    String Build = "1.4";
    String Element = "sand";
    String name;
    public boolean endgame = false;

    public void init(GameContainer container, StateBasedGame game) throws SlickException{
    }

    public void render(GameContainer container, StateBasedGame game, Graphics g) throws SlickException {
        if(Element == "sand"){
            s.createParticle();
            name = s.Name;
        }
        g.setColor(Color.yellow);
        g.drawRect(240, 10, 15, 15);
        g.fillRect(240, 10, 15, 15);
        if(Element == "sand"){
            // g.setColor(Color.white);
            // g.drawRect(235, 5, 25, 25);
            g.drawLine(235, 35, 260, 35);
        }
        g.setColor(Color.white);
        g.drawString("Open Sand", 700, 0);
        g.drawString("Build: " + Build, 700, 15);
        g.drawString("Total Pixels: " + num, 10, 25);
        g.drawString("Current Type: " + name, 10, 40);
        g.drawString("Mouse X: " + Mouse.getX(), 10, 55);
        g.drawString("Mouse Y: " + Mouse.getY(), 10, 70);
        }

    public void update(GameContainer container, StateBasedGame game, int delta) {
        if(endgame == true){
            container.exit();
        }
    }

    public void mouseDragged(int oldx, int oldy, int newx, int newy) {
        pressedX = newx;
        pressedY = newy;
        num = num + 1;
        if(Element == "sand"){
            s.num = s.num + 1;
            s.point[s.num] = new Point(pressedX, pressedY);
            s.pointcheck[s.num] = new Point(pressedX, pressedY);
        }
    }

    public void keyPressed(int key, char c) {
        if (key == Input.KEY_ESCAPE) {
            endgame = true;
        }
        if (key == Input.KEY_1) {
            Element = "sand";
    }

    public int getID() {
        return ID;
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:09:41.030

我不确定我是否理解你的问题..
检查这是否是你想要的..

```
// These loops will make each of the points compare to each other..
Point sands[] = new Point[10];
for ( int i = 0; i < sands.length - 1; i++ ) {
    for ( int k = i + 1; k < sands.length; k ++ ) {
        if ( sands[i].equals(sands[k]) ) {
            // Move Them
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:12:26.017

一个建议：粒子类有一个点（xy 坐标）。实现粒子的equals方法

```
boolean equals(Object o){
   if(! o instanceof Particle) return false;
   if(o.getPoint().equals(this.getPoint())) return true; 
```

现在为 Point 类实现等于：

```
 boolean equals(Object o){
       if(! o instanceof Point) return false;
       if(o.getXCoordinate.equals(this.getXCoordinate()) 
&& o.getYCoordinate.equals(this.getYCoordinate())) return true; 
```

如果需要，您可以检查索引，而不是在 Point 类上使用`getXCoordinate`和方法。`getYCoordinate`

# oop - Provide an example to create class without getter and setter

> ID：12870009
> 
> 赞同：0
> 
> 时间：2012-10-13T04:41:18.500
> 
> 标签：oop, class, encapsulation

I need an example to understand more clearly, How can I create a class with out getter and setter. So to implement a better design and adapt below mentioned principle:

*   Keeping code more object oriented and avoid procedural style coding
*   Reduce Law Of Demeter
*   Do not violate DRY principle
*   How to keep details of a class hidden from other classes
*   So that the calling class (client class) will not be created containing procedural methods which will make decision based on the state of my class.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:08:37.457

我认为访问修饰符的知识将帮助您回答自己的问题。请检查。

[http://www.codeproject.com/Articles/25078/C-Access-Modifiers-Quick-Reference](http://www.codeproject.com/Articles/25078/C-Access-Modifiers-Quick-Reference)

# javascript - Does JSON.stringify() always ignore methods when parsing objects?

> ID：12870017
> 
> 赞同：3
> 
> 时间：2012-10-13T04:42:08.937
> 
> 标签：javascript, json

I found the following in the [Mozilla-documentation](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify):

> If undefined, a function, or an XML value is encountered during conversion it is either omitted (when it is found in an object) or censored to null (when it is found in an array).

My question is: Do all modern browsers behave in this way? Can I rely on stringify() to ignore my object methods?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T04:51:02.137

完整的算法`JSON.stringify`可以在规范中找到： http: [//es5.github.com/#x15.12.3](http://es5.github.com/#x15.12.3)。

基本上，对于不是对象、`null`布尔值、数字或字符串的每个值，序列化函数都会返回`undefined`并且`undefined`不会呈现值。

这并不一定保证每个浏览器都以这种方式实现它，但唯一不正常的浏览器通常是 IE。其他所有浏览器都非常接近规范。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:46:51.497

是的。

除了没有实现它的 IE7 和要求文档处于标准模式的 IE8 之外，stringify 在浏览器中运行良好

见： [http ://caniuse.com/#search=json](http://caniuse.com/#search=json)

# java - Varargs with null parameters in Java

> ID：12870021
> 
> 赞同：8
> 
> 时间：2012-10-13T04:43:01.433
> 
> 标签：java, variadic-functions

The following code simply uses a null reference as a varargs parameter.

```
package currenttime;

import java.util.Arrays;

public class Main
{
    private static void temp(String...str)
    {
        System.out.println(Arrays.asList(str));
    }

    public static void main(String[] args)
    {
        temp(null,null);
        temp(null);
    }
} 
```

The first call to the method `temp(null, null);` displays `[null, null]` means that `str[0]=null` and `str[1]=null`.

but the later call to `temp(null);` causes the `NullPointerException` to be thrown which appears that the `str` itself is `null`.

If it's type cast to `String` something like this `temp((String)null);`, it works and displays `[null]`.

Why in the last call, an explicit type cast is required? *It seems to me that it's considered to be a string array with a `null` reference which is different from the first call.* What is the correct answer?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-13T04:48:43.600

> 在我看来，它被认为是一个带有空引用的字符串数组，这与第一次调用不同

确切地。这就是正在发生的事情。

实际上，它只是`precedence`介于： - `exact-match`、`var-args`和`boxing`之间`type-casting`。

编译器在检查要调用的方法或如何传递参数时遵循以下优先级：-

> Exact-Match > Type-Cast > Boxing > Var-args

所以，你可以看到，`var-args`它的优先级最低，而`exact-match`优先级最高。这意味着，如果 an代表 an那么它将`argument`被视为这样。`good-enough``exact-match`

现在，当您`null`作为参数传递时， then`null`可以直接`var-args`作为`value of reference`. 它是一个`exact match`参数。
因此，您需要`typecast`明确`String`告诉它它实际上是`var-args`参数的第一个元素

而在 的情况下`null, null`，它将被视为`two`您的元素`var-args`。因为它不能是`value of reference`.

# android - how to add radiobutton to cursor adapter which works like radiobutton in a radio group ie grouping the radiobutton

> ID：12870024
> 
> 赞同：3
> 
> 时间：2012-10-13T04:43:25.023
> 
> 标签：android

# editstudent.xml

```
 LinearLayout 

      ListView
           android:id="@android:id/list"        
      ListView

  LinearLayout 
```

# editstudentlist

```
 LinearLayout android:orientation="horizontal"  --  TOP Linear

       LinearLayout android:orientation="vertical"  -- sub Linear

           Tex0tView  android:id="@+id/enlist_tv_Name"  TextView

           TextView   android:id="@+id/enlist_tv_class" TextView

       LinearLayout -- sub Linear

       RadioButton  android:id="@+id/enList_rb_Id"   RadioButton

  LinearLayout --  TOP Linear 
```

# StudentActivity

```
StudentActivity extends ListActivity {

    setContentView(R.layout.editstudent);

    //get the data from database

    Cursor cursor = noMgr.getAllStudent();

    String[] columns= {StdentHelper.KEY_NAME,StdentHelper.KEY_CLASS, StdentHelper.KEY_ID};
    int[] to=new int[]{R.id.enlist_tv_name, R.id.enlist_tv_class, R.id.enList_rb_id};

    SimpleCursorAdapter scAdapter=new SimpleCursorAdapter(this, R.layout.editstudentlist, cursor, columns, to);

    this.setListAdapter(scAdapter);

} 
```

Here, there is a custom layout (editnumberlist.xml) with two text boxes and one radio button. It's been added to (editstudent.xml) using `simpleCursorAdapter` and it's working.

But I want the radio button to act like it's in the radio group (e.g. single selection at a time). Another question I have is how can I give the `StudentHelper.KEY_ID` to the radio button that should not be shown at runtime / execution time. Also how should I get the value of `StudentHelper.KEY_ID` in `onListItemClick()` function.

Does any one know how can I implement this?

# c++ - Solaris 10 CC Preprocessor bug causes undefined symbols

> ID：12870028
> 
> 赞同：3
> 
> 时间：2012-10-13T04:44:28.453
> 
> 标签：c++, compiler-construction, solaris, cc

I have a very very simple C++ file as follows that I'm compiling on Solaris 5-10 with the CC compiler. Here is the source code in my file myTest.C:

```
#include <map>
std::map<int, bool> myVar2; 
```

I would like to first run the CC pre-processor on this file, examine the pre-processed file, and then compile that pre-processed file into an object file. I call this "indirect-compiling". To do this, I do the following:

```
% CC -P -o myFile_indirect.i myFile.C
% CC -c -o myFile_indirect.o myFile_indirect.i 
```

I would also like to compile this file without a separate pre-processing step as is normally done. I call this "direct-compiling". To do this, I do the following:

```
% CC -c -o myFile_direct.o myFile.C 
```

In theory, myFile_direct.o and myFile_indirect.o should be functionally equivalent. They should certainly contain the same number of symbols in their respective symbol tables right? So let's examine their symbols:

```
% gnm myFile_direct.o | c++filt > direct_symbols.txt
% gnm myFile_indirect.o | c++filt > indirect_symbols.txt
% wc -l *direct_symbols.txt
55 direct_symbols.txt
43 indirect_symbols.txt 
```

Shockingly, the directly-compiled object file contains 12 symbols that are absent from the indirectly compiled file. Why? This seems like a serious bug to me. Why are these symbols absent from the indirectly compiled file? If they are unnecessary, why are they included in the directly compiled file? Isn't direct-compilation supposed to do the same pre-processing first and just hide it from the user? What is going on here?

PS. I don't recognize the twelve extra symbols nor do I understand what their purpose is:

```
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__nil()
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::iterator __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::erase(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::iterator)
00000010 T void __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__erase(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*)
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*&__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__right(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*)
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::iterator&__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::iterator::operator++()
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__maximum(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*)
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__minimum(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*)
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*&__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__leftmost()
00000010 T __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*&__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rightmost()
00000010 T void __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__erase_leaf(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*)
00000010 T void __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rotate_left(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*)
00000010 T void __rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rotate_right(__rwstd::__rb_tree<int,std::pair<const int,bool>,__rwstd::__select1st<std::pair<const int,bool>,int>,std::less<int>,std::allocator<std::pair<const int,bool> > >::__rb_tree_node*) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:03:19.243

尝试使用`CC -E`代替`CC -P`. 当我这样做时，`nm(1)`列表是相同的，并且目标文件仅相差几个字节（鉴于我可以在这种差异中看到文件`*.c`的名称并不奇怪）。`*.i``*.o`

手册页并没有真正解释这两个标志之间的区别，但确实强调了 C++，`-E`所以我想知道是否`-P`只打算成为 C。

如果您想弄清楚直接方法的真正含义，那么这可能会很有启发性：

```
truss -f -a -texec CC myFile.C 
```

直接编译方法不调用`CC -P`，`CC -E`而是调用`ccfe` 一大堆标志（`fbe`然后`ld`......）。

# javascript - 文本的可调整 Div 容器（放大和缩小）

> ID：12870029
> 
> 赞同：0
> 
> 时间：2012-10-13T04:44:28.617
> 
> 标签：javascript, html, css

我想知道如何制作一个可调节的 div 容器，它可以根据笔记本电脑、上网本或台式机中显示的屏幕调整自己的宽度和高度。必须确保没有文本在其容器下方或溢出其容器，并且容器内不会留下空白。

我尝试使用 % 或 em，但由于它基于基本字体大小 16px，因此在较小的上网本屏幕中会出现文本溢出的情况，或者在较大的屏幕桌面中，容器底部会留下空白。

任何建议将不胜感激。

```
<style type="text/css">
    .tt
    {
        border: 2px solid red;
        height: 80px;
        width: 168px;
        font-size: 16px;
        padding: 0px;
    }

</style>
</head>

<body>
    <div class="tt">
        Hello World Hello World<br>
        Hello World Hello World<br>
        Hello World Hello World<br>
        Hello World Hello World<br>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:11:20.047

您可以尝试这样做以使 div 拉伸到屏幕：

```
html, body, .tt { width:100%; height:100%; padding: 0; margin: 0;}

.tt
{
    border:2px solid red;
    font-size:16px;

    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    -ms-box-sizing:border-box;
    -o-box-sizing:border-box;
    box-sizing:border-box;
} 
```

请注意，box-sizing 是 CSS3 属性。如果您不想使用它，您可以从 div 中移除边框，或使用表格（已弃用）。

您还需要用文本填充孔屏幕吗？在这种情况下，这将很有用：[CSS：将字体设置为一个大小，以便文本占据整个容器](https://stackoverflow.com/questions/4842646/css-set-font-to-a-size-so-the-text-would-occupy-whole-container)

（链接是一个重复的问题，但在我看来有一个更容易理解的答案）。

# ruby-on-rails - 在每个循环的 Ruby on Rails 中，如果没有迭代，是否有一种好方法可以做某事？

> ID：12870036
> 
> 赞同：6
> 
> 时间：2012-10-13T04:46:35.283
> 
> 标签：ruby-on-rails, ruby

有没有一种简单的说法：否则，如果没有任何循环，则显示“无对象”。似乎应该有一种很好的语法方法来做到这一点，而不是计算 @user.find_object("param") 的长度

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T05:01:55.947

您可以执行以下操作：

```
if @collection.blank?
  # @collection was empty
else
  @collection.each do |object|
    # Your iteration  logic
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-13T05:36:25.843

**导轨视图**

```
# index.html.erb
<h1>Products</h1>
<%= render(@products) || content_tag(:p, 'There are no products available.') %> 

# Equivalent to `render :partial => "product", @collection => @products 
```

`render(@products)`为空`nil`时将返回。`@products`

**红宝石**

```
puts "no objects" if @collection.blank?

@collection.each do |item|
  # do something
end

# You *could* wrap this up in a method if you *really* wanted to:

def each_else(list, message)
  puts message if list.empty?

  list.each { |i| yield i }
end

a = [1, 2, 3]

each_else(a, "no objects") do |item|
  puts item
end

1
2
3
=> [1, 2, 3]

each_else([], "no objects") do |item|
  puts item
end

no objects
=> [] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T05:05:24.643

```
if @array.present?
  @array.each do |content|
    #logic
  end
else
  #your message here
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-10T16:51:12.040

我执行以下操作：

```
<% unless @collection.empty? %>
<% @collection.each do |object| %>
    # Your iteration  logic
  <% end %>
<% end %> 
```

# ios6 - iOS 6 Game Center authenticateHandler 取消后无法登录

> ID：12870041
> 
> 赞同：26
> 
> 时间：2012-10-13T04:47:26.907
> 
> 标签：ios6, game-center

在 iOS 6 中使用 authenticateHandler 时，如果用户取消它，游戏中心将不会显示登录视图。我意识到游戏中心会在 3 次取消尝试后自动锁定应用程序，但我说的只是 2 次尝试。如果他们取消登录，他们必须离开应用程序并在游戏中心显示登录之前返回，即使再次设置了 authenticateHandler 也是如此。关于如何在 iOS 6 中处理这种情况的任何想法？

使用较旧的 authenticateWithCompletionHandler 方法时效果很好：

```
#if __IPHONE_OS_VERSION_MIN_REQUIRED >= __IPHONE_6_0
    GKLocalPlayer.localPlayer.authenticateHandler = authenticateLocalPlayerCompleteExtended;
#else
    [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:authenticateLocalPlayerComplete];
#endif 
```

这对我的应用很重要的原因是它需要 Game Center 进行多人游戏。该应用程序会在启动时尝试向游戏中心进行身份验证，但如果用户取消，我们不会在启动时再次询问他们，这样他们就不会被唠叨。如果他们在选择多人游戏时没有登录，我们所做的是显示一个 Game Center 登录按钮。登录按钮通过调用 authenticateWithCompletionHandler（现在再次设置 GKLocalPlayer.localPlayer.authenticateHandler）来强制登录游戏中心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T08:38:00.620

更好地使用运行时检查 (instancesRespondToSelector:) 而不是预处理器 #if 语句，以便您可以在可用的地方使用推荐的方法，并在其他地方使用已弃用的方法。实际上，我发现在设置邀请处理程序之前我需要区分三种情况，因为身份验证处理程序也可能被 nil 视图控制器调用：

```
 -(void)authenticateLocalPlayer
 {
     if ([[GKLocalPlayer class] instancesRespondToSelector:@selector(setAuthenticateHandler:)]) {
         [[GKLocalPlayer localPlayer] setAuthenticateHandler:^(UIViewController *gameCenterLoginViewController, NSError *error) {
             if (gameCenterLoginViewController) {
                 [self.presentedViewController presentViewController:gameCenterLoginViewController
                                                            animated:YES
                                                          completion:^{
                                                              [self setInviteHandlerIfAuthenticated];
                                                          }];
             } else {
                 [self setInviteHandlerIfAuthenticated];
             }
         }];
     } else { // alternative for iOS < 6
         [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:^(NSError *error) {
             [self setInviteHandlerIfAuthenticated];
         }];
     }
 } 
```

然而，在邀请处理程序中必须区分更多情况，因为 matchForInvite:: 在 iOS6 中也是新的，并且通过游戏中心视图控制器避免了另一轮：

```
-(void)setInviteHandlerIfAuthenticated
{
    if ([GKLocalPlayer localPlayer].isAuthenticated) {
        [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite) {
            if (acceptedInvite) {
                if ([GKMatchmaker instancesRespondToSelector:@selector(matchForInvite:completionHandler:)]) {
                    [self showInfoAnimating:YES completion:NULL];
                    [[GKMatchmaker sharedMatchmaker] matchForInvite:acceptedInvite
                                                  completionHandler:^(GKMatch *match, NSError *error) {
                                                      // ... handle invited match
                                                  }];
                } else {
                    // alternative for iOS < 6
                    GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:acceptedInvite] autorelease];
                    mmvc.matchmakerDelegate = self;
                    // ... present mmvc appropriately
                    // ... handle invited match found in delegate method matchmakerViewController:didFindMatch:
                 }
            } else if (playersToInvite) {
                 // ... handle match initiated through game center
            }
        };
    }
} 
```

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T07:32:42.993

我认为这在 iOS 6.0 中是不可能的。在早期的 SDK 版本中执行此操作的 API 调用在发布之前已被删除。

在 WWDC 2012 视频：第 516 节 - 将您的游戏与 Game Center 集成 [8:30] 他们实际上显示了您调用`authenticate`方法的代码：

```
GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
localPlayer.authenticationHandler = //handle the callback...
[localPlayer authenticate]; 
```

此方法现在是私有 API，但您可以通过调用来查看它的实际效果：

```
[[GKLocalPlayer localPlayer] performSelector:@selector(_authenticate)]; 
```

它完全符合您的要求，但不能使用，因为它现在是私有的。

* * *

您还可以通过发布`UIApplicationWillEnterForegroundNotification`通知来触发身份验证过程：

```
[[NSNotificationCenter defaultCenter] postNotificationName:UIApplicationWillEnterForegroundNotification object:[UIApplication sharedApplication]]; 
```

我认为在实时代码中这样做是不可取的。

# java - 无法从 mongodb 解析 json 格式的文档列表

> ID：12870042
> 
> 赞同：2
> 
> 时间：2012-10-13T04:47:43.200
> 
> 标签：java, mongodb, gson

我收到了来自 mongodb 的以下响应，但我找不到反序列化的方法。

```
[{ "_id" : { "$oid" : "some ids"} ,
   "index" : 0 , 
   "question" : "some text ?",
   "optiona" : "OS",
   "optionb" : "JAVA",
   "optionc" : "C",
   "optiond" : "C#",
   "answer" : "JAVA",
   "created_at" : { "$date" : "2012-09-20T06:37:04.306Z" },
   "Active" : "1"
 }, 
 { "_id" : { "$oid" : "505ab997aded66f4c1ccc7f3" }, 
   "index" : 1 ,
   ..../objects like that
}] 
```

更具体地说，我找不到解析 $date 元素和 $oid 的方法。如何编写与该元素对应的数据成员，还是必须编写内部类？这似乎是一个非常基本的问题，但我找不到方法。我将在 gson parse 中使用该类来解析。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:24:55.723

在 toString 中，$date 和 $oid 是人工字段。如果您使用标准的 java mongo 驱动程序，那么 get("created_at") 应该是 java.util.Date 实例，而 get("_id") 应该是 org.bson.types.ObjectId 实例。

我对你的问题有点困惑，所以如果你使用的是原始 BSON 对象，那么“created_at”将是一个 BSON 日期类型（0x09），它的有效负载是自 Unix 纪元以来代表毫秒的长整数。“_id”将是一个 BSON ObjectId 类型 (0x07)，id 的有效负载为 12 个字节。如果我没记错的话，它与 Java 所期望的相反。有关详细信息，请参阅[BSON 规范。](http://bsonspec.org/#/specification)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:24:27.123

我想我已经想出了解决方案，部分是我从中得到了这个想法[，](https://stackoverflow.com/questions/8371274/how-to-parse-json-array-in-android-with-gson)对于映射类，我不得不使用带有**_id**和**created_at**的注释。我还必须为每个 _id 和 created_at 创建静态内部类。下面给出了代码，它现在正在运行，但我认为那里有更优雅的解决方案，所以如果有人有更好的解决方案，我会保持这个问题开放，否则会在一段时间内关闭

```
 import com.google.gson.annotations.SerializedName;
          import java.sql.Date;

         public class QuizDBObject {

/**
 * this class will work as the place holder for the quiz object.
 * An extra variable is added to store answer given by user.
 */
@SerializedName("_id")
 Id _id;

public Id get_id() {
    return _id;
}
public void set_id(Id _id) {
    this._id = _id;
}
@SerializedName("index")

private long index ;
@SerializedName("question")

private String question;
@SerializedName("answer")

private String answer;
@SerializedName("optiona")

private String optiona;
@SerializedName("optionb")

private String optionb;
@SerializedName("optionc")

private String optionc;
@SerializedName("optiond")

private String optiond;
@SerializedName("created_at") 
MyDate created_at;

    public MyDate getCreated_at() {
    return created_at;
}
public void setCreated_at(MyDate created_at) {
    this.created_at = created_at;
}

public void setOptiona(String optiona) {
    this.optiona = optiona;
}
@SerializedName("Active")
private String Active;
/**
 * for storing the answer given by the user for every question.
 */
private String userAnswer;

public String getUserAnswer() {
    return userAnswer;
}
public void setUserAnswer(String userAnswer) {
    this.userAnswer = userAnswer;
}
public QuizDBObject(){
    super();
}

public long getIndex() {
    return index;
}
public void setIndex(long index) {
    this.index = index;
}
public String getQuestion() {
    return question;
}
public void setQuestion(String question) {
    this.question = question;
}
public String getAnswer() {
    return answer;
}
public void setAnswer(String answer) {
    this.answer = answer;
}
public String getOptiona() {
    return optiona;
}
public void setOptionA(String optiona) {
    this.optiona = optiona;
}
public String getOptionb() {
    return optionb;
}
public void setOptionb(String optionb) {
    this.optionb = optionb;
}
public String getOptionc() {
    return optionc;
}
public void setOptionc(String optionc) {
    this.optionc = optionc;
}
public String getOptiond() {
    return optiond;
}
public void setOptiond(String optiond) {
    this.optiond = optiond;
}

public String getActive() {
    return Active;
}
public void setActive(String Active) {
    this.Active = Active;
}
/*public void setCreatedAtString(String type) {
    this.created_at.parse(type);

}
*/

static class Id{
    String $id;

    public String get$id() {
        return $id;
    }

    public void set$id(String $id) {
        this.$id = $id;
    }

}
static class MyDate{
    String $date;

    public String get$date() {
        return $date;
    }

    public void set$date(String $date) {
        this.$date = $date;
    }
}

    } 
```

# playn - Java中的PlayN websocket实现应该工作吗？

> ID：12870043
> 
> 赞同：2
> 
> 时间：2012-10-13T04:47:46.317
> 
> 标签：playn

根据平台状态，应该。我正在尝试完成一个基本的 Hello World 概念证明，但我无法让我的 Java 客户端使用 PlayN 连接到我的服务器。只要我调用 createWebSocket()，就会调用 onClose()。但是，我能够使用标准的 html 页面连接到我的服务器。

客户端代码：

```
 WebSocket s = PlayN.net().createWebSocket("ws://localhost:8080/test", new Net.WebSocket.Listener(){
    public void   onClose() {System.out.println("close");};       
    public void   onDataMessage(ByteBuffer msg) {System.out.println("data");};
    public void   onError(String reason) {System.out.println("error");};
    public void   onOpen() {System.out.println("open");};
    public void   onTextMessage(String msg) { System.out.println("text");};
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T11:21:32.923

这是 Jetty 上的示例 WebSocket Servlet 实现：

```
import java.io.IOException;
import java.util.Set;
import java.util.concurrent.CopyOnWriteArraySet;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.eclipse.jetty.websocket.WebSocket;
import org.eclipse.jetty.websocket.WebSocketFactory;

public class SampleServlet extends HttpServlet {
    private static final long           serialVersionUID    = 1L;

    private WebSocketFactory            wsFactory;
    private final Set<SampleWebSocket>  members             = new CopyOnWriteArraySet<SampleWebSocket>();

    @Override
    public void init() throws ServletException {
        wsFactory = new WebSocketFactory( new WebSocketFactory.Acceptor() {

            @Override
            public boolean checkOrigin( final HttpServletRequest request, final String origin ) {
                // Allow all origins
                return true;
            }

            @Override
            public WebSocket doWebSocketConnect( final HttpServletRequest request, final String protocol ) {
                return new SampleWebSocket();
            }

        } );
        wsFactory.setBufferSize( 4096 );
        wsFactory.setMaxIdleTime( 60000 );
    }

    @Override
    protected void doGet( final HttpServletRequest request, final HttpServletResponse response ) throws IOException {
        if ( wsFactory.acceptWebSocket( request, response ) ) {
            return;
        }

        response.sendError( HttpServletResponse.SC_SERVICE_UNAVAILABLE, "Websocket only" );
    }

    public class SampleWebSocket implements WebSocket.OnTextMessage {
        private volatile Connection         connection;

        public SampleWebSocket(  ) {
        }

        @Override
        public void onClose( final int closeCode, final String message ) {
            members.remove( this );
            System.out.println( "onClose: closeCode=" +closeCode+ ", message: '" +message+ "'" );       
        }

        @Override
        public void onOpen( final Connection connection ) {
            this.connection = connection;
            System.out.println( "onOpen: connection=" +connection );        
            members.add( this );

            // Send sample binary message back
            try {
                connection.sendMessage( "Sample message" );
            } catch ( final IOException e ) {
                e.printStackTrace();
            }
        }

        @Override
        public void onMessage( final String data ) {
            System.out.println( "onMessage: data=" +data );

            // Relay message to other connected clients
            for ( final SampleWebSocket member: members ) {
                try {
                    member.connection.sendMessage( data );
                } catch ( final IOException e ) {
                    e.printStackTrace();
                }
            }
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:12:40.460

我终于找到了问题所在。PlayN 1.4 版默认使用 Draft10。我已经更新了 PlayN 的本地副本以使用：[http](http://mvnrepository.com/artifact/com.netiq/websocket) : //mvnrepository.com/artifact/com.netiq/websocket 并将默认草稿更改为 Draft17，它可以连接到 Tomcat。

# python - 文件上传挂起与 Flask

> ID：12870047
> 
> 赞同：3
> 
> 时间：2012-10-13T04:48:32.210
> 
> 标签：python, file-upload, upload, flask

我正在尝试上传文件，但浏览器微调器永远滚动，服务器日志不显示更新并且文件没有上传。这肯定是一个新手错误，但我不知道那是什么：-

静态/index.html :-

```
html
form action="http://127.0.0.1:5000/upload" method="post" enctype="multipart/form-data"
  input type="file" name="db"/
  input type="submit" value="upload"/
/form
html 
```

应用程序.py

```
from flask import Flask
from flask import request
from werkzeug import secure_filename

app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello World!'

@app.route('/upload', methods=['GET', 'POST'])
def upload_file():
    print 'upload_file'
    if request.method == 'POST':
        print 'post'
        f = request.files['db']
        f.save(secure_filename(f.filename))

if __name__ == '__main__':
    app.run(debug=True) 
```

谢谢

环境：Flask 0.9、Jinja2-2.6 和 Werkzeug-0.8.3 和 Python 2.7 在 Win7 x64 和 IE9 和 Chrome

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:06:40.073

[文档](http://flask.pocoo.org/docs/patterns/fileuploads/)说你应该使用`enctype="multipart/form-data"`.

另外，我可能会尝试`method="POST"`（大写），如果只是因为防御性编码是一个好习惯，这里的防御性策略并不是假设 Flask 没有错误。

# sql - 使用 SQL 在没有 shell 访问权限的情况下删除旧的 MediaWiki 修订？

> ID：12870048
> 
> 赞同：3
> 
> 时间：2012-10-13T04:48:35.303
> 
> 标签：sql, mediawiki

有谁知道可以清除 MediaWiki 数据库中旧版本的 SQL 查询？我的数据库已经失控，我需要修剪它以使其能够下载和管理。

我没有 shell 访问权限，所以我需要使用 SQL 查询来执行此操作。

我已经尝试过这里建议的解决方案，但它不起作用[http://www.mediawiki.org/wiki/Extension_talk:SpecialDeleteOldRevisions2#Deleting_only_archived_revisions](http://www.mediawiki.org/wiki/Extension_talk:SpecialDeleteOldRevisions2#Deleting_only_archived_revisions)

谢谢阅读 ：）

尼古拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:13:58.510

和你一样，我没有对我的 MediaWiki 的 shell 访问权限。所以我不能做很多事情，比如维护。
这是我的解决方案：在您的计算机上托管您的 MediaWiki 网站只是为了完成您的维护任务

1.  备份您的数据库
2.  备份您的 MediaWiki 文件夹
3.  在您的计算机上设置[Apache](http://en.wikipedia.org/wiki/Apache_web_server)（Web 服务器）
4.  在您的计算机上设置 MySQL
5.  在您的计算机上恢复您的 MediaWiki 数据库
6.  将您的 MediWiki 文件夹放在 Apache 根文件夹中
7.  最后使用 shell 运行您想要的维护任务。我建议你[deleteOldRevisions](http://www.mediawiki.org/wiki/Manual%3aDeleteOldRevisions.php)脚本
8.  之后，重新备份文件夹和数据库并在远程主机上恢复它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:36:30.493

使用维护扩展并使用它运行相关的维护脚本。直接数据库操作纯粹是疯狂，并且按照其他答案的建议使用本地 LAMP 安装非常麻烦。正确运行 MediaWiki 确实需要 Shell 访问权限，但这是一个常见问题，请在讨论页上报告您对扩展程序的体验，或者如果发现任何错误，请提交错误。

# iphone - MGTwitter 不工作

> ID：12870053
> 
> 赞同：4
> 
> 时间：2012-10-13T04:49:16.603
> 
> 标签：iphone, ios5, twitter, ios6, mgtwitterengine

我不想`default twitter`打开，因为它应该与`ios < 5`也兼容。

我用过`MGTwitterEngine`。但它不会发布推文。几天前，它也可以在 ios5 上正常工作。但现在它不起作用。我认为 twitter `demo url is depreceated`，或者不支持 ios5 和 6。**可能是什么原因？**在向 twitter 发布内容时，请求失败并且我收到以下错误：

**`Error Domain=HTTP Code=404 "The operation couldn’t be completed. (HTTP error 404.)`**

任何帮助，将不胜感激 ！！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-14T09:00:39.383

Twitter 已弃用 API 版本 1 网址。
在**MGTwitterEngine.h**第 40 行更改

```
#define TWITTER_DOMAIN          @"twitter.com" 
```

到

```
#define TWITTER_DOMAIN          @"api.twitter.com/1" 
```

更多信息[https://dev.twitter.com/discussions/10803](https://dev.twitter.com/discussions/10803)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T03:37:41.070

修改... 1\. 更改 MGTwitterEngine.m 第 40 行中的 TWTTER_DOMAIN（已发布）。2\. Chenge OAuthConsumer.h 删除所有 OAuthconsumer 字符串。3\. 用SA_OAuthTwitterEngine.m 65~67行修改HTTP url，在twtter.com前加上api字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T10:40:05.327

## API 的第 1 版现已弃用。本文档可能描述了 API 的过时版本。请尽快移至API [1.1 版](https://dev.twitter.com/docs/api/1.1)。

浏览本文档。

[https://dev.twitter.com/docs/api/1.1/post/direct_messages/new](https://dev.twitter.com/docs/api/1.1/post/direct_messages/new)

需要注意的点

*   api格式应该是json
*   api版本v1.1
*   发送者和接收者应该互相跟随。

示例请求

**发布：[https :](https://api.twitter.com/1.1/direct_messages/new.json) **//api.twitter.com/1.1/direct_messages/new.json发布**
**数据**：text=hello&screen_name=rajneesh071**

# c# - 套接字 OnData 事件

> ID：12870057
> 
> 赞同：2
> 
> 时间：2012-10-13T04:50:28.037
> 
> 标签：c#, sockets, events

我现在有点苦恼。我有一些代码可以在数据可用时从套接字读取数据，但目前它处于单独线程上的 while 循环中，并且由于没有可用数据而在函数返回时占用了 50% 的 CPU。我真正想要的是 Sockets 的阻塞函数，它会阻塞直到数据可用，或者至少是可以监听的 OnData 事件。我最初从 AS3 (Flash) 转换了这段代码，但他们的套接字类有我需要的 OnData 事件......只是语言错误。

我目前在处理客户端连接的代码中有此代码：

```
ServerThread = new Thread(() =>
{
    while (server.Connected && ServerContinue)
    {
        ReceiveFromServer(server, client);
    }

    Disconnect(server, client, false);
});

ServerThread.Start(); 
```

这是 ReceiveFromServer 中的代码：

```
bool isReady = false;
int messageLength = 0;
int dataAvailable = 0;
UInt16 packetSize = 0;
byte[] temp = new byte[2];
do
{
    dataAvailable = server.Available;
    if (isReady)
    {
        if (dataAvailable >= messageLength)
        {
            byte[] temp1 = new byte[2000];
            int bytesRead = server.Receive(temp1, 0, messageLength, SocketFlags.None);

            byte[] data = new byte[bytesRead + 2];
            Buffer.BlockCopy(temp1, 0, data, 2, messageLength);

            Helpers.ByteArray tempo = data;
            tempo.writeByte(temp[1]);
            tempo.writeByte(temp[0]);
            if (!VersionCheckPass)
            {
                Send(tempo, client);
                return;
            }

            ServerPacketHandler(tempo, client);
            messageLength = 0;
            isReady = false;
            temp = new byte[2];
        }
    }
    else if(dataAvailable > 2)
    {
        server.Receive(temp, 0, 2, SocketFlags.None);
        temp = temp.Reverse().ToArray();
        packetSize = BitConverter.ToUInt16(temp, 0);
        if (packetSize > 0)
        {
            messageLength = packetSize;
            isReady = true;
        }
    }
}
while (dataAvailable > 2 && dataAvailable >= messageLength && ServerContinue); 
```

但这里的问题是，当 dataAvailable 为 0 时，函数会简单地返回，然后在线程中再次调用 RecevieFromServer。这意味着通过简单地调用 ReceiveFromServer 然后再次返回来使用大量 CPU。

我目前`Thread.Sleep(10)`在 ServerThread 中有 ReceiveFromServer ，但这效率低下。所以我的问题是，有没有办法阻止直到数据可用或者有我可以处理的事件？或者有没有其他人对如何做我目前正在做的同样的事情有任何建议，但是在没有可用数据的情况下它不会无休止地循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:54:09.063

找到了一个非常简单（且明显）的解决方案来阻止直到数据可用。使用接收大小为 0 调用 Socket.Receive。套接字阻塞，直到有数据要接收，然后从套接字读取 0 个字节，然后解除阻塞。它真的非常了不起:) 下面是我如何实现它：

```
ServerThread = new Thread(() =>
{
    byte[] zero = new byte[0];
    while (Server.Connected && ServerContinue)
    {
        server.Receive(zero, 0, SocketFlags.None);
        ReceiveFromServer(server, client);
    }

    Disconnect(server, client, false);
}); 
```

感谢所有的帮助。

乔什

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T07:02:54.230

不需要大量的重写。您的代码看起来只是在接收消息，然后传递给另一个例程来处理它。

我对该主题的回复几乎涵盖了您想要做的事情：

[C# 套接字和多线程](https://stackoverflow.com/questions/12417345/c-sharp-sockets-and-multithreading/12417497#12417497)

我的 socketReadCallBack 函数是：

```
 private void OnDataReceived(IAsyncResult asyn)
    {
        ReceiveState rState = (ReceiveState)asyn.AsyncState;
        Socket client = rState.Client;
        SocketError socketError = SocketError.TypeNotFound;

        if (!client.Connected)
        {
            // Not Connected anymore ?
            return;
        }

        _LastComms = DateTime.Now;
        _LastIn = _LastComms;

        int dataOffset = 0; 
        int restOfData = 0;
        int dataRead = 0;
        Boolean StreamClosed = false;
        long rStateDataLength = 0;
        long LastrStateDataLength = 0;

        try
        {

            dataRead = client.EndReceive(asyn, out socketError);
        }
        catch (Exception excpt)
        {
            // Handle error - use your own code..

        }

        if (socketError != SocketError.Success)
        {
            // Has Connection been lost ?
            OnConnectionDropped(client);
            return;
        }

        if (dataRead <= 0)
        {
            // Has connection been lost ?
            OnConnectionDropped(client);
            return;
        }

        while (dataRead > 0)
        {
            //check to determine what income data contain: size prefix or message
            if (!rState.DataSizeReceived)
            {
                //there is already some data in the buffer
                if (rState.Data.Length > 0)
                {
                    restOfData = PrefixSize - (int)rState.Data.Length;
                    rState.Data.Write(rState.Buffer, dataOffset, restOfData);
                    dataRead -= restOfData;
                    dataOffset += restOfData;
                }
                else if (dataRead >= PrefixSize)
                {  //store whole data size prefix
                    rState.Data.Write(rState.Buffer, dataOffset, PrefixSize);
                    dataRead -= PrefixSize;
                    dataOffset += PrefixSize;
                }
                else
                {  // store only part of the size prefix
                    rState.Data.Write(rState.Buffer, dataOffset, dataRead);
                    dataOffset += dataRead;
                    dataRead = 0;
                }

                if (rState.Data.Length == PrefixSize)
                {  //we received data size prefix 
                    rState.DataSize = BitConverter.ToInt32(rState.Data.GetBuffer(), 0);
                    rState.DataSizeReceived = true;
                    //reset internal data stream             
                    rState.Data.Position = 0;
                    rState.Data.SetLength(0);
                }
                else
                {  //we received just part of the prefix information 
                    //issue another read
                    client.BeginReceive(rState.Buffer, 0, rState.Buffer.Length,
                       SocketFlags.None, new AsyncCallback(socketReadCallBack),
                          rState);
                    return;
                }
            }

            //at this point we know the size of the pending data

            // Object disposed exception may raise here
            try
            {
                rStateDataLength = rState.Data.Length;
                LastrStateDataLength = rStateDataLength;
            }
            catch (ObjectDisposedException Ode)
            {
                StreamClosed = true;
            }
            if (!StreamClosed)
            {

                if ((rStateDataLength + dataRead) >= rState.DataSize)
                {   //we have all the data for this message

                    restOfData = rState.DataSize - (int)rState.Data.Length;

                    rState.Data.Write(rState.Buffer, dataOffset, restOfData);
                    //Console.WriteLine("Data message received. Size: {0}",
                    //   rState.DataSize);

                    // Is this a heartbeat message ?
                    if (rState.Data.Length == 2)
                    {
                        // Yes
                        HeartBeatReceived();
                    }
                    else
                    {
                        //charArray = new char[uniEncoding.GetCharCount(
                        //byteArray, 0, count)];
                        //uniEncoding.GetDecoder().GetChars(
                        //    byteArray, 0, count, charArray, 0);
                        //Console.WriteLine(charArray);

                        //rState.Data.Position = 0;

                        DecodeMessageReceived(GetStringFromStream(rState.Data));
                    }

                    dataOffset += restOfData;
                    dataRead -= restOfData;

                    //message received - cleanup internal memory stream
                    rState.Data = new MemoryStream();
                    rState.Data.Position = 0;
                    rState.DataSizeReceived = false;
                    rState.DataSize = 0;

                    if (dataRead == 0)
                    {  
                        //no more data remaining to process - issue another receive
                        if (_IsConnected)
                        {
                            client.BeginReceive(rState.Buffer, 0, rState.Buffer.Length,
                               SocketFlags.None, new AsyncCallback(socketReadCallBack),
                                  rState);
                            return;
                        }
                    }
                    else
                        continue; //there's still some data to process in the buffers
                }
                else
                {  //there is still data pending, store what we've 
                    //received and issue another BeginReceive
                    if (_IsConnected)
                    {
                        rState.Data.Write(rState.Buffer, dataOffset, dataRead);

                        client.BeginReceive(rState.Buffer, 0, rState.Buffer.Length,
                           SocketFlags.None, new AsyncCallback(socketReadCallBack), rState);

                        dataRead = 0;
                    }
                }
            }
            else
            {
                // Stream closed, but have we read everything ?
                if (LastrStateDataLength + dataRead == rState.DataSize)
                {
                    // We're equal, get ready for more
                    //no more data remaining to process - issue another receive
                    if (_IsConnected)
                    {
                        client.BeginReceive(rState.Buffer, 0, rState.Buffer.Length,
                           SocketFlags.None, new AsyncCallback(socketReadCallBack),
                              rState);
                    }
                    return;
                }
                else
                {
                    // We should have more..
                    // Report Error
                }
            }

            // If we've been disconnected, provide a graceful exit
            if (!_IsConnected)
                dataRead = -1;

        }
     } 
```

我这里有比你需要的更多的东西，比如提供心跳消息和在连接断开时引发事件等。

# c# - 在减去二进制数时确定“借位”

> ID：12870058
> 
> 赞同：3
> 
> 时间：2012-10-13T04:50:34.737
> 
> 标签：c#, binary-data

我正在尝试用 C# 编写一个chip8 模拟器。有必要在软件中模拟实际芯片上硬件中发生的操作。

有一个操作码需要检测两个二进制数相减过程中是否发生借位。

```
Byte1 - Byte2 
```

有没有人知道如何使用 C# 来判断是否发生了借用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T05:25:18.513

在[Wikipedia](https://en.wikipedia.org/wiki/CHIP-8)中搜索您未提及的神秘操作码并寻找一些实现之后。我可以得出结论，操作码 8XY5 和 8XY7（其中 X 和 Y 是寄存器标识符）将进行减法运算。

对于 8XY5，寄存器 X 将设置为寄存器 X 的值减去寄存器 Y 的值。如果寄存器 Y 的值大于或等于寄存器 X 的值，则寄存器 F 将设置为 1 （否则为 0）。

对于 8XY7，寄存器 X 将设置为寄存器 Y 的值减去寄存器 X 的值。如果寄存器 X 的值大于或等于寄存器 Y 的值，则寄存器 F 将设置为 1 （否则为 0）。

这是 8XY5 的“伪”代码：

```
x = opcode[1]
y = opcode[2]
if (register[x] >= register[y])
    register[0xF] = 1
else
    register[0xF] = 0
result = register[x] - register[y]
if result < 0
    result += 256
register[x] = result 
```

这是 8XY7 的“伪”代码：

```
x = opcode[1]
y = opcode[2]
if (register[y] >= register[x])
    register[0xF] = 1
else
    register[0xF] = 0
result = register[y] - register[x]
if result < 0
    result += 256
register[x] = result 
```

这是一个 C# 实现：

```
const byte B_0 = 0x0;
const byte B_1 = 0x1;
const byte B_F = 0xF;

static void Main()
{
    byte[] registers = new byte[16];
    registers[0x1] = 255;
    registers[0x2] = 127;
    Opcode8XY5(registers, 1, 2);
    Console.WriteLine(registers[0x1]);
    Console.WriteLine(registers[0x2]);
    Console.WriteLine(registers[0xF]);
    Opcode8XY7(registers, 1, 2);
    Console.WriteLine(registers[0x1]);
    Console.WriteLine(registers[0x2]);
    Console.WriteLine(registers[0xF]);
    Console.ReadLine();
}

static void Opcode8XY5(byte[] registers, byte x, byte y)
{
    registers[B_F] = registers[x] >= registers[y] ? B_1 : B_0;
    registers[x] = (byte)(registers[x] - registers[y]);
}

static void Opcode8XY7(byte[] registers, byte x, byte y)
{
    registers[B_F] = registers[y] >= registers[x] ? B_1 : B_0;
    registers[x] = (byte)(registers[y] - registers[x]);
} 
```

检查[此](http://www.zophar.net/chip8/chuit.html)实现以供参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T05:00:13.500

您将需要比较字节的每一位...如果设置了第二个字节位但未设置第一个字节，则您有借用条件：

```
static void Main(string[] args) {
    byte b1 = byte.Parse(args[0]);
    byte b2 = byte.Parse(args[1]);

    bool borrow = false;
    for (int mask = 0x01; mask <= 0x80; mask <<= 1) {
        if ((b2 & mask) > (b1 & mask)) {
            borrow = true;
        }
    }

    Console.WriteLine(Convert.ToString(b1, 2).PadLeft(8, '0'));
    Console.WriteLine(Convert.ToString(b2, 2).PadLeft(8, '0'));
    Console.WriteLine("borrowed: {0}", borrow);
} 
```

可能有一个非常聪明的布尔逻辑可以给你答案，但我现在想不出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T04:56:54.300

如果类型转换不是符号传播，您需要使用更广泛的类型进行数学计算。然后检查结果是否将第 8 位设置为 1。如果已设置，则借位。然后将结果保存为字节。

# linux - SVN - 添加用户

> ID：12870059
> 
> 赞同：0
> 
> 时间：2012-10-13T04:50:49.150
> 
> 标签：linux, eclipse, svn

很久以前，我在远程服务器上设置了 SVN。我使用 Eclipse 从本地连接到它

```
svn+ssh://kris@hostname:22/srv/svn/repo 
```

我现在需要添加另一个用户，但我一生都无法弄清楚如何去做。我什至找不到当前用户帐户“kris”的位置。

我正在使用 svn，版本 1.6.11 (r934486) 编译于 2012 年 5 月 14 日，05:36:26 [http://subversion.tigris.org/](http://subversion.tigris.org/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T09:21:55.760

与我的 Linux 大师交谈时，他带领我找到了解决方案。

我没有使用 SVN 的身份验证。我正在使用 linux 身份验证，所以步骤是

创建一个新的 linux 用户。然后将它们添加到可以访问单个存储库的组中

用户添加*用户名*

passwd*密码*

groupadd*组名*

vi /etc/group 查找组名 将*用户名* 添加到该行 chgrp -R *groupname /* *repoLocation* chmod -R g+w /repoLocation

 **问题解决了**

# algorithm - 合并排序迭代次数

> ID：12870064
> 
> 赞同：0
> 
> 时间：2012-10-13T04:51:07.973
> 
> 标签：algorithm, mergesort

> **可能重复：**
> [为什么合并排序中的合并操作是 O(n)？](https://stackoverflow.com/questions/11947315/why-merge-operation-in-merge-sort-is-on)

为什么每次迭代都需要 O(n) 关于合并排序有人可以为我详细解释一下吗？为什么 C_merge(n)= O(n)？这是否意味着合并两个排序数组的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:35:38.960

这个想法是我们有两个排序数组，而不是两个数组，其中一个的最小元素大于另一个最大的元素。我的意思是，它不是`[1, 3, 9, 12]`and `[13, 17, 19]`。但它更像`[3, 12, 13, 17]`和`[1, 9, 19]`。

你看，在以后的情况下你不能附加它们。那么，如何结合？您遵循以下算法：

1.  可以说第一个有`m`元素，第二个有`n`。您制作了一个 size 的辅助数组`m+n`。这将存储最终组合和排序的数组。
2.  分配两个光标 --`i`和`j`，指向数组的头部。
3.  `i`比较和处的元素`j`；选择较小的那个。复制值辅助数组，并将光标移动到更小的光标前面。
4.  重复#3，直到其中一个阵列耗尽；然后将剩余的元素从未用尽的数组复制到辅助数组。

所以，在我们的例子中，你比较`(3, [1]); ([3], 9); (12, [9]); ([12], 19); ([13], 19); ([17], 19); (--, [19])` . 你看？怎么可能比较？`(m+n)`. 假设每次操作`O(1)`。长度数组的合并过程`(m+n)`是`O(m+n)`.

在最好的情况下，您将排序数组作为输入。例如，要合并的两个子数组只需要加入。但是我们将应用上面提到的通用算法。在这种情况下，您将不得不比较和复制`min(m,n)`元素；然后将`max(m,n)`元素复制到辅助数组。在任何情况下，您都将进行全面`(m+n)`操作。

# php - 如何使用 PHP/SQL 并行运行两个 sql 查询？

> ID：12870065
> 
> 赞同：2
> 
> 时间：2012-10-13T04:51:11.073
> 
> 标签：php, sql, postgresql

是否可以启动两个 sql 查询以便它们同时运行？

在一个 php 文件中，我正在对`Postgresql`数据库执行两个查询。使用前两个查询返回的值，我执行第三个查询。

```
function one(){ 
   $query = pg_query($con, $sql);                               
   $a = pg_fetch_result($query, 0, 0);  
   return $a;
}
function two(){        
   $query = pg_query($con, $sql);                            
   $b = pg_fetch_result($query, 0, 0);  
   return $b;
}

function three($a, $b){ 
   //$a + $b used to construct query $sql
   $query = pg_query($con, $sql);                               
   $c = pg_fetch_result($query, 0, 0); 
   return $c;
} 
```

是否可以同时运行`one`功能`two`？我考虑的另一种方法是制作`a`和`b`全局变量，并最初将它们设置为`null`. 然后，它们不是函数`one`并`two`返回任何值，而是设置它们的值`a`和`b`完成时间。`a`然后我不断检查是否`b`为空，如果为空，则调用 function `three`。

搜索我读到的这个主题，`pcntl`但我不清楚这是否是执行此类计算的最佳方式。`pcntl`默认情况下，未安装在我的虚拟主机服务 (WebFaction) 上。

另一种方法可能是使用[pg_send_query_params()](http://www.php.net/manual/en/function.pg-send-query-params.php)，它使我能够使用不同的参数执行相同的查询，这可能比我原来的方法更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:07:42.817

Threads are more than likely the answer ...

[http://uk3.php.net/Thread](http://uk3.php.net/Thread)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:29:44.000

如果您创建两个不同的连接，您可以使用异步查询。

有关更多信息，请参阅 PHP 手册中的 pg_send_query()、pg_get_result() 和 pg_cancel_query()。

请注意，每个后端都是单线程的，因此每个查询必须有一个连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T04:55:35.603

是的，您可以使用同时运行两个查询`Threads`。

`Thread`但如果您不知道如何正确处理它们，我建议不要使用，因为它会导致`RACE`状况。

我的建议是直接调用两个函数并将它们存储在变量中并将其传递给第三个函数。它不会影响您的页面性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T05:11:46.210

在函数中创建**query1**和**query2**，将 query1 和 query2 的结果存储在单独的变量中，并将这些变量传递给第三个查询所在的函数并执行必要的操作

```
function one()
{
  $query1="Your query here";
  $query2="Your second query here";
  $result=array_mergre($query1,$query2);
  return $result;
 } 
```

将 $result 传递给第二个函数

```
 function two($result)
  {

    //Your actio ngoes here;
      } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-13T05:10:51.890

我不太确定这是否可以通过纯粹使用 PHP 来执行。

我将使用javascript来产生这样的效果。假设我有 a.php 和 b.php。我将制作一个html文件：

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
   $.ajax({url:'a.php'});
   $.ajax({url:'b.php'});
</script> 
```

这实际上不是多线程。这就像 2 个人几乎同时打开 2 个不同的网页。

# mysql - 为什么这个 WHERE 子句不能与 Join 一起使用？

> ID：12870068
> 
> 赞同：1
> 
> 时间：2012-10-13T04:52:12.220
> 
> 标签：mysql, sql

我对 SQL 很陌生，这是一个相当复杂的命令：

```
SELECT users.name, 
       from_unixtime(activity.time_stamp, "%D %b %Y  %l:%i:%S"), 
      activity.activity, 
      activity.rfid_tag, 
      chemicals.description 
FROM activity 
JOIN chemicals ON chemicals.bar_code = activity.bar_code 
JOIN users ON users.badge_number=activity.badge_number 
WHERE  (activity="login") 
    OR (activity="logout") 
   OR (activity LIKE "Admin:%") 
   OR (activity="tag") 
   OR (activity="untag") 
   OR (activity LIKE "check out%") 
   OR (activity LIKE "pour%") 
   OR (activity="check out (unscheduled)") 
   OR (activity="not poured after checking out") 
   OR (activity LIKE "invalid:%") 
ORDER BY time_stamp DESC 
```

当我运行它时，它只返回*与*WHERE 的最后一个 OR 匹配的行（867 中的 723）。例如，我没有看到 activity="login" 的任何行，但`SELECT * FROM activity WHERE activity="login"`确实返回了一些行。

我究竟做错了什么？（如果那应该是“INNER JOIN”）？

## 更新

在我添加 Join 之前，我应该说这是有效的（使用复杂的 WHERE）（我是一个完全的 SQL 初学者）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T05:08:14.193

[请研究INNER JOIN 和 LEFT JOIN](http://www.quora.com/SQL/What-is-the-difference-between-inner-join-left-join-right-join-and-full-join)之间的区别。

通过查看您的查询和基于名称的水晶球凝视并与现实世界的实体相关联，我可以看到以下内容：

当您的活动是“倒”时，它可能涉及一些化学物质，这些化学物质将成功加入条形码。当它是“登录”时，我怀疑你会在化学表上获得成功的（INNER）JOIN。正如有人提到的，你真的想把它们变成 LEFT JOIN，例如

```
SELECT users.name, 
       from_unixtime(activity.time_stamp, "%D %b %Y  %l:%i:%S"), 
      activity.activity, 
      activity.rfid_tag, 
      chemicals.description 
FROM activity 
LEFT JOIN chemicals ON chemicals.bar_code = activity.bar_code 
LEFT JOIN users ON users.badge_number=activity.badge_number 
WHERE  (activity="login") 
   OR (activity="logout") 
   OR (activity LIKE "Admin:%") 
   OR (activity="tag") 
   OR (activity="untag") 
   OR (activity LIKE "check out%") 
   OR (activity LIKE "pour%") 
   OR (activity="check out (unscheduled)") 
   OR (activity="not poured after checking out") 
   OR (activity LIKE "invalid:%") 
ORDER BY time_stamp DESC 
```

# c++ - C++ 堆排序向量

> ID：12870069
> 
> 赞同：0
> 
> 时间：2012-10-13T04:52:33.137
> 
> 标签：c++, algorithm, vector, std-pair, heapsort

我无法弄清楚我的堆排序问题出在哪里。
该程序从命令行获取文件名，将单词导入向量，然后将该向量转换为向量对，`vector<string,int>`其中 string 是单词，int 是该单词在文件中的实例数。

然后`vector<PAIR>`按字符串（值或 v）或 int（键或 k）排序。我的按键排序工作正常，但按值排序已关闭。我怀疑我在按值排序时缺少 max_heapify 中的 if 语句。这是我的代码：

### 主文件

```
#include <fstream>
#include <iostream>
#include <stdlib.h>
#include <vector>
#include <string>
#include <string.h>
#include <stdio.h>
#include <map>
#include <time.h>
#include "readwords.h"

using namespace std;

readwords wordsinfile;
vector<string> allwords;
bool times;
char *filename;
timespec timestart,timeend;
vector< pair<string,int> > allwords_vp;

timespec diffclock(timespec start, timespec end);

int main ( int argc, char *argv[] ) {

    filename = argv[1];

    //Lets open the file 
    ifstream ourfile2(filename);

    //Lets get all the words using our requirements
    allwords = wordsinfile.getwords(ourfile2);
    //Convert all the words from file and count how many times they 
    //appear.  We will store them in a vector<string,int> string 
    //being the word and int being how many time the word appeared
    allwords_vp = wordsinfile.count_vector(allwords);

    cout << "HeapSort by Values" << endl;
        if (times) {
        clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &timestart);
                wordsinfile.heapsort(const_cast<char *>("v"));
        clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &timeend);
                cout << "HeapSort by Values ran in "
                     << diffclock(timestart,timeend).tv_nsec << " nanosecond or "
                     << diffclock(timestart,timeend).tv_nsec/1000 << " millisecond"
                     << endl;
        } else {
                wordsinfile.heapsort(const_cast<char *>("v"));
        }

    cout << "HeapSort by Keys" << endl;
        if (times) {
        clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &timestart);
                wordsinfile.heapsort(const_cast<char *>("k"));
        clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &timeend);
                cout << "HeapSort by Keys ran in "
                     << diffclock(timestart,timeend).tv_nsec << " nanosecond or "
                     << diffclock(timestart,timeend).tv_nsec/1000 << " millisecond"
                     << endl;
        } else {
                wordsinfile.heapsort(const_cast<char *>("k"));
        }
}

timespec diffclock(timespec start, timespec end) {
    timespec temp;
    if ((end.tv_nsec-start.tv_nsec)<0) {
        temp.tv_sec = end.tv_sec-start.tv_sec-1;
        temp.tv_nsec = 1000000000+end.tv_nsec-start.tv_nsec;
    } else {
        temp.tv_sec = end.tv_sec-start.tv_sec;
        temp.tv_nsec = end.tv_nsec-start.tv_nsec;
    }
    return temp;
} 
```

### 读字.h

```
#ifndef READWORDS_H
#define READWORDS_H

#include <vector>
#include <map>
#include <utility>
#include <time.h>

typedef std::pair<std::string, int> PAIR;

bool isasciifile(std::istream& file);

class readwords {
    private:
         std::vector<PAIR> vp;
    public:
         std::vector<std::string> getwords(std::istream& file);
         std::vector<PAIR> count_vector(std::vector<std::string> sv);
         void print_vectorpair(std::vector<PAIR> vp);
         void print_vector(std::vector<std::string> sv);     
         void heapsort(char how[]);
         void buildmaxheap(std::vector<PAIR> &vp, int heapsize, char how[]);
         void max_heapify(std::vector<PAIR> &vp, int i, int heapsize, char how[]);
         void swap_pair(PAIR &p1, PAIR &p2);
}; 
```

### 读字.cpp

```
#include <fstream>
#include <iostream>
#include <map>
#include "readwords.h"
#include <vector>
#include <string>
#include <utility>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <time.h>

//using std::vector;
using namespace std;

typedef pair<string, int> PAIR;

// Do we have a ASCII file?
// Lets test the second 10 chars to make sure
// This method is flawed if the file is less than 10 chars
bool isasciifile(std::istream& file) {
    int c = 0;
    bool foundbin = false;
    for(c=0; c < 10;c++) {
        if(!isprint(file.get())){
            // Looks like we found a non ASCII file, or its empty.
            foundbin = true;
        }
    }
    return foundbin;
}

// This is our workhorse as it splits up the words based on our criteria and
// passes them back as a vector of strings.
vector<string> readwords::getwords(std::istream& file) {
    char c;
    string aword;
    vector<string> sv;

            //Let go through the file till the end  
                        while(file.good()) {
                                c = file.get();
                                if (isalnum(c)) {
                    //convert any uppercase to lowercase
                    if(isupper(c)) {
                                                c = (tolower(c));
                                        }
                    //if its a space lets go onto the next char
                                        if(isspace(c)) { continue; }
                    //everything looks good lets add the char to our word
                                        aword.insert(aword.end(),c);
                                } else {
                    //its not a alphnum or a space so lets skip it
                    if(!isspace(c)) { continue; }
                    //reset our string and increment
                                        if (aword != "") {sv.push_back(aword);}
                                        aword = "";
                                        continue;
                                }
                        }
    return sv;
}

vector<PAIR> readwords::count_vector(vector<string> sv) {
    unsigned int i = 0;
    int j = 0;
    int match = 0;

    // cout << "Working with these string: " << endl;
    // print_vector(sv);

    for (i=0; i < sv.size(); i++) {
        // cout << "count of i: " << i << " word is: " << sv.at(i) << endl;

        match = 0;
        if(readwords::vp.size() == 0) {
            readwords::vp.push_back(make_pair(sv.at(i),1)); continue;
        }

        for (j=readwords::vp.size() - 1; j >= 0; --j) {
            if (sv.at(i) == readwords::vp.at(j).first) {
                // cout << "Match found with: " << sv.at(i) << endl;;
                readwords::vp.at(j).second = readwords::vp.at(j).second + 1;
                match = 1;
            } 

            // cout << "Value of j and match: " << j << match << endl;
            if ( j == 0 && match == 0) {
                // cout << "Match found at end with: " << sv.at(i) << endl;;
                readwords::vp.push_back(make_pair(sv.at(i),1));
            }
        }
    }

    //Prob need to sort by first data type then second here, prior to sort functions.
    //Might not be the best place as the sort functions would alter it, if not here
    //then each sort requires to do secondary search

    return readwords::vp;
}

void readwords::print_vectorpair(vector<PAIR> vp) {
    unsigned int i = 0;

    for (i=0; i < vp.size(); ++i) {
        cout << vp.at(i).first << " " << vp.at(i).second << endl;
    }
}

void readwords::print_vector(vector<string> sv) {
    unsigned int i = 0;

    for (i=0; i < sv.size(); ++i) {
        cout << sv.at(i) << endl;
    }
}

void readwords::heapsort(char how[]) {
    int heapsize = (readwords::vp.size() - 1);

    buildmaxheap(readwords::vp, heapsize, how);

    for(int i=(readwords::vp.size() - 1); i >= 0; i--) {
        swap(readwords::vp[0],readwords::vp[i]);
        heapsize--;
        max_heapify(readwords::vp, 0, heapsize, how);
    }

    print_vectorpair(readwords::vp);
}

void readwords::buildmaxheap(vector<PAIR> &vp, int heapsize, char how[]) {

    for(int i=(heapsize/2); i >= 0 ; i--) {
        max_heapify(vp, i, heapsize, how);
    }
}

void readwords::max_heapify(vector<PAIR> &vp, int i, int heapsize, char how[]) {
    int left = ( 2 * i ) + 1;
    int right = left + 1;
    int largest;

    if(!strcmp(how,"v")) {  
        if(left <= heapsize && vp.at(left).second >= vp.at(i).second ) {
            if( vp.at(left).first >= vp.at(i).first ) {
                largest = left;
            } else {
                largest = i;
            }
        } else {
            largest = i;
        }

        if(right <= heapsize && vp.at(right).second >= vp.at(largest).second) {
            if( vp.at(right).first >= vp.at(largest).first) {
                largest = right;
            }
        }   
    }

    if(!strcmp(how,"k")) {  
        if(left <= heapsize && vp.at(left).first > vp.at(i).first) {
            largest = left;
        } else {
            largest = i;
        }

        if(right <= heapsize && vp.at(right).first > vp.at(largest).first) {
            largest = right;
        }   
    }

    if(largest != i) {
        swap(vp[i], vp[largest]);
        max_heapify(vp, largest, heapsize, how);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:22:43.330

> 然后该向量按字符串（值或 v）或 int（键或 k）排序。

该描述与代码不匹配，仅使用第一个组件排序的`how`参数进行`"k"`排序，即`string`，并且使用`"v"`as`how`参数进行排序将两个组件都考虑在内。

我认为通过 a`char[]`来确定排序标准是一个相当糟糕的主意，它应该是一个比较器函数，所以你只需要在`max_heapify`.

> 我的按键排序工作正常，但按值排序已关闭。我怀疑我在按值排序时缺少 max_heapify 中的 if 语句。

问题是堆排序需要总排序，否则无法正确排序。

你的条件

```
if(left <= heapsize && vp.at(left).second >= vp.at(i).second ) {
    if( vp.at(left).first >= vp.at(i).first ) {
        largest = left;
    } else {
        largest = i;
    }
} else {
    largest = i;
} 
```

检查`vp.at(left)`(resp. `right`) 的两个组件是否至少与 的相应组件一样大`vp.at(i)`，从而导致产品*偏序*，两个通用对不具有可比性，在这种情况下，您`max_heapify`什么也不做。

例如，对于`<"a",3>`和`<"b",2>`在`<"c",1>`位置`i, left, right`中，无论以何种顺序，您都`max_heapify`设置`largest`为`i`。

如果您的排序依据`"v"`是`int`首先基于组件进行排序，并且在平局的情况下，请考虑`string`组件，您需要区分大小写`vp.at(left).second > vp.at(i).second`和相等性（`right`当然也是如此）。例如

```
if(left <= heapsize && vp.at(left).second >= vp.at(i).second ) {
    if(vp.at(left).second > vp.at(i).second || vp.at(left).first >= vp.at(i).first ) {
        largest = left;
    } else {
        largest = i;
    }
} else {
    largest = i;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-13T12:50:07.840

要按值排序 a `vector<pair<string, int> >`，请考虑添加`vector<pair<int, string> >`

```
vector<pair<int, string> > v(orignal.size());
for (int i = 0; i < v.size(); ++i) v[i] = make_pair(original[i].second, original[i].first);
sort(v.begin(), v.end()); 
```

# python - 我可以制作一个 numpy 内存映射掩码吗？

> ID：12870072
> 
> 赞同：1
> 
> 时间：2012-10-13T04:53:38.397
> 
> 标签：python, memory-management, numpy

我正在尝试通过使用内存映射数组来处理我的应用程序中的内存问题。但是，作为计算的一部分，我需要将数组中的某些值设置为 0。不幸的是，数组掩码将需要额外的内存。有没有办法做到以下几点，以便干净地处理面具？

```
source_array = numpy.memmap(filename, dtype='float32', mode='w+', shape=shape)
#Load data into memory mapped numpy array
band.ReadAsArray(buf_obj = source_array)
#set values == 255 to 0
numpy.putmask(source_array, source_array >= 255.0, 0.0) 
```

我相信最后一行`source_array >= 255.0`必须在内存中创建一个大数组，对吧？除了手动循环遍历每个元素之外，是否有一种内存高效机制可以将我的所有 255 个值设置`source_array`为 0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T13:14:31.247

抱歉意识到，memapping 掩码当然不是这里的最佳解决方案。Numpy 并没有太多帮助以块的形式循环遍历数组（这将是最干净的方式），尽管您当然可以手动完成。您实际上可能在 numpy 方面取得了一些成功`numexpr`，它总是以块的形式进行计算以加速 numpy，但我没有尝试过。

* * *

我想这不是你想要的：

您始终可以使用`ufunc`s 的 out 参数和许多其他函数来要求 numpy 将结果直接存储到该数组中（通常也可以节省内存）。这意味着如果您创建一个空的内存映射数组，您可以这样做：

```
# You could use tempfile.NamedTemporaryFile. But I will leave that to you:
mask = np.memmap(tempfile, shape=source_array.shape, dtype=bool, mode='w+')
np.greater_equal(source_array, 255.0, out=mask) 
```

然后使用`mask`数组中的`putmask`. 这应该可以解决问题。

# windows-phone-7 - 带有 DropNet 的 Windows Phone

> ID：12870080
> 
> 赞同：0
> 
> 时间：2012-10-13T04:55:27.853
> 
> 标签：windows-phone-7, dropbox, dropnet

我正在 Windows Phone Emulator 上编写一个 Windows 应用程序来与 DropBox 帐户通信，并且正在使用 NuGet 库中的 DropNet 包。

我指的页面是：[http ://dkdevelopment.net/what-im-doing/dropnet/](http://dkdevelopment.net/what-im-doing/dropnet/)

以下是我已完成的步骤：

步骤 1) 创建客户端

```
DropNetClient GlobalClient = new DropNetClient("TOKEN", "SECRET", "testUserName", "testPassword"); 
```

我不确定 userToken 和 userSecret 中的内容，它不能是硬编码的用户名和密码！

步骤 2) 请求令牌

```
GlobalClient.GetTokenAsync((userToken) =>
        {
            //Dont really need to do anything with userLogin,
            //DropNet takes care of it for now
        },
        (error) =>
        {
            Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                MessageBox.Show(error.Message);
            });
        }); 
```

步骤 3) 构建授权 URL

```
var url = GlobalClient.BuildAuthorizeUrl("http://dkdevelopment.net/BoxShotLogin.htm"); 
```

步骤 4) 将浏览器重定向到 DropBox 登录页面。在此之后，DropBox 确实允许登录，但它显示此警告：“链接应用程序的请求无效”更重要的是，浏览器不会重定向到[http://dkdevelopment.net/BoxShotLogin.htm](http://dkdevelopment.net/BoxShotLogin.htm)。这表明出了问题。不确定是什么。

```
Uri testUri = new Uri(url.ToString());
        WebBrowserTask task = new WebBrowserTask();
        task.Uri = testUri;
        task.Show(); 
```

步骤 5）这不起作用。GlobalClient.UserLogin.Token 和 GlobalClient.UserLogin.Secret 未设置。

```
GlobalClient.GetAccessTokenAsync((accessToken) =>
        {
            //Store this token for "remember me" function
            GlobalClient.UserLogin.Token = accessToken.Token;
            GlobalClient.UserLogin.Secret = accessToken.Secret;
        },
        (error) =>
        {
            Deployment.Current.Dispatcher.BeginInvoke(() =>
                {
                    MessageBox.Show(error.Message);
                });
        }); 
```

有人知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T20:59:24.363

I figured out the problem. In Step 2, request token needs to be stored in order to build correct authorize URL and that request token needs to be passed as the first parameter. However when I try to store in the statement lambda like this, it does not get stored. What's the issue here? I think it's the way I might be using lambdas.

```
GlobalClient.GetTokenAsync((userToken) => 
{ 
    infoTextBlock.Text = userToken.Token; 
    GlobalClient.UserLogin.Token = userToken.Token; 
}
(error) => 
{ 
}); 
```

Thanks!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T04:36:46.167

问题出在以下代码中：

```
UserLogin.Token = userToken.Token; 
```

为令牌分配值并不意味着为请求设置了基础凭据。仅当您调用以下命令时才会这样做：

```
UserLogin = userToken; 
```

如果你问我，课堂界面的设计很糟糕。调用 UserLogin.Token = Something 和 UserLogin = NewLogin（关于底层业务规则）应该没有区别。

# playframework - 在 ec2 实例上运行应用程序（播放框架）时出现“java.io.IOException：错误 = 12，无法分配内存”

> ID：12870082
> 
> 赞同：-1
> 
> 时间：2012-10-13T04:55:39.437
> 
> 标签：playframework, amazon-ec2, playframework-2.0

当我在 ec2 实例上“运行”我的应用程序并从浏览器访问时，它将发送如下异常：

> 原因：java.io.IOException: java.io.IOException: error=12, Cannot allocate memory at java.lang.UNIXProcess.(UNIXProcess.java:164) ~[na:1.6.0_24] at java.lang.ProcessImpl .start(ProcessImpl.java:81) ~[na:1.6.0_24] at java.lang.ProcessBuilder.start(ProcessBuilder.java:468) ~[na:1.6.0_24] at sbt.SimpleProcessBuilder.run(ProcessImpl.scala :383) ~[na:na] at sbt.AbstractProcessBuilder.run(ProcessImpl.scala:137) ~[na:na] at sbt.AbstractProcessBuilder$$anonfun$runBuffered$1.apply(ProcessImpl.scala:168) ~[na ：无]

不知道是不是ec2实例的内存限制（612M），但是为什么初始化一个简单的play应用程序时需要很大的内存空间呢？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:08:00.920

我已经解决了这个问题。实际上，首先我尝试编译和打包一个 sing 文件，然后 scp 到 ec2 实例，但它也失败了。那是因为“播放应用程序有原生的单文件格式”。幸运的是，我找到了相关答案，使用“play dist”为播放应用程序创建独立版本（http://www.playframework.org/documentation/2.0/ProductionDist）。

谢谢大家！

# php - 是否有在开发组中共享数据库 SQL 更改的标准？

> ID：12870085
> 
> 赞同：2
> 
> 时间：2012-10-13T04:56:04.253
> 
> 标签：php, mysql, sql, development-environment

我很好奇是否有一个标准或开源应用程序允许一小群开发人员共享 MySQL 数据库更新/修改脚本？

现在所有的开发者都有自己的数据库实例的虚拟机，所以没有冲突，每个人都可以有单独的开发环境。当进行数据库更改时，我们将 SQL 脚本添加到 SVN 中的 SQL 文本文件中，然后每个开发人员在必要时在自己的环境中运行该文件。

我们遇到的问题是，当有人更新文件时，其他人运行脚本，然后我们添加额外的更改。如果有 ALTER 表语句等，它会变得非常混乱，我们会得到错误。

我们不想使用数据库复制，因为如果一个开发人员破坏了他们的数据库，我们不希望其他人受到影响。

我们使用 ExpressionEngine，我注意到他们使用 PHP 来检查/验证 SQL 更新，这是我们需要走的方向吗？

还有其他人处理这个问题吗？如果是这样，你最终使用了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:21:38.223

也许您想要的是**迁移**支持。

然后，您将迁移代码放在您使用的任何**CVS**中，每个团队成员在他们的机器上**迁移**（即运行迁移脚本），这会同步所有数据库。

我使用的框架（**yii**）支持它，但如果您不想将整个框架带过来，我很确定有一些独立的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:32:57.843

一个相当简单的解决方案是有一个目录，而不是单个文件。然后每次开发人员进行更改时，他们都会将“补丁文件”添加到目录中。其他开发人员可以通过运行他们尚未运行的任何补丁来更新他们的数据库。

这甚至可以通过在数据库中有一个元数据表来跟踪哪些补丁已经运行并编写脚本来运行任何没有运行的补丁来实现自动化。

Lorna Mitchell 在博客中介绍了一些这样做的策略：

[http://www.lornajane.net/posts/2010/simple-database-patching-strategy](http://www.lornajane.net/posts/2010/simple-database-patching-strategy)

[http://www.lornajane.net/posts/2012/taking-on-a-database-change-process](http://www.lornajane.net/posts/2012/taking-on-a-database-change-process)

评论是完整的，或者人们推荐了各种工具来帮助完成这个过程。就个人而言，我只有一个相当简单的脚本，不需要更大的库，但你的里程可能会有所不同。

# html - 保持背景和菜单栏固定在适当的位置

> ID：12870087
> 
> 赞同：0
> 
> 时间：2012-10-13T04:56:40.147
> 
> 标签：html, css, background

我试图修复菜单栏和背景的位置。

所以我将此代码添加到正文中以修复背景的位置：

```
<body style ="width: 100%; background-image: url(images/bkgd3_1260_black.jpg); background-attachment:fixed; background-size: cover; background-position:center;>
    <div id="menu-bar"> xxxxx
    </div>
    <---other content--->
</body> 
```

我在 head 标签下放了一个代码来固定菜单栏的位置，即：

```
<head>
    <style type="text/css">
        #menu-bar {
            position: fixed;
            left: 0px;
            top: 0px;
            width: 1000px;
            height: 25px;
            z-index: 100;
            background-color: #040404;
            font-family: Calibri;
            font-size: 16px;
            font-style: normal;
            text-transform: none;
            text-decoration:none;
            color: rgb(231,231,231);
            line-height: normal;
            letter-spacing: normal;
            text-align: left;
            word-spacing: normal;
            display: table-row;
            background-repeat: no-repeat;
            border-bottom-width: thin;
            border-bottom-style: solid;
            border-left-style: none;
            border-right-style: none;
            border-top-style: none;
            border-bottom-color: rgb(204,255,38);
        }
    </style>
<head> 
```

但是，结果是：背景是固定的，但菜单栏不是。当我向下滚动时，菜单栏就消失了。我实际上希望它保持在最顶端。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:17:33.503

您的身体风格声明中缺少结尾的 "。

# javascript - 以下代码中的自定义文本区域？

> ID：12870090
> 
> 赞同：-1
> 
> 时间：2012-10-13T04:56:55.620
> 
> 标签：javascript, jquery, html, css, textbox

请任何人都可以帮助我使以下代码中的文本区域出现在保存按钮的所有区域中。我已经提供了整个页面的代码。我用过cdn托管的jquery。

```
!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>
        </title>
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <link rel="stylesheet" href="my.css" />
        <style>
            /* App custom styles from google and microsoft*/
        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
        </script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.js">
        </script>
        <script src="my.js">
        </script>
    </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-role="content">
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="textarea1">
                            <h1 style='text-align:center;'>Please enter your notes here
                            </h1>
                        </label>
                        <textarea name="" id="textarea1" placeholder="">
                        </textarea>
                    </fieldset>
                </div>
                <input type="submit" data-icon="check" data-iconpos="left" value="Save" />
            </div>
        </div>
        <script>

        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:13:29.263

这里使用 css3 [http://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/) 和[http://jsfiddle.net/cuyJ4/15/](http://jsfiddle.net/cuyJ4/15/)和 jquery的解决方案

CSS：

```
textarea { 
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:44:50.343

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>
        </title>
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <link rel="stylesheet" href="my.css" />
        <style>

        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
        </script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.js">
        </script>
        <script src="my.js">
        </script>
    </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-role="content">
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="textarea1">
                            <h1 style='text-align:center;'>Please enter your notes here
                            </h1>
                        </label>
                        <textarea name="" id="textarea1" placeholder="" style="width:1246px;">
                        </textarea>
                    </fieldset>
                </div>
                <input type="submit" data-icon="check" data-iconpos="left" value="Save" />
            </div>
        </div>
        <script>

        </script>
    </body>
</html>

Try this. I am not sure if this is what you need. 
```

# sql - 如何对具有 NULL 值的字段进行分组？

> ID：12870094
> 
> 赞同：5
> 
> 时间：2012-10-13T04:57:25.277
> 
> 标签：sql, sqlite, null, count, group-by

我有一个有 2 个字段的表

```
 x          y
----       ----
 1         null            
 2          5
 3          5
 4         null
 5         null
 6          10
 7          5 
```

我的 SQLite 查询是

```
select y,count(y)
from mytable
group by y 
```

结果是

```
null    0
 5      3
 10     1 
```

预计会看到 null 3。
但是输出为 null 0。
这是什么意思？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-13T05:03:06.377

[来自 SQLite 中的聚合函数](http://www.sqlite.org/lang_aggfunc.html)

> count(X) 函数返回组中 X 不为 NULL 的次数的计数。count(*) 函数（不带参数）返回组中的总行数。

因此，该`COUNT`函数不算数`NULL`，因此请使用`COUNT(*)`而不是`COUNT(y)`.

```
SELECT y, COUNT(*) AS COUNT
FROM mytable
GROUP BY y 
```

或者你也可以`COUNT(x)`像这样使用。

```
SELECT y, COUNT(x) AS COUNT
FROM mytable
GROUP BY y 
```

### [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!5/987f5/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T11:56:26.200

您可以在 SQL 中使用 isnull ，它为所有空值赋予不同的身份

只需运行以下查询，您将获得所需的结果

```
Select y,count(isnull(y,-1)) as [Count]
from mytable
group by y 
```

# .htaccess - WordPress插件链接不起作用

> ID：12870095
> 
> 赞同：0
> 
> 时间：2012-10-13T04:57:36.060
> 
> 标签：.htaccess, wordpress, permalinks

我正在本地使用最新版本的 WordPress (3.4.2) (XAMPP 1.7.7 [PHP: 5.3.8]) 开发一个插件，由于某种原因，这些链接在插件中不起作用。我只有一个简单的删除链接，该链接从插件管理页面链接到“delete-gallery.php”文件。这个文件（delete-gallery.php）只调用一个函数来从数据库中删除记录并重定向回调用它的页面（插件管理页面）。很简单。但是，当单击链接时，由于某种原因，我被定向到 XAMPP 根目录 (localhost:8080/xampp) 而不是请求的目标 (delete-gallery.php)。

```
$url = plugins_url('includes/delete-gallery.php', _FILE_);
echo '<a href="'.$url.'?gallery_id='.$gallery['gallery_id'].'">Delete</a>'; 
```

我知道链接上的 hrefs 路径是正确的，因为它在悬停时显示在状态栏中，但由于某种原因，它在提交时没有在本地找到文件。如果我将目的地设置为外部某个地方（即 google.com 等），它可以正常工作，但不能在 wordpress 本地。

永久链接结构已更新，.htaccess 文件目前是这样的：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

如果我使用空白的 .htaccess 文件，我不会被重定向到 XAMPP 根目录，而是会收到错误消息“找不到对象！在此服务器上找不到请求的 URL。...' 当点击链接时。

是否需要在 .htaccess 中设置一些内容以允许在 wordpress 中进行本地重定向？我在这里不知所措。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:41:28.333

这是一个简单的语法错误。在 FILE 参数中有单个下划线而不是双打。

```
_FILE_ -> __FILE__ 
```

# javascript - 静态站点上的 Wordpress 插件功能

> ID：12870097
> 
> 赞同：0
> 
> 时间：2012-10-13T04:58:16.637
> 
> 标签：javascript, html, wordpress, static

有没有办法在静态网站上实现 Wordpress 插件的功能？

例如，如果我在 http://mystaticsiteatroot.com 有一个静态 html 站点，并且在[http://mystaticsiteatroot.com/wordpblog](http://mystaticsiteatroot.com/wordpblog)[等](http://mystaticsiteatroot.com) 子目录中有一个 Wordpress 安装，那么我可以以某种方式调用其中一个函数或返回通过将 Javascript 放置在[http://mystaticsiteatroot.com](http://mystaticsiteatroot.com)或其静态子页面之一（例如[http://mystaticsiteatroot.com/static-page-2/](http://mystaticsiteatroot.com/static-page-2/) ）上的 Wordpress 插件？

这方面的一个例子是在静态主页上实现一个由高级 Wordpress 插件生成的 Javascript 弹出表单。

我知道这将是一个插件一个插件的基础，但我想大致了解它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:50:56.577

如果您希望*将根安装移动到其自己的目录*，或者希望*使用预先存在的子目录安装*，或者希望将*您的主站点的 URL 指向*子目录，请选中[此项](http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory)

 ***如果你想为你的站点/博客生成静态 HTML 页面，你可以[检查这个](http://wordpress.org/extend/plugins/really-static/)

如果您希望围绕静态 HTML 页面、pdf 文件、音频或视频文件自动包装 WordPress 主题。[检查这个](http://wordpress.org/extend/plugins/static-pages/)

如果您希望生成 WordPress 安装的静态 HTML 版本并相应地调整 URL。[检查这个](http://wordpress.org/extend/plugins/static-html-output-plugin/)***

# javascript - Youtube Iframe API：特定 getcurrenttime() 上的触发函数

> ID：12870102
> 
> 赞同：0
> 
> 时间：2012-10-13T04:59:14.860
> 
> 标签：javascript, youtube-api, dom-events

我试图在`player.getCurrentTime() == 10`sec 时触发函数（以及更多像这样的间隔）。

我可以用 JS 计时事件来做到这一点，但它不准确并且非常减慢我的浏览器。

有替代品吗？

当前代码：

```
trigFuncAt = Array(3, 5, 7, 10);
setInterval(checkFunc(), 200);

function checkFunc(){
    if( include( trigFuncAt, player.getCurrentTime() ) ){
        DoThis();
    }
}

function include(arr,obj) {
    return (arr.indexOf(obj) != -1);
}

function DoThis(){...} 
```

`player.getCurrentTime()`是一种计时器类型的变量，它每毫秒更改一次。

YT API：[https ://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:40:44.423

这个想法是你使用 setTimeout 而不是 setInterval，因为你不能保证函数需要执行的时间在间隔时间之间是足够的。您还需要转换为当前时间。示例代码：

```
// implicit global video containing YT video
var keypoints = [1, 2, 3, 10, 15];
var updatePlayerInfo = function() {
    var played,
        i = 0,
        keypoint;
    // not ready?
    if (!video.getCurrentTime) {
        return false;
    }
    // ready!
    if (played = parseInt(video.getCurrentTime(), 10)) {
        for (; keypoint = keypoints[i++]; ) {
            if (keypoint === played) {
                // do something
                doSomething();
                break;
            }
        }
    }
    // throttle function!
    setTimeout(function(){
        updatePlayerInfo();
    }, 250);
}; 
```

# python - Python - 'NoneType' 对象不可下标错误

> ID：12870103
> 
> 赞同：0
> 
> 时间：2012-10-13T04:59:32.283
> 
> 标签：python, dijkstra

我是 Python 的初学者，遇到这个问题已经有一段时间了。任何纠正问题的建议都是有价值的。下面是用于查找最短路径的代码，使用 Dijkstra 算法。我有成本矩阵和源作为输入。

```
def dijkstra(cost_matrix,source):
    n = 20
    dist = [0 for row in range(20)]
    visited = [0 for row in range(20)]
    for j in range(20):
        visited[j] = "False"
    visited[source] = "True"
    for i in range(20):
        dist[i] = cost_matrix[source][i]
    prev_min = source
    for k in range(20):
        minimum = min(dist)
        minimum2 = min(minimum,n)
        for i in range(20):
            if dist[i] > (cost_matrix[prev_min][minimum2] + cost_matrix[minimum2][i]):
                dist[i] = cost_matrix[prev_min][minimum2] + cost_matrix[minimum2][i]
        visited[minimum2] = "True"
        prev_min = minimum2
    return dist 
```

计算 cost_matrix 的代码

```
def matrix():
    k = 30
    b_ij = [[0 for row in range(20)] for col in range(20)]
    a_ij = [[0 for row in range(20)] for col in range(20)]
    cost_matrix = [[0 for row in range(20)] for col in range(20)]
    for i in range(20):
        for j in range(20):
            rand = random.randint(0,8)
            b_ij[i][j] = rand
            b_ij[j][i] = rand
    while(k > 0):
        rand1 = random.randint(0,19)
        rand2 = random.randint(0,19)
        a_ij[rand1][rand2] = 200
        a_ij[rand2][rand1] = 200
        k = k - 1
    for i in range(20):
        for j in range(20):
            if a_ij[i][j] != 200:
                rand = random.randint(0,8)
                a_ij[i][j] = rand
                a_ij[j][i] = rand
    for i in range(len(a_ij)):
        for j in range(len(b_ij[0])):
            for k in range(len(b_ij)):
                cost_matrix[i][j] += a_ij[i][k] * b_ij [k][j] 
```

错误信息：

```
Traceback (most recent call last):
  File "ass1.py", line 60, in <module>
    print(dijkstra(cost_matrix, 1))
  File "ass1.py", line 45, in dijkstra
    dist[i] = cost_matrix[source][i]
TypeError: 'NoneType' object is not subscriptable 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:31:04.813

您还没有在创建`cost_matrix`. 您发布了矩阵函数的代码，但没有发布*使用*矩阵函数的代码。

但是，看起来问题在于您的`matrix`函数没有返回任何内容。它只是创建一个矩阵并将其丢弃。您需要`return cost_matrix`在该函数的末尾添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:30:40.957

cost_matrix 或 cost_matrix[source] 的值为 None，但它应该是一个列表。

在该行之前打印它们：

```
dist[i] = cost_matrix[source][i] 
```

找出问题所在。

顺便说一句，你可能应该使用 numpy 来处理这类事情。

# arrays - 比较数组是否相等，忽略元素的顺序

> ID：12870105
> 
> 赞同：31
> 
> 时间：2012-10-13T05:00:13.157
> 
> 标签：arrays, postgresql

我有一个包含 4 个数组列的表。结果如下：

```
ids       signed_ids   new_ids   new_ids_signed
{1,2,3} | {2,1,3}    | {4,5,6} | {6,5,4} 
```

无论如何，通过忽略元素的顺序来比较它们`ids`以`signed_ids`使它们相等？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2017-03-02T01:30:45.190

您可以使用包含的运算符：

```
(array1 <@ array2 and array1 @> array2) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-13T06:14:40.957

附加模块[**intarray**](https://www.postgresql.org/docs/current/intarray.html)**为 的数组`integer`**提供运算符，这些运算符通常（快得多）。每个数据库安装一次（在 Postgres 9.1 或更高版本中）：

```
CREATE EXTENSION intarray; 
```

那么你就可以：

```
SELECT **uniq**(**sort**(ids)) = **uniq**(**sort**(signed_ids));
```

或者：

```
SELECT ids **@>** signed_ids AND ids **<@** signed_ids;
```

**大胆**强调来自 intarray 的函数和运算符。
在第二个示例中，如果 left 和 right 参数是 type ，则运算符解析到达专门的 intarray 运算符`integer[]`。

这两个表达式都将忽略元素的顺序和重复性。[在此处](https://www.postgresql.org/docs/current/intarray.html)的有用手册中进一步阅读。

`intarray`运算符仅适用于`integer`( `int4`) 的数组，而不适用于`bigint`( `int8`) 或`smallint`( `int2`) 或任何其他数据类型。

与默认的泛型运算符不同，`intarray`运算符不接受数组中的 NULL 值。任何涉及的数组中的 NULL 都会引发异常。如果您需要使用 NULL 值，您可以**默认使用标准的通用运算**`OPERATOR`符，方法是使用构造对运算符进行模式限定：

```
SELECT ARRAY[1,4,null,3]::int[] **OPERATOR(pg_catalog.@>)** ARRAY[3,1]::int[]
```

通用运算符不能将**索引**与`intarray`运算符类一起使用，反之亦然。

有关的：

*   [smallint[] 列上的 GIN 索引未使用或错误“操作员不是唯一的”](https://stackoverflow.com/questions/39798993/gin-index-on-smallint-column-not-used-or-error-operator-is-not-unique/39802812#39802812)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-13T05:15:32.867

最简单的做法是对它们进行排序并比较它们的排序。请参阅[PostgreSQL 中的排序数组](https://stackoverflow.com/a/12870458/398670)。

给定样本数据：

```
CREATE TABLE aa(ids integer[], signed_ids integer[]);
INSERT INTO aa(ids, signed_ids) VALUES (ARRAY[1,2,3], ARRAY[2,1,3]); 
```

最好的办法是，如果数组条目始终是整数，则使用 intarray 扩展名，正如[Erwin 在他的回答中解释的那样](https://stackoverflow.com/a/12870508/398670)。它*比*任何纯 SQL 公式都要快得多。

否则，对于适用于任何数据类型的通用版本，请定义`array_sort(anyarray)`：

```
CREATE OR REPLACE FUNCTION array_sort(anyarray) RETURNS anyarray AS $$
SELECT array_agg(x order by x) FROM unnest($1) x;
$$ LANGUAGE 'SQL'; 
```

并使用它对排序后的数组进行排序和比较：

```
SELECT array_sort(ids) = array_sort(signed_ids) FROM aa; 
```

有一个重要的警告：

```
SELECT array_sort( ARRAY[1,2,2,4,4] ) = array_sort( ARRAY[1,2,4] ); 
```

将是错误的。这可能是也可能不是您想要的，取决于您的意图。

* * *

或者，定义一个函数`array_compare_as_set`：

```
CREATE OR REPLACE FUNCTION array_compare_as_set(anyarray,anyarray) RETURNS boolean AS $$
SELECT CASE
  WHEN array_dims($1) <> array_dims($2) THEN
    'f'
  WHEN array_length($1,1) <> array_length($2,1) THEN
    'f'
  ELSE
    NOT EXISTS (
        SELECT 1
        FROM unnest($1) a 
        FULL JOIN unnest($2) b ON (a=b) 
        WHERE a IS NULL or b IS NULL
    )
  END
$$ LANGUAGE 'SQL' IMMUTABLE; 
```

进而：

```
SELECT array_compare_as_set(ids, signed_ids) FROM aa; 
```

`array_sort`这与比较两个ed 值略有不同。`array_compare_as_set`将消除重复，使`array_compare_as_set(ARRAY[1,2,3,3],ARRAY[1,2,3])`真实，而`array_sort(ARRAY[1,2,3,3]) = array_sort(ARRAY[1,2,3])`将是错误的。

这两种方法的性能都会很差。考虑确保您始终首先存储已排序的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-05T08:11:44.243

如果您的数组**没有重复**并且具有**相同的维度**：

*   使用数组包含`@>`
*   并且`array_length`长度必须与两边的尺寸相匹配

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-08-12T11:15:25.607

> select (string_agg(a,',' order by a) = string_agg(b,',' order by b)) from (select unnest(array[1,2,3,2])::text as a,unnest(数组[2,2,3,1])::text as b) A

# selenium - Selenium 404 构建列表

> ID：12870107
> 
> 赞同：4
> 
> 时间：2012-10-13T05:00:14.137
> 
> 标签：selenium, web-scraping

是否可以让 Selenium 抓取 TLD 并逐步导出找到的任何 404 列表？

我在 Windows 机器上停留了几个小时，想在回到 *nix 的舒适环境之前运行一些测试......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T22:01:34.487

我不太了解 Python，也不了解它的任何常用库，但我可能会做这样的事情（使用 C# 代码作为示例，但这个概念应该适用）：

```
// WARNING! Untested code here. May not completely work, and
// is not guaranteed to even compile.

// Assume "driver" is a validly instantiated WebDriver instance
// (browser used is irrelevant). This API is driver.get in Python,
// I think.
driver.Url = "http://my.top.level.domain/";

// Get all the links on the page and loop through them,
// grabbing the href attribute of each link along the way.
// (Python would be driver.find_elements_by_tag_name)
List<string> linkUrls = new List<string>();
ReadOnlyCollection<IWebElement> links = driver.FindElement(By.TagName("a"));
foreach(IWebElement link in links)
{
    // Nice side effect of getting the href attribute using GetAttribute()
    // is that it returns the full URL, not relative ones.
    linkUrls.Add(link.GetAttribute("href"));
}

// Now that we have all of the link hrefs, we can test to
// see if they're valid.
List<string> validUrls = new List<string>();
List<string> invalidUrls = new List<string>();
foreach(string linkUrl in linkUrls)
{
    HttpWebRequest request = WebRequest.Create(linkUrl) as HttpWebRequest;
    request.Method = "GET";

    // For actual .NET code, you'd probably want to wrap this in a
    // try-catch, and use a null check, in case GetResponse() throws,
    // or returns a type other than HttpWebResponse. For Python, you
    // would use whatever HTTP request library is common.

    // Note also that this is an extremely naive algorithm for determining
    // validity. You could just as easily check for the NotFound (404)
    // status code.
    HttpWebResponse response = request.GetResponse() as HttpWebResponse;
    if (response.StatusCode == HttpStatusCode.OK)
    {
        validUrls.Add(linkUrl);
    }
    else
    {
        invalidUrls.Add(linkUrl);
    }
}

foreach(string invalidUrl in invalidUrls)
{
    // Here is where you'd log out your invalid URLs
} 
```

此时，您有一个有效和无效 URL 的列表。您可以将这一切包装成一个方法，您可以将 TLD URL 传递到该方法中，并使用每个有效 URL 递归调用它。这里的关键是您没有使用 Selenium 来实际确定链接的有效性。如果您真的在进行递归爬网，您不会希望“单击”链接以导航到下一页。相反，您希望直接导航到页面上的链接。

您可能会采取其他方法，例如通过代理运行所有内容，并以这种方式捕获响应代码。这在一定程度上取决于您期望如何构建您的解决方案。

# arrays - 如何为采用单个数组参数的构造函数调用 New-Object？

> ID：12870109
> 
> 赞同：61
> 
> 时间：2012-10-13T05:00:16.680
> 
> 标签：arrays, powershell, parameters, constructor

在 PowerShell 中，我想用来`New-Object`调用单参数 .Net 构造函数`new X509Certificate2(byte[] byteArray)`。问题是当我使用 powershell 中的字节数组执行此操作时，我得到

> 新对象：找不到“X509Certificate2”和参数计数的重载：“516”。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-13T17:31:21.273

这种使用方法`new-object`应该有效：

```
$cert = new-object System.Security.Cryptography.X509Certificates.X509Certificate `
      -ArgumentList @(,$bytes) 
```

诀窍是 PowerShell 需要一组构造函数参数。当只有一个参数并且它是一个数组时，它会混淆 PowerShell 的重载解析算法。上面的代码通过将字节数组放入一个只有一个元素的数组中来帮助它。

**更新：**在 PowerShell >= v5 中，您可以像这样直接调用构造函数：

```
$cert = [System.Security.Cryptography.X509Certificates.X509Certificate]::new($bytes) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-13T05:15:48.723

令我惊讶的是，我尝试了这个，它似乎有效：

```
[byte[]] $certPublicBytes = something
$cert = [System.Security.Cryptography.X509Certificates.X509Certificate] $certPublicBytes
return $cert 
```

我还不知道它有什么魔力，因此感谢您的解释性评论。:)

（注意：我发现像上面那样使用方括号类型名称也会导致其他错误，例如“无法将值“System.Byte []”转换为类型“System.Security.Cryptography.X509Certificates” .X509Certificate”。错误：“找不到请求的对象。” Keith 推荐的显式 New-Object 方法似乎更好！）

# objective-c - NSPredicate 101：将 NSPredicate 与自定义对象的 NSMutableArray 一起使用

> ID：12870115
> 
> 赞同：3
> 
> 时间：2012-10-13T05:02:02.950
> 
> 标签：objective-c, ios, nsmutablearray, nspredicate

这是一个非常基本的问题，即使我认为了解 NSPredicate 的基础知识，我仍然对为什么我在这里遇到错误感到有些困惑（searchText 是一个指向正在传递的 NSString 对象的指针到方法）。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF.name contains[cd] %@", searchText];
_searchResults = [_personArray filteredArrayUsingPredicate:predicate]; 
```

我有一个 NSMutableArray 的自定义对象（例如，Person 对象），它有一个 name 属性。我要做的就是在用户开始输入 UISearchBar 时使用 NSPredicate 过滤潜在的匹配项。IB 组件非常简单明了，而且看起来运行良好。但是，当我尝试搜索并开始过滤时，基本应用程序崩溃并出现以下错误：

`'NSInvalidArgumentException', reason: '-[xPerson isEqualToString:]: unrecognized selector sent to instance 0x8043340'`

我的理解是谓词将传递给 NSMutableArray 中的每个对象，谓词中的 SELF 关键字指的是相应的对象（我相信，在这种情况下，它甚至不是必需的），并且 .name 是能够在自定义对象上使用合成属性。该错误似乎表明 -isEqualToString: 正在自定义对象而不是对象的属性上调用调用。

任何关于我做错了什么的建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T05:16:25.930

试试这样

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name contains[cd] %@", searchText];
_searchResults = [_personArray filteredArrayUsingPredicate:predicate]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:07:41.287

我有同样的问题。错误不在精确值中，而是在表格视图的单元格中。我是这样设置单元格的：

```
cell.textLabel.text = [self.searchResults objectAtIndex:indexPath.row]; 
```

我忘了让对象解析。然后我将代码更改为：

```
cell.textLabel.text = ((Product*)[self.searchResults objectAtIndex:indexPath.row]).name; 
```

所以，也许你的错误也不在 NSPredicate 中。

# mysql - 比较两列以获得不同的数据

> ID：12870116
> 
> 赞同：3
> 
> 时间：2012-10-13T05:02:03.960
> 
> 标签：mysql, sql

我想比较 2 个表以获取不同的数据。

```
tb1              tb2
==============   ==============
|id| doc_name|   |id| doc_summ|
==============   ==============
|1 | 01180543|   |1 | 01180543|
|2 | Chord   |   ============== 
============== 
```

我想比较`doc_name`和`doc_summ`。从那个例子中，结果必须是`Chord`.

```
$q = mysql_query(" SELECT t1.doc_name FROM tb1 as t1, tb2 as t2 WHERE t1.doc_name != t2.doc_summ");
while ($row = mysql_fetch_array($q)){
    $doc_copy = $row['doc_name'];
} 
```

但结果仍然返回所有数据。怎么了？谢谢你 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T05:16:48.013

您可以使用 连接两个表`LEFT JOIN`。它的作用是仅在表 2 上没有匹配项时才显示表 1 的记录。

```
SELECT  a.*
FROM    tb1 a
        LEFT JOIN tb2 b
            ON a.doc_name = b.doc_summ
WHERE   b.doc_summ IS NULL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/1394c/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T05:09:27.807

试试这个：

```
SELECT t1.doc_name 
FROM   t1 
WHERE  NOT EXISTS(SELECT t2.doc_summ 
                  FROM   t2 
                  WHERE  t2.doc_summ = t1.doc_name) 
```

您的查询中的错误是您要连接两个表，因此您总是会在 t2 中找到不满足 where 条件的行，因此显示所有数据。

**[演示](http://sqlfiddle.com/#!2/fdf7c/1/0)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T05:19:30.200

也许你可以试试这个

```
select tb1.doc_name from tb1 left join tb2 on tb1.id = tb2.id where tb1.doc_name != tb2.doc_summ; 
```

# algorithm - 针对 k 条最短路径的 Eppstein 算法和 Yen 算法

> ID：12870122
> 
> 赞同：11
> 
> 时间：2012-10-13T05:03:03.670
> 
> 标签：algorithm, graph-algorithm, shortest-path

我试图准确地理解这些算法是如何工作的，但我一直无法找到一个简单的解释。如果有人能提供或指出这些算法的描述比原始论文中的描述更容易理解，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-26T00:43:39.273

首先，让我为您提供您正在谈论的论文的链接。

Eppstein 的论文：[D. Eppstein，“寻找 k 条最短路径”，SIAM J. Comput.，第一卷。28，没有。2，第 652-673 页，1999 年 2 月](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CFEQFjAD&url=http%3A%2F%2Fciteseerx.ist.psu.edu%2Fviewdoc%2Fdownload%3Fdoi%3D10.1.1.39.3901%26rep%3Drep1%26type%3Dpdf&ei=uxXaUKzoL8Kb0QWCyYGoCg&usg=AFQjCNHvBqtdj-r_oGwaHFZJgNyLk4jMbw&sig2=w6nNVkoB9qlR0CiwsCrVWw&bvm=bv.1355534169,d.d2k)

Yen 的论文：[JY Yen，“寻找网络中的 K 个最短无环路径”，管理科学，卷。17，没有。11，第 712-716 页，1971 年。](https://www.adrian.idv.hk/2011-05-18-y71-shortestpath/)

以下是我对日元算法的解释：

Yen 的算法使用两个列表，即列表 A（从源到目的地的永久最短路径 - 按时间顺序排列）和列表 B（暂定/候选最短路径）。首先，您必须使用任何合适的最短路径算法（例如 Dijkstra）找到从源到目的地的第一条最短路径。然后 Yen 利用第 k 个最短路径可以共享来自第 (k-1) 个最短路径的边和子路径（从源到路径内任何中间节点的路径）的想法。然后你必须采取第（k-1）条最短路径并依次使路由中的每个节点不可达，即擦掉通往路由内节点的特定边缘。一旦节点不可达，找到从前一个节点到目的地的最短路径。然后你有一个新的路由，它是通过附加公共子路径（从源到不可达节点的前一个节点）创建的，并添加从前一个节点到目标的新最短路径。这条路线然后被添加到列表 B 中，前提是它之前没有出现在列表 A 或列表 B 中。对路线中的所有节点重复此操作后，您必须在列表 B 中找到最短的路线并将其移至列表 A。您只需对您拥有的 K 数量重复此过程。

该算法的计算复杂度为 O(kn^3)。请阅读论文以获取更多详细信息。

算法如下：

```
G = Adjacent Matrix of the Network
Initialize:
A_1 = shortest-path from source to destination
Glocal ← Local copy of G
for k = 2 → K do
 for i = 1 → [len(A_(k−1) ) − 1] do
  Current Node ← A_(k−1) [i]
  Ri ← Sub-path (root) from source till current node in A_(k−1)
  for j = 1 → k − 1 do
   Rj ← Sub-path (root) from source till current node in A_j
   if Ri == Rj then
    Next Node ← Aj [i+1]
    Glocal(Current Node, Next Node) ← infinity
    Current Node ← unreachable
   end if
  end for
  Si ← Shortest-path from current node till destination
  Bi ← Ri + Si
 end for 
 A_k ← Shortest-path amongst all paths in B
 Restore original graph: Glocal ← Local copy of G
end for 
```

不幸的是，我没有使用 Eppstein 的算法，因为 Yen 的算法最适合我的问题。

希望这可以帮助。干杯。

=====

编辑：

请同时查看[维基百科条目](http://en.wikipedia.org/wiki/Yen%27s_algorithm)。它有一个很好的例子。

=====

编辑：

我在C中找到了一些实现。链接如下：

[Eppstein 实施](ftp://ftp.heanet.ie/disk1/sourceforge/q/project/qu/quabbstimon/EPPSTEIN.c)和 Eppstein[加载图](ftp://ftp.heanet.ie/disk1/sourceforge/q/qu/quabbstimon/loadgraph.c)。

如果你有兴趣，这里有 Eppstein 的[懒惰版本](http://rsat.ulb.ac.be/help.pathfinder.html)。链接如下：

[希门尼斯和马扎尔的懒惰爱普斯坦](http://www.math.tu-dresden.de/~belov/GrundPrakt/CNOP/CNOP/src/REA_k.c)

=====

编辑：

只是另一个[链接](http://www.ics.uci.edu/~eppstein/pubs/p-kpath.html)。这一个包含几个实现（C/C++）。

=====

编辑：

我找到了对 Eppstein 算法的一个[很好的解释](http://www.isi.edu/natural-language/people/epp-cs562.pdf)。

# jquery - 我将此jquery切换事件绑定到哪个对象

> ID：12870124
> 
> 赞同：0
> 
> 时间：2012-10-13T05:03:10.877
> 
> 标签：jquery, toggle

我正在使用 jquery`toggle()`来更改一些像这样的 css 并且效果很好......

```
$("#button").toggle(
    function(){
        $("#playlist").css("bottom","0");
    },
    function(){
        $("#playlist").css("bottom","-200px");
    }
); 
```

我想在按下字母 m 时触发同样的事情，所以我将它添加到一个案例中（它设置在我可以为按下的键创建案例的位置）：

```
.... 
case 77: // M
   What object to I bind to the toggle function? 
```

我在那里使用什么对象来执行与上述相同的功能？

**谢谢大家的真正有用的答案！**

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T05:10:32.793

一个简单的解决方案是触发元素`click`上的事件：`#button`

```
case 77: // M
    $("#button").trigger("click"); 
```

由于[toggle()](http://api.jquery.com/toggle-event/)在后台绑定到`click`事件，这将调用适当的处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T05:07:32.270

要手动调用事件处理程序，首先必须将函数定义为命名函数而不是匿名函数：

```
$("#button").toggle(on, off);

function on(){
    $("#playlist").css("bottom","0");
    isOn = true;
}
function off(){
    $("#playlist").css("bottom","-200px");
    isOn = false;
} 
```

接下来，您可以手动调用处理程序并使用布尔值作为开关：

```
case 77:
    if(isOn == true) {
        off();
    } else {
        on();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T05:07:45.263

`toggle`[不推荐使用](http://api.jquery.com/category/deprecated/)event 方法，可以使用对象`css`的函数和 `which`属性`event`：

```
$("#button").on('click', function(){
    $("#playlist").css("bottom", function(i, bottom){
        return bottom === '0px' ? '-200px' : '0px' 
    });
});

$(document).on('keyup', function(event){
   if (event.which === '77') {
      $("#playlist").css("bottom", function(i, bottom){
          return bottom === '0px' ? '-200px' : '0px' 
      });
   }
}) 
```

[http://jsfiddle.net/NPKKR/](http://jsfiddle.net/NPKKR/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T05:09:12.387

您可以像这样保存状态：

```
case 77: // M
     var button = $("#button");
     if (button.data("toggled") == true)
     {
           $("#playlist").css("bottom","0");
           button.data("toggled","true")
     }
     else 
          {
           $("#playlist").css("bottom","-200px");
           button.data("toggled","false");
         } 
```

也许这有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-13T05:25:15.663

要理解的关键`toggle()`是鼠标事件......只是点击的一种特殊情况。所以你不能用它来实现键盘事件。

我可能只是编写一个函数来表示该工作，然后绑定它或在相关的事件处理程序中调用它（单击，keydown）

```
var f = function() { 
    var state = $('#playlist').css('bottom');
    $('#playlist').css('bottom', state=='0px' ? '-200px' : '0px');    
}
$('#button').click(f);
​​​​​​​$(document).keydown(f);​​​​​​​ 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-13T06:34:18.310

```
$(document).ready(function(e) {
    var pos=0;

    // On Key press
    $(document).keypress(function(e){
        if(e.which == 109 || e.which == 77) {
        if(pos==0){
        $('#playlist').css('bottom','0px');
        pos = 1;
        }else{
        $('#playlist').css('bottom','200px');
        pos = 0;    
        }
    }});

    // On Click
    $('#playlist').click(function(){
        if(pos==0){
        $('#playlist').css('bottom','0px');
        pos = 1;    
        }else{
        $('#playlist').css('bottom','200px');
        pos = 0;    
        }
    });
}); 
```

# delphi - 如何声明交叉引用的类类型？

> ID：12870126
> 
> 赞同：2
> 
> 时间：2012-10-13T05:03:50.183
> 
> 标签：delphi, oop, delphi-7, delphi-xe2, delphi-2010

我试图在 Delphi 中构建一个类系统。这些类通过对象属性`TFieldSpec`相互`TTableSpec`引用。

```
type
  TFieldSpec=class(Tobject)
  private
    FTableSpec : TTableSpec;
  public
    property TableSpec : TTableSpec read FTableSpec;
  end;

  TTableSpec=class(Tobject)
  private
    FFields : array[1..100] of TFieldSpec;
  end; 
```

当我编译这个时，我得到这个错误：

```
[Error] Objects.pas(66): Undeclared identifier: 'TTableSpec' 
```

如何构造这些类类型？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T05:59:20.790

您应该使用前向声明`TTableSpec`：

```
type
  TTableSpec = class;

  TFieldSpec=class(Tobject)
  private
    ..
    FTableSpec : TTableSpec;
    ..
  end;

  TTableSpec=class(Tobject)
  private
    FName : string;
    ..
  end; 
```

# javascript - 从 JWPlayer 切换到 Flowplayer

> ID：12870133
> 
> 赞同：0
> 
> 时间：2012-10-13T05:05:48.450
> 
> 标签：javascript, html, video, jwplayer, flowplayer

我正在尝试为 Subsonic 构建一个 Web 界面，并试图将其 JWPlayer 的默认实现切换为 Flowplayer。

我尝试了在 JWPlayer 和 Flowplayer 中加载视频的默认方法，但都不起作用，所以我查看了使用以下相关代码的现有接口：

```
var player;
var position;
var maxBitRate = 1000;
var timeOffset = 0;

function init() {
    var flashvars = {
        id:"player1",
        skin:"flash/whotube.zip",
        screencolor:"000000",
        controlbar:"over",
        autostart:"false",
        bufferlength:3,
        backcolor:"EFEFEF",
        frontcolor:"000000",
        provider:"video"
    };
    var params = {
        allowfullscreen:"true",
        allowscriptaccess:"always"
    };
    var attributes = {
        id:"player1",
        name:"player1"
    };

    var width = "100%";
    var height = "85%";
    swfobject.embedSWF("flash/jw-player-5.6.swf", "placeholder1", width, height, "9.0.0", false, flashvars, params, attributes);
}

function playerReady(thePlayer) {
    player = $("player1");
    player.addModelListener("TIME", "timeListener");
    play();    
}

function play() {
    var list = new Array();
    list[0] = {
        file:"http://domain.com:4040/rest/stream.view?u=username&p=password&v=1.6.0&c=appname&id=number",
        duration:9999 - timeOffset, //testing value for duration
        provider:"video"
    };
    player.sendEvent("LOAD", list);
    player.sendEvent("PLAY");
} 
```

我什至不能让任何东西在 flowplayer 下运行。有任何想法吗？我被困在：

1.  获得与 playerReady() 等价的东西；
2.  使用以下方法加载视频：

    flowplayer.addClip({'url':videoURL},0); flowplayer.play({'url':videoURL},0);

这给了我：没有方法'addClip'并且没有方法'play'

我的 JS 包括 FlowPlayer 和 JWPlayer：flowplayer-3.2.11.min.js Jquery Prototype swfobject 和我自己的 JS 文件，上面是一个片段。

帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:58:53.170

```
flowplayer("player", "flowplayer-3.2.15.swf", {
            clip: {
                scaling: 'orig'
            },
            plugins: {
                controls: null
            },
            // player events are defined directly to "root" (not inside a clip)
            onLoad: function() {
                $f().play({url: "http://pseudo01.hddn.com/vod/demo.flowplayervod/Extremists.flv"});
            }
        }); 
```

# android - onCreate 会触发任何侦听器 - android

> ID：12870135
> 
> 赞同：3
> 
> 时间：2012-10-13T05:06:44.043
> 
> 标签：android

我正在创建一个 android 库，我想查找主应用程序的 OnCreate 是否正在运行？. 我不知道 oncreate 是否会触发任何侦听器。任何人都知道 oncreate 会触发任何侦听器。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:23:00.417

不，此回调不存在。

大多数库引入此回调的方式是创建一个需要另一个应用程序回调的基本类型。就像你可以让你的图书馆做这样的事情：

```
public class MyLibBaseApplication extends Application {

   public void onCreate() {
      super.onCreate();
      // my callback stuff.
   }
} 
```

然后要求您的库的所有用户使用或扩展您的 Application 对象作为其清单中的 Application 类。尽管有一些库可以做到这一点，但这种方式对开发人员来说有点糟糕。它阻止您使用具有相同模式的多个库（超级烦人）。

就我个人而言，我认为只要求使用该库的人进行回调可能会更好地来自将集成库的客户和开发人员。

只是一个简单的调用或静态函数，就像：

```
public class MyApplication extends Application {

    public void onCreate() {
       super.onCreate();
       //register
       YourLibrary.onCreateFired(this);
       // or istantiate and register
       YourLibraryCallback cb = new YourLibraryCallback(this);
       cb.onCreateFired();
    }
} 
```

我认为这种方式提供了最大的灵活性。

# c# - 自动为图像添加水印

> ID：12870137
> 
> 赞同：26
> 
> 时间：2012-10-13T05:07:17.683
> 
> 标签：c#, winforms, algorithm, image-processing

在寻找自动将水印添加到互联网上的图像的解决方案时，我在 stackoverflow 中找到了最佳解决方案。问题的链接是[C# - 通过特殊方式为照片添加水印](https://stackoverflow.com/questions/4113900/c-sharp-add-watermark-to-the-photo-by-special-way)。我特别感谢 **Alex Maslakov**和**adrift**。

我通过一些修改实现了该解决方案，我想将水印放在图像的中心。我修改了**adrift**提供的解决方案如下

```
 private void button1_Click(object sender, EventArgs e)
    {
        using (Image image = Image.FromFile(@"C:\Users\Public\Pictures\Sample Pictures\Desert.jpg"))
        using (Image watermarkImage = Image.FromFile(@"C:\Users\Public\Pictures\Sample Pictures\watermark.png"))
        using (Graphics imageGraphics = Graphics.FromImage(image))
        using (Brush watermarkBrush = new TextureBrush(watermarkImage))
        {
            int x = (image.Width - watermarkImage.Width)/2;
            int y = (image.Height - watermarkImage.Height)/2;
            imageGraphics.FillRectangle(watermarkBrush, new Rectangle(new Point(x, y), watermarkImage.Size));
            image.Save(@"C:\Users\Public\Pictures\Sample Pictures\Desert_watermark.jpg");
        }

    } 
```

但水印没有正确放置在图像的中心（见下图）。

![在此处输入图像描述](../Images/9237b26f40f993fe56965e509d52a948.png)

请纠正我...

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-13T07:06:12.293

最后我找到了我的问题的解决方案......

更正的代码答案如下

```
 private void button1_Click(object sender, EventArgs e)
    {
        using (Image image = Image.FromFile(@"C:\Users\Public\Pictures\Sample Pictures\Desert.jpg"))
        using (Image watermarkImage = Image.FromFile(@"C:\Users\Public\Pictures\Sample Pictures\watermark.png"))
        using (Graphics imageGraphics = Graphics.FromImage(image))
        using (TextureBrush watermarkBrush = new TextureBrush(watermarkImage))
        {
            int x = (image.Width / 2 - watermarkImage.Width / 2);
            int y = (image.Height / 2 - watermarkImage.Height / 2);
            watermarkBrush.TranslateTransform(x, y);
            imageGraphics.FillRectangle(watermarkBrush, new Rectangle(new Point(x, y), new Size(watermarkImage.Width+1, watermarkImage.Height)));
            image.Save(@"C:\Users\Public\Pictures\Sample Pictures\Desert_watermark.jpg");
        }

    } 
```

感谢 Furqan Safdar 和 Abdias Software The link [Problem in tiling image started at different height using TextureBrush in C#](https://stackoverflow.com/questions/7333869/problem-in-tiling-image-starting-at-different-height-using-texturebrush-in-c-sha)也帮助我解决了这个问题

谢谢大家

最终结果

![在此处输入图像描述](../Images/e6f47250efad977c108d309bb510f30f.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-13T05:58:42.160

顺便说一句，您的原始公式很好，

你确定两者的分辨率是一样的吗？将水印图像的 DPI 分辨率设置为等于图像：

```
watermarkImage.SetResolution(imageGraphics.DpiX, imageGraphics.DpiY); 
```

（从我的头顶开始，但我认为属性名称是正确的）。

更新：

从图像更改为位图以便使用`SetResolution()`- 看看这个更改是否适合你 - 我已经改变了水印在图像上的绘制方式：

```
private void button1_Click(object sender, EventArgs e) {

    using (Bitmap image = Bitmap.FromFile("C:\Users\Public\Pictures\Sample Pictures\Desert.jpg"))
    using (Bitmap watermarkImage = Bitmap.FromFile("C:\Users\Public\Pictures\Sample Pictures\watermark.png"))
    using (Graphics imageGraphics = Graphics.FromImage(image))
    {
        watermarkImage.SetResolution(imageGraphics.DpiX, imageGraphics.DpiY);

        int x = ((image.Width - watermarkImage.Width) / 2);
        int y = ((image.Height - watermarkImage.Height) / 2);

        imageGraphics.DrawImage(watermarkImage, x, y, watermarkImage.Width, watermarkImage.Height);

        image.Save("C:\Users\Public\Pictures\Sample Pictures\Desert_watermark.jpg");
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T05:40:42.840

试试这个代码中心对齐：

```
int x = (image.Width / 2 - watermarkImage.Width / 2);
int y = (image.Height / 2 - watermarkImage.Height / 2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-13T07:35:19.740

**工作样本：**

```
public static Bitmap WatermarkImage(Bitmap image, Bitmap watermark)
{
    using (Graphics imageGraphics = Graphics.FromImage(image))
    {
        watermark.SetResolution(imageGraphics.DpiX, imageGraphics.DpiY);

        int x = (image.Width - watermark.Width) / 2;
        int y = (image.Height - watermark.Height) / 2;

        imageGraphics.DrawImage(watermark, x, y, watermark.Width, watermark.Height);
    }

    return image;
} 
```

**用法：**

```
Bitmap watermark = new Bitmap(@"c:/watermark.png");
Bitmap bitmap = new Bitmap(@"c:/image.png");
bitmap = WatermarkImage(bitmap, watermark);
bitmap.Save(@"C:/watermarkedImage.png"); 
```

# php - 之后如何立即使用新行 来自ck编辑器的标签？

> ID：12870140
> 
> 赞同：0
> 
> 时间：2012-10-13T05:07:35.680
> 
> 标签：php, mysql, ckeditor

我的问题与之前的帖子有关，

[ckeditor 在 p 标签的开头和结尾显示额外的空间](https://stackoverflow.com/questions/10992094/ckeditor-shows-extra-space-at-the-beginning-and-end-of-the-p-tags)

我的数据库中已经有大量条目，它们也有同样的下一行问题。现在我可以在 CK 编辑器中解决这个问题。但是受影响的以前的条目仍然存在。当我尝试使用 JSON 解析内容时，问题就出现了。下一行会导致一些问题。我的选项是：
1\. 更新整个数据库条目。
2\. 在打印的任何地方处理代码。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:01:07.750

由于您的数据库似乎*很大*，因此我将遵循以下方法：

1.  将要打印时在客户端代码中修复它。
2.  当你做对了，改变代码，让它也更新数据库。
3.  当你做对了，使用该代码按块更新整个数据库（使用 crons 或其他类型的计划任务*）。
4.  等待。
5.  ？？？
6.  利润。

*：或者只是为每个请求分配一些服务器时间来执行此操作。或者在网上做，这是[偷懒的好借口](http://xkcd.com/303/)。

* * *

啊，是的，习惯性的建议。使用副本进行开发并进行备份。来吧，你知道那些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:02:58.480

谢谢回复。幸运的是，我了解导致换行符的原因。它就是“ \r\n ”（感谢帖子：[用 PHP 替换 \r\n](https://stackoverflow.com/questions/5449580/replacing-r-n-with-php)）

我导出了表格并发现了问题。然后替换为哑巴本身并导入回来。

这个虫子严重吃掉了我的头，也破坏了我的周末！

# python - 从 Python 运行 C 程序，然后捕获输出

> ID：12870143
> 
> 赞同：0
> 
> 时间：2012-10-13T05:07:48.160
> 
> 标签：python, c

> **可能重复：**
> [如何连接 Python 和 C 程序？](https://stackoverflow.com/questions/4743748/how-do-i-connect-a-python-and-a-c-program)

我有一个 C 程序，它需要两个参数并输出一个数字。

./a.out 2 3（例如）。它做了一些计算成本很高的操作，所以我想知道我是否可以使用 Python 的多处理库来运行一堆 C 程序，然后将所有数字编译成列表或表格或一些数据结构？

谢谢，

这不是重复的，因为我的问题是如何在 PARALLEL EX 中做到这一点。许多线程！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:02:32.137

```
// Your C file to be called from python
// To compile :
// gcc -dynamiclib -I/usr/include/python2.7/ -lpython2.7 -o Module.dylib Module.c

#include < Python.h >

static PyObject* py_myFunction(PyObject* self, PyObject* args)
{
    char *s = "Hello from C!";
    return Py_BuildValue("s", s);
}

static PyMethodDef myModule_methods[] = {
    {"myFunction", py_myFunction, METH_VARAGS},
    {NULL, NULL}
};

void initmyModule()
{
    (void) Py_InitModule("myModule", myModule_methods);
} 
```

从 python 调用：

```
from Module import *
print "Result from myFunction:", myFunction() 
```

# c++ - 在 Visual Studio 中打印到输出窗口

> ID：12870145
> 
> 赞同：3
> 
> 时间：2012-10-13T05:08:24.520
> 
> 标签：c++, visual-studio-2010

我对 C++ 很陌生，最近从 Linux 上的 g++ 编译切换到了 Visual Studio。我试图编写一个简单的程序来测试这样的一些：

```
#include <iostream>

void main()
{
    // Things
} 
```

`cout <<`在我意识到它不能以这种方式打印到 Visual Studio 的输出窗口之前，我正在使用它来显示函数返回的内容。我知道我可以使用调试模式，但是 Visual Studio 中有没有办法将输出显示到窗口？我发现的一篇较早的帖子建议使用 OutputDebugString，但我没有将代码编写为 Win32 应用程序，而且我认为对于简单的 cpp 文件不存在此功能。

还有，有没有什么原因是程序执行的时候会弹出一个黑色的窗口，然后又马上消失呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T05:17:27.343

OutputDebugString 为胜。它确实存在。只需包含 windows.h。在那里。

有一些方法可以有效地将 stderr 和 stdout 连接到管道，并将输出重新连接到 OutputDebugString，但听起来您正在寻找一种简单的方法。任何写入标准输出（cout，随便）的东西都会进入控制台窗口，所以在你去 OutputDebugString 坚果之前，首先检查你的控制台窗口是否有输出......

说到控制台窗口...

黑色弹出并立即消失的原因是您的控制台窗口正在打开和关闭，并且您的进程很可能在完成任何实质性操作之前就完成了。在 IDE 中的 main() 末尾插入断点。然后你可以`Alt`+`Tab`到它。

顺便说一句：如果您使用 OutputDebugString，它不会 CRLF 您发送的文本，因此请将其包含在您的输出文本中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T17:17:15.717

下面是我写的一个可移植的 TRACE 宏。

在 Windows 上，它基于`OutputDebugString`WhozCraig 的回答。

```
#ifdef ENABLE_TRACE
#  ifdef _MSC_VER
#    include <windows.h>
#    include <sstream>
#    define TRACE(x)                           \
     do {  std::stringstream s;  s << (x);     \
           OutputDebugString(s.str().c_str()); \
        } while(0)
#  else
#    include <iostream>
#    define TRACE(x)  std::clog << (x)
#  endif        // or std::cerr << (x) << std::flush
#else
#  define TRACE(x)
#endif 
```

例子：

```
#define ENABLE_TRACE  // Can depend on _DEBUG or NDEBUG macros
#include "my_above_trace_header.h"

int main (void)
{
   int     v1 = 123;
   double  v2 = 456.789;
   TRACE ("main() v1="<< v1 <<" v2="<< v2 <<'\n');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T21:34:49.477

如果要从单元测试用例中写入输出窗口，则可以使用以下命令：

```
#include "CppUnitTest.h"

using namespace Microsoft::VisualStudio::CppUnitTestFramework;

TEST_METHOD(testingsomething)
{
    Logger::WriteMessage("Hello output window");
} 
```

# java - 如何在运行时更改 AndroidManifest？

> ID：12870148
> 
> 赞同：10
> 
> 时间：2012-10-13T05:08:47.400
> 
> 标签：java, android, android-manifest

`AndroidManifest.xml`是否可以以编程方式更改运行时？如果可能的话，如何在运行应用程序时以编程方式在 AndroidManifest 中更改以下内容？

`android:configChanges="orientation|keyboardHidden"`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T05:14:50.933

不 - 无法`AndroidManifest.xml`在运行时更改 Android。
但是，您可以通过编程方式在运行时进行更改 -[**请参见此处**](http://developer.android.com/guide/topics/resources/runtime-changes.html)（查找`onConfigurationChanged`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:12:30.167

无法以编程方式设置 configChanges 属性

# java - 错误单元测试 [想要但未调用] mockito

> ID：12870157
> 
> 赞同：0
> 
> 时间：2012-10-13T05:09:50.300
> 
> 标签：java, testing, junit, mockito

疑问：晚安，

我正在对我的服务进行一些测试，但在 delete 方法中执行测试时遇到问题。

我想知道是否有人遇到过这个错误并且可以帮助我。

当我进行扫描时发生错误。报告的是该方法未使用。

例外：

```
Wanted but not invoked:
usuariosRepository.findRow(5);
-> at br.com.fortalezaserv.services.impl.tests.RepositoryUsuariosServiceTest.deveExcluirPorId(RepositoryUsuariosServiceTest.java:74)

However, there were other interactions with this mock:
-> at br.com.fortalezaserv.services.impl.RepositoryUsuariosService.excluir(RepositoryUsuariosService.java:74)

at br.com.fortalezaserv.services.impl.tests.RepositoryUsuariosServiceTest.deveExcluirPorId(RepositoryUsuariosServiceTest.java:74)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

代码：

```
@ContextConfiguration(classes = TestContext.class)
@RunWith(SpringJUnit4ClassRunner.class)    
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = true)
public class RepositoryUsuariosServiceTest {

private RepositoryUsuariosService usuarioService;
private UsuariosRepository usuariosRepositoryMock;

private Usuarios usuario;
private Long ID = Long.valueOf(5l);

/**
 * 
 */
@Before
public void setUp() {
    usuario = new Usuarios();
    usuario.setEmail("email@me.com");
    usuario.setHash("nuadw");
    usuario.setLogin("Login");
    usuario.setNome("Name");
    usuario.setPassword("89331n9183n193n1n9319n3189");
    usuarioService = new RepositoryUsuariosService();

    usuariosRepositoryMock = mock(UsuariosRepository.class);
    usuarioService.setUsuarioRepository(usuariosRepositoryMock);
}

/**
 * @throws QualityException
 */
@Test
public void deveExcluirPorId() throws QualityException {
    when(usuariosRepositoryMock.findRow(ID)).thenReturn(null);
    usuarioService.excluir(ID);
    verify(usuariosRepositoryMock, times(1)).findRow(ID);
    verify(usuariosRepositoryMock, times(1)).delete(ID);
    verifyNoMoreInteractions(usuariosRepositoryMock);
}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T09:40:27.607

您还没有添加`MockitoJUnitRunner`in`@RunWith`子句。由于您已经拥有`SpringJunitRunner`，因此无法添加另一个（[详细信息链接](http://www.blog.project13.pl/index.php/coding/1077/runwith-junit4-with-both-springjunit4classrunner-and-parameterized/)）。

作为替代方案，请尝试`MockitoAnnotations.initMocks(this);`使用`@Before`的 setUp 方法。

还有一个建议，看起来您已经在`RepositoryUsuariosService`服务中添加了 setter 以进行测试。`@Mock`通过使用注释来模拟 `UsuariosRepository`类，然后`@InjectMocks`在`RepositoryUsuariosService`其中自动插入所有模拟来避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:20:19.447

我在这里解决了问题。

这是我的逻辑失败，我的删除功能没有返回。该方法不执行任何要删除的查询。

然后我切换到测试：

```
@Test
public void deveExcluirPorId() throws QualityException {
    usuarioService.excluir(ID);
    verify(usuariosRepositoryMock, times(1)).delete(ID);
    verifyNoMoreInteractions(usuariosRepositoryMock);
} 
```

谢谢！

# sql - 转换为日期时间不起作用

> ID：12870158
> 
> 赞同：2
> 
> 时间：2012-10-13T05:09:50.360
> 
> 标签：sql, sql-server

好吧，伙计们，这让我几乎发疯了。我已经尝试使用 CURRENT_TIMESTAMP 进行强制转换、转换、子选择，但不断收到此错误：

从字符串转换日期时间时转换失败。

这有什么问题？

```
insert into somethingtable 
 values ('000000','value','$VAR1 = {};' ,'DummyValue',
         '$VAR1 = {};', Cast('2012-10-13 13:02:08.000' AS datetime),
         '0','1','NULL','NULL') 
```

它似乎只关心或抱怨时间戳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:12:33.173

如果您设置了**SET DATEFORMAT DMY** ，您将在解析 yyyy-mm-dd 格式时遇到错误，因为 SQL Server 会尝试将其读取为 yyyy-dd-mm！从 SQL Server 2012 开始，对于 xxxx-xx-xx 格式，日期格式将被忽略，但现在，您最好使用 YYYYMMDD 格式或日期时间，您也可以使用**YYYY-MM-DDTHH:MM:SS**，例如“2012-10-13T13:02:08”。

```
insert into somethingtable 
 values ('000000','value','$VAR1 = {};' ,'DummyValue',
         '$VAR1 = {};', Cast('20121013 13:02:08.000' AS datetime),
         '0','1','NULL','NULL') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:53:48.200

也许 ？

`convert(datetime, '2012-10-13 13:02:08.000', 121)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:51:35.460

原来有效的是使用 getdate()，而不是 Casting 当前日期时间。

# jquery - 需要调用jQuery ajax 页面方法

> ID：12870159
> 
> 赞同：1
> 
> 时间：2012-10-13T05:10:00.400
> 
> 标签：jquery, asp.net, ajax

我是 jQuery 的新手。我需要在一段时间后调用该方法。

```
 $(document).ready(function pageLoad() {
        setTimeout('SetTime2()', 10000);
    });

    (function SetTime2() {
            $.ajax({
                type: "POST",
                url: "MyPage.aspx/myStaticMethod",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    // Replace the div's content with the page method's return.
                    //$("#Result").text(msg.d);
                }
            });
    }); 
```

它说，Uncaught ReferenceError: SetTime2 is not defined。什么是正确的语法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:15:52.947

改成这样：

```
$(document).ready(function() {
    setTimeout(SetTime2, 10000);
});

function SetTime2() {
        $.ajax({
            type: "POST",
            url: "MyPage.aspx/myStaticMethod",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                // Replace the div's content with the page method's return.
                //$("#Result").text(msg.d);
            }
        });
} 
```

1.  你只需要用你的声明来定义一个普通的函数`SetTime2()`。它周围没有括号。

2.  此外，您不想将字符串传递给`setTimeout()`，而是希望传递不带引号或括号的实际函数引用。

注意：您也可以使用匿名函数执行此操作：

```
$(document).ready(function () {
    setTimeout(function() {
        $.ajax({
            type: "POST",
            url: "MyPage.aspx/myStaticMethod",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                // Replace the div's content with the page method's return.
                //$("#Result").text(msg.d);
            }
        });
    }, 10000);
}); 
```

# excel - 如何更快地过滤范围？

> ID：12870161
> 
> 赞同：1
> 
> 时间：2012-10-13T05:10:12.357
> 
> 标签：excel, vba

我想按列（rng01）中的值过滤范围（9 列和 1400 行）

```
Application.ScreenUpdating = False
db.Rows.Hidden = False
For Each cell In rng01.Cells
If Not cell.Value = "323" Then
cell.EntireRow.Hidden = True
End If
Next cell
Application.ScreenUpdating = True 
```

这有效，但大约需要 3-4 秒。
请问有没有更快的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:01:03.763

Lets see if I understand your question: `rng01` is one of the nine columns, you want to filter so that only rows where the value in `rng01` = `323` are visible.

You can use `AutoFilter` for this. You will need a header row above your data (but it can be blank).

```
rng01.AutoFilter
rng01.AutoFilter Field:=1, Criteria1:="323", VisibleDropDown:=False 
```

If the sheet `rng01` referes to already has an active `AutoFilter`, the first `rng01.AutoFilter` clears it.

Note that `rng01` is *one column wide*.

If in fact `rng01` referes to a range wider than one column, use

```
rng01.Columns(3).AutoFilter
rng01.Columns(3).AutoFilter Field:=1, Criteria1:="323", VisibleDropDown:=False 
```

# java - 从 HTTPResponse 解析 JSON

> ID：12870163
> 
> 赞同：3
> 
> 时间：2012-10-13T05:10:46.517
> 
> 标签：java, json, httpresponse, arrays

我的 JSON 看起来像这样-

```
{"ipinfo": {
    "ip_address":"4.2.2.2",
     "ip_type":"Mapped",

                "Location":{

                            "continent":"north america",

                            "latitude":33.499,

                            "longitude":-117.662,

                        "CountryData":{

                                "country":"united states",

                                "country_code":"us"},

                        "region":"southwest",

                        "StateData":{

                                "state":"california",

                                "state_code":"ca"},

                        "CityData":{

                                "city":"san juan capistrano",

                                "postal_code":"92675",

                                "time_zone":-8}}

    }} 
```

这是我下面的代码，它试图访问 JSONArray 中的项目成员

```
 try {
        String url = service + version + method + ipAddress + format;
        StringBuilder builder = new StringBuilder();
        httpclient = new DefaultHttpClient();
        httpget = new HttpGet(url);
        httpget.getRequestLine();
        response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream inputStream = entity.getContent();
            bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
            for (String line = null; (line = bufferedReader.readLine()) != null;) {
                builder.append(line).append("\n");
            }
            //Exception getting thrown in below line
            JSONArray jsonArray = new JSONArray(builder.toString());
            for (int i = 0; i < jsonArray.length(); i++) {
                JSONObject jsonObject = jsonArray.getJSONObject(i);
            }
        }

    } catch (Exception e) {
        getLogger().log(LogLevel.ERROR, e.getMessage());
    } finally {
        bufferedReader.close();
        httpclient.getConnectionManager().shutdown();
    } 
```

我总是在这一行抛出异常-

```
JSONArray jsonArray = new JSONArray(builder.toString()); 
```

下面是抛出异常

```
org.json.JSONException: A JSONArray text must start with '[' at character 1 
```

谁能建议我在我的代码中做错了什么？我该如何改进它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T05:16:38.030

我没有使用那个特定的 API，但是从对象被命名的事实来看`JSONArray`（关键字：数组），我猜它需要一个数组。使用 JSON，数组必须以 a 开头并以`[`结尾`]`：

```
[1, 2, 3, 4] 
```

它可以包含对象：

```
[{}, {}, {}] 
```

请注意对象如何以 开头`{`和结尾`}`，这与数组不同：

```
{
    "name": "My Object!"
} 
```

由于您的 JSON 数据看起来更像一个`{object}`而不是一个`[array]`，因此您应该尝试使用它[`JSONObject`](http://www.json.org/javadoc/org/json/JSONObject.html)。

实际上，尽管您有两个选择：您可以将 JSON 数据更改为数组，或者您可以将 Java 代码更改为使用`JSONObject`. （一个或另一个；不是两者。）

# 更改 JSON 数据

就像`[`在开头和`]`结尾添加 a 一样简单：

```
[
    {
        "ipinfo": {
            "ip_address": "4.2.2.2",
            "ip_type": "Mapped",
            "Location": {
                "continent": "north america",
                "latitude": 33.499,
                "longitude": -117.662,
                "CountryData": {
                    "country": "united states",
                    "country_code": "us"
                },
                "region": "southwest",
                "StateData": {
                    "state": "california",
                    "state_code": "ca"
                },
                "CityData": {
                    "city": "san juan capistrano",
                    "postal_code": "92675",
                    "time_zone": -8
                }
            }
        }
    }
] 
```

# 更改 Java

最终的 Java 看起来有点像：

```
// OLD CODE
//JSONArray jsonArray = new JSONArray(builder.toString());
//for (int i = 0; i < jsonArray.length(); i++) {
//    JSONObject jsonObject = jsonArray.getJSONObject(i);
//}
// END OLD CODE
JSONObject jsonObject = new JSONObject(builder.toString()); 
```

* * *

（再次，一个或另一个；不是两者。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T05:15:43.997

您的源 JSON 只是一个对象。与其加载到数组中，不如直接加载到 a 中`JSONObject`就足够了。

```
JSONObject jsonObject = new JSONObject(builder.toString()); 
```

该对象将有一个名为 的属性`ipinfo`。

# eclipse - 为什么我的基本 openGL 程序在 init() 期间立即终止？

> ID：12870165
> 
> 赞同：1
> 
> 时间：2012-10-13T05:11:08.687
> 
> 标签：eclipse, opengl, glut, glew

我试图让一个基本的openGL程序运行。我昨天运行了这段代码，但在另一台机器上运行，现在它在显示任何内容之前终止。这是我的 init() 函数：

```
void init()
{

    //generate points
    const int NumPoints = 5000;
    point3 points[NumPoints];

    point3 vertices[3] = {point3(-1.0, -1.0, 0.0),
          point3(0.0, 1.0, 0.0),
          point3(1.0, -1.0, 0.0)};

    points[0] = point3(0.0, 0.0, 0.0);

    for(int k = 1; k < NumPoints; k++)
    {
        int j = rand() % 3;
        points[k] = (points[k-1]+vertices[j])/2.0;
    }

    //load shaders and use the resulting shader program
    GLuint program = InitShader("shaders/vshader.glsl", "shaders/fshader.glsl");
    glUseProgram( program );

    //create Vertex-Array object
    GLuint aBuffer;

    glGenVertexArrays(1, &aBuffer);
    glBindVertexArray((GLuint)&aBuffer);

    //create Buffer object
    GLuint buffer;

    //glGenBuffers(1, &buffer);
    glBindBuffer(GL_ARRAY_BUFFER, buffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(points),
             points, GL_STATIC_DRAW);

    //initialize the vertex position attribute from the vertex shader
    GLuint loc = glGetAttribLocation( program, "vPosition");
    glEnableVertexAttribArray( loc );
    glVertexAttribPointer( loc, 3, GL_FLOAT, GL_FALSE, 0, 0);

    glClearColor( 1.0, 1.0, 1.0, 1.0);  // white background

} 
```

这是我的主要（）

```
int main(int argc, char **argv)
{
    glutInit(&argc, argv);

    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA);
    glutInitWindowSize(500, 500);
    glutInitWindowPosition(0, 0);

    glutDisplayFunc(display);

    glutCreateWindow("Program 1");

    glewInit();

    //do_nothing();
    init();

    glutMainLoop();
    return 0;
} 
```

我想我做错了一些 opengl 或 glut 的东西，所以我开始评论事情以查明问题。注释掉整个 init() 函数后，我能够显示一个可爱的白框，直到我单击 X 才终止。我最终删除了 init 中的所有 glFunction，但仍然存在即时终止问题。毕竟，肇事者是这样的：

```
point3 points[NumPoints]; 
```

很困惑，我将 do_nothing() 写到我的 main 中（如上面所见）：

```
void do_nothing(){
    const int NumPoints = 5000;
    point3 points[NumPoints];
    return;
} 
```

我调用它而不是 init()，唉，即时程序终止。我不明白这么简单的事情怎么会造成如此多的痛苦。

要点3：

```
class point3
{
public:
    GLfloat x;
    GLfloat y;
    GLfloat z;

    point3();
    point3(GLfloat, GLfloat, GLfloat);
    ~point3();

    point3 operator+ (point3 param);
    point3 operator- (point3 param);
    point3 operator/ (GLfloat param);
    point3 operator* (GLfloat param);
};

//
// constructiors and destructors
//

point3::point3(){
    x = 0;
    y = 0;
    z = 0;
};

point3::point3(GLfloat a, GLfloat b, GLfloat c)
{
    x = a;
    y = b;
    z = c;
} 
```

我在 Win7 上使用 Eclipse CDT 和 MinGW（必须上课）

# objective-c - UITableView 删除所有可重复使用的单元格

> ID：12870171
> 
> 赞同：2
> 
> 时间：2012-10-13T05:12:07.453
> 
> 标签：objective-c, ios, uitableview

当单元格第一次变得可见时，将使用 init 方法。当单元格不是第一次变得可见时，它将从表视图的内存中出列。

```
UITableViewCell *cell = [searchTable dequeueReusableCellWithIdentifier:identifier];
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:identifier];
}
return cell; 
```

假设我已经滚动了整个表格，现在任何单元格都可以出列，因为它们都已经被初始化了。

我当前的单元格具有从 0 到 199 的标识符。我刷新了我的表格视图，现在我有了单元格的新信息。我使用方法`reloadData`并通过添加`+200`到单元格标识符来为新单元格使用从 200 到 399 的标识符：

```
NSInteger index = indexPath.row + 200;
NSString *CellIdentifier = [NSString stringWithFormat:@"%d",index]; 
```

现在我滚动整个表格，看到从 200 到 399 的单元格。

让我们想象一下我改`index`回：

```
NSInteger index = indexPath.row; 
```

现在有一个问题：标识符从 0 到 199 的旧单元仍然可以出队，不是吗？

如果答案是`They CAN be dequeued`我还有一个问题：

当我开始使用标识符从 200 到 399 的单元格时，有没有办法从表视图内存中删除标识符从 0 到 199 的单元格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T05:22:13.870

`UITableView` `dequeueReusableCellWithIdentifier`方法将为您处理。如果您使用它，它将仅对可见单元格而不是所有 200 个单元格进行 deque`static [iTableView dequeueReusableCellWithIdentifier:cellIdentifier];`

这是来自[苹果讨论线程](https://discussions.apple.com/thread/2760904?start=0&tstart=0)的讨论。也检查一下。

**更新：** 您需要修改您的单元格标识符。如果您为每一行创建新的 CellIdentifier，则使用没有意义，`dequeueReusableCellWithIdentifier`因为标识符每次都不同。

代替

```
NSString *CellIdentifier = [NSString stringWithFormat:@"%d",index]; 
```

它应该是，

```
static NSString *CellIdentifier = [NSString stringWithString@"cell"]; 
```

这意味着一旦不可见，每个单元格都将被重用。它只会选择不可见的单元格，并将其重用于您正在显示的下一组单元格。根据您的实现，它将创建 300 或 400 个单元格，并且您无法删除以前的单元格，因为您不再引用相同的单元格。

您的方法将如下所示，

```
static NSString *CellIdentifier = [NSString stringWithString@"cell"];
UITableViewCell *cell = [searchTable dequeueReusableCellWithIdentifier:Cellidentifier];
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:Cellidentifier];
}
cell.textLabel.text = @"something";
//...
return cell; 
```

**更新2：**如果你不使用ARC，应该是，

```
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:Cellidentifier] autorelease]; 
```

你需要有一个`autorelease`相同的。

# php - smarty3 检测模板是否包含在 {include} 中

> ID：12870177
> 
> 赞同：1
> 
> 时间：2012-10-13T05:12:33.807
> 
> 标签：php, smarty, smarty3

在 smarty3 中，有没有办法找出 smarty 模板是否包含在我的 {include} 标记中？我知道我可以这样做，例如：

```
{include file="blahblah.tpl" included=1} 
```

在 blahblah.tpl 里面

```
{if $included==1}
  yadda yadda yadda 
{/if} 
```

我只是想知道是否有更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:29:40.040

在包含模板文件之前，您可以使用**[template_exists()](http://www.smarty.net/docsv2/en/api.template.exists.tpl)**检查模板是否存在

```
if( !$smarty->template_exists($mid_template) ){
    $mid_template = 'page_not_found.tpl';
} else {
    $mid_template = 'blahblah.tpl';
}
$smarty->assign('content_template', $mid_template); 
```

# python - 循环通过 python 正则表达式匹配

> ID：12870178
> 
> 赞同：81
> 
> 时间：2012-10-13T05:12:51.133
> 
> 标签：python, regex, nested-loops

这必须比我遇到的更容易。我的问题是转动一个看起来像这样的字符串：

```
ABC12DEF3G56HIJ7 
```

进入

```
12 * ABC
3  * DEF
56 * G
7  * HIJ 
```

而且我一辈子都无法使用 REGEX 匹配设计一组正确的循环。问题的症结在于代码必须是完全通用的，因为我无法假设`[A-Z]`片段会有多长，也无法假设片段会有多长`[0-9]`。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-10-13T05:20:19.737

Python`re.findall`应该适合你。

[现场演示](http://codepad.org/70EHhuI1)

```
import re

s = "ABC12DEF3G56HIJ7"
pattern = re.compile(r'([A-Z]+)([0-9]+)')

for (letters, numbers) in re.findall(pattern, s):
    print(numbers, '*', letters) 
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2016-07-28T01:11:31.867

[`re.finditer`](https://docs.python.org/2/library/re.html#re.finditer)如果您的数据集很大，最好使用它，因为这样可以减少内存消耗（`findall()`返回所有结果的列表，`finditer()`逐一找到它们）。

```
import re

s = "ABC12DEF3G56HIJ7"
pattern = re.compile(r'([A-Z]+)([0-9]+)')

for m in re.finditer(pattern, s):
    print m.group(2), '*', m.group(1) 
```

# asp.net - ASP.Net - Word/Excel/PPT在线修改

> ID：12870179
> 
> 赞同：0
> 
> 时间：2012-10-13T05:12:58.217
> 
> 标签：asp.net

我们有 ASP.Net 应用程序，用户可以在其中上传 Word、Excel 和 PPT 文件。当用户点击任何上传的文档时，我们会使用本地机器查看器打开它。

打开Word / Excel / PPT文档时我们需要什么 - 用户可以修改文档并直接将其保存在服务器上。

执行此操作的最佳方法是什么（GoogleDocs 或 Office 365）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:40:23.430

Microsoft Office 365 和 Google Docs 是目前在线办公套件中的两个主要参与者。这两个套件为最终用户提供了完全不同的体验。Office 365 主要用于连接到传统的本地安装的 Microsoft Office 副本，而这正是您的用户可能在其中完成大部分工作的地方。Google Docs 是关于在浏览器中工作的——您可以导入和导出 Office 文件，但 Web 应用程序是 Google 的重点。

比较链接： http: [//www.windowsitpro.com/article/cloud-computing2/office-365-google-docs-enduser-perspective-140011](http://www.windowsitpro.com/article/cloud-computing2/office-365-google-docs-enduser-perspective-140011)

# android - 如何在 android 条码应用程序上设置值？

> ID：12870185
> 
> 赞同：1
> 
> 时间：2012-10-13T05:14:00.093
> 
> 标签：android, barcode-scanner

我正在做一个二维码扫描仪。使用调用其他应用程序（ZXING）进行扫描，所以现在我要设置一个 qrcode 值，如“12345”（文本）。当我的应用程序扫描该值将跳转到下一个布局。那么我应该添加什么代码？如何添加？

```
if (resultCode == RESULT_OK) {
    String contents = intent.getStringExtra("SCAN_RESULT");
    String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
    // Handle successful scan
} else if (resultCode == RESULT_CANCELED) {
    // Handle cancel
} 
```

# django - 构建 Mercurial 需要 Python 头文件

> ID：12870186
> 
> 赞同：11
> 
> 时间：2012-10-13T05:14:02.930
> 
> 标签：django

我一直在逐步关注 kennethlove 的截屏视频，标题为[“django 入门”](http://gettingstartedwithdjango.com/resources/)。我被困在“第 6 集：通用视图比名牌便宜”。我正在尝试安装需要“Mercurial”的“django-annoying”。

我使用的是 OSX 10.8.2，当我在终端上运行时：`pip install mercurial`我收到以下消息。

```
 Downloading/unpacking mercurial
  Downloading mercurial-2.3.2.tar.gz (3.6MB): 3.6MB downloaded
  Running setup.py egg_info for package mercurial

    Python headers are required to build Mercurial
    Complete output from command python setup.py egg_info:
    running egg_info

creating pip-egg-info/mercurial.egg-info

writing pip-egg-info/mercurial.egg-info/PKG-INFO

writing top-level names to pip-egg-info/mercurial.egg-info/top_level.txt

writing dependency_links to pip-egg-info/mercurial.egg-info/dependency_links.txt

writing manifest file 'pip-egg-info/mercurial.egg-info/SOURCES.txt'

warning: manifest_maker: standard file '-c' not found

Python headers are required to build Mercurial

----------------------------------------
Command python setup.py egg_info failed with error code 1 in /Users/gth158a/Sites/official/poll/build/mercurial
Storing complete log in /Users/gth158a/.pip/pip.log 
```

我一直在寻找解决方案，我发现最接近的是有人[在 Ubuntu 中遇到同样的问题，](http://gullele.wordpress.com/2011/08/13/python-headers-are-required-to-build-mercurial-error-while-installing/)但他提出的解决方案不适用于我的 osx 案例。

从我的研究中，我了解到所引用的标头是用于构建应用程序的“C 标头”。我已经安装了我在 pip 中找到的软件包，这些软件包的描述中有 C 标头，但根本没有成功。如果您能指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-30T15:05:35.770

我在 Ubuntu 上遇到了同样的问题。我使用以下命令安装了“python-dev”包..

```
sudo apt-get install python-dev 
```

我认为安装它对任何风格的 Linux 都有帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-17T13:53:40.240

很可能只是您没有安装命令行工具。

安装它们的最简单方法是打开 Xcode 转到首选项、下载、组件选项卡 --> 命令行工具（安装）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T10:03:50.407

Pip 无济于事，因为它安装了 python 包。Python 头文件通常安装在系统范围内。根据[这个](https://stackoverflow.com/a/6151658/473285)XCode 安装 Python 头文件

# javascript - 打印时将页面上的 div 打印在单独的页面上

> ID：12870187
> 
> 赞同：0
> 
> 时间：2012-10-13T05:14:02.810
> 
> 标签：javascript, printing

我有由用户输入生成的不同尺寸的 Div，我需要在打印时将它们打印在不同的页面中。例如，Div1 占用 1.5 页，而 div2 占用 0.5 我需要 Div2 在新页面上打印，而不是简单地从第二页的后半部分开始，从 Div1 停止的地方开始。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T05:16:06.347

您可以为屏幕（显示器、手机、平板电脑等）和打印包含单独的样式表：

```
<link rel="stylesheet" type="text/css" media="screen" href="screen_style.css">
<link rel="stylesheet" type="text/css" media="print" href="print_style.css"> 
```

然后，您可以在打印样式表中使用[CSS 分页符](http://www.w3.org/TR/CSS21/page.html#page-breaks)在每个相关`div`的 .

# windows - 如何在 Windows 命令行中使用通配符解码多个文件

> ID：12870190
> 
> 赞同：2
> 
> 时间：2012-10-13T05:14:19.903
> 
> 标签：windows, file, command-line-interface

我有（控制台）程序`flac.exe`，我希望能够将所有`flac`文件解码到`wav`一个目录中，而不必一次执行每个文件。

我试过了：

```
flac -d *.flac 
```

但它在尝试创建 wav 文件时出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:47:14.890

在命令行上使用它：

```
for %i in (*.flac) do flac %i 
```

如果要将其放入批处理文件中，则必须使用`%%i`而不是`%i`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:43:19.930

您可以使用 [此批量重命名](http://www.bulkrenameutility.co.uk/Command.php)实用程序吗？

*Bulk Rename Utility 是一个易于使用的文件重命名程序（又名文件重命名器）。重命名多个文件从未如此简单！它的内存占用很小，因此可以一直运行而不会消耗所有内存。它最初是一个免费的 Visual Basic 工具，但随着它的普及，它已经完全用 C++ 重写，变得健壮和轻量级——而且非常非常快！它可以轻松处理包含超过 100,000 个条目的文件夹/光盘……并且可以在几秒钟内批量重命名 1,000 个文件。*

# java - Android SSL - 不适用于 API 7

> ID：12870192
> 
> 赞同：0
> 
> 时间：2012-10-13T05:15:00.527
> 
> 标签：java, android, ssl, https

我按照本教程[http://blog.antoine.li/2010/10/22/android-trusting-ssl-certificates/](http://blog.antoine.li/2010/10/22/android-trusting-ssl-certificates/)并设法通过 Android API 16 (4.1) 上的 HTTPS 连接到我的网络服务

我的应用程序可以使用低 API，所以我启动了 Google Maps API 7 模拟器，但现在当我尝试连接时，它给了我

```
10-13 05:10:47.441: W/System.err(492): javax.net.ssl.SSLException: Not trusted server certificate 
```

我启动了 4.1 模拟器，它仍然在那里工作。

该教程是2年前的，没有使用任何新东西......

[与Android 2.2 中的“不受信任的服务器证书”](https://stackoverflow.com/questions/6724833/not-trusted-server-certificate-in-android-2-2-but-not-3-0)几乎相同的问题，但不是 3.0 ，但也没有解决方案......

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:10:04.673

我不知道是什么原因造成的，但由于我使用的是我购买的证书，而不是自签名证书，所以我不必做太多调整。刚刚使用了`HttpClient`这里使用的

[http://thinkandroid.wordpress.com/2009/12/31/creating-an-http-client-example/](http://thinkandroid.wordpress.com/2009/12/31/creating-an-http-client-example/)

# c# - IDTWizard : 验证项目和解决方案名称

> ID：12870196
> 
> 赞同：0
> 
> 时间：2012-10-13T05:15:24.613
> 
> 标签：c#, .net

我正在为 Visual Studio 中的新项目窗口创建一个 IDTWizard。我需要用户以特定格式输入项目/解决方案名称，即“ABCD”。问题是我可以访问新项目窗口的唯一方法是通过 IDTWizard 界面中的 Execute() 方法。新项目窗口关闭并打开自定义表单，我无法在新项目窗口本身中执行检查。

有没有办法做到这一点？

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T16:14:39.660

您无法控制用户在 New Project Window 中键入的内容，但在 Execute() 方法中，您可以检查用户输入的名称。当名称错误时，您可以显示错误消息并设置

```
retval = wizardResult.wizardResultBackOut; 
```

这将使用户返回到新项目窗口，他可以在其中更正名称。

# c++ - 实用函数的放置位置

> ID：12870214
> 
> 赞同：2
> 
> 时间：2012-10-13T05:18:42.927
> 
> 标签：c++

我有`program.cpp`其中包含的`main`功能。有一个`Tracker`在`main`函数中使用的类。`program.cpp`还包含一堆实用函数（例如检查作为参数传递给程序的文件是否存在的函数）。我想将这些实用功能移出`program.cpp`. 我应该怎么做：

*   make`utils.cpp`包含原样的函数，将原型放入`utils.h`，包含`utils.h`在里面`program.cpp`并编译为`g++ ... program.cpp utils.cpp`
*   或者，创建`utils.h`一个没有私有成员的类，只需将所有功能设为公共，实现它们，`utils.cpp`然后将它们`program.cpp`用作`Utils utils; utils.stuff(...);`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T05:21:08.373

如果您不需要一个类，则没有理由创建一个类（尤其是不只是一个用于一些不相关功能的类）。我会选择您的第一个选项，并在`util.h`.

# mysql - 查询重复的参与者姓名并仅显示参与者姓名一次

> ID：12870215
> 
> 赞同：1
> 
> 时间：2012-10-13T05:18:56.767
> 
> 标签：mysql

我有以下查询，

```
SELECT Participant_name from Participant_email where Sub_id = 46 
```

在我的表中显示参与者姓名的结果，在此表中我重复了参与者姓名，我想计算每个参与者姓名他们重复的次数。就像：玛丽（4）干草（3）..

谁能告诉我如何编写这个查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T05:20:25.347

您需要使用`COUNT()`which 是一个聚合函数并按其名称对它们进行分组。

```
SELECT Participant_name, COUNT(Participant_name) totalCount
from Participant_email 
-- where Sub_id = 46
GROUP BY Participant_name 
```

**更新 1**

```
SELECT CONCAT(Participant_name, ' (', COUNT(Participant_name), ')') Participant_name
from Participant_email 
-- where Sub_id = 46
GROUP BY Participant_name 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/8ca58/4)

# php - 重定向请求永远不会完成 - PHP 脚本有问题吗？

> ID：12870216
> 
> 赞同：1
> 
> 时间：2012-10-13T05:19:09.030
> 
> 标签：php, html

坦率地说，我不是一个编码狂。基本上，这个 php 脚本验证“时事通讯订阅”表单的名称和电子邮件字段。好吧，一切似乎在所有浏览器上都运行良好。2 天后，此脚本停止在 IE9 和 Firefox 14-16 上运行。它在 Chrome 上运行良好。请问各位大神，请问这个错误是什么原因造成的？

php 脚本名为 signup.php

**代码中的“回声脚本警报”似乎不适用于 FF 和 IE9。它在 Chrome 上运行得非常好。这正是我的问题。**

Firefox 上的错误 - Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。此问题有时可能是由禁用或拒绝接受 cookie 引起的。

Firefox 上的操作点 - 已采取所有必要措施来解决此错误。什么都没解决。

IE9 上的错误 - 它根本不响应并停留在同一页面上。

```
<?php

ob_start();
session_start();

/*Name Validation.*/
function checkName($name) 
{
$nAccept = array("&", "’", " ",  "-");

if (!ctype_alpha(str_replace ($nAccept, "", $name)))
   {
        return TRUE;
    }
}

/*Email Validation.*/
function checkEmail($email) 
{
   if(mb_eregi("^[a-zA-Z0-9_]+@[a-zA-Z0-9\-]+\.[a-zA-Z0-9\-\.]+$]", $email)) 
   {
      return FALSE;
   }
    if (!preg_match("/^[^@]{1,64}@[^@]{1,255}$/i", $email))
    {

        return false;
    }

   list($Username, $Domain) = explode("@",$email);

   if(getmxrr($Domain, $MXHost)) 
   {
      return TRUE;
   }
   else 
   {
      if(fsockopen($Domain, 25, $errno, $errstr, 30)) 
      {
         return TRUE; 
      }
      else 
      {
         return FALSE; 
      }
   }
}

function isInjected($str) {
    $injections = array('(\n+)',
    '(\r+)',
    '(\t+)',
    '(%0A+)',
    '(%0D+)',
    '(%08+)',
    '(%09+)'
    );
    $inject = join('|', $injections);
    $inject = "/$inject/i";
    if(preg_match($inject,$str)) {
        return true;
    }
    else {
        return false;
    }
}

if(checkName($_REQUEST['name']) == TRUE) {
echo "<script>alert('Please enter a Valid Name.');history.back();</script>";
}

elseif (!isset($_POST['email'])) {
echo "<script>alert('Please ensure you have completed all fields before submitting the form. No fields to be left blank.');history.back();</script>";
}

elseif (empty($_POST['name']) || empty($_POST['email'])) {
echo "<script>alert('Please ensure you have completed all fields before submitting the form. No fields to be left blank.Type in only one valid email address.');history.back();</script>";
}

elseif ( isInjected($_POST['email']) ) {
echo "<script>alert('Please ensure you have completed all fields before submitting the form. No fields to be left blank.Type in only one valid email address.');history.back();</script>";
}

elseif(checkEmail($_REQUEST['email']) == FALSE) {
echo "<script>alert('Entered E-Mail is Invalid or The E-Mail does not belong to a valid domain.');history.back();</script>";
}

else{

$host="localhost"; // Host name 
$username="root"; // Mysql username 
$password="root"; // Mysql password 
$db_name="test"; // Database name 
$tbl_name="connect_members_temp"; //table name

mysql_connect("$host", "$username", "$password")or die("cannot connect to server"); 
mysql_select_db("$db_name")or die("cannot select DB");

$confirm_code=md5(uniqid(rand()));

$name=$_POST['name'];
$email=$_POST['email'];

$sql="INSERT INTO $tbl_name(confirm_code, name, email)VALUES('$confirm_code', '$_POST[name]', '$_POST[email]')";
$result=mysql_query($sql);

}
mysql_close();

if($result)
{

// send e-mail to
$to= 'me@localhost';
$thankyou_page = "before_subscription.html";
$email_page = "email_connectivity.html";
$data_page = "email_not_found.html";

$subject="Confirm Your Subscription with XXXXX";

$header="from: XXXXX <donotreply@XXXXX.com>";

$message="Your Confirmation link \r\n";
$message.="Click on this link to confirm your subscription \r\n";
$message.="http://localhost/XXXXX/confirmation.php?passkey=$confirm_code";

// send email
$sentmail = mail($to,$subject,$message,$header);

}

else
{
header( "Location: $data_page" );
}

if($sentmail)
{
header( "Location: $thankyou_page" );
}
else{
header( "Location: $email_page" );
}

?> 
```

这是 HTML 表单

```
<form action="signup.php" method="post">
        <fieldset>
          <legend>Digital Newsletter</legend>
          <div class="fl_left">
            <input type="text" name="name" value="Enter name here&hellip;" onfocus="this.value=(this.value=='Enter name here&hellip;')? '' : this.value ;" />
            <input type="text" name="email" value="Enter email address&hellip;" onfocus="this.value=(this.value=='Enter email address&hellip;')? '' : this.value ;"/>
          </div>
          <div class="fl_right">
            <input type="submit" name="newsletter_go" id="newsletter_go" value="&raquo;"/>
          </div>
        </fieldset>
      </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:58:50.023

您不能进行重定向，也不能在页面上回显消息。当验证失败时，您应该回显该消息然后退出。

您收到重定向错误的原因是由于提到的 GBD 问题。当验证失败时，你永远不会进入`else`设置的子句`$data_page`，但`header("Location: $data_page");`无论如何你都会这样做。

此外，在您这样做之后，您将进入发送`$thankyou_page`或的代码`$email_page`。你只能有一个`Location:`标题。您需要在发送所需的重定向后退出。

# php - PHP读取一个txt数据文件并将数据传递给数组

> ID：12870219
> 
> 赞同：1
> 
> 时间：2012-10-13T05:20:22.737
> 
> 标签：php, codeigniter

我需要从 txt 文件中提取以下数据（显示在链接中），然后保存在 mysql 上指定的每个字段，我的问题是如何获取一行中包含的每个字段，因为它用空格分隔

我试过了， `array = explode(' ', $line);` 但这种方法可以节省空间

我想把它放入一个数组中，

```
Array=(
 [0] => '1',
 [ 1] => 'OC1',
 [2] => 'Columna', 
 [3] => '1',
 [4] => 'IN45X104',
 [5] => '11745'
 ....
 ); 
```

![在此处输入图像描述](../Images/f6488e68c6f8d669d7b53479236b1479.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:31:24.160

```
$string = preg_replace("/\s[\s]+/",",",$string);
$array = explode(",",$string); 
```

`preg_replace`就像工作一样`str_replace`，但允许您使用正则表达式替换`/\s[\s]+/`匹配多个空格，然后所有空格替换为单个空格，`","`因此现在很容易爆炸。

函数来源：http: [//in3.php.net/manual/en/function.preg-replace.php](http://in3.php.net/manual/en/function.preg-replace.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:26:58.973

试试这个，

```
$tok = strtok($string, " \n\t\x0B\0");
while ($tok !== false) 
{
 echo "Word=$tok<br />";
 $tok = strtok(" \n\t\x0B\0");
} 
```

> strtok() 将字符串 (str) 拆分为更小的字符串 (tokens)，每个 token 由 token 中的任何字符分隔。也就是说，如果您有一个类似“This is an example string”的字符串，您可以通过使用空格字符作为标记将此字符串标记为单独的单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T05:35:04.643

使用 preg_split() 匹配复杂的分隔符

[http://codepad.org/fhsTWsZc](http://codepad.org/fhsTWsZc)

```
<?php

$line="test test2  test3";
$array=preg_split('/\s+/',$line);
print_r($array); 
```

# jquery - 为什么多个函数不调用 WCF？

> ID：12870225
> 
> 赞同：0
> 
> 时间：2012-10-13T05:22:08.690
> 
> 标签：jquery, wcf

我将值传递给 WCF 服务中的数组元素。我在这里使用 jQuery。

我的职能是：

在 Service.cs 中：

```
public class User
{

    Dictionary<int, string> users = null;
    public User()
    {
        users = new Dictionary<int, string>();
        users.Add(1, "apple");
        users.Add(2, "orange");
        users.Add(3, "lemon");
        users.Add(4, "grape");
    }

    public string[] GetUser(int Id)
    {
        var user = from u in users
                   where u.Key == Id
                   select u.Value;

        return user.ToArray<string>();
    } 
```

在 jQuery 中：

```
function CallService() {
             $.ajax({
                 type: Type, 
                 url: Url, 
                 data: Data, 
                 contentType: ContentType,
                 dataType: DataType, 
                 processdata: ProcessData, 
                 success: function(msg) {
                     ServiceSucceeded(msg);
                 },
                 error: ServiceFailed
             });
         } 
```

我这样声明的第一个函数：

```
 function WCFJSON() {

             var uesrid = "2";
             Type = "POST";
             Url = "Service.svc/GetUser";
             Data = '{"Id": "' + uesrid + '"}';
             ContentType = "application/json; charset=utf-8";
             DataType = "json"; ProcessData = true; 

             CallService();

         } 
```

我调用的这个函数如下：

```
 $(document).ready(
         function() {
         WCFJSON();
         }
         ); 
```

我的第二个功能是：

```
function temp()
         {
         //var id=parseInt($('#txtinput').val();
         var id="5";
         Type="POST";
         Url="Srvice.svc/GetUser";
         Data='{"Id":"'+id+'"}';
         ContentType="application/json;charset=utf-8";
         DataType="json";ProcessData=true;
        CallService();

         } 
```

我通过点击客户端按钮调用了这个函数，如下所示：

```
<asp:Button ID="btnsumbit" runat="server" Text="submit" OnClientClick ="temp();"  /> 
```

我的问题是当我运行这个程序时，我只得到了第一个函数（“WCFJSON();”）的结果，“temp();”的其他函数 我没有得到任何结果。我不知道我错过了什么？谁能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:44:10.320

![在此处输入图像描述](../Images/c26822b2d438b5241c77d5b8f26f3f0d.png) 数据 = '{"Id": "' + uesrid + '"}';

应该：

```
Data = {"Id": uesrid}; 
```

这应该是一个对象，并将`$.ajax`对其进行序列化。

在 temp() 中，更改：

```
Data='{"Id":"'+id+'"}'; 
```

到：

```
Data={"Id": id }; 
```

# javascript - 如何根据 AJAX 调用的回调创建“do while”循环（其停止条件）？

> ID：12870237
> 
> 赞同：1
> 
> 时间：2012-10-13T05:24:57.493
> 
> 标签：javascript, jquery, ajax, do-while

考虑以下代码：

```
var x = 0;
do {
    $.ajax({ 
    type: "POST", 
    url: someurl,
    dataType: 'xml',
    data: xmlString, 
    success: function(xml) { 
             x++;
    }

} while(x<10); 
```

当然，这将不起作用，因为将对“someurl”发出数千个请求，那么我将如何更改此代码以使`do while`条件取决于异步 HTTP 请求的回调？换句话说，我如何让 do-while 循环仅在调用请求回调时继续？这样只会进行 11 次迭代，而不是数千次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T05:30:32.600

你可以像这样重写它：

```
var x = 0;

function ajaxCall() {
    $.ajax({ 
    type: "POST", 
    url: someurl,
    dataType: 'xml',
    data: xmlString, 
    success: function(xml) { 
        x++;
        if (x<10) ajaxCall();
        else afterAjaxCall();
    }
}

function afterAjaxCall() {} 
```

这样，该方法在成功十次时调用自身，然后调用“after”方法以继续执行其他代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T05:30:52.210

```
var x = 0;
function callAjax() {
    $.ajax({  
        type: "POST",  
        url: someurl, 
        dataType: 'xml', 
        data: xmlString,  
        success: function(xml) {
            x++;
            if(x < 10){                     
                callAjax();
            }
        }
    }
} 
```

这样做的想法是，该`success`方法首先增加计数器，然后根据最大调用次数检查它。如果它更少，`ajaxCall`则制作另一个。在方法中进行额外调用`success`是防止进行大量调用的唯一方法（`$ajax`当然是异步的，因此会立即返回）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T05:28:20.513

```
var x = 0;
function A() {
    $.ajax({ 
    type: "POST", 
    url: someurl,
    dataType: 'xml',
    data: xmlString, 
    success: function(xml) { 
            x++;
            if(x<10)
            A();
    }

}
A(); 
```

# symfony - 如何远程访问 symfony config.php？

> ID：12870243
> 
> 赞同：1
> 
> 时间：2012-10-13T05:26:04.773
> 
> 标签：symfony, amazon-ec2, bitnami

我已经在 Amazon EC2 上的 bitnami 中设置了 Symfony。现在我想访问`web/config.php`，但被告知该文件只能通过 localhost 运行。

我也尝试登录EC2的远程桌面，但失败了。那么现在我怎样才能确保 symfony 在服务器上一切正常呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T09:29:20.483

打开`config.php`并编辑以下代码

```
if (!in_array(@$_SERVER['REMOTE_ADDR'], array(
    '127.0.0.1',
    '::1',
))) {
    header('HTTP/1.0 403 Forbidden');
    exit('This script is only accessible from localhost.');
} 
```

您可以添加远程服务器的 IP 地址，也可以只注释掉这段代码。考虑到最后一个建议，出于安全原因不推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:30:37.357

首先使用 htpasswd 保护您的生产站点。编辑文件 config.php 并删除。

# ruby-on-rails - 类方法上的 ActiveSupport::Callbacks

> ID：12870244
> 
> 赞同：4
> 
> 时间：2012-10-13T05:26:17.777
> 
> 标签：ruby-on-rails, ruby, callback, activesupport, eigenclass

是否可以`ActiveSupport::Callbacks`在类方法上使用？更具体地说，在下面的模块中，你会在哪里`include ActiveSupport::Callbacks`创建`define_callbacks`和`run_callbacks`共享相同的状态？

```
module Handler
  extend ActiveSupport::Concern

  # If you put it here, define_callbacks is defined but run_callbacks is not
  # include ActiveSupport::Callbacks 

  included do
    class_eval do
      define_callbacks :handle
    end
  end

  module ClassMethods
    # If you put it here, run_callbacks is defined but define_callbacks is not
    # include ActiveSupport::Callbacks 

    def handle(task)
      run_callbacks :handle do
        p task
      end
    end
  end
end

class HandlerExample
  include Handler
end 
```

**更新**

如果有可能，但我无法确定，那肯定不是`ActiveSupport::Callbacks`为它设计的。最好在`#handle`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:24:12.480

虽然整个想法有点尴尬，恕我直言，你已经把 define_callbacks 放在了错误的地方。你应该把它放在特征类中，例如

eval << -EOF 类 << self ; 定义回调.. ; EOF

然后您可以执行“发送：扩展，ActiveSupport::Callbacks”。这甚至可能奏效。

但我建议您重新考虑它，并使用标准实现来解决，在该实现中调用实例上的回调。

# css - 你如何使用字体伪造来生成字体？

> ID：12870247
> 
> 赞同：3
> 
> 时间：2012-10-13T05:26:48.987
> 
> 标签：css, fonts

如果你想要一个基本的 hello world 字体，比如

```
<html>
<head>
    <title></title>
    <style type="text/css">
        @font-face {
            font-family: font1;
            src: url('http://www.w3schools.com/cssref/Sansation_Light.ttf')
            ,url('http://www.w3schools.com/cssref/Sansation_Light.ttf');
        }
        .myfont{
            font-family: font1;
            font-size: 500%;
            color: red;
        }
    </style>
</head>
<body>
    <span class="myfont">aA</span>
</body>
</html> 
```

并且您正在使用字体伪造，如下所示：

![在此处输入图像描述](../Images/7193be5e1e37ab851d3b639ec5381b4d.png)

当您尝试“生成字体”时，您最终会得到这个结果，它会为您提供一个所有内容都变灰的对话框。

![在此处输入图像描述](../Images/594b8f9c3c03d74cd6f132c36203a1e9.png)

我想导出一个 .ttf 文件，但字体伪造不允许这种情况发生。[这](http://www.high-logic.com/font-editor/fontcreator/download.html)迫使您在测试之前支付 80 美元，而且[许多这样](http://ptf.com/.ttf/.ttf+creator/)的可能是病毒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T20:33:24.473

据我所知，问题的第一部分只是背景信息，问题只是在使用 FontForge 字体编辑器。从屏幕截图看来，您已经开始创建字体，在那里选择字符位置（字母 A），并导入位图图像。但是由于程序处于创建轮廓（矢量）字体的模式，因此不会创建字形。到目前为止，字体中没有字形，因此在保存时没有可选择的字体格式选项。

如果您希望使用位图字体，请参阅有关它们的 FontForge 信息，最好从[http://fontforge.org/editexample7.html#Bitmaps开始](http://fontforge.org/editexample7.html#Bitmaps)

但是位图字体并不是我们现在应该使用的。它们不能合理地扩展到各种尺寸。使用轮廓字体是要走的路，然后你可能需要从FontForge的介绍开始：http: [//fontforge.org/overview.html](http://fontforge.org/overview.html)

我必须承认我发现 FontForge（软件本身和它的文档）相当混乱，而且它似乎有一些奇怪和错误。但作为一个免费的字体编辑器，它可能值得一看。

# php - 如何在 foreach 中传递变量 .. 以获取数组的所有索引

> ID：12870253
> 
> 赞同：0
> 
> 时间：2012-10-13T05:27:43.253
> 
> 标签：php, loops, foreach

不确定这是否可能，但这里有......我需要获取`indexes`包含在一个数组中的所有`object`

# 前锋

```
<?php foreach($all_orders as $key => $val) : ?>

<?php 
    $cart = unserialize($val->cart);  
    $keys = array_keys($cart); 
    $x = count($keys); 
    $index = $keys[$x]; 
    $cart = $cart[$index]; 
?>

<?php $val->field_name; ?>

<?php endforeach; ?> 
```

# var_dump

```
array (size=3)
  0 => 
    object(stdClass)[22]
      public 'tracking_num' => string '1Z12345E1512345676' (length=18)
      public 'order_status' => string '1' (length=1)
      public 'cust_id' => string '10' (length=2)
      public 'cart' => string 'a:1:{s:32:"d9082c0e32bb353796d3bf8ebba34f71";a:9:{s:5:"rowid";s:32:"d9082c0e32bb353796d3bf8ebba34f71";s:2:"id";s:9:"101_44068";s:3:"qty";s:1:"1";s:5:"price";s:5:"104.5";s:4:"name";s:13:"Business Card";s:5:"image";s:18:"business-cards.gif";s:4:"ship";a:3:{s:6:"Ground";d:9.730000000000000426325641456060111522674560546875;s:11:"2nd Day Air";d:18.53999999999999914734871708787977695465087890625;s:9:"Overnight";d:26.269999999999999573674358543939888477325439453125;}s:7:"options";a:2:{s:17:"Print Description";s:16'... (length=784)
      public 'shipping_type' => string 'Overnight' (length=9)
      public 'shipping_cost' => string '26.27' (length=5)
      public 'order_sub_total' => string '104.50' (length=6)
      public 'order_total' => string '130.77' (length=6)
      public 'id' => string '30' (length=2)
      public 'timestamp' => string '2012-10-13 00:52:30' (length=19)
  1 => 
    object(stdClass)[23]
      public 'tracking_num' => string '' (length=0)
      public 'order_status' => string '0' (length=1)
      public 'cust_id' => string '10' (length=2)
      public 'cart' => string 'a:2:{s:32:"d7f14d223f7873bf93a3c0670b01609b";a:9:{s:5:"rowid";s:32:"d7f14d223f7873bf93a3c0670b01609b";s:2:"id";s:9:"101_96866";s:3:"qty";s:1:"1";s:5:"price";s:5:"84.25";s:4:"name";s:13:"Business Card";s:5:"image";s:18:"business-cards.gif";s:4:"ship";a:3:{s:6:"Ground";d:9.730000000000000426325641456060111522674560546875;s:11:"2nd Day Air";d:18.53999999999999914734871708787977695465087890625;s:9:"Overnight";d:26.269999999999999573674358543939888477325439453125;}s:7:"options";a:2:{s:17:"Print Description";s:16'... (length=1582)
      public 'shipping_type' => string 'Ground' (length=6)
      public 'shipping_cost' => string '37.62' (length=5)
      public 'order_sub_total' => string '622.25' (length=6)
      public 'order_total' => string '659.87' (length=6)
      public 'id' => string '31' (length=2)
      public 'timestamp' => string '2012-10-13 00:53:20' (length=19)
  2 => 
    object(stdClass)[24]
      public 'tracking_num' => string '' (length=0)
      public 'order_status' => string '0' (length=1)
      public 'cust_id' => string '10' (length=2)
      public 'cart' => string 'a:4:{s:32:"7670d6182aaad174954c5619079f48a1";a:9:{s:5:"rowid";s:32:"7670d6182aaad174954c5619079f48a1";s:2:"id";s:9:"101_32840";s:3:"qty";s:1:"1";s:5:"price";s:5:"84.25";s:4:"name";s:13:"Business Card";s:5:"image";s:18:"business-cards.gif";s:4:"ship";a:3:{s:6:"Ground";d:9.730000000000000426325641456060111522674560546875;s:11:"2nd Day Air";d:18.53999999999999914734871708787977695465087890625;s:9:"Overnight";d:26.269999999999999573674358543939888477325439453125;}s:7:"options";a:2:{s:17:"Print Description";s:16'... (length=3145)
      public 'shipping_type' => string 'Overnight' (length=9)
      public 'shipping_cost' => string '224.46' (length=6)
      public 'order_sub_total' => string '1,000.75' (length=8)
      public 'order_total' => string '1225.21' (length=7)
      public 'id' => string '32' (length=2)
      public 'timestamp' => string '2012-10-13 01:11:03' (length=19) 
```

这段代码包含在一个`foreach`var`$cart`中包含一个`ARRAY`带有多个的对象`indexes`。如果我`$x`用`0`循环替换将显示`cart`数组中的第一个索引。但是有些`cart`包含超过 1 个索引。

`count($keys)`正确地回显了`cart`数组中的索引数。例如，我有 3 辆购物车。

1.  `cart`1 有`1 index`
2.  `cart`2 有`2 index`
3.  `cart`3 有`4 index`

如果我这样做，`echo count($keys)`我会回来`1 2 4`

如何将这些值（按顺序）单独传递`$x`给每个循环的 var？

**注意购物车如何可能有超过 1 个索引值**

期望输出：

每个都`cart`包含一个包含多个产品的数组。foreach 必须遍历并显示数组中的每个产品`cart`基于上面显示的 var_dump，`cart`数组的预期输出应该在如下表中：

```
<tr>0</tr> /*cart 1 has 1 index in the array*/
<tr>01</tr> /*cart 2 has 2 index in the array*/
<tr>0123</tr> /*cart 3 has 4 index in the array*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:37:19.947

如果我理解你的问题——我不确定我是否理解——你可以`foreach`在你没有显示的循环中使用一个简单的循环。（或者至少在我写这个答案时它不在问题中 - 也许编辑你的问题以显示它，嗯？）

这个内部`foreach`循环将循环通过如下值`$keys`：

```
foreach ($keys as $this_key) {
    // whatever you want to do with the values of $keys here
    // each value will be available as $this_key
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:44:12.747

数组索引从 0 开始，因此您应该尝试：

```
$x = count($keys) -1
$index = $keys[$x] 
```

您所有的索引都保存在 $keys 中，您可以遍历它以获取各自的元素，例如`$cart[$keys[0]], $cart[$keys[1]], ...`

这将为您提供数组中的最后一个数组键`$index`。

或者，我建议您使用以下命令遍历数组 $cart 的所有键：

```
foreach($cart as $key=>$value){
   $cart[$key]; $value //Do whatever you want with the cart with the index $key or its value $value.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T06:19:12.293

您可以尝试如下

您有每个订单可以有多个购物车，每个购物车有多个项目。您希望在每个购物车中显示 # 个项目。

```
<?php 
    $cart = unserialize($val->cart);  
    $keys = array_keys($cart); // this will give you # of carts into one order
    //if now you want to count # of items into each cart then
    foreach($keys as $val){
      echo count($cart[$val]);
    }

?> 
```

# visual-studio-2010 - Visual Studio 2010：在文本编辑器中滚动会使解决方案资源管理器滚动

> ID：12870255
> 
> 赞同：1
> 
> 时间：2012-10-13T05:28:15.310
> 
> 标签：visual-studio-2010

我在我的机器上安装了带有 SP1 的全新 Visual Studio 2010。

我注意到，当我在文本编辑器中打开一些代码或布局文件时，如果我尝试使用鼠标滚轮滚动，解决方案资源管理器将上下滚动而不是我的文件。

我发现只有在解决方案资源管理器停靠并且项目目录扩展到足以使解决方案资源管理器具有滚动条时才会发生这种情况。当它没有停靠（即自动隐藏）或所有项目都关闭以致没有滚动条时，我的文本编辑器将正确滚动。

我确定我已经点击了文本编辑器，它应该有上下文。

有任何想法吗？

几年前我遇到过这个问题，当时已经解决了，但不记得该怎么做。我认为它是 Visual Studio HotFix，但我无法在任何地方找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:24:29.413

原来这是我的联想鼠标和我电脑上安装的联想鼠标套件的问题。您可以通过从计算机中删除 Mouse Suite 程序并让鼠标使用 MS Windows 驱动程序来解决此问题。

[http://thecurlybrace.blogspot.com.au/2010/08/mouse-scroll-whell-issues-with-visual.html](http://thecurlybrace.blogspot.com.au/2010/08/mouse-scroll-whell-issues-with-visual.html)

# python - 如何对用 Python 编写的 GDB 漂亮打印机进行单元测试？

> ID：12870256
> 
> 赞同：2
> 
> 时间：2012-10-13T05:28:16.963
> 
> 标签：python, unit-testing, gdb, pretty-print

我已经使用 GDB Python 接口为（C）结构编写了一个漂亮的打印机，该结构倾向于在软件版本之间发生变化。由于格式在波动，我试图使打印机具有足够的动态以适应并总是尝试打印有用的东西而不是抛出 Python 异常。

目前我需要支持两种主要格式，但未来可能还会支持更多。我想为打印机编写一些单元测试，以避免必须手动加载来自不同版本的 coredump 来测试它。

我想也许我可以从调试会话中序列化 gdb.Value 并将它们加载到我的单元测试中，但我无法做到（pickle 不适用于 gdb.Value）。核心转储非常大，因此无法使用漂亮的打印机和脚本 GDB 存储它们以进行测试。

如何在不保留大量核心转储的情况下对漂亮的打印机进行单元测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:07:16.793

> 如何在不保留大量核心转储的情况下对漂亮的打印机进行单元测试？

保留小核心转储:-)

假设您`struct Foo`有一台漂亮的打印机，并且在不同版本之间不断变化。

编译以下程序：

```
#include <stdlib.h>
#include "foo.h"
int main()
{
   struct Foo f;
   // initialize f with some values
   abort();
} 
```

编译并运行该程序，将其和生成的核心存储为`foo-v2`and `foo-v2.core`（假设您现在使用 2 的版本`struct Foo`）。核心应该很小。

现在结帐`foo.h`对应于版本 1 的`struct Foo`版本控制系统（您*确实*使用了版本控制系统，对吗？）。重建并重新运行程序，将其存储`foo-v1`为`foo-v1.core`.

现在，对于每个版本，您只需要重新构建/重新运行上述程序，并将 GDB 漂亮打印机的输出与预期结果进行比较。如果它仍然可以正常工作，你就完成了。如果没有，`struct Foo`一定是已经改变了，你需要更新你的漂亮打印机。

将新的二进制文件和核心保存为`foo-v3`and `foo-v3.core`，更新漂亮的打印机，然后针对所有`foo-vN`和`foo-vN.core`对进行测试（对于测试本身，使用 GDB 源代码附带的 GDB 单元测试框架）。

# gcc - Eclipse 不会在 Mac 上使用 gcc 4.7

> ID：12870257
> 
> 赞同：6
> 
> 时间：2012-10-13T05:28:19.603
> 
> 标签：gcc

我使用 macports 安装了 gcc47。我使用 select 使 gcc47 成为我的活动编译器。当我在终端中输入 gcc --version 时，我得到： gcc (MacPorts gcc47 4.7.2_2) 4.7.2 版权所有 (C) 2012 Free Software Foundation, Inc. 这是免费软件；查看复制条件的来源。没有保修；甚至不考虑适销性或特定用途的适用性。

当我尝试在 Eclipse 中编译 c++ 代码时，我得到： Invoking: GCC C++ Compiler g++ -D__GXX_EXPERIMENTAL_CXX0X__ -I/Users/XXXX/QtSDK/Madde/sysroots/harmattan_sysroot_10.2011.34-1_slim/usr -O0 -g3 -Wall -c -fmessage -length=0 -std=c++0x -MMD -MP -MF"XXXX_Process.d" -MT"XXXX_Process.d" -o "XXXX_Process.o" "../XXXX_Process.cpp" cc1plus：错误：无法识别的命令行选项 "-std=c++0x" make: *** [XXXX_Process.o] 错误 1

我不确定我没有做什么来完成这项工作。对于我在学校编写的程序，我需要一个更新的编译器。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-18T03:36:17.300

问题是 Eclipse 路径上的发现顺序与终端中的顺序不同。我已经尝试过按照上面的建议进行符号链接，但这仍然没有解决我的问题，但是这样做了！

经过大量搜索和尝试其他事情后，我能够手动设置我的编译器和链接器的路径`Project -> Properties -> C/C++ Build -> Settings`。

从终端，执行 which g++ 以找出安装正确版本的 g++ 的位置。我的在`/opt/local/bin/g++`

单击 GCC C++ 编译器，并用它的完整路径（例如。`/opt/local/bin/g++`）填写命令。单击其他以确保添加`-std=c++11`标志。

对 GCC C 编译器（将命令设置为完整路径`/opt/local/bin/g++`）、GCC C++ 链接器 ( `/opt/local/bin/g++`) 和 GCC 汇编器 ( `/opt/local/bin/as`) 执行相同的操作。

这终于对我有用，我希望它能解决你的问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T00:37:26.270

MacPorts 将 gcc 安装到`/opt/local/bin`，保持`/usr/bin`不变。前者显然在默认 shell 中具有更高的优先级`$PATH`，因此 shell 会在 下找到 gcc `/opt/local/bin`，即使`/usr/bin/gcc`仍然指向 mac LLVM-gcc-4.2 编译器。Eclipse 显然没有设置`$PATH`与终端相同的方式，因此会找到`/usr/bin/`版本。

我可以通过手动符号链接`/usr/bin/{gcc,g++}`到 MacPorts 版本来解决这个问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-25T05:07:15.827

当你进入-stdc++11时，你有没有在-c -fmessage-length=0和它之间放一个“空格”？像...-c -fmessage-length=0 -stdc++11 不是 -c -fmessage-length=0-stdc++11。那个单一的空间阻止了eclipse在windows中识别gcc。

# c++ - 引用数组的方法

> ID：12870261
> 
> 赞同：1
> 
> 时间：2012-10-13T05:28:52.757
> 
> 标签：c++, pointers

> **可能重复：**
> [C：为什么数组的地址等于它的值？](https://stackoverflow.com/questions/2528318/c-how-come-an-arrays-address-is-equal-to-its-value)

有人可以帮我解释数组衰减吗？具体来说，我对 1) 数组如何引用自身感到困惑，以及 2) 当我定义

```
int array[] = { 45, 67, 89 }; 
```

那么array、&array、&array[0]都指的是这个数组？我发现它们在打印时显示为相同的输出，但它们是否也在内存中指代完全相同的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T05:30:09.337

> 那么array、&array、&array[0]都指的是这个数组？

内存位置相同，但类型不同。

*   `array`就是这样：一个由 3 个整数组成的数组
*   `&array`有类型`int (*)[3]`，一个指向数组的指针
*   `&array[0]`有类型`int *`，一个指向单个整数的指针

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T05:33:35.100

`array`, 在值上下文中是 a 类型`int *`，并且指针指向数组的第一个元素。`&array`, 是“指向数组 [3] 的指针”类型，`int`并指向整个`array`. `&array[0]`类型为`int *`，并指向数组的第一个元素。

因此，与*在值上下文中使用*的*if*`&array[0]`相同。在值上下文中不使用的一种情况是在运算符中。所以：将不同于.`array`*`array`*`array``sizeof``sizeof array``sizeof &array[0]`

举个例子：

```
int array[] = { 45, 67, 89 };
int *pa = array; /* pa is now pointing to the first element of "array" */
int *pb = &array[0]; /* pb is also pointing to the same */
int (*pc)[3] = &array; /* pc points to the whole array.
                          Note the type is not "int *" */

printf("%zu\n", sizeof &array[0]); /* prints size of an "int *" */
printf("%zu\n", sizeof array); /* prints 3 times the size of an int */
printf("%zu\n", sizeof &array); /* prints size of pointer to an array[3] of int */ 
```

另见：[http ://web.torek.net/torek/c/pa.html](http://web.torek.net/torek/c/pa.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T05:32:15.157

它们都引用相同的内存位置，但差别不大。`array`并`&array`从第一个元素的地址开始引用整个数组，而`&array[0]`仅引用数组中的第一个元素。

# android - Android - 带有可滚动列表视图的小部件手动刷新

> ID：12870263
> 
> 赞同：11
> 
> 时间：2012-10-13T05:29:04.017
> 
> 标签：android, android-widget

**我搜索并找到了使用RemoteViewsService**和RemoteViewsService.RemoteViewsFactory操作列表视图数据的代码**。**如下

```
Intent svcIntent = new Intent(context, WidgetService.class);
svcIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,appWidgetIds[i]);
svcIntent.setData(Uri.parse(svcIntent.toUri(Intent.URI_INTENT_SCHEME)));
RemoteViews widget = new RemoteViews(context.getPackageName(),R.layout.widget_layout);
widget.setRemoteAdapter(appWidgetIds[i], R.id.lstAppointments,svcIntent); 
```

WidgetService.java 包含

```
public class WidgetService extends RemoteViewsService {

    @Override
    public RemoteViewsFactory onGetViewFactory(Intent intent) {
        return (new WidgetViewsFactory(this.getApplicationContext(), intent));
    }

    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return super.onBind(intent);
    }
} 
```

并在 WidgetViewsFactory 的 onCreate 中编写了从 webservice 获取数据的所有代码，**实现 RemoteViewsService.RemoteViewsFactory**

对于每 5 秒手动或自动更新记录，我发现 Update via Service 方法如下所述

```
public class WordWidget extends AppWidgetProvider {

    static int value = 1;
    Handler handler = new Handler();
    MyRunnable myRunnable;

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        // To prevent any ANR timeouts, we perform the update in a service
        myRunnable = new MyRunnable(context);
        handler.postDelayed(myRunnable, 1000);
    }

    class MyRunnable implements Runnable {

        Context context;

        public MyRunnable(Context context) {
            this.context = context;
        }

        public void run() {
            context.startService(new Intent(context, UpdateService.class));
            handler.postDelayed(myRunnable, 1000);
        }
    }

    public static class UpdateService extends Service {
        @Override
        public void onStart(Intent intent, int startId) {
            // Build the widget update for today
            RemoteViews updateViews = buildUpdate(this);

            // Push update for this widget to the home screen
            ComponentName thisWidget = new ComponentName(this, WordWidget.class);
            AppWidgetManager manager = AppWidgetManager.getInstance(this);
            manager.updateAppWidget(thisWidget, updateViews);
        }

        public RemoteViews buildUpdate(Context context) {
            RemoteViews updateViews;

            // Build an update that holds the updated widget contents
            updateViews = new RemoteViews(context.getPackageName(),
                    R.layout.widget_word);

            Log.e("value", String.valueOf(value));
            updateViews.setTextViewText(R.id.word_title, "Title");
            updateViews.setTextViewText(R.id.word_type, String.valueOf(value));
            updateViews.setTextViewText(R.id.definition, String.valueOf(value));

            value += 1;

            // When user clicks on widget it opens www.google.com
            Intent defineIntent = new Intent(Intent.ACTION_VIEW,
                    Uri.parse("https://www.google.co.in/"));
            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                    defineIntent, 0);
            updateViews.setOnClickPendingIntent(R.id.widget, pendingIntent);

            return updateViews;
        }

        @Override
        public IBinder onBind(Intent intent) {
            // We don't need to bind to this service
            return null;
        }
    }
} 
```

如何自动更新列表视图。我知道如何更新上面提到的文本视图。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-16T05:01:45.517

您可以使用[AppWidgetManager的](http://developer.android.com/reference/android/appwidget/AppWidgetManager.html)[notifyAppWidgetViewDataChanged()](https://developer.android.com/reference/android/appwidget/AppWidgetManager.html#notifyAppWidgetViewDataChanged%28int,%20int%29)方法更新 ListView 。您将必须获取 AppWidgetManager 的实例，获取 AppWidgetIds 和调用`appWidgetManager.notifyAppWidgetViewDataChanged(appWidgetIds, viewId);`

伪代码，

```
AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
int appWidgetIds[] = appWidgetManager.getAppWidgetIds(
                           new ComponentName(context, WidgetProvider.class));
appWidgetManager.notifyAppWidgetViewDataChanged(appWidgetIds, R.id.listview); 
```

当您调用时`notifyAppWidgetViewDataChanged()`，`onDataSetChanged()`将`RemoteViewsFactory`调用作为您的 ListView 的适配器的方法。您可以在 中进行网络服务和其他操作`onDataSetChanged()`，获取响应并将其添加到您的数据集中，可能是 ArrayList 或任何此类集合。

如需进一步阅读/参考，您可以查看文档中的[Keeping Collection Data Fresh](https://developer.android.com/guide/topics/appwidgets/index.html#fresh)部分。[您也可以从我的github](https://github.com/lalit3686/AppWidgetListDemo)查看演示示例。

# line - 如何获取命中线的起点和终点（属性）

> ID：12870268
> 
> 赞同：1
> 
> 时间：2012-10-13T05:30:02.133
> 
> 标签：line, hittest

我想在画布上选择并移动一条线。我使用 hittest 得到了这条线，但我不知道如何移动这条线。我为线条创建了一个 New SelectedVisual，并使用了一个 DrawingContext 来绘制线条。但是我不知道如何获取视觉的起点和终点，因为没有这样的方法。有什么办法可以转移或移动视觉？

# android - Android Facebook App Native Linking 不适用于所有 Open Graph 帖子

> ID：12870273
> 
> 赞同：2
> 
> 时间：2012-10-13T05:30:40.070
> 
> 标签：android, facebook, mobile

我对 Facebook 原生深度链接的理解是，我所有的 Open Graph 活动都将链接到我的原生应用程序，而不是我的网络应用程序。我发现许多链接都指向我的本机应用程序，但有些没有。

将我带到我的应用程序的链接：

1.  发布到墙上
2.  在活动源中打开图表帖子
3.  应用书签

将我带到我的 chrome 应用程序网页的链接：

1.  一个 facebook 在我的墙上构建了 Open Graph 聚合。（我通过了 4 个关卡，然后它显示了我通过的 4 个关卡）。请注意，我还没有为我的开放图形操作/对象构建任何聚合。

有谁知道为什么这些聚合链接不会链接到我的本机应用程序？难道我做错了什么？

仅供参考：我在 Facebook 应用程序上强制停止并多次清除其数据，但没有运气。

**编辑**

我应该指出的一件事是，自动聚合只能从朋友那里看到。因此，如果用户 A 将一堆动作发布到打开的图表中，那么他的 FB 朋友用户 B 将是看到自动聚合的人。

这是我在运行 Android 4.1.2 的 Nexus 7 上拍摄的两张屏幕截图。绿色圈出的链接将我带到我的本机 Android 应用程序。红色圈出的链接将我带到网络浏览器。

“创建”操作的集合：（ [来源：][[stiqjoy.com](http://stiqjoy.com/wp-content/uploads/2012/10/FacebookNotNativeLinkingBug_marks_device-2012-10-17-203036.png)][）][![示例 1](../Images/75e7689dd2418010274bcf16750363bc.png)](https://i.stack.imgur.com/jcl3T.png)

“喜欢”动作的集合：（ [来源：][[stiqjoy.com](http://stiqjoy.com/wp-content/uploads/2012/10/FacebookNotNativeLinkingBug_marks_device-2012-10-17-201424.png)][）][![示例 2](../Images/a29d2b59522a1dedd02502887ad218c8.png)](https://i.stack.imgur.com/mDMgO.png)

# matlab - 如何使 Accumarray 与 Struct 数组一起使用？

> ID：12870274
> 
> 赞同：1
> 
> 时间：2012-10-13T05:30:46.993
> 
> 标签：matlab, octave, accumarray

这可以做到吗？基本上，我有一个结构数组**val**（包含我的自定义结构的列表），我想使用自定义乘法函数**Multiply**将所有元素相乘，我不想使用循环。

我尝试使用`accumarray(indx, val', [1 1], @Multiply)`with`indx=ones(lengths(val), 2)`但这不起作用（至少对于 Octave 3.4.3）。执行时，在我的`C=Multiply(A,B)`函数内部，A 被传递给整个结构数组，并且 B 为空，而不是 A 是数组的第一个元素，B 是正常情况下的第二个元素。

希望我在这里说清楚了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:11:38.147

我不确定你想做什么。我已经制定了一些与您的预期相关的代码：

```
val = 101:105;
strct_template.index = 1;
strct_template.b = 1;
strct_array = repmat(strct_template,length(val),1);

for i=1:length(val)
    strct_array(i).index = i;
    strct_array(i).b = val(i);
end

subs = [1; 2; 4; 2; 4];
sum_example = accumarray(subs, vertcat(strct_array.b)) % example from accumarray in matlab help 
mult_example = accumarray(subs, vertcat(strct_array.b),[],@prod)
subs = ones(length(strct_array),1);
mult_example2 = accumarray(subs, vertcat(strct_array.b),[],@prod) % I suppose you wanted this
mult_example3 = prod(vertcat(strct_array.b)) % which gives the same result as this 
```

这是我第一次使用 accumarray 函数，所以也许我误解了您的需要。希望能帮上忙

# c# - C# COM 客户端 (RTD)

> ID：12870280
> 
> 赞同：0
> 
> 时间：2012-10-13T05:31:44.623
> 
> 标签：c#, com, rtd

我正在使用一个实时数据服务器（一个交易终端），它有一个用于更新代码的 COM 接口。在 Excel 中，我可以使用这个订阅代码更新 -

`RTD(progId,,topic1,topic2, ...)`

我正在尝试构建一个应用程序，它将接收这些代码更新而不依赖于 Excel 或其任何 API。我是一名没有 MS 技术经验的 Java 开发人员，但我想我会在 C# 中尝试一下。

我用 OleView 挖掘了这个 TypeLib

```
// TLib :     // TLib : OLE Automation : {00020430-0000-0000-C000-000000000046}
importlib("stdole2.tlb");

// Forward declare all types defined in this typelib
interface IScripRTD;
interface IRTDUpdateEvent;

[
  uuid(A04A3240-D051-4B4C-B004-CA92151F11E5),
  helpstring("ScripRTD Class")
]
coclass ScripRTD {
    [default] interface IScripRTD;
};

[
  odl,
  uuid(EC0E6191-DB51-11D3-8F3E-00C04F3651B8),
  helpstring("IScripRTD Interface"),
  dual,
  nonextensible,
  oleautomation
]
interface IScripRTD : IDispatch {
    [id(0x0000000a)]
    HRESULT ServerStart(
                    [in] IRTDUpdateEvent* callback, 
                    [out, retval] long* result);
    [id(0x0000000b)]
    HRESULT ConnectData(
                    [in] long topicId, 
                    [in] SAFEARRAY(VARIANT)* strings, 
                    [in, out] VARIANT_BOOL* newValues, 
                    [out, retval] VARIANT* values);
    [id(0x0000000c)]
    HRESULT RefreshData(
                    [in, out] long* topicCount, 
                    [out, retval] SAFEARRAY(VARIANT)* data);
    [id(0x0000000d)]
    HRESULT DisconnectData([in] long topicId);
    [id(0x0000000e)]
    HRESULT Heartbeat([out, retval] long* result);
    [id(0x0000000f)]
    HRESULT ServerTerminate();
};

[
  odl,
  uuid(A43788C1-D91B-11D3-8F39-00C04F3651B8),
  dual,
  oleautomation
]
interface IRTDUpdateEvent : IDispatch {
    [id(0x0000000a)]
    HRESULT UpdateNotify();
    [id(0x0000000b), propget]
    HRESULT HeartbeatInterval([out, retval] long* value);
    [id(0x0000000b), propput]
    HRESULT HeartbeatInterval([in] long value);
    [id(0x0000000c)]
    HRESULT Disconnect();
}; 
```

我遇到了这个[例子](http://msdn.microsoft.com/en-us/library/aa645736%28v=vs.71%29.aspx)，但是关于使用 TlbImp 自动生成 C# 接口的部分我不清楚。有人可以提供一个更好的例子来说明如何实例化这个接口并注册一个回调来获取代码更新吗？

顺便说一句，我能够快速编写一个接近我正在寻找的 AHK 脚本 -

```
get_price(symbol)
{
    comObj := ComObjCreate(progId)
    num := ComObjParameter(3, 5)
    update := ComObjParameter(0xB, -1)
    arr := ComObjArray(VT_VARIANT:=12, 3)
    arr[0] := "MktWatch"
    arr[1] := symbol
    arr[2] := "Last Traded Price"
    price := comObj.ConnectData(num, arr, update )
    return price 
} 
```

这不会注册回调，但如果我使用计时器运行它，我可以获得单个符号的代码更新。

如果它有所作为，我使用的是 Win 7 x64。

我看过这个[例子](https://stackoverflow.com/questions/3601997/excel-rtd-real-time-data-client-other-than-excel?rq=1)，它似乎使用反射而不是声明 COM 接口，但我无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:53:12.230

使用 TlbImp.exe 有什么不清楚的地方？对我来说似乎很容易：使用它将 COM 类型库转换为 .NET 程序集，从 C# 项目中添加对该程序集的引用，然后像使用任何其他 .NET 程序集一样使用它。

实际上，您根本不需要使用 TlbImp.exe，只需添加对您提到的 MSDN 文章中提到的类型库的引用即可。

无论如何，这是另一篇更详细地解释导入类型库的文章：http: [//msdn.microsoft.com/en-us/library/xwzy44e4.aspx](http://msdn.microsoft.com/en-us/library/xwzy44e4.aspx)

# android - 如何更改微调器中的下拉高度

> ID：12870285
> 
> 赞同：17
> 
> 时间：2012-10-13T05:32:20.447
> 
> 标签：android, android-layout, android-intent, android-spinner

我尝试了很多来改变微调器的下拉项目高度..但我找不到一个好的解决方案..请帮帮我..

这是一个代码 loginactivityview.xml

```
 <Spinner
         android:id="@+id/spinnerFacility"
         android:layout_width="400dip"
         android:layout_height="50dip"
         android:layout_alignLeft="@+id/lpassword"
         android:layout_below="@+id/lpassword"
         android:layout_marginTop="32dip"            
         android:background="@drawable/location" 
         android:paddingLeft="10dip"               
         android:dropDownWidth="@style/dropDown"  
         android:minHeight="40dip"     
         android:typeface="monospace" /> 
```

loginrowspinner.xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

  <TextView
    android:id="@+id/textViewRowFacility"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="left"
    android:paddingBottom="5dip"
    android:paddingLeft="6dip"
    android:paddingRight="6dip"
    android:paddingTop="5dip"
    android:text="Facility"
    android:textColor="#000000"
    android:textSize="20dip" >
</TextView> 
```

![在此处输入图像描述](../Images/7355b4ea4dd65133b170b196e2ca8040.png)

如何改变下拉任何想法的高度..

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-18T09:52:21.737

只需将其添加到您的适配器。

```
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-22T04:32:17.663

也许它可以帮助..

```
ArrayAdapter<String> yourSpinnerAdapter = new ArrayAdapter<String>(this,
                R.layout.spinner_item, yourItem) {

        @Override
        public View getDropDownView(int position, View convertView,
                ViewGroup parent) {
            convertView = super.getDropDownView(position, convertView,
                    parent);

            convertView.setVisibility(View.VISIBLE);
            ViewGroup.LayoutParams p = convertView.getLayoutParams();
            p.height = 100; // set the height
            convertView.setLayoutParams(p);

            return convertView;
        }
    }; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-17T05:22:15.433

在 loginrowspinner.xml 中，添加`android:minHeight="48dp"`到`TextView`元素。

```
 <TextView 
     ...
     android:id="@+id/textViewRowFacility"
     android:minHeight="48dp" /> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-01T22:05:30.850

在这样的布局文件夹中创建您自己的文本视图，它将在下拉弹出窗口中填充

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/text1"
style="?android:attr/spinnerItemStyle"
android:layout_width="match_parent"
android:layout_height="60dp"
android:gravity="center_vertical"
android:paddingLeft="20dp"
android:ellipsize="marquee"
android:singleLine="true"
android:textSize="18sp"
android:textAlignment="inherit" /> 
```

注意我提供了

```
android:layout_height="60dp" 
```

和

```
android:paddingLeft="20dp" 
```

并将其用于您的微调器，就像这样

```
Spinner dropdown = (Spinner)findViewById(R.id.sosMode);
String[] items = new String[]{"Date", "Travelling alone"};
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.custom_dropdown_list, items);
dropdown.setAdapter(adapter); 
```

这对我有用:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-11T07:45:28.913

你可以试试用dps。

```
@Override   
public View getDropDownView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    TextView textview = (TextView)inflater.inflate(android.R.layout.simple_spinner_item, null);

    textview.setText(alOpcion.get(position).getOpcionName());

    DisplayMetrics metrics = parent.getResources().getDisplayMetrics();
    float dp = 40f;
    float fpixels = metrics.density * dp;
    int pixels = (int) (fpixels + 0.5f);

    textview.setHeight(pixels);

    return textview;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-13T05:58:16.277

您是否尝试过类似的东西，`android:layout_height="30dp"`而不是`fill_parent`loginrowspinner.xml 中的任何一个元素？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-05T13:38:32.237

将此添加到您的适配器中： convertView.setMinimumHeight(60); 这对我有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-09T16:40:14.043

正如人们所说，最好的方法是添加

```
 android:minHeight="48dp" 
```

到 .xml。但是，如果您想以编程方式执行此操作，请使用：

```
 mspinner.setMinimumHeight(48); 
```

mspinner 是您的微调器的名称， 48 是选项的新高度。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-20T10:45:14.457

ArrayAdapter 类中的重写方法

```
@Override
public View getDropDownView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {
    View view = super.getDropDownView(position, convertView, parent);
    view.getLayoutParams().height = 50;
    return view;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-15T10:16:40.970

//这也可能有帮助：

```
 adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, dataForAdapter) {

        @Override
        public View getDropDownView(int position, View convertView, ViewGroup parent) {
            View v = super.getView(position, convertView, parent);
            v.setMinimumHeight((int) (40*cx.getResources().getDisplayMetrics().density));
            v.setBackgroundColor(Color.rgb(222, 222, 222));

            return v;
        }

    }; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-07-26T13:55:49.930

陷入同样的​​问题。发现以下解决方案对我有用：

```
 if (Build.VERSION.SDK_INT > Build.VERSION_CODES.LOLLIPOP_MR1) {
        setSpinnerDropDownHeight()
    } else {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
            mBinding?.included?.spinn?.getViewTreeObserver()?.addOnGlobalLayoutListener(object : ViewTreeObserver.OnGlobalLayoutListener {
                @RequiresApi(Build.VERSION_CODES.JELLY_BEAN)
                override fun onGlobalLayout() {
                    mBinding?.included?.spinn?.dropDownVerticalOffset = mBinding?.included?.spinn?.getDropDownVerticalOffset()!! + mBinding?.included?.spinn?.getHeight()!!
                    mBinding?.included?.spinn?.viewTreeObserver!!.removeOnGlobalLayoutListener(this)
                }
            })

            mBinding?.included?.spinn?.dropDownVerticalOffset = 10
        }
    } 
```

希望它可以帮助某人！！！！

谢谢

# objective-c - iOS - 将项目升级到 iOS 6 后 Twitter 无法在 iOS 5 上运行

> ID：12870287
> 
> 赞同：5
> 
> 时间：2012-10-13T05:32:29.033
> 
> 标签：objective-c, ios, ios5, twitter, ios6

在我将项目升级到 Xcode 4.5 和 iOS 6 后，在 iOS 5.1 模拟器上运行时，所有 twitter 框架功能都不起作用。在 iOS 6 上一切都很好，但是当我在 5.1 上运行时，我得到一个错误

```
twitterd session interrupted, restarting 
```

然后应用程序冻结。我可以切换到 iOS 6 模拟器，然后它就可以完美运行了。

我只是在使用 Twitter 框架，而不是新的社交框架。苹果改变了什么？每当我尝试从 ACAccountStore 访问帐户或拉出推文表时，都会发生此错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T11:30:06.150

Twitter 框架在 ios 6 中已弃用，您必须切换到 Facebook、Twitter 和新浪微博通用的社交框架。

# apache - Apache 和 Tomcat 集成以使用带有并行 plesk 的 mod_JK 进行负载平衡

> ID：12870289
> 
> 赞同：1
> 
> 时间：2012-10-13T05:32:55.847
> 
> 标签：apache, tomcat, integration, load-balancing

“将 Apache 服务器配置为在 cents 6 上用作 tomcat 服务器的负载平衡器”。我购买了一个预先安装了并行 plesk 的 httpd 的服务器，我希望这个 Apache 用作我的 java Web 服务器 tomcat 的负载平衡器，使用 mod_jk .

服务器：动态云服务器，centos 6 64 位 Apache 服务器：已经安装了并行 plesk Tomcat1 和 Tomcat 2：本地安装并具有以下额外设置

```
 <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="tomcat1">
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="tomcat2"> 
```

当前：example.com ---> 直接到默认页面并通过 Apache 服务器。这是我们购买服务器时预先配置好的页面。我希望 example.com -----> 重定向到我部署在 tomcat1 和 tomcat2 上的 Web 应用程序。但它仍然显示相同的旧页面，没有发生重定向。当我尝试在具有 Apache 2.2 和 tomcat 的普通 linux 机器上执行相同的步骤时，它可以工作

我正在采取以下步骤：

```
1\. Download and copy mod_jk.so into /etc/httpd/module.
2\. Edit /etc/httpd/conf/httpd.conf to add following lines

LoadModule jk_module modules/mod_jk.so

JkWorkersFile conf/workers.properties
JkLogFile logs/mod_jk.log
JkLogLevel info

JkMount / loadbalancer
JkMount /* loadbalancer

3\. Create workers.properties

worker.list=loadbalancer

worker.tomcat1.port=8009
worker.tomcat1.host=localhost
worker.tomcat1.type=ajp13
worker.tomcat1.lbfactor=1

worker.tomcat2.port=8010
worker.tomcat2.host=localhost
worker.tomcat2.type=ajp13
worker.tomcat2.lbfactor=1

worker.loadbalancer.type=lb
worker.loadbalancer.balance_workers=tomcat1, tomcat2
worker.loadbalancer.method=Busyness

4\. Restart tomcat and httpd.

5\. Access : example.com : this still displays the old page, nothing is forwarded to tomcat. 
```

# arrays - TypeScript 类型化数组的使用

> ID：12870291
> 
> 赞同：100
> 
> 时间：2012-10-13T05:33:05.687
> 
> 标签：arrays, typescript

我有一个这样开头的 TypeScript 类定义；

```
module Entities {          

    export class Person {
        private _name: string;
        private _possessions: Thing[];
        private _mostPrecious: Thing;

        constructor (name: string) {
            this._name = name;
            this._possessions = new Thing[100];
        } 
```

看起来 Thing 类型的数组未正确转换为相应的 Javascript 数组类型。这是生成的 JavaScript 的一个片段：

```
function Person(name) {
    this._name = name;
    this._possessions = new Entities.Thing[100]();
} 
```

执行包含 Person 对象的代码，尝试初始化 _possession 字段时抛出异常：

> 错误是“0x800a138f - Microsoft JScript 运行时错误：无法获取属性 '100' 的值：对象为空或未定义”。

如果我将 _possession 的类型更改为`any[]` 并初始化 _possession，`new Array()`则不会引发异常。我错过了什么？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-10-13T09:22:20.517

您的语法有错误：

```
this._possessions = new Thing[100](); 
```

这不会创建“事物数组”。要创建一个数组，您可以简单地使用数组文字表达式：

```
this._possessions = []; 
```

如果要设置长度的数组构造函数：

```
this._possessions = new Array(100); 
```

我创建了一个简短的工作示例，您可以在[操场](http://www.typescriptlang.org/Playground/#src=module%20Entities%20%7B%20%20%0A%0A%20%20%20%20class%20Thing%20%7B%0A%0A%20%20%20%20%7D%20%20%20%20%20%20%20%20%0A%0A%20%20%20%20export%20class%20Person%20%7B%0A%20%20%20%20%20%20%20%20private%20_name%3A%20string%3B%0A%20%20%20%20%20%20%20%20private%20_possessions%3A%20Thing%5B%5D%3B%0A%20%20%20%20%20%20%20%20private%20_mostPrecious%3A%20Thing%3B%0A%0A%20%20%20%20%20%20%20%20constructor%20%28name%3A%20string%29%20%7B%09%0A%20%20%20%20%20%20%20%20%20%20%20%20this._name%20%3D%20name%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._possessions%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._possessions.push%28new%20Thing%28%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20this._possessions%5B100%5D%20%3D%20new%20Thing%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D)上尝试。

```
module Entities {  

    class Thing {

    }        

    export class Person {
        private _name: string;
        private _possessions: Thing[];
        private _mostPrecious: Thing;

        constructor (name: string) {
            this._name = name;
            this._possessions = [];
            this._possessions.push(new Thing())
            this._possessions[100] = new Thing();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2014-03-06T04:42:06.357

在 typescript 中声明数组时有两个可用的语法选项。[打字稿文档](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#arrays)使用`Array<T>`但是 ts-lint 更喜欢`T[]`

通过使用`Array<Thing>`它正在使用打字稿中的泛型。`List<T>`它类似于在 c# 代码中请求 a 。

```
// Declare with default value
private _possessions: Array<Thing> = new Array<Thing>(); // or
private _possessions: Array<Thing> = []; // or
private _possessions: Thing[] = []; // or -> prefered by ts-lint 
```

**或者**

```
// declare then assign in the constructor
private _possessions: Array<Thing>; // or
private _possessions: Thing[]; // or -> preferd by ts-lint

constructor(){
    this._possessions = new Array<Thing>(); // or
    this._possessions = []; // or
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-13T07:52:37.080

翻译是正确的，表达式的输入不正确。TypeScript 错误地将表达式键入`new Thing[100]`为数组。`Thing`使用索引运算符索引构造函数应该是错误的。在 C# 中，这将分配一个包含 100 个元素的数组。在 JavaScript 中，它调用索引 100 处的值，`Thing`就好像是一个构造函数。由于该值是`undefined`它会引发您提到的错误。在你想要的 JavaScript 和 TypeScript`new Array(100)`中。

您应该将此报告为 CodePlex 上的错误。

# android - 从 Android 中的 AsyncTask 删除浏览器历史记录时出错

> ID：12870293
> 
> 赞同：1
> 
> 时间：2012-10-13T05:33:41.040
> 
> 标签：android, android-asynctask

我正在尝试使用方法（从`doInBackground()`方法调用`Asynctask`）删除浏览器历史记录。

```
Browser.clearHistory(getContentResolver());
Browser.clearSearches(getContentResolver()); 
```

但是这些方法给出了一个错误，您不能从非 ui 线程调用这些方法。

如果有人遇到过这样的问题，请提出答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:55:25.640

如果要从非 UI 线程更新 UI，可以使用该[`runOnUiThread`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)方法。

在您的情况下，您可以使用以下代码段：

```
runOnUiThread(new Runnable(){
  public void run(){
    Browser.clearHistory(getContentResolver());
    Browser.clearSearches(getContentResolver());
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:57:14.923

为此，您必须使用处理程序才能从非 UI 线程更新您的浏览器。这是 Lars Vogel 的一篇好文章，描述了如何做到这一点

[关联](http://www.vogella.com/articles/AndroidPerformance/article.html)

# html - 与 - 渲染问题 firefox 和 chrome

> ID：12870294
> 
> 赞同：11
> 
> 时间：2012-10-13T05:33:49.897
> 
> 标签：html, doctype

一直没有使用`DOCTYPE`，而是简单地从`<html>`HTML5 标准开始（据我了解）。一切顺利。

开始使用`Jade`，坚持`DOCTYPE`。使用`<!DOCTYPE html>`- 页面不再正确呈现（？）。

作为一个简单而简单的例子（firefox和chrome上的行为相同）：

```
<html>
    <body >
        <div style='height:50%; background-color:pink;'></div>
        <div style='height:50%; background-color:blue;'></div>
    </body>
</html> 
```

渲染得很好 - 页面是粉红色的，一半是蓝色的

```
<!DOCTYPE html>
<html>
    <body >
        <div style='height:50%; background-color:pink;'></div>
        <div style='height:50%; background-color:blue;'></div>
    </body>
</html> 
```

呈现两个你看不到的瘦 DIV。

1.  这是怎么回事？
2.  认为`DOCTYPE`HTML5 已被弃用
3.  我该怎么办？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-13T05:44:54.600

告诉您`DOCTYPE`已弃用的人要么是在对您恶作剧，要么是完全无知。

* * *

W3C 在其文章[**HTML5 与 HTML4**](http://www.w3.org/TR/html5-diff/)的区别中`Syntax`，第 2.2 小节明确说明了这一点。

> **HTML5 的 HTML 语法要求指定 doctype 以**确保浏览器以标准模式呈现页面。doctype 没有其他用途，因此对于 XML 来说是可选的。具有 XML 媒体类型的文档始终以标准模式处理。[[文档类型](http://www.w3.org/TR/html5-diff/#refsDOCTYPE)]
> 
> doctype 声明`<!DOCTYPE html>`在 HTML 语法中不区分大小写。来自早期 HTML 版本的文档类型更长，因为 HTML 语言是基于 SGML 的，因此需要对 DTD 的引用。在 HTML5 中，情况不再如此，只需要 doctype 来为使用 HTML 语法编写的文档启用标准模式。浏览器已经为`<!DOCTYPE html>`.

至于为什么`<!DOCTYPE html>`在你的例子中设置的行为。

这种行为是预期的。这是因为`body`是块级元素。因此，默认情况下，它在模型中具有高度，默认情况下，在`shrink-to-fit`模型中具有宽度`expand-to-fit`。`style="height:100%;"`标签中的设置`body`允许 body 占据整个可用高度并显示您的两个 div。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-13T06:05:53.303

1.  如果没有`DOCTYPE`，页面将以 Quirks 模式呈现。这意味着几十个怪事。您遇到的一个是我的[Quirks Mode 现象](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)列表中的 #3 ：应用元素的百分比高度，使用可用高度作为参考，即使封闭块具有`height: auto`（默认值）；根据规格，高度由内容的要求决定。
2.  不，`DOCTYPE`根据 HTML5 草案不推荐使用 - 相反，它是必需的，但任何形式`<!DOCTYPE html>`都被宣布为过时。
3.  对于新页面，将它们设计为在“标准模式”下工作（当然也可以使用`<!DOCTYPE html>`）。对于旧页面，这取决于。

在给定的情况下，为了使浏览器的渲染区域按预期方式划分，设置`html`和`body`元素的高度，从而使百分比高度适用于即使在“标准模式”下的主体内部元素：

```
<style>
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}
</style> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T05:46:54.347

我不确定为什么这些 DIV 在您更改之前就出现了。

但是您的 DOCTYPE 声明对于 HTML5 是正确的 - 请参阅[http://www.w3.org/TR/html5-diff/#doctype](http://www.w3.org/TR/html5-diff/#doctype)。

而且，如果您将 height: 100% 添加到 HTML 和 BODY，您将看到这些元素。它们占据了容器高度的 50%，即 0，因此它们的高度也是 0。请参阅[http://jsfiddle.net/sync/EUXTY/](http://jsfiddle.net/sync/EUXTY/)。

# cordova - 录制音频文件后，该文件将保存在哪里？

> ID：12870295
> 
> 赞同：3
> 
> 时间：2012-10-13T05:33:52.880
> 
> 标签：cordova

我使用以下代码录制 MP3：

```
function recordAudio() { var src = "myrecording.mp3"; var mediaRec =
    new Media(src,  function() {           
        console.log("recordAudio():Audio Success");    
    },
    //error callback
    function(err) {   
        console.log("recordAudio():Audio Error: "+ err.code);
    });
    //Record audio
    mediaRec.startRecord();
} 
```

我的问题是 MP3 文件“myrecording.mp3”将保存在哪里？它会保存在我的应用程序中吗？以及如何获得该 mp3 文件的完整路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-09T11:26:40.517

在 ios 中：`cordova.file.tempDirectory`
在 android 中：`cordova.file.externalRootDirectory`

录制后，您应该将创建的文件移动到您想要的文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:28:53.280

这取决于您的应用程序部署到的设备。在**iOS**应用程序中，它将被保存

```
/var/mobile/Applications/<Random generated ID like: 5E3A873A-9E80-443E-91BA-E2F962929359>/Documents/recording.wav 
```

在**Android**应用程序中，它将被保存到

```
file:///mnt/sdcard/recording.mp3 
```

我现在不完全确定这些路径是否正确，但是您可以处理文件并很容易地检查自己。

```
function createFile(path){
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem){
        fileSystem.root.getFile(
            path, { create: true, exclusive: false }, getFileWin, getFileFail
        );
    }, getFSFail); //of requestFileSystem
}

// getFile Success & Fail Methods
function getFileWin(fileEntry){
    console.log("File created at " + fileEntry.fullPath);
}

function getFileFail(error){
    console.log("Failed to retrieve file");
}

// requestFileSystem Fail Method
function getFSFail(evt) {
    console.log(evt.target.error.code);
} 
```

# html - 将浮点数应用于 div 压缩父 div

> ID：12870296
> 
> 赞同：0
> 
> 时间：2012-10-13T05:34:17.447
> 
> 标签：html, css, css-float

![在此处输入图像描述](../Images/95b6f74ce60ed462cb4d1dd7df492d62.png)![在此处输入图像描述](../Images/c2a384b2e411f1a2af43aea00612f896.png)当我应用`float:left`到子 div 时，父 div 会自动压缩。我在下面写我的 CSS 代码：

```
 #footer_wrapper
{
    clear:both;
    background:#f0f0f0; 
    padding:15px 10px 10px 14px;
    border-top:1px solid #dcdcdc;
}
.footer
{
    width:950px;
    margin:0 auto;

}

.services
{
    float:left;
    width:250px;
} 
```

HTML 代码：

```
<div id="footer_wrapper">

    <div class="footer">

        <div class="services">
        <h2>Our Services</h2>
            <ul>
                <li><a href="#">7sisters Online Magazine </a></li>
                <li><a href="#">7sisters Business Deals  </a></li>
                <li><a href="#">7sisters Yellow Pages </a></li>
                <li><a href="#">7sisters Air Tickets </a></li>
                <li><a href="#"> 7sisters Jobs </a></li>
                <li><a href="#"> 7sisters Career </a></li>
            </ul>
        </div>    

    </div>

</div> 
```

当我`float:left`从课堂`services`上移除时，背景显示已满。请帮我。找不到原因。![在此处输入图像描述](../Images/e3ef8ae7dc8d3445aeeb4c512239393f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:37:14.740

将财产`overflow:hidden`交给父母或`<div style="clear:both"></div>`在最后一个孩子之后加上。

带有浮动元素的元素离开文档流，通过这两种方法，容器像浮动元素一样在流中运行。

清除方法是完美的，我只是给你一个方法：如果你搜索“清除浮动css”...... [例如这里](http://www.positioniseverything.net/easyclearing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T06:13:48.317

您可以使用此样式代码：

```
 #footer_wrapper
{
    background:#f0f0f0; 
    padding:15px 10px 10px 14px;
    border-top:1px solid #dcdcdc;
    float:left;
}
.footer
{
    width:950px;
    margin:0 auto;

}

.services
{
    float:left;
    width:250px;
}
.services ul li, .services h2
{
    float:left;
    width:100%;
} 
```

# mysql - Django查询快而渲染慢

> ID：12870302
> 
> 赞同：2
> 
> 时间：2012-10-13T05:36:01.340
> 
> 标签：mysql, django, optimization

我正在使用 Django 和 MySQL 运行一个网站，并且正在尝试对其进行优化。为此，我使用了 django 调试工具栏，并特别注意了 SQL 部分，我认为这是我的页面加载时间长的原因。

当我查看 django 调试工具栏中的 SQL 部分时，它说我的查询总共需要大约 90 毫秒。但是如果我在python中的渲染函数周围放了一个计时器，那么它需要超过3s（这更接近我在重新加载页面时实际看到的）......

与渲染相比，查询为何如此之快？

编辑：这是模板中的代码简化到最大：

```
<div id="content_annonces" class="ui-widget ui-corner-all">
     <table>
         {% if latest_annonces_list %}
             here goes the content
         {% else %}
             nothing found
         {% endif %}
     </table>
</div> 
```

正如你所看到的，唯一应该是昂贵的代码和平是调用对象 latest_annonces_list 时请求的 SQL 查询。但是当我用 django 调试工具栏分析它时，它说这个查询已经过去了 90 毫秒，而渲染大约需要 3 秒......

这里是 latest_annonces_list 的内容：

```
result = Annonce.objects.select_related('vehicule', 'vehicule__marque')
         .filter(vehicule__marque__in=self.marques).order_by('prix')[:10] 
```

这里的模型：

```
class Marque(models.Model):
    name = models.CharField(db_index=True, primary_key=True, max_length=100)

class Vehicule(models.Model):
    modele     = models.CharField(primary_key=True, db_index=True, max_length=100)
    gen_modele = models.CharField(db_index=True, max_length=100)
    marque     = models.ForeignKey(Marque)
    categories = models.ManyToManyField(Categorie)
    click      = models.PositiveIntegerField(default=0)

class Annonce(models.Model):
    vehicule      = models.ForeignKey(Vehicule, db_index=True)
    porte         = models.ForeignKey(Porte, db_index=True)
    carburant     = models.ForeignKey(Carburant, db_index=True)
    bv            = models.ForeignKey(Boite, db_index=True)
    prix          = models.DecimalField(db_index=True,max_digits=8, decimal_places=2)
    km            = models.PositiveIntegerField(db_index=True)
    dpt           = models.CharField(db_index=True, max_length=50)
    annonceur     = models.ForeignKey(Annonceur, db_index=True)
    img           = models.URLField()
    url           = models.URLField(max_length=2000)
    finition      = models.CharField(max_length=500)
    cylindree     = models.CharField(max_length=500)
    moteur        = models.CharField(max_length=500)
    annee         = models.DateTimeField(u'annee vehicule', db_index=True)
    pub_date      = models.DateTimeField(u'date publication')
    last_touched  = models.DateTimeField(u'derniere modification')
    last_scan     = models.DateTimeField(u'dernier scan')
    type_ann      = models.ForeignKey(Type_Annonce, db_index=True)
    type_vendeur  = models.ForeignKey(Vendeu 
```

r, db_index=True)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:29:18.033

对本地数据库执行的查询仍然需要 90 毫秒，所以我想有很多连接。

这种情况下的一般规则是通过以下方式减少 ORM 的使用：

*   仅选择必填字段或推迟不需要且成本高昂的查找 - 请参阅 [https://docs.djangoproject.com/en/dev/ref/models/querysets/#defer](https://docs.djangoproject.com/en/dev/ref/models/querysets/#defer)和 [https://docs.djangoproject.com/en/dev/参考/模型/查询集/#only](https://docs.djangoproject.com/en/dev/ref/models/querysets/#only)
*   如果您只显示字段的确切值，请在查询集上使用`values()`or `values_list()`，这将阻止 Django ORM 构建所有对象并执行相关信号

获得显着收益的最快方法可能是使用 johnny-cache [http://packages.python.org/johnny-cache/](http://packages.python.org/johnny-cache/)缓存查询集或使用缓存输出`{% cache ... %}`

# android - 如何在左侧制作tabWidget

> ID：12870304
> 
> 赞同：3
> 
> 时间：2012-10-13T05:36:27.377
> 
> 标签：android, android-layout, android-tabhost

如何进行这样的**布局**？在布局的左侧创建一个选项卡小部件。 ![在此处输入图像描述](../Images/5147d3e4590524482f35960c22291661.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:50:27.970

对我来说，这看起来不像是标签小部件。您很可能希望使用 ListFragment

[在这里](http://android-er.blogspot.com/2012/01/listfragment.html)查看本教程

您的主要活动将承载一个片段，单击列表中的一个项目后，您应该能够调用诸如 getListView().getItemAtPosition 之类的东西或类似的东西。将该数据传递给您的活动并显示它。或者您可以只使用两个片段，一个是 ListFragment，另一个是您的其余内容。

```
 @Override
  public void onListItemClick(ListView l, View v, int position, long id) {

 getListView().getItemAtPosition(position);

 //Then pass your data into your Activity(if you need to)
 //

 } 
```

# mongodb - 在 mongodb macports 安装中找不到 mongodb.conf 文件

> ID：12870306
> 
> 赞同：1
> 
> 时间：2012-10-13T05:36:39.800
> 
> 标签：mongodb, macports

我是 Macports 的新手。我使用 macports 安装 mongodb。我唯一的问题是我找不到 mongodb.conf 文件。我是 Ubuntu 用户，我知道它位于 Ubuntu 的 /etc/mongodb.conf 上。我在哪里可以在我的 osx macports 安装中找到它？我想在 mongodb.conf 文件中启用 --rest 功能，以便我可以从我的 Web 浏览器中获取数据。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-12T08:50:27.600

恐怕您找不到任何带有“端口内容”的*mongodb.conf*文件，因为这不是 macosx 方式 - 你知道：macs 是“不同的”......

相反 - 假设您确实启用了在安装 mongodb 端口时创建的 mongodb 启动代理 - 您只需将此文件编辑为文本文件：

```
/opt/local/etc/LaunchDaemons/org.macports.mongodb/org.macports.mongodb.plist 
```

在 ProgramArguments 数组中，在半列字符串元素之前添加以下内容：

```
<string>--rest</string> 
```

如果尚未激活 macosx lauch 代理，您仍然可以通过创建如下*符号链接*自行激活它：

```
sudo ln -s /opt/local/etc/LaunchDaemons/org.macports.mongodb/org.macports.mongodb.plist /Library/LaunchDaemons/org.macports.mongodb.plist 
```

下次您将启动 mongodb 时，应启用其 REST 接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T05:45:49.633

您可以使用以下命令列出端口安装的所有文件`port contents`：

```
port contents mongodb 
```

您可以`grep`通过输出`mondgodb.conf`找到它的安装位置。

# python - Python 的 timeit(...) 方法在这段代码中实际计时的是什么代码？

> ID：12870310
> 
> 赞同：4
> 
> 时间：2012-10-13T05:37:25.930
> 
> 标签：python, timeit

```
timeit.timeit("A0([randint(1,256) * (-1) ** randint(1,2) for j in range("+str(n)+")])", setup="from HW2 import A0", number=1000000) 
```

我想测量 A0 算法在大小为 n 的列表上完成其工作所需的时间，但我找不到生成列表然后将其作为变量传递给 timeit.timeit(.. 。） 方法。计时器是否仅测量 A0 完成所需的时间，还是列表生成也包含在测量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T05:41:01.180

它将测量语句中所有内容的执行时间（第一个 arg ），因此如果您只想测量对 A0 的调用，那么列表创建将扭曲结果。

尝试在设置中创建列表：

```
timeit.timeit("A0(aList)", setup="from HW2 import A0; aList = [randint(1,256) * (-1) ** randint(1,2) for j in range("+str(n)+")] ", number=1000000) 
```

该列表只会在计时器开始时创建一次，并且不会包含在计时中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:41:45.400

将包括列表生成时间（调用 timeit 时引号之间的任何内容）。

# java - 如何将正则表达式的一部分打印到 .txt 文件中

> ID：12870314
> 
> 赞同：2
> 
> 时间：2012-10-13T05:38:03.320
> 
> 标签：java, regex, text-files, expression

我正在做一个项目，我必须解析文本文件并从中提取相关信息以供以后使用。

我创建了一个正则表达式来匹配具有相关数据的文本行，但我不确定如何从行中提取相关信息并将其转储到新的文本文件中。

这是我正在解析的文本文件的示例：

```
[  5] local 10.170.150.195 port 42507 connected with 184.72.63.139 port 5001
[  4] local 10.170.150.195 port 42506 connected with 184.72.63.139 port 500
[  1]  0.0- 1.0 sec  0.00 KBytes  50.00 Kbits/sec 
```

在这个示例中，相关信息是“0.0-1.0 sec”和 50.00 Kbits/sec。

这是我的正则表达式：

```
[  [0-6]]  0.0- 1.0 sec  0.00 KBytes  [0-9]*.[0-9][0-9] Kbits/sec 
```

抱歉，如果这是一个微不足道的问题，我对 java 还很陌生......这是第 3 天......任何和所有的帮助将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:52:49.293

您将使用括号来捕获所需的组，然后将这些组打印到输出。

```
 Pattern pattern = Pattern.compile("\\[  [0-6]\\]  (0.0- 1.0 sec)  0.00 KBytes  ([0-9]*.[0-9][0-9] Kbits/sec)");

    String line = "[  1]  0.0- 1.0 sec  0.00 KBytes  50.00 Kbits/sec";
    Matcher matcher = pattern.matcher(line);
    if (matcher.matches()) {
        System.out.println(matcher.group(1) + "\t" + matcher.group(2));
    } 
```

这里`pattern`object 是您的正则表达式，您可以将它重用于所有行。对于文件的每一行，您创建一个新文件`matcher`并将其传递给该行。然后，如果该行与正则表达式匹配，则打印捕获组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:43:16.453

1.  使用 FileReader/BufferedReader 打开您的输入文件。

    ```
    FileReader fr = new FileReader("input.txt");
    BufferedReader br = new BufferedReader(fr); 
    ```

2.  使用 FileWriter/BufferedWriter 打开输出文件

    ```
    FileWriter fw = new FileWriter("output.txt");
    BufferedWriter bw = new BufferedWriter(fw); 
    ```

3.  使用缓冲阅读器一次将一行读`while loop`入字符串

    ```
    String lineString = null;
    while((lineString= br.readLine())!= null){
          //....
     } 
    ```

4.  在 内`while loop`，将读取的字符串与您的正则表达式匹配

    ```
    Pattern pattern = 
    Pattern.compile("\\[  [0-6]\\]  (0.0- 1.0 sec)  0.00 KBytes  ([0-9]*.[0-9][0-9] Kbits/sec)");
    Matcher matcher = pattern.matcher(lineString);
    if(matcher .matches()){
       //....
    } 
    ```

5.  如果找到匹配项，则使用缓冲写入器将字符串写入输出文件

    ```
     bw.write(lineString); 
    ```

6.  关闭所有打开的读取器/写入器。

    ```
     bw.close();
        fw.close();
        br.close();
        fr.close(); 
    ```

**编辑：** 示例代码样式 1 如下：

```
 String regex = "\\[  [0-6]\\]  (0.0- 1.0 sec)  0.00 KBytes  ([0-9]*.[0-9][0-9] Kbits/sec)";
    FileReader fr = new FileReader("input.txt");
    BufferedReader br = new BufferedReader(fr);

    FileWriter fw = new FileWriter("output.txt");
    BufferedWriter bw = new BufferedWriter(fw);

    String lineString = null;
    while((lineString= br.readLine())!= null && 
                  !lineString.equals("Starting Test 2: Iperf TCP East....")){
        if(lineString.matches(regex)){
            bw.write(lineString);
        }
    }
    bw.close();
    fw.close();
    br.close();
    fr.close(); 
```

示例代码样式 2 如下：

```
 FileReader fr = new FileReader("input.txt");
 BufferedReader br = new BufferedReader(fr);
 FileWriter fw = new FileWriter("output.txt");

 BufferedWriter bw = new BufferedWriter(fw);

 Pattern pattern = 
    Pattern.compile("\\[  [0-6]\\]  (0.0- 1.0 sec)  0.00 KBytes  ([0-9]*.[0-9][0-9] Kbits/sec)");

    String lineString = null;
    while((lineString= br.readLine())!= null && !lineString.equals("Starting Test 2: Iperf TCP East....")){
        Matcher matcher = pattern.matcher(lineString);
        if(matcher.matches()){
            bw.write(lineString);
        }
    }
    bw.close();
    fw.close();
    br.close();
    fr.close(); 
```

祝一切顺利！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T06:21:58.240

如果您可以访问 unix 终端或 grep，那么这一行命令应该可以解决问题。

`grep "[ [0-6]] 0.0- 1.0 sec 0.00 KBytes [0-9]*.[0-9][0-9] Kbits/sec" yourfile > newfile.txt`

newfile.txt 将包含 yourfile 中与正则表达式模式匹配的所有行

# django - 使数据库对象不可搜索

> ID：12870315
> 
> 赞同：0
> 
> 时间：2012-10-13T05:38:06.970
> 
> 标签：django, solr, django-haystack

使用 django-haystack 和 solr 作为搜索引擎，我已经成功实现了一个搜索引擎，它会抛出用户名、名字、姓氏或电子邮件地址与给定查询匹配的用户列表。

**search_indexes.py**

```
from haystack.indexes import *
from haystack import site

from django.contrib.auth.models import User

class UserIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    first_name = CharField(model_attr='first_name')
    last_name = CharField(model_attr='last_name')
    email = CharField(model_attr='email')

    def index_queryset(self):
        return User.objects.exclude(username='root')

site.register(User, UserIndex) 
```

和

**user_text.txt**

```
{{ object.username }}
{{ object.first_name }}
{{ object.last_name }}
{{ object.email }} 
```

但是，我打算让用户设置他们的隐私设置，这样他们就无法使用他们的名字、姓氏或电子邮件地址进行搜索。

几天来，我一直在敲打我的头和我的电脑，试图完成这个功能，但还没有找到任何真正好的解决方案。

是否有可能完成上述功能？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:26:41.850

您可以创建一个约束表，例如使用 haystack 的 SearchQuerySet 来排除。这是一个使用tastepie 作为API 的示例，但这也可能是您的自定义服务或视图层。

[http://django-tastypie.readthedocs.org/en/latest/resources.html#advanced-filtering](http://django-tastypie.readthedocs.org/en/latest/resources.html#advanced-filtering)

# .net - 在运行时选择多个控件正是我们在设计时可以做的

> ID：12870317
> 
> 赞同：2
> 
> 时间：2012-10-13T05:38:27.450
> 
> 标签：.net, vb.net, visual-studio, visual-studio-2005

我正在开发一个应用程序，我需要一些想法来在运行时环境中选择多个控件 A 正是我们在设计时可以做的

截至目前，我一次可以选择一个控件，但我需要在运行时选择多个控件，例如我们在设计时执行 Ctrl+单击以选择多个控件我试图在运行时实现相同的事情

请帮忙！！！！！！

# php - PHP Pear W3C_HTMLValidator 问题

> ID：12870318
> 
> 赞同：0
> 
> 时间：2012-10-13T05:38:29.120
> 
> 标签：php, pear, w3c-validation

我一直在使用 Pear W3C HTML Validator 来验证内部网站。我们已经开始使用自定义创建的 CMS，它将完整的 html 代码存储在数据库中。我一直在到处寻找一种简单的方法来检查字符串而不是 url。

这是他们在其网站上提供的基本代码。

```
<?php
require_once 'Services/W3C/HTMLValidator.php';
$v = new Services_W3C_HTMLValidator();
$u = 'http://www.unl.edu/';
$r = $v->validate($u); 
if ($r->isValid()) { echo $u.' is valid!'; } 
else { echo $u.' is NOT valid!'; }
?> 
```

是否有当前函数来运行字符串，或者我必须手动编辑文件以创建函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:41:29.983

`$v->validateFragment($html);`

说真的，只需阅读代码！你的系统上已经有了它:)
[https://github.com/pear/Services_W3C_HTMLValidator/blob/trunk/Services/W3C/HTMLValidator.php](https://github.com/pear/Services_W3C_HTMLValidator/blob/trunk/Services/W3C/HTMLValidator.php)

# php - 使用 htaccess 的通配符 URL 模式

> ID：12870319
> 
> 赞同：2
> 
> 时间：2012-10-13T05:38:37.927
> 
> 标签：php, javascript, .htaccess, random

我正在寻找 htaccss 代码。我想如果有人访问

```
domain.com/folder/ver-234123.html
domain.com/folder/ver-4234234.html
domain.com/folder/ver-kahsdkf.html 
```

所以这一切都是开放的`domain.com/folder/index.php`

我将在ver-via php 之后随机化数字/数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:00:10.100

你想使用 mod_rewrite。

假设“/文件夹”确实存在并且这个 .htaccess 将在其中。

这应该是一个相当简单的重写。就像是：

```
RewriteEngine on
RewriteRule ^/?ver-[a-z0-9]*\.html index.php [L,QSA] 
```

# css - 如何在矩形div的边框中添加图像

> ID：12870320
> 
> 赞同：2
> 
> 时间：2012-10-13T05:38:40.373
> 
> 标签：css, html

我有一个 div 大约。宽度为 730 像素，高度为 50 像素。我想在 div 高度完成的 div 底部添加一个图像。我的意思是在 50px 高度之后。我有一个查询，用于在底部附加图像。我必须取另一个 div 并给它一个背景图像或任何其他想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:58:42.240

我制作了这个样本`position: relative`

[http://jsfiddle.net/R67zM/2/](http://jsfiddle.net/R67zM/2/)

HTML：

```
<div  id="parent">
<div id="image">fff</div>
</div> 
```

其他内容 CSS：

```
​#parent {
 width: 750px;
 height: 50px;
 background: red;   
 /*height of the image*/
 margin-bottom: 60px;
}
#parent #image {
 position: relative;
 width: 100%;
 height: 60px;
 background: green; 
 /*height of the  parent */  
 top: 50px;
} 
```

# iphone - 如何将 UISearchBar 从圆形更改为矩形？

> ID：12870322
> 
> 赞同：1
> 
> 时间：2012-10-13T05:39:12.340
> 
> 标签：iphone, ios

> **可能重复：**
> [UISearchBar：更改外观 - 形状、背景、覆盖图像](https://stackoverflow.com/questions/2370002/uisearchbar-changing-the-appearance-shape-background-overlay-an-image)

如何将`UISearchBar`形状从圆形更改为矩形？我通过故事板使用它， `UISearchBar`作为`IBOutlet`.

# iphone - iOS5 使用 PHP Web 服务进行登录

> ID：12870323
> 
> 赞同：1
> 
> 时间：2012-10-13T05:39:17.893
> 
> 标签：iphone, ios, web-services

我正在 iOS5 中开发照片共享应用程序。在此，我需要通过 PHP Web 服务实现登录。我实现了 PHP Web 服务，也很好地得到了 json 字符串。现在如何在应用程序启动时检查用户是否已登录，以及如何在用户首次登录时保存用户名和密码？请尽快给我解决方案。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:49:41.147

为了在通过 Web 服务发送登录详细信息时检查登录用户的状态，您可以在数据库中设置登录状态标志，并且每次都可以检查登录状态。

对于保存在 iphone 应用程序中的用户名和密码，您可以查看以下链接：

[如何在 iPhone 的 Twitter 应用程序中保存用户名和密码](https://stackoverflow.com/questions/3324257/how-do-save-username-and-password-in-my-twitter-application-in-iphone)

[https://stackoverflow.com/questions/8323411/how-to-save-and-read-the-username-and-password-in-iphone](https://stackoverflow.com/questions/8323411/how-to-save-and-read-the-username-and-password-in-iphone)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T06:19:08.190

我将 REST 服务器用于类似的 iphone 应用程序。我在网站端创建了一个 REST 服务器端点。有一个**特定**的url 只是为了测试用户是否登录。

我在我的 iphone 应用程序中点击了这个 url。我使用了一个 NSURLRequest 并获得了 REST 服务器返回的 json 对象。如果用户已登录，则 json 对象包含用户名。如果用户未登录，则获取不同的 json 对象。

我不知道您是如何实现 Web 服务的，但应该有一个方法可以调用，只是为了获取登录状态。然后，您可以检查返回的 json 对象。

# android - 如何使自定义对话框在多个标题文本下具有多个复选框

> ID：12870324
> 
> 赞同：0
> 
> 时间：2012-10-13T05:39:21.413
> 
> 标签：android, checkbox, android-alertdialog, customdialog

我遇到了一个对话框弹出窗口，`ipad`其中包含多个标题标题下的多个复选框，这是我需要在 android 中制作的示例对话框

![在此处输入图像描述](../Images/094e68ae6560ee0d7020888d4db660a9.png)

我可以在单个文本标题下创建多个复选框....但不能在其中创建多个文本标题....我读了一些帖子，但建议制作自定义视图但不知道如何实现它。 ..

请提出一些有用的解决方案...

# python - 如何在python中在运行时查找类的实例

> ID：12870326
> 
> 赞同：1
> 
> 时间：2012-10-13T05:40:07.050
> 
> 标签：python

如何在python中在运行时查找类的实例

例如。

```
class Foo():
    pass

class Bar(Foo):
    def __init__(self, a):
            print a

inst_b1 = Bar(3)
inst_b2 = Bar('Hello World!!!') 
```

我如何找出存在多少个 Bar 类的实例以及运行时的名称？

另外，因为我想在运行时使用它们，将它们放在自定义字典中或从变量的通用字典中获取它（使用 vars()）是更好的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T05:58:25.360

```
class Bar(Foo):
    instances = []
    def __init__(self, a):
            print a
            Bar.instances.append(self)

inst_b1 = Bar(3)
inst_b2 = Bar('Hello World!!!')
print len(Bar.instances)
print Bar.instances 
```

获取分配给它的变量名称要复杂得多...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T06:08:10.270

这样可以做多少：

```
import gc
n_Bars = sum(1 for obj in gc.get_objects() if isinstance(obj,Bar)) 
```

如果您还想要他们的名字，最好使用 dict 而不是单独的变量。

**编辑：** 我只是想到了一个黑客来获取名字：

```
for obj_name in dir():
    if isinstance(eval(obj_name), Bar):
        print obj_name 
```

# java - 如何迭代 JSONObject 以获取单个项目

> ID：12870332
> 
> 赞同：22
> 
> 时间：2012-10-13T05:41:26.933
> 
> 标签：java, json

这是我下面的代码，我需要从中解析`JSONObject`以获取单个项目。这是我第一次使用 JSON。所以不知道如何解析`JSONObject`以从中获取单个项目`JSONObject`。

```
try {
    String url = service + version + method + ipAddress + format;
    StringBuilder builder = new StringBuilder();
    httpclient = new DefaultHttpClient();
    httpget = new HttpGet(url);
    httpget.getRequestLine();
    response = httpclient.execute(httpget);
    HttpEntity entity = response.getEntity();
    if (entity != null) {
        InputStream inputStream = entity.getContent();
        bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
        for (String line = null; (line = bufferedReader.readLine()) != null;) {
            builder.append(line).append("\n");
        }
        JSONObject jsonObject = new JSONObject(builder.toString());
        // Now iterate jsonObject to get Latitude,Longitude,City,Country etc etc.

    }

} catch (Exception e) {
    getLogger().log(LogLevel.ERROR, e.getMessage());
} finally {
    bufferedReader.close();
    httpclient.getConnectionManager().shutdown();
} 
```

我的 JSON 看起来像这样：

```
{
    "ipinfo": {
        "ip_address": "131.208.128.15",
        "ip_type": "Mapped",
        "Location": {
            "continent": "north america",
            "latitude": 30.1,
            "longitude": -81.714,
            "CountryData": {
                "country": "united states",
                "country_code": "us"
            },
            "region": "southeast",
            "StateData": {
                "state": "florida",
                "state_code": "fl"
            },
            "CityData": {
                "city": "fleming island",
                "postal_code": "32003",
                "time_zone": -5
            }
        }
    }
} 
```

我需要从上述对象中获取`latitude`, `longitude`, `city`, `state`, `country`, 。`postal_code`谁能提供任何建议如何有效地做到这一点？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-13T06:37:23.017

你可以试试这个，它会递归地找到一个 json 对象中的所有键值并构造为一个 map 。您可以简单地从 Map 获取您想要的密钥。

```
public static Map<String,String> parse(JSONObject json , Map<String,String> out) throws JSONException{
    Iterator<String> keys = json.keys();
    while(keys.hasNext()){
        String key = keys.next();
        String val = null;
        try{
             JSONObject value = json.getJSONObject(key);
             parse(value,out);
        }catch(Exception e){
            val = json.getString(key);
        }

        if(val != null){
            out.put(key,val);
        }
    }
    return out;
}

 public static void main(String[] args) throws JSONException {

    String json = "{'ipinfo': {'ip_address': '131.208.128.15','ip_type': 'Mapped','Location': {'continent': 'north america','latitude': 30.1,'longitude': -81.714,'CountryData': {'country': 'united states','country_code': 'us'},'region': 'southeast','StateData': {'state': 'florida','state_code': 'fl'},'CityData': {'city': 'fleming island','postal_code': '32003','time_zone': -5}}}}";

    JSONObject object = new JSONObject(json);

    JSONObject info = object.getJSONObject("ipinfo");

    Map<String,String> out = new HashMap<String, String>();

    parse(info,out);

    String latitude = out.get("latitude");
    String longitude = out.get("longitude");
    String city = out.get("city");
    String state = out.get("state");
    String country = out.get("country");
    String postal = out.get("postal_code");

    System.out.println("Latitude : " + latitude + " LongiTude : " + longitude + " City : "+city + " State : "+ state + " Country : "+country+" postal "+postal);

    System.out.println("ALL VALUE " + out);

} 
```

输出：

```
 Latitude : 30.1 LongiTude : -81.714 City : fleming island State : florida Country : united states postal 32003
ALL VALUE {region=southeast, ip_type=Mapped, state_code=fl, state=florida, country_code=us, city=fleming island, country=united states, time_zone=-5, ip_address=131.208.128.15, postal_code=32003, continent=north america, longitude=-81.714, latitude=30.1} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-13T06:10:43.720

这个怎么样？

```
JSONObject jsonObject = new JSONObject           (YOUR_JSON_STRING);
JSONObject ipinfo     = jsonObject.getJSONObject ("ipinfo");
String     ip_address = ipinfo.getString         ("ip_address");
JSONObject location   = ipinfo.getJSONObject     ("Location");
String     latitude   = location.getString       ("latitude");
System.out.println (latitude); 
```

此示例代码使用[“org.json.JSONObject”](http://www.json.org/javadoc/org/json/JSONObject.html)

# amazon-s3 - 为什么我的亚马逊 s3 很慢？

> ID：12870335
> 
> 赞同：16
> 
> 时间：2012-10-13T05:42:11.383
> 
> 标签：amazon-s3

有没有办法检查我的文件是否已经在边缘服务器上供我的用户加载？或者 amazon s3 是否需要时间将您的文件传播到世界各地？多久能收到通知？

所以在我上传了一个文件后，我立即通过询问来自其他遥远地方（如日本地方）的用户来测试加载速度。他们说这比我目前在美国的托管要慢得多。这很奇怪，因为亚马逊在东京确实有一台边缘服务器，所以亚马逊 s3 应该更快？

在创建存储桶之前，我确实将区域设置为标准美国。这是为什么？如果是这样，有没有办法将您的文件设置为在世界各地工作？

感谢您的时间。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-13T09:08:28.853

正如您已经说过的，您的 S3 存储桶位于特定位置，例如 us-east、europe、us-west 等。这是您的文件物理存储的地方。它们没有地理分布。来自世界其他地方的用户在从这些存储桶请求数据时会遇到延迟。

您正在寻找的是[来自 Amazon 的 Cloudfront CDN](http://aws.amazon.com/cloudfront/)。您可以指定一个来源（在您的情况下是您的 S3 存储桶），然后您的文件将分发到全球所有 Amazon Cloudfront 边缘位置。查看他们的[常见问题解答](http://aws.amazon.com/cloudfront/faqs/)和[边缘站点列表](http://aws.amazon.com/cloudfront/#details)。

# java - 在 C++/Java 中隐藏与重载？

> ID：12870336
> 
> 赞同：1
> 
> 时间：2012-10-13T05:42:21.887
> 
> 标签：java, c++, inheritance

这是我记得的：

在 C++ 中，如果派生类定义了一个与基类具有相同名称但签名（参数等）不同的成员函数，它将在基类中“隐藏”相应的成员函数。例如

```
class Base {
public:
  void virtual f(double x); 
};

class Derived : public Base {
public:
  void f(char c); 
};

int main()
{
  Derived* d = new Derived();
  Base* b = d;
  b->f(65.3);  // call f(double x)
  d->f(65.3);  // call f(char c)
  delete d;
  return 0;
} 
```

如果我错了，请纠正我，但我认为在 C++ 中说“隐藏”，这也意味着派生类**看不到“f(double x)”**，或者换句话说，派生类没有“f(double x)”作为它从 Base 继承的成员函数，对吗？

在 Java 教程中，“隐藏”实际上意味着其他东西（对于静态类方法），而对于实例方法，您可以重载从基类继承的方法。看这个例子：[使用继承的重载方法](https://stackoverflow.com/questions/12832055/using-inherited-overloaded-methods)

```
public class ClassA {
    public void method(Number n) {
        System.out.println("ClassA: " + n + " " + n.getClass());
    }
}

public class ClassB extends ClassA {            
    public void method(Integer d) {
        System.out.println("ClassB: " + d + " " + d.getClass());
    }
}

ClassA a = new ClassB(); 
a.method(3); 
```

在 C++ 类型的思维中，基于 C++ 中的“动态绑定”和“隐藏”思想，我会得到与调用 A 类的“方法（编号 n）”相同的结果，但是：

1.  我仍然不确定如何用 Java 解释它。该链接本身使用“在编译时选择方法签名”和“它实际上是从 B 类调用”来解释；但是在 C++ 的思想中，前者是可以的，但我不认为它是从 B 类调用的，它应该是从 A 类调用的，对吧？

2.  在[使用继承的重载方法](https://stackoverflow.com/questions/12832055/using-inherited-overloaded-methods)和Java教程中，'Class B'允许从'Class A'重载函数，并且'Class B'实际上可以看到'method（Number n）'**和**'method（Integer d）'。所以 C++ 和 Java 对待重载的方式不同，对吧？为什么是这样？在 C++ 示例中说，如果 Derived 也允许重载，则 'd->f(65.3)' 将调用 'f(double x)'，而不是 'f(char c)'。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T08:17:15.923

在 C++ 中，对于非虚拟函数来说，每件事都是静态的，所以对于非虚拟函数，你没有`dynamic-binding`. 并且隐藏不会从继承中删除功能。是这样的：

当您将方法定义`M`为：`void M(int)`然后编译器在内部实现一个函数，名称`Base::M`为`void Base::M( Base* this, int )`. 现在这个函数是在代码中的某个地方实现的，不能删除，只要你能提供 this 就可以调用它（实际上你甚至可以在没有 this 的情况下调用它）。所以在`Child`我可以调用`Base::M(0);`和 C++ 转换为`this`和调用. 当你定义一个函数，其名称对应于基类的名称时，你告诉编译器我更喜欢在我的类中使用该名称作为新方法或属性！但是您不会删除任何东西，您可以使用to 的旧定义：`Child*``Base*``M``using``M``Child`

```
struct Base {
    void f( int ) {}
};
struct Child : Base {
    void f( char* ) {}
    using Base::f;  // Bring Base::f to this class, so I have f(char*), f(int)
}; 
```

除此之外，您`f(int)`甚至可以在不使用`using`.

```
// In the Child class
void test() {
    Base::f('c');  // Call Base::f(char)
}

// Outside of class
Child c;
((Base*)&c)->f('1'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T06:24:54.393

这不是我期望 C++ 的行为方式。与其隐藏基类方法，不如让子类简单地重载该方法，因为参数不同。因此，当您调用 b->f() 时，编译器将知道使用哪种方法，因为只有一种可用，但它必须根据您的参数类型确定在您调用 d->f() 时使用哪种方法。如果它不能，那么在编译时你将被迫使用强制转换。在您的示例中，它应该识别小数点并使用 double 来代替 char。

# java - 通过 Rhino javascript 限制内存分配

> ID：12870340
> 
> 赞同：2
> 
> 时间：2012-10-13T05:43:53.913
> 
> 标签：java, memory, rhino

我的 java 应用程序需要运行用户的 javascript 代码。我需要保护应用程序免受脚本不当行为（可能是无意的）的影响。我实现了 API 调用限制，并针对可能的无限循环添加了时间限制。但是，我没有找到针对 OutOfMemory 错误的保护措施，这可能是由于在脚本中分配过多的对象、数组元素等引起的。

目前我只有两个想法：

*   如果 OOM 失败，则在 shell 脚本中调用应用程序并以某种方式恢复其状态；

*   拦截 Context#observeInstructionCount 并经常检查分配的内存量是否增长太危险。

这两种变体都非常模糊和愚蠢，所以我想要更聪明的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:19:16.400

可以做到这一点的唯一方法是在单独的进程中运行 javascript 代码并`-Xmx`为该 JVM 设置参数。

# html - 如何跳过元素进入 html 页面中使用 knockout.js 绑定数据的 json 字符串

> ID：12870341
> 
> 赞同：0
> 
> 时间：2012-10-13T05:43:59.960
> 
> 标签：html, json, knockout.js

```
<div data-bind='a'></div> 
<div data-bind='b'></div>
<pre data-bind="text: ko.toJSON($root, null, 2)"></pre> 
```

我希望'b'不要保存在json字符串中..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:01:04.680

使用[映射](http://knockoutjs.com/documentation/plugins-mapping.html)ko 插件：

```
<div data-bind='text: a'></div> 
<div data-bind='text: b'></div>
<pre data-bind="text: ko.mapping.toJSON($root, {ignore: ['b']})"></pre>​ 
```

# c# - c# Gui Update from Realtime-System nice Solution ? 什么模式？

> ID：12870344
> 
> 赞同：1
> 
> 时间：2012-10-13T05:44:21.683
> 
> 标签：c#, design-patterns, user-interface, real-time

我正在为我的应用程序寻找一个不错的解决方案。背景信息：我在 Linux 上使用 c++ 编写了一个实时系统。我在 Windows XP（很快 Windows 7）上有一个 Winforms 应用程序（很快 WPF）。通信是 TCP-IP 流。我现在的解决方案是一个 Gui-Timer，它使用来自 ReaTime 系统的每个 Tick 的数据更新 Gui。我认为那不是一个干净的解决方案。我想让它变得更好。但我不知道怎么做。你能帮我吗，或者你能给我一个可以自己搜索的关键字吗？Gui不需要我实时。提前致谢。美好的愿望曼努埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:46:44.403

仅适用于 WPF：WPF 的绑定系统在您的情况下是完美的。您所要做的就是将您的代码或数据绑定到控件，如果绑定的数据更新，则 WPF 更新。

有关详细信息，请参阅[http://wpftutorial.net/DataBindingOverview.html](http://wpftutorial.net/DataBindingOverview.html)。

# java - 为什么 CountDownLatch 有时在计数为零时不释放线程？

> ID：12870345
> 
> 赞同：0
> 
> 时间：2012-10-13T05:44:24.400
> 
> 标签：java, swing

我正在构建一个简单的对话框，可以通过按下按钮或`Esc`按钮将其关闭。我在关闭对话框之前使用 CountDownLatch 等待，并`.countDown()`从各种侦听器中调用。

我遇到了以下问题 - 在窗口调用上按“X”`.countDown()`会导致对话框关闭，而按按钮会导致调用相同的代码，但线程不会恢复执行。可能是什么问题呢？

可编译/可运行示例：

```
import java.util.concurrent.CountDownLatch;
import javax.swing.JFrame;

public class StrangeDialog extends javax.swing.JDialog {

    final CountDownLatch latch = new CountDownLatch(1);

    public StrangeDialog(JFrame parent) {
        super(parent, true); // removing this line fixes things

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosed(java.awt.event.WindowEvent evt) {
                System.out.println(latch);
                latch.countDown();
            }
        });

        setFocusable(true);
        addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent e) {
                System.out.println(latch);
                latch.countDown();
            }
        });

        setSize(100,100);
        setVisible(true);
    }

    public static void main(String[] args) {
        StrangeDialog dialog = new StrangeDialog(null);
        try {
            dialog.latch.await();
        } catch (InterruptedException ex) {
        }
        dialog.setVisible(false);
        System.out.println("Released");
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T06:03:47.433

您正在创建一个模态对话框。`StrangeDialog dialog = new StrangeDialog(null);`基本上，代码在窗口关闭之前不会进展。

尝试：

```
final StrangeDialog dialog = new StrangeDialog(null);
SwingUtilities.invokeLater(new Runnable() { public void run() { dialog.setVisible(true); } }); 
```

在 main() 中打开窗口，它将按预期工作。

# ios - UITableView 的 QuickDialog 和 NSFetchedResultsController

> ID：12870347
> 
> 赞同：0
> 
> 时间：2012-10-13T05:44:32.460
> 
> 标签：ios, xcode, core-data, quickdialog

我敢肯定这是一个愚蠢的问题，但不幸的是，我和很多人一样是菜鸟（好吧，现在可能更少了，哈哈......）。

无论如何...

我有一个现有项目，其中包含通过我自己的类（MyListTableViewController）填充的 UITableView。此类当前子类化了一个对象，该对象实质上设置了 NSFetchedResultsController。

考虑到这一事实，我读过的示例和文档总是表明需要子类化 QuickDialogController 才能访问 QuickDialog 功能，因为它基本上继承了 UIViewController 的核心。

问题是我不知道如何允许将 QuickDialogController 和 NSFetchedResultsController 类一起用于同一个 UITableView/Instance...

NSFetchedResultsController 正在被子类化，因为它充当 UITableView 的委托，还因为它监视所有 UITableView 事件等……我敢肯定大多数人都很清楚……问题是我可以看到QuickDialogController 也想基本上充当 UIView 的委托（我们的 UITableView 已经是子类）

所以，这让我觉得它要爆炸了，因为我试图弄清楚如何让这两个对象在同一个集合中很好地一起玩......

由于我的应用程序与核心数据紧密耦合，因此我需要此功能，但我想要 QuickDialog 的强大功能和美感。

那么 - 有没有一种方法可以将 QuickDialogController 子类化，然后将 NSFetchedResultsController 用作它的一种委托，反之亦然？

再次，对不起，如果这是一个愚蠢/菜鸟的问题......仍在学习但想要做对......

我用于 UITableViewController 的示例（当前）子类布局...

**MyListTableViewController.h**

```
#import <UIKit/UIKit.h>
#import "CoreDataTableViewController.h"

@interface MyListTableViewController : CoreDataTableViewController 
```

**CoreDataTableViewController.h**

```
#import <UIKit/UIKit.h>
#import <CoreData/CoreData.h>

@interface CoreDataTableViewController : UITableViewController <NSFetchedResultsControllerDelegate>

@property (strong, nonatomic) NSFetchedResultsController *fetchedResultsController;
@property (nonatomic) BOOL suspendAutomaticTrackingOfChangesInManagedObjectContext;

-(void)performFetch;
@end 
```

也许这里的另一个问题是：是否可以利用 QuickDialog 操作而不必继承 QuickDialogController。如果是这样 - 这样做有什么影响，（最重要的是）有一个小例子吗？我会只创建两个之一的分配实例吗？

对于我的问题可能暴露的任何无知，我提前道歉......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:39:00.107

你试图做的事情是不可能的。ObjC 不允许多重继承，这是您正在尝试做的。即使这样做了，您仍然会遇到核心数据 dataSource/delegate 和 QuickDialog datasource/delegate 同时工作的问题。

您需要决定一种或另一种方式：1 - 从 QuickDialog 控制器继承，然后添加逻辑以从 CoreData 获取数据并自己加载到 Root 元素中（并且不要使用 CoreDataTableViewController）或.. 2 - 从 CoreDataTableViewController 继承，并手动创建 QuickDialogTableView 及其类的数据源/委托。

关于#2，恕我直言，QD 不是为这种用途而创建的。使用选项 1 会更好，并将 CoreData 数据的加载移动到外部类，然后您可以将其加载到 Root 元素中。但是，如果您有数百/数千行，我不会为此使用 QD。

# android - 使用带有复选框的 ExpandableListActivity

> ID：12870351
> 
> 赞同：2
> 
> 时间：2012-10-13T05:45:14.070
> 
> 标签：android, expandablelistview, expandablelistadapter, android-checkbox

我正在使用 ExpandableListActivity ，每个子行都有一个 textview 和一个复选框。我正在使用 SimpleCursorTreeAdapter 来绑定数据。这里的问题是，当我选择一个复选框并向下滚动并再次返回时，该复选框未选中。或当我选择复选框时其他问题也选择了其他复选框。我不明白为什么会这样。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:18:23.913

这是因为您的适配器中的 get view mathode 使用此链接可能会解决您的问题。

[学习链接](http://www.androtips.com/2012/03/enable-button-inside-list-item.html)

# jquery - 如何使用 jQuery 移动弹出窗口？

> ID：12870353
> 
> 赞同：1
> 
> 时间：2012-10-13T05:45:41.387
> 
> 标签：jquery, jquery-mobile

我正在尝试从 ajax 帖子的回调函数中使用 JQuery Mobile Popup。我的回调函数有一个名为“msg”的数据，它是一个字符串，通常表示“保存成功”。那里有任何示例可以让我打开和关闭带有该消息的弹出窗口或对话框吗？这是我到目前为止所拥有的：

```
$.post('/Home/SaveSomething', { data: someData },
                function (msg) {
                    //OPEN THE DIALOG
                }); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:53:08.920

```
$.post('/Home/SaveSomething',
       { data: someData },
                function (msg) {
                    //OPEN THE DIALOG

                     // you can use alert 
                    alert(msg);
                    // or for custom popup need to use css and jquery coding

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:25:10.380

你可以试试这个

```
 <div data-role="popup" id="popup-message" data-theme="a" data-overlay-theme="a" class="ui-content">
          <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="remove" data-iconpos="notext" class="ui-btn-right">Close</a>
    </div> 
```

如上所述为消息提供一个空的弹出容器，并使用容器的 id 填充来自 ajax 成功函数的数据，如下所示

```
$.post('/Home/SaveSomething', { data: someData },
    function (msg) {

    $('#popup-message').text(msg); //fill the data here
    $('#popup-message').popup("open"); // open the popup
}); 
```

# javascript - 将 jQuery 滚动到另一个库中？

> ID：12870360
> 
> 赞同：2
> 
> 时间：2012-10-13T05:46:32.567
> 
> 标签：javascript, jquery

我有一个项目需要将自定义 JavaScript 库包含在最终用户的网站中。某种第三方的东西，想想像谷歌分析这样的 JavaScript 跟踪。

我们将无法控制还可能加载哪些其他 JS 库/框架或哪些版本。

我希望能够利用 jQuery 的事件委托、选择器和 AJAX 功能，但是：

*   不会与可能加载的其他库或其他版本的 jQuery 产生任何冲突
*   不需要最终用户必须考虑单独包含 jQuery。

因此，滚动所有的 jQuery 似乎有点过头了，但同样需要事件委托、选择器和 AJAX。我知道 jQuery 的 sizzel 引擎以这样一种方式被打破，它可以包含在 3rd 方库中，并且有很多小型 AJAX 库，但我们也需要良好的事件委托支持。此外，我预见我们需要在不久的将来使用这个库进行一些繁重的 DOM 提升，因此可以说我们确实需要 jQuery 的大部分功能。

关于如何以不践踏任何人的代码的方式封装 jQuery 的任何建议？另外，这有多可取？确实感觉有点不靠谱。

另外，将它封装到另一个库中的最佳方法是什么？还有比这更好的方法吗？：

```
(function(window){
    window.myNamespace = {
        _jq:null,
        init: function(){
            // Include jQuery
            myNamespace.setJq();
        },
        setJq:function(){
            /*! jQuery v1.8.2 jquery.com | jquery.org/license */
            (function(a,b){function G(a){...}}) // <- minified jQuery
            // Stash a local copy of jQuery
            myNamespace._jq = jQuery;
            // Return $ and jQuery namespace
            $.noConflict(true);
        }
    }
})(window) 
```

（我们打算为那些精明的人提供一个没有 jQuery 的库版本，以便知道它已经加载到他们的页面上以及他们正在使用什么版本）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:55:22.737

看看 jQuery in Parts：[https ://github.com/mythz/jquip](https://github.com/mythz/jquip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T06:22:50.567

东一个条件负载怎么样...测试 $ 是否存在。如果是这样，请不要加载脚本。如果没有，则加载它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T07:15:42.950

您可以使用以下模式来确保将 jQuery 传递给函数，然后您可以将其映射到局部变量 $ 而不会出现问题。

(function(window,$){ //使用 $ 作为本地 jQuery 变量

})(窗口,jQuery);

# c# - 在 c# 和 c dll 之间使用通用颜色值

> ID：12870363
> 
> 赞同：0
> 
> 时间：2012-10-13T05:47:00.553
> 
> 标签：c#, .net, c, colors

我有调用 C dll 的 ac# Windows .Net UI。dll 对一组数据进行一些计算，并提供一种需要传递给 UI 的颜色。

颜色不是奇异的，只有大约 10 种不同的颜色会传递给 UI（例如，红色、白色、绿色、洋红色、黄色等）。是否有一些 C 和 C# 都可以使用的标准名称，所以我可以避免编写更多代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T13:44:07.407

颜色值是代码中的整数。只有当您使用设计器或类似 .NET System.Drawing.Color 类型的类型时，它才有名称。当您在 .NET 和 C 之间进行互操作时，除了 int 之外，没有可以在两端使用的类型。

颜色值以 ARGB 格式编码，Alpha、Red、Green 和 Blue 各一个字节。所以“红色”是值 0xffff0000，“白色”是 0xffffffff，“绿色”是 0xff00ff00，等等。希望你能看到模式。`int value = Color.Red.ToArgb();`如果没有，那么您可以通过编写一个用于获取整数值的小 C# Winforms 程序来获取颜色值。也可以在调试器中使用，因此您可以直接在快速监视窗口中键入表达式。

# ruby-on-rails-3 - 将图像添加到表 Ruby on Rails

> ID：12870364
> 
> 赞同：2
> 
> 时间：2012-10-13T05:47:14.740
> 
> 标签：ruby-on-rails-3

我是 RoR 初学者，似乎找不到关于以下内容的教程：

我想为我的数据库中的每个电视节目添加一张图片，然后想通过在我的视图中调用@show.image 来显示图像（节目是一个电视节目）。首先，栏目内容是什么？（我会假设一个字符串，但我认为可能有更合适的东西）其次，有没有一种方法我不需要手动将 URL 添加到数据库中？就像我可以以某种方式指定图像名称与电视节目的名称一样？

我的问题可能有点令人困惑，所以如果您不明白我的意思，请告诉我！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:55:26.450

您需要使用一种叫做回形针的宝石，它非常好。

[这是railscast的链接](http://railscasts.com/episodes/134-paperclip)

railscast 很老了，所以回形针是一个插件，它不适用于 rails 3.2 + 。下面的github链接会更好用

gem 也是开源的，你可以在[github上看到这个](https://github.com/thoughtbot/paperclip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:05:57.593

对于您问题的第一部分，我假设您要将图像的 URL 存储在数据库中，而不是图像本身。`string`是用于此的精细列类型。

在第二部分 - 是的，您可以根据需要从其他数据生成图像文件名。可能最好的方法是在模型中，可能是这样的：

```
def image
  "/images/#{self.name}.png"
end 
```

然后在您看来，您只需调用`@show.image`模板即可。

# f# - Array2D 到数组

> ID：12870368
> 
> 赞同：10
> 
> 时间：2012-10-13T05:48:44.537
> 
> 标签：f#

我的 Array2D 为 0 和 1：

```
let rnd = System.Random()
let a = Array2D.init n n (fun i j  -> int(System.Math.Round(rnd.NextDouble() / index)) ) 
```

我需要计算“1”元素的数量，例如：

```
a |> Array.filter (fun x -> x == 1) 
```

但是“a”是 Array2D（不是 Array）所以我只是想知道是否有将 Array2D 转换为 Array 的标准方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T06:21:21.317

`[,]`这是一种简单的方法，使用实现的事实`ienumerable<_>`

```
a |> Seq.cast<int> |> Seq.filter (fun x -> x == 1) 
```

但如果你只需要你可以做的计数

```
a |> Seq.cast<int> |> Seq.sum 
```

因为 0 项不会加到总和中，而您要计算的项只是 1

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-13T07:47:10.970

从 Array2D 转换为 Array 的函数在许多情况下都非常方便。

您可以将其保存在`Array2D`模块中以方便使用。

```
module Array2D =
    let toArray (arr: 'T [,]) = arr |> Seq.cast<'T> |> Seq.toArray 
```

# c# - 更改数据网格中一行的颜色

> ID：12870369
> 
> 赞同：0
> 
> 时间：2012-10-13T05:49:38.493
> 
> 标签：c#, wpf

我有一个显示表格“项目（Item_desc，数量，unit_price）”的datagridview。

我需要更改数量值小于 10 的行的颜色。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:55:20.760

使用此代码：

```
foreach(DataGridViewRow dgvr in dgv.Rows)
{
    int  quantity=int32.Parse(dgv.Cells[10].Value.ToString()) ;
    if( quantity <10)
    {
        .....
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T08:11:30.703

在你的类中创建一个属性，`IsQuantityLessThanTen`并在你的触发器中使用它（在 DataGridRow 的样式中）来更改 bakground 行。

此外，如果您不想创建属性，可以使用[ValueConverter 。](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx "值转换器")理想情况下，应该这样做，否则`PropertyChanged`每当 Quantity 属性发生更改时，您必须显式地为您的属性提高属性以将其反映在 UI 上。

```
public bool IsQuantityLessThanTen
{
   get
   {
      return Quantity < 10;
   }
}

<DataGrid>
  <DataGrid.Resources>
     <Style TargetType="DataGridRow">
        <ControlTemplate.Triggers>
           <DataTrigger Binding="{Binding IsQuantityLessThanTen}" Value="True">
              <Setter Property="Background" Value="Red" />
           </DataTrigger>
        </ControlTemplate.Triggers>
     </Style>
  </DataGrid.Resources>
......
</DataGrid> 
```

# java - 模式匹配中的效率公式代码

> ID：12870372
> 
> 赞同：0
> 
> 时间：2012-10-13T05:49:59.977
> 
> 标签：java, performance, pattern-matching

我需要一个公式，该公式将使用时间和比较因素的数量来确定系统在模式匹配中的效率。

是否有任何公式可以使用这些因素产生数字输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:34:39.053

如果你问是否有一个通用公式来表征给定模式和给定输入的正则表达式模式匹配器的性能，那么答案是没有这样的公式。这个问题太复杂了，无法简化为公式。

而且当你加上不同的模式匹配算法以不同的方式工作的事实时，问题变得更加复杂。

# bash - 如何强制算术表达式中的语法错误中止我的 Bash 脚本？

> ID：12870375
> 
> 赞同：2
> 
> 时间：2012-10-13T05:50:54.260
> 
> 标签：bash

我最近在我的一个 Bash 脚本中遇到了一个问题，这是由它运行的一个 SSH 命令的意外输出引起的（由于操作系统版本升级）。这个问题实际上导致了 Bash 语法错误，因为我希望这个输出只包含一个数字状态代码（来自远程脚本），然后我在算术表达式中使用了它。

不过，令我惊讶的是，我的 Bash 脚本在报告语法错误后继续执行。尽管事实上我在文件开头附近有以下行：

```
# Terminate script if any command fails
set -o errexit 
```

尽管语法错误显然与失败的命令不同，但在我看来，前者代表了更严重的错误情况。

我知道您可以使用 -n 参数来检查 Bash 脚本的语法，而无需实际执行任何命令，但无论如何也不会遇到这个问题。

这是一个导致错误但不退出的示例：

```
#!/bin/bash
set -o errexit
x=")"
echo $(( x + 1 ))
echo still running 
```

在正常操作期间检测到算术表达式中的语法错误后，有什么方法可以强制 Bash 脚本立即终止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:20:43.243

快速的答案是，在这种情况下，您可以通过检查来捕获它`$?`：

```
#!/bin/bash
x=")"
echo $(( $x + 1 ))
if [[ $? != 0 ]]; then
    echo >&2 "caught syntax error; aborting"
    exit $?
fi
echo success 
```

但是，这种方法并不总是有效，例如

```
#!/bin/bash
x="-1"
(( x += 1 ))
if [[ $? != 0 ]]; then
    echo >&2 "caught syntax error; aborting"
    exit $?
fi
echo success 
```

将导致：

```
caught syntax error; aborting 
```

`bash(1)`手册页说：

```
The evaluation is performed according to the rules listed below
under ARITHMETIC EVALUATION.  If expression is invalid, bash
prints a message indicating failure and no substitution occurs. 
```

但这隐藏了 Bash 在语法错误方面相当特殊的行为的一些细节。例如，

```
#!/bin/bash
x=")"
if echo $(( $x + 1 )); then
    echo success
else
    echo failure
fi; echo "almost end of script"
echo "end of script" 
```

结果是：

```
./foo.sh: line 3: ) + 1 : syntax error: operand expected (error token is ") + 1 ")
end of script 
```

顺便说一句，`set -o errexit`这似乎没有任何区别。

# wpf - 屏幕分辨率问题 - 仅在某些分辨率上截断网格

> ID：12870378
> 
> 赞同：1
> 
> 时间：2012-10-13T05:51:28.060
> 
> 标签：wpf

我有一个固定的布局，并且希望我的应用在所有机器上看起来都一样，无论屏幕大小或分辨率如何。在使用模拟器测试我的应用程序时，我发现我的布局在不同的分辨率下被截断。

```
<Viewbox Stretch="UniformToFill" Width="Auto" Height="Auto">
    <Grid Style="{StaticResource LayoutRootStyle}" x:Name="LayoutRoot" Width="1024" Height="Auto">
        <Grid.RowDefinitions>
            <RowDefinition Height="65"/>
            <RowDefinition Height="50"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions> 
```

在上面指定的分辨率上，最后一列被截断。这些行都呈现没有任何问题。我想知道是否有人可以让我了解我可以做什么，以使我的应用程序在所有屏幕尺寸和分辨率上看起来都一样。我希望将 Stretch 属性设置为 Uniform 或 UniformToFill。

# vba - 使用 VBA 从字符串中获取整数值

> ID：12870379
> 
> 赞同：2
> 
> 时间：2012-10-13T05:51:54.333
> 
> 标签：vba

我正在尝试使用 QTP 和 SAP 自动化脚本。

在 SAP 中生成订单，状态栏中的文档编号为“**在编号 4500290636 下创建的标准采购订单**”

我的挑战是我应该如何将字符串转换为整数值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:23:58.683

由于您使用的是 SAP，我认为可以安全地假设文档编号的长度始终为 10 个字符。因此，您可以使用该函数提取它`Right`，然后使用`Val`. 像这样的东西：

```
yourInteger = Val(Right(yourSAPString, 10)) 
```

注意：在 .net 中，您可以使用 Convert.ToInt32 而不是 Val

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:48:59.643

您可以使用拆分功能：

```
Dim strSplit As Variant
Dim yourNumericOut As Variant

    strSplit = Split("Standard PO created under the number 4500290636")

    If IsNumeric(UBound(strSplit)) Then yourNumericOut = --strSplit(UBound(strSplit)) 
```

然后测试数字，将允许许多长度，并且可以更改数字在返回值中的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-07T19:09:02.270

我建议使用自定义函数。

这是功能：

```
Public Function ExtractNumber(fromString As String) As Double
    Dim RegEx As Object
    Set RegEx = CreateObject("VBScript.RegExp")
    With RegEx
        .Pattern = "(\d{1,3},?)+(\.\d{2})?"
        .Global = True
        If .Test(fromString) Then
            ExtractNumber = CDbl(.Execute(fromString)(0))
        End If
    End With
End Function 
```

这是使用示例：

```
Sub Example()
    Debug.Print ExtractNumber("Standard PO created under the number 4500290636")
End Sub 
```

此代码取自具有更好解决方案的类似的、更新的答案。请参见此处： [Excel VBA - 提取字符串中的数值](https://stackoverflow.com/questions/40365573/excel-vba-extract-numeric-value-in-string)

# vba - 在 ASP 页中包含 vb 脚本

> ID：12870384
> 
> 赞同：0
> 
> 时间：2012-10-13T05:52:51.867
> 
> 标签：vba, asp-classic

我有一个 vbscript，它接受一个 csv 文件并将其内容上传到数据库。我需要将该脚本包含在 ASP 页面中。该脚本应该存在于 asp 页面本身中，而不是放在外部，即，我不希望 asp 页面设置对外部 dll 的引用，而是将代码包含在 asp 本身中。可以吗？

这是我拥有的 vbscript。

[http://pastebin.com/vuzUhTDM](http://pastebin.com/vuzUhTDM)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T09:39:40.947

大多数 vb6 代码可以在经典的 asp vbscript 中重用。你必须声明你的变量有点不同，因为 vbscript 只有 Variants..

因此对于记录集声明，而不是这样：

```
Dim rs1 As New ADODB.Recordset, rs2 As New ADODB.Recordset
Dim rst As New ADODB.Recordset 
```

你必须这样做

```
Dim rs1 , rs2, rst 
Set rs1=Server.CreateObject("ADODB.recordset")
Set rs2=Server.CreateObject("ADODB.recordset")
Set rst=Server.CreateObject("ADODB.recordset") 
```

*[我在您的代码示例中没有看到任何连接对象.. 只是使用 db.ConnectionString.. 确保您也使用相同的逻辑创建连接对象 db。]*

对于简单变量，您还只需创建一个高级变体类型，子类型（字符串、长整数、整数...）将在运行时通过为变量赋值来进行赋值。因此，而不是这样：

```
Dim eno As Long
Dim fname As String
Dim fname1 As String
Dim fno1 As Integer
Dim fno As Integer
Dim mstr As String
Dim flds() As String
Dim valid_data As Boolean
Dim errstr As String
Dim errcnt As Integer
Dim pickupid As Long
Dim cancel_rec As String
Dim bkno As Double
Dim sReceipt_no As Long 
```

你可以这样做：

```
Dim eno , fname , fname1 , fno1 , fno , mstr, valid_data, errstr, errcnt, pickupid, cancel_rec, bkno, sReceipt_no 
Dim flds() 
```

# java - 301/302 重定向在 Android 中不起作用（在不同版本中工作方式不同）

> ID：12870385
> 
> 赞同：6
> 
> 时间：2012-10-13T05:53:04.953
> 
> 标签：java, android, redirect, http-status-code-301, urlconnection

使用 URLConnection 时，301 重定向不起作用，甚至不显示`Location`标题，使用 getHeaderFields()。这是一个空白列表，除了在较新的 Android 中（我测试了 4.1 并且它有效）。虽然在我的测试中它在 Android 浏览器中工作，但似乎也已在[此处](http://androidforums.com/android-applications/356399-htc-hd-native-browser-ignores-301-redirect.html)的默认浏览器中报告了这一点。旧版 Android 中的此错误是否有一些解决方法？

我试过了：

```
URLConnection conn = u.openConnection();
HttpURLConnection conn = (HttpURLConnection) u.openConnection();
(conn).setInstanceFollowRedirects(true); 
```

但它仍然返回一个空列表，除非在较新的 Android 中。

**更新**：这可能是一个相关的问题，有时 URLConnection 在某些情况下甚至没有发送请求。（我在带有模拟器的电脑上使用 Wireshark 进行了检查）。有没有办法解决这个错误？

**更新**：我尝试测试 3xx 重定向，重定向工作正常，但普通链接不适用于 Ian 的 Cookie 管理器。确保在 openConnection 之后直接调用 setCookies 后，效果很好：

```
 URL u = new URL(_url);
        ...
        int tries = 4;
        int code = 301;
        URLConnection conn = null;
        while (tries > 0 && code/100 == 3) {
            conn = null;
            conn = u.openConnection();
            _CM.setCookies(conn);
            ((HttpURLConnection)conn).setInstanceFollowRedirects(false);//Required
            code =((HttpURLConnection)conn).getResponseCode();
            if (code/100 == 3) {
                String loc = conn.getHeaderField("Location");
                u = new URL(loc);
            }
        }

        //conn.addRequestProperty("Accept-Encoding", "gzip");

        conn.connect();
        _CM.storeCookies(conn); 
```

真正奇怪的是，对于较新的 Android（4.1 模拟器），不需要 FollowRedirect 行（注释为“必需”）。在较旧的 Android (2.2) 上，它会`Connection Reset by Peer`出错。这可能是我的重定向实验代码在 2.2 而不是 4.1 上失败的原因。功能差异的任何原因？根据[这里的评论](https://stackoverflow.com/questions/2606873/sslexception-hellorequest-followed-by-an-unexpected-handshake-message)，重定向 https 显然有不同的行为，具体取决于 JVM 版本，是不是 Android 的 URLConnection/HTTPUrlConnection 在不同的版本中也发生了变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:58:04.097

不确定 URLConnection，但我知道 HttpClient 支持重定向，我们一直使用它回到 Android 2.1

[http://developer.android.com/reference/org/apache/http/client/HttpClient.html](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)

（基于apache commons HttpClient）

# python - Virtualenv 中的导入错误

> ID：12870394
> 
> 赞同：1
> 
> 时间：2012-10-13T05:54:18.353
> 
> 标签：python, virtualenv, python-import

我正在尝试`python setup.py`在运行 Flask + sqlalchemy (mysql) 的 Linode 实例上运行一个小脚本。

```
#filename - setup.py
from daaru import db

def init_db():
    db.drop_all()
    db.create_all()

init_db() 
```

这是我得到的错误 -

```
Traceback (most recent call last):
  File "setup.py", line 21, in <module>
    init_db()
  File "setup.py", line 9, in init_db
    db.drop_all()
  File "/home/captain/public/daaru/v1/local/lib/python2.7/site-packages/flask_sqlalchemy.py", line 830, in drop_all
    self._execute_for_all_tables(app, bind, 'drop_all')
  File "/home/captain/public/daaru/v1/local/lib/python2.7/site-packages/flask_sqlalchemy.py", line 814, in _execute_for_all_tables
    op(bind=self.get_engine(app, bind), tables=tables)
  File "/home/captain/public/daaru/v1/local/lib/python2.7/site-packages/flask_sqlalchemy.py", line 763, in get_engine
    return connector.get_engine()
  File "/home/captain/public/daaru/v1/local/lib/python2.7/site-packages/flask_sqlalchemy.py", line 443, in get_engine
    self._engine = rv = sqlalchemy.create_engine(info, **options)
  File "/home/captain/public/daaru/v1/local/lib/python2.7/site-packages/sqlalchemy/engine/__init__.py", line 338, in create_engine
    return strategy.create(*args, **kwargs)
  File "/home/captain/public/daaru/v1/local/lib/python2.7/site-packages/sqlalchemy/engine/strategies.py", line 64, in create
    dbapi = dialect_cls.dbapi(**dbapi_args)
  File "/home/captain/public/daaru/v1/local/lib/python2.7/site-packages/sqlalchemy/connectors/mysqldb.py", line 52, in dbapi
    return __import__('MySQLdb')
ImportError: No module named MySQLdb 
```

有趣的是，当我登录服务器时，激活虚拟环境（名为`v1`），然后`init_db`在 ipython 中运行，一切都按预期工作。但是当我将它作为脚本运行时，它给了我一个`ImportError`名为`MySQLdb`. MySQLdb 有一个系统范围的安装使用`apt-get install python-mysqldb`，因为这个包不能通过 pip 获得。

我在这里做错了什么？

`pip freeze`在服务器上运行向我展示了这一点：

```
Flask==0.9
Flask-SQLAlchemy==0.16
Jinja2==2.6
SQLAlchemy==0.7.9
Werkzeug==0.8.3
argparse==1.2.1
wsgiref==0.1.2 
```

错误是因为在venv中找不到mysqldb包吗？那么为什么不使用该软件包的系统范围安装呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:46:17.007

我使用[这篇](http://www.saltycrane.com/blog/2010/02/install-mysqldb-virtualenv-ubuntu-karmic/)博文在我的 venv 中安装了 mysql-python。现在一切正常。谢谢。我还添加了一个 fabfile 来自动部署 -

```
from fabric.api import *

env.user = "host"
env.hosts = ["hostname"]
env.directory = "/home/captain/public/daaru"
env.activate = "source /home/captain/public/daaru/v1/bin/activate"

def deploy():
    with cd(env.directory):
        run("git pull")
        run("sudo service apache2 reload")

def virtualenv(command):
    with cd(env.directory), prefix(env.activate):
        run(command)

def populate_db():
    virtualenv("python setup.py")

def freeze():
    """ command for testing virtualenv """
    virtualenv("pip freeze") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T17:39:18.253

我刚刚遇到了这个问题，对我来说简单而肮脏的解决方法是 to `cp -r /usr/lib/python2.7/dist-packages/*mysql* $VIRTUALENV/lib/python2.7/dist-packages/`and `cp -r /usr/lib/python2.7/dist-packages/*MySQL* $VIRTUALENV/lib/python2.7/dist-packages/`，它获取了所有需要的部分。

`pip install MySQL-python`仔细研究后发现，由于`libmysqlclient-dev`没有通过 apt 安装，virtualenv中失败了。希望这可以帮助。

# android - 在 Android ActionBar 中访问视图

> ID：12870396
> 
> 赞同：1
> 
> 时间：2012-10-13T05:55:03.723
> 
> 标签：android, android-actionbar, actionbarsherlock

有没有办法访问我们设置时`View`显示的（微调器）？`ActionBar``setNavigationMode(ActionBar.NAVIGATION_MODE_LIST)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:13:39.713

不是通过任何记录和支持的方式。

# regex - nginx - 无法确定位置重写

> ID：12870400
> 
> 赞同：2
> 
> 时间：2012-10-13T05:55:23.540
> 
> 标签：regex, nginx

我正在尝试将不同的 URI 请求重定向到不同的 EC2 容器，多年来我一直使用 nginx 作为 apache 的包罗万象的反向代理，但现在我想在 nginx 级别进行一些重写。

这是我要完成的工作：

```
server {
    listen       80;
    server_name  _;

    gzip              on;
    gzip_static       on;
    gzip_buffers      16 8k;
    gzip_comp_level   9;
    gzip_http_version 1.0;
    gzip_min_length   0;
    gzip_types        text/plain text/css application/x-javascript;
    gzip_vary         on;

    location / { 
        # catch the following URI's including homepage: /contact.html, /terms.html, /
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_read_timeout 240;
        proxy_connect_timeout 240;
        proxy_send_timeout 240;

        send_timeout 240;
        proxy_pass http://servers_static;
    }

    location / { 
        # catch everything not matched above
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_read_timeout 240;
        proxy_connect_timeout 240;
        proxy_send_timeout 240;

        send_timeout 240;
        proxy_pass http://servers_dynamic;
    }
} 
```

我确信这只是一个简单的正则表达式问题，但我从来没有理解过那些东西。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T08:01:28.437

使用通用代理设置创建文件 /etc/nginx/EC2：

```
proxy_set_header Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_read_timeout 240;
proxy_connect_timeout 240;
proxy_send_timeout 240;
send_timeout 240; 
```

然后您的主要配置变为：

```
server {
  listen       80;
  server_name  _;

  #gzip settings cut for brevity, add them back in     

  # static content
  location = / {include /etc/nginx/EC2; proxy_pass http://servers_static;}
  location = /contact.html {include /etc/nginx/EC2; proxy_pass http://servers_static;}
  location = /terms.html {include /etc/nginx/EC2; proxy_pass http://servers_static;}

  # dynamic content
  location / { include /etc/nginx/EC2; proxy_pass http://servers_dynamic; }
} 
```

您还可以像这样组合 .html 静态内容页面的位置：

```
 location ~ (contact|terms).html {
    include /etc/nginx/EC2; proxy_pass http://servers_static;} 
```

拥有精确匹配的位置可能会更有效一些，只要你不需要很多重复的结果就不应该使配置变得笨拙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:25:26.777

看看`try_files`。它会依次尝试你给它的路径。在此示例中，`/var/www/sites/foo/current/public/$uri`将返回任何静态文件，仅在不存在静态文件时将请求路由到应用程序。

```
upstream app {
  server unix:/tmp/.sock_my_app;
}

server {
  # path for static files
  root /var/www/sites/foo/current/public;

  # Prefer to serve static files directly from nginx to avoid unnecessary
  # requests to the application server.
  try_files $uri/index.html $uri.html $uri @app;

  location @app {
    proxy_set_header Host $http_host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

    # timeouts

    # reverse proxy to an upstream
    proxy_pass http://app;
  }
} 
```

# android - 无法运行安卓应用

> ID：12870401
> 
> 赞同：1
> 
> 时间：2012-10-13T05:55:24.163
> 
> 标签：android, google-maps

[我一直在从这里](http://www.androidhive.info/2012/01/android-working-with-google-maps/)学习谷歌地图 api ，并按照所说的做了。我的`mainactivity`代码如下：

```
package com.map.place;

import android.app.Activity;
import android.os.Bundle;
import com.google.android.maps.MapActivity;

public class MainActivity extends MapActivity
{
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}
} 
```

`main.xml`如下：

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mapView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:clickable="true"
android:apiKey="0Ove92B2I7FZi4SR2YX89jA374Wcg6-cJ33VwUg"
/> 
```

最后`manifest`文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.map.place"
  android:versionCode="1"
  android:versionName="1.0">
      <uses-sdk android:minSdkVersion="10" />
<application android:label="@string/app_name" >
    <activity android:name="MainActivity"
              android:label="@string/app_name">
                  <uses-library android:name="com.google.android.maps" />
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
<uses-permission android:name="android.permission.INTERNET" />
</manifest> 
```

logcat 控制台显示如下：

```
E/AndroidRuntime(  975): FATAL EXCEPTION: main
E/AndroidRuntime(  975): java.lang.RuntimeException: Unable to instantiate activ
ity ComponentInfo{com.map.place/com.map.place.MainActivity}: java.lang.ClassNotF
oundException: com.map.place.MainActivity in loader dalvik.system.PathClassLoade
r[/data/app/com.map.place-2.apk] 
```

我不知道出了什么问题，但这是显示`Sorry, the app stopped unexpectedly`. `avd`我在`2.3.3`平台和 API 级别上运行它`10`。请纠正我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:40:27.893

我使用您的代码并使其可运行，下面是运行代码。只需更改您的 Map API 密钥：试试...并使用模拟器和 android 版本与 google API，如 android 2.2 google API 它还包括缩放控件：main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#008000"
android:orientation="vertical" >

    <com.google.android.maps.MapView
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:enabled="true"
    android:clickable="true"
    android:apiKey="0twJXMQDHBfxjMnb77nwRzKs29kGZdRkcG3_Z8Q" />

    <LinearLayout android:id="@+id/zoom" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_alignParentBottom="true" 
        android:layout_centerHorizontal="true" 
       /> 

</RelativeLayout> 
```

你的 manifest.xml 文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.map.place"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
 <uses-permission android:name="android.permission.INTERNET" />

 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <uses-library
        android:name="com.google.android.maps"
        android:required="true" />
 </application>
 </manifest> 
```

MainActivity.java ：

```
package com.map.place;
import android.os.Bundle;
import android.support.v4.view.ViewPager.LayoutParams;
import android.view.KeyEvent;
import android.view.View;
import android.widget.LinearLayout;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

public class MainActivity extends MapActivity{

//===========
MapView mapView;
public static String latitude,longitude;

/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

mapView = (MapView) findViewById(R.id.mapView);
mapView.setSatellite(false);
LinearLayout zoomLayout = (LinearLayout) findViewById(R.id.zoom);
View zoomView = mapView.getZoomControls();

zoomLayout.addView(zoomView, new     
LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
mapView.displayZoomControls(true);
mapView.invalidate();

}

// Below is the code when the user presses the number 3 on the keyboard the
// map  will zoom in into the next level. Pressing number 1 will zoom out one
// level.

public boolean onKeyDown(int keyCode, KeyEvent event) {
MapController mc = mapView.getController();
switch (keyCode) {
case KeyEvent.KEYCODE_3:
    mc.zoomIn();
    break;
case KeyEvent.KEYCODE_1:
    mc.zoomOut();
    break;
}
return super.onKeyDown(keyCode, event);
}

@Override
protected boolean isRouteDisplayed() {
// TODO Auto-generated method stub
return false;
}

}
//By Umesh Suryawanshi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:03:34.513

你的`<uses-library>`标签放错地方了。它应该在`<application>`标签中，而不是`<activity>`标签中。尝试使用：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.map.place"
  android:versionCode="1"
  android:versionName="1.0">
      <uses-sdk android:minSdkVersion="10" />
<application android:label="@string/app_name" >
<uses-library android:name="com.google.android.maps"/>
    <activity android:name="MainActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
<uses-permission android:name="android.permission.INTERNET" />
</manifest> 
```

此外，请确保使用安装了 Google API 的模拟器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T06:09:53.690

1）检查您的目标是 Google api 2.3.3 。

2）检查您的密钥是否正确。

3）像这样检查你的清单。

```
 <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".ShowMapActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    <uses-library android:required="true" android:name="com.google.android.maps"></uses-library>

   </application> 
```

4）如果您没有得到解决方案，请再次找到您的密钥并使用它。

# php - 仅显示更多内容的一些内容

> ID：12870410
> 
> 赞同：1
> 
> 时间：2012-10-13T05:57:27.997
> 
> 标签：php, html

我有一个内容

```
<p>
<strong><span style="font-family: monospace; white-space: pre-wrap; ">Description:Getting Started contains a list of tasks you might want to perform when you set up your computer. Tasks in Getting Started include: &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;  Dnescription:Getting Started contains a list of tasks you might want to perform when you set up your computer. Tasks in Getting Started include:</span></strong></p> 
```

现在我只想选择 50 个字符

描述：Getting Started 包含您在设置计算机时可能要执行的任务列表。入门中的任务包括：

它应该排除标签以及如何实现这一点？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:01:39.540

如果您只想删除标签，您可以使用`strip_tags($text);`.
`echo substr(str_replace("&nbsp;","",strip_tags($yourText),0,50))`会打印你所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:02:14.407

您应该在 PHP 中执行此操作，如下例所示

```
$data = '<b>Description: </b> Getting Started contains a list of tasks you might want to perform when you set up your computer. Tasks in Getting Started include:'

// remove html tags
$data = strip_tags($data);

// remove all &nbsp;

$data = preg_replace("/\[(.*?)\]\s*(.*?)\s*\[\/(.*?)\]/", "[$1]$2[/$3]", html_entity_decode($data));

OR

$data = trim(str_replace('&nbsp;','',$data));

//limit characters

$data = substr($data,0,50); 
```

现在您可以在 html 中的任何位置回显此数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T06:05:37.340

```
$tmp = "<p><strong><span style=\"font-family: monospace; 
       white-space: pre-wrap;\">Description:Getting Started contains a list 
       of tasks you might want to perform when you set up your computer. Tasks 
       in Getting Started include: &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;
       &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;
       Dnescription: Getting Started contains a list of tasks you might want 
       to perform when you set up your computer. Tasks in Getting Started 
       include:</span></strong></p>";

$tmp = preg_replace("/&#?[a-z0-9]{2,8};/i","",$tmp);

$final = substr(strip_tags($tmp),0,50); 
```

**编辑：**

如前所述，这不会删除 html 实体。所以我从[如何删除 html 特殊字符中借了一个正则表达式？](https://stackoverflow.com/questions/657643/how-to-remove-html-special-chars)

现在，`$final`包含您想要的输出。

# c# - 使用按钮导航一组对象并在面板中查看选定的对象

> ID：12870411
> 
> 赞同：1
> 
> 时间：2012-10-13T05:57:28.900
> 
> 标签：c#, wpf, data-binding

这就是我想要做的：我有一个`List<myCustomType>`. 现在我想在画布（或任何其他容器）上显示该列表。来自（几个字符串、一个图像、一个字符串列表）的每个属性`myCustomType`都有一个设计好的控制画布。基本上，我想将画布上的每个控件绑定到`myCustomType`. 然后我想在画布上有按钮，让我可以循环浏览`List<myCustomType>`并同时更新所有控件，以便所有控件始终显示单个列表项的内容。

我一直在环顾四周，但找不到任何可以用作起点的东西。

这很容易实现吗？还是我必须从头开始编写代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T10:03:25.097

这是一个使用 MVVM 的示例。

我的客户模型非常简单，如下所示：

```
public class Customer
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

接下来，我们需要一个 ViewModel，应用程序的 MainWindow 将绑定到该 ViewModel。它拥有客户，并具有通过按钮在客户之间移动的方法。CollectionView 类型支持当前项目跟踪，我想类似于 WinForms 的 BindingSource：

```
public class MyViewModel
{
    public ICollectionView Customers { get; set; }

    public void MoveSelectionLeft()
    {
        Customers.MoveCurrentToPrevious();
    }

    public void MoveSelectionRight()
    {
        Customers.MoveCurrentToNext();
    }

    public MyViewModel()
    {
        Customers = new CollectionViewSource
            {
                Source = new[]
                    {
                        new Customer {Name = "John", Age = 25},
                        new Customer {Name = "Jane", Age = 27},
                        new Customer {Name = "Dawn", Age = 31}
                    }
            }.View;
    }
} 
```

接下来我们有视图。我正在使用 Caliburn Micro 来简化将操作连接到按钮的过程。只需下载它并将对 Caliburn.Micro.dll 的引用添加到您的项目中：

```
<Window x:Class="WpfApplication.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:cal="http://www.caliburnproject.org" Title="MainWindow" Height="400" Width="400">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>

    <ListBox Grid.RowSpan="2" ItemsSource="{Binding Customers}" DisplayMemberPath="Name"/>

    <DockPanel Grid.Column="1" LastChildFill="False">
        <Button DockPanel.Dock="Left" Content="&lt;"
                    cal:Message.Attach="[Event Click] = [MoveSelectionLeft]"/>
        <Button DockPanel.Dock="Right" Content="&gt;"
                    cal:Message.Attach="[Event Click] = [MoveSelectionRight]"/>
    </DockPanel>

    <StackPanel Grid.Row="1" Grid.Column="1">
        <DockPanel>
            <TextBlock MinWidth="50" Text="Name" Margin="0,0,5,0"/>
            <TextBox Text="{Binding Customers/Name}"/>
        </DockPanel>
        <DockPanel>
            <TextBlock MinWidth="50" Text="Age" Margin="0,0,5,0"/>
            <TextBox Text="{Binding Customers/Age}"/>
        </DockPanel>
    </StackPanel>
</Grid> 
```

我们有一个绑定到 MyViewModel 的 Customers 属性的 ListBox，其 Click 事件已附加到 MoveSelection 方法的按钮，并且 Customer 字段绑定到 Customers/ 属性，该属性是 Customers.CurrentItem 的缩写。

假设这是 WPF 应用程序的主窗口，我们接下来需要做的就是将其 DataContext 设置为 MyViewModel。这可以通过在代码隐藏的构造函数中添加以下内容来完成：

```
public MainWindow()
{
    this.DataContext = new MyViewModel();

    InitializeComponent();
} 
```

现在应该设置所有内容，以便您可以构建和运行应用程序。它看起来像这样：

![截屏](../Images/67c2e5079a36c098590d1972f8ca2f00.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T07:34:56.167

我不是 WPF 专家，但我认为如果不在类后面的代码中编码，这是不可能的。最简单的方法是创建一个包含当前列表项并绑定到控件的属性。使用事件处理程序或命令，如果您使用 MVVM，则可以将列表项设置为下一个或上一个。

对于绑定问题，我非常推荐 wpf 绑定备忘单： [http ://www.nbdtech.com/Free/WpfBinding.pdf](http://www.nbdtech.com/Free/WpfBinding.pdf)

# c++ - 如何在 tcp 客户端模式下固定接收端口？

> ID：12870414
> 
> 赞同：0
> 
> 时间：2012-10-13T05:57:41.557
> 
> 标签：c++, sockets, tcp, mfc

通常情况下，当 tcp 客户端连接到 tcp 服务器时，它有一个随机的接收端口。所以我想知道在 tcp 客户端（windows socket，mfc）中修复这个端口的任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:13:28.877

您可以在调用[Connect()之前调用](http://msdn.microsoft.com/en-us/library/dxt965kz.aspx)[Create()](http://msdn.microsoft.com/en-us/library/7h61d04c.aspx)来指定端口：

```
CSocket yourSocket;
yourSocket.Create(sourcePort);
yourSocket.Connect(targetHost, targetPort); 
```

# api - 如何获取访问令牌以访问 Pinterest Api

> ID：12870416
> 
> 赞同：2
> 
> 时间：2012-10-13T05:58:05.513
> 
> 标签：api, pinterest

我在 stackoverflow 上搜索并搜索过，但找不到答案。

我正在编写一个应用程序，这需要访问 Pinterest API。这是我的 github 仓库：[https ://github.com/kellan/pinterest.api.php](https://github.com/kellan/pinterest.api.php)

```
$p = new Pinterest_API();
$p->fetch_access_token($client_id, $client_secret, $username, $password);
$resp = $p->some_api_call($args); 
```

但我不知道在哪里可以找到 $client_id 和 $client_secret？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-09T13:46:13.010

转到此处，单击***Generate***，并获取访问令牌：[https ://developers.pinterest.com/tools/access_token/](https://developers.pinterest.com/tools/access_token/)

示例：使用获取状态：[https ://api.pinterest.com/v1/me/pins/?access_token=TOKEN&fields=id,creator,note&limit=2](https://api.pinterest.com/v1/me/pins/?access_token=TOKEN&fields=id,creator,note&limit=2)

有关额外参数和请求，请参阅文档：[https ://developers.pinterest.com/docs/api/overview/](https://developers.pinterest.com/docs/api/overview/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:32:39.580

是的，Pinterest API 已被删除。我所有的应用程序也受到了影响。

这个 v1 api 链接现在只显示连字符，它的计数破折号

[http://api.pinterest.com/v1/urls/count.json?callback=receiveCount&url=http://facebook.com](http://api.pinterest.com/v1/urls/count.json?callback=receiveCount&url=http://facebook.com)

我们只能等它回来了。我已为您的问题添加了书签，并会在它回来时尝试更新您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T06:05:18.117

据我所知，Pinterest API 已被删除。我什至收到了关于我的 Pinterest Chrome 扩展程序的删除通知。

# node.js - Node.js 和 mongoose (mongodb) 错误无法读取属性 '' of null

> ID：12870419
> 
> 赞同：9
> 
> 时间：2012-10-13T05:58:26.763
> 
> 标签：node.js, mongodb

我有一个 findOne 查询，当我验证它是否返回一个空文档时，我会收到一条错误消息，提示“无法读取属性 'username' of null”。当我尝试在 if(!doc.username) {

我的代码：

```
function checkAccDb(username, password) { console.log(2);
    /* Check if accounts exists in db */
    db.findOne({username: username}, function(err, doc){ console.log(3);
        if(err) throw err;

        if(!doc.username) {
            add2stack(username, password);
        }
        else if(doc.status == 200) {
            end(username, password, 1000);
        }
        else if(doc.status == 401) {
            if(doc.password == password)
                end(username, password, 401);
            else
                add2stack(username, password);
        }
        else {
            add2stack(username, password);
        }
    });
} 
```

谁能解释一下这里发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-13T06:39:44.887

查询成功，但未找到任何匹配项，因此`err`和`doc`均为空。您需要检查是否`doc`为 null 并适当地处理这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T11:48:42.393

一个典型的实现是这样的

```
db.findOne({username: username},function(err, doc) {
  if (err) {
    // handle error
  }
  if(doc != null)
  {
    if(!doc.username)
    {
        //handle case
    }
    else
    {
        //handle case
    }
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-23T19:25:15.047

To get the solution check following things. 1\. Check model name which you have defined or the name of the folder where all your models are present must be right because in my case in models folder where i have defined all my models i was using different model name so as there was no model named that, thats'y i was getting the error. 2\. Check Schema name or folder name where it is located.

# ruby-on-rails - has_many 关系计数的 Rails 模型验证

> ID：12870426
> 
> 赞同：0
> 
> 时间：2012-10-13T05:58:59.107
> 
> 标签：ruby-on-rails, validation, activerecord, has-many-through

在我的 Rails 应用程序中，我有 Card 和 Pack 模型，以及它们之间的多对多关系。我想验证一个包是用 3 张卡片创建的。该包使用复选框实现与卡片相关联。

**我的问题：**运行验证时，似乎没有进行任何关联。验证失败，打印输出为“卡片数为：0”。为什么在验证运行时没有关联？（注意：删除验证后关联是正确的，因此代码有效，只是验证无效）

```
# Pack Model
class Pack < ActiveRecord::Base
  has_many :pack_elements
  has_many :cards, :through => :pack_elements
  validate :validate_number_of_cards

  def validate_number_of_cards
    puts "cards count is: " + cards.count
    errors.add(:cards, "A pack must contain exactly 3 cards.") if (cards.count != 3)
  end
end 
```

其他模型与您期望的一样，但没有验证。这是 Packs 表单，它显示所有卡片，每个卡片旁边都有一个复选框，还有一个提交按钮。我想测试这些框中的三个是否被选中，并且我希望测试在模型中，而不是在表单中。

```
# packs/_form.html.erb
<%= form_for(@pack) do |f| %>

<div class="field">
  <% @cards.each do |card| %>
      <%= hidden_field_tag "pack[card_ids][]", nil %>
      <%= check_box_tag "pack[card_ids][]", card.id, @pack.card_ids.include?(card.id), id: dom_id(card) %>
      <%= label_tag dom_id(card), card.description %>
      <hr/>
  <% end %>
</div>

<div class="actions">
  <%= f.submit %>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T03:55:07.797

上面实现中的问题是我使用了*count*方法，它进行数据库查找。在验证通过之前不会保存数据库，因此这永远不会起作用。我将实现更改为：

```
def validate_number_of_cards
  puts "Count shows there are " + cards.count + " cards."  # always returns zero
  puts "Size shows there are " + cards.size + " cards."
  errors.add(:cards, "A pack must contain exactly 3 cards.") if (cards.size != 3)
end 
```

它使用*size*方法，它只查看内存中的内容。这很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:28:00.737

验证在包装模型中。因此在保存 Pack Model 时会触发验证。

您需要在 Card 模型的保存中处理此验证。

# ruby-on-rails - 在 View Rails 中计数

> ID：12870431
> 
> 赞同：6
> 
> 时间：2012-10-13T06:00:16.670
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, count, each

在我的显示视图中，我有一个我正在循环的项目列表。这一切都很好。但是，我想在每个项目的前面获得一个数字，该数字随着每个循环而增加（ i = 0, i++ 你知道演习）。

现在，我如何在 Rails 中做到这一点？这就是我现在得到的：

```
<% i = 0 %>
<% @trip.triplocations.each do |tl| %>
  <article id="<%= dom_id(tl)  %>">
    <strong> <%= tl.title %> </strong>
      <p>
        <%= tl.description %>
      </p>
  </article>
<% end %> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-13T06:07:52.627

使用[**#each_with_index**](http://apidock.com/ruby/Enumerable/each_with_index)而不是在视图中实例化变量！

```
<% @trip.triplocations.each_with_index do |tl, i| %>
  <article id="<%= dom_id(tl) %>">
    <strong> <%= i %>. <%= tl.title %> </strong>
      <p>
        <%= tl.description %>
      </p>
  </article>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:07:42.533

可能你想要这种代码。

```
<% i = 0 %>
<% @trip.triplocations.each do |tl| %>
    <article id="<%= dom_id(tl)  %>">
        <strong> <%= tl.title %> </strong>
        <p>
            <%= i %>
            <%= tl.description %>

        </p>
    </article>
    <% i = i + 1 %> 
<% end %> 
```

笔记：

你可以把代码

```
<%= i %> 
```

循环内你想要的任何地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T06:15:51.980

Ruby中没有`++`运算符。相反，您使用`+= 1`：

```
array = 'a'..'d'

i = 0
array.each do |element|
  puts "#{i} #{element}"
  i += 1
end 
```

印刷

```
0 a
1 b
2 c
3 d 
```

但是，您不应该这样做，因为已经有一种方便的方法：

```
array = 'a'..'d'

array.each_with_index do |element, i|
  puts "#{i} #{element}"
end 
```

还有另一种特定于 Rails 的方法。如果您使用部分渲染集合，您将有 object_counter 变量可用，其中“object”是您的模型名称。例如：

```
<%= render @trip.triplocations %>

<% # in views/triplocations/_triplocation.html.erb %>
<%= triplocation_counter %>
<%= triplocation.title %> 
```

# java - Java中二维数组的总和

> ID：12870433
> 
> 赞同：0
> 
> 时间：2012-10-13T06:00:28.040
> 
> 标签：java

这是一个家庭作业问题，我仍然是 java 的新手。编写一个代码段，计算标记中所有值的总和。

这是我的答案，它有编译错误。请帮忙

```
class myArray{

    public static void main(String args []){

        int [] [] marks = {{1,2,3,4,5}, {6,7,8,9}, {10,11,12}};
        for(int i = 0; i<marks.length; i++){
            int sum = 0;
            for(int j = 0; j <marks[i].length; j++) {
                sum = sum + makrs[j][i];
            }
        }
        System.out.println(sum);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:07:22.460

有两种语法错误和一种类型。

1.  根据需要将其移到循环`int sum =0;`上方以打印值`for`
2.  正确的分数阅读索引从`marks[j][i]`到`marks[i][j]`
3.  更正上述同一行中的错字 ( `sum = sum + makrs[j][i];)`。您已键入`makrs`代替`marks`

    ```
    int [] [] marks = {{1,2,3,4,5}, {6,7,8,9}, {10,11,12}};         

    int sum = 0;
    for(int i = 0; i<marks.length; i++){
        for(int j = 0; j <marks[i].length; j++){
            sum = sum + marks[i][j];
        }
    }
    System.out.println(sum); 
    ```

# linux - Linux 电源管理 API

> ID：12870436
> 
> 赞同：3
> 
> 时间：2012-10-13T06:01:02.610
> 
> 标签：linux, api, power-management

Linux 中有电源管理 API 吗？如果是这样，那是什么？

我希望能够对我的 C 应用程序进行编程，以防止它在运行时挂起/休眠。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-04T05:45:57.197

[DBus](http://www.freedesktop.org/wiki/Software/dbus/)`org.freedesktop.PowerManagement`在总线中提供了一些基本的电源管理功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T06:29:06.253

如果要在C程序中挂起linux系统，可以在属性文件“/sys/power/state”中写入“mem”或“disk”。写“mem”意味着挂起到ram，写“disk”意味着挂起到磁盘。

# clojure - 覆盖自定义序列的“drop”

> ID：12870437
> 
> 赞同：1
> 
> 时间：2012-10-13T06:01:34.567
> 
> 标签：clojure, overriding

简而言之：在 Clojure 中，有没有办法在我编写的自定义序列类型上从标准序列 API（未在 ISeq、IndexedSeq 等任何接口上定义）重新定义函数？

* * *

## 1\. 庞大的数据文件

我有以下格式的大文件：

*   `n`包含条目数的 long（8 个字节）
*   `n`条目，每个条目由 3 个 long 组成（即 24 个字节）

## 2.自定义序列

我想对这些条目进行排序。由于我通常不能一次将所有数据保存在内存中，并且我希望对其进行*快速*顺序访问，因此我编写了一个类似于以下内容的类：

```
(deftype DataSeq [id
                  ^long cnt
                  ^long i
                  cached-seq]
  clojure.lang.IndexedSeq

  (index [_]     i)
  (count [_]     (- cnt i))
  (seq   [this]  this)
  (first [_]     (first cached-seq))
  (more  [this]  (if-let [s (next this)] s '()))

  (next [_] (if (not= (inc i) cnt)
              (if (next cached-seq)
                (DataSeq. id cnt (inc i) (next cached-seq))
                (DataSeq. id cnt (inc i)
                          (with-open [f (open-data-file id)]
                             ; open a memory mapped byte array on the file
                             ; seek to the exact position to begin reading
                             ; decide on an optimal amount of data to read
                             ; eagerly read and return that amount of data
                          )))))) 
```

主要思想是提前读取列表中的一堆条目，然后从该列表中消费。每当缓存被完全消耗时，如果还有剩余条目，则从新缓存列表中的文件中读取它们。就那么简单。

为了创建这样一个序列的实例，我使用了一个非常简单的函数，例如：

```
(defn ^DataSeq load-data [id]
  (next (DataSeq. id (count-entries id) -1 [])))
; count-entries is a trivial "open file and read a long" memoized 
```

如您所见，数据的格式使我能够`count`非常简单有效地实现。

## 3.`drop`可能是 O(1)

本着同样的精神，**我想重新实现`drop`**. 这些数据文件的格式允许我`drop`在 O(1) 中重新实现（而不是标准的 O(n)），如下所示：

*   如果丢弃的缓存项少于剩余的缓存项，则从缓存中丢弃相同的数量并完成；

*   如果丢弃超过`cnt`，则只返回空列表。

*   否则，只需找出数据文件中的位置，直接跳到该位置，然后从那里读取数据。

我的困难在于它`drop`的实现方式与`count`, `first`,`seq`等不同。后面的函数调用一个类似命名的静态方法，`RT`该方法又调用我上面的实现，而前者`drop`不检查它被调用的序列提供了一个自定义实现。

显然，我可以提供一个名为 any 的函数，但`drop`它完全符合我的要求，但这会迫使其他人（包括我未来的自己）记住使用它而不是`drop`每次都使用它，这很糟糕。

### 所以，问题是：**是否可以覆盖的默认行为`drop`？**

## 4\. 一种解决方法（我不喜欢）

在写这个问题时，我刚刚想出了一个可能的解决方法：让阅读更加懒惰。自定义序列只会保留一个索引并推迟读取操作，这只会在`first`被调用时发生。问题是我需要一些可变状态：第一次调用`first`会导致一些数据被读入缓存，所有后续调用都会从这个缓存返回数据。会有类似的逻辑`next`：如果有缓存，就`next`它；否则，不要费心填充它——它会在`first`再次调用时完成。

这将避免不必要的磁盘读取。然而，这仍然不是最优的——它仍然是 O(n)，它很容易是 O(1)。

无论如何，我不喜欢这种解决方法，我的问题仍然悬而未决。有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T09:27:39.633

目前，我实施了上述解决方法。它通过将读取延迟到第一次调用来工作`(first)`，这会将数据存储在本地可变缓存中。

请注意，此**版本使用`unsynchronized-mutable`**（以避免每次调用 volatile-reads`first`和第一次调用 volatile-write ）。换句话说：**不要在线程之间共享**。为了使其线程安全，请改用（这会导致小的性能损失）。它仍然可能导致不同线程多次读取相同的数据。为避免这种情况，请改回并确保在读取或写入字段时使用。`next``more``first`**`volatile-mutable``unsynchronized-mutable``(locking this ...)``cache`**

 ****编辑：**经过一些（非严格）测试后，似乎引入的开销`(locking this ...)`类似于不必要的磁盘读取引入的开销（请注意，我正在从快速 SSD 读取，可能已经缓存了部分数据） . 因此，目前（以及对于我的特定硬件）最好的线程安全解决方案是使用易失性缓存。

```
(deftype DataSeq [id
                  ^long cnt
                  ^long i
                  ^{:unsynchronized-mutable true} cache]
  clojure.lang.IndexedSeq

  (index [_]    i)
  (count [_]    (- cnt i))
  (seq   [this] this)
  (more  [this] (if-let [s (.next this)] s '()))
  (next  [_]    (if (not= (inc i) cnt)
                  (DataSeq. id cnt (inc i) (next cache))))
  (first [_]
    (when-not (seq cache)
      (set! cache
            (with-open [f (open-data-file id)]
              ; open a memory mapped byte array on the file
              ; seek to the exact position to begin reading
              ; decide on an optimal amount of data to read
              ; eagerly read and return that amount of data
            )))
    (first cache))) 
```

仍然困扰我的是，我必须使用可变状态来停止`drop`（即，“出去，你这无用的数据”）从磁盘读取......**

# c - 简单的 C 计算器错误

> ID：12870446
> 
> 赞同：0
> 
> 时间：2012-10-13T06:02:57.963
> 
> 标签：c, scanf, calculator

我试图制作一个简单的 c 计算器，因为我是一个新手，并认为这将是一个好主意。这是我的代码：

```
#include <stdio.h>
main()
{
 char b;
 int a,c,d;
 printf("Please enter your first number: ");
 scanf("%d",&a);
 printf("Please enter your second number: ");
 scanf("%d",%c);
 printf("Enter your operation");
 scanf("%c",&b);
 if (b == 'a')
 {
     d = a + c;
     printf("The answer is: %d",d);
 }
} 
```

当我编译代码时，这是我得到的错误/警告：

```
D:...|4|warning: return type defaults to 'int'|
D:...||In function 'main':|
D:...|10|error: expected expression before '%' token| 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T06:04:12.550

将中的更改`%`为 a ：`&``scanf`

```
scanf("%d", &c);
            ^ 
```

此外，而不是`main`你想要的`int main`，你可能应该在最后返回一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-29T19:41:11.773

比较这两行，你告诉我们有什么区别：

```
scanf("%d",&a);
scanf("%d",%c); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-29T19:27:30.707

使用 & 运算符而不是 % 运算符。& 运算符用于访问特定变量的地址，因此也称为地址运算符。有关详细信息，请访问： [https ://www.techopedia.com/definition/25580/操作员地址--c](https://www.techopedia.com/definition/25580/address-of-operator--c)

# ruby-on-rails - 我在哪里放自定义 capistrano 食谱？

> ID：12870449
> 
> 赞同：1
> 
> 时间：2012-10-13T06:03:40.537
> 
> 标签：ruby-on-rails, capistrano

我正在尝试使用 capistrano 管理 database.yml，遵循这篇文章：

[http://www.simonecarletti.com/blog/2009/06/capistrano-and-database-yml/](http://www.simonecarletti.com/blog/2009/06/capistrano-and-database-yml/)

我遇到了麻烦，包括上面帖子中使用的代码。我已将此文件命名为 cap_database.rb，但我不知道将它保存在哪里，也不知道如何在 deploy.rb 中加载它。

我尝试将它放在 lib/capistrano 中，并使用以下行将其添加到 deploy.rb：

```
require 'capistrano/cap_database' 
```

然后我得到这个：

```
$ cap deploy:db

    /home/daniel/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- capistrano/cap_database (LoadError) 
```

为什么找不到文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T17:20:06.663

对于宝石级别的配方，将您的自定义配方放入`GEMDIR/CAPGEMDIR/lib/capistrano/recipes`

如果您想在您的应用程序中包含其他文件`deploy.rb`，那么您可以使用以下方法：

[在 capistrano deploy.rb 中需要找不到文件](https://stackoverflow.com/questions/5365950/require-in-capistrano-deploy-rb-cannot-find-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:00:29.377

这只是一个镜头，但试试

```
bundle exec cap deploy:db 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T11:22:23.440

我知道这有点晚了，但无论如何。

如果你存储`cap_database.rb`在`config/recipes`，它可以包含在`deploy.rb`使用中`load config/recipes/cap_database`。

# ios - 存储 NSString 的最佳方式是什么？

> ID：12870454
> 
> 赞同：0
> 
> 时间：2012-10-13T06:04:14.527
> 
> 标签：ios, cocoa-touch, serialization, nsstring, plist

我正在 Xcode 4 中制作一个需要保存一个`NSString`变量的 iOS 应用程序。有谁知道使用 .plist 文件是否是最好的方法，如果是这样，你需要什么代码来存储和检索`NSString`s？

任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T06:10:50.947

最好的地方是将其存储在`NSUserDefaults`：

```
[[NSUserDefaults standardUserDefaults] setObject:@"My String" forKey:@"kMyStringKey"]; 
```

然后调用它：

```
lblMyLabel.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"kMyStringKey"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:11:39.727

有多种存储方法，`NSString`因为需求不同。在这种情况下，Plist 是不必要的（基于描述）。

**选项 A**您可以只使用：`- [NSString writeToURL:atomically:encoding:error:]`。在这种情况下，您只需要记住保存它的文件 URL 和编码。

**选项 B**另一个选项是通过`NSCoding`- 这允许`NSString`选择它找到的最好的序列化表示，给定它表示的字符串。

# android - 如何禁用相对布局弹出窗口后面的视图 - android

> ID：12870464
> 
> 赞同：6
> 
> 时间：2012-10-13T06:06:53.570
> 
> 标签：android

我有一个相对布局弹出窗口，它显示在按钮单击上。我在同一屏幕上有一些其他视图，弹出窗口覆盖了它们。但是当我点击弹出窗口时，后面的控件/视图被点击了。如何禁用此功能？

（我有一个解决方案是获得所有的意见和`setClickable = false`。）

但我正在寻找其他一些解决方案，比如将注意力集中在当前视图上，以便将其他视图设置为禁用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-16T18:23:24.327

I had this same problem, and finally **instead** of setting everything **behind** as clickable=false, I simply added clickable=**true** to **the popup layout** and it fixed it. The clickable views behind the popup no longer respond to click events through the popup. :) And I didn't even have to change my popup into a dialog. :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T09:39:38.967

将 setOnClickListener() 激活到 RelativeLayout 对象。这会捕获所有点击并防止背后的控件/视图被点击。

例如：-

```
 RelativeLayout rObj = (RelativeLayout) findViewById(R.id.yourRelativeLayout);
    rObj.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // filter touches when underlying view is Obscured by this view.
        }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T12:57:58.210

使用对话框。我认为这是弹出要求的最佳解决方案。

```
final Dialog dialog = new Dialog(NewEntryActivity.this);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setContentView(R.layout.interview_tab6_popup_drink_containg_alcohol);
dialog.setCancelable(true);
dialog.setCanceledOnTouchOutside(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T06:53:36.747

为此，您`RelativeLayout`可以`BringToFront()`

并提出其他意见`SetEnabled(false)`

# mysql - mysql 在表上插入后触发插入和更新

> ID：12870465
> 
> 赞同：-1
> 
> 时间：2012-10-13T06:07:01.737
> 
> 标签：mysql

```
create table Test1
(
WRO varchar(10),
Test_No varchar(10),
TestDate datetime
);

insert into Test1(WRO,TestDate) values('T0001',now());

create table Test2
(
WRO varchar(10),
Test_No varchar(10),
Test2Date datetime,
TestAmount varchar(10)
); 
```

在 Test2 表 Test_No 上插入后，我必须在 Test1 Test_No 上更新和插入，两者都有共同的字段 WRO。

```
insert into Test2 values('DSK','400',now(),3000);
insert into Test2 values('T0001','200',now(),3000); 
```

如果没有 test2 表与 test1 不匹配，则应在 test1 表中触发插入查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:10:59.710

我希望我能正确理解你。

如果新行的字段不存在，则表上的以下触发器`Test2`将向表中插入新行。`Test1``WRO``Test1`

```
 CREATE TRIGGER `myTrigger` AFTER INSERT ON `Test2`
 FOR EACH ROW BEGIN
    if not exists (select 1 from Test1 where WRO = new.WRO) then
         insert into Test1 (WRO, Test_No) values (new.WRO, new.Test_No);
    end if;   
 END 
```

# php - 使用这个自定义散列函数，我是否缺少任何明显的安全漏洞？

> ID：12870468
> 
> 赞同：3
> 
> 时间：2012-10-13T06:07:21.283
> 
> 标签：php, security, function, md5

```
<?php
function md7($text, $len)
{
  if($text)
  {
   $split = str_split(md5($text).md5(strlen($text)).md5($len), 5);
    foreach($split as $key=>$value)
    {
      $md5 = $md5.md5($value);
    }
    $split2 = str_split($md5);
    foreach($split2 as $kl=>$vl)
    {
      if($kl < $len)
      {
        $digest = $digest.$split2[$kl];
      }   
    }
    return $digest;
  }
} // end md7 function
?> 
```

我创建了这个函数来使用 md5 和可变长度哈希，我相信这会减少发生冲突的机会，我已经测试了 MD5 冲突的示例，它不会为这个函数创建一个冲突，我相信这个函数不易受到彩虹表攻击。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T06:14:42.550

以下是一些明显的安全漏洞：

```
if($text) 
```

两者都`"0"`返回`""`相同的哈希值。

```
foreach($split as $key=>$value)
{
  $md5 = $md5.md5($value);
} 
```

您正在散列第一个散列的每个字母。`$len <= 32`这样一来，对于所有第一个字母相同的字符串，您就可以拥有完全相同的哈希值，`md5($value)`基本上将熵从 128 位降低到 4。这是所有 16 个哈希值的完整列表，其中 $len = 32:

```
8f14e45fceea167a5a36dedd4bea2543
92eb5ffee6ae2fec3ad71c777531578f
a87ff679a2f3e71d9181a67b7542122c
e4da3b7fbbce2345d7772b0674a318d5
c81e728d9d4c2f636f067f89cc14862c
8277e0910d750195b448797616e091ad
0cc175b9c0f1b6a831c399e269772661
45c48cce2e2d7fbdea1afc51c7c6ad26
4a8a08f09d37b73795649038408b5f33
e1671797c52e15f763380b45e841ec32
eccbc87e4b5ce2fe28308fd9f2a7baf3
c4ca4238a0b923820dcc509a6f75849b
8fa14cdd754f91cc6554c9e71929cce7
c9f0f895fb98ab9159f51fd0297e236d
1679091c5a880faf6fb5e6087eb1b2dc
cfcd208495d565ef66e7dff9f98764da 
```

请注意，选择`$len > 32`. 您仍将只使用原始散列的第二个字母，这使您的熵增加了 4 位（现在最多 8 位），相当于 256 个不同的散列。

我很确定您需要 32^32 的长度才能匹配原始 md5 的熵。这是一个非常大的数字。

* * *

如果您想要安全性，请使用定义明确且经过良好测试的散列函数。PHP在[散列函数中有一个](http://php.net/hash)[sha1](http://php.net/sha1)函数以及一堆其他函数。

哈希函数通常由加密社区创建和审查。它们比你能想出的几乎任何简单的 hack 都要好得多，所以不要实现你自己的散列函数，而是使用可用的散列函数之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T07:23:58.793

除了你的函数不返回任何`""`和`"0"`，最终的哈希值只包含十六进制字符的 MD5 哈希值`0`–<code>9 和`a`–<code>f，它们是：

```
string(32) "cfcd208495d565ef66e7dff9f98764da"
string(32) "c4ca4238a0b923820dcc509a6f75849b"
string(32) "c81e728d9d4c2f636f067f89cc14862c"
string(32) "eccbc87e4b5ce2fe28308fd9f2a7baf3"
string(32) "a87ff679a2f3e71d9181a67b7542122c"
string(32) "e4da3b7fbbce2345d7772b0674a318d5"
string(32) "1679091c5a880faf6fb5e6087eb1b2dc"
string(32) "8f14e45fceea167a5a36dedd4bea2543"
string(32) "c9f0f895fb98ab9159f51fd0297e236d"
string(32) "45c48cce2e2d7fbdea1afc51c7c6ad26"
string(32) "0cc175b9c0f1b6a831c399e269772661"
string(32) "92eb5ffee6ae2fec3ad71c777531578f"
string(32) "4a8a08f09d37b73795649038408b5f33"
string(32) "8277e0910d750195b448797616e091ad"
string(32) "e1671797c52e15f763380b45e841ec32"
string(32) "8fa14cdd754f91cc6554c9e71929cce7" 
```

如果我们使用相同的`md7($c, 32)`：

```
NULL
string(32) "4a8a08f09d37b73795649038408b5f33"
string(32) "4a8a08f09d37b73795649038408b5f33"
string(32) "e1671797c52e15f763380b45e841ec32"
string(32) "0cc175b9c0f1b6a831c399e269772661"
string(32) "e1671797c52e15f763380b45e841ec32"
string(32) "c4ca4238a0b923820dcc509a6f75849b"
string(32) "c9f0f895fb98ab9159f51fd0297e236d"
string(32) "4a8a08f09d37b73795649038408b5f33"
string(32) "a87ff679a2f3e71d9181a67b7542122c"
string(32) "cfcd208495d565ef66e7dff9f98764da"
string(32) "45c48cce2e2d7fbdea1afc51c7c6ad26"
string(32) "a87ff679a2f3e71d9181a67b7542122c"
string(32) "c9f0f895fb98ab9159f51fd0297e236d"
string(32) "e1671797c52e15f763380b45e841ec32"
string(32) "c9f0f895fb98ab9159f51fd0297e236d" 
```

再次，`0`返回`NULL`。但更有趣的是 { `1`, `2`, `8`}, { `3`, `5`, `7`} 和 { `c`, `f`} 的字符导致相同的哈希值。这是因为它们的 MD5 哈希值确实以相同的八位字节开头。当您使用这些散列来构建最终的 MD7 散列时，它们生成的散列的前 32 个十六进制字符也是相同的。

所以对于 ≤ 32 的长度，只有 16 个可能的 MD7 散列，对于 ≤ 64，有 16 ^(2 个)MD7 散列，依此类推。最大长度为 3·32·32=3072 并且可能的 MD7 哈希值的数量为 16 ^(3·32)。

但是最后的 3072 个字符长的 MD7 哈希没有 16^192 熵。因为最后 1024 个字符是从已知的 MD7 哈希的长度推导出来的，所以只剩下 2048 个未知字符。

由于哈希循环可以反转，因此也可以获得文本及其长度的初始 MD5。

这是一个例子：

```
function md7_info($hash) {
    $hashlen = strlen($hash);

    $md5_to_hex = array();
    foreach (str_split('0123456789abcdef') as $c) $md5_to_hex[md5($c)] = $c;

    $md5_text = '';
    foreach (str_split(substr($hash, 0, 1024), 32) as $h) $md5_text .= $md5_to_hex[$h];

    $md5_textlen = '';
    foreach (str_split(substr($hash, 1024, 1024), 32) as $h) $md5_textlen .= $md5_to_hex[$h];

    return array($md5_text, $md5_textlen, $hashlen);
} 
```

原始文本长度的MD5也可以反转。所以最后剩下的信息就是MD5和文本长度。没有获得更多的安全性。事实上，文本长度的知识确实揭示了额外的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T07:03:54.487

这里有一个问题可能值得考虑，但我无法轻松分析 md5 哈希。

让我们分两部分来考虑，前半部分接受输入，对其进行散列处理，并将其长度和返回的长度。我不确定与字符串连接的数组的效果是什么，但我会假设它只是为每个实例复制。

然后你遍历每一个并建立一个新的值：`$md5 = $md5.md5($value)`. 鉴于您返回的字符串最多为 $len，这似乎是最大的弱点，因为您要返回字符串中的前 $len 个字节。

几个效果： $md5 主要取决于输入的开头。尝试类似的东西

```
md7("aaaaaaaaaaaaaaaaaaaaaaaa", 16)
md7("aaaaaaaaaaaaaaaaaaaaaaab", 16) 
```

看看你是否得到类似的结果。我还没有尝试过，但我的直觉是你没有像你想要的那样正确混合整个输入。

# c - 如何在C语言中使用libxml2获取（读取）xml中标签的属性值

> ID：12870474
> 
> 赞同：4
> 
> 时间：2012-10-13T06:08:23.973
> 
> 标签：c, parsing, libxml2

以下是我的 xml 的片段

```
<product id="1650379193">
  <feature id="37515"/>
</product> 
```

在这里，我想在 product 和 feature 两种情况下都获取属性 id 的值。如何在 C 语言中使用 libxml2 来做到这一点。

# paypal - 使用php的Paypal自定义变量解决方案

> ID：12870476
> 
> 赞同：0
> 
> 时间：2012-10-13T06:08:45.020
> 
> 标签：paypal

我正在尝试使用贝宝作为我网站的付款方式。

我的网站只销售一种虚拟货币，比如在线游戏中的“钻石”。

因此，在阅读后我开始使用 Express Checkout for Digital Goods，对吗？还是我必须使用其他付款方式？

那么我的问题是当使用 Express Checkout for Digital Goods 时，如何传递自定义变量？

假设我想将数据库中的 user_id、diamond_id 和其他一些变量支付给 paypal api。似乎贝宝不支持自定义变量传递 api 调用。我想在用户完成付款后，Paypal 通知我的服务器通过 user_id 和我传递的一些其他变量完成付款，这样我很容易知道细节。

搜索后我找到了一些解决方案，

第一个解决方案是将“TOKEN”（从“SetExpressCheckout”方法生成）和我属于TOKEN的自定义变量存储在数据库中，然后在支付完成后paypal将通知我的服务器之前保存的相同TOKEN。所以我会根据TOKEN查询。第二种解决方案是在 RETURNURL 变量[http://www.mysite.com/successpayment.php?user_id=13&diamond_id=88](http://www.mysite.com/successpayment.php?user_id=13&diamond_id=88)中使用 get 样式所以我很容易抓住 GET 变量。哪种解决方案是正确的？有什么解决办法吗？以及如何确保付款确认的安全，我的意思是如果有人知道并破解了我的返回网址。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:30:10.403

整个过程有两个部分能够成功识别您的订单：

1.  要在用户通过成功或取消 URL 重定向回来时识别您的订单，只需通过 URL 的查询字符串传递订单 ID。

2.  当 Paypal 通过 IPN 发送有关交易和相关事件（退款、撤销、争议等）的通知时识别您的订单：Paypal 确实支持传递变量，它允许您将 IPN 关联到数据库中的订单记录。

    *   对于快速结帐，您在 SetExpressCheckout 调用中设置 PAYMENTREQUEST_0_INVNUM
    *   如果您正在创建定期配置文件，则该参数在 CreateRecurringPaymentsProfile 调用中被命名为 PROFILEREFERENCE
    *   当您收到 IPN 时，发票分别作为“发票”或“rp_invoice_id”传递

（不过，我的一般建议是：仅在确实需要时才使用 Paypal）

# c# - 后期如何回滚事务？

> ID：12870477
> 
> 赞同：1
> 
> 时间：2012-10-13T06:09:02.177
> 
> 标签：c#, asp.net, .net, sql-server-2008

我有一个数据输入 ASP.NET 应用程序。在一个完整的数据输入期间，会发生许多事务。我想跟踪所有这些交易，以便如果用户想放弃数据输入，我一直记录的所有交易都可以回滚。

SQL 2008，框架版本为 4.0，我使用的是 c#。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T06:18:02.000

对于刚接触 Web 开发的人来说，这始终是一个艰难的教训。但这里是：

## 每个往返 Web 请求都是一个单独的、独立的执行线程

这意味着，简单地说，每次您提交页面请求（单击按钮，导航到新页面，甚至刷新页面）时，它都可以在与前一个不同的线程上运行。更重要的是，即使您确实获得了两次相同的线程，在您两次请求之间的时间内，该线程可能已经处理了其他几个 Web 请求。

这使得跨越多个 Web 请求的简单事务实际上是不可能的。

这是您应该记住的另一个概念：

## 事务旨在用于批处理操作，而不是交互式操作。

这意味着事务是短暂的，并且包含几个按顺序（或同时）执行的操作，其中所有操作都是原子的，并且旨在全部完成或全部失败。事务通常不设计为长期存在的（意味着等待用户以交互方式决定各种操作）。

**Web 应用程序不是桌面应用程序。** 他们不像他们那样运作。当你做网络应用时，你必须改变你的想法。最大的教训是，每个请求都是一个独立的执行单元。

现在，在上面，我说的是“简单事务”，也称为轻量级或本地事务。还有所谓的分布式事务，使用这些需要分布式事务协调器。MSDTC 非常常用。但是，DT 的执行速度比 LWT 慢得多。此外，他们要求将基础设施设置为使用 DTC。

可以使用 DTC 跨越 Web 请求上的事务。这是通过在分布式事务中“登记”来完成的，然后以某种方式在请求之间共享此事务标识符。但这需要大量的设置和处理工作，并且有很多容易出错的情况。如果您有其他选择，这不是您想做的事情。

一般来说，最好将数据添加到一个或多个临时表中，然后在最终保存完成后，将该数据传输到永久表中。另一种选择是维护一些状态（例如使用 ViewState 或 Session）来跟踪更改。

一种流行的方法是使用 JavaScript 在客户端执行操作，然后在完成后将所有更改提交给服务器。但是，如果您需要导航到不同的页面，这很难实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T06:16:59.420

从您的问题来看，当用户行使回滚选项时，事务似乎已完成。在这种情况下，我怀疑 DBMS 的事务回滚语义是否可用。因此，我将在应用层提供如下语义：

1.  任何可以对数据库执行的原子操作都应该封装在一个[`Command`](http://en.wikipedia.org/wiki/Command_pattern)对象中。每个命令都将实现 undo 方法，该方法将恢复其 execute 方法执行的操作。
2.  每个事务将包含作为其一部分运行的命令列表。事务按原样保留，以供将来进一步操作。
3.  将向用户提供一种查看这些可能被回滚的事务的方法。在用户选择一个事务以将其回滚时，检索与该事务对应的命令列表，并在所有这些命令对象上调用 undo 方法。

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T06:26:43.730

如果您只是在单个保存操作期间管理事务，请使用`TransactionScope`. 但听起来情况并非如此。

如果用户可能希望放弃`n`之前的保存操作次数，则表明该项目可能以草稿形式存在。可能有一份或多份工作草案。随后，必须有一种方法可以隐式或显式地将草案提升为最终版本。想想电子邮件程序如何保存草稿。它实际上并没有发送您的消息，您可以随时放弃它，并且您可以稍后再回忆它。当您*发送*消息时，您已经“提交了事务”。

您还可以添加用户界面以回滚到特定版本。

这将是相当多的工作，但如果您愿意保存和管理同一项目的多个副本，则可以完成。

您可以使用状态标志将相同数据的副本保存在同一模式中以指示它是草稿，或者您可以将数据以中间格式存储在单独的表中。我更喜欢第一种方法，因为它允许使用相同的结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T06:31:31.367

您还可以将它们存储在临时表中，并在“稍后阶段”将这些记录移动到原始表中。

# c# - 如何将 vb .net 函数转换为 c#？

> ID：12870478
> 
> 赞同：1
> 
> 时间：2012-10-13T06:09:39.523
> 
> 标签：c#, c#-4.0

我想将一个 vb .net 函数转换为 c#..我已经转换了它，但它没有按预期返回输出

VB .net 函数

```
 Public Function DecryptString(ByVal EncryptedString As String) As String

    Dim TempLine As String = Nothing
    Dim TempChar As String = Nothing
    Dim FinalStr As String = Nothing
    Dim i As Integer = 0
    Dim value As Integer = 0

    FinalStr = Nothing
    value = 0

    If EncryptedString <> "" Then
        For i = 1 To Len(EncryptedString)
            Try
                TempChar = Mid(EncryptedString, i, 1)
                value = Asc(TempChar)
                value = (value - (120))
                FinalStr = FinalStr & Chr(value)
            Catch
                DecryptString = ""
                Exit Function
            End Try
        Next
        DecryptString = FinalStr
        Exit Function
    End If

    DecryptString = ""
End Function 
```

C# 函数

```
 public string DecryptString(string EncryptedString)
    {
        string substr = null;
        char TempChar; int ExtraChars = 0; string ExtraOnes = "";
        string FinalStr = null;
        int i = 0;
        int value = 0;
        FinalStr = null;
        value = 0;
        if ((EncryptedString != ""))
        {
            for (i = 1; (i <= EncryptedString.Length); i++)
            {
                try
                {
                    substr = EncryptedString.Substring((i - 1), 1);
                    TempChar = Convert.ToChar(substr);
                    value = (value - 120);
                    FinalStr = (FinalStr + ((char)(value)));
                }
                catch (System.Exception e)
                {

                    // TODO: Exit Function: Warning!!! Need to return the value
                    return "";
                }
            }
            return FinalStr;
        }
        return "";
    } 
```

我无法找到为什么它没有恢复正确的输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:25:30.457

我冒昧地清理了代码，因为这样更容易找到错误：

```
Public Function DecryptString(ByVal EncryptedString As String) As String

    Dim FinalStr As New StringBuilder
    Dim value As Integer = 0

    If not String.IsNullOrEmpty(EncryptedString) Then
        For Each c as Char in EncryptedString
            Try
                value = Asc(c)
                value -= 120
                FinalStr.Append(Chr(value))
            Catch
                Return ""
            End Try
        Next
    End If

    Return Finalstr.ToString

End Function 
```

作为 C# 版本：

```
public string DecryptString(string EncryptedString) {

    StringBuilder FinalStr = new StringBuilder();
    int value = 0;

    if (!string.IsNullOrEmpty(EncryptedString)) {

        foreach (char c in EncryptedString) {
            try {
                value = (int)c;
                value -= 120;
                FinalStr.Append(((char)(value)));
            }
            catch (System.Exception e) {
                return "";
            }
        }
    }
    return Finalstr.ToString;
} 
```

看看这是否适合你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T06:30:25.200

尝试这个：

**[VB.Net 到 C# 的转换](http://www.developerfusion.com/tools/convert/vb-to-csharp/?batchId=b5aad756-1a62-4476-b4f4-264e98b31492)**

```
public string DecryptString(string EncryptedString)
{
    string functionReturnValue = null;

    string TempLine = null;
    string TempChar = null;
    string FinalStr = null;
    int i = 0;
    int value = 0;

    FinalStr = null;
    value = 0;

    if (!string.IsNullOrEmpty(EncryptedString)) {
        for (i = 1; i <= Strings.Len(EncryptedString); i++) {
            try {
                TempChar = Strings.Mid(EncryptedString, i, 1);
                value = Strings.Asc(TempChar);
                value = (value - (120));
                FinalStr = FinalStr + Strings.Chr(value);
            } catch {
                functionReturnValue = "";
                return functionReturnValue;
            }
        }
        functionReturnValue = FinalStr;
        return functionReturnValue;
    }

    functionReturnValue = "";
    return functionReturnValue;
} 
```

**参考：**

1.) **[Strings.Asc Method(String)](http://msdn.microsoft.com/en-us/library/78sb8546.aspx)**：返回一个Integer值，表示一个字符对应的字符代码。（命名空间：Microsoft.VisualBasic）

2.) **[C# 中 VB 的 Asc() 和 Chr() 函数的等价物是什么？](https://stackoverflow.com/questions/721201/whats-the-equivalent-of-vbs-asc-and-chr-functions-in-c)**：

对于 Asc() 您可以将 char 转换为 int，如下所示：

```
int i = (int)your_char; 
```

对于 Chr()，您可以像这样从 int 转换回 char：

```
char c = (char)your_int; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T06:27:29.090

问题是你输了（从不使用）`TempChar`。

如果您只是进行此更改，那么您就回家了：

```
value = (TempChar - 120); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T06:28:24.520

您永远不会将字符的值分配给`value`，因此您最终会得到 -120、-240 等。

这是另一种方法，无需所有字符串操作：

```
if (!String.IsNullOrEmpty(EncryptedString))
{
    for (i = 0; i < EncryptedString.Length; i++)
    {
        try
        {
            TempChar = EncryptedString[i];
            value = (int)TempChar - 120;
            FinalStr = FinalStr + (char)(value);
        }
        catch (System.Exception e)
        {
            // TODO: Exit Function: Warning!!! Need to return the value
            return "";
        }
    } 
```

# javascript - 如何删除ajax响应函数中的li元素

> ID：12870479
> 
> 赞同：0
> 
> 时间：2012-10-13T06:09:41.297
> 
> 标签：javascript, python, html, ajax, django

我正在尝试删除`li`作为单击元素的父元素的`a`元素。

这是我的代码：

```
function vanish(id_arg){
        $.ajax({
            url: "/vanish/",
            type: "POST",
            data: {id_to_delete: id_arg},
        }).success(function(data){
           document.getElementsByTagName('li').getElementById(id_arg).remove();
        });
    } 
```

这是我的html：

```
{% for i in p %}
<li id="{{i.id}}"> <a>{{i.name}}</a><a onclick="vanish({{i.id}})" class="item">delete</a></li>    
{% endfor %} 
```

p 是包含名称和 ID 的查询响应。

`vanish()`将从数据库中删除该项目，作为 ajax 响应，我也想从页面中删除该项目。我需要删除而不是隐藏。

我的问题是它没有从页面中删除，我试图`li`用 javascript捕获`remove()`它，但从未找到合适的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:14:15.900

只需先找到孩子并从文档正文中删除即可。

```
 var child = document.getElementById(id_arg);
          document.body.removeChild(child); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T06:15:51.373

下面将选择所有链接并删除其上方的父元素。如果您在页面上有其他链接，我建议您给链接一个类，以便您可以指定要删除的链接。另请注意，在 li 上调用 remove() 也会删除元素内的所有内容。

```
$('#' + id_arg).click(function(){
    $(this).parent().remove();
}); 
```

编辑：快速阅读问题，您可以将其包含在您的ajax调用的成功函数中：

```
$('#' + id_arg).closest('li').remove(); 
```

# c - 如何在C中格式化系统时间？

> ID：12870481
> 
> 赞同：0
> 
> 时间：2012-10-13T06:10:05.277
> 
> 标签：c, time, formatting, strftime, time.h

我正在开发一个程序元素，该元素以（24 小时制）小时和分钟获取系统时间，并将其格式化为 HH:MM 并将其存储在数组中。分钟也必须增加 1。这是我的代码：

```
 strftime (timeh,10,"%H:",formtime);
 strftime (timem,10,"%M",formtime);
 timem1 = atoi(timem);
 ++timem1;
 itoa(timem1, timem, 10);
 strcpy(time, timeh);
 strcat(time, timem); 
```

我通过简单地打印**time**来测试它，这是 printf("%s", time): 5\. 的输出。（时间是凌晨 1:04）

单独地，小时打印为空（凌晨 1:08），分钟打印正确。

我该怎么做才能使数组**时间**保持格式正确的 HH:MM 时间？

感谢您的所有建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:14:29.063

如果我没看错你的问题，你应该可以这样做：

```
formtime->tm_min++; /* Additional checks needed. */
strftime(time, 10, "%H:%M", formtime); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T06:28:47.803

与其尝试直接调整分钟并且不必担心在整点换行，不如将时间调整 60 秒，然后再将其拆分为 struct tm 进行格式化：

```
time_t now;
time(&now);
now += 60;
strftime(buffer, sizeof(buffer), "%H:%M", localtime(&now)); 
```

请注意，调用您的数组`time`不是一个好主意，因为这将与`time`用于获取当前时间的标准函数相冲突。

# perl - Perl WWW:Mechanize::Firefox 禁用警报

> ID：12870484
> 
> 赞同：1
> 
> 时间：2012-10-13T06:10:48.710
> 
> 标签：perl, firefox, mechanize

我正在使用 Perl`WWW::Mechanize::Firefox`来自动化一些网站交互。我一直在处理警报弹出窗口。在我点击它之前，我无法进入下一阶段。我正在寻找一种方法来禁用它或单击`OK`。

到目前为止，我已经尝试了以下方法，但没有成功：

*   `$mech->eval("alert = function(val){console.log(val+' (alert disabled)');};");`

*   `$mech->eval("window.alert = function(val){console.log(val+' (alert disabled)');};");`

*   `$mech->eval_in_page("alert = function(val){console.log(val+' (alert disabled)');};");`

*   `$mech->eval_in_page('alert("Hello");', { alert => sub { print "Captured alert: '@_'\n" } });`

*   `$mech->eval_in_page('', { alert => sub { print "Captured alert: '@_'\n" } });`

我的测试文件位于：

*   [https://github.com/jahagirdar/voter-reg/blob/master/bin/a.html](https://github.com/jahagirdar/voter-reg/blob/master/bin/a.html)
*   [https://github.com/jahagirdar/voter-reg/blob/master/bin/fill_form.pl](https://github.com/jahagirdar/voter-reg/blob/master/bin/fill_form.pl)

我正在使用 Firefox 版本 15.0.1“Mozilla Firefox Ubuntu 规范版本 1”。

安装的插件是 mozrepl 1.1 和 Mozilla Ubuntu 修改 2.1.1。

# css - 具有透明度的 Css 非重复渐变

> ID：12870486
> 
> 赞同：0
> 
> 时间：2012-10-13T06:10:50.643
> 
> 标签：css, size, transparency, gradient

我试图在我的网站标题上获得一定大小的透明渐变。我对 CSS（和 CSS3 等）感到很害怕，所以我想知道是否有人可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:18:33.477

您可以使用此站点生成渐变背景，这在 IE 6、7、8、9 和其他浏览器中都可以

```
www.colorzilla.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:22:25.957

只需转到[ColorZilla](http://www.colorzilla.com/gradient-editor/)并根据您的要求从那里调整渐变。然后它会显示一些CSS代码。只需将其复制并粘贴到您的 css 文件中即可。它可以轻松制作渐变。

# wordpress - 自定义产品类型分类的小部件逻辑

> ID：12870488
> 
> 赞同：1
> 
> 时间：2012-10-13T06:11:01.537
> 
> 标签：wordpress, widget, logic

我通过自定义帖子插件创建了一个自定义帖子类型，现在我通过分类创建了新的帖子类型。我的要求是如何在该分类页面中使用小部件逻辑。

我在小部件中使用以下代码进行小部件逻辑，但我无法得到任何结果。

```
is_tax('branes-range')||is_single()&&(get_post_type()=='products'); 
```

这是分类“产品类型”页面，我创建的是在产品自定义帖子下，“branes-range”是分类类型。现在我想在“branes-range”页面中获取小部件逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:48:14.667

**使用这个小部件逻辑：**

```
is_tax('your_taxonomy_name', 'your_taxonomy') 
```

这里不需要使用 Post 类型名称。

# regex - 正则表达式匹配具有唯一（非重复）字符的单词

> ID：12870489
> 
> 赞同：34
> 
> 时间：2012-10-13T06:11:06.497
> 
> 标签：regex

我正在寻找一个正则表达式，它只有在它的所有字符都是唯一的情况下才会匹配一个单词，这意味着单词中的每个字符只出现一次。

**示例**：
`abcdefg`-> 将返回**MATCH**
`abcdefgbh` -> 将返回**NO MATCH**（因为字母`b`重复多次）

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-13T06:22:07.850

试试这个，它可能会工作，

```
^(?:([A-Za-z])(?!.*\1))*$ 
```

解释

```
Assert position at the beginning of a line (at beginning of the string or after a line break character) «^»
Match the regular expression below «(?:([A-Z])(?!.*\1))*»
   Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
   Match the regular expression below and capture its match into backreference number 1 «([A-Z])»
      Match a single character in the range between “A” and “Z” «[A-Z]»
   Assert that it is impossible to match the regex below starting at this position (negative lookahead) «(?!.*\1)»
      Match any single character that is not a line break character «.*»
         Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
      Match the same text as most recently matched by capturing group number 1 «\1»
Assert position at the end of a line (at the end of the string or before a line break character) «$» 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-13T06:14:33.127

您可以检查字符串中是否有 2 个字符实例：

```
^.*(.).*\1.*$ 
```

（我只是简单地捕获一个角色并检查它是否在其他地方有一个带有反向引用的副本。其余的`.*`都是无关紧要的）。

如果上面的正则表达式匹配，则字符串具有重复字符。如果上面的正则表达式不匹配，则所有字符都是唯一的。

上面的正则表达式的好处是正则表达式引擎不支持环顾四周。

显然，John Woo 的解决方案是一种直接检查唯一性的好方法。它在每个字符处断言前面的字符串将不包含当前字符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-26T21:56:55.373

这也将提供与不重复字母的任何长度单词的完全匹配：

```
^(?!.*(.).*\1)[a-z]+$ 
```

不久前，我稍微修改了@Bohemian 提供的另一个问题的答案以获得这个[。](https://stackoverflow.com/a/20206052/8549456)

自从提出上述问题以来也已经有一段时间了，但我认为在这里也有这个正则表达式模式会很好。

# email - 如何从 getUrl() 函数重命名链接

> ID：12870490
> 
> 赞同：1
> 
> 时间：2012-10-13T06:11:17.000
> 
> 标签：email, google-apps-script, google-sheets

我有一个脚本，我想更改 url 链接的名称。该脚本会发送一封电子邮件，其中包含指向该文档的链接。但是，我希望链接是“单击此处”而不是显示链接地址。我该怎么做呢？这是我的代码。

```
function sendDoc() {
var ss = SpreadsheetApp.getActiveSpreadsheet();
var url = ss.getUrl(); 
var body = "Hi Bo,\n\nHere are the weekly stats " + url;
var thanks = "\n\nThank You,\n   Chris";
var message = body + thanks; 

MailApp.sendEmail(email, subject, message);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T07:37:28.407

您需要使用 sendEmail 函数的高级参数：

这应该有效：

```
function sendDoc() {
var ss = SpreadsheetApp.getActiveSpreadsheet();
var url = ss.getUrl(); 
var body = "Hi Bo,\n\nHere are the weekly stats " + url;
var thanks = "\n\nThank You,\n   Chris";
var message = body + thanks; 

MailApp.sendEmail(email, subject, message, {htmlBody: message.replace('link', '<a href="link">click here</a>')});
 } 
```

其中**链接**是您希望通过电子邮件发送的实际 URL。

这是 sendEMail 函数文档的链接：

[https://developers.google.com/apps-script/class_mailapp#sendEmail](https://developers.google.com/apps-script/class_mailapp#sendEmail)

# css - 我只能在 Sass 中使用嵌套

> ID：12870494
> 
> 赞同：0
> 
> 时间：2012-10-13T06:11:54.983
> 
> 标签：css, ruby-on-rails, sass

我不确定我错过了什么，但我只能在我的 rails 文件中使用**嵌套**。我也希望能够使用**mixins**和**变量**。

我的 gem 文件是包含 sass：

```
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end 
```

我的 css 文件是 name `custom.css.scss`。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:25:46.463

来自 Sass 文档：

> 要在 Rails 2 中安装 Sass，只需将 config.gem “sass” 添加到 config/environment.rb。在 Rails 3 中，将 gem "sass" 添加到您的 Gemfile 中。.sass 或 .scss 文件应放在 public/stylesheets/sass 中，在需要时它们会自动编译为 public/stylesheets 中的相应 CSS 文件（Sass 模板目录是可自定义的……有关详细信息，请参阅 Sass 参考）。

我必须将 css 文件放在 sass 文件夹中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:59:27.043

I expect you're doing something like `*= require_tree .` in your application.css.scss file to include your stylesheets.

According to the [official documentation](http://guides.rubyonrails.org/asset_pipeline.html), this won't work for mixins and variables:

> If you want to use multiple Sass files, you should generally use the Sass @import rule instead of these Sprockets directives. Using Sprockets directives all Sass files exist within their own scope, making variables or mixins only available within the document they were defined in

It kinda sucks, but you need to include them all individually, if you want the mixins and variables to work. Including them using `require` compiles more quickly than using `import`, and should be preferred unless there are shared variables or necessary dependencies.

**Example:**

```
//= require navigation
//= require icons
//= require buttons
@import "variables.css.scss";
@import "mixins.css.scss";
@import "something_else.css.scss"; 
```

# android - 在 Android 的线程中运行 ProgressDialog

> ID：12870496
> 
> 赞同：1
> 
> 时间：2012-10-13T06:12:06.990
> 
> 标签：android, multithreading, android-layout, android-intent, android-widget

当按下按钮时，我想在蓝牙设备中发送和接收一些数据包时运行 ProgressDialog(Spinner)。这是代码

```
 button.setOnClickListener(new OnClickListener() {

          public void onClick(View v) {

          Handler handler = new Handler();
          Runnable r=new Runnable()
          {
              public void run()
              {
                    dialog1 = ProgressDialog.show(Test.this, "",
                           "Receiving. Please wait...", true);

              }
          };
          handler.post(r);

          blueToothServer.getDevicebyMac();
          blueToothServer.rfSocket();
          blueToothServer.cancelDiscovery();
          blueToothServer.connectSocket();
          //toastMessage("Socket connected");
          blueToothServer.ipstream();
          blueToothServer.opStream();
          blueToothServer.SendnRXDataToBTServer(2, "some String");
          String Result1 = blueToothServer.response(1);
          tv1.setText("Temperatue : " + Result1);
          dialog1.dismiss();
 } 
```

但我没有得到 ProgressDialog。但我可以发送和接收数据包。但是当我评论 blueToothServer 操作时，我得到了进度对话框。请解释一下我可以同时获得两者的情况。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:23:47.437

您应该`ProgressDialog`在 UI 线程中显示并在后台线程中执行蓝牙操作。正是为了这个目的，[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)提供了。

看看这个答案：[https ://stackoverflow.com/a/3347405/1321873](https://stackoverflow.com/a/3347405/1321873)

# java - 以自定义格式将当前日期保存到 oracle Db

> ID：12870502
> 
> 赞同：0
> 
> 时间：2012-10-13T06:14:10.533
> 
> 标签：java, date

我想以 MM/dd/yyyy 格式在 oracle DB 中保存日期，即当前日期。

我的 oracle db 有 column ，其数据类型为 date。

谁能让我知道我该怎么做。我试过了，

```
java.text.DateFormat df = new SimpleDateFormat("MM/dd/yyyy"); 
String s = df.format(new Date());  // It is giving in String format 
```

但是我如何将它设置为我的 oracle DB 列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:21:38.023

只需保存日期，无需任何格式。

```
update table set column=sysdate where id=1 
```

在读回数据时，使用

`select to_char(column, 'MM/DD/YYYY') my_date from table`

# python - 是否有任何 python 模块可以在文本模式下绘制二维笛卡尔坐标？

> ID：12870516
> 
> 赞同：2
> 
> 时间：2012-10-13T06:16:33.473
> 
> 标签：python, text, module, plot

matplotlib 似乎只能以 GUI 绘图或输出图片/ps 格式的文件。是否有任何模块可以绘制和输出文本模式数字？例如。

```
^
|          o    
|  o           o   o
|      o   
|                      o
|                          o
|    
+------------------------------>
0  1   2   3   4   5   6   7 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:26:19.943

您是否已经尝试过[ASCII-Plotter](http://pypi.python.org/pypi/ASCII-Plotter/1.0)？

或者，您可以从您的 python 脚本中调用 gnuplot。请参阅[命令行 Unix 基于 ASCII 的图表/绘图工具](https://stackoverflow.com/questions/123378/command-line-unix-ascii-based-charting-plotting-tool)和[从 python 调用 gnuplot](https://stackoverflow.com/questions/2161932/calling-gnuplot-from-python)。

# node.js - 带有redis服务器的nod e.js中未定义的空错误？

> ID：12870517
> 
> 赞同：0
> 
> 时间：2012-10-13T06:16:33.903
> 
> 标签：node.js, redis

我连接redis服务器的nod​​e.js代码是这样的

```
 var http = require("http"),
  querystring = require("querystring"),
  redis = require("redis"),
  db = redis.createClient(6379, "127.0.0.1"); 

db.set("Jaime", "Developer", function(){});

http.createServer(function(req, res) {
  var qs = querystring.parse(req.url.split("?")[1]),
    firstName = qs.firstName;

  db.get(firstName, function(err, lastName) {
    var userName = firstName + " " + lastName,
      html = "<!doctype html>" +
        "<html><head><title>Hello " + userName + "</title></head>" +
        "<body><h1>Hello, " + userName + "!</h1></body><h2>I am in this page</h2></html>";

    res.end(html);

  });
}).listen(8000); 
```

我的 redis 服务器也在运行并给出这样的消息

> [3648] 10 月 13 日 11:43:00 * 服务器现在准备好接受端口 6 379 上的连接 [3648] 10 月 13 日 11:43:01 - DB 0：4 个插槽 HT 中的 3 个密钥（0 易失性）。[3648] 10 月 13 日 11:43:01 - 0 个客户端已连接（0 个从站），672976 字节正在使用 [3648] 10 月 13 日 11:43:06 - DB 0：4 个插槽 HT 中的 3 个密钥（0 个易失性）。[3648] 10 月 13 日 11:43:06 - 0 个客户端已连接（0 个从站），正在使用 672976 个字节

当我用浏览器（http://localhost:8000）连接它时，服务器状态给出

> [3648] 10 月 13 日 11:45:07 - 接受 127.0.0.1:1715 [3648] 10 月 13 日 11:45:10 - DB 0：4 个插槽 HT 中的 3 个密钥（0 易失性）。[3648] 10 月 13 日 11:45:11 - 1 个客户端已连接（0 个从站），正在使用 680892 字节

浏览器出来就是这个

**你好，未定义的空值！我在这个页面**

我对此完全陌生..我不知道如何进行这项工作，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:08:57.043

你有两个问题。

首先，db.set 是一个异步操作，但是您在回调中有一个匿名函数，其中没有任何内容，因此无法保证在您执行 get 时操作已经完成。

您需要将后面的代码嵌套在 db.set 回调中（可能会变得混乱），或者为节点使用流控制库，例如异步。

其次，您从查询参数中检索 firstName，然后不传递任何内容......因此第一个未定义，例如 http://localhost:8000/?firstName=Jaime（这实际上是导致错误的原因）。

您需要修复两者才能使其正常工作。我会阅读节点中的异步操作和异步库。

*   [https://github.com/caolan/async](https://github.com/caolan/async)
*   [http://shinetech.com/thoughts/articles/139-asynchronous-code-design-with-nodejs-](http://shinetech.com/thoughts/articles/139-asynchronous-code-design-with-nodejs-)

（编辑添加链接）。

# css - IE Alpha Png 修复不起作用

> ID：12870520
> 
> 赞同：1
> 
> 时间：2012-10-13T06:16:55.787
> 
> 标签：css, png, alpha

我已经在这里待了好几个小时了，但绝对无处可去！

基本上，PNG 的 alpha 通道并没有使用 TwinHelix 插件自行修复。我在 .HTC 文件中发出警报，它正确触发，空白图像与 HTC 文件相关。

```
img, div, input, a, button, p, h1, h2, h3 ,h4 ,h5 {behavior: url('/../_design/iepngfix.htc');} 
```

这是我在 main.css 文件中使用的 css，iepngfix.htc 和 blank.gif 文件位于“_design”文件夹中。所有链接都是正确的，但 alpha 通道仍然不受影响:(

任何帮助将不胜感激！

[http://pmf.v5.cloudsvr.com.au/](http://pmf.v5.cloudsvr.com.au/) - 例如登录表单，黄色和棕色按钮未修复。

问候，香农

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:22:11.417

您必须使用不带单引号的 url，例如，您必须使用绝对寻址

```
behavior: url(/YourRootAddress/YourFileAndFolder/_design/iepngfix.htc); 
```

# ms-access - 包含“round”函数的 if 语句

> ID：12870524
> 
> 赞同：0
> 
> 时间：2012-10-13T06:18:02.133
> 
> 标签：ms-access

请根据我的标准修正我的 if 语句，如下所列。我收到错误消息“您输入的表达式包含无效的语法。您输入的逗号可能没有前面的值或标识符”。

判据： 1\. 如果 mth_sply365 的值大于“0”且小于“1”，则四舍五入到小数点后一位。2\. 如果mth_sply365 值不大于“0”且小于“1”，则四舍五入到小数点零。

```
IIf([u].[mth_sply365] >0 and <1,Round([u].[mth_sply365],1),Round([u].[mth_sply365],0)) 
```

在此先感谢，纳撒尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T06:24:18.483

我认为你的陈述应该如下：
`IIf([u].[mth_sply365] >0 and [u].[mth_sply365] <1,Round([u].[mth_sply365],1),Round([u].[mth_sply365],0))`。
`[u].[mth_sply365]`应在每个条件之前指定。祝你好运。

# asp.net - 数据列表项数据绑定不正常

> ID：12870526
> 
> 赞同：0
> 
> 时间：2012-10-13T06:18:21.327
> 
> 标签：asp.net, vb.net, c#-4.0

我正在使用下面的代码来更改按钮状态（启用或禁用）。但它对第一个控件起作用，第二个和第三个控件状态没有改变。请帮我解决这个错误。

```
If (e.Item.ItemType = DataControlRowType.DataRow) Then
            Dim status As Button = CType(e.Item.FindControl("btnstatus"), Button)
            If status IsNot Nothing Then
                If status.Text = "Ready" Then
                    status.Enabled = True
                ElseIf status.Text = "Assigned" Then
                    status.Enabled = False
                Else
                    status.Enabled = False
                End If
            End If

            'do what ever you want to do here using the value of your label
        End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:58:19.767

试试这个：

```
If e.Item.ItemType = ListItemType.Item Or _
             e.Item.ItemType = ListItemType.AlternatingItem Then

//Your Code Here

End If 
```

# c# - 在 C# 中移动鼠标（坐标单位）

> ID：12870535
> 
> 赞同：4
> 
> 时间：2012-10-13T06:19:25.357
> 
> 标签：c#, click, mouse, move

我正在尝试让 Teamviewer 成为一款有趣的软件，它允许一个人查看另一个人的屏幕并单击等等。无论如何，我已经完成了大多数套接字的工作，但我不知道如何让鼠标点击正常工作。这是我在网上找到的以编程方式移动鼠标的代码：

```
 public static class VirtualMouse
{
    // import the necessary API function so .NET can
    // marshall parameters appropriately
    [DllImport("user32.dll")]
    static extern void mouse_event(int dwFlags, int dx, int dy, int dwData, int dwExtraInfo);

    // constants for the mouse_input() API function
    private const int MOUSEEVENTF_MOVE = 0x0001;
    private const int MOUSEEVENTF_LEFTDOWN = 0x0002;
    private const int MOUSEEVENTF_LEFTUP = 0x0004;
    private const int MOUSEEVENTF_RIGHTDOWN = 0x0008;
    private const int MOUSEEVENTF_RIGHTUP = 0x0010;
    private const int MOUSEEVENTF_MIDDLEDOWN = 0x0020;
    private const int MOUSEEVENTF_MIDDLEUP = 0x0040;
    private const int MOUSEEVENTF_ABSOLUTE = 0x8000;

    // simulates movement of the mouse.  parameters specify changes
    // in relative position.  positive values indicate movement
    // right or down
    public static void Move(int xDelta, int yDelta)
    {
        mouse_event(MOUSEEVENTF_MOVE, xDelta, yDelta, 0, 0);
    }

    // simulates movement of the mouse.  parameters specify an
    // absolute location, with the top left corner being the
    // origin
    public static void MoveTo(int x, int y)
    {
        mouse_event(MOUSEEVENTF_ABSOLUTE | MOUSEEVENTF_MOVE, x, y, 0, 0);
    }

    // simulates a click-and-release action of the left mouse
    // button at its current position
    public static void LeftClick()
    {
        mouse_event(MOUSEEVENTF_LEFTDOWN, Control.MousePosition.X, Control.MousePosition.Y, 0, 0);
        mouse_event(MOUSEEVENTF_LEFTUP, Control.MousePosition.X, Control.MousePosition.Y, 0, 0);
    }
} 
```

现在我想使用 MoveTo 方法移动鼠标，但是任何移动都需要非常高的数字。无论如何我可以匹配坐标以将这里移动到屏幕上的像素位置吗？抱歉，如果这似乎是一个显而易见的问题，但我已经用谷歌搜索了将近一个小时，但我找不到任何关于鼠标 x 和 y 位置使用什么单位的讨论，所以我无法设置任何类型的将一个面板上的点击与用户屏幕上的点击相匹配的公式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T06:32:38.740

来自[微软的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646260%28v=vs.85%29.aspx)：

> 如果指定了 MOUSEEVENTF_ABSOLUTE 值，则 dx 和 dy 包含 0 到 65,535 之间的归一化绝对坐标。事件过程将这些坐标映射到显示表面上。坐标 (0,0) 映射到显示表面的左上角，(65535,65535) 映射到右下角。

您可以使用它将以像素为单位的输入转换为所需的值，如下所示：

```
var inputXinPixels = 200;
var inputYinPixels = 200;
var screenBounds = System.Windows.Forms.Screen.PrimaryScreen.Bounds;
var outputX = inputXinPixels * 65535 / screenBounds.Width;
var outputY = inputYinPixels * 65535 / screenBounds.Height;
MoveTo(outputX, outputY); 
```

请记住，这对于多台显示器可能不正确。另请注意，文档说：

> 此功能已被取代。请改用[SendInput](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)。

**附录**：正如[J3soon 所指出的](https://stackoverflow.com/questions/12870535/moving-mouse-in-c-sharp-coordinate-units/12870616?noredirect=1#comment85268201_12870616)，上述公式可能不是最好的。根据对[AutoHokey 所做的研究](https://autohotkey.com/board/topic/9317-mousemove-distorts-coords-near-lefttop-edges-of-screen/)，内部以下代码效果更好：

```
var outputX = (inputXinPixels * 65536 / screenBounds.Width) + 1;
var outputY = (inputYinPixels * 65536 / screenBounds.Height) + 1; 
```

请参阅[AutoHotkey 源代码](https://github.com/Lexikos/AutoHotkey_L/blob/master/source/keyboard_mouse.cpp#L2545)以供参考。

* * *

如果我处于你的位置，我会使用 Cursor.Position。以下代码按预期工作：

```
System.Windows.Forms.Cursor.Position = new System.Drawing.Point(200, 200); 
```

是的，它将鼠标指针放在屏幕的坐标 (200, 200) 像素中 [在 LinqPad 上测试]。

**附录**：我查看了`System.Windows.Forms.Cursor.Position`内部使用的内容 - 至少在 Windows 上的 Mono 上。这是对`SetCursorPos`. 不需要奇怪的坐标转换。

# c - 数组的地址不应该是双指针吗？

> ID：12870536
> 
> 赞同：2
> 
> 时间：2012-10-13T06:19:26.363
> 
> 标签：c, pointers

> **可能重复：**
> [C：为什么数组的地址等于它的值？](https://stackoverflow.com/questions/2528318/c-how-come-an-arrays-address-is-equal-to-its-value)

```
int a[2];
printf("%u %u", (int)(&a), (int)(a)); 
```

我在想那`&a`是一个指向地址的指针`a`。第二个`a`表示数组的起始地址。

为什么它们是一样的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T06:29:01.647

在任何上下文中，除了它是一元`&`或`sizeof`运算符的操作数之外，数组名称的`a`计算结果为指向数组第一个成员的指针。这有类型`int *`。

在`&a`中，`a`仍然指定数组本身，数组`&a`的地址*也是*如此。这有类型`int (*)[2]`。

由于数组的第一个元素位于数组的开头，因此数组的地址和第一个元素的地址必然重合，所以你看到的值相同。

（真的，您应该使用`%p`格式说明符来打印指针）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T06:27:36.210

那是因为它们都指向同一个地址。

*   `&a`是地址`a`
*   `a`是数组本身（它的开头）
*   `&a[0]`也是同一个地址，因为它是第一个元素

因此，如果您总是将这些示例转换为`int`，它将是`a`的地址。事实上，如果类型转换正确，数组的第一个元素总是在它的起始地址，因为它`a`单独指向它的第一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T06:27:08.857

`&a`是常量数组的基地址。这`a`也是第一个元素。

# android - 安卓命名约定

> ID：12870537
> 
> 赞同：83
> 
> 时间：2012-10-13T06:19:58.180
> 
> 标签：android, naming-conventions

我正在寻找一个彻底的 Android 命名约定建议。我在这里发现了一点：

[http://source.android.com/source/code-style.html#follow-field-naming-conventions](http://source.android.com/source/code-style.html#follow-field-naming-conventions)

其中说：

*   非公共、非静态字段名称以 m 开头。
*   静态字段名称以 s 开头。
*   其他字段以小写字母开头。
*   公共静态最终字段（常量）是`ALL_CAPS_WITH_UNDERSCORES`.

然而，我正在寻找涵盖 Android 各个方面的更广泛的内容：

*   如何命名其中的布局和视图，
*   如何命名菜单
*   如何命名样式
*   如何命名数据库表（单数、复数）和其中的字段
*   ETC

如果有一些普遍接受的建议，我很乐意遵循。所有的 SDK 似乎都有自己的方式，所以我对 Android 的方式特别感兴趣。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2015-01-07T11:40:56.033

[ribot 的 Android 指南](https://github.com/ribot/android-guidelines/blob/master/project_and_code_guidelines.md)是标准命名约定的一个很好的例子：

XML 文件的命名约定：

```
activity_<ACTIVITY NAME>.xml - for all activities
dialog_<DIALOG NAME>.xml - for all custom dialogs
row_<LIST_NAME>.xml - for custom row for listview
fragment_<FRAGMENT_NAME>.xml - for all fragments 
```

xml 文件中组件/小部件的命名约定：

*X*活动的所有组件必须以活动名称开头所有组件都应具有前缀或短名称，例如*btn*例如`Button` ，登录活动组件的名称应如下所示。

```
activity_login_btn_login
activity_login_et_username
activity_login_et_password 
```

主要组件的简称：

```
Button - btn
EditText - et
TextView - tv
ProgressBar - pb
Checkbox - chk
RadioButton - rb
ToggleButton - tb
Spinner - spn
Menu - mnu
ListView - lv
GalleryView - gv
LinearLayout -ll
RelativeLayout - rl 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-12-23T04:47:54.617

这是一个很好的最佳实践集合： [https ://github.com/futurice/android-best-practices](https://github.com/futurice/android-best-practices)

这是我使用的。我也会从那个链接复制。

### 对象命名

*   请勿按照 Google 指南使用`m`or前缀。`s`我已经停止了多年，我发现没有它们会更容易。当您使用私有或静态的东西时，IDE 会告诉您；这似乎是一个过时的约定。
*   常量以大写字母开头
*   首字母缩略词应该只大写第一个字母。例如，`functionUrl`和`unitId`。不是`unitID`。
*   对象类型的前缀。例如，包含名称的 TextView 将是`tvName`. 带有密码的 EditView 将是`etPass`.
*   如果它通常在活动中只使用一次（例如 ListView），不要害怕直接调用它`lv`。
*   如果它不是对象类型，只需按其功能命名即可。例如，如果它是一个包含 ID 的字符串，则将其命名为`id`，而不是 stringId。IDE 会告诉您它何时是字符串、浮点数或长整数。
*   保持清晰。使用类似的东西`Pass`而不是`Password`.
*   在 XML 中，名称应该是下划线，不能大写，例如`tv_name`和`et_pass`
*   将 放在`android:id`XML 中的第一个属性。

### 文件命名

*   为其类型添加前缀布局。例如`fragment_contact_details.xml`, `view_primary_button.xml`, `activity_main.xml`.
*   对于类，将它们分类到文件夹中，但使用后缀。例如，`/activities/MainActivity.java`或`/fragments/DeleteDialog.java`。我的文件夹是*活动、片段、适配器、模型*和*实用*程序。
*   适配器应该说明它们的使用方式和时间。因此，可能会调用 ChatActivity 的 ListView 适配器`ChatListAdapter`。

### colors.xml 和 dimens.xml 作为调色板

*   对于颜色，请使用名称，例如`gray_light`，而不是`button_foreground`。

*   对于尺寸，使用名称，例如`spacing_large`，而不是`button_upper_padding`。

*   如果要为按钮颜色或填充设置特定的内容，请使用样式文件。

### 字符串.xml

*   使用类似于命名空间的键来命名您的字符串，并且不要害怕为两个或多个键重复一个值。

*   使用`error.message.network`，不使用`network_error`。

### 推理

命名约定的目的[不是让一切都整齐一致](http://www.joelonsoftware.com/articles/Wrong.html)。它可以标记可能的错误并改进工作流程。其中大多数旨在方便键盘快捷键。尝试专注于最小化错误和改进工作流程，而不是看起来不错。

前缀非常适合那些“TextView 的名称是什么？” 时刻。

后缀用于您不经常以这种方式访问​​的内容，但可能会造成混淆。例如，我可能不确定我是否将代码放在该页面的 Activity、Fragment 或 Adapter 中。如果你愿意，它们可以被丢弃。

XML id 通常是小写的并使用下划线，因为似乎每个人都这样做。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-02-08T14:50:46.220

**一致性**
每个人（除非在团队中工作）都有自己的约定，您选择哪一个并不重要。确保它在整个应用程序中 **保持一致确实很重要。**

**结构**
就个人而言，我使用这样的命名约定，因为它从类名到组件，并且在整个 xml 中是一致的：

*   **类**：`<ClassName>`
*   **活动**：`<ClassName>**Activity**`
*   **布局**：`classname_activity`
*   **组件 ID**：`classname_activity_component_name`

这方面的一个例子是`OrderActivity.class`, `order_activity.xml`, `order_activity_bn_cancel`。注意所有的 XML 都是小写的。

**缩写布局**
如果您想使用较短的名称来保持代码整洁；那么另一种方法可以是缩写XML 中的**所有名称以及布局。**

**OrderActivity** .class就是一个例子： **ord_act** .xml、**ord_act** _bt_can、**ord_act** _ti_nam、**ord_act** _tv_nam。我把名字分成三个，但这取决于你有多少相似的名字

**缩写组件类型**
当缩写组件类型时，也要尽量保持一致。我通常使用两个字母作为组件类型，三个字母作为名称。但是，如果名称是布局中该类型的唯一元素，则有时不需要名称。ID的原则是唯一

*   **组件 ID**：`nam_act_component_nam`

***组件类型缩写***（此列表显示两个字母，这很多）
**框架布局：** fl
**线性布局：** ll
**表格布局：** tl
**表格行：** tr
**网格布局：** gl
**相对布局：** rl

**文本视图：** tv
**按钮：** bt
**复选框：** cb
**开关：** sw
**切换按钮：** tb
**图像按钮：** ib
**图像视图：** iv
**进度条：** pb
**搜索栏：** sb
**评级栏：** rb
**微调器：** sp
**WebView：** wv
**编辑文本：** et

**单选组：** rg
**列表视图：** lv
**网格视图：** gv
**可扩展列表视图：** el
**滚动视图：** sv
**水平滚动视图：** hs
**搜索视图：*** se
**选项卡主机：** th
**视频视图：** vv
**拨号过滤器：** df

**包括：** ic
**片段：** fr
**自定义视图（其他）：** cv

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-13T08:01:06.827

我认为这还没有约定。每个公司都有自己的规则，我认为这里没有人关心它。

对我来说，我更喜欢将名称绑定到上下文。例如，如果有一个名为“MainActivity”的活动，其布局名称将是“main_activity.xml”，并且对于与此活动关联的每个资源，我添加一个前缀“main_activity”，以便我知道它使用它。用于此活动的 id 也是如此。

我使用这些命名的原因是更容易找到它们，如果需要删除它们，并且如果您使用 android 库，您不会将它们替换为其他库，因为名称非常独特。

我也尽量给出有意义的名字，所以你通常不会看到 "listView" 或 "imageView2" 作为 ids ，而是像 "contactsListView" 和 "contactImageView" 这样的东西。相同的名称（或类似名称）也将匹配 java 代码中的变量，以便更容易找到。

所以，简而言之，我的建议是：

*   尽量避免名称中的数字。它们通常意义不大，并且表明您只对 UI 设计师使用了拖放功能。

*   对于演示、POC 和此处的问题，不必担心命名。

*   尝试为所有资源名称（包括 id）添加前缀，以显示它们属于哪个上下文，并实现唯一性。

*   尽可能给出有意义的名字。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-13T08:13:44.253

最新的 Android Eclipse 插件会在您创建新项目时自动创建一些您提到的文件。由此，命名是这样的：

```
layout/activity_main.xml
menu/activity_main.xml
... 
```

我遵循了这个方案，例如

```
layout/fragment_a.xml
layout/fragment_b.xml
... 
```

所以它有点像包名，从一般到详细。它还允许进行整齐的分类。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-13T08:25:46.287

每个人都使用自己的，主要目标是避免错误和误解，特别是当其他人阅读您的代码时。尽管现代 IDE 中的语法高亮显示和自动代码检查使其意义不大。

但是这些命名约定也使得打开代码完成时非常方便。例如，只需键入`m`并自动完成将显示一个类字段列表。

但是很多时候您必须使用其他代码，而这些代码不使用这种约定。这种受保护的变量和被覆盖的方法参数只会增加混乱。

几个例子：

*   使用 m 为类变量添加前缀，并使静态变量全部大写，并使用`_`分隔词。不要为降低范围变量添加任何前缀。

*   UI 父级之后的名称布局，例如`act_main.xml`, `frg_detail.xml`, `itm__act_main__list1.xml`; 对于带有 id的in的活动`MainActivity`、片段`DetailFragment`、项目布局。`ListView``MainActivity``list1`

*   在 xml 布局中命名元素 ID，例如：`lsv__act_main__list1`对于 ListView 和`btn__act_main__submit``Button 元素。这使得它们更容易通过自动完成找到。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-08T03:18:01.677

至于命名约定和/或最佳实践，我经常遵循github中[ribot/android-guidelines存储库的](https://github.com/ribot/android-guidelines)[这个 md 文件](https://github.com/ribot/android-guidelines/blob/master/project_and_code_guidelines.md)，其中包含项目和编码指南。

# javascript - 使用matlab在sprintf中打印一个“\”

> ID：12870538
> 
> 赞同：1
> 
> 时间：2012-10-13T06:20:08.980
> 
> 标签：javascript, string, matlab, printf

我想做的是在 Matlab 中编写一个脚本，该脚本将解析一些 HTML，从中获取一些数据，获取这些数据，然后将其格式化为 Javascript 字符串数组。我在抓取 HTML 并对其进行解析等方面没有问题，我在尝试使用`sprintf`包含反斜杠的字符串时遇到了麻烦。

基本上，如果您在 Javascript 中有一个包含引号的字符串，则需要使用反斜杠对其进行转义：

```
var string1 = "Here is a \"string\" example"; 
```

当我尝试在 Matlab 中按如下方式执行此操作时，它无法正确打印：

```
>> A = sprintf('Here is a \"string\" example')
A =
    Here is a "string" example 
```

这不是有效的 Javascript 字符串。所以基本上我想`sprintf`返回一个正确的 Javascript 字符串；有什么建议么？

我尝试过使用`\\"`and`\\\"`和一些类似的组合，但都无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:45:41.953

Matlab 使用参考 Kernighan、BW 和 DM Ritchie，C 编程语言作为其 sprintf 函数。根据参考资料， sprintf 的定义方式，它使用转义字符作为克服字符默认控制含义的一种方式。

尽管您要求不要建议这种组合，例如

```
\"

\\\" 
```

这是一个可行的解决方案，您不必手动将 \" 替换为 \\" 并且代码会自行执行此操作。

```
a = "Here is a \"string\" example";
d = regexprep(a,"\"","\\\"");
sprintf(d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T08:51:32.253

尝试

```
sprintf('Here is a \\"string\\" example.') 
```

在我的机器上这个输出

```
Here is a \"string\" example. 
```

# javascript - JavaScript 和 CSS 在我的 liferay portlet 中不起作用

> ID：12870542
> 
> 赞同：5
> 
> 时间：2012-10-13T06:20:27.373
> 
> 标签：javascript, css, jsp, portlet, liferay-6

我必须为我的 portlet 使用一些 JavaScript 和 CSS。我正在使用一些可数据的 jQuery 进行排序和一些交互式显示，但它不起作用。

任何人都可以指导我犯错的地方吗？

这是我保存 JS 和 CSS 的 docroot 目录结构。

![在此处输入图像描述](../Images/dfbceac3f67670c459d644d5dd6c20a6.png)

这是我在其中动态填充数据的 view.jsp 文件。

```
<%@page import="com.video.util.VideoActionUtil"%>
<%@page import="com.video.database.model.Video"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"
    import="com.video.database.model.Video.*"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Applying JQuery DataTables plugin in the Java Server application</title>

     <link href="docroot/js/jquery-1.2.6.min.js" type="text/javascript">
        <link href="docroot/css/demo_page.css" rel="stylesheet" type="text/css" />
        <link href="docroot/css/demo_table.css" rel="stylesheet" type="text/css" />
        <link href="docroot/css/demo_table_jui.css" rel="stylesheet" type="text/css" />
        <link href="docroot/css/jquery-ui.css" rel="stylesheet" type="text/css" media="all" />
        <link href="docroot/css/jquery-ui-1.7.2.custom.css" rel="stylesheet" type="text/css" media="all" />
        <script src="docroot/js/query.js" type="text/javascript"></script>
        <script src="docroot/js/jquery.dataTables.min.js" type="text/javascript"></script>
        <script type="text/javascript">
        $(document).ready(function () {
            $("#companies").dataTable({
                "sPaginationType": "full_numbers",
                "bJQueryUI": true
            });
        });
        </script>
    </head>
    <body id="dt_example">
        <div id="container">

            <div id="demo_jui">
                <table id="companies" class="display">
                    <thead>
                        <tr>
                            <th>Company name</th>
                            <th>Address</th>
                            <th>Town</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% 
                        long l=10154;
                        for(Video c: VideoActionUtil.getAllVideo(l)){ %>
                          <tr>
                            <td><%=c.getTitle()%></td>
                            <td><%=c.getDescription()%></td>
                            <td><%=c.getTypeId()%></td>
                          </tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
        </div>
    </body>
</html> 
```

也许它找不到 CSS 和 JavaScript？我已经尝试过这条路径 `href=/css/[filename]` ，但这也不起作用，所以我给出了`docroot/css/ [filename]`.

感谢和问候 Bhavik Kama

@巴马尔先生

```
 <script src="../js/jquery-1.2.6.min.js" type="text/javascript"></script>
        <link href="../css/demo_page.css" rel="stylesheet" type="text/css" />
        <link href="../css/demo_table.css" rel="stylesheet" type="text/css" />
        <link href="../css/demo_table_jui.css" rel="stylesheet" type="text/css" />
        <link href="../css/jquery-ui.css" rel="stylesheet" type="text/css" media="all" />
        <link href="../css/jquery-ui-1.7.2.custom.css" rel="stylesheet" type="text/css" media="all" />
        <script src="../js/query.js" type="text/javascript"></script>
        <script src="../js/jquery.dataTables.min.js" type="text/javascript"></script>
        <script type="text/javascript"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T07:00:43.410

而不是使用`<link href="docroot/js/jquery-1.2.6.min.js" type="text/javascript">`，您可以使用：

```
<link href="/js/jquery-1.2.6.min.js" type="text/javascript"> 
```

这是您文件的绝对路径，`/`即`docroot`文件夹。顺便说一句，liferay 使用默认加载 css 和 js 文件，其定义`docroot\WEB-INF\liferay-portlet.xml`如下：

```
<portlet>
    <portlet-name>Your portlet name</portlet-name>
    <icon>/icon.png</icon>
    <indexer-class>Your portlet class</indexer-class>
    <instanceable>false</instanceable>
    <header-portlet-css>/css/main.css - link to your header css</header-portlet-css>
    <footer-portlet-javascript>/js/main.js - link to your header js</footer-portlet-javascript>
    <css-class-wrapper>DongBat-SLL-DT-portlet</css-class-wrapper>
</portlet> 
```

因此，您可以更改或包含这些文件中的 js 或 css 以加载标题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T07:26:12.097

@tairi 我们也可以这样做。但我的解决方案只是给出了特定**js 或 css**的路径，如下所示

```
<script src="<%=request.getContextPath()%>/js/jquery-1.2.6.min.js" type="text/javascript"></script> 
```

对于遇到此类问题的其他人，只需`css/js`使用`<%=request.getContextPath()%>`

谢谢大家。不知何故，你帮助我实现了这一目标。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T10:04:07.373

正如@Taiki 所指出的，在liferay 中有一个xml 描述符文件，它允许您在门户页眉或页脚中设置portlet 中使用的css 和javascript

liferay-portlet.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE liferay-portlet-app PUBLIC "-//Liferay//DTD Portlet Application 5.2.0//EN"
        "http://www.liferay.com/dtd/liferay-portlet-app_5_2_0.dtd">
<liferay-portlet-app>
    <portlet>
        <portlet-name>PortletName</portlet-name>
        <header-portlet-css>/css/your.css</header-portlet-css>
        <header-portlet-javascript>/js/jquery.js</header-portlet-javascript>
       <footer-portlet-javascript>/js/your.js</footer-portlet-javascript>
    </portlet>

</liferay-portlet-app> 
```

如果你把它放在你的 WEB-INF 中，相应地调整路径，你就可以不用在你的视图中引用文件了

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T06:51:18.567

不以 URL 开头`/`的 URL 相对于引用它们的 URL 中的目录进行解释。所以如果一个带有 URL 的页面`http://domain.com/docroot/jsps/view.jsp`访问`docroot/css/something.css`，它会寻找`http://domain.com/docroot/jsps/docroot/css/something.css`.

尝试使用 和 之类`../css/[filename].css`的路径`../js/[filename].js`。`../`表示在目录层次结构中上一层。

# android - 预览中动态壁纸的奇怪行为

> ID：12870547
> 
> 赞同：2
> 
> 时间：2012-10-13T06:21:24.083
> 
> 标签：android, andengine, live-wallpaper, game-physics

> **可能重复：**
> [android 动态壁纸重新缩放](https://stackoverflow.com/questions/5208203/android-live-wallpaper-rescaling)
> [AndEngine 动态壁纸预览 Bug？](https://stackoverflow.com/questions/12872613/andengine-live-wallpaper-preview-bug)

我正在使用 AndEngine 开发动态壁纸。问题是当我在纵向模式下预览壁纸时它工作正常，但是当将壁纸旋转到横向模式时，壁纸变得很奇怪。更糟糕的是，当我设置壁纸时处于纵向模式，进入主屏幕后我将平板电脑旋转到横向模式，它工作正常。

这是`onConfigurationChanged()`功能代码。

```
@Override
public void onConfigurationChanged (Configuration newConfig){
if(newConfig.orientation == Configuration.ORIENTATION_PORTRAIT)
    {
        mScene.setScale(1);
        mScene.setPosition(mSceneX,mSceneY);
        //scene.setBackground(sb);
    }
    else if(newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE)
    {
        Log.d("conf", "conf");
        mSceneX=mScene.getX();
        mSceneY=mScene.getY();
        mScene.setScaleY(1330f/790f);
        mScene.setScaleX(790f/1330f);

        mScene.setPosition(mScene.getX()+getX(160f),mScene.getY()-getY(420));
        //scene.setBackground(sb2);
    }
} 
```

# python - 将 vim 函数传递给 vim 的内置 python

> ID：12870554
> 
> 赞同：1
> 
> 时间：2012-10-13T06:22:56.433
> 
> 标签：python, vim

我正在尝试使用 vimscript 输出在 vim 中设置一个 python 变量。以下代码导致问题：

```
 python os.environ['DJANGO_SETTINGS_MODULE'] = split(expand("%:p:h"), "\/")[4].'.settings' 
```

问题是我正在运行一行python代码，但是希望vim评估“=”符号之后的所有内容，因为我想将`:split(expand("%:p:h"), "\/")[4].'.settings'`vim命令的值分配给python变量os.environ ['DJANGO_SETTINGS_MODULE' ]

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:26:47.307

尝试这样的事情：

```
import vim
os.environ['DJANGO_SETTINGS_MODULE'] = \
    vim.eval("""expand("%:p:h")""").split('/')[4] + '.settings' 
```

# android - 当用户单击android中的后退按钮时，我想结束整个应用程序

> ID：12870563
> 
> 赞同：1
> 
> 时间：2012-10-13T06:24:52.350
> 
> 标签：android

当用户单击android中的后退按钮时，我想结束整个应用程序。当前它再次转到上一个打开的活动。我也尝试覆盖 onBackPressed() 但它不起作用。

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        onBackPressed();
    }
       return super.onKeyDown(keyCode, event);
}
enter code here
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
    return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T06:33:52.533

试试这个，从一个将作为你的 Root 的 Activity 启动你的应用程序。

```
public class Root extends Activity {

     public void onCreate() {
         super.onCreate();
         handleIntent();
      }

      public void onNewIntent(Intent intent) {
        setIntent(intent);
        handleIntent();
      }

     private void handleIntent() {
         boolean end = getIntent.getBooleanExtra("End");
         if (end) {
            finish();
         } else {
            Intent intent = new Intent(this, MyRealFirstActivity.class); // where this is the class that you want the user to see when they launch your app.
            startActivity(intent);
         }
      }

      public void onResume() {
        super.onResume();
        finish();
      }
} 
```

然后在您希望后退按钮结束应用程序的活动中，执行以下操作：

```
public class LastActivity extends Activity {

    public void onBackPressed() {
        Intent intent = new Intent(this, Root.class);
        intent.putExtra("End", true);
        intent.addFlag(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
    }
} 
```

这样，在您启动应用程序然后点击后退按钮之间启动的所有活动都将为您完成（）。这基本上会从头到尾清理应用程序的状态，然后退出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T06:33:03.203

在这种情况下，您需要完成活动，因此您当前的活动将使用 finish() 方法关闭。但是您还应该在之前的每个活动中都编写完成（），您可以在其中调用意图（开始另一个活动）。希望它说清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T06:44:12.647

```
 public void onBackPressed() {

         Intent intent = new Intent(Intent.ACTION_MAIN);
         intent.addCategory(Intent.CATEGORY_HOME);
         intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         this.finish();
         startActivity(intent);
       } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T07:58:54.300

在这里，我们有**两种方法**可以`finish or kill`让应用程序**按下后退按钮**。

1.  使用`finish()`which**关闭或完成**android 屏幕上的当前活动。

    例如：您有 2 个活动，即**A**和**B。**您将使用意图从**A**活动转到**B**活动，现在前景活动是**B**，您想返回并杀死**B**活动并使用后退按钮的onclick转到**A活动。**`finish()`如果您在**A**活动中，则它会关闭应用程序。见下面的代码。

    ```
    public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
    finish();
    }
    return super.onKeyDown(keyCode, event);
    } 
    ```

2.  使用`android.os.Process.killProcess(android.os.Process.myPid());`它会杀死应用程序，即强制关闭应用程序并转到主屏幕。请参阅下面的代码。

    ```
    public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
    // Kills & force closes the app 
    android.os.Process.killProcess(android.os.Process.myPid());
    }
    return super.onKeyDown(keyCode, event);
    } 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T17:11:04.483

这是我在我的应用程序中执行此操作的方式： ActivityA 是第一个启动的；它依次启动 ActivityB。在 ActivityB 中我可能会遇到错误，在这种情况下我想返回到 activityA，或者一切都可能正确完成，在这种情况下我想完全“完成”应用程序。

在活动 A 中：

```
public class ActivityA extends Activity {
...
    private final static int REQUEST_ACT_B = 1;
...
    private void startChild() {
        startActivityForResult(new Intent(this, ActivityB.class), REQUEST_ACT_B;
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(requestCode == REQUEST_TASK && resultCode == ActivityB.RESULT_OK) {
            this.finish();
        }
    }
} 
```

然后在 ActivityB 中：

```
public class ActivityB extends Activity {
...
    public final static int RESULT_OK = 1;
    public final static int RESULT_ERROR = 2;
...
    private void finishWithError() {
        setResult(RESULT_ERROR);
        finish();
    }

    private void finishSuccessfully() {
        setResult(RESULT_OK);
    }
} 
```

本质上，ActivityA 启动 ActivityB 并期望返回结果。如果它收到返回的结果“OK”，那么它会自行关闭并且用户也不知道：应用程序已经完成。如果收到结果“错误”，则 ActivityA 保持打开状态。

# android - 启动相机以捕获图片并在单击按钮后将其捕获到凝胶中后存储图像

> ID：12870565
> 
> 赞同：1
> 
> 时间：2012-10-13T06:25:03.723
> 
> 标签：android, android-camera, image-gallery

我正在开发安卓应用程序。我有一个活动，其中有两个按钮第一个用于从图库中选择图像。我已经在它上面应用了函数。我还有一个按钮捕获图像。我想处理它。但不知道如何启动相机。我希望当我单击按钮捕获图像时它应该启动相机以捕获图像。如果不想拍照，应该有取消选项。按下取消相机后应该取消。如果我捕获图像，它应该显示在图像视图中并自动存储在 SD 卡中。我应该如何继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:38:04.923

[http://developer.android.com/guide/topics/media/camera.html](http://developer.android.com/guide/topics/media/camera.html)。关于启动相机你需要知道的一切。通过链接。

```
 private static final int TAKE_PHOTO_CODE = 1;
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
 intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(getTempFile(this)) ); 
  startActivityForResult(intent, TAKE_PHOTO_CODE);

 get uri
 private File getTempFile(Context context){

  return new File(path, "/tourpath/yourfilename.jpg");
}

 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  if (resultCode == RESULT_OK) {
    switch(requestCode){
      case TAKE_PHOTO_CODE:   
          try {
           Bitmap captureBmp = Media.getBitmap(getContentResolver(), Uri.fromFile(file));
          iv.setImageBitmap(captureBmp);//show in imageview
       } catch (FileNotFoundException e) {
      e.printStackTrace();
      } catch (IOException e) {
      e.printStackTrace();
       }
      break;
    }
  }
} 
```

# android - 禁用EditText的输入法但保持光标闪烁

> ID：12870577
> 
> 赞同：4
> 
> 时间：2012-10-13T06:26:47.700
> 
> 标签：android, android-widget

在我的 Android 应用程序中，我想要一个`EditText`with`android:editable="false"`但光标闪烁。“可编辑”设置为 false 后，光标闪烁似乎不起作用。

我只想使用我自己的键盘小部件（不是系统的软键盘），并保持光标闪烁。

有什么想法可以让这成为可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-11T00:12:37.167

也许尝试完全省略 xml 属性`android:editable`，然后尝试以下组合

保持光标闪烁**并**防止触摸事件弹出本机 IME（键盘）..

```
/*customized edittext class 
* for being typed in by private-to-your-app custom keyboard.
* borrowed from poster at http://stackoverflow.com/questions/4131448/android-how-to-turn-off-ime-for-an-edittext
*/
public class EditTextEx extends EditText {
    public EditTextEx(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    @Override 
    public boolean onCheckIsTextEditor() {

        return false; //for some reason False leads to cursor never blinking or being visible even if setCursorVisible(true) was called in code.
    }       
} 
```

step 2 把上面的方法改成说 `return true;`

第 3 步在上面的类中添加另一个方法。

```
@Override
public boolean isTextSelectable(){
    return true;
} 
```

第 4 步在已实例化并调用此类实例的其他位置，`viewB`我添加了一个新的触摸事件处理程序

```
 viewB.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent event) {
            viewB.setCursorVisible(true);
            return false;
        }
    }); 
```

第 5 步检查以确保 XML 和/或 EditText 实例化代码将 IME/键盘类型声明为“无”。我没有确认相关性，但我也使用下面的可聚焦属性。

```
<questionably.maybe.too.longofa.packagename.EditTextEx
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:inputType="none"> 
```

抱歉这么多 xml 属性。我的代码全部使用它们，在 中进行测试`4.2.1`，并有结果。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:28:57.960

您可以使用 xml 属性

> 机器人：cursorVisible="假"

或java函数

> 设置游标可见（假）。

它会起作用的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-27T21:51:48.687

只需为任何寻找和回答的人添加此方法。我尝试了很多方法，但只有这一种对我有用。

```
 public static void disableSoftKeyboard(final EditText v) {
    if (Build.VERSION.SDK_INT >= 11) {
        v.setRawInputType(InputType.TYPE_CLASS_TEXT);
        v.setTextIsSelectable(true);
    } else {
        v.setRawInputType(InputType.TYPE_NULL);
        v.setFocusable(true);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-17T21:15:11.157

我从 onCreate() 调用了以下内容，但这会影响所有 EditTexts。

```
private void hideKeyboard ()
{
    getWindow ().setSoftInputMode (WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
    getWindow ().setFlags (WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,
                           WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);
} 
```

# php - 查看变量是否在数组中

> ID：12870578
> 
> 赞同：0
> 
> 时间：2012-10-13T06:26:47.797
> 
> 标签：php, mysql

我正在使用 MySQL 数据库。我完全确定该 ID 确实存在于数据库中。为什么它会到最后一个 else （在哪里说 //incorrect id）？

```
<?php
            //Localise user id.
            $userid = $_SESSION['userid'];

            //Get content of the article.
            $sql = "SELECT * FROM articles WHERE creatorid = '$userid'";
            $result = mysql_query($sql) or die(mysql_error()); //Execute. If fails, show error.
            $array = mysql_fetch_array($result);

            if(in_array($articleid, $array)) //If the URL id exists in the database (array)
            {
                //The article does actually exist for that user. They requested it.
                $sql = "SELECT * FROM articles WHERE id = '$articleid'";                
                $result = mysql_query($sql) or die(mysql_error()); //Execute. If fails, show error. 
                $array = mysql_fetch_array($result);

                        $content = $array['content'];

                        if($content != '') //If the article has actually been written.
                        {
                            include($_SERVER['DOCUMENT_ROOT'] . '/includes/renderimage.php');
                        }   else
                            {
                                //Article actually hasn't been written.
                            }
            }   else
                {
                    //Incorrect ID.
                }
                ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:42:51.563

您只查看返回的第一行。您需要`mysql_fetch_array`循环调用以获取每一行。此外，您不应该使用`in_array()`，因为文章 ID 可能出现在其他列中（如果您正在检查文章 #3 和用户 #3 怎么办？）。

但是，如果您只想查看文章是否由该用户创建，则可以使用不同的查询：

```
SELECT * FROM articles WHERE creatorid = '$userid' AND articleid = '$articleid'; 
```

这应该返回 0 或 1 行，具体取决于用户是否创建了文章。然后，您可以使用`mysql_num_rows()`来测试这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:36:44.620

看来您访问阵列不正确。最重要的是，如果创建者发布了多篇文章，那么您将返回多篇文章，因此您的 in_array() 完全无效。将查询的限制更改为一条记录 (LIMIT 0,1) 并通过调用访问创建者 ID：

```
$result[0]->creatorid or $result['creatorid'] 
```

取决于您的资源是如何被查询的

# c# - 如何使用上下文菜单将文件导入我的应用程序（右键单击）

> ID：12870579
> 
> 赞同：0
> 
> 时间：2012-10-13T06:26:47.797
> 
> 标签：c#, shell, stream, contextmenu

我希望将我的应用程序添加到-右键单击上下文菜单项中，并且当我右键单击文件并选择我的程序时，我想导入文件路径

我正在使用此代码在上下文菜单中添加应用程序

```
private void btnAddMenu_Click(object sender, System.EventArgs e)
{
    RegistryKey regmenu = null;
    RegistryKey regcmd = null;
    try
    {
        regmenu = Registry.ClassesRoot.CreateSubKey(MenuName);
        if(regmenu != null)
            regmenu.SetValue("",this.txtName.Text);
        regcmd = Registry.ClassesRoot.CreateSubKey(Command);
        if(regcmd != null)
                regcmd.SetValue("",this.txtPath.Text);
    }
    catch(Exception ex)
    {
        MessageBox.Show(this,ex.ToString());
    }
    finally       
    {
        if(regmenu != null)
            regmenu.Close();
        if(regcmd != null)
            regcmd.Close();
    }        
} 
```

所以任何人都知道如何将文件路径导入应用程序！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:46:46.477

这并不难。基本上，您需要将项目添加到 Registry.ClassesRoot.CreateSubKey 注册表。

您可以读取`main(string[] args)`方法中的参数。它将作为`args`参数的内容传递。`Environment.GetCommandLineArgs()`您还可以使用该方法在应用程序的其他任何地方获取该值。

查看这些参考资料：

1.  [向 Windows 资源管理器添加上下文菜单](http://www.codeproject.com/KB/cs/appendmenu.aspx)
2.  [将“使用记事本打开”添加到所有文件的上下文菜单](http://www.howtogeek.com/howto/windows-vista/add-open-with-notepad-to-the-context-menu-for-all-files/)

# oracle - JPA-2.0 将所有版本保存在数据库/历史记录中

> ID：12870588
> 
> 赞同：0
> 
> 时间：2012-10-13T06:28:05.690
> 
> 标签：oracle, jpa-2.0, versioning

我正在使用 JPA 2、eclipselink、Oracle DB。

是否有可能将所有版本保留在数据库（历史）中？

是否有 eclipselink/toplink 开关，或者我应该寻找特殊的 Oracle 驱动程序？

简单地说，每个 SQL 更新/删除都将是 SQL 插入。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:55:09.513

JPA 2.0 本身不提供对跟踪更改的直接支持。幸运的是 EclipseLink 为这种需要提供了 HistoryPolicy 扩展。对原表进行更改时，具有有效期的行将被持久化到单独的表中。文档在[这里](http://wiki.eclipse.org/EclipseLink/Examples/JPA/History)。

# c - 在linux中使用mediainfo获取所有可能的视频文件数据（使用C）

> ID：12870591
> 
> 赞同：1
> 
> 时间：2012-10-13T06:28:23.747
> 
> 标签：c, linux, video-processing, mediainfo

我需要从纯 C 的视频文件中提取所有元数据以及播放长度信息。

我凝视并找到了 MediaInfo 库，但找不到任何相关的 c 示例代码。

有没有其他方法可以在有/没有 MetaInfo 的情况下实现这一目标？

或者有人可以指出我在 C 中的 MediaInfo 的一个很好的示例代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:43:35.760

作为 ffmpeg 一部分的 ffprobe 可以做更多的事情。

不带开关的 ffprobe 将提供一些常见信息 它还有很多开关，您可以一次使用一个 [独家]

*   -show_format 显示格式/容器信息
*   -show_streams 显示流信息
*   -show_packets 显示数据包信息
*   -show_frames 显示帧信息
*   -show_data 显示数据包数据

试试看。

# javascript - 为什么 jslint 突出显示 ++？

> ID：12870592
> 
> 赞同：1
> 
> 时间：2012-10-13T06:28:26.743
> 
> 标签：javascript, jquery, jslint

我有以下代码：

```
for (i = 0; i < json.AnsData.length; i++) { 
```

jsLint 告诉我：

```
Warning 96  JS Lint: Unexpected '++'. 
```

有人知道为什么是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:30:24.873

来自[http://www.jslint.com/lint.html](http://www.jslint.com/lint.html)：

> 众所周知，++（递增）和 --（递减）运算符会通过鼓励过多的技巧来导致糟糕的代码。它们在启用病毒和其他安全威胁方面仅次于错误的架构。此外，前增量/后增量混淆会产生非常难以诊断的错误。有一个 plusplus 选项允许使用这些运算符。

JSLint 非常严格，反映了其作者 Douglas Crockford 的观点。克罗克福德很棒，但他也很固执己见，有些人发现他的意见对他们的口味来说太过分了。如果您发现回避`++`不是您可以落后的事情，请尝试 JSHint 而不是 JSLint（或将 JSLint 中的选项设置为容忍`++`）。

# android - Viewflipper - 垂直滑块

> ID：12870598
> 
> 赞同：3
> 
> 时间：2012-10-13T06:29:00.160
> 
> 标签：android, viewflipper

我已经使用 Viewflipper 做了滑块，我们可以说从右到左意味着水平滑块。
但我想让它顶部（从顶部进入）到底部（从底部到底部）意味着垂直滑块。
下面是我的水平滑动代码。

```
public static Animation inFromRightAnimation(int duration) {
        Animation inFromRight = new TranslateAnimation(
        Animation.RELATIVE_TO_PARENT,  +1.0f, Animation.RELATIVE_TO_PARENT,  0.0f,
        Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
        );
        inFromRight.setDuration(duration);
        inFromRight.setInterpolator(new AccelerateInterpolator());
        return inFromRight;
    }

    public static Animation outToLeftAnimation(int duration) {
        Animation outtoLeft = new TranslateAnimation(
          Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  -1.0f,
          Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
        );      
        outtoLeft.setDuration(duration);
        outtoLeft.setInterpolator(new AccelerateInterpolator());
        return outtoLeft;
    } 
```

我需要什么改变才能让它垂直（从上到下）滑动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:37:26.717

```
public static Animation inFromUpAnimation(int duration) {
        Animation inFromRight = new TranslateAnimation(
        Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  0.0f,
        Animation.RELATIVE_TO_PARENT,  +1.0f, Animation.RELATIVE_TO_PARENT,   0.0f
        );
        inFromRight.setDuration(duration);
        inFromRight.setInterpolator(new AccelerateInterpolator());
        return inFromRight;
    }

    public static Animation outToDownAnimation(int duration) {
        Animation outtoLeft = new TranslateAnimation(
          Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  0.0f,
          Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  -1.0f
        );      
        outtoLeft.setDuration(duration);
        outtoLeft.setInterpolator(new AccelerateInterpolator());
        return outtoLeft;
    } 
```

这些属性与 x 和 y 坐标有关。我认为这将完成这项工作

# mysql - 准备Sql语句并存储在变量中

> ID：12870605
> 
> 赞同：0
> 
> 时间：2012-10-13T06:29:27.210
> 
> 标签：mysql, vb.net, prepared-statement

我有一个问题，我在下面简化了。我有一个由参数填充的 sql 语句，即 Prepared 语句。是否可以获得最终的准备好的语句并将其存储在变量中

这是我想要做的，但它不起作用

```
Dim cmd As New MySqlCommand("UPDATE `users` SET `email` = ?email", con)
cmd.Prepare()
cmd.Parameters.AddWithValue("?name", "newEmail") 
```

现在我在这里尝试这样做

```
Dim finalQuary As String = cmd.CommandText.ToString 
```

我这样做是希望在变量中得到这个：

```
"UPDATE `users` SET `email` = theEmailAddress" 
```

但相反，我得到了原始的未经准备的声明，即

```
UPDATE `users` SET `email` = ?email 
```

我希望你能理解我的问题。如果我不清楚，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:36:58.043

替换是在执行时在 MySQL 端完成的。您基本上是在尝试获取一个函数的代码，其中所有参数都替换为提供的值。除非 VB.NET 正在模拟准备好的语句（我猜它不是），或者 MySQL 有一个 API 可以返回一个插值字符串（据我所知它没有），否则你无法获得插值字符串版本的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:30:47.023

使用`@`而不是`?`

```
Dim cmd As New MySqlCommand("UPDATE `users` SET `email` = @email", con)
cmd.Parameters.AddWithValue("@email", "newEmail") 
```

# java - Java 中的目录扫描器

> ID：12870606
> 
> 赞同：3
> 
> 时间：2012-10-13T06:30:11.110
> 
> 标签：java, multithreading, polling, java.util.concurrent

连续扫描一组目录以查找一组文件名过滤器。对于每个到达的文件名过滤器，处理文件并对所有文件重复这些步骤

在 jdk 1.5 中推荐的设计是什么，可能使用 java.concurrent.Executor 和 Future

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:11:59.137

我想这就是你想要做的：

1.  你有一组目录：

    > 目录1 目录 2
    > 目录
    > 3

2.  并且您需要在这 3 个目录上放置一个“监视”以获取特定的文件名模式。示例：如果添加了一个带有 name: 的新文件`watchme_9192.log`，那么您的 java 逻辑应该启动并处理该文件。

因此，基于该假设，您可以尝试：[jnotify](http://jnotify.sourceforge.net/)

> JNotify 是一个 java 库，允许 java 应用程序监听文件系统事件，例如：
> 文件创建
> 文件修改
> 文件重命名
> 文件删除

此外，相关：[目录轮询的最佳实践](https://stackoverflow.com/questions/2400428/best-practice-for-directory-polling)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T05:33:31.990

我已经使用网络爬虫完成了类似的任务。只需进行一些更改......这是一个并发实现，新找到的目录被执行器框架中的线程池扫描。它使用队列和列表的并发集合保存索引文件。索引器从队列中提取文件并对它们进行处理。这是 FileFilter 实现

```
 public class ImageFileFilter implements FileFilter
    {
      private final String[] okFileExtensions = 
        new String[] {"jpg", "png", "gif"};

      public boolean accept(File file)
      {
        for (String extension : okFileExtensions)
        {
          if (file.getName().toLowerCase().endsWith(extension))
          {
            return true;
          }
        }
        return false;
      }
    } 
```

这是具有主要方法的类...

```
 public class FileFilterTest {
        public static void main(String[] args) {
            File dir = new File("D:\\dev\\css-templates\\cms-admin");
            BlockingQueue blockingQueue = new ArrayBlockingQueue(5);
            FileCrawler fileCrawler = new FileCrawler(blockingQueue,
                    new ImageFileFilter(), dir);
            new Thread(fileCrawler).start();

            FileIndexer indexer = new FileIndexer(blockingQueue);
            new Thread(indexer).start();
        }
    } 
```

这是文件爬虫线程

```
 public class FileCrawler implements Runnable {
            private final BlockingQueue fileQueue;
            private ConcurrentSkipListSet indexedFiles = new ConcurrentSkipListSet();
            private final FileFilter fileFilter;
            private final File root;
            private final ExecutorService exec = Executors.newCachedThreadPool();

            public FileCrawler(BlockingQueue fileQueue,
                               final FileFilter fileFilter,
                               File root) {
                this.fileQueue = fileQueue;
                this.root = root;
                this.fileFilter = new FileFilter() {
                    public boolean accept(File f) {
                        return f.isDirectory() || fileFilter.accept(f);
                    }
                };
            }

            public void run() {

                    submitCrawlTask(root);

            }

            private void submitCrawlTask(File f) {
                CrawlTask crawlTask = new CrawlTask(f);
                exec.execute(crawlTask);
            }

            private class CrawlTask implements Runnable {
                private final File file;

                CrawlTask(File file ) {

                    this.file= file;
                }

             public void run() {        
                 if(Thread.currentThread().isInterrupted())
                return;

                    File[] entries = file.listFiles(fileFilter);

                    if (entries != null) {
                        for (File entry : entries)
                            if (entry.isDirectory())
                                submitCrawlTask(entry);
                            else if (entry !=null && !indexedFiles.contains(entry)){
                                indexedFiles.add(entry);
                                try {
                                    fileQueue.put(entry);
                                } catch (InterruptedException e) {
                                        Thread.currentThread().interrupt();
                                }
                            }
                    }
                }
        }
       } 
```

这是文件索引器线程

```
 public class FileIndexer implements Runnable {
        private final BlockingQueue queue;

        public FileIndexer(BlockingQueue queue) {
            this.queue = queue;
        }

        public void run() { 
            try {
                while (true) {
                    indexFile(queue.take());
                }
            } catch (InterruptedException e) {
                System.out.println("Indexer Interrupted");
                Thread.currentThread().interrupt();
            }
        }

        public void indexFile(File file) {
            // do something with the file...
            System.out.println("Indexing File : " + file.getAbsolutePath() + " " + file.getName());
        };
    } 
```

# c# - C# 中的三元运算符 (?:) 线程安全吗？

> ID：12870611
> 
> 赞同：7
> 
> 时间：2012-10-13T06:30:27.093
> 
> 标签：c#, thread-safety, ternary-operator

考虑以下两种在`currentPrice`和`100`...之间获得更大数字的替代方案

```
int price = currentPrice > 100 ? currentPrice : 100

int price = Math.Max(currentPrice, 100) 
```

我提出这个问题是因为我在考虑`currentPrice`变量可以被其他线程编辑的上下文。

在第一种情况下......`price`可以获得低于`100`？

我正在考虑以下问题：

```
if (currentPrice > 100) {
    //currentPrice is edited here.
    price = currentPrice;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T06:33:55.370

它不是线程安全的。

`?:`只是 normal 的快捷方式`if`，因此您的`if`示例相当于`?`一个 - 如果在此代码之外没有锁定，您可以获得低于 100 的价格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T06:49:25.090

理论上，currentPrice 会被读取两次。一次比较，一次分配。

在实践中，编译器可能会缓存对变量的访问。我不知道 C# 但在 x86 上的 C++ 中：

```
MOV AX, [currentPrice]
MOV BX, 100 ;cache the immediate
CMP AX, BX
JLE $1      ;if(currentPrice > 100){
MOV AX, BX
$1:         ;}
MOV [BP+price], AX ;price is on the stack. 
```

除非 currentPrice 被声明为 volatile，否则 Java 字节码中会发生相同的 load-once 优化。

因此，从理论上讲，它可能会发生。实际上，在大多数平台上，它不会，但你不能指望它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-13T06:51:25.257

不是 C# 方面的专家，但即使 var++ 也不是线程保存，因为可以转换为从汇编中的寄存器读取/写入。

三元运算符要复杂得多。它有 3 个部分，而每个部分都可以无限大（例如调用某个函数）。因此，很容易得出三元运算符不是线程安全的结论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T07:08:28.587

正如其他人所说，它可能会被缓存，但语言不需要它。

如果您需要无锁线程安全分配，您可以使用[Interlocked.CompareExchange 。](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.compareexchange.aspx)但是给出这个例子，我会选择更粗粒度的锁定策略。

# php - 从复选框制作数组

> ID：12870621
> 
> 赞同：3
> 
> 时间：2012-10-13T06:33:14.577
> 
> 标签：php

我不想从复选框中创建一个数组。

我已经使用`array($_POST[test],$_POST[test1],$_POST[test2])` 它可以工作，但是如果一个数组为 NULL，则该数组也为 NULL

所以我不想要的是如果一个数组是NULL，它不在数组中

像这样

```
$_POST['test']=NULL;
$_POST['test1']="ARAAY1";
$_POST['test2']="ARRAY2"; 
```

它会是`array($_POST[test1],$_POST[test2])`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T06:34:53.830

尝试类似的东西

```
<input type="checkbox" name="options[]" value="one"/> one<br/>
<input type="checkbox" name="options[]" value="tow"/> tow<br/>
<input type="checkbox" name="options[]" value="three"/> three<br/>

$checked = $_POST['options'];
for($i=0; $i < count($checked); $i++){
    echo "Selected " . $checked[$i] . "<br/>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T06:36:03.110

您可以使用`is_null()`来检查一个值是否为`NULL`或`isset()`检查它是否已设置而不是 NULL。然后，当且仅当它不是时，您可以将该变量附加到数组中`NULL`。

更好地做@NullPointer 在他们的答案中设置表单的地方，以便复选框值作为数组开始。

# actionscript-3 - 在 Flex 应用程序中，将整个站点更改为不同的语言？

> ID：12870627
> 
> 赞同：1
> 
> 时间：2012-10-13T06:34:24.637
> 
> 标签：actionscript-3, apache-flex, flex3

我在 flex 中做一个网站，在那个给用户的选项中选择语言更改选项......假设如果用户选择印地语，总网站将以印地语显示..如何执行此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:47:31.083

Adobe Flex 3 帮助中描述了此问题的解决方案：http: //livedocs.adobe.com/flex/3/html/help.html?content=
[l10n_1.html](http://livedocs.adobe.com/flex/3/html/help.html?content=l10n_1.html)

并且在这里描述了您想要的内容（带有示例）： http://livedocs.adobe.com/flex/3/html/help.html?content=
[l10n_1.html](http://livedocs.adobe.com/flex/3/html/help.html?content=l10n_1.html)

# ios - prepareSegue 可以访问目标控制器的哪些类型的属性？

> ID：12870629
> 
> 赞同：1
> 
> 时间：2012-10-13T06:34:48.117
> 
> 标签：ios, storyboard, uistoryboard, segue, uistoryboardsegue

当我尝试在 prepareSegue 方法中从目标控制器设置属性时，某些类型的属性是可能的，而另一些则不是。例如，假设我的目标控制器包含以下属性：

```
@interface MapController:UIViewController
  @property (weak, nonatomic) IBOutlet UIWebView *streetView;
  @property (strong, nonatomic) NSString *url;
  @property (nonatomic) NSString *latitude;
  @property (nonatomic) NSString *longitude;
  @property (nonatomic) Venue *venue;
@end 
```

顺便说一句，“地点”看起来像这样：

```
@interface Venue:NSObject
  @property (nonatomic) NSString *latitude;
  @property (nonatomic) NSString *longitude;
@end 
```

以下代码有效：

```
/****** CODE 1 *******/
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([[segue identifier] isEqualToString:@"MapViewSegue"]){
      MapController *cvc = 
            (MapController *)[segue destinationViewController]; 
      NSIndexPath *selectedIndex = self.tableView.indexPathForSelectedRow;        
      Venue *v = (Venue *)[self.entries objectAtIndex:[selectedIndex row]];

      /****** Note the difference from CODE 2 below! ******/
      cvc.latitude = v.latitude;
      cvc.longitude = v.longitude;

      // At this point,
      // both cvc.latitude and cvc.longitude are properly set.

    }
} 
```

但这一个不起作用：

```
/****** CODE 2 *******/
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([[segue identifier] isEqualToString:@"MapViewSegue"]){
      MapController *cvc = 
            (MapController *)[segue destinationViewController]; 
      NSIndexPath *selectedIndex = self.tableView.indexPathForSelectedRow;        
      Venue *v = (Venue *)[self.entries objectAtIndex:[selectedIndex row]];

      /****** Note the difference from CODE 1 above! ******/
      cvc.venue.latitude = v.latitude;
      cvc.venue.longitude = v.longitude;

      // At this point,
      // both cvc.venue.latitude and cvc.venue.longitude are nil

    }
} 
```

正如我在代码中所指出的，似乎可以在 prepareSegue 中设置 NSString 属性，但如果我尝试实例化自己的对象，它最终会返回 nil。我想知道为什么会这样。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:53:41.730

第二个代码不起作用，因为 cvc.venue 没有指向任何东西——您还没有在 MapController 类中实例化场地对象。您的自定义对象没有什么特别之处，与您拥有的没有什么不同：@property (nonatomic) NSArray *array; -- 在您实例化一个新的数组对象之前，数组将为 nil。

# java - 打开电子邮件客户端，将 JFreeChart 的图表（图像）粘贴在正文中

> ID：12870631
> 
> 赞同：1
> 
> 时间：2012-10-13T06:34:59.120
> 
> 标签：java, image, swing, email, jfreechart

我想要一个“电子邮件”按钮，它可以打开默认的电子邮件客户端并将 JFreeChart 图像粘贴到电子邮件正文中。我知道这可以通过复制图像（图表）并将其粘贴到电子邮件客户端来完成。但是，我希望通过单击按钮来完成此操作。我可以使用`Desktop.getDesktop().mail(...)`打开电子邮件客户端，但粘贴图像的其他要求对我来说仍然令人费解。这可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T08:02:53.990

图像通常有多大（以字节为单位）？您可以将其包含在嵌入为[数据 URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme#HTML)图像的基于 HTML 的电子邮件中。但这在一些较旧的浏览器中有大小限制，不确定电子邮件客户端。

更安全的是发送[Multipart message](http://en.wikipedia.org/wiki/MIME#Multipart_messages)。

# iphone - 如何在 iPhone 应用程序中隐藏 UISearchBar

> ID：12870632
> 
> 赞同：0
> 
> 时间：2012-10-13T06:35:00.020
> 
> 标签：iphone, objective-c, ios

我有 2 个标签：半径搜索和位置搜索。我`UISearchBar`在位置搜索中使用。这两个选项卡工作得很好，但是当我在搜索栏中搜索一些结果，然后立即单击半径选项卡时，我试图隐藏搜索栏。

我正在使用以下代码：

```
self.searchtextbar.hidden=YES;    
self.searachtextbar=nil;
[self.searchtextbar removeFromSuperView]; 
```

以上三个语句正在执行，但它不工作并且搜索栏没有隐藏。

请给出解决这个问题的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:46:09.240

你不能使用

```
self.searachtextbar=nil;
[self.searchtextbar removeFromSuperView]; 
```

按照这个顺序。设置`self.searachtextbar=nil;`后，您无法将其从 superview 中删除，因为您已将值设置`self.searachtextbar`为 nil。它相当于`[nil removeFromSuperView];`which 不会做任何事情。

还要确保`self.searachtextbar`在执行之前不为零`self.searchtextbar.hidden=YES;`

# django - GAE：使用“名称”参数的数据库模型属性

> ID：12870637
> 
> 赞同：0
> 
> 时间：2012-10-13T06:36:29.037
> 
> 标签：django, google-app-engine, django-models, google-cloud-datastore

尝试通过`name`在属性中使用来优化数据库模型类属性名称。

前任。

```
class terminals(db.Model):
   location_code = db.StringProperty()
   terminal_code = db.StringProperty(default='')
   start_invoice_no = db.IntegerProperty(indexed=False, default=1, name='sin')
   next_invoice_no = db.IntegerProperty(indexed=False)
   last_doc_details = db.TextProperty(default='{}') 
```

终端查询：

```
terminal_qry = db.Model(terminals).all() 
```

将发生的事情很好地放入数据库中。但是当我尝试序列化这个查询对象时。

```
serializers.serialize('json', [terminal_qry]) 
```

它将错误提高为，

```
AttributeError: 'terminals' object has no attribute 'sin' 
```

谁能告诉这个，这里哪里出错了？

问候。

# c# - 如何使用 SOAP UI 传递 DTO

> ID：12870638
> 
> 赞同：2
> 
> 时间：2012-10-13T06:36:36.080
> 
> 标签：c#, .net, web-services, soapui, dto

我在 .NET 中有一个 Web 服务，它接受参数作为 DTO。当我使用 SOAP UI 传递值时，该对象没有进入 .NET Web 服务。

我的 DTO 是一个 get、set 类，我在我的 Web 服务方法中使用这个 DTO，如下所示。

```
getQuote(RequestDTO requestDTO) 
```

当我使用 SOAP UI 像下面的请求一样对其进行测试时，`requestDTO`总是会出现`null`方法`getQuote`。但是，当我使用调用此 Web 服务的示例 .NET ASPX 页面进行测试时，它工作正常。

以下是我在 SOAP UI 中的请求。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"     xmlns:tem="http://tempuri.org/">
<soapenv:Header/>
<soapenv:Body>
<getQuotes>
<requestQuoteDTO>
<SystemID>123</SystemID>
<RequestCircuitID>6012344</RequestCircuitID>
<PriceAllNodes>false</PriceAllNodes>
<siteDTO>
<SiteName>Test SOAPUI</SiteName>
<Street1>5 St Johns Lane</Street1>
<Street2></Street2>
<City>London</City>
<PostCode>EC1M 4BH</PostCode>
<State></State>
<Country>GBR</Country>
<Wirecentre></Wirecentre>
<SitePhoneNumber></SitePhoneNumber>
<Latitude></Latitude>
<Longitude></Longitude>
</siteDTO>
<ProductRef>PIP</ProductRef>
<SpeedRef>4 Mbps</SpeedRef>
<LineTypeRef>Ethernet</LineTypeRef>
<ContractTerm>2</ContractTerm>
</requestQuoteDTO>
</getQuotes>
</soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:48:56.323

肥皂请求看起来像这样

```
enter code here
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">
<soapenv:Header/>
<soapenv:Body>
  <tem:getQuotes>
     <tem:requestQuoteDTO>
        <tem:SystemID>?</tem:SystemID>
        <tem:RequestCircuitID>?</tem:RequestCircuitID>
        <tem:PriceAllNodes>?</tem:PriceAllNodes>
        <tem:siteDTO>
           <tem:SiteName>?</tem:SiteName>
           <tem:Street1>?</tem:Street1>
           <tem:Street2>?</tem:Street2>
           <tem:City>?</tem:City>
           <tem:PostCode>?</tem:PostCode>
           <tem:State>?</tem:State>
           <tem:Country>?</tem:Country>
           <tem:Wirecentre>?</tem:Wirecentre>
           <tem:SitePhoneNumber>?</tem:SitePhoneNumber>
           <tem:Latitude>?</tem:Latitude>
           <tem:Longitude>?</tem:Longitude>
        </tem:siteDTO>
        <tem:ProductRef>?</tem:ProductRef>
        <tem:SpeedRef>?</tem:SpeedRef>
        <tem:LineTypeRef>?</tem:LineTypeRef>
        <tem:ContractTerm>?</tem:ContractTerm>
     </tem:requestQuoteDTO>
  </tem:getQuotes> 
```

# android - EditText addTextChangedListener 获取消息源未找到

> ID：12870642
> 
> 赞同：0
> 
> 时间：2012-10-13T06:37:06.713
> 
> 标签：android, android-layout, android-emulator, android-edittext, android-widget

在这里，我希望每当用户更改edittext的值然后textview的值也会随着使用量edittext的乘法而改变，但是每当我想在错误消息出现之前更改edittext值时，找不到源 - VeiwRootImpl.deliverInputEvent（ ViewRoot$QueueInputEvent) 行：3125

我还放置了一些代码：-

```
edit_qty_regular_code.addTextChangedListener(new TextWatcher() {

        public void afterTextChanged(Editable s) {
            text_price_regular_code.setText (Integer.toString(qty));
        }

        public void beforeTextChanged(CharSequence s, int start, 
          int count, int after) {
            x=Integer.parseInt(text_price_regular_code.getText().toString());
        }

        public void onTextChanged(CharSequence s, int start, 
          int before, int count) 
        {
                qty=Integer.parseInt (edit_qty_regular_code.getText().toString());
                qty=(int) ((int)qty*(int)x);

        }
       }); 
```

Logcat 报告

```
10-13 14:06:26.359: I/System.out(664): waiting for debugger to settle...
10-13 14:06:26.559: I/System.out(664): debugger has settled (1478)
10-13 14:06:28.019: 
D/dalvikvm(664): GC_CONCURRENT freed 82K, 
3% free 8328K/8519K, paused 34ms+20ms, total 125ms
10-13 14:06:28.880: I/Choreographer(664): Skipped 61 frames!  
The application may be doing too much work on its main thread.
10-13 14:06:29.199: D/gralloc_goldfish(664): Emulator without GPU emulation detected.
10-13 14:06:32.689: I/Choreographer(664): Skipped 227 frames!  
The application may be doing too much work on its main thread. 
```

但是如果我将这四行代码放在复选框勾选事件中，那么我没有遇到问题......请告诉我我在哪里做错了

# java - 将十六进制字符串转换为base64

> ID：12870645
> 
> 赞同：2
> 
> 时间：2012-10-13T06:37:35.423
> 
> 标签：java

请帮助我将十六进制字符串转换为 base64

这是我得到例外的地方

```
 String hexString = "bf940165bcc3bca12321a5cc4c753220129337b48ad129d880f718d147a2cd1bfa79de92239ef1bc06c2f05886b0cd5d";

private static String ConvertHexStringToBase64(String hexString) {
    System.out.println(hexString);
    if ((hexString.length()) % 2 > 0)
        throw new NumberFormatException("Input string was not in a correct format.");
     byte[] buffer = new byte[hexString.length() / 2];
        int i = 0;
        while (i < hexString.length())
        {
            buffer[i / 2] = Byte.parseByte(hexString.substring(i, 2));
            i += 2;
        }
        System.out.println("hexSring"+hexString+"afterconverttobase64"+Base64.encodeBase64String(buffer));
        return Base64.encodeBase64String(buffer);

} 
```

我在这里遇到一个例外::`bf940165bcc3bca12321a5cc4c753220129337b48ad129d880f718d147a2cd1bfa79de92239ef1bc06c2f05886b0cd5d Exception in thread "main" java.lang.NumberFormatException: For input string: "bf" at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48) at java.lang.Integer.parseInt(Integer.java:449) at java.lang.Byte.parseByte(Byte.java:151) at java.lang.Byte.parseByte(Byte.java:108) at com.motorola.gst.DecryptTest3.ConvertHexStringToBase64(DecryptTest3.java:38) at com.motorola.gst.DecryptTest3.main(DecryptTest3.java:16)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T06:57:21.640

首先，您必须在`parseByte`方法中指定指定基数（在您的情况下为 16）以避免 numberFormat 异常：

```
 buffer[i / 2] = Byte.parseByte(hexString.substring(i, 2),16); 
```

但是，您的代码似乎已损坏，请查看更正后的代码：

```
 if ((hexString.length()) % 2 > 0)
          throw new NumberFormatException("Input string was not in a correct format.");
       int[] buffer = new int[hexString.length() / 2];
          int i = 2;
          while (i < hexString.length())
          {
              buffer[i / 2] = Integer.parseInt(hexString.substring(i, i + 2),16);
              i += 2;
          } 
```

你的循环是错误的，你必须解析为整数，因为你的输入字符串中有一些值溢出了字节能力......

如果您需要字节，您可以通过这种方式将解析的 int 转换为字节：

```
 byte[] buffer = new byte[hexString.length() / 2];
          int i = 2;
          while (i < hexString.length())
          {
              buffer[i / 2] = (byte)Integer.parseInt(hexString.substring(i, i + 2),16);
              i += 2;
          } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-05T16:23:51.517

找到了一个类似的解决方案，认为分享一下可能会很好：

```
 public static string convertHexToBase64String(String hexString)
    {
        string base64 = "";

        //--Important: remove "0x" groups from hexidecimal string--
        hexString = hexString.Replace("0x", "");

        byte[] buffer = new byte[hexString.Length / 2];

        for (int i = 0; i < hexString.Length; i++)
        {
            try
            {
                buffer[i / 2] = Convert.ToByte(Convert.ToInt32(hexString.Substring(i, 2), 16));
            }
            catch (Exception ex) { }
            i += 1;
        }

        base64 = Convert.ToBase64String(buffer);

        return base64;
    } 
```

希望它可以帮助别人。

# domain-driven-design - 查找值是否应该建模为聚合根？

> ID：12870650
> 
> 赞同：11
> 
> 时间：2012-10-13T06:39:06.233
> 
> 标签：domain-driven-design, lookup-tables, aggregateroot

作为我的域模型的一部分，假设我有一个`WorkItem`对象。该`WorkItem`对象与查找值有多种关系，例如：

`WorkItemType`：

*   用户故事
*   漏洞
*   增强

`Priority`：

*   高的
*   中等的
*   低的

可能还有更多，例如`Status`,`Severity`等...

DDD 指出，如果聚合根中存在某些内容，则不应尝试在聚合根之外访问它。因此，如果我希望能够添加新的 WorkItemType（如 Task）或新的 Priorities（如 Critical），这些查找值是否需要与它们自己的存储库聚合根？这似乎有点矫枉过正，特别是如果它们只是一个键值对。我应该如何允许用户修改这些值并仍然遵守聚合根封装规则？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T17:43:50.370

While the repository pattern as described in the [blue book](https://rads.stackoverflow.com/amzn/click/com/0321125215) does emphasize its use being exclusive to aggregates, it does leave room open for exceptions. To quote the book:

> Although most queries return an object or a collection of objects, it also fits within the concept to return some types of summary calculations, such as an object count, or a sum of a numerical attribute that was intended by the model to be tallied. (pg. 152)

This states that a repository can be used to return summary information, which is not an aggregate. This idea extends to using a repository to look up value objects, just as your use case requires.

Another thing to consider is the [read-model pattern](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/) which essentially allows for a query-only type of repository which effectively decouples the behavior-rich domain model from query concerns.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-13T08:09:52.230

Landon，我认为唯一的方法是让这些值对聚合根。我知道这可能看起来有点矫枉过正，但这是 DDD 将事物分解为小组件。

我认为使用存储库是正确方法的原因是：

*   用户需要能够独立于工作项添加这些值对。
*   值对没有本地唯一标识

请记住，DDD 只是一套指导方针，而不是硬道理。如果您认为这太过分了，您可能想要创建一个查找，将这些对作为值对象返回。如果您没有在应用程序中添加值对而是通过数据库添加值对的功能，这可能会特别有效。

作为旁注，好问题！有很多关于这种情况的博客文章......但并不是所有人都同意最好的方法来做到这一点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-13T09:03:12.107

Not everything should be modeled using DDD. The complexity of managing the reference data most likely wouldn't justify creating aggregate roots. A common solution would be to use CRUD to manage reference data, and have a Domain Service to interface with that data from the domain.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T10:26:16.247

Do these lookups have ID's ? If not, you could consider making them [Value Objects](http://stochastyk.blogspot.fr/2008/05/value-objects-in-domain-driven-design.html)...

# ruby - 从字符串中仅选择 ruby 中的非空格和单词字符

> ID：12870652
> 
> 赞同：0
> 
> 时间：2012-10-13T06:39:09.177
> 
> 标签：ruby, string

我用 ruby​​ 编写我的第一个程序。我想从字符串中选择除空格和非单词字符之外的所有字符来与我的其他字符串进行比较。我知道我可以通过在我的字符串上使用来选择非空白字符，`\S`并且我可以通过调用`\w`我的字符串来选择仅单词字符，但我无法找到任何地方如何将这两者结合起来仅选择非空白单词字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:45:51.090

单词字符都是非空白字符，所以`\w`就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:08:44.290

如果您有一段文本要尝试，这个在线 Ruby 正则表达式模拟器也可以提供帮助。

[http://rubular.com/](http://rubular.com/)

Ruby 也支持 $1 $2 $3 等，比如 Perl 和其他语言。

# google-chrome - 如何使列 flex 具有高度：100%？

> ID：12870653
> 
> 赞同：1
> 
> 时间：2012-10-13T06:39:18.520
> 
> 标签：google-chrome, css, flexbox

我想让以下内容垂直填充视口：

[http://codepen.io/anon/pen/lkpKu](http://codepen.io/anon/pen/lkpKu)

但是，应用`height: 100%`到外部 div 只要它有`display: flex`.

这是从：

[http://codepen.io/chriscoyier/pen/qazmI](http://codepen.io/chriscoyier/pen/qazmI)

水平填充视口没有问题。

有什么办法可以做到这一点？我愿意看到黑客，但理想情况下，这不需要我使用 Javascript 手动实现相同的效果（我知道该怎么做，我不问）。

我只是想让它在最新的 Chrome 上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T06:57:14.277

只需将 100% 的高度添加到 html 和 body 标签。`html, body{ height:100%;}`

# c# - 找不到错误（字符串 '' 后的未闭合引号。）

> ID：12870657
> 
> 赞同：0
> 
> 时间：2012-10-13T06:40:08.210
> 
> 标签：c#, sql-server-2008

代码片段：

```
dbCommand = new SqlCommand("sp_EVENT_UPATE '" 
    + currentEvent.EventID + "','" + currentEvent.Description + "','" 
    + currentEvent.DisciplineID + "'", dbConnection); 
```

我在哪里缺少报价？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:43:07.777

未闭合的引号很可能在您的变量之一中。此外，像这样构建查询会使您容易受到 sql 注入攻击。

查看使用 SqlCommand.Parameters 列表添加您的值。

像这样的东西

```
dbCommand = new SqlCommand("sp_EVENT_UPATE @eventId, @description, @disciplineID", dbConnection);

dbCommand.Parameters.AddWithValue("@peventId",currentEvent.EventID);
dbCommand.Parameters.AddWithValue("@description",currentEvent.Description);
dbCommand.Parameters.AddWithValue("@disciplineID",currentEvent.DisciplineID); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T06:46:22.000

使用`parameters`而不是`hardcoded`字符串。

```
using(dbCommand = new SqlCommand())
{
  dbCommand.CommandText="sp_EVENT_UPATE";
  dbCommand.Connection=dbConnection;
  dbCommand.CommandType=CommandType.StoredProcedure;
  dbCommand.Parameters.AddWithValue("@EventID",currentEvent.EventID);
  ....
  dbConnection.Open();
  dbCommand.ExecuteNonQuery();
  dbConnection.Close();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T06:43:18.657

您的 currentEvent.Description 可能具有破坏该 SQL 语句语法的单引号。您应该始终使用准备好的语句/命令来应对这种情况。

# actionscript - 使用 Flashbuilder 4.7 在 Actionscript for Mobile 项目中嵌入带有包含另一个 MovieClip 的 MovieClip 的 SWF 时出现错误 #1056

> ID：12870658
> 
> 赞同：0
> 
> 时间：2012-10-13T06:40:10.487
> 
> 标签：actionscript, air, flash-builder

我在使用 AIR 3.4 为 Android 编译的 Flashbuilder 4.7 中有一个 Actionscript Mobile 项目。（AIR SDK 位置：C:\Program Files\Adobe\Adobe Flash Builder 4.7\eclipse\plugins\com.adobe.flash.compiler_4.7.0.345990\AIRSDK）

我最近从 AIR 3.2 中恢复了该项目，并遇到了一个新的运行时错误。我从 SWF（最初从 Flash CS3 发布 - 在 AS3 中，但使用 Flash CS6 重新发布）导入了 MovieClip 资源 (truck_anm_mc)。“truck_anm_mc”影片剪辑包含另一个实例名称为“Flick”的影片剪辑。

这是它的导入方式：

```
 public var _truck_anim      :MovieClip;
    [Embed(source='/assets/blue/animation004.swf#truck_anm_mc')]
    public var TruckAnim            :Class; 
```

这就是它的使用方式（我已经注释掉了对它的所有进一步引用 - 这是唯一使用它的代码行，如果我注释掉这一行，错误就会消失）：

```
 _truck_anim = new TruckAnim() as MovieClip; 
```

这是错误：

```
ReferenceError: Error #1056: Cannot create property Flick on animation004_swf$915bbdce658b4869e6dc24efe65092b42084086601.
at flash.display::Sprite/constructChildren()
at flash.display::Sprite()
at animation004_swf$915bbdce658b4869e6dc24efe65092b42084086601()
    ... 
```

Flick 在 Truck_anm_mc 的时间线上。如果我从时间线上删除 Flick，则没有错误。

该错误报告无法在 Sprite 上创建属性 Flick，如果 truck_anm_mc 是 Sprite，这对我来说很有意义 - 但它是一个 MovieClip，应该能够附加任意属性。

我已经尝试过使用和不选中自动声明阶段实例选项创建的 SWF。我没有使用 TLF 或任何 RSL。它是一个非常简单的 SWF，仅包含一个 MovieClip，在其时间轴上在其中添加了另一个 MovieClip 动画。

MovieClip 都使用MovieClip 基文档类，并且它们的类由Flash 动态生成。我尝试为 truck_anm_mc 创建一个文档类 - 并将 Flick 声明为公共变量 - 但它并没有避免错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T02:44:08.593

通过使用不同的方法导入它，我成功地使用了相同的 MovieClip 资产。我将 MovieClips 导出到一个 SWC 文件中，并从 Actionscript Mobile 配置文件中引用了该文件。这是该方法的有用教程：

[http://www.codeandvisual.com/2009/how-to-import-movieclips-into-a-flash-builder-actionscript-project/](http://www.codeandvisual.com/2009/how-to-import-movieclips-into-a-flash-builder-actionscript-project/)

# ruby-on-rails - 嵌套表单无法批量分配，创建操作

> ID：12870661
> 
> 赞同：-1
> 
> 时间：2012-10-13T06:40:35.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms, has-many, belongs-to

我不得不将笔属性添加到纸张模型以停止错误“无法批量分配：笔”，即使我认为我有笔属性的 attr_accessible。

现在，我收到“未知属性：笔”错误。它指向创建操作的第二行。我想不通。

我基本上希望必须让 Paper New 操作创建笔并将其分配给纸张。

```
Paper model

attr_accessible  :name, :size, :line, 
                    :pen_attributes,
                        :pen, :colour, :style

has_many :pens
accepts_nested_attributes_for :pens 
```

* * *

```
Pens model

attr_accessible :name, :size, :line, :paper_attributes, :paper_id

belongs_to :paper 
```

* * *

```
<%= simple_nested_form_for @paper do |f| %>
        <%= f.input :name %>
        <%= f.input :size, :placeholder => "text" %>
        <%= f.input :line %>

            <%= f.fields_for @pen do |h| %>
            <%= h.input :pen,  %>
            <%= h.input :colour %>
            <%= h.button :submit, :label => "create" %>
    <% end %>
    <% end %> 
```

* * *

```
Paper Controller

  def new
    @user = current_user
    @paper = @user.paper.build(params[:paper])
            @pen = Pen.new(params[:pen])
  end 
```

* * *

```
 def create
    @user = current_user
    @paper = @user.papers.build(params[:paper])
    @pen = @paper.pens.build(params[:pen])

    if @paper.save
        flash[:notice] = "#{@paper.name} Created"
        redirect_to(:action => "index")
    else
        flash.now[:notice] = "Error"
        render 'new'    
    end
  end 
```

* * *

```
{"utf8"=>"✓",
 "authenticity_token"=>"Z8vncB9ewDM1bWiKfsPHOGlkxcGpfhPjv0xpamudIIs=",
 "paper"=>{"name"=>"three",
 "size"=>"three",
 "colour"=>"red",
 "pen"=>{"colour"=>"test",
 "pen"=>"test"}},
 "commit"=>"Create"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:48:01.630

看起来你的单数/复数命名有一些细微的差异。

我认为您需要调整以下内容：

```
<%= f.fields_for :pens, @pen do |h| %> 
```

并且可能：

```
attr_accessible :pens_attributes 
```

以及（可能）：

```
 params[:pens] 
```

希望这有帮助，祝你好运！

# jquery - Jquery - 是否可以按类名过滤元素并获取其父级的索引？

> ID：12870662
> 
> 赞同：1
> 
> 时间：2012-10-13T06:40:51.703
> 
> 标签：jquery

在我的 HTML 页面中，我有将近 4`<ul>`秒。都有`<li>`孩子。当用户单击每个`<li>`元素时，我正在添加**活动**类名称。后来，相当于其父级的索引号，我在图标框（单独的框）中添加了一个图标。

所以，每次点击我都需要更新索引号。有什么办法可以做到这一点？

我使用了这个，但我没有得到正确的结果：

```
var lstNum = $('.active').parent().index($(this)); 
```

我没有从每个父母那里得到价值。

[jsfiddle](http://jsfiddle.net/haHYu/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T06:52:57.777

更新**演示**：http: [//jsfiddle.net/haHYu/2/](http://jsfiddle.net/haHYu/2/)

* * *

检查这个**演示**：http: [//jsfiddle.net/haHYu/1/](http://jsfiddle.net/haHYu/1/)

**代码**：

```
$('.options li').click(function() {
    alert($(this).parent().index());
}); 
```

# java - 带有对象的 Java LinkedList

> ID：12870663
> 
> 赞同：0
> 
> 时间：2012-10-13T06:40:58.427
> 
> 标签：java

试图实现一个 LinkedList 来模拟一个由 Stock 对象组成的 Portfolio。我正在努力弄清楚如何正确地遍历列表并检查每只股票是否包含某些参数。SHAREPRICE 方法是我特别遇到的问题，如果有人可以提供帮助，我将不胜感激。到目前为止我所拥有的：

```
import java.util.*;

public class Portfolio<AnyType> implements Iterable<AnyType> {

public int balance, shares;
private Stock<AnyType> beginMarker, endMarker, temp;

LinkedList<Stock> Portfolio = new LinkedList<Stock>();
java.util.Iterator<Stock> iter = Portfolio.iterator();

public int CASHIN(int x) {
    balance = x;
    return balance;
}

public int CASHOUT(int y) {
    balance = balance + (-y);
    return balance;
}

public int CASHBALANCE() {
    return balance;
}

public void BUY(String t, int s, float pp) {
    temp = new Stock<AnyType>(t, s, pp, pp, 0, null, null);
    Portfolio.add(temp);
    shares = shares + s;
}

public void SELL(String t, int s, float pp) {
    shares = shares - s;
}

public void SHAREPRICE(String t, float pp)
{
    if(Portfolio.contains(Stock.)
    {

    }

}

public void QUERY(String t) {

}

public int COUNTPORTFOLIO() {
    return shares;
}

public void PRINTPORTFOLIO() {

}

public java.util.Iterator<AnyType> iterator() {
    return new Iterator();
}

private class Iterator implements java.util.Iterator<AnyType> {
    private Stock<AnyType> current = beginMarker.next;
    private boolean okToRemove = false;

    public boolean hasNext() {
        return current != endMarker;
    }

    public AnyType next() {
        if (!hasNext())
            throw new java.util.NoSuchElementException();

        AnyType nextItem = (AnyType) current.getTicker();
        current = current.next;
        okToRemove = true;
        return nextItem;
    }

    public void remove() {
        if (!okToRemove)
            throw new IllegalStateException();

        Portfolio.this.remove(current.prev);
        okToRemove = false;
    }
}

private class Stock<AnyType> implements Comparable<Stock<AnyType>> {

    public String getTicker() {
        return ticker;
    }

    public void setTicker(String ticker) {
        this.ticker = ticker;
    }

    public float getPurchasePrice() {
        return purchasePrice;
    }

    public void setPurchasePrice(float purchasePrice) {
        this.purchasePrice = purchasePrice;
    }

    public float getLatestPrice() {
        return latestPrice;
    }

    public void setLatestPrice(float latestPrice) {
        this.latestPrice = latestPrice;
    }

    public float getPctChange() {
        return pctChange;
    }

    String ticker;
    int sharesOwned;
    float purchasePrice, latestPrice;
    float pctChange = (latestPrice - purchasePrice) / purchasePrice;
    Stock<AnyType> prev, next;

    public Stock(String ticker, int sharesOwned, float purchasePrice,
            float latestPrice, float pctChange, Stock<AnyType> prev,
            Stock<AnyType> next) {
        this.ticker = ticker;
        this.sharesOwned = sharesOwned;
        this.purchasePrice = purchasePrice;
        this.latestPrice = latestPrice;
        this.pctChange = pctChange;
        this.prev = prev;
        this.next = next;
    }

    public int compareTo(Stock<AnyType> pctChange) {
        return ((Comparable) this.pctChange)
                .compareTo(Stock.getPctChange());

    }

}

}

class TestPortfolio {
public static void main(String[] args) {

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:45:20.063

前进方向：

```
while(itr.hasNext())
{
  System.out.println(itr.next());
} 
```

反向

```
while(itr.hasPrevious())
  System.out.println(itr.previous());

} 
```

# iphone - 原型细胞未出现

> ID：12870665
> 
> 赞同：0
> 
> 时间：2012-10-13T06:41:52.027
> 
> 标签：iphone, ios6

我正在尝试编写一个带有“主页”的应用程序`UIButtons`，当点击时将 Segue to `UITableView`，这将反过来 Segue 到另一个 View 等。我的代码中没有错误或警告，我认为我设计得很好，但是当我运行应用程序时，PrototypeCells 甚至都不会出现。

[这就是我现在设置我的 Storyboard 的方式](http://i.imgur.com/qJQwN.png?1)（对不起，我还不能发布图片，因为我是新用户）。小啤酒杯是一个 UIButton，它成功执行 Segue 到 UITableView 窗口（这是不加载 PrototypeCells 的那个）。

除了默认方法之外，Brew View Controller 中没有任何代码。

我创建了一个名为 Brewery 的类并赋予它以下属性

```
@property (nonatomic, copy) NSString *name;
@property (nonatomic, copy) NSString *address;
@property (nonatomic, copy) NSString *info;
@property (nonatomic, copy) NSString *brews; 
```

我创建了 Brewery View Controller 并添加了以下方法以及默认代码

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [self.breweries count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"BreweryCell"];
    Brewery *brewObject = [self.breweries objectAtIndex:indexPath.row]; //might be an error in here
    cell.textLabel.text = brewObject.name;

    return cell;
} 
```

然而，当我运行它时，PrototypeCells 甚至都没有显示。ReuseIdentifier 在故事板和代码中都匹配，并且视图附加到数据源和委托。谁能帮我弄清楚我做错了什么？我也是网站新手，所以如果我做错了什么，或者您需要更多信息来帮助我，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:32:32.133

即使您说您已经设置了数据源，如果`numberOfSectionsInTableView`没有被调用，则表示数据源设置不正确。

我建议检查`viewDidAppear`并记录数据源和委托，并以编程方式检查相等的自我。

在界面生成器中设置 IBOutlets 有一些陷阱。

根据您在简介中所说的：

> 视图附加到数据源和委托

这是错误的。它应该是文件的所有者，即视图控制器。

# sharepoint - 当页面加载以下错误时，SharePoint 错误 movesiteTitle()

> ID：12870678
> 
> 赞同：3
> 
> 时间：2012-10-13T06:43:17.100
> 
> 标签：sharepoint, sharepoint-2010, shared-libraries, sharepoint-designer

ReferenceError: documentGetElementsByName 未定义 MoveSiteTitle();

ReferenceError：未定义 MoveSiteTitle

移动站点标题（）；

任何帮助....！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-04T18:49:29.457

好吧，这似乎是 df1 报告的与 Chrome 相关的问题。但是，如果您愿意，有一种解决方案可以消除脚本错误。

将此代码放在母版页中 s4-workspace 标记或类似标记上方：

```
if(typeof documentGetElementsByName==='undefined')
{
    documentGetElementsByName = function(value){
        if($('[name="'+value+'"]'))
        {
            return $('[name="'+value+'"]');
        }
        return null;
    };
}

if(typeof MoveSiteTitle==='undefined')
{
    // Well.... Don't know what this function is supposed to do                           
    // but this way I am avoiding script error...
    MoveSiteTitle = function(value){
        return "";
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:21:53.637

这只是 javascript 基本错误。这里 documentGetElementsByName(这里的变量名是什么) 检查这个变量名并搜索在当前页面中找不到任何位置。修改变量名或在那里放置一些条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-08T01:15:39.467

问题是您的配置中的某些内容导致包含方法 MoveSiteTitle() 的脚本无法加载。

我能够从我的开发工具控制台获取方法“MoveSiteTitle”的源代码。您可以更改母版页以在`<head>`母版页部分中包含以下 JavaScript。

```
if (typeof MoveSiteTitle === 'undefined') {         
        function MoveSiteTitle() {
            a:;
            var b = documentGetElementsByName("titlewpTitleArea");
            if (b == null || b[0] == null) return;
            var a = b[0],
                c = documentGetElementsByName("onetidProjectPropertyTitle");
            if (c == null || c[0] == null) return;
            var e = c[0],
                d = document.getElementById("onetidPageTitleSeparator");
            if (d == null) return;
            if (Boolean(a.insertAdjacentElement)) {
                a.insertAdjacentElement("afterBegin", d);
                a.insertAdjacentElement("afterBegin", e)
            } else {
                a.insertBefore(d, a.firstChild);
                a.insertBefore(e, a.firstChild)
            }
        }
    } 
```

此外，我在配置单元（配置单元 15）内的以下文件中找到了 MoveSiteTitle 方法（适用于 Sharepoint 2013）。

V:\Program Files\Common Files\microsoft shared\Web Server Extensions\15\TEMPLATE\LAYOUTS\IE55UP.js

您也许可以从那里调试您的特定配置。

此外，GetElementsByName 的脚本是...

```
function GetElementsByName(b) {
    var a = document.getElementsByName(b);
    if (a.length == 0 && Boolean(window.XMLHttpRequest)) a = FFGetElementsById(document, b);
    return a
} 
```

# java - Android 完成新 Intent 后回到 Main Activity

> ID：12870680
> 
> 赞同：0
> 
> 时间：2012-10-13T06:43:35.073
> 
> 标签：java, android, facebook, twitter, android-intent

我正在从我的主要活动中调用一个新的共享意图。用户完成分享或取消分享后需要加载或返回主Activity。

我使用以下代码来调用新意图。我不知道如何再次回到主要活动。

```
 Intent shareImage = new Intent();
                shareImage.setAction(Intent.ACTION_SEND);
                String mimeTyp = "*/*";
                shareImage.setType(mimeTyp);
                shareImage.putExtra(Intent.EXTRA_TEXT, "This is the text that will be shared.");
                shareImage.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+finalimagepath));

                startActivity(Intent.createChooser(shareImage, "Share Click")); 
```

使用此代码，在完成共享意图后，它不会进入主要活动。

# jsp - Liferay中基于portlet的项目的架构应该是什么？

> ID：12870682
> 
> 赞同：0
> 
> 时间：2012-10-13T06:43:42.757
> 
> 标签：jsp, spring-mvc, liferay, liferay-6, portal

我将使用 liferay 开发项目，因为我没有更多的经验，我需要一些关于项目架构的专家建议。

我正在创建具有不同功能的不同 portlet 的项目我应该为所有 portlet 创建通用的服务构建器（= 数据库持久性和业务逻辑）并在所有 portlet 中使用此服务还是应该是 portlet 特定的？

我也想拥有将使用所有 Portlet 的 DB 服务的 Web 服务。

任何人都可以建议我开发此类项目的最佳方法是什么。

谢谢先进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:00:11.290

如果您要创建的实体需要相互访问，那么明智的做法是在一个项目中使用它，其中一个 service.xml 定义不同的实体。对于使用 Web 服务，请务必通过让 Liferay 的服务构建器知道来创建所需的类。（但为特定实体设置 remote-service="true"）

# excel - 如何创建显示多个事件的时间线图？例如。维基上的金属乐队成员时间表

> ID：12870686
> 
> 赞同：33
> 
> 时间：2012-10-13T06:44:11.427
> 
> 标签：excel, charts, timeline

如何创建显示多个事件的时间线图？例如。维基上的金属乐队成员时间表？它显示了多个乐队成员及其持续时间。

要使用的技术：主要是Microsoft Office。任何学习曲线不太多的异国技术也应该没问题？

![在此处输入图像描述](../Images/53fc13ff5615b8d1545ceeb2e344cba9.png)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-13T07:27:49.063

堆叠条形图就足够了：

设置数据如下

```
Name    Start       End         Duration (End - Start)
Fred    1/01/1981   1/06/1985    1612   
Bill    1/07/1985   1/11/2000    5602  
Joe     1/01/1980   1/12/2001    8005  
Jim     1/03/1999   1/01/2000    306 
```

1.  绘制`Start`和`Duration`作为堆积条形图
2.  将 设置`X-Axis minimum`为所需的开始日期
3.  将范围的`Fill`颜色设置为`start``no fill`
4.  设置`Fill`各个条形以适合

（在 Excel 2010 中准备的示例）

![在此处输入图像描述](../Images/dec7428fa087fb483807bfdddbc32146.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T08:56:58.343

正如前面的评论中提到的，堆积条形图可以解决问题，尽管数据需要以不同的方式设置。（见下图）

持续时间列 = 结束 - 开始

1.  完成后，使用整个数据绘制堆积条形图。
2.  将开始和结束范围标记为无填充。
3.  右键单击 X 轴并手动更改轴选项。（这确实给我带来了一些问题，直到我意识到我无法操纵它们输入日期，:) 是的，我是新手，擅长高手！:))

![在此处输入图像描述](../Images/b591ecb36a9d8936d8dbbdc0850ea150.png)

# javascript - 从craftyjs中的对象获取组件类型

> ID：12870687
> 
> 赞同：4
> 
> 时间：2012-10-13T06:44:13.140
> 
> 标签：javascript, craftyjs

假设我有如下代码。

```
Crafty.c("SomeType",{//do something... });
var obj=Crafty.e("SomeType"); 
```

谁能告诉我是否有检查对象类型的功能？

前任：

```
Crafty.isComponent(obj,"SomeType")==true 
```

或者

```
Crafty.getComponents(obj)=="SomeType" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T06:51:37.290

啊从 Crafty.js 文件中发现有一个 .has() 函数来检查组件。:)

```
 /**@
    * #.has
    * @comp Crafty Core
    * @sign public Boolean .has(String component)
    * Returns `true` or `false` depending on if the
    * entity has the given component.
    *
    * For better performance, simply use the `.__c` object
    * which will be `true` if the entity has the component or
    * will not exist (or be `false`).
    */ 
```

# c - 使用 Arduino Uno r3 查找 int 值的倒数

> ID：12870688
> 
> 赞同：2
> 
> 时间：2012-10-13T06:44:15.403
> 
> 标签：c, arduino

我正在尝试将`analogRead`电位器的值映射到 0-1 之间。所以我这样做：

```
float inverse_value = 1.0f / (float)analogRead( pot_pin ) 
```

但是当电位器的analogRead为0时，倒数为0（这是正确的），但是当`analogRead`在1023时，倒数变成了`0.0009775170`。

我是在正确地划分还是什么？

所有电路连接正确。并且 Arduino 运行正常（上传时我没有收到任何错误）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:53:50.250

你想做的，大概是这样的：

```
float inverse_value = (float)analogRead(pot_pin) / 1023.0f; 
```

假设最大位置是 1023。

这样，0 到 1023 将被映射为 0 到 1。

例如，当电位器处于中间位置（512）时，变为：

```
float inverse_value = 512.0f / 1023.0f; 
```

这是关于`0.5`，可能是你想要得到的。

# java - 如何将switch语句中的条件返回给while？

> ID：12870691
> 
> 赞同：1
> 
> 时间：2012-10-13T06:44:23.630
> 
> 标签：java, sockets, while-loop

如何在 switch 语句中将操作返回到 while 循环？客户端无法返回 while 语句。我的意思是说，每当响应来自服务器时，客户端必须再次从while循环开始，以便客户端可以选择他的选择。是 System.out 的问题吗？（注意：这是从其他人那里复制的代码）这是客户端和服务器：

客户：

```
 .............
while (true) {
       String userchoice = console.readLine("Enter your choice :"); 
       int choice= Integer.parseInt(userchoice);
      switch (choice){  
    ..........
    case 2: // for viewing files in the client's directory
      try{
      Socket mysoc = new Socket("localhost", 9001);
      String user_name = username;
      DataOutputStream ToServer = new DataOutputStream(mysoc.getOutputStream());
      ToServer.writeBytes(user_name + '\n');
      BufferedReader FromServer = new BufferedReader(new InputStreamReader(mysoc.getInputStream()));
      String line = null;
      while ((line = FromServer.readLine()) != null) {
       System.out.println(line);
      } 
     }
    catch(Exception e)
            {
                e.printStackTrace();
                System.exit(0);
            }
      break;
      ............
} 
```

服务器：

```
import java.io.*;
import java.net.*;

class DirList
{
   public static void main(String argv[]) throws Exception
      {
         String clientString;
         //String replyString;
         ServerSocket welcomeSoc = new ServerSocket(9001);

         while(true)
         {
            Socket connectionSocket = welcomeSoc.accept();
            BufferedReader FromClient = new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
            PrintWriter ToClient = new PrintWriter(connectionSocket.getOutputStream(),true);
            clientString = FromClient.readLine();
            System.out.println("Received view songs request from : " + clientString);
            String path = "/home/sri/Songs/";
            String text="";
            File f = new File(path);
                File[] listOfFiles = f.listFiles();
                for (int j = 0; j < listOfFiles.length; j++) {
                        if (listOfFiles[j].isFile()) {
                                text = listOfFiles[j].getName();
                                ToClient.println(text);
                   }
                }

         }
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:00:54.410

你为什么不`label`最外面`while`这样..

`outer: while(true)`

并使用`continue`关键字返回标签。

`continue outer;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T07:15:29.553

在他们完成任务后尝试`close`你的`PrintWriter`和`Socket`在代码中。`Server`

@Sri，关于您在评论中提出的问题：

我的意思是套接字`connectionSocket`。`ServerSocket`将在您的服务器生命周期内保留在那里。但是您将为`connectionSocket`每个用户提供一个新的。所以每个 connectionSocket 将只服务一个客户端。

# ios - 分组的 TableView 单元格宽度

> ID：12870694
> 
> 赞同：0
> 
> 时间：2012-10-13T06:45:03.237
> 
> 标签：ios, ios6

在 iOS6 中，我似乎无法在 cellForRowAtIndexPath 中获取分组表格样式的单元格宽度。记录单元格或其内容视图的框架或边界返回 320 - 即使在 iPad 上也是如此。我需要以编程方式确定任何设备的单元格宽度，因为我需要计算文本大小。任何有关为 cellForRowAtIndexpath 中的分组表视图获取正确单元格宽度的建议都将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:58:15.470

您使用的方法是计算任何与视图相关的约束的错误位置。该`-tableView:cellForRowAtIndexPath:`方法是表视图数据源的一部分，而不是它的委托。您不能依赖框架或此处的其他任何东西来有意义，它意味着配置单元格的 /data/ 的地方。

如果您需要对视图框架等进行计算，并且您没有使用自定义子类`UITableViewCell`（即，您只是将视图添加到默认实例`UITableViewCell`或配置库存视图），您将设置任何与框架相关的/ 查看 /delegate/ 回调`-tableView:willDisplayCell:forRowAtIndexPath:`方法中的特定属性。这是配置单元格的任何可见/视图相关属性的地方，您现在将获得单元格的准确布局信息（其边界将正确，内部视图的任何布局/配置都将完成，等等。 ）。

如果您已经有一个自定义子类，您可以在上面的委托回调中进行与视图相关的属性配置，也可以在`UIView`'s`-layoutSubviews`方法中进行，具体取决于您的具体需求。有关详细信息，请参阅[-tableView:willDisplayCell:forRowAtIndexPath:](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006942-CH3-SW8)的文档。

# javascript - Windows 8：如何在 Windows 8 Metro 应用程序中使用外部图像

> ID：12870695
> 
> 赞同：1
> 
> 时间：2012-10-13T06:45:06.007
> 
> 标签：javascript, windows, windows-8, microsoft-metro

背景：嗨，我是基于Windows的开发的新手。我正在为 Windows 8 构建一个应用程序。我正在使用 Visual Studio 中提供的网格应用程序以及 javascript、html-5 和 css。

问题：我想在显示对象列表时使用外部图像（来自我的服务器）。但是下面的绑定代码不允许。

```
<div class="item">
    <img class="item-image" src="#" data-win-bind="src: image; alt: title" />
    <div class="item-overlay">
        <h4 class="item-title" data-win-bind="textContent:kiosk.name"></h4>
        <h6 class="item-subtitle win-type-ellipsis" data-win-bind="textContent: title"></h6>
    </div>
</div> 
```

出于安全原因，Windows Metro 应用程序不允许这样做，即动态引用外部 URL。有解决办法吗？请帮助我完全被困在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:41:56.253

您想使用数据绑定转换器将 URL 前缀添加到图像值。请参阅[http://msdn.microsoft.com/en-us/magazine/jj651576.aspx](http://msdn.microsoft.com/en-us/magazine/jj651576.aspx)并在页面上搜索“转换器”以了解如何执行此操作。

# scala - 在 Scala 中声明类字段的一致方式

> ID：12870701
> 
> 赞同：0
> 
> 时间：2012-10-13T06:45:50.657
> 
> 标签：scala, constructor

这经常困扰我：

```
class Test(i: Int) {
  val this.i = i;
  val this.ii = i; // :(
} 
```

我想以同样的方式声明我所有的 vals/vars，我真的不明白为什么**这**会扰乱 Scala 编译器。除此处外，其他任何地方都**按**预期执行。

1.  有充分的理由为什么它不让我打**这个**吗？
2.  有没有*更好的方法*/*解决*方法/ *Scala 方法*？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T07:09:10.367

您在该范围内声明的每个变量都将成为一个字段。所以它不需要特殊的语法。

```
class Test(_i: Int) {
  val i = _i
  val ii = i
} 
```

甚至更好：

```
class Test(val i: Int) {
  val ii = i
} 
```

您可以使用任何一种方式编写它，具体取决于您是要使用更清晰更小的代码还是“一致”的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T06:52:13.277

scala 的方式是不使用`this`. 为什么在 Java 中使用它？为了清楚地表明您正在访问实例的成员而不是静态成员。这在 Scala 中不是必需的，因为没有静态成员，并且伴生对象的成员无论如何都需要以伴生对象的名称作为前缀。

# sockets - closesocket 挂起

> ID：12870709
> 
> 赞同：2
> 
> 时间：2012-10-13T06:46:50.687
> 
> 标签：sockets

我已经调试了几天，终于找到了一些东西。

由于某些原因，我的代码`closesocket()`永远阻塞了。

这就是我所有的 IOCP 线程都在慢慢死去的原因......

调试器显示`closesocket()`调用被冻结 `NtWaitForSingleObject(0xXXXX, 0, 0);`

有问题的套接字是 UDP 套接字。

管理该套接字的 UDP 线程已被强制关闭`TerminateThread()`。

是否有任何理由发生这种情况并且无论如何要解决？

操作系统：Windows Server 2008 R2 Enterprise x64

语言：C++（使用 Visual Studio 2010）

# java - 如何在 Java 中获取“char”数组的输入？

> ID：12870713
> 
> 赞同：1
> 
> 时间：2012-10-13T06:47:32.030
> 
> 标签：java, console

我正在开发一个小型应用程序来对用户提交的多项选择题进行评分。每个问题显然有 4 个选项。A B C D。由于这些答案将存储在二维数组中，我想问一下如何从用户那里获取 char 变量的输入。我还没有学会任何在控制台上为 char 数组输入的方法。即我刚刚使用过 nextInt()、nextDouble()、nextLine() 等。这些方法适用于字符串和整数，而不适用于字符。如何获取字符数组的输入？我将发布接受输入的代码片段，以便大家更好地理解。

```
public class MCQChecker{

    public static void main(String []args)
    {
        Scanner input=new Scanner(System.in);
        char[][] students=new char[8][10];

        for (int i=0;i<8;i++)
        {
            System.out.println("Please enter the answer of "+students[i+1]);
            for(int j=0;j<10;j++)
            {
                students[i][j]=?;//Im stuck here
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T06:51:30.733

一旦你得到了`.next()`a 的值`String`，检查它是否是`.length() == 1`，然后使用[`yourString.charAt(0)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#charAt%28int%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T06:51:41.890

```
 students[i][j]=input.next().charAt(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T07:08:39.440

您需要的不仅仅是`char`满足您的要求。创建一个问题类，其中包含问题和正确答案，用户输入答案。

```
public static class Question {

    private Choice correctChoice = Choice.NONE;
    private Choice userChoice = Choice.NONE;
    private String question = "";

    public Question(String questionString, Choice choice) {
        this.question = questionString;
        this.correctChoice = choice;
    }

    public void setUserChoice(String str) {
        userChoice = Choice.valueOf(str);
    }

    public boolean isQuestionAnswered() {
        return correctChoice == userChoice;
    }

    public String question() {
        return question;
    }

}

enum Choice {
    A, B, C, D, NONE
} 
```

现在您可以创建一个问题列表，对于每个问题，您可以检查它是否被正确回答。

```
public static void main(String[] args) {
    Scanner input = new Scanner(System.in);
    List<Question> questions = new ArrayList<Question>();
    questions.add(new Question("question1", Choice.A));
    questions.add(new Question("question2", Choice.A));
    questions.add(new Question("question3", Choice.A));
    for (Question q : questions) {
        System.out.println("Please enter the answer of " + q.question());
        String str = input.next();
        q.setUserChoice(str);
        System.out.println("You have answered question "
                + (q.isQuestionAnswered() == true ? "Correctly"
                        : "Incorrectly"));
    }

} 
```

上面的程序现在允许您提出问题并相应地回复用户。当询问问题时，如果输入的选项不是正确答案，那么问题将被错误地标记。

在上面的示例中，如果输入了其他字符`A`，它将告诉用户您不正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-22T16:29:48.517

您不能直接在 charArray 中输入，因为 Java 中没有 nextChar()。您首先必须在 String 中输入，然后一个一个地获取字符。

```
import java.util.*;
class CharArray{
    public static void main(String[] args)
    { 
    Scanner scan=new Scanner(System.in); 

    char ch[]=new char[11];

    String s = scan.nextLine();

    for(int i=0;i<=10;i++)  
    ch[i]=s.charAt(i);  //Input in CharArray

    System.out.println("Output of CharArray: ");
        for(int i=0;i<=10;i++) 
        System.out.print(ch[i]); //Output of CharArray
    }
} 
```

# tridion - 发布概念

> ID：12870718
> 
> 赞同：3
> 
> 时间：2012-10-13T06:48:15.187
> 
> 标签：tridion, publishing, tridion-2011

我有一些与出版有关的基本问题。如果我有一个组件 A，它有一个到组件 B 的多媒体链接。当我使用动态 CT 发布组件 A 时，组件 B 也将被发布。

1.  组件 B 的自定义元数据也会发布吗？（我在组件 B 的传输包中找不到自定义元数据）
2.  如果我取消发布组件 A，它也会取消发布组件 B？但是，如果组件 B 与其他几个组件链接和发布呢？

3.  如果我使用动态 CT 在页面上插入组件，在发布后，组件 Presentation 会添加到数据库中，还是作为页面上的静态部分或两个位置？（我们为页面使用文件系统，为动态 CP 使用代理数据库）

我知道这些是基本问题，但这些将解决几个疑问。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T11:44:28.893

**如果我有一个组件 A，它有一个到组件 B 的多媒体链接。当我使用动态 CT 发布组件 A 时，组件 B 也将被发布。**

这不是真的。要发布多媒体链接，您必须使用要发布的多媒体链接`<img src="tcmid" ..... />`，并且您的 CT 需要`Default Finish Actions`包含`Publish Binaries in package`.

通常，当您发布组件 A 时，它只会发布多媒体文件（img、jpg、pdf 等），前提是您的 DWT 中有上述代码行并且您有上述 TBB。

**Q #1：**在这种情况下，元数据不会被发布，因为您只是通过代码发布多媒体文件

**Q # 2：**如果组件 A 正在被使用或引用，当您取消发布组件 A 时，不会取消发布多媒体文件。Tridion Deployer 检查是否有对多媒体文件的任何引用，只有在没有任何引用时才删除该文件。

**Q #3：**发布到数据库或文件系统不仅仅是基于简单的动态CT。它基于部署者端的存储配置。它基于您在存储中配置到 db DB 或 FS 的内容。

如果您想动态发布多媒体组件，您需要一个与该多媒体模式 (OR) 关联的动态 CT 您可以编写一个 C# TBB 作为组件 A 的动态 CT 的一部分，并通过代码动态发布。

这是您也可以查看的 Tridion 文档，可能不是您问题的直接答案，但会提供一些附加信息。

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_56BCD7B2A1994C76B940751B2458D8E0](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_56BCD7B2A1994C76B940751B2458D8E0)

# javascript - 使用 javascript 导航到没有 GET 变量的同一页面

> ID：12870720
> 
> 赞同：0
> 
> 时间：2012-10-13T06:48:53.067
> 
> 标签：javascript, url

我有一个页面，管理员可以在其中管理用户帐户。这是通过单击主页 (admin/usermanage/) 上用户名旁边的编辑链接来完成的，该链接将管理员带到该用户 ID 的编辑页面 (admin/usermanage/?edit=x (其中 X 是用户身份））。

在此页面上，有一个删除按钮，可将用户带回列出所有帐户的主页。

```
function deleteaccount_confirmation() {
    var answer = confirm("Are you sure you want to delete this account?")
    if (answer){
        window.location = "../usermanage/index.php";
    }
} 
```

这虽然行不​​通。用户停留在同一页面上，但 URL 未更改 (admin/usernamage/?edit=x)

任何可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:51:31.640

试试这个

```
window.open('http://somefoler/yoursitename.php','','','_self'); 
```

这应该有效。我已经测试过了。如果不花一点时间在谷歌

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:52:21.600

```
window.location.href = "../usermanage/index.php" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:29:08.230

这是我为解决它所做的工作。

我没有使用 javascript 来移动页面，而是制作了一个 HTML 表单。也不再有 GET 变量在起作用。编辑变量已移至 POST。

废话不多说，代码如下！

这部分位于页面中的任何位置。

```
<form method="POST" id="deleteacc">
    <input type='hidden' name='delete_id' value='".$id."' />
</form> 
```

这是按钮的代码。它在页面中的位置与按钮的显示位置相关，但其他方面是否在表单中并不重要。

```
<button type="button" class="button" name="delete" value="Delete Account" onClick="deleteaccount_confirmation()" />Delete Account</button> 
```

最后但并非最不重要的 Javascript

```
function deleteaccount_confirmation() {
    var answer = confirm("Are you sure you want to delete this account?")
    if (answer){
        $("#deleteacc").submit()
    }
} 
```

javascript 所做的只是使用 jQuery 触发表单的提交。javascript 被分配给任何按钮，这就是为什么它不需要在表单中。该表单包含作为隐藏变量的数据，由 javascript 触发。

希望这对其他人有帮助！

# knockout.js - 淘汰赛中的元素绑定

> ID：12870721
> 
> 赞同：0
> 
> 时间：2012-10-13T06:48:56.473
> 
> 标签：knockout.js

```
var scrollheight=$('#scrollbox').attr('scrollHeight'); 
```

我想做类似上面的事情，而不使用 jquery。我发现我可以使用 knockoutjs 元素绑定 -`data-bind="element: scrollbox"`

但我不知道该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:04:45.497

我会说，从阅读您的评论来看，KnockOutJS 并不是您处理滚动时 ajax 的最佳人选。

[这个问题](https://stackoverflow.com/questions/8687978/on-scroll-down-how-to-make-ajax-call-and-get-the-respone-data)处理`window.scroll(...)`函数并进行`ajax`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:47:28.503

添加自定义绑定

```
ko.bindingHandlers.scrollTo = {
    init: function(element, valueAccessor) {
        jQuery(element).show().focus();
        if (jQuery(element).position() != null) {
          jQuery(window).scrollTop(jQuery(element).position().top);
        } 
    }    
}; 
```

并在 HTML 中使用它：

```
data-bind="scrollTo: {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T14:17:25.270

Afaik，ko 没有自己的内置元素绑定。我创建了一个在几个项目中使用的，如下所示：

```
ko.bindingHandlers.element = {
    update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var name = ko.utils.unwrapObservable(valueAccessor());
        viewModel[name] = element;
    }
}; 
```

但是，在绑定时，我将 viewmodel 属性名称放在引号中，例如`data-bind="element: 'elementName'"`. 视图模型将如下所示：

```
function MyViewModel() {
    var self = this;
    self.elementName = undefined;
    self.doSomething = function() {
        $(self.elementName).fadeOut();
    };
} 
```

请记住，这`self.elementName`将一直保留`undefined`到`ko.applyBindings`执行之后。因此，您实际上应该仅在绑定视图模型后作为函数执行的 click 或其他事件绑定中使用它。

# linux - linux nasm程序集无休止地打印字符

> ID：12870722
> 
> 赞同：1
> 
> 时间：2012-10-13T06:49:18.333
> 
> 标签：linux, assembly, x86, nasm

我正在编写一个程序来从用户那里获取一个整数，然后打印出从 0 到该数字的所有数字。我的代码可以很好地输入，但是在将其打印出来时，它会以似乎无限循环的方式连续打印。这是我的代码：

```
SECTION .data           ; Constant variable declaration
len   EQU 32        ; Constant length
msg db "Enter a number: ", 0 ; Input message
msglen EQU $-msg             ; Input message length

SECTION .bss            ; Uninitialised data declaration
other resd len      ; Output counter that is incremented
data  resd len      ; Input data buffer 

SECTION .text           ; Main program initialiser

GLOBAL _start           ; Linker entry point declaration
_start:                 ; Entry point
nop                 ; This keeps the debugger happy :)

Msg:                    ; This section prints out the message
mov eax, 4          ; }
mov ebx, 1          ; }
mov ecx, msg        ; } System_write call
mov edx, msglen     ; }
int 80h             ; }

input:                  ; This section gets the integer from the user
mov eax, 3          ; }
mov ebx, 0          ; }
mov ecx, data       ; } System_read call
mov edx, len        ; }
int 80h             ; }

ASCIIAdj:   
mov ebp, 48         ; This line sets the counter to '0' ASCII

setup:                  ; This section adjusts the counter
mov [other], ebp    ; Increment counter 

loop:                   ; This section loops, printing out from zero to the number given
mov eax, 4          ; }
mov ebx, 1          ; }
mov ecx, other      ; } System_write call
mov edx, len        ; }
int 80h             ; }
mov eax, 1          ; Move 1 to eax
add ebp, eax        ; Add eax to ebp (essentially increment ebp)
    mov eax, other      ; move other to eax
    mov ebx, data       ; move data to ebx
    cmp eax, ebx        ; compare them
jne setup           ; If they are not the same, go back to the setup to increment other

exit:                   ; Exits the program
mov eax, 1          ; }
mov ebx, 0          ; } System_exit call
int 80h             ; } 
```

为什么会不断循环？我已经增加了计数器，并比较了输入和计数器，那么它为什么不中断呢？

提前致谢

编辑：预期输出：

```
Enter a number: 6
0123456 
```

程序的一般语义：

```
Display "Enter a number: "
Read in an integer less than 32 bytes in size.
Set a counter variable to the ASCII value of zero
Loop:
Display the character, adding 1 to it, and checking to see if it is equal to the value    inputted.
If it is equal, goto the exit section and exit
Else loop. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:03:00.617

这是在挖掘我记忆深处的黑暗深处，但我认为你想要

```
mov eax, [other]      ; move other to eax
mov ebx, [data]       ; move data to ebx 
```

请注意代码中缺少的括号。您正在将 and 的地址加载到and*中*，而不是其中包含的值。`other``data``eax``ebx`

# php - curl chmod 文件传输

> ID：12870726
> 
> 赞同：0
> 
> 时间：2012-10-13T06:50:14.150
> 
> 标签：php, file-upload, curl

组，我面临 curl 文件传输的问题。我在站点 A 中有一个表单。该表单收集了一些数据和一个文件（文件上传）。当该表单被提交时，它将数据存储在站点 A 中，并将数据存储在站点 B（另一台服务器）中。数据正在从服务器 A 保存到服务器 B。但是使用 curl 传输文件存在文件权限问题。我的文件需要 0777 chmod 才能让 curl 读取和传输。

我要做的是阅读文件

```
chunk_split(base64_encode(file_get_contents($file))); 
```

从站点 A 并将该数据传输到站点 B（另一台服务器）。如果我更改站点A文件中需要读取的权限，通过shell作为root，chmod 777，并进行curl传输，那么它会完美地存储在服务器B中。但是当我通过代码进行文件传输时我无法使用 chmod 函数，因为该文件在用户中存储为“apache”，而不是“root”。

## 详细解释：

我有一个带有 chronoform 查询表的 joomla 网站。我在 chrnoform 中有一些文本和一个文件上传。当用户要求报价时，这些数据需要存储在 sugerCRM（sugarCRM 潜在客户模块、网络到潜在客户表单、活动）中。Joomla站点在服务器A，sugarCRM在服务器B。上传的文件将存储在sugarCRM的notes表（mysql）中。如果我手动将文件更改为 chmode 777，则一切正常。但我希望有人以 chronoform 上传文件时发生这种情况。我通过 php 代码尝试了 chmod，但它不起作用，因为创建文件的程序将“apache”作为用户而不是“root”用户。任何解决方法？我只需要知道是否通过程序将文件权限从0644更改为0777。有什么帮助吗？如果有人想查看代码，那么我可以粘贴代码并将其发布在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:57:43.963

That file that changes the permissions will need to have the same permissions as the account you use to change it manually. you can give apache or www-data persmissions to make changes to certain files/directories (or sudo) but i do not recommend it.

# python - 根据定义的某些 entry_point 安装 python 包后，有没有办法执行某些任务？

> ID：12870727
> 
> 赞同：0
> 
> 时间：2012-10-13T06:50:40.290
> 
> 标签：python, distutils

我想知道是否有一种方法可以注册一些特殊的 entry_point 并在安装包并定义该 entry_point 时执行一些任务，就像 console_scripts 一样，我想 distutils 是执行任务的那个，但是有一种方法根据一些entry_point注册更多的任务？

最后，我想执行类似安装后任务但未在包中定义但在另一个中定义的东西。

我现在这样做的方法是每 x 秒监视一次 pkg_resources.iter_entry_points，然后重新加载包 pkg_resources 以获取新的 entry_points 并在有人定义新的 entry_points 时执行操作，我在守护进程中执行此操作，但是似乎应该有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:02:24.607

是的，您可以创建自己的入口点，类似于控制台脚本。您可以将入口点定义为您想要的任何东西，并且可以使用`pkg_resources.iter_entry_points`方法对该定义进行操作，该定义将以与 console_scripts 相同的方式调用。这里有[两个关于这个主题的](http://www.turbogears.org/1.0/docs/UsingEntryPoints.html) [好](http://reinout.vanrees.org/weblog/2010/01/06/zest-releaser-entry-points.html)资源。

# php - 通过 php 函数通过移位（无擦除）键设置任意之间的数组值

> ID：12870736
> 
> 赞同：1
> 
> 时间：2012-10-13T06:51:37.630
> 
> 标签：php, arrays

问题很简单，假设我有一个像这样的数组：

```
$array = array(array('bla1' => 'bla1'), array('bla2' => 'bla2'),
    array('bla3' => 'bla3'), array('bla4' => 'bla4')); 
```

是的，它是多维的，所以我需要在不擦除的情况下在例如**array('bla1' => 'bla1')**和**array('bla2' => 'bla2')之间设置值。**

我很困惑地发现，通过php中的所有array_like函数如何做到这一点。

所以，就像任何其他程序员都会做的那样，我编写了这个函数：

```
function setArrVal($array, $key, $val) {
  for ($i = count($array) - 1; $i >= $key; $i--) {
    $array[$i + 1] = $array[$i];
  }
  $array[$key] = $val;    
  return $array;
} 
```

效果很好。但是还是需要用php函数来做这个，有什么办法可以这样完成吗？我试过**array_splice($input, 1, 0, $replacement);** - 毫无价值，它只适用于简单的值，而不适用于数组中的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:22:04.493

你可以[`array_splice()`](http://php.net/manual/en/function.array-splice.php)这样使用：

```
$array = array(array('bla1' => 'bla1'), array('bla2' => 'bla2'),
    array('bla3' => 'bla3'), array('bla4' => 'bla4'));

$insert = array(array('bla2.5' => 'bla2.5'));

// note the third argument argument is 0
// this will prevent it from overwriting existing values
array_splice($array, 2, 0, $insert ); 

print_r($array);

/* Result */
Array
(
    [0] => Array
        (
            [bla1] => bla1
        )

    [1] => Array
        (
            [bla2] => bla2
        )

    [2] => Array
        (
            [bla2.5] => bla2.5
        )

    [3] => Array
        (
            [bla3] => bla3
        )

    [4] => Array
        (
            [bla4] => bla4
        )

) 
```

### 演示：[http ://codepad.org/ivBmZRdn](http://codepad.org/ivBmZRdn)

这是你想要的吗？

# javascript - NodeJS 在 4 或 5 小时后变慢

> ID：12870740
> 
> 赞同：0
> 
> 时间：2012-10-13T06:52:00.443
> 
> 标签：javascript, node.js, express, connect

在 nodejs 运行 4 或 5 小时后，我无法看到增加的内存和任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T08:10:27.850

如果您使用的是支持 dtrace 的操作系统，您可以使用它来调试正在运行的进程中的内存泄漏。

[http://dtrace.org/blogs/bmc/2012/05/05/debugging-node-js-memory-leaks/](http://dtrace.org/blogs/bmc/2012/05/05/debugging-node-js-memory-leaks/)

如果您的操作系统不支持 dtrace，您可以非常便宜地设置 Joyent SmartMachine，仅用于调试。

[http://www.joyent.com/products/joyent-cloud/pricing](http://www.joyent.com/products/joyent-cloud/pricing)

如果没有更多信息或查看您的代码，很难确切地说出可能是什么问题。

# java - 除非给出正确的输入，否则将 do-while 限制为运行 7 次

> ID：12870742
> 
> 赞同：2
> 
> 时间：2012-10-13T06:52:08.630
> 
> 标签：java, while-loop, java.util.scanner, do-while, do-loops

在用户尝试猜测数字 7 次后，我无法让 do-while 循环停止。我不确定如何告诉循环停止并显示超时消息。

谢谢，我很感激任何帮助！

**代码：**

```
import java.util.Random;
import java.util.Scanner;
public class numberGuesses {
     public static void main (String [] args){
            Random rand = new Random();
            int inputNumber;
            int randomNumber = rand.nextInt(100) + 1;
            int guessingLimit = 7;

            System.out.println("Rand Number = " +randomNumber); //Temp to test program with correct number 

            Scanner scan = new Scanner (System.in);

            do {
                System.out.print("Please enter a number: ");
                inputNumber = scan.nextInt();

                if (inputNumber > randomNumber)
                            System.out.println("That's too high!");
                if (inputNumber < randomNumber)
                            System.out.println("That's too low!");
       //       else { 
       //       guessingLimit--;
       //       System.out.println("Too bad! The number was " +randomNumber+ "!"); //Trying to have it print this timeout after 7 incorrect attempts
       //       break;
       //       }
            } while (inputNumber != randomNumber);
                System.out.println("That's right!"); //This line when they guess correctly  
    }

} 
```

**正确输出 1：**

```
----exec: java numberGuesses
Rand Number = 67
Please enter a number: 89
That's too high!
Please enter a number: 1
That's too low!
Please enter a number: 67
That's right! 
```

**正确输出 2：**

```
----exec: java numberGuesses
Rand Number = 38
Please enter a number: 55
That's too high!
Please enter a number: 66
That's too high!
Please enter a number: 1
That's too low!
Please enter a number: 22
That's too low!
Please enter a number: 44
That's too high!
Please enter a number: 8
That's too low!
Please enter a number: 99
That's too high!
Too bad! The number was 38! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T06:54:44.773

之前`do`，写，

```
 int numAttempts = 0; 
```

之内`do`

```
 numAttempts++; 
```

而条件：

```
 while (inputNumber != randomNumber && numAttempts < 7); 
```

完全的：

```
 int numAttempts = 0;
       do {
            System.out.print("Please enter a number: ");
            inputNumber = scan.nextInt();

            if (inputNumber > randomNumber)
                        System.out.println("That's too high!");
            if (inputNumber < randomNumber)
                        System.out.println("That's too low!");
   //       else { 
   //       guessingLimit--;
   //       System.out.println("Too bad! The number was " +randomNumber+ "!"); //Trying to have it print this timeout after 7 incorrect attempts
   //       break;
   //       }
          numAttempts++;
        } while (inputNumber != randomNumber && numAttempts < 7);

        if(inputNumber == randomNumber){
            System.out.println("That's right!"); 
        }else{
            System.out.println("Incorrect 7 attempts"); 
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T07:01:06.110

**在条件下，**您应该检查用户输入的次数是否正确且尝试次数少于 7；

```
int inputNumber;
final int randomNumber = rand.nextInt(100) + 1;
final int guessingLimit = 7;
int triesCount = 0;

Scanner scan = new Scanner (System.in);
do {
   inputNumber = scan.nextInt();
   //....
   ++triesCount;
}while(inputNumber != randomNumber && triesCount < guessingLimit);

if (inputNumber == randomNumber) {
   System.out.println("That's right!");
} else {
   System.out.println("Timeout...");
} 
```

# iphone - 首次访问 webapp 时，直接将 Clip 图标添加到 iPhone 的主屏幕

> ID：12870748
> 
> 赞同：0
> 
> 时间：2012-10-13T06:52:52.183
> 
> 标签：iphone

我想知道当用户第一次通过 Safari 访问我的网页时，有什么方法可以将我的 webapp 的剪辑图标直接添加到 iPhone 的主屏幕上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:51:05.280

不，可以将您的 web 应用程序添加到用户主屏幕的唯一方法是他/她手动执行此操作。

# asp.net - 无法加载 DLL 'ABCpdf8-32.dll'：访问被拒绝

> ID：12870750
> 
> 赞同：1
> 
> 时间：2012-10-13T06:53:02.487
> 
> 标签：asp.net, dll, iis-7, configuration

我第一次在服务器上配置网站，所有东西都在本地机器上运行，它给我一个错误**“无法加载 DLL 'ABCpdf8-32.dll'：**服务器上的访问被拒绝”。我认为这个问题是由于权限，我需要给予什么类型的权限以及为此需要做的任何其他设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:43:02.493

如果您可以使用远程桌面或其他工具访问物理服务器：转到此 dll 文件文件夹中的安全选项卡并将`IIS_IUSRS`用户添加到此文件夹。如果您有共享主机：您可以使用主机的控制面板并为此文件夹添加读取权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T08:08:43.993

转到主机控制面板并更改 DLL 所在文件夹的权限。

# cakephp - cakephp id 约定 saveField 问题

> ID：12870751
> 
> 赞同：0
> 
> 时间：2012-10-13T06:53:07.037
> 
> 标签：cakephp

我有一个“生产”表，其中字段employee_id 作为与employees 表的belongsTo 关系。

问题是我的员工表使用字段 emp_appserial 作为主键 - 而不是 id 字段 - （并非员工表上的每个条目都有一个 id 值，每个人都会自动递增 emp_appserial）

我想知道是否有办法使用 saveField 使用除 id 以外的字段来获取我的记录：（我提到我有没有“id”值的记录，只有 emp_appserial，即 pk）

```
 $this->loadModel('Employees');
    $this->Employees->id = $id;
    $this->Employees->saveField('emp_hrnote', 'text to be saved'); 
```

我想使用：

```
$this->Employees->emp_appserial = $id; 
```

代替

```
$this->Employees->id = $id; 
```

我那可行吗？

除此之外，重新设计我的表格可能还为时不晚，但我已经有很多生产数据:-(

感谢您的任何指点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T07:04:54.750

以下应该可以解决问题（顺便说一句，模型应该是单数）：

```
class Employees extends Model {
    public $primaryKey = 'emp_appserial';
} 
```

如果您不设置该`$primaryKey`属性，它将被设置为`id`：[Source](http://api.cakephp.org/view_source/model#l-682)

设置后，`saveField()`将使用该字段作为条件：[Source](http://api.cakephp.org/view_source/model#l-1582)

编辑：为了清楚起见，您仍然可以`Model::$id`用来设置主键值。`Model::$id`保存主键值**，**保存`Model::$primaryKey`主键**字段**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T07:20:10.403

用过的

```
 $this->Employee->updateAll(
            array('Employee.emp_hrnote' => "$thetxt"), 
            array('Employee.emp_appserial' => $id)
    ); 
```

作为一种解决方法很好，但是我希望我能解决我的空 id 问题......将在另一个帖子上发布另一个问题。

# java - 如何为服务器和客户端创建单独的构建

> ID：12870752
> 
> 赞同：1
> 
> 时间：2012-10-13T06:53:24.310
> 
> 标签：java, eclipse

所以我正在开发一个加密的聊天服务器，在 Eclipse 项目中，我将它们都放在同一个项目中，服务器和客户端文件都在各自的包中。

例如，服务器文件位于类似的包中`org.mysite.server`，客户端类位于`org.mysite.client`.

我将它们都放在同一个项目中，因为很多解密/加密都使用相同的类和方法。

如何使用 Eclipse 为服务器或客户端制作仅包含特定包的构建 (JAR)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:57:38.027

无论如何，我都会为他们创建单独的项目。您可以将公共类放入第三个“公共”或“共享”项目中，并将其作为依赖项添加到服务器和客户端项目中。这样做的好处是它在 Maven 等构建工具中得到了很好的支持并且很自然。

但是，如果您希望将所有内容都放在同一个项目中，您可以在Eclipse的*JAR 导出对话框中选择进入 JAR 的文件、包和类：**文件 -> 导出 -> Java -> Jar 文件*，当它说“选择要导出的资源”。

# c# - 使用 Linq 比较复杂集合

> ID：12870758
> 
> 赞同：1
> 
> 时间：2012-10-13T06:53:44.920
> 
> 标签：c#, linq

可能是我的问题很常见。我在这里看到过[Comparing Two collections](https://stackoverflow.com/questions/3407356/comparing-two-collections)。但我想比较两个复杂的集合。

```
public class Project
{
    public Int32 ProjectID { get; set; }
    public String ProjectName { get; set; }
    public String ProjectCode { get; set; }
}
public class Unit
{
    public Int32 UnitID { get; set; }
    public Int32 ProjectID { get; set; }
    public String UnitName { get; set; }
    public String UnitCode { get; set; }
} 
```

这里项目和单元有一个名为的公共字段`ProjectID`。我有一个项目和单元的集合。对应项目集合中的每个项目，单元集合中有一个单元。并且单元集合中的​​一些单元不属于项目集合中的任何项目。我想过滤掉这些单位。我怎样才能使用 Linq 做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:57:50.240

您可以使用 LINQ：

```
var result = units.Where(u => projects.All(p => p.ProjectID != u.ProjectID)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T06:58:46.500

```
from u in unitCollection
from p in projectCollection
Where p.ProjectID == u.ProjectID
select u 
```

# php - array_search() 没有找到第 0 个元素

> ID：12870760
> 
> 赞同：5
> 
> 时间：2012-10-13T06:53:51.593
> 
> 标签：php, arrays

我有大量`array`的股票代码，因为我正在编写一个股票市场模拟 web 应用程序的项目。我的辅助函数之一是通过检查符号数组来确定输入的股票是否有效。为此，我正在使用`array_search()`. 我遇到的问题是检查边缘情况。似乎搜索没有找到第 0 个元素，即使它完全可以找到其他元素。这是数组的一部分：

```
[0] => AAC
[1] => AACC
[2] => AACOU
[3] => AACOW
[4] => AAIT
[5] => AAME
[6] => AAON
[7] => AAPL
[8] => AAWW
[9] => AAXJ
[10] => ABAX
[11] => ABCB
[12] => ABCD
[13] => ABCO
[14] => ABFS
[15] => ABIO
[16] => ABMD
[17] => ABTL
[18] => ABVA
[19] => ACAD
[20] => ACAS
[21] => ACAT
[22] => ACCL 
```

等等，等等。如前所述，它适用于其他元素，而不是第 0 个元素。`FALSE`搜索 AAC 时返回。

这是我正在使用的 PHP 代码。

```
<?php   
                if(isset($_GET[stock])) {
                    $ticker = $_GET[stock];
                    $ticker = trim($ticker);
                    print("<pre>Ticker is $ticker</pre>");

                    print("Validity: " .        Stock::isValidStock($ticker));

                    print('<pre>');
                    $stock = Stock::getStockList();
                    print_r($stock);
                    print((bool)array_search('AAC', $stock));
                    print('</pre></br>');
                }
            ?> 
```

[这是我正在使用的测试网页。](http://alexandstein.com/Testing/?stock=AAC) 您可以通过编辑 url 中的查询字符串来更改股票。正如我所说，`?stock=AAC`返回假，而类似的东西`?stock=GOOG`是真的。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-13T06:57:19.237

[`array_search()`](http://php.net/manual/en/function.array-search.php)如果找到一个，则返回第一个匹配项的键。当所述键为 0 并且您将其转换为布尔值时，它将变为 false。

您想要做的是将其与`false`使用[不相同的运算符`===`](http://www.php.net/manual/en/language.operators.comparison.php)进行比较：

```
//if you don't need the index you can skip assigning it to a variable
$index = array_search('AAC', $stock); 

if ($index !== false) 
{
    // found!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T07:00:48.987

我检查了你的代码，我发现这一行有一个问题

```
 print((bool)array_search('AAC', $stock)); 
```

您将其转换为 bool ，因此它不会为第 0 个元素返回任何内容。

它的工作示例[http://codepad.viper-7.com/VPveZH](http://codepad.viper-7.com/VPveZH)

# awk - AWK- 字符串表达式

> ID：12870764
> 
> 赞同：1
> 
> 时间：2012-10-13T06:54:18.397
> 
> 标签：awk

我有一个正则表达式的例子：

```
seq 20 | awk 'NR!~/^2$|^12$|^15$/' 
```

相同，但使用链式表达式：

```
seq 20 | awk 'NR != "2" && NR != "12" && NR != "15"' 
```

是否可以编写更短的字符串表达式？

```
seq 20 | awk 'NR != "2" | "12" | "15" ' 
```

谢谢你的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T08:50:50.977

据我所知不是。正如您所暗示的那样，如果您想以这种方式执行相等测试（或不等式测试，在这种情况下），您将需要使用正则表达式。

如果要忽略多个值，请考虑在`BEGIN`块中使用数组。`!(NR in array)`当`awk`遍历每一行时，这将使表达式更短（即表达式现在很简单：）：

```
seq 20 | awk 'BEGIN { array[2]++; array[12]++; array[15]++ } !(NR in array)' 
```

结果：

```
1
3
4
5
6
7
8
9
10
11
13
14
16
17
18
19
20 
```

如果您尝试忽略的行有某种模式，请考虑在块中使用`for`循环：`BEGIN`

```
seq 20 | awk 'BEGIN { for (i=1; i<=15; i++) array[i]++ } !(NR in array)'

16
17
18
19
20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T04:31:35.080

第一个可能是最短的，如果你把锚放在一个组之外，它会更短`()`：

```
seq 20 | awk 'NR !~ /^(2|12|15)$/' 
```

# php - JQuery - 将变量传递给 php 脚本

> ID：12870770
> 
> 赞同：-3
> 
> 时间：2012-10-13T06:55:31.907
> 
> 标签：php, jquery

我坚持以下问题。我有一个 javascript (jquery) 函数，我需要将一个变量传递给 php ON .success 方法。请参见下文：

[http://paste.org/55404](http://paste.org/55404)

知道如何实现这一目标吗？或者甚至有可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:57:36.320

jQuery runs in the browser. PHP runs on the server. So you can not mix and match them like that.

Instead, you will have to use AJAX or another mechanism to contact the server and get the information you need.

Depending on your use case, there may be other solutions, such as inserting the values into the page when the server generates it, or putting the values in a cookie.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T07:19:21.997

参考您的[代码](http://paste.org/55404)，当您对“index.php”的 ajax 请求返回成功响应时，将调用 .success 方法。

由于您需要在此函数中获取 PHP 变量，因此您可以将“genNavSide()”的值作为参数附加到响应中。这与您将 pageName 值和 content 值分配给响应数据的方式相同。

例如，而不是：

```
 <?php echo pagesSideBar('data.pageName') ?> 
```

在 ajax 调用期间从 index.php 调用该函数。

```
 $sidebar = pagesSideBar($PageName);
   $response->sidebar = $sidebar; // I just mentioned object, you can assign whatever way you are following to create the response 
```

在 .success 方法中：

```
 jQuery('#links').html(data.sidebar); 
```

# java - java中的方法覆盖

> ID：12870771
> 
> 赞同：0
> 
> 时间：2012-10-13T06:55:39.467
> 
> 标签：java

> **可能重复：**
> [覆盖静态方法和最终方法](https://stackoverflow.com/questions/8547349/override-of-static-method-and-final-method)

子类main方法会覆盖超类main吗？希望超类中的主要方法被执行。请解释

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T06:58:25.977

`main` method is `static` method and `static` methods are **not overridden**.

So if you are calling `Super.main(args[])` then `main` method of **super class** is called and if you are calling `Child.main(args[])` then `main` method of **child class** will be called.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T07:12:12.307

`Static method are not overridden`. 每个类都有自己的静态方法，它们永远不会被继承，因此它永远不会被覆盖为`main is static`

# python - 从没有评估的redis获取对象？

> ID：12870772
> 
> 赞同：12
> 
> 时间：2012-10-13T06:56:12.143
> 
> 标签：python, redis

要从 memcache 中获取密钥（使用 pylibmc），请执行以下操作：

```
client.set(key, {'object': 'dictionary'}, time=expire)
client.get(key) 
```

redis中也是这样：

```
redis.setex(key, expire, {'object': 'dictionary'})
eval(redis.get(key) or 'None') 
```

最后一行在我看来不正确。redis 似乎只返回字符串。是否有 get redis 以与放入对象相同的形式返回对象？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-13T07:57:08.030

不同之处在于，虽然 memcached 和 redis 都只支持字符串值，`pylibmc`但使用 序列化您发送它的值[`pickle`](http://docs.python.org/library/pickle.html)，`redis-py`只是将它们转换为字符串。

如果你想对 redis 做同样的事情，你可以有自己的函数来为你做酸洗。

```
def set_value(redis, key, value):
    redis.set(key, pickle.dumps(value))

def get_value(redis, key):
    pickled_value = redis.get(key)
    if pickled_value is None:
        return None
    return pickle.loads(pickled_value) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-30T02:57:04.223

或者你甚至可以**继承 Redis**：

```
import pickle
from redis import StrictRedis

class PickledRedis(StrictRedis):
    def get(self, name):
        pickled_value = super(PickledRedis, self).get(name)
        if pickled_value is None:
            return None
        return pickle.loads(pickled_value)

    def set(self, name, value, ex=None, px=None, nx=False, xx=False):
        return super(PickledRedis, self).set(name, pickle.dumps(value), ex, px, nx, xx) 
```

礼貌：[https ://github.com/andymccurdy/redis-py/issues/186](https://github.com/andymccurdy/redis-py/issues/186)

# java - 在 Java 中规范化随机数

> ID：12870773
> 
> 赞同：0
> 
> 时间：2012-10-13T06:56:20.870
> 
> 标签：java, random

有人可以指出我的 Java 规范化随机函数吗？据我了解，常规随机函数没有人类认为随机的那种行为。但是，我记得在我的 stat 类中，归一化随机函数确实如此。

这适用于需要随机决定接下来要显示哪个问题的自学程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:00:04.890

如果您正在寻找“正态”分布的随机数，请参阅`java.util.Random#nextGaussian()`

# python - 如何使用coverage.py在Django-Python中实现Ruby-Rails之类的覆盖率报告？

> ID：12870777
> 
> 赞同：2
> 
> 时间：2012-10-13T06:57:01.760
> 
> 标签：python, ruby-on-rails, ruby, django, coverage.py

我们使用世界上著名且可能唯一的解决方案进行报道报告，`python`即`coverage.py`

现在，我们实现的`coverage.py`是： ![在此处输入图像描述](../Images/373cf80ef4e409ab6a33b90fcb854c43.png)

我们可以实现的目标`ruby-rails`是： ![在此处输入图像描述](../Images/3a7dcf2fcf8e33b83b2e97ec0b3d0604.png)

**所以，我的问题是如何获得更详细的覆盖率报告`coverage.py`？**

[或python django世界中的任何其他工具]

**笔记：**

*   `coverage run manage.py test --settings=project.test_settings`
*   通过以下方式生成报告`coverage html`
*   应该/我可以`coverage`在生成报告时传递额外的参数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:07:45.103

1）搜索框似乎很有用，以前没有人建议过！

2）条件覆盖：coverage.py 有一个启用分支覆盖的 --branch 开关，这是您要找的吗？

3) Hits/line：这是每行执行了多少次？我从未见过它像这样聚合。我不明白我将如何在自己的工作中使用该统计数据。你能帮我理解为什么人们想知道平均点击次数/线路吗？

# iphone - 如何在工具栏的右侧添加一个按钮？

> ID：12870780
> 
> 赞同：14
> 
> 时间：2012-10-13T06:57:17.777
> 
> 标签：iphone, objective-c, ios, xcode, uibutton

我以编程方式创建了一个工具栏：

```
UIToolbar *boolbar = [UIToolbar new];
    boolbar.barStyle = UIBarStyleDefault;
    boolbar.tintColor = [UIColor orangeColor];
    [boolbar sizeToFit]; 
```

然后给它加了一个按钮：

```
UIBarButtonItem *cancelleftBarButton =[[UIBarButtonItem alloc]initWithTitle:@"OK" style:UIBarButtonItemStyleBordered target:self action:@selector(tapBackGround:)];

cancelleftBarButton.tintColor = [UIColor orangeColor];

NSArray *array = [NSArray arrayWithObjects:cancelleftBarButton, nil];
[boolbar setItems:array animated:YES]; 
```

但是，此按钮仅出现在工具栏的左侧。是否可以将其放在工具栏的右侧？

![在此处输入图像描述](../Images/862c0ff0e8b0cabba52b7bf0e97070c2.png)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-13T06:59:33.997

这是在`UIBarButtonItem`工具栏右侧添加的方法。

```
UIBarButtonItem *leftButton = [[[UIBarButtonItem alloc] initWithTitle:@"Item" style:UIBarButtonItemStyleBordered target:self action:@selector(btnItem1Pressed:)] autorelease];

UIBarButtonItem *flex = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil] autorelease];

UIBarButtonItem *rightButton = [[[UIBarButtonItem alloc] initWithTitle:@"Item" style:UIBarButtonItemStyleBordered target:self action:@selector(btnItem2Pressed:)] autorelease]; 
```

或者

如果您尝试从 XIB 执行此操作，那么 .

插入一个标识符为“灵活空间”的项目。

![在此处输入图像描述](../Images/83ed3e895a08dfc1f0541287c18f4c6c.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-19T07:53:07.423

**在斯威夫特**

```
let btn1 = UIBarButtonItem(title: "Button 1", style: UIBarButtonItemStyle.Done, target: self, action: "btn1Pressed"
let flexSpace = UIBarButtonItem(barButtonSystemItem: UIBarButtonSystemItem.FlexibleSpace, target: nil, action: nil)
let btn2 = UIBarButtonItem(title: "Button 2", style: UIBarButtonItemStyle.Done, target: self, action: "btn2Pressed") 
```

# image - How to create RAW image?

> ID：12870783
> 
> 赞同：0
> 
> 时间：2012-10-13T06:57:29.590
> 
> 标签：image, matlab

I'm building one part of H264 encoder. For testing system, I need to created input image for encoding. We have a programme for read image to RAM file format to use.

My question is how to create a RAW file: bitmap or tiff (I don't want to use compressed format link JPEG)? I googled and recognize alot of raw file type. **So what type i should use and how to create?** . I think i will use C/C++ or Matlab to create raw file.

P/S: my need format is : YUV ( or Y Cb Cr) 4:2:0 and 8 bit colour deepth

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:41:25.903

最简单的原始格式只是代表像素的数字流。每种原始格式都可以与元数据相关联，例如：

*   宽度、高度
*   宽度/图像行（即 gstreamer 和 x-window 将每行对齐到 dword 边界）
*   每像素位数
*   字节格式/字节序（如果每像素 16 位或更多）
*   图像通道数
*   颜色系统 HSV、RGB、拜耳、YUV
*   通道顺序，例如 RGBA、ABGR、GBR
*   平面与打包（或 FOURCC 代码）

或者这个元数据可以只是一个内部规范......

我相信最简单的方法之一（当然是在陡峭的学习曲线之后:) 是使用例如 gstreamer，您可以在其中使用从相机、文件、预先存在的 jpeg 等读取数据的现有文件/流*源*并传递那些原始在定义的*管道*内流。一个有用的元素是*filesink*，它可以简单地将一个或几个连续的原始数据帧写入您的文件系统。顺便说一句，gstreamer 基础设施可能有数百个转换器和过滤器。包括h264编码器...

我敢打赌，如果您只是转储内存，则该输出将已经符合某些[FOURCC](http://www.fourcc.org/yuv.php)格式（gstreamer 也可以识别）。

# apache-flex - Flex DataGrid does not sort correctly if a column contains custom UIComponent

> ID：12870797
> 
> 赞同：1
> 
> 时间：2012-10-13T06:59:04.407
> 
> 标签：apache-flex, sorting, datagrid, uicomponents

I have a DataGrid with the first column being strings ("Red", "Blue", etc) and the second column being a circle (custom UIComponent) of the corresponding color. If I click on the first column to sort, all the names of the colors are sorted fine but those circles in the second column are in totally wrong order. Anyone knows what went wrong with the code below?

This is the application mxml:

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               xmlns:components="components.*"
               minWidth="955" minHeight="600">

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            [Bindable]
            public var myArray:ArrayCollection = new ArrayCollection([
                { name:"Red",    color:0xff0000 },
                { name:"Orange", color:0xff8000 },
                { name:"Yellow", color:0xffff00 },
                { name:"Green",  color:0x00ff00 },
                { name:"Blue",   color:0x0000ff },
                { name:"Purple", color:0xff00ff }
            ]);
        ]]>
    </fx:Script>

    <s:DataGrid dataProvider="{myArray}">
        <s:columns>
            <s:ArrayCollection>
                <s:GridColumn dataField="name"/>
                <s:GridColumn dataField="color">
                    <s:itemRenderer>
                        <fx:Component>
                            <s:GridItemRenderer>
                                <s:VGroup>
                                    <components:Circle color="{data.color}" />
                                </s:VGroup>
                            </s:GridItemRenderer>
                        </fx:Component>
                    </s:itemRenderer>
                </s:GridColumn>
            </s:ArrayCollection>
        </s:columns>
    </s:DataGrid>
</s:Application> 
```

And this is the custom UIComponent:

```
package components
{
    import mx.core.UIComponent;

    public class Circle extends UIComponent
    {
        public var color:uint;

        public function Circle()
        {
            super();
            height = 20;
            width = 20;
        }

        override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
        {
            super.updateDisplayList(unscaledWidth, unscaledWidth);
            graphics.clear();
            graphics.beginFill(color, 1);
            graphics.drawCircle(10, 10, 8);
            graphics.endFill();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:52:37.167

您的自定义组件可能根本没有重绘。最简单的解决方案是根本不使用自定义组件，而是使用 FXG 图形来绘制圆圈。

用这个替换你的 itemrenderer，它应该可以正常工作：

```
<s:GridItemRenderer>
     <s:Ellipse width="20" height="20">
         <s:fill>
              <s:SolidColor color="{data.color}" />
         </s:fill>
     </s:Ellipse>
</s:GridItemRenderer> 
```

也就是说，我会将标签和颜色样本放在一列（而不是两列）中，因为它们代表相同的数据。

# java - 检查记录是否已插入到数据库表中

> ID：12870798
> 
> 赞同：0
> 
> 时间：2012-10-13T06:59:06.797
> 
> 标签：java, mysql, jsp

我需要检查一条记录是否已插入表中，如果是，我必须检索特定信息并在第二个表中搜索。请告诉我一旦记录到达第一个表中搜索第二个表的正确方法.

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:02:27.150

不确定，你到底在找什么。您是否在数据库中寻找[**触发器**](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)，一旦插入记录就会触发？

```
CREATE
[DEFINER = { user | CURRENT_USER }]
TRIGGER trigger_name trigger_time trigger_event
ON tbl_name FOR EACH ROW trigger_body 
```

# php - php查询iOS纬度和经度不使用xml输出搜索附近的mysql lat和lon

> ID：12870803
> 
> 赞同：0
> 
> 时间：2012-10-13T06:59:50.480
> 
> 标签：php, mysql, xml

我正在尝试从 ios 获取 lat 和 lon 坐标的输出（这工作正常），将其发送到 php 以使用 MySQL 进行查询，并让 php 将 xml 文档发送回 ios（此步骤不起作用，因为它是拒绝从mysql读取上传的数据条目），然后在iOS UItableview上解析它（这也很好）。我试图让它与 XML 一起使用，因为在 iOS 上解析 xml 对我来说真的很简单，而且我已经在上面运行了一个更简单的 xml 脚本，但可能是由于 php 经验不足导致的错误，我无法得到这个 php 脚本在职的。我在我的 php 脚本中做错了什么？谢谢！

```
<?php
{ $lat = (float)$_GET['lat']; } //ios get "lat" value from: NSString *urlString = [NSString stringWithFormat:@"http://www.mysite.com/loc.php?lat=%g&lon=%g", latitude, longitude];
{ $lon = (float)$_GET['lon']; } //ios get "lon" value from: NSString *urlString = [NSString stringWithFormat:@"http://www.mysite.com/loc.php?lat=%g&lon=%g", latitude, longitude];
$minlat = $lat-.1;
$maxlat = $lat+.1;
$minlon = $lon-.1;
$maxlon = $lon+.1;
$dbh = new PDO('(censored personal information)');
$sql = 'SELECT lat, lon, name FROM locations WHERE lat >= ? AND lat <= ? AND lon >= ? AND lon <= ?';
$params = array( $minlat, $maxlat, $minlon, $maxlon );
$q = $dbh->prepare( $sql );
$q->execute( $params );
$doc = new DOMDocument();
$r = $doc->createElement( "locations" );
$doc->appendChild( $r );
foreach ( $q->fetchAll() as $row) {
  {
    $e = $doc->createElement( "location" );
    $e->setAttribute( 'name', $row['name'] );
    $e->setAttribute( 'd', $d );
    $r->appendChild( $e );
  }
}
print $doc->saveXML();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:32:15.413

由于您是 PHP 新手，我想我会通过逐行浏览脚本来记录我对脚本的观察：

```
{ $lat = (float)$_GET['lat']; }
{ $lon = (float)$_GET['lon']; } 
```

这里的牙套是多余的。您可能还希望执行一些输入完整性检查（包括是否设置了参数）。

```
$minlat = $lat-.1;
$maxlat = $lat+.1;
$minlon = $lon-.1;
$maxlon = $lon+.1; 
```

如果您要搜索地面某个范围内的记录，则需要计算[大圆距离](http://en.wikipedia.org/wiki/Great-circle_distance)；您应该知道，在您当前的方法中，0.1° 经度的距离随一个人的纬度而变化，从两极没有任何距离到赤道几乎 7 英里。

[Google 在使用 PHP、MySQL 和 Google 地图创建商店定位器](https://developers.google.com/maps/articles/phpsqlsearch_v3)下编写了一个有用的指南：特别注意[使用 MySQL 查找位置](https://developers.google.com/maps/articles/phpsqlsearch_v3#findnearsql)和（在您的情况下）[使用 PHP 输出 XML](https://developers.google.com/maps/articles/phpsqlsearch_v3#outputxml)部分。

将其余代码放在一个或多个`try { ... }`块中并捕获任何抛出的异常。

```
$dbh = new PDO('(censored personal information)'); 
```

检查它是否成功：`if (!$dbh) die('Unable to create PDO object');`.

然后将此 PDO 对象设置为引发异常`$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);`，而不仅仅是模拟准备好的语句`$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE);`。

```
$sql = 'SELECT lat, lon, name FROM locations WHERE lat >= ? AND lat <= ? AND lon >= ? AND lon <= ?'; 
```

虽然您的查询可能会根据上述建议发生巨大变化，但知道您可以使用 MySQL 的[`BETWEEN ... AND ...`](http://dev.mysql.com/doc/en/comparison-operators.html#operator_between)运算符缩写此查询可能仍然很有用：`WHERE (lat BETWEEN ? AND ?) AND (lon BETWEEN ? AND ?)`.

如果您使用命名参数而不是占位符，您可能还会发现您的代码更易于维护：`WHERE (lat BETWEEN :minlat AND :maxlat) AND (lon BETWEEN :minlon AND :maxlon)`.

```
$params = array( $minlat, $maxlat, $minlon, $maxlon ); 
```

如果使用命名占位符，您可以使用关联数组作为`$params = array ( ':minlat' => $minlat, ... );`.

在任何一种情况下，您都可以将值或变量分别绑定到您的参数（这是我的首选方法，因为它很容易让一个人在只更改一些参数的情况下再次运行查询）：`$q->bindParam(':minlat', $minlat);`等等。

```
$q = $dbh->prepare( $sql );
$q->execute( $params );
$doc = new DOMDocument(); 
```

检查它是否成功：`if (!$doc) die('Unable to create DOMDocument object');`.

```
$r = $doc->createElement( "locations" );
$doc->appendChild( $r );
foreach ( $q->fetchAll() as $row) { 
```

`fetchAll()`将整个结果集提取到 PHP 中，如果结果集很大，这可能需要大量内存。如果只想依次遍历每条记录，通常最好根据需要获取每条记录：`while ( $row = $q->fetch() )`.

```
 { 
```

这个支架（连同下面的一对）是多余的。

```
 $e = $doc->createElement( "location" );
    $e->setAttribute( 'name', $row['name'] );
    $e->setAttribute( 'd', $d ); 
```

您的变量在哪里`$d`声明/分配？

```
 $r->appendChild( $e );
  } 
```

如上所述，这个支架是多余的。

```
}
print $doc->saveXML(); 
```

# javascript - How to delay image display with external javascript

> ID：12870804
> 
> 赞同：1
> 
> 时间：2012-10-13T06:59:49.913
> 
> 标签：javascript, image, timer, delay

I'm do it on external script :

```
var t=setTimeout(function(){document.write('<img src="/image.jpg" width="100" height="100" />')},10000) 
```

then on main page :

```
<script type='text/javascript src='external.js' /> 
```

but after 10s main page just display full image.jpg, how to display the image on main page ? thank's

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:11:12.577

当您在页面渲染后执行 document.write 时，当前页面将被 document.write("") 中指定的内容覆盖。

如果打算在超时时显示图像，您可以在超时后更改预先存在的图像的可见性，或者您可以使用 document.createElement 动态创建新的图像元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T07:03:45.773

如果您`document.write`在页面加载后调用它将是页面的内容。而不是使用`document.write`你可以让页面中的图像正常但隐藏（使用 css），然后在页面加载后 10 秒显示它。

# c# - Change platform in .NET from 3.5 down to 2.0

> ID：12870806
> 
> 赞同：-1
> 
> 时间：2012-10-13T07:00:00.747
> 
> 标签：c#, .net, target

I have a C# project in VS 2008\. I changed target framework from 3.5 down to 2.0.I also have a set up project with net framework 2.0 required. But after installing program in another PC, i get an error:

> System.IO.FileNotFoundException: Could not load file or assembly System.Core, version 3.5.0.0.. etc...

I don't understand why I change target framework to 2.0 and no importing System.Core in reference. But i import System.IO, is it problem? How can i use net framework 2.0\. Thank for advances. Sorry because of my bad English.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:17:55.867

查看项目选项卡中的引用是否有 2.0 以外的任何版本：

![去哪里看的例子](../Images/7a63f2e8f3d426ee8f5e2bfe02b166b1.png)

我假设您首先尝试在这里重新定位：

![重新定位框架](../Images/1dfc778404d1b3253d78e0e9cf307eab.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T07:21:49.657

System.Core 将不直接被 Framework 2.0 支持......

# java - In eclipse AVD, I got 'Unfortunately ~ has stopped working'

> ID：12870808
> 
> 赞同：2
> 
> 时间：2012-10-13T07:00:13.183
> 
> 标签：java, android, eclipse, package

I was making ImageView activity and when I try to run it through AVD, it stopped.

There are no typing errors.

How can I fix it? I need your help.

Below is my code

```
package com.android.imgview;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:12:29.593

重新启动模拟器。我有时也面临这样的问题，但重新启动模拟器可以解决这个问题。

# objective-c - 使用 NSDateFormatter 解析日期

> ID：12870817
> 
> 赞同：1
> 
> 时间：2012-10-13T07:01:09.500
> 
> 标签：objective-c, ios, cocoa-touch

我有一个日期：

```
2012-10-11T23:14:00-04:00 
```

我正在使用这种格式来解析 NSDateFormatter：

```
yyyy-MM-dd'T'HH:mm:ss-ZZ 
```

但它返回 nil

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:13:57.303

您的日期格式错误。如果要转换的字符串中有冒号，则必须在格式字符串中放入 5 个 *Z*字符，这是正确的用法。此外，您永远不会将 +/- 作为格式的一部分，因为不能保证只有日期 + 或 - GMT（至少在您谈论 /format/ 时不会）。

因此，正确的格式字符串将是`yyyy'-'MM'-'dd'T'HH':'mm':'ssZZZZZ`：

```
NSDateFormatter* formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ssZZZZZ"];
NSDate* date = [formatter dateFromString:@"2012-10-11T23:14:00-04:00"];
NSLog(@"Date: %@", date); // This correctly logs Date: 2012-10-12 03:14:00 +0000 
```

仅使用两个*Z*字符将是 RFC 822 格式，并且您的日期字符串必须看起来像：（`2012-10-11T23:14:00-0400`即，时区偏移量上没有小时/分钟分隔符）。示例字符串中的时区是 ISO-8601。有关详细信息，请参阅：[http ://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)

# iphone - 内存警告和崩溃的应用程序 - 找不到问题的根源

> ID：12870818
> 
> 赞同：0
> 
> 时间：2012-10-13T07:01:29.867
> 
> 标签：iphone, objective-c, memory, instruments, memory-warning

在收到许多内存警告后，我的应用程序不断崩溃。它有将近三万行代码，因此很难跟踪问题。我已经通过仪器运行它，并且在某些阶段有高达 30MB 的实时字节，据我所知，这应该不是太大的问题。内存泄漏极少，因此它们不会成为问题。该应用程序在长时间播放后往往会崩溃。仪器中没有任何东西可以帮助我追踪我不断收到的记忆警告的来源。有没有其他可能的方法来做到这一点？非常重要的是，这不会因为明显的原因而发生。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:05:07.823

实际上，根据我的经验，30MB 的活动字节并不是那么少的内存。IMO，可以消耗大量内存，但只消耗很短的时间，然后回到更安全的内存占用水平（如果你想解决 iPad1 应该在 10 到 15/20 MB 之间）。

我认为这是“废弃内存”的情况，即分配的内存，虽然它可以被释放，但永远不会（或为时已晚）。

查看[这篇文章](http://useyourloaf.com/blog/2011/03/08/using-heapshots-to-find-abandoned-memory.html)以了解快照内存分析，这可能对您的情况有所帮助。

当然，您的应用也有可能**确实**需要那么多内存（例如，因为它处理的一些大型资源），在这种情况下，前进的道路将试图减少所需的内存（这在很大程度上取决于您的应用程序管理的数据。如果它是一个游戏，例如，您可以使用 RGB565 格式而不是 RGBA8888 来保存您的作品）。

此外，如果 Instruments 允许您确定一定数量的内存消耗上升的情况，您可以处理这些情况以消除所有泄漏，或删除废弃的内存，或优化您的应用程序内存消耗要求。

# android - 显示名称和 s_no

> ID：12870834
> 
> 赞同：0
> 
> 时间：2012-10-13T07:04:06.663
> 
> 标签：android, listview

```
Cursor cur = acc.query("details", new String[] { "name"}, null,
            null, null, null, null);

    cur.moveToFirst();
    listContent = new String[cur.getCount()];
    for (i = 0; i < cur.getCount(); i++) {
        String ss1;
        ss1 = cur.getString(0);
        listContent[i] = ss1;

        cur.moveToNext();
    }
    cur.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:11:36.647

尝试：

```
Cursor cur = acc.query("details", new String[] { "name"}, null,
        null, null, null, null);
listContent = new String[cur.getCount()];
int i=0;
while(cur.moveToNext()) {
    listContent[i] =cur.getString(0);
     i++;
}
cur.close(); 
```

并且不使用任何索引计数器的简单方法使用 ArrayList 而不是 Array as：

```
Cursor cur = acc.query("details", new String[] { "name"}, null,
        null, null, null, null);
 List<String> strArrayList = new ArrayList<String>();

while(cur.moveToNext()) {
    strArrayList.add(cur.getString(0));
}
cur.close(); 
```

# javascript - HTML/Javascript/CSS 桌面应用程序

> ID：12870835
> 
> 赞同：1
> 
> 时间：2012-10-13T07:04:11.703
> 
> 标签：javascript, html, activex

我用 HTML、Javascript 和 CSS 编写了一个程序，并在 IE 中显示它。我依赖 IE，因为数据是从 Excel 文件写入和读取的，我需要为此使用 ADO。但是，“一个 activex 对象正在尝试与页面的其他部分进行交互...”提示非常烦人，因为它是一个将本地存储在用户计算机上的应用程序，而不是 Web 应用程序。我发现 HTA 很难调试，而且好像有一段时间没有更新了。我无法将我的应用程序添加到受信任的站点并使用自定义级别来处理 activex 提示，因为它存储在我的计算机上。我正在考虑将它存储在我的本地主机上，因为这样我就可以将它添加到受信任的站点，但这需要对用户的计算机进行调整。我的问题是，

任何建议将不胜感激：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:25:49.833

改写一个windows应用，用excel的api。您的 HTML CSS js 模型无法很好地与安全性配合使用。

# c# - 如何使用最终类作为接口类型（php）

> ID：12870836
> 
> 赞同：2
> 
> 时间：2012-10-13T07:04:18.910
> 
> 标签：c#, php

我有一个愚蠢的问题。我想在 C# 2-3 年后学习 PHP。

就像在 C# 中一样

```
public enum SimpleEnum{
   One,
   Two,
   Three
}

public interface ISimple
{
  int Id;
  SimpleEnum SimpleType;
} 
```

我在 PHP 中做了什么：

```
final class SimpleEnum {
  const ONE = 1;
  const TWO = 2;
  const THREE = 3;
}

interface ISimple {
  public $value1;

  SimpleEnum $myEnum;
} 
```

但是错误发生`SimpleEnum`在`ISimple`.

也许是不可能的，但我想问你如何`SimpleEnum`在界面中使用 as type ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:10:53.917

`Fatal error: Interfaces may not include member variables`...所以，你不能在`Interface`s 中拥有属性，只有方法声明，相反，你可以使用`abstract class`它并从中扩展它。

此外，在 PHP 中，没有严格的类型控制。因此，如果您想声明属性，只需使用`public $enum = null`init `__construct()`it即可`$this->enum = ...;`。

还有一件事。如果您想确保这`SimpleEnum`正是存储在`$enum`属性中的内容，请为此属性声明 setter `setSimpleEnum(SimpleEnum $enum) { ... }`，您可以在其中将传递的值存储到类属性。在您想要更改的任何地方使用它`$enum`，这样如果您传递任何未扩展的类`SimpleEnum`- 您将拥有一个`Fatal`. 伪严格类型控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T07:24:23.900

不可能，但如果您需要 $myEnum 专门为 SimpleEnum，那么只需在合同（界面）中要求它，因此任何参展课程都必须效仿。你可以通过类型提示来做到这一点

```
interface ISimple {
    public function setMyEnum(SimpleEnum $myEnum);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T07:08:20.247

如[Type Juggling](http://www.php.net/manual/en/language.types.type-juggling.php)中所述：

> PHP 不需要（或支持）在变量声明中显式定义类型；变量的类型由使用变量的上下文决定。

# c++ - C++ 关于 stdio.h 改变标准输出

> ID：12870839
> 
> 赞同：0
> 
> 时间：2012-10-13T07:04:50.890
> 
> 标签：c++

C++ 关于 stdio.h 改变标准输出

我有一个打印出一些数据的功能。

`//overallSummary`是一个将数据打印到控制台的 void 返回类型函数。它按预期工作。

我想保存到一个文本文件，所以我这样做了

```
#include <stdio.h>

freopen("summary.txt","w",stdout);
overallSummary();
fclose(stdout); 
```

我运行了代码，它按预期工作。 **但是**，控制台一直闪烁。它看起来像被阻止了。按下回车并没有停止它。它没有挂。我刚刚失去了对控制台的控制。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:13:10.500

我建议更改为更具表现力的：

```
#include <iostream>    

void overallSummary(std::ostream& os); // use os instead of std::cout in overallSummary

std::ofstream ofs;
ofs.open("summary.txt");
if(!ofs.is_open())
  abort();
overallSummary(ofs);
ofs.close(); 
```

否则，如果您只想写入文件，这意味着**重定向 std::cout**，
所以这样称呼它：

```
./program_name > summary.txt 
```

在 std::cout 上编写的程序进入 summary.txt。使用“>>”而不是“>”追加。

# objective-c - 在 Objective-C 中不使用链式初始化器是否可行？

> ID：12870840
> 
> 赞同：0
> 
> 时间：2012-10-13T07:04:51.420
> 
> 标签：objective-c, cocoa-touch, cocoa

我正在为 iPhone 编写 Objective-C / Cocoa-Touch 代码，我想知道，不链接​​初始化程序是否可以？例如，在我的父类中，我有三个初始化器，它们都需要由子类继承。在这种情况下不链接可以吗？例如，在这一类中，我将其设置如下：

```
- (id)initWithGraphic:(Graphic*)graphic size:(CGSize)size
{
    self = [super initWithFrame:CGRectZero];
    if (self) 
    {
      ...

    }
    return self;
}

- (id)initWithGraphic:(Graphic*)graphic maximumDimension:(CGFloat)maximumDimension
{
    self = [super initWithFrame:CGRectZero];
    if (self) 
    {
      ...

    }
    return self;
}

- (id)initWithGraphic:(Graphic*)graphic 
{
    self = [super initWithFrame:CGRectZero];
    if (self) 
    {
      ...

    }
    return self;
} 
```

所以基本上我没有一个指定的初始化器，因为我很难将它们链接在一起，我基本上有三个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T07:23:17.767

简短的回答：如果您希望您的代码易于理解和维护，那么**您必须始终调用`super`'s 指定的初始化程序。**

长答案...

该`-[NSObject init]`方法被[记录为什么都不做](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)：

> `init`类中定义的方法`NSObject`没有初始化；它只是返回`self`。

因此理论上你不需要调用它。在实践**中，最好调用它，**因为它使您的代码更加统一（因此更容易理解），并且如果您决定将类更改为继承自`NSObject`.

如果你有一些继承链`MyGrandparent > MyParent > MyObject`，并且你是 and 的实现者`MyParent`，`MyObject`并且`MyParent`没有覆盖所有`MyGrandparent`的初始化器，那么你可以直接`MyGrandparent`从你的初始化器中调用一个非覆盖的初始化`MyObject`器。但同样，**这是一个坏主意**。当您或其他人稍后必须重新访问代码时，这会令人困惑，并且如果您`MyParent`稍后更改实现，则可能会中断。

此外，如果您要创建多个初始化程序，则需要了解*指定初始化程序* [here](http://developer.apple.com/library/ios/#documentation/general/conceptual/DevPedia-CocoaCore/MultipleInitializers.html)和[here](http://developer.apple.com/library/ios/documentation/general/conceptual/CocoaEncyclopedia/Initialization/Initialization.html#//apple_ref/doc/uid/TP40010810-CH6-SW58)。选择一个初始化器作为指定初始化器很重要，并确保所有子类初始化器直接调用超类的指定初始化器。否则，您最终可能会创建无限递归。[我在这个答案](https://stackoverflow.com/questions/12310899/about-parent-objects-init-method/12311246#12311246)和[这个答案](https://stackoverflow.com/questions/10057461/why-cant-a-designated-initializer-call-a-secondary-initializer-in-its-base-clas/10057624#10057624)中彻底解释了这个问题。

### 更新

在您的示例中，您可以像这样设置指定的初始化程序：

```
static CGFloat const kMaximumDimensionNone = 0; // or NAN if 0 is a valid max dimension
static CGSize const kSizeNone = { 0, 0 }; // or NAN, NAN if 0x0 is a valid size

- (id)initWithGraphic:(Graphic *)graphic size:(CGSize)size maximumDimension:(CGFloat)maximumDimension {
    if (self = [super init]) {
        _graphic = graphic;
        if (!CGSizeEqualToSize(size, kSizeNone)) {
            [self configureWithSize:size];
        }
        else if (maximumDimension != kMaximumDimensionNone) {
            // Use if(!isnan(maximumDimension)) instead if you use NAN as the placeholder
            [self configureWithMaximumDimension:maximumDimension];
        }
        else {
            [self configureWithDefaultDimensions];
        }
    }
    return self;
}

- (id)initWithGraphic:(Graphic *)graphic {
    return [self initWithGraphic:graphic size:kSizeNone maximumDimension:kMaximumDimensionNone];
}

- (id)initWithGraphic:(Graphic *)graphic size:(CGSize)size {
    return [self initWithGraphic:graphic size:size maximumDimension:kMaximumDimensionNone];
}

- (id)initWithGraphic:(Graphic *)graphic maximumDimension:(CGFloat)maximumDimension {
    return [self initWithGraphic:graphic size:kSizeNone maximumDimension:kMaximumDimensionNone];
} 
```

您不必在公共头文件中公开指定的初始化程序。您可以添加一个单独的头文件，为要导入的子类公开指定的初始化程序。例如，Apple 使用标题来执行此操作，该`UIGestureRecognizerSubclass.h`标题`ForSubclassEyesOnly`在`UIGestureRecognizer`.

或者您可以将这些`configureWith...`方法公开给您的子类，甚至不需要让它们覆盖初始化程序。

# mysql - 将两个插入查询与事务合并。但是我需要获取第一个插入的行 ID

> ID：12870843
> 
> 赞同：0
> 
> 时间：2012-10-13T07:05:01.407
> 
> 标签：mysql, sql, database, querying

```
$db->query("INSERT into `users` (username, password, email)
    VALUES ('$username', '$hashpassword', '$email')");

$userid = mysqli_insert_id($db->link);

$db->query("INSERT into `users logins` (userid, token, ip)
    VALUES ('$userid', '$token', '$ip')"); 
```

以上是旧代码。以下是我的新作品：

```
$db->query("BEGIN TRANSACTION;
INSERT into `users` (username, password, email)
VALUES ('$username', '$hashpassword', '$email');

[here I need to get the row ID of the above insert]

INSERT into `users logins` (userid, token, ip)
VALUES ('$userid', '$token', '$ip')
COMMIT;"); 
```

如何获取第一个插入行 ID 并将其用于第二个插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:07:12.747

采用**[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)**

```
...

INSERT into `users logins` (userid, token, ip)
VALUES (LAST_INSERT_ID(), '$token', '$ip')

... 
```

或者如何创建`Stored Procedure`

```
DELIMITER $$
CREATE Procedure InsertRecord
(
    IN _userName VARCHAR(50),
    IN _passWord VARCHAR(50),
    IN _email VARCHAR(50),  
    IN _token VARCHAR(50),
    IN _ip VARCHAR(50)
)
BEGIN
    DECLARE Last_ID INT;

    INSERT into `users` (username, password, email)
    VALUES (_userName, _passWord, _email);

    SET Last_ID = LAST_INSERT_ID();

    INSERT into `users logins` (userid, token, ip)
    VALUES (LAST_INSERT_ID(), _token, _ip);

    SELECT Last_ID;
END $$
DELIMITER ; 
```

# jquery - JQuery多轮投票一票

> ID：12870846
> 
> 赞同：0
> 
> 时间：2012-10-13T07:05:46.700
> 
> 标签：jquery, validation, cookies

我有一个网站，它有多个字段（公司、产品），允许投票赞成或反对，每次投票我只希望每个用户对字段投票。但是，我不希望任何人注册此权利。从我的研究来看，如果它是一次民意调查，cookie 似乎是最好的选择，（看看他们是否投票，如果是的话，添加一个 cookie，不要让他们投票，但是，如果有 1000 个民意调查，我会怎么看如果他们对任何一项民意调查进行了投票，并且不允许他们再次对该民意调查进行投票，但其他民意调查？） Coockies 将主要用于识别单个用户，但我如何识别他们已投票和未投票的内容? 各个事物由唯一的公司 ID 定义。任何建议都会很好。这个网站上最重要的是匿名，所以我不能要求他们注册。我也知道他们可以更改 IP，或删除 cookie 或等等等等。但我正在为非精通技术的用户寻找解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:18:29.007

您可以生成 cookie 标识符并在服务器上存储对该 ID 进行的投票。另一种方法是连接投票的投票 ID 并将它们存储在 cookie 中。

编辑：添加了带有示例实现的[JSFIDDLE ：](http://jsfiddle.net/r9ncN/)

```
$(document).ready(function() {

    var cookiename = "mypolls";

    $('input[type=button]').click(function() {

        var pollId = $(this).parent().attr('id');

        if ($.cookie(cookiename)) {

            var voted = $.cookie(cookiename);

            if (voted.indexOf('|' + pollId + '|') > -1) {

                alert('Already voted!');
                return;
            }
            else {

                voted += pollId + '|';

                // storing updated cookie
                $.cookie(cookiename, voted);
            }
        }
        else {

            // adding cookie
            $.cookie(cookiename, '|' + pollId  + '|');
        }

        alert('Thank you for your vote!');
    });
});​ 
```

# uinavigationbar - UINavigationBar 的子类 - 将半透明设置为 YES 不起作用

> ID：12870848
> 
> 赞同：0
> 
> 时间：2012-10-13T07:06:07.150
> 
> 标签：uinavigationbar, subclassing

不确定这是否是正确的方法，但子类化 UINavigationBar 并将其设置为 YES 似乎不起作用。

在我的实现文件中：

```
- (void)drawRect:(CGRect)rect
{
    self.translucent = YES;
} 
```

我能够在视图控制器中覆盖它，但是，我发现自己在重复代码并且想在自定义类中移动实现。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:27:42.567

如果有人需要，找到解决方案。在初始化时将 self.translucent 设置为 YES：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.translucent = YES;
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{

} 
```

# c++ - 为什么用户定义类型的数组必须调用其默认构造函数？

> ID：12870853
> 
> 赞同：2
> 
> 时间：2012-10-13T07:06:54.717
> 
> 标签：c++, arrays, initialization

请考虑以下示例

```
struct Foo
{
    int bar;    
    Foo(int i):bar(i){cout << "real ctor\n";}   
    Foo(){cout << "default ctor\n";}
};

int main()
{   
    Foo fooArr[3];//default ctor called 3 times 
    for(int i=0;i!=3;++i)cout << fooArr[i].bar << endl;//bare memory junk
    cout << endl;

    vector<Foo> fooVec;
    for(int i=0;i!=3;++i){
        fooVec.push_back(Foo(i));     //only real ctor called
        cout << fooVec[i].bar << endl;//real thing 
    }
    cout << endl;

    int iArr[3];
    for(int i=0;i!=3;++i)cout << iArr[i] << endl;//bare memory junk
} 
```

我不希望任何用户`Foo`调用它的默认构造函数，因为它不在我的设计中。但我希望我的用户能够使用数组`Foo`，为了支持这一点，我不得不提供一个毫无意义且令人困惑的 Foo::Foo()。我只是不明白为什么 C++ 标准强制程序员做这样的事情。其背后的原理是什么？为什么不一致？请问有哪位懂这个的聪明人给我解释一下吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T07:30:37.253

`Foo`即使它没有默认构造函数，您也可以创建数组。只是在声明数组时必须构造**元素。**所以你可以这样做：

```
Foo fooArr[] = { Foo( 1 ), Foo( 2 ), Foo( 3 ) }; 
```

另一种方法是使用动态数组（您的示例，这可能是最好的）或指向（如）`vector<Foo>`的指针数组`Foo``shared_ptr<Foo> arrFoo[3]`

```
shared_ptr<Foo> arrFoo[3];
arrFoo[2].reset( new Foo(3) ); 
```

关于 :的最后一点说明：由于事先知道数组的大小，因此您可以通过在向量中为所有未来s`vector<Foo>`保留足够的空间来提高性能：`Foo`

```
vector<Foo> arrFoo;
arrFoo.reserve( 3 );

for( int i = 0; i<3; ++i )
    arrFoo.push_back( Foo( i ) ); 
```

编辑：你的问题是为什么你必须有一个默认的构造函数来制作一个类型的静态数组。我认为答案很清楚，但我会尽力解释。

`Foo bar1; Foo bar2;`使用默认构造函数创建两个对象，因为没有提供参数。

`Foo bar[2];`本质上是一样的。它声明了两个需要构造的对象。没有构造对象就没有办法声明它——这就是首先声明它的意义所在。

**C++ 中的静态数组只是一堆连续放置在内存中的对象。它不是一个单独的对象。**

希望这是有道理的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T07:08:53.700

基本原理是数组中充满了默认构造的元素，因此元素的类型必须是默认可构造的。如果您使用一些值初始化数组，则不需要默认构造：

```
Foo fooArr1[3]; // full of default constructed Foos
Foo fooArr[3] = {1,2,3}; // default constructor not required. Foo(int) called. 
```

请注意，代码示例中的第二行使用隐式转换构造函数提供的隐式转换 from `int`to 。`Foo``Foo(int)`

您必须提供自己的默认构造函数的原因是您已经声明了一个构造函数，它禁用了默认构造函数的自动生成。这背后的基本原理是，如果您需要提供一些构造函数，您可能还想在默认构造函数中做一些特殊的事情。

如果您真的担心用户提供的构造函数，那么您可以使您的类成为真正的聚合并使用聚合初始化：

```
struct Foo
{
  // no user declared constructors
  int foo;
};

int main()
{   
    Foo fooArr1[3]; // OK
    Foo fooArr[3] = { {1}, {2}, {3} }; // aggregate construction 
} 
```

在 C++11 中，您可以使用以下命令启用编译器生成的默认构造函数`default`：

```
Foo()=default; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T07:26:31.190

您必须选择：要么不定义默认构造函数，因此，您不能声明`Foo`. 或者声明一个默认构造函数（甚至为空）并且可以声明一个`Foo`.

如果您之前使用过 C# 或 Java 等 OOP 语言，并且您有一个`class Foo`and `Foo[] arr`，那么您不必声明默认构造函数，因为这些语言中的数组只携带对对象的引用（地址）。数组本身是一个对象，因此`arr`创建时将 == `null`。使用时`arr = new Foo[3];`，我们创建一个新的数组对象，其中包含 3 个引用：`arr == { null, null, null }`. 然后为每个引用分配一个对象：`for (int i = 0; i < 3; ++i) arr[i] = new Foo(i);`.

但是，C++ 不同，因为数组携带对象本身而不是对它的引用。因此，当携带对象本身时，它必须有无参数构造函数才能与每个对象一起调用。（即在 C++ 中：`Foo arr[3];`然后`arr = { objectOfFoo, objectOfFoo, objectOfFoo }`

通过标记一组指针可以找到解决问题的方法：

```
Foo * arr[10] = { 0 }; // arr = { NULL, NULL, NULL, ... , NULL }
for (int i = 0; i < 10; ++i) arr[i] = new Foo(3); // you don't have to declare default constructor

// some using of array
// C++ doesn't have a garbage collector
for (int i = 0; i < 10; ++i) delete arr[i]; 
```

# mysql - 如何以我需要的方式在 mysql 中获取输出如下

> ID：12870857
> 
> 赞同：2
> 
> 时间：2012-10-13T07:07:35.773
> 
> 标签：mysql, sql, pivot

我有一个表，其中有一列具有三个值 a、b 和 c。表的当前快照是

表名：- tblTest

价值观

```
tblColumn
a
a
a
b
b
b
b
c
c 
```

我需要得到完全一样的输出

```
A B C
3 4 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T07:15:14.807

```
select sum(tblColumn = 'a') as A,
    sum(tblColumn = 'b') as B,
    sum(tblColumn = 'b') as C
from tblTest 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/a831fa/3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T07:08:47.207

```
SELECT  SUM(CASE WHEN colName = 'a' THEN 1 ELSE 0 END) as A,
        SUM(CASE WHEN colName = 'b' THEN 1 ELSE 0 END) as B,
        SUM(CASE WHEN colName = 'c' THEN 1 ELSE 0 END) as C
FROM tableName 
```

另一种技术是使用`PreparedStatement`，如果您有多个未知数量的值组，这非常好，例如，`a,b,c,d,e,f,g,h,...`

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'SUM(IF(tblColumn = ''',
      tblColumn,
      ''', 1, 0)) AS ',
      tblColumn 
    )
  ) INTO @sql
FROM
  Table1;
SET @sql = CONCAT('SELECT ', @sql, ' FROM Table1');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/58ce2/7)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T07:16:00.203

试试这个

```
select tblColumn, Count(*) from tblTest group by tblColumn 
```

# java - 在java中为组合框分配键

> ID：12870859
> 
> 赞同：0
> 
> 时间：2012-10-13T07:08:02.700
> 
> 标签：java, swing, awt, jcombobox

我想`JComboBox`在 Swing 中添加一个简单但我想为组合中的每个项目分配值。我有以下代码

```
 JComboBox jc1= new JComboBox();
    jc1.addItem("a");
    jc1.addItem("b");
    jc1.addItem("c"); 
```

现在我想要的是，当单击组合框时，它应该相应地返回 1、2 和 3，而不是 a、b、c。有没有办法为组合框中的每个项目分配键值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T07:19:28.177

您可以将项目添加为对象，而不是像这样添加字符串：

```
JComboBox<ItemClass> jc = new JComboBox<ItemClass>();
    jc.addItem(item1);
    jc.addItem(item2);
    jc.addItem(item3); 
```

所以要返回键，事件的功能是：`jc.getSelectedItem().getKey` 这样做你必须重写`toString()`类ItemClass的函数来返回你想在组合框中显示的字符串。

顺便说一句，对于返回号，您可以尝试 : `jc.getSelectedIndex()`，它将返回您的字符串索引（`0 1 2`for `"a" "b" "c"`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T07:18:21.753

您可以创建自己的模型并将其添加到组合框中，而不是直接添加字符串。

检查 Java [ComboBoxModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/ComboBoxModel.html)。

[你可以在这个线程](https://stackoverflow.com/questions/8254940/java-swing-implementing-my-comboboxmodel-for-jcombobox)中找到更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T09:34:12.583

将数据包装在一个简单的类中：

```
class MyData {
  int value;
  String text;
  ...
} 
```

现在您可以通过扩展 BasicComboBoxRenderer 来编写自己的渲染器。将“值”转换为“MyData”并渲染文本。

```
public class Bla extends BasicComboBoxRenderer{

@Override
public Component getListCellRendererComponent(JList list, Object value,
        int index, boolean isSelected, boolean cellHasFocus) {
    if(value instanceof MyData) {
        setText(((MyData) value).getText());
    }
    return super.getListCellRendererComponent(list, value, index, isSelected,
            cellHasFocus);
}
} 
```

如果您使用 Java7，最好使用像 @Taiki 所示的泛型。现在你可以通过 jc.getSelectedItem() 来获取选中的对象。它始终来自 MyData 类型，您可以访问文本（“a”、“b”等）和值（1、2、3 等）

# android - Oracle MDK 示例应用在 Eclipse 中运行时显示错误和崩溃

> ID：12870867
> 
> 赞同：0
> 
> 时间：2012-10-13T07:09:05.067
> 
> 标签：android, oracle, classnotfoundexception

我是 Oracle 数据库移动服务器的新手。遵循[此处](http://docs.oracle.com/cd/E22663_01/doc.11100/e22681/sandroid.htm#BABEIFCJ)和[此处](http://docs.oracle.com/cd/E22663_01/doc.11100/e22677/nvovw.htm#OLDEV001)的官方教程和文档。[我从这里](http://www.oracle.com/technetwork/products/database-mobile-server/downloads/index.html)下载了 Oracle Mobile 服务器。按照教程，

*   我安装了MDK
*   从目录中打开示例项目`<MDK_ROOT>\Mobile\Sdk\samples\Sync\android\simple_sync_android`
*   并完成了 Java Build Path 练习
*   eclipse中没有出现错误。
*   然后我选择了`RUN AS -> Android application`

这显示了模拟器和控制台显示成功安装......到目前为止一切都很好。

```
10-13 11:58:07.588: E/AndroidRuntime(654): FATAL EXCEPTION: main
10-13 11:58:07.588: E/AndroidRuntime(654): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{tests.sync/tests.sync.MainAct}: java.lang.ClassNotFoundException: tests.sync.MainAct
10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-13 11:58:07.588: E/AndroidRuntime(654):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-13 11:58:07.588: E/AndroidRuntime(654):  at android.os.Looper.loop(Looper.java:137)
10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-13 11:58:07.588: E/AndroidRuntime(654):  at java.lang.reflect.Method.invokeNative(Native Method)
10-13 11:58:07.588: E/AndroidRuntime(654):  at java.lang.reflect.Method.invoke(Method.java:511)
10-13 11:58:07.588: E/AndroidRuntime(654):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-13 11:58:07.588: E/AndroidRuntime(654):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-13 11:58:07.588: E/AndroidRuntime(654):  at dalvik.system.NativeStart.main(Native Method)
10-13 11:58:07.588: E/AndroidRuntime(654): Caused by: java.lang.ClassNotFoundException: tests.sync.MainAct
10-13 11:58:07.588: E/AndroidRuntime(654):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
10-13 11:58:07.588: E/AndroidRuntime(654):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
10-13 11:58:07.588: E/AndroidRuntime(654):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
10-13 11:58:07.588: E/AndroidRuntime(654):  ... 11 more 
```

我检查了清单......这里是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="tests.sync"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".MainAct"
                  android:label="@string/app_name"
                  android:configChanges="orientation" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".TextFileEditor"
                  android:label="@string/app_name"
                  android:configChanges="orientation" >                  
        </activity>        

        <service android:name="oracle.opensync.syncagent.android.SyncAgentService"></service>
    </application>    

<uses-sdk android:minSdkVersion="3" />

<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.BATTERY_STATS" />
<uses-permission android:name="android.permission.INTERNET"></uses-permission>

</manifest> 
```

我可以看到那里列出的所有活动（只有两个类从活动扩展，一个是启动器类型）。我在代码中什么也没做。它是从 Oracle 提供的。

我试图从 android 设备与我的 oracle 企业数据库建立无风险的数据连接。这将我引向 Oracle 数据库移动服务器。开始本身就卡在这里了。

欢迎各种建议和指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:43:26.563

得到了答案:-)我在这里分享它，希望它对像我这样的其他新手有所帮助..

问题在于我们从 oracle 主文件夹导入的 jar 文件的顺序。我必须执行以下操作才能解决此问题：

*   在 Eclipse 中，转到项目属性
*   选择 Java 构建路径
*   单击订单和导出选项卡
*   向上移动“MOBILE_SYNC_ANDROID_LIB”条目，直到它位于 /simple/sync_android/src 条目下方
*   现在重建和

这对我有用。更多信息可以从 DoubleA 编写的简单博客中获得。[链接在这里](http://oracledms.blogspot.in/2012/08/installation-of-oracle-database-mobile.html)

# applescript - applescript中iTunes艺术品的文件夹图像：不再工作

> ID：12870871
> 
> 赞同：1
> 
> 时间：2012-10-13T07:09:49.120
> 
> 标签：applescript, mp3, itunes

你们中的任何人都可以指出为什么这个applescript（在雪豹上工作）不再适用于10.7 Lion。

它打算将每个专辑文件夹中名为“folder.jpg”的文件复制到iTunes中所选mp3的ID3标签中。

```
property tempfile : ((path to temporary items as string) & "itunespicturefile_temporaire.pict")
global vPictFolder

tell application "iTunes"
    set v_TrackSelection to selection
    if v_TrackSelection is not {} then
        repeat with vTrack in v_TrackSelection
            set vPictFolder to my (ParentFromPath(location of vTrack as string)) as text
            set thisPict to my getpictData("folder.jpg")
            if thisPict is not "" then
                delete artworks of vTrack
                set data of artwork 1 of vTrack to (thisPict)
            end if
        end repeat
    else
        display dialog ("select tracks first !")
    end if
end tell

on getpictData(vAlbumpictName)
    tell application "Finder" to tell file vAlbumpictName of folder vPictFolder to if exists then
        set t_file to it as string
    else
        display dialog vPictFolder & vAlbumpictName
        return ""
    end if
    do shell script "/opt/local/bin/convert " & quoted form of POSIX path of t_file & " " & quoted form of POSIX path of tempfile
    display dialog "ok"
    return read (tempfile as alias) from 513 as picture
end getpictData

on ParentFromPath(thePath)
    set wantPath to true
    set thePath to (thePath as text)
    set saveDelim to AppleScript's text item delimiters
    set AppleScript's text item delimiters to {":"}
    set pathAsList to text items of thePath
    if the last character of thePath is ":" then
        set idx to (the number of text items in thePath) - 2
    else
        set idx to -2
    end if
    if wantPath then
        set folderName to ((text items 1 through idx of pathAsList) as text) & ":"
    else
        set folderName to item idx of pathAsList
    end if
    set AppleScript's text item delimiters to saveDelim
    return folderName
end ParentFromPath 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:49:08.977

因为Lion 和更新的操作系统不支持图片格式（“ **.pict ”）。**您可以使用该术语`picture`来读取图像文件（JPEG，PNG，...），格式不会是`Picture`format ，而是文件的原始格式。

```
tell application "iTunes"
    set v_TrackSelection to selection
    if v_TrackSelection is not {} then
        repeat with vTrack in v_TrackSelection
            set vPictFolder to my (ParentFromPath(location of vTrack as string)) as text
            set thisPict to my getpictData(vPictFolder & "folder.jpg")
            if thisPict is not "" then
                delete artworks of vTrack
                set data of artwork 1 of vTrack to (thisPict)
            end if
        end repeat
    else
        display dialog ("select tracks first !")
    end if
end tell

on getpictData(tFile)
    try
        return (read (tFile as alias) as picture)
    end try
    display dialog tFile
    return "" -- not exists
end getpictData 
```

# javascript - 从多个 HTML 字段中选择，然后将总计添加到另一个列表

> ID：12870876
> 
> 赞同：0
> 
> 时间：2012-10-13T07:11:04.797
> 
> 标签：javascript, html, forms

我有 3 个 HTML 字段：一个文本框和两个选择列表。我想要做的是让用户在文本字段中输入内容并从其他两个列表中选择选项，然后单击“添加”按钮，将他的全部选择添加到另一个列表中。此最终列表是由 CGI 脚本提交和接收的列表。

例如，用户输入“Toyota”并从一个列表中选择 Sedan，从第二个列表中选择 2004，然后单击添加。然后，“Toyota Sedan 2004”将被添加到一个空列表中。用户可以将多个选择添加到列表中或从列表中删除。而这个列表就是表单提交时提交的列表。如果我只在 Javascript 中执行此操作，则最好不要使用 JQuery。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:45:02.370

您需要的是，当单击“添加”按钮时，会调用一个简单的 JavaScript 函数来检索：文本、选择 1 和选择 2 => 使用这些信息构建一个新选项，并将其附加到结果列表中。

关键的javascript函数：

```
- document.getElementById
- document.createElement
- appendChild 
```

在您的 html 中，表单/提交按钮只能在您的结果列表中。

示例（[jsfiddle 链接](http://jsfiddle.net/jKqyt/3/)）：

```
<html>
    <head>
        <script>
            function add() {
                var txt = document.getElementById("txt").value;
                var sel1 = document.getElementById("sel1").value;
                var sel2 = document.getElementById("sel2").value;
                var result = txt + " " + sel1 + " " + sel2;

                var resultOption = document.createElement("option");
                resultOption.value = result;
                resultOption.text = result;
                document.getElementById("selResult").appendChild(resultOption);
            }
        </script>
    </head>
    <body>
        <input id="txt" type="text" />
        <select id="sel1">
            <option value="value11">value11</option>
            <option value="value12">value12</option>
            <option value="value13">value13</option>
        </select>
        <select id="sel2">
            <option value="value21">value21</option>
            <option value="value22">value22</option>
            <option value="value23">value23</option>
        </select>
        <input type="button" value="add" onClick="javascript:add()"/>
        <br/>
        result:
        <form action ="." method="post">
            <select id="selResult"></select>
            <input type="submit" value="submit"/>
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T07:24:30.840

使用需要用户这个 jquery 插件：

1.  [jQuery 表单](http://www.malsup.com/jquery/form/)
2.  [Jquery 自动选项卡](http://archive.plugins.jquery.com/project/autotab)
3.  [jQuery UI](http://jqueryui.com/)

还有一些对您有用的 jquery 函数：

1.  . [阿贾克斯（）](http://api.jquery.com/jQuery.ajax/)
2.  [前置（）](http://api.jquery.com/prepend/)
3.  [。在（）](http://api.jquery.com/on/)

# php - 在 Windows 命令提示符 (cmd) 中运行 .php 文件

> ID：12870880
> 
> 赞同：20
> 
> 时间：2012-10-13T07:11:39.257
> 
> 标签：php, cmd

我想`.php`在 windows cmd 中运行一个文件。我按照这个（建议） [php 不被识别为内部命令（在 Windows 中）](https://stackoverflow.com/questions/2920903/php-is-not-recognized-as-an-intern-command-using-windows)

但它没有用。

我试过这个命令提示符：
`C:\Windows\system32> cd \myfolder`

在里面`myfolder`我做了如下：
`C:..\myfolder> php file.php`
但我得到一个错误“php不被识别为内部或外部”

但是当我尝试没有`php`这样的命令时；
`C:..\myfolder> file.php`
它只是在记事本中打开，但我想在`cmd`.
我该怎么做？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-13T07:29:34.177

**如果运行 Windows 10：**

1.  打开开始菜单
2.  类型`path`
3.  单击***编辑系统环境变量***（通常，它是顶部的搜索结果）并继续下面的步骤**6**。

**如果在较旧的 Windows 上：**

1.  显示桌面。

2.  右键单击桌面上的***我的电脑***快捷方式。

3.  单击***属性***。

4.  您应该看到控制面板的一部分 - ***Control Panel\System 和 Security\System***。

5.  单击左侧菜单上的***高级系统设置。***

6.  单击*系统属性*窗口底部的***环境变量。***

**   在用户变量列表中选择***PATH 。***

    *   将您的 PHP 路径 (C:\myfolder\php) 附加到 PATH 变量中，并用分号与现有字符串分隔。

    *   点击确定

    *   打开你的“cmd”

    *   输入路径，按回车

    *   确保您在列表中看到您的 PHP 文件夹。* 

 *那应该行得通。

注意：确保您的 PHP 文件夹中有 php.exe。它应该具有文件类型 CLI。如果您没有 php.exe，请继续检查安装指南 - [http://www.php.net/manual/en/install.windows.manual.php](http://www.php.net/manual/en/install.windows.manual.php) - 并从那里下载安装文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T07:03:42.657

例如，您可以：使用 php.exe 文件夹设置您的环境变量路径，例如 c:\program files\php

在 d:\ 中创建一个脚本文件，文件名为 a.php

打开 cmd: 使用 d: 命令转到 d: 驱动器

键入以下命令

php -f a.php

你会看到输出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T07:15:31.827

您应该在路径中为 PHP 声明环境变量，因此您可以像这样使用：

```
C:\Path\to\somewhere>php cli.php 
```

你可以这样[做](http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-08T17:18:55.087

看来你的问题要老得多了。但我只是看到了。我搜索（不在谷歌中）并找到了我的答案。

所以我正在编写它的解决方案，以便其他人可以从中获得帮助。

这是我的解决方案。

**与**其他答案不同，您不需要设置环境。

你只需要写下`php index.php`你`index.php`的文件名。

然后你会看到，该文件已编译并显示它所需的输出。*

# android - 如何使用我的 android 应用程序喜欢我朋友的墙贴？

> ID：12870883
> 
> 赞同：1
> 
> 时间：2012-10-13T07:11:59.840
> 
> 标签：android, facebook, comments, share, facebook-like

我正在创建一个 android 应用程序，我想在我朋友的墙贴上点赞。可以通过我自己的android应用程序吗？我已经尝试过这种方式，但总是出现权限错误，例如

```
{"error":{"message":"(#200) Requires publish_stream permission or Requires valid signature","type":"OAuthException","code":200}}, 
```

我的应用程序示例是

```
Utility.fb = new Facebook(StaticValues.APP_ID);
AsyncFacebookRunner fbAsyncRunner = new AsyncFacebookRunner(Utility.fb);
Bundle parameters = new Bundle();
fbAsyncRunner.request(commentId + "/likes", parameters, "POST", new  MyRequestListener(), ""); 
```

我添加了一些权限，例如

```
 "offline_access", "publish_stream",
        "read_stream", "user_photos", "publish_checkins",  "photo_upload","user_likes","friends_likes" 
```

我如何在朋友的评论下点赞、评论、发帖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T09:36:08.353

> “发布流”
> 
> 使您的应用能够向用户的信息流和用户朋友的信息流发布内容、评论和点赞。这是一个超集发布权限，其中还包括 publish_actions

这个权限没问题，但我认为问题可能是您仅在移动端添加它，即仅在代码中。在您在 Facebook 注册的 Facebook 应用程序中添加权限并尝试。

# android - 小部件 onclick 不适用于配置活动

> ID：12870885
> 
> 赞同：0
> 
> 时间：2012-10-13T07:12:22.810
> 
> 标签：android, widget

当我单击小部件中的按钮时，会出现一个 Toast。但是当我使用配置活动设置按钮的标题然后单击按钮时，吐司不会出现。为什么？

```
public class MyWidget extends AppWidgetProvider {

    public static String ACTION_WIDGET_CONFIGURE = "ConfigureWidget";
    public static String ACTION_WIDGET_RECEIVER = "ActionReceiverWidget";

       @Override
       public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

           RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);

           Intent intent = new Intent(context, MyWidget.class);
           intent.setAction(ACTION_WIDGET_RECEIVER);
           PendingIntent actionPendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);
           remoteViews.setOnClickPendingIntent(R.id.btn_widget, actionPendingIntent);

           appWidgetManager.updateAppWidget(appWidgetIds, remoteViews); //update our widget
       }

      @Override
       public void onDeleted(Context context, int[] appWidgetIds) {
               super.onDeleted(context, appWidgetIds);
       }

       @Override
       public void onDisabled(Context context) {
               super.onDisabled(context);
       }

       @Override
       public void onEnabled(Context context) {
               super.onEnabled(context);
       }

       @Override
       public void onReceive(Context context, Intent intent) {

         if (intent.getAction().equals(ACTION_WIDGET_RECEIVER)) 
         {
            Toast.makeText(context, "You have just clicked the button!", Toast.LENGTH_LONG).show();
         }
         super.onReceive(context, intent);

       } 
```

应用小部件提供者 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/widget_layout"
    android:minHeight="72dp"
    android:minWidth="72dp"
    android:configure="com.bfarago.tutorials.widget.ConfigActivity"
    > 
</appwidget-provider> 
```

显现：

```
 <activity
            android:name=".ConfigActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
            </intent-filter>
        </activity>

        <receiver android:name="MyWidget" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                <action android:name="com.bfarago.tutorials.widget.MyWidget.ACTION_WIDGET_RECEIVER"/>
            </intent-filter>    
            <meta-data android:name="android.appwidget.provider" android:resource="@xml/widget_info"/>
        </receiver> 
```

配置活动：

```
public class ConfigActivity extends Activity {

    Button btn;
    EditText et;
    Context c;
    AppWidgetManager awm;
    int awID;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.config);

    btn = (Button)findViewById(R.id.btn);
    et = (EditText)findViewById(R.id.et);
    c = ConfigActivity.this;

    //Getting info about the widget that launched this Activity
    Intent i = getIntent();
    Bundle extras = i.getExtras();
    if (extras != null)
    {
        awID = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
    }
    else
    {
        finish();
    }
    awm = AppWidgetManager.getInstance(c);

    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            String newcaption = et.getText().toString();

            RemoteViews views = new RemoteViews(c.getPackageName(), R.layout.widget_layout);
            views.setTextViewText(R.id.btn_widget, newcaption);
            views.setTextColor(R.id.btn_widget, Color.RED);
            awm.updateAppWidget(awID, views);

            Intent result = new Intent();
            result.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, awID);
            setResult(RESULT_OK, result);
            finish();
        }
    });

    }
} 
```

如果我 `android:configure="com.bfarago.tutorials.widget.ConfigActivity"`从 appwidgetprovider xml 中删除该行，我会看到 Toast。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T23:33:04.290

`Activity`您的configure`onClick`调用`updateAppWidget`没有调用`setOnClickPendingIntent`它`RemoteViews`传入，因此一旦它运行，您的小部件将不会有点击事件。将其修复为与您的`onUpdate`方法相同，或者更好的是重构代码，以便只有一个函数创建`RemoteViews`and 调用`updateAppWidget`。

# ios - Objective-C 中的属性

> ID：12870892
> 
> 赞同：2
> 
> 时间：2012-10-13T07:13:43.673
> 
> 标签：ios, objective-c, memory-management, synthesize

```
Line 1: First.h
Line 2: @property (nonatomic, retain) NSString *name;

Line  3: First.m
Line  4: @synthesize name;
Line  5: -(void)viewDidLoad()
Line  6: {
Line  7:     name = [NSString stringWithString:@"Hello"];
Line  8:                          OR
Line  9:     self.name = [[NSString alloc]initWithString:@"Hello"]; 
Line 10:                          OR
Line 11:  }
Line 12:-(void)dealloc()
Line 13: {
Line 14: [name release];
Line 14: } 
```

问题 1：
如果我遵循第 7 行，一切都很好，如果我使用第 9 行，则存在内存泄漏。据我所知， self 指向当前对象，如果我使用`self.object`或根本`object`没有区别。

问题2：如果我使用

```
@synthesize name = _name; 
```

那么哪个是设置name的值，哪个是获取值呢？区别：

```
name = [NSString stringWithString:@"Hello"];
            OR
self.name = [NSString stringWithString:@"Hello"];
            OR
_name = [NSString stringWithString:@"Hello"]; 
```

问题 3：
如果我创建任何属性，是否需要在我分配的内存中分配显示内存泄漏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:18:58.193

回答第**一个问题**：你得到了泄漏，因为用你保留创建的对象的方法初始化字符串，`alloc`但之后你没有释放对象，所以你得到了泄漏，同时用你创建了`stringWithString`一个自动释放的对象由自动释放池自动释放。请注意，在第 9 行的示例中，您正在初始化对象并将其传递给属性的设置器，如果您使用了 ivar ...

要回答您的**第二个问题**：您正在合成属性名称并将其关联到名为的内部变量（ivar）`_name`，因此在您的类内部，您可以使用 ivar 访问属性的值`_name`。

我强烈建议阅读[有关内存管理的 Apple 文档](https://developer.apple.com/library/archive/documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T07:22:47.410

> 问题 1：如果我遵循第 7 行，一切都很好，如果我使用第 9 行，则存在内存泄漏。据我所知， self 指向当前对象，如果我使用 self.object 或只是 object 没有更多区别。

```
Line  7:     name = [NSString stringWithString:@"Hello"];
Line  8:                          OR
Line  9:     self.name = [[NSString alloc]initWithString:@"Hello"]; 
```

在第 7 行，您使用了一个方便的构造函数，它返回一个自动释放的对象并将该对象**直接**分配给您的`name`ivar；现在，可以将一个自动释放的对象分配给一个保留属性，但是将一个自动释放的对象直接分配给一个 ivar 而不显式保留它是不正确的：

```
name = [[NSString stringWithString:@"Hello"] retain]; 
```

在第 9 行，您使用了 alloc/init，它为您提供了一个保留对象：将此类对象直接分配给 ivar 是正确的，但您应该在分配给保留属性之前自动释放它，例如：

```
self.name = [[[NSString alloc]initWithString:@"Hello"] autorelease]; 
```

您可以根据对象保留计数对此进行推理：

1.  便利的构造函数会将保留计数设置为 1，但稍后将`release`通过框架完成的调用自动减少；

2.  alloc/init 将为您提供 1 的保留计数，除非您明确调用，否则不会减少`release`；

3.  当对象保留计数变为 0 时，它将被释放。

保留计数方面的推理只是查看整个内存管理问题并了解框架深处发生了什么的一种方式；不过，在任何情况下，这都不是分析对象生命周期的正确方法。

> 那么哪个用于设置名称的值，哪个用于获取值？`name = [NSString stringWithString:@"Hello"];`OR `self.name = [NSString stringWithString:@"Hello"];`OR之间的区别`_name = [NSString stringWithString:@"Hello"];`

```
name = [NSString stringWithString:@"Hello"]; 
```

和

```
_name = [NSString stringWithString:@"Hello"]; 
```

在给定的两种情况下都是一样的。这将绕过属性 setter(/getter) 方法并直接分配给 ivar。在这种情况下，您的应用程序迟早会崩溃，因为您将自动释放的对象直接分配给 ivar。这是正确的：

```
_name = [[NSString stringWithString:@"Hello"] retain]; 
```

或者

```
_name = [[NSString alloc] initWithString:@"Hello"]; 
```

请注意，在您将 ivar 声明为的程序中`_name`，您不能使用`name`来引用它；**如果您只**声明属性而不像问题 1 那样明确指定ivar，则可以使用`name`直接引用 ivar （在这种情况下，编译器会为您自动生成 ivar）。**`name`**

 **另一方面：

```
self.name = [NSString stringWithString:@"Hello"]; 
```

将使用属性访问器方法（实际上是 setter）；由于您的属性被声明为`retain`，因此可以将便捷构造函数返回的自动释放变量分配给它`stringWithString:`。

> 问题 3：如果我创建任何属性，是否需要在内存中分配，因为我分配显示内存泄漏。

这对我来说不是很清楚。

一份关于内存管理基础的好文档是：[内存管理策略](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)以及Apple 的高级内存管理编程指南中的[实用内存管理](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:02:38.690

首先是一些背景知识，*仅总结***MRC**的概念：

内存管理与*所有权*有关；只要您*拥有*一个对象，它就会存在，在您放弃所有权一段时间后，该对象将被销毁。您维护的对对象的任何*引用*实际上都是无效的，一旦您放弃所有权，就不应使用。

所有权*不是独占*的，而是遵循*共享*模型，在任何给定时间都可以有多个所有者，并且只有当一个对象没有所有者时，它才可以被销毁。

如果您只需要临时使用一个对象，例如在单个代码块中，您并不总是需要获得所有权。这部分是所有权和放弃方式的结果；*您可以请求稍后*放弃所有权，而不是立即放弃所有权。

*稍后*发生在应用程序执行的某些点，除非手动添加任何此类点，否则在通过运行循环的每个循环执行*之后都会有一个这样的点。*

*所有权*是通过`retain`调用或调用返回您拥有的对象的方法来断言的 - 最常见的是`alloc`，但也`copy`有其他的。使用调用*放弃*所有权`release`；并在*稍后*通过调用`autorelease`.

**问题一：**

```
Line  7:     name = [NSString stringWithString:@"Hello"];
Line  8:                          OR
Line  9:     self.name = [[NSString alloc] initWithString:@"Hello"]; 
```

第 7 行的右侧 (RHS) 返回对您**不**拥有的对象的引用。左侧 (LHS) 将此引用分配给*实例变量* `name`。您现在已经存储了对您不拥有的东西的引用，**这很糟糕**，因为将来该对象的所有者可能会放弃所有权，该对象已被销毁，并且您在`name`. 教训：*不要在实例变量中存储对您不拥有的对象的引用”。

另一方面，第 9 行的 RHS 返回对您**拥有**的对象的引用。然而，LHS 使用*属性调用* `self.name`来存储引用，并且由于它是一个属性，它也具有所有权`retain`- 你现在拥有它两次，**这很糟糕**，但如果采用不同的方式；除非您还两次放弃所有权（您可能不会这样做），否则该对象将始终拥有所有者并且将永远存在，通常称为*泄漏*。

如果您交换代码：

```
Line  7a:     name = [[NSString alloc] initWithString:@"Hello"];
Line  8a:                          OR
Line  9b:     self.name = [NSString stringWithString: @"Hello"]; 
```

然后它会做你所期望的。第 7a 行的 RHS 返回您拥有的对象引用，LHS 将其存储在由*属性管理的**实例变量* 中。`name` *`name`*

 *第 9a 行的 RHS 返回一个您不拥有的对象引用，但是 LHS 使用*属性调用*，并且由于属性具有`retain`属性所有权，并且存储在*实例变量* `name`中的引用指向拥有的对象。

在任何一种情况下，当当前实例 ( `self`) 被销毁时，因为属性`name`具有`retain`实例变量引用的任何对象的属性所有权，都`name`将被放弃。

**问题2**

使用有什么影响：

```
@synthesize name = _name; 
```

这只是意味着该*属性* `name`将使用*实例变量* `_name`而不是`name`. 在您的代码片段中，您从不声明`name`，或者`_name`两者都由`@synthesize`;自动声明。所以只有一个`name`或一个`_name`实例变量取决于`@synthesize`. 所以问题 2 的答案就是问题 1 的答案，对实例变量的每个引用都`name`替换为`_name`.

**问题 3**

如果我理解这个问题，但我不确定我是否理解，则问题 1 的答案涵盖了它。

高温高压***

# seo - Google Analytics 流量来源问题，移动流量重定向到 m。地点

> ID：12870896
> 
> 赞同：0
> 
> 时间：2012-10-13T07:14:02.793
> 
> 标签：seo, google-analytics, http-redirect

我的很大一部分流量是移动的。我的服务器通过用户代理上的正则表达式识别此流量，并将 (301) 从 www.mydomain.com 重定向到 m.mydomain.com

我的网站有不同的来源，我想深入了解（广告、Facebook、引荐网站等）

在 Google Analytics 的流量来源报告中，我看到很大一部分访问来自 mydomain.com。该块大小与我的移动流量相似，但略低。

流量来源问题与移动有关是否有意义？

如果是这样：

*   有没有办法克服这个问题并让谷歌分析报告真实的流量来源？

我看到的一个选项是通过让服务器向查询添加虚假参数来伪造 Google 广告系列。这样我就可以使用 Google Analytics 广告相关的报告来跟踪来源。

如果可能的话，我正在寻找更简单的东西。

HTTP 302 会更好吗？

*   为什么流量源块会小于移动块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:24:06.967

看看这个： [http ://www.lanevance.com/web/web-development/tracking-301-redirects-with-google-analytics/](http://www.lanevance.com/web/web-development/tracking-301-redirects-with-google-analytics/)

这适用于谷歌，但也适用于其他跟踪器。

# apache-flex - Adobe Flex i18n 在 Google Chrome 中正常工作，在其他浏览器中不正常

> ID：12870907
> 
> 赞同：1
> 
> 时间：2012-10-13T07:16:00.047
> 
> 标签：apache-flex, internationalization, flex3

我在 Adob​​e Flex [SDK 3.5V, Adob​​e Flash Builder 4] 中开发了一个 i18n 示例程序。我开发的程序是正确的，我在谷歌浏览器中得到了正确的输出。在其他浏览器 [IE、Firefox] 而不是本地语言中，它们显示的是我们无法阅读的框。而谷歌浏览器正在显示本地语言。浏览器和 Flash 播放器是最新版本。

注意：浏览器在设置中配置了本地语言。除了示例 flex 程序 [例如：Google 本地语言站点] 之外，我能够在浏览器 [IE、firefox] 中看到本地语言。

我该如何进一步解决这个问题？

# java - 如何将复选框添加到 JTree 节点以管理多选？

> ID：12870908
> 
> 赞同：8
> 
> 时间：2012-10-13T07:16:16.773
> 
> 标签：java, swing, jtree

我想构建`JTree`具有包含复选框+图标+数据和树选择算法的节点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-13T07:16:16.773

这是演示如何将复选框添加到 Jtree 节点的完整示例。我将 JTree 与基于文件系统内容的节点一起使用。

我还使用`AddCheckBoxToTree.CheckTreeManager`类来管理选择或半选择选项。

利用

```
public AddCheckBoxToTree.CheckTreeManager getCheckTreeManager() {
    return checkTreeManager;
} 
```

玩选择树路径的方法。

例如：

```
// clear all selected path in order 
    TreePath[] paths=getCheckTreeManager().getSelectionModel().getSelectionPaths();
    if(paths != null){
        for(TreePath tp : paths){
            getCheckTreeManager().getSelectionModel().removeSelectionPath(tp);
        }
    } 
```

在这里，我粘贴了所有执行此操作的代码：

```
package com.demo.tree.checkbox;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.event.MouseEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import java.io.File;
import java.util.Vector;

import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.SwingUtilities;
import javax.swing.ToolTipManager;
import javax.swing.UIManager;
import javax.swing.event.TreeExpansionEvent;
import javax.swing.event.TreeExpansionListener;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreeCellRenderer;
import javax.swing.tree.TreePath;
import javax.swing.tree.TreeSelectionModel;

public class FileTreeViewer  extends JFrame {

private static final long serialVersionUID = 1L;
public static final ImageIcon ICON_COMPUTER =  new ImageIcon("");
public static final ImageIcon ICON_DISK =  new ImageIcon("defaults1.png");
public static final ImageIcon ICON_FOLDER =   new ImageIcon("fol_orig.png");
public static final ImageIcon ICON_EXPANDEDFOLDER =  new ImageIcon("folder_open.png");

protected JTree  m_tree;
protected DefaultTreeModel m_model;

AddCheckBoxToTree AddCh = new AddCheckBoxToTree();

private AddCheckBoxToTree.CheckTreeManager checkTreeManager;

protected TreePath m_clickedPath;

public FileTreeViewer()
{
    super("Demo tree check box");
    setSize(400, 300);

    DefaultMutableTreeNode top = new DefaultMutableTreeNode(
            new IconData(ICON_COMPUTER, null, "Computer"));

    DefaultMutableTreeNode node;
    File[] roots = File.listRoots();
    for (int k=0; k<roots.length; k++)
    {
        node = new DefaultMutableTreeNode(new IconData(ICON_DISK, null, new FileNode(roots[k])));
        top.add(node);
        node.add(new DefaultMutableTreeNode( new Boolean(true) ));
    }

    m_model = new DefaultTreeModel(top);

    m_tree = new JTree(m_model){
        public String getToolTipText(MouseEvent ev) 
        {
            if(ev == null)
                return null;
            TreePath path = m_tree.getPathForLocation(ev.getX(), 
                    ev.getY());
            if (path != null)
            {
                FileNode fnode = getFileNode(getTreeNode(path));
                if (fnode==null)
                    return null;
                File f = fnode.getFile();
                return (f==null ? null : f.getPath());
            }
            return null;
        }
    };

    ToolTipManager.sharedInstance().registerComponent(m_tree);

    m_tree.putClientProperty("JTree.lineStyle", "Angled");

    TreeCellRenderer renderer = new IconCellRenderer();
    m_tree.setCellRenderer(renderer);

    m_tree.addTreeExpansionListener(new  DirExpansionListener());

    m_tree.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION); 
    m_tree.setShowsRootHandles(true); 
    m_tree.setEditable(false);

    checkTreeManager = AddCh.new CheckTreeManager(m_tree, null);

    JScrollPane s = new JScrollPane();
    s.getViewport().add(m_tree);
    getContentPane().add(s, BorderLayout.CENTER);

    WindowListener wndCloser = new WindowAdapter(){
        public void windowClosing(WindowEvent e){
            System.exit(0);
        }
    };

    addWindowListener(wndCloser);

    setVisible(true);
}

DefaultMutableTreeNode getTreeNode(TreePath path)
{
    return (DefaultMutableTreeNode)(path.getLastPathComponent());
}

FileNode getFileNode(DefaultMutableTreeNode node)
{
    if (node == null)
        return null;
    Object obj = node.getUserObject();
    if (obj instanceof IconData)
        obj = ((IconData)obj).getObject();
    if (obj instanceof FileNode)
        return (FileNode)obj;
    else
        return null;
}

public AddCheckBoxToTree.CheckTreeManager getCheckTreeManager() {
    return checkTreeManager;
}

// Make sure expansion is threaded and updating the tree model
// only occurs within the event dispatching thread.
class DirExpansionListener implements TreeExpansionListener
{
    public void treeExpanded(TreeExpansionEvent event)
    {
        final DefaultMutableTreeNode node = getTreeNode(
                event.getPath());
        final FileNode fnode = getFileNode(node);

        Thread runner = new Thread() 
        {
            public void run() 
            {
                if (fnode != null && fnode.expand(node)) 
                {
                    Runnable runnable = new Runnable() 
                    {
                        public void run() 
                        {
                            m_model.reload(node);
                        }
                    };
                    SwingUtilities.invokeLater(runnable);
                }
            }
        };
        runner.start();
    }

    public void treeCollapsed(TreeExpansionEvent event) {}
}

public static void main(String argv[]) 
{
    try {
        UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
    } catch (Exception evt) {}
    new FileTreeViewer();
}
}

class IconCellRenderer extends JLabel implements TreeCellRenderer{
protected Color m_textSelectionColor;
protected Color m_textNonSelectionColor;
protected Color m_bkSelectionColor;
protected Color m_bkNonSelectionColor;
protected Color m_borderSelectionColor;

protected boolean m_selected;

public IconCellRenderer()
{
    super();
    m_textSelectionColor = UIManager.getColor(
            "Tree.selectionForeground");
    m_textNonSelectionColor = UIManager.getColor(
            "Tree.textForeground");
    m_bkSelectionColor = UIManager.getColor(
            "Tree.selectionBackground");
    m_bkNonSelectionColor = UIManager.getColor(
            "Tree.textBackground");
    m_borderSelectionColor = UIManager.getColor(
            "Tree.selectionBorderColor");
    setOpaque(false);
}

public Component getTreeCellRendererComponent(JTree tree, 
        Object value, boolean sel, boolean expanded, boolean leaf, 
        int row, boolean hasFocus) 

{
    DefaultMutableTreeNode node = 
            (DefaultMutableTreeNode)value;
    Object obj = node.getUserObject();
    setText(obj.toString());

    if (obj instanceof Boolean)
        setText("Retrieving data...");

    if (obj instanceof IconData)
    {
        IconData idata = (IconData)obj;
        if (expanded)
            setIcon(idata.getExpandedIcon());
        else
            setIcon(idata.getIcon());
    }
    else
        setIcon(null);

    setFont(tree.getFont());
    setForeground(sel ? m_textSelectionColor : 
        m_textNonSelectionColor);
    setBackground(sel ? m_bkSelectionColor : 
        m_bkNonSelectionColor);
    m_selected = sel;
    return this;
}

public void paintComponent(Graphics g) 
{
    Color bColor = getBackground();
    Icon icon = getIcon();

    g.setColor(bColor);
    int offset = 0;
    if(icon != null && getText() != null) 
        offset = (icon.getIconWidth() + getIconTextGap());
    g.fillRect(offset, 0, getWidth() - 1 - offset,
            getHeight() - 1);

    if (m_selected) 
    {
        g.setColor(m_borderSelectionColor);
        g.drawRect(offset, 0, getWidth()-1-offset, getHeight()-1);
    }

    super.paintComponent(g);
}
}

class IconData {
protected Icon   m_icon;
protected Icon   m_expandedIcon;
protected Object m_data;

public IconData(Icon icon, Object data)
{
    m_icon = icon;
    m_expandedIcon = null;
    m_data = data;
}

public IconData(Icon icon, Icon expandedIcon, Object data)
{
    m_icon = icon;
    m_expandedIcon = expandedIcon;
    m_data = data;
}

public Icon getIcon() 
{ 
    return m_icon;
}

public Icon getExpandedIcon() 
{ 
    return m_expandedIcon!=null ? m_expandedIcon : m_icon;
}

public Object getObject() 
{ 
    return m_data;
}

public String toString() 
{ 
    return m_data.toString();
}
}

class FileNode {
protected File m_file;

public FileNode(File file)
{
    m_file = file;
}

public File getFile() 
{ 
    return m_file;
}

public String toString() 
{ 
    return m_file.getName().length() > 0 ? m_file.getName() : 
        m_file.getPath();
}

public boolean expand(DefaultMutableTreeNode parent){
    DefaultMutableTreeNode flag = (DefaultMutableTreeNode)parent.getFirstChild();
    if (flag==null)    // No flag
        return false;
    Object obj = flag.getUserObject();
    if (!(obj instanceof Boolean))
        return false;      // Already expanded

    parent.removeAllChildren();  // Remove Flag

    File[] files = listFiles();
    if (files == null)
        return true;

    Vector<FileNode> v = new Vector<FileNode>();

    for (int k=0; k<files.length; k++){
        File f = files[k];
        if (!(f.isDirectory()))
            continue;

        FileNode newNode = new FileNode(f);

        boolean isAdded = false;
        for (int i=0; i<v.size(); i++)
        {
            FileNode nd = (FileNode)v.elementAt(i);
            if (newNode.compareTo(nd) < 0)
            {
                v.insertElementAt(newNode, i);
                isAdded = true;
                break;
            }
        }
        if (!isAdded)
            v.addElement(newNode);
    }

    for (int i=0; i<v.size(); i++){
        FileNode nd = (FileNode)v.elementAt(i);
        IconData idata = new IconData(FileTreeViewer.ICON_FOLDER, FileTreeViewer.ICON_EXPANDEDFOLDER, nd);
        DefaultMutableTreeNode node = new 
                DefaultMutableTreeNode(idata);
        parent.add(node);

        if (nd.hasSubDirs())
            node.add(new DefaultMutableTreeNode( 
                    new Boolean(true) ));
    }

    return true;
}

public boolean hasSubDirs(){
    File[] files = listFiles();
    if (files == null)
        return false;
    for (int k=0; k<files.length; k++)
    {
        if (files[k].isDirectory())
            return true;
    }
    return false;
}

public int compareTo(FileNode toCompare){ 
    return  m_file.getName().compareToIgnoreCase(
            toCompare.m_file.getName() ); 
}

protected File[] listFiles(){
    if (!m_file.isDirectory())
        return null;
    try
    {
        return m_file.listFiles();
    }
    catch (Exception ex)
    {
        JOptionPane.showMessageDialog(null, "Error reading directory "+m_file.getAbsolutePath(),"Warning", JOptionPane.WARNING_MESSAGE);
        return null;
    }
}
} 
```

到目前为止，一切都很好而且很清楚。现在我要粘贴选择控制器，我们开始：

在这里，我们创建复选框元素以添加到树节点之后

```
package com.demo.tree.checkbox;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.AbstractAction;
import javax.swing.ActionMap;
import javax.swing.ButtonGroup;
import javax.swing.ButtonModel;
import javax.swing.Icon;
import javax.swing.JCheckBox;
import javax.swing.SwingUtilities;
import javax.swing.event.ChangeListener;
import javax.swing.plaf.ActionMapUIResource;

public class TristateCheckBox extends JCheckBox {
static final  long serialVersionUID =0;

/** This is a type-safe enumerated type */
public static class State
{
    private State() {}
}

public final        State NOT_SELECTED = new State();   
public final        State SELECTED     = new State();
public final static State DONT_CARE    = new State();

private final TristateDecorator model;

public TristateCheckBox(String text, Icon icon, State initial){
    super(text, icon);
    // Add a listener for when the mouse is pressed
    super.addMouseListener(new MouseAdapter() {
        public void mousePressed(MouseEvent e) {
            grabFocus();
            model.nextState();
        }
    });

    // Reset the keyboard action map
    ActionMap map = new ActionMapUIResource();
    map.put("pressed", new AbstractAction() {

        private static final long serialVersionUID = 1L;

        public void actionPerformed(ActionEvent e) {
            grabFocus();
            model.nextState();
        }
    });

    map.put("released", null);

    SwingUtilities.replaceUIActionMap(this, map);

    // set the model to the adapted model
    model = new TristateDecorator(getModel());
    setModel(model);
    setState(initial);
}

// Constractor types:
public TristateCheckBox(String text, State initial) {
    this(text, null, initial);
}

public TristateCheckBox(String text) {
    this(text, DONT_CARE);
}

public TristateCheckBox() {
    this(null);
}

/** No one may add mouse listeners, not even Swing! */
public void addMouseListener(MouseListener l) { }
/**
 * Set the new state to either SELECTED, NOT_SELECTED or
 * DONT_CARE.  If state == null, it is treated as DONT_CARE.
 */
public void setState(State state) {
    model.setState(state);
}
/** Return the current state, which is determined by the
 * selection status of the model. */
public State getState() { 
    return model.getState(); 
}

public void setSelected(boolean b) {
    if (b) {
        setState(SELECTED);         
    } else {
        setState(NOT_SELECTED);         
    }
}
/**
 * Exactly which Design Pattern is this?  Is it an Adapter,
 * a Proxy or a Decorator?  In this case, my vote lies with the
 * Decorator, because we are extending functionality and
 * "decorating" the original model with a more powerful model.
 */
private class TristateDecorator implements ButtonModel {
    private final ButtonModel other;
    private TristateDecorator(ButtonModel other) {
        this.other = other;
    }
    private void setState(State state) {
        if (state == NOT_SELECTED) {
            other.setArmed(false);
            setPressed(false);
            setSelected(false);
        } else if (state == SELECTED) {
            other.setArmed(false);
            setPressed(false);
            setSelected(true);
        } else { // either "null" or DONT_CARE
            other.setArmed(true);
            setPressed(true);
            setSelected(false);
        }
    }
    /**
     * The current state is embedded in the selection / armed
     * state of the model.
     *
     * We return the SELECTED state when the checkbox is selected
     * but not armed, DONT_CARE state when the checkbox is
     * selected and armed (grey) and NOT_SELECTED when the
     * checkbox is deselected.
     */
    private State getState() {
        if (isSelected() && !isArmed()) {
            // normal black tick
            return SELECTED;
        } else if (isSelected() && isArmed()) {
            // don't care grey tick
            return DONT_CARE;
        } else {
            // normal deselected
            return NOT_SELECTED;
        }
    }

    /** We rotate between NOT_SELECTED, SELECTED and DONT_CARE.*/
    private void nextState() {
        State current = getState();
        if (current == NOT_SELECTED) {
            setState(SELECTED);
        } else if (current == SELECTED) {
            setState(DONT_CARE);
        } else if (current == DONT_CARE) {
            setState(NOT_SELECTED);
        }
    }

    /** Filter: No one may change the armed status except us. */
    public void setArmed(boolean b) {
    }

    /** We disable focusing on the component when it is not
     * enabled. */
    public void setEnabled(boolean b) {
        setFocusable(b);
        other.setEnabled(b);
    }

    /** All these methods simply delegate to the "other" model
     * that is being decorated. */
    public boolean isArmed()                              {return other.isArmed(); }
    public boolean isSelected()                           {return other.isSelected(); }
    public boolean isEnabled()                            {return other.isEnabled(); }
    public boolean isPressed()                            {return other.isPressed(); }
    public boolean isRollover()                           {return other.isRollover(); }
    public int     getMnemonic()                          {return other.getMnemonic(); }
    public String  getActionCommand()                     {return other.getActionCommand();}
    public Object[]getSelectedObjects()                   {return other.getSelectedObjects();}
    public void    setSelected(boolean b)                 {other.setSelected(b);}
    public void    setPressed(boolean b)                  {other.setPressed(b);}
    public void    setRollover(boolean b)                 {other.setRollover(b);}
    public void    setMnemonic(int key)                   {other.setMnemonic(key);}             
    public void    setActionCommand(String s)             {other.setActionCommand(s);}                      
    public void    setGroup(ButtonGroup group)            {other.setGroup(group);}      
    public void    addActionListener(ActionListener l)    {other.addActionListener(l);}
    public void    removeActionListener(ActionListener l) {other.removeActionListener(l);}      
    public void    addItemListener(ItemListener l)        {other.addItemListener(l);}       
    public void    removeItemListener(ItemListener l)     {other.removeItemListener(l);}    
    public void    addChangeListener(ChangeListener l)    {other.addChangeListener(l);}     
    public void    removeChangeListener(ChangeListener l) {other.removeChangeListener(l);}      

}
} 
```

添加 CheckTreeManager 后：

```
package com.demo.tree.checkbox;

import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import java.util.Stack;

import javax.swing.JCheckBox;
import javax.swing.JPanel;
import javax.swing.JTree;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.tree.DefaultTreeSelectionModel;
import javax.swing.tree.TreeCellRenderer;
import javax.swing.tree.TreeModel;
import javax.swing.tree.TreePath;
import javax.swing.tree.TreeSelectionModel;

public class AddCheckBoxToTree {

public class CheckTreeSelectionModel extends DefaultTreeSelectionModel{ 
    static final  long serialVersionUID =0;
    private TreeModel model; 

    public CheckTreeSelectionModel(TreeModel model){ 
        this.model = model; 

        setSelectionMode(TreeSelectionModel.DISCONTIGUOUS_TREE_SELECTION); 
    }       

    // tests whether there is any unselected node in the subtree of given path (DONT_CARE)
    public boolean isPartiallySelected(TreePath path){
        if(isPathSelected(path, true)){ 
            return false; 
        }

        TreePath[] selectionPaths = getSelectionPaths(); 

        if(selectionPaths==null){
            return false; 
        }

        for(int j = 0; j<selectionPaths.length; j++){ 
            if(isDescendant(selectionPaths[j], path)){
                return true;
            }                    
        } 

        return false; 
    } 

    // tells whether given path is selected. 
    // if dig is true, then a path is assumed to be selected, if 
    // one of its ancestor is selected. 
    public boolean isPathSelected(TreePath path, boolean dig){                      
        if(!dig){
            return super.isPathSelected(path); 
        }

        while(path!=null && !super.isPathSelected(path)){
            path = path.getParentPath(); 
        }

        return path!=null; 
    } 

    // is path1 descendant of path2 
    private boolean isDescendant(TreePath path1, TreePath path2){ 
        Object obj1[] = path1.getPath(); 
        Object obj2[] = path2.getPath(); 
        for(int i = 0; i<obj2.length; i++){ 
            if(obj1[i]!=obj2[i]) 
                return false; 
        } 
        return true; 
    } 

    public void setSelectionPaths(TreePath[] pPaths){ 
        throw new UnsupportedOperationException("not implemented yet!!!"); 
    } 

    public void addSelectionPaths(TreePath[] paths){ 

        // unselect all descendants of paths[] 
        for(int i = 0; i<paths.length; i++)
        { 
            TreePath path = paths[i]; 

            TreePath[] selectionPaths = getSelectionPaths(); 

            if(selectionPaths==null){ 
                break; 
            }

            ArrayList<TreePath> toBeRemoved = new ArrayList<TreePath>(); 

            for(int j = 0; j<selectionPaths.length; j++)
            { 
                if(isDescendant(selectionPaths[j], path))
                {
                    toBeRemoved.add(selectionPaths[j]); 
                }
            } 
            super.removeSelectionPaths((TreePath[])toBeRemoved.toArray(new TreePath[0])); 
        } 

        // if all siblings are selected then unselect them and select parent recursively 
        // otherwize just select that path. 
        for(int i = 0; i<paths.length; i++){ 
            TreePath path = paths[i]; 

            TreePath temp = null; 

            while(areSiblingsSelected(path)){ 
                temp = path; 

                if(path.getParentPath()==null)
                { 
                    break; 
                }

                path = path.getParentPath(); 
            } 

            if(temp!=null){ 
                if(temp.getParentPath()!=null)
                { 
                    addSelectionPath(temp.getParentPath());
                }
                else
                { 
                    if(!isSelectionEmpty())
                    { 
                        removeSelectionPaths(getSelectionPaths()); 
                    }

                    super.addSelectionPaths(new TreePath[]{temp}); 
                }                   
            }
            else 
            {   
                super.addSelectionPaths(new TreePath[]{ path}); 
            }
        } 
    } 

    // tells whether all siblings of given path are selected. 
    private boolean areSiblingsSelected(TreePath path){ 
        TreePath parent = path.getParentPath(); 

        if(parent==null){ 
            return true; 
        }

        Object node = path.getLastPathComponent(); 

        Object parentNode = parent.getLastPathComponent(); 

        int childCount = model.getChildCount(parentNode); 

        Boolean isParameters = false;
        Boolean isDescription = false;

        for(int i = 0; i<childCount; i++){ 

            Object childNode = model.getChild(parentNode, i); 

            if(childNode==node){ 
                continue;
            }

// If last Path component equals to "parameters" or "description" - select second child too. 
            if(childCount == 2)
            {
                if(childNode.toString().equals("parameters") && model.isLeaf(childNode))
                {
                    isParameters = true;
                }
                if(childNode.toString().equals("description") && model.isLeaf(childNode))
                {
                    isDescription = true;
                }
            }

            if(!isPathSelected(parent.pathByAddingChild(childNode)) && !isParameters && !isDescription){ 
                return false; 
            }
        }

        return true; 
    } 

    public void removeSelectionPaths(TreePath[] paths){ 
        for(int i = 0; i<paths.length; i++){ 
            TreePath path = paths[i]; 
            if(path.getPathCount()==1) 
                super.removeSelectionPaths(new TreePath[]{ path}); 
            else 
                toggleRemoveSelection(path); 
        } 
    } 

    /** if any ancestor node of given path is selected then unselect it 
     *  and selection all its descendants except given path and descendants. 
     * otherwise just unselect the given path */
    private void toggleRemoveSelection(TreePath path){ 

        Stack<TreePath> stack = new Stack<TreePath>(); 
        TreePath parent = path.getParentPath(); 

        Boolean isParameters = false;
        Boolean isDescription = false;

        while(parent!=null && !isPathSelected(parent)){ 
            stack.push(parent); 
            parent = parent.getParentPath(); 
        } 
        if(parent!=null) 
            stack.push(parent); 
        else{ 
            super.removeSelectionPaths(new TreePath[]{path}); 
            return; 
        } 

        while(!stack.isEmpty()){ 
            TreePath temp = (TreePath)stack.pop(); 

            TreePath peekPath = stack.isEmpty() ? path : (TreePath)stack.peek(); 

            Object node = temp.getLastPathComponent(); 
            Object peekNode = peekPath.getLastPathComponent(); 
            int childCount = model.getChildCount(node); 

            for(int i = 0; i<childCount; i++){ 
                Object childNode = model.getChild(node, i); 

                if(childNode.toString().equals("parameters") && model.isLeaf(childNode))
                {
                    isParameters = true;
                }
                if(childNode.toString().equals("description")  && model.isLeaf(childNode))
                {
                    isDescription = true;
                }

                if(childNode!=peekNode)
                {
                    if(!isParameters && !isDescription)
                    super.addSelectionPaths(new TreePath[]{temp.pathByAddingChild(childNode)}); 
                }
            } 
        } 

        super.removeSelectionPaths(new TreePath[]{parent}); 
    }

    public TreeModel getModel() {
        return model;
    } 
}

public class CheckTreeCellRenderer extends JPanel implements TreeCellRenderer { 

    static final  long serialVersionUID =0;

    CheckTreeSelectionModel selectionModel; 
    private TreeCellRenderer delegate; 
    TristateCheckBox checkBox = new TristateCheckBox(); 

    public CheckTreeCellRenderer(TreeCellRenderer delegate, CheckTreeSelectionModel selectionModel){ 
        this.delegate = delegate; 
        this.selectionModel = selectionModel; 

        setLayout(new BorderLayout()); 
        setOpaque(false); 
        checkBox.setOpaque(false);      

    } 

    public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus){ 
        Component renderer = delegate.getTreeCellRendererComponent(tree, value, selected, expanded, leaf, row, hasFocus); 

        TreePath path = tree.getPathForRow(row);            

        if(path!=null)
        {                   
            if(selectionModel.isPathSelected(path, true))
            {                   
                checkBox.setState(checkBox.SELECTED);   
                //System.out.println(">>>>>>     selected   " );
            }
            else
            {                       
                checkBox.setState(checkBox.NOT_SELECTED);   
                //System.out.println("not selected   ");
            }

            if(selectionModel.isPartiallySelected(path))
            {
                checkBox.setState(checkBox.DONT_CARE);                  
            }
        } 

        removeAll();        

            add(checkBox, BorderLayout.WEST); 
            add(renderer, BorderLayout.CENTER);     

        return this; 
    }

    public TreeCellRenderer getDelegate() {
        return delegate;
    }

    public void setDelegate(TreeCellRenderer delegate) {
        this.delegate = delegate;
    } 
} 

public class CheckTreeManager extends MouseAdapter implements TreeSelectionListener{ 
    CheckTreeSelectionModel selectionModel; 
    private JTree tree = new JTree(); 

    int hotspot = new JCheckBox().getPreferredSize().width; 

    public CheckTreeManager(JTree tree, CheckTreeSelectionModel checkTreeSelectionModel){ 
        this.tree = tree;           

        if(checkTreeSelectionModel != null)
        {
            //selectionModel = new CheckTreeSelectionModel(tree.getModel()); 
            selectionModel =  checkTreeSelectionModel;

        }
        else
        {
            selectionModel = new CheckTreeSelectionModel(tree.getModel()); 
            //System.out.println(selectionModel.getSelectionPath());
        }

        tree.setCellRenderer(new CheckTreeCellRenderer(tree.getCellRenderer(), selectionModel)); 

        tree.addMouseListener(this); 
        selectionModel.addTreeSelectionListener(this); 
    } 

    public void mouseClicked(MouseEvent me){ 
        //System.out.println("start...");

        TreePath path = tree.getPathForLocation(me.getX(), me.getY()); 
        //System.out.println(Arrays.asList(path));

        if(path==null) 
        {
            //System.out.println("path==null");
            return;     
        }

        if(me.getX()/1.2>tree.getPathBounds(path).x+hotspot)
        {
            //System.out.println("me.getX()/1.2>tree.getPathBounds(path).x+hotspot");
            return; 
        }

        boolean selected = selectionModel.isPathSelected(path, true); 
        selectionModel.removeTreeSelectionListener(this); 

        try{ 
            if(selected) 
            {
                //System.out.println("selected");
                selectionModel.removeSelectionPath(path); 
            }
            else 
            {
                //System.out.println("not selected");
                selectionModel.addSelectionPath(path);
            }
        } 
        finally
        { 
            //System.out.println("finally");
            selectionModel.addTreeSelectionListener(this); 
            tree.treeDidChange(); 
        } 
    } 

    public CheckTreeSelectionModel getSelectionModel(){ 
        return selectionModel; 
    } 

    public void setSelectionModel(CheckTreeSelectionModel selectionModel) {
        this.selectionModel = selectionModel;
    }

    public void valueChanged(TreeSelectionEvent e){ 
        tree.treeDidChange(); 
    }       
}    
} 
```

最无能为力的方法是：

```
boolean com.demo.tree.checkbox.AddCheckBoxToTree.CheckTreeSelectionModel.isPartiallySelected 
```

检查给定路径（DONT_CARE）的子树中是否有任何未选择的节点。

这是我们所做的结果： ![这是我们所做的结果：](../Images/b425300dd327a48fa5e72e038a6e45c5.png)

* * *

此答案基于[Santhosh Kumar 的博客](http://www.jroller.com/santhosh/entry/jtree_with_checkboxes)文章，并进行了一些小修复。

# c - 如何在c中更改线程用户？

> ID：12870916
> 
> 赞同：-1
> 
> 时间：2012-10-13T07:18:54.400
> 
> 标签：c, multithreading, winapi, permissions

我有一个有 2 个线程的程序。我希望第一个线程在 USER_1 的用户权限下运行，第二个在 Windows 的 USER_2 下运行。当我以 USER_1 身份登录时，两个线程都具有 USER_1 权限。如何更改线程的用户！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T07:30:31.837

[您需要使用SetThreadToken()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379590%28v=vs.85%29.aspx)将模拟令牌分配给线程。不过，这可能不是一件容易的事。

# javascript - 如何在WebGl运行时绘制各种大小的各种形状？

> ID：12870918
> 
> 赞同：0
> 
> 时间：2012-10-13T07:19:02.560
> 
> 标签：javascript, opengl-es, webgl

我在[这里](http://learningwebgl.com/blog/?p=239)读书。该`initBuffers`函数用于将我们需要绘制的对象的顶点存储到Buffer中。

```
var triangleVertexPositionBuffer;
var triangleVertexColorBuffer;
function initBuffers() {
    triangleVertexPositionBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, triangleVertexPositionBuffer);
    var vertices = [
         0.0, 1.0, 0.0,
        -1.0, -1.0, 0.0,
         1.0, -1.0, 0.0
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
    triangleVertexPositionBuffer.itemSize = 3;
    triangleVertexPositionBuffer.numItems = 3;

    triangleVertexColorBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, triangleVertexColorBuffer);
    var colors = [
        1.0, 0.0, 0.0, 1.0,
        0.0, 1.0, 0.0, 1.0,
        0.0, 0.0, 1.0, 1.0,
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);
    triangleVertexColorBuffer.itemSize = 4;
    triangleVertexColorBuffer.numItems = 3;
} 
```

现在这是为三角形定义的某种“形状”。现在，如果我想要所有类型和大小的形状，**我必须**`triangleVertexPositionBuffer`为每个形状保留一个缓冲区，对吧？它必须被初始化**吗**？

**每个新形状的新缓冲区对象是必须的吗？**

我计划创建一个系统，可以在运行时使用按钮创建各种形状。那么这个问题有解决方案吗？如何在运行时创建新的缓冲区？是否有一个常见的现有解决方案？

如果我创建一个缓冲区对象数组，它会影响性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:26:43.753

WebGl 不在乎你是否每帧都调用 initBuffers。嗯，性能可能。

由于 javascript 是解释性语言，因此实际上并不存在运行时与编译时的概念。然而，一件先进的事情是，webgl 所需的着色器可以从“文字”字符串生成，在运行时生成，也可以从外部文件和 html 元素生成。

有可用的 webgl 基础设施，例如three.js，但我认为 Javascript 本身就是答案。

编辑：关于您在评论中的其他问题。OpenGL 和 WebGL 基本上按照您所描述的方式工作，但使用矩阵比仅仅为对象提供偏移更灵活。还有“索引缓冲区”，有助于在三角形之间共享顶点。

```
CubeCorners = [0,0,0,   0,0,1,  0,1,0,  0,1,1,  1,0,0,  1,0,1,  1,1,0,  1,1,1 ]; 
// There are 8 corners in a cube
//              0----1  <-- vertices (aka corners, with x=0)
//             /|   /|
//            4-+--5 |
//            | 2--|-3
//            |/   |/
//            6----7 
Triangles = [0,1,2, 1,3,2, 6,4,2, 2,4,0, 5,4,7, 4,6,7,  ... + 6 other triangles ];
//
TransScaleMatrix = [X,0,0,0, 0,Y,0,0, 0,0,Z,0, ox,oy,oz,1];
// scales the object and sets an internal origin (around which object is rotated)
RotMatrix = [rx,ry,rz, 0, ux,uy,yz,0, tx,ty,tz, 0, Ox,Oy,Oz,1];
// aligns the objects orthogonal up,right,toward vectors to r,u,t, (i.e. rotates it)
// and translates it to new origin O.
CameraOrientationMatrix = [  ... ... ];
// sets cameras lookat, up and right vector + position
PerspectiveMatrix = [ ... ...];
// transforms viewing frustums 6 planes left,right,top,bottom,near and far planes
// to unit cube. (objects outside this cube are clipped away) 
```

使用这些数组，通常会渲染一个分层场景，其中顶点和对象被重用。On 不仅可以*将*立方体放置在两个不同的位置，还可以放置到不同的比例和不同的方向。然后，一旦场景在“世界坐标”中建模，将相机放置到某个位置和某个方向，并应用透视矩阵将坐标转换为模拟屏幕坐标 x、y 和深度 z 的“剪辑空间”。

这些矩阵的美妙之处在于可以将它们中的每一个预乘到一个矩阵中来执行所有提到的事情。或者可以将这一操作链拆分为尽可能多的操作，这些操作要么在着色器中动态计算，要么在顶点缓冲区中预先计算。人们应该仔细考虑重用对象的最佳平衡，因为渲染的瓶颈通常是 drawElements/drawArray -calls 和状态更改 (gl.useProgram) 的数量，而不是每个对象的顶点数。

# payment-gateway - 收据 URL 和中继响应 URL 有什么区别

> ID：12870919
> 
> 赞同：2
> 
> 时间：2012-10-13T07:19:16.867
> 
> 标签：payment-gateway, authorize.net

我正在使用 authorize.net SIM 集成。在设置 -> 响应/接收 URL 中，我看到了两个选项接收 URL 和中继响应 URL。您能否告知这两者之间有什么区别以及必须设置这两者的目的是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T14:21:18.837

**中继响应是使用**[服务器集成方法 (SIM)](http://developer.authorize.net/api/sim/)或[简单结账](http://developer.authorize.net/api/simplecheckout/)的商家可用的一项功能。它指示支付网关使用 HTML 表单 POST 到商家 Web 服务器上的指定 URL 将交易结果返回给商家。URL 上的脚本或程序可用于使用交易信息创建自定义收据页面。然后将自定义收据页面转发回客户的浏览器。Relay Response 不会将最终用户重定向回商家的服务器，而是将页面内容中继给最终用户，而不是显示 Authorize.Net 默认收据页面。（[更多来自 Authorize.Net](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Relay-Response-Basics-and-Troubleshooting/ba-p/9536)）

**收据页面**是静态的，不接收来自 Authorize.Net 的 POST 数据。如果您不需要提供自定义信息或希望为事务执行任何数据库操作，那么这是您可以选择的选项。

# html - CSS增加表格单元格的宽度

> ID：12870925
> 
> 赞同：0
> 
> 时间：2012-10-13T07:20:15.620
> 
> 标签：html, css, html-table, width

我想增加表格 td 的宽度。该表在具有指定宽度和高度的 div 内。现在，当我尝试增加 td 的宽度时，它没有显示任何变化。下表给出（HTML 代码）：

```
<div class="Container">
<div class="Content">
    <table>
        <tr>
            <th>ID</th>
            <th class="name">Name</th>
            <th>EMail Address</th>
            <th>Phone no</th>
        </tr>
        <tr>
            <td>1</td>
            <td class="name">Zeb-ur-Rehman</td>
            <td>zeb.1234@yahoo.com</td>
            <td>03415174696</td>
        </tr>
        <tr>
            <td>2</td>
            <td class="name">Zeb-ur-Rehman</td>
            <td>zeb.1234@yahoo.com</td>
            <td>03415174696</td>
        </tr>
        <tr>
            <td>3</td>
            <td class="name">Zeb-ur-Rehman</td>
            <td>zeb.1234@yahoo.com</td>
            <td>03415174696</td>
        </tr>
        <tr>
            <td>4</td>
            <td class="name">Zeb-ur-Rehman</td>
            <td>zeb.1234@yahoo.com</td>
            <td>03415174696</td>
        </tr>
        <tr>
            <td>5</td>
            <td class="name">Zeb-ur-Rehman</td>
            <td>zeb.1234@yahoo.com</td>
            <td>03415174696</td>
        </tr>
    </table>
</div> 
```

​​​

上述 HTML 的 CSS 代码如下

```
.Container
{
    height:100px;
    width:150px;
    overflow-x:scroll;
    overflow-y:scroll;
}

.Content
{

}
table,tr,td,th
{
    border:1px solid black;
    padding:2px;
}

.name
{
    width:30%;
} 
```

**代码的详细理解**：在上面的代码中，在 div **Container**中生成了一个表格，该表格具有特定的宽度（150px）和高度（100px）。溢出属性是滚动，所以有左滚动和右滚动条。现在我想将表格单元格的宽度增加到 30%，但它不应用更改。所以请帮我解决问题。

这是解决问题的小提琴：http: [//jsfiddle.net/SAD9h/2/](http://jsfiddle.net/SAD9h/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T07:31:40.343

我认为您希望该`name`单元格与最长的名称一样宽，所以就这样做

```
.name
{
    white-space: nowrap;
}​ 
```

[jsFiddle在这里](http://jsfiddle.net/RPnbU/)

顺便说一句，你`width: 30%`没有工作，因为你的表包含在`div.Container`一个固定的`width:150px`. 如果您评论您的 .Container，那么 30% 应该也可以。

```
.Container
{
    height:100px;
    /*width:150px;*/
    overflow-x:scroll;
    overflow-y:scroll;
} 
```

# macos - (Mac) -bash: __git_ps1: 找不到命令

> ID：12870928
> 
> 赞同：242
> 
> 时间：2012-10-13T07:20:43.760
> 
> 标签：macos, git, terminal, ps1

我正在尝试在终端中更改我的命令提示符。我不断收到错误：

`-bash: __git_ps1: command not found`

我只是通过在终端中输入它来尝试它：`__git_ps1`. 我也试过了`.bash_profile`

```
if [ -f ~/.git-completion.bash ]; then
  source ~/.git-completion.bash
  export PS1='[\W]$(__git_ps1 "(%s)"): '
fi 
```

正如您可能看到/告诉的那样，是的，我确实安装了自动完成功能，并且效果很好！

我遇到了这个问题：“ [PS1 env variable does not work on mac](https://stackoverflow.com/questions/10435117/ps1-env-variable-does-not-work-on-mac) ”给出了代码

`alias __git_ps1="git branch 2>/dev/null | grep '*' | sed 's/* \(.*\)/(\1)/'"`

所以我将它添加到我`.bash_profile`希望它会改变一些东西。嗯，确实如此。它只是改变了错误输出。

这是`.bash_profile`添加的内容：

```
alias __git_ps1="git branch 2>/dev/null | grep '*' | sed 's/* \(.*\)/(\1)/'"

if [ -f ~/.git-completion.bash ]; then
  source ~/.git-completion.bash
  export PS1='[\W]$(__git_ps1 "(%s)"): '
fi 
```

现在这是更改后的错误输出：

`sed: (%s): No such file or directory`

***注意：***我还将别名移到源下方，没有任何区别。我有*git 版本 1.7.12.1*

这应该是一个简单的改变。有人可以帮帮我吗？

**2012 年 10 月 13 日编辑**

不，我绝对不想自己定义 __git_ps1 ，只是想看看这样做是否会被识别。是的，我已经`.git-completion.bash`安装了文件。这是我如何在我的机器上自动完成。

```
cd ~
curl -OL https://github.com/git/git/raw/master/contrib/completion/git-completion.bash
mv ~/git.completion.bash ~/.git-completion.bash 
```

A`ls -la`然后列出该`.git-completion.bash`文件。

**编辑 10/13/12 - *Mark Longair*解决（下）**

以下代码对我有用，`.bash_profile`而其他代码则没有......

```
if [ -f ~/.git-prompt.sh ]; then
  source ~/.git-prompt.sh
  export PS1='Geoff[\W]$(__git_ps1 "(%s)"): '
fi 
```

* * *

## 回答 #1

> 赞同：353
> 
> 时间：2012-10-13T07:47:19.237

您已经安装了`git-completion.bash`from的版本`master`- 在 git 的开发历史中，这是在将`__git_ps1`函数从完成功能拆分到新文件 ( `git-prompt.sh`) 之后的提交。引入此更改的提交（解释了基本原理）是[af31a456](https://github.com/git/git/commit/af31a456b4cd38f2630ed8e556e23954f806a3cc)。

我仍然建议您只获取与您的 git 安装捆绑在一起的`git-completion.bash`(or ) 版本。`git-prompt.sh`

但是，如果由于某种原因您仍想通过使用从 单独下载的脚本来使用此功能`master`，您应该`git-prompt.sh`类似地下载：

```
curl -o ~/.git-prompt.sh \
    https://raw.githubusercontent.com/git/git/master/contrib/completion/git-prompt.sh 
```

...并将以下行添加到您的`~/.bash_profile`：

```
source ~/.git-prompt.sh 
```

那么`PS1`包含的变量`__git_ps1 '%s'`应该可以正常工作。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-11-26T07:45:36.593

升级到 OSX 10.9 Mavericks 后，我必须参考以下文件才能完成 git shell 命令并让 git 提示符再次工作。

从我的 .bash_profile 或类似的：

```
if [ -f /Applications/Xcode.app/Contents/Developer/usr/share/git-core/git-completion.bash ]; then
    . /Applications/Xcode.app/Contents/Developer/usr/share/git-core/git-completion.bash
fi

source /Applications/Xcode.app/Contents/Developer/usr/share/git-core/git-prompt.sh

#shell prompt example
PS1='\u $(__git_ps1 "(%s)")\$ ' 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2014-08-17T00:10:14.500

你应该

$ brew install bash bash-completion git

然后在 .bashrc 中获取“$(brew --prefix)/etc/bash_completion”。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-05-06T19:00:44.600

以下对我来说就像一个魅力：

在终端中运行以下命令：

```
curl -L https://raw.github.com/git/git/master/contrib/completion/git-prompt.sh > ~/.bash_git 
```

打开/创建 bash_profile：

```
$ vi ~/.bash_profile 
```

在文件中添加以下内容：

```
source ~/.bash_git
export PS1='\[\033[01;32m\]os \[\033[01;34m\]\w $(__git_ps1 "[%s]")\$\[\033[00m\] '
export GIT_PS1_SHOWDIRTYSTATE=1
export GIT_PS1_SHOWUPSTREAM="auto" 
```

最后，使用以下方法获取它：

```
$ source ~/.bash_profile 
```

这将解决`bash: __git_ps1: command not found`.

您的提示也将更改为“os”。要将“os”更改为其他内容，请修改导出 PS1 行中的“os”字符串。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-02-06T07:52:45.267

# MacOS Sierra 和 git 版本 2.10.1 的解决方案 <2017-2-06>

## 第 1 步：安装 Git

### 如果您已经安装了最新的 git，则可以跳过此步骤。

> 从浏览器下载 git 包[https://git-scm.com/download/](https://git-scm.com/download/)

*注意：如果您安装时`curl [option] https://...`选择下载，则必须确保您的系统支持 SSL。所以对于新手来说，从浏览器下载并直接从 git 安装程序安装要容易得多。*

安装验证：

*   显示你的 git 目录在哪里：`which git`
*   显示你的 git 当前是哪个版本：`git --version`当前版本应该是 2.10.1。

## 第 2 步：将您的 git 配置文件添加到您的 shell

1.  打开你的外壳配置文件：
    *   **`nano ~/.bash_profile`**或**`nano ~/.bashrc`**取决于您的修改位置。
2.  将以下代码添加到文件中：
    *   **`source /usr/local/git/contrib/completion/git-completion.bash`**
    *   **`source /usr/local/git/contrib/completion/git-prompt.sh`**

*注意：在 OSX 升级到 El Capitain 后，git 安装位置从 opt/ 目录更改为 usr/local/，这就是为什么上面的一些旧答案在 MacOS Sierra 中不再适用的原因。*

3.  将以下代码添加到您的 PS1 配置中：

    *   选项 1：直接添加到您的 PS1：**`export PS1='\w$(__git_ps1 "(%s)") > '`**

        我更喜欢这种简单的方法，因为我已经知道`.git-completion.bash`我的主目录中存在 ，并且我可以在它的前面添加其他提示格式。这是我个人的提示，供您参考：`export PS1='\t H#\! \u:\w$(__git_ps1 "{%s}") -->> '`
    *   选项 2：添加选择脚本

    ```
    如果 [ -f ~/.git-completion.bash ]; 然后
          导出 PS1='\w$(__git_ps1 "(%s)") > '
    菲
    ```

4.  保存并使用配置文件：`source ~/.bash_profile`或`source ~/.bashrc`

现在您应该看到 git 提示符正常工作，并显示您现在所在的分支。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-03-17T15:58:56.717

带有颜色的 High Sierra 清洁解决方案！

没有下载。没有酿造。没有 Xcode

只需将其添加到您的 ~/.bashrc 或 ~/.bash_profile

```
export CLICOLOR=1
[ -f /Library/Developer/CommandLineTools/usr/share/git-core/git-prompt.sh ] && . /Library/Developer/CommandLineTools/usr/share/git-core/git-prompt.sh
export GIT_PS1_SHOWCOLORHINTS=1
export GIT_PS1_SHOWDIRTYSTATE=1
export GIT_PS1_SHOWUPSTREAM="auto"
PROMPT_COMMAND='__git_ps1 "\h:\W \u" "\\\$ "' 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-04-13T23:28:27.833

升级到优胜美地时我遇到了同样的问题。

我只需要修改`~/.bashrc`为`source /usr/local/etc/bash_completion.d/git-prompt.sh`而不是旧路径。

然后重新获取您的资源`. ~/.bashrc`以获得效果。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-03-06T17:13:47.763

bash 的 __git_ps1 现在在我的 brew 安装的 git 版本 1.8.1.5 的 /usr/local/etc/bash_completion.d 的 git-prompt.sh 中找到

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-11-01T17:28:10.987

这适用于 .bash_profile 中的 OS 10.8

```
if [ -f ~/.git-prompt.sh ]; then
  source ~/.git-prompt.sh
  export PS1='YOURNAME[\W]$(__git_ps1 "(%s)"): '
fi 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-05-14T15:33:48.537

对于 macports，我必须添加：`source /opt/local/share/git-core/git-prompt.sh`到我的 ./profile

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-11-04T19:40:37.597

如果您希望使用 Homebrew 来升级 Git，并且您的系统通常已经过时（就像我所做的那样），您可能需要先将 Homebrew 本身更新（根据[brew update ：以下未跟踪的工作树文件将被合并覆盖：](https://stackoverflow.com/questions/10762859/brew-update-the-following-untracked-working-tree-files-would-be-overwritten-by)感谢@chris-frisina）

**首先使 Homebrew 与当前版本保持一致**

> cd /usr/local
> git fetch origin
> git reset --hard origin/master

**然后更新 Git：**

> 酿造升级 git

*问题解决了！;-)*

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-08-16T14:56:06.173

至少在 Xcode 6 中，您已经拥有`git-completion.bash`. 它在 Xcode 应用程序包中。

只需将其添加到您的 .bashrc 中：

```
source `xcode-select -p`/usr/share/git-core/git-completion.bash 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-05-27T12:55:41.173

1.  从此[Git 完成](https://github.com/git/git/tree/master/contrib/completion)下载文件**git-prompt.sh**和**git- completion.bash**
2.  重命名文件。
3.  将这些文件移动到您的主目录。
4.  将源文件添加到 .bash_profile

    ```
    source ~/git-completion0.bash
    source ~/git-prompt0.sh
    and four to trigger the code block. 
    ```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-08-21T08:30:09.623

我知道这不是一个真正的答案...

我在 .bashrc 中采购 git-prompt.sh 时遇到了一些奇怪的问题，所以我开始寻找其他解决方案。这个：[http](http://www.jqno.nl/post/2012/04/02/howto-display-the-current-git-branch-in-your-prompt/) : //www.jqno.nl/post/2012/04/02/howto-display-the-current-git-branch-in-your-prompt/ 不使用 __git_ps1 并且作者声称它也有效在 Mac 上（现在它在我的 Ubuntu 上完美运行，而且很容易调整）。

我希望它有帮助！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-02-12T13:44:00.247

我正在为 git hub 上 Udacity 的课程，并且遇到了同样的问题。这是我的最终代码，它可以正常工作。

```
# Change command prompt
alias __git_ps1="git branch 2>/dev/null | grep '*' | sed 's/* \ .   (.*\)/(\1)/'"

if [ -f ~/.git-completion.bash ]; then
  source ~/.git-completion.bash
  export PS1='[\W]$(__git_ps1 "(%s)"): '
fi

source ~/.git-prompt.sh
export GIT_PS1_SHOWDIRTYSTATE=1
# '\u' adds the name of the current user to the prompt
# '\$(__git_ps1)' adds git-related stuff
# '\W' adds the name of the current directory
export PS1="$purple\u$green\$(__git_ps1)$blue \W $ $reset" 
```

有用！ [https://i.stack.imgur.com/d0lvb.jpg](https://i.stack.imgur.com/d0lvb.jpg)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-01-24T14:42:33.303

这个对我有用，它有彩色的 git 输出和提示中的指示文件是否已更改/已添加，直接放入其中：

```
GIT_PS1_SHOWDIRTYSTATE=true

. /usr/local/Cellar/git/1.8.5.2/etc/bash_completion.d/git-completion.bash
. /usr/local/Cellar/git/1.8.5.2/etc/bash_completion.d/git-prompt.sh

PS1='\[\033[32m\]\u@\h\[\033[00m\]:\[\033[34m\]\w\[\033[31m\]$(__git_ps1)\[\033[00m\]\$ ' 
```

一定要使用正确的路径！我使用 homebrew 安装 git，用于`brew list git`获取当前安装的路径。

最好不要使用硬编码路径，但不知道如何获取当前安装的路径。

更多信息在这里：[http ://en.newinstance.it/2010/05/23/git-autocompletion-and-enhanced-bash-prompt/](http://en.newinstance.it/2010/05/23/git-autocompletion-and-enhanced-bash-prompt/)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-02-22T08:27:46.467

对于 git，有`/Applications/Xcode.app/Contents/Developer/usr/share/git-core/git-prompt.sh`. 请`/etc/bashrc_Apple_Terminal`也看一下。

所以，我把这些放在`~/.bash_profile`：

```
if [ -f /Applications/Xcode.app/Contents/Developer/usr/share/git-core/git-prompt.sh ]; then
  . /Applications/Xcode.app/Contents/Developer/usr/share/git-core/git-prompt.sh
  export GIT_PS1_SHOWCOLORHINTS=1
  export GIT_PS1_SHOWDIRTYSTATE=1
  PROMPT_COMMAND="${PROMPT_COMMAND:+$PROMPT_COMMAND; }__git_ps1 '\u:\w' '\\\$ '"
fi 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-06-17T08:41:33.483

请注意，如果您还没有通过 Xcode 或 home-brew 安装 git，您可能会发现 haysclarks 引用的 bash 脚本 in `/Library/Developer/CommandLineTools/`，而不是 in `/Applications/Xcode.app/Contents/Developer/`，因此在 .bashrc 中包含以下内容：

```
if [ -f /Library/Developer/CommandLineTools/usr/share/git-core/git-completion.bash ]; then
    . /Library/Developer/CommandLineTools/usr/share/git-core/git-completion.bash
fi

source /Library/Developer/CommandLineTools/usr/share/git-core/git-prompt.sh 
```

如果您也希望使用 git-prompt，您将需要这些行。[1]：[https ://stackoverflow.com/a/20211241/4795986](https://stackoverflow.com/a/20211241/4795986)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-07-01T23:37:44.587

我刚刚在 Mojave 上安装的另一个选项：[magicmonty/bash-git-prompt](https://github.com/magicmonty/bash-git-prompt#installation)

运行 ( `brew update`) 和`brew install bash-git-prompt`或`brew install --HEAD bash-git-prompt`

然后到你的`~/.bash_profile`or `~/.bashrc`：

```
if [ -f "$(brew --prefix)/opt/bash-git-prompt/share/gitprompt.sh" ]; then
  __GIT_PROMPT_DIR=$(brew --prefix)/opt/bash-git-prompt/share
  GIT_PROMPT_ONLY_IN_REPO=1
  source "$(brew --prefix)/opt/bash-git-prompt/share/gitprompt.sh"
fi 
```

我很高兴。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-08-14T09:56:00.377

```
curl -L https://raw.github.com/git/git/master/contrib/completion/git-prompt.sh -o ~/.git-prompt.bash

[[ -f ~/.git-prompt.bash ]]       && . ~/.git-prompt.bash
# Available GIT_PS1 options/env vars

cat ~/.git-prompt.bash | grep GIT_PS1_ | sed -r 's,^\s*#.*,,' | grep -v -E '^$' | sed -r 's,^.*(GIT_PS1_[A-Z_]+).*,\1,' | sort | uniq | sed -r 's,^(.*)$,export \1=,'
export GIT_PS1_COMPRESSSPARSESTATE=
export GIT_PS1_DESCRIBE_STYLE=
export GIT_PS1_HIDE_IF_PWD_IGNORED=
export GIT_PS1_OMITSPARSESTATE=
export GIT_PS1_SHOWCOLORHINTS=
export GIT_PS1_SHOWDIRTYSTATE=
export GIT_PS1_SHOWSTASHSTATE=
export GIT_PS1_SHOWUNTRACKEDFILES=
export GIT_PS1_SHOWUPSTREAM=
export GIT_PS1_STATESEPARATOR=

for i in $(cat ~/.git-prompt.bash | grep GIT_PS1_ | sed -r 's,^\s*#.*,,' | grep -v -E '^$' | sed -r 's,^.*(GIT_PS1_[A-Z_]+).*,\1,' | sort | uniq); do varname=$i; declare -g ${i}=1; done
# P.S Above is just illustration not all config vars are [0/1].

# For more info: 

cat ~/.git-prompt.bash | sed -r -n -e '1,/^[^\s*#]/p' | head -n -2 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-11-20T15:20:06.177

复制/下载以下文件并将它们复制到主目录：`~/`

[git-completion.bash](https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash)

[git-prompt.sh](https://raw.githubusercontent.com/git/git/master/contrib/completion/git-prompt.sh)

对于 bash_profile，在开头添加：

```
source ~/git-completion.bash
source ~/git-prompt.sh
export GIT_PS1_SHOWDIRTYSTATE=1 
```

[如需更多和简单的下载，您可以查看此](https://github.com/MAlhussaini/terminal_coloring)。

# android - 设置自动旋转启用/禁用 Android

> ID：12870933
> 
> 赞同：2
> 
> 时间：2012-10-13T07:21:14.083
> 
> 标签：android, button, android-intent, rotation

我正在开发一个 Android 应用程序，我希望用户能够按下一个按钮来启用或禁用自动旋转。如何使用 Intent 执行此操作？我想我会以某种方式需要将 ACCELEROMETER_ROTATION 更改为 0 或 1，但我不知道如何精确地做到这一点。我希望也许你们中的一个可以帮助我！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T07:27:16.893

您可以使用 ACCELEROMETER_ROTATION 切换旋转开/关：

```
if  (android.provider.Settings.System.getInt(getContentResolver(),Settings.System.ACCELEROMETER_ROTATION, 0) == 1){
    android.provider.Settings.System.putInt(getContentResolver(),Settings.System.ACCELEROMETER_ROTATION, 0);
    Toast.makeText(Rotation.this, "Rotation OFF", Toast.LENGTH_SHORT).show();
    }
else{
    android.provider.Settings.System.putInt(getContentResolver(), Settings.System.ACCELEROMETER_ROTATION, 1);
    Toast.makeText(Rotation.this, "Rotation ON", Toast.LENGTH_SHORT).show();
    } 
```

最后`android.permission.WRITE_SETTINGS`在 Manifast 中添加权限

# ruby - 在单个 Ruby 文件上使用 guard-minitest

> ID：12870935
> 
> 赞同：5
> 
> 时间：2012-10-13T07:21:22.263
> 
> 标签：ruby, testing, guard, minitest

我显然做错了什么。我正在尝试在单个文件中编写和测试纯红宝石。我想让守卫观察文件和测试文件，并在任何文件更改时运行 minitest。

所以，两个文件：game.rb 和 game_test.rb

游戏.rb

```
class Game
end 
```

游戏测试.rb

```
require 'rubygems'
require 'minitest/autorun'
require './game'

class GameTest < MiniTest::Unit::TestCase
  def test_truth
    assert true
  end
end 
```

我也有一个看起来像这样的 Guardfile：

```
notification :terminal_notifier

guard 'minitest', test_folders: '.' do
  watch('game.rb')
  watch('game_test.rb')
end 
```

现在，我可能忘记了一些东西，但我终生无法弄清楚它是什么。

如果我开始守卫并按 Enter 键，则会发生“全部运行”并且测试会运行......至少在大多数情况下。但是，我必须按 Enter 才能发生。

此外，如果我对文件进行更改，则不会发生任何事情。我尝试将 gem 'rb-fsevent' 放在 Gemfile 中并使用“bundle exec guard”运行，但这似乎也无济于事。

任何帮助将非常感激。我要疯了。

谢谢，杰里米

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T19:50:10.233

您的第一个“watch”定义将简单地传递“game.rb”，它不是测试文件，因此不会运行。第二个“watch”是正确的，所以当你保存“game_test.rb”时，测试应该运行。

这应该是一个更正确的 Guardfile：

```
notification :terminal_notifier

guard 'minitest', test_folders: '.' do
  watch('game.rb') { 'game_test.rb' }
  watch('game_test.rb')
end 
```

# ruby - Ruby '未初始化的常量' 错误，即使需要 gem

> ID：12870936
> 
> 赞同：1
> 
> 时间：2012-10-13T07:21:25.413
> 
> 标签：ruby, rubygems, require

我正在尝试在我正在处理的 ruby​​ 项目中使用 Ankusa (https://github.com/livingsocial/ankusa) gem。

我在安装了 ankusa gem 的情况下运行下面的代码，但仍然出现错误：未初始化的常量 Ankusa::MemoryStorage (NameError)

```
require 'rubygems'
require 'ankusa'
require 'ankusa/hbase_storage'

storage = Ankusa::MemoryStorage.new
c = Ankusa::NaiveBayesClassifier.new storage

c.train :spam, "This is some spammy text"
c.train :good, "This is not the bad stuff"

puts c.classify "This is some spammy text"

puts c.classifications "This is some spammy text"

puts c.log_likelihoods "This is some spammy text"

puts c.classnames
storage.close 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:33:03.433

查看`ankusa.rb`gem 文件夹中的内容。它只需要以下内容：

```
require 'ankusa/version'
require 'ankusa/extensions'
require 'ankusa/classifier'
require 'ankusa/naive_bayes'
require 'ankusa/kl_divergence'
require 'ankusa/hasher' 
```

因此，您可能需要明确要求它

```
require 'ankusa/memory_storage' 
```

# c - 打印一个包含空字符的字符串

> ID：12870941
> 
> 赞同：2
> 
> 时间：2012-10-13T07:22:44.307
> 
> 标签：c, string, null-character

我将一个带有空格的字符串作为输入，并将空格替换为 NULL 字符“\0”。当我现在打印字符串时，我只希望第一个 NULL 字符之前的第一个空格之前的部分，但我得到的是原始字符串。

这是代码-

```
#include<stdio.h>

int main(){
    char a[1000];
    int length, i = 0;
    length = 0;
    scanf("%[^\n]s", a); 
    while(a[i]!='\0')
            i++;
    length = i;
    printf("Length:%d\n", length);
    printf("Before:%s\n", a); 
    for(i=0;i<length;i++){
            if(a[i] == " ")
                    a[i] = '\0';
    }   
    printf("After:%s\n", a); 
    return 0;
} 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T07:37:49.950

你的代码是错误的。

```
for(i=0;i<length;i++){
        if(a[i] == " ")
                a[i] = '\0';
} 
```

比较是试图将一个字符与一个指针进行比较（用“”表示->这成为一个指向字符串的指针。在这种情况下，字符串只有一个空格。）这可以通过以下替换来修复

```
for(i=0;i<length;i++){
        if(a[i] == ' ')
                a[i] = '\0';
} 
```

或者最好以这种方式进行，因为除了空格之外，您还可以使用其他空格，例如制表符。（请同时包含 ctype.h）

```
for(i=0;i<length;i++){
           if(isspace(a[i]))
                a[i] = '\0';
} 
```

# php - 如何在用户密码中添加盐？

> ID：12870947
> 
> 赞同：5
> 
> 时间：2012-10-13T07:23:40.697
> 
> 标签：php

我正在使用简单的`md5($password);`格式，但我想添加盐，所以我该怎么做？

这是我的代码：

```
 if($success)
    {
        $data['firstname'] = $firstname;
        $data['lastname'] = $lastname;
        $data['username'] = $username;
        $data['password'] = md5($password);
        $data['email'] = $email;

        $newUser = new User($data);
        $newUser->save(true);
        $Newuser->login($username, $password);
        header("Location: welcome.php");

    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T07:27:30.657

```
$data['hashedpwd'] = md5($salt . $password); 
```

对于每个用户来说，越长、越复杂、越独特，你可以让 salt 越难让任何人获得密码（尽管这并非不可能）。

一个简单的（但很差的盐）将是：`$salt = '10';`
一个更强大的盐将是：`$salt = '-45dfeHK/__yu349@-/klF21-1_\/4JkUP/4';`

用户独有的盐甚至更好。

正如几条评论中提到的，md5 是一种古老且相对较差的散列算法，SHA-512 或任何 SHA-2 系列将是更好的选择。

有关更多详细信息，请参阅[此腌制问题](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T07:42:16.150

其他人已经展示了如何做到这一点，所以关于一般原则......

就像在评论中已经由 NullUserException 链接一样，如果安全很重要，您不应该只通过向 md5 添加静态盐来执行此操作。[但请注意，您可以按原样存储盐](https://stackoverflow.com/questions/1191112/password-hashing-salt-and-storage-of-hashed-values)。静态盐和 md5 都不是非常安全的方法。如果这无关紧要，他们可以，但如果确实如此，你应该走另一条路。

[关于静态盐：](http://crackstation.net/hashing-security.htm)

> 一个常见的错误是在每个哈希中使用相同的盐。盐要么被硬编码到程序中，要么随机生成一次。这是无效的，因为如果两个用户有相同的密码，他们仍然有相同的哈希值。攻击者仍然可以使用反向查找表攻击同时对每个散列进行字典攻击。他们只需要在对密码进行散列之前将盐应用于每个密码猜测。如果盐被硬编码到流行的产品中，可以为该盐构建查找表和彩虹表，以便更容易破解产品生成的哈希。
> 
> 每次用户创建帐户或更改密码时，都必须生成一个新的随机盐。

如果盐是静态的，攻击者可以为所有可能性生成一个彩虹表。使用用户独有的盐，这样做是没有意义的。

md5 是为计算速度而设计的，因此[从根本上说不是要走的路](http://www.f-secure.com/weblog/archives/00002379.html)。另外，已经有很多[预置的彩虹表](http://www.freerainbowtables.com/tables/)，还有很多[在线破解工具](http://www.stottmeister.com/blog/2009/04/14/how-to-crack-md5-passwords/)。

链接的页面也包含[PHP 源代码](http://crackstation.net/hashing-security.htm#phpsourcecode)，作为如何正确完成此操作的示例。

```
<?php
/*
 * Password hashing with PBKDF2.
 * Author: havoc AT defuse.ca
 * www: https://defuse.ca/php-pbkdf2.htm
 */

// These constants may be changed without breaking existing hashes.
define("PBKDF2_HASH_ALGORITHM", "sha256");
define("PBKDF2_ITERATIONS", 1000);
define("PBKDF2_SALT_BYTES", 24);
define("PBKDF2_HASH_BYTES", 24);

define("HASH_SECTIONS", 4);
define("HASH_ALGORITHM_INDEX", 0);
define("HASH_ITERATION_INDEX", 1);
define("HASH_SALT_INDEX", 2);
define("HASH_PBKDF2_INDEX", 3);

function create_hash($password)
{
    // format: algorithm:iterations:salt:hash
    $salt = base64_encode(mcrypt_create_iv(PBKDF2_SALT_BYTES, MCRYPT_DEV_URANDOM));
    return PBKDF2_HASH_ALGORITHM . ":" . PBKDF2_ITERATIONS . ":" .  $salt . ":" . 
        base64_encode(pbkdf2(
            PBKDF2_HASH_ALGORITHM,
            $password,
            $salt,
            PBKDF2_ITERATIONS,
            PBKDF2_HASH_BYTES,
            true
        ));
}

function validate_password($password, $good_hash)
{
    $params = explode(":", $good_hash);
    if(count($params) < HASH_SECTIONS)
       return false; 
    $pbkdf2 = base64_decode($params[HASH_PBKDF2_INDEX]);
    return slow_equals(
        $pbkdf2,
        pbkdf2(
            $params[HASH_ALGORITHM_INDEX],
            $password,
            $params[HASH_SALT_INDEX],
            (int)$params[HASH_ITERATION_INDEX],
            strlen($pbkdf2),
            true
        )
    );
}

// Compares two strings $a and $b in length-constant time.
function slow_equals($a, $b)
{
    $diff = strlen($a) ^ strlen($b);
    for($i = 0; $i < strlen($a) && $i < strlen($b); $i++)
    {
        $diff |= ord($a[$i]) ^ ord($b[$i]);
    }
    return $diff === 0; 
}

/*
 * PBKDF2 key derivation function as defined by RSA's PKCS #5: https://www.ietf.org/rfc/rfc2898.txt
 * $algorithm - The hash algorithm to use. Recommended: SHA256
 * $password - The password.
 * $salt - A salt that is unique to the password.
 * $count - Iteration count. Higher is better, but slower. Recommended: At least 1000.
 * $key_length - The length of the derived key in bytes.
 * $raw_output - If true, the key is returned in raw binary format. Hex encoded otherwise.
 * Returns: A $key_length-byte key derived from the password and salt.
 *
 * Test vectors can be found here: https://www.ietf.org/rfc/rfc6070.txt
 *
 * This implementation of PBKDF2 was originally created by https://defuse.ca
 * With improvements by http://www.variations-of-shadow.com
 */
function pbkdf2($algorithm, $password, $salt, $count, $key_length, $raw_output = false)
{
    $algorithm = strtolower($algorithm);
    if(!in_array($algorithm, hash_algos(), true))
        die('PBKDF2 ERROR: Invalid hash algorithm.');
    if($count <= 0 || $key_length <= 0)
        die('PBKDF2 ERROR: Invalid parameters.');

    $hash_length = strlen(hash($algorithm, "", true));
    $block_count = ceil($key_length / $hash_length);

    $output = "";
    for($i = 1; $i <= $block_count; $i++) {
        // $i encoded as 4 bytes, big endian.
        $last = $salt . pack("N", $i);
        // first iteration
        $last = $xorsum = hash_hmac($algorithm, $last, $password, true);
        // perform the other $count - 1 iterations
        for ($j = 1; $j < $count; $j++) {
            $xorsum ^= ($last = hash_hmac($algorithm, $last, $password, true));
        }
        $output .= $xorsum;
    }

    if($raw_output)
        return substr($output, 0, $key_length);
    else
        return bin2hex(substr($output, 0, $key_length));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T09:04:28.867

PHP 5.5 将带来一个非常易于使用的密码散列 API，目前从 5.3.7 版本开始重新实现，以便立即与 PHP 一起使用。

我可以复制并粘贴解释，但你自己看看：[https ://github.com/ircmaxell/password_compat](https://github.com/ircmaxell/password_compat)

简而言之，它是这样的：

```
/* Create the hash */
$hash = password_hash($password, PASSWORD_BCRYPT, array('cost' => 10));

/* Store the hash... then user comes back */
if (password_verify($password, $hash)) {
    /* Valid */
} else {
    /* Invalid */
}

/*
 * If the security level has to be increased to new $options or a new $algorithm,
 * silent rehashing is supported 
 */
if (password_verify($password, $hash)) {
    if (password_needs_rehash($hash, $algorithm, $options)) {
        $hash = password_hash($password, $algorithm, $options);
        /* Store new hash in db */
    }
} 
```

哈希可能长达 255 个字符（不是 bcrypt，而是接下来可能出现的任何内容），相应地规划存储。数据库应使用 VARCHAR(255)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T07:29:28.840

这是一个示例：（在此处使用您的密码）

```
 $pass = 'abcxyz123'; // password 
    $salt = '}#f4ga~g%7hjg4&j(7mk?/!bj30ab-wi=6^7-$^R9F|GK5J#E6WT;IO[JN'; // random string 

    $hash = md5($pass); 
    $hash_md5 = md5($salt . $pass); 

    // echo now 
    echo 'Original Password: ' . $pass . '<br><br>';
    echo 'Original Salt: ' . $salt . '<br><br>';
    echo 'MD5: ' . $hash . '<br><br>';
    echo 'MD5 with Salt: ' . $hash_md5 . '<br><br>'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-13T07:41:53.327

```
 $salt="Your text vatiable";
 $data[passsord] = md5($salt . $password); 
```

# android - 获取我的安卓应用下载状态

> ID：12870949
> 
> 赞同：2
> 
> 时间：2012-10-13T07:23:58.363
> 
> 标签：android, google-play

我是android开发的新手。最近我使用我的 Google Play Android 开发者控制台上传了一个 android 应用程序，现在我的应用程序在 Google Play 中。

我已经从 Google Play 商店下载了我的应用程序并将其安装在我的手机中。

但是当我在开发者控制台中检查下载静态信息（在开发者控制台中我的应用程序附近找到的信息）时，它指出：

```
0 total user installs
0 active device installs 
```

谁能告诉我为什么会这样？我已经从 Google Play 商店下载并安装了我的应用程序。所以它必须将计数显示为 1。但仍将计数显示为 0。

我在错误的地方检查计数吗？是否有任何其他工具或 Google 地方可以检查和获取我的应用程序下载和安装信息？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T07:35:18.667

不要害怕，延迟计数不是你的错。Google Play 下载统计信息每 24 小时（大约）上传一次。

来自[*Google Play for Developers*](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=139628)：

> 这些统计数据每天在太平洋标准时间上午 12:00 刷新。

不管它怎么说，我发现他们在太平洋标准时间上午 9:00 左右更新更多，尽管差异很大。（有下载统计数据严重延迟的情况，但这通常发生在*每个人*身上，并且控制台上会显示一条通知。）

# iphone - 无法使用 TapGestureRecognizer 突出显示 UIButton

> ID：12870953
> 
> 赞同：2
> 
> 时间：2012-10-13T07:24:38.423
> 
> 标签：iphone, xcode, uibutton

我已经设置了一个点击手势识别器并将识别器添加到 uibutton。该按钮有一个背景图像。当我点击按钮时它根本不会突出显示，我唯一能够让它做的就是改变它的 alpha 值。

```
 UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapGestureCaptured:)];
     singleTap.cancelsTouchesInView = NO;

    [btnNext addGestureRecognizer:singleTap];

- (void)singleTapGestureCaptured:(UITapGestureRecognizer *)gesture
{
UIView *tappedView = [gesture.view hitTest:[gesture locationInView:gesture.view] withEvent:nil];
NSLog(@"Touch event view: %@",[tappedView class]);
UIButton *myButton = (UIButton *) tappedView;
[self highlightButton:myButton];
tappedView.alpha = 0.5f;

} 
```

任何将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:30:45.460

您可以使用手势识别器拦截触摸事件，然后以编程方式将识别器添加到所有 uibuttons。例如：

```
//
//  HighlighterGestureRecognizer.h
//  Copyright 2011 PathwaySP. All rights reserved.
//

#import <Foundation/Foundation.h>

@interface HighlightGestureRecognizer : UIGestureRecognizer {
    id *beganButton;
}

@property(nonatomic, assign) id *beganButton;

@end
and the implementation:

//
//  HighlightGestureRecognizer.m
//  Copyright 2011 PathwaySP. All rights reserved.
//

#import "HighlightGestureRecognizer.h"

@implementation HighlightGestureRecognizer

@synthesize beganButton;

-(id) init{
    if (self = [super init])
    {
        self.cancelsTouchesInView = NO;
    }
    return self;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    self.beganButton = [[[event allTouches] anyObject] view];
    if ([beganButton isKindOfClass: [UIButton class]]) {
        [beganButton setBackgroundImage:[UIImage imageNamed:@"grey_screen"] forState:UIControlStateNormal];
        [self performSelector:@selector(resetImage) withObject:nil afterDelay:0.2];

    }
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
}

- (void)reset
{
}

- (void)ignoreTouch:(UITouch *)touch forEvent:(UIEvent *)event
{
}

- (BOOL)canBePreventedByGestureRecognizer:(UIGestureRecognizer *)preventingGestureRecognizer
{
    return NO;
}

- (BOOL)canPreventGestureRecognizer:(UIGestureRecognizer *)preventedGestureRecognizer
{
    return NO;
}

- (void)resetImage
{
    [beganButton setBackgroundImage: nil forState:UIControlStateNormal];
}

@end 
```

您将手势识别器添加到按钮的方式如下：

```
HighlighterGestureRecognizer * tapHighlighter = [[HighlighterGestureRecognizer alloc] init];

[myButton addGestureRecognizer:tapHighlighter];
[tapHighlighter release]; 
```

所以基本上你是在声明它，初始化它，然后添加它。之后，您需要释放它，因为 addGestureRecognizer 会保留它。

也简单地尝试

`adjustsImageWhenHighlighted = YES`设置在您的按钮上？默认为 YES，但也许你在 xib 中更改了它。这是属性检查器中的“突出显示调整图像”复选框：

![在此处输入图像描述](../Images/6ee77face8614e7b3cec3a9978d198ae.png)

# iphone - 产品名称变更

> ID：12870955
> 
> 赞同：3
> 
> 时间：2012-10-13T07:24:55.613
> 
> 标签：iphone, rename, product

我创建了一个名为“sampleApp”的应用程序。其中，我想更改 xcode 左侧项目导航器窗格中产品类别下的文件“sampleApp.app”的名称。如何做我将此名称更改为“myApp.app”。我不知道如何改变这个。请帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:28:29.013

转到您的目标，然后选择“构建设置”窗格。在那里，查找“产品名称”键并为其分配所需的值。另请参阅此图像：

![在此处输入图像描述](../Images/d8c2a0ac6ad7ffb75aa5d77a4a482c32.png)

您也可以完全重命名您的项目作为替代方案。

# android - 将回调 onListItemClick 上的数据传递给片段

> ID：12870962
> 
> 赞同：1
> 
> 时间：2012-10-13T07:26:13.400
> 
> 标签：android, callback, android-fragments

我正在尝试学习片段，我正在使用在 eclipse 中创建的 Multiform 项目模板。我在传递数据时遇到问题，`onListItemClick.`我已将数据加载到 SQL 数据库中，这是名称和地址的列表。在列表视图中，我列出了名称，我想在单击名称时列出名称和地址`ListView`。也许有更好的方法可以做到这一点，但我只有这个开始。

```
public class CustomerListFragment extends ListFragment {
       private Callbacks mCallbacks = sDummyCallbacks;
public interface Callbacks {

    public void onItemSelected(String id);
}

private static Callbacks sDummyCallbacks = new Callbacks() {
    public void onItemSelected(String id) {
    }
};

 @Override
public void onListItemClick(ListView listView, View view, int position, long id) {
    super.onListItemClick(listView, view, position, id);
    long myLong = values.get(position).getId();  
    mCallbacks.onItemSelected(String.valueOf(myLong));
} 
```

在详细信息片段中，我有以下内容。即使我从数据中传递 Id，ARG_ITEM_ID 也始终具有组件的 id 值。

```
public class CustomerDetailFragment extends Fragment {

public static final String ARG_ITEM_ID = "_id";
DataSource cusdatasource;
sqlCustomer selectedCustomer;

 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    datasource = new DataSource(getActivity());
    datasource.open();

    if (getArguments().containsKey(ARG_ITEM_ID)) {
       mItem = DummyContent.ITEM_MAP.get(getArguments().getString(ARG_ITEM_ID));
    }
    selectedCustomer = datasource.getCustomer("here I need the _id from the list item clicked");

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.test_detail_customer, container, false);
    if (selectedCustomer != null) {
        ((TextView) rootView.findViewById(R.id.editText1)).setText(selectedCustomer.getName());
        ((TextView) rootView.findViewById(R.id.editText2)).setText(selectedCustomer.getStreet());
        ((TextView) rootView.findViewById(R.id.editText3)).setText(selectedCustomer.getCitySZ());
    }
    return rootView;
} 
```

在主要活动中，我有这个：

```
 public void onItemSelected(String id) {
        Bundle arguments = new Bundle();
        arguments.putString(CustomerDetailFragment.ARG_ITEM_ID, id);
        CustomerDetailFragment fragment = new CustomerDetailFragment();
        fragment.setArguments(arguments);
        getSupportFragmentManager().beginTransaction()
                .replace(R.id.customer_detail_container, fragment)
                .commit();
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T11:23:40.063

如果你试图通过接口将该`myLong`值传递给你，那你就做得不对。该回调的想法是让某人实现它并将自己注册为侦听器，因此当用户单击该实现被调用的列表项时（而不仅仅是一个不会做任何事情的空实现）。您可以将片段之间的通信留给显示要管理的片段的活动。例如：`Callbacks``DetailsFragment`

```
public class CustomerListFragment extends ListFragment {
       private Callbacks mCallbacks;

public interface Callbacks {

    public void onItemSelected(String id);
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    try {
            mCallbacks = (Callbacks) activity;
    } catch (ClassCastException ex) {
        Log.e(TAG, "Casting the activity as a Callbacks listener failed"
                + ex);
        mCallbacks = null;
    }
}

@Override
public void onListItemClick(ListView listView, View view, int position, long id) {
    long myLong = values.get(position).getId();  
    if (mCallbacks != null) {
        mCallbacks.onItemSelected(myLong);
    }
}
// ... 
```

然后在包含两个片段的活动中：

```
public class MainActivity extends FragmentActivity implements CustomerListFragment.Callbacks {

// ...

public void onItemSelected(Long id) {
    Bundle arguments = new Bundle();
    arguments.putLong(CustomerDetailFragment.ARG_ITEM_ID, id);
    CustomerDetailFragment fragment = new CustomerDetailFragment();
    fragment.setArguments(arguments);
    getSupportFragmentManager().beginTransaction()
            .replace(R.id.customer_detail_container, fragment)
            .commit();
}

//... 
```

然后从传递给的参数中检索 id `CustomerDetailFragment`：

```
long theId = -1;
if (getArguments().containsKey(ARG_ITEM_ID)) {
      theId = getArguments().getLong(ARG_ITEM_ID));
}
selectedCustomer = datasource.getCustomer(theId); 
```

# java - 浮点数的arraylist的arraylist的Java初始值

> ID：12870968
> 
> 赞同：0
> 
> 时间：2012-10-13T07:26:54.880
> 
> 标签：java, arraylist

鉴于以下代码

```
ArrayList<ArrayList<Float>> fWordTagProb = new ArrayList<ArrayList<Float>>();
for(int f=0;f<pennTreeTags.size();f++)
    fWordTagProb.add(new ArrayList<Float>()); 
```

这个二维数组中每个“单元”的初始值是多少？是零吗？

因此对于 Integer 类型是否相同？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T07:29:39.890

的每个元素`fWordTagProb`都是空的`ArrayList`。从逻辑上讲，空列表中还没有任何内容。

如果您使用`Integer`而不是`Float`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T07:28:58.263

单元格是装箱的浮点数，引用类型也是如此。引用类型`null`的默认值为 ，每个单元格的默认值也是如此。

我应该补充一点，子 ArrayLists 是空的，因此实际上根本没有任何单元格。如果子列表被初始化为所需的大小，那么单元格确实会是`null`.

# ruby-on-rails - 无法获取 ImageMagick 版本 *** extconf.rb 失败 ***

> ID：12870971
> 
> 赞同：2
> 
> 时间：2012-10-13T07:27:24.427
> 
> 标签：ruby-on-rails, imagemagick, rmagick

我已经用谷歌搜索了几次这个错误，并获得了从他们的网站安装 rMagick win-32 的说明。然而，win32 版本看起来已经过时了，并且是为 Ruby 1.8.6 制作的，因为我有 1.9.3。

有人可以帮我安装这个宝石吗？我真的不能为此在我的 PC 上安装 imageMagick，因为代码将在接下来的几周内多次移动到其他 PC 等上（学校作业，你知道我是怎么做的）。并且看起来 imageMagick 可以与这个 gem 一起安装（在我的情况下这是迄今为止最好的选择）。尽管如此，我无法弄清楚这个错误，因为在这些事情上我是一个相当大的 n00b。

```
 C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb
    checking for Ruby version >= 1.8.5... yes
    Ongeldige stationsspecificatie.
    Unable to get ImageMagick version
    *** extconf.rb failed ***
    Could not create Makefile due to some reason, probably lack of
    necessary libraries and/or headers.  Check the mkmf.log file for more
    details.  You may need configuration options.

    Provided configuration options:
            --with-opt-dir
            --without-opt-dir
            --with-opt-include
            --without-opt-include=${opt-dir}/include
            --with-opt-lib
            --without-opt-lib=${opt-dir}/lib
            --with-make-prog
            --without-make-prog
            --srcdir=.
            --curdir
            --ruby=C:/RailsInstaller/Ruby1.9.3/bin/ruby

    Gem files will remain installed in C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9
    .1/gems/rmagick-2.13.1 for inspection.
    Results logged to C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rmagick-2
    .13.1/ext/RMagick/gem_make.out
    An error occured while installing rmagick (2.13.1), and Bundler cannot continue.

    Make sure that `gem install rmagick -v '2.13.1'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T14:45:27.407

在这里，我遇到了同样的问题。搜索后，我从这里找到了解决方案

[http://www.waydotnet.com/2010/02/12/rmagick-on-ruby-1-9-1-i386-mingw32-work-d/](http://www.waydotnet.com/2010/02/12/rmagick-on-ruby-1-9-1-i386-mingw32-work-d/)

[http://phosphor-escence.blogspot.in/2010/12/if-you-fail-install-rmagick-on-mingw.html](http://phosphor-escence.blogspot.in/2010/12/if-you-fail-install-rmagick-on-mingw.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-22T18:39:02.480

您需要安装开发包：

```
sudo apt-get install libmagick++-dev 
```

希望这可以帮助 ：）

# ruby-on-rails - 从 child::method 调用 parent::method

> ID：12870973
> 
> 赞同：2
> 
> 时间：2012-10-13T07:27:37.407
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

美好的一天，我是红宝石的新手。我想知道如何从子类的方法运行父方法？在java中它会像

```
class Child
  ..
  def something_else
    super.something
  end
end 
```

并在 php

```
parent::method_name(); 
```

你能告诉我如何在 Ruby 中做到这一点吗？只发现了这个，使用**alias_method_chain有点难看**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:50:55.803

正如**Taiki**在另一个帖子中建议的评论所说

```
class B < A

  alias :super_a :a

  def a
    b()
  end
  def b
    super_a()
  end
end 
```

希望还有其他方法...

**更新：**

最后，调用 super() 而不是 super_a()。虽然不知道它完全做什么

# kernel - 如何知道Linux内核中CPU访问的物理内存地址？

> ID：12870975
> 
> 赞同：2
> 
> 时间：2012-10-13T07:27:58.880
> 
> 标签：kernel, qemu, mmu

我正在尝试通过 Linux 中的一些基准应用程序跟踪内存访问模式。最终，我想知道内核（或用户）空间中的 CPU 访问的物理内存地址。

有没有一种简单的方法可以在不修改内核源代码的情况下获得它？我希望可以在我的内核模块中挂钩一些 MMU 例程，然后将虚拟地址转换为物理地址，并将物理地址写入内核日志或类似的东西。这可能吗？

使用像 Qemu 这样的模拟器会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:50:14.250

是的，去 QEMU，它最适合你的要求。您必须调整 QEMU 代码才能将虚拟地址转换为物理地址。唯一的问题是 QEMU 是出于研究目的，因此您可能无法像真实系统那样获得准确的映射行为。但是，它仍然会在一定程度上实现您的目的。

# c# - 如何在水晶报表的组页脚中获取组记录的持续时间总和？

> ID：12870985
> 
> 赞同：0
> 
> 时间：2012-10-13T07:29:19.173
> 
> 标签：c#, asp.net, crystal-reports, grouping, crystal-reports-2008

我正在设计具有持续时间的列的水晶报表。

我有诸如 Empcode、名称、持续时间、备注等列。

我正在根据 empcode 对报告进行分组。

我想在组页脚中显示持续时间的总和。

我有两个公式...

1.  @get_seconds：

    ```
     local stringvar array completetime;
        local numbervar totalseconds;
        completetime:=split({DailyAttendance.TotalDuration},":");
        totalseconds:= (3600*cdbl(completetime[1])) + (60*cdbl(completetime[2])); 
    ```

2.  @total_duration ：

    ```
     replace(cstr(Sum ({@get_seconds})\3600),".00","") 
       + ":" +  replace(cstr((Sum ({@get_seconds}) mod 3600)/60),".00","") 
    ```

我在组页脚中显示@total_duration，但我得到报告中所有记录的总和，而不是仅组中的记录总和。有人可以告诉我如何实现这一目标吗？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:05:16.620

得到了我的解决方案，我刚刚将我的公式更新为：

@total_duration ：

replace(cstr(Sum({@get_seconds}, {DailyAttendance.EmpCode})\3600),".00","") + " Hrs " + replace(cstr((Sum ({@get_seconds}, {DailyAttendance.EmpCode) }) mod 3600)/60),".00","") + "分钟"

谢谢..

# c# - 从二进制文件中随机读取结构

> ID：12870991
> 
> 赞同：2
> 
> 时间：2012-10-13T07:29:49.727
> 
> 标签：c#, file, random, struct, binary

大家好，

我有以下结构：

```
public struct IncomeTax
{
    public string name, category;
    public int income;
} 
```

我正在写一个不。使用以下代码将二进制格式的此类结构（记录）转换为文本文件：

```
FileStream fs = new FileStream(Application.StartupPath + "\\Hello.txt", FileMode.Append, FileAccess.Write);

BinaryWriter bw = new BinaryWriter(fs);
bw.Write(it.name);
bw.Write(it.category);
bw.Write(it.income);
bw.close(); 

fs.close(); 
```

现在，我想从这个文件中随机读取记录，比如说我想直接去第三条记录。我知道这可以使用`BinaryReader`&来完成`FileStream.Seek`。但我不知道如何使用`FileStream.Seek`直接转到任何记录。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T07:35:14.040

你不能，用你所拥有的结构——记录可以是任何大小。为了寻找任意记录，您*要么*需要具有固定大小的记录（这意味着对您的`name`和`category`字符串的大小有一些限制，然后如果记录小于该限制，则用空白空间填充记录)*或者*你需要建立一个单独的索引，它基本上是固定大小的记录，说“记录 X 从位置 Y 开始”。

请注意，后一种方法使*编辑*记录变得棘手，因为除非新版本与旧版本的大小完全相同，否则您要么需要将其保留在原位，但在记录末尾“浪费”一些空间，要么创建一个文件末尾的新记录。

**或者**您可以只使用数据库，这几乎肯定是一个更好的主意。有多种形式的“嵌入式”数据库，这意味着您不需要客户端-服务器配置，只需一两个文件用于数据库内容。

# ruby - Rails 中的声明式事务管理

> ID：12870992
> 
> 赞同：0
> 
> 时间：2012-10-13T07:30:17.800
> 
> 标签：ruby

我是 Ruby 和 Rails 的新手。我想在 Rails 中使用像 Java 的 @Transactional 注释这样的**声明式事务管理。**

有谁知道如何在 Rails 中使用“声明式事务管理”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:28:09.473

ruby 中没有像注解这样的东西，但是您可以使用元编程为自己构建类似的东西。请记住，private、protected 和 public 也只是方法而不是关键字。你可以建立自己类似的东西

```
transactional
def my_transactional_method
  puts "some stuff happens here"
end 
```

也许这个宝石[https://github.com/fredwu/ruby_decorators](https://github.com/fredwu/ruby_decorators)可以帮助你。甚至更好的[https://github.com/michaelfairley/method_decorators](https://github.com/michaelfairley/method_decorators)，还有一个实现交易装饰器的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T08:58:44.007

我不是来自 java 背景，但我阅读了有关 **声明式事务管理**的内容。在rails中，我们有

```
ActiveRecord::Base.transaction do
  #do some model operation
  #do some model operation
end 
```

这里只有当两个操作都成功时，才会执行对数据库的提交，如果其中一个操作失败，则不会将任何操作提交到数据库。

# html - 如何在css中显示一个显示超额完成（100％以上）的进度条？

> ID：12870993
> 
> 赞同：3
> 
> 时间：2012-10-13T07:30:17.373
> 
> 标签：html, css

我正在尝试显示一个进度条，该进度条以不同的颜色显示超过 100% 的百分比，以表明发生了超额成就。这如何在 HTML/CSS 中完成？

以下适用于将显示百分比高达 100% 的进度条

```
<div id="progressbar">
  <div></div>
</div>

#progressbar {
  background-color: black;
  border-radius: 13px; /* (height of inner div) / 2 + padding */
  padding: 3px;
}

#progressbar div {
   background-color: orange;
   width: 40%; /* Adjust with JavaScript */
   height: 20px;
   border-radius: 10px;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:48:02.233

纯 CSS 进度条——[小提琴](http://jsfiddle.net/saf8Q/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T07:40:04.137

[http://jsfiddle.net/qTmGE/1/](http://jsfiddle.net/qTmGE/1/)

请原谅我对 jQuery 的使用。

# eclipse - 什么可能导致 glutMainLoop() 不调用传递给 glutDisplayFunc() 的函数？

> ID：12870994
> 
> 赞同：1
> 
> 时间：2012-10-13T07:30:29.593
> 
> 标签：eclipse, opengl, mingw, glut, glew

试图启动并运行一个非常简单的 opengl/glut/glew 程序。当前未`display()`调用传递给的函数`glutDisplayFunc()`。执行时，`init()`设置所有内容并给我一个空白的白色窗口，但显示永远不会用生成的点填充它。这是`init()`在进入之前调用的函数`glutMainLoop()`：

```
void init()
{

    //generate points
    const int NumPoints = 5000;
    point3 points[NumPoints];

    point3 vertices[3] = {point3(-1.0, -1.0, 0.0),
                          point3(0.0, 1.0, 0.0),
                          point3(1.0, -1.0, 0.0)};

    points[0] = point3(0.25, 0.5, 0.0);

    for(int k = 1; k < NumPoints; k++)
    {
        int j = rand() % 3;
        points[k] = (points[k-1]+vertices[j])/2.0;
    }

    //load shaders and use the resulting shader program
    GLuint program = InitShader("shaders/vshader.glsl", "shaders/fshader.glsl");

    GLint linked;
    glGetProgramiv( program, GL_LINK_STATUS, &linked );
    if( !linked ){
        std::cerr << "Shader program failed to link" << std::endl;
        GLint logSize;
        glGetProgramiv( program, GL_INFO_LOG_LENGTH, &logSize);
        char *logMsg = new char[logSize];
        glGetProgramInfoLog( program, logSize, NULL, logMsg);
        std::cerr << logMsg << std::endl;
        delete [] logMsg;

        exit( EXIT_FAILURE );
    }

    glUseProgram( program );

    //create Vertex-Array object
    GLuint aBuffer;

    glGenVertexArrays(1, &aBuffer);
    glBindVertexArray((GLuint)&aBuffer);

    //create Buffer object
    GLuint buffer;

    //glGenBuffers(1, &buffer);
    glGenBuffers(1, &buffer);
    glBindBuffer(GL_ARRAY_BUFFER, buffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(points),
                 points, GL_STATIC_DRAW);

    //initialize the vertex position attribute from the vertex shader
    GLuint loc = glGetAttribLocation( program, "vPosition");
    glEnableVertexAttribArray( loc );
    glVertexAttribPointer( loc, 3, GL_FLOAT, GL_FALSE, 0, 0);

    glClearColor( 1.0, 1.0, 1.0, 1.0);  // white background

} 
```

这里是`main()`和`display()`功能：

```
void display()
{
    fprintf(stderr, "display called!\n");
    glClear(GL_COLOR_BUFFER_BIT);
    glDrawArrays(GL_POINTS, 0, 5000);
    glFlush();
}

int main(int argc, char **argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA);
    glutInitWindowSize(500, 500);
    glutInitWindowPosition(100, 100);
    glutDisplayFunc(display);
    glutCreateWindow("Program 1");
    glewInit();

    init();

    glutMainLoop();
    return 0;
} 
```

将 Eclipse CDT C/C++ 与 MinGW 一起使用。调试表明 glutMainLoop 确实被调用了，但我无法超越它。会不会是着色器问题？据报道，他们正在编译和链接良好，但他们在这里

```
vshader.glsl

#version 150

in vec4 vPosition;

void main() {
    gl_Position = vPosition;
} 
```

.

```
fshader.glsl

#version 150

out vec4 fColor;

void main() {
    fColor = vec4(1.0, 0.0, 0.0, 1.0);
} 
```

编辑：着色器绝对有效。通过插入`glutIdleFunc(display);`，`main()`程序正确执行并绘制所有预期点。所以就像我最初想的那样，出于某种原因`glutMainLoop()`只是不想调用传递给的函数`glutDisplayFunc()`？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T09:59:33.933

GLUT 可以创建多个窗口。glutDisplayFunc 对当前活动窗口进行操作，因此您必须在 glut...Func 函数之前调用 glutCreateWindow。

# asp.net-mvc - 在 Azure 上使用 LocalDb MDF 文件

> ID：12870996
> 
> 赞同：45
> 
> 时间：2012-10-13T07:30:31.620
> 
> 标签：asp.net-mvc, azure, azure-web-app-service

我正在开发一个 ASP.NET MVC 网站，我想将其托管在 Azure 网站上。在开发过程中，我一直在 App_Data 目录中使用 MDF 文件，其连接字符串如下所示：

```
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=MyApp;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\MyApp.mdf;MultipleActiveResultSets=true" providerName="System.Data.SqlClient"  /> 
```

为了在 Azure 上试用它，我希望我可以保留这个连接字符串，然后简单地将我的 MyApp.mdf FTP 到 Azure 上的 App_Data 文件夹中，因为它都设置了我想要使用的示例数据。但是，当我尝试访问我的网站时，遇到了以下错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：52 - 无法找到 LocalDB 安装。验证 SQL Server Express 是否已正确安装并且 LocalDB 功能是否已启用。）

我的问题是，有没有办法让我的 Azure 网站连接到 App_Data 文件夹中的 MDF 文件，或者我是否被迫使用 Azure SQL 数据库？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-14T17:07:53.937

您不能在 App_Data 中使用 .mdf 文件，但您不必强制使用 SQL Azure——您可以使用 SQL Server Compact。如果您使用 Code First 迁移，从 LocalDB 部署到 Compact 很容易；否则，您必须在部署之前迁移到 SQL Server Compact。如果您决定使用 Compact，则必须确保已部署数据库引擎，您可以在本教程中找到相关说明：

[http://www.asp.net/mvc/tutorials/deployment/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of- 12](http://www.asp.net/mvc/tutorials/deployment/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T00:39:37.520

您必须使用 SQL Azure 才能使用网站/云服务功能。

如果您还没有，您可能想看看使用 web deploy 进行的 web.config 转换，以简化发布体验。

[http://msdn.microsoft.com/en-us/library/dd465318(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd465318(v=vs.100).aspx)

[http://www.hanselman.com/blog/TinyHappyFeatures3PublishingImprovementsChainedConfigTransformsAndDeployingASPNETAppsFromTheCommandLine.aspx](http://www.hanselman.com/blog/TinyHappyFeatures3PublishingImprovementsChainedConfigTransformsAndDeployingASPNETAppsFromTheCommandLine.aspx)

您可以通过管理工具将数据导入 SQL Azure DB，或者如果您使用 SQL Server 2012，您可以通过门户导入/导出数据。

# sql - 使用其他表中的数据更新第一个表中的列中的总和

> ID：12870998
> 
> 赞同：2
> 
> 时间：2012-10-13T07:30:41.713
> 
> 标签：sql, db2

我有如下表1：

```
Col1    Bal
-------------------
 1       0
 2       0
 3       0
 4       0 
```

Col1 是这里的关键。

我有如下表2：

```
Col1    Bal    Date
---------------------
 1       5      x
 1       10     y
 1       7      z
 3       8      p
 3       9      m 
```

Col1 是两个表中的连接列。

我想用第二个表中的 bal 总和来更新第一个表中的 bal。

这将是什么 sql 语句：

```
update table1 a set a.bal=(select sum(b.bal) from table2) where 
```

我迷路了！

更新后，table1 应该是：

```
Col1    Bal
-------------------
 1       22
 2       0
 3       17
 4       0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:33:00.810

从[文档](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/r0001022.htm)看来，您可以在 DB2 中使用表别名：

```
update  table1 a 
set     bal = coalesce(
        (
        select  sum(b.bal) 
        from    table2 as b
        where   a.col1 = b.col1
        ), 0) 
```