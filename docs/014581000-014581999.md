# StackOverflow 问答 14581000-14581999

# ios - 增加串容量

> ID：14581002
> 
> 赞同：1
> 
> 时间：2013-01-29T10:40:59.807
> 
> 标签：ios, cocoa, nsstring, capacity

如果容量超过 35000 字节 NSString 显示空值，则解析 url 时出现字符串容量问题。谁能帮我解决这个问题。有没有办法增加字符串容量？

```
NSURL *url = [[NSURL alloc] initWithString:entrytab.articleUrl];
          NSLog(@"ENtry url:%@",url);
NSData *data = [[NSData alloc] initWithContentsOfURL:url]; 
NSString *html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
NSLog(@"ENtry html%@",html); 
```

# mysql - 如何在 MySQL 中按地区对美国各州进行分组？

> ID：14581006
> 
> 赞同：0
> 
> 时间：2013-01-29T10:41:11.863
> 
> 标签：mysql

我有一个美国分销商销售的 MySQL 表。它包含每个位置（包括州）的邮寄地址。我被要求制作一份报告，其中将按地区列出分销商，例如太平洋、山区、中西部、中东北部、中大西洋、新英格兰、中西部、中南部、南大西洋和 AK & HI 为 AK_HI。

报告需要如下所示：

```
Region        State Average_Sales_by_state number_of_distributors
------        ----- ---------------------- ----------------------
Pacific       WA    $1234                  10
              OR    $4321                  20
              CA    $9876                  40
New England   ME    $1212                  15
              MA    $2222                  12
... 
```

我如何在 MySQL 中处理这个问题，以便当我执行查询以生成报告时，它会以一种优雅的方式组合在一起？此外，它需要按 Average_Sales_by_state 列的降序排序（我在上面的示例中没有这样做）。

我在想我应该创建一个名为 US_Regions 的新 MySQL 表，它会有一个带有区域和州的记录布局，并且每个州会有一行。如果我走那条路，生成上述报告的查询会是什么样子？谢谢！

这是 MySQL US_Regions 表：

```
+----+--------------------+-------+
| id | Region             | State |
+----+--------------------+-------+
|  1 | Pacific            | WA    |
|  2 | Pacific            | OR    |
|  3 | Pacific            | CA    |
|  4 | Mountain           | MT    |
|  5 | Mountain           | ID    |
|  6 | Mountain           | WY    |
|  7 | Mountain           | NV    |
|  8 | Mountain           | UT    |
|  9 | Mountain           | CO    |
| 10 | Mountain           | AZ    |
| 11 | Mountain           | NM    |
| 12 | West North Central | ND    |
| 13 | West North Central | MN    |
| 14 | West North Central | SD    |
| 15 | West North Central | NE    |
| 16 | West North Central | IA    |
| 17 | West North Central | KS    |
| 18 | West North Central | MO    |
| 19 | East North Central | WI    |
| 20 | East North Central | IL    |
| 21 | East North Central | MI    |
| 22 | East North Central | IN    |
| 23 | East North Central | OH    |
| 24 | Middle Atlantic    | PA    |
| 25 | Middle Atlantic    | NY    |
| 26 | Middle Atlantic    | CT    |
| 27 | Middle Atlantic    | NJ    |
| 28 | New England        | NH    |
| 29 | New England        | VT    |
| 30 | New England        | ME    |
| 31 | New England        | MA    |
| 32 | New England        | RI    |
| 33 | West South Central | OK    |
| 34 | West South Central | AR    |
| 35 | West South Central | TX    |
| 36 | West South Central | LA    |
| 37 | East South Central | KY    |
| 38 | East South Central | TN    |
| 39 | East South Central | MS    |
| 40 | East South Central | AL    |
| 41 | South Atlantic     | WV    |
| 42 | South Atlantic     | VA    |
| 43 | South Atlantic     | NC    |
| 44 | South Atlantic     | SC    |
| 45 | South Atlantic     | GA    |
| 46 | South Atlantic     | FL    |
| 47 | South Atlantic     | DE    |
| 48 | South Atlantic     | MD    |
| 49 | South Atlantic     | DC    |
| 50 | Alaska-Hawaii      | AK    |
| 51 | Alaska-Hawaii      | HI    |
+----+--------------------+-------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:04:00.727

这里对您的表格描述有很大的猜测，但是像这样（未经测试）。希望这能让您了解使用每个州一行的区域表。

```
SELECT b.Region, a.State, AVG(SaleValue) AS Average_Sales_by_state, COUNT(b.DistributorId)
FROM Sales a
INNER JOIN Distributors b ON a.DistributorId = b.DistributorId
INNER JOIN US_Regions c ON b.State = c.State
GROUP BY b.Region, a.State
ORDER BY b.Region, Average_Sales_by_state DESC 
```

# grails - 构建时战争中包含的未知插件

> ID：14581009
> 
> 赞同：0
> 
> 时间：2013-01-29T10:41:17.067
> 
> 标签：grails, grails-plugin

我注意到每次构建时插件“svn-1.0.0.M1”都会被拉入我的战争。
我没有在我的 buildConfig 或 application.properties 中定义它。

有人可以解释为什么会这样吗？它是我的其他插件之一的依赖项吗？

我正在使用 grails 2.1.0。

```
repositories {
    inherits true // Whether to inherit repository definitions from plugins

    grailsPlugins()
    grailsHome()
    grailsCentral()
    mavenCentral()
    mavenLocal()

    mavenRepo "http://snapshots.repository.codehaus.org"
    mavenRepo "http://repository.codehaus.org"
}
dependencies {
    // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes eg.
    runtime 'mysql:mysql-connector-java:5.1.20'
    runtime 'hsqldb:hsqldb:1.8.0.10'
}
plugins {
    build   ":tomcat:$grailsVersion", ":jbossas:1.0"
    runtime ":hibernate:$grailsVersion"
    compile ":spring-security-core:1.2.7.3",":geoip:0.2",":pretty-time:0.3",":profiler:0.4",":quartz:0.4.2"

    // Add plugins that MUST NOT go into production here
    if (Environment.current != Environment.PRODUCTION) {
        runtime ":build-test-data:2.0.3",":fixtures:1.1",":grails-melody:1.12"
    }       
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:55:46.390

您可以在命令行上调用 grails 命令**grails dependency-report**查看所有依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:06:40.583

这来自 grails-melody 和 fixtures 插件。正如 Ian 在他的评论中所说，有一个 Grails 错误，其中标记为的插件依赖项`exported = false`被正确排除，但它的依赖插件没有。旧版本的发布插件依赖于 svn 插件，而新版本依赖于 rest-client-builder 插件，因此这些可能会泄漏到包含的应用程序中。

插件开发人员的解决方法是显式依赖发布插件的依赖项并排除它们：

```
plugins {
   build(':release:2.2.0', ':rest-client-builder:1.0.3') {
      export = false
   }
} 
```

而不仅仅是

```
plugins {
   build(':release:2.2.0') {
      export = false
   }
} 
```

# url-rewriting - 如何使用 ASP.NET 3.5 从域名 URL 中删除/隐藏默认页面（default.aspx 或 index.aspx）

> ID：14581011
> 
> 赞同：0
> 
> 时间：2013-01-29T10:41:23.650
> 
> 标签：url-rewriting, global-asax, rewritepath

我的要求是我们的 SEO 专家建议 www.example.com/index.aspx
应加载为 www.example.com 以用于谷歌索引规范问题

我还想提一下，因为共享服务器我们无法访问 IIS 服务器，而且支持的人也不太合作。

我在 global.asax 中尝试了以下代码。Index.aspx 是该站点的默认页面，因此它会引发错误：“500 - 内部服务器错误”。

```
void Application_BeginRequest(object sender, EventArgs e)
{

    HttpContext incoming = HttpContext.Current;

    string oldpath = incoming.Request.Url.AbsoluteUri.ToLower();
    if (oldpath.Contains("index.aspx") == true)
    {
    HttpContext.Current.RewritePath("http://www.example.com", false);
    }
}

//Also tried following 
void Application_BeginRequest(object sender, EventArgs e)
{

    HttpContext incoming = HttpContext.Current;

    string oldpath = incoming.Request.Url.AbsoluteUri.ToLower();
    if (oldpath.Contains("index.aspx") == true)
    {
        Response.Redirect"http://www.example.com"
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:14:05.843

你可能想用

```
<script language="c#" runat="server">
</script> 
```

# ios - iPad 2 使用 AVCaptureSessionPresetPhoto 仅捕获 720x960 静态图像

> ID：14581015
> 
> 赞同：4
> 
> 时间：2013-01-29T10:41:52.770
> 
> 标签：ios, video, camera, capture

我正在捕捉视频并使用[`AVCaptureVideoPreviewLayer`](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureVideoPreviewLayer_Class/Reference/Reference.html). 在这两者之间，我希望能够捕捉到全质量的静止图像。因此，我大部分时间都遵循[本教程](http://www.musicalgeometry.com/?p=1297)。

如果我将会话预设设置为[`AVCaptureSessionPresetPhoto`](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureSession_Class/Reference/Reference.html)，我只会得到 720x960 的输出图像，而不是完整的后置摄像头分辨率 1280x720。但是，如果我明确设置`AVCaptureSessionPreset1280x720`，我会得到完整的分辨率。在 iPhone 5 上，我总是获得`AVCaptureSessionPresetPhoto`(3264x2448) 的全分辨率。我真的必须这样做`if iPad2 do this, else do that`还是我在这里错过了一些选择？

AVCaptureStillImageOutput 格式设置为默认值（JPEG 压缩），但如果我使用未压缩的 BGRA（`setOutputSettings`包含字典`kCVPixelBufferPixelFormatTypeKey => kCVPixelFormatType_32BGRA`），也会发生同样的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:00:43.043

您正在以正确的分辨率获取图像。
iPad2 有一个 960x720 的摄像头，如果您使用`AVCaptureSessionPresetPhoto`预设，您将获得该分辨率。

强制`AVCaptureSessionPreset1280x720`预设您告诉 iOS 使用视频录制预设，它实际上可以达到更高的分辨率（它是高清 720p 相机 - 1280x720）。

# android - Android：修改录制的视频质量

> ID：14581017
> 
> 赞同：4
> 
> 时间：2013-01-29T10:41:56.263
> 
> 标签：android, video

我正在使用 MediaRecorder 录制视频。假设视频的大小保持不变，我不清楚应该使用哪些参数来改变图像的质量。例如，我想始终创建一个 640x480 mp4 视频。我可以调整哪些参数来提高或降低质量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T10:48:25.000

您可以尝试使用

```
recorder.setVideoSize(640, 480);
recorder.setVideoFrameRate(16); //might be auto-determined due to lighting
recorder.setVideoEncodingBitRate(3000000);
recorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);// MPEG_4_SP
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); 
```

或者

```
 CamcorderProfile cpHigh = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
 recorder.setProfile(cpHigh); 
```

要设置高质量和低质量参数，请参见[此处](http://www.andgps.com/20110410/camcorderprofile-predefined-camcorder-profile-settings-for-camcorder-applications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:56:49.930

试试这个你可以解决问题

```
mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mediaRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT); 
mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);

String path = Environment.getExternalStorageDirectory() + "/file.mp4";
mediaRecorder.setOutputFile(path); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-22T12:08:10.107

您必须增加视频编码比特率以提高使用`setVideoEncodingBitRate()`in的视频质量`MediaRecorder`。

```
mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
mRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264); 
```

**mRecorder.setVideoEncodingBitRate(4000000);** `

# mysql - 我应该使用 compress 压缩 mysql 数据库中的电子邮件附件吗？

> ID：14581028
> 
> 赞同：0
> 
> 时间：2013-01-29T10:42:46.230
> 
> 标签：mysql, compression, email-attachments

我将电子邮件存储在 mysql 数据库中，想知道使用 compress ( [https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html#function_compress](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html#function_compress) ) 存储是否是个好主意在数据库中提取的电子邮件附件以减小数据库的大小。

为什么我犹豫的是，大多数附件已经被压缩了（比如 jpg）。另一个原因是我找不到有关 MySql 的内置压缩算法的效率的任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:22:26.810

鉴于您提供的其他信息，似乎（a）您不需要能够搜索文件，只需检索它们并且（b）您的数据库限制为 1GB。我建议您根本不要将文件存储在数据库中，而只需将“密钥”存储到文件中，这可能只是一个唯一的文件名。

在您的数据库中，您可以存储原始用户文件名，但将附件写入具有唯一标识符的文件存储（它甚至可以只是一个列 ID，或者您可以创建一个适当的 GUID。

这将使您的数据库保持较小，并且从文件中检索附件不会比从数据库中检索它们花费更长的时间。当您在检索时写回文件时，请传递原始文件名，而不是您重命名的唯一文件名。

如果您期望有很多文件，那么您可以跨目录对存储进行分片，这样它们就不会变得太大，并且最终您可以根据需要跨越文件系统。

如果 1GB 是数据库和存储的限制，那么这当然可能没有多大帮助。在这种情况下，是的，您应该压缩文件，但正如您已经知道的那样，对于已经采用压缩格式的文件，您可能无法获得很好的压缩率。

支持将文件保存在数据库之外的最后一点是，它可以帮助保持数据库精简，从而更快地进行备份/恢复或迁移活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:54:56.737

对我来说，这在很大程度上取决于该邮件的实际使用情况：

第一：您真诚地期望有多少流量，您有多少存储空间？（如果你有很多空间和很少的用户为什么要打扰？）

第二：当今的许多格式（jpg、odf 文档、office 文档、mp3）已经被压缩了，所以你不会从中得到太多的好处

第三：压缩可能会增加您的 CPU 使用率，因此您必须查看在高峰时段您的流量可能是多少，看看这是否会成为问题（很可能不会）

最后，如果您打算在服务器中使用服务器级文件系统，有些文件系统具有透明的数据压缩，因此您可能希望以其他方式投入时间

另一方面，如果您的资源非常有限，您可能会被迫压缩 al 以减少空间消耗

# ontology - SQWRL 查询和 SWRL 规则的数据库

> ID：14581032
> 
> 赞同：1
> 
> 时间：2013-01-29T10:43:00.787
> 
> 标签：ontology, protege, swrl

我已经使用 Protégé 构建了一个本体，但是如何向其中写入数据？我们需要有单独的数据库吗？我跟着[这个链接](http://protegewiki.stanford.edu/wiki/Working_with_the_Database_Backend_in_OWL)。现在数据库已在 SQL 中创建，但我不知道如何将数据放在那里。以及如何根据本体匹配表和列？我需要手动创建所有内容还是可以进行任何导入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:58:06.580

我从这个问题中了解到，您已经开发了一个本体，即很少的类、类之间的关系和很少的 SWRL 规则（如果有的话）。

现在，您需要做的是，您的数据需要转换为 owl 实例（即 SQL 查询结果到 OWL 个体 (RDF) 或 XML 到 OWL 实例）并将这些实例添加到本体。为此，您可以采用不同的方法。

您可以查看（[如何从原始数据 (CSV) 创建本体？](https://stackoverflow.com/questions/13147864/owl-ontology-and-data-how-do-they-interact/13150260#13150260)）了解更多详细信息。

另请参阅（[http://protegewiki.stanford.edu/wiki/DataMaster](http://protegewiki.stanford.edu/wiki/DataMaster)）

还要检查数据库是否具有将数据作为 RDF 或 OWL 导入的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:45:10.447

根据您的用例，您可以做许多不同的事情。看来您想要的是将SQL数据库中的数据转换为符合本体的数据。所以基本上，如果我没看错的话，你想从你的数据库中生成 RDF 三元组。

一种方法是使用[W3C R2RML 标准](http://www.w3.org/TR/r2rml/)，这是一种用于指定从关系数据到 RDF 数据的映射的语言。有[几种实现](http://www.w3.org/2001/sw/rdb2rdf/wiki/Implementations)要么将映射一次应用于数据以生成 RDF，要么简单地将用 SPARQL 表示的查询转换为相应的 SQL 查询。因此，您可以像处理 RDF 一样操作数据，而实际上它仍然是 SQL。

否则，您也可以将数据库完全转换为 RDF 并将其存储在[Triplestore](http://en.wikipedia.org/wiki/Triplestore)中。Triplestore 变得越来越高效和可扩展，因此它是一个可行的选择。

# tridion - UGC帖子内容

> ID：14581033
> 
> 赞同：7
> 
> 时间：2013-01-29T10:43:07.010
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, ugc

我只是想运行一个使用 UGC Web 服务发布 UGC 评论的小原型。

代码示例如下。我从 Web 服务收到 403 响应，表明我无权使用该服务，所以我认为我需要创建一个身份验证标头？有没有人有任何关于如何使用 UGC 网络服务发表评论的例子？

```
string ugcData = "{d\":{\"Content\":\"FROM WEB SERVICE\",\"Status\":2,\"ItemPublicationId\":\"68\",\"ItemId\":\"17805\",\"ItemType\":\"16\",\"Id\":0,\"ModeratedDate\":\"\",\"LastModifiedDate\":\"\",\"CreationDate\":\"\",\"Score\":0,\"Moderator\":\"\",\"User\":{\"Id\":\"DOMAIN%5Cbsmith\",\"Name\":\"Bill Smith\"}\"}";

WebServiceClient ugcCall = new WebServiceClient();

ugcCall.UploadString("/PostData", "POST", ugcData); 
```

MTIA。

约翰

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T11:15:09.860

您应该尝试在评论集合上发帖：

```
ugcCall.UploadString("/Comments", "POST", ugcData); 
```

然后你会看到你错过了 CreationDate，你需要添加到你的实体的时刻，比如：

```
\"CreationDate\":\"/Date(1359457694472)\" 
```

（我实际上并没有检查你是否需要更多的引号）。对于 JSON 字符串中日期的格式，请查看[odata 规范](http://www.odata.org/developers/protocols/json-format#PrimitiveTypes)。

如果仍然有问题，请尝试更改`DOMAIN%5Cbsmith`为另一个虚拟值（`test`例如''）。

如果这还不够，那么也许您可以查看 UGC WebService 生成的日志并尝试制作一些堆栈跟踪。

这里还需要注意一件事：需要在 Web.config 中正确定义 UGC 属性才能使帖子发生。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T12:15:06.577

我使用了与您所遵循的方法相同的方法，即为 UGC Web 服务使用生成的代理。为了创建正确的 json，我们使用了标准的 .NET JavaScriptSerializer。我认为这使代码更容易阅读。

这是一个代码片段，也许它有点帮助。当然，您需要确保设置了变量。

```
 WSR_ContentDelivery.User user = new WSR_ContentDelivery.User
 {
        Id = GetUserId(),
        Name = username,
        EmailAddress = email,
        ExternalId = website
 };

 WSR_ContentDelivery.Comment comment = new WSR_ContentDelivery.Comment
 {
        CreationDate = DateTime.UtcNow,
        LastModifiedDate = DateTime.UtcNow,
        ItemPublicationId = tcmUri.PublicationId,
        ItemId = tcmUri.ItemId,
        ItemType = tcmUri.ItemTypeId,
        Content = content,
        User = user,
        Status = Statuses.SubmittedNeedsModeration,
        Score = 0
 };

 JavaScriptSerializer serializer = new JavaScriptSerializer();
 return WSClient.UploadString("/Comments", "POST", "{d:" + 
        serializer.Serialize(comment) + "}", user.Id); 
```

# symfony - Symfony2 3个实体之间的关系

> ID：14581036
> 
> 赞同：1
> 
> 时间：2013-01-29T10:43:14.013
> 
> 标签：symfony, doctrine-orm

我已经坚持了几天。我正在构建一个投票插件，用户可以在其中投票给地区的候选人，候选人属于年龄范围。每个区都有固定数量的席位。

所以我有**Districts 实体**和**Age Range 实体**（当然还有候选人实体）。

所以当我创建区时，我必须添加一些席位。每个座位都属于一个年龄段。例子：

1 区有 5 个席位。Seat1 属于 Range1 Seat2 属于 Range2 Seat3 属于 Range1 Seat4 属于 Range1 Seat5 属于 Range3

我尝试了地区和年龄范围之间的多对多关系，当然它创建了一个桥接表，但问题是，我不能为同一个范围添加多个座位！

知道如何解决这个问题吗？

谢谢，

艾玛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:55:52.527

如何拥有：

*   **区**实体_
*   **席位**实体_
*   年龄**范围**实体

因此，每个地区将与具有多对一关系的多个席位相关联，并且每个席位将与具有多对一关系的年龄范围相关联。

这样一来，您就可以在同一年龄段拥有多个座位。

# sql - 在一个单元格中创建两条线

> ID：14581038
> 
> 赞同：0
> 
> 时间：2013-01-29T10:43:22.753
> 
> 标签：sql, oracle

我有一个 sql 代码正在检索一行多行，有没有办法让它将这两行合并为一行。

```
select revertrsn  from LN08PENm where aano in(754,870,1136,1138,1139,1140) 
```

我正在检索的行中的数据是这样的：

> 根据穆罕默德·苏莱曼的批准
> 
> 邮寄日期 07/04/2009

我希望它像这样在一行中：

> 根据 Mohammad Sulaiman 的批准，邮寄日期为 07/04/2009

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:50:30.847

您可以替换换行符`\n`或`char(10)`空白字符`。例如：`

 ````
select replace(revertrsn,chr(10),' ') as only_one_line
  from LN08PENm 
 where aano in(754,870,1136,1138,1139,1140) 
```

请注意， throw-a-line 指令因操作系统而异。在 Windows 上，您需要检查回车后跟换行符：`chr(13)||chr(10)`. 令人困惑的是，我们需要关注的操作系统是加载数据的操作系统，而不是我们用于输出的操作系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:04:41.090

清理这种混乱的一个好方法就是替换一般的非打印控制代码。

```
update tab
set    col =  regexp_replace(col,'[:cntrl:]','')
where  col != regexp_replace(col,'[:cntrl:]','') 
````

# mysql - 我想像这样显示我的查询结果

> ID：14581041
> 
> 赞同：0
> 
> 时间：2013-01-29T10:43:34.917
> 
> 标签：mysql, mysql-workbench

这是我当前的结果 mysql>select * from city;

## 名称 国家代码 地区 人口

```
bangaluru   91  bangaluru   6347673
bangaluru   91  bangaluru   347673
bangaluru   91  bangaluru   67673
andhra      91  andhra      63476
mangalore   91  mangalore   63473 
```

这是我想要的：

## 名称 国家代码 地区 人口

```
bangaluru   91       bangaluru  6347673
            91       bangaluru  347673
            91       bangaluru  67673
andhra      91       andhra     63476
mangalore   91       mangalore  63473 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:44:30.170

```
SELECT 
    CASE WHEN _no = @i THEN '' ELSE @i := _no END
    as row_no,
    _no,
    _name
FROM
(
    SELECT 1 as _no, 'vikas' as _name UNION ALL
    SELECT 1, 'kratika' UNION ALL
    SELECT 2, 'vikas' 
) t,
(SELECT @i := '') temp 
```

# java - Javascript设置值但未在服务器端读取（第一次！）

> ID：14581042
> 
> 赞同：0
> 
> 时间：2013-01-29T10:43:35.677
> 
> 标签：java, javascript, spring-mvc, onclick

我用几行javascript设置了一个隐藏的输入值，然后我提交了表单。该值似乎设置正确，但控制器未读取。

如果我尝试刷新，则会读取该值...

这是代码（非常简单，我在不同的jsp中使用相同的代码）：

```
<form:input path="id" type="hidden" id="id" value="0" /> 
```

这就是我在`<td>`

```
onclick="return setId('${us.id}');" 
```

这是功能：

```
function setId(id) {
    document.getElementById('id').value = id;
    document.forms["myForm"].submit();
    return true;
} 
```

使用 Chrome，我可以看到该值已设置，所以我不明白为什么服务器没有立即收到它，我需要刷新。我还尝试删除返回，再创建一个函数来调用或其他奇怪的东西..

我在 Spring 中使用 Java。

* * *

**编辑：**

单击我正在更改控制器的按钮，可能有问题吗？

我正在对控制器 1 进行研究，然后我选择要修改的用户单击它并重定向到控制器 2 进行修改。

* * *

**编辑2：**

问题似乎是春天。我试图从请求中获取价值，并且似乎在那里。现在我正在以这种方式绕过它。

`request.getParameter("id")`

对这种行为有什么建议吗？

# iphone - 将照片库图像存储在缓存或文件路径ios中

> ID：14581045
> 
> 赞同：0
> 
> 时间：2013-01-29T10:43:48.290
> 
> 标签：iphone, ios

单击按钮我在 ios 中使用 assestlibrary 框架获取图像，并获取了所有图像，但单击按钮超过 2-3 次，由于检索到 150 多张照片，应用程序变慢或崩溃。有没有这样的代码我可以获取照片库图像的图像路径或缓存，以便应用程序顺利运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:26:01.960

我遇到过同样的问题。最后，我们将 ALAssetUrl 保存在一个数组中，而不是将图像存储在内存中。因此，每当您想使用图像时，您都可以使用其 url 将其从资产库中拉出。

```
-(void)storeAssetInArray:(ALAsset *)asset {
    _assetArray = [[NSMutableArray alloc] init];
    [_assetArray addObject:[asset valueForProperty:ALAssetPropertyURLs]];
}

-(void)getImageBackOut {
    [ALAssetsLibrary assetForURL:[_assetArray objectAtIndex:0] resultBlock:^(ALAsset *asset) {
        if (asset) {
            [self getTheImage:uploadImage Asset:asset];
        }
    } failureBlock:^(NSError *error){
        //Failed to get asset
    } ];
}

-(void)getTheImage:(UploadImage *)uploadImage Asset:(ALAsset *)asset {
    UIImage *image = [UIImage imageWithCGImage:[[asset defaultRepresentation] fullResolutionImage]];
} 
```

# c# - 将事件处理程序附加到使用未知类型参数在运行时使用反射初始化的泛型类型

> ID：14581047
> 
> 赞同：0
> 
> 时间：2013-01-29T10:43:54.593
> 
> 标签：c#, reflection, delegates, event-handling, generic-programming

请看下面的代码，这是基于你有一个控制器类 Controller 的假设。它是一个具有约束 CGeneric 的泛型类，其中 T:IRecord、两个具体的记录类 CRecordCustomer:IRecord 和 CRecordVipCustomer:Irecord。问题是如何在运行前不知道 t 类型的情况下将事件处理程序附加到泛型类型？

```
public class CGeneric<T> where T:IRecord, new()
{
public delegate void OnCompleted();
public event OnCompleted completed;

private void ProcessStuff(T ConcreteRecordType)
{
    T concreteInstance = default(T);
    (concreteInstance as T).DoSomeInterfaceStuff();
    if(this.completed !=null)
    {
        this.completed;
    }
}
}

// This is how the controller class instantiates CGeneric<T> 
// Using reflection gets all types that implement IRecord
// Then using one of those types (which is unknown at compile time):

class Controller
{

Type[] allTypes = Assembly.GetExecutingAssembly().GetTypes();

    Type concreteType allTypes.Where(t => t.GetInterfaces().Contains(typeof(IRecord)) &&      !IgnoreType(t)).ToList()[0];

    Type genericType = typeof(CGeneric<>);

    genericType = genericType .MakeGenericType(
    ConstructorInfo constructor = genericType .GetConstructor(new Type[] { });
    Object genericInstance = constructor.Invoke(new Object[] { });

//This is where I need to hook to OnCompletedEvent

    MethodInfo processmoethod = genericType .GetMethod("Process");

    processmoethod.Invoke(genericInstance , concreteType );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:16:02.177

通常，您应该能够按如下方式添加事件处理程序：

```
OnCompleted handler = () => { /*event handler*/ };
genericType.GetEvent("completed").AddEventHandler(genericInstance, handler); 
```

但是，您应该将您的`OnCompleted`委托定义移到类之外，以便能够在不知道的情况下引用`T`它`CGeneric<T>`。

（注意：您的示例代码有很多其他错误会阻止您编译它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:37:16.587

一个解决方案可能是这样的：

```
public delegate void OnCompleted();

public interface IRecord
{
    void DoSomeInterfaceStuff();
    event OnCompleted completed;
}

public interface IEvents
{
    event OnCompleted completed;
}

public class CGeneric<T> : IEvents
    where T:IRecord, new()
{
    public event OnCompleted completed;
    private void ProcessStuff(T ConcreteRecordType)
    {
        T concreteInstance = default(T);

        concreteInstance.DoSomeInterfaceStuff();

        if(this.completed !=null)
        {
            this.completed();
        }
    }
}

public class Record : IRecord
{
    public void DoSomeInterfaceStuff()
    {

    }
} 
```

并且可以通过这种方式实例化：

```
 Type toInstantiate = Type.GetType("CGeneric`1");
    Type[] parameters = new Type[] { typeof(Record) };
    Type instantiated = toInstantiate.MakeGenericType(parameters);

    IEvents result = Activator.CreateInstance(instantiated) as IEvents;
    result.completed += result_completed; 
```

而且它不依赖于泛型类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:02:12.307

如果我理解你的正确，这可以帮助你[http://www.codeproject.com/Articles/121923/Using-Reflection-to-Manage-Event-Handlers](http://www.codeproject.com/Articles/121923/Using-Reflection-to-Manage-Event-Handlers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-05T10:12:11.573

Lats 说你有**eventName**，**handlerMethodName**，**objectOnWhichTheEventIsDefined**，**objectOnWhichTheEventHandlerIsDefined**。**eventName**和**handlerMethodName**是字符串，其余的对象是对象数据类型。然后，您可以使用反射将事件与处理程序连接起来，如下所示。

```
public bool SubscribeEvent(string eventName, string handlerMethodName, 
    object objectOnWhichTheEventIsDefined, 
    object objectOnWhichTheEventHandlerIsDefined)
{
    try
    {
        var eventInfo = objectOnWhichTheEventIsDefined.GetType().GetEvent(eventName);
        var methodInfo = objectOnWhichTheEventHandlerIsDefined.GetType().
        GetMethod(handlerMethodName);

        // Create new delegate mapping event to handler
        Delegate handler = Delegate.CreateDelegate(eventInfo.EventHandlerType, objectOnWhichTheEventHandlerIsDefined, methodInfo);
        eventInfo.AddEventHandler(objectOnWhichTheEventIsDefined, handler);
        return true;
    }
    catch (Exception ex)
    {
        // Log failure!
        var message = "Exception while subscribing to handler. Event:" + eventName + " - Handler: " + handlerMethodName + "- Exception: " + ex;
        Debug.Print(message);
        return false;
    }
} 
```

一个完整的控制台示例如下所示。

```
class Program
{
    static void Main(string[] args)
    {
        var typeWithEvent = new TypeWithEvent();
        var typeWithEventHandler = new TypeWithEventHandler();

        SubscribeEvent("EventTest", "EventHandlerMethod", typeWithEvent, typeWithEventHandler);

        EventArgs e = new EventArgs();
        Console.WriteLine("Event is about to be raised.");
        typeWithEvent.OnTimeToRaiseTheEvent(e);
        Console.WriteLine("Event trigger is completed.");
        Console.ReadLine();
    }
    static bool SubscribeEvent(string eventName, string handlerMethodName, object objectOnWhichTheEventIsDefined, object objectOnWhichTheEventHandlerIsDefined)
    {
        try
        {
            var eventInfo = objectOnWhichTheEventIsDefined.GetType().GetEvent(eventName);
            var methodInfo = objectOnWhichTheEventHandlerIsDefined.GetType().
            GetMethod(handlerMethodName);

            // Create new delegate mapping event to handler
            Delegate handler = Delegate.CreateDelegate(eventInfo.EventHandlerType, objectOnWhichTheEventHandlerIsDefined, methodInfo);
            eventInfo.AddEventHandler(objectOnWhichTheEventIsDefined, handler);
            return true;
        }
        catch (Exception ex)
        {
            // Log failure!
            var message = "Exception while subscribing to handler. Event:" + eventName + " - Handler: " + handlerMethodName + "- Exception: " + ex;
            Debug.Print(message);
            return false;
        }
    }
}
internal class TypeWithEvent
{
    public event EventHandler<EventArgs> EventTest;
    internal void OnTimeToRaiseTheEvent(EventArgs e)
    {
        // Thread safe way to raise event as described in Events chapter 11 of
        // the book CLR Via C#, 4th Edition, by Jeffrey Richter
        EventHandler<EventArgs> temp = Volatile.Read(ref EventTest);
        if (temp != null) temp(this, e);
    }
}

internal class TypeWithEventHandler
{
    public void EventHandlerMethod(Object sender, EventArgs e)
    {
        Console.WriteLine("From the event handler method.");
    }
} 
```

# jboss - jboss中的加密类加载

> ID：14581048
> 
> 赞同：0
> 
> 时间：2013-01-29T10:43:58.333
> 
> 标签：jboss, classloader

我们正在使用 JBoss 5.1 来部署我们的应用程序。但是现在我们想在我们的战争中加密几个类。当我们加密一个 .class 文件时，Jboss 会抛出错误。这是可以理解的，因为 jboss 的类加载器不知道该类是加密的。我想扩展 JBoss 的类加载功能并实现代码以在加载 .class 文件之前对其进行解密。

我想这一定是可能的。我一直在阅读 jboss 开发人员手册，但无法弄清楚我该怎么做。

有没有其他人已经做过类似的事情了。任何建议或帮助都会很棒。

谢谢， 伊尔凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:19:11.723

这可能是可能的（尽管需要工作），但有强烈的意见认为它并没有真正意义或提供好处。看看[这个讨论](http://www.javaworld.com/javaworld/javaqa/2003-05/01-qa-0509-jcrypt.html?page=1)。

简而言之，每个解密类加载器都必须向 java 运行时提供类的有据可查、清晰的定义，并且从那里任何人都可以轻松读取它，无论是通过连接 java 代理还是用自己的代码替换 rt.jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T08:04:42.993

这个问题在 JBoss 社区讨论论坛中得到了回答：

[https://community.jboss.org/thread/221073](https://community.jboss.org/thread/221073)

# maps - Openlayers - 如何在日期线的两侧绘制多边形

> ID：14581049
> 
> 赞同：5
> 
> 时间：2013-01-29T10:43:58.600
> 
> 标签：maps, gis, openlayers

我需要在地图上画几个大多边形。必须在日期变更线的所有边复制多边形。它们的绘制方式应与[我的示例](http://pastehtml.com/view/cqow8flf0.html)中的谷歌地图相同。

1）请给出您的意见，如果多边形越过日期变更线，如何绘制多边形？[我出售了与示例](http://openlayers.org/dev/examples/wrapDateLine.html)中相同的问题，但是当多边形越过日期线时，我在绘制多边形时遇到了麻烦。这就是为什么我在经度上添加了 360 度 - 是否正确？

```
for (var i = 1; i < polygonPoints.length; i++) {
      var dY = polygonPoints[i][1] - polygonPoints[i-1][1];
      if(Math.abs(dY) > 180)
           polygonPoints[i][1] += 360;
} 
```

2）请告知，在日期线两侧绘制多边形的正确方法是什么？

你能检查我的变种：

```
 var map;    // openlayers map

    // [[latitude, longitude], ...]
    var polygonPoints = [[10, -100],[30, -70],[38, -30],[40, 0],[38, 50 ],[20, 100],[50, 170],[55, 180],
                        [50, -170], [40, -160],[10, 170],[0, -170],[-10, -160],[-25, -170], [-30, 100 ],
                        [-45, 10 ],[-50, -20],[-55, 30],[-35, -160],[-40, -160],[-60, 30],  [-50, -30 ],
                        [-40, 10 ],[-25, 100], [-20, -175],[-10, -165],[0, -180 ],[10, 165],[50, -180],
                        [45, 170],[15, 100],[33, 50 ],[35, 0 ],[35, -30],[25, -70],[5, -100],[10, -100] ];
    function InitOL(){
        var wgs84Projection = new OpenLayers.Projection("EPSG:4326");
        var epsg900913 = new OpenLayers.Projection('EPSG:900913');

        var options = {
            div: "openLayersMap",
            projection: wgs84Projection,
            displayProjection: epsg900913,
            allOverlays: true,
            zoom: 1
        };

        map = new OpenLayers.Map(options);
        var mapserv = new OpenLayers.Layer.MapServer( "OpenLayers Basic",
                    "http://vmap0.tiles.osgeo.org/wms/vmap0",
                    {layers: 'basic'},
                    {wrapDateLine: true} );

        var polygonsLayer = new OpenLayers.Layer.Vector("PolygonsLayer", null, { wrapDateLine: true });

        map.addLayers([mapserv, polygonsLayer]);
        map.addControl(new OpenLayers.Control.LayerSwitcher());
        map.addControl(new OpenLayers.Control.MousePosition());
        map.zoomToMaxExtent();
        map.setCenter(new OpenLayers.LonLat(-100, 0));

        for (var i = 1; i < polygonPoints.length; i++) {
            var dY = polygonPoints[i][1] - polygonPoints[i-1][1];
            if(Math.abs(dY) > 180)
                polygonPoints[i][1] += 360;
        }

        var olPoints = [];
        for (var j = 0; j < polygonPoints.length; j++) {
            olPoints.push(new OpenLayers.Geometry.Point(polygonPoints[j][1], polygonPoints[j][0]));
        }
        var linearRing = new OpenLayers.Geometry.LinearRing(olPoints);
        var bounds = new OpenLayers.Bounds([-180, -90, 180, 90]);
        linearRing.setBounds(bounds);

        var polygonStyle = {
                strokeColor: "#770077",
                strokeOpacity: 1,
                strokeWidth: 2,
                fillColor: "#770077",
                fillOpacity: 0.5
            };

        var olPolygon = new OpenLayers.Geometry.Polygon(linearRing);
        var polygonFeature = new OpenLayers.Feature.Vector(olPolygon);
        polygonFeature.style = polygonStyle;
        polygonsLayer.addFeatures(polygonFeature);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:02:10.443

这看起来像是 OpenLayers 当前绘制多边形的方式的限制。您可能需要提交错误报告并希望它会被修补或自己修补......当您检测到这种情况时，您可以自己生成*第二个*多边形。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-21T21:01:00.370

我找到了[解决](https://gis.stackexchange.com/a/83772/2022)这个问题的方法。它被称为[Arc.js](https://github.com/springmeyer/arc.js)，用于计算大圆路线。不仅如此，它还会分割日期线上的线，并为您提供在日期线上相交的两条线串，OpenLayers 可以轻松映射

![在此处输入图像描述](../Images/53e5d785d8cf2262b18de355f63e36a2.png) ![在此处输入图像描述](../Images/b4930ecfa5fc421b93ca8b759eedd89d.png)

# git - gitk 丢失提交

> ID：14581052
> 
> 赞同：1
> 
> 时间：2013-01-29T10:44:08.620
> 
> 标签：git, git-gui, gitk

我正在使用 git gui，但我的 wifi 在操作过程中丢失了。现在，当我查看我的提交历史时，有几个提交丢失，并且历史上有一个空白。间隙之前的所有内容都用红线连接，之后的所有内容都用绿线连接。这里发生了什么，我该如何恢复那些丢失的提交？

[截屏](http://imgur.com/4SY5eIL)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:08:56.813

gitk 中线条的颜色用于消除交叉线的歧义。它们没有其他象征意义。

# silverlight-4.0 - 如何在 radchart telerik 中仅显示一个 ItemLabel

> ID：14581056
> 
> 赞同：0
> 
> 时间：2013-01-29T10:44:17.683
> 
> 标签：silverlight-4.0, telerik, radchart

我正在使用 radchart，在图表中我可以显示 4 个系列，其中一个系列是线，因为每个 x 轴值的值都相同。现在我想隐藏除一个 ItemLabel 之外的所有 ItemLabel，即在最后一个 x 轴值处显示项目标签，有没有办法只显示该系列的一个 ItemLabel。

![1]:![图表到单个项目标签](../Images/0eb39da54d2162c3da7a831a8cdf2354.png)

仅供参考，系列颜色为绿色，最后显示唯一的一个 itemlabel 是否有可能。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:44:01.543

在 Telerik 中发布这个问题后，他们为我提供了解决方案。

[回答](http://www.telerik.com/community/forums/silverlight/general-discussions/how-to-show-only-one-itemlabel-in-line-series-in-radchart.aspx)

# android - 活动为空 当电子邮件客户端打开并返回活动时

> ID：14581060
> 
> 赞同：0
> 
> 时间：2013-01-29T10:44:34.680
> 
> 标签：android, android-activity, email-client

我正在使用应用程序的意图打开电子邮件客户端。打开电子邮件客户端并恢复活动后，活动将被清除。当我们回到活动时，onCreate 会被调用。我使用静态变量在活动上设置的值，所有内容都将被清除，发送电子邮件后活动为空并返回活动。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:19:05.197

如果我猜对了，那么您需要在`onSaveInstanceState`回调中保存所有控件的状态。

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    super.onSaveInstanceState(savedInstanceState);
    // Save UI state changes to the savedInstanceState.
    // This bundle will be passed to onCreate if the process is
    // killed and restarted.
    savedInstanceState.putString("MyString", yourTextView.getText().toString());
} 
```

当您的应用程序重新启动时，您可以使用`onCreate`回调读取值，如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if(savedInstanceState != null) { // is null on first start
        yourTextView.setText(savedInstanceState.getString("MyString"));
        //...
    }
    // ...
} 
```

# go - Golang CGo：将联合字段转换为 Go 类型

> ID：14581063
> 
> 赞同：11
> 
> 时间：2013-01-29T10:44:43.313
> 
> 标签：go

我在 64 位平台上使用这个 C 结构，试图访问**值联合中的****ui32v**字段：

 **```
struct _GNetSnmpVarBind {
  guint32       *oid;       /* name of the variable */
  gsize     oid_len;    /* length of the name */
  GNetSnmpVarBindType   type;       /* variable type / exception */
  union {
    gint32   i32;           /* 32 bit signed   */
    guint32  ui32;          /* 32 bit unsigned */
    gint64   i64;           /* 64 bit signed   */
    guint64  ui64;          /* 64 bit unsigned */
    guint8  *ui8v;          /*  8 bit unsigned vector */
    guint32 *ui32v;         /* 32 bit unsigned vector */
  }         value;      /* value of the variable */
  gsize     value_len;  /* length of a vector in bytes */
}; 
```

我可以为每个联合元素编写一个 C 包装函数，但出于教学目的，我宁愿在 Go 中工作。这是我尝试访问**ui32v**字段的方式：

```
func union_to_guint32_ptr(cbytes [8]byte) (result *_Ctype_guint32) {
  buf := bytes.NewBuffer(cbytes[:])
  var ptr uint64
  if err := binary.Read(buf, binary.LittleEndian, &ptr); err == nil {
    return (*_Ctype_guint32)(unsafe.Pointer(ptr))
  }
  return nil
} 
```

然而这给出了一个错误**cannot convert ptr (type uint64) to type unsafe.Pointer**

那么如何*将*uint64 转换为**指向**C guint32 的 Go 类型呢？我尝试了各种组合，将转换为 uintptr，然后转换为 *_Ctype_guint32，转换为 uintptr，然后使用 unsafe.Pointer，...

我的理由是：我传递了一个 8 个字节的数组。将其转换为 uint64，即内存地址。将其转换为指向 guint32 的指针（即 guint32 的 C 数组），并将其作为结果返回 - 即联合字段“值”作为 guint32 *。

* * *

**语境**

稍后我想使用 value_len 字段将 guint32 的 C 数组转换为字符串，使用我知道已经可以使用的函数：

```
guint32_star := union_to_guint32_ptr(data.value)
result += OidArrayToString(guint32_star, data.value_len) 
```

C 代码来自[gsnmp](http://sourcecodebrowser.com/gsnmp/0.3.0/annotated.html)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-05-24T04:43:59.927

cgo 将联合公开为一个字节数组，其大小足以容纳联合的最大成员。在您的情况下，它是 64 位，即 8 个字节，`[8]byte`. 正如您所演示的，此数组的内容包含联合的内容，使用它是指针转换的问题。

但是，您可以使用*数组的地址*来大大简化该过程。对于一个`C._GNetSnmpVarBind`名为`data`,

```
guint32_star := *(**C.guint32)(unsafe.Pointer(&data.value[0])) 
```

第一次看到的时候还没有完全理解，但是拆开之后就更清楚了：

```
var data C._GNetSnmpVarBind    // The C struct
var union [8]byte = data.value // The union, as eight contiguous bytes of memory

// The first magic. The address of the first element in that contiguous memory
// is the address of that memory. In other words, the address of that union.
var addr *byte = &union[0]

// The second magic. Instead of pointing to bytes of memory, we can point
// to some useful type, T, by changing the type of the pointer to *T using
// unsafe.Pointer. In this case we want to interpret the union as member
// `guint32 *ui32v`. That is, T = (*C.guint32) and *T = (**C.guint32).
var cast **C.guint32 = (**C.guint32)(unsafe.Pointer(addr))

// The final step. We wanted the contents of the union, not the address
// of the union. Dereference it!
var guint32_star *C.guint32 = *cast 
```

归功于 Alan Shen 的[文章](https://sunzenshen.github.io/tutorials/2015/05/09/cgotchas-intro.html)，该文章以一种对我来说终于有意义的方式描述了联合的 cgo 表示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T13:24:42.303

解决方案是首先转换为**uintptr**，然后转换为**unsafe.Pointer** ，即两个单独的转换：

```
func union_to_guint32_ptr(cbytes [8]byte) (result *_Ctype_guint32) {
    buf := bytes.NewBuffer(cbytes[:])
    var ptr uint64
    if err := binary.Read(buf, binary.LittleEndian, &ptr); err == nil {
        uptr := uintptr(ptr)
        return (*_Ctype_guint32)(unsafe.Pointer(uptr))
    }   
    return nil 
} 
```

我通过将结果与命令行工具进行比较来检查这一点，它返回了正确的结果。

* * *

语境

```
// gsnmp._Ctype_gpointer -> *gsnmp._Ctype_GNetSnmpVarBind
data := (*C.GNetSnmpVarBind)(out.data)

switch VarBindType(data._type) {
case GNET_SNMP_VARBIND_TYPE_OBJECTID:
    result += "GNET_SNMP_VARBIND_TYPE_OBJECTID" + ":"
    guint32_star := union_to_guint32_ptr(data.value)
    result += OidArrayToString(guint32_star, data.value_len) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-08T23:32:58.750

Sonia 已经回答了她自己的问题，我只想提供为什么需要进行两次类型转换的原因。

从[unsafe.Pointer](http://golang.org/pkg/unsafe/#Pointer)的文档中：

> 1) 任何类型的指针值都可以转换为Pointer。
> 
> 2) 指针可以转换为任何类型的指针值。
> 
> 3) uintptr 可以转换为指针。
> 
> 4) 指针可以转换为 uintptr。

由于`var ptr uint64`is not a pointer（因为 type`uint64`不是指针），`ptr`不能直接转换为`unsafe.Pointer`使用规则 1。因此需要先转换`ptr`为`uintptr`，然后从转换`uintptr`为`Pointer`以下规则 3。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T11:06:41.970

来自 CGO[文档](http://golang.org/cmd/cgo/)：

> 要直接访问 struct、union 或 enum 类型，请在其前面加上 struct_、union_ 或 enum_，如 C.struct_stat 中所示。

所以我*猜*（未经测试）代码可能类似于：

```
myUint32var := somePtrTo_GNetSnmpVarBind.union_guint32 
```

用于访问指向的结构的联合的 guint32 成员`somePtrTo_GNetSnmpVarBind`**

# javascript - 作为单独的弹出窗口打开 jwplayer

> ID：14581064
> 
> 赞同：0
> 
> 时间：2013-01-29T10:44:47.817
> 
> 标签：javascript, jquery, jwplayer

我刚刚下载了 jwplayer，我必须说我迷路了。对你们来说可能是小菜一碟。

这是我在 html 文件中使用的内容：

```
<div id="myElement">Loading the player...</div>

<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "/1.mp4",
    });
</script> 
```

它完全可以正常工作，它在我的网页中作为一个小播放器打开并播放视频。

但我希望它作为一个链接或一个锚标签，其中我有类似“帮助”的东西作为锚点，当你点击它时，它应该打开一个单独的窗口并显示视频。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:51:01.503

您需要使用 javascript 打开一个新窗口，其中显示一个包含播放器的单独文件。

在您的服务器上创建一个包含视频的新页面并检查它是否正常工作，然后在您的原始页面上编写一些脚本，单击链接时将打开新窗口。

就像是：

```
document.getElementById("MY_LINK_ID").onclick = function () {

    window.open("http://www.MY_WEBSITE.com/MY_VIDEO_PLAYER_PAGE", "NAME_OF_MY_WINDOW");

}; 
```

有关更多信息，请参见此处：http: [//www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

# iphone - 在后台和主线程中使用托管对象上下文

> ID：14581074
> 
> 赞同：1
> 
> 时间：2013-01-29T10:45:17.847
> 
> 标签：iphone, ios5, core-data

我有一个在单击按钮时被调用的函数。此外，还有`[self getData]`从此方法调用的方法，它使用核心数据更新 db 中的值。

另外，我有一个后台线程正在运行，每分钟执行一次。我在后台线程中使用了单独的托管对象上下文和托管对象通知。但我不确定是使用新的托管对象实例还是`[self managedObjectContext]`在`[self getData]`主线程上调用此方法，我是否必须为此使用托管对象通知？

当有方法在后台和主线程上运行时，在这些情况下，最佳实践是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:57:54.820

您可以使用私有队列并发类型创建一个临时上下文，它是主托管对象上下文的子级：

```
NSManagedObjectContext *temporaryContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
temporaryContext.parentContext = [self managedObjectContext];
[temporaryContext performBlock:^{
   // ...
}] 
```

当我在研究如何做到这一点时，我发现本教程非常有用：http: [//www.cocoanetics.com/2012/07/multi-context-coredata/](http://www.cocoanetics.com/2012/07/multi-context-coredata/)

# javascript - 使用 json 对象预填充表单的值

> ID：14581080
> 
> 赞同：2
> 
> 时间：2013-01-29T10:45:46.293
> 
> 标签：javascript, jquery

我正在使用类似这样的 JSON 对象`{"expiry_year":"15","number":"411111","month":"12","cvn":"456"}`

现在在一些回调中，我得到了这个值。我的要求是通过使用 MAP 将这些值放入 from 中，因此将来如果有人更改 DOM id 它不会影响页面。

为了实现这一点，我正在尝试这样

```
var domWithValueMap = {
              "number" : "number",
              "cnv" : "cnv",
              "month" : "expiry_month",
              "expiry_year" : "expiry_year"
          } 
```

在上面的哈希

```
var domWithValueMap = {
              "keys of json obg" : "id of DOM",

          } 
```

等等..

我的 div id 是：number、expiry_year、month 和 cvn。

然后在我尝试使用此匹配键是否存在之后

```
 domWithValueMap.hasOwnProperty(key); 
```

在此之后，我很困惑如何进行。请帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:49:26.547

这应该可以解决问题：

```
var values = {"expiry_year":"15","number":"411111","month":"12","cvn":"456"};
for(var key in values){
    document.getElementById(domWithValueMap[key]).value = values[key];
} 
```

再长一点，有评论：

```
var values = {"expiry_year":"15","number":"411111","month":"12","cvn":"456"};
for(var key in values){                       // Loop through your values,
    var id = domWithValueMap[key]             // Get the element ID from the value's key,
    var element = document.getElementById(id) // Get the element,
    element.value = values[key];              // Set teh value of the element.
} 
```

# inno-setup - 来自 Inno Setup 的“源文件损坏：SHA-1 哈希不匹配”错误

> ID：14581083
> 
> 赞同：0
> 
> 时间：2013-01-29T10:45:53.350
> 
> 标签：inno-setup, data-integrity

在 Windows 2008 上安装应用程序时，我在安装过程中遇到以下问题：

> 源文件损坏：SHA-1 哈希不匹配。

这是日志文件的部分。

```
2013-01-28 21:55:36.945   Installing the file.
2013-01-28 21:55:37.397   Source file corrupted: SHA-1 hash mismatch.
2013-01-28 21:55:37.881   Defaulting to Abort for suppressed message box 
                          (Abort/Retry/Ignore):
                          C:\Program Files (x86)\XYZ\XY.exe

                          An error occurred while trying to copy a file:
                          The source file is corrupted.

                          Click Retry to try again, Ignore to skip this 
                          file (not recommended), or Abort to cancel 
                           installation.
2013-01-28 21:55:37.881   User canceled the installation process.
2013-01-28 21:55:37.881   Rolling back changes. 
```

有人可以帮助解决问题吗？

Inno Setup 编译器生成的安装程序是有效的并且可以工作。腐败发生在其他地方。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:43:31.210

如错误所示，安装程序已以某种方式损坏。这很可能是由于下载错误造成的。让用户再次下载安装程序。（但是请注意，由于重复导致原始下载失败的任何原因，或者由于缓存坏文件的某些东西，问题仍然可能发生。）

# iphone - 迁移核心数据库的步骤

> ID：14581086
> 
> 赞同：-3
> 
> 时间：2013-01-29T10:45:58.447
> 
> 标签：iphone, ios, objective-c, core-data, core-data-migration

> **可能的重复：**
> [Core Data（iPhone）的“自动轻量级迁移”的实现](https://stackoverflow.com/questions/2310216/implementation-of-automatic-lightweight-migration-for-core-data-iphone)

我在应用商店提交了我的应用更新。在本次更新中，我在核心数据库中添加了一些内容。现在我收到一些抱怨说应用程序一直在崩溃。经过一番搜索，我发现我需要迁移我的核心数据库。我现在的问题是我需要执行哪些步骤。我已阅读开发人员网站上的文档，但无法正常工作。

我正在使用最新的 xcode。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:54:58.027

如果您要重命名任何字段，则需要进行迁移，但如果您只是添加了几个字段，您只需在核心数据文件中输入版本号，核心数据会处理所有事情。

这里有更多信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html)

这并不像听起来那么难。最困难的部分实际上是自己进行测试，因为您需要两个数据库，但请记住，您也可以在 Xcode 中返回。

# tomcat - 为 Web 应用程序配置日志记录

> ID：14581089
> 
> 赞同：0
> 
> 时间：2013-01-29T10:46:12.413
> 
> 标签：tomcat, log4j, war

我有一个打包为 WAR 文件的 Spring webapp 部署到 Tomcat。

Catalina.out 节目

```
log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
gen 29, 2013 11:37:04 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart 
```

这可能是 Spring 或 Hibernate 中的配置错误。但是为了找到`listenerStart`错误的原因，我认为有必要启用 log4j。谷歌搜索我发现 log4j 警告是由于缺少 log4j 配置引起的，这是肯定的，因为我还没有配置它。

如何配置 log4j（我将配置文件放在哪里以及输入什么）以便将错误记录到 catalina.out，这是最合理的开发日志记录位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:11:08.300

创建一个`log4j.xml`像这样的文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
    <appender class="org.apache.log4j.ConsoleAppender" name="CONSOLE">
        <param value="INFO" name="Threshold"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param value="%d{DATE}\t%m%n" name="ConversionPattern"/>
        </layout>
    </appender>
    <!-- Here you create additional logger for your application, ie:
    <logger name="package.xxx">
         <level value="info" />
    </logger>
    -->
    <logger name="rootLogger">
        <level value="info"/>
        <appender-ref ref="CONSOLE"/>
    </logger>
</log4j:configuration> 
```

这个配置文件的基本解释是

1.  `appender`: 你可以定义多个appender，我给你设置的那个叫`CONSOLE`a `ConsoleAppender`，意思是写在标准输出上（在tomcat环境下，`catalina.out`）。
2.  `layout`是你的日志文件布局的定义，看看[PatternLayout](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)来理解我写的意思并根据你的需要进行修改
3.  `logger`，您可以在其中为您的应用程序定义一个或多个记录器。在这里，我简单地定义了一个`rootLogger`默认[级别](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Level.html) `info`，它将使用`CONSOLE`附加程序。

将此文件放在类路径中的任何位置，您将配置好 log4j。完整教程可以参考[http://logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html)

**编辑**我再次阅读了你的问题，我建议你添加第二个记录器来记录春天的东西，比如

```
<logger name="org.springframework">
    <level value="info"/>
</logger> 
```

您只需将级别设置为您想要的 Spring 消息的细粒度。完整的教程将非常清楚地解释级别，但简而言之，级别越高，您的日志就越不冗长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:20:48.400

最简单的方法（[来源](https://mythinkpond.com/2011/07/01/tomcat-6-infamous-severe-error-listenerstart-message-how-to-debug-this-error/)）

在`src/main/webapp/WEB-INF/classes`（考虑 Maven 布局）或`WebContent/WEB-INF/classes`（考虑经典 Eclipse 布局）创建`logging.properties`具有以下内容的文件：

```
org.apache.catalina.core.ContainerBase.[Catalina].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].handlers = java.util.logging.ConsoleHandler 
```

然后重新部署并开启您想要的 BOOM`catalina.out`

# c++ - 如何正确使用 std::atomic_signal_fence()？

> ID：14581090
> 
> 赞同：15
> 
> 时间：2013-01-29T10:46:14.177
> 
> 标签：c++, multithreading, performance, c++11, atomic

cppreference.com 将此函数记录为“线程和在同一线程中执行的信号处理程序之间的栅栏”。但是我在网上没有找到例子。

我想知道以下伪代码是否正确说明了以下功能`std::atomic_signal_fence()`：

```
int n = 0;
SignalObject s;

void thread_1()
{
    s.wait();
    std::atomic_signal_fence(std::memory_order_acquire);
    assert(1 == n); // never fires ???
}

void thread_2()
{
    n = 1;
    s.signal();
}

int main()
{
    std::thread t1(thread_1);
    std::thread t2(thread_2);

    t1.join(); t2.join();
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-29T23:32:20.237

不，您的代码没有证明`atomic_signal_fence`. 当您引用 cppreference.com 时，`atomic_signal_fence`仅在信号处理程序和在同一线程上运行的其他代码之间执行同步。这意味着它*不会*在两个*不同的*线程之间执行同步。您的示例代码显示了两个不同的线程。

C++ 规范包含有关此函数的以下注释：

> *注意：*编译器优化和加载和存储的重新排序以与 with 相同的方式被禁止`atomic_thread_fence`，但 atomic_thread_fence 将插入的硬件围栏指令不会发出。
> 
> *注意：* `atomic_signal_fence`可用于指定线程执行的操作对信号处理程序可见的顺序。

这是一个正确的（如果不是激励性的）用法示例：

```
static_assert(2 == ATOMIC_INT_LOCK_FREE, "this implementation does not guarantee that std::atomic<int> is always lock free.");

std::atomic<int> a = 0;
std::atomic<int> b = 0;

extern "C" void handler(int) {
    if (1 == a.load(std::memory_order_relaxed)) {
        std::atomic_signal_fence(std::memory_order_acquire);
        assert(1 == b.load(std::memory_order_relaxed));
    }

    std::exit(0);
}

int main() {
    std::signal(SIGTERM, &handler);

    b.store(1, std::memory_order_relaxed);
    std::atomic_signal_fence(std::memory_order_release);
    a.store(1, std::memory_order_relaxed);
} 
```

如果遇到断言，则保证为真。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T04:13:31.290

在您的示例中，您要使用`std::atomic_thread_fence`（生成机器代码来执行线程同步）；不是`std::atomic_signal_fence`（它只会禁用编译器对原子变量的内存重新排序优化）。正如其他人所说，`std::atomic_signal_fence`仅适用于与原子操作相同的线程上的信号（我相信它也适用于 Windows 上的结构化/矢量异常处理程序，但不要引用我的话）。

# c# - 对象上的多次提取导致 Visual Studio 在编译时崩溃

> ID：14581092
> 
> 赞同：2
> 
> 时间：2013-01-29T10:46:16.083
> 
> 标签：c#, visual-studio-2010, nhibernate, c#-4.0, queryover

我有一个奇怪的问题让我完全难住了。

不幸的是，我有一个域对象，它有很多关系（我不能改变这个），基本上当我建立我的查询并且只是简单地添加急切的获取时，在我添加一定数量之后，构建时间会急剧增加直到最终视觉工作室只是冻结和崩溃。查询非常简单，看起来像这样：

```
var query = QueryOver<DomainObject>
.Fetch(x => x.Property).Eager
.Fetch(x => x.Property.PropertyA).Eager
.Fetch(x => x.Property.PropertyB).Eager
.Fetch(x => x.Property.PropertyC).Eager
.Fetch(x => x.Property.PropertyD.SubProp).Eager
.Fetch(x => x.Property.PropertyE).Eager
.Fetch(x => x.Property.PropertyF.SubProp).Eager
.Fetch(x => x.Property.PropertyG).Eager
.Fetch(x => x.Property.PropertyH.SubProp).Eager
.Fetch(x => x.Property.PropertyI).Eager
.Fetch(x => x.Property.PropertyJ).Eager
.Fetch(x => x.Property.PropertyK).Eager
.Fetch(x => x.Property.PropertyL).Eager
.Fetch(x => x.Property.PropertyM).Eager
.Fetch(x => x.Property.PropertyN).Eager
.Fetch(x => x.Property.PropertyO).Eager
.Fetch(x => x.Property.PropertyP).Eager
.Where(x => x.Id == 5);
//My fingers got tired there are in reality 33 fetches, 29 involve x.Property

query.Clone()
.Fetch(x => x.Property.PropertyN.ListProperty).Eager
.Future();

query.Clone()
.Fetch(x => x.PropertyO.ListProperty).Eager
.Future();

query.Clone()
.Fetch(x => x.PropertyD.ListProperty).Eager
.Future();

query.Clone()
.Fetch(x => x.PropertyH.ListProperty).Eager
.Future();

var results = query.Future().ToList(); 
```

这基本上是我们正在查看的查询的伪查询，如果我注释掉提取部分，它构建得很好（仍然比其他项目慢），因为我一次取消注释一个提取，构建时间增加，直到最终 Visual Studio 锁定并最终永远不会完成建筑。

有没有人对此有任何线索？我曾尝试在互联网上搜索，但完全找不到任何相关信息，目前延迟加载似乎是我唯一的选择。但是，我真的很想回答这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:14:00.280

因此，如果问题在于编译器对方法链的大小有限制，那么解决方案（理论上）会很简单：

```
var query = QueryOver.Of<DomainObject>();
query = query.Fetch(x => x.Property).Eager;
query = query.Fetch(x => x.Property.PropertyA).Eager;
query = query.Fetch(x => x.Property.PropertyB).Eager;
query = query.Fetch(x => x.Property.PropertyC).Eager;
// etc 
```

# c# - 货币格式 - Windows 应用商店应用

> ID：14581093
> 
> 赞同：4
> 
> 时间：2013-01-29T10:46:16.893
> 
> 标签：c#, .net, windows-runtime, windows-store-apps

在以前的 .Net 生活中，我为当前语言格式化货币（任何货币）的方式是执行以下操作：

```
public string FormatCurrencyValue(string symbol, decimal val) 
{
  var format = (NumberFormatInfo)CultureInfo.CurrentUICulture.NumberFormat.Clone();
  //overwrite the currency symbol with the one I want to display
  format.CurrencySymbol = symbol;
  //pass the format to ToString();
  return val.ToString("{0:C2}", format);
} 
```

这将返回货币值，没有任何小数部分，为给定的货币符号格式化，为当前的文化调整 - 例如`£50.00`for `en-GB`but `50,00£`for `fr-FR`。

在 Windows Store 下运行的相同代码会生成`{50:C}`.

查看（相当糟糕的）WinRT 文档，我们确实有[CurrencyFormatter](http://msdn.microsoft.com/en-us/library/windows/apps/br206883.aspx)类 - 但它只是在尝试使用`"£"`作为参数触发构造函数并获得`ArgumentException`（WinRT 文档非常特殊 - 它几乎没有关于异常的信息）之后我意识到它需要一个 ISO 货币符号（公平地说，参数名称是`currencyCode`，但即便如此）。

现在 - 我也可以得到其中的一个，但是`CurrencyFormatter`还有另一个问题使它不适合货币格式化 - 你只能 format`double`和types `long`-`ulong`没有`decimal`重载 - 在某些情况下会导致一些有趣的值错误。

那么如何在 WinRT.net 中动态格式化货币呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:46:16.893

我发现你仍然可以在类中使用旧式格式字符串`NumberFormatInfo`——只是，莫名其妙地，当你使用`ToString`. 如果您改用`String.Format`它，那么它可以工作。

所以我们可以将我的问题中的代码重写为：

```
public string FormatCurrencyValue(string symbol, decimal val) 
{
  var format = (NumberFormatInfo)CultureInfo.CurrentUICulture.NumberFormat.Clone();
  //overwrite the currency symbol with the one I want to display
  format.CurrencySymbol = symbol;
  //pass the format to String.Format
  return string.Format(format, "{0:C2}", val);
} 
```

这给出了预期的结果。

# c# - 替代传递 IOC 容器

> ID：14581096
> 
> 赞同：4
> 
> 时间：2013-01-29T10:46:20.700
> 
> 标签：c#, .net, design-patterns, inversion-of-control, ioc-container

我有以下具有几个依赖项的基类：

```
public abstract class ViewModel
{
    private readonly ILoggingService loggingService;

    public ViewModel(
        ILoggingService loggingService,
        ...)
    {
        this.loggingService = loggingService;
        ...
    }
} 
```

在我的派生类中，我不想重复这个基类构造函数中的所有参数，所以我这样做了：

```
public abstract class ViewModel
{
    private readonly IUnityContainer container;
    private ILoggingService loggingService;
    ...

    public ViewModel(IUnityContainer container)
    {
        this.container = container;
    }

    public ILoggingService LoggingService
    {
        get
        {
            if (this.loggingService == null)
            {
                this.loggingService = this.container.Resolve<IUnityContainer>();
            }

            return this.loggingService;
        }
    }

    ...
} 
```

现在我的派生类只需要将一件事传递给我的基类构造函数。我也有一个很好的效果，即仅在需要时才解决我的依赖关系。

但是，从那以后，我了解到传递 IOC 容器是一个坏主意。最好的替代设计模式是什么，请记住传入的许多服务已在我的 IOC 容器中注册为单例？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T11:18:53.657

正如您所说，您应该避免传递容器。这把它变成了一个“持有的袋子”，你不再能看到你的依赖是什么，你也不能轻易地看到袋子里有什么。

相反，如果你发现你的构造函数接受了太多参数，这本身就是一种味道。在这种情况下，你会经常发现你的类试图做太多的事情（它违反了单一职责原则）。

查看您的参数列表，看看您是否可以将参数分组为更小的组。例如，如果您的构造函数采用`IEmailSender`,`IEventLog`和`ILoggingService`，那么您真正需要的是`INotificationService`聚合这三个依赖项的一个。

当然，有时您*确实*有一个具有这么多依赖项的构造函数。在这种情况下，该类可能只是用于将这些东西收集在一起并将它们连接起来。如果是这种情况，班级可能应该避免做任何实际工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T12:09:38.287

在构造函数中传递所有依赖项是最干净的方法。

我没有看到在派生类中传递参数的问题。避免打字是错误的动机，并且有像 Resharper 这样的工具可以帮助您生成这些构造函数。

如果您有很多依赖关系，则表明该类违反了单一责任模式。

在许多情况下，支持组合而不是继承也是一个好主意。这也有助于将类拆分为不违反 SRP 的较小部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T10:53:45.863

只需通过容器创建派生类并将它们注入您需要的地方。

**错误的例子**-`Foo`担心`Bar`它需要实例化的依赖关系`Bar`。

```
class Foo {
    SomeDependency x;
    public Bar(SomeDependency x) {
        this.x = x;
    }
    public doSomething() {
        Bar bar = new Bar(x);
        bar.doSomething();
    }

}

class Bar {
    SomeDependency x;
    public Bar(SomeDependency x) {
        this.x = x;
    }
    public void doSomething() {
        // ...
    }
} 
```

**正确的例子**-`Foo`不关心如何`Bar`创建。`Bar`直接从容器中获取依赖项。

```
class Foo {
    SomeDependency x;
    Bar bar;

    public Bar(SomeDependency x, Bar bar) {
        this.x = x;
        this.bar = bar;
    }
    public doSomething() {
        bar.doSomething();
    }

}

class Bar {
    SomeDependency x;
    public Bar(SomeDependency x) {
        this.x = x;
    }
    public void doSomething() {
        // ...
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T11:12:29.177

如果您希望在一系列类中保持一致的行为，[AOP可能是一个解决方案。](http://en.wikipedia.org/wiki/Aspect_oriented)这是使用 PostSharp 进行日志记录的示例：http: [//www.sharpcrafters.com/solutions/logging](http://www.sharpcrafters.com/solutions/logging)

但是，对于临时日志记录，这可能并不完全适合您的需求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T11:13:27.120

当您有许多级别的继承时，这可能会很麻烦，但是明确告诉类具有哪些依赖项（通过构造函数）是一件好事。另一种方法是[Annotating Objects for Property (Setter) Injection](http://msdn.microsoft.com/en-us/library/ff649447.aspx)，但我建议您仅将其用于可选依赖项，即记录器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-29T11:21:11.643

避免传递容器。这是服务地点。您必须反转控制，以便创建 ViewModel 的任何内容都为您提供相关的日志记录服务。

马克·西曼（Mark Seeman）在他的装饰书中很好地做到了这一点。正如有人已经强调的那样，AOP 是一个整洁的替代方案。

你的代码应该变成：

```
public ViewModel(ILoggingService logger)
{
    loggingService= logger;
}

public ILoggingService LoggingService
{
    get
    {
        return this.loggingService;
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-29T11:24:57.853

[CommonServiceLocator](http://commonservicelocator.codeplex.com/)可以为您提供一种通过静态调用解析资源的方法。

Unity docs [Using Injection Attributes](http://msdn.microsoft.com/en-us/library/ff660887%28v=pandp.20%29.aspx)显示了在构造函数注入不可行的情况下可供选择的其他方法。

*   [为属性（Setter）注入注释对象](http://msdn.microsoft.com/en-us/library/ff660903%28v=pandp.20%29.aspx)
*   [为方法调用注入注解对象](http://msdn.microsoft.com/en-us/library/ff660873%28v=pandp.20%29.aspx)

当我有一个公共基类时，我喜欢使用属性设置器注入进行日志记录：

```
abstract class Widget
{
   [Dependency]
   public ILogger { set; set; } // Set it and forget it!
} 
```

我不能说我曾经真正使用过方法调用注入。

您不应该仅仅因为您不能设计所有东西以使所有依赖项始终通过构造函数进入...在一个完美的世界中，您不应该觉得自己做错了什么，但在实践中，有选择是很好的.. .

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-13T09:01:18.127

我最终使用工厂模式创建了下面的接口和类，以减少添加到构造函数的参数数量：

```
public interface IInfrastructureFactory
{
    ILoggingService LoggingService { get; }
    // ... Other Common Services Omitted ...
}

public class InfrastructureFactory : IInfrastructureFactory
{
    private readonly ILoggingService loggingService;
    // ... Other Common Services Omitted ...

    public InfrastructureFactory(
        ILoggingService loggingService,
        // ... Other Common Services Omitted ...
        )
    {
        this.loggingService = loggingService;
        // ... Other Common Services Omitted ...
    }

    public ILoggingService LoggingService
    {
        get { return this.loggingService; }
    }

    // ... Other Common Services Omitted ...
} 
```

在我的 IOC 容器中，我注册了一次 IInfrastructureFactory。在我的视图模型中，我只有一个依赖项，并且创建一个新的视图模型更快更简单。

```
public abstract class ViewModel
{
    private readonly IInfrastructureFactory infrastructureFactory;

    public ViewModel(IInfrastructureFactory infrastructureFactory)
    {
        this.infrastructureFactory = infrastructureFactory;
    }

    public ILoggingService LoggingService
    {
        get { return this.infrastructureFactory.LoggingService; }
    }

    // ... Other Common Services Omitted ...
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-01-29T10:59:58.207

你应该坚持你的第一个模式。如果您厌倦了添加这些构造函数变量，那么您有太多了。考虑把你的班级分成更小的部分。这种模式非常强大，因为它可以通过懒惰进行自我调节:)

如果你有一个全局类型依赖，你可能想在任何地方使用（日志是一个完美的例子）......只需使用单例模式......（注意我还假设容器也是使用单例模式创建的）。

```
public static LoggingService
{
    private static ILoggingService _current;

    public static ILoggingService Current
    {
        get 
        {
            if(_current == null) { _current = Container.Current.Resolve<ILoggingService>(); }
            return _current;  
        }
    }
} 
```

然后像使用它...

```
LoggingService.Current.Log(...); 
```

这样你就不必将它注入到所有东西中。

您通常应该避免这种模式，除非它在很多模块中使用......

# regex - 正则表达式替换文件

> ID：14581098
> 
> 赞同：0
> 
> 时间：2013-01-29T10:46:30.400
> 
> 标签：regex, perl, file

我正在尝试替换 Perl 文件中的一组特定字符，但它似乎不起作用，这是我的代码。

```
my $file = shift;
open(FILE, "$file") or die "File not found";
while (<FILE>){
   $data .=$_
}
$data =~ s/[^A-CEGHJ-PR-TW-Z]{1}[A-CEGHJ-NPR-TW-Z]{1}\s?[0-9]{2}\s?[0-9]{2}\s[0-9]{2}\s?[A-DEM]{0,1}$/XX012345X/g; 
```

我知道我的模式匹配适用于查找字符集，我不完全确定替换是否有效。然而，我主要关心的是 Perl 代码。该文件在我运行后保持不变。

示例文件。

```
AB123456C Ab12345678 DG657465 GH123456FG 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:00:53.673

代码不会更改文件，因为您没有告诉它这样做。您打开文件是为了读取，而不是写入，而且您不打印任何内容。

如果您想快速处理此问题，只需将您的正则表达式替换放在一个文件中并将其用作源文件。像这样：

regex.pl 的内容：

```
s/[^A-CEGHJ-PR-TW-Z]{1}[A-CEGHJ-NPR-TW-Z]{1}\s?[0-9]{2}\s?[0-9]{2}\s[0-9]{2}\s?[A-DEM]{0,1}$/XX012345X/g; 
```

单线：

```
perl -p regex.pl inputfile.txt > output.txt 
```

这样您就可以快速检查输出。您也可以通过管道传送到寻呼机命令或根本不传送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:59:34.243

您正在打开的文件是只读的。因此，您需要打开一个临时的第二个文件（[File::Temp](http://search.cpan.org/perldoc?File::Temp)），在其中写入 $data 变量，关闭它，删除第一个文件（[unlink](http://perldoc.perl.org/functions/unlink.html)）[并将临时文件重命名](http://perldoc.perl.org/functions/rename.html)为所需的名称。

这个[SO question](https://stackoverflow.com/questions/2278527/how-do-i-replace-lines-in-the-middle-of-a-file-with-perl)可能会有所帮助。

题外话：请使用现代 Perl 方法来处理您的文件。例如：

```
open my $fh, "<", $filename or die "Cannot open file $filename" 
```

另请参阅此[SO 问题](https://stackoverflow.com/questions/5906832/different-ways-of-opening-file-in-perl)。避免使用包全局类型glob 文件句柄。

# java - 在 Mac OS X 上运行 .jar 文件的脚本

> ID：14581099
> 
> 赞同：8
> 
> 时间：2013-01-29T10:46:39.263
> 
> 标签：java, macos, batch-file

我想在 Mac OS X 上运行批处理文件（类似于 Windows）来运行一个 jar 文件，经过搜索我发现它运行批处理脚本。

我没有从我可以寻求帮助的地方获得正确的链接。我怎样才能创建这个？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-29T10:50:11.330

您可以创建一个 shell 脚本并使用终端运行它。

例如：

```
#!/bin/sh
java -jar path/to/jar/file.jar 
```

要运行它，您需要设置正确的用户权限， `chmod u+x script-name` 然后运行 `./script-name`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T10:49:19.620

您必须在 MAC OS 上创建一个`shell script`才能获得与 Windows 上的批处理文件相同的结果。

A`shell script`可能看起来像这样：

```
#!/bin/bash
/opt/java/jre-7x/bin/java -jar /your/path/to/jar-file 
```

请注意，java 可执行文件的路径取决于您的 java 安装目录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T10:49:27.790

您不能运行批处理文件，但可以运行在基于 unix 的系统上等效[的 shell 脚本。](https://stackoverflow.com/questions/525212/how-to-run-unix-shell-script-from-java-code)

与批处理文件一样，shell 脚本也是特定于平台的，但应该适用于基于 Unix 和 Linux 的系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T10:51:49.520

批处理文件仅适用于 Windows。但是，将该批处理文件转换为 unix shell 脚本应该很容易。[您可以在https://developer.apple.com/library/mac/#documentation/opensource/conceptual/shellscripting/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/opensource/conceptual/shellscripting/Introduction/Introduction.html)上找到有关如何使用 shell 脚本的指南

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-29T10:47:44.833

你不能，因为它的语言特定。

您需要编写 shell 脚本（或手动将 windows 命令与 unix/mac os x 命令匹配）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-29T10:52:19.740

[适用于 Mac OS X 的葡萄酒](http://winebottler.kronenberg.org/)

这将在 Mac OS X 上运行 windows 程序，试试这个并告诉我。

# android - 使用带有 asynctask 的基本适配器来显示列表视图

> ID：14581103
> 
> 赞同：3
> 
> 时间：2013-01-29T10:47:00.730
> 
> 标签：android, android-listview, android-asynctask, baseadapter

我正在从肥皂服务读取数据并希望将它们显示在列表中。为此，我创建了一个基本适配器。并尝试在 asynctask 中使用它。但这给出了一些我没有解决方案的错误。根据错误，我认为异步任务中的 postExecute 存在一些问题，但不知道如何解决。一些帮助会非常棒。

这是一些代码。

## 班上

```
public class PatientBasicInfo {
private String FirstName;
private String LastName;
private String Id;
private String Gender;
private String DateOfBirth;

public PatientBasicInfo(String firstname,String lastname,String id){
    this.FirstName=firstname;
    this.LastName=lastname;
    this.Id=id;
}

public String getFirstName(){
    return this.FirstName;
}
public void setFirstName(String firstname){
    this.FirstName=firstname;
}

public String getLastName(){
    return this.LastName;
}
public void setLastName(String lastname){
    this.LastName=lastname;
}
public String getPatientId(){
    return this.Id;
}
public void setPatientId(String Id){
    this.Id=Id;
}
public String getGender(){
    return this.Gender;
}
public void setGender(String gender){
    this.Gender=gender;
}
public String getDateOfBirth(){
    return this.DateOfBirth;
}
public void setDateOfBirth(String dob){
    this.DateOfBirth=dob;
}

@Override
public String toString(){
    return FirstName+" "+LastName;
}

} 
```

## 基础适配器

```
public class PatientListBaseAdapter extends BaseAdapter{

private static ArrayList<PatientBasicInfo> patientArrayList;

private LayoutInflater mInflater;
private Context context;

public PatientListBaseAdapter(Context ctx,ArrayList<PatientBasicInfo> result) {
    // TODO Auto-generated constructor stub
    patientArrayList=result;
    mInflater = LayoutInflater.from(context);
    this.context=ctx;
}

public int getCount() {
    // TODO Auto-generated method stub
    return patientArrayList.size();
}

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return patientArrayList.get(position);
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    ViewHolder holder;
    final String patientId=patientArrayList.get(position).getPatientId();
    final String patientFirstName=patientArrayList.get(position).getFirstName();
    final String patientLastName=patientArrayList.get(position).getLastName();
    mInflater = (LayoutInflater)
            context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
    if (convertView == null) {
           convertView = mInflater.inflate(R.layout.custom_rowview, null);
           holder = new ViewHolder();
           holder.txtFirstName = (TextView) convertView.findViewById(R.id.patientfirstname);
           holder.txtLastName = (TextView) convertView.findViewById(R.id.patientlastname);
           holder.txtID=(TextView)convertView.findViewById(R.id.patientid);

           convertView.setTag(holder);
          } else {
              holder = (ViewHolder) convertView.getTag();
          }

    holder.txtFirstName.setText(patientFirstName);
    holder.txtLastName.setText(patientLastName);

    holder.txtID.setText(patientId);
    return convertView;
}
private class ViewHolder {
      TextView txtFirstName;      
      TextView txtID;
      TextView txtLastName; 

     }} 
```

## 活动

```
public class PatientListActivity extends Activity{

private static final String SOAP_ACTION = "";
private static final String NAMESPACE = "";
private static final String METHOD_NAME = "getPatientList";
private static final String URL = "";

TextView tv;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.custom_listview);
    Intent intent = getIntent();

    String nurseId  = intent.getStringExtra("nurseid");

    new CallgetPatientList().execute(nurseId);
}

class CallgetPatientList extends AsyncTask<String,Void,ArrayList<PatientBasicInfo>>{

    @Override
    protected ArrayList<PatientBasicInfo> doInBackground(String... params) {
        // TODO Auto-generated method stub
        Log.d("param", params[0].toString());
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

        Credetials cred=new Credetials("username","password");
        PropertyInfo credPropertyinfo=new PropertyInfo();
        credPropertyinfo.setName("credetials");
        credPropertyinfo.setValue(cred);
        credPropertyinfo.setType(cred.getClass());

        request.addProperty(credPropertyinfo);
        request.addProperty("nurseId", params[0].toString());

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

     try{

            androidHttpTransport.call(SOAP_ACTION, envelope);

            SoapObject response = (SoapObject) envelope.bodyIn;

            ArrayList<PatientBasicInfo> patientList=new ArrayList<PatientBasicInfo>();

            for(int i= 0; i< response.getPropertyCount(); i++){
                SoapObject object = (SoapObject)response.getProperty(i);
                String firstname=object.getProperty("firstName").toString();
                String lastname=object.getProperty("lastName").toString();

                String id=object.getProperty("id").toString();

               PatientBasicInfo aa=new PatientBasicInfo(firstname,lastname,id);                
               patientList.add(aa);
            }

            Log.d("patientCount", Integer.toString(patientList.size()));
            return patientList;

        }catch(Exception e){
            //return e.getMessage();
            return null;
        }

    }
    @Override
    protected void onPostExecute(ArrayList<PatientBasicInfo> result){
        //super.onPostExecute(result);
        Log.d("resultcount", Integer.toString(result.size()));
        final ListView lv = (ListView) findViewById(R.id.ListView01);
        PatientListBaseAdapter adapter=new PatientListBaseAdapter(getApplicationContext(),result);
        lv.setAdapter(adapter);
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_patient_list, menu);
    //return true;

    return true;

}
} 
```

## 错误

![在此处输入图像描述](../Images/af21ad9a9830fe16733772237ba4b442.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:19:17.573

目前您正在传递 NULL 上下文，`LayoutInflater.from`因此使用更改 `PatientListBaseAdapter`构造函数代码：

```
public PatientListBaseAdapter(Context ctx,ArrayList<PatientBasicInfo> result) {
    // TODO Auto-generated constructor stub
    patientArrayList=result;
    this.context=ctx;
    mInflater = LayoutInflater.from(this.context);

} 
```

# java - ImageIO.read -> 读取 PNG 图像数据时出错

> ID：14581104
> 
> 赞同：3
> 
> 时间：2013-01-29T10:47:12.710
> 
> 标签：java, exception, zip, png, javax.imageio

我得到一个`InputStream`输入，我想读这个`InputStream`。

我创建一个

```
BufferedImage image = null; 
```

我读到`ImageIO`：

```
read image = ImageIO.read(input); 
```

此代码适用于 JPEG 和 JPG 文件，但对于 PNG 文件，我有此错误：

```
javax.imageio.IIOException: Error reading PNG image data    at
com.sun.imageio.plugins.png.PNGImageReader.readImage(PNGImageReader.java:1308)
    at com.sun.imageio.plugins.png.PNGImageReader.read(PNGImageReader.java:1577)
    at javax.imageio.ImageIO.read(ImageIO.java:1448)    at
javax.imageio.ImageIO.read(ImageIO.java:1352)   at
org.projectsforge.swap.proxy.simulation.DichromacyImageSimulation.handle(DichromacyImageSimulation.java:64)
    at org.projectsforge.swap.proxy.proxy.ProxyServlet$1.execute(ProxyServlet.java:150)
    at org.projectsforge.swap.proxy.proxy.ProxyServlet$1.execute(ProxyServlet.java:1)
    at org.projectsforge.swap.core.handlers.HandlerExecutorManager.execute(HandlerExecutorManager.java:72)
    at org.projectsforge.swap.core.handlers.HandlerContext$1.run(HandlerContext.java:175)
Caused by: java.util.zip.ZipException: invalid distance too far back
    at
java.util.zip.InflaterInputStream.read(InflaterInputStream.java:164)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)   
at java.io.BufferedInputStream.read1(BufferedInputStream.java:275)  
at java.io.BufferedInputStream.read(BufferedInputStream.java:334)   
at java.io.DataInputStream.readFully(DataInputStream.java:195)  
at com.sun.imageio.plugins.png.PNGImageReader.decodePass(PNGImageReader.java:1092)
at com.sun.imageio.plugins.png.PNGImageReader.decodeImage(PNGImageReader.java:1207)
at com.sun.imageio.plugins.png.PNGImageReader.readImage(PNGImageReader.java:1301)
    ... 8 more 
```

我不明白这个错误，特别是因为这个错误并不是每次都发生......

# database - Graceful Riak 强制替换

> ID：14581106
> 
> 赞同：2
> 
> 时间：2013-01-29T10:47:27.493
> 
> 标签：database, nosql, riak

这是一遍又一遍地阅读文档并没有为我澄清的东西。

一个。我有一个不健康、无法访问的节点——我们称之为节点 A——我想将其从 Riak 集群中移除并替换为一个新的、健康的节点 B。

湾。我想这样做，同时尽量减少集群流量，以使用节点 A 应该拥有的数据“重新填充”节点 B。

C。我假设我可以通过启动节点 B 来做到这一点，即使是从节点 A 数据的一个**小时前备份**

d。但是，由于节点的名称发生了变化（从节点 A 到节点 B），我必须首先将`join`节点 B 作为集群上的一个全新节点，然后使用`cluster force-replace`节点 B 替换节点 A。

我的问题是 - 这会不会处理结果：

一个。节点 B 上的现有备份数据受到尊重，只有最后一小时的空白被填补`Read Repair`

湾。或者，节点 B 上的备份数据被完全忽略（因为备份是针对“节点 A”而正在运行的节点是“节点 B”）并且节点 B 被其他节点的流量刷新，试图用**来自的数据填充它划伤**。

也许我只是没有阅读正确的内容或花费太多时间思考这个问题。让我知道这将如何工作。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:25:39.253

开发：

所做的是`riak-admin cluster force-replace`将分区的所有权重新分配给加入节点。您将在 (A) 结束：将使用现有数据，剩余时间将通过读取修复填充。

管道中有一些文档更改应该使此过程更加清晰。很抱歉您有任何困惑。

希望这会有所帮助，
查理·沃伊塞尔
cvoiselle@basho.com

# .net - K2.net等不同的业务应用工具及其优势？

> ID：14581107
> 
> 赞同：1
> 
> 时间：2013-01-29T10:47:30.213
> 
> 标签：.net, playframework-2.0, k2

我们的团队正在考虑将`K2.net`工具用于业务应用程序。

我已经浏览了该网站及其优势。

但是，我想了解更多关于类似产品和`K2`.

请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:03:32.907

对于类似产品，您可以检查以下内容：

*   [业务流](http://www.handysoft.com)
*   [宁特克斯](http://www.nintex.com)

几年前（大约 2008 年），我们使用 Bizflow 作为我们的主要工作流引擎。出于某种原因，我们的管理层决定进行转换。替代品是 K2 和 Nintex。我们最终使用了 K2 blackpearl，以下是与其他产品相比的一些优势：

1.  与 Bizflow 相比，K2 提供了与 Microsoft 产品更好的集成。我们的两个杀手级功能是：集成的 Windows 身份验证和与 Visual Studio 的集成。
2.  K2 不需要我们使用 Sharepoint。AFAIK，Nintex 确实如此。而且，由于我们的 BPM 应用程序不使用 Sharepoint，Nintex 绝对不是我们的产品。

PS：我不隶属于 K2 或任何其他产品

# javascript - 在 JavaScript 中使用字典中的参数

> ID：14581108
> 
> 赞同：3
> 
> 时间：2013-01-29T10:47:33.273
> 
> 标签：javascript, jquery, string, dictionary, parameters

> **可能重复：**
> [JavaScript 等价于 printf/string.format](https://stackoverflow.com/questions/610406/javascript-equivalent-to-printf-string-format)

我正在使用字典来保存网站中使用的所有文本，例如

```
var dict = {
  "text1": "this is my text"
}; 
```

使用 javascript(jQuery) 调用文本，

```
$("#firstp").html(dict.text1); 
```

并提出一个问题，我的一些文本不是静态的。我需要在我的文本中写入一些参数。

> 您有 100 条消息

```
$("#firstp").html(dict.sometext+ messagecount + dict.sometext); 
```

这是noobish

我想要类似的东西

```
var dict = {
  "text1": "you have %s messages"
}; 
```

如何将“messagecount”写入 %s 所在的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:56:21.430

没有任何库，您可以创建自己的简单字符串格式函数：

```
function format(str) {
    var args = [].slice.call(arguments, 1);
    return str.replace(/{(\d+)}/g, function(m, i) {
        return args[i] !== undefined ? args[i] : m;
    });
}

format("you have {0} messages", 10);
// >> "you have 10 messages" 
```

或通过`String`对象：

```
String.prototype.format = function() {
    var args = [].slice.call(arguments);
    return this.replace(/{(\d+)}/g, function(m, i) {
        return args[i] !== undefined ? args[i] : m;
    });
};

"you have {0} messages in {1} posts".format(10, 5);
// >> "you have 10 messages in 5 posts" 
```

# android - 用手电筒拍照片？

> ID：14581109
> 
> 赞同：1
> 
> 时间：2013-01-29T10:47:36.167
> 
> 标签：android, actionscript-3, apache-flex, flex4.5

*   Android下如何用手电筒拍照？

*/ Flex 4.6 和 Flex 4.9 /*

```
 camera      = Camera.getCamera( cameraIndex );  

            cameraWidth  = 1280;//camera.width; 
            cameraHeight = 720;//camera.height;

            videoHolder = new UIComponent();
            video       = new Video( cameraWidth, cameraHeight );

            trace( cameraWidth, cameraHeight );

            camera.setMode( cameraWidth, cameraHeight, 24 );

            video.attachCamera( camera );
            videoHolder.addChild( video );
            cameraGroup.addElement( videoHolder ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:22:10.827

在纯 ActionScript 中无法做到这一点，但是您应该能够通过本机扩展（名为 ANE）来做到这一点，如下所述：http: [//www.adobe.com/devnet/air/native-extensions- for-air.html](http://www.adobe.com/devnet/air/native-extensions-for-air.html)

我没有发现任何现有的 ANE 可以满足您的需求，因此您必须自己动手。

# mongodb - MongoDB 2.2 中的 MongoDB 聚合框架中的 $group 是多线程的吗？

> ID：14581110
> 
> 赞同：1
> 
> 时间：2013-01-29T10:47:36.407
> 
> 标签：mongodb, performance, aggregation-framework

我想知道 MongoDB 2.2 聚合框架中的 $group 函数是否是多线程的。

对于这个问题，我做了一些小测试。我使用的数据集用于存储大约 400 万封电子邮件，每封电子邮件的格式如下：

```
shard1:PRIMARY> db.spams.findOne()
{
"IP" : "113.162.134.245",
"_id" : ObjectId("4ebe8c84466e8b1a56000028"),
"attach" : [ ],
"bot" : "Lethic",
"charset" : "iso-8859-1",
"city" : "",
"classA" : "113",
"classB" : "113.162",
"classC" : "113.162.134",
"content_type" : [ ],
"country" : "Vietnam",
"cte" : "7bit",
"date" : ISODate("2011-11-11T00:07:12Z"),
"day" : "2011-11-11",
"from_domain_a" : "domain157939.com",
"geo" : "VN",
"host" : "",
"lang" : "unknown",
"lat" : 16,
"long" : 106,
"sequenceID" : "user648",
"size" : 1060,
"smtp-mail-from_a" : "barriefrancisco@domain157939.com",
"smtp-rcpt-to_a" : "jaunn@domain555065.com",
"subject_ta" : "nxsy8",
"uri" : [ ],
"uri_domain" : [ ],
"x_p0f_detail" : "2000 SP4, XP SP1+",
"x_p0f_genre" : "Windows",
"x_p0f_signature" : "65535:105:1:48:M1402,N,N,S:."
} 
```

我设计了一个查询来查找一天、一周、一个月、半年和一年内的所有电子邮件。然后按“bot”字段对结果进行分组。

我使用聚合框架和 java 驱动来做到这一点。Java代码如下：

```
public class RangeQuery {
final private String mongoUrl = "172.16.10.61:30000";
final private String databaseName = "test";
final private String collecName = "spams";
private DBCollection collection = null;
private DB db = null;

    public void init(){
    Mongo mongo = null;
    try {
        mongo = new Mongo(new DBAddress(mongoUrl));
    } catch (MongoException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    db = mongo.getDB(databaseName);
    db.requestStart();
    collection = db.getCollection(collecName);
}

    public void queryRange_GroupBot(boolean printResult){
    DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ss'Z'");
    String toDateStr [] = new String[5] ;
    toDateStr[0] = "2011-01-02T00:00:00Z";
    toDateStr[1] = "2011-01-07T00:00:00Z";
    toDateStr[2] = "2011-02-01T00:00:00Z";
    toDateStr[3] = "2011-06-01T00:00:00Z";
    toDateStr[4] = "2012-01-01T00:00:00Z";

    String toPrint [] = new String[5];
    toPrint[0] = "Within One day";
    toPrint[1] = "Within One week";
    toPrint[2] = "Within One month";
    toPrint[3] = "Within half year";
    toPrint[4] = "Within One year";

    try {
        System.out.println("\n------Query Time Range Group by Bot------");
        for(int i = 0;i < 5;i++){
            System.out.println("    ---" + toPrint[i] + "---");
            Date fromDate = formatter.parse("2011-01-01T00:00:00Z");
            Date toDate = formatter.parse(toDateStr[i]);

            DBObject groupFields = new BasicDBObject( "_id", "$bot");
            groupFields.put("sum", new BasicDBObject( "$sum", 1));
            DBObject group = new BasicDBObject("$group", groupFields);

            DBObject cond1 = new BasicDBObject();
            cond1.put("date", new BasicDBObject("$gte", fromDate));
            DBObject cond2 = new BasicDBObject();
            cond2.put("date", new BasicDBObject("$lte", toDate));
            DBObject match1 = new BasicDBObject("$match", cond1 );
            DBObject match2 = new BasicDBObject("$match", cond2 );

            for(int j = 0;j < 1;j++){
                Long runBefore = Calendar.getInstance().getTime().getTime();
                AggregationOutput aggOutput = collection.aggregate(match1, match2, group);
                Long runAfter = Calendar.getInstance().getTime().getTime();
                if(printResult){
                    System.out.println(aggOutput.getCommandResult());
                }
                System.out.println("[Query Range + Group by Bot]: " + (runAfter - runBefore) + " ms.");
            }
        }
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

    public static void main(String[] args){
    RangeQuery rangQuery = new RangeQuery();
    rangQuery.init();
    rangQuery.queryRange_GroupBot_MapReduce(true);
  }
  } 
```

结果如下所示：

```
 Within One day(2011-01-01 -> 2011-01-02)      54173 ms
  Within One week(2011-01-01 -> 2011-01-07)     54277 ms
  Within One month(2011-01-01 -> 2011-02-01)    54387 ms
  Within half year(2011-01-01 -> 2011-06-01)    53035 ms
  Within One year(2011-01-01 -> 2012-01-01)     54116 ms 
```

令我惊讶的是，通常一年以上的组应该比一天慢，因为它包含更多记录。（数据集中的记录随时间均匀分布）

如果我只使用 db.spams.find({"date":{$gt:ISODate(xxx), {$lt: xxx}}}).count，我可以看到查询一年比查询一天花费更长的时间。

但是为什么当我使用 $group 时，当我扩大时间范围时，这个函数需要几乎相同的时间？

我知道聚合框架是用 C++ 编写的，我使用的是 mongodb 2.2，聚合框架是否使用了多线程或其他一些方法来提高性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:05:25.800

根据这个讨论：[https ://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/xCSww5spXPc](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/xCSww5spXPc)

每个管道当前都是单线程的，但您可以并行运行不同的管道。因此，如果您有 100 个连接，每个连接都运行一个聚合命令，那么这些连接可能会并行运行 - 但每个命令将在 1 个线程上运行。

# image - AsciiDoc -> Docbook 不显示图像

> ID：14581113
> 
> 赞同：2
> 
> 时间：2013-01-29T10:47:50.893
> 
> 标签：image, docbook, asciidoc

我在处理 AsciiDoc 文档时遇到了一些问题。它使用图像，但图像仅在 HTML 版本中显示，而不在 PDF 版本中显示。

我有这个简短的文件：

```
Test book
=========
Robert Larsen
:doctype: book

Test chapter
------------
image:test_image.jpg[Test image] 
```

这在 HTML 中看起来不错。但是，当我先转换为 Docbook，然后再转换为 PDF（使用 db2pdf）时，则只显示替代文本。

Docbook 版本是：

```
<book lang="en">
<bookinfo>
    <title>Test book</title>
    <author>
        <firstname>Robert</firstname>
        <surname>Larsen</surname>
    </author>
    <authorinitials>RL</authorinitials>
</bookinfo>
<chapter id="_test_chapter">
<title>Test chapter</title>
<simpara><inlinemediaobject>
  <imageobject>
  <imagedata fileref="test_image.jpg"/>
  </imageobject>
  <textobject><phrase>Test image</phrase></textobject>
</inlinemediaobject></simpara>
</chapter>
</book> 
```

我也尝试过其他图像格式，所以不是这样。我使用 Ubuntu 12.10

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:27:37.270

I can't explain why the image is missing (perphaps there is something wrong with the processing of `inlinemediaobject`). In any case, **db2pdf** is part of an old toolchain (based on DSSSL stylesheets) that is hardly maintained anymore.

It will work if you use the more modern DocBook-XSL stylesheets together with FOP. See this Ubuntu documentation: [https://help.ubuntu.com/community/DocBook#DocBook_to_PDF](https://help.ubuntu.com/community/DocBook#DocBook_to_PDF).

# php - SQL 匹配逗号分隔的字符串

> ID：14581115
> 
> 赞同：-1
> 
> 时间：2013-01-29T10:47:51.493
> 
> 标签：php, sql, mysqli

我想知道如何在 PHP/MySQL 中执行以下选择查询。

调用 MySQL 字段`'types'`并包含如下值：`Provincie\,Gebied\,Water\`或`Water\,Plaats\`

然后在 PHP 中，我收到一个格式如下的字符串：`$types = 'Plaats, Provincie, Gebied, Water'`

我想做的是选择至少包含 PHP 数组中的一个值的每一行。

关于最好的方法的任何想法？

**编辑** 我不能将另一个表添加到数据库中，尽管这将是一个不错的选择。

不返回任何列的是：

```
$types = explode(',', $types);
    $typesSQL = '';
    foreach($types as $type){
        $type = str_replace(' ', '', $type);
        $typesSQL .= "FIND_IN_SET('$type', types) OR ";
    }
    $typesSQL = substr($typesSQL, 0, -3);
SELECT * FROM ".$wpdb->prefix."ttr_results WHERE user_id = $user_id AND area = '$area' AND content = '$content' AND ($typesSQL) ORDER BY datetime DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:49:16.720

你可以看看`find_in_set()` [MySQL 函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

# android - 无法在android中放置一个editText的警报onclick事件

> ID：14581126
> 
> 赞同：0
> 
> 时间：2013-01-29T10:48:26.010
> 
> 标签：android, android-edittext, android-alertdialog, onclicklistener

我已经在其中进行了一些 EditTexts 的活动，并且我想在用户单击它时发出一个警报对话框。所以我尝试了以下代码，但它不起作用。任何伙伴请帮我解决问题，我的代码是以下：

主.java

```
package com.theappgeeks.kevingreenwealth;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.inputmethod.InputMethodManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.SeekBar;
import android.widget.TextView;
import android.widget.Toast;

public class Calculator2 extends Activity {
Button btn1,btn2;
ImageButton btn3,btn4,btn5;;
SeekBar sk;
EditText et1,et2,et3,et4,et5,et6,et7,et8;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_calculator2);
        btn1=(Button)findViewById(R.id.back2);
        btn2=(Button)findViewById(R.id.Next2);
        btn3=(ImageButton)findViewById(R.id.imageButtonHome2);
        btn4=(ImageButton)findViewById(R.id.imageButtonTraining2);
        btn5=(ImageButton)findViewById(R.id.imageButtonContactUs2);
        sk=(SeekBar)findViewById(R.id.seekBar1);
        sk=(SeekBar)findViewById(R.id.seekBar1);
        sk.setClickable(false);
        sk.setEnabled(false);
        sk.setProgress(sk.getMax()/4);

        et1=(EditText)findViewById(R.id.editTextPropertyCalc1);
        et2=(EditText)findViewById(R.id.editTextPropertyCalc2);
        et3=(EditText)findViewById(R.id.editTextPropertyCalc9);
        et4=(EditText)findViewById(R.id.editTextPropertyCalc4);
        et5=(EditText)findViewById(R.id.editTextPropertyCalc5);
        et6=(EditText)findViewById(R.id.editTextPropertyCalc6);
        et7=(EditText)findViewById(R.id.editTextPropertyCalc7);
        et8=(EditText)findViewById(R.id.editTextPropertyCalc8);

        final AlertDialog a1 = new AlertDialog.Builder(this).create();

        et1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                a1.setTitle("Auto-generated field");
                a1.setMessage("This field is calculated automatically");
                a1.setButton("Ok", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int which) {
                      // TODO Add your code for the button here.

                      // Toast.makeText(getApplicationContext(), "Basic Calculator", 1).show();
                   }
                });
                a1.show();
            }
        });

        btn1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent i1 =new Intent(Calculator2.this,Calculator_1Activity.class);
                startActivity(i1);
            }
        });
        btn2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent i2 =new Intent(Calculator2.this,Calculator_3Activity.class);
                startActivity(i2);

            }
        });

  btn3.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            Intent i3=new Intent(Calculator2.this,MainMenuActivity.class);
            startActivity(i3);
            }
        });

 btn4.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            Intent i4=new Intent(Calculator2.this,TrainingActivity.class);
            startActivity(i4);
            }
        });

 btn5.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        Intent i5=new Intent(Calculator2.this,ContactUsActivity.class);
        startActivity(i5);
        }
    });
    }
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        ((InputMethodManager) v.getContext().getSystemService(Context.INPUT_METHOD_SERVICE)).toggleSoftInput(0, 0);
        return false;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_calculator2, menu);
        return true;
    }
} 
```

**主要的.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/relativeLayout2"
        android:layout_width="fill_parent"
        android:layout_height="80dp"
        android:padding="3dp" >

        <SeekBar
            android:id="@+id/seekBar1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true" />

        <Button
            android:id="@+id/Next2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_alignRight="@+id/seekBar1"
            android:text="Next" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/Next2"
            android:layout_alignBottom="@+id/Next2"
            android:layout_centerHorizontal="true"
            android:text="Mortage Cover"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textStyle="bold" />

        <Button
            android:id="@+id/back2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/seekBar1"
            android:layout_alignParentTop="true"
            android:text="Back" />

    </RelativeLayout>

        <ScrollView 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"  android:layout_weight="0.23" android:fillViewport="true">

            <RelativeLayout
                android:id="@+id/relativeLayout2"
                android:layout_width="fill_parent"
                android:layout_height="509dp"
                android:background="#fffff3"
                android:padding="10dp" >

                <EditText
                    android:id="@+id/editTextPropertyCalc1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/editTextPropertyCalc5"
                    android:layout_alignParentRight="true"
                    android:layout_alignParentTop="true"
                    android:layout_marginTop="15dp"
                    android:enabled="false"
                    android:focusable="false"
                    android:focusableInTouchMode="false"
                    android:imeOptions="actionNext"
                    android:inputType="numberDecimal" >

                </EditText>

                <EditText
                    android:id="@+id/editTextPropertyCalc2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/editTextPropertyCalc1"
                    android:layout_alignParentRight="true"
                    android:layout_below="@+id/editTextPropertyCalc1"
                    android:imeOptions="actionDone"
                    android:enabled="false"
                    android:focusable="false"
                    android:focusableInTouchMode="false"
                    android:inputType="numberDecimal" />

                <EditText
                    android:id="@+id/editTextPropertyCalc3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/editTextPropertyCalc1"
                    android:layout_alignParentRight="true"
                    android:layout_below="@+id/editTextPropertyCalc2"
                    android:enabled="false"
                    android:focusable="false"
                    android:focusableInTouchMode="false"
                    android:inputType="numberDecimal" />

                <TextView
                    android:id="@+id/textView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@+id/editTextPropertyCalc3"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentRight="true"
                    android:enabled="false"
                    android:focusable="false"
                    android:focusableInTouchMode="false"
                    android:layout_below="@+id/editTextPropertyCalc3"
                    android:textAppearance="?android:attr/textAppearanceMediumInverse"
                    android:typeface="serif" />

                <EditText
                    android:id="@+id/editTextPropertyCalc4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/editTextPropertyCalc3"
                    android:layout_alignRight="@+id/textView2"
                    android:layout_below="@+id/textView2"
                    android:imeOptions="actionNext"
                    android:enabled="false"
                    android:focusable="false"
                    android:focusableInTouchMode="false"
                    android:inputType="numberDecimal" />

                <EditText
                    android:id="@+id/editTextPropertyCalc5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignRight="@+id/textView2"
                    android:layout_below="@+id/editTextPropertyCalc4"
                    android:layout_toRightOf="@+id/imageButtonCalcTip1"
                    android:imeOptions="actionNext"
                    android:enabled="false"
                    android:focusable="false"
                    android:focusableInTouchMode="false"
                    android:inputType="numberDecimal" />

                <EditText
                    android:id="@+id/editTextPropertyCalc6"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/editTextPropertyCalc4"
                    android:layout_alignParentRight="true"
                    android:layout_below="@+id/editTextPropertyCalc5"
                    android:imeOptions="actionNext"
                    android:enabled="false"
                    android:focusable="false"
                    android:focusableInTouchMode="false"
                    android:inputType="numberDecimal" />

                <EditText
                    android:id="@+id/editTextPropertyCalc7"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/editTextPropertyCalc5"
                    android:layout_alignParentRight="true"
                    android:layout_below="@+id/editTextPropertyCalc6"
                    android:imeOptions="actionDone"
                    android:enabled="false"
                    android:focusable="false"
                    android:focusableInTouchMode="false"
                    android:inputType="numberDecimal" />

                <EditText
                    android:id="@+id/editTextPropertyCalc8"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/editTextPropertyCalc6"
                    android:layout_alignParentRight="true"
                    android:layout_below="@+id/editTextPropertyCalc7"
                    android:enabled="false"
                    android:focusable="false"
                    android:focusableInTouchMode="false"
                    android:inputType="numberDecimal" />

                <TextView
                    android:id="@+id/TextView01"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/editTextPropertyCalc1"
                    android:layout_alignBottom="@+id/editTextPropertyCalc1"
                    android:layout_alignLeft="@+id/textView2"
                    android:layout_marginTop="15dp"
                    android:text="Price"
                    android:textAppearance="?android:attr/textAppearanceSmallInverse"
                    android:textSize="20dp"
                    android:typeface="serif" />

                <TextView
                    android:id="@+id/TextView03"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/editTextPropertyCalc3"
                    android:layout_alignBottom="@+id/editTextPropertyCalc3"
                    android:layout_alignLeft="@+id/textView2"
                    android:text="Mortage Amount"
                    android:textAppearance="?android:attr/textAppearanceSmallInverse"
                    android:typeface="serif" />

                <TextView
                    android:id="@+id/TextView02"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/editTextPropertyCalc4"
                    android:layout_alignBottom="@+id/editTextPropertyCalc4"
                    android:layout_alignParentLeft="true"
                    android:text="Mortage Interest Rate% "
                    android:textAppearance="?android:attr/textAppearanceSmallInverse"
                    android:typeface="serif" />

                <TextView
                    android:id="@+id/TextView04"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/editTextPropertyCalc5"
                    android:layout_alignBottom="@+id/editTextPropertyCalc5"
                    android:layout_alignParentLeft="true"
                    android:layout_alignRight="@+id/TextView02"
                    android:text="Monthly Interest"
                    android:textAppearance="?android:attr/textAppearanceSmallInverse"
                    android:typeface="serif" />

                <TextView
                    android:id="@+id/TextView05"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/editTextPropertyCalc6"
                    android:layout_alignBottom="@+id/editTextPropertyCalc6"
                    android:layout_alignParentLeft="true"
                    android:text="Lender&apos;s Rent Cover %"
                    android:textAppearance="?android:attr/textAppearanceSmallInverse"
                    android:typeface="serif" />

                <TextView
                    android:id="@+id/TextView06"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/editTextPropertyCalc7"
                    android:layout_alignBottom="@+id/editTextPropertyCalc7"
                    android:layout_alignParentLeft="true"
                    android:layout_alignRight="@+id/textView3"
                    android:layout_marginBottom="20dp"
                    android:text="Lender&apos;s Monthly Rent Required"
                    android:textAppearance="?android:attr/textAppearanceSmallInverse"
                    android:typeface="serif" />

                <TextView
                    android:id="@+id/TextView07"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@+id/editTextPropertyCalc8"
                    android:layout_alignLeft="@+id/TextView06"
                    android:layout_alignRight="@+id/TextView04"
                    android:layout_alignTop="@+id/editTextPropertyCalc8"
                    android:layout_marginTop="15dp"
                    android:text="Montlhly Rent Received"
                    android:textAppearance="?android:attr/textAppearanceSmallInverse"
                    android:typeface="serif" />
                    />

                <EditText
                    android:id="@+id/editTextPropertyCalc9"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignLeft="@+id/editTextPropertyCalc2"
                    android:layout_below="@+id/editTextPropertyCalc2"
                    android:ems="10"
                    android:enabled="false"
                    android:focusable="false"

                    android:focusableInTouchMode="true"
                    android:inputType="numberDecimal" >

                    <requestFocus />
                </EditText>

                <TextView
                    android:id="@+id/textView3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/editTextPropertyCalc2"
                    android:layout_alignBottom="@+id/editTextPropertyCalc2"
                    android:layout_alignLeft="@+id/TextView03"
                    android:gravity="center"
                    android:text="Mortage Loan to value %"
                    android:textAppearance="?android:attr/textAppearanceSmallInverse"
                    android:typeface="serif" />

                <ImageButton
                    android:id="@+id/imageButtonCalcTip1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/editTextPropertyCalc4"
                    android:layout_toRightOf="@+id/TextView06"
                    android:background="#0000"
                    android:padding="10dp"
                    android:scaleType="fitCenter"
                    android:src="@android:drawable/ic_dialog_info" />

                <ImageButton
                    android:id="@+id/ImageButton02"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBottom="@+id/editTextPropertyCalc7"
                    android:layout_toLeftOf="@+id/editTextPropertyCalc6"
                    android:background="#0000"
                    android:padding="10dp"
                    android:scaleType="fitCenter"
                    android:src="@android:drawable/ic_dialog_info" />

                <ImageButton
                    android:id="@+id/ImageButton01"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_above="@+id/ImageButton02"
                    android:layout_toLeftOf="@+id/editTextPropertyCalc5"
                    android:background="#0000"
                    android:padding="10dp"
                    android:scaleType="fitCenter"
                    android:src="@android:drawable/ic_dialog_info" />
                <ImageButton 
                    android:id="@+id/ImageButton03"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/ImageButton02"
                    android:padding="10dp"
                       android:background="#0000"
                    android:scaleType="fitCenter"
                    android:layout_toLeftOf="@+id/editTextPropertyCalc8"
                    android:src="@android:drawable/ic_dialog_info"/>

            </RelativeLayout>

</ScrollView>

        <LinearLayout
            android:id="@+id/linearLayout3"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
             android:layout_weight="0.60"
            android:background="@drawable/gradient_grey" >

            <LinearLayout
                android:layout_width="81dp"
                android:layout_height="fill_parent"
                android:layout_marginRight="5dp"
                android:orientation="vertical" >

            <ImageButton
                android:id="@+id/imageButtonHome2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginRight="8dp"
                android:src="@drawable/g3570" android:layout_weight="0.6" android:background="#0000" android:scaleType="fitCenter" android:layout_marginTop="5dp"/>

            <TextView                 android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                 android:layout_weight="1"
                 android:text="Home"
                android:gravity="center" android:textAppearance="?android:attr/textAppearanceMediumInverse" android:textColor="#fff" android:textStyle="bold"/>

            </LinearLayout> <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1" android:orientation="vertical">

            <ImageButton
                android:id="@+id/imageButtonTraining2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:src="@drawable/g4404" android:layout_weight="0.6" android:scaleType="fitCenter" android:background="#0000" android:layout_marginTop="5dp"/>
                <TextView                
                     android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                 android:layout_weight="1"
                 android:text="Training"
                android:gravity="center" android:textAppearance="?android:attr/textAppearanceMediumInverse" android:textColor="#fff" android:textStyle="bold"/>

            </LinearLayout> 

            <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1" android:orientation="vertical">

            <ImageButton
                android:id="@+id/imageButtonContactUs2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:src="@drawable/icon_email" android:layout_weight="0.6" android:scaleType="fitCenter" android:background="#0000" android:layout_marginTop="5dp"/>

               <TextView                 android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                 android:layout_weight="1"
                 android:text="Contact Us"
                android:gravity="center" android:textAppearance="?android:attr/textAppearanceMediumInverse" android:textColor="#fff" android:textStyle="bold"/>

            </LinearLayout>
        </LinearLayout>
    </LinearLayout> 
```

**日志猫**

```
01-29 10:57:01.381: D/AndroidRuntime(297): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
01-29 10:57:01.381: D/AndroidRuntime(297): CheckJNI is ON
01-29 10:57:01.521: D/AndroidRuntime(297): --- registering native functions ---
01-29 10:57:02.072: I/ActivityManager(59): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.theappgeeks.kevingreenwealth/.KevinGreenWealthActivity }
01-29 10:57:02.082: D/AndroidRuntime(297): Shutting down VM
01-29 10:57:02.082: D/dalvikvm(297): Debugger has detached; object registry had 1 entries
01-29 10:57:02.102: I/AndroidRuntime(297): NOTE: attach of thread 'Binder Thread #3' failed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:01:27.983

在您的 XML`@+id/editTextPropertyCalc1`更改定义中：

```
android:enabled="false" 
```

到

```
android:enabled="true" 
```

# android - 安装应用程序的顺序正在改变行为？

> ID：14581127
> 
> 赞同：5
> 
> 时间：2013-01-29T10:48:32.477
> 
> 标签：android, performance, android-manifest, android-contentprovider

我有三个应用程序：大学，学生，员工。

大学是主要应用程序。学生和教职员工是提供者申请。

大学有权访问此提供商应用程序中的信息。

**我按照学生、教职员工和大学**的顺序安装了 apk 。这工作正常

但如果我按 **大学、学生和教职员工**的顺序安装。

在这种情况下，大学崩溃并且错误是“访问权限被拒绝”。

即使我们有适当的许可，为什么会发生这种情况？为什么主应用程序无法访问稍后安装的提供程序？

```
 01-29 16:49:48.257: E/AndroidRuntime(2622): Caused by: java.lang.SecurityException: 
Permission Denial: opening provider com.content.StudentProvider
from ProcessRecord{b4849ad0 2622:com.example.University/u0a44} (pid=2622, uid=10044) 
requires com.content.READ or com.content.WRITE
01-29 16:49:48.257: E/AndroidRuntime(2622):     at android.os.Parcel.readException(Parcel.java:1425)
01-29 16:49:48.257: E/AndroidRuntime(2622):     at android.os.Parcel.readException(Parcel.java:1379)
01-29 16:49:48.257: E/AndroidRuntime(2622):     at android.app.ActivityManagerProxy.getContentProvider(ActivityManagerNative.java:2354)
01-29 16:49:48.257: E/AndroidRuntime(2622):     at android.app.ActivityThread.acquireProvider(ActivityThread.java:4219)
01-29 16:49:48.257: E/AndroidRuntime(2622):     at android.app.ContextImpl$ApplicationContentResolver.acquireUnstableProvider(ContextImpl.java:1703)
01-29 16:49:48.257: E/AndroidRuntime(2622):     at android.content.ContentResolver.acquireUnstableProvider(ContentResolver.java:1099)
01-29 16:49:48.257: E/AndroidRuntime(2622):     at android.content.ContentResolver.query(ContentResolver.java:354)
01-29 16:49:48.257: E/AndroidRuntime(2622):     at android.content.CursorLoader.loadInBackground(CursorLoader.java:65)
01-29 16:49:48.257: E/AndroidRuntime(2622):     at android.content.CursorLoader.loadInBackground(CursorLoader.java:43) 
```

提供者 - 学生 - 清单

```
 <permission android:description="@string/readPermissionDescription" 
    android:name="com.content.student.READ" android:protectionLevel="normal"></permission>

    <permission android:description="@string/writePermissionDescription" 
    android:name="com.content.student.WRITE" android:protectionLevel="dangerous"></permission>

    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <provider
            android:name=".StudentProvider"
            android:authorities="com.content.student"
            android:readPermission="com.content.student.READ"
            android:writePermission="com.content.student.WRITE" >
        </provider>
    </application> 
```

大学 - 清单

```
 <uses-permission android:name="com.content.student.READ" />
    <uses-permission android:name="com.content.student.WRITE" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T14:38:09.680

> 即使我们有适当的许可，为什么会发生这种情况？

因为它们的安装顺序错误。

> 为什么主应用程序无法访问稍后安装的提供程序？

因为安装主应用时权限不存在。

解决方案是在所有三个 APK 文件中定义相同的权限。

此外，除非您计划让第三方应用程序能够使用此内容提供程序，否则请使用级别`signature`权限，而不是.`normal``dangerous`

# android - 全局设置字体 Android

> ID：14581129
> 
> 赞同：0
> 
> 时间：2013-01-29T10:48:35.993
> 
> 标签：android

嗨，我有一个全局 Actions 类，我正在将其导入到我的活动中，我想要做的是将字体更改为该活动中的任何文本。

这是我的全局操作 public final static void setTypeFace(Context someContext){

```
 Typeface face =Typeface.createFromAsset(getAssets(), "fonts/Verdana.ttf");
        }

    private static AssetManager getAssets() {
        // TODO Auto-generated method stub
        return null;
    }

    } 
```

这是我试图在我的活动中实现它的地方

```
 GlobalActions.setTypeFace(this);
        super.setTypeface(GlobalActions.setTypeFace(face)); 
```

有谁知道如何做到这一点，或者甚至可能吗？

# ruby - 垃圾收集器的对象大小

> ID：14581136
> 
> 赞同：0
> 
> 时间：2013-01-29T10:48:48.467
> 
> 标签：ruby, garbage-collection

Ruby 中的垃圾收集器是否考虑了对象的大小和数量？为了优化，我正在考虑用s 或纯es替换`Class`实例。我想了解哪些给定的类将对垃圾收集产生最大的影响。`Struct``Hash`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:16:22.477

那个说你应该对它进行基准测试的人是对的——GC 是一个复杂的问题，很难给出 100% 正确的答案。

此外，这取决于所使用的实现。在 JRuby 中，是 JVM 做的工作。在 MRI 中，它是一种标记和扫描 GC。

在 MRI 的情况下，它的工作方式或多或少是这样的：每次 Ruby 解释器需要更多内存时，它都会运行 GC 来尝试释放它。如果没有足够的内存，它会分配更多。当没有对它的引用时，GC 决定一个对象可以被释放（“标记”它）。

我能给你的唯一建议是避免使用大量不能被垃圾收集的对象。例如，如果您正在构建一个字符串数组（它们的大小并不重要），与创建一个连接每个较小字符串的大字符串相比，您应该会看到性能下降的速度要快得多。

这是因为在后者中，GC 可以在使用后销毁小字符串，而在前者中，数组始终保持对它们中的每一个的引用。

编辑：当然，这假设在内存中维护它们的成本大于处理“大字符串”的速度。在某些情况下，最好使用小字符串，然后将它们全部连接起来——这会导致单个操作缓慢。同样，这些只是没有基准的示例，不要太认真。

# android - 从异步任务上的 URL 获取数据时主线程冻结

> ID：14581139
> 
> 赞同：0
> 
> 时间：2013-01-29T10:48:52.037
> 
> 标签：android, android-asynctask, json

我正在使用 AsycTask 从 URL 中获取 JSON，对其进行解析并将数据显示到 listView 上。我还单击刷新按钮再次从 URL 获取 JSON 以进行一些更新。当我单击刷新按钮时，会发生以下情况；1) adapter.clear() ：清除listView的适配器以填充新数据。2) 从 url 中获取 JSON，解析新获取的数据并将其显示到 listView 上。3）同时在获取数据时，我会显示一个进度对话框。

但是当我单击刷新按钮时，主 UI 线程在 AsynTask 执行期间冻结。我的意思是刷新按钮看起来被按下，直到 AsynTask 完成工作，如下所示。 ![在此处输入图像描述](../Images/39624eadb6df840e71f3081de4afefcc.png)

这是我的代码：

```
public class AndroidJSONParsingActivity extends SherlockActivity {

    // JSON Node names
    ArrayList<HashMap<String, String>> placeList = new ArrayList<HashMap<String, String>>();
    private static final String TAG_PLACES = "places";
    private static final String TAG_PLACE_NAME = "name";
    private static final String TAG_PLACE_CATEGORY = "category";
    private static final String TAG_PLACE_DISTANCE = "distance";
    private static final String TAG_TRAVEL_TIME = "travel_time";
    ListAdapter adapter;
    public static Context con;
    JSONArray places = null;
    ListView list;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        con = this;
        list = (ListView) findViewById(R.id.listView1);
        parseJSON();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.activity_main, menu);

        MenuItem menu_item1 = menu.findItem(R.id.menu_item1);

        menu_item1.setOnMenuItemClickListener(new OnMenuItemClickListener() {

            @Override
            public boolean onMenuItemClick(MenuItem item) {
                Toast.makeText(getApplicationContext(), "refresh",
                        Toast.LENGTH_LONG).show();
                placeList.clear();
                parseJSON();
                return false;
            }
        });

        return true;

    }

    public void parseJSON() {
        try {
            placeList = new JSONParsingTask().execute().get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        adapter = new SimpleAdapter(this, placeList, R.layout.list_item,
                new String[] { TAG_PLACE_NAME, TAG_PLACE_CATEGORY,
                        TAG_PLACE_DISTANCE, TAG_TRAVEL_TIME }, new int[] {
                        R.id.name, R.id.category, R.id.distance,
                        R.id.travel_time });

        list.setAdapter(adapter);

        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                String name = ((TextView) view.findViewById(R.id.name))
                        .getText().toString();
                String category = ((TextView) view.findViewById(R.id.category))
                        .getText().toString();
                String distance = ((TextView) view.findViewById(R.id.distance))
                        .getText().toString();
                String travel_time = ((TextView) view
                        .findViewById(R.id.travel_time)).getText().toString();

                Intent in = new Intent(getApplicationContext(),
                        SingleMenuItemActivity.class);
                in.putExtra(TAG_PLACE_NAME, name);
                in.putExtra(TAG_PLACE_CATEGORY, category);
                in.putExtra(TAG_PLACE_DISTANCE, distance);
                in.putExtra(TAG_TRAVEL_TIME, travel_time);
                startActivity(in);

            }
        });

    }

}

class JSONParsingTask extends
        AsyncTask<Void, Void, ArrayList<HashMap<String, String>>> {
    public Boolean flag = false;
    private static String url = "http://some - url";

    // JSON Node names

    private static final String TAG_PLACES = "places";
    private static final String TAG_PLACE_NAME = "name";
    private static final String TAG_PLACE_CATEGORY = "category";
    private static final String TAG_PLACE_DISTANCE = "distance";
    private static final String TAG_TRAVEL_TIME = "travel_time";
    ListAdapter adapter;
    JSONParser jParser;
    ListView list;
    static ArrayList<HashMap<String, String>> placeList = new ArrayList<HashMap<String, String>>();
    JSONArray places = null;

    ProgressDialog JSONParsingDialog = new ProgressDialog(
            AndroidJSONParsingActivity.con);

    @Override
    protected void onPreExecute() {
        JSONParsingDialog.setMessage("Preparing data...");
        JSONParsingDialog.setCanceledOnTouchOutside(false);
        JSONParsingDialog.setCancelable(false);
        JSONParsingDialog.show();
    }

    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(Void... params) {
        JSONParser jParser = new JSONParser();

        final JSONObject json = jParser.getJSONFromUrl(url);

        try {
            places = json.getJSONArray(TAG_PLACES);

            for (int i = 0; i < places.length(); i++) {
                JSONObject c = places.getJSONObject(i);

                String name = c.getString(TAG_PLACE_NAME);
                String category = c.getString(TAG_PLACE_CATEGORY);
                String distance = c.getString(TAG_PLACE_DISTANCE);
                String travel_time = c.getString(TAG_TRAVEL_TIME);

                HashMap<String, String> map = new HashMap<String, String>();

                map.put(TAG_PLACE_NAME, name);
                map.put(TAG_PLACE_CATEGORY, category);
                map.put(TAG_PLACE_DISTANCE, distance);
                map.put(TAG_TRAVEL_TIME, travel_time);

                placeList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return placeList;
    }

    @Override
    protected void onPostExecute(ArrayList<HashMap<String, String>> result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        JSONParsingDialog.dismiss();
    }

} 
```

我需要的是，当我单击刷新按钮时，它应该是平滑的，并且在 AsynTask 完成之前不应该冻结。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:52:52.343

采用

```
new JSONParsingTask().execute(); 
```

.get() 阻塞调用者线程。

更多信息：[寻找在 android 中使用 get() 和 AsyncTask 的好例子](https://stackoverflow.com/questions/7070082/looking-for-good-example-of-using-get-with-an-asynctask-in-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T11:00:54.787

试试这样：

```
public class AndroidJSONParsingActivity extends SherlockActivity {

// JSON Node names
ArrayList<HashMap<String, String>> placeList = new ArrayList<HashMap<String, String>>();
private static final String TAG_PLACES = "places";
private static final String TAG_PLACE_NAME = "name";
private static final String TAG_PLACE_CATEGORY = "category";
private static final String TAG_PLACE_DISTANCE = "distance";
private static final String TAG_TRAVEL_TIME = "travel_time";
ListAdapter adapter;
public static Context con;
JSONArray places = null;
ListView list;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    con = this;
    list = (ListView) findViewById(R.id.listView1);
    fetchJSON();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {

    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.activity_main, menu);

    MenuItem menu_item1 = menu.findItem(R.id.menu_item1);

    menu_item1.setOnMenuItemClickListener(new OnMenuItemClickListener() {

        @Override
        public boolean onMenuItemClick(MenuItem item) {
            Toast.makeText(getApplicationContext(), "refresh",
                    Toast.LENGTH_LONG).show();
            placeList.clear();
            parseJSON();
            return false;
        }
    });

    return true;

}

public void fecthJson(){
    new JSONParsingTask().execute();
}

public void parseJSON(ArrayList<Hashmap<String, String>> dataList) {

    adapter = new SimpleAdapter(this, dataList, R.layout.list_item,
            new String[] { TAG_PLACE_NAME, TAG_PLACE_CATEGORY,
                    TAG_PLACE_DISTANCE, TAG_TRAVEL_TIME }, new int[] {
                    R.id.name, R.id.category, R.id.distance,
                    R.id.travel_time });

    list.setAdapter(adapter);

    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            String name = ((TextView) view.findViewById(R.id.name))
                    .getText().toString();
            String category = ((TextView) view.findViewById(R.id.category))
                    .getText().toString();
            String distance = ((TextView) view.findViewById(R.id.distance))
                    .getText().toString();
            String travel_time = ((TextView) view
                    .findViewById(R.id.travel_time)).getText().toString();

            Intent in = new Intent(getApplicationContext(),
                    SingleMenuItemActivity.class);
            in.putExtra(TAG_PLACE_NAME, name);
            in.putExtra(TAG_PLACE_CATEGORY, category);
            in.putExtra(TAG_PLACE_DISTANCE, distance);
            in.putExtra(TAG_TRAVEL_TIME, travel_time);
            startActivity(in);

        }
    });

}

}

class JSONParsingTask extends
    AsyncTask<Void, Void, ArrayList<HashMap<String, String>>> {
public Boolean flag = false;
private static String url = "http://some - url";

// JSON Node names

private static final String TAG_PLACES = "places";
private static final String TAG_PLACE_NAME = "name";
private static final String TAG_PLACE_CATEGORY = "category";
private static final String TAG_PLACE_DISTANCE = "distance";
private static final String TAG_TRAVEL_TIME = "travel_time";
ListAdapter adapter;
JSONParser jParser;
ListView list;
static ArrayList<HashMap<String, String>> placeList = new ArrayList<HashMap<String, String>>();
JSONArray places = null;

ProgressDialog JSONParsingDialog = new ProgressDialog(
        AndroidJSONParsingActivity.con);

@Override
protected void onPreExecute() {
    JSONParsingDialog.setMessage("Preparing data...");
    JSONParsingDialog.setCanceledOnTouchOutside(false);
    JSONParsingDialog.setCancelable(false);
    JSONParsingDialog.show();
}

@Override
protected ArrayList<HashMap<String, String>> doInBackground(Void... params) {
    JSONParser jParser = new JSONParser();

    final JSONObject json = jParser.getJSONFromUrl(url);

    try {
        places = json.getJSONArray(TAG_PLACES);

        for (int i = 0; i < places.length(); i++) {
            JSONObject c = places.getJSONObject(i);

            String name = c.getString(TAG_PLACE_NAME);
            String category = c.getString(TAG_PLACE_CATEGORY);
            String distance = c.getString(TAG_PLACE_DISTANCE);
            String travel_time = c.getString(TAG_TRAVEL_TIME);

            HashMap<String, String> map = new HashMap<String, String>();

            map.put(TAG_PLACE_NAME, name);
            map.put(TAG_PLACE_CATEGORY, category);
            map.put(TAG_PLACE_DISTANCE, distance);
            map.put(TAG_TRAVEL_TIME, travel_time);

            placeList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
    return placeList;
}

@Override
protected void onPostExecute(ArrayList<HashMap<String, String>> result) {
    // TODO Auto-generated method stub
    super.onPostExecute(result);
    JSONParsingDialog.dismiss();
    placeList = result;
    parseJson(result);
}

} 
```

# menu - nsoutlineview：右键单击而不调用“选择确实更改”委托方法

> ID：14581143
> 
> 赞同：0
> 
> 时间：2013-01-29T10:49:04.950
> 
> 标签：menu, nsoutlineview, right-click

作为官方的“DragNDropOutlineView”示例项目，如果我已经选择了一个项目，单击右键菜单，右键单击的项目将被选中并标有蓝色边框，但未调用 selectionDidChange 方法。它是如何实现的？！[在此处输入图像描述][1]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:55:43.187

自己回答这个问题，我们无法通过编码来实现，相反，我们可以在界面构建器中创建一个菜单，选择表格视图或大纲视图，将“菜单”出口链接到您刚刚创建的菜单。现在，当您右键单击 item 时，它不会调用 selectionDidChange 通知。

# linux - ffmpeg-php安装在centos中显示错误

> ID：14581145
> 
> 赞同：0
> 
> 时间：2013-01-29T10:49:07.793
> 
> 标签：linux, ffmpeg, centos, fedora, ffmpeg-php

我是 Centos 的新手。我使用 yum 命令在我的服务器中安装了 ffmpeg。我想安装ffmpeg-php。我从以下位置下载了源文件：

[http://ffmpeg-php.svn.sourceforge.net/viewvc/ffmpeg-php/trunk/ffmpeg-php/?view=tar](http://ffmpeg-php.svn.sourceforge.net/viewvc/ffmpeg-php/trunk/ffmpeg-php/?view=tar)

提取后我使用以下命令：

1.  php化
2.  ./configure --enable-shared

但是当我尝试进行构建时，会出现以下错误：

```
/bin/sh /usr/local/src/ffmpeg-php-0.6.0/libtool --mode=compile cc  -I. -I/usr/local

/src/ffmpeg-php-0.6.0 -DPHP_ATOM_INC -I/usr/local/src/ffmpeg-php-0.6.0/include -I/usr/local/src/ffmpeg-php-0.6.0/main -I/usr/local/src/ffmpeg-php-0.6.0 -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib -I/usr/local/include/libavcodec/ -I/usr/local/include/libavformat/ -I/usr/local/include/libavutil/ -I/usr/local/include/libswscale/ -I/usr/local/include/libavfilter/ -I/usr/local/include/libavdevice/  -DHAVE_CONFIG_H  -g -O2 -Wall -fno-strict-aliasing   -c /usr/local/src/ffmpeg-php-0.6.0/ffmpeg-php.c -o ffmpeg-php.lo 
libtool: compile:  cc -I. -I/usr/local/src/ffmpeg-php-0.6.0 -DPHP_ATOM_INC -I/usr/local/src/ffmpeg-php-0.6.0/include -I/usr/local/src/ffmpeg-php-0.6.0/main -I/usr/local/src/ffmpeg-php-0.6.0 -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib -I/usr/local/include/libavcodec/ -I/usr/local/include/libavformat/ -I/usr/local/include/libavutil/ -I/usr/local/include/libswscale/ -I/usr/local/include/libavfilter/ -I/usr/local/include/libavdevice/ -DHAVE_CONFIG_H -g -O2 -Wall -fno-strict-aliasing -c /usr/local/src/ffmpeg-php-0.6.0/ffmpeg-php.c  -fPIC -DPIC -o .libs/ffmpeg-php.o
In file included from /usr/include/sys/stat.h:107,
                 from /usr/include/php/main/php_streams.h:28,
                 from /usr/include/php/main/php.h:405,
                 from /usr/local/src/ffmpeg-php-0.6.0/ffmpeg-php.c:40:
/usr/include/bits/stat.h:73: error: field ‘st_atim’ has incomplete type
/usr/include/bits/stat.h:74: error: field ‘st_mtim’ has incomplete type
/usr/include/bits/stat.h:75: error: field ‘st_ctim’ has incomplete type
/usr/include/bits/stat.h:119: error: field ‘st_atim’ has incomplete type
/usr/include/bits/stat.h:120: error: field ‘st_mtim’ has incomplete type
/usr/include/bits/stat.h:121: error: field ‘st_ctim’ has incomplete type
In file included from /usr/include/php/main/php_streams.h:28,
                 from /usr/include/php/main/php.h:405,
                 from /usr/local/src/ffmpeg-php-0.6.0/ffmpeg-php.c:40:
/usr/include/sys/stat.h:367: error: array type has incomplete element type
/usr/include/sys/stat.h:374: error: array type has incomplete element type
In file included from /usr/include/php/main/php.h:411,
                 from /usr/local/src/ffmpeg-php-0.6.0/ffmpeg-php.c:40:
/usr/include/php/TSRM/tsrm_virtual_cwd.h:212: error: expected specifier-qualifier-list before ‘time_t’
/usr/include/php/TSRM/tsrm_virtual_cwd.h:240: error: expected declaration specifiers or ‘...’ before ‘time_t’
In file included from /usr/local/src/ffmpeg-php-0.6.0/ffmpeg-php.c:46:
/usr/local/include/libswscale/swscale.h:140: warning: ‘enum AVPixelFormat’ declared inside parameter list
/usr/local/include/libswscale/swscale.h:146: warning: ‘enum AVPixelFormat’ declared inside parameter list
/usr/local/include/libswscale/swscale.h:189: warning: ‘enum AVPixelFormat’ declared inside parameter list
/usr/local/include/libswscale/swscale.h:316: warning: ‘enum AVPixelFormat’ declared inside parameter list
make: *** [ffmpeg-php.lo] Error 1 
```

请帮忙 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:43:00.730

在您的 ffmpeg-php* 文件夹中，将所有扩展名为“.loT”的文件更改为扩展名“lo”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T06:58:46.973

我不确定这是正确的解决方案，

> 在您的 ffmpeg-php* 文件夹中，将所有扩展名为“.loT”的文件更改为扩展名“lo”

只需通过 git 命令从 ffmpeg 站点下载包并进行配置，

```
# yum install git
#  git clone git://source.ffmpeg.org/ffmpeg.git ffmpeg
# ./configure --enable-shared ... ... 
```

我希望这个问题应该得到解决。

# javascript - 使用 d3.js 在雷达图中实现工具提示

> ID：14581157
> 
> 赞同：0
> 
> 时间：2013-01-29T10:49:27.273
> 
> 标签：javascript, d3.js

```
var margin = {top: 30, right: 20, bottom: 30, left: 70},
h= 500;
w = 960;
ruleColor = "#CCC";
minVal = 0;
maxVal = 100;
width = 960 - margin.left - margin.right,
height = 500 - margin.top - margin.bottom;

var viz = d3.select("#radar")
    .append('svg:svg')
    .attr('width', w)
    .attr('height', h)
    .attr('class', 'vizSvg');

viz.append("svg:rect")
    .attr('id', 'axis-separator')
    .attr('x', 0)
    .attr('y', 0)
    .attr('height', 0)
    .attr('width', 0)
    .attr('height', 0);

vizBody = viz.append("svg:g")
    .attr('id', 'body');

var heightCircleConstraint = 500 - margin.top - margin.bottom;
var widthCircleConstraint =  width = 960 - margin.left - margin.right,
circleConstraint = d3.min([heightCircleConstraint, widthCircleConstraint]);
var radius = d3.scale.linear().domain([minVal, maxVal]).range([0, (circleConstraint  / 2)]);
var radiusLength = radius(maxVal);
var centerXPos = widthCircleConstraint / 2 + margin.left;
var centerYPos = heightCircleConstraint / 2 + margin.top;

vizBody.attr("transform",
  "translate(" + centerXPos + ", " + centerYPos + ")");

d3.json("data/radar.json", function(error, data) {
    var hours = [];
    var series = [[]];
    data.QualitySummaryObject.forEach(function(d,i) {
        series[0][i] = d.extractPercentage;
        hours[i] = d.extractorName;
    });
    for (i = 0; i < series.length; i += 1) {
        series[i].push(series[i][0]);
    }
    //console.log(series.length);
    var radialTicks = radius.ticks(5);

    vizBody.selectAll('.circle-ticks').remove();
    vizBody.selectAll('.line-ticks').remove();
    var circleAxes = vizBody.selectAll('.circle-ticks')
      .data(radialTicks)
      .enter().append('svg:g')
      .attr("class", "circle-ticks");
    circleAxes.append("svg:circle")
      .attr("r", function (d, i) {
          return radius(d);
      })
      .attr("class", "circle")
      .style("stroke", ruleColor)
      .style("fill", "none");
    circleAxes.append("svg:text")
      .attr("text-anchor", "middle")
      .attr("dy", function (d) {
          return -1 * radius(d);
      })
      .text(String);

    var lineAxes = vizBody.selectAll('.line-ticks')
      .data(hours)
      .enter().append('svg:g')
      .attr("transform", function (d, i) {
          return "rotate(" + ((i / hours.length * 360) - 90) +
              ")translate(" + radius(maxVal) + ")";
      })
      .attr("class", "line-ticks");

    lineAxes.append('svg:line')
      .attr("x2", -1 * radius(maxVal))
      .style("stroke", ruleColor)
      .style("fill", "none");
    lineAxes.append('svg:text')
      .text(String)
      .attr("text-anchor", "middle")
      .attr("transform","translate(15) rotate(90)");

    //var highlightedDotSize = 4;
    var groups = vizBody.selectAll('.series').data(series);
    //console.log(hours.length);
    groups.enter().append("svg:g")
    .attr('class', 'series')
      .style('fill', "green")
      .style('stroke',"#ccc");    
    //groups.exit().remove();
    //console.log(Math.PI);
    var lines = groups.append('svg:path')
      .attr("class", "line")
      /*.attr("d", d3.svg.line.radial()
          .radius(function (d) {
              return 10;
          })
          .angle(function (d, i) {
              if (i == hours.length) {
                  i = 0;
              } //close the line
              return (i / hours.length) * 2 * Math.PI;
          }))*/
      .style("stroke-width", 1)
      .style("fill", "rgba(124,240,10,0.1)");
      /*groups.selectAll(".curr-point")
      .data(function (d) {
          return [d[0]];
      })
      .enter().append("svg:circle")
      .attr("class", "curr-point")
      .attr("r", 0);

  groups.selectAll(".clicked-point")
      .data(function (d) {
          return [d[0]];
      })
      .enter().append("svg:circle")
      .attr('r', 0)
      .attr("class", "clicked-point");*/

  lines.attr("d", d3.svg.line.radial()
      .radius(function (d) {

          return radius(d);
      })
      .angle(function (d, i) {
          if (i === hours.length) {
              i = 0;
          } //close the line
          return (i / hours.length) * 2 * Math.PI;
      }));

}); 
```

我实现了这段代码来创建带有 json 数据的雷达图这里是 json 数据格式

```
{
"QualitySummaryObject": [
    {
        "extractPercentage": 68.81964,
        "extractorName": "Classification"
    },
    {
        "extractPercentage": 74.09091,
        "extractorName": "Keyword Match"
    },
    {
        "extractPercentage": 54.62963,
        "extractorName": "LocationBroadcast"
    },
    {
        "extractPercentage": 98.91892,
        "extractorName": "Qualification"
    },
    {
        "extractPercentage": 98.76923,
        "extractorName": "User Profile Location"
    },
    {
        "extractPercentage": 80.15909,
        "extractorName": "Valid Person Name"
    },

]
} 
```

现在我想在每个节点点上放置工具提示..但我不知道如何做到这一点，任何机构都可以提供帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:33:41.037

这是一个使用 D3 在 SVG 上运行的 Twitter Bootstrap 工具提示示例[http://markhansen.co.nz/stolen-vehicles-pt2/](http://markhansen.co.nz/stolen-vehicles-pt2/)

要让它在较新的版本上运行，请参阅[为什么 Twitter Bootstrap 弹出框不能与 SVG 元素一起使用？](https://stackoverflow.com/questions/13943582/why-doesnt-twitter-bootstrap-popover-work-with-svg-elements)您需要使用 2.3.0+ 版本的引导程序或我在该线程中发布的修复程序。

# tcl - 包装的 Tcl 脚本在移动时停止工作

> ID：14581159
> 
> 赞同：1
> 
> 时间：2013-01-29T10:49:28.667
> 
> 标签：tcl

我是 Tcl 新手，我有一个使用 freewrapTCLSH.exe 包装的脚本

一开始，程序启动时抱怨找不到包

我编辑了似乎“包含”它的行

```
lappend auto_path ../../lib/crc 
```

这工作正常，.exe 启动没有问题。但后来我把 exe 移到另一个文件夹，它又开始抱怨了。我认为一旦创建了 exe，一切都会完成。但它似乎并没有很好地处理这个问题。起初，lib 的整个路径都被硬编码到脚本中，然后一切正常。但是由于我们不能依赖始终在同一个文件夹中构建的 exe，因此必须进行更改。

关于如何解决这个烦人的问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:03:21.517

`../../lib/crc`每次搜索包时都使用当前工作目录进行解释。拥有这个东西`::auto_path`几乎总是不是你想要的。

我`[file dirname [info script]]`用来获取当前来源的 Tcl 文件的目录，使用 . 添加一些相对路径`lib/crc`，`file join`确保使用`file normalize`. 结果`file normalize`是我添加的内容`::auto_path`（或以其他方式记住以备将来使用）：

```
lappend ::auto_path [file normalize [file join [file dirname [info script]] ../mylib]] 
```

这可能很明显，但仍然：`info script`返回当前作为源文件的路径，而不是在包含对它的调用的文件*被 sourced时以某种方式**记住*的路径。如果您想获取当前脚本位置，请确保它发生在正确的时间（例如，在顶层执行）。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:58:00.210

您应该将所需的包（以及该包的依赖项）交付到您的 exe 中。通常这只涉及将所需包的目录复制到 vfs 中的 lib 文件夹中。*

# html - 下拉菜单隐藏在 flash.swf 中

> ID：14581162
> 
> 赞同：0
> 
> 时间：2013-01-29T10:49:41.767
> 
> 标签：html, flash, drop-down-menu

```
 <table>
         <tr>
         <td>
         <div id="dropdownmenu">
         <a href="#">Red</a>
         <a href="#">Orange</a>   
         </div>
         <script type="text/javascript">
         cssdropdown.startchrome("chromemenu")
         </script></td>
         </tr>
         <tr style="background-color:#FFFFFF; vertical-align:top;">
         <td>  
         <object height="251" width="504">
         <param value="Flash.swf" name="movie">
         <param value="Transparent" name="wmode">
         <embed width="504" height="251" src="Flash.swf"/> //here flash is hiding drop 
         </object>
         </td>
         </tr>
         </table> 
```

这里 flash.swf 隐藏了下拉菜单。我希望下拉菜单在 flash 之外，但它显示在 flash 内部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:02:42.163

您没有`wmode`嵌入标签中的参数：

```
<embed width="504" height="251" src="Flash.swf" wmode="transparent" /> 
```

基于`<param`的`wmode`仅针对 Internet Explorer

# javascript - 节点列表 - '未定义：未绑定到任何节点'

> ID：14581165
> 
> 赞同：1
> 
> 时间：2013-01-29T10:49:56.167
> 
> 标签：javascript, yui

这有什么问题？

```
YUI().use('node', function (Y) 
{
  var doc = Y.one('#content');
  // alert(doc.getHTML());
  var nodes = new Y.NodeList(doc.getElementsByTagName('h1'));
  // Do something ...
}); 
```

doc.getHTML() 显示带有一些 1 级标题的预期文档。但是节点始终是*'undefined: not bound to any nodes'*。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:32:02.843

'doc' 是一个 Y.Node 对象，而不是本机 DOM 对象，因此没有 getElementsByTagName() 方法。在这种情况下，我认为你想要：

```
var nodes = doc.all('h1'); 
```

请记住，当使用 YUI 操作 DOM 时，您正在使用外观对象、Y.Node 或 Y.NodeList。不要将 YUI 方法调用与本机 DOM 方法调用混用，除非您确定自己知道自己在做什么。

# git - 将现有的 SVN 存储库转换为 git-svn

> ID：14581169
> 
> 赞同：0
> 
> 时间：2013-01-29T10:50:10.503
> 
> 标签：git, svn

我有一个现有的 SVN 存储库。遥控器也是SVN。我想使用 git-svn 在本地管理它。

我怎样才能做到这一点而不必再次签出所有文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:54:40.927

**以 [https://help.github.com/articles/importing-from-subversion开头](https://help.github.com/articles/importing-from-subversion)**的推荐链接****

 ****以前的一些stackoverflow讨论**

[将 SVN 结帐转换为使用 git (git-svn)](https://stackoverflow.com/questions/826865/convert-an-svn-checkout-to-use-git-git-svn)

[如何将具有历史记录的 SVN 存储库迁移到新的 Git 存储库？](https://stackoverflow.com/questions/79165/how-to-migrate-svn-with-history-to-a-new-git-repository)

**其他参考链接**

[http://john.albin.net/git/convert-subversion-to-git](http://john.albin.net/git/convert-subversion-to-git)

[http://www.mabishu.com/blog/2011/01/13/migrate-subversion-repository-to-git-without-loosing-data/](http://www.mabishu.com/blog/2011/01/13/migrate-subversion-repository-to-git-without-loosing-data/)**

# mschart - MSChart 如何创建第二个 CursorX 以通过第二个透明 ChartArea 拥有多个光标？

> ID：14581172
> 
> 赞同：1
> 
> 时间：2013-01-29T10:50:13.033
> 
> 标签：mschart

> **如果可能的话，我会尝试在 AxisX Primary 引入第二个 CursorX？**

我确实尝试在 Secondary 激活第二个 CursorX，但那个没有按预期工作，我还阅读了 Line Annotation 和 Vertical Line Annotation 并创建了某种线，但第二组 CursorX CursorY 会好得多

我确实尝试创建并尽可能地为空和透明的第二个 ChartArea，我尝试覆盖在 ChartArea1 的顶部，我注意到两个 ChartArea 的 InnerPlotPosition 和 Postion 应该保持在轨道上以获得完全对齐的覆盖，然后是 CursorX第二个 ChartArea 应该显示在 ChartArea1 的顶部

这就是我认为如何做到的，但不知道这是否是创建第二个 CursorX 的好方法，也许 Line Annotation 是通向罗马的一条更容易的道路

欢迎任何帮助建议提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T03:25:53.807

假设您的图表包含多个垂直对齐的图表区域，下面的代码允许您在每个图表区域中设置 CursorX：

```
 Dim c1 As New Chart
            '...here code block to build each chart area ...  
            '...then use below sample code to align each chart area vertically:
            'c1.ChartAreas(i).AlignmentOrientation = AreaAlignmentOrientations.Vertical
            'c1.ChartAreas(i).AlignWithChartArea = c1.ChartAreas(0).Name

            'below set horizontal cursor (it is a gold vertical bar in each chart area): 
            For Each area As ChartArea In c1.ChartAreas
                area.CursorX.LineColor = Color.Gold
                area.CursorX.LineWidth = 3
                area.CursorX.IsUserEnabled = True
                area.CursorX.IsUserSelectionEnabled = True
                area.CursorX.SelectionColor = System.Drawing.Color.PaleGoldenrod
            Next 
```

# sql - 将高级存储过程从 T-SQL 转换为 PL-SQL

> ID：14581173
> 
> 赞同：-1
> 
> 时间：2013-01-29T10:50:24.530
> 
> 标签：sql, tsql, stored-procedures, plsql, oracle11g

我想手动将存储过程从 T-SQL（MS SQL Server 2008）转换为 P-SQL（Oracle DB 11g）。我最近尝试使用 SQL Developer 和 SwisSQL Tool 转换此过程，但没有成功。这个存储过程包含一个参数@sptotest 用于搜索一个单词。这是代码：

T-SQL：

```
CREATE PROCEDURE sp_name @sptotest sysname AS

DECLARE @d            datetime,
       @tookms       int,
       @cnt          int,
       @single_email varchar(80),
       @word         varchar(50)

DECLARE @testwords TABLE
       (no   int         NOT NULL PRIMARY KEY,
        word varchar(80) NOT NULL)

CREATE TABLE #temp(person_id  int          NOT NULL PRIMARY KEY,
                  first_name nvarchar(50) NULL,
                  last_name  nvarchar(50) NOT NULL,
                  birth_date datetime     NULL,
                  email      varchar(80)  NOT NULL)

SELECT TOP 1 @single_email = email
FROM   persons
WHERE  person_id BETWEEN 321106 AND 325000 AND  email LIKE '%.com'
ORDER  BY person_id

INSERT @testwords(no, word)
  SELECT 1, 'joy'
  UNION ALL
  SELECT 4, @single_email

PRINT '------------------ Testing ' + ' ' + quotename(@sptotest) + ' ----'

DECLARE cur CURSOR STATIC LOCAL FOR
  SELECT word FROM @testwords ORDER BY no
OPEN cur

WHILE 1 = 1
BEGIN
  FETCH cur INTO @word
  IF @@fetch_status <> 0
     BREAK

  TRUNCATE TABLE #temp

  CHECKPOINT
  DBCC DROPCLEANBUFFERS WITH NO_INFOMSGS

  SELECT @d = getdate()
  INSERT #temp
     EXEC @sptotest @word
  SELECT @tookms = datediff(ms, @d, getdate())
  SELECT @cnt = COUNT(*) FROM #temp
  PRINT ltrim(str(@tookms)) + ' ms, ' +
        ltrim(str(@cnt)) + ' rows. Word = "' + @word + '".'

  TRUNCATE TABLE #temp
  SELECT @d = getdate()
  INSERT #temp
     EXEC @sptotest @word
  SELECT @tookms = datediff(ms, @d, getdate())
  SELECT @cnt = COUNT(*) FROM #temp
  PRINT ltrim(str(@tookms)) + ' ms, ' +
        ltrim(str(@cnt)) + ' rows. Word = "' + @word + '". Data in cache.'

END

DEALLOCATE cur 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:05:20.070

您不能直接在过程中创建表。你必须使用`execute immediate`来创建一个全局临时表。你需要使用`declare`

游标声明必须在声明部分，意思是在`begin`语句之​​上。

我试图纠正可能的错误，但我没有测试它，因为我没有实例。请根据我的示例根据需要进行修改。

立即执行的小例子 #

```
begin
  execute immediate 'create table t23 as  select ''1'' aa from dual'; 
  execute immediate 'update t23 set aa =''2'' where aa=''1''';
  COMMIT ;
end;

And your Proc Follows

create or replace procedure test_sp 
(
sptotest in varchar2 default null
)
 as
d date;
tookms number;
cnt number;
single_mail varchar2(80);
word varchar2(50);

cursor cur is select word from testwords order by no;

begin
execute immediate ('create global temporary table testwords
(
no     int          not null,
word   varchar2(80) not null,
PRIMARY KEY(no)
)');

execute immediate ('create global temporary table temp
(
person_id   int           not null,
first_name  nvarchar2(50) null,
last_name   nvarchar2(50) not null,
birth_date  date          null,
email       varchar2(80)  not null,
PRIMARY KEY(person_id)
)');

select Colm_name into Variable_name
from persons
where person_id between 311106 and 32500 and email like '%.com'
order by person_id;

insert into testwords
(
no, 
word
)
select 1, 'joy' from Table_name1
union all
select 4, single_email from Table_name2;

DBMS_OUTPUT.PUT_LINE(  '------------------ Testing '  || ' '  || CAST(sptotest AS  VARCHAR2)  || ' ----');  

open cur; 
 -- Cursor Processing
Close Cur;
end test_sp;
/ 
```

# svn - SVN 和 CVS 可下载的 windows 客户端

> ID：14581178
> 
> 赞同：0
> 
> 时间：2013-01-29T10:50:54.457
> 
> 标签：svn, cmd, cvs

如何在 cmd 行中使用 CVS 和 SVN 命令？我在哪里可以下载合适的 CVS 和 SVN.exe？

```
svn commit <filename>     
svn log <filename> 
```

到目前为止，我只发现了图形用户界面。（我知道我需要设置路径变量）（我现在使用乌龟，但我更喜欢命令行命令）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:55:40.727

适用于 Windows 的最新 CVS：http: [//ftp.gnu.org/non-gnu/cvs/binary/stable/x86-woe/](http://ftp.gnu.org/non-gnu/cvs/binary/stable/x86-woe/)

另见：[http ://www.nongnu.org/cvs/](http://www.nongnu.org/cvs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:51:59.870

好的，第一个：SVN客户端是： [http ://www.sliksvn.com/en/download](http://www.sliksvn.com/en/download)

第二（对于 CVS）？

# javascript - 如何使用require js绑定javascript动作

> ID：14581179
> 
> 赞同：2
> 
> 时间：2013-01-29T10:51:00.457
> 
> 标签：javascript, requirejs

在我的新项目中，网站中有很多按钮/a 元素（它们可能从 ajax 加载）。在以前的方法中，我将所有 javascript 编写在一个文件中以触发那些按钮/a 元素。

例如，

在我的 html 标记中：

```
 // Trigger "STH.foo" function
 <a href="/hello.html" class="action-button" data-action="STH.foo">foo</a>
 <button data-some-value="foo" class="action-button" data-action="STH.foo">foo</button>

 // Trigger "STH.blah" function
 <a href="/hello.html" class="action-button" data-action="ABC.blah">foo</a>
 <button data-some-value="foo" class="action-button" data-action="ABC.blah">foo</button> 
```

我的 javascript 中有什么

```
 var STH = {};
 // where foo dependence fancybox.js ( Let's say it needed fancybox.js )
 STH.foo = function(){ ... blah blah blah ... };
 // where blah dependence fancybox.js ( Let's say it needed bootstrap.js )
 ABC.blah = function(){ ... blah blah blah ... };
 // finally
 $( function(){
      $('.action-button').on('click', function(){
          STH.run($(this).attr('data-action'), $(this).data());
      }
 } 
```

为了处理之前的依赖关系，我所做的是将所有内容分组`fancybox.js`并`bootstrap.js`放入单个文件中，假设我将其命名为`library.js`

但是我发现代码越来越长，所以对于新项目，我开始使用`require.js`. 目前为止感觉还不错。但我不知道如何处理好我的渗透性`action-botton`。

假设`ABC`和`STH`是不同的命名空间，所以我分成 2 个 javascript 文件`ABC.js`和`STH.js`. 一旦按钮/ a 元素需要它，我就会...

```
 require(['fancybox'], function(){
     STH.blah();
 }) 
```

我的问题是，有什么想法可以编写一个处理程序来控制我所有的动作按钮，让它们自动加载所需的 javascript 文件并触发正确的动作吗？

# vb.net - 如何在 vb.net 中使 TreeView 中的 CheckBoxes 只读

> ID：14581190
> 
> 赞同：-4
> 
> 时间：2013-01-29T10:51:39.473
> 
> 标签：vb.net

谁能帮助我，因为我想禁用树视图中的复选框，同时能够滚动树视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:04:36.870

创建一个新类并复制下面的代码

```
Imports System.Windows.Forms
public class MyTreeView
Inherits Treeview
Protected Overrides Sub WndProc(ByRef m as system.Windows.Forms.Message)
if m.Msg = &H203 THEN
m.Result = IntPtr.Zero
else
MyBase.WndProc(m)
End If
End Sub 
```

编译您的项目并从您的工具箱中拖放这个新控件，或者转到您的设计器并将 System.Windows.Forms.Treeview 重命名为 MyTreeview。

转到您的 vb 代码并在 BeforeCheck 事件中说 e.Cancel = true

完毕！！！

如果您需要任何帮助，请发表您的评论。

# jquery - Jquery-Json.ParseUnexpected Character

> ID：14581193
> 
> 赞同：0
> 
> 时间：2013-01-29T10:51:51.767
> 
> 标签：jquery, ajax, json, parsing

我有以下 ajax 来调用我的服务，该服务从数据库中获取一些记录并将其填充到我的前端...但是我收到 json:unexpected character 错误...请您帮我解决这个问题...

```
'http://localhost/WcfService/Service1.svc/remarksList';

    var tempyear="";

    $.ajax({
                    url: urlToHandler,
                    data:JSON.stringify({oei:{"reqNo1":reqNo,"loginid":userid}}),
                    type: 'POST',
                    dataType:"json",
                    contentType: 'application/json',
                    success: function(data) {    

                    alert(data.fillRemarksListResult);
                    myData = JSON.parse(data.fillRemarksListResult, function (key, value) {
        var type;
        if (value && typeof value === 'object') {
            type = value.type;
            if (typeof type === 'string' && typeof window[type] === 'function') {
                return new (window[type])(value);
            }
        }
        return value;
    });
    alert(myData);
        $.each(data.fillRemarksListResult,function(key,val){

                alert(val.rmrkreqNo1);
                        });
                    },
                    error: function(data, status, jqXHR) {                       
                        alert('There was an error.');
                    }
                }); // end $.ajax

}); 
```

**现在我得到这个错误：**

**Json.parse:unexpected character myData=JSON.parse(data.fillRemarksListResult, function (key, value) {**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:51:47.703

您可以使用 dataType:"json" 或 JSON.parse..但不能同时使用两者..bcoz 它已经解析数据并发送它..reparsing 显然会抛出错误！

# asp-classic - 输出参数和存储过程

> ID：14581198
> 
> 赞同：0
> 
> 时间：2013-01-29T10:52:11.217
> 
> 标签：asp-classic

我用谷歌搜索，但似乎没有一个解决方案对我有用！我在 SQL Server 中有一个 SPROC，它有一个输入参数和一个在 SPROC 中设置的输出参数。

使用经典 ASP，我想检索该输出参数的值，但似乎没有设置任何内容（但在 SQL Server Management Studio 中执行时，我可以看到输出参数正常工作）

```
OpenConnection

Set cmdTemp = Server.CreateObject("ADODB.Command")
cmdTemp.CommandType = 4 'adCmdStoredProc
Set cmdTemp.ActiveConnection = dbConn
cmdTemp.CommandText =  "GetCerts"   
cmdTemp.Parameters.Refresh
cmdTemp.Parameters(1) = "ABC123"
cmdTemp.Parameters(2).Direction = 2 'Output

Set reader = cmdTemp.Execute

Response.Write(cmdTemp.Parameters(2)) ' Nothing is displayed at all. 

CloseConnection 
```

我尝试使用命名参数方法，但总是收到错误消息，指出参数超出范围、参数错误或类型错误（类似于此）。

真的……头疼。我只想要从 SPROC 设置的 OUTPUT 参数值（SPROC 中的第二个参数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:55:05.703

检查错误：

```
Set reader = cmdTemp.Execute

If Err.number <> 0 or  dbConn.Errors.Count <> 0 Then
   'Do something to handle the error
End If 
```

您是否有权执行存储过程？即 ASP 用户的凭据...

[从经典 ASP 执行存储过程](https://stackoverflow.com/questions/2689736/execute-stored-procedure-from-classic-asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:18:21.927

COM 世界中的大多数集合都使用从零开始的索引。尝试使用`Parameters(0)`作为输入参数和`Parameters(1)`作为输出参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:37:43.877

经过长时间的调查，我试图做的似乎是不可能的（但它在.NET中）。似乎我需要执行两次命令，第一次获取输出参数值，然后下一次显示结果。可怕。赞美.NET！

# java - 如何在启动时预初始化 DBCP 连接池？

> ID：14581201
> 
> 赞同：5
> 
> 时间：2013-01-29T10:52:40.360
> 
> 标签：java, database-connection, connection-pooling, spring-jdbc, apache-commons-dbcp

我的项目的设置是 -

1.  用于持久性的 Spring JDBC
2.  用于连接池的 Apache DBCP 1.4
3.  Linux 上的 MySQL 5

这是我的应用程序的日志，它捕获与数据库的交互。

```
2013-01-29 15:52:21,549 DEBUG http-bio-8080-exec-3 org.springframework.jdbc.core.JdbcTemplate - Executing SQL query [SELECT id from emp]
2013-01-29 15:52:21,558 DEBUG http-bio-8080-exec-3 org.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
2013-01-29 15:52:31,878  INFO http-bio-8080-exec-3 jdbc.connection - 1\. Connection opened  org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)
2013-01-29 15:52:31,878 DEBUG http-bio-8080-exec-3 jdbc.connection - open connections:  1 (1)
2013-01-29 15:52:31,895  INFO http-bio-8080-exec-3 jdbc.connection - 1\. Connection closed  org.apache.commons.dbcp.DelegatingConnection.close(DelegatingConnection.java:247)
2013-01-29 15:52:31,895 DEBUG http-bio-8080-exec-3 jdbc.connection - open connections:  none
2013-01-29 15:52:41,950  INFO http-bio-8080-exec-3 jdbc.connection - 2\. Connection opened  org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)
2013-01-29 15:52:41,950 DEBUG http-bio-8080-exec-3 jdbc.connection - open connections:  2 (1)
2013-01-29 15:52:52,001  INFO http-bio-8080-exec-3 jdbc.connection - 3\. Connection opened  org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)
2013-01-29 15:52:52,002 DEBUG http-bio-8080-exec-3 jdbc.connection - open connections:  2 3 (2)
2013-01-29 15:53:02,058  INFO http-bio-8080-exec-3 jdbc.connection - 4\. Connection opened  org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)
2013-01-29 15:53:02,058 DEBUG http-bio-8080-exec-3 jdbc.connection - open connections:  2 3 4 (3)
2013-01-29 15:53:03,403 DEBUG http-bio-8080-exec-3 org.springframework.jdbc.core.BeanPropertyRowMapper - Mapping column 'id' to property 'id' of type int
2013-01-29 15:53:04,494 DEBUG http-bio-8080-exec-3 org.springframework.jdbc.datasource.DataSourceUtils - Returning JDBC Connection to DataSource 
```

从日志中可以清楚地看出两件事——

1.  连接池仅在收到第一个执行查询的请求时才开始创建连接。
2.  4 个连接的池需要近 30 秒来初始化。

我的问题是——

1.  **应该如何配置 DBCP 以在启动时自动初始化？**
2.  **创建连接真的需要那么长时间吗？**

*注意：请不要建议切换到 C3P0 或 Tomcat 连接池。我知道这些解决方案。我更感兴趣的是了解手头的问题，而不仅仅是快速解决问题。此外，我确信 DBCP 也应该可以实现如此基本的东西。*

dbcontext 的内容 -

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${db.driver}" />
    <property name="url" value="${db.jdbc.url}" />
    <property name="username" value="${db.user}" />
    <property name="password" value="${db.password}" />
    <property name="maxActive" value="20" />
    <property name="initialSize" value="4" />
    <property name="testOnBorrow" value="true" />
    <property name="validationQuery" value="SELECT 1" />
</bean> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T16:22:28.073

在您第一次请求连接之前，initialSize 不会生效。从 java 文档到[BasicDataSource#setInitialSize](http://commons.apache.org/dbcp/api-1.2.2/org/apache/commons/dbcp/BasicDataSource.html#setInitialSize%28int%29)

> 设置连接池的初始大小。
> 
> 注意：一旦池初始化，此方法当前无效。第一次调用以下方法之一时初始化池：getConnection、setLogwriter、setLoginTimeout、getLoginTimeout、getLogWriter。

尝试添加`init-method="getLoginTimeout"`到您的 bean 以确认这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T13:51:49.163

对于 Web 应用程序，您可以`ServletContextListener.contextInitialized()`使用 DataAccess 层实现方法并触发测试查询（例如 Select ID From Emp Limit 1）。这应该初始化您的连接池并在您的应用程序开始为来自 Web 的真实用户提供服务之前使其准备就绪。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T11:20:07.253

看看[`initialSize`属性](http://commons.apache.org/dbcp/apidocs/org/apache/commons/dbcp/BasicDataSource.html#setInitialSize%28int%29)——尤其是关于池何时初始化的部分。正如 sbridges 指出的那样，您可以使用`init-method`bean 上的属性来调用其中一种方法来触发池创建。

此外，您应该了解为什么创建连接平均需要 7.5 秒...

干杯，

# git - phpstorm Git 文件颜色

> ID：14581202
> 
> 赞同：35
> 
> 时间：2013-01-29T10:52:47.450
> 
> 标签：git, phpstorm

当 Project 在 Git 下时，我的 PhpStorm 正在为更改的文件着色。我在哪里可以改变颜色？深蓝色的可读性不好。

谢谢

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-29T11:03:17.623

文件状态颜色可以在**设置 |更改。编辑 | 颜色和字体 | 文件状态**

**更新：**自 2018.x 起，它移至**设置/首选项 | 版本控制 | 文件状态颜色**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-01T06:39:53.070

更具体地说：在下面更改这三种颜色`File Status`

```
[option] Have changed descendants
[option] Have immediate changed children
[option] Modified 
```

# r - 如何绘制相对频率表

> ID：14581204
> 
> 赞同：2
> 
> 时间：2013-01-29T10:52:52.127
> 
> 标签：r

```
Src=as.factor(c("nc","us","us","nc","nc","ci","nn","pr","nc","nc","ak","ak","ak","ak","ci","hv","ak","ci","nc","nc"))
Version = as.factor(c(0,4,7,0,0,0,9,0,0,0,1,1,1,1,0,2,1,0,0,0))
table(Src,Version) 
```

输出：

```
 Version
Src  0 1 2 4 7 9
  ak 0 5 0 0 0 0
  ci 3 0 0 0 0 0
  hv 0 0 1 0 0 0
  nc 7 0 0 0 0 0
  nn 0 0 0 0 0 1
  pr 1 0 0 0 0 0
  us 0 0 0 1 1 0 
```

我可以显示相对频率，而不是显示计数的数字吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T10:59:01.850

当然。您可以使用`prop.table()`以下效果：

```
prop.table(table(Src, Version)) 
```

这将产生一个表格，如：

```
 Version
Src     0    1    2    4    7    9
  ak 0.00 0.25 0.00 0.00 0.00 0.00
  ci 0.15 0.00 0.00 0.00 0.00 0.00
  hv 0.00 0.00 0.05 0.00 0.00 0.00
  nc 0.35 0.00 0.00 0.00 0.00 0.00
  nn 0.00 0.00 0.00 0.00 0.00 0.05
  pr 0.05 0.00 0.00 0.00 0.00 0.00
  us 0.00 0.00 0.00 0.05 0.05 0.00 
```

您可以使用可选参数`margin`来请求行或列的相对频率。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T10:56:16.147

这确实是一个常见问题解答。

只需将您的表除以其总和：

```
tab <- table(Src,Version)
tab/sum(tab) 
```

另请参阅`?prop.table`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:56:30.303

一种选择是使用`barplot`with`beside=TRUE`来显示组之间的相对差异（图表不会随比例选项而变化，只是比例）。

```
 barplot(table(Src,Version),beside=TRUE) 
```

![在此处输入图像描述](../Images/bc5500abd8d9d528a78a3751439e3a86.png)

# java - BufferedReader.readLine() 等待来自控制台的输入

> ID：14581205
> 
> 赞同：7
> 
> 时间：2013-01-29T10:52:52.267
> 
> 标签：java, console, bufferedreader, readline, lines

我正在尝试从控制台读取文本行。行数事先不知道。BufferedReader.readLine() 方法读取一行，但在最后一行之后它等待来自控制台的输入。应该怎么做才能避免这种情况？

请看下面的代码片段：

```
 public static String[] getLinesFromConsole() {
    String strLine = "";
    try {
        // Get the object of DataInputStream
        InputStreamReader isr = new InputStreamReader(System.in);
        BufferedReader br = new BufferedReader(isr);
        String line = "";
        while ((line = br.readLine()) != null)
            strLine += line + "~"; //edited

        isr.close();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    }
    return strLine.split("~");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:57:27.853

下面的代码可能会修复，`exit`用您的需求特定字符串替换文本

```
 public static String[] getLinesFromConsole() {
    String strLine = "";
    try {
        // Get the object of DataInputStream
        InputStreamReader isr = new InputStreamReader(System.in);
        BufferedReader br = new BufferedReader(isr);
        String line = "";
        while ((line = br.readLine()) != null && !line.equals("exit") )
            strLine += br.readLine() + "~";

        isr.close();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    }
    return strLine.split("~");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:59:21.263

从控制台读取时，您需要定义一个“终止”输入，因为控制台（与文件不同）永远不会“结束”（即使在您的程序终止后它也会继续运行）。

您的问题有几种解决方案：

1.  将输入放入文件并使用 IO 重定向：`java ... < input-file`

    shell 会将您的进程与输入文件挂钩，您将获得一个 EOF。

2.  键入控制台的 EOF 字符。在 Linux 和 Mac 上，它是`Ctrl+D`，在 Windows 上，它是`Ctrl+Z`+`Enter`

3.  当你读到一个空行时停止。这样，用户可以简单地键入`Enter`.

PS：您的代码中存在错误。如果您调用`readLine()`两次，它将每隔一行跳过一次。

# android - 在特定时间从 web 服务接收通知

> ID：14581208
> 
> 赞同：-1
> 
> 时间：2013-01-29T10:53:01.820
> 
> 标签：android, service, broadcastreceiver

在我的应用程序中，我需要一个功能说：约会。约会将从网站创建。

一旦创建，在特定时间（比如预约时间）webservice 将被触发并发送

response.From android，我必须等待那个特定的响应并抓住那个响应，我会的

发送到通知。问题是..我如何发现网络服务正在发送响应，我该如何

每当服务发送响应时都会收到该响应。

如果any1给我提供明确的答案会更有帮助...

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:59:15.480

您要查找的内容称为推送通知。Google 通过 c2md（已弃用）和新的但几乎相同的 GCM 提供此功能。

通过搜索这两个术语，您可以找到很多有关此的信息。

我也可以推荐使用 UrbanAirship.com，因为它们大大简化了流程并且在收到大量通知之前是免费的。他们有大量的文档和示例，说明如何从作为服务器的两个客户端发送和接收。

# android - 使用位置管理器下载 Android 数据

> ID：14581209
> 
> 赞同：0
> 
> 时间：2013-01-29T10:53:06.210
> 
> 标签：android, synchronization, android-asynctask, locationmanager

当我从 locationManager 获取位置和从网页下载的数据时，有什么方法可以同步？数据是我计算距离的酒店（这就是我需要位置的原因）。

我启动位置管理器并在 onCreate 方法中开始下载，但我不知道哪个会先完成，以便我可以计算这些酒店的距离。我还在 AsyncTask 上设置了侦听器，以便在下载数据时通知活动。

我现在的解决方案是我启动 locationManager，当我获得位置时，我开始下载。我想如果我可以并行启动并在两者都完成时以某种方式得到通知，我可以减少加载时间。

# c# - 如何制作可以执行标记的 MSpec 测试的测试运行程序？

> ID：14581213
> 
> 赞同：0
> 
> 时间：2013-01-29T10:53:18.357
> 
> 标签：c#, mspec, test-runner

我有一套 mspec 测试用例，`[Tags]`每个测试用例都定义了属性。我现在必须在 .Net/C# 中创建一个测试运行程序，它将标签属性值（字符串数组）作为输入并运行相应的测试。我想知道我该怎么做 - 只是一些开始的指示。

*我无法控制测试脚本，因此无法修改它们。此外，我不能使用任何第三方测试运行器。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:08:39.987

只需使用捆绑的运行器 ( `mspec.exe`) 并将`--include`or`--exclude`参数与标签列表一起传递以包含在运行中或从运行中排除。

# ios - 如何使 iOS 应用程序窗口的背景图像居中

> ID：14581216
> 
> 赞同：0
> 
> 时间：2013-01-29T10:53:31.637
> 
> 标签：ios, background, uiimage, window

我一直在研究如何将应用程序的背景图像居中。这主要是为了允许我使用方形图像来减少要存储的资源量（并在进行更改时更新）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:53:31.637

这是我用来实现结果的代码

```
//  Create the window covering the bounds of the entire screen
self.window = [ [ [ UIWindow alloc ] initWithFrame:[ [ UIScreen mainScreen ] bounds ] ] autorelease ];

//  Set the background for the game.  This will show on the flip transition.
UIImageView  *bg = [ [ UIImageView alloc ] initWithImage: [ UIImage imageNamed: @"Background.png" ] ];
bg.frame = self.window.bounds;
bg.contentMode = UIViewContentModeCenter;

[ self.window addSubview: bg ];
[ self.window sendSubviewToBack: bg ];
[ bg release ]; 
```

# hibernate - 升级 Oracle JDBC 驱动程序后，Hibernate 条件查询引发异常

> ID：14581218
> 
> 赞同：1
> 
> 时间：2013-01-29T10:53:35.243
> 
> 标签：hibernate, jdbc, oracle11g

我最近将 Oracle 11g 的 JDBC 驱动程序`ojdbc14.jar`从`ojdbc6.jar`. 但是，以下条件查询现在不再起作用：

```
criteria = ...
criteria = criteria.createAlias("contract", "contract")
    .add(Restrictions.disjunction()
    .add(Restrictions.isNull("contract.dateend"))
    .add(Restrictions.gt("contract.dateend", new Date()))); 
```

这将结果限制为与仍在运行的合同相关联的实体。

出现以下异常：

```
...
Caused by: org.hibernate.exception.GenericJDBCException: could not execute query
    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.loader.Loader.doList(Loader.java:2536)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
    at org.hibernate.loader.Loader.list(Loader.java:2271)
    at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:119)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1716)
    at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:347)
    at org.hibernate.impl.CriteriaImpl.uniqueResult(CriteriaImpl.java:369)
    at <<my method which creates the criteria query>>
    ... 61 more
Caused by: java.sql.SQLException: year out of range.
    at oracle.jdbc.driver.DateCommonBinder.setOracleCYMD(OraclePreparedStatement.java:19241)
    at oracle.jdbc.driver.TimestampBinder.bind(OraclePreparedStatement.java:19520)
    at oracle.jdbc.driver.OraclePreparedStatement.setupBindBuffers(OraclePreparedStatement.java:3137)
    at oracle.jdbc.driver.OraclePreparedStatement.processCompletedBindRow(OraclePreparedStatement.java:2355)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3579)
    at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3628)
    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1493)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1953)
    at org.hibernate.loader.Loader.doQuery(Loader.java:802)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.doList(Loader.java:2533)
    ... 101 more 
```

如前所述，它仍然适用于旧驱动程序。相应的数据库列具有`DATE`应该由 Hibernate 映射到`java.util.Date`的类型：

```
<property name="dateend">
    <column name="DATEEND" length="7" />
</property> 
```

我是否必须更改此列的 Hibernate 映射？

在此先感谢，雷纳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:26:01.743

找到了这种行为的原因。类路径上有两个版本的 JDBC 驱动程序。我只更新了 Tomcat lib 文件夹中的 lib。`war`但是，我的存档中仍然有一个旧版本。这导致了错误

# android - GoogleTv 上的远程调试

> ID：14581220
> 
> 赞同：0
> 
> 时间：2013-01-29T10:53:45.073
> 
> 标签：android, adb, remote-debugging, google-tv

在 GoogleTv 上进行远程调试时，我遵循了这里提到的所有内容：[https](https://developers.google.com/tv/android/docs/gtv_hardware_devices) ://developers.google.com/tv/android/docs/gtv_hardware_devices 问题是我能够在 Windows 机器上进行远程调试，但同样的事情不适用于 UBUNTU。

在 Ubuntu 上，当我这样做时：

```
adb connect <ip> 
```

它显示已连接。但是当我这样做时：

```
adb devices 
```

它什么也没告诉我。重新启动 adb 服务器没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:05:47.947

冒着重蹈覆辙的风险。你的 Windows ip 地址是多少？你的 Ubuntu 的工作站 IP 地址是什么？

> 在**设置**应用程序中，选择**应用程序 > 开发**。
> 
> 设置**远程调试**以允许您的工作站连接到此设备。
> 
> 单击**Debugger IP address**，然后在对话框中输入工作站的 IP 地址并单击**Set**。

显然，这必须执行**两次，**因为您的 Windows 工作站的 IP 地址将与您的 Ubuntu 工作站的 IP 地址略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:55:09.560

如果它适用于 Windows 但不适用于 Ubuntu，请确保您的 Ubuntu 机器 IP 是 GTV 设备开发设置中指定的 IP。还要检查您在 Ubuntu 上的防火墙设置，如果您的 IP 正确，请尝试禁用防火墙并重新连接到您的 GTV 设备。如果可行，则为您的防火墙创建自定义规则。

# mysql - 以三个字母和四个数字开头的正则表达式

> ID：14581224
> 
> 赞同：0
> 
> 时间：2013-01-29T10:53:48.533
> 
> 标签：mysql, sql, regex

我已经编写了一条 sql 语句来从 Mysql db 中检索数据，并且我想选择 myId 以三个 alpha 和 4 位数字开头的数据示例：`ABC1234K1D2`

```
myId REGEXP '^[A-Z]{3}/d{4}' 
```

但它给了我空的结果（数据在数据库中可用）。有人可以指出我正确的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:58:29.070

在大多数正则表达式变体中，答案是：`/d`匹配 a`/`后跟 a `d`; 我想你想要`\d`哪个匹配一个数字。

然而，MySQL 的正则表达式实现有些有限（参见[文档](http://dev.mysql.com/doc/refman/5.5/en/regexp.html#operator_regexp)）。

没有像`\d`任何数字那样的字符集的捷径。

您需要使用命名字符集 ( `[[:digit:]]`)，或者只使用`[0-9]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T10:59:43.953

试试这个：

```
[A-Z]{3}[0-9]{4} 
```

如果您希望字符不区分大小写。试试这个 ：

```
[a-zA-Z]{3}[0-9]{4} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:11:47.857

首先，在*正*则表达式中，要匹配一个数字，您必须使用`\d`而不是`/d`（这使您匹配`/`后跟`d`）。

然后，我从来没有注意到，但我认为`\d`（以及其他类似的`\w`，等等）似乎在 MySQL 中不可用。该[文档](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)列出了接受的空间字符，并且没有出现那些通用类。你可以`[:digit:]`改用，即使`[0-9]`很短`;)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:00:41.597

你做得很好，只需替换`/d`为`\d`.
最终正则表达式：`^[A-Z]{3}\d{4}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T11:09:20.540

您可以使用以下模式：

```
^[a-zA-Z]{3}\d{4} 
```

# qt - qrc 文件使用 Qt 和 Visual Studio 2010 消失

> ID：14581227
> 
> 赞同：0
> 
> 时间：2013-01-29T10:53:56.213
> 
> 标签：qt

我在 Visual Studio 2010 中使用 Qt 创建 GUI。我已经完成了很多工作，然后我添加了选项卡小部件，随后的重建以丢失 qrc_file.cpp 结束，并且该文件确实从它的目录中消失了。当我返回到以前的备份并再次添加选项卡小部件时，问题再次出现。但这很奇怪，因为有时使用选项卡小部件构建成功，在这种情况下，qrc 文件会被下一次构建中的某些内容删除。

感谢您的体验！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T15:43:14.013

如果您添加到资源的文件不在其指定位置，则 qrc_something.cpp 文件可能会丢失。

例如，您在 C:\ 位置添加到资源文件 picture.png。

过了一会儿，你删除或删除了图片.png，编译器找不到它，所以它不能生成 qrc_something.cpp 文件，这就是你得到错误的原因。

要解决，只需从资源中删除图片.png 或更改其在资源中的位置字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:34:48.280

确保**Q_OBJECT**宏是类定义的第一行。

# java - 从 Eclipse 运行 Ant 时出现 UnsupportedClassVersionError

> ID：14581229
> 
> 赞同：5
> 
> 时间：2013-01-29T10:54:13.317
> 
> 标签：java, eclipse, ant, unsupported-class-version

我正在尝试从 Eclipse 运行 ant 脚本，但它失败并显示以下消息：

```
BUILD FAILED
project_path/build.xml:5:
java.lang.UnsupportedClassVersionError: com/sun/tools/javac/Main :
Unsupported major.minor version 51.0 
```

但是，当我从命令行 (./ant) 运行它时，它会按预期运行。
环境信息：

*   操作系统：Linux Mint 64
*   日食：朱诺 (4.2.1)
*   JDK：甲骨文 1.7.0_11
*   蚂蚁（命令行）：1.8.2

我还将“Ant Home”（在 Eclipse 设置中）设置为与我在命令行中使用的相同。

我在这个问题上搜索了很多，但我似乎找不到任何帮助，我可以尝试卸载我目前安装的所有 java (jdk/jre)，然后重新安装 java 7，但我不想采取这条路线。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T10:57:06.680

> UnsupportedClassVersionError：com/sun/tools/javac/Main：不支持的major.minor版本51.0

这表明版本之间存在一些混淆——Ant 试图`javac`在 Java 6 JVM 上运行 Java 7。查看您的项目属性、构建器、Ant Builder，并检查类路径部分。在带有新创建的 Ant Builder 的 Eclipse 上，我的 1.7 JDK 中的 tools.jar 列在用户条目 -> 附加任务和支持下。如果你有相同的，但你的 Eclipse 本身在 Java 6 上运行，那么它将无法工作。您可以通过安装详细信息 -> 配置下的“关于 Eclipse”框找出正在运行的 Java Eclipse 本身。这可能与您的项目配置使用的 Java 版本不同。

另一件可能修复它的事情是转到 ant builder 设置中的 JRE 选项卡，并告诉它在单独的 JRE 中运行，而不是在 Eclipse 进程中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:00:35.293

您的 Eclipse ant 任务正在尝试使用 Java7 之前的 JDK/JRE 运行 Java7 JDK 编译器。确保使用 Java7 JRE 来运行 Eclipse。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:58:51.907

通常，如果您在 Java 1.7 中编译 Java 程序，它将创建主版本为 51.0 的类文件，如果您在较低的 Java 版本上运行它，您将得到

```
 java.lang.unsupportedclassversionerror unsupported major.minor version 51.0 
```

查看[此](http://java67.blogspot.in/2012/10/how-to-fix-javalangunsupportedclassversionerror-major-minor-version-49-50-51.html)帖子以获取更多详细信息

# c++ - 并发队列推送函数的 C++ 返回值

> ID：14581232
> 
> 赞同：4
> 
> 时间：2013-01-29T10:54:24.883
> 
> 标签：c++, multithreading, concurrency, c++11, promise

在收到关于登录不同线程的上一个问题的答案后，我目前处于以下代码位（注意：这里的 concurrent_queue 来自 ppl，但任何其他 concurrent_queue 都应该工作）：

```
class concurrentFuncQueue
    {
    private:
        typedef std::function<void()> LambdaFunction;
        mutable concurrency::concurrent_queue<LambdaFunction> functionQueue;
        mutable std::atomic<bool> endcond;
        LambdaFunction function;
        std::thread thd;
    public:
        concurrentFuncQueue() : endcond(false), thd([=]{
            while (endcond != true)
            {
                if (functionQueue.try_pop( function ))
                {
                    function(); //note: I am popping a function and adding () to execute it
                }
            }
        }){}
        ~concurrentFuncQueue() { functionQueue.push([=]{ endcond = true; }); thd.join(); }
        void pushFunction(LambdaFunction function) const { functionQueue.push(function); }
    }; 
```

基本上，我推送的函数在不同的线程上按顺序运行（例如日志记录函数），以避免主线程上的性能问题。

目前的使用情况如下：

```
static concurrentFuncQueue Logger;
vector<char> outstring(256);
Logger.pushFunction([=]{ OutputDebugString(debugString.c_str()) }); 
```

到目前为止很棒。我可以将函数推送到并发队列中，该队列将在单独的线程上按顺序运行我的函数。

我还需要拥有一件事，但目前不是返回值，因此前（伪代码）：

```
int x = y = 3;
auto intReturn = Logger.pushFunction([=]()->int { return x * y; }); 
```

将 x * y 推入并发队列，并在函数弹出并完成后（在另一个线程上），将计算出的值返回给调用者线程。

（我知道我会阻塞调用者线程，直到返回推送的函数。这正是我想要的）

我觉得我可能不得不使用类似于 std::promise 的东西，但遗憾的是，我目前对它们的理解不足，使我无法制定可编码的东西。

有任何想法吗？对上述 C++ 代码的思考和任何其他评论也非常受欢迎（如果您觉得另一种实现更合适或解决问题，请完全忽略代码）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:04:50.907

您应该能够使用以下内容：

```
template<typename Foo>
std::future<typename std::result_of<Foo()>::type> pushFunction(Foo&& f) {
    using result_type = typename std::result_of<Foo()>::type; // change to typedef if using is not supported
    std::packaged_task<result_type()> t(f);
    auto ret_fut = t.get_future();
    functionQueue.push(std::move(t));
    return ret_fut;
} 
```

为此，您需要创建`LambdaFunction`一个类型擦除的函数处理程序。

# java - 如何只在一周内每天运行一次 timertask？

> ID：14581233
> 
> 赞同：0
> 
> 时间：2013-01-29T10:54:28.217
> 
> 标签：java

```
for(Date timerDate1=startDate; timerDate1<=cal3.add(cal3.DATE,7);startDate=cal3.add(cal3.DATE,1)) 
{ 
long period=60*60*1000; 
Timer timer = new Timer(); 
timer.schedule(new MyTask(),timerDate,period);
 cal3.add(cal3.DATE,1); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:41:35.890

代替 for 循环，使用单个 Timer，并将您的任务传递给`scheduleAtFixedRate`Timer 的方法之一，期间为`TimeUnit.DAYS.toMillis(1)`.

您的任务类应使用起始日期构建，并且该类应将该日期存储在字段中。在该类的`run`方法中，使用 Calendar 检查当前时间（负 7 天）是否晚于任务的开始日期，如果是，则立即调用`cancel()`并返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:04:18.063

使用 timer.scheduleAtFixedRate

```
void java.util.Timer.scheduleAtFixedRate(TimerTask task, long delay, long period)

scheduleAtFixedRate
public void scheduleAtFixedRate(TimerTask task,
                                long delay,
                                long period) 
```

安排指定任务以重复固定速率执行，在指定延迟后开始。随后的执行以大约固定的时间间隔进行，间隔指定的时间段。在固定速率执行中，每次执行都是相对于初始执行的计划执行时间安排的。如果由于任何原因（例如垃圾收集或其他后台活动）延迟执行，则将快速连续发生两次或更多执行以“赶上”。从长远来看，执行频率将恰好是指定周期的倒数（假设 Object.wait(long) 底层的系统时钟是准确的）。

固定速率执行适用于对绝对时间敏感的重复活动，例如每小时整点响铃，或每天在特定时间运行计划维护。它也适用于执行固定执行次数的总时间很重要的重复活动，例如每秒滴答一次、持续 10 秒的倒计时计时器。最后，固定速率执行适用于调度多个必须彼此保持同步的重复计时器任务。

参数： task - 要调度的任务。delay - 任务执行前的延迟毫秒数。period - 连续任务执行之间的时间（以毫秒为单位）。抛出： IllegalArgumentException - 如果延迟为负，或者延迟 + System.currentTimeMillis() 为负。IllegalStateException - 如果任务已被安排或取消，定时器被取消，或定时器线程终止。

# javascript - 断言使用 GET/POST 发出的请求

> ID：14581235
> 
> 赞同：0
> 
> 时间：2013-01-29T10:54:29.133
> 
> 标签：javascript, zombie.js

我有一个使用 ZombieJS 的测试设置。

单击页面中的按钮时，我会根据页面的当前状态向后端发出 Ajax 请求，这可能是 POST 或 GET。

是否有可能，使用 ZombieJS 断言某个请求已发出，以及该请求是发布还是获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T00:31:58.783

最好`getAttribute`在提交之前调用表单。

```
browser.query('#myform').getAttribute('method') 
```

提交后，你会做`assert.ok(browser.success)`.

# activemq - 手动向 ActiveMQ 发送消息的工具

> ID：14581237
> 
> 赞同：0
> 
> 时间：2013-01-29T10:54:37.763
> 
> 标签：activemq

我在 IBM MQ 上工作过，这是我在 ActiveMQ 上工作的第一个项目。阅读基本教程后，我发现两者都很相似。所以我开始创建小型应用程序来监听一些队列。

在使用 IBM MQ 时，我曾经使用 RFHUtil 工具来浏览/发送消息到队列，该队列也提供了设置消息头的功能。在 activeMQ 中，我从 localhost 管理控制台发送消息。我没有找到从这里设置消息头的选项。例如，如果我想在消息头中设置源系统。有什么方法/工具可以在 activeMQ 上获得此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:28:38.123

我喜欢hermes jms 如果要支持header，一定要选择Head版本。它与 RFHUtil 非常相似，但允许“所有”JMS 提供程序。

[http://hermesjms.com/patches/](http://hermesjms.com/patches/)

我还为同一任务制作了一个命令行工具，它很方便，称为[A](https://github.com/northlander/a)。

# silverlight - 对象从集合中移除后不会破坏

> ID：14581238
> 
> 赞同：0
> 
> 时间：2013-01-29T10:54:39.417
> 
> 标签：silverlight, memory-management, memory-leaks, silverlight-4.0, silverlight-5.0

在 Silverlight 中，我有一组选项卡项。单击按钮时，我将添加一个带有控件的新选项卡作为集合中的内容并将其显示到屏幕上。现在，我在屏幕上有一个“关闭”按钮，调用它，当前可见选项卡将从集合中删除，因此在屏幕中不再可见。

我注意到，虽然选项卡项已从选项卡项和集合中从集合中删除，但选项卡控制部分的析构函数并没有一直被调用。有时，它会在很长一段时间后被调用（并非总是如此）。

尽管该项目已被删除，但为什么要花时间调用对象的析构函数？我该如何解决这个问题？任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:10:43.973

垃圾收集器调用的对象的析构函数，在必要时。程序员不应依赖立即调用析构函数。

# mongodb - MongoDB：如何查找是否设置了 slaveOk=true

> ID：14581243
> 
> 赞同：1
> 
> 时间：2013-01-29T10:54:55.270
> 
> 标签：mongodb

我们在 Application 中使用 Mongo DB。为此，我们有一个小学和一个中学。

我如何确保我的应用程序正在从主要或次要读取数据？

我的问题是我怎么知道 slaveOk=true 是否设置？

提前致谢 。

**编辑部分**

不确定驱动程序我正在使用什么我通过 Java 连接 Mongo DB，如图所示

```
ServerAddress addr = new ServerAddress(new InetSocketAddress(host, port));
servAddrList.add(addr);
}
MongoOptions options = new MongoOptions();
options.autoConnectRetry = true;
options.connectionsPerHost = Config.intParam(
"mongo.connectionsPerHost", 1200);      
mongo = new Mongo("10.11.13.111", 27017); 
```

我正在使用 mongo 2.4.jar

请让我知道如何找到我正在使用的驱动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:53:33.417

在我看来，您要寻找的是 readPreference ：[http ://docs.mongodb.org/manual/applications/replication/#replica-set-read-preference](http://docs.mongodb.org/manual/applications/replication/#replica-set-read-preference)

在 api ( [http://api.mongodb.org/java/2.10.1/com/mongodb/ReadPreference.html](http://api.mongodb.org/java/2.10.1/com/mongodb/ReadPreference.html) ) 文档中有一个 isSlaveOk() 方法：[http ://api.mongodb.org/java/2.10 .1/com/mongodb/ReadPreference.html#isSlaveOk()](http://api.mongodb.org/java/2.10.1/com/mongodb/ReadPreference.html#isSlaveOk())

看到这个问题：[How to perform read operations from primary only](https://stackoverflow.com/questions/14575948/how-to-perform-read-operations-from-primary-only/14577035#14577035)

有设置阅读偏好的答案

```
mongo.setReadPreference(ReadPreference.primary()); 
```

你的答案是获得阅读偏好：

```
mongo.getReadPreference().isSlaveOk(); 
```

不幸的是，这些功能在 2.4 之后的版本中不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:34:39.017

看起来像早期的java驱动程序只有`mongo.slaveOk()`方法，调用它，它是slaveOk。没办法检查。

# php - PHP可以做到这一点吗？

> ID：14581251
> 
> 赞同：0
> 
> 时间：2013-01-29T10:55:22.800
> 
> 标签：php, arrays

PHP可以做到这一点。

我有多个这样的数组：

```
$x[1][2][3] = 10;
$x[1][2][4] = 5;
$x[1][2][3] = 2; 
```

当我使用`print_r($x)`结果是：

```
大批
(
    [1] => 数组
        (
            [2] => 数组
                (
                    [3] => 2
                    [4] => 5
                )

        )

)

```

我想做这个 ：

```
大批
(
    [1] => 数组
        (
            [2] => 数组
                (
                    [3] => 12
                    [4] => 5
                )

        )

)

```

也许您知道我不知道的获取结果的函数或脚本。

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:59:23.483

添加 ？

```
$x[1][2][3] = 10;
$x[1][2][4] = 5;
$x[1][2][3] = $x[1][2][3] + 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:00:13.817

你可以这样做：

```
$x[1][2][3] += 10;
$x[1][2][4] += 5;
$x[1][2][3] += 2; 
```

问题是，如果未定义密钥，您会收到通知。所以你必须先检查一下，密钥是否存在，例如`if(!isset($x[1][2][3])) {$x[1][2][3] = 0;}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:06:20.267

你想要做的是递增：

```
@$x[1][2][3] += 10;
@$x[1][2][4] += 5;
@$x[1][2][3] += 2; 
```

`@`用于抑制错误。像这样初始化索引会更好，更明确：

```
$x[1][2][3] = 0;
$x[1][2][4] = 0;

$x[1][2][3] += 10;
$x[1][2][4] += 5;
$x[1][2][3] += 2; 
```

# php - Smarty中定义的功能不起作用

> ID：14581252
> 
> 赞同：0
> 
> 时间：2013-01-29T10:55:24.633
> 
> 标签：php, function, smarty

我在其中定义了一个函数`pagination`，`global.tpl`然后将其包含在其中，并将其包含`global.tpl`在`header.tpl`我的`header.tpl`所有模板文件中，因此`global.tpl`也应该包含在我的所有模板文件中。

现在，当我尝试使用时，`{pagination}`我得到了`Unknown tag`结果，但是当我将`pagination`函数放在每个文件中时，没有任何问题。

我该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:06:38.933

我应该使用 更多信息`{call name=pagination}`的实例： [http ://www.smarty.net/docs/en/language.function.call.tpl](http://www.smarty.net/docs/en/language.function.call.tpl)`{pagination}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:06:49.980

您需要使用[`{call}`](http://www.smarty.net/docs/en/language.function.call.tpl)标签来调用已在另一个模板上定义的函数，如

```
{call name=pagination} 
```

另一种选择是从代码中创建一个插件[`registerPlugin`](http://www.smarty.net/docs/en/api.register.plugin.tpl)；您可以在`Smarty`派生类中执行此操作，并且可以直接从所有模板中使用。

# xcode - NSUserDefaults、UISwitch 和设置默认值

> ID：14581254
> 
> 赞同：2
> 
> 时间：2013-01-29T10:55:26.300
> 
> 标签：xcode, boolean, nsuserdefaults, uiswitch

我有一个 UISwitch 用于打开或关闭声音。使用 NSUserDefaults 保存状态。效果很好。但是如果应用程序在安装后从头开始启动，则 BOOL 值为 0，开关为 OFF。因为之前没有保存任何值。所以默认是关闭的，你可以打开它，下次它仍然是打开的。

我希望反过来，所以在安装应用程序时，默认情况下开关是打开的，您可以将其关闭。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:58:57.693

在`application:didFinishLaunchingWithOptions:`中，您检查是否已经设置了特定键。如果`nil`返回，则将其设置为您选择的默认值。请查看下面的代码段以进行说明。

我建议您`objectForKey:`在`if`语句中使用，因为这会使代码更容易且不易出错。当然，默认值可以是您喜欢的任何值。

**Objective-C**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];

    if (![ud objectForKey:@"YOUR_KEY"]) {
        [ud setBool:YES forKey:@"YOUR_KEY"];
    }

    // Your Custom Code

    return YES
} 
```

**斯威夫特 3**

```
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
    let ud = UserDefaults.standard

    if ud.object(forKey: "YOUR_KEY") == nil {
        ud.set(true, forKey: "YOUR_KEY")
    }

    // Your Custom Code

    return true
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:12:25.980

在 applicationDidFinish 加载中，只需检查您担心的值，如果为 null，则将它们设置为默认值，在您的情况下为 0 / OFF / NO。

对于所有 UI 元素也是如此。

# scala - 如何在 Scala 中从构造函数设置实例成员？

> ID：14581257
> 
> 赞同：1
> 
> 时间：2013-01-29T10:55:37.607
> 
> 标签：scala, constructor, instance, member

在 Scala 中，我需要在 Java 中执行以下代码：

```
public class A {
  private String text;  
  public A(String text) {
    this.text = text;
  }
} 
```

如何在 Scala 中实现这一点？

我知道我可以使用`class A(text: String) { ... }`，但这只是一个非常简化的示例，并非真实案例。

我尝试了以下方法，它始终打印为空：

```
class A {
  var text: String = null
  def this(text: String) = {
    this()
    this.text = text
  }
  println(text)
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T11:07:03.000

在 Scala 中，类只有一个主构造函数，而它正是您这样定义的：`class A(text: String) { ... }`. 所有其他构造函数都应该首先调用它，然后再做自己的事情。

类主体中的所有表达式都被视为主构造函数的主体。所以`println(text)`在你的情况下是在主构造函数的主体中。你首先调用`this()`你的`def this(text: String)`构造函数，所以`println`被执行，然后你才初始化`text`字段。

* * *

从我的角度来看，主构造函数可以满足大多数现实生活中的用例（尤其是使用默认和命名参数）。那么您能否详细说明一下并解释为什么需要第二个？也许我们可以为您在那里面临的问题找到更好的解决方案。

* * *

### 关于评论的更新

如果您想在构建期间提供一组可选参数，那么我建议您使用`Option`而不是`null`值。所以你可以`A`像这样实现你的类：

```
class A(val a: Option[String] = None, val b: Option[Int] = None, c: Option[Double] = Some(2.0)) 

new A(b = Some(10)) 
```

所有字段现在都是常量并具有一些默认值，但您可以自定义其中一些。例如，根据某些业务逻辑，某些参数组合也可能是互斥的。在这种情况下，使用多个构造函数是合理的。但更好的解决方案是在类的伴生对象中创建多个工厂方法并将构造函数设为私有。例如，如果允许该类的用户提供`a`and`b`或`c`，那么您可以编写如下内容：

```
class A private (val a: Option[String] = None, val b: Option[Int] = None, c: Option[Double] = Some(2.0)) 

object A {
    def apply(a: String, b: Int) = new A(Some(a), Some(b))
    def apply(c: Double) = new A(c = Some(c))
}

A("test", 1)
A(11.1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:45:21.657

```
class A {
  var text: String = null
  def this(text: String) = {
    this()
    this.text = text
    println(text)
  }
} 
```

或者

```
class A(text:String=""){
  println(text)
} 
```

或者

```
class A(text:String=null){
  println(text)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:16:40.490

正确的方法是：

```
 class A( text : String) {
       def this() = this("") // or null
   } 
```

正如 Tenshi 所说，默认构造函数是 the`A(text : String)`和所有其他构造函数，例如`this()`必须首先调用它。

# sql - 将 case 与聚合函数和 group by 子句一起使用

> ID：14581259
> 
> 赞同：4
> 
> 时间：2013-01-29T10:55:40.040
> 
> 标签：sql, group-by, case, aggregate-functions

我有一个使用 CASE 和聚合函数和 group by 子句的查询，像这样

```
SELECT
A
,B
,C
,CASE
     WHEN <COLUMN_NAME_A> IS NOT NULL 
     THEN (SUM(<COLUMN_NAME_B>) * <COLUMN_NAME_A>)
          ELSE 0
END AS <ALIAS>
FROM <TARGET_TABLE>
GROUP BY
A
,B
,C
,<ALIAS> 
```

我收到一个错误“GROUP BY 和 WITH...BY 子句可能不包含聚合”

然后，我更改了我的脚本（从 group by 中排除）

```
SELECT
A
,B
,C
,CASE
     WHEN <COLUMN_NAME_A> IS NOT NULL 
     THEN (SUM(<COLUMN_NAME_B>) * <COLUMN_NAME_A>)
          ELSE 0
END AS <ALIAS>
FROM <TARGET_TABLE>
GROUP BY
A
,B
,C 
```

并且仍然出现错误“选定的非聚合值必须是关联组的一部分”

请帮助我理解为什么必须成为 group by 的一部分，我该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T10:58:07.200

试试这个：

```
SELECT
A
,B
,C
,SUM(CASE
     WHEN <COLUMN_NAME_A> IS NOT NULL 
     THEN <COLUMN_NAME_B> * <COLUMN_NAME_A>
          ELSE 0
END) AS <ALIAS>
FROM <TARGET_TABLE>
GROUP BY
A
,B
,C 
```

但是您的 CASE 陈述毫无意义。If `<COLUMN_NAME_A>`is `NULL`ie `<COLUMN_NAME_B> * <COLUMN_NAME_A>`is `NULL`it 将被`SUM`聚合忽略。改用这个。

```
SELECT
A
,B
,C
,ISNULL(SUM(<COLUMN_NAME_B> * <COLUMN_NAME_A>), 0) AS <ALIAS>
FROM <TARGET_TABLE>
GROUP BY
A
,B
,C 
```

`ISNULL`用于没有检索到非空值的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-31T14:25:36.543

也许试试这个

```
SELECT  A
,B
,C
,CASE
     WHEN <COLUMN_NAME_A> IS NOT NULL 
     THEN (SUM(<COLUMN_NAME_B>) * <COLUMN_NAME_A>)
          ELSE 0
END AS <ALIAS>
FROM <TARGET_TABLE>
GROUP BY
A
,B
,C
,<COLUMN_NAME_A> 
```

# php - 如何在 Javascript 和 jQuery 中获取客户端 IP 地址？

> ID：14581264
> 
> 赞同：-8
> 
> 时间：2013-01-29T10:55:47.427
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [仅使用 Javascript 获取客户端 IP？](https://stackoverflow.com/questions/391979/get-client-ip-using-just-javascript)

我正在开发一个在线聊天应用程序，因为我有一个静态 IP 的服务器。我只想提供小 javascript 以包含在客户端网站中。这里我的要求是获取网站用户的 IP 地址和位置。我使用任何语言的网站，如 php、jsp、html、asp....对于任何网站，我的脚本都是相同的，请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:58:26.163

您不能仅使用 Javascript 检索用户 IP。Javascript 是一种客户端编程语言，因此您应该使用 AJAX 并连接到服务器以使用服务器端编程语言获取 IP 地址。

**更新：**

您可以在 PHP 中使用以下代码获取动态和静态 ip：

```
$domain=$_SERVER['REMOTE_ADDR'];
$domain1 = isset($_SERVER['HTTP_X_FORWARDED_FOR']);
echo "Viewer's Server's IP Address: <strong>$domain</strong> - ";
echo "Viewer's PC IP Address: <strong>$domain1</strong>"; 
```

如果您想返回，`json`可以使用以下命令：

```
$domain=$_SERVER['REMOTE_ADDR'];
$domain1 = isset($_SERVER['HTTP_X_FORWARDED_FOR']);
$data = array('static' => $domain1,
              'dynamic' => $domain);
echo json_encode($data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:02:37.633

无需使用 AJAX。
在您的 PHP 中：

```
$_SERVER['REMOTE_ADDR'] 
```

那是连接的客户端的 IP，假设他们没有使用代理等等。
[如果您需要在 JS 中使用它，请将此 IP 添加到脚本中的变量中。](https://stackoverflow.com/questions/415868/get-variable-from-php-to-javascript)

# c# - 从每个目录中选择最新的文件

> ID：14581266
> 
> 赞同：0
> 
> 时间：2013-01-29T10:56:02.217
> 
> 标签：c#

我正在使用它来选择一个根文件夹并从每个目录中获取最新文件，然后再将此文件添加到我的文件`listbox`中，但在某些情况下它不会选择最新文件。

```
var rootDirFile = Directory
    .EnumerateFiles(pathToSearch, "*.doc", SearchOption.TopDirectoryOnly)
    .OrderByDescending(f => File.GetLastWriteTime(f))
    .Take(1);

var allNewestFilesOfEachFolder = Directory
    .EnumerateDirectories(pathToSearch, "*.*", SearchOption.AllDirectories)
    .Select(d => Directory.EnumerateFiles(d, "*.doc")
        .OrderByDescending(f => File.GetLastWriteTime(f))
        .FirstOrDefault());

foreach (string tempFile in rootDirFile.Concat(allNewestFilesOfEachFolder))
{
    //add the file
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:59:42.360

`File.GetLastWriteTime` 看起来[并不总是在 WindowsVista/7 上可靠（请参阅我在这篇文章中的回答）。](https://stackoverflow.com/questions/9992223/file-getlastwritetime-seems-to-be-returning-out-of-date-value)

要创建更可靠的解决方案，您可以考虑使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)，但在这种情况下，您需要使用某种正在运行的服务。

或者可以考虑使用 if [File.GetCreationTime](http://msdn.microsoft.com/en-us/library/system.io.file.getcreationtime.aspx)，如果每次都实际创建“新”文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:22:57.757

这应该为您提供目录/最新文件对的列表：

```
var latestByDirectory = new DirectoryInfo(_strPath)
    .GetDirectories()
    .Select(d => new
    {
         Directory = d,
        LatestFile = d.GetFiles()
            .OrderByDescending(f => f.CreationTime)
            .DefaultIfEmpty((FileInfo)null)
            .ToList().First()
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:02:19.810

我们已经使用了一段时间，似乎没有任何问题。

我们不能使用`File.GetCreationTime`，因为无论创建时间如何，都会在文件中进行编辑。

```
while (Directory.GetFiles(dir, "*", SearchOption.TopDirectoryOnly).Count() > 7)
  {
     DirectoryInfo dirInfo = new DirectoryInfo(dir);
     FileSystemInfo fileInfo = dirInfo.GetFileSystemInfos().OrderBy(fileT => fileT.LastWriteTime).First();
     File.Delete(fileInfo.FullName);
  } 
```

# xamarin.ios - 什么是 Monotouch 中的 Monodroid 应用程序类等价物

> ID：14581268
> 
> 赞同：0
> 
> 时间：2013-01-29T10:56:14.470
> 
> 标签：xamarin.ios

在 monodroid 中，当您有一个属性希望其值在应用程序运行时始终保持唯一时，您可以像这样使用 Application 类： namespace RPLAndroidApp { [Application(Label="TestApp",Icon="@drawable/icon") ]公共类TestApp：应用程序{

```
 private int_tempV;
    public object tempV {
        get;
        set;
    }

public bool OfflineMode{
        get;
        set;
    }

    public override void OnCreate ()
    {
        try {
            base.OnCreate ();
} catch (Exception ex) {
            Common .HandleException (ex);
        }

    } 
```

我在我的应用程序中使用它，如下所示：

```
((TestAPP)Application).tempV 
```

现在，问题是这样的。我们如何在 Monotouch 中使用这种机制进行 iPhone 开发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:42:42.413

您可以为此目的使用**UIApplicationDelegate 。**

但我不认为这是一个好主意。当然，如果没有问题的知识，我不能肯定地说，但也许你需要创建一个简单的[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)类来保存你的属性值？

# android - 安卓平面按钮

> ID：14581269
> 
> 赞同：6
> 
> 时间：2013-01-29T10:56:15.297
> 
> 标签：android, button

我有带圆角的按钮，如何使它们看起来像这样：![在此处输入图像描述](../Images/6989e7f2fe47decc2070c45908a4b4ec.png)

我需要定义自己的风格吗？我不想更改我的代码，只更改 XML 资源，如果可能的话，如何将 this(border radius = 0) 样式应用于我的按钮？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T11:19:59.080

[http://android-holo-colors.com/](http://android-holo-colors.com/)

该服务为选中的组件生成 Holo 样式（按钮是您的情况），然后您可以下载带有 xml 的 zip。

使用它来快速轻松地实现或编写示例代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T11:08:58.607

我认为只有这样才能让你得到你想要的东西，让它编写 XML 使之成为可能。

在 drawable 文件夹中，创建一个代表按钮形状的 xml 文件。

例如

```
<?xml version="1.0" encoding="utf-8" ?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="true" >
    <shape>
      <solid
          android:color="#ff00ff" />
      <stroke
          android:width="1dp"
          android:color="#20f8f6" />
      <corners
          android:radius="6dp" /> // set to 0 or erase it for sharp corners
      <padding
          android:left="10dp"
          android:top="10dp"
          android:right="10dp"
          android:bottom="10dp" />
    </shape>
  </item>
  <item>
    <shape>
      <gradient
          android:startColor="#ff00ff"
          android:endColor="#992f2f"
          android:angle="270" />
      <stroke
          android:width="1dp"
          android:color="#992f2f" />
      <corners
          android:radius="6dp" />
      <padding
          android:left="10dp"
          android:top="10dp"
          android:right="10dp"
          android:bottom="10dp" />
    </shape>
  </item>
</selector> 
```

那么你需要在你的styles.xml文件中创建一个样式

```
<resources>
  <style name="button_text" >
    <item name="android:layout_width" >fill_parent</item>
    <item name="android:layout_height" >wrap_content</item>
    <item name="android:textColor" >#ffffff</item>
    <item name="android:gravity" >center</item>
    <item name="android:layout_margin" >3dp</item>
    <item name="android:textSize" >30dp</item>
    <item name="android:textStyle" >bold</item>
    <item name="android:shadowColor" >#000000</item>
    <item name="android:shadowDx" >1</item>
    <item name="android:shadowDy" >1</item>
    <item name="android:shadowRadius" >2</item>
  </style>
</resources> 
```

当你在 xml 中声明你的按钮时

```
 <Button
        android:background="@drawable/red_button"
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Styled Button"
        style="@style/button_text" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-05T07:08:18.420

[在此处](https://github.com/hoang8f/android-flat-button)查看此 github 帖子。

主要检查那里提供的库并添加到该源代码中。

**快照：**

![扁平按钮](../Images/04a645630cc33dfac86d6377a4e5012e.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-04T21:13:30.627

在可绘制文件夹中添加 xml(example.xml)：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle">
            <corners android:topLeftRadius="4dip"
                android:topRightRadius="4dip"
                android:bottomLeftRadius="4dip"
                android:bottomRightRadius="4dip"/>
            <solid android:color="#1FC1BA"/>
        </shape>
    </item>

    <item android:state_focused="true">
        <shape android:shape="rectangle">
            <corners android:topLeftRadius="4dip"
                android:topRightRadius="4dip"
                android:bottomLeftRadius="4dip"
                android:bottomRightRadius="4dip"/>
            <solid android:color="#26262C"/>
        </shape>
    </item>
    <item android:state_pressed="true">
        <shape android:shape="rectangle">
            <corners android:topLeftRadius="4dip"
                android:topRightRadius="4dip"
                android:bottomLeftRadius="4dip"
                android:bottomRightRadius="4dip"/>
            <solid android:color="#1B978F"/>
        </shape>
    </item>

</selector> 
```

在按钮中的文件夹布局（activity_main.xml）上

*   android:background="@drawable/example"

    ```
     <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="exampleText"
            android:layout_gravity="center"
            android:background="@drawable/example"
            android:textColor="#ffffffff" /> 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T11:29:33.377

我认为下面的代码正是您正在寻找的。

```
 <?xml version="1.0" encoding="utf-8" ?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

  <item>
    <shape>
      <gradient
          android:startColor="#32a5cf"
          android:endColor="#32a5cf"
          android:angle="270" />
      <stroke
          android:width="7dp"
          android:color="#9032a5cf"
           />
      <corners
          android:radius="6dp" />
      <padding
          android:left="10dp"
          android:top="10dp"
          android:right="10dp"
          android:bottom="10dp" />
    </shape>
  </item>
</selector> 
```

# jquery - 拖动克隆元素（ ui.draggable.clone() ）拖动原始元素（jquery）

> ID：14581274
> 
> 赞同：0
> 
> 时间：2013-01-29T10:56:21.253
> 
> 标签：jquery, jquery-ui, draggable, jquery-ui-draggable, jquery-draggable

我有两列带有可拖动的 li 元素。当我将元素从一列拖到另一列时，我需要克隆拖动的元素并将其附加到新列（我希望元素也保留在前一列中）。

```
 ls.droppable({      // ls refers to the column containing draggable elements
         greedy:true,
         hoverClass: 'drop-hover',
         over: function (e, u) {

         },
         drop: function (e, u) {

             afterDrop(u, $(this));
         }
   }); 
```

afterDrop 函数是

```
 window.afterDrop = function (u, ls) {
      var c = u.draggable.clone(true, true);
      var d = jQuery('.onestrip', ls);
      d.append(c);
      } 
```

现在，当我在另一列中拖动新添加的元素时，前一列中的旧元素被拖动。如何将单独的可拖动元素附加到拖动元素（我尝试禁用然后再次附加可拖动元素，但仍然相同）

编辑：我遇到了类似的情况，请查看此链接[http://jsbin.com/aseqid/4/edit](http://jsbin.com/aseqid/4/edit) .... 尝试将红色框拖放到绿色框中。然后再次尝试拖动先前放置的红色框...拖动事件未附加到放置的红色框...我已尝试将事件附加到放置的框，但它仍然引用原始红色框

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:21:44.783

这是您要寻找的行为吗？

已将“ID”测试更改为“类”并进行了一些调整

我已经更新了你的代码

[http://jsbin.com/aseqid/10/edit](http://jsbin.com/aseqid/10/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:45:25.740

我相信它的行为方式是因为您正在使用可拖动的数据和事件克隆新的附加元素。

尝试使用`clone()`instead of `clone(true, true)`，并在新元素上初始化所需的数据和事件，而不是全部克隆它们。

[http://jsbin.com/aseqid/8/edit](http://jsbin.com/aseqid/8/edit)

```
drop:function(e,u){
    var a=u.draggable.clone();
    a.removeAttr('id'); // Remove the id attribute, no dup 'id'
    initialize(a);      // Create an initialize function, or do it in here
    console.log(e.target)
    $(this).append(a);
} 
```

# java - 如何在“war”文件之外创建目录：（在项目目录之外）

> ID：14581277
> 
> 赞同：0
> 
> 时间：2013-01-29T10:56:38.757
> 
> 标签：java, jakarta-ee, web-applications, directory, war

如何在`war`我的 web-app 文件之外创建一个目录？到目前为止，我一直在制作如下目录：

```
(request.getServletContext().getRealPath("/")).mkdir() 
```

但我想在`build`我的项目文件夹之外创建目录？我该怎么做呢 ？

（这是在服务器没有解压战争的情况下）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:37:42.827

我能想到的最简单的方法是创建一个类，如：

```
class FolderMaker{
      private String base="/home/user/base/"; // should be configurable, but this is sample

      public boolean mkdir(name){
          return new File(base, name).mkdir();
      }
} 
```

这个类的工作方式类似于一个简单的 Java SE 类，它在磁盘的某处创建一个目录。

# c++ - 从 QComboBox 中选择一个文件并打开 Qt C++

> ID：14581281
> 
> 赞同：-1
> 
> 时间：2013-01-29T10:56:49.837
> 
> 标签：c++, file, qt

我有一个窗口，我将在其中打开一个文件，然后将其放入主窗口。问题是变量它是主窗口的，而不是这个窗口的

```
 ui->nameEdit->setText(text);
        ui->textEdit->setText(name);
        ui->dateEdit->setDate(fecha); 
```

错误 C2039：“nameEdit”：不是“Ui::pacientes”的成员

怎么可能做到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:25:54.083

当您`QComboBox`填写正确时，您希望在该项目上设置目录。例如，您在`QComboBox`file1.dat、file2.txt 和 file3.xml 中有 3 个文件。

然后我会将`QComboBox::currentIndexChanged(int index)`信号连接到函数并执行类似...

`QString pathToDirectory = "C://Users//Jaime//Desktop//interfaz//pacientes"; QString currentFileName = cmb.currentText(); <br> QFile file( QString("%1//%2").arg(pathToDirectory, currentFileName) ); <br> // do stuff with that file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:05:30.003

利用：

```
comb.currentText() 
```

字符限制

# erlang - 如何启动几个非otp进程并用不同的名字注册它们

> ID：14581291
> 
> 赞同：1
> 
> 时间：2013-01-29T10:57:11.187
> 
> 标签：erlang

对于我的一个“学习项目”，我有一组 erlang 进程（实现 gen_server 的不同模块）。这些进程中的每一个都会产生并监督一个子进程，该子进程包含在一个不实现 otp 行为的单个模块中。

因此我有以下情况：

```
gen_server_a <-> module_a
gen_server_b <-> module_b
gen_server_c <-> module_c 
```

每个子进程都做同样的事情：

1.  使用模块的名称注册自身（例如 module_a）
2.  在产卵期间根据父级传递的配置参数进行一些操作
3.  使用其注册名称接收来自父级的命令

现在，我知道这远非完美。我想抽象架构以便仍然有 3 个 gen_servers，但只有一个用于子部分的梁文件，这样我就可以实现以下目标：

```
gen_server_a <-> module_generic (registered as module_a)
gen_server_b <-> module_generic (registered as module_b)
gen_server_c <-> module_generic (registered as module_c) 
```

我怎样才能实现这样的目标？只是在生成过程中传递一个用于注册进程的原子？还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:09:45.740

在`module_generic`构建一个`start_link/1`生成进程函数然后注册 Pid 的自己的过程中：

```
 start_link(Name) ->
    Pid = spawn_link(?MODULE, loop, []),
    register(Name, Pid),
    Pid. 
```

# python - Python GTK 内存分配问题

> ID：14581292
> 
> 赞同：0
> 
> 时间：2013-01-29T10:57:18.477
> 
> 标签：python, memory, gtk, objgraph

我实际上试图在我的 python gtk 应用程序中修复我的内存问题。

我已经阅读了很多关于 python 内存使用的文章，但我无法全部了解，所以我希望你能在这里帮助我。

因此，如果我启动我的应用程序并打开设置窗口，我的内存使用量为 32368 KB。

现在，如果我关闭设置窗口，内存使用量也是 32368 KB。

这是我如何打开和关闭设置窗口的代码示例：

**主文件**

```
...
    def show_settings(self):
        self.settings = Settings()
        self.settings.window.connect("destroy", self.clear_settings)

    def clear_settings(self, widget, Data=None):
        del self.settings

class Settings():
    def __init__():
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        ... 
```

现在我尝试使用 objgraph 分析活动引用。这就是结果：

**打开设置窗口**

![打开设置窗口](../Images/c8c75d78576d127d86dc68e9df95bfbc.png)

**关闭设置窗口后**

![关闭设置后](../Images/190cb9935c9f83b47f59fa4f14f299d6.png)

有人可以帮助如何释放内存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:24:32.867

Python 中的内存分配发生在多个级别。首先，内存是由 C 库的系统分配器组件从系统分配的（这将显示在 Unix *ps*或 Windows*任务管理器*给出的内存使用数据中）。*然后，通过诸如malloc*之类的 C 库调用将分配的内存分配为更小的块，如果更小的块则由 Python 自己的内存分配器（用于存储对象）分配。此外，Python 为不同的对象维护不同的分配池（以优化某些对象，例如*str*与*int*）。

为了将内存返回给系统，它必须由 Python 的分配器取消分配，然后由 C 库的堆分配器和页面分配器分配。何时发生这种情况很难确定，因为它取决于许多因素，例如您运行的系统、C 库的版本、Python 自己的版本和您的应用程序的分配模式。

分配器通常会保留一些空闲内存（称为空闲列表），以便通过避免每次需要新内存时进行系统调用（代价高昂）来加快分配速度。每个分配器都有一些阈值，这些阈值确定何时实际分配内存或释放到下一个级别。

所以你根本不能指望通过删除一个对象来改变系统内存分配（即*ps* /*任务管理器*输出）。

如果您有特定的内存分配问题，有些是巨大的临时对象，并且您希望随着时间的推移尽量减少内存使用量，那么您需要提出一个更具体的问题 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:17:32.090

我觉得这里没有错。你的`Settings`实例被释放后消失了，这是正常的。您如何测量内存使用情况？

# java - 将所选代码与 ASTNode 进行比较

> ID：14581299
> 
> 赞同：0
> 
> 时间：2013-01-29T10:57:48.523
> 
> 标签：java

我在 eclipse helios 中做了一个用于解析（AST）和比较代码的插件。首先，我解析代码并保留 MethodDeclaration 节点。然后我从代码中选择一个方法与节点的方法进行比较。

我将代码`SelectedText selectedText`和节点保存在`MethodDeclaration method`.

我如何比较这两个变量以知道它们是否持有相同的代码？？？我已经完成了下一个代码，但它不起作用：

```
for (MethodDeclaration method : visitor.getMethods()) {                       
          if(selectedText.getSelectedText().equals(method.toString())){
              MessageDialog.openInformation(shell, "COMPARISON", "GOOD");                 
          }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:02:51.833

您还需要将所选代码解析为 AST；否则白色空间的简单差异就像`a=0`和`a = 0`会有所不同。

查看 Java 编辑器的源代码，应该可以向它询问当前选择的方法的 AST 节点。

# c++ - 如何在linux上获取文件类型？

> ID：14581301
> 
> 赞同：1
> 
> 时间：2013-01-29T10:57:57.057
> 
> 标签：c++, c, linux, file

我需要在不使用 linux 上的文件扩展名的情况下获取文件类型。有“文件”实用程序，可以做到这一点。如何使用 C/C++ 做同样的事情？不是'system（const char *）'，当然......谢谢）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T11:05:51.147

AFAIK`file`在`libmagic`. 如需更多参考，请参阅：

*   `file`来源
*   也许这个链接： http: [//linux.die.net/man/3/libmagic](http://linux.die.net/man/3/libmagic)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:59:17.260

要么`file`作为子进程调用，要么模拟它的作用。如果您想智能地检查文件的内容以猜测它包含的内容，则没有其他选择。

# c# - 如何在 Sharepoint Inputformtextbox 控件的 RTE 窗口中获取当前光标位置？

> ID：14581304
> 
> 赞同：0
> 
> 时间：2013-01-29T10:58:12.610
> 
> 标签：c#, sharepoint

我使用 Sharepoint InputformTextBox 控件创建了一个自定义 Web 部件来输入富文本项目。

我必须在 InputformTextBox 控件的 RichTextEditor 窗口中的光标位置插入图像。

我有一个图像按钮，单击它时，我试图在 RTE 窗口的光标位置插入图像。但我无法获得当前光标位置。

这是代码，

protected void btnimgnew_Click(object sender, ImageClickEventArgs e) {
string newImage = ""; **txtcontent.Text = txtcontent.Text.Insert(indexPosition, newImage.ToString());** }

如何在 InputformTextBox 控件的 RichTextEditor 窗口中获取光标位置？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:39:15.790

当前光标位置是 javascript。

```
var rng = RTE.Cursor.get_range().$3_0; 
```

以上将选择所选文本的范围。这将在该范围之后插入一些东西（在这种情况下，由变量 a 定义的“东西”）：

```
 SP.UI.UIUtility.insertAfter(a, rng); 
```

# jquery - 使用弹出窗口登录

> ID：14581306
> 
> 赞同：1
> 
> 时间：2013-01-29T10:58:24.810
> 
> 标签：jquery, login, asp.net-mvc-4, popup, linkedin

我在 MVC 中工作，我希望能够使用弹出窗口实现登录系统。

我坚持的部分是，当弹出窗口中发生成功登录时 - 它需要关闭并且必须在主页上进行重定向。我正在努力实现这一目标，因为我遇到了 JQuery 的一大堆范围问题。

我用这个创建我的弹出窗口：

```
window.open('@Url.Action("Login", "User", null, "http")', 'Login', 'height=500,width=300'); 
```

能够预先`var window =`添加到上面的代码会很好，这样我就能够重新登录成功登录时要关闭的窗口 - 但该变量超出了我的登录窗口的范围：

```
@{
  ViewBag.Title = "Login";
}

<h2>Login</h2>

<p id="login-fail" style="display:none">Incorrect username/password</p>

@using (Html.BeginForm()) {
  @Html.LabelFor(x => x.Email, new { id = "txt-email" })
  @Html.TextBoxFor(x => x.Email)
  <br />
  <label for="txt-password">Password</label>
  <input id="txt-password" type="password" />
  <input type="submit" value="Login" />
}

<script type="text/javascript">
  $(function () {
    var success = '@Model.Success';
    if (success == "True") {
      loginSuccess(this.window);
    }
    var failed = '@Model.Failed';
    if (failed == "True") {
      $("#login-fail").show();
    }
  });
</script> 
```

我在发布表单时刷新部分视图，并在加载页面时检查 Jquery 是否成功。成功后，我尝试将当前窗口传递给一个名为 loginSuccess 的 js 函数：

```
function loginSuccess(elem) { // successful login has occurred
  elem.close();
  window.location = //getRedirect;
} 
```

到目前为止，我无法关闭弹出窗口，然后在设置重定向时需要将注意力集中在主窗口上。

我有一个名为 functions 的 javascript 文件，我的主窗口和弹出每个引用。但是，创建弹出窗口的 js 不在函数文件中，并且 window 变量对任何一个窗口都不可用。

长话短说，我试图模拟 LinkedIn 登录过程，因此通过调用调用创建弹出窗口的代码`IN.UI.Authorize().place();`- 这排除了返回窗口变量，因为无论我使用我的模拟 LinkedIn 还是真正的一个。

非常感谢任何帮助，特别是以某种方式引用弹出窗口，然后重新聚焦到重定向的主窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:10:27.297

听起来你需要使用 window.top 函数：

[http://www.w3schools.com/jsref/prop_win_top.asp](http://www.w3schools.com/jsref/prop_win_top.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:06:30.933

我发现`functions js file`从两个页面引用我会导致问题，因为主页的`js`文件可能能够引用子页面，但根据子页面的`js`文件等，这将是空的。

`window.opener`通过调用附加到父窗口的函数，帮助我解决了这个问题：

```
<script type="text/javascript">
  $(function () {
    var success = '@Model.Success';
    if (success == "True") {
      window.opener.loginSuccess(window);
    }
    var failed = '@Model.Failed';
    if (failed == "True") {
      $("#login-fail").show();
    }
  });
</script> 
```

弹出窗口现在关闭并在主页上发生重定向。

# gwt - 无法格式化 GXT Grid Cell 中的数值数据？

> ID：14581311
> 
> 赞同：0
> 
> 时间：2013-01-29T10:58:50.940
> 
> 标签：gwt, gxt

我想格式化数值`1,23,456`并在网格中显示数据。我修改了 Grid 列渲染器以返回我上面提到的字符串。下面是渲染器代码：

```
String value = NumberFormat.getFormat("#,##,##0").format(123456d); 
```

但是我得到了如下的价值`123,456`。有人可以帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:45:43.700

该方法`format`只允许一种分组大小：

```
protected void format(boolean isNegative, StringBuilder digits, int scale) {
...
    int currentGroupingSize = this.groupingSize;
... 
```

因此，当您的格式模式被分析时，它采用第一个分组大小。

例如，如果我们尝试

```
String value = NumberFormat.getFormat("#,###,#0").format(123456d); 
```

我们将得到 12,34,56

希望这可以帮助。

# ruby-on-rails-3 - 更新部分主干模型

> ID：14581313
> 
> 赞同：1
> 
> 时间：2013-01-29T10:58:53.457
> 
> 标签：ruby-on-rails-3, backbone.js, model

我知道以前有人问过这个问题，并且我可以使用它，但是我不确定它是如何/为什么起作用的，并且希望有人可以向我解释。

我有一个模型，一次只更改一个属性。我不想每次都将整个模型发送到服务器，因为不需要就地编辑。

我这样保存模型

```
更新字段：函数（e）{
    var value = $('#update').val();
    var key = $(e.currentTarget).parent().attr('id');
    MyModel.attributes[key] = value;
    MyModel.save({key: value},{patch: true},{
                成功：函数（）{
                    警报（“已保存”）；
                },
                错误：函数（）{
                    alert('更新配方有问题');
                }});
    },

```

当我查看发送到服务器的有效负载时，整个模型都在发送，但 rails 控制台只显示更新的字段正在更新。我觉得这令人印象深刻，但同时也令人困惑。它如何知道需要更新的内容。

我认为我对此最大的抱怨是 Paperclip 试图保存附件，即使更新中没有保存附件。

我在这里做错了吗？Backbone 如何告诉 Rails 更新哪些属性。有没有办法真正只发送必要的属性？

另外，由于某种原因，我的成功功能没有被触发。虽然我怀疑这是相关的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:16:06.273

补丁同步**不会**发送整个模型，它只会发送您提供的属性`model.save()`作为第一个参数：

```
model.save({foo: 'bar'}, {patch:true}); // -> PATCH /model/id {foo:bar} 
```

我将在这里冒险并猜测您使用的是旧版本的 Backbone。`PATCH`仅在 中添加了支持`0.9.9`，而在早期版本中，该`patch:true`参数将被简单地忽略。如果这是正确的，那么您实际上是在`PUT`向资源发送请求。

当您说控制台仅显示正在更新的更新字段时，我不知道足够多的 Rails 来说明这意味着什么，但是由于您在每次字段更改后发送更新，那么 ActiveRecord / 您可能使用的任何 ORM 可能足够智能，只复制和更新实际更改的字段——在您的情况下，是您期望的字段，因为所有其他字段都与数据库中已有的字段匹配。

否则我可能会完全偏离基础，实际上还有其他问题。如果是这种情况，请回复，我将编辑/删除我的答案。

**编辑：**另外，您的成功处理程序没有被调用，因为您错误地传递了它。而不是像您在此处那样传递三个参数：

```
MyModel.save({key: value},{patch: true},{success:...}); 
```

save 方法只需要两个参数，要设置的属性和选项哈希，它可以定义多个选项，包括`patch`和`success`：

```
MyModel.save({key: value},{patch: true, success:...}); 
```

# android - SDK工具R21的android模拟器分辨率不如老版本？

> ID：14581316
> 
> 赞同：0
> 
> 时间：2013-01-29T10:59:06.633
> 
> 标签：android, android-emulator, android-sdk-tools

我刚刚下载了最新版本的**SDK Tools R21 (Revision 21.0.1)**。

然后我通过 SDK Tools R21 的 Android 虚拟设备管理**为 Galaxy Nexus 创建了 AVD 。**

但是当我在**SDK Tools R21**和**SDK Tools R11 （旧版本）上启动这个****AVD**时，我发现R11的**AVD 的分辨率****比****R21**好。

 ******我不知道为什么这些版本的 SDK 工具的分辨率不同。

哪一个是正确的？我想将SDK Tools升级到最新版本，但是我认为最新版本的模拟器不如旧版本（R11）。

我在两个版本上都发布了图像，每个人都可以看到它们之间的区别。感谢您的任何解释。

![在此处输入图像描述](../Images/0cb000c41dfa9462b13543a42284a03a.png)

![在此处输入图像描述](../Images/74efb005cc68ca0dc7350cf976a23306.png)

**[R21的AVD](https://i.stack.imgur.com/5gnxh.png)**

![在此处输入图像描述](../Images/9139c56390d5e3c331d34bc7d287454a.png)

**[R11 的 AVD（你可以看到图标比 R21 的 AVD 小）](https://i.stack.imgur.com/NXNZL.png)**

![在此处输入图像描述](../Images/b8fd6ea36b5884f5cbd6336ad2ebe68c.png)******

# pyephem - pyephem 准确的日期范围是多少？

> ID：14581327
> 
> 赞同：4
> 
> 时间：2013-01-29T10:59:40.307
> 
> 标签：pyephem

我目前正在使用 Swiss Ephemeris，但它需要非常大的外部数据文件。所以，我正在考虑[Pyephem](http://rhodesmill.org/pyephem/)，它似乎在没有任何数据文件的情况下运行良好。但是它有效/准确的日期范围是多少？SwissEph 工作了近 10,000 年。我最感兴趣的是与公元前 3000 年和公元 1900 年接壤的几个世纪。感兴趣的数量是日出和日落时间，以及太阳和月球经度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-17T20:57:37.320

我相信 PyEphem 完全是科学级的。它利用了 LibAstro 和 XEphem，所以我相信它和它们一样准确，*非常*准确。

在公元 1900 年左右的几个世纪里，你绝对是黄金时代。在他的哈雷彗星示例中，Brandon Rhodes 使用 1066 年。请参阅[fixed-objects-precession-and-epochs](http://rhodesmill.org/pyephem/tutorial.html#fixed-objects-precession-and-epochs)。

我发现你的问题是因为我也对古代历史的时代和年份感到好奇。如果你查看我关于类似问题的[github issue](https://github.com/brandon-rhodes/pyephem/issues/61)，你会发现我得到的结果与 100000 年前和 100000 年前的一些亲天文学家相同。

希望这能回答你的问题:)

# php - 自定义排序和值

> ID：14581343
> 
> 赞同：0
> 
> 时间：2013-01-29T11:00:22.580
> 
> 标签：php, mysql, codeigniter, sorting

我想对一些表数据进行排序，但使用自定义顺序：

我想首先显示第二个结果，然后是第一个，然后是第三个，第四个等等。

这是我的查询的一部分：

```
SELECT order FROM table ORDER BY order DESC LIMIT 0 
```

它会给我像`8`, `6`, `5`, `3`, `2`,这样的值`1`

但我需要得到`6`, `8`, `5`, `3`, `2`, `1`（第二个结果成为第一个）

并且这些值 ( `8`, `6`, `5`....) 永远不会相同。

我怎样才能做到这一点？

PS：它托管在 上`godaddy`，所以我不确定定义自定义函数是否有效，`CodeIgniter`如果有帮助，我正在使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:04:19.070

您可以 UNION 三个查询：

*   第二个结果
*   第一个结果
*   休息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:03:08.260

如果此排序仅适用于前 2 个值，则您可以按原样执行查询，然后在客户端中切换前 2 个结果。

# c - 返回指向 C 中的临时对象的指针

> ID：14581344
> 
> 赞同：3
> 
> 时间：2013-01-29T11:00:32.907
> 
> 标签：c, pointers, return, temporary

> **可能重复：**
> [返回指向文字（或常量）字符数组（字符串）的指针？](https://stackoverflow.com/questions/4836534/returning-a-pointer-to-a-literal-or-constant-character-array-string)

下面的代码是否正确？

```
const char* state2Str(enum State state)
{
   switch (state)
   {
      case stateStopped: return "START";
      case stateRunning: return "RUNNING";
      default: return "UNKNOWN";
   }
}

printf("State is: %s\n", state2Str(stateRunning)); 
```

让我担心的是该函数返回一个指向临时对象的指针。这种返回值的生命周期是多少？语言为 C89。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T11:01:37.457

代码很好。您正在返回一个指向字符串文字的指针，该字符串在您的程序期间有效。

来自 C89 标准：

> 3.1.4 字符串字面量
> 
> 字符串文字具有静态存储持续时间和类型“char 数组”，并使用给定字符进行初始化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T11:02:52.843

对于您问题中的代码，您*不会*返回指向临时对象的指针。您正在返回一个指向字符串文字的指针，该字符串文字存储在代码或全局数据中。所有字符串文字的持续时间是程序的生命周期。

# javascript - 用mysql删除额外的行

> ID：14581348
> 
> 赞同：0
> 
> 时间：2013-01-29T11:00:44.897
> 
> 标签：javascript, mysql, sql

我有一个包含表的数据库。

```
create table student (
    stu_code integer,
    stu_name varchar(32),
    primary key (stu_code)
)
create table teacher (
    tea_code integer not null,
    tea_name varchar(25),
    primary key (tea_code)
)
create table course (
    cor_code integer not null,
    cor_name varchar(32),
    salary float(32),
    unit integer,
    primary key (cor_code)
)
create table term (
    stu_code integer,
    cor_code integer,
    tea_code integer,
    grade decimal(25),
    year integer,
) 
```

我已经手动填写了三个表格。

术语表是由 Javascript 代码生成的：

```
<html>
<body>
<div id="rnd"></div>
<script type="text/javascript">
    function rnd(a,b){
        return Math.floor(Math.random()*(b-a+1))+a;
    }
    for (var i=0;i<600;i++) {
        var stu = rnd(41,49),
        cor     = rnd(10,26),
        tea     = rnd(81,90),
        year    = rnd(1391,1392),
        grade   = rnd(8,20);
        (year==1392)?grade = null:true;
        document.writeln(
            "insert into term (stu_code,cor_code,tea_code,grade,year) values "
            +"(884221"              +stu+","
            +"180"                  +cor+","
            +"15120"                +tea+","
            +grade                  +"," 
            +year
            +");"
            +"<br>"
        );
    }
</script>
</body>
</html> 
```

我的问题是术语表中有额外的行。

如何集成/删除其他行？

有没有办法在没有额外随机行的情况下填充表格？

**/* 更新 ： */**

例如 ：

```
insert into term (s,c,t,g) values (45,16,88,16,91);
insert into term (s,c,t,g) values (45,16,86,10,91);
insert into term (s,c,t,g) values (45,16,87,8,91);
insert into term (s,c,t,g) values (41,15,85,20,91);
insert into term (s,c,t,g) values (41,15,88,17,91); 
```

现在我想显示：

```
insert into term (s,c,t,g) values (45,16,88,16,91);
insert into term (s,c,t,g) values (41,15,85,20,91);
or 

insert into term (s,c,t,g) values (45,16,88,16,91);
insert into term (s,c,t,g) values (41,15,88,17,91);
or

insert into term (s,c,t,g) values (45,16,86,10,91);
insert into term (s,c,t,g) values (41,15,85,20,91);
or 

insert into term (s,c,t,g) values (45,16,86,10,91);
insert into term (s,c,t,g) values (41,15,88,17,91);
or

insert into term (s,c,t,g) values (45,16,87,8,91);
insert into term (s,c,t,g) values (41,15,85,20,91);
or 

insert into term (s,c,t,g) values (45,16,87,8,91);
insert into term (s,c,t,g) values (41,15,88,17,91); 
```

**/*结束更新*/**

**/* 再次更新 */**

我可以在 Sql Server 中编写代码 但是这段代码在 Mysql 中不起作用，为什么？Mysql中这段代码的等价物是什么？

```
delete  from  term
where  stu_code in(
select  stu_code
from  term
group  by  stu_code,cod_code,year
having  COUNT(stu_code)>=2 
```

**/* 结束最后一次更新 */**

请帮我解决这个问题！

谢谢：x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:26:31.480

假设每个学生可以报读多门课程，并且每个学生应该只报读一门课程。

由于您只有学生 [41,49] 和课程 [10,26]，因此最多有 9 * 17 = 153 种组合。

我会这样做：

```
<html>
<body>
<div id="rnd"></div>
<script type="text/javascript">
    function rnd(a,b){
        return Math.floor(Math.random()*(b-a+1))+a;
    }
    for (var stu = 41; stu <= 49; stu++) {
        for (var cor = 10; cor <= 26; cor++) {
            tea   = rnd(81,90);
            year  = rnd(1391,1392);
            grade = rnd(8,20);
            (year==1392)?grade = null:true;
            document.writeln(
                "insert into term (stu_code,cor_code,tea_code,grade,year) values "
                +"(884221"              +stu+","
                +"180"                  +cor+","
                +"15120"                +tea+","
                +grade                  +"," 
                +year
                +");"
                +"<br>"
            );
        }
    }
</script>
</body>
</html> 
```

**对于您更新的部分**

假设您要保留具有最小值的记录`year`

```
DELETE a FROM 
    term a JOIN term b 
    ON (a.stu_code = b.stu_code AND a.cod_code = b.cod_code AND a.year > b.year) 
```

所以这个查询的作用是找出并删除所有重复的行，并将较大的行放在`year`左边。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:55:25.290

```
delete  from  term
where  stu_code in(
select  stu_code
from  term
group  by  stu_code,cod_code,year
having  COUNT(stu_code)>=2 
```

> 我认为该查询的问题在于，如果 stu_code >= 2，它将删除所有 stu_code，甚至没有一个副本。如果有多个副本，你想保留 1 个副本。

# c# - 使用 NAudio 转换为 WAV 后使用 SoundPlayer 播放 MP3

> ID：14581349
> 
> 赞同：4
> 
> 时间：2013-01-29T11:00:45.583
> 
> 标签：c#, .net, naudio

我想使用 NET 提供的[System.Media.SoundPlayer](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx)机制播放从网上下载的 MP3 文件。由于它适用于 WAV 格式，它需要例如[NAudio](http://naudio.codeplex.com/)库的支持——我需要将 MP3 转换为 WAV。

我想在内存中进行所有操作，因为我需要它被称为快速，但我有问题。下面我展示了按预期工作的代码，但它与文件协作。相反，我只需要使用内存操作使其工作。

(1) 有效，但涉及磁盘操作：

```
public void Speak(Uri mp3FileUri)
{
    using (var client = new WebClient())
    {
        using (var networkStream = client.OpenRead(mp3FileUri))
        {
            if (networkStream != null)
            {
                var temp = Path.GetTempPath();
                var mp3File = Path.Combine(temp, "file.mp3");
                var wavFile = Path.Combine(temp, "file.wav");
                using (var fileStream = File.Create(mp3File))
                {
                    networkStream.CopyTo(fileStream);
                }
                using (var reader = new Mp3FileReader(mp3File))
                {
                    WaveFileWriter.CreateWaveFile(wavFile, reader);
                }                        
                using(var player = new SoundPlayer(wavFile))
                {
                    player.Play();
                }
            }
        }
    }
} 
```

(2) 不起作用 - 不抛出异常，但不播放任何内容：

```
public void Speak(Uri mp3FileUri)
{
    using (var client = new WebClient())
    {
        using (var networkStream = client.OpenRead(mp3FileUri))
        {
            if (networkStream != null)
            {
                var memStream = new MemoryStream();
                networkStream.CopyTo(memStream);
                memStream.Position = 0;
                using (var reader = new Mp3FileReader(memStream))
                {
                    var outStream = new MemoryStream();
                    using (var writer = new WaveFileWriter(outStream, reader.WaveFormat))
                    {
                        var num = 0L;
                        var buffer = new byte[reader.WaveFormat.AverageBytesPerSecond * 4];
                        while (true)
                        {
                            var count = reader.Read(buffer, 0, buffer.Length);
                            if (count != 0)
                            {
                                num += count;
                                if (num <= int.MaxValue)
                                    writer.Write(buffer, 0, count);
                                else
                                    throw new InvalidOperationException("Too large file or endless stream.");
                            }
                            else
                                break;
                        }
                        writer.Flush();
                        outStream.Position = 0;
                        using(var player = new SoundPlayer(outStream))
                        {
                            player.Play(); /* why silence ? */
                        }
                    }                            
                }
            }
        }
    }
} 
```

怎么做？第二个代码示例有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:47:37.383

根据 Lee Harrison 的回答，我创建了更好的替代代码。

(3) 直接从WEB播放MP3文件，不转换为WAV，不使用磁盘操作：

```
public void Speak(Uri mp3FileUri)
{
    using (var client = new WebClient())
    {
        using (var networkStream = client.OpenRead(mp3FileUri))
        {
            if (networkStream != null)
            {
                using (var memStream = new MemoryStream())
                {
                    networkStream.CopyTo(memStream);
                    memStream.Position = 0;                            
                    using (var waveOut = new WaveOut(WaveCallbackInfo.FunctionCallback()))
                    {
                        var waveEvent = new ManualResetEvent(false);
                        waveOut.PlaybackStopped += (sender, e) => waveEvent.Set();
                        waveEvent.Reset();
                        using (var rdr = new Mp3FileReader(memStream))
                        using (var waveStream = WaveFormatConversionStream.CreatePcmStream(rdr))
                        using (var baStream = new BlockAlignReductionStream(waveStream))
                        {
                            waveOut.Init(baStream);
                            waveOut.Play();
                            if (waveOut.PlaybackState != PlaybackState.Stopped)
                            { 
                                waveEvent.WaitOne(); /* block thread for a while because I don't want async play back                                
                                                        (to be analogical as usage of SoundPlayer Play method) */
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

尽管如此（尽管这对我来说非常好），我仍然不知道样本（2）有什么问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T15:52:33.967

为什么不跳过使用 SoundPlayer 直接通过 NAudio 播放 MP3？NAudio 就是为此而设计的。只需将 MP3 下载到某个地方的临时文件中，然后使用 NAudio 播放，完成后删除临时文件。我不认为可以做任何事情来减少下载文件时的延迟。

[http://naudio.codeplex.com/wikipage?title=MP3](http://naudio.codeplex.com/wikipage?title=MP3)

# php - 进入数据库后如何触发请求？

> ID：14581350
> 
> 赞同：0
> 
> 时间：2013-01-29T11:00:47.613
> 
> 标签：php, mysql, ajax

我在我的一个项目中开发了一个新闻和活动提要，它的工作原理非常基本，并且自动更新新闻提要我每 30 秒后触发一个 ajax 请求，这似乎是自动更新提要的最不有效的方式. 服务器上的负载变得很重，有时当其他 ajax 请求被触发时会发生意想不到的事情。

那么有什么方法可以在 ebtry 进入 db 之后触发请求。你可以在这里看到我的整个代码[http://www.techknowlogists.com/how-to-create-facebook-like-news-feed-with-php-and-jquery/](http://www.techknowlogists.com/how-to-create-facebook-like-news-feed-with-php-and-jquery/)

这是我写的教程，但我想改进它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:06:55.270

据我所知，当将值输入数据库时​​，您无法触发事件。但是，有一种更好的方法可以使用`websockets`. 这些比 AJAX 请求稍微高级一些，但它们会提供您想要的。

网络上有很多关于 websocket 的参考资料。这些是其中的一些：

[http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)

[http://www.davesite.com/html5-code-tutorials/html5_interactive_intro_html_5/websockets/](http://www.davesite.com/html5-code-tutorials/html5_interactive_intro_html_5/websockets/)

[https://stackoverflow.com/questions/4262543/what-are-good-resources-for-learning-html5-websocket](https://stackoverflow.com/questions/4262543/what-are-good-resources-for-learning-html5-websocket)

# python - 使用 python 中的 optimize.leastsq 方法获取拟合参数的标准错误

> ID：14581358
> 
> 赞同：42
> 
> 时间：2013-01-29T11:01:04.973
> 
> 标签：python, scipy, data-fitting

我有一组数据（位移与时间），我使用 optimize.leastsq 方法拟合了几个方程。我现在正在寻找拟合参数的错误值。查看文档，输出的矩阵是雅可比矩阵，我必须将它乘以残差矩阵才能得到我的值。不幸的是，我不是统计学家，所以我有点沉迷于术语。

据我了解，我所需要的只是与我的拟合参数一起使用的协方差矩阵，因此我可以对对角线元素进行平方根以获得拟合参数的标准误差。我有一个模糊的记忆，协方差矩阵是 optimize.leastsq 方法的输出。这个对吗？如果不是，您将如何让残差矩阵将输出的雅可比矩阵乘以得到我的协方差矩阵？

任何帮助将不胜感激。我对 python 很陌生，因此如果这个问题被证明是一个基本问题，我深表歉意。

拟合代码如下：

```
fitfunc = lambda p, t: p[0]+p[1]*np.log(t-p[2])+ p[3]*t # Target function'

errfunc = lambda p, t, y: (fitfunc(p, t) - y)# Distance to the target function

p0 = [ 1,1,1,1] # Initial guess for the parameters

  out = optimize.leastsq(errfunc, p0[:], args=(t, disp,), full_output=1) 
```

args t 和 disp 是时间和位移值的数组（基本上只有 2 列数据）。我已经在代码顶部导入了所有需要的东西。输出提供的拟合值和矩阵如下：

```
[  7.53847074e-07   1.84931494e-08   3.25102795e+01  -3.28882437e-11]

[[  3.29326356e-01  -7.43957919e-02   8.02246944e+07   2.64522183e-04]
 [ -7.43957919e-02   1.70872763e-02  -1.76477289e+07  -6.35825520e-05]
 [  8.02246944e+07  -1.76477289e+07   2.51023348e+16   5.87705672e+04]
 [  2.64522183e-04  -6.35825520e-05   5.87705672e+04   2.70249488e-07]] 
```

无论如何，我怀疑这种合身性现在有点可疑。当我可以解决错误时，这将得到确认。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2014-02-18T04:58:51.170

更新于 2016 年 4 月 6 日

## 在大多数情况下，在拟合参数中获得正确的错误可能是微妙的。

让我们考虑拟合一个`y=f(x)`您有一组数据点的函数`(x_i, y_i, yerr_i)`，其中`i`是一个在每个数据点上运行的索引。

在大多数物理测量中，误差`yerr_i`是测量设备或程序的系统不确定性，因此可以将其视为不依赖于 的常数`i`。

### 使用哪个拟合函数，如何获取参数误差？

该`optimize.leastsq`方法将返回分数协方差矩阵。将此矩阵的所有元素乘以残差方差（即减少的卡方）并取对角元素的平方根将为您提供拟合参数的标准偏差的估计值。我已将执行此操作的代码包含在以下函数之一中。

另一方面，如果您使用`optimize.curvefit`，则上述过程的第一部分（乘以减少的卡方）在幕后为您完成。然后，您需要对协方差矩阵的对角元素求平方根，以估计拟合参数的标准差。

此外，`optimize.curvefit`提供可选参数来处理更一般的情况，其中`yerr_i`每个数据点的值不同。从[文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.curve_fit.html)中：

```
sigma : None or M-length sequence, optional
    If not None, the uncertainties in the ydata array. These are used as
    weights in the least-squares problem
    i.e. minimising ``np.sum( ((f(xdata, *popt) - ydata) / sigma)**2 )``
    If None, the uncertainties are assumed to be 1.

absolute_sigma : bool, optional
    If False, `sigma` denotes relative weights of the data points.
    The returned covariance matrix `pcov` is based on *estimated*
    errors in the data, and is not affected by the overall
    magnitude of the values in `sigma`. Only the relative
    magnitudes of the `sigma` values matter. 
```

### 我如何确定我的错误是正确的？

确定拟合参数中标准误差的正确估计是一个复杂的统计问题。协方差矩阵的结果，由有关误差的概率分布和参数之间的相互作用的假设实现`optimize.curvefit`并实际依赖于假设；`optimize.leastsq`可能存在的交互，具体取决于您的特定拟合函数`f(x)`。

在我看来，处理复杂问题的最佳方法`f(x)`是使用引导方法，该方法在[此链接](http://phe.rockefeller.edu/LogletLab/whitepaper/node17.html)中进行了概述。

### 让我们看一些例子

首先，一些样板代码。让我们定义一个波浪线函数并生成一些带有随机误差的数据。我们将生成一个随机误差很小的数据集。

```
import numpy as np
from scipy import optimize
import random

def f( x, p0, p1, p2):
    return p0*x + 0.4*np.sin(p1*x) + p2

def ff(x, p):
    return f(x, *p)

# These are the true parameters
p0 = 1.0
p1 = 40
p2 = 2.0

# These are initial guesses for fits:
pstart = [
    p0 + random.random(),
    p1 + 5.*random.random(), 
    p2 + random.random()
]

%matplotlib inline
import matplotlib.pyplot as plt
xvals = np.linspace(0., 1, 120)
yvals = f(xvals, p0, p1, p2)

# Generate data with a bit of randomness
# (the noise-less function that underlies the data is shown as a blue line)

xdata = np.array(xvals)
np.random.seed(42)
err_stdev = 0.2
yvals_err =  np.random.normal(0., err_stdev, len(xdata))
ydata = f(xdata, p0, p1, p2) + yvals_err

plt.plot(xvals, yvals)
plt.plot(xdata, ydata, 'o', mfc='None') 
```

[![图01](../Images/cbbd2441b195b72efaf8896487e46b1a.png)](https://i.stack.imgur.com/msQU1.png)

现在，让我们使用各种可用的方法来拟合函数：

### `optimize.leastsq`

```
def fit_leastsq(p0, datax, datay, function):

    errfunc = lambda p, x, y: function(x,p) - y

    pfit, pcov, infodict, errmsg, success = \
        optimize.leastsq(errfunc, p0, args=(datax, datay), \
                          full_output=1, epsfcn=0.0001)

    if (len(datay) > len(p0)) and pcov is not None:
        s_sq = (errfunc(pfit, datax, datay)**2).sum()/(len(datay)-len(p0))
        pcov = pcov * s_sq
    else:
        pcov = np.inf

    error = [] 
    for i in range(len(pfit)):
        try:
          error.append(np.absolute(pcov[i][i])**0.5)
        except:
          error.append( 0.00 )
    pfit_leastsq = pfit
    perr_leastsq = np.array(error) 
    return pfit_leastsq, perr_leastsq 

pfit, perr = fit_leastsq(pstart, xdata, ydata, ff)

print("\n# Fit parameters and parameter errors from lestsq method :")
print("pfit = ", pfit)
print("perr = ", perr) 
```

```
# Fit parameters and parameter errors from lestsq method :
pfit =  [  1.04951642  39.98832634   1.95947613]
perr =  [ 0.0584024   0.10597135  0.03376631] 
```

### `optimize.curve_fit`

```
def fit_curvefit(p0, datax, datay, function, yerr=err_stdev, **kwargs):
    """
    Note: As per the current documentation (Scipy V1.1.0), sigma (yerr) must be:
        None or M-length sequence or MxM array, optional
    Therefore, replace:
        err_stdev = 0.2
    With:
        err_stdev = [0.2 for item in xdata]
    Or similar, to create an M-length sequence for this example.
    """
    pfit, pcov = \
         optimize.curve_fit(f,datax,datay,p0=p0,\
                            sigma=yerr, epsfcn=0.0001, **kwargs)
    error = [] 
    for i in range(len(pfit)):
        try:
          error.append(np.absolute(pcov[i][i])**0.5)
        except:
          error.append( 0.00 )
    pfit_curvefit = pfit
    perr_curvefit = np.array(error)
    return pfit_curvefit, perr_curvefit 

pfit, perr = fit_curvefit(pstart, xdata, ydata, ff)

print("\n# Fit parameters and parameter errors from curve_fit method :")
print("pfit = ", pfit)
print("perr = ", perr) 
```

```
# Fit parameters and parameter errors from curve_fit method :
pfit =  [  1.04951642  39.98832634   1.95947613]
perr =  [ 0.0584024   0.10597135  0.03376631] 
```

### `引导`

```
def fit_bootstrap(p0, datax, datay, function, yerr_systematic=0.0):

    errfunc = lambda p, x, y: function(x,p) - y

    # Fit first time
    pfit, perr = optimize.leastsq(errfunc, p0, args=(datax, datay), full_output=0)

    # Get the stdev of the residuals
    residuals = errfunc(pfit, datax, datay)
    sigma_res = np.std(residuals)

    sigma_err_total = np.sqrt(sigma_res**2 + yerr_systematic**2)

    # 100 random data sets are generated and fitted
    ps = []
    for i in range(100):

        randomDelta = np.random.normal(0., sigma_err_total, len(datay))
        randomdataY = datay + randomDelta

        randomfit, randomcov = \
            optimize.leastsq(errfunc, p0, args=(datax, randomdataY),\
                             full_output=0)

        ps.append(randomfit) 

    ps = np.array(ps)
    mean_pfit = np.mean(ps,0)

    # You can choose the confidence interval that you want for your
    # parameter estimates: 
    Nsigma = 1\. # 1sigma gets approximately the same as methods above
                # 1sigma corresponds to 68.3% confidence interval
                # 2sigma corresponds to 95.44% confidence interval
    err_pfit = Nsigma * np.std(ps,0) 

    pfit_bootstrap = mean_pfit
    perr_bootstrap = err_pfit
    return pfit_bootstrap, perr_bootstrap 

pfit, perr = fit_bootstrap(pstart, xdata, ydata, ff)

print("\n# Fit parameters and parameter errors from bootstrap method :")
print("pfit = ", pfit)
print("perr = ", perr) 
```

```
# Fit parameters and parameter errors from bootstrap method :
pfit =  [  1.05058465  39.96530055   1.96074046]
perr =  [ 0.06462981  0.1118803   0.03544364] 
```

## 观察

我们已经开始看到一些有趣的东西，所有三种方法的参数和误差估计几乎一致。那很好！

现在，假设我们想告诉拟合函数我们的数据中还有一些其他的不确定性，可能是系统不确定性会导致 20 倍的额外误差`err_stdev`。这是*一个很大*的错误，事实上，如果我们模拟一些具有这种错误的数据，它看起来像这样：

[![在此处输入图像描述](../Images/8cfd4913e4310ef15792a40217c71d34.png)](https://i.stack.imgur.com/RRljw.png)

在这种噪音水平下，我们当然没有希望恢复拟合参数。

首先，让我们意识到`leastsq`甚至不允许我们输入这个新的系统错误信息。让我们看看`curve_fit`当我们告诉它错误时会发生什么：

```
pfit, perr = fit_curvefit(pstart, xdata, ydata, ff, yerr=20*err_stdev)

print("\nFit parameters and parameter errors from curve_fit method (20x error) :")
print("pfit = ", pfit)
print("perr = ", perr) 
```

```
Fit parameters and parameter errors from curve_fit method (20x error) :
pfit =  [  1.04951642  39.98832633   1.95947613]
perr =  [ 0.0584024   0.10597135  0.03376631] 
```

什么？？这肯定是错的！

这曾经是故事的结尾，但最近`curve_fit`添加了`absolute_sigma`可选参数：

```
pfit, perr = fit_curvefit(pstart, xdata, ydata, ff, yerr=20*err_stdev, absolute_sigma=True)

print("\n# Fit parameters and parameter errors from curve_fit method (20x error, absolute_sigma) :")
print("pfit = ", pfit)
print("perr = ", perr) 
```

```
# Fit parameters and parameter errors from curve_fit method (20x error, absolute_sigma) :
pfit =  [  1.04951642  39.98832633   1.95947613]
perr =  [ 1.25570187  2.27847504  0.72600466] 
```

这有点好，但仍然有点可疑。 `curve_fit`认为我们可以从噪声信号中得到拟合，`p1`参数误差为 10%。让我们看看`bootstrap`有什么要说的：

```
pfit, perr = fit_bootstrap(pstart, xdata, ydata, ff, yerr_systematic=20.0)

print("\nFit parameters and parameter errors from bootstrap method (20x error):")
print("pfit = ", pfit)
print("perr = ", perr) 
```

```
Fit parameters and parameter errors from bootstrap method (20x error):
pfit =  [  2.54029171e-02   3.84313695e+01   2.55729825e+00]
perr =  [  6.41602813  13.22283345   3.6629705 ] 
```

啊，这也许是对我们拟合参数误差的更好估计。`bootstrap`认为它知道`p1`大约 34% 的不确定性。

## 概括

`optimize.leastsq`并`optimize.curvefit`为我们提供了一种估计拟合参数误差的方法，但我们不能只使用这些方法而不质疑它们。这`bootstrap`是一种使用蛮力的统计方法，在我看来，它倾向于在可能难以解释的情况下更好地工作。

我强烈建议您查看一个特定问题，然后尝试`curvefit`使用`bootstrap`. 如果它们相似，那么`curvefit`计算起来会便宜得多，因此可能值得使用。如果它们有很大差异，那么我的钱将在`bootstrap`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-13T15:55:50.660

在尝试回答我自己的类似问题时发现了您的[问题](https://stackoverflow.com/questions/14854339/in-scipy-how-and-why-does-curve-fit-calculate-the-covariance-of-the-parameter-es)。简短的回答。最小平方的`cov_x`输出应该乘以残差方差。IE

```
s_sq = (func(popt, args)**2).sum()/(len(ydata)-len(p0))
pcov = pcov * s_sq 
```

如`curve_fit.py`. 这是因为 minimumsq 输出分数协方差矩阵。我的大问题是剩余方差在谷歌搜索时显示为其他内容。

残差只是从您的拟合中减少卡方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-24T14:43:40.037

在线性回归的情况下可以精确计算误差。实际上，leastsq 函数给出了不同的值：

```
import numpy as np
from scipy.optimize import leastsq
import matplotlib.pyplot as plt

A = 1.353
B = 2.145

yerr = 0.25

xs = np.linspace( 2, 8, 1448 )
ys = A * xs + B + np.random.normal( 0, yerr, len( xs ) )

def linearRegression( _xs, _ys ):
    if _xs.shape[0] != _ys.shape[0]:
        raise ValueError( 'xs and ys must be of the same length' )
    xSum = ySum = xxSum = yySum = xySum = 0.0
    numPts = 0

    for i in range( len( _xs ) ):
        xSum += _xs[i]
        ySum += _ys[i]
        xxSum += _xs[i] * _xs[i]
        yySum += _ys[i] * _ys[i]
        xySum += _xs[i] * _ys[i]
        numPts += 1

    k = ( xySum - xSum * ySum / numPts ) / ( xxSum - xSum * xSum / numPts )
    b = ( ySum - k * xSum ) / numPts
    sk = np.sqrt( ( ( yySum - ySum * ySum / numPts ) / ( xxSum - xSum * xSum / numPts ) - k**2 ) / numPts )
    sb = np.sqrt( ( yySum - ySum * ySum / numPts ) - k**2 * ( xxSum - xSum * xSum / numPts ) ) / numPts

    return [ k, b, sk, sb ]

def linearRegressionSP( _xs, _ys ):
    defPars = [ 0, 0 ]
    pars, pcov, infodict, errmsg, success = \
    leastsq( lambda _pars, x, y: y - ( _pars[0] * x + _pars[1] ), defPars, args = ( _xs, _ys ), full_output=1 )

    errs = []
    if pcov is not None:
        if( len( _xs ) > len(defPars) ) and pcov is not None:
            s_sq = ( ( ys - ( pars[0] * _xs + pars[1] ) )**2 ).sum() / ( len( _xs ) - len( defPars ) )
            pcov *= s_sq

        for j in range( len( pcov ) ):
            errs.append( pcov[j][j]**0.5 )
    else:
        errs = [ np.inf, np.inf ]
    return np.append( pars, np.array( errs ) )

regr1 = linearRegression( xs, ys )
regr2 = linearRegressionSP( xs, ys )

print( regr1 )
print( 'Calculated sigma = %f' %  ( regr1[3] * np.sqrt( xs.shape[0] ) ) )
print( regr2 )
#print( 'B = %f must be in ( %f,\t%f )' % ( B, regr1[1] - regr1[3], regr1[1] + regr1[3] ) )

plt.plot( xs, ys, 'bo' )
plt.plot( xs, regr1[0] * xs + regr1[1] )
plt.show() 
```

输出：

```
[1.3481681543925064, 2.1729338701374137, 0.0036028493647274687, 0.0062446292528624348]
Calculated sigma = 0.237624 # quite close to yerr
[ 1.34816815  2.17293387  0.00360534  0.01907908] 
```

有趣的是，curvefit 和 bootstrap 会给出哪些结果......

# javascript - 无限滚动Jquery

> ID：14581359
> 
> 赞同：2
> 
> 时间：2013-01-29T11:01:05.153
> 
> 标签：javascript, jquery, lazy-loading, infinite-scroll, ondemand

我找到了这些使用 Jquery 进行无限滚动的[演示](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/)，但我不知道如何使用它们，因为没有提供它们的源。如果有人喜欢他们，请您解决这个问题吗？

我为 Demo 5 尝试了这段代码，但没有成功。

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
 <script type="text/javascript">
$(document).ready(function(){
    function lastAddedLiveFunc()
    {
        $('div#lastPostsLoader').html('<img src="bigLoader.gif">');

        $.get("loadmore.php", function(data){
            if (data != "") {
                //console.log('add data..');
                $(".items").append(data);
            }
            $('div#lastPostsLoader').empty();
        });
    };

    //lastAddedLiveFunc();
    $(window).scroll(function(){

        var wintop = $(window).scrollTop(), docheight = $(document).height(), winheight = $(window).height();
        var  scrolltrigger = 0.95;

        if  ((wintop/(docheight-winheight)) > scrolltrigger) {
         //console.log('scroll bottom');
         lastAddedLiveFunc();
        }
    });
});
</script>
</head>
<body>
<ul class="items">
   <li>content</li>
   <li>content</li>
   <li>content</li>
   <li>content</li>
   <li>content</li>
   <li>content</li>

   <li>content</li>
   <li>content</li>
   <li>content</li>
   <li>content</li>
   <li>content</li>
   <li>content</li>
   <li>content</li>
   <li>content</li>
   <li>content</li>                   
  </ul>

<div id="lastPostsLoader"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:20:22.207

试试这个：

```
function lastAddedLiveFunc(){
    $('div#lastPostsLoader').html('<img src="bigLoader.gif">');

    $.get("loadmore.php", function(data){
        if (data != "") {
            //console.log('add data..');
            $(".items").append(data);
        }
        $('div#lastPostsLoader').empty();
    });
}

$(document).ready(function(){
   $(window).scroll(function(){

      var wintop = $(window).scrollTop(), docheight = $(document).height(), winheight = $(window).height();
      var  scrolltrigger = 0.95;

      if  ((wintop/(docheight-winheight)) > scrolltrigger) {
       //console.log('scroll bottom');
       lastAddedLiveFunc();
      }
  });
}); 
```

# c# - JSON.Net反序列化没有基类的IEnumerable对象

> ID：14581362
> 
> 赞同：0
> 
> 时间：2013-01-29T11:01:19.063
> 
> 标签：c#, json.net

我正在使用 Freeagent API，需要一种将 JSON 转换为 .Net 类型的方法。使用 JSON .Net 我需要将以下 JSON 转换为 IEnumerable

```
{ "invoices": [
  {
    "url":"https://api.freeagent.com/v2/invoices/1",
    "contact":"https://api.freeagent.com/v2/contacts/2",
    "dated_on":"2011-08-29T00:00:00+00:00",
    "due_on":"2011-09-28T00:00:00+00:00",
    "reference":"001",
    "currency":"GBP",
    "exchange_rate":"1.0",
    "net_value":"0.0",
    "sales_tax_value":"0.0",
    "status":"Draft",
    "comments":"An example invoice comment."
    "omit_header":false,
    "payment_terms_in_days":30,
    "ec_status":"Non-EC"
  }
]} 
```

现在，如果可以避免的话，我不想使用基本类型，所以我希望直接将其反序列化为上面的 IEnumerable。可能吗？

# regex - 为什么 Vim 中的交替运算符用作命令而不用作映射？

> ID：14581364
> 
> 赞同：0
> 
> 时间：2013-01-29T11:01:28.820
> 
> 标签：regex, vim

我想对以下命令做一个简单的映射：

```
:'<,'>s/{\|}//gc 
```

它将删除所选文本中的所有大括号，并在每次更改之前询问我。它完美地工作。

如果我把它写到我的 .vimrc 中作为这样的映射：

```
vmap <leader>rc :<C-R>s/{\|}//gc<cr> 
```

它突然告诉我，它无法匹配模式 {|}，因此转义了 | 似乎没有工作。

为什么以及如何正确创建此映射？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T11:13:45.073

使用以下内容：

```
:vmap <leader>rc :s/{\\|}//gc<CR> 
```

它*确实*对选定的文本进行操作：因为`:`在可视模式下，您将获得`'<,'>`命令的前面。

调试这种映射的一种有用方法是省略 final `<CR>`，因此您可以看到命令与执行时完全相同。这就是我注意到`<C-R>`吃掉你的方式`s`（因为它希望将寄存器名称作为下一个字符）并且一层转义已经消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:16:29.267

我认为你需要`<C-R>`在冒号之后删除，这目前说，在冒号之后粘贴`s`寄存器然后你的模式。

您不太可能在此寄存器中有任何内容，因此命令行如下所示：

```
:/{\|}//gc 
```

这实际上是一个范围说明符而不是替代品。我们只需要删除它

```
vnoremap <leader>rc :s/{\|}//gc<cr> 
```

# c# - RSA 解密，仅使用 D、P、Q、U 参数 (GnuPG)

> ID：14581367
> 
> 赞同：6
> 
> 时间：2013-01-29T11:01:36.917
> 
> 标签：c#, rsa, gnupg

我有一个 RSA 私钥，它只包含 D、P、Q、U 参数。

密钥表示法[http://www.gnupg.org/documentation/manuals/gcrypt/RSA-key-parameters.html](http://www.gnupg.org/documentation/manuals/gcrypt/RSA-key-parameters.html)

JavaScript 进行解密

```
<html>
<head>
<SCRIPT SRC="http://eu.static.mega.co.nz/crypto_1.js"></SCRIPT>
<SCRIPT SRC="http://eu.static.mega.co.nz/rsa_1.js"></SCRIPT>
<SCRIPT SRC="http://eu.static.mega.co.nz/hex_1.js"></SCRIPT>
<SCRIPT>
function t()
{
// hex2s - conversion functions: hex to string
// mpi2b - conversion functions: num array <-> multi precision integer (mpi) mpi: 2 octets with length in bits + octets in big endian order
    t = mpi2b(hex2s('080043e8950c95dbc8fdea8fd39dfbc65f4ff31ee4824d8e8ceabdf45cbb928b29863e80154b656f04510e983810889f5d12cee85369743db65b0b54949ff5320c9ed98f3bb6b12a2c26e16a1b8414955034c0ed35b21e9bbc58d8447db85f9c760057656bb3a7b5c80726d287b5bc312525bff7864ba2dc2c627cd50e3d752cd585cb301d327f209974e29ddcd1ac51e99209f1d1f96c9fef5ef810b32a54555b5d7cc69c2a107d717744b5167a8962ca08aaac717768e8235795b21dcd186ba348317e685f07f9a2cac14089242b6edb989c8818054de2f69de34653c3e2d8b70947278f44a8995eb5c3568460dbe8e7a1cf31466556454703b045cef1c61e8d09'));   
    p = mpi2b(hex2s('04009868b3fea798829975abd91d27982462b66aced52f1472f243dadbf9e2e551388bb55750764cfc6ff5b89345285c0faa18924ee392f729d7980a6e1f62bff79584eee9e23d23d53a5034198b44dce9791eb367243a9ec6973eb09b574b65c4156a999fdf48770035c488efc568ad80b5dc73e9ca6c67bf9f09bdb31d175f25e5'));
    q = mpi2b(hex2s('0400d8ff209b2a325f66deee452e11b0306e7bc21dd99cdb8d175c8a08973f8b105b51a7a95b38d09ce72bf81178fbc902b3da791490d80bb0b6a8fa5e1c08636c57be45dbcc7b8c0da95390974f07456da5ca522f126b29b5226047432889482d983eb57679fe4e8d90aef2e06d8dbd0b6fa280b69ffddbd9c16bcd5f5569cef1f1'));
    d = mpi2b(hex2s('07fd1e65b3aa438c9cb5ea6b14590d32945f907d1fb6053541e3c250b5a60b67a477e5bfd2e79d0d4bdb6bde9403ab908723aeee25bfe69665fecc028c2fe4df2c51c8579235cc25f888055dc1da529017c4f4e38b95486b036345bb4c03f75b37c305002916a7f2ffe7a03b1b72bb7836560d556627b7bfff9357cdc73e6ed790f3bf79c6cd0fcd98ef2d96e369e780b3b213d3a5b7df8a373585bda0d22da00f7737ecf59ec0fc68056e65eda05c5940fbb3109d97db8ff135b472117467ec47620736b9e39a70723f33d59dea5a98d18bae8c89aa1be77daf692f5407c8433bd0b85cc13de12e7f8b85d27b147e2e8e337fc1157b0cb76ef90e479b5059ba27f1'));
    u = mpi2b(hex2s('03fe233721f3bda1e05d44de087b67749f4daafe02af79c183b2f41e040b6364a870c0896b84073de0fc1b7b2faee9100a250773282b6d9d935d30c1db2c7ef3daa017519dbb8d94edd32bde9ee0d460cb09d782b88f11552b810a595f6d26d12c38ee74c36d830b9d496947eeb878e6459b120bf747a28761926094797a4a5c9b68'));

    sid = base64urlencode(b2s(RSAdecrypt(t,d,p,q,u)).substr(0,43));

    if (sid=='tajetAbW0qTQGFlwp8iD5lQ0TFV1QUZJZFVvjRX7Xx-bPzYBoau7qog09w')
        console.log("Decrypting work");
}
</script>
</head>
<body onload="t();" />
</html> 
```

我找到了 BouncyCastle 库并计算了 RSAParameters 的所有参数。但我无法解密数据。**我在RSACryptoServiceProvider.ImportParameters**方法中遇到**异常**

 **```
using System;
using System.Globalization;
using System.Security.Cryptography;
using Org.BouncyCastle.Math;

namespace testConsole
{
    internal class Program
    {
        private static void Main()
        {
            string p_hex = "04009868b3fea798829975abd91d27982462b66aced52f1472f243dadbf9e2e551388bb55750764cfc6ff5b89345285c0faa18924ee392f729d7980a6e1f62bff79584eee9e23d23d53a5034198b44dce9791eb367243a9ec6973eb09b574b65c4156a999fdf48770035c488efc568ad80b5dc73e9ca6c67bf9f09bdb31d175f25e5";
            string q_hex = "0400d8ff209b2a325f66deee452e11b0306e7bc21dd99cdb8d175c8a08973f8b105b51a7a95b38d09ce72bf81178fbc902b3da791490d80bb0b6a8fa5e1c08636c57be45dbcc7b8c0da95390974f07456da5ca522f126b29b5226047432889482d983eb57679fe4e8d90aef2e06d8dbd0b6fa280b69ffddbd9c16bcd5f5569cef1f1";
            string d_hex = "07fd1e65b3aa438c9cb5ea6b14590d32945f907d1fb6053541e3c250b5a60b67a477e5bfd2e79d0d4bdb6bde9403ab908723aeee25bfe69665fecc028c2fe4df2c51c8579235cc25f888055dc1da529017c4f4e38b95486b036345bb4c03f75b37c305002916a7f2ffe7a03b1b72bb7836560d556627b7bfff9357cdc73e6ed790f3bf79c6cd0fcd98ef2d96e369e780b3b213d3a5b7df8a373585bda0d22da00f7737ecf59ec0fc68056e65eda05c5940fbb3109d97db8ff135b472117467ec47620736b9e39a70723f33d59dea5a98d18bae8c89aa1be77daf692f5407c8433bd0b85cc13de12e7f8b85d27b147e2e8e337fc1157b0cb76ef90e479b5059ba27f1";
            string u_hex = "03fe233721f3bda1e05d44de087b67749f4daafe02af79c183b2f41e040b6364a870c0896b84073de0fc1b7b2faee9100a250773282b6d9d935d30c1db2c7ef3daa017519dbb8d94edd32bde9ee0d460cb09d782b88f11552b810a595f6d26d12c38ee74c36d830b9d496947eeb878e6459b120bf747a28761926094797a4a5c9b68";

            BigInteger p = p_hex.HEX2Bytes().MPInteger2BigInteger();
            BigInteger q = q_hex.HEX2Bytes().MPInteger2BigInteger();
            BigInteger d = d_hex.HEX2Bytes().MPInteger2BigInteger();
            BigInteger u = u_hex.HEX2Bytes().MPInteger2BigInteger(); // not using???

            RSAParameters rsaKeyInfo = new RSAParameters
                                           {
                                               Exponent = new byte[] { 1, 0, 1 },
                                               Modulus = p.Multiply(q).ToByteArray(),
                                               P = p.ToByteArray(),
                                               Q = q.ToByteArray(),
                                               DP = d.Remainder(p.Subtract(BigInteger.One)).ToByteArray(),
                                               DQ = d.Remainder(q.Subtract(BigInteger.One)).ToByteArray(),
                                               InverseQ = q.ModInverse(p).ToByteArray(),
                                               D = d.ToByteArray()
                                           };

            using (RSACryptoServiceProvider rsa = new RSACryptoServiceProvider())
                rsa.ImportParameters(rsaKeyInfo); //  !!!!!! CryptographicException   (Bad data)
        }
    }

    public static class Extensions
    {
        public static byte[] HEX2Bytes(this string hex)
        {
            if (hex.Length%2 != 0)
            {
                throw new ArgumentException(String.Format(CultureInfo.InvariantCulture,
                                                          "The binary key cannot have an odd number of digits: {0}", hex));
            }

            byte[] hexAsBytes = new byte[hex.Length/2];
            for (int index = 0; index < hexAsBytes.Length; index++)
            {
                string byteValue = hex.Substring(index*2, 2);
                hexAsBytes[index] = byte.Parse(byteValue, NumberStyles.HexNumber, CultureInfo.InvariantCulture);
            }

            return hexAsBytes;
        }

        public static BigInteger MPInteger2BigInteger(this byte[] mpi)
        {            
            int length = (((mpi[0] << 8) | mpi[1]+ 7)/8);
            return new BigInteger(1, mpi, 2, length);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:39:44.930

老实说，我对 C# 不太熟悉；但关于 BigInteger.One 我会尝试：

```
RSAParameters rsaKeyInfo = new RSAParameters
                                           {
                                               Exponent = new byte[] { 1, 0, 1 },
                                               Modulus = p.Multiply(q).ToByteArray(),
                                               P = p.ToByteArray(),
                                               Q = q.ToByteArray(),
                                               DP = d.Remainder(p.Subtract(BigInteger(1))).ToByteArray(),
                                               DQ = d.Remainder(q.Subtract(BigInteger(1))).ToByteArray(),
                                               InverseQ = q.ModInverse(p).ToByteArray(),
                                               D = d.ToByteArray()
                                           }; 
```

当然不是不加

```
using System.Numerics 
```**

# jquery - 未捕获的错误：INVALID_STATE_ERR：Chrome 中的 DOM 异常 11

> ID：14581370
> 
> 赞同：2
> 
> 时间：2013-01-29T11:01:41.573
> 
> 标签：jquery

以下代码`Uncaught Error: INVALID_STATE_ERR: DOM Exception 11 error.`仅在 crom 中给我。

```
ondblclick="$(this).hide();$('#edit_attachment').val($(this).val()).show();$('#a-info').show();"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:57:21.123

我把它修好了——

实际上`#edit_attachment`是输入类型文件的 id，我试图从文本框中将值插入输入类型文件。我正在调用`dbclick()`文本框 As- 上的方法`$('#edit_attachment').val($(this).val());`

# android - Android：存储单选按钮的数据

> ID：14581376
> 
> 赞同：0
> 
> 时间：2013-01-29T11:01:52.610
> 
> 标签：android, radio-button, sharedpreferences

我正在尝试开发一个包含不同问题和每个 4 个可能答案的应用程序。这些问题在不同的页面中分开，因此当用户转到下一个单选按钮时，单选按钮需要为空或之前具有选定的值。为了存储数据，我想使用共享首选项。然而问题是在布局中只有 4 个单选按钮并且总是使用相同的布局。

我的想法如下：`android:user=191919191 android:answer1="A" android:answer2="B" ... android:answer20="C"`

我不知道这是否可以，除此之外，我还需要使用此信息在每个页面中选择正确的单选按钮。我会很感激一些帮助，谢谢大家。

# macos - Qt：从构建中关闭“CoreWlan 支持”

> ID：14581377
> 
> 赞同：2
> 
> 时间：2013-01-29T11:01:53.087
> 
> 标签：macos, qt

我们的软件根本不使用网络。`./configure`为了完全禁用`CoreWlan support`Qt 构建，我应该将什么命令行选项传递给脚本？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-29T06:54:46.460

至少对于 Qt 4.8，你不能使用 configure 来做到这一点，但是，评论这一行：

```
macx:contains(QT_CONFIG, corewlan):SUBDIRS += corewlan 
```

在 Qt 源目录中的文件“src/plugins/bearer/bearer.pro”中，应该从构建中禁用它。链接到你不需要的东西或者如果你像我在最近发布的 OS X Mavericks 上那样遇到构建错误是没有意义的。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-26T21:15:48.840

对于 Qt 5.9.2 它是

```
configure \
  -no-feature-corewlan 
```

# java - 服务注册是 SOA 中的一个重要组件吗？

> ID：14581380
> 
> 赞同：0
> 
> 时间：2013-01-29T11:02:08.450
> 
> 标签：java, rest, soa, esb

我正在寻求开发一个面向服务的架构，我真的很想拥有可以动态插入和拔出的服务以及位置透明性。我很惊讶地发现，作为 ESB 行业最重要的参与者之一的 Mule ESB 不提供任何服务注册功能。

服务注册是 SOA 架构的重要组成部分吗？实现它的最佳工具和实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:06:18.977

构建基于 SOAP 和 JAX-WS 的服务已经足够复杂了。

如果 WSDL 足以使客户端可以直接与服务端点交互以获得服务合同，则使用此选项。

ServiceRegistry 的引入是您向系统 (SOA) 引入的另一层复杂性。

IMO，即使您有丝毫的可能性，也要实施 REST 服务。

# asp.net - 无法从 http://localhost:50847/Service1.svc 获取元数据

> ID：14581385
> 
> 赞同：1
> 
> 时间：2013-01-29T11:02:25.193
> 
> 标签：asp.net, wcf, sharepoint

我在 WCF 服务（.Net3.5）中引用 Microsoft.SharePoint.dll。当我按 F5 时，出现“无法获取 url 的元数据”的错误。我已将目标平台更改为 x64。我的服务器配置是 Sharepoint2010 .net3.5 windows server2008

这是我的代码

'

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using Microsoft.SharePoint;
namespace WcfService1
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
    public class Service1 : IService1
    {
        public string GetData(int value)
        {
            SPSecurity.RunWithElevatedPrivileges(delegate { 
            using(SPSite site=new SPSite(""))
            {
            }
            });
            return string.Format("You entered: {0}", value);
        }

        public CompositeType GetDataUsingDataContract(CompositeType composite)
        {
            if (composite == null)
            {
                throw new ArgumentNullException("composite");
            }
            if (composite.BoolValue)
            {
                composite.StringValue += "Suffix";
            }
            return composite;
        }
    }
} 
```

而 web.config 文件是

```
<?xml version="1.0"?>
<configuration>

  <configSections>
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere" />
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>
  <appSettings/>
  <connectionStrings/>
  <system.web>
    <compilation debug="true">
      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>
    <!--
        The <authentication> section enables configuration 
        of the security authentication mode used by 
        ASP.NET to identify an incoming user. 
    -->
    <authentication mode="Windows" />
    <!--
        The <customErrors> section enables configuration 
        of what to do if/when an unhandled error occurs 
        during the execution of a request. Specifically, 
        it enables developers to configure html error pages 
        to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
         <error statusCode="403" redirect="NoAccess.htm" />
         <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
    -->
    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
    </pages>

    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>
  </system.web>
  <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4"
                type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v3.5"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
    </compilers>
  </system.codedom>
  <!-- 
      The system.webServer section is required for running ASP.NET AJAX under Internet
      Information Services 7.0\.  It is not necessary for previous version of IIS.
  -->
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
      <remove name="ScriptModule" />
      <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </modules>
    <handlers>
      <remove name="WebServiceHandlerFactory-Integrated"/>
      <remove name="ScriptHandlerFactory" />
      <remove name="ScriptHandlerFactoryAppServices" />
      <remove name="ScriptResource" />
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode"
           type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode"
           type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding appliesTo="v2.0.05727" xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <system.serviceModel>
    <services>
      <service name="WcfService1.Service1" behaviorConfiguration="WcfService1.Service1Behavior">
        <!-- Service Endpoints -->
        <endpoint address="" binding="wsHttpBinding" contract="WcfService1.IService1">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="WcfService1.Service1Behavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

' 谁能帮帮我吗。

# ios - 使用 Cocoapods 管理多个目标的依赖关系

> ID：14581386
> 
> 赞同：7
> 
> 时间：2013-01-29T11:02:30.037
> 
> 标签：ios, afnetworking, cocoapods

我刚刚开始使用 cocoapods 来管理我的 iOS 项目的依赖关系。目前我正在尝试使用 GHIOSUnit 集成单元测试。我遵循了他们的所有指示并尝试了他们的样本测试，这一切都像魅力一样。

![项目设置 1](../Images/b37bbf97919e069446fc85079547b6a9.png) ![在此处输入图像描述](../Images/a5d1da18d83e8876f057abb728b917b3.png)

但是，当我开始使用我的实际项目文件进行测试时，问题就开始了。

我将 AFNetworking 用于客户端服务器通信，每当我访问名为“CRLClient”的共享客户端（AFHTTPClient 的包装器）时，它都会给我未定义的符号错误。

```
Undefined symbols for architecture armv7:
  "_OBJC_METACLASS_$_AFHTTPClient", referenced from:
      _OBJC_METACLASS_$_CRLClient in CRLClient.o
  "_OBJC_CLASS_$_AFJSONRequestOperation", referenced from:
      objc-class-ref in CRLClient.o
  "_OBJC_CLASS_$_AFHTTPClient", referenced from:
      _OBJC_CLASS_$_CRLClient in CRLClient.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

管理依赖的 pod 文件是这样的

```
workspace 'Storyboards.xcworkspace'
platform :ios, '5.0'
pod 'AFNetworking', '1.1.0'
target :UnitTests, :exclusive => true do
pod 'GHUnitIOS', '0.5.6'
end 
```

实际的项目目标构建良好，并与 AFNetworking 完美配合。

PS 我需要添加所有要测试的文件以添加到 UnitTest 目标中。那么在构建阶段添加“目标依赖”有什么作用呢？

![在此处输入图像描述](../Images/3a3ce16c373d81e5abd3196219ee50eb.png) ![在此处输入图像描述](../Images/3c6247db5f79d6ef6418d2119151d4c9.png)

简而言之，

1.  如何在不同目标之间共享公共依赖关系？
2.  如果我仍然必须将每个文件添加到新目标，添加目标依赖项真的会做什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-21T13:02:58.870

通过使用

```
target :UnitTests, :exclusive => true do
  pod 'GHUnitIOS', '0.5.6'
end 
```

您是说您想要链接到目标的唯一库主要`UnitTests`是`GHUnit`说您*也不想*`AFNetworking`被链接。问题是您似乎还将您的`AFHTTPClient`子类导入到`UnitTests`它无法找到它试图链接到的 AFNetworking 组件的地方。

要解决此问题，您应该能够删除独占呼叫

```
target :UnitTests do
  pod 'GHUnitIOS', '0.5.6'
end 
```

有了这个，您将`GHUnit`只链接到您的`UnitTests`目标，但将链接`AFNetworking`到两者。“默认情况下，目标将包括在块之外定义的依赖项，除非给出 :exclusive => true 选项。” （从[这里](http://docs.cocoapods.org/podfile.html#target)）

# oracle - 我怎么知道使用 sql 查询打开的事务？

> ID：14581398
> 
> 赞同：2
> 
> 时间：2013-01-29T11:03:13.830
> 
> 标签：oracle, jdbc

我正在使用 JDBC API 进行交易..

这是我的好奇心，想知道我是否使用 JDBC API 打开事务。Oracle 数据库中是否有任何条目。

我只是在寻找一个查询，当应用程序打开事务时显示打开事务的结果。

从答案：

谷歌它以获取更多信息

找到一篇很好的文章：

[http://oraclue.com/2009/10/20/uncommitted-transaction/](http://oraclue.com/2009/10/20/uncommitted-transaction/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T11:12:34.267

您可以通过查询`gv$transaction`和查看未结交易`gv$session`。例如：

```
select s.inst_id, s.sid, s.serial#, s.username,
       s.program, s.osuser, s.status session_status,
       s.sql_id, t.status tran_status, 
       t.start_time tran_start, t.used_ublk used_undo_blocks, 
       t.used_urec used_undo_recs
  from gv$session s, gv$transaction t
 where t.addr = s.taddr; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T11:11:27.760

有一个视图 - v$transaction，这里是[文档的链接](http://docs.oracle.com/cd/B12037_01/server.101/b10755/dynviews_2149.htm)。

# android - 如何访问列表视图中的视图

> ID：14581401
> 
> 赞同：0
> 
> 时间：2013-01-29T11:03:26.540
> 
> 标签：android, listview, android-listfragment

我有一个列表片段。该列表的创建没有问题。

现在我需要访问每行列表视图中的文本视图，但我不能，我不知道为什么。访问列表行内的每个文本视图以更改每个文本视图。

```
 public class ScreenSlidePageFragment extends ListFragment implements AdapterView.OnItemClickListener {

private SimpleAdapter adapter;
    private ListView lv;

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
    ViewGroup rootView = (ViewGroup)inflater.inflate(R.layout.fragment_screen_slide_page, container,false);
    lv = (ListView)rootView.findViewById(android.R.id.list);
    //create the grid item mapping
   String[]from = new String[]{"rowid","item1","item2","item3","item4","item5","item6","item7","item8","item9","item10","item11","item12","item13","item"};/*,"col1","col2","col3","col4","col5","col6","col7"};*/
   int[] to = new int[]{R.id.tv_list_item1,R.id.tv_listRow_item1,R.id.tv_listRow_item2,R.id.tv_listRow_item3,R.id.tv_listRow_item4,R.id.tv_listRow_item5,R.id.tv_listRow_item6,R.id.tv_listRow_item7,R.id.tv_listRow_item8,R.id.tv_listRow_item9,R.id.tv_listRow_item10,R.id.tv_listRow_item11,R.id.tv_listRow_item12,R.id.tv_listRow_item13,R.id.tv_listRow_item14};  /*, R.id.tv_list_item3, R.id.tv_list_item4, R.id.tv_list_item5, R.id.tv_list_item6, R.id.tv_list_item7};*/

   //prepare the list of all records
   List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
   for(int i = 0 ; i < 24 ; i++){
     Log.d(ScreenSlidePageFragment.class.getName(), "Entrou no ciclo --- i: " +i);
    HashMap<String, String> map = new HashMap<String, String>();
    if(i<10){
    map.put("rowid","" + "0"+i+":00");
    map.put("item1", "item1");
    map.put("item2", "item2");
    map.put("item3", "item3");
    map.put("item4", "item4");
    map.put("item5", "item5");
    map.put("item6", "item6");
    map.put("item7", "item7");
    map.put("item8", "item8");
    map.put("item9", "item9");
    map.put("item10", "item10");
    map.put("item11", "item11");
    map.put("item12", "item12");
    map.put("item13", "item13");
    map.put("item14", "item14");        
    }
    else if(i>=10)
        map.put("rowid","" +i+":00");
    fillMaps.add(map);      
   } 

   //fill in the grid_item layout
   adapter = new SimpleAdapter(getActivity(), fillMaps, R.layout.sechedule_list_row, from, to);
   lv.setAdapter(adapter);

   **//I try this but don't work and i don't know why.....**
   **TextView tv = (TextView)lv.findViewById(R.id.tv_listRow_item1);
   tv.setText("test");**

  //******** Row of list
  <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="horizontal"
  android:layout_height="wrap_content"
  android:layout_width="fill_parent">

        <TextView 
            android:id="@+id/tv_list_item1"
            android:layout_height="50dp"
            android:layout_width="80dp"
            android:gravity="center"
            android:background="@drawable/textview_border"
            android:textStyle="bold"
            android:width="80dip"
            /><!--  android:text="@string/tv_list_item1" -->

       <LinearLayout
          android:orientation="vertical"
          android:layout_height="fill_parent"
          android:layout_width="0dip"
          android:layout_weight="1">    
         <TextView 
            android:id="@+id/tv_listRow_item1"
            android:tag="tv_listRow_item1_1"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:gravity="center"
            android:width="100dip"
            android:height="25dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""/>

        <TextView 
            android:id="@+id/tv_listRow_item2"
            android:tag="tv_listRow_item1_2"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:height="25dip"
            android:width="100dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""
            android:clickable="true"
            />
    </LinearLayout>     
    <LinearLayout
          android:orientation="vertical"
          android:layout_height="fill_parent"
          android:layout_width="0dip"
          android:layout_weight="1">    
         <TextView 
            android:id="@+id/tv_listRow_item3"
            android:tag="tv_listRow_item1_3"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:gravity="center"
            android:width="100dip"
            android:height="25dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""
            android:clickable="true"/>

        <TextView 
            android:id="@+id/tv_listRow_item4"
            android:tag="tv_listRow_item1_4"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:height="25dip"
            android:width="100dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""
            android:clickable="true"/>
    </LinearLayout>  
    <LinearLayout
          android:orientation="vertical"
          android:layout_height="fill_parent"
          android:layout_width="0dip"
          android:layout_weight="1">    
         <TextView 
            android:id="@+id/tv_listRow_item5"
            android:tag="tv_listRow_item1_5"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:gravity="center"
            android:width="100dip"
            android:height="25dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""
            android:clickable="true"/>

        <TextView 
            android:id="@+id/tv_listRow_item6"
            android:tag="tv_listRow_item1_6"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:height="25dip"
            android:width="100dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""
            android:clickable="true"/>
    </LinearLayout>  
     <LinearLayout
          android:orientation="vertical"
          android:layout_height="fill_parent"
          android:layout_width="0dip"
          android:layout_weight="1">    
         <TextView 
            android:id="@+id/tv_listRow_item7"
            android:tag="tv_listRow_itemt1_7"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:gravity="center"
            android:width="100dip"
            android:height="25dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""
            android:clickable="true"/>

        <TextView 
            android:id="@+id/tv_listRow_item8"
            android:tag="tv_listRow_item1_8"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:height="25dip"
            android:width="100dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""
            android:clickable="true"/>
    </LinearLayout>  
    <LinearLayout
          android:orientation="vertical"
          android:layout_height="fill_parent"
          android:layout_width="0dip"
          android:layout_weight="1">    
         <TextView 
            android:id="@+id/tv_listRow_item9"
            android:tag="tv_listRow_item1_9"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:gravity="center"
            android:width="100dip"
            android:height="25dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""
            android:clickable="true"/>

        <TextView 
            android:id="@+id/tv_listRow_item10"
            android:tag="tv_listRow_item1_10"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:height="25dip"
            android:width="100dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""
            android:clickable="true"/>
    </LinearLayout>  

    <LinearLayout
          android:orientation="vertical"
          android:layout_height="fill_parent"
          android:layout_width="0dip"
          android:layout_weight="1">    
         <TextView 
            android:id="@+id/tv_listRow_item11"
            android:tag="tv_listRow_item1_11"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:gravity="center"
            android:width="100dip"
            android:height="25dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""
            android:clickable="true"/>

        <TextView 
            android:id="@+id/tv_listRow_item12"
            android:tag="tv_listRow_item1_12"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:height="25dip"
            android:width="100dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""
            android:clickable="true"/>
    </LinearLayout>  

  <LinearLayout
          android:orientation="vertical"
          android:layout_height="fill_parent"
          android:layout_width="0dip"
          android:layout_weight="1">    
         <TextView 
            android:id="@+id/tv_listRow_item13"
            android:tag="tv_listRow_item1_13"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:gravity="center"
            android:width="100dip"
            android:height="25dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""
            android:clickable="true"/>

        <TextView 
            android:id="@+id/tv_listRow_item14"
            android:tag="tv_listRow_item1_14"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:height="25dip"
            android:width="100dip"
            android:background="@drawable/textview_listrow_border"
            android:text=""
            android:clickable="true"/>
    </LinearLayout>  
    <!-- android:text="@string/tv_list_item8" -->

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:06:11.157

只需使用

```
TextView tv = (TextView) rootView.findViewById(R.id.tv_listRow_item1); 
```

应该可以正常工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:38:25.833

您可以在 onitemclick 中访问您的视图

```
OnItemClickListener ClickListener = new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View v, int arg2,long arg3) {
         TextView tv = (TextView) v.findViewById(R.id.tv_listRow_item1); 
    }
}; 
```

否则你需要创建类扩展基本适配器并在 getview 方法中膨胀你的 xml 视图

# c# - c# ToFileTime 转换为日期时间字符串

> ID：14581402
> 
> 赞同：-7
> 
> 时间：2013-01-29T11:03:29.837
> 
> 标签：c#, datetime

c# ToFileTime 转换为日期时间字符串代码？

> 130038578286868465 转换为日期时间字符串（“yyyymmdd H:i:s”）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T11:04:39.693

您可以使用[DateTime.FromFileTime](http://msdn.microsoft.com/en-us/library/system.datetime.fromfiletime.aspx)。在格式字符串中，使用 MM 或 M 表示月份或使用 mm 或 m 表示分钟。

```
 long ft = date1.ToFileTime();
 DateTime date2 = DateTime.FromFileTime(ft);
 string dateString =  date2.ToString("yyyyMMdd H:m:s"); 
```

或者

```
string dateTime = DateTime.FromFileTime(130038578286868465).ToString("yyyyMMdd H:m:s"); 
```

**编辑：**对于数据表单元格值，FromFileTime 需要很长时间，我们必须将字符串转换为 long

```
DateTime.FromFileTime(long.Parse( row["workStartDateTime"].ToString())).ToString("yyyyMMdd H:m:s"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T11:05:13.630

使用`DateTime.FromFileTime(myDateTime).ToString("yyyyMMdd H:m:s")`.

# symfony1 - 将主机传递给 link_to

> ID：14581403
> 
> 赞同：0
> 
> 时间：2013-01-29T11:03:29.473
> 
> 标签：symfony1, symfony-1.4

我正在尝试使用部分发送电子邮件中的链接：

```
$html = $this->getPartial('templates/myTemplateHtml', array('id'=>$id)); 
```

_myTemplateHTML

```
<p><?php echo link_to('Moderate Template', '@template_moderate?id='.$id); ?></p> 
```

当我收到电子邮件时，我会收到`Moderate Link`，如何修改`link_to()`以包含发送电子邮件的 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:09:23.480

如果您想要主机的完整链接，您应该[启用绝对选项](http://www.symfony-project.org/api/1_4/UrlHelper#method_link_to)：

> *   'absolute' - 如果设置为 true，帮助程序输出一个绝对 URL

这会给你这个：

```
link_to(
  'Moderate Template', 
  '@template_moderate?id='.$id, 
  array('absolute' => true)
); 
```

# asp.net - 将参数传递给reportviewer 的查询

> ID：14581406
> 
> 赞同：0
> 
> 时间：2013-01-29T11:03:36.123
> 
> 标签：asp.net, visual-studio-2010, reportviewer

我有这个查询`typed dataset`用于填写我的`ReportViewer`

```
SELECT        proj.descricao AS projeto, func.descricao AS funcionalidade, clb.clube AS cliente, ch.descricao
FROM            chamados ch INNER JOIN
                         projetos proj ON ch.projeto = proj.id INNER JOIN
                         funcionalidades func ON ch.funcionalidade = func.id INNER JOIN
                         clubes clb ON ch.clube = clb.id
WHERE        (ch.responsavel = @responsavel) AND (ch.clube = @clube) 
```

看到`parameters` `@responsavel`和`@clube`？我现在想知道如何从`codebehind`. 谢谢 ！Obs：我知道如何在 windowsForms 中执行此操作，但是对于 Web 应用程序，它有所不同，我不知道它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:42:39.030

我刚刚找到了解决方案*-* 你需要在`ObjectDataSource1_Selecting`活动中工作。我曾经`Sessions`将值传递给一个网页到另一个网页。这是代码：

```
protected void ObjectDataSource1_Selecting(object sender, ObjectDataSourceSelectingEventArgs e)
        {
            string usrValue = Session["usrValue"].ToString();
            string usrText = Session["usrText"].ToString();
            string cliente = Session["cliente"].ToString();

            e.InputParameters["responsavel"] = usrValue;
            e.InputParameters["clube"] = cliente;
        } 
```

# mysql - MySQL - 结果组中的最大值

> ID：14581407
> 
> 赞同：0
> 
> 时间：2013-01-29T11:03:39.103
> 
> 标签：mysql, sql

所以也许我的问题标题不是最相关的，但我不擅长 sql，我肯定需要学习它（所以提示一些书会非常有用）

无论如何，我得到了具有以下（重要）列的表：

```
user_id,username,revenue 
```

和这样的记录：

```
1,john,39
2,mark,53
3,philipp,7
1,john,17
2,mark,3
2,mark,100 
```

我需要获取收入最大的用户，所以我需要获取所有行，计算总收入并打印总收入最大的用户。

任何提示；）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:05:15.827

您可以使用`ORDER BY`和`LIMIT`：

```
SELECT user_id, username, SUM(revenue) FROM table
GROUP BY user_id /* add ', username' ONLY if two different usernames with the same user_id is a possible case */
ORDER BY SUM(revenue) DESC
LIMIT 0,1 
```

有了这个，您将计算每个用户的收入，您通过减少总数排序并只获得第一个，这样您就有最高的收入。

# javascript - Javascript copyText 选择选项值显示值，但我需要描述

> ID：14581410
> 
> 赞同：0
> 
> 时间：2013-01-29T11:03:42.557
> 
> 标签：javascript, html, forms

我正忙于一个带有步骤的 html 订单。在最后一步，我正在做一个总结。除了类别之外，这一切进展顺利。类别值由数据库填充，是类别中的 id。但我真正需要的是选项中的文本。

例如，类别 id = 62 和文本：Huurwoning，现在显示 62，但我想显示 Huurwoning。这是 jsfiddle：http: [//jsfiddle.net/H9McM/1/](http://jsfiddle.net/H9McM/1/)

```
<select name="catid" onmouseup="copyText(this)" id="catid" class="inputbox required"><option value="" >Selecteer Categorie&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</option><option value="62" >Huurwoning</option><option value="58" >Kamerhuur</option><option value="59" >Parkeren</option><option value="60" >Vakantiewoning</option><option value="61" >Bedrijfsruimte</option></select>

<script>
function copyText(e)
 {
    var matchingElements = document.getElementsByClassName( e.name + 'preview' ),
        matchCount = matchingElements.length;

    for (var i =0; i< matchCount; i++){
       matchingElements[i].innerHTML = e.value;
    }
 } </script>

<script>
$(".catidpreview").draggable({ containment: '#dragcontainer' });
</script>

<div class="catidpreview"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:12:22.763

如果你的意思是选项文本，你可以试试这个：

```
matchingElements[i].innerHTML = e[e.selectedIndex].text; 
```

也`onchange`可能是此任务的更好事件。

[jsFiddle](http://jsfiddle.net/KfsJW/1/)的现场演示

* * *

**编辑**

由于您已在评论中补充了您的问题，因此这是您在`for`循环中需要的行：

```
matchingElements[i].innerHTML = (e.type === 'text') ? e.value : e[e.selectedIndex].text; 
```

[jsFiddle](http://jsfiddle.net/KfsJW/3/)的固定演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:42:14.393

嗨试试下面的代码....

**HTML代码：**

```
<select name="catid" onmouseup="copyText(this)" id="catid" class="inputbox required"><option value="" >Selecteer Categorie&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</option><option value="62" >Huurwoning</option><option value="58" >Kamerhuur</option><option value="59" >Parkeren</option><option value="60" >Vakantiewoning</option><option value="61" >Bedrijfsruimte</option></select>
<input name="title" onkeyup="copyText(this)" value="">

<div class="catidpreview"></div>
<div class="titlepreview"></div> 
```

**JavaScript 代码**

```
function copyText(e)
 {

    var matchingElements = document.getElementsByClassName( e.name + 'preview' );
        matchCount = matchingElements.length;

  if(e.nodeName=="INPUT")
  {

    for (var i =0; i< matchCount; i++){
       matchingElements[i].innerHTML = e.value;;
    }
  }
     else
     {
    for (var i =0; i< matchCount; i++){
       matchingElements[i].innerHTML = e[e.selectedIndex].innerHTML;
     }
     }
} 

$(".catidpreview").draggable({ containment: '#dragcontainer' });
$(".titlepreview").draggable({ containment: '#dragcontainer' }); 
```

更新小提琴：http: [//jsfiddle.net/H9McM/10/](http://jsfiddle.net/H9McM/10/)

# ios - UISplitViewController toggleMasterVisible 方法。方法在哪里定义？

> ID：14581411
> 
> 赞同：1
> 
> 时间：2013-01-29T11:03:43.443
> 
> 标签：ios, uisplitviewcontroller

我可以正确调用“toggleMasterVisible”方法作为按钮操作，但我想像这样扩展该方法。

```
(In Button action. It works)
.h 
@interface DetailViewController : UIViewController <UISplitViewControllerDelegate>
@end

.m
UIBarButtonItem *listBarButtonItem = [[UIBarButtonItem alloc] 
initWithImage:[UIImage imageNamed:@"list.png"] 
style:UIBarButtonItemStyleBordered 
target:self.splitViewController 
action:@selector(toggleMasterVisible:)];

(I want to expand the method)
.m
UIBarButtonItem *listBarButtonItem = [[UIBarButtonItem alloc] 
initWithImage:[UIImage imageNamed:@"list.png"] 
style:UIBarButtonItemStyleBordered 
target:self 
action:@selector(toggleMasterVisibleIfCondtionIsOK:)];

-(void)toggleMasterVisibleIfCondtionIsOK
{
     if(isConditionOK){
          [self.splitViewController toggleMasterVisible];
     }
} 
```

但是，我收到一个错误，即“没有可见的 @interface for 'UISplitViewController' 声明”。方法在哪里定义？我在参考上找不到方法（[http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewController_class/Reference/Reference.html)），我该如何调用该方法？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T16:49:18.153

我得到了它的工作：

```
[self.splitViewController performSelector:@selector(toggleMasterVisible:)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-14T21:40:13.440

只需将其定义为[匿名类别](https://useyourloaf.com/blog/objective-c-anonymous-categories/)，如下所示：

```
@interface UISplitViewController()
- (void)toggleMasterVisible:(id)sender;
@end 
```

# c++ - 通过 mapped_type 的 r 值移动插入映射条目

> ID：14581414
> 
> 赞同：13
> 
> 时间：2013-01-29T11:03:58.257
> 
> 标签：c++, map, move-semantics

我有一个（相当）简单的键类型和复杂的映射类型的地图，如下所示：

```
map<string, vector<string>> myMap; 
```

如果我`vector<string>`手头有，是否可以在复制键但移动映射值的映射中插入一个条目？也就是说，有没有办法：

```
string key = "Key";
vector<string> mapped;
for (int i = 0; i < 1000; ++i)
  mapped.push_back("Some dynamic string");

// Insert by moving mapped; I know I'm done with it
myMap.insert(make_pair(key, move(mapped))); // This seems to move key too 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-29T11:19:17.323

您正在寻找[`std::map::emplace`](http://en.cppreference.com/w/cpp/container/map/emplace)：

```
myMap.emplace(key, move(mapped)); 
```

`std::pair`这会就地调用适当的构造函数：

```
template< class U1, class U2 >
pair( U1&& x, U2&& y ); 
```

由于第一个参数是左值，因此键被复制，但第二个（映射）是右值，因此被移动构造。

# php - 使用 PHP 下载、编辑和重新上传 FTP 文件

> ID：14581421
> 
> 赞同：0
> 
> 时间：2013-01-29T11:04:23.190
> 
> 标签：php, ftp

我正在尝试使用 PHP 从我网站上的表单中的 FTP 获取 server.cfg 文件。在此之后，我想在网站上编辑 server.cfg 文件，单击“提交”并在 FTP 上重新上传编辑后的文件。我做了一些研究，但我仍然得到一些错误。我设法以以下形式获取文件： http: [//elmazmx77.seventyseven.axc.nl/gameservers2.php](http://elmazmx77.seventyseven.axc.nl/gameservers2.php)。但是，如果我编辑并保存表单，就会出现错误。我的 PHP 代码：

```
<?php

$config = array 
( 
'user'  => 'Hunterr', 
'pass'  => '[PASSWORD]', 
'domain'    => 'ycn-hosting.com:21', 
'file'      => '213.108.31.167-27030/etpro/server.cfg',       # relative to 'domain' 
); 

if(isset($_POST['submit'])) 
{ 
$fp = fopen($config['file'],'w'); 
fwrite($fp,stripslashes($_POST['newd'])); 
fclose($fp); 

$ftp = ftp_connect($config['domain']); 
ftp_login($ftp,$config['user'],$config['pass']); 
ftp_pasv($ftp,TRUE); 
ftp_put($ftp,$config['file'],$config['file'],FTP_BINARY); 
ftp_close($ftp); 

} 
?> 

<form width="440" height="440" method="post" action="<?=( $_SERVER['PHP_SELF'] )?>"> 
<textarea name="newd"><?=(       file_get_contents('ftp://'.$config['user'].':'.$config['pass'].'@'.$config['domain'].'/'.$co    nfig['file']) )?></textarea> 
<input type="submit" name="submit" value="Save"> 
</form> 
```

有任何想法吗？（您可以在这里自己查看错误：http: [//elmazmx77.seventyseven.axc.nl/gameservers2.php](http://elmazmx77.seventyseven.axc.nl/gameservers2.php)）第 13 行开始于：$fp = fopen($config['file'],'w'); 所以你知道错误来自哪里。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:12:21.227

如错误消息所述“警告：fopen（213.108.31.167-27030/etpro/server.cfg）[function.fopen]：无法打开流：没有这样的文件或目录”您试图打开一个不是那里。该文件不在运行脚本的目录中。使用绝对路径或正确的相对路径指向 server.cfg 文件。

您可能还想在其中添加一些检查，以查看 fopen 命令是否实际成功。

升

# android - 在后台更新位置

> ID：14581426
> 
> 赞同：2
> 
> 时间：2013-01-29T11:04:40.160
> 
> 标签：android, json, multithreading, google-maps

我正在使用以下代码进行位置更新：

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10, 500, locationListener); 
```

以及将位置更新到服务器的 json ：

```
JSONObject json = JSONfunctions.getJSONfromURL(updatelocation);
    try {
        json = (JSONObject) json.get("updated");
        //location is updated
    } catch (Exception e) {
                Toast.makeText(getBaseContext(),"Network issues.", Toast.LENGTH_LONG).show();
            } 
```

上面的代码是正确的还是有其他方法可以在后台更新位置？

请帮帮我。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:06:43.647

您应该为此使用 AsyncTask：请参阅[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。

否则，您可能会阻塞 UI 线程，这很糟糕。

# iphone - 将视图从委托添加到所有其他视图控制器

> ID：14581427
> 
> 赞同：1
> 
> 时间：2013-01-29T11:04:51.960
> 
> 标签：iphone, ios, objective-c

我正在做应用程序，我想在导航栏上显示振荡。我创建了一个`EAGLEView`from `appdelegate`。

```
@interface AppDelegate : NSObject <UIApplicationDelegate,EAGLViewDelegate>
{
    EAGLView* eaglView;
}
@property (nonatomic, retain)   EAGLView* eaglView; 
```

我从应用程序委托中调用了所有必需的方法，`AurioTouch`以显示获取声波的波形。当我尝试它时它运行良好`FirstViewController`。但是当我试图在`SecondViewController`. 它正在崩溃。所以，现在我想将这个视图添加`eagleView`到其他视图中`viewControllers`。怎么做？我将它添加`subview`到其他视图中，例如

```
appDel = (AppDelegate *)[[UIApplication sharedApplication]delegate];
appDel.eaglView.frame = CGRectMake(0, 10, 320, 100);
appDel.eaglView.backgroundColor = [UIColor redColor];
[self.view addSubview:appDel.eaglView]; 
```

在`viewdidload`方法。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:40:05.573

尝试这个

```
[nav1.navigationBar addSubview:YouView]; 
```

如果这不起作用，您可以将 UINavigationController 子类化并将其添加到 initWithRootViewController 方法中：

```
 UINavigationBar *navBar = [[UINavigationBar alloc] init];
    [navBar addSubview:YourView];

    [self setValue:navBar forKeyPath:@"navigationBar"]; 
```

希望这可以帮助

山姆

# php - 使用数据库错误时 CI 中的助手和会话

> ID：14581430
> 
> 赞同：0
> 
> 时间：2013-01-29T11:05:02.613
> 
> 标签：php, codeigniter

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：无法修改标头信息 - 标头已发送（输出开始于 /srv/disk5/1241421/www/ebazzar.co.nf/application/models/product_model.php:2）
> 
> 文件名：库/Session.php
> 
> 行号：672

...

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：无法修改标头信息 - 标头已发送（输出开始于 /srv/disk5/1241421/www/ebazzar.co.nf/application/models/product_model.php:2）
> 
> 文件名：helpers/url_helper.php
> 
> 行号：542

我该如何解决这个错误？在数据库中添加一些内容时出现

函数是这样的：

```
public function signup() {
    if ($this->authex->logged_in()) {
        redirect('welcome');
    }
    //$data['page'] = $this->uri->segment(2);
    $data['fproducts'] = $this->pm->get_fproducts();
    $data['countries'] = $this->pm->get_countries();
    if ($this->input->post('submit_signup')) {
        if ($this->_form_validate() == FALSE) {
            $this->load->view('header', $data);
            $this->load->view('sidebar');
            $this->load->view('signup');
            $this->load->view('footer');
        } else {
            $signup_id = $this->pm->add_user();
            if ($signup_id) {
                $this->session->set_flashdata('message', array('title' => 'Signup Result', 'content' => 'You have been successfully registered', 'type' => 'message'));

                redirect("welcome/home");
            }
        }
    } else {
        $this->load->view('header', $data);
        $this->load->view('sidebar');
        $this->load->view('signup');
        $this->load->view('footer');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:33:06.043

假设您的`redirect`函数正在使用 PHP`header`函数，问题是这样的：

该`header`函数应该在任何输出**之前**调用，否则它将不起作用。在调用该函数之前，您显然正在输出其他内容。

重新排列您的代码，以便在文件末尾打印输出，或使用`ob_*`函数族来控制输出缓冲区。

请注意，要解决问题，错误还会告诉您在`header`调用之前开始无效输出的位置：

> 输出开始于 /srv/disk5/1241421/www/ebazzar.co.nf/application/models/product_model.php:2

# java - Android中不同屏幕上的字符间距问题

> ID：14581433
> 
> 赞同：0
> 
> 时间：2013-01-29T11:05:10.880
> 
> 标签：java, android, fonts

我正在使用`Franchise-Bold.ttf`我的应用程序。我面临这个问题，在高 xhdpi 分辨率屏幕上，文本看起来很完美，没有任何间距。像这样：

![XHDPI](../Images/7c6b5c9d3508f968ce82f48568f800c4.png)

但在正常或 Hdpi 屏幕上无故显示间距。我想删除这些空格。我怎样才能做到这一点？

![正常/HDPI](../Images/8e7ba65a6a2c2f6598f3ded4c212c358.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:08:14.127

它看起来像字体大小问题。你能不能试试我们`sp`用普通字体代替。使用本[教程](http://developer.android.com/design/style/typography.html)。

# wpf - 使用 MVVM 冻结 WPF 树视图

> ID：14581438
> 
> 赞同：0
> 
> 时间：2013-01-29T11:05:21.557
> 
> 标签：wpf, mvvm, treeview

由于数据集的大小，我有一个使用虚拟化的 WPF 树视图控件。层次结构是客户 -> 帐户 -> 交易，其中包含 150 个客户的示例数据集，其中大多数只有一个帐户和交易，但四个有 8000 个交易。

我需要具有搜索功能才能输入交易 ID 并导航到树视图中的那个位置。目前我正在使用 MVVM 模型，因此搜索事务很简单，当我返回节点 ViewModel 时，我可以调用 SelectThis() 并且它工作正常。但问题是它不会将所选节点带入可视区域。

我有一个函数，它接受一个 ViewModel 对象并遍历 TreeView，直到找到包含 ViewModel 的 TreeViewItem，它生成容器，然后在 TreeViewItem 上调用 BringIntoView()。

第一次搜索交易时，它工作正常。第二次对于不同的事务 ID，它会冻结。如果您先尝试搜索第二个 ID，它可以正常工作，但总是在您尝试两次操作时失败。

我真的不明白 WPF 在幕后做了什么，但我猜我的代码正在生成容器，这些容器会累积并最终导致代码崩溃，因为代码太多了。当我在调试器中中断所有操作时，它似乎一直在不断地检索每个 Transaction 对象的绑定依赖项属性，所以不知道为什么当可视区域中只有 30 个时它试图获取这么多的依赖项属性，它似乎只是试图检索每一个。

在对 Search for Transaction 的调用之间是否有一种方法可以清除 TreeView 控件中所有生成的 UI 容器和对象并将其重置为已卸载，以便每次搜索都从头开始生成容器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:26:17.297

您可以使用 ICollectionView 通过将 TreeView 的 Itemsource 绑定到集合视图来对树视图进行搜索，如下所示

```
 ICollectionView defaultView = CollectionViewSource.GetDefaultView(treeView.ItemsSource);
 defaultView.Filter += delegate(object item)
 {
    string searchString = searchTextBox.Text;
 } 
```

[链接](http://marlongrech.wordpress.com/2008/11/22/icollectionview-explained/)以获得更多帮助

又一[参考](http://www.codeproject.com/Articles/32975/Implement-a-Firefox-like-search-in-WPF-application)

# php - 如何优化此查询以快速加载朋友

> ID：14581441
> 
> 赞同：0
> 
> 时间：2013-01-29T11:05:31.693
> 
> 标签：php, mysql

这是我的附加代码，我已经定义了查询。

```
SELECT
  is_facebook_user,
  fname,
  lname,
  profilenam,
  mem_id,
  gender,
  profile_type,
  photo_thumb,
  photo_b_thumb
FROM members
WHERE mem_id IN(SELECT DISTINCT
          mem_id            AS frnd
        FROM network
        WHERE mem_id = '$userId'
             OR frd_id = '$userId')
ORDER BY profilenam; 
```

在这里我想尽快获取朋友。我还在 mem_id 和 frd_id 上应用了索引。但是仍然有 2500 个朋友需要很长时间并且函数打印的响应非常慢。

谢谢火花 [在这里找到代码链接](http://codepad.org/NPEQz6ph)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:11:45.103

加盟怎么样？

```
SELECT
  m.is_facebook_user,
  m.fname,
  m.lname,
  m.profilenam,
  m.mem_id,
  m.gender,
  m.profile_type,
  m.photo_thumb,
  m.photo_b_thumb
FROM members m
  join network n
    on m.mem_id = n.mem_id
WHERE n.mem_id = '$userId'
     or n.frd_id = '$userId'
ORDER BY m.profilenam; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:22:10.707

您可以使用这样的连接

```
SELECT
  is_facebook_user,
  fname,
  lname,
  profilenam,
  mem_id,
  gender,
  profile_type,
  photo_thumb,
  photo_b_thumb
FROM members
  left join (select
           distince   mem_id
         from network
         where mem_id = '$userId'
          OR frd_id = '$userId') as e
    on e.mem_id = members.mem_id 
```

# forms - 带有数组名称的 ExtJS 表单

> ID：14581443
> 
> 赞同：0
> 
> 时间：2013-01-29T11:05:43.873
> 
> 标签：forms, model-view-controller, extjs4

我不会构建用户联系表，其中包含 2 个包含相同字段但使用不同语言的选项卡。使用 MVC 和 ExtJS 4.0.7。

我不会重用**userinfo**面板 .. 只是给它一个**参数 langKey** = en/fr

带有用户信息的选项卡小部件如下所示：

```
Ext.define('MyApp.view.user.FormUserInfo', {
     extend: 'Ext.Panel',
     alias: 'widget.userinfo', 
     defaultType: 'textfield',

     items: [
     { 
         name: 'first_name['+langKey+']',
     }, {
         name: 'last_name['+langKey+']',  
     }]
 }); 
```

表单像这样加载它：

```
Ext.define('MyApp.view.user.Form', {
    extend: 'Ext.FormPanel',
    xtype: 'form',
    items: [
    {
        xtype: 'tabpanel',  
        activeTab: 2,
        items:[
        {
            xtype: 'userinfo',
            cls: 'en',
            tabConfig: {
                title: 'Contact Details(EN)'
            }
        },{
            xtype: 'userinfo',
            cls: 'de',
            tabConfig: {
                title: 'Contact Details(DE)'
            } 
        }]// /TabPanel.items
    }]// /FormPanel.items
}); 
```

事实上，表单包含 10 多个字段和**2 种或更多**语言......所以我需要很好地控制数据。

使用小部件或我可以使用的属性时有什么方法可以传递变量？我试图使用面板类（**cls**） `'first_name['+this.cls+']'`，但范围是错误的或其他东西（而且有点难看）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:57:09.747

一种简单的方法是将自定义配置属性添加到用户信息面板，然后将自定义配置值应用于 initComponent() 中的字段名称。

例子：

```
Ext.define('UserInfo', {
    extend: 'Ext.Panel',
    alias: 'widget.userinfo', 
    defaultType: 'textfield',
    langKey: 'en',
    initComponent: function() {
        var me = this;
        Ext.apply(me, {
            items: [
             { 
                 fieldLabel: 'First Name '+me.langKey,
                 name: 'first_name['+me.langKey+']',
             }, {
                 fieldLabel: 'Last Name '+me.langKey,
                 name: 'last_name['+me.langKey+']',  
             }]            
        });
        me.callParent( arguments );
    }

}); 
```

然后，您可以通过自定义配置，就像您对其他任何配置一样：

```
{
    xtype: 'userinfo',
    lankKey: 'en',
    tabConfig: {
        title: 'Contact Details(EN)'
    }
} 
```

[这是一个活生生的例子。](http://jsfiddle.net/existdissolve/58KKk/)

# css - 将此表格布局转换为 DIV 布局

> ID：14581446
> 
> 赞同：1
> 
> 时间：2013-01-29T11:05:59.197
> 
> 标签：css, google-chrome, layout, internet-explorer-8, mozilla

谁能帮我设计一个看起来像这个表格布局的 DIV/CSS 布局？

```
<table id="container">
    <tr>
        <td colspan="2" id="header">
            Header
        </td>
    </tr>
    <tr>
        <td rowspan="2" id="navBar">
            Navigation bar
        </td>
        <td>
            Main content
        </td>
    </tr>
    <tr>
        <td id="footer">
            Footer
        </td>
    </tr>
</table> 
```

表格的 css 在这里：

```
<style type="text/css">
    #container
    {
        width: 100%;
        min-width: 800px;           
        border-collapse: collapse;
    }

    #header
    {
        height: 78px;
        background-color: Orange;
    }

    #navBar
    {
        width: 200px;
        background-color: Gray;
    }

    #footer
    {
        height: 50px;
        background-color: Silver;
    }
</style> 
```

我遇到了严重的问题，因为我也不能：

*   使父 div 自动增长到它的孩子的高度。（＃容器）
*   使所有子 div**均匀**增长到其父高度的大小。（#navBar，#main）
*   始终将 div 定位在其父级的底部 (#footer)

我尝试了一些 CSS 生成器，但没有成功。

这里的关键是行**跨度**很难在 CSS/div 中模拟（对于经验丰富的编码器，没有经验的设计师）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:35:14.937

你可以这样做..

HTML

```
<div id="container">
<div id="header">Header</div>
<div id="navBar">Navigation bar</div>
<div id="content-here">content here
<div id="footer">Footer</div>
</div>
</div> 
```

CSS

```
<style type="text/css">
    #container
    {
        width: 100%;
        min-width: 800px;           
        border-collapse: collapse;
    }

    #header
    {
        height: 78px;
        background-color: Orange;
    }

    #navBar
    {
        width: 200px;
        background-color: Gray;
    }

    #footer
    {
        height: 50px;
        background-color: Silver;
    }
</style> 
```

# python - .itemgetter 的奇怪输出，用于按值 python 进行列表排序

> ID：14581447
> 
> 赞同：1
> 
> 时间：2013-01-29T11:05:59.007
> 
> 标签：python, list, python-2.7

所以我正在研究[Google Python Code Class](https://developers.google.com/edu/python/)并尝试做 Word_Count.py 练习。目的是创建一个按字数（值）排序的单词（键）字典，并将它们作为元组返回以供打印。

我创建了一个辅助函数来创建我的字典：

```
def dict_creator(filename): #helper function to create a dictionary each 'word' is a key and the 'wordcount' is the value
            input_file = open(filename, 'r') #open file as read
            for line in input_file: #for each line of text in the input file
                    words = line.split() #split each line into individual words
                    for word in words: #for each word in the words list(?)
                            word = word.lower() #make each word lower case.
                            if word not in word_count: #if the word hasn't been seen before
                                    word_count[word] = 1 #create a dictionary key with the 'word' and assign a value of 1
                            else: word_count[word] += 1 #if 'word' seen before, increase value by 1
            return word_count #return word_count dictionary
            word_count.close() 
```

我现在正在使用本文中概述的 .itemgetter 方法创建按值（从大到小）排序的字典：[链接](https://stackoverflow.com/a/1915602/1842478)。这是我的代码：

```
def print_words(filename):
        word_count = dict_creator(filename) #run dict_creator on input file (creating dictionary)
        print sorted(word_count.iteritems(), key=operator.itemgetter(1), reverse=True)
        #print dictionary in total sorted descending by value. Values have been doubled compared to original dictionary?
        for word in sorted(word_count.iteritems(), key=operator.itemgetter(1), reverse=True):
                #create sorted list of tuples using operator module functions sorted in an inverse manner
                a = word
                b = word_count[word]
                print a, b #print key and value 
```

但是，当我在测试文件和较小的文件上运行代码时，它会引发一个关键错误（如下所示）。

```
Traceback (most recent call last):
  File "F:\Misc\google-python-exercises\basic\wordcount_edited.py", line 74, in <module>
    print_words(lorem_ipsum) #run input file through print_words
  File "F:\Misc\google-python-exercises\basic\wordcount_edited.py", line 70, in print_words
    b = word_count[word]
KeyError: ('in', 3) 
```

我打印了原始字典和排序字典，当字典排序后，所有值似乎都翻了一番。我查看了与此类问题相关的几个线程并检查了 .itemgetter 文档，但是我似乎找不到其他有类似问题的人。

谁能指出是什么导致我的代码在 word_count 函数中第二次迭代字典，导致值增加？

谢谢！

某人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:19:51.450

(1) 你实际上并没有定义`word_count`in `dict_creator`。我期待看到

```
word_count = {} 
```

在开始时。这意味着无论`word_count`它发生什么变化都是在其他地方和全局定义的，所以每当你调用`dict_creator`它时，它都会添加到同一个`word_count`字典中，增加值。`word_count`至少从您显示的代码中，您只有一个。

（2）关于KeyError：

```
 for word in sorted(word_count.iteritems(), key=operator.itemgetter(1), reverse=True):
            #create sorted list of tuples using operator module functions sorted in an inverse manner
            a = word
            b = word_count[word] 
```

`iteritems()`返回元组，所以`word`已经是`('dict_creator', 1)`. 您可以简单地按原样打印它。调用`word_count[word]`尝试使用元组`(key, value)`作为键。IOW，即使你已经调用了变量词，它实际上是`word_and_count`, with `word, count = word_and_count`。

(3) 在这部分：

```
 return word_count #return word_count dictionary
        word_count.close() 
```

我认为您的意思是`input_file.close()`，但是在您返回“之后”关闭文件是没有意义的，因为该行不会被执行。另一种选择是使用`with`成语：

```
with open(filename) as input_file:
    code_goes_here = True
return word_count 
```

此处文件将自动关闭。

进行上述更改后，您的代码似乎对我有用。

# python - Python常规语法删除@字符串直到空格

> ID：14581449
> 
> 赞同：1
> 
> 时间：2013-01-29T11:06:10.627
> 
> 标签：python, regex

我试图用谷歌搜索一些，但它太具体了，我对 python 的正则表达式完全陌生。我可以知道如何删除符号 @ 之后的整个字符串，直到下一个空格？虽然这是我做的，但没有运气

```
s = re.sub('@[^\s]+', '',s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:16:06.553

下面的正则表达式呢？

```
re.sub(r'@.*?(?=\s)', '', s) 
```

例子：

```
>>> re.sub(r'@.*?(?=\s)', '', 'text before `at`@text-right-arter`at` text after first space')
'text before `at` text after first space'
>>> 
```

它的行为与您的解决方案完全相同（**更新：**实际上并非如此。请参阅下面的**nhahtdh**评论）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:25:03.563

我认为这对您不起作用，因为您也删除了“@”。

> **我删除符号@之后**的整个字符串，直到下一个空格

试试这个：

```
In [1]: s='foo@barxyz trash trash'

In [2]: import re

In [3]: re.sub('(?<=@)[^\s]+','',s)
Out[3]: 'foo@ trash trash' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:15:07.710

根据您提供的输入和上下文。

```
re.sub('@\S* ','',string) 
```

见这里[http://codepad.org/8KmXy7aW](http://codepad.org/8KmXy7aW)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:24:04.273

我认为这就是你想要的：

```
>>> import re
>>> s = 'unchanged1 @remove unchanged2'
>>> print re.sub('@\S+', '', s)
unchanged1  unchanged2 
```

根据OP：'删除符号@之后的整个字符串，直到下一个空格'

删除多余的空间：

```
>>> print re.sub('@\S+ ', '', s)
unchanged1 unchanged2 
```

包括“@”：

```
>>> print re.sub('@\S+ ', '@', s)
unchanged1 @ unchanged2 
```

# windows - 防止在 pre-create-callback / post-create-callback 中覆盖文件

> ID：14581450
> 
> 赞同：0
> 
> 时间：2013-01-29T11:06:10.130
> 
> 标签：windows, driver, minifilter

我编写了用于防止写入 PE 文件的 minifilter 驱动程序。我在创建后回调中检查文件内容。如果格式匹配，我尝试调用`FltCancelFileOpen`并返回`STATUS_ACCESS_DENIED`。

但这可以通过打开文件来劫持`CreateDisposition = FILE_OVERWRITE/FILE_OVERWRITE/FILE_SUPERSEDE`。在这种情况下，文件在调用 post-create-callback 时已经被截断。

如何克服这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:03:52.937

更好的选择是检查预创建回调并拒绝以对现有文件的写访问权限打开文件。您可以通过`FLT_PREOP_COMPLETE`从预创建返回并在`CallbackData->IoStatus.Status`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-12T14:34:57.957

尝试这个 ：

```
 FltCancelFileOpen( FltObjects->Instance, FltObjects->FileObject );
 Data->IoStatus.Status = STATUS_ACCESS_DENIED;
 Data->IoStatus.Information = 0; 
```

并返回

```
FLT_POSTOP_FINISHED_PROCESSING; 
```

GitHub 上 microsoft 的扫描仪示例中的完整示例

# iphone - OCUnit 测试不调用协议方法

> ID：14581452
> 
> 赞同：0
> 
> 时间：2013-01-29T11:06:15.713
> 
> 标签：iphone, ipad, unit-testing

我有一个协议来编写 OCUnit 测试 Caes

```
@interface ClassDeclaration: NSObject{

... Varables 
}
... Methods
// Protocol declartion!
@end
@protocol Message <NSObject>

-(BOOL) isValid;

@end 
```

实现方法写在另一个名为'NewClassName'的类中

```
-(BOOL) isValid{

    return (self.message != nil);
} 
```

现在！

我正在为协议方法编写测试用例！

```
-(void)testIsValid{
    ClassDeclaration *obj = [[ClassDeclaration alloc] init];
    SEL methodName = @selector(isValid);
    BOOL test = [obj respondsToSelector:methodName];
} 
```

我的问题是我可以为协议方法编写测试用例吗？

我试图调用 `SEL methodName = @selector(isValid);`测试用例的方法，这个方法没有调用我不知道为什么？谁能让我知道协议方法将在运行时调用，那么如何通过单元测试调用此方法？

@All 提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T14:12:07.260

自从提出这个问题以来已经有一段时间了，但是如果有人偶然发现这个问题，我有一个答案。

看看 OCMock 框架。有了它，您可以模拟对象和协议等。您可以在此处找到框架，并在[此处](http://ocmock.org)[查看](http://ocmock.org/features/)功能。

OCMock 有一个类方法，您可以使用它来为协议创建模拟：

```
+mockForProtocol: 
```

如 ocmock.org/features 所述，您可以使用以下命令创建模拟：

```
id aMock = [OCMockObject mockForProtocol:@protocol(SomeProtocol)] 
```

还有一个可用的描述：

> 创建一个可以像实现 SomeProtocol 的对象的实例一样使用的模拟对象。

这就是主题。了解OCMock的使用方法，可以参考以下帖子：

*   [ocmock.org/features](http://ocmock.org/features/)

*   [alexvollmer.com](http://alexvollmer.com/posts/2010/06/28/making-fun-of-things-with-ocmock/)

*   [埃里克多](https://github.com/erikdoe/ocmock/blob/master/Source/OCMockTests/OCMockObjectTests.m)

除了这些链接之外，您还可以获得[此处](http://ocmock.org/tutorials/)发布的链接背后的信息。

快乐嘲讽！汤姆特

# android - Android 市场 - 在没有蓝牙的特定设备上找不到应用程序

> ID：14581456
> 
> 赞同：1
> 
> 时间：2013-01-29T11:06:24.653
> 
> 标签：android, bluetooth, google-play, android-permissions

我有一个在没有蓝牙的特定设备上无法看到的应用程序。问题是在我的清单文件中我有蓝牙权限：

```
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" android:required="false"></uses-permission>
<uses-permission android:name="android.permission.BLUETOOTH" android:required="false"></uses-permission> 
```

我以编程方式排除了该设备的蓝牙选项，但在该设备上找不到我的应用程序。

所以，3个问题：

1.  有没有工具可以显示市场上可用的设备列表？像 [https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1286017](https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1286017) 但仅不在市场上
2.  我可以以某种方式只为具有蓝牙的设备添加此权限吗？
3.  所有其他可以帮助我在市场上找到我的应用程序的解决方案（但要保留对带有蓝牙的设备的许可）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:10:23.433

我猜你也有

```
<uses-feature android:name="android.hardware.bluetooth" /> 
```

在清单中。您可以尝试添加`android:required="false"`。

# delphi - 在 Delphi 中处理 Word 中的 Quit 事件

> ID：14581459
> 
> 赞同：4
> 
> 时间：2013-01-29T11:06:42.663
> 
> 标签：delphi, event-handling, ms-word, ole

如何在 Delphi 代码中处理从 Word 中退出的事件？

我想做同样的[事情](https://stackoverflow.com/questions/11041494/execution-freezing-while-checking-if-word-is-visible)，但在德尔福

我有链接帖子的同样问题

我的代码是这样的：

```
type
TMSOAWinWord97 = class(...)
    private
        FApplication : OleVariant;
    protected
        procedure WordAppQuit(Sender: TObject);
    public
        ...
end;

procedure TMSOAWinWord97.WordAppQuit(Sender: TObject);
begin
    FApplication := unassigned;
end;

procedure TMSOAWinWord97.CreateApplication(showApplication: Boolean);
begin   
    FApplication:=CreateOleObject('Word.Application.12');
    FApplication.Quit := WordAppQuit;
    ...
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T16:13:02.530

制作一个单元 UEventsSink

```
unit UEventsSink;

interface

uses
   ActiveX, windows, ComObj, SysUtils;

type

   IApplicationEvents = interface(IDispatch)
      ['{000209F7-0000-0000-C000-000000000046}']
      procedure Quit; safecall;
   end;

   TApplicationEventsQuitEvent = procedure (Sender : TObject) of object;

   TEventSink = class(TObject, IUnknown, IDispatch)
      private
         FCookie : integer;
         FSinkIID : TGUID;
         FQuit : TApplicationEventsQuitEvent;
         // IUnknown methods
         function _AddRef: Integer; stdcall;
         function _Release: Integer; stdcall;
         function QueryInterface(const IID: TGUID; out Obj): HResult; stdcall;
         // IDispatch methods
         function GetTypeInfoCount(out Count: Integer): HResult; stdcall;
         function GetTypeInfo(Index, LocaleID: Integer; out TypeInfo): HResult;     stdcall;
     function GetIDsOfNames(const IID: TGUID; Names: Pointer;
           NameCount, LocaleID: Integer; DispIDs: Pointer): HResult; stdcall;
     function Invoke(DispID: Integer; const IID: TGUID; LocaleID: Integer; Flag: Word;
           var Params; VarResult, ExceptInfo, ArgErr: Pointer): HResult; stdcall;
  protected
     FCP : IConnectionPoint;
     FSource : IUnknown;
     procedure DoQuit; stdcall;
  public
     constructor Create;

     procedure Connect (pSource : IUnknown);
     procedure Disconnect;

     property Quit : TApplicationEventsQuitEvent read FQuit write FQuit;
   end;

implementation

function TEventSink.QueryInterface(const IID: TGUID; out Obj): HResult;
begin
  if GetInterface(IID, Obj) then
      Result:= S_OK
  else if IsEqualIID(IID, FSinkIID) then
     Result:= QueryInterface(IDispatch, Obj)
  else
   Result:= E_NOINTERFACE;
end;

// GetTypeInfoCount
//
function TEventSink.GetTypeInfoCount(out Count: Integer): HResult;
begin
  Result := E_NOTIMPL;
  Count := 0;
end;

// GetTypeInfo
//
function TEventSink.GetTypeInfo(Index, LocaleID: Integer; out TypeInfo): HResult;
begin
  Result := E_NOTIMPL;
  pointer (TypeInfo) := NIL;
end;

// GetIDsOfNames
//
function TEventSink.GetIDsOfNames(const IID: TGUID; Names: Pointer;
     NameCount, LocaleID: Integer; DispIDs: Pointer): HResult; stdcall;
begin
  Result := E_NOTIMPL;
end;

function TEventSink.Invoke(DispID: Integer; const IID: TGUID; LocaleID: Integer;
   Flag: Word; var Params; VarResult, ExceptInfo, ArgErr: Pointer): HResult;
begin
  Result:= DISP_E_MEMBERNOTFOUND;
  case DispID of
  2: begin
       DoQuit;
       Result:= S_OK;
    end;
  end
end;

// DoQuit
//
procedure TEventSink.DoQuit;
begin
  if not Assigned (Quit) then Exit;
  Quit (Self);
end;

// Create
//
constructor TEventSink.Create;
begin
   FSinkIID := IApplicationEvents;
end;

// Connect
//
procedure TEventSink.Connect (pSource : IUnknown);
var
  pcpc : IConnectionPointContainer;
begin
  Assert (pSource <> NIL);
  Disconnect;
  try
    OleCheck (pSource.QueryInterface (IConnectionPointContainer, pcpc));
    OleCheck (pcpc.FindConnectionPoint (FSinkIID, FCP));
    OleCheck (FCP.Advise (Self, FCookie));
    FSource := pSource;
  except
    raise Exception.Create (Format ('Unable to connect %s.'#13'%s',
      ['Word', Exception (ExceptObject).Message]
    ));
  end;
end;

// Disconnect
//
procedure TEventSink.Disconnect;
begin
  if (FSource = NIL) then Exit;
  try
    OleCheck (FCP.Unadvise(FCookie));
    FCP := NIL;
    FSource := NIL;
  except
    pointer (FCP) := NIL;
    pointer (FSource) := NIL;
  end;
end;

// _AddRef
//
function TEventSink._AddRef: Integer;
begin
   Result := 2;
end;

// _Release
//
function TEventSink._Release: Integer;
begin
   Result := 1;
end;

end. 
```

在主程序中为您的 Exit 函数添加一个对象 eventSink 和一个方法，将对象 EventSink 连接到 Word 应用程序的 ole 变体并注册退出函数

```
unit Unit1;

interface

uses
  Windows, SysUtils, Classes, Graphics, Controls, Forms, Dialogs, StdCtrls,
  ExtCtrls, ComObj, Variants, UEventsSink;

type

  TForm1 = class(TForm)
    Button1: TButton;
    Memo1: TMemo;
    procedure Button1Click(Sender: TObject);
    procedure ApplicationEventsQuit(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
      FEventSink : TEventSink;
      FWordApp : OleVariant;
  public
  end;

var
  Form1: TForm1;

implementation

{$R *.DFM}

procedure TForm1.FormCreate(Sender: TObject);
begin
   FEventSink := TEventSink.Create;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
   FEventSink.Disconnect;
   FEventSink.Free;
end;

procedure TForm1.ApplicationEventsQuit(Sender: TObject);
begin
   FEventSink.Disconnect;
   Memo1.Lines.Add ('Application.Quit');
   FWordApp := unassigned;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  try
    // instantiate Word
    FWordApp := CreateOleObject('Word.Application.14');
    // connect Application events
    FEventSink.Connect(FWordApp);
    FEventSink.Quit := ApplicationEventsQuit;
    // show Word
    FWordApp.Visible := TRUE;
  except
    ShowMessage ('Unable to establish connection with Word !');
    FWordApp := unassigned;
  end;
end;

end. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T11:24:44.073

您可以像这样处理 Word 的`Quit`事件：

```
uses
  Word2000;

.....

procedure TForm1.FormCreate(Sender: TObject)
var
  WordApp: TWordApplication;
begin
  WordApp := TWordApplication.Create(Self);
  WordApp.Visible := True;
  WordApp.OnQuit := WordAppQuit;
end;

procedure TForm1.WordAppQuit(Sender: TObject);
begin
  ShowMessage('Word application quit');
end; 
```

在实际代码中，`WordApp`将是您的一个对象的字段，而不是我在此处显示的局部变量。

您的代码使用后期绑定 COM。虽然您可以使用后期绑定 COM 编写事件接收器，但使用早期绑定 COM 非常容易，因为为您提供了事件接收器。

因此，停止调用`CreateOleObject`来创建 COM 对象，而是使用`TWordApplication.Create`.

# php - 为什么 MAMP 不显示错误？

> ID：14581460
> 
> 赞同：51
> 
> 时间：2013-01-29T11:06:43.280
> 
> 标签：php, error-handling, mamp

好的，这变得非常令人沮丧。MAMP 用于显示错误，但随后停止。我决定重新安装它，因为我无法弄清楚。我检查我的 PHP 版本，运行 5.4.4 并转到该文件夹​​并将 php.ini 更改为：

```
error_reporting  =  E_ALL
display_errors = On 
```

仍然没有显示错误。我浏览了所有文件夹并更改了所有 php.ini 文件，以防万一。没有。我修复了强制错误并转储`phpinfo()`，检查错误部分并且 display_errors 为关闭。我勒个去。

我再次放置`error_reporting(E_ALL); ini_set('display_errors', 'on');`在 PHP 文件的开头`phpinfo()`。本地值现在是 On，master 仍然是 Off。强制 PHP 错误，仍然得到 Server Error 而不是 PHP 错误。

有人有任何见识吗？我在某些代码的某个地方有一个错误并且找不到它，希望 PHP 能告诉我。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-29T11:38:22.140

MAMP 为服务器、客户端等设置了一些不同`php.ini`的文件。检查您`phpinfo()`实际`php.ini`读取的文件。看起来你编辑错了。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-07-16T14:58:56.163

MAMP 上有两个`php.ini`文件。您应该更改这两个`php.ini`文件。

1.  `Applications/MAMP/bin/php/'php version you are using(php5.5.10)'/conf/php.ini`
2.  `Applications/MAMP/conf/php/'php version you are using(php5.5.10)'/conf/php.ini`

然后改变：

```
display_errors = Off 
```

到：

```
display_errors = On 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-11-13T10:29:56.453

如果您使用的是 MAMP PRO，则必须在 UI 界面中启用错误处理 (PHP)，该界面应包含至少两个主要选项：“显示启动错误”和设置输出“至：显示”。

`Display startup errors`选项等效于`display_startup_errors`（在 PHP 中）`To: Display`和`display_errors`.

见下文：

![MAMP PRO - 错误处理](../Images/eb5e707e412a43836e3fad010b079b50.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-07-07T22:00:51.253

更改`php.ini`文件中的设置。该文件位于`MAMP > conf > php5 > php.ini`

查找`display_errors = Off`并更改为`display_errors = On`

之后，您需要重新启动 Apache 和 MySQL 服务器以使更改生效。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-28T18:45:24.920

MAMP PRO 用户可以访问 UI 中的 PHP 选项卡并确保 Log Errors: to screen 被选中：[screencast](http://www.screencast.com/t/EhMpl3aU)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-09-21T18:31:46.160

这是此问题的 2018 年更新。首先，我遇到了同样的麻烦并找到了这个线程。我使用 phpinfo() 并找到了 php.ini 文件的另一个位置。以下是路径（我在 Mac 上工作）：

```
/Applications/MAMP/bin/php/[php version]/conf/php.ini

/Applications/MAMP/conf/php/[php version]/php.ini 
```

和 ...

```
/Library/Application Support/appsolute/MAMP PRO/conf/php.ini 
```

phpinfo() 页面列出了 php.ini 的两个来源：

*   **配置文件 (php.ini) 路径**
    /Applications/MAMP/bin/php/[php 版本]/conf
*   **加载的配置文件** /Library/Application Support/appsolute/MAMP PRO/conf/php.ini

我最终更改了所有三个，添加`error_reporting(E_ALL)`到一些页面，重新启动服务器（甚至重新启动机器），*但仍然*无法让它显示任何错误消息。

我不知道从这里去哪里。有任何想法吗？

**** ---------------------------------------------- **** 2020 年编辑 **** ---------------------------------------------------- ------ **** 最新的 MAMP 升级 (v6) 更改了主 Web 主机目录。它不在 Applications/MAMP/ 目录中。这是好事。但这要求我改变我所有项目所在的位置。我不得不重新配置我的 IDE、Postman、Git 和其他一些东西。所以，我认为这将是迁移到 Docker 容器的最佳时机。

Docker 带来了全新的挑战，但是一旦我熟悉了它并部署了一些容器，它就很棒了。在浏览器中渲染时感觉更快，而且我更有信心我的项目将在生产服务器上按预期运行。最终我们的生产服务器将使用容器，所以这对我来说很有意义。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-10T21:15:10.867

如果您使用的是 MAMP 3.2.2 版，那么您只需要更改一个 php.ini 文件：

苹果电脑：`Applications/MAMP/conf/'(php7.0.9)'/php.ini`

视窗：`C:\MAMP\conf\PHP Version you use'(php7.0.9)'\php.ini`

我知道这是一篇旧帖子，但 MAMP 一直在更改他们的文件配置，所以我希望这会有所帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-11-23T09:43:29.320

对于较新版本的 MAMP，配置文件存储在`Appliations/MAMP/bin/php/[php version]/conf`.

Andrew Nagy 的回答为我指明了正确的方向，但对于我安装的 MAMP 来说并不完全正确。为什么它们不同，我不知道，但我们来了。

如果有人卡住了，最简单的方法就是`<?php echo phpinfo(); ?>`在应用程序的索引文件中查找加载的`php.ini`目录。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-29T14:57:08.327

还有一个模板保存在`php.ini`. 去`File > Edit Template > PHP > Your Version`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-20T15:01:12.903

在 MAMP 3.2.0 和 PHP 7 上，您需要定位`php.ini-production`并将值更改为`Production Value = On`

# jquery - 循环更改背景图像

> ID：14581464
> 
> 赞同：1
> 
> 时间：2013-01-29T11:06:52.560
> 
> 标签：jquery

我想使用`jQuery`onclick 更改页面的背景图像如下所示：

```
var colors = ['blue', 'green', 'yellow', 'black'];
$('#click').click(function(){
    $('body').css('background', colors[1]);
}) 
```

但我想使用一些简短的'jQuery`函数自动更改它，到目前为止我的尝试是这样的：

```
var colors = ['blue', 'green', 'yellow', 'black'];

$.each(colors, function(color){
    setTimeout(function(){$('body').css('background', color)}, 1000);
}); 
```

但它不起作用，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:08:15.090

你可以这样做 ：

```
var colors = ['blue', 'green', 'yellow', 'black'];

$.each(colors, function(i, color){
    setTimeout(function(){$('body').css('background', color)}, (i+1)*1000);
}); 
```

我做了两个改变：

*   给回调的第一个参数是索引，而不是数组的元素
*   我使用索引给出不同的延迟来计算延迟

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:10:47.750

尝试

```
var colors = ['blue', 'green', 'yellow', 'black'],
    colorIndex = 0,
    $body = $('body');

setInterval(function(){ $body.css('background', colors[colorIndex++ % colors.length])}, 1000); 
```

演示在[http://jsfiddle.net/gaby/8uZga/](http://jsfiddle.net/gaby/8uZga/)

# javascript - 没有在fancybox上触发文本框点击事件

> ID：14581467
> 
> 赞同：1
> 
> 时间：2013-01-29T11:06:56.850
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我在我的 asp.net MVC 应用程序中使用 jquery [fancybox ，如下所示：](http://fancyapps.com/)

```
 $.fancybox.open([$("#AddCallRecordingPopup")], {
                            helpers: {
                                width: 600,
                                title: null,
                                autoHeight: true,
                                overlay: {
                                    css: {
                                        cursor: 'auto'
                                    },
                                    closeClick: false
                                }
                            }

                        }); 
```

我可以看到fancybox。花式框的 HTML 是：

```
 <div id="AddCallRecordingPopup" title="Add Call Recording" style="display: none"
            class="popup-dv">           
 <input type="text" value="" title="Click here to enter a telephone number" name="NumberCalledTo" id="NumberCalledTo" class="normal phone required" autocomplete="off">
 </div> 
```

我正在尝试使用下面的js来触发fancybox上的文本框上的点击事件

```
 var $inputs = $(".phone"), $selects = $('.dialprefix');  

    $inputs.click(function () {
        /* get index of active input and use to match select*/
        var idx = $inputs.index(this), $sel = $selects.eq(idx);
        var dialprefix = $sel.val();
        var Id = $sel.attr('id');

        $(this).focus();
        var phone = $(this).val();
        var phoneId = $(this).attr('id');
        $("#PhoneNumber").val(phone);
        $("#SelecteddialprefixId").val(Id);
        $("#SelectedPhoneId").val(phoneId);

    }) 
```

但我得到：

```
TypeError: element.prop(...) is undefined
[Break On This Error]   

rez  = element.prop('class').match(/fancybox\.(\w+)/); 
```

仅当我单击文本框时才会发生这种情况。Fancybox 关闭，我看到了错误。我认为在 $inputs.click 上有一些 jquery 与 fancybox 的冲突。请提出解决方案。

# android - Android：如何在 webview 中设置 pdf 的默认缩放标签？

> ID：14581470
> 
> 赞同：2
> 
> 时间：2013-01-29T11:07:04.077
> 
> 标签：android

有什么方法可以增加 webview 中显示的 pdf 的默认缩放级别？

我正在使用 google docs url 在 web 视图中打开 pdf。它可以正确打开 pdf 文件，但只能将我的文件放大到 100%。我想像 adobe reader 一样放大 200%。

提前致谢 ！

# ruby-on-rails - Rails：使用 ActiveAdmin，我的控制器的视图是什么？

> ID：14581471
> 
> 赞同：0
> 
> 时间：2013-01-29T11:07:06.367
> 
> 标签：ruby-on-rails, activeadmin

这可能有一个明显的答案，但我只是想确定并学习如何以正确的方式做事。

我刚开始在 Rails 上使用 ActiveAdmin，现在显然我不想要更多由脚手架命令生成的*新*视图和*编辑视图。*我应该删除控制器文件中的那些视图和方法（*new-edit-create-update-destroy ）吗？*

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:54:12.877

当然，如果未使用添加的视图和操作。然后你可以删除那些。通常不建议使用脚手架，因为它会创建许多可能永远不会在应用程序中使用的不必要文件。

# java - 锁定/监控/关键部分扩展？

> ID：14581479
> 
> 赞同：1
> 
> 时间：2013-01-29T11:07:25.540
> 
> 标签：java, concurrency, terminology, critical-section

在子类或调用者函数中扩展临界区时如何调用？

假设`class A`有同步方法`m1`和`m2`

```
class A {
 public synchronized void m1() {}
 public synchronized void m2() {}
} 
```

And`class B extends A`有`m3`同时使用`m1`and`m2`和 的方法也被同步

```
class B extends A {
 public synchronized void m3() { 
      ...
      m1();
      ...
      m2();
      ...
 }
} 
```

如果`m3`希望在调用`m1`和之间保持状态不变，则可能需要这样做`m2`。

问题是关于术语的。

这叫什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:15:13.523

如果在执行流程上有一个锁层次结构 - 层次结构中的锁称为***嵌套锁***。它们可以是可重入的或不可重入的。

如果单个操作是线程安全的，则在这种情况下是***m1()***和***m2()***，但是控制流取决于先前操作的结果的操作序列可能会受到数据竞争的影响——这称为***条件线程安全***。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:14:54.127

我敢肯定，这种情况没有专门的术语。此外，我看不到您实际上在哪里*扩展*子类中的关键部分。

我认为，这只是称为*“在子类的新方法中调用超类的方法”*。没有其他的。这与同步无关。

**升级版：**

实际上，您所做的是这样的代码：

```
class B extends A {
 public void m3() { 
      synchronized (this) {
      ...
      synchronized (this) {
          //m1();
          ... m1 source...
      } 
      ...
      synchronized (this) {
          //m2();
          ... m2 source...
      } 
      ...
      }
 }
} 
```

什么绝对等同于：

```
class B extends A {
 public void m3() { 
      synchronized (this) {
      ...
          //m1();
          ... m1 source...
      ...
          //m2();
          ... m2 source...
      ...
      }
 }
} 
```

即在同一对象的块内的同一对象上的内部同步`synchronized`- 是不必要且毫无意义的事情。

# highcharts - 如何为每列设置单独的列颜色（HighStock/HighChart）

> ID：14581480
> 
> 赞同：2
> 
> 时间：2013-01-29T11:07:28.430
> 
> 标签：highcharts, highstock

[请看看这个](http://jsfiddle.net/nQ8GL/)

我正在尝试使用 Highstock 创建柱形图。我想为每个单独的列指定颜色。我尽我所能，但无法让它发挥作用。

有人可以建议吗？

非常感谢

```
$(function () {
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=range.json&callback=?', function(data) {

    window.chart = new Highcharts.StockChart({

        chart: {
            renderTo: 'container',
            type: 'columnrange'
        },

        rangeSelector: {
            selected: 2
        },

        title: {
            text: 'Temperature variation by day'
        },

        tooltip: {
            valueSuffix: '°C'
        },

        series: [{
            name: 'Temperatures',
            data: data
        }]

    });
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:42:01.880

似乎当使用标记时`color`，点的属性被高图忽略。如果您设置点的属性，只需将`color`选项放入其中。如果您不设置标记，只需像您在示例中所做的那样设置颜色属性。`marker``marker`

这是一个工作示例：

> [http://jsfiddle.net/nQ8GL/](http://jsfiddle.net/nQ8GL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:15:46.530

如果你想改变列的颜色，你应该设置颜色参数。

```
plotOptions: {
        column: {
            color:'red'
        }
    }, 
```

[http://jsfiddle.net/nQ8GL/1/](http://jsfiddle.net/nQ8GL/1/)

# appcelerator - Titanium Appcelerator 中的问题

> ID：14581484
> 
> 赞同：0
> 
> 时间：2013-01-29T11:07:49.197
> 
> 标签：appcelerator, titanium-mobile, appcelerator-mobile, titanium-modules

我正在尝试导入一个项目并将其运行到 Appcelerator 上的 iPhone 模拟器上，但我在控制台上收到一条消息，上面写着：

```
 [WARN] :  The Ti.Geolocation.purpose property must be set.
        [INFO] :  {"source":{"cache":false},"type":"error"} 
```

我花了两个多小时试图消除这个问题。另外，请分享有关 appcelerator 应用程序生命周期的有用资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:35:47.193

它说“必须设置 Ti.Geolocation. purpose 属性。” 我会尝试类似的东西

```
Ti.Geolocation.purpose = "Find restaurants near you"; 
```

iOS 想让用户知道为什么你的 App 想知道他的位置。用户必须允许此地理位置权限。这就是为什么你应该用 if 语句包围你的位置请求：

```
if (Titanium.Geolocation.locationServicesEnabled){
    Titanium.Geolocation.getCurrentPosition(function(e){
        Ti.API.info(e.coords);
    }
}else{
    Titanium.UI.createAlertDialog({title:'Location Service', message:'Please turn on your location services.'}).show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:09:41.767

要发送到呼叫的参数是错误的。

# php - 从谷歌提取网址

> ID：14581488
> 
> 赞同：1
> 
> 时间：2013-01-29T10:23:04.960
> 
> 标签：php, url, search, extract

当您使用特定关键字进行谷歌搜索时，我想提取链接。我知道 API 已经存在，但我想创建自己的脚本。目前，我可以提取链接，但我的正则表达式不是很好。

```
#  /url?q=http://wikipedia.org/wiki/World_Wide_Web&sa=U&ei=naEHUbDoLITQ0QXWwIGoCw&ved=0CB8QFjAA&usg=AFQjCNEn84GVN2VHpfEVjnMm5FG_p8YjgQ 
```

我不知道我们如何才能只保留真实的网址。所以，如果你有一个想法。谢谢

```
$key = "test"; 
if ($kw = $key){
    $pagenum = 0;               
    $googlefrurl = "http://www.google.com/search?q=" . urlencode($kw) . "&start=$pagenum";

    while($pagenum <= 0){
        $result= file_get_contents($googlefrurl); 
        preg_match_all('<a href="(.*?)">si', $result, $matches);
        $i = 0;         
        $n = count($matches[1]);        
        $pagenum++;         
        $pagenum2 = $pagenum.'0'; 
        $googlefrurl = "http://www.google.com/search?q=" . urlencode($kw) .
            "&start=$pagenum2&safe=off&pwst=1&filter=0";

        while($i <= $n){
            $u++;
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:25:44.050

您需要 Google API 密钥进行搜索，然后使用自定义搜索 REST API [https://developers.google.com/custom-search/v1/using_rest](https://developers.google.com/custom-search/v1/using_rest)

它返回带有结果和您需要的一切的 JSON 例如，请求（从文档中快速复制）：

```
GET https://www.googleapis.com/customsearch/v1?
key=INSERT-YOUR-KEY&cx=013036536707430787589:_pqjad5hr1a&q=flowers&alt=json 
```

退货

```
200 OK

{
 "kind": "customsearch#search",
 "url": {
  "type": "application/json",
  "template": "https://www.googleapis.com/customsearch/v1?q={searchTerms}&num={count?}&start={startIndex?}&lr={language?}&safe={safe?}&cx={cx?}&cref={cref?}&sort={sort?}&filter={filter?}&gl={gl?}&cr={cr?}&googlehost={googleHost?}&c2coff={disableCnTwTranslation?}&hq={hq?}&hl={hl?}&nsc={nsc?}&siteSearch={siteSearch?}&siteSearchFilter={siteSearchFilter?}&exactTerms={exactTerms?}&excludeTerms={excludeTerms?}&linkSite={linkSite?}&orTerms={orTerms?}&relatedSite={relatedSite?}&dateRestrict={dateRestrict?}&lowRange={lowRange?}&highRange={highRange?}&searchType={searchType}&fileType={fileType?}&rights={rights?}&imgSize={imgSize?}&imgType={imgType?}&imgColorType={imgColorType?}&imgDominantColor={imgDominantColor?}&alt=json"
 },
 "queries": {
  "nextPage": [
   {
    "title": "Google Custom Search - flowers",
    "totalResults": 10300000,
    "searchTerms": "flowers",
    "count": 10,
    "startIndex": 11,
    "inputEncoding": "utf8",
    "outputEncoding": "utf8",
    "cx": "013036536707430787589:_pqjad5hr1a"
   }
  ],
  "request": [
   {
    "title": "Google Custom Search - flowers",
    "totalResults": 10300000,
    "searchTerms": "flowers",
    "count": 10,
    "startIndex": 1,
    "inputEncoding": "utf8",
    "outputEncoding": "utf8",
    "cx": "013036536707430787589:_pqjad5hr1a"
   }
  ]
 },
 "context": {
  "title": "Custom Search"
 },
 "items": [
 {
   "kind": "customsearch#result",
   "title": "Flower - Wikipedia, the free encyclopedia",
   "htmlTitle": "\u003cb\u003eFlower\u003c/b\u003e - Wikipedia, the free
   encyclopedia",
   "link": "http://en.wikipedia.org/wiki/Flower",
   "displayLink": "en.wikipedia.org",
   "snippet": "A flower, sometimes known as a bloom or blossom, is the reproductive structure found in flowering plants (plants of the division Magnoliophyta, ...",
   "htmlSnippet": "A \u003cb\u003eflower\u003c/b\u003e, sometimes known as a bloom or blossom, is the reproductive structure \u003cbr\u003e  found in flowering plants (plants of the division Magnoliophyta, \u003cb\u003e... \u003c/b\u003e",
   "pagemap": {
    "RTO": [
     {
      "format": "image",
      "group_impression_tag": "prbx_kr_rto_term_enc",
      "Opt::max_rank_top": "0",
      "Opt::threshold_override": "3",
      "Opt::disallow_same_domain": "1",
      "Output::title": "\u003cb\u003eFlower\u003c/b\u003e",
      "Output::want_title_on_right": "true",
      "Output::num_lines1": "3",
      "Output::text1": "꽃은 식물 에서 씨 를 만들어 번식 기능을 수행하는 생식 기관 을 말한다. 꽃을 형태학적으로 관찰하여 최초로 총괄한 사람은 식물계를 24강으로 분류한 린네 였다. 그 후 꽃은 식물분류학상중요한 기준이 되었다.",
      "Output::gray1b": "- 위키백과",
      "Output::no_clip1b": "true",
      "UrlOutput::url2": "http://en.wikipedia.org/wiki/Flower",
      "Output::link2": "위키백과 (영문)",
      "Output::text2b": "   ",
      "UrlOutput::url2c": "http://ko.wikipedia.org/wiki/꽃",
      "Output::link2c": "위키백과",
      "result_group_header": "백과사전",
      "Output::image_url": "http://www.gstatic.com/richsnippets/b/fcb6ee50e488743f.jpg",
      "image_size": "80x80",
      "Output::inline_image_width": "80",
      "Output::inline_image_height": "80",
      "Output::image_border": "1"
     }
    ]
   }
  },
  ...
 ]
} 
```

# tsql - T-SQL 删除电子邮件地址末尾的数字

> ID：14581491
> 
> 赞同：0
> 
> 时间：2013-01-29T11:08:04.240
> 
> 标签：tsql, email, trim

对，我有一些 21000 条记录，其中电子邮件地址末尾有数字（. + 15 位长数字，例如：xyz@gmail.com.201211200200027）

现在，我能想到的最佳解决方案是：

```
Update TABLE
set EmailAddress = (
select substring (EmailAddress, 1, (len(EmailAddress) - 16))
from TABLE)
Where ISNUMERIC(RIGHT(Emailaddress, 15)) = 1 
```

上面的代码不起作用（*我不是 T-SQL 专家，如果这段代码看起来很愚蠢，请原谅我*）

如果我告诉该代码一个特定的电子邮件地址，那么它就可以工作。像这样的东西：

```
Update TABLE
set EmailAddress = (
select substring (EmailAddress, 1, (len(EmailAddress) - 16))
from TABLE)
Where ISNUMERIC(RIGHT(Emailaddress, 15)) = 1
and Emailaddress is 'xyz@gmail.com.201211200200027' 
```

那么，如何更新这些电子邮件地址并删除最后 16 个字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:11:29.310

尝试这个;

```
UPDATE yourTable
SET EmailAddress = LEFT(EmailAddress, LEN(EmailAddress) - 16 )
WHERE PATINDEX('%[^0-9]%', RIGHT(EmailAddress, 15)) = 0 AND LEN(EmailAddress) > 16 
```

# android - 获取调用目标异常

> ID：14581495
> 
> 赞同：0
> 
> 时间：2013-01-29T11:08:13.700
> 
> 标签：android

```
import android.os.Bundle;

import android.app.Activity;

import android.view.Menu;

import android.widget.TextView;

public class MainActivity   extends   Activity {
    public native String     stringJNI();

    static {
        System  .  loadLibrary  ("Androidqw");
    }    
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         TextView myTextField = (TextView)findViewById(R.id.myTextField);
            myTextField.setText(stringJNI()); //get exception
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

我在`myTextField.setText(stringJNI())`. 我不明白为什么我会得到这个。我的最低 SDK 版本是 10，我的目标是 11。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:39:32.107

以上是因为函数 StringJNI() 的声明中的一些错误

```
extern "C"
{
JNIEXPORT jstring JNICALL Java_com_example_andest1_MainActivity_stringJNI(JNIEnv* ssenv,jobject clazz);
}
JNIEXPORT jstring JNICALL Java_com_example_andest1_MainActivity_stringJNI(JNIEnv* env,jobject clazz)
{
} 
```

ssenv 错误的指针变量

# iphone - 如何在没有键的情况下设置 NSDictionary

> ID：14581497
> 
> 赞同：0
> 
> 时间：2013-01-29T11:08:15.407
> 
> 标签：iphone, ios, ipad

我有两个数组存储在字典中：

```
array1=[[NSArray alloc]initWithObjects:a,b,c,d,e, nil];
array2=[[NSArray alloc]initWithObjects:1,2,3, nil];
 NSDictionary * dic=[[NSDictionary alloc]initWithObjects:array1 forKeys:array2]; 
```

如果我运行我会收到错误消息：

```
-[NSDictionary initWithObjects:forKeys:]: count of objects (0) differs from count of keys (1)' 
```

现在我只想为 a,b,c 设置字典，键为：1,2,3。

因为数组无法编辑

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:16:52.743

为 nil 值添加键是没有意义的。

```
NSRange range = NSMakeRange(0, MIN(array1.count, array2.count));
NSDictionary * dic=[[NSDictionary alloc]initWithObjects:[array1 subarrayWithRange:range]
                                                forKeys:[array2 subarrayWithRange:range]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:17:02.273

用于 ：

```
array1=[[NSArray alloc]initWithObjects:a,b,c,d,e, nil];
array2=[[NSArray alloc]initWithObjects:1,2,3, nil];
// NSDictionary * dic=[[NSDictionary alloc]initWithObjects:array1 forKeys:array2];

NSMutableDictionary * dic=[NSMutableDictionary new];
for(int i=0 ; i< array2.count ; i++ ){
   [dic setObject:array1[i] forKey:array2[i]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:18:46.350

从文档：

键和值都不能为 nil；如果你需要在字典中表示一个空值，你应该使用 NSNull。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:10:53.233

使用 NSMutableArray 处理第一个数组，从中删除 d & e

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T11:11:53.830

整个数组的单个键很容易设置：

```
NSDictionary * dic=[[NSDictionary alloc]initWithObjects:array1 forKeys:@"Array"]; 
```

如果你想为数组中的每个对象添加一个键，它是这样的：

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
int key = 1;
for (NSString *str in array1) {
    [dict setObject:str forKey:[NSString stringWithFormat:@"%d",key]];
    key++;
} 
```

希望这可以帮助！！！

# css - HLine/VLine 颜色的 QT 样式表

> ID：14581498
> 
> 赞同：8
> 
> 时间：2013-01-29T11:08:23.840
> 
> 标签：css, qt, stylesheet

我对这个 Qt 事物及其整个样式表系统很陌生。我的 HTML/CSS 背景对理解系统有一点帮助，但是很多事情只是无缘无故地发生……或者根本就没有发生。

无论如何，HLINE 和 VLINE 的奥秘以及如何改变线条的颜色对我来说只是一个谜。我从其他问题和各种论坛中了解到它与 QFrame 元素相关联。如果我只使用类似的东西，我可以改变线条的颜色

```
QFrame
{
color: red;
} 
```

但这当然也会改变大量使用 QFrame 的其他事物的颜色。我当然可以进入 HLINE 元素并将其放入`color: red;`其中并且效果很好，但是我的应用程序要求我将所有内容放在一个加载到应用程序中的样式表中。因此，样式化单个元素不是一种选择。

一个解决方案看起来像

```
QFrame HLine, QFrame VLine
{
color: red;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-29T12:46:19.957

```
QFrame[frameShape="4"] /* QFrame::HLine == 0x0004 */
{
    color: red;
}

QFrame[frameShape="5"] /* QFrame::VLine == 0x0005 */
{
    color: green;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-01-05T22:30:02.597

`HLine`而且`VLine`风格很棘手。值得看一下文档的“[详细说明](http://doc.qt.io/qt-5/qframe.html#details)”部分。为了快速修复，我发现这组规则允许通过样式表以可靠且相对干净的方式自定义此类行的外观：

```
QFrame[frameShape="4"],
QFrame[frameShape="5"]
{
    border: none;
    background: red;
} 
```

这与`frameShadow`属性无关，否则会影响它们的外观和样式规则的效果。请记住，默认情况下线条的宽度**不是**1px —— 这可以使用 、 或 属性进行更改`min-width`，视情况而定`max-width`。`min-height``max-height`

有关我的发现的更详细概述，请继续阅读。

* * *

大多数`QFrame`s 默认具有[QFrame::Plain](http://doc.qt.io/qt-5/qframe.html#Shape-enum) frameShape，但`HLine`and`VLine`的默认 frameShape 是`QFrame::Sunken`. 这意味着它们不是真正的线条，而是包含用于提供 3D 效果的中线的细框。从[文档](http://doc.qt.io/qt-5/qframe.html#details)中：

> 中线宽度指定帧中间多出一条线的宽度，它使用第三种颜色来获得特殊的 3D 效果。请注意，仅针对凸起或凹陷的 Box、HLine 和 VLine 框架绘制中线。

如果将 frameShape 设置为 Plain，此中线仍然可见，并且可以使用该`color`属性设置样式（注意：这*不是*a`background-color`或`border-color`！）

但这不适用于保留默认 Sunken 外观的 HLine/VLine。解决此问题的一种方法是使用属性选择器和属性枚举的十进制值（在 hehadecimal 文档中描述）为普通和沉没 QFrames 设置单独的样式，如下所示：

```
/* Reference (from doc.qt.io/qt-5/qframe.html#types):
 * - frameShape[4] --> QFrame::HLine = 0x0004
 * - frameShape[5] --> QFrame::VLine = 0x0005
 * - frameShadow[16] --> QFrame::Plain = 0x0010 (default for most widgets)
 * - frameShadow[48] --> QFrame::Sunken = 0x0030 (default for HLine/VLine)
 */
QFrame[frameShape="4"][frameShadow="16"],
QFrame[frameShape="5"][frameShadow="16"]
{
    ...
}

QFrame[frameShape="4"][frameShadow="48"],
QFrame[frameShape="5"][frameShadow="48"]
{
    ...
} 
```

但由于使用 QFrame::Sunken 的 HLine/VLine 的样式也适用于带有 的样式，`QFrame::Plain`因此这样做通常是一种浪费。我在上面向他们展示了关于如何使用属性选择器的教育价值。

最好的方法是把 QFrame 当作盒子来对待，并且（1）设置`border-top`或`border-right`与一个`max-height: 0px`（或`max-width`对于一个 VLine）耦合，以确保盒子的内部不会占用布局中的空间；或者 (2) 使用背景颜色加上`border: none`（在这种情况下，max-height/width 应该是 1 或更大，否则 QFrame 是不可见的）。后者是我推荐的解决方案，如上面的第一个代码块所示。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-21T14:44:38.403

根据[QDarkStyleSheet 问题](https://github.com/ColinDuquesnoy/QDarkStyleSheet/issues/17)，您可以使用：

```
QFrame[width="3"], QFrame[height="3] 
```

这些选择器，它们似乎可以跨平台工作，而且它们不太可能改变。可能比使用`enum`值 as更好`ints`，因为它们可能会随着 Qt 版本而改变，而线条样式则不会，因为它们满足某些要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T11:56:53.693

> 但是我的应用程序要求我将所有内容放在一个加载到应用程序中的样式表中。

您可以使用**冲突解决**。假设您有一个**QMainWindow**对象，上面有很多小部件。**为maindionw**样式表设置这些样式表：

```
QLabel#label{
    background-color: rgb(255, 170, 255);
}
QPushButton#pushButton{

    color: rgb(0, 0, 255);
}
QFrame#line{
    background-color: rgb(0, 170, 255);
} 
```

第一个 css 只是更改主窗口上的`QLabel`名称*标签*并将其*背景颜色*设置为**rgb(255, 170, 255)**。接下来会将`QPushButton`命名按钮的文本颜色更改为 ( *0,0,255* );。行的第三个更改属性。行只是一个 QFrame。
因此，我可以提供的解决方案是将您的 css 放在一个文件中，然后使用加载该文件`QFile`，然后使用函数`QTextStream`为您的主 winodw 或主小部件的 css 设置文件的内容。`setStyleSheet ( const QString & styleSheet )`或者如果您使用的是创建者，只需右键单击主窗口并选择**更改样式表**，然后粘贴您的 CSS。**但请记住，您应该使用冲突解决方案**.

# c# - 如何删除c#中标签之间的文本？

> ID：14581499
> 
> 赞同：3
> 
> 时间：2013-01-29T11:08:25.367
> 
> 标签：c#

以下 HTML 语句存储在字符串中。我需要删除写在 HTML 标签之间的文本 `<style>`和 `</style>`

```
<html> <head><style type="text/css">
        @font-face { 
            font-family: "tunga";
            src: url(tunga.TTF); 
        }

        body {              
            font-family:"tunga";
            padding:0;
            margin: 0;
        }

        table {
            font-family:"tunga";
            padding:0;
        }

        a {
            text-decoration:none
        }

    </style></head>  <body marginwidth="0" marginheight="0" leftmargin="10" topmargin="0" >
    </body>
    </html> 
```

如何使用 c# 代码解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T11:10:30.540

使用 HtmlAgilityPack 加载 Html 文件。

打开文件：

```
HtmlDocument htmlDocument = new HtmlDocument();
htmlDocument.LoadHtml(myHtmlString); 
```

然后删除节点：

```
foreach(var descendant in htmlDocument.DocumentNode.Descendants("style").ToList())
    descendant.Remove() 
```

然后获取代表 HTML 文件的字符串：

```
string htmlWithoutStyle = htmlDocument.DocumentNode.OuterHtml; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T11:17:12.663

```
string str = "<html> <head><style type='text/css'> jhiun  </style></head> </html>";
            Console.WriteLine(str);
            string strToRemove = str.Substring(str.IndexOf("<style"), str.IndexOf("</style>") - str.IndexOf("<style") + 8); 
            Console.WriteLine(str.Replace(strToRemove,""));
            Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:11:44.673

[您可以使用htmlagilitypack](http://htmlagilitypack.codeplex.com/)解决此问题。该工具专为 html 解析等而设计。编写正则表达式或自行解析只会给您带来麻烦，并可能导致程序中的安全风险。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T11:15:46.413

使用 HtmlAgilityPack。不要试图滚动你自己的解析器。

```
var doc=new HtmlDocument();
doc.LoadHtml(html);
doc.DocumentNode.SelectSingleNode("//style").RemoveAllChildren();
using(var sw=new StringWriter())
{
    doc.Save(sw);
    var moddedHtml=sw.ToString();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T11:16:23.633

这里不需要使用额外的库。尝试这样的事情。

```
// Find the start tag
var start = html.IndexOf("<style");

// Find the end tag
var end = html.IndexOf("</style>") + 8;

// Remove the tag using Substring
var newHtml = html.Substring(0, start - 1) + html.Substring(end); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-03T11:45:44.430

```
_htmlContent = Regex.Replace(_htmlContent, "< style.*?< /style>", "", RegexOptions.Singleline | RegexOptions.IgnoreCase); 
```

试试这个。`<`如果您感到懒惰并想复制粘贴代码，请删除小于号后的多余空格。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T11:19:34.050

您可以使用额外的库或只是一个简单的字符串删除...

```
RemoveHTMLTagsText("your html statement", "<style>");

public static string RemoveHTMLTagsText(string html, string tag)
{
      int startIndex = html.IndexOf(tag.Remove(tag.Length - 1));
      startIndex = html.IndexOf(">", startIndex) + 1;
      int endIndex = html.IndexOf(tag.Insert(1, "/"), startIndex) - startIndex;
      html = html.Remove(startIndex, endIndex);
      return html;
} 
```

# sql-server-2008 - 如果没有源代码和程序供应商的支持，我该怎么做才能跟踪程序的功能

> ID：14581504
> 
> 赞同：0
> 
> 时间：2013-01-29T11:08:39.100
> 
> 标签：sql-server-2008, profiler, trace

我现在必须处理一个名为[FDT](http://fdt.se/)的程序，该程序不再由我工作的公司提供支持，但仍在使用相同的程序。`xml`现在我需要从我可以进入的站点`csv`或其他站点将新订单插入到程序中`magento`。我正在尝试自动化这个过程。办公室的所有工作都是在这个软件FDT的基础上完成的，比如检查缺货、票据打印等。

我现在正在考虑使用`profiler`来跟踪事件。我想知道当我们在其中下订单时程序会做什么处理。我不是 Profiler 的好用户，如果可能知道它影响哪些表、它更新或写入哪些列，我想要一些建议。

上面是一个新的订单号。程序生成。这是一个唯一的 id 并且是整数。我无法知道模式。我确实有一个测试服务器，我可以在其中进行更改，反复试验是没有问题的。

一些关于我应该如何进行或至少开始进行的建议将不胜感激。

我认为最重要的是`T-sql`再次追踪哪些事件和使用什么过滤器？如果这是一个愚蠢的问题，我很抱歉，我正在努力学习..源代码和支持不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:00:31.940

这个问题有太多的部分 - 如何进行跟踪，如何处理应用程序后支持合同，如何对应用程序进行逆向工程，即使这是一个好主意（有时它是唯一可用的主意）我会将此作为一系列狭窄的技术问题重新提出或向程序员提出（在阅读他们的常见问题解答后，他们只喜欢某些问题）

是的，去过那里。在大型组织中，这些任务通常由技术人员负责，他们没有利用预算的强大力量，也无法亲自与原始供应商谈判新合同。我假设你有食物账单要支付，并且不能告诉你的主管，“好吧，在我们获得支持合同之前，我什么都不做”

步骤 0 绘制表格 - 计算实体关系并组装数据字典（解释每个表格和列的动机，而不仅仅是名称和数据类型）

步骤 1 将探查器附加到 SQL 2008 的活动实例。如果您有关于 SQL 探查器的特定问题，请打开一个新问题。一个提示-如果您附加到多用户实例，请过滤到您自己的用户（连接字符串中的那个） [http://blog.sqlauthority.com/2009/08/03/sql-server- sql-server-2008-profiler-2 简介/](http://blog.sqlauthority.com/2009/08/03/sql-server-introduction-to-sql-server-2008-profiler-2/)

步骤 2 在应用程序中执行一个操作并观察发出了什么 SQL。如果是 SQL，您可以将其复制并粘贴到 Management Studio，以便绘制查询图表并运行您自己的测试执行。如果是存储过程，你去阅读存储过程的源代码。如果存储过程是加密的，它可能会或可能不会解密它。解密代码的情况是相当合理的，即您没有重新分发它并且支持公司不在那里。

第 3 步一旦您了解了该应用程序，您就可以编写报告，或者您想以不同的方式记录新交易或旧交易。

如果应用程序是用 .net 或 java 编写的，您可以对其进行反编译并阅读代码。从该源创建自定义构建不会很有趣。更有可能发生的事情是，您将创建一个以相同表为目标的应用程序，或者可能将所有数据从原始应用程序导出到新的定制应用程序中。

# search-engine - 如果查询多个索引，SphinxSe 不返回多值

> ID：14581510
> 
> 赞同：0
> 
> 时间：2013-01-29T11:09:21.500
> 
> 标签：search-engine, sphinx

我使用 SPHINXSE 并且我查询了许多索引（就像 Barryhunter 在此处 [Joining on Multiple SphinxSE Tables In Single Query](https://stackoverflow.com/questions/8317460/joining-on-multiple-sphinxse-tables-in-single-query)解释的那样）

**我的问题是**

在每个索引中，我都有同名的列。

在我的 sphinxSe 表中，我有像这些属性一样命名的字段。

当我只对一个索引运行查询时，这些字段会被填充，但当我使用多个索引时不会。

我是个问题，因为我会使用 id 来简单地从找到该行的索引中识别。

由于源代码可能更好，请在我的 conf 和查询下方找到

**在我的 sphinx.conf 中**

```
 source src_article_tv : article_base {
          sql_query_pre = SET NAMES utf8
          sql_query = \
                 SELECT /* sphinx index search article_tv_base */ \
                         concat (id,'40'), \
                         id AS ressource_id, \
                         'article' AS ressource_type, \ (...)
         sql_attr_uint = ressource_id
         sql_attr_string = ressource_type

 (...)

source src_media_tv : media_base
{
        sql_query_pre = SET NAMES utf8
        sql_query = \
                SELECT /* sphinx index search full media */ \
                        concat (o.id,'20'), \
                        o.id AS ressource_id, \
                        'media_tv' AS ressource_type, \
(...)

        sql_attr_uint = ressource_id
        sql_attr_string = ressource_type

delimiter $$
CREATE TABLE `tv_generic` (
    `id` bigint(20) unsigned NOT NULL,
    `weight` int(11) NOT NULL,
    `query` varchar(3072) COLLATE utf8_unicode_ci NOT NULL,
    `ressource_id` bigint(20) unsigned NOT NULL,
    `ressource_type` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
    KEY `query` (`query`(1024))
) ENGINE=SPHINX DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci
CONNECTION='sphinx://127.0.0.1:9312/idx_tv'$$ 
```

所以随着

```
SELECT * FROM search.tv_generic where query = 'mons;index=idx_article_tv'; 
```

或者

```
SELECT * FROM search.tv_generic where query = 'mons;index=idx_media_tv'; 
```

字段 ressource_id 和 ressource_type 已填充（具有良好的值）

但与

```
SELECT * FROM search.tv_generic where query = 'mons;index=idx_article_tv,idx_media_tv'; 
```

字段 ressource_id 和 ressource_type 为“0”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T07:05:24.003

我找到了一个“肮脏”的解决方案。

```
compat_sphinxql_magics = 1 
```

这是工作。

它仍然很脏，因为

1.  compat_sphinxql_magics = 1 已弃用[http://sphinxsearch.com/forum/view.html?id=9239](http://sphinxsearch.com/forum/view.html?id=9239)
2.  我不明白为什么它与 compat_sphinxql_magics = 1 一起使用

# gwt - GXT 窗口隐藏在 IE 中的 iFrame 后面

> ID：14581517
> 
> 赞同：1
> 
> 时间：2013-01-29T11:09:42.187
> 
> 标签：gwt, pdf, embedded-resource, gxt

在我的 GWT 应用程序中，我有一个嵌入 PDF 对象的 iFrame。PDF 本身是从将其`application/pdf`作为内容类型返回的 servlet 中检索的。在 Chrome 中，我的弹出窗口是一个 GXT 窗口，可以很好地显示在嵌入的 pdf 前面。

然而，在 IE 中，弹出窗口隐藏在嵌入的 PDF 后面，即使我将其 z-index 设置为 IE 的最大值。

我还尝试在加载 Window 后调用它的 focus 方法，并研究了 iFrame 的替代方案，但没有任何结果。

如何确保弹出窗口显示在 PDF 前面？是什么导致了PDF在当前形势下残酷地逼迫自己走上前线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T11:09:59.617

Internet Explorer 具有 Windowed 和 Windowless 元素 - [Z-index 属性如何用于 HTML 元素](http://support.microsoft.com/default.aspx?scid=http://support.microsoft.com:80/support/kb/articles/q177/3/78.asp&NoWebContent=1)。嵌入的PDF是使用插件显示的，所以不能放在普通的DIV后面。

当额外的 IFRAME 放在 PDF 插件前面，但在弹出窗口后面时，您应该使用该技术。这将有效地使弹出封面显示为 PDF。似乎 GXT 本身并没有提供这样的设施（或者它不能正常工作）。您可能应该通过扩展正在使用的弹出窗口来实现自己的弹出窗口。在那里，您将覆盖`show()`创建和调整附加 IFRAME 的方法。

一个很好的开始示例是在 GWT 中实现[PopupImplIE6](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/client/ui/impl/PopupImplIE6.java)。

# twitter-bootstrap - bootstrap twitter typeahead 在导航栏中工作吗？

> ID：14581522
> 
> 赞同：2
> 
> 时间：2013-01-29T11:10:13.070
> 
> 标签：twitter-bootstrap, bootstrap-typeahead

我尝试了很多方法来在导航栏中集成预输入，但布局在响应式中始终无法正常工作。

是否有人在响应模式下工作的导航栏中有一个引导 twitter typeahead 的工作示例？

# android - 在 ActionBar android 上获取 ActionItem 的句柄

> ID：14581524
> 
> 赞同：0
> 
> 时间：2013-01-29T11:10:24.227
> 
> 标签：android, android-actionbar, menuitem, handle, classcastexception

我想处理其中一个菜单项（我在 XML 中声明）。

```
 <item android:id="@+id/menu_shape_shifter"
    android:title="@string/menu_search"
    android:icon="@drawable/ic_action_refresh"
    android:orderInCategory="0"
    android:visible="true"
    android:showAsAction="always" /> 
```

所以我这样做了， `MenuItem item_shape_shifter = (MenuItem)findViewById(R.id.menu_shape_shifter);` 但它失败并出现异常：ClassCastException：com.android.internal.view.menu.ActionMenuItemView 无法转换为 android.view.MenuItem。

如果不掌握此菜单项，我将无法继续。但是，找不到任何线索。

注意：我使用的是 Action Bar Compatibility 包，因为我支持 < 3.0 的版本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:29:50.080

您无需调用`findViewById()`a`View`来查找操作栏项目。您调用`findItem()`a`Menu`来查找操作栏项目。

# ruby-on-rails - 我想在视图中输入并将其传递给控制器

> ID：14581525
> 
> 赞同：-2
> 
> 时间：2013-01-29T11:10:24.787
> 
> 标签：ruby-on-rails

以下代码甚至不呈现按钮：

```
<% form_tag :controller=> :create_new, :action=>:input do %>
  <%=text_field_tag :my_input%> 
  <%=submit_tag "Send input"%>
<%end%> 
```

控制器 create_new 具有以下方法

```
def input 
  @my_input=params[:my_input] 
end 
```

routes.rb 有：

```
resources :create_new do post :input, :on=>:collection 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:13:09.710

`=`失踪了。

```
<%= form_tag :controller=> :create_new, :action=>:input do %>
  <%= text_field_tag :my_input%>
  <%=submit_tag "Send input"%>
<%end%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:13:19.783

```
<% form_tag :controller=> :create_new, :action=>:input do %> 
```

它有一个缺失 = ，检查这个

```
<%= form_tag :controller=> :create_new, :action=>:input do %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:14:54.713

由于表单标签是一个助手，它实际上需要显示在视图中。<% 只允许代码运行，并不实际显示代码的结果。

尝试使用

```
<%= form_tag :controller=> :create_new, :action=>:input do %> 
```

这包括 = ，它将实际显示代码运行的结果。

希望有帮助。

# linux - QT版本没有正确安装，请运行make install

> ID：14581528
> 
> 赞同：9
> 
> 时间：2013-01-29T11:10:35.660
> 
> 标签：linux, qt

`qt-creator-linux-x86-opensource-2.6.1.bin`我从使用的下载副本安装了 QT-creator

```
sudo ./qt-creator-linux-x86-opensource-2.6.1.bin 
```

在 Ubuntu 11.04 中

我尝试在 QT-Creator/Build/QT-versions 配置中添加 QT 版本，它要求提供 qmake 可执行文件。

我安装它使用：

```
sudo apt-get install qt4-devel 
```

其中部署了 qmake`/usr/bin/qmake`

我在 QT-Creator/Build/QT-versions 配置中手动选择了它，`Qt-4.7.2 (System) /usr/bin/qmake-qt4`但`QT version is not properly installed, please run make install`出现消息，我无法在 QT-Creator/Build/Kits 配置中使用它。

如何解决问题并配置 qmake 以在项目创建中使用 Qt-creator？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-02-04T09:56:26.603

这解决了我在最近的 Ubuntu 版本上的问题：

```
sudo apt-get install qt5-default 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-28T12:41:45.543

就这样，这不再显示为未回答：

要安装所有 qt-devel 库，请使用

```
sudo apt-get install qt4-dev-tools libqt4-dev libqt4-core libqt4-gui 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-29T00:04:49.420

在 Linux Mint 18.3（32 位）中，它也解决了这个问题：

```
sudo apt-get install qt5-default 
```

这样 Qt5 (5.5.1) 就可以作为套件安装在 QtCreator 中了。

虽然要安装 Qt 5.9.0 版本，但我必须从 [https://download.qt.io/official_releases/qt/5.9/5.9.0/single/](https://download.qt.io/official_releases/qt/5.9/5.9.0/single/) (2 Gb unpacked) 显式下载包。

然后我不得不在终端中运行这个命令：

```
cd /home/username/Downloads/qt-everywhere-opensource-src-5.9.0 
```

然后这个命令：

```
./configure 
```

那么这个

```
make 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-11T10:00:54.227

即使在`sudo apt-get install qt5-default`（它已经安装）之后我也遇到了这个问题。

但是我指出的 QMake 版本在[Linux Processor SDK (02.00.02.11)中](https://software-dl.ti.com/processor-sw/esd/PROCESSOR-SDK-LINUX-AM335X/02_00_02_11/index_FDS.html)

我在运行 qtcreator 之前通过采购环境设置来修复它。以下 shell 脚本为我完成了它：

```
source /opt/ti/processor-sdk-linux-am335x-evm-02.00.02.11/linux-devkit/environment-setup
# substitute the location where the SDK is installed.

~/Qt5.9.0/Tools/QtCreator/bin/qtcreator -block
# substitute the location where QTCreator is installed 
```

# html - 在 html 编辑器中格式化粘贴的内容

> ID：14581530
> 
> 赞同：1
> 
> 时间：2013-01-29T11:10:36.763
> 
> 标签：html, tinymce

我正在设计一个 HTML 页面，我有一个编辑器，用户可以在其中编写一些文本，或者他们可以粘贴一些信息。但我需要的是，无论何时粘贴数据，都应根据我的要求对其进行格式化并粘贴。

例如：- 我们应该能够知道用户已粘贴此内容，而不是自己输入。（格式如左右缩进，或在引号中粘贴内容等。）

我正在使用 tinyMCE，但不知道如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:15:41.470

您可能想查看[粘贴插件](http://tinymce.moxiecode.com/wiki.php/Plugin%3apaste)。此插件需要正确配置。在[这里查看文档。](http://tinymce.moxiecode.com/wiki.php/Plugin%3apaste)

**编辑：**记录粘贴内容并修改粘贴结果的示例：

```
 paste_preprocess : function(pl, o) {
        console.log('Object', o);
        console.log('Content:', o.content);
        o.content = '<span>' + o.content + ' TEST</span>';

   } 
```

# jsf - 从 bean 超时

> ID：14581536
> 
> 赞同：1
> 
> 时间：2013-01-29T11:11:02.640
> 
> 标签：jsf, session-timeout

我希望我的会话在给定的时间间隔后超时。在 web.xml 中，我一直在使用如下代码：

```
<session-config>   
  <session-timeout>20</session-timeout>   
</session-config> 
```

其中 20 是以分钟为单位的超时时间，它可以正常工作。

我想做的是在我的一个bean中使用这样的代码以编程方式执行它，如下所示：

```
@ManagedBean(name="login")   
@SessionScoped  
public class MyLoginBean implements HttpSessionListener, Serializable {   

    // private variables etc.   

    HttpServletRequest request;   
    HttpSession session  = request.getSession();   

    // Constructor
    public MyLoginBean() {   
        session.setMaxInactiveInterval(1200);   
    }   

// The rest of the code   

} 
```

这里的超时时间是 1200 秒，即 20 分钟。不幸的是，在打开浏览器查看应用程序时，它失败并显示以下消息：

```
com.sun.faces.mgbean.ManagedBeanCreationException: Cant instantiate class: com.csharp.MyLoginBean. 
```

其次是：

```
java.lang.NullPointerException 
```

我在这里做错了什么？我知道这`setMaxInactiveInterval()`指的是特定的会话，在这种情况下是登录 bean，而不是`web.xml`文件中的代码指定的所有内容。我有几个 bean，但是让登录 bean 超时是唯一重要的。

我将 JSF 2.0 与 Glassfish 3.1.1 和 Eclipse Indigo 一起使用，因此非常感谢一些建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:15:42.993

`NullPointerException`有一个非常简单的原因。这是最简单的例外之一。要了解任意异常的原因，只需查看其 javadoc。所有 Java 异常的原因在 javadoc 中都有解释。[这是javadoc`NullPointerException`](http://docs.oracle.com/javase/6/docs/api/java/lang/NullPointerException.html)的摘录：

> 当应用程序在需要对象的情况下尝试使用 null 时引发。这些包括：
> 
> *   调用`null`对象的实例方法。
> *   访问或修改`null`对象的字段。
> *   `null`就好像它是一个数组一样的长度。
> *   访问或修改 的插槽，`null`就好像它是一个数组一样。
> *   `null`像 Throwable 值一样进行投掷。
> 
> 应用程序应抛出此类的实例以指示空对象的其他非法使用。

您的问题是由第 1 点引起的。在这里，

```
HttpServletRequest request;   
HttpSession session  = request.getSession(); 
```

您正在尝试调用`getSession()`方法`null`而不是具体`HttpServletRequest`实例。实际上，您应该已经获得了`HttpServletRequest`via`ExternalContext#getRequest()`并将其分配给`request`.

但是，您有更大的问题：您绝对不应该将当前的 servlet 请求作为会话范围 bean 的属性（它的寿命比 HTTP 请求长！）。您应该在线程本地范围内获取它（即完全在构造函数或方法块内）。您也不应该让您的 JSF 托管 bean 实现`HttpSessionListener`. 这完全没有意义。您最终会得到 2 个实例，一个由容器创建为侦听器，另一个由 JSF 创建为托管 bean。

就这样应该这样做：

```
@ManagedBean(name="login")
@SessionScoped
public class MyLoginBean implements Serializable {

    public MyLoginBean() {
        HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession();
        session.setMaxInactiveInterval(1200);
    }

    // ...
} 
```

或者，如果您使用的是 JSF 2.1，请使用以下提供的版本[`ExternalContext`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#setSessionMaxInactiveInterval%28int%29)：

```
FacesContext.getCurrentInstance().getExternalContext().setSessionMaxInactiveInterval(1200); 
```

# ios - 如何呈现视图控制器并关闭所有其他控制器？

> ID：14581538
> 
> 赞同：0
> 
> 时间：2013-01-29T11:11:07.180
> 
> 标签：ios, memory-management, uiviewcontroller, storyboard, segue

我有大约 20 个视图控制器，与 Modal 和 Push segues 链接在一起。现在，在最后一个视图控制器上，我想再次切换回第一个视图控制器，就好像用户重新启动了应用程序一样。不幸的是，当我这样做时

```
[UIViewController *viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"InitViewController"]];
[self presentViewController:viewController animated:YES completion:nil]; 
```

所有以前的视图控制器都没有卸载。没有调用单个 viewDidUnload 方法。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:05:05.240

该`instantiateViewController`方法创建视图控制器的*新*副本。您现有的视图控制器不会被卸载，因为 iOS 不知道您想要“返回”，可以这么说。它无法卸载任何现有的视图控制器，因为它们仍在导航层次结构中。你真正想做的是以某种方式“倒带”你的故事板。

*幸运的是，从 iOS 6 开始，通过unwinding*有一种改进的方法可以做到这一点。这使您可以在故事板中“回溯”到开始，这听起来像是您想要做的。WWDC 视频有一些示例和演练，您可能还想查看这个现有的 SO 问题：

[Unwind segues 有什么用，你如何使用它们？](https://stackoverflow.com/questions/12561735/what-are-unwind-segues-for-and-how-to-use-them)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T10:57:47.070

我发现可以通过在层次结构中的第一个视图控制器上调用 dismissViewControllerAnimated:completion: 来轻松完成。幸运的是，这就是完成我想要的一切所需要的:-)

# java - 在objective-c中创建一个存储类

> ID：14581540
> 
> 赞同：0
> 
> 时间：2013-01-29T11:11:08.943
> 
> 标签：java, ios, objective-c

您好我正在尝试为我的 iphone 应用程序构建一个存储类。存储类用于存储食品订单列表，每个订单都有食品名称和价格。在应用程序中，当我按下食物菜单上的按钮时，我想将它按顺序存储到一个名为 orders 的数组中。我是 Objective-c 的新手，我是 Java 用户。我要构建的是一个类似于 java 的 ArrayList 类的存储类，myStorage 类保存食物名称和价格。

我已经构建了一些代码，但是在 @property (nonatomic) NSMutableArray *orders 的 Storages.h 上编译时出现错误“'order' 的本地声明隐藏了实例变量”；

存储.h

```
#import <Foundation/Foundation.h>

@interface Storage : NSObject{
    NSString *name;
    NSInteger *price;
}
@property (nonatomic)NSString *name;
@property (nonatomic)NSInteger *price;
-(void) setName: (NSString *) n;
-(void) setPrice: (NSInteger *) p;
-(NSString *)getName;
-(NSInteger *)getPrice;

@end 
```

存储.m

```
 #import "Storage.h"

 @implementation Storage

 @synthesize name;
 @synthesize price;

 - (void)setName:(NSString *)n {
     name = n;
}
 - (void)setPrice:(NSInteger *)n {
    price = n;
}
- (NSString *)getName{
return name;
}
- (NSInteger *)getPrice{
    return price;
}

@end 
```

存储.h

```
#import <Foundation/Foundation.h>
#import "Storage.h"
@interface Storages : NSObject{
    Storage *order;
    NSMutableArray *orders;

@property (nonatomic) NSMutableArray *orders; // error "Type of property 'orders' does not match type of accessor 'setOrder'"

-(void) setOrders:(Storage *)order;
-(NSMutableArray *) orders;
@end 
```

存储.m

```
#import "Storages.h"

@implementation Storages
@synthesize orders;

-(void) setOrders:(Storage *)oneOrder{  

    [orders addObject: oneOrder];
}
-(NSMutableArray *) orders;{
    return orders;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:16:28.627

作为一名 Java 程序员，我可以说最接近 ArrayList 的是 NSMutableArray。所以你在你的存储文件中做得很好。

您收到的警告是因为您实际上隐藏了 ivar（类变量）。

在这种情况下，可以这样声明：

```
@interface Storage : NSObject

@property(nonatomic,strong) name;
@property(nonatomic,strong) price;

@end 
```

然后在 .m 文件中合成这些属性。

另一个错误是一样的。当您创建并@synthesized 一个 @property 时，编译器将为该 props 编写访问器，除非您提供自己的，在这种情况下您提供自己的，但签名并没有太多。

它不完全相同，但就像您用 Java 编写的一样：

```
public void setOrders(List<Order> list) {
}

@Override
public void setOrders(Order order) {
} 
```

jdk 会阻止你这样做。

另外，非常重要的是，您已将您的问题标记为 iOS，那么您就没有 Java 中的垃圾收集器。

使用@property 的好处是编译器将为您编写所有必要的代码行来释放先前的变量并分配一个新值。

如果你用你的代码覆盖，你将失去所有这些好处并得到一些内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:15:50.933

就像您将 order 声明为 ivar 并且 functions 参数将其隐藏起来一样简单。我的建议是根本不要使用 ivars，只使用属性。在你的情况下，这个警告不会有太大的伤害，只要确保你知道你正在访问哪个变量。在这种情况下，您甚至无法访问 ivar，所以您很好。

我会删除所有 ivars 并将 order 声明为私有财产（在 .m 文件中）：

```
@interface Storages()

@property (nonatomic,strong,readwrite) Storage* order;

@end 
```

甚至不要合成它，它会自动合成到 _order 这样你就可以避免名称冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:15:31.297

您有一个已经调用的实例变量`order`。将您的参数重命名为其他名称，或使用下划线重命名您的实例变量`_order`。

# ios - 使用后台线程更新界面的哪种模式？

> ID：14581559
> 
> 赞同：2
> 
> 时间：2013-01-29T11:11:56.557
> 
> 标签：ios, objective-c, coding-style

我正在寻找一种通用且优雅的方式来管理界面更新。我知道用户界面代码必须在主线程中运行，所以当我需要一些计算或网络任务时，我使用 GDC 和这种模式：

```
dispatch_queue_t aQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

dispatch_async(aQueue, ^() {

//Backgroud code

    dispatch_sync(dispatch_get_main_queue(), ^{
    //Update the UI
    }
} 
```

这段代码的问题是我需要始终检查用户在我的计算过程中是否改变了视图，所以代码如下：

```
dispatch_sync(dispatch_get_main_queue(), ^{
    if (mylabel != nil)  && ([mylabel superview] != nil) {
        mylabel.text = _result_from_computation_;
    }
} 
```

有一些最好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:21:55.420

你很好。但是，如果您想阅读更多内容或想要更彻底地解释正在发生的事情......

您应该阅读 Apple Docs [Grand Central Dispatch (GCD) Reference](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)并观看 WWDC 2012 视频*Session 712 - Asynchronous Design Patterns with Blocks, GCD and XPC*。

如果您使用的是 iOS，则可以忽略 XPC（进程间通信），因为当前操作系统版本（撰写本文时为 6.1）不支持它。

**示例：**在背景中加载大图像并在完成时设置图像。

```
@interface MyClass ()
@property (strong) dispatch_block_t task;
@end

@implementation MyClass
- (void)viewDidLoad {
    self.task = ^{
        // Background Thread, i.e., your task
        NSImage *image = [[NSImage alloc] initWithData:data];
        dispatch_async(dispatch_get_main_queue(), ^{
            // Main Thread, setting the loaded image
            [view setImage:image];
        });
    });
}

- (IBAction)cancelTaskButtonClick:(id)sender {  // This can be -viewWillDisappear
    self.task = nil;  // Cancels this enqueued item in default global queue
}

- (IBAction)runTaskButtonClick:(id)sender {
    // Main Thread
    dispatch_queue_t queue;
    queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(queue, self.task);
} 
```

为了稍后取消并重新加载界面，您所要做的就是将 dispatch_block_t 变量设置为 nil。

也许更具体地解决您的问题，此示例代码处理[*从 Descriptor 读取数据*](https://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html#//apple_ref/doc/uid/TP40008091-CH103-SW6)，即磁盘或网络。

通常，您将使用 Call-Callback 模式，该模式本质上是获取后台线程，执行任务，完成后调用另一个块以获取主线程来更新 UI。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:55:25.230

您可以检查视图窗口属性：

```
if (myLabel.window) {
  // update label
} 
```

这是多余`if (label != nil)`的，因为如果 label 为 nil，那么所有 label 属性也将为 nil（或零）并且设置它们不会引发异常。

# c - 如何将字符串返回给另一个函数？

> ID：14581562
> 
> 赞同：0
> 
> 时间：2013-01-29T11:12:01.033
> 
> 标签：c

我正在编写一个函数，根据用户的选择在右侧或左侧填充几个字符。我使用 strcat 函数将字符连接到字符串，并且在右填充的情况下它工作得很好，但是在左填充时我得到了垃圾字符，所以我编写了自己的 concat 函数。还是一样的结果，请看下面的代码。

```
char *concat(char a[], char b[])
{
    int len1=0, len2=0, i, j;
    char tmp[100], *tmp2;
    trace("concat(): Begin");
    len1 = strlen(a);
    len2 = strlen(b);
    for(i=0, j=0; i<(len1+len2); i++)
    {
        if(i<len1)
            tmp[i]=a[i];
        else
            tmp[i]=b[j++];
    }
    tmp[i]='\0';
    tmp2 = tmp;
    sprintf(str, "Concatenated String: %s", tmp2);
    trace(str);
    trace("concat(): End");
    return tmp2;
}

char *pad(char *field_name, char *field_val)
{
    char *temp_var=field_val, *temp_var2;
    int i=0;
    char pad_var[100];

    trace("pad(): Begin");
    sprintf(str, "field name to search for: %s and field value to be formatted: %s", field_name, field_val);
    trace(str);
    get_format_vars(field_name);
    sprintf(str, "strlen(field_val) = %d and len = %d", strlen(field_val), len);
    trace(str);
    if(strlen(field_val)<len)
    {   
        trace("Data should be Padded"); 
        trace(field_val);
        for(i=0; i<len-strlen(field_val); i++)
        {   
            pad_var[i] = pc;
        }
        pad_var[i]='\0';
        sprintf(str, "pad_var = %s", pad_var);
        trace(str);

        switch(pd)
        {
            case 'l':
            case 'L':
            sprintf(str, "length of field: ", strlen(field_val));
            temp_var = concat(pad_var, field_val);
            sprintf(str, "Value after left padding: (%.*s)", len, temp_var);
            trace(str);
            break;
        case 'r':
        case 'R':
            strcat(field_val, pad_var);
            temp_var = field_val;
            sprintf(str, "Value after right padding: (%s)", temp_var);
            trace(str);
            break;
        case 'n':
        case 'N':
        trace("No formatting to be done for this field");
        break;
        default:
            trace("Wrong value for padding type.");
    }
    trace("Data Padded");

}
else
{   
    trace("Field length already equal to format length");
}
temp_var2 = temp_var;
sprintf(str, "Data after/without formatting: (%s)", temp_var2);
trace(str);
trace("pad(): End");
return temp_var;
} 
```

请注意，在正确填充的情况下，上述程序完全可以正常工作。

请让我知道我做错了什么，因为当我做左填充时，它会在最后显示垃圾字符。

**注意：程序中没有引用的函数和变量在我的程序中全局声明，如函数“trace”和变量“pd”。** trace() 函数接受一个字符串参数并将该字符串写入文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:15:56.040

您正在返回一个指向临时堆栈变量的指针，该变量在函数退出时超出范围。它的内存可能（将）被其他函数调用重用。最简单的解决方法是在调用者中`concat`动态分配内存。`free`

```
char* tmp = malloc(len1+len2+1); 
```

您还可以将`concat`功能简化为

```
char* tmp = malloc(len1+len2+1);
strcpy(tmp, a);
strcat(tmp, b);
return tmp; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T11:18:15.560

1.  您不应该编写自己的 strcat 版本。
2.  您不应该返回自动（本地）数组 - 在函数返回后它超出范围，使用它会调用未定义的行为。

要么吃掉一些内存并返回动态分配的块或内存，要么使用输入/输出参数调用函数，这是在**调用者**`malloc()`（与被调用者相反）中声明的数组。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:16:09.443

您在返回函数内的堆栈上分配返回的结果：

```
char tmp[100] 
```

这甚至可能确实*有效*（通常的“经典”堆栈的内容不会被返回破坏），但前提是您立即在其他地方使用或复制返回的字符串而不进行另一次调用。一旦你进行第二次调用（包括系统调用），堆栈就会被重用，你会得到垃圾。

在返回之前将引用分配给另一个变量没有效果。

使用[strdup](http://www.kernel.org/doc/man-pages/online/pages/man3/strdup.3.html)系列函数之一返回克隆副本（不要忘记在不再需要时释放）。**

# c++ - Finding the angle of a coordinate inside a circle

> ID：14581564
> 
> 赞同：0
> 
> 时间：2013-01-29T11:12:13.240
> 
> 标签：c++, math, directx, computational-geometry, trigonometry

Right down to business, basically I am making a small mini game which has characters running on top of a flat clock with the clock hand rotating around, the characters have to avoid it by jumping. the part im struggling with is coding the collision, the clock hand is just a set model that is rotated applying matrices and for whatever reason box collision will not work. So my theory is because i know the angle that the clock hand is currently being multiplied by, is there some mathematical way to calculate the angle of the player in relation to the centre point of the circle so that this can be checked against the clock hand angle?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:13:44.203

Sure.

```
float angle = atan2(y_handle - y_center, x_handle - x_center); 
```

# mysql - 在 MySql 中为同一字段添加两个索引

> ID：14581565
> 
> 赞同：-1
> 
> 时间：2013-01-29T11:12:18.707
> 
> 标签：mysql, indexing, unique-key

我有一个这样的表：

**something**
a [INT]
b [INT]
c [INT]

...其中*a*，*b*和*c*是指向三个不同*table.id*的单独**外键**。由于我想让所有 regs 都是唯一的，并且在阅读[了这个很好的答案](https://stackoverflow.com/a/2219858)之后，我认为我应该以这种方式创建一个新索引：并且（在我的情况下）执行 IGNORE INSERTS。 但正如您所看到的，我会为每一列设置一个 KEY，然后再添加一个包含所有三个的额外 UNIQUE INDEX。这是正常现象吗？这对我来说似乎很奇怪，我从未见过。*`UNIQUE INDEX(a, b, c)`* 

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:15:21.457

在多个索引中包含一列是完全正常和合理的。但是，如果 (a, b, c) 的组合足以唯一标识一行，那么您似乎需要一个`PRIMARY`索引而不是一个索引`UNIQUE`（从技术上讲，差别很小，但从语义上讲，它可能是更好的选择）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T11:18:53.423

如果某事（a，b，c）创建主键将使对唯一索引的需求无效。如果您的主键是Something（a，b）并且您想要一个唯一索引（a，b，c），那么一个额外的唯一索引将是有意义的。但是由于所有三列都是外键，所以主键索引就是你的。*

# javascript - 我在 javascript 中警告 jQuery.grep 的“值不是返回所有执行路径”

> ID：14581573
> 
> 赞同：3
> 
> 时间：2013-01-29T11:12:48.317
> 
> 标签：javascript, jquery

我正在使用以下代码行

```
var selectedMedId = jQuery.grep(privateVariables.medIdData, function (n) {
    if (n.DescriptionWithCode.toString().toUpperCase() === description.toString().toUpperCase()) {
        return n;
    }
}); 
```

我也尝试过

```
 var selectedMedId = jQuery.grep(privateVariables.medIdData, function (n) {
     return n.DescriptionWithCode.toString().toUpperCase() === description.toString().toUpperCase();
 }
 }); 
```

我想摆脱这个警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T14:04:52.297

如果您在这里寻找单个 ID，这应该是正确的语法：

```
var selectedMedId = jQuery.grep(privateVariables.medIdData, function (n) {
    return (n.DescriptionWithCode.toString().toUpperCase() === description.toString().toUpperCase());
})[0];

if (selectedMedId) {
    ...
} 
```

看起来您的第一次尝试是返回一个对象而不是`true`or `false`，而您的第二次尝试有一个右括号太多。

线索在警告中，第一次尝试并不总是从 $.grep 返回，只有在 n.DescriptionWithCode 和描述中匹配时才会返回。

# ios - 无法使用 NSURLConnection 从我的 ios 应用程序中的 Web 服务器获取数据，但我可以从 localhost 服务器获取数据

> ID：14581574
> 
> 赞同：1
> 
> 时间：2013-01-29T11:12:55.483
> 
> 标签：ios, json

我正在开发一个从网络服务器获取 JSON 数据的 iphone 应用程序，并且我正在使用 NSURLConnectionDelegate、NSURLConnectionDataDelegate、NSURLConnectionDownloadDelegate 协议。我能够使用 localhost 成功获取数据，但无法从 Internet Web 服务器获取数据。

```
NSURL*url=[NSURL URLWithString:urlString];
NSURLRequest *theRequest=[NSURLRequest requestWithURL:url
                                          cachePolicy:NSURLRequestUseProtocolCachePolicy
                                      timeoutInterval:60.0];

NSLog(@"%@",theRequest);
// Create the connection with the request and start loading the data.

// NSURLDownload *theDownload = [[NSURLDownload alloc] initWithRequest:Request delegate:self];
NSURLConnection* connection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

其他委托方法如下

```
 -(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{

mydata =[[NSMutableData alloc] init];
[mydata setLength:0];
 }

  -(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{

 UIAlertView*errorView =[[UIAlertView alloc]  initWithTitle:@"Error" message:@"The     download could not be completed- please make sure you are connected to Internet either 3G or Wi-fi" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];

[errorView show];

  }
  -(void)connectionDidFinishLoading:(NSURLConnection*)connection{

NSArray*jsonArr =[[NSArray alloc] init];

NSError*error;
jsonArr= [NSJSONSerialization JSONObjectWithData:mydata options:NSJSONReadingAllowFragments error:&error];
NSLog(@"%@",error);
NSLog(@"Json Array  %@",jsonArr);
self.questions = [NSMutableArray arrayWithArray:jsonArr];

[UIApplication sharedApplication].networkActivityIndicatorVisible = NO; 
```

}

我收到此错误：错误域 = NSCocoaErrorDomain 代码 = 3840“操作无法完成。（可可错误 3840。）”（字符 3 周围的值无效。） UserInfo = 0x71be760 {NSDebugDescription = 字符 3 周围的值无效。}

仅在尝试来自 Internet 网络服务器的数据时出现，并且在访问 localhost 时不会出现

```
 All the code works perfectly if I use url as http://localhost/example.php but as soon  as             

  I change the url to use the web server url  http://www.example.net/data.php 
  although there is no problem with connection but it returns data as nil. 
```

任何建议表示赞赏！

# javascript - 如何使用在 JSP 中显示的 PDF 中禁用功能键 and hence to (partially) prevent a Save? I use the following approach to display a PDF within a JSP: The toolbar and the navigation panes are hidden when the screen loads. The floating toolbar also is not visible. However, an F8 or a F4 opens up the toolbar or the navigation pane respectively. An attempt on trapping the keypress or keydown event works for the rest of the screen but once I click within the PDF, the key press events are not captured and this results in the toolbar getting enabled. I understand that stopping the PDF displayed in the browser from getting saved is not possible, atleast without tha use of any plugin. However, my question here is more for preventing the function key press just to add one more layer that the user needs to go through to save the document. [Update] Accommodating @robertc's comment below, can we have a script to capture the function keys at the screen level before that gets handled by the application that handles the embedded object? I was unable to intercept/block/capture the key stroke that was handled by the PDF client (Adobe installed in my system). Accepting comment from @robertc as answer. Since he posted it as a comment, I am moving it here: "you can only block function keys for an application in that application" javascriptjsppdfsave 4 1 回答 1 This answer is useful 0 我无法拦截/阻止/捕获由 PDF 客户端（Adobe 安装在我的系统中）处理的击键。接受来自@robertc 的评论作为答案。由于他将其作为评论发布，因此我将其移至此处：“您只能阻止该应用程序中某个应用程序的功能键” 于 2013-03-15T10:55:49.793 回答 Related 1 c# - 如果 Session.Remove 后跟抛出异常，为什么不删除会话对象？ 1 git - 如果 core.autocrlf 为真，git log 是否为换行符输出 CRLF？ 1 ruby-on-rails-3 - rails 和嵌套属性 1 c# - 使用 System.DirectoryServices.AccountManagement，使组成为主要组 4 python - 为什么这在 Python IDLE shell 中有效，但当我从命令提示符将其作为 Python 脚本运行时却无效？ 2 c++ - 致命错误：QtGui/QApplication：没有这样的文件或目录| 3 jquery - jQuery 与下拉列表交互 0 hadoop - Amazon EMR 上的 Netty 出现 NoSuchMethodError 1 duplicates - Facebook 评论正在发布两次用户评论 1 actionscript-3 - 如何将 Adob e Illustrator 中的经典文本导入 Adob e Flash Professional？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14581578
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, jsp, pdf, save

I use the following approach to display a PDF within a JSP:

```
<object id="pdfObj" data='myController.do?#toolbar=0&amp;navpanes=0&amp;scrollbar=1&amp' type='application/pdf' width='100%' height='460px' onkeypress="javascript:alert('key press event not triggered!');"></object> 
```

The toolbar and the navigation panes are hidden when the screen loads. The floating toolbar also is not visible. However, an F8 or a F4 opens up the toolbar or the navigation pane respectively.
An attempt on trapping the keypress or keydown event works for the rest of the screen but once I click within the PDF, the key press events are not captured and this results in the toolbar getting enabled.

I understand that stopping the PDF displayed in the browser from getting saved is not possible, atleast without tha use of any plugin.
However, my question here is more for preventing the function key press just to add one more layer that the user needs to go through to save the document.
[Update] Accommodating @robertc's comment below, can we have a script to capture the function keys at the screen level before that gets handled by the application that handles the embedded object?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:55:49.793

我无法拦截/阻止/捕获由 PDF 客户端（Adobe 安装在我的系统中）处理的击键。接受来自@robertc 的评论作为答案。由于他将其作为评论发布，因此我将其移至此处：“您只能阻止该应用程序中某个应用程序的功能键”

# javascript - bootstrap popover 没有在 popover 上显示任何链接

> ID：14581584
> 
> 赞同：0
> 
> 时间：2013-01-29T11:13:25.607
> 
> 标签：javascript, wordpress, twitter-bootstrap, popover

我在我的 wordpress 网站中使用引导弹出窗口并且它运行良好。但我希望在我的弹出窗口中显示 4 个链接，但它没有显示任何链接，而不是从我想要打开弹出窗口的位置删除我的图像。

这是我的弹出框代码：

```
<ul class="thumbnails">
<li class="span2"><a data-original-title="Create" data-placement="top" rel="popover" data-html="true" data-content="<a>Hello</a> |<a>Hello</a> |<a>Hello</a> |<a>Hello</a> "><img src="http://placehold.it/170x170" class="img-circle" /></a>
</li>
</ul> 
```

这是我的java脚本：

```
<script>
$('[rel="popover"]').popover();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:40:52.093

```
<script type='text/javascript'>
Galleria.configure({ debug : false, // debug is now off for deployment
    ...
    showCounter : true,
    lightbox : true,
    imagePan : false, 
    width : auto,
}); width   : auto, 
```

你得到的错误是“auto is not defined”并且你有一个杂散**宽度：auto，**在右括号}）之后；我怀疑这就是问题所在。删除该**宽度：自动，**

*我发布了上面的代码片段来告诉你它在哪里，但我删除了部分代码，所以不要用我发布的代码替换你的代码。只需删除**宽度：自动，**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:33:47.317

尝试在文件准备好时致电。此外，WordPress 使用`jQuery`而不是`$`.

尝试这个：

```
<script>
jQuery(document).ready(function($){
   $('[rel="popover"]').popover();
});
</script> 
```

# excel - 类似工作簿编辑器的 Excel 设计模式

> ID：14581588
> 
> 赞同：-1
> 
> 时间：2013-01-29T11:13:28.163
> 
> 标签：excel, design-patterns, editor

我被分配到一个类似 excel 的编辑器的软件开发任务。基本上编辑器正在处理二维数据，应该具有基本的编辑功能，例如添加/删除行/列，编辑单元格，撤消重做等。请指出一些适合此类工作的良好设计模式，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:23:42.453

与其试图提前找出项目的所有设计模式，不如等到遇到特定的设计问题并考虑解决该问题的模式。

话虽如此，您在此处列出的功能确实表明您可能希望使用[命令](http://en.wikipedia.org/wiki/Command_pattern)模式，因此每个可能的操作（添加列、添加行、删除列、编辑单元格等）都支持一个命令对象，并在[备忘录](http://en.wikipedia.org/wiki/Memento_pattern)模式的额外帮助下为您的命令启用撤消/重做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:14:05.503

取决于使用环境。

您可以在此处查看表格的一些常见使用指南：[http ://www.oracle.com/webfolder/ux/middleware/richclient/index.html?/webfolder/ux/middleware/richclient/guidelines5/tblInteraction.html](http://www.oracle.com/webfolder/ux/middleware/richclient/index.html?/webfolder/ux/middleware/richclient/guidelines5/tblInteraction.html)

很多时候，用户想要一个类似 Excel 的 UX 来操作表格数据，包括实际导出到 Excel。您可以提供编辑、排序、添加行、放大等功能。如果用户在表格中进行编辑，请尝试该指南。它适用于企业用户，因此请进行相应的定制。

高温高压

# java - How to retrieve entity relationships after save?

> ID：14581594
> 
> 赞同：8
> 
> 时间：2013-01-29T11:14:03.433
> 
> 标签：java, rest, jpa, spring-data-jpa, hypermedia

I'm developing a RESTful webservice with [spring-data](http://www.springsource.org/spring-data) as its data access layer, backed by JPA/Hibernate. It is very common to have relationships between domain entities. For example, imagine an entity `Product` which ***has*** a `Category` entity.

Now, when the client `POST`s a `Product` representation to a JAX-RS method. That method is annotated with `@Transactional` to wrap every repository operation in a transaction. Of course, the client only sends the `id` of an already existing `Category`, not the whole representation, just a reference (the foreign key).

In that method, if I do this:

```
entity = repository.save(entity); 
```

the variable `entity` now has a `Category` with only the `id` field set. This didn't surprise me. I wasn't expecting a save (SQL insert) to retrieve information on related objects. But I need the whole `Product` object and related entities to be able to return to the user.

Then I did this:

```
entity = repository.save(entity);
entity = repository.findOne(entity.getId()); 
```

that is, retrieve the object after persisting it, **within the same transaction/session**.

To my surprise, the variable `entity` didn't change anything. Actually, the database didn't even get a single select query. This is related with Hibernate's cache. For some reason, when in the same transaction, a find does not retrieve the whole object graph if that object was previously persisted.

With Hibernate, the solution appears to be to use `session.refresh(entity)` (see [this](https://stackoverflow.com/questions/7290860/hibernate-calling-get-after-save-on-the-newly-created-record-within-the-same) and [this](https://forum.hibernate.org/viewtopic.php?f=1&t=953267)). Makes sense.

**But how can I achieve this with spring data?**

I would like to avoid to create repetitive custom repositories. I think that this functionality should be a part of spring data itslef (Some people already reported this in spring data's forum: [thread1](http://forum.springsource.org/showthread.php?111814-Entity-refresh-using-spring-data-jpa-module), [thread2](http://forum.springsource.org/showthread.php?128414-Refreshing-entities-using-spring-data)).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:52:03.717

**tl;dr**

References between entities in the web layer need to be made explicit by using links and should not be hidden behind semi-populated object instances. References in the persistence layer are represented by object references. So there should be a dedicated step transforming one (the link) into the other (the fully populated object reference).

**Details**

It's an anti-pattern to hand around backend ids as such and assume the marshaling binding doing the right thing. So the clients should rather work with links and hand those to the server to indicate they want to establish a connection between an already existing resource and one about to be created.

So assuming you have the existing `Category` exposed via `/categories/4711`, you could post to your server:

```
POST /products
{ links : [ { rel : "category", href : "/categories/4711" } ],
  // further product data
} 
```

The server would the instantiate a new `Product` instance, populate it with additional data and eventually populate the associations as follows:

1.  Identify properties to be populated by looking up the link relation types (e.g. the `category` property here.
2.  Extract the backend identifier from the given URI
3.  Use the according repository to lookup the related entity instance
4.  Set it on the root entity

So in your example boiling down to:

```
Product product = new Product();
// populate primitive properties
product.setCategory(categoryRepository.findOne(4711));
productRepository.save(product); 
```

Simply posting something like this to the server:

```
POST /products
{ category : {
    id : 1, … },
  … 
} 
```

is suboptimal for a lot of reasons:

1.  You want the persistence provider to implicitly persist a `Product` instance and at the same time 'recognize' that the `Category` instance referred to (actually consisting of an id only) is not meant to be persisted but updated with the data of the already existing `Category`? That's quite a bit of magic I'd argue.
2.  You essentially impose the data structure you use to POST to the server to the persistence layer by expecting it to transparently deal with the way you decided to do POSTs. That's not a responsibility of the persistence layer but the web layer. The whole purpose of a web layer is to mitigate between the characteristics of an HTTP based protocol using representations and links to a backend service.

# ios - 我应该使用什么来并行化 iOS 应用程序中对 REST 服务器的频繁 HTTP 请求：GCD 还是 NSThread？

> ID：14581596
> 
> 赞同：0
> 
> 时间：2013-01-29T11:14:21.483
> 
> 标签：ios, objective-c, multithreading, grand-central-dispatch, nsthread

我正在开发一个应用程序，它必须从服务器中为用户提取新消息。我已经将此实现为一个每 2 秒触发一次的计时器，并调用一个选择器，该选择器是一种实现 HTTP 请求和服务器响应处理的方法。所以我认为在主线程中这样做是一个非常糟糕的主意。

我没有在 iOS 中使用多线程的经验。所以我想知道什么最适合这个任务的并行化：GCD 还是 NSThread？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:21:19.173

您应该尽可能在 API 堆栈上工作。这样您就可以专注于编程功能而不是管理线程。GCD 使用系统已经开始运行的线程，它比管理自己的代码更有效。最好将您的网络封装成`NSOperation`s ，然后可以放在 an 上`NSOperationQueue`，这些将在一个或多个后台线程上执行，无论系统认为对于当前电源状态和其他类似情况来说是一个很好的数字。

与纯 GCD 方法相比的好处`NSOperation`是可以取消操作。一旦一个块被提交到 GCD，它无论如何都必须运行。

如果您想将 HTTP 请求封装在`NSOperation`s 中，您可能想知道有人已经为您完成了这项工作。[是最广为人知的 iOS 网络堆栈之一](https://github.com/AFNetworking/AFNetworking)，并使用s 作为构建的基础，因此非常容易实现多线程。[`AFNetworking`](https://github.com/AFNetworking/AFNetworking) `NSOperation`

一个好主意是尝试将您的解析代码封装成一个`NSOperation`，然后当您的网络请求操作返回时，您可以创建解析操作实例并将它们放在另一个队列中以在后台处理。

# php - Zend 邮件使用什么传输 Zend_Mail_Transport_Sendmail 或 Zend_Mail_Transport_Smtp

> ID：14581598
> 
> 赞同：0
> 
> 时间：2013-01-29T11:14:33.073
> 
> 标签：php, email, zend-framework, zend-mail

您能否告诉Zend_Mail_Transport_Sendmail 何时使用以及Zend Mail 何时使用Zend_Mail_Transport_Smtp？一个比另一个有什么好处？例如，从性能的角度来看，什么更好？如果我需要发送许多电子邮件，什么是更好的选择？我在 linux 服务器和 Green Arrow Delivery System 上使用 smpt 服务器。我使用 Zend_Mail_Transport_Smtp 传输一段时间（在我看来这是一种首选方式，纠正我我错了），但由于某种原因，当我使用 Zend_Mail_Transport_Smtp 时，服务器未设置消息 id 标头，但看起来它设置了消息 id 标头如果我使用 Zend_Mail_Transport_Sendmail。如果我在 Zend_Mail_Transport_Smtp 上使用 Zend_Mail_Transport_Sendmail，我是否有一些限制或性能（或可扩展性）惩罚？

# weblogic - WebLogic 中的 SAML

> ID：14581600
> 
> 赞同：1
> 
> 时间：2013-01-29T11:14:40.500
> 
> 标签：weblogic, managed, saml

我需要在 WebLogic 10.3.6 服务器中部署的 2 个或更多应用程序之间配置 SAML。我在 2 个不同的域之间成功配置了 SAML，但我需要在同一域中的 2 个应用程序之间使用 SAML，不同的托管服务器。如果我在同一域、同一托管服务器中部署应用程序，即使未配置 SAML，凭据也会自动共享。App1 在 iframe 中调用 App2。当我访问 App1 时，登录页面有效。当我在 iframe 中访问 App2 时，凭据已从 App1 完美传输到 App2，但是当我返回 App1 时，会话结束。在不同的域上部署应用程序都可以正常工作，我可以正常访问 App1 和 App2。

当我在同一个域和不同的托管服务器中访问 App2 时，我不明白为什么 App1 的会话被终止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T05:57:52.193

我不知道它是否仍然相关：weblogic SAML2 实现将 JSESSIONID-Cookie 存储在根 cookie 路径“/”下。当同一域中的托管服务器位于同一主机上时，每次您将请求从一台服务器更改为另一台时，身份验证 cookie 都会被覆盖。所以你要重新认证...（cookie只存储在域名下！应用路径和端口无关）

解决方案是在不同的 ip-address、dns-name 或仅在不同的 dns-alias 下启动每个托管服务器：例如，对于别名：

```
managedserverA.example.net points to 192.168.1.5
managedserverB.example.net points to 192.168.1.5 either 
```

现在您的浏览器可以将身份验证 cookie 存储在不同的域下：

```
JSESSIONID CLmYRsmZJ41TgyLJkcDQNf1!1664721840 /managedserverA.example.net
JSESSIONID q6nHRsnPNscWksZw99LBJh2!606405387  /managedserverB.example.net 
```

不要忘记更改 SAML2 配置中的发布站点 URL，以包含每个托管服务器的 dns 别名：

```
published site url: http://managedserverA.example.net:7020/saml2
published site url: http://managedserverB.example.net:7030/saml2 
```

干杯，

托米斯拉夫·德杜斯

# android - Android-如何实现水平步进进度条

> ID：14581602
> 
> 赞同：19
> 
> 时间：2013-01-29T11:14:53.940
> 
> 标签：android, android-xml, android-custom-view, android-progressbar

我想使用如下图所示的步骤来实现水平进度条。

![水平步进进度条](../Images/ce920c7404fe6369932f480067392083.png)

我在 Android 中找不到这样的原生组件。谁能指导我怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-07-05T05:36:29.133

我找到了一个遵循 Google Material Design 指南的[Vertical Steper](https://github.com/ernestoyaquello/vertical-stepper-form)：

[![在此处输入图像描述](../Images/0e148d6c243299a314e24a68ad71160c.png)](https://i.stack.imgur.com/130QI.png)

还有另一个有据可查的图书馆[Here](https://github.com/kofigyan/StateProgressBar)

[![在此处输入图像描述](../Images/3fa1fe2f3b00ae99c22ca26e9815f20d.png)](https://i.stack.imgur.com/QoFVU.gif)

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-24T12:22:42.737

**编辑：目前似乎得到很好支持和使用的回购协议（2016 年 9 月）** [https://github.com/baoyachi/StepView](https://github.com/baoyachi/StepView)

[![步进视图](../Images/2688b3c860cf58c40a44b9beee5ac477.png)](https://i.stack.imgur.com/mlnwSl.jpg)

*老答案：*

这个答案迟到了，但到目前为止我发现的最好的是来自 Anton46 的这个 repo：[https](https://github.com/anton46/Android-StepsView) ://github.com/anton46/Android-StepsView 设置也很简单。

这是一个例子：

[![在此处输入图像描述](../Images/cfcd4564a842f2f8a2fcbab6f0c257c1.png)](https://i.stack.imgur.com/eflohl.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-03T09:35:10.237

我创建了一个 Step View ViewPager，它同时支持水平和垂直分页，并且不需要可绘制对象和图像。您可以通过简单地指定各种属性来配置外观。

可以在这里找到[https://github.com/YablokovDmitry/StepViewPager](https://github.com/YablokovDmitry/StepViewPager)

[![样品 1](../Images/9b35d30120efe611b6a4240af3e4260d.png)](https://i.stack.imgur.com/diZvUl.png)

[![样品 2](../Images/5b2a2772890872f0baed8cff03eff57a.png)](https://i.stack.imgur.com/6je1tm.png)

[![样品 3](../Images/74a47f2255b0e77c9643d24b8a8ecc9b.png)](https://i.stack.imgur.com/UOzfUm.png?)

# xcode - Kobold2d 将 Xcode 升级到 4.6 后生成错误

> ID：14581605
> 
> 赞同：5
> 
> 时间：2013-01-29T11:14:55.460
> 
> 标签：xcode, cocos2d-iphone, kobold2d, xcode4.6

将我的 Xcode 升级到 4.6 后，Kobold2d 2.0.4 产生如下错误。有人也遇到这个问题吗？

```
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1

CompileC /Users/ernnug/Library/Developer/Xcode/DerivedData/Kobold2D-brplvdgzzqjavebyfesirygztebf/Build/Intermediates/Kobold2D-Libraries.build/Debug-iphoneos/kobold2d-ios.build/Objects-normal/armv7/CCAnimationExtensions.o kobold2d/cocos2d-ext/CCAnimationExtensions.m normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/ernnug/Kobold2D/Kobold2D-2.0.4/__Kobold2D__
    setenv LANG en_US.US-ASCII
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch armv7 -fmessage-length=0 -std=gnu99 -Wno-trigraphs -fpascal-strings -O0 -Werror -Wmissing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wsign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wstrict-selector-match -Wundeclared-selector -Wno-deprecated-implementations -DDEBUG -DCOCOS2D_DEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -ffast-math -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -g -fvisibility=hidden -Wno-sign-conversion -miphoneos-version-min=4.3 -I/Users/ernnug/Library/Developer/Xcode/DerivedData/Kobold2D-brplvdgzzqjavebyfesirygztebf/Build/Intermediates/Kobold2D-Libraries.build/Debug-iphoneos/kobold2d-ios.build/kobold2d-ios.hmap -I/Users/ernnug/Kobold2D/Kobold2D-2.0.4/__Kobold2D__/libs/cocos2d-iphone/cocos2d -I/Users/ernnug/Kobold2D/Kobold2D-2.0.4/__Kobold2D__/libs/GoogleAdMobAdsSDK -I/Users/ernnug/Kobold2D/Kobold2D-2.0.4/__Kobold2D__/libs/cocos2d-iphone/external/kazmath/include -I/Users/ernnug/Library/Developer/Xcode/DerivedData/Kobold2D-brplvdgzzqjavebyfesirygztebf/Build/Products/Debug-iphoneos/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/ernnug/Library/Developer/Xcode/DerivedData/Kobold2D-brplvdgzzqjavebyfesirygztebf/Build/Intermediates/Kobold2D-Libraries.build/Debug-iphoneos/kobold2d-ios.build/DerivedSources/armv7 -I/Users/ernnug/Library/Developer/Xcode/DerivedData/Kobold2D-brplvdgzzqjavebyfesirygztebf/Build/Intermediates/Kobold2D-Libraries.build/Debug-iphoneos/kobold2d-ios.build/DerivedSources -F/Users/ernnug/Library/Developer/Xcode/DerivedData/Kobold2D-brplvdgzzqjavebyfesirygztebf/Build/Products/Debug-iphoneos -include /Users/ernnug/Library/Developer/Xcode/DerivedData/Kobold2D-brplvdgzzqjavebyfesirygztebf/Build/Intermediates/PrecompiledHeaders/Prefix-iOS-bfbcgatlrctdcneqvloiipzyvdrz/Prefix-iOS.pch -MMD -MT dependencies -MF /Users/ernnug/Library/Developer/Xcode/DerivedData/Kobold2D-brplvdgzzqjavebyfesirygztebf/Build/Intermediates/Kobold2D-Libraries.build/Debug-iphoneos/kobold2d-ios.build/Objects-normal/armv7/CCAnimationExtensions.d --serialize-diagnostics /Users/ernnug/Library/Developer/Xcode/DerivedData/Kobold2D-brplvdgzzqjavebyfesirygztebf/Build/Intermediates/Kobold2D-Libraries.build/Debug-iphoneos/kobold2d-ios.build/Objects-normal/armv7/CCAnimationExtensions.dia -c /Users/ernnug/Kobold2D/Kobold2D-2.0.4/__Kobold2D__/kobold2d/cocos2d-ext/CCAnimationExtensions.m -o /Users/ernnug/Library/Developer/Xcode/DerivedData/Kobold2D-brplvdgzzqjavebyfesirygztebf/Build/Intermediates/Kobold2D-Libraries.build/Debug-iphoneos/kobold2d-ios.build/Objects-normal/armv7/CCAnimationExtensions.o

/Users/ernnug/Kobold2D/Kobold2D-2.0.4/__Kobold2D__/kobold2d/cocos2d-ext/CCAnimationExtensions.m:11:1: error: class 'FIXCATEGORYBUGCCAnimation' defined without specifying a base class [-Werror,-Wobjc-root-class]
FIX_CATEGORY_BUG(CCAnimation)
^
/Users/ernnug/Kobold2D/Kobold2D-2.0.4/__Kobold2D__/kobold2d/cocos2d-ext/FixCategoryBug.h:15:43: note: expanded from macro 'FIX_CATEGORY_BUG'
#define FIX_CATEGORY_BUG(name) @interface FIXCATEGORYBUG ## name; @end @implementation FIXCATEGORYBUG ## name; @end
                                          ^
<scratch space>:5:1: note: expanded from macro 'FIXCATEGORYBUG'
FIXCATEGORYBUGCCAnimation
^
note: add a super class to fix this problem
1 error generated.
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1

/Users/ernnug/Kobold2D/Kobold2D-2.0.4/__Kobold2D__/<command line>:3:10: '/Users/ernnug/Library/Developer/Xcode/DerivedData/Kobold2D-brplvdgzzqjavebyfesirygztebf/Build/Intermediates/PrecompiledHeaders/Prefix-iOS-gizjrgholmwiqtfonzxtvzvwrkxa/Prefix-iOS.pch' file not found 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T11:34:46.677

只需删除对 FIXCATEGORYBUG 的所有引用。它不再需要。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-02T19:03:13.040

以下是我删除 FixCategoryBug 以纠正问题的文件的概要：

*   CCAnimationExtensions.m
*   CCDirectorExtensions.m
*   CCNodeExtensions.m
*   CCSpriteExtensions.m
*   NSMutableArray+WeakReferences.m

# php - PHP fwrite() 函数

> ID：14581606
> 
> 赞同：0
> 
> 时间：2013-01-29T11:15:06.490
> 
> 标签：php

我是编程新手，我正在尝试编写一个 PHP 代码。

1）创建一个新文件。

2）将两个文件中的内容添加到该文件中。

这是我正在尝试做的一个例子。

1）我有两个文件**one.txt**和**two.txt**。

2)这两个文件的内容如下。

一个.txt=`abc123`

二.txt=`def456`

**3）我想要result.txt**中的以下结果。

```
 abc123

 this is the result file.

 def456 
```

我尝试了很多我知道但无法使其发挥作用的不同方式。我是初学者，所以入门有困难。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:21:39.817

如果您的目标**只是包装结果文件**，只需使用[file_get_contents](http://php.net/file_get_content)和 [file_put_contents](http://php.net/file_put_contents)。

```
$content_one = file_get_contents("one.txt");
$content_res = file_get_contents("result.txt");
$content_two = file_get_contents("two.txt");
file_put_contents("result.txt", "$content_one\n$content_res\n$content_two"); 
```

# javascript - 检查日期从今天起超过 30 天

> ID：14581610
> 
> 赞同：18
> 
> 时间：2013-01-29T11:15:13.403
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jQuery datepicker 并试图找出今天日期和选定日期之间的区别，但是遇到问题......而不是问题......我无法完美找到它......

我试图在“日期选择器的 onSelect 事件”上执行此操作

问题：如何检查使用 jQuery Datepicjer 选择的日期是否大于今天的 30 天？

任何帮助将不胜感激....！！注意：不想使用任何库，我只需要使用 jQuery 来解决这个问题。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-29T11:22:27.600

获取从现在起 30 天的时间戳：

```
var timestamp = new Date().getTime() + (30 * 24 * 60 * 60 * 1000)
//                                      day hour  min  sec  msec 
```

将该时间戳与所选日期的时间戳进行比较。

```
if (timestamp > selectedTimestamp) {
    // The selected time is less than 30 days from now
}
else if (timestamp < selectedTimestamp) {
    // The selected time is more than 30 days from now
}
else {
    // -Exact- same timestamps.
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T11:45:24.420

我为您创建了一个示例。

```
 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Datepicker - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
    $( "#datepicker" ).datepicker();
  });
  </script>
</head>
<body>

Date: <input type="text" id="thedate"/>
<div id="checkDate">Check Date</div>
</body>
</html> 
```

和JS

```
$('#thedate').datepicker();

$('#checkDate').bind('click', function() {
  var selectedDate = $('#thedate').datepicker('getDate');
  var today = new Date(); 
  var targetDate= new Date();
  targetDate.setDate(today.getDate()+ 30);
  targetDate.setHours(0);
  targetDate.setMinutes(0);
  targetDate.setSeconds(0);

  if (Date.parse(targetDate ) >Date.parse(selectedDate)) {
    alert('Within Date limits');
  } else {
    alert('not Within Date limits');
  }
}); 
```

[您可以在此处](http://jsbin.com/urutud/5/edit)在线查看此代码

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T11:26:48.407

试试这个：

```
$('input').datepicker({
    onSelect: function()
    {
        var date = $(this).datepicker('getDate');
        var today = new Date();
        if((new Date(today.getFullYear(), today.getMonth(), today.getDate()+30))>date)
        {
             //Do somthing here..
        }

    },
}); 
```

演示：http: [//jsfiddle.net/jeY7S/](http://jsfiddle.net/jeY7S/)

# cakephp - 让 CakePHP 保存同一个链接属性的多条 HABTM 记录

> ID：14581611
> 
> 赞同：0
> 
> 时间：2013-01-29T11:15:17.637
> 
> 标签：cakephp, has-and-belongs-to-many

抱歉标题不好，我不知道如何称呼它。

我的“产品”表有一个使用“产品属性”设置的 HABTM 链接。

现在，不幸的是，客户已经决定可以使用不同的数据多次添加每个属性。

所以，我试图保存这个：

```
array(
    array('product_id' => 8218, 'property_id' => 30, 'numeric_value' => 47, 'modifier' => 1),
    array('product_id' => 8218, 'property_id' => 30, 'numeric_value' => 21, 'modifier' => 1)
); 
```

但当然，最后 2 个值只是覆盖了前 2 个。知道如何欺骗 Cake 将它们分开存储吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:58:47.550

我将记录直接保存到表中（通过使用`$P = ClassRegistry::init('ProductProperty');`and `$P->saveMany($ProductProperties);`）

当然，我必须先删除所有现有记录。

# magento-1.6 - 获取成员创建日期 magento

> ID：14581615
> 
> 赞同：0
> 
> 时间：2013-01-29T11:15:28.427
> 
> 标签：magento-1.6

在 magento 中，当一个人成为成员时，日期“created_at”会与配置文件一起保存。

如何从 magento 中检索此信息。我可以获得地址信息等，但不知道如何显示/获取用户创建帐户的日期。

我尝试了以下方法：

```
echo Mage::getResourceModel('customer/customer_collection')->addAttributeToSelect('cr‌​eated_at'); 
```

但不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:20:36.497

你试过这个：

```
$customer = Mage::getModel('customer/customer')->load(IDHERE);
//or
$customer = Mage::getModel('customer/customer')->loadByEmail('test@test.com');

echo $customer->getCreatedAtTimestamp(); 
```

你到底想在哪里得到这个？从客户会话中？还是您想获得任意客户，而不是当前客户？

# sql-server - 填补开始/结束日期对中的空白

> ID：14581618
> 
> 赞同：2
> 
> 时间：2013-01-29T11:15:35.913
> 
> 标签：sql-server, sql-server-2008, tsql

健康）状况：

```
Start date: 31-12-2012  
End date:   01-04-2013 
```

*   模块代表`project_id`
*   加载表示介于`module_start_date`和`module_end_date`和之间`user_id=6`的 40% 是免费的。

```
SELECT [user_id], module_id, module_start_date, module_end_date,
            1 - loading_percentage loading
FROM module_user_master_map
WHERE module_start_date >= '2012-12-31'
      AND module_end_date <= '2013-04-01'
      AND [user_id]=6 
```

使用此查询，我得到以下输出：

```
user_id | module_id | module_start_date | module_end_date | loading
-------------------------------------------------------------------    
6       | 3         | 01-01-2013        | 31-01-2013      | 0.4
6       | 4         | 15-02-2013        | 28-02-2013      | 0.2
6       | 5         | 01-03-2013        | 15-03-2013      | 0.7
6       | 3         | 30-01-2013        | 30-01-2013      | 0.5 
```

如果您仔细查看输出，您会发现用户在日期`01-02-2013`内100% 可用，`14-02-2013`即他的负载为 1。

//更正了上面句子中的日期。

我希望输出如下

```
user_id | module_id | module_start_date | module_end_date | loading
-------------------------------------------------------------------
6       | 3         | 30-01-2013        | 30-01-2013      | 0.5
6       | 3         | 01-01-2013        | 31-01-2013      | 0.4
6       | Null      | 01-02-2013        | 14-02-2013      | 1
6       | 4         | 15-02-2013        | 28-02-2013      | 0.2
6       | 5         | 01-03-2013        | 15-03-2013      | 0.7
6       | Null      | 16-03-2013        | 01-04-2013      | 1 
```

我确实有一个功能，它给我从开始日期和结束日期开始的日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:12:17.650

您可以遵循以下方法：

将您拥有的天数与您的最小/最大范围内的日期表函数中的天数结合起来。（由于您已经有了日期表功能，我将省略该代码）

假设我有第 1 周和第 3 周的结果，当我在一月份的所有日子里加入这些时，你可以很容易地看到差距在哪里。

```
DECLARE @from DATETIME2(1) = '2013-01-01'
DECLARE @to DATETIME2(1) = '2013-01-31'

DECLARE @from_wk1 DATETIME2(1) = '2013-01-01'
DECLARE @to_wk1 DATETIME2(1) = '2013-01-07'

DECLARE @from_wk3 DATETIME2(1) = '2013-01-15'
DECLARE @to_wk3 DATETIME2(1) = '2013-01-22';

WITH    OccupiedDays ( [dt] )
          AS ( SELECT   B.[dt]
               FROM     DateTable(@from_wk1, @to_wk1) B
               UNION ALL
               SELECT   C.[dt]
               FROM     DateTable(@from_wk3, @to_wk3) C
             )
    SELECT  A.[dt]  AS AllDays,
            OD.[dt] AS OccupiedDays
    FROM    DateTable(@from, @to) A
            LEFT JOIN OccupiedDays OD ON A.[dt] = OD.[dt] 
```

结果是：

![sql输出](../Images/bd7c8598c62622ff99af6d512540e5af.png)

您现在只需要填写空值并进行一些分组和/或聚合。

# ios - 如何更改 XCode ios SDK 编译器设置以允许非 void 方法的 void 返回语句？

> ID：14581619
> 
> 赞同：0
> 
> 时间：2013-01-29T11:15:36.630
> 
> 标签：ios, xcode, compiler-construction, return, semantics

我被要求用一些 ios 6 功能更新内置于 Xcode 3.1 的旧 ios 应用程序。

当我尝试使用我的 xcode 4.5 构建源代码时，它拒绝编译，因为项目中有很多地方在方法中使用了简单的 return 语句，而这些方法实际上应该返回一个布尔值或类似的值。

Xcode 3.1 允许，而 4.5 不允许。在中间的某个地方，苹果决定添加这个限制。

我的问题是代码超过 20,000 行代码，并且开发人员在需要停止执行的任何地方都使用了简单的 return 语句。由于编译器在遇到第一个错误时会停止编译，所以我必须一次修复一个，然后再次尝试编译，却发现另一个错误。我尝试了 2 个小时来修复 100 条这样的退货声明。

是否有编译器标志或 Xcode 构建设置会将这些错误更改为警告并允许我在 Xcode 4.5 上运行此应用程序？

这是 Xcode 抛出的确切错误：

/Users.../Classes/WaterMaps.m:5471:5: 非 void 方法 'initWithParams:mass:radius:totalAssetInfo:' 应该返回一个值

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:49:25.100

这与 Xcode 无关，而与编译器有关。并不是 Apple 添加了这个限制，编译器不是来自 Apple，它们是开源项目（[GCC](http://gcc.gnu.org/)和[LLVM/clang](http://llvm.org/)）。

请问为什么你花了 2 个小时来修复 100 条这样的退货声明？修复 100 个这样的返回语句应该不会超过 5 分钟。

1.  写`return 0;`在某处，选择它，将其复制到剪贴板 ( `CMD+C`)，然后再次删除它。
2.  写`return;`在某处，选择它，点击`CMD+E`将其复制到搜索缓冲区，再次删除它。
3.  转到您的源代码。
4.  点击`CMD+G`，意思是“找到下一个”。
5.  如果找到的表达式未标记为错误，则转到（4）。
6.  点击（粘贴） ，`CMD+V`它会覆盖`return;`.`return 0;`
7.  到（4）。

所以基本上你一直点击`CMD+G`跳转文件，`CMD+V`每当你看到一个错误。要快速跳转到下一个文件，请在 Xcode 中打开错误视图：

![在此处输入图像描述](../Images/21e846439f408a27ed92f7a74c6708df.png)

选择第一个文件的第一个错误，只要您的`CMD+G`程序到达文件末尾，就会`CMD+'`跳到列表中下一个文件的第一个问题。作为开发人员，您应该真正学会更有效地使用键盘。将您的手放在键盘上使您的工作效率比在键盘和鼠标/触摸板/轨迹球/等之间来回移动高出数百倍。

代码行的数量（“超过 20,000 行代码”）有什么关系呢？这是相关的返回语句的数量。

您的代码目前严重损坏，与其浪费时间思考如何编译这些损坏的代码，我强烈建议您宁愿去修复它。由于一旦修复，它将永远工作，并且在下次更新编译器并且您的最后一次破解不再工作时不会再次中断。

我的意思是，如果您只键入 return，编译器如何知道您要为返回 boolean 或 int 值的方法返回什么？建议的'return 0;' 适用于所有返回数值（包括浮点）和布尔值（0 = false/NO）的方法，并使编译器再次满意。在这种情况下，它与古代 C 编译器返回的值相同。

请注意，即使在 Xcode 3.1 中，这些 return 语句也应该在所有地方都产生警告。作为一名认真的开发人员，**始终将所有警告视为错误**。您的项目不应有任何警告。警告告诉您有问题或至少可能有问题，这意味着您应该出去修复它。几乎所有警告都可以通过修改代码来消除。因此，与其忽略警告或在编译器中禁用它们，不如修复它们。今天许多公司都有零警告政策，如果你的代码只产生一个警告，它就会被拒绝。如果此代码的作者将所有警告都视为错误，那么您现在不必修复这些警告。

# mysql - 产品和库存实体之间的关系

> ID：14581625
> 
> 赞同：1
> 
> 时间：2013-01-29T11:15:52.543
> 
> 标签：mysql, database, tsql, database-design, relational-database

`products`我正在开发一个库存控制数据库，并希望知道在`stocks`实体之间建立关系的最佳方式是什么。

下面哪个是合适的？如果没有，请让我知道为什么以及您的建议是什么。

提前致谢

**产品 - 股票**

基于以上实体：

*   如果我有`1:1`关系，看起来我必须通过用`UPDATE`语句更新行来减少同一行的库存量。

*   如果我有`1:n`关系，看起来我必须在`INSERT`声明中添加一个更新了库存数量的新行。

**要点**

*   将有并发用户来操纵库存，例如增加和/或减少，因此`[ACID][1]`很重要。

*   `Stock amount`是非负值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:47:22.047

取决于您要完成的工作。

如果您需要一个简单的**数字**来描述产品的可用数量，只需将其作为字段存储在产品表中即可。在单个语句中更新它是原子的：

```
UPDATE PRODUCT
SET AMOUNT = AMOUNT + <change>
WHERE PRODUCT_ID = <whatever> 
```

或者，您可以执行以下操作：

```
START TRANSACTION;

SELECT AMOUNT
FROM PRODUCT
WHERE PRODUCT_ID = <whatever>
FOR UPDATE;

(Calculate new amount.)

UPDATE PRODUCT
SET AMOUNT = <new amount>
WHERE PRODUCT_ID = <whatever>;

COMMIT; 
```

请注意 FOR UPDATE 锁定行直到 COMMIT 并防止在并发环境中可能出现的异常。

如果没有 FOR UPDATE，仅仅常规的 ACID 保证是不够的。例如：

*   事务**A**选择当前的 AMOUNT，假设它是 5。
*   事务**B**选择当前的 AMOUNT，它仍然是 5，因为还没有其他事务提交任何更改。
*   交易**A**将金额加 2，结果为 7。
*   交易**B**将金额加 3，结果为 8。
*   事务**A**将该行更新为 7 并提交。
*   事务**B**将该行更新为 8 并提交。

突然，表格中的结果 AMOUNT 为 5 + 3 = 8，即使它本应为 5 + 2 + 3 = 10。其中一个更改丢失了 - 最后提交的人获胜。

* * *

如果您需要产品数量的历史记录，或者需要跟踪产品的单个“实例”，那么是的，您需要一个 1:N 关系中的单独表，这在并发环境中可能有自己的锁定挑战。

* * *

> 库存量为非负值。

不幸的是，MySQL 不强制执行 CHECK 约束，但对于这种特定情况，您可以简单地使用一种[UNSIGNED](http://dev.mysql.com/doc/refman/5.6/en/numeric-type-overview.html)数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:45:05.473

它`depends`针对`no. of users updating/inserting rows`特定产品，`depends on`以及您的系统可以承受的内存开销或性能

**在更新**
中`mysql - update needs write lock`，
因此，**性能消耗：对于许多用户而言，系统**

**在插入**
**内存消耗**方面会比较慢 ：例如，对于 100 个用户，100 行可能需要更多更新 100 行。

我想`1:1 relation ship is better`是因为
如果你要给`1:n`关系，那么，

增加库存：

```
-you 'll add new row .
-so for total stock 
       - you have to add all the subsequent rows,if new value you are inserting 
         is only the incremented amt 
       - or if it is the total increased amt the previous rows would not have
         any significance. 
```

对于减少库存，相同，

```
-if the total decrement amt you are inserting then the previous data has 
 no significance,
-but if only decrement value is there , so for every user you have to put 
 a check over the total stock which you would get from many rows. 
```

# javascript - 动态 div 上的关闭图标

> ID：14581636
> 
> 赞同：1
> 
> 时间：2013-01-29T11:16:09.660
> 
> 标签：javascript, css, html

我有一个`div`我动态创建的。`display:none`我还使用and来切换 div 的可见性`display:block`。**我想使用纯Javascript**和**CSS**为该 div 创建一个关闭图标。那可能吗？

我尝试使用简单的 X 图标来更改可见性。

这是我的**CSS**：

```
.dhSeriesToolbar {
     max-height: 200px;
     width:400px;
     background-color: black;
     z-index:999;
     display:none;
     overflow:auto;
     border: 2px solid #33ccff;
     padding-left: 15px;
     padding-top: 15px;
     padding-bottom: 15px;
     position:absolute;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:23:25.320

是的可能......这样做

```
// javascript part
myfunction(){
document.getElementById("divShowHide").setAttribute("style", "display:none;");
}

// html part
<img src="icon.png" onclick="myFunction()"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:19:59.817

最好看到您的代码以更好地帮助您。但想法如下：`<img>`在您的元素中添加一个图标 ( ) `<div>`，并将 Javascript 调用绑定到*onclick*事件，该事件将隐藏（或根据您的需要删除）`<div>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:19:29.447

你也可以玩`visibility:hidden`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:44:44.107

您可以同时创建一个关闭图标，`div`例如

```
$("body").append("<div class='dynamically_created_div'><a href='javascript:void(0);' onclick='closeDiv()'></a></div>");

function closeDiv() {
  $(".dynamically_created_div").hide();
} 
```

# jsf - 如何在 JSF 模板中显示来自数据库的菜单

> ID：14581640
> 
> 赞同：0
> 
> 时间：2013-01-29T11:16:17.113
> 
> 标签：jsf, java-ee-6

我想在 JSF 模板中显示菜单。我的应用程序的每个用户都有不同的菜单，菜单存储在数据库中。这是我的代码，

MenuBean.java

```
public List<Menuitem> getUserMenu() {
    List<Menuitem> menuitems = (List<Menuitem>) em.createQuery("_____________").setParameter("_______", _______).getResultList();
    return menuitems;
} 
```

页面模板.xhtml

```
<div class="container">
    <div id="navigation">
        <ul>
            <ui:repeat var="_item" value="#{menuitemBean.userMenu}">
                <li><h:outputLink value="#{_item.url}">
                        <h:outputText value="#{_item.name}" />
                    </h:outputLink></li>
            </ui:repeat>
        </ul>
    </div>

    <div id="content">
        <h1>
            <ui:insert name="header" />
        </h1>
        <h2>
            <ui:insert name="subheader" />
        </h2>

        <ui:insert name="main" />
    </div>
</div> 
```

问题是每次我导航到使用相同模板（pageTemplate.xhtml）的新页面（.xhtml 文件）时，菜单都会重新加载。

如何每个用户只加载一次菜单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:27:39.537

如果菜单依赖于用户，最好创建一个 bean，其作用域`session`将存储此菜单的内容。这样，一旦菜单第一次初始化，就不会重新初始化。您的代码将如下所示：

```
public class MySessionBean ... {

    private List<Menuitem> menuItems = null;

    public List<Menuitem> getUserMenu() {
        if (menuItems == null) {
            // Initialize the menu items.
            menuItems = ...;
        }
        return menuitems;
    } 
```

请注意，您还可以`menuItems`在构造函数或`post-construct`方法中初始化对象（即，在 bean 实例化后立即调用的方法）。

还有一件重要的事情：不要将数据库访问代码放在您的 bean（您的`em.createQuery(...)`）中。将其移至服务/DAO 层，让 bean 调用服务以检索构建菜单项所需的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T11:28:33.860

您不应该将访问数据库的**逻辑**放在 getter 方法中，因为[它们通常在同一个 request 中被多次调用](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times)。

要为每个用户加载一次菜单，请将属性放在`@SessionScoped`支持 bean 中，然后在带`@PostConstruct`注释的方法中对其进行初始化：

```
@SessionScoped
public SomeBean {
    private List<Menuitem> menuItems;

    @PostConstruct
    public void init() {
        menuItems = (List<Menuitem>) em.createQuery("_____________")
                           .setParameter("_______", _______).getResultList();
    }
    // getter and setter for menuItems
} 
```

由于 bean 在会话范围内，因此它将作为应用程序中每个用户会话的一个实例存在。

*请注意，我假设您使用的是 JSF 2，因为您将问题标记为[java-ee-6](/questions/tagged/java-ee-6 "显示标记为“java-ee-6”的问题")。*

# django - 用于图像的 django filer 插件 - 未定义的缩略图

> ID：14581641
> 
> 赞同：0
> 
> 时间：2013-01-29T11:16:18.783
> 
> 标签：django, django-cms

我对 Django CMS 真的很陌生。

我创建了一个虚拟环境，安装了 django cms，并且我有两个带有占位符的简单模板。

我已经为文件、图像和文件夹安装了 django filer。它可以工作，但是当我上传图像时..图像实际上是上传的，我可以在媒体文件夹中看到，但在 django 界面上，缩略图是未定义的。

我已经安装`easy_thumbnails`，但在媒体文件夹中我看不到“filer_public_thumbnails”文件夹。

这可能与此类似的问题： [undefined uploads using django cms cmsplugin_filer_file and cmsplugin_filer_image](https://stackoverflow.com/questions/9885312/undefined-uploads-using-django-cms-cmsplugin-filer-file-and-cmsplugin-filer-imag)

我理解了这个问题，但我不知道如何解决...我试图手动创建目录，但它不起作用。

如果我检查“未定义”缩略图窗口，控制台中有两个错误：

```
Failed to load resource: the server responded with a status of 500 (INTERNAL SERVER ERROR) 
Failed to load resource: the server responded with a status of 404 (NOT FOUND) 
```

请问有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:01:47.660

在我的情况下，问题在此之后消失：在 settings.py 中：

```
USE_TZ = False 
```

原因：easy-thumbnails 1.0.3 中的一个错误

# iphone - facebook 类型的左滑条布局应该出现在所有视图控制器中

> ID：14581643
> 
> 赞同：3
> 
> 时间：2013-01-29T11:16:26.013
> 
> 标签：iphone, objective-c, xcode, facebook

我在 iPhone 应用程序的第一个视图中实现了 Facebook 类型的左滑条布局。现在，我想在应用程序中的所有视图控制器（屏幕）中实现这一点，这意味着无论视图如何，单击所有视图顶部的菜单按钮时左滑动条都应该出现。

我的应用程序包含 25-30 个视图控制器，我的滑动条布局应该出现在所有视图中。

任何人都可以建议，我如何在所有视图中包含上面的 FB 布局

提前致谢

拉姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:31:05.047

简单，您已经实现`FB layout`并正在工作的一个视图控制器。使其成为`UIViewController`. 至于其余的所有 ViewController，从您刚刚创建的 MasterClass 继承它们。这样做会使滑动手势对所有 30 个视图控制器都可用。

**编辑**

让我们看看，我们有 UIViewController，现在首先你创建一个 UIViewController 的子类：比如 FBViewController ..在这个 FBViewController 中你实现 FBLayout 以便滑动和所有工作..在它上面 ..首先使用这个 FBViewController 测试你的应用程序作为 rootViewController 并检查所有功能。一旦一切正常，继续发展。我的意思是这个。

假设您正在创建一个选项卡式应用程序，其中所有三个选项卡都应该具有相同的 FBLayout 样式。然后执行这些步骤。

1.  创建 FBViewController，它继承自 UIViewController（使用 UIViewController 子类模板，还检查生成 XIB 按钮）也有一个 XIB FBViewController.XIB（在其中完全实现 FBLayout。这将是您的基类）

2.  然后从 UIViewController 子类模板再次创建另外三个 ViewController 类（FirstViewController、SecondViewController、ThirdViewController），但是对于这三个不要检查生成 XIB 按钮。这三个将使用基类 FBViewController 的 XIB（如果您想知道如何，请转到第 3 步 :)）

3.  转到您创建的 FirstViewController 类的头文件，在那里您可以看到`@interface FirstViewController: UIViewController`将其替换为`@interface FirstViewController: FBViewController`，但在将 FBViewController.h 导入头文件之前。对其他两个类重复相同的操作 - SecondViewController、ThirdViewController。由于这三个将继承自 FBViewController。在他们`viewDidLoad` `[super viewDidLoad]`将加载 FBViewController 并生成视图。之后`[super viewDidLoad];`你可以实现你自己的方法。

4.  在这三个类中只需更改`initWithNibName`方法来更改标签栏名称和标题。

5.  在 appDelegate 中转到`didFinishLaunching`方法并将这三个视图控制器放在一个中`tabBarController`，将其设置`tabBarController`为 rootViewController。

我们完成了。如果你`FBViewController`的工作正常。您将看到所有三个类的行为方式相同。感谢传承的力量。

干杯，玩一点，玩得开心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T10:30:50.647

我有同样的问题。我使用的是 facebook 风格的菜单，并且在所有视图控制器中都需要它。

您可以使用容器控制器。容器控制器可以具有我在 nib 中定义的基本布局，其中包含导航栏和用于切换菜单的栏按钮项，然后添加子视图控制器并根据需要删除它们。这样，您可以将所需的任何视图控制器扔给容器控制器，它会显示它。

您还可以添加手势控制以轻松滑动打开/关闭菜单。

您必须自己制作 Container 控制器，这不是标准的。我认为这是比继承更好的解决方案，因为如果您使用继承，则无法制作例如 UITableViewController，您的所有控制器都将属于您的主类的类型。当然，无论如何你都可以通过委托来解决这个问题。

听起来可能有点棘手，但请参阅我使用的本教程：http: [//www.cocoanetics.com/2012/04/ contains-viewcontrollers/](http://www.cocoanetics.com/2012/04/containing-viewcontrollers/)

其实没那么难。

编辑：您也可以使用 UINavigationController 。只需将基本视图控制器设置为您要显示的视图控制器，您就可以通过覆盖默认方法来防止它将后退按钮等添加到导航栏。将 UINavigationController 设为`rootNavigationController`. 可能更简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T15:20:13.293

我强烈建议使用为您处理所有边缘情况的开源解决方案 - 它是最简单、最强大和最可维护的（因为社区会为您提供最新信息）。[ViewDeck](https://github.com/Inferis/ViewDeck)似乎是最受欢迎的解决方案，尽管我在[PPRevealSideViewController上也取得了成功](https://github.com/ipup/PPRevealSideViewController). 它们都提供了一个非常健壮的实现，需要很长时间才能完成（例如，您可以选择在导航栏甚至内容区域上启用滑动以打开菜单）。此外，它们将滑动逻辑和显示的菜单（可以是您喜欢的任何视图控制器，但很可能是表格视图控制器）与您的其他视图控制器分开。这样，任何视图控制器都可以有一个侧面菜单，而无需复制任何代码 - 关注点分离很棒:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T13:15:23.807

您可以为 SideView 类创建一个 SharedInstance。我正在为 iAD 做同样的事情来展示整个应用程序。请看 iAdSuite 的链接，其中 BannerViewController 是 SharedInstance 所以它们很容易用于所有 View Controller

[http://developer.apple.com/library/ios/#samplecode/iAdSuite/Listings/TabbedBanner_TabbedBanner_BannerViewController_m.html](http://developer.apple.com/library/ios/#samplecode/iAdSuite/Listings/TabbedBanner_TabbedBanner_BannerViewController_m.html)

# php - 使用 Doctrine 的 Symfony2 提交表单 - MappingException

> ID：14581656
> 
> 赞同：0
> 
> 时间：2013-01-29T11:17:22.783
> 
> 标签：php, symfony, pdo, doctrine-orm, propel

我使用 Propel 创建了一个表单，它可以很好地提交并验证。当我尝试提交 $user 对象时出现问题 - 我得到一个 MappingException。我真的不知道这是从哪里来的，因为以前对 $user 的引用似乎很好。

请注意，注释行取自某些表单指南，但在数据库中插入了一个空行（尽管 $user 的 var_dump 显示它包含所有信息。如果我能将其用作选择。

这是我的代码：

```
namespace LifeMirror\APIBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;
use LifeMirror\APIBundle\Model\Users;
use LifeMirror\APIBundle\Model\UsersQuery;
use LifeMirror\APIBundle\Form\Type\UsersType;
use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;
use FOS\RestBundle\View\View;

class RegisterController extends Controller
{
    public function indexAction()
    {
        return $this->processForm(new Users());
    }

    private function processForm(Users $user)
    {
        $statusCode = $user->isNew() ? 201 : 204;
        $em = $this->getDoctrine()->getEntityManager();
        $form = $this->createForm(new UsersType(), $user);
        //die(phpinfo());
        $form->bind(array(
            "firstName" => $this->getRequest()->request->get('firstName'),
            "lastName" => $this->getRequest()->request->get('lastName'),
            "email" => $this->getRequest()->request->get('email'),
            "password" => $this->getRequest()->request->get('password'),
            "dob" => array(
                "year" => json_decode($this->getRequest()->request->get('dob'))->year,
                "month" => json_decode($this->getRequest()->request->get('dob'))->month,
                "day" => json_decode($this->getRequest()->request->get('dob'))->day
            ),
            "location" => $this->getRequest()->request->get('location'),
            "tutorialWatched" => $this->getRequest()->request->get('tutorialWatched'),
            "challengeEmails" => $this->getRequest()->request->get('challengeEmails'),
            "mailingList" => $this->getRequest()->request->get('mailingList')
        ));

        if ($form->isValid()) {
            //$user->save();
            $em->persist($user);
            $em->flush();

            $response = new Response();
            $response->setStatusCode($statusCode);
            return $response;
        }
        $view = View::create($form, 400);
        $view->setFormat('json');
        return $view;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:34:39.820

你确定你的字段名称是`firstName`，`lastName`等等？通常，Propel 以大写的 CamelCase 生成字段名称，因此我希望看到`FirstName`and `LastName`。如果字段名称不完全匹配，则 Propel 将不会分配值，从而导致空的`INSERT`. 您可以像这样转储`User`字段名称列表：

```
var_dump(BaseUserPeer::getFieldNames()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:48:49.337

看来您尝试使用教义来持久化 Propel 对象。

这肯定不是你想要的，即使它在理论上是可能的，如果你为`Model\Users`类添加一些学说映射。

您肯定想要的是保持`$user`'s 状态：

```
if ($form->isValid()) {
    $user->save(); // propel object implements Active Record pattern, they can save themselves, no doctrine entityManager needed.
} 
```

# angularjs - ng-repeat 中最后一个元素的不同类

> ID：14581658
> 
> 赞同：159
> 
> 时间：2013-01-29T11:17:26.120
> 
> 标签：angularjs

我正在使用类似这样的 ng-repeat 创建一个列表

```
 <div ng-repeat="file in files">
   {{file.name}}
   </div> 
```

但仅对于最后一个元素，我希望在其中包含一个类 ( `<div class="last">test</div>`)。我如何使用 ng-repeat 来实现这一点？

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2013-01-29T11:24:27.597

您可以在指令中使用`$last`变量。`ng-repeat`看看[doc](http://docs.angularjs.org/api/ng.directive%3angRepeat)。

你可以这样做：

```
 <div ng-repeat="file in files" ng-class="computeCssClass($last)">
 {{file.name}}
 </div> 
```

where`computeCssClass`函数`controller`接受唯一参数并返回`'last'`or `null`。

或者

```
 <div ng-repeat="file in files" ng-class="{'last':$last}">
  {{file.name}}
  </div> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-09-17T04:51:12.537

使用 CSS 更容易和更清洁。

HTML：

```
<div ng-repeat="file in files" class="file">
  {{ file.name }}
</div> 
```

CSS：

```
.file:last-of-type {
    color: #800;
} 
```

[目前`:last-of-type`98% 的浏览器都支持选择器](http://caniuse.com/#search=last-of-type)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-09-18T14:08:13.047

详细说明 Paul 的回答，这是与模板代码相吻合的控制器逻辑。

```
// HTML
<div class="row" ng-repeat="thing in things">
  <div class="well" ng-class="isLast($last)">
      <p>Data-driven {{thing.name}}</p>
  </div>
</div>

// CSS
.last { /* Desired Styles */}

// Controller
$scope.isLast = function(check) {
    var cssClass = check ? 'last' : null;
    return cssClass;
}; 
```

还值得注意的是，如果可能，您确实应该避免使用此解决方案。从本质上讲，CSS 可以处理这个问题，制作基于 JS 的解决方案是不必要的，而且性能不佳。不幸的是，如果您需要支持 IE8>，此解决方案将不适合您（[请参阅 MDN 支持文档](https://developer.mozilla.org/en-US/docs/Web/CSS/:last-of-type)）。

**纯 CSS 解决方案**

```
// Using the above example syntax
.row:last-of-type { /* Desired Style */ } 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-06-18T18:50:45.300

```
<div ng-repeat="file in files" ng-class="!$last ? 'class-for-last' : 'other'">
   {{file.name}}
</div> 
```

这对我行得通！祝你好运！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-10T20:33:27.687

您可以使用`limitTo`过滤器`-1`来查找最后一个元素

***示例***：

```
<div ng-repeat="friend in friends | limitTo: -1">
    {{friend.name}}
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-29T03:36:54.803

Fabian Perez 给出的答案对我有用，但有一点改变

编辑后的 ​​html 在这里：

`<div ng-repeat="file in files" ng-class="!$last ? 'other' : 'class-for-last'"> {{file.name}} </div>`

# c# - 如何每 X 秒从两个全屏图片框中获取样本静止图像？

> ID：14581659
> 
> 赞同：0
> 
> 时间：2013-01-29T11:17:27.960
> 
> 标签：c#

编码：

```
this.TopMost = true;
this.WindowState = System.Windows.Forms.FormWindowState.Maximized;
this.splitContainer1.SplitterDistance = (this.ClientSize.Width -
    this.splitContainer1.SplitterWidth) / 2;
pictureBox1.Image = Image.FromFile(@"d:\gifs\RadarGifAnimatoion.gif");//pb1.Image;
pictureBox2.Image = Image.FromFile(@"d:\gifs\SatelliteGifAnimatoion.gif");//pb2.Image;
timer1.Interval = animationSpeed;
timer1.Enabled = true; 
```

我有一个计时器滴答事件：

```
private void timer1_Tick(object sender, EventArgs e)
{

} 
```

在此示例中，计时器间隔为 80 毫秒。因此，在 timer1 滴答事件中，我希望每 80 毫秒拍摄两个图片框的快照或屏幕截图，并将这张照片保存到硬盘上。

所以最后我将在硬盘上保存两个图片框的 5 个图像。因此，如果我在硬盘上编辑 5 的每个图像，我将看到两个图片框图像。

如何在 timer1 滴答事件中做到这一点？

![在此处输入图像描述](../Images/93ee9bf5f4d4660715843635646d638e.png)

timer1 滴答事件中的更新代码：

```
private void timer1_Tick(object sender, EventArgs e)
        {
            using (var still = new Bitmap(this.Width, this.Height))
            {
                this.DrawToBitmap(still, new Rectangle(new Point(0, 0), still.Size));
                still.Save(String.Format(@"d:\GifForAnimation\still_{0}.gif", sequence++), System.Drawing.Imaging.ImageFormat.Gif);
                if (sequence == 5)
                {
                    timer1.Stop();
                }
            }

        } 
```

我将构造函数中的 timer1 间隔设置为与创建动画时相同的速度。动画速度为 80 毫秒，因此 timer1 也设置为 80 毫秒。

并且仍然不是每 80 毫秒拍摄一张图片框的图像，而是拍摄或保存相同的图像。5张相同的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:37:06.963

要创建屏幕截图，您可以尝试以下代码：

```
int sequence = 0;

private void timer1_Tick(object sender, EventArgs e)
{
    using(var still = new Bitmap(form.Width, form.Height))
    {
        form.DrawToBitmap(still, new Rectangle(new Point(0, 0), still.Size));
        still.Save(String.Format(@"c:\still_{0}.gif", sequence++), ImageFormat.Gif);
    }
} 
```

您可以引用包含两个图像的任何容器，而不是表单。

**编辑**

此屏幕截图不包含开始菜单，仅包含两个图像控件的容器。

**编辑2**

像这样将 UI 渲染为位图可能不会为 GIF 设置动画，因为位图不知道动画。您还将进入竞争条件：更新 GIF 并在特定时间段内以正确的顺序制作屏幕截图。

我会使用视频捕捉软件来录制视频并选择我需要的帧。这比尝试解决这个问题和潜在的竞争条件要容易得多

# c# - c#.net 32 位应用程序不适用于 64 位操作系统

> ID：14581660
> 
> 赞同：1
> 
> 时间：2013-01-29T11:17:27.457
> 
> 标签：c#, .net, 64-bit, installation, setup-project

我是 .NET 应用程序的新手。

我已经使用 Visual Studio 2008 在 32 位操作系统上开发了该应用程序。

该应用程序需要 Microsoft.Interop 服务和 PDF 服务才能打开 PDF 文件和 MS Office 文件。

它还需要 SQL Express 来进行数据库操作。

该应用程序在 32 位操作系统上运行良好。

然后我为 64 位操作系统创建了设置，我在 Visual Studio 2010 中添加了一个带有向导的新设置项目，并选择了主输出和本地化资源。

但它不包括资源文件夹到应用程序文件夹。

我将目标机器设置为 64x 并构建项目，还在构建之前为项目提供先决条件，即 Windows Installer 3.1 和 .net 框架 4.0，我在应用程序中使用了 .net 框架 3.5。

然后我运行了安装程序，它成功执行了。但是当我尝试运行应用程序时，它给出了消息“应用程序已停止工作。从网络上寻找解决方案......”然后它关闭了。

然后我看到没有资源文件夹，所以我只是将资源文件夹复制到安装它的应用程序中。然后应用程序运行良好。

所以我再次创建了设置，但这次我也将 Resources 文件夹提供给了应用程序文件夹。构建了安装程序并尝试运行应用程序，但在“应用程序已停止工作...”之前向我提示了相同的消息，因此我查找了资源文件夹和那里的所有必需文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:26:50.933

在您的情况下，创建单独的 64 位版本毫无意义。

您依赖于 32 位组件；因此，您的所有^(1 个)程序集都**必须**编译到**x86 目标平台**并使用 32 位 MSI 进行安装。

如果您收到“应用程序已停止工作...”错误，这表明发生了您的进程尚未处理的异常。您可以从事件日志中获取堆栈跟踪。

[¹实际上，至少入口程序集必须具有 x86 目标平台，所有其他程序集必须具有 x86 或 AnyCPU 目标平台。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:29:42.233

检查您是否已在项目中将平台目标更改为 x64 或 AnyCPU -> 构建属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:27:28.250

嘿朋友谢谢你回答我的问题。最后做了很多事情我发现它在创建设置时将sql数据库转换为2008。我正在客户端机器上设置 sql express 2005。然后我将 sql server 2005 更改为 sql express 2008 并运行设置。然后我发现第一次 exe 需要所有权限才能转换所以我尝试了设置以管理员身份运行并宾果游戏设置适用于 2 台不同的电脑。唯一需要的是第一次我需要运行应用程序作为管理员。谢谢帮助我

# security - 通过网络加密 Amazon S3 URL 以保护数据访问

> ID：14581663
> 
> 赞同：4
> 
> 时间：2013-01-29T11:17:57.000
> 
> 标签：security, encryption, https, amazon-s3, man-in-the-middle

我想在 Amazon S3 存储桶上托管受版权保护的数据（以提供比我的服务器可以处理的更大的可用带宽）并为大量授权客户提供对这些受版权保护数据的访问。

我的问题是：

*   我在服务器端为这些资源创建签名过期 HTTPS URL
*   这些 URL 通过 HTTPS 连接发送到客户端
*   当客户端使用这些 URL 下载内容时，任何中间人都可以清楚地看到该 URL

具体来说，URL 是通过 Ruby On Rails 服务器使用雾 gem 创建的。我所说的移动客户端是 iOS 设备。我用于测试的代理是 mitmproxy。

我生成的 URL 如下所示：

> [https://mybucket.s3.amazonaws.com/myFileKey?AWSAccessKeyId=AAA&Signature=BBB&Expires=CCC](https://mybucket.s3.amazonaws.com/myFileKey?AWSAccessKeyId=AAA&Signature=BBB&Expires=CCC)

我不是网络或安全专家，但我发现资源表明 HTTPS 连接没有任何内容可以清除（例如，参见[HTTPS 标头是否加密？](https://stackoverflow.com/questions/187655/are-https-headers-encrypted)）。是不是我的测试配置错误导致了这个清晰的 URL？关于这里可能出了什么问题的任何提示？我真的有可能阻止 S3 URL 通过网络清除吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:37:14.913

因此，首先，当通过 SSL 发送请求时，所有参数都被加密。如果您要查看通过普通代理的流量，您将无法读取它们。

但是，许多代理允许通过创建虚拟证书来拦截 SSL 数据。这正是*mitmproxy*所做的。您很可能已启用此功能但没有意识到（尽管您必须安装客户端证书才能执行此操作）。

最重要的是，您的 AWS URL 很容易被想要对您的应用程序进行逆向工程的人截获，无论是通过代理还是通过利用二进制文件本身。然而，这本身并不是一件“坏事”：亚马逊自己知道会发生这种情况，这就是为什么他们不直接在 URL 本身中发送密钥，而是使用签名。

我认为这对您来说不是一个大问题：毕竟，您正在创建过期的 URL，因此即使有人*可以*通过代理获取它们，他们也只能访问该 URL它是有效的。要在到期后访问您的资源，需要直接访问您的密钥。现在，事实证明这并非*不可能*（因为您可能已经将其硬编码到二进制文件中），但它的难度足以让大多数用户不会为之烦恼。

我鼓励您在安全和版权保护方面保持现实：当您拥有客户端本机代码时，问题不在于它*是否*被破坏，而*在于*.

# ajax - jquerymobile中ajax调用中的绝对/相对地址

> ID：14581665
> 
> 赞同：0
> 
> 时间：2013-01-29T11:18:08.857
> 
> 标签：ajax, jquery-mobile

以下代码在 Safari 和 Chrome 中的 iPad 和 iPhone (4,5) 中运行良好。相反，ajax 调用在 Android 设备和桌面浏览器中不起作用（直接运行到 onError 函数）。

当我将绝对 URL 交换为相对 URL 时，这两组的成功/失败结果是相反的。

如何解决这个问题（我正在运行 jquerymobile 1.3.0 beta）？谢谢/布鲁斯

```
$(document).ready(function() {
$("#submit").click(function(){
  var formData = $("#loginf").serialize();
  $.ajax({
    type: "POST",
    url: "http://mydomain.org/m2/scripts/site/bpg_process.asp?id=lg",
    cache: false,
    data: formData,
    dataType: 'json',
    success: onSuccess,
    error: onError
  });
  return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:31:10.303

你知道不允许跨域 Ajax 调用吗？您的问题可能与您发出请求的 URL**有关**，而不是与您正在测试的浏览器有关。阅读此内容了解更多详细信息：[http ://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

对您来说重要的是该策略排除了不同的子域。前任。如果您从[http://www.mydomain.org](http://www.mydomain.org)向[http://mydomain.org发送请求，](http://mydomain.org) **它将失败**，反之亦然。

在您的情况下，我所做的通常是使用`/m2/scripts/site/bpg_process.asp?id=lg`不带协议和主机但带有起始“/”的完整 URL“”，以便可以从 URL 树中的任何位置引用它。

您正在使用并且“不起作用”的“相对 URL”是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:56:30.350

就像达玛提到的那样。“不允许跨域 Ajax 调用”。

改用绝对“本地”路径。

链接引用开头的斜杠“/”指向文档根目录。

如果需要引用外部域，使用ajax调用本地.asp文档，为你调用外部页面，返回你想要的json数据。

我不确定这是在 asp 中，但在 php 中，curl 有效。

# session - 使用 TomEE 的 CDI-SessionScoped 登录示例

> ID：14581666
> 
> 赞同：1
> 
> 时间：2013-01-29T11:18:12.477
> 
> 标签：session, jsf-2, java-ee-6, cdi, apache-tomee

我目前正在与 TomEE、JSF 和 CDI（我认为）进行斗争。

有没有使用 TomEE 1.5.1（或当前快照）具有“@javax.enterprise.context.SessionScoped”注释的示例？

我不想使用 @ManagedBean 或 javax.faces 中的其他东西，只是普通的 CDI。

我的问题是：当我更改一些 @SessionScoped 用户会话实例时，我最终会得到一个新的 sessionID（会话固定问题？！？）。

我的用例：我想在一个页面上登录并有可能从任何地方登录，用户来自 JPA 层，我不知道是否必须选择该范围。

还有其他方法可以存档吗？！

我已经得到了这个页面，但没有帮助我：

[http://openejb.979440.n4.nabble.com/Guest-user-td4655258i20.html](http://openejb.979440.n4.nabble.com/Guest-user-td4655258i20.html)

[https://issues.apache.org/jira/browse/TOMEE-734](https://issues.apache.org/jira/browse/TOMEE-734)

[https://issues.apache.org/jira/browse/TOMEE-745](https://issues.apache.org/jira/browse/TOMEE-745)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:24:15.620

很长时间后，我创建了自己的“概念验证”-使用 cdi-beans 的示例：

[https://github.com/FibreFoX/cdi-sessionscoped-login](https://github.com/FibreFoX/cdi-sessionscoped-login)

我希望它会帮助其他人，就像它在开发那件很棒的东西时帮助了我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:11:10.797

我使用 TomEE，但我不明白你的问题。您使用网络配置文件吗？

您是否正确设置了 beans.xml？

您链接的错误可能与您的设置无关。不可能说，因为我没有什么要说的。链接一个示例项目，我可以尝试或至少粘贴您的 bean 并告诉您是否放置了 beans.xml

# google-oauth - 403 Forbidden when using access token from OAuth2ServiceAccount - 必须将错误站点添加到您的帐户并进行验证

> ID：14581668
> 
> 赞同：0
> 
> 时间：2013-01-29T11:18:32.490
> 
> 标签：google-oauth, google-authentication, google-authenticator

403 Forbidden when using access token from OAuth2ServiceAccount My request is inserting sitemap.xml to webmaster tool here the response from google

```
HTTP/1.1 403 Forbidden
Content-length: 48
X-xss-protection: 1; mode=block
X-content-type-options: nosniff
X-google-cache-control: remote-fetch
-content-encoding: gzip
Server: GSE
Reason: Forbidden
Via: HTTP/1.1 GWA
Cache-control: private, max-age=0
Date: Tue, 29 Jan 2013 11:03:08 GMT
X-frame-options: SAMEORIGIN
Content-type: text/html; charset=UTF-8
Expires: Tue, 29 Jan 2013 11:03:08 GMT
Site must be added to your account and verified. 
```

# wpf - 在 WPF XAML MVVM 中编码多个视图模型

> ID：14581669
> 
> 赞同：0
> 
> 时间：2013-01-29T11:18:41.130
> 
> 标签：wpf, data-binding, mvvm

对于我的项目，我正在尝试创建一个连接到工具集并将信号推送到其中的信号通道生成器。

我遇到的问题是，我以文本框代码位于代码隐藏文件中的形式获得了项目，并且我希望它们位于 xaml 中。

我有一个变量来控制可以更改的通道数（视图模型）。它能够在窗口上创建同一视图模型的多个实例。这允许在工具内选择与之通信的不同目标，并能够将信号泵送到每个目标。

这是当前在 XAML 中的代码：

```
 <Window x:Class="SigGeneratorMVVM.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:SigGeneratorMVVM"
        Title="Signal Generator" Height="370" Width="734" >
    <StackPanel Name="MyWindow">
        <!--<TextBox Height="23" HorizontalAlignment="Left" Margin="91,20,0,0" Name="CurrentValDisplay" VerticalAlignment="Top" Width="120" />-->
    </StackPanel>
</Window> 
```

这是 mainwindow.cs 的代码

```
public partial class MainWindow : Window
    {
        List<ViewModel> gViewModels;

        int gNumChannels = 1;
        private System.Threading.Timer mViewUpdateTimer;
        private TimerCallback mViewTimerCallback;

        private UtilityParticipant mParticipant;

    public MainWindow()
    {
        InitializeComponent();

        // Connect as UtilityParticipant            
        ConnectMesh();

        gViewModels = new List<ViewModel>();           

        for (int i = 0; i < gNumChannels; i++)
        {
            gViewModels.Add(new ViewModel(mParticipant));

            TextBlock CurrentValueText = new TextBlock();
            CurrentValueText.Text = "Current Value:";
            CurrentValueText.Margin = new Thickness(5);

            TextBox CurrentValueBox = new TextBox();
            CurrentValueBox.Width = 120;
            CurrentValueBox.Name = "CurrentValDisplay" + i.ToString();
            CurrentValueBox.HorizontalAlignment =                                                System.Windows.HorizontalAlignment.Left;
            CurrentValueBox.Margin = new Thickness(10);
            CurrentValueBox.SetBinding(TextBox.TextProperty, "CurrentValue");

            //CurrentValDisplay.Name = "CurrentValDisplay" + i.ToString();
            //CurrentValDisplay.SetBinding(TextBox.TextProperty, "CurrentValue");

            TextBlock CurrentFrequencyText = new TextBlock();
            CurrentFrequencyText.Text = "Frequency:";
            CurrentFrequencyText.Margin = new Thickness(5);

            TextBox CurrentFrequencyBox = new TextBox();
            CurrentFrequencyBox.Width = 120;
            CurrentFrequencyBox.Name = "CurrentFrequencyDisplay" + i.ToString();
            CurrentFrequencyBox.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
            CurrentFrequencyBox.Margin = new Thickness(10);
            CurrentFrequencyBox.SetBinding(TextBox.TextProperty, "Frequency");

            Slider FrequencySlider = new Slider();
            FrequencySlider.Width = 200;
            FrequencySlider.Name = "FrequencySet" + i.ToString();
            FrequencySlider.Value= 10;
            FrequencySlider.Maximum = 10;
            FrequencySlider.Minimum = 0.1;
            FrequencySlider.SetBinding(Slider.ValueProperty, "Frequency");                    

            //Create a new stackpanel
            StackPanel sp = new StackPanel();
            sp.Orientation = Orientation.Vertical;

            //Set DataContext of the StackPanel
            sp.DataContext = gViewModels[i];

            //Add controls created above to the StackPanel
            sp.Children.Add(CurrentValueText);
            sp.Children.Add(CurrentValueBox);
            sp.Children.Add(CurrentFrequencyText);
            sp.Children.Add(CurrentFrequencyBox);
            sp.Children.Add(FrequencySlider);

            //Add the StackPanel to the window

            MyWindow.Children.Add(sp);

        }

        mViewTimerCallback = this.UpdateView;
        mViewUpdateTimer = new System.Threading.Timer(mViewTimerCallback, null,     100, 20);
    } 
```

**更新：**我已经有一个 ViewModel，它为每个属性（现在是 CurrentValue 和 Frequency）设置了方法，将 DataTemplate 和 ItemsControl 绑定到它而不是创建一个新的模型类就足够了吗？

```
 private SigGenChannel mSigGenChannel;

    //Constructor
    public ViewModel(UtilityParticipant aParticipant)
    {
        mSigGenChannel = new SigGenChannel(aParticipant);
    }

    public string CurrentValue
    {
        get
        {
            return mSigGenChannel.CurrentValue.ToString();
        }

        set
        {
            mSigGenChannel.CurrentValue = double.Parse(value);
            RaisePropertyChanged("CurrentValue");
        }
    }

    public double Frequency
    {
        get
        {
            return mSigGenChannel.Frequency;
        }

        set
        {
            mSigGenChannel.Frequency = value;
            RaisePropertyChanged("Frequency");
        }
    }

    public double Amplitude
    {
        get
        {
            return mSigGenChannel.Amplitude;
        }

        set
        {
            mSigGenChannel.Amplitude = value;
            RaisePropertyChanged("Amplitude");
        }
    }

    public void RefreshValue()
    {
        //A bit of a cheat, but we provide a means to poke the Viewmodel
        //And raise a property change event
        RaisePropertyChanged("CurrentValue");
    } 
```

这也是 SigChannel 模型：

```
 class SigGenChannel
{
    #region Private members
    private UtilityParticipant mParticipant;
    private double mCurrentValue;
    private double mFrequency;
    private double mAmplitude;
    private double mTarget;
    private double mOffset;
    private double mCurrentStepTime;
    private DateTime mStartTime;
    private System.Threading.Timer mTimer;
    private TimerCallback mTCallback;
    private int mUpdateInterval = 10;
    #endregion

    #region Public members
    public double CurrentValue
    {
        get
        {
            return mCurrentValue;
        }
        set
        {
            mCurrentValue = value;
        }
    }        

    public double Frequency
    {
        get
        {
            return mFrequency;
        }

        set
        {
            mFrequency = value;
        }
    }

    public double Amplitude
    {
        get
        {
            return mAmplitude;
        }
        set
        {
            mAmplitude = value;
        }
    }

    public double Target
    {
        get
        {
            return mTarget;
        }
        set
        {
            mTarget = value;
        }
    }
    #endregion

    //Constructor
    public SigGenChannel(UtilityParticipant aParticipant)
    {
        mParticipant = aParticipant;
        mCurrentValue = 10;
        mFrequency = 200;
        mAmplitude = 100;
        mOffset = 0;
        mCurrentStepTime = 0;
        mStartTime = DateTime.Now;
        mTCallback = this.Update;
        mTimer = new System.Threading.Timer(mTCallback, null, 500, mUpdateInterval);
        //Array enumData = Enum.GetNames;
        //RefreshItems();
        //Temp Code....!
        Collection lCollection = mParticipant.GetCollection("DefaultNodeName.NodeStats");
        lCollection.Publish();
    }

    private void Update(object StateInfo)
    {
        TimeSpan span = DateTime.Now - mStartTime;
        mCurrentStepTime = span.TotalMilliseconds / (double)1000;

        mCurrentValue = (Math.Sin(mCurrentStepTime * (mFrequency * 2 * Math.PI)) * mAmplitude / 2) + mOffset;

        //Temp Code...!
        Collection lCollection = mParticipant.GetCollection("DefaultNodeName.NodeStats");
        Parameter lParameter = lCollection.GetParameter("CPUPercent");
        lParameter.SetValue(mCurrentValue);
        lCollection.Send(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:39:51.280

`DataTemplate`通常的想法是为特定类型创建一个，在您的情况下，它是为 ViewModel 创建的。

为您创建一个 DataTemplate `ViewModel`，例如：

```
<DataTemplate DataType={x:Type local:ViewModel}>
    <TextBox Text="{Binding ViewModelTextProperty}" />
</DataTemplate> 
```

而且在您的 XAML 中，您还必须绑定您的 ViewModel 列表

```
<ItemsControl ItemsSource="{Binding myListOfViewModels}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:41:00.913

当前代码的编写方式不遵循 WPF 建议的做法，并且逆流而上使事情变得比当时更难。

代码应该做的是：

**为通道创建（视图）模型类**

例如：

```
class ChannelModel
{
    public int Value { get; set; }
    public int Frequency { get; set; }
} 
```

**使用 a`ItemsControl`而不是 a`StackPanel`**

WPF 执行此类操作的方法是将控件绑定到集合，因此将 替换`StackPanel`为`ItemsControl`.

**绑定`ItemsControl`到`ObservableCollection`模型中的一个**

您的主视图模型应该公开一个`ObservableCollection<ChannelModel>`属性，并且控件应该直接绑定到该属性：

```
<ItemsControl ItemsSource="{Binding CollectionOfChannelModels}"/> 
```

这可确保控件会随着对集合所做的任何更改而自动更新，而无需您执行任何其他操作。

**使用 a`DataTemplate`指定每个模型的渲染方式**

到目前为止，我们已经获得了与您的频道集合保持同步的控件，但我们还需要告诉它应该如何显示每个项目（频道模型）。为此，请将 a 添加`DataTemplate`到 的`Resources`集合中`ItemsControl`：

```
<ItemsControl.Resources>
  <DataTemplate DataType={x:Type local:ChannelModel}>
    <StackPanel Orientation="Horizontal">
      <TextBlock Text="Value" />
      <TextBox Text="{Binding Value}" />
    </StackPanel>
  </DataTemplate>
</ItemsControl.Resources> 
```

# javascript - 使用 jQuery 停止样式 HOVER 行为？

> ID：14581670
> 
> 赞同：2
> 
> 时间：2013-01-29T11:18:43.033
> 
> 标签：javascript, jquery, html, css

我有一个风格的 div。

这种风格

```
 body .d:hover
    {
      background-color:red;
    } 
```

但我希望（如果可能的话）Jquery 将停止这种悬停行为。

我试过了

```
 $(".d").hover(function () { return false;});
 $(".d").mouseenter(function () { return false;}); 
```

没有任何帮助。

有什么帮助吗？

**这是[JSBIN](http://jsbin.com/akunew/31/edit)**（我希望在按下按钮后 - 悬停时不会发生任何事情。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:24:18.113

向您的 CSS 添加新定义：

```
.d.no-hover:hover {
    background-color: black;
} 
```

现在您可以将`no-hover`类添加到不再具有悬停效果的元素中：

```
$(obj).addClass('no-hover'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:34:52.973

可能是这种伎俩：http: [//jsbin.com/akunew/14/edit](http://jsbin.com/akunew/14/edit)

```
<div style="border:solid 1px red;height:100px;width:100px;" class="d"> </div>
<input  type="button" value="stop this hover" onclick="stop()" id="btn"/> 
```

删除类：

```
function stop(){
  $(".d").addClass('e').removeClass('d');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:41:22.727

如果你想不断地停止这种行为，你可以删除样式表规则，根据[W3C wiki](http://www.w3.org/wiki/Dynamic_style_-_manipulating_CSS_with_JavaScript)：

```
function stop(m) {
    $.each(document.styleSheets, function(i, sheet) {
        $.each(sheet.rules, function(i, rule) {
            if (new RegExp(m + "\\s*:hover").test(rule.selectorText)) {
                sheet.deleteRule(i);
            }  // TODO: improve RegExp
        });
    });
}
stop(".d"); 
```

如果您想在不删除的情况下更改状态，可以选择更改`styleSheet.disabled`属性，以防您`:hover`在单独的样式表中设置了规则。

请注意，我不确定这里的兼容性问题，应该另外确定。

**演示：http:** [//jsbin.com/akunew/10/edit](http://jsbin.com/akunew/10/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:27:22.410

当您调用`onclick="stop(this)"`它时，它将`input`成为您的`$(obj)`，而不是您的元素`.d`。

**编辑**没有要删除的javascript解决方案`:hover`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T11:40:09.307

基于你的 JSBIN 例子。下面的代码将起作用

function stop(obj) { $(obj).hover(function () { $(this).css('background-color','white'); return false;}); $(obj).mouseenter(function () { $(this).css('background-color','white'); return false;});

```
 $('body').append('<style>body div.d:hover {background-color:transparent !important}</style>');
} 
```

你已经覆盖 :hover 那个特定元素的 css

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T11:41:18.730

**CSS**

```
.d:hover
{
    background-color:Red;
}
.noClass
{
    background-color:none;
} 
```

**JavaScript**

```
function stop()
{
    $(".d").addClass('noClass').removeClass('d');
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-28T19:00:53.253

我使用了一个技巧——当我将鼠标悬停在一个元素上时（并单击该 HOVERed 元素内的某些内容），然后您可以使用此 javascript 方法来取消该悬停 css：

```
document.getElementById('sarchevi').className='active';
//on mouse move, remove class
(function(){
    var moved = false
    window.onmousemove = function(e)
    { if(!moved){ moved = true;  document.getElementById('sarchevi').className ='a'; } }
})() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-06T11:54:47.467

我知道这个问题已经有四年的历史了，但未来的访客应该了解解决这个特定问题的现代方法。

* * *

您可以使用一个简单的解决方案，该解决方案（在其核心）使用 CSS 属性，并且除 IE < 11 之外的所有浏览器都支持。

```
$('.d').css('pointer-events', 'none'); 
```

您不妨从 Bootstrap 复制这个特定的类：

```
.disabled {
    pointer-events: none;
} 
```

然后通过 jQuery 应用它：

```
$('.d').addClass('disabled'); 
```

但是请记住，此 CSS 属性会阻止元素捕获任何 DOM 事件（例如*hover*，但也可以*单击 click*等）

# java - 从 Android Phonegap 插件访问应用程序布局

> ID：14581686
> 
> 赞同：3
> 
> 时间：2013-01-29T11:19:21.737
> 
> 标签：java, android, cordova, phonegap-plugins

我目前正在编写一个插件，试图将视图添加到我的应用程序的当前 LinearLayout。

虽然我很难从插件中访问线性布局，但如果我在我的主要活动中这样做，我可以很好地添加视图：

```
MyView view = new MyView(this);
root.addView(myView); 
```

但是为了在我的插件中获取根 LinearLayout，我假设：

```
this.cordova.getActivity(); 
```

是我的主要活动，并且一直在尝试将其转换为主要活动的类型并调用我添加的函数，该函数将返回根 LinearLayout 对象，如下所示：

```
MyActivity myAct = (MyActivity)this.cordova.getActivity();

MyView view = new MyView(myAct);
myAct .GetLinearLayout().addView(view); 
```

虽然这似乎不起作用并且我没有收到任何错误或类似的帮助找出原因？

任何人都知道如何访问布局以添加我的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:40:06.307

好的，所以我解决这个问题的方法与我上面试图做的略有不同。

首先投射cordova返回的活动：

```
MyActivity myAct = (MyActivity)this.cordova.getActivity(); 
```

确实有效并返回您的主要活动的实例，所以这不是问题。

最后，我无法弄清楚为什么从主活动向根科尔多瓦布局添加另一个视图有效，但当我在插件中这样做时却没有，所以我所做的是从活动 onCreate() 中创建我的视图然后我将视图类的访问器提供给我的插件并从那里开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T21:50:50.100

完成后布局不再存在`init()`。最后发生的事情`init()`是`setContentView()`用布局调用。当`setContentView()`使用布局调用时，布局会膨胀，并且布局中的各个视图会添加到活动中。

# spring - 拼写表达式 | @CacheEvict | 应用上下文

> ID：14581690
> 
> 赞同：0
> 
> 时间：2013-01-29T11:19:27.280
> 
> 标签：spring, caching, spring-el

我正在使用 Spring 的缓存注释。我想从 applicationContextfile 传递缓存 [@CacheEvict(name="vendorCache")] 的名称，或者可以以任何其他方式配置它。

现在我有两个类 VendorDAo 和 NetworkDao 的场景。

```
public VenderDAO
{
@CacheEvict(name="vendorCache")
public String insert():void
{
    //code to add the record into the table using ibatis
}
}

public NetworkDao
{
@CacheEvict(name="netWorkCache")
public String insert():void
{
    //code to add the record into the table using ibatis
}
} 
```

现在我有更多方法，但唯一的区别是@CacheEvict。有什么方法可以让我在配置文件中声明缓存名称并将其作为属性传递给 bean。

```
<bean id="venderDAO" class="VenderDAO">
<property name="cachename" value="vendorCache"/>
</bean>

<bean id="netWorkDAO" class="VenderDAO">
<property name="cachename" value="netWorkCache"/>
</bean>

[Note: both the beans have the same class name] 
```

并且可以在java文件中使用它或者有任何其他方式。任何指针将不胜感激。

问候

拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:14:33.340

Spring 缓存抽象只能通过您需要缓存的方法上的注释 (`@Cacheable`和) 获得。`@CacheEvict`您不能使用 XML 声明。[27.缓存抽象](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html)

# android - 使用 jquery 查找键盘是可见的

> ID：14581693
> 
> 赞同：1
> 
> 时间：2013-01-29T11:19:29.747
> 
> 标签：android, jquery, cordova

嗨，我开发了响应式的 android phonegap 应用程序。因此，当键盘可见时，我需要在纵向和横向模式下隐藏页脚，而键盘不可见，我需要在两种模式下都显示页脚。我已经尝试过示例，但它不能正常工作。如果我以纵向模式打开应用程序，当键盘不可见时，我无法在横向模式下找到页脚。

这是我的示例代码：

```
var is_keyboard = false;
var is_landscape = false;
var initial_screen_size = window.innerHeight;

/* Android */
window.addEventListener("resize", function() {
is_keyboard = (window.innerHeight < initial_screen_size);
is_landscape = (screen.height < screen.width);
if (is_keyboard) 
{
    $("#footer1").hide();
}
else
{
    $("#footer1").show();
}

}, false); 
```

请指导我。在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:53:27.567

我认为您最好的选择是注册节目并隐藏键盘事件。

```
document.addEventListener("showkeyboard", function() {
    $("#footer1").hide();
}, false);

document.addEventListener("hidekeyboard", function() {
    $("#footer1").show();
}, false); 
```

# list - 显示 blob 列表

> ID：14581698
> 
> 赞同：0
> 
> 时间：2013-01-29T11:19:45.547
> 
> 标签：list, blob

我的数据库中有一些 blob，实际上我可以只重试一个并在 ImageView 中显示它，我想退休几个并给用户选择，就像他只是单击同一个按钮一样 ImageView 更改的图像是我的主类：

有我的主班：

```
package com.example.autretest;
import java.util.List;

    import android.os.Bundle;
    import android.app.Activity;
    import android.graphics.Bitmap;
    import android.graphics.drawable.BitmapDrawable;
    import android.graphics.drawable.Drawable;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.ImageButton;
    import android.widget.ImageView;
    import android.widget.Toast;

    public class MainActivity extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            ImageButton imagebutton=(ImageButton)findViewById(R.id.imageButton1);

            addListenerOnButton();
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }
    public void addListenerOnButton() {

          final ImageView imageview=(ImageView)findViewById(R.id.imageView1);
            final Button button = (Button) findViewById(R.id.button1);
            button.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                     Bitmap bm = null;
                     List<Bitmap> listbitmap=null;
                    SQLiteAdapter mySQLiteAdapter =new SQLiteAdapter(getApplicationContext());
                     mySQLiteAdapter.openToRead();

                     listbitmap=mySQLiteAdapter.queueAllphoto();
                     int location=2;
                     while (location<listbitmap.size()){
                      imageview.setImageBitmap(listbitmap.get(location));
                     }
                     location++;
                     mySQLiteAdapter.close();

                     //Bitmap bmp = BitmapFactory.decodeByteArray(content,0,content.length);

                     //image =  new BitmapDrawable(BitmapFactory.decodeByteArray(content, 0, content.length));

                     Toast.makeText(MainActivity.this,
                    "ImageButton is clicked!", Toast.LENGTH_SHORT).show();

                }

            });

    }

} 
```

那么你就有了 otherclass SqliteAdapter：

```
package com.example.autretest;

import java.sql.Blob;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

public class SQLiteAdapter {

    public static final String MYDATABASE_NAME = "mydatabase";
    public static final String MYDATABASE_TABLE_APP = "ma_table";
    public static final String MYDATABASE_TABLE_photo = "pictures";
    public static final String MYDATABASE_TABLE_plan = "plan";
    public static final int MYDATABASE_VERSION = 1;
    public static final String KEY_CONTENT = "Content";
    public static final String KEY_CONTENT_ID = "Content_PK";
    public static final String KEY_CONTENT_ID_photo = "Content_PK_photo";
    public static final String KEY_CONTENT_ID_plan = "Content_PK_plan";
    public static final String KEY_CONTENT_photo = "Content_photo";
    public static final String KEY_CONTENT_plan = "Content_plan";

    //create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_DATABASE =
            "create table " + MYDATABASE_TABLE_APP + " ("
                    + KEY_CONTENT + " text not null)"+ 
                    "create  table " + MYDATABASE_TABLE_photo + " ("+ KEY_CONTENT_photo + " blob not null)"+" " +
                    "("+  KEY_CONTENT_ID_photo + " INTEGER  not null);" +" ("+  KEY_CONTENT_ID + " INTEGER  not null) "+
                    "create  table " +  MYDATABASE_TABLE_plan + " ("+ KEY_CONTENT_plan + " INTEGER not null)";  

    private SQLiteHelper sqLiteHelper;
    private SQLiteDatabase sqLiteDatabase;

    private Context context;

    int s=0;
    byte[]app_image=null;

    public SQLiteAdapter(Context c){
        context = c;
    }
    @SuppressWarnings("null")
    public void DropDB() {
        SQLiteDatabase db = null;
        //On peut faire ce qu'on veut ici moi j'ai décidé de supprimer la table et de la recréer
        //comme ça lorsque je change la version les id repartent de 0
        db.execSQL("DROP DATABASE " + MYDATABASE_NAME + ";");

    }

    public SQLiteAdapter openToRead() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getReadableDatabase();
        return this; 
    }
    public Bitmap getIcone(){
        String[] columns = new String[]{KEY_CONTENT_photo};
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getReadableDatabase();
        byte[]image_bytes=null;
        Cursor rslt=null;
         rslt=sqLiteDatabase.query(MYDATABASE_TABLE_photo,columns, null, null, null, null, null);
        if(rslt.getCount()!=0){
            rslt.moveToFirst();
            image_bytes=rslt.getBlob(rslt.getColumnIndex(KEY_CONTENT_photo));
            Bitmap bmp=BitmapFactory.decodeByteArray(image_bytes, 0, image_bytes.length);
            return bmp;
        }
        else {
            return null;
        }
    }
    public String queueAll(){
        String[] columns = new String[]{KEY_CONTENT};
        Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE_APP, columns, 
                null, null, null, null, null);
        String result = "";

        int index_CONTENT = cursor.getColumnIndex(KEY_CONTENT);
        for(cursor.moveToFirst(); !(cursor.isAfterLast()); cursor.moveToNext()){
            result = result + cursor.getString(index_CONTENT) + "\n";
        }

        return result;
    }
    public SQLiteAdapter openToWrite() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getWritableDatabase();
        return this; 
    }

    public void close(){
        sqLiteHelper.close();
    }

    public long insert(String content){

        ContentValues contentValues = new ContentValues();
        contentValues.put(KEY_CONTENT, content);
        return sqLiteDatabase.insert(MYDATABASE_TABLE_APP, null, contentValues);
    }
    public long insertphoto(byte[] iconebyte){

        // "create  table " + MYDATABASE_TABLE_APP + " ("+ KEY_CONTENT + " text not null)" + 
        //" ("+  KEY_CONTENT_ID + " INTEGER  not null);"+" ("+ KEY_CONTENT_plan + " INTEGER not null)"+
        // String sql="Insert into MYDATABASE_TABLE_APP_photo(KEY_CONTENT_ID_photo,KEY_CONTENT_ID,KEY_CONTENT_photo) values(?,?,?)";
        //executeSql
        ContentValues contentValues = new ContentValues();
        contentValues.put(KEY_CONTENT_photo, iconebyte);

        return sqLiteDatabase.insert(MYDATABASE_TABLE_photo, null, contentValues);

    }

    public int deleteAll(){
        return sqLiteDatabase.delete(MYDATABASE_TABLE_APP, null, null);
    }

    public int deleteAllphoto(){
        return sqLiteDatabase.delete(MYDATABASE_TABLE_photo, null, null);
    }

    @SuppressWarnings("null")
    public List<Bitmap> queueAllphoto(){
        Bitmap bitmap;
        String[] columns = new String[]{KEY_CONTENT_photo};
        Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE_photo, columns, 
                null, null, null, null, null);
        byte[] result = null; 

        List<Bitmap> listbitmap=null;
        int index_CONTENT = cursor.getColumnIndex(KEY_CONTENT_photo);
        for(cursor.moveToFirst(); !(cursor.isAfterLast()); cursor.moveToNext()){
            result = cursor.getBlob(index_CONTENT) ;

        }

        bitmap=BitmapFactory.decodeByteArray(result , 0, result.length);
        listbitmap.add(bitmap);
        return listbitmap;
    }

    public class SQLiteHelper extends SQLiteOpenHelper {

        public SQLiteHelper(Context context, String name,
                CursorFactory factory, int version) {
            super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {

            //db.execSQL(SCRIPT_CREATE_DATABASE);

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T10:25:34.373

首先要知道的是需要显示的 blob 数量，然后我创建了相同数量的按钮，我只是“setBackgroundRessource”！这是一个示例，但图像不是 blob 而是可绘制的，但想法是相同的，只是您需要将 blob 转换为字节数组

```
 LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                                        LinearLayout.LayoutParams.MATCH_PARENT,
                                        LinearLayout.LayoutParams.WRAP_CONTENT);
                                Button btn = new Button(getBaseContext());
                                btn.setId(k1);
                                final int id_ = btn.getId();
                                LinearLayout linear = (LinearLayout) findViewById(R.id.linearscroll);
                                linear.addView(btn, params);
                                final Button btn1 = ((Button) findViewById(id_)); 
btn1.setBackgroundResource(matable[k1]); 
```

matable 只是我所有可绘制对象的数组

# android - 打开我的Android应用程序时如何设置密码

> ID：14581699
> 
> 赞同：-5
> 
> 时间：2013-01-29T11:19:50.373
> 
> 标签：android

我想要我的 android 应用程序，受密码保护。如何在我的应用程序上设置密码。请在这方面帮助我，您的帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:24:44.950

[在这里](https://stackoverflow.com/questions/12639899/shared-preferences-in-android/12640072#12640072)查看我的帖子。您可以使用 android 的共享偏好来执行此操作。

# php - 一键下载多个excel文件

> ID：14581700
> 
> 赞同：0
> 
> 时间：2013-01-29T11:19:50.570
> 
> 标签：php, sql, postgresql

我有几个 php 文件，其中包含对 postgresql 数据库的不同查询。大约有十六个这样的文件。这些文件中的每一个都根据文件中的查询返回一组不同的数据。查询完成后，即可下载文件，下载为excel文件。我的问题是如何在 php 中触发下载，这样我就可以只有一个链接，点击它后，所有这 16 个文件都会一次下载。我不想在其上下载每个文件。或者更好的是我可以有复选框，然后我选择我想下载的文件。我希望我的问题足够清楚。

例如，我有这个名为 export_a.php 的文件，其中包含此代码

```
<?php require_once('connections/pgconn.php');

function cleanData(&$str)
{
$str = preg_replace("/\t/", "\\t", $str);
$str = preg_replace("/\r?\n/", "\\n", $str);
if(strstr($str, '"')) $str = '"' . str_replace('"', '""', $str) . '"';
}

// filename for download
$filename = "eastafrica_revenue_daily" . date('Ymd') . ".xls";

header("Content-Disposition: attachment; filename=\"$filename\"");
header("Content-Type: application/vnd.ms-excel");

$flag = false;
$result = pg_query("SELECT to_char (a.CALLDATE,'yyyymmdd') as transdate,
    sum(a.alltaxcost::integer) AS revenue,
     COUNT (DISTINCT a.IDENTIFIANT) AS distinct_callers,
a.zoneiddest as country_code,b.country
FROM cdr_data a,  COUNTRY_CODES b
WHERE  a.CALLSUBCLASS = '002'
     AND a.CALLCLASS = '008'
and a.zoneiddest::integer > 0
AND SUBSTR (a.CALLEDNUMBER, 1, 2) NOT IN
('77', '78', '75', '70', '71', '41', '31', '39', '76','79')
and  substr(a.zoneiddest,1,3) in ('254','255','211','257','250')
and trim(a.zoneiddest)  = trim(b.country_code)
GROUP BY to_char (a.CALLDATE,'yyyymmdd') ,a.zoneiddest,b.country
ORDER BY 1") or die('Query failed!');

while(false !== ($row = pg_fetch_assoc($result))) {
if(!$flag) {
  // display field/column names as first row
  echo implode("\t", array_keys($row)) . "\r\n";
  $flag = true;
}
array_walk($row, 'cleanData');
echo implode("\t", array_values($row)) . "\r\n";
}
exit;
?> 
```

然后我有另一个文件说 export_b.php 和另一个查询。当在某个页面上单击链接时，例如进行此查询的 a.php，它将导出到 excel。我的问题是如何在 php 中触发下载，这样我就可以只有一个链接，点击它后，所有这 16 个文件都会一次下载。我不想在其上下载每个文件。或者更好的是我可以有复选框，然后我选择我想下载的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:30:31.077

如果您想下载 Excel 文件，为什么不下载一个包含 16 个工作表（每个数据集一个）的 Excel 文件；

或者将所有文件压缩在一起，然后下载 zip

# c++ - 重复使用相同的代码对列表中对象的不同数据成员执行相同的逻辑

> ID：14581704
> 
> 赞同：1
> 
> 时间：2013-01-29T11:20:05.060
> 
> 标签：c++, code-reuse, reusability

具体来说，我有一个具有多个字符串对象数据成员（NID、customerNumber、studentNumber、fName、lName）的类的对象列表。

我想重用以下代码来搜索与搜索键匹配的节点，无论要查找的数据成员是 NID 还是任何其他类的字符串数据成员。

```
nodePtr = firstPtr;
for(; nodePtr != NULL && nodePtr->str != str; nodePtr = nodePtr->nextPtr);

if(nodePtr != NULL)
    //the nodePtr points to the node that matches the search key
else
    //no node matched the search key 
```

如果是 PHP 代码，我可以使用变量的值作为另一个变量的名称：

```
$node->${$var} 
```

但是在 C++ 中是否有重用代码的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:38:52.390

类似于[`std::find_if`](http://en.cppreference.com/w/cpp/algorithm/find)：

```
template<typename N, typename P>
N* my_find_if(const N* head, P pred)
{
    N* ptr;
    for (ptr = head; ptr != nullptr && !pred(ptr); ptr = ptr->nextPtr)
        ;

    return ptr;
} 
```

可以这样调用：

```
my_find_if(firstPtr,
    [](Node* node){ return node->str == str; }); 
```

[将lambda](http://en.wikipedia.org/wiki/C%2B%2B11#Lambda_functions_and_expressions)更改为您需要的任何表达式。

当然，我宁愿建议您使用[标准容器](http://en.cppreference.com/w/cpp/container)，而不是创建自己的列表。然后你可以改用标准`std::find_if`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T11:43:17.670

最灵活的方法是提供一个谓词作为模板参数：

```
template <typename Pred>
Node * find_if(Node * node, Pred pred) {
    for (; node && !pred(node); node = node->next);
    return node;
} 
```

在 C++11 中，您可以使用 lambda 调用它：

```
if (Node * node = find_if(first, [&](Node * n){return n->NID == nid;})) {
    // node points to the matching node
} else {
    // not found
} 
```

或者，如果你被困在过去的岁月中，一个函数对象：

```
struct CompareNID {
    CompareNID(std::string nid) : nid(nid) {}
    bool operator() {Node * n) {return n->NID == nid;}

    std::string nid;
};

Node * node = find_if(first, CompareNID(nid)); 
```

或者，由于您的所有字段都是字符串，因此您可以使用成员指针来牺牲简洁性的灵活性，给出类似于您的 PHP 示例的内容：

```
Node * find(Node * node, std::string Node::*member, std::string const & value) {
    for (; node && node->*member != value; node = node->next);
    return node;
}

Node * node = find(first, &Node::NID, nid); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:32:26.260

是的，您想将 2 个 lambdas (C++11) 或可运行对象 (C++03) 传递到您的“查找”算法中。

使用 C++03，您可以传入 2 个 boost 函数，一个用于“找到”的情况，一个用于“未找到”的情况。

```
void search( std::string str, 
            boost::function<void()> ifFound, 
           boost::function<void()> ifNotFound )
{
      //search
     if( nodePtr != NULL )
     {
          ifFound();
     }
     else
     {
          ifNotFound();
     }
} 
```

选择要匹配的函数签名，但这就是传递动态函数的方式。

您可以使用`std::function`而不是`boost::function`.

如果您想要灵活的搜索本身，即您要匹配的对象的哪一部分，也可以使用动态谓词。

```
void search( Pred pred// , ifFound, ,ifNotFound )
{
     if( pred( nodePtr ) ) // then it is found
} 
```

如您所见，谓词将采用节点指针并返回真/假。因此，将使用不同的谓词来匹配不同的数据成员。

如果你真的喜欢“可重用代码”的概念，我建议你使用标准库。

如果您的列表很长并且您不断地进行这些搜索，那么手动搜索会很慢，您可以使用 a`boost::multi_index`在各个字段上创建 log-N 时间查找。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:45:42.857

也许您想使用指向成员的指针：

```
typedef string Node::*NodeStringPtr;
NodeStringPtr nodeStrPtr = nullptr;
std::vector<NodeStringPtr> nodeStrings {&Node::NID, &Node::str, &Node::fName};
for (auto& ptr : nodeStrings)
{
  nodePtr = firstPtr;
  for (; nodePtr != NULL && nodePtr->*ptr != str; nodePtr = nodePtr->nextPtr);
  if (nodePtr)
  {
    nodeStrPtr = ptr;
    break;
  }
}

if(nodePtr != NULL)
    //the nodePtr matches the search key, nodeStrPtr matches the element
else
    /* ...*/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T11:47:54.857

另一种方法是使用指向成员的指针（仅当所有成员都属于同一类型时才可能）：

```
struct Item {
    std::string NID,
                customerNumber,
                studentNumber,
                fName,
                lName;
};

typedef std::vector<Item>::iterator nodePtr;

typedef std::string Item::* MemberPtr;

struct List {
    std::vector<Item> list;

    nodePtr search(const std::string& str, MemberPtr mem_ptr)
    {
        // this is the code you want to reuse, I took the liberty and used
        // standard lib's algorithm
        return std::find_if(list.begin(), list.end(),
                            [&](const Item& item){ return str == item.*mem_ptr; });
        // will return list.end() if it doesn't find anything
    }
};

int main()
{
    List lst;
    lst.search("John", &Item::fName);
    lst.search("Doe", &Item::lName);
    lst.search("42", &Item::customerNumber);
} 
```

我认为这是最接近您的 PHP 示例的方法。

# java - ImageJ 和普通 Java

> ID：14581708
> 
> 赞同：0
> 
> 时间：2013-01-29T11:20:09.053
> 
> 标签：java, imagej

嗨，我正在制作一个用于图像处理的 java 应用程序。我正在使用带有图像缓冲区的普通 java。我想使用 imageJ 代码，但我不知道如何将它与我已经编写的代码结合起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:08:05.167

`BufferedImage`您可以使用`ColorProcessor(java.awt.Image)`构造函数轻松创建 ImageJ RGB 图像。

要取回 BufferedImage，您可以使用`createImage()`from`ColorProcessor`或`getBufferedImage()`from方法`ImagePlus`。

这是一个示例 ImageJ 插件，它检索当前图像，将其转换为 BufferedImage，关闭当前图像并从 BufferedImage 打开一个新图像。

```
public class Sample implements PlugIn {

  public void run(String arg) {
    ImagePlus ip = IJ.getImage();
    BufferedImage bi = ip.getBufferedImage();
    ip.close();

    ImagePlus ip2 = new ImagePlus("from BufferedImage", new ColorProcessor(bi) );
    ip2.show();    
  }
} 
```

# magento - 导入 csv (magento)

> ID：14581711
> 
> 赞同：0
> 
> 时间：2013-01-29T11:20:17.753
> 
> 标签：magento, csv, import

我的网站中有一个属性`dealer_country`，它是一个包含所有国家列表的下拉属性。但是，在我的 csv 文件中，该`dealer_country`属性将包含国家代码（2 字母格式）。这种情况下可以进口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:56:24.147

是的。有简单的方法和困难的方法。

如果编程是你的包，那么你可以让你的属性连接到 Magento 国家代码并让它在前端返回国家名称。

编写这样一个理想的解决方案需要一段时间。但是，您可以使用“Magmi”之类的第 3 方导入工具来获取您的产品，而无需先定义您的属性值。

进入后，您可以编辑国家/地区的属性条目，并在第二列中输入要在前端显示的国家/地区名称。例如，对于第一栏中的“GB”，您在第二栏中有“大不列颠及北爱尔兰联合王国”。或者对于“LY”，您可以在第二栏添加“伟大的阿拉伯利比亚人民社会主义民众国”……哎呀！

[http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Main_Page](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Main_Page)

# jquery - 通过ajax加载jquery手风琴

> ID：14581713
> 
> 赞同：1
> 
> 时间：2013-01-29T11:20:24.250
> 
> 标签：jquery, ajax, accordion

我在容器里有一个手风琴：

```
<div id="address_results"></div> 
```

现在我通过**ajax**调用填写**html （手风琴）。**它工作正常，但只能通过第一个**ajax**调用。通过第二次，第三次等调用，手风琴的动画不起作用。

 ****```
// Ajax request
        $(this).submit(function() {
            var postal = $(o.postalDiv).val();

            $.getJSON(o.url,{ action: o.action, id: o.id, postal: postal } , function(json) {
                var result = json.content;
                var addresses = result['addresses'];
                var strXML = result['xml'];

                outputHtml(addresses);

            });
            return false;
        });

        // Ajax request success
        function outputHtml(addresses) {

            $(o.resultsDiv).html(addresses);

            // Generate the accordion
            $(o.resultsDiv).accordion({

                autoHeight: false,
                header:'div.toggler',
                active: false,
                collapsible: true
            }); 
```

当我`div`在填写手风琴之前删除/附加：

```
$('#addresses_results').remove();
$('#reswrapper').append('<div id="address_results"></div>'); 
```

然后它工作正常。但这可能是正确的方法吗？

（对不起，我的英语不是我的母语）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:46:47.943

以下行不起作用，因为通过第一个 ajax 调用，手风琴不存在。

```
$('#addresses_results').accordion('destroy').accordion(); 
```

解决方案是检查手风琴是否已经存在：

```
 if ($(o.resultsDiv).hasClass('ui-accordion')) {
     $(o.resultsDiv).accordion('destroy');
  } 
```

整体解决方案：

```
 (function ($) {

    $.fn.address = function (options) {
        var defaults = {
            url:           '/ajax.php',
            action:        'fmd',
            id:             0,
            resultsDiv:    '#address_results',
            postalDiv:     '#address_postal'
        };
        var o = $.extend(defaults,options);

        // Ajax request
        $(this).submit(function() {
            var postal = $(o.postalDiv).val();

            $.getJSON(o.url,{ action: o.action, id: o.id, postal: postal } , function(json) {
                var result = json.content;
                var addresses = result['addresses'];
                var strXML = result['xml'];

                outputHtml(addresses);

            });
            return false;
        });

        // Ajax request success
        function outputHtml(addresses) {

            $(o.resultsDiv).html(addresses);

            // Check if the accordion already exist. if so destroy it
            if ($(o.resultsDiv).hasClass('ui-accordion')) {
                $(o.resultsDiv).accordion('destroy');
            }

            // Generate the accordion
            $(o.resultsDiv).accordion({
                autoHeight: false,
                header:'div.toggler',
                active: false,
                collapsible: true
            });
        }

    };
})(jQuery); 
```

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:33:08.407

尝试 ：

```
 $('#addresses_results').accordion('destroy').accordion(); 
```****

# android - 无法在钛安卓模拟器中加载应用程序

> ID：14581714
> 
> 赞同：0
> 
> 时间：2013-01-29T11:20:33.800
> 
> 标签：android, sdk, titanium, appcelerator

我在模拟器中运行我的应用程序时遇到了这个问题。当我运行应用程序时，它在控制台中显示此错误：

```
[ERROR]Error reading data file 
```

然后什么也没有发生。不知道可能是什么问题，尝试了很多方法删除所有虚拟 AVD 并一次又一次地清理项目，但无论如何都没有任何解决方案？我正在使用 2.1.1 钛 SDK 和 android V8 (2.2)。

有时这也会在控制台中显示此错误：

```
[ERROR]No building apps, No launcher activity. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:46:33.753

Did the application run before?

Have you tried a clean build or deleting the build directory to perform a full rebuild? You can also have a look into the logcat provided by DDMS to search helpful information.

# elapsedtime - 计算行之间经过的时间

> ID：14581715
> 
> 赞同：0
> 
> 时间：2013-01-29T11:20:34.730
> 
> 标签：elapsedtime

```
 |   uploadedby   |     uploaddate     |
    Gracey Vinas  | 2012-04-20 20:16:00
    Gracey Vinas  | 2012-04-20 20:25:00
    Gracey Vinas  | 2012-04-20 20:35:00
    Gracey Vinas  | 2012-04-20 20:39:00
    Gracey Vinas  | 2012-04-20 22:07:00
    Gracey Vinas  | 2012-04-21 00:04:00
    Gracey Vinas  | 2012-04-21 01:14:00
    Gracey Vinas  | 2012-04-23 17:56:00
    Gracey Vinas  | 2012-04-23 18:06:00
    Gracey Vinas  | 2012-04-23 18:21:00
    Gracey Vinas  | 2012-04-23 19:04:00
    Gracey Vinas  | 2012-04-23 19:11:00
    Gracey Vinas  | 2012-04-23 19:24:00
    Gracey Vinas  | 2012-04-23 20:08:00
    Gracey Vinas  | 2012-04-23 20:22:00
    Gracey Vinas  | 2012-04-23 21:00:00
    Gracey Vinas  | 2012-04-23 22:04:00
    Gracey Vinas  | 2012-04-23 22:17:00
    Gracey Vinas  | 2012-04-23 22:29:00
    Gracey Vinas  | 2012-04-23 23:02:00
    Gracey Vinas  | 2012-04-23 23:48:00
    Gracey Vinas  | 2012-04-24 00:23:00
    Gracey Vinas  | 2012-04-24 01:54:00
    Gracey Vinas  | 2012-04-24 17:13:00
    Gracey Vinas  | 2012-04-24 17:32:00
    Gracey Vinas  | 2012-04-24 17:38:00
    Gracey Vinas  | 2012-04-24 17:45:00
    Gracey Vinas  | 2012-04-24 17:54:00 
```

如何在 msql 中按日期获取每次上传的平均经过时间。例如（2012 年 4 月 20 日每次上传的平均经过时间为（第 1 行和第 2 行的时间差（9 分钟）+第 2 行和第 3 行的时间差（10 分钟）+第 3 行和第 3 行的时间差） 4（4 分钟）+ 第 4 行和第 5 行的时间差（92 分钟）/4 = 平均经过时间为 28.75 分钟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:56:23.070

您没有指定语言，所以有一个 python 解决方案：

```
from re import search
from itertools import groupby
from operator import itemgetter
from datetime import datetime

elapsed = []
averages = []
with open("log.txt","r") as f:
    for line in f:
        date = search("\d{4}-\d{2}-\d{2}",line)
        time = search("\d{2}:\d{2}:\d{2}",line)
        if (date and time):
            elapsed.append((date.group(),datetime.strptime(time.group(),'%H:%M:%S')))
    for date,times in groupby(elapsed,itemgetter(0)):
        times = list(times)
        averages.append((date,(times[-1][1]-times[0][1]).seconds/60./(len(times)-1)))

for avg in averages:
    print 'On date %s average minutes downloading is %.2f' % avg 
```

文件中数据的输出`log.txt`是：

```
On date 2012-04-20 average minutes downloading is 27.75
On date 2012-04-21 average minutes downloading is 70.00
On date 2012-04-23 average minutes downloading is 27.08
On date 2012-04-24 average minutes downloading is 175.17 
```

# ios - iOS应用程序中的垂直UIScrollView无限滚动

> ID：14581720
> 
> 赞同：-2
> 
> 时间：2013-01-29T11:20:52.580
> 
> 标签：ios, infinite-scroll

当我向下滚动时，我想在 UIScrollView 中添加无限滚动功能，就像 Facebook iOS 应用程序中使用的一样。任何人都可以提供执行此特定功能的代码/示例项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:41:35.450

*   您可以根据需要应用 contentsize，

    ```
    scrollviewObj.contentSize=CGSizeMake(width, height); apply height as per your need. 
    ```

# openoffice-calc - 将 Libreoffice 中单元格的行号设为变量

> ID：14581725
> 
> 赞同：1
> 
> 时间：2013-01-29T11:21:17.227
> 
> 标签：openoffice-calc, libreoffice

当我要在 Libreoffice Calc 中加入两列时，似乎我必须通过 Python 编程来做到这一点，因为据我所知，没有办法按变量索引单元格，特别是使用变量表示行号或列号。

我想知道是否没有办法做到这一点？

非常感谢，如果你能让我免于编写另一个临时 python 脚本 >_<

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T11:51:39.093

我觉得你可能需要 INDIRECT 功能。

你可以试试

```
="Good Morning Mr,  " &INDIRECT("D" & A9) 
```

这会给你

“早上好，怀特先生”

其中 D9 包含字符串“White”，A9 包含数字 9

希望会有所帮助

# android - 如何防止一次为多个视图调用 onTouchEvent() 方法？

> ID：14581727
> 
> 赞同：2
> 
> 时间：2013-01-29T11:21:19.350
> 
> 标签：android, touch, touch-event

我正在使用一个`ViewPager`并且在我的一个页面中我有一个`View`带有覆盖的`onTouchEvent()`方法。

现在，当用户在屏幕上移动他的手指时，`onTouchEvent()`我`View`的被调用，但也`ViewPager`正在向左或向右移动页面。如果用户正在触摸我的区域，我想阻止以某种方式`ViewPager`调用它的方法。是否可以？`onTouchEvent()``View`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:29:02.517

`ViewPager`默认情况下会拦截所有触摸事件。事实上，如果你把任何东西放在其他任何滚动的东西里，容器就会拦截触摸事件。在某些情况下，您可以覆盖此行为。这里的解决方案存在类似的问题，可能会对您有所帮助：

[ViewPager 拦截所有 x 轴 onTouch 事件。如何禁用？](https://stackoverflow.com/questions/8122460/viewpager-intercepts-all-x-axis-ontouch-events-how-to-disable)

# java - 客户端发送的请求在语法上不正确 - 上传文件时

> ID：14581728
> 
> 赞同：0
> 
> 时间：2013-01-29T11:21:20.083
> 
> 标签：java, spring, jquery, file-upload

当我尝试在春季上传文件时出现以下异常：

```
The request sent by the client was syntactically incorrect. 
```

这就是我通过 ajax 提交值的方式：

```
function uploadComment(viewName,answers){
    var file_data = $("#CIMtrek_daily_originator_comments").val();
    alert("file_data "+file_data);
    $.ajax({
            type : "POST",
            url : "CIMtrek_Compliance_Daily_Shipments_FileUpload",
            data: {
                uploadFile : file_data,
                id : '0'
            },
        success: function (msg) {
            global.getElementById("CIMtrek_uploadedFileName").innerHTML=msg;
             alert("File Uploaded");
        }
    });

} 
```

这是我的控制器方法：

```
@RequestMapping(value = "/CIMtrek_Compliance_Daily_Shipments_FileUpload", method = RequestMethod.POST)
    public String createComments(@RequestParam("uploadFile") MultipartFile  uploadItem ) {
        System.out.println(" CIMtrek_Compliance_Daily_Shipments_FileUpload : ");
        String uploadedFileName="";
        try {
            String fileName = null;
            InputStream inputStream = null;
            OutputStream outputStream = null;
            if (uploadItem.getSize() > 0) {
                inputStream = uploadItem.getInputStream();

                System.out.println("size::" + uploadItem.getSize());
                fileName = "/WEB-INF/resources/Attachment/"+ uploadItem.getOriginalFilename();

                outputStream = new FileOutputStream(fileName);
                System.out.println("fileName:" + uploadItem.getOriginalFilename());

                int readBytes = 0;
                byte[] buffer = new byte[10000];
                while ((readBytes = inputStream.read(buffer, 0, 10000)) != -1) {
                    outputStream.write(buffer, 0, readBytes);
                }
                outputStream.close();
                inputStream.close();
            }
            uploadedFileName =uploadItem.getOriginalFilename();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return uploadedFileName;
    } 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:30:45.360

您需要使用 serialize() 而不是 val() 如下

数据：$("#your_form").serialize();

```
$.ajax({
type : "POST",
contentType:false,
url : "CIMtrek_Compliance_Daily_Shipments_FileUpload",
data: $("#your_form").serialize(),
    success: function (msg) {
        global.getElementById("CIMtrek_uploadedFileName").innerHTML=msg;
         alert("File Uploaded");
    }
}); 
```

# java - 主要活动上的Android登录框

> ID：14581730
> 
> 赞同：0
> 
> 时间：2013-01-29T11:21:24.060
> 
> 标签：java, android, login

首先，我是 Android 的新手，对任何不合理的事情表示歉意。

我在这里要做的是显示主要活动并显示一个 AlertDialog，要求输入短密码（完整的用户名和密码将保存在首选项中）。如果密码不匹配，我需要找到退出应用程序的方法，否则，加载主要活动。

到目前为止，这是我的代码：

```
public class MainActivity extends Activity implements OnClickListener
{
Button  screening;
Button  screeningLog;

@Override
protected void onCreate (Bundle savedInstanceState)
{
    resetPreferences ();
    // Set theme
    setTheme (App.getTheme ());
    setContentView (R.layout.main);
    super.onCreate (savedInstanceState);
    createControlsAndListeners ();

    if (!App.isLoggedIn ())
    {
        final LinearLayout view = new LinearLayout (this);
        final TextView passcodeText = new TextView (this);
        final EditText passcode = new EditText (this);

        passcodeText.setText (R.string.passcode);
        passcode.setHint (R.string.passcode_hint);
        passcode.setInputType (InputType.TYPE_TEXT_VARIATION_PASSWORD);

        view.setOrientation (LinearLayout.VERTICAL);
        view.addView (passcodeText);
        view.addView (passcode);

        AlertDialog.Builder builder = new AlertDialog.Builder (this);
        builder.setTitle ("Enter Passcode.");
        builder.setView (view);
        builder.setPositiveButton (R.string.login, new DialogInterface.OnClickListener ()
        {
            public void onClick (DialogInterface dialog, int whichButton)
            {
                if (App.get (passcode).equals (App.getPassword ().substring (0, 4)))
                {
                    App.setLoggedIn (true);
                    dialog.dismiss ();
                }
                else
                {
                    Toast toast = Toast.makeText (MainActivity.this, Error.get (Error.AUTHENTICATION),
                            App.getDelay ());
                    toast.show ();
                }
            }
        });
        builder.show ();
    }
}

public void resetPreferences ()
{
    PreferenceManager.setDefaultValues (this, R.xml.preferences, false);
    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences (this);
    App.setServer (preferences.getString ("server", ""));
    App.setUsername (preferences.getString ("username", ""));
    App.setPassword (preferences.getString ("password", ""));
    App.setNightMode (preferences.getBoolean ("night_mode", false));
    App.setDelay (Integer.parseInt (preferences.getString ("delay", "30000")));
}

private void createControlsAndListeners ()
{
    screening = (Button) findViewById (R.main_id.screeningButton);
    screening.setOnClickListener (this);
    screeningLog = (Button) findViewById (R.main_id.screeningLogButton);
    screening.setOnClickListener (this);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:25:10.983

试试这个可能对你有帮助。您可以为此使用意图。

```
AlertDialog.Builder builder = new AlertDialog.Builder (this);
builder.setTitle ("Enter Passcode.");
builder.setView (view);
builder.setPositiveButton (R.string.login, new DialogInterface.OnClickListener ()
{
    public void onClick (DialogInterface dialog, int whichButton)
    {
        if (App.get (passcode).equals (App.getPassword ().substring (0, 4)))
        {
            App.setLoggedIn (true);
            dialog.dismiss ();
        }
        else
        {
            Toast toast = Toast.makeText (MainActivity.this, Error.get (Error.AUTHENTICATION),App.getDelay ());
            toast.show ();
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_HOME);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);
        }
    }
});
builder.show (); 
```

**或者，如果这是您在应用程序中的第一个活动，则`finish()`在 else 条件下调用方法。**

```
 AlertDialog.Builder builder = new AlertDialog.Builder (this);
    builder.setTitle ("Enter Passcode.");
    builder.setView (view);
    builder.setPositiveButton (R.string.login, new DialogInterface.OnClickListener ()
    {
        public void onClick (DialogInterface dialog, int whichButton)
        {
            if (App.get (passcode).equals (App.getPassword ().substring (0, 4)))
            {
                App.setLoggedIn (true);
                dialog.dismiss ();
            }
            else
            {
                Toast toast = Toast.makeText (MainActivity.this, Error.get (Error.AUTHENTICATION),App.getDelay ());
                toast.show ();
                finish();
            }
        }
    });
    builder.show (); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:25:14.570

好吧，在 Android 中确实没有“退出应用程序”。但是，如果您真的想提供这种功能，我猜您可以通过 Intent 将用户引导到主屏幕（请参阅[Intent](http://developer.android.com/reference/android/content/Intent.html#CATEGORY_HOME)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:25:54.960

您可以简单地在您的活动上调用 finish() 来关闭它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:30:52.420

如果你想退出你可以使用finish();

关于存储密码的共享首选项，我建议你阅读这篇文章： [What is the most appropriate way to store user settings in Android application](https://stackoverflow.com/questions/785973/what-is-the-most-appropriate-way-to-store-user-settings-in-android-application)

# iphone - 在 ipad 和 iphone 中隐藏 iframe 的一部分

> ID：14581731
> 
> 赞同：0
> 
> 时间：2013-01-29T11:21:24.327
> 
> 标签：iphone, html, css, ipad, iframe

我需要从 iframe 的顶部隐藏 300px。我试图用溢出隐藏它：隐藏在 css 中，但它在 iphone 或 ipad 中不起作用。我该如何解决？

我的 HTML 代码

```
<div class="iframe-wrapper">
  <div class="iframe-content">
    <iframe src="http://my_url" width="940" height="900" frameborder="0" scrolling="no" </iframe>
  </div>
</div> 
```

我的 CSS

```
.iframe-wrapper {
    position: relative; 
    overflow: hidden;
    width: 940px; 
    height: 600px;
}
.iframe-content {
    position: absolute; 
    top: -300px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:31:11.143

我用你的代码做了一个演示，连同我的建议，它似乎正在工作：

html:

```
<div class="iframe-wrapper">
  <div class="iframe-content">
      <iframe src="http://www.google.com" width="400" height="500" frameborder="0" scrolling="no"/>
  </div>
</div> 
```

CSS：

```
.iframe-wrapper {
    position: relative; 
    overflow: hidden;
    width: 400px; 
    height: 300px;
    border: 5px solid orange;
    margin: 20px;
    background: red;
}

.iframe-content {
    position: absolute;
    top: -300px;
}

iframe { background: blue; } 
```

**演示 - [http://jsfiddle.net/MteRS/](http://jsfiddle.net/MteRS/)**

我更改了宽度/高度，使其更适合 jsfiddle 输出面板。

# visual-studio-2010 - pdf的Href问题

> ID：14581732
> 
> 赞同：0
> 
> 时间：2013-01-29T11:21:33.253
> 
> 标签：visual-studio-2010, href

我有以下代码。

```
<a id="hlink" href="~/Documents/ABCD.pdf" target="_blank">Document </a> 
```

pdf 不会在文档单击时打开。如果我将相同的路径复制到新的浏览器窗口中，则会打开该文档。

单击“文档”超链接也会打开该文档。

`"http://localhost/...(the rest of path)"`在点击超链接时生成。

那是我没有在href中添加的东西，因此不允许它在第一次打开时打开吗？

可能是一些安全设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:24:29.390

~ 适用于在服务器上解析的链接，如果你想解决你需要做的

```
<a id="hlink" href="~/Documents/ABCD.pdf" target="_blank" runat="server">Document </a> 
```

# java - OSGI bundle 异常，maven 依赖问题

> ID：14581738
> 
> 赞同：2
> 
> 时间：2013-01-29T11:21:56.183
> 
> 标签：java, maven, osgi, apache-felix

我对 OSGI、Felix 和 Maven 的东西还很陌生，刚开始接触它。我正在通过 jenkins 部署 java 构建，我得到了以下依赖问题。

下面是包含依赖项的 pom 文件内容，我不确定它是否正确，但它仍然抱怨它。

它正在寻找“javax.jws”，版本介于 2.0 和 3.0 之间

```
javax.jws;version>="2.0.0",!javax.jws;version>="3.0.0" 
```

以下是pom内容。

```
 <Import-Package>!sun.misc,!org.apache.avalon.framework.logger,
    !org.ietf.jgss,!org.apache.log,!org.apache.log.format,!org.apache.log.output.io,!com.werken.xpath,!org.apache.tools.ant,!org.apache.tools.ant.taskdefs,
    !org.jdom,!org.jdom.input,!org.jdom.output,com.mblox.ngp.sal*;
    version="${sal-utils-version}",org.apache.commons.logging;version="1.1",
    javax.jws;version>="2.0.0",!javax.jws;version>="3.0.0",
    com.sun.xml.ws.api.message,*
</Import-Package> 
```

以下是我得到的例外：

```
[#|2013-01-29 11:07:44,109|ERROR|NGP-SAL-SALBootstrap-SAL-0|com.mblox.ngp.sal.platform.impl.Sal|172.18.36.38|slodev-rhatf4.mblox.com|sal-1|Unresolved constraint in bundle sap-ws-netcom [24]: Un
able to resolve 24.0: missing requirement [24.0] package; (&(package=javax.jws)(version>=2.0.0)(version>=2.0.0)(!(version>=3.0.0))) - [24.0] package; (&(package=javax.jws)(version>=2.0.0)(versi
on>=2.0.0)(!(version>=3.0.0)))|#]
org.osgi.framework.BundleException: Unresolved constraint in bundle sap-ws-netcom [24]: Unable to resolve 24.0: missing requirement [24.0] package; (&(package=javax.jws)(version>=2.0.0)(version
>=2.0.0)(!(version>=3.0.0))) - [24.0] package; (&(package=javax.jws)(version>=2.0.0)(version>=2.0.0)(!(version>=3.0.0)))
        at org.apache.felix.framework.Felix.resolveBundle(Felix.java:3421)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1754)
        at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:905)
        at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:892)
        at com.mblox.ngp.sal.platform.impl.Sal.installBundle(Sal.java:608)
        at com.mblox.ngp.sal.platform.impl.Sal.getBundle(Sal.java:481)
        at com.mblox.ngp.sal.platform.impl.Sal.installSap(Sal.java:630)
        at com.mblox.ngp.sal.platform.impl.Sal.initSapBundles(Sal.java:545)
        at com.mblox.ngp.sal.platform.impl.Sal.start(Sal.java:290)
        at com.mblox.ngp.sal.platform.impl.SALBootstrap.call(SALBootstrap.java:64)
        at com.mblox.ngp.sal.platform.impl.SALBootstrap.call(SALBootstrap.java:24)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722) 
```

解决此问题的任何建议或指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:39:49.707

有没有导出包的`javax.jws`包？如果没有，您可以将此 Maven 依赖项添加到您的构建中，并确保将其部署到 Felix：

```
<dependency>
    <groupId>org.apache.geronimo.specs</groupId>
    <artifactId>geronimo-ws-metadata_2.0_spec</artifactId>
    <version>1.1.2</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T22:35:04.263

我在 CQ5 中使用 Felix 的 javax.jws 依赖项也有问题，解决方案（奇怪的是）是在包清单的 Import-Package 部分中明确不包含 javax.jws 和 javax.jws.soap。如果您使用的是 maven-bundle-plugin（就像我一样），您可以在说明中使用以下内容：

```
<plugin>
<groupid>org.apache.felix</groupid>
<artifactid>maven-bundle-plugin</artifactid>
<version>2.1.0</version>
<extensions>true</extensions>
<configuration>
<instructions>
<import-package>!javax.jws,!javax.jws.soap,*</import-package> 
</instructions>
</configuration>
</plugin> 
```

我也不需要单独的包来导出 javax.jws 和 javax.jws.soap。只需为我的包含 Web 服务客户端代码（使用 wsimport 生成）的包执行上述操作就足以使其工作。

我必须做的另一件事是添加

```
sling.bootdelegation.com.sun=com.sun.* 
```

到 sling.properties 文件。

关于创建 web 服务的 CQ5 教程在此页面上提到了它：http: [//helpx.adobe.com/adobe-cq/using/creating-cq-bundles-consume-web.html](http://helpx.adobe.com/adobe-cq/using/creating-cq-bundles-consume-web.html)

> “笔记：
> 
> 此工作流程适用于 Adob​​e CQ；但是，您可能会遇到以下异常：
> 
> 引起：java.lang.ClassNotFoundException: com.sun.xml.internal.ws.spi.ProviderImpl at org.apache.sling.commons.classloader.impl.ClassLoaderFacade.loadClass(ClassLoaderFacade.java:127) at java.lang。 ClassLoader.loadClass(Unknown Source) at javax.xml.ws.spi.FactoryFinder.safeLoadClass(Unknown Source) ... 107 更多文章，修改位于 crx-quickstart\conf 文件夹中的 sling.properties 文件。将以下代码行添加到此文件：sling.bootdelegation.com.sun=com.sun.*。然后重新启动服务器。一旦你执行了这个任务，你就可以跟随这篇文章。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:16:33.293

一切似乎都如预期的那样。您已经配置了`sap-ws-netcom`bundle pom 以声明需要 j`avax.jws`包。并且容器在尝试解决依赖关系时试图找到它。

```
org.osgi.framework.BundleException: Unresolved constraint in bundle sap-ws-netcom [24]: Unable to resolve 24.0: missing requirement [24.0] package; (&(package=javax.jws)(version>=2.0.0)(version
>=2.0.0)(!(version>=3.0.0))) - [24.0] package; (&(package=javax.jws)(version>=2.0.0)(version>=2.0.0)(!(version>=3.0.0)))
        at org.apache.felix.framework.Felix.resolveBundle(Felix.java:3421)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1754) 
```

问题很简单，OSGi 容器没有`javax.jws`可用，至少在您要求的版本中没有。你认为你已经提供了它吗？

使其可用的方法是安装一个导出该包的包。你必须自己做这件事。这通常是 OSGi 的情况。如果您没有明确地使 java 包可用，那么它就不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T14:25:33.033

如果您运行的是 Windows，请尝试将其放在 C:\G\ 或更短的路径名中。它为我解决了问题！

# c - 生成的 stdsoap.h 与 gsoap 2.8.10 和 2.8.11 及更高版本的差异

> ID：14581739
> 
> 赞同：1
> 
> 时间：2013-01-29T11:21:58.320
> 
> 标签：c, soap, wsdl, gsoap, onvif

我们使用带有 ONVIF wsdl 的 gSOAP。2.8.10 的响应与 2.8.11 及以上版本不同。这就是我们所面临的，

```
1\. Installed 2.8.10 version.

2\. Executed below command to generate header file for ONVIF event wsdl. 
wsdl2h -c -t /usr/local/share/gsoap/WS/typemap.dat -o event.h http://www.onvif.org/onvif/ver10/event/wsdl/event.wsdl

3\. soapcpp2 is invoked on header file (event.h) to generate both client and server side code.
soapcpp2 -c  -t -I /usr/local/share/gsoap/import/:/usr/local/share/gsoap event.h 

4\. Respective structures will be generated in header file soapStub.h.
In soapStub.h look for structure, 
struct _ns1__GetEventPropertiesResponse->struct ns7__TopicSetType ->char **__any

*** Repeat step 2 & 3 with 2.8.11/12/13 installed and look for structures in soapStub.h struct _tev__GetEventPropertiesResponse->struct wstop__TopicSetType ->char *__any 
```

观察到两个变化，

1.  关于命名空间。ns1 被替换为 tev。（我们解决了这个问题）

2.  char __any 在 2.8.10 中是双指针，但在以上版本中，它是单指针。（无法解决这个问题）

我们担心 char __any。

您能否帮助我们理解为什么在 2.8.11 及以上版本中会出现这种差异。我们如何克服这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-19T19:04:10.310

要将 xsd:any 类型更改为 char ** 将此行放入您的类型映射文件中。

```
xsd__any = | char** 
```

# c# - WPF、C# 中组合框的 DisplayMemberPath

> ID：14581746
> 
> 赞同：2
> 
> 时间：2013-01-29T11:22:41.350
> 
> 标签：c#, wpf, combobox, datatable, datarow

我有`DataTable`包含必要`DataRows`的，我想显示在`ComboBox`. 第二个`DataColumn`被称为*`VALUE`*，我想把它变成一个`DisplayMember`.

但是，*根据*. `ComboBox`_ 我究竟做错了什么？*`DataRows`*

 *```
DataTable dataTableManufacturers;
dm = new DatabaseManagement.DatabaseManagement(Properties.Settings.Default.DBServer,Properties.Settings.Default.DBName, Properties.Settings.Default.DBUser, Properties.Settings.Default.DBPassword);
dataTableManufacturers = dm.getManufacturers();

combxManufacturer.DisplayMemberPath = "VALUE";

foreach (DataRow row in dataTableManufacturers.Rows)
{
    combxManufacturer.Items.Add(row);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:27:04.670

`DisplayMemberPath`应该是`"[VALUE]"`因为您打算使用[此索引器](http://msdn.microsoft.com/en-us/library/146h6tk5.aspx)（而不是属性）来获取数据。有关详细信息，请参阅MSDN 上的[绑定路径语法。](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.path.aspx)

作为一个（重要的！），“WPF 方式”是设置控件`ItemSource`而不是手动添加到`Items`集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:26:55.817

尝试设置`combxManufacturer.ItemsSource = dataTableManufacturers.Rows;`而不是单独添加行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:28:33.067

尝试设置`combxManufacturer.ItemsSource`属性

```
combxManufacturer.ItemsSource = dataTableManufacturers.AsDataView; 
```

并且无需添加项目

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:31:03.630

我试过了，我知道它确实有效。

```
private DataTable testTable = new DataTable();
        testTable.Columns.AddRange(new DataColumn[]
            {
                new DataColumn("ID", typeof(int)), 
                new DataColumn("Name", typeof(string)), 
            });
        var row = testTable.NewRow();
        row[0] = 1;
        row[1] = "My Name";
        testTable.Rows.Add(row);
        myTestCmb.ItemsSource = TestTable.AsDataView();

<ComboBox x:Name ="myTestCmb" DisplayMemberPath="Name" /> 
```*

# c# - XDocument 后代和元素总是返回空值

> ID：14581747
> 
> 赞同：2
> 
> 时间：2013-01-29T11:22:43.153
> 
> 标签：c#, windows-phone-7, linq-to-xml, windows-phone

嘿，我已经彻底查看了所有包含的问题`XDocument`，虽然它们都在回答我正在寻找的内容（主要是命名空间问题），但它似乎对我不起作用。

我遇到的问题是我无法选择任何值，无论是属性还是元素。

使用这个[XML](http://events.feed.comportal.be/agenda.aspx?event=TechDays&year=2013&speakerlist=c%7CExperts)

我正在尝试检索演讲者的全名。

```
 public void GetEvent()
    {
        var xdocument = XDocument.Load(@"Shared\techdays2013.xml");
        XNamespace xmlns = "http://www.w3.org/2001/XMLSchema-instance";

        var data = from c in xdocument.Descendants(xmlns + "speaker")
                   select c.Element(xmlns + "fullname").Value;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:33:01.497

您可以在 linq 语句中省略命名空间声明。

```
public void GetEvent()
{
    var xdocument = XDocument.Load(@"Shared\techdays2013.xml");
    //XNamespace xmlns = "http://www.w3.org/2001/XMLSchema-instance";

    var data = from c in xdocument.Descendants("speaker")
               select c.Element("fullname").Value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:38:09.253

您可以省略`WebClient`，因为您可以直接在本地访问文件。我只是展示了一种在我的机器上处理您的文件的方法。

```
void Main()
{
    string p = @"http://events.feed.comportal.be/agenda.aspx?event=TechDays&year=2013&speakerlist=c%7CExperts";
    using (var client = new WebClient())
    {
        string str = client.DownloadString(p);
        var xml = XDocument.Parse(str);

        var result = xml.Descendants("speaker")
                        .Select(speaker => GetNameOrDefault(speaker));

        //LinqPad specific call        
        result.Dump();
    }
}
public static string GetNameOrDefault(XElement element)
{
    var name = element.Element("fullname");
    return name != null ? name.Value : "no name";
} 
```

印刷：

```
Bart De Smet 
Daniel Pearson 
Scott Schnoll 
Ilse Van Criekinge 
John Craddock 
Corey Hynes 
Bryon Surace 
Jeff Prosise 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:35:24.817

1）您必须删除命名空间

2）您必须更精确地查询。你里面的所有`<speaker>`元素`<speakers>`都有一个全名，但在下一节中我发现`<speaker id="94" />`

一个简单的修复（也许不是最好的）：

```
//untested
var data = from c in xdocument.Root.Descendants("speakers").Descendants("speaker")
          select c.Element("fullname").Value; 
```

您可能希望更精确地指定路径：

```
xdocument.Element("details").Element("tracks").Element("speakers"). 
```

# android - 我们可以在 Android 中为 TextView 使用 android:attr/spinnerStyle

> ID：14581748
> 
> 赞同：1
> 
> 时间：2013-01-29T11:22:45.633
> 
> 标签：android, styles, android-styles

在我的应用程序中，我尝试更改 Spinner 的文本颜色，通过尝试更改我读过的 Spinner 的文本颜色，**我们可以使用** `TextView` **如下所示** `Style.xml` **的**Spinner ...

`Style.xml`作为_

```
<style name="spinners" parent="android:attr/spinnerStyle">
    <item name="android:textColor">@color/black</item>
    <item name="android:padding">5dp</item>
</style> 
```

在我的 XML 文件中，我使用`TextView`如下

```
<TextView
        android:id="@+id/spinnerClassName"
        android:layout_width="180dp"
        android:layout_height="50dp"
        style="@style/spinners"
        android:layout_column="1"
        android:layout_row="0" /> 
```

如果我尝试了这个概念，我无法`Spinner`使用这个`TextView`..

帮助我，给你宝贵的建议..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:26:33.843

为您的微调器使用自定义布局，您可以在其中更改文本颜色。这是java示例如何做到这一点：

```
Spinner mySpinner = (Spinner)findViewById(R.id.spinner);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
     R.layout.row, R.id.weekofday, new String[]{"ELEM 1","ELEM 2"}); // layoout.row is your custom layout. 
   mySpinner.setAdapter(adapter); 
```

样式微调器：

```
<?xml version="1.0" encoding="utf-8"?> 
```

并将该drawable设置为您的背景：

```
<Spinner android:id="@+id/spinner_chemical"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:drawSelectorOnTop="true"
     android:background="@drawable/myspinner_background"/> 
```

对于 ListView，您可以设置如下样式：

```
<style name="ListViewCustomStyle" parent="android:Widget.ListView">
    <item name="android:listSelector">@drawable/list_selector_holo_light</item>
    <item name="android:fastScrollTrackDrawable">@drawable/fastscroll_thumb_holo</item>
    <item name="android:fastScrollThumbDrawable">@drawable/fastscroll_thumb_holo</item>
    <item name="android:dividerHeight">0.5dip</item>
    <item name="android:divider">#e9e9e9</item>
    <item name="android:fadingEdge">none</item>
    <item name="android:cacheColorHint">#00000000</item>
</style> 
```

这就是用于设置 listview 样式的可绘制对象：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_window_focused="false" android:drawable="@android:color/transparent" />

<!-- Even though these two point to the same resource, have two states so the drawable will invalidate itself when coming out of pressed state. -->
<item android:state_focused="true"  android:state_enabled="false" android:state_pressed="true" android:drawable="@drawable/list_selector_disabled_holo_light" />
<item android:state_focused="true"  android:state_enabled="false"                              android:drawable="@drawable/list_selector_disabled_holo_light" />
<item android:state_focused="true"                                android:state_pressed="true" android:drawable="@drawable/list_selector_background_transition_holo_light" />
<item android:state_focused="false"                               android:state_pressed="true" android:drawable="@drawable/list_selector_background_transition_holo_light" />
<item android:state_focused="true"                                                             android:drawable="@drawable/list_focused_holo" />
</selector> 
```

就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:40:01.533

如果您想滚动文本，`TextView`就好像文本比您分配的大小大得多，`TextView`那么您可以在 TextView 中添加以下参数`layout-xml`

```
 android:scrollbars="vertical" 
```

让我知道，如果它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T13:40:24.353

您可以依赖[appcompat-v7](https://developer.android.com/tools/support-library/features.html#v7-appcompat)并创建您的样式元素，例如：

```
 <style name="FakeSpinner" parent="Widget.AppCompat.Spinner">
    <item name="android:textColor">@android:color/black</item>
    <item name="android:textSize">18sp</item>
    <item name="android:gravity">center_vertical</item>
  </style> 
```

# ms-access - 使用 SQL 视图数据源过滤表单上的错误 RecordCount

> ID：14581749
> 
> 赞同：0
> 
> 时间：2013-01-29T11:22:52.173
> 
> 标签：ms-access, vba, record-count

我使用**Access2010 项目**作为前端，将**MS SQL Server 2008**称为后端。在我的 Access 项目中有 form `frmKlientenÜbersicht`。这个表单有一个`abfKlientenÜbersicht`作为数据源的视图。

现在我正在尝试使用以下代码获取当前显示在我的表单中的记录数：

```
Private Sub Form_Current()
    Debug.Print "Form_Current: " & anzahlDatensätze
    lblAnzahlDatensätze.Caption = anzahlDatensätze & " Klient(en)"
End Sub

Private Function anzahlDatensätze() As Integer
    Dim rs As Recordset
    Set rs = Me.RecordsetClone
    rs.MoveLast
    anzahlDatensätze = rs.RecordCount
End Function 
```

这工作正常，直到我使用一些过滤器。如果我在表单上**使用任何过滤器****，记录数保持不变**！

*   我必须更改什么才能显示当前的记录数（如果过滤或不过滤）？
*   我的代码没有显示正确的记录数的原因是什么？

![访问项目概述](../Images/592a80691ac69b4218b957087cb4e60d.png)

编辑：根据给定的评论和答案，我尝试设置`Count([pkKlient]`到文本框（见新图片）并`DCount("*", "abfKlientenÜbersicht", me.Filter)`从 VBA 代码中尝试。

不幸的是，filterClause在用作 DCount 的参数值时似乎**无效。**（有关 filterClause 的图片，请参见图片）。

如您所见`count(..)`，不会产生正确的数字-并且 filterClause （*由访问生成！！*）似乎对以下用户无效`DCount(..)`

如果有人想试试，自己一个人，只需要创建一个ADP，添加一个表单，添加一个视图，表单数据源是一个视图，设置一个过滤器，然后尝试获取记录数？！！

期待**任何评论/答案/提示！**

![过滤时的表单截图](../Images/d2d067fde23254d36853efd00e5de1b0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:20:11.030

使用 VBA，`DCount`将为您提供所需的

```
DCount("*", "MyTable", Me.Filter) 
```

如果你想把它放在表格上，有一个更简单的方法。使用未绑定的框，并将其设置为`=count([FieldName])`

![在表单属性中使用 Count](../Images/aaae2edb926b8f27bc5f4b962a40fc5d.png)

这个计数应该保持正确，无论它是否计算过滤记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:05:53.590

一些笔记，有十多件事可能会出错，甚至不能称之为测试。但是，它为我返回了正确的计数。

显然，表单过滤器只是隐藏记录，而这将应用一个真正的过滤器。但是，您需要将格式转换为有效过滤器的正确形状。最后，WHERE 语句可能会更容易。

```
Private Sub Form_ApplyFilter(Cancel As Integer, ApplyType As Integer)

    With Me.Recordset
        ''Filter
        If ApplyType = 1 Then
            ''Very, very roughly. Remove form name, use single quotes
            ''You will need a lot more code for safety
            sfilter = Replace(Me.Filter, "[" & Me.Name & "].", "")
            sfilter = Replace(sfilter, """", "'")

            .Filter = sfilter 

            MsgBox "Recordset : " & Me.Recordset.RecordCount & vbCrLf _
            & "Filtered : " & .RecordCount

        Else
            ''Remove filter - ApplyType 0
            .Filter = ""
        End If

    End With

End Sub 
```

**带有类似警告的附加说明**

您还可以在这些行上设置一个文本框：

```
=IIf([FilterOn]=True,DCount("id","ATable",
 Replace(Replace([Filter],"[" & [Name] & "].",""),"""","'")),Count([id])) 
```

（删除行中的中断，它是装饰性的）

# objective-c - 保存 NSString 不同

> ID：14581753
> 
> 赞同：0
> 
> 时间：2013-01-29T11:23:00.253
> 
> 标签：objective-c, cocoa, sqlite

```
const char *sql = "SELECT Nome, Nome2, Nome3 FROM libretto"; 

sqlite3_stmt *select_statement; 

 if(sqlite3_prepare_v2(database, sql, -1, &select_statement, NULL) == SQLITE_OK) {
        while(sqlite3_step(select_statement) == SQLITE_ROW) {
            //ricaviamo i valori letti dalla query
            nome = [NSString stringWithUTF8String:(char *)sqlite3_column_text(select_statement, 0)];
            nome2 = [NSString stringWithUTF8String:(char *)sqlite3_column_text(select_statement, 1)];
            nome3 = [NSString stringWithUTF8String:(char *)sqlite3_column_text(select_statement, 2)];
            // inseriamo tutti i valori letti in un unico oggetto
            NSDictionary *dictionary = [[NSMutableDictionary alloc] initWithObjectsAndKeys:nome, @"Nome", nome2, @"Nome2", nome3, @"Nome3",nil];
            [listaTemp addObject:dictionary];

            //inserisco tutti i valori letti dei nomi in un unico oggetto
            [listaTemp addObject:dictionary];
        }
}

sqlite3_finalize(select_statement); 
```

我的问题是每次在

```
name = [NSString stringWithUTF8String: (char *) 
                sqlite3_column_text (select_statement, 0)]; 
```

我总是读取数据库中的姓氏。

例如，我希望您以不同`NSString`的方式保存我的前 3 个名称，以便它可以用来执行我的比较。

```
const char *sql = "SELECT Nome, Nome2, Nome3 FROM libretto";

sqlite3_stmt *select_statement; 
```

# java - 在有限用户可见的 Facebook 上共享状态

> ID：14581754
> 
> 赞同：1
> 
> 时间：2013-01-29T11:23:02.623
> 
> 标签：java, android, json, facebook-graph-api, rest

我正在使用以下方法在 facebook 上分享状态。

```
if (facebook.isSessionValid()) {
        Bundle parameters = new Bundle();
        parameters.putString("message", msg);
        try {
            String response = facebook.request("me/feed", parameters,"POST");
            System.out.println(response);
            Toast.makeText(context, "Posted Successfully", Toast.LENGTH_LONG).show();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } else {
        login();
    } 
```

我检查了具有参数**allow = "profileid1,profileid2,profileid3"**但它嵌入在 object 中的 graph api。现在我找不到如何在 bundle 中添加这个参数。

这就是 graph api explorer 显示结果的方式。

```
 "privacy": {
    "description": "Friends; Except: Artemas Ali, Artemas Ali",
    "value": "CUSTOM",
    "friends": "ALL_FRIENDS",
    "networks": "",
    "allow": "",
    "deny": "1000036022153129,1000017534323389"
  }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:39:38.843

我通过简单地将值添加到 JSON 对象然后转换为字符串以将值传递给 API 来完成此操作。

```
 if (facebook.isSessionValid()) {
        Bundle parameters = new Bundle();
        parameters.putString("message", msg);
        if(!customUsers.equals("")){
        JSONObject obj= new JSONObject();

        try {
               obj.put("value", "CUSTOM");
               obj.put("friends", "ALL_FRIENDS");
               try{
                   obj.put("deny", customUsers);   
               }catch(StringIndexOutOfBoundsException ex){
                   Log.d(customUsers, ex.toString());
               }

        } catch (JSONException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        parameters.putString("privacy", obj.toString());
        }
        try {
            String response = facebook.request("me/feed", parameters,"POST");
            System.out.println(response);
            Toast.makeText(context, "Posted Successfully", Toast.LENGTH_LONG).show();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

# c# - 是否可以从 WCF 服务获取 LINQ 预测？

> ID：14581756
> 
> 赞同：0
> 
> 时间：2013-01-29T11:23:08.963
> 
> 标签：c#, wcf, linq, entity-framework, automapper-2

Automapper 有一个非常好的扩展来获取投影。
在我们应用程序的 BL 中，我们可以定义如下方法：

```
IEnumerable<TEntityProjection> GetProjections()
{
    return _context.EntitiesSet.Project().To<TEntityProjection>();
} 
```

这有助于 BL 保持非常简单。对于每个投影变体，我们不需要很多不同的方法。
但是... WCF 服务不支持开放泛型。
因此，我正在寻找允许服务客户端仅获取实体所需属性的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:32:39.013

可能的解决方案是 Linq over WCF（基于 BLToolkit）。在后台，linq 查询解析为 SqlQuery (SQL AST)，序列化并发送到 WCF LINQService。该服务为 DB（SQl Server、Oracle、MySql 等）创建一个 sql 查询，执行它并返回数据。支持匿名类型。

查询样本：

```
var client = new DataModel();

var q = from p in client.Person
        select new   
{
      p.PersonID,
      p.FirstName,
      p.MiddleName,
      p.LastName,
      p.Gender
};

foreach (var p in q)
  Console.WriteLine(p); 
```

更多信息：[http ://bltoolkit.net/Doc.LinqDataContext.ashx](http://bltoolkit.net/Doc.LinqDataContext.ashx)

示例：[https ://github.com/igor-tkachev/bltoolkit/blob/master/Demo/Linq/OverWCF/Program.cs](https://github.com/igor-tkachev/bltoolkit/blob/master/Demo/Linq/OverWCF/Program.cs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:37:37.243

这不会以您尝试的方式起作用。

如果您需要接收端的特定属性，您可以：

*   创建单独的方法，其中每个方法为每个实体公开一组特定的预定义属性
*   创建采用“属性列表”参数（可能是字符串数组）并返回带有 XML 或 JSON 的字符串的方法，然后需要在客户端进行一些组装
*   只需忽略客户端上不需要的属性

我想这取决于你的具体情况，这将是最好的。

# scala - 带有隐式参数的泛型函数

> ID：14581757
> 
> 赞同：3
> 
> 时间：2013-01-29T11:23:15.040
> 
> 标签：scala, playframework-2.0

我正在尝试概括用于从 Play 操作返回 Json 的功能之一。

我目前这样做：

```
def JsendOkObj(obj: JsValue) = Ok(Json.obj("status" -> "success", "data" -> obj)) 
```

并称之为：

```
JsendOkObj(Json.toJson(myObj)) 
```

我想做更多类似的事情：

```
def JsendOkObj[A](obj: A) = Ok(Json.obj("status" -> "success", "data" -> Json.toJson(obj))) 
```

然后像这样称呼它：

```
JsendOkObj(myObj) 
```

其中`Json.toJson`定义[为](http://www.playframework.org/documentation/api/2.1-RC2/scala/index.html#play.api.libs.json.Json%24)：

```
def toJson[A](implicit arg0: Writes[A]): Enumeratee[A, JsValue] 
```

我编译这个错误是我需要为 type 定义一个 Writes `A`。这是不可能的，因为我不知道哪种类型`A`最终会成为：

> 找不到类型 A 的 Json 反序列化器。尝试为此类型实现隐式写入或格式。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T11:38:08.830

您可以通过将隐式参数列表添加到您自己的方法来确保`Writes[A]`在调用时隐式将在范围内，如下所示：`toJSon`

```
def JsendOkObj[A](obj: A)(implicit w: Writes[A]) =
  Ok(Json.obj("status" -> "success", "data" -> Json.toJson(obj))) 
```

这相当于将类型类实例显式传递给`toJson`：

```
def JsendOkObj[A](obj: A)(implicit w: Writes[A]) =
  Ok(Json.obj("status" -> "success", "data" -> Json.toJson(obj)(w))) 
```

请注意，您还可以在此处使用[上下文绑定](https://stackoverflow.com/a/4467012/334519)：

```
def JsendOkObj[A: Writes](obj: A) =
  Ok(Json.obj("status" -> "success", "data" -> Json.toJson(obj))) 
```

这只是我上面第一个版本的语法糖。

# html - http-equiv="X-UA-Compatible" 内容

> ID：14581760
> 
> 赞同：-1
> 
> 时间：2013-01-29T11:23:27.583
> 
> 标签：html

我应该在 ie8 中有 IE 8 文档模式。

以及 ie 9 中的 ie 9 文档模式

为此我该怎么办？

注意：我的文档类型是`<!DOCTYPE html>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:27:36.063

您希望 Internet Explorer 使用其最新的渲染引擎进行渲染吗？如果是这样，这将做到：

`<meta http-equiv="X-UA-Compatible" content="IE=edge">`

上述标签应包含在`<head>`您网页的部分中。Internet Explorer 将使用此“X-UA-Compatible”标志来确定要使用的呈现模式。通过指定“边缘”渲染，您指示 IE 使用它最新的引擎。有关此主题的更多信息，请查看此资源：[http ://en.wikipedia.org/wiki/Compatibility_mode_(browser)#Internet_Explorer](http://en.wikipedia.org/wiki/Compatibility_mode_(browser)#Internet_Explorer)

我应该补充一点，这是默认行为，除非用户的浏览器默认设置为在兼容模式下运行。

# python - 计算多个文件的平均值

> ID：14581761
> 
> 赞同：-6
> 
> 时间：2013-01-29T11:23:28.493
> 
> 标签：python, perl, bash

我想计算多个文件中数据的平均值：（大约 10 个文件）。假设我有 file1.dat、file2.dat、file3.dat 和 ... file10.dat。每个文件包含两列。“第一列是行号”，“**第二列是数据**”。我在一个文件中总共有 1800 行。数据的模式如下图所示：

```
 1.00   0.659
    2.00   0.608
    3.00   0.578
    4.00   0.557
    5.00   0.543
    6.00   0.527
    7.00   0.514
    8.00   0.502
    9.00   0.489
    . 
    .
    .
 1800.00   0.480 
```

我想根据每个文件的行号计算**数据的平均值。**这意味着，我想从 file1、file2... 和 file10 中找到所有第一行数据的平均值并写入*新文件*。然后平均来自 file1、file2... 和 file10 的所有第二行数据，并写入同一个*新文件*。

该*新文件*应该具有如下格式。例如;

```
 1.00   0.112
    2.00   0.324
    3.00   0.887
    . 
    . 
```

其中第一列是行号，第二列是数据的平均值。为了清楚起见，我将解释一些细节。在上面的示例中，**0.112**是每个文件第一行中所有数据的平均值。**0.324**是每个文件第二行所有数据的平均值。

我想要的是可以完成这个计算的代码。

我试过用 perl 打开一个文件。但是在试图弄清楚将想法转换为代码时迷失了方向。我写的perl如下

```
#!/usr/bin/perl -w

open (FILE, "file1.dat") or die $!;
while (<FILE>) {
chomp;
print "$_\n";
}
close (FILE); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:54:46.593

我几乎忘记了关于 bash 脚本的所有内容。但我认为你可以做这样的事情。

```
files=(file1 file2 file3 file4)
for i in `seq  4`
do
  j=$(($i-1))
  f[$j]=`cat ./temp/${files[$i]} | awk '{print $2}' `
done

for i in `seq 0 1799`
do
  sum=0
  rowValue=0
  for j in `seq 0 3`
  do
    fileContent=(${f[$j]})
    rowValue=`echo ${fileContent[$i]} `
    sum=$(($sum + $rowValue))    
  done
  echo "sum is" $i $sum
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:34:56.067

你问的是指导，而不是代码，那么我可以用 gawk 说出我的想法。

gawk 有`ARGC`and`ARGIND`和`ARGV`which 你可以用来识别哪个文件。并且对于每个文件的每一行都保存数据，或者仅将您需要的数据保存到二维数组中。像`array[file,line]`

最后在 END 块中，你做循环，平均计算，打印结果

如果你不了解 awk，你也可以在 python 中应用这个想法，我想（不确定）perl 也应该使用它。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:46:44.890

在单独的文件句柄上打开所有输入文件，然后打开输出文件。执行一个循环，从每个输入文件中读取一行，将所有值相加并除以文件数，然后将结果写入输出文件。

# java - Android的slidemenu库的Java实现

> ID：14581764
> 
> 赞同：1
> 
> 时间：2013-01-29T11:23:38.867
> 
> 标签：java, android, slide

我[将此](https://github.com/jfeinstein10/SlidingMenu)库用于 Android 中的幻灯片菜单。这工作正常，但我想知道是否有人有菜单的实​​现。当单击列表项但它不起作用时，我试图切换活动或片段。我已经声明了一个新的 xml 布局，它使用以下代码设置为菜单布局：

```
menu.setMenu(R.layout.activity_menu); 
```

布局看起来不错，但我不知道如何操作 mainactivity 来显示新的片段或活动。

有人对这个库有很好的实现吗？

我的幻灯片菜单实现：

```
menu.setMode(SlidingMenu.LEFT_RIGHT);
        menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_NONE);
        menu.setFadeDegree(0.35f);
        menu.setShadowWidth(20);
        menu.setShadowDrawable(R.drawable.shadow);
        menu.setBehindOffset(150);
        menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);

        menu.setMenu(R.layout.activity_menu);
        menu.setSecondaryMenu(R.layout.secondary_menu);

        menu.setSecondaryShadowDrawable(R.drawable.shadowright);

menuBtn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                menu.toggle();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:48:40.807

成功实现了这一点。这有点复杂，但我愿意伸出援手。随时对这个问题发表评论，以便我可以为您提供一些帮助。

# git - 如何使用 git 重新定义这些复杂的合并提交

> ID：14581767
> 
> 赞同：2
> 
> 时间：2013-01-29T11:23:49.047
> 
> 标签：git, branching-and-merging, rebase

目前我有这个复杂的合并提交树：

```
*   36cd4ff merge commit to rebase 12 (master,origin/master,HEAD)
|\  
| *   f8d22cf merge commit to rebase 11
| |\  
| | *   4381ba4 merge commit to rebase 10
| | |\  
| | | * c81227f commit to rebase 9
| * | | d16e5ca commit to rebase 8
* | | | c277df7 good 7
* | | | e712ceb good 6
|/ / /  
* | | 80e3baa good 5
* | | 1559030 good 4
|/ /  
* | e8bf45c good 3
* | 4ca2d92 good 2
|/
* d43f5ac good 1 
```

我想要这样的东西（用 a 重写干净的历史`git push --force`）：

```
* 36cd4ff merge commit to rebase 12
* f8d22cf merge commit to rebase 11
* 4381ba4 merge commit to rebase 10
* c81227f commit to rebase 9
* d16e5ca commit to rebase 8
|
* c277df7 good 7
* e712ceb good 6
* 80e3baa good 5
* 1559030 good 4
* e8bf45c good 3
* 4ca2d92 good 2
* d43f5ac good 1 
```

如果我执行 git rebase -i HEAD~6，只会出现这些提交：

```
pick 80e3baa good 5
pick e712ceb good 6
pick c277df7 good 7
pick d16e5ca commit to rebase 8
pick c81227f commit to rebase 9
pick 4381ba4 merge commit to rebase 10 
```

这些提交去了哪里？

```
* f8d22cf merge commit to rebase 11
* f8d22cf merge commit to rebase 11 
```

到目前为止，唯一有效的“解决方案”是克隆存储库并从 开始 `c277df7 good 7`，从源存储库复制文件并进行提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:05:11.207

如果你变基，你用变基解决所有的合并冲突..所以你不需要单独的合并提交..所以首先 - 恢复你所有的合并提交，然后尝试以下操作：

直到“good 7”你有一个直接的提交线，之后你必须把每个提交放在树的顶部（以 7 为基础）

将 rebase 8 放在 rebase 7 之上：

```
git rebase c277df7 d16e5ca 
```

然后把 9 放在 8 上：

```
git rebase d16e5ca c81227f 
```

解决所有合并冲突（您可能需要进行其他提交或修改您的提交）

在你做任何事情之前，我建议你通过制作文件夹的副本来备份 repo（你可以使用 git reflog 倒带所有内容，但有时副本更容易）

祝你好运

编辑：如果您不想丢失“合并提交”，那么您可以通过执行 rebase d16e5ca 36cd4ff （当然是在第一次 rebase 之后）在提交 8 之上重新设置整个“merge-commit-branch”

# string - 如何将来自 gsm 模块的传入字符转换为字符串？

> ID：14581768
> 
> 赞同：0
> 
> 时间：2013-01-29T11:23:54.510
> 
> 标签：string, arduino, gsm, arrays

这是我第一次在我的 arduino 上使用 gsm shield，所以我有点困惑，所以我需要方向。我的目标是阅读发送到我的 gsm 屏蔽的消息，然后将该消息与特定字符串进行比较。如果它们相同，arduino 会做一些事情。例如，GSM shield 收到一条包含 STATUS 的短信，arduino 会做一些事情。我现在遇到的问题是如何将来自 gsm 模块的传入字符读入单个字符串，然后将该字符串与特定单词进行比较。我现在有这个代码。

```
 #include <SoftwareSerial.h>
    #include <String.h>
    char inchar[255];
    SoftwareSerial cell(2,3); 
    int led1 = 22;
    #define powerOn 4
    int i;
    //char comparestring[160];
    char command[]={'S','T','A','T','U','S','\0'}; // this is a string for command                                               ended with null terminator
    void setup()
    {
      // ilagay sa loob ng setup
      digitalWrite(powerOn, HIGH);  
      delay(1500);
      digitalWrite(powerOn, LOW);
      delay(5000);

      pinMode(led1, OUTPUT);
      digitalWrite(led1, LOW);

      Serial.begin(9600);
      cell.b-egin(9600);
      delay(30000);
      cell.println("AT+CMGF=1"); // set SMS mode to text
      delay(200);
      cell.println("AT+CNMI=1,2,0,0,0 "); // set module to send SMS data to serial out         upon receipt
      delay(200);
      Serial.println("GSM SHIELD IS NOW OK AND READY");

    }
    void loop()
    {
      while(cell.available() >0)
      {
          inchar[i]=cell.read();
          i++;
          inchar[i] = '\0';
          Serial.print(inchar);
        if (inchar==command)
        {
          digitalWrite(led1, HIGH);
          cell.write("AT+CMGS=\"");
          cell.write("09267955775");
          cell.write("\"\r");
          delay(1000);
          cell.write("\nTerminal Monitoring System");
          delay(1000);
          cell.write(0x1A); // End the SMS with a control-z
        }
        else
        {
          Serial.println("\nInvalid Keyword! Type ?");
  dig-italWrite(led1, LOW);
        }
        }
        } 
```

这些代码是应该起到作用的代码，但我认为它不起作用。我希望你能教我正确的方法。谢谢！

```
 while(cell.available() >0)
      {
          inchar[i]=cell.read();
          i++;
          inchar[i] = '\0';
          Serial.print(inchar);
        if (inchar==command) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:47:26.977

inchar 是一个字符串，因此请尝试使用 strcmp(inchar,command) 来比较两者。

# php - 去重复多维数组

> ID：14581771
> 
> 赞同：-1
> 
> 时间：2013-01-29T11:24:05.773
> 
> 标签：php, multidimensional-array, deduplication

我有一个相当简单的多维数组，我需要对其进行重复数据删除。我还需要删除任何具有值的键，因此在下面的代码中，我需要保留 city/Paris 的第二个目标/值（数组 3）并删除第 6 个数组。

```
大批
(
    [0] => 数组
        (
            [目标] => 城市
            [价值] => 伦敦
        )

    [1] => 数组
        (
            [目标] => 颜色
            [值] => 红色
        )

    [3] => 数组
        (
            [目标] => 城市
            [价值] => 巴黎
        )

    [4] => 数组
        (
            [目标] => 类型
            [价值] => 房子
        )

    [6] => 数组
        (
            [目标] => 名称
            [价值] =>
        )

    [7] => 数组
        (
            [目标] => 电子邮件
            [值] => mail@gmail.com
        )

    [9] => 数组
        (
            [目标] => custom2
            [值] => 路径/到/某事
        )

)

```

我可以通过以下方式做到这一点：

*   展平阵列
*   将目标/值分配为新的键/值（如果有欺骗，这会自动覆盖后面的值）
*   删除任何值为
*   重建阵列

这感觉不对，我确信使用 array_walk_recursive() 有更好的解决方案，因为这可能会保留原始密钥并提供更优雅的解决方案。

这是我当前的代码：

```
function _clean_and_dedupe_targeting($array) {
  // First flatten the array.
  $flattenned = array();
  foreach ($array as $item) {
    foreach ($item as $value) {
      $flattenned[] = $value;
    }
  }

  // Take alternate items as key/value pairs.
  // THIS WILL OVERWRITE ANY DUPLICATES LEAVING THE ONE SET IN CONTEXT IN PLACE.
  $keyval = array();
  array_unshift($flatenned, false);
  while (false !== $key = next($flattenned)) {
    $keyval[$key] = next($flattenned);
  }

  // Remove any items with <REMOVE>
  $remove_string = '<REMOVE>';
  $remove_keys = array_keys($keyval, $remove_string);

  // Remove any keys that were found.
  foreach ($remove_keys as $key) {
    unset($keyval[$key]);
  }

  // Rebuild the array as a multidimensional array to send to the js.
  $targeting = array();
  $i = 0;
  foreach ($keyval as $target => $value) {
    $targeting[$i] = array('target' => $target, 'value' => $value);
    $i++;
  }

  return $targeting;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:22:46.023

你的算法正是你会做的：

```
// flatten and remove empty values
$params = array();
foreach ($values as $value) {
    if (!empty($value['value'])) {
        $params[$value['target']] = $value['value'];
    }
}

// rebuild array
$values = array();
foreach ($params as $target => $value) {
    $values[] = array(
        'target' => $target,
        'value' => $value,
    );
} 
```

# python - 大数据的pyplot中的内存错误

> ID：14581775
> 
> 赞同：1
> 
> 时间：2013-01-29T11:24:22.760
> 
> 标签：python, matplotlib, memory, large-data

我是 python 和编程的新手。我正在尝试使用 python 绘制一个方向图。我在飞机上有大量点（大约 1,200,000），每个点都属于一个集群。每个集群应该是不同的颜色。我目前正在做的是为每个集群分配一种颜色并在每个点绘制一个实心圆圈。我试图通过为不同的段创建图并使用混合来组合它们来部分地做到这一点。这是该部分的代码：（sn是点的总数，label是簇号的簇数组，xcoor和ycoor是点的坐标）

```
pylab.xlim([0,250])
pylab.ylim([0,100])
plt.savefig("HK pickle.png")
for l in range (1, 20):
    for j in range(int((float(sn)/80)*(l-1)), int((float(sn)/80)*(l))):
        overlay = Image.open("HK pickle.png")
        c = label[j] % 8
        if c == 0:
            circle1 = plt.Circle((float(xcoor[j]), float(ycoor[j])), 0.05, color = (0.5, 0, 0))
        elif c == 1:
            circle1 = plt.Circle((float(xcoor[j]), float(ycoor[j])), 0.05, color = (1, 0, 0))
        elif c == 2:
            circle1 = plt.Circle((float(xcoor[j]), float(ycoor[j])), 0.05, color = (0, 0.5, 0))
        elif c == 3:
            circle1 = plt.Circle((float(xcoor[j]), float(ycoor[j])), 0.05, color = (0, 1, 0))
        elif c == 4:
            circle1 = plt.Circle((float(xcoor[j]), float(ycoor[j])), 0.05, color = (0, 0, 0.5))
        elif c == 5:
            circle1 = plt.Circle((float(xcoor[j]), float(ycoor[j])), 0.05, color = (0, 0 ,1))
        elif c == 6:
            circle1 = plt.Circle((float(xcoor[j]), float(ycoor[j])), 0.05, color = (0.5, 0.5 ,0))
        elif c == 7:
            circle1 = plt.Circle((float(xcoor[j]), float(ycoor[j])), 0.05, color = (0.5, 0 ,0.5))
        fig = plt.gcf()
        fig.gca().add_artist(circle1)
        del circle1
    plt.savefig("HK pick.png")
    del fig
    back = Image.open("HK pick.png")
    comp = Image.blend(back, overlay, 0.5)
    comp.save("HK pickle.png", "PNG")
    del comp
pylab.xlim([0,250])
pylab.ylim([0,100])
plt.savefig("HK plots.png") 
```

但是，这会导致以下错误：

```
 fig.gca().add_artist(circle1)
  File "C:\Python27\lib\site-packages\matplotlib\axes.py", line 1404, in add_artist
    self.artists.append(a)
MemoryError 
```

错误出现在 l = 11。我一直在并行检查任务管理器，当 MemoryError 出现时它仍然有将近 3GB 的可用内存。请帮我解决一下这个。

我是新手，仍然不知道我提供的信息是否足够。如果您需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:22:12.330

`scatter`使用和 关键字可能会做得更好`rasterized=True`，这会将所有矢量图形扁平化为光栅图像（这将占用更少的内存）。

就像是：

```
colors_lst = [ ... your tuples ...]
color = map(lambda x: colors_lst[x % 8], labels)
ax.scatter(xcoord, ycoord, c = colors, rasterized=True) 
```

我认为将替换您的大部分脚本。

[`scatter`文件](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.scatter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:17:02.307

如果您使用 32 位操作系统或运行 32 位 python，您将无法有效地处理大型数据集（安装 64 位 python、numpy、matplotlib 等可能会解决此问题）。

但是，我建议首先尝试以较低的分辨率绘制您的图片，然后看看这是否适合您（结果可能已经*足够好了*）。例如，我首先将`j`迭代器替换为`for j in range(int((float(sn)/80)*(l-1)), int((float(sn)/80)*(l))):`类似

```
for j in np.linspace(int((float(sn)/80)*(l-1)), int((float(sn)/80)*(l), num=20):
    j = int(j) 
```

这将在您的限制范围内为您提供 20 个`j`值的范围，但不是每个整数值。请注意，您将需要`j`转换为 a `int`，因为它可能是 a `np.float`！

其他风格的注释在这一点上不太有用，但通常你不需要`del`经常 - python 有一个非常好的垃圾收集器可以为你做这件事。您还可以在迭代器之外设置限制 - 这可能会使调试更加直接：

```
start_j = int((float(sn)/80)*(l-1)))
end_j = int((float(sn)/80)*(l))
for j in np.linspace(start_j, end_j, num=20):
    etc. 
```

# photoshop - Extendscript Photoshop 版本错误

> ID：14581781
> 
> 赞同：1
> 
> 时间：2013-01-29T11:24:33.867
> 
> 标签：photoshop, extendscript, photoshop-script

我在 Photoshop 中使用extendscript，但是当版本不匹配时，Photoshop 会弹出一个对话框

![保留图层](../Images/fca81ac571e0bda577b4e55f48a3894f.png)

我只希望它保留图层并继续。我如何告诉 Extendscript 这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-30T22:17:16.873

我必须查看您使用的代码才能了解对话框出现的原因。但是，解决此问题的一种方法是直接通过`app.executeAction()`调用调用 Photoshop 事件。可选的第三个参数是您希望如何处理对话框；您可以传递的选择之一是`DialogModes.NO`压制它们。

为了了解如何创建 Photoshop 事件，您可以使用 ScriptingListener 插件查看为各种操作生成的事件。这是一个[古老的介绍](http://blogs.adobe.com/crawlspace/2006/05/installing_and_1.html)。[您可以从这里](http://www.adobe.com/devnet/photoshop/scripting.html)下载插件。

# windows-8 - Windows 8 24x24 徽章徽标图像未通过 wac 工具测试

> ID：14581782
> 
> 赞同：8
> 
> 时间：2013-01-29T11:24:33.767
> 
> 标签：windows-8

我正在使用工具**Microsoft Visual Studio Express for Windows 8**开发 Windows 8 应用程序 当我创建要上传到应用程序商店的应用程序包时，它无法通过 WAC 工具测试并给出以下错误。

```
Image reference "images\badge_24.png": The image "C:\Program Files\WindowsApps
\myproject\images\badge_24.png" has an ABGR value "0x1D5E50E9" at position (9, 0) 
that is not valid. The pixel must be white (##FFFFFF) or transparent (00######). 
```

我在网上搜索，发现链接[Badge Issue in VS update 1](http://support.microsoft.com/kb/2792380#survey)

我没有使用 34x34 图像作为徽章徽标。我使用的是 24x24 图像，但我仍然收到 wac 工具的错误，因为**我无法将其提交到 App Store。**

我尝试使用 34x34 图像，但它不起作用，谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T10:02:52.343

我非常了解这个问题。它与图像大小无关，而与图像内容有关。错误消息实际上非常精确 - 并非徽章徽标中的所有像素都满足它们是全白##FFFFFF 或透明 00###### 的要求。

我建议您的第一步是确认我的回答是正确的。为此，只需创建一个完全白色的临时 24x24 图像。如果您使用此临时白色徽标，则 WAC 应该通过。

下一步是获取正确的徽标图像。我使用 GIMP 图形工具 ( [http://www.gimp.org/downloads/](http://www.gimp.org/downloads/) ) 执行了以下操作：

1.  识别徽标的背景颜色，导航到颜色 > 颜色到 alpha 并选择识别的颜色。这使您的背景透明。
2.  现在是时候通过 Colors > Desaturate 对整个图片进行去饱和处理了
3.  仅将位限制为 ##FFFFFF 和 00######：导航到颜色 > 亮度 - 对比度并将亮度和对比度都设置为最大值。

可以肯定的是，我是对的，您可能希望将您当前的徽章徽标附加到您的原始问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-24T22:14:13.890

解决方案真的很简单！只需将您的徽章徽标导入 Adode Photoshop 并按 [Control + L] 或转到菜单 [图像> 调整> 色阶] 并将值设置为：

通道：RGB Input Levels up 字段：253；1,00; 255 Input Levels down 字段：255；255

保存您的图像！

之后，只需重做在 Visual Studio 上创建应用程序包的过程。现在享受您的应用程序批准！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T00:25:26.647

自动化该过程的一种方法是编写一个“修复”图像的小型 C# 控制台应用程序：

添加对包 Magick.NET.Core-Q8 的 nuget 引用
执行以下代码以删除 < 255 个颜色通道：

```
foreach( string ThisFile in Directory.GetFiles( @"C:\YourUwpApplication\Assets", "LockScreenLogo.*.png" ) )
{
    using( ImageMagick.MagickImage TheImage = new ImageMagick.MagickImage( ThisFile ) )
    {
        ImageMagick.PixelCollection Pixels = TheImage.GetPixels();

        for( int IX = 0; IX < TheImage.Width; IX++ )
        {
            for( int IY = 0; IY < TheImage.Height; IY++ )
            {
                Pixels[ IX, IY ].SetChannel( 0, 255 );
                Pixels[ IX, IY ].SetChannel( 1, 255 );
                Pixels[ IX, IY ].SetChannel( 2, 255 );
            }
        }

        TheImage.Write( ThisFile );
    }
} 
```

享受
- 西蒙

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-30T21:11:22.560

可能的选项（为我工作）删除：

**`<uap:LockScreen Notification="badgeAndTileText" BadgeLogo="" />`**

来自 Package.appxmanifest 文件（作为 xml）

如果应用程序与 LockScreen 通知无关，这似乎是一个选项。

# css - 如何将样式添加到特定列表元素，即单个 里面 在这？

> ID：14581783
> 
> 赞同：3
> 
> 时间：2013-01-29T11:24:34.587
> 
> 标签：css

我对列表的**CSS**样式有疑问。

这是代码。

**CSS**

```
NAV {
width: 940px;
height: 50px;
float: left;
font-family: Geneva,Arial;
border: 1px solid #000000;
background-color: #D0DBF0;}

NAV ul {
    margin: 0px auto;
    padding-top: 15px;
        padding-left: 70px;
    list-style-type: none;
}
NAV li {
    display: inline;

}

NAV li a {
    float: left;
    text-align: center;
    border-right: 2px solid #00DBF0;
    width: 100px;  
    font-size: 14px; 
    padding: 0px 10px;
    color: #0000FF;
    text-decoration: none;
} 
```

**HTML**

```
<NAV>
        <UL>
            <LI><a href="#">Home</a></LI>
            <LI><a href="#">About Us</a></LI>
            <LI><a href="#">Contact Us</a></LI>
            <LI><a href="#">Red Widgets</a></LI>
            <LI><a href="#">Blue Widgets</a></LI>
            <LI><a href="#">Green Widgets</a></LI>
        </UL>
    </NAV> 
```

所以在这里我为导航列表设计了所有东西，但对于第一个列表，即主页。

`<LI><a href="#">Home</a></LI>`我想要右边框。请帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T11:28:10.410

您可以使用[`:first-child`](http://www.w3.org/TR/CSS2/selector.html#first-child)伪类来做到这一点：

```
nav li:first-child 
```

或者

```
nav li:first-child a 
```

取决于您是要定位列表项 ( `<li>`) 还是锚点 ( `<a>`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T11:30:21.350

您应该添加一个类或 id。

例如（我们还假设稍后您想要一个“当前选定”项目）：

**CSS：**

```
.first a { /* specific style for first item */ }
.current a { /* specific style for current item */} 
```

**HTML：**

```
<NAV>
        <UL>
            <LI class="first"><a href="#">Home</a></LI>
            <LI><a href="#">About Us</a></LI>
            <LI class="current"><a href="#">Contact Us</a></LI>
            ...

            <!-- if the first item happens to be the curent one: -->
            <LI class="first current"><a href="#">Home</a></LI>
        </UL>
</NAV> 
```

[JsFiddle在这里](http://jsfiddle.net/5faP9/)

# iphone - NSUserDefault 在 UIswitches Xcode 上保存和加载设置

> ID：14581789
> 
> 赞同：0
> 
> 时间：2013-01-29T11:24:59.600
> 
> 标签：iphone, xcode, uiswitch

我有一个设置视图，我在其中为用户提供了更改其设置的选项。

设置视图有一个`table view`2 `UISwitches`。我需要`NSUserdefaults`有关保存状态的方法以及如何编写代码来加载我的值的帮助。

到目前为止，这是我的代码

```
In `cellForRowAtIndexPath` method:

      [cell.switchButton addTarget:self action:@selector(switchButtonTapped:) forControlEvents:UIControlEventValueChanged];

    [[NSUserDefaults standardUserDefaults] setBool:TRUE forKey:@"myBool"];
    BOOL hBool = [[ NSUserDefaults standardUserDefaults] boolForKey:@"myBool"];

    NSLog(@"tag %i", tappedSwitch.tag);

    if (cell.switchButton.tag == 0) {
        [cell.switchButton setOn:hBool];

    }    
return cell;
}

    - (void) switchButtonTapped: (id) sender {

            tappedSwitch = (UISwitch *) sender;
        switch (tappedSwitch.tag) {
            case 0:
                passcodeSwitchIsOn = tappedSwitch.isOn;
                if (passcodeSwitchIsOn) {

                    GCPINViewController *PIN = [[GCPINViewController alloc]
                                                initWithNibName:nil
                                                bundle:nil
                                                mode:GCPINViewControllerModeCreate];
                    PIN.messageText = @"Enter a passcode";
                    PIN.errorText = @"The passcodes do not match";
                    PIN.title = @"Set Passcode";
                    PIN.verifyBlock = ^(NSString *code) {
                    NSLog(@"setting code: %@", code);
                    code = saveString; 
                    return YES;
                        };
                    [PIN presentFromViewController:self animated:YES];
                    [PIN release];
     // method of saving                    
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; 
                [defaults setBool:passcodeSwitchIsOn forKey:@"myBool"];
                [defaults synchronize];
                }

                break;
            case 1:
                bluetoothSwitchIsOn = tappedSwitch.isOn;
                if (bluetoothSwitchIsOn) {

                    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Bluetooth Switch" message:@"Bluetooth Switch is ON" delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];
                    [alert show];
                    [alert release];

                }

                break;

            default:
                break;
        }
            [settingsTable reloadData];
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:39:04.697

创建对用户默认值的引用：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; 
```

设置一个值：

```
[defaults setBool:1 forKey:@"bluetooth"]; 
```

当蓝牙关闭时，您可以将其设置回 0：

```
[defaults setBool:0 forKey:@"bluetooth"]; 
```

用户默认值由您选择的字符串标识。在这种情况下：@“蓝牙”。默认值将为零，直到您创建它并将其设置为其他值。

所以你可以说：

```
if (!bluetooth) // bluetooth is off
else  // bluetooth is on 
```

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T10:06:10.520

**这可用于处理您的问题。**

```
IBOutlet UISwitch * swi_yourswitch;
@property(nonatomic,retain)  UISwitch * swi_yourswitch; 
```

**暗示**

```
@synthesise swi_yourswitch;

- (void) switchButtonTapped: (id) sender {
    UISwitch * switchObj = (UISwitch*)sender;
    if(switchObj == self.swi_yourswitch){
        if (self.swi_yourswitch.on){

            NSLog(@"On");
        }
        else{
            NSLog(@"Off");
            [self.swi_yourswitch setOn:0];
        }
    } 
```

**储存价值**

```
[[NSUserDefaults standardUserDefaults] setBool:TRUE forKey:@"mybool"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

**获取储值**

```
[NSUserDefaults standardUserDefaults] valueForKey:@"mybool"] 
```

# c# - 在鼠标单击覆盖时在 PictureBox 上协调表单鼠标 - C#

> ID：14581793
> 
> 赞同：0
> 
> 时间：2013-01-29T11:25:12.290
> 
> 标签：c#, winforms, picturebox, mouseclick-event

我正在绘制一个继承自 PictureBox 的 MyPictureBox，并且我重写了它，`OnMouseClick`
我将参数设置为：`(MouseEventArgs e)`所以我在单击时获得了鼠标坐标，
问题是坐标是`MyPictureBox`相对坐标，而我需要从`Form`.

如何做呢 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:35:49.950

首先将传递的鼠标坐标映射到屏幕上。然后将其映射回表单的客户端坐标。所以典型的代码看起来像这样，为了清楚起见，拼写出来：

```
 private void pictureBox1_MouseDown(object sender, MouseEventArgs e) {
        var pbox = (PictureBox)sender;
        var form = this;
        var screenPos = pbox.PointToScreen(e.Location);
        var formPos = form.PointToClient(screenPos);
        // etc..
    } 
```

或简短版本：

```
 private void pictureBox1_MouseDown(object sender, MouseEventArgs e) {
        var formPos = this.PointToClient(pictureBox1.PointToScreen(e.Location));
        // etc..
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:31:05.573

最简单的方法是使用

```
this.PointToClient(Cursor.Position); 
```

这将获得鼠标光标相对于表单的位置。

# objective-c - 确定 UITableViewCell 的位置是否在屏幕内

> ID：14581796
> 
> 赞同：1
> 
> 时间：2013-01-29T11:25:21.583
> 
> 标签：objective-c, uitableview, cell

我正在尝试确定 UITableViewCell 相对于屏幕的位置。例如，假设我有一个包含 13 个单元格的表格视图（其中只有 6 个在屏幕上可见，要查看其余部分您必须滚动），我想以编程方式确定 13 个单元格中的哪一个是最后一个在任何时间点都可见。

我正在尝试创建这样的效果：

![TableView 最后一个单元格](../Images/f1f45007cb191019fedbac334febe688.png)

当你向下滚动时，只有最后一个单元格是“模糊的”（直到你到达单元格的末尾）。

我想做的看起来像这样：

```
if table has more cells that aren't visible at the moment
  last visible cell has a different colour
otherwise all cells have the same colour 
```

现在，我可以看到一个非常简单的解决方案是添加一个半透明的 PNG 来实现这种效果，但我想知道是否可以通过编程方式来实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:54:31.447

`UITableView`扩展自，因此`UIScrollView`您可以获取`contentOffset`以了解它是否在其内容的末尾使用`yourTableView.contentOffset`并与 进行比较`contentSize`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:48:13.247

我相信得到你想要的最好的方法是在你的 UITableView 中创建一个渐变

```
CAGradientLayer *gradient = [CAGradientLayer layer];
        gradient.frame = self.view.bounds;
        gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor clearColor]CGColor], (id)[[UIColor whiteColor]CGColor], nil];
        [self.view.layer addSublayer:gradient]; 
```

不要忘记在你的项目中包含 Quartz。

# ios - 旧的配置文件不断弹出

> ID：14581798
> 
> 赞同：2
> 
> 时间：2013-01-29T11:25:22.067
> 
> 标签：ios, xcode, provisioning

我有一个应用程序，我在 AppStore 上已经有一段时间了，我已经更新了好几次了。

在我从头开始安装我的 Mac 而没有备份我的证书（我现在知道我应该这样做）之后，我一直在尝试再次设置签名过程，但没有成功。我得到错误：

```
CodeSign error: code signing is required for product type 'Application' in SDK 'iOS 6.1' 
```

![代码签名](../Images/1d0633b4858a462181cf6a709dc531ef.png)

经过几次尝试，我删除了 KeyChain 中的所有证书，删除了管理器和手机上的所有配置文件，并删除了配置门户上的所有内容。

然后我让 Xcode 做所有事情。（今天安装了 XCode 4.6）它将开发人员和分发证书添加到我的钥匙串中，并将开发和分发配置文件添加到组织者。

但是发生了一件奇怪的事情。几年前我在另一个项目中使用的旧配置文件不断出现。我想知道为什么以及是否会干扰签名过程？

以下来自供应门户。较低的轮廓是不断弹出的旧轮廓。它有另一个 appID。它说的很奇怪。仅在那个上“由 XCode 管理”。我让 Xcode 做这一切。上面的日期与我今天创建的个人资料相同。

![供应门户](../Images/aad33cfb0492f5b53c9e30088348aa59.png)

我可以摆脱这个旧的吗？难道是Xcode很困惑，这就是原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:39:23.480

旧的配置文件可能仍然存在于您的项目文件中。我有一个类似的问题。这是我修复它的方法：[链接](http://www.pixeldock.com/blog/code-sign-error-provisioning-profile-cant-be-found/)

# android - 将值从活动传递到弹出窗口

> ID：14581803
> 
> 赞同：0
> 
> 时间：2013-01-29T11:25:49.827
> 
> 标签：android, popup

如何将活动中的值传递给弹出窗口？虽然这似乎是一个愚蠢的问题。代码片段如下所示。我只需要将函数 onButtonPopup() 中的值传递给弹出窗口（shape_details.xml）。提前致谢。

```
public void onButtonPopup(View target, int position) {
    // Make a View from our XML file
    LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View layout = inflater.inflate(R.layout.shape_details, (ViewGroup) findViewById(R.id.llShapeDetails));

    Display display = getWindowManager().getDefaultDisplay();

    int width = display.getWidth();
    int height = display.getHeight();

    pw = new PopupWindow(layout, width - width / 4, height - height / 3, true);

    pw.setAnimationStyle(R.style.PopupWindowAnimation);
    pw.showAtLocation(layout, Gravity.CENTER, 0, 0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-09T17:07:29.417

要从任何活动发送/传递任何值，我们需要两个活动。就像第一个是“MainActivity”，第二个是“PopUpWindowActivity”。现在，我们创建“PopUpWindowActivity”。

```
 public class PopUpWindowActivity {
  public void onButtonPopup(final View target, int position) {
    //You can work here with "position"
    }
  } 
```

现在我们将从“MainActivity”发送/传递值

```
 public class MainActivity extends AppCompatActivity {
           //onCreate Metod and other work here
           //Here we will send/pass data to "PopUpWindowActivity"
           SampleButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    PopUpWindowActivity popUpWindow = new PopUpWindowActivity();
                    popUpWindow.onButtonPopup(view, 1);
                    //I take position value is 1\. You can send your own.
                }
            });
    } 
```

# c++ - 无法使用 CV_32UC1

> ID：14581806
> 
> 赞同：6
> 
> 时间：2013-01-29T11:25:55.830
> 
> 标签：c++, opencv

我需要在矩阵中存储 32 位无符号整数。

当我尝试创建矩阵时：

```
Mat frameV(frameT1.rows-2*R, frameT1.cols-2*R, CV_32UC1 ); 
```

这会产生编译错误：

```
error C2065: 'CV_32UC1' : undeclared identifier 
```

虽然 CV_8UC1 有效，但我需要 CV_32UC1。

我正在使用 MSVC 2010 和 OpenCV 2.4.3。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T11:42:44.773

没有这样的类型`CV_32UC1`。这是因为 OpenCV 不支持 32 位`unsigned int`类型。OpenCV 支持的最大整数类型是 32 位`int`，可由`CV_32SC1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:04:28.633

在这里，您可以找到矩阵数据类型的完整列表。

[http://opencv-srf.blogspot.com/2010/09/opencv-basics.html](http://opencv-srf.blogspot.com/2010/09/opencv-basics.html)

根据那篇文章，32 位深度矩阵应该是有符号的或浮动的。OpenCV 不支持无符号 32 位深度矩阵。

# android - ListView/GridView 元素的背景图像在滚动时消失

> ID：14581807
> 
> 赞同：0
> 
> 时间：2013-01-29T11:25:58.163
> 
> 标签：android, android-listview, android-gridview

在某些设备上-（Samsung tab（3.0 版）、Nexus（4.1 版）和 Htc one v（4.0 版））但不是全部（如 Galaxy（2.2 版）、Htc WildFire（2.3.3 版）），背景图片ListView/GridView 在滚动时消失

**1-当没有运动时，它看起来像这样**（请看外圆白框）

![在此处输入图像描述](../Images/636abbed21b5fcc38f0fa1b17199ce40.png)

**2-但是在滚动外框时会消失几毫秒（显示闪烁）**

![在此处输入图像描述](../Images/b3ac30f35355d24c7828a4ed98fd7b29.png)

我膨胀的 xml 布局（converView）看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/movieLayout"
        android:layout_width="match_parent"
        android:layout_height="320dp"
        android:background="@drawable/frame"
        android:padding="4dp" >

        <!-- android:background="@drawable/movie_image_frame_shape" -->

        <ImageView
            android:id="@+id/movieImg"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/artwork_moviehomepage" >
        </ImageView>
    </LinearLayout>

    <TextView
        android:id="@+id/movieName"
        style="@style/textviewStyle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/movieLayout"
        android:layout_centerHorizontal="true"
        android:ellipsize="end"
        android:gravity="center_horizontal"
        android:lines="2"
        android:textColor="@color/white"
        android:textSize="@dimen/NORMAL_TEXT_SIZE"
        android:textStyle="bold" >
    </TextView>

    <TextView
        android:id="@+id/movieReleaseDate"
        style="@style/textviewStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/movieName"
        android:layout_centerHorizontal="true"
        android:singleLine="true"
        android:textColor="@color/text_color_yellow"
        android:textSize="@dimen/NORMAL_TEXT_SIZE"
        android:textStyle="bold" >
    </TextView>

    <ImageView
        android:id="@+id/prebook_ribon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="2dp"
        android:layout_marginTop="4dp"
        android:src="@drawable/prebook_ribbon" />

</RelativeLayout> 
```

网格视图是这样的

```
 <GridView
        android:id="@+id/movieImgGridView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/header"
        android:layout_centerInParent="true"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="10dp"
        android:cacheColorHint="@color/transparent"
        android:gravity="center"
        android:horizontalSpacing="@dimen/movie_img_horizontal_spacing"
        android:listSelector="@color/transparent"
        android:numColumns="3"
        android:paddingLeft="12dp"
        android:paddingRight="12dp"
        android:scrollbars="none"
        android:stretchMode="columnWidth"
        android:verticalSpacing="10dp" >
    </GridView> 
```

# android - GPS 在某些 android 设备中返回空位置

> ID：14581808
> 
> 赞同：0
> 
> 时间：2013-01-29T11:26:01.110
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

在我的应用程序中，我需要每 30 分钟显示一次 Current Lcoation。为了实现这一点，我使用 Timer 每 30 分钟触发一次。

它在 HTC Wildfire S、Sony Xperia V 等一些 android 设备中运行良好……但在三星 S Duos 和 HTC One X 中无法运行……因为当我请求 GPS 时，它返回 NULL 作为当前位置值。我不知道为什么这些设备不支持我的应用程序，任何人都可以提供专业的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:40:01.107

您应该像这样检查提供者的可用性：

```
List<String> providers = locationManager.getProviders(true); 
```

然后你开始收听可用的传感器：

```
if (providers.contains(LocationManager.GPS_PROVIDER))
{
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,...);
} 
```

如果您想要的传感器不可用，您应该向用户弹出一个对话框，要求他激活 GPS，或者您想要什么。

另外，我有一个建议给你：你不应该开始请求位置更新`Timer`，你应该传递到`requestLocationUpdates()`你想要位置更新的最短时间和距离。

# c# - 从字节转换后图像质量降低

> ID：14581810
> 
> 赞同：2
> 
> 时间：2013-01-29T11:26:02.930
> 
> 标签：c#, image, memorystream

提供有关此主题的背景信息。我正在尝试通过使用 memorystream 返回 memorystream.ToArray(); 将图像文件转换为 byte[]; 但是，我注意到转换 inputBitmap -> byte[] -> outputBitmap 后图像质量下降。outputBitmap 的质量低于 inputBitmap。我将图像转换为 byte[] 的代码如下

```
MemoryStream mstream = new MemoryStream();
myImage.Save(mstream,System.Drawing.Imaging.ImageFormat.Jpeg);
byte[] buffer = mstream.ToArray(); 
```

并从 byte[] 转换回图像，

```
MemoryStream mstream = new MemoryStream(buffer);
Image newImage = Image.FromStream(mstream); 
```

有人可以解释为什么会这样，并希望能指导我纠正这个问题吗？请注意，在我使用 inputBitmap 作为图片框.Image 之前，它的质量看起来很棒。但是在从 byte[] 转换为 outputBitmap 之后，将 outputBitmap 设置为我的图片框.Image 变得有点模糊且质量低下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T11:30:31.813

有几件事对我来说很突出。

1.  您正在保存为 JPG，而不是像 PNG 这样的无损格式。
2.  您没有设置用于保存图像的压缩质量。

这意味着您可能正在压缩已经压缩的图像，因此在此过程中会丢失更多信息。

如果可以的话，我会更改为将文件另存为 PNG，否则请确保在保存之前将 JPG 的质量设置为 100%。这将减少对文件的压缩，从而最大限度地减少数据丢失。

如果您仍然看到质量差异，那么我能想到的唯一可以解释的就是屏幕截图和保存的文件之间的分辨率（像素数和/或颜色深度）差异。确保将目标位图大小和颜色深度设置为与源位图相同。

# mysql - 如何确定哪种类型最适合 1-2 个单词的列？

> ID：14581811
> 
> 赞同：-1
> 
> 时间：2013-01-29T11:26:13.460
> 
> 标签：mysql, sql

我有一列由一到两个单词的记录组成。我不确定是否应该将其设置为 VARCHAR、TEXT 或其他内容。

在对此进行研究时，我了解到它们[的存储方式有所不同](https://stackoverflow.com/questions/2023481/mysql-large-varchar-vs-text)，但我无法确定哪种更适合此类内容。

**选择此类列的类型时应考虑哪些因素？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:28:40.877

取决于单词的长度，但如果你说的是每个单词最多 15 个字符，我会选择`VARCHAR(45)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:28:38.323

Longtext 肯定是唯一的选择。
Varchar 不是一个选项 - 您可以使用 255 个字符存储哪两个单词？一个人也不够

# android - 如何强制android在内部存储器上安装应用程序

> ID：14581812
> 
> 赞同：4
> 
> 时间：2013-01-29T11:26:13.650
> 
> 标签：android

我有一个从私人服务器下载的应用程序，它可以在大多数手机上安装，但我在 HTC Desire C 上安装它时遇到问题。手机没有 SD 卡。我四处搜索，发现一个清单设置应该暗示内部存储，或者说至少没有偏好安装应用程序的位置。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.carefreegroup"
    android:versionCode="1"
    android:versionName="1.0"
    android:installLocation="auto" > 
```

但是，这不起作用。

我怎么能告诉android应用程序**必须**安装在内部存储器上

谢谢马特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T11:31:28.273

在清单中设置

```
android:installLocation="internalOnly" 
```

这会将应用程序安装到内部存储器中，如果内部存储器中没有空间，则根本不会安装它

[http://developer.android.com/guide/topics/manifest/manifest-element.html](http://developer.android.com/guide/topics/manifest/manifest-element.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T11:34:01.213

属性**android:installLocation**可以有以下可能的值。

**internalOnly：**应用程序必须仅安装在内部设备存储上。如果设置了此项，应用程序将永远不会安装在外部存储上。如果内部存储已满，则系统将不会安装该应用程序。如果您未定义 android:installLocation，这也是默认行为。

**auto**：应用程序可能安装在外部存储上，但系统默认将应用程序安装在内部存储上。如果内部存储已满，则系统会将其安装到外部存储上。安装后，用户可以通过系统设置将应用程序移动到内部或外部存储。

**preferExternal：**应用程序首选安装在外部存储（SD 卡）上。无法保证系统会遵守此请求。如果外部媒体不可用或已满，或者应用程序使用前向锁定机制（外部存储不支持），则应用程序可能安装在内部存储上。安装后，用户可以通过系统设置将应用程序移动到内部或外部存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:28:43.297

根据[文档](http://developer.android.com/guide/topics/data/install-location.html)，如果您未设置该首选项，则该应用程序将安装在内部存储上并且不可移动。

# jenkins - 如何使用 Jenkins clover 插件从 Clover 报告中排除文件

> ID：14581814
> 
> 赞同：1
> 
> 时间：2013-01-29T11:26:30.600
> 
> 标签：jenkins, clover

有谁知道如何使用 Jenkins Clover 插件排除文件或目录？它生成的报告包含 src/test 下的文件，这导致结果出现偏差。

顺便提一句。我正在使用 Ant 来构建项目（而不是 Maven）。我应该在 ant 构建文件中添加块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:36:48.120

[http://jenkins-php.org/](http://jenkins-php.org/)对 ant/jenkins 设置很有帮助。我确实更改了 phpunit 的 build.xml。我将以下代码添加到 phpunit exec 任务`<arg line="${basedir}/path/to/tests"/>`中。仅指向我在詹金斯工作区中的测试文件夹。

从三叶草报告中排除文件夹/文件。您需要有一个 phpunit 配置文件。将其命名为 phpunit.xml.dist 并将其保存在您的构建文件中。上面的链接上有更多信息和示例。将以下代码添加到 phpunit.xml.dist 文件中。希望这可以帮助。

```
 <filter>
    <blacklist>
       <directory>PATH/TO/FOLDER/</directory> 
       <file>PATH/TO/File</file>
    </blacklist>
  </filter> 
```

链接到 phpunit 配置文件手册。 [http://www.phpunit.de/manual/current/en/appendixes.configuration.html](http://www.phpunit.de/manual/current/en/appendixes.configuration.html)

# android - android：如何检索动态edittext

> ID：14581815
> 
> 赞同：0
> 
> 时间：2013-01-29T11:26:31.007
> 
> 标签：android, android-edittext

如何在 android 中获取动态创建的编辑文本的 id，例如，我动态创建了 3 个具有相同名称 edtex 和不同 id 的 editext。我怎样才能从中检索特定的edittext ..提前谢谢

```
for(int i=0;i<toke.length;i++)
          {
              Log.d("","toke="+" "+toke[i]);
              if(toke[i].contains("AnswerBox"))
              {
                Log.d("","####### answerbox present ########");  
                multied=new EditText(addition.this);

                multied.setId(did);
                multied.setWidth(80);
                multied.setHeight(40);
                // tl.addView(multied);
                relay.addView(multied);
                did++;

              }
} 
```

从上面的代码中，我如何检索在第二次迭代中创建的edittext ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:43:20.153

请检查以下代码以检索`edittext`

```
EditText edtTxt=(EditText ) findViewById(did); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:29:28.413

在 android 中，您无法获取（或设置）动态创建的视图的资源 ID。但是对于您要执行的操作，您可以扩展 TextView 并添加 id 属性。

# asp.net - 向表单添加唯一的 ValidationGroup 名称

> ID：14581828
> 
> 赞同：0
> 
> 时间：2013-01-29T11:27:21.100
> 
> 标签：asp.net, forms, function, validation

在将模块/控件添加到具有表单验证的 ASP.NET CMS 中的网页时，我遇到了一个问题，它将验证页面上的所有表单，因为 ValidationGroup 具有相同的名称。如何用函数解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:27:21.100

我想出了以下解决方案：

遍历某个占位符以将唯一的 ValidationGroup 名称分配给每个表单的函数。

```
 Public Shared Sub SetValGroupControls(PageModule As Control, valGroupName As String)
      For Each ctrl As Control In PageModule.Controls
        If TypeOf ctrl Is RequiredFieldValidator Then
          DirectCast(ctrl, RequiredFieldValidator).ValidationGroup = valGroupName
        ElseIf TypeOf ctrl Is RegularExpressionValidator Then
          DirectCast(ctrl, RegularExpressionValidator).ValidationGroup = valGroupName
        ElseIf TypeOf ctrl Is CompareValidator Then
          DirectCast(ctrl, CompareValidator).ValidationGroup = valGroupName
        ElseIf TypeOf ctrl Is CustomValidator Then
          DirectCast(ctrl, CustomValidator).ValidationGroup = valGroupName
        ElseIf TypeOf ctrl Is RangeValidator Then
          DirectCast(ctrl, RangeValidator).ValidationGroup = valGroupName
        ElseIf TypeOf ctrl Is Button Then
          DirectCast(ctrl, Button).ValidationGroup = valGroupName
        End If

        If ctrl.Controls.Count > 0 Then
          SetValGroupControls(ctrl, valGroupName)
        End If

      Next
    End Sub 
```

其中 PageModule 代表包含验证控件的占位符（以避免遍历页面上的所有控件），而 ValGroupName 代表将被分配为名称的唯一字符串。

假设我的验证控件包含在一个名为“plhMyForm”的占位符中，您可以像这样调用该函数：

```
 Dim nGuid = String.format("{0}-validation", Guid.NewGuid())
    SetValGroupControls(plhMyForm, nGuid) 
```

上面将创建一个独特的字符串，如： **24ad5ae3-fead-4a6f-98f3-dffcd2e815ba-validation**

当然，您可以使用自己独特的字符串生成。

现在您可以将 ValidationGroup 名称留空，该函数会为您分配一个。这样，同一页面上需要验证的每个表单都将单独验证自己。

# tcl - 如何使 Tcl 解释器源文件并同时从 shell 命令打开管道？

> ID：14581831
> 
> 赞同：2
> 
> 时间：2013-01-29T11:27:23.817
> 
> 标签：tcl, tk

有没有办法让 Tcl 解释器**源文件**并从 shell 命令并行**打开管道？**

更详细地说，我有一个从 tcl/tk 构建的 GUI。我希望我的 tcl 脚本为 GUI 变量提供一个设置文件，同时从**[tclsh setting_file]**打开一个管道以将输出重定向到我的 GUI 标准输出。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:39:23.030

我不相信在子进程中运行设置命令的处理是一个好主意。也许[安全的口译员](http://www.tcl.tk/man/tcl8.6/TclCmd/safe.htm)会更好？

重新捕获输出，您可以[选择一种技术来进行标准输出捕获](https://stackoverflow.com/questions/14530354/stdout-redirection)，然后在 GUI 中显示捕获的缓冲区的内容（[`encoding convertfrom`](http://www.tcl.tk/man/tcl8.6/TclCmd/encoding.htm#M6)如果您使用我的解决方案来解决该问题，则在使用获取字符后）但是您已经如果需要很长时间运行，用户代码可能会阻止事情的一般性问题。你*可以*通过使用线程来解决这个问题，但我怀疑避免复杂性更容易，只是让糟糕的设置代码导致用户必须修复的问题。（该`catch`命令可以帮助您在获取设置文件期间从任何彻底的错误中恢复。）

# javascript - Javascript不显示弹出窗口

> ID：14581836
> 
> 赞同：0
> 
> 时间：2013-01-29T11:27:42.427
> 
> 标签：javascript

我想让一个弹出窗口出现在屏幕中央，但是当我使用 marginTop 属性时，窗口不会出现。如果删除 marginTop 属性，它总是出现在左上角。我使用 php 5.4 。我究竟做错了什么？

```
function show_popup(id) {
        if (document.getElementById){
            obj = document.getElementById(id);

            if (obj.style.display == "none") {
               obj.style.marginTop = 20%;  //if i remove this line it works 
               obj.style.display = "";

            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:29:55.793

您是否尝试设置`obj.style.marginTop = "20%"`（使用`"`）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:30:35.573

尝试用单引号包裹你的 20%....

像这样：'20%'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:30:56.083

我认为你需要`"20%"`像下面这样申请

```
obj.style.marginTop = "20%"; 
```

在此处检查语法[**Style marginTop 属性**](http://www.w3schools.com/jsref/prop_style_margintop.asp)

# debugging - gdb：如何打印当前行或查找当前行号？

> ID：14581837
> 
> 赞同：115
> 
> 时间：2013-01-29T11:27:50.847
> 
> 标签：debugging, gcc, gdb

`list`commands 打印一组行，但我需要一行，我所在的位置以及可能发生错误的位置。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2014-01-08T23:36:43.517

“框架”命令将为您提供所需的内容。（这可以缩写为“f”）。这是一个例子：

```
(gdb) frame
\#0  zmq::xsub_t::xrecv (this=0x617180, msg_=0x7ffff00008e0) at xsub.cpp:139
139         int rc = fq.recv (msg_);
(gdb) 
```

没有参数，“框架”只会告诉你你在哪里（有一个参数它会改变框架）。有关 frame 命令的更多信息，请参见[此处](https://sourceware.org/gdb/onlinedocs/gdb/Frames.html)。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-09-15T12:41:14.163

命令**where**或**frame**可以使用。where 命令将使用函数名称提供更多信息

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-01-30T11:05:22.640

我在调试时确实得到了相同的信息。虽然不是在我检查堆栈跟踪时。我认为您很可能会使用优化标志。检查这个[链接](https://stackoverflow.com/questions/2170246/why-am-i-getting-the-message-single-stepping-until-exit-which-has-no-line)- 相关的东西。

尝试使用`-g3`删除任何优化标志进行编译。那么它可能会起作用。！

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2014-09-10T17:49:05.440

请记住，gdb 是一个强大的命令——能够执行低级指令——因此与汇编概念相关。

您要查找的内容称为 de 指令指针，即：

> 指令指针寄存器指向处理器下一次尝试执行的内存地址。指令指针在 16 位模式下称为**ip** ，在 32 位模式下称为**eip ，在 64 位模式下称为****rip**。

更多细节[在这里](http://en.wikipedia.org/wiki/X86_assembly_language)

gdb 执行时可用的所有寄存器都可以显示为：

```
(gdb) info registers 
```

有了它，您可以找到您的程序正在运行的模式（查看这些寄存器中的哪些存在）

然后（这里使用现在最常见的寄存器**rip** ，如果需要，用**eip**或很少用**ip**替换）：

```
(gdb)info line *$rip 
```

将向您显示行号和文件源

```
(gdb) list *$rip 
```

将向您展示该行前后的一些内容

但可能

```
(gdb) frame 
```

在很多情况下应该足够了。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-02-01T07:39:36.110

以上所有答案都是正确的，我更喜欢使用 tui 模式（ctrl+XA 或 'tui enable'），它在单独的窗口中显示您的位置和功能，这对用户非常有帮助。希望这也有帮助。

# javascript - 如何使用AngularJS以模态显示实体的数据

> ID：14581839
> 
> 赞同：0
> 
> 时间：2013-01-29T11:27:59.657
> 
> 标签：javascript, twitter-bootstrap, angularjs

我用 ng-repeat 显示一些模型实体，并添加一个 twitter 引导模式。模态包含一个表单：

```
<div class="entity" ng-repeat="entity in model" ng-click="openModal()">
  <b>{{ model.title }}</b></br>
  <i>{{ model.content }}</i>
</div>
<!-- bootstrap modal ... -->
<div id="modal" .... 
```

打开引导模式（包含表单）并在表单中显示实体数据的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:36:57.157

首先，请注意您在示例中存在错误（entity.title 不是 model.title）。

至于模态，您可以创建一个名为 modal-window 的[指令](http://docs.angularjs.org/guide/directive)并将实体传递给它。

您可以通过 openModal(entity) 传递实体，并让模态窗口将属性绑定到它。

就像是

**控制器：**

```
$scope.entity = {};
$scope.showModal = false;

$scope.openModal = function( entity ){
  $scope.entity = entity;
  $scope.showModal = true;
} 
```

**模板：**

`<modal-window entity="entity"></modal-window>`

# php - 从下拉菜单中选择值时如何设置文本框文本

> ID：14581845
> 
> 赞同：0
> 
> 时间：2013-01-29T11:28:19.323
> 
> 标签：php, jquery

我有一个名为 tblCityState 的数据库表，其中包含以下数据：

**CITY** 纽约、洛杉矶、亚特兰大

**州**纽约，加利福尼亚，乔治亚

我有一个绑定到表的下拉列表（ddCity）（从 tblCityState 中选择城市）。

当用户从下拉菜单中选择“洛杉矶”时，我想要一个文本框（tbState）填充“加利福尼亚”。

现在，我可以将 DropDown Item 的值设置为 State，但我希望 Item 值设置为 City。

实现这一目标的最佳/最简单方法是什么../这对我来说非常重要..请帮我一些代码。我到处搜索，但没有得到类似的东西。我是 php 和 ajax 的新手。建议我一些代码.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:32:41.807

索引.php

```
<script src="jquery.min.js" type="text/javascript"></script>
<script type='text/javascript' src='jquery.autocomplete.js'></script>
<link rel="stylesheet" type="text/css" href="jquery.autocomplete.css" />

<script type="text/javascript">
$().ready(function() {
$("#customer").autocomplete("state.php", {
        width: 160,
        autoFill: true,
        selectFirst: false
    });

$("#customer").blur(function() {
$("#customer1").val('');
$(".ac_results").next().css('height','0px');
var  vState = $("#customer").val();
        $("#customer1").autocomplete("city.php?state="+vState, {
            width: 160,
            autoFill: false,
            data:{},
            length:0,
        });
    });
});
</script>

<form name="thisForm1" method="post" id="thisForm1" action="" >
<table cellpadding="5" cellspacing="5" width="50%" align="center" class="ac_results">
<tr><td>
Enter state<input name="customer" type="text" id="customer"  value="" style="width:300px;" autocomplete="off"   >
</td><td>

Enter Keyword<input name="customer1" type="text" id="customer1"  value="" style="width:500px;" autocomplete="off" >
</td></tr>
</table>

</form> 
```

状态.php

```
<?php
$db = mysql_pconnect('localhost','root','');
mysql_select_db('test',$db);
 $q = strtolower($_GET["q"]);

$a = mysql_query("SELECT * FROM state");
while($b = mysql_fetch_object($a))

{
echo "$b->name\n";
}

?> 
```

城市.php

```
<?php
$db = mysql_pconnect('localhost','root','');
mysql_select_db('test',$db);
 $q = strtolower($_GET["q"]);
$vState = $_REQUEST['state'];

if (!empty($vState)) { 
    $a = mysql_query("SELECT * FROM best_hotel WHERE class = '$vState'");
    while($b = mysql_fetch_object($a)) {
        echo "$b->name\n";
    }

}

?> 
```

# objective-c - 在旋转全屏时显示 UIImageView

> ID：14581846
> 
> 赞同：0
> 
> 时间：2013-01-29T11:28:21.193
> 
> 标签：objective-c, uiimageview

目前我有一个滚动视图，里面有一些图片。如果我将手机旋转到横向，我希望滚动视图中的图片变大（全屏），以便整个屏幕都被图像覆盖。将其旋转回纵向应该会删除全屏图像。

到目前为止，我在 viewDidLoad 中所做的检测旋转变化：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleOrientationChange) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

并处理它：

```
- (void)handleOrientationChange
{
    if (([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft) ||
    ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight)) {
        UIImageView *fullScreenImage = [[UIImageView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        [fullScreenImage setImage:[UIImage imageNamed:[[PflanzenSingletonClass sharedManager] loadStringFromUserDefaultsForKey:CurrentScrollViewImage]]];
        [fullScreenImage setTag:999];
        [self.view addSubview:fullScreenImage];
    } else
    {
        [[[self.view subviews] objectAtIndex:([[self.view subviews] count] - 1)] removeFromSuperview];
    }
} 
```

但它没有按预期工作（当然是我的错）。

1.  ImageView 并不是真正的全屏。我仍然看到导航栏
2.  图像没有旋转到横向（我的方法是在方向改变发生之前调用的吗？？）
3.  因为2.图像被拉伸。
4.  我希望动画更流畅。起点是滚动视图的矩形。

有任何想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:36:22.270

如果你在 ViewController 中处理这个，你可以覆盖下一个方法而不是使用通知：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation) 
```

要使 ImageView 全屏显示（并在导航栏上显示），您可以将其添加到 keyWindow：

```
UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];
[imageView setFrame:keyWindow.bounds];
[keyWindow addSubview:imageView]; 
```

**更新。**

您也可以在单独的 UIViewController 中以模态方式呈现 UIImageView。在这个 ViewController 中实现方法

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toOrientation {
    if (UIInterfaceOrientationIsPortrait(toOrientation)) {
        [self dismissModalViewControllerAnimated:];
    }
} 
```

还要确保您的应用程序支持横向和纵向。它可以在摘要选项卡或 App-Info.plist 中进行编辑。也可以通过覆盖下一个方法为某些控制器指定它：

对于 iOS6：

```
- (BOOL)shouldAutorotate;
- supportedInterfaceOrientations; 
```

对于 ios5：

```
- (BOOL)shouldAutorotateToInterfaceOrientation: 
```

# jquery - 通过 Flexigrid 中的页面获取所有行

> ID：14581852
> 
> 赞同：0
> 
> 时间：2013-01-29T11:28:34.907
> 
> 标签：jquery, flexigrid

我必须获取要导出的行，但我只能使用以下代码获取当前页面上的项目：

```
$('#flex1 tr', grid).each(function() {
arr.push( parseInt($(this).text(),10) );
}); 
```

但我想通过页面导出结果。我需要这样的解决方案，但这不起作用：

```
$('#flex1 page', grid).each(function() {
   $('#flex1 tr', grid).each(function() {
       arr.push( parseInt($(this).text(),10) );
   });
}); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T06:57:22.040

我认为这是不可能的，因为只有在加载网格或每页更改的记录时才创建的行是 JSON 或 XML 返回的行。因此，您必须将用于过滤记录的所有网格参数传递给生成 JSON 或 XML 文件的服务器端脚本，而不是获取行 ID。

希望这是有道理的:)

# android - Android应用程序中的奇怪内存行为

> ID：14581853
> 
> 赞同：1
> 
> 时间：2013-01-29T11:28:37.323
> 
> 标签：android, memory-management, memory-leaks

我正在开发的 Android 应用程序中有一个奇怪的内存行为。该应用程序运行良好，但如果我查看 Android 中的“任务管理器”，如三星 SII 任务管理器或 Nexus 7 上的“[内存使用](https://play.google.com/store/apps/details?id=mem.usage&feature=search_result#?t=W251bGwsMSwxLDEsIm1lbS51c2FnZSJd)”应用程序，它表明在使用该应用程序时，使用的内存量很快增长到疯狂的数量，例如数百兆（在 Nexus 7 上为 600~700MB）。然后它可以回落到大约 200MB，再次增长等等。

起初我认为我的内存泄漏很严重，并开始在 Eclipse 内存分析器 (MAT) 中搜索问题，就像在这个[优秀的视频](http://www.youtube.com/watch?v=_CruQY55HOk)中解释的那样。但问题是，从这里看起来一切正常。我没有发现任何重复的活动实例或任何其他可能导致泄漏的东西，并且报告的内存使用量要小得多。该问题也不会出现在 GC 消息中。所以我可以在任务管理器中报告 600MB 的使用情况，在 Logcat 中是这样的：

```
01-29 12:05:44.511: D/dalvikvm(6044): GC_FOR_ALLOC freed 3930K, 24% free 28959K/38096K, paused 17ms, total 17ms 
```

堆数量永远不会超过 50~60MB（这可能是正常的，因为应用程序中有很多图片）。MAT 中的数字匹配。

我想确定我的应用程序中是否存在内存泄漏。即使 GC 消息和 MAT 没有报告问题，我发现任务管理器报告如此高的内存使用率真的很奇怪。也许这里有人已经遇到过这种奇怪的行为，可以给我一个关于正在发生的事情的线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:22:55.143

好的，经过数小时的测试，我终于找到了问题所在。正如fadden 所猜测的那样，泄漏超出了Dalvik 的范围。这实际上是由于[Typeface.createFromAsset](http://developer.android.com/reference/android/graphics/Typeface.html#createFromAsset%28android.content.res.AssetManager,%20java.lang.String%29)中的以下错误：

[http://code.google.com/p/android/issues/detail?id=9904](http://code.google.com/p/android/issues/detail?id=9904)

此方法正在泄漏资产流。我的应用程序正在使用自定义 TextView 来显示具有自定义字体的文本，并且由于它在大多数布局文件中使用它会迅速泄漏大量 RAM，但不会在 Dalvik 的堆中，所以使用通常的方法很难发现工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:30:43.067

GC 消息仅显示 Dalvik 堆上的内容。本机堆可以无限制地增长——直到系统决定杀死你，只要你在前台，它就不愿意这样做。您的应用程序是否有可能导致分配的本机组件？

如果这是一个开发者/根设备，“procrank”工具可以给你一个内存使用的快速总结。“showmap”工具可以为您提供更详细的细分。

DDMS 有一些（官方不支持的）工具用于检查本机内存使用情况。Google for "ddms native heap" 找到一些说明。

# java - 休眠：flush() 和 commit()

> ID：14581865
> 
> 赞同：88
> 
> 时间：2013-01-29T11:29:05.340
> 
> 标签：java, hibernate, orm

`org.hibernate.Session.flush()`单独打电话是个好习惯吗？

正如`org.hibernate.Session`文档中所说，

> 必须在工作单元结束时调用，在提交事务和关闭会话之前（取决于刷新模式，Transaction.commit() 调用此方法）。

你能解释一下`flush()`明确调用的目的`org.hibernate.Transaction.commit()`吗？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-01-29T11:38:53.450

在 Hibernate Manual 你可以看到这个例子

```
Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();

for (int i = 0; i < 100000; i++) {
    Customer customer = new Customer(...);
    session.save(customer);
    if (i % 20 == 0) { // 20, same as the JDBC batch size
        // flush a batch of inserts and release memory:
        session.flush();
        session.clear();
    }
}

tx.commit();
session.close(); 
```

如果不调用 flush 方法，您的一级缓存将抛出 OutOfMemoryException

[你也可以看看这篇关于冲洗的帖子](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/objectstate.html#objectstate-flushing)

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2014-11-17T15:30:07.083

**`flush()`**将使您的数据库与内存中保存的对象/对象的当前状态同步，但它不会提交事务。因此，如果您在`flush()`调用后遇到任何异常，则事务将回滚。您可以使用小块数据同步您的数据库，`flush()`而不是使用一次提交大量数据，`commit()`并面临获得`OutOfMemoryException`.

**`commit()`**将使存储在数据库中的数据永久化。`commit()`一旦成功，您就无法回滚您的事务。

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2013-01-29T14:37:50.253

显式刷新的一种常见情况是，当您创建一个新的持久实体并希望它生成并分配一个人工主键，以便您以后可以在同一事务中使用它。在这种情况下，调用 flush 会导致您的实体获得一个 id。

另一种情况是，如果一级缓存中有很多东西，并且您想定期清除它（以减少缓存使用的内存量），但您仍然想将整个东西一起提交. 这就是[阿列克谢的回答所](https://stackoverflow.com/a/14582029/217324)涵盖的情况。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-11-07T09:49:44.947

**`flush();`**刷新是将底层持久存储与内存中保存的持久状态同步的过程。它将更新或插入正在运行的事务中的表中，但它可能不会提交这些更改。

> 您需要在批处理中刷新，否则可能会出现 **OutOfMemoryException。**

**`Commit();`**Commit 将使数据库提交。当你有一个持久化的对象并且你改变了它的一个值时，它会变脏，hibernate 需要将这些更改刷新到你的持久层。因此，您应该提交，但它也结束了工作单元 ( `transaction.commit()`)。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-11-21T13:24:06.230

通常不建议显式调用flush，除非有必要。Hibernate 通常在事务结束时自动调用 Flush，我们应该让它完成它的工作。现在，在某些情况下，您可能需要显式调用 flush，其中第二个任务取决于第一个 Persistence 任务的结果，两者都在同一个事务中。

例如，您可能需要持久化一个新实体，然后使用该实体的 Id 在同一事务中执行一些其他任务，在这种情况下，需要先显式刷新实体。

```
@Transactional
void someServiceMethod(Entity entity){
    em.persist(entity); 
    em.flush() //need to explicitly flush in order to use id in next statement
    doSomeThingElse(entity.getId());    
} 
```

另请注意，显式刷新不会导致数据库提交，数据库提交仅在事务结束时完成，因此如果在调用刷新后发生任何运行时错误，更改仍将回滚。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-01-29T11:39:40.300

默认情况下，刷新模式为 AUTO，这意味着：“有时会在查询执行之前刷新会话，以确保查询永远不会返回过时状态”，但大多数情况下，当您提交更改时会刷新会话。当您使用 FlushMode=MANUAL 或想要进行某种优化时，手动调用 flush 方法很有用。但是我从来没有这样做过，所以我不能给你实用的建议。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-07-09T10:37:15.613

session.flush() 是同步方法，意思是按顺序向数据库中插入数据。如果我们使用这种方法，数据不会存储在数据库中，而是存储在缓存中，如果中间出现异常我们可以处理。但是 commit() 它将数据存储在数据库中，如果我们存储的数据量更大，那么可能会出现内存异常，就像保存点主题中的 JDBC 程序一样

# java - Android中的服务器-客户端故障（套接字未绑定/套接字已在使用中）

> ID：14581866
> 
> 赞同：2
> 
> 时间：2013-01-29T11:29:06.200
> 
> 标签：java, android, sockets, networking, serial-port

海霍，

好吧，我的问题对我来说有点难以解释。我尝试将我的 android 平板电脑 (4.0.3) 连接到 RS-232 转换器。这已经有效，但只是单向的。如果我尝试发送任何东西，它就会被发送。我无法收到任何答案，但这是必要的。我明白了

```
 Logcat Errors: Either Socket is not bound, or EADRESS already in use. 
```

我尝试了多种方法，但没有一种方法可以满足我的需要。

**我的目标：**无论何时发送和接收字节。

**我的架构：** MainActivity -> 调用 2 个异步任务 1\. 网络，2\. ConcurrentServer 网络必须通过 DataOutputStream 发送我的命令。在这里好了。ConcurrentServer 必须使用 DataInputStream 接收传入的数据，将其提供给 ConcurrentServer 类中的方法。这个方法应该发送一个应答字节。

我的 ConcurrentServer 没有收到，该方法也没有发送任何东西......

我希望你能帮助我。

**代码：**

```
package com.example.wettkampftimerbt;

import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.InetSocketAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.SocketAddress;

import org.apache.http.client.protocol.ClientContext;

import android.content.Context;
import android.os.AsyncTask;
import android.util.Log;

public class ConcurrentServer extends AsyncTask<Void, Void, Void>{

    private final String LFDNR1 = "lfdnr1";
    private final String LFDNR2 = "lfdnr2";
    private final String LFDNR3 = "lfdnr3";
    private final String LFDNR4 = "lfdnr4";
    private final String LFDNR5 = "lfdnr5";
    private final String LFDNR6 = "lfdnr6";
    private final String LFDNR7 = "lfdnr7";
    private final String LFDNR8 = "lfdnr8", PREFS_NAME = "prefs",
            COMMAND = "command", LANE = "lane", DINYMIN ="dinymin", DINYSEK="dinysek";

    int w1, w2, w3, w4, w5, w6, w7, w8, diny1, diny2, diny3, diny4, diny5,
            diny6, diny7, diny8, dinymin, dinysek;
    Context context;
    ServerSocket sock;
    Socket ss;

        protected Void doInBackground (Void... arg0) {
            System.out.println("ConcurrentServer_doInBackgorund");
            Log.e("SERVER", "CON");
        try {
            sock = new ServerSocket(2010);
            ss = sock.accept();
            sock.setReuseAddress(true);
            sock.bind(new InetSocketAddress(2010));

            ss.setReuseAddress(true);
            ss = new Socket("192.168.0.100", 2011);
            sock.setSoTimeout(1000);
            for (;;) {
                boolean stopData = true;    
                BufferedReader din = new BufferedReader(new
                        InputStreamReader(ss.getInputStream()));

                //DataInputStream din = new DataInputStream(
                    //  ss.getInputStream());
                while (stopData) {
                // Einlesen
                diny1 = (din).read();// 03
                diny2 = (din).read();// Empfänger(90...97)
                diny3 = (din).read();// Sender(80)
                diny4 = (din).read();// lfdnr
                diny5 = (din).read();// Kommando(Start, Stop...)
                if (diny5==79){
                dinymin = (din).read();//Minuten
                dinysek = (din).read();//Sekunden
                }
                diny6 = (din).read();// Prüfsumme
                diny7 = (din).read();// 05
                din.close();
                //ss.close();
                //sock.close();
                System.out
                        .println("diny: " + diny1 + " " + diny2 + " " + diny3
                                + " " + diny4 + " " + diny5 + " " + diny6 + " "
                                + diny7);
                Log.e("Reccom", "RECCOM");
                reccom();

                stopData=false;
                }
            }
        } catch (Exception e) {
            System.out.println("IO error" + e);}
        return null;
        }

    public int getLFDNR1(Context context) {
        System.out.println("ConcurrentServer_getlfdnr1");
        w1 = context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE).getInt(LFDNR1, 00);
        //w1 = Integer.valueOf(LFDNR1);
        return w1;
    }

    public String getLFDNR2(Context context) {
        System.out.println("ConcurrentServer_getlfdnr2");
        w2 = Integer.valueOf(LFDNR2);
        return LFDNR2;
    }

    public String getLFDNR3(Context context) {
        System.out.println("ConcurrentServer_getlfdnr3");
        w3 = Integer.valueOf(LFDNR3);
        return LFDNR3;
    }

    public String getLFDNR4(Context context) {
        System.out.println("ConcurrentServer_getlfdnr4");
        w4 = Integer.valueOf(LFDNR4);
        return LFDNR4;
    }

    public String getLFDNR5(Context context) {
        System.out.println("ConcurrentServer_getlfdnr5");
        w5 = Integer.valueOf(LFDNR5);
        return LFDNR5;
    }

    public String getLFDNR6(Context context) {
        System.out.println("ConcurrentServer_getlfdnr6");
        w6 = Integer.valueOf(LFDNR6);
        return LFDNR6;
    }

    public String getLFDNR7(Context context) {
        System.out.println("ConcurrentServer_getlfdnr7");
        w7 = Integer.valueOf(LFDNR7);
        return LFDNR7;
    }

    public String getLFDNR8(Context context) {
        System.out.println("ConcurrentServer_getlfdnr8");
        w8 = Integer.valueOf(LFDNR8);
        return LFDNR8;
    }
    private void reccom() throws IOException {
        System.out.println("ConcurrentServer_reccom");
        if (diny1 == 3 && diny7 == 5) {
            answer();
        } else {
        }

        switch (diny2) {
        case (144): // 144=90=Bahn1
            c144(context);
            break;
        case (145): // 145=91=Bahn2
            c145(context);
            break;
        case (146): // 146=92=Bahn3
            c146(context);
            break;
        case (147): // 147=93=Bahn4
            c147(context);
            break;
        case (148): // 148=94=Bahn5
            c148(context);
            break;
        case (149): // 149=95=Bahn6
            c149(context);
            break;
        case (150): // 150=96=Bahn7
            c150(context);
            break;
        case (151): // 151=97=Bahn8
            c151(context);
            break;
        }

    }

    private void answer() throws IOException {
        System.out.println("ConcurrentServer_answer");
    Socket sock ;
    int w0=0,w5=32;
         SocketAddress sockaddr = new InetSocketAddress("192.168.0.100", 2011);  
         sock = new Socket();  
         int timeout = 1000;   // 1000 millis = 1 second  
         sock.connect(sockaddr, timeout); 
        boolean stopData = true;
        DataOutputStream dos = new DataOutputStream(sock.getOutputStream());
        while (stopData) {
            dos.writeByte(w0);
            dos.writeByte(diny1);
            dos.writeByte(diny3);
            dos.writeByte(diny2);
            dos.writeByte(diny4);
            dos.writeByte(w5);
            dos.writeByte(diny6);
            dos.writeByte(diny7);
            dos.flush();
            //dos.close();
            stopData = false;}

    }

    private void c151(Context context) {
        System.out.println("ConcurrentServer_c151");
        getLFDNR8(context);
        if (w1 == diny4||(w1-1)==diny4)
            switch (diny5) {
            case (00):
            case (79): {

                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(LANE, "151").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(COMMAND, "79").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYMIN, Integer.valueOf(dinymin).toString()).commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYSEK, Integer.valueOf(dinysek).toString()).commit();
            }
                break;
            }
        else {
            System.out.println("lfdnr8 passt nicht");
        }
    }

    private void c150(Context context) {
        System.out.println("ConcurrentServer_c150");
        getLFDNR7(context);
        if (w1 == diny4||(w1-1)==diny4)
            switch (diny5) {
            case (00):
            case (79): {
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(LANE, "150").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(COMMAND, "79").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYMIN, Integer.valueOf(dinymin).toString()).commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYSEK, Integer.valueOf(dinysek).toString()).commit();
            }
                break;
            }
        else {
            System.out.println("lfdnr7 passt nicht");
        }
    }

    private void c149(Context context) {
        System.out.println("ConcurrentServer_c149");
        getLFDNR6(context);
        if (w1 == diny4||(w1-1)==diny4)
            switch (diny5) {
            case (00):
            case (79): {
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(LANE, "149").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(COMMAND, "79").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYMIN, Integer.valueOf(dinymin).toString()).commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYSEK, Integer.valueOf(dinysek).toString()).commit();
            }
                break;
            }
        else {
            System.out.println("lfdnr6 passt nicht");
        }
    }

    private void c148(Context context) {
        System.out.println("ConcurrentServer_c148");
        getLFDNR5(context);
        if (w1 == diny4||(w1-1)==diny4)
            switch (diny5) {
            case (00):
            case (79): {
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(LANE, "148").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(COMMAND, "79").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYMIN, Integer.valueOf(dinymin).toString()).commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYSEK, Integer.valueOf(dinysek).toString()).commit();
            }
                break;
            }
        else {
            System.out.println("lfdnr5 passt nicht");
        }
    }

    private void c147(Context context) {
        System.out.println("ConcurrentServer_c147");
        getLFDNR4(context);
        if (w1 == diny4||(w1-1)==diny4)
            switch (diny5) {
            case (00):
            case (79): {
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(LANE, "147").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(COMMAND, "79").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYMIN, Integer.valueOf(dinymin).toString()).commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYSEK, Integer.valueOf(dinysek).toString()).commit();
            }
                break;
            }
        else {
            System.out.println("lfdnr4 passt nicht");
        }
    }

    private void c146(Context context) {
        System.out.println("ConcurrentServer_c146");
        getLFDNR3(context);
        if (w1 == diny4||(w1-1)==diny4)
            switch (diny5) {
            case (00):
            case (79): {
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(LANE, "146").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(COMMAND, "79").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYMIN, Integer.valueOf(dinymin).toString()).commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYSEK, Integer.valueOf(dinysek).toString()).commit();
            }
                break;
            }
        else {
            System.out.println("lfdnr3 passt nicht");
        }
    }

    private void c145(Context context) {
        System.out.println("ConcurrentServer_c145");
        getLFDNR2(context);
        if (w1 == diny4||(w1-1)==diny4)
            switch (diny5) {
            case (00):
            case (79): {
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(LANE, "145").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(COMMAND, "79").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYMIN, Integer.valueOf(dinymin).toString()).commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYSEK, Integer.valueOf(dinysek).toString()).commit();
            }
                break;
            }
        else {
            System.out.println("lfdnr2 passt nicht");
        }
    }

    private void c144(Context context) {
        System.out.println("ConcurrentServer_c144");
        final String PREFS_NAME = "prefs";
        final String COMMAND = "command";
        final String LANE = "lane", DINYMIN ="dinymin", DINYSEK="dinysek";
        getLFDNR1(context);
        if (w1 == diny4||(w1-1)==diny4)
            switch (diny5) {
            case (00):
            case (79): {
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(LANE, "144").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                        .edit().putString(COMMAND, "79").commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYMIN, Integer.valueOf(dinymin).toString()).commit();
                context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)
                .edit().putString(DINYSEK, Integer.valueOf(dinysek).toString()).commit();
            }
                break;
            }
        else {
            System.out.println(w1+ "+"+ diny4);
            System.out.println("lfdnr1 passt nicht");
        }

    }

    public ConcurrentServer(Context context) {
        System.out.println("ConcurrentServer_Context");
        this.context = context;

    }

} 
```

如果您认为，您也应该需要网络代码，请告诉我。顺便说一句：这是我现在的代码，经过试验和尝试了很多东西。因此，如果有任何东西加倍，这就是原因。由于我是 Android 的新手，这可能发生在我身上。

谢谢。

编辑：

Class Stacker 给出的这个链接非常好。它详细而准确。对于遇到问题的任何人，请检查以下内容：

[http://docs.oracle.com/javase/tutorial/networking/urls/index.html](http://docs.oracle.com/javase/tutorial/networking/urls/index.html)

再次感谢 Class Stacker！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:38:45.417

1.  请注意，根据您的 Android 版本，AsyncTask 不会并行执行，除非您明确指定执行程序。

2.  我想你必须主动连接到转换器设备。如果是这样，您没有服务器套接字；它实际上是一个客户端套接字。

3.  我不知道你为什么一路创建这么多套接字；套接字是双向通信通道。

4.  *如果*你真的需要一个服务器套接字，你等待传入的连接，你`accept()`将给`accept()`你你的客户端特定的套接字。

热这有帮助；如果没有，就我而言，您需要使用有关您正在连接的设备的信息来更新您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:12:59.407

做到了，知道了，一个套接字是双向的，可以读写我现在得到它，我只是将 2 个单独的类相互转移，瞧，它可以工作 ^^ 没有双绑定套接字。感谢类堆垛机。如需有关相同或偶数问题的帮助，请查看上面的链接。

# java - 解析网页java

> ID：14581867
> 
> 赞同：-1
> 
> 时间：2013-01-29T11:29:10.237
> 
> 标签：java, selenium, html-parsing, jsoup, htmlunit

您好我想解析一家商店[http://www.mercateo.com](http://www.mercateo.com)。到目前为止，我已经使用了硒。它工作得很好，但速度很慢。我想解决我的问题。我找到了 HtmlUtil 和 JSoup，但我认为我在链接上的 clic 和转到下一页时遇到了麻烦。

我用 HtmlUtil 写了一个简单的例子：

```
WebClient web = new WebClient();
HtmlPage page = web.getPage("http://news.yahoo.com/");
web.closeAllWindows(); 
```

但我收到了很多警告和错误：

```
WARNING: CSS warning: 'http://l.yimg.com/zz/combo?d/lib/yui/3.4.1/build/cssreset/cssreset-min.css&d/lib/yui/3.4.1/build/cssfonts/cssfonts-min.css&os/mit/media/p/presentation/grids/master-min-464195.css&os/mit/media/p/presentation/grids/desktop-min-841473.css&os/mit/media/p/presentation/base/master-min-470440.css&os/mit/media/p/presentation/base/desktop-min-341885.css&kx/ucs/uh/css/291/yunivhead-min.css&kx/ucs/uh/css/221/logo-min.css&kx/ucs/homepage/css/155/homepage-ie-min.css&kx/ucs/notif_v2/css/145/notifications_v2-min.css&kx/ucs/mailcount/css/37/mail_preview-min.css&kx/ucs/search/css/190/search_all-min.css&kx/ucs/search/css/190/search_buttons-min.css&kx/ucs/breakingnews/css/12/breaking_news-min.css&os/mit/media/m/header/header-desktop-min-630857.css&os/mit/media/m/navigation/navigation-desktop-min-603998.css&os/mit/media/m/linkbox/linkbox-min-248956.css&os/mit/media/m/ads/ads-min-892923.css&os/mit/media/m/heading/heading-min-214964.css&os/gm/m/footer/footer_sponsor-min-188629.css&os/gm/m/footer/footer_links-min-188629.css&os/mit/media/m/trending/trending-min-150139.css&os/gm/m/footer/footer_info-min-323669.css&os/gm/m/footer/footer_info-desktop-min-944911.css' [20:3604] Ignoring the following declarations in this rule.
sty 29, 2013 11:54:03 AM com.gargoylesoftware.htmlunit.DefaultCssErrorHandler error
WARNING: CSS error: 'http://l.yimg.com/zz/combo?d/lib/yui/3.4.1/build/cssreset/cssreset-min.css&d/lib/yui/3.4.1/build/cssfonts/cssfonts-min.css&os/mit/media/p/presentation/grids/master-min-464195.css&os/mit/media/p/presentation/grids/desktop-min-841473.css&os/mit/media/p/presentation/base/master-min-470440.css&os/mit/media/p/presentation/base/desktop-min-341885.css&kx/ucs/uh/css/291/yunivhead-min.css&kx/ucs/uh/css/221/logo-min.css&kx/ucs/homepage/css/155/homepage-ie-min.css&kx/ucs/notif_v2/css/145/notifications_v2-min.css&kx/ucs/mailcount/css/37/mail_preview-min.css&kx/ucs/search/css/190/search_all-min.css&kx/ucs/search/css/190/search_buttons-min.css&kx/ucs/breakingnews/css/12/breaking_news-min.css&os/mit/media/m/header/header-desktop-min-630857.css&os/mit/media/m/navigation/navigation-desktop-min-603998.css&os/mit/media/m/linkbox/linkbox-min-248956.css&os/mit/media/m/ads/ads-min-892923.css&os/mit/media/m/heading/heading-min-214964.css&os/gm/m/footer/footer_sponsor-min-188629.css&os/gm/m/footer/footer_links-min-188629.css&os/mit/media/m/trending/trending-min-150139.css&os/gm/m/footer/footer_info-min-323669.css&os/gm/m/footer/footer_info-desktop-min-944911.css' [20:3996] Error in style rule. (Invalid token "*". Was expecting one of: <EOF>, <S>, <IDENT>, "}", ";".)
sty 29, 2013 11:54:03 AM com.gargoylesoftware.htmlunit.DefaultCssErrorHandler warning
WARNING: CSS warning: 'http://l.yimg.com/zz/combo?d/lib/yui/3.4.1/build/cssreset/cssreset-min.css&d/lib/yui/3.4.1/build/cssfonts/cssfonts-min.css&os/mit/media/p/presentation/grids/master-min-464195.css&os/mit/media/p/presentation/grids/desktop-min-841473.css&os/mit/media/p/presentation/base/master-min-470440.css&os/mit/media/p/presentation/base/desktop-min-341885.css&kx/ucs/uh/css/291/yunivhead-min.css&kx/ucs/uh/css/221/logo-min.css&kx/ucs/homepage/css/155/homepage-ie-min.css&kx/ucs/notif_v2/css/145/notifications_v2-min.css&kx/ucs/mailcount/css/37/mail_preview-min.css&kx/ucs/search/css/190/search_all-min.css&kx/ucs/search/css/190/search_buttons-min.css&kx/ucs/breakingnews/css/12/breaking_news-min.css&os/mit/media/m/header/header-desktop-min-630857.css&os/mit/media/m/navigation/navigation-desktop-min-603998.css&os/mit/media/m/linkbox/linkbox-min-248956.css&os/mit/media/m/ads/ads-min-892923.css&os/mit/media/m/heading/heading-min-214964.css&os/gm/m/footer/footer_sponsor-min-188629.css&os/gm/m/footer/footer_links-min-188629.css&os/mit/media/m/trending/trending-min-150139.css&os/gm/m/footer/footer_info-min-323669.css&os/gm/m/footer/footer_info-desktop-min-944911.css' [20:3996] Ignoring the following declarations in this rule.
sty 29, 2013 11:54:03 AM com.gargoylesoftware.htmlunit.DefaultCssErrorHandler error 
```

而且我找不到让我点击链接（XPath）的方法 JSoup 非常适合解析网页，但在页面之间动态切换并不好。

我需要你的帮助 :) 我不知道除了 selenium 之外，我能用其他解析器得到相同的结果吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:27:11.470

使用 Jsoup 访问网站上的链接不是问题：

*例子：*

```
Document doc = Jsoup.connect("http://first.com/").get(); // Connect to 'root' link
Elements links = doc.select("a[href]"); // Select all Links from the website

// As an example connect to the first link of the website and parse it's html:
doc = Jsoup.connect(links.first().absUrl("href")).get();

// Continue with the new website 
```

另请参阅：[使用 Jsoup，我如何获取每个链接中的每个信息？](https://stackoverflow.com/questions/13780291/using-jsoup-how-can-i-fetch-each-and-every-information-resides-in-each-link/13787508#13787508)

# email - 通过电子邮件发送终端命令

> ID：14581868
> 
> 赞同：0
> 
> 时间：2013-01-29T11:29:17.447
> 
> 标签：email, terminal, ubuntu-12.04

是否可以发送在主机上启动预定命令的电子邮件？我编写了一个脚本，每次完成某些任务时都会发送一封电子邮件，如果我可以发回一封可以启动其他内容的电子邮件，那就太好了。我正在使用 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:41:05.860

我认为这是不可能的，机器是否在同一网络上接收电子邮件？如果是这样，您可以自动 ssh 进入机器并启动一个进程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:55:42.800

这不容易，但没有什么是不可能的

这是linux的示例结构

1.  使用 alpine 阅读您的邮件，请参见[此处](http://people.virginia.edu/~ll2bf/docs/nix/alpine.html)
2.  使用 alpine 的通知运行您的 sendmail 脚本，请参见[此处](https://unix.stackexchange.com/questions/1830/how-can-i-customize-new-mail-notification-in-alpine)

# mercurial - TortoiseHG，是否可以将工作文件夹放在存储库之外的另一个地方

> ID：14581869
> 
> 赞同：0
> 
> 时间：2013-01-29T11:29:23.837
> 
> 标签：mercurial, tortoisehg

> **可能重复：**
> [TortoiseHg 更改默认 .hg 文件夹位置](https://stackoverflow.com/questions/6504453/tortoisehg-change-default-hg-folder-location)

我想将我的工作目录（源文件等）放在我的存储库之外的另一个文件夹中。事实上，否则它会创建一个 .hg 文件夹，该文件夹会在我们的 IDE 中建立索引，这会使一切变慢（与同事共享内容时也会出现问题）。

是否可以将存储库放在一个文件夹中，并告诉 TortoiseHG 文件在其他地方？谢谢。

Ps：将存储库向上移动一个文件夹并不是真正的解决方案，因为它必须索引所有配置文件、对象文件等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:53:02.580

不，不可能将`.hg`文件夹和工作文件夹分开。

（您应该尝试配置您的 IDE，使其*不对*文件夹编制索引`.hg`，就像 Jon 在他的评论中已经建议的那样）

# kernel - 当 make_request 调用 submit_bio 时挂起

> ID：14581870
> 
> 赞同：2
> 
> 时间：2013-01-29T11:29:24.047
> 
> 标签：kernel, device, block

我正在 2.6.32 内核中编写堆栈块设备驱动程序。我们需要创建一个新的 bio 并在 make_request 中调用 submit_bio，然后将 bio 从请求队列重定向到较低的设备。为此，我们创建了一个函数 my_sync_io()，它类似于 md 中的 sync_page_io()。

但是，我们的函数 my_sync_io() 永远不会返回。120 秒后，内核崩溃。我们认为该函数正在等待诸如锁定之类的东西。

有人知道吗？

谢谢。

# android - 如何了解我已连接到 wifi 点的 SSID？

> ID：14581871
> 
> 赞同：1
> 
> 时间：2013-01-29T11:29:24.453
> 
> 标签：android

我想了解已连接的 wifi-fi 点 SSID。通过这样做，我不会尝试连接到同一点。如何了解我已连接到 wifi 点的 SSID？有没有类似 isConnected() 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:31:27.567

```
 WifiManager wifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
   WifiInfo wifiInfo = wifiManager.getConnectionInfo();
   Log.d("wifiInfo", wifiInfo.toString());
   Log.d("SSID",wifiInfo.getSSID()); 
```

您将需要清单中的 android.permission.ACCESS_WIFI_STATE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T12:41:01.920

有一个问题：我选择了 wifi "XYZ" whoz pwd was unknwn。输入了一些随机密码。它显示身份验证问题。在 wifi 屏幕上。

但是，Log.d("SSID",wifiInfo.getSSID()); 结果为“XYZ”

# regex - 在erlang中获取命名子模式的值

> ID：14581872
> 
> 赞同：2
> 
> 时间：2013-01-29T11:29:26.900
> 
> 标签：regex, erlang

嗨，我有以下正则表达式和值

```
2> re:run("first second", "^(?<foo>\\w+) (?<bar>\\w+)$", [{capture, [foo, bar], list}]).
{match,["first","second"]}
3> 
```

在这里，我将 foo 与“first”匹配，将 bar 与“second”匹配。问题出在我的应用程序（url 映射器）中，我不知道会有多少命名子模式以及它们的名称。所以我希望他们匹配类似的东西

```
2> re:magic_run("first second", "^(?<foo>\\w+) (?<bar>\\w+)$" ).
{match,[{foo, "first"},{bar, "second"}]} 
```

我关心的不是输出格式。我希望能够将值与子模式名称匹配。有没有办法将值与子模式配对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:34:33.987

如果您的字符串不是正则，请不要使用正则表达式。特别是在你的情况下，我强烈建议使用某种 String.split() 方法（从未编写过 Erlang，但我认为有人可能已经实现了这个）。

# html - 如何防止垂直居中的 div 从小屏幕上消失

> ID：14581874
> 
> 赞同：1
> 
> 时间：2013-01-29T11:29:30.727
> 
> 标签：html, css

我有以下 CSS 用于在页面上垂直居中 DIV（也将其水平居中）。如果浏览器窗口的高度小于 600px，我希望窗口能够滚动以显示整个 DIV。但是，DIV 只是以页面为中心，超出浏览器高度的任何内容都被隐藏了——没有滚动条。有没有办法让用户滚动到这些现在隐藏的区域？

```
#container{
    width:800px;
    height:600px;
    position:absolute;
    margin-top:-300px;
    top:50%;
    margin-left:-400px;
    left:50%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:52:49.470

添加`@media`查询`max-width`和`max-height`

```
@media (max-width: 800px) {
    #container {
        left: 0px;
        margin-left: 0px;
    }
}

@media (max-height: 600px) {
    #container {
        top: 0px;
        margin-top: 0px;
    }
} 
```

[JSFiddle](http://jsfiddle.net/4ULML/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:33:50.340

你也可以尝试添加

```
overflow:scroll; 
```

overflow 属性指定如果内容溢出元素的框会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:45:43.523

检查这个

```
#container{
position: absolute;
top: 50%;
left: 50%;
width: 30em;
height: 18em;
margin-top: -9em;
margin-left: -15em;
border: 1px solid #ccc;
background-color: #f3f3f3;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:58:27.713

用这个

```
 #container
    {
    width:800px;
    height:600px;
    margin-left:auto;
    margin-right:auto;
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-29T11:31:27.487

您正在使用`position: absolute;`，所以除非并且直到您`div`使用`min-width`并`margin`设置为`auto`

```
<div>vertically centered div</div>
<div>min-width div</div>

div:nth-of-type(2) {
   min-width: 1000px; /*Change accordingly*/
} 
```

# cordova - 使用黑莓签名工具时找不到图像

> ID：14581876
> 
> 赞同：1
> 
> 时间：2013-01-29T11:29:32.363
> 
> 标签：cordova, blackberry, osx-mountain-lion, zend-studio

```
[exec] dyld: Library not loaded: /Library/Frameworks/RimBlackBerryUSB.framework/Versions/A/RimBlackBerryUSB
 [exec]   Referenced from: /Users/marc/Blackberry/bin/javaloader
 [exec]   Reason: image not found
 [exec] Result: 133 
```

我只需要重新安装山狮并使用 zend studio 10 Beta 和 Eclipse 设置我的 Blackberry webworks 项目（基于 Phonegap 构建）。当运行“ant-target-build”时，我得到了上面的结果——构建完成但“找不到图像”是我以前从未见过的。

我已将 project.properties 中 BB SDK 的路径更新到正确的目录。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:53:09.563

为 MAC 安装 Blackberry Desktop Manager 是解决此问题的解决方案。谢谢大家。

# c - 如何使用C中的文件描述符将数字（int，double）写入文件？

> ID：14581885
> 
> 赞同：1
> 
> 时间：2013-01-29T11:30:18.183
> 
> 标签：c, file-descriptor

我试过这个：

```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    int out_fd = open("file.txt", O_WRONLY | O_CREAT, 0666);

    int i;
    scanf("%d", &i);

    char tmp[12]={0x0};
    sprintf(tmp,"%11d", i);

    write(out_fd, tmp, sizeof(tmp));

    close(out_fd);
    return 0;
} 
```

但它会在我的文件中写入一些垃圾：

![在此处输入图像描述](../Images/3cf6d801b813b8175c26f320e42f523b.png)

有没有什么好方法可以使用文件描述符将数字（浮点数、整数、双精度数）写入文件并写入？谢谢

**谢谢各位，解决了：**

```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    int out_fd = open("plik.txt", O_WRONLY | O_CREAT, 0666);

    int i;
    scanf("%d", &i);

    char tmp[1]={0x0};
    sprintf(tmp,"%d", i);

    write(out_fd, tmp, strlen(tmp));

    close(out_fd);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:33:53.093

您需要替换`sizeof()`为`strlen()`以获取要写入的字符串的实际长度。例如： `write(out_fd, tmp,strlen(tmp));`

# java - 在菜单中显示多列

> ID：14581899
> 
> 赞同：1
> 
> 时间：2013-01-29T11:31:03.727
> 
> 标签：java, swt

目前我有一个看起来像这样的 SWT 菜单：

![在此处输入图像描述](../Images/33f9cc9a52a6391448b6264bc8ac2aed.png)

我希望箭头对齐（一个在另一个下方）。箭头之前的文本并不总是相同的。我的第一个想法是将菜单项的字体更改为某种固定字体（例如 Courer），然后我可以将箭头移动到最长的文本长度（只需在较短的文本中添加空格）。

但是，根据[eclipse 论坛帖子](http://www.eclipsezone.com/eclipse/forums/t26228.html)，将字体更改为 MenuItem 是不可能的。我的另一个想法是将带有 3 列的 TableViewer 显示为弹出窗口，但我不知道该怎么做。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:47:45.273

最简单的方法是创建一个方法，该方法计算列之间所需的空格。您首先需要找出最大的 MenuItem 文本，然后添加一些空格。在您的示例中，这将是“一些文本0 更多文本”。它有 25 个字符。然后添加空格（我们以 5 为例）。所以下一列的偏移量应该是 30 个字符。对于每个 MenuItem，您必须添加`30 - menuItem.getText().length()`空格。我希望你明白我的想法。

编辑：我没有看到，字体大小不固定。

另一种解决方案是`\t`在文本中使用。我玩过以下示例：

```
package la.la.la;

import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Menu;
import org.eclipse.swt.widgets.MenuItem;
import org.eclipse.swt.widgets.Shell;

public class PopupMenuCreate {

    MenuItem fileExitItem, fileSaveItem;
    static MenuItem helpGetHelpItem;
    static MenuItem helpGetHelpItem2;
    static MenuItem helpGetHelpItem3;
    static MenuItem helpGetHelpItem4;
    static MenuItem helpGetHelpItem5;

  public static void main(final String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new GridLayout());

    final Button bn = new Button(shell, SWT.FLAT);
        bn.setText("Right Click HERE to see the popup menu");

        final Menu helpMenu = new Menu(bn);
        final MenuItem newItem = new MenuItem(helpMenu, SWT.CASCADE);
    newItem.setText("New");
        final MenuItem refreshItem = new MenuItem(helpMenu, SWT.NONE);
    refreshItem.setText("Refresh");
        final MenuItem deleteItem = new MenuItem(helpMenu, SWT.NONE);
    deleteItem.setText("Delete");

        helpGetHelpItem = new MenuItem(helpMenu, SWT.PUSH);
        helpGetHelpItem.setText("&Get \tHelp");

        helpGetHelpItem2 = new MenuItem(helpMenu, SWT.PUSH);
        helpGetHelpItem2.setText("&Gets \tHelp");
        helpGetHelpItem3 = new MenuItem(helpMenu, SWT.PUSH);
        helpGetHelpItem3.setText("&Getscccccc \tHdas sdad aasd");
        helpGetHelpItem4 = new MenuItem(helpMenu, SWT.PUSH);
        helpGetHelpItem4.setText("&Getscccccc asd sda \tsasa");
        helpGetHelpItem5 = new MenuItem(helpMenu, SWT.PUSH);
        helpGetHelpItem5.setText("&Getscccccc dsa  ddd asd das asd fdslfdsnjkl nsdjkl nsdjklm fsjkl \tLalalal");

        final Menu newMenu = new Menu(helpMenu);
    newItem.setMenu(newMenu);

    final MenuItem shortcutItem = new MenuItem(newMenu, SWT.NONE);
    shortcutItem.setText("Shortcut");
    final MenuItem iconItem = new MenuItem(newMenu, SWT.NONE);
    iconItem.setText("Icon");

        bn.setMenu(helpMenu);

    shell.open();
    while (!shell.isDisposed()) {
      if (!display.readAndDispatch()) {
        display.sleep();
      }
    }
  }
} 
```

EDIT2：但是这也不起作用......它将文本向右对齐。

# javascript - 如何将 websql .executeSql 结果存储在全局变量中？

> ID：14581912
> 
> 赞同：2
> 
> 时间：2013-01-29T11:31:29.817
> 
> 标签：javascript, cordova, callback, web-sql

如何访问结果

```
tx.executeSql('select query for a table',[],sucessCB);
function sucessCB(tx, results){  //<--- this results param
    console.log(results.row.item(0).name);
} 
```

我尝试了类似的东西

```
function(){
    var tab = [];
    tx.executeSql('select query for a table',[],sucessCB);

    function sucessCB(tx, results){  //<--- this results param
        console.log(results.row.item(0).name);
        for(i=0;i<results.length;i++){
            tab.push(results.row.item(i))
        }
    }

    console.log(tab);  //<--- this returns always null
} 
```

如何在回调函数之外访问变量，或者有没有办法直接将 sql 结果存储在变量中。有没有办法在

```
tx.executeSql('another select query',[],function(tx, results, tab ){  // <-- this inside sucessCB
console.log(tab);
}); 
```

在所有情况下，变量都是空的。有没有另一种方法可以做到这一点。任何建议都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T01:21:15.110

您使用回调如下：

```
var querySql = function(sql, callback) {

  tx.executeSql(sql,[],sucessCB);

  function sucessCB(tx, results){  //<--- this results param
    var tab = [];
    for(i=0;i<results.length;i++){
        tab.push(results.row.item(i))
    }
    callback(tab);
  }
}

querySql('select query for a table', function(result) {
   console.log(result); 
} 
```

但是这种问题最好通过使用[延迟概念](http://api.jquery.com/jQuery.Deferred/)来解决。

```
var querySql = function(sql) {
  var df = $.Deferred();
  tx.executeSql(sql,[],sucessCB, errCB);

  function sucessCB(tx, results){  //<--- this results param
    var tab = [];
    for(i=0;i<results.length;i++){
        tab.push(results.row.item(i))
    }
    df.resolve(tab);
  }
  function errCB(tx, e) {
    df.reject(e);
  }
}

querySql('select query for a table').done(function(result) {
   console.log(result); 
} 
```

# jquery - 如何在不阻塞浏览器的情况下在 fancyBox 弹出窗口中调用脚本？

> ID：14581915
> 
> 赞同：0
> 
> 时间：2013-01-29T11:31:37.090
> 
> 标签：jquery, dom, fancybox

看下表...

![在此处输入图像描述](../Images/85cd7f8b82b7680151936c34bd647059.png)

单击任何行会打开一个包含该行详细信息的非模态 fancyBox (v2.1.4) ...

![在此处输入图像描述](../Images/5c99f06e222705bb40e8c37a991ef6a9.png)

fancyBox 是这样称呼的……

```
function showBox( url, title, modal ){
    $.fancybox({
        type: 'ajax',
        href: url,
        title: title,
        padding: 20,
        modal: modal,
        afterShow: function(){
            pageInit();
        }
    });
    return false;
} 
```

到目前为止一切顺利，效果很好。除了 fancyBox 变得越来越无响应。初始弹出窗口会在半秒内响应。5 个弹出窗口后，响应延迟约一秒。10 次点击 = 2 秒。20 = 5 秒。问题不在于fancyBox，而是我的`pageInit()`函数，如下所示：

```
function pageInit() {
    // autosize textareas
    $('.autoresize').autosize();
    // buttonsets
    $('.buttonset').buttonset();
    // checkbox + radio
    $('input:checkbox, input:radio').not( $('div.buttonset input') ).uniform();
    // dates
    $('.datepicker').datepicker({
        dateFormat:'yy-mm-dd',
        changeMonth: true,
        changeYear: true
        });
    // hoverable tables
    $('table.hoverable').on( 'click', 'tbody tr', function(e){
        var $url = $(this).data('url');
        var $title = $(this).data('title');
        var $modal = $(this).data('modal') ? true : false;
        if (typeof $title !== 'undefined') { // has title, call showbox()
            showBox( $url, $title, $modal );
        } else if (typeof $url !== 'undefined') { // url but no title, load page
            if (e.metaKey) window.open( $url ); // command click .. open in new tab
            else window.location.href = $url; // open in current window
        }
        return false;
    });
    $('a, input:checkbox, input:radio').click( function(e){
        e.stopPropagation();
    }); // prevent action of hoverable tr click!

    // zebra striping
    $('table.zebra > tbody > tr:visible:even').css('background', 'rgba(255, 255, 255, 0.1)');
    $('table.zebra > tbody > tr:visible:odd').css('background', 'rgba(255, 255, 255, 0.05)');
} 
```

我正在使用许多 UI 增强功能和输入格式化工具，例如*autosize*、*uniform*、jQuery UI 的*buttonset*和*datepicker*，以及一些自制函数。在弹出窗口中包含这些可以提高可用性和连续性。所以我`pageInit()`在父文档中调用一次，然后在`afterShow:`每个 fancyBox 弹出窗口中再次调用。

显然，重复调用这些元素是有问题的。有一层层的 DOM 和脚本在运行，这让事情变得有点混乱。在不一遍又一遍地重新初始化事物的情况下，将调用 jQuery 用于弹出窗口的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:23:50.613

你不能做类似的事情：

```
modalInit(elem){
  $(elem).find('.autoresize').autosize(); 
 ....
}
function showBox( url, title, modal ){
  $.fancybox({
    ....
    modal: modal,
    afterShow: function(){
        modalInit($(modal)); // or whatever you html object is
    }
  });
 return false;
} 
```

# javascript - 使 javascript 函数与回调异步

> ID：14581916
> 
> 赞同：0
> 
> 时间：2013-01-29T11:31:42.347
> 
> 标签：javascript, jquery, ajax

以前我有

```
 MyClass.prototype.method1 = function(data1) {
    return this.data111.push(data1);
  };

 MyClass.prototype.method2 = function(i) {
    var data = this.method1(i);
    if (data.condition1 != null) {
      data.onEvent1(this);
    }
    return $(data.element).someMethod123("data123");
  };

 MyClass.prototype.method3 = function() {
    var data1 = this.method1(this._data1);
    return this.someMethod123(step.data1);
  };

MyClass.prototype.ended = function() {
    return !!this.getState("end");
  };

MyClass.prototype.getState = function(key) {
    var value = $.cookie(key);
    this._options.afterGetState(key, value);
    return value;
  }; 
```

如何使用回调函数进行异步？我想应该是这样的：

```
 MyClass.prototype.method1 = function(data1, callback) {
    if(callback){
      callback(this.data111.push(data1));
    }
    else{
      return this.data111.push(data1);
   }
  };

 MyClass.prototype.method2 = function(i, callback) {

    var data = this.method1(i);
    if (data.condition1 != null) {
      data.onEvent1(this);
    }
    if(callback){
      callback($(data.element).someMethod123("data123"));
    }
    else{
     return $(data.element).someMethod123("data123");
    }
  };

 MyClass.prototype.method3 = function(callback) {
    var data1 = this.method1(this._data1);
     if(callback){
      callback(this.someMethod123(step.data1));
    }
    else{
       return this.someMethod123(step.data1);
    }
  };

MyClass.prototype.ended = function(callback) {
    if(callback){
       callback(!!this.getState("end", /*what should be here and what should it does?*/));
    }
  };

  MyClass.prototype.getState = function(key, callback) { 
    var oldThis = this;
    setTimeout(function(){ 
                    value = $.cookie(key);
                    callback(value, oldThis); 
                    oldThis._options.afterGetState(key, value);
                  },
              0);
  }; 
```

我肯定错过了一些东西，因为我以前从未在 javascript 中使用过异步函数。就这样吗？

而且，据我所知，要使函数异步，我基本上应该再添加一个参数作为回调函数并摆脱返回，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:34:35.007

只需传递回调：

```
MyClass.prototype.ended = function(callback) {
    this.getState("end", callback);
}; 
```

您也应该在其他功能中执行此操作，我建议坚持使用一个界面。即直接返回值（如果可能）或使用回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:49:34.980

只有那些执行异步任务的方法才需要回调样式。没有理由将它用于`method1`,`method2`和`method3`。

`getState`现在是实际的异步方法。在这里使用 ajax/setTimeout/whatever 很明显。然而，我可以发现一个错误：`callback`调用应该始终是最后一个语句，就像在一个语句之后你不会做任何事情一样`return`。即使可以，最好在设置内部选项对象*后回调：*

```
 …
                oldThis._options.afterGetState(key, value);
                callback(value, oldThis); 
```

现在，`ended`方法。由于它使用 async `getState`，它本身将变为异步，您需要使用回调样式（注意`getState()`不会返回值）。因此，您将调用`getState`，当该回调时，您将转换结果并将其传递给您自己的回调：

```
MyClass.prototype.ended = function(callback) {
    this.getState("end", function ownCallback(state) {
        var result = !!state; // or whatever you need to do
        callback(result);
    });
};
// and if you don't need to do anything with the result, you can leave out ownCallback:
MyClass.prototype.ended = function(callback) {
    this.getState("end", callback);
}; 
```

# xna-4.0 - 检测非矩形的点击

> ID：14581919
> 
> 赞同：0
> 
> 时间：2013-01-29T11:32:17.503
> 
> 标签：xna-4.0

我对 XNA 4.0 还很陌生，有一个我似乎无法弄清楚的问题。到目前为止，我一直在通过创建矩形并检查`rectangle.contains`方法来检测鼠标点击，但是如果我不想检查矩形内部怎么办？

在我的地图的一部分中，我有一个三角形按钮，我想让用户单击它，但如果它实际上在三角形内部，我只想将其计为一次单击。如果我在三角形周围创建一个矩形，用户将能够在纹理区域之外单击，如果您知道我的意思的话。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:39:39.570

对于更复杂的形状，您将不得不使用[多边形算法中的点：](http://en.wikipedia.org/wiki/Point_in_polygon)

*   [多边形中的 C# 点](https://stackoverflow.com/q/4243042/925580)
*   [确定一个点是否在复杂多边形内](http://alienryderflex.com/polygon/)

检查凸多边形（你的三角形）比凹多边形更简单（参见第一篇链接文章）。

如果您必须进行大量检查并达到性能限制，请考虑使用某种层次结构、[四叉树](http://en.wikipedia.org/wiki/Quadtree)或[LOD](http://en.wikipedia.org/wiki/Level_of_detail)系统。例如，您可以为非常复杂的多边形计算一个额外的边界矩形，并且仅当该点位于矩形内时才对多边形进行昂贵的检查。

# javascript - javascript弹出连接不起作用

> ID：14581920
> 
> 赞同：0
> 
> 时间：2013-01-29T11:32:18.393
> 
> 标签：javascript, html, asp-classic, sql-server-2000

我使用一个简单的表单来验证用户登录。我想在每次成功登录时在我的 javascript POPUP 中传递用户名。现在它只显示**Hello** 。我正在使用连接运算符，但没有运气。

这就是我的 Javascript 的样子

```
<script language="javascript">
        function show()
        {
            var n = document.getElementById("uname").value;
            alert("Hello "+n);
            return false;
        }
        function noshow()
        {
            alert("Invalid Login");
            return false;
        }
    </script> 
```

HTML & Asp 代码

```
<form method="post" name="myform">
            <table border="0" width="100%" cellpadding="0" cellspacing="0">
                <tr>
                    <td>User Name:</td>
                    <td><input type="text" name="uname" value="" /></td>
                </tr>
                <tr>
                    <td>Password:</td>
                    <td><input type="password" name="pass" value="" /></td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <input type="submit" value="Login" name="sub" />
                        <input type="reset" value="Clear" />
                    </td>
                    <%
                        if Request.Form("sub") <> "" then
                            sql="select * from login_tbl where u_name = '" & Request.Form("uname") & "' AND pass= '" & Request.Form("pass") & "'"
                            rs.Open sql,con,1,2
                            if rs.Eof then 
                                Response.Write("<script language='javascript'>noshow();</script>")
                            else
                                'Response.Redirect("http://www.google.com")
                                Response.Write("<script language='javascript'>show();</script>")

                            end if
                            rs.Close
                        end if
                    %>
                </tr>
            </table>
        </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:42:28.123

你只需要做这样的事情：

```
<td><input type="text" id="uname" name="uname" value="<% Response.Write(Request.Form("uname")) %>" /></td> 
```

提交表单后，uname 为空，需要`uname`在服务器上恢复元素的值。

此外，您正在使用`document.getElementById(),`但您的 uname 元素没有 id。所以它什么也找不到。为了避免这种情况，您需要将 id 添加到该输入（如我上面的代码中）。

但在这种情况下，uname 将在提交表单后显示用户名。如果不需要，可以执行以下操作：

```
<%
                        if Request.Form("sub") <> "" then
                            sql="select * from login_tbl where u_name = '" & Request.Form("uname") & "' AND pass= '" & Request.Form("pass") & "'"
                            rs.Open sql,con,1,2
                            if rs.Eof then 
                                Response.Write("<script language='javascript'>noshow();</script>")
                            else
                                'Response.Redirect("http://www.google.com")
                                Response.Write("<script language='javascript'>show('" & Request.Form("uname") & "');</script>")

                            end if
                            rs.Close
                        end if
                    %> 
```

并像这样更新您的功能：

```
function show(n)
        {
            alert("Hello "+n);
            return false;
        } 
```

# ios - iOS-deleteRowsAtIndexPaths 崩溃

> ID：14581923
> 
> 赞同：2
> 
> 时间：2013-01-29T11:32:20.427
> 
> 标签：ios, objective-c, uitableview, ios6

我正在尝试使用以下代码删除。

```
[super deleteRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationFade]; 
```

它返回多个异常。

```
 *** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:1070
2013-01-29 16:28:22.628 
```

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 1 节中的行数无效。更新后现有节中包含的行数 (5) 必须等于该节中包含的行数更新前的节 (5)，加上或减去从该节插入或删除的行数（0 插入，5 删除），加上或减去移入或移出该节的行数（0 移入，0 移动出去）。'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:47:33.220

这是因为您应该有一种动态的方式来返回行数。

例如，我创建了 3 个数组。每个都有 3 个值（这些是`NSArray`变量）：

在`.h`文件中：

```
NSArray *firstArray;
NSArray *secondArray;
NSArray *thirdArray; 
```

在`.m`文件中，viewDidLoad 或 init 或类似的东西：

```
firstArray = [NSArray arrayWithObjects:@"Cat", @"Mouse", @"Dog", nil];
secondArray = [NSArray arrayWithObjects:@"Plane", @"Car", @"Truck", nil];
thirdArray = [NSArray arrayWithObjects:@"Bread", @"Peanuts", @"Ham", nil]; 
```

返回表中的行数时，我有：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
         return array.count;
      if (section == 0) {
          return firstArray.count;
      } else if (section == 1) {
          return secondArray.count;
      } else {
          return thirdArray.count;
      }
} 
```

然后，在`cellForRow`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }

    if (indexPath.section == 0) {
    cell.textLabel.text = [firstArray objectAtIndex:indexPath.row];
    } else if (indexPath.section == 1) {
        cell.textLabel.text = [secondArray objectAtIndex:indexPath.row];
    } else {
        cell.textLabel.text = [thirdArray objectAtIndex:indexPath.row];
    }

    return cell;
} 
```

然后我`@"Dog"`通过在桌子上滑动或您要删除的其他方式来删除。然后，在重新加载表格时，您的数组计数将为 2，因此表格将“知道”它必须仅显示 2 行。基本上，您还需要更新数据源。它也适用于其他部分。因为您从数组中删除元素，所以行数也将被更新。

# tfsbuild - 在 Team Build 机器上激活 InstallShield 2012 LE（限量版）

> ID：14581925
> 
> 赞同：6
> 
> 时间：2013-01-29T11:32:25.983
> 
> 标签：tfsbuild, installshield-le

如许可协议中所述，“Flexera Software 授予被许可方在单台计算机上安装和使用该软件以专门用于 Visual Studio 的权利，以及安装和使用最多两 (2) 个额外实例以在一个Team Foundation Server 环境”。

后者正是我所做的：我在没有安装 Visual Studio 的 Team Build 机器（Team Foundation System 2012）上安装了 InstallShield 2012 Limited Edition。现在，我可以正确编译和构建包含 ISL 项目的解决方案。问题是当我运行构建的 setup.exe 时，会显示一条消息，指出“此安装程序是使用 InstallShield 的评估版本创建的”。

所以，问题是：**如何在没有安装 Visual Studio 的 Team Build 机器上激活 InstallShield 2012 Limited Edition？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-04T14:13:40.430

您需要在 TFS 构建服务器上运行许可证激活。

对于 2012 年春季版的 Installshield LE，激活程序位于 C:\Program Files (x86)\InstallShield\2012SpringLE\System\TSConfig.exe

这将弹出一个对话框，您可以输入他们在注册 InstallShield LE 时发送的激活码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:39:03.173

我假设您在 TFS 构建服务器上使用“独立构建”？安装独立版本需要许可证文件 (.lic)。它可以从[https://flexerasoftware.subscribenet.com](https://flexerasoftware.subscribenet.com)的产品和许可证中心获得。

在安装独立版本期间，它应该要求您提供 .lic 文件。如果您在安装时没有，它将创建一个试用安装。

# javascript - 错误：SCRIPT65535：调用对象第 1 行字符 1 无效

> ID：14581936
> 
> 赞同：3
> 
> 时间：2013-01-29T11:33:12.190
> 
> 标签：javascript, jquery, internet-explorer, magento

我们构建了一个完全基于 jQuery mobile v1.2.0 的 Magento Community 1.7.0.1 模板。它还加载常规的 jQuery 库版本 1.8.2。

除了 Internet Explorer 之外，所有浏览器（Chrome、Firefox、Opera 等）都可以正常工作，控制台中显示以下错误：

> SCRIPT65535：调用对象无效
> 
> 索引，第 1 行字符 1

我们一直在寻找如何解决这个问题，但没有找到任何解决方案。同样的错误出现在 IE8 和 IE9 上。我们已尝试删除所有附加组件、加速器……但问题仍然存在。

以下是位于第 1 行的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

**EDIT1：**奇怪的是，如果我在 IE 中启动开发人员工具并在脚本选项卡下单击“开始调试”，当我刷新页面时，错误就会出现。当我单击“停止调试”并刷新页面时，错误仍然不显示。有史以来最奇怪的事情...

你们中有人遇到过这个问题吗？知道如何调试/解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:04:03.933

经过更多调试后，我发现以下代码导致了问题：

```
<body onload="setTimeout(scrollTo, 0, 0, 1)"> 
```

只需删除它，它就会再次起作用；）

# sql - 根据某个 ID 将表的行显示为列

> ID：14581937
> 
> 赞同：0
> 
> 时间：2013-01-29T11:33:28.360
> 
> 标签：sql, sql-server, tsql, pivot

我有一张像

```
 ID     option
 1      optionA
 1      optionB
 1      optionC
 1      optionD 
```

我想要这样的结果：

```
ID    A        B       C       D
1  optionA  optionB optionC optionD 
```

做这个的最好方式是什么？

我尝试过的查询是

```
select * from TableName PIVOT (option for ID = 2674 )) as abc 
```

这将不起作用，因为 PIVOT 需要聚合函数..

我也尝试过这样的 COALESCE

```
declare @t table(num VARCHAR(100))
insert into @t 
    select choice FROM QuestionAnswers where QuestionID=2674
select num from @t
declare @s varchar(8000)
select  @s = COALESCE(@s + ',', '') + num
from    @t
exec('select '+@s) 
```

但这也不起作用..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:41:43.153

这种类型的数据转换称为数据*透视*。在 SQL Server 2005+ 中，有一个函数可以为您执行此数据轮换。但是，您可以通过多种方式执行此数据转换。

这是一个`PIVOT`适用于您的示例数据的查询：

```
select *
from
(
  select id, [option], right([option], 1) col
  from yourtable
) src
pivot
(
  max([option])
  for col in (a, b, c, d)
) piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/d8073/2)。

这也可以使用带有`CASE`表达式的聚合函数来执行：

```
select id,
  max(case when col = 'a' then [option] else null end) a,
  max(case when col = 'b' then [option] else null end) b,
  max(case when col = 'c' then [option] else null end) c,
  max(case when col = 'd' then [option] else null end) d
from
(
  select  id, [option], right([option], 1) col
  from yourtable
) src
group by id 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/d8073/4)。

您可以在表上执行多个连接：

```
select a.id,
  a.[option] a,
  b.[option] b,
  c.[option] c,
  d.[option] d
from yourtable a
left join yourtable b
  on a.id = b.id
  and right(b.[option], 1) = 'b'
left join yourtable c
  on a.id = c.id
  and right(c.[option], 1) = 'c'
left join yourtable d
  on a.id = d.id
  and right(d.[option], 1) = 'd'
where right(a.[option], 1) = 'a' 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/d8073/8)

最后，如果要转换为列的值未知，则可以使用动态 sql 来完成：

```
DECLARE @colsName AS NVARCHAR(MAX),
    @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @colsName = STUFF((SELECT distinct ', ' + QUOTENAME(right([option], 1)) +' as '+ right([option], 1)
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @cols = STUFF((SELECT distinct ', ' + QUOTENAME(right([option], 1))
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id, ' + @colsName + ' from 
             (
                select id, [option], right([option], 1) col
                from yourtable
            ) x
            pivot 
            (
                max([option])
                for col in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/d8073/12)

所有查询的结果是：

```
| ID |       A |       B |       C |       D |
----------------------------------------------
|  1 | optionA | optionB | optionC | optionD | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:35:41.713

```
CREATE TABLE Product(Cust VARCHAR(25), Product VARCHAR(20), QTY INT)
GO
-- Inserting Data into Table
INSERT INTO Product(Cust, Product, QTY)
VALUES('KATE','VEG',2)
INSERT INTO Product(Cust, Product, QTY)
VALUES('KATE','SODA',6)
INSERT INTO Product(Cust, Product, QTY)
VALUES('KATE','MILK',1)
INSERT INTO Product(Cust, Product, QTY)
VALUES('KATE','BEER',12)
INSERT INTO Product(Cust, Product, QTY)
VALUES('FRED','MILK',3)
INSERT INTO Product(Cust, Product, QTY)
VALUES('FRED','BEER',24)
INSERT INTO Product(Cust, Product, QTY)
VALUES('KATE','VEG',3)
GO
-- Selecting and checking entires in table
SELECT *
FROM Product
GO
-- Pivot Table ordered by PRODUCT
SELECT PRODUCT, FRED, KATE
FROM (
SELECT CUST, PRODUCT, QTY
FROM Product) up
PIVOT (SUM(QTY) FOR CUST IN (FRED, KATE)) AS pvt
ORDER BY PRODUCT
GO
-- Pivot Table ordered by CUST
SELECT CUST, VEG, SODA, MILK, BEER, CHIPS
FROM (
SELECT CUST, PRODUCT, QTY
FROM Product) up
PIVOT (SUM(QTY) FOR PRODUCT IN (VEG, SODA, MILK, BEER, CHIPS)) AS pvt
ORDER BY CUST
GO
-- Unpivot Table ordered by CUST
SELECT CUST, PRODUCT, QTY
FROM
(
SELECT CUST, VEG, SODA, MILK, BEER, CHIPS
FROM (
SELECT CUST, PRODUCT, QTY
FROM Product) up
PIVOT
( SUM(QTY) FOR PRODUCT IN (VEG, SODA, MILK, BEER, CHIPS)) AS pvt) p
UNPIVOT
(QTY FOR PRODUCT IN (VEG, SODA, MILK, BEER, CHIPS)
) AS Unpvt
GO
-- Clean up database
DROP TABLE Product
GO 
```

参考[http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/](http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/)

**已编辑**

```
DECLARE @Product TABLE (ID int, _option varchar(10) )

-- Inserting Data into Table
INSERT INTO @Product
(
    ID,
    _option
)
SELECT 1, 'optionA' UNION ALL
SELECT 1, 'optionB' UNION ALL
SELECT 1, 'optionC' UNION ALL
SELECT 1, 'optionD' 

SELECT 
    optionA, optionB, optionC, optionD
FROM (
SELECT ID, _option
FROM @Product) up
PIVOT (SUM(ID) FOR _option IN (optionA, optionB, optionC, optionD)) AS pvt 
```

# android - GLSurfaceView onDrawFrame 清除行为

> ID：14581938
> 
> 赞同：6
> 
> 时间：2013-01-29T11:33:32.803
> 
> 标签：android, opengl-es, opengl-es-2.0, glsurfaceview

我使用 GLSurfaceView 遇到了不同的行为。AFAIK 程序有责任清除每帧的缓冲区（颜色和深度）。这意味着如果我不清除缓冲区，我将获得最后一帧的内容（或之前的一帧以进行双缓冲）。

无论在某些设备上做什么，似乎缓冲区都被清除了。我在一些测试设备上运行了 Addison Wesley OpenglES2.0 Programming Guide 中的“Hello Triangle”程序的以下修改，结果不同：

*   Acer Iconia A500 (4.0.3)：**未**清除（预期行为）
*   索尼 XPERIA Go (4.0.4)：清除
*   Galaxy S3 (4.1.1)：清除
*   LG Optimus 4x HD (4.0.3)：**未**清除
*   三星 Galaxy Tab 20.1 (4.0.4)：**未**清除
*   摩托罗拉 Xoom（3.2）：**未**清除
*   Galaxy S2（4.1.2 - 植根）：清除

有没有办法强制每次绘制回调都获得不变的缓冲区？

清除屏幕的设备的结果如下所示： ![清屏](../Images/00811487fe3fbdadbf021f5986ba0d9e.png) ![未清除的屏幕 - 预期行为](../Images/e23b956f8445c60566d7c253c40ffa8b.png)

测试活动如下所示：

```
package com.example.glcleartest;

import java.nio.Buffer;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.opengl.GLES20;
import android.opengl.GLSurfaceView;
import android.opengl.GLSurfaceView.Renderer;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;

public class MainActivity extends Activity {

protected static final int NUM_VERTICES = 3;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    GLSurfaceView glview = (GLSurfaceView) findViewById(R.id.glview);
    glview.setEGLConfigChooser(false);
    glview.setEGLContextClientVersion(2);
    glview.setRenderer(new Renderer() {

        private int programObject;
        private FloatBuffer vertexBuffer;

        @Override
        public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        }

        @Override
        public void onSurfaceChanged(GL10 gl, int width, int height) {
            GLES20.glViewport(0, 0, width, height);
            init();
        }

        @Override
        public void onDrawFrame(GL10 gl) {
            float x = 0.1f*(float) Math.sin(System.currentTimeMillis()/1000.0);
            float[] vVertices = new float[]{x, 0.5f, 0.0f,
                    x-0.5f, -0.5f, 0.0f,
                    x+0.5f, -0.5f, 0.0f};
            vertexBuffer.rewind();
            vertexBuffer.put(vVertices);
            vertexBuffer.rewind();

            // Use the program object
            GLES20.glUseProgram(programObject);
            int handle = GLES20.glGetUniformLocation(programObject, "uColor");
            float r = (float) (0.5f+Math.sin(System.currentTimeMillis()/1000.0));
            float g = (float) (0.5f+Math.sin(System.currentTimeMillis()/300.0));
            GLES20.glUniform4f(handle, r, g,0,1);

            // Load the vertex data
            GLES20.glVertexAttribPointer(0, 3, GLES20.GL_FLOAT, false, 0, vertexBuffer);
            GLES20.glEnableVertexAttribArray(0);
            GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, 3);             
        }

        private void error(String s) {
            Log.e("GLTEST", s);
        }

        private int loadShader(int shaderType, String source) {
            if (shaderType != GLES20.GL_FRAGMENT_SHADER && shaderType != GLES20.GL_VERTEX_SHADER) {
                throw new RuntimeException("Illegal shader type");
            }

            int shader = GLES20.glCreateShader(shaderType);
            if (shader != 0) {
                GLES20.glShaderSource(shader, source);
                GLES20.glCompileShader(shader);
                int[] compiled = new int[1];
                GLES20.glGetShaderiv(shader, GLES20.GL_COMPILE_STATUS, compiled, 0);
                if (compiled[0] == 0) {
                    error("Could not compile shader :");
                    error(GLES20.glGetShaderInfoLog(shader));
                    GLES20.glDeleteShader(shader);
                    shader = 0;
                    throw new RuntimeException("Shader Syntax / compilation error");
                }
            }
            return shader;
        }

        private void init() {
            String vShaderStr = "attribute vec4 vPosition; \n" + 
                                    "void main() \n" + "{ \n" + 
                                    " gl_Position = vPosition; \n" + 
                                    "} \n";
            String fShaderStr = "precision mediump float; \n" +
                                        "uniform vec4 uColor;" +
                                        "void main() \n" + 
                                        "{ \n" + 
                                        " gl_FragColor = uColor; \n" + 
                                        "} \n";

            ByteBuffer vbb = ByteBuffer.allocateDirect(NUM_VERTICES*3*4);
            vbb.order(ByteOrder.nativeOrder());
            vertexBuffer = vbb.asFloatBuffer();

            int vertexShader;
            int fragmentShader;

            // Load the vertex/fragment shaders
            vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vShaderStr);
            fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fShaderStr);

            // Create the program object
            programObject = GLES20.glCreateProgram();
            if (programObject == 0)
                return;

            GLES20.glAttachShader(programObject, vertexShader);
            GLES20.glAttachShader(programObject, fragmentShader);
            // Bind vPosition to attribute 0
            GLES20.glBindAttribLocation(programObject, 0, "vPosition");
            // Link the program
            GLES20.glLinkProgram(programObject);
            int[] linkStatus = new int[1];
            GLES20.glGetProgramiv(programObject, GLES20.GL_LINK_STATUS, linkStatus, 0);

            if (linkStatus[0] != GLES20.GL_TRUE) {
                error("Could not link program: ");
                error(GLES20.glGetProgramInfoLog(programObject));
                GLES20.glDeleteProgram(programObject);
                programObject = 0;
            }
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:45:13.813

如果您想在交换后保留后备缓冲区内容，则必须将`EGL_SWAP_BEHAVIOR`交换表面的属性设置为`EGL_BUFFER_PRESERVED`，如[EGL API](http://www.khronos.org/registry/egl/sdk/docs/man/xhtml/eglSwapBuffers.html)所述。请意识到，尽管在大多数平台上，这将对性能造成相当*大*的影响。在大多数情况下，您最好只重绘框架。

有关历史的一些信息：请参阅[http://www.khronos.org/registry/egl/specs/EGLTechNote0001.html](http://www.khronos.org/registry/egl/specs/EGLTechNote0001.html)

# cruisecontrol.net - 巡航控制中可以有多个触发器吗？

> ID：14581940
> 
> 赞同：1
> 
> 时间：2013-01-29T11:33:36.737
> 
> 标签：cruisecontrol.net

目前我有

> ```
> <!-- Builds Every 300 seconds the condition is set to if a modification exists -->
> <triggers>
>   <intervalTrigger name="continuous" seconds="300" buildCondition="IfModificationExists" />
> </triggers> 
> ```

我只是想知道你能否在 ccnet.config 中有多个触发器，你能否设置它以便只执行某些部分，例如，如果 svn 客户端上的修改发生更改，则运行配置的一部分。并且每天晚上 12 点强制进行夜间构建并将 msbuild 部署到 Octopus，或者在触发构建条件时运行整个 ccnet 配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:44:07.170

您可以使用 MultiTrigger，它基本上将多个触发器分组，正如您所描述的，请参见此处： [http ://cruisecontrolnet.org/projects/ccnet/wiki/Multi_Trigger](http://cruisecontrolnet.org/projects/ccnet/wiki/Multi_Trigger)

# jquery - 在第二个 div 之后添加边距，边距应该增加一倍

> ID：14581949
> 
> 赞同：2
> 
> 时间：2013-01-29T11:34:21.340
> 
> 标签：jquery

需要在第二个 div 之后添加边距，边距应该加倍。

例如： 3rd li margin left - 220 4rd li margin left - 440 依此类推。

```
<ul>

    <li id="new-3">3</li>
    <li id="new-4">4</li>

</ul>

$(function (){  
    var jn=220;
    $('ul').find('li').each(function (){
            jn += parseInt($(this).css('margin-right')) + 220;
        alert(jn);
        })   
        $('li').css("margin-right",jn)  
    }) 
```

这是小提琴

[http://jsfiddle.net/t688b/8/](http://jsfiddle.net/t688b/8/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:45:57.433

```
$('ul li:gt(1)').css('marginLeft', function(i, m){
   return parseInt(m, 10) + (++i * 220);
}); 
```

[http://jsfiddle.net/pzHHH/](http://jsfiddle.net/pzHHH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:47:56.277

```
<script type="text/javascript">
    $(function () {
        var jn = 220;
        $('ul').find('li').each(function () {
            jn += parseInt($(this).css('margin-left')) + 220;
            alert(jn);
            $(this).css("margin-left", "" + jn + "px");
        })

    })
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:41:14.180

见：http: [//jsfiddle.net/b8uXm/](http://jsfiddle.net/b8uXm/)

```
$(function (){  
var jn=0;
$('ul').find('li').each(function (){

    alert(jn);
    $(this).css("margin-left",jn);
    jn += parseInt($(this).css('margin-left')) + 220;
    })   

}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:57:16.293

```
$(function (){  
    var jn=220;
    $('ul').find('li').each(function (){
            jn += parseInt($(this).css('margin-left')) + 220;
        //alert(jn);
        $(this).css("margin-left",jn) 
        })

    }) 
```

您可以根据您的要求加倍或增加保证金。

# rss - 建立 RSS 空缺提要

> ID：14581960
> 
> 赞同：0
> 
> 时间：2013-01-29T11:35:08.110
> 
> 标签：rss, feed, xml-namespaces

我已经为客户建立了一个 RSS 提要来分享他们的空缺。但是，他们现在决定要添加几个额外的字段（薪水和位置），而我在弄清楚如何做到这一点并获得有效的 RSS 提要时遇到了一些麻烦。

我不敢相信我是第一个想在职位空缺提要中添加薪水和位置的人，但我正在努力寻找一个可以让我这样做的命名空间！

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:56:20.643

我没有遇到过这样的扩展。

我建议您自己创建并记录它（这很重要，因此其他人可以找到并从您的扩展中受益）

1.  将位置和薪水放在描述中，以便通用的 RSS 阅读器至少可以显示它。
2.  在您的空缺扩展中处理工资和位置，以便使用它的专业 RSS 阅读器。

创建自己的命名空间是扩展 RSS 2.0 的有效方式。这是一个很好的来源[http://www.ibm.com/developerworks/xml/library/x-wxxm36/](http://www.ibm.com/developerworks/xml/library/x-wxxm36/)

# java - 安排一个任务只运行一次

> ID：14581961
> 
> 赞同：0
> 
> 时间：2013-01-29T11:35:08.867
> 
> 标签：java, jakarta-ee, scheduled-tasks, java-ee-6

我正在开发一个恢复监视器，它会等待 5 分钟，如果系统尚未恢复，则会发出警报。显示器需要在启动时启动并且只触发一次警报。源代码如下所示：

```
@Stateless
public class RecoveryMonitor {
    @Inject TimerService timerService;
    @Inject MyAlertService alertService;
    @Inject SystemRecovery systemRecovery;

    public void scheduleMonitor() {
        timerService.createSingleActionTimer(TimeUnit.MINUTES.toMillis(5),
            new TimerConfig);
    }

    @Timeout
    public void timeout() {
        if (!systemRecovery.isDone) {
            alertService.alert("System recovery failed");
        }
    }
} 
```

所以，这里的问题是如何调度一个任务，即调用 scheduleMonitor 方法。我不能使用@PostConstruct，因为它是不允许的。我考虑使用@Schedule，但它会定期执行一个方法，而我只执行一次。欢迎任何解决方案和/或建议。谢谢。

大号

**更新**：通过使该类不再是无状态的，例如使其成为@Singleton，我可以开始使用@PostConstruct 进行调度。这不是一个完整的解决方案，但对我有用：

```
@Singleton
public class RecoveryMonitor {
    @Inject TimerService timerService;
    @Inject MyAlertService alertService;
    @Inject SystemRecovery systemRecovery;

    @PostConstruct
    public void scheduleMonitor() {
        timerService.createSingleActionTimer(TimeUnit.MINUTES.toMillis(5),
            new TimerConfig);
    }

    @Timeout
    public void timeout() {
        if (!systemRecovery.isDone) {
            alertService.alert("System recovery failed");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:09:24.730

如果您有一个 Servlet 环境，您可以在 ServletContextListener 中触发一个 CDI 事件（例如 ApplicationStartedEvent）并在您的 EJB 中观察该事件。这种启动逻辑必须在 CDI 1.0 中手动完成。未来的版本可能会包含类似的内容。

如果您对如何做到这一点有疑问，请询问:)

# email - 设置邮件服务器参数时出现异常

> ID：14581964
> 
> 赞同：1
> 
> 时间：2013-01-29T11:35:12.757
> 
> 标签：email, coldfusion, coldfusion-8

我们收到以下错误。

> 设置邮件服务器参数时出现异常。此异常是由以下原因引起的：javax.mail.MessagingException：连接失败；嵌套异常是：java.net.ConnectException：连接超时：连接。

我读过这个问题通常是由 CF 邮件程序的问题引起的。但是我们会收到我们系统上发生的任何错误，因此值得怀疑。这是流程（根据我的发现）

1.  使用 cfpop 登录 gmail 并获取电子邮件。
2.  向我发送邮件（使用 cfmail），并转储上一个 cfpop 调用（另一个问题的一部分，因此为了调试，我正在通过电子邮件向自己发送 CF 从 cfpop 调用返回的内容）。
3.  错误发生并被捕获。
4.  Coldfusion 使用 cfmail 在电子邮件中向我发送此错误。

请注意，我认为 CF 可能有太多电子邮件无法全部下载，所以我尝试减少邮件但无济于事。所有 cfmail 调用都使用相同的详细信息（服务器、用户名、密码）。此外，我已经在另一台服务器（多个）上对此进行了测试，然后它就可以正常工作了。

有人知道吗？任何事物？

这是cfpop中的代码。请注意，我已经调用了底层 Java 代码来让它通过 SSL 工作。

```
<CFPOP ACTION="GetAll" NAME="popHeader"
     SERVER="#Application.emailServer#"
     PORT="995"
     USERNAME="#Application.emailUsername#"
     PASSWORD="#Application.emailPassword#"
     ATTACHMENTPATH="#expandPath('./files/')#"
     GENERATEUNIQUEFILENAMES="YES"/> 
```

# error-handling - 为什么 awk 除以零会产生不同的结果，我该如何测试呢？

> ID：14581966
> 
> 赞同：2
> 
> 时间：2013-01-29T11:35:16.247
> 
> 标签：error-handling, awk, divide-by-zero

在 mawk 中除以零时，我得到六个不同的结果：

```
$ echo | awk '{print -1/0 }' ; echo $?
-inf
0
$ echo | awk '{print 0/0 }' ; echo $?
-nan
0
$ echo | awk '{print 1/0 }' ; echo $?
inf
0
$ echo | awk '{printf ("%i\n", -1/0) }' ; echo $?
-2147483647
0
$ echo | awk '{printf ("%i\n", 0/0) }' ; echo $?
-2147483647
0
$ echo | awk '{printf ("%i\n", 1/0) }' ; echo $?
2147483647
0 
```

我得到每个案例的“成功”退出代码。

1.  为什么会这样？
2.  我能做些什么呢？在进行除法之前，我是否**总是**需要检查零除数，或者有什么方法可以依赖 awk 的错误处理和退出代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T12:30:18.233

我猜你正在使用, `mawk`none of或有这种行为，不支持除以零。`awk``nawk``gawk`

您的答案是`+inf`正无穷大，`nan`“不是数字”和`-inf`负无穷大，一切都符合预期。这些仅在打印*float*时输出，即`%.6g`默认值`OFMT`（用于打印数字的默认格式）。

```
$ mawk 'BEGIN {printf ("%i\n", 1/0) }'
2147483647
$ mawk 'BEGIN {printf ("%f\n", 1/0) }'
inf
$ gawk 'BEGIN {printf ("%f\n", 1/0) }'
gawk: fatal: division by zero attempted 
```

当您使用“%i”显式打印时，您会得到 +HUGE 或 -HUGE，这将转换为 int（在您的情况下为带符号的 32 位）并打印为 + 或 - (2^31-1)。

通常的做法是*始终*检查除以零，理想情况下，通过重新组织表达式来最小化您需要检查的次数——除以零会导致 awk 的其他实现简单地终止。

何时`mawk`构建它会检测您的 C 数学库的功能：

```
$ ./configure
[...]
checking handling of floating point exceptions
    division by zero does not generate an exception
    overflow does not generate an exception
    math library supports ieee754 
```

`NOINFO_SIGFPE`如果您使用以下定义构建，您可以获得“标准”行为：

```
$ ./configure CFLAGS="-DNOINFO_SIGFPE"
$ make clean && make
$ ./mawk 'BEGIN {printf ("%f\n", 1/0) }'
mawk: run time error: division by zero
    FILENAME="" FNR=0 NR=0 
```

（虽然这没有记录，但它可能不是你应该依赖的东西）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T11:55:57.957

在尝试了不同的 AWK“方言”之后，我得出了以下结论：

尝试`awk`：

```
echo | awk '{print -1/0 }' ; echo $? 
```

我正进入（状态：

```
awk: (FILENAME=- FNR=1) fatal: division by zero attempted
2 
```

尝试`gawk`：

```
echo | gawk '{print -1/0 }' ; echo $? 
```

我正进入（状态：

```
gawk: (FILENAME=- FNR=1) fatal: division by zero attempted
2 
```

尝试`mawk`：

```
echo | mawk '{print -1/0 }' ; echo $? 
```

我正进入（状态：

```
-inf
0 
```

`awk --version`如果我是您，我会尝试识别您的“默认方言” `gawk`（

PS：我正在运行 Ubuntu 11.10。

PS：在我的情况下`awk`是`gawk`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-09T11:44:21.893

甚至 gnu gawk 根据调用标志表现出不同行为的组合并不难：

（这些测试也更简单，因为输出*仅*基于调用 awk/start-up 选项的行为，而不是可以手动覆盖的参数常量。

我自己使用的 gawk 符号（GMP/MPFR 是不言自明的）-

> ```
> E = -e aka standard call
> S = -S `—-sandbox`
> P = -P `--posix`
> c = -c `—-traditional`
> n = -n `--non-decimal-data` 
> ```

```
 #  (-nan):x:gawk-S/c/E/mpfr
    #  (+inf):x:gawk-n/P
    #  (+nan):x:gawk-GMP/GMP+mpfr
    #   ( 0 ):x:nawk
    #   (inf):x:mawk
    #   (nan):x:mawk2

      x = -log((log(0)*log(0))^-log(-0))/(-"0xABCD")^-!-"";

    # (+nan) :gawk-GMP/MPFR
    #        (NaN:mpfr_log())
    #  (nan) :nawk/mawk/mawk2
    # (-nan) :gawk-E/P/c

        x = log(log((-log(0))/-log(0)));

    # (-inf):nawk
    #  (inf):mawk/mawk2
    # (+inf):gawk-ALL

        y = log(log((-log(0))^-log(0)));

    # (-inf):gawk-GMP
    # (-inf):nawk
    # (-nan):gawk-P/E/c
    #  (nan):mawk/mawk2

        z = log(-log(1))-(-"")^-!-"";

    # (+nan):gawk-GMP
    #  (inf):mawk/mawk2
    #  (nan):nawk
    # (+inf):gawk-except-GMP

        z = log(-log(0))-(-"")^-!-"";

    # (-inf):nawk/gawk-GMP
    #  (inf):mawk/mawk2
    # (+inf):gawk-except-GMP

        z = -(-"")^-!-"";

    #  (inf):nawk
    #  ( 0 ):gawk-GMP
    # (-inf):all others

        xn = (-"")^-!""; 
```

这些例子可能不只是被零除，但它确实强调了在边缘情况下，它们的行为变化很大。这是一个整理表，以便更容易理解：

```
 a = log(log((-log(0))^-log(0)));
    b = log(log((-log(0))/-log(0)));;
    c = -log((log(0)*log(0))^-log(-0))/(-"0xABCD")^-!-"";
    d = log(-log(0))-(-"")^-!-"";
    e = log(-log(1))-(-"")^-!-"";

/usr/local/bin/nawk  ::  -inf ::  nan ::   0  ::  nan :: -inf ::
---------------------------------------------------------------
/usr/local/bin/mawk  ::   inf ::  nan ::  inf ::  inf ::  nan ::
---------------------------------------------------------------
/usr/local/bin/mawk2 ::   inf ::  nan ::  nan ::  inf ::  nan ::
---------------------------------------------------------------
/usr/local/bin/gawk -e:: +inf :: -nan :: -nan :: +inf :: -nan ::
/usr/...,/gawk -l mpfr:: +inf :: -nan :: -nan :: +inf :: -nan ::
/usr/local/bin/gawk -S:: +inf :: -nan :: -nan :: +inf :: -nan ::
/usr/local/bin/gawk -c:: +inf :: -nan :: -nan :: +inf :: -nan ::
---------------------------------------------------------------
/usr/local/bin/gawk -P:: +inf :: -nan :: +inf :: +inf :: -nan ::
/usr/local/bin/gawk -n:: +inf :: -nan :: +inf :: +inf :: -nan ::
----------------------------------------------------------------
/usr/local/bin/gawk -M:: +inf :: +nan :: +nan :: +nan :: -inf ::
---------------------------------------------------------------- 
```

# linux - 我们可以在同一个 /dev 文件上使用两个 MMAP

> ID：14581968
> 
> 赞同：1
> 
> 时间：2013-01-29T11:35:22.317
> 
> 标签：linux, mmap

1.  我已经构建了一个字符驱动程序，在其中我使用分配两个 PAGESIZE 缓冲区 `dma_alloc_coherent()`

2.  现在我使用`ioctl()`as`source_offset`和将这些 BUFFER [src_ptr & dest_ptr] 的物理地址传递给用户空间`dest_offset`。

3.  在用户空间中，此偏移量用作 mmap 调用的偏移量。所以在同一个 /dev 文件上说 /dev/250 我正在进行两个 MMAP 调用

    ```
    usr_src_ptr= mmap(0,page_size, PROT_READ|PROT_WRITE, 
                                   MAP_SHARED,dev_FD,
                                   src_offset );    

    if (usr_src_ptr == MAP_FAILED){
    printf("USR[UPP]:SOURCE MMAP FAiled \n\n");
        close(dev_FD);
        exit(-1);   
    }else{
        printf("USR[UPP]:SOURCE MMAP is %X..\n",usr_src_ptr);
    }

    usr_dest_ptr= mmap(0,page_size, PROT_READ|PROT_WRITE,MAP_SHARED,
                                    dev_FD,dest_offset );       
    if (usr_dest_ptr == MAP_FAILED){
         printf("USR[UPP]:DEST MMAP FAiled \n\n");
        close(dev_FD);
        exit(-1);   
    }else{
        printf("USR[UPP]:DEST MMAP is %X..\n",usr_dest_ptr);
    } 
    ```

4.  我正在用户空间中写入`0x77`并在用户空间和内核空间中`user_src_ptr`打印 。我得到了用户和内核空间的正确数据`user_src_ptr``dest_src_ptr`

5.  我在内核空间中写入`0x55`并在 内核空间和用户空间中`dest_ptr`打印。现在对于这种情况，我得到了正确的数据，例如在内核缓冲区 中，但目标的用户空间缓冲区总是返回。即我写入的数据。`dest_ptr``usr_dest_ptr``0X55``dest_ptr``0x77``usr_src_ptr`

谁能告诉我我们是否可以`mmap()`在不同的偏移量对同一个文件进行两次操作？

* * *

代替：

```
if ((ret = remap_pfn_range(vma,vma->vm_start,
                          (virt_to_phys((void *)src_ptr) >> PAGE_SHIFT),
                          size,vma->vm_page_prot)) < 0)  return ret; 
```

正确的是：

```
if ((ret = remap_pfn_range(vma,vma->vm_start,
                           vma->vm_pgoff,
                           size,vma->vm_page_prot)) < 0) 
```

感谢 BЈовић 您的意见....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:30:13.503

是的，正如您在示例中已经发现的那样，您可以在同一进程中对具有不同偏移量的同一文件执行 mmap()。mmap(2)的[手册页](http://linux.die.net/man/2/mmap)没有说明偏移限制（除了它必须是 sysconf(_SC_PAGE_SIZE) 返回的页面大小的倍数，当然它不应该超出文件）。

* * *

只有[一个限制](http://tldp.org/HOWTO/SCSI-Generic-HOWTO/mmap.html)：当 mmap() 在一个进程中处理同一个文件时，您必须使用相同的文件 ID。您在示例中执行了此操作，这就是它运行良好的原因。

# javascript - HighCharts 仅适用于 Internet Explorer

> ID：14581974
> 
> 赞同：0
> 
> 时间：2013-01-29T11:35:49.730
> 
> 标签：javascript, xml, internet-explorer, google-chrome, highcharts

我想使用 Highcharts 插件创建一个图表，并且数据应该被解析为一个 XML 文件。XML 文件 data2.xml 是，

```
<data>  
<row><t>1347559200</t><v>2.1600000000e+01</v></row> 
<row><t>1347562800</t><v>2.1504694630e+01</v></row> 
<row><t>1347566400</t><v>2.1278633024e+01</v></row> 
</data> 
```

HTML编码是，

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>line chart</title>
</head>
<body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="highcharts.js"></script>
<script src="exporting.js"></script>

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
<script type="text/javascript">
$(document).ready(function(){

    options = {
      chart: {
          renderTo: 'container',
          type: 'spline'
      },
      title: {
          text: 'Temperatures'
      },
      subtitle: {
          text: 'An example of time data in Highcharts JS'
      },
      xAxis: {
          type: 'datetime',
          dateTimeLabelFormats: { // don't display the dummy year
              month: '%e. %b',
              year: '%b'
          }
      },
      yAxis: {
          title: {
              text: 'T (°C)'
          },
          min: 0
      },
      tooltip: {
          formatter: function() {
                  return '<b>'+ this.series.name +'</b><br/>'+
                  Highcharts.dateFormat('%e. %b', this.x) +': '+ this.y +' m';
          }
      },

      series: [{
          name: 'Temperature',
          data: []
      }]
    }

  $.ajax({
    type: "GET",
    url: "data2.xml",
    dataType: "xml",
    success: function(xml) {
      var series = {  data: []
                  };

      $(xml).find("row").each(function()
      {
          var t = parseInt($(this).find("t").text())*1000
          var v = parseFloat($(this).find("v").text())
          series.data.push([t,v]);
      });
      options.series.push(series);
    }
  });

  chart = new Highcharts.Chart(options);
});
  </script>
</body>
</html> 
```

如果我执行此代码它会在 Internet Explorer 中正常打开并将结果显示为

![在 Internet Explorer 中的结果](../Images/4627066e32b305835e9010d807b5b0d8.png)

当我在 Chrome 中打开这个文件时，它给我的结果是，

![谷歌浏览器中的结果](../Images/fd53ae3120b927c3b1abd3b18154ddad.png)

带有错误消息：

```
XMLHttpRequest cannot load file:///C:/data2.xml. Origin null is not allowed by Access-    Control-Allow-Origin. 
```

所以我使用Tomcat服务器来运行它。虽然它显示相同的图表图像而没有提到的错误消息。

如何克服这个？如何通过解决此问题从 xml 文件中获取数据来在 Google Chrome 中显示图表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:32:39.657

这是由 Chrome 中的安全限制导致的，以阻止恶意网页访问您的本地文件。[在http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)上查看更多信息

您可以通过使用开关从命令/dos 提示符运行 chrome 来暂时禁用它`--disable-web-security`

例如`chrome.exe --disable-web-security`

或者尝试从本地 Web 服务器运行该页面。如果您无权访问[IIS ，则可以免费使用](http://www.iis.net/)[Apache](http://httpd.apache.org/docs/2.2/platform/windows.html)和[nginx](http://nginx.org/en/docs/windows.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T04:29:30.773

我解决了这个问题。我只是使用 Apache/Tomcat 运行这段代码。

我认为我犯的错误是 1\. 我必须将此文件保存为 .jsp 格式。2\. 添加 var 到图表和选项变量。3.`chart = new Highcharts.Chart(options);`在success函数中使用this。

# ruby - 在 Blogger 导入的 HTML 上的 Octopress 阻塞

> ID：14581976
> 
> 赞同：1
> 
> 时间：2013-01-29T11:36:02.640
> 
> 标签：ruby, import, blogger, jekyll, octopress

每个人。我正在使用[这个 ruby​​ 脚本](https://gist.github.com/1765496)将我的 Blogger XML 文件导入 Octopress。初始导入工作正常，解析 XML 并生成 HTML 文件`./_posts/`（使用正确的命名约定）。我把这些移到了`./source/_posts/`Jekyll 可以解析它们以便在站点中使用。当我尝试使用`rake -t generate`时，我收到此错误：

```
samurailink3@Manacotti:~/Dropbox/Important Backups/Git Repos/samurailink3.com$ rake -t generate
** Invoke generate (first_time)
** Execute generate
## Generating Site with Jekyll
unchanged sass/screen.scss
Configuration from /home/samurailink3/Dropbox/Important Backups/Git Repos/samurailink3.com/_config.yml
Building site: source -> public
/usr/lib/ruby/1.9.1/uri/common.rb:304:in `escape': undefined method `gsub' for 3:Fixnum (NoMethodError)
    from /usr/lib/ruby/1.9.1/uri/common.rb:623:in `escape'
    from /var/lib/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/post.rb:140:in `block in url'
    from /var/lib/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/post.rb:140:in `map'
    from /var/lib/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/post.rb:140:in `url'
    from /home/samurailink3/Dropbox/Important Backups/Git Repos/samurailink3.com/plugins/sitemap_generator.rb:69:in `location_on_server'
    from /home/samurailink3/Dropbox/Important Backups/Git Repos/samurailink3.com/plugins/sitemap_generator.rb:219:in `fill_location'
    from /home/samurailink3/Dropbox/Important Backups/Git Repos/samurailink3.com/plugins/sitemap_generator.rb:181:in `fill_url'
    from /home/samurailink3/Dropbox/Important Backups/Git Repos/samurailink3.com/plugins/sitemap_generator.rb:146:in `block in fill_posts'
    from /home/samurailink3/Dropbox/Important Backups/Git Repos/samurailink3.com/plugins/sitemap_generator.rb:144:in `each'
    from /home/samurailink3/Dropbox/Important Backups/Git Repos/samurailink3.com/plugins/sitemap_generator.rb:144:in `fill_posts'
    from /home/samurailink3/Dropbox/Important Backups/Git Repos/samurailink3.com/plugins/sitemap_generator.rb:120:in `generate'
    from /var/lib/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:190:in `block in generate'
    from /var/lib/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:189:in `each'
    from /var/lib/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:189:in `generate'
    from /var/lib/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:40:in `process'
    from /var/lib/gems/1.9.1/gems/jekyll-0.12.0/bin/jekyll:264:in `<top (required)>'
    from /usr/local/bin/jekyll:23:in `load'
    from /usr/local/bin/jekyll:23:in `<main>' 
```

有任何想法吗？在我尝试导入之前，一切都运行良好。

另外，如果您想看一下，[这里是代码。](https://github.com/samurailink3/samurailink3.github.com/tree/source)我在`source`分支机构工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:56:18.787

我希望这些类型的错误在进行自动翻译时很常见，并且每次都有自己的技巧和转折。当我导入 jekyll 时，它被未关闭的 iframe HTML 标签（用于嵌入视频）阻塞。即使它们是有效的，解析器也不喜欢它们。你可能有类似的事情发生。

这一行：

```
/usr/lib/ruby/1.9.1/uri/common.rb:304:in `escape': undefined method `gsub' for 3:Fixnum (NoMethodError) 
```

为您提供从哪里开始的第一条线索。有东西试图调用“gsub”。我的第一步是在输出文件中搜索该字符串。如果找到了，请暂时删除 ./source/_posts/ 目录中除此之外的所有其他文件。这将减少您的问题集的大小，并让您进行更多实验以弄清楚到底发生了什么。开始破解该文件，直到你让它工作。

Update: If you don't find 'gsub' (and I've seen a few more references to it that make me think you won't find that as a string). A good trouble shooting approach is still to only keep one file at a time in your ./source/_posts/ directory to narrow down exactly what is going on.

# java - jqGrid：在更新和插入数据时显示/隐藏列

> ID：14581978
> 
> 赞同：0
> 
> 时间：2013-01-29T11:36:15.327
> 
> 标签：java, javascript, jsp, servlets, jqgrid

我正在使用 JSP 和 Servlet（IDE：Eclipse，数据库：Oracle10）开发一个 Web 应用程序。我正在使用 jqGrid 以表格格式显示记录。

**代码片段：**

```
jQuery("#list10").jqGrid({
        url:'ProfileServ?action=profile',
        datatype: "xml",
        sortable: true,
        height: 250,
        width: 550,
        colNames:['Sr.No.','PROFILE_ID','PROFILE_NAME','TITLE','FIRST_NAME','MIDDLE_NAME','LAST_NAME'], 
        colModel:[{name:'srNo',index:'srNo', width:20,sortable:true, hidden:true},
                          {name:'PROFILE_ID',index:'PROFILE_ID', width:70,sortable:true,editable:true},
                          {name:'PROFILE_NAME',index:'PROFILE_NAME', width:150,sortable:true,editable:true},
                          {name:'TITLE',index:'TITLE', width:200,sortable:false,editable:true, hidden:true},
                          {name:'FIRST_NAME',index:'FIRST_NAME', width:200,sortable:false,editable:true, hidden:true},
                          {name:'MIDDLE_NAME',index:'MIDDLE_NAME', width:200,sortable:false,editable:true, hidden:true},
                          {name:'LAST_NAME',index:'LAST_NAME', width:200,sortable:false,editable:true, hidden:true}],
        rowNum:10,
        rowList:[10,20,50,100],
        pager: '#pager10',
        sortname: 'srNo',
        loadonce:true,
        ignoreCase: true,
        viewrecords: true,
        sortorder: "desc",
        multiselect: false,
        editurl: "ProfileServ?action=profileEdit",
        caption: "Profile",
        }).navGrid('#pager10',{edit:true,add:true,del:true,view:true},
            {modal:true,checkOnUpdate:true,closeOnEscape:true,width:500,closeOnSubmit: true,editurl:'ProfileServ?action=profileEdit',
                beforeShowForm: function(formid){alert('hiu');
                    cm = $('#list10').jqGrid('getColProp',"PROFILE_NAME"); cm.hidden=true;
                    cm = $('#list10').jqGrid('getColProp',"TITLE"); cm.hidden=false;
                    cm = $('#list10').jqGrid('getColProp',"FIRST_NAME"); cm.hidden=false;
                    cm = $('#list10').jqGrid('getColProp',"MIDDLE_NAME"); cm.hidden=false;
                    cm = $('#list10').jqGrid('getColProp',"LAST_NAME"); cm.hidden=false;},recreateForm: true},
            {modal:true,closeOnEscape:true,recreateForm: true,width:500,mtype:'POST', url: 'ProfileServ',editData:{action: 'profileAdd',profileID: function () {return profileID;}},
                beforeShowForm: function(formid){alert('hi');
                    cm = $('#list10').jqGrid('getColProp',"PROFILE_NAME"); cm.hidden=true;
                    cm = $('#list10').jqGrid('getColProp',"PROFILE_ID"); cm.editable=true;
                    cm = $('#list10').jqGrid('getColProp',"TITLE"); cm.hidden=false;
                    cm = $('#list10').jqGrid('getColProp',"FIRST_NAME"); cm.hidden=false;
                    cm = $('#list10').jqGrid('getColProp',"MIDDLE_NAME"); cm.hidden=false;
                    cm = $('#list10').jqGrid('getColProp',"LAST_NAME"); cm.hidden=false;},recreateForm: true},
            {closeOnEscape:true, recreateForm: true,mtype: 'POST',url: 'ProfileServ',delData: {action: 'profileDelete',profileID: function () {return profileID;}},closeOnSubmit: true},
            {closeOnEscape: true, multipleSearch: true, closeAfterSearch: true,width: 700},
            {recreateForm: true,width:700,navkeys: [true,38,40],closeOnEscape:true}); 
```

在我的`colModel`4 列中是`hidden`，因为我不希望它们以表格格式显示。我想在用户想要`Insert`或`Update`数据时显示这些列。

因此，在我的代码中，我将这些列属性设置为`cm.hidden=false;`on `beforeShowForm`事件。但问题是，当用户想要编辑数据时，他必须在编辑按钮上单击两次，第一次单击时只显示两列未隐藏的列`colModel`，当用户在编辑按钮上单击两次时，我已设置`cm.hidden=false;`显示。插入数据时发生同样的事情。

我想我放在`recreateForm: true`错误的地方或错误的事件中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:47:26.447

只需将隐藏行设置为具有以下属性：

```
editable:true, editrules: {edithidden:true}}, 
```

JSfiddle 示例 [http://jsfiddle.net/dumbguy5689/9ueDL/4/](http://jsfiddle.net/dumbguy5689/9ueDL/4/)

# java - Spring 应用程序何时以及为什么需要 jboss-deployment-structure.xml？

> ID：14581980
> 
> 赞同：31
> 
> 时间：2013-01-29T11:36:20.990
> 
> 标签：java, spring, web-deployment, jboss-eap-6

我试图了解如何将 JBoss EAP6 与 Spring 应用程序一起使用。我有一个示例 OpenShift 应用程序，它包含一个`jboss-deployment-structure.xml`文件。

我找到了一些关于这个文件的[文档](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Application_Platform/6/html/Development_Guide/Add_an_Explicit_Module_Dependency_to_a_Deployment1.html)，但我不清楚为什么以及何时应该在 Spring 应用程序中使用这些文件。内容如下：

```
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.0">
   <deployment>
       <dependencies>
            <module name="com.h2database.h2"/>
            <module name="org.codehaus.jackson.jackson-core-asl"/>
            <module name="org.codehaus.jackson.jackson-mapper-asl"/>
            <module name="org.slf4j"/>
       </dependencies>
   </deployment>
</jboss-deployment-structure> 
```

为什么需要声明对模块的依赖关系？JBoss 范式中的模块是什么？没有这个xml文件能活吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-29T14:39:41.267

只要您的应用程序没有任何类加载问题，您就不需要 jboss-deployment-structure.xml 文件。但是，一旦您遇到此类问题，jboss-deployment-structure.xml 中的依赖管理将成为您的朋友。

文章[Modularized Java with JBoss Modules](https://web.archive.org/web/20190517214713/http://planet.jboss.org/post/modularized_java_with_jboss_modules)解释了哪些模块非常好。

我认为简而言之，您可以说部署为 WAR、JAR 或 EAR 的所有内容都是一个模块。这些模块称为*动态模块*。在它们旁边还有$JBOSS_HOME/modules 中的*静态*模块。唯一的区别是它们的包装方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-29T10:31:26.847

这是我在网上找到的：

*“为了避免使用 JBoss 提供的日志 API，我们需要将以下类型的“jboss-deployment-structure.xml”文件放在“/home/userone/ApplicationLevelLog4jDemo/src”中，以便我们可以排除 jboss 日志 API我们的应用程序和我们的应用程序可以使用它自己的日志 API 版本。”*

来源： http: [//middlewaremagic.com/](http://middlewaremagic.com/jboss/?p=1458)

# php - 生成用于 Web 服务身份验证的访问令牌的函数

> ID：14581983
> 
> 赞同：4
> 
> 时间：2013-01-29T11:36:21.527
> 
> 标签：php, cakephp, authentication, access-token

我需要一个生成访问令牌以唯一标识用户的 php 函数。我将把这个令牌存储在一个名为“token”的额外列中，并将它用于移动应用程序的身份验证。我在网上搜索了它，所有结果都是指 twitter 或 facebook。我在我的应用程序中需要它。

我使用 cakePHP 后端和 Android 平台。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T11:40:30.300

使用指南：-

```
function getGUID(){
    if (function_exists('com_create_guid')){
        return com_create_guid();
    }else{
        mt_srand((double)microtime()*10000);//optional for php 4.2.0 and up.
        $charid = strtoupper(md5(uniqid(rand(), true)));
        $hyphen = chr(45);// "-"
        $uuid = chr(123)// "{"
            .substr($charid, 0, 8).$hyphen
            .substr($charid, 8, 4).$hyphen
            .substr($charid,12, 4).$hyphen
            .substr($charid,16, 4).$hyphen
            .substr($charid,20,12)
            .chr(125);// "}"
        return $uuid;
    }
}

$GUID = getGUID();
echo $GUID; 
```

或参考此链接[http://guid.us/GUID/PHP](http://guid.us/GUID/PHP)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T11:45:02.467

您还可以使用 php 使用 rendomly 生成令牌，如下所示。

```
$length = 20;

function generate_password($length)
{
    if($length>0) 
    {
        $rand_id="";
        for($i=1; $i<=$length; $i++)
        {
            mt_srand((double)microtime() * 1000000);
            $num = mt_rand(1,36);
            $rand_id .= $this->assign_rand_value($num);
        }
    }
    return $rand_id;
}

function assign_rand_value($num)
{
    switch($num)
    {
        case "1":
            $rand_value = "a";
        break;
        case "2":
            $rand_value = "b";
        break;
        case "3":
            $rand_value = "c";
        break;
        case "4":
            $rand_value = "d";
        break;
        case "5":
            $rand_value = "e";
        break;
        case "6":
            $rand_value = "f";
        break;
        case "7":
            $rand_value = "g";
        break;
        case "8":
            $rand_value = "h";
        break;
        case "9":
            $rand_value = "i";
        break;
        case "10":
            $rand_value = "j";
        break;
        case "11":
            $rand_value = "k";
        break;
        case "12":
            $rand_value = "l";
        break;
        case "13":
            $rand_value = "m";
        break;
        case "14":
            $rand_value = "n";
        break;
        case "15":
            $rand_value = "o";
        break;
        case "16":
            $rand_value = "p";
        break;
        case "17":
            $rand_value = "q";
        break;
        case "18":
            $rand_value = "r";
        break;
        case "19":
            $rand_value = "s";
        break;
        case "20":
            $rand_value = "t";
        break;
        case "21":
            $rand_value = "u";
        break;
        case "22":
            $rand_value = "v";
        break;
        case "23":
            $rand_value = "w";
        break;
        case "24":
            $rand_value = "x";
        break;
        case "25":
            $rand_value = "y";
        break;
        case "26":
            $rand_value = "z";
        break;
        case "27":
            $rand_value = "0";
        break;
        case "28":
            $rand_value = "1";
        break;
        case "29":
            $rand_value = "2";
        break;
        case "30":
            $rand_value = "3";
        break;
        case "31":
            $rand_value = "4";
        break;
        case "32":
            $rand_value = "5";
        break;
        case "33":
            $rand_value = "6";
        break;
        case "34":
            $rand_value = "7";
        break;
        case "35":
            $rand_value = "8";
        break;
        case "36":
            $rand_value = "9";
        break;
    }
    return $rand_value;
} 
```

这将生成 20 个字符的随机令牌。

然后你可以这样称呼它

```
$link = $this->generate_password(20); 
```

# python - 使用 Kombu 设置 Rabbit MQ 心跳

> ID：14581986
> 
> 赞同：3
> 
> 时间：2013-01-29T11:36:33.990
> 
> 标签：python, rabbitmq, celery, heartbeat, kombu

**编辑：**

主要问题是第 3 方 rabbitmq 机器似乎时不时地杀死空闲连接。那是我开始收到“Broken Pipe”异常的时候。获得通讯的唯一途径。恢复正常是让我终止进程并重新启动它们。我想有更好的方法吗？

--

我在这里有点迷路了。我正在连接到第 3 方 RabbitMQ 服务器以将消息推送到。时不时地，他们机器上的所有套接字都被丢弃，我最终得到一个“断管”异常。

我被告知要在我的代码中实现心跳检查，但我不确定具体如何。我在这里找到了一些信息：http: [//kombu.readthedocs.org/en/latest/changelog.html#version-2-3-0](http://kombu.readthedocs.org/en/latest/changelog.html#version-2-3-0)但没有真正的示例代码。

我只需要在连接字符串中添加“？heartbeat = x”吗？Kombu 会做剩下的事情吗？我看到我需要在“x/2”处调用“Connection.heartbeat_check()”。我应该创建一个定期任务来调用它吗？如何重新建立连接？

我正在使用：

*   芹菜==3.0.12
*   海带==2.5.4

我的代码现在看起来像这样。调用一个简单的 Celery 任务将消息发送到第 3 方 RabbitMQ 服务器（删除了日志和注释以保持简短，足够基本）：

```
class SendMessageTask(Task):
    name = "campaign.backends.send"
    routing_key = "campaign.backends.send"
    ignore_result = True
    default_retry_delay = 60 # 1 minute.
    max_retries = 5

    def run(self, send_to, message, **kwargs):
    payload = "Testing message"

    try:
        conn = BrokerConnection(
        hostname=HOSTNAME,
        port=PORT,
        userid=USER_ID,
        password=PASSWORD,
        virtual_host=VHOST
        )

        with producers[conn].acquire(block=True) as producer:
        publish = conn.ensure(producer, producer.publish, errback=sending_errback, max_retries=3)
        publish(
            body=payload,
            routing_key=OUT_ROUTING_KEY,
            delivery_mode=2,
            exchange=EXCHANGE,
            serializer=None,
            content_type='text/xml',
            content_encoding = 'utf-8'
        )

    except Exception, ex:
        print ex 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:16:18.380

虽然您当然可以为生产者添加心跳支持，但它对消费者进程更有意义。

启用心跳意味着您必须定期发送心跳，例如，如果心跳设置为 1 秒，那么您必须每秒钟或更长时间发送一次心跳，否则远程将关闭连接。

这意味着您必须使用单独的线程或使用异步 io 来可靠地及时发送心跳，并且由于无法在线程之间共享连接，这给我们留下了异步 io。

好消息是，将心跳添加到仅生产连接可能不会有太多好处。

# winforms - 无边界约束的 ToolStripDropDown

> ID：14581988
> 
> 赞同：0
> 
> 时间：2013-01-29T11:36:36.630
> 
> 标签：winforms, c#-2.0

当用户在文本框中键入时，我正在使用 ToolStripDropDown 创建一个自动完成弹出窗口。我希望弹出窗口只显示在文本框的右下角。但是当文本框的位置靠近屏幕的右侧或底部边缘时，弹出窗口将显示在其他位置。谁能帮我？

ToolStripDropDown 派生类中的代码：

```
public void Show(Presenters.IMainView c, Point position)
    {
        base.Show(c as Control, position, ToolStripDropDownDirection.BelowRight);
    } 
```

主视图中的代码：

```
private void TextBoxAutocomplete_TextChanged(object sender, EventArgs e)
    {
        _mPopup.Show((IMainView)this, ((TextBox)sender).Location);
    } 
```

我希望弹出窗口的行为像普通表单一样，其位置不受屏幕或工作区边界的限制，但不会从父表单中窃取焦点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:51:40.850

我决定使用另一种更简单的方法。我没有使用 ToolStripDropDown 的派生类，而是使用从 UserControl 派生的类，使其不会从其父级窃取焦点（请参阅[此问题](https://stackoverflow.com/questions/11143905/how-can-i-prevent-a-form-from-stealing-focus-while-still-receving-mouse-clicks)）

# web-services - 如何保护 API？

> ID：14581994
> 
> 赞同：1
> 
> 时间：2013-01-29T11:37:04.350
> 
> 标签：web-services, web, security

我目前正在开发一个单页 Web 应用程序。Web 应用程序将调用类似 REST 的 API 以进行身份​​验证和数据存储。我们目前正在保护应用程序，并制定了保护网站的策略，因此只有注册用户才能获得访问权限。但我们还想做的一件事是保护 API 不受他人的影响，以编写他们自己的应用程序，或者通过我们的 Web 应用程序以外的任何其他方式访问它。在我看来，问题在于 API 将对所有人开放，而不仅仅是我的 Web 应用程序。

任何知道如何做到这一点的人，或者谁能指出我正确的方向。因为现在，一点头绪都没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:46:36.727

如果客户端的会话被授权，您的 API 应该是可访问的。这几乎是你能做的任何事情。

有一些复杂的方法，例如使用客户端和服务器端加密或一些非常基本的方法：在您的网页中呈现一个秘密，在每次请求时再次验证用户。您可以检查原始请求来自的标头。等等...

但由于其中大部分内容在用户浏览器中是公开的，因此任何人都可以阅读并在第三方应用程序中采用它。

所以拯救你自己和那些真正想做第三方应用程序并提供公共 API 的人 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:42:36.060

考虑使用证书和验证？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-07T16:12:04.610

您可以锁定您的 API 以接受来自已知 IP 的请求。此外，根据您的网络基础设施的设计方式，您的 Web 应用程序可以位于 DMZ 中，而您的 API 位于内部网络上，只能由您网络中的服务器访问，其中之一将包括您的后端 API（此处为本文信息[https:// www.digitalocean.com/community/tutorials/5-common-server-setups-for-your-web-application](https://www.digitalocean.com/community/tutorials/5-common-server-setups-for-your-web-application)有一些提示）。为了更好的安全性，除了像 OAuth2 和 HTTPS（如上所述）这样的应用程序安全框架实现之外，还需要一个安全的网络设计。对于 API，我发现基于资源的授权比基于角色的授权效果更好。最后，随着事情一直在变化，不断审查您的安全设置至关重要。一个好的方法是 OWASP 在此处描述的威胁建模[https://www.owasp.org/index.php/Application_Threat_Modeling](https://www.owasp.org/index.php/Application_Threat_Modeling)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-31T15:45:58.600

最简单的方法是使用您需要的 OAuth 2.0（同时支持身份验证和授权）。

还要确保您使用 TLS (HTTPS) 和以下任何选项来保护在线数据

```
1\. HTTP Digest
2\. OAuthn 2.0
3\. Certificates ( Shared secret) 
```

现在坚持使用 HTTPS+Oauth2。

# vb.net - 单击按钮时vb.net RDLC报告不显示报告

> ID：14581997
> 
> 赞同：1
> 
> 时间：2013-01-29T11:37:12.890
> 
> 标签：vb.net, visual-studio-2010, rdlc, report-viewer2010

在我的 Vb.net 应用程序中，我使用 rdlc 报告和 ReportViewer。但它只在 page_load 事件中加载报告。这是我的代码

```
Private Sub report_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Me.displayTableAdapter.Fill(Me.aludbDataSet.display)
    Me.ReportViewer1.RefreshReport()
End Sub 
```

当我将其更改为 Button_click 事件时，它不会加载报告。代码在这里

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)
    Me.displayTableAdapter.Fill(Me.aludbDataSet.display)
    Me.ReportViewer1.RefreshReport()
End Sub 
```

我不知道为什么会这样。因为两者是相同的代码，只是方式不同。现在，我想在单击按钮时加载报告。怎么做？请任何人帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:41:50.643

尝试添加“句柄”代码

> Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)**处理 Button1.Click**