# StackOverflow 问答 15780000-15780999

# android - label click event not working with Check box jquery in some android OS

> ID：15780006
> 
> 赞同：0
> 
> 时间：2013-04-03T06:06:58.547
> 
> 标签：android, jquery, css, cordova, mobile-webkit

Here is a Html page where i am using jquery and css with phonegap and implementing the UI , However this code is correctly working on webkit of Andorid OS 4.x version while the check while the function is not getting called in Label named **changePageTermUse()** in Android 2.3 device , i e clicking on label text refresh the checkbox only , while the same logic works on android 4.x devices , Whether I am doing something wrong or do i need to implement other way for android old version of OS like 2.3 .. etc

For Reference I am attaching the image at the end

```
<div class="chkbox-large-text">
    <label>
        <input name="checkbox-0 " type="checkbox" data-iconpos="left" id="Chkterms" />
        I accept the <a style="text-decoration:underline;" onclick="changePageTermUse()">Terms of Use</a>.
    </label>
</div> 
```

JS

```
function changePageTermUse() {
    $.mobile.changePage( "#terms-of-service", {transition: "none"});
} 
```

**Term of Use** label text has click event that is working in Android 4.x but not working in 2.3 OS Any suggestion will be appreciated

![enter image description here](https://i.stack.imgur.com/IfgvV.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:56:40.200

几天前，我遇到了一个问题，Android 上的点击事件没有响应。但它适用于iOS。我发现，父 div 没有高度。经常检查这个...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:10:54.813

为复选框的标签和 id 提供相同的值

```
 <label for="aa">
 <input type="checkbox" id="aa"> 
```

# android - how to end the call by shaking the phone

> ID：15780008
> 
> 赞同：0
> 
> 时间：2013-04-03T06:07:09.547
> 
> 标签：android, handshaking

I'm doing an Android application that is enable differently abled people is alow to dial a pre-defined number for help by shaking the phone. I did a customization when one shake calling a specific number. But, I don't get any idea:

How I turn call off by shaking in the same direction? How does double shake go another call and so on..

```
public void onSensorChanged(SensorEvent event) {

    if (event.sensor.getType() != Sensor.TYPE_ACCELEROMETER || event.values.length < 2)
          return;

    currentTime = System.currentTimeMillis();

    if ((currentTime - lastUpdate) > 100) {
        long diffTime = (currentTime - lastUpdate);
        lastUpdate = currentTime;

        current_x = event.values[DATA_X];
        current_y = event.values[DATA_Y];
        current_z = event.values[DATA_Z];

        currenForce = Math.abs(current_x+current_y+current_z - last_x - last_y - last_z) / diffTime * 10000;

        if (currenForce > FORCE_THRESHOLD && inCall ==0) {

            if (sp.contains("number") && sp.getString("number","").length() > 5 ){

            // Device has been shaken now go on and do something
            // you could now inform the parent activity ...
            String phoneNumber = sp.getString("Number", "1800");
            android.net.Uri uri = android.net.Uri.fromParts("tel", phoneNumber, null);

            try{
            inCall =1;  
            android.content.Intent callIntent = new android.content.Intent(android.content.Intent.ACTION_CALL, uri);
            callIntent.setFlags(android.content.Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(callIntent);
            }catch(Exception e){
                inCall =0;
                e.printStackTrace();
            }

            }else{
                Toast.makeText(this, "Please Configure number first", Toast.LENGTH_LONG);
            }

        }else{

             try{   
                 Toast.makeText(getBaseContext(), "Trying to End Call", Toast.LENGTH_LONG);
                 // Send Key For End Call
                 new KeyEvent(KeyEvent.ACTION_DOWN,
                       KeyEvent.KEYCODE_ENDCALL );

                 inCall =0;
             }catch(Exception e){

                 e.printStackTrace();
             }

        }

        last_x = current_x;
        last_y = current_y;
        last_z = current_z;

    } 
```

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T10:18:49.610

我尝试了一些技巧来发送结束通话点击，但没有奏效。

但是，基于[**此链接**](https://stackoverflow.com/a/8380418/878126)和[**此链接**](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/com/android/internal/telephony/ITelephony.java/?v=source)，下一个代码将导致电话挂起，尽管我将此视为 hack：

```
try {
final String serviceManagerName = "android.os.ServiceManager";
final String serviceManagerNativeName = "android.os.ServiceManagerNative";
final String telephonyName = "com.android.internal.telephony.ITelephony";

Class<?> telephonyClass;
Class<?> telephonyStubClass;
Class<?> serviceManagerClass;
Class<?> serviceManagerNativeClass;
Method telephonyEndCall;
Object telephonyObject;
Object serviceManagerObject;

telephonyClass = Class.forName(telephonyName);
telephonyStubClass = telephonyClass.getClasses()[0];
serviceManagerClass = Class.forName(serviceManagerName);
serviceManagerNativeClass = Class.forName(serviceManagerNativeName);

final Method getService = serviceManagerClass.getMethod("getService", String.class);

final Method tempInterfaceMethod = serviceManagerNativeClass.getMethod("asInterface", IBinder.class);

final Binder tmpBinder = new Binder();
tmpBinder.attachInterface(null, "fake");

serviceManagerObject = tempInterfaceMethod.invoke(null, tmpBinder);
final IBinder retbinder = (IBinder) getService.invoke(serviceManagerObject, "phone");
final Method serviceMethod = telephonyStubClass.getMethod("asInterface", IBinder.class);

telephonyObject = serviceMethod.invoke(null, retbinder);
// telephonyCall = telephonyClass.getMethod("call", String.class);
telephonyEndCall = telephonyClass.getMethod("endCall");
// telephonyAnswerCall = telephonyClass.getMethod("answerRingingCall");

telephonyEndCall.invoke(telephonyObject);

} catch (final Exception e) {
e.printStackTrace();
} 
```

* * *

编辑：此代码不适用于所有设备和 Android 版本（例如 Nexus 5x 与 Android 8.1）。[**唯一安全的解决方案是使用官方 API，遗憾的是 Android P 提供了该 API。我在这里**](https://stackoverflow.com/a/51155265/878126)写过。

# c++ - 从重载函数 std::real 解析地址

> ID：15780011
> 
> 赞同：7
> 
> 时间：2013-04-03T06:07:24.177
> 
> 标签：c++, algorithm, stl, overloading

```
std::vector<std::complex<float> > c;
std::vector<float> d;
std::transform(c.begin(), c.end(), d.begin(), std::real<float>); 
```

为什么编译器不能从重载函数中解析地址`real<float>`？

编译器指的是哪些重载函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T06:40:05.887

您的库实现为`std::real<float>`.

## 为什么会超载？

> ### 26.4.9 附加重载 [cmplx.over]
> 
> *   1 以下函数模板应具有额外的重载：
>     
>     
>     
>     ```
>     arg norm
>     conj proj
>     imag real 
>     ```
>     
>     
> *   2 附加过载应足以确保：
>     1.  如果参数有类型`long double`，那么它被有效地强制转换为`complex<long double>`。
>     2.  否则，如果参数具有类型`double`或整数类型，则有效地将其强制转换为`complex<double>`.
>     3.  否则，如果参数的类型为`float`，则它被有效地强制转换为`complex<float>`。
> 
> [...]

## 问题的解决方案：

您可以只使用基于...的范围

```
for (auto v : c) d.push_back(real(v)); 
```

...或将调用打包`real`到仿函数或其他函数中...

```
struct my_caller {
    template <typename T> T operator() (std::complex<T> const &c) {
        return real(c);
    }
}; 
```

...或使用成员函数...

```
std::transform(c.begin(), c.end(), d.begin(), [](std::complex<T> const &c) { 
    return c.real();
}); 
```

* * *

重要的：

请注意，使用时您必须在目标中有足够的空间`transform`：

```
std::vector<float> d (c.size()); 
```

或使用后插入器：

```
std::transform(c.begin(), c.end(), back_inserter(d), ...); 
```

否则，您将遍历未定义的内存，从而产生未定义的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T06:55:07.673

**§26.4.9**规定（除其他外），`real`对于 float、double 和 long double 类型的参数，应具有额外的重载。看来你的图书馆实现为这些重载做了一个模板，也许像

```
template <typename T>
T real(T const& t)
{
  return std::real(std::complex<T>{t});
} 
```

除了 phresnel 提供的解决方案之外，您还可以明确告诉编译器您指的是哪种函数指针：

```
std::transform(c.begin(), c.end(), d.begin(), (float(*)(std::complex<float> const&))std::real<float>); 
```

然后编译器寻找一个`std::real`可以转换成给定类型的函数指针的指针，并找到正确的指针。

我告诉你这只是为了完整性 - 我认为这种显式转换很难看，并且更喜欢基于范围的 for 或使用 lambda 进行转换。

# c++ - AVL binary search tree rotation c++

> ID：15780014
> 
> 赞同：0
> 
> 时间：2013-04-03T06:07:38.360
> 
> 标签：c++, nodes

i am working on an avl tree and i think ive got the everything right, but im not sure here is my rotate right function am i doing it correcty?

```
Node* BinaryTree::rotateRight(Node *N)
{
    Node *newNode = new Node();
    newNode = N->getLeft();
    N->setLeft(newNode->getRight());
    newNode->setRight(N);
    root = newNode;
    return newNode;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:15:21.650

rotateRight 不需要分配新节点。它仅通过操作指向现有节点的指针来工作。像这样

```
Node* BinaryTree::rotateRight(Node *N)
{
    Node *pivot = N->getLeft();
    N->setLeft(pivot->getRight());
    pivot->setRight(N);
    return pivot;
} 
```

因此，除了不必要地分配一个新节点并出于某种原因分配给 root 之外，您几乎是正确的。

BTW rotateRight 通常可以做成静态方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:52:35.590

我认为您的代码可能会在之后造成内存泄漏`newNode = N->getLeft();`

这是我直接在此处编写的实现。你可以检查它是否正确。我没有测试过。

```
Node* BinaryTree::rotateRight(Node *N)
{
    Node *newNode = new Node();
    Node *prevLeft = N->getLeft();

    prevLeft->setRight(newNode);
    newNode->setLeft(prevLeft);
    newNode->setRight(N);
    N->setLeft(newNode);

    root = newNode;
    return newNode;
} 
```

# android - push notification payload with groups in Android

> ID：15780019
> 
> 赞同：0
> 
> 时间：2013-04-03T06:07:50.283
> 
> 标签：android, push-notification

I have requirement to group push for different sections. Like if title include G1 and other push with title G2 then two different push notification need to delivered on same handset

```
string message = "group";
string alertValue = "sports";
push.QueueNotification(android.WithJson("{ alert : " + message + ", alertValue: " + alertValue + " }")); 
```

Above code might be working in iPhone but it is not working in Android it is giving Invalid JSON error. I want payload for android for grouping push notifications.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T07:09:59.507

我不太确定，但我认为您将不得不单独发送通知，因为 Android 操作系统会接收和显示推送通知。所以你不能在设备上控制它，如果你想在设备上单独显示它，你必须与服务器分开发送。

本教程也可以帮助你。 [https://developer.stackmob.com/tutorials/android/Push-Notifications](https://developer.stackmob.com/tutorials/android/Push-Notifications)

谢谢。

# css - 如何减少垂直单选按钮列表之间的空间

> ID：15780020
> 
> 赞同：2
> 
> 时间：2013-04-03T06:07:50.487
> 
> 标签：css, asp.net, radio-button, padding

我有一个垂直的 radiobuttonList 坐在桌子上。

如何减小每个列表项之间的间距，以使 radiobuttonList 的总高度更小？

我尝试过使用填充和边距，但似乎都没有。

![在此处输入图像描述](https://i.stack.imgur.com/1GQBw.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:12:06.633

使用`CellPadding`的属性`RadioButtonList`，可以将最小高度设置为 0

```
<asp:RadioButtonList ID="rdlst" runat="server" CellPadding="15" CellSpacing="0"  ><asp:ListItem Value="1" Text="1"></asp:ListItem> <asp:ListItem Value="2" Text="2"></asp:ListItem></asp:RadioButtonList> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:14:02.603

您可以在 radiobuttonlist 标记中添加它：

```
 <asp:RadioButtonList ID="RadioButtonList1" runat="server" Width="300px"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:12:46.793

`cellspacing="0" cellpadding="0"`表中的单选按钮列表，因此也尝试`padding:0;`使用 td

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T06:13:21.560

如果这个[w3schools 演示](http://www.w3schools.com/aspnet/showasp.asp?filename=demo_radiobuttonlist)演示了准确的标记，那么它们看起来就像是在表格中构建的。尝试这个：

```
.someClassName td {
    padding: 0;
    margin: 0;
} 
```

替换`.someClassName`为`CssClass`the`RadioButtonList`或其他一些包装器对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-22T23:49:02.340

我将单选按钮列表更改为使用`RepeatLayout="Flow"`而不是`RepeatLayout="Table"`

例如：

```
<asp:RadioButtonList ID="radOrderBy" runat="server" AutoPostBack="True" RepeatLayout="Flow" >
    <asp:ListItem Value="NAME" Text="Name" Selected="True" />
    <asp:ListItem Value="NUMBER" Text="Number" />
</asp:RadioButtonList> 
```

# java - json：我们可以避免在序列化对象时写入空属性（我们可以为此使用@JsonWriteNullProperties(false)）吗？

> ID：15780024
> 
> 赞同：0
> 
> 时间：2013-04-03T06:08:11.067
> 
> 标签：java, json, nullpointerexception, jackson, gson

我正在尝试将 json 对象转换为Facebook graph-api`restFBResponse`中的类对象。`Post`

```
MyPost post = gson.fromJson(restFBResponse.toString(), MyPost.class); 
```

其中，MyPost 类如下：

```
import org.codehaus.jackson.annotate.JsonWriteNullProperties;

@JsonWriteNullProperties(false)
public class MyPost extends Post {

} 
```

类中有很多领域`Post`。如果`actions`json 对象中不存在这些字段中的任何一个（例如 eg ），则对象`restFBResponse`中的相应条目`post`将为空。但是在 class 中`Post`，actions 是由一个 arraylist 分配的，

```
List<Action> actions = new ArrayList<Action>(); 
```

因此，如果`actions`不存在`restFBResponse`，对象中的`actions`字段`post`将变为`null`。如果我尝试通过以下方式访问添加新元素的操作：

```
post.getActions().add(element) 
```

它导致错误：

```
Exception in thread "main" java.lang.NullPointerException 
```

`ArrayList<Action>`相反，我希望它保持`actions`在`restFBResponse`. 即如果字段为 null 则避免写入`null`。

我怎样才能做到这一点？

我尝试使用`@JsonWriteNullProperties(false)`所有类，但结果仍然相同，即对象中缺少的元素在`restFBResponse`对象中有相应的空条目`post`。

# android - 如何在 Windows XP 上挂载 Android 文件系统

> ID：15780029
> 
> 赞同：1
> 
> 时间：2013-04-03T06:08:23.190
> 
> 标签：android, android-ndk, samba, file-sharing

我正在通过 shell 在 android 上使用 gcc 编译程序，但想在 windows XP 机器上编辑代码。

特别是，我正在寻找一种方法来安装 android 文件系统的根级别，而不仅仅是 sdcard 分区。

亚行推拉太慢了。Eclipse DDMS 不会以 su（超级用户）身份挂载，而且有一点问题。android 没有 NFS 支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:08:23.190

Samba 是 SMB/CIFS 网络协议的免费软件重新实现。由 funkyfresh 开发的 Samba Filesharing for android 是一个 Samba 服务器，可在 android 上共享 sdcard 数据，可在 Play 商店获得。Samba 需要一个 root 的 android 和超级用户。

为了共享 android 的根级别而不仅仅是 sdcard 挂载，有一个[funkyfresh Samba 的开发者版本](http://forum.xda-developers.com/showpost.php?p=8239139&postcount=128)。通过安装开发者版本，有一个选项`don't rewrite smb.conf`，在公共版本中不存在。

要共享 root，请设置 samba 以包含密码、用户名、工作组、netbios。默认情况下，这将共享 sdcard，并且在其他文件共享选项下可以选择共享第二个 sdcard。在其他选项中，我也禁用了`no local master browser`. 这将设置一个或两个可以安装在 Windows 上的共享，就像它是`Microsoft windows network`工作组的成员一样。

一旦一切正常。检查`don't rewrite smb.conf`. 然后拉动`adb pull /data/data/com.funkyfresh.samba/files/smb.conf smb.conf`并更改`path = /mnt/sdcard`以`path = /`保存文件并`adb push smb.conf /data/data/com.funkyfresh.samba/files/smb.conf`

替换文件后，禁用并启用服务器。现在将共享挂载到 Windows 上并查看、编辑、复制来自 android 文件系统的文件作为 PC 上的本地共享。

# jquery - 简单的 php ajax 请求 url

> ID：15780031
> 
> 赞同：3
> 
> 时间：2013-04-03T06:08:25.290
> 
> 标签：jquery, ajax

我有很多这样的链接......不同的链接标识我不同的项目

```
<a class="member" href="http//ex.com/action.php?me=1">link1</a> 
```

所以当我点击这个我想`action.php`从这里导航到（`here.php`）我正在使用 ajax 来做到这一点。

我是 jQuery 的新手..我无法理解`url`参数的用法..我尝试了很多在这里找到的帖子...想要将 --me-- 值从发送`here.php`到`action.php`..的基本方法

```
$("a.member").click(function(e) {
    $.ajax({
        type: "GET",
        url: "action.php?",
        data: "me=" + me,
        success: function (data) {
            alert(data);
        }
    });

    return false;

    e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T06:16:11.820

这是一个例子，

jquery部分：

```
$("#update").click(function(e) {
    e.preventDefault();
    var name = 'roger'; 
    var last_name = 'blake';
    var dataString = 'name='+name+'&last_name='+last_name;

    $.ajax({
        type:'POST',
        data:dataString,
        url:'insert.php',
        success:function(data) {
            alert(data);
        }
    });
}); 
```

**insert.php**页面_

```
<?php
    $name = $_POST['name'];
    $last_name = $_POST['last_name'];
    $insert = "insert into TABLE_NAME values('$name','$last_name')";// Do Your Insert Query
    if(mysql_query($insert)) {
        echo "Success";
    } else {
        echo "Cannot Insert";
    }
?> 
```

**注意：不要使用 mysql_* 函数**

希望这可以帮助，

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T06:10:15.360

试试这个 ：

```
$.ajax({
    type: "GET",
    url: "action.php",
    data: {
        me: me
    },
    success: function (data) {
        alert(data);

    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T06:12:37.393

由于参数已经在`<a>`'s href url 中，只需将其传递给 url

```
$("a.member").click(function(e){ 
     $.ajax({
            type: "GET",
            url: this.href,
            success: function(data){
                      alert(data);
            }
     });
     return false;
}); 
```

# javascript - 根据猫鼬js中的条件填充不工作

> ID：15780032
> 
> 赞同：1
> 
> 时间：2013-04-03T06:08:25.550
> 
> 标签：javascript, node.js, mongodb, express, mongoose

我有 2 个架构

```
var Schema = require('mongoose').Schema;
var DeviceSchema = new Schema({
    name: {
        type: String
    },
    code: {
        type: String,
        unique: true
    },
    os: {
        type: String
    },
    userEmail: {
        type: String
    },
    checkoutTime: {
        type: Date

    },
    tags: {
        type: [String]

    }

});
module.exports = DeviceSchema;

var Schema = require('mongoose').Schema;
var TrackHistorySchema = new Schema({
    userEmail: {
        type: String
    },
    device: {
        type: Schema.ObjectId,
        ref: 'Device',
        required: true
    },
    checkinTime: {
        type: Date
    },
    checkoutTime: {
        type: Date,
        'default': Date.now
    }

});
module.exports = TrackHistorySchema; 
```

我有一个搜索跟踪历史记录，其中包含标准用户电子邮件 ID 和设备名称。

如果我使用历史表中的电子邮件条件，这将有效

```
TrackHistory.find({'userEmail': req.query.searchText})
                    .populate({path: 'device'})
                    .sort('-name')
                    .skip(page * maxHistoryPerPage)
                    .limit(maxHistoryPerPage)
                    .exec(next); 
```

但如果我使用设备表中的设备名称标准，它将不起作用

```
TrackHistory.find({})
                    .populate({path: 'device', match: {name: req.query.searchText}})
                    .sort('-name')
                    .skip(page * maxHistoryPerPage)
                    .limit(maxHistoryPerPage)
                    .exec(next); 
```

我正在获取设备列为空的所有历史记录行，就像 mysql 中的左连接一样。我想要一个类似内部连接的功能，即如果设备名称不匹配，则也不应显示相应的历史记录行。我尝试了 mongoose 文档中的不同组合。也试过where子句。

我正在使用 mongoose 3.6.2（目前最新可用）

# 编辑 - 添加模型代码

```
var mongoose = require('mongoose');
var DeviceSchema = require('../schemas/device');
var Device = mongoose.model('Device', DeviceSchema);
module.exports = Device;

var mongoose = require('mongoose');
var TrackHistorySchema = require('../schemas/track_history');
var TrackHistory = mongoose.model('TrackHistory', TrackHistorySchema);
module.exports = TrackHistory; 
```

# android - 想要在点击按钮时在 android 中打开 gmap

> ID：15780033
> 
> 赞同：1
> 
> 时间：2013-04-03T06:08:42.473
> 
> 标签：android

我是 android 开发的新手...我在 android 上创建了一个项目，其中菜单页面将有四个图像按钮...通过单击其中一个按钮我可以打开谷歌地图。其他三个按钮工作正常但将带我googlemaps的按钮不起作用。一旦我单击该按钮，应用程序就会强制关闭，消息应用程序意外停止。我的 Java 页面在这里

```
 package com.drugindexx.demo;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.RelativeLayout;
import android.widget.TextView;

import com.drugindexx.others.Prefs;

public class MenuOptions extends Activity{

private ImageButton ibtnIndex,ibtnSearch,ibtnProfile,ibtnSettings;
private String selectedbackground;
RelativeLayout rltv_main;
RelativeLayout rltv_header;
String user;
Button btn_logout;
TextView tv_name;
String Firstname;

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);

    rltv_header = (RelativeLayout) findViewById(R.id.RLHeader);
    rltv_main = (RelativeLayout) findViewById(R.id.RLMain);
    ibtnIndex=(ImageButton)findViewById(R.id.imgbtnDoctor);
    ibtnSearch=(ImageButton)findViewById(R.id.imgbtnGmap);
    ibtnProfile=(ImageButton)findViewById(R.id.imgbtnProfile);
    ibtnSettings=(ImageButton)findViewById(R.id.imgbtnSetting);
     btn_logout= (Button)findViewById(R.id.btn_logout);
     tv_name= (TextView)findViewById(R.id.txtvw_name);

     LoadPreferences();
    /*if (getIntent().getExtras().getString("user") == null){
        user="";
    }
    else{
        user= getIntent().getExtras().getString("user");
    }

    if(getIntent().getExtras().getString("fname")== null){
        Firstname= "";
    }
    else{
        Firstname= getIntent().getExtras().getString("fname");

    }*/

     if(getIntent().getStringExtra("user") != null){
            user = getIntent().getStringExtra("user");

     }  
            if(getIntent().getStringExtra("fname") != null){
               Firstname = getIntent().getStringExtra("fname");
               tv_name.setText(Firstname);
            } 

    ibtnSettings.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            SavePreferences("username", user);
            Intent i=new Intent(getApplicationContext(),Settings.class);
            startActivity(i);
        }
    });
     //ibtnSearch=(ImageButton)findViewById(R.id.imgbtnGmap);
    ibtnSearch.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            SavePreferences("username", user);
            startActivity(new Intent(MenuOptions.this,G.class));
            //startActivity(i);
        }
    });

   ibtnProfile.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        SavePreferences("username", user);
        Intent i=new Intent(getApplicationContext(),UserDetails.class);
         i.putExtra("user", user);
        startActivity(i);
    }
});
  ibtnIndex.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        SavePreferences("username", user);
        Intent i=new Intent(getApplicationContext(),SarchIndx.class);

        startActivity(i);
    }
});
  btn_logout.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        SavePreferences("username", user);
        SharedPreferences sharedPreferences = PreferenceManager
        .getDefaultSharedPreferences(getApplicationContext());
        String strSavedMem1 = sharedPreferences.getString("phn_no", "");
        strSavedMem1= "";
        String strSavedMem2 = sharedPreferences.getString("text", "");
        strSavedMem2= "";
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.remove("phn_no"); 
        editor.remove("text");

        editor.remove("MEM1");
        editor.remove("MEM2");
        editor.commit();

        Intent i=new Intent(getApplicationContext(),LoginPage.class); 
        startActivity(i);
    }
});
}
@Override
protected void onResume() {
    super.onResume();
    Prefs pref = new Prefs(MenuOptions.this);
    selectedbackground = pref.getbackground();
    setbackgroundtothisscreen();

}
private void setbackgroundtothisscreen() {
    if (selectedbackground.contains("Red")) {
        rltv_main.setBackgroundResource(R.drawable.background_red);
        rltv_header.setBackgroundResource(R.drawable.topbar_red);

    } else if (selectedbackground.contains("Blue")) {
        rltv_main.setBackgroundResource(R.drawable.background_blue);
        rltv_header.setBackgroundResource(R.drawable.topbar_blue);

    } else if (selectedbackground.contains("Green")) {
        rltv_main.setBackgroundResource(R.drawable.background_green);
        rltv_header.setBackgroundResource(R.drawable.topbar_green);

    }

}

protected void SavePreferences(String key, String value) {
    SharedPreferences sharedPreferences = PreferenceManager
    .getDefaultSharedPreferences(getApplicationContext());
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString(key, value);
    editor.commit();    

    }
private void LoadPreferences() {
    SharedPreferences sharedPreferences = PreferenceManager
    .getDefaultSharedPreferences(getApplicationContext());
    user = sharedPreferences.getString("username", "");

    }
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

这是xml页面：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RLMain"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/midbg" >
<RelativeLayout
    android:id="@+id/RLHeader"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:background="@drawable/topbar_red" >

    <TextView
        android:id="@+id/txtvw_topbar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Welcome"
        android:textColor="@color/white"
        android:textAppearance="?android:attr/textAppearanceMedium" 
        android:layout_marginTop="10dp"/>

  <TextView
        android:id="@+id/txtvw_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
       android:layout_marginTop="10dp"
        android:layout_marginLeft="10dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:layout_toRightOf="@+id/txtvw_topbar" 
        android:textColor="@color/white"/>

    <Button 
       android:id="@+id/btn_logout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Logout"
        android:layout_marginLeft="250dp"
        android:background="@drawable/blankblack"
        android:textColor="@color/white"
        android:layout_marginTop="10dp"
       />
  </RelativeLayout>

<RelativeLayout
    android:id="@+id/RLBody"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/RLHeader" 
    android:layout_marginTop="20dp">

     <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/rltv_mainrltv" >
          <RelativeLayout
                    android:id="@+id/rltv_dtlshldr"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true" >

              <RelativeLayout
                  android:id="@+id/rl01"
                  android:layout_width="fill_parent"
                  android:layout_height="wrap_content" >

                  <ImageButton
                      android:id="@+id/imgbtnDoctor"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:src="@drawable/doctor" />

                  <ImageButton
                      android:id="@+id/imgbtnGmap"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:layout_alignParentRight="true"
                      android:layout_centerVertical="true"
                      android:src="@drawable/gmap" />

              </RelativeLayout>

              <RelativeLayout 
                  android:id="@+id/rl02"
                  android:layout_below="@+id/rl01"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"
                  android:layout_marginTop="50dp"
                  >

 <ImageButton
    android:id="@+id/imgbtnProfile"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="37dp"
    android:src="@drawable/profile" />

 <ImageButton
    android:id="@+id/imgbtnSetting"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="26dp"
    android:src="@drawable/setting" />

              </RelativeLayout>
          </RelativeLayout>
     </ScrollView>
   </RelativeLayout>

</RelativeLayout> 
```

地图的 .java 页面是：

```
 package com.drugindexx.demo;

import android.os.Bundle;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class G extends MapActivity{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.g);
    MapView mapView = (MapView) findViewById(R.id.map);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(true);
  }

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

地图的 xml 页面是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<com.google.android.maps.MapView
             android:id="@+id/map"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:apiKey="0VSKb6B9mzGfO7Ic6cKeMOZSh-8hJYOd7a4YZ3A"
             android:clickable="true"
             />

</LinearLayout> 
```

现在我在这里给出错误::

```
04-02 19:23:36.111: E/AndroidRuntime(567): FATAL EXCEPTION: main
04-02 19:23:36.111: E/AndroidRuntime(567): java.lang.NoClassDefFoundError: com.drugindexx.demo.G
04-02 19:23:36.111: E/AndroidRuntime(567):  at com.drugindexx.demo.MenuOptions$2.onClick     (MenuOptions.java:84)
04-02 19:23:36.111: E/AndroidRuntime(567):  at android.view.View.performClick(View.java:2408)
04-02 19:23:36.111: E/AndroidRuntime(567):  at android.view.View$PerformClick.run(View.java:8816)
04-02 19:23:36.111: E/AndroidRuntime(567):  at android.os.Handler.handleCallback(Handler.java:587)
04-02 19:23:36.111: E/AndroidRuntime(567):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-02 19:23:36.111: E/AndroidRuntime(567):  at android.os.Looper.loop(Looper.java:123)
04-02 19:23:36.111: E/AndroidRuntime(567):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-02 19:23:36.111: E/AndroidRuntime(567):  at java.lang.reflect.Method.invokeNative(Native Method)
04-02 19:23:36.111: E/AndroidRuntime(567):  at java.lang.reflect.Method.invoke(Method.java:521)
04-02 19:23:36.111: E/AndroidRuntime(567):  at    com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-02 19:23:36.111: E/AndroidRuntime(567):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-02 19:23:36.111: E/AndroidRuntime(567):  at dalvik.system.NativeStart.main(Native Method)
04-02 19:23:36.111: E/AndroidRuntime(567): Caused by: java.lang.IllegalAccessError: Class ref       in  pre-verified class resolved to unexpected implementation
04-02 19:23:36.111: E/AndroidRuntime(567):  at dalvik.system.DexFile.defineClass(Native Method)
04-02 19:23:36.111: E/AndroidRuntime(567):  at dalvik.system.DexFile.loadClassBinaryName(DexFile.java:209)
04-02 19:23:36.111: E/AndroidRuntime(567):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:203)
04-02 19:23:36.111: E/AndroidRuntime(567):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-02 19:23:36.111: E/AndroidRuntime(567):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-02 19:23:36.111: E/AndroidRuntime(567):  ... 12 more 
```

就是这样，先生……非常努力，但无法纠正我的错误……我是编程新手……寻求您的帮助

# web-services - 使用 .net 框架 1.1 的 Web 服务回调

> ID：15780035
> 
> 赞同：0
> 
> 时间：2013-04-03T06:08:44.870
> 
> 标签：web-services, notifications

我有一个使用 1.1 框架开发的 .net windows 应用程序，当发生事件时需要通知该应用程序。我正在尝试通过异步调用服务来使用 web 服务回调。但我得到的示例仅适用于框架 2.0，不适用于 1.1 框架。

# android - Android HTTP Post 到不带参数的 URL

> ID：15780036
> 
> 赞同：3
> 
> 时间：2013-04-03T06:08:51.307
> 
> 标签：android, performance, http

嗯，对 android 很陌生，并试图通过 android 向 URL 发帖。我的网址看起来像这样。

```
 http://192.168.101.111:7000/MyService.svc/home/updatejob/4600/XCV13030001/TTTT0000/CCCC0000/SSSS0000 
```

我可以通过 Advance rest 客户端向这个 url 发布一个帖子，这工作正常。这是我的android代码实现

```
public boolean updateInfo() {
    boolean result = false;
    HttpClient httpClient = new DefaultHttpClient();

    HttpPost httpPost = new HttpPost(url);
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("sbDriverID", sbDriverID.toString()));
    params.add(new BasicNameValuePair("sbJobNumber", sbJobNumber.toString()));
    params.add(new BasicNameValuePair("sbTrailerNumber", sbTrailerNumber.toString()));
    params.add(new BasicNameValuePair("sbContainerNumber", sbContainerNumber.toString()));
    params.add(new BasicNameValuePair("sbSealNumber", sbSealNumber.toString()));
    try {
        UrlEncodedFormEntity entity = new UrlEncodedFormEntity(params, "UTF-8");
        httpPost.setEntity(entity);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        if (httpResponse != null) {
            if (httpResponse.getStatusLine().getStatusCode() == 204)
                result = true;
        }
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return result;
} 
```

这给我一个 404。我很努力，找不到原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T15:17:10.597

您是否尝试从无法连接的同一 Android 设备打开 URL（使用浏览器）？也许 Android 设备位于不同的域中。

# css - 为什么这个 CSS 不适合？

> ID：15780039
> 
> 赞同：1
> 
> 时间：2013-04-03T06:09:01.100
> 
> 标签：css, positioning

我有一个宽度为 970px 的 div。（也就是说，当然，不包括边框、边距和填充）。我在其中并排放置了两个 div。这是他们的 CSS：

```
#content { display: inline-block; width: 720px; border: 0px; padding: 0px; margin: 0px; }
#sidebar { display: inline-block; width: 246px; border: 0px; padding: 0px; margin: 0px; } 
```

现在，当内部 div 的总宽度为 966 像素或更少时，这可以正常工作。然而，当我变得更大时，第二个 div 位于第一个 div 之下。为什么会这样？

据我所知，在遇到问题之前我应该​​能够拥有 970px 的总宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:13:53.253

`div`我打赌你在 HTML 中这两个 s之间有新的界限，这就是原因。

对于以下 CSS：

```
#main { width: 970px; }

#content { display: inline-block; width: 720px; border: 0px; padding: 0px; margin: 0px; height: 200px; background: red; }
#sidebar { display: inline-block; width: 246px; border: 0px; padding: 0px; margin: 0px; height: 200px; background: blue; } 
```

以下 2 个 HTML 标记之间存在差异：

```
<div id="main">
    <div id="content"></div><div id="sidebar"></div>
</div> 
```

和

```
<div id="main">
    <div id="content"></div>
    <div id="sidebar"></div>
</div> 
```

检查此示例： http: [//jsfiddle.net/vnguQ/](http://jsfiddle.net/vnguQ/)并注意第二部分元素之间的白线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:17:21.363

两个 div 之间可能有空格，并`inline block`为该空格应用样式。看看这些链接 [http://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/) [display: inline-block extra边距](https://stackoverflow.com/questions/1833734/display-inline-block-extra-margin) [如何删除行内块元素之间的空间？](https://stackoverflow.com/questions/5078239/how-to-remove-the-space-between-inline-block-elements)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:52:56.700

当主 div 具有显示属性“块”（默认一个）时，会发生此问题。

为主 div 添加一个属性 as `dispaly:inline`，它会自动调整内部 div 的宽度。更改主 div 的 css。

```
#main { width: 970px; display:inline; }

#content { display: inline-block; width: 720px; border: 0px; padding: 0px; margin: 0px; height: 200px; background: red; }
#sidebar { display: inline-block; width: 246px; border: 0px; padding: 0px; margin: 0px; height: 200px; background: blue; } 
```

# css - 居中浮动块元素宽度不同的宽度

> ID：15780041
> 
> 赞同：0
> 
> 时间：2013-04-03T06:09:11.670
> 
> 标签：css

再会。

目前，我的代码工作正常，除了元素（图像）左对齐（因为浮动）而不是居中。如何在不改变悬停功能的当前稳定性（没有溢出）和不使用 display: inline-block（不是 IE 友好）的情况下做到这一点？

HTML：

```
<div id="customers">
 <a href=""><img class="alignleft size-full wp-image-1180" alt="absa" src="" /></a>
 <a href=""><img class="alignleft size-full wp-image-1178" alt="kumba" src=""/></a>
 <a href=""><img class="alignleft size-full wp-image-1176" alt="samancor" src=""/></a>
 <a href=""><img class="alignleft size-full wp-image-1179" alt="bosch" src="" /></a>
 <a href=""><img class="alignleft size-full wp-image-1185" alt="" src="" /></a>
 <a href=""><img class="alignleft size-full wp-image-1187" alt="DBSA" src="" /></a>
 <a href=""><img class="alignleft size-full wp-image-1190" alt="dac" src=""/></a>
 <a href=""><img class="alignleft size-full wp-image-1191" alt="eaton" src="" /></a>
 <a href=""><img class="alignleft size-full wp-image-1192" alt="megaphone" src="" /></a>
 <a href=""><img class="alignleft size-full wp-image-1193" alt="eazi" src=""/></a>
 <a href=""><img class="alignleft size-full wp-image-1194" alt="smss" src="" /></a>
 <a href=""><img class="alignleft size-full wp-image-1195" alt="partyat" src="" /></a> 
</div> 
```

CSS：

```
#customers a {
    display: block;
    float: left;
    margin: 0 20px;
    text-align: center;
    height: 80px;
    width: auto;
}
#customers a img {
    height: 60px;
    width: auto;
    -webkit-transition: all 400ms linear;
    -moz-transition: all 400ms linear;
    -o-transition: all 400ms linear;
    -ms-transition: all 400ms linear;
    transition: all 400ms linear;
}
#customers a img:hover {
    height: 80px;
    width: auto;
    -moz-box-shadow: 0px 30px 30px -25px #acacac;
    -webkit-box-shadow: 0px 30px 30px -25px #acacac;
    box-shadow: 0px 30px 30px -25px #acacac;
} 
```

**JSFIDDLE：http:** [//jsfiddle.net/fL5Gh/13/](http://jsfiddle.net/fL5Gh/13/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:52:03.910

我的建议是将每个图像放在它自己的 div 中，并将 div 中心对齐到你的包装器 div 中。或使用 ul 和 li 并内联它们并将该文本居中。无论哪种方式，我都认为您当前的方法不可行

# dns - 有没有提供原始 DNS 存档日志数据的来源？

> ID：15780042
> 
> 赞同：0
> 
> 时间：2013-04-03T06:09:15.773
> 
> 标签：dns, raw-data

任何人都可以帮助我找到提供原始 DNS 日志数据的任何来源。我不想处理 DNS 日志。任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:44:14.403

你没有给出任何细节：什么操作系统，你正在运行什么 DNS 软件。我会扔一些随机的东西来回答你模糊的问题，并希望最好。

你的日志中没有比 tcpdump 更原始的了。这是一种使用大量 CPU 和磁盘空间的残酷解决方案。如果这是您真正想要的，并且您的名称服务器不是那么活跃，那么您想要调试特定问题的时间很短，那么这可能适合您。

以 root 身份执行以下操作，您将保存所有发往您的 dns 服务器的流量：根据需要设置 INTERFACE 和 MYSERVERIP 变量...

```
MYSERVERIP=10.0.0.1
INTERFACE=eth0
tcpdump -nn -i $INTERFACE -s 0 -c 100000 -w foo.cap port 53 and dst $MYSERVERIP 
```

这会将 100,000 个 dns 查询存储到文件 foo.cap

您可以通过以下方式获得 dns 流量的简要摘要`tcpdump -nn -r foo.cap` 您可以通过以下方式获得转储文件的完全分解的超级详细视图`tshark -nn -r foo.cap -V`

# facebook - Facebook 手动链接共享无视 og:image

> ID：15780043
> 
> 赞同：0
> 
> 时间：2013-04-03T06:09:20.913
> 
> 标签：facebook, facebook-graph-api

我有一个带有 fb 共享小部件的页面，并通过这个共享与链接关联的图像正确地从我的`<meta property="og:image" ...`.

但是，当用户手动将链接粘贴到 facebook 上的页面时，关联的缩略图不是从元标记中获取的，而是来自页面的图像可供选择。

元标记不应该覆盖该行为并且只有我选择的 og:image 可用吗？如何将我指定的图像也设为手动链接共享的默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:27:35.400

通过[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)进行调试时，会出现一条消息：

> 应该修复的开放图警告
> 
> og:image 应该更大：前提是 og:image 不够大。请使用至少 200x200，最好是 1500x1500 的图片。（最大图像大小为 5MB。）将使用图像“htt...jpg”。

事实证明，我的小图标图像非常适合在页面上共享，但在 facebook 上手动共享链接需要足够大的图像才能使用该定义的图像，而不是从页面获取的任何图像。

# java - 复制任何类型的对象

> ID：15780044
> 
> 赞同：1
> 
> 时间：2013-04-03T06:09:23.437
> 
> 标签：java, copy, clone

我有以下。

```
public static <T> T someMethod(T originalObject) {

    T modifiedObject = /* copy of original object (HOW DO YOU DO THIS?) */

    /* Some logic that modifies the object. */
    ...

    return modifiedObject; // without changing original Object

} 
```

那么问题是，如果您不知道 T 可能是什么类型，如何创建 T 类型的副本？

修订版 - 为了更清楚，我将粘贴我的代码。

```
public class ObjectMerger {

    public static <T> T merge(T original, T patch) throws IllegalArgumentException, IllegalAccessException {

        Object mergedObject = original // TODO: implement a way to copy original

        Field[] inheritedFields = patch.getClass().getFields();
        Field[] memberFields = patch.getClass().getDeclaredFields();
        Field[] allFields = (Field[]) ArrayUtils.addAll(inheritedFields, memberFields);

        for (Field field : allFields) {

            Boolean originalAccessibility = field.isAccessible();
            field.setAccessible(true);

            Object fieldValue = field.get(patch);

            if (fieldValue != null) {

                Boolean fieldIsFinal = Modifier.isFinal(field.getModifiers());

                if (!fieldIsFinal) {
                    field.set(mergedObject, fieldValue);
                }

            }

            field.setAccessible(originalAccessibility);

        }

        return mergedObject;

    }

} 
```

注意：我试过说 T extends Cloneable ，这是不行的。我相信实施 Cloneable 并不能确保克隆是可见的。

注意：注意重复！

对于那些将其标记为重复的人，请阅读问题。这是在寻求一种方法来复制**未知类型**的对象。无论如何，据我所知，这是不可能的。感谢大家的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:13:04.347

如果您完全没有关于 T 是什么的信息，那么您能做的最好的事情就是测试它是否实现`Cloneable`了`.clone()`。

```
if (originalObject implements Cloneable) {
  T modifiedObject = originalObject.clone();
  // ...
} else {
  throw new IllegalArgumentException();
} 
```

您还可以限制`T`：

```
public static <T extends Cloneable> T someMethod(T originalObject) {
  T modifiedObject = originalObject.clone();
} 
```

无论如何，您如何指望修改您完全不知道它是什么的对象？你的用例听起来有点奇怪。如果您描述您正在尝试做的事情（而不是您尝试做的方式），可能会更容易提供*帮助*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:14:56.737

> `T`那么问题是，如果您不知道`T`可能是什么类型，如何创建类型的副本？

如果你真的不知道是什么`T`，你根本就无法复制。

首先，没有用于复制对象的通用 API（任何给定的类型可能支持也可能不支持`clone()`）。

但是，主要原因是它`T`可能根本不支持复制。例如，如果`T`是[`FileInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html)怎么办？你希望如何复制一个实例？

`/* Some logic that modifies the object. */`此外，如果您不知道是什么，您将如何实施`T`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T06:23:25.030

如果您准备好使用 XStream，这里是解决方案，

```
XStream xstream = new XStream();

return (T) xstream.fromXML(XSTREAM.toXML(originalObject)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T06:30:22.573

正如标题所说**的 Copy Object of Any Type**那么我认为您唯一的选择就是使用**Reflection API**。此外，即使您使用反射，您也需要根据您正在创建副本的内容制定一些标准，例如您想要从源对象复制哪些属性等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T06:16:10.323

有两种选择：

*   使用`clone()`and`Cloneable`已在其他答案中建议
*   如果您不想限制为 Cloneable ，请使用使用反射的[深/浅克隆库。](https://code.google.com/p/cloning/)（*不推荐，但仍然是一种选择*）。应注意对象支持复制。

# javascript - 从对象向 DOM 元素添加内容

> ID：15780056
> 
> 赞同：1
> 
> 时间：2013-04-03T06:09:55.840
> 
> 标签：javascript, jquery

我有`contents`对象，里面有一些数据。我在做什么我首先获取 div 标签的类名，然后基于该类名我想从基于此类的内容中获取数据。这是我的代码

```
var contents = {
    inner_one: {
        title: 'This is title for one',
        body: 'This is body for one'
    },
    inner_two: {
        title: 'This is title for two',
        body: 'This is body for two'
    }
};

var inner = $(div).attr('class'); //here lets say inner = inner_one

console.log(contents.inner); 
```

但是我上面的代码不起作用。我假设是因为我的代码会查找其中不存在的`inner`对象。`contents`有没有其他方法可以使这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:11:26.670

为了获得*动态对象属性访问*，我们需要使用方*括号表示法*。

```
console.log( contents[ inner ] ); 
```

因此，我们不能使用*点符号*动态访问属性名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:11:50.487

您可以使用 indexer`[]`并传递`variable`包含属性 name 的值来获取`property`.

*改变*

```
console.log(contents.inner); 
```

*到*

```
console.log(contents[inner]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:14:53.803

你必须先解析你的 JSON 字符串，

```
var obj = $.parseJSON(contents); 
```

然后尝试 console.log

```
console.log(obj[inner]); 
```

但首先验证您的 json 字符串。

# sas - SAS 中的龙卷风图

> ID：15780057
> 
> 赞同：0
> 
> 时间：2013-04-03T06:09:58.127
> 
> 标签：sas, bar-chart, gchart

[这里](http://robslink.com/SAS/democd44/ex_17_info.htm)有一个示例“龙卷风图” 。我正在尝试修改该代码。这是我的修改版本：

```
%let name=ex_17;

goptions reset=(global goptions);
GOPTIONS DEVICE=png xpixels=800 ypixels=600;
goptions gunit=pct border cback=lightgray colors=(blacks) ctext=black
 htitle=6.5 htext=3 ftitle="albany amt" ftext="albany amt";

data mileage;
   input factor $ level $ value;
   datalines;
Screening M 7199
Diagnosis F 4502
Biopsy M 12304
Treatment F 5428
Recovery M 15701
Metastasis F 6915
;

data convert;
   set mileage;
   if level='F' then value=-value;
run;

proc format;
   picture posval low-high='000,009';
run;

data anlabels(drop=factor level value);
   length text $ 24;
   retain function 'label' when 'a' xsys ysys '2' hsys '3' size 2;

   set convert;
   midpoint=factor; subgroup=level;

   text=left(put(value, posval.));

   if level ='F' then position='>';
   else position='<'; output;
run;

title1 'One-Way Sensitivity Analysis on NNS to Gain 1 QALY';

*axis1 label=(justify=left 'Disutility') style=0 color=black;
axis1 label=(justify=left '') style=0 color=black;
axis2 label=none value=(tick=3 '') minor=none major=none
      width=3 order=(-10000 to 20000 by 10000) color=black;

pattern1 value=solid color=green;
pattern2 value=solid color=blue;

proc gchart data=convert;
   format value posval.;
   note move=(25,80) height=3 'Women' move=(+10,+0) 'Men';
   hbar factor / sumvar=value discrete nostat subgroup=level
              maxis=axis1 raxis=axis2 nolegend annotate=anlabels
              coutline=same des='';
run;

quit; 
```

但是，正如您通过运行此代码所看到的那样，每个条的标签都被截断，不完全可见。此外，有些条形图是不可见的。

我在做什么使这些东西不可见，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:56:30.083

您的轴标签在输入数据集中被截断。

```
data mileage;
   length factor $20;
   input factor $ level $ value;
   datalines;
Screening M 7199
Diagnosis F 4502
Biopsy M 12304
Treatment F 5428
Recovery M 15701
Metastasis F 6915
;
run; 
```

至于“有些半是不可见的”，哪些半是不可见的？对于每个因素，您只有 M 或 F，因此您不会在每个因素上获得两个条形图。你得到了所有你想要的酒吧，或者至少我看到了所有的酒吧（6 酒吧，一些在左边，一些在右边）。

# java - 使用“*”作为通配符的 Java 递归字符串比较

> ID：15780058
> 
> 赞同：0
> 
> 时间：2013-04-03T06:10:02.357
> 
> 标签：java, algorithm, recursion, compare

我正在编写一个递归方法来检查字符串的每个字母以比较它们。我无法使“*”字符与任何字符匹配，并根据需要充当尽可能多的字母。（使其成为通配符）

我想知道是否有人可以给我一个关于将使用的算法的提示？

这是我到目前为止所拥有的。

```
public static boolean match(String x, String y) {
    return match_loop(x, y, 0, 1);
}

public static boolean match_loop(String a, String b, int i, int s) {
    try {
        if (a == b) {
            return true;
        }

        if (i >= a.length() && i >= b.length()) {
            return true;
        }

        if (a.charAt(i) == b.charAt(i)) {
            return match_loop(a, b, i + 1, s);
        }

        //(((...A bunch of if statements for my other recursion requirements

        return false;

    } catch (java.lang.StringIndexOutOfBoundsException e) {
        return false;
    }
}

public static void main(String[] args) {
    System.out.println(match("test", "t*t")); // should return true
} 
```

我想做的是在该方法中添加另一个参数，一个 int 将充当一个字母反向计数器。基本上，如果 char(is) 处的 a 或 b (s 最初为 1.) 是 *，我正在考虑这一点，回想一下 s+1 的递归。然后使用更多不同的 ifs 语句来修复错误。然而，这种方法似乎真的很长而且重复。我可以使用其他算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:12:51.263

不要`==`用于`String`价值比较。使用`equals()`方法。

`if (a == b)`应该`if a.equals(b)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T11:29:59.453

如果您只使用一个字符（“*”）作为通配符，我建议您使用正则表达式。如;

```
public static boolean match(String x, String y) {
    String regex= y.replace("*", "(.*)");
    if(x.matches(regex)) {
        return true;
    }
}

public static void main(String[] args) {
    System.out.println(match("test", "t*t")); // should return true
} 
```

我认为以这种方式阅读代码更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:36:05.403

看看[这个算法](http://en.literateprograms.org/Matching_with_wildcards_%28Java%29)。它返回与模式匹配的所有子字符串，因此您必须检查整个字符串是否最终匹配，但这应该很容易。

它在 O(km) 时间内运行，其中 k 是通配符的数量，m 是输入字符串的长度。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T06:21:11.523

这本书将告诉您确切的操作方法： http: [//www.amazon.com/Compilers-Principles-Techniques-Alfred-Aho/dp/0201100886](https://rads.stackoverflow.com/amzn/click/com/0201100886)

这是一个简单的 Java 实现，可能会让您走上正轨： http: [//matt.might.net/articles/implementation-of-nfas-and-regular-expressions-in-java/](http://matt.might.net/articles/implementation-of-nfas-and-regular-expressions-in-java/)

基本上工业级的实现是一个状态机。您解构正则表达式——其中带有“*”的字符串——并为它创建一个图形。然后递归搜索图形，例如在广度优先树搜索中。

以下是对不同方法的一些讨论，这将有助于说明该方法：[http ://swtch.com/~rsc/regexp/regexp1.html](http://swtch.com/~rsc/regexp/regexp1.html)

# powershell - 使用 PowerShell 从 XML 中过滤数据

> ID：15780063
> 
> 赞同：0
> 
> 时间：2013-04-03T06:10:16.747
> 
> 标签：powershell

我有以下 XML 文件。在此，我想过滤所有员工年龄为 23 岁的城市名称。

请帮助我使用 PowerShell 脚本。

我期待答案*"Chennai, Banglore"*。

```
<?xml version="1.0" ?>
    <customers>
<city name="Chennai">
    <Name>Anand</Name>
    <Id>123</Id>
    <Age>23</Age>
</city>
<city name="Banglore">
    <Name>Arun</Name>
    <Id>321</Id>
    <Age>23</Age>
</city>
<city name="Mumbai">
    <Name>Ashok</Name>
    <Id>1</Id>
    <Age>22</Age>
</city> 
```

我有以下代码来获取城市名称列表，

```
[xml]$test = Get-Content D:\test.xml
$names = $test.SelectNodes("/customers/city")
$sno = 0
foreach($node in $names)
{
    $sno++
    $id = $node.getAttribute("name")
    Write-Host $sno $id
} 
```

但是如何过滤数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:51:28.227

了解[XPath](http://w3schools.com/xpath/default.asp "教程")以及如何查询 XML 文档。关键是使用谓词来过滤数据：`/customers/city[Age=23]`. 像这样，

```
$names = $test.SelectNodes("/customers/city[Age=23]")
$sno = 0
foreach($node in $names) {
    $sno++
    $id = $node.getAttribute("name")
    Write-Host $sno $id
} 
```

输出：

```
1 Chennai
2 Banglore 
```

# yahoo - 雅虎 API：地理 API 是否关闭？（以前是 where.yahooapis.com）

> ID：15780064
> 
> 赞同：10
> 
> 时间：2013-04-03T06:10:28.487
> 
> 标签：yahoo, yahoo-api

有人知道标准的 yahoo geo/where-api 是否已关闭？该 api 可在 where.yahooapis.com 上访问（直到昨天）？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T11:15:11.627

OK, the public Yahoo Statement is here:

[http://tech.groups.yahoo.com/group/ysearchboss/message/5163](http://tech.groups.yahoo.com/group/ysearchboss/message/5163)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:18:39.020

一个快速的[谷歌搜索](http://www.google.com/search?q=where.yahooapis.com)指向我：

*   [雅虎！BOSS 地理服务](http://developer.yahoo.com/boss/geo/)

这篇 Yahoo[论坛帖子](http://developer.yahoo.com/forum/PlaceFinder-Product-Announcements/http-where-yahooapis-com-geocode-appid-flags-P-not-returning-serialized-PHP-but/1349181261898-870cf85e-dc2f-4291-92c5-41754397504d)还提供了有关`where`API 的详细信息。

# javascript - 没有从文件中获取完整路径

> ID：15780068
> 
> 赞同：-3
> 
> 时间：2013-04-03T06:10:52.707
> 
> 标签：javascript

您好，当我尝试使用**检索浏览文件的完整路径时*

> 请求.getParameter()

***只有文件名被返回到下一个 jsp 文件。有人可以帮我..提前谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-03T06:19:26.087

当您上传文件时，您将只获得文件名，而不是您在文件上传字段中看到的整个路径。该路径是用户文件系统的路径。如果要保存文件，则需要将其保存在服务器端目录路径中。

# python - Python中的3维矩阵

> ID：15780076
> 
> 赞同：2
> 
> 时间：2013-04-03T06:11:29.850
> 
> 标签：python, matlab, matrix

我如何在 python 中表示 1x1x3 矩阵。在 matlab 中我有

```
fill_value(1,1,:) = [0; 0; 0]; 
```

我已将其转换为 python

```
fill_value[0:1] = matrix(((0),(0),(0))).T 
```

但它没有给出预期的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:27:28.607

使用标准 Python 对象？像这样：

```
>>> fill_value = [[[1, 2, 3]]]
>>> fill_value[0][0][0]
1
>>> fill_value[0][0][1]
2
>>> fill_value[0][0][2]
3 
```

[不过，您可能想研究 numpy ，它对matrices](http://docs.scipy.org/doc/numpy/reference/generated/numpy.matrix.html)有更好的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:27:19.517

你可以`1x1x3 matrix`使用 numpy.

```
import numpy
fill_value = numpy.array([[[0, 0, 0]]]) 
```

当我们检查

```
resol_val = fill_value.shape 
```

输出将是`(1, 1, 3)`

# java - 在android中，如何备份java类的内容并恢复它

> ID：15780079
> 
> 赞同：1
> 
> 时间：2013-04-03T06:11:34.787
> 
> 标签：java, android

在我的应用程序中有一个处理应用程序数据的 java 类。我想保存该类的内容并进行数据修改并稍后恢复。我注意到一个问题，当我更改原始数据时，保存的副本也会更改。我怎样才能避免它。下面显示的代码是说明性的

```
public class HomeData {
   public int n;

   HomeData(){
      n = 10;
   }
}

HomeData homedata;
homedata.n = 15;

HomeData saveData = homedata;

// making changes
homedata.n = 50;

homedata = SaveData;

// i want the value of 'n' in homedata as 15 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:22:37.060

`HomeData`(`saveData`和) 的两个实例`g.OriginalData`都只是对内存地址的引用。当你复制 saveData = g.OriginalData; 您实际上是在复制内存地址。一个对象（像`HomeData) behaves different than a simple`原始的`（像一个 int 或一个字节），你必须使用方法来访问它们的值。

为了进行某种*deepCopy* ，您应该覆盖`clone()`in 中的方法`HomeData`，确保其中包含的**每个**变量和值都`HomeData`将被复制。

像这样：

```
public class HomeData implements Cloneable{

  public Object clone(){
      HomeData copy= new HomeData();
      copy.setValue(this.getValue());
      copy.setSomething(this.getSomething());

      //... and so on
      return copy;
   }

   ....
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:30:57.807

```
HomeData homedata;
homedata.n = 15;
HomeData saveData = homedata; // 15 in saveData
// making changes
homedata.n = 50; // saveData will have 50 too

homedata = SaveData;// override the reference... 
```

问题是你在第一行只有 1 个内存分配，并且有 2x 引用它。

建议：-制作一个复制构造函数：

```
HomeData(HomeData src){
 this.n = src.n;
} 
```

用法：

HomeData saveData = new Homedata(homedata);

其他解决方案是其他答案中描述的克隆；

# php - 当id在表格中以逗号分隔时如何显示数据？

> ID：15780082
> 
> 赞同：4
> 
> 时间：2013-04-03T06:11:44.927
> 
> 标签：php, mysql

我有一张包裹表，其中

```
 Package_id   name     description
  1           A        abcdef
  2           B        ghijkl
  3           C        mnopq 
```

另一个表是 user_comparisons

```
 u_c_id     user_id   package_ids
   1            1       1,2
   2            2       2,1
   3            1       1,3 
```

我想针对用户显示关于 user_comparisons 的包，我该怎么做？如果有人可以提供帮助，将不胜感激，在此先感谢。

**编辑**

我想显示像

```
user Comparisons # 1 

   Package 1                  Package 2 
  Name     description     Name          Description 
```

用户比较 #2

```
 Package 1                   Package 3
 Name     Description         Name        Description 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T06:16:04.403

利用`FIND_IN_SET()`

```
SELECT  a.*, b.*
FROM    user_comparison a
        INNER JOIN packages b
            ON FIND_IN_SET(b.Package_ID, a.package_IDs) > 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/884bf/3)
*   [MySQL FIND_IN_SET](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)

数据库的当前设计很糟糕。考虑将表标准化为三表设计。

# d3.js - 如何使用 d3.js 绘制多系列圆环图

> ID：15780087
> 
> 赞同：2
> 
> 时间：2013-04-03T06:11:55.960
> 
> 标签：d3.js

我正在尝试使用 d3.js 库实现具有多个系列（例如：2）的圆环图。我需要使用 json 数据作为源。

任何想法如何做到这一点。

这是源代码，我用于甜甜圈图：

```
var width = 800,
    height = 400,
    radius = Math.min(width, height) / 2;
var color = d3.scale.ordinal()
    .range(["#98abc5", "#8a89a6", "#7b6888"]);

var arc = d3.svg.arc()
    .outerRadius(radius - 70)
    .innerRadius(radius - 120);

var pie = d3.layout.pie()
    .sort(null)
    .value(function (d) { return d.Count; });

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

 var jsondata = [{ "id": 1,"age": 5, "population": 2704659 }, { "id": 2, "age": 7, "population": 4499890 }, { "id": 3, "age": 8, "population": 2159981 }];
data = jsondata;
    d3.json('talent/data', function (error, data) {
    console.log(data);
    var g = svg.selectAll(".arc")
        .data(pie(data))
      .enter().append("g")
        .attr("class", "arc");

    g.append("path")
        .attr("d", arc)
        .style("fill", function (d) { return color(d.data.Name); });

    g.append("text")
        .attr("transform", function (d) { return "translate(" + arc.centroid(d) + ")"; })
        .attr("dy", ".35em")
        .style("text-anchor", "middle")
        .text(function (d) { return d.data.Name; });
});
</script> 
```

多系列甜甜圈图，如：[http ://www.jqplot.com/tests/pie-donut-charts.php](http://www.jqplot.com/tests/pie-donut-charts.php)

# c - memcpy 一个缓冲区和一个数组不起作用

> ID：15780091
> 
> 赞同：5
> 
> 时间：2013-04-03T06:12:05.520
> 
> 标签：c, arrays, memcpy

我有一个要求，我需要将一个空数组作为参数传递给函数。在这个被调用的函数中，我应该将一些数据 memcpy 到传递的数组中。所以我写了一个与我的要求相同的小例子。下面是它的代码：

```
#include <stdio.h>
#include <stdlib.h>
void printArr(int *a)
{
    int i;
    int *b=(int*)malloc(sizeof(int)*10);
    printf("\n\nEnter 10 lements:\n");
    for(i=0;i<10;i++)
        scanf("%d",&b[i]);

    printf("\nContents of array b:\n");
    for(i=0;i<10;i++)
        printf("%d\t",b[i]);
    printf("\n");
    memcpy(a,b,10);
    printf("\nContents of array a:\n");
    for(i=0;i<10;i++)
        printf("%d\t",a[i]);
    printf("\n");
}
int main()
{
    int a[10];
    printArr(a);
    return 0;
} 
```

在上面的示例中，我将一个数组从 main 函数发送到 printArr 函数。现在在被调用的函数中，数据将被 memcpy 放入数组中。打印数组内容时，我得到一些垃圾值。编译也给出了如下所示的警告：

```
$ gcc -o arr array.c
array.c: In function ‘printArr’:
array.c:15:2: warning: incompatible implicit declaration of built-in function ‘memcpy’ 
```

上述程序的输出如下图所示：

```
Enter 10 lements:
0 1 2 3 4 5 6 7 8 9

Contents of array b:
0   1   2   3   4   5   6   7   8   9   

Contents of array a:
0   1   134479874   11136160    11136160    11132916    134514160   134513696   134514171   11132916 
```

有人可以告诉我上面的程序有什么问题吗？

**注意：**由于实际程序中的性能原因，我只需要使用 memcpy 而不是通过 for 循环将数据从缓冲区复制到传递的数组。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T06:13:16.543

```
memcpy(a,b,10); 
```

第三个参数是要复制的字节数。你想要`memcpy(a, b, 10 * sizeof *a)`。

* * *

此外，您缺少一个`#include <string.h>`，这就是您收到警告的原因。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T06:14:31.000

`memcpy()`函数用法如下：

```
 void * memcpy ( void * destination, const void * source, size_t num ); 
```

其中`num`是**字节**数。

为了解决这个问题，您需要通过以下方式使用它：

```
memcpy(a,b,10*sizeof(int)); 
```

因为通常整数的大小是`4`字节（取决于平台、编译器等）。

在您的程序中，您只复制`10`字节而不是`40`字节。因此，在这种情况下，您将`2,5`在数组中初始化第一个 " " 元素`a[]`，其余的则包含垃圾。

**编辑：**你也忘了`#include <string.h>`，所以这会导致以下编译警告：

> array.c:15:2: 警告：内置函数“memcpy”的隐式声明不兼容</p>

对于将来，请注意编译器警告，因为它可以让您避免很多运行时错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T06:14:52.303

的最后一个参数`memcpy`是要复制*的字节数*，所以应该是`memcpy(a,b, 10 * sizeof(int));`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T06:22:58.670

你必须包括`<string.h>`

memcpy 的最后一个参数是“要复制的字节数”。（您正在传递元素数量）

# html - HTML5视频录制并自动上传视频到服务器

> ID：15780094
> 
> 赞同：2
> 
> 时间：2013-04-03T06:12:11.643
> 
> 标签：html, html5-video, getusermedia

我正在尝试为学生开发一个考试网站。在这个网站上，学生应该能够通过使用网络摄像头一次性回答问题（以文本格式显示）。目前我已经使用 Flash 实现了这个功能，它捕获帧并同时将其发送到服务器。这种技术的问题是我的视频质量（FPS）受到限制，并且取决于互联网连接的带宽。我也不赞成使用闪光灯。

我希望学生点击开始按钮后，计时器应该开始录制视频。视频应该保存在客户端的机器上（不要求客户端提及路径），视频完成后，它应该自动上传到服务器上，上传完成后，视频应该自动从客户端的机器上删除。

总之，谁能给我一个起点，以便我可以继续工作。任何直升机将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:18:41.187

这是一个很好的例子，如何让网络摄像头在 html5 上工作：

[http://blog.teamtreehouse.com/accessing-the-device-camera-with-getusermedia](http://blog.teamtreehouse.com/accessing-the-device-camera-with-getusermedia)

它没有告诉如何将视频上传到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-29T13:04:22.900

> 目前我已经使用 Flash 实现了这个功能，它捕获帧并同时将其发送到服务器。这种技术的问题是我的视频质量（FPS）受到限制，并且取决于互联网连接的带宽。

这实际上是不正确的。

**您获得的 fps 100% 取决于：**

1.  网络摄像头质量
2.  房间内可用的光线（光线越多越好）
3.  您正在录制的分辨率（即使在光线不足的情况下使用低质量的网络摄像头，较低的分辨率也会导致更高的 fps）

> 视频应该保存在客户端的机器上（不要求客户端提及路径），视频完成后，它应该自动上传到服务器上，当上传完成时，视频应该自动从客户端的机器上删除。

**通过流式传输（通过 rtmp）将音频/视频数据传输到媒体服务器（Red5、AMS、Wowza）来进行**Flash记录。**录制停止后，您可以将文件移动到 Web 服务器并触发 http 下载。**

 **在**HTML**方面，[媒体录制 API](https://addpipe.com/blog/mediarecorder-api/)已由 Firefox 和[Chrome 49](https://developers.google.com/web/updates/2016/01/mediarecorder)实现，它允许您录制到本地 RAM 并将文件下载为 .webm（音频视频编解码器可能因浏览器而异）。

免责声明：我在处理视频录制的 Pipe 工作。**

# actionscript-3 - 在 Flex 中仅显示 Numeric Stepper 的文本字段

> ID：15780095
> 
> 赞同：0
> 
> 时间：2013-04-03T06:12:12.010
> 
> 标签：actionscript-3, apache-flex, flex3

Flex中是否有Numeric Stepper的任何属性可用于仅显示Numeric Stepper的文本字段并隐藏箭头按钮？我需要在鼠标滚动时显示完整的数字步进器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:14:43.767

在 flex 4 中创建具有新状态的自定义皮肤：结束。创建新类 NumericStepperExtends 扩展 NumericStepper，监听翻转和滚动事件，并更改皮肤状态。NumericStepperExtends：

```
package classes
{
    import flash.events.MouseEvent;

    import spark.components.NumericStepper;

    public class NumericStepperExtends extends NumericStepper
    {

        private var _over:Boolean = false;

        public function NumericStepperExtends()
        {
            super();
        }

        override protected function createChildren():void
        {
            super.createChildren();

            addEventListener(MouseEvent.ROLL_OVER, onRollOverHandler, false, 0, true);
            addEventListener(MouseEvent.ROLL_OUT, onRollOutHandler, false, 0, true);
        }

        override protected function getCurrentSkinState():String
        {
            if (_over) return "over";

            return super.getCurrentSkinState();
        }

        protected function onRollOutHandler(event:MouseEvent):void
        {
            _over = false;

            invalidateSkinState();
        }

        protected function onRollOverHandler(event:MouseEvent):void
        {
            _over = true;

            invalidateSkinState();
        }
    }
} 
```

皮肤：

```
<?xml version="1.0" encoding="utf-8"?>
<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
      xmlns:fb="http://ns.adobe.com/flashbuilder/2009" minHeight="23" minWidth="40" 
      alpha.disabled="0.5">

    <fx:Metadata>
    <![CDATA[ 
        [HostComponent("spark.components.NumericStepper")]
    ]]>
    </fx:Metadata> 

    <fx:Script fb:purpose="styling">
        static private const exclusions:Array = ["textDisplay", "decrementButton", "incrementButton"];

        /**
         * @private
         */  
        override public function get colorizeExclusions():Array {return exclusions;}

        /**
         * @private
         */
        override protected function initializationComplete():void
        {
            useChromeColor = true;
            super.initializationComplete();
        }

        private var cornerRadiusChanged:Boolean;
        private var borderStylesChanged:Boolean;

        /**
         *  @private
         */
        override protected function commitProperties():void
        {
            super.commitProperties();

            if (cornerRadiusChanged)
            {
                var cr:Number = getStyle("cornerRadius");
                if (incrementButton)
                    incrementButton.setStyle("cornerRadius", cr);
                if (decrementButton)
                    decrementButton.setStyle("cornerRadius", cr);
                cornerRadiusChanged = false;
            }

            if (borderStylesChanged)
            {
                textDisplay.setStyle("borderAlpha", getStyle("borderAlpha"));
                textDisplay.setStyle("borderColor", getStyle("borderColor"));
                textDisplay.setStyle("borderVisible", getStyle("borderVisible"));
                borderStylesChanged = false;
            }
        }

        /**
         *  @private
         */
        override public function styleChanged(styleProp:String):void
        {
            var allStyles:Boolean = !styleProp || styleProp == "styleName";

            super.styleChanged(styleProp);

            if (allStyles || styleProp == "cornerRadius")
            {
                cornerRadiusChanged = true;
                invalidateProperties();
            }

            if (allStyles || styleProp.indexOf("border") == 0)
            {
                borderStylesChanged = true;
                invalidateProperties();
            }
        }
    </fx:Script>

    <s:states>
        <s:State name="normal" />
        <s:State name="disabled" />
        <s:State name="over" />
    </s:states>

    <s:Button id="incrementButton" right="0" top="0" height="50%" tabEnabled="false"
              includeInLayout.normal="false" visible.normal="false" includeInLayout.over="true"
              skinClass="spark.skins.spark.NumericStepperIncrementButtonSkin" />

    <s:Button id="decrementButton" right="0" bottom="0" height="50%" tabEnabled="false" 
              includeInLayout.normal="false" visible.normal="false" includeInLayout.over="true"
              skinClass="spark.skins.spark.NumericStepperDecrementButtonSkin" />

    <s:TextInput id="textDisplay" left="0" top="0" right="18" bottom="0"
        skinClass="spark.skins.spark.NumericStepperTextInputSkin" />

</s:SparkSkin> 
```

不要忘记为绑定新组件和新皮肤添加 css：

```
<fx:Style>
    @namespace s "library://ns.adobe.com/flex/spark";
    @namespace mx "library://ns.adobe.com/flex/mx";
    @namespace classes "classes.*";

    classes|NumericStepperExtends
    {
        skinClass: ClassReference("skins.NumericStepper");
    }

</fx:Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:41:19.870

你可以创建一个蒙版（[这里](http://www.republicofcode.com/tutorials/flash/as3masking/)是教程），当鼠标没有结束时应用什么。

所以你必须：1）创建一个遮罩对象，2）遮罩步进器（stepper.mask = mymask）3）将翻转和滚动监听器添加到遮罩，您可以在其中设置或移除遮罩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T22:08:01.550

您可以尝试一个非常简单的方法：使用 mx_internal：

```
var n : NumericStepper = new NumericStepper();
n.mx_internal::nextButton.visible = false;
n.mx_internal::prevButton.visible = false; 
```

# objective-c - NSLog(@"%-20s %-32s", [theCard.name UTF8String]) %-32s 是什么意思？

> ID：15780098
> 
> 赞同：0
> 
> 时间：2013-04-03T06:12:43.180
> 
> 标签：objective-c

我正在学习 Objective-C，我知道 NSLog 可以打印出来，但是我迷失了这个 %-20s %-32s。

这个-20s和-32s在这里做什么

```
 -(void) list
    {
    NSLog (@"======== Contents of: %@ =========", bookName);
    for ( AddressCard *theCard in book )
    NSLog (@"%-20s %-32s", [theCard.name UTF8String],
    [theCard.email UTF8String]);
    Array Objects 339
    NSLog (@"==================================================");
    }
    @

====================================
|                                  |
| Tony Iannino                     |
| tony.iannino@techfitness.com     |
|                                  |
|                                  |
|                                  |
| O O                              |
==================================== 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:19:41.840

它们是 printf 格式说明符，用于打印 20 和 32 个字符的字符串，右侧用空格填充。

```
% start of the specifier
- align the field to left instead of right
32 width of field
s type of field is string 
```

完整文档：[https ://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:25:55.443

`NSLog()`理解带有一些扩展名的格式字符串，因此您可以在[文档中](http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html)`printf()`查找它的作用：[`printf()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html)

> 每个转换规范都由“%”字符 [XSI] 或字符序列“%n$” [...]
> 
> *   零个或多个标志 [...]
> *   可选的最小字段宽度 [...]
> *   可选精度 [...]
> *   可选的长度修饰符 [...]
> *   一个转换说明符字符，指示要应用的转换类型。
> 
> [...]
> 
> 标志字符及其含义是：
> 
> [...]
> 
> -：转换结果在域内左对齐。如果未指定此标志，则转换为右对齐。[...]
> 
> 转换说明符及其含义是：
> 
> [...]
> 
> s：参数应该是一个指向 char 数组的指针。数组中的字节应写入（但不包括）任何终止的空字节。如果指定了精度，则写入的字节数不得超过该数量。如果精度未指定或大于数组的大小，应用程序应确保数组包含空字节。
> 
> [...]

因此，此转换所做的是打印一个数组`const char`，分别打印 20 个和 32 个字符，并在右侧填充空格以使左对齐生效。

# jquery - highcharts 在 ajax 刷新时呈现黑色

> ID：15780103
> 
> 赞同：1
> 
> 时间：2013-04-03T06:12:59.513
> 
> 标签：jquery, ajax, highcharts

昨天我将我的 highcharts.js 文件从上一个 V.2 文件升级到了最新的 3.0 文件。由于我升级了我的文件，当我通过 ajax 调用刷新我的页面时，所有图表都显示正确，除了它们呈现黑色！我什至将我的 jquery 版本从 1.9.1 降级到 1.8.2（他们在示例中使用的版本）。我没有收到任何 javascript 错误。

请帮忙，这只发生在饼图和堆叠水平条形图上，所有其他图表似乎都可以正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:54:55.197

无需示例。它是标准的 highcharts 代码。反正我刚才找到了解决问题的办法。

当您初始化图表时，只需将“颜色：[数组]”添加到选项中。这将解决黑色。

# python - 使用 python-django 访问 sqlite 中的日期时间字段

> ID：15780114
> 
> 赞同：1
> 
> 时间：2013-04-03T06:13:38.730
> 
> 标签：python, django, sqlite, django-piston

我有一个 SQLite DB，它有几列日期时间类型。这些列以 HH:mm:ss 格式存储时间（只是时间而不是日期）。当我尝试访问此字段时，它返回为 null。在 models.py 中，此字段已映射到等效的 models.DateTimeField。

访问这些字段的正确方法是什么？是否需要 models.DateTimeField 必须以 YYYY-MM-DD HH:mm:ss 格式 insqlite 存储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:05:54.223

我并不惊讶于`DateTimeField`期望日期和时间。

试试`TimeField`吧。

（请注意，SQLite 没有本地日期/时间类型；[它只是一个字符串](http://www.sqlite.org/datatype3.html#datetime)。）

# iphone - iOS 上的 AdMob [GADObjectPrivate changeState:] 错误 - 无法通过 -ObjC 解决

> ID：15780115
> 
> 赞同：1
> 
> 时间：2013-04-03T06:13:40.640
> 
> 标签：iphone, objective-c, ipad

在阅读了许多关于相同错误的 SO 帖子后，我似乎无法解决 AdMob 的问题。

我试图将它实现到我现有的应用程序中，我复制了 SDK 并按照教程进行操作。

一切编译正常，但应用程序崩溃：

```
[GADObjectPrivate changeState:]: unrecognized selector sent to instance 0xa5cc610' 
```

他们说我需要将 -ObjC 或 -all_load 添加到其他链接器标志。

当我这样做时，我会得到很多很多重复的符号错误。

由于我从不同的开发人员那里升级项目，我不知道代码的确切结构。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T08:33:26.030

当您使用 Abmob API 时，他们会为您添加 2 个 API。1 表示调试，1 表示真实。2个API具有相同的功能和很多东西。（尝试查看调试屏幕中发生的情况，他们会为您提供重复文件夹的位置 - 它位于 Google Library 3.0/GoogleAnalysis/Library/lib - ...debug.lib）

简单的解决方案是删除调试 API，你会没事的。

**补充：**添加 ObjC 适合您的程序，这是其他问题。

# javascript - 如何在视差中为所有屏幕设置屏幕分辨率

> ID：15780120
> 
> 赞同：1
> 
> 时间：2013-04-03T06:13:56.347
> 
> 标签：javascript, jquery, html, css, parallax

如何为所有屏幕（如台式机、笔记本电脑等）设置屏幕分辨率。在视差运动中。我目前正在开发视差网站。我在为所有屏幕设置屏幕分辨率时遇到问题。我想在背景中放置几张图像。每张图片的宽度为 5212px。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:35:58.363

您想将图像的宽度设置为百分比而不是宽度。例如，如果您将宽度设置为 100% 而不是 5212px，那么无论您放大或缩小多少并调整窗口大小，图像将始终为窗口大小的 100%。

# javascript - 从 JSON 中获取数据

> ID：15780121
> 
> 赞同：0
> 
> 时间：2013-04-03T06:14:00.150
> 
> 标签：javascript, json, ibm-mobilefirst

我正在尝试使用适配器进行推送通知。我遵循此 IBM Worklight Developer 站点中为推送通知定义的所有步骤，并制作了一个项目及其工作。现在我想进一步向特定设备发送通知。对于此工作灯，请提供一个方法 getDeviceSubscriptions()，该方法返回 JSON 数组，其中包含每个订阅设备的对象数。

```
deviceSubscriptions = userSubscription.getDeviceSubscriptions() ; 
```

JSON包括：

```
[{
    "platform": "",
    "eventSourceId": "",
    "alias": "",
    "token": "",
    "userAgent": "",
    "device": "",
    "applicationId": "",
    "options": {}
}, 
```

{

```
 "platform": "",
    "eventSourceId": "",
    "alias": "",
    "token": "",
    "userAgent": "",
    "device": "",
    "applicationId": "",
    "options": {}
}] 
```

现在我想获得密钥`device`和令牌的价值。那么如何才能实现呢。

当时我正在使用`JSON.stringify`它返回一个字符串，但我想直接访问设备和令牌。当我使用`JSON.parse`它时，它会给出`[object , Object]`但不显示任何 JSON。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:20:12.297

JSON解析后，直接用this指出key

```
obj[0]["device"] 
```

对于所有可用节点，您应该使用增量值代替 [0]，例如

```
obj[i]["device"];
i++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:23:14.383

只需使用数组语法访问属性：

```
var firstDevice=deviceSubscriptions[0].device;
var secondDevice=deviceSubscriptions[1].device; 
```

ETC...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:28:24.477

**更新**

目前您的 JSON 无效，有效的 json 应该是：

```
{
    "items": [
        {
            "platform": "Google",
            "eventSourceId": "PushAdapter.PushEventSource",
            "alias": "myPush",
            "token": " ",
            "userAgent": " ",
            "device": " ",
            "applicationId": " ",
            "options": {}
        },
        {
            "platform": "Google",
            "eventSourceId": "PushAdapter.PushEventSource",
            "alias": "myPush",
            "token": " ",
            "userAgent": " ",
            "device": " ",
            "applicationId": " ",
            "options": {}
        }
    ]
} 
```

解析您的 json 字符串，如：

```
var data = JSON.parse(yourJsonString); 
```

现在访问设备和令牌属性值，例如：

```
var device = data.items[0].device;        //give device value of 0th item

var token = data.items[0].token;          //give token value of 0th item 
```

[**检查这个小提琴**](http://jsbin.com/umezas/4/edit)

# google-chrome - 如何在 Chrome 中查看 PDF？

> ID：15780122
> 
> 赞同：0
> 
> 时间：2013-04-03T06:14:00.213
> 
> 标签：google-chrome, pdf

我已启用 Chrome PDF 查看器，但仍在下载 PDF 文件。如何停止此操作并在 Chrome 中查看这些 PDF 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T13:42:50.967

```
<embed src="http://test.com/cool.pdf" width="500" height="750"> 
```

这将在您的 html 中嵌入一个 pdf。chrome 和其他浏览器会将 pdf 显示为页面的一部分。因此浏览器不会下载它。

# string - 在 python 字符串中替换或替换不起作用

> ID：15780139
> 
> 赞同：1
> 
> 时间：2013-04-03T06:14:58.333
> 
> 标签：string, python-2.7, replace

多亏了这个很棒的网站，我几乎可以解决我所有的 python 问题，但是，现在我需要一些更多和具体的帮助。

我有一个从数据库中获取的字符串，如下所示：

```
u'\t\t\tcase <<<compute_type>>>:\n\t\t\t\t{\n\t\t\t\t\tif (curr_i <= 1) Messag... 
```

该字符串基本上是带有 unix 行结尾的纯 c 代码，并且应该以某种特定变量的值被从 Qt UI 收集的其他内容替换的方式进行处理。

我尝试了以下方法来进行替换：

```
tmplt.replace(u"<<<compute_type>>>", str(led_coeffs.compute_type)) 
```

其中 'led_coeffs' 是一个命名元组，它的值是一个整数。我也试过这个：

```
tmplt = Template(u'\t\t\tcase ${compute_type}:\n\t\t\t\t{\n\t\t\t\t\tif (curr_i <= 1) Messag...)
tmplt.substitute(compute_type = str(led_coeffs.compute_type)) 
```

但是，这两种方法都不起作用，我不知道为什么。最后，我希望在这里得到一些输入。也许整个方法是不正确的，任何关于如何以良好方式实现替换的提示都受到高度赞赏。

谢谢，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:18:50.510

`str.replace`（和其他字符串方法）不能就地工作（Python 中的字符串是不可变的） - 它返回一个新字符串 - 您需要将结果分配回原始名称以使更改生效：

```
tmplt = tmplt.replace(u"<<<compute_type>>>", str(led_coeffs.compute_type)) 
```

您还可以发明自己的模板：

```
import re
print re.sub('<<<(.*?)>>>', lambda L, nt=led_coeffs: str(getattr(nt, L.group(1))), your_string) 
```

在您的命名元组上自动查找属性...

# css - 带触发按钮和 100% 宽度的日期选择器

> ID：15780140
> 
> 赞同：1
> 
> 时间：2013-04-03T06:15:04.273
> 
> 标签：css, jquery-ui, datepicker

是否有任何简单的方法来创建具有按钮触发器和 100% 宽度的日期选择器（jqueryUI）？现在它不处理这种情况：

[http://jsbin.com/uriwaw/1/edit](http://jsbin.com/uriwaw/1/edit)

当然我可以以像素为单位设置宽度，但这不是我的目标。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:46:50.033

[这个](http://jsbin.com/uriwaw/9)怎么样？

您需要设置 `buttonImageOnly`并`false`添加您的样式

# php - PHP SoapClient::__soapCall

> ID：15780141
> 
> 赞同：0
> 
> 时间：2013-04-03T06:15:05.670
> 
> 标签：php, soap

我创建了一个新客户端，并像这样进行肥皂调用：

```
$client = new SoapClient($strServiceUrl, $params);
$result= $client->$strFunct($arrCallParams); 
```

然后我通过结果“Foreach”。但是，结果的顺序与我们在 C++ 中测试soapserver 的方法时的顺序不同（其中编写了soapserver）。有什么想法吗？这是正常行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:27:16.933

问题似乎出在 C++ SOAP 服务中的一个错误中。

# python - 如何在多个模块中使用python日志记录

> ID：15780151
> 
> 赞同：11
> 
> 时间：2013-04-03T06:15:51.683
> 
> 标签：python, logging

我想知道从 Python 应用程序中执行日志记录的标准设置是什么。

我正在使用 Logging 类，并且我编写了自己的记录器类来实例化 Logging 类。然后我的 main 实例化我的记录器包装类。但是，我的 main 实例化了其他类，我希望这些其他类也能够通过 main 中的 logger 对象写入日志文件。

如何使该记录器对象可以被其他类调用？这几乎就像我们需要某种静态记录器对象来让它工作。

我想这个问题的长短是：如何在代码结构中实现日志记录，以便从 main 实例化的所有类都可以写入同一个日志文件？我是否只需要在指向同一文件的每个类中创建一个新的日志记录对象？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-05T13:58:19.030

我不知道你所说的类是什么意思`Logging`——Python 的内置日志记录中没有这样的类。您实际上并不需要包装器：这是一个如何从您编写的任意类进行日志记录的示例：

```
import logging

# This class could be imported from a utility module
class LogMixin(object):
    @property
    def logger(self):
        name = '.'.join([__name__, self.__class__.__name__])
        return logging.getLogger(name)

# This class is just there to show that you can use a mixin like LogMixin
class Base(object):
    pass

# This could be in a module separate from B
class A(Base, LogMixin):
    def __init__(self):
        # Example of logging from a method in one of your classes
        self.logger.debug('Hello from A')

# This could be in a module separate from A
class B(Base, LogMixin):
    def __init__(self):
        # Another example of logging from a method in one of your classes
        self.logger.debug('Hello from B')

def main():
    # Do some work to exercise logging
    a = A()
    b = B()
    with open('myapp.log') as f:
        print('Log file contents:')
        print(f.read())

if __name__ == '__main__':
    # Configure only in your main program clause
    logging.basicConfig(level=logging.DEBUG,
                        filename='myapp.log', filemode='w',
                        format='%(name)s %(levelname)s %(message)s')
    main() 
```

通常没有必要在类级别拥有记录器：在 Python 中，与 Java 不同，程序（分解）组合的单元是模块。但是，正如我在上面所展示的，没有什么能阻止你这样做。该脚本在运行时显示：

```
Log file contents:
__main__.A DEBUG Hello from A
__main__.B DEBUG Hello from B 
```

请注意，两个类的代码都记录到同一个文件 myapp.log。即使 A 和 B 在不同的模块中，这也可以工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T06:30:47.107

尝试使用 logging.getLogger() 来获取您的日志记录对象实例：

[http://docs.python.org/3/library/logging.html#logging.getLogger](http://docs.python.org/3/library/logging.html#logging.getLogger)

> 使用给定名称对该函数的所有调用都返回相同的记录器实例。这意味着记录器实例永远不需要在应用程序的不同部分之间传递。

**更新**：

推荐的方法是使用 getLogger() 函数并对其进行配置（设置处理程序、格式化程序等...）：

```
# main.py
import logging
import lib

def main():
    logger = logging.getLogger('custom_logger')
    logger.setLevel(logging.INFO)
    logger.addHandler(logging.FileHandler('test.log'))
    logger.info('logged from main module')
    lib.log()

if __name__ == '__main__':
    main()

# lib.py
import logging

def log():
    logger = logging.getLogger('custom_logger')
    logger.info('logged from lib module') 
```

如果您**确实**需要扩展记录器类，请查看**logging.setLoggerClass(klass)**

**更新 2**：

有关如何在不更改 Logging 类的情况下添加自定义日志记录级别的示例：

```
# main.py
import logging
import lib

# Extend Logger class
CUSTOM_LEVEL_NUM = 9
logging.addLevelName(CUSTOM_LEVEL_NUM, 'CUSTOM')
def custom(self, msg, *args, **kwargs):
    self._log(CUSTOM_LEVEL_NUM, msg, args, **kwargs)
logging.Logger.custom = custom

# Do global logger instance setup
logger = logging.getLogger('custom_logger')
logger.setLevel(logging.INFO)
logger.addHandler(logging.FileHandler('test.log'))

def main():
    logger = logging.getLogger('custom_logger')
    logger.custom('logged from main module')
    lib.log()

if __name__ == '__main__':
    main() 
```

请注意，不建议添加自定义级别：http: [//docs.python.org/2/howto/logging.html#custom-levels](http://docs.python.org/2/howto/logging.html#custom-levels)

定义一个自定义处理程序并可能使用多个记录器可能会满足您的其他要求：可选输出到 stderr。

# sql-server-2008 - 根据前一行的值更新 SQL 行

> ID：15780154
> 
> 赞同：1
> 
> 时间：2013-04-03T06:16:08.183
> 
> 标签：sql-server-2008, insert-update

我想更新具有前一行值的一部分的行值。（基本上我需要找到结转效果）。

我正在使用`While loop`或`cursor`执行相同的操作，但是由于更新语句运行了行数，因此需要花费很多时间。

请建议我一个很好的有效方法来找出结转效果。下面是`dataset`带有 0.2 结转效果的示例。

```
WeekNumber Var1 carry_over_effect_0.2
1           10          10
2           30          30+0.2*10
3           80          80+(30+0.2*10)*0.2 
```

等等

我想再添加一个，如下面的示例所示

```
Brand    WeekNumber Var1 carry_over_effect_0.2
x         1           10          10
x         2           30          30+0.2*10
x         3           80          80+(30+0.2*10)*0.2
y         1           40          40
y         2           50          50 + (40*0.2) 
```

依此类推......可能有一个或多个关键变量，因为 Brand 在这里将完整的集合划分为两个或多个子集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:46:41.687

我假设排序由 定义`WeekNumber`，并且这是连续的，没有间隙。与其进行更新，不如只在选择期间执行计算（这样，您不必担心计算已过时）：

```
declare @t table (WeekNumber int, Var1 int)
insert into @t (WeekNumber, Var1) values
(1,           10),
(2,           30),
(3,           80)

;with CarryOvers as (
    select WeekNumber,Var1,CONVERT(decimal(38,4),Var1) as CarryOver from @t where WeekNumber=1
    union all
    select t.WeekNumber,t.Var1,CONVERT(decimal(38,4),t.Var1 + (0.2*co.CarryOver))
    from @t t inner join CarryOvers co on t.WeekNumber = co.WeekNumber+1
)
select * from CarryOvers option (maxrecursion 0) 
```

结果：

```
WeekNumber  Var1        CarryOver
----------- ----------- ---------------------------------------
1           10          10.0000
2           30          32.0000
3           80          86.4000 
```

* * *

`UPDATE`版本：

```
declare @t table (WeekNumber int, Var1 int,CarryOver decimal(38,4))
insert into @t (WeekNumber, Var1) values
(1,           10),
(2,           30),
(3,           80)

;with CarryOvers as (
    select WeekNumber,Var1,CONVERT(decimal(38,4),Var1) as CarryOver from @t where WeekNumber=1
    union all
    select t.WeekNumber,t.Var1,CONVERT(decimal(38,4),t.Var1 + (0.2*co.CarryOver))
    from @t t inner join CarryOvers co on t.WeekNumber = co.WeekNumber+1
)
update t set CarryOver = co.CarryOver
from @t t inner join CarryOvers co on t.WeekNumber = co.WeekNumber
option (maxrecursion 0)

select * from @t 
```

但我要重复一遍，我建议不要这样做，除非`SELECT`在正常使用期间运行它是一个已证明的性能问题 - 现在表中的任何其他`UPDATE`s 都需要`UPDATE`在之后立即运行它，所以你增加了相当大的性能成本对于每个`UPDATE`.

* * *

添加`Brand`：

```
declare @t table (Brand char(1),WeekNumber int, Var1 int)
insert into @t (Brand,WeekNumber, Var1) values
('x',1,           10),
('x',2,           30),
('x',3,           80),
('y',1,40),
('y',2,50)

;with CarryOvers as (
    select Brand,WeekNumber,Var1,CONVERT(decimal(38,4),Var1) as CarryOver from @t where WeekNumber=1
    union all
    select t.Brand,t.WeekNumber,t.Var1,CONVERT(decimal(38,4),t.Var1 + (0.2*co.CarryOver))
    from @t t inner join CarryOvers co on t.WeekNumber = co.WeekNumber+1 and t.Brand = co.Brand
)
select * from CarryOvers
order by Brand,WeekNumber option (maxrecursion 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:25:44.240

你的问题不清楚。但考虑使用触发器

我不确定这个工作。

```
CREATE TRIGGER NAME
BEFORE INSERT INTO TABLE_NAME
FOR EACH ROW BEGIN
    WHERE (SELECT COUNT(*) FROM TABLE_nAME) > 0
    BEGIN
INSERT INTO TABLE-NAME
SELECT NEW.WEEKNUMBER, NEW.VAR1, (NEW.VAR1+S.CARRY_OVER_EFFECT *0.2) AS         CARRY_OVER_EFFECT
FROM 
TABLE-NAME S
WHERE S.WEEKNUMBER + 1= NEW.WEEK_NUMBER;
END 
```

# c# - 如何在 epplus 工作表中附加 HTML？

> ID：15780158
> 
> 赞同：2
> 
> 时间：2013-04-03T06:16:15.560
> 
> 标签：c#, asp.net, excel, epplus

我正在使用 c# 将我的 HTML 报告导出到 excel 中。我正在编写我所有的 HTML 作为响应（`Response.Write()`）以及 css 并下载 excel 并且它工作正常。现在我需要将其 HTML 部分分成单独的工作表。

我怎样才能做到这一点？有没有办法可以通过 EPPlus 做到这一点？

```
Response.Clear();
Response.ClearContent();
Response.ClearHeaders();
Response.Buffer = true;
Response.ContentType = "application/ms-excel";
Response.AddHeader("Content-Disposition", "attachment;filename=EntryPlanningReport.xls");            
Response.Write(@"<!DOCTYPE HTML PUBLIC ""-//W3C//DTD HTML 4.0 Transitional//EN"">");
Response.Write("<head><style type='text/css'>" + strBuilder.ToString() + "</style></head>");            
Response.Write("<div id='contentTitle'> Entry Planning Report </div><br />");
Response.Write(ReportSelectionHtml + "<br />"); 
Response.End(); 
```

上面的代码在单张纸上运行良好，你可以看到我正在注入我的 css 文件文本。对于多张纸，我正在切换到 EPPlus

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:37:33.397

EPPlus 是创建 Excel 文件的好方法，但有一些限制。

正如您所注意到的，您不能简单地将单元格的值设置为某些 HTML 代码并期望在生成的 Excel 文件中接收格式化文本。EPPlus 支持富文本单元格值，但必须使用方法调用来构造这些值，以打开和关闭文本值不同部分的格式设置。应用于整个单元格的格式将单独处理。

我编写了一些实用程序，用于将一些*非常*基本的 HTML 转换为 EPPlus 富文本对象，您可以在这里找到它，它可能会有所帮助：

[https://github.com/JanKallman/EPPlus/issues/154](https://github.com/JanKallman/EPPlus/issues/154)

也就是说，根据您上面的评论，您似乎正在尝试将整个*表格*嵌入到单个 Excel 单元格中。这是不可能的。如果您不能在 Excel 本身中执行某些操作，则您无法在 EPPlus 中执行此操作。如果要在 Excel 中创建表格，工作表的每个单元格都应对应于表格中的一个单元格。例如：

```
ws2.Cells[1, 1].Value = "Brach Name";
ws2.Cells[1, 2].Value = "data"; 
```

在单元格上设置颜色和其他样式的方式与设置值类似，EPPlus 发行版中有许多示例可供您参考。

# android - 我在我的 wcf 服务中传递枚举时遇到了一些问题

> ID：15780159
> 
> 赞同：1
> 
> 时间：2013-04-03T06:16:30.200
> 
> 标签：android, eclipse, wcf, enums, ksoap2

我试图解析这个枚举：

```
public enum ResponseFormat
{
    XML,
    JSON,
    PDF,
} 
```

与 ksoap2 一起进入 wcf 服务。我尝试使用`Marshal`但我不确定它是否正确。

我有一个名为 Format 的类：

```
public class Format implements Marshal
{
public enum ResponseFormat
{
    XML,
    JSON,
    PDF,;
}

public Object readInstance(XmlPullParser xpp, String string, String string1, PropertyInfo pi)
{
    try
    {
        return ResponseFormat.valueOf(xpp.nextText());
    }
    catch(Exception e)
    {
        return null;
    }
}

public void writeInstance(XmlSerializer xs, Object o)
{
    try
    {
        xs.text(((ResponseFormat)o).name());
    }
    catch (Exception e)
    {
    }
}

public void register(SoapSerializationEnvelope sse)
{
    sse.addMapping(sse.xsd, "ResponseFormat", ResponseFormat.class, new Format());
}
} 
```

然后我像这样调用 wcf 服务：

```
try
{
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty("UserSessionToken", guid);
    request.addProperty("Reference", "Nicolas");
    request.addProperty("ResponseFormat", Format.ResponseFormat.JSON);
    request.addProperty("Surname", "Tyler");
    request.addProperty("Firstname", "Nicolas");
    request.addProperty("IDNumber", "1234567890123");

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.addMapping("http://schemas.datacontract.org/2004/07/SearchWorksAPI", "ResponseFormat", Format.ResponseFormat.JSON.getClass(), new Format());
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    androidHttpTransport.call(SOAP_ACTION + METHOD_NAME, envelope);
    SoapObject response = (SoapObject)envelope.getResponse();

    return response.toString();
}
catch (Exception e)
{
    return null;
} 
```

我得到了例外：

```
There was an error reflecting type 'ResponseObjects.Person[]'.;    at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(TypeModel model, String ns, ImportContext context, String dataType, XmlAttributes a, Boolean repeats, Boolean openModel, RecursionLimiter limiter) 
```

在我看来，序列化有问题。关于这里有什么问题的任何想法？

# wpf - WPF TabControl ContentTemplate 在 Windows XP 上的呈现方式与 Windows 7 不同

> ID：15780162
> 
> 赞同：2
> 
> 时间：2013-04-03T06:16:35.170
> 
> 标签：wpf, wpf-4.0

我有一个看起来像这样的 TabControl：

```
<TabControl x:Name="tabPlaintiffs" 
                ItemsSource="{Binding CivilPaper.Plaintiffs}" 
                ContentTemplate="{DynamicResource PersonTemplate}" 
                SelectedItem="{Binding SelectedPerson, Converter={StaticResource PersonRoleToPerson}, Mode=OneWayToSource}" 
                Margin="5" /> 
```

内容模板如下所示：

```
<DataTemplate x:Key="PersonTemplate">
                <Grid Background="#FF4EFF00">
                </Grid>
            </DataTemplate> 
```

在 Windows 7 上，它呈现如下： ![在此处输入图像描述](https://i.stack.imgur.com/rKslw.png)

在 Windows XP SP3 上，它呈现（或实际上不呈现！）如下： ![在此处输入图像描述](https://i.stack.imgur.com/jyTCb.png)

是什么导致了差异？

***编辑****：删除 ItemsTemplate 并删除 ContentTemplate 中的所有数据绑定以排除各种事情。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:30:28.057

对于任何人来说，即使是非常熟悉代码的人（即你）也很难在这么多代码中找到错误。

我建议您通过以下方式调试您的应用程序：

1.  验证两台机器都使用相同的运行时。
2.  创建一个新的空控件并一个一个地添加元素，直到它停止在 XP 上工作。可能是您正在使用的组件之一不支持它，您需要使用其他组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:47:38.387

最终，事实证明，Windows 7 处理 ValueConverter 的方式与 Windows XP 不同。如果我删除：

```
SelectedItem="{Binding SelectedPerson, Converter={StaticResource PersonRoleToPerson}, Mode=OneWayToSource}" 
```

然后我得到了所有正确的模板。问题出在 ValueConverter 中，尽管 Windows XP 多次触发它，而 Windows 7 仅在底层集合通知它更改时触发它（应该如此！）

我的 ValueConverter 最初在 Convert 和 ConvertBack 中都返回了 null（因为它是 OneWayToSource 我只需要 ConvertBack）。如果任一方法不满足对象的类型检查，则返回 null。我现在认为这是一种不好的做法。相反，如果您一路跌倒，它最终应该返回 DependencyProperty.UnsetValue：

```
public class PlaintiffRoleToPerson : IValueConverter
    {

        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return DependencyProperty.UnsetValue;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            var plaintiff = value as Plaintiff;
            if (plaintiff != null)
            {
                return plaintiff.Person;
            }

            return DependencyProperty.UnsetValue;
        }

    } 
```

为什么 Windows 7 的处理方式与 Windows XP 不同仍然是个谜，但我现在一切正常。我正在倒计时直到 Windows XP 终止支持，我可以将它从我们支持的操作系统中删除。

# wsdl - 如何从 WSDL 和 SOAP 消息中识别 NAMESPACE、METHOD_NAME、URL 和 SOAP_ACTION

> ID：15780164
> 
> 赞同：4
> 
> 时间：2013-04-03T06:16:42.840
> 
> 标签：wsdl, soap-client, ws-security, wsse

我在解析 SOAP Web 服务时遇到了一些问题。如何从 WSDL 中识别 NAMESPACE、METHOD_NAME、URL 和 SOAP_ACTION，以及如何使用 SoapObject 进行处理。

我想在android中调用soap。

**下面是 WSDL 和 SOAP 请求 XML。**

WSDL：

[https://e1jas01.domain.cssus.com:8091/DV910/RI_AddressBookManager?WSDL](https://e1jas01.domain.cssus.com:8091/DV910/RI_AddressBookManager?WSDL)

谢谢，戈瑟姆。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T06:54:05.043

首先，下载 SoapUI 会对您有很大帮助，当您在那里创建一个新项目并导入该 URL 时，您将正确地看到命名空间和方法名称。对于肥皂行动；每个操作有 1 个肥皂动作。首先从该链接中，您应该找到要使用的操作，然后您将看到该操作的肥皂动作。

[http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)

在这里，有一个关于创建肥皂对象等的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T08:40:20.907

它可能会帮助其他发现困难的人，这就是我发布的原因，这个 stackoverflow 问题解释了识别 NAMESPACE、METHOD_NAME、URL 和 SOAP_ACTION [ksoap2 org.xmlpull.v1.xmlpullparserexception 预期 start_tag 错误的过程](https://stackoverflow.com/questions/12430136/ksoap2-org-xmlpull-v1-xmlpullparserexception-expected-start-tag-error)

# c# - 在运行时将值发送到文本框

> ID：15780165
> 
> 赞同：0
> 
> 时间：2013-04-03T06:16:43.743
> 
> 标签：c#, winforms

我正在运行一个控制台应用程序。我在表单中有一个文本框。我需要计算最近五分钟在另一个班级中阅读的消息数，并在文本框中显示该值。当我运行代码时，我可以正确地看到 textbox.text 值。但在 UI 中，我看不到文本框中显示的值。但我可以在运行时手动编辑文本框。

这是我的代码：

**在代码隐藏中**

```
for (int i = 1; i <= numberOfMsgs; i++)
{
    if (addDateTime.AddMinutes(2).Minute==DateTime.Now.Minute)
    {
        //FilesProcessedInFiveMinutes();
        //Thread thread1 = new Thread(new ThreadStart(FiveMinutesMessage));
        //thread1.Start();
        WebSphereUI webSphereUi = new WebSphereUI();
        webSphereUi.count(fiveMinutesCount);
        addDateTime = DateTime.Now;
    }
    fiveMinutesCount = fiveMinutesCount + 1;
} 
```

**在 form.cs 中**

```
public void count(int countValue)
{
    Thread.Sleep(2000);
    txtLastFiveMins.Focus();
    txtLastFiveMins.Text = countValue.ToString();
    txtLastFiveMins.Refresh();
    txtLastFiveMins.Show();
    backgroundWorker1.RunWorkerAsync(2000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:33:23.520

每次输入 if 语句时，您似乎都在创建一个新表单。此行正在创建一个新`WebSphereUI`表单：

```
 WebSphereUI webSphereUi = new WebSphereUI(); 
```

然后，你调用`count`它的方法：

```
 webSphereUi.count(fiveMinutesCount); 
```

但是然后你继续前进，而不显示这种形式。如果添加：

```
 webSphereUi.Show(); 
```

然后您可能会看到屏幕上出现表单，并按预期显示值。但是，每次执行 if 语句时都会显示一个新形式。您可以通过在其他地方声明并在循环中使用它来重用相同的表单：

```
class yourClass
{

    WebSphereUI webSphereUi = new WebSphereUI();

    ...

    private void yourFunction()
    {
        for (int i = 1; i <= numberOfMsgs; i++)
        {
            if (addDateTime.AddMinutes(2).Minute==DateTime.Now.Minute)
            {
                webSphereUi.count(fiveMinutesCount);
                webSphereUi.Show();
                addDateTime = DateTime.Now;
            }
            fiveMinutesCount = fiveMinutesCount + 1;
        }
    }

} 
```

# actionscript-3 - as3 支持循环标签吗？

> ID：15780167
> 
> 赞同：3
> 
> 时间：2013-04-03T06:16:48.417
> 
> 标签：actionscript-3, loops, label

我有一个循环结构并想退出所有父循环，AS3 是否支持标签，就像我们在 php 中一样？

```
for(var i:int=0;i<100;i++)
{
    for(var j:int=0;j<100;j++)
    {
        if(j == 15){

           i = 99;
           break;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T06:20:30.123

是的，您可以`label:`像这样在循环前面使用：

```
// Label this loop 'outer'.
outer: for(var i:int = 0; i < 100; i++)
{
    inner: for(var j:int = 0; j < 100; j++)
    {
        if(j === 15)
        {
            // Break the outer loop.
            break outer;
        }
    }
} 
```

这也适用于`continue`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:43:45.617

您也可以将 break_condition 合并到 for 循环中

```
var outer_break = false;
var inner_break = false;
for(var i = 0; i < 100 && !outer_break; i++) {
     for(var j = 0; j < 100 && !inner_break;j++) {
         if (some_condition) inner_break = true;
     }
} 
```

我建议不要在这里使用标签（很多 goto），我也强烈建议不要使用 for 循环。而是使用 foreach 来迭代您需要迭代的任何内容。

# powershell - PowerShell 命令行参数和“--”

> ID：15780174
> 
> 赞同：12
> 
> 时间：2013-04-03T06:17:27.107
> 
> 标签：powershell, command-line, powershell-2.0

无论出于何种原因，当我尝试调用我正在编写的 C# 程序并尝试在命令行中使用“--”传递两个参数时，PowerShell 不会使用我的命令行调用该程序。

例如，我提供命令行：

```
.\abc.exe foo.txt -- bar -- 
```

当我调用它时，C# 程序的 main 只获取命令行参数：

```
foo.txt bar -- 
```

代替

```
foo.txt -- bar -- 
```

正如预期的那样。

为什么会发生这种情况？

顺便说一句，如果我称之为：

```
.\abc.exe foo.txt '--' bar '--' 
```

它按预期工作。

此外，将其称为：

```
& .\abc.exe foo.txt -- bar -- 
```

似乎没有帮助。

我认为这是 PowerShell 怪异的原因是，如果我从 CMD.EXE 运行相同的命令行，一切都会按预期工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T12:58:26.560

双连字符指示 PowerShell 将后面的所有内容视为文字参数而不是选项，以便您可以将例如文字传递`-foo`给脚本/应用程序/cmdlet。

例子：

```
PS C:\> echo "-bar" | select-string -bar
Select-String : A parameter cannot be found that matches parameter name 'bar'.
At line:1 char:28
+ "-bar" | select-string -bar <<<<
    + CategoryInfo          : InvalidArgument: (:) [Select-String], ParameterBindingException
    + FullyQualifiedErrorId : NamedParameterNotFound,Microsoft.PowerShell.Commands.SelectStringCommand 
```

对比

```
PS C:\> echo "-bar" | select-string -- -bar

-bar 
```

为了避免这种行为，您必须引用 ( `"--"`, `'--'`) 或转义 ( ``--`) 双连字符。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-04T16:21:00.453

使用[PowerShell 3](http://blogs.msdn.com/b/powershell/archive/2012/06/14/new-v3-language-features.aspx)，您可以`--%`用来停止 PowerShell 的正常解析。

```
.\abc.exe --% foo.txt -- bar -- 
```

# android - java.lang.RuntimeException：无法实例化活动 ComponentInfo：java.lang.InstantiationException

> ID：15780175
> 
> 赞同：1
> 
> 时间：2013-04-03T06:17:33.450
> 
> 标签：android

我试图使用下面的程序创建一个矩形。但它抛出运行时异常。模拟器正在打开但意外关闭。在我的项目中，我有两个类 -Map.java 和 StartDraw.java

以下是 Map.java 的代码：

```
 package com.mapping;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.View;

public class Map extends View {
Paint paint = new Paint();

public Map(Context context) {
    super(context);            
}

@Override
public void onDraw(Canvas canvas) {
    paint.setColor(Color.BLACK);
    paint.setStrokeWidth(3);
    canvas.drawRect(30, 30, 80, 80, paint);
    paint.setStrokeWidth(0);
    paint.setColor(Color.CYAN);
    canvas.drawRect(33, 60, 77, 77, paint );
    paint.setColor(Color.YELLOW);
    canvas.drawRect(33, 33, 77, 60, paint );

} 
```

下面是 StartDraw.java 的代码

```
package com.mapping;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;

public class StartDraw extends Activity {
Map drawView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    drawView = new Map(this);
    drawView.setBackgroundColor(Color.WHITE);
    setContentView(drawView);

}
} 
```

下面是 manifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mapping"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.mapping.Map"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

请帮我解决这个异常。我怀疑这可能是因为构造函数，但无法得到修改什么以及如何修改。

下面是logcat

```
04-03 11:23:56.611: D/dalvikvm(333): newInstance failed: no <init>()
04-03 11:23:56.632: D/AndroidRuntime(333): Shutting down VM
04-03 11:23:56.632: W/dalvikvm(333): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-03 11:23:56.701: E/AndroidRuntime(333): FATAL EXCEPTION: main
04-03 11:23:56.701: E/AndroidRuntime(333): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.mapping/com.mapping.Map}: java.lang.InstantiationException: com.mapping.Map
04-03 11:23:56.701: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
04-03 11:23:56.701: E/AndroidRuntime(333):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-03 11:23:56.701: E/AndroidRuntime(333):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-03 11:23:56.701: E/AndroidRuntime(333):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-03 11:23:56.701: E/AndroidRuntime(333):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-03 11:23:56.701: E/AndroidRuntime(333):  at android.os.Looper.loop(Looper.java:123)
04-03 11:23:56.701: E/AndroidRuntime(333):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-03 11:23:56.701: E/AndroidRuntime(333):  at java.lang.reflect.Method.invokeNative(Native Method)
04-03 11:23:56.701: E/AndroidRuntime(333):  at java.lang.reflect.Method.invoke(Method.java:507)
04-03 11:23:56.701: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-03 11:23:56.701: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-03 11:23:56.701: E/AndroidRuntime(333):  at dalvik.system.NativeStart.main(Native Method)
04-03 11:23:56.701: E/AndroidRuntime(333): Caused by: java.lang.InstantiationException: com.mapping.Map
04-03 11:23:56.701: E/AndroidRuntime(333):  at java.lang.Class.newInstanceImpl(Native Method)
04-03 11:23:56.701: E/AndroidRuntime(333):  at java.lang.Class.newInstance(Class.java:1409)
04-03 11:23:56.701: E/AndroidRuntime(333):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-03 11:23:56.701: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
04-03 11:23:56.701: E/AndroidRuntime(333):  ... 11 more
04-03 11:24:04.161: I/Process(333): Sending signal. PID: 333 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:22:03.163

您在地图中提供自定义视图名称，`<activity>`您需要为活动名称而不是视图名称设置名称“StartDraw”

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mapping"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".StartDraw"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:22:16.737

注册`StartDraw`而不是默认注册`Map` ，因为您正在扩展 Activity 类。所以只需在清单中将默认活动名称更改为：`AndroidManifest.xml``Activity``StartDraw``StartDraw`

```
<activity
        android:name=".StartDraw" <!--here use StartDraw instead Map  -->
        android:label="@string/app_name" >
<!-- other attributes here -->
</activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:41:23.293

只是改变`androidmanifest.xml`而不是`android:name="com.mapping.Map"`

```
<activity android:name=".startdraw" android:label="@string/app_name" android:launchMode="singleTask"> 
```

# java - 添加路由器标头时忽略 javax.sip.OUTBOUND_PROXY

> ID：15780176
> 
> 赞同：1
> 
> 时间：2013-04-03T06:17:33.927
> 
> 标签：java, sip, jain-sip

我在一个 SIP 项目中工作

我已经像这样设置了 OUTBOUND_PROXY

myProperties.setProperty("javax.sip.OUTBOUND_PROXY", "pcscf.infotelims.test:4060/udp");

但是当我使用 RouteHeader 发送发送请求时，该请求会忽略 OUTBOUND_PROXY 并通过 RouteHeader 发送。

路由标头的创建方式如下：

地址 routeAddress = myAddressFactory.createAddress("sip:orig@scscf.infotelims.test:6060"); SipURI myrouteURI = (SipURI) routeAddress.getURI(); myrouteURI.setLrParam();
myRouteHeader = myHeaderFactory.createRouteHeader(myAddressFactory.createAddress(myrouteURI));

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:02:25.250

`DefaultRouter`您描述的行为与with的描述相匹配[，如此链接](http://hudson.jboss.org/hudson/job/jain-sip/lastSuccessfulBuild/artifact/javadoc/gov/nist/javax/sip/stack/DefaultRouter.html)`javax.sip.USE_ROUTER_FOR_ALL_URIS=false`中所示。标头优先于出站代理设置。`Route`

看起来如果您将上面的属性设置为`true`，所有请求都将转到配置的代理地址。另一种方法是将*两个* `Route`标头推送到请求上。

# c# - Visual Studio 中是否有按键来切换所有 CLR 异常的中断，第一次机会？

> ID：15780177
> 
> 赞同：13
> 
> 时间：2013-04-03T06:17:39.983
> 
> 标签：c#, visual-studio, debugging, exception

要立即切换所有异常的中断，我必须：

1.  调试->异常
2.  单击`Thrown`“Common Language Runtime Eceptions”旁边的列
3.  好的

![在此处输入图像描述](https://i.stack.imgur.com/VP7tR.png)

通常我想停止所有异常，但是在处理在主线案例中使用异常的代码时，我需要禁用该行为。有一个按键会很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T07:34:11.413

没有内置的方法可以做到这一点。
但是，除非你使用 Visual Studio Express，否则你可以试试这个 Extension: [Exception Breaker](http://visualstudiogallery.msdn.microsoft.com/50091e25-9e75-40d3-9780-a05892f474de)，它对我有用。

此扩展程序的作用是提供一个工具栏按钮，该按钮基本上可以切换您在图片中显示的复选框。您可以像任何其他工具栏按钮一样为其分配按键。

# php - 如何捕获用户在 php 中单击的 URL 并重定向到同一页面中的特定 html 文件？

> ID：15780182
> 
> 赞同：-3
> 
> 时间：2013-04-03T06:17:47.643
> 
> 标签：php, javascript, jquery

我有一个主页作品集，其中有展示我作品的缩略图。每当用户单击指定的缩略图时，我想重定向到弹出窗口中的特定页面。

为此，我想通过一个 php 文件重定向它，我将在其中捕获用户单击的 url 并重定向到指定的站点。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:20:27.393

你可以[`header`](http://php.net/manual/en/function.header.php)在php中使用

```
header('Location: http://www.example.com/');/* Redirect browser */ 
```

# css - 如何进行从 LESS 到 SCSS 的转换？

> ID：15780183
> 
> 赞同：-1
> 
> 时间：2013-04-03T06:17:49.807
> 
> 标签：css, sass, less, mixins

似乎 sass-convert 已根据搜索结果将 LESS 转换为 SCSS。我在过去的项目中使用了以下 LESS：

```
// Examples of how to use .box-shadow mixin
//.box-shadow (1px 1px 3px 0, 35%, 0, 0, 0);
//.box-shadow (1px 1px 3px 0, #000);
//.box-shadow (inset 1px 1px 3px 0, #000);
.box-shadow (@style, @color) when (iscolor(@color)) {
    -webkit-box-shadow: @arguments;
       -moz-box-shadow: @arguments;
            box-shadow: @arguments;
}
.box-shadow (@style, @alpha: 50%, @R: 0, @G: 0, @B: 0) when (isnumber(@alpha)) {
    .box-shadow (@style, rgba(@R, @G, @B, @alpha));
} 
```

指点，不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:57:01.727

这是一个近似的转换，我不认为你可以在 SASS 中对 mixin 参数做条件。将某些值放入规则时会收到警告，例如，当它尝试编译时抱怨`50%`它`rgba()`需要 from `0`to `1`。

```
@mixin box-shadow($style, $color) {
    -webkit-box-shadow: unquote($style) $color;
       -moz-box-shadow: unquote($style) $color;
            box-shadow: unquote($style) $color;
}
@mixin box-shadow-rgba($style, $r: 0, $g: 0, $b: 0, $alpha: 0.5) {
    @include box-shadow($style, rgba($r, $g, $b, $alpha));
}

// Usage    
div {
    @include box-shadow-rgba('inset', 255, 0, 0);
} 
```

编译为：

```
div {
  -webkit-box-shadow: inset rgba(255, 0, 0, 0.5);
  -moz-box-shadow: inset rgba(255, 0, 0, 0.5);
  box-shadow: inset rgba(255, 0, 0, 0.5); } 
```

# .net - 在静态扩展方法中锁定用于文件系统访问的字符串

> ID：15780185
> 
> 赞同：0
> 
> 时间：2013-04-03T06:18:00.463
> 
> 标签：.net, file, locking, extension-methods

我正在尝试制作一种有效的扩展方法，该方法将允许根据为数据记录生成的文件名同时锁定和并发访问文件系统。

我已阅读[Locking on an interned string？](https://stackoverflow.com/questions/6983714/locking-on-an-interned-string)，但它并不能完全回答我关于效率的问题。

我有一个看起来像这样的扩展方法（仅剥离相关代码）：

```
public static string GetImageUrl( this IStoredImage img, string path )
{
    var filename = String.Format( @"{0}\{1}_{2}{3}",
        path, img.Id, img.Version, img.FileExtension );

    //
    // If the file does not exist, create it in a
    // double-checked lock.
    //
    if( !File.Exists( filename ) )
    {
        //
        // Ensure that our string is unique to this method and
        // the file name, and that it is a shared reference.
        //
        var lockStr = StringPool.GetString(
            MethodBase.GetCurrentMethod().Name + filename );

        lock( lockStr )
        {
            if( !File.Exists( filename ) )
            {
                byte[] bytes = img.GetImageBytes();
                //
                // ...Code to write the file to disk
                //
             }
        }
    }

    return GetUrlFromPhysicalPath( filename );
} 
```

`IStoredImage`是在数据库中存储标头和元信息的对象。图像的实际二进制数据在一个 1:1 的链接表中。`GetImageBytes()`用二进制数据完成记录的加载。这样做的想法是能够将图像缓存到磁盘以提高效率。一旦文件被写出，`GetImageBytes()`在图像的缓存目录被删除或清除之前，永远不需要调用。

`StringPool`是一个静态类，可确保您对相同的字符串值获得相同的引用，类似于实习，但更高效和可控。

关于这个问题：使用字符串作为锁是否比简单地使用 a 更能提高效率`private static object LOCK = new object()`？我的直觉告诉我，按照我的方式进行操作将允许需要写出图像数据的多个线程同时运行（只要它们处理不同的文件名），而使用相同的 LOCK 引用会导致它们运行串行。

我已经尝试过`Mutex`和其他一些东西，但你必须小心，因为命名互斥体中的反斜杠字符会造成严重破坏。我不喜欢有奇怪的无证行为的东西。

提前致谢。

# magento - magento 和 Sugar CRM 集成问题

> ID：15780187
> 
> 赞同：0
> 
> 时间：2013-04-03T06:18:22.837
> 
> 标签：magento, integration, sugarcrm

我是 magento 的新手。实际上我想将 magento 与 Sugar crm 集成，我将本指南放假[http://www.magentocommerce.com/wiki/3__-_store_setup_and_management/magento-sugarcrm_integration_guide](http://www.magentocommerce.com/wiki/3_-_store_setup_and_management/magento-sugarcrm_integration_guide)

但我无法通过此代码获取客户的名字、姓氏和电子邮件。

当客户在 magento 中创建帐户时，潜在客户会在 CRM 中创建但字段为空。我怎样才能得到客户的名字姓氏和电子邮件。

感谢提前分配这是我的代码，但仍然无法获取客户信息。公共函数 createPostAction() {

```
 $session = $this->_getSession();

    if ($session->isLoggedIn()) {
        $this->_redirect('*/*/');
        return;
    }
    $session->setEscapeMessages(true); // prevent XSS injection in user input
    if ($this->getRequest()->isPost()) {
        $errors = array();

        if (!$customer = Mage::registry('current_customer')) {
            $customer = Mage::getModel('customer/customer')->setId(null);
        }

        /* @var $customerForm Mage_Customer_Model_Form */
      $customerForm= Mage::getModel('customer/form');
       $customerForm->setFormCode('customer_account_create')
            ->setEntity($customer);

       $customerData= $customerForm->extractData($this->getRequest());

        if ($this->getRequest()->getParam('is_subscribed', false)) {
            $customer->setIsSubscribed(1);
        }

        /**
         * Initialize customer group id
         */
        $customer->getGroupId();

        if ($this->getRequest()->getPost('create_address')) {
            /* @var $address Mage_Customer_Model_Address */
            $address = Mage::getModel('customer/address');
            /* @var $addressForm Mage_Customer_Model_Form */
            $addressForm = Mage::getModel('customer/form');
            $addressForm->setFormCode('customer_register_address')
                ->setEntity($address);

            $addressData    = $addressForm->extractData($this->getRequest(), 'address', false);
            $addressErrors  = $addressForm->validateData($addressData);
            if ($addressErrors === true) {
                $address->setId(null)
                    ->setIsDefaultBilling($this->getRequest()->getParam('default_billing', false))
                    ->setIsDefaultShipping($this->getRequest()->getParam('default_shipping', false));
                $addressForm->compactData($addressData);
                $customer->addAddress($address);

                $addressErrors = $address->validate();
                if (is_array($addressErrors)) {
                    $errors = array_merge($errors, $addressErrors);
                }
            } else {
                $errors = array_merge($errors, $addressErrors);
            }

        }
        foreach (Mage::getConfig()->getFieldset('customer_account') as $code=>$node) {
                if ($node->is('create') && isset($data[$code])) {
                    switch($code) {
                        case 'email':
                            $data[$code] = trim($data[$code]);
                            echo $email = $data[$code];
                        break;
                        case 'firstname':
                           echo $firstname = $data[$code];
                        break;
                        case 'lastname':
                           echo $lastname = $data[$code];
                        break;
                    }               
                }
            }
        $options= array( "location"=>'http://addres.com/soap.php',"uri"=>'http://addres.com/',"trace"=>1 );
        $user_auth=array ("user_name"=>'name',
        "password"=>md5('password'),
        "version"=>'6.2.4'
        );

        $client=new SoapClient(Null,$options);
        $response=$client->login($user_auth,'name');
        $session_id=$response->id;

        $response=$client->set_entry($session_id,'Leads',array(
        array("name"=>'first_name',"value"=>$firstname),
        array("name"=>'last_name',"value"=>$lastname),
        array("name"=>'email',"value"=>$email)));            

        try {
            $customerErrors = $customerForm->validateData($customerData);
            if ($customerErrors !== true) {
                $errors = array_merge($customerErrors, $errors);
            } else {
                $customerForm->compactData($customerData);
                $customer->setPassword($this->getRequest()->getPost('password'));
                $customer->setConfirmation($this->getRequest()->getPost('confirmation'));
                $customerErrors = $customer->validate();
                if (is_array($customerErrors)) {
                    $errors = array_merge($customerErrors, $errors);
                }
            }

            $validationResult = count($errors) == 0;

            if (true === $validationResult) {
                $customer->save();

                Mage::dispatchEvent('customer_register_success',
                    array('account_controller' => $this, 'customer' => $customer)
                );

                if ($customer->isConfirmationRequired()) {
                    $customer->sendNewAccountEmail(
                        'confirmation',
                        $session->getBeforeAuthUrl(),
                        Mage::app()->getStore()->getId()
                    );
                    $session->addSuccess($this->__('Account confirmation is required. Please, check your email for the confirmation link. To resend the confirmation email please <a href="%s">click here</a>.', Mage::helper('customer')->getEmailConfirmationUrl($customer->getEmail())));
                    $this->_redirectSuccess(Mage::getUrl('*/*/index', array('_secure'=>true)));
                    return;
                } else {
                    $session->setCustomerAsLoggedIn($customer);
                    $url = $this->_welcomeCustomer($customer);
                    $this->_redirectSuccess($url);
                    return;
                }
            } else {
                $session->setCustomerFormData($this->getRequest()->getPost());
                if (is_array($errors)) {
                    foreach ($errors as $errorMessage) {
                        $session->addError($errorMessage);
                    }
                } else {
                    $session->addError($this->__('Invalid customer data'));
                }
            }
        } catch (Mage_Core_Exception $e) {
            $session->setCustomerFormData($this->getRequest()->getPost());
            if ($e->getCode() === Mage_Customer_Model_Customer::EXCEPTION_EMAIL_EXISTS) {
                $url = Mage::getUrl('customer/account/forgotpassword');
                $message = $this->__('There is already an account with this email address. If you are sure that it is your email address, <a href="%s">click here</a> to get your password and access your account.', $url);
                $session->setEscapeMessages(false);
            } else {
                $message = $e->getMessage();
            }
            $session->addError($message);
        } catch (Exception $e) {
            $session->setCustomerFormData($this->getRequest()->getPost())
                ->addException($e, $this->__('Cannot save the customer.'));
        }
    } 

    $this->_redirectError(Mage::getUrl('*/*/create', array('_secure' => true)));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T18:19:04.887

除了覆盖控制器文件，您还可以使用 magento 事件处理。

customer_save_after 是新客户注册后调用的事件。

[http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/events](http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/events)

```
<events>
    <customer_save_after>
        <observers>
            <yournamespace_yourmodule_order_observer>
                <type>singleton</type>
                <class>Yournamespace_Yourmodule_Model_Observer</class>
                <method>sendemail</method>
            </yournamespace_yourmodule_order_observer>
        </observers>
    </customer_save_after>
</events> 
```

这是要包含在模块配置文件中的示例代码

现在在你的模型文件夹中创建一个名为 Observer.php 的文件并输入以下代码：

```
<?php
class Yournamespace_Yourmodule_Model_Observer
{
    public function __construct()
    {
        //Just constrcutor for fun :-)
    }

    public function sendemail($observer)
    {
        //$observer contains the object returns in the event.
        $event = $observer->getEvent();
        $order = $event->getOrder();
        mage::log($order->getId());
        //Write code to send email
        return $this;
     } 
```

}

现在，每当您从 magento 商店的任何地方下订单时，您的 sendemail 功能都会被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:57:40.917

您是否尝试过使用

```
$this->getRequest()->getPost() 
```

我知道对于 magento 的联系表格，它会生成一个看起来像这样的数组 - 可能与创建帐户非常相似。

```
(
    [name] => test
    [email] => test@test.com
    [telephone] => 
    [comment] => test
    [captcha] => Array
        (
            [contact_form] => tttt
        )

    [hideit] => 
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-30T09:19:27.373

这对我有用：

```
// Pass customer information from Magento to SugarCRM
$customer_info = array(array('name' => 'first_name', 'value' => $this->getRequest()->getPost('firstname')),
                   array('name' => 'last_name', 'value' => $this->getRequest()->getPost('lastname')),
                   array('name' => 'email2', 'value' => $this->getRequest()->getPost('email')));

$response = $client->set_entry($session_id, 'Leads', $customer_info); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T06:50:35.263

您可以使用以下代码覆盖`Mage_Customer_AccountController`和更改`createPostAction`可以获取客户字段的位置：

```
    foreach (Mage::getConfig()->getFieldset('customer_account') as $code=>$node) {
        if ($node->is('create') && isset($data[$code])) {
            开关（$代码）{
                案例“电子邮件”：
                    $data[$code] = trim($data[$code]);
                    $email = $data[$code];
                休息;
                案例“名字”：
                    $firstname = $data[$code];
                休息;
                案例“姓氏”：
                    $lastname = $data[$code];
                休息;
            }               
        }
    }

```

您可以将派生变量传递到您的方法中以进一步处理。

# drupal - Drupal 主题 $page['content']

> ID：15780191
> 
> 赞同：1
> 
> 时间：2013-04-03T06:18:41.037
> 
> 标签：drupal, drupal-7, drupal-theming

我是 Drupal 的新手，我无法在互联网上的任何地方找到答案，甚至无法找到我应该学习的广泛类别以了解它是如何工作的。

在我的页面模板文件中，我看到如下内容：

```
 <section id="content" class="span<?php print $content_cols ?>">
    <?php print render($page['content']) ?>
  </section> 
```

打印出来的是这样的怪物：

```
<section id="content" class="span9">
<div class="region region-content">
  <div id="block-system-main" class="block block-system">
    <div class="content">
      <div id="node-46" class="node node-article node-promoted clearfix" about="/node/46" typeof="sioc:Item foaf:Document">
        <div class="submitted">
          <span property="dc:date dc:created" content="2013-04-03T04:17:33+11:00" datatype="xsd:dateTime" rel="sioc:has_creator">Submitted by <a href="/user/1" title="View user profile." class="username" xml:lang="" about="/user/1" typeof="sioc:UserAccount" property="foaf:name">jimjo</a> on Wed, 04/03/2013 - 04:17</span>
        </div>
        <div class="content">
          <div class="field field-name-field-image field-type-image field-label-hidden">
            <div class="field-items">
              <div class="field-item even" rel="og:image rdfs:seeAlso" resource="http://localhost:8888/sites/default/files/styles/large/public/field/image/imagefield_q6bw6x.png?itok=RfIKEaZX">
                <img typeof="foaf:Image" src="http://localhost:8888/sites/default/files/styles/large/public/field/image/imagefield_q6bw6x.png?itok=RfIKEaZX" width="422" height="197" alt="Enim incassum letalis mauris neo praesent quia rusticus venio vero." title="Brevitas esse qui ratis volutpat ymo.">
              </div>
            </div>
          </div>
          <div class="field field-name-body field-type-text-with-summary field-label-hidden">
            <div class="field-items">
              <div class="field-item even" property="content:encoded">
                <p>
                  ARTICLE CONTENT GOES HERE
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</section> 
```

我想编辑`$page['content']`渲染的方式，这样我就可以更好地控制类名（并且可能会清除一些不必要的 div）。但是，我想不出一种方法来控制这个输出。

最好的方法是什么？使用自定义模板文件？在某个地方我可以看到 Drupal 用来创建的标记，`$page['content']`以便我可以将其用作指南并对其进行一些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:52:33.557

看来您正在寻找`node.tpl.php`模板。

原始的 node.tpl.php 位于其中，`/modules/node/node.tpl.php`尽管您肯定会看到您设置的默认主题提供的一个。

覆盖它的最佳方法是`node.tpl.php`在您的自定义主题中创建一个。

如果您想了解更多模板覆盖的原理，可以使用[Theme 开发者](http://drupal.org/project/devel_themer)模块。

这里也是[drupal.org 文档](http://drupal.org/node/1089656)的链接。

# android - 元素类型“item”必须由匹配的结束标签“”终止

> ID：15780192
> 
> 赞同：2
> 
> 时间：2013-04-03T06:18:46.993
> 
> 标签：android, android-layout, android-xml

array.xml 给我错误**元素类型“item”必须由匹配的结束标记终止“”**无法找到哪个标签没有被匹配的结束标记终止。

```
 <item>apples </item>
 <item>apricot</item>
 <item>avocado </item>

 <item>banana</item>
 <item>blackberry</item>
 <item>blueberry </item>

 <item>cantaloupe</item>
 <item>casaba melon</item> 
 <item>charentais </item>
 <item>cherry </item>
 <item>clementine</item>

 <item>damsons</item>
 <item>dates</item> 
 <item>durian</item> 

 <item>eggplant</item>

 <item>figs</item> 
 <item>fresh orange </item>

 <item>galia melon</item>
 <item>golden watermelon</item>
 <item>gooseberry</item>
<item>grapefruit </item>
 <item>green kadota fig</item> 
 <item>guava</item>

 <item>honey dew melon</item> 
 <item>huckleberry</item>

 <item>jackfruit</item>
 <item>jamun</item>

 <item>kiwi</item>
 <item>kumquat</item>

 <item>lemon </item>
 <item>lime</item>
 <item>lychee</item>

 <item>mango</item>
 <item>musk melon</item>

 <item>nectarine </item>
 <item>peaches</item>
 <item>pear</item>
 <item>persian melon</item> 
 <item>pineapple</item>
 <item>plum</item> 
 <item>pomegranate</item>
 <item>prunes</item> 

 <item>raisin</item>
 <item>rambutan</item> 
 <item>raspberry </item>
 <item>red currant</item> 
 <item>red grapes</item>
 <item>strawberry</item>
 <item>sugar baby watermelon</item>
<item>tangerine</item> 
 <item>tiger watermelon</item>
 <item>tomato</item> 
<item>watermelon</item>
 </string-array> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T06:21:38.803

在“桃子”之后，使用`&gt;`代替`>`. 这是[XML 标准](http://www.w3.org/XML/)所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:22:16.990

这是：

```
<item>charentais <item> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T06:25:03.940

行号 12

```
<item>charentais <item> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T06:34:08.093

```
<item>charentais <item> 
```

像这样正确关闭它

```
<item>charentais </item> 
```

# c++ - winapi c++窗口不小于

> ID：15780197
> 
> 赞同：0
> 
> 时间：2013-04-03T06:19:07.757
> 
> 标签：c++, winapi, window, size

我在 C++ 中为我的程序创建了一个主窗口，我使用了 mingw

```
hwnd = CreateWindowExW(
        WS_EX_CLIENTEDGE,
        (LPCWSTR)szClassName,
        title,
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        1250,       // width
        700,        // height
        HWND_DESKTOP,
        NULL,
        hInstance,
        NULL
    ); 
```

这个窗口很大，还可以。但是我怎样才能制作一个具有最小宽度和最小高度的窗口。所以我的意思是窗口不小于，例如：500 * 500。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T06:23:42.963

处理 WM_GETMINMAXINFO，示例代码：

```
LRESULT HandledWidget::onGetMinMaxInfo( WPARAM wParam, LPARAM lParam, bool &bHandled )
{
    MINMAXINFO* mmi = (MINMAXINFO*)lParam;
    bHandled = false;
    if (m_minWidth != -1) {
        bHandled = true;
        mmi->ptMinTrackSize.x = m_minWidth;
    }
    if (m_minHeight != -1) {
        bHandled = true;
        mmi->ptMinTrackSize.y = m_minHeight;
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:23:08.063

处理 WM_GETMINMAXINFO 消息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms632626%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632626%28v=vs.85%29.aspx)

在消息处理程序中，`lParam`指向`MINMAXINFO`包含`POINT ptMinTrackSize`成员的结构。用所需的大小填充它。

# ruby-on-rails - 未定义的方法`paypal_url'

> ID：15780198
> 
> 赞同：0
> 
> 时间：2013-04-03T06:19:07.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在我的应用程序中开发支付系统。为此，我参考了 railcasts ep-141，我按照剧集执行了所有步骤，但我收到了这个错误

```
undefined method `paypal_url' 
```

我试过了，但没有找到答案。

这里我有 BookingDetail madel 如下

```
class BookingDetail < ActiveRecord::Base

belongs_to :room
attr_accessible :member_type_id, :room_type_id, :start_date, :end_date, :room_rate_id, :room_no, :customer_id, :room_id

def total_price
room_type.to_a.sum(&:room_rate)
end

def paypal_url(return_url)
    values = {
      :business => '',
      :cmd => '_cart',
      :upload => 1,
      :return => return_url,
      :invoice => id
    }
    room_type.each_with_index do |item, index|
      values.merge!({
    "room_rate_#{index+1}" => item.room_rate,
    "room_type_#{index+1}" => item.room_type,
    "room_id_#{index+1}" => item.room_rate.room_id,
    "quantity_#{index+1}" => item.quantity
      })
    end
    "https://www.sandbox.paypal.com/cgi-bin/webscr?" + values.to_query
end 
```

结尾

这条线给了我错误

```
 <%=link_to "Checkout",@room.paypal_url(rooms_url)%> 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:28:35.360

`paypal_url`不是一种方法，`Room`因为我认为它是一种方法，`BookingDetail`因此您需要执行以下操作

```
@room.booking_detail.paypal_url(rooms_url) 
```

代替

```
@room.paypal_url(rooms_url) 
```

`Room`假设您在模型中有以下内容

has_one :booking_detail

再次，答案取决于你的`Room`模型里面有什么

# perl - 这个 Perl 单行需要解释

> ID：15780202
> 
> 赞同：0
> 
> 时间：2013-04-03T06:19:18.243
> 
> 标签：perl

我在 Perl 中尝试了一个程序来删除重复的条目。说

```
File : abc
11
22
11
11
22
33 
```

输出应该是：

```
11
22
33 
```

Perl[单行程序](https://en.wikipedia.org/wiki/One-liner_program)使我的工作变得轻松。但我无法理解。它的：

```
cat abc | perl -ne '$H{$_}++ or print' 
```

有了一些基本知识，我假设“ abc 的输出正在逐行传递，他们正在将其推入哈希中......但是`-ne`代表什么？他们为什么使用`++`？`or`声明是什么？解释是什么？

有没有办法我也可以找到出现的次数？

```
11 - 3
22 - 2
33 - 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:07:12.637

到目前为止，您是正确的。这会将文件通过管道传输`abc`到`perl`使用哈希的命令。要理解这个`-ne`论点，请将其与几乎等效的代码进行比较，

```
while (<>){
    $H{$_}++ or print $_
} 
```

明确地说，我也`print`改为`print $_`.

现在这种单线工作的原因是因为当通过做增加哈希中键的值时`$H{$_}++`，我们得到了键关联值的返回值。

当我们第一次遇到一个键（来自 的行`abc`）时，它在哈希中的值默认为`0`。因此，该`or`子句尚未满足，它将继续`print $_`（打印该行）。但是在任何后续我们遇到一个键时，它的返回值都会是`>0`，因此`or`子句会*短路*，因为 Perl 中的任何正整数的计算结果都是`true`。

有趣的是，如果我们这样写，这个单行将**不起作用：**

```
cat abc | perl -ne '++$H{$_} or print' 
```

那是因为这里我们是*预递增的，递增**后*会返回值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T07:10:57.083

命令行选项 -n 围绕您的 -e 代码循环。如果您键入以下内容：

```
 $ perl -n -e 'some code' file 
```

然后 Perl 会将其解释为：

```
 LINE:
    while (<>) {
      # your code goes here, each iteration reads 
      # from file and puts into $_ variable
    } 
```

您的示例中的文件是 cat 命令的管道输出。

```
$H{$_}++ or print $_; 
```

这将创建一个以文件行作为键的哈希。如果键不存在，它分配 1 值，否则后递增 in。第一次 ($H{$_}++) 被评估为 false，因此 Perl 执行 or-right 语句。它与以下内容相同：

```
print $_ unless $H{$_}++; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:30:16.757

计数示例：

```
cat abc | perl -nle'$H{$_}++ ; END { for (keys %H) { print "$_ - $H{$_}" } }' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:27:20.327

开关的`ne`意思是：

> -e = 此命令行开关允许您从命令行运行代码，而不必将程序写入文件然后执行它。
> 
> -n = 这个命令行开关允许你对标准输入的每一行运行一个程序（通常用 -e 指定）。

所以这就是逐行输出的处理方式。

现在，如果新值出现，则对于散列，因为它不存在被打印，但下一次递增并且由于 or 条件而不会打印该值。

为了找到出现的次数，我不确定用 perl 做一个衬里，脚本会很容易。

你也可以非常简单地在 linux 中使用 sort 和 uniq：

```
cat abc |sort | uniq -c 
```

# c - 请解释这个程序背后的逻辑，它使用递归来计算 a^b（a 的 b 次幂）

> ID：15780203
> 
> 赞同：4
> 
> 时间：2013-04-03T06:19:24.640
> 
> 标签：c

真的很尴尬！！我只是不明白下面这个小程序的工作原理，它使用递归来计算数字“a”的幂（“a”提升到“b”的幂）。请解释一下背后使用的逻辑函数。我不明白“x*x”参数、n​​/2 参数和“n 模 2”部分的用法。请为我剖析。

```
 #include<stdio.h>

    int foo(int,int);

    int main() {
      int a,b;

      printf("Enter number a and its power b\n");
      scanf("%d%d",&a,&b);

      printf("a raised to b is %d", foo(a,b));
      return 0;
    }

    int foo ( int x , int n) {
      int val=1;

      if(n>0) {
        if (n%2 == 1) 
          val = val *x;
        val = val * foo(x*x , n/2);
      }

      return val;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T06:29:07.277

这个递归背后的想法是 a ^b = (a ² ) ^(b/2)和 a ^b = a(a ² ) ^((b-1)/2)。

根据 b 是奇数还是偶数（这就是`n%2 == 1`部分），您可以选择其中一个公式来确保 b/2 或 (b-1)/2 仍然是整数。请注意，`n/2`您的代码中的实际是 (n-1)/2 表示奇数 n，因为整数除法会自动向下舍入。

由于指数随着每一步而变小，因此递归终止。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T06:30:39.180

这利用了这样一个事实，例如，幂`x^23`可以重写为`x^16 * x^4 * x^2 * x^1`

现在计算`x^16`相当容易，因为它只是`(((x^2)^2)^2)^2`4 次乘法而不是计算`x * x * x * ... 16 times ... * x`。

现在请注意，在计算时，`x^16`您还遇到了计算数字所需的问题。所以最后，你只计算了 7 次乘法而不是 22 次。`x^4``x^2``x^23`

现在`n % 2`和`n / 2`进入图片的地方是决定 2 的幂是否在 n 中（在我们的示例中，在 23 的二进制表示中是 8 吗？否）。

因此，您只需遍历 n 的位。您每次都将 x 平方，如果您正在查看的当前 n 位中有 1，则将平方数乘以结果。

更新：

以这种方式写出数字的诀窍是以`n`二进制形式查看。23 是 10111 [2]，或者我们可以写出位值`23 = 1*16 + 0*8 + 1*4 + 1*2 + 1*1`。

这意味着`x^23 = x^(16 + 4 + 2 + 1)`并感谢指数定律，`= x^16 * x^4 * x^2 * x^1`这是我们开始的。

作为另一个简单的例子：采取`x^44`. 我们把它写成二进制 101100 [2]所以我们可以说

```
44  =  1*32 + 0*16 + 1*8 + 1*4 + 0*2 + 0*1  =  32 + 8 + 4 
```

所以

```
x^44 = x^(32 + 8 + 4) = x^32 * x^8 * x^4 
```

然后我们计算以下

```
1:   x^2  = (x)^2                     (from the x we are given)
2:   x^4  = (x^2)^2                   (x^2 from step 1)
3:   x^8  = (x^4)^2                   (x^4 from step 2)
4:   x^16 = (x^8)^2                   (x^8 from step 3)
5:   x^32 = (x^16)^2                  (x^16 from step 4)
6:   x^44 = (x^32) * (x^8) * (x^4)    (using results of steps 2, 3, and 5) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T06:30:18.437

正如你所说，`foo`递归工作。为什么不一步一步来呢？假设`a==2`和`b==3`，你得到

第一步

```
int foo ( int x , int n) // x == 2, n==3
{
int val=1;

if(n>0) // n == 3, true!
{
    if (n%2 == 1) //true!
    val = val *x; // val = 1 * 2;
    val = val * foo(x*x , n/2); // next step
}

return val;
} 
```

第二步

```
int foo ( int x , int n) // x == 4, n==1
{
int val=1;

if(n>0) // n == 1, true!
{
    if (n%2 == 1) //true
    val = val *x; val = 1 * 4;
    val = val * foo(x*x , n/2); // next step -> 4 * ...
}

return val;
} 
```

在第二步中，您返回 4 在第一步中产生

```
val = val * foo(x*x , n/2); // 2 * 4 in the first step and this equals 8 
```

# jquery - 目的 ＃ 没有“空”方法

> ID：15780206
> 
> 赞同：0
> 
> 时间：2013-04-03T06:19:43.400
> 
> 标签：jquery

我对此很困惑。我正在使用 jquery 1.9.1 将 div 的内部 html 附加到另一个 div。但是当尝试使用 chrome 开发人员工具进行调试时，它在 jquery 库中给了我这个错误。

我的HTML：

```
<body>
    <s:form action="/save" method="POST">
        <div class="educationForm">
            <div class="educations">
                <label>Position</label>
                <input type="text" name="educations[0].index" value="1" />
                <br/>
                <label>School</label>
                <input type="text" name="educations[0].school" />
                <br/>
                <label>Degree</label>
                <input type="text" name="educations[0].degree" />
                <br/>
                <label>GPA</label>
                <input type="text" name="educations[0].scored" />
                <br/>
                <label>Start Date</label>
                <input type="text" name="educations[0].startDate" />
                <br/>
                <label>End Date</label>
                <input type="text" name="educations[0].endDate" />
                <br/>
            </div>
        </div>  <a href="#" id="addButton">Add new Edu</a>

        <input type="submit" value="Save" />
    </s:form>
    <div class="template_educations" style="display:none">
        <div class="educations">
            <label>Position</label>
            <input type="text" name="educations[_X_].index" />
            <br/>
            <label>School</label>
            <input type="text" name="educations[_X_].school" />
            <br/>
            <label>Degree</label>
            <input type="text" name="educations[_X_].degree" />
            <br/>
            <label>GPA</label>
            <input type="text" name="educations[_X_].scored" />
            <br/>
            <label>Start Date</label>
            <input type="text" name="educations[_X_].startDate" />
            <br/>
            <label>End Date</label>
            <input type="text" name="educations[_X_].endDate" />
            <br/>
        </div>
    </div>
</body> 
```

我的js：

```
$(document).ready(function(){
    $("#addButton").click(function(event){
        event.preventDefault();
        $(".educationForm").append($(".template_educations").html);
        $(".educationForm").children(".educations").last().children("input").each(function(){           
            var count = $(".educationForm").children(".education").length();
            var value = $(this).attr("name");
            value.replace("_X_", count + 1);
            $(this).attr("name", value);
        });         
    });
}); 
```

请帮助我确定这是 jquery 库中的错误还是我的代码有问题，因为我没有`empty`在代码中使用任何函数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T06:20:25.517

它应该是.. 而`html()`不是`html`..

```
....
$(".educationForm").append($(".template_educations").html());
....                                                 //--^^---here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:24:05.820

使用这条线

```
 $(".educationForm").append($(".template_educations").html); 
```

就像

```
 $(".educationForm").append($(".template_educations").html()); 
```

# java - oracle ucm：如何获取用户组和角色列表？

> ID：15780209
> 
> 赞同：0
> 
> 时间：2013-04-03T06:19:57.323
> 
> 标签：java, oracle-ucm

我想获取包含 Oracle Universal Content 管理中用户的所有组和角色的列表。

例如：如果用户是 weblogic，组：管理员角色：经理，管理员等

我试过：

主题主题 = Security.getCurrentSubject();

设置 prin=subject.getPrincipals();

但是只有这个组。请提供一个代码片段来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:47:30.360

列出一个组的成员是可能的，因为一个组有一个定义的成员列表

角色是不同的——角色定义了一组规则，可以评估这些规则以确定用户是否是成员。角色的成员资格可能会在一周中的某一天发生变化。

因此，要查看某个用户的角色，您必须检查每个角色。类似于此处描述的内容：

[http://blog.watashii.com/2010/06/weblogic-portal-authorization-get-and-check-users-roles/](http://blog.watashii.com/2010/06/weblogic-portal-authorization-get-and-check-users-roles/)

如果您已经知道所有角色（并将它们放在列表中），您可以简单地遍历列表并执行以下操作：

```
request.isUserInRole("xxxxx") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:12:10.690

UserData userData = (UserData)context.getCachedObject("TargetUserData"); 矢量角色列表 = SecurityUtils.getRoleList(userData);

# python - Python openCV检测平行线

> ID：15780210
> 
> 赞同：11
> 
> 时间：2013-04-03T06:20:03.890
> 
> 标签：python, opencv, hough-transform

我有一张图片，里面有一些形状。我使用霍夫线检测到线。如何检测哪些线是平行的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-03T06:53:37.937

笛卡尔坐标中的直线方程：

y = k * x + b

两条线 y = k1 * x + b1，y = k2 * x + b2 是平行的，如果 k1 = k2。

因此，您需要为每条检测到的线计算系数 k。

为了**唯一**标识一条线的方程，您需要知道属于该线的**两点的坐标。**

在找到带有 HoughLines (С++) 的行之后：

```
vector<Vec2f> lines;
HoughLines(dst, lines, 1, CV_PI/180, 100, 0, 0 ); 
```

你有矢量线，它将检测到的线的参数（r，theta）存储在极坐标中。您需要在笛卡尔坐标中传输它们：

这里是 C++ 中的示例：

```
for( size_t i = 0; i < lines.size(); i++ )
{
  float rho = lines[i][0], theta = lines[i][1];
  Point pt1, pt2;
  double a = cos(theta), b = sin(theta);
  double x0 = a*rho, y0 = b*rho;
  pt1.x = cvRound(x0 + 1000*(-b)); //the first point
  pt1.y = cvRound(y0 + 1000*(a)); //the first point
  pt2.x = cvRound(x0 - 1000*(-b)); //the second point
  pt2.y = cvRound(y0 - 1000*(a)); //the second point
} 
```

在得到一条线的这两个点后，您可以计算它的方程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-12T20:48:08.583

HoughLines 以极坐标返回其结果。所以只需检查角度的第二个值。无需转换为 x,y

```
def findparallel(lines):

lines1 = []
for i in range(len(lines)):
    for j in range(len(lines)):
        if (i == j):continue
        if (abs(lines[i][1] - lines[j][1]) == 0):          
             #You've found a parallel line!
             lines1.append((i,j))

return lines1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-10-26T11:39:56.010

正如约翰提出的，最简单的方法是检测相似的角度。OpenCVs HoughLines 函数通过它到原点的距离和角度来表示一条线。

[![在此处输入图像描述](https://i.stack.imgur.com/1qPUh.png)](https://i.stack.imgur.com/1qPUh.png)

所以你基本上可以做的是用**层次聚类算法**对不同的角度进行聚类：

```
from scipy.spatial.distance import pdist
from scipy.cluster.hierarchy import ward, fcluster    

img = cv2.imread('images/img01.bmp')
img_canny = cv2.Canny(img, 50, 200, 3)

lines = cv2.HoughLines(img_canny, 1, 5* np.pi / 180, 150)

def find_parallel_lines(lines):

    lines_ = lines[:, 0, :]
    angle = lines_[:, 1]

    # Perform hierarchical clustering

    angle_ = angle[..., np.newaxis]
    y = pdist(angle_)
    Z = ward(y)
    cluster = fcluster(Z, 0.5, criterion='distance')

    parallel_lines = []
    for i in range(cluster.min(), cluster.max() + 1):
        temp = lines[np.where(cluster == i)]
        parallel_lines.append(temp.copy())

    return parallel_lines 
```

# c - 如何仅在递归函数调用中第一次调用另一个函数？

> ID：15780212
> 
> 赞同：1
> 
> 时间：2013-04-03T06:20:11.910
> 
> 标签：c

我想调用“function2();” 仅在第一次调用 recurfunc() 时才出现。

```
recurfunc()
{
    function2();     //to be called first time only in a recursive function
    static int i= 0;
    i++;

    if(i>20)
        return;
    else
    recurfunc();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T06:22:25.943

对您的代码进行微不足道的更改：

```
void recurfunc()         // * Remember to specify return type *
{
    static int i= 0;

    if (i==0)
        function2();     // called only the first time.

    i++;

    if(i>20)
        return;
    else
        recurfunc();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T06:23:03.577

使用辅助函数：

```
void recurfunc() {
   function2();
   helperRecurFunc();
} 
```

`helperRecurFunc()`没有调用的原始方法在哪里`func2()`

# linux - 目录不可写吗

> ID：15780214
> 
> 赞同：2
> 
> 时间：2013-04-03T06:20:12.533
> 
> 标签：linux, bash, shell, testing, writable

谁能告诉我为什么总是说目录不可写，而绝对是不可写的？

```
    $dnam="/home/bryan/renametest/CD"

    # 目录是否可写
    错误=0
    如果 [ ！-w $dnam]
    然后
        # 不可写。弹出错误并退出。
        echo "目录 $dnam 不可写"
        错误=1
    菲

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T06:54:56.673

你需要双引号`$dnam`- 没有它们，它会被解释为两个单独的 shell 单词，“/home/bryan/renametest/C”和“D”，这会产生无效的测试表达式并因此失败。这应该有效：

```
if [ ! -w "$dnam" ] 
```

@tink 的建议`[[ ]]`是进行此类测试的一种更简洁的方法，但仅适用于 bash（以及其他一些具有扩展语法的 shell）。您得到的事实`[[: not found`意味着您使用的是相当基本的 shell，而不是 bash。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T14:23:15.763

我看到多个问题：

*   您在变量中使用了一个空格。这不是非法的，但在组合行中，您使用变量 unscaped 并生成以下命令：

    ```
    if [ ! -w /home/bryan/renametest/C D ] 
    ```

    这不是有效的语法。解决此问题的最简单方法是将行更改为

    ```
    if [ ! -w "$dnam" ] 
    ```

*   下一个问题更糟：在我的系统上，`help test`返回文本：

    ```
    -w FILE        True if the file is writable by you. 
    ```

    这意味着，该命令不支持目录，而只支持文件。如果要检查目录是否可写，则必须使用不同的命令

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T14:56:13.240

正如其他人所说，`$dnam`变量需要双引号。原因如下：

`[ ... ]`是命令的别名`test`。如果你查看你的系统，你会看到一个名为`/bin/[`或者可能是`/bin/usr/[`. `/bin/test`在某些系统上，这是指向or的硬链接`/bin/usr/test`。该`if`语句*执行*之后的内容`if`，如果该命令返回零退出状态，则该`if`语句将执行该`then`子句。否则，如果有一个`else`子句，它将执行。

为了进行布尔测试，Unix 包含了这个`test`命令，所以你可以这样做：

```
if test -d "$directory"
then
    echo "Directory $directory exists!"
fi 
```

后来，`/bin/[`添加了作为语法糖。这与上面的相同：

```
if [ -d "$directory" ]
then
    echo "Directory $directory exists!"
fi 
```

现在，两者`[`和`test`都是内置命令，但它们仍然是***still**命令。这意味着 shell 会插入命令然后执行它。

尝试执行以下操作：

```
$ set -xv    # Turns on shell debugging
$ dnam="/home/bryan/renametest/C D"
dnam="/home/bryan/renametest/C D"
+ dnam='/home/bryan/renametest/C D'
$ test -d $dnam 
test -d $dnam
+ test -d /home/bryan/renametest/C D
$ echo $?
echo $?
+ echo 1
1
$ test -d "$dnam"   # Now with quotes
test -d $dnam
+ test -d "/home/bryan/renametest/C D"
$ echo $?
echo $?
+ echo 0
0
$ set +xv     # Turn off the debuggin 
```

每个命令都回显两次。第一次写入，第二次插入行后。作为插值的一部分，shell 在空白处分割参数。如您所见，该`test`命令正在测试`/home/bryan/renamtest/C`不存在因此不可写的存在。我实际上很惊讶该`test`命令没有打印错误消息，因为您向它传递了一个额外的参数。

在第二次尝试中，您添加了引号。这些引号防止 shell 将您的参数拆分为空间并将目录名称保留为单个参数。

既然`[ ... ]`是命令，就得考虑到shell对变量的插值等问题。而且，如果您不是非常小心，最终可能会出现错误。

更糟糕的是，有时`[ ... ]`可能会起作用，有时可能不起作用。如果您的目录名称不包含空格，它将按预期工作。想象一下，您正在编写一个程序，并且您对其进行测试并且一切正常，因为您尝试过的所有目录都没有空格。然后，有人使用您的程序，但在目录中有空间。大量的 shell 脚本错误是针对`if`语句中的此类问题。

这就是 Bash 引入`[[ ... ]]`测试的原因。`[[`不是命令，而是声明。这意味着外壳不会直接对结果进行插值。相反，参数被解析，然后进行任何插值。因此，这将起作用：

```
dnam="/home/bryan/renametest/C D"   # No "$" in front of the variable!

# Is the directory writable
if [[ ! -w $dnam ]]      # No quotation marks needed!
then
    # Not writable. Pop the error and exit.
    echo "Directory $dnam is not writable"
    err=1
fi 
```

使用测试几乎总是比使用`[[ ... ]]`测试更好`[ ... ]`，所以继续养成习惯。

还有一个小错误，你有：

```
$dnam="/home/bryan/renametest/C D" 
```

这由 shell 进行插值，因此设置的变量是`$dnam`恰好是的值。如果`$dnam`碰巧等于“foo”，你会这样做：

```
foo="/home/bryan/renametest/C D" 
```

不是你想要的。

`$`当您设置变量时，您希望保持关闭：

```
dnam="/home/bryan/renametest/C D" 
```

# python - python替换反斜杠

> ID：15780218
> 
> 赞同：0
> 
> 时间：2013-04-03T06:20:26.590
> 
> 标签：python, regex, string, encoding

我正在尝试实现一个简单的帮助类来与 java-properties 文件进行交互。摆弄多行属性我遇到了一个问题，我无法解决，也许你可以？

类中的单元测试首先将跨越两行的多行属性写入属性文件，然后重新读取它并检查是否相等。那行得通。现在，如果我使用该类向属性添加第三行，它会使用我无法解释的额外反斜杠重新读取它。

这是我的代码：

```
#!/usr/bin/env python3
# -*- coding=UTF-8 -*-

import codecs
import os, re
import fileinput
import unittest

class ConfigParser:
    reProp = re.compile(r'^(?P<key>[\.\w]+)=(?P<value>.*?)(?P<ext>[\\]?)$')
    rePropExt = re.compile(r'(?P<value>.*?)(?P<ext>[\\]?)$')
    files = []

    def __init__(self, pathes=[]):
       for path in pathes:
           if os.path.isfile(path):
               self.files.append(path)

    def getOptions(self):
        result = {}
        key = ''
        val = ''

        with fileinput.input(self.files, inplace=False) as fi:
            for line in fi:
                m = self.reProp.match(line.strip())
                if m:
                    key = m.group('key')
                    val = m.group('value')
                    result[key] = val
                else:
                    m = self.rePropExt.match(line.rstrip())
                    if m:
                        val = '\n'.join((val, m.group('value')))
                        result[key] = val

        fi.close()
        return result

    def setOptions(self, updates={}):
        options = self.getOptions()
        options.update(updates)

        with fileinput.input(self.files, inplace=True) as fi:
            for line in fi:
                m = self.reProp.match(line.strip())
                if m:
                    key = m.group('key')
                    nval = options[key]
                    nval = nval.replace('\n', '\\\n')
                    print('{}={}'.format(key,nval))

            fi.close()        

class test(unittest.TestCase):
    files = ['test.properties']
    props = {'test.m.a' : 'Johnson\nTanaka'}

    def setUp(self):
        for file in self.files:
            f = codecs.open(file, encoding='utf-8', mode='w')
            for key in self.props.keys():
                val = self.props[key]
                val = re.sub('\n', '\\\n', val)
                f.write(key + '=' + val)
            f.close()

    def teardown(self):
        pass

    def test_read(self):
        c = configparser(self.files) 
        for file in self.files:
            for key in self.props.keys():
                result = c.getOptions()
                self.assertEqual(result[key],self.props[key])

    def test_write(self):
        c = ConfigParser(self.files)
        changes = {}
        for key in self.props.keys():
            changes[key] = self.change_value(self.props[key])

        c.setOptions(changes)       
        result = c.getOptions()
        print('changes: ')
        print(changes)
        print('result: ')
        print(result)
        for key in changes.keys():
            self.assertEqual(result[key],changes[key],msg=key)

    def change_value(self, value):
        return 'Smith\nJohnson\nTanaka'

if __name__ == '__main__':
    unittest.main() 
```

测试运行的输出：

```
C:\pyt>propertyfileparser.py
changes:
{'test.m.a': 'Smith\nJohnson\nTanaka'}
result:
{'test.m.a': 'Smith\nJohnson\\\nTanaka'} 
```

欢迎任何提示...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:34:55.527

由于您在写作时在换行符前添加了反斜杠，因此您在阅读时也必须将其删除。取消注释将 '\n' 替换为 '\\n' 的行可以解决问题，但我希望这也意味着文件语法不正确。

这只发生在第二个换行符的情况下，因为你将值分成一个“椭圆”和一个“nval”，其中“椭圆”是第一行，“nval”是其余的，你只做替换价值。

使用正则表达式替换来替换不是正则表达式的东西也是矫枉过正的。您可以使用 val.replace('\n', '\\n') 代替。

我会以非常不同的方式做这个解析器。好吧，首先，我根本不会这样做，我会使用现有的解析器，但如果我这样做了，我会在处理行延续问题时逐行读取文件，这样我就有了列表中的每个项目恰好有一个值。然后我会用正则表达式将每个项目解析为一个键和一个值，并将其粘贴到字典中。

相反，您分别解析每一行并将续行连接到解析后的值，这在 IMO 是完全倒退的。

# c# - 如何从 Web 服务方法返回多维数组？

> ID：15780222
> 
> 赞同：0
> 
> 时间：2013-04-03T06:20:38.817
> 
> 标签：c#, arrays, web-services

```
[WebMethod]
public  Object  GetAllItemsArray() 
{
        FoodCityData.ShoppingBuddyEntities fdContext = new FoodCityData.ShoppingBuddyEntities();

        IQueryable<Item> Query =
       from c in fdContext.Item
       select c;

        List<Item> AllfNames = Query.ToList();
        int arrayZise = AllfNames.Count;
        String[,] xx = new String[arrayZise,2];
        int i = 0;
        int j = 0;
        foreach(Item x in AllfNames)
        {

                xx[i,0] = x.ItemName.ToString();
                xx[i, 1] = x.ItemPrice.ToString();
                i++;
        }

         return (Object)xx;
    } 
```

我想从这个 Web 服务返回一个多维数组，我该怎么做？

此代码给出错误

实际上，这个 Web 服务是从 android 应用程序调用的，这就是我将这些数据作为多维数组返回的原因。

**错误是：**

```
System.InvalidOperationException: There was an error generating the XML document. ---> System.NotSupportedException: Cannot serialize object of type System.String[,]. Multidimensional arrays are not supported.
   at System.Xml.Serialization.TypeDesc.CheckSupported()
   at System.Xml.Serialization.TypeScope.GetTypeDesc(Type type, MemberInfo source, Boolean directReference, Boolean throwOnError)
   at System.Xml.Serialization.XmlSerializationWriter.CreateUnknownTypeException(Type type)
   at System.Xml.Serialization.XmlSerializationWriter.WriteTypedPrimitive(String name, String ns, Object o, Boolean xsiType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write1_Object(String n, String ns, Object o, Boolean isNullable, Boolean needType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write5_anyType(Object o)
   at Microsoft.Xml.Serialization.GeneratedAssembly.ObjectSerializer.Serialize(Object objectToSerialize, XmlSerializationWriter writer)
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
   --- End of inner exception stack trace ---
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
   at System.Xml.Serialization.XmlSerializer.Serialize(TextWriter textWriter, Object o, XmlSerializerNamespaces namespaces)
   at System.Xml.Serialization.XmlSerializer.Serialize(TextWriter textWriter, Object o)
   at System.Web.Services.Protocols.XmlReturnWriter.Write(HttpResponse response, Stream outputStream, Object returnValue)
   at System.Web.Services.Protocols.HttpServerProtocol.WriteReturns(Object[] returnValues, Stream outputStream)
   at System.Web.Services.Protocols.WebServiceHandler.WriteReturns(Object[] returnValues)
   at System.Web.Services.Protocols.WebServiceHandler.Invoke() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:23:05.873

根据您[之前的问题](https://stackoverflow.com/questions/15779873/string-array-type-method-return-type-error)和您在答案下方的评论中指定的错误，我相信您应该返回一个[锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)，例如：

```
[WebMethod]
public  string[][]  GetAllItemsArray() 
{
        FoodCityData.ShoppingBuddyEntities fdContext = new FoodCityData.ShoppingBuddyEntities();

        IQueryable<Item> Query =
       from c in fdContext.Item
       select c;

        List<Item> AllfNames = Query.ToList();
        int arrayZise = AllfNames.Count;
        String[][] xx = new String[arrayZise][2]; //change here
        int i = 0;
        int j = 0;
        foreach(Item x in AllfNames)
        {

                xx[i][0] = x.ItemName.ToString();
                xx[i][1] = x.ItemPrice.ToString();
                i++;
        }

         return xx;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:27:58.797

您在问题异常中有答案 -**不支持多维数组。在 System.Xml.Serialization。**您必须以某种不同的方式返回它 - 锯齿状数组或编写自己的序列化程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T16:05:32.243

一年后我遇到了同样的问题，但我寻找了几种解决方案，如果你想返回 JSON 或 XML，那么你只需要调用一个序列化程序。我创建了一个 Dictionary 对象并返回它。它在网页中运行良好，但不适用于 Web 服务。所以经过一番寻找后，我找到了这个 Json Object 序列化器。我只需要将我的对象传递给 JsonConvert(SerializeObject) 并且 whalla JSON 会返回并且 Web 服务可以正常工作！这是一个很棒的包：http: [//james.newtonking.com/json](http://james.newtonking.com/json)。

# delphi - 防止日期不匹配

> ID：15780223
> 
> 赞同：0
> 
> 时间：2013-04-03T06:20:42.603
> 
> 标签：delphi, devexpress, delphi-xe2, delphi-xe

我正在使用 cxGrid，其中有两个日期字段（start_date 和 end_date），它们从查询中获取结果。我试图防止用户在网格中输入数据时输入错误的日期范围。我试图阻止用户输入低于 start_date 的 end_date。我试过 ：

```
procedure TForm1.ABSQuery1BeforePost(DataSet: TDataSet);
begin
 if (ABSQuery1.FieldByName('end_DATE').AsDateTime < ABSQuery1.FieldByName('start_DATE').AsDateTime) then
 showmessage('end date  cant be lower than start date ');
 ABSQuery1.Cancel;
end; 
```

我收到错误：数据集未处于插入或编辑模式。我该如何解决这个问题或者有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:28:52.133

您的代码是错误的：您从 if 构造中调用 Cancel ，因此您也将其调用为有效记录，但**不要在验证例程中调用 Cancel 方法**。

在这种情况下，cxGrid 负责数据集的编辑，所以如果你真的想防止你的用户输入错误的日期：

如果您发现某些内容无法验证，合同将引发异常，因此您可以将代码更改为以下内容：

```
procedure TForm1.ABSQuery1BeforePost(DataSet: TDataSet);
begin
 if (ABSQuery1.FieldByName('end_DATE').AsDateTime < ABSQuery1.FieldByName('start_DATE').AsDateTime) then
   raise Exception.Create('end date can''t be lower than start date');
end; 
```

如果您定义自己的 Exception 类以避免引发（太）通用的 Exception 实例，那会更好，例如：

```
type
  EInputValidationError = class(Exception)
  end;

procedure TForm1.ABSQuery1BeforePost(DataSet: TDataSet);
begin
 if (ABSQuery1.FieldByName('end_DATE').AsDateTime < ABSQuery1.FieldByName('start_DATE').AsDateTime) then
   raise EInputValidationError.Create('end date can''t be lower than start date');
end; 
```

这样，将来，您可以将输入验证错误与程序中引发的其他类型的异常区分开来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:42:13.383

我更喜欢使用字段的 OnValidate`end_date`和`start_date`，因为这将在设置字段值时引发，这将在发布之前很久发生。如果必须输入大量字段并且例如用户在发布时在第三个选项卡上进行编辑，而日期的输入在第一个选项卡上，这可能会很有趣。

```
procedure TForm5.DateSpanValidateValidate(Sender: TField);
begin
  if not Sender.DataSet.FieldByName('end_DATE')
    .IsNull and not Sender.DataSet.FieldByName('start_DATE').IsNull then
    if (Sender.DataSet.FieldByName('end_DATE')
        .AsDateTime < Sender.DataSet.FieldByName('start_DATE').AsDateTime) then
      raise EYourValidationError.Create(
        'end date can''t be lower than start date');
end; 
```

# r - 在 R 中模拟 lmer() 模型中的交互效果

> ID：15780230
> 
> 赞同：1
> 
> 时间：2013-04-03T06:21:26.040
> 
> 标签：r, simulation, interaction, lme4, lmer

是否有具有以下功能的 R 包：

(1) 模拟交互变量的不同值，(2) 绘制图表，展示交互中项的不同值对 Y 的影响，以及 (3) 与拟合 lmer( ) lme4 包的功能？

我查看了 arm、ez、coefplot2 和 fanovaGraph 包，但找不到我要找的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:18:40.187

我不确定一个包，但您可以模拟交互中不同术语的数据，然后绘制它。这是一个通过波（即纵向）交互和语法进行处理的示例。我认为这个例子背后的故事是一种提高学龄儿童口语阅读流畅度的治疗方法。通过改变 bX 的函数值来修改交互项。

```
library(arm)
sim1 <- function (b0=50, bGrowth=4.672,bX=15, b01=.770413, b11=.005, Vint=771, Vslope=2.24,  Verror=40.34) {

  #observation ID
  oID<-rep(1:231)
  #participant ID
  ID<-rep(1:77, each=3)
  tmp2<-sample(0:1,77,replace=TRUE,prob=c(.5,.5))
  ITT<-tmp2[ID]
  #longitudinal wave: for example 0, 4, and 7 months after treatment
  wave <-rep(c(0,4,7), 77)

  bvaset<-rnorm(77, 0, 11.58)
  bva<-bvaset[ID]

  #random effect intercept
  S.in <- rnorm(77, 0, sqrt(Vint))
  #random effect for slope
  S.sl<-rnorm(77, 0, sqrt(Vslope))
  #observation level error
  eps <- rnorm(3*77, 0, sqrt(Verror))
  #Create Outcome as product of specified model
  ORFset <- b0 + b01*bva+ bGrowth*wave +bX*ITT*wave+ S.in[ID]+S.sl[ID]*wave+eps[oID]
  #if else statement to elimiante ORF values below 0
  ORF<-ifelse(ORFset<0,0,ORFset)
  #Put into a data frame
  mydata <- data.frame( oID,ID,ITT, wave,ORF,bva,S.in[ID],S.sl[ID],eps)
    #run the model
  fit1<-lmer(ORF~1+wave+ITT+wave:ITT+(1+wave|ID),data=mydata)
  fit1

  #grab variance components
  vc<-VarCorr(fit1)

  #Select Tau and Sigma to select in the out object
  varcomps=c(unlist(lapply(vc,diag)),attr(vc,"sc")^2)
  #Produce object to output
  out<-c(coef(summary(fit1))[4,"t value"],coef(summary(fit1))[4,"Estimate"],as.numeric(varcomps[2]),varcomps[3])
  #outputs T Value, Estimate of Effect, Tau, Sigma Squared
  out
  mydata
}

mydata<-sim1(b0=50, bGrowth=4.672, bX=1.25, b01=.770413, b11=.005, Vint=771, Vslope=2.24,  Verror=40.34)
xyplot(ORF~wave,groups=interaction(ITT),data=mydata,type=c("a","p","g")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-08T07:00:51.807

尝试 languageR 包或效果包中的 plotLMER.fnc()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-13T15:45:35.333

该`merTools`包有一些功能可以使这更容易，尽管它仅适用于使用`lmer`和`glmer`对象。您可以这样做：

```
library(merTools)
# fit an interaction model
m1 <- lmer(y ~ studage * service + (1|d) + (1|s), data = InstEval)
# select an average observation from the model frame
examp <- draw(m1, "average")
# create a modified data.frame by changing one value
simCase <- wiggle(examp, var = "service", values = c(0, 1))
# modify again for the studage variable
simCase <- wiggle(simCase, var = "studage", values = c(2, 4, 6, 8)) 
```

在此之后，我们的模拟数据如下所示：

```
simCase
     y     studage service   d   s
1 3.205745       2       0 761 564
2 3.205745       2       1 761 564
3 3.205745       4       0 761 564
4 3.205745       4       1 761 564
5 3.205745       6       0 761 564
6 3.205745       6       1 761 564
7 3.205745       8       0 761 564
8 3.205745       8       1 761 564 
```

接下来，我们需要生成预测区间，我们可以使用`merTools::predictInterval`（或不使用您可以使用的区间`lme4::predict`）

```
preds <- predictInterval(m1, level = 0.9, newdata = simCase) 
```

现在我们得到一个 preds 对象，它是一个 3 列的 data.frame：

```
preds
       fit       lwr      upr
1 3.312390 1.2948130 5.251558
2 3.263301 1.1996693 5.362962
3 3.412936 1.3096006 5.244776
4 3.027135 1.1138965 4.972449
5 3.263416 0.6324732 5.257844
6 3.370330 0.9802323 5.073362
7 3.410260 1.3721760 5.280458
8 2.947482 1.3958538 5.136692 
```

然后我们可以把它们放在一起来绘制：

```
library(ggplot2)
plotdf <- cbind(simCase, preds)
ggplot(plotdf, aes(x = service, y = fit, ymin = lwr, ymax = upr)) + 
  geom_pointrange() + facet_wrap(~studage) + theme_bw() 
```

不幸的是，这里的数据导致了一个相当无趣但易于解释的情节。

[![预测值的多面图](https://i.stack.imgur.com/8jTdS.png)](https://i.stack.imgur.com/8jTdS.png)

# asp.net-mvc - 级联下拉列表

> ID：15780237
> 
> 赞同：0
> 
> 时间：2013-04-03T06:21:54.567
> 
> 标签：asp.net-mvc, sql-server-2008, razor

我有兴趣在 razor mvc 中使用级联 dropwonlists。我在 sqlserver 中工作的数据库“BFDb”中有一个表“samplecri”。我已将该数据库作为模型导入到我的应用程序中。

该表有以下字段：sportname、gametype、country、team1 和 team2。

问题说明：当用户选择运动名称时，例如：板球，游戏类型下拉列表应从表中更新为“国内”和“国际”。然后用户选择游戏类型，例如：'Domestic'，国家下拉列表应该更新说明国内比赛在哪里进行，最后 team1 和 team2 下拉列表应该更新为该国家可用的球队。例如澳大利亚的国内球队是昆士兰，新南威尔士州蓝调，南方红背等...

我在SO中搜索。我可以看到类似的答案，但看不到我从 sqlserver 导入模型的方式。谁能帮忙？？？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-20T12:29:05.170

桑托什

可以看看这个[http://bonrouge.com/~chain_select_ajax](http://bonrouge.com/~chain_select_ajax)。这里有一些变体和不同的代码可以帮助你

# sql - excel和access之间的两种方式连接

> ID：15780240
> 
> 赞同：1
> 
> 时间：2013-04-03T06:22:08.290
> 
> 标签：sql, excel, import, ms-access-2007, excel-2007

我的要求是有多个用户更新 excel 表中的表的同一个 excel 表的多个副本。然后有一个访问数据库，其中一个表从多个用户更新的 excel 表中更新，并且更改由其 excel 表中的任何一个用户也应反映在所有其他用户的 excel 表中。用户无权访问访问数据库。我正在使用 2007 版本。

我需要做的是

1.将所有excel副本连接到access数据库。因此，如果任何用户进行了任何更改，它都会在access数据库中更新。

2.现在一个用户在excel表中所做的更改也应该反映在所有其他用户的excel表中。

我尝试通过将 excel 文件链接到 access 数据库来解决这个问题，该数据库在 access 中创建了许多链接表。因此，通过这种方式，其中一个 excel 文件中的更改反映在其在 access 中创建的相应链接表中。然后我使用联合查询将所有链接表连接到一个表（比如连接表）。然后我将这个连接表连接到多个 excel 表。当用户打开或刷新 excel 表时，excel 表中的表会更新。

但是我现在面临的问题是，当在 excel 文件中的一条记录中进行了一些更改而不是覆盖连接表中的该记录时，它会创建另一条记录。所以，现在有两条记录，一条记录没有更新的数据和另一个在连接表中包含更新的数据，这两条记录也反映在表 excel 表中。所以说，如果我在每个链接文件中有 50 条记录，那么在 access 数据库的连接表和 excel 表中都会创建 51 条记录。

你能帮我解决这个问题吗，因为我已经尝试了很多，但我无法解决这个问题。

# android - 如何检测飞行模式，尤其是在果冻光束中？

> ID：15780241
> 
> 赞同：2
> 
> 时间：2013-04-03T06:22:10.560
> 
> 标签：android

检测飞行模式的波纹管代码不适用于果冻光束版本。

```
 // Check for Airplane Mode
    boolean isEnabled = Settings.System.getInt(getContentResolver(),Settings.System.AIRPLANE_MODE_ON,0) == 1;

if (isEnabled) {
// toggle airplane mode
Settings.System.putInt(getContentResolver(),
Settings.System.AIRPLANE_MODE_ON,isEnabled ? 0 : 1);
// Post an intent to reload
Intent intent = new Intent(                 Intent.ACTION_AIRPLANE_MODE_CHANGED);
intent.putExtra("state", !isEnabled);
sendBroadcast(intent);
} 
```

请分享您对我的疑问的建议。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T06:27:52.157

这是代码片段适用于 JB 以下

```
 /**
* Gets the state of Airplane Mode.
* 
* @param context
* @return true if enabled.
*/
private static boolean isAirplaneModeOn(Context context) {

   return Settings.System.getInt(context.getContentResolver(),
           Settings.System.AIRPLANE_MODE_ON, 0) != 0;

} 
```

在**Jelly Bean 4.2**中，此设置已移至`Settings.Global`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:37:14.897

在 jellybean 中，AIRPLANE Mode 设置值被移动到全局表中。

并且在 SDK 文档中，全局表不能由应用程序编写。

> 应用程序可以读取这些但不允许写入；与“安全”设置一样，这些设置用于用户必须通过系统 UI 或针对这些值的专用 API 显式修改的首选项。

有关详细信息，请参阅[http://developer.android.com/reference/android/provider/Settings.Global.html](http://developer.android.com/reference/android/provider/Settings.Global.html)。

# ios - TableView 中的 NSMutableArray 和 NSMutableDictionary

> ID：15780242
> 
> 赞同：2
> 
> 时间：2013-04-03T06:22:10.900
> 
> 标签：ios, objective-c, nsmutablearray, nsmutabledictionary

我在使用`NSMutableArray`and时遇到问题`NSMutableDictionary`。

我创建了一个测验，当它停止时，它应该在`tableview`. 然后它应该将这些值显示在`tableview`. 但是当我加载它的`viewController`. `mutableArray`是在方法中创建的`viewDidLoad:`。我的代码是否正确，或者我在这里遗漏了什么？

```
- (IBAction)saveResult:(id)sender {

    dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:NSLocalizedString(@"DATE", nil)];// @"HH:mm zz"];

    dateNow = [NSDate date];
    NSString *formattedDateString = [dateFormatter stringFromDate:dateNow];

    // Add the quiz result to the array, reload the data in the tableview
    highscoreAndDate = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                          [NSString stringWithFormat:@"%i points", score], @"kResult",
                          formattedDateString, @"kDate", nil];

    [highscore addObject:highscoreAndDate];

    [tableView reloadData];
} 
```

**我的 tableView 方法：**

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    return 1;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return [highscore count];
}

- (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    }

    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat: @"HH:mm zz"];

    cell.detailTextLabel.text = [[highscore objectAtIndex:indexPath.row] objectForKey:@"kResult"];

    cell.detailTextLabel.text = [[highscore objectAtIndex:indexPath.row] objectForKey:@"kDate"];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:39:48.063

@Anoop Vaidya。

你让我走上了正确的轨道。我在添加对象时放置了 NSLog 语句，它显示我的数组的行数正在增加。所以我的代码是正确的。

我发现这是由于我在我的 XIB 文件中的连接（非常尴尬！）。应该发现我的自我。我已将我的 tableview 插座连接到错误的 viewController，因此 tableview 从未填充过。

非常抱歉占用了您的时间，并感谢所有回复如此迅速的人。很高兴我把它修好了。:)

# java - 如何从向量中获取特定索引的值？

> ID：15780248
> 
> 赞同：0
> 
> 时间：2013-04-03T06:22:37.937
> 
> 标签：java, vector

当我使用 elementAt(2) 返回矢量数据时，我得到了这个输出。

```
Hello [162, Experiment 3.doc, E:\Desktop\Experiment 3.doc, doc, 35.5 kb] 
```

我想要索引值：“Experiment 3.doc”。

```
// Function to fetch data from Database and store in jtable
public Vector getEmployee(String searchQuery)throws Exception
{
    Connection con = null;
    try{
        Class.forName(driver); 
    } catch(java.lang.ClassNotFoundException e) {
        e.printStackTrace();
    }

    try{
        Vector<Vector<String>> employeeVector = new Vector<>();
        con = DriverManager.getConnection(url,"conjure","conjure");

        String query = "SELECT * FROM APP.FILES WHERE NAME LIKE '%"+searchQuery+"%'";
        Statement st = con.createStatement();

        ResultSet rs = st.executeQuery(query);

        while(rs.next()) {
            Vector<String> file = new Vector<>();
            file.add(rs.getString(1)); //Empid
            file.add(rs.getString(2)); //name
            file.add(rs.getString(3)); //position
            file.add(rs.getString(4)); //externsion
            file.add(rs.getString(5)); //size
            employeeVector.add(file);
        }
        rs.close();
        return employeeVector;
        } catch (Throwable err) {
           err.printStackTrace();
           System.out.println("Inside two");
        } finally {
        con.close();
    }
    return null;
}

// Button click, show data in jtable.
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)
{ 
    String searchQuery = jTextField1.getText();
    //get data from database
    DBEngine dbengine = new DBEngine();
    try {
        data = dbengine.getEmployee(searchQuery);
        System.out.println("Hello "+data.elementAt(2));
        jTable1.setModel(new DefaultTableModel(data,header));
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

现在我想在其他地方使用第 3 列，即文件名（实验 3.doc）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:40:43.730

你有一个`Vector`s `Vector`。

`data.elementAt(2)`将返回一个`Vector`s `String`。然后你需要从这个结果中获取下一个元素`Vector`，大概是`data.elementAt(2).getElementAt(2)`

# vtiger - vTiger 客户门户 - 发票问题：.pdf 下载错误

> ID：15780249
> 
> 赞同：1
> 
> 时间：2013-04-03T06:22:39.307
> 
> 标签：vtiger

不幸的是，上周我们遇到了 DB-Crash。因此我使用系统的备份副本重新运行它。一切顺利，但 PDFMaker Pro 除外。首先我有许可证问题。PDFMaker 不接受我的原始许可证 ID。卸载/重新安装 PDFMaker Pro 后，此问题已得到修复。但是，从那时起，当我通过 PDFMaker 发票设置中的复选框为客户门户激活 PDFMaker Pro 发票并点击客户门户中的主题链接以下载发票时，它会生成一个“index.pdf”。文件名（例如发票编号）等所有设置都将被忽略，甚至无法打开 index.pdf。它在 Adob​​e Acrobat 中返回警报/警告：“Acrobat 无法打开 pdf”。

PDFMaker 在管理界面中工作。所以一切都很好。但它不适用于客户门户发票模块。

在 Soap/customerportal.php 我发现这行代码：

```
 $fieldid = $adb->query_result($res,0,'invoiceid');
        //$fieldlabel = "(Download PDF)  ".$fieldlabel;
        $fieldvalue = '<a href="index.php?downloadfile=true&module=Invoice&action=index&id='.$fieldid.'">'.$fieldvalue.'</a>'; 
```

不知道是不是代码有问题，还是要检查什么，找到错误。我正在寻找您修复此错误的建议。PDFMaker 支持非常慢，2 天后没有回复。所以，如果你有任何想法，请分享它！

谢谢！碧玉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:24:13.707

自己修好了：

如果需要从 PDFMaker 重新安装soap/customerprotal.php 并检查目录的权限：

```
chmod 777 config.inc.php
chmod 777 tabdata.php
chmod 777 install.php
chmod 777 parent_tabdata.php
chmod 777 cache/
chmod 777 cache/images/
chmod 777 cache/import/
chmod 777 storage/
chmod 777 install/
chmod 777 user_privileges/
chmod 777 Smarty/cache/
chmod 777 Smarty/templates_c/
chmod 777 modules/Emails/templates/
chmod 777 modules/
chmod 777 cron/modules/
chmod 777 test/vtlib/
chmod 777 backup/
chmod 777 Smarty/templates/modules/
chmod 777 test/wordtemplatedownload/
chmod 777 test/product/
chmod 777 test/user/
chmod 777 test/contact
chmod 777 test/logo
chmod 777 logs/
chmod 777 modules/Webmails/tmp/ 
```

index.pdf 表示客户没有优先权。希望这可以在将来有所帮助。

碧玉

# c# - 将sql语句添加到数据库中

> ID：15780256
> 
> 赞同：3
> 
> 时间：2013-04-03T06:23:09.720
> 
> 标签：c#, .net, sql

我必须将 SQL 语句作为字符串插入数据库，例如：

```
string content = "insert into myTable(content) values ('" + myContent + "')";
string sql = "insert into myTable2(sqlStatement) values ('" + content + "')"; 
```

显然这不起作用，因为`'`inside `content`，所以我添加了以下内容：

```
Console.WriteLine(content);
content = content.Replace("'", "\\'");
Console.WriteLine(content); 
```

我确定变量`content`已更改，但仍有错误`ExecuteNonQuery()`

我也尝试了以下方法，都失败了：

```
content = content.Replace("'", "\\\'");
content = content.Replace("'", "\\\\'");
content = content.Replace("'", @"\'"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:25:34.623

当你想在字符串中转义单引号时，不要使用`\`双引号而是双引号。例如，您要插入`St. Peter's Chapel`，它应该是

```
string content = "St. Peter''s Chapel" 
```

作为旁注，这不是正确的方法。正确的方法是参数化值以避免从`SQL Injection`.

C# 代码片段：

```
string content = "St. Peter's Chapel"
string connStr = "connection string here";
string sqlStatement = "INSERT INTO tableName (content) VALUES (@content)";
using (SqlConnection conn = new SqlConnection(connStr))
{
    using(SqlCommand comm = new SqlCommand())
    {
        comm.Connection = conn;
        comm.CommandText = sqlStatement;
        comm.CommandType = CommandType.Text;

        comm.Parameters.AddWithValue("@content", content);

        try
        {
            conn.Open();
            comm.ExecuteNonQuery();
        }
        catch(SqlException e)
        {
            // do something with the exception
            // do not hide it
            // e.Message.ToString()
        }
    }
} 
```

为了正确编码

*   `using`用于 propr 对象处理的use语句
*   使用`try-catch`块来正确处理对象

# perl - Perl的打印功能：打印到最后一个文件句柄？

> ID：15780257
> 
> 赞同：1
> 
> 时间：2013-04-03T06:23:12.897
> 
> 标签：perl

我对 Perldoc 的这一点感到困惑：

> 如果省略 FILEHANDLE，则打印到最后选择的（参见选择）输出句柄。 [http://perldoc.perl.org/functions/print.html](http://perldoc.perl.org/functions/print.html)

似乎是`print`在写入文件句柄后，裸语句将打印到该文件句柄。我写了一个脚本来测试这个......

```
#!/usr/bin/perl

open (FILE, '>', 'PrintTest.txt') or die $!;
print FILE "Hello world!\n";
print "Hello.... hello? hello world!\n"; 
close FILE; 
```

但测试表明并非如此。

```
$ perl PrintTest.pl
Hello.... hello? hello world! 
```

我们在这里写的是 STDOUT，而不是 FILE，这可能是最明智的结果，但似乎与上面引用的 Perldoc 行相反。也许我误解了“最后选择的输出句柄”是什么意思？这是我能想到的解释这一点的唯一方法：-p

提前致谢~ktm

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T06:30:34.923

> 似乎是在写入文件句柄后，裸打印语句将打印到该文件句柄。

不，它说它将打印到*最后一个选定的句柄*，而不是*您打印的最后一个句柄*。它继续指导您阅读[此页面](http://perldoc.perl.org/functions/select.html)以了解如何操作。

```
open (FILE, '>', 'PrintTest.txt') or die $!;
print FILE "Hello world!\n";
select(FILE);                              <----- Missing
print "Hello.... hello? hello world!\n"; 
close FILE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:33:13.237

我相信需要一个 SELECT 语句才能将默认句柄从 stdout 更改为另一个。然后，选定的句柄将一直使用，直到更改。

# c# - 避免@符号后的连字符

> ID：15780260
> 
> 赞同：2
> 
> 时间：2013-04-03T06:23:26.323
> 
> 标签：c#, regex, validation, email-validation

我正在编写一个电子邮件验证器，我想在其中验证电子邮件，使其在@ Symbol 之后不包含连字符'_'。例如，电子邮件 lmn-xyz@abc-pqr.com 是允许的，但 xyz@-pqr.com 是不允许的。我试过以下表达但没有帮助。

> ^[a-zA-Z0-9_+-]+(.[a-zA-Z0-9_+-]+) *@[a-zA-Z0-9-]+(.[a-zA-Z0-9 -]+)* .([a-zA-Z]{2,})$

任何关于如何实现上述功能的建议都给出了正则表达式。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:25:53.077

再次添加第一组，符号`[a-zA-Z0-9]`后不带连字符 ( ) `@`。为了保持一致性，您还应该在第一组之后更改`+`-`*`因为`@`需要添加一个。

```
^[a-zA-Z0-9_+-]+(.[a-zA-Z0-9_+-]+)@[a-zA-Z0-9][a-zA-Z0-9-]*(.[a-zA-Z0-9-]+).([a-zA-Z]{2,})$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:27:31.913

在 @ 符号后使用负前瞻：

```
^[a-zA-Z0-9_\+-]+(\.[a-zA-Z0-9_\+-]+)*@(?!-)[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.([a-zA-Z]{2,})$ 
```

# c# - 处理 cmd 路径中的空格

> ID：15780263
> 
> 赞同：0
> 
> 时间：2013-04-03T06:23:49.890
> 
> 标签：c#, .net

所以我正在构建一个通过 cmd.exe 运行的命令。但是由于某些目录名称中的空格，该命令似乎失败了。

```
process.StandardInput.WriteLine(this.phpPath + " " + this.phpUnitPath + " " + itemChecked); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:26:43.557

只需将路径放在双引号之间：

```
string command = "\"" + someFilePathWithSpaces + "\""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:26:50.463

在命令行中传递带空格的文本的典型方法是将其用引号括起来，如下所示：

```
app "c:\my apps\blah.exe" "some argument" 
```

尝试做这样的事情：

```
string path = this.phpPath + " " + this.phpUnitPath + " " + itemChecked
string cmd = string.Format("\""{0} {1} {2}"\"", 
    this.phpPath, this.phpUnitPath, itemChecked); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:28:27.487

您说您正在使用`cmd.exe`，但您正在将数据写入 a`Process`的标准输入。我假设这`process`是你已经开始的一个`cmd.exe`实例。

一个可能更好的方法是使用`/C`开关：

```
C:\Users\Jonathon>cmd /?
Starts a new instance of the Windows command interpreter

CMD [/A | /U] [/Q] [/D] [/E:ON | /E:OFF] [/F:ON | /F:OFF] [/V:ON | /V:OF
    [[/S] [/C | /K] string]

/C      Carries out the command specified by string and then terminates
... 
```

无论哪种方式，所有带有空格的路径都需要用引号引起来。

最后一点，你确定你甚至需要使用`cmd.exe`吗？为什么不直接执行你真正想要运行的程序呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T06:47:38.343

在以下语句中的第一个数组中放置任意数量的部分路径：

```
var path=String.Join((new[] { this.phpPath, this.phpUnitPath, itemChecked }).Aggregate((a, b) => a+"\x20"+b), new[] { '\"', '\"' }); 
```

# visual-studio-2010 - 取消链接远程调试机

> ID：15780265
> 
> 赞同：1
> 
> 时间：2013-04-03T06:24:08.843
> 
> 标签：visual-studio-2010, visual-studio-2012, windows-store-apps

我想在 VS 2012 for Windows Store App 中取消链接远程调试机器。我无法找到这样做的方法。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:00:56.600

删除 C# 和 Visual Basic 项目的远程设备

*   在解决方案资源管理器中选择项目名称，然后通过右键单击从快捷菜单中选择**属性。**
*   选择**调试**。
*   从**目标设备**列表中选择除**远程机器之外的其他选项。**
***   **在远程机器**文本框中删除远程设备的网络名称。**

 **删除 JavaScript 和 C++ 项目的远程设备

*   在解决方案资源管理器中选择项目名称，然后通过右键单击从快捷菜单中选择**属性。**
*   展开**配置属性**节点，然后选择**调试**。
*   从**Debugger to launch**列表中选择除**Remote Debugger之外的其他选项。**
***   **在机器名称**文本框中删除远程设备的网络名称。****

# ios - F3PlotStrip 动态添加图有问题

> ID：15780266
> 
> 赞同：2
> 
> 时间：2013-04-03T06:24:18.420
> 
> 标签：ios, graph

我目前正在开发基于 Graphs 的 iOS 应用程序。为此，我使用了一个名为[F3PlotStrip](http://www.cocoacontrols.com/controls/f3plotstrip)的第三方控件。

实现类似于：

```
- (void)viewDidLoad
{
    _ecgView = [[F3PlotStrip alloc] initWithFrame:CGRectMake(50, 50, 648, 299)];
    _ecgView.lineColor = [UIColor greenColor];
    _ecgView.lowerLimit = -10.0f;
    _ecgView.upperLimit = 10.0f;
    [self.view addSubview:_ecgView];
    [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(testGraph:) userInfo:nil repeats:YES];
}

- (void)testGraph:(NSTimer *)a_timer
{
    _ecgView.value = 1.0;
} 
```

但我得到的结果如下：

![代码 F3](https://i.stack.imgur.com/92HDG.png)

然后我`UIView`在我的中添加了一个`xib`并更改了它的类，`F3PlotStrip`然后将它作为`_ecgView`.

然后我将代码更改为：

```
- (void)viewDidLoad
{
    _ecgView.lineColor = [UIColor greenColor];
    _ecgView.lowerLimit = -10.0f;
    _ecgView.upperLimit = 10.0f;
    [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(testGraph:) userInfo:nil repeats:YES];
}

- (void)testGraph:(NSTimer *)a_timer
{
    _ecgView.value = 1.0;
} 
```

这一次，我得到了实际的输出：

![IB F3](https://i.stack.imgur.com/isHXq.png)

但是为什么当我通过代码添加视图时会出现问题？我不能依赖第二种方法（通过 IB），因为我需要动态添加图表。有没有办法解决这个问题？或者这是 F3PlotStrip 的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T22:32:04.883

我今天早上开始使用这个小部件。我现在在 iPhone 上躺在床上，所以无法发布我想发布的内容，但我会在早上上班时发布。

我已经设法使用它并使用动态添加的 UIView 执行您想要执行的操作，或者我应该说 F3PlotStrip。

我也使 .h 和 .m 符合 ARC 标准。不确定你是否这样做了。

明天我将完成一些不错的代码，这些代码使用 NSTimer 读取 NSArray 的内容以动态绘制，并带有动画。再次使用视图作为子视图添加到我的视图控制器中。

明天没有详细查看您的代码，因为我已经设法开始工作。

好的 - 我在工作，坐在 Xcode 前面。这是我用作此小部件的基本测试平台的 VC。昨晚我很快就把它敲了起来，但完成了工作。最初，我在我的 Storyboard 第一个 VC 中添加了一个 UIView，并将其子类化为 F3PlotStrip。但是，鉴于我看到您在动态添加 UIView 时遇到问题，我想我会试一试。你和我的唯一区别是我在 alloc-init 之后设置 UIView 的框架。看你怎么想。它使用 Sparkline 方法以及将图形动画显示到屏幕上。

```
//
//  PlotViewController.m
//  PlotTest
//
//  Created by Carl Hine on 16/05/2013.
//  Copyright (c) 2013 Carl Hine. All rights reserved.
//

#define COLOUR_POWDER_BLUE                  [[UIColor alloc] initWithRed:176/255.0f     green:224/255.0f blue:230/255.0f alpha:1]

#import "F3PlotStrip.h"
#import "PlotViewController.h"

@interface PlotViewController ()

@property (strong, nonatomic) IBOutlet F3PlotStrip *IBOPLotView;
@property (strong, nonatomic) NSTimer *plotStipTimer;
@property (strong, nonatomic) NSArray *plotData;
@property (nonatomic) NSInteger plotDataArrayIdx;
@property (strong, nonatomic) F3PlotStrip *plotView2;

@end

@implementation PlotViewController

@synthesize plotStipTimer;
@synthesize plotData;
@synthesize plotDataArrayIdx;

BOOL bUsingDynPlot = YES;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {

    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)testGraph:(NSTimer *)a_timer {

    float RSEFigure = [[self.plotData objectAtIndex:plotDataArrayIdx] floatValue];

    if (bUsingDynPlot)
        _plotView2.value = RSEFigure;
    else
        _IBOPLotView.value = RSEFigure;

    ++plotDataArrayIdx;

    if (plotDataArrayIdx == [self.plotData count]) {
        [plotStipTimer invalidate];
        plotStipTimer = nil;
    }

}

- (void)configurePLotStrip:(F3PlotStrip *)plotStrip {

    plotDataArrayIdx = 0;
    // Random rubbish that makes it look like a heartbeat :
    self.plotData = [NSArray arrayWithObjects:[NSNumber numberWithFloat:68.1f],
                 [NSNumber numberWithFloat:70.2f],
                 [NSNumber numberWithFloat:71.3f],
                 [NSNumber numberWithFloat:72.4f],
                 [NSNumber numberWithFloat:73.5f],
                 [NSNumber numberWithFloat:73.5f],
                 [NSNumber numberWithFloat:100.5f],
                 [NSNumber numberWithFloat:124.5f],
                 [NSNumber numberWithFloat:10.5f],
                 [NSNumber numberWithFloat:73.5f],
                 [NSNumber numberWithFloat:70.6f],
                 [NSNumber numberWithFloat:70.2f],
                 [NSNumber numberWithFloat:71.3f],
                 [NSNumber numberWithFloat:72.4f],
                 [NSNumber numberWithFloat:73.5f],
                 [NSNumber numberWithFloat:73.5f],
                 [NSNumber numberWithFloat:100.5f],
                 [NSNumber numberWithFloat:124.5f],
                 [NSNumber numberWithFloat:10.5f],
                 [NSNumber numberWithFloat:73.5f],
                 [NSNumber numberWithFloat:70.6f],
                 [NSNumber numberWithFloat:70.2f],
                 [NSNumber numberWithFloat:71.3f],
                 [NSNumber numberWithFloat:72.4f],
                 [NSNumber numberWithFloat:73.5f],
                 [NSNumber numberWithFloat:73.5f],
                 [NSNumber numberWithFloat:100.5f],
                 [NSNumber numberWithFloat:124.5f],
                 [NSNumber numberWithFloat:10.5f],
                 [NSNumber numberWithFloat:73.5f],
                 [NSNumber numberWithFloat:70.6f],
                 nil];

    // Get value bounds
    float max = -999999;
    float min = 999999;
    for (NSInteger i = 0;i <= self.plotData.count - 1;++i) {
        float RSEFigure = [[self.plotData objectAtIndex:i] floatValue];
        if (RSEFigure > max)
            max = RSEFigure;
        if (RSEFigure < min)
            min = RSEFigure;
    }

    plotStrip.lowerLimit = min;
    plotStrip.upperLimit = max;
    plotStrip.lineColor = COLOUR_POWDER_BLUE;
    [self.view addSubview:_IBOPLotView];
    plotStipTimer = [NSTimer scheduledTimerWithTimeInterval:0.05 target:self selector:@selector(testGraph:) userInfo:nil repeats:YES];
    plotStrip.showDot = YES;
    plotStrip.capacity = self.plotData.count;

}

- (void)viewDidLoad {

    if (bUsingDynPlot) {
        // Dynamically adding to view.
        _plotView2 = [[F3PlotStrip alloc] init];
        _plotView2.backgroundColor = [UIColor redColor];
        _plotView2.frame = CGRectMake(0, 100, 293, 35);
        [[self view] addSubview:_plotView2];
        [self configurePLotStrip:_plotView2];
    } else {
        [self configurePLotStrip:_IBOPLotView];
    }
    [super viewDidLoad];

}

- (void)didReceiveMemoryWarning {

    [super didReceiveMemoryWarning];

}

@end 
```

我希望这对你来说很容易加入一个新的 VC。如果你的项目文件夹中有 F3PlotStrip.h 和 .m，你会很好 - 除了向 VC 添加 UIView。

卡尔。

# iphone - CoreBluetooth 中不允许使用广告密钥“制造商数据”

> ID：15780267
> 
> 赞同：11
> 
> 时间：2013-04-03T06:24:20.923
> 
> 标签：iphone, ios, objective-c, core-bluetooth

我正在使用核心蓝牙框架。我正在尝试使用此框架创建外围设备。我的外围设备使用以下方式宣传数据：

```
manager=[[CBPeripheralManager alloc]initWithDelegate:self queue:nil];
[manager startAdvertising:dictionary]; 
```

这里我为广告传递的字典是：

```
NSDictionary *dictionary = [[NSDictionary alloc] initWithObjectsAndKeys:
                                    @"name", CBAdvertisementDataLocalNameKey,@"some other data",CBAdvertisementDataManufacturerDataKey,nil]; 
```

当我运行应用程序时，我收到警告：**CoreBluetooth 中不允许广告键“制造商数据”**

而且我没有收到我使用`CBAdvertisementDataManufacturerDataKey`中心侧的密钥发送的“一些其他数据”。我在中间得到了这个名字。那么我怎样才能将其他一些数据与广告数据一起发送呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-24T04:32:10.620

正如关于 startAdvertising 的[CBPeripheralManager](http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CBPeripheralManager_Class/Reference/CBPeripheralManager.html)文档所述：

> 包含您要宣传的数据的可选字典。CBCentralManagerDelegate 协议参考中详细介绍了可能的广告数据字典键。**也就是说，外围管理器对象仅支持两个键： CBAdvertisementDataLocalNameKey 和 CBAdvertisementDataServiceUUIDsKey**。

这些键仅适用于 iOS 设备处于中央模式并发现外部外围设备（即只读）时。我不知道为什么在外围模式下操作时会存在此限制，您可以尝试提交错误报告。

# c# - 同时运行存储过程多次

> ID：15780268
> 
> 赞同：2
> 
> 时间：2013-04-03T06:24:23.237
> 
> 标签：c#, sql-server-2008, tsql, ssis

如何使用不同的参数值集多次运行相同的存储过程，而无需等待第一次执行完成。

例子：

如果我从@sourceId，@containerId 得到proc sp_loaddata

```
Execution - 1st:  exec sp_loaddatafrom 100001, 36
Execution - 2nd:  exec sp_loaddatafrom 100008, 92
Execution - 3rd:  exec sp_loaddatafrom 100005, 112 
```

我希望所有人同时运行。

如何在 T-SQL / SSIS / C# 中实现这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:34:23.637

如果您有权访问 .net 4.5，我将使用以下代码。

```
var results = Task.WhenAll(
    Task.Run(() => RunStoredProc(1)),
    Task.Run(() => RunStoredProc(2)),
    Task.Run(() => RunStoredProc(3))
).Result; 
```

如果我只有 .net 4.0，我会使用 TPL。稍微麻烦一点，还是比后台工作人员好很多。

```
var arguments = new []{1,2,3};

var results = from x in arguments.AsParallel()
              select RunStoredProc(x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:29:01.300

如果您将使用 C#，您可以使用 3 个 BackgroundWorkers 在其 Do_Work 事件上调用所述存储过程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T06:52:21.570

这可以在 SSIS 中通过使用 3 个`Execute SQL Task`彼此不连接的不同来完成。

![在此处输入图像描述](https://i.stack.imgur.com/ibTqM.png)

默认情况下，SSIS 使用`Serializable`选项`Isolation Level`锁定正在读取的整个数据并保持锁定直到事务完成。因此，为了并行运行查询，您需要在读取数据时将其更改`Isolation level`为`Snapshot`主要用于数据的。`NOLOCK`

更新 ：-

由于获得了 `stored procedures`正在执行的数量，`dynamically`那么您需要创建包`programitically`

```
public void CreatePackage()
{
  Package package= new Package();
  ConnectionManager sqlConnection = GetSQLConnection(package,
                                    "localhost", "Database Name");
  TaskHost taskHost=null;
   for(int i=0;i<GetNoOfRowFromSQL();i++)
    {
      CreateDynamicTask(package);
    }
  package.Execute();
}

public void CreateDynamicTask(package Package)
{

      //Add the Execute SQL Task
      package.Executables.Add("STOCK:SQLTask");
       taskHost = package.Executables[0] as TaskHost;
      taskHost.Properties["SqlStatementSource"].SetValue(taskHost, 
                                            "EXECUTE Stored Proc);
     //Setting the Isolation Level
     taskHost.Properties["IsolationLevel"].SetValue(taskHost, 1048576);
     //the number signify 1048576 =Serializable
    }
} 
```

# angularjs - AngularJS 中的动态路由 - 我可以在设置 $routeProvider 之前从服务器检索数据吗？

> ID：15780269
> 
> 赞同：5
> 
> 时间：2013-04-03T06:24:32.193
> 
> 标签：angularjs, angularjs-routing

在设置所有路由之前，有什么方法可以让服务器命中以检索数据`$routeProvider`？我希望能够根据这个远程数据动态设置路由。我试过这样的事情：

```
angular.module("myApp").config(["$routeProvider", "$http", function($routeProvider, $http) {
    $http.get("myData").success(function(data) {
        $routeProvider.when(data.dynamicRoute, {
            //route definition
        }
        //or
        $routeProvider.when("/known/route", {
            redirectTo: data.dynamicRoute
        }
    });
}]); 
```

但这会导致以下错误：

```
Unknown provider: $http from myApp 
```

所以，我知道配置函数是注入提供者而不是服务。但是，我仍然想知道我是否能以某种方式实现我的最终目标？我不认为我可以用 来做到这一点`$httpProvider`，但如果我错了，请有人纠正我。如果有一些根本原因导致这是不可能的，请解释。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-21T19:59:35.590

这是 100% 有效的解决方案！

1.  准备好你的路线。它们在 json 中可能看起来像这样

    ```
    {"0":{"id":1,"when":"/","controller":"MainController","template":"app/views/site/main_inner.html"},"1":{"id":2,"when":"/firm/:firmID","controller":"CompanyController","template":"app/views/site/firm.html"},"2":{"id":3,"when":"/search","controller":"SearchController","template":"app/views/site/search.html"}} 
    ```

2.  首先，您必须对 RouteProvider 进行全局引用

    ```
     var $routeProviderReference;
     var app = angular.module('myApp', []);

      app.config(['$routeProvider', function($routeProvider) {
      $routeProviderReference = $routeProvider;
      }]); 
    ```

3.  其次，使用方法 run 对路由进行 ajax 调用。

    ```
     app.run(['$rootScope', '$http', '$route', function($rootScope, $http, $route) {
        //getting routes
        $http.get('routes.php').success(function (data) {

        angular.forEach(data, function (route) {
            $routeProviderReference.when( route.when, { templateUrl: route.template, controller: route.controller } );
        });
        $routeProviderReference.otherwise({ redirectTo: '/' });
        $route.reload();

    });

    }]); 
    ```

有关更多信息，请查看下面的参考[http://blog.brunoscopelliti.com/how-to-defer-route-definition-in-an-angularjs-web-app](http://blog.brunoscopelliti.com/how-to-defer-route-definition-in-an-angularjs-web-app)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T06:40:13.230

没有办法做到这一点。

提供者是可配置的服务创建者。它们允许我们提供一个 API 来配置它们的创建。可配置性将我们带到了`config`块中。这些在服务可用*之前*使用，以便配置它们的创建。因此，您可以分别将设置传递给`$routeProvider`或`$httpProvider`它将在创建`$route`和`$http`服务时使用。

因为在这个阶段服务仍在*配置*中，服务本身不能用于注入——它们实际上还不存在。

允许我们配置路由，这些`$routeProvider`路由必须在我们的应用程序启动时运行。*在我们的应用程序运行期间*让路由从某个随机点开始是没有意义的。

所有这一切都是说你不能开始运行你的应用程序，这就是 using`$http`的意思，直到配置完成。所以没有办法从远程数据定义路由。

* * *

对于它的价值，我认为无论如何我都看不到这种动态路线的价值。它们本质上是不可预测的，因为它们是由非静态数据构建的。这将完全破坏可书签性，这是路由的主要目的。

所以我想问你为什么一开始就觉得有必要这样做，然后退后一步，看看这是否真的是理想的方式。

随时发表评论以引发进一步讨论。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-28T16:09:47.487

**更新：** @dnc253 -- [angular-](https://github.com/afterglowtech/angular-detour) detour现在已经准备就绪，我认为您可以使用它来获取从 json 加载的路由。它还没有完整的文档并且没有测试，所以从这个意义上说它肯定是不完整的，但是将 json 合并到路由器的实时实例中已经工作了一段时间。

如果您仍在寻找使用服务器定义路由的方法，您可以[阅读有关运行示例的说明](https://github.com/afterglowtech/angular-detour/tree/master/samples)，然后在 app.js 中查看第三个示例的[mergeJson 调用](https://github.com/afterglowtech/angular-detour/blob/master/samples/3-json-config/js/app.js)。反馈会很棒——我现在开始进行真正的文档/测试，所以没有必要告诉我文档很烂而且没有任何测试——我就是那个。:) 如果此功能仍在您的需求列表中，希望这些示例足以让您感到满意

**答案的较早部分：**如果您只想要一组由服务器使用 JSON 定义的静态路由，则可以在配置应用程序*之前使用 JQuery 之类的东西来获取路由数据。*

伪代码：

```
$.ajax({
  url: "http://example.com/routes"
  }
}).done(function ( data ) {
    angular
        .module('myApp',[])
        .config(function($routeProvider) {
          //read routing instructions from data and call "when" on $routeProvider to define the routes
         });

}); 
```

这也适用于 ui-router。但它只能让您获取一组初始路由，因此虽然它为您提供了数据驱动定义的可能性，但它们仅由客户端加载应用程序时可用的数据驱动。

正如 eazel7 指出的那样，如果您创建自己的服务并在配置时绑定到提供程序，则 **可以在运行时访问提供程序。****但是**，要执行您想做的事情，您需要退出进程来进行 $http 调用，并且使用当前的路由器（库存 Angular 核心和 ui-router），您将无法及时得到答案来填充当有人访问您的网站时，深层链接失败之前的路由器。此外，这两个路由器都使用功能来填充路由“表”，因此在最初配置路由后不适合更新路由。

我正在研究解决这些问题的方法，例如，如果路由器不知道请求的路由，它将尝试在调用回退路由或失败*之前从服务器获取它。*还将支持检查对已知路线的修改。本质上是带有 AJAX/JSON 接口的延迟路由到服务器。它基于 ui-router，位于[https://github.com/afterglowtech/angular-detour](https://github.com/afterglowtech/angular-detour)。它目前实现了路由的可编辑性，但我还没有完成惰性/服务器通信部分。这是我名单上的下一个。密切关注它，它最终应该会做你正在寻找的东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-10T06:26:03.007

我认为最简单的方法是稍后解析路由，例如，您可以通过 json 询问路由。检查我在配置阶段通过 $provide 从 $routeProvider 中创建了一个工厂，因此我可以在运行阶段甚至在控制器中继续使用 $routeProvider 对象。

```
'use strict';

angular.module('myapp', []).config(function($provide, $routeProvider) {
    $provide.factory('$routeProvider', function () {
        return $routeProvider;
    });
}).run(function($routeProvider, $http) {
    $routeProvider.when('/', {
        templateUrl: 'views/main.html',
        controller: 'MainCtrl'
    }).otherwise({
        redirectTo: '/'
    });

    $http.get('/dynamic-routes.json').success(function(data) {
        $routeProvider.when('/', {
            templateUrl: 'views/main.html',
            controller: 'MainCtrl'
        });
        // you might need to call $route.reload() if the route changed
        $route.reload();
    });
}); 
```

# java - 如何创建一个 zip 文件并下载它？

> ID：15780270
> 
> 赞同：1
> 
> 时间：2013-04-03T06:24:39.263
> 
> 标签：java

我正在创建一个 zip 文件并下载它。我能够下载所有文件文件而不会出现任何错误。但是，当我试图仅压缩“finaldebrief”文件夹。我想直接在 zip 文件中获取“finaldebrief”文件夹。有人可以帮我吗。提前致谢。

这是我的代码

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    int workshopid = Integer.parseInt(request.getParameter("currentworkshopid"));

    javax.servlet.ServletContext context = getServletConfig().getServletContext();
    String path = context.getRealPath("finaldebrief");

    try 
    { 
        response.setContentType("application/zip");
        response.setHeader("Content-Disposition", "attachment;filename=finaldebrief.zip");

        ZipOutputStream zos = new 
               ZipOutputStream(response.getOutputStream()); 

        zipDir(path + "/", zos); 

        zos.close(); 
    } 
    catch(Exception e) 
    { 
        e.printStackTrace();
    } 

}

public void zipDir(String dir2zip, ZipOutputStream zos) 
{
    try 
    { 
        //create a new File object based on the directory we have to zip File    
        File zipDir = new File(dir2zip); 
        //get a listing of the directory content 
        String[] dirList = zipDir.list(); 
        byte[] readBuffer = new byte[2156]; 
        int bytesIn = 0; 
        //loop through dirList, and zip the files 
        for(int i=0; i<dirList.length; i++) 
        { 
            File f = new File(zipDir, dirList[i]); 
            if(f.isDirectory()) 
            { 
                //if the File object is a directory, call this 
                //function again to add its content recursively 
                String filePath = f.getPath();
            //  String filePath = f.getCanonicalPath();

                zipDir(filePath, zos);
                //loop again 
                continue; 
            } 
            //if we reached here, the File object f was not  a directory 
            //create a FileInputStream on top of f 
            FileInputStream fis = new FileInputStream(f); 
            // create a new zip entry 
            ZipEntry anEntry = new ZipEntry(f.getPath()); 
            //place the zip entry in the ZipOutputStream object 
            zos.putNextEntry(anEntry); 
            //now write the content of the file to the ZipOutputStream 
            while((bytesIn = fis.read(readBuffer)) != -1) 
            { 
                zos.write(readBuffer, 0, bytesIn); 
            } 
            //close the Stream 
            fis.close(); 
        } 
    } 
    catch(Exception e) 
    { 
        e.printStackTrace(); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:28:42.543

行内

```
ZipEntry anEntry = new ZipEntry(f.getPath()); 
```

您指定 zip 文件中的路径（即`f.getPath()`）。如果您想要更短的路径或根本没有路径，只需操纵这部分（例如`f.getName()`）。

# java - 用图库选择的图像比用相机拍摄的要大得多

> ID：15780272
> 
> 赞同：1
> 
> 时间：2013-04-03T06:24:45.367
> 
> 标签：java, android, image, bitmap, camera

在我的应用中，用户要么从他们的图片库中挑选一张图片，要么用他们的相机拍摄一张图片。

当您捕获它时，它会添加到用户的图库中。

我发现这些图像，除了是相同的图像之外，尺寸也有很大的变化。

捕获：33kb

代码：

```
 if (requestCode == TAKEIMAGE) {
        System.out.println("TAKE IMAGE");
        int photoLength = 0;
        Bitmap photo = (Bitmap) data.getExtras().get("data"); 
        photoLength = GetBitmapLength(photo);

        SetSubmissionImage(photo, photoLength);
    } 
```

取自画廊：1600kb

代码：

```
 else if (requestCode == CHOOSEIMAGE) {
        System.out.println("CHOOSE IMAGE");

        Uri selectedImageUri = data.getData();
        selectedImagePath = getPath(selectedImageUri);
        try {
            FileInputStream fileis=new FileInputStream(selectedImagePath);
            BufferedInputStream bufferedstream=new BufferedInputStream(fileis);
            byte[] bMapArray= new byte[bufferedstream.available()];
            bufferedstream.read(bMapArray);

            int photoLength = 0;
            Bitmap photo = BitmapFactory.decodeByteArray(bMapArray, 0, bMapArray.length);

            bMapArray = null;
            fileis.close();
            bufferedstream.close();

            //rotate to be portrait properly
            try {
                ExifInterface exif = new ExifInterface(selectedImagePath);
                int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
                Log.e("EXIF", "Exif: " + orientation);
                Matrix matrix = new Matrix();
                if (orientation == 6) {
                    matrix.postRotate(90);
                }
                else if (orientation == 3) {
                    matrix.postRotate(180);
                }
                else if (orientation == 8) {
                    matrix.postRotate(270);
                }
                photo = Bitmap.createBitmap(photo, 0, 0, photo.getWidth(), photo.getHeight(), matrix, true); // rotating bitmap
            }
            catch (Exception e) {

            }

            //photo = GetCompressedBitmap(photo);
            photoLength = GetBitmapLength(photo);
            SetSubmissionImage(photo, photoLength);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:42:15.220

就像其他评论中所说的那样，您需要使用包含将保存图像的 uri 的意图来启动相机活动：

```
// create Intent to take a picture and return control to the calling application
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE); // create a file to save the image
intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name

// start the image capture Intent
startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

然后在您的 onActivityResult() 方法中，您可以检索 uri 并从意图中的 URI 加载图像。

# .net - 在没有管理员权限的情况下更新软件并访问注册表

> ID：15780273
> 
> 赞同：2
> 
> 时间：2013-04-03T06:24:57.010
> 
> 标签：.net, installation, registry

我有一个仍在使用注册表的 .NET 应用程序。我现在想在用户不是管理员且不更改组策略对象的情况下进行更新。在更新过程中，我需要访问注册表。应用程序的初始安装可以由管理员完成。

有没有可能实现这个目标？我可以为此使用证书吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:54:32.890

鉴于需要写入 HKLM 注册表，答案是否定的......

...除非它可以由域管理员作为更新推送。您需要以管理员可以推送的格式打包安装程序（我猜是 .msi 或 .msp）。我认为签署您的 msi 在技术上不是必需的。

您也可以更改为按用户安装（a la Chrome），但如果我正确理解了这个问题，那就太迟了。

在部署方面，我不是真正的专家，但写入 HKLM（或 Program 文件夹）需要管理员权限，这是肯定的。一个讨厌的技巧是安装您自己的以管理员​​身份运行的更新程序，并代表用户进行更新。但是不要，这是一个等待发生的安全事故。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T21:18:06.433

可能为时已晚，但如果您可以进行最后一次管理更新，您可以通过[RegistryKey.GetAccessControl](http://msdn.microsoft.com/en-us/library/1w66447a.aspx)设置注册表项的权限，设置对密钥的写访问权限，然后使用[RegistryKey.SetAccessControl](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.setaccesscontrol%28v=vs.100%29.aspx)保存设置（这将需要管理员权限你第一次尝试这样做）

# java - 需要帮助 java 将 mp4 视频转换为 wmv 视频

> ID：15780274
> 
> 赞同：2
> 
> 时间：2013-04-03T06:24:58.023
> 
> 标签：java, mp4, wmv

我已经对在 java 中将 mp4 转换为 wmv 进行了一些研究，但除了将 mp4 转换为 wmv 的应用程序上的广告外，没有发现任何东西。在用 java 转换视频时，我不知道从哪里开始，如果有人能提供帮助，我将不胜感激。我不喜欢花哨的图形 Java 应用程序，所以只要命令行就可以了。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:33:55.270

你试过[JFFMPEG 吗](http://jffmpeg.sourceforge.net/)？此外，您可能想研究 mencoder 和 ffmpeg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:30:23.197

转换 `mp4`以`wmv`查看[ffmpeg](http://www.ffmpeg.org/)

# c# - 远程服务器返回错误：(401) Unauthorized in Zendesk

> ID：15780275
> 
> 赞同：3
> 
> 时间：2013-04-03T06:24:59.087
> 
> 标签：c#, exception-handling, http-status-code-401, zendesk

我必须从我的 MVC 应用程序访问 zendesk.com 的页面。我有用户名和身份验证票。当我尝试访问该页面时，它返回错误“远程服务器返回错误：（401）未经授权”。这是身份验证的代码

```
 string authTicket = "asdfsafdsafsdafdsafsf";       
 username = "user@mysite.com";
 string api_url = "https://mysite.zendesk.com/users/current.json";  
 string base64_creds = Convert.ToBase64String(Encoding.UTF8.GetBytes(username + ":" + authTicket));
 HttpWebRequest request = WebRequest.Create(api_url) as HttpWebRequest;
 request.Headers.Add("Authorization", "Basic " + base64_creds);
 using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
 {
      StreamReader reader = new StreamReader(response.GetResponseStream());
      string content = reader.ReadToEnd();
      //return Content(content);
      return View("https://mysite.zendesk.com/entries/mypage");
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T17:41:54.240

同样的事情也发生在我身上。不幸的是，我的背景是 Zendesk API Ruby 客户端，但我会尽力提供帮助。

我不清楚您是使用 API 令牌的令牌访问还是使用用户名/密码组合的密码访问，但看起来您正在使用密码访问（如果是令牌访问，那么冒号格式不会工作）。仔细检查 API 文档并查看是否仅允许代理或最终用户使用端点，并确保您提供的凭据与所需的凭据匹配。

此外，使用管理员帐户登录 Zendesk 并确保在使用令牌时启用令牌访问，或者在使用密码时确保启用密码访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-28T20:56:49.567

不确定，但您可能希望从`Admin Center-> Apps and Integrations -> Zendesk API -> Settings (after enabling Zendesk API) -> Password Access`. 我得到了`error: 403`，这样做为我解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-06T03:43:47.017

当连接到周围的各种 Zendesk 帐户时，你们中的一些人会遇到这个问题。部分 Zendesk 帐户设置了 IP 白名单，这意味着您只能从明确允许的 IP 地址或范围发出请求。对于被阻止的 IP，没有特定的错误消息，但它类似于“无法验证您”。

# php - plupload 破坏图像

> ID：15780276
> 
> 赞同：2
> 
> 时间：2013-04-03T06:24:59.423
> 
> 标签：php, upload, plupload

我正在使用 plupload.com/example_queuewidget.php jquery 小部件 - 但有些图像（主要是超过 1MB 的 jpeg）被上传但我无法打开它们。即使通过 ftp 手动下载它们 - 它们已损坏/损坏。有没有人遇到过类似的问题并且知道如何解决这个问题？

编辑：图像在上传之前工作。

使用示例中的代码：

```
$("#uploader").pluploadQueue({
    // General settings
    runtimes : 'flash,gears,silverlight,browserplus,html5',
    url : '../../upload.php',
    max_file_size : '6mb',
    chunk_size : '1mb',
    unique_names : true,

    // Specify what files to browse for
    filters : [
        {title : "Image files", extensions : "jpg,gif,png"}
    ],

    // Flash settings
    flash_swf_url : '/assets/script/plupload/plupload.flash.swf',

    // Silverlight settings
    silverlight_xap_url : '/assets/script/plupload/plupload.silverlight.xap'

});

// Client side form validation
$('form#galerie_upload').submit(function(e) {
    var uploader = $('#uploader').pluploadQueue();

    // Files in queue upload them first
    if (uploader.files.length > 0) {
        // When all files are uploaded submit form
        uploader.bind('StateChanged', function() {
            if (uploader.files.length === (uploader.total.uploaded + uploader.total.failed)) {
                $('form#galerie_upload')[0].submit();
            }
        });

        uploader.start();
    } else {
        alert('You must queue at least one file.');
    }

    return false;
}); 
```

upload.php 是来自[这里的示例 upload.php](https://github.com/moxiecode/plupload/blob/master/examples/upload.php)

希望有人已经偶然发现了这一点。

祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:56:30.967

错误出现在另一个脚本中，该脚本在上传后剪切了图像。我发布的代码有效！

# java - 将参数传递给测试方法并在测试套件中仅运行特定方法

> ID：15780277
> 
> 赞同：1
> 
> 时间：2013-04-03T06:24:59.587
> 
> 标签：java, junit

这是我的测试套件

```
@RunWith(Suite.class)
@SuiteClasses({ LoginTest.class })
public class SmokeTestSuite {

} 
```

这是我的 LoginTest.class 文件

```
public class LoginTest extends MSTestBase {

    @Test
    public void User1LoginTest() throws Exception { 
        /*code*/
    }

    @Test
    public void User2LoginTest() throws Exception {         
        /*code*/
    }

    @Test
    public void User3LoginTest() throws Exception {         
        /*code*/
    }
} 
```

我有2个问题，

```
1- Can I run my SmokeTestSuite so it only execute User3LoginTest() method from LoginTest.class file?
2\. Can I pass parameter to my Test Method from SmokeTestSuite file? 
```

# java - 接受信用卡信息/处理

> ID：15780280
> 
> 赞同：-3
> 
> 时间：2013-04-03T06:25:14.480
> 
> 标签：java, php, javascript, jquery

我将开始一个新项目，想知道我应该如何接受信用卡信息、收费等。我知道我可以使用 PayPal，但我宁愿做一些快速简单的事情，而无需付费跨账户的那些交易和东西。

让我再解释一下，我将不得不制作这个新项目，以便用户可以来，输入信用卡信息并将这笔钱添加到将成为公司客户端银行账户的银行账户中，这样当他们使用去支付他们存入账户的钱，所以它会被发送到所支付的任何东西，以及其他差异。

所以问题，我应该如何处理信用卡部分以及最好的方法是什么。我知道确保您的客户卡信息安全的整个团队是一个很大的麻烦。所以让我知道你的想法！

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:35:16.873

逐字逐句，你所要求的是不可能的。信用卡不是银行转账——完成的费用不会立即存入银行账户。在商家收到付款之前存在延迟，通常为一周或数周。

如果您想在不使用 PayPal 的情况下处理信用卡，您可能应该看看[Stripe](https://stripe.com/)。在开始项目之前仔细阅读他们的条款；目前尚不完全清楚您打算做什么，但您所描述的服务可能与他们的 ToS 的[限制使用](https://stripe.com/us/terms#restricted-use)部分发生冲突。（几乎所有其他信用卡处理器也会出现同样的问题；Stripe 的条款并不少见。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:47:19.347

您的要求可能听起来很简单，但这里存在巨大的合规风险。阅读[PCI 合规性](http://en.wikipedia.org/wiki/Payment_Card_Industry_Data_Security_Standard)以了解您必须处理多少繁文缛节。

它将帮助您更好地了解您必须实施哪些类型的控制来管理此过程，从而回答（至少部分）您的问题。

# php - 图像文件的 PHP 数据 URI 错误 - Windows 无法预览

> ID：15780281
> 
> 赞同：1
> 
> 时间：2013-04-03T06:25:14.713
> 
> 标签：php, html5-canvas, base64

我尝试转换使用生成的数据 URI

```
canvas.Canvas.toDataURL(); 
```

我只是想使用以下代码将数据 URI 存储为图像

```
<?php $data = $_POST['image_designed'];
echo $data; //Data URI
echo '<img src="'.$data.'"/>'; //Getting the image perfectly
//removing the "data:image/png;base64," part
$uri =  substr($data,strpos($data,",")+1);

header('Content-type: image/png');
echo base64_decode($uri);exit; //Just image place holder displaying instead of full image 
```

我得到以下数据

```
$data = data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAEsCAYAAADq/K67AAAgAElEQVR4Xky9WY8l6Xnn90acPffMqspauqqrit3sZrO5z2g0FATJIw0G8L0/gr
//Very longer data than this which cannot be pasted here 
```

最终的图像结果是错误的。仅显示错误图像占位符。我猜原因是“我在 $data 中间发现了很长的空间”。但它在 src 标签中很好地呈现了图像。

# qt - Qt5 应用程序在启动时崩溃

> ID：15780294
> 
> 赞同：2
> 
> 时间：2013-04-03T06:26:22.390
> 
> 标签：qt, qt-creator, qt5

我已经在 Ubuntu 12.04 上安装了 Qt 5.0.1 - 32 位版本。所有程序在启动时崩溃并显示以下消息：

> 程序意外结束。
> 
> /home/manager/Qt5.0.1/5.0.1/gcc/examples/opengl/2dpainting-build-Desktop_Qt_5_0_1_GCC_32bit-Debug/2dpainting 退出，代码为 0

我试过了：

1.  制作默认的 Qml 应用程序
2.  运行一些示例应用程序。

我也在调试和发布模式之间切换，但都崩溃了类似的消息。令人惊讶的是，“动画瓷砖示例”效果很好。有什么建议么 ？

* * *

编辑：

在调试模式下，这是我得到的：

> 调试开始
> 
> &"警告：GDB：设置控制终端失败：设备的 ioctl 不合适\n"
> 
> 未找到“QGLWidget”类的 RTTI 符号
> 
> 未找到“QGLWidget”类的 RTTI 符号
> 
> 未找到“QGLWidget”类的 RTTI 符号
> 
> 未找到“QGLWidget”类的 RTTI 符号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T04:56:03.093

首先检查您的图形驱动程序是否已安装。Qt5 或更高版本支持 OpenGL 3.0 或更高版本，如果你的系统是旧的，我想你需要检查显卡是否支持 OPENGL 版本，如上所述。

如果以上一切都很好，那么我认为您需要安装一些可以从 Ubuntu 轻松下载的 opengl 库。

问候安西夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:53:01.710

我在使用 Qt5 的 Windows 上遇到了同样的问题。据我了解，在 qt5 窗口子系统中移动到插件中，当应用程序启动时，QApplication 对象找不到这个库。

在 Windows 上，我将我的应用程序逐步跟踪到 Qt 代码中，并发现插件尝试从文件夹 ./plugins/system where 加载。是我们应用程序二进制文件的文件夹。这也是依赖的问题。来自 libGLES.dll 或 libGLES2.dll 的 Windows 特定插件依赖项。但是 GL 库必须与应用程序二进制文件放在同一文件夹中，而不是与插件放在同一文件夹中。

Windows 上的正确文件树如下所示

```
plugins
 system
   platform.dll
   windows.dll
libGLES.dll
MyApp.exe 
```

试着这样看。

# django - Django：如何通过 urls.py 传递请求 URL？

> ID：15780295
> 
> 赞同：2
> 
> 时间：2013-04-03T06:26:25.633
> 
> 标签：django, django-urls

我有一个 django 应用程序，其中包含以下与注销相关的条目`urls.py`：

```
(r'^logout/$', 'django.contrib.auth.views.logout', {'next_page':'/logout_page/'}),
(r'^logout_page/$', 'django.views.generic.simple.direct_to_template', {'template':'registration/logged_out.html'}), 
```

我想在 中添加一个“重新登录”链接`logged_out.html`，这需要我知道用户最初注销的位置（URL）。

如何在`logout`调度程序条目中引用该 URL，以及如何将其传递给该`logout_page`条目？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:45:43.490

我不完全理解“在此处传递变量”的意思，但是您可以将变量从像这样
的 r'^(category/page/(?P[0-9]+)/$ page_number 传递为url的变量

但我认为您正在寻找的是通过以前的偏好，您应该可以像这样在模板中访问它：

{{ request.META.HTTP_REFERER }}

所以你可以做类似的事情：登录

在 logout_page 的模板中实现你正在寻找的

# ruby-on-rails - 在 form_for rails 中创建复选框数组

> ID：15780302
> 
> 赞同：1
> 
> 时间：2013-04-03T06:26:47.377
> 
> 标签：ruby-on-rails, arrays, select, checkbox, form-for

我有这个 _form 文件。

```
<%= form_for(@company) do |f| %>
  <%= f.label :name %>
  <%= f.text_field :name %>
  <%= f.label :company_type %>
  <%= f.select :company_type_id, CompanyType.order(:name).map{|x| [x.name, x.id]} %>        
  <%= f.label :description %>
  <%= f.text_area :description %>
  <%= f.submit %>
<% end %> 
```

我的问题是如何更改选择

```
<%= f.select :company_type_id, CompanyType.order(:name).map{|x| [x.name, x.id]} %> 
```

以这种形式进入复选框列表？

公司类型型号：

```
class CompanyType < ActiveRecord::Base
  attr_accessible :name
  has_many :companies
end 
```

公司型号：

```
class Company < ActiveRecord::Base
  attr_accessible :description, :name, :company_type_id, :website
  belongs_to :type, :class_name => "CompanyType", :foreign_key => :company_type_id
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:34:32.173

尝试这个

```
<%= f.check_box :company_type_id, CompanyType.order(:name).map{|x| [x.name, x.id]} %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T16:54:25.550

尝试 checkboxes_select 方法

[http://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_check_boxes](http://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_check_boxes)

# android - 如何在Android上的LinearLayout中实现拖拽TextView

> ID：15780304
> 
> 赞同：2
> 
> 时间：2013-04-03T06:26:52.147
> 
> 标签：android

下面是我的layout.xml：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingLeft="30dp" >

    <LinearLayout
        android:id="@+id/ll1"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tv1"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:background="#000000"
            android:singleLine="true"      
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </LinearLayout>

</LinearLayout> 
```

我想让 TeextView tv1 只能水平拖动 LinearLayout ll1。
我实现如下：

```
ll1 = (LinearLayout)findViewById(R.id.ll1);
tv1 = (TextView)findViewById(R.id.tv1);

Rect rectf = new Rect();
ll1.getGlobalVisibleRect(rectf);
LayoutLeft = rectf.left;

tv1.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        float TouchX = event.getX();
        System.out.println("TouchX " + TouchX);
        switch(event.getAction()) {
        case MotionEvent.ACTION_MOVE:
            if(TouchX < LayoutLeft) {
                ll1.setPadding(0, 0, 0, 0);
            }
            else if(TouchX > (LayoutLeft + 100)) {
                ll1.setPadding(100, 0, 0, 0);
            }
            else {
                ll1.setPadding((int)(TouchX - LayoutLeft), 0, 0, 0);
            }
            break;
        case MotionEvent.ACTION_UP:
            break;
        case MotionEvent.ACTION_DOWN:
            break;
        }
        return true;
    }
}); 
```

但我从左到右测试拖动，我得到的 TouchX 值如下：

```
04-03 14:24:18.061: I/System.out(18468): TouchX 43.554024
04-03 14:24:18.631: I/System.out(18468): TouchX 92.101845
04-03 14:24:19.731: I/System.out(18468): TouchX 49.150528
04-03 14:24:20.371: I/System.out(18468): TouchX 100.82299
04-03 14:24:22.311: I/System.out(18468): TouchX 54.747032
04-03 14:24:22.781: I/System.out(18468): TouchX 74.458405
04-03 14:24:22.801: I/System.out(18468): TouchX 6.1168213
04-03 14:24:22.821: I/System.out(18468): TouchX 80.44317
04-03 14:24:22.851: I/System.out(18468): TouchX 21.571915
04-03 14:24:22.881: I/System.out(18468): TouchX 89.24452 
```

为什么 TouchX 值不按顺序排列？
我该如何修改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:14:29.930

ll1 是一个线性布局，我猜你的布局中有你的文本视图。如果将填充设置为线性布局，则视图中的子项也将添加填充。您必须为您的线性布局或您的文本视图设置触摸事件。您还可以更改边距而不是 textview。为您的问题找到我的解决方案

```
ll1 = (LinearLayout)findViewById(R.id.ll1);
tv1 = (TextView)findViewById(R.id.tv1);

LinearLayout.LayoutParams layout_param= new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.fill_parent,
                height * 2);
/or whatever you want to be margins for
layout_param.setMargins(30, 20, 30, 0);

Rect rectf = new Rect();
ll1.getGlobalVisibleRect(rectf);
LayoutLeft = rectf.left;

ll1.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        float TouchX = event.getX();
        System.out.println("TouchX " + TouchX);
        switch(event.getAction()) {
        case MotionEvent.ACTION_MOVE:
            //ALTER your layoutparams as per your need. 
            //do calculations on your layout param
            if(TouchX < LayoutLeft) {
                ll1.setLayoutParams(layout_param); 
            }
            else if(TouchX > (LayoutLeft + 100)) {
                ll1.setLayoutParams(layout_param); 
            }
            else {
                ll1.setLayoutParams(layout_param); 
            }
            break;
        case MotionEvent.ACTION_UP:
            break;
        case MotionEvent.ACTION_DOWN:
            break;
        }
        return true;
    }
}); 
```

希望这能解决您的问题。

# hive - 通过 hive --service jar 设置 hive 配置属性

> ID：15780306
> 
> 赞同：3
> 
> 时间：2013-04-03T06:26:59.087
> 
> 标签：hive

有人可以告诉我是否可以通过 cli 传递 hiveconf 属性。实际上我想使用 hive --service jar 运行一个 jar 并且在这个命令中我想设置一些属性。我尝试了以下命令，但没有奏效：

1.  hive --service jar myjar.jar my.example.jar.MyMainClass -hiveconf x=y
2.  hive --service jar myjar.jar my.example.jar.MyMainClass HIVE_OPTS x=y

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T15:04:41.807

不，据我所知，它不适用于 hive --service jar。**--hiveconf**可用于在启动 CLI 或 thrift 服务器时设置一些配置。

# jquery - 获取 id 并将其传递给 codeigniter 中的 UI Modal

> ID：15780310
> 
> 赞同：2
> 
> 时间：2013-04-03T06:27:13.080
> 
> 标签：jquery, codeigniter

我使用以下代码在 Jquery Ui 对话框模式中加载视图。

打开 Modal 的 Javsscript 代码：

```
<script>
       $.fx.speeds._default = 1000;
        $(function() {
            $( "#dialog_1" ).dialog({
                autoOpen: false,
                show: "blind",
                hide: "explode",
                height: 350,
                width: 450,
                modal: true
            });

            $('.loginForm').click(function(){               
                $('#dialog_1').dialog('open');
                return false;
            });     
        });
</script> 
```

此打开对话框的 Onclick：

```
<a class="loginForm" href=""  id="<?php echo $info['clf_id'];?>">
   <?php echo $info['clf_title'];?>
</a> 
```

**这是要在我加载视图的 Modal 上加载的 div：**
这是我遇到的问题，我已经通过`$id`了函数`classified_details($id);`。
此 id 是上述 `<a>`标签的实际 id。
我怎么能在我的代码中做到这一点，或者应该使用另一种方式？？？

```
<div id="dialog_1">
 <?php
    $data['classfied_details'] = $this->classified_model->classified_details($id);
    $this->load->view('classified_datail', $data);
   ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:03:35.950

我的方法是使用 ajax 调用用适当的数据填充对话框，然后显示它。

JS 会是这样的。您在控制器中调用一些操作

```
$('.loginForm').click(function(){    
     $.ajax({
         url: '/controller/action',
         data: { id: $(this).attr('id)},
         dataType: 'html',
         type: 'POST',
         success: function(data){
             $('#dialog_1').html(data);
             $('#dialog_1').dialog('open');     
         }
    });  
}); 
```

在您的操作中，您只需获取传递的 id 并调用模型函数。

```
$data['classfied_details'] = $this->classified_model->classified_details($_POST['id']);
$this->load->view('classified_datail', $data); 
```

您不应该在链接中使用两次 id 属性。尝试这样的事情：

```
<a class="loginForm" href="#" id="<?php echo $info['clf_id'];?>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:21:46.290

我假设：`$this->classified_model->classified_details($id);`是返回数组`$info`，你需要这个`ECHO:`

```
<a class="loginForm" href=""  id="<?php echo $classfied_details['info']['clf_id'];?>">
  <?php echo $classfied_details['info']['clf_title'];?>
</a> 
```

# javascript - 从 Jquery 中的 Div 类名中获取 Id

> ID：15780311
> 
> 赞同：7
> 
> 时间：2013-04-03T06:27:15.810
> 
> 标签：javascript, jquery, html

这是我的 HTML 代码

```
<div class="span12" id="test" style="width: 810px;">
        <ul class="nav nav-tabs">
            <li class="active"><a href="/#tab1" data-toggle="tab">New Stream</a></li>
            <li><a id="addspan" href="/#C" data-toggle="tab">+</a></li>
        </ul>
        <div class="tabbable">
            <div class="tab-content" id="tabContent">
                <div class="tab-pane active" id="tab1">
                    @Html.Partial("_NewStreamPartial",Model)
                </div>

            </div>
        </div>
    </div> 
```

这是我的 javascript

```
<script type="text/javascript">
    $(function () {
        var count = 2;
        $('#addspan').click(function () {
            var Id = $('.tab-pane active').attr('id');

          });
    });
</script> 
```

我想获得 Div Id whoes 类名称“.tab-pane active”（意味着我想获得活跃的 Div Id）我该怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-03T06:28:55.317

您可以使用`dot`加入`classes`选择器

*改变*

```
 var Id = $('.tab-pane active').attr('id'); 
```

*至*

```
 var Id = $('.tab-pane.active').attr('id'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:31:57.400

应该是这样的

```
var Id = $('.tab-pane.active').attr('id'); 
```

您在这里使用[后代选择器](http://api.jquery.com/descendant-selector/)。但在你的 dom 中，两个类都在同一个元素中。所以你必须选择两个[类](http://api.jquery.com/class-selector/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:55:24.973

尝试这个 ：

```
 $('#addspan').click(function () {
           alert($('.tab-pane .active').attr('id'));
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T06:31:33.747

你可以试试这个

```
$('.tab-pane active').click(function () {
   var Id = $(this).attr('id');
}); 
```

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T06:29:02.097

您可以使用 jQuery 从元素中获取任何 HTML 属性[`.attr()`](http://api.jquery.com/attr/)：

```
$('.tab-pane.active').attr('id'); 
```

同样，您也可以使用以下方法获取 JS 对象属性值[`.prop()`](http://api.jquery.com/prop/)：

```
$('.tab-pane.active').prop('id'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-30T06:51:48.963

试试下面的代码

```
$("#addspan").click(function(){console.log($(this)[0].id);}); 
```

# sql - 使用 SQL 和 API 获取分配给类的客户端

> ID：15780312
> 
> 赞同：1
> 
> 时间：2013-04-03T06:27:21.160
> 
> 标签：sql, api

我需要从 API 中选择一个 ClientIds 和 RSSID 的列表，在该 API 中，客户注册了一个在特定日期和时间开始的类。我已经能够创建 SQL 命令来拉回正确的 ClassId 列表，但我在其他方面遇到了麻烦。基于 API 可用的有限信息，特别是直接调用 SQL 命令的功能，我认为这将是完成它的最佳方式，但它似乎并没有拉回正确的客户端。您对为什么这不起作用或执行此操作的更好方法有任何想法吗？

```
stringList = "classId1, classId2, classId3" 

SELECT v.ClientId, c.RSSID 
FROM [VISIT DATA] v 
LEFT JOIN Clients c ON v.ClientId = c.ClientID 
WHERE v.ClassId in (" + stringList + @") 
GROUP BY v.ClientId, c.RSSID" 
```

# java - 如何在 Java 中使用 MyCanvas 创建动态更新的 GUI？

> ID：15780317
> 
> 赞同：1
> 
> 时间：2013-04-03T06:27:42.920
> 
> 标签：java, swing, awt, java-2d, mixing

如何动态更新用 java 中的 MyCanvas 创建的 GUI？我正在尝试编写一个名为 Lotus 的棋盘游戏。

这是对游戏的描述：玩家尝试将他们的棋子（两人游戏中的 10 个，三人或四人游戏中的六个）从开始区域沿着游戏轨道移动到结束区域。棋子移动的空间数量等于它们堆叠的其他棋子的数量。只有堆栈顶部的棋子可以移动。比赛跑道有两个入口，但只有一条通往终点区的路线。赛道包含一个“蹦床”空间，玩家在此位置着陆时可以将移动距离加倍。第一个移除所有棋子的玩家获胜。

基本上，到目前为止，我有两节课。一个 GameEngine 类和一个 GUI 类。

游戏引擎.java

```
package GameEngine;
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Graphics;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Stack;
import java.util.Timer;

import javax.swing.JFrame;

import GUI.MyCanvas;

/**
 * Lotus Game Engine 
 * 
 * Functionality:
 * 1) Generates a GUI and modifies it in real-time based on player input through the Finch.
 * 2) Tracks whose current turn it is.
 * 3) Manages all game pieces on the Lotus game board.
 * 4) Determines when a player has won the game.
 * 
 *
 */
public class GameEngine extends Canvas {

    // Instantiate a few variables
    boolean isRunning = true; // Game is currently active
    private java.util.Timer timer;

    /* Create 25 stacks that correspond to each position on the game board
    ArrayList<Stack<Integer>>[] positions = new ArrayList<Stack<Integer>>[25]; 

    public GameEngine() {
        for (int i=0; i<positions.length; i++) {
            positions[i] = new Stack<?>();
        }
    } 
    */

    //The following 8 Stacks are named using the following conventions:
    //posS## - The 'S' indicated that this is one of the starting Stacks.
    //       - The first number indicates the player (1 or 0)
    //       - The second number indicates the size of the starting stack (1, 2, 3, or 4)

    StackByCompositionWithArrayList<Integer> posS01 = new StackByCompositionWithArrayList<Integer>();
    StackByCompositionWithArrayList<Integer> posS02 = new StackByCompositionWithArrayList<Integer>();
    StackByCompositionWithArrayList<Integer> posS03 = new StackByCompositionWithArrayList<Integer>();
    StackByCompositionWithArrayList<Integer> posS04 = new StackByCompositionWithArrayList<Integer>();

    StackByCompositionWithArrayList<Integer> posS11 = new StackByCompositionWithArrayList<Integer>();
    StackByCompositionWithArrayList<Integer> posS12 = new StackByCompositionWithArrayList<Integer>();
    StackByCompositionWithArrayList<Integer> posS13 = new StackByCompositionWithArrayList<Integer>();
    StackByCompositionWithArrayList<Integer> posS14 = new StackByCompositionWithArrayList<Integer>();

    // Launch GUI

    public static void main(String[] args){
        MyCanvas c = new MyCanvas();
        JFrame frame = new JFrame();
        frame.setSize(420, 420);
        frame.setDefaultCloseOperation(frame.EXIT_ON_CLOSE);
        frame.getContentPane().add(c);
        frame.setVisible(true);
    }

    //Loads proper number of game pieces (0's and 1's) into starting stack positions.

    public void setUpStacks(){
        //Single Stacks
        posS01.push(0);
        posS11.push(1);
        //Double Stacks
        for (int x = 0; x < 2; x++){
            posS02.push(0);
            posS12.push(1);
        }
        //Triple Stacks
        for (int x = 0; x < 3; x++){
            posS03.push(0);
            posS13.push(1);
        }
        //Quad Stacks
        for (int x = 0; x < 4; x++){
            posS04.push(0);
            posS14.push(1);
        }

    }

    //@author rshannon

    public void gameLoop()
    {
        timer = new Timer();
        timer.schedule(new GameLoop(), 0, 1000 / 60); //new timer at 60 fps, the timing mechanism
    }

    private class GameLoop extends java.util.TimerTask
    {
        public void run() { // this becomes the loop

            /*
            if(pos24counter==10 || pos25counter==10){
                isRunning = false;
            }
            */

            if (!isRunning){
                timer.cancel(); // Stop timer
                //declareWinner(); // Declare winner
            }
        }
    }

public void Updater (StackByCompositionWithArrayList<Integer> stack, int position, boolean player, Graphics g){

        int distance = stack.size();

        //PLAYER 1 == TRUE == BLUE == 1
        //PLAYER 2 == FALSE == RED == 0

        int finalPosition;

        if (position == 15){
            position = position - 3;
        }
        if ((position == 16) && (distance > 1)){
            position = position - 3;
        }
        if ((position == 17) && (distance > 2)){
            position = position - 3;
        }

        finalPosition = position + distance;

        if (finalPosition == 1){
            pos1.push(stack.pop());
        }
        if (finalPosition == 2){
            pos2.push(stack.pop());
        }
        if (finalPosition == 3){
            pos3.push(stack.pop());
        }
        if (finalPosition == 4){
            pos4.push(stack.pop());
        }
        if (finalPosition == 5){
            pos5.push(stack.pop());
        }
        if (finalPosition == 6){
            pos6.push(stack.pop());
        }
        if (finalPosition == 7){
            pos7.push(stack.pop());
        }
        if (finalPosition == 8){
            pos8.push(stack.pop());
        }
        if (finalPosition == 9){
            pos9.push(stack.pop());
        }
        if (finalPosition == 10){
            pos10.push(stack.pop());
        }
        if (finalPosition == 11){
            pos11.push(stack.pop());
        }
        if (finalPosition == 12){
            pos12.push(stack.pop());
        }
        if (finalPosition == 13){
            pos13.push(stack.pop());
        }
        if (finalPosition == 14){
            pos14.push(stack.pop());
        }
        if (finalPosition == 15){
            pos15.push(stack.pop());
        }
        if (finalPosition == 16){
            pos16.push(stack.pop());
        }
        if (finalPosition == 17){
            pos17.push(stack.pop());
        }

//*************************************************************************************************************\\
//*************************************************************************************************************\\
//*************************************************************************************************************\\
//*************************************************************************************************************\\
//*************************************************************************************************************\\

        //Could make it so the GUI Updater method continuously peeks at each stack, it it
        //returns 1 then the circle should be blue, if it returns 0 then the circle should
        //be red, and else, it sets the circle to black (empty.)

        //OR

        //Could make it so the Updater Class executes only when a Finch interaction is made
        //In this case, the parameters would include the stack where the position is, (we will
        //need to know the size of the stack, so I think we should implement a size method in
        //the StackByCompositionWithArrayList Class definition.) Also, we will need to a boolean
        //value to determine which player's turn it is. This method will need access to all of the
        //position stacks (pos1-pos25.) I think that this class should be written in the GameEngine
        //class.

        if(distance > 1){
            if (player == true){

            }
            else{

            }
        }

    }

} 
```

图形用户界面.java

```
package GUI;

import java.awt.GridLayout;
import javax.swing.JFrame;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.util.ArrayList;
import java.util.Random;

import javax.swing.*;

import GameEngine.StackByCompositionWithArrayList;

public class MyCanvas extends Canvas{

    public MyCanvas(){

    }

    public void paint(Graphics g){
        g.setColor(Color.black);
        g.drawLine(30, 100, 100, 30);
        g.drawLine(300, 30, 100, 30);
        g.drawLine(300, 30, 370, 100);
        g.drawLine(370, 350, 370, 100);
        g.drawLine(370, 350, 320, 350);
        g.drawLine(320, 120, 320, 350);
        g.drawLine(320, 120, 280, 80);
        g.drawLine(120, 80, 280, 80);
        g.drawLine(120, 80, 80, 120);
        g.drawLine(80, 120, 80, 250);
        g.drawLine(80, 250, 100, 270);
        g.drawLine(170, 270, 100, 270);
        //Breaking pattern, moving to Left most line.
        g.drawLine(30, 100, 30, 270);
        g.drawLine(30, 270, 80, 320);
        g.drawLine(230, 320, 80, 320);
        g.drawLine(230, 320, 230, 250);
        g.drawLine(300, 250, 230, 250);
        g.drawLine(300, 250, 300, 130);
        g.drawLine(250, 130, 300, 130);
        g.drawLine(250, 130, 250, 200);
        g.drawLine(150, 200, 250, 200);
        //Breaking pattern, moving to smallest vertical line.
        g.drawLine(170, 270, 170, 250);
        g.drawLine(100, 250, 170, 250);
        g.drawLine(100, 250, 100, 130);
        g.drawLine(150, 130, 100, 130);
        g.drawLine(150, 130, 150, 200);
        g.fillOval(110,140,30,30);  //14
        g.fillOval(110,180,30,30);  //13
        g.fillOval(140,210,30,30);  //12
        g.fillOval(185,210,30,30);  //11
        g.fillOval(260,140,30,30);  //17
        g.fillOval(260,180,30,30);  //16
        g.fillOval(230,210,30,30);  //15
        g.fillOval(185,280,30,30);  //10
        g.fillOval(80,280,30,30);   //9
        g.fillOval(40,210,30,30);   //8
        g.fillOval(40,130,30,30);   //7
        g.fillOval(80,55,30,30);    //6
        g.fillOval(185,40,30,30);   //5
        g.fillOval(290,55,30,30);   //4
        g.fillOval(330,130,30,30);  //3
        g.fillOval(330,210,30,30);  //2
        g.fillOval(330,290,30,30);  //1 

    }

    public void test(Graphics g){
        g.setColor(Color.red);
        g.fillOval(330,210,30,30);  //2
        g.fillOval(330,290,30,30);  //1 
    }

} 
```

当我在 GUI.java 中调用测试方法时，它不会更新 GUI？

我在这里有什么关于这个烂摊子的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:34:29.137

1.  使用 Swing JPanel 而不是 AWT Canvas

2.  覆盖 JPanel 的paintComponent 而不是 Canvas 的绘制

3.  将所有绘画放入数组中，在执行paintComponent / paint之前做好准备，在paintComponent / paint only循环内这个数组

4.  回答您的问题是添加代码行 super.paint(g);，然后清除旧画并显示新画

# iphone - 拾取的图像保存会导致速度变慢

> ID：15780319
> 
> 赞同：1
> 
> 时间：2013-04-03T06:27:49.593
> 
> 标签：iphone, ios, objective-c, uiimagepickercontroller, nscoding

我通过以下代码从 iphone 中选择了一张图片：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info  {
    [self dismissViewControllerAnimated:YES completion:nil];

    UIImage *pickedImg = (UIImage*)[info objectForKey:UIImagePickerControllerOriginalImage];

    [self.photoBtn setBackgroundImage:pickedImg forState:UIControlStateNormal];
    [[self.tblView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]].contentView addSubview:photoBtn];
    data.img = pickedImg;
    //data.img = nil;
    [self.tblView reloadData];
} 
```

然后通过此代码保存：

```
-(void)saveProfile  {

    data.firstName = firstName.text;
    data.lastName = lastName.text;
    data.phoneMob = phoneMob.text;
    data.phoneHome = phoneHome.text;
    data.emailOffice = emailOff.text;
    data.emailPersonal = emailPers.text;
    data.address = address.text;
    data.company = company.text;
    data.website = website.text;
    //NSLog(data.img);

    NSMutableData *pData = [[NSMutableData alloc]init];

    NSString *path = [common saveFilePath];

    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc]initForWritingWithMutableData:pData];
    [data encodeWithCoder:archiver];
    [archiver finishEncoding];
    [pData writeToFile:path atomically:YES];

    [self.navigationController popViewControllerAnimated:YES];
} 
```

但是当我试图保存配置文件时，它会导致速度变慢。然后我尝试`data.img = nil`了第一种方法。现在它没有缓慢和没有图像保存。如何用图像固定保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:31:52.630

您的主线程被保存操作锁定。将用于将图像写入文件的代码放在它自己的线程中：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0), ^{
    NSMutableData *pData = [[NSMutableData alloc]init];
    NSString *path = [common saveFilePath];

    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc]initForWritingWithMutableData:pData];
    [data encodeWithCoder:archiver];
    [archiver finishEncoding];
    [pData writeToFile:path atomically:YES];
}); 
```

这将允许主线程在文件被写出时继续。

# c# - 多选 ctrl+button 在运行时单击

> ID：15780322
> 
> 赞同：5
> 
> 时间：2013-04-03T06:27:52.383
> 
> 标签：c#, winforms, select, user-controls

在我的 winform 上，我有在每次按钮单击时动态创建的用户控件。我希望在运行时能够通过单击一次然后按下 ctrl 按钮来选择它们。我设法做到了，但只是为了一个。我怎样才能为所有人工作？我的代码：

```
 private void TControl_Click(object sender, EventArgs e) //TControl is the name of usercontrol
    {
        TControl tc = new TControl();
        Control ctrl = sender as Control;
        if (ctrl != null)
       tc = ctrl;//it doesn't work like this. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:33:01.213

您可以拥有选定控件的列表。只需确定单击控件时是否按下了 Ctrl 并将其添加到选定列表（如果之前添加了控件，您也可以将其删除）：

```
List<TControl> selectedControls = new List<TControl>();

private void TControl_Click(object sender, EventArgs e)
{
    if ((ModifierKeys & Keys.Control) == 0)
        return;

    TControl tc = (TControl)sender;
    if (selectedControls.Contains(tc))
        return; // you can remove control here

    selectedControls.Add(tc);
} 
```

# android - 如何停止或重新启动 YouTubePlayerFragment、android、Google Youtube API for Android 的新实例

> ID：15780325
> 
> 赞同：2
> 
> 时间：2013-04-03T06:28:13.377
> 
> 标签：android, android-fragments, youtube-api

在下面的代码中，我想从 google 的 youtube API for Android 启动一个 YouTubePlayerFragment 对象。但是它只会在我第一次运行应用程序时启动。我无法控制 Google API 的称为 YouTubePlayerFragment 的片段的生命周期，它扩展了片段，并且基本上是一个内部带有 youtube 播放器的片段。

我无法控制这个 youtube 播放器。获取 youtubeplayer 对象并控制播放器生命周期的唯一方法是调用 onInitializationSuccess() 方法，您不能这样做，因为该方法由操作系统调用。这是一个回调方法。

我无法弄清楚为什么我会遇到空指针异常和其他错误的所有这些问题。基本上，我从可见性中删除了视频，然后仅在用户单击 WebView 中的链接后才显示可见的片段，其中 URL 中包含子字符串“youtube”。然后它会将 youtube 片段设置为可见。我想获取 URL 并开始播放该链接上的视频。

如果我尝试片段事务 remove() 和 add() 方法，我会得到空指针并崩溃。

如果我不删除片段。然后下次用户点击 webview 中的 youtube 链接时，它会开始播放与之前的链接中相同的 youtube 视频，而不是刚刚点击的链接。它在之前停止的相同位置开始播放。

我要做的就是杀死这个 youtube API 片段并重新启动一个新片段。

我该如何解决这个问题？

```
 public class MainActivity extends YouTubeFailureRecoveryActivity {

   @Override
   public void onCreate(Bundle savedInstanceState) {  
   super.onCreate(savedInstanceState);

   handler = new Handler();
   storedVideoUrl = ""; 
   playTube = false;

   setContentView(R.layout.fragments_demo);
   pageView = (WebView) findViewById(R.id.webView1);
   coverImage = (ImageView) findViewById(R.id.imageView1);

   findViewById(R.id.youtube_fragment).setVisibility(View.INVISIBLE);

   youTubePlayerFragment = (YouTubePlayerFragment)
   getFragmentManager().findFragmentById(R.id.youtube_fragment);

youTubePlayerFragment.initialize(DeveloperKey.DEVELOPER_KEY, MainActivity.this);

coverImage.setVisibility(View.INVISIBLE);

pageView.loadUrl("http://www.example.com/");  

WebSettings webSettings = pageView.getSettings();

//ebSettings.setJavaScriptEnabled(true);

WebViewClient mWebClient = new WebViewClient()
{
    // Override page so it's load on my view only
    @Override
    public boolean shouldOverrideUrlLoading(WebView  view, String  url)
    {
        storedVideoUrl = url;
        playTube = true;

     if ( url.contains("youtube") == true ){
        // Load new URL Don't override URL Link

         videoRoot = youTubePlayerFragment.getView();
         videoUrl = url.substring(29, 40);
         coverImage.setVisibility(View.VISIBLE);
         videoRoot = youTubePlayerFragment.getView();

         if(videoRoot==null){
         videoRoot.setVisibility(View.INVISIBLE);
         }else{
             videoRoot.setVisibility(View.VISIBLE);
         }

            return true;

    } else{

     coverImage.setVisibility(View.INVISIBLE);

     // Return true to override url loading (In this case do nothing).
     return false;
     // if return is true, do nothing. don't load url

    }
 }

  };

   pageView.setWebViewClient(mWebClient);

 }  // end onCreate 

  public YouTubePlayer.Provider getPlayer() {
return player;
 }

 @Override
  public void onInitializationSuccess(YouTubePlayer.Provider provider, YouTubePlayer player,
  boolean wasRestored) {
if (!wasRestored) {

 player.loadVideo("videoUrl");
    }
   }

  @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
if (keyCode == KeyEvent.KEYCODE_BACK)
{

    if (pageView.canGoBack()){

        if((videoRoot.getVisibility())==View.VISIBLE){
             coverImage.setVisibility(View.INVISIBLE);
             videoRoot.setVisibility(View.INVISIBLE);

             return true;
        }else {

        pageView.goBack();

        return true;
        }
    }
}

return super.onKeyDown(keyCode, event);
 }

  @Override
  protected Provider getYouTubePlayerProvider() {
// TODO Auto-generated method stub
return null;
  }

  }  // end fragment demo activity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:37:13.323

我对 Android Youtube API 不是很熟悉，但我建议你在添加`YoutubeFragment`. 在您的 Fragment 中使用它：

```
public static ColorPickerDialog newInstance(int num) {
            ColorPickerDialog f = new ColorPickerDialog();

            // Supply num input as an argument.
            Bundle args = new Bundle();
            args.putInt("num", num);
            f.setArguments(args);

            return f;
    } 
```

并添加您`Fragment`使用类似于此的内容：

```
 @SuppressLint("CommitTransaction")
    public void showDialog() {
            mDialogInstance++;
            // DialogFragment.show() will take care of adding the fragment
            // in a transaction. We also want to remove any currently showing
            // dialog, so make our own transaction and take care of that here.
            FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
            Fragment prev = getSupportFragmentManager().findFragmentByTag("dialog");
            if (prev != null) {
                    ft.remove(prev);
            }
            ft.addToBackStack(null);

            // Create and show the dialog.
            DialogFragment mColorPicker = ColorPickerDialog
                            .newInstance(mDialogInstance);
            mColorPicker.show(ft, "dialog");
    } 
```

如果这能解决您的问题，请检查此项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:59:23.957

您不能删除`fragment`已在您膨胀的 XML 布局中声明的 a。如果您想随意添加和删除片段，您必须创建它们并以编程方式添加它们。

这可能就是您在尝试删除`YouTubePlayerFragment`.

> 如果我尝试片段事务 remove() 和 add() 方法，我会得到空指针并崩溃。

# windows-phone-7 - wp7列表框选择

> ID：15780343
> 
> 赞同：0
> 
> 时间：2013-04-03T06:29:32.090
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone, windows-phone-7.1.1

我有一个包含 1000 多个项目的列表框。

在xml中

```
<ListBox 
//some code here
SelectionChanged="OnSelectionChanged">
    <ListBox.ItemTemplate>
         <DataTemplate>
             <controls:MyCustomItem/>
         </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

在 cs

```
 private void OnSelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var item = lb.SelectedItem as MyCustomItem;
        var vm = DataContext as ViewModel;
        if (vm == null) return;
        foreach (var it in vm.ItemsForBinding)
        {
            it.IsSelected = false;
        }
        item .IsSelected = true;
    } 
```

在 MyCustomItem xaml

```
<UserControl
//Some code here
Style="{Binding Path=IsSelected, Converter = {StaticResource BoolToStyle}}">
    <Border 
    </Border>
</UserControl> 
```

Where IsSelected - 我的 ViewModel 的属性之一。转换器返回两种样式中的一种（如果选择了第一个，第二个 - 如果没有）

总是工作，但我知道 - 它非常耗费资源，而且是错误的决定。怎么做才对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:08:15.113

这个[帖子](https://stackoverflow.com/a/7359024/1616443)帮帮我！只需覆盖我的 ListBox 的默认 ItemContainerStyle。

我删除了：

方法 OnSelectionChanged、UserControl MyCustomItem、样式转换器和

```
<ListBox.ItemTemplate>
     <DataTemplate>
         <controls:MyCustomItem/>
     </DataTemplate>
</ListBox.ItemTemplate> 
```

来自 xml。

# php - 如何将所有值存储在表单内的数组按下按钮中。

> ID：15780345
> 
> 赞同：1
> 
> 时间：2013-04-03T06:29:37.177
> 
> 标签：php, javascript, jquery, arrays

我有以下html代码：

```
Region:<span id="region">Rajkot</span><br>
Activity:<span id="Select">Cricket</span><br>
Radius:<input type="text" id="radius" value="50000"></input><br>
Gender:<select name="Gender" id="Sex">
            <option value="1">Male</option>
            <option value="2">Female</option>
            <option value="3">Both</option>
        </select><br>
Date:<input type="text" id="date" value="2013:04:03 11:54:00"></input><br>
<input type="button" value="Go"> 
```

我想在按钮单击时将所有值存储在数组中。

我想要具有以下功能：
当我单击`go`按钮时，html 的所有值都存储在数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:32:51.783

把所有东西都放进去`form`（我假设你已经有了）

```
<form>

Region:<span id="region">Rajkot</span><br>
Activity:<span id="Select">Cricket</span><br>
Radius:<input type="text" id="radius" value="50000"></input><br>
Gender:<select name="Gender" id="Sex">
            <option value="1">Male</option>
            <option value="2">Female</option>
            <option value="3">Both</option>
        </select><br>
Date:<input type="text" id="date" value="2013:04:03 11:54:00"></input><br>
    <input type="button" value="Go">
</form> 
```

`$('form').serializeArray();`将为您解决问题。 [参考](http://api.jquery.com/serializeArray/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:34:25.510

使用[serializeArray()](http://api.jquery.com/serializeArray/)

```
 $('form').submit(function() {
     $('form').serializeArray();
      return true;
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:47:23.060

使用您的结构的简单方法：

[小提琴](http://jsfiddle.net/JvMFH/2/)

```
//javascript
function gatherData(){
    var arrData = [];
    arrData['region'] = $('#region').html();
    arrData['Select'] = $('#Select').html();
    arrData['radius'] = $('#radius').val();
    arrData['Gender'] = $('#Sex').val();
    arrData['date'] = $('#date').val();
    return arrData;
 }

$(document).ready(function(){
    //add Id or class to the button for better selector
    $('input[type=button]').click(function(){ 
        var data =  gatherData();
        console.log(data);
        //alert(data);
    });
}); 
```

考虑使用其他人建议的形式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T16:06:46.773

```
<?php
session_start();
if(!isset($_POST["submit"])){
$_SESSION["abc"]=array("C", "C++","JAVA","C#","PHP");
 }

  if(isset($_POST["submit"])){
   $aa=$_POST['text1'];

   array_push( $_SESSION["abc"],$aa);
   echo "hello";
    foreach( $_SESSION["abc"] as $key=>$val)
    { 

        echo $val;
    }
  }

 ?> 
```

# sql - 从 Laravel 4 中的不同 PostgreSQL 模式中选择表

> ID：15780346
> 
> 赞同：0
> 
> 时间：2013-04-03T06:29:38.997
> 
> 标签：sql, postgresql, pdo, laravel, laravel-4

在 Laravel 4 中，如何使用来自另一个模式的表（除了 中定义的默认模式`database.php`）来查询？

L4 文档没有显示出任何能够做到这一点的迹象......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:36:47.470

[http://laravel.com/docs/database](http://laravel.com/docs/database)

在连接数组中定义另一个模式配置

```
'pgsql' => array(
    'driver'   => 'pgsql',
    'host'     => 'localhost',
    'database' => 'database',
    'username' => 'root',
    'password' => '',
    'charset'  => 'utf8',
    'prefix'   => '',
    'schema'   => 'public',
),
'newConnection' => array(
    'driver'   => 'pgsql',
    'host'     => 'localhost',
    'database' => 'database',
    'username' => 'root',
    'password' => '',
    'charset'  => 'utf8',
    'prefix'   => '',
    'schema'   => 'public',
), 
```

然后根据文档切换到它：

```
$users = DB::connection('foo')->select(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T23:30:56.503

问题是：如何在查询中使用备用模式？

答案是定义另一个模式，然后选择连接到它。例子：

```
$schema_conn = DB::connection('{ARRAY_KEY_FOR_OTHER_SCHEMA_CONFIG}');
$query = $schema_conn->where('property', 'value')->get(); 
```

# php - 如何仅为某些字段向 phpMyAdmin 添加自定义编辑器？

> ID：15780355
> 
> 赞同：5
> 
> 时间：2013-04-03T06:30:22.333
> 
> 标签：php, serialization, phpmyadmin, editor, customization

我想与之集成[`JSON Editor Online`](https://github.com/josdejong/jsoneditoronline)以[`phpMyAdmin`](http://www.phpmyadmin.net/)编辑某些包含以 JSON 格式编码的 PHP 数组的表字段。

我浏览了[配置选项](http://wiki.phpmyadmin.net/pma/Config)，唯一与字段编辑器相关的选项是：

```
CharEditing: Which editor should be used for CHAR/VARCHAR fields 
```

我读了这个[SO question](https://stackoverflow.com/questions/12448851/html-wysiwyg-editor-for-text-fields-in-phpmyadmin)，它指向`tbl_change.php`但看不到任何简单的自定义方法。

我希望我们能做这样的事情：

*   定义哪些字段需要自定义编辑器（例如基于数据类型、字段名称等标准）
*   将这些字段与自定义编辑器的名称相关联
*   以标准化方式创建自定义编辑器（使用 JS，我们可以描述字段值如何加载到编辑器中，以及使用哪个事件/值将编辑后的值保存回`DB`.

**有人知道仅针对某些字段向 phpMyAdmin 添加自定义编辑器的方法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:48:34.217

我搜索 phpmyadmin 文件我发现了两个我认为与此相关的文件

`sql.php`我有`libraries/display_tbl.lib.php`一个想法`display_tbl.lib.php`是一个变量

```
line 1293: $grid_edit_class = 'grid_edit'; 
```

这是具有此类名称的 phpmyadmin 编辑器查找可编辑字段的类名称。`grid_edit2`现在 phpmyadmin 编辑器已禁用，您可以将其更改为与此工作类似的其他内容。

`gis_data_editor.js`是 phpmyadmin 编辑器，包含在`sql.php`

现在您可以包含您的编辑器文件`sql.php`并`grid_edit2`为您的编辑器设置，但是您在保存编辑字段时遇到了另一个问题。

在我的搜索中，`makegrid.js` 您可以在第 29 行看到 post 脚本，您应该使您的编辑器与此脚本兼容，或者编写您自己的 post 脚本以将编辑后的数据发送到`tbl_replace.php`这是 post 数据标题的示例

```
ajax_request:true
sql_query:
token:0203ddaa0c51d4776e93921e6ca1281f
db:sepidarsoft_portal
table:archive_media
clause_is_unique:1
where_clause[]:`archive_media`.`_id` = 45
fields[multi_edit][0][]:1364198434
fields_name[multi_edit][0][]:UTime
fields_null[multi_edit][0][]:
rel_fields_list:
do_transformations:false
transform_fields_list:
relational_display:K
goto:sql.php
submit_type:save
_nocache:1364974511419938233 
```

希望这些信息对您有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:31:32.863

目前不支持插件自定义编辑器。

但是，您可以很容易地为某些字段`libraries/insert_edit.lib.php`更改功能更改使用的编辑器`PMA_getValueColumn`，该功能负责获取用于字段编辑的 HTML 代码。

PS：以上是关于即将推出的phpMyAdmin 4.0，我不确定旧版本。

# ruby-on-rails - 为什么 .rvm/gems 文件夹中有这么多文件夹？

> ID：15780373
> 
> 赞同：-1
> 
> 时间：2013-04-03T06:31:32.947
> 
> 标签：ruby-on-rails, ruby, rvm

我仍在尝试了解 rvm 的工作原理并且几乎没有问题。如果有人能帮助我更好地理解它，我将不胜感激

1 - 我做了**gem env**并得到了这个

```
 GEM PATHS:
   /home/myname/.rvm/gems/ruby-1.9.3-p194
   /home/myname/.rvm/gems/ruby-1.9.3-p194@global 
```

为什么 gem 有 2 个不同的文件夹？

2 - 在 ~/.rvm/gems/ruby-1.9.3-p194 文件夹中，我有多个目录

```
ruby-1.9.3-p125@ajax_forms  ruby-1.9.3-p194@myapp
ruby-1.9.3-p194             ruby-1.9.3-p194@rails_composer
ruby-1.9.3-p194@global      ruby-1.9.3-p194@rails-prelaunch-signup 
```

怎么来的 ？我已经创建了 30 多个应用程序，因此每个应用程序的 gem 应该有 30 个文件夹，或者应该只有一个文件夹。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:35:55.637

看起来您已经创建了几个具有相同 ruby​​ 版本的 gemset。

在此处阅读有关宝石组的信息：

[https://rvm.io/gemsets/basics/](https://rvm.io/gemsets/basics/)

[https://rvm.io/gemsets/listing/](https://rvm.io/gemsets/listing/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:59:51.727

RVM 管理不同的 ruby​​ 版本。这也提供了gemset的设施。gemsets 将由我们根据我们的使用情况创建。我们可以为不同的项目创建不同的gemset，这样项目之间安装的gem就不会发生冲突。

例如：ruby-1.9.3-p125@ajax_forms

它说

1.  ajax_forms - 是一个 gemset，其中包含特定于项目的所有 gem。
2.  ruby-1.9.3-p125 - 表示带有补丁级别的 ruby​​ 版本。

创建不同的 gemset 不是强制性的，但如果你这样做了，就可以清楚地了解用于特定项目的 gem。

当我们切换到不同的 ruby​​ 版本时，如果你给命令 rvm gemset list 将列出在这个 ruby​​ 版本下创建的所有 gemsset。

# iphone - iOS - 如何在横向模式下显示 UILabel 和 UIImageView

> ID：15780379
> 
> 赞同：0
> 
> 时间：2013-04-03T06:31:54.840
> 
> 标签：iphone, ios, ipad, uiimageview, uilabel

我在 AppDelegate.m 文件中创建了 UIImageView 和 UILabel 以显示标题图像
我的默认方向是横向模式，但我无法正确显示图像，如下图所示![UIImage 处于横向模式](https://i.stack.imgur.com/ECJaK.jpg)

所需的结果应该如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/IVbPi.jpg)

我还尝试在我的`AppDelegate.m`文件中旋转图像和标签这是我的代码
但它不显示图像并且标题只是消失了。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *viewController1 = [[LMSFirstViewController alloc] initWithNibName:@"LMSFirstViewController" bundle:nil];
    UIViewController *viewController2 = [[LMSSecondViewController alloc] initWithNibName:@"LMSSecondViewController" bundle:nil];
    UIViewController *viewController3 = [[LMSThirdViewController alloc] initWithNibName:@"LMSThirdViewController" bundle:nil];

    UILabel *title=[[UILabel alloc]initWithFrame:CGRectMake(50, 0, 5000, 50)];
    title.text=@"Library Management System";
    [title setFont:[UIFont systemFontOfSize:24]];
    [title setBackgroundColor:[UIColor colorWithRed:0 green:0 blue:0 alpha:0]];
    title.textColor=[UIColor redColor];
    title.transform=CGAffineTransformMakeRotation(M_PI_2);

    UIImageView *imageView=[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 5000, 50)];

    imageView.image=[UIImage imageNamed:@"LMS.jpg"];
    imageView.transform=CGAffineTransformMakeRotation(M_PI_2);

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2,viewController3,nil];

    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    [self.window addSubview:imageView];
    [self.window addSubview:title];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:35:16.923

您创建了要以纵向模式显示的视图。因此它显示如下

当应用程序进入横向模式时，会在此过程中调用一些方法，并使用这些方法重新构建视图。

看看这个[问题](https://stackoverflow.com/questions/5559652/how-do-i-detect-the-orientation-of-the-device-on-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:59:10.700

谢谢大家的回复，

我没有在 AppDelegate.m 中创建 UIImageView 和 UILabel，而是将
它写在我的`viewController.m`文件中并且它可以正常工作

```
-(void)viewDidLoad{
     UILabel *title=[[UILabel alloc]initWithFrame:CGRectMake(50, 0, 5000, 50)];
    title.text=@"Library Management System";
    [title setFont:[UIFont systemFontOfSize:24]];
    [title setBackgroundColor:[UIColor colorWithRed:0 green:0 blue:0 alpha:0]];
    title.textColor=[UIColor redColor];

    UIImageView *imageView=[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 5000, 50)];

    imageView.image=[UIImage imageNamed:@"LMS.jpg"];
    [self.view addSubView:imageView];
    [self.view addSubView:title];

} 
```

它会根据您在 iOS 6 中的方向自动旋转 UIImageView 和 UILabel

我不知道这种方法是否正确，因为如果您希望在项目的每个视图中显示某些内容，则应该将其写入`AppDelegate.m`文件中
。不是更好的编程，您不应该在每个视图中对其进行编码，而应该在`AppDelegate.m`文件中实现它但就我而言，我得到了结果。
我会尝试解决它。

# r - R 和错误处理

> ID：15780381
> 
> 赞同：1
> 
> 时间：2013-04-03T06:32:06.213
> 
> 标签：r, error-handling

我试图掌握 R 中的异常处理，或作为一个整体的异常处理。

我发现[这篇文章](https://stackoverflow.com/questions/12672351/exception-handling-and-stack-unwinding-in-r)首先很有用。但是现在我不知道我应该如何处理一个特定的问题。假设我们有一个变量列表，我希望用户选择（通过 svDialogs）其中一个。

```
require(svDialogs)
var<-c("A","B","C","D")
var1<-dlgList(var,multiple=FALSE)$res 
```

如果用户不选择任何内容或点击`cancel`R，则返回一个空字符串。如果发生这种情况，我想编程抛出错误并退出程序。我怎样才能做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:37:01.447

要抛出错误，请进行一些自定义验证，然后使用`stop()`：

例如：

```
if(length(var1)==0) stop("My error message) 
```

* * *

由于您的原始代码不包含错误，因此只有一个空字符串`tryCatch`或任何其他错误捕获机制对您的情况没有帮助。

# ios - 跟踪分配/内存使用情况并在 XCode 中单步执行代码？

> ID：15780382
> 
> 赞同：3
> 
> 时间：2013-04-03T06:32:06.487
> 
> 标签：ios, objective-c, xcode, memory, instruments

我的应用程序正在下载 base64 编码的内容，在大多数情况下是 PDF 文档。它通过 Web 服务传输并封装在 SOAP 中。文档的大小可达 100 MB。

要在本地存储这些文件，我需要从 SOAP 信封中提取它们，解码 base64 字符串并写入存储。

问题是，大约 1 MB 的文档会使临时内存使用量增加 20-30 MB。在 Instruments 中跟踪分配时，我可以看到这些峰值。这不是什么大问题。但是 60 MB 的文档会增加大约 800 MB 的内存，这对于 iOS 设备来说绝对是太多了。

我正在尝试更改应用程序，以便可以防止或至少降低峰值。唉，我不完全知道哪些代码行负责。

是否有可能单步执行代码并同时查看当前分配或内存使用情况？

我知道当应用程序由 Instruments 执行时，单步执行不起作用。那么，还有其他选择吗？

下面是 Instruments 的样子： ![在此处输入图像描述](https://i.stack.imgur.com/e2tWo.png)

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T01:08:28.647

为了跟踪某个时间段内的分配情况，我通常做的是使用检查范围按钮在时间轴中标记起点和终点：

![仪器检测范围按钮](https://i.stack.imgur.com/COzBi.png)

这会过滤分配列表，并仅显示在该时间段内完成的分配。我通常按​​“# living”列进行排序，以找出在此期间分配了哪些类型的对象。打开扩展的详细信息面板后，我选择了哪个可疑对象，然后单击类名旁边的箭头：

![工具分配](https://i.stack.imgur.com/ADvTD.png)

这将显示该类型对象的实例列表。选择一个，将在扩展面板中向您显示堆栈跟踪。该信息已经可以提示您如何分配这些对象。

此外，如果您再次使用类名旁边的箭头选择特定实例，您将看到该对象在内存事件方面的历史记录。此外，如果您双击堆栈跟踪调用，它将显示发生该内存事件的代码：

![对象堆栈跟踪](https://i.stack.imgur.com/9273r.png)

有了这些信息，您应该能够知道发生了什么。如果您选择的对象不是罪魁祸首，您可以继续检查其余对象。为了导航回对象列表，您可以单击导航栏中的“对象摘要”：

![分配工具导航栏](https://i.stack.imgur.com/jxRlZ.png)

很好的狩猎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:48:23.583

查看此[链接](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)，该链接可帮助您了解堆分配。它将帮助您跟踪分配。希望这会有所帮助。您还可以使用活动监视器，它可以让您在使用应用程序时在任何特定时间跟踪应用程序消耗的内存。

您还可以检查分配内存的代码，请找到附加的屏幕截图。![在此处输入图像描述](https://i.stack.imgur.com/rwR3x.png)

# c# - 如何在不进行字符转换的情况下制作绝对 URL？

> ID：15780385
> 
> 赞同：1
> 
> 时间：2013-04-03T06:32:21.893
> 
> 标签：c#, url

SO上已经有类似的问题，答案是这样的：

```
new Uri(new Uri(base_url),relative_url); 
```

然而，这不是正确的答案，因为它会转换字符。考虑您有相对网址，例如：

```
hello%2Fworld.html 
```

这是有效的 url，当你运行上面的代码时，你会得到一个 page `hello/world.html`，这在技术上是有效的，但它是无用的，因为服务器不太可能同时拥有两个 URL 的页面的 2 个副本。

在我编写自己的用于组合 URL 的自定义函数之前，是否有任何现有的函数可以组合 URL 并且不**进行**任何转换？

* * *

我当前的解决方案基于“发现”，即根据方案完成字符转换。对于 ftp 协议，字符被保留。由于这有点骇人听闻，我还确保将来我不会对这种行为的改变感到惊讶。我的代码如下：

```
public static class UrlIO
{
    public static string Combine(string baseUrl, string relativeUrl)
    {
        const string ftp = "ftp";

        var scheme = new Uri(baseUrl).Scheme;
        return scheme + new Uri(new Uri(ftp + baseUrl.DeleteStart(scheme)), relativeUrl).AbsoluteUri.DeleteStart(ftp);
    }

    static UrlIO()
    {
        #if DEBUG
        Assert.AreEqual("ftp://foobar.com/hello_world.html", UrlIO.Combine("ftp://foobar.com/", "/hello_world.html"));
        Assert.AreEqual("ftp://foobar.com/hello_world.html", UrlIO.Combine("ftp://foobar.com/xxx", "/hello_world.html"));
        Assert.AreEqual("ftp://foobar.com/xxx/hello_world.html", UrlIO.Combine("ftp://foobar.com/xxx/", "hello_world.html"));
        Assert.AreEqual("ftp://foobar.com/xxx/hello%2Fworld.html", UrlIO.Combine("ftp://foobar.com/xxx/", "hello%2Fworld.html"));
        Assert.AreEqual("http://foobar.com/xxx/hello%2Fworld.html", UrlIO.Combine("http://foobar.com/xxx/index.html", "hello%2Fworld.html"));
        #endif
    }
} 
```

请将`DeleteStart`扩展方法更改为您图书馆中的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:39:05.357

您可以为此使用以下扩展方法。在静态类中添加它。

用法，

```
string fullUrl=relative_url.ConvertToFullUrl(); 
```

扩展方法，

```
public static string ConvertToFullUrl(this string relativeUrl)
{
    if (!Uri.IsWellFormedUriString(relativeUrl, UriKind.Absolute))
    {
        if (!relativeUrl.StartsWith("/"))
        {
            relativeUrl = relativeUrl.Insert(0, "/");
        }
        if (relativeUrl.StartsWith("~/"))
        {
            relativeUrl = relativeUrl.Substring(1);
        }

        return string.Format(
            "{0}://{1}{2}{3}",
            HttpContext.Current.Request.Url.Scheme,
            HttpContext.Current.Request.Url.Host,
            HttpContext.Current.Request.Url.Port == 80 ? "" : ":" + HttpContext.Current.Request.Url.Port.ToString(),
            relativeUrl);
    }
    else
    {
        return relativeUrl;
    }
} 
```

# javascript - 使用 innerHTML 在 iPhone 上不起作用

> ID：15780387
> 
> 赞同：0
> 
> 时间：2013-04-03T06:32:29.630
> 
> 标签：javascript, jquery, iphone, mobile-safari

我正在使用 jQuery 来处理 AJAX 请求，如下所示：

```
function success_callback(p){
    $.ajax({url:"http://maps.googleapis.com/maps/api/geocode/json?latlng=" + p.coords.latitude.toFixed(2) + "," + p.coords.longitude.toFixed(2) + "&sensor=true",success:function(result){
        var locationInfo = eval ("(" + result + ")");
        document.getElementById("zip-number").innerHTML = locationInfo.results[0].address_components[7].short_name;
    }});
} 
```

此代码成功地将找到的邮政编码的值写入计算机上 ID 为邮政编码的 div。当我在 iPhone 上访问该网站时，即使我允许共享我的位置，它也只是显示为空白。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:40:04.517

您正在尝试执行跨域 AJAX 请求，由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，通常不允许这样做。避免这种情况的一种方法是使用[跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。此 URL 确实支持 CORS（`Access-Control-Allow-Origin=*`标头），但移动 safari会先向服务器[发送 OPTIONS请求，地图 API 后端不支持此请求。](http://developer.apple.com/library/safari/#documentation/appleapplications/Conceptual/SafariJSProgTopics/Articles/XHR.html)

解决此问题的其他方法是使用[JSONP](http://en.wikipedia.org/wiki/JSONP)，但[服务不再支持](http://code.google.com/p/gmaps-api-issues/issues/detail?id=1872#c9)它。

**使用该地理编码服务的最佳方式是使用来自[Google Maps JavaScript API v3的](https://developers.google.com/maps/documentation/javascript/)[地理编码服务](https://developers.google.com/maps/documentation/geocoding/)，这样您就不会遇到任何跨域请求问题，因为库会自行管理这些请求。**

# php - 无法调用 MySQL 触发器

> ID：15780388
> 
> 赞同：0
> 
> 时间：2013-04-03T06:32:29.540
> 
> 标签：php, mysql, mysqli

创建触发器成功

```
mysqli_query($this->conn,
   "CREATE TRIGGER `before_delete_address`
    BEFORE DELETE ON address FOR EACH ROW
    DELETE FROM city WHERE cityid = OLD.cityid"); 
```

但是当我执行以下查询时

```
DELETE FROM address WHERE addressid = 18 
```

它输出以下错误代码

```
Error Code: 1451\. Cannot delete or update a parent row: a foreign key constraint fails (`gamecomp`.`address`, CONSTRAINT `cityid` FOREIGN KEY (`cityid`) REFERENCES `city` (`cityid`) ON UPDATE CASCADE)    0.039 sec 
```

地址表的约束设置为`On Update cascade`和`On Delete restrict`。

地址表的列是`addressid, address, cityid, zipcode`，cityid 是对包含的城市表的 FK 引用`cityid, city, countryid`

有人可以指出我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:01:57.443

`address FOREIGN KEY (cityid) REFERENCES city (cityid) ON DELETE RESTRICT`意味着您不能删除任何`address.cityid`引用的城市。由于这正是您的触发器所做的，因此您会收到外键约束错误。

即使您将此触发器设为`AFTER DELETE ON`，您可能仍然有其他引用城市的地址行，这意味着您可能仍然会收到外键约束错误。您还应该验证表上没有触发器，`city`这可能会破坏`address`.

在`cityid`删除相应的`city`. 坦率地说，我不相信你甚至应该尝试这样做。在设计良好的模式中，一些孤立的记录不应该成为问题。如果它们真的给您带来麻烦，可以使用 cronjob 定期删除它们，而不是使用触发器。

如果你坚持触发，试试这个：

```
CREATE TRIGGER `delete_city_orphans`
AFTER DELETE ON address FOR EACH ROW
DELETE FROM city WHERE city.id=OLD.cityid
   AND NOT EXISTS (SELECT * FROM address WHERE cityid=OLD.cityid) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:36:53.923

而不是 BEFORE DELETE ON city 使用 AFTER DELETE ON 地址

# java - JSP 文件在 Eclipse 中运行良好，但在 Tomcat/webapps 中运行良好

> ID：15780390
> 
> 赞同：0
> 
> 时间：2013-04-03T06:32:43.237
> 
> 标签：java, javascript, jsp, tomcat

我有一个*page.jsp*，它包含三个字段：旧密码、新密码和确认密码。我有一个 JavaScript 来检查确认密码和新密码是否相同。当我在 Eclipse 中测试它时，它可以按要求工作，所以我将它部署在*Tomcat / webapps*中。但是当我运行它时，它不会检查新密码和确认密码字段。

请告诉我该怎么做？

* * *

我的网络应用程序的屏幕截图：

源代码：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<style type="text/css">
html, body, div, h1, h2, h3, h4, h5, h6, p, img, dl,
  dt, dd, ol, ul, li, table, tr, td, form, object, embed,
  article, aside, command, details, fieldset,
  figcaption, figure, footer, group, header, hgroup, legend
 {
  margin: 0;
  padding: 0;
  border: 0;
  }
html {
  font: 82.5% verdana, helvetica, sans-serif;
  background: #fff;
  color: #333;
  line-height: 1;
  direction: ltr;
  }
  html, body {
  position: absolute;
  height: 100%;
  min-width: 100%;
  } 

  table {
  border-collapse: collapse;
  border-spacing: 0;
  }

  .button {
  min-width: 46px;
  text-align: center;
  color: #444;
  font-size: 11px;
  font-weight: bold;
  height: 27px;
  padding: 0 8px;
  line-height: 27px;
  border-radius: 2px;
  transition: all 0.218s;
  border: 1px solid #dcdcdc;
  background-color: #f5f5f5;
  cursor: default;
  }

  *+html .button {
  min-width: 70px;
  }
  button.button,
  input[type=submit].button {
  height: f1f1f1px;
  line-height: 29px;
  vertical-align: bottom;
  margin: 0;
  }

  .button:hover {
  border: 1px solid #c6c6c6;
  color: #333;
  text-decoration: none;
  transition: all 0.0s;
  background-color: #f8f8f8;
  box-shadow: 0 1px 1px rgba(0,0,0,0.1);
  }
  .button:active {
  background-color: #f6f6f6;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
  }
  .button:visited {
  color: #666;
  }  
   .button-submit {
  border: 1px solid #3079ed;
  color: #fff;
  text-shadow: 0 1px rgba(0,0,0,0.1);
  background-color: #4d90fe;
  }
  .button-submit:hover {
  border: 1px solid #2f5bb7;
  color: #fff;
  text-shadow: 0 1px rgba(0,0,0,0.3);
  background-color: #357ae8;
  }
  button-submit:active {
  background-color: #357ae8;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.3);
  }

  .footer-bar {
  bottom: 0;
  height: 35px;
  width: 100%;
  overflow: hidden;
  }
  .content {
  padding: 0 44px;
  }

  .table{
    padding: 0 55px
  }
.header
  {
  padding: 10px 20px 5px;
  background:#00AAFF;
  border: 1px solid #e5e5e5;
  height:20px;
  }
</style>
<script type="text/javascript">
function ccheck()
{

newPsw=document.f1.newPsw.value;

old=document.f1.old.value;
confirm=document.f1.confirm.value;

if(old=="" || old==null)
{
alert("Plz. Enter Your old password");
document.f1.old.focus();
return false;
}
if(confirm=="" || confirm==null)
{
alert("Plz. Enter Your confirm Password");
document.f1.confirm.focus();
return false;
}
i
if(newPsw=="" || newPsw==null )
{
alert("Plz. Enter Your new password");
document.f1.newPsw.focus();
return false;

}
if(newPsw!=confirm)
    {
    alert("new password and confirm does not match");
    document.f1.newPsw.focus();
    return false;

    }

return true;
}
</script>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
<body bgcolor="">
<form name="f1" id="f1" action="checkPassword.jsp" onsubmit="return ccheck()">
        <div align="center" style="padding-top: 30px">
            <table  cellspacing="10" cellpadding="10">
                <tr>
                    <td width="200" height="30"><h5>Old Password</h5></td>
                    <td  height="30"><input name="old" type="password"></td>
                </tr>
                <tr>
                    <td  height="30"><h5>New Password</h5></td>
                    <td  height="30"><input name="newPsw" type="password"></td>
                </tr>
                <tr>
                    <td height="30"><h5>Confirm Password</h5></td>
                    <td  height="30"><input name="confirm" type="password"></td>
                </tr>
            </table>
        </div>
        <div class="footer-bar"  align="center" style="padding-top: 30px">
            <table align="center" >
                <tr >
                    <td width="100" align="center"><input type="submit" class="button button-submit" value="Submit"  /></td>
                    <td width="100" align="center"><input type="reset" class="button button-submit" value="Reset" /></td>
                </tr>
            </table>
        </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:43:39.903

在你的问题中，我看到...

```
if(confirm=="" || confirm==null)
{
  alert("Plz. Enter Your confirm Password");
  document.f1.confirm.focus();
  return false;
}
i
if(newPsw=="" || newPsw==null )
{ 
```

这额外`i`是一个问题，并且可能导致 jsp 失败。我只是不明白为什么它会在 Eclipse 中工作。

旁注：完成此工作后，最好将样式部分分解为 .css 文件。

# javascript - 使用种子字符串在猫鼬中创建 ObjectId

> ID：15780393
> 
> 赞同：2
> 
> 时间：2013-04-03T06:32:47.163
> 
> 标签：javascript, node.js, mongodb, mongoose, nosql

我想使用种子字符串在猫鼬中创建一个objectid，例如-

```
Id = new ObjectId("alex"); 
```

类似的东西。但是我看到的任何生成 objectid 的示例都要求您以 objectid 的哈希格式传入字符串。

有没有办法做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:20:09.310

ObjectIds 不接受种子。如果您只想为您的文档自定义 _id，您可以在架构中将它们声明为字符串、数字等。

```
Schema({ _id: String }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-05T11:11:50.283

如果有人仍在寻找解决方案，以下要点可能会有所帮助。

```
import mongoose from "mongoose";
import RandomGenerator from "random-seed-generator";

const mockIt = (modifier = Math.random()) => {
  let mock = RandomGenerator.createWithSeeds("Mock" + modifier).hexString(24);
  return mock;
};

export const mockObjectId = (str, options) => {
  const { plainText = false } = options || {};
  const id = mongoose.Types.ObjectId(mockIt(str));
  return plainText ? id.toString() : id;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-16T14:02:38.840

您可以使用此代码

```
/**
 * https://docs.mongodb.com/manual/reference/method/ObjectId/
 * @param seed - string allowing to create predictable mongo id value ( the same for any execution )
 * @param date - date of creation - first 4 bytes of id
 * @returns {ObjectId}
 */
function mongoIdFromSeed(seed, date = "2022-01-01") {
  return new ObjectID(dayjs(date).unix().toString(16) + crypto.createHash("md5").update(seed).digest("hex").substr(0, 16));
} 
```

对于给定的`seed`，`date`您将随时获得相同的结果。

* * *

此代码取决于库`dayjs`，您可以使用删除此依赖项

```
new Date(date).getTime() / 1000 | 0 
```

代替`unix`方法。我是说

```
function mongoIdFromSeed(seed, date = "2022-01-01") {
  return new ObjectID((new Date(date).getTime() / 1000 | 0).toString(16) + crypto.createHash("md5").update(seed).digest("hex").substr(0, 16));
} 
```

# c# - 如何从另一个表单更改用户控件中定义的网络浏览器列表框

> ID：15780395
> 
> 赞同：0
> 
> 时间：2013-04-03T06:32:54.123
> 
> 标签：c#, webbrowser-control

我一直在尝试将项目添加到`listbox`HTML 文件中定义的项目，显示在网络浏览器中。我在用户控件中创建了这个列表框，我尝试了这段代码，但结果是空的：

**我的代码：**

```
public string _listBoxProperty
    {
        set { webBrowser1.Document.GetElementById("Select1").OuterHtml = value; }
         get { return webBrowser1.Document.GetElementById("Select1").OuterHtml; }
    } 
```

非常感谢你:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:46:48.047

试试这个：

您只能在 webBrowser1_DocumentCompleted 上进行修改，否则它会给您一个错误，这是您正在使用的 webbrowser 控件的属性

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
 {
    HtmlElement opt = webBrowser1.Document.CreateElement("option");
    HtmlElement ddlPopulate = webBrowser1.Document.GetElementById("Select1");
    opt.InnerText = "TestValue";
    ddlPopulate.AppendChild(opt);
 } 
```

希望这有帮助。

# mongodb - mongodb最佳数组匹配

> ID：15780401
> 
> 赞同：2
> 
> 时间：2013-04-03T06:33:29.703
> 
> 标签：mongodb, find

假设我有以下结构

```
[{    
    name: 'John',    
    tags: ['unix','databases']    
},    
{    
    name: 'Jane',    
    tags: ['excel', 'power-point','word', 'outlook']   
},   
{  
    name: 'Smith',  
    tags: ['databases', 'linux', 'android']  
}] 
```

我想搜索以下人员`['databases','servers','c++']`

我想要一个查询，它会告诉我两个最佳匹配是 Smith 和 John，每个匹配一个。

这感觉类似于拥有两个术语向量并找到余弦积 [http://en.wikipedia.org/wiki/Vector_space_model](http://en.wikipedia.org/wiki/Vector_space_model)

PS
我意识到我可能可以做一个 $in 然后计算我的程序中类似术语的数量（用Java编写），但是有没有办法从mongo本身得到答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:43:37.023

我想你为什么不使用map-reduce。在新集合中创建标签的倒排索引，并将 ID 存储在 Tags 中。然后您可以计算所有标签的匹配项，然后按最大匹配项排序显示。在此处查看博客之一：http: [//ngsiolei.blogspot.com/2010/11/basic-inverted-index-in-mongodb.html](http://ngsiolei.blogspot.com/2010/11/basic-inverted-index-in-mongodb.html). 尽管它看起来像更多的文本搜索，但您也可以使用相同的搜索。即使在将来，这种方法也会让您灵活地为标签添加一些权重年龄以获得更好的结果。集合将如下所示。因此，当我为 Database both 搜索 C++ 时，我会在两者中都得到 James，我会将其相加 2 并且 J 将得到 1 ，所以 James 匹配得更多。这样，我们将为每个标签创建一个文档，它将是 Id ，因此您的搜索会更快。如果您想要一些简单的方法，请使用聚合框架（[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)）并使用标签列上的展开

```
 C++ : ["James" , "J" ] , Database : ["James"] 
```

# cryptography - 为什么在我的明文中添加随机数不能帮助击败密码分析？

> ID：15780407
> 
> 赞同：0
> 
> 时间：2013-04-03T06:34:17.977
> 
> 标签：cryptography

免责声明：我认为这是一个愚蠢的想法，我要求解释*为什么*这是一个愚蠢的想法:)

假设我在加密文件之前，我选择了一个`x`介于 0 和一个 constant 之间的随机数`y`。然后我用`x`随机字节之前和`y-x`之后的字节填充我的明文，这样文件大小就不会泄露 x。在运行正常的加密例程之前，我将 x 的实际值添加到我的缓冲区中。

这意味着用相同的密钥加密相同的明文很少会产生相同的加密输出，而不会增加加密或解密的工作量。

直觉上，我觉得这在减少密码分析的弱点方面应该非常方便，但我从未读过它的提及，所以我猜它没有。谁能向我解释为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:43:29.237

实际上，这不是一个坏主意，并且正在被使用。看看：[http](http://en.wikipedia.org/wiki/Padding_%28cryptography%29) ://en.wikipedia.org/wiki/Padding_%28cryptography%29 ，尤其是来自谷歌学者搜索的几篇论文： [http ://scholar.google.de/scholar?hl=en&as_sdt =0,5&q=random+padding+密码分析](http://scholar.google.de/scholar?hl=en&as_sdt=0,5&q=random%20padding%20cryptanalysis)（很多都是免费的，点击右边的pdf链接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T03:12:48.727

我会说这里的正确答案是“视情况而定”。我知道这可能不是您要寻找的，但请考虑一下。

1.  您的加密数据是否只是一小部分信息（例如 0 到 2^32 之间的数字），如果这条信息是大型算法的一部分，我可以暴力破解整个算法并完全忽略您的加密数据。

2.  这个密文的“密钥”或秘密是什么。你可以随心所欲地填充，但如果你的密钥是“7”，那么世界上所有的填充都不会帮助你。（这类似于小密码 + salt。如果您的密码空间只是 3 个 ASCII 字符，Salt 将无济于事）

3.  您使用哪种加密模式？如果您处于 ECB 模式，则此填充可以提供极大的帮助并且基本上是必需的。其他操作模式（OFB，CTR，...）基本上会为您填充数据，这样一遍又一遍地加密同一文件会产生不同的密文。

我会提供一个简单的答案，从密码学的角度来看，填充数据永远不会受到伤害......

# api - 我可以使用 Monkeyrunner 测试我自己的 API 吗？

> ID：15780414
> 
> 赞同：0
> 
> 时间：2013-04-03T06:34:34.253
> 
> 标签：api, testing, monkeyrunner

我有一个应用程序，它是在 Android 之上编写的，它使用来自 Android 的 BT、WiFi、NFC APIS。此应用程序将公开一些 API，其他用户可以使用这些 API 来创建自己的应用程序。但在公开 API 之前，我想对其进行测试。我可以使用 Monkey runner 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:24:20.057

**monkeyrunner**对 API 一无所知。它的主要目标是将事件发送到设备或模拟器，也许启动一些活动或截取一些屏幕截图，所有这些都来自*外部*android 代码。

# mongodb - 如何在 MongoDB 中存储时间？作为字符串？给出任意年/月/日？

> ID：15780415
> 
> 赞同：16
> 
> 时间：2013-04-03T06:34:40.713
> 
> 标签：mongodb

例如“23:55:00”

我正在将巴士时刻表数据库从 Postgres 转换为 Mongo。
Postgres 有一个`time without timezone`我用来存储停止时间的数据类型，我很难弄清楚如何迁移它。

给它一个任意的年/月/日以将其转换为 javascript Date 对象似乎没有多大意义，但我确实计划在解析数据后对时间进行一些简单的计算，以显示类似'下一个停止时间'，所以如果我将它存储为一个字符串，我仍然必须最终将它转换为一些东西来进行比较

我对 MongoDB 真的很陌生，任何建议都将不胜感激

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-03T09:07:51.573

您可以将时间存储为数字（自 00:00:00 以来的秒数）。它将在需要时自然排序并轻松转换为 hh:mm:ss 格式。

```
//from 23:55:00 to the stored time
storedTime = hours * 3600 + minutes * 60 + seconds

//from the stored time to 23:55:00
hours = storedTime / 3600  // needs to be an integer division
leaves = storedTime - hours * 3600
minutes = leaves / 60
seconds = leaves - 60 * minutes 
```

# ios - IOS只是冻结

> ID：15780416
> 
> 赞同：0
> 
> 时间：2013-04-03T06:34:41.027
> 
> 标签：ios, objective-c, queue, grand-central-dispatch

我的代码中某处有一个非常讨厌的错误，这使应用程序无响应。它不会崩溃，它只会让一切都没有响应，我需要重新启动应用程序才能让它再次工作。

有不少人反映了这个问题，但我自己从来没有遇到过，这使得调试非常困难。我也无法重现。然而，今天早上我终于把它冻住了。这次我没有对应用程序做任何特别的事情。我点击“暂停程序执行”按钮以获取堆栈跟踪（见下文）我不太确定该堆栈跟踪是否与问题有关，但我会发布它。

你有过类似的问题吗？你如何调试这样的事情？任何建议将不胜感激！

谢谢

以下是我做的一些可能是原因的事情：

定时器

```
self.turnLefttimer = [NSTimer timerWithTimeInterval:1.0f target:self selector:@selector(timerUpdate) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:self.turnLefttimer forMode:NSDefaultRunLoopMode]; 
```

大量的 UIAnimations：

```
 [UIView animateWithDuration:0.15f delay:0 options:UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationOptionCurveEaseOut animations:^{
         //Animations in here
     } completion:nil]; 
```

游戏中心回调，并使用 dispatch_async 获取主队列。

```
 - (void)getMatchData:(void(^)(NSData *matchData))block {

    __weak GameViewController *weakSelf = self; 
    [self.gkMatch loadMatchDataWithCompletionHandler:^(NSData *matchData, NSError *error) {
       //Handle data 

        if (block)
            block(matchData);
    }];
}

    //In another function
    [self getMatchData:^(NSData *matchData) {
        dispatch_async(dispatch_get_main_queue(), ^{

             //Do stuff with data
        });
    }]; 
```

经常使用块、操作队列和 GCD，但请确保我不要在 dispatch_async 块中使用 dispatch_sync 来创建死锁。

还可以在同一个视图上使用 UIPanGestureRecognizer 和 UITapGestureRecognizer 来移动它。

![在此处输入图像描述](https://i.stack.imgur.com/bcFFV.png)

# performance - 没有.Copy和.Paste的vba复制单元格格式

> ID：15780418
> 
> 赞同：1
> 
> 时间：2013-04-03T06:34:46.683
> 
> 标签：performance, excel, vba

我的主要目标是完全避免剪贴板在 VBA 中进行任何类型的复制和粘贴操作。

我可以通过以下方式复制值和公式来实现这一点。

*   `Range("B1:B5").Value = Range("A1:A5").Value`-> 用于复制值
*   `Range("B1:B5").Formula = Range("A1:A5").Formula`-> 用于复制公式

现在困难的部分是复制单元格/范围格式（包括条件格式）与源范围相同。即使这样，我也能够在级别单元格（不是从范围级别），但这不是理想的情况，运行时太糟糕了。

例如：`Cells(x,y).Font.Bold = Cells(u,v).Font.Bold`

即使在将计算模式禁用为手动并将警报显示为 false 之后，运行时间也太糟糕了。

任何人都可以建议最好的方法来复制没有剪贴板和更好的运行时间的格式。

# yii - 禁用规则模型 yii 上的字段

> ID：15780419
> 
> 赞同：0
> 
> 时间：2013-04-03T06:34:50.930
> 
> 标签：yii

我正在尝试禁用更新规则模型上的字段，但出现错误。

我试试：

```
array('date', 'constraint', 'readOnly'=>true, 'on'=>'update'), 
```

但我有这个错误：

“include（constraint.php）：无法打开流：没有这样的文件或目录”

我可以使用 htmloptions 从视图中禁用，但我需要从模型中执行此操作，因为在更新时我需要禁用超过 5 个字段。

我怎么能这样做？

提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T07:59:31.963

您正在使用不存在的验证器声明规则，因此出现错误是正常的：

```
array('date', 'constraint', 'readOnly'=>true, 'on'=>'update'), 
```

此行执行以下操作：将验证器应用于场景`constraint`上的`date`字段，参数设置为。`update``readOnly``true`

验证器`constraint`不存在在 Yii 中有一个内置的功能，所以如果你没有创建它，那么它就不存在！

文档：

*   [验证规则](http://www.yiiframework.com/doc/guide/1.1/en/form.model#declaring-validation-rules)
*   [模型规则验证](http://www.yiiframework.com/wiki/56/)

**编辑：**在您的表格中，您可以执行以下操作：

```
<?php 
    echo $form->textField(
        $model,
        'email',
        array('readonly'=>($model->scenario == 'update')? true : false)
    );
?> 
```

如您所见，只读值将取决于场景。

# asp.net-mvc-3 - 如何防止通过 Ajax 发布的跨站请求伪造？

> ID：15780430
> 
> 赞同：0
> 
> 时间：2013-04-03T06:35:57.503
> 
> 标签：asp.net-mvc-3

`AntiforgeryToken()`我在 Mvc 项目中有一个有价值的表单。`ValidateAntiforgeryToken`在提交表单时，它使用MvC 项目中 相应的控制器 Post 操作进行验证。

它进入确认页面。在有两个隐藏表单的按钮的确认中，这将转到上面前面相同的 Post 操作。我已经添加`Html.Antiforgerytoken()`了两个隐藏的表单。单击按钮时，我们不需要 Form Post[page reload]，而不是这个 Using Ajax post。

我曾尝试使用 Ajax 发布（使用`Antiforgerytoken`），但它没有命中发布操作。显示 404 错误。

您能否建议如何启用`AntiforgryToken`使用 Ajax 帖子？为此，什么类型的代码句柄以及它在哪里添加？

**表格详情：**

```
 <form  method="post" action="">
     @Html.AntiForgeryToken()
     <input type="hidden" name="Name" value="@downloadInfo.Name" />
     <input type="hidden" name="Company" value="@downloadInfo.Company" />
     <input type="hidden" name="Email" value="@downloadInfo.Email" />
     <input type="hidden" name="Phone" value="@downloadInfo.Phone" />
 </form> 
```

**阿贾克斯邮报：**

```
$.ajax({     
    url: url,
    type: 'POST',
    data: JSON.stringify(Formdatas),
    contentType: 'application/json; charset=utf-8',
    beforeSend: showLoadingGraphic(id),
    success: onSuccessfulPost
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:03:07.650

如果您收到不是来自令牌的 404，则说明您的 URL 或方法无效。您正在将您的令牌包含在您的 ajax 表单帖子中，因此请使用 Fiddler 工具查看请求的 URL 并首先修复它。

我猜您使用“URL”的 Ajax 调用不正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:02:55.420

尝试生成应有的表单（使用 Html.BeginForm 帮助器）：

```
@using (Html.BeginForm("SomeAction", "SomeController", FormMethod.Post, new { id = "myForm" }))
{
    @Html.AntiForgeryToken()
    <input type="hidden" name="Name" value="@downloadInfo.Name" />
    <input type="hidden" name="Company" value="@downloadInfo.Company" />
    <input type="hidden" name="Email" value="@downloadInfo.Email" />
    <input type="hidden" name="Phone" value="@downloadInfo.Phone" />
} 
```

接着：

```
var myForm = $('#myForm');
$.ajax({     
    url: myForm.attr('action'),
    type: myForm.attr('method'),
    data: myForm.serialize(),
    beforeSend: showLoadingGraphic(id),
    success: onSuccessfulPost
}); 
```

现在防伪令牌和隐藏字段将正确发送到服务器。

# c - 如何在vc++2008上编译C99源代码但不改变原有功能？

> ID：15780431
> 
> 赞同：0
> 
> 时间：2013-04-03T06:35:57.943
> 
> 标签：c, arrays, c99, visual-c++-2008

如：

```
enum {
    SPICE_MSG_CURSOR_INIT = 101,
    SPICE_MSG_CURSOR_RESET,
    SPICE_MSG_CURSOR_SET,
    SPICE_MSG_CURSOR_MOVE,
    SPICE_MSG_CURSOR_HIDE,
    SPICE_MSG_CURSOR_TRAIL,
    SPICE_MSG_CURSOR_INVAL_ONE,
    SPICE_MSG_CURSOR_INVAL_ALL,

    SPICE_MSG_END_CURSOR
};

static const spice_msg_handler cursor_handlers[] = {
    [ SPICE_MSG_CURSOR_INIT ]              = cursor_handle_init,
    [ SPICE_MSG_CURSOR_RESET ]             = cursor_handle_reset,
    [ SPICE_MSG_CURSOR_SET ]               = cursor_handle_set,
    [ SPICE_MSG_CURSOR_MOVE ]              = cursor_handle_move,
    [ SPICE_MSG_CURSOR_HIDE ]              = cursor_handle_hide,
    [ SPICE_MSG_CURSOR_TRAIL ]             = cursor_handle_trail,
    [ SPICE_MSG_CURSOR_INVAL_ONE ]         = cursor_handle_inval_one,
    [ SPICE_MSG_CURSOR_INVAL_ALL ]         = cursor_handle_inval_all,
}; 
```

我什至无法理解这是什么意思。vc++2008不能通过，怎么改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T18:18:23.597

这称为C99 中引入的**指定初始值设定项。**例如，要初始化一个数组，您可以按任意顺序指定数组索引：

```
int a[6] = { [4] = 29, [2] = 15 }; 
```

相当于

```
int a[6] = { 0, 0, 15, 0, 29, 0 }; 
```

因此，在您的示例中，使用枚举的定义，使用 的元素`cursor_handlers`初始化，然后是其他几个值。`101``0`

问题是，VC++2008 不支持大部分 C99 特性，包括这个。因此，您必须使用固定顺序（旧的 C89 方式）初始化数组，或者使用 all 初始化数组`0`并分配适当的元素。

数组太糟糕了`const`，所以你必须使用 C89 方式：

```
static const spice_msg_handler cursor_handlers[] = {0, 0, /*...all 101 0s*/, cursor_handle_init, /*...*/} 
```

如果不是`const`，你可以使用这个：

```
static spice_msg_handler cursor_handlers[SPICE_MSG_END_CURSOR] = {};
cursor_handlers[SPICE_MSG_CURSOR_INIT] = cursor_handle_init;
cursor_handlers[SPICE_MSG_CURSOR_RESET] = cursor_handle_reset;
//... 
```

# php - Facebook 页面在使用链接参数时将 appers 作为管理员名称而不是页面名称发布

> ID：15780432
> 
> 赞同：1
> 
> 时间：2013-04-03T06:36:01.337
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在使用 facebook php sdk 在页面的墙上发布提要，并使用以下参数在我的页面上发布提要。

$data['link'] = "网址";

$data['picture'] = "图片网址";

$data['caption'] = "字幕名称";

$data['name'] = "页面标题";

$data['message'] = "消息";

$data['description'] = "描述";

在我没有添加 $data['link'] 参数之前，一切都运行良好，但是当我添加 $data['link'] 参数并运行脚本时，然后将帖子作为用户名而不是页面名称提供。

例如

用户名：阿什文

页面名称：阿什文社区

在 data['link'] :: Ashvin Community => 测试消息之前 28 分钟前

在 data['link'] :: AshvinS => 测试消息 20 分钟前之后

链接参数有什么问题还是我做错了什么？请指导我寻求正确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:00:18.360

现在问题解决了，页面和用户有不同的访问密钥，我们必须使用用户访问密钥和以下代码获取页面访问密钥：

$acToken = "用户访问令牌";

$graph_url = " [https://graph.facebook.com/me/accounts?access_token=](https://graph.facebook.com/me/accounts?access_token=) ".$acToken;

$accounts = json_decode(file_get_contents($graph_url));

print_r($accounts);

出口;

Array 将返回所有带有页面访问密钥的页面信息，并将用于页面相关操作。

谢谢，阿什文苏雷拉

# class-design - 类和数据类型有什么区别

> ID：15780435
> 
> 赞同：9
> 
> 时间：2013-04-03T06:36:24.387
> 
> 标签：class-design, modeling, uml, class-diagram

当我阅读 UML 规范时：

```
 class has a set of attributes/operations
and data type has a set of attributes/operations 
```

1）关于数据类型的属性/操作，这意味着什么？

因为我不知道这样的数据类型是如何具有属性和操作的？

2）类和数据类型之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T14:01:44.243

根据 UML 2.4.1 规范

> 数据类型是一种特殊的分类器，类似于类。它与类的不同之处在于数据类型的实例仅由它们的值标识。数据类型实例的所有副本以及具有相同值的该数据类型的任何实例都被认为是相等的实例。如果结构相同并且相应属性的值相等，则认为具有属性的数据类型的实例（即，是结构化数据类型）是相等的。如果数据类型具有属性，则该数据类型的实例将包含与属性匹配的属性值。

1）数据类型的属性/操作与类的属性/操作具有相同的含义，即属性表示您的数据类型的结构，操作表示您的数据类型上可用的方法。

2）类和数据类型之间的主要区别在于，不可能有两个具有相同值的数据类型实例（这些实例将是一个唯一实例）。

希望有帮助，

RB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:47:47.180

在面向对象 (OO) 方法中，包括软件在内的系统由大量对象组成，这些对象通过以数据值和“消息”形式交换信息而协同工作。对象是类的特定实例，就像您的狗（对象）是所有狗类的特定实例。类定义了对象是什么样的，对象是可以使用和操作的实际实例。作为定义，类定义了将使用哪些属性来描述基于此类的每个对象。在对象中，这些属性中的每一个都将具有一个有助于其描述的值。同一类的两个对象将具有相同的属性，

数据类型是指对象的属性以及每个属性是什么类型的数据，例如字符串、布尔值、整数等。

操作或方法是对象可以为狗做的事情：

```
growl();
bark();
fetch(); 
```

等等

看看这个[Class Diagram](http://www.tutorialspoint.com/uml/uml_class_diagram.htm)的解释，它会更有意义。

# java - 出现错误“不幸的是你###应用程序已停止”

> ID：15780437
> 
> 赞同：2
> 
> 时间：2013-04-03T06:36:27.937
> 
> 标签：java, android, eclipse

**这是一个食谱应用程序，我只是在学习，所以如果你能帮我纠正我的错误并解释，我将不胜感激。提前致谢**

## 主要活动

```
package rice.recipe;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.ListView;

public class RiceActivity extends Activity {
    private RiceRecipeDataSource ds;
    private ListView recipelistview;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_rice);
        ds=new RiceRecipeDataSource();
        recipelistview=(ListView)findViewById(rice.recipe.R.id.listView1);
        recipelistview.setAdapter(new RiceRecipeDataSourceAdapter(this,ds ));

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.rice, menu);
        return true;
    }

} 
```

## 适配器代码

```
package rice.recipe;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class RiceRecipeDataSourceAdapter extends BaseAdapter {

        private Context mycontext;
        private LayoutInflater myinflater;
        private RiceRecipeDataSource mydatasource;

        public RiceRecipeDataSourceAdapter(Context ctx,RiceRecipeDataSource ds)
        {
            mycontext=ctx;
            mydatasource=ds;
            myinflater=(LayoutInflater)mycontext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return mydatasource.getDataSourceLength();
        }

        @Override
        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView thumbnail;
            TextView name;

            if (convertView==null)
                convertView=myinflater.inflate(rice.recipe.R.layout.activity_rice, parent,false);
            thumbnail=(ImageView)convertView.findViewById(rice.recipe.R.id.imageView1);
            thumbnail.setImageResource(mydatasource.getPhotoPool().get(position));
            name=(TextView)convertView.findViewById((rice.recipe.R.id.textView1));
            name.setText(mydatasource.getDishesPool().get(position));

            return convertView;

        }

    } 
```

## 数据源代码

```
package rice.recipe;

import java.util.ArrayList;

public class RiceRecipeDataSource
{
  private ArrayList<Integer> photoPool;
  private ArrayList<Integer> descriptionPool;
  private ArrayList<Integer> dishesPool;

public ArrayList<Integer> getPhotoPool() 
{
    return photoPool;
}
public ArrayList<Integer> getDescriptionPool()
{
    return descriptionPool;
}
public ArrayList<Integer> getDishesPool() 
{
    return dishesPool;
}
public RiceRecipeDataSource()
{
photoPool=new ArrayList<Integer>();
descriptionPool=new ArrayList<Integer>();
dishesPool=new ArrayList<Integer>();

setupPhotopool();
setupDescriptionpool();
setupDishespool();
}
public void setupPhotopool()
{

    photoPool.add(rice.recipe.R.drawable.jollofrice);
    photoPool.add(rice.recipe.R.drawable.friedrice);
    photoPool.add(rice.recipe.R.drawable.spaghetti);
    photoPool.add(rice.recipe.R.drawable.coconutrice);
    photoPool.add(rice.recipe.R.drawable.ricenbeans);
    photoPool.add(rice.recipe.R.drawable.whiterice);

}

public void setupDishespool()
{
    dishesPool.add(rice.recipe.R.string.jellof);
    dishesPool.add(rice.recipe.R.string.fried_rice);
    dishesPool.add(rice.recipe.R.string.spag);
    dishesPool.add(rice.recipe.R.string.coconut);
    dishesPool.add(rice.recipe.R.string.rice_beans);
    dishesPool.add(rice.recipe.R.string.plain_rice);

}

public void setupDescriptionpool()
{
    descriptionPool.add(rice.recipe.R.string.jellof_desc);
    descriptionPool.add(rice.recipe.R.string.friedr_desc);
    descriptionPool.add(rice.recipe.R.string.spag_desc);
    descriptionPool.add(rice.recipe.R.string.coconut_desc);
}

public int getDataSourceLength()
{
    return photoPool.size();

}
} 
```

## 这是我的 LogCat

```
04-03 05:47:34.217: D/dalvikvm(865): GC_FOR_ALLOC freed 39K, 6% free 2657K/2816K, paused 78ms, total 83ms
04-03 05:47:34.237: I/dalvikvm-heap(865): Grow heap (frag case) to 3.783MB for 1127536-byte allocation
04-03 05:47:34.317: D/dalvikvm(865): GC_FOR_ALLOC freed 2K, 5% free 3756K/3920K, paused 80ms, total 80ms
04-03 05:47:34.421: D/dalvikvm(865): GC_CONCURRENT freed <1K, 5% free 3760K/3920K, paused 13ms+20ms, total 108ms
04-03 05:47:34.697: D/AndroidRuntime(865): Shutting down VM
04-03 05:47:34.697: W/dalvikvm(865): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-03 05:47:34.778: E/AndroidRuntime(865): FATAL EXCEPTION: main
04-03 05:47:34.778: E/AndroidRuntime(865): java.lang.NullPointerException
04-03 05:47:34.778: E/AndroidRuntime(865):  at rice.recipe.RiceRecipeDataSourceAdapter.getView(RiceRecipeDataSourceAdapter.java:52)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.widget.AbsListView.obtainView(AbsListView.java:2159)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1246)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.widget.ListView.onMeasure(ListView.java:1158)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.View.measure(View.java:15518)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.widget.RelativeLayout.measureChild(RelativeLayout.java:666)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:477)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.View.measure(View.java:15518)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.View.measure(View.java:15518)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.View.measure(View.java:15518)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
04-03 05:47:34.778: E/AndroidRuntime(865):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.View.measure(View.java:15518)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.Choreographer.doCallbacks(Choreographer.java:562)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.Choreographer.doFrame(Choreographer.java:532)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.os.Handler.handleCallback(Handler.java:725)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.os.Looper.loop(Looper.java:137)
04-03 05:47:34.778: E/AndroidRuntime(865):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-03 05:47:34.778: E/AndroidRuntime(865):  at java.lang.reflect.Method.invokeNative(Native Method)
04-03 05:47:34.778: E/AndroidRuntime(865):  at java.lang.reflect.Method.invoke(Method.java:511)
04-03 05:47:34.778: E/AndroidRuntime(865):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-03 05:47:34.778: E/AndroidRuntime(865):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-03 05:47:34.778: E/AndroidRuntime(865):  at dalvik.system.NativeStart.main(Native Method) 
```

## 清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="rice.recipe"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="rice.recipe.RiceActivity"
            android:label="@string/app_name" >

            <intent-filter>
                <action android:name="android.intent.action.main" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

## 编辑后，新的logcat

```
04-03 07:23:36.608: D/dalvikvm(933): GC_FOR_ALLOC freed 46K, 6% free 2657K/2824K, paused 175ms, total 179ms
04-03 07:23:36.631: I/dalvikvm-heap(933): Grow heap (frag case) to 3.783MB for 1127536-byte allocation
04-03 07:23:36.709: D/dalvikvm(933): GC_FOR_ALLOC freed 2K, 5% free 3756K/3928K, paused 75ms, total 75ms
04-03 07:23:36.858: D/dalvikvm(933): GC_CONCURRENT freed <1K, 4% free 3771K/3928K, paused 13ms+19ms, total 153ms
04-03 07:23:37.161: D/AndroidRuntime(933): Shutting down VM
04-03 07:23:37.161: W/dalvikvm(933): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-03 07:23:37.248: E/AndroidRuntime(933): FATAL EXCEPTION: main
04-03 07:23:37.248: E/AndroidRuntime(933): java.lang.NullPointerException
04-03 07:23:37.248: E/AndroidRuntime(933):  at rice.recipe.RiceRecipeDataSourceAdapter.getView(RiceRecipeDataSourceAdapter.java:52)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.widget.AbsListView.obtainView(AbsListView.java:2159)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1246)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.widget.ListView.onMeasure(ListView.java:1158)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.View.measure(View.java:15518)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.widget.RelativeLayout.measureChild(RelativeLayout.java:666)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:477)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.View.measure(View.java:15518)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.View.measure(View.java:15518)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.View.measure(View.java:15518)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
04-03 07:23:37.248: E/AndroidRuntime(933):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.View.measure(View.java:15518)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.Choreographer.doCallbacks(Choreographer.java:562)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.Choreographer.doFrame(Choreographer.java:532)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.os.Handler.handleCallback(Handler.java:725)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.os.Looper.loop(Looper.java:137)
04-03 07:23:37.248: E/AndroidRuntime(933):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-03 07:23:37.248: E/AndroidRuntime(933):  at java.lang.reflect.Method.invokeNative(Native Method)
04-03 07:23:37.248: E/AndroidRuntime(933):  at java.lang.reflect.Method.invoke(Method.java:511)
04-03 07:23:37.248: E/AndroidRuntime(933):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-03 07:23:37.248: E/AndroidRuntime(933):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-03 07:23:37.248: E/AndroidRuntime(933):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:53:03.050

您没有正确遵循适配器自定义。检查[这个](http://vsvydenko.blogspot.in/2011/06/android-use-viewholder.html)。您的 getView 应该类似于给定的代码片段。[这个](http://antoine-merle.com/listview-optimisations-part-1-the-viewholder/)也可以查

# android - 我如何加载 2 个活动，显示第一个，然后在 faw 秒后显示第二个？

> ID：15780438
> 
> 赞同：-3
> 
> 时间：2013-04-03T06:36:35.720
> 
> 标签：android

我想加载一个网站（在 WebView 中），但加载速度太慢并显示白屏。我想显示一个启动画面并在后台加载 WebView。几秒钟后，我想关闭启动屏幕并显示到那时应该准备好的站点。我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:40:46.950

我将此代码用于启动画面

```
public class SplashActivity extends Activity {

    private boolean isBackButtonPressed;
    private static final int SPLASH_DURATION = 2000; // 2 seconds

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setTheme(R.style.SplashTheme);
        getWindow().setWindowAnimations(0);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.activity_splash);

        Handler handler = new Handler();

        // run a thread after 2 seconds to start the home screen
        handler.postDelayed(new Runnable() {

            @Override
            public void run() {

                // make sure we close the splash screen so the user won't come
                // back when it presses back key

                finish();

                if (!isBackButtonPressed) {
                    // start the home screen if the back button wasn't pressed
                    Intent intent = new Intent(SplashActivity.this, FragmentActivity.class);
                    startActivity(intent);
                    finish();   
                }

            }

        }, SPLASH_DURATION); 
    }

    @Override
   public void onBackPressed() {
        super.onBackPressed();
        isBackButtonPressed = true;
    }   

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:43:48.060

您可以使用以下代码。

```
public class Splash extends Activity {
/** Called when the activity is first created. */

private boolean mSplashActive = true, mPaused;
private long mSplashTime = 1000;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    new Thread(){
        public void run(){
            try {
                long ms = 0;
                while(mSplashActive && ms < mSplashTime) {
                    sleep(100);
                    if(!mPaused) {
                        ms += 100;
                    }
                }
                if(Resources.getResources().isUserRegistered(Splash.this)) {
                    //user is registered so launch main screen
                } else {
                    //user is not registered launch welcome wizard.
                    Intent intent = new Intent(Splash.this, WelcomeScreen.class);
                    Splash.this.startActivity(intent);
                }
                finish();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }.start();

}

@Override
public void onPause(){
    super.onPause();
    mPaused = true;
}

@Override
public void onResume(){
    super.onResume();
    mPaused = false;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    super.onKeyDown(keyCode, event);

    if(keyCode == KeyEvent.KEYCODE_DPAD_CENTER) {
        mSplashActive = false;
    }
    return true;
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:47:03.897

在 webview 类中，您可以设置类似的内容。

我为你设置了这个：

```
public class WebViewActivity extends Activity {

WebView webView;
ProgressDialog progressDialog;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_web_view);
    progressDialog = new ProgressDialog(WebViewActivity.this);
    progressDialog.setTitle("here your title");
    progressDialog.setMessage("message here");

    webView = (WebView) findViewById(R.id.webView1);

    webView.setWebViewClient(new WebViewClient(){

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            // TODO Auto-generated method stub
            // here you can display an imageview fullscreen
            // or show and progressdialog
            progressDialog.show();

        }

        @Override
        public void onPageFinished(WebView view, String url) {
            // TODO Auto-generated method stub
            // here you can remove the imageview and the user can continue using the webview
            // or hide the progressdialog
            progressDialog.dismiss();

        }

    });

} 
```

}

如果您有任何问题，请告诉我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:06:21.823

公共类 SplashScreen 扩展 Activity { 私有线程 mSplashThread;

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.splash);

    final SplashScreen sPlashScreen = this;

    // The thread to wait for splash screen events
    mSplashThread = new Thread() {
        @SuppressWarnings("deprecation")
        @Override
        public void run() {
            try {
                synchronized (this) {
                    // Wait given period of time or exit on touch
                    wait(5000);
                }
            } catch (InterruptedException ex) {
            }

            finish();

            // Run next activity
            Intent intent = new Intent();
            intent.setClass(sPlashScreen, MainActivity.class);
            startActivity(intent);

        }
    };

    mSplashThread.start();
}

/**
 * Processes splash screen touch events
 */
@Override
public boolean onTouchEvent(MotionEvent evt) {
    if (evt.getAction() == MotionEvent.ACTION_DOWN) {
        synchronized (mSplashThread) {
            mSplashThread.notifyAll();
        }
    }
    return true;
} 
```

}

# android - 如何在android中获取短信登录

> ID：15780445
> 
> 赞同：0
> 
> 时间：2013-04-03T06:36:55.847
> 
> 标签：android

我正在使用 android 中的 csv 文件导出日志。我只得到通话日志但没有得到短信日志。这是代码

```
 while (curLog.moveToNext()) {
                String callName = curLog
                        .getString(curLog
                                .getColumnIndex(android.provider.CallLog.Calls.CACHED_NAME));
                if (callName == null)
                    callName="Unknown";

                String callNumber = curLog.getString(curLog
                        .getColumnIndex(android.provider.CallLog.Calls.NUMBER));

                String callDate = curLog.getString(curLog
                        .getColumnIndex(android.provider.CallLog.Calls.DATE));

                String callType = curLog.getString(curLog
                        .getColumnIndex(android.provider.CallLog.Calls.TYPE));

                    String duration = curLog.getString(curLog
                .getColumnIndex(android.provider.CallLog.Calls.DURATION));

                 data.add(new String[] {callName,callNumber,callDate,callType,duration});

            } 
```

请建议如何解决它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-11T11:58:17.947

这是我获取短信的方式。它可以获取当前消息的正文、内容、日期以及检查它是传入还是传出。此外，它还可以通过其他方法获取与电话号码匹配的联系人姓名。

> 首先，为 AndroidManifest.xml 文件添加权限。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.android.app.myapp" >
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
... 
  </manifest> 
```

> 其次，实现 SMS Observer 类来获取你需要的信息

```
public class SMSObserver extends ContentObserver {       
    private Context context;
    private static final String TAG = "SMSObserver";
    private static final Uri SMS_URI = Telephony.Sms.CONTENT_URI;    //get uri depending on different devices

    public SMSObserver(Handler handler, Context context) {
        super(handler);
        this.context = context;
    }

    @Override
    public boolean deliverSelfNotifications() {
        return true;
    }

    //this onChange method will be fired up when you send or receive message
    @Override
    public void onChange(boolean selfChange) {

        Cursor cursor = context.getContentResolver().query(SMS_URI, null, null, null, Telephony.Sms.DATE + " DESC");
        String phNumber = null;
        //make sure there is a message being operating
        if (cursor != null && cursor.moveToFirst()) {
            try {
                //the meanings of those variables are quite straight forward
                String type = cursor.getString(cursor.getColumnIndex(Telephony.Sms.TYPE));    
                String content = cursor.getString(cursor.getColumnIndex(Telephony.Sms.BODY));
                String date = cursor.getString(cursor.getColumnIndex(Telephony.Sms.DATE));
                Date SMSDate = new Date(Long.valueOf(date));
                phNumber = cursor.getString(cursor.getColumnIndex(Telephony.Sms.ADDRESS));   //this is phone number rather than address

                String contact = getContactDisplayNameByNumber(phNumber);    //call the metod that convert phone number to contact name in your contacts

                int typeCode = Integer.parseInt(type);
                String direction = "";
                //get the right direction
                switch (typeCode) {
                    case Telephony.Sms.MESSAGE_TYPE_INBOX:
                        direction = "INCOMING";                            
                        break;

                    case Telephony.Sms.MESSAGE_TYPE_OUTBOX:
                        direction = "OUTGOING";                           
                        break;

                    case Telephony.Sms.MESSAGE_TYPE_SENT:
                        direction = "SENT";                            
                        break;

                    default:
                        direction = "UNKNOWN";
                        Log.e(TAG, typeCode + " is unknown");
                        break;
                }

            } catch (CursorIndexOutOfBoundsException e) {
                Log.e(TAG, "SMSHelper: outgoingSMS", e);
            } finally {
                cursor.close();
            }
        }
        Toast.makeText(context, "\nName: " + contact + "\nPhone Number:--- " + phNumber + " \nContent:--- "
                + content + " \nCall Date:--- " + SMSDate
                + " Direction: " + direction, Toast.LENGTH_LONG).show();

        Log.i(TAG, "\nName: " + contact + "\nPhone Number:--- " + phNumber + " \nContent:--- "
            + content + " \nCall Date:--- " + SMSDate
            + " Direction: " + direction + "\n----------------------------------");

        super.onChange(selfChange);
    }            

    /**
     * http://stackoverflow.com/questions/3712112/search-contact-by-phone-number
     * Look up phone number
     *
     * @param number  phone number
     * @return the name matched with the phone number
     */
    private String getContactDisplayNameByNumber(String number) {
        Uri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number));
        String name = "<Not in contact list>";

        ContentResolver contentResolver = context.getContentResolver();
        Cursor contactLookup = contentResolver.query(uri, new String[]{BaseColumns._ID, ContactsContract.PhoneLookup.DISPLAY_NAME}, null, null, null);

        try {
            if (contactLookup != null && contactLookup.getCount() > 0) {
                contactLookup.moveToFirst();
                name = contactLookup.getString(contactLookup.getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
                //String contactId = contactLookup.getString(contactLookup.getColumnIndex(BaseColumns._ID));
                Log.i(TAG, "Found number in contacts: " + number + " = " + name);
            } else {
                Log.e(TAG, "Cursor is null or empty " + number + " not found in contacts");
            }
        } finally {
            if (contactLookup != null) {
                contactLookup.close();
            }
        }
        return name;
    }
} 
```

> 如果设备运行 Android 6.0（API 级别 23）且应用的目标 SdkVersion 为 23 或更高版本，则短信权限将被视为危险权限。因此，您必须事先获得正确的许可。

```
if (ActivityCompat.checkSelfPermission(this, Manifest.permission.READ_CONTACTS) != PackageManager.PERMISSION_GRANTED
                    &&ActivityCompat.checkSelfPermission(this, Manifest.permission.READ_SMS) != PackageManager.PERMISSION_GRANTED) {
                //grant permission
                ActivityCompat.requestPermissions( this,
                        new String[]{Manifest.permission.READ_CONTACTS,Manifest.permission.READ_SMS},
                        10);            
                return;
            } 
```

> 最后，在 HomeActivity 类或任何其他 Activity 类中实例化 SMSObserver 类。

```
//sms log
        smsObserver = new SMSObserver(new Handler(), getApplicationContext());
        getContentResolver().registerContentObserver(Telephony.Sms.CONTENT_URI, true, smsObserver); 
```

# jquery - 对于 jqXHR 以外的延迟对象，“拒绝”是什么意思？

> ID：15780446
> 
> 赞同：2
> 
> 时间：2013-04-03T06:37:12.270
> 
> 标签：jquery, jquery-deferred, jqxhr

从`deferred.fail()` [页面](http://api.jquery.com/deferred.fail/)：

> **描述**：添加要在 Deferred 对象被拒绝时调用的处理程序。

和例子：

```
$.get("test.php")
.done(function(){ alert("$.get succeeded"); })
.fail(function(){ alert("$.get failed!"); }); 
```

众所周知，我们可以创建`var someObject = $.Deferred();`

我的问题：

*   如果它不是 jqXHR，我们如何“拒绝”延迟？

*   `deferred.fail()`jqXHR以外的延迟对象如何实现？

谢谢。

是的，我知道我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:57:16.607

延迟对象在被调用时被[`.reject()`](http://api.jquery.com/deferred.reject/)拒绝[`.rejectWith()`](http://api.jquery.com/deferred.rejectWith/)。

这是一个例子：

```
var deferred = $.Deferred();
deferred
  .done(function() { console.log('done') })
  .fail(function() { console.log('failed') });

deferred.resolve(); // <-- will write 'done' to console
deferred.reject();  // <-- will write 'failed' to console 
```

您可以使用 deferreds 使异步函数的行为与`$.get()`实际相同。例如`setTimeout`：

```
function MyTimeout() {
  var deferred = $.Deferred();

  setTimeout(function() {
    // as a demo, this will reject the deferred half the time
    if (Math.random() < 0.5)
      deferred.reject();
    else
      deferred.resolve();
  }, 2000);
  return deferred.promise();
}

MyTimeout()
  .done(function() { console.log('done') })
  .fail(function() { console.log('failed') }); 
```

最后一条语句也可以写成：

```
MyTimeout().then(
  function() { console.log('done') },
  function() { console.log('failed') }
); 
```

# asp.net-mvc - 不为模型绑定 DateTime 属性

> ID：15780456
> 
> 赞同：0
> 
> 时间：2013-04-03T06:37:50.553
> 
> 标签：asp.net-mvc, asp.net-mvc-3, datetime, datetimepicker

在我的某些模型中的 mvc 4 项目中，我拥有`DateTime`财产。在客户端我使用`jquery datepicker`. 我希望格式为“dd.mm.yyyy”。我为属性设置属性

```
 [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd.MM.yyyy}")]
    [Required(AllowEmptyStrings = false, ErrorMessage = "* Field is required")]
    public DateTime DateBuy { get; set; } 
```

在 *.js 文件中，我将日期格式设置为：

```
$(".datepicker").datepicker({
    changeMonth: true,
    changeYear: true,
    showOtherMonths: true,
    selectOtherMonths: true,

    dateFormat: "dd.mm.yy",
    buttonImageOnly: true
}); 
```

而且我还验证了 jquery 验证器：

```
jQuery.validator.addMethod(
    'date',
    function (value, element, params) {
        return value.match(/^\d\d?\.\d\d?\.\d\d\d\d$/);
    },
    ''
); 
```

但是当模型开始行动时，模型是无效的。错误：`"The value '24.02.2013' is not valid for DateBuy."`

如果日期`02.24.2013`一切正常（服务器期望日期格式为“mm.dd.yyyy”）。我尝试改变文化`web.config`：

```
<globalization culture="ru-RU" uiCulture="ru-RU" enableClientBasedCulture="true" /> 
```

你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:41:29.767

您是否在将值提交给您的操作时使用 GET 或 POST 动词？如果您使用的是 GET，那么日期时间值应该始终采用不变的文化格式。

如果您使用 POST，则 web.config 全球化设置应该足以接受所需格式的日期字符串。

# c# - 在 C# 中读取 excel (.xlsx) 文件

> ID：15780463
> 
> 赞同：4
> 
> 时间：2013-04-03T06:38:20.150
> 
> 标签：c#, excel, xlsx

我正在像这样使用 c# 读取 .xlsx 文件

```
string strConn = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fileName +
                             ";Extended Properties=\"Excel 12.0;HDR=No;IMEX=1\";";

var output = new DataSet();

using (var conn = new OleDbConnection(strConn))
{
    conn.Open();

    var dt = conn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });

    foreach (DataRow row in dt.Rows)
    {
        string sheet = row["TABLE_NAME"].ToString();

        var cmd = new OleDbCommand("SELECT * FROM [+"+sheet+"+]", conn);
        cmd.CommandType = CommandType.Text;

        OleDbDataAdapter xlAdapter = new OleDbDataAdapter(cmd);

        xlAdapter.Fill(output,"School");
    }
} 
```

但我在 xlAdapter.Fill(output,"School"); 错误是

```
The Microsoft Office Access database engine could not find the object '+_xlnm.Print_Area+'.  Make sure the object exists and that you spell its name and the path name correctly. 
```

我无法弄清楚代码中发生了什么错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:22:01.353

我相信您的工作表名为`_xlnm.Print_Area`. 尝试更改此行

```
var cmd = new OleDbCommand("SELECT * FROM [+"+sheet+"+]", conn); 
```

到

```
var cmd = new OleDbCommand("SELECT * FROM ["+sheet+"]", conn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:42:50.657

变量`sheet`包含值：`+_xlnm.Print_Area+`

这`+_xlnm.Print_Area+`实际上并不存在。

这就是为什么会出现错误。

检查那个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:51:28.993

我会检查你得到的`row["TABLE_NAME"].ToString();`价值。或者，您可以尝试 OpenXML SDK：[如何：解析和读取大型电子表格文档（Open XML SDK）](http://msdn.microsoft.com/en-us/library/office/gg575571.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-6)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-28T06:35:31.870

当您在工作表中定义打印区域时，“_xlnm.Print_Area”会自动添加到新工作表中。请删除打印区域表单 Excel 表或使用以下代码

```
if (!dr["TABLE_NAME"].ToString().Contains("_xlnm#Print_Area"))
{    
   obj.SheetName = dr["TABLE_NAME"].ToString();
   lst.Add(obj);
} 
```

# linux - 英特尔二进制到 ELF

> ID：15780464
> 
> 赞同：1
> 
> 时间：2013-04-03T06:38:21.147
> 
> 标签：linux, x86, executable, elf

这里真的很快速的问题。我在 Ubuntu 中工作，我有一个简单的“Hello World！” 我已经组装成 x86 程序集的程序集。现在我想将该机器代码转换为我的计算机可以运行的 ELF 可执行文件。我知道我可以直接汇编到 ELF，我的调查目的是发现如何用汇编的机器代码制作 ELF 二进制文件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:42:33.467

最终的 ELF 可执行文件通常由其他 ELF 文件构建而成，并由链接器重新组织。当然，最简单的方法是将 ELF 指定为汇编器的输出格式。

* * *

1）如果你*真的*想这样做，你可以从一个“空”的 ELF 文件开始（你从编译或组装什么都没有得到，等等）。然后您可以使用[`objcopy --add-section`](http://linux.die.net/man/1/objcopy)，它允许您将任意文件添加为现有 ELF 文件中的一个部分。

这将创建一个最小的 ELF 文件：

```
$ echo "" | gcc -c -o empty.out -xc - 
```

2) 或者，您可以使用类似 nasm's 的东西将原始二进制文件包含到另一个程序集文件中[`incbin`](http://www.tortall.net/projects/yasm/manual/html/nasm-pseudop.html#nasm-pseudop-incbin)，然后需要将其组装为 ELF。

3）第三种选择（迄今为止最好的）是将原始二进制文件提供给链接器，并使用自定义链接器脚本告诉它将其放入哪个部分（由输入文件名确定）。`-b`输入文件之前的标志将告诉它`ld`是什么类型的文件。这应该让您使用您的平面二进制文件。

* * *

您将面临的首要障碍之一是让入口点指向您的代码。我不知道如何编辑它。

有一个 Python 库，[`pyelftools`](https://pypi.python.org/pypi/pyelftools)可以帮助您完成任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:40:29.107

如果它真的是汇编的，那么它已经是 ELF 格式（针对 Linux 的编译器通常也将目标代码存储在 ELF 目标文件中）。

但是，如果您想要一个功能齐全的可执行文件，则必须将目标文件提供给[链接器](http://en.wikipedia.org/wiki/Linker_%28computing%29)。

# android - Android Instrumentation - 断言失败

> ID：15780466
> 
> 赞同：1
> 
> 时间：2013-04-03T06:38:24.663
> 
> 标签：android, instrumentation

我有一个包含文本视图和密码的小活动。我写了一个小文本来测试这个活动。但是最后一行的断言失败了。有人可以告诉我为什么吗？

```
loginScreenActivity=startActivity(mStartIntent, null, null);
        assertNotNull(loginScreenActivity);
        mInstrumentation.waitForIdleSync();

        final EditText userName=(EditText)loginScreenActivity.findViewById(R.id.userName);
        final EditText password=(EditText)loginScreenActivity.findViewById(R.id.password);

        loginScreenActivity.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                userName.requestFocus();
            }
        });

        mInstrumentation.waitForIdleSync();

        this.sendKeys(KeyEvent.KEYCODE_R);
        this.sendKeys(KeyEvent.KEYCODE_SHIFT_LEFT);
        this.sendKeys(KeyEvent.KEYCODE_A);
        this.sendKeys(KeyEvent.KEYCODE_F);
        this.sendKeys(KeyEvent.KEYCODE_A);
        this.sendKeys(KeyEvent.KEYCODE_Q);
        this.sendKeys(KeyEvent.KEYCODE_A);
        this.sendKeys(KeyEvent.KEYCODE_T);

        assertTrue(userName.getText().toString().equals("Rafaqat")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:49:54.190

从序列中，我猜您输入的是“rAfarqat”？

# hadoop - 在 Pig Group By 的结果中循环

> ID：15780467
> 
> 赞同：0
> 
> 时间：2013-04-03T06:38:25.177
> 
> 标签：hadoop, apache-pig

假设我有一个带有玩家 ID 的游戏。每个 id 可以有多个角色名称（playerNames），我们对每个名称都有一个分数。我想将每个 playerName 的所有分数加起来，并计算每个 id 每个玩家名称的百分比分数。

因此，例如：

```
id playerName playerScore
01 测试 45
01 测试2 15
02乔100

```

会输出

```
id {(playerName, playerScore, percentScore)}
01 {(Test, 45, .75), (Test2, 15, .25)}
02 {(乔, 100, 1.0)}

```

我是这样做的：

```
data = LOAD 'someData.data' AS (id:int, playerName:chararray, playerScore:int);
grouped = GROUP data BY id;

withSummedScore = FOREACH grouped GENERATE SUM(data.playerScore) AS summedPlayerScore, FLATTEN(data);

withPercentScore = FOREACH withSummedScore GENERATE data::id AS id, data::playerName AS playerName, (playerScore/summedPlayerScore) AS percentScore;

percentScoreIdroup = GROUP withPercentScore By id; 
```

目前，我使用 2 个 GROUP BY 语句来执行此操作，我很好奇它们是否都是必要的，或者是否有更有效的方法来执行此操作。我可以将其减少为单个 GROUP BY 吗？或者，有没有一种方法可以遍历元组包并向所有元组添加 percentScore 而不会展平数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:52:13.200

不，没有 2 就无法做到这一点`GROUP`，原因比 Pig 更根本：

1.  要获得总点数，您需要线性传递玩家的分数。
2.  然后，您需要对玩家的分数进行另一次线性传递来计算分数。在知道总和之前，您不能这样做**。**

话虽如此，如果玩家的`playerName`s 数量很少，我会编写一个 UDF，它接受一袋玩家分数并输出一袋 score-per-playerName 元组，因为每个元组`GROUP`都会生成一个 reducer，并且过程变得非常缓慢. 带走袋子的 UDF 也必须执行这 2 次线性传递，但如果袋子足够小，那没关系，它肯定比创建另一个减速器快一个数量级。

# c# - 在 C# 中使用 PropertyInfo 的奇怪问题

> ID：15780479
> 
> 赞同：2
> 
> 时间：2013-04-03T06:38:57.810
> 
> 标签：c#, .net, reflection, types

我有这样的课：

```
public class CompanyData
    {
        # region Properties
        /// <summary>
        /// string CompanyNumber
        /// </summary>
        private string strCompanyNumber;    

        /// <summary>
        /// string CompanyName
        /// </summary>
        private string strCompanyName;

    [Info("companynumber")]
    public string CompanyNumber
    {
        get
        {
            return this.strCompanyNumber;
        }

        set
        {
            this.strCompanyNumber = value;
        }
    }

    /// <summary>
    /// Gets or sets CompanyName
    /// </summary>
    [Info("companyName")]
    public string CompanyName
    {
        get
        {
            return this.strCompanyName;
        }

        set
        {
            this.strCompanyName = value;
        }
    }

    /// <summary>
    /// Initializes a new instance of the CompanyData class
    /// </summary>
    public CompanyData()
    {
    }

    /// <summary>
    /// Initializes a new instance of the CompanyData class 
    /// </summary>
    /// <param name="other"> object company data</param>
    public CompanyData(CompanyData other)
    {
        this.Init(other);
    }

    /// <summary>
    /// sets the Company data attributes
    /// </summary>
    /// <param name="other">object company data</param>
    protected void Init(CompanyData other)
    {
        this.CompanyNumber = other.CompanyNumber;
        this.CompanyName = other.CompanyName;
    }

    /// <summary>
    /// Getting array of entity properties
    /// </summary>
    /// <returns>An array of PropertyInformation</returns>
    public PropertyInfo[] GetEntityProperties()
    {
        PropertyInfo[] thisPropertyInfo;

        thisPropertyInfo = this.GetType().GetProperties();

        return thisPropertyInfo;
    }

    } 
```

读取 csv 文件并创建 CompanyData 对象的集合

在这种方法中，我试图获取属性和值：

```
private void GetPropertiesAndValues(List<CompanyData> resList)
{

        foreach (CompanyData resRow in resList)
        {

            this.getProperties = resRow.ExternalSyncEntity.GetEntityProperties();

            this.getValues = resRow.ExternalSyncEntity.GetEntityValue(resRow.ExternalSyncEntity);

         }
 } 
```

这就是问题所在，对于第一个对象，它作为数组中的第一个元素`GetEntityProperties()`返回。`CompanyNumber`对于剩余的对象，它`CompanyName`作为第一个元素返回。

为什么顺序不一致？

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T06:49:45.983

[Type.GetProperties()](http://msdn.microsoft.com/en-us/library/aky14axb.aspx)不返回有序结果。

> > GetProperties 方法不按特定顺序返回属性，例如字母顺序或声明顺序。您的代码不得依赖于返回属性的顺序，因为该顺序会有所不同。

如果要使用有序/一致的结果，最好对返回的数组进行排序。

# caching - 共享远程内存

> ID：15780485
> 
> 赞同：0
> 
> 时间：2013-04-03T06:39:21.503
> 
> 标签：caching, shared-memory

我正在从事一个项目，旨在将一部分内存（DRAM）从一台机器共享到另一台机器。我有两台机器（M1 和 M2，x86 Linux），M1 能够通过 NTB（非透明桥接器）访问 M2 的内存，NTB 是连接 M1 和 M2 的 PCIe 地址转换设备。具体来说，当 M1 读/写它的 MMIO 地址 0x400000000 时，它会被重定向到 M2 的物理地址 0x0，也就是 M2 的系统 RAM。基于这个翻译，我想把M2的一部分记忆给M1。

我首先使用 Linux 内存热插拔来“离线”M2 中的一段内存（128MB），以便 M2 不再使用它。在 M1，我将此远程内存添加到 M1 的内存分配器中，并通过检查 /proc/meminfo 额外的 128MB 在那里。我进一步配置了 M1 CPU 的 MTRR 以使这 128MB 不可缓存，因为远程内存不在本地内存总线中，并且超出了缓存一致性范围。例如，如果一个磁盘是 DMA 到/从这个远程内存，M1 的 CPU 的缓存是不知道的，因为读/写不通过 M1 的内存总线。

但是，在施加了一些工作量之后，我的 M1 无缘无故挂起（dmesg 中没有显示错误）。谁能给我一些建议？感谢！

关于内存热插拔： [https ://www.kernel.org/doc/Documentation/memory-hotplug.txt](https://www.kernel.org/doc/Documentation/memory-hotplug.txt)

![我的 M1 和 M2](https://i.stack.imgur.com/iO6jc.jpg)

# iphone - 使用 sdk 3.0 - ios 在他/她生日时将消息发布到 Facebook 朋友墙上

> ID：15780489
> 
> 赞同：3
> 
> 时间：2013-04-03T06:39:37.920
> 
> 标签：iphone, post, facebook-wall

我已经知道我们可以使用 Graph API 或 Feed Dialogue 向朋友墙发帖，这样做有几个限制：

**Graph API：**自 2013 年 2 月以来，我们不再能够使用 Graph API 向其他用户墙发帖！

**Feed Dialogue：**我知道我们可以调用 Feed Dialogue 来向其他用户墙发布信息，方法是提及收件人并单击分享以发布消息，如下面的屏幕截图所示：

![在此处输入图像描述](https://i.stack.imgur.com/l7LuC.png)

但是我的应用程序要求不同，用户可以选择发布到朋友墙和文本视图，用户可以在其中输入消息以在他/她的生日时发布到朋友墙，任何人都可以为我提供任何其他选择喂对话，因为对话不应该出现，这意味着对话会根据朋友的数量出现多次！

我也尝试过使用 FBRequestConnection start 进行后期更新方法，即：

```
[FBRequestConnection startForPostStatusUpdate:wallPostView.text place:friend.id tags:nil completionHandler:^(FBRequestConnection *connection, id result, NSError *error) 
{
  if (!error)
  {
    NSLog(kPostingtoWall);
  }
}]; 
```

我面临 HTTP 错误，如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/uDrhm.png)

总之，我想安排消息在我朋友的生日发布，如何做到这一点，请任何人帮助我，

提前谢谢大家:)

# c# - 通过更新我当前的 .net 3.5 应用程序在 .net 4.5 中创建新版本

> ID：15780494
> 
> 赞同：1
> 
> 时间：2013-04-03T06:40:08.013
> 
> 标签：c#, .net, windows-8

是否可以将当前的 .net 3.5 应用程序更新为 .net 4.5 以在 Windows8 中使用。我应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T06:49:55.840

这是很有可能的。要将项目更改为不同版本的 .NET，假设您已安装 .NET 4.5 和 VS 2012：

打开属性文件，从左侧选择应用程序，然后使用目标框架下拉菜单。

![1](https://i.imgur.com/9WNbEeZ.png)

至于你需要改变什么，这是一个更深层次的答案。很可能在您转换项目并尝试构建它之前，您甚至都不知道。

# javascript - 在 JavaScript 原型中使用 valueOf 函数

> ID：15780496
> 
> 赞同：1
> 
> 时间：2013-04-03T06:40:12.483
> 
> 标签：javascript

我正在阅读有关 javascript 原型的内容，并且遇到了以下代码，该代码扩展了 Number 类以添加一个显示对象类型的函数

```
Number.prototype.toString = function() {
    return typeof (this);
}
(123).toString(); //prints "object" 
```

我读到可以使用该`valueOf`函数获得原始表示

```
 n = new Number(123);
 typeof n.valueOf() // prints "number" 
```

所以我试图在 toString 函数中获取 premitive 表示，例如

```
Number.prototype.toString = function() {
    return typeof (this.valueOf());
}
(123).toString(); //prints "object" 
```

我期待它返回 "number" ，但它打印了 "object" 。这是预期的行为还是我在两者之间遗漏了什么？

更新：Firebug 和 chrome 控制台为我打印“对象”，并且警报在两种情况下都显示数字 更新 2：这是一个错误。console.log ((123).toString()) 打印的数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:59:01.537

我无法让它打印除“数字”以外的任何内容。即使您专门`Object`从数字创建一个，它也会变成一个数字。

（我命名该方法`getType`是为了避免与现有`toString`方法发生任何冲突。但我得到了相同的结果`toString`。）

```
Number.prototype.getType = function() {
    return typeof this.valueOf();
}
console.log((123).getType()); // prints "number"

var n = 123;
console.log(n.getType()); // prints "number"

var o = new Number(123);
console.log(o.getType()); // prints "number"

var x = new Object(123);
console.log(x.getType()); // prints "number" 
```

我已经在 IE（10、9、8、7）、Firefox 和 Chrome 中对此进行了测试，并得到了相同的结果。

测试：http: [//jsfiddle.net/Guffa/Xc7TC/](http://jsfiddle.net/Guffa/Xc7TC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:47:43.343

当调用诸如JavaScript 之类的*原语*`42`上的方法时，会自动将其转换为相应的对象。`this`当您将原语用作via`.call()`或时，也会发生同样的情况（至少在 IE 中）`.apply()`。

这种行为的解释可以在[ES5 规范](http://es5.github.com/#x8.7.1)中找到：

> 当 V 是具有原始基值的属性引用时，GetValue 使用以下 [[Get]] 内部方法。使用 base 作为 this 值并使用属性 P 作为参数来调用它。采取以下步骤：
> 
> 让 O 成为`ToObject(base)`。

顺便说一句，它不会在[*严格模式下*](http://es5.github.com/#C)发生：

> 如果 this 在严格模式代码中进行评估，则 this 值不会被强制转换为对象。

* * *

`valueOf()`不返回原语的原因[在这里](http://es5.github.com/#x15.7.4.4)：

> 返回[此数字值](http://es5.github.com/#this-Number-value)。

根据该参考：

> 短语“this Number value”指的是此 Number 对象表示的 Number 值，即此 Number 对象的 [[PrimitiveValue]] 内部属性的**值，如果其类型为 Number ，则为 this 值**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:01:45.643

它可以分解为：

```
// Case 1
typeof (Number(123));        // "number"

// Case 2
typeof (new Number(123));     // "object" 
```

问题是为什么？

*案例 1：*这是因为`Number(123)`实际上是一个函数调用，它将其参数值`123`转换为 type 的值`Number`。

*情况2：* `new Number(123)`使用参数值创建一个`Number` *对象*，这是直接调用`Number` *构造函数*，因为`new`; 因此我们`object`在最后得到类型。

# iphone - iPod 中的重要位置更改通知

> ID：15780504
> 
> 赞同：1
> 
> 时间：2013-04-03T06:40:42.373
> 
> 标签：iphone, ios, objective-c, core-location

我的应用程序在后台使用位置服务。为了减少电池消耗，我发现最好注册重要位置更改通知。它说要让这个通知设备需要蜂窝无线电。现在我的疑问是，我是否可以在 iPod 中获得重要的位置更改通知....我搜索了很多，但无法得到确切的答案..非常感谢任何帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:56:36.733

由于重要的位置变化监控需要无线电信号，而 iPod 无法接收该信号，因此它无法在 iPod 上工作（据我所知）。

但是您可以通过这种方法检查以了解您的设备是否能够提供此服务

[`+ (BOOL)significantLocationChangeMonitoringAvailable`](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/clm/CLLocationManager/significantLocationChangeMonitoringAvailable)

# partitioning - 从 Hazelcast 中的分区中检索条目

> ID：15780510
> 
> 赞同：1
> 
> 时间：2013-04-03T06:40:55.253
> 
> 标签：partitioning, in-memory-database, hazelcast

给出 Partition-id 时是否可以从 Partition 中检索条目？

例如：如果我将 Partition-id 输入为 3 ，我能否仅获取该特定分区中的条目？

请帮忙。！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:49:14.813

不，当前的 API 不支持此功能。

# android - 如何播放仅适用于我的应用程序的推送通知到达的铃声？

> ID：15780511
> 
> 赞同：6
> 
> 时间：2013-04-03T06:40:56.800
> 
> 标签：android, push-notification, ringtone

我正在使用 Android，并且我已经使用 GCM 在我的应用程序中实现了推送通知功能。

我的意图是仅在已安装设备中与我的应用程序相关的推送通知到达时播放来自应用程序资产或设备 Sdcard 的铃声。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:55:16.507

1.在yourApp/res/下创建1个名为raw的文件夹

2.将您的铃声复制并粘贴到此文件夹中

3.当您的应用程序通知通知时编写以下代码！

```
 SoundPool sp = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);

            int iTmp = sp.load(context, R.raw.windows_8_notify, 1); // in 2nd param u have to pass your desire ringtone

            sp.play(iTmp, 1, 1, 0, 0, 1);

            MediaPlayer mPlayer = MediaPlayer.create(context, R.raw.windows_8_notify); // in 2nd param u have to pass your desire ringtone
            //mPlayer.prepare();
            mPlayer.start(); 
```

# asp.net - 如何在 datalist/repeater 中以流布局方式显示项目

> ID：15780513
> 
> 赞同：2
> 
> 时间：2013-04-03T06:41:07.490
> 
> 标签：asp.net, data-binding, repeater, datalist

我有一个假设 10 个视频的列表，我想在数据控件中显示其缩略图

像这样：

视频1 视频2 视频3 视频4

视频 5 视频 6 视频 7 视频 8

视频9 视频10

等等

以及我应该使用哪个控件，例如 Repeater 或 DataList

# c# - 可编程命名变量？

> ID：15780516
> 
> 赞同：2
> 
> 时间：2013-04-03T06:41:15.600
> 
> 标签：c#, asp.net, vb.net, excel, openxml

我有一个在 ASP.NET 中使用 Open XML SDK 2.0 的 Excel 自动化项目。我使用 Open XML SDK 2.0 Productivity Tool 为我的 excel 文件生成代码。Сontains 行如

```
row9.Append(cell1043);
row9.Append(cell1044);
row9.Append(cell1045);
row9.Append(cell1046);
row9.Append(cell1047);
row9.Append(cell1048); 
```

但我想要使用循环

```
For(i)
  For(j)
    row[i].Append(cell[j]); 
```

有什么指导或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:34:19.113

像这样的事情应该这样做，虽然你的问题不是很清楚

```
 For r As Integer = 0 To 9
        For c As Integer = 0 To 9
            xlWSheet.Cells(r, c).value = "foo"
        Next
    Next 
```

# c++ - G++中未声明函数的强制编译错误

> ID：15780518
> 
> 赞同：0
> 
> 时间：2013-04-03T06:41:22.723
> 
> 标签：c++, g++

我已经在我的 Mac 上使用[这种方法安装了 GCC 4.8。](https://apple.stackexchange.com/questions/38222/how-do-i-install-gcc-via-homebrew/86588#86588)一切正常，除了对于某些函数，如`scanf`and `printf`，即使我没有包含它们各自的库，程序编译也没有任何错误/警告`cstdio`。有什么方法可以让 GCC（更具体地说是 G++，因为我正在处理 C++ 程序）在输入此类代码时抛出错误？以下代码在我的机器上编译得很好：

```
#include <iostream> 
//Notice I did not include cstdio but my program uses printf later on
int main()
{
    printf("Hello World!\n");
    return 0;
} 
```

有人建议我使用`-Werror-implicit-function-declaration -Werror`or `-Wall -Werror`，但它们不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:44:58.560

`-Wimplicit-function-declaration -Werror`为我工作。一定还有其他一些问题。

```
h2co3-macbook:~ h2co3$ cat baz.c
#ifndef BAILZ_OUT
#include <stdio.h>
#endif

int main()
{
    printf("Hello world!\n");
    return 0;
}
h2co3-macbook:~ h2co3$ gcc -o baz baz.c -Wimplicit-function-declaration -Werror
h2co3-macbook:~ h2co3$ echo $?
0
h2co3-macbook:~ h2co3$ gcc -o baz baz.c -Wimplicit-function-declaration -Werror -DBAILZ_OUT
cc1: warnings being treated as errors
baz.c: In function ‘main’:
baz.c:7: warning: implicit declaration of function ‘printf’
baz.c:7: warning: incompatible implicit declaration of built-in function ‘printf’
h2co3-macbook:~ h2co3$ echo $?
1
h2co3-macbook:~ h2co3$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:56:30.803

您没有得到诊断的原因`<iostream>`是包括声明`printf`，它似乎与`c++0x`or`c++11`标志有关。

这使用以下命令行在 gcc 4.8 快照上编译：

> g++ -Wall -Wextra -pedantic-errors -std=c++0x

```
#include <iostream>
int main()
{
    printf("Hello World!\n");
    return 0;
} 
```

如果您注释掉`<iostream>`包含或删除 C++11 编译标志，则会收到错误消息。

> impl_decl.cpp：在函数“int main()”中：
> 
> impl_decl.cpp:5:28: 错误: 'printf' 未在此范围内声明

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:52:44.580

来自`Annex C/Compatibility`2003 年的 C++ 标准：

**C.1 C++ 和 ISO C：**

> C.1.3 第 5 条：表达式 [diff.expr]
> 5.2.2
> 更改：不允许函数的隐式声明
> 理由：C++ 的类型安全性质。

这意味着隐式声明必须导致 C++ 中的编译错误。

我猜你编译的不是 C++ 文件，而是 C 文件，你是在 C99 之前的模式下编译的，这是 gcc 中的默认模式。1999 年的 C 标准也不允许隐式声明。

您可能希望将这些选项的组合传递给 gcc：`-std=c99 -Werror`.

# javascript - 如何在 1 个线程中显示弹出窗口？

> ID：15780520
> 
> 赞同：1
> 
> 时间：2013-04-03T06:41:40.493
> 
> 标签：javascript, asp.net, multithreading

我有一个 .NET LinkBut​​ton 事件，需要花费大量时间（数以千计的数据库操作）。在我的活动完成之前，我会尽量避免用户点击其他地方。所以我为此打开了一个模式弹出窗口，但我无法在我的活动结束时隐藏它。

```
protected void ButtonLoadData_Click(object sender, EventArgs e)
{
  ScriptManager.RegisterStartupScript(this.Page, Page.GetType(),"ex", "showPopup();", true);
        //LOTS OF OPERATIONS
  ScriptManager.RegisterStartupScript(this.Page, Page.GetType(),"ex", "hidePopup();", true); 
```

第一个 javascript 运行（打开我的加载弹出窗口）并且操作在后台执行，但第二个 javascript 不运行。我怎么解决这个问题？有什么建议么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:19:58.400

为了理解为什么会出现这个问题，您必须了解 HTTP 协议的基础知识。HTTP 是一种无状态协议，这意味着一旦客户端（浏览器）向服务器请求页面并在页面由服务器交付之后。客户端和服务器彼此忘记了。

在您的代码中，您尝试完成三个步骤。第一步是在用户单击页面上的 LinkBut​​ton 并向服务器发送请求以执行特定操作时执行。作为响应的服务器显示一个模式弹出窗口并启动 1000 次数据库操作。这就是问题发生的地方，当数据库操作完成时，服务器和客户端之间的连接已经结束。因此，当服务器尝试执行第三个操作时，它会静默失败。

我建议使用 UpdateProgress 控件向用户显示正在执行的某些操作。本msdn[教程](http://msdn.microsoft.com/en-us/library/bb386421.aspx)将帮助您了解 UpdateProgress 控件。

# javascript - jqGrid 中的内联编辑添加按钮不起作用。在按下添加时，它会在控制器中调用 edit.do url

> ID：15780521
> 
> 赞同：2
> 
> 时间：2013-04-03T06:41:40.697
> 
> 标签：javascript, spring-mvc, jqgrid

```
var parameters = {
    addtext: "Add",
    edittext: "Edit",
    savetext: "Save",
    canceltext: "Cancel",
    edit: true,
    editicon: "ui-icon-pencil",
    add: true,
    addicon:"ui-icon-plus",
    save: true,
    saveicon:"ui-icon-disk",
    cancel: true,
    cancelicon:"ui-icon-cancel",

    editParams : {
        url: "edit.do", 
        mtype: "POST",
        editData: {},
        closeAfterEdit: true,
        reloadAfterSubmit:true,
        aftersavefunc : function(rowid, response) { 
            alert(rowid);
            alert(response);
            var result = eval('(' + response.responseText + ')');
            var errors = "";

            if (result.success == false) {
                for (var i = 0; i < result.message.length; i++) {
                    errors +=  result.message[i] + "<br/>";
                }
            }  else {
                jQuery("#dialog").text('Entry has been edited successfully');
                jQuery("#dialog").dialog({  
                    title: 'Success',
                    modal: true,
                    buttons: {"Ok": function()  {
                        jQuery(this).dialog("close");} 
                    }
                });
            }
            return [result.success, errors, null];
        }
    },

    addParams : {
        useFormatter : false,
        url: "add.do", 
        mtype: "POST",
        closeAfterAdd: true,
        reloadAfterSubmit: true,

        aftersavefunc : function(rowid, response) {
            alert(rowid);
            alert(response); 
            var result = eval('(' + response.responseText + ')');
            var errors = "";

            if (result.success == false) {
                for (var i = 0; i < result.message.length; i++) {
                    errors +=  result.message[i] + "<br/>";
                }
            }  else {
                jQuery("#dialog").text('Entry has been added successfully');
                jQuery("#dialog").dialog({  
                    title: 'Success',
                    modal: true,
                    buttons: {"Ok": function()  {
                        jQuery(this).dialog("close");} 
                    }
                });
            }
            return [result.success, errors, null];
        } 
    }

};
jQuery("#grid").jqGrid('inlineNav',"#pager", parameters);   

//jQuery("#grid").jqGrid('addRow',addParameters); 
```

我的控制器代码是：

```
@RequestMapping(value = "/add.do", method = RequestMethod.POST)
public @ResponseBody String add(@RequestParam("script_name") String script_name,
        @RequestParam("script_loc") String script_loc,
        @RequestParam("host_url") String host_url,
        @RequestParam("protocol") String protocol,
        @RequestParam("rampup_time") long rampup_time,
        @RequestParam("noof_users") long noof_users,
        @RequestParam("loops") int loops, @RequestParam("delay") long delay) {
    logger.debug("Received request to add a new user");

    String s = script_loc;

    int l = loops;

    System.out.println("loops" + s);

    int max_srno = userService.getMaxSerielNo();
    int new_sr_no = max_srno + 1;

    Boolean success = userService.add(new_sr_no, script_name, script_loc,
            host_url, protocol, rampup_time, noof_users, loops, delay);
    System.out.println("success" + success);
    Gson myGson = new Gson();
    // Check if successful
    if (success == true) {

        // Success. Return a custom response
        CustomGenericResponse response = new CustomGenericResponse();
        response.setSuccess(true);

        response.setMessage("Action successful!");

        // Serialize the List of books into JSON
        return myGson.toJson(response);

    } else {
        // A failure. Return a custom response as well
        CustomGenericResponse response = new CustomGenericResponse();
        response.setSuccess(false);

        response.setMessage("Action failure! ");
        return myGson.toJson(response);
    }

}

@RequestMapping(value = "/edit.do", method = RequestMethod.POST)
public @ResponseBody
String edit(

        @RequestParam("script_name") String script_name,
        @RequestParam("script_loc") String script_loc,
        @RequestParam("host_url") String host_url,
        @RequestParam("protocol") String protocol,
        @RequestParam("rampup_time") long rampup_time,
        @RequestParam("noof_users") long noof_users,
        @RequestParam("loops") int loops,
        @RequestParam("delay") long delay, @RequestParam("id") String id) {

    int seriel_number = Integer.parseInt(id);

    System.out.println("id--------------" + seriel_number);
    logger.debug("Received request to update a new user");
    Boolean success = userService.edit(script_name, script_loc, host_url,
            protocol, rampup_time, noof_users, loops, delay, seriel_number);

    Gson myGson = new Gson();

    if (success == true) {

        // Success. Return a custom response
        CustomGenericResponse response = new CustomGenericResponse();
        response.setSuccess(true);

        response.setMessage("Action successful!");

        return myGson.toJson(response);

    } else {
        // A failure. Return a custom response as well
        CustomGenericResponse response = new CustomGenericResponse();
        response.setSuccess(false);

        response.setMessage("Action failure!");
        return myGson.toJson(response);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:11:49.613

你说的对。jqGrid 在`inlineNav`. 上次我发布了以下错误报告：[this one](http://www.trirand.com/blog/?page_id=393/bugs/save-button-of-inlinenav-uses-editparams-instead-of-addparams-addrowparams-on-add-new-row/#p28525)，[this one](http://www.trirand.com/blog/?page_id=393/bugs/jgrid-inlineedit-be-changed-by-restorerow/#p28552)，[this one](http://www.trirand.com/blog/?page_id=393/bugs/class-jqgrid-new-row-will-be-added-by-addrow-but-never-removed/#p28527)，[this one](http://www.trirand.com/blog/?page_id=393/bugs/resetting-of-inlinenav-toolbar-buttons-required-in-case-of-saving-error/#p28528) and [another one](http://www.trirand.com/blog/?page_id=393/bugs/cancel-button-of-inlinenav-uses-callback-of-edit-options-on-canceling-add-operation/#p28553)。[github](https://github.com/tonytomov/jqGrid)上的主代码已经做了相应的改动。查看提交：[this](https://github.com/tonytomov/jqGrid/commit/3f79489467238e896a834f25d731c833360ec5af)、[this](https://github.com/tonytomov/jqGrid/commit/46a726cac1b871c318549b2189dacd3582c9867d)、[this](https://github.com/tonytomov/jqGrid/commit/a1ed40c5c13de27f35864fc6fcccfdd5cd67903f) [this](https://github.com/tonytomov/jqGrid/commit/9c366d938d1985ec9c5e358f9d31fd0d8aae6fe9)和[this](https://github.com/tonytomov/jqGrid/commit/73989260ef5bcda784b0450aeae02a2eb6e92237)。因此，您可以例如从[github](https://github.com/tonytomov/jqGrid)获取固定代码或在您的`jquery.jqGrid.src.js`.

# c# - 如何将项目（文本和值）添加到 ComboBox 并在 SelectedIndexChanged 中读取它们（SelectedValue = null）

> ID：15780523
> 
> 赞同：4
> 
> 时间：2013-04-03T06:41:42.740
> 
> 标签：c#, winforms, combobox

我想将一些项目添加到这样的组合框中：

```
public class ComboboxItem
{
    public string Text { get; set; }
    public object Value { get; set; }

    public override string ToString()
    {
        return Text;
    }
}

ComboboxItem item = new ComboboxItem();
item.Text = "choose a server...";
item.Value = "-1";
ComboBox_Servers.Items.Add(item);
... 
```

并像这样阅读这些文本和值`SelectedIndexChanged`：

```
private void ComboBox_Servers_SelectedIndexChanged(object sender, EventArgs e)
{
    MessageBox.Show(ComboBox_Servers.SelectedValue.ToString());
} 
```

但 SelectedValue 始终为空！有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T06:43:57.343

您可以使用`SelectedItem`并将其转换回您的`class`并访问其`properties`.

```
 MessageBox.Show(((ComboboxItem)ComboBox_Countries_In_Silvers.SelectedItem).Value); 
```

**编辑**您可以尝试使用 DataTextField 和 DataValueField，我将它与 DataSource 一起使用。

```
ComboBox_Servers.DataTextField = "Text";
ComboBox_Servers.DataValueField = "Value"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T06:46:00.570

试试这个：

```
ComboBox cbx = new ComboBox();
cbx.DisplayMember = "Text";
cbx.ValueMember = "Value"; 
```

**编辑**（有点解释，对不起，我也没有注意到你的组合框没有绑定，我责怪缺乏咖啡因）：

SelectedValue 和 SelectedItem 之间的区别在这里解释得很好：[ComboBox SelectedItem vs SelectedValue](https://stackoverflow.com/questions/2883481/combobox-selecteditem-vs-selectedvalue)

因此，如果您的组合框未绑定到数据源，DisplayMember 和 ValueMember 不会做任何事情，并且 SelectedValue 将始终为 null，则不会调用 SelectedValueChanged。所以要么绑定你的组合框：

```
 comboBox1.DisplayMember = "Text";
            comboBox1.ValueMember = "Value";

            List<ComboboxItem> list = new List<ComboboxItem>();

            ComboboxItem item = new ComboboxItem();
            item.Text = "choose a server...";
            item.Value = "-1";
            list.Add(item);

            item = new ComboboxItem();
            item.Text = "S1";
            item.Value = "1";
            list.Add(item);

            item = new ComboboxItem();
            item.Text = "S2";
            item.Value = "2";
            list.Add(item);

            cbx.DataSource = list; // bind combobox to a datasource 
```

或使用 SelectedItem 属性：

```
if (cbx.SelectedItem != null)
             Console.WriteLine("ITEM: "+comboBox1.SelectedItem.ToString()); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-31T05:55:00.663

```
Dictionary<int,string> comboSource = new Dictionary<int,string>();
comboSource.Add(1, "Sunday");
comboSource.Add(2, "Monday"); 
```

将值添加到 后`Dictionary`，将其用作`combobox`数据源：

```
comboBox1.DataSource = new BindingSource(comboSource, null);
comboBox1.DisplayMember = "Value";
comboBox1.ValueMember = "Key"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-06T19:26:37.073

这类似于其他一些答案，但如果您已经有一个列表，则它很紧凑并且可以避免转换为字典。

给定`ComboBox`Windows 窗体上的“组合框”和`SomeClass`具有`string`type 属性的类`Name`，

```
List<SomeClass> list = new List<SomeClass>();

combobox.DisplayMember = "Name";
combobox.DataSource = list; 
```

这意味着这`combobox.SelectedItem`是一个`SomeClass`来自的对象`list`，并且其中的每个项目`combobox`都将使用其属性显示`Name`。

您可以使用

```
SomeClass someClass = (SomeClass)combobox.SelectedItem; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-22T08:49:44.327

```
 combo1.DisplayMember = "Text";
        combo1.ValueMember = "Value";   
        combo1.Items.Add(new { Text = "someText"), Value = "someValue") });
        dynamic item = combo1.Items[combo1.SelectedIndex];
        var itemValue = item.Value;
        var itemText = item.Text; 
```

不幸的是“combo1.SelectedValue”不起作用，我不想将我的组合框与任何来源绑定，所以我想出了这个解决方案。也许它会帮助某人。

# python - 设置了验证器的属性查询过滤

> ID：15780524
> 
> 赞同：0
> 
> 时间：2013-04-03T06:41:48.400
> 
> 标签：python, google-app-engine, app-engine-ndb

我有带有验证器的模型`User`和属性，用于验证数据库中的可用字符、非空字符和*存在*。因此，例如，在处理注册表单时，我不需要任何其他检查 - 我只需将表单的值分配给模型的属性并捕获验证错误（如果输入已经存在）...`username``username`*`username``username`*

 *但是，这行不通。

因为 NDB 也验证了属性的比较参数（请参阅 ndb/model.py 中的 Property._comparison 方法），并且它在 Query.filter(User.username == [somevalue]) 中进行无休止的请求，最后引发`RuntimeError: maximum recursion depth exceeded`. NDB 尝试验证 [somevalue]`validate_username`并一次又一次地转到此查询...

可以将用户名分配给实体的 ID 并使用 User.get_by_id()，但它需要`username`是可更改的，所以我需要使用`Query.get()`.

所以这是我的`User`模型：

```
class User(ndb.Model):

  def validate_username(self, value):

    value = str(value).strip()

    # Other useful checks - length, available symbols, etc

    if User.get_user(value):
        raise ValueError('Username already exists')

    return value

  @classmethod
  def get_user(cls, username):

    username = str(username)

    user_q = User.query()
    user_q = user_q.filter(User.username == username) # Here is the problem
    return user_q.get()

  username = ndb.StringProperty(validator=validate_username) 
```

例如：

```
# Trying to add user, get RuntimeError exception
u = User()
u.username = 'John' 
```

我做错了什么？解决此类问题的最佳方法是什么？

**更新到[蒂姆霍夫曼](https://stackoverflow.com/questions/15780524/query-filtering-on-property-with-validator-setted/15787150#15787150)：** 谢谢。是的，我错过了 prop 参数，但是在参数`prop`中`self`和参数中收到了方法 - 因此我没有提到这个错误。但是，您错过了关键问题 - 您没有在验证器中使用带有过滤器的查询（User.get_user 方法）。试试这个，没有感觉函数或方法验证器是：`val``val`

```
def validate_username2(prop, value):

    if User.get_user(value):
        raise Exception('User exists!')

    return value

class User(ndb.Model):

    def validate_username(self, value):

        if User.get_user(value):
            raise Exception('User exists!')

        return value

    @classmethod
    def get_user(self, username):
        user_q = User.query()
        user_q = user_q.filter(User.username == username)
        return user_q.get()

    # Try both please    
    username = ndb.StringProperty(validator=validate_username)
    #username = ndb.StringProperty(validator=validate_username2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:17:26.323

我相信您的问题是由于错误地将您的验证器定义为一种方法并且不接受正确的参数。请参阅下面的快速示例，确实可以使用过滤器。

```
The db, ndb, users, urlfetch, and memcache modules are imported.
dev~cash-drawer> def vla(prop,val):
...    if val == "X":
...      raise ValueError
...    return val
... 
dev~cash-drawer> 
dev~cash-drawer> 
dev~cash-drawer> class X(ndb.Model):
...    name = ndb.StringProperty(validator=vla)
... 
dev~cash-drawer> y = X()
dev~cash-drawer> y.name = "X"
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/home/timh/google_appengine/google/appengine/ext/ndb/model.py", line 1258, in __set__
    self._set_value(entity, value)
  File "/home/timh/google_appengine/google/appengine/ext/ndb/model.py", line 1004, in _set_value
    value = self._do_validate(value)
  File "/home/timh/google_appengine/google/appengine/ext/ndb/model.py", line 953, in _do_validate
    newvalue = self._validator(self, value)
  File "<console>", line 3, in vla
ValueError
dev~cash-drawer> y.name = "aaa"
dev~cash-drawer> y.put()
Key('X', 5060638606280884224)
dev~cash-drawer> z=X.query().filter(X.name == "aaa")
dev~cash-drawer> list(z)
[X(key=Key('X', 5060638606280884224), name=u'aaa')]

    dev~cash-drawer> z=X.query().filter(X.name == "X")
    Traceback (most recent call last):
        File "<console>", line 1, in <module>
        File "/home/timh/google_appengine/google/appengine/ext/ndb/model.py", line 859, in __eq__
        return self._comparison('=', value)
        File "/home/timh/google_appengine/google/appengine/ext/ndb/model.py", line 847, in _comparison
        value = self._do_validate(value)
         File "/home/timh/google_appengine/google/appengine/ext/ndb/model.py", line 953, in _do_validate
        newvalue = self._validator(self, value)
         File "<console>", line 3, in vla
    ValueError
    dev~cash-drawer> 
```*

# ruby-on-rails - Thinking Sphinx 错误地寻找 mysql 而不是 postgresql

> ID：15780525
> 
> 赞同：1
> 
> 时间：2013-04-03T06:41:49.040
> 
> 标签：ruby-on-rails, postgresql, sphinx, thinking-sphinx

我的 database.yml 文件和我的 Gemfile 指定使用 postgresql。但是，当我跑步时

```
rake ts:index 
```

我得到错误

```
rake aborted!
cannot load such file -- mysql2 
```

Thinking Sphinx 为什么要找 mysql？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:08:56.430

连接到 Sphinx 需要 mysql2 gem，因此即使您使用 PostgreSQL 作为数据库，也请包含它。

参考： [https ://github.com/pat/thinking-sphinx](https://github.com/pat/thinking-sphinx)

# java - 在jsp中显示blob

> ID：15780528
> 
> 赞同：0
> 
> 时间：2013-04-03T06:41:57.837
> 
> 标签：java, jsp

尝试在 JSP 页面中显示 BLOB 图像时出现“图像损坏或截断”错误。我正在使用 servlet 来查询图像并返回响应。

在 JSP 中：

```
<img src="myservlet?id=5" /> 
```

在小服务程序中：

```
 Blob binImage = img.getBinImage();
                            byte[] imgData = null;
                            imgData = binImage.getBytes(1, (int)binImage.length());
                            response.setContentType(img.getContentType());
                            response.setContentLength((int)binImage.length());
                            response.setHeader("Content-Disposition", "inline;filename=\"" + img.getImageName() + "\"");
                            OutputStream o = response.getOutputStream(); 
                            o.write(imgData);
                            o.flush();
                            o.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:51:49.633

首先，Base64 对您的图像（blob）进行编码，然后您可以直接在`<img>`标签中使用它。

请参阅此[链接](http://www.webdesignerforum.co.uk/topic/25240-how-to-put-image-binary-data-into-html/#entry169989)（是 PHP，但您会明白的）

```
<img src="data:image/jpeg; base64, + xmlhttp.responseText + " /> 
```

# android - Android：检查编辑文本是否为空并提交问题

> ID：15780532
> 
> 赞同：1
> 
> 时间：2013-04-03T06:42:05.167
> 
> 标签：android, android-edittext

在我的应用程序中，我有带有edittext和提交按钮的dailog，如果edittext为空，我给了一个祝酒词“请输入一些东西”..我的代码如下

```
Button reviewPost = (Button) dialog.findViewById(R.id.submit);
        reviewPost.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    v.setEnabled(false);
                    EditText ratingComment = (EditText) dialog
                            .findViewById(R.id.reviewcomment);
                    String comment = ratingComment.getText().toString();

                    String postStatus = "Y";
                    if (spinner.getSelectedItemPosition() > 0) {
                        postStatus = "N";
                    }
                    RadioGroup rating = (RadioGroup) dialog
                            .findViewById(R.id.customrating);
                    int radioButtonID = rating.getCheckedRadioButtonId();
                    View radioButton = rating.findViewById(radioButtonID);
                    int ratingNo = rating.indexOfChild(radioButton);

                    String ratingValue = (ratingNo + 1) + "";

                    if (comment != null && !comment.equalsIgnoreCase("")){

                    new PostReviewMessage().execute(activity, comment,
                            ratingValue, postStatus); 
                    activity.finish();
                    }else{
                         Toast.makeText(activity, "Please enter your comment", Toast.LENGTH_SHORT).show();

                     }  
                    Constants.rivewDialog = new ProgressDialog(activity);
                    Constants.rivewDialog.setCanceledOnTouchOutside(false);
                    Constants.rivewDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                    Constants.rivewDialog.setMessage(activity.getString(R.string.postingrivew));
                    Constants.rivewDialog.setOnCancelListener(new OnCancelListener() {
                        @Override
                        public void onCancel(DialogInterface arg0) {

                        }
                    });
                    Constants.rivewDialog.show();
                    dialog.dismiss();
                    break;
                case MotionEvent.ACTION_MOVE:
                    break;
                case MotionEvent.ACTION_UP:
                    break;
                }
                return false;
            }
            }); 
```

但即使edittext为空，它也会提交不应该发生的情况。我正在检查条件如下但它不起作用

```
if (comment != null && !comment.equalsIgnoreCase("")){

                    new PostReviewMessage().execute(activity, comment,
                            ratingValue, postStatus); 
                    activity.finish();
                    }else{
                         Toast.makeText(activity, "Please enter your comment", Toast.LENGTH_SHORT).show();

                     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:47:04.880

使用`comment.trim().equals("")`而不是`comment.equalsIgnoreCase("")`

或检查注释字符串长度是否应超过最小字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:51:39.320

利用

```
if(comment != null && !comment.isEmpty()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:53:53.860

你可以用这个。

```
if(comment != null && !comment.isEmpty() && comment.length()!=0){
    //your task
}else{
  //give some message
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:39:36.367

用下面的代码解决了..问题出在 v.setEnabled(false);...我把它移到了 if 条件

```
if (comment != null && !comment.equalsIgnoreCase("")){
                            v.setEnabled(false);
                            new PostReviewMessage().execute(activity, comment,
                                    ratingValue, postStatus); 
                            Constants.rivewDialog = new ProgressDialog(activity);
                            Constants.rivewDialog.setCanceledOnTouchOutside(false);
                            Constants.rivewDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                            Constants.rivewDialog.setMessage(activity.getString(R.string.postingrivew));

                            Constants.rivewDialog.setOnCancelListener(new OnCancelListener() {
                                @Override
                                public void onCancel(DialogInterface arg0) {

                                }
                            });
                            Constants.rivewDialog.show();
                            dialog.dismiss();
                         }else{

                             Toast.makeText(activity, "Please enter your comment", Toast.LENGTH_SHORT).show();
                         } 
```

# testing - 查看测试失败结果竹 4.4.4

> ID：15780533
> 
> 赞同：0
> 
> 时间：2013-04-03T06:42:08.200
> 
> 标签：testing, junit, bamboo

我在 Bamboo 4.4.4 中遇到问题：我创建了启动一些测试然后生成 TestReport.xml 的计划。[测试报告](https://answers.atlassian.com/upfiles/TestReport.txt)

我尝试用 JUnit Parser 解析它，但在 Test Results Bamboo 中只显示成功的测试，甚至没有失败。有什么建议么？PS 我附加生成了我的 TestReport.xml 和 xml 文件，它们在解析后创建了 Bamboo。[buildresults19.txt](https://answers.atlassian.com/upfiles/buildresults19.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:32:56.240

如果您在正确报告测试时遇到问题，请联系 Atlassian 支持 - 他们可以帮助您比 Stack Overflow 更快地解决问题！

谢谢 James Dumay 竹产品经理

# java - 在 JSP 中销毁会话

> ID：15780534
> 
> 赞同：8
> 
> 时间：2013-04-03T06:42:10.467
> 
> 标签：java, jsp, netbeans, logout

我是新手`JSP`。我使用登录系统在 Web 应用程序中创建了一组页面。

我想做注销选项，它应该出现在每一页上。

请我需要完整的源代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T06:44:27.317

使用 JSP 中的会话对象使会话过期。

```
session.invalidate(); 
```

**更新**

当用户登录时，制作一个单独的标题页并显示退出选项。点击退出后，按照我告诉你的去做。

销毁会话后，将用户重定向到主页。

```
response.sendRedirect("home.jsp"); 
```

# html - XCode GET POST 网络服务器

> ID：15780535
> 
> 赞同：0
> 
> 时间：2013-04-03T06:42:12.227
> 
> 标签：html, objective-c, webserver, nsurlrequest

我是 Xcode 的初学者。我必须做一个应用程序，从我在微控制器 MICROCHIP 中设计的嵌入式网络服务器获取和发送数据。现在我可以从网络服务器获取信息（在我的网络服务器中，我有一个`/status.xml`文件，其中包含所有动态变量）

现在我无法单击按钮。单击按钮的 HTML 代码是

```
onmousedown="newAJAXCommand('buttons.cgi?btn=1')" 
```

在我的网络服务器中，我有一个文件`buttons.cgi`。

我的目标是在 Xcode 中设计了一个按钮，他执行此操作

我尝试使用`NSMutableURLRequest`类和`SetHTTPMethod:@"GET"`或`@"POST"`但此代码不起作用

```
 NSString *post = @"btn=1";
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES ];
    NSString *Get_lenght = [NSString stringWithFormat:@"%d",[postData length]];
    NSURL *serviceURL = [NSURL URLWithString:@"http://mywebserver.com/buttons.cgi?"];
    NSMutableURLRequest *serviceRequest = [NSMutableURLRequest requestWithURL:serviceURL];
    [serviceRequest setValue:Get_lenght forHTTPHeaderField:@"Content-type"];
    [serviceRequest setHTTPMethod:@"POST"];
    [serviceRequest setHTTPBody:postData]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:45:42.463

代码中有多个错误：

```
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES ]; 
```

你为什么不使用 UTF-8 ？

```
NSString *Get_lenght = [NSString stringWithFormat:@"%d",[postData length]];
[serviceRequest setValue:Get_lenght forHTTPHeaderField:@"Content-type"]; 
```

您不能设置`Content-Type`为整数。

最后，您没有发送`NSMutableURLRequest`. 要发送请求，请使用：

```
NSString *response;
NSError *error;
[NSURLConnection sendSynchronousRequest:serviceRequest returningResponse:&response error:&error]; 
```

如果需要，其中`response`将包含响应数据；如果有任何错误，则在请求和`error`响应期间将包含错误。

# c - 在使用 xterm 时需要帮助

> ID：15780537
> 
> 赞同：0
> 
> 时间：2013-04-03T06:42:14.607
> 
> 标签：c

```
mkfifo fifo1
mkfifo fifo2
mkfifo fifo3
xterm -e bash -c "cat <fifo1 & tee fifo2 fifo3" &
xterm -e bash -c "cat <fifo2 & tee fifo1 fifo3" &
xterm -e bash -c "cat <fifo3 & tee fifo1 fifo2" & 
```

知道如何在 c 编程中执行上述 unix 命令。我尝试使用 execl，但似乎不起作用。提前致谢。

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

int main(){
int pid;
char parmList[100];
int i=1;

sprintf(parmList,"-e bash -c {cat <fifo%d & tee fifo%d fifo%d}",i,i+1,i+2);

if ((pid = fork()) == -1)
    perror("fork error");
else if (pid == 0)
{
     execl("/usr/bin/xterm","xterm",parmList,NULL);
}

return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:23:35.750

使用`execv`系统调用（[execv 手册页](http://linux.die.net/man/3/execv)）

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

int main(){
    int pid;
    int i=1;
    char command[100];
    char * args[] = {
        "-e",
        "bash",
        "-c",
        NULL,
        NULL
    };
    sprintf(command, "{cat <fifo%d & tee fifo%d fifo%d}", i, i+1, i+2);
    args[3] = command;

    if ((pid = fork()) == -1)
        perror("fork error");
    else if (pid == 0)
        execv("/usr/bin/xterm", args);
    return 0;
} 
```

# java - Spring MVC 将 HTTP POST 请求转发到另一个控制器中的 GET 请求处理程序

> ID：15780540
> 
> 赞同：5
> 
> 时间：2013-04-03T06:42:27.623
> 
> 标签：java, spring, jsp, model-view-controller

我试图让我的控制器使用一些参数将 POST 请求转发到另一个控制器：

```
@RequestMapping(method=RequestMethod.POST)
public String processSubmit(@Valid Voter voter, BindingResult result, 
      //...
      request.setAttribute("firstName", voter.getFirstName());
      request.setAttribute("lastName", voter.getLastName());
      request.setAttribute("ssn", voter.getSsn());
      logger.info("VoterID exists, forwarding to /question/prepare");
      return "forward:/question/prepare"; 
```

我面临的问题是 /question/prepare 指向仅处理 HTTP GET 请求的控制器方法。

```
@RequestMapping(value="/prepare", method=RequestMethod.GET)
public String prepareVoterBean(@RequestParam String firstName, 
        @RequestParam String lastName, @RequestParam String ssn, Model model) {
    logger.info("QuestionController got GET REQUEST for " + firstName + lastName + ssn);
    VoterBean bean = new VoterBean();
    bean.setFirstName(firstName);
    bean.setLastName(lastName);
    bean.setSsn(ssn);

    model.addAttribute("questions",bean);
    return "questionPage";
} 
```

有没有办法将请求转发到 prepareVoterBean 作为 HTTP GET 请求？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:09:14.980

> 有没有办法将请求转发到 prepareVoterBean 作为 HTTP GET 请求？

尝试使用`redirect:`前缀。

* * *

```
return "forward:/question/prepare"; 
```

这不是 POST。以下链接可能有用：[“22.5.3 重定向到视图”部分](https://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-redirecting)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T09:21:22.040

@午夜蓝...

将返回类型更改为`return "forward:/prepare";`

# jasper-reports - 如何根据上面的 textElement 是否为空，在 JasperReports 中为 textElement 设置 x、y。如果非空，则将其显示到该文本元素

> ID：15780542
> 
> 赞同：1
> 
> 时间：2013-04-03T06:42:30.480
> 
> 标签：jasper-reports

要求：

如果*firstName*和*lastName*不为空。在 x=125, y=3 坐标处显示。并在 x="125" y="26" 坐标处显示地址。这工作正常。

问题：如果 firstName/lastName 为空，那么我们需要将地址元素向上移动并显示在 x=125，y=3 坐标本身。

这就是我卡住的地方。请帮我。

请参考下面我的 jrxml 文件：

```
<frame>
    <reportElement key="frame-462" positionType="Float" mode="Transparent" x="0" y="50" width="390" height="70"/>
    <textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now">
        <reportElement key="textField-844" positionType="Float" mode="Transparent" x="125" y="3" width="264" height="23"
                       isPrintWhenDetailOverflows="true" isRemoveLineWhenBlank="true">
            <printWhenExpression><![CDATA[(!$F{firstName}.isEmpty() && !$F{lastName}.isEmpty())]]></printWhenExpression>
        </reportElement>
        <textElement markup="styled">
            <font fontName="Verdana" size="12"/>
        </textElement>
        <textFieldExpression>
            <![CDATA[$F{firstName} +  "<style pdfFontName='Helvetica-Oblique' size='11'>" + $F{lastName} + "</style>"]]></textFieldExpression>
    </textField>
    <textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now">
        <reportElement key="textField-843" mode="Transparent" positionType="Float" x="125" y="26" width="264"
                       height="42" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true"/>
        <textElement markup="html">
            <font fontName="Verdana" size="12"/>
        </textElement>
        <textFieldExpression><![CDATA[$F{address}]]></textFieldExpression>
    </textField>
    <staticText>
        <reportElement key="staticText-1249" positionType="Float" x="2" y="2" width="108" height="21"
                       isRemoveLineWhenBlank="true"/>
        <textElement textAlignment="Left">
            <font fontName="Verdana" size="12" isBold="false" pdfFontName="Helvetica-Bold"/>
        </textElement>
        <text><![CDATA[ Address:]]></text>
    </staticText>
</frame> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:55:19.263

您已经设置了`isRemoveLineWhenBlank`属性，该属性将删除`textField`. 但是，JasperReports 不能折叠垂直空间，除非该空间完全清除。如果有另一个元素占据同一行（在您的情况下是`staticText`元素），则将保留空白空间。这有点像反过来玩俄罗斯方块；你必须在这条线消失之前摆脱所有的块。

将报表元素放入框架会稍微修改此行为。需要明确的只是父框架的宽度，而不是整个报表的宽度。因此，通过将您的姓名和地址字段放入单独的框架中，尽管与静态文本水平对齐，但姓名字段占用的空间可能会折叠。我已经修改了您的代码片段来证明这一点：

```
<frame>
    <reportElement key="frame-462" positionType="Float" mode="Transparent" x="0" y="50" width="390" height="70"/>
    <frame>
        <reportElement x="126" y="0" width="264" height="70"/>
        <textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now">
            <reportElement key="textField-844" positionType="Float" mode="Transparent" x="0" y="3" width="264" height="23" isPrintWhenDetailOverflows="true" isRemoveLineWhenBlank="true">
                <printWhenExpression><![CDATA[(!$F{firstName}.isEmpty() && !$F{lastName}.isEmpty())]]></printWhenExpression>
            </reportElement>
            <textElement markup="styled">
                <font fontName="Verdana" size="12"/>
            </textElement>
            <textFieldExpression><![CDATA[$F{firstName} +  "<style pdfFontName='Helvetica-Oblique' size='11'>" + $F{lastName} + "</style>"]]></textFieldExpression>
        </textField>
        <textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now">
            <reportElement key="textField-843" mode="Transparent" positionType="Float" x="0" y="26" width="264" height="42" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true"/>
            <textElement markup="html">
                <font fontName="Verdana" size="12"/>
            </textElement>
            <textFieldExpression><![CDATA[$F{address}]]></textFieldExpression>
        </textField>
    </frame>
    <staticText>
        <reportElement key="staticText-1249" positionType="Float" x="2" y="2" width="108" height="21" isRemoveLineWhenBlank="true"/>
        <textElement textAlignment="Left">
            <font fontName="Verdana" size="12" isBold="false" pdfFontName="Helvetica-Bold"/>
        </textElement>
        <text><![CDATA[ Address:]]></text>
    </staticText>
</frame> 
```

# java - java - 如果字符串后面跟着两个或多个空格/空格，如何拆分字符串？

> ID：15780543
> 
> 赞同：0
> 
> 时间：2013-04-03T06:42:32.463
> 
> 标签：java, regex, string, split

在我的字符串中，我想根据两个或多个空格拆分字符串或标记字符串。

前任

```
string = "I am  Chaitanya Gadam.      Split   this srting." 
```

我想要输出为 -

```
str[0]= "I am"  
str[1]= "Chaitanya Gadam."  
str[2]= "Split"  
str[3]= "this string." 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:47:06.137

```
string.split("\\s\\s+"); 
```

（或者）

```
string.split("\\s{2,}");

 String string = "I am  Chaitanya Gadam.      Split   this srting.";

    String[] str = string.split("\\s{2,}");

    for(String s: str)
    {
        System.out.println(s+":"+s.length());
    }
    System.out.println(Arrays.toString(string.split("\\s\\s+")));

Output:
I am:4
Chaitanya Gadam.:16
Split:5
this srting.:12
[I am, Chaitanya Gadam., Split, this srting.] 
```

用两个或多个空格作为分隔符拆分字符串。在正则表达式中使用转义字符而不是使用空格字符可以提高可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:44:06.213

尝试使用：`String[] splitted = string.split(" +");`

```
public static void main(String[] args) throws ParseException{
    String string = "I am  Chaitanya Gadam.      Split   this srting.";
    String[] str = string.split("  +");
    System.out.println(Arrays.toString(str));
    for(String s : str)//Try printing this way .
        System.out.println(s);
} 
```

输出：

```
[I am, Chaitanya Gadam., Split, this srting.] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T06:46:20.977

在这里，这应该工作：

```
final String src = "I am  Chaitanya Gadam.      Split   this srting.";
final String[] splits = src.split("[ ]{2,}"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-21T16:55:04.603

使用 Stringutils.split() 按白人步数分割字符串。例如`StringUtils.split("Hello World")`返回“Hello”和“World”；

为了解决上述情况，我们使用这样的拆分方法

```
String split[]= StringUtils.split("Hello I'm your String"); 
```

当我们打印拆分数组时，输出将是：

```
Hello

I'm

your

String 
```

唯一的问题是如果您尝试拆分`string = "I am Chaitanya Gadam. Split this srting."`

它将分裂Chiatanya Gadam。进入

```
[0]Chiatanya
[1]Gadam. 
```

但是你可以稍后组合它！

# .net - 观看像 Com+ 这样的 WCF 活动

> ID：15780549
> 
> 赞同：1
> 
> 时间：2013-04-03T06:42:49.657
> 
> 标签：.net, wcf

我现在从 com+ 切换到 wcf。我看到 wcf 缺少的一件事是能够查看当前有多少对象处于活动状态、调用时间和调用中。有没有工具可以为我提供相同的 wcf 数据？我使用 IIS 作为我的 wcf 服务的主机。

谢谢。

![Com+ 活动](https://i.stack.imgur.com/ZS2Az.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:51:19.683

您必须查看 WCF 性能计数器：http: [//msdn.microsoft.com/en-us/library/ms735098.aspx](http://msdn.microsoft.com/en-us/library/ms735098.aspx)

启动 perfmon.exe，然后查看类别：

*   服务模型端点
*   服务模式服务
*   服务模式操作

# iphone - 当我单击以编程方式创建的 uilabel 时，uislider 值会发生变化

> ID：15780551
> 
> 赞同：0
> 
> 时间：2013-04-03T06:42:53.653
> 
> 标签：iphone, ios, uilabel, uislider

我有一个 uislider (*fontSizeSlider)，它以编程方式更改创建的 uilabel 的文本大小。当我在视图中有 2 到 5 个以编程方式创建的具有不同文本大小的标签时，我希望 UISlider 位置在触摸时更改为每个标签的相应值（1-50 是 uislider 的最小和最大大小）（touchesbegan ）。

这样，如果 label1 textsize 为 10，label2 textsize 为 20，label5 textsize 为 50（注意：使用 uislider 更改文本大小）。当我单击（触摸）label1或label2或label5时，我希望Uislider显示相应的值（我的意思是如果选择了Label1，则Uislider bar应移至10，并且在选择Label2时，则应移至20。 )

这是我在 touchesbegan 上尝试过的示例代码，

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
 touch=[touches anyObject];
 CGPoint fontSliderLocation = [touch locationInView:fontSizeSlider];
        NSLog(@"Location of x %f and Location of y %f", fontSliderLocation.x, fontSliderLocation.y); 
```

这不是完整的代码，我只是把它放在这里有点意义。使用上面的代码，我可以获得触摸标签的 x 和 y 位置。但是，当我单击/触摸任何标签时，如何获取标签的文本大小并能够更改 uislider 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:49:00.007

> 当我单击/触摸任何标签时，如何获取标签的文本大小并能够更改 uislider 值。

您可以通过以下方式获取**字体**大小：

```
NSString *fontName=self.label.font.fontName;
CGFloat fontSize=self.label.font.pointSize; 
```

在这个代表上：

```
-(void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event;
    UITouch *touch=[touches <object>];
    if(touch.view.tag == <your Tag>){
       slider.value=<the value you want>;
    }
    else...
 } 
```

**编辑：**为了了解颜色使用：

```
UIColor *color=self.textField.textColor;
CGFloat r,g,b,a;
[color getRed:&r green:&g blue: &b alpha: &a];
NSLog(@"%f, %f, %f",r, g, b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:51:30.190

您可以像上面那样获得字体名称和字体大小，`UILable`还可以使用如下方法更改滑块的值`setValue`...

```
[yourSlider setValue:yourFloatValue]; 
```

# javascript - createjs spritesheet 没有动画

> ID：15780556
> 
> 赞同：0
> 
> 时间：2013-04-03T06:43:33.373
> 
> 标签：javascript, canvas, html5-canvas, easeljs, createjs

我已经尝试了一段时间的精灵表移动，并尝试了easeljs文档中的各种方法。我仍然无法让这该死的东西工作。所以我希望你们中的一些人可以看看它。

我使用的精灵表是 160x40，其中 1 个精灵是 40x40。

这是我的敌人函数，它应该有动画：（第 25 行是创建。在移动函数中是 gotoandplay）

```
var enemyWidth = 40;
var enemyHeight = 40;
function Enemy(number) {
    this.number = number;
    this.id = 'enemy';
    var randomStartLoc = new locationOutsidePlayfield();

    enemyLoc = new locationOutsidePlayfield();
    this.x = randomStartLoc.x;
    this.y = randomStartLoc.y;

    this.health = 100;

    //The damage a collision the enemy with a player does
    this.damage = 30;

    var target = new Target(this.x, this.y);
    this.velX = target.velX;
    this.velY = target.velY;

    this.hitScore = 25;
    this.killScore = this.hitScore*2;

    var spriteSheet = new createjs.SpriteSheet({
        images: ["resources/sprites/enemy_spritesheet.png"], 
        frames: {width:40, height:40},
        animations: {
            walk: [0, 3]
        }
    });

    this.sprite = new createjs.BitmapAnimation(spriteSheet);
    this.sprite.currentFrame = 0;

    this.sprite = new createjs.BitmapAnimation(spriteSheet);

    this.sprite.x = this.x;
    this.sprite.y = this.y;
    this.sprite.width = enemyWidth;
    this.sprite.height = enemyHeight;

    this.collide = function(arrayIndex, bullet) {
        if (bullet) {
            this.health -= player.damage;
        }

        if (this.health <= 0) {
            //Generate a number between 0 and 10\. If it's 1(10% chance) a powerup will be made on the spot of the death.
            var percentage = Math.round(getRandomNumber(0, 10));

            //If the percentage is one and there are no powerUps on the stage it's okay to add a powerup.
            if (percentage < 6 && powerUp.length == 0) {
                var pwrp = new Powerup(this.x, this.y);
                powerUp.push(pwrp);
                if (!powerUpLayer) {
                    powerUpLayer = new createjs.Container();
                    stage.addChild(powerUpLayer);
                }
            }

            //Increase the score
            score.increaseScore(this.killScore);

            //Delete the object
            delete this;

            //Remove the sprite
            enemyLayer.removeChild(this.sprite);

            //Remove the enemy and the bullets from their array
            enemies.splice(arrayIndex, 1);
            for (var i in this.bullets) {
                ammoLayer.removeChild(this.bullets[i].sprite);
                delete this.bullets[i];
            }
            this.bullets = [];
        } else {
            //If the enemy didnt die, update the score with the hit score.
            score.increaseScore(this.hitScore);
        }

        countEnemies();
    }

    this.draw = function() {
        //enemyLayer.draw();
    }

    this.move = function() {
        this.sprite.gotoAndPlay("walk");  
        //Set a boolean that will check later on if the enemy should change direction. Therefore getting a new X an Y.
        var directionChange = false;
        this.x += this.velX;
        this.y += this.velY;

        this.sprite.x = this.x;
        this.sprite.y = this.y;

        if (this.y <= -150) {
            directionChange = true;
        }

        if (this.y >= (stage.canvas.height-this.sprite.height)+150) {
            directionChange = true;
        }

        if (this.x <= -150) {
            directionChange = true;
        }

        if (this.x >= (stage.canvas.width-this.sprite.width)+150) {
            directionChange = true;
        }

        if (directionChange == true) {
            var target = new Target(this.x, this.y);
            this.velX = target.velX;
            this.velY = target.velY;
        }
    }

    this.flickr = function() {
        this.sprite.alpha = 0.5;
        var enem = this.sprite;
        setTimeout(function() {
            enem.alpha = 1;
        }, 100);
    }

    this.bullets = [];
} 
```

作为请求敌人创建功能。（ps阶段在股票代码中更新，运行良好）

```
var enemies = [];
var newEnemiesAmount;
var oldEnemiesAmount;
function createEnemies(amount) {
    oldEnemiesAmount = (amount > 0) ? amount : oldEnemiesAmount;
    newEnemiesAmount = amount+(Math.floor(oldEnemiesAmount)/5)

    //Create a layer to spawn the enemies on
    enemyLayer = new createjs.Container();

    //Loop through the amount wanted.
    for (var i = 0; i < newEnemiesAmount; i++) {
        enemy = new Enemy(i);
        createEnemyBullet(enemy);
        //push the object in an array and add it to the newly made layer
        enemies.push(enemy);
        enemyLayer.addChild(enemy.sprite);
    }

    stage.addChild(enemyLayer);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:41:37.250

尝试在构建 spritesheet 时指定 spritesheet 中的帧数。

```
var spriteSheet = new createjs.SpriteSheet({
    images: ["resources/sprites/enemy_spritesheet.png"], 
    frames: {width:40, height:40, count: 4},
    animations: {
        walk: [0, 3]
    }
}); 
```

# android - GCM 推送通知在 HTC explorer v 2.3.5 上不起作用

> ID：15780557
> 
> 赞同：1
> 
> 时间：2013-04-03T06:43:35.407
> 
> 标签：android, google-cloud-messaging

我已经在我的 android 应用程序中实现了 GCM 推送通知。服务器端是php。我在大多数设备上都收到了所有推送通知消息，但在 HTC explorer android 版本 2.3.5 上我无法收到任何通知。我已经测试了 4.0 版的其他 HTC 设备以及其他三星设备，并且工作正常。请给我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:12:41.397

1.检查该设备上是否添加了谷歌帐户。（设置->添加帐户）。此帐户不应与您在 Google API 控制台中创建 API 项目时使用的帐户相同。2\. 在某些情况下，GCM - SERVICE_NOT_AVAILABLE 将在注册设备时响应，因此请确保设备已注册并且它获得了 GCM 服务器的令牌。

```
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    if ("com.google.android.c2dm.intent.REGISTRATION".equals(action)) {                     
        if (intent.getStringExtra("registration_id")!=null){
            //add log here
        }
        String error = intent.getStringExtra("error");
        if (error!=null){
        //add log here
        }
    }
} 
```

# angularjs - 如何禁用angularjs中的路由？

> ID：15780559
> 
> 赞同：9
> 
> 时间：2013-04-03T06:43:38.643
> 
> 标签：angularjs

我有一个单页应用程序，实际上只有一个单页。只有一个视图使用 angularjs 完成了许多 javascript/ajax 逻辑，但没有路由到涉及的其他视图。

因此，我想去掉 url 末尾的 hashbang (#/)。我可以以某种方式完全关闭 angularjs 路由吗？

顺便说一句：我知道 Htm5Mode，但我希望它适用于所有浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T00:15:18.613

如果您没有`$routeProvider`定义，则不会有路由，因此您的 url 中不会有散列。

# jquery - jQuery插件在两个窗口中显示两个文件之间的差异

> ID：15780561
> 
> 赞同：2
> 
> 时间：2013-04-03T06:43:39.950
> 
> 标签：jquery

我有来自同一个测试计划的 2 个测试结果，它们几乎相同，只有很小的差异。现在我想在同一个 html 页面上显示两个测试结果的内容，突出显示差异，就像`vimdiff`.

我做了一些研究，发现`jQuery.PrettyTextDiff`（[http://jsfiddle.net/arnab/YwSVY/](http://jsfiddle.net/arnab/YwSVY/)），它可以做一些差异工作，但格式与我的预期完全不同。能介绍一下其他插件吗？或者我可以配置`jQuery.PrettyTextDiff`以达到我的期望吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-26T11:29:55.640

你可能会喜欢[这个](https://github.com/cemerick/jsdifflib)。这是一个 JavaScript 工具。它产生类似于 vimdiff 的输出。[在此处](http://cemerick.github.io/jsdifflib/demo.html)查看演示。

# sql - 如何找到同一列中两个日期之间的差异？

> ID：15780569
> 
> 赞同：1
> 
> 时间：2013-04-03T06:44:20.860
> 
> 标签：sql, sql-server, sql-server-2008, datediff, sliding-window

我有一个 SO_STATUS 表，它为服务订单的每个状态更改写入一条记录（我们将 Service_Order_ID 称为“Job_ID”）。Job_ID 引用 SERVICE_ORDER 表。初始化服务订单时，会为显示日期时间的“打开”状态类型 (StatusType 2) 写入记录。然后在状态表中写入另一条记录，用于“进行中”（StatusType 1）。并且当服务订单“关闭”时，状态表中写入另一条记录（StatusType 3）。还有其他可能发生的状态类型，但这些是最常见的。SO_STATUS 表中的数据如下所示：

```
id            Date                Job_ID  StatusTypeID  EmployeeID
1     2012-01-01 09:05:00.000       51        2             5
2     2012-01-01 10:00:00.000       52        2            12
3     2012-01-01 10:01:00.000       51        1             5
4     2012-01-01 12:15:00.000       53        2             8
5     2012-01-01 12:16:00.000       51        3             5
6     2012-01-01 13:00:00.000       52        1            12
7     2012-01-01 14:00:00.000       52        3            12
8     2012-01-01 14:15:00.000       53        1             8
9     2012-01-01 15:00:00.000       54        2            11
10    2012-01-01 16:30:00.000       53        3             8
11    2012-01-01 15:00:00.000       54        1            11
12    2012-01-01 16:30:00.000       54        3            11 
```

我需要能够找到每个 Job_ID 的每次状态更改之间经过的时间。从本质上讲，工作从打开到关闭所花费的时间。

输出看起来像（EmployeeName 将从 EMPLOYEE 表中引用）：

```
Job_ID       Duration    EmployeeName
  51         03:11:00        Kyle
  52         04:00:00        Chris
  53         04:15:00        Fred
  54         01:30:00        John 
```

我将如何获得这种类型的输出？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:48:55.057

你为什么不使用：

```
SELECT DATEDIFF (anyparticularunit, ' 2012-01-01 09:05:00.000', ' 2012-01-01 15:00:00.000') 
```

**通过以下链接查看 datediff：**

[http://msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

还可以按照此链接获取不同的示例：

[http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=56126](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=56126)

希望你能进一步提出条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:45:40.740

这个这个——

```
SET NOCOUNT ON;

DECLARE @duration TABLE 
(
      id BIGINT IDENTITY
    , [date] DATETIME
    , job_id INT
    , [status] VARCHAR(10)
    , employee_id INT
)

INSERT INTO @duration ([date], job_id, [status], employee_id)
VALUES
    ('2012-01-01 09:05:00.000', 51, 'open', 5),
    ('2012-01-01 10:00:00.000', 52, 'open', 12),
    ('2012-01-01 10:01:00.000', 51, 'inprogress', 5),
    ('2012-01-01 12:15:00.000', 53, 'open', 8),
    ('2012-01-01 12:16:00.000', 51, 'closed', 5),
    ('2012-01-01 13:00:00.000', 52, 'inprogress', 12),
    ('2012-01-01 14:00:00.000', 52, 'closed', 12),
    ('2012-01-01 14:15:00.000', 53, 'inprogress', 8),
    ('2012-01-01 15:00:00.000', 54, 'open', 11),
    ('2012-01-01 16:30:00.000', 53, 'closed', 8),
    ('2012-01-01 15:00:00.000', 54, 'inprogress', 11),
    ('2012-01-01 16:30:00.000', 54, 'closed', 11)

SELECT 
      job_id
    , employee_id
    , work_time = CONVERT(VARCHAR(12), MAX([date]) - MIN([date]), 114) 
FROM @duration
GROUP BY job_id, employee_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:23:16.707

尝试下面给出的查询：

```
Select t1.Job_ID,
Convert(varchar(5),DateDiff(HH,Min(t1.JobDate),tbl.MaxDate))+' : '+convert(varchar(5),DateDiff(s,Min(t1.JobDate),tbl.MaxDate) % 3600/60)+' : '+Convert(varchar(5),DateDiff(s,Min(t1.JobDate),
tbl.MaxDate) % 60) MinDate,t1.EmployeeName From SO_STATUS t1
Inner join (Select Max(JobDate) MaxDate, job_id From SO_STATUS  Group By Job_Id)tbl on t1.Job_ID=tbl.Job_ID
Inner Join EMPLOYEE e On e.EmployeeID=t1.EmployeeID
Group By t1.EmployeeName,tbl.MaxDate,t1.Job_ID
Order By t1.Job_ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:15:44.213

如果您的数据库是 Oracle，您可以这样做

```
SELECT DISTINCT JOB_ID, MAX(DATE) OVER(PARTITION BY JOB_ID)-MIN(DATE) OVER(PARTITION BY JOB_ID) AS Duration FROM TA JOIN TB ..... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T07:17:39.350

我创建了一些自定义代码来创建 dat 和时间差，使用 datediff 函数并除以某些数字来生成小时、分钟和秒：

```
SELECT 
    Job_ID,
    CAST(DATEDIFF(second, MIN(Date), MAX(Date)) / 3600 AS VARCHAR)
    + ':' + CAST((DATEDIFF(second, MIN(Date), MAX(Date)) % 3600) / 60 AS VARCHAR)
    + ':' + CAST(((DATEDIFF(second, MIN(Date), MAX(Date)) % 3600) % 60)  AS VARCHAR)
FROM YOUTABLE 
GROUP BY Job_ID 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T06:51:56.423

您可以使用 DATEDIFF 返回指定的开始日期和结束日期之间交叉的指定日期部分边界的计数（有符号整数）（请参阅[http://msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)）

```
 SELECT Job_ID,
 DATEDIFF(day, (SELECT MIN(Date) FROM YOUTABLE WHERE Job_ID=k.Job_ID),(SELECT MAX(Date) FROM YOUTABLE WHERE Job_ID=k.Job_ID)),
 (SELECT EmployeeName FROM EmployeeTABLE WHERE EmployeeID=k.EmployeeID)) FROM YOUTABLE k 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-24T10:42:08.560

# 具有日期时间格式的不同表的两个日期之间的差异。

选择 t1.Column_Names，

转换（varchar（10），t1.CreatedOn，103）

AS CreatedOn FROM table1 t1 INNER JOIN table2 t2

ON t1.id = t2.id WHERE CAST（t1.CreatedOn 作为日期）

在@fromdate 和@todate 之间。

> 我已将 t1.CreatedOn 作为保存日期的表属性。
> 
> @fromdate 和 @todate 传递日期。

# java - 下一个按钮的 Java 代码

> ID：15780573
> 
> 赞同：1
> 
> 时间：2013-04-03T06:44:50.227
> 
> 标签：java, swing, jdbc

嗨，这是我的下一个按钮的 Java 代码。

但它只进入一条记录，即在最后一条记录之后它只移动到第一条记录。

如何在整个数据库条目中移动它。

请给我一些建议。

```
public void Next() {
    Connection con = null;
    ResultSet rs = null;
    try {
        con = DBConnection();
        PreparedStatement pstmt = con.prepareStatement("select * from data", ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);
        rs = pstmt.executeQuery();
        if (rs.next()) {
            field1.setText(rs.getString("Name"));
            field2.setText(String.valueOf(rs.getInt("Age")));
        } else {
            rs.previous();
            JOptionPane.showMessageDialog(nxtbtn, "end of file");
        }
    } catch (Exception e) {
        // TODO: handle exception
    } finally {
        try {
            rs.close();
        } catch (SQLException err) {
            JOptionPane.showMessageDialog(nxtbtn, err.getMessage());
            // TODO: handle exception
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:49:56.790

当您调用 next 时，它会重新加载数据库中的所有结果并将光标移动到第一行之前，调用`rs.next`将移动到第一行。

您是否查询过一次，大概是在您需要显示下一条记录时。

在您的`next`方法中，只需调用`rs.next()`以将光标移动到结果集中的下一个可用行。

当然，您需要继续管理错误状态；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:00:27.983

rs.next() 将光标移动到下一个可用行。这就是它显示一条记录的原因。利用`while(rs.next())`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:58:34.270

如果理解正确，您想使用下一步按钮单击结果集吗？

然后您应该阅读数据库并将其存储在下一个按钮方法之外的结果集中。

目前，您似乎每次点击都会创建一个新的结果集，并且只读取第一组数据。

```
private Connection con = DBConnection();
private ResultSet rs = null;
private Statement stmt = null;
public void onLoad()
{
stmt = con.createStatement();
rs = stmt.executeQuery("YOUR-CODE-HERE");
} 
```

现在在下一个方法中，每次点击都通过 rs

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T06:53:02.657

您需要了解`resultset`该方法的外部`next()`。`next()`每次调用都会重置`resultset`, 并`cursor`重新开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T20:29:25.383

向前移动一条记录，如下所示

```
rs.next() 
```

浏览所有“下一个”记录，如下所示

```
while(rs.next()) 
```

像下面这样向后移动

```
rs.previous() 
```

# android - 与 ksoap2 或替代方案的肥皂会话

> ID：15780575
> 
> 赞同：2
> 
> 时间：2013-04-03T06:45:05.320
> 
> 标签：android, scope, ksoap2, android-ksoap2, sessionid

我想在基于 Android 的设备上使用（自写）webService。我已经能够连接并与 ksoap2 一起使用它，但前提是我不使用“soapsession”范围。（只是因为我不知道如何启用管理会话选项或至少如何在 ksoap2 中获取 sessionGroupId）

有了轴和存根，它的文档有据可查（我已经编写了完美运行的客户端） 只需在带有 ksoap2 的 android 上，我就面临会话问题。

是否可以将肥皂会话与 ksoap2 一起使用？（传输会话有效，但我需要使用肥皂会话）

有 ksoap2 的替代品吗？还是我应该重新打包所有 java/javax 类并改用axis2？（那么更新会很麻烦，还是我错了？）

编辑：

另一个问题是：是否有可能以某种方式参与模块“寻址”？就像在axis2中一样：xx._getServiceClient().engageModule("addressing");

# wordpress - 我如何在 wordpress 3.5.1 数据库中更改我的分配用户角色

> ID：15780576
> 
> 赞同：1
> 
> 时间：2013-04-03T06:45:22.830
> 
> 标签：wordpress

这次我的用户角色是“管理员”，但我必须通过更改数据库来更改我的角色“编辑者”并分配该角色。

我也读过

这是[一个链接](http://codex.wordpress.org/Database_Description)！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:06:06.300

有一个名为 wp_usemeta 的表。在其中，有一个管理员用户权限的设置。您会发现一个包含类似“a:1:{s:6:”administrator";b:1;}" 的字段，并且您想将其更改为“a:1:{s:13:”编辑器“；b：1；}”。（不包括引号）。

事先备份mysql数据库，以防它进一步损坏。

[学分](http://wordpress.org/support/topic/changing-user-roles)

# php - 如何在php中复制唯一的特定扩展文件？

> ID：15780588
> 
> 赞同：2
> 
> 时间：2013-04-03T06:46:04.243
> 
> 标签：php, copy

您好，我正在使用以下代码将文件从一个目录复制到另一个目录，它的工作原理就像一个魅力这是我的代码：

```
<?php
function recurse_copy($src,$dst) {
    $dir = opendir($src);
    @mkdir($dst);
    while(false !== ( $file = readdir($dir)) ) {
        if (( $file != '.' ) && ( $file != '..' )) {
            if ( is_dir($src . '/' . $file) ) {
                recurse_copy($src . '/' . $file,$dst . '/' . $file);
            }
            else {
                copy($src . '/' . $file,$dst . '/' . $file);
            }
        }
    }
    closedir($dir);
}  if(isset($_POST["source"]) && isset($_POST["destination"])){

$src = $_POST["source"];

$dst = $_POST["destination" ];
recurse_copy($src,$dst);
}
?> 
```

现在我只想从源文件夹中复制图像文件。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T06:52:19.910

[Getimagesize](http://de.php.net/getimagesize)可以帮助您。出错时返回 false。文件不是图像是错误的。

```
<?php
function recurse_copy($src,$dst) {
    $dir = opendir($src);
    @mkdir($dst);
    while(false !== ( $file = readdir($dir)) ) {
        if (( $file != '.' ) && ( $file != '..' )) {
            if ( is_dir($src . '/' . $file) ) {
                recurse_copy($src . '/' . $file,$dst . '/' . $file);
            }
            else {
                /////
                if(!getimagesize($src . '/' . $file,$dst . '/' . $file)) continue;
                /////
                copy($src . '/' . $file,$dst . '/' . $file);
            }
        }
    }
    closedir($dir);
}  if(isset($_POST["source"]) && isset($_POST["destination"])){

$src = $_POST["source"];

$dst = $_POST["destination" ];
recurse_copy($src,$dst);
}
?> 
```

**或者**

您只需检查文件扩展名：

```
$ext = end(explode('.',$file)); 
```

但它可以说谎。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T06:56:19.170

我看到了两种方式：

*   您制作一个可能的文件扩展名数组，并检查 `$file`每个文件的 var 结尾。
*   或者您使用`exif_imagetype()`函数和 Imagetype 内容来从签名中确定文件类型。文档在[这里](http://php.net/manual/en/function.exif-imagetype.php)。但是，对此存在依赖关系，有关详细信息，请参阅第一个用户提供的注释。

# c++ - CString 或 char 数组哪一个在内存方面更好

> ID：15780589
> 
> 赞同：1
> 
> 时间：2013-04-03T06:46:10.467
> 
> 标签：c++, memory, char, cstring

我在某处读到 CString 的使用成本很高。你能用一个例子来校准它吗？在 CString 和 char 数组中也是如此，这在内存方面更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:07:07.317

除了字符数组（或宽字符）之外，CString 还包含字符串大小、分配的缓冲区大小和引用计数器（另外用作锁定标志）。包含字符数组的缓冲区可能比它包含的字符串大得多——它可以减少耗时的分配调用的数量。此外，当 CString 设置为零大小时，它仍然包含两个 wchar 字符。

自然地，当你将 CString 的大小与对应的 C 样式数组的大小进行比较时，数组会更小。但是，如果您想在 CString 允许的范围内尽可能广泛地操作您的字符串，您最终会为字符串大小、缓冲区大小以及有时 refcounter 和/或保护标志定义自己的变量。实际上，您需要存储字符串大小以避免每次需要时都调用 strlen。如果允许缓冲区大于字符串长度，则需要单独存储缓冲区大小，并避免在每次添加或减去字符串时调用 reallocs。依此类推——你用一些小尺寸的增加换取速度、安全性和功能的显着增加。

所以，答案取决于你要对字符串做什么。假设您想要一个字符串来存储类的名称以进行日志记录——C 风格的字符串（const 和 static）就可以了。如果您需要一个字符串来操作它并将其广泛用于与 MFC 或 ATL 相关的类，请使用 CString 系列类型。如果您需要在应用程序的“引擎”部分中操作与其接口隔离的字符串，并且可能会转换到其他平台，请使用 std::string 或编写您自己的字符串类型以满足您的特定需求（这可以是当您编写“胶水”代码放置在接口和引擎之间时非常有用，否则最好使用 std::string ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:57:57.500

CString 来自特定于 Windows 的 MFC 框架。std::string 来自 c++ 标准。它们是用于管理内存中字符串的库类。std::string 将为您提供跨平台的代码可移植性。

使用原始数组对内存总是有好处的，但是必须对字符串进行操作，并且使用原始数组变得困难，考虑越界检查，获取字符串长度，复制数组或更改大小，因为字符串可能会增长，删除数组等。对于所有这些问题，字符串实用程序类都是很好的包装器。字符串类会将实际字符串保留在堆中，并且您拥有字符串类本身的开销。但是，这将为您提供管理字符串内存的功能，无论如何您都必须手动编写。

如果可以，请首选 std::string，如果不能，请使用 CString。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:57:49.283

在几乎所有情况下，我都鼓励新手程序员使用 std::string 或 CString(*)。首先，他们会犯明显更少的错误。由于错误使用 C 数组，我见过许多缓冲区溢出、内存失效或内存泄漏。

那么哪个更有效，CString / std::string 还是原始字符数组？内存方面，一般来说，所有 CString 和 std::string 的大小都是一个整数。问题是这有关系吗？

那么在性能方面哪个更有效呢？好吧，这取决于你用它做什么以及你如何使用你的 C 数组。但是传递 CString 或 std::string arround 在计算上可能比 C 数组更有效。C 数组的问题在于您无法确定谁拥有内存以及它是什么类型（堆/堆栈/文字）。你知道，防御性编程会产生更多的数组副本，只是为了确保你持有的内存在需要的整个持续时间内都是有效的。

如果 std::string 或 CString 按值传递，为什么它们比 C 数组更有效？这有点复杂，原因完全不同。对于 CString，这很简单，它实现为 COW（写入时复制）对象。因此，当您有 5 个源自一个 CString 的对象时，它不会使用更多的内存，直到您开始对一个对象进行更改。std::string 有更严格的要求，因此不允许与其他 std::string 对象共享内存。但是如果你有一个更新的编译器，std::string 应该实现移动语义，因此从函数返回一个字符串只会导致指针的副本而不是重新分配。

很少有原始 C 数组是好的和实用的想法的情况。

*) 如果您已经在针对 MFC 进行编程，为什么不直接使用 CString。

# python - `dict.keys()` 和 `dict.values()` 在 `Python` 中是否总是匹配？

> ID：15780590
> 
> 赞同：0
> 
> 时间：2013-04-03T06:46:13.100
> 
> 标签：python

假设我有一个 dict `d = {'a': 1, 'b': 2}`，然后`d.keys()`返回`['a', 'b']`，我可以指望`d.values()`它`[1, 2]`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:47:35.390

**如果您需要键和值，则应使用`dict.items()`，这会使问题变得毫无意义。**

答案是：是的，它们通常是相同的顺序，但是不，你不能相信这一点。原因是`keys()`它将按内部顺序列出键（这取决于哈希值）。`values()`通常会通过返回每个键的值来列出值，并且键再次将按内部顺序排列。所以是的，他们会匹配。对于 Python 内置的 dict 类，它们将匹配：

> 如果 items()、keys()、values()、iteritems()、iterkeys() 和 itervalues() 被调用而没有对字典进行干预修改，则列表将直接对应。

但这是一个实现细节，不是您的平台，而是映射类。因此，如果您的映射不是内置的 dict 类，您就不能再确定是这种情况。并且使用 Python 的“鸭子打字”，您不应该假设您正在使用 dict 类。

但如上所述，这个问题毫无意义，你永远不需要相信它。

# ios - 将 UISlider 添加到 UINavigationbar 后，它在横向模式下显示错误。如何纠正？

> ID：15780591
> 
> 赞同：0
> 
> 时间：2013-04-03T06:46:15.447
> 
> 标签：ios, objective-c, slider, navigationbar

我正在 iPhone 上制作自己的视频播放器。我添加了一个`UISlider`作为`UINavigationbar`进程栏。

**代码：**

```
IBOutlet UISlider* mScrubber;

......

UIBarButtonItem *scrubberItem = [[UIBarButtonItem alloc] initWithCustomView:mScrubber];

[self.navigationItem setRightBarButtonItems:[NSArray arrayWithObjects: scrubberItem, nil]]; 
```

在纵向模式下启动时它可以正常工作。但是在横向模式下启动时，进程栏仍然和纵向模式一样宽。截图在[这里](https://docs.google.com/file/d/0B3zSzVUgsG-FMW1vS3VRdEo2M0U/edit?usp=sharing)

谁能告诉我如何纠正它？

提前致谢！

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:52:02.960

在情节提要中很容易做到。只需将滑块添加到连接了 push segue 的控制器的导航栏。它会自动延伸到整个导航栏，但会在后退按钮出现时为它腾出空间，并正确响应旋转。

# javascript - 如何用三个js渲染像素化纹理？

> ID：15780592
> 
> 赞同：5
> 
> 时间：2013-04-03T06:46:17.263
> 
> 标签：javascript, rendering, three.js

我修改了一个类似于我的世界的演示，这样你就可以跳来跳去放置块。但是由于某种原因，我构建的块的纹理是平滑的而不是像素化的。

![在此处输入图像描述](https://i.stack.imgur.com/v5Jaw.jpg)

我认为相关的来源：

```
var textureDirt = THREE.ImageUtils.loadTexture( 'img/dirt.png' );
textureGrass.magFilter = THREE.NearestFilter;
textureGrass.minFilter = THREE.LinearMipMapLinearFilter;
var material = new THREE.MeshLambertMaterial( { map: textureDirt, ambient: 0xbbbbbb, vertexColors: THREE.VertexColors } );

var geometry = new THREE.CubeGeometry(1,1,1);
var mesh = new THREE.Mesh(geometry, material);
mesh.position.x = point[0];
mesh.position.y = point[1];
mesh.position.z = point[2];

// for physics
mesh.blockType = type;
world[point] = mesh;

scene.add(mesh); 
```

现场演示： [http ://ubershmekel.github.com/mine3js/](http://ubershmekel.github.com/mine3js/)

其余来源： [https ://github.com/ubershmekel/mine3js/blob/master/js/main.js](https://github.com/ubershmekel/mine3js/blob/master/js/main.js)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T06:46:17.263

查看问题后，我发现了错误。我没有将过滤器应用于污垢材料

```
textureGrass.magFilter = THREE.NearestFilter;
textureGrass.minFilter = THREE.LinearMipMapLinearFilter; 
```

本来应该

```
textureDirt.magFilter = THREE.NearestFilter;
textureDirt.minFilter = THREE.LinearMipMapLinearFilter; 
```

# cuda - tex 对象访问总是返回零——有什么想法吗？

> ID：15780604
> 
> 赞同：3
> 
> 时间：2013-04-03T06:46:48.427
> 
> 标签：cuda

我正在运行 CUDA 5.0，compute_30,sm_30 使用 670 设置。

我通过以下方式创建了一个 mipmapped 数组：

```
cudaExtent size;
size.width = window_width;      // 600
size.height = window_height;    // 600
size.depth = 1;
int levels = getMipMapLevels(size);
levels = MIN(levels, 9);        // 9
cudaChannelFormatDesc fp32;
fp32.f = cudaChannelFormatKindFloat;
fp32.x = fp32.y = fp32.z = fp32.w = 32;
cudaMipmappedArray_t A;
checkCuda(cudaMallocMipmappedArray(&A, &fp32, size, levels, cudaArraySurfaceLoadStore)); 
```

我用 surf2Dwrites 加载 A 的第一级。我知道这是可行的，因为我将该数组复制到主机并将其转储到图像文件中。我现在希望用 mipmap 填充 A 的其他 miplevel。通过该循环的一次迭代如下所示：

```
width >>= 1; width = MAX(1, width);
height >>= 1; height = MAX(1, height);

cudaArray_t from, to;
checkCuda(cudaGetMipmappedArrayLevel(&from, A, newlevel-1));
checkCuda(cudaGetMipmappedArrayLevel(&to, A, newlevel));

cudaTextureObject_t from_texture;
create_texture_object(from, true, &from_texture);
cudaSurfaceObject_t to_surface;
create_surface_object(to, &to_surface);

dim3 blocksize(16, 16, 1);
dim3 gridsize((width+blocksize.x-1)/blocksize.x,(height+blocksize.y-1)/blocksize.y, 1);
d_mipmap<<<gridsize, blocksize>>>(to_surface, from_texture, width, height);

checkCuda(cudaDeviceSynchronize());
checkCuda(cudaGetLastError());
uncreate_texture_object(&from_texture);
uncreate_surface_object(&to_surface); 
```

已知 create_surface_object() 代码可以工作。以防万一，这里是 create_texture_object() 代码：

```
static void create_texture_object(cudaArray_t tarray, bool filter_linear, cudaTextureObject_t *tobject)
{
    assert(tarray && tobject);
    // build the resource
    cudaResourceDesc    color_res;
    memset(&color_res, 0, sizeof(cudaResourceDesc));
    color_res.resType = cudaResourceTypeArray;
    color_res.res.array.array = tarray;

    // the texture descriptor
    cudaTextureDesc     texdesc;
    memset(&texdesc, 0, sizeof(cudaTextureDesc));
    texdesc.addressMode[0] = cudaAddressModeClamp;
    texdesc.addressMode[1] = cudaAddressModeClamp;
    texdesc.addressMode[2] = cudaAddressModeClamp;
    texdesc.filterMode = filter_linear ? cudaFilterModeLinear : cudaFilterModePoint;
    texdesc.normalizedCoords = 1;

    checkCuda(cudaCreateTextureObject(tobject, &color_res, &texdesc, NULL));
} 
```

d_mipmap 设备函数如下：

```
__global__ void
d_mipmap(cudaSurfaceObject_t out, cudaTextureObject_t in, int w, int h)
{
    float x = blockIdx.x * blockDim.x + threadIdx.x;
    float y = blockIdx.y * blockDim.y + threadIdx.y;

    float dx = 1.0/float(w);
    float dy = 1.0/float(h);

    if ((x < w) && (y < h))
    {
#if 0
        float4 color = 
            (tex2D<float4>(in, (x + .25f) * dx, (y + .25f) * dy)) +
            (tex2D<float4>(in, (x + .75f) * dx, (y + .25f) * dy)) +
            (tex2D<float4>(in, (x + .25f) * dx, (y + .75f) * dy)) +
            (tex2D<float4>(in, (x + .75f) * dx, (y + .75f) * dy));
        color /= 4.0f;
        surf2Dwrite(color, mipOutput, x * sizeof(float4), y);
#endif
     float4 color0 = tex2D<float4>(in, (x + .25f) * dx, (y + .25f) * dy);
     surf2Dwrite(color0, out, x * sizeof(float4), y);
    }
} 
```

这既包含 mipmap 采样代码（如果有的话）和调试代码。

问题是，color0 始终为零，我一直无法理解为什么。我已将过滤更改为点（从线性）但没有成功。我检查了错误。没有。

我在这里使用 CUDA/OpenGL 互操作，但 mipmap 生成仅在 CUDA 数组上完成。

我真的真的不想使用纹理参考。

关于在哪里看的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T05:07:10.820

该错误原来是使用 cudaMipmappedArrays （数组或纹理对象 - 我无法判断哪个坏了。）

当我修改代码以仅使用 cudaArrays 时，纹理参考再次开始工作。

由于无绑定纹理程序示例有效，因此该错误似乎仅限于 float32 通道 mipmaped 纹理。（我有一个测试程序，显示 1 通道和 4 通道 float32 mipmapped 纹理都会出现该错误。）

我已经向 Nvidia 报告了这个错误。

# c# - 将命令添加到与 word 2007 中的文本关联的每个上下文菜单`

> ID：15780605
> 
> 赞同：3
> 
> 时间：2013-04-03T06:46:48.543
> 
> 标签：c#, ms-word, vsto, add-in

将命令添加到 Word 2007 中的上下文菜单非常简单，如下所示[，](http://msdn.microsoft.com/en-us/library/dd723154%28VS.90%29)但是有没有办法将命令添加到与任何类型的文本关联的所有上下文菜单中。我已经尝试遍历一些命令栏并添加新控件 - 但这会减慢应用程序的启动速度。有没有其他方法——比如任何文本的“root”命令栏？

# client-server - 网络本地主机

> ID：15780609
> 
> 赞同：2
> 
> 时间：2013-04-03T06:47:05.137
> 
> 标签：client-server, netty

在 netty 中，找到已连接客户端的最佳方法是在 localhost 中？

注意： e.getChannel().getRemoteAddress() 给出 127.0.0.1:5555 之类的 IP 地址，但我不能确定 localhost 是否设置为该 IP 地址。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:20:59.957

请注意，这不是 Netty 问题。

如果你想确定远程地址是真的远程（即来自另一台主机），你可以尝试`NetworkInterface`使用IP地址查找，如果你得到`null`，它真的是远程的。

```
NetworkInterface ni = NetworkInterface.getByInetAddress(e.getChannel().getRemoteAddress().getAddress());
if (ni == null) 
    // remote client 
```

# c - 特殊字符读错 - 文件 I/0

> ID：15780612
> 
> 赞同：0
> 
> 时间：2013-04-03T06:47:13.393
> 
> 标签：c, linux, gcc, file-io, special-characters

此代码每个字节读取一个文件字节以复制它：

```
 fplain = fopen("plaintext", "rb");
 fcypher = fopen("cyphertext", "wb");

 for(j = 0; j < Nb; j++){
    for(i = 0; i < 4; i++){
            if(feof(fplain))
                break;              
            fread(&in[i][j], sizeof(unsigned char), sizeof(unsigned char), fplain); 
            fwrite(&in[i][j], sizeof(unsigned char), sizeof(unsigned char), fcypher);
    }
 } 
```

问题是输入文件包含未正确读取的特殊字符：

```
2Cö¨Z011¢à74 
```

好像之前检测到文件结尾，输出文件中的结果是：

```
2Cö¨Z011 
```

我在 fopen() 函数中使用“rb”模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:59:49.150

以十六进制编码的字节占用两个字节。要生成 16 个字符，您必须从文件中读取 32 个字节；如果您读取 16 个字节，则只能产生 8 个字符。

另一方面，如果“16 个十六进制编码字符”是指文件仅包含 16 个字节，则不能期望读取 12 个字符（24 个字节）。在这种情况下，您预期输出中的最后 4 个字符可能是由错误程序产生的随机垃圾，并且无法可靠地重现它们。

# facebook - 如何在没有用户登录的情况下获取 Facebook 页面新闻提要，包括喜欢和评论？

> ID：15780614
> 
> 赞同：2
> 
> 时间：2013-04-03T06:47:19.207
> 
> 标签：facebook, facebook-graph-api

我想从我的 Facebook 页面获取新闻提要并将其显示在我的应用程序中，包括 Facebook 页面新闻提要中帖子的点赞和评论，而无需用户登录。我是 Facebook API/SDK 的新手。这可能吗？[我已经在这里](https://stackoverflow.com/questions/9964359/is-it-possible-to-get-the-public-facebook-wall-feeds-when-not-logged-in)和[这里](http://costimuraru.wordpress.com/2011/12/16/facebook-how-to-find-out-a-fan-page-id/)找到了这些链接

但使用链接：

> [https://www.facebook.com/feeds/page.php?id=](https://www.facebook.com/feeds/page.php?id=[Page) [页面ID]&format=json

它只返回包含来自我的 Facebook 页面的帖子的 JSON，而没有来自帖子的喜欢和评论。

我真的很感谢你的帮助。谢谢！

# android - 在 Selenium Android Webdriver 测试中使用 Xpath 和 CSS 查找元素时遇到困难

> ID：15780616
> 
> 赞同：2
> 
> 时间：2013-04-03T06:47:23.513
> 
> 标签：android, webdriver, selenium-webdriver, testautomationfx

我想使用 Selenium WebDriver 自动化 android web 应用程序，并且我运行了一个简单的程序来打开 google 页面并搜索一个词。在找到具有名称和 id 的元素时，它运行良好。但是在尝试使用 Xpath 和 Css 查找元素时似乎很困难。有人知道如何在 selenium android webdriver 中使用 xpath 和 css 路径吗？这是我使用的示例代码：

```
public class TestDriver extends TestCase 
{

    public static void testGoogle() throws Exception 
    {
    AndroidDriver driver = new AndroidDriver();

    driver.get("http://google.com");
    WebElement element = driver.findElement(By.name("q"));
       //WebElement element = driver.findElement(By.xpath("//*[@id='gbqfq']"));
       //WebElement element = driver.findElement(By.cssSelector("#gbqfq"));
    element.sendKeys("android driver");
    element.submit();
    System.out.println("Page title is: " + driver.getTitle());
    //driver.quit();
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:51:56.257

我已经成功地证明了这一点`By.xpath`，并且`By.cssSelector`能够找到可以在我们的代码中用于与网页交互的元素。出于几个实际原因，我创建了一个影子简化的测试页面，然后提交查询以从 Google 的搜索引擎获取搜索结果。

这是简化的测试页面，足以演示基础知识。将此文件复制到您的 android 设备或 AVD 的 sdcard，例如使用以下命令`adb push form.html /sdcard/form.html`

```
<html>
<head>
  <title>WebDriver form test page</title>
</head>
<body>
<form name="testform" action="http://www.google.co.uk/search" method="get">
  <input id="gbqfq" class="gbqfif" type="text" value="" autocomplete="off" name="q">
  <input type="submit" value="search Google">
</form>
</body>
</html> 
```

这是您问题中代码的修改版本：

```
@Test
public void testByClauses() throws Exception {
     AndroidDriver driver = new AndroidDriver();
     // driver.get("http://www.google.co.uk/");
     driver.get("file:///sdcard/form.html");
     System.out.println(driver.getPageSource());

     WebElement nameElement = driver.findElement(By.name("q"));
     WebElement xpathElement = driver.findElement(By.xpath("//*[@id='gbqfq']"));
     WebElement cssElement = driver.findElement(By.cssSelector("#gbqfq"));

     nameElement.sendKeys("android ");
     xpathElement.sendKeys("driver ");
     cssElement.sendKeys("webdriver");
     nameElement.submit();
     System.out.println("Page title is: " + driver.getTitle());
     driver.quit();
} 
```

我碰巧使用 JUnit 4 作为测试运行器（因此使用了 @Test 注释）但是这段代码也应该在 JUnit 3 中工作。

注意事项：

*   我特意使用了 3 个独立的 WebElement，它们引用了相同的底层 HTML 元素
*   每个`sendKeys(...)`调用都会将文本附加到搜索查询
*   从技术上讲，我们不需要提交搜索查询来演示`By(...)`子句的工作，但是很高兴看到代码执行并获得一些匹配的搜索结果。
*   我注释掉了加载谷歌搜索主页的请求，但在我的回答中留下了它，这样你就可以很容易地看到如何使用谷歌网站而不是静态的本地 HTML 页面。
*   我使用本地连接的 Nexus 4 手机通过 USB 运行测试，并使用本地构建的`AndroidDriver()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T19:05:48.377

对我有用。

```
//Author: Oleksandr Knyga
function xPathToCss(xpath) {
    return xpath
        .replace(/\[(\d+?)\]/g, function(s,m1){ return '['+(m1-1)+']'; })
        .replace(/\/{2}/g, '')
        .replace(/\/+/g, ' > ')
        .replace(/@/g, '')
        .replace(/\[(\d+)\]/g, ':eq($1)')
        .replace(/^\s+/, '');
} 
```

# openerp - 项目/用户（组）：应该能够修改项目中的所有内容，直到项目转移到接受状态

> ID：15780617
> 
> 赞同：0
> 
> 时间：2013-04-03T06:47:34.383
> 
> 标签：openerp

项目/用户（组）：应该能够修改项目中的所有内容，直到项目移至接受状态。那么他应该只能修改项目线。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T06:49:34.213

您需要使用此属性“状态”定义字段，如下所示：

```
'date_order': fields.date('Date', required=True, readonly=True, select=True, states={'draft': [('readonly', False)], 'sent': [('readonly', False)]}) 
```

这意味着当状态将被草稿和发送时，date_order 字段将处于只读模式。您可以在最后做同样的事情来满足您的需求。

# git - 出现“git错误：”索引文件太小“之类的错误

> ID：15780627
> 
> 赞同：16
> 
> 时间：2013-04-03T06:48:06.847
> 
> 标签：git

我不得不重新安装操作系统（Windows 7 x64），与项目相关的所有内容都在另一个分区上，所以我的项目仍然存在。在我需要安装的应用程序中，还有 git，但在我尝试查看项目的状态（`git status`）之后，发生了以下异常：

```
error: index file .git/objects/pack/pack-d3325f684a4eca22c0c168d7c63119da147865e 4.idx is too small

error: index file .git/objects/pack/pack-d3325f684a4eca22c0c168d7c63119da147865e
4.idx is too small

error: index file .git/objects/pack/pack-d3325f684a4eca22c0c168d7c63119da147865e
4.idx is too small

error: index file .git/objects/pack/pack-d3325f684a4eca22c0c168d7c63119da147865e
4.idx is too small

warning: packfile .git/objects/pack/pack-dc512716779f21b39f70fea9afcb5baa36ea872
d.pack cannot be accessed

error: index file .git/objects/pack/pack-d3325f684a4eca22c0c168d7c63119da147865e
4.idx is too small 
```

致命：无法读取树 30cda07e931a7c9f3b1e3383c18efa10b2523c67

这对我来说是第一个。我想知道其他人是否遇到过类似的事情，这是解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-03T06:57:11.250

你试过像

在本地存储库的配置中，设置`repack.usedeltabaseoffset`为 false 然后重新打包存储库：

```
git config repack.usedeltabaseoffset false
git repack -a -d 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-03T07:03:56.093

听起来您的包文件的索引已损坏。如果您确定没有用完磁盘空间，您可以删除索引文件并使用以下命令重新创建它：

```
git index-pack -v .git/objects/pack/pack-d3325f684a4eca22c0c168d7c63119da147865e4.pack 
```

请注意，必须执行此类操作极为罕见，因此您应该将错误视为可能的文件系统损坏的迹象。您可能想要擦除所有内容并从备份中恢复。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T06:55:11.267

使用`git fsck`您*也许*可以恢复您的存储库。

但是，更有可能的是，您应该四处寻找其他选项，例如从备份恢复，或从某个 git 远程克隆。作为正常 git 开发的一部分，您应该将更改推送到某个远程服务器，例如您的另一个 git 服务器或 Github。如果你没有，你可能会有非常糟糕的一天。

# javascript - 更改选定的值事件不起作用 当下拉列表的选定值更改时，以下代码不起作用。如有错误请指正。<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <script src="jquery-1.9.1.js"></script> <script type="text /javascript"> $(document).ready(function

> ID：15780629
> 
> 赞同：0
> 
> 时间：2013-04-03T06:48:23.033
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T06:49:33.977

你错过了`$`以前`("#theSelect")`

```
$("#theSelect").change(function(){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:50:01.000

`$`丢失了，所以 jQuery 不会识别它。

更改如下

```
$("#theSelect").change(function(){
       alert("a");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:08:08.233

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <select onchange=categories(this);>
        <option value="option1">Option1</option>
        <option value="option2">Option2</option>
        <option value="option3">Option3</option>
        <option value="option4">Option4</option>
        <option value="option5">Option5</option>
    </select>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script type="text/javascript">
        function categories(el) {
            var category = el.options[el.selectedIndex].value;
            alert(category);
        }
    </script>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T06:51:33.707

用这个

```
$(document).ready(function() {
$("select").change(function(){
    alert("a");
});
}); 
```

# windows-7 - 无法使用 Windows 任务计划程序计划 C# .exe 文件运行

> ID：15780637
> 
> 赞同：0
> 
> 时间：2013-04-03T06:49:03.417
> 
> 标签：windows-7, scheduled-tasks, c#-2.0

我在 Visual Studio 2005 中使用 C# 创建了一个 Windows 应用程序。我的机器上有 Windows 7。现在我正在尝试使用 Windows 任务调度程序运行这个 .exe 文件，但是我的 .exe 文件需要一个 .ico 文件和一个与之关联的 .img 文件。

所以我在 Add Arguments(optional) 部分使用语法 -a"file-name" -a"file-name" 添加了这些文件。

我的任务已正确安排，但 Windows 给我一个错误“File.exe 已停止工作”

有人可以建议我纠正错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:29:14.243

.ico 和 .img 文件是否与 .exe 存在于同一目录中？
Windows 错误事件日志为您的应用程序显示了什么；如果没有，那么我建议在应用程序的入口点周围放置一个 try/catch 并编写完整的错误消息。请参阅类 System.Diagnostics.EventLog 和 WriteEntry() 或 WriteEvent() 方法，了解将项目放置在日志中的方法。

# c# - 找不到端点元素

> ID：15780638
> 
> 赞同：3
> 
> 时间：2013-04-03T06:49:05.847
> 
> 标签：c#, wpf, c#-4.0, wpf-controls

```
 <services>
  <service name="Lobby server.User Service" behavior Configuration="Service Behavior User">
    <host>
      <base Addresses>
        <add baseAddress="net.tcp://localhost:5061" />
      </base Addresses>
    </host>
    <!-- Service Endpoints -->
    <endpoint address="user" binding="netTcpBinding" binding Configuration="User Binding" contract="Lobby server.IUserService" />
    <endpoint address="user/Mex" binding="mexTcpBinding" name="ServiceBehaviorUser" contract="IMetadataExchange" />
  </service>

  <service name="Lobby server.Public Service" behavior Configuration="ServiceBehaviorPublic">
    <host>
      <base Addresses>
        <add baseAddress="net.tcp://localhost:5049" />
      </base Addresses>
    </host>
    <!-- Service Endpoints -->
    <endpoint address="public" binding="netTcpBinding" binding Configuration="Public Binding" contract="Lobby server.IPublicService" />
    <endpoint address="public/Mex" binding="mexTcpBinding" name="ServiceBehaviorPublic" contract="IMetadataExchange" />
  </service>

</services>
<behaviors>
  <service Behaviors>
    <behavior name="ServiceBehaviorUser">
      <service Debug includeExceptionDetailInFaults="true" />
      <service Metadata />
      <service Credentials useIdentityConfiguration="true">
        <service Certificate find Value="pident.cloudapp.net" store Location="CurrentUser" storeName="My" x509FindType="FindBySubjectName" />
      </service Credentials>
      <service Authorization principalPermissionMode="Always" />
    </behavior>

    <behavior name="ServiceBehaviorPublic">
      <service Debug includeExceptionDetailInFaults="true" />
      <service Metadata />
      <service Credentials>
        <service Certificate find Value="pident.cloudapp.net" store Location="CurrentUser" storeName="My" x509FindType="FindBySubjectName" />
      </service Credentials>
    </behavior>

  </service Behaviors>
</behaviors> 
```

![错误](https://i.stack.imgur.com/NqPle.png)

我检查了合同和名称，但随后也发生错误并且地址为空。

错误：

> 在服务模型客户端配置部分中找不到名称为 NetTcpBinding_IUserService 和合同 Lobby server.IUserService 的端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此名称匹配的端点元素。

知道出了什么问题吗？任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:53:17.073

没有端点名称：NetTcpBinding_IUserService

尝试为要使用的端点命名。创建 channelFactory 需要端点的名称而不是服务的名称。

用这个替换你的 nettcp 端点

```
<endpoint address="user" binding="netTcpBinding" binding Configuration="User Binding" 
 contract="Lobby server.IUserService" name="endpoint_NetTcp_IUserService"/> 
```

并在您的代码中引用如下：

```
new DuplexChannelFactory<IUserService>(new UserHandler(), "endpoint_NetTcp_IUserService"); 
```

# three.js - Three.js 中网格组的动画

> ID：15780639
> 
> 赞同：3
> 
> 时间：2013-04-03T06:49:06.170
> 
> 标签：three.js

我是three.js的新手。我创建了多个网格并使用 JSONLoader 进行分组。现在我的问题是将动画应用于该组或多个网格。是否可以在 JSONLoader 中将动画应用于该组。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:10:47.220

要在 threejs 中对文件进行分组，您需要创建一个 Object3D()：

```
 var group = new THREE.Object3D(); 
```

然后你需要将你的网格添加到这个变量中：

```
 group.add(mesh1); group.add(mesh2); group.add(mesh3); 
```

然后最后 - 您可以在动画循环中为该组设置动画：

```
 group.rotation.x+=.02; 
```

听起来您只想将对象添加到 JSONLoader.load 函数中的组变量中。如果您无法弄清楚，请随时分享您的代码的 jsfiddle，我可以为您指出正确的语法。

# php - 包含带有会话超时的文件不起作用

> ID：15780648
> 
> 赞同：0
> 
> 时间：2013-04-03T06:49:57.877
> 
> 标签：php

```
require("database.php");

if(empty($_SESSION['user']))
{
    header("Location: login.php");

    die("Redirecting to login.php");
}

//check session timeout
$now = time();

$limit = $now - 60 * 1;

if (isset ($_SESSION['last_activity']) && $_SESSION['last_activity'] < $limit)
{
  $_SESSION = array();
  header('Location: login.php');
  exit;
} 
else {

  $_SESSION['last_activity'] = $now;
 } 
```

如果我手动将会话超时设置在每个页面中，则编码工作正常。但是，如果我尝试将它存储在另一个文件中并将其调用到每个页面，它将被忽略并且我不会得到任何会话超时。

例子

```
require("database.php");
require("expired.php");

if(empty($_SESSION['user']))
{
    header("Location: login.php");

    die("Redirecting to login.php");
} 
```

expired.php 包含与我的 //check session timeout 相同的编码，任何帮助将不胜感激。谢谢。

编辑以包含我的 database.php

```
$username = "";
$password = "";
$host = "";
$dbname = "";

$options = array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8');

try
{
    $db = new PDO("mysql:host={$host};dbname={$dbname};charset=utf8", $username, $password, $options);
}
catch(PDOException $ex)
{
    die("Failed to connect to the database: " . $ex->getMessage());
}

$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);

if(function_exists('get_magic_quotes_gpc') && get_magic_quotes_gpc())
{
    function undo_magic_quotes_gpc(&$array)
    {
        foreach($array as &$value)
        {
            if(is_array($value))
            {
                undo_magic_quotes_gpc($value);
            }
            else
            {
                $value = stripslashes($value);
            }
        }
    }

    undo_magic_quotes_gpc($_POST);
    undo_magic_quotes_gpc($_GET);
    undo_magic_quotes_gpc($_COOKIE);
}

header('Content-Type: text/html; charset=utf-8');

if(!isset($_SESSION)){
session_start();
}
//session_start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:50:08.160

您的第一个示例（Example1）和您的第二个示例（Example2）不会获得相同的效果，因为代码的顺序不同。

Example1 和 Example3 的代码顺序相同，因此应该产生相同的行为。

当然你可以争论 session_start() （把它放在哪里等等），但这不是你的问题。

**示例 1：**

```
require("database.php");

if(empty($_SESSION['user']))
{
    header("Location: login.php");

    die("Redirecting to login.php");
}

//check session timeout
$now = time();

$limit = $now - 60 * 1;

if (isset ($_SESSION['last_activity']) && $_SESSION['last_activity'] < $limit)
{
  $_SESSION = array();
  header('Location: login.php');
  exit;
} 
else {

  $_SESSION['last_activity'] = $now;
 } 
```

**示例 2：**

```
require("database.php");
require("expired.php");

if(empty($_SESSION['user']))
{
    header("Location: login.php");

    die("Redirecting to login.php");
} 
```

**示例 3：**

```
require("database.php");

if(empty($_SESSION['user']))
{
    header("Location: login.php");

    die("Redirecting to login.php");
}

require("expired.php"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:54:05.907

如果会话没有开始，那么`$_SESSION`不应该存在。顺便说一句，成功时，失败时`session_start()`返回。`TRUE``FALSE`

所以记住这一点，你应该写这样的东西：

```
/* File: session.php */
if ( session_id() == ''){ // If session id doesn't exist

   if ( ! session_start() ){ // Do start a new session
      die('Cannot start a session'); 
   }
} 
```

然后你会在你想要的地方包含这部分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T07:25:32.943

保持

```
session_start(); 
```

在每个页面的顶部，然后不要在页面中使用它或包含页面。

如果您仍想在页面中使用 session_start()，请像这样使用它：

```
if(!session_start()){
    session_start();
} 
```

您可以告诉 php.ini 抛出哪种类型的错误，搜索“error_reporting”并阅读规则。警告不会停止代码的执行。

# testing - 需要一些关于安全测试的信息

> ID：15780651
> 
> 赞同：0
> 
> 时间：2013-04-03T06:50:13.153
> 
> 标签：testing, selenium, e-commerce, manual-testing

因为我是安全测试的新手，所以我需要一些关于安全测试的信息（尤其是与电子商务相关的）

以下是我的问题：

1.  如何进行安全测试？

2.  有什么好的文档或网站可以让我获得一些关于安全测试的好信息吗？

3.  是否有任何用于安全测试的工具

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:55:48.647

有各种各样的安全工具。如果我是你，我会下载名为 BackTrack 的系统 - www.backtrack-linux.org，其中有很多。您可以测试几乎所有内容，包括社会技术、应用程序安全、服务器安全、网络安全等。每种“安全”都有自己的工具。[在http://www.backtrack-linux.org/backtrack/social-engineering-toolkit-training/](http://www.backtrack-linux.org/backtrack/social-engineering-toolkit-training/)上有一个很好的软件可以测试网站的安全性，称为 SET 。

如果您想测试 WEB 站点，您应该查看此视频[http://vimeo.com/21631598](http://vimeo.com/21631598)

当您下载我在上面给您的链接的系统时，您将获得许多扫描网站的工具。

还有一个更强大的工具可以使用 -> [http://www.metasploit.com/](http://www.metasploit.com/)你可以在这个网站上阅读更多关于它的信息。

希望我有所帮助；）

# iphone - 将所有 MKMapRects 合并到单个 MKPolygon

> ID：15780653
> 
> 赞同：3
> 
> 时间：2013-04-03T06:50:17.820
> 
> 标签：iphone, ios, objective-c, mapkit, mkmaprect

![在此处输入图像描述](https://i.stack.imgur.com/DV9H8.png)我想在使用 Mapkit 的 MKMap 上使用 MKPolygon绘制**走廊。**我有一条从 A 站到 B 站的路线。

我在路线周围有 MKMapRects 用于绘制走廊。现在我想合并单个多边形中的所有矩形，这就是我的走廊和路线。**如何在单个 Polygon 中连接所有矩形。**

**矩形数量：160**

在这里，我附上了指示我需要什么的示例图像。

这是代码片段。

```
for(int i=0;i<[self.boundingRectsArr count];i++) {

            lat1 = [[[self.boundingRectsArr objectAtIndex:i] valueForKey:@"xLT"] doubleValue];
    long1 = [[[self.boundingRectsArr objectAtIndex:i] valueForKey:@"yLT"] doubleValue];

    lat2 = [[[self.boundingRectsArr objectAtIndex:i] valueForKey:@"xRT"] doubleValue];
    long2 = [[[self.boundingRectsArr objectAtIndex:i] valueForKey:@"yRT"] doubleValue];
            lat3 = [[[self.boundingRectsArr objectAtIndex:i] valueForKey:@"xRB"] doubleValue];
    long3 = [[[self.boundingRectsArr objectAtIndex:i] valueForKey:@"yRB"] doubleValue];
    lat4 = [[[self.boundingRectsArr objectAtIndex:i] valueForKey:@"xLB"] doubleValue];
    long4 = [[[self.boundingRectsArr objectAtIndex:i] valueForKey:@"yLB"] doubleValue];

            CLLocationCoordinate2D rect[5];
            rect[0] = CLLocationCoordinate2DMake(lat1, long1);
    rect[1] = CLLocationCoordinate2DMake(lat2, long2);
    rect[2] = CLLocationCoordinate2DMake(lat3, long3);
    rect[3] = CLLocationCoordinate2DMake(lat4, long4);
            rect[4] = CLLocationCoordinate2DMake(lat1, long1);

    MKPolygon* polyCorridor = [MKPolygon polygonWithCoordinates:rect count:5];
    polyCorridor.title = @"Colorado";
    [self.map addOverlay:polyCorridor]; 
} 
```

提前致谢。欢迎您的回答。

问候， Sagar P.![在此处输入图像描述](https://i.stack.imgur.com/ZHPG5.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:27:54.453

所以，要快：

*   **画corrigor**：画第二条粗线。
*   **突出显示走廊中的对象**：在没有多边形联合的情况下计算它们，但使用距离到路线的方法。

您可以在覆盖实现中绘制两条线，一条细线用于路线，一条用于走廊 - 细线和半透明，您可以尝试使用 MKMapView 提供的数据计算点与公里的比率并计算粗线宽度。对于地图上您要突出显示的对象 - 您可以使用不同的方法，有多种算法可用于查找曲线或直线附近的点。你甚至可以相当简单：将路线分成直线并检查所有对象的距离 - 这会非常慢，但它会起作用（确保你需要谷歌搜索那些复杂的算法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-18T15:14:06.143

很简单，首先将 MKMapRects 转换为 MKPolygons，然后使用这个库创建所有 MKPolygons 的联合： [https](https://github.com/SunGard-Labs/MKPolygon-GPC) ://github.com/SunGard-Labs/MKPolygon-GPC不幸的是它不是免费的。

# java - 类型无法创建 List 的通用数组

> ID：15780654
> 
> 赞同：8
> 
> 时间：2013-04-03T06:50:23.450
> 
> 标签：java, list, collections

假设我有类 FooClass。

```
public class FooClass {
} 
```

以下行给了我以下编译错误：

```
// Note I want to create an array of length 4 of Lists of FooClass
List<FooClass> runs[]=new List<FooClass>[4]; 
```

```
Cannot create a generic array of List<FooClass> ... 
```

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T06:52:12.990

[列表](http://docs.oracle.com/javase/tutorial/collections/interfaces/list.html)集合与[数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)不同：

```
// if you want create a List of FooClass (you can use any List implementation)
List<FooClass> runs = new ArrayList<FooClass>();

// if you want create array of FooClass
FooClass[] runs = new FooClass[4]; 
```

**升级版：**

如果要创建列表数组，您应该：

1.  创建数组
2.  用 List 实例填充这个数组

例子：

```
List<FooClass>[] runs = new List[4];
for (int i = 0; i < runs.length; i++) {
    runs[i] = new ArrayList<>();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T06:52:31.820

混合泛型和数组并不是一个好主意。泛型在运行时不保留类型信息，因此创建泛型数组失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:52:50.540

列表不应声明为数组。它应该是：

```
List<FooClass> runs=new ArrayList<FooClass>(4); 
```

或者

```
List<FooClass> runs=new ArrayList<FooClass>(); 
```

**编辑**：你可以试试`List<ConfigParser> runs[] = new List[4];`。但是为什么你需要列表数组呢？

同样正如@rai.skumar 所提到的，由于类型擦除，通用信息在运行时不会保留。

# hibernate - 在 Hibernate 中插入多行 - 批量插入

> ID：15780657
> 
> 赞同：3
> 
> 时间：2013-04-03T06:50:46.080
> 
> 标签：hibernate, batch-file, batch-processing

我在我的 DAO 类中使用以下事务代码单元在 Hibernate 中插入多行。

```
@Override
@SuppressWarnings("unchecked")
@Transactional(readOnly = false, propagation=Propagation.REQUIRES_NEW, rollbackFor={Throwable.class})
public String insertZoneCharge(Long zoneId, List<Object[]> items)
{
    Session session=sessionFactory.openSession();
    session.beginTransaction();

    //Configuration configuration=new Configuration();
    //configuration.setProperty("hibernate.jdbc.batch_size", "50");
    int i=1;

    for(Object[] o:items)
    {
        if(o[2]!=null&&StringUtils.isNotBlank(o[2].toString()))
        {
            ZoneChargePK zoneChargeId=new ZoneChargePK();
            zoneChargeId.setWeightId(Long.parseLong(o[0].toString()));
            zoneChargeId.setZoneId(zoneId);

            model.ZoneCharge zoneCharge=new model.ZoneCharge();
            zoneCharge.setZoneChargePK(zoneChargeId);
            zoneCharge.setCharge(new BigDecimal(o[2].toString()).setScale(2, RoundingMode.HALF_UP));
            session.save(zoneCharge);

            if(++i%50==0)
            {
                session.flush();
                session.clear();
            }
        }
    }

    session.getTransaction().commit();
    session.close();
    return "Data saved successfully.";
} 
```

此方法的参数是通过 JSON 请求提供的。我不会深入讨论 Oracle 表的详细信息，因为它是无关的。

当我提供 3 个值时，这个循环会迭代三次，并在相应的数据库表中创建三行。事务成功完成后，`INSERT`我可以在控制台上看到的以下本机 Oracle 语句似乎被执行了三次。

```
insert into WAGAFASHIONDB.ZONE_CHARGE (CHARGE, WEIGHT_ID, ZONE_ID) values (?, ?, ?) 
```

调试和跟踪信息如下。

```
DEBUG [http-apr-8080-exec-84] (SqlStatementLogger.java:104) - insert into WAGAFASHIONDB.ZONE_CHARGE (CHARGE, WEIGHT_ID, ZONE_ID) values (?, ?, ?)
TRACE [http-apr-8080-exec-84] (BasicBinder.java:83) - binding parameter [1] as [NUMERIC] - 1.00
TRACE [http-apr-8080-exec-84] (BasicBinder.java:83) - binding parameter [2] as [BIGINT] - 164
TRACE [http-apr-8080-exec-84] (BasicBinder.java:83) - binding parameter [3] as [BIGINT] - 22

DEBUG [http-apr-8080-exec-84] (SqlStatementLogger.java:104) - insert into WAGAFASHIONDB.ZONE_CHARGE (CHARGE, WEIGHT_ID, ZONE_ID) values (?, ?, ?)
TRACE [http-apr-8080-exec-84] (BasicBinder.java:83) - binding parameter [1] as [NUMERIC] - 2.00
TRACE [http-apr-8080-exec-84] (BasicBinder.java:83) - binding parameter [2] as [BIGINT] - 221
TRACE [http-apr-8080-exec-84] (BasicBinder.java:83) - binding parameter [3] as [BIGINT] - 22

DEBUG [http-apr-8080-exec-84] (SqlStatementLogger.java:104) - insert into WAGAFASHIONDB.ZONE_CHARGE (CHARGE, WEIGHT_ID, ZONE_ID) values (?, ?, ?)
TRACE [http-apr-8080-exec-84] (BasicBinder.java:83) - binding parameter [1] as [NUMERIC] - 3.00
TRACE [http-apr-8080-exec-84] (BasicBinder.java:83) - binding parameter [2] as [BIGINT] - 163
TRACE [http-apr-8080-exec-84] (BasicBinder.java:83) - binding parameter [3] as [BIGINT] - 22 
```

因此，似乎`INSERT`已经执行了三个单独的语句，并且已经对数据库进行了三个单独的访问。

我希望它在一次行程中只执行一个多行`INSERT`语句。在这种情况下，Hibernate 真的会执行三个单独的语句吗？如果是，那么在特定批次中执行语句的方式是什么？我的代码有什么问题吗？

* * *

我的 Hibernate 配置`application-context.xml`如下。

```
<property name="hibernateProperties">
    <value>
        hibernate.dialect=org.hibernate.dialect.Oracle10gDialect
        hibernate.jdbc.batch_size=50
        hibernate.cache.provider_class=org.hibernate.cache.EhCacheProvider            
        hibernate.format_sql=false
        hibernate.show_sql=true
        hibernate.order_updates=true
        hibernate.connection.autocommit=false
        hibernate.order_inserts=true
        hibernate.order_updates=true
        hibernate.cache.use_query_cache=false
        hibernate.cache.use_second_level_cache=false
        javax.persistence.validation.mode=callback            
    </value>        
  </property> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T11:50:05.477

你的期望是错误的。Hibernate 不会生成单个插入语句。但它会将三个插入语句添加到一个批处理中并执行该批处理，从而对数据库进行一次往返。

有关 JDBC 批量更新的更多信息，请阅读[http://docs.oracle.com/javase/1.3/docs/guide/jdbc/spec2/jdbc2.1.frame6.html](http://docs.oracle.com/javase/1.3/docs/guide/jdbc/spec2/jdbc2.1.frame6.html)。

# php - Cakephp验证名称字段与同一张表的其他字段的唯一性

> ID：15780659
> 
> 赞同：0
> 
> 时间：2013-04-03T06:50:50.907
> 
> 标签：php, validation, cakephp

我是 cakephp 的菜鸟，在使用此验证规则时，我很不幸得到了令人满意的响应。在我的项目中，我必须验证名称 wrt 外键和许多其他属性，例如 is_active 让我们说

```
Table t1 has attributes (id, name varchar, is_active Boolean)

table t2 has attribute (id, name varchar, t1_id (foreign key to table t1), is_active boolean) 
```

现在我想验证组表`t1`的唯一名称`is_active`

并验证`t2.name`wrt的唯一性`is_active=1`和`t1_id=specific_value`

我用谷歌搜索并找到了一个没有运气的链接:( [http://www.dereuromark.de/2011/10/07/maximum-power-for-your-validation-rules/](http://www.dereuromark.de/2011/10/07/maximum-power-for-your-validation-rules/)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:52:40.137

首先是一些可能值得考虑的建议；

### 软删除

显然您正在尝试在您的网站中实施“软删除”。有时需要软删除以防您想删除某些内容，但可以在稍后阶段*“取消删除”它。*

但是，通过允许*活动*和*非活动*项目共享相同的名称，“名称”不再是唯一的（根据您的问题，唯一的名称是必需的）。

这将阻止您*取消删除*某个项目，因为此时，您的数据库中存在两个具有相同名称的项目，它们都处于活动状态。

以下是关于“软删除”主题的一些讨论；

[软删除是个好主意吗？](https://stackoverflow.com/questions/2549839/are-soft-deletes-a-good-idea)

[http://richarddingwall.name/2009/11/20/the-trouble-with-soft-delete/](http://richarddingwall.name/2009/11/20/the-trouble-with-soft-delete/)

### 修订/历史

如果您尝试实现“修订历史记录”，而不是“软删除”，最好将修订存储在单独的表中。已经有一些 CakePHP 插件可以为您处理这个问题。我没有指向它们的链接，但你可以通过谷歌搜索。

### 自定义验证

回到你的问题；您可以通过在模型中创建自己的验证规则来检查记录在“活动”组中是否唯一，例如：

```
public function isNameUniqueActive()
{
    if (
        array_key_exists('is_active', $this->data[$this->alias])
        && 1 != $this->data[$this->alias]['is_active']
    ) {
        // Record to save is not 'active', so no need to check if it is unique
        return true;
    }

    $conditions = array(
        $this->alias . '.name'  => $this->data[$this->alias]['name'],
        $this->alias . '.is_active' => 1,
    );

    if ($this->id) {
        // Updating an existing record: don't count the record *itself*
        $conditions[] = array(
            'NOT' => array($this->alias . '.' . $this->primaryKey => $this->id)
        );
    }

    return (0 === $this->find('count', array('conditions' => $conditions)));
} 
```

您将能够像使用内置验证规则一样使用此验证；

```
public $validate = array(
    'name' => 'isNameUniqueActive',
); 
```

**更新**

要检查名称*在组*中是否唯一（基于外键 t1_id），请尝试以下操作：

```
public function isNameUniqueWithinGroup()
{
    if (
        array_key_exists('is_active', $this->data[$this->alias])
        && 1 != $this->data[$this->alias]['is_active']
    ) {
        // Record to save is not 'active', so no need to check if it is unique
        return true;
    }

    if (!array_key_exists('t1_id', $this->data[$this->alias])) {
        // No group specified - not valid?
        return false;
    }

    $conditions = array(
        $this->alias . '.name'  => $this->data[$this->alias]['name'],
        $this->alias . '.is_active' => 1,
        $this->alias . '.t1_id' => $this->data[$this->alias]['t1_id'],
    );

    if ($this->id) {
        // Updating an existing record: don't count the record *itself*
        $conditions[] = array(
            'NOT' => array($this->alias . '.' . $this->primaryKey => $this->id)
        );
    }

    return (0 === $this->find('count', array('conditions' => $conditions)));
} 
```

# php - 在数据库中找到最大的数字并创建新变量

> ID：15780665
> 
> 赞同：0
> 
> 时间：2013-04-03T06:51:15.940
> 
> 标签：php

所以，我在数据库上有这个表，我有这样的字符：

```
A102
A897
B234
B23
C9823
C786
D345 etc... 
```

我需要实现的是：如果用户输入了 A，该函数应该查看所有以 A 开头的变量，即我有：A102 和 A897，我应该删除第一个字符，剩下 102 和 897。其中最大的是897，所以我应该创建一个新变量 A(897+1)=A898 等等。查询：

```
while( $row = mysql_fetch_assoc( $result)){
    $value[] = $row['id']; // Inside while loop
} 
```

我想应该是这样的：

```
 if ($variable==A) {
    $items = array();
    foreach($value as $value) {
     $items[] = substr('$value', 1);
    max($items); // to find max
    }
   } 
```

方法

```
$result = "SELECT * FROM formas WHERE 'id_f' LIKE '%A%'" ;  
$res = odbc_exec($connection, $result) or die(odbc_error());

    $biggest = 0;
    while( $row = odbc_fetch_array($res))
    {
         $current_value = substr($row['id_f'], 1); // return: 102, 897;
         if( $current_value > $biggest )
         {
            $biggest = $current_value; // in the last looping you should get 897.
         }
    }
    echo $result = "A(" . ($biggest + 1) . ")"; // return A(898) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:58:10.127

我不确定传递参数。试试这个 SQL

```
SELECT DER_NAME ||CHAR(COUNTER + 1)
FROM 
(
SELECT SUBSTR(NAME, 1) AS DER_NAME, MAX(INT(SUBSTR(2, NAME))) AS COUNTER
FROM TABLE-NAME
WHERE NAME LIKE 'A%' --SUBSTITUE YOUR PARAMETER
group by SUBSTR(NAME, 1)
) A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:26:29.247

我认为可以通过此程序解决，如果我错了，请纠正我。(1)。您应该创建一个从用户输入中获取第一个字符的函数。示例：`ABC233`，函数应该`return "A"`(2)一旦你从步骤 1 中得到字符，你就可以将它查询到表中。这是完整的源代码：

```
> <?php  
> mysql_connect("localhost", "root","");
> mysql_select_db("stackoverflow");
> 
> 
> /* First chars */ 
> function first_char( $str ) 
> {
>     return substr($str, 0, 1); 
> } 
> ?>
> 
> <form action="home.php" method="post"> 
>      Input String : <input type="text" name="txtstring"><br> 
>      <input type="submit" value="Submit">
> </form>
> 
> <?php 
> if( $_POST['txtstring'] != '' ) 
> {    
>    $char = first_char($_POST['txtstring'] );    
>    $sql = mysql_query("SELECT * FROM mytablWHERE my_field LIKE '%" . $char . "%'") or die(mysql_error());
>  
>    
>     $biggest = 0;
>     while( $row = mysql_fetch_array($sql))
>     {
>          $current_value = substr($row['my_field'], 1); // return: 102, 897;
>          if( $current_value > $biggest )
>          {
>             $biggest = $current_value; // in the last looping you should get 897.
>          }
>     }
>     $result = "A(" . ($biggest + 1) . ")"; // return A(898)
>      
>     echo $result;
> 
> } ?> 
```

我假设有名为“stackoverflow”的数据库和名为“mytable fields: (ID, my_field)”的表，结果如下：

![在此处输入图像描述](https://i.stack.imgur.com/9gzV5.png)

让我知道它是否有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:56:47.933

```
(SELECT MAX(N) as maxid FROM (
SELECT CAST(SUBSTR(name, 2) AS UNSIGNED INTEGER) as N 
From `mytable` 
) t)

UNION ALL

(SELECT N as maxid FROM (
SELECT CAST(SUBSTR(name, 2) AS UNSIGNED INTEGER) as N 
From `mytable` 
ORDER BY N DESC) t LIMIT 1) 
```

查看[SQL Fiddle 演示](http://sqlfiddle.com/#!2/16a6e/33)

您可以简单地使用一个查询：

```
SELECT MAX(N) as maxid FROM (
    SELECT CAST(SUBSTR(name, 2) AS UNSIGNED INTEGER) as N 
    From `mytable` 
    ) t 
```

# mahout - 运行 JesterRecommenderEvaluationRunner，但没有得到评估结果

> ID：15780676
> 
> 赞同：1
> 
> 时间：2013-04-03T06:51:43.387
> 
> 标签：mahout, recommendation-engine, mahout-recommender

我在 Mahout 中下载了 Jester 示例代码，并尝试在 jester 数据集上运行它以查看评估结果。运行成功，但控制台只有结果：

```
log4j:WARN No appenders could be found for logger (org.apache.mahout.cf.taste.impl.model.file.FileDataModel).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

我希望看到评估分数范围从 0 到 10。任何人都可以帮助我找出如何获得分数？

我正在使用 mahout-core-0.6.jar，以下是代码：

```
JesterDataModel.java:
package Jester;

import java.io.File;
import java.io.IOException;
import java.util.Collection;
import java.util.regex.Pattern;

import com.google.common.collect.Lists;
import org.apache.mahout.cf.taste.example.grouplens.GroupLensDataModel;
import org.apache.mahout.cf.taste.impl.common.FastByIDMap;
import org.apache.mahout.cf.taste.impl.model.GenericDataModel;
import org.apache.mahout.cf.taste.impl.model.GenericPreference;
import org.apache.mahout.cf.taste.impl.model.file.FileDataModel;
import org.apache.mahout.cf.taste.model.DataModel;
import org.apache.mahout.cf.taste.model.Preference;
import org.apache.mahout.common.iterator.FileLineIterator;
//import org.apache.mahout.cf.taste.impl.common.FileLineIterable;

public final class JesterDataModel extends FileDataModel {

  private static final Pattern COMMA_PATTERN = Pattern.compile(",");

  private long userBeingRead;

  public JesterDataModel() throws IOException {
    this(GroupLensDataModel.readResourceToTempFile("\\jester-data-1.csv"));
  }

  public JesterDataModel(File ratingsFile) throws IOException {
     super(ratingsFile);
  }

  @Override
  public void reload() {
     userBeingRead = 0;
    super.reload();
  }

  @Override
  protected DataModel buildModel() throws IOException {
    FastByIDMap<Collection<Preference>> data = new FastByIDMap<Collection<Preference>>  ();
    FileLineIterator iterator = new FileLineIterator(getDataFile(), false);
    FastByIDMap<FastByIDMap<Long>> timestamps = new FastByIDMap<FastByIDMap<Long>>();
    processFile(iterator, data, timestamps, false);
    return new GenericDataModel(GenericDataModel.toDataMap(data, true));
  }

   @Override
  protected void processLine(String line,
                         FastByIDMap<?> rawData,
                         FastByIDMap<FastByIDMap<Long>> timestamps,
                         boolean fromPriorData) {
  FastByIDMap<Collection<Preference>> data = (FastByIDMap<Collection<Preference>>) rawData;
  String[] jokePrefs = COMMA_PATTERN.split(line);
  int count = Integer.parseInt(jokePrefs[0]);
  Collection<Preference> prefs = Lists.newArrayListWithCapacity(count);
  for (int itemID = 1; itemID < jokePrefs.length; itemID++) { // yes skip first one, just a count
   String jokePref = jokePrefs[itemID];
  if (!"99".equals(jokePref)) {
    float jokePrefValue = Float.parseFloat(jokePref);
    prefs.add(new GenericPreference(userBeingRead, itemID, jokePrefValue));
  }
}
data.put(userBeingRead, prefs);
userBeingRead++; 
```

}

}

```
JesterRecommenderEvaluatorRunner.java
package Jester;

import org.apache.mahout.cf.taste.common.TasteException;
import org.apache.mahout.cf.taste.eval.RecommenderEvaluator;
import org.apache.mahout.cf.taste.impl.eval.AverageAbsoluteDifferenceRecommenderEvaluator;
import org.apache.mahout.cf.taste.model.DataModel;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.io.IOException;

public final class JesterRecommenderEvaluatorRunner {

  private static final Logger log = LoggerFactory.getLogger(JesterRecommenderEvaluatorRunner.class);

  private JesterRecommenderEvaluatorRunner() {
    // do nothing
  }

  public static void main(String... args) throws IOException, TasteException {
    RecommenderEvaluator evaluator = new AverageAbsoluteDifferenceRecommenderEvaluator();
    DataModel model = new JesterDataModel();
    double evaluation = evaluator.evaluate(new JesterRecommenderBuilder(),
                                       null,
                                       model,
                                       0.9,
                                       1.0);
    log.info(String.valueOf(evaluation));
  } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:08:31.227

Mahout 0.7 很旧，0.6 很旧。以后从 SVN 至少使用 0.7 或更好。我认为问题正是您所确定的：您的类路径中没有任何 slf4j 绑定。如果您在 Mahout 中使用“.job”文件，您将拥有所有依赖包。然后你会真正看到输出。

# coffeescript - Spine.js AJAX 从服务器获取记录

> ID：15780677
> 
> 赞同：1
> 
> 时间：2013-04-03T06:51:47.037
> 
> 标签：coffeescript, spine.js

我有一个简单的应用程序，它显示记录列表，用户也可以通过 id 编辑 barticular 记录。因为列表很大，所以我不会全部获取，而是部分通过`Product.fetch(data: $.param(page: 1))`.

然后，当有人尝试编辑记录时，我打电话`Product.find(id)`，如果已经预取了记录，`fetch`那么它工作正常，但是当尚未获取记录时，我收到如下错误：`"Product" model could not find a record for the ID "1152"`

所以，问题是为什么`find`不执行 ajax 调用以及如何让它执行它或者可能存在另一种解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:54:47.257

`Spine.find`仅查看已加载的记录。执行 ajax 请求不是`find`. 所以你必须尝试捕捉你的发现，当它给出这个错误时，你必须获取它。

```
id = 1152

try
  product = Product.find id
catch err
  Product.fetch(
    data:
     id: id
    processData: true
  )
  # Try again after Product.refresh 
```

老实说，我认为这不是一个好方法，但它是脊椎的工作原理......我宁愿让它自动获取它，或者至少不会在查找时抛出错误。

# python - python请求很慢

> ID：15780679
> 
> 赞同：5
> 
> 时间：2013-04-03T06:51:50.553
> 
> 标签：python, download, urllib2, python-requests, urllib

我正在开发一个下载管理器。在 python 中使用 requests 模块来检查有效链接（并希望链接断开）。我检查以下链接的代码：

```
url = 'http://pyscripter.googlecode.com/files/PyScripter-v2.5.3-Setup.exe'
r = requests.get(url, allow_redirects=False) # this line takes 40 seconds
if r.status_code==200:
    print("link valid")
else:
    print("link invalid") 
```

现在，问题是执行此检查大约需要 40 秒，这是巨大的。我的问题是我怎样才能加快速度，也许使用 urllib2 或其他东西？

注意：另外，如果我替换`url`为“http://pyscripter.googlecode.com/files/PyScripter-v2.5.3-Setup.exe”的实际 URL，这需要一秒钟，因此这似乎是请求的问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T07:55:18.943

并非所有主机都支持`head`请求。您可以改用它：

```
r = requests.get(url, stream=True) 
```

这实际上只下载标题，而不是响应内容。此外，如果想法是在之后获取文件，您不必提出另一个请求。

请参阅[此处](http://docs.python-requests.org/en/latest/user/advanced/#body-content-workflow)了解更多信息。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-03T06:54:52.053

不要使用`get`实际检索文件，使用：

```
r = requests.head(url,allow_redirects=False) 
```

从我机器上的 6.9 秒到 0.4 秒

# joomla - 在 Intranet 上使用 Joomla 3.0 项目

> ID：15780682
> 
> 赞同：-1
> 
> 时间：2013-04-03T06:51:56.150
> 
> 标签：joomla

我正在使用 joomla 3.0，我想当用户打开 joomla 3.0 站点时，首先只打开登录页面，然后登录后他可以访问网站。

感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T10:14:15.563

If you want to "protect" the whole site with login the best option is to turn the site off and then the user will need to login after opening the intranet page. Its probably the cleanest way how to to it without modules/plugins.

As we are doing it in my company (we are also running intranet on Joomla!) is, that all the articles are set to registred and the landing page of intranet just contain warm welcome and login form.

One thing to mention: Forcing this login for viewing some article/other content is not secure at all, mostly the local instalation will run on database with root access without pass (default setting) and with unecrypted database easily accessible. This is something to consider. If you are running this intranet in small company with loyal employees or without sensitive information you should be fine if not you should put more stress on the security issues.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:04:30.603

您可以将站点置于离线模式。
所以网站会显示登录页面。

请记住授予用户访问离线站点的权限！

# iphone - 如何在 UITextView 中添加自定义按钮而不是复制按钮？

> ID：15780683
> 
> 赞同：-1
> 
> 时间：2013-04-03T06:51:58.717
> 
> 标签：iphone, ios, uitextview

我正在创建一个应用程序。在那个应用程序中，我有一小段文本生成的文本短语。现在，当用户触摸该文本时，特定的文本块将突出显示，并且它将在文本顶部显示自定义按钮而不是复制。那么我该怎么做呢？

这是我尝试过的。我已将 mu 文本放入 textview 并使 textview 不可编辑，因此不会显示键盘，我可以获取选定的文本。如果您有任何其他更好的方法来实现这一点，那么请提出建议。

```
UITextView * resionTV = [[UITextView alloc] initWithFrame:CGRectMake(118, 224, 190, 90)];
    resionTV.backgroundColor = [UIColor clearColor];
    resionTV.font = [UIFont fontWithName:@"Arial" size:14];
    resionTV.text = xstr;
    resionTV.editable = NO;
   // resionTV.delegate = self;
    resionTV.autocorrectionType = UITextAutocorrectionTypeNo;
    [self.view addSubview:resionTV]; 
```

我从苹果开发者网站获得的这段代码，但不确定它是否是我正在寻找的，它不会做任何事情，所以在这里也有帮助。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *theTouch = [touches anyObject];
    if ([theTouch tapCount] == 2) {
        [self becomeFirstResponder];
        UIMenuItem *menuItem = [[UIMenuItem alloc] initWithTitle:@"Change Color" action:@selector(changeColor:)];
        UIMenuController *menuCont = [UIMenuController sharedMenuController];
        [menuCont setTargetRect:CGRectMake(10, 10, 50, 50) inView:self.view];
        menuCont.arrowDirection = UIMenuControllerArrowLeft;
        menuCont.menuItems = [NSArray arrayWithObject:menuItem];
        [menuCont setMenuVisible:YES animated:YES];
    }
}
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {} 
```

![文字高亮截图](https://i.stack.imgur.com/4tkaZ.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:02:41.023

我的项目有同样的要求；但是，无法找到，*如何在 iOS 中自定义 MenuItem 的外观？*

AFAIK，您[***可以创建自定义菜单***](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/AddingCustomEditMenuItems/AddingCustomEditMenuItems.html)，但*不能自定义其外观*。它看起来像带有您添加的自定义项目的原生 iOS 菜单。

希望这会引导你到某个地方。

# javascript - JavaScript 全部替换

> ID：15780687
> 
> 赞同：1
> 
> 时间：2013-04-03T06:52:05.677
> 
> 标签：javascript, regex

我必须编写一些 JavaScript 代码来替换变量中的字符：

```
var data = "abcd.-3*(adsa3sd" 
```

从变量`data`我必须替换`0-9a-zA-Z`和`.`字符。

我希望输出为：

```
-*( 
```

如何做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:21:14.433

简洁版本：

```
"abcd.-3*(adsa3sd".replace( /[\da-zA-Z.]+/g, '' );
>> "-*(" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:55:10.317

试试这个：

`text.replace(new RegExp('[A-Z|a-z|0-9|\\.]','g'),"")`摆脱那个。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T07:30:39.347

使用`text.replace(new RegExp('[A-Z|a-z|0-9|\.]','g'),"")`where`text`是字符串对象。

# apache - WSO2 ESB/Apache Synapse/VFS 执行 exe、jar 等

> ID：15780692
> 
> 赞同：0
> 
> 时间：2013-04-03T06:52:29.893
> 
> 标签：apache, wso2, synapse, apache-commons-vfs

WSO2 ESB 或 Synapse 或 VFS 中是否有任何方法可以执行 exe 应用程序、命令提示符、jar 或其他任何东西？

我现在用谷歌搜索了一段时间，但仍然没有任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:16:00.220

您可以编写一个类调解器并使用 WSO2 ESB 执行此操作...您可以编写自己的具有必要功能的类调解器并使用它...请参阅 [1] 以了解如何编写类调解器。

[1] [http://docs.wso2.org/wiki/display/ESB403/Writing+a+WSO2+ESB+Mediator](http://docs.wso2.org/wiki/display/ESB403/Writing+a+WSO2+ESB+Mediator)

问候

莫汉

# c++ - 使用 so 文件和其他一些 .o 文件创建 .so 文件

> ID：15780702
> 
> 赞同：0
> 
> 时间：2013-04-03T06:52:59.780
> 
> 标签：c++, boost, linker, shared-libraries

我正在尝试从一些 .so 文件和一些 .o 文件创建一个动态库（.so）。最终的 so 文件正在生成，但是当我使用那个 .so 文件时，一些库没有被链接。

问题是一些 .so 文件正在链接，但有些文件没有链接。没有链接的是 boost (.so) 文件。

`libboost_chrono.so.1.50.0: cannot open shared object file: No such file or directory`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:04:34.913

只需将其解压缩[到](https://www.dropbox.com/s/3hz6cgb6h40wfe7/chrono.tgz)与其他库相同的目录中即可。

# javascript - AJAX：301/302 标头重定向（跨域）在某些 Webkit 浏览器中失败

> ID：15780705
> 
> 赞同：3
> 
> 时间：2013-04-03T06:53:06.660
> 
> 标签：javascript, redirect, header, webkit, cross-domain

尝试通过 302 从一台服务器重定向到另一台没有内容的服务器，仅用于跟踪目的，我担心会失去一些使用 Apple iOS 设备和一些 Webkit/Chrome 浏览器的访问者。

```
HTTP/1.1 302 Moved Temporarily
Date: Tue, 26 Mar 2013 20:00:03 GMT
Server: Apache/2.2.3 (Red Hat)
X-Powered-By: PHP/5.2.6
Expires: Tue, 03 Jul 2001 06:00:00 GMT
Last-Modified: Tue, 26 Mar 2013 20:00:03 GMT
Cache-Control: no-store
Pragma: no-cache
P3P: CP="STP CUR OUR"
x-own: 46.163.123.40
Access-Control-Allow-Origin: *
Access-Control-Allow-Credentials: true
Location: http://target2.com
Connection: close
Content-Type: text/html; charset=iso-8859-1 
```

在 Firefox 和 IE 上，重定向是可以的。从 domainA 重定向到 domainA 也可以。Webkit/Chrome/Mobile Safari 浏览器上的跨域重定向失败:-(

javascript 片段如下所示：

```
testRedirection=function(url)
{
    var xmlhttp = null;
    if (window.XMLHttpRequest)
        xmlhttp=new XMLHttpRequest();//ff,webkit
    else if (window.ActiveXObject)
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");//ie
    if(xmlhttp)
    {
        xmlhttp.open("HEAD",url,true);//tried HEAD, GET, POST
        xmlhttp.onreadystatechange=function(){
            if(xmlhttp.readyState==4)
            {
                if(xmlhttp.status==200 || (xmlhttp.status>200 && xmlhttp.status<400))
                    alert("arrived with status "+xmlhttp.status);
                else
                    alert("failed with status "+xmlhttp.status);
            };
        };
        xmlhttp.send();
    };
    //\
}; 
```

无论如何，在 iPhone、iPad 设备和 Chrome 上，我记录了流量，但它永远不会通过 target2.com 到达，在没有错误或警告的情况下停止。

这只发生在跨域标头重定向时。是否有额外的标题允许这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T14:34:05.937

这是一项安全功能。就脚本而言（例如 Javascript），该请求被认为是危险的并被阻止。仅允许 >= 200 < 300 范围内的响应。

# logging - Symfony2：记录 1\. 自己的频道 2\. 在自己的文件中（在开发中）

> ID：15780708
> 
> 赞同：1
> 
> 时间：2013-04-03T06:53:32.210
> 
> 标签：logging, symfony, channel, monolog

对不起这个线程，但我真的不知道如何配置 Symfony2 来做我喜欢做的事情 :-) 我只是不明白“大局”。

我想为我的捆绑包中的一些核心内容创建一个自己的日志通道。此 Channel 通常应写入 dev 中自己的文件，对于 prod，应将其写入 prod.log 或被抑制（其中之一或可通过配置切换）。

我有一种感觉，该解决方案在许多文档和教程中共享。

1.  我在哪里以及如何定义该频道？
2.  处理程序是在 config.yml 中定义的，对吧？
3.  我必须实现自己的处理程序类吗？

抱歉这个非常不具体的问题。

额外问题：4.当应该可以在控制器之外进行日志记录（访问容器）时，我必须实现服务，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:52:23.587

好的。我的错是误解和菜鸟的混合。在阅读了 Service-Doc 并将这个线程与那个（[如何将一个服务中的日志写入单独的文件？](https://stackoverflow.com/questions/8169114/how-to-write-logs-from-one-service-into-separate-file)）进行比较之后，我得到了它的工作：

我喜欢这个，因为它只是配置给定的类而不是实现它自己的：

配置.yml：

```
services:
    myOwnLogger:
        class:     Symfony\Bridge\Monolog\Logger
        arguments: [pushHandler, [@myOwnLogHandler]]

    myOwnLogHandler:
        class:     Monolog\Handler\StreamHandler
        arguments: [%kernel.logs_dir%/%kernel.environment%.myOwnChannel.log, 200] #200 = INFO 
```

Egads，这太容易了，请原谅我不理解那个“其他”线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:31:04.000

您可以查看[将通道切换到不同的处理程序](http://symfony.com/doc/current/cookbook/logging/channels_handlers.html#switching-a-channel-to-a-different-handler)以了解如何将其配置为记录到不同的日志文件（如果您只想在开发中使用，请在 config_dev.yml 中）。

要创建新通道（默认情况下，记录器服务使用`app`通道），您需要[使用 monolog.logger 标签](http://symfony.com/doc/current/reference/dic_tags.html#dic-tags-monolog)将其注入服务中。每当您将日志发送到该记录器实例时，它将转到为该通道配置的处理程序。

您的`@logger`服务定义中的 将替换为您需要的通道的适当记录器实例。如果您不添加自定义标签，则`@logger`保持原样，您将获得默认 ( `app`) 频道。

# java - 如何从服务器日志中删除警告：[WARN] No configuration found for the specified action: '/' in namespace: ''

> ID：15780712
> 
> 赞同：2
> 
> 时间：2013-04-03T06:53:38.443
> 
> 标签：java, jsp, struts2, struts, web.xml

我已经使用 struts 2.0 开发了一个应用程序。在服务器日志上，我收到了某些警告行。我想修复这个警告，但我做不到。

```
[WARN] No configuration found for the specified action: '/' in namespace: ''. Form    action defaulting to 'action' attribute's literal value. 
```

在我的 struts.xml 文件中，我有这样的东西

```
<struts>

<constant name="struts.devMode" value="true" />
<package name="basicstruts2" extends="struts-default" namespace="/">
<global-results>
<result name="error">/error.jsp </result>
</global-results>
<action name="Login" class="com.login.LoginAction">
        <result name="input">/login.jsp</result>
        <result name="success">/dashboard.jsp</result>
    </action>
</package>
</struts> 
```

在 jsp 页面中，我在单击按钮时调用以下 javascript 函数

```
function submitloginform()
    {
        document.loginform.action = "Login.action";
        document.loginform.submit();
    } 
```

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T05:37:50.820

只需在 struts.xml 中保持动作名称和要提交的表单动作相同。

```
function submitloginform()
    {
        document.loginform.action = "Login";
        document.loginform.submit();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T11:57:02.737

此警告消息与 javascript 或表单提交无关。当标记呈现为 HTML 中的表示形式时，就会发生这种情况。

在您的情况下，您必须缺少 action 属性。确保您的代码如下所示。

`<s:form name="loginform" method="post" action="Login">`

如果您尝试在另一个命名空间中呈现表单，例如：**/public**，您应该这样做

`<s:form name="loginform" method="post" action="Login" namespace="/public">`

代替

`<s:form name="loginform" method="post" action="/public/Login">`

# c# - 如何从 XML 文件中检索所有数据？

> ID：15780715
> 
> 赞同：0
> 
> 时间：2013-04-03T06:53:51.517
> 
> 标签：c#, xml

我使用此代码从 XML 文件中检索特定值。现在我想检索 XML 文件中存在的所有数据。有人可以帮我找出解决方案吗？

```
StorageFile xmlFile = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync("Content1.xml");
XmlDocument xmlDoc;
xmlDoc = await XmlDocument.LoadFromFileAsync(xmlFile);
System.Xml.Linq.XDocument duc = System.Xml.Linq.XDocument.Parse(xmlDoc.GetXml());

var query=
    from Date in duc.Root.Elements("Serial")
    where Date.Attribute("No").Value=="1"
    from Current in Date.Elements("Current")
    select new {
        NarratedBy=Current.Attribute("NarratedBy").Value,
        value=Current.Attribute("Date").Value
    };

foreach(var Date in query) {
    System.Diagnostics.Debug.WriteLine("{0}\t{1}", Date.NarratedBy, Date.value);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:56:56.127

您已经将整个 XML 文档加载到`duc`变量中。

该行负责：

```
System.Xml.Linq.XDocument duc = System.Xml.Linq.XDocument.Parse(xmlDoc.GetXml()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:38:21.000

您已经拥有所有数据：

```
xmlDoc = await XmlDocument.LoadFromFileAsync(xmlFile); // data loadded
System.Xml.Linq.XDocument duc = System.Xml.Linq.XDocument.Parse(xmlDoc.GetXml()); // data parsed 
```

====================

这是一个示例代码，您可以如何做到这一点。它功能齐全（使用本地字符串 xml 而不是您的文件），因此您可以运行它。我只添加了三个属性，但您可以添加任意数量的属性。

```
class Program {
static void Main(string[] args) {
// this is a sample string. Use your file instead
string s = "<catalog>" +
"<book id=\"bk101\" author=\"Gambardella, Matthew\" title=\"XML Developer's Guide\" genre=\"Computer\"/>" +
"<book id=\"bk102\" author=\"Ralls, Kim\" title=\"Midnight Rain\" genre=\"Fantasy\"/>" +
"</catalog>";

XmlDocument xdoc = new XmlDocument();
            xdoc.LoadXml(s); // here we load data
// here we get attributes. I have three, you will add three more. Also you may want to use string array instead of variables
            foreach (XmlNode task in xdoc.DocumentElement.ChildNodes)
{
                string author = task.Attributes["author"].InnerText;
                string title = task.Attributes["title"].InnerText;
                string genre = task.Attributes["genre"].InnerText;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:27:25.450

然后您可以将您的`XDocument`详细信息检索到例如`string`带有 XDocument 扩展名的变量中[`ToString()`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.tostring.aspx)

# jquery - 从jquery中的href获取参数值

> ID：15780717
> 
> 赞同：12
> 
> 时间：2013-04-03T06:53:57.813
> 
> 标签：jquery, href

## **脚本**

```
 <a href="#?cat=MT&typ=1" data-reveal-id="reveal_popup" onclick="pop();" data-closeonbackgroundclick="false" data-dismissmodalclass="close-reveal-modal">due today</a>
 <a href="#?cat=MT&typ=2" data-reveal-id="reveal_popup" onclick="pop();" data-closeonbackgroundclick="false" data-dismissmodalclass="close-reveal-modal">due in 2 days</a>

 <div id="reveal_popup" class="reveal-modal">
 <div id="popup"></div>
 <a class="close-reveal-modal">&#215;</a>
 </div>

function pop() {

 var cat=**value of cat parameter in href**
 var type=**value of typ parameter in href**

 $.ajax({
       type:'post',
       url:site_url()+'/event/deleteEventSingle',
       data:{'cat':cat,'type':typ},
        async:false,
         success:function(result){}
        });
} 
```

在这种情况下，当用户单击 href 时，会出现相同的弹出窗口，其中包含不同的数据。实际上有 10 多个 href，我正在尝试在弹出窗口中显示带有用户输入数据的日历。这取决于href 中所示的两个参数**cat 和 typ 。**

## 要求

每个 href 都有自己的 cat 和 typ 值。单击href时，我希望使用jquery获取单击的href的cat和typ值，以便我可以在ajax中传递这些变量。

```
var cat=**value of cat parameter in href**
var type=**value of typ parameter in href** 
```

## 试过了

[如何从点击事件对象中获取链接的href属性参数](https://stackoverflow.com/questions/9343436/how-to-get-the-parameters-of-an-href-attribute-of-a-link-from-the-click-event-ob)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T07:05:03.117

你可以做一些事情如下

```
$('a').bind('click',function(){
    var url = ($(this).attr('href'));
    var cat = getURLParameter(url, 'cat');
    var typ = getURLParameter(url, 'typ');
    //calling the ajax function
    pop(cat, typ)
});

function getURLParameter(url, name) {
    return (RegExp(name + '=' + '(.+?)(&|$)').exec(url)||[,null])[1];
}

function pop(cat, typ) {

    $.ajax({
       type:'post',
       url:site_url()+'/event/deleteEventSingle',
       data:{'cat':cat,'type':typ},
        async:false,
         success:function(result){}
    });
} 
```

查看 Live fiddle [http://jsfiddle.net/mayooresan/aY9vy/上的示例](http://jsfiddle.net/mayooresan/aY9vy/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T06:57:31.613

试试这个 ：

```
function getUrlParams(url) {
    var params = {};
    url.substring(1).replace(/[?&]+([^=&]+)=([^&]*)/gi,
            function (str, key, value) {
                 params[key] = value;
            });
    return params;
} 
```

*用法：*

```
function pop(e) {
     var url = $(e.target).attr("href");
     var params = getUrlParams(url); 

     var cat= params["cat"];
     var type= params["typ"];

     alert(cat);
     alert(type);    
} 
```

[**工作小提琴**](http://jsbin.com/umezas/6/edit)

# git - 如何从与原始版本不同的 git 远程仓库应用特定提交

> ID：15780718
> 
> 赞同：0
> 
> 时间：2013-04-03T06:54:03.370
> 
> 标签：git

我刚刚从 github克隆[了 unoconv 。](https://github.com/dagwieers/unoconv)此[提交](https://github.com/xrmx/unoconv/commit/fc59dd90f03cf88f4cf16c07204809f2239284ee)纠正了一个 python3[错误](https://github.com/dagwieers/unoconv/pull/111)。我不确定如何使用 git 简单地应用该提交（如将补丁应用于我所拥有的）

我试过了`git fetch`，`git pull`但什么也没发生。我可以简单地将原始文件复制并粘贴到我拥有的文件上，但这不是*git*要做的事情。想法？

**更新：**

事实证明，补丁是由原始作者以外的用户制作的（即他[分叉](https://github.com/xrmx/unoconv)了 repo）。所以现在的问题是..我如何应用他的补丁，但仍然将原始存储库作为我更新的远程存储库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:00:05.557

如果您只想应用一个提交，`git cherry-pick <hash>`那就是要走的路。
如果该提交在另一个存储库中，您可以将其添加为另一个远程，在该远程上执行`git fetch all`（*否* `git pull`！）然后执行樱桃挑选。

# jquery - 如何更改控件导航 flexslider 中的活动图像？

> ID：15780722
> 
> 赞同：1
> 
> 时间：2013-04-03T06:54:24.877
> 
> 标签：jquery, flexslider

我正在尝试更改控件导航图像，它应该具有不同的外观，以便您可以看到它属于幻灯片图像。我的 javascript 文件

```
$(window).load(function() {
    $('#main-slider').flexslider({
      animation: "fade",
      controlNav: false,
      directionNav: false,
      keyboard: false,
      controlsContainer: ".flex-container",
      start: function(slider) {
        $('a.slide_thumb').click(function() {
            $('.flexslider').show();
            var slideTo = $(this).attr("rel")//Grab rel value from link;
            var slideToInt = parseInt(slideTo)//Make sure that this value is an integer;
            if (slider.currentSlide != slideToInt) {
                slider.flexAnimate(slideToInt)//move the slider to the correct slide (Unless the slider is also already showing the slide we want);
                }
        });
        }
     });
     $('#secondary-slider').flexslider({
      animation: "fade",
      controlNav: false,
      directionNav: false,
      keyboard: false,
      controlsContainer: ".flex-container",
      start: function(slider) {
        $('a.slide_thumb').click(function() {
            $('.flexslider').show();
            var slideTo = $(this).attr("rel")//Grab rel value from link;
            var slideToInt = parseInt(slideTo)//Make sure that this value is an integer;
            if (slider.currentSlide != slideToInt) {
                slider.flexAnimate(slideToInt)//move the slider to the correct slide (Unless the slider is also already showing the slide we want);
            }
        });
        }
    });
 }); 
```

然后幻灯片处于活动状态我将更改为 onlineikon2.png、animal2.png、brand2.png 等我该怎么做？

```
<div id="main-slider" class="flexslider">
<ul class="slides">
    <li class="ms1">
      <img src="http://in.byrantest.se/wp-content/themes/Krismas/images/slides/startsidebild1.jpg" 
      width="495" height="325" />
    </li>
    <li class="ms2">
      <img src="http://in.byrantest.se/wp-content/themes/Krismas/images/slides/skadedjur.jpg" 
      width="495" height="325" />
    </li>
    <li class="ms3">
      <img src="http://in.byrantest.se/wp-content/themes/Krismas/images/slides/brand.jpg" 
      width="495" height="325" />
    </li>
    <li class="ms4">
      <img src="http://in.byrantest.se/wp-content/themes/Krismas/images/slides/utbildning.jpg" 
      width="495" height="325" />
    </li>
    <li class="ms5">
      <img src="http://in.byrantest.se/wp-content/themes/Krismas/images/slides/online.jpg" 
      width="495" height="325" />
    </li>
    <li class="ms6">
      <img src="http://in.byrantest.se/wp-content/themes/Krismas/images/slides/live.jpg" 
      width="495" height="325" />
    </li>
</ul>
 </div>
 <div id="secondary-slider" class="flexslider">
<ul class="slides">
    <li class="ss1">
        <h2>Work</h2>
        <p>Some text</p>
    </li>
    <li class="ss2">
        <h2>Animal</h2>
        <p>Some text.</p>
    </li>
    <li class="ss3">
        <h2>Brand</h2>
        <p>Some text.</p>
    </li>
    <li class="ss4">
        <h2>Education</h2>
        <p>Some text.</p>
    </li>
    <li class="ss5">
        <h2>Online</h2>
        <p>Some text.</p>
    </li>
    <li class="ss6">
        <h2>Live</h2>
        <p>Some text.</p>
    </li>
</ul>
</div>
<div class="hogerruta">
<ul>
    <li><a rel="0" class="slide_thumb" href="#">
        <img title="Work"
        src="http://www.example.com/onlineikon1.png" alt="" /></a></li>
    <li><a rel="1" class="slide_thumb" href="#">
        <img  title="Animal" 
        src="http://www.example.com/animal1.png"  alt="" /></a></li>
    <li><a rel="2" class="slide_thumb" href="#">
        <img  title="Brand" 
        src="http://www.example.com/brand1.png" alt="" /></a></li>
    <li><a rel="3" class="slide_thumb" href="#">
        <img title="Education" 
        src="http://www.example.com/education1.png" alt="" /></a></li>
    <li><a rel="4" class="slide_thumb" href="#">
        <img title="Online" 
        src="http://www.example.com/onlineikon1.png" alt="" /></a></li>
    <li><a rel="5" class="slide_thumb" href="#">
        <img title="Live"
        src="http://www.example.com/liveikon1.png" alt="" /></a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T00:49:16.003

您需要添加

`<li data-thumb="http://URL_TO_THUMBNAIL">`

到每一里。此外，缩略图是您需要创建的不同图像。

希望这可以帮助。

# javascript - 使用 Poco::Net::HTTPRequestHandler 的服务器发送事件

> ID：15780723
> 
> 赞同：3
> 
> 时间：2013-04-03T06:54:42.730
> 
> 标签：javascript, c++, html, poco, server-sent-events

我正在尝试使用服务器发送的事件将数据“流式传输”到 HTML5 页面。

本教程[http://www.html5rocks.com/en/tutorials/eventsource/basics/](http://www.html5rocks.com/en/tutorials/eventsource/basics/)对让客户端正常工作非常有帮助。

但是对于服务器端，我正在做类似于[http://pocoproject.org/slides/200-Network.pdf中的 HTTPServer 示例的操作](http://pocoproject.org/slides/200-Network.pdf)

html5rocks.com 教程为我提供了请求处理程序代码的以下想法：

```
void MyRequestHandler::handleRequest (HTTPServerRequest &req, HTTPServerResponse &resp)
{
    resp.setStatus(HTTPResponse::HTTP_OK);

    resp.add("Content-Type", "text/event-stream");
    resp.add("Cache-Control", "no-cache");

    ostream& out = resp.send();

    while (out.good())
    {
        out << "data: " << "some data" << "\n\n";
        out.flush();

        Poco::Thread::sleep(500)
    }
} 
```

和 HTML5 页面的源代码：

```
<!DOCTYPE html>
<html>
    <head>
            <title>HTLM5Application</title>
    </head>
    <body>
        <p id="demo">hello</p>
        <script>
            var msgCounter = 0;
            var source;
            var data;
            if(typeof(EventSource) !== "undefined")
            {
                source = new EventSource('/stream');
                document.getElementById("demo").innerHTML = "Event source created";
            }
            else
            {
                document.getElementById("demo").innerHTML = "Are you using IE ?";
            }

            source.addEventListener('message', function(e)
            {
                msgCounter++;
                document.getElementById("demo").innerHTML = "Message received (" + msgCounter + ") !<br/>"+ e.data;
            }, false);
        </script>
    </body>
</html> 
```

好消息是，当打开 html 页面时，数据会流式传输，并且我会得到正确的输出（标签之间的文本会按预期更新。

问题是当我在浏览器中关闭页面时，POCO 程序崩溃，我在控制台中收到以下消息：

```
This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information.

Process returned 3 (0x3)   execution time : 22.234 s
Press any key to continue. 
```

（我正在使用 Code::Blocks，这就是显示返回值和执行时间的原因）

当我将 while() 循环放在 try{ }catch(...){} 之间时的事件，程序仍然在没有进入 catch 的情况下崩溃（当我将整个 main() 的内容放在 try/catch 之间时也会发生同样的事情）

主程序仅包含以下指令：

```
int main(int argc, char* argv[])
{
    MyServerApp myServer;
    myServer.run(argc, argv);

    return 0;
} 
```

我想知道什么可能导致崩溃以及如何解决它，拜托。

预先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-20T17:09:49.750

For anyone interested, I was able to deal with this issue by registering my own error handler that simply ignores the exception thrown when an SSE-client disconnects:

```
#include <Poco\ErrorHandler.h>

// Other includes, using namespace..., etc.

class ServerErrorHandler : public ErrorHandler
{
public:
    void exception(const Exception& e)
    {
        // Ignore an exception that's thrown when an SSE connection is closed. 
        //
        // Info: When the server is handling an SSE request, it keeps a persistent connection through a forever loop.
        //       In order to handle when a client disconnects, the request handler must detect such an event. Alas, this
        //       is not possible with the current request handler in Poco (we only have 2 params: request and response).
        //       The only hack for now is to simply ignore the exception generated when the client disconnects :(
        //
        if (string(e.className()).find("ConnectionAbortedException") == string::npos)
            poco_debugger_msg(e.what());
    }
};

class ServerApp : public ServerApplication 
{
protected:
    int main(const vector<string>& args) 
    {
        // Create and register our error handler
        ServerErrorHandler error_handler;
        ErrorHandler::set(&error_handler);

        // Normal server code, for example:
        HTTPServer server(new RequestHandlerFactory, 80, new HTTPServerParams);
        server.start();

        waitForTerminationRequest();
        server.stop();

        return Application::EXIT_OK;
    }
};

POCO_SERVER_MAIN(ServerApp); 
```

However, I must say that this is an ugly hack. Moreover, the error handler is global to the application which makes it even less desirable as a solution. The correct way would be detect the disconnection and handle it. For that Poco must pass the `SocketStream` to the request handler.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T17:32:22.370

您可以更改代码以捕获 Poco 异常：

```
try {
    MyServerApp myServer;
    return myServer.run(argc, argv);        
}catch(const Poco::Exception& ex) {
    std::cout << ex.displayText() << std::endl;
    return Poco::Util::Application::EXIT_SOFTWARE;
} 
```

# kendo-ui - KendoUI 网格数据绑定

> ID：15780724
> 
> 赞同：0
> 
> 时间：2013-04-03T06:54:46.220
> 
> 标签：kendo-ui, kendo-grid, kendo-asp.net-mvc

有人可以告诉我如何根据之前的控件选择绑定剑道网格吗？

例如：我在页面中放置了一个下拉列表和网格。现在我想根据下拉选择的值在网格中填充数据。

有人可以帮我做到这一点。我正在使用 MVC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T17:00:33.830

也许你可以这样做：

```
$("#dept").kendoComboBox({
            filter: "contains",
            suggest: true,
            index: 0,
            dataTextField: "Name",
            dataValueField: "ID",
            dataSource: data,
            change: function(e){
                   grid.data("kendoGrid").dataSource.filter({
                       field: "someField",
                       operator: "eq|etc.",
                       value: this.value()
                   });
            }
}); 
```

grid 是您通过 kendoGrid() 方法定义的对象。希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:36:31.830

尝试这个 ：

```
 $("#dept").kendoComboBox({
                filter: "contains",
                index: 0,
                dataTextField: "Name",
                dataValueField: "ID",
                dataSource: data,
                select: onSelect

            });
 //Dropdown change event
    function onSelect(e) {
        var dataItem = this.dataItem(e.item.index());
        UpdateUPGridSource(dataItem.value);
    }
   //Refresh Datasource by Role wise
   function UpdateGridSource(DropdownValue) {
        var grd = $("#users").data("kendoGrid");
        //Set url property of the grid data source
        grd.dataSource.transport.options.read.url = '/Controller/JSONMethodName?ParameterName='+ RoleID;
        //Read data source to update
        grd.dataSource.read();
   } 
```

# java - 可配置的应用程序模块 - Servlet 3 - 以编程方式启用/禁用 servlet

> ID：15780725
> 
> 赞同：2
> 
> 时间：2013-04-03T06:54:46.557
> 
> 标签：java, spring, servlets, servlet-filters, servlet-3.0

我有许多 Servlet 模块，我希望能够根据一些外部属性启用/禁用它们。我使用的是 Servlet 3.0，目前所有的 servlet 都是在 web.xml 中设置的。

我知道我可以在 Servlet 3.0 中以编程方式添加过滤器/servlet，但是我想知道什么是最好的选择，以及我应该如何根据一些 .properties 文件来做到这一点。

我可以从 web.xml 中删除所有 servlet 并动态添加它们，但是我不确定这是否仍然有效，因为当前基础一半使用 Spring，一半不使用（理想情况下，我想将所有内容移至 MVC并且可能使用 Spring 配置文件，但是那是一段时间）。代码正在更新，它有点旧，所以一些 servlet 被 Spring 连接，所以我们至少可以让 DI 在整个应用程序中运行。

如果我走编程路线，我想确保如果我以编程方式添加一个 servlet，它仍然会调用该`init(ServletConfig cfg)`方法仍然被调用（所以我可以通过调用为 servlet 进行依赖关系的 Spring 连接`SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext()`）。有很多 servlet，因此在 Java 侦听器类中执行此操作可能相当密集。

我认为更好的方法是创建一个创建过滤器的类（在运行时根据某些属性文件的内容添加）以简单地使 servlet 无法访问。但是我不确定这种方法将如何工作.

简而言之，我想让我的应用程序中的模块可配置。所以我的问题是使 servlet 可配置的最佳方法是什么？我该怎么做呢？

谢谢！

# java - 在上传大约 10 mb 的文件时，我收到“无法解析多部分”错误

> ID：15780729
> 
> 赞同：0
> 
> 时间：2013-04-03T06:54:53.530
> 
> 标签：java, struts, tomcat6

在上传大约 10 MB 的文件时，我收到“无法解析多部分”错误。我必须在不更改 struts 配置文件的情况下上传文件。我使用的是 struts 1.1 和 tomcat 6.0。我想错误在js的下面一行：

```
<form action="/dataUploadActionNew" method="post" enctype="multipart/form-data"> 
```

但我不确定必须做的改变。

谢谢

# javascript - 对 JavaScript 范围非常困惑

> ID：15780732
> 
> 赞同：0
> 
> 时间：2013-04-03T06:54:57.573
> 
> 标签：javascript

下面是从 SlickGrid 示例派生的非常简化的代码片段：

**模型.js：**

```
(function($) {
    function RemoteModel() {
        var someArr=[0];
        var someVar=0;
        var onDataLoadedSuccess = new Slick.Event();

        function ensureData(from, to) {
            h_request = setTimeout(function() {
                req = $.ajax({
                    url: url,
                    context: this,
                    success: function(resp) {
                        onSuccess();
                    }
                });
            }, 3000);
        }

        function onSuccess() {
            someVar=someVar+100;
            someArr[0]=someArr[0]+100;
            console.log(someVar + " " + someArr[0]); // yes values are changing properly for both !

            onDataLoadedSuccess.notify({ from: from, to: to });
        }

        return {
            "someArr": someArr,
            "someVar": someVar,
            "onDataLoadedSuccess": onDataLoadedSuccess,
        };
    }
})(jQuery); 
```

**主.js：**

```
var loader=new RemoteModel();
var grid=new Slick.Grid("#wlGrid", loader.data, columns, options);

grid.onViewportChanged.subscribe(function(e, args) {
    var vp = grid.getViewport();
    loader.ensureData(vp.top, vp.bottom);
});

loader.onDataLoadedSuccess.subscribe(function(e, args) {
    // someVar is always 0 :( ! someArr[0] is changing fine .. why ???
    console.log(loader.someVar + " " + loader.someArr[0]); 
}); 
```

因此，网格 () 上的一个事件`onViewportChanged`正在调用`ensureData`模型，这会增加`someVar`和`someArr[0]`，这两者都由 的返回值公开`RemoteModel`。

增加事件后，`onDataLoadedSuccess`由模型触发，但是在该事件中，只有 的值发生`loader.someArr[0]`了变化。

为什么`someVar`in的值`onDataLoadedSuccess`总是为零？这是范围问题吗？为什么`someArr[0]`改变罚款的价值？

如何正确读取`someVar`in的值`onDataLoadedSuccess`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:07:19.417

创建模型时，您将其返回给`loader`：

```
return {
  "someArr": someArr,
  "someVar": someVar,
  "onDataLoadedSuccess": onDataLoadedSuccess,
} 
```

`loader.someArr``someArr`指向闭包中指向的同一个数组。`someVar`但是，它是一个值为 0 的属性，从闭包中*复制*而来`someVar`。

当使用对象（包括数组）分配变量或对象属性时，您正在引用该对象。因此，指向闭包`loader.someArr`中指向的同一个数组。`someArr`可以通过两者进行更改`someArr`，`loader.someArr`因为它们指向同一个数组。

但在 的情况下，您从`someVar`分配。由于是原始值，因此该值从*复制*到。因此，不要指向同一件事。修改不会修改，反之亦然。`loader.someVar``someVar``0`*`someVar``loader.someVar``someVar``loader.someVar``someVar``loader.someVar`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:07:56.940

该函数具有和的`RemoteModel`局部变量。这些也作为对象属性在创建时返回。不同之处在于，数字 for 的值在创建时被有效地复制到其中。`someVar``someArr``loader``someVar``loader`

该数组也被复制到其中`someArr`，但该副本是通过引用进行的。因此，您有两件事指向同一个数组。当事件执行时，它会更新局部变量和局部数组。`loader`指向同一个数组，所以你看到了`someArr[0]`变化，但它没有“指向”数字，所以当本地`someArr`被改变时，`loader`值不是。

**编辑以解决评论**

一种选择是首先定义您返回的对象，然后让您的私有函数引用它。这可能仅限于数字或适用于所有公共成员；为了清楚起见，我会做后者。使用这种方法，只需要更改类，而不是调用它的代码。

```
function RemoteModel() {
    var ret = {
        "someArr": [0],
        "someVar": 0,
        "onDataLoadedSuccess": new Slick.Event()
    };        

    function onSuccess() {
        ret.someVar=ret.someVar+100;
        // ...
    }

    return ret;
    // ... 
```

第二种选择是`getSomeVar`在返回的对象中创建一个方法，以便在类之外执行`loader.getSomeVar()`而不是仅仅`loader.someVar`. `setSomeVar(newValue)`（如果它需要外部可设置，您可以创建一个。

```
function RemoteModel() {
    var someVar=0;
    // ...

    function getSomeVar() {
        return someVar;
    }

    return {
        "someArr": someArr,
        "getSomeVar": getSomeVar,
        "onDataLoadedSuccess": onDataLoadedSuccess,
    };
} 
```

进而：

```
loader.onDataLoadedSuccess.subscribe(function(e, args) {
    console.log(loader.getSomeVar() + " " + loader.someArr[0]); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:09:36.613

数字和其他非对象原语按值返回，而不是按引用返回：

```
 return {
        "someArr": someArr, // <-- object
        "someVar": someVar, // <-- number
        "onDataLoadedSuccess": onDataLoadedSuccess,
    }; 
```

`someArr`是一个对象（数组），将通过引用返回。然而`someVar`，这只是一个简单的数字。因此，您将返回一个值。

`RemoteModel`而不是在你的你应该使用`RemoteModel`一个适当的构造函数返回一个对象：

```
 this.someArr=[0];
    this.someVar=0;
    this.onDataLoadedSuccess = new Slick.Event();

    /* move other functions into the prototype, get rid of the return */ 
```

如果您不熟悉将函数用作构造函数，请参阅[MDN 上的使用对象](https://developer.mozilla.org/en-US/docs/Core_JavaScript_1.5_Guide/Working_with_Objects?redirect=no#Using_a_constructor_function)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:10:14.530

这是因为 javascript 如何处理这些值。

```
(function($) {
    function RemoteModel() {
        this.someArr=[0];
        this.someVar=0;
        this.onDataLoadedSuccess = new Slick.Event();

        var _this = this;

        function ensureData(from, to) {
            h_request = setTimeout(function() {
                req = $.ajax({
                    url: url,
                    context: this,
                    success: function(resp) {
                        onSuccess();
                    }
                });
            }, 3000);
        }

        function onSuccess() {
            _this.someVar=_this.someVar+100;
            _this.someArr[0]=_this.someArr[0]+100;
            console.log(_this.someVar + " " + _this.someArr[0]); // yes values are changing properly for both !

            _this.onDataLoadedSuccess.notify({ from: from, to: to });
        }
    }
})(jQuery); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T07:14:51.377

那是因为在你回来的那一刻

```
{
        "someArr": someArr,
        "someVar": someVar,
        "onDataLoadedSuccess": onDataLoadedSuccess,
}; 
```

`someVar`是`0`。

`someVar`持有 a `String`，一个原始类型。

`someArr`引用`Array`非原始类型。

字符串*（和其他**原始类型**）***按值** 传递，数组*（和其他**非原始类型**）*按**引用**传递。*更具体地说：对 Object 的变量引用按值传递（传递时新 var 保存引用的副本）*

所以你返回的是你的字符串的“副本”*

# ruby-on-rails-3 - 从二维数组中获取值

> ID：15780734
> 
> 赞同：0
> 
> 时间：2013-04-03T06:55:01.600
> 
> 标签：ruby-on-rails-3

我正在传递一个带有表单参数的数组来处理。它包含几行，每行都有多个值。如何检索单个值？这是控制器代码：

```
params[:line].each do |line|
  ... 
end 
```

每条“线”都给了我这些值，我想检索每个值，比如“home_score_id”：

```
["1", {":home_club_id"=>"11", ":home_score"=>"2", ":away_score"=>"4", ":away_club_id"=>"10"}] 
```

**更新：**

这是表格，它有 12 行供您输入匹配结果：

```
= form_tag store_all_results_path, class: 'form-horizontal' do
  .control-group
    .controls
      = select_tag :gameround_id, options_for_select(@gamerounds.map{ |g| ["#{markup_gameround(g)}", g.id] })
  - 1.upto(12) do |counter|
    .control-group
      .controls
      = select_tag "line[#{counter}][:home_club_id]", options_for_select(@clubs.map{ |c| [c.club_name, c.id] }), include_blank: true
      = text_field_tag "line[#{counter}][:home_score]", nil, class: "small_text_field"
      = text_field_tag "line[#{counter}][:away_score]", nil, class: "small_text_field"
      = select_tag "line[#{counter}][:away_club_id]", options_for_select(@clubs.map{ |c| [c.club_name, c.id] }), include_blank: true
  .form-actions
    = submit_tag :submit, value: I18n.t('.general.save'), class: "btn"
    = link_to t('.cancel', default: t("helpers.links.cancel")), results_path, class: 'btn' 
```

提交时，它会提供以下 POST 参数：

```
Started POST "/results/store_all" for 127.0.0.1 at 2013-04-03 10:47:34 +0200
Processing by ResultsController#store_all as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"[FILTERED]", "gameround_id"=>"3", "line"=>{"1"=>{":home_club_id"=>"8", ":home_score"=>"3", ":away_score"=>"2", ":away_club_id"=>"10"}, "2"=>{":home_club_id"=>"7", ":home_score"=>"4", ":away_score"=>"2", ":away_club_id"=>"12"}, "3"=>{":home_club_id"=>"", ":home_score"=>"", ":away_score"=>"", ":away_club_id"=>""}, "4"=>{":home_club_id"=>"", ":home_score"=>"", ":away_score"=>"", ":away_club_id"=>""}, "5"=>{":home_club_id"=>"", ":home_score"=>"", ":away_score"=>"", ":away_club_id"=>""}, "6"=>{":home_club_id"=>"", ":home_score"=>"", ":away_score"=>"", ":away_club_id"=>""}, "7"=>{":home_club_id"=>"", ":home_score"=>"", ":away_score"=>"", ":away_club_id"=>""}, "8"=>{":home_club_id"=>"", ":home_score"=>"", ":away_score"=>"", ":away_club_id"=>""}, "9"=>{":home_club_id"=>"", ":home_score"=>"", ":away_score"=>"", ":away_club_id"=>""}, "10"=>{":home_club_id"=>"", ":home_score"=>"", ":away_score"=>"", ":away_club_id"=>""}, "11"=>{":home_club_id"=>"", ":home_score"=>"", ":away_score"=>"", ":away_club_id"=>""}, "12"=>{":home_club_id"=>"", ":home_score"=>"", ":away_score"=>"", ":away_club_id"=>""}}, "commit"=>"Opslaan"} 
```

在控制器中，我想遍历 12 行中的每一行并创建一个结果记录（当行不为空时）：

```
 def store_all
    params[:line].each do |line|
      unless line[:home_club_id].blank?
        Result.create(home_club_id: line[:home_club_id], away_club_id: line[:away_club_id],  home_score: line[:home_score], away_score: line[:away_score], gameround_id: params[:gameround_id])
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:58:29.177

"line" 中的第二个值是 a `Hash`，因此可以使用

```
line[1][:home_club_id] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:10:50.787

尽管您的键看起来像符号 ( `:home_club_id`)，但它们实际上是以冒号 ( `":home_club_id"`) 为前缀的字符串。从您的视图中删除冒号应该可以解决问题。

所以而不是：

```
= text_field_tag "line[#{counter}][:away_score]" 
```

写吧：

```
= text_field_tag "line[#{counter}][away_score]" 
```

由于`params`是[HashWithIndifferentAccess](http://api.rubyonrails.org/classes/ActiveSupport/HashWithIndifferentAccess.html)，您可以在其中一个`line["away_score"]`或`line[:away_score]`在您的控制器中使用。

```
def store_all
  params[:line].each do |counter, line|
    unless line[:home_club_id].blank?
      Result.create(line.merge(gameround_id: params[:gameround_id])
    end
  end
end 
```

# properties - ServiceProcessInstaller 的账户属性有什么区别

> ID：15780735
> 
> 赞同：2
> 
> 时间：2013-04-03T06:55:03.270
> 
> 标签：properties, windows-services

嗨，我正在学习创建一个 Windows 服务，我搜索了很多，并没有清楚地了解`Account`ServiceProcessInstaller 类中的属性，任何人都可以解释一下 1.User 2.LocasService 等之间的
区别
。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:21:23.943

MSDN 上的[ServiceAccount Enumeration](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceaccount%28v=vs.100%29.aspx)页面有一个描述每个帐户的表。

最佳做法是使用适合您的服务功能的具有最低权限的帐户。通常这意味着使用[LocalService](http://msdn.microsoft.com/en-ca/library/windows/desktop/ms684188%28v=vs.85%29.aspx)帐户，除非您正在做一些需要[LocalSystem](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684190%28v=vs.85%29.aspx)权限的事情。

LocalSystem 基本上可以自由支配机器，而 LocalService/NetworkService 具有与标准用户帐户大致相同的权限。如您所料，在特定用户的上下文中运行服务将为该服务提供该用户的权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-29T02:01:16.023

我认为最好的是：

**LocalService**
在本地计算机上充当非特权用户的帐户，并向任何远程服务器提供匿名凭据。

**LocalSystem** 服务控制管理器使用的帐户，在本地计算机上具有广泛的权限并充当网络上的计算机。

**NetworkService**
提供广泛的本地权限并向任何远程服务器提供计算机凭据的帐户。

**用户**
由网络上特定用户定义的帐户。为 ServiceProcessInstaller.Account 成员指定 User 会导致系统在安装服务时提示输入有效的用户名和密码，除非您为 ServiceProcessInstaller 实例的 Username 和 Password 属性设置了值。

来自：[https ://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceaccount(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceaccount(v=vs.110).aspx)

# android - 我想在文件夹视图中显示画廊

> ID：15780736
> 
> 赞同：0
> 
> 时间：2013-04-03T06:55:03.580
> 
> 标签：android

这是我用来在gridview中显示画廊但在gridview中显示所有图片的代码

[示例链接 1](http://www.google.com.pk/imgres?hl=en&sa=X&biw=878&bih=598&tbm=isch&tbnid=aE5zGRuSzkvPjM%3a&imgrefurl=http://www.androidpit.com/en/android/market/apps/app/com.photoalbumorganizer.android/Photo-Album-Organizer&docid=j-QCLRmOw4FWxM&imgurl=http://fs02.androidpit.info/ass/x12/276712-1271712590291.jpg&w=480&h=854&ei=h9BbUcbtFI3Qsgav54HoBA&zoom=1&iact=hc&vpx=2&vpy=144&dur=171&hovh=300&hovw=168&tx=62&ty=244&page=2&tbnh=162&tbnw=91&start=19&ndsp=22&ved=1t:429,r:19,s:0,i:136)图像，但我想显示这样的画廊

[http://www.google.com.pk/imgres?hl=en&biw=878&bih=598&tbm=isch&tbnid=17fWAXUGZ3USxM:&imgrefurl=http://www.maclife.com/article/howtos/sync_your_android_phone_your_mac?page=0,2&docid= FGf7ur67XeENhM&imgurl=http://www.maclife.com/files/u32/1201_videogallery_480.jpg&w=480&h=854&ei=M9FbUY_aNsrvswburIDABw&zoom=1&iact=hc&vpx=664&vpy=144&dur=1467&hovh=300&hovw=168&tx=123&ty=203&page=1&tbnh=135&tbnw=75&start= 0&ndsp=19&ved=1t:429,r:18,s:0,i:133](http://www.google.com.pk/imgres?hl=en&biw=878&bih=598&tbm=isch&tbnid=17fWAXUGZ3USxM:&imgrefurl=http://www.maclife.com/article/howtos/sync_your_android_phone_your_mac?page=0,2&docid=FGf7ur67XeENhM&imgurl=http://www.maclife.com/files/u32/1201_videogallery_480.jpg&w=480&h=854&ei=M9FbUY_aNsrvswburIDABw&zoom=1&iact=hc&vpx=664&vpy=144&dur=1467&hovh=300&hovw=168&tx=123&ty=203&page=1&tbnh=135&tbnw=75&start=0&ndsp=19&ved=1t:429,r:18,s:0,i:133)

文件夹视图，所以当用户单击任何文件夹时，它的内容会显示在 gridview 中，我该怎么办？

这是我的代码。

```
公共类 AndroidCustomGalleryActivity 扩展 Activity {
    私人整数计数；
    私有 Bitmap[] 缩略图；
    私人布尔[]缩略图选择；
    私有字符串[] arrPath；
    私有图像适配器图像适配器；

`Cursor imagecursor;

int image_column_index;

Button selectBtn;

ProgressDialog myProgressDialog = null;

DataBase db;

Handler handle = new Handler(){         
    public void handleMessage(android.os.Message msg) {

        if (msg.what == 1)
        {
            hideProgress();

            GridView imagegrid = (GridView) findViewById 
   (R.id.PhoneImageGrid);
            imageAdapter = new ImageAdapter();
            imagegrid.setAdapter(imageAdapter);
        }
        else if (msg.what == 3)
        {
            hideProgress();

            AndroidCustomGalleryActivity.this.finish();

        }
        else if (msg.what == 2)
        {
            hideProgress();
        }
        super.handleMessage(msg);   
    };
};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gallery);

    showProgress();
    new Thread() {
        public void run() { 
             try
            {
                loadFeed();
                android.os.Message alertMessage = new android.os.Message();
                alertMessage.what = 1;
                handle.sendMessage(alertMessage);
            }
            catch(Exception e)
            {   
                android.os.Message alertMessage = new android.os.Message();
                alertMessage.what = 2;
                handle.sendMessage(alertMessage);       
            }
        }
    }.start();

    selectBtn = (Button) findViewById(R.id.selectBtn);
    selectBtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub

            showProgress();
            new Thread() {
                public void run() { 
                     try
                    {
                        SelecedtPhotos();
                        android.os.Message alertMessage = new  
     android.os.Message();
                        alertMessage.what = 3;
                        handle.sendMessage(alertMessage);
                    }
                    catch(Exception e)
                    {   
                        android.os.Message alertMessage = new  
    android.os.Message();
                        alertMessage.what = 2;
                        handle.sendMessage(alertMessage);       
                    }
                }
            }.start();

        }
    });

}

public static byte[] getBitmapAsByteArray(Bitmap bitmap) {
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.PNG, 0, outputStream);       
    return outputStream.toByteArray();
}

public class ImageAdapter extends BaseAdapter {

    private LayoutInflater mInflater;

    public ImageAdapter() {
        mInflater = (LayoutInflater) getSystemService 
     (Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() {
        return count;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView == null) {

            holder = new ViewHolder();
            convertView = mInflater.inflate(R.layout.galleryitem,  
  null);
            holder.imageview = (ImageView)  
   convertView.findViewById 
 (R.id.thumbImage);
            holder.checkbox = (CheckBox) convertView.findViewById 
    (R.id.itemCheckBox);

            convertView.setTag(holder);
        }
        else 
        {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.checkbox.setId(position);
        holder.imageview.setId(position);

        holder.checkbox.setOnClickListener(new OnClickListener() {          
            public void onClick(View v) {
                // TODO Auto-generated method stub
                CheckBox cb = (CheckBox) v;
                int id = cb.getId();

                if (thumbnailsselection[id])
                {
                    cb.setChecked(false);
                    thumbnailsselection[id] = false;
                } 
                else 
                {
                    cb.setChecked(true);
                    thumbnailsselection[id] = true;
                }
            }
        });

        /*holder.imageview.setOnClickListener(new OnClickListener() {           
            public void onClick(View v) {
                // TODO Auto-generated method stub
                int id = v.getId();
                Intent intent = new Intent();
                intent.setAction(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.parse("file://" +  
   arrPath[id]), "image/*");
                startActivity(intent);
            }
        });*/

        holder.imageview.setImageBitmap(thumbnails[position]);
        holder.checkbox.setChecked(thumbnailsselection[position]);
        holder.id = position;

        return convertView;
    }
}
class ViewHolder {
    ImageView imageview;
    CheckBox checkbox;
    int id;
}

public void loadFeed()
{
    final String[] columns = { MediaStore.Images.Media.DATA,  
  MediaStore.Images.Media._ID };
    final String orderBy = MediaStore.Images.Media._ID;

    imagecursor = managedQuery 
   (MediaStore.Images.Media.EXTERNAL_CONTENT_URI,  
    columns, null,null, orderBy);

    image_column_index = imagecursor.getColumnIndex 
   (MediaStore.Images.Media._ID);

    this.count = imagecursor.getCount();

    this.thumbnails = new Bitmap[this.count];

    this.arrPath = new String[this.count];

    this.thumbnailsselection = new boolean[this.count];

    for (int i = 0; i < this.count; i++) 
    {
        imagecursor.moveToPosition(i);
        int id = imagecursor.getInt(image_column_index);
        int dataColumnIndex = imagecursor.getColumnIndex 
   (MediaStore.Images.Media.DATA);
        thumbnails[i] = MediaStore.Images.Thumbnails.getThumbnail 
 (getApplicationContext().getContentResolver(),  
  id,MediaStore.Images.Thumbnails.MICRO_KIND,  
 null);
        arrPath[i]= imagecursor.getString(dataColumnIndex);
    }` 

            回答 #1

赞同：0

时间：2013-04-03T07:03:38.193

您知道要在网格视图中显示的图像。所以最初使用四个图像设计自定义布局，例如具有四个图像视图的文件夹。然后加载您的特定文件夹图像缩略图。

希望这会帮助你。

```

# paypal - 自动退货在 PayPal Pro 托管解决方案中不起作用？

> ID：15780738
> 
> 赞同：1
> 
> 时间：2013-04-03T06:55:09.533
> 
> 标签：paypal

我在一个新网站上使用新的 PayPal Pro 托管解决方案，除了自动退货不起作用之外，一切似乎都“正常”吗？

我在我的 paypal 帐户中启用了自动退货以及 IPN 和付款数据，因为我在旧网站上使用普通 Paypal 进行了自动退货（*所以我知道它的设置正确*）。我有所有正确的字段，包括“ **return** ”变量集，并在这个专业托管的表单上发送到 PayPal。

成功付款后，我只是获得了标准的 Paypal pro 托管感谢页面（*没有延迟重定向，我将它留在页面上超过一分钟*）？？？页面上有一个返回链接，如果按下该链接，我将返回正确的页面。

**但我需要用户自动返回**？或者这个解决方案对我来说没用，因为我无法跟踪转化？我不可能是唯一需要这个的人吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T05:48:17.127

我解决了这个问题。可以使用信用卡和 PayPal。只需确保添加以下变量

**在其中返回**您的返回 url
**showHostedThankyouPage**，值为 false

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:16:07.377

买家是用他们的 PayPal 账户还是信用卡付款。使用自动退货，当买家使用其 PayPal 账户付款时，买家会自动退回，但如果买家使用信用卡付款，则不会自动重定向。他们有时间写下信息或打印页面。与使用 PayPal 帐户付款的人不同，他们无法始终返回交易详细信息。使用信用卡付款的买家必须点击该链接才能返回商家网站。这就是为什么依赖 IPN 比自动返回更好的原因。无论买家是否返回您的网站，IPN 都会发生。

# ios - 如何在 CoreData 中正确添加大型数据集？

> ID：15780740
> 
> 赞同：2
> 
> 时间：2013-04-03T06:55:10.440
> 
> 标签：ios, objective-c, database, core-data

我有一个巨大的 NSArray（4.000.000 个对象），我想保存到 Core Data 中。因为我使用 ARC 并且自动释放池可能会变得太大，所以我将进程划分为多个循环（因此自动释放池可以有机会自行耗尽）。

在以下代码中，我使用管理器 (clMan) 从数组（区域）内的字典中添加项目。字典包含两个字符串字段，它们被解析为标量整数。

将数据划分为多个循环的代码

```
int loopSize = 50000;
int loops = 0;
int totalRepetitions = regions.count;
loops = totalRepetitions / loopSize;
int remaining = totalRepetitions % loopSize;

loops += 1;

for (int i = 0; i < loops; i++) {

    int k = 0;
    if (i == 0) k = 1;

    if (i == (loops - 1))
    {
            // Last loop

            for (long j = i * loopSize + k; j < i * loopSize + remaining; j++) {
                [clMan addItemWithData:[regions objectAtIndex:j]];
            }
            [clMan saveContext];
            break;

    }

    // Complete loops before the last one
        for (long j = i * loopSize + k; j < (i + 1) * loopSize; j++) {
            [clMan addItemWithData:[regions objectAtIndex:j]];
        }
        [clMan saveContext];
        NSLog(@"Records added : %d", i * loopSize);

}
NSLog(@"Finished adding into core data"); 
```

将数据添加到核心数据中的代码：

```
-(void)addItemWithData:(NSDictionary *)data
{

    MyRegion *region = [NSEntityDescription
                                              insertNewObjectForEntityForName:@"MyRegion"
                                              inManagedObjectContext:self.context];

    region.index = [((NSString *)[data objectForKey:REGION_INDEX]) intValue];
    region.id = [((NSString *)[data objectForKey:REGION_ID]) intValue];

} 
```

程序在达到 1 500 000 索引时崩溃。由于解析问题/逻辑，崩溃似乎没有发生。

谁能告诉我我的逻辑是否错误，或者在 CoreData 中添加这么多数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:30:17.107

在每个循环之后，尝试调用`NSManagedObjectContext.reset`以“忘记” MOC 中的本地副本。否则，这些可能不会被清除并导致问题。

iCloud 上的 WWDC 2012 代码示例有一种方法，称为`seedStore`将本地核心数据 SQL 数据库迁移到 iCloud 数据库 - 使用 5000 条记录的批量大小，其中明确指出：

```
if (0 == (i % batchSize)) {
    success = [moc save:&localError];
    if (success) {
        /*
           Reset the managed object context to free the memory for the inserted objects
           The faulting array used for the fetch request will automatically free
           objects with each batch, but inserted objects remain in the managed
           object context for the lifecycle of the context
         */
        [moc reset];
    } else {
        NSLog(@"Error saving during seed: %@", localError);
        break;
    }
} 
```

（这`i`是批次的当前索引，因此`i % batchSize == 0`如果我们开始一个新批次）

# iphone - 判断一个类在运行时是否符合特定的协议方法？

> ID：15780742
> 
> 赞同：0
> 
> 时间：2013-04-03T06:55:13.677
> 
> 标签：iphone, ios, objective-c, protocols

我试图判断是否有一种方法可以确定一个类在运行时是否符合特定的（可选）协议方法。有没有办法检查这个？不想向委托类中不存在的委托方法实现发送调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T06:57:22.657

```
 BOOL isProtocolConformed=[YourClass conformsToProtocol:@protocol(YourProtocol)];
 BOOL isSelectorResponse=[yourObject respondsToSelector:@selector(yourMethod)];
 if(isProtocolConformed && isSelectorResponse){
    //do your stuff
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:57:10.933

```
if ([self.delegate respondsToSelector:@selector(protocolMethod)])
{
    [self.delegate protocolMethod];
} 
```

从[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/respondsToSelector:)：

> ## 响应选择器：
> 
> 返回一个布尔值，指示接收者是否实现或继承了可以响应指定消息的方法。

# java - log4j，只想在控制台中显示调试（而不是信息）并在应用启动时清除日志文件

> ID：15780745
> 
> 赞同：4
> 
> 时间：2013-04-03T06:55:18.763
> 
> 标签：java, log4j

我是这个 log4j 的新手，并设法在 eclipse 上设置并让它运行。我了解级别中的优先级链，现在这是我的属性文件配置：

```
log4j.rootLogger = DEBUG, rollingFile, console
log4j.appender.rollingFile=org.apache.log4j.RollingFileAppender
log4j.appender.rollingFile.Threshold=INFO
log4j.appender.rollingFile.File=logs/logFile.log
log4j.appender.rollingFile.MaxFileSize=1MB
log4j.appender.rollingFile.MaxBackupIndex=5
log4j.appender.rollingFile.layout = org.apache.log4j.PatternLayout
log4j.appender.rollingFile.layout.ConversionPattern=%d{ISO8601} %-5p [%t] %c: %m%n

log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.Threshold=DEBUG
log4j.appender.console.Target=System.out
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.conversionPattern=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p - %m%n 
```

我对此 log4j 有 2 个问题
1) log4j 是否可以在每次启动应用程序时清除我的日志文件？我不知道该怎么做。

2）从配置中我设置我的控制台打印调试但我真正想要它打印的是纯调试消息而不是信息消息。有没有办法控制这个？如果阈值设置为调试，则仅打印调试和错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:20:58.547

在您的中添加以下行`log4j.properties`以使其在每次应用程序启动时都焕然一新

```
log4j.appender.rollingFile.Append=false 
```

您也可以像这样将日志记录级别添加到您的自定义包中。
假设你有一个包`foo.bar.MyPack`。
您想为此包指定日志记录级别，因为`info`您必须在您的`log4j.properties`

```
log4j.logger.foo.bar.MyPack=info 
```

通过这种方式，您可以控制应该在哪个包中`info`或应该在哪个包中等`debug`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:06:00.633

在您的代码中设置日志级别。IE

```
 private static org.apache.log4j.Logger log = Logger
                                    .getLogger(LogClass.class);
       log.setLevel(Level.Debug); 
```

它只会显示调试消息

```
<param name="Append" value="false" /> 
```

如果将 append 参数设置为 false，则当应用程序重新启动时，基本日志文件将“重新开始”。

# mysql - Where 子句减慢查询速度

> ID：15780747
> 
> 赞同：1
> 
> 时间：2013-04-03T06:55:24.637
> 
> 标签：mysql, database

下面的查询搜索客户之前所做的选择并获得正确的结果。无论如何，查询应该尽可能快。在测试时，我意识到 where 子句会减慢查询速度。Hoq 我们可以解决这个问题吗？

```
SELECT 
customerselections.customer_id,
customerselections.selectedcompany_id,
companycampaigns.*,
companies.company_logo
FROM  customerselections

INNER JOIN companycampaigns ON companycampaigns.company_id=customerselections.selectedcompany_id  
INNER JOIN companies ON companies.company_id=customerselections.selectedcompany_id

WHERE customerselections.customer_id='$customerid' LIMIT $offset,$limit 
```

更新：解释结果

客户选择：

```
id  select_type table   type    possible_keys   key key_len ref rows      Extra
 1  SIMPLE  customerselections  ALL NULL    NULL    NULL    NULL    12799999 
```

公司活动

```
 id select_type table   type    possible_keys   key key_len ref rows    Extra
 1  SIMPLE  companycampaigns    ALL NULL    NULL    NULL    NULL    2000000 
```

公司

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  companies   ALL NULL    NULL    NULL    NULL    2039500 
```

查询说明

```
|id|select_type | table   | type   | possible_keys        |           key |   key_len | ref  | rows | Extra |

|1|SIMPLE | customerselections | ref | selectedcompany_id,customer_id | customer_id | 4   | const  |  2   9 |  |

|1|SIMPLE| companycampaigns  | ref  | company_id   | company_id  | 4  | viptrio.customerselections.selectedcompany_id | 1 |  |

|1|SIMPLE| companies  | eq_ref | PRIMARY  | PRIMARY  | 4 | viptrio.customerselections.selectedcompany_id |1 |  | 
```

更新

```
 CREATE TABLE IF NOT EXISTS `companies` (
  `company_id` int(11) NOT NULL auto_increment,
  `company_customerid` int(11) default NULL,
  `company_name` tinytext NOT NULL,
  `company_description` tinytext,
  `company_email` tinytext NOT NULL,
  `company_website` tinytext,
   `company_gsm` tinytext,
  `company_landline` tinytext,
  `company_fax` tinytext,
  `company_address` tinytext,
  `company_contactperson` tinytext,
  `company_businessid` smallint(11) NOT NULL,
  `company_cityid` smallint(5) NOT NULL,
  `company_countrycode` char(3) NOT NULL,
  `company_refnum` tinytext,
  `company_regdate` tinytext NOT NULL,
  `company_logo` tinytext,
  `company_keyword` tinytext,
  PRIMARY KEY  (`company_id`),
  KEY `company_cityid` (`company_cityid`),
  KEY `company_countrycode` (`company_countrycode`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2039501 ;

CREATE TABLE IF NOT EXISTS `companycampaigns` (
`campaign_id` int(11) NOT NULL auto_increment,
`company_id` int(11) NOT NULL,
`campaign_title` varchar(40) NOT NULL,
`campaign_detail` mediumtext NOT NULL,
`campaign_startdate` tinytext,
`campaign_enddate` tinytext,
`published` tinyint(1) NOT NULL default '0',
PRIMARY KEY  (`campaign_id`),
KEY `company_id` (`company_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2000001 ;

  CREATE TABLE IF NOT EXISTS `customerselections` (
  `selection_id` int(11) NOT NULL auto_increment,
  `customer_id` int(11) NOT NULL,
 `selectedcompany_id` int(11) NOT NULL,
  PRIMARY KEY  (`selection_id`),
  KEY `selectedcompany_id` (`selectedcompany_id`),
  KEY `customer_id` (`customer_id`)
  ) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=12800006 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:11:01.270

你可以试试下面

选择 * 从

(SELECT * FROM customerselections WHERE customer_id='$customerid')as cs Inner join companycampaigns cc ON cc.company_id=cs.selectedcompany_id
INNER JOIN Companies c ON c.company_id=cs.selectedcompany_id LIMIT $offset,$limit

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:46:57.313

试试这个：

SELECT '$customerid',cc.*,c.logo FROM companycampaigns cc INNER JOIN Companies c ON c.company_id=cc.company_id where c.company_id in (SELECT selectedcompany_id FROM customerselections FROM customer_id='$customerid') LIMIT $offset, $限制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:07:56.737

试试这个（在 customer_id 上有一个索引）：

```
SELECT t1.customer_id, t1.selectedcompany_id,
       cc.*, c.company_logo
FROM   (SELECT customer_id, selectedcompany_id,
        FROM   customerselections 
        WHERE customer_id='$customerid' ) AS t1
INNER JOIN companycampaigns cc ON cc.company_id = t1.selectedcompany_id  
INNER JOIN companies c ON c.company_id = t1.selectedcompany_id
LIMIT $offset, $limit 
```

我更喜欢使用表别名来使查询更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:34:09.980

在我看来``customerselections`.`customer_id``是一个`int`，但你正在尝试做：

`WHERE customerselections.customer_id='$customerid'`

这会将其与字符串进行比较。你有没有尝试过：

`WHERE customerselections.customer_id = $customerid`.

# c++ - C++ 字符串和内存管理

> ID：15780757
> 
> 赞同：1
> 
> 时间：2013-04-03T06:56:25.847
> 
> 标签：c++, string, memory, ode-library

我现在正在从事一个相当复杂的项目，涉及控制模拟机械臂。我完成了该项目的第一个版本，它工作正常。我刚刚添加了一些新代码，这些代码在每次迭代时收集有关系统的一些信息，将其保存在一些数组中，最后将所有内容打印到文件中以供以后分析。

现在，真正奇怪的事情正在发生。如果我定义将保存数据的文件如下：

```
const std::string SAVEFILE = "C:\\Users\\Vincent\\Desktop\\ta"; 
```

一切正常，与我添加新代码之前完全相同（加上保存数据）。

但是，如果我将其定义如下：

```
const std::string SAVEFILE = "C:\\Users\\Vincent\\Desktop\\tacit.txt"; 
```

然后系统以另一种方式运行。不会崩溃，但机械臂的移动方式不同。

我试图评论所有使用 SAVEFILE 的代码，甚至是与数据保存相关的任何新代码，但问题仍然存在。

我知道只有这些信息，任何人都不太可能告诉我出了什么问题，但是有人会建议看什么方向吗？认为长字符串会覆盖其他变量的值是否有意义？怎么可能？我可能已经破坏了一些干净的 C++ 编程指南？

某些阵列行为不端听起来可能，这是我检查的第一件事。我想它应该来自保存数据的数组，因为它们是唯一的新数组。问题是，即使我注释了所有相应的代码，也没有任何变化。

我尝试提供有关我的代码的更多信息。在这里我第一次使用 SAVEFILE（runExperiment 函数的最后一个参数）

```
int main(int argc, char *argv[])    {
  std::vector<Controller*> controllers;
  controllers.push_back(getConstrainedPDT(0,true));
  controllers.push_back(getConstrainedPDT(1,true));
  controllers.push_back(getConstrainedPDT(2,true));
  runExperiment(controllers,LENGTHS,WEIGHTS,RADIUS,ANGLEMIN,ANGLEMAX,MAXTORQUES,PUSHVECTOR,GRAVITY,RUNTIME,TIMESTEP,XTARGET,YTARGET,ITERATIONSAVEDATA,SAVEFILE);
  return 1;
} 
```

这里是函数的代码：

```
void runExperiment(std::vector<Controller*> controllers,const double * lengths, const double* weights, const double radius, const double* angleMin, const double* angleMax, const double* maxTorques,const double* pushVector,const dReal gravity,const dReal runTime,const dReal tstep,const dReal targetX,const dReal targetY,const int itSaveData,const std::string saveFile){

  endTime = runTime;
  simTime = 0.0;
  timeStep = tstep;

  dInitODE();
  world = dWorldCreate();
  space = dHashSpaceCreate(0);
  contactgroup = dJointGroupCreate(0);
  ground = dCreatePlane(space, 0, 0, 1, 0);
  dWorldSetGravity(world, 0, 0, gravity);

  createTargetObject(targetX,targetY);

  int nbData = static_cast<int>( ( endTime / timeStep ) / static_cast<double>(itSaveData) );

  robot = new R2DRobot(&world,controllers.size(),lengths,weights,radius,angleMin,angleMax,maxTorques,pushVector,controllers,itSaveData,nbData);

  dsFunctions   fn;
  fn.version = DS_VERSION;
  fn.start   = &setViewPoint;
  fn.step    = &loop;
  fn.stop = &stopSim;
  fn.path_to_textures = PATH_TO_TEXTURES;

  dsSimulationLoop(0, 0, 1280, 960, &fn);

 dWorldDestroy(world);
 dCloseODE();

 // NOTE: commenting the next three lines does not fix the problem !
 // it is the only place saveFile is used, except in the code of printData
 // I do not show the code of printData as commenting it does not change anything
 if (itSaveData>0){
    robot->printData(saveFile);
 }

 delete robot; 
```

}

为了找到未指定的变量（对于一个有很多类的项目来说并不容易，其中一些是虚拟的），我使用了 const 参数并观察了机器人的行为。我遇到了一个情况：

一直工作正常：

```
const std::string SAVEFILE = "C:\\Users\\Vincent\\Desktop\\tacit.txt"; 
```

使程序崩溃：

```
const std::string SAVEFILE = "C:\\Users\\Vincent\\Desktop\\ta"; 
```

现在的问题是，如果我在 runExperiment 的代码中添加一行（添加了对 printf 的调用）：

```
printf("experiment.cpp - 1 \n");
robot = new R2DRobot(&world,controllers.size(),lengths,weights,radius,angleMin,angleMax,maxTorques,pushVector,controllers,itSaveData,nbData); 
```

然后 SAVEFILE 的两个版本都可以正常工作，并且确实给出了完全相同的结果。

现在，如果我删除对 printf 的调用并在 R2DRobot 的构造函数中添加：

```
R2DRobot::R2DRobot(dWorldID * world, const int nbLinks, const double * lengths, const double * weights, const double radius,const double* angleMin,const double* angleMax,const double* maxTorques,const double* pushVector, std::vector<Controller*> controllers,int saveData,int nbData):
Robot(3*nbLinks+3,controllers),pushVector(pushVector),nbLinks(nbLinks),weights(weights),angleMin(angleMin),angleMax(angleMax),maxTorques(maxTorques),itSaveData(saveData){

printf("experiment.cpp - 1 \n");
// rest of the code 
```

然后程序崩溃（如果使用 SAVEFILE 的短版本）但在控制台中打印“experiment.cpp -1”之后。

如果我将对 printf 的调用移至 R2DRobot 的母类 Robot 的构造函数，则同样的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T07:01:18.183

这可能表明您的程序没有正确初始化变量。当字符串较短时，编译器会创建特定的内存布局，并且在堆栈（或堆）上创建的变量具有特定的值。幸运的是，这些价值观似乎适合你。

现在，由于字符串变长了，编译器稍微改变了内存布局，这导致布局略有不同。现在，这些未初始化的变量的值可能略有不同。它不一定会崩溃，但工作方式不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T07:01:06.940

> 但是任何人都会有一些建议看什么方向

不幸的是，这些信息确实不够。也许，您可以尝试使用`valgrind`或类似的工具来分析您的代码。

* * *

> 认为长字符串会覆盖其他变量的值是否有意义？怎么可能？

不，这不是一个长字符串。它甚至不接近长字符串。如果字符串太长，则会出现无效长度异常。

* * *

> 我可能已经破坏了一些干净的 C++ 编程指南

没有足够的信息。使用`std::string`很好，甚至推荐。

问题出在其他地方。对我来说听起来像是未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:51:09.117

with参数的高度数`runExperiment`是全局变量，它告诉您可能需要更高级别的对象来包装和组织它。在尝试为此类对象编写构造函数时，您可能会看到并纠正错误/未初始化变量的问题，这将防止未定义的行为。

# android - Android 中应用程序之间的 LED 通知优先级

> ID：15780759
> 
> 赞同：1
> 
> 时间：2013-04-03T06:56:28.393
> 
> 标签：android, notifications, led

是否可以为我的 LED 通知定义优先级，以便我的应用程序将替换已存在的由另一个应用程序设置的 LED 通知？例如，当收到电子邮件时，Gmail 客户端将设置白色闪烁 LED 通知，因此当我的应用程序尝试设置另一个通知时，例如绿色持续，系统会忽略它，直到第一个消失。是否可以更改系统的行为以首先显示我的 LED 通知？我知道在 API 16 中引入了一个“优先级”标志，但看起来它并没有改变通知的顺序......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T14:19:31.090

不，优先级不会影响 LED。也许应该，但今天 LED 遵循这个算法：

1.  当通知 N1 进来想要设置 LED 时（使用 FLAG_SHOW_LIGHTS）：

    a) 如果没有其他活动通知请求 LED，则 LED 连接到 N1，直到 N1 被取消（或更新以删除其 LED 标志）。

    b) 如果 LED 已被另一个通知使用，则 N1 转到灯队列的前面（！）。

2.  当使用 LED 的通知被取消时，灯队列前面的通知将获得对 LED 的控制权，直到它被取消（或更新以删除其 LED 标志）。

所以它是后进先出的，但具有粘性（即任何有 LED 的东西都会保持它直到它消失）。

# java - 选择框在日期选择器重叠时消失

> ID：15780760
> 
> 赞同：0
> 
> 时间：2013-04-03T06:56:28.330
> 
> 标签：java, jsp, select

我正在使用选择框：

当我点击日期选择器时，日历弹出窗口打开。选择框在日历弹出窗口与选择框重叠时消失。它适用于 Chrome 和 Mozilla。它不适用于 IE 8。

有什么办法可以克服这个问题吗？

谢谢你，SK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:02:16.647

IE 8 有一些问题。在 IE8 中使用 jquery 日期选择器[http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

# sql - 处理浮点数后的数字

> ID：15780765
> 
> 赞同：0
> 
> 时间：2013-04-03T06:56:38.507
> 
> 标签：sql, sql-server, tsql

我只是陷入这种情况。SQL中有什么方法可以去掉除小数点后两个数字之外的所有数字吗？例如，假设为 125.36987，因此我只想要 125.36 的输出。我试图将它乘以 100，然后使用强制转换为 int 并除以 100.0，但仍然不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:07:34.970

是的，ROUND 可以解决这个问题。从 DUAL 中选择 ROUND(125.36987,2)；你可以得到 125.37 或者如果你不需要四舍五入，你可以像这样使用 'trunc' TRUNC(125.36987,2) 125.36

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:58:44.463

利用`ROUND()`

```
select round(125.36987, 2, 1) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/d41d8/11862)
*   [圆形的](http://msdn.microsoft.com/en-us/library/ms175003.aspx)

这是细节。语法，

```
ROUND ( numeric_expression , length [ ,function ] ) 
```

> **功能**
> 
> 是要执行的操作类型。函数必须是 tinyint、smallint 或 int。当 function 被省略或值为 0（默认）时，numeric_expression 被舍入。当指定 0 以外的值时，numeric_expression 将被截断。

# html - CSS 和 HTML 居中

> ID：15780767
> 
> 赞同：0
> 
> 时间：2013-04-03T06:56:46.513
> 
> 标签：html, css

现在我有...

```
<header id="background-color">
    <img src="header_image.gif" alt="header">   
    <h1>Header</h1>
</header> 
```

相关的CSS是......

```
header {
    background: #0072bc;
    width: 70%;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
}
#background-color {
    background: #0066CC;
    width: 100%;
} 
```

这显然将图像置于 h1 之上。我想做的是左对齐图像并使 h1 相对于整个页面居中（不仅仅是剩余空间）。

当我说左对齐时，我的意思是相对于设置为 70% 并带有自动边距的正文和标题。我不知道该怎么做，我对网页设计完全陌生。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:20:00.290

您可以添加`margin-right: -100%;`到图像，因此标题文本不会触及图像的右边缘。并将在标题中对齐中心。[检查这个小提琴](http://jsfiddle.net/a7Jnz/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:58:44.563

```
header {
background-color: #0072bc;
width: 70%;
text-align: left;
padding: 10px;
} 
```

看看jsfiddle

[http://jsfiddle.net/EScBs/](http://jsfiddle.net/EScBs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:22:19.027

一个快速的答案..可能需要微调...

添加包装div ...

```
<header id="background-color">
    <div id="container">
        <img src="Beach_Party.jpg" alt="header">   
        <h1>Header</h1>
    </div>
</header> 
```

尽量使用子元素的相对定位和绝对定位

```
<style>
    header {
        background: #0072bc;
        width: 70%;
        margin-left: auto;
        margin-right: auto;
        text-align: center;
    }
    #background-color {
        background: #0066CC;
        width: 100%;
    }
    img {
        float:left;
        text-align:left;
        position: absolute;
        top:0;
        left:0;
    }
    h1 {
        z-index:10;
    }
    #container {
        position: relative;
    }
</style> 
```

它对我有用..调整它以适合您的情况..希望它有所帮助！

# jquery - html内容的onchange事件

> ID：15780773
> 
> 赞同：0
> 
> 时间：2013-04-03T06:57:04.190
> 
> 标签：jquery

我有一个`textarea`, 并使用[**一个 JQuery 插件**](http://www.sceditor.com/)将它转换为一个简单的 HTML 编辑器。

问题是我不知道如何将 onchange 事件分配给 html 编辑器，因为将事件分配给 textarea 本身是行不通的。

该插件创建一个 iframe，这个 iframe 中的 HTML 是在 html 编辑器上显示的 html。

我还设法使用以下方法获取 HTML 内容：

```
var html = $("#txt_extradata").closest("tr").find(".sceditor-container iframe").contents().find("html").html(); 
```

现在，我如何编写一个事件来检测这个 html 是否随时间变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:40:31.080

您需要使用上下文选择器绑定到 iframe 的主体，如下所示：

```
$(function() { 
     var ctx = $(".sceditor-container iframe").contents();
     $('body', ctx).blur(function() {
         //detect changes to the widget
     });
}); 
```

这会将 keydown 事件绑定到 iframe 的 body 标签。您可能会决定 keydown 不是您需要的适当事件，但无论如何，这将使您到达可以简单地绑定所需事件的位置。

**编辑：**

这是一个用于概念验证的 jsfiddle [http://jsfiddle.net/SJQZN/](http://jsfiddle.net/SJQZN/)

不幸的是，我无法让 jsfiddle 从他们的 github 存储库中正确加载 css，所以我自己做了一个快速破解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:46:08.137

结合[此处](https://stackoverflow.com/a/1639342/1468180)和[此处](https://stackoverflow.com/a/11338644/1468180)的答案。你现在有这个

```
$(".sceditor-container iframe").contents().find("body")
    .on("input propertychange", function() {
        // your method.
    }); 
```

# android - android中内部Sqlite db的大小

> ID：15780774
> 
> 赞同：0
> 
> 时间：2013-04-03T06:57:06.613
> 
> 标签：android, sqlite, android-intent

在 Android 中有一个内置的 SQLite DB。我们如何获得内置 Sqlite DB 的最大大小？

有人说这取决于设备内部存储器。如果是这样，保险柜应用程序如何隐藏大量数据（如像素、视频、应用程序等）。

谁能给我一个明确的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:23:40.090

我读过`sqlite`数据库文件的最大大小为 140 TB。因此，在手机上，它通常受到您的大容量内存大小（2 gd 等）的限制。内存大小将限制您可以从查询中检索多少数据。Android 游标的结果限制为 1 MB。

此[链接](http://www.sqlite.org/limits.html)可能有助于解决 sqlite 数据库中值的其他限制。我希望这有帮助。

# javascript - 如何在html中显示不同颜色的进度条

> ID：15780775
> 
> 赞同：1
> 
> 时间：2013-04-03T06:57:08.137
> 
> 标签：javascript, jquery, html, jquery-ui, progress-bar

我希望进度条应该有三个不同的，比如说从 o t0 40 是蓝色 40 到 80 是红色，从 80 到 100 是绿色。我搜索了很多，但我只得到简单的条移动。有什么办法可以做到这一点。

我正在使用我得到的以下代码，但它也没有移动。

```
 <!doctype html>
  <html lang="en">
  <head>
  <meta charset="utf-8" />
  <title>jQuery UI Progressbar - Default functionality</title>
  <link rel="stylesheet"  href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
   $(function() {
   $( "#progressbar" ).progressbar({
    value: 37
  });
 });

 </script>
 </head>
 <body>
 <div id="progressbar"></div>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:20:02.797

想到了两种不同的方法（如果您不想使用 chermanarun 提到的 CSS3 渐变：

1.  背景图像：如果您知道进度条的宽度，只需创建一个在您指定的点设置三种颜色的背景图形。将此背景应用于进度指示器。

2.  分层条：这要求您将前两个条的增长“限制”在进度的上限范围内（因此条 1 的宽度不能超过 40%，条 2 的宽度不能超过 80%）。使用 CSS 定位和 z-indexing 使所有条具有相同的左侧/顶部位置，并将它们堆叠（顶部的条 1，中间的条 2，底部的条 3）。随着加载进度条的增长，前两个将停止在其上限，允许下面的条继续前进，给人一种无缝进度的错觉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:50:43.917

听起来您想在更改事件中挂钩并检查进度在哪里，然后从中重新着色条。看着[API](http://api.jqueryui.com/progressbar/#event-change)它看起来是双重的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:04:31.663

我不知道它在 Jquery UI 中是怎样的，但你可以简单地使用 CSS 并制作 2 层，一层是蒙版，另一层是图像，其中 40% 的宽度是蓝色，然后是 10 个 40-80 红色和 80-100 个绿色你需要发现它。

在 JQuery 上，您需要隐藏此蒙版，它会向您显示下面的图层。

我用谷歌搜索，我发现主题在哪里回答你的问题

[jQuery UI：如何更改 ProgressBar 的颜色？](https://stackoverflow.com/questions/1476573/jquery-ui-how-to-change-the-color-of-a-progressbar)

核实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:40:25.117

尝试将此 Css 代码应用于您的#progressbar

```
#progressbar{
width:300px;height:14px;
 background-color:#00aeff;
 filter:progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=#00aeff, endColorstr=#ff0000);
 background-image:-moz-linear-gradient(left, #00aeff 40%, #ff0000 80%,#2fff00 100%);
background-image:linear-gradient(left, #00aeff 40%, #ff0000 80%,#2fff00 100%);
background-image:-webkit-linear-gradient(left, #00aeff 40%, #ff0000 80%,#2fff00 100%);
background-image:-o-linear-gradient(left, #00aeff 40%, #ff0000 80%,#2fff00 100%);
background-image:-ms-linear-gradient(left, #00aeff 40%, #ff0000 80%,#2fff00 100%);
 background-image:-webkit-gradient(linear, left bottom, right bottom, color-stop(40%,#00aeff), color-stop(80%,#ff0000),color-stop(100%,#2fff00));} 
```

# javascript - 如何确保 jasmine 的 expect() 在测试中被执行

> ID：15780776
> 
> 赞同：4
> 
> 时间：2013-04-03T06:57:10.157
> 
> 标签：javascript, angularjs, jasmine

我对角度应用程序进行了这样的测试：

```
it("should return false if all products loaded", function () {
    $httpBackend.flush();
    scope.loadNextProducts(15).then(function (isThereMoreToLoad) {
        expect(isThereMoreToLoad).toBe(false);
    });
    scope.$apply();
}); 
```

如果我忘记写以太`$httpBackend.flush();`或`scope.$apply();`测试将永远无法到达`expect()`部分并且测试将成功。

有没有办法确保茉莉花测试执行了expect（），如果没有，那么它应该失败？

例如指定预期的`it()`数量`expect()`，或者告诉 jasmine 每个测试应该至少执行一个，`expect()`否则它应该失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:21:20.830

尝试这个：

```
 afterEach(function() {
    $httpBackend.verifyNoOutstandingExpectation();
    $httpBackend.verifyNoOutstandingRequest();
  }); 
```

那应该，嗯，验证你的测试没有没有被访问过的期望，它还应该验证你所有的预期服务器调用都被调用了。

[您可以在Angular $backend 文档](http://docs.angularjs.org/api/ngMock.%24httpBackend)中找到更多信息

# gcc - 交叉编译，缺少包

> ID：15780786
> 
> 赞同：1
> 
> 时间：2013-04-03T06:57:38.733
> 
> 标签：gcc, cross-compiling, raspberry-pi

我正在使用 Linux PC x86_64。

我已经为 raspberry pi 设置了一个交叉编译工具链，我可以编译基本的 helloworld 并在 raspberry 上运行它。

我一直在编译一些开源程序，因为`./configure`抱怨缺少软件包，例如：

```
configure: No package 'glib-2.0' found 
```

我正在使用这个。`./configure --host=arm-linux-gnueabihf`进行交叉编译，在出现上述错误之前它看起来不错。

我应该告诉`./configure`使用目标系统中的库还是？怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-04-21T14:03:56.133

将选项传递给配置脚本，以便它找到开发头文件和库。它使用`LDFLAGS`和`CFLAGS`。

# objective-c - 将日期和时间转换为本地日期和时间格式

> ID：15780788
> 
> 赞同：0
> 
> 时间：2013-04-03T06:57:44.163
> 
> 标签：objective-c, nsdate

在设备的当前（本地）日期和时间转换日期和时间时遇到问题。我从 API 获取格式为 2013-04-03 01:07:56 +0000 的日期，我想将此日期转换为本地日期和时间格式并显示。谁能建议我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:02:35.103

只需在dateFormatter中设置timeZone，这段代码就够了

```
NSString *dateString = @"24 08 2011 09:45PM";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd MM yyyy hh:mma"];
NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"BST"];
[dateFormatter setTimeZone:sourceTimeZone];
NSDate *dateFromString = [dateFormatter dateFromString:dateString]; 
```

dateFromString 现在将具有日期 24 08 2011 08:45PM(GMT).. 然后将其转换为具有本地时间的字符串，只需编写以下代码，

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[formatter setTimeZone:[NSTimeZone localTimeZone]];
[formatter setLocale:[NSLocale systemLocale]];

[dateFormatter setDateFormat:@"dd MM yyyy hh:mma"];
NSString *stringFromDAte = [dateFormatter stringFromDate:dateString]; 
```

# java - 在 Swing 上渲染视频

> ID：15780791
> 
> 赞同：0
> 
> 时间：2013-04-03T06:58:01.537
> 
> 标签：java, swing, video-processing, xuggler, xuggle

我正在开发一次监控 20 个视频流的应用程序。我将在 JFrame 中有 JFrame 和 20 个框（例如 JPanel）来显示 20 个流。我可以使用 xuggler 加载流和解码，但现在如何在 Swing JPanel 上显示它？

我可以在 SourceDataLine 上播放声音，我的问题只是，如何在 Swing 组件上每秒显示 20 * 30 = 600 个视频帧？

xuggler 还输出 YUV420P 像素格式解码帧，将其转换为 RGB、创建 BufferedImage 并在 Swing 组件上显示是否有开销？

请指导我。我想在摆动组件中一次显示 20 个视频流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:11:04.607

这是我在 Google 上搜索的一些代码，可以[将 YUV420 文件转换为 BufferedImage 帧](http://code.google.com/p/java-yuv/source/browse/trunk/ReadYUV.java?r=8)。您可以将其用作您想要的基础。

您可能也无法在 PC 上每秒处理 600 个视频帧。您必须查看每秒可以转换多少视频帧，然后丢弃其余的帧。

可能，处理 20 个视频源的最佳方法是让 20 个线程抓取一个视频帧，将视频帧转换为 BufferedImage 并将 BufferedImage 传递给事件调度线程 (EDT)，以便 Swing 在相应的 JPanel 上绘图。当线程回来抓取下一个视频帧时，您将自动丢弃 PC 没有时间处理的帧。

# sql-server - sql server 中的函数调用

> ID：15780796
> 
> 赞同：-3
> 
> 时间：2013-04-03T06:58:09.053
> 
> 标签：sql-server

如何在sql server查询的select语句中调用函数？

```
select name,function output() from tab where
name='samp' 
```

在上面的这个查询中如何调用一个函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:02:43.680

只需创建如下所示的查询并执行它...

```
SELECT
   name,
   output(params)
FROM
   tab
WHERE
   nam='samp' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T06:59:19.410

简单地

```
select name, output() from tab where name='samp' 
```

暂时忘记此函数是由您创建的，并认为这是一个内置函数，如`Count()`or `Max()`。我们怎么称呼他们？

```
select Count(*) from tab 
```

# shell - 如何通过 shell 脚本中的导出语句传递 HTML 代码

> ID：15780799
> 
> 赞同：0
> 
> 时间：2013-04-03T06:58:12.093
> 
> 标签：shell, sed, export

我正在尝试通过变量将 HTML 代码导出到另一个文件，但是在尝试导出时，我收到了类似 .

我要导出的值

```
> VALUESTRING=<a class="modal::content:serviceloc:width:780:height:500 button lq_login"></a> 
```

错误信息：

```
>line 13: lq_login"': not a valid identifier  line 13:
> export: `<span': not a valid identifier 
```

任何人都可以检查一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:01:20.160

对变量值使用正确的引号：

```
export VALUESTRING='<a class="modal::content:serviceloc:width:780:height:500 button lq_login"></a>' 
```

# javascript - 将带有文本的图像作为图像保存到javascript中的照片库

> ID：15780809
> 
> 赞同：4
> 
> 时间：2013-04-03T06:58:49.477
> 
> 标签：javascript, cordova

我有一个临时图像，我想使用 javascript(phonegap) 将其复制到画廊。有什么帮助吗？

```
function save() {
  var image = document.getElementById("tempImg");
  //upload image to gallery of mobile . But how??
} 
```

我的图像包含照片和文字一起...

我只想安排所有 div 数据，包括 div 内的图像，上面有一些文本，并将其保存为 javascript 中任何格式 .jpg、png 等的完整图像。我提到了这个链接，但那是画布到图像，但我想要 div 到图像。 [画布到 PhotoLibrary [Phonegap]](https://stackoverflow.com/questions/9912936/canvas-to-photolibrary-phonegap)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T23:13:14.017

您可能想查看此网址：[http](http://html2canvas.hertzen.com/) ://html2canvas.hertzen.com/ 。

使用这个脚本，您可以将您的 div 转换为画布，然后使用“Canvas to PhotoLibrary [Phonegap]”来完成剩下的工作。

您的代码将如下所示：

```
function save() {
    var image = document.getElementById("tempImg");
    html2canvas(image, {
        onrendered: function(canvas) {
            // use "Canvas to PhotoLibrary [Phonegap]" on the canvas variable
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:54:06.263

您使用会话存储（或）本地存储保存它

节省：

```
var z1,z2,z3;
function save() {
var a=$("#theme1_text").val();
var b=$("#image_div").css("background-image");              
var c=$("#background_theme1").css("background-image");
sessionStorage.z1=a;
sessionStorage.z2=b;
sessionStorage.z3=c;
    }; 
```

看法：

```
function view() {
$("#theme1_text").val(sessionStorage.z1);
$("#image_div").css("background-image",sessionStorage.z2);
$("#background_theme1").css("background-image",sessionStorage.z3);
    }; 
```

# authentication - 使用 GPG 进行身份验证

> ID：15780810
> 
> 赞同：3
> 
> 时间：2013-04-03T06:58:49.773
> 
> 标签：authentication, digital-signature, signing, gnupg

我一直在阅读有关带内和带外身份验证的信息。我知道一个人可以签署他/她自己的 GPG 密钥，然后其他人可以使用他们的指纹验证签名者。

我还阅读了发布在以下位置的 GPG 密钥签名问题：[https ://stackoverflow.com/questions/34234/how-does-gpg-key-signing-work-and-how-is-it-done](https://stackoverflow.com/questions/34234/how-does-gpg-key-signing-work-and-how-is-it-done)

这种类型的身份验证是否容易受到中间人攻击？如何在不使用数字签名的情况下完全验证身份？

PS：我研究了以下身份验证方式：GPG 签名消息（电子邮件）、SMS（带外）、使用共享秘密密码、社会主义百万富翁协议的应用和基于零知识的不可否认身份验证。

上面列出的哪一项最适合防止中间人攻击并提供大量身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:52:57.510

防止中间人攻击的是你的大脑 :-) 签署密钥时，GPG 会询问你是否真的检查过密钥所有者的身份，就像 GPG 的操作指南（[例如这个](http://www.dewinter.com/gnupg_howto/english/GPGMiniHowto-3.html#ss3.6)）警告你要小心你在这里做：

> 只有当您绝对确定密钥是真实的时，您才应该将密钥签名为真实的！！！。因此，如果您确定自己获得了密钥（例如在密钥签名方中），或者您通过其他方式获得了密钥并使用指纹机制进行了检查（例如通过电话）。您永远不应该基于任何假设签署密钥。

签署密钥时，您有责任验证密钥所有者的身份。与 CACert（它有一个[如何验证身份的定义程序](http://wiki.cacert.org/AssuranceHandbook2#Checklist)）相比，没有如何进行此验证的一般政策。然后，另一方面，GPG 让您信任的人来引入新密钥。

这表示：

*   您应该熟悉如何验证密钥实际上属于密钥 ID 所说的人。CACert 指导方针（个人会议、检查官方文件、交换指纹）适用于您不认识的人，适用于您的好朋友个人交换指纹（或如果您认出对方的声音，则通过电话验证指纹）你的朋友）也应该足够了
*   您应该只设置属于您绝对确定他们理解签名含义并仔细检查的人的密钥的信任属性，如上所述。

# java - 带有最少括号数的中缀后缀

> ID：15780817
> 
> 赞同：4
> 
> 时间：2013-04-03T06:59:13.637
> 
> 标签：java, infix-notation, postfix-notation

我正在寻找算法后缀来中缀符号，这将产生最小数量的括号。

我发现了，但它会产生很多很多括号：[http ://tajendrasengar.blogspot.com/2011/09/postfix-to-infix-algorithm.html](http://tajendrasengar.blogspot.com/2011/09/postfix-to-infix-algorithm.html)

**例如**

输入：

```
<ONP>abcd*/+~ 
```

结果：

```
<INF>~(a+b/(c*d)) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T07:33:09.443

如果你真的想要尽可能少的括号，你需要做什么，类似于你链接到的算法所说的。然而...

*   您应该将每个*复合*操作数的运算符存储在`Stack`. 即，操作数中使用的最后一个运算符。您可以为此使用一秒钟`Stack`。如果操作数不是复合的，则可以添加`null`到第二个`Stack`，因为没有运算符。
*   不要`String`用括号封装结果。这是在算法的其他地方完成的（见下文）。

当您从每个`Stack`s 中弹出前两个值时，您手头有 3 个运算符：

*   当前运营商
*   第一个操作数中最后使用的运算符（如果该运算符存在）
*   第二个操作数中最后使用的运算符（如果该运算符存在）

根据这三个运算符，您应该在组合它们之前用括号封装第一个和/或第二个操作数。

您可以使用运算符优先级来确定是否应该有括号。顺序是这样的：`(none), {"*", "/"}, {"+", "-"}`

*   当且仅当其运算符的优先级低于当前运算符时，第一个操作数才需要括号。
*   如果第二个操作数的运算符的优先级低于当前运算符，或者在当前运算符为 or 的情况下它们具有相同的优先级，则第二个操作数需要`"/"`括号`"-"`。

其余的应该按照您的算法描述的方式完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-09T16:47:12.647

这是实现：

```
public class PostfixToInfixConverter implements ExpressionConverter {

@Override
public String convert(String postfix) {
    String[] expressions = postfix.split("\\s");
     Deque<Expression> stack = new LinkedList<Expression>();
    for (String exp : expressions) {
        if (exp.equals("+") || exp.equals("-")) {
            String right = stack.pop().getExpression();
            String left = stack.pop().getExpression();
            Expression newExp = new Expression(right + exp + left, exp);
            stack.push(newExp);
        } else if (exp.equals("*") || exp.equals("/")) {
            String right = correctExpression(stack.pop());
            String left = correctExpression(stack.pop());
            stack.push(new Expression(right +  exp +  left, exp));
        } else {
            stack.push(new Expression(exp, ""));
        }
    }
    return stack.pop().getExpression();
}

private String correctExpression(Expression exp) {
    String result = exp.getExpression();
    if (exp.getOperatorUsed().equals("+") || exp.getOperatorUsed().equals("-")) {
        result = "(" + result + ")";
    }
    return result;
}

private static class Expression {
    String expression;
    String operatorUsed;
    public Expression(String exp, String operator) {
        this.expression = exp;
        this.operatorUsed = operator;
    }
    public String getExpression() {
        return expression;
    }
    public String getOperatorUsed() {
        return operatorUsed;
    }       
} 
```

}

这是单元测试

```
@Test
public void test() {
    ExpressionConverter converter = new PostfixToInfixConverter();
    assertThat(converter.convert("1 2 * 3 4 * + 5 *"), equalTo("5*(4*3+2*1)"));
    assertThat(converter.convert("a b + c + 2 *"), equalTo("2*(c+b+a)"));
} 
```

# javascript - 如何解决 IE8 中第 no 行的内存不足问题

> ID：15780821
> 
> 赞同：0
> 
> 时间：2013-04-03T06:59:25.180
> 
> 标签：javascript, highcharts

使用 highcharts 时，我们在 IE8 中内存不足：

![在此处输入图像描述](https://i.stack.imgur.com/M1stW.jpg)

如何在 web 应用程序（尤其是 Internet Explorer）中找出 java 和 javascript 中的内存泄漏？？？

在此先感谢您的帮助...！

# xml - 使用 LINQ 加载 XML 文件时出错并在加载后更改 XML 文件

> ID：15780823
> 
> 赞同：1
> 
> 时间：2013-04-03T06:59:26.373
> 
> 标签：xml, linq, c#-4.0, linq-to-xml

我有一个如下的xml文件。

文件名：myapp.config

```
<configuration>
  <appSettings>
  <add key="Key1" value="false" />
    <add key="Key2" value="5893893"/>
    <add key="key3" value="44123"/>
  </appSettings>
</configuration> 
```

我想将此 xml 文件加载到 datagridview 中。

我正在使用 Linq to XML 但无法加载它。

使用代码如下

```
 var q = from c in xmlDoc.Root.Descendants("configuration").Elements("appSettings")
                select new
                {
                    myKey = c.Element("add").Attributes("key"),
                    myValue = c.Element("add").Attribute("Value").Value

                };

dataGridView1.DataSource = q.ToList(); 
```

在查询的结果集中，我收到消息为“Empty =”Enumeration 没有结果“”。

上面的 LINQ 语句出了什么问题。

同样在加载 XML 文件后，我想编辑这些值并保存回 XML 文件。我怎样才能完成这项任务。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:00:48.650

Xml 区分大小写，您应该使用小写的属性和元素名称。你也有错误的元素选择。`configuration`是 xml 的根，您选择的是单个`appSettings`元素，而不是选择里面的所有`add`元素。以下是查询的外观：

```
var q = from a in xmlDoc.Descendants("appSettings").Elements("add")
        select new
        {
             myKey = (string)a.Attribute("key"), // also here use Attribute
             myValue = (string)a.Attribute("value")
        }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:03:03.577

`xmlDoc.Root`已经指向`configuration`元素，所以你不能查询`.Descendants("configuration")`，因为它不会返回任何元素。

您还应该将元素/属性名称更改为正确的名称 - 它们区分大小写。

`(string)XElement`并且`(string)XAttribute`也更好`XElement.Value`，因为即使没有找到元素/属性，它也能正常工作。在那种情况下会抛出with`.Value`方法。`NullReferenceException`

```
var q = from c in xmlDoc.Root.Elements("appSettings")
        select new
        {
            myKey = (string)c.Element("add").Attribute("key"),
            myValue = (string)c.Element("add").Attribute("value")

        }; 
```

# objective-c - awakeFromNib() 和 windowDidLoad()

> ID：15780829
> 
> 赞同：-1
> 
> 时间：2013-04-03T06:59:56.653
> 
> 标签：objective-c, macos, cocoa

谁能解释 awakeFromNib()、windowDidLoad()、init() 的作用？我正在使用从 NSWindowController 继承的类，我发现优先级为 -init()、-awakeFromNib()、-windowDidLoad()。我想知道这些方法究竟执行了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:02:53.620

**`init`**是第一个被调用的方法。这会初始化 self 和所有 ivars、属性等。

**`awakeFromNib`**之后调用`init`。当一个 nib 被加载时，nib 加载器分配并初始化所有对象，然后连接它们的所有出口和动作。由于发生这种情况的顺序，您无法访问初始化程序中的插座。您可以尝试，但它们都将为零。连接所有出口和操作后，nib 加载器将 awakeFromNib 发送到 nib 中的每个对象。在这里您可以访问 outlet 以设置默认值或在代码中进行配置。

**`windowDidLoad`**是一个委托方法，当窗口完全加载时调用。在接收者拥有的窗口被加载后发送。默认实现什么也不做。

# android - 我如何获得适用于 android 的 paypal jar 文件？

> ID：15780831
> 
> 赞同：1
> 
> 时间：2013-04-03T07:00:00.713
> 
> 标签：android, sdk, jar, paypal, integration

我已经在[https://developer.paypal.com/](https://developer.paypal.com/)中搜索过，任何人都可以帮我找到这个以及如何将 paypal 与 android 集成，请建议我任何有用的链接

我绑定了这个链接

[http://androiddevelopement.blogspot.in/2011/04/adding-paypal-payment-in-android.html](http://androiddevelopement.blogspot.in/2011/04/adding-paypal-payment-in-android.html)

```
<activity android:name="com.paypal.android.MEP.PayPalActivity"
android:theme="@android:style/Theme.Translucent.NoTitleBar"
android:configChanges="keyboardHidden|orientation/>

<uses-permission android:name="android.permission.INTERNET"/>

<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:07:22.623

从提供的链接下载 jar 文件并将其添加到 libs 文件夹 - [https://www.x.com/sites/default/files/PayPal_MECL_1.0_Android-Developer-Package_0.zip](https://www.x.com/sites/default/files/PayPal_MECL_1.0_Android-Developer-Package_0.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T08:03:40.407

您可以从此链接下载 jar 文件 [。PAYPAL的 jar 文件](http://www.java2s.com/Open-Source/Android_Free_Code/App/Download_Free_code_PayPal_Android_SDK.htm)

# c# - System.IO.IOException：身份验证失败，因为远程方已关闭传输流

> ID：15780834
> 
> 赞同：0
> 
> 时间：2013-04-03T07:00:08.233
> 
> 标签：c#, web-services, remote-access

我正在创建一个 Web 服务（在 .NET 3.5 中）以根据域名获取远程服务器的 SSL 证书信息，并且我有一个客户端，它是一个调用该服务的控制台应用程序。目前对我来说有 11 个域名。我能够获取除一台以外的所有服务器的 SSL 信息。

我的代码是：

```
 using (TcpClient client = new TcpClient())
    {            
        client.Connect(strDNSEntry, 443);

        SslStream ssl = new SslStream(client.GetStream(), false);
        try
        {
            ssl.AuthenticateAsClient(strDNSEntry);    //Error thrown here
        }
        catch (AuthenticationException e)
        {
            log.Debug(e.Message);
            ssl.Close();
            client.Close();
            return cert;
        }
        catch (Exception e)
        {
            log.Debug(e.Message);
            ssl.Close();
            client.Close();
            return cert;
        }
        cert = new X509Certificate2(ssl.RemoteCertificate);
        ssl.Close();
        client.Close();
        return cert;
    } 
```

错误是

> *"[System.IO.IOException] = {"身份验证失败，因为远程方已关闭传输流。"}"。*

当我在 SSLStream 调试期间检查时，我发现错误为“

> *此操作仅允许使用成功验证的上下文”。*

那是因为我没有足够的凭据是抛出错误还是服务有任何问题？我还尝试对该服务器进行远程桌面连接，但无法连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:20:23.897

也许您可以使用“Windows Communication Foundation”WCF 框架，并创建一个服务类，然后使用 SSL 传输配置正确配置客户端/服务器 TCP 绑定参数。

如果你尝试这样做，我稍后会给你一个测试用例。

# php - 如何仅在访问规则数组中允许“http”

> ID：15780835
> 
> 赞同：0
> 
> 时间：2013-04-03T07:00:09.433
> 
> 标签：php, yii

在 Yii 中，我正在寻找一种方法，如何将访问我的控制器操作的 url 限制为仅“http”。我正在考虑如何以 Yii 方式获取 url，以便我可以将我的代码放在数组的“表达式”属性中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:43:21.477

您可以在基本控制器 ( `components/Controller.php`) 中编写过滤器方法：

```
public function filterOnlyHttp($filterChain = null) {
    if (Yii::app()->request->isSecureConnection) {
        $this->redirect('http://'.$_SERVER['HTTP_HOST'].Yii::app()->request->requestUri);
    }else
        $filterChain->run();
} 
```

它会将您重定向`https://`到`http://`请求。[`filters()`](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#filter)您可以为控制器中的方法中的特定控制器操作配置此过滤器：

```
public function filters() 
{
    return array(
        'httpOnly',
    );
} 
```

如果您通常希望重定向*所有*请求，那么您`https`也可以将`if`上述内容（不包括该`else`部分）放入`init()`您的基本控制器的方法中`components/Controller.php`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T07:39:58.610

试试 defaultScheme/validSchemes

数组（'url'，'url'，'defaultScheme' => 'http'）

数组（'url'，'url'，'validSchemes' => 数组（'http'））；

检查此以获取更多信息[http://www.yiiframework.com/wiki/56/#hh23](http://www.yiiframework.com/wiki/56/#hh23)

# php - 如何在 php 的页面加载中显示固定图像？

> ID：15780837
> 
> 赞同：0
> 
> 时间：2013-04-03T07:00:13.810
> 
> 标签：php, mysql

我有一个 php 页面，用户可以通过下拉列表选择一个类别，单击“开始”按钮后，该类别的相关图像将显示在数据库下拉列表下方的页面上。这工作正常。现在，我想根据用户的选择，每次在页面加载时显示第一个下拉列表类别的图像。我想我的观点大家都很清楚。例如，下拉列表中的第一个类别是**Featured art**，在加载与**Featured art**相关的 php 页面图像时，始终显示在页面上。之后，用户可以通过从下拉列表中更改类别来更改它。请帮帮我。这是我的完整代码：

```
 <body>
 <?php
 include ('connect-db.php');
  ?>

<form name="product" method="post" action="">
<table align="right" width="10%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td>Category</td>
<td>
<select name="category">

 <?php
 $sql = "SELECT id, art_name FROM category;";
 $result = mysql_query($sql);
 while ($row = mysql_fetch_assoc($result)) {
?>

<option value="<?= $row['id']; ?>"><?= $row['art_name']; ?></option>

<?php } ?>
</select>
</td>
</tr>
<tr>
 <td>&nbsp;</td>
 <td><input name="go" type="submit" value="Go" /></td>
 </tr>
   </table>
 </form>

 <div align="center">

  <ul class="display">
  <?php
   $id = (int)$_POST['category'];
   $sql_search = "SELECT id, categoryid, path FROM list WHERE categoryid = $id";
  $search = mysql_query($sql_search);
   if (isset($_POST['go'])) {
   while ($row = mysql_fetch_assoc($search)) {
  ?>

  <li><a href="<?= $row['path']; ?>" class="highslide" onclick="return hs.expand(this)"><img src="<?= $row['path']; ?>" border="0"></a></li>
  <?php }

  }

  else {

   }

    ?>
    </ul>
   </div>
   </body> 
```

提前致谢！：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:29:08.290

您可以尝试使用`GET`request 而不是`POST`. 使用它，您可以检查如下：

```
<?php

$get_id = $_GET['category'];
if($get_id == null){
    $get_id = <default-value-say-1>;
}
$id = (int)$get_id;

?> 
```

此外，在下拉列表中，设置默认/选择的第一个类别。

当用户选择另一个选项时，重定向到**url?category=<selected-id>**

> 这不是复制粘贴解决方案，请以此为起点，遵循 PHP 或您选择的任何 PHP 框架进行开发的最佳实践。

希望这可以帮助！

维韦克

# asp.net - Google Chrome 中的 DevExpress UploadControl javascript 错误

> ID：15780848
> 
> 赞同：1
> 
> 时间：2013-04-03T07:00:57.290
> 
> 标签：asp.net, google-chrome, asp.net-mvc-4, devexpress, favicon

我在我的项目中使用 Devexpress UploadControl for MVC。我正在使用弹出窗口来上传放置文件上传控件的文件。如果我多次单击按钮触发该弹出窗口，则上传控制文本显示为“未定义”。此问题仅在 Google Chrome 中发生

见截图 ![上传异常](https://i.stack.imgur.com/6O4VA.jpg)

UploadControl 的代码使用如下：

```
<dl class="uploadProviderDoc">
            @Html.DevExpress().UploadControl(settings =>
               {
                   settings.Name = "Document";
                   settings.ClientSideEvents.TextChanged = "function(s,e){$('label[for=lblUploadMsg]').html(' ');}";
               }).GetHtml()
            @Html.Label("lblUploadMsg", " ")
        </dl> 
```

我检查了 Google Chrome 的控制台，发现了引发该错误的代码行。

```
RedefineInputAttributes: function(textBoxCell, index, isNewElement) {
  textBoxCell.id = this.GetTextBoxCellID(index);
  if(this.IsSlUploadHelperEnabled()) {
   if(this.GetSlUploadHostElement())
    this.slUploadHelper.RedefineSlObjectAttributesInHostElement(index + 1, index, isNewElement);
   else
    this.slUploadHelper.RedefineSlObjectAttributes(textBoxCell, index, isNewElement);
  }
  else {
   var inputElement = _aspxGetChildByTagName(textBoxCell, "INPUT", 0);
   inputElement.id = textBoxCell.id + ASPxClientUploadControlIDSuffix.FileInput;
//Uncaught TypeError: Cannot set property 'id' of null (This exception is thrown here)
   inputElement.name = inputElement.id;
  }
  var fakeInputElement = _aspxGetChildByTagName(textBoxCell, "INPUT", this.IsSlUploadHelperEnabled() ? 0 : 1);
  if(fakeInputElement)
   fakeInputElement.id = textBoxCell.id + ASPxClientUploadControlIDSuffix.FileFakeInput;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:29:52.093

此问题可能是由于Chrome V25\V26在当前 Chrome 版本中**[重复请求 favicon，不发送会话 cookie问题造成的。](https://code.google.com/p/chromium/issues/detail?id=180764)**

这是[证明链接](http://www.devexpress.com/issue=B232651)。尝试从该线程实施解决方案。

```
<location path="favicon.ico">
    <system.web>
      <authorization>
        <allow users="?"/>
      </authorization>
    </system.web>
</location> 
```

它有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:43:37.620

你在使用 jQuery 吗？看起来[DevExpress 支持中心有一个未解决的问题](http://www.devexpress.com/Support/Center/p/B196730.aspx)。

如果是这种情况，请将演示问题的示例项目提交给 DevExpress，他们会为您解决问题。

# wpf - 使用触发器设置或更改转换器？

> ID：15780849
> 
> 赞同：1
> 
> 时间：2013-04-03T07:00:58.610
> 
> 标签：wpf, xaml, data-binding, datatrigger

这是我的带有转换器的文本框：

```
 <TextBox Text="{Binding TimbraturaSelezionata.OrarioMinuti, Converter={StaticResource Minuti2HHmmConverter}}" Margin="5,0"/> 
```

我寻找一种仅在有效需要时设置或更改转换器的方法。事实上，我想将该 TextBox 放在通用用户控件中，并仅在满足特定条件时应用转换器。我想到的唯一解决方案是使用**ContentControl**并使用两个**DataTrigger**设置其模板，一个在 TextBox 内使用 Converter，一个不使用。我希望找到一种更清晰的方法来实现我的目标。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:11:00.487

由于您已设置触发器。这是一个例子。希望能帮助到你;

```
<TextBox x:Name="MyTextBox" Text="{Binding TimbraturaSelezionata.OrarioMinuti}" Margin="5,0">
    <i:Interaction.Triggers>
      <ei:DataTrigger Value="False"
                      Binding="{Binding YourCondition, ElementName=MyTextBox}">
          <ei:ChangePropertyAction PropertyName="Text"
                                   Value="{Binding TimbraturaSelezionata.OrarioMinuti}" />
      </ei:DataTrigger>
      <ei:DataTrigger Value="True"
                      Binding="{Binding YourCondition, ElementName=MyTextBox}">
          <ei:ChangePropertyAction PropertyName="Text"
                                   Value="{Binding TimbraturaSelezionata.OrarioMinuti, Converter={StaticResource Minuti2HHmmConverter}}" />
       </ei:DataTrigger>
    </i:Interaction.Triggers>
</TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:57:39.137

另一个可行的解决方案如下：

```
<TextBox  Width="100">
            <TextBox.Style>
                <Style TargetType="{x:Type TextBox}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding   ValoreInMinuti}" Value="True">
                            <Setter Property="Background" Value="Red" />
                            <Setter Property="Text" Value="{Binding Quantita, Converter={StaticResource Minuti2HHmmConverter}}" />    
                        </DataTrigger>
                        <DataTrigger Binding="{Binding   ValoreInMinuti}" Value="False">
                            <Setter Property="Background" Value="Yellow" />
                            <Setter Property="Text" Value="{Binding Quantita}" />

                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </TextBox> 
```

请注意，Text 属性仅通过 DataTrigger 设置。在我的具体情况下，我只有两种可能性，一种有转换器，另一种没有。

# php - 使用 codeigniter 从 javascript 在视图中调用控制器

> ID：15780857
> 
> 赞同：0
> 
> 时间：2013-04-03T07:01:35.177
> 
> 标签：php, javascript, codeigniter, jquery, codeigniter-2

嘿伙计们，我在从 javascript 调用控制器方法时遇到了麻烦，请帮助。.

我的看法是

```
<script type="text/javascript">
    function kccbranchselect()
    {
        $.ajax({
        type : 'POST',
        data : 'addreceiptkccbranchid='+ $('#addreceiptkccbranch').val(),
        url : '<?php echo base_url();?>index.php/ctl_dbcont/getmembersbybranch',
        success :   function(data){
                        $('#addreceiptddsmember').val(data);
                    }
        });
    }
</script>
<select id="addreceiptkccbranch" name="addreceiptkccbranch" onChange="kccbranchselect();" tabindex="1" >
    <option value="">--SELECT--</option>
    <?php foreach($branchlist as $value):?>
        <option value="<?=$value['branch_id']?>"><?=$value['branch_name']?></option>
    <?php endforeach; ?>
</select>
<select id="addreceiptddsmember" name="addreceiptddsmember" tabindex="1">
    <?php foreach($member_by_branch as $row) { ?>
        <option value = ""></option>
    <?php } ?>
</select> 
```

我的控制器是

```
function getmembersbybranch()
{
    $this->load->model('mod_user');
    $addreceiptkccbranchid      =   $_POST['addreceiptkccbranchid'];
    $data['member_by_branch']   =   $this->mod_user->member_receipt_dds($addreceiptkccbranchid);
    redirect('view_addreceipts');
} 
```

我通过选择另一个下拉选项来生成一个下拉列表。. 我无法通过放入`url : '<?php echo base_url();?>index.php/ctl_dbcont/getmembersbybranch',`ajax 来访问控制器方法，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:25:01.470

这是一个简单的解决方案

AJAX 请求

```
$.ajax({
    type : 'POST',
    data : 'addreceiptkccbranchid='+ $('#addreceiptkccbranch').val(),
    url : '<?php echo site_url("ctl_dbcont/getmembersbybranch");?>',
    success :   function(data){
                $('#addreceiptddsmember').val(data);
    }
}); 
```

控制器

```
function getmembersbybranch()
{
    $this->load->model('mod_user');
    $addreceiptkccbranchid      =   $_POST['addreceiptkccbranchid'];
    $data['member_by_branch']   =   $this->mod_user->member_receipt_dds($addreceiptkccbranchid);
    $this->load->view('member_by_branch',$data);
} 
```

看法

```
<?php
if($member_by_branch){
    foreach($branchlist as $value):
    ?>
    <option value="<?=$value['member_id']?>"><?=$value['member_name']?></option>
    <?php 
    endforeach;
}
?> 
```

重定向将不起作用。为下拉选项创建一个简单的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:10:52.553

尝试这个：

用这个函数替换你的 js 函数：

```
$("#addreceiptddsmember").live("change",function(){

   var htmlString="";
     $.ajax({
        type:'POST',
        data:'addreceiptkccbranchid='+ $('#addreceiptkccbranch').val(),
        url:'ctl_dbcont/getmembersbybranch',
        datatype:'application/json',
        success:function(data){
          $.each(data,function(i){
             htmlString+="<option  value='"+data[i].branch_id+"'>"+ data[i].branch_name +"</option>"
          });
          $('#addreceiptddsmember').html(htmlString);
     }
  });
}); 
```

在这种情况下，您必须`htmlsting`使用 jquery 制作并附加到选定的列表，它在 php foreach 中将不可用，就像您在视图代码中使用的那样。

也删除

```
redirect('view_addreceipts'); 
```

并替换为：

```
echo json_encode($data);
exit; 
```

在控制器中

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:10:04.380

这里的`redirect`语句是无效的，因为它是一个 AJAX 请求。您必须从服务器发送 html 或 json 响应，您可以在客户端进行处理。例如

```
$data['member_by_branch']=$this->mod_user->member_receipt_dds($addreceiptkccbranchid);
echo $data['member_by_branch']; //assuming its html 
```

所以在客户端，你只需要在你的回调方法中使用这个语句。

```
$('#addreceiptddsmember').html(data); 
```

# iphone - 按钮仅在 iOS6 中隐藏

> ID：15780858
> 
> 赞同：0
> 
> 时间：2013-04-03T07:01:42.897
> 
> 标签：iphone, ios, uibutton, mpmovieplayercontroller

在我的应用程序中，我正在使用 MPMoviePlayer 播放视频。我在电影播放器​​上添加了一个**“跳过广告”**（您可以在电影播放器​​的右侧看到）按钮。它在 iOS5 中运行良好，但是当我在 iOS6 中运行我的应用程序时，当电影播放器​​变为全屏时，该按钮被隐藏。

为什么会发生这种情况……有什么想法吗？帮助我克服这个..提前谢谢

这是在 MPMovieplayer 上添加按钮的代码，以及屏幕截图

```
UIButton *skipButton = [UIButton buttonWithType:UIButtonTypeCustom];
skipButton.frame = CGRectMake(264.0,195.0, 67.0, 25.0);
[skipButton setTitle:@"" forState:UIControlStateNormal];
skipButton.backgroundColor = [UIColor clearColor];
[skipButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal ];
UIImage *buttonImageNormal3 = [UIImage imageNamed:@"skipad.png"];
UIImage *strechableButtonImageNormal3 = [buttonImageNormal3 stretchableImageWithLeftCapWidth:12 topCapHeight:0];
[skipButton setBackgroundImage:strechableButtonImageNormal3 forState:UIControlStateNormal];
UIImage *buttonImagePressed3 = [UIImage imageNamed:@"skipad.png"];
UIImage *strechableButtonImagePressed3 = [buttonImagePressed3 stretchableImageWithLeftCapWidth:12 topCapHeight:0];
[skipButton setBackgroundImage:strechableButtonImagePressed3 forState:UIControlStateHighlighted];
[skipButton addTarget:self action:@selector(skipAction:) forControlEvents:UIControlEventTouchUpInside];

[[[UIApplication sharedApplication] keyWindow] addSubview:skipButton]; 
```

**在 iOS5 -**

![iOS5 - 全屏之前](https://i.stack.imgur.com/dr43E.png)

![iOS5 - 全屏后](https://i.stack.imgur.com/KDIGF.png)

**在 iOS6 -**

![iOS6 - 全屏之前](https://i.stack.imgur.com/knT4o.png)

![iOS6 - 全屏后](https://i.stack.imgur.com/Bir4y.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:07:48.230

BringSubviewToFront 应该可以工作，只要确保你正确使用它。用法是：

```
[skipButton.superview bringSubviewToFront:skipButton]; 
```

如果这不起作用，您可以像这样更改 zPosition：

```
skipButton.layer.zPosition = 1024.0; 
```

# django - 检查 django.test.TestCase 中的模板名称

> ID：15780862
> 
> 赞同：2
> 
> 时间：2013-04-03T07:01:56.880
> 
> 标签：django, templates, testing

我正在尝试为我们的简单应用程序编写测试。虽然，所有测试都运行得很好，但我仍然想检查视图正在呈现或重定向到的模板名称。检查视图呈现什么模板的最佳方法是什么。

也许是这样的：

```
self.assertTrue('test.html' in self.templates) 
```

或者

```
self.assertTrue(self.template.name, 'test.html') 
```

这怎么可能实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-01-06T17:02:34.693

您应该使用`assertTemplateUsed`（[文档](https://docs.djangoproject.com/en/1.10/topics/testing/tools/#django.test.SimpleTestCase.assertTemplateUsed)）：

```
response = self.client.get('/url/')
self.assertTemplateUsed(response, 'test.html') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:31:20.943

从： `response = self.client.get("/my/view/url")`

你可以做

`self.assertEqual(response.templates[0].name, "expected_template.html")`

或者：

`self.assertEqual(response.template[0].name, "expected_template.html")`

因为“模板”和“模板”是同一个数组。此数组列表的后续（非零）条目包括或扩展模板。

# svn - 如何继续在 Subversion 中失败的加载

> ID：15780864
> 
> 赞同：5
> 
> 时间：2013-04-03T07:02:00.257
> 
> 标签：svn, import, svnadmin

我已经开始将颠覆转储加载到存储库中。在它完成之前，我用尽了我的配额并且命令停止了

> <<< 开始新事务，基于原始版本 327 * 编辑路径：XXX/YYY/Makefile ... 完成。svnadmin：无法写入文件'/XXX/db/txn-protorevs/2738-24o.rev'：磁盘配额超出

我已经要求更多配额，但现在我不确定如何继续导入。我应该简单地重做相同的命令吗？

```
svnadmin load --parent-dir Software/xxx_modules /XXX/YYY < ~/xxx.svn.dmp 
```

或者有没有办法在失败的版本（327）处重新开始导入？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T13:56:35.613

这就是我最后是如何做到的。知道导入修订版 327 时*加载*失败：

```
# Move the first 4 lines of the dump to new file
head -4 ~/xxx_modules.svn.dmp > partial.dump

# Find out where is the beginning of revision 327 that failed
grep -n "Revision-number: 327" ~/xxx_modules.svn.dmp

# Copy content of dump from that line (change X)
tail -n +X ~/xxx_modules.svn.dmp >> partial.dump

# Load using this partial dump
svnadmin load --parent-dir Software/xxx_modules /xxx/zzz/ < partial.dump 
```

# java - ProGuard 保留类名但更改包名

> ID：15780865
> 
> 赞同：13
> 
> 时间：2013-04-03T07:02:14.717
> 
> 标签：java, proguard

想要更改包名但需要保持类名不变。任何的想法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T16:31:33.590

ProGuard 没有标准选项来重命名包，但保留它们的简单类名。

您可以手动创建一个 ProGuard 映射文件，其行如下：

```
com.example.MyClass -> a.MyClass:
com.example.MyOtherClass -> a.MyOtherClass: 
```

然后您可以使用该选项`-applymapping mapping.txt`

# git - 提交时是否可以让 git 忽略 UTF-8 BOM？

> ID：15780867
> 
> 赞同：7
> 
> 时间：2013-04-03T07:02:20.020
> 
> 标签：git

我有一些 UTF-8 编码的文本文件，是否可以让 git 在提交时忽略 UTF-8 BOM？我知道 git 可以自动转换不同的 EOL ( `"\r"`, `"\n"`, `"\r\n"`)，但是我可以让 git 忽略 BOM 并只提交文件内容吗？

PS：我已经有一个删除文本文件UTF-8 BOM的工具，但是不方便，每次提交前都要运行它，如果有办法让git自动处理BOM会更方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:04:49.660

使用专为此目的设计的[`pre-commit`钩子。](http://codeinthehole.com/writing/tips-for-using-a-git-pre-commit-hook/)

# java - 在 JSON 字符串中插入节点

> ID：15780870
> 
> 赞同：0
> 
> 时间：2013-04-03T07:02:35.260
> 
> 标签：java, json, gson, json-simple

使用[Google Gson](http://code.google.com/p/google-gson/)库如何在 JSON 字符串的根节点中注入元素？

使用 JSON.Simple 很容易：

```
 String json = ...
        JSONObject jsonObj = (JSONObject) JSONValue.parse(json);
        jsonObj.put("hey", "yow!"); 
        json = jsonObj.toJSONString(); // Now we have injected a node element 
```

我一直在想如何用 Gson 做到这一点。你可能会问，当我可以使用 JSON.Simple 库来做到这一点时，我为什么需要 Gson；答案是，库有一个方便的对象序列化/反序列化功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:07:30.703

代码惊人地相似：

```
String json = ...;
JsonObject jsonObj = (JsonObject) new JsonParser().parse(json);
jsonObj.addProperty("hey", "yow!");
json = jsonObj.toString(); 
```

# jsf-2 - 无法使用构造函数注入托管属性

> ID：15780871
> 
> 赞同：0
> 
> 时间：2013-04-03T07:02:40.633
> 
> 标签：jsf-2

我正在尝试注入 @ManagedProperty(value = "#{ticketDataBean}")。我能够做到这一点，但现在我已经声明了一个构造函数，从那时起它就失败了。请指导。我的代码片段

```
@ManagedProperty(value = "#{ticketDataBean}")
private TicketDataBean ticketDataBean; 

  public class TicketDataBean extends CreateTicketData implements Serializable {
   private static final long serialVersionUID = 1L;
private String category;
private TicketingService service;
private static final transient Logger LOGGER = LoggerFactory.getLogger(TicketDataBean.class);

public TicketDataBean(final TicketingService service) {

    final net.atos.portlet.ticketing.model.UserInfo originalUser;
    this.service = service;
    originalUser = service.getDefaultReceiver();
    receiverId = originalUser != null ? originalUser.getId() : null;
    LOGGER.info("Reciever id in ticketdatabean---->" + receiverId);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:22:07.423

托管 bean 是 POJO，因此它们需要具有非参数构造函数。如果要初始化`service`，可以在`@PostConstruct`. 更好`ManagedBean`的是创建另一个`service`您将能够注入或创建`@Singleton`的 .

```
@ManagedBean
@ApplicationScoped
public class TicketingService {
} 
```

然后你可以用这种方式注入它（不要忘记添加getter/setter to it）

```
@ManagedProperty(value="#{ticketingService}")
private TicketingService service; 
```

`ManagedBeans` [您可以在此处](http://docs.oracle.com/javaee/6/tutorial/doc/bnaqm.html)阅读更多信息。

# postgresql - PostgreSQL：如何备份名称为 A 的数据库并将其加载到名称为 B 的数据库中？

> ID：15780873
> 
> 赞同：0
> 
> 时间：2013-04-03T07:02:42.773
> 
> 标签：postgresql, database-backups, pgadmin

我在同一台服务器上有两个数据库。一个命名为 A，一个命名为 B。Booth 数据库具有相同的结构。我想清空数据库 B 并使用数据库 A 中的数据加载它。这是最好的方法吗？

我试图以纯格式备份数据库 A。然后打开生成的 sql 文件并将每次出现的“A”替换为“B”，然后运行 ​​sql 脚本。这行得通，但我认为这应该是一种将数据从一个数据库移动到另一个数据库的更简单方法。是吗？

我使用“pgAdmin III”作为我的工具，但这不是必需的。

这是我在这里的第一篇文章，希望这个问题是相关的并且结构足够好。我先尝试了谷歌，但发现很难找到有相同问题的人。

提前致谢！/大卫

解决方案：在克雷格的帮助下，我就是这样做的

```
pg_dump -Fc -a -f a.dbbackup A

psql -c 'TRUNCATE table1, table2, ..., tableX CASCADE'

pg_restore dblive.backup -d B -c (not sure if -c was necessary) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:30:22.613

备份：

```
pg_dump -Fc -f a.dbbackup 
```

恢复：

```
psql -c 'CREATE DATABASE b;'
pg_restore --dbname b a.dbbackup 
```

根据需要使用`-U`,`-h`等选项以具有转储、创建和恢复数据库权限的正确用户身份连接到正确的主机。`psql`有关更多信息，请参阅文档（它们`pg_dump`都`pg_restore`采用相同的连接控制选项）。

# internet-explorer - Jenkins 上的 Selenium：IE 未启动

> ID：15780874
> 
> 赞同：2
> 
> 时间：2013-04-03T07:02:43.227
> 
> 标签：internet-explorer, selenium, jenkins

我正在尝试通过 Jenkins 运行一个简单的 Selenium TestSuite。TestSuite 应该针对 IE 运行。我已经下载了 IEDriver 服务器并将其包含在我的“PATH”变量中。

但是，问题在于，一旦我触发构建，该过程似乎会在 IE 应该启动的点停止并永远保持在该模式下。这里的一篇文章建议我应该使用 *iexploreproxy 或 *piiexplore。但即使这些对我也不起作用，并继续给出相同的结果。

在 Selenium 组问题上，尽管有人报告了这一点，但我无法理解他们所说的已提供的修复程序。无论如何，这对我不起作用！有人可以建议我如何解决这个问题吗？

我给出的命令是：`java -jar C:\Selenium_RC\selenium-server-standalone-2.31.0.jar -multiwindow -htmlSuite "*iexplore" "http://www.google.com" "C:\Documents and Settings\PraveenS\Desktop\Daon_Projects\NSTIC\Selenium\TestSuite_Ex1.html" "C:\JenkinsSeleniumResults.html"` 在 Execute Windows Batch Command

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:13:07.610

我遇到了类似的问题，并通过调整有关 IE 用户控制的一些注册表设置找到了解决方案。

修改注册表以包含以下项：HKEY_LOCAL_MACHINE\Software\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_HTTP_USERNAME_PASSWORD_DISABLE

您可能还必须将一个添加到 HKEY_CURRENT_USER 注册表中（否则路径与上述相同）。

添加他们的键后，将 DWORD 添加到“iexplore.exe”的键中，并将值设置为“0”。

希望这能让你启动并运行。

# xml - 在 SOAP 请求中嵌入 XSLT

> ID：15780879
> 
> 赞同：0
> 
> 时间：2013-04-03T07:02:57.557
> 
> 标签：xml, web-services, xslt, soap

我使用的软件将 XML 文件导入工作流，然后使用工作流任务将其导出到 Web 服务。XML 文件如下：

```
 <?xml version="1.0"?>
     <NostroEvent>
      <Id>1</Id>
      <AccountNumber>123</AccountNumber>
      <Debit>100</Debit>
     </NostroEvent> 
```

文件已导入，我正在编写 ExportWS 任务的以下 SOAP 请求，该请求将选择 xml 的所有标签并将它们发送到 Web 服务：（与 Web 服务的连接配置也输入到该任务中在另一部分）

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
     <!--xsl:variable name="nostro">
     <xsl:copy-of select="NostroEvent"></xsl:copy-of>
     </xsl:variable-->
    <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bmt="http://bmt">
     <soapenv:Header/>
     <soapenv:Body>
      <bmt:insertNostro>
       <bmt:Xml><xsl:copy-of select="NostroEvent"/></bmt:Xml>
      </bmt:insertNostro>
     </soapenv:Body>
    </soapenv:Envelope>
    </xsl:template>
    </xsl:stylesheet> 
```

请注意，insertNostro 是 web 方法，而 Xml 是参数，我将从 NostroEvent 开始的一组标记和文本传递给该参数。但它不起作用。我不断收到一个空指针异常，这意味着 Web 服务收到了一个空字符串。我尝试在顶部使用 xsl 变量，但它也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:54:52.723

如果问题是它是 XML 而不是字符串，请尝试执行以下操作：

```
<xsl:template match="/">
    <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bmt="http://bmt">
        <soapenv:Header/>
        <soapenv:Body>
            <bmt:insertNostro>
                <bmt:Xml>
                    <xsl:apply-templates select="NostroEvent" mode="toString"/>
                </bmt:Xml>
            </bmt:insertNostro>
        </soapenv:Body>
    </soapenv:Envelope>
</xsl:template>

<xsl:template match="*" mode="toString">
    &lt;<xsl:value-of select="local-name()"/>&gt;<xsl:apply-templates select="child::node()" mode="toString"></xsl:apply-templates>&lt;<xsl:value-of select="local-name()"/> /&gt;
</xsl:template> 
```

# java - 无法在 Eclipse 中使用 ksoap2

> ID：15780881
> 
> 赞同：0
> 
> 时间：2013-04-03T07:03:07.200
> 
> 标签：java, android, eclipse, soap, ksoap2

我想使用库 ksoap2 在 Android 中发送和接收 SOAP 消息，但我无法让它在 Eclipse 中工作。它不断地给我信息`SoapObject cannot be resolved to a type`。我复制`Soap`了从[这个答案](https://stackoverflow.com/a/6910000/1323666)中得到的类的代码（让它首先工作，然后根据我的需要进行编辑）并使用[这个问题](https://stackoverflow.com/q/7606963/1323666)的导入。我对 Android 开发、Java 和 Eclipse 不是很有经验，所以我可能忽略了一些东西。

```
package com.example.myapp;  
import android.content.Context; 
import org.ksoap2.transport.HttpTransportSE;
import org.ksoap2.SoapEnvelope; 
import org.ksoap2.serialization.SoapObject; 
import org.ksoap2.serialization.SoapSerializationEnvelope;

public class Soap {
    Context context;    
    int viPeriod;
    String vsUserID;
    String NAMESPACE = "http://localhost/soap/";
    String SOAP_ACTION = "http://localhost/soap/bin/SOAP.dll";
    String METHOD_NAME = "SOAP";    
    public String result = null;
    Object resultRequestSOAP = null;

    public Soap(Context context) {
        this.context = context;
    }

    public void SendSoap() {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);    
        request.addProperty("viPeriod", viPeriod);
        request.addProperty("vsUserID", vsUserID);  
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);  
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
            String requestDumpString = androidHttpTransport.requestDump;
            System.out.println("requestDump : " + requestDumpString);

            resultRequestSOAP = envelope.getResponse(); // Output received
            result = resultRequestSOAP.toString(); // Result string

            System.out.println("OUTPUT : " + result);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

在 Eclipse 4.2.2 项目的 libs 文件夹中是文件`ksoap2-android-assembly-3.0.0-jar-with-dependencies.jar`.
![Java 构建路径库](https://i.stack.imgur.com/UX8lu.png) ![Java 构建路径顺序和导出](https://i.stack.imgur.com/QXXE3.png)

我究竟做错了什么？你能指出我正确的方向吗？或者也许建议我以不同的方式解决这个问题。

在此先感谢，敬业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:19:12.123

SoapAction 应该包含命名空间和方法名称。

例如：命名空间="http://sample/";

METHOD_NAME = "sampleMethod";

SOAP_ACTION = 命名空间 + 方法名；

检查响应是肥皂原语还是肥皂对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:17:02.170

我认为您在 lib 文件夹中添加了 ksoap2 jar 文件，将其移动到 libs 文件夹，然后清理项目。这将解决问题。

# android - 其他软件包也在我的 android 应用程序上运行

> ID：15780883
> 
> 赞同：0
> 
> 时间：2013-04-03T07:03:24.670
> 
> 标签：android, xml-parsing

我必须运行我的 android 应用程序，这意味着在我的 logcat 窗口上收到以下消息：

```
 12:05:36.056:  System_process  I/ActivityManager(59): Displayed activity com.xmlparsing/.MainActivity: 581 ms (total 581 ms)
  12:05:41.136:  com.android.defcon   D/dalvikvm(253): GC_EXPLICIT freed 152 objects / 11024 bytes in 60ms
  12:05:46.126:  com.svox.pico   D/dalvikvm(264): GC_EXPLICIT freed 31 objects / 1512 bytes in 50ms
  12:05:51.156:  com.android.setting D/dalvikvm(125): GC_EXPLICIT freed 975 objects / 42392 bytes in 78ms
   12:06:40.666:  com.xmlparsing D/dalvikvm(1131): GC_FOR_MALLOC freed 3884 objects / 321368 bytes in 50ms
  12:06:40.836: com.xmlparsing   D/dalvikvm(1131): GC_FOR_MALLOC freed 3654 objects / 427296 bytes in 48ms
  12:06:41.026: com.xmlparsing D/dalvikvm(1131): GC_FOR_MALLOC freed 4007 objects / 418288 bytes in 45ms
  12:06:41.245: com.xmlparsing D/dalvikvm(1131): GC_FOR_MALLOC freed 4516 objects / 414608 bytes in 54ms
  12:06:41.456: com.xmlparsing  D/dalvikvm(1131): GC_FOR_MALLOC freed 4194 objects / 399504 bytes in 53ms
  12:06:41.616: com.xmlparsing D/dalvikvm(1131): GC_FOR_MALLOC freed 3365 objects / 412104 bytes in 43ms
  12:06:41.666: com.xmlparsing I/System.out(1131): category size6
   12:06:41.666: com.xmlparsing I/System.out(1131): category name is---------------->Photos 
```

这里我的应用程序包是 com.xmlparsing。

但是这里其他包（com.android.defcon，com.svox.pico，com.android.settings）正在启动时运行。这个包只需要更多时间来读取（加载）数据。请检查 time.my xml 文件在秒内读取。为什么该包正在加载。我该如何控制它。请给我解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:08:47.917

您看到的是来自不同进程的日志消息，这些进程正在通过垃圾收集 (GC)。

在任何系统上，无论是 Android 还是其他系统，都可能同时运行多个进程。在 Android 上，这些进程将定期通过垃圾收集以释放内存并保持系统在其有限的资源范围内正常运行。这是预期的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:08:57.147

这些软件包没有“在您的应用程序上”运行。Android 支持多任务处理，因此可以同时运行多个应用程序。

无论如何，您发布的 LogCat 显示它只是一个 GC 调用，这意味着 Android 正在尝试释放内存。你无法控制它。

如果您只想查看来自您的应用程序的 LogCay 消息，请尝试按进程 ID 过滤。

# android - 在 Android API < 11 上，XML Drawable 未扩展到视图大小，或视图未正确继承其父级的高度

> ID：15780884
> 
> 赞同：2
> 
> 时间：2013-04-03T07:03:25.010
> 
> 标签：android, android-layout, xml-drawable

考虑以下布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bg1" >

    <View
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/bg2" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
        <!-- some views here -->
    </LinearLayout>
</FrameLayout> 
```

我使用它来`bg2`保持`bg1`完全`bg2`独立，这样我就可以在不影响其他任何东西的情况下对其应用补间 alpha 动画。

`bg1`并且`bg2`是 XML 可绘制对象。显然，它们应该被缩放到各自视图的尺寸。这通常是这种情况，明确指定它们的尺寸似乎没有多大意义。

不幸的是，在 3/API 11 之前的 Android 版本上，看起来好像大小`bg2`为零。也许两阶段布局测量是错误的（注意`bg2`应该如何从其父级继承其高度，而后者又需要调整到`LinearLayout`高度并将该信息传播到包含的视图`bg2`）。或者视图可能不会接受其父级的高度（尽管我尝试`ImageView`了它没有改变）。

您看到的布局实际上用于列表中的项目。

XML 可绘制对象是有状态的并使用渐变。

你能想出一种同样适用于 Android API 8 到 10 的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:11:34.650

一些测试（子类化`View`、覆盖`onMeasure()`和`onLayout()`）表明`FrameLayout`在旧的 Android 版本中这方面存在缺陷。

由于`FrameLayout`在这种情况下无法将自己的高度向下传递到层次结构中（`View`总是会`0`同时看到`onMeasure()`和`onLayout()`），因此没有明显的方法可以通过子类化来解决这个问题。

那么问题是，是否有另一种方法可以覆盖 Android 2.2 aka API 8 可以正确处理的两个视图。

唉，有。使用 a 也可以实现同样的效果`RelativeLayout`，当然这会带来更多的开销，尽管渲染工作的实际增加应该是有限的。

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bg1" >
    <View
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignTop="@+id/item"
        android:layout_alignBottom="@+id/item"
        android:background="@drawable/bg2" />
    <LinearLayout
        android:id="@+id/item"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
    </LinearLayout>
</RelativeLayout> 
```

# .net - 谷歌日历 api .net

> ID：15780893
> 
> 赞同：0
> 
> 时间：2013-04-03T07:04:17.487
> 
> 标签：.net, google-calendar-api

我正在为 .net 使用 google api 2.0。我使用此代码创建一个新日历：

```
CalendarEntry calendar = new CalendarEntry();
calendar.Title.Text = "Little League Schedule";
calendar.Summary.Text = "This calendar contains the practice schedule and game times.";
calendar.TimeZone =  "America/Los_Angeles";
calendar.Hidden = false;
calendar.Color = "#2952A3";
calendar.Location = new Where("", "", "Oakland");

Uri postUri = new Uri("https://www.google.com/calendar/feeds/default/owncalendars/full");
CalendarEntry createdCalendar = (CalendarEntry) service.Insert(postUri, calendar); 
```

但是，在执行时，返回错误：

**请求执行失败**

在线

CalendarEntry createdCalendar = (CalendarEntry) service.Insert(postUri, calendar);

但是，如果我使用浏览器连接到谷歌日历，则会创建新日历。

此外，我使用此代码来检索所有日历并且它有效

```
CalendarQuery query = new CalendarQuery();
query.Uri = new Uri("https://www.google.com/calendar/feeds/default/allcalendars/full");
CalendarFeed resultFeed = (CalendarFeed) service.Query(query); 
```

有什么建议么？？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T09:52:02.830

最好开始使用 .net 日历 API V3，因为 V2 已过时，OAuth 1.0 也已过时

# git - 在没有子目录的 Git 过滤器分支中选择一个目录

> ID：15780895
> 
> 赞同：0
> 
> 时间：2013-04-03T07:04:18.797
> 
> 标签：git

我想从现有的 git repo 中提取一个目录到一个新的 repo 中。

我在用

```
git filter-branch --tag-name-filter cat --prune-empty --subdirectory-filter modules/plugins -- --all 
```

如[this SO answer](https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository/359759#359759)所示，效果很好。

现在我有一个层次结构

```
modules/
  plugins/
     foo/
     bar/
     baz/ 
```

而当我基本上想要过滤时`modules/plugins/*`（这就是上面的 git 命令所做的），但不是`modules/plugins/bar`.

`git filter-branch`在这样的表达中这可能吗？如果是这样，怎么做？

有了上面的表达式，我的新回购最终成为

```
foo/
bar/
baz/ 
```

我怎样才能使`modules/plugins/`零件保持在原位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:43:33.863

由于我发现无法传递像 (imaginary) 这样的表达式，`--subdirectory-filter modules/plugins,!modules/plugins/bar`所以我先运行`git filter-branch`然后再运行：

```
for B in $BRANCHES; do git checkout -f  $B
  for P in "foo","baz"
  do
    git rm -r --cached $P
  done
  git commit -m "Plugins removed"
done 
```

其中`$BRANCHES`包含之前通过“激活”的所有分支的列表

```
for B in $BRANCHES ; do  git branch -t $B origin/$B; done 
```

# java - 是否有任何 apache utils 可以打印数组一些可理解的字符串

> ID：15780896
> 
> 赞同：3
> 
> 时间：2013-04-03T07:04:20.287
> 
> 标签：java, logging, apache-commons-beanutils

我正在我的代码中使用 org.slf4j.Logger 进行一些日志记录。它出现在某些地方，我想查看数组的内容，其中主要是字符串数组，对象类型数组。如果对象类型主要使用 toString() 实现。
是否有任何 apache utils 或将数组提供给可理解字符串的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:29:41.447

正如其他答案中所建议的那样，您可以使用 Arrays.toString() 为数组构造“有意义的”字符串表示形式。当然，假设你使用的是JDK 5+

更“正确”的结果应该是使用 Arrays.deepToString()，如果它是包含在数组中的其他数组实例，则包含的数组也会正确转换为字符串。

如果您没有使用 JDK5+，在 Apache Commons Lang 中，您可以使用`ArrayUtils.toString()`

鉴于您提到了 SLF4J Logger，有一些值得研究的地方。

当我们使用 SLF4J Logger 时，我们总是做类似的事情

```
logger.info("data is {}", data); 
```

这样做的原因`logger.info("data is " + data);`是因为日志消息可以被延迟评估，只有当记录器实际上启用了 INFO 级别时。当消息的构建成本很高时，它特别有用。

然而，简单地使用 Arrays.deepToString() 会带走这个优势：

```
logger.info("data is {}", Arrays.deepToString(dataArray)); 
```

无论记录器是否启用了 INFO 级别，都会发生昂贵的 dataArray 到字符串的转换。

为了解决它，您可以在记录之前显式检查记录器级别：

```
if (logger.isInfoEnabled()) {
    logger.info("data is {}", Arrays.deepToString(arrayData));
} 
```

您也可以考虑制作这样的助手（伪代码）：

```
public class ArrayToStringHelper {
    Object[] arrayData;
    public ArrayToStringHelper(Object[] arrayData) {
        this.arrayData = arrayData;
    }
    @Override
    public String toString() {
        return Arrays.deepToString(arrayData);
    }
} 
```

这样 Array 到 String 的转换被延迟到实际需要时：

```
logger.info("data is {}", new ArrayToStringHelper(arrayData)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T07:05:27.690

无需任何第三方库来执行此操作。只需使用[`Arrays.toString`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5b%5d%29)

# ajax - 上传进度 div 增加

> ID：15780897
> 
> 赞同：0
> 
> 时间：2013-04-03T07:04:30.907
> 
> 标签：ajax, upload, progress-bar

```
 function uploadToServer(){
fileField = document.getElementById("uploadedFile");
var fileToUpload = fileField.files[0]; 
 var xhr = new XMLHttpRequest();
var uploadStatus = xhr.upload;
 uploadStatus.addEventListener("progress", function (ev) {
        if (ev.lengthComputable) {
            $("#uploadPercentage").html((ev.loaded / ev.total) * 100 + "%");
        }
    }, false);

uploadStatus.addEventListener("error", function (ev) {$("#error").html(ev)}, false);
uploadStatus.addEventListener("load", function (ev) {$("#error").html("sorry!")}, false);

xhr.open(
        "POST",
        "serverUpload.php",
        true
        );
    xhr.setRequestHeader("Cache-Control", "no-cache");
    xhr.setRequestHeader("Content-Type", "multipart/form-data");
    xhr.setRequestHeader("X-File-Name", fileToUpload.fileName);
    xhr.setRequestHeader("X-File-Size", fileToUpload.fileSize);
    xhr.setRequestHeader("X-File-Type", fileToUpload.type);
    //xhr.setRequestHeader("Content-Type", "application/octet-stream");
    xhr.send(fileToUpload); 
```

}

$(函数(){

```
$("#uploadButton").click(uploadToServer); 
```

});

`

```
<form action="" name="uploadForm" method="post" enctype="multipart/form-data"> 
```

嗨，这段代码工作正常。但我需要增加 div 的大小。但这个只显示百分比。我必须改变什么才能得到那个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:23:47.017

下面是使用 HTML5 的简单进度条代码

```
<progress id="progressBar" value="0" max="100" style="width:300px;"></progress>
<span id="status"></span>
<h1 id="finalMessage"></h1>
<script type="text/javascript" language="javascript">
function progressBarSim(al) {
   var bar = document.getElementById('progressBar');
   var status = document.getElementById('status');
   status.innerHTML = al+"%";
   bar.value = al;
   al++;
   var sim = setTimeout("progressBarSim("+al+")",300);
   if(al == 100){
  status.innerHTML = "100%";
  bar.value = 100;
  clearTimeout(sim);
  var finalMessage = document.getElementById('finalMessage');
  finalMessage.innerHTML = "Process is complete";
}
   }
  var amountLoaded = 0;
  progressBarSim(amountLoaded);
 </script> 
```

它可能会对您有所帮助，在您的编码中修复此代码。

# java - JSP 会话异常行为

> ID：15780906
> 
> 赞同：0
> 
> 时间：2013-04-03T07:05:02.047
> 
> 标签：java, jsp, session

以前，我通常在会话中设置和获取属性。但最近，我的一个会话属性开始表现得好像它是空的。我的团队通常可以使用我的 PC 作为 Web 应用程序的主机来获取特定的会话属性，而我自己却无法获取。作为对我的问题的简短描述，我们有相同的代码，我的团队可以在通过 scriptlet 运行的会话中获取值，而我不能。我们使用tomcat作为服务器，eclipse juno，chrome作为浏览器，我的电脑是唯一遇到这个bug的。我的机器、浏览器或其他地方有问题吗？

代码：

```
<% List<Place> places = (List<Place>) session.getAttribute("places");
for (Place p : places ) { %>
    <option value="<%=p.getID()%>"><%=p.getPlaceName()%></option>
<%} %> 
```

循环确实执行，`for`因为正如我所说，因为它没有在会话中获得值。我已经清理了我的缓存并尝试了其他浏览器，但它在我的机器上仍然表现得像这样......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:10:21.090

检查 cookie 在您的服务器中未启用。如果 cookie 被禁用然后启用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:29:29.617

如果您在一个地方获取会话属性，那么您也应该能够在其他地方获取。我不明白为什么它不应该。

request.getSession(false);

可能存在同步问题。始终在同步块中进行会话工作。

**HttpSessionAttributeListener**可以配置为查看属性何时添加到会话中。

# java - 点击一个建议框，webdriver

> ID：15780909
> 
> 赞同：0
> 
> 时间：2013-04-03T07:05:24.423
> 
> 标签：java, selenium, webdriver

我正在使用 Selenium 2.0 在我的应用程序上测试 GUI。

当我在输入字段中输入数据时会出现建议框，我需要单击建议框来验证输入。

图片在这里：[图片](http://s22.postimg.org/xcyym0y01/Untitled.png)

我的html代码（输入）：

```
<table class="supplier" cellspacing="1" width="100%">
<tbody>
<tr>
<td><span id="supplier:supplierOps" class="ui-autocomplete">
<input id="supplier:supplierOps_input" name="supplier:supplierOps_input" type="text" class="ui-autocomplete-input ui-inputfield ui-widget ui-state-default ui-corner-all" autocomplete="off" value="" size="10" role="textbox" aria-disabled="false" aria-readonly="false" aria-multiline="false">
</span></td>
<td>...</td>
</tr>
</tbody>
</table> 
```

我的 html 代码（建议框）：

```
<table class="ui-autocomplete-items ui-autocomplete-table ui-widget-content ui-widget ui-corner-all ui-helper-reset">
<tbody>
<tr class="ui-autocomplete-item ui-autocomplete-row ui-corner-all ui-state-highlight" data-item-value="1" data-item-label="OPS1">
<td>OPS1 - Supplier1</td>
</tr>
</tbody>
</table> 
```

我的硒代码：

```
// supplier ops, i find and type data into the input
WebElement eSupplier = driver.findElement(By.id("supplier:supplierOps_input"));
eSupplier.sendKeys("OPS1");
sleep(5); // wait the suggestbox

// i find the suggestbox
WebElement eSupplierSuggest = driver.findElement(By.xpath("//div[@id='supplier:supplierOps_panel']/table/tbody/tr"));
eSupplierSuggest.click();
sleep(5); // wait the refresh for the next field supplierAddress 
```

我的 xpath 和一切似乎都很好。

**所以，问题是：我需要捕获/选择什么元素（td，tr，table，...）以及我需要使用什么方法（driver.click（），sendKeys（），...）来验证建议框？**

编辑 ：

建议框在验证时没有焦点。所以我正在寻找将焦点放在它上面并尝试使用 sendKeys(Keys_ENTER)。[将焦点放在 WebElement 上？](https://stackoverflow.com/questions/15782564/set-focus-on-webelement)

编辑2：

一些新闻人员，我将尝试用 Arquillian Graphene 解决它。它是一个强制测试人员编写支持 Ajax 且可重用的测试和测试抽象的框架，

友情链接 : 石墨烯[简介](http://planet.jboss.org/post/introducing_arquillian_graphene_page_fragments) - [Graphene 2.0.0.Alpha3 发布](http://arquillian.org/blog/tags/graphene/) - [JBoss Community Graphene2](https://docs.jboss.org/author/display/ARQGRA2/Home) - [Jquery Selector](http://jsoup.org/cookbook/extracting-data/selector-syntax)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:05:05.047

尝试使用 cssSelector 进行自动建议单击，如下所示，如果您仍然遇到问题，请告诉我。

```
 // supplier ops, i find and type data into the input
    WebElement eSupplier = driver.findElement(By.id("supplier:supplierOps_input"));
    eSupplier.sendKeys("OPS1");
    sleep(5); // wait the suggestbox

    // i find the suggestbox
    WebElement eSupplierSuggest = driver.findElement(By.cssSelector("css path of that specific value in the auto suggestion box"));
    eSupplierSuggest.click();
    sleep(5); // wait the refresh for the next field supplierAddress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:24:09.113

无需单击建议框，您可以找到建议框，然后提取建议框的文本。断言它包含您输入的文本。

# ios - 系统通知 - iOS

> ID：15780913
> 
> 赞同：0
> 
> 时间：2013-04-03T07:05:55.130
> 
> 标签：ios, background-process

在 android 中，应用程序可以捕获系统意图以获取有关某些事件的通知，例如 wifi 连接更改或手机启动完成等。

是否可以在 iOS 上做同样的事情。我主要希望我的应用程序在后台运行并在某些事件发生时执行某些任务。这些事件可能包括网络连接的变化、在设备上安装新应用程序设备启动完成等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:11:55.957

如果您想运行的后台任务属于允许的类别，请阅读此处：- [http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

简而言之，允许的任务是：-

在后台向用户播放有声内容的应用程序，例如音乐播放器应用程序

让用户随时了解其位置的应用程序，例如导航应用程序

支持互联网协议语音 (VoIP) 的应用程序

需要下载和处理新内容的报亭应用

从外部配件接收定期更新的应用程序

# ember.js - 车把块助手不能正常工作

> ID：15780914
> 
> 赞同：1
> 
> 时间：2013-04-03T07:05:55.490
> 
> 标签：ember.js, handlebars.js

我尝试使用使用[Handlebars 定义块助手中](https://stackoverflow.com/questions/15769096/defining-a-block-helper-with-handlebars)的代码来创建块助手。[@danii 的http://jsfiddle.net/6Jaya/](http://jsfiddle.net/6Jaya/)表明它应该可以工作。但事实并非如此。我得到以下输出： ![截屏](https://i.stack.imgur.com/wwPks.png)

这是一个错误还是我错过了什么？

**应用程序.js**

```
App = Ember.Application.create();

Handlebars.registerHelper('link', function(options) {
    var result = '<a href="http://www.example.com">'
               + options.fn(this)
               + '</a>';
    console.log(result);
    return new Handlebars.SafeString(result);
}); 
```

**索引.html**

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Example</title>
  </head>
  <body>
    <script type="text/x-handlebars">
      <p>
      {{#link}}
      <img src="http://placekitten.com/50/50">
      {{/link}}
      </p>
    </script>

  </body>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript" src="js/handlebars.js"></script>
  <script type="text/javascript" src="js/ember.js"></script>
  <script type="text/javascript" src="js/app.js"></script>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:13:00.617

你为什么不直接使用？这有什么具体原因吗？

```
Handlebars.registerHelper('link', function(value) {
    var result = '<a href="http://www.example.com">'
               + value
               + '</a>';
    console.log(result);
    return new Handlebars.SafeString(result);
}); 
```

# python - 我如何知道 Django 的 Model.save() 方法中更改了哪些值？

> ID：15780917
> 
> 赞同：0
> 
> 时间：2013-04-03T07:06:00.993
> 
> 标签：python, django

我已经覆盖了 Django 的 Model.save() 方法，以便在添加或更新对象时对外部数据库执行操作。

基本上，这是我的方法：

```
def save(self, *args, **kwargs):    
    if self.pk is None:
        # Insert query on the external database.
    else:
        # Update query on the external database.

    super(MyModel, self).save(*args, **kwargs) 
```

我现在的问题是，我知道我可以通过 self.name 访问提交的数据，但是我怎样才能访问旧数据呢？我的意思是，现有数据，当然是在更新的情况下。

因为这是我的问题，外部数据库不支持大量查询，我只想在相关字段已更新时才进行查询。

这是我想做的事情：

```
def save(self, *args, **kwargs):    
    if self.pk is None:
        # Insert query on the external database.
    else:
        if self.name is not self.THE_CURRENT_NAME
            # Update query on the external database.

    super(MyModel, self).save(*args, **kwargs) 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:28:15.253

如果您正在使用`ModelForm`该工作，请覆盖`save`其上的方法并决定是否级联到模型（使用`save`调用）。`super``commit=True`

此时您可能已经掌握了所有信息。现在你需要一种使用它的方法。

django 中的表单有你需要的工具。查看表单的`changed_data`属性和`has_changed()`方法。

```
class MyModelForm(forms.ModelForm):

    class Meta:
        model = MyModel

    def save(commit=True):
        if self.has_changed():
            super(MyModelForm, self).save(commit=commit) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:15:34.790

您必须在保存之前从数据库中获取它：

```
def save(self, *args, **kwargs):    
    if self.pk is None:
        # Insert query on the external database.
    else:
        old = Lab.objects.get(pk=self.pk)
        if self.name is not old.name:
            ...             

    super(Lab, self).save(*args, **kwargs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:29:53.403

所以你想从数据库中获取你的数据，你不想做很多查询。如果您的数据不是太多，您可以将数据库中的所有数据读取到内存中，然后将您的即将保存的值与内存中的数据进行比较，如果它们不一样，只需将该值分配给内存数据以及数据库中的更新。

# javascript - 为什么禁止内联脚本（内容安全策略）？

> ID：15780918
> 
> 赞同：5
> 
> 时间：2013-04-03T07:06:02.590
> 
> 标签：javascript, inline, content-security-policy

我想知道规范中的引用：（[https://dvcs.w3.org/hg/content-security-policy/raw-file/tip/csp-specification.dev.html](https://dvcs.w3.org/hg/content-security-policy/raw-file/tip/csp-specification.dev.html)）

> 为了获得最大的好处，作者需要将所有内联脚本和样式移到外部脚本中，例如移到外部脚本中，因为用户代理无法确定内联脚本是否被攻击者注入。

找出所有内联脚本是一项耗时的任务。

我的问题是从安全的角度来看的。通过将所有内联脚本（例如 JavaScript）提取到外部源，您真的可以获得任何安全优势吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T07:09:20.823

关键部分是

> 用户代理无法确定内联脚本是否被攻击者注入。

为了提供保护，CSP 必须防止攻击者控制的子字符串导致代码运行。由于用户代理不知道 HTML 的哪些部分是由不受信任的输入指定的，哪些来自受信任的开发人员编写的模板，因此它必须假设最坏的情况——任何属性或元素都可能被攻击者控制。

> 通过将所有内联脚本（例如 JavaScript）提取到外部源，您真的可以获得任何安全优势吗？

不会。提取您想要运行的脚本不会提供任何安全优势，它只是让您在仍然使用 CSP 的同时运行您想要的脚本。

安全优势来自能够调用浏览器的 HTML 解析器，而不会无意中执行滥用域权限或窃取机密的脚本。

# wordpress - 从 wordpress 默认文本编辑器上传图片

> ID：15780919
> 
> 赞同：0
> 
> 时间：2013-04-03T07:06:04.623
> 
> 标签：wordpress

现在我正在尝试以客户身份将图片插入到我的帖子中，而默认的文本编辑器无法上传图片。它只使用图片 url 将图片插入到帖子中。

经过长时间搜索 wp 插件我失败了）：

如何在帖子中插入图像文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:12:12.477

默认编辑器可以上传图片。它可以作为管理员工作吗？如果是这样，您需要增加您的用户名册以赋予它更多权利。它应该是作者或更高版本。

更多信息请查看`upload_files`
[http://codex.wordpress.org/Roles_and_Capabilities#Capability_vs._Role_Table](http://codex.wordpress.org/Roles_and_Capabilities#Capability_vs._Role_Table)

# mysql - 查询慢，我应该索引还是其他解决方案？

> ID：15780923
> 
> 赞同：0
> 
> 时间：2013-04-03T07:06:11.083
> 
> 标签：mysql

我有这个非常慢的查询，它计算具有某些规格的产品，解决方案索引？或其他解决方案？

```
select count(DISTINCT if(ps10.specification in ('Meisje'),p.products_id,NULL)) as count1 ,count(DISTINCT if(ps10.specification in ('Jongen'),p.products_id,NULL)) as count2 ,count(DISTINCT if(ps10.specification in ('Unisex'),p.products_id,NULL)) as count3  from (products p)
                        join (products_to_categories p2c)
                          on (p.products_id = p2c.products_id)
                        left join (specials s)
                          on (p.products_id = s.products_id)
                        left join (products_attributes pa)
                          on (p.products_id = pa.products_id)
                        left join (products_options_values pv)
                          on (pa.options_values_id = pv.products_options_values_id)
                        left join (products_stock ps)
                          on (p.products_id=ps.products_id and pv.products_options_values_id = ps.products_options_values_id2)        
                                             INNER JOIN products_specifications ps10 ON p.products_id = ps10.products_id  INNER JOIN products_specifications ps17 ON p.products_id = ps17.products_id  where p.products_status = '1' and ps.products_stock_quantity>0   and p2c.categories_id in (2,54,60,82,109,115,116,118,53,58,104,55,101,75,56,64,66,67,68,69,70,71,84,103,114,80,92,99,93,94,95,97,106)  AND ps10.specifications_id = '10'
                  AND ps10.language_id = '1'
                   AND ps17.specification in ('Babyslofjes'
                              ) AND ps17.specifications_id = '17'
                  AND ps17.language_id = '1' 
```

解释这个查询给了我这个结果：

```
+----+-------------+-------+--------+-------------------------------------+-------------------------------------+---------+------------------------------------------+-------+--------------------------+
| id | select_type | table |  type  |            possible_keys            |                 key                 | key_len |                   ref                    | rows  |          Extra           |
+----+-------------+-------+--------+-------------------------------------+-------------------------------------+---------+------------------------------------------+-------+--------------------------+
|  1 | SIMPLE      | ps    | ALL    | idx_products_stock_attributes       | NULL                                | NULL    | NULL                                     | 16216 | Using where              |
|  1 | SIMPLE      | p     | eq_ref | PRIMARY                             | PRIMARY                             | 4       | kikleding.ps.products_id                 |     1 | Using where              |
|  1 | SIMPLE      | s     | ref    | idx_specials_products_id            | idx_specials_products_id            | 4       | kikleding.p.products_id                  |     1 | Using index              |
|  1 | SIMPLE      | p2c   | ref    | PRIMARY                             | PRIMARY                             | 4       | kikleding.ps.products_id                 |     1 | Using where; Using index |
|  1 | SIMPLE      | pv    | ref    | PRIMARY                             | PRIMARY                             | 4       | kikleding.ps.products_options_values_id2 |     1 | Using where; Using index |
|  1 | SIMPLE      | ps10  | ref    | products_id                         | products_id                         | 12      | kikleding.p.products_id,const,const      |     1 | Using where              |
|  1 | SIMPLE      | ps17  | ref    | products_id                         | products_id                         | 12      | kikleding.ps.products_id,const,const     |     1 | Using where              |
|  1 | SIMPLE      | pa    | ref    | idx_products_attributes_products_id | idx_products_attributes_products_id | 4       | kikleding.p2c.products_id                |     6 | Using where              |
+----+-------------+-------+--------+-------------------------------------+-------------------------------------+---------+------------------------------------------+-------+--------------------------+ 
```

将左连接更改为内连接，如下所示：

```
select count(DISTINCT if(ps10.specification in ('Meisje'),p.products_id,NULL)) as count1 ,count(DISTINCT if(ps10.specification in ('Jongen'),p.products_id,NULL)) as count2 ,count(DISTINCT if(ps10.specification in ('Unisex'),p.products_id,NULL)) as count3  from (products p)
                        inner join (products_to_categories p2c)
                          on (p.products_id = p2c.products_id)
                        left join (specials s)
                          on (p.products_id = s.products_id)
                        inner join (products_attributes pa)
                          on (p.products_id = pa.products_id)
                        inner join (products_options_values pv)
                          on (pa.options_values_id = pv.products_options_values_id)
                        inner join (products_stock ps)
                          on (p.products_id=ps.products_id and pv.products_options_values_id = ps.products_options_values_id2)        
                                             INNER JOIN products_specifications ps10 ON p.products_id = ps10.products_id  INNER JOIN products_specifications ps17 ON p.products_id = ps17.products_id  where p.products_status = '1' and ps.products_stock_quantity>0   and p2c.categories_id in (2,54,60,82,109,115,116,118,53,58,104,55,101,75,56,64,66,67,68,69,70,71,84,103,114,80,92,99,93,94,95,97,106)  AND ps10.specifications_id = '10'
                  AND ps10.language_id = '1'
                   AND ps17.specification in ('Babyslofjes'
                              ) AND ps17.specifications_id = '17'
                  AND ps17.language_id = '1' 
```

我索引了 ps.products_id

速度有点快，谢谢评论，但是查询还是很慢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:02:38.297

我会进行稍微修改的查询，以将条件从 where 部分放入连接中，并且从示例中我认为您也可以摆脱 Specials 表。

```
select
  count(distinct if(ps10.specification in ('Meisje'), p.products_id, null)) as count1,
  count(distinct if(ps10.specification in ('Jongen'), p.products_id, null)) as count2,
  count(distinct if(ps10.specification in ('Unisex'), p.products_id, null)) as count3
from (products p)
  inner join (products_to_categories p2c)
    on (p.products_id = p2c.products_id)
  inner join (products_attributes pa)
    on (p.products_id = pa.products_id)
  inner join (products_options_values pv)
    on (pa.options_values_id = pv.products_options_values_id)
  inner join (products_stock ps)
    on (p.products_id=ps.products_id and pv.products_options_values_id = ps.products_options_values_id2 and ps.products_stock_quantity > 0)        
  inner join products_specifications ps10
    ON p.products_id = ps10.products_id and ps10.language_id = '1' and ps10.specifications_id = '10'
  inner join products_specifications ps17
    ON p.products_id = ps17.products_id and ps17.language_id = '1' and ps17.specifications_id = '17'
where p.products_status = '1'
  and p2c.categories_id in (2,54,60,82,109,115,116,118,53,58,104,55,101,75,56,64,66,67,68,69,70,71,84,103,114,80,92,99,93,94,95,97,106)
  and ps17.specification in ('Babyslofjes') 
```

至于索引，我会检查以下是否可用：

*   products / products_id （很可能是）
*   products_to_categories / products_id+categories_id （很可能也是）
*   products_attributes / products_id+options_values_id
*   products_options_values / products_options_values_id
*   products_specifications / products_id+language_id+specifications_id

从表名中我怀疑这是一个 OS/XTcommerce 数据库，我将尝试在几个小时内获得一个并给出更详细的意见。我只是不记得 products_stock 和 products_specifications，它们都是表，而不是视图，对吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:10:40.797

显然更多地使用 p.products_id，所以首先在表 Products 中索引该属性。然后 pv.products_options_values_id 并尝试索引您在 Inner Join 中使用的其他属性。还尝试转换要在 Join 条件中使用的条件，特别是 Inner join

# mercurial - 连续合并多个 Mercurial 存储库

> ID：15780925
> 
> 赞同：0
> 
> 时间：2013-04-03T07:06:27.853
> 
> 标签：mercurial, multiple-repositories

我正在开发一个已经生产了一年的网站。很快我将开始开发一个新版本，它的初始存储库将是当前站点存储库的副本。设置好新仓库后，当前站点和新站点的两个仓库会出现分歧。但是，如果我修复当前网站中的错误，我想将该修复合并到新网站中。

直到最近我还在使用 TFS，它可以很容易地合并两个不同版本的存储库（在 TFS 中它们被称为分支），但是我如何使用 Mercurial 来实现呢？到目前为止，我只找到了有关如何合并两个不同存储库以终止最旧存储库的说明。

干杯，西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:04:40.477

我不认为有问题。您可以从旧站点合并到新站点，并继续这样做，只要您愿意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:38:32.817

谢谢你的回复，DJ。似乎在 StackOverflow 上提出这个问题后，我自己在 Mercurial 的网站上找到了答案： [https ://www.mercurial-scm.org/wiki/MergingUnrelatedRepositories](https://www.mercurial-scm.org/wiki/MergingUnrelatedRepositories)

# iphone - iPhone GLSL 动态分支行为

> ID：15780926
> 
> 赞同：1
> 
> 时间：2013-04-03T07:06:29.773
> 
> 标签：iphone, objective-c, branch, glsl, shader

我知道分支不是编写着色器的好主意，但我还没有想到避免它的方法。这是我的片段着色器代码：

```
precision highp float;

varying vec4 v_fragmentColor;
varying vec4 v_pos;

uniform int u_numberOfParticles;

uniform mat4 u_MVPMatrix;

uniform vec3 u_waterVertices[100];

void main()
{
    vec4 finalColor = vec4(0.0, 0.0, 0.0, 0.0)

    vec2 currPos = v_pos.xy;

    float accum = 0.0;
    vec3 normal = vec3(0, 0, 0);

    for ( int i = 0; i < u_numberOfParticles; ++i )
    {
        // Some calculations here
    }
    normal = normalize(normal);

    float normalizeToEdge = 1.0 - (accum - threshold) / 2.0;

    if (normalizeToEdge < 0.3)
        finalColor = vec4( 0.1, normalizeToEdge + 0.5, 0.9-normalizeToEdge*0.4, 1.0);

    if ( normalizeToEdge < 0.2 )
    {
        finalColor = vec4( 120.0/255.0, 245.0/255.0, 245.0/255.0, 1.0);
        float shade = mix( 0.7, 1.0, normal.x);
        finalColor *= shade;
    }

    gl_FragColor = vec4(finalColor);

} 
```

问题在这里：

```
for ( int i = 0; i < u_numberOfParticles; ++i )
{
     // Some calculations here
} 
```

将其更改为：

```
for ( int i = 0; i < 2; ++i )
{
    // Some calculations here
} 
```

即使 u_numberOfParticles 也是 2，帧速率也会翻倍；

将其更改为

```
 for ( int i = 0; i < 100; ++i )
   {
       if( i == u_numberOfParticles)
            break;
       // Some calculations here
   } 
```

不提供任何 fps 改进。

我该如何应对这种着色器行为？是否有任何技术可以避免这种分支？我认为为不同数量的粒子编写 50 个不同的着色器是低效的……任何帮助将不胜感激。

# gwt - Gwt 共享包

> ID：15780927
> 
> 赞同：0
> 
> 时间：2013-04-03T07:06:34.017
> 
> 标签：gwt, gwt-rpc

我目前在客户端包中有域对象。这些对象在服务器 RPC 方法中使用，并且一切正常。为什么我需要共享包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:11:18.930

它工作正常，因为您已经在服务器端代码中导入了客户端包。现在服务器端依赖于域对象的客户端包。因此，为了使客户端和服务端代码严格分开，您需要使用共享文件夹。

# c# - 文本框中的欧元货币符号

> ID：15780930
> 
> 赞同：0
> 
> 时间：2013-04-03T07:06:51.140
> 
> 标签：c#

我有一个文本框，里面的用户可以写金额。是否可以在文本框中放置一个欧元货币符号，这样无论用户写什么，欧元符号都在金额的左侧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:15:11.337

如果您谈论的是 Windows 应用程序，则可以使用 Alt 代码，请在文本框旁边放置一个标签，并在其文本属性类型 0128 中按下 alt。

[看到这个](http://www.alt-codes.net/euro_alt_code.php)

它看起来像这样

![在此处输入图像描述](https://i.stack.imgur.com/crAqt.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:09:40.037

您可以使用 a`Label`也可以编写以下`onload`事件：

```
txtMoney.Text = "€"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:19:40.417

我将使用自定义背景图像来执行此操作，创建所需数字符号的图像并将其设置为 TextBox 的背景。

```
<TextBox Name="myTextBox" TextChanged="OnTextBoxTextChanged" Width="200">
  <TextBox.Background>
    <ImageBrush ImageSource="TextBoxBackground.gif" AlignmentX="Left" Stretch="None" />
  </TextBox.Background>
</TextBox> 
```

# postgresql - 使用 PHP 时的 PostgreSQL 查询错误

> ID：15780931
> 
> 赞同：2
> 
> 时间：2013-04-03T07:06:54.690
> 
> 标签：postgresql, postgis

当我运行一个包含`::geometry`强制转换的 PostgreSQL 查询时，我得到一个`type "geometry" does not exist`错误。我在 Ubuntu 12.04 上使用 php5-pgsql V5.3.10、php5-fpm 5.4.13、Laravel 4、Postgresql 9.1、PostGIS 2.0.1。`geometry`类型是 PostGIS 特定的。

没有强制转换，查询运行良好。当使用 pgAdmin3 直接针对 PostgreSQL 数据库进行查询时，原始查询也可以正常工作。为什么是这样？

**询问**

```
$busstops = DB::connection('pgsql')
    ->table('locations')
    ->select(DB::raw('geog::geometry as lat, geog::geometry as lng'))
    ->get(); 
```

**不强制转换的查询（无错误）**

```
$busstops = DB::connection('pgsql')
    ->table('locations')
    ->select(DB::raw('geog as lat, geog as lng'))
    ->get(); 
```

**错误：**

`Exception: SQLSTATE[42704]: Undefined object: 7 ERROR: type "geometry" does not exist LINE 1: select geog::geometry as lat from "locations" ^ (SQL: select geog::geometry as lat from "locations") (Bindings: array ( ))`

* * *

**\dT 几何**

```
 List of data types
 Schema |   Name   |               Description
--------+----------+-----------------------------------------
 public | geometry | postgis type: Planar spatial data type.
(1 row) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:10:58.007

该应用程序正在切换，`search_path`因此`public`不在`search_path`. 默认情况下`public`，扩展安装`geometry`到`search_path`.

你需要：

*   创建一个新模式`postgis`；
*   将 PostGIS 扩展移动到`postgis`架构中；和
*   确保新`postgis`架构*始终*在 上`search_path`，可能使用特定于应用程序的设置

# android - com.google.zxing.NotFoundException 用于解码包含条形码的图像的所有可能性

> ID：15780932
> 
> 赞同：0
> 
> 时间：2013-04-03T07:06:57.440
> 
> 标签：android, zxing

我正在使用 zxing 核心并与我的拍照的 Android 应用程序集成。我将位图图片输入提供给 RGBLuminanceSource。但每次我得到 NOTFoundException。我不想通过意图或 CaptureActivity 与 zxing 条码扫描仪集成。这是代码。

```
 Map<DecodeHintType,Object> HINTS;
       Map<DecodeHintType,Object> HINTS_PURE;
       HINTS = new EnumMap<DecodeHintType,Object>(DecodeHintType.class);
       HINTS.put(DecodeHintType.TRY_HARDER, Boolean.TRUE);
       HINTS.put(DecodeHintType.POSSIBLE_FORMATS, EnumSet.allOf(BarcodeFormat.class));
       HINTS_PURE = new EnumMap<DecodeHintType,Object>(HINTS);
       HINTS_PURE.put(DecodeHintType.PURE_BARCODE, Boolean.TRUE);
       ImageView mImg;

       if (requestCode == SCANNER_REQUEST_CODE && resultCode == RESULT_OK) {  
          // Bitmap bMap = (Bitmap) data.getExtras().get("data");

        Bitmap bMap=BitmapFactory.decodeStream(getContentResolver().openInputStream(outputFileUri));

            // creating binary bitmap from source image

           int length=bMap.getWidth()*bMap.getHeight()*10;
           int[] intArray = new int[bMap.getWidth()*bMap.getHeight()]; 
           bMap.getPixels(intArray, 0, bMap.getWidth(), 0, 0, bMap.getWidth(),                bMap.getHeight());

           //test view to display captured image 
           mImg = (ImageView) findViewById(R.id.imageView);
           mImg.setImageBitmap(bMap);

           // zxing decoding of bitmap image
           Reader reader = new MultiFormatReader();
           String msg=bMap.getWidth()+" * "+bMap.getHeight();
           Log.e("DEBUGGG", msg);
           LuminanceSource source = new RGBLuminanceSource(bMap.getWidth(), bMap.getHeight(),intArray);

           BinaryBitmap bitmap = new BinaryBitmap(new GlobalHistogramBinarizer(source));

           Collection<Result> results = new ArrayList<Result>(1);
           ReaderException savedException = null;

           try {
                  // Look for multiple barcodes
                  MultipleBarcodeReader multiReader = new GenericMultipleBarcodeReader(reader);

                  Result[] theResults = multiReader.decodeMultiple(bitmap, HINTS);
                  if (theResults != null) {
                    results.addAll(Arrays.asList(theResults));
                  }
                } catch (ReaderException re) {
                    re.printStackTrace();
                  savedException = re;
                  re.printStackTrace();
                }

                if (results.isEmpty()) {
                    try {
                      // Look for pure barcode
                      Result theResult = reader.decode(bitmap, HINTS_PURE);
                      if (theResult != null) {
                        results.add(theResult);
                      }
                    } catch (ReaderException re) {
                      savedException = re;
                      re.printStackTrace();

                    }
                  }

                  if (results.isEmpty()) {
                    try {
                      // Look for normal barcode in photo
                      Result theResult = reader.decode(bitmap, HINTS);
                      if (theResult != null) {
                        results.add(theResult);
                      }
                    } catch (ReaderException re) {
                      savedException = re;
                      re.printStackTrace();
                    }
                  }

                  if (results.isEmpty()) {
                    try {
                      // Try again with other binarizer
                      BinaryBitmap hybridBitmap = new BinaryBitmap(new HybridBinarizer(source));
                      Result theResult = reader.decode(hybridBitmap, HINTS);
                      if (theResult != null) {
                        results.add(theResult);
                      }
                    } catch (ReaderException re) {
                      savedException = re;
                      re.printStackTrace();
                    }
                  }
                String barcoderesult="";
                  for (Result result : results) {
                      barcoderesult=barcoderesult+result.getText();
                      Log.e("Debugger","code:  " +result.getText() );
                    }

                //result is empty and notfound exception in logs 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:52:05.730

是的，它通常解码得很好。最可能的答案是这个特定的图像没有扫描。试试没有阴影的，也许。您也可能没有正确解析图像。尝试其他图像以验证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:55:22.763

我必须使用 bitmap.config 从输入流中创建 rgb 位图。

# ios - if (sqlite3_step(statement) == SQLITE_DONE) 循环不执行 - iOS

> ID：15780943
> 
> 赞同：1
> 
> 时间：2013-04-03T07:07:30.980
> 
> 标签：ios, database

下面是我更新数据库记录的代码...

```
-(BOOL) addScoreInDatabase:(classname *)objGames
{
    BOOL success;
    sqlite3 *database;

    const char *dbpath = [self.databasePath UTF8String];

    if(sqlite3_open(dbpath, &database) == SQLITE_OK)
    {
        sqlite3_stmt *statement;

        NSData *strJson = [objGames getJSON];

        NSString *strContent = [[[[NSString alloc]
                                  initWithData:strJson encoding:NSUTF8StringEncoding] stringByReplacingOccurrencesOfString:@"\\" withString:@""]stringByReplacingOccurrencesOfString:@"null" withString:@"\"\""];
        NSLog(@"strcom %@",strContent);
        NSString *query = [NSString stringWithFormat:@"UPDATE gamescore SET data ='%@' WHERE id = 1",strContent];
        NSLog(@"query %@",query); 
        const char *sqlStatement = [query UTF8String];
        if(sqlite3_prepare_v2(database, sqlStatement, -1, & statement, NULL) == SQLITE_OK)
        {
            if (sqlite3_step(statement) == SQLITE_DONE)
            {
                success = TRUE;
            }
            else
            {
                success = FALSE;
            }
            sqlite3_exec(database, "VACUUM;", 0, 0, nil);
        }
        sqlite3_finalize(statement);
        sqlite3_close(database);
    }
    return success;
} 
```

它不会进入**if (sqlite3_step(statement) == SQLITE_DONE) 循环**

结果查询是

```
UPDATE gamescore SET data ='{
  "title" : "pacman",
  "time" : "55",
  "score" : "200",
  "level" : "1"
}' WHERE id = 1 
```

当我在 Sqlite Manager 中执行此查询时，它不会更新记录，而是显示类似这样的内容![在此处输入图像描述](https://i.stack.imgur.com/OdrCX.png)

谁能帮我更新我的记录？！..谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:22:38.157

您可以使用 sqlite3_exec() 方法代替 sqlite3_step()。

sqlite3_exec() 将执行您给出的任何查询。

试试这个。

```
enter code 
-(BOOL) addScoreInDatabase:(classname *)objGames
{
BOOL success;
sqlite3 *database;

const char *dbpath = [self.databasePath UTF8String];

if(sqlite3_open(dbpath, &database) == SQLITE_OK)
{
    sqlite3_stmt *statement;

    NSData *strJson = [objGames getJSON];

    NSString *strContent = [[[[NSString alloc]
                              initWithData:strJson encoding:NSUTF8StringEncoding] stringByReplacingOccurrencesOfString:@"\\" withString:@""]stringByReplacingOccurrencesOfString:@"null" withString:@"\"\""];
    NSLog(@"strcom %@",strContent);
    NSString *query = [NSString stringWithFormat:@"UPDATE gamescore SET data ='%@' WHERE id = 1",strContent];
    NSLog(@"query %@",query); 
    const char *sqlStatement = [query UTF8String];
    if(sqlite3_prepare_v2(database, sqlStatement, -1, & statement, NULL) == SQLITE_OK)
    {
        sqlite3_exec(database, "VACUUM;", 0, 0, nil);
    }
    sqlite3_finalize(statement);
    sqlite3_close(database);
}
return success; 
```

}

# c - char* 分析/解析

> ID：15780951
> 
> 赞同：-2
> 
> 时间：2013-04-03T07:07:57.630
> 
> 标签：c, parsing, char

我有一个 char* 包含以下消息。“movie.mjpeg”名称的长度可变。如何分析 char*，以便将电影名称和 CSeq 编号保存在另一个变量中，然后丢弃 char*。

SETUP movie.Mjpeg RTSP/1.0 CSeq：1 传输：RTP/TCP；交错=0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:13:57.953

您可以对字符串进行标记以提取特定字段，例如：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char inpStr[] = "SETUP movie.Mjpeg RTSP/1.0 CSeq: 1"
                " Transport: RTP/TCP; interleaved=0";

int main (void) {
    char *name, *cseq;

    strtok (inpStr, " ");                  // SETUP
    name = strdup (strtok (NULL, " "));    // movie.Mjpeg

    strtok (NULL, " ");                    // RTSP/1.0
    strtok (NULL, " ");                    // CSeq:
    cseq = strdup (strtok (NULL, " "));    // 1

    printf ("Name is [%s], cseq is [%s]\n", name, cseq);

    free (name);
    free (cseq);

    return 0;
} 
```

这个的输出是：

```
Name is [movie.Mjpeg], cseq is [1] 
```

基本上，每次调用`strtok`都会为您提供下一个标记的地址，并适当分隔。`strdup` ^(对(a))的调用将确保您获得字符串的副本，而不是指向原始字符串的指针。使用指向原始字符串的指针意味着对一个字符串的更改会影响另一个。

请记住，这会更改原始字符串，因此，如果您不希望这样做，请确保使用*副本。*

* * *

^((a))标准 C 没有提供`strdup`，尽管它在许多实现中都可用。如果您的实现没有，请参见[此处](https://stackoverflow.com/questions/252782/strdup-what-does-it-do-in-c/252802#)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:08:08.647

假设静态字段确实是静态的，您可以使用它`sscanf()`来扫描出可变部分。

这样做的好处（？）不依赖于`strtok()`哪个是可怕的函数（它修改了输入字符串）。它还可以让您在同一操作中转换非字符串数据，这很方便。

```
const char *inpStr = "SETUP movie.Mjpeg RTSP/1.0 CSeq: 1 Transport: RTP/TCP; interleaved=0";
char  filename[128], transport[32];
int   cseq;

if(sscanf(inpStr, "SETUP %s RTSP/1.0 CSeq: %d Transport: %s;",
          filename, &cseq, transport) == 3)
{
  printf("Got filename '%s', cseq=%d, transport='%s'\n",
         filename, cseq, transport);
} 
```

请注意，检查的返回值`sscanf()`以确保它确实成功地转换了所有字段是一个好主意，否则您不能依赖存在的值。

# perl - 找到关键字后如何匹配整数？

> ID：15780955
> 
> 赞同：0
> 
> 时间：2013-04-03T07:08:10.607
> 
> 标签：perl, unix

我有一个文本文件内容如下：

```
 Starting log...
    Sample at 10000000
    Mode is set to 0
    0007F43: CHANGE DETECTED at  290313 line 0 from 00 to 04
    0007F46: Mismatched at 290316 line 0
    0007F50: Matched occur at 290326 line 1
    0007F53: Mismatched at 290336 line 2
    0007F56: Matched occur at 290346 line 0
    0007F60: Mismatched at 290356 line 2
    0007F63: Matched occur at 290366 line 0
    Saving log....
    DONE!!! 
```

我正在运行如下简单的 perl 程序来获取包含“不匹配”的行的值

```
#!/usr/bin/perl

print "Starting perl script\n\n";
open (LOG,"dump.log");

while (<LOG>) {
 next if !/Mismatched/;
 /at\s+"([^"]+)"/;
 print $1,"\n";
}
close(LOG);
print "DONE!!\n";
exit; 
```

但是我收到如下错误消息，我可以知道我的编码有什么问题吗？我是否错过了与 chomp() 相关的任何内容？

```
Use of uninitialized value in print at test.pl line 9, <LOG> line 5.
Use of uninitialized value in print at test.pl line 9, <LOG> line 7.
Use of uninitialized value in print at test.pl line 9, <LOG> line 9.
DONE!! 
```

并且.. 在使用更简单的脚本搜索关键字“不匹配”后，是否有任何建议来获取整数（即 290316）？我只想获得第一个值..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:11:51.037

即使没有任何东西，$1 也会被打印出来。它应该处于以下状态：

```
print $1,"\n" if (/Mismatched at (\d+)/); 
```

要将所有值存储在数组中：

```
push @arr,$1 if (/Mismatched at (\d+)/); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:15:20.710

将正则表达式更改为：

```
/at\s+(\d+)/; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:19:07.850

您已经得到了向您展示正确方法的答案，但还没有任何答案可以解释您做错了什么。问题出在您的正则表达式中。

```
/at\s+"([^"]+)"/ 
```

让我们分解它，看看它试图匹配什么。

*   `at`：字符串'at'
*   `\s+`: 一个或多个空格字符
*   `"`: 双引号字符
*   `([^"]+)`: 一个或多个非双引号字符
*   `"`: 双引号字符

因此，实际上，您正在寻找 'at' 后跟双引号字符串。而且您正在捕获（进入`$1`）双引号字符串的内容。

但是您的所有数据都不包含任何双引号字符。所以没有双引号字符串。因此，没有任何东西匹配，也没有任何东西被捕获到`$1`. 这就是为什么您在尝试打印时收到“未初始化值”错误的原因`$1`。

我很想听听您为什么认为要在不包含任何双引号字符的文本中匹配双引号字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:24:29.963

我会更改您的脚本以实现更现代的 perl 样式：

```
#!/usr/bin/perl

use strict;
use warnings;

print "Starting perl script\n\n";
open my $LOG, '<', 'dump.log' or die $!;

while( <$LOG> ) {
  print "$1\n" if /Mismatched at (\d+)/;
}
close $LOG;
print "DONE!!\n"; 
```

# git - 如何将 Git 存储库组合成线性历史？

> ID：15780956
> 
> 赞同：15
> 
> 时间：2013-04-03T07:08:13.670
> 
> 标签：git, merge, git-rewrite-history, git-branch-sculpting

我有两个 git 存储库`R1`和`R2`，其中包含来自产品开发的两个时期的提交：1995-1997 和 1999-2013。（我通过将现有的 RCS 和 CVS 存储库转换为 Git 来创建它们。）

```
R1:
A---B---C---D

R2:
K---L---M---N 
```

如何将两个存储库组合成一个包含项目线性历史准确视图的存储库？

```
A---B---C---D---K---L---M---N 
```

请注意，已添加、删除和重命名了 between`R1`和文件。`R2`

我尝试创建一个空存储库，然后将它们的内容合并到其中。

```
git remote add R1 /vol/R1.git
git fetch R1

git remote add R2 /vol/R2.git
git fetch R2

git merge --strategy=recursive --strategy-option=theirs R1
git merge --strategy=recursive --strategy-option=theirs R2 
```

但是，这会保留在 revision`D`中但不在 revision 中的文件`K`。我可以制作一个合成提交来删除合并之间的额外文件，但这对我来说似乎不优雅。此外，通过这种方法，最终结果包含实际上并未发生的合并。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T04:06:06.163

### 使用 git 过滤器分支

直接使用[git-filter-branch](https://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)手册页中的技巧：

首先，创建一个新的存储库，将两个原始存储库作为远程存储库，就像您之前所做的那样。我假设两者都使用分支名称“master”。

```
git init repo
cd repo
git remote add R1 /vol/R1.git
git fetch R1
git remote add R2 /vol/R2.git
git fetch R2 
```

接下来，将“master”（当前分支）指向 R2 的“master”的尖端。

```
git reset --hard R2/master 
```

现在我们可以将R1的“主人”的历史嫁接到开始了。

```
git filter-branch --parent-filter 'sed "s_^\$_-p R1/master_"' HEAD 
```

换句话说，我们在之间插入了一个假的父提交`D`，`K`所以新的历史看起来像：

```
A---B---C---D---K---L---M---N 
```

`K`through的唯一变化`N`是它`K`的父指针发生了变化，因此所有的 SHA-1 标识符都发生了变化。提交消息、作者、时间戳等保持不变。

### 将两个以上的存储库与 filter-branch 合并在一起

如果您有两个以上的存储库要做，比如 R1（最旧的）到 R5（最新的），只需按时间顺序重复`git reset`and`git filter-branch`命令。

```
PARENT_REPO=R1
for CHILD_REPO in R2 R3 R4 R5; do
    git reset --hard $CHILD_REPO/master
    git filter-branch --parent-filter 'sed "s_^\$_-p '$PARENT_REPO/master'"' HEAD
    PARENT_REPO=$CHILD_REPO
done 
```

### 使用移植物

作为使用 to`--parent-filter`选项的替代方法`filter-branch`，您可以改用[嫁接](https://git.wiki.kernel.org/index.php/GraftPoint)机制。

`R2/master`考虑作为 (即，newer than) 的子元素追加的原始情况`R1/master`。和以前一样，首先将当前分支 ( `master`)指向`R2/master`.

```
git reset --hard R2/master 
```

现在，不用运行`filter-branch`命令，而是创建一个“graft”（假父）`.git/info/grafts`，将 () 的[“根”（最旧）提交](https://stackoverflow.com/a/1007545/303425)链接到`R2/master`( `K`) 中的尖端（最新）`R1/master`提交`D`。（如果 的根有多个`R2/master`，下面只链接其中一个。）

```
ROOT_OF_R2=$(git rev-list R2/master | tail -n 1)
TIP_OF_R1=$(git rev-parse R1/master)
echo $ROOT_OF_R2 $TIP_OF_R1 >> .git/info/grafts 
```

此时，您可以查看您的历史记录（例如，通过`gitk`），看看它是否正确。如果是这样，您可以通过以下方式使更改永久生效：

```
git filter-branch 
```

最后，您可以通过删除移植文件来清理所有内容。

```
rm .git/info/grafts 
```

使用移植可能比使用更多工作`--parent-filter`，但它确实具有能够将两个以上的历史移植在一起的优势`filter-branch`。（您可以对 执行相同的操作`--parent-filter`，但脚本会很快变得非常难看。）它还有一个优点是可以让您在更改变为永久之前看到它们；如果它看起来很糟糕，只需删除移植文件即可中止。

### 将两个以上的存储库与移植物合并在一起

要使用 R1（最旧）到 R5（最新）的嫁接方法，只需在嫁接文件中添加多行即可。（运行命令的顺序`echo`无关紧要。）

```
git reset --hard R5/master

PARENT_REPO=R1
for CHILD_REPO in R2 R3 R4 R5; do
    ROOT_OF_CHILD=$(git rev-list $CHILD_REPO/master | tail -n 1)
    TIP_OF_PARENT=$(git rev-parse $PARENT_REPO/master)
    echo "$ROOT_OF_CHILD" "$TIP_OF_PARENT" >> .git/info/grafts
    PARENT_REPO=$CHILD_REPO
done 
```

### git rebase 怎么样？

其他几个人建议使用`git rebase R1/master`而不是`git filter-branch`上面的命令。这将获取空提交之间的差异`K`，然后尝试将其应用于`D`，从而导致：

```
A---B---C---D---K'---L'---M'---N' 
```

这很可能会导致合并冲突，如果在和`K'`之间删除文件，甚至可能导致创建虚假文件。唯一可行的情况是和的树是相同的。`D``K``D``K`

（另一个细微的区别是它`git rebase`改变了提交者的信息`K'`through `N'`，而`git filter-branch`没有。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-22T00:09:07.097

原始海报说：

> ```
> R1:
> A---B---C---D
> 
> R2:
> K---L---M---N 
> ```
> 
> 如何将两个存储库组合成一个包含项目线性历史准确视图的存储库？
> 
> 如何将两个存储库组合成一个包含项目线性历史准确视图的存储库？
> 
> ```
> A---B---C---D---K---L---M---N 
> ```
> 
> 请注意，*R1*和*R2*之间的文件已被添加、删除和重命名。

所以我肯定知道，如果新仓库的`K`第一次提交与旧仓库的最后一次提交相同或略有修改`D`，那么您可以简单地将 fetch`R1`的历史记录到`R2`中，然后将提交图重新定位`R2`到图上来自`R1`：

```
# From R2
git fetch R1
git checkout master
git rebase --onto R1/master --root 
```

### 非线性历史（当你有合并提交时）

那是假设`R2`的图是*线性*的。如果它有合并提交，您可以通过指定要保留合并提交来尝试做同样的事情，

```
git rebase --preserve-merges --onto R1/master --root 
```

但是，如果您必须解决任何您正在变基的合并中的冲突，您可能需要再次重新解决它们，这可能会很麻烦。

### 结合两种截然不同的历史？

原海报说：

> 请注意，*R1*和*R2*之间的文件已被添加、删除和重命名。

正如我上面所指出的，如果新仓库的`K`第一次提交 , 与旧仓库的最后一次提交相同或仅略有不同，则简单的 rebase 应该可以工作`D`。我不确定如果`K`实际上与`D`. `K`我想在最坏的情况下，您可能必须在 rebase的第一次应用期间解决很多冲突。

## 文档

*   [git-rebase(1) 手册页](https://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T01:09:18.073

这就是我所做的工作：

```
git init
git remote add R1 /vol/R1.git
git fetch R1
git remote add R2 /vol/R2.git
git fetch R2
git co -B master R2/master
git rebase R1/master
git push -f 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T04:12:51.607

您所需要的只是： `git rebase`紧随其后的是您要变基的分支。

简而言之，rebase 会回滚分支的所有提交，并将它们与您正在变基的分支的提交合并。

根据两个分支之间的差异程度，您可能会遇到冲突。但是使用任何其他方法都无法避免相同的冲突。

祝你好运！

# c++ - 在嵌入式 c++ python 编辑器中使用键盘中断销毁 tkinter 图形

> ID：15780957
> 
> 赞同：1
> 
> 时间：2013-04-03T07:08:22.523
> 
> 标签：c++, python, python-3.x, matplotlib, tkinter

我在 C++ 应用程序中添加了一个 python 编辑器。为了能够在用户按下 ctrl-c 时停止 python 进程，我有 2 个线程：

1-第一个运行python字符串；

2-第二个轮询键盘以检查键盘中断。

我使用微软并发库来创建线程：

```
auto task1 = Concurrency::make_task([&] 
{
    task1_id = GetCurrentThreadId();
    Run(Script);
    bFinish = true;
});

auto task2 = Concurrency::make_task([&] 
{
    while(true)
    {
        if ((GetKeyState (0x43) < 0 && (GetKeyState (VK_CONTROL) < 0)) && task1_id != 0)
        {
            PyGILState_STATE gstate;
            gstate = PyGILState_Ensure();
            int t = PyThreadState_SetAsyncExc(task1_id,PyExc_KeyboardInterrupt);
            PyGILState_Release(gstate);
            break;
        }
        else if(bFinish)
        {
            break;
        }
        else
        {
            Sleep(10);
        }
    }
});

m_tasks.run(task2);
Concurrency::task_group_status test = m_tasks.run_and_wait(task1); 
```

这通常工作得很好。如果发生 ctrl-c 事件，则会在“脚本线程”上发生键盘中断事件，并且一切都会停止。

当我使用 matplotlib 创建一些图形并在图形仍处于打开状态时发送 ctrl-c 事件时出现问题。该事件将像以前一样停止一切，但 tkinter 窗口不会被破坏，单击它们会出现运行时错误：

```
Fatal Python error: PyEval_RestoreThread: NULL tstate 
```

有什么办法可以强制这些窗口被 keybordinterrupt 异常正确破坏？

# ios - 使用 iOS Keychain 存储 API 调用的密钥和秘密

> ID：15780966
> 
> 赞同：2
> 
> 时间：2013-04-03T07:09:04.053
> 
> 标签：ios, ios6, keychain, read-write

我正在使用[Apple 代码将 API 调用所需的密钥和秘密存储在 iOS 钥匙串中](http://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html)

每次调用 API 后，我的密钥和秘密都会不断变化。因此，一旦更改它们，我就会再次将它们保存在钥匙串中。所以我经常访问 iOS 钥匙串。我的问题是

1.  可以在 iOS 钥匙串中存储密钥和秘密吗？
2.  Apple 是否允许这样做，因为我每次需要调用 API 时都在访问钥匙串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T22:49:24.657

当然。这就是它的用途。

每次你想上车时，你都会访问你的钥匙链，对吧？

# java - HBase-0.90.6 在 hbase-site xml 文件中的 Window 7 错误中配置

> ID：15780967
> 
> 赞同：2
> 
> 时间：2013-04-03T07:09:08.180
> 
> 标签：java, hadoop, hbase

我已经成功安装了**java 1.6 和 hadoop-1.0.3**。现在我想在窗口 7 中**使用 hadoop 配置 HBase-0.90.6。根据**[hbase 文档](http://hbase.apache.org/cygwin.html)，我必须更改**hbase-env.sh**但**hbase-site.xml 会**产生问题。

**在 hbase-site.xml 中编辑**

```
<property>
    <name>hbase.rootdir</name>
    <value>hdfs://localhost:8020</value>
</property> 
```

**在浏览器中打开 xml 文件时显示**

![在此处输入图像描述](https://i.stack.imgur.com/9sRTY.png)

所以请建议如何解决这个问题？如何提供路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T17:06:06.410

我认为至少值得重新检查[HBase 参考指南的](http://hbase.apache.org/book/book.html)[这一章](http://hbase.apache.org/book/config.files.html#hbase_default_configurations)，特别是与 CLASSPATH 相关的子章 2.3.4 建议。

# android - 在 android webview 文本对齐中出现问题

> ID：15780972
> 
> 赞同：2
> 
> 时间：2013-04-03T07:09:29.183
> 
> 标签：android, webview

我是安卓新手。我正在为安卓设备开发 epub 阅读器。webview 以左对齐显示文本。我希望它是合理的。我不确定这是文本对齐问题。

这是我的网络视图设置：

```
final WebView mainWebView = (WebView) findViewById(R.id.webView1);
    WebSettings webSettings = mainWebView.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webSettings.setUseWideViewPort(true);
    webSettings.setLoadWithOverviewMode(true);
    mainWebView.setWebViewClient(new MyCustomWebViewClient());
    mainWebView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
    mainWebView.loadUrl("my html page");// loding my html pages here
    mainWebView.getSettings().setUseWideViewPort(true); 
```

我使用此代码进行文本对齐

```
mainWebView.loadUrl("javascript:(function addCSSRule(selector, newRule) { " +  
        "var mySheet = document.styleSheets[0];"+
           "if (mySheet.addRule) { " +  
           "mySheet.addRule(selector, newRule);"    +   
           "} else {"+
           "ruleIndex = mySheet.cssRules.length;"+
           "mySheet.insertRule(selector + '{' + newRule + ';}', ruleIndex);" +
           "}"+
           "})addCSSRule(selector, newRule)");  
  mainWebView.loadUrl("javascript:addCSSRule('p', 'text-align: justify;');"); 
```

如果我删除 `mainWebView.getSettings().setUseWideViewPort(true);`意味着我得到了证明文本。

网页浏览截图：

![在此处输入图像描述](https://i.stack.imgur.com/FP9uO.png)

我希望它是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/7G3QJ.png)

我不知道我的代码有什么问题。`mainWebView.getSettings().setUseWideViewPort(true);`允许缩放。不知道为什么它会杀死文本对齐。请帮助我克服这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-24T10:05:26.193

您似乎没有将 webSettings 应用于 web 视图。我正在寻找类似的东西

```
webView.getSettings().setJavaScriptEnabled(true);
webView.loadUrl(url); 
```

所以也许你的javascript没有触发，因为它没有打开......？

# linux - 如何使用 poll linux 函数调用来使用静态文件描述符？

> ID：15780976
> 
> 赞同：0
> 
> 时间：2013-04-03T07:09:42.480
> 
> 标签：linux, file-io, polling

poll 运行无限时间间隔。我希望在将某些内容写入文件或更新文件时进行轮询。但 poll 无法检测何时写入文件。

```
 #include <stdio.h>
        #include <poll.h>
        #include <stdlib.h>
        #include <fcntl.h>
        #include <errno.h>
        #include <sys/types.h>
        #include <unistd.h>

        int main() {
                char buf[5]="true";
                struct pollfd ufds[1];
                int rv;
                ufds[0].fd = 0;
                ufds[0].events = POLLIN;
                char *filename="textfile.txt";
                ssize_t ret_write,ret_read;

                ufds[0].fd = open(filename, O_WRONLY | O_CREAT | O_TRUNC, 5);
                if(ufds[0].fd== -1){
                perror("open");
                return 3; 
                } 

                while(1) {

                        ret_write= write (ufds[0].fd, &buf, (ssize_t) 5);

                        if((rv = poll(ufds, 1,-1 )) == -1) perror("select");
                        else if (rv == 0) printf("Timeout occurred!\n");
                        else if (ufds[0].revents & POLLIN) {
                                printf("return hit\n");
                                read(ufds[0].fd, buf, 5);
                        }
                        fflush(stdout);
                }
                return 0;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:34:07.453

您的示例无法工作，因为该文件未打开以供阅读。即使打开文件进行读取，代码也不会按预期工作，因为 poll 会在文件末尾成功返回。

你想要的是 inotify 函数。请先自己尝试，并在代码未按预期工作时提出问题。

# deployment - 插件 'org.apache.maven.plugins:maven-jboss-as-plugin' 不存在或找不到有效版本

> ID：15780978
> 
> 赞同：2
> 
> 时间：2013-04-03T07:09:52.200
> 
> 标签：deployment, maven-2, jboss7.x

[如无法连接到远程：//本地主机：9999](https://stackoverflow.com/questions/15757757/could-not-connect-to-remote-localhost9999-the-connection-timed-out-jboss-7-1)中所述，我遇到了 Jboss AS 7.1.1 最终部署的部署错误。[连接超时 Jboss 7.1.1 Final](https://stackoverflow.com/questions/15757757/could-not-connect-to-remote-localhost9999-the-connection-timed-out-jboss-7-1)。我正在尝试使用来自“7.1.1.Final”的最新版本的 Jboss Maven 插件“7.4.Final”。当我更改 POM 配置时，两个版本的插件都出现以下错误。我已经确认我的 .m2 有这两个插件版本可用。

在我的情况下，POM 元数据是否损坏，如果是，我该如何清理它以使其正常工作？

```
[INFO] Searching repository for plugin with prefix: 'jboss-as'.
[DEBUG] Loading plugin prefixes from group: org.apache.maven.plugins
[DEBUG] Loading plugin prefixes from group: org.codehaus.mojo
[DEBUG] maven-jboss-as-plugin: using locally installed snapshot
[DEBUG] Artifact not found - using stub model: Unable to determine the latest version

  org.apache.maven.plugins:maven-jboss-as-plugin:pom:LATEST

[DEBUG] Using defaults for missing POM org.apache.maven.plugins:maven-jboss-as-plugin:pom:LATEST
[DEBUG] maven-jboss-as-plugin: using locally installed snapshot
[DEBUG] Artifact not found - using stub model: Unable to determine the release version

  org.apache.maven.plugins:maven-jboss-as-plugin:pom:RELEASE

[DEBUG] Using defaults for missing POM org.apache.maven.plugins:maven-jboss-as-plugin:pom:RELEASE
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] The plugin 'org.apache.maven.plugins:maven-jboss-as-plugin' does not exist or no valid version could be found
[INFO] ------------------------------------------------------------------------
[DEBUG] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: The plugin 'org.apache.maven.plugins:maven-jboss-as-plugin' does not exist or no valid version could be found
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.verifyPlugin(DefaultLifecycleExecutor.java:1569)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.getMojoDescriptor(DefaultLifecycleExecutor.java:1851)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.segmentTaskListByAggregationNeeds(DefaultLifecycleExecutor.java:462)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:175)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
        at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.version.PluginVersionNotFoundException: The plugin 'org.apache.maven.plugins:maven-jboss-as-plugin' does not exist or no valid version could be found
        at org.apache.maven.plugin.version.DefaultPluginVersionManager.resolvePluginVersion(DefaultPluginVersionManager.java:229)
        at org.apache.maven.plugin.version.DefaultPluginVersionManager.resolvePluginVersion(DefaultPluginVersionManager.java:91)
        at org.apache.maven.plugin.DefaultPluginManager.verifyPlugin(DefaultPluginManager.java:179)
        at org.apache.maven.plugin.DefaultPluginManager.loadPluginDescriptor(DefaultPluginManager.java:1642)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.verifyPlugin(DefaultLifecycleExecutor.java:1540)
        ... 15 more 
```

**更新** POM.xml

```
<build>

        <pluginManagement>

            <plugins>

                <plugin>

                    <groupId>org.apache.maven.plugins</groupId>

                    <artifactId>maven-compiler-plugin</artifactId>

                    <configuration>

                        <source>1.6</source>

                        <target>1.6</target>

                    </configuration>

                </plugin>

         <!-- continue build even test fails -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.12</version>
                <configuration>
                    <testFailureIgnore>true</testFailureIgnore>
                </configuration>
            </plugin>
<plugin>
        <groupId>org.jboss.as.plugins</groupId>
            <artifactId>jboss-as-maven-plugin</artifactId>
            <version>7.4.Final</version>
            <configuration>
               <filename>${project.build.finalName}.jar</filename>
            <username>${userName}</username>
                <password>${password}</password>

            </configuration>

                </plugin>

            </plugins>

        </pluginManagement>

    </build> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:36:00.943

堆栈跟踪显示我们为

```
[INFO] ------------------------------------------------------------------------
[INFO] The plugin 'org.apache.maven.plugins:maven-jboss-as-plugin'
       does not exist or no valid version could be found
[INFO] ------------------------------------------------------------------------ 
```

应该是`org.jboss.as.plugins:jboss-as-maven-plugin`。

[JBoss Application Server 7：插件文档](https://docs.jboss.org/jbossas/7/plugins/maven/latest/plugin-info.html)告诉我们配置如下： -

```
 <project>
      ...
      <build>
        <!-- To define the plugin version in your parent POM -->
        <pluginManagement>
          <plugins>
            <plugin>
              <groupId>org.jboss.as.plugins</groupId>
              <artifactId>jboss-as-maven-plugin</artifactId>
              <version>7.4.Final</version>
            </plugin>
            ...
          </plugins>
        </pluginManagement>
        <!-- To use the plugin goals in your POM or parent POM -->
        <plugins>
          <plugin>
            <groupId>org.jboss.as.plugins</groupId>
            <artifactId>jboss-as-maven-plugin</artifactId>
            <version>7.4.Final</version>
          </plugin>
          ...
        </plugins>
      </build>
      ...
    </project> 
```

请检查并确保插件`org.jboss.as.plugins:boss-as-maven-plugin`位于`<build>`您的`pom.xml`.

我希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T17:16:24.837

我面临着类似的问题。这个问题是由于 maven2.2.1 的旧版本造成的。当移动到 Maven 的较新 version3.x 时，它起作用了。

# android - 在我的布局中打开 pdf，无需任何离线查看器

> ID：15780981
> 
> 赞同：0
> 
> 时间：2013-04-03T07:10:05.043
> 
> 标签：android

我正在创建学校应用程序，我想在我的布局中打开 pdf，我使用 pdfviewer 但该课程将 pdf 转换为图像并在该课程视图中查看。有什么方法可以在没有任何查看器的情况下在我的应用程序中打开 pdf，而且我没有使用任何网络连接，所以我无法使用 google doc 打开我的 pdf。

那么如何在我的布局中打开 pdf 我展示了这个示例[实现 PDF 阅读器的代码示例，](https://stackoverflow.com/questions/11152956/example-of-code-to-implement-a-pdf-reader/11153601#11153601)但这在 pdfviewer 类布局中显示，而不是在我的布局中。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:09:37.697

你试过[MuPDF](http://www.mupdf.com/doc/how-to-build-mupdf-for-android)吗？

您可以在布局中嵌入 MuPDFReaderView。这是一个伪代码；在您的活动中：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /* First create the document view */
    mDocView = new MuPDFReaderView(this) {
        @Override
        protected void onMoveToChild(int i) {
            super.onMoveToChild(i);
            Log.d("MyTAG", "pages: " + 
                String.format("%d / %d", i + 1, core.countPages()));
        }

        @Override
        protected void onTapMainDocArea() {
            Log.d("MyTAG", "onTapMainDocArea");
        }

        @Override
        protected void onDocMotion() {
            Log.d("MyTAG", "onDocMotion");
        }
    };

    /* Set the rendering mode */
    mDocView.setMode(MuPDFReaderView.Mode.Drawing);

    /* Load the PDF document... */
    core = new MuPDFCore(path_to_your_pdf_file);
    /* ...and connect the core at the view */
    mDocView.setAdapter(new MuPDFPageAdapter(this, core));

    /* Add the MuPDFReaderView to this layout */
    RelativeLayout layout = new RelativeLayout(this);
    layout.addView(mDocView);
    /* Add more views layout.addView(myOtherView); */
    setContentView(layout);

    /* TODO ...your other code... */        
} 
```

# objective-c - 使用 google maps API URL 搜索附近的地方给出 Request Denied

> ID：15780982
> 
> 赞同：0
> 
> 时间：2013-04-03T07:10:06.943
> 
> 标签：objective-c, json, html, google-maps, google-maps-api-3

嗨，我想使用当前位置查找附近的地方。我浏览了许多文档，还登录了 developer.google.com/console 并创建了新项目。在服务中我启用了 google api 服务，但是当我尝试将其放在下面的链接中时浏览器[https://maps.googleapis.com/maps/api/place/search/json?location=12.91136601187478,77.598882598177313&radius=5000@&types=bar@&sensor=true&key=MYkey](https://maps.googleapis.com/maps/api/place/search/json?location=12.91136601187478,77.598882598177313&radius=5000@&types=bar@&sensor=true&key=MYkey)

它给

```
 {`"html_attributions" : [],``
   "results" : [],
  "status" : "REQUEST_DENIED" 
```

}`

为什么会这样？？即使浏览了许多文档，我也无法找到解决方案，任何人都可以告诉我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T09:38:19.847

使用 Google nearBySearch。

有例子： [https ://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere](https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere)

在下面的链接中，您可以找到完整的规格。在您的请求中，您需要填写所有必需的参数（位置、半径、传感器和 AppKey），否则您将收到“REQUEST_DENIED” [https://developers.google.com/places/documentation/search](https://developers.google.com/places/documentation/search)

不要忘记在开发者控制台下打开服务“Places API”。

# javascript - 带有拖放 Facebook 好友的流程图

> ID：15780984
> 
> 赞同：1
> 
> 时间：2013-04-03T07:10:14.833
> 
> 标签：javascript, html, facebook-graph-api

我是一名业余网站设计师。我想创建一个委员会的流程图，并允许网络管理员将他的 facebook 朋友拖放到流程图中以填补委员会中的角色。流程图旁边应该有一个朋友选择器，当放入流程图时，应该将朋友添加到 Facebook 组中。

谁能指出我需要这样做的工具？

谢谢。

# asp.net - 是否可以在多行文本框中为文本放置不同的颜色

> ID：15780986
> 
> 赞同：1
> 
> 时间：2013-04-03T07:10:23.867
> 
> 标签：asp.net, fonts, textbox, multiline

我有一个带有多行选项的文本框。现在我想在文本框中输入不同字体大小和不同颜色的单词。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:16:44.203

这不可能..您可以使用 WYSWYG 编辑器，例如 [http://nicedit.com/](http://nicedit.com/)

# java - 如何使用java用arraylist元素替换字符串

> ID：15780988
> 
> 赞同：-5
> 
> 时间：2013-04-03T07:10:32.943
> 
> 标签：java

我有一个字符串和数组列表元素。

例如 ：

```
String mystring = handbagging
ArrayList a = [ing, bag,and]; 
```

我想用数组列表元素替换字符串并让它成为`"h+and+bag+g+ing"`

请提出任何想法。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:28:23.150

我不确定我是否理解你的问题。您可以使用 a`StringBuilder`从多个字符串构建一个字符串，如下所示：

```
 StringBuilder builder = new StringBuilder();
    for(String s : myListWithString) {
      builder.append(s);
    }
   String resultString = builder.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:39:45.740

我不明白你想在这里做什么。但为了抢先一步，我将与您分享一个示例代码，它将为您提供您提到的输出。
**注意：**这不是优化的解决方案。
如果有重复的字符串我只是试图给你一个算法，这将不起作用
，你可以想出你自己的解决方案，因为你知道你真正想要什么。
不要做这些字符串操作，使用 stringBuffer 或 StringBuilder

```
String mystring = "handbagging";
        ArrayList<String> a = new ArrayList<String>();
        a.add("ing");
        a.add("bag");
        a.add("and");
        System.out.println(mystring);
        for (Iterator<String> iterator = a.iterator(); iterator.hasNext();) {
            String string = iterator.next();
            if(mystring.contains(string)){
                int index = mystring.indexOf(string);
                mystring = mystring.substring(0, index) + "+" + string + "+" + mystring.substring(index + string.length());
            }
        }

        if(mystring.endsWith("+")){
            mystring = mystring.substring(0, mystring.length() - 1);
        }
        while(mystring.contains("++")){
            mystring = mystring.replace("++", "+");
        }
        System.out.println( "---" + mystring); 
```

# java - 在 Seam 框架中将会话值从动作传递到 servlet

> ID：15780992
> 
> 赞同：0
> 
> 时间：2013-04-03T07:10:45.000
> 
> 标签：java, jsf, servlets, seam

我在 TestAction 类中设置会话对象，当我试图在 TestServlet 中获取会话对象时，它返回 null。任何人请告诉我如何将会话从动作类传递到 Seam 框架中的 servlet。

```
@Scope(ScopeType.EVENT)
@Name("testAction  ")
public class TestAction  {

    public void setSessionObj(){

        FacesContext facesContext = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(false);
        session.setAttribute("temp", "124563");
    }
} 
```

//Servlet 从这里开始

```
 public class TestServlet extends HttpServlet {

        public void init(ServletConfig servletConfig) throws ServletException {
            super.init(servletConfig);
            servletContext = servletConfig.getServletContext();

        }

        protected String doExecute(HttpServletRequest request,
                HttpServletResponse response) throws Exception {

                 Session session =    request.getSession(false);
            String user1 = (String) session .getAttribute("temp");
        }
    } 
```

下面是调试会话实例的观察

我检查了会话对象实例，以防我在操作和 servlet 中得到什么，它们都是不同的会话实例。例如，实例是 StandardSession[41CBDED6EBBBBECEBA001A70555F51CA5]，而我在 servlet 中得到的是 StandardSession[EACBDED6E34BECEB3401A70555F51CA5]，我得到不同会话实例的任何原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:18:36.590

不需要通过`FacesContext`servlet 中的 访问会话属性。只需用于`request.getSession()`获取会话。只要您的请求实际上来自同一个会话，会话属性就应该在 servlet 中可用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-03T07:32:44.373

我将使用通过 CDI / Spring 注入到 JSF Managed Bean 和 servlet 中的代理对象。

这个例子创建了一个 CDI Bean，它在整个时间内保持活动状态，并且只存储一个字符串。通过依赖注入，两个组件都可以访问它。

在 META-INF 资源文件夹下创建一个空的 bean.xml 文件

```
@Named
@ApplicationScoped
public class Container{
 private String temp;

 public Container(){

 }
 public void setTemp(String temp) {
  this.temp = temp;
 }

 public String getTemp() {
  return temp;
 }
}

@Scope(ScopeType.EVENT)
@Name("testAction  ")
public class TestAction  {

 @Inject 
 Container container;

public void setSessionObj(){
 container.setTemp("123456");

}
} 
```

//Servlet 从这里开始

```
public class TestServlet extends HttpServlet {

@Inject
Container container; 
    public void init(ServletConfig servletConfig) throws ServletException {
        super.init(servletConfig);
        servletContext = servletConfig.getServletContext();

    }

    protected String doExecute(HttpServletRequest request,
            HttpServletResponse response) throws Exception {

             Session session =    request.getSession(false);
        String user1 = container.getTemp();
    }
} 
```

# android - 在 Android 中查找中键

> ID：15780993
> 
> 赞同：0
> 
> 时间：2013-04-03T07:10:45.547
> 
> 标签：android, touch, touch-event, ontouchlistener

我正在使用以下方法在我的 android 应用程序上获取触摸事件。我需要确定中间接触。我如何识别用户何时触摸屏幕中间？

```
@Override
public boolean onTouch(View v, MotionEvent mev) {
int width = v.getWidth();
int height = v.getHeight();
float x = mev.getX();
float y = mev.getY();

String msg;
if (x < width / 2) {
    if (y < height / 2)
        msg = "Top left quarter";
    else
        msg = "Bottom left quarter";

} else {
    if (y < height / 2)
        msg = "Top right quarter";
    else
        msg = "Bottom right quarter";
}

    Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:14:00.527

这取决于什么是“中间”。假设中间是一个 80 x 80 像素的正方形：

```
int midX = width / 2;
int midY = height / 2;

if (midX - 40 < x && x < midX + 40 && midY - 40 < y && y < midY + 40)
    CENTER!!! 
```

# groovy - groovy.lang.MissingMethodException：没有方法签名

> ID：15780994
> 
> 赞同：2
> 
> 时间：2013-04-03T07:10:47.170
> 
> 标签：groovy

我收到以下错误 - groovy.lang.MissingMethodException：没有方法签名：Script64$_run_closure5_closure7_closure8_closure9_closure10_closure11.doCall() 适用于参数类型：(java.lang.String) 值：可能的解决方案：doCall(java.lang.Object , java.lang.Object), isCase(java.lang.Object), isCase(java.lang.Object) 错误在行：

```
Code -  EDIT
import groovy.xml.*

List tempList = []
List listgenerated = []

def count = 0
for (a in 0..totalCount-1)
{ 

    //nameList and valueList lists will have all the contents added as below   commented pseudo code 
    /*for (b in 0..50) 
    { 
        nameList.add(b,number)     // number is some calculated value
        valueList.add(b,number)
        e.g. nameList=[name1, name2, name3,name4, name5]
             valueList =[val1, val2, val3, , val5]  

             listgenerated should be = [[name1:val1, name2:val2], [name3:val3, name4: , name5:val5]]                          
    } */

        tempList = []

        for (j in count..nameList.size())
        {
                count = j                             
                def nameKey =  nameList[j]
                def value
                if (nameKey != null)
                {
                    value =  valueList[j]
                    tempList << [(nameKey) : value]

                }                               
        }    
            count = count 
            listgenerated.putAt(a,tempList) 
            number = number +1
}   

def process = { binding, element, name ->
  if( element[ name ] instanceof Collection ) {
    element[ name ].each { n ->
      binding."$name"( n )
    }
  }
  else if( element[ name ] ) {
    binding."$name"( element[ name ] )
  }
}

class Form {
  List fields  
}

def list = [[ name:'a', val:'1' ], [ name:'b', val :'2', name2:4, xyz:'abc', pqr:'']]  //Edited list
f = new Form( fields: list )            //Works fine
f = new Form( fields: listgenerated )   //Gives the above error

String xml = XmlUtil.serialize( new StreamingMarkupBuilder().with { builder ->
  builder.bind { binding ->
    data {
      f.fields.each { fields ->
        item {
          fields.each { name, value ->
            process( binding, fields, name )
          }
        }
      }
    }
  }
} ) 
```

如果在创建“列表生成”时在值周围添加单引号，它会将其作为字符，并且在打印两个列表时看起来不同。我无法弄清楚到底出了什么问题。任何帮助表示赞赏。谢谢。Ref - [Groovy：为具有属性集合的对象集合动态创建 XML](https://stackoverflow.com/questions/14279092/groovy-dynamically-create-xml-for-collection-of-objects-with-collections-of-pro)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:03:57.363

我相信，你在哪里：

```
//some loop to add multiple values to the list
listgenerated << name+":"+value 
```

你需要做：

```
//some loop to add multiple values to the list
listgenerated << [ (name): value ] 
```

并将地图添加到列表而不是字符串。很难说，因为您的代码示例不会在没有更改的情况下运行，而且我不知道是否是解决问题的更改

# java - 将 java.sql.Date 格式的 String 转换为 java.util.date 格式的 String

> ID：15780995
> 
> 赞同：2
> 
> 时间：2013-04-03T07:10:55.517
> 
> 标签：java, date

我正在尝试将 sql 日期字符串转换为正常日期，但我收到了这个异常

> java.text.ParseException: Unparseable date: "2013-03-11" at java.text.DateFormat.parse(Unknown Source) at com.ninenexus.simplesignworkflow.Task.getTaskDetails(Task.java:1385) at org.apache。 jsp.task_jsp._jspService(task_jsp.java:259) at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) at javax.servlet.http.HttpServlet.service(HttpServlet.java:722) at org .apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:417) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391) 在 org.apache.jasper.servlet.JspServlet.service(JspServlet .java:334) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:306) 在 org.apache.catalina。core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100) 在 org.apache.catalina.core.StandardEngineValve.invoke (StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:380) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243) 在 org.apache。 coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188) 在 org.apache.coyote.http11。Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:288) at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)

我想要这样

从`"2013-03-11"`到`"11/03/2013"` 我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:14:22.633

你的所作所为简直不合理。

首先，java.sql.Date 已经是 java.util.Date。

其次， java.sql.Date 不是 SQL 日期字符串。java.sql.Date 和 java.util.Date 都与日期的显示格式无关。即没有一个包含“2013-03-11”的日期，而另一个包含“11/03/2013”​​的日期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T07:14:55.533

```
DateFormat df = new SimpleDateFormat("dd/MM/yyyy");  
String text = df.format(date);  

System.out.println("The date is: " + text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-28T05:19:31.213

以这种方式尝试：

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
Date date = df.parse("2013-03-11");   // convert string to date
df=new SimpleDateFormat("dd/MM/yyyy");
// date formatted in whatever format you want. 
System.out.println("The date is: " + df.format(date)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T08:06:32.220

借助`SimpleDateFormat`类和`parse`日期字符串来获取`Util Date object`.

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

    public class DateConverter {

        public static void main(String[] args) throws ParseException {

            String dateString = "03/04/2013";
            Date utiDate;
            SimpleDateFormat dateFormater = new SimpleDateFormat("dd/MM/yyyy");
            utiDate = dateFormater.parse (dateString);
            System.out.println(utiDate);
        }
    } 
```

# playframework - 在 Play 2.0 中找不到 Quartz 2.1 的作业类

> ID：15780999
> 
> 赞同：0
> 
> 时间：2013-04-03T07:11:16.270
> 
> 标签：playframework, playframework-2.0, quartz-scheduler

石英 2.1.7 玩 2.1

我已经设置了quartz 以使用JDBC 作业存储来存储所有作业详细信息和触发器。这是我的配置

```
org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount = 3
org.quartz.scheduler.instanceName = Sched1
org.quartz.scheduler.instanceId = 1
org.quartz.scheduler.rmi.export = false
org.quartz.scheduler.rmi.proxy = false

org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX
org.quartz.jobStore.driverDelegateClass =          
org.quartz.impl.jdbcjobstore.StdJDBCDelegate

org.quartz.jobStore.dataSource = TaskScheduler
org.quartz.dataSource.TaskScheduler.driver = com.mysql.jdbc.Driver
org.quartz.dataSource.TaskScheduler.URL = jdbc:mysql://localhost:3306/quartz    
org.quartz.dataSource.TaskScheduler.user = quartz
org.quartz.dataSource.TaskScheduler.password = quartz
org.quartz.dataSource.TaskScheduler.maxConnections = 1 
```

安排新工作后，我得到了这些异常

```
org.quartz.JobPersistenceException: Couldn't retrieve job because a required class was not found: jobs.Counter [See nested exception: java.lang.ClassNotFoundException: jobs.Counter]
at org.quartz.impl.jdbcjobstore.JobStoreSupport.retrieveJob(JobStoreSupport.java:1378)
at org.quartz.impl.jdbcjobstore.JobStoreSupport$9.execute(JobStoreSupport.java:1366)
at org.quartz.impl.jdbcjobstore.JobStoreSupport.executeInNonManagedTXLock(JobStoreSupport.java:3798)
at org.quartz.impl.jdbcjobstore.JobStoreTX.executeInLock(JobStoreTX.java:93)
at org.quartz.impl.jdbcjobstore.JobStoreSupport.executeWithoutLock(JobStoreSupport.java:3703)
at org.quartz.impl.jdbcjobstore.JobStoreSupport.retrieveJob(JobStoreSupport.java:1363)
at org.quartz.core.QuartzScheduler.getJobDetail(QuartzScheduler.java:1465)
at org.quartz.impl.StdScheduler.getJobDetail(StdScheduler.java:489)
at utils.SchedulerUtils.getAlljob(SchedulerUtils.java:44)
at controllers.Task.index(Task.java:23)
at Routes$$anonfun$routes$1$$anonfun$applyOrElse$2$$anonfun$apply$2.apply(routes_routing.scala:65)
at Routes$$anonfun$routes$1$$anonfun$applyOrElse$2$$anonfun$apply$2.apply(routes_routing.scala:65)
at play.core.Router$HandlerInvoker$$anon$6$$anon$2.invocation(Router.scala:141)
at play.core.Router$Routes$$anon$1.invocation(Router.scala:322)
at play.core.j.JavaAction$$anon$1.call(JavaAction.scala:31)
at play.core.j.JavaAction$$anon$2.apply(JavaAction.scala:74)
at play.core.j.JavaAction$$anon$2.apply(JavaAction.scala:73)
at play.libs.F$Promise$PromiseActor.onReceive(F.java:420)
at akka.actor.UntypedActor$$anonfun$receive$1.applyOrElse(UntypedActor.scala:159)
at akka.actor.ActorCell.receiveMessage(ActorCell.scala:425)
at akka.actor.ActorCell.invoke(ActorCell.scala:386)
at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:230)
at akka.dispatch.Mailbox.run(Mailbox.scala:212)
at akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(AbstractDispatcher.scala:502)
at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:262)
at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975)
at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1478)
at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104)
Caused by: java.lang.ClassNotFoundException: jobs.Counter
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at sbt.PlayCommands$$anonfun$53$$anonfun$55$$anon$2.loadClass(PlayCommands.scala:535)
at org.quartz.simpl.InitThreadContextClassLoadHelper.loadClass(InitThreadContextClassLoadHelper.java:72)
at org.quartz.simpl.CascadingClassLoadHelper.loadClass(CascadingClassLoadHelper.java:114)
at org.quartz.simpl.CascadingClassLoadHelper.loadClass(CascadingClassLoadHelper.java:138)
at org.quartz.impl.jdbcjobstore.StdJDBCDelegate.selectJobDetail(StdJDBCDelegate.java:873)
at org.quartz.impl.jdbcjobstore.JobStoreSupport.retrieveJob(JobStoreSupport.java:1373)
... 27 more 
```

浏览后，有人建议添加这两个属性，但这似乎没有帮助

```
org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread = true
org.quartz.scheduler.threadsInheritContextClassLoaderOfInitializer = true 
```

有没有人遇到同样的问题并找到了解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:29:33.647

尝试在你的 app 文件夹中创建一个包库并在那里添加 Quartz 的库。