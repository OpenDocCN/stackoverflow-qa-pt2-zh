# StackOverflow 问答 15749000-15749999

# ssis - Dynamics CRM SystemUser IsDisabled 字段不可用于 SSIS 中的映射

> ID：15749002
> 
> 赞同：0
> 
> 时间：2013-04-01T18:14:18.390
> 
> 标签：ssis, dynamics-crm-2011

我正在尝试使用 SSIS 包将用户数据从 SQL 迁移到动态 CRM。有一些非活动用户必须迁移，我想在 CRM 中以编程方式禁用它们。但是，在我的 SSIS 包中的 CRM 目标源中，SystemUser 实体中的 IsDisabled 字段（一个选项集）不可用于映射。有什么方法可以显示 IsDisabled 字段，以便我可以通过编程方式禁用某些用户？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:19:57.490

您无法在已禁用的 CRM 中创建用户，您需要先创建，然后再使用 SetStateRequest 禁用。检查此链接：

[示例：禁用用户](http://msdn.microsoft.com/en-us/library/jj602914.aspx)

# model-view-controller - 如何将参数/参数传递给模型

> ID：15749008
> 
> 赞同：3
> 
> 时间：2013-04-01T18:14:32.057
> 
> 标签：model-view-controller, joomla

按照教程如何创建 joomla 2.5 组件，我坚持将参数从 view.html.php 传递给我的模型。

```
$items = $this->get('TableData'); 
```

我的 TableData 模型会期望得到以下参数

```
 public function getTableData($table, $index_column, $columns) {} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T18:39:09.647

您不能使用视图的 get 方法执行此操作。相反，您必须将模型抓取到视图中并直接在视图中调用该函数：

```
$model = $this->getModel();
$items = $model->getTableData($table, $index_column, $columns); 
```

或者，您可以在模型中创建不同的入口点，以便能够从状态信息或预设中计算出这些输入选项。许多人会争辩说，这将导致更好的应用程序设计，因为使用我上面的代码将模型逻辑放入视图中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:52:55.590

这只是大卫答案的补充。

因为大多数数据通常来自 POST / GET 方法，根据您的应用程序，您可能需要查看 loadFormData() 是如何从特定 Joomla 组件中获取`loadFormData` `JModelForm`或被覆盖的。`populateState`

基本上，模型的状态是使用 JInput 直接从 POST 数据设置的。

此外，虽然这不是规则或其他东西，但我最多可以传递 3 个参数给方法。为了灵活性，我宁愿传递一个可以在不更改方法签名的情况下稍后扩展的数组。

# ruby-on-rails - redmine 打不开项目

> ID：15749010
> 
> 赞同：1
> 
> 时间：2013-04-01T18:14:39.140
> 
> 标签：ruby-on-rails, redmine

当我打开项目时，我看到`500 Internal error`

在日志文件中我可以看到下一个信息：

```
Started GET "/redmine/projects/xxx" for IP at Mon Apr 01 21:07:24 +0300 2013
Processing by ProjectsController#show as HTML
  Parameters: {"id"=>"xxx"}
  Current user: user_id (id=1)
  Rendered projects/show.html.erb within layouts/base (41.9ms)
Completed 500 Internal Server Error in 83ms

ActionView::Template::Error (undefined method `project_calendar_path' for #<#<Class:0xb4fb34ac>:0xb4f447c8>):
    52:     <p>
    53:       <%= link_to l(:label_issue_view_all), project_issues_path(@project, :set_filter => 1) %>
    54:       <% if User.current.allowed_to?(:view_calendar, @project, :global => true) %>
    55:         | <%= link_to l(:label_calendar), project_calendar_path(@project) %>
    56:       <% end %>
    57:       <% if User.current.allowed_to?(:view_gantt, @project, :global => true) %>
    58:         | <%= link_to l(:label_gantt), project_gantt_path(@project) %>
  app/views/projects/show.html.erb:55:in `_app_views_projects_show_html_erb__145812006__629340778'
  app/controllers/projects_controller.rb:165:in `show' 
```

在上次升级之前没有这样的问题:(我说升级是什么意思？我`apt-get upgrade`在我的 Ubuntu 12.04 服务器上使用。

这是上次升级的

```
http://ppa.launchpad.net/ondrej/redmine/ubuntu/ precise/main redmine-sqlite all 2.3.0+dfsg1-6~precise+1 [12.5 kB]        
http://ppa.launchpad.net/ondrej/redmine/ubuntu/ precise/main redmine-mysql all 2.3.0+dfsg1-6~precise+1 [12.5 kB]
http://ppa.launchpad.net/ondrej/redmine/ubuntu/ precise/main ruby-rails-3.2 all 3.2.13-1~precise+1 [3,378 B]
http://ppa.launchpad.net/ondrej/redmine/ubuntu/ precise/main ruby-railties-3.2 all 3.2.13-2~precise+1 [127 kB]
http://ppa.launchpad.net/ondrej/redmine/ubuntu/ precise/main ruby-actionmailer-3.2 all 3.2.13-1~precise+1 [22.2 kB]
http://ppa.launchpad.net/ondrej/redmine/ubuntu/ precise/main ruby-activeresource-3.2 all 3.2.13-1~precise+1 [38.3 kB]
http://ppa.launchpad.net/ondrej/redmine/ubuntu/ precise/main ruby-actionpack-3.2 all 3.2.13-2~precise+1 [297 kB]
http://ppa.launchpad.net/ondrej/redmine/ubuntu/ precise/main ruby-activerecord-3.2 all 3.2.13-2~precise+1 [300 kB]
http://ppa.launchpad.net/ondrej/redmine/ubuntu/ precise/main ruby-activemodel-3.2 all 3.2.13-1~precise+1 [45.5 kB]              
http://ppa.launchpad.net/ondrej/redmine/ubuntu/ precise/main ruby-activesupport-3.2 all 3.2.13-1~precise+1 [296 kB]             
http://ppa.launchpad.net/ondrej/redmine/ubuntu/ precise/main ruby-rack-openid all 1.3.1-1~precise+2 [5,970 B]                   
http://ppa.launchpad.net/ondrej/redmine/ubuntu/ precise/main redmine all 2.3.0+dfsg1-6~precise+1 [4,250 kB] 
```

我不知道红宝石，所以我根本不知道如何修复它:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:52:44.980

我找到了另一种解决方案，我应该做的就是

`rm -rf /var/cache/redmine/default/*`

并重启 redmine

PS 感谢包维护者

# java - Android中的蓝牙处理程序

> ID：15749011
> 
> 赞同：0
> 
> 时间：2013-04-01T18:14:44.517
> 
> 标签：java, android, handler

有人可以解释以下处理程序的作用吗？以及我们如何使用处理程序？我是 Android 和 java 新手，请多多包涵

这是第一堂课的代码片段

```
 private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case MESSAGE_STATE_CHANGE:
                if(D) Log.i(TAG, "MESSAGE_STATE_CHANGE: " + msg.arg1);
                switch (msg.arg1) {
                case BluetoothChatService.STATE_CONNECTED:
                    mTitle.setText(R.string.title_connected_to);
                    mTitle.append(mConnectedDeviceName);
                    mConversationArrayAdapter.clear();
                    break;
                case BluetoothChatService.STATE_CONNECTING:
                    mTitle.setText(R.string.title_connecting);
                    break;
                case BluetoothChatService.STATE_LISTEN:
                case BluetoothChatService.STATE_NONE:
                    mTitle.setText(R.string.title_not_connected);
                    break;
                }
                break;
            case MESSAGE_WRITE:
                byte[] writeBuf = (byte[]) msg.obj;
                // construct a string from the buffer
                String writeMessage = new String(writeBuf);
                mConversationArrayAdapter.add("Me:  " + writeMessage);
                break;
            case MESSAGE_READ:
                byte[] readBuf = (byte[]) msg.obj;
                // construct a string from the valid bytes in the buffer
                String readMessage = new String(readBuf, 0, msg.arg1);
                mConversationArrayAdapter.add(mConnectedDeviceName+":  " + readMessage);
                break;
            case MESSAGE_DEVICE_NAME:
                // save the connected device's name
                mConnectedDeviceName = msg.getData().getString(DEVICE_NAME);
                Toast.makeText(getApplicationContext(), "Connected to "
                               + mConnectedDeviceName, Toast.LENGTH_SHORT).show();
                break;
            case MESSAGE_TOAST:
                Toast.makeText(getApplicationContext(), msg.getData().getString(TOAST),
                               Toast.LENGTH_SHORT).show();
                break;
            }
        }
    }; 
```

这是来自 connectThread 类的代码

```
private class ConnectedThread extends Thread {
        private final BluetoothSocket mmSocket;
        private final InputStream mmInStream;
        private final OutputStream mmOutStream;

        public ConnectedThread(BluetoothSocket socket, String socketType) {
            Log.d(TAG, "create ConnectedThread: " + socketType);
            mmSocket = socket;
            InputStream tmpIn = null;
            OutputStream tmpOut = null;

            // Get the BluetoothSocket input and output streams
            try {
                tmpIn = socket.getInputStream();
                tmpOut = socket.getOutputStream();
            } catch (IOException e) {
                Log.e(TAG, "temp sockets not created", e);
            }

            mmInStream = tmpIn;
            mmOutStream = tmpOut;
        }

        public void run() {
            Log.i(TAG, "BEGIN mConnectedThread");
            byte[] buffer = new byte[1024];
            int bytes;

            // Keep listening to the InputStream while connected
            while (true) {
                try {
                    // Read from the InputStream
                    bytes = mmInStream.read(buffer);

                    // Send the obtained bytes to the UI Activity
                    mHandler.obtainMessage(BluetoothChat.MESSAGE_READ, bytes, -1, buffer)
                            .sendToTarget();
                } catch (IOException e) {
                    Log.e(TAG, "disconnected", e);
                    connectionLost();
                    break;
                }
            }
        }

        /**
         * Write to the connected OutStream.
         * @param buffer  The bytes to write
         */
        public void write(byte[] buffer) {
            try {
                mmOutStream.write(buffer);

                // Share the sent message back to the UI Activity
                mHandler.obtainMessage(BluetoothChat.MESSAGE_WRITE, -1, -1, buffer)
                        .sendToTarget();
            } catch (IOException e) {
                Log.e(TAG, "Exception during write", e);
            }
        }

        public void cancel() {
            try {
                mmSocket.close();
            } catch (IOException e) {
                Log.e(TAG, "close() of connect socket failed", e);
            }
        }
    }
} 
```

现在请解释一下它们是如何使用的。如果有任何好的教程，也给

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:25:32.667

处理程序基本上是一个消息循环 - 它接收从项目其他地方发送的传入消息并在 UI 线程上处理它。每当您通过蓝牙读取或写入数据时，此代码都会向处理程序发送消息。

# android - 如何在不覆盖返回按钮的情况下从特定活动返回主活动

> ID：15749014
> 
> 赞同：0
> 
> 时间：2013-04-01T18:14:49.483
> 
> 标签：android, user-interface

我是安卓新手。在这里，我有活动 A、B、C、D，其中 A 是 Home Activity。它在堆栈中为 A->B->C->D

当我从 B 或 C 按下返回时，它应该正常返回。但是，如果我从 D 回按它应该回到 A 并且从 A 应用程序应该退出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:21:05.640

我想您可以拦截 onStop() 并猜测活动是否正在切换到 C 并启动 A。但这会导致难以维护的混乱，我不建议这样做。

但是，如果由于某种原因您仍然不想覆盖`onBackPressed`并且您设法猜测 D 正在停止，因为按下了 back （没有覆盖`onBackPressed()`，只需从那里启动一个带有 FLAG_ACTIVITY_CLEAR_TOP 的 Intent 的活动[（](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)调用 i.setFlags(FLAG_ACTIVITY_CLEAR_TOP) ）

根据文档：

> 如果设置，并且正在启动的活动已经在当前任务中运行，那么不会启动该活动的新实例，而是关闭它上面的所有其他活动，并且此 Intent 将被传递到（现在顶部）作为新意图的旧活动。

所以A将被带回，B和C将被清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:20:38.343

当您开始新活动时，请完成旧活动，例如，如果您想从 B 开始 C ：

```
Intent I = new Intent(B.this , C.class) ;
 startActivity (I);  
B.this.finish(); 
```

# python - 来自 stderr 的错误 - 如何解决？

> ID：15749015
> 
> 赞同：0
> 
> 时间：2013-04-01T18:14:50.527
> 
> 标签：python, ssh, stderr

我有一个 Python 程序（如下），当我运行它时，出现以下错误：

```
% python SSH_Prog.py
About to connect...
stderr:  ["bash: -c: line 0: unexpected EOF while looking for matching `''\n", 'bash: -c: line 1: syntax error: unexpected end of file\n']
pwd:  []
stderr:  ['watch: no process found\n']
pwd:  []
^CTraceback (most recent call last):
  File "SSH_Prog.py", line 32, in <module>
    time.sleep(3)
KeyboardInterrupt 
```

我认为这可能与转义序列和标准输入中的“\ n”字符有关，但我缺乏处理它的经验。

这是程序：

```
import os
import sys
import time
import paramiko
#from ssh import SSHClient

# Define remote machine
host="<ip>"
user="<usrnm>"
passw="<passw>"
client = paramiko.SSHClient()
#client.load_system_host_keys()
client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
# Try SSH connection, catch exception
#if not
print('About to connect...') 

client.connect(host, username=user, password=passw)
# ForLoop to iterate through the interactions
for x in range(10):
    xx = str(x)
    # Commands to execute on local machine
    f = os.popen3('tshark -i eth0 -f snmp -F pcapng -w ~/Desktop/traf_logs/n'+(xx))
    # commands to execute on remote machine
    stdin, stdout, stderr = client.exec_command("watch -n 0.1 'ps -p $(pgrep -d"," -x snmpd) -o rss= | awk '\''{ i += $1 } END { print i }'\'' >> ~/Desktop/mem_logs/mem_"+(xx)+";")        
    print "stderr: ", stderr.readlines()
    print "pwd: ", stdout.readlines()

    g = os.popen3('snmpget -v 2c -c communitystring <ip> sysContact.0')     
    time.sleep(3)

    stdin, stdout, stderr = client.exec_command('killall watch;')          
    print "stderr: ", stderr.readlines()
    print "pwd: ", stdout.readlines()

    ff = os.popen3('killall tshark')        
# terminate connection
client.close()
exit(0) 
```

你有什么想法来解决它吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:25:45.340

你的第一个`exec_command`看起来像这样：

```
stdin, stdout, stderr = client.exec_command("watch -n 0.1 'ps -p $(pgrep -d"," -x snmpd) -o rss= | awk '\''{ i += $1 } END { print i }'\'' >> ~/Desktop/mem_logs/mem_"+(xx)+";") 
```

换句话说，第一个论点是：

```
"watch -n 0.1 'ps -p $(pgrep -d" 
```

你的第二个论点是：

```
" -x snmpd) -o rss= | awk '\''{ i += $1 } END { print i }'\'' >> ~/Desktop/mem_logs/mem_"+(xx)+";" 
```

如果您`bash`在终端中启动并输入第一个参数（不带引号），然后输入换行符和 ^D，它会告诉您：

```
> -bash: unexpected EOF while looking for matching `''
-bash: syntax error: unexpected end of file 
```

这正是你从 Paramiko 那里得到的。

第二个错误只是`killall`告诉您没有名为 的进程`watch`，因为您的第一个命令从未启动过。

如果你只是用`","`空格替换 the ，那将解决这个问题......但不知道你为什么认为你想要一个`","`那里，我不确定它会做你真正打算做的事情。

我也不确定`'\''`应该做什么。为什么要对 的参数进行三重引用`awk`，或者为什么在它应该等同于 just 时要执行如此复杂的操作`{ print $1 }`，或者为什么要明确要求`ps`多个列仅用于`awk`挑选第一列，或者……</p>

# c# - c# 检查文件是否打开

> ID：15749020
> 
> 赞同：3
> 
> 时间：2013-04-01T18:14:58.547
> 
> 标签：c#, file

我需要验证是否打开了特定文件以防止复制该文件。

我尝试了很多例子，但任何一个都不起作用！例如，我尝试这样做：

```
protected virtual bool IsFileLocked(FileInfo file)
{
    FileStream stream = null;

    try
    {
        stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None);
    }
    catch (IOException)
    {
        //the file is unavailable because it is:
        //still being written to
        //or being processed by another thread
        //or does not exist (has already been processed)
        return true;
    }
    finally
    {
        if (stream != null)
            stream.Close();
    }

    //file is not locked
    return false;
} 
```

我需要方向......我在哪里失败了？建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:25:46.137

您可能会因此受到线程竞争条件的影响，有记录的示例将其用作安全漏洞。如果您检查该文件是否可用，然后尝试使用它，您可能会在此时抛出，恶意用户可以使用它来强制和利用您的代码。

您最好的选择是尝试获取文件句柄的 try catch / finally。

```
try
{
   using (Stream stream = new FileStream("MyFilename.txt", FileMode.Open))
   {
        // File/Stream manipulating code here
   }
} catch {
  //check here why it failed and ask user to retry if the file is in use.
} 
```

或者

看到这个另一个选项

[https://stackoverflow.com/a/11060322/2218635](https://stackoverflow.com/a/11060322/2218635)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T18:19:43.963

If you want to know whether *your application* already had the file open, you should just save the `FileStream` in a field, and reset the field to `null` when you close the stream. Then you can simply test and get the `FileStream` of the file.

If you want to know whether *another application* already has the file open, then there is not much you can do. You'll might get an exception when you try to open the file. But even if you knew, then you wouldn't be able to *prevent the copy of that file*, because you don't have a reference to the file or its `FileStream` in your application.

# javascript - 如何使用 jQuery 在 UL 中的任意位置添加 LI

> ID：15749021
> 
> 赞同：2
> 
> 时间：2013-04-01T18:15:01.480
> 
> 标签：javascript, jquery

我想在我现有的 UL 中添加 LI。我的 HTML 是这样的：

```
<ul id="friends">
    <li><a href="javascript:void(0);" class="new">Friend 2</a></li>
    <li><a href="javascript:void(0);" class="new">Friend 3</a></li>
    <li><a href="javascript:void(0);" class="new">Friend 4</a></li>
    <li><a href="javascript:void(0);" class="offline">Friend 6</a></li>
    <li><a href="javascript:void(0);" class="offline">Friend 7</a></li>
    <li><a href="javascript:void(0);" class="invited">Friend 8</a></li>
</ul> 
```

我知道我可以用它在和

```
$("#friends").append('<li><a href="javascript:void(0);" class="new">Friend 1</a></li>'); 
```

但它会添加到最后一个位置，我想将它添加到第一个位置或中间。如何指定要插入 LI 的位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T18:16:07.490

您必须使用[prepend()](http://api.jquery.com/prepend/)而不是`append`

```
$("#friends").prepend('<li><a href="javascript:void(0);" class="new">Friend 1</a></li>'); 
```

要附加到特定位置，您可以使用[eq()](http://api.jquery.com/eq/)

```
$("#friends li").eq(4).append('<li><a href="javascript:void(0);" class="new">Friend 1</a></li>'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T18:16:37.460

尝试[**前置**](http://api.jquery.com/prepend/)。

```
$("#friends").prepend('<li><a href="javascript:void(0);" class="new">Friend 1</a></li>'); 
```

# css - 关于 CSS 选择器的最佳实践？

> ID：15749023
> 
> 赞同：0
> 
> 时间：2013-04-01T18:15:03.470
> 
> 标签：css, selector

在使用 css 选择器时，我们面临许多选择元素的选择（使用组合选择器，使用 id 或类）。我在问是否有关于如何选择选择器和类/ID 以拥有易于携带的可维护网站的任何准则和最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:29:30.977

如果我的问题是正确的，那么选择使用哪些选择器将取决于良好的标记以及类和 ID 的适当命名。

一般来说，了解您的目标受众以及他们使用的浏览器。例如，您可以使用以下内容：

p + ul 在 IE7 中，但前提是，在您的 html 代码中，ap 和下一个元素之间没有注释或元素，在这种情况下是 ul。

因此，了解您的网站主要使用哪些浏览器才是真正的第一件事。然后，您可以根据需要向后或向前工作。

最后，它是关于 IE7+ 以及您的用户群是否正在使用它，因为有许多种类/类型的选择器只能在以后的浏览器中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:17:57.937

我觉得这篇文章很有帮助 - [https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS](https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS)

# c# - 你能分享你的想法如何从嵌入式 Python.Net 调用 python 命令吗？

> ID：15749028
> 
> 赞同：8
> 
> 时间：2013-04-01T18:15:07.570
> 
> 标签：c#, python, .net, python-2.7, python.net

我已经用 Python.Net 玩了一个星期，但是我找不到任何示例代码来以嵌入式方式使用 Python.Net，尽管 Python.Net 源有几个嵌入式测试。我从以前的电子邮件列表 (Python.Net) 中搜索了许多线程，结果不一致且毫无头绪。

我正在尝试做的是在通过 Python.Net 从 python 提示符执行 python 命令（例如“print 2+3”）后从 C# 代码获取结果（PyObject po），因为 IronPython 与我目前的模块不兼容使用。

当我从 nPython.exe 执行它时，它会按预期打印出 5。但是，当我从 C# 以嵌入式方式运行此代码时。它总是返回'null'。你能给我一些想法，我怎样才能得到执行结果？

谢谢你，火花。

环境： 1\. Windows 2008 R2，.Net 4.0。在 VS2012 2 中使用 Python27、UCS2 编译 Python.Net。nPython.exe 可以正常运行“打印 2+3”

```
using NUnit.Framework;
using Python.Runtime;

namespace CommonTest
{
    [TestFixture]
    public class PythonTests
    {
        public PythonTests()
        {

        }
        [Test]
        public void CommonPythonTests()
        {

            PythonEngine.Initialize();

            IntPtr gs = PythonEngine.AcquireLock();
            PyObject po = PythonEngine.RunString("print 2+3");
            PythonEngine.ReleaseLock(gs);

            PythonEngine.Shutdown();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T18:26:19.260

似乎 PythonEngine.RunString() 不起作用。相反， PythonEngine.RunSimpleString() 工作正常。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Diagnostics;
using System.Reflection;
using Python.Runtime;

namespace npythontest
{
    public class Program
    {
        static void Main(string[] args)
        {
            string external_file = "c:\\\\temp\\\\a.py";

            Console.WriteLine("Hello World!");
            PythonEngine.Initialize();

            IntPtr pythonLock = PythonEngine.AcquireLock();

            var mod = Python.Runtime.PythonEngine.ImportModule("os.path");
            var ret = mod.InvokeMethod("join", new Python.Runtime.PyString("my"), new Python.Runtime.PyString("path"));
            Console.WriteLine(mod);
            Console.WriteLine(ret);
            PythonEngine.RunSimpleString("import os.path\n");
            PythonEngine.RunSimpleString("p = os.path.join(\"other\",\"path\")\n");
            PythonEngine.RunSimpleString("print p\n");
            PythonEngine.RunSimpleString("print 3+2");
            PythonEngine.RunSimpleString("execfile('" + external_file + "')");

            PythonEngine.ReleaseLock(pythonLock);
            PythonEngine.Shutdown();
        }
    }
} 
```

# java - CSS 文件中的变量

> ID：15749029
> 
> 赞同：3
> 
> 时间：2013-04-01T18:15:08.660
> 
> 标签：java, html, css, variables, web

我有一个 Java Web 项目，我想在我的应用程序中进行拆分测试。我希望能够根据传递的查询字符串选择不同的标题图像。例如，如果用户检索以下 url：

```
http://www.website.com/?header=1 
```

然后我显示标题的图像 A。如果用户像这样检索 url：

```
http://www.website.com/?header=2 
```

我显示图像 B。我已经通过表达式语言变量在我的 html 中接收到“标题”值。问题是我在 CSS 文件中设置了图像 url。如何将此变量传递给 CSS 文件以加载正确的图像？

PS：我知道我可以在 HTML 文件中应用样式，但我想提取 CSS 文件中的所有样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:18:01.547

[除非您使用LESS](http://en.wikipedia.org/wiki/LESS)之类的东西，否则这是不可能的。

您可以做的是制作单独的 CSS 文件，使用查询字符串来确定您对 Java Web 的需求，然后根据情况加载您需​​要的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:22:44.563

如果我正确理解了您的问题，我相信您可以通过根据您从标题中获得的输入将不同的 CSS 类应用于您的标题来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:32:34.503

在 CSS 中为不同的背景标题图像包含 2 个不同的类，然后在编码中应用不同的类。

```
.header1 {
background-image: url(background1.jpg);
}

.header2 {
background-image: url(background2.jpg);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T18:21:21.383

您有三个基本选项：

*   根据查询参数切换 CSS 文件，每个标题图像一个 CSS 文件 - 你可以让这些只是设置标题图像，并在自己的文件中拥有静态样式。
*   使用[LESS](http://lesscss.org/)或[SASS 之](http://sass-lang.com/)类的东西。
*   将您的 CSS 编写为 JSP 文件或通过 servlet 动态生成，并在服务器上动态更改样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T18:26:58.000

将您的 CSS 样式分为 3 个部分：

*   common.css
*   header1.css
*   header2.css

根据您的标题，您可以包含任一`headerN.css`类。您也可以在服务器端（生成不同的包含`<head>`）或客户端（使用 javascript 提取`header`值并动态包含正确的 css）解决它

# php - 从mysql查询中提取第一个图像标签

> ID：15749031
> 
> 赞同：0
> 
> 时间：2013-04-01T18:15:19.430
> 
> 标签：php, mysql, mysqli

我想知道如何从 mysql 查询中提取第一个图像 URL。

例如：

```
<p>Nowadays forums have become very popular, almost every site on the 
web have a forum. An Internet forum, bulletin board or message board, is
 an online discussion site where people can hold conversations in the 
form of posted messages.</p>
<p>This is a list of top 10 free and open source software for creating your own forum.</p>
<h3>1\. phpBB</h3>
phpBB is a free flat-forum bulletin board software solution that can 
be used to stay in touch with a group of people or can power your entire
 website.<br><br><img alt="" src="http://www.yoursite.com/phpbb.jpg" align="none"><br><br><h3>2\. Simple Machines Forum</h3>
SMF is a free, professional grade software package that allows you to set up your own online community within minutes.<br><br><img alt="" src="http://www.yoursite.com/smf.jpg" align="none"><br> 
```

从中我需要提取[http://www.yoursite.com/phpbb.jpg](http://www.yoursite.com/phpbb.jpg)

我怎样才能做到这一点。预先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:26:53.580

```
$text = '
<p>Nowadays forums have become very popular, almost every site on the 
web have a forum. An Internet forum, bulletin board or message board, is
 an online discussion site where people can hold conversations in the 
form of posted messages.</p>
<p>This is a list of top 10 free and open source software for creating your own forum.</p>
<h3>1\. phpBB</h3>
phpBB is a free flat-forum bulletin board software solution that can 
be used to stay in touch with a group of people or can power your entire
 website.<br><br><img alt="" src="http://www.yoursite.com/phpbb.jpg" align="none"><br><br><h3>2\. Simple Machines Forum</h3>
SMF is a free, professional grade software package that allows you to set up your own online community within minutes.<br><br><img alt="" src="http://www.yoursite.com/smf.jpg" align="none"><br>
';

$doc = new DOMDocument();
$doc->loadHTML($text);
$xpath = new DOMXPath($doc);
$images = $xpath->query("//img");
$first_image = $images->item(0);
$firstsrc = $first_image->attributes->getNamedItem('src')->nodeValue;
echo $firstsrc; 
```

输出：

```
http://www.yoursite.com/phpbb.jpg 
```

* * *

更新：@uınbɐɥs 的另一个简短回答：

```
$doc = DOMDocument::loadHTML($text);
$firstsrc = $doc->getElementsByTagName('img')->item(0)->getAttribute('src');
echo $firstsrc; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:44:56.707

您可以使用简单的 HTML dom 解析器库。它简单易行

```
$html = str_get_html('Your HTML string here');

// Find all images 
$image = $html->find('img',0); 
```

这将为您提供第一个图像标签

# ruby-on-rails-3 - 更改到控制器的路由

> ID：15749032
> 
> 赞同：0
> 
> 时间：2013-04-01T18:15:20.357
> 
> 标签：ruby-on-rails-3, routes

我有一个基本的应用程序，我正在尝试根据 meeting_id 和参与者 ID（它们是 meeting_participants 中的列）销毁名为 meeting_participants 的表中的记录。

我已经更改了 meeting_participants_controller 中的销毁操作，以接受 meeting_id 和参与者 ID，然后删除相应的记录。

```
def destroy
  session[:return_to] = request.referer

  @meeting_participant = MeetingParticipant.find_by_meeting_id_and_participant_id(params[:meeting_id], params[:participant_id])
  @meeting_participant.destroy

  redirect_to session[:return_to]

end 
```

我在视图中有一个按钮，我想使用以下代码调用 meeting_participants#destroy 控制器。

```
<table>
  <% @participants.each do |participant| %>
      <tr>
        <td><%= participant.name %></dt>
        <td>
          <% participant.meetings.each do |meeting| %>
            <%= meeting.name %>
            <%= button_to( "Remove Meeting", 
                                           {:controller => "meeting_participants",
                                            :action => "destroy",
                                            :meeting_id => meeting.id,
                                            :participant_id => participant.id },
                             :method => :delete,
                             :confirm => "Are you sure?") %>
             <br/>
           <% end %>
         </td>
       </tr>
     <% end %>
  </table> 
```

我认为我已成功将正确的参与者 ID 和会议 ID 参数发送到控制器，但我收到“无路由匹配”错误，因为我的 meeting_participants#destroy 路由需要一个 :id 参数。rake 路线给...

```
meeting_participant DELETE /meeting_participants/:id(.:format)      meeting_participants#destroy 
```

有谁知道改变我的路线以期望两个新参数而不是 id 的方法？或者也许有更好的方法。我发现路线非常混乱。

谢谢。

我的 routes.rb 文件是...

```
MyApp::Application.routes.draw do
  resources :meeting_participants

  resources :participants

  resources :meetings

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:27:04.683

我可能会创建一个路由来处理该请求。也许是这样的：

`match '/delete_meeting_participants/meeting/:meeting_id/participant/:participant_id' => 'meeting_participants#delete_meeting_participants', :as => 'delete_meeting_participants'`

然后，在您的控制器中，您将有一个被调用的操作，该操作`delete_meeting_participants`与您的销毁操作中当前具有相同的逻辑。显然，您必须`button_to`使用新创建的操作的名称来更新您的。

# apache - 强制 Apache 在 .htaccess 中发送 200 而不是 404

> ID：15749033
> 
> 赞同：0
> 
> 时间：2013-04-01T18:15:33.657
> 
> 标签：apache, http, http-headers, webserver

我认为这将是一项简单的任务，但要么我很累，要么只是错过了简单的答案！

我需要一种让 Apache 为任何页面（包括 404 页面）返回 200 的方法。有什么简单的解决办法吗？

这是当前的标头响应：

```
HTTP/1.1 
404 Article not found 
Date: Mon, 01 Apr 2013 18:05:38 GMT 
Server: Apache P3P: CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM" 
Cache-Control: no-cache 
Pragma: no-cache 
Set-Cookie: 440d08f3c65b7f89402db924f5428cbd=ujg53v71nc68fi5pc36rllnd707; path=/ 
Set-Cookie: trcusr=%24%24; expires=Tue, 19-Jan-2038 03:14:07 GMT; path=/ 
Set-Cookie: cltid=103; expires=Tue, 19-Jan-2038 03:14:07 GMT; path=/ 
Set-Cookie: js_vsid=355; expires=Mon, 01-Apr-2013 22:05:38 GMT; path=/ 
Content-Type: text/html; charset=utf-8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:26:40.950

我会使用 RewriteEngine 将任何 URL 重写为不存在的文件的文件。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^.*$ file-that-exists.html 
```

未经测试，但应该接近它。

# c++ - ** 在 C/C++ 中是什么意思？

> ID：15749034
> 
> 赞同：0
> 
> 时间：2013-04-01T18:15:34.223
> 
> 标签：c++, c, variables, memory-management

我正在阅读 C++ 代码并遇到了这一行：

```
 mem_cMemRow ** ppMemory = (mem_cMemRow **)malloc(//size of some structs); 
```

在我看来，** 保留了一些或部分内存，但我的搜索没有产生任何好的结果。我感谢对此进行更深入和更详细的解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:18:55.770

```
 mem_cMemRow ** ppMemory = (mem_cMemRow **)malloc(//size of some structs) 
```

正在尝试为 分配内存`ppMemry`，这是指向对象指针类型的指针`mem_cMemRow`。它（ppMemory）是一个二维动态数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:17:01.343

一颗星意味着一个指针。两颗星表示指向指针的指针。所以，`ppMemory`是一个指向 a 的指针的指针`mem_cMemRow`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:17:31.513

它是一个指向指针的指针。本质上，您正在创建一个指向给定结构的指针数组。malloc 很可能是结构指针的大小乘以某个数字。

# google-maps - 谷歌地图高程服务

> ID：15749035
> 
> 赞同：0
> 
> 时间：2013-04-01T18:15:36.070
> 
> 标签：google-maps, elevation

我有这个函数，它在单击按钮时被调用。该函数在预定义的位置创建一个标记。然后，我对给定点使用高程服务。当我单击按钮时，警报消息（我已将其放在那里进行诊断）显示“未定义”，然后出现标记（实际上标记应该出现*在*警报框之前！）。我已尽力找出问题的根源，但徒劳无功。任何人都可以帮助我吗？谢谢。

```
 function buttonClicked () {
     addNode(someLat, someLong);
     alert(getElev(markers[0]));
  }

  function addNode(lat, lng) {
      var LatLng = new google.maps.LatLng(lat, lng);
      var marker = new google.maps.Marker({
         position: LatLng,
      });
      marker.setMap(map);
      markers.push(marker);
  }

  function getElev (marker) {
      var ht = 0;
      var locations = [];
      var clickedLocation = marker.getPosition();
      locations.push(clickedLocation);
      var positionalRequest = {
        'locations': locations
      }

      elevator.getElevationForLocations(positionalRequest, function (results, status) {
          if (status == google.maps.ElevationStatus.OK && results[0]) 
               ht = results[0].elevation;
      });
      return ht;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T23:13:42.740

在此处添加警报，它应该可以工作。getElevationForLocations 中的函数不会出现在 getElev 中，而是异步调用。所以 ht 没有在 getElev 中设置。

```
 elevator.getElevationForLocations(positionalRequest, function (results, status) {
      if (status == google.maps.ElevationStatus.OK && results[0]){
           ht = results[0].elevation;
           alert(ht);
      }
  }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-09T22:04:26.817

```
altitude = 0; // Declared with out "var" make it superglobal 
function buttonClicked () {
 addNode(someLat, someLong);
 alert(getAltitude());
}

function addNode(lat, lng) {
  var LatLng = new google.maps.LatLng(lat, lng);
  var marker = new google.maps.Marker({
     position: LatLng,
  });
  marker.setMap(map);
  markers.push(marker);
}

function getElev (marker) {
  var locations = [];
  var clickedLocation = marker.getPosition();
  locations.push(clickedLocation);
  var positionalRequest = {
    'locations': locations
  }

  elevator.getElevationForLocations(positionalRequest, function (results, status) {
      if (status == google.maps.ElevationStatus.OK && results[0]) 
           setAltitude(results[0].elevation);
  });
}

//getters and setters for altitude 
function setAltitude(a){
    altitude = a;
}
function getAltitude(){
    return altitude;
} 
```

# ios - 为 UIToolBar 设置背景图片

> ID：15749036
> 
> 赞同：0
> 
> 时间：2013-04-01T18:15:41.630
> 
> 标签：ios, design-patterns, crash, uitoolbar, uiappearance

我见过很多人这样做：

```
[[UIToolbar appearance] setBackgroundImage:toolBarImage forBarMetrics:UIBarMetricsDefault]; 
```

对我来说它不起作用，因为我的应用程序崩溃并说：

```
-[_UIAppearance setBackgroundImage:]: unrecognized selector sent to instance 0xab8fe80 
```

我已经研究并发现 UIAppearance 仅在 ios 5 之后可用，但我的模拟器是 6.1，我的 iPhone 也是。我也用有效的 NavigationBar 做到了这一点。

希望你能帮助我:) 非常感谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-28T06:27:30.570

这对我有用：

```
UIImage* toolbarImage = [UIImage imageNamed: @"toolbar_background.png"];
[[UIToolbar appearance] 
    setBackgroundImage: toolbarImage 
    forToolbarPosition: UIToolbarPositionAny
    barMetrics: UIBarMetricsDefault]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T18:23:28.777

检查这个：

如果 The`UIToolbar`包含在 ViewController 中。

如果包含`UIToolbar`在ViewController 中，则不能更改inside。`AppDelegate``UIToolbar`

另请参见此处：[IOS 5 unrecognized selector send at appearance proxy for setBackgroundImage](https://stackoverflow.com/questions/7702438/ios-5-unrecognized-selector-send-at-appearance-proxy-for-setbackgroundimage)

阅读所有评论[iOS5改变UIToolbar的背景](https://stackoverflow.com/questions/8312659/ios5-changing-background-of-uitoolbar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:23:38.103

您应该在应用程序委托实现文件的 didfinishlaunchingwithoptions: 方法中调用此方法

# backbone.js - 使用 Remove 事件检测从 Backbone.js 中的集合中删除的模型

> ID：15749039
> 
> 赞同：0
> 
> 时间：2013-04-01T18:15:44.563
> 
> 标签：backbone.js, underscore.js, backbone.js-collections

我的问题是，当我们绑定/监听集合的添加事件时，有没有办法检测从集合中删除的模型。

例如：

```
this.listenTo(monthsOnBoardCollection, "remove", function(){
  //is it possible here to find what got removed from the collection ? 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:22:07.937

You have the [Catalog of Events](http://backbonejs.org/#Events-catalog) which shows the arguments being passes to the event.

```
"remove" (model, collection, options) — when a model is removed from a collection. 
```

So it's basically:

```
this.listenTo(monthsOnBoardCollection, "remove", function(model, collection, options){
  //now you have the model, the collection and the options which were passed to the remove method
} 
```

# ruby-on-rails - 如何在 rspec 测试中欺骗请求主机？

> ID：15749040
> 
> 赞同：1
> 
> 时间：2013-04-01T18:15:45.143
> 
> 标签：ruby-on-rails, rspec, devise

我们有一些其他团队在内部使用的小方法。我正在为它编写测试，但我遇到了一个小问题：

该方法本身会检查以确保请求来自特定服务器（request.host）。我试过存根，但我可能存根错误的控制器？我尝试了我正在测试的控制器和 .any_instance，然后我尝试了 controller.any_instance，但都没有奏效。

我有一种预感，我可能可以使用 devise 来欺骗它，但到目前为止，谷歌还没有产生很多用处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:51:17.240

我觉得有点愚蠢，没有先尝试这个，但是：

在我试图欺骗 request.host 的测试中，在相应测试中设置它的方法是：

*请打鼓...*

```
request.host = dev.example.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:14:33.137

如果您正在测试子域，我在这里写了一些代码：http: [//www.chrisaitchison.com/2013/03/17/testing-subdomains-in-rails/](http://www.chrisaitchison.com/2013/03/17/testing-subdomains-in-rails/)

# html - 是否使用 HTML5 服务器发送事件 (SSE) ReSTful？

> ID：15749041
> 
> 赞同：19
> 
> 时间：2013-04-01T18:15:46.660
> 
> 标签：html, http, rest, streaming, server-sent-events

我无法理解 HTML5s Server-sent-events 是否真的适合 ReST 架构。我了解并非 HTML5/HTTP 的所有方面都需要适应 ReST 架构。但我想从专家那里知道，HTTP 的哪一半是 SSE（ReSTful 的一半或另一半！）。

一种观点可能是它是 ReSTful，因为有一个从客户端到服务器的“初始”HTTP GET 请求，剩下的可以看作只是不同内容类型的部分内容响应（“text/event-溪流”）

发送的请求不知道会有多少响应作为 response(events) 来？那是休息吗？

问题的动机：我们正在开发应用程序的服务器端，我们希望同时支持 ReST 客户端（通常）和浏览器（特别是）。虽然 SSE 适用于大多数 HTML5 浏览器客户端，但我们不确定 SSE 是否适合纯 ReST 客户端的支持。因此问题。

**编辑 1**：正在阅读 Roy Fielding 的旧[文章](http://roy.gbiv.com/untangled/2008/economies-of-scale)，他在其中说：“换句话说，**单个用户请求会导致潜在的大量服务器义务**。因此，善意的用户可能会对发布者或经纪人产生不成比例的负载，即分发通知。在 Internet 上，我们没有为仁慈的用户设计的奢侈，因此在 HTTP 系统中，我们将此类请求称为拒绝服务攻击......**这正是没有标准机制的原因对于 HTTP 中的通知**“

这是否意味着 SSE 不是 ReSTful ？

**Edit2**：正在通过 Twitter 的 REST API。虽然 REST 清教徒可能会争论他们的 REST API 是否真的/完全是 REST，但[Streaming 和 REST 之间的差异](https://dev.twitter.com/docs/streaming-apis)部分的标题似乎表明 Streaming（甚至 SSE）不能被视为 ReSTful ！？有人反对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T18:52:00.093

我认为这取决于：

**您的服务器端事件是否使用超媒体和超链接来描述可能的状态变化？**

该问题的答案是它们是否满足您的应用程序架构中的 REST。

现在，发送/接收这些事件的方式可能会也可能不会遵守 REST——我所读到的关于 SSE 的所有内容都表明它们不遵守。我怀疑它会影响几个原则，尤其是分层——尽管如果中介了解 SSE 的语义，你可能会否定这一点。

我认为这是正交的，因为它只是浏览器（通过它正在运行的 JavaScript）理解的 HTML 和 JavaScript 处理指令的一部分。您仍然应该能够将客户端应用程序状态与服务器端资源状态分离。

我看到的一些关于如何使用 SSE 处理扩展的建议不适合 REST - 即引入自定义标头（修改协议）。

**您在使用 SSE 时如何尊重 REST？**

我想看某种

`<link rel="event" href="http://example.com/user/1" />`

然后，您正在使用的任何内容类型/资源的处理指令（包括按需代码，例如 JavaScript）告诉客户端如何订阅和利用从此类超链接提供的事件。显然，这些事件的数据本身应该是包含更多控制程序流的超链接的超媒体。（这就是我相信您区分 REST 和非 REST 的地方）。

在某个时候，浏览器可能会意识到这种链接关系——就像`stylesheet`为你做一些花哨的连接一样，所以你所做的只是在 JavaScript 中监听事件。

虽然我确实认为您的应用程序仍然可以适应 SSE 周围的 REST 样式，但它们本身并不是 REST（因为您的问题是专门关于它们的使用，而不是它们的实现，所以我想弄清楚我在说什么）。

我不喜欢该规范使用 HTTP，因为它消除了很多语义，并有效地将一个贫乏的协议通过一个相对丰富的协议。这应该是一个好处，但让我印象深刻的是卖晚餐来支付午餐。

`ReST clients (in general) and Browsers (in particular).`

你的浏览器怎么不是 REST 客户端？浏览器可以说是最 REST 的客户端。正是我们通过 JavaScript 坚持使用它们的所有废话，然后才停止遵守 REST。我怀疑/担心，只要我们继续认为我们的 REST-API“客户端”和我们的浏览器客户端根本不同，我们仍将停留在当前状态 - 大概是因为所有 REST 人员都在寻找一个超链接RPC 人不知道需要存在 ;)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-06T12:19:40.523

我认为 SSE 可以被 REST API 使用。根据[Fielding 论文](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)，如果我们想将其称为 REST，我们有一些应用程序必须满足的架构约束。

*   **客户端-服务器架构：好的**- 客户端在服务器进行处理时触发
*   **无状态：好的**- 我们仍然在客户端上存储客户端状态，HTTP 仍然是无状态协议
*   **缓存：好的**- 我们必须不使用缓存头
*   **统一界面**
    *   **资源识别：好的**- 我们使用 URI
    *   **通过表示操作资源：好的**- 我们可以使用具有相同 URI 的 HTTP 方法
    *   **自描述消息：好的，部分**- 我们使用内容类型标头，如果需要，我们可以将 RDF 添加到数据中，但是没有描述数据是 RDF 编码的标准。如果支持，我们应该定义一个 text/event-stream+rdf MIME 类型或类似的东西。）
    *   **超媒体作为应用程序状态的引擎：好的**- 我们可以在数据中发送链接
*   **分层系统：好的**- 我们可以添加其他层，也可以转换数据流。管道和过滤器，其中泵是服务器，过滤器是这些层，水槽是客户端
*   **按需代码：好的**- 可选，没关系

顺便提一句。没有这样的规则，你不能一起使用不同的技术。因此，您可以根据需要一起使用例如 REST API 和 websockets，但如果 websockets 部分至少不符合自描述消息和 HATEOAS 约束，则客户端将难以维护。可扩展性可能是另一个问题，因为其他约束与此有关。

# asp.net-mvc - 在我的 MVC4 站点中的排序或分页操作期间，如何让我的 WebGrid 发布而不是 GET？

> ID：15749042
> 
> 赞同：2
> 
> 时间：2013-04-01T18:15:52.400
> 
> 标签：asp.net-mvc, asp.net-mvc-4, postback, webgrid

我有一个相当简单的站点，其中包含搜索部分视图和列表部分视图。它们使用多个模型汇总到索引视图中。

一切安好。除非我单击网格列标题进行排序或尝试分页到下一个数据列表，否则网格返回为空。如果我重新提交相同的搜索条件，则网格会重新填充所有适用的数据，这些数据已正确排序或分页。

我将这种行为归结为 WebGrid 将其分页和排序机制设置为 GET 而不是 POST。所以很明显我所有的模型数据都没有提交。

有没有办法让 WebGrid 发布以便数据标签一起发布？对于不包含想要分页或排序的数据的类，WebGrid 似乎适得其反。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-29T01:15:27.010

老问题，但只是为了添加参考：

我更喜欢[此链接建议的解决方案](http://forums.asp.net/t/1755039.aspx)

使用JQuery解决了这个问题：

```
var links = $('a[href*=page], a[href*=sort]'), form = $('form');
links.click(function () {
            form.attr("action", this.href);
            $(this).attr("href","javascript:");
            form.submit();
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:14:32.390

这可能不是最优雅的解决方案，但它有效：

将模型添加到视图中的会话：

```
Session.Add( "Model", Model ); 
```

然后，在控制器中的索引 GET 操作（或任何 GET 操作）中，只需检查值并调用 POST 操作：

```
if ( Session[ "Model" ] != null )
    this.Index( Session[ "Model" ] as MyModel ); 
```

相应地清理您的会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T15:49:17.520

除了上面的 JQuery 答案（这给我带来了成功，谢谢！）不要忘记取消它在幕后添加的 webgrid 自己的魔法方法。否则，您最终可能会在 POST 的同时发生另一个 ajax GET。

在绑定到“页面”和“排序”链接之前，请执行以下操作：-

```
 $("#MyWebGridID").undelegate(); 
```

# c# - 保存 sql 连接字符串时刷新管理页面

> ID：15749043
> 
> 赞同：0
> 
> 时间：2013-04-01T18:15:58.393
> 
> 标签：c#, html, sql, asp.net-mvc

我已经创建了在 web.config 文件中更新 sql 连接字符串的功能。但是，由于某种原因，我无法在不刷新页面的情况下实时更新它。刷新页面后，它会显示更改的值。当我单击保存时它保存在 web.config 文件中，但返回到旧值。

这是我的管理员模型：

```
 public void SAVEsqlConnection(string sqlConnection)
    {
        if (sqlConnection != System.Web.Configuration.WebConfigurationManager.ConnectionStrings["sqlConnection1"].ToString())
        {
            Configuration sqlConnection1 = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
            var section = (ConnectionStringsSection)sqlConnection1.GetSection("connectionStrings");
            section.ConnectionStrings["sqlConnection1"].ConnectionString = sqlConnection;
            sqlConnection1.Save();
        }
    } 
```

这是我的管理员控制器：

```
 [HttpPost]
    public ActionResult Admin(string txt_file_dest, string report_dest, string sql_Connection)
    {
        AdminModel Values = new AdminModel();

        if (sql_Connection != null)
        {
            Values.SAVEsqlConnection(sql_Connection);       
        }

        return View();
    } 
```

这是我的 Admin.cshtml 文件：

```
 <input type="text" name="sql_Connection" value= "@System.Web.Configuration.WebConfigurationManager.ConnectionStrings["sqlConnection1"]">
    :SQL Connection String<br>
    <br>
    <input type="submit" name="Save" value="Save Changes" /> 
```

任何帮助，将不胜感激。我有一个最后期限。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:21:09.047

You can refresh the page using this bit of JavaScript (1.2) after the query has been done:

```
 <script>
 window.location.reload(true); 
 </script> 
```

Althought, AJAX would be a better solution because it would make the page autoload new content.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:24:42.683

```
[HttpPost]
    public ActionResult Admin(string txt_file_dest, string report_dest, string sql_Connection)
    {
        AdminModel Values = new AdminModel();

        if (sql_Connection != null)
        {
            Values.SAVEsqlConnection(sql_Connection);       
        }

         return RedirectToAction("actionname");//call same page action again
    } 
```

# c# - 根据概率从一系列值中随机选择一个数字

> ID：15749045
> 
> 赞同：2
> 
> 时间：2013-04-01T18:16:03.073
> 
> 标签：c#, probability

假设我有一个从 1 到 10 的值范围。我想根据某种高斯概率从这个范围内随机选择一个数字。因此，有更高的机会获得大约 4、5、6 的值。仍然有机会获得 1 和 10，但机会较小。它不需要完全遵循高斯分布，因为这样几乎不可能得到 1 和 10 的值。我希望至少改变和倾斜获得极端值的机会，同时分散获得其他值的机会。通过倾斜，我的意思是有时我希望得到 10 的机会大于 1。因此分布可能不一定是对称的。

我尝试使用 Random 类播种随机浮点值并将该值乘以 10，但可能仍然是线性的。我想不出我怎么能做到这一点。有没有一种简单的方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:25:16.330

在 C# 中，来自的值`Random`具有均匀分布，因此将它们乘以某个常数只会改变值的范围。

但是，使用 Box-Muller 变换，您可以使用两个均匀随机变量创建高斯分布。

查看[此问题](https://stackoverflow.com/questions/218060/random-gaussian-variables)的答案以获取实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:25:04.727

这可能会帮助您：

将你的概率函数应用于值 1 到 10。然后你得到它们的频率。现在制作一个值从 1 到 10 的数组，每个数组根据它的频率重复。例如：

```
int[] values = { 1, 2, 2, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 9, 10 }; 
```

现在您可以使用一个`Random`变量并获得一个介于 0 和`values.Length`. 最后返回值[索引]。

# windows - 如何在具有长节点名称的 Windows 中运行 Erlang 服务？

> ID：15749052
> 
> 赞同：1
> 
> 时间：2013-04-01T18:16:14.077
> 
> 标签：windows, erlang, rebar

我正在尝试让 erlang 应用程序作为具有长节点名称的 Windows 服务运行，但`-name`for 的标志`erlsrv`似乎不起作用。该服务似乎在运行，但没有出现`epmd`在`net_adm:names()`. 但是，当我改用该`-sname`标志时，它似乎可以工作。

我正在使用 Rebar 生成我的发布脚本。这是安装服务的脚本部分：

```
:install
@set description=Erlang node %node_name% in %node_root%
@set start_erl=%node_root%\bin\start_erl.cmd
@set args= ++ %node_name% ++ %node_root%
@%erlsrv% add %service_name% -c "%description%" -name %node_name% -args "%args%" -w "%node_root%" -m "%start_erl%" -stopaction "init:stop()."
@goto :EOF 
```

如何让此服务与长节点名称一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:55:54.790

事实证明，vm.args 文件还指定了一个名称，这可能与`erlsrv`命令中指定的名称冲突。`win_vm.args`我通过在没有`-name`参数的情况下创建一个新的并更改它`start_erl.cmd`以查找文件的 Windows 版本来修复它。我还更改了应用程序 cmd 脚本中的所有`-sname`to`-name`选项。

# c# - 无法将 Program Files Path 变量作为进程的参数传递

> ID：15749053
> 
> 赞同：0
> 
> 时间：2013-04-01T18:16:15.143
> 
> 标签：c#, .net

我想将程序文件目录中的目录作为参数返回。我正在使用 AppDomain.CurrentDomain.BaseDirectory 得到这个论点。如何正确格式化它以将其作为参数发送。

这是我现在正在做的事情

```
String[] arguments = { Settings.Default.installDir, Settings.Default.executableName, "\"" + AppDomain.CurrentDomain.BaseDirectory + "\"" }; 
```

AppDomain.CurrentDomain.BaseDirectory 返回驻留在程序文件 (x86) 中的目录。

```
myprocess.StartInfo.Arguments = String.Join(" ", arguments); 
```

当我运行它时，我得到 "PROGRAM_FILES GSSDesktopAlerts.exe \"C:\Program Files (x86)\somedir\somesubdir\\""

启动时出现 System.ArgumentException: Illegal characters in path。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:30:40.573

忘记使用“\””。您应该使用逐字字符串。例如：@“\”。使用 Path.Combine 而不是“+”运算符。

# ruby-on-rails - Rails - 如何配置 Thin 的端口和环境？

> ID：15749055
> 
> 赞同：0
> 
> 时间：2013-04-01T18:16:18.067
> 
> 标签：ruby-on-rails, thin

我已经为 rails 应用程序安装了瘦 gem，但我找不到配置文件。安装 gem 是否意味着我已经安装了服务器？我只想使用与 3000 不同的端口并在生产模式下启动 Thin。服务器是 Windows。任何意见将是有益的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:23:02.197

只需这样指定即可。

```
rails server -e production -p 4000 
```

来源： http: [//guides.rubyonrails.org/command_line.html#rails-server](http://guides.rubyonrails.org/command_line.html#rails-server)

# java - 要添加到我的项目中的 Javasign 库

> ID：15749056
> 
> 赞同：1
> 
> 时间：2013-04-01T18:16:21.930
> 
> 标签：java

以下导入未解决。我找不到它们来下载以将它们添加到我的项目中。

在项目站点中，我能够找到程序本身，而不是库 [http://javasign.sourceforge.net/index.shtml](http://javasign.sourceforge.net/index.shtml)

```
import org.javasign.operators.CryptokiGenerator
import com.lowagie.text.Rectangle;
import com.lowagie.text.pdf.PdfDictionary;
import com.lowagie.text.pdf.PdfName;
import com.lowagie.text.pdf.PdfPKCS7;
import com.lowagie.text.pdf.PdfReader;
import com.lowagie.text.pdf.PdfSignatureAppearance;
import com.lowagie.text.pdf.PdfStamper;
import com.lowagie.text.pdf.PdfString; 
```

有谁知道我在哪里可以找到它们？

**编辑1：**

我能够添加这些库，但还有最后一个问题：

错误：找不到符号导入com.itextpdf.text.pdf.PdfPKCS7；符号：类 PdfPKCS7 位置：包 com.itextpdf.text.pdf

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:18:55.923

这些`com.lowagie.text.*`包来自[iText](http://itextpdf.com/)。

`org.javasign.operators.CryptokiGenerator`包含在 JavaSign 本身中（[下载](http://sourceforge.net/projects/javasign/files/)）。[http://javasign.sourceforge.net/docs/org/javasign/operators/CryptokiGenerator.html](http://javasign.sourceforge.net/docs/org/javasign/operators/CryptokiGenerator.html)

# php - 使用 Jquery 的 CodeIgniter 登录表单问题

> ID：15749057
> 
> 赞同：0
> 
> 时间：2013-04-01T18:16:24.037
> 
> 标签：php, jquery, ajax, json, codeigniter

我正在使用 CodeIgniter 并尝试使用 jquery`$.ajax()`函数捕获从控制器返回的 JSON 值。这是我下面的“登录/进程”控制器

```
 public function process() {
            $this->form_validation->set_rules('email','Email Address','trim|required|xss_clean'); 
            $this->form_validation->set_rules('passwd','Password','trim|required|xss_clean|md5|callback_check_database');

            $red = ($this->input->post('redirect_url')) ? $this->input->post('redirect_url') : null;
            if ($this->form_validation->run() == false) {
                $output = '{ "success": "no", "redirct": "' . $red . '", "err" : "' .validation_errors() . '" }' ;
            } else {
                //Go to private area
                $output = '{ "success": "yes", "redirct": "account" , "err" : ""}';
            }
        }

        header('Content-Type: application/json', true);
        echo json_encode($output);
    }
} 
```

以下是我的部分观点：

```
<script type='text/javascript' language='javascript'>
    $(document).ready(function() {
        $("#LoginForm").on("submit",function() {
            var datastring = 'email='+$("#email").val()+'&passwd='+$("#passwd").val()+'&redirect_url='+$("#redirect_url").val();
            $.ajax({
                type: "POST",
                url: "<?= base_url("login/process") ?>",
                dataType: "json",
                data: datastring,
                cache: false,
                success: function(output) {
                    //  alert(output.success);
                    if (output.success == 'yes') {
                        document.location.href=output.redirct
                    }
                    if (output.success == 'no') {
                        alert(output.err)
                    }
                }
                })
            return false;  // To prevent form submission
            })
    });
</script> 
```

当我尝试使用 FireBug 进行调试时，以下是我得到的 POST 响应

```
"{ \"success\": \"no\", \"redirct\": \"messaging.php\", \"err\" : \"<p>The Password field is required.<\/p>\n\" }" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:21:16.960

You can't use `json_encode` on a json string. It's for encoding arrays as a json string . I would suggest you to define $output as an array and then use json_encode (it's also less error-prone):

```
$output = array("success" => "no", "redirect" => $red, "err" => validation_errors());

echo json_encode($output); 
```

# css - 除非使用“！important”，否则不应用声明

> ID：15749059
> 
> 赞同：-1
> 
> 时间：2013-04-01T18:16:30.720
> 
> 标签：css, iframe, responsive-design, media-queries

我有一个要在 iframe 中显示的文档。它需要在我的网站上以 2 个不同大小的 iframe 显示，我想相应地调整内容。

在框架文档中，我有一个 570 像素宽的 div。如果 iframe 的宽度低于 400 像素，我希望这个 div 的宽度为 285 像素。

因此，本文档中的 CSS 有一个媒体查询：

```
@media screen and (max-width: 400px) {
.sub-form {
    width: 285px !important;
   }
} 
```

但它只有在我包含“！important”时才有效。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:40:03.113

您需要包含 !important 的两个可能原因是：

```
.sub-form {
  width: 570px;
} 
```

稍后出现在您的 CSS 文件中，或者较宽的宽度出现较早但具有更高的特异性，即

```
.some-div .sub-form {
  width: 570px;
} 
```

我敢肯定还有其他原因。

# c# - C# COM DLL 与 Office 2010 64 位

> ID：15749063
> 
> 赞同：0
> 
> 时间：2013-04-01T18:16:46.710
> 
> 标签：c#, com, ms-office

我可能会重新发布，但我找不到解决方案。

我创建了一个 C# Comvisible 类。这是以下课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace COMTrial
{

    [Guid("2B71BC1B-16F5-4A0D-A015-CAE658A10B07")]
    [InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
    public interface IMyExample
    {
        string GetData();
    }

    [ClassInterface(ClassInterfaceType.AutoDual), ComSourceInterfaces(typeof(IMyExample))]
    [Guid("2B71BC1B-16F5-4A0D-A015-CAE658A01B07")]
    [ComVisible(true)]
    public class Class1
    {

        public Class1()
        {
        }
        [ComVisible(true)]
        public string GetData()
        {
            return "Vikas";
        }
    }
} 
```

然后我检查了 Register for Interop 选项，甚至使完整的程序集可见并编译项目和解决方案。

然后我去excel写了这段代码：

```
Dim a as Object

set a = CreateObject("COMTrial.Class1") 
```

它说，

ActiveX 无法创建对象。

我想到的唯一原因是我正在运行 Office 2010 64 位和 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:56:41.700

> 然后我检查了注册互操作选项

这只会为 32 位进程注册您的程序集。由于这是 64 位版本的 Office，您需要手动运行 Regasm.exe。从 Visual Studio 命令提示符执行此操作，从“以管理员身份运行”开始。请务必使用 64 位版本的 Regasm.exe，对于 .NET 4，它默认位于 C:\Windows\Microsoft.NET\Framework64\v4.0.30319。注意 64\. 使用 /tlb 和 /codebase 选项来匹配 IDE 的行为。

另一个改进是显式使用 [ProgId] 属性，这样您就不必猜测名称，如果项目名称不是“COMTrial”，也不会出现问题。

# c - 为什么我不能在这里插入断点（我可能会添加我所有的朋友，但我没有其他方法可以解决这个问题）

> ID：15749067
> 
> 赞同：0
> 
> 时间：2013-04-01T18:17:01.480
> 
> 标签：c, debugging, gdb

```
(gdb) list 1,20
1   int swap_n_add(int *xp, int *yp)
2   {
3       int x = *xp;
4       int y = *yp;
5   
6       *xp = y;
7       *yp = x;
8       return x + y;
9   }
10  
11  int main() {
12      int a1 = 534;
13      int a2 = 1057;
14      int sum = swap_n_add(&a1, &a2);
15      int diff = a1 - a2;
16  
17      return sum * diff;
18  }
(gdb) b 18
No line 18 in file "swap_n_add.c". 
```

我想检查 main 返回的值，所以我在 18 处设置了一个断点来检查那里的寄存器 ( `info register`)。但它说这条线不存在，尽管它......说它确实存在。我有相同代码的朋友可以把它放在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:12:07.363

我会质疑您未显示的先前设置步骤。如果您的朋友能够在那里设置断点而您没有，则可能是您做错了什么。（假设每个人都使用相同版本的所有工具）

使用适用于 Ubuntu 和 gcc 4.6.3 的 gdb 版本 7.4-2012.04 我可以看到并在相关行设置断点：

```
> gcc -Wall -g file.c      <-- compile with -g for debug symbols
> gdb a.out                <-- run against the executable
This GDB was configured as "x86_64-linux-gnu".     <-- make sure it was configured for 
For bug reporting instructions, please see:            your architecture
<http://bugs.launchpad.net/gdb-linaro/>...
Reading symbols from /home/mike/C/a.out...done.   <-- and that your file loads symbols
(gdb) line 22, 39
22   int swap_n_add(int *xp, int *yp)   <-- mine are different because I have a bunch
23   {                                      of #include's in my test file
24      int x = *xp;
25      int y = *yp;
26  
27      *xp = y;
28      *yp = x;
29      return x + y;
30  }
31  
32  int main() {
33      int a1 = 534;
34      int a2 = 1057;
35      int sum = swap_n_add(&a1, &a2);
36      int diff = a1 - a2;
37  
38      return sum * diff;
39  }
(gdb) b 39
Breakpoint 1 at 0x400530: file file.c, line 39. 
```

请注意，如果我在文件之外选择一行，比如.. 75，它会给你一条关于“文件中没有第 x 行”的消息：

```
(gdb) b 75
No line 75 in the current file.
Make breakpoint pending on future shared library load? (y or [n]) 
```

如果您看到这一点，值得仔细检查您的行号，您可能算错了。

如果您想查看 return ( `sum * diff`) 的值，您始终可以在返回之前将其设置为局部变量并在返回时中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:24:38.450

这可能是特定于编译器/调试器的。可能没有为右大括号生成调试信息。

此外，如果您启用了优化，则可能很难或不可能在某些位置放置断点。如果您使用它，请尝试将`-O`参数删除到 gcc。

如果仍然没有帮助，请将返回值分配给新变量并返回该变量。

或者，您可以切换到反汇编，在`ret`指令上放置一个断点`main()`（在 x86 上执行函数返回的指令）并检查 CPU 寄存器中的返回值（应该在`eax`x86 上）。

# c++ - C++ 中的 Fork() 和 Wait()

> ID：15749071
> 
> 赞同：4
> 
> 时间：2013-04-01T18:17:14.270
> 
> 标签：c++, process, compiler-errors, fork

我在 C++ 中有一个类，它调用 fork() 然后 wait()s 让子进程完成，但是当我尝试这样做时出现编译器错误。

这是代码：

```
#include <iostream>
#include <string>
#include <sys/types.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>

using namespace std;

/* Connection class */
class Connection {
    string destination, userName, computerName;

public:
    /*  constructor for class
    You must pass it two strings. The first must be either the word "server" or the word "client".
    This will tell us which machine we want to connect to. The second will specify the username
    with which to connect to that machine.
    */
    Connection(string state, string user="default_username")
    {
        if(state == "server")
        {
            cout << "You've chosen to connect to the 'server'.\n";
            destination = "user.palmetto.clemson.edu:";
            userName = user;
            cout << "Destination: " << destination << ", Username: " << userName << "\n";
            cout << "Full connect argument: " << userName << "@" << destination << "\n";
        } else if (state == "client")
        {
            cout << "You've chosen to connect to the 'client'.\n";
            destination = "NIElaparo.ces.clemson.edu:";
            userName = user;
            cout << "Destination: " << destination << ", Username: " << userName << "\n";
            cout << "Full connect argument: " << userName << "@" << destination << "\n";
        } else
            cout << "Error. Please enter either 'server' or 'client' for first argument in Connection().\n";

      string atString = "@";
      computerName = userName + atString + destination;
    }
    /*  Send function for class
    Accepts a string as an argument which contains the name of the file to be sent. And then it uses
    exec() system calls to use "scp" to send the file.
    Note: this assumes that passwordless ssh has been set up between the client and server machines.
    */

    /* ITS IN THIS FUNCTION THAT I GET THE ERROR. I SPLIT THE PROCESS WITH FORK, RUN 
       EXECL() AND THEN WAIT() ON THE CHILD PROCESS */
    int Send(string fileName)
    {
      pid_t pid;
       // char * parmList[] = {"scp", fileName, destination, NULL};
      int    status;

      if ((pid = fork()) < 0) {     /* fork a child process           */
         printf("*** ERROR: forking child process failed\n");
         exit(1);
      }
      else if (pid == 0) {          /* for the child process:         */
         if (execl("scp", fileName.c_str(), computerName.c_str(), NULL) < 0) {     /* execute the command  */
            printf("*** ERROR: exec failed\n");
            exit(1);
         }
      }
      else {                                  /* for the parent:      */
         while (wait(&status) != pid)       /* wait for completion  */
            ;
      }
    }
};

int main()
{
    Connection *con = new Connection("server");
    /* I'm just doing this to see if this works to create the string "testgoingnow". Who knows. */
    //string string = "test".append("going").append("now\n");
   string string1 = "test";
   string at = "@";
   string string2 = "going";
   string new_string = string1 + at + string2;
   cout << new_string << "\n";

   Send("test.txt");

    //cout << string;

    return 0;
} 
```

我得到这个编译器错误：

```
connection.cpp: In member function ‘int Connection::Send(std::string)’:
connection.cpp:64: error: no matching function for call to ‘wait::wait(int*)’
/usr/include/bits/waitstatus.h:68: note: candidates are: wait::wait()
/usr/include/bits/waitstatus.h:68: note:                 wait::wait(const wait&) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-01T18:21:00.207

也许您需要包含正确的标题，请尝试

```
#include <sys/wait.h> 
```

# c# - 备份 Windows Phone App 数据库的最佳方法

> ID：15749072
> 
> 赞同：1
> 
> 时间：2013-04-01T18:17:14.870
> 
> 标签：c#, windows-phone-7, linq-to-sql

我计划为我的应用程序实现备份/恢复功能，但不确定哪种方式是最好和最有效的方式。我可以将整个 sdf 文件复制到云端还是将其转换为 xml？简单的方法是复制 sdf 文件，但这是一个好方法吗？我的意思是公开数据库文件，因为该应用程序不是免费的并且它是付费应用程序！我可以编码 sdf 文件或密码保护它！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:23:32.280

您可以实现自己的上传端点，或者您可以使用[Live SDK](http://msdn.microsoft.com/en-us/live/ff621310.aspx)并将文件上传到用户的 SkyDrive（不是安全选项）。因此，您最终需要自己的后端 - 例如，构建一个 WCF 服务，您可以通过该服务管道序列化数据，或者只是拥有一个区分用户的安全上传端点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:37:21.683

我找到了，它在这里解释了如何保护 Windows Phone 上数据库中的数据。数据库使用 AES-128 加密，密码使用 SHA-256 散列。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202861(v=vs.105).aspx#BKMK_Usingconnectionstrings](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202861(v=vs.105).aspx#BKMK_Usingconnectionstrings)

```
 // Create the data context.
MyDataContext db = new MyDataContext("Data Source='isostore:/mydb.sdf';Password='securepassword';");

// Create an encrypted database after confirming that it does not exist.
if (!db.DatabaseExists()) db.CreateDatabase(); 
```

# objective-c - 谷歌地图中目标c的坐标地址

> ID：15749077
> 
> 赞同：1
> 
> 时间：2013-04-01T18:17:39.880
> 
> 标签：objective-c, google-maps, google-geocoding-api

我有 60 个地址，我想为每个地址添加引脚。我想使用谷歌地图而不是苹果地图。我在外面有一个循环，并为 100 个元素调用此方法。

有时我得到这个错误： `*** -[__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array` 而且错误不规则，我的意思是错误不对应于确切的地址。有时我有 20 个错误，有时是 15 个，...

有谁知道如何解决它？谢谢你

```
- (CLLocationCoordinate2D) getLocationFromAddress:(NSString*) address
{  
    NSError *error = nil;

    NSString *lookUpString;
    NSDictionary *jsonDict;
    NSData *jsonResponse;
    NSArray *locationArray;

lookUpString = [[NSString alloc] initWithFormat:@"http://maps.googleapis.com/maps/api/geocode/json?address=%@&sensor=true", address];

    lookUpString = [lookUpString stringByReplacingOccurrencesOfString:@" " withString:@"+"];

    jsonResponse = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:lookUpString]];

    jsonDict = [NSJSONSerialization JSONObjectWithData:jsonResponse options:kNilOptions error:&error];

    locationArray = [[NSArray alloc] init];
    locationArray = [[[jsonDict valueForKey:@"results"] valueForKey:@"geometry"] valueForKey:@"location"];

    @try {
        locationArray = [locationArray objectAtIndex:0];
         NSLog(@" LOADING, %d, %d, %d", [locationArray count], [jsonDict count], [jsonResponse length]);
    }
    @catch (NSException *exception) {
        NSLog(@"ERROR LOADING, %d, %d, %d", [locationArray count], [jsonDict count], [jsonResponse length]);

    }
    @finally {

    }

    NSString *latitudeString = [[NSString alloc] init];
    latitudeString = [locationArray valueForKey:@"lat"];

    NSString *longitudeString = [[NSString alloc] init];
    longitudeString = [locationArray valueForKey:@"lng"];

    NSString *statusString = [[NSString alloc] init];
    statusString = [jsonDict valueForKey:@"status"];

    double latitude = 0.0;
    double longitude = 0.0;

    if ([statusString isEqualToString:@"OK"])
    {
        latitude = [latitudeString doubleValue];
        longitude = [longitudeString doubleValue];
    }

    else
        NSLog(@"Something went wrong, couldn't find address");

    _location.longitude = longitude;
    _location.latitude = latitude;

    return _location;

} 
```

# jquery - 用户控件加载数据后如何执行jquery

> ID：15749079
> 
> 赞同：0
> 
> 时间：2013-04-01T18:17:42.430
> 
> 标签：jquery, user-controls, tinyscrollbar

我正在使用 tinyscrollbar 并且需要在用户控件运行中继器以填充无序列表后运行 tinyscrollbar_update() 函数。我希望能够在该控件完成执行后触发对 tinyscrollbar_update 的 jquery 调用。相当新的jQuery。我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:27:31.590

我认为您可以在页面底部添加一个文字控件：

> Page.Controls.Add(new LiteralControl("< script text/javascript >"
> + "$(document).ready(function() {"
> + "$('div#whatever').whatever();"
> + "} );"

确保将脚本文件添加到页面的头部（实际上可能在您的 Site.Master 文件中。）

这将在您的 .cs 文件中，在 page_load 模块中。

# sql-server-2008 - 将“星期一，2013 年 4 月 1 日 10:00:00 GMT”转换为 sqlserver 中的日期时间

> ID：15749090
> 
> 赞同：-1
> 
> 时间：2013-04-01T18:18:38.273
> 
> 标签：sql-server-2008

我想将此字符串“Mon, 01 Apr 2013 10:00:00 GMT”转换为 sql server 2008 中的日期时间，但由于 GMT，我无法转换它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T19:00:37.107

这将做：

```
DECLARE @Date VARCHAR(30)
SET @Date = 'Mon, 01 Apr 2013 10:00:00 GMT'

SELECT CONVERT(DATETIME,SUBSTRING(@Date,5,21),113) 
```

# ios - 在 UILabel 中制作 emoji 符号灰度

> ID：15749092
> 
> 赞同：10
> 
> 时间：2013-04-01T18:18:40.997
> 
> 标签：ios, objective-c, iphone, uilabel, emoji

我想使用 Apple 的内置表情符号字符（特别是几个笑脸，例如`\ue415)`在 a 中，`UILabel`但我希望表情符号以灰度呈现。

我希望它们保留字符`UILabel`（纯文本或属性都可以）。我不是在寻找混合图像/字符串解决方案（我已经拥有）。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-23T16:39:59.157

我知道你说你不是在寻找“混合图像解决方案”，但我一直在追逐这条龙，我能想出的最好结果是混合图像。以防我的解决方案对您的旅程更有帮助，我将其包括在此处。祝你好运！

```
import UIKit
import QuartzCore

class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()
        // the target label to apply the effect to
        let label = UILabel(frame: view.frame)
        // create label text with empji
        label.text = " HELLO"
        label.textAlignment = .center
        // set to red to further show the greyscale change
        label.textColor = .red
        // calls our extension to get an image of the label
        let image = UIImage.imageWithLabel(label: label)
        // create a tonal filter
        let tonalFilter = CIFilter(name: "CIPhotoEffectTonal")
        // get a CIImage for the filter from the label image
        let imageToBlur = CIImage(cgImage: image.cgImage!)
        // set that image as the input for the filter
        tonalFilter?.setValue(imageToBlur, forKey: kCIInputImageKey)
        // get the resultant image from the filter
        let outputImage: CIImage? = tonalFilter?.outputImage
        // create an image view to show the result
        let tonalImageView = UIImageView(frame: view.frame)
        // set the image from the filter into the new view
        tonalImageView.image = UIImage(ciImage: outputImage ?? CIImage())
        // add the view to our hierarchy
        view.addSubview(tonalImageView)
    }
}

extension UIImage {
    class func imageWithLabel(label: UILabel) -> UIImage {
        UIGraphicsBeginImageContextWithOptions(label.bounds.size, false, 0.0)
        label.layer.render(in: UIGraphicsGetCurrentContext()!)
        let img = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return img!
    }
} 
```

# json - Handlebars：使用子属性访问父级的 JSON 属性

> ID：15749097
> 
> 赞同：1
> 
> 时间：2013-04-01T18:19:11.727
> 
> 标签：json, handlebars.js

我想知道是否有一种方法可以简化此车把模板以不使用助手。

数据：

```
{
    games:[game: {teamID:1}]
    teams:{1:{name:'Team Name'}}
} 
```

模板（请注意，它位于`{{#each games}}`:

```
{{#teamFetch ../this teamID 'name'}}{{/teamFetch}} 
```

帮手：

```
Handlebars.registerHelper('teamFetch', function(season, teamid, property){
    return season.teams[teamid][property];
}); 
```

我是车把的新手，但这是我可以弄清楚如何根据比赛中的 id 在赛季中访问特定球队并获得该球队财产的唯一方法。有没有不需要辅助函数的更简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T05:01:10.957

没有办法绕过不使用助手。这是因为 Handlebars 不允许您在其*段文字符号*中传递变量来指定变量路径。在[有关 Expressions 的 Handlebars 文档中](http://handlebarsjs.com/expressions.html)：

> 要引用不是有效标识符的属性，您可以使用分段文字表示法：{{#eacharticles.[10].comments}} {{/each}}

所以......理想情况下，我们希望能够做这样的事情：

```
{{#each games}}
        {{../teams.[teamID].name}}
{{/each}} 
```

但截至目前，还没有办法将 into 的值传递`teamID`进去 `../teams.[ ].name`。

它只能这样做：

```
{{#each games}}
        {{../teams.[0].name}}
{{/each}} 
```

它只能解释值，例如。`0`，并且无法解析变量，例如。`teamID`

# numpy - 将 3D numpy 导出到 VTK 文件以在 Paraview/Mayavi 中查看

> ID：15749100
> 
> 赞同：8
> 
> 时间：2013-04-01T18:19:30.257
> 
> 标签：numpy, vtk, paraview

对于那些想要将简单的 3D numpy 数组（连同轴）导出到 .vtk（或 .vtr）文件以进行后处理并在 Paraview 或 Mayavi 中显示的人来说，有一个名为[PyEVTK](https://bitbucket.org/pauloh/pyevtk)的小模块可以做到这一点。该模块支持结构化和非结构化数据等。不幸的是，即使代码在基于 unix 的系统中运行良好，我也无法在任何 Windows 安装上使其工作（不断崩溃），这只会让事情变得复杂。我联系了开发商，但他的建议没有奏效

因此我的问题是：如何使用`from vtk.util import numpy_support`函数将 3D 数组（函数本身不支持 3D 数组）导出到 .vtk 文件？有没有一种简单的方法可以在不创建 vtkDatasets 等的情况下做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-12T00:04:33.357

它已经永远了，我完全忘记了问这个问题，但我最终弄明白了。我在我的博客 (PyScience) 中写了一篇关于它的文章，提供了关于如何在 NumPy 和 VTK 之间进行转换的教程。有兴趣的不妨看看：

[pyscience.wordpress.com/2014/09/06/numpy-to-vtk-converting-your-numpy-arrays-to-vtk-arrays-and-files/](http://pyscience.wordpress.com/2014/09/06/numpy-to-vtk-converting-your-numpy-arrays-to-vtk-arrays-and-files/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T02:03:09.217

这不是您问题的直接答案，但如果您有`tvtk`（如果您有 mayavi，您应该有），您可以使用它将数据写入 vtk 格式。（见：[http](http://code.enthought.com/projects/files/ETS3_API/enthought.tvtk.misc.html) ://code.enthought.com/projects/files/ETS3_API/enthought.tvtk.misc.html ）

它不使用`PyEVTK`，并且它支持广泛的数据源（不仅仅是结构化和非结构化网格），因此它可能会在其他东西不适用的地方工作。

举个简单的例子（Mayavi 的`mlab`界面可以让这变得不那么冗长，特别是如果你已经在使用它的话。）：

```
import numpy as np
from enthought.tvtk.api import tvtk, write_data

data = np.random.random((10,10,10))

grid = tvtk.ImageData(spacing=(10, 5, -10), origin=(100, 350, 200), 
                      dimensions=data.shape)
grid.point_data.scalars = np.ravel(order='F')
grid.point_data.scalars.name = 'Test Data'

# Writes legacy ".vtk" format if filename ends with "vtk", otherwise
# this will write data using the newer xml-based format.
write_data(grid, 'test.vtk') 
```

以及输出文件的一部分：

```
# vtk DataFile Version 3.0
vtk output
ASCII
DATASET STRUCTURED_POINTS
DIMENSIONS 10 10 10
SPACING 10 5 -10
ORIGIN 100 350 200
POINT_DATA 1000
SCALARS Test%20Data double
LOOKUP_TABLE default
0.598189 0.228948 0.346975 0.948916 0.0109774 0.30281 0.643976 0.17398 0.374673 
0.295613 0.664072 0.307974 0.802966 0.836823 0.827732 0.895217 0.104437 0.292796 
0.604939 0.96141 0.0837524 0.498616 0.608173 0.446545 0.364019 0.222914 0.514992 
...
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-05T05:06:46.140

Mayavi 的 TVTK 有一种编写 vtk 文件的优美方式。这是我根据@Joe 和 tvtk 文档为自己编写的测试示例。它比 evtk 的优势是同时支持 ascii 和 html。希望它能帮助其他人。

```
from tvtk.api import tvtk, write_data
import numpy as np

#data = np.random.random((3, 3, 3))
#
#i = tvtk.ImageData(spacing=(1, 1, 1), origin=(0, 0, 0))
#i.point_data.scalars = data.ravel()
#i.point_data.scalars.name = 'scalars'
#i.dimensions = data.shape
#
#w = tvtk.XMLImageDataWriter(input=i, file_name='spoints3d.vti')
#w.write()

points = np.array([[0,0,0], [1,0,0], [1,1,0], [0,1,0]], 'f')
(n1, n2)  = points.shape
poly_edge = np.array([[0,1,2,3]])

print n1, n2
## Scalar Data
#temperature = np.array([10., 20., 30., 40.])
#pressure = np.random.rand(n1)
#
## Vector Data
#velocity = np.random.rand(n1,n2)
#force     = np.random.rand(n1,n2)
#
##Tensor Data with 
comp = 5
stress = np.random.rand(n1,comp)
#
#print stress.shape
## The TVTK dataset.
mesh = tvtk.PolyData(points=points, polys=poly_edge)
#
## Data 0 # scalar data
#mesh.point_data.scalars = temperature
#mesh.point_data.scalars.name = 'Temperature'
#
## Data 1 # additional scalar data
#mesh.point_data.add_array(pressure)
#mesh.point_data.get_array(1).name = 'Pressure'
#mesh.update()
#
## Data 2 # Vector data
#mesh.point_data.vectors = velocity
#mesh.point_data.vectors.name = 'Velocity'
#mesh.update()
#
## Data 3 additional vector data
#mesh.point_data.add_array( force)
#mesh.point_data.get_array(3).name = 'Force'
#mesh.update()

mesh.point_data.tensors = stress
mesh.point_data.tensors.name = 'Stress'

# Data 4 additional tensor Data
#mesh.point_data.add_array(stress)
#mesh.point_data.get_array(4).name = 'Stress'
#mesh.update()

write_data(mesh, 'polydata.vtk')

# XML format 
# Method 1
#write_data(mesh, 'polydata')

# Method 2
#w = tvtk.XMLPolyDataWriter(input=mesh, file_name='polydata.vtk')
#w.write() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-07T15:38:31.837

我知道这有点晚了，我很喜欢你的教程@somada141。这也应该有效。

```
def numpy2VTK(img, spacing=[1.0, 1.0, 1.0]):
 # evolved from code from Stou S.,
 # on http://www.siafoo.net/snippet/314
 # This function, as the name suggests, converts numpy array to VTK
 importer = vtk.vtkImageImport()

 img_data = img.astype('uint8')
 img_string = img_data.tostring()  # type short
 dim = img.shape

 importer.CopyImportVoidPointer(img_string, len(img_string))
 importer.SetDataScalarType(VTK_UNSIGNED_CHAR)
 importer.SetNumberOfScalarComponents(1)

 extent = importer.GetDataExtent()
 importer.SetDataExtent(extent[0], extent[0] + dim[2] - 1,
                       extent[2], extent[2] + dim[1] - 1,
                       extent[4], extent[4] + dim[0] - 1)
 importer.SetWholeExtent(extent[0], extent[0] + dim[2] - 1,
                        extent[2], extent[2] + dim[1] - 1,
                        extent[4], extent[4] + dim[0] - 1)

 importer.SetDataSpacing(spacing[0], spacing[1], spacing[2])
 importer.SetDataOrigin(0, 0, 0)

 return importer 
```

希望能帮助到你！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-30T08:32:06.033

这是从[此处](https://www.programcreek.com/python/example/96389/SimpleITK.ReadImage)`SimpleITK`获取功能的版本：`load_itk`

```
import SimpleITK as sitk
import numpy as np

if len(sys.argv)<3:
    print('Wrong number of arguments.', file=sys.stderr)
    print('Usage: ' + __file__ + ' input_sitk_file' + ' output_sitk_file', file=sys.stderr)
    sys.exit(1)

def quick_read(filename):
    # Read image information without reading the bulk data.
    file_reader = sitk.ImageFileReader()
    file_reader.SetFileName(filename)
    file_reader.ReadImageInformation()
    print('image size: {0}\nimage spacing: {1}'.format(file_reader.GetSize(), file_reader.GetSpacing()))
    # Some files have a rich meta-data dictionary (e.g. DICOM)
    for key in file_reader.GetMetaDataKeys():
        print(key + ': ' + file_reader.GetMetaData(key))

def load_itk(filename):
    # Reads the image using SimpleITK
    itkimage = sitk.ReadImage(filename)
    # Convert the image to a  numpy array first and then shuffle the dimensions to get axis in the order z,y,x
    data = sitk.GetArrayFromImage(itkimage)
    # Read the origin of the ct_scan, will be used to convert the coordinates from world to voxel and vice versa.
    origin = np.array(list(reversed(itkimage.GetOrigin())))
    # Read the spacing along each dimension
    spacing = np.array(list(reversed(itkimage.GetSpacing())))
    return data, origin, spacing

def convert(data, output_filename):
    image = sitk.GetImageFromArray(data)
    writer = sitk.ImageFileWriter()
    writer.SetFileName(output_filename)
    writer.Execute(image)

def wait():
    print('Press Enter to load & convert or exit using Ctrl+C')
    input()

quick_read(sys.argv[1])
print('-'*20)
wait()
data, origin, spacing = load_itk(sys.argv[1])
convert(sys.argv[2]) 
```

# javascript - Backbone - 检查记录是否已经存在 - 还有比这更好的方法吗？

> ID：15749103
> 
> 赞同：0
> 
> 时间：2013-04-01T18:19:37.057
> 
> 标签：javascript, jquery, backbone.js

在 Backbone 中，我需要检查模型记录是否已经存在。现在，我通过 id 获取模型，并查看其“created_at”属性是否未定义。这对我来说很脆弱。有没有人有更好的建议？

```
var dealProgram = new WhiteDeals.Models.DealProgram({id: servant_id});
      dealProgram.fetch({
        success: function() {
          var program = dealProgram.toJSON();
          var datecheck = program.created_at
          if(typeof datecheck === 'undefined'){
              dealPrograms.create({
                title: "", 
                servant_id: servant.servant_id,
                servant_name: servant.name,
                servant_master: servant.master
              }, 
              {
                success: function () {
                  self.manageServants(servants);
                }
              }); // End of dealPrograms.create
          } else if (datecheck !== undefined) {
              console.log("is defined, success!")
              self.manageServants(servants);
          }; // End of if statement for non-existant dealPrograms
        } // End of success
      }); // End of dealProgram.fetch 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:57:40.560

您显然必须使用请求进行检查（无论请求的形式如何，无论如何您都将拥有少量数据）。猜猜您仍然应该想知道是否不值得在一个集合中一次获取所有模型，以便您可以在客户端进行检查（或者如果它太大而无法获取所有内容，则只检查 id）。

# sql - SQL合并2个表

> ID：15749105
> 
> 赞同：0
> 
> 时间：2013-04-01T18:19:41.447
> 
> 标签：sql

如果这个问题听起来很简单，我是一个初学者很抱歉。我需要帮助来为这种情况创建嵌套 SQL

对于表 A 中的每条记录，都包含表 B 中的多条记录。例如，表 A 具有 2013 年 1 月的汇总余额。表 B 具有表 A 的详细进出交易记录。

我如何得到这个结果

```
DECLARE @DateStart DATETIME
DECLARE @DateEnd DATETIME
SET @DateStart = A.MonthYear
SET @DateEnd = EOMONTH(@DateStart)

Select A.MonthYear, A.StartBalance, A.EndBalance, Sum(B.InTransaction)
    WHERE B.TransactionDate BETWEEN @DateStart and @DateEnd 
          AND A.InventoryType = B.InventoryType 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:21:06.503

像这样的东西？

```
SELECT A.monthyear, 
       A.startbalance, 
       A.endbalance, 
       Sum(B.intransaction) 
FROM   table a 
       JOIN table b 
         ON b.col = a.col 
            AND B.transactiondate BETWEEN @DateStart AND @DateEnd 
GROUP  BY A.monthyear, 
          A.startbalance, 
          A.endbalance 
```

# android - onSaveInstanceState() 与 onRetainCustomNonConfigurationInstance()

> ID：15749106
> 
> 赞同：3
> 
> 时间：2013-04-01T18:19:42.277
> 
> 标签：android, actionbarsherlock, parcelable, android-optionsmenu, android-configchanges

我正在使用 ActionBarSherlock 以及`MenuItem`我动态管理的几个 s，具体取决于程序状态。具体来说，我将s 保存到'方法`MenuItem`中的实例变量中，然后可以根据需要在.`Activity``onCreateOptionsMenu()``Activity`

但是，我发现`MenuItem`变量可能会在配置更改时丢失，例如设备旋转。因此，如果需要，我还将它们放入 a`Parcel`并通过下一次调用中的机制将它们传递给`onSaveInstanceState()`进行恢复。`savedInstanceState``onCreate()`

在设备旋转的情况下，这似乎工作正常。但是，如果我按下主页按钮，我会收到错误消息：

```
Unable to marshal value com.actionbarsherlock.internal.view.menu.MenuItemWrapper 
```

知道有什么区别，或者建议如何解决？谢谢！

**更新**

我找到了一个简单的解决方案，使用[`onRetainCustomNonConfigurationInstance()`](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html#onRetainCustomNonConfigurationInstance%28%29). 通过覆盖此方法，您可以在销毁 an 时存储您选择的类的对象`Activity`，然后使用`getLastCustomNonConfigurationInstance()`. 这似乎比弄乱`Parcelable`s 等要简单得多，而且它适用于我的情况。

**但我仍然想知道：**为什么我会使用 得到上述错误`onSaveInstanceState()`？使用起来一般安全`onRetainCustomNonConfigurationInstance()`吗，还是有什么陷阱？

# apache-flex - Display data properties of ItemRenderer

> ID：15749109
> 
> 赞同：0
> 
> 时间：2013-04-01T18:19:46.897
> 
> 标签：apache-flex, flash-builder

I have this ItemRenderer

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx"
                autoDrawBackground="false">

    <s:HGroup verticalAlign="middle">
        <s:Button label="{data.Nome} ({data.Rating})" width="150" height="35"/>
        <s:Button label="{data.Estado}" width="150" height="30"/>
    </s:HGroup>

</s:ItemRenderer> 
```

I'd like to see the properties of `data` object when typing `.` since its a custom object. How can I see them?

`data` is suppose to be a `User` class object.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:47:04.577

尝试这个

```
<fx:Script>
  <![CDATA[
  import yourPackage.User;

  [Bindable]
  private var user:User;

  override public function set data(value:Object):void{
    super.data = value;
    user = data as User;
  }
  ]]>
</fx:Script>
<s:HGroup verticalAlign="middle">
  <s:Button label="{user.Nome} ({user.Rating})" width="150" height="35"/>
  <s:Button label="{user.Estado}" width="150" height="30"/>
</s:HGroup> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:15:50.023

正如 Юрий Борыс 所说，或者您也可以将数据转换为用户：

```
<s:Button label="{User(data).Nome} ({User(data).Rating})" width="150" height="35"/> 
```

HIH

# php - 如何创建过滤掉多个作 者的 WordPress 查询？

> ID：15749111
> 
> 赞同：0
> 
> 时间：2013-04-01T18:19:48.697
> 
> 标签：php, database, wordpress, join

我一直在尝试进行 WordPress 查询，但遇到了很大的障碍。这是我要查询帖子的方式：

```
<?php query_posts( 's=@' . $user_login . '&author=-4,-5,-6&posts_per_page=25&paged='. $paged ); ?> 
```

正如您从这段代码中看到的那样，我试图排除 id 为 4、5 和 6 的作者。但是，WordPress 目前不允许此功能（与类别一样）。

有没有人知道如何实现这个目标——也许是自定义查询/加入？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:44:42.627

改变

```
<?php query_posts( 's=@' . $user_login . 'author=-4,-5,-6' '&posts_per_page=25' . '&paged='. $paged ); 
```

到

```
<?php query_posts( 's=' . $user_login . '&author=-4&author=-5&author=-6&posts_per_page=25&paged='. $paged ); 
```

消除多个作者调用为

> 作者=-4&author=-6 .... 依此类推

参考：[http ://www.yoursearchbuddy.com/wordpress-show-post-exclude-author](http://www.yoursearchbuddy.com/wordpress-show-post-exclude-author)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:01:34.850

WordPress 目前不支持一次从查询中删除多个作者帖子。

但是我们可以使用另一个钩子`posts_where`来删除我们不需要的作者。但是如果我们使用这个钩子，它将影响 WordPress 中的所有地方。所以我们在hook这个过滤器的时候要小心。

如果将它添加到`functions.php`文件中，它将在所有具有`post_where`钩子的查询中运行。

`functions.php`在您的主题中添加此功能。

```
function remove_author_posts ($where) {
    global $wpdb; 

    //add the author id's you need to remove
    $removed_authors   = array ('4', '5', '6');

    $where .= ' AND ' .  $wpdb->posts . '.post_author !=' . implode(' AND ' .  $wpdb->posts . '.post_author !=', $removed_authors);
    return $where;
} 
```

现在将此过滤器添加到您调用 query_posts 的位置

```
add_filter ('posts_where', 'remove_author_posts'); 
```

不要在您的主题`functions.php`文件中添加此过滤器挂钩。只在需要的地方添加。

现在更改您的查询帖子并在您需要的页面中添加过滤器，如下所示：

```
query_posts( 's=' . $user_login . '&posts_per_page=25&paged='. $paged ); 
```

所以完整的东西看起来像

```
add_filter ('posts_where', 'remove_author_posts');
query_posts( 's=' . $user_login . '&posts_per_page=25&paged='. $paged ); 
```

**更新 ：**

`global`如果您需要动态更改作者 ID，则可以使用变量。在添加过滤器之前添加一个新`global`变量。`$remove_authors`

```
global $removed_authors ;
//add the author id's you need to remove
$removed_authors   = array ('4', '5', '6');

add_filter ('posts_where', 'remove_author_posts');
query_posts( 's=' . $user_login . '&posts_per_page=25&paged='. $paged ); 
```

现在更改 functions.php 文件中的 remove_author_posts

```
function remove_author_posts ($where) {

    global $wpdb, $removed_authors;

    if (empty ($removed_authors) || !is_array($removed_authors))
        return $where;

    $where .= ' AND ' .  $wpdb->posts . '.post_author !=' . implode(' AND ' .  $wpdb->posts . '.post_author !=', $removed_authors);

    return $where;
} 
```

希望这可以帮助你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-18T23:30:24.250

`WP_Query`我知道这是一篇旧帖子，但为了任何 googlers 的利益，您现在可以使用WordPress v3.7以更好的方式执行此操作： [http://codex.wordpress.org/Class_Reference/WP_Query#作者_参数](http://codex.wordpress.org/Class_Reference/WP_Query#Author_Parameters)

*您还可以通过这种方式排除多个作者：*

```
$query = new WP_Query( array( 'author__not_in' => array( 4, 5, 6 ) ) ); 
```

# shopify - Shopify display image thumbnails for variant options

> ID：15749112
> 
> 赞同：2
> 
> 时间：2013-04-01T18:19:52.207
> 
> 标签：shopify

I am so stuck trying to find an answer for this and I can't find it anywhere. Yet I have seen it done online. Basically all I want to do is have images show instead of the text.

Available finishes: White, Antique, Cinnamon

And instead of the text, they can select an image representing each color.

Example: [http://www.amazon.com/Sundesa-BB28-MC01-BlenderBottle%C2%AE-Classic-28-ounce/dp/B0018G4ZEW/ref=sr_1_1?ie=UTF8&qid=1363033335&sr=8-1&keywords=blender+bottle](https://rads.stackoverflow.com/amzn/click/com/B0018G4ZEW)

I DO NOT need the image to change as you select a color. I just need the color images to show...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T17:11:11.223

您现在可能已经找到了答案，但是您是否正在寻找类似的东西？它对我们很有效。[http://docs.shopify.com/manual/configuration/store-customization/add-color-swatches-to-your-products](http://docs.shopify.com/manual/configuration/store-customization/add-color-swatches-to-your-products)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:34:39.490

在主题内，shopify 通常会创建一个带有 HTML 标签选项的表单。使用液体（您在前端使用的 Shopify 语言），您可以添加 HTML 标记 img（图像）。您可以加载自己的产品图片（可能您需要设置与图片正确匹配变体的订单）。另一种选择是在主题资产中加载图像，但您必须逐个上传。希望它可以提供任何想法...

# objective-c - 如何理解 CoreBluetooth 数据

> ID：15749113
> 
> 赞同：1
> 
> 时间：2013-04-01T18:19:53.103
> 
> 标签：objective-c, core-bluetooth

最近我一直在玩 CoreBluetooth，虽然我可以连接到一些设备，但我似乎永远无法正确读取数据（特征值）。

现在我正在连接 Wahoo BT 心率监测器，我正在接收所有信号，但我无法将数据转化为任何有意义的数据。（是的，我知道有一个 API，但我试图在没有它的情况下进行连接，以正确获得与 CoreBluetooth 一起工作的东西）。

到目前为止，我还无法将 NSData (characteristic.value) 变成任何明智的东西。如果您对如何理解这些数据有任何建议，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-28T08:55:56.693

下面是一些代码来完全解析所有心率测量特征数据。

如何处理数据取决于几件事：

*   BPM 是写入一个字节还是两个字节？
*   有EE数据吗？
*   计算 RR 间隔值的数量，因为一条消息中可以有多个值（我已经看到最多三个）。

这是[Heart_rate_measurement 特性的实际规格](https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml)

```
// Instance method to get the heart rate BPM information
- (void) getHeartBPMData:(CBCharacteristic *)characteristic error:(NSError *)error
{
    // Get the BPM //
    // https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml //

    // Convert the contents of the characteristic value to a data-object //
    NSData *data = [characteristic value];

    // Get the byte sequence of the data-object //
    const uint8_t *reportData = [data bytes];

    // Initialise the offset variable //
    NSUInteger offset = 1;
    // Initialise the bpm variable //
    uint16_t bpm = 0;

    // Next, obtain the first byte at index 0 in the array as defined by reportData[0] and mask out all but the 1st bit //
    // The result returned will either be 0, which means that the 2nd bit is not set, or 1 if it is set //
    // If the 2nd bit is not set, retrieve the BPM value at the second byte location at index 1 in the array //
    if ((reportData[0] & 0x01) == 0) {
        // Retrieve the BPM value for the Heart Rate Monitor
        bpm = reportData[1];

        offset = offset + 1; // Plus 1 byte //
    }
    else {
        // If the second bit is set, retrieve the BPM value at second byte location at index 1 in the array and //
        // convert this to a 16-bit value based on the host’s native byte order //
        bpm = CFSwapInt16LittleToHost(*(uint16_t *)(&reportData[1]));

        offset =  offset + 2; // Plus 2 bytes //
    }
    NSLog(@"bpm: %i", bpm);

    // Determine if EE data is present //
    // If the 3rd bit of the first byte is 1 this means there is EE data //
    // If so, increase offset with 2 bytes //
    if ((reportData[0] & 0x03) == 1) {
        offset =  offset + 2; // Plus 2 bytes //
    }

    // Determine if RR-interval data is present //
    // If the 4th bit of the first byte is 1 this means there is RR data //
    if ((reportData[0] & 0x04) == 0)
    {
        NSLog(@"%@", @"Data are not present");
    }
    else
    {
        // The number of RR-interval values is total bytes left / 2 (size of uint16) //

        NSUInteger length = [data length];
        NSUInteger count = (length - offset)/2;
        NSLog(@"RR count: %lu", (unsigned long)count);

        for (int i = 0; i < count; i++) {

            // The unit for RR interval is 1/1024 seconds //
            uint16_t value = CFSwapInt16LittleToHost(*(uint16_t *)(&reportData[offset]));
            value = ((double)value / 1024.0 ) * 1000.0;

            offset = offset + 2; // Plus 2 bytes //

            NSLog(@"RR value %lu: %u", (unsigned long)i, value);

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T21:28:02.287

那么，您应该实施使用心率服务的**心率配置文件**（请参阅[此处](http://developer.bluetooth.org/gatt/profiles/Pages/ProfileViewer.aspx?u=org.bluetooth.profile.heart_rate.xml)）。如果您查看[心率服务规范](http://developer.bluetooth.org/gatt/services/Pages/ServiceViewer.aspx?u=org.bluetooth.service.heart_rate.xml)，您将看到[心率测量特性](http://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml)的格式根据数据包的最低有效八位字节中设置的标志而变化。

这意味着您需要设置代码来处理动态数据包大小。

所以你的一般过程是：

1.  获取`value`属性的第一个字节并检查它：
    *   心率测量是 8 位还是 16 位？
    *   是否支持传感器接触？
    *   是否检测到传感器接触？
    *   是否支持能量消耗？
    *   是否支持 RR 间隔测量？
2.  如果心率测量值为 8 位（字节 0 的位 0 为 0），则将下一个字节转换为其预期格式（提示：它是 uint8_t）。如果是 16 位（即字节 0 的位 0 为 1），则将接下来的两个字节转换为 uint16_t。
3.  如果支持能量消耗（字节 0 的位 3 为 1），则将下一个字节转换为 uint16_t。
4.  对 RR 间隔执行相同的操作。

使用 NSData - 尤其是与核心蓝牙一起使用 - 需要一些时间来适应，但一旦你掌握了这个概念，它并没有那么糟糕。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:54:22.410

好吧...当您读取characteric 的值时，您必须做的是：
`NSData *data = [characteritic value]; theTypeOfTheData value; [data getByte:&value lenght:sizeof(value)];`
但是，*theTypeOfTheData*可以是设备开发人员认为的任何内容。所以它可能是 UInt8、UInt16 或 struct（带或不带位域）...您必须通过联系设备的开发人员或查看是否有一些文档来获取信息。
例如，与我的同事一起，我们根据需要使用占用较少空间的数据类型（因为设备没有*无限*内存）。查看特征的描述符。它可以指出数据的类型。

# c++ - c++ ofstream pointer fails to write to disk

> ID：15749114
> 
> 赞同：1
> 
> 时间：2013-04-01T18:19:55.587
> 
> 标签：c++, pointers, flush, ofstream

I am having trouble writing to ofstream pointer and this is quite perplexing as I really don't see anything that is missing anymore. Note, this is a follow up from this question: [C++ vector of ofstream, how to write to one particular element](https://stackoverflow.com/questions/15737023/c-vector-of-ofstream-how-to-write-to-one-particular-element)

My code is as follows:

```
std::vector<shared_ptr<ofstream>> filelist;

void main()
{
  for(int ii=0;ii<10;ii++)
  {
     string filename = "/dev/shm/table_"+int2string(ii)+".csv";
     filelist.push_back(make_shared<ofstream>(filename.c_str()));
  }

  *filelist[5]<<"some string"<<endl;
  filelist[5]->flush();
  exit(1);

} 
```

This does doesn't write anything to the output file but it does create 10 empty files. Does anybody know what might possibly be wrong here?

EDIT: I ran some further tests. I let the code run without exit(1) until completion, over all files until all callbacks are finished. It turns out that some files are not empty, while others that should have data are empty.

There is plenty of disk space, and I know I have more file descriptors than are necessary for this. Any explanation for why some of the files would be written properly while others are not?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:23:53.940

我会尝试：`(*filelist[5])<<"some string\n";`。

但是，我猜想您可能打算在循环中写入文件——按原样，您只写入一个文件。

哦，在 C++ 中，你不想使用`exit`.

编辑：这是一个快速（经过测试）的独立演示：

```
#include <fstream>
#include <string>
#include <vector>

std::vector<std::ofstream *> filelist;

int main() {
  for(int ii=0;ii<3;ii++)
  {
    char *names[] = {"one", "two", "three"};
     std::string filename = "c:\\trash_";
     filename += names[ii];
     filename += ".txt";
     filelist.push_back(new std::ofstream(filename.c_str()));
  }

  for (int i=0; i<filelist.size(); i++) {
    (*filelist[i])<<"some string\n";
    filelist[i]->close();
  }
} 
```

但是请注意，它生成的文件名是针对 Windows 的，而原始文件名（显然）是针对类似 Unix 的。对于类 Unix 操作系统，您需要/想要一个不同的文件名字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:33:07.527

在调用之前尝试关闭`exit`文件`filelist[5]->close();`。您已经用打开的文件中止了一个进程，这意味着您的写入可能没有进入操作系统缓冲区或在进程退出时被丢弃。您还可以删除退出调用，它可能会解决问题。IO 对中止进程的结果很难确定，因此最好尝试避免使用活动 IO 中止或假设任何活动 IO 在中止时都会失败。

# java - how to make to android apps communicate (when they are on the same wifi network)

> ID：15749115
> 
> 赞同：1
> 
> 时间：2013-04-01T18:19:57.103
> 
> 标签：java, android, networking, communication

I'm trying to make two android apps communicate , with simple passing of data from one app to another. I have tried bluetooth but it's way too tough for somebody like me. is there a way i can make apps communicate with each other like regular java apps? if they are on the same network?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:50:02.243

您可以使用**套接字**

[UDP 套接字](http://developer.android.com/reference/java/net/DatagramSocket.html)

[TCP 套接字](http://developer.android.com/reference/java/net/Socket.html)

# asp.net-mvc - 检查分组集中的列是否包含相同的值，除了第一行

> ID：15749119
> 
> 赞同：0
> 
> 时间：2013-04-01T18:20:04.203
> 
> 标签：asp.net-mvc, linq, entity-framework, linq-to-sql

我正在处理一个相当大的查询，但现在卡在最后一点。鉴于此示例表：

```
 Key1  |  Key2  |  SomeCol  |
    0   |    0   |    ABC    |
    0   |    1   |    123    |
------------------------------
    1   |    5   |    ABC    |
    1   |    6   |    DEF    |
    1   |    7   |    ABC    |
------------------------------
    2   |    4   |    ABC    |
    2   |    5   |    456    |
    2   |    6   |    456    |
------------------------------
    3   |    4   |    ABC    |
    3   |    5   |    456    |
    3   |    6   |    ABC    |
------------------------------
    4   |    4   |    ABC    |
    4   |    5   |    ABC    |
    4   |    6   |    ABC    | 
```

在我的查询中，我已经提取了表的顺序（Key1，Key2）部分并按`Key1`. 我希望确定`SomeCol`除第一行之外的所有值是否相同。

```
Expected results:
  Key1  |  Key2  |  SomeCol  |
    0   |    0   |    ABC    |
    2   |    4   |    ABC    |
    4   |    4   |    ABC    | 
```

我知道我可以`.Any(g => g.SomeCol.Distinct().Count() == 1)`在我需要所有条目都相同的情况下使用类似的东西，但我似乎无法弄清楚如何正确获取`Skip(1)`. 另外，我觉得我检查相等性的方法有点像 hack。我知道我可以在 C# 中轻松完成此处理，但我希望在数据库端进行尽可能多的处理。由于我的查询目前是用扩展方法编写的，因此我希望以相同的语法回答。谢谢！

到目前为止我所拥有的：

```
resultFromRestOfQuery
.GroupBy(g => g.Key1)
????
.SelectMany(g => g.Take(1).Select(h => h) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:32:07.440

**更新**

好的，根据您的价值观对此进行了测试，并且可以正常工作。

```
var result = collection
            .OrderBy(p => p.Key1)
            .ThenBy(p => p.Key2)
            .GroupBy(p => p.Key1)
            .Where(p => p.Skip(1)
                    .Select(j => j.SomeCol)
                    .Distinct().Count() == 1)
            .Select(p => p.First())
            .ToList(); 
```

**更新#2**

也许这会帮助您提高性能。这是此查询的另一个版本，不使用`Distinct()`. 请注意`p.Count() > 1`- 这是为了避免在组中只有 1 个元素时选择组中的第一行。如果在只有一行的情况下可以选择第一行，只需删除这部分条件即可。

```
 var result = collection
            .OrderBy(p => p.Key1)
            .ThenBy(p => p.Key2)
            .GroupBy(p => p.Key1)
            .Where(p => p.Count() > 1 && p.Skip(1)
                    .Select(j => j.SomeCol)
                    .All(j => j == p.Last().SomeCol))
            .Select(p => p.First())
            .ToList(); 
```

# css - 第二行文本上的导航文本缩进

> ID：15749120
> 
> 赞同：1
> 
> 时间：2013-04-01T18:20:17.020
> 
> 标签：css

我需要在这个下拉导航菜单上缩进第二行文本。问题是我通常使用填充和负值的组合来做到这一点`text-ident`。但是这个菜单使用左边的颜色填充。我需要保留所有这些样式和外观，但需要文本缩进。“主页”按钮下有一个较长的示例行。

[http://jsfiddle.net/trevoray/VZ7qD/20/](http://jsfiddle.net/trevoray/VZ7qD/20/)

任何帮助将不胜感激。

谢谢！

特雷弗

```
.nav li > ul > li {
    margin-bottom: 2px;
    background: #0f2992;
    padding-left: 20px;
    border: #0f2992 solid 1px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:29:06.483

```
.nav li > ul > li > a{
    padding:5px 3px 5px 10px;
    text-indent:-7px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:34:58.223

或者只是在所有缩进的 ul 上抛出一个类

```
#navMenu ul.indentedNav {margin-left:20px;} 
```

# c - How do I iterate through a pointer to a char array in C?

> ID：15749121
> 
> 赞同：0
> 
> 时间：2013-04-01T18:20:18.230
> 
> 标签：c, string, loops, for-loop

I'm new to C, and I'm having a bit of trouble figuring out the exact way to do this.

I need to iterate through a string and store each letter one at a time in order to decrypt it.

So what I'm doing is:

#1\. Creating a place to store the string:

```
char toDecrypt[] = node->string; 
```

#2\. Starting the for loop:

```
for(int m=0; m< strlen(toDecrypt); ++m) 
```

#3\. Storing the char (to be decrypted later):

```
char i = toDecrypt[m]; 
```

So is the above valid, or should I be using a different notation to properly store the char?

EDIT:

Ok, I think I have that cleared up, so I just have one follow up question.

How do I check to see if a char is a "\"? My check doesn't seem to be working.

When I put

```
toDecrypt[m] != '\'; 
```

into an if statement, it doesn't work...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:23:21.527

将您的变量定义为`char *toDecrypt = node->string;`

如果您愿意，您仍然可以使用`[]`符号来读/写它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:42:55.287

> *   创建一个存储字符串的地方：

您实际上已经有一个存储字符串的地方。`node->string`存储字符串就好了。您可以创建一个指向它的指针：

```
char *toDecrypt = node->string; 
```

或者如果你想在某个地方复制它，你可以创建一个数组：

```
char toDecrypt[enough_space_for_the_string];

// or do it dynamically with:
//     char * toDecrypt = malloc(enough_space_for_the_string);
//     just don't forget to free() it later

strcpy(toDecrypt, node->string); 
```

> *   如何检查字符是否为“\”？我的支票似乎不起作用。

反斜杠是 C 中的转义字符，因此如果要检查反斜杠，则需要使用正确的[转义序列](http://en.wikipedia.org/wiki/Escape_sequences_in_C)：

```
toDecrypt[m] != '\\'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:32:47.063

这是[**错误**](http://ideone.com/66pvPR)的：`char toDecrypt[] = node->string;`

您可以通过以下方式解决它：

```
char *toDecrypt = node->string; 
```

或者

```
char *toDecrypt=(char*) malloc (strlen(node->string)+1);
strcpy(toDecrypt,node->string); 
```

# python - 从numpy数组中删除元素的pythonic方法

> ID：15749123
> 
> 赞同：9
> 
> 时间：2013-04-01T18:20:21.300
> 
> 标签：python, numpy

如果您有`array = np.array([1,2,3,4])`并且`index = np.array([0,1,2])`您想要删除数组中的索引元素，那么在不循环的情况下执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T18:21:57.070

您使用[`numpy.delete`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.delete.html)：

```
smaller_array = np.delete(array,index) 
```

# python - infinite scroll - how to scrape website

> ID：15749125
> 
> 赞同：4
> 
> 时间：2013-04-01T18:20:23.697
> 
> 标签：python, web-crawler

I am trying to download a page which has infinite scroll when obtaining the resutls. I have found the url of the ajax source. When i put it on a browser it works fine and it returns the json format data. But when i try to download the page through wget, i get Access denied message. Do you have any idea why is this happening?

the command i am using is:

```
wget --cookies=on --load-cookies=cookies.txt --keep-session-cookies --user-agent=Firefox \
    "https://www.somesite.com/ajax/pagelet/generic.php/pagination?data={"collection_token":"...","cursor":"...","tab_key":"....","profile_id":"...","overview":"...","ftid":"null","sk":"..."}&__user=...&__a=1" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T10:15:50.523

有两种方法可以解决它。

一种是使用像 PhantomJs 这样的库在 webkit 中渲染页面的 DOM 树，并在进行评估之前滚动页面。

第二种方法是在后台Ajax调用中找出模式并调用实际的AJAX端点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:23:53.360

一方面，你有一个引用问题。该 URL 包含双引号，因此您需要使用反斜杠对其进行转义，或者使用单引号将 URL 括起来。

```
wget --cookies=on --load-cookies=cookies.txt --keep-session-cookies --user-agent=Firefox \
    'https://www.somesite.com/ajax/pagelet/generic.php/pagination?data={"collection_token":"...","cursor":"...","tab_key":"....","profile_id":"...","overview":"...","ftid":"null","sk":"..."}&__user=...&__a=1' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T18:25:44.463

使用 wget 时，您正在向页面发送 GET 请求，但 AJAX 使用 POST 请求。当您使用 python 时，使用[urllib2](http://docs.python.org/2.7/library/urllib2.html "urllib2")创建 POST 请求通常可以解决问题。如果您需要进一步的帮助，请告诉我。

# floating-point - Print a Float after Multiplication in MIPS

> ID：15749126
> 
> 赞同：0
> 
> 时间：2013-04-01T18:20:25.057
> 
> 标签：floating-point, mips

```
.data
    time:       .float 310.4, 390.8
    miles:      .float 12.0, 96.2

.text  
    li $t0, 3           #terminating value
    li $t1, 4           #byte shifting 
    li $t2, 1           #i increments by 1  
    la $a1, time        # put address of time into $a1
    la $a2, miles       # put address of miles into $a2     
    l.s $f1, ($a1)
    l.s $f2, ($a2)

    mul.s $f3, $f1, $f2

    li $v0, 2           
    l.s $f12, __  <------- here????         
    syscall 
```

how do I print f3? This is starting to get frustrating. I can print $a1 or $a2 and shift it, but I need to multiply some numbers and print them.... thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T18:26:20.180

Here goes as an answer to complete the rationale behind:

*   You should use `l.s $f12, ($a1)` when you want to load a floating point value **from memory**
*   If you already have the floating point number you want to print in some coprocessor register (but not in `$f12` which is used by syscall 2), you have to move the contents from the floating point register which has the value to `$f12`, using instruction `mov.s`

So, in your example you would do:

```
 li $v0, 2
  mov.s $f12, $f3   # Move contents of register $f3 to register $f12
  syscall 
```

# r - R 只有一列的热图

> ID：15749132
> 
> 赞同：3
> 
> 时间：2013-04-01T18:20:44.767
> 
> 标签：r

我有一个只有 1 列但超过 5000 行的数据集。

当我尝试运行 heatmap(data) 命令时，我看到一条错误消息，提示“x”必须至少有 2 行和 2 列。

有没有办法告诉热图绘制单列热图？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:31:43.300

您可以`?image`改用（没有树状图/聚类等）：

```
m <- matrix(rnorm(100), nrow=100, ncol=1)
image(m) 
```

![在此处输入图像描述](https://i.stack.imgur.com/ARNYg.png)

# mobile - get speed limits from OpenStreetMap

> ID：15749133
> 
> 赞同：14
> 
> 时间：2013-04-01T18:20:54.187
> 
> 标签：mobile, openstreetmap

I'm creating a mobile app that determines if someone if a good driver. The phone sits on the dashboard and collects GPS information while the user is driving. I need to determine a way if the driver is following the speed limit, and I would like to do this via OpenStreetMap. What is the best way to get speed limits from OpenStreetMap?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-11T13:44:39.310

您可以通过 Web 请求获得答案。
这是您应该在的一个小盒子中的一个（尝试将其作为浏览器 URL）：

```
www.overpass-api.de/api/xapi?*[maxspeed=*][bbox=5.6283473,50.5348043,5.6285261,50.534884] 
```

答案显示穿过它的街道，在一所学校前面：

```
<node id="1312239864" lat="50.5348877" lon="5.6286790">
  <tag k="highway" v="crossing"/>
  <tag k="traffic_calming" v="bump"/>
</node>
<node id="2025084665" lat="50.5345623" lon="5.6274183">
  <tag k="traffic_calming" v="choker"/>
</node>
...
<way id="191950462">
  <nd ref="2025084669"/>
...
  <tag k="bicycle" v="yes"/>
  <tag k="highway" v="secondary"/>
  <tag k="maxspeed" v="30"/>
  <tag k="name" v="Rue d'Esneux"/>
  <tag k="source:maxspeed" v="school zone"/>
</way> 
```

我只留下了有趣的东西，最不言自明。例如，他们自己的节点上的交通平静功能。
街道是由节点和它自己的标签组成的方式。
maxspeed=30 是你的答案。如果没有 maxspeed，则默认适用于 Highway=secondary（或 =motorway ...）。
所有标签都在 wiki.openstreetmap.org 中进行了描述，
这是使用[xapi](http://wiki.openstreetmap.org/wiki/Xapi)。您也可以使用[overpass api](http://wiki.openstreetmap.org/wiki/Overpass_API)。
限速覆盖范围是部分的，但您可以改进它。在主地图上留下注释以提供数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-27T21:59:11.830

对于任何寻找可以同时使用 XML 和 json 的现代替代方案的人来说，HERE Maps ishidden gem 绝对值得一试，有一个免费计划提供大约 100,000 个请求，API 也坚如磐石且易于使用。

[https://developer.here.com/myapps/create-with-plan/10134035/10134084](https://developer.here.com/myapps/create-with-plan/10134035/10134084)

创建一个帐户，创建您的应用程序，将您的 lat lot 应用到类似于下面的 API。

根据他们的文档获取限速示例请求

[http://route.st.nlp.nokia.com/routing/6.2/getlinkinfo.xml?app_id=DemoAppId01082013GAL&app_code=AJKnXv84fjrb0KIHawS0Tg&waypoint=50.05564304861044,8.38889128575724&linkattributes=all](http://route.st.nlp.nokia.com/routing/6.2/getlinkinfo.xml?app_id=DemoAppId01082013GAL&app_code=AJKnXv84fjrb0KIHawS0Tg&waypoint=50.05564304861044,8.38889128575724&linkattributes=all)

我与 HERE Maps 没有任何关系，只是一个正在寻找好的限速解决方案的开发人员！

PS如果你确实使用这个解决方案，那么这个答案也可能有用。

[这里 Maps REST API - getlinkinfo 返回不正确的速度限制](https://stackoverflow.com/questions/22821101/here-maps-rest-api-getlinkinfo-returns-incorrect-speed-limit?answertab=active#tab-top)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T08:08:31.427

[OpenStreetMap 数据（链接](http://wiki.openstreetmap.org/wiki/Key%3amaxspeed)）中有一个`maxspeed`用于道路和水路的标签。OSM 数据本身有多种格式。最容易上手的是人类可读的 XML 格式，可以直接从[OpenStreetMap.org](http://www.openstreetmap.org/)导出。下面是伦敦 The Strand 的示例条目，显示了数据格式以及如何表达 maxspeed。

```
<way id="157541665" version="1" timestamp="2012-04-05T22:32:48Z" changeset="1"/>
  <nd ref="1697772135"/>
  <nd ref="33141175"/>
  <nd ref="321255915"/>
  <nd ref="282569730"/>
  <tag k="highway" v="primary"/>
  <tag k="lanes" v="3"/>
  <tag k="maxspeed" v="30 mph"/>
  <tag k="name" v="Strand"/>
  <tag k="postal_code" v="EC4"/>
</way> 
```

# wix - Microsoft.Deployment.WindowsInstaller 在哪里找到？

> ID：15749137
> 
> 赞同：28
> 
> 时间：2013-04-01T18:21:07.397
> 
> 标签：wix

我正在尝试在构建服务器上编译 WiX 安装程序（它具有自定义操作，我怀疑这是问题的根源），但出现以下错误：

```
 c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets(1360,9): warning MSB3245: Could not resolve
this reference. Could not locate the assembly "Microsoft.Deployment.WindowsInstaller, Version=3.0.0.0, Culture=neutral,
 PublicKeyToken=ce35f76fcda82bad, processorArchitecture=MSIL". Check to make sure the assembly exists on disk. If this
reference is required by your code, you may get compilation errors. [C:\code\rms1-moverssuite\src\RMSS.Setup.CustomActi
ons\RMSS.Setup.CustomActions.csproj] 
```

知道需要安装什么吗？我依稀记得上次我这样做时必须从 Windows SDK 安装一些东西，但不记得是什么了。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-01T18:29:32.743

它是 Windows Installer XML (WiX) 的一部分，这是一个以前来自 Microsoft 但后来转移到 Outercurve Foundation 的开源项目。它可以[在 CodePlex](http://wix.codeplex.com/)上找到。3.7 是最新版本。

此互操作程序集是部署工具基础 (DTF) 的一部分，您会在开始菜单中找到安装的 SDK 帮助文件。实际程序集位于 C:\Program Files (x86)\WiX Toolset v3.7\SDK 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-10T09:18:26.650

[我从官方网站](http://wixtoolset.org/releases/)下载了 WiX v3.11 ，最终登陆到[这个](https://github.com/wixtoolset/wix3/releases/tag/wix3111rtm)git hub 页面。该设置实际上是一个可执行文件 (*.exe)，而不是一个 MSI，它向您显示此安装页面：

[![在此处输入图像描述](https://i.stack.imgur.com/yq9mD.png)](https://i.stack.imgur.com/yq9mD.png)

只需单击安装齿轮图标。安装完成后，在 Visual Studio 解决方案资源管理器中选择对的引用，`Microsoft.Deployment.WindowsInstaller`然后单击工具栏中的刷新。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-16T12:00:55.203

对我来说，这只是为 cproj 文件中的引用提供提示，指向 Wix nuget 包。

```
<Reference Include="Microsoft.Deployment.WindowsInstaller"> 
 <HintPath>..\packages\WiX.3.11.2\tools\Microsoft.Deployment.WindowsInstaller.dll</HintPath>
</Reference> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-29T11:42:31.893

您必须创建一个自定义操作项目并将其提交给您的安装程序。这将找到程序集`Microsoft.Deployment.WindowsInstaller`。

![自定义动作项目](https://i.stack.imgur.com/C2FWm.png)

# performance - Network Usage of Process Using Powershell

> ID：15749139
> 
> 赞同：7
> 
> 时间：2013-04-01T18:21:10.640
> 
> 标签：performance, powershell, powershell-2.0

I want to calculate the bytes sent and recieved by a particular process .I want to use powershell for that. Something which I can do using Resource Monitor->Network Activity. How can i do that using get-counter?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-19T15:06:42.840

这里有一篇关于使用`Get-Counter`cmdlet 的非常好的 Scripting Guy 文章：

[脚本专家 - Get-Counter](http://blogs.technet.com/b/heyscriptingguy/archive/2011/01/31/use-powershell-to-simplify-collecting-performance-information.aspx "Get-Counter - 脚本专家")

诀窍是找到您需要的计数器，我认为您无法获得所需的粒度，因为这些计数器与 PerfMon 使用的计数器相同。它更关注整个网络接口，而不是使用该接口的单个​​进程。话虽如此，如果它是唯一使用给定接口的东西，它应该可以很好地完成这个技巧。

先看一下可用的网络接口选项：

```
(get-counter -list "Network Interface").paths 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-27T17:27:47.690

你不能，看来。我绝对找不到性能监视器正在读取的计数器，尽管其他人可能会插话。可能还有其他方法而不是 get-counter ，但这是您特别要求的。

查看计数器，您会发现最接近的是进程对象上的“IO Read Bytes/sec”和“IO Write Bytes/sec”计数器。

这些问题的问题在于，它们不仅仅计算网络活动。perfmon 中的描述说：

> “此计数器计算进程生成的所有 I/O 活动，包括文件、网络和设备 I/O。”

话虽如此，如果您知道您只想监控或主要写入网络连接的进程，这可能比根本不测量任何东西要好。

你会这样做（我将使用 Chrome 作为示例，因为它现在可以方便地运行和使用数据）：

```
get-counter "\Process(chrome*)\IO Read Bytes/sec" 
```

这只会给你一次性阅读。如果您想继续阅读，可以添加连续开关。

返回的 PerformanceCounterSampleSet 对象并不完全适合使用，但您可以在 $obj.countersamples.cookedvalue 中找到实际读数。

该列表将相当长（如果您像我一样浏览）。Chrome 在许多单独的进程中运行，因此我们将做一些数学运算以将它们全部加起来，并以 KB 显示。

最后结果：

```
get-counter "\Process(chrome*)\IO Read Bytes/sec" -Continuous | foreach {
    [math]::round((($_.countersamples.cookedvalue | measure -sum).sum / 1KB), 2)
    } 
```

运行它只会持续输出 Chrome 正在使用多少 KB/s 的读数。

# html - 背景位置更灵活？

> ID：15749145
> 
> 赞同：0
> 
> 时间：2013-04-01T18:21:22.293
> 
> 标签：html, css, background-image

我想将 T 恤图片（当前位于左下角）向右移动一点（大约 40 像素）。我怎么能做到这一点？当整个内容移动时，我尝试为页面主体设置 40px 的填充权，这不是我想要的。非常感谢

![在此处输入图像描述](https://i.stack.imgur.com/d3ft2.png)

```
Html, body {
    padding: 0 0 0 0;;
    min-width: 1024px;
    margin: 0;
    height: 100%;
    font-family: Tahoma, Geneva, sans-serif;
    background-image: url(pics/T-shirt.png);
    background-repeat:no-repeat;
    background-position:left bottom 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:24:29.223

您可以`background-position: x y;`使用 % 或像素进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:25:00.523

你有没有尝试过：

```
background-position:40px bottom 
```

# wordpress - Having Trouble Replicating WordPress IE Cross-Browser Issue

> ID：15749148
> 
> 赞同：0
> 
> 时间：2013-04-01T18:21:39.493
> 
> 标签：wordpress, internet-explorer, cross-browser, wordpress-theming

I've been having an issue with a client's site that I haven't been able to replicate. A few users have reported an issue with the website ([http://beyondbbd.com](http://beyondbbd.com)) where the pages don't display a majority of the styling and render as below:

![A Screenshot of the issue](https://i.imgur.com/geu1hVX.jpg)

In trying to troubleshoot, I am having difficulty replicating the issue on my browser checking system (Browserstack), or finding an underlying cause.

Users reporting the issue are using Windows 7 and Internet explorer (though I don't know their version of IE at this time), and are encountering the issue on these pages, among others: [http://beyondbbd.com/motivational-speakers-for-business/](http://beyondbbd.com/motivational-speakers-for-business/)

[http://beyondbbd.com/leadership-workshops/](http://beyondbbd.com/leadership-workshops/)

[http://beyondbbd.com/internal-coach-training-program/](http://beyondbbd.com/internal-coach-training-program/)

I haven't been able to replicate on any version of Windows or IE using Browserstack, but this issue has been reported by more than one user so I don't think it's an isolated case.

Anyone have any ideas as to what the cause could be, or how I could replicate the bug?

Thanks in advance!

-Nick

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:14:43.143

我无法复制，但是您有两个开始的“头部”标签以及许多其他验证错误（杂散的结束标签）。这可能会阻塞某些 IE 实例。

# c++ - 插入语句在 C++ 中不起作用

> ID：15749162
> 
> 赞同：0
> 
> 时间：2013-04-01T18:22:38.880
> 
> 标签：c++, sql

我有一个插入到数据库的函数。

```
void InsertEmployeeRec(PGconn *conn, char * fullname)
{
  // Append the SQL statement
  std::string sSQL;
  sSQL.append("INSERT INTO Worker (full_name) VALUES ('");
  sSQL.append(fullname);
  sSQL.append("')");

  cout << sSQL;

  // Execute with sql statement
  PGresult *res = PQexec(conn, sSQL.c_str());

    if (PQresultStatus(res) != PGRES_COMMAND_OK)
    {
        printf("Insert employee record failed");
        //PQclear(res);
        CloseConn(conn);
    }

  printf("Insert employee record - OK\n");
} 
```

当我用 cout 打印 sql 语句时，它会像这样打印：

```
INSERT INTO Worker (full_name) VALUES ('asd') 
```

我认为这里没有问题。可能是什么原因？

# java - Hibernate 数据库创建

> ID：15749168
> 
> 赞同：-1
> 
> 时间：2013-04-01T18:22:50.867
> 
> 标签：java, hibernate

我正在尝试在应用程序服务器启动时创建数据库模式。
我使用带有注释的 hebernate 4.1.9 和 hibernate.cfg.xml 进行配置。

所以问题是我不能完全理解我应该做什么来创建模式，然后在应用程序中使用它。当然，我只想在第一次启动时执行模式创建，而在下次启动时我想更新它。

我试图在更新状态下使用 hbn2ddl.auto，但数据库没有创建。也许我应该`INIT=create schema IF NOT EXISTS myschema`在 hibernate.connection.url 的末尾使用类似的东西？

我也有一个例外

```
org.hibernate.HibernateException: Connection cannot be null when 'hibernate.dialect' not set 
```

但是在 hibernate.cfg.xml 中有这样的字符串：

```
<property name="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</property> 
```

谁能给我描述一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T06:36:05.813

我自己解决问题。我应该将 createDatabase=true 添加到 hibernate.connection.url

# c# - 我应该重构这个，还是我的困惑导致谨慎？

> ID：15749172
> 
> 赞同：0
> 
> 时间：2013-04-01T18:22:57.467
> 
> 标签：c#, sql, compact-framework, sql-server-ce, windows-ce

这个 SqlCe 代码对我来说看起来很奇怪：

```
cmd.CommandText = "INSERT INTO departments ( account_id, name) VALUES (?, ?)";
foreach(DataTable tab in dset.Tables)
{
    if (tab.TableName == "Departments")
    {
        foreach(DataRow row in tab.Rows)
        {
            Department Dept = new Department();
            if (!ret)
                ret = true;
            foreach(DataColumn column in tab.Columns)
            {

                if (column.ColumnName == "AccountID")
                {
                    Dept.AccountID = (string) row[column];
                }
                else if (column.ColumnName == "Name")
                {
                    if (!row.IsNull(column))
                        Dept.AccountName = (string) row[column];
                    else
                        Dept.AccountName = "";
                }
            }
            List.List.Add(Dept);
            . . .
            dSQL = "INSERT INTO departments ( account_id, name) VALUES ('" + Dept.AccountID + "','" + Dept.AccountName +"')";

            if (!First)
            {
                cmd.Parameters[0].Value = Dept.AccountID;
                cmd.Parameters[1].Value = Dept.AccountName;
            }

            if (First)
            {
                cmd.Parameters.Add("@account_id",Dept.AccountID);
                cmd.Parameters.Add("name",Dept.AccountName);
                cmd.Prepare();
                First = false;
            }

            if (frmCentral.CancelFetchInvDataInProgress)
            {
                ret = false;
                return ret;
            }

            try
            {
                dbconn.DBCommand( cmd, dSQL, true );
            } 
            . . .

    public void DBCommand(SqlCeCommand cmd, string dynSQL, bool Silent)
    {
        SqlCeTransaction trans = GetConnection().BeginTransaction();
        cmd.Transaction = trans;
        try
        {
            cmd.ExecuteNonQuery();
            trans.Commit();
        }
        catch (Exception ex)
        {
            try 
            {
                trans.Rollback();
            }
            catch (SqlCeException) 
            {
                // Handle possible exception here
            }
            MessageBox.Show("DBCommand Except 2"); // This one I haven't seen...
            WriteDBCommandException(dynSQL, ex, Silent);
        }
    } 
```

我的问题是：

1）应该“？” 真的在分配给 cmd.CommandText 时使用，还是应该使用“@”来代替？

2）“cmd.Parameters.Add()”之一（account_id）使用“@”，另一个（名称）不使用。哪种方式是正确的，或者“@”是可选的？

3) 我不知道为什么 DBCommand() 是按原样编写的 - 最后两个 args 仅在出现异常时使用...？？？

我很想从根本上重构这段代码，因为它看起来很奇怪，但由于我并不真正理解它，这可能是灾难的根源......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:55:40.980

我相当肯定这篇文章会回答你的一些问题：

[http://msdn.microsoft.com/en-us/library/yy6y35y8.aspx](http://msdn.microsoft.com/en-us/library/yy6y35y8.aspx)

第二个图表解释了命名参数和位置 (?) 参数（在 OleDb 和 ODBC 中使用）之间的区别。

我相信在哪里？使用，@ 是可选的，但我不确定这一点。如果它有效，我会说情况就是这样。

DBCommand 中的内容似乎只是用于记录目的。如果执行失败，它会尝试回滚，然后使用 sql 命令 (in `dynSQL`) 记录异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:50:44.583

该`?`参数是较旧的 Access 语法。

我的猜测是这曾经是一个 Access 数据库，但有人在某个时候将它转换为 SQL CE。

通常，SQL 理解该`?`参数，但最好在您在那里时更改它，以便更容易理解。

我仍在尝试对所有这些变量做出正面和反面。如果我把它整理好，我会发布可编译的（sp？）代码。

**编辑：**我必须把它放到一个方法中并解决所有的 RED 错误，以确保我没有给你一些无法编译的东西。

我像这样将您的 DataSet 传递给它，并添加了很多评论：

```
private bool StrangeSqlCeCode(DataSet dset) {
  const string ACCOUNT_ID = "AccountID";
  const string DEPARTMENTS = "Departments";
  const string NAME = "Name";
  const string SQL_TEXT = "INSERT INTO departments (account_id, name) VALUES (@account_id, @name)";
  bool ret = false;
  //bool First = false; (we don't need this anymore, because we initialize the SqlCeCommand correctly up front)
  using (SqlCeCommand cmd = new SqlCeCommand(SQL_TEXT)) {
    // Be sure to set this to the data type of the database and size field
    cmd.Parameters.Add("@account_id", SqlDbType.NVarChar, 100);
    cmd.Parameters.Add("@name", SqlDbType.NVarChar, 100);
    if (-1 < dset.Tables.IndexOf(DEPARTMENTS)) {
      DataTable tab = dset.Tables[DEPARTMENTS];
      foreach (DataRow row in tab.Rows) {
        // Check this much earlier. No need in doing all the rest if a Cancel has been requested
        if (!frmCentral.CancelFetchInvDataInProgress) {
          Department Dept = new Department();
          if (!ret)
            ret = true;
          // Wow! Long way about getting the data below:
          //foreach (DataColumn column in tab.Columns) {
          //  if (column.ColumnName == "AccountID") {
          //    Dept.AccountID = (string)row[column];
          //  } else if (column.ColumnName == "Name") {
          //    Dept.AccountName = !row.IsNull(column) ? row[column].ToString() : String.Empty;
          //  }
          //}
          if (-1 < tab.Columns.IndexOf(ACCOUNT_ID)) {
            Dept.AccountID = row[ACCOUNT_ID].ToString();
          }
          if (-1 < tab.Columns.IndexOf(NAME)) {
            Dept.AccountName = row[NAME].ToString();
          }
          List.List.Add(Dept);
          // This statement below is logically the same as cmd.CommandText, so just don't use it
          //string dSQL = "INSERT INTO departments ( account_id, name) VALUES ('" + Dept.AccountID + "','" + Dept.AccountName + "')";
          cmd.Parameters["@account_id"].Value = Dept.AccountID;
          cmd.Parameters["@name"].Value = Dept.AccountName;
          cmd.Prepare(); // I really don't ever use this. Is it necessary? Perhaps.
          // This whole routine below is already in a Try/Catch, so this one isn't necessary
          //try {
          dbconn.DBCommand(cmd, true);
          //} catch {
          //}
        } else {
          ret = false;
          return ret;
        }
      }
    }
  }
  return ret;
} 
```

我为您的 DBCommand 方法编写了一个重载以使用旧代码：

```
public void DBCommand(SqlCeCommand cmd, string dynSQL, bool Silent) {
  cmd.CommandText = dynSQL;
  DBCommand(cmd, Silent);
}

public void DBCommand(SqlCeCommand cmd, bool Silent) {
  string dynSQL = cmd.CommandText;
  SqlCeTransaction trans = GetConnection().BeginTransaction();
  cmd.Transaction = trans;
  try {
    cmd.ExecuteNonQuery();
    trans.Commit();
  } catch (Exception ex) {
    try {
      trans.Rollback(); // I was under the impression you never needed to call this.
      // If Commit is never called, the transaction is automatically rolled back.
    } catch (SqlCeException) {
      // Handle possible exception here
    }
    MessageBox.Show("DBCommand Except 2"); // This one I haven't seen...
    //WriteDBCommandException(dynSQL, ex, Silent);
  }
} 
```

# c# - 在 C# 中不保持纵横比的情况下拉伸 AxWindowsMediaPlayer 的视频

> ID：15749181
> 
> 赞同：2
> 
> 时间：2013-04-01T18:23:28.380
> 
> 标签：c#, .net, axwindowsmediaplayer

使用`AxWindowsMediaPlayer`我需要拉伸视频以占据整个屏幕。, 的问题`stretchToFit = true`是`stretchToFit`保持视频的纵横比，如果视频或监视器的比例不同，则会创建黑条。我不想要这些黑条。我不想在拉伸视频时保持纵横比。

我一直在寻找这个问题的答案，并且阅读了无数其他人提出的问题。据我所知，没有人有任何解决方案。

*我发布了这个问题，尽管已经发布了一个[确切的问题](https://stackoverflow.com/questions/9497478/stretch-a-video-without-keeping-its-aspect-ratio-in-c-sharp)，因为另一个问题是一年前发布的，没有答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:05:41.380

WMP 不允许在不保持纵横比的情况下拉伸视频。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-25T05:15:42.417

> 我不想要这些黑条。我不想在拉伸视频时保持纵横比。

这里有一个解决方案！即使在`Windows Media Player`和`AxWindowsMediaPlayer`控制中`K-Lite Codec Pack`（**仅限 MEGA PACK**，因为它是唯一附带的包`ffdshow video decoder`）。在`K-Lite Codec Pack MEGA`setup 安装过程中选择`Advanced`go `Next`，**重要提示：**在`Preferred video decoder`切换到`ffdshow video decoder`我也建议你 set `ffdshow audio decoder`，然后继续`Next`直到完成安装，所以现在你已经`ffdshow video decoder`安装并且`Windows Media Player`控件`AxWindowsMediaPlayer`将使用它。安装后转到`ffdshow video decoder configuration`，您可以在以下位置找到它：

开始菜单文件夹 >`K-Lite Codec Pack\Configuration\ffdshow video decoder`

然后勾选以下设置：

[![在此处输入图像描述](https://i.stack.imgur.com/Tl106.jpg)](https://i.stack.imgur.com/Tl106.jpg)

因此，现在将在不保持宽高比的情况下渲染视频，这将消除那些“黑条”并拉伸到窗口。

**编辑：**提醒一下，一些视频格式（如 mkv）将默认使用`ffdshow video decoder`in`Windows Media Player`和`AxWindowsMediaPlayer`组件，其他格式 Windows 7/8.x/10 使用自己的编解码器进行解码，因此您需要转到：

开始菜单文件夹 >`K-Lite Codec Pack\Codec Tweak Tool`

然后勾选您想要的设置，这是一个示例：

[![在此处输入图像描述](https://i.stack.imgur.com/y3cWq.jpg)](https://i.stack.imgur.com/y3cWq.jpg)

[![在此处输入图像描述](https://i.stack.imgur.com/zqd2s.jpg)](https://i.stack.imgur.com/zqd2s.jpg)

有关媒体基金会的更多信息，请查看： http: [//www.codecguide.com/windows7_preferred_filter_tweaker.htm](http://www.codecguide.com/windows7_preferred_filter_tweaker.htm)

# c - fileno() 不可用？

> ID：15749184
> 
> 赞同：1
> 
> 时间：2013-04-01T18:23:37.153
> 
> 标签：c, gcc, posix, c99

我试图`isatty()`在我的 C 代码中使用 posix 函数来判断输出是否被重定向。但是，要做到这一点，我需要一个文件描述符，从我的研究来看，它似乎`fileno()`不再包含在`stdio.h`. 有没有其他获取文件描述符的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:28:19.350

[`fileno()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fileno.html)仍然是获取与文件流关联的文件描述符的 POSIX 标准方法。

您在哪个平台上使用哪些编译选项？您是否启用了 POSIX 扩展？

```
gcc -std=gnu99 ... 
```

这应该是`fileno()`可见的。（使用`gcc -std=c99 -pedantic`可能会使它们不可见。）

或者，将此节的变体添加到您的代码中，或将其放在标题中并将其包含在代码的开头：

```
#ifndef JLSS_ID_POSIXVER_H
#define JLSS_ID_POSIXVER_H

/*
** Include this file before including system headers.  By default, with
** C99 support from the compiler, it requests POSIX 2001 support.  With
** C89 support only, it requests POSIX 1997 support.  Override the
** default behaviour by setting either _XOPEN_SOURCE or _POSIX_C_SOURCE.
*/

/* _XOPEN_SOURCE 700 is loosely equivalent to _POSIX_C_SOURCE 200809L */
/* _XOPEN_SOURCE 600 is loosely equivalent to _POSIX_C_SOURCE 200112L */
/* _XOPEN_SOURCE 500 is loosely equivalent to _POSIX_C_SOURCE 199506L */

#if !defined(_XOPEN_SOURCE) && !defined(_POSIX_C_SOURCE)
#if __STDC_VERSION__ >= 199901L
#define _XOPEN_SOURCE 600   /* SUS v3, POSIX 1003.1 2004 (POSIX 2001 + Corrigenda) */
#else
#define _XOPEN_SOURCE 500   /* SUS v2, POSIX 1003.1 1997 */
#endif /* __STDC_VERSION__ */
#endif /* !_XOPEN_SOURCE && !_POSIX_C_SOURCE */

#endif /* JLSS_ID_POSIXVER_H */ 
```

就我而言，`_XOPEN_SOURCE`设置为 600 比 700 好；它可以在更多机器类型上开箱即用。您也许可以使用 700。我将其保存在一个文件中`posixver.h`，然后我的代码开始

```
#include "posixver.h" 
```

在任何系统标题之前。这允许我集中更改规则（例如 600 到 700），我只需要重新编译，而不是编辑每个源文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T18:31:18.050

它仍然存在，但您可能必须显式打开 POSIX 功能。特别是在 Linux 下，`fileno`仅当启用 POSIX 或 XOPEN 功能时才可用。从`fileno(3)`手册页：

> glibc 的功能测试宏要求（参见 feature_test_macros(7)）：
> 
> ```
> fileno(): _POSIX_C_SOURCE >= 1 || _XOPEN_SOURCE || _POSIX_SOURCE 
> ```

所以，用`-D_POSIX_SOURCE`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T19:11:23.230

如果您只想知道输出是否被重定向，您可以使用：

```
#include <unistd.h>
...
if (isatty(STDOUT_FILENO))
  error("redirect output."); 
```

`STDOUT_FILENO`一般为1。

# random - 在 Java Card 中生成两个数字之间的随机数

> ID：15749186
> 
> 赞同：2
> 
> 时间：2013-04-01T18:23:39.127
> 
> 标签：random, javacard

java - 如何在Java Card中生成两个数字之间的随机数？例如，数字应该在 0 到 50 之间生成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-26T00:02:28.193

请注意，我只使用`SecureRandom`Java SE 测试了随机数的分布。我有理由确定这段代码是正确的。该代码使用 NIST 定义的“简单拒绝”方法。

废话不多说，上代码。

```
package nl.owlstead.jcsecurerandom;

import javacard.framework.JCSystem;
import javacard.framework.Util;
import javacard.security.RandomData;

/**
 * Generates numbers within a range. This class uses modulo arithmetic to
 * minimize the number of calls to the random number generator without expensive
 * calculations. The class is similar in operation to the
 * {@code SecureRandom.nextInt(int)} method defined in Java SE.
 * 
 * @author owlstead
 */
public final class JCSecureRandom {

    private static final short SHORT_SIZE_BYTES = 2;
    private static final short START = 0;

    private final RandomData rnd;
    private final byte[] buf;

    /**
     * Constructor which uses the given source of random bytes. A two byte
     * buffer transient buffer is generated that is cleared on deselect.
     * 
     * @param rnd
     *            the source of random bytes
     */
    public JCSecureRandom(final RandomData rnd) {
        this.rnd = rnd;
        this.buf = JCSystem.makeTransientByteArray(SHORT_SIZE_BYTES,
                JCSystem.CLEAR_ON_DESELECT);
    }

    /**
     * Generates a single short with a random value in the range of 0
     * (inclusive) to the given parameter n (exclusive).
     * 
     * @param n
     *            the upper bound of the random value, must be positive
     *            (exclusive)
     * @return the random value in the range [0..n-1]
     */
    public short nextShort(final short n) {
        final short sn = (short) (n - 1);
        short bits, val;
        do {
            bits = next15();
            val = (short) (bits % n);
        } while ((short) (bits - val + sn) < 0);
        return val;
    }

    /**
     * Generates a single byte with a random value in the range of 0 (inclusive)
     * to the given parameter n (exclusive).
     * 
     * @param n
     *            the upper bound of the random value, must be positive
     *            (exclusive)
     * @return the random value in the range [0..n-1]
     */
    public byte nextByte(final byte n) {
        if ((n & -n) == n) {
            return (byte) ((n * next7()) >> 7);
        }

        final byte sn = (byte) (n - 1);
        byte bits, val;
        do {
            bits = next7();
            val = (byte) (bits % n);
        } while ((byte) (bits - val + sn) < 0);
        return val;
    }

    /**
     * Generates 15 bits from two bytes by setting the highest bit to zero.
     * 
     * @return the positive valued short containing 15 bits of random
     */
    private short next15() {
        this.rnd.generateData(this.buf, START, SHORT_SIZE_BYTES);
        return (short) (Util.getShort(this.buf, START) & 0x7FFF);
    }

    /**
     * Generates 7 bits from one byte by setting the highest bit to zero.
     * 
     * @return the positive valued byte containing 7 bits of random
     */
    private byte next7() {
        this.rnd.generateData(this.buf, START, SHORT_SIZE_BYTES);
        return (byte) (this.buf[START] & 0x7F);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:10:13.903

在 Java Card 中，您只能访问 javacard.security.RandomData，它只能生成随机字节。

您首先需要一个正确类型的变量：

```
private RandomData rng;
private byte[] rndBuffer; 
```

然后，您需要在构造函数/安装中使用以下代码（以避免每次都分配随机生成器和缓冲区）：

```
rng = RandomData.getInstance(RandomData.ALG_SECURE_RANDOM);
rndBuffer = JCSystem.getTransientByteArray(JCSystem.CLEAR_ON_DESELECT, 1); 
```

然后，你可以定义你的方法来获取一个范围内的随机字节：

```
byte getRandomByteInRange(byte min, byte max) {
  do {
    rng.generateData(rndBuffer,0,1);
  while ((rndBuffer[0]<min) || (rndBuffer[0]>max))
  return rndBuffer[0];
} 
```

编写此方法很可能有一种不那么愚蠢的方法（尤其是对于小范围），但它应该可以工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T18:30:08.357

这里有 [例子](http://www.javapractices.com/topic/TopicAction.do?Id=62)。以该链接中的示例 2 为例：

```
import java.util.Random;

/** Generate random integers in a certain range. */
public final class RandomRange {

 public static final void main(String... aArgs){
  log("Generating random integers in the range 1..10.");

  int START = 1;
  int END = 10;
  Random random = new Random();
  for (int idx = 1; idx <= 10; ++idx){
   showRandomInteger(START, END, random);
  }

  log("Done.");
}

private static void showRandomInteger(int aStart, int aEnd, Random aRandom){
  if ( aStart > aEnd ) {
    throw new IllegalArgumentException("Start cannot exceed End.");
 }
 //get the range, casting to long to avoid overflow problems
 long range = (long)aEnd - (long)aStart + 1;
 // compute a fraction of the range, 0 <= frac < range
 long fraction = (long)(range * aRandom.nextDouble());
 int randomNumber =  (int)(fraction + aStart);    
 log("Generated : " + randomNumber);
}

private static void log(String aMessage){
 System.out.println(aMessage);
 }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T18:30:26.847

使用 RandomData 抽象类：

[http://www.win.tue.nl/pinpasjc/docs/apis/jc222/javacard/security/RandomData.html](http://www.win.tue.nl/pinpasjc/docs/apis/jc222/javacard/security/RandomData.html)

编辑：

这是使用中的此类的一个示例，

```
byte[] keyBytes = JCSystem.getTransientByteArray(COD,16);

RandomData rng = RandomData.getInstance(ALG_SECURE_RANDOM);
rng.generateData(keyBytes,0,16); 
```

如果你只是在寻找随机数而不是 randomData 你可以使用这个：

```
 /*
    * generate a random number between 0 and 50
    */
    Random random1 = new Random();
    int card = (random1.nextInt(51)); 
```

# java - 如何从资源文件夹加载文件？

> ID：15749192
> 
> 赞同：327
> 
> 时间：2013-04-01T18:23:50.097
> 
> 标签：java, file, maven

我的项目具有以下结构：

```
/src/main/java/
/src/main/resources/
/src/test/java/
/src/test/resources/ 
```

我有一个文件`/src/test/resources/test.csv`，我想从单元测试中加载文件`/src/test/java/MyTest.java`

我有这段代码不起作用。它抱怨“没有这样的文件或目录”。

```
BufferedReader br = new BufferedReader (new FileReader(test.csv)) 
```

我也试过这个

```
InputStream is = (InputStream) MyTest.class.getResourcesAsStream(test.csv)) 
```

这也行不通。它返回`null`。我正在使用 Maven 来构建我的项目。

* * *

## 回答 #1

> 赞同：314
> 
> 时间：2013-04-01T18:29:13.977

尝试下一个：

```
ClassLoader classloader = Thread.currentThread().getContextClassLoader();
InputStream is = classloader.getResourceAsStream("test.csv"); 
```

* * *

如果上述方法不起作用，则各种项目已添加以下类：¹（[此处](http://grepcode.com/file_/repo1.maven.org/maven2/com.opensymphony/xwork/2.1.3/com/opensymphony/xwork2/util/ClassLoaderUtil.java/?v=source)为代码）。²[**`ClassLoaderUtil`**](http://grepcode.com/file/repo1.maven.org/maven2/com.opensymphony/xwork/2.1.3/com/opensymphony/xwork2/util/ClassLoaderUtil.java)

以下是如何使用该类的一些示例：

```
src\main\java\com\company\test\YourCallingClass.java
src\main\java\com\opensymphony\xwork2\util\ClassLoaderUtil.java
src\main\resources\test.csv
```

```
// java.net.URL
URL url = ClassLoaderUtil.getResource("test.csv", YourCallingClass.class);
Path path = Paths.get(url.toURI());
List<String> lines = Files.readAllLines(path, StandardCharsets.UTF_8); 
```

```
// java.io.InputStream
InputStream inputStream = ClassLoaderUtil.getResourceAsStream("test.csv", YourCallingClass.class);
InputStreamReader streamReader = new InputStreamReader(inputStream, StandardCharsets.UTF_8);
BufferedReader reader = new BufferedReader(streamReader);
for (String line; (line = reader.readLine()) != null;) {
    // Process line
} 
```

* * *

*笔记*

1.  在*The Wayback Machine中*[看到它](https://web.archive.org/web/20171212030426/http://grepcode.com/file/repo1.maven.org/maven2/com.opensymphony/xwork/2.1.3/com/opensymphony/xwork2/util/ClassLoaderUtil.java)。
2.  也在[GitHub](https://github.com/krosenvold/struts2/blob/master/xwork-core/src/main/java/com/opensymphony/xwork2/util/ClassLoaderUtil.java)中。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2013-04-01T18:27:53.910

尝试：

```
InputStream is = MyTest.class.getResourceAsStream("/test.csv"); 
```

IIRC`getResourceAsStream()`默认情况下是相对于类的包的。

**正如@Terran 所说，不要忘记`/`在文件名的开头添加**

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2017-04-14T16:35:54.053

在 Spring 项目中尝试以下代码

```
ClassPathResource resource = new ClassPathResource("fileName");
InputStream inputStream = resource.getInputStream(); 
```

或非春季项目

```
 ClassLoader classLoader = getClass().getClassLoader();
 File file = new File(classLoader.getResource("fileName").getFile());
 InputStream inputStream = new FileInputStream(file); 
```

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2016-03-04T19:53:35.700

这是使用[Guava](https://github.com/google/guava)的一种快速解决方案：

```
import com.google.common.base.Charsets;
import com.google.common.io.Resources;

public String readResource(final String fileName, Charset charset) throws IOException {
        return Resources.toString(Resources.getResource(fileName), charset);
} 
```

用法：

```
String fixture = this.readResource("filename.txt", Charsets.UTF_8) 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2019-12-09T21:13:08.500

非春季项目：

```
String filePath = Objects.requireNonNull(getClass().getClassLoader().getResource("any.json")).getPath();

Stream<String> lines = Files.lines(Paths.get(filePath)); 
```

或者

```
String filePath = Objects.requireNonNull(getClass().getClassLoader().getResource("any.json")).getPath();

InputStream in = new FileInputStream(filePath); 
```

对于spring项目，也可以使用一行代码获取resources文件夹下的任意文件：

```
File file = ResourceUtils.getFile(ResourceUtils.CLASSPATH_URL_PREFIX + "any.json");

String content = new String(Files.readAllBytes(file.toPath())); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-10-04T05:36:15.037

**对于1.7 之后**的 java

 **```
 List<String> lines = Files.readAllLines(Paths.get(getClass().getResource("test.csv").toURI())); 
```

或者，如果您在 Spring echosystem 中，您可以使用 Spring utils

```
final val file = ResourceUtils.getFile("classpath:json/abcd.json"); 
```

要了解更多幕后情况，请查看以下博客

[https://todzhang.com/blogs/tech/en/save_resources_to_files](https://todzhang.com/blogs/tech/en/save_resources_to_files)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-03-29T02:16:43.377

我面临[同样的问题](https://stackoverflow.com/questions/27703508/read-file-from-src-main-resources)。

类加载器未找到该文件，这意味着它未打包到工件（jar）中。您需要**构建项目**。例如，使用 Maven：

```
mvn clean package 
```

因此，您添加到资源文件夹的文件将进入 Maven 构建并可供应用程序使用。

我想保留我的答案：它没有解释如何读取文件（其他答案确实解释了这一点），它回答**了为什么** `InputStream`或`resource`为**null**。类似[的答案在这里](https://stackoverflow.com/a/55409569/4587961)。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-11-30T01:18:59.510

```
ClassLoader loader = Thread.currentThread().getContextClassLoader();
InputStream is = loader.getResourceAsStream("test.csv"); 
```

如果您使用上下文 ClassLoader 来查找资源，那么肯定会降低应用程序性能。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-09-27T15:45:43.050

现在我正在说明从 maven 创建的资源目录中读取字体的源代码，

> scr/main/resources/calibril.ttf

[![在此处输入图像描述](https://i.stack.imgur.com/cxA6E.png)](https://i.stack.imgur.com/cxA6E.png)

```
Font getCalibriLightFont(int fontSize){
    Font font = null;
    try{
        URL fontURL = OneMethod.class.getResource("/calibril.ttf");
        InputStream fontStream = fontURL.openStream();
        font = new Font(Font.createFont(Font.TRUETYPE_FONT, fontStream).getFamily(), Font.PLAIN, fontSize);
        fontStream.close();
    }catch(IOException | FontFormatException ief){
        font = new Font("Arial", Font.PLAIN, fontSize);
        ief.printStackTrace();
    }   
    return font;
} 
```

它对我有用，希望整个源代码也能帮助你，享受吧！

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-11-02T19:26:01.977

导入以下内容：

```
import java.io.IOException;
import java.io.FileNotFoundException;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.InputStream;
import java.util.ArrayList; 
```

以下方法在字符串的 ArrayList 中返回一个文件：

```
public ArrayList<String> loadFile(String filename){

  ArrayList<String> lines = new ArrayList<String>();

  try{

    ClassLoader classloader = Thread.currentThread().getContextClassLoader();
    InputStream inputStream = classloader.getResourceAsStream(filename);
    InputStreamReader streamReader = new InputStreamReader(inputStream, StandardCharsets.UTF_8);
    BufferedReader reader = new BufferedReader(streamReader);
    for (String line; (line = reader.readLine()) != null;) {
      lines.add(line);
    }

  }catch(FileNotFoundException fnfe){
    // process errors
  }catch(IOException ioe){
    // process errors
  }
  return lines;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-02-20T08:35:06.603

getResource()`src/main/resources`仅适用于放置的资源文件。要获取位于路径中的文件，而不是`src/main/resources`说`src/test/java`您需要显式创建它。

以下示例可能对您有所帮助

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.net.URISyntaxException;
import java.net.URL;

public class Main {
    public static void main(String[] args) throws URISyntaxException, IOException {
        URL location = Main.class.getProtectionDomain().getCodeSource().getLocation();
        BufferedReader br = new BufferedReader(new FileReader(location.getPath().toString().replace("/target/classes/", "/src/test/java/youfilename.txt")));
    }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-04-05T18:04:08.600

您可以使用 com.google.common.io.Resources.getResource 读取文件的 url，然后使用 java.nio.file.Files 读取文件的内容来获取文件内容。

```
URL urlPath = Resources.getResource("src/main/resource");
List<String> multilineContent= Files.readAllLines(Paths.get(urlPath.toURI())); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-09-23T05:43:33.500

如果您以静态方法加载文件，那么 `ClassLoader classLoader = getClass().getClassLoader();` 这可能会给您一个错误。

你可以试试这个你想从资源加载的文件是资源>>图像>>Test.gif

```
import org.springframework.core.io.ClassPathResource;
import org.springframework.core.io.Resource;

Resource resource = new ClassPathResource("Images/Test.gif");

    File file = resource.getFile(); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-02-03T07:09:20.057

要从 src/resources 文件夹中读取文件，请尝试以下操作：

```
DataSource fds = new FileDataSource(getFileHandle("images/sample.jpeg"));

public static File getFileHandle(String fileName){
       return new File(YourClassName.class.getClassLoader().getResource(fileName).getFile());
} 
```

在非静态引用的情况下：

```
return new File(getClass().getClassLoader().getResource(fileName).getFile()); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-04-01T18:35:40.043

代码在不运行 Maven-build jar 时是否有效，例如从您的 IDE 运行时？如果是这样，请确保该文件实际上包含在 jar 中。资源文件夹应该包含在 pom 文件中，在`<build><resources>`.

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-02-02T18:08:40.003

以下类可用于从 加载 a`resource`并`classpath`在给定的 出现问题时接收合适的错误消息`filePath`。

```
import java.io.InputStream;
import java.nio.file.NoSuchFileException;

public class ResourceLoader
{
    private String filePath;

    public ResourceLoader(String filePath)
    {
        this.filePath = filePath;

        if(filePath.startsWith("/"))
        {
            throw new IllegalArgumentException("Relative paths may not have a leading slash!");
        }
    }

    public InputStream getResource() throws NoSuchFileException
    {
        ClassLoader classLoader = this.getClass().getClassLoader();

        InputStream inputStream = classLoader.getResourceAsStream(filePath);

        if(inputStream == null)
        {
            throw new NoSuchFileException("Resource file not found. Note that the current directory is the source folder!");
        }

        return inputStream;
    }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-01-22T13:40:34.987

我通过写为

```
InputStream schemaStream = 
      ProductUtil.class.getClassLoader().getResourceAsStream(jsonSchemaPath);
byte[] buffer = new byte[schemaStream.available()];
schemaStream.read(buffer);

File tempFile = File.createTempFile("com/package/schema/testSchema", "json");
tempFile.deleteOnExit();
FileOutputStream out = new FileOutputStream(tempFile);
out.write(buffer); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-10-23T07:05:06.947

```
this.getClass().getClassLoader().getResource("filename").getPath() 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-10-15T09:57:56.147

即使我遵循了答案，也找不到我在测试文件夹中的文件。它通过**重建项目**得到解决。似乎 IntelliJ 没有自动识别新文件。很讨厌发现。

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2016-08-06T02:25:50.270

我让它在没有任何参考“类”或“类加载器”的情况下工作。

假设我们有三个场景，文件'example.file'的位置和你的工作目录（你的应用程序执行的地方）是home/mydocuments/program/projects/myapp：

a) 工作目录的子文件夹：myapp/res/files/example.file

b) 不属于工作目录的子文件夹：projects/files/example.file

b2）另一个不属于工作目录的子文件夹：program/files/example.file

c) 根文件夹：home/mydocuments/files/example.file（Linux；在 Windows 中将 home/ 替换为 C:)

1）获得正确的路径：a）`String path = "res/files/example.file";` b）`String path = "../projects/files/example.file"` b2）`String path = "../../program/files/example.file"` c）`String path = "/home/mydocuments/files/example.file"`

基本上，如果它是根文件夹，则路径名以斜杠开头。如果是子文件夹，路径名前不能有斜杠。如果子文件夹不是工作目录的后代，则必须使用“../” cd 到它。这告诉系统上一个文件夹。

2）通过传递正确的路径创建一个文件对象：

```
File file = new File(path); 
```

3) 你现在可以开始了：

```
BufferedReader br = new BufferedReader(new FileReader(file)); 
```**

# php - 如何在 Magento 上处理多币种和自定义报价项目价格？

> ID：15749198
> 
> 赞同：5
> 
> 时间：2013-04-01T18:24:11.223
> 
> 标签：php, magento

我有一家使用两种货币的 magento 商店，我在购物车中的商品有一个动态价格。我成功计算了我的 quote_item 价格，使用观察者和 setCustomPrice 和 setOriginalCustom 价格

```
 $quote_item->setCustomPrice($price);
 $quote_item->setOriginalCustomPrice($price); 
```

我的观察者：

```
<sales_quote_add_item> 
```

但是我有一个问题，当我更改商店的货币时，小计没有更新。如何处理多币种和自定义报价项目价格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-25T02:53:43.643

通过观察者处理

> <sales_quote_item_set_product>

```
$baseCurrencyCode = Mage::app()->getStore()->getBaseCurrencyCode();
$currentCurrencyCode = Mage::app()->getStore()->getCurrentCurrencyCode();
if($currentCurrencyCode!=$baseCurrencyCode)
    $price= Mage::helper('directory')->currencyConvert($baseprice, $baseCurrencyCode, $currentCurrencyCode); 
else
    $price = $baseprice;

$item->setPrice($baseprice);
$item->setRowTotal($item->getQty() * $price); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-09T15:34:31.147

上周我遇到了同样的问题。使用 ->setOriginalCustomPrice 方法对于单一货币站点来说很好，但是对于货币切换，它的刚性意味着您需要在每次切换货币时更新购物车项目和标价，这在我看来是非常低效的。

我想出了一个更优雅的解决方案。创建一个模块并在配置的模型部分中添加它；

```
<models>
        <catalog>
            <rewrite>
                <product>PixieMedia_CustomPrice_Model_Product</product>
            </rewrite>
        </catalog>
</models> 
```

直观地反击，主要的 ->getFinalPrice 函数在产品模型中而不是价格模型中。

现在在 /app/code/local/Namespace/Module/Model/Product.php 中创建新的 Product.php 模型

```
class PixieMedia_CustomPrice_Model_Product extends Mage_Catalog_Model_Product {

public function getFinalPrice($qty=null)
// REWRITTEN FUNCTION TO RETURN THE SPECIAL PRICE AND ENSURE CURRENCY CONVERSION
{
    $qBreak = false;
    $customPrice = Mage::Helper('pixiemedia_customprice')->getCustomerPrice($this);

    if($qty) { 
        $qBreak = $this->getQtyBreakPrice($this->getSku(),$qty,$customPrice[0]); 
        }

    if($qBreak) { return $qBreak; } else { return $customPrice[0]; }

}

} 
```

在我正在从事的特定项目中，客户使用多个价目表进行客户特定定价，其范围将使 Magento 索引定价的速度非常缓慢。因此，我们已将所有数据加载到自定义表中并执行查找以返回客户的正确价格或数量中断。

将您自己的逻辑挂钩并返回您想要的任何价格非常容易。这完全支持货币转换，因此无需折腾重新转换价格。

希望这可以帮助某人。享受 ：）

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-02-03T14:28:41.797

您可能错过了以下电话：

```
$quote->collectTotals()->save(); 
```

# mysql - CloudFoundry MySQL Java 配置

> ID：15749206
> 
> 赞同：1
> 
> 时间：2013-04-01T18:24:41.670
> 
> 标签：mysql, spring, spring-mvc, cloud, cloud-foundry

我有一个在本地 tomcat 等上运行良好的 Spring MVC 应用程序。它是一个 Spring 3.1 MVC/Hibernate 应用程序。

我正在（在可能的情况下）为应用程序使用纯 Java @Configuration - 我现在正在尝试将应用程序部署到 CloudFoundry（通过 STS），但我正在努力配置 MySql 数据库（从内存中，使用 xml 配置你不需要做任何事情，Spring/CloudFoundry 会自动注入所需的用户/密码等，但是自从我将任何东西部署到 CF 以来已经有一段时间了）。

我尝试了以下两种配置：

```
@Bean
public BasicDataSource dataSource() throws PropertyVetoException {
    //CloudFoundry config
    final CloudEnvironment cloudEnvironment = new CloudEnvironment();
        final List<MysqlServiceInfo> mysqlServices = cloudEnvironment.getServiceInfos(MysqlServiceInfo.class);
        final MysqlServiceInfo serviceInfo = mysqlServices.get(0);

    BasicDataSource bean = new BasicDataSource();
    bean.setDriverClassName("com.mysql.jdbc.Driver");
    bean.setUrl(serviceInfo.getUrl());
    bean.setUsername(serviceInfo.getUserName());
    bean.setPassword(serviceInfo.getPassword());
    return bean;
} 
```

以上在`.get(0)`mysqlServices 行越界失败。这是基于[此处](http://support.cloudfoundry.com/entries/20393268-Using-MySql-Hibernate-and-Configuration-in-Cloud-Foundry)建议的答案。

我还尝试将数据源保留为它在本地运行的内容，以查看属性是否刚刚被注入，但那里也没有运气。[（根据此处](https://github.com/SpringSource/cloudfoundry-samples/blob/master/hello-spring-mysql/src/main/webapp/WEB-INF/spring/root-context.xml)的 Spring 示例代码尝试了以下值，并且还使用了我的 db.connection 道具文件中的属性占位符）

```
@Bean
public BasicDataSource dataSource() throws PropertyVetoException {
    BasicDataSource bean = new BasicDataSource();
    bean.setDriverClassName("com.mysql.jdbc.Driver");
    bean.setUrl("");
    bean.setUsername("spring");
    bean.setPassword("spring");
    return bean;
} 
```

* * *

编辑

我还使用了 getServiceInfo(String, Class) 方法，传入了我创建并绑定到应用程序的 MySql 服务的名称，但这只是类似于 getServiceInfos(..) 方法的 NPE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:35:08.573

好吧，这只是一个愚蠢的错误——当我通过 STS 部署应用程序时，我选择了 Java Web 应用程序而不是“Spring”类型。不知道为什么这会使 CloudEnvironment 属性不可用（我的印象是该方法是在非 Spring 应用程序中注入详细信息的常用方法） - 但将其作为 Spring 应用程序重新部署到服务器解决了问题！

# jsf - JBoss 在启动时需要很长时间才能读取 faces-config

> ID：15749208
> 
> 赞同：0
> 
> 时间：2013-04-01T18:24:50.173
> 
> 标签：jsf, jboss, faces-config

我的本地应用程序（JBoss 4.0.5 GA 上的 JSF 1.1）的启动需要很长时间（超过 9 分钟！）。它在读取 faces-config.xml 时停止：

==> INFO [FacesConfigurator] 读取配置 /WEB-INF/faces-config.xml （卡在这里）

几天前一切正常。我试图恢复对 faces-config 文件所做的一些更改，但问题仍然存在。

关于可能发生的事情或我可以做些什么来帮助我进行故障排除的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:01:12.563

哦，我发现问题出在模式验证上。我从 faces-config.xml 中删除了以下行，它起作用了：

xsi:schemaLocation="http://java.sun.com/xml/ns/javaee [http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd](http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd) "

# ios - 当设备从其他应用程序（例如日历）接收警报（警报视图）时，我的应用程序将进入什么状态

> ID：15749211
> 
> 赞同：0
> 
> 时间：2013-04-01T18:24:52.923
> 
> 标签：ios

当用户在玩我的应用程序时，会弹出一个日历警报（警报视图）。用户需要关闭日历提醒才能返回我的应用程序。在他这样做之前，我的应用程序将运行什么样的状态，或者换句话说，我的应用程序将收到什么样的事件才能知道该应用程序被另一个应用程序“中断”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:28:38.850

我想你想用`applicationWillResignActive:`. 从[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)：

> 调用此方法是为了让您的应用程序知道它即将从活动状态变为非活动状态。这可能发生在某些类型的临时中断（例如来电或短信）或当用户退出应用程序并开始转换到后台状态时。处于非活动状态的应用程序会继续运行，但不会将传入事件分派给响应者。

# c# - 剃刀安全导航操作员？

> ID：15749216
> 
> 赞同：2
> 
> 时间：2013-04-01T18:25:09.107
> 
> 标签：c#, asp.net-mvc, razor

有没有办法以空安全的方式在 Razor 视图中导航对象图（没有`@if`保护块？

例如，我有以下内容`Index.cshtml`：

```
@foreach (Store.Models.Product product in @Model)
{
    <tr>
        <td>@product.Id</td>  
        <td>@product.ProductName</td>  
        <td>@String.Format("{0:C}", @product.Price)</td>
        <td>@product.Quantity</td>
        @if (@product.Category != null)
        {
            <td>@product.Category.CategoryName</td>
        }
        else 
        {
            <td></td>
        }
    </tr>
} 
```

并非我的所有产品都有类别。当它们不存在时，`Product.Category`为空。

我真正想做的是能够安全地导航对象图，而不必担心会`NullReferenceException`炸毁视图。

在 Groovy/Grails 中，我习惯于使用[Safe Navigation Operator](http://groovy.codehaus.org/Operators#Operators-SafeNavigationOperator)，并且会执行以下操作：

```
<td>@product?.Category?.CategoryName</td> 
```

当然，这在 Razor 中不起作用。

Razor 中是否有任何等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:37:06.860

一种方法是使用内联条件：

```
<td>@(product.Category != null ? product.Category : "")</td> 
```

只是让代码更紧凑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-21T20:25:45.633

我正在使用这个，只需将代码用括号 @( ) 括起来：

```
<a class="float-right bg-warning text-dark">
    @(order.BilledAmount?.ToString("0,0.00"))
</a> 
```

# jquery - 准备好的功能上的Jquery没有做任何事情

> ID：15749218
> 
> 赞同：-1
> 
> 时间：2013-04-01T18:25:14.760
> 
> 标签：jquery, html

遵循使用 jquery 文档就绪功能的教程，但是我无法让这个位工作或做任何事情。我发出了警报，但它不会触发任何想法我做错了什么？谢谢。

```
<html>
<head>
<title>Coulthard</title>
<LINK REL=StyleSheet HREF="blanket.css" TYPE="text/css" MEDIA=screen>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {
alert("works");
$("#slideshow").css("overflow", "hidden");
$("#slideshownav").css("visibility", "visible");
$("#slideshownav a[href=#image1]".addclass("active");

$("#slideshownav").localScroll({
target:'#slideshow', axis: 'x' });

$("#slideshownav a").click(function(){
    $("#slideshownav a").removeClass("active");
    $(this).addClass("active");
    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:28:09.070

在`a[href=#image1]`.

改变

```
`$("#slideshownav a[href=#image1]".addclass("active");` 
```

至

```
`$("#slideshownav a[href=#image1]").addclass("active");` 
```

你应该看到你的警报。

PS：您使用的是非常过时的 jQuery 版本。请期待在新项目中使用当前版本 1.9.1。

# javascript - 如果值 >= 0，则将表格单元格值设为红色

> ID：15749220
> 
> 赞同：-1
> 
> 时间：2013-04-01T18:25:17.437
> 
> 标签：javascript, jsp

如果它> = 0，我如何使表格单元格值然后它使表格行背景颜色变为红色？顺便说一下，值是从数据库中获取的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:27:02.263

使用香草JS，编辑后：（[这是一个工作小提琴）](http://jsfiddle.net/c9aWd/)（[在这个中，整行都变成红色](http://jsfiddle.net/Na4mE/)）

```
window.onload = function(){ // After all the contents has loaded
    var cells=document.getElementsByTagName("td"); //select all the table cell tags
    for(var i=0;i<cells.length;i++){  //iterate through each of them
       //check if content is more than 0
       if(parseFloat(cells[i].textContent || cells[i].innerText)>=0){ 
           cells[i].style.backgroundColor="red"; //change background to red
       }
    }
}; 
```

如果只需要支持现代浏览器，我觉得[这个方案](http://jsfiddle.net/3p3qV/)比较漂亮：

```
window.addEventListener("DOMContentLoaded", function(e) {
    document.getElementsByTagName("td").filter(function(elem){
        return parseFloat(elem.textContent) >= 0;
    }).forEach(function(elem){
        elem.style.backgroundColor="red";
    });
 }, false); 
```

旧内容，jquery解决方案：

* * *

```
$(function(){  //after the dom is loaded
    $("td").each(function() {
        if(parseFloat($(this).text()) >= 0){ //for every element whose text's float value is less than 0
           $(this).css("background-color","red"); //change the background color to red
        }
    }  
} 
```

# jquery - How to use the plugin aSimpleTour with the browser IE7?

> ID：15749235
> 
> 赞同：0
> 
> 时间：2013-04-01T18:26:10.467
> 
> 标签：jquery, jquery-plugins

I use

$.aSimpleTour(options);

but it does not work, there is a message error page in IE7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T05:19:32.133

嗯，插件不支持IE7，也许IE8会有。

你能发布IE7发送的错误吗？

谢谢！

# java - Java Virtual Machine Launcher - could not find the main class

> ID：15749236
> 
> 赞同：-1
> 
> 时间：2013-04-01T18:26:13.657
> 
> 标签：java, eclipse, jvm

I am working on my GUI application in Eclipse IDE. When I am trying to run it, the following error message is thrown:

> Java Virtual Machine Launcher - Could not find the main class:org.cnstar.wiki.app.GreatPlaces.Program will exit.

* * *

Update: here is how my main method looks like:

```
public static void main(String[] args) {
        NativeInterface.open(); 

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                try {
                    // loading the Splash Panel
                    SplashPanel panel = new SplashPanel();
                    SplashManager manager = new SplashManager(panel);
                    panel.setMessage("Initializing...");
                    manager.repaint();
                    for (int i = 0; i < 100; i++) {
                        panel.setProgress(i);
                        manager.repaint();
                    try {
                      Thread.sleep(100);
                        } 
                    catch (Exception e) {
                       }
                    }
                    manager.closeSplash();

                    start_application();

                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
        NativeInterface.runEventPump();
    } 
```

And the methods connected to main method:

```
private static void start_application() {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                try {
                    //UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                    UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
                    GreatPlaces window = new GreatPlaces(true, true);
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

public GreatPlaces(final boolean fullscreen, boolean showSplashScreen) {
        LocaleHandler.setLocale(); // will set the application language based to the local language of the machine

        initialize(fullscreen, showSplashScreen);

        setViewLayout();

        installAction();
    } 
```

* * *

PROBLEM FOUND: I have just reinstalled my JRE, make clean to my project and it suddenly started to work! Thanks all for help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:56:09.877

看起来您已经在内部类中定义了 main 方法。请参阅之前发布的这个问题：[静态内部类中的主要方法。？](https://stackoverflow.com/questions/9125995/main-method-in-a-static-inner-class)

也就是说，如果你想把它放在一个内部类中，那么你需要这样定义主类：

```
org.cnstar.wiki.app.GreatPlaces$Program 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:15:35.570

检查 Eclipse 工作空间中的 .project 文件是否具有以下内容

```
<buildSpec>
    <buildCommand>
        <name>org.eclipse.jdt.core.javabuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
</buildSpec>
<natures>
    <nature>org.eclipse.jdt.core.javanature</nature>
</natures> 
```

或者检查你在eclipse中编译的java类的输出文件夹是否正确

Java 构建路径 --> 源代码 --> 默认输出文件夹

# c++ - wsprintfW 只打印几十个？

> ID：15749241
> 
> 赞同：3
> 
> 时间：2013-04-01T18:26:38.750
> 
> 标签：c++, winapi

我有一个轨迹栏，在某些时候它的值应该改变文本：

```
case WM_HSCROLL:
    {
        LRESULT pos = SendMessage(trackBar, TBM_GETPOS, 0, 0);
        WCHAR buf[3];
        wsprintfW(buf, L"%ld", pos);

        SetWindowText(trackBarValue, (LPCSTR)buf);
    }
    break; 
```

轨迹条的范围从 15 到 35。由于某种原因，只有十位被打印到文本中（因为我的轨迹条的值在 15 到 19 之间，文本为 1，当我的轨迹条的值在 20 到 29 之间时，我的文本是2，它变成 3，因为我的轨迹栏的值在 30 到 35 之间。

当然，我希望我的文本显示我的轨迹栏的绝对值，而不仅仅是它的十位！

我该怎么办？

**编辑**：运行调试器后，我知道 buf 确实是由 trackbar 的值决定的。问题似乎与 SetWindowText 行有关。

**编辑：一种解决方案是将**SetWindowText 更改为 SetWindowTextW 并删除 (LPCSTR) 演员表。谢谢人们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:45:46.573

您将宽字符字符串转换为简单字符串，这是错误的。你必须使用`WideCharToMultiByte`，像这样：

```
size_t size = WideCharToMultiByte(CP_ACP, 0, buf, -1, NULL, 0, NULL, NULL);

CHAR *szTo = new CHAR[size];
WideCharToMultiByte(CP_ACP, 0, buf, -1, szTo, size, NULL, NULL);

// don't forget to delete[] szTo 
```

或者，您可以将您的应用程序定义为符合 Unicode 标准，因此`SetWindowText`宏将解析为`SetWindowTextW`：

```
#define UNICODE
#define _UNICODE
#include <windows.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:34:21.913

LRESULT 定义为 LONG_PTR，每当 PTR 出现在名称中时，您应该期望它大到足以容纳一个指针。指针在 32 位上是 4 个字节，在 64 位上是 8 个字节，因此如果您为 64 位编译，LRESULT 将不适合 long（即 4 个字节）。所以使用`wsprintfW(buf, L"%llu", pos)`

# google-apps-script - 试图从谷歌电子表格中的网址读取标题

> ID：15749249
> 
> 赞同：1
> 
> 时间：2013-04-01T18:27:06.437
> 
> 标签：google-apps-script

我创建了一个函数来调用 google 电子表格的给定 url 的标题。现在，它似乎非常不一致，因为有时我刷新代码并且它可以工作，有时我会为以前工作的相同 url 收到以下错误：

TypeError：无法从未定义中读取属性“标题”。

我的意思是，所有链接都有标题，所以我不确定这是什么意思？有时有效，有时无效。。

```
 function GrabTitle(URL) {
          var response = UrlFetchApp.fetch(URL);
          var doc = Xml.parse(response.getContentText(),true);
          var title = doc.html.head.title.getText();
      if (title == '') {
        return "unknown";
      }
        else {
          return title;  
        }
    } 
```

# jsf - 在带有 jsf 的 selectItem 之后显示一个按钮

> ID：15749252
> 
> 赞同：1
> 
> 时间：2013-04-01T18:27:19.817
> 
> 标签：jsf, primefaces

我需要同样的帮助，当我从 a 中选择一个项目时，我想显示一个按钮，这是我的代码：

```
<h:selectOneMenu value="#{managedBeanProjects.etat}">
<f:selectItems value="#{managedBeanProjects.statueOptions}">
</h:selectOneMenu> 
```

我想显示这个按钮，默认情况下它会被禁用

```
<p:commandButton id="buttonStatue" value="ok" 
     update=":form1:growl :form1:pTest" icon="ui-icon-check" /> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:35:31.157

只需让按钮的`rendered`属性评估`true`何时`#{managedBeanProjects.etat}`不为空。您可以使用`<f:ajax>`ajaxically 在下拉列表更改时更新 HTML 表示。请注意，您应该对按钮的父级进行 ajax 更新，因为不可能对本身从未首先呈现的组件进行 ajax 更新。

```
<h:selectOneMenu value="#{managedBeanProjects.etat}">
    <f:selectItems value="#{managedBeanProjects.statueOptions}">
    <f:ajax render="buttonStatueParent" />
</h:selectOneMenu>

<h:panelGroup id="buttonStatueParent">
    <p:commandButton id="buttonStatue" value="ok" 
        update=":form1:growl :form1:pTest" icon="ui-icon-check"
        rendered="#{not empty managedBeanProjects.etat}" />
</h:panelGroup> 
```

### 也可以看看：

*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w/9010771#9010771)

# .net - 如何解决 SHIM_NOVERSION_FOUND 错误消息

> ID：15749255
> 
> 赞同：4
> 
> 时间：2013-04-01T18:27:30.583
> 
> 标签：.net, c++-cli, .net-4.5

我正在将 C++/CLI 混合模式可执行文件从 VS 2010 更新到 VS 2012。我们的目标是 .NET 4.5 和 VS2012 工具集。

它在 Debug 版本中构建和运行完美，但 Release 版本立即退出，并显示“无法启动此应用程序”。以及指向[Microsoft 支持页面](http://support.microsoft.com/kb/2715633?version=%28null%29&processName=evs_mvs.exe&platform=0009&osver=6&isServer=0)的链接，提示问题是`SHIM_NOVERSION_FOUND`.

有问题的页面指出“您无法自己解决配置问题。请联系应用供应商解决问题。” 作为有问题的应用程序供应商，我很难找到有关如何更正此应用程序的任何信息。

应用程序去哪里发现 C++ 项目中正确的 .NET 版本，以及如何将正确的信息添加到 .vcxproj 或解决方案文件以使其正确构建？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-08T18:27:23.947

我遇到了类似的问题，我必须做两件事：使用配置文件，并在目标机器上安装 Framework 4.0。@CurtNichols 指出了这个方向，但这里是最终将它们整合在一起的链接：[如何：配置应用程序以支持 .NET Framework 4 或 4.5](http://msdn.microsoft.com/en-us/library/jj152935.aspx "如何：配置应用程序以支持 .NET Framework 4 或 4.5")。

这是我最终得到的 app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0"/>
  </startup>
</configuration> 
```

实际上，从 A 点到 B 点需要相当多的步骤，所以这里是“故事的其余部分”：

*   我开始遇到“无法正确初始化”错误，我已通过在其上安装 Framework 4.0 在加载 XP 的 Virtual PC 上纠正了该错误。
*   所以我尝试在目标机器（Windows 7 机器）上安装 Framework 4.5
*   现在我得到了`SHIM_NOVERSION_FOUND`错误。
*   我尝试安装 Framework 4.0，但当然这是多余的，因为 4.5 升级了 4.0。
*   我尝试安装 Framework 3.5，但安装程序已初始化，然后什么也没做。糟糕，我不知道 Windows 7 中包含 3.5。
*   所以我卸载了Framework 4.5。毫不奇怪，我回到“未能正确初始化”。
*   另一个 Stack Overflow 帖子（我现在找不到，抱歉）建议检查 Windows 功能，以确保完全启用“Microsoft Framework 3.5.1”。在目标机器上，未选中“Windows Communication Foundation”子选项。所以我检查了它们......并得到了相同的结果。
*   我安装了 Framework 4.0（我现在可以这样做，因为我卸载了 4.5）。可以肯定的是，我重新启动了。仍然有类似“无法找到运行时的版本”之类的东西。
*   现在，我终于放弃并添加了 MSDN 条目中引用的 app.config 设置。但首先，我是这样尝试的，这应该是说我可以使用 3.5 或 4.0：

    ```
    <supportedRuntime version="v2.0.50727"/> 
    <supportedRuntime version="v4.0"/> 
    ```

*   那是一个错误……可能是因为我最初是在 4.0 环境中编译的。我收到“已停止工作”之类的错误。

*   所以我摆脱了 3.5 规范（又名 2.0.5xxx，因为微软），它的工作方式就好像我一开始就应该做的那样。（可能是这样。）

希望过程的细节对某人有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T20:55:57.873

这对我有用：

项目属性 > 构建 > 平台目标：任何 CPU

# c# - 在单个列表中获取重复的字段名称

> ID：15749258
> 
> 赞同：1
> 
> 时间：2013-04-01T18:27:36.333
> 
> 标签：c#, asp.net, linq, list

我有一个`List<Car> lstcar`with 属性

```
name-Zen id-1211 MfYear-1990 Color-black
name-Alto id-1521 MfYear-1990 Color-black
name-Nano id-9911 MfYear-1990 Color-black
name-800 id-1721 MfYear-1990 Color-black
name-zen id-711 MfYear-1990 Color-black
name-Swift id-9911 MfYear-1990 Color-black
name-Nano id-1081 MfYear-1990 Color-black 
```

我想要基于名称的重复项目的名称，例如：我想要“Zen，Nano”，但是当我这样做时

```
 List<Car> dup = lstcar.GroupBy(s => s.CarName)
         .Select(grp => grp.FirstOrDefault())
         .OrderBy(s => s.CarName)
         .ToList<Car>(); 
```

我得到`dup`了这个值

```
name-Zen id-1211 MfYear-1990 Color-black
name-Alto id-1521 MfYear-1990 Color-black
name-Nano id-9911 MfYear-1990 Color-black
name-800 id-1721 MfYear-1990 Color-black     
name-Swift id-9911 MfYear-1990 Color-black 
```

但我想要

```
 name-Zen id-1211 MfYear-1990 Color-black     
 name-Nano id-9911 MfYear-1990 Color-black    
 name-zen id-711 MfYear-1990 Color-black   
 name-Nano id-1081 MfYear-1990 Color-black 
```

如何从一个中获取重复项`List<T>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:31:43.620

添加`Where`子句以仅获取具有 1 个以上元素的组并将`SelectMany`结果展平到一个列表中：

```
var duplications = lstcar.GroupBy(s => s.CarName)
                         .Where(g => g.Count() > 1)
                         .SelectMany(g => g)
                         .ToList(); 
```

我看到你不会*Zen*和*zen*在同一组中，所以你应该改变你`GroupBy`的：`GroupBy(s => s.CarName.ToLower())`

# jquery - 使用类、id 和其他类 qith Jquery 更改 div 内的图像

> ID：15749262
> 
> 赞同：1
> 
> 时间：2013-04-01T18:28:07.640
> 
> 标签：jquery, css, image, class

我有一个具有这种结构的 div：

```
 <div class="post" id="post-160439">
       <a href="http://site blablabla" title="blablablabllba">
       <img width="240" height="180" src="myimage.jpg" 
            class="attachment-240x180 wp-post-    image" alt="my alt" title="my title"></a>
  </div> 
```

而且我想在悬停时更改图像，我（我认为）完成了大部分工作，但无法仅更改此图像，而不是所有图像，就像这样；

```
 $('.wp-post-image').attr('src','my new image'); 
```

它会更改所有图像，我如何告诉 jquery 更改 divID.wp-post-image？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:29:46.987

尝试

```
$('#' + varHere + ' .wp-post-image').attr('src','my new image'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:30:26.497

由于您有多个带有图像的 div，您可以尝试以下操作：

```
 $('div .post').each(function(){
     $(this).find('img').hover(function(){
       $(this).prop('src','my new image');
     },
     function(){
       //  callback
      }
      );
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:40:25.687

更快的选择：

```
$( document.getElementById( "post-160439" ) ).find( 'wp-post-image' ).attr('src','my new image'); 
```

# javascript - 如何将数字解析为以 10 为底？

> ID：15749266
> 
> 赞同：0
> 
> 时间：2013-04-01T18:28:20.117
> 
> 标签：javascript

在[我的最后一个问题](https://stackoverflow.com/questions/15748801/what-happens-when-a-number-has-a-leading-zero)中，我发现以 0 开头的数字被解析为八进制数。在[这个问题](https://stackoverflow.com/questions/850341/how-do-i-work-around-javascripts-parseint-octal-behavior/850346)中，[答案](https://stackoverflow.com/a/850346/1101095)是：

> 这是一个常见的 Javascript 问题，有一个简单的解决方案：
> 
> 只需指定基数或“基数”，如下所示：
> 
> parseInt('08',10); // 8

这有效，但前提是数字用引号引起来。考虑以下示例：

```
var test = 0132;
alert(parseInt(test, 10)); 
```

JSFiddle：http: [//jsfiddle.net/VU96M/2/](http://jsfiddle.net/VU96M/2/)

其输出是“90”，而不是“132”。

因此，如您所见，该解决方案在这种情况下不起作用。

如果我有一个变量作为参数传递给函数，或者从函数返回，它有一个前导零，如上面的变量`test`，我如何将它解析为一个以 10 为底的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:32:59.790

0132 在传递给之前被视为八进制`parseInt`，所以你真的在打电话`parseInt(90,10)`

试试这个：

```
var test = 0132;
parseInt((test).toString(8)); // 132 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:19:27.373

在[严格模式下](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)，JavaScript 不允许你做这样的事情——定义一个八进制字面量——你会得到一个异常。开始使用严格模式作为 JavaScript 代码的默认模式确实是一个很好的做法。

另外，因为在非严格模式下，您不知道`test`变量是定义为八进制文字还是十进制，所以如果定义为or `test.toString(8)`，当然会给您不同的结果。`test``0132``132`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:31:49.380

您可以将其更改回以 8 为基的文字，以便返回以 10 为基的版本：

```
console.log( +test.toString(8) ); // 132
//                 ^^^^^^^^^^^ 
```

[***演示***](http://jsfiddle.net/9pBQw/)

# c# - 如何在一个 WinForms 应用程序中同时运行多个表单？

> ID：15749267
> 
> 赞同：1
> 
> 时间：2013-04-01T18:28:23.270
> 
> 标签：c#, winforms

在我的应用程序中，我需要打开另一个表格。从现在开始，我使用

```
Form2 childform = new Form2();
childform.ShowDialog(); 
```

但是当我使用此代码显示第二个表单时，我无法单击第一个表单。我需要做什么才能打开两个表单并允许它们同时使用（单击它们，写入包含的文本框等）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T18:29:22.540

简单地说，你应该试试`childform.Show()`。

# html - 标题 DIV 外的标题文本

> ID：15749277
> 
> 赞同：1
> 
> 时间：2013-04-01T18:29:07.297
> 
> 标签：html, css, header

你知道为什么文本“左边的文本”和“右边的文本”应该在我的标题蓝色 DIV 中吗？看起来文本顶部有一些意外的填充或其他内容。[JS 小提琴在这里](http://jsfiddle.net/Grek/bZsck/)。

![标题文本](https://i.stack.imgur.com/rDCVr.jpg)

CSS：

```
#header {
    width: 100%;
    height: 18px;
    background: #0064C5;
}
#header p.left {
    float:left;
    color:#000;
}

#header p.right {
    float:right;
    color:#000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:36:42.203

试试这个

添加边距：0 到#header p

```
#header {
    width: 100%;
    height: 18px;
    background: #0064C5;
    clear: both;
}
#header p { margin:0;}
#header p.left {
    float:left;
    color:#000;

}

#header p.right {
    float:right;
    color:#000;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:48:31.753

只需删除`float:left;`in `#header p.lef`t

试试这个代码

```
#header p.left {
    color:#000;
} 
```

代替

```
#header p.left {
    float:left;
    color:#000;
} 
```

看到这个设计：http: [//jsfiddle.net/Grek/bZsck/](http://jsfiddle.net/Grek/bZsck/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:48:55.827

因为标题有固定的高度。

```
#header {
width: 100%;
overflow:hidden;
background: #0064C5;} 
```

移除高度，添加溢出（因为 header.p 有浮动）；

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T18:31:46.493

`<p>`它只是添加`margin: 0;`到的默认边距`#header p.left`

[**jsFiddle**](http://jsfiddle.net/Humility/bZsck/1/)

# css - 如何避免两行中的span break内容？

> ID：15749279
> 
> 赞同：4
> 
> 时间：2013-04-01T18:29:11.447
> 
> 标签：css, html

我有以下[jsFiddle](http://jsfiddle.net/hLL9R/)。当我调整窗口大小时，跨度分为两行。我该如何防止呢？我希望整个跨度都转到第二行。

```
<html>
    <body>
        <div id="dvContainer">
            <span style="border:1px;border-style:solid;margin-right:5px;padding:5px;">some text for the first span</span>
            <span style="border:1px;border-style:solid;margin-right:5px;padding:5px;">second text for second span</span>
        </div>
    </body>
</html> 
```

编辑：

我需要它们彼此相邻，但是当我调整屏幕大小时，我希望整个 div 打破界限，谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-01T18:32:03.137

您可以使用 nowrap：

```
span{
  white-space: nowrap;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T18:35:58.117

添加`display:block;`你的两个跨度

看到这个 [设计](http://jsbin.com/oqeteh/12/edit)

或者

[http://jsfiddle.net/hLL9R/](http://jsfiddle.net/hLL9R/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:41:39.803

多一点跨浏览器（我的意思是旧的 IE 和内联块）

```
span { display:block; float:left } 
```

# objective-c - 应用程序返回前台后 UIImageViews 没有响应触摸事件

> ID：15749293
> 
> 赞同：0
> 
> 时间：2013-04-01T18:30:04.997
> 
> 标签：objective-c, uiimageview, uitouch

我的应用程序由一个`UIImageView`响应触摸事件的 's 网格组成。如果我切换到另一个应用程序，然后切换回我的应用程序，`UIImageView`' 似乎不再响应触摸。这与我的`touchesBegan`方法有关吗？我的方法是这样声明的：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

 UITouch *touch = [[event allTouches]anyObject];

 .....
 ...

} 
```

有人对导致我的问题的原因有任何想法吗？

提前致谢！

# php - 更改语言更改徽标 Opencart

> ID：15749299
> 
> 赞同：0
> 
> 时间：2013-04-01T18:30:39.567
> 
> 标签：php, opencart

当我改变语言时，我试图改变商店的主要标志。我的公司有一个不同的英文名称（最初是法文）。

这是我的代码：

我已更改（在目录/视图/主题/yourtheme/template/common/header.tpl 中）

```
 <?php if ($logo) { ?>
  <div id="logo"><a href="<?php echo $home; ?>"><img src="<?php echo $logo; ?>" title="<?php echo $name; ?>" alt="<?php echo $name; ?>" /></a></div>
  <?php } ?> 
```

为了 ：

```
<?php
if($lang == 'fr'){
$logo = 'image/data/Lg_Axesoirs_Blanc_FR_PNG.png';
} elseif($lang == 'en'){
$logo = 'image/data/Lg_Axesoirs_Blanc_EN_PNG.png';
}
?> 
<?php if ($logo) { ?>
<div id="logo"><a href="<?php echo $home; ?>"><img src="<?php echo $logo; ?>" title="<?php echo $name; ?>" alt="<?php echo $name; ?>" /></a></div>
<?php } ?> 
```

但它不起作用，标志没有改变，但我不明白我的代码有什么问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:01:14.180

您的代码的问题是 $lang 不包含当前所选语言的语言。这存储`$this->config->get('config_language');`在`index.php`之前

```
$language = new Language($languages[$code]['directory']); 
```

如果你想知道如何。您可以简单地将您的代码修改为以下应该可以工作的代码

```
<?php
$lang = $this->config->get('config_language'); // ADDED LINE
if($lang == 'fr'){
    $logo = 'image/data/Lg_Axesoirs_Blanc_FR_PNG.png';
} elseif($lang == 'en'){
    $logo = 'image/data/Lg_Axesoirs_Blanc_EN_PNG.png';
}
?> 
<?php if ($logo) { ?>
<div id="logo"><a href="<?php echo $home; ?>"><img src="<?php echo $logo; ?>" title="<?php echo $name; ?>" alt="<?php echo $name; ?>" /></a></div>
<?php } ?> 
```

或者假设您的原始徽标集是

```
image/data/Lg_Axesoirs_Blanc_FR_PNG.png 
```

你可以使用

```
<?php
$logo = str_replace('_FR_', '_' . strtoupper($this->config->get('config_language')) . '_', $logo);
?> 
<?php if ($logo) { ?>
<div id="logo"><a href="<?php echo $home; ?>"><img src="<?php echo $logo; ?>" title="<?php echo $name; ?>" alt="<?php echo $name; ?>" /></a></div>
<?php } ?> 
```

这将允许您为每个新语言徽标自动使用两个字母前缀

*请注意，上面的代码都没有经过测试，但理论上应该可以工作*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:22:08.917

这是我应该工作的解决方案：

打开你的控制器`catalog\controller\common\header.php`，找到这行代码：

```
$this->data['logo'] = $server . 'image/' . $this->config->get('config_logo'); 
```

（如果 OC 版本为 1.5.5.1，则应为第 30 行）并将此行注释掉（在行`//`前添加）。

现在在这个注释行下（应该留在`if`语句中）添加这个：

```
$this->load->model('localisation/language');
$language = $this->model_localisation_language->getLanguage($this->config->get('config_language_id'));
$logo = $server . 'image/' . $language['code'] . '/' . $this->config->get('config_logo');
$this->data['logo'] = file_exists($logo) ? $logo : $server . 'image/' . $this->config->get('config_logo'); 
```

通过此代码，您可以像这样设置您的徽标图像的路径

*   `.../image/EN/data/Lg_Axesoirs_Blanc.png`
*   `.../image/FR/data/Lg_Axesoirs_Blanc.png`

确保在您的管理员中设置徽标，就像您通常应该（因此它应该存储在`image/data/`）文件夹中一样，然后手动将英文/法文副本复制到文件夹`image/EN/data`或`image/FR/data`-**请注意图像名称必须相同**。代码应测试该文件是否存在于该目录中，如果不存在则选择默认文件。

您的头模板文件中的代码应该保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:03:41.293

进入 OpenCart 的管理员到语言部分并编辑语言。在 URL 中查找类似 language_id=1 的内容。记下每种语言的语言 ID。

在您的代码中，输入以下内容：

```
<?php

// $this->config->get('config_language_id') returns the language ID currently active for the session

switch ($this->config->get('config_language_id')) {

 case 1 : // Replace the "1" with your English language ID
   // The English logo
   $logo = 'image/data/Lg_Axesoirs_Blanc_EN_PNG.png';
   break;

 case 2 : // Replace the "2" with your French language ID
   // The French logo
   $logo = 'image/data/Lg_Axesoirs_Blanc_FR_PNG.png';
   break;

 default :
    // The default logo if none of the above cases match
   $logo = 'image/data/Lg_Axesoirs_Blanc_EN_PNG.png';

}
?>

<?php if ($logo) { ?>
<div id="logo">
   <a href="<?php echo $home; ?>">
       <img src="<?php echo $logo; ?>" title="<?php echo $name; ?>" alt="<?php echo $name; ?>" />
   </a>
</div>
<?php } ?> 
```

请注意，此逻辑实际上应该在控制器中，而不是在模板视图文件中。OpenCart 不允许您扩展核心控制器，因此不必太担心将其放入视图中，但如果您想正确执行此操作，请查看 vQmod 之类的东西以将其插入控制器。

（有点跑题了；在即将发布的 OpenCart 版本中内置了一个 vQmod-ish 类型的东西，希望它可以让您编辑控制器而不会弄脏和下载 vQmod - 但我不能说它会持续多久已发布）。

希望有帮助！

# ios - UITableViewSource 单元格高度始终为 44 点

> ID：15749301
> 
> 赞同：1
> 
> 时间：2013-04-01T18:30:41.420
> 
> 标签：ios, uitableview, xamarin.ios

我正在为来自 UITableViewSource 的 UITableView 编写一个自定义单元格。我已经实现了 GetHeightForRow 并记录了结果以确保高度正确通过。问题是，我的自定义单元格的框架高度是固定的 44，无论从 GetHeightForRow 返回什么值。副作用当然是我的图层边界不正常，并且 UITableView 切断了我最后一个单元格的底部，并且不允许进一步滚动。

值得一提的是，我已经尝试在我的单元构造函数逻辑和 GetCell 逻辑中手动更改单元的框架，但对大多数人来说很明显，这并不重要，使用的值总是恢复为 44。

这是我的 UITableViewSource 逻辑如何进行的一个想法：

```
public override float GetHeightForRow (UITableView tableView, NSIndexPath indexPath)
{
    var result = SingleItemCell.GetHeight(_models[indexPath.Row], _width, _isStandalone));
    Console.WriteLine(result);  //prints various heights, never 44
    return result;
}

public override UITableViewCell GetCell (UITableView tableView, NSIndexPath indexPath)
{
    var cell = tableView.DequeueReusableCell(Id) as SingleItemCell ?? 
        (_isStandalone ? new StandaloneItemCell() : new SingleItemCell());

    var model = _models[indexPath.Row];
    cell.Model = model;

    Console.WriteLine(cell.Frame.Height); //always 44

    return cell;
} 
```

**更新**

有趣的是，单元格分隔符显示在正确的位置，但我的自定义视图仍然无法看到正确的帧高度。

即使更改了我的自定义单元格视图的构造函数以将显式框架传递给基本构造函数，我的框架的高度也不会改变。

```
public SingleOffer(RectangleF frame) 
              : base(frame) //example new RectangleF(0, 0, 300, 65)
{
    //Here, before custom logic, Frame is still 0, 0, 300, 44!
    Initialize();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T23:21:49.877

我无法重现您的问题。正如您似乎理解的那样，关键是`UITableViewSource.GetHeightForRow`. 以下程序创建预期的输出：

![在此处输入图像描述](https://i.stack.imgur.com/h5x2y.png)

```
using System;
using System.Collections.Generic;
using System.Linq;

using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace SingleFileTableViewSolution
{
public class DomainClass
{
    static Random rand = new Random (0);
    public UIColor Color { get; protected set; }
    public float Height { get; protected set; }

    static UIColor[] Colors = new UIColor[] 
    {
        UIColor.Red,
        UIColor.Green,
        UIColor.Blue,
        UIColor.Yellow
    };

    public DomainClass ()
    {
        Color = Colors[rand.Next(Colors.Length)];
        switch(rand.Next(3))
        {
        case 0 : 
            Height = 24.0f;
            break;
        case 1 : 
            Height = 44.0f;
            break;
        case 2 : 
            Height = 64.0f;
            break;
        default:
            throw new ArgumentOutOfRangeException();
        }
    }
}

//Table Source
public class ColorTableDataSource : UITableViewSource
{
    List<DomainClass> Model { get; set; }

    public ColorTableDataSource(List<DomainClass> model)
    {
        this.Model = model;
    }

    public override int RowsInSection(UITableView tableView, int section)
    {
        return Model.Count;
    }

    public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
    {
        var cell = tableView.DequeueReusableCell(ColoredTableCell.ID);
        if(cell == null)
        {
            cell = new ColoredTableCell();
        }
        cell.ContentView.BackgroundColor = Model[indexPath.Row].Color;

        return cell;
    }

    public override float GetHeightForRow(UITableView tableView, NSIndexPath indexPath)
    {

        var height = Model[indexPath.Row].Height;
        return height;
    }
}

public class ColoredTableCell : UITableViewCell
{
    public static readonly string ID = "ColoredTableCell";

    public ColoredTableCell ()
    {
    }
}

public class ColorTableController : UITableViewController
{
    String title;

    public ColorTableController (String title, UITableViewSource source) : base ()
    {
        this.title = title;
        this.TableView.Source = source;
    }

    public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();

        Title = title;
    }
}

[Register ("AppDelegate")]
public  class AppDelegate : UIApplicationDelegate
{
    UIWindow window;
    ColorTableController viewController;

    public override bool FinishedLaunching (UIApplication app, NSDictionary options)
    {
        var models = new List<DomainClass>();
        for(int i = 0; i < 20; i++)
        {
            models.Add(new DomainClass());
        }

        var tableController = new ColorTableController("My Table", new ColorTableDataSource(models));

        window = new UIWindow (UIScreen.MainScreen.Bounds);
        window.RootViewController = tableController;

        window.MakeKeyAndVisible ();

        return true;
    }

}

public class Application
{
    static void Main (string[] args)
    {
        UIApplication.Main (args, null, "AppDelegate");
    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:01:59.660

实现 tableView:heightForRowAtIndexpath: 以返回您想要的 tableviewcell 高度。如果不实现该方法，框架默认高度为 44。

# javascript - 添加关闭链接是jquery自动完成

> ID：15749302
> 
> 赞同：1
> 
> 时间：2013-04-01T18:30:42.593
> 
> 标签：javascript, jquery, autocomplete

我已经在我的项目中使用 jquery UI 多自动完成实现了 jquery 多自动完成，效果很好。但是现在有一个要求，我必须在我选择到自动完成文本框中的每个选项的右上角添加一个关闭（X）链接。当我单击特定选择关闭链接时，它将删除该特定选项。我该怎么做。

基本上，当我们提出一个新问题时，它与底部的 stackoverflow TAGS 自动完成非常相似。

# javascript - 如何在 Galleria Theme Classic 上设置起始图像

> ID：15749307
> 
> 赞同：0
> 
> 时间：2013-04-01T18:30:57.610
> 
> 标签：javascript, jquery, drupal-7, galleria

我尝试通过 Drupal Views Slideshow 显示图像列表，使用 Galleria 插件，一切正常，

如何从我的列表中设置特定的开始图像？

我找到了这个选项

```
Galleria.configure({
    show: 4  //This option accept only integer as value,
}); 
```

我想先通过图像 url 显示它对 api 函数使用有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:35:38.067

你可以试试历史插件： http: [//galleria.io/docs/plugins/history/](http://galleria.io/docs/plugins/history/)

它允许散列 URL，例如[http://example.com/#4](http://example.com/#4)

# jquery - 将鼠标悬停在选择下拉菜单上时，包含 div 会失去焦点

> ID：15749315
> 
> 赞同：2
> 
> 时间：2013-04-01T18:31:39.553
> 
> 标签：jquery, css, internet-explorer, firefox

当您将鼠标悬停在其容器上并且该 div 绝对定位时，我有一个 div 出现，因此它出现在其容器之外。它里面有多个选择下拉菜单，当我尝试更改其中任何一个的值时，焦点会丢失，它会触发容器上的鼠标移出。

我在这里设置了这个问题的一个工作示例：http:
[//jsfiddle.net/uBjR3/2/](http://jsfiddle.net/uBjR3/2/)

这个问题发生在 FireFox 和 IE 中（Chrome 似乎工作正常）。

=====

HTML：

```
<div class="container">
    <div class="dropdown">
        <select>
            <option>option 1</option>
            <option>option 2</option>
            <option>option 3</option>
            <option>option 4</option>
        </select>
    </div>
</div> 
```

CSS：

```
.container { background-color: red; height: 30px; width: 60px; padding: 20px; position: relative; }

.dropdown { background-color: blue; height: 300px; width: 200px; padding: 20px; position: absolute; top: 70px; left: 0px; display: none; } 
```

查询：

```
$('.container').hover(
  function () {
    $('.dropdown').show();
  },
  function () {
    $('.dropdown').hide();
  }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:22:52.103

我刚刚看了你的代码。用这个替换你的jQuery，它会按照你的意愿工作

```
$(document).ready(function(){

      $('.container').hover(function(){
      $('.dropdown').stop(1).slideDown();
   },function(){
      $(".dropdown").stop(1).slideUp();
   }); 

}); 
```

这是工作演示[http://jsfiddle.net/kevinPHPkevin/uBjR3/11/](http://jsfiddle.net/kevinPHPkevin/uBjR3/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:24:02.950

您可以使用超时来阻止隐藏操作。就像是：

```
var timer;
$('PARENT')
    .on(
        mouseenter: function() {
            clearTimeout(timer);
            $('.dropdown').show();
        },
        mouseleave: function() {
            timer = setTimeout(function() {
                $('.dropdown').hide();
            }, 400);
        }, '.container')
    .on(
        mouseenter: function() {
            clearTimeout(timer);
        },
        mouseleave: function() {
            timer = setTimeout(function() {
                $('.dropdown').hide();
            }, 400);
        }, '.dropdown'); 
```

# oop - 继承可以完全被组合取代吗？

> ID：15749316
> 
> 赞同：9
> 
> 时间：2013-04-01T18:31:42.313
> 
> 标签：oop, design-patterns, inheritance, language-agnostic, composition

这个问题**不是**像“继承与组合”这样的问题。

我完全理解继承与组合的不同之处，我知道[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，[钻石问题](http://en.wikipedia.org/wiki/Multiple_inheritance)，它们的优缺点，这两个概念似乎都很简单。但是到处都有很多关于继承和组合的问题，我想，也许我误解了这个简单的想法。

让我们专注于[Go](http://golang.org/)。Go 是一种来自 Google 的语言，每个人都很兴奋，它没有继承，没有类，但它有组合，这很酷。对我来说，Go 中的组合为您提供与其他语言（C++、Java、...）中的继承**完全相同**的功能 - 组件方法会自动公开并作为后续结构的方法使用，如下所示：

```
package main

import (
    "fmt"
)

type Car struct{
    name string
}

func (c *Car) move() bool { 
    return true
} 

type MyCar struct{
    Car   
}

func main() {
    var c MyCar
    fmt.Print(c.move())
} 
```

综上所述，组合优于继承，因为：

1.  更灵活（允许您在运行时更改组件，因此您可以影响“类”的工作方式。
2.  没有钻石问题（但钻石问题是可以解决的，所以这不是很强的优势）

**如果你考虑 Go 和它的接口（每个对象，具有由接口定义的方法，都隐含地实现了这个接口）你有最终的解决方案吗？我们可以说带有一些语法糖的组合可以代替继承吗？**

这样的设计符合 Liskov 替换原则。我是否错过了某些东西或继承（从任何语言中知道）与 Go 中已知的组合（和接口）相比没有优势？

**===== 编辑1 =====**

为了澄清起见，可以`Go`使用“标准”组合机制，如下所示（此示例的行为与前一个类似）：

```
package main

import (
    "fmt"
)

type Car struct{
    name string
}

func (c *Car) move() bool { 
    return true
} 

type MyCar struct{
    car Car
}

func (c *MyCar) move() bool { 
    return c.car.move()
} 

func main() {
    var c MyCar
    fmt.Print(c.move())
} 
```

但是，如果您像前面的示例一样使用它，则所有方法都隐含在“MyCar 类”中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:51:44.893

## 简短的回答

真的没有那么黑白分明。简而言之，是的。任何可以通过继承解决的情况都可以通过组合来解决。简而言之，您的问题的答案是肯定的；继承可以用组合代替。

## 为什么没那么简单

**何时使用继承**
这不是你是否可以将它们换掉的问题。这取决于您正在编程的上下文，并且更多的是您是否应该将它们换掉的问题。以 Java 中的这个简单示例为例：

```
public class Person
{
    // Assume every person can speak.
    public void speak()
    {
    }
} 
```

现在，假设我们还有另一堂课，戴夫。戴夫是一个人。

```
public class Dave extends Person
{
     public void speak() { System.out.println("Hello!"); }
     public void killSomeone() {} // Dave is a violent Guy.
} 
```

现在让班级`Dave`看起来像这样更有意义吗？

```
public class Dave
{
     private Person p;
     // Composition variant.

     public void speak() { p.speak(); }
     public void killSomeone() {} // Dave is a violent Guy.
} 
```

这段代码暗示戴夫有一个人。它没有那么简单，也没有解释自己。此外，任何人能做的事，戴夫都能做，所以我们断言戴夫是一个“人”是有道理的。

**何时使用合成**

当我们只想公开部分类的接口时，我们使用组合。按照我们之前的示例，假设`Dave`有一个`Guitar`. 吉他有一个更复杂的界面：

```
public class Guitar
{
     public Color color;
     // Guitar's color.
     public Tuning tuning;
     // Guitar's tuning.

     public void tuneGuitar()
     {}

     public void playChord()
     {}

     public void setColor()
     {}
} 
```

现在，如果我们要继承这个类，结果会是什么？

好吧，Dave 类现在将具有属性`color`和`tuning`. `Dave`有调音吗？我想不是！这就是继承没有意义的地方。我们不想将整个`Guitar`接口与接口一起暴露出来`Dave`。我们只希望用户能够访问`Dave`需要访问的内容，因此在这种情况下，我们将使用一些组合：

```
public class Dave extends Person
{
     private Guitar guitar;
     // Hide the guitar object. Then limit what the user can do with it.

     public void changeGuitarColor(Color newColor)
     {
         // So this code makes a lot more sense than if we had used inheritance.
         guitar.setColor(newColor);
     }

     public void speak() { System.out.println("Hello!"); }
     public void killSomeone() {} // Dave is a violent Guy.
} 
```

## 结论

这真的不是什么可以替代另一个的情况。这是关于您在其中实施这些技术的情况。希望在示例结束时，您会看到继承适用于一个对象`IS A`对象的情况，而组合用于一个对象`HAS A`对象的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-20T14:18:02.633

很抱歉发布了 necroposting，但似乎问题和答案都集中在代码重用上。我们可以同时使用继承和组合来重用来自共同“祖先”的一些代码，这是真的。组合在这里效果更好。

但是继承主要不是为了代码重用，而是为了**动态绑定**。“is a”关系实际上可以表述为：调用代码使用对象的接口，对特定实现一无所知。

伪代码：

```
// Interface
class A { 
  drawMe() {} ; 
};
// Implementations
class Rect:A { 
  drawMe() {DrawRect();}; 
};
class Circle:A { 
  drawMe() {Drawcircle();}; 
};

main() {
  // We fill the array in one part of the program
  Array_of_A arr;
  arr.add(new Rect);
  arr.add(new Circle);
  // We can use the array in completely another part
  // without any idea of what the items really are,
  // only know the interface
  foreach(item from arr) {
     item->drawMe();
  }
} 
```

在许多语言（例如 C++）中，继承是说“这个对象实现这个接口”的唯一实用方式。而且它还允许做一些事情，比如代码重用，这真的是通过组合更好地完成。

我对 Go 一无所知，但我正确理解了您的话，它提供了另一种定义“此对象实现此接口”的方法：

> 每个具有由接口定义的方法的对象都隐式地实现了这个接口

所以如果你也可以通过接口调用对象，它就完成了继承的工作。但它还允许替换基类，这就是我认为他们称之为组合的原因。也许是因为它以 vtable 以外的某种方式在内部实现，但我想不出它在哪里可以产生任何影响。

因此，如果您找到一种方式说“此对象实现此接口” ，**则可以用组合代替继承。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T18:52:28.333

好问题...

当您想在语义上区分“A**是**B”和“A**有**B”时，您可能更喜欢继承而不是组合。例如，类 Car 可能**有**一个 Engine 成员（组合），但可能**是**（即继承自）一个 Vehicle。

我认为区别在于必须保持两个类共享的方法数量。继承时，只需要重写基类中真正需要的那些（虚）函数；如果你要使用纯粹的组合，你需要重新实现你的成员类的每个公共方法。

最终，“最佳”方法是最适合您当前应用的方法。

编辑：

这里有一个小而简洁的辩论： [http ://www.sitepoint.com/forums/showthread.php?568744-When-to-use-inheritance](http://www.sitepoint.com/forums/showthread.php?568744-When-to-use-inheritance)

以及关于它的维基百科文章（！）： [http ://en.wikipedia.org/wiki/Composition_over_inheritance#Drawbacks](http://en.wikipedia.org/wiki/Composition_over_inheritance#Drawbacks)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-21T06:49:58.570

深入到核心继承只是高级语言中实现类型分支（分派）的一种便利机制。因此，所有与继承和子类型多态性相关的特殊机制都可以通过添加显式的“类型标签”并在它们上进行分支来解决。

在 Java 中，有时仅树的多态性不能很好地模拟现实世界的问题，匹配类型（`instanceof`或`pattern matching`等）无处不在。您可以使用组合构建自己的类型标签来实现相同的目的。事实上，由于 Java 中枚举的效率低下，我们也将枚举手工制作为常量。

真正的问题是关于人体工程学。软件构建就是处理复杂性。如果您可以使用继承降低复杂程度，即新实体实际上是旧实体的扩展，那么为什么不使用继承呢？毕竟，如果“能做”真的是个问题，我们现在仍然在编写机器代码。之所以存在这些高级机制，是为了帮助我们更好地理解这个问题。在这个程度上，我认为用无条件的组合代替继承对我们没有任何好处。它只会给我们的项目增加更多的复杂性和样板代码，没有好处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-01T20:05:46.180

我认为这里真正的问题是继承与多态性。在像Java 这样的流行语言中，两者结合在一起，即子类型多态性只能通过实现继承来实现。*Go*证明了即使在静态类型语言中也可以在没有继承的情况下实现多态性（这在 Go 之前就已为人所知）。*所以问题是，如果你可以在没有继承的情况下拥有*多态性，你为什么要继承呢？

现代的答案似乎是......你不会。将继承与多态性混为一谈假定继承是最常见的用例。甚至 James Gosling 也承认[实现继承是一个错误](https://www.javaworld.com/article/2073649/core-java/why-extends-is-evil.html)。这并不是说它没有用。但是继承的用例可以由框架或 DSL 覆盖，而不是强制到每个子类型关系中。在这方面，*Go*有机会从 Java 的错误中吸取教训。

# gridview - kendo gridview 和 web api odata

> ID：15749322
> 
> 赞同：6
> 
> 时间：2013-04-01T18:31:59.397
> 
> 标签：gridview, kendo-ui, odata

使用我的 web api 喂养我的剑道网格时遇到问题。该调用会生成以下内容：

```
/odata?$callback=jQuery19101822532636579126_1364840583015&%24inlinecount=allpages&%24format=json&%24top=20 
```

但回应是：

```
The query parameter '$callback' is not supported. 
```

有人有这种情况的经验吗？

```
 dataSource: {
               type: "odata",
               transport: {
               read: "odata/mydata"
              }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-25T12:43:16.927

我设法通过在配置的不同级别设置 OData 和 JSON 数据类型来解决这个问题

```
dataSource: {
  type: "odata",
  transport: {
    read: {
      url: "/odata/FXDatas",
      dataType: "json"
    }
  }
},
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-26T20:12:25.330

您很可能已配置为使用 JSONP 而不是 JSON，并且您的服务不支持 JSONP，因为它需要手动实现。不要使用 JSONP，它是跨域请求的解决方法，并且有几个限制。

# python - 沿数组对角线包装/展开向量

> ID：15749325
> 
> 赞同：5
> 
> 时间：2013-04-01T18:32:13.850
> 
> 标签：python, numpy

我一直在寻找一种方法（比只编写循环遍历矩阵更有效）从以包裹的对角线顺序给出的元素创建矩阵，并按此顺序提取值。例如，给定`a = [2,3,4,5,6,7]`，我希望能够生成数组

```
[  0,  2,  5,  7,
   0,  0,  3,  6,
   0,  0,  0,  4,
   0,  0,  0,  0] 
```

并且还能够`a`从该数组中重新提取。

`scipy.sparse.diags`实现了很多类似的东西，但顾名思义，它是为稀疏数组设计的。numpy 中是否有任何类型的功能可以提供此功能，或者某种形式的基于对角线的索引？或者也许某种类型的数组转换会使这更可行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:04:18.370

与 Josh Adel 提出的方法保持一致，如果您想保持数据按对角线排序，而不是按行排序，您只需要在 return 上稍作改动`np.triu_indices`即可构建自己的索引生成例程：

```
def my_triu_indices(n, k=0):
    rows, cols = np.triu_indices(n, k)
    rows = cols - rows - k
    return rows, cols 
```

现在你可以这样做：

```
>>> a = np.array([2,3,4,5,6,7])
>>> b = np.zeros((4, 4), dtype=a.dtype)
>>> b[my_triu_indices(4, 1)] = a
>>> b
array([[0, 2, 5, 7],
       [0, 0, 3, 6],
       [0, 0, 0, 4],
       [0, 0, 0, 0]])
>>> b[my_triu_indices(4, 1)]
array([2, 3, 4, 5, 6, 7]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T18:52:01.707

如果您愿意以`a`不同的方式订购，您可以执行以下操作：

```
import numpy as np
a = [2,5,7,3,6,4]
b = np.zeros((4,4))
b[np.triu_indices(4,1)] = a
In [11]: b
Out[11]:
array([[ 0.,  2.,  5.,  7.],
       [ 0.,  0.,  3.,  6.],
       [ 0.,  0.,  0.,  4.],
       [ 0.,  0.,  0.,  0.]]) 
```

然后您可以通过以下方式提取这些值：

```
In [23]: b[np.triu_indices(4,1)]
Out[23]: array([ 2.,  5.,  7.,  3.,  6.,  4.]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T19:55:49.300

这并不简单，但应该有效。如果我们分解 numpy 如何找到对角线索引，我们可以重建它以获得你想要的。

```
def get_diag_indices(s,k):
    n = s
    if (k >= 0):
        i = np.arange(0,n-k)
        fi = i+k+i*n
    else:
        i = np.arange(0,n+k)
        fi = i+(i-k)*n
    return fi

indices=np.hstack(([get_diag_indices(4,1+x) for x in range(3)]))
a=np.array([2, 3, 4, 5, 6, 7])
out=np.zeros((4,4))

>>> out.flat[indices]=a
>>> out
array([[ 0.,  2.,  5.,  7.],
       [ 0.,  0.,  3.,  6.],
       [ 0.,  0.,  0.,  4.],
       [ 0.,  0.,  0.,  0.]])

>>> out.flat[indices]
array([ 2.,  3.,  4.,  5.,  6.,  7.]) 
```

# ruby - Sinatra 与 Puma 合作？

> ID：15749327
> 
> 赞同：9
> 
> 时间：2013-04-01T18:32:19.670
> 
> 标签：ruby, sinatra, rack, thin, puma

我正在尝试在我的应用程序中利用服务器发送的事件。我正在使用 Sinatra 和[`sinatra-sse`](https://github.com/radiospiel/sinatra-sse)gem。这个 gem 包装了 Sinatra`stream :keep_alive`调用。

在 Thin 上运行我的应用程序时，我绝对没有问题，并且我的事件流按预期工作。但是，当我将我的应用程序切换为与 Puma 一起运行时，一切正常，除了我`sse_stream`什么都不做！它只是返回一个空白页。

我的流是这样设置的

```
get "/logstream/:server" do
    if rbcserver = MyApp.servers[params[:server]]
        sse_stream do |stream|     
            rbcserver.add_web_logger(stream)
            stream.callback { rbcserver.remove_web_logger(stream) }
        end
    else
        error 404
    end
end 
```

我像这样开始瘦：

```
@@puma_instance = Puma::Server.new MyApp::WebUI
@@puma_instance.add_tcp_listener ip, port
@@puma_instance.run 
```

知道发生了什么吗？任何帮助，将不胜感激。

编辑：更多信息这是 cURL 在 Puma 上运行时给出的信息

```
$ curl -L -b cookies.txt -c cookies.txt -i http://localhost:9001/logstream/myserver    
HTTP/1.1 200 OK
Content-Type: text/event-stream;charset=utf-8
X-Content-Type-Options: nosniff
Transfer-Encoding: chunked

$ 
```

而这就是 Thin 上发生的事情

```
$ curl -L -b cookies.txt -c cookies.txt -i http://localhost:9001/logstream/myserver                                        
HTTP/1.1 200 OK
Content-Type: text/event-stream;charset=utf-8
X-Content-Type-Options: nosniff
Connection: close
Server: thin 1.5.1 codename Straight Razor

event: <event name>
data: <my data>

event: <event name>
data: <my data>

<continues as more data comes in> 
```

编辑：我应该补充一点，我的应用程序在其核心使用 EventMachine，因此`sinatra_sse`与 EM 的耦合很可能不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:53:06.090

我认为问题在于 sinatra-sse[明确使用](https://github.com/radiospiel/sinatra-sse/blob/master/lib/sinatra/sse.rb#L67)EventMachine 库，它[没有将其列为依赖](https://github.com/radiospiel/sinatra-sse/blob/master/sinatra-sse.gemspec#L18-L19)项。但是，它确实在其[Gemfile](https://github.com/radiospiel/sinatra-sse/blob/master/Gemfile#L10)中列出了 Thin并且 EventMachine 是[Thin](https://github.com/macournoyer/thin/blob/master/thin.gemspec#L23)的核心依赖项。

Puma 的并发模型[完全不同](https://github.com/puma/puma#description)。事实上，您会在项目的[README](https://github.com/puma/puma/blob/master/README.md)顶部找到以下语句：

> Puma 仍然通过允许并行运行阻塞 IO 来提高 MRI 的吞吐量（基于 EventMachine 的服务器，例如 Thin 关闭了此功能，需要您使用特殊的库）。

**编辑**

如果您有兴趣了解有关 Rack、Rails、Puma 和 SSE 的更多信息，您可能会喜欢Aaron Patterson 的[这篇精彩的博客文章](http://tenderlovemaking.com/2012/07/30/is-it-live.html)，他是 Ruby/Rails 的核心成员和全能的家伙。

# ios - UICollectionView 布局不一致，UICollectionViewFlowLayout

> ID：15749328
> 
> 赞同：8
> 
> 时间：2013-04-01T18:32:20.253
> 
> 标签：ios, objective-c, uicollectionview, uicollectionviewlayout

我无法以一致的方式在 UICollectionView 中显示单元格。单元格的初始显示是正确的，但是每次用户滚动过去然后返回到一组单元格时，显示都是不正确的。行应该只包含 2 或 1 个单元格。2 个单元格各占显示宽度的一半，1 个单元格占全宽。

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    return [self preferredSizeForIndexPath:indexPath];
}

- (CGSize)preferredSizeForIndexPath:(NSIndexPath *)indexPath {

    BOOL isLastObjectInSection = NO;
    NSString *sectionKey = [[arrCollectionData[indexPath.section] allKeys] objectAtIndex:0];
    DLog(@"SectionKey: %@", sectionKey);
    NSArray *arrSection = [arrCollectionData[indexPath.section] objectForKey:sectionKey];
    DLog(@"ArrSection: %@", arrSection);

    if ( arrSection[indexPath.row] == arrSection.lastObject ) {
        if( arrSection.count % 2 != 0 ) {
            isLastObjectInSection = YES;
        }
    }

    CGSize cellSize = CGSizeZero;
    if (UIDeviceOrientationIsLandscape([[UIDevice currentDevice] orientation])) {
        if (isLastObjectInSection == YES) {
            cellSize = CGSizeMake(IPAD_BADGE_WIDTH_LANDSCAPE_WIDE, IPAD_BADGE_HEIGHT_LANDSCAPE_WIDE);
        } else {
            cellSize = CGSizeMake(IPAD_BADGE_WIDTH_LANDSCAPE, IPAD_BADGE_HEIGHT_LANDSCAPE);
        }
    } else {
        if (isLastObjectInSection == YES) {
            cellSize = CGSizeMake(IPAD_BADGE_WIDTH_WIDE, IPAD_BADGE_HEIGHT_WIDE);
        } else {
            cellSize = CGSizeMake(IPAD_BADGE_WIDTH, IPAD_BADGE_HEIGHT);
        }
    }
    DLog(@"CellSize: %@", NSStringFromCGSize(cellSize));
    return cellSize;

} 
```

以下是收集数据的示例。

```
Printing description of self->arrCollectionData:
<__NSArrayI 0x94bbc40>(
{
    "March 12, 2013" =     (
        "<FMLeafTimelineContainer: 0x94b2430>",
        "<FMLeafTimelineContainer: 0x94b3670>"
    );
},
{
    "February 25, 2013" =     (
        "<FMLeafTimelineContainer: 0x94b4500>"
    );
},
{
    "February 14, 2013" =     (
        "<FMLeafTimelineContainer: 0x94b48f0>",
        "<FMLeafTimelineContainer: 0x94b3a60>"
    );
},
{
    "February 12, 2013" =     (
        "<FMLeafTimelineContainer: 0x94b3ce0>",
        "<FMLeafTimelineContainer: 0x94b2b00>"
    );
},
{
    "February 4, 2013" =     (
        "<FMCommunityTimelineContainer: 0x94b4e90>",
        "<FMCommunityTimelineContainer: 0x94b5050>",
        "<FMCommunityTimelineContainer: 0x94b5f70>"
    );
},
{
    "January 30, 2013" =     (
        "<FMCommunityTimelineContainer: 0x94b6ad0>",
        "<FMCommunityTimelineContainer: 0x94b5a90>"
    );
},
{
    "January 24, 2013" =     (
        "<FMCommunityTimelineContainer: 0x94b5d00>",
        "<FMCommunityTimelineContainer: 0x94b6d90>"
    );
},
{
    "January 22, 2013" =     (
        "<FMCommunityTimelineContainer: 0x94b6440>"
    );
},
{
    "January 21, 2013" =     (
        "<FMCommunityTimelineContainer: 0x94b6260>",
        "<FMCommunityTimelineContainer: 0x94b62e0>",
        "<FMCommunityTimelineContainer: 0x94b70c0>",
        "<FMCommunityTimelineContainer: 0x94b55a0>",
        "<FMCommunityTimelineContainer: 0x94b82d0>",
        "<FMCommunityTimelineContainer: 0x94b78b0>"
    );
},
{
    "December 20, 2012" =     (
        "<FMCommunityTimelineContainer: 0x94b53f0>"
    );
},
{
    "December 6, 2012" =     (
        "<FMCommunityTimelineContainer: 0x94b7200>"
    );
},
{
    "December 4, 2012" =     (
        "<FMCommunityTimelineContainer: 0x94b72b0>"
    );
},
{
    "November 19, 2012" =     (
        "<FMCommunityTimelineContainer: 0x94b7ae0>"
    );
}
) 
```

下面的图片都展示了集合视图的同一部分。

![初始显示](https://i.stack.imgur.com/zfoxF.png) ![第一次滚动过去](https://i.stack.imgur.com/AYhKp.png) ![第二次滚动过去](https://i.stack.imgur.com/hW7zO.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:19:55.080

问题是由在实例化时分配了固定帧大小的父子视图引起的。覆盖 setFrame：为 UICollectionView 子类分配子视图帧的值，并且每次单元格出列和重新入队时调用 setFrame：进行相应调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T03:50:22.127

您可以尝试动态计算项目宽度。

```
CGFloat fullItemWidth = self.collectionView.bounds.size.width;
NSInteger itemsPerRow = 2;
CGFloat itemWidth = (fullItemWidth - (itemsPerRow-1)*self.collectionView.collectionViewLayout.minimumInteritemSpacing)/itemsPerRow;
if (UIDeviceOrientationIsLandscape([[UIDevice currentDevice] orientation])) {
    if (isLastObjectInSection == YES) {
        cellSize = CGSizeMake(fullItemWidth, IPAD_BADGE_HEIGHT_LANDSCAPE_WIDE);
    } else {
        cellSize = CGSizeMake(halfItemWidth, IPAD_BADGE_HEIGHT_LANDSCAPE);
    }
} else {
    if (isLastObjectInSection == YES) {
        cellSize = CGSizeMake(fullItemWidth, IPAD_BADGE_HEIGHT_WIDE);
    } else {
        cellSize = CGSizeMake(halfItemWidth, IPAD_BADGE_HEIGHT);
    }
} 
```

# dojo - Dojo 视图未找到错误

> ID：15749334
> 
> 赞同：0
> 
> 时间：2013-04-01T18:32:40.713
> 
> 标签：dojo, xpages

我的开发服务器在 853 中使用我的第一个移动应用程序没有问题。但是，当我尝试在具有不同视图的第二个数据库中使用它时，我永远无法在视图中打开基础文档。我得到典型的错误：

```
dojox.mobile.view#performTransition: destination view not found: null 
```

我的移动页面是 m_milestoneList，我在 xsp.properties 中设置了页面前缀：

```
xsp.theme.mobile.pagePrefix=m_ 
```

我看不出我的错误在哪里：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xe="http://www.ibm.com/xsp/coreex">

<meta name="viewport" content="user-scalable=no,width=device-width" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<script type="text/javascript">
    $(document).ready(function() {

    if (navigator.userAgent.match(/Android/i)) {
    window.scrollTo(0,0); // reset in case prev not scrolled var
    nPageH = $(document).height(); var nViewH = window.outerHeight;
    if (nViewH > nPageH) { nViewH -= 250;
    $('BODY').css('height',nViewH + 'px'); } window.scrollTo(0,1); }

    });
</script>
<xe:singlePageApp id="singlePageApp1"
    selectedPageName="milestoneList">
    <xe:appPage id="appPage1" pageName="milestoneList">
        <xe:djxmHeading id="djxmHeading1" label="Milestone List"></xe:djxmHeading>
        <xe:dataView id="dataView1" pageName="#milestoneDetails"
            collapsibleDetail="true">
            <xe:this.data>
                <xp:dominoView var="milestoneView"
                    viewName="MilestoneOwner">
                </xp:dominoView>
            </xe:this.data>
            <xe:this.summaryColumn>
                <xe:viewSummaryColumn columnName="Subject"></xe:viewSummaryColumn>
            </xe:this.summaryColumn>
            <xe:this.categoryColumn>
                <xe:viewCategoryColumn columnName="TAT_ADvisor"></xe:viewCategoryColumn>
            </xe:this.categoryColumn>
        </xe:dataView>
    </xe:appPage>
    <xe:appPage id="milestoneDetails" pageName="milestoneDetails"
        resetContent="true">
        <xe:djxmHeading id="djxmHeading2" label="Details"
            back="Back" moveTo="milestoneList">
        </xe:djxmHeading>
        <xp:panel>
            <xp:this.data>
                <xp:dominoDocument var="milestoneDocument"
                    formName="Milestone">
                </xp:dominoDocument>
            </xp:this.data>
            <xp:table>
                <xp:tr>
                    <xp:td>
                        <xp:label value="Acronym:"
                            id="acronym_Label1" for="acronym1">
                        </xp:label>
                    </xp:td>
                    <xp:td>
                        <xp:inputText value="#{milestoneDocument.Acronym}" id="acronym1">
                        </xp:inputText>
                    </xp:td>
                </xp:tr>
            </xp:table>
        </xp:panel>
    </xe:appPage>
</xe:singlePageApp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:02:01.810

我已经在测试数据库中检查了您的代码并且它有效。您是否在新数据库中启用了扩展库？当我尝试导航到移动应用程序中不作为 PageName 存在的页面时，我也遇到了类似的问题。

# ruby-on-rails - Rails 和 respond_with：为什么状态码不对？

> ID：15749335
> 
> 赞同：1
> 
> 时间：2013-04-01T18:32:40.787
> 
> 标签：ruby-on-rails, http, responders

我正在尝试使用裸骨导轨控制器并同时进行更细粒度的控制。如果我正在进行 :new 操作，我会用我的新 @instance 响应，我会得到一个状态代码 200 并呈现 :new 模板。在展会上，同样的东西，不同的模板。到目前为止，一切都很好。但是，在创作过程中，我遇到了一些意想不到的事情。如果新记录成功并且我调用了respond_with，我将被重定向到显示（状态代码302），这是正确的。但是，如果由于记录无效而无法创建新记录，则默认的 respond_with 会通过发出状态代码 200 并呈现新模板来响应。模板是对的，状态码是不对的。在这种情况下，响应代码不应该是 422（不可处理的实体）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:30:42.853

Rails 返回 200 响应，因为它成功呈现了“新”模板。对于非 AJAX 请求，这通常可以正常工作，因为在这种情况下您还将向用户显示验证错误，以便他们知道发生了什么。

您需要 422 响应的唯一原因是，如果信息是通过 AJAX 提交的，并且您的客户端 JavaScript 取决于响应代码来知道该怎么做。就像 Jim 所说，如果需要，您始终可以使用 :status 选项强制呈现响应代码。在默认的“简单”情况下，虽然没有涉及 AJAX，但您可能不需要它。

更新：jQuery 客户端可能会依赖响应代码，方法是在[.ajax](http://api.jquery.com/jQuery.ajax/)函数中包含“错误”回调，或者通过[.ajaxError](http://api.jquery.com/ajaxError/)。

# ios - 如何搜索联系人的电话号码？（地址簿）

> ID：15749339
> 
> 赞同：1
> 
> 时间：2013-04-01T18:32:55.153
> 
> 标签：ios, objective-c, abaddressbook

在我的 iOS 应用程序中，我想找到与姓名匹配的联系人的电话号码。

```
CFErrorRef *error = NULL;

// Create a address book instance.
ABAddressBookRef addressbook = ABAddressBookCreateWithOptions(NULL, error);

// Get all people's info of the local contacts.
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressbook);
CFIndex numPeople = ABAddressBookGetPersonCount(addressbook);
for (int i=0; i < numPeople; i++) {

    // Get the person of the ith contact.
    ABRecordRef person = CFArrayGetValueAtIndex(allPeople, i);
    ## how do i compare the name with each person object?
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T07:45:12.080

您可以使用 获取此人的姓名`ABRecordCopyCompositeName`，并测试搜索字符串是否包含在使用 的姓名中`CFStringFind`。

例如，要查找姓名中带有“Appleseed”的联系人：

```
CFStringRef contactToFind = CFSTR("Appleseed");

CFErrorRef *error = NULL;

// Create a address book instance.
ABAddressBookRef addressbook = ABAddressBookCreateWithOptions(NULL, error);

// Get all people's info of the local contacts.
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressbook);
CFIndex numPeople = ABAddressBookGetPersonCount(addressbook);
for (int i=0; i < numPeople; i++) {

    // Get the person of the ith contact.
    ABRecordRef person = CFArrayGetValueAtIndex(allPeople, i);

    // Get the composite name of the person
    CFStringRef name = ABRecordCopyCompositeName(person);

    // Test if the name contains the contactToFind string
    CFRange range = CFStringFind(name, contactToFind, kCFCompareCaseInsensitive);

    if (range.location != kCFNotFound)
    {
        // Bingo! You found the contact
        CFStringRef message = CFStringCreateWithFormat(kCFAllocatorDefault, NULL, CFSTR("Found: %@"), name);
        CFShow(message);
        CFRelease(message);
    }

    CFRelease(name);
}

CFRelease(allPeople);
CFRelease(addressbook); 
```

希望这可以帮助。尽管您的问题是 5 个月前提出的...

# android - Android 上的 NoHttpResponseException 问题

> ID：15749341
> 
> 赞同：1
> 
> 时间：2013-04-01T18:33:03.330
> 
> 标签：android, exception, httpclient, android-async-http

我正在开发一个使用[android-async-http](http://loopj.com/android-async-http/)作为 http 客户端的 Android 应用程序。我的服务器运行正常，但在我的 Android 设备 (2.3.6) 中测试时经常会引发异常：

```
org.apache.http.NoHttpResponseException: The target server failed to respond
at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:85)
at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:174)
at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:179)
at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235)
at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259)
at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:279)
at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:421)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
at com.loopj.android.http.AsyncHttpRequest.makeRequest(AsyncHttpRequest.java:76)
at com.loopj.android.http.AsyncHttpRequest.makeRequestWithRetries(AsyncHttpRequest.java:95)
at com.loopj.android.http.AsyncHttpRequest.run(AsyncHttpRequest.java:57)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:444)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
at java.lang.Thread.run(Thread.java:1019) 
```

# android - 崩溃应用程序启动之前的活动后

> ID：15749348
> 
> 赞同：2
> 
> 时间：2013-04-01T18:33:21.613
> 
> 标签：android

假设我有 3 个活动 A、B 和 c。应用程序以 AI 打开 B 比我打开 C 开始。比 C 中的崩溃。而不是完全关闭应用程序 android 打开活动 B，这对我不利，因为 B 不能很好地工作（可能代码不是很好好的）。无论如何，我希望崩溃能够杀死应用程序，而不仅仅是启动之前的活动。那可能吗？顺便说一句，这个应用程序很大，单独处理每个活动对我来说并不是最好的解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T19:33:38.377

是的，您可以轻松做到。

**活动 A：** 调用 B 后使用完成关键字：

```
Intent i = new Intent(this,B_Activity.class);
startActivity(i);
finish(); 
```

同样在**活动 B 中：**

```
Intent i = new Intent(this,C_Activity.class);
startActivity(i);
finish(); 
```

现在将导致**Activity C**崩溃的代码放在**try catch 块中**

```
try
{
}
catch(Exception e)
{
     finish();
} 
```

如果**Activity C**中有任何问题，它将被捕获并且**Activity C**将完成，然后将转到调用活动，即**B**，它也将完成，同样，**Activity A**也完成。因此，当应用程序重新启动时，它将从 Activity A 启动。

# jquery - 淡出和隐藏崩溃的 Chrome

> ID：15749350
> 
> 赞同：0
> 
> 时间：2013-04-01T18:33:31.930
> 
> 标签：jquery, fadein, fadeout

试图让淡入淡出/隐藏在 chrome 中工作，当在 chrome 中运行此代码时，它会冻结浏览器，但它在 IE10 和 Firefox 中工作，基本上是一个简单的 div 从屏幕上滚动并淡出，任何帮助将不胜感激。此外，动画结束后 div 会恢复到原来的位置，这就是为什么我要淡出（也看起来更干净）的原因。

```
jQuery.noConflict();
jQuery('.dildobox').click(function () {

var v = document.getElementsByTagName("audio")[0];
v.play();

jQuery("div.dildobox").html('<img src="images/dildo/standstillhop.gif" alt="" />');
jQuery(this).animate({
    left: '-700px',
}, 3000);

jQuery("div#dildodialog").fadeIn(1500).dialog({
    buttons: {
        "Yeah, Baby!": function () {
            jQuery("div#dildodialog").dialog("close");
        }
    }
}).prev().find(".ui-dialog-titlebar-close").hide();

jQuery("div.dildobox").fadeOut(500);

}); 
```

CSS如下：

```
#dildocache{height:1px;width:1px;display:inline-block;}
#dildocontainer {height: 10px;margin: 0;padding: 0;position: relative;width: 10px;}
.dildo{display:inline-block;height: 50px;width: 50px;position:absolute;}
.dildobox {
font-size: 50px;
height: 71px;
position: relative;
text-align: center;
width: 34px;
}
#dildodialog{font-weight: bold;text-align:center;background: url("../images/dildobg.png") repeat scroll 50% top #f8f8f8;color:#000;}
.ui-dialog-buttonset .ui-button-text-only, .ui-widget-header{background: none repeat-x scroll 50% 50% #ad0401!important; color:#fff;}
.ui-dialog-buttonpane{background: none repeat scroll 50% 50% #ad0401!important;}

/* Dildo Page Specific Placements */
.moduletablewelcomedildo #dildocontainer{left: 275px;top: -30px;} 
```

和 HTML：

```
<div id="dildocache">
<img src="images/dildo/standstillhop.gif" alt="standstillhop" width="1" height="1" style="visibility:hidden;"/></div>
<div id="dildodialog" title="Where's Dildo?" style="display:none;">
<p>Congratulations! You've found one but there's more to find!<br/>Keep poking around!</p>
</div>
<div id="dildocontainer">
<div id="dildobox2" class="dildobox"><img src="images/dildo/smalldildo.png" alt="" /></div>
</div>
<audio src="http://www.accentuateit.com.au/addon_domains/allowe/images/dildo/yeahbaby.ogg"></audio> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:21:15.887

好的，我设法通过删除有问题的 HIDE 和 FADEOUT 变化并简单地使用 opacity: 0 作为动画的选项来修复它，这也让我在动画运动的过程中淡出这很好:) 如果你想看结果：jsfiddle.net/Eb3Q8/7 不知道为什么它在我的网站上而不是在 JSFiddle 上崩溃，但是无论如何都修复了 :)

# c# - WPF从其他窗口添加数据网格行

> ID：15749351
> 
> 赞同：0
> 
> 时间：2013-04-01T18:33:39.393
> 
> 标签：c#, wpf, wpfdatagrid

我有一个添加电影窗口：

```
 private void button1_Click(object sender, RoutedEventArgs e)
        {
            string name = txtName.Text;
            string genre = txtGenre.Text;
            bool dubbed = checkBox1.IsChecked.Value;
            bool is3d = checkBox2.IsChecked.Value;
            MessageBox.Show(name + " " + genre);
            var main = new MainWindow();
            main.CallbackAddMovie(name, genre, dubbed, is3d);
            this.Close();
        } 
```

和回调：

```
 public class DataItem
        {
            public string name { get; set; }
            public string genre { get; set; }
            public bool dubbed { get; set; }
            public bool is3d { get; set; }
        }

        public void CallbackAddMovie(string mname, string mgenre, bool mdubbed, bool mis3d)
        {
            dataGrid1.Items.Add(new DataItem { name = "Movie name2", genre = "Action", dubbed = true, is3d = true });
            dataGrid1.Items.Add(new DataItem { name = mname, genre = mgenre, dubbed = mdubbed, is3d = mis3d });
            dataGrid1.SelectAll();
        } 
```

添加电影时，我得到消息框，但数据网格中没有新项目。什么是磨损？

**编辑：
这是我的数据网格创建：**

```
 var colname = new DataGridTextColumn();
            colname.Header = "Name";
            colname.Binding = new Binding("name");
            dataGrid1.Columns.Add(colname);

            var colgenre = new DataGridTextColumn();
            colgenre.Header = "Genre";
            colgenre.Binding = new Binding("genre");
            dataGrid1.Columns.Add(colgenre);

            var coldubbed = new DataGridCheckBoxColumn();
            coldubbed.Header = "Dubbed";
            coldubbed.Binding = new Binding("dubbed");
            dataGrid1.Columns.Add(coldubbed);

            var col3d = new DataGridCheckBoxColumn();
            col3d.Header = "3D";
            col3d.IsReadOnly = true;
            col3d.Binding = new Binding("is3d");
            dataGrid1.Columns.Add(col3d);

            // create and add two lines of fake data to be displayed, here
            dataGrid1.Items.Add(new DataItem { name = "Movie name", genre = "Action", dubbed = true, is3d = true }); 
```

**编辑：**
完整项目：
MainWindow.cs：
[http](http://pastebin.com/Xrr6DjuH) ://pastebin.com/Xrr6DjuH MainWindow.xaml ：
[http](http://pastebin.com/SJS4akU4) : //pastebin.com/SJS4akU4 AddMovie：
[http ://pastebin.com/J7C5ub8N](http://pastebin.com/J7C5ub8N)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:50:39.473

`Items.Add()`您应该创建一个集合，如`List<>`or`ObservableCollection<>`并将其分配为数据网格的数据源，而不是使用 直接将项目添加到数据网格。然后，无需向`DataItem`数据网格添加新对象，只需向数据源添加一个新对象，网格将自动更新。

WPF 旨在用于 MVC 模式，您使用它更像是 WinForms。

编辑：这是一个示例，显示 WPF 在这种情况下如何工作

主窗口.xaml.cs

```
public partial class MainWindow : Window
{

    ObservableCollection<ListObject> _listDatasource;
    public MainWindow()
    {
        InitializeComponent();
        _listDatasource = new ObservableCollection<ListObject>();
        listView1.ItemsSource = _listDatasource;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        AddWindow winAdd = new AddWindow();
        winAdd.AddItem += new AddItemHandler(winAdd_AddItem);
        winAdd.Show();
    }

    void winAdd_AddItem(object sender, ListObject itemToAdd)
    {
        _listDatasource.Add(itemToAdd);
    }
} 
```

主窗口.xaml

```
<Grid>
        <ListView Height="163" HorizontalAlignment="Left" Margin="34,56,0,0" Name="listView1" VerticalAlignment="Top" Width="322" >
            <ListView.View>

                <GridView x:Name="gridList" >
                    <GridViewColumn x:Name="colValue"  DisplayMemberBinding="{Binding Path=ListValue}" Header="Value" />

                </GridView>
            </ListView.View>
        </ListView>
        <Button Content="Open Add Window" Height="23" HorizontalAlignment="Left" Margin="47,27,0,0" Name="button1" VerticalAlignment="Top" Width="177" Click="button1_Click" />
    </Grid> 
```

AddWindow.xaml

```
 <Grid>
        <TextBox Height="23" HorizontalAlignment="Left" Margin="57,71,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" />
        <Label Content="Add this:" Height="28" HorizontalAlignment="Left" Margin="57,46,0,0" Name="label1" VerticalAlignment="Top" />
        <Button Content="Add it" Height="23" HorizontalAlignment="Left" Margin="102,114,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    </Grid> 
```

AddWindow.xaml.cs

```
 public delegate void AddItemHandler(object sender, ListObject itemToAdd);

    public partial class AddWindow : Window
    {
        public event AddItemHandler AddItem;
        public AddWindow()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            ListObject itemToAdd = new ListObject();
            itemToAdd.ListValue = textBox1.Text;
            AddItem(this, itemToAdd);
        }
    } 
```

列表对象.cs

```
 public class ListObject
    {
        private string _listValue;

        public string ListValue
        {
            get { return _listValue; }
            set { _listValue = value; }
        }
    } 
```

# python - BeautifulSoup 中的嵌套标签 - Python

> ID：15749354
> 
> 赞同：6
> 
> 时间：2013-04-01T18:33:47.677
> 
> 标签：python, beautifulsoup

我在网站和 stackoverflow 上查看了许多示例，但找不到针对我的问题的通用解决方案。我正在处理一个非常混乱的网站，我想抓取一些数据。标记看起来像这样：

```
...
<body>
...
    <table>
        <tbody>
            <tr>
            ...
            </tr>
            <tr>
                <td>
                ...
                </td>
                <td>
                    <table>
                        <tr>
                        ...
                        </tr>
                        <tr>
                            <td>
                                <a href="...">Some link</a>
                                <a href="...">Some link</a>
                                <a href="...">Some link</a>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </tbody>
    </table>
</body> 
```

我遇到的问题是，没有一个元素具有我可以选择以缩小某些范围的属性。在每个“...”中可能有类似的标记，例如 more`<a>`之类的`<table>`。

我知道这`table tr table tr td a`是我需要的链接所独有的，但是 BeautifulSoup 将如何获取这些链接？我不确定如何在不执行一堆单独的代码行的情况下获取嵌套标签。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-01T18:40:07.333

您可以在以下位置使用[CSS 选择器`select`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors)：

```
soup.select('table tr table tr td a') 
```

* * *

```
In [32]: bs4.BeautifulSoup(urllib.urlopen('http://google.com/?hl=en').read()).select('#footer a')
Out[32]:
[<a href="/intl/en/ads/">Advertising Programs</a>,
 <a href="/services/">Business Solutions</a>,
 <a href="https://plus.google.com/116899029375914044550" rel="publisher">+Google</a>,
 <a href="/intl/en/about.html">About Google</a>,
 <a href="http://www.google.com/setprefdomain?prefdom=RU&amp;prev=http://www.google.ru/&amp;sig=0_3F2sRGWVktTCOFLA955Vr-AWlHo%3D">Google.ru</a>,
 <a href="/intl/en/policies/">Privacy &amp; Terms</a>] 
```

# java - ObjectDB 关系船

> ID：15749359
> 
> 赞同：0
> 
> 时间：2013-04-01T18:34:02.107
> 
> 标签：java, jpa, objectdb

我正在尝试将关系“OneToMany”添加到我正在创建的数据库中，以测试 ObjectDB 是否对我有好处。

到目前为止我所尝试的：

```
@Entity
public class Parent {
    @Id
    private int parentID;
    private int childFK;
    Set<Child> children;

    public Parent(int p,int c) {
    this.parentID = p;
    this.childFK = c;
    }

    @OneToMany(orphanRemoval=true)
    @JoinColumn(name="childFK")
    public Set<Child> getChildren(){
        return childern;
    }
} 
```

这个子类是：

```
@Entity
public class Child {
    @Id
    private int childID;
    private String name;

    public Child(int c,String n) {
    this.childID = c;
    this.name = n;
    }
} 
```

我的主要方法是：

```
 EntityManagerFactory emf = Persistence.createEntityManagerFactory("$objectdb/db/test.odb");
   EntityManager em = emf.createEntityManager();

   em.getTransaction().begin();

   Parent p = new Parent(01,02);
   em.persist(p);
   Child c = new Child(02,"bob");
   em.persist(c);

   em.getTransaction().commit(); 
```

这将创建数据库没有问题，但不存在任何关系。这是文档说明如何执行此操作。

我还尝试将 child 的实际实例添加到数据库中。这有点起作用，因为它知道有一个可用的数据库实例，但它不知道如何使用它。

我试过查询：

```
 SELECT p.getChildren() FROM Parent p 
```

这只是不返回这样的方法 getChildren()。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:18:28.840

你的测试有两个问题。修复这些错误后，父子关系将按预期创建。

第一个问题，在 JPA 中您可以使用字段访问或属性访问，但不允许混合使用它们。如果您使用 @Id 注释字段，那么您正在使用字段访问。在这种情况下，其他注释也应该在字段上而不是在属性方法上。

因此，您的 Parent 类应定义为：

```
@Entity
public static class Parent {
    @Id
    private int parentID;
    private int childFK;
    @OneToMany(orphanRemoval=true)
    // @JoinColumn(name="childFK") ignored by ObjectDB
    Set<Child> children;

    public Parent(int p,int c) {
        this.parentID = p;
        this.childFK = c;
    }

    public Set<Child> getChildren(){
        return children;
    }
} 
```

第二个问题是 main 方法持久化了两个对象，一个父对象和一个子对象，但没有连接它们。您必须添加一行代码来连接这两个对象：

```
 EntityManager em = emf.createEntityManager();

    em.getTransaction().begin();

    Parent p = new Parent(01,02);
    em.persist(p);
    Child c = new Child(02,"bob");
    em.persist(c);
    p.children = Collections.singleton(c); // connect the child to the parent

    em.getTransaction().commit(); 
```

在使用这些修复运行测试之后，将使用该关系创建一个 ObjectDB 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T19:47:02.620

我尝试了解决方案 p.children = Collections.singleton(c) 但它对我不起作用。这是我对这个问题的看法……让我们像上面的例子一样使用父对象和类对象。

```
@Entity
public class Parent { 
  @Id
  private int parentID;
  private int childFK;

  Set<Child> children;

  public Parent(int p,int c) {
    this.parentID = p;
    this.childFK = c;
  }

  . . .

  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
  @JoinColumn(name="childFK")
  public Set<Child> getChildren(){
    return childern;
  }
  public void setChildren(Set<Child> children) {
    this.children = children;
  }
}

@Entity
public class Child {
  @Id
  private int childID;      
  private String name;
  private int parentID;

  public Child(int c,String n, int p) {
    this.childID = c;
    this.name = n;
    this.parentID = p;
  }
} 
```

在现实世界的场景中，您需要从某个来源获取 childID 值，在这种情况下，让我们从 Child 类中获取一个 id。

```
public int childLastID(EntityManager em){
  TypedQuery<Child> query = em.createQuery("SELECT c FROM Child c order by i.childID 
                                            DESC", Child.class);

  List<Child> chldx = query.setFirstResult(0).setMaxResults(1).getResultList();

  if(chldx == null) return 100;  // In case your Child is new and empty 
                                 // lets start with 100

  return (chldx.get(0)).getId();                                    
} 
```

现在让我们填充那些父子类...

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("...");            
EntityManager em = emf.createEntityManager();

int ix = childLastID(em);

em.getTransaction().begin();
Parent p = new Parent(01, ++ix); // increment the last ID to make sure it's unique

Set<Child> cset = new HashSet<Child>();   
Child c1 = new Child(ix,"bob", 01);
cset.add(c1);

Child c2 = new Child(++ix,"beb", 01);
cset.add(c2);

Child c3 = new Child(++ix, "bib", 01);
cset.add(c3)

p.setChildren(cset);
em.persist(p)    

em.getTransaction().commit(); 
```

现在， Child c1 ... c3 的集合将保留在 Parent 类上。我在 c2 和 c3 上增加了 ++ix，因为它们需要在 Child 类上有一个唯一的 id。我在 Child 类上添加了一个 parentID，作为 Parent 和 Child 类的参考。

我使用 FetchType.EAGER 以便在检索 Parent 时也会检索这些 Child 引用。

实体类的 ID 也应该是 long 而不是 int 类型，所以只需将那些 int 更改为 long 原始类型。

希望这会有所帮助...

纳尔逊·德奥格拉西亚斯

# iphone - 在 StoryBoard 中调整 UITabBar 按钮的大小

> ID：15749367
> 
> 赞同：0
> 
> 时间：2013-04-01T18:34:34.223
> 
> 标签：iphone, ios, objective-c, cocoa, ios6

我正在尝试获取设置为 MainViewController 的 UITabBar 上的按钮大小，但是，我想用我得到的图像调整按钮的大小，它接缝有点宽。这可以从故事板门户完成还是必须从 XCode 完成，如果可以，如何完成？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:53:55.173

据我所知，不可能使用 UITabBar 中的任何标准函数来调整 UITabBarItem 的大小。

但这里有一些有趣的网站可以帮助您定制解决方案：

*   [Twitter iPhone App 如何实现自定义标签栏？](http://idevrecipes.com/2011/01/04/how-does-the-twitter-iphone-app-implement-a-custom-tab-bar/)（食谱）

*   [自定义 tabBar](https://github.com/boctor/idev-recipes/tree/master/CustomTabBar) (gihub)

*   [iPhone 标签栏](http://www.significantpixels.com/2011/04/04/the-iphone-tab-bar/)（有效像素）

希望对你有帮助，

干杯!

# c# - 如何在 C# 电子邮件中将正文格式设置为 HTML

> ID：15749368
> 
> 赞同：1
> 
> 时间：2013-04-01T18:34:34.313
> 
> 标签：c#, html, email, smtp

我有以下代码来创建和发送电子邮件：

```
var fromAddress = new MailAddress("email@address.com", "Summary");
var toAddress = new MailAddress(dReader["Email"].ToString(), dReader["FirstName"].ToString());
const string fromPassword = "####";
const string subject = "Summary";
string body = bodyText;

//Sets the smpt server of the hosting account to send
var smtp = new SmtpClient
{
    Host = "smpt@smpt.com",
    Port = 587,
    DeliveryMethod = SmtpDeliveryMethod.Network,
    UseDefaultCredentials = false,
    Credentials = new NetworkCredential(fromAddress.Address, fromPassword)                        
};
using (var message = new MailMessage(fromAddress, toAddress)
{                       
    Subject = subject,
    Body = body
})
{
    smtp.Send(message);
} 
```

如何将邮件正文设置为 HTML？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T18:35:55.117

`MailMessage.[IsBodyHtml](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.isbodyhtml.aspx)`（来自 MSDN）：

> 获取或设置一个值，该值指示邮件正文是否为 Html。

```
using (var message = new MailMessage(fromAddress, toAddress)
{                       
    Subject = subject,
    Body = body,
    **IsBodyHtml = true** // this property
})
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:36:58.487

只需将 MailMessage.BodyFormat 属性设置为 MailFormat.Html，然后将 html 文件的内容转储到 MailMessage.Body 属性：

```
using (StreamReader reader = File.OpenText(htmlFilePath)) // Path to your 
{                                                         // HTML file
    MailMessage myMail = new MailMessage();
    myMail.From = "from@microsoft.com";
    myMail.To = "to@microsoft.com";
    myMail.Subject = "HTML Message";
    myMail.BodyFormat = MailFormat.Html;

    myMail.Body = reader.ReadToEnd();  // Load the content from your file...
    //...
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-10T13:01:20.943

设置`mailMessage.IsBodyHtml`为真。然后您的邮件消息将以 HTML 格式呈现。

# android - 服务发现失败[Ljava.lang.StackTraceElement

> ID：15749372
> 
> 赞同：0
> 
> 时间：2013-04-01T18:34:49.580
> 
> 标签：android, eclipse, bluetooth

我刚刚使用 Android 和蓝牙完成了我的应用程序的开发，您可以发送消息共享文件并与蓝牙聊天。这是一个非常奇怪的应用程序，每次它显示一个错误，而其他时候它工作得很好。这是我的问题的顶部

> E/BluetoothEventLoop.cpp(298): onCreateDeviceResult: D-Bus error: org.bluez.Error.AlreadyExists (Already Exists)`

第二个错误：

> 服务发现失败[Ljava.lang.StackTraceElement

我的代码：

```
 private BluetoothSocket getLaSocketConnecte(BluetoothDevice myBtServer, UUID uuidToTry)           
    { 
      BluetoothSocket myBSock; 
      try 
      { 
        if (BtAdapter.isDiscovering()) 
        { 
          BtAdapter.cancelDiscovery(); 
        } 
        myBSock = myBtServer.createRfcommSocketToServiceRecord(uuidToTry);
        myBSock.connect(); 
        return myBSock; 
      } catch (Exception e) { 
        Log.i(TAG,"IOException . Msg d'erreur :" + e.getMessage()+ e.getStackTrace()); 
      } 
      return null; 
    } 
```

这是日志：

```
04-01 20:38:28.079: I/Connexion(9240): Msg d'erreur : Msg d erreur 

:Service discovery failed
04-01 20:38:28.079: I/Connexion(9240): java.io.IOException: Service discovery failed
04-01 20:38:28.079: I/Connexion(9240):  at android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:403)
04-01 20:38:28.079: I/Connexion(9240):  at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:213)
            myBSock.connect();
04-01 20:38:28.079: I/Connexion(9240):  at com.Android.Bt.Connexion.getLaSocketConnecte(Connexion.java:190)
04-01 20:38:28.079: I/Connexion(9240):  at com.Android.Bt.Connexion.connecterA(Connexion.java:149)
            btSock = getLaSocketConnecte(btDevice, uuidList.get(i));
04-01 20:38:28.079: I/Connexion(9240):  at com.Android.Bt.Connexion.ConnecterTousLesAppreils(Connexion.java:293)
            connecterA(device.getKey());
04-01 20:38:28.079: I/Connexion(9240):  at com.Android.Bt.Connexion.EnvoyeBroadcastMsg(Connexion.java:428)
04-01 20:38:28.079: I/Connexion(9240):  at com.Android.Bt.Connexion.broadcastMessage(Connexion.java:205)
04-01 20:38:28.079: I/Connexion(9240):  at com.Android.Bt.BtPaquetReceiver.onReceive(BtPaquetReceiver.java:28) 
```

你能帮我找出解决方案吗？

谢谢 ：）

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-23T11:22:32.347

当时的问题与蓝牙 API 有关！

# php - PHP preg_replace 带有特殊字符

> ID：15749374
> 
> 赞同：0
> 
> 时间：2013-04-01T18:34:53.017
> 
> 标签：php, regex

我有如下内容，我需要在其上运行 preg_replace：

```
Test Title|
test content

John's title - has a hyphen|
john's content

Last one... I promise|
last content 
```

我在内容上使用以下 preg_replace 正则表达式来获取所有以“|”结尾的行 并用标签包装它。

```
preg_replace("/([a-zA-Z][a-zA-Z-'\,-\d\s\w]+\|)/", '<h3 id="${1}">${1}</h3>', $content); 
```

我遇到的问题是正则表达式没有抓住连字符或省略号。我从另一个开发人员那里继承了这段代码，所以我非常愿意丢弃它并重新开始，但如果可以的话，我想尝试让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:45:54.983

那个正则表达式似乎有很多不必要的问题。正如 Otala 所说，hypen 没有转义，管道没有转义，它也没有在寻找句号。它还对连字符进行了两次检查。

您应该通过简单地查找管道中的所有非管道字符来简化它：

```
preg_replace("/([^|\r\n]+)\|/", '<h3 id="${1}">${1}</h3>', $content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:41:52.730

连字符没有被转义，正则表达式没有扫描句点。

`/([a-zA-Z][a-zA-Z-'\,\.\-\d\s\w]+\|)/`应该管用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:45:42.970

可以稍微简化您的正则表达式： `preg_replace("/([^|\n\r]+\|\n)/", '${1}', $content);`

# mysql - 显示所有表数据mysql

> ID：15749379
> 
> 赞同：-2
> 
> 时间：2013-04-01T18:35:18.347
> 
> 标签：mysql, relationships

我有 6 个表，它们都包含学生信息。表名：学生详细信息、医生详细信息、录取详细信息、previous_school、父亲详细信息、母亲详细信息。这些表中的每一个都包含一个唯一的 ID。

要将所有这些表合二为一，我有一个 student_info 表，其中包含上述 6 个表中的所有 id。这些链接到相应表中的唯一 ID。

我需要显示所有学生信息，我知道我会使用左连接和右连接，我只是不确定 mysql 如何读取 student_info 表中的 id 并从相应表中获取所有信息，以便用户查看所有学生信息以一种形式。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:39:10.430

**编辑：** [http](http://sqlfiddle.com/#!2/c5489/2) ://sqlfiddle.com/#!2/c5489/2 （工作示例）

您不需要将所有`id`s 放在每个表中，而是每个表都有自己的主键 ID - 保证是唯一的，并且您很可能会使用`inner join`

```
Table A(user_id int, user_name varchar(255))
Table B(student_id int, student_email varchar(255)) 
```

然后选择你想要的数据，使用相关的 ID 加入：

```
Select user_name from TableA
INNER JOIN TableB ON
TableA.user_id = TableB.student_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:40:21.270

您必须指定连接才能使这项工作：

```
select * from student, student_info where student_info.student_id = student.id 
```

这告诉服务器从两个表中返回所有信息，其中学生 ID 与学生信息中存储的学生 ID 匹配。

在这里，我假设学生是一个 1:many 与 student_info （其中至少有一个，但每个学生信息可以是多个学生信息行）。

# matrix - 三对角矩阵的 LU 分解 (Java)

> ID：15749380
> 
> 赞同：0
> 
> 时间：2013-04-01T18:35:18.947
> 
> 标签：matrix, decomposition

我正在创建一个类来表示三对角矩阵。这些是在对角线上有一组非零值的方阵，在上下对角线上有一组非零值，然后在其他任何地方都为零。

为了存储它们，我使用了三个一维数组：每个对​​角线一个。

这是一个例子：

```
d_0   u_0    0     0
l_0   d_1   u_1    0
 0    l_1   d_2   u_2
 0     0    l_2   d_3 
```

因此，a_i 有一个数组，u_i 有一个数组，l_i 有一个数组。不存储零。

我需要一个算法来执行 LU 分解。LU 分解通常会产生以下两个矩阵：

```
 1     0     0    0
a_0    1     0    0
 0    a_1    1    0
 0     0    a_2   1 

b_0   c_0    0     0
 0    b_1   c_1    0
 0     0    b_2   c_2
 0     0     0    b_3 
```

然而，1 和零一样没有用，它们只是浪费空间，所以我要求算法返回以下三对角矩阵作为 LU 分解：

```
b_0   c_0    0     0
a_0   b_1   c_1    0
0     a_1   b_2   c_2
0      0    a_2   b_3 
```

我设法获得了以下等式：

```
c_i = u_i    for all i

b_0=d_0

l_i = a_i * b_i    for all i

d_(i+1) = a_i * c_i + b(i+1)    for i>=1 
```

但我不确定如何找到我需要的所有 a_i、b_i 和 c_i 的通用公式。

有谁知道一个很好的、易于编程的算法来为我做这件事。我不是在寻找任何有效的东西，只是最容易编程的东西。

首先十分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:44:51.020

这是家庭作业吗？

为什么要重新发明轮子？使用此链接了解如何使用 LU 分解`C#`。对不起，你必须翻译成 Java

[http://msdn.microsoft.com/en-us/magazine/jj863137.aspx](http://msdn.microsoft.com/en-us/magazine/jj863137.aspx)

```
static double[][] MatrixDecompose(double[][] matrix,
  out int[] perm, out int toggle) {
  ...
} 
```

# sql - VB.Net：如何使用浮点值填充数据库中的组合框

> ID：15749382
> 
> 赞同：0
> 
> 时间：2013-04-01T18:35:25.863
> 
> 标签：sql, vb.net, combobox

我的数据库中有 2 列，表单中有 2 个 ComboBox，它们相互连接。一个包含浮点值，另一个包含 VarChar。我使用下面的代码，它适用于带有 VarChar 的代码，但不适用于带有 float 的代码。怎么了？

```
sqlstr = "SELECT * FROM Student WHERE Code = 2"
DBCmd = New MySql.Data.MySqlClient.MySqlCommand(sqlstr, DBConn)
DBDr = DBCmd.ExecuteReader

While (DBDr.Read())
CBox_TBand.SelectedItem = DBDr("TB")
CBox_State.SelectedItem = DBDr("State")
End While
DBCmd.Dispose()
DBDr.Close() 
```

TB 列包含浮点数，State 列包含 Varchar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:48:37.830

Its possible you are losing formatting when converting from DB's Float to String. Try this:

```
CBox_TBand.SelectedItem = Decimal.Parse(DBDr("TB")).ToString() 
```

# javascript - 使用布尔值仅显示一次引导模式

> ID：15749384
> 
> 赞同：-1
> 
> 时间：2013-04-01T18:35:34.300
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog, bootstrap-modal

我正在使用 Bootstrap 模态，我希望在单击按钮时只显示一次，但如果再次单击按钮则不显示。

我想使用最初为 true 并且单击按钮时设置为 false 的布尔值来执行此操作。我实际上找到了一个解决方案，只是在第一次隐藏后使用 .remove() 删除模态，但我想知道为什么布尔值不起作用。

[http://jsfiddle.net/ncjbx/9/](http://jsfiddle.net/ncjbx/9/)

```
var modalshow = true;
$("#button").click (function () {
    if (modalshow = true) {
        $("#myModal").modal("show"); 
        modalshow = false;
    }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:37:35.140

常见的语法错误。这：

```
if (modalshow = true) { 
```

应该是这样的：

```
if (modalshow == true) { 
```

事实上，你每次都`modalshow`回到过去。`true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:39:22.230

改变

```
if (modalshow = true) { 
```

到

```
if (modalshow == true) { 
```

# haskell - Haskell，使用元组执行 BIDMAS 并打印结果

> ID：15749386
> 
> 赞同：0
> 
> 时间：2013-04-01T18:35:44.863
> 
> 标签：haskell, tuples

嘿伙计们，我被卡住了，我不知道如何继续：

使用元组 (2,4) 必须执行所有操作并打印结果，例如

(2,4,'+',6),(2,4,'*',8)

我的想法是这样的

操作 x = [(x,Ops,finalValue) | x <- x, 操作 <- 操作, finalValue <- finalValue]

但是我不确定如何评估乘法加法等并计算运算结果......有什么建议可以引导我走上正轨吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:59:04.190

所以首先要做的是列出操作及其名称

```
ops = [( (*), '*'), ( (+), '+'), ( (-), '-'), ( div, '/')] 
-- div is integer division 
```

接下来我们处理实际的功能：

```
operations (x, y) = [ (x, y, do something here) | (op, name) <- ops] 
```

Where`do something here`格式化名称和结果。由于这非常简单（提示只需将 op 应用于 x 和 y）我不会给出完整的解决方案。不过，这是一个好的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:23:13.090

第一个解决方案当然可以是

```
operations (x, y) = [ (x, y, '+', x+y), (x, y, '*', x*y) ] 
```

只需扩展更多元组即可进行更多操作。

# delphi - [DCC 致命错误]：F2051 单元 ApFileIO 是用不同版本的 *** 编译的。{ApCollections}TLinkList

> ID：15749388
> 
> 赞同：0
> 
> 时间：2013-04-01T18:35:52.920
> 
> 标签：delphi, delphi-xe

我见过类似的问题，我已经检查过它们，但我没有解决任何问题。我有所有的来源，错误是关于我自己编写的两个单元，它们都在我的应用程序的主目录中。自从我使用编写类的模板方法以来，我一直遇到问题。这是我的应用程序的情况：我编写了一个新单元来实现任何类型的对象的链接列表，所以我编写了`TLinkList<T> = class`它工作得非常好。自从我写这门课以来，我就遇到了这个问题。正常情况下是编译不出来的，我要做的就是在`ApFileIO`单元中注释一些代码并编译程序，然后再次取消注释代码！我厌倦了评论和取消评论我的代码，所以我想知道是否有办法修复这个错误。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:16:03.017

信不信由你，问题是通过不使用`inline`函数来解决的。我删除`inline`了 unit 指令`***`（在问题主题中提到）和`ApCollections`. 这解决了问题。谢谢大家的帮助。

# c++ - 这是否包含内存泄漏？

> ID：15749391
> 
> 赞同：0
> 
> 时间：2013-04-01T18:36:02.310
> 
> 标签：c++, memory-leaks, new-operator, dynamic-memory-allocation, memmove

下面的代码是否包含内存泄漏。我怀疑确实如此，但我用来检测它们的工具（Visual Studio + Parasoft c++ 测试）没有标记任何东西。如果是我将如何解决它？

```
//A dynamically allocated array of char pointers
int numOfStrings = 10, numOfChars = 32;
char** data = new char*[numOfStrings];

//Generate each each individual string
for(int i = 0; i <numOfStrings; i++)
    data[i] = new char[numOfChars];

//moves the elements 1-5 in the array to the right by one
int index = 1, boundary = 5, sizeToMove = (boundary - index) * sizeof(numOfChars);
memmove(&data[index + 1],&data[index],sizeToMove);

delete[] data; 
```

编辑：

我应该提一下，我已经尝试迭代每个单独的字符串，如下所示，但发生了异常。

```
for(int i = 0; i< numOfStrings; i++)
    delete [] data [i]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:40:50.567

是的，它确实。当你删除

```
delete[] data; 
```

您正在释放为数据分配的内存。但是分配的内存

```
data[i] = new char[numOfChars]; 
```

仍然没有被释放。

在删除数据之前，您必须遍历`data`并删除每个。`data[i]`

一般来说，你应该确保你有尽可能多`delete`的`new`s。
**在这里，您`numOfStrings + 1` `new`只有一个 s `delete`。**

**又一泄**

既然你在做

```
int index = 1, boundary = 5, sizeToMove = (boundary - index) * sizeof(numOfChars);
memmove(&data[index + 1],&data[index],sizeToMove); 
```

*（您并没有像您想象的那样移动五个位置，而是移动了四个位置`(5 - 1 = 4)`）*

此操作后

```
data[2] will get the value of data[1]

data[2] <- data[1]
data[3] <- data[2]
data[4] <- data[3]
data[5] <- data[4] 
```

**并且所指向的`data[5]`将丢失。
`data[2], data[1]`将具有相同的值（指向同一个地方）**

这也可以解释为什么当您想通过迭代删除时会出现段错误`data`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:43:55.507

规则是：对于每个“新”，必须有一个相应的“删除”调用。你没有那个，所以你有泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:40:16.153

是的，你有泄漏！

在删除指向它们的指针之前，您必须删除数组中的每个指针。

```
//delete each array
for(int i = 0; i <numOfStrings; i++)
    delete[] data[i];

//this is a single pointer, not an array
delete[] data; 
```

现在你不会有泄漏

# css - 为什么设置宽度时元素会占据整个空间？

> ID：15749392
> 
> 赞同：0
> 
> 时间：2013-04-01T18:36:02.510
> 
> 标签：css

我想知道为什么我设置宽度时一个元素会占据整个宽度？

例如，

```
<div style="width:50px;">

<fieldset>
<legend>test A</legend>

<table>
<tr>
<td><asp:Label ID="Label1" runat="server" Text="Label"></asp:Label> </td><td>
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox> </td>
</tr>

</table>

</fieldset>
</div>

<div style=" width:300px; float:left;">
<fieldset><legend>test2</legend>
<table>
<tr>
<td><asp:Label ID="Label2" runat="server" Text="Label"></asp:Label> </td><td>
<asp:TextBox ID="TextBox2" runat="server"></asp:TextBox> </td>
</tr>
</table>
</fieldset>
</div> 
```

当我检查 chrome 开发者的工具时，我可以看到第二个表不能在第一个表或第一个 div 旁边浮动，因为第一个 div 占据了整个地方，尽管我限制了它的宽度。我知道如果在第一次潜水中使用“float:left”，两个 div 将一个接一个地浮动。但我想知道为什么使用宽度不足以做到这一点？

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:50:26.107

默认情况下，`<div>`'s 是块级元素，这意味着在 CSS 盒子模型中，它们开始一个新行，除非它们是浮动的。

这就是符合标准的浏览器的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:36:52.610

尝试在样式 div 中添加“display: inline-block”。

# vb.net - bin\debug 与 obj\debug：有什么区别？

> ID：15749395
> 
> 赞同：11
> 
> 时间：2013-04-01T18:36:07.490
> 
> 标签：vb.net, visual-studio

Visual Studio 项目中的 bin\debug 和 obj\debug 有什么区别。（在我的例子中是 VB.NET）。我一直在谷歌上闲逛，bin\debug 似乎保存了“官方”编译代码（尽管文件名中有“debug”）。如果这是真的，那么 obj\debug 的内容对开发人员来说很重要吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-01T18:53:09.850

构建解决方案时，Visual Studio 会使用这两个目录。

该`obj`目录包含从您的源代码生成的中间文件。它们是用于生成最终可执行文件的构建块。该目录还充当构建之间的缓存，并允许您进行增量编译。不必在每次构建时都重新创建所有内容，这可以加快构建过程。

该`bin`目录包含构建期间生成的最终可执行文件。这些是您通常会提供给用户的文件。

这两个目录都包含子目录，每个子目录用于构建解决方案配置。默认情况下，它们被称为`Debug`and `Release`，但您可以从 Visual Studio 的配置管理器中创建任意数量的配置。这些允许您根据要执行的构建类型进行不同的配置。

它们很重要，因为 Visual Studio 必须将构建中的文件存储在某处。但是，如果您不想要它们，您可以安全地删除它们。它们将在需要时重新创建。

# malloc - malloc() 在 while 循环中使用

> ID：15749396
> 
> 赞同：1
> 
> 时间：2013-04-01T18:36:14.617
> 
> 标签：malloc

```
#include<stdio.h>
#include<stdlib.h>
#include<math.h>

int main(void){

    int* a;
    int p[]={2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919,7927,7933,7937,7949,7951,7963,7993,8009,8011,8017,8039,8053,8059,8069,8081,8087,8089,8093,8101,8111,8117,8123,8147,8161,8167,8171,8179,8191,8209,8219,8221,8231,8233,8237,8243,8263,8269,
    8273,8287,8291,8293,8297,8311,8317,8329,8353,8363,8369,8377,8387,8389,8419,8423,8429,8431,8443,8447,8461,8467,8501,8513,8521,8527,8537,8539,8543,8563,8573,8581,8597,8599,8609,8623,8627,8629,8641,8647,8663,8669,8677,8681,8689,8693,8699,8707,8713,8719,8731,8737,8741,8747,8753,8761,8779,8783,8803,8807,8819,8821,8831,8837,8839,8849,8861,8863,8867,8887,8893,8923,8929,8933,8941,8951,8963,8969,8971,8999,9001,9007,9011,9013,9029,9041,9043,9049,9059,9067,9091,9103,9109,9127,9133,9137,9151,9157,9161,9173,9181,9187,9199,9203,9209,9221,9227,9239,9241,9257,9277,9281,9283,9293,9311,9319,9323,9337,9341,9343,9349,9371,9377,9391,9397,9403,9413,9419,9421,9431,9433,9437,9439,9461,9463,9467,9473,9479,9491,9497,9511,9521,9533,9539,9547,9551,9587,9601,9613,9619,9623,9629,9631,9643,9649,9661,9677,9679,9689,9697,9719,9721,9733,9739,9743,9749,9767,9769,9781,9787,9791,9803,9811,9817,9829,9833,9839,9851,9857,9859,9871,9883,9887,9901,9907,9923,9929,9931,9941,9949,9967,9973,10007,10009,10037,10039,10061,10067,10069,10079,10091,10093,10099,10103,10111,10133,10139,10141,10151,10159,10163,10169,10177,10181,10193,10211,10223,10243,10247,10253,10259,10267,10271,10273,10289,10301,10303,10313,10321,10331,10333,10337,10343,10357,10369,10391,10399,10427,10429,10433,10453,10457,10459,10463,10477,10487,10499,10501,10513,10529,10531,10559,10567,10589,10597,10601,10607,10613,10627,10631,10639,10651,10657,10663,10667,10687,10691,10709,10711,10723,10729,10733,10739,10753,10771,10781,10789,10799,10831,10837,10847,10853,10859,10861,10867,10883,10889,10891,10903,10909,10937,10939,10949,10957,10973,10979,10987,10993,11003,11027,11047,11057,11059,11069,11071,11083,11087,11093,11113,11117,11119,11131,11149,11159,11161,11171,11173,11177,11197,11213,11239,11243,11251,11257,11261,11273,11279,11287,11299,11311,11317,11321,11329,11351,11353,11369,11383,11393,11399,11411,11423,11437,11443,11447,11467,11471,11483,11489,11491,11497,11503,11519,11527,11549,11551,11579,11587,11593,11597,11617,11621,11633,11657,11677,11681,11689,11699,11701,11717,11719,11731,11743,11777,11779,11783,11789,11801,11807,11813,11821,11827,11831,11833,11839,11863,11867,11887,11897,11903,11909,11923,11927,11933,11939,11941,11953,11959,11969,11971,11981,11987,12007,12011,12037,12041,12043,12049,12071,12073,12097,12101,12107,12109,12113,12119,12143,12149,12157,12161,12163,12197,12203,12211,12227,12239,12241,12251,12253,12263,12269,12277,12281,12289,12301,12323,12329,12343,12347,12373,12377,12379,12391,12401,12409,12413,12421,12433,12437,12451,12457,12473,12479,12487,12491,12497,12503,12511,12517,12527,12539,12541,12547,12553,12569,12577,12583,12589,12601,12611,12613,12619,12637,12641,12647,12653,12659,12671,12689,12697,12703,12713,12721,12739,12743,12757,12763,12781,12791,12799,12809,12821,12823,12829,12841,12853,12889,12893,12899,12907,12911,12917,12919,12923,12941,12953,12959,12967,12973,12979,12983,13001,13003,13007,13009,13033,13037,13043,13049,13063,13093,13099,13103,13109,13121,13127,13147,13151,13159,13163,13171,13177,13183,13187,13217,13219,13229,13241,13249,13259,13267,13291,13297,13309,13313,13327,13331,13337,13339,13367,13381,13397,13399,13411,13417,13421,13441,13451,13457,13463,13469,13477,13487,13499,13513,13523,13537,13553,13567,13577,13591,13597,13613,13619,13627,13633,13649,13669,13679,13681,13687,13691,13693,13697,13709,13711,13721,13723,13729,13751,13757,13759,13763,13781,13789,13799,13807,13829,13831,13841,13859,13873,13877,13879,13883,13901,13903,13907,13913,13921,13931,13933,13963,13967,13997,13999,14009,14011,14029,14033,14051,14057,14071,14081,14083,14087,14107,14143,14149,14153,14159,14173,14177,14197,14207,14221,14243,14249,14251,14281,14293,14303,14321,14323,14327,14341,14347,14369,14387,14389,14401,14407,14411,14419,14423,14431,14437,14447,14449,14461,14479,14489,14503,14519,14533,14537,14543,14549,14551,14557,14561,14563,14591,14593,14621,14627,14629,14633,14639,14653,14657,14669,14683,14699,14713,14717,14723,14731,14737,14741,14747,14753,14759,14767,14771,14779,14783,14797,14813,14821,14827,14831,14843,14851,14867,14869,14879,14887,14891,14897,14923,14929,14939,14947,14951,14957,14969,14983,15013,15017,15031,15053,15061,15073,15077,15083,15091,15101,15107,15121,15131,15137,15139,15149,15161,15173,15187,15193,15199,15217,15227,15233,15241,15259,15263,15269,15271,15277,15287,15289,15299,15307,15313,15319,15329,15331,15349,15359,15361,15373,15377,15383,15391,15401,15413,15427,15439,15443,15451,15461,15467,15473,15493,15497,15511,15527,15541,15551,15559,15569,15581,15583,15601,15607,15619,15629,15641,15643,15647,15649,15661,15667,15671,15679,15683,15727,15731,15733,15737,15739,15749,15761,15767,15773,15787,15791,15797,15803,15809,15817,15823,15859,15877,15881,15887,15889,15901,15907,15913,15919,15923,15937,15959,15971,15973,15991,16001,16007,16033,16057,16061,16063,16067,16069,16073,16087,16091,16097,16103,16111,16127,16139,16141,16183,16187,16189,16193,16217,16223,16229,16231,16249,16253,16267,16273,16301,16319,16333,16339,16349,16361,16363,16369,16381,16411,16417,
    16421,16427,16433,16447,16451,16453,16477,16481,16487,16493,16519,16529,16547,16553,16561,16567,16573,16603,16607,16619,16631,16633,16649,16651,16657,16661,16673,16691,16693,16699,16703,16729,16741,16747,16759,16763,16787,16811,16823,16829,16831,16843,16871,16879,16883,16889,16901,16903,16921,16927,16931,16937,16943,16963,16979,16981,16987,16993,17011,17021,17027,17029,17033,17041,17047,17053,17077,17093,17099,17107,17117,17123,17137,17159,17167,17183,17189,17191,17203,17207,17209,17231,17239,17257,17291,17293,17299,17317,17321,17327,17333,17341,17351,17359,17377,17383,17387,17389,17393,17401,17417,17419,17431,17443,17449,17467,17471,17477,17483,17489,17491,17497,17509,17519,17539,17551,17569,17573,17579,17581,17597,17599,17609,17623,17627,17657,17659,17669,17681,17683,17707,17713,17729,17737,17747,17749,17761,17783,17789,17791,17807,17827,17837,17839,17851,17863,17881,17891,17903,17909,17911,17921,17923,17929,17939,17957,17959,17971,17977,17981,17987,17989,18013,18041,18043,18047,18049,18059,18061,18077,18089,18097,18119,18121,18127,18131,18133,18143,18149,18169,18181,18191,18199,18211,18217,18223,18229,18233,18251,18253,18257,18269,18287,18289,18301,18307,18311,18313,18329,18341,18353,18367,18371,18379,18397,18401,18413,18427,18433,18439,18443,18451,18457,18461,18481,18493,18503,18517,18521,18523,18539,18541,18553,18583,18587,18593,18617,18637,18661,18671,18679,18691,18701,18713,18719,18731,18743,18749,18757,18773,18787,18793,18797,18803,18839,18859,18869,18899,18911,18913,18917,18919,18947,18959,18973,18979,19001,19009,19013,19031,19037,19051,19069,19073,19079,19081,19087,19121,19139,19141,19157,19163,19181,19183,19207,19211,19213,19219,19231,19237,19249,19259,19267,19273,19289,19301,19309,19319,19333,19373,19379,19381,19387,19391,19403,19417,19421,19423,19427,19429,19433,19441,19447,19457,19463,19469,19471,19477,19483,19489,19501,19507,19531,19541,19543,19553,19559,19571,19577,19583,19597,19603,19609,19661,19681,19687,19697,19699,19709,19717,19727,19739,19751,19753,19759,19763,19777,19793,19801,19813,19819,19841,19843,19853,19861,19867,19889,19891,19913,19919,19927,19937,19949,19961,19963,19973,19979,19991,19993,19997,20011,20021,20023,20029,20047,20051,20063,20071,20089,20101,20107,20113,20117,20123,20129,20143,20147,20149,20161,20173,20177,20183,20201,20219,20231,20233,20249,20261,20269,20287,20297,20323,20327,20333,20341,20347,20353,20357,20359,20369,20389,20393,20399,20407,20411,20431,20441,20443,20477,20479,20483,20507,20509,20521,20533,20543,20549,20551,20563,20593,20599,20611,20627,20639,20641,20663,20681,20693,20707,20717,20719,20731,20743,20747,20749,20753,20759,20771,20773,20789,20807,20809,20849,20857,20873,20879,20887,20897,20899,20903,20921,20929,20939,20947,20959,20963,20981,20983,21001,21011,21013,21017,21019,21023,21031,21059,21061,21067,21089,21101,21107,21121,21139,21143,21149,21157,21163,21169,21179,21187,21191,21193,21211,21221,21227,21247,21269,21277,21283,21313,21317,21319,21323,21341,21347,21377,21379,21383,21391,21397,21401,21407,21419,21433,21467,21481,21487,21491,21493,21499,21503,21517,21521,21523,21529,21557,21559,21563,21569,21577,21587,21589,21599,21601,21611,21613,21617,21647,21649,21661,21673,21683,21701,21713,21727,21737,21739,21751,21757,21767,21773,21787,21799,21803,21817,21821,21839,21841,21851,21859,21863,21871,21881,21893,21911,21929,21937,21943,21961,21977,21991,21997,22003,22013,22027,22031,22037,22039,22051,22063,22067,22073,22079,22091,22093,22109,22111,22123,22129,22133,22147,22153,22157,22159,22171,22189,22193,22229,22247,22259,22271,22273,22277,22279,22283,22291,22303,22307,22343,22349,22367,22369,22381,22391,22397,22409,22433,22441,22447,22453,22469,22481,22483,22501,22511,22531,22541,22543,22549,22567,22571,22573,22613,22619,22621,22637,22639,22643,22651,22669,22679,22691,22697,22699,22709,22717,22721,22727,22739,22741,22751,22769,22777,22783,22787,22807,22811,22817,22853,22859,22861,22871,22877,22901,22907,22921,22937,22943,22961,22963,22973,22993,23003,23011,23017,23021,23027,23029,23039,23041,23053,23057,23059,23063,23071,23081,23087,23099,23117,23131,23143,23159,23167,23173,23189,23197,23201,23203,23209,23227,23251,23269,23279,23291,23293,23297,23311,23321,23327,23333,23339,23357,23369,23371,23399,23417,23431,23447,23459,23473,23497,23509,23531,23537,23539,23549,23557,23561,23563,23567,23581,23593,23599,23603,23609,23623,23627,23629,23633,23663,23669,23671,23677,23687,23689,23719,23741,23743,23747,23753,23761,23767,23773,23789,23801,23813,23819,23827,23831,23833,23857,23869,23873,23879,23887,23893,23899,23909,23911,23917,23929,23957,23971,23977,23981,23993,24001,24007,24019,24023,24029,24043,24049,24061,24071,24077,24083,24091,24097,24103,24107,24109,24113,24121,24133,24137,24151,24169,24179,24181,24197,24203,24223,24229,24239,24247,24251,24281,24317,24329,24337,24359,24371,24373,24379,24391,24407,24413,24419,24421,24439,24443,24469,24473,24481,24499,24509,24517,24527,24533,24547,24551,24571,24593,24611,24623,24631,24659,24671,24677,24683,24691,24697,
    24709,24733,24749,24763,24767,24781,24793,24799,24809,24821,24841,24847,24851,24859,24877,24889,24907,24917,24919,24923,24943,24953,24967,24971,24977,24979,24989,25013,25031,25033,25037,25057,25073,25087,25097,25111,25117,25121,25127,25147,25153,25163,25169,25171,25183,25189,25219,25229,25237,25243,25247,25253,25261,25301,25303,25307,25309,25321,25339,25343,25349,25357,25367,25373,25391,25409,25411,25423,25439,25447,25453,25457,25463,25469,25471,25523,25537,25541,25561,25577,25579,25583,25589,25601,25603,25609,25621,25633,25639,25643,25657,25667,25673,25679,25693,25703,25717,25733,25741,25747,25759,25763,25771,25793,25799,25801,25819,25841,25847,25849,25867,25873,25889,25903,25913,25919,25931,25933,25939,25943,25951,25969,25981,25997,25999,26003,26017,26021,26029,26041,26053,26083,26099,26107,26111,26113,26119,26141,26153,26161,26171,26177,26183,26189,26203,26209,26227,26237,26249,26251,26261,26263,26267,26293,26297,26309,26317,26321,26339,26347,26357,26371,26387,26393,26399,26407,26417,26423,26431,26437,26449,26459,26479,26489,26497,26501,26513,26539,26557,26561,26573,26591,26597,26627,26633,26641,26647,26669,26681,26683,26687,26693,26699,26701,26711,26713,26717,26723,26729,26731,26737,26759,26777,26783,26801,26813,26821,26833,26839,26849,26861,26863,26879,26881,26891,26893,26903,26921,26927,26947,26951,26953,26959,26981,26987,26993,27011,27017,27031,27043,27059,27061,27067,27073,27077,27091,27103,27107,27109,27127,27143,27179,27191,27197,27211,27239,27241,27253,27259,27271,27277,27281,27283,27299,27329,27337,27361,27367,27397,27407,27409,27427,27431,27437,27449,27457,27479,27481,27487,27509,27527,27529,27539,27541,27551,27581,27583,27611,27617,27631,27647,27653,27673,27689,27691,27697,27701,27733,27737,27739,27743,27749,27751,27763,27767,27773,27779,27791,27793,27799,27803,27809,27817,27823,27827,27847,27851,27883,27893,27901,27917,27919,27941,27943,27947,27953,27961,27967,27983,27997,28001,28019,28027,28031,28051,28057,28069,28081,28087,28097,28099,28109,28111,28123,28151,28163,28181,28183,28201,28211,28219,28229,28277,28279,28283,28289,28297,28307,28309,28319,28349,28351,28387,28393,28403,28409,28411,28429,28433,28439,28447,28463,28477,28493,28499,28513,28517,28537,28541,28547,28549,28559,28571,28573,28579,28591,28597,28603,28607,28619,28621,28627,28631,28643,28649,28657,28661,28663,28669,28687,28697,28703,28711,28723,28729,28751,28753,28759,28771,28789,28793,28807,28813,28817,28837,28843,28859,28867,28871,28879,28901,28909,28921,28927,28933,28949,28961,28979,29009,29017,29021,29023,29027,29033,29059,29063,29077,29101,29123,29129,29131,29137,29147,29153,29167,29173,29179,29191,29201,29207,29209,29221,29231,29243,29251,29269,29287,29297,29303,29311,29327,29333,29339,29347,29363,29383,29387,29389,29399,29401,29411,29423,29429,29437,29443,29453,29473,29483,29501,29527,29531,29537,29567,29569,29573,29581,29587,29599,29611,29629,29633,29641,29663,29669,29671,29683,29717,29723,29741,29753,29759,29761,29789,29803,29819,29833,29837,29851,29863,29867,29873,29879,29881,29917,29921,29927,29947,29959,29983,29989,30011,30013,30029,30047,30059,30071,30089,30091,30097,30103,30109,30113,30119,30133,30137,30139,30161,30169,30181,30187,30197,30203,30211,30223,30241,30253,30259,30269,30271,30293,30307,30313,30319,30323,30341,30347,30367,30389,30391,30403,30427,30431,30449,30467,30469,30491,30493,30497,30509,30517,30529,30539,30553,30557,30559,30577,30593,30631,30637,30643,30649,30661,30671,30677,30689,30697,30703,30707,30713,30727,30757,30763,30773,30781,30803,30809,30817,30829,30839,30841,30851,30853,30859,30869,30871,30881,30893,30911,30931,30937,30941,30949,30971,30977,30983,31013,31019,31033,31039,31051,31063,31069,31079,31081,31091,31121,31123,31139,31147,31151,31153,31159,31177,31181,31183,31189,31193,31219,31223,31231,31237,31247,31249,31253,31259,31267,31271,31277,31307,31319,31321,31327,31333,31337,31357,31379,31387,31391,31393,31397,31469,31477,31481,31489,31511,31513,31517,31531,31541,31543,31547,31567,31573,31583,31601,31607,31627,31643,31649,31657,31663,31667,31687,31699,31721,31723,31727,31729,31741,31751,31769,31771,31793,31799,31817,31847,31849,31859,31873,31883,31891,31907,31957,31963,31973,31981,31991,32003,32009,32027,32029,32051,32057,32059,32063,32069,32077,32083,32089,32099,32117};
    int t,m,n,i,k,l,temp;
    scanf("%d",&t);
    while(t--){

        scanf("%d",&m);
        if(m==1)
            m++;

        scanf("%d",&n);

            a=(int*)malloc(n-m+1*sizeof(int));

        for(i=0;i<n-m+1;i++)
            a[i]=0;

          temp=sqrt(n);

          for(k=0;p[k]<=temp;k++){

              i=(m/p[k])*p[k];
              for(l=i;l<=n;l=l+p[k]){
                  if(l>=m&&l!=p[k])
                    a[l-m]=1;
              }
          }
          for(k=0;k<n-m+1;k++){
              if(!a[k])
                printf("%d\n",m+k);
          }
          puts("");
          }
        return 0;
} 
```

这是我使用埃拉托色尼筛法解决 spoj PRIME1 问题的程序。外循环第一次执行，但在第二轮程序只执行到：

```
a=(int*)malloc(n-m+1*sizeof(int)); 
```

如何重用 malloc() 函数？

### 输入

```
2
1 10
3 5 
```

### 输出

```
2
3
5
7 
```

### 运行时错误

```
prog: malloc.c:3096: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:52:14.913

我怀疑你忘记了这一行的操作顺序：

```
a=(int*)malloc(n-m+1*sizeof(int)); 
```

您分配的内存几乎没有您认为的那么多。

看起来你真正想要的是：

```
a=(int*)malloc((n-m+1)*sizeof(int)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:44:45.177

我没有认真审查过代码——但我相当肯定这是由于内存泄漏导致的堆损坏造成的。很可能以某种错误的方式将某些内容存储到 a[] 数组中 - 可能是超出预期范围的错误“lm”值。

重复调用 malloc() 并没有本质上的错误。

# javascript - javascript中的对象问题

> ID：15749397
> 
> 赞同：-3
> 
> 时间：2013-04-01T18:36:22.350
> 
> 标签：javascript

如何创建对象并放入数组中，以便可以多次使用它

```
var createNew = new enemyMove(id); 
```

所以每次我使用它我都会有不同的值和字段

```
function enemyMove() {

    var enemyimagew = document.getElementById("enemy");
    var leftenemy = parseInt(enemyimagew.style.left);
    var topenemy = parseInt(enemyimagew.style.top);

        if (leftenemy < leftplayer) {
            leftenemy = leftenemy + 5;

        }
        if (leftenemy > leftplayer) {
            leftenemy = leftenemy - 5;

        }

        if (topenemy < topplayer) {
            topenemy = topenemy + 5;
        }
        if (topenemy > topplayer) {
            topenemy = topenemy - 5;
        }

        enemyimagew.style.left = leftenemy + "px";
        enemyimagew.style.top = topenemy + "px";

        var hit_list = $("#x").collision(".lollol");
        hit_list.remove();   
}

function enemyMovetow() {

    var enemyimage = document.getElementById("enemy2");
    var leftenemy = parseInt(enemyimage.style.left);
    var topenemy = parseInt(enemyimage.style.top);

    if (leftenemy < leftplayer) {
        leftenemy = leftenemy + 5;

    }
    if (leftenemy > leftplayer) {
        leftenemy = leftenemy - 5;

    }

    if (topenemy < topplayer) {
        topenemy = topenemy + 5;
    }
    if (topenemy > topplayer) {
        topenemy = topenemy - 5;
    }

    enemyimage.style.left = leftenemy + "px";
    enemyimage.style.top = topenemy + "px";

    var hit_list = $("#x").collision(".lollol");
    hit_list.remove();
} 
```

我想要这两个函数在一个数组上，所以我不会再写一个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:37:22.370

这是你想要的吗？

```
var enemies = [
    new enemyMove(id), new ememyMove(id + 1), new enemyMove(id + 2), // ...
]; 
```

如果您澄清更多，我可以进一步帮助您。

# php - stream_context_set_params 与 stream_context_set_option

> ID：15749404
> 
> 赞同：4
> 
> 时间：2013-04-01T18:36:57.267
> 
> 标签：php, stream

**文档说什么**

从阅读 php.net 看来，stream_context_set_params 几乎与 stream_context_set_option 做同样的事情。IE。

[http://www.php.net/manual/en/function.stream-context-set-params.php](http://www.php.net/manual/en/function.stream-context-set-params.php)

```
bool stream_context_set_params ( resource $stream_or_context , array $params ) 
```

[http://www.php.net/manual/en/function.stream-context-set-option.php](http://www.php.net/manual/en/function.stream-context-set-option.php)

```
bool stream_context_set_option ( resource $stream_or_context , array $options ) 
```

`stream_context_set_option`支持不支持的附加参数，`stream_context_set_params`否则它们似乎在做同样的事情。至少在理论上。

**我的测试显示什么**

我自己的测试会提出其他建议，实际上让我想知道`stream_context_set_params`实际做了什么（如果有的话）。

使用`stream_context_set_params`...

```
<?php
$ctx = stream_context_create();
stream_context_set_params($ctx, array('zz' => array('zz' => 'zz')));
print_r(stream_context_get_options($ctx)); 
```

打印出以下内容（这让我感到惊讶）：

```
Array
(
) 
```

使用`stream_context_set_option`...

```
<?php
$ctx = stream_context_create();
stream_context_set_option($ctx, array('zz' => array('zz' => 'zz')));
print_r(stream_context_get_options($ctx)); 
```

打印出以下内容（如我所料）：

```
Array
(
    [zz] => Array
        (
            [zz] => zz
        )

) 
```

所以我真的一点头绪都没有。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-15T06:43:53.327

`bool stream_context_set_params ( resource $stream_or_context , array $params )`

这次它只需要'通知'参数键，并由`stream_notification_callback`.

您可以在此处查看支持的上下文参数列表：http: [//php.net/manual/en/context.params.php](http://php.net/manual/en/context.params.php)

```
<?php $opts = array(
        'http'=>array(
            'method'=>"GET",
            'header'=>"Accept-language: en\r\n" .
                "Cookie: foo=bar\r\n"
        ),
    );

    $context = stream_context_create($opts);
    stream_context_set_params($context
        , ['notification' => 'your_call_back_notification']
    );

    var_dump(stream_context_get_params($context)); 
```

输出：

```
Array(
[notification] => your_call_back_notification
[options] => Array
    (
        [http] => Array
            (
                [method] => GET
                [header] => Accept-language: en
                            Cookie: foo=bar

            )

    )
) 
```

您可能会收到通知回调的警告错误，它必须是有效的可调用对象。查看[http://php.net/manual/en/function.stream-notification-callback.php](http://php.net/manual/en/function.stream-notification-callback.php)了解更多信息。

# algorithm - BFS & DFS - 从哪个顶点开始？

> ID：15749408
> 
> 赞同：4
> 
> 时间：2013-04-01T18:37:08.493
> 
> 标签：algorithm, search

我已经阅读了关于 BFS 和 DFS 算法的页面和页面的信息。他们都没有说，首先选择哪个顶点？

例如，在这张图片中，箭头是否意味着您不能从 c 遍历到 b，但可以从 b 遍历到 c？

![搜索网络](https://i.stack.imgur.com/RB627.png)

朋友们，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T18:42:43.350

**[Breadth-first_search](http://en.wikipedia.org/wiki/Breadth-first_search)**和**[Depth-first_search](http://en.wikipedia.org/wiki/Depth-first_search)**可以从任何源 Vertex **S**开始。

**选择哪个顶点作为源顶点？**- `Depends upon your requirement`。

**示例**：

1.  如果您想*使用 BFS 找到从源 S 到所有其他顶点的最短路径（对于所有边具有相同成本的图或未加权图）*。那么您应该选择**S**作为源顶点。

2.  如果你想知道顶点**K是否可以从顶点****S**到达，在这种情况下你也必须从源顶点 S 开始你的 BFS/DFS。

3.  如果你想解决老鼠从源**S开始并必须使用 DFS 到达目的地****的迷宫**问题，那么你必须再次从源**S**开始 DFS 算法。

 ****`In some Cases, We are free to choose any vertex as a source vertex`.

**示例**：

1.  在寻找有向图的强连通分量（SCC）时，我们通过选择任何顶点作为源顶点来启动 DFS。

2.  在使用 DFS 对有向无环图进行拓扑排序时，我们同样可以自由选择任何顶点作为源顶点。

*因此，首先选择哪个顶点不是固定的，取决于问题的性质，我们正在使用 DFS 和 BFS 解决。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T18:42:42.663

`do the arrows mean you cannot traverse from c to b, but can traverse from b to c?`

这是一个有向图，是的。

当您执行 DFS 时，您不需要指定从哪个节点开始，因为无论如何您都会遍历所有节点。

DFS的过程是：

```
DFSmain(G):
     For v=1 to n: if v is not yet visited, do DFS(v).

DFS(v):
   mark v as visited. // entering node v
   for each unmarked out-neighbor w of v: do DFS(w).
   return. // exiting node v. 
```

所以它最终会访问图中的每个节点。BFS 的类似原理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T18:44:54.773

如果它不是有向图，那没关系。您发布的图表是有向图，这正是您所说的。你可以从a到b，但不能从b到a。

关于在有向图中选择哪个节点，您选择的每个节点都会产生不同的结果。通常在这些情况下，如果给定了根节点，最好从根节点开始。****

# c# - 条件运算符？

> ID：15749416
> 
> 赞同：3
> 
> 时间：2013-04-01T18:37:34.940
> 
> 标签：c#, .net, ternary-operator, conditional-operator

```
var discount = (i == 1) ? definition.SecondPetDiscount ?? definition.AdditionalPetDiscount :
               (i == 2) ? definition.ThirdPetDiscount ?? definition.AdditionalPetDiscount :
               definition.AdditionalPetDiscount; 
```

谁能给我这个代码片段的解释？我知道三元运算符。但上面不是这样的。

正常的三元运算符如下所示：

```
PaidDate = ( paidDate == null ? DateTime.Now : paidDate); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T18:42:41.267

`?:`是三元运算符。`??`是空合并运算符。它用于返回第一个不为空的表达式。

您发布的代码段同时使用了这两个运算符。它等效于以下`if/else`构造：

```
if (i == 1)
{
    if (definition.SecondPetDiscount != null)
    {
        discount = definition.SecondPetDiscount;
    }
    else
    {
        discount = definition.AdditionalPetDiscount;
    }
}
else if (i == 2)
{
    if (definition.ThirdPetDiscount != null)
    {
        discount = definition.ThirdPetDiscount;
    }
    else
    {
        discount = definition.AdditionalPetDiscount;
    }
}
else
{
    discount = definition.AdditionalPetDiscount;
} 
```

在该片段中，它们将多个三元运算链接在一起。有时将多个空合并操作链接在一起也很有用，例如`var foo = a ?? b ?? c`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T18:38:44.047

这就是 C# 中的 null 合并运算符。它是一个快捷方式，返回左侧（如果左侧不为空），否则返回右侧

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-01T18:39:54.800

这是一种混合。

在此语句中，有两个条件（三元）操作以及[空合并](http://msdn.microsoft.com/en-us/library/ms173224.aspx)运算符。

第一个三元运算的第二个“选项”是一个完整的三元运算本身。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-01T18:39:40.117

我认为您对空合并运算符或`??`

```
definition.ThirdPetDiscount ?? definition.AdditionalPetDiscount 
```

这意味着如果`definition.ThirdPetDiscount`为空，则使用`definition.AdditionalPetDiscount`

其周围的三元运算符的行为类似于常规的三元运算符。空合并运算符只是嵌套在其中，并且您还有 1 个三元运算符嵌套在第二个三元运算符中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T18:45:08.287

```
var discount = (i == 1) ? definition.SecondPetDiscount ?? definition.AdditionalPetDiscount :
               (i == 2) ? definition.ThirdPetDiscount ?? definition.AdditionalPetDiscount :
               definition.AdditionalPetDiscount; 
```

当然，该`(bool) ? code : code`模式转换为 if - else 块。

所以我们得到

```
var discount;
if( i==1 )
{
    discount = definition.SecondPetDiscount ?? definition.AdditionalPetDiscount;
}
else if( i==2 )
{
    discount = definition.ThirdPetDiscount ?? definition.AdditionalPetDiscount;
}
else
{
    discount = definition.AdditionalPetDiscount;
} 
```

`object ?? object`是空合并三元运算符。它的作用是将合并中的第一个非空对象返回并返回。列表中可以有任意数量的对象。

所以`var discount`这里设置为`definition.AdditionalPetDiscount`如果第二或第三宠物折扣为空，或者如果 i 不是 1 或 2。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T18:45:13.493

如果 i 为 1，则折扣将设置为 definition.SecondPetDiscount，除非它为 null，在这种情况下，它将设置为 definition.AdditionalPetDiscount。

如果 i 为 2，则折扣将设置为 definition.ThirdPetDiscount，除非它为空，在这种情况下，它将设置为 definition.AdditionalPetDiscount。

如果 i 既不是 1 也不是 2，那么它将被设置为 definition.AdditionalPetDiscount。

# c++ - 为什么不能在 C++ 中初始化类中的变量

> ID：15749418
> 
> 赞同：4
> 
> 时间：2013-04-01T18:37:48.163
> 
> 标签：c++

我知道你不能在不使用构造函数的情况下直接初始化类中的成员变量（静态常量除外）。

但只是想知道这背后的原因是什么。下面是代码片段

如果有任何机构可以提供帮助

```
class a 
{

    int c=5;

// giving error error C2864: 'a::c' : only static const integral data members can be 

// initialized within a class

    int b;

public:
    a():c(1),b(2){}

    void h()
    {
        printf("%d,%d",c,b);
    }
};

int main()
{

    a l;

    l.h();

    getchar();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T18:41:15.683

其实你可以。但仅在 C++11 中。

以下是有效的 C++11 代码：

```
class A
{
    int x = 100; //valid in c++11
}; 
```

你的编译器可能不支持这个，但 GCC 4.8.0[编译得很好](http://coliru.stacked-crooked.com/view?id=84e0239bc10a52214903a32742ec819d-61c3814520a8d4318f681038dc4b4da7)。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:40:50.810

类定义主要是为了告诉其他类你的类将有什么接口，它占用多少内存，以及与类相关的任何在编译时已知的值（即常量）。**类定义中没有直接的可执行代码（尽管在类定义中定义的函数**中可能会有可执行代码）。将执行的代码位于函数本身的定义中。

编辑：显然这在 C++11 中受支持。

# javascript - 使用自定义选择器和逻辑进行 JQuery 验证

> ID：15749419
> 
> 赞同：4
> 
> 时间：2013-04-01T18:37:48.270
> 
> 标签：javascript, jquery, jquery-validate

是否可以将 JQuery Validate 与自定义选择器和验证逻辑一起使用？类似于以下内容：

```
$('#myForm').validate({
    rules: {
        '[myattr="foo"]': function(content) { return $(content).val().contains('bar'); }  
    }
}) 
```

我似乎无法在文档中找到答案。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T18:46:51.043

要在 中声明规则`.validate()`，您**必须**使用该`name`属性。一种解决方法是使用`rules('add')`允许您使用任何 jQuery 选择器的方法。（然而，尽管选择了分配规则的方法，但每个字段仍必须包含唯一的`name`属性。）

```
$('[myattr="foo"]').rules('add', {
    required: true,
    messages: {
        required: "optional custom message"
    }
}); 
```

**请参阅： [http ://docs.jquery.com/Plugins/Validation/rules#.22add.22rules](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)**

**备注**：

*   确保您使用最新版本的插件，该插件最近才修复了使用`messages`inside of`rules('add')`违反规则的错误。

*   如果您的选择器类似于`class`要选择多个元素的地方，则必须将其包装`rules('add')`在 jQuery`.each()`中。

```
$('.myclass').each(function() {
    $(this).rules('add', {
        required: true,
        messages: {
            required: "optional custom message"
        }
    });
}); 
```

* * *

要将自定义函数用作规则，您只需使用该`addMethod`方法创建方法/规则，然后像任何其他规则一样声明它。

```
 $.validator.addMethod('myrule', function(value, element, params) {
     // your function
     // return true to pass
     // return false to fail
 }, "error message");

 $('#myform').validate({
     rules: {
         myfield: {
             required: true,
             myrule: true
         }
     }
 }); 
```

**请参阅：[http ://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)**

# java - Android 相机预览失败（仅在 API<14 上）

> ID：15749422
> 
> 赞同：2
> 
> 时间：2013-04-01T18:37:55.233
> 
> 标签：java, android, exception, camera

我正在构建一个使用内置摄像头的 android 应用程序。我正在逐步构建，所以我首先检查了相机预览。它在我的果冻豆手机上运行良好但是在姜饼手机上运行相同的应用程序失败并出现无法启动预览错误

这是详细信息

表面视图在 xml 布局中定义，大小任意 果冻豆手机是galaxy s3，屏幕属于普通类别 姜饼设备是galaxy Y，屏幕属于小类别

这是日志输出

```
04-01 23:54:44.117: I/ApplicationPackageManager(15419): cscCountry is not German : INU
04-01 23:54:44.671: D/AndroidRuntime(15419): Shutting down VM
04-01 23:54:44.671: W/dalvikvm(15419): threadid=1: thread exiting with uncaught exception (group=0x40018578)
04-01 23:54:44.703: E/AndroidRuntime(15419): FATAL EXCEPTION: main
04-01 23:54:44.703: E/AndroidRuntime(15419): java.lang.RuntimeException: startPreview failed
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.hardware.Camera.startPreview(Native Method)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at com.example.witalk.CameraHandle.surfaceCreated(CameraHandle.java:98)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.SurfaceView.updateWindow(SurfaceView.java:552)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.SurfaceView.dispatchDraw(SurfaceView.java:350)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.View.draw(View.java:6883)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.View.draw(View.java:6883)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1940)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.ViewRoot.draw(ViewRoot.java:1527)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1264)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.os.Looper.loop(Looper.java:130)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at android.app.ActivityThread.main(ActivityThread.java:3687)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at java.lang.reflect.Method.invokeNative(Native Method)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at java.lang.reflect.Method.invoke(Method.java:507)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
04-01 23:54:44.703: E/AndroidRuntime(15419):    at dalvik.system.NativeStart.main(Native Method) 
```

这是代码

主要活动.java

```
package com.example.witalk;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.SurfaceView;
import android.view.WindowManager;

public class MainActivity extends Activity {

    private CameraHandle cameraHandle;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        SurfaceView surface=(SurfaceView)findViewById(R.id.surfaceView1);

        cameraHandle=new CameraHandle(0);
        cameraHandle.initializeCamera(getWindowManager().getDefaultDisplay().getRotation());
        cameraHandle.setDisplaySurface(surface);
        cameraHandle.startPreview();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
    @Override
    protected void onDestroy() {
    cameraHandle.stop();
        super.onDestroy();
    }

} 
```

相机句柄.java

```
package com.example.witalk;

import java.io.IOException;

import android.graphics.ImageFormat;
import android.hardware.Camera;
import android.hardware.Camera.Parameters;
import android.hardware.Camera.PreviewCallback;
import android.util.Log;
import android.view.Surface;
import android.view.SurfaceHolder;
import android.view.SurfaceHolder.Callback;
import android.view.SurfaceView;
import android.view.WindowManager;

public class CameraHandle implements Callback, PreviewCallback  {

    private static Camera camera;
    private static SurfaceView surface;
    private static byte[] imageBuffer;
    private static byte[] imageData;
    private static int height,width;
    private static Parameters cameraSettings;
    private static boolean surfaceReady,cameraReady;
    long lastTime;

    public  CameraHandle(int id )
    {

        camera=Camera.open(id);

    }

    public  void initializeCamera(int rotation){
        cameraSettings=camera.getParameters();
        height=cameraSettings.getPreviewSize().height;
        width=cameraSettings.getPreviewSize().width;
        imageBuffer=new byte[(ImageFormat.getBitsPerPixel(cameraSettings.getPreviewFormat())*width*height)/8];
        camera.addCallbackBuffer(imageBuffer);
        if(rotation==Surface.ROTATION_0)
        camera.setDisplayOrientation(90);
        if(rotation==Surface.ROTATION_90)
            camera.setDisplayOrientation(0);

        if(rotation==Surface.ROTATION_270)
            camera.setDisplayOrientation(180);
    }

    public  void setDisplaySurface(SurfaceView surface){
        this.surface=surface;
        surface.getHolder().addCallback(this);
    }

    public  void startPreview(){
        if(surfaceReady){
            try {
                Log.d("CameraHandler", "camera from start Preview");
                camera.setPreviewDisplay(surface.getHolder());

                camera.setPreviewCallbackWithBuffer(this);
            } catch (IOException e) {}
        camera.startPreview();
        }
        else
            cameraReady=true;

    }

    public static byte[] getData(){
        return imageData;

    }

    public void stop(){
        if(camera!=null){
            camera.stopPreview();
        camera.release();}

    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,int height) {

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {

        try {
        camera.setPreviewDisplay(holder);
        surfaceReady=true;
        if(cameraReady){
            camera.startPreview();
            camera.setPreviewCallbackWithBuffer(this);
            Log.d("CameraBuffer", "camera from surface");
            }
    } catch (IOException e) {
        Log.e("CameraHandler","Something went wrong cannot set preview");
        e.printStackTrace();}

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPreviewFrame(byte[] newData, Camera camera) {
        imageData=newData;
        camera.addCallbackBuffer(imageBuffer);

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T19:01:47.007

对于您的 Surface Holder 设置类型为 `SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS`

IE

将此添加到您的 onCreate

```
SurfaceView surface=(SurfaceView)findViewById(R.id.surfaceView1);
SurfaceHolder holder=surface.getHolder();
 holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); 
```

# android - 键盘无法在使用 PhoneGap 的 Android 应用程序上平移

> ID：15749423
> 
> 赞同：1
> 
> 时间：2013-04-01T18:37:57.887
> 
> 标签：android, cordova, android-softkeyboard

我正在使用 PhoneGap 开发应用程序，但无法使软输入键盘正常工作。到目前为止，我已经尝试使用`android:windowSoftInputMode="adjustPan"`（也调整大小）。我也试过`getWindow().setFlags(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN, WindowManager.LayoutParams.SOFT_INPUT_MASK_ADJUST);`在我的 main.java 上写。

我在 google 群组[https://groups.google.com/forum/?fromgroups=#!topic/phonegap/YFmIeUJBnvQ](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/YFmIeUJBnvQ)上发现了一个类似的问题，这个问题已经为他解决了，但该解决方案不适合我。也许我的代码中有一些我还没有看到的东西。我的 XML 如下：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.Comp.Sandbox" android:versionName="1.1" android:versionCode="5">

<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true"
    android:resizeable="true"
    android:anyDensity="true"
    />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.RECORD_VIDEO"/>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />   
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17"/>
<application android:icon="@drawable/icon" 
    android:label="@string/app_name"
    android:hardwareAccelerated="true"
    android:debuggable="true">
    <activity android:name="Sandbox" 
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
            android:configChanges="keyboardHidden|keyboard|locale"
            android:windowSoftInputMode="adjustPan"
            android:hardwareAccelerated="true"
            android:screenOrientation="landscape">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我的 main.java 文件如下：

```
 public class Sandbox extends DroidGap
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        super.setIntegerProperty("splashscreen", R.drawable.splash);

        getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        getWindow().setFlags(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN, WindowManager.LayoutParams.SOFT_INPUT_MASK_ADJUST);

        getWindow().setFlags(WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED, WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);

        super.loadUrl("file:///android_asset/www/index.html",5000);
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:36:27.783

我最终创建了一个新项目，并开始在我的代码中每行添加一行。显然，`android:windowSoftInputMode="adjustPan"`当您设置全屏主题时，某些设备会出现问题

`getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);`在主 .java 文件上

或者

`android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"`AndroidManifext.xml 中的活动

# javascript - 为多维数组中的元素添加点击事件

> ID：15749428
> 
> 赞同：0
> 
> 时间：2013-04-01T18:38:23.830
> 
> 标签：javascript, jquery, arrays, multidimensional-array

我在做什么的解释。

我有 ul，里面有 li，里面有名片，数量不等。我想添加额外的 li 以显示我单击的访问卡的描述。例如，如果我单击第 2 或第 3 张卡，我想在第 4 位添加新的 li，如果我单击第 4、5 或 6 位，那么我想在第 7 位添加新的 li。

为此，我创建了一个函数，将 li 拆分为多维数组，在一个数组中包含三个 li。并且那个multimensinal数组是调用块。现在我得到了写。但我无法在我需要的地方添加新的 li。

我收到此错误 TypeError: chunks[i] is undefined

我给出了下面的代码

> chunks[i] 未定义

```
chunks = [ 
    [li.pL14, li, li.pR15], 
    [li.pL14, li, li.pR15], 
    [li.pL14, li, li.pR15], 
    [li.pL14, li, li.pR15], 
    [li.pL14, li, li.pR15]
]

for (var i=0; i<chunks.length; i++) {    
    for (var j=0; j<chunks[i].length; j++) {
        $(chunks[i][j]).click(function() {
             $(chunks[i][j]).append('<li class="description"> <div class="cardDesCont mT1Mi"></div></li>');
        });
    }
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:44:07.483

你有`i++`你应该有的地方`j++`，在内部循环中。因此，您的增量`i`超出了数组范围。您的代码应该是：

```
for (var i=0; i<chunks.length; i++) {   
    for (var j=0; j<chunks[i].length; j++) {
        // --------------------- HERE ^^^
        $(chunks[i][j]).click(function() {
            console.log('script works');
        });
    }
} 
```

# c# - 使用 LINQ 构建动态查询

> ID：15749429
> 
> 赞同：1
> 
> 时间：2013-04-01T18:38:26.797
> 
> 标签：c#, linq

我试图建立一个动态的泛型方法。创建高级搜索机制。

我可以使用动态 LINQ 实现一些目标

```
IQueryable<Table> query = ObjectContext.Table;
if (parameters != null && parameters.Count > 0)
{
    foreach (KeyValuePair<string, dynamic> keyValuePair in parameters)
    {
        query = query.Where(keyValuePair.Key + " == @0", new object[] { keyValuePair.Value });
    }
} 
```

但是这样做，我需要用这样的东西加载每个字段

```
ClassTable.Parameters.Add("FKTable.Foo", foo);
ClassTable.Parameters.Add("Bar", bar); 
```

所以我正在尝试其他方法***（此代码有效）***

```
List<Table> lstTable = new List<Table>();
lstTable.AddRange(tableDAO.SelectWhere(
    u => this.EntityValues.Foo == u.Foo && this.EntityValues.Bar == u.Bar
));
return lstTable; 
```

现在，我的问题是，我想做更多类似的事情***（此代码仅带来第一个查询的结果）***

```
List<Table> lstTable = new List<Table>();
lstTable.AddRange(tableDAO.SelectWhere(
    u => !string.IsNullOrEmpty(this.EntityValues.Foo) ? this.EntityValues.Foo == u.Foo : false 
    &&
    this.EntityValues.Bar != 0 ? this.EntityValues.Bar == u.Bar : false
));
return lstTable; 
```

我不想做这样的事情

```
IQueryable<Data.Story> query = ctx.DataContext.Stories;

if (criteria.StoryId != null) // StoryId
    query = query.Where(row => row.StoryId == criteria.StoryId);

if (criteria.CustomerId != null) // CustomerId
    query = query.Where(row => row.Project.CustomerId == criteria.CustomerId);

if (criteria.SortBy != null) // SortBy
    query = query.OrderBy(criteria.SortBy + " " + criteria.SortOrder.Value.ToStringForSql()); 
```

我知道我的问题有点混乱，我会提供编辑和评论来解决它。让我知道。

* * *

**TL;博士;** 我需要帮助来创建动态查询，我只需要传递搜索中使用的参数。所以我可以为用户创建一个高级搜索选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:24:49.407

您可以自己编写`Expression`'s ：

```
public static IQueryable<T> Where<T>(this IQueryable<T> source, string propertyOrFieldName, object value)
{
    var param = Expression.Parameter(typeof(T), "x");
    var prop = Expression.Property(param, name);
    var @const = Expression.Constant(value, prop.Type);
    var equals = Expression.Equal(prop, @const);
    var lambda = Expression.Lambda(equals, param);
    return source.Where(lambda);
}

foreach(var p in parameters)
{
    query = query.Where(p.Key, p.Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:01:51.970

就像[pswg 在他的回答中建议的那样](https://stackoverflow.com/a/15751214/662581)，我必须自己做，但我做的和他的建议有点不同。

我在 DAO 类中创建了两个方法。第一个，我加载一个表达式列表，第二个我读取并执行。

```
public List<System.Linq.Expressions.Expression<Func<E, bool>>> whereList = new List<Expression<Func<E, bool>>>();
public List<E> ExecuteSelectFilter()
{
    System.Linq.Expressions.Expression<Func<E, bool>> whereFinal = c => true;

    foreach (System.Linq.Expressions.Expression<Func<E, bool>> whereItem in whereList)
    {
        if (whereItem != null)
        {
            var invokedExpr = Expression.Invoke(whereFinal, whereItem.Parameters.Cast<Expression>());

            whereFinal = Expression.Lambda<Func<E, bool>>
                    (Expression.AndAlso(whereItem.Body, invokedExpr), whereItem.Parameters);
        }
    }
    return this.ObjectContext.CreateQuery<E>(EntitySetName).Where(whereFinal.Compile()).ToList();
} 
```

*我在 DAO 中调用的那些方法，因此我可以从我拥有的任何业务类中访问。*

```
tableDAO.whereList.Clear();

#region Filters
// Foo
if (!String.IsNullOrEmpty(this.entityValues.Foo)) 
    tableDAO.whereList.Add(q => q.Foo.Contains(this.entityValues.Foo));
// Bar
if (this.entityValues.Bar > 0) 
    tableDAO.whereList.Add(q => q.Bar== this.entityValues.Bar);
#endregion

return tableDAO.ExecuteSelectFilter(); 
```

希望这可以帮助某人，就像它帮助了我一样。

# xcode - 为什么我不能在 Xcode 4.6.1 中“编辑”（在 Interface Builder 中打开）碳 .nib？

> ID：15749434
> 
> 赞同：2
> 
> 时间：2013-04-01T18:38:40.073
> 
> 标签：xcode, interface-builder, macos-carbon

我不敢相信我需要问这个...

我正在将 Carbon 应用程序从 Xcode 3.4.x 升级到 Xcode 4.6.1。

当我在项目导航器中选择一个 .nib 文件时，它只想用“预览”打开/显示。我无法让界面生成器编辑器显示 - 根本没有！

显然，这里有一些魔法。.nib 文件是否需要先转换为 .xib？或者是否有一些不需要安装的组件？（我认为可能没有安装命令行工具）。

更新：我已将其中一个 .nib 文件转换为 .xib，并将其放回项目中。没有区别：我仍然无法调出 Interface Builder（根本）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:38:33.823

Xcode 4[不支持编辑 Carbon nib](http://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/index.html)，尽管您可以使用它们构建应用程序。要编辑笔尖，您最好有一台可以在虚拟机中运行 Snow Leopard 或 Snow Leopard Server 的 Mac，并在其上安装 Xcode 3.2.6。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T21:59:22.757

继续我对 JWWalker 的回答的回答，关于如何更改界面生成器版本：

![接口构建版本](https://i.stack.imgur.com/KfTD8.png)

# wcf - 异步服务操作：无阻塞

> ID：15749444
> 
> 赞同：1
> 
> 时间：2013-04-01T18:39:11.253
> 
> 标签：wcf, asynchronous, blocking

我正在尝试让服务运营实现以下目标：

*   不允许它所在的线程阻塞
*   在返回之前“等待”来自另一个服务的输入

这两个中的第一个是[MVC 异步控制器](http://msdn.microsoft.com/en-us/library/ee728598%28v=VS.98%29.aspx)具有的功能。我不确定[WCF iasync 操作模式](http://msdn.microsoft.com/en-us/library/ms734701.aspx)是否同样聪明地允许服务调度线程在等待异步操作完成时返回线程池。

至于输入部分的“等待”，我很好奇是否有人有一个代码示例甚至是一个很小的框架，旨在`EndOperation`在系统中发生一些完全不相关的事件时调用它。如果操作正确，该行为可能等同于“长轮询”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T07:40:27.027

好吧，将 Asynchrone Service-Operation 与关键字 async 一起使用。它适用于 .NET 4.5。阻塞的原因是 I/O 操作，需要更多时间才能得到结果。

```
[ServiceContract]
public interface IFlightService
{
   [OperationContract]
   cancelFlight();
}

public class FlightService : IFlightService
{
   public async cancelFlight()
   {
      await Task.Delay(5000); 
   }
} 
```

# c# - 创建匿名类型的通用列表有技巧吗？

> ID：15749445
> 
> 赞同：40
> 
> 时间：2013-04-01T18:39:18.110
> 
> 标签：c#, generics, anonymous-types

有时我需要使用元组，例如我有坦克列表和他们的目标坦克（他们追逐他们或类似的东西）：

```
List<Tuple<Tank,Tank>> mylist = new List<Tuple<Tank,Tank>>(); 
```

然后当我遍历列表时，我通过

```
mylist[i].item1 ...
mylist[i].item2 ... 
```

这很令人困惑，如果我可以通过以下方式访问它们，我总是忘记什么是 item1 和什么是 item2：

```
mylist[i].AttackingTank...
mylist[i].TargetTank... 
```

会更清楚，有没有办法在不定义类的情况下做到这一点：

```
MyTuple
{
public Tank AttackingTank;
public Tank TargetTank;
} 
```

我想避免定义这个类，因为那样我将不得不在不同的场景中定义许多不同的类，我可以做一些“技巧”并使这个匿名。

就像是 ：

```
var k = new {Name = "me", phone = 123};
mylist.Add(k); 
```

当然，当我定义它时我没有类型可以传递给 List

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-04-01T18:59:20.190

您可以为匿名类型创建一个空列表，然后使用它，享受完整的智能感知和编译时检查：

```
var list = Enumerable.Empty<object>()
             .Select(r => new {A = 0, B = 0}) // prototype of anonymous type
             .ToList();

list.Add(new { A = 4, B = 5 }); // adding actual values

Console.Write(list[0].A); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-01T18:41:33.340

你可以使用一个`List<dynamic>`.

```
 var myList = new List<dynamic>();
 myList.Add(new {Tank = new Tank(), AttackingTank = new Tank()});

 Console.WriteLine("AttackingTank: {0}", myList[0].AttackingTank); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-01T19:05:38.317

这是一个黑客：

```
var myList = Enumerable.Empty<int>()
    .Select(dummy => new { AttackingTank = default(Tank), TargetTank = default(Tank), })
    .ToList(); 
```

如果`Tank`是类类型，您可以编写`(Tank)null`而不是`default(Tank)`. 你也可以使用`Tank`你手头的一些实例。

* * *

编辑：

或者：

```
var myList = Enumerable.Repeat(
    new { AttackingTank = default(Tank), TargetTank = default(Tank), },
    0).ToList(); 
```

* * *

如果您制作通用方法，则不必使用`Enumerable.Empty`. 它可以是这样的：

```
static List<TAnon> GetEmptyListWithAnonType<TAnon>(TAnon dummyParameter)
{
    return new List<TAnon>();
} 
```

`TAnon`当然，它是使用推断的用法来调用的，如：

```
var myList = GetEmptyListWithAnonType(new { AttackingTank = default(Tank), TargetTank = default(Tank), }); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-11-08T13:00:07.847

值得注意的是，最后，有可能使用这样的语法。它已在 C# 7.0 中引入

```
var tanks = new List<(Tank AttackingTank, Tank TargetTank)>();

(Tank, Tank) tTank = (new Tank(), new Tank());
tanks.Add(tTank);

var a = tanks[0].AttackingTank;
var b = tanks[0].TargetTank; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-06-09T15:58:13.203

你可以有一个通用方法，它接受`params`并返回它：

```
public static IList<T> ToAnonymousList<T>(params T[] items)
{
  return items;
} 
```

所以现在你可以说：

```
var list=ToAnonymousList
(
  new{A=1, B=2},
  new{A=2, B=2}
); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-01T18:49:50.890

[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)怎么样？

```
dynamic tuple = new ExpandoObject(); 
tuple.WhatEverYouWantTypeOfTank = new Tank(); // Value of any type 
```

**编辑：**

```
dynamic tuple = new ExpandoObject();
tuple.AttackingTank = new Tank();
tuple.TargetTank = new Tank();

var mylist = new List<dynamic> { tuple };

//access to items
Console.WriteLine(mylist[0].AttackingTank); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-20T08:41:56.437

或者更简单

```
 var tupleList = (
           new[] {
                new { fruit = "Tomato", colour = "red"},
                new { fruit = "Tomato", colour = "yellow"},
                new { fruit = "Apple", colour = "red"},
                new { fruit = "Apple", colour = "green"},
                new { fruit = "Medlar", colour = "russet"}
            }).ToList(); 
```

这失去了静态功能。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-21T14:45:27.283

只是在这里添加一个更方便的位。我有时会使用亚历克斯的答案，但是当我需要它时试图追踪它，这让我有点发疯，因为它并不明显（我发现自己在搜索“新 {”）。

所以我添加了以下小静态方法（我希望我可以将其设为扩展方法，但是是什么类型的？）：

```
public static List<T> CreateEmptyListOf<T>(Func<T> itemCreator)
{
    return Enumerable
        .Empty<object>()
        .Select(o => itemCreator())
        .ToList();
} 
```

这将每次我需要此模式时不同的部分与相同的部分隔离开来。我这样称呼它：

```
var emptyList = Ext.CreateEmptyListOf(() => new { Name = default(string), SomeInt = default(int) }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-17T17:29:50.267

您可以创建对象列表：

```
List<object> myList = new List<object>(); 
```

然后将匿名类型添加到您的列表中：

```
myList.Add(new {Name = "me", phone = 123}); 
```

# c# - C# - 悬停按钮删除透明背景

> ID：15749449
> 
> 赞同：1
> 
> 时间：2013-04-01T18:39:48.430
> 
> 标签：c#, button, hover, mouse, transparency

我正在开发一个应用程序，它有几个透明背景的按钮。其中之一是自定义退出按钮，而不是使用标准的窗口边框。此退出按钮有两种颜色，另一种使用 MouseEnter 事件显示。退出按钮是一个带有透明背景的十字形。

透明背景工作正常，直到您悬停按钮。然后背景颜色似乎以某种方式变为控制并且透明度丢失。一旦将光标从按钮上移开，它就会恢复正常。这里奇怪的是，具有完全相同代码的完全相同的按钮可以在其他几个窗口上工作，除了这个是主窗体。

我尝试删除所有鼠标事件和单击事件，并且只有一个具有透明背景的按钮。现在，即使没有任何 MouseEnter 事件，也没有更改按钮背景图像，一旦悬停按钮，透明度就会丢失。所以基本上这是一个没有任何功能的静态按钮，一旦你通过改变背景颜色悬停它，它仍然会做出反应，为什么？

我对以前遇到过这个问题有一个模糊的记忆，但我似乎无法弄清楚我做了什么来解决它。

在此先感谢，弗雷德里克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T19:19:01.020

我现在发现了这个问题。如果其他人遇到此问题，请确保在 FlatAppearance 部分中将 MouseDownBackColor 和 MouseOverBackColor 设置为透明。那成功了。

# java - 如何从 doinbackground() 执行其他线程

> ID：15749454
> 
> 赞同：0
> 
> 时间：2013-04-01T18:40:03.480
> 
> 标签：java, android, universal-image-loader

我想下载多个图像，使用`ImageLoader.loadImage`它们将启动多个线程。因为它们需要一段时间才能执行，而且我不想锁定 UI，所以我想在`doInBackground()`AsyncTask 的函数中运行它们。

但是我无法在`doInBackground()`函数中启动新线程。有没有解决的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:46:42.767

我同意323go的评论

AsyncTask 被设计为围绕 Thread 和 Handler 的辅助类，并不构成通用线程框架。**AsyncTasks 最好用于短时间的操作（最多几秒钟）。**如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如**Executor、ThreadPoolExecutor 和 FutureTask。**（直接来自文档）

作为替代方案，您可以使用[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)。您可以提出多个香料请求。

**通用图像加载器**

要下载和显示大量图像，请使用列表视图或网格视图。为此，您可以使用 Universal Image Loader 或 Lazy list。通用图像加载器以惰性列表的示例原理工作。

我必须显示来自 picasa 相册公用文件夹的图像（大约 300 - 500）。我发出了一个http请求，响应是json。我使用 asynctask 发布 http 请求、获取响应、解析 json 以获取 url。获得网址后，我使用 Universal Image Loader 加载图像。因此，您可以使用 asynctask 进行短期运行操作。

假设您可以在列表中一次查看 3 张图像。这三个图像被下载，如果没有则被缓存并显示。当您滚动过程重复。一旦缓存的图像不需要再次下载。在这种情况下，UI 不会被阻止。您可以随时向下滚动。

Url 被认为是关键。图像缓存到 sdcard 或手机内存。可以指定缓存的位置。如果图像存在于缓存中。从缓存中显示图像，如果不下载，缓存并显示图像。

两者都使用缓存。Universal Image Loader 有很多配置选项。 [https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

查看链接中的功能。

在您的自定义适配器构造函数中

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(a, "your folder");

 // Get singletone instance of ImageLoader
 imageLoader = ImageLoader.getInstance();
 // Create configuration for ImageLoader (all options are optional)
 ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
      // You can pass your own memory cache implementation
     .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
     .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
     .enableLogging()
     .build();
  // Initialize ImageLoader with created configuration. Do it once.
  imageLoader.init(config);
  options = new DisplayImageOptions.Builder()
  .showStubImage(R.drawable.stub_id)//display stub image
  .cacheInMemory()
  .cacheOnDisc()
  .displayer(new RoundedBitmapDisplayer(20))
  .build(); 
```

在你的 getView()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
   imageLoader.displayImage(imageurl, image,options);//provide imageurl, imageview and options 
```

您可以配置其他选项以满足您的需求。

您应该使用 viewholder 来实现平滑的滚动和性能。[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)

# python - 使用 Django Python 创建动态表单并在自定义模板表中显示

> ID：15749458
> 
> 赞同：3
> 
> 时间：2013-04-01T18:40:19.597
> 
> 标签：python, html, django, forms, dynamic

我正在制作一个 Web 应用程序，它将在表格中显示学生列表，并在每个名称旁边有一个输入字段，允许用户给该学生一个“标签”。我无法弄清楚如何将这一切整合到一个表中。

这是我在 forms.py 中声明的表单：

```
class TagsForm(forms.Form):
    def __init__(self, *args, **kwargs):
        applicants = kwargs.pop('applicants')
        super(TagsForm,self).__init__(*args, **kwargs)
        for i, applicant in enumerate(applicants):
            self.fields['tag_%s' % i] = forms.CharField(label=applicant)

    def tagInput(self):
        for tags in self.cleaned_data.items():
            if tags.startswith('tag_'):
                yield (tags) 
```

然后在 view.py 我创建表单并将其传递到上下文中：

```
tags_form = TagsForm(request.POST or None, applicants=applicantQuery)
if tags_form.is_valid():
    for(tags) in tags_form.tagInput():
        ...
...
context = Context({'tagsForm':tags_form, ... }
return render_to_response('review/assignment.html', context) 
```

如您所见，我正在尝试为我将在表格中显示的每个申请人创建一个字符输入“标签”字段。然后在我的模板中我有这个：

```
<form name="applicants" method="POST">
<table class="sortable" id="appTable">
<tr> 
     <th>EID</th>
     <th>Name</th>
     <th>Reviewer Tags</th>
</tr>

{% for applicant in applicants %}
<tr>
    <td> <a href="../../{{ applicant.app_id }}/overview" target="_blank">{{ applicant.app_eid }}</a></td>   

    <td> {{ applicant.app_displayName }} </td>
    <td> {{ tagsForm.tags_???}} </td>
</tr>
{% endfor %}

</table><br />
{{ tags_form.non_field_errors }}
<input type="submit" value="Submit Tags"/>
</form> 
```

我不确定如何遍历 tagsForm tags 字段，因为我已经在遍历申请者。我对 Django/HTML 很陌生，所以解决方案可能很简单，但是我搜索并找不到任何试图做这样的事情的人。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:40:46.407

我不确定你为什么在这里遇到问题。为什么你正在迭代某些东西的事实已经阻止你迭代其他东西？嵌套循环在 Django 模板中就像在任何其他编程环境中一样。

不用太深入你的代码，看起来你应该能够做到`for tag in applicant.tags`。

# html - IE 没有正确显示页脚和包含

> ID：15749460
> 
> 赞同：-1
> 
> 时间：2013-04-01T18:40:24.077
> 
> 标签：html, css, sticky-footer

我正在以下站点上工作：buzzspherefilms.site40.net 并且页脚在 IE 中未按预期显示。它适用于 Chrome 和 Mozilla，但在 IE 中，页脚出现在页面底部。谁能明白为什么？此外，任何将其实现为粘性页脚的帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:10:12.497

简短的回答是您需要调整`margin-top`on `#container`。

在您的布局中，您有两个固定元素`header`和`navbar`，它们的组合高度分别为 120 像素和 40 像素。

如果您设置`margin-top: 160px`on `container`，则布局将在浏览器中一致地工作。

IE 计算自动上边距的方式与其他浏览器不同，这可能会导致问题。

至于粘页脚，网上有关于如何做的文章，所以这是你的第一步。

**jQuery 修复**

您正在尝试`container`使用 jQuery 动态设置高度。出现跨浏览器问题可能是因为`.outerHeight`IE 中的数学运算方式不同。

先把它注释掉（你可以稍后再放回去）并尝试一个简单的 CSS 修复。

```
<script>
    $(document).ready(function() {
       $("#quickSearch").autocomplete({
       source: "quickSearch.php",
       minLength: 2
       });
          $('#container').css('marginTop', $('#header').outerHeight(true) + $('#navbar').outerHeight(true) );

    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:08:01.883

您提到使用sticky-footer，但看起来您并没有使用它。这是允许您执行此操作的 css。（我只是从网站上复制和粘贴）

```
* {
    margin: 0;
}
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -142px; /* the bottom margin is the negative value of the footer's height */
}
.footer, .push {
height: 142px; /* .push must be the same height as .footer */
} 
```

来源：[http ://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

# javascript - 如何获得带有 jquery 的 id 使用 jquery 脚本遍历 HTML 表单元素，我看到我可以使用以下代码获取标签的 id： $(":checkbox,:radio,:text,:selected", this).each(function (){ var controlName = $(this).attr("id"); var controlType = $(this).attr("type"); alert(controlName); if(controlType=="chec

> ID：15749462
> 
> 赞同：0
> 
> 时间：2013-04-01T18:40:30.060
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:43:18.143

:selected 不是你想的那样。

> **[jQuery：选择](http://api.jquery.com/selected-selector/)**
> 
> 描述：选择所有被选中的元素。
> 
> 添加的版本：1.0
> 
> `jQuery( ":selected" )`:selected 选择器适用于元素。它不适用于复选框或无线电输入；使用：检查他们。

您想用来`select`获取选择元素。

或者您可以使用[`:input`](http://api.jquery.com/input-selector/)which 获取所有输入元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:42:45.287

[`:selected`匹配 selected `<option>`s](http://api.jquery.com/selected-selector/)，而不是`<select>`元素。更改选择器：

```
$(":checkbox,:radio,:text,select", this) 
```

**NB** [`$(this).attr('id')`总是可以替换为`this.id`.](https://stackoverflow.com/q/4651923/139010)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:45:22.807

```
<select id="foo">
  <option value="1">a</option>
  <option value="2">b</option>
  <option value="3">c</option>
</select> 
```

对于选择标签，您可以使用`:selected`过滤器来获取选择选项父项的 id：

```
var id = $(this).children(":selected").attr("id"); 
```

# php - XSLT - 显示位于不同 XML 文件中的子元素

> ID：15749464
> 
> 赞同：0
> 
> 时间：2013-04-01T18:40:36.387
> 
> 标签：php, xml, xslt, amazon

我有以下`movies.xml`文件存储电影标题和用于 dvd 和 Bluray 的 Amazon API ItemId：

```
<movies
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="movies.xsd">

<movie movieID="1">
    <title>The Dark Knight</title>
    <amazon>
        <dvd>B004Q9SZGC</dvd>
        <bluray>B004Q9T6CO</bluray>
    </amazon>
</movie>

<movie movieID="2">
    <title>Lawless</title>
    <amazon>
        <dvd>B008OPZ83C</dvd>
        <bluray>B008OPZD8C</bluray>
    </amazon>
</movie>

</movies> 
```

`movies_list.xsl`将电影标题显示为超链接，将用户带到`movie_details`他们可以看到他们点击的电影标题及其对应的亚马逊 dvd 和 Bluray 产品信息的页面：

电影列表.xsl

```
<xsl:template match="/">
    <xsl:element name="html">
        <xsl:element name="head">
            <xsl:element name="h2">Movies list</xsl:element>
        </xsl:element>
        <xsl:element name="body">
            <xsl:apply-templates select="movies/movie"/>
        </xsl:element>
    </xsl:element>
</xsl:template>

<xsl:template match="movie">
    <xsl:element name="a">
        <xsl:attribute name="href">movie_details.php?movieID=<xsl:value-of select="@movieID"/></xsl:attribute>
        <xsl:value-of select="title"/>
    </xsl:element>
    <xsl:element name="br" />
</xsl:template> 
```

`movie_details.php`从 Amazon API XML 查找并显示电影信息（DVD 和蓝光）：

```
$movies = file_get_contents('movies.xml');
$xml = new SimpleXmlElement($movies);

$movieId = $_GET['movieID'];
$movie = $xml->xpath("/movies/movie[@movieID = '$movieId']")[0];
if($movie) {
   $dvd = $movie->amazon->dvd;
   $bluray = $movie->amazon->bluray;

    $request = aws_signed_request('co.uk', array(
            'Operation' => 'ItemLookup',
            'ItemId' => $dvd.', '.$bluray,
            'ResponseGroup' => 'Medium, Offers',
            'MerchantId' => 'All'), $public_key, $private_key, $associate_tag); 

    $response = @file_get_contents($request);

    $xml2 = new DOMDocument();
    $xml2->loadXML($response);

    $xsl = new DOMDocument;
    $xsl->load('movie_details.xsl');

    $proc = new XSLTProcessor();
    $proc->importStyleSheet($xsl);

    $params = $_GET['movieID'];
    $proc->setParameter('', 'movieID', $params);

    echo $proc->transformToXML($xml2);

} 
```

我没有将实际的 ItemId 值硬编码到数组中，而是创建了 $dvd 和 $bluray 变量，用于查找存储在本地`movies.xml`文件中的 dvd 和 Bluray 的 ItemId。

这是`movie_details.xsl`显示所有电影详细信息的文件：标题（来自 movies.xml）和亚马逊 DVD 和蓝光图片（来自亚马逊 API）：

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:aws="http://webservices.amazon.com/AWSECommerceService/2011-08-01"
exclude-result-prefixes="aws">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

<xsl:variable name="moviesXML" select="document('movies.xml')"/>

<xsl:param name="movieID"/>

<xsl:template match="/">
    <xsl:element name="html">
        <xsl:element name="head">
            <title>Movie details</title>
        </xsl:element>
        <xsl:element name="body">  
            <xsl:apply-templates select="$moviesXML/movies/movie[@movieID=$movieID]" />
        </xsl:element>
    </xsl:element>
</xsl:template>

<xsl:template match="movie">
        <xsl:value-of select="title"/>
        <xsl:element name="br" />
        <xsl:apply-templates select="../aws:ItemLookupResponse/aws:Items/aws:Item/aws:MediumImage/aws:URL"/>
</xsl:template>

<xsl:template match="aws:URL">
    <xsl:element name="img">
        <xsl:attribute name="src">
            <xsl:value-of select="." />
        </xsl:attribute>
    </xsl:element>
    <xsl:element name="br" />
</xsl:template>

</xsl:stylesheet> 
```

根据用户在页面中单击的电影标题`movies_list`，它应该将他带到`movie_details`将显示该特定电影标题及其对应的亚马逊 dvd 和 Bluray URL（链接到产品封面图片）的页面，这反过来将是显示为图片。

我确实`movie_details`根据用户在页面中单击的电影标题获得了页面上显示的电影标题`movies_list`。

但是，我不确定我需要在哪里放置：

```
<xsl:apply-templates select="../aws:ItemLookupResponse/aws:Items/aws:Item/aws:MediumImage/aws:URL"/> 
```

还显示该电影的亚马逊 DVD 和 Bluray 产品信息。

我想要达到的最终结果：

![展示](https://i.imgur.com/O7soOet.png)

电影 ID 2 应该以相同的方式工作，只是它将显示无法无天的电影信息而不是黑暗骑士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:57:58.930

您可以在这里做的一件事是存储对输入 XML 根目录的引用：

```
<xsl:variable name="moviesXML" select="document('movies.xml')"/>
<xsl:variable name="inputRoot" select="/" /> 
```

然后您可以在第二个模板中执行此操作：

```
<xsl:template match="movie">
    <xsl:value-of select="title"/>
    <xsl:element name="br" />
    <xsl:apply-templates 
       select="$inputRoot/aws:ItemLookupResponse/aws:Items
                 /aws:Item/aws:MediumImage/aws:URL"/>
</xsl:template> 
```

看起来您还需要修改为您的 Amazon API 请求获取 DVD 和蓝光 ID 的方式：

```
$movies = file_get_contents('movies.xml');
$xml = new SimpleXmlElement($movies);

$movieId = $_GET['movieID'];
$movieSelect = $xml->xpath("/movies/movie[@movieID = '$movieId']");
$movie = $movieSelect[0];
if($movie) {
   $dvd = $movie->amazon->dvd;
   $bluray = $movie->amazon->bluray;

   // the rest of your code
} 
```

# php - DI注入数据库时 的模拟存储（通过构造函数）

> ID：15749466
> 
> 赞同：0
> 
> 时间：2013-04-01T18:40:38.620
> 
> 标签：php, unit-testing, dependency-injection, mocking

我正在尝试尽可能地编写我的代码（并且可以很好地测试），但这是我正在考虑的事情。

我有一个对象，我通过 DI 传递依赖项

```
<?php    
public function __constructor(Connection $connection) {

} 
```

当我编写单元测试时，我使用我的 DI 容器并获取对象

```
$object = $context->getService("class"); 
```

然后使用它的功能。

问题是，我怎样才能模拟连接或更好的“一些存储” - 不一定是数据库连接。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:45:24.530

问题在于（从我的角度来看）在您的测试中使用 DIC。当我们对 Symfony2 应用程序进行单元测试时，我们会模拟每个依赖项（使用[Mockery](https://github.com/padraic/mockery "嘲讽")）。我们为常见的 mock 构建了工厂，例如 DB 连接接口或 Redis 连接接口等。这加快了我们的测试创建过程。

# javascript - 具有固定比例和最小宽度的轮播图像

> ID：15749467
> 
> 赞同：0
> 
> 时间：2013-04-01T18:40:42.273
> 
> 标签：javascript, html, css, twitter-bootstrap

我正在寻找像[https://squareup.com/](https://squareup.com/)这样的轮播。我希望图像具有固定的比例、最小宽度并处理高达 1400 像素宽度的屏幕。我尝试使用 CSS 中断的所有内容。

CSS：

```
.carousel .item {
  height: 800px;
}
.carousel img {
  position: absolute;
  top: 0;
  left: 0;
  min-width: 1400px;
  height: 100%;
} 
```

我可以使用响应式插件或图像滑块吗？或者我完全不知道的 CSS 技巧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:47:54.783

Twitter 轮播是开箱即用的响应式。首先，如果您想要屏幕**最大为**`min-width: 1400px;`1400 像素，请更改为。`max-width: 1400px;`

 **但是，你不会得到固定的比率（在你的例子中没有固定的比率）。为此，您可以使用 CSS3 媒体查询来更改图片的宽度和高度。**

# c++ - C++ 内联函数可以调用稍后在标头中声明的函数吗？

> ID：15749468
> 
> 赞同：3
> 
> 时间：2013-04-01T18:40:43.097
> 
> 标签：c++, inline, forward-declaration, inline-code, function-declaration

以下在 MSVC2008 和 MSVC2010 中运行良好*：*

```
class Foo {
public:
  static void FuncA(void) {
    FuncB(); // "FuncB()" NOT DECLARED YET? WORKS, MSVC2008
  }
  static void FuncB(void);
}; 
```

是的，这有点奇怪：`FuncA()`调用`FuncB()`，即使（当时）`FuncB()`尚未声明。但是，MSVC2008 和 MSVC2010 认为这很好。

显然，`gcc`不认为这很好—— `FuncB was not declared in this scope`。

**ISSUE：** 我有一堆这些，声明它们然后定义它们会很“痛苦”。此外，很难正确地“排序”它们，因此每个函数都只在声明后调用函数。 ***但是，我猜我需要先声明，然后再定义？***

这些函数是不是模板，还是在模板类中定义的规则是否不同？

具体来说，我注意到微软非常“后期编译”，它接受大量相互耦合的代码，并且稍后解析（在编译时，当模板参数化被触发时），而*现在*`gcc`似乎想要编译它“看到”代码（正确性的初始传递，并在参数化/调用期间再次传递）。

 *（当我们将 Microsoft 代码移植到 Linux/gcc 时，就会出现这个问题。）

**===更新===**

以下是我们拥有的“替代”场景（在此代码移植工作中），您的答案会根据其中任何一个而改变吗？

```
 // Alternate-Scenario-B
  class Foo2 {
    public:
      template<typename SOME_TYPE>
      static void FuncA(const SOME_TYPE& some_type) {
        FuncB(some_type); // "FuncB()" NOT DECLARED YET? WORKS, MSVC2008
      }
      template<typename SOME_TYPE>
      static void FuncB(const SOME_TYPE& some_type);
    }; 
```

...和：

```
 // Alternate-Scenario-C
  template<typename SOME_TYPE>
  class Foo3 {
    public:
      static void FuncA(const SOME_TYPE& some_type) {
        FuncB(some_type); // "FuncB()" NOT DECLARED YET? WORKS, MSVC2008
      }
      static void FuncB(const SOME_TYPE& some_type);
    }; 
```

**===更新+2===**

感谢您的评论，其中共识似乎这是有效的 C++ 代码，并且应该可以工作*（正如@Adam 建议的那样，函数“defined-inline”应该表现得好像它是在类之后定义的，并且应该能够调用定义的函数在内联定义之后的类接口中）。*

更多信息：

是的，我确实从`FuncA()`内联实现的第一个示例中遇到了这个编译错误：

```
'FuncB' is not a member of 'Foo' 
```

...使用：

```
gcc (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2 
```

（回想一下，这适用于 MSVC2008/MSVC2010）。

我现在意识到我的代码示例（上面）是不够的（上面的例子没有显示这个错误`gcc`），这里有一些更多的细节：

*   `Foo`有一个基类（我认为这不重要）
*   `Foo`定义一个通过这些函数传递的内部`enum`（我认为这不重要）
*   这些功能通过宏“扩展”（我认为很重要——见下文）
*   这些功能中有五十六 (56) 个（我认为很重要——见下文）

一个更完整的代码示例将是（我对此并不感到自豪）：

```
#define FOO_FUNCS(CLASS_NAME,CLASS_ENUM) \
  static void FuncA(CLASS_ENUM value_enum) { \
    FuncB(value_enum); /*PROBLEM*/  \
  } \
  static void FuncB(CLASS_ENUM value_enum) { \
    FuncC(value_enum);  \
  } \
  /*...THERE ARE 56 FUNCS IN THIS MACRO, THREE LINES EACH...*/

class Foo : public FooParent {
  public:
    enum FooEnum { FOO_ONE, FOO_TWO };
    FOO_FUNCS(Foo,FooEnum)  // EXPAND THE 56 FUNCS
}; 
```

**代码意图：** 基`FooParent`类具有旨在由（许多）派生类“共享”的实现。派生类定义它们自己的`enum`值。使用这些`enum`值的函数是通过宏实现的（因为`FooParent`不是 a `template<>`，并且不能依赖于派生的`enum`- ）。

奇怪的行为：

*   如果`FooA(){FooB();}`嵌套仅通过“几行”引用“稍后”定义的函数，则`gcc`可以正常编译。但是，如果尚未声明的函数要晚得多，例如`Foo2(){Foo53();}`，则`gcc`断定它`Foo53()`不是类的成员（但它是）。

这是我认为正在发生的事情：

*   物理上位于“单行”上的大量代码（用于 56 个函数）似乎存在问题。如果我将这些函数从宏中取出，**并且**如果我删除了`\`转义行结尾，那么`gcc`编译得很好。

因此，我认为（代码移植）答案是：

*   不要使用预处理器宏
*   制作一个`FooParentBase<>`派生自 的模板类`FooParent`，我们从中派生`Foo`，这需要`typename Foo::enum`作为模板参数

我对这些更改很好（我不喜欢宏），但我觉得这里`gcc`似乎有问题很奇怪。

对于如何解决这个问题还有其他建议吗？（上面是否重新考虑了你会做什么？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:58:28.563

您的所有三个场景都是正确的，并且可以使用 g++ 和 clang 进行编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:07:40.820

你的代码对我来说看起来完全合法。类定义中的内联定义应该被视为等同于在类定义之后立即具有内联定义的声明（此时 FuncB() 的声明将可用）。

我的 GCC 版本接受此代码为有效代码（当然，假设我提供了每个 FuncB() 的简单实现，您发布的所有三个示例）。

```
~$ g++ --version
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
...
```

我相信这里需要更多信息。也许发布您的 GCC 版本和您看到的特定错误消息。

**========稍后回复=======**

我已经用宏中的 70 个函数尝试了你的最新示例，它在 gcc 4.6.3 中仍然为我工作。这是我尝试的测试（以明显的方式缩短了宏）：

```
`#include <iostream>
using std::cout;
struct FooParent {
    static void Func71( int ) {
        cout << "Called\n";
    }
};

#define FOO_FUNCS(CLASS_NAME,CLASS_ENUM) \
  static void Func1(CLASS_ENUM value_enum) { \
    Func2(value_enum); /*PROBLEM*/  \
  } \
  static void Func2(CLASS_ENUM value_enum) { \
    Func3(value_enum);  \
  } \
  /* Functions Func3...Func69 snipped */ \
  static void Func70(CLASS_ENUM value_enum) { \
    Func71(value_enum);  \
  } \
  /*...THERE ARE 70 FUNCS IN THIS MACRO, THREE LINES EACH...*/

class Foo : public FooParent {
  public:
    enum FooEnum { FOO_ONE, FOO_TWO };
    FOO_FUNCS(Foo,FooEnum)  // EXPAND THE 70 FUNCS
};

int main() {
    Foo::Func1(Foo::FOO_ONE);
}` 
```*

# facebook - 如何以编程方式填充 FB 隐私 URL

> ID：15749469
> 
> 赞同：1
> 
> 时间：2013-04-01T18:40:45.073
> 
> 标签：facebook, privacy

[http://screencast.com/t/COmDrTap](http://screencast.com/t/COmDrTap)

嗨，我有一堆应用程序，我想以编程方式更新隐私政策 URL 和 ToS URL。

当我进入涂鸦应用程序（或我的一个）的图形资源管理器时，隐私 URL 变暗（也是我尝试该应用程序时的应用程序名称）。

这是否意味着它无法完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-25T14:44:16.707

您可以将其设置为所有其他参数，使用[https://graph.facebook.com/APP_ID/](https://graph.facebook.com/APP_ID/)作为端点，**privacy_policy_url**作为参数名称。

# javascript - Asp.net MVC 中的 jquery 验证错误 - 无法获取属性“调用”的值：对象为空或未定义

> ID：15749471
> 
> 赞同：3
> 
> 时间：2013-04-01T18:40:48.793
> 
> 标签：javascript, jquery, asp.net-mvc, validation, jquery-validate

我正在尝试在客户端进行一些验证检查，但我的 ASP.NET MVC 应用程序甚至在打开索引页面之前就失败了。我收到错误 Microsoft Jscript 运行时错误：无法获取属性“调用”的值：对象为空或未定义。

下面是我的脚本。我正在使用部分视图来显示 UI 对话框来编辑员工。我已确保将 jqueryval 捆绑包添加到 _Layout.cshtml 并且 clientsidevalidation 设置为 true。任何帮助将不胜感激 - 谢谢

```
var $form = $("#updateEmployeeForm");
$form.unbind();
$form.data("validator", null);
// Check document for changes
$.validator.unobtrusive.parse(document);
// Re add validation with changes
$form.validate($form.data("unobtrusiveValidation").options);
dialogDiv.dialog('open'); 
```

**局部视图**

```
@using (Ajax.BeginForm("EditEmployee", "Employee", new AjaxOptions
{
  InsertionMode = InsertionMode.Replace, 
  HttpMethod = "POST",
  OnSuccess = "updateSuccess"
}, new { @id = "updateEmployeeForm" }))

{

  @Html.ValidationSummary(true) .....} 
```

**我的视图模型**

```
[Required]
public string FirstName { get; set; }
public string MiddleName { get; set;}
[Required] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T14:24:52.677

感谢 Slicksim

“我相信我在将 jquery > 1.9 与 asp.net mvc 一起使用时已经看到了这一点。尝试安装 jquery 1.8.2 看看是否能解决它。我认为新版本 jquery 的不显眼的 ajax 或验证器存在问题 – Slicksim 4 月 2 日 10:30"

这就是解决方案。转到以前的 Jquery。

# jquery - jQuery UI DatePicker 从多个字段中读取日期

> ID：15749474
> 
> 赞同：0
> 
> 时间：2013-04-01T18:41:05.590
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我有月、日和年的单独字段，并且对于 div 中包含的每组三个字段都有一个日历控件。我试图让日历弹出窗口默认为字段中设置的日期，如果有一个，如果在 3 个字段中没有设置日期，它会像当前一样默认为今天。

这是我的代码。

HTML：

```
 <h1>Date Picker Example</h1>
<div class="date-picker">
 <label for="preferredDate">Date</label>
 <input type="text" class="date_month" value="06" size="2" maxlength="2" /> / 
 <input type="text" class="date_day" value="01" size="2" maxlength="2" /> / 
 <input type="text" class="date_year" value="2014" size="4" maxlength="4" />  
</div>
<div class="date-picker">
 <label for="preferredDate">Date</label>
 <input type="text" class="date_month" value="09" size="2" maxlength="2" /> / 
 <input type="text" class="date_day" value="09" size="2" maxlength="2" /> / 
 <input type="text" class="date_year" value="2017" size="4" maxlength="4" />   
</div>
<div class="date-picker">
 <label for="preferredDate">Date</label>
 <input type="text" class="date_month" size="2" maxlength="2" /> / 
 <input type="text" class="date_day" size="2" maxlength="2" /> / 
 <input type="text" class="date_year" size="4" maxlength="4" />  
</div> 
```

jQuery：

```
$(".date_year").datepicker({
    showOn: 'button',
    //buttonImage: "calendar_icon.png", 
    buttonText: 'Cal',
    buttonImageOnly: false,
    showAnim: 'fadeIn',
    dateFormat: 'mm/dd/yy',
    onClose: function (dateText, picker) {
        dateArr = dateText.split('/');
        $(this).siblings('.date_month').val(dateArr[0]);
        $(this).siblings('.date_day').val(dateArr[1]);
        $(this).val(dateArr[2]);
    }
}); 
```

示例：http: [//jsfiddle.net/C57Ws/3/](http://jsfiddle.net/C57Ws/3/)

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:03:57.577

您可以使用 datepicker 选项`beforeShow`查看输入并创建一个 datepicker 对象来设置您想要的任何内容。

我修改了你的[小提琴](http://jsfiddle.net/oumichaelm/C57Ws/6/)

基本上我只是使用了你在`onClose`选项中的代码。但是反过来了。

```
beforeShow: function (dateText, picker) {

    var month =     $(this).siblings('.date_month').val();
    var day = $(this).siblings('.date_day').val();
    var year = $(this).val();
    var showDate = day+ "/" + month + "/" + year;
    alert(showDate);
    // do some error checking before returning date to show.
    return { defaultDate: showDate };
}, 
```

我还更改了您在`onClose`. 如果您注意到您的示例，数据选择器将附加到“年份”输入。如果用户没有单击日期（单击日期选择器外部），`dateText`那么您传入的将只有年份。您的拆分方法不会包含三个变量的完整日期。`date_month`如果未单击日期，这将导致年份被添加到..

您可以使用`$(this).datepicker( "getDate" )`它来确保您获得点击的日期，或者如果没有点击任何内容，则为空字符串。它返回一个可以使用标准日期对象方法的 Date 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:02:37.437

您必须使用 jQueryUI 选项[`defaultDate`](http://api.jqueryui.com/datepicker/#option-defaultDate)或 jQueryUI 方法[`setDate`](http://api.jqueryui.com/datepicker/#method-setDate)以及 jQueryUI 选项[`onSelect`](http://api.jqueryui.com/datepicker/#option-onSelect)。

我建议给每组日期输入（日、月和年）一个唯一标识符。目前，您没有任何东西可以区分每组日期。

# java - Java String HEX 到 String ASCII 带重音符号

> ID：15749475
> 
> 赞同：0
> 
> 时间：2013-04-01T18:41:06.170
> 
> 标签：java, utf-8, hex, ascii

我有字符串 `String hex = "6174656ec3a7c3a36f";`，我想得到`String output = "atenção"`但在我的测试中我只 `String output = "aten????o";` 知道我做错了什么？

```
String hex = "6174656ec3a7c3a36f";
StringBuilder output = new StringBuilder();
for (int i = 0; i < hex.length(); i+=2) {
  String str = hex.substring(i, i+2);
  output.append((char)Integer.parseInt(str, 16));
} 

System.out.println(output); //here is the output "aten????o" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T18:52:49.013

考虑

```
String hex = "6174656ec3a7c3a36f";                                  // AAA
ByteBuffer buff = ByteBuffer.allocate(hex.length()/2);
for (int i = 0; i < hex.length(); i+=2) {
    buff.put((byte)Integer.parseInt(hex.substring(i, i+2), 16));
}
buff.rewind();
Charset cs = Charset.forName("UTF-8");                              // BBB
CharBuffer cb = cs.decode(buff);                                    // BBB
System.out.println(cb.toString());                                  // CCC 
```

哪个打印：`atenção`

基本上，您的十六进制字符串表示以 UTF-8 编码时表示字符串 atenção 中**字符的****字节的十六进制编码。**

 **解码：

*   你首先必须从你的十六进制字符串到字节（AAA）
*   然后从字节到字符（BBB）——这取决于编码，在你的情况下是 UTF-8。
*   从字符到字符串 (CCC)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T18:53:16.993

您的十六进制字符串似乎表示 UTF-8 字符串，而不是 ISO-8859-1。

我可以这样说的原因是，如果它是 ISO-8859-1，那么每个字符都有两个十六进制数字。您的十六进制字符串有 18 个字符，但您的预期输出只有 7 个字符。因此，十六进制字符串必须是可变宽度编码，而不是像 ISO-8859-1 那样每个字符一个字节。

以下程序产生输出：`atenção`

```
 String hex = "6174656ec3a7c3a36f";
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    for (int i = 0; i < hex.length(); i += 2) {
      String str = hex.substring(i, i + 2);
      int byteVal = Integer.parseInt(str, 16);
      baos.write(byteVal);
    } 
    String s = new String(baos.toByteArray(), Charset.forName("UTF-8")); 
```

如果您更改`UTF-8`为`ISO-8859-1`，您将看到：`atenÃ§Ã£o`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T18:43:52.267

[Java 字符串是 Unicode](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3.3) ：每个字符都以16 位编码。你的字符串 - 我想 - 一个“C”字符串。您必须知道字符编码器的名称并使用[CharsetDecoder](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/CharsetDecoder.html)。

```
import java.nio.ByteBuffer;
import java.nio.CharBuffer;
import java.nio.charset.CharacterCodingException;
import java.nio.charset.Charset;
import java.nio.charset.CharsetDecoder;

public class Char8859_1Decoder {

   public static void main( String[] args ) throws CharacterCodingException {
      String hex = "6174656ec3a7c3a36f";
      int len = hex.length();
      byte[] cStr = new byte[len/2];
      for( int i = 0; i < len; i+=2 ) {
         cStr[i/2] = (byte)Integer.parseInt( hex.substring( i, i+2 ), 16 );
      }
      CharsetDecoder decoder = Charset.forName( "UTF-8" ).newDecoder();
      CharBuffer cb = decoder.decode( ByteBuffer.wrap( cStr ));
      System.out.println( cb.toString());
   }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-01T18:46:30.563

ç 和 ã 是 16 位字符，因此它们不像您在解码例程中假设的那样用一个字节表示，而是用一个完整的字表示。

我不会将每个字节转换为字符，而是将字节转换为 java Bytes，然后使用字符串例程将 Bytes 数组解码为字符串，从而使 java 完成确定解码例程的枯燥任务。

当然，java 可能猜错了，所以你可能需要提前知道编码是什么，根据@Aubin 或@Martin Ellis 给出的答案**

# php - 提交按钮不处理 PHP 表单

> ID：15749477
> 
> 赞同：1
> 
> 时间：2013-04-01T18:41:21.577
> 
> 标签：php, html, forms, email, webforms

[http://www.bridgetjoy.com/Web/requestInfo.html](http://www.bridgetjoy.com/Web/requestInfo.html)

我无法处理上述表单...这是我的 php 处理代码，我正在让它重定向到我的成功页面，但它没有显示在我的收件箱中。任何帮助，将不胜感激。谢谢！

```
<?php

if(isset($_POST['submit'])) {
   $to = "bridgetjoymedia@gmail.com" ;     //put your email address on which you want to receive the information
   $subject = "Information Request";   //set the subject of email.
   $headers = "From: $email";
   $message = "<table><tr><td>Title :</td><td>".$_POST['title']."</td></tr>
               <tr><td>First Name :</td><td>".$_POST['firstName']."</td></tr>
               <tr><td>Last Name :</td><td>".$_POST['lastName']."</td></tr>
               <tr><td>Degree :</td><td>".$_POST['degree']."</td></tr>
               <tr><td>Address :</td><td>".$_POST['address1']."</td></tr>
               <tr><td>&nbsp;</td><td>".$_POST['address2']."</td></tr>
               <tr><td>&nbsp;</td><td>".$_POST['address3']."</td></tr>
               <tr><td>City :</td><td>".$_POST['city']."</td></tr>
               <tr><td>State :</td><td>".$_POST['state']."</td></tr>
               <tr><td>ZipCode :</td><td>".$_POST['zipCode']."</td></tr>
               <tr><td>Country :</td><td>".$_POST['country']."</td></tr>
               <tr><td>E-mail Address :</td><td>".$_POST['email']."</td></tr>
               <tr><td> Secondary E-mail Address :</td><td>".$_POST['email2']."</td></tr>
               <tr><td>Primary Phone :</td><td>".$_POST['phone1']."</td></tr>
               <tr><td>Primary Phone Location :</td><td>".$_POST['phone1_location']."</td></tr>
               <tr><td>Secondary Phone :</td><td>".$_POST['phone2']."</td></tr>
               <tr><td>Secondary Phone Location :</td><td>".$_POST['phone2_location']."</td></tr>
               <tr><td>Fax :</td><td>".$_POST['phone3']."</td></tr>
               <tr><td>Reason for Request :</td><td>".$_POST['relation']."</td></tr>
               <tr><td>Reason for Request :</td><td>".$_POST['relation_specify']."</td>
               <tr><td>Reason for Request :</td><td>".$_POST['physician_specialty']."</td>
               <tr><td>Reason for Request :</td><td>".$_POST['surgeon_specialty']."</td>
               <tr><td>Reason for Request :</td><td>".$_POST['prof_specify']."</td></tr>
               <tr><td>Reason for Request :</td><td>".$_POST['other_specify']."</td></tr>
               <tr><td>Diagnosis :</td><td>".$_POST['diagnosis']."</td></tr>
               <tr><td>Insurance :</td><td>".$_POST['insurance']."</td></tr>
               <tr><td>How did you hear of Avery Biomedical :</td><td>".$_POST['source']."</td></tr>
               <tr><td>Comments :</td><td>".$_POST['comments']."</td></tr>
               </table>" ;

    $send_contact = mail($to,$subject, $headers,$message);

// Check, if message sent to your email
// display message "We've recived your information"
if($send_contact){
header("Location: success.html");
exit();}
else {

header("Location: failure.html");
exit();}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-08T14:54:41.263

许多邮件服务（例如 Gmail）会大力检查垃圾邮件，否则您会收到的大部分垃圾邮件只是退回，甚至不会进入您的垃圾邮件文件夹！

为了防止这种情况发生，如果您发送的邮件服务器具有有效的 MX 和 SPF 记录，这会有所帮助，尽管这对大多数人来说是相当技术性的。但是，由于 Gmail 相当知名，许多服务不会退回来自 smtp.mail.google.com (Gmail) 的电子邮件。因此，您可能会受益于为您的脚本设置一个帐户以在 Gmail 上使用，然后使用第三方库连接到该帐户并发送/接收电子邮件。

如果您还没有研究过，SwiftMailer 允许您使用 PHP 代表 Gmail 帐户发送邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:47:24.873

由 mail() 函数发送的电子邮件由于被诈骗者使用而被阻止尝试使用来自 PEAR 或 smtp 类的 sendmail

phpmailer [https://code.google.com/a/apache-extras.org/p/phpmailer/](https://code.google.com/a/apache-extras.org/p/phpmailer/)

PEAR 发送邮件[https://pear.php.net/manual/en/package.mail.mail.send.php](https://pear.php.net/manual/en/package.mail.mail.send.php)

看看[PHP：mail() 与 SendMail](https://stackoverflow.com/questions/1883615/php-mail-vs-sendmail)

# c++ - 以秒为单位的打印时间

> ID：15749482
> 
> 赞同：3
> 
> 时间：2013-04-01T18:41:56.180
> 
> 标签：c++, time, time-t

我正在编写一个程序并尝试计算给定代码块运行时经过的秒数。之后我想以秒为单位打印运行代码块所花费的总时间。我写的是：

```
time_t start = time(0);
// block of code
double seconds_since_start = difftime(time(0), start);
printf("seconds since start: %2.60f\n", seconds_since_start); 
```

我已经`printf()`打印到 60 位小数精度，但所有时间仍然是 0.000000 ......

我的时间函数有错误吗？我很难相信我所要求的时间任务不会以 60 位小数精度计算任何时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T18:50:10.120

您可以使用 C++11 中提供的日期和时间实用程序：

```
#include <chrono>
#include <iostream>
#include <thread>

int main()
{
    auto start = std::chrono::high_resolution_clock::now();

    std::this_thread::sleep_for(std::chrono::seconds(5));

    auto end = std::chrono::high_resolution_clock::now();

    auto difference = std::chrono::duration_cast<std::chrono::seconds>(end - start).count();

    std::cout << "Seconds since start: " << difference;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T18:44:10.870

from 的返回值[`time`](http://pubs.opengroup.org/onlinepubs/009696699/functions/time.html)是整数秒。转换为 a`double`不会带回丢失的小数秒。

您需要更精确的时钟功能，例如[`gettimeofday`](http://pubs.opengroup.org/onlinepubs/009696699/functions/gettimeofday.html)（如果您想要挂钟时间）或[`times`](http://pubs.opengroup.org/onlinepubs/009696699/functions/times.html)（如果您想要 CPU 时间）。

在 Windows 上，有[`timeGetTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757629.aspx), `QueryPerformanceCounter`（Castiblanco 演示过）或[`GetSystemTimeAsFileTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724397.aspx).

C++ 终于得到了一些标准的高分辨率时钟函数和 C++11 的`<chrono>`头文件，这是 chris 在评论中建议的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T18:45:21.810

实际上我更喜欢用毫秒来做，因为如果你只使用秒，有很多函数可以返回 0，因此最好使用毫秒。

```
#include <time.h>

double performancecounter_diff(LARGE_INTEGER *a, LARGE_INTEGER *b){
  LARGE_INTEGER freq;
  QueryPerformanceFrequency(&freq);
  return (double)(a->QuadPart - b->QuadPart) / (double)freq.QuadPart;
}

int main()
{

LARGE_INTEGER t_inicio, t_final;
double sec;

QueryPerformanceCounter(&t_inicio);    

// code here, the code that you need to knos the time.

QueryPerformanceCounter(&t_final);

sec = performancecounter_diff(&t_final, &t_inicio);

printf("%.16g millisegudos\n", sec * 1000.0);*/

}

return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T18:52:34.193

您可以使用`boost::timer`

```
template<typename T>
double sortTime(std::vector<T>& v, typename sort_struct<T>::func_sort f){
    boost::timer t; // start timing
    f(v);
    return t.elapsed();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T18:47:01.920

像这样的东西应该工作：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main() 
{ 
    clock_t begin, end;
    double time_spent;

    begin = clock();

    //Do stuff

    end = clock();
    time_spent = (double)(end - begin) / CLOCKS_PER_SEC;
    printf("%Lf\n",time_spent);
} 
```

# intellij-idea - 如何向 IntelliJ Java/Gradle 项目添加方面以创建自给自足的战争

> ID：15749485
> 
> 赞同：1
> 
> 时间：2013-04-01T18:42:05.407
> 
> 标签：intellij-idea, war, gradle, netflix

**背景**

1.  下载并安装 IntelliJ 12.04 社区版
2.  从外部源创建项目（指向 Gradle 构建脚本）
3.  指定 JDK 7 作为项目的 SDK

*注意：项目在 github 上开源：Netflix/karyon*

**问题**

想简单地对项目进行战争。在安装了 GAE 插件的商业版本中，我能够指定 Web 应用程序方面，并通过工件功能创建战争。通过上述设置，唯一可用的方面是 Android。

**问题**

如何从 IDE 中创建一个自给自足的战争（包括所有依赖项，因此可以在任何容器中删除而无需额外的类路径要求）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:11:15.463

IntelliJ IDEA 社区版[不支持 Java EE](http://www.jetbrains.com/idea/features/editions_comparison_matrix.html)，你需要使用其他一些工具来打包战争（例如 Maven）。

# ios - 在 iOS 上发送 HTTP POST 请求

> ID：15749486
> 
> 赞同：86
> 
> 时间：2013-04-01T18:42:07.370
> 
> 标签：ios, objective-c, automatic-ref-counting, http-post, nsurlconnection

我正在尝试使用正在开发的 iOS 应用程序发送 HTTP Post，但推送从未到达服务器，尽管我确实收到了代码 200 作为响应（来自 urlconnection）。我从来没有得到服务器的响应，服务器也没有检测到我的帖子（服务器确实检测到来自 android 的帖子）

我确实使用 ARC，但将 pd 和 urlConnection 设置为强。

这是我发送请求的代码

```
 NSMutableURLRequest *request = [[NSMutableURLRequest alloc]
                                    initWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@",dk.baseURL,@"daantest"]]];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"text/xml"
   forHTTPHeaderField:@"Content-type"];

    NSString *sendString = @"<data><item>Item 1</item><item>Item 2</item></data>";

    [request setValue:[NSString stringWithFormat:@"%d", [sendString length]] forHTTPHeaderField:@"Content-length"];

    [request setHTTPBody:[sendString dataUsingEncoding:NSUTF8StringEncoding]];
    PushDelegate *pushd = [[PushDelegate alloc] init];
    pd = pushd;
    urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:pd];
    [urlConnection start]; 
```

这是我的代表代码

```
#import "PushDelegate.h"

@implementation PushDelegate
@synthesize data;

-(id) init
{
    if(self = [super init])
    {
        data = [[NSMutableData alloc]init];
        [data setLength:0];
    }
    return self;
}

- (void)connection:(NSURLConnection *)connection didWriteData:(long long)bytesWritten totalBytesWritten:(long long)totalBytesWritten
{
    NSLog(@"didwriteData push");
}
- (void)connectionDidResumeDownloading:(NSURLConnection *)connection totalBytesWritten:(long long)totalBytesWritten expectedTotalBytes:(long long)expectedTotalBytes
{
    NSLog(@"connectionDidResumeDownloading push");
}

- (void)connectionDidFinishDownloading:(NSURLConnection *)connection destinationURL:(NSURL *)destinationURL
{
    NSLog(@"didfinish push @push %@",data);
}

- (void)connection:(NSURLConnection *)connection didSendBodyData:(NSInteger)bytesWritten totalBytesWritten:(NSInteger)totalBytesWritten totalBytesExpectedToWrite:(NSInteger)totalBytesExpectedToWrite
{
    NSLog(@"did send body");
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [self.data setLength:0];
    NSHTTPURLResponse *resp= (NSHTTPURLResponse *) response;
    NSLog(@"got response with status @push %d",[resp statusCode]);
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)d
{
    [self.data appendData:d];

    NSLog(@"recieved data @push %@", data);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *responseText = [[NSString alloc] initWithData:self.data encoding:NSUTF8StringEncoding];

    NSLog(@"didfinishLoading%@",responseText);

}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error ", @"")
                                message:[error localizedDescription]
                               delegate:nil
                      cancelButtonTitle:NSLocalizedString(@"OK", @"")
                      otherButtonTitles:nil] show];
    NSLog(@"failed &push");
}

// Handle basic authentication challenge if needed
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    NSLog(@"credentials requested");
    NSString *username = @"username";
    NSString *password = @"password";

    NSURLCredential *credential = [NSURLCredential credentialWithUser:username
                                                             password:password
                                                          persistence:NSURLCredentialPersistenceForSession];
    [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];
}

@end 
```

控制台始终打印以下行并且仅打印以下行：

```
2013-04-01 20:35:04.341 ApprenticeXM[3423:907] did send body
2013-04-01 20:35:04.481 ApprenticeXM[3423:907] got response with status @push 200
2013-04-01 20:35:04.484 ApprenticeXM[3423:907] didfinish push @push <> 
```

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-04-01T18:44:48.767

下面的代码描述了一个使用`POST`方法的简单示例。（*如何通过`POST`方法*传递数据）

在这里，我描述了如何使用 POST 方法。

**1.**使用实际用户名和密码设置帖子字符串。

```
NSString *post = [NSString stringWithFormat:@"Username=%@&Password=%@",@"username",@"password"]; 
```

**2.**`NSASCIIStringEncoding`使用以及您需要以 NSData 格式发送的帖子字符串对帖子字符串进行编码。

```
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES]; 
```

您需要发送数据的实际长度。计算帖子字符串的长度。

```
NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]]; 
```

**3.**创建一个包含所有属性的 Urlrequest，如`HTTP`方法、http 标头字段以及 post 字符串的长度。创建`URLRequest`对象并初始化它。

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init]; 
```

设置要向该请求发送数据的 URL。

```
[request setURL:[NSURL URLWithString:@"http://www.abcde.com/xyz/login.aspx"]]; 
```

现在，设置**HTTP**方法（*POST 或 GET*）。像在您的代码中一样编写此行。

```
[request setHTTPMethod:@"POST"]; 
```

`HTTP`使用发布数据的长度设置标题字段。

```
[request setValue:postLength forHTTPHeaderField:@"Content-Length"]; 
```

还要设置 HTTP 标头字段的编码值。

```
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"]; 
```

使用 postData设置`HTTPBody`urlrequest 的。

```
[request setHTTPBody:postData]; 
```

**4.**现在，创建 URLConnection 对象。使用 URLRequest 对其进行初始化。

```
NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

它返回初始化的 url 连接并开始为 url 请求加载数据。**您可以使用下面的if/else**语句检查您`URL`的连接是否正确完成。

 **```
if(conn) {
    NSLog(@"Connection Successful");
} else {
    NSLog(@"Connection could not be made");
} 
```

**5.**要接收来自 HTTP 请求的数据，您可以使用 URLConnection 类参考提供的委托方法。委托方法如下。

```
// This method is used to receive the data which we get using post method.
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData*)data

// This method receives the error report in case of connection is not made to server. 
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 

// This method is used to process the data after connection has made successfully.
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

**另请参阅** [此](http://deusty.blogspot.in/2006/11/sending-http-get-and-post-from-cocoa.html) **和** [此](http://yuvarajmanickam.wordpress.com/2012/10/17/nsurlconnection-basics-for-ios-beginners/) **文档**以了解`POST`方法。

这是[HTTPPost 方法源代码的最佳示例。](https://web.archive.org/web/20150315072521/http://kemal.co/index.php/2012/02/fetching-data-with-getpost-methods-by-using-nsurlconnection/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-08T07:41:38.137

```
-(void)sendingAnHTTPPOSTRequestOniOSWithUserEmailId: (NSString *)emailId withPassword: (NSString *)password{
//Init the NSURLSession with a configuration
NSURLSessionConfiguration *defaultConfigObject = [NSURLSessionConfiguration defaultSessionConfiguration];
NSURLSession *defaultSession = [NSURLSession sessionWithConfiguration: defaultConfigObject delegate: nil delegateQueue: [NSOperationQueue mainQueue]];

//Create an URLRequest
NSURL *url = [NSURL URLWithString:@"http://www.example.com/apis/login_api"];
NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url];

//Create POST Params and add it to HTTPBody
NSString *params = [NSString stringWithFormat:@"email=%@&password=%@",emailId,password];
[urlRequest setHTTPMethod:@"POST"];
[urlRequest setHTTPBody:[params dataUsingEncoding:NSUTF8StringEncoding]];

//Create task
NSURLSessionDataTask *dataTask = [defaultSession dataTaskWithRequest:urlRequest completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
    //Handle your response here
    NSDictionary *responseDict = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingAllowFragments error:nil];
     NSLog(@"%@",responseDict);
}];
   [dataTask resume];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T19:15:13.207

我不太确定为什么，但是一旦我注释掉以下方法，它就会起作用：

```
connectionDidFinishDownloading:destinationURL: 
```

此外，我认为您不需要来自 NSUrlConnectionDownloadDelegate 协议的方法，只需要来自 NSURLConnectionDataDelegate 的方法，除非您需要一些下载信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-17T13:18:03.773

这是我在日志库中使用的方法：[https ://github.com/goktugyil/QorumLogs](https://github.com/goktugyil/QorumLogs)

此方法填充 Google 表单中的 html 表单。希望它对使用 Swift 的人有所帮助。

```
var url = NSURL(string: urlstring)

var request = NSMutableURLRequest(URL: url!)
request.HTTPMethod = "POST"
request.setValue("application/x-www-form-urlencoded; charset=utf-8", forHTTPHeaderField: "Content-Type")
request.HTTPBody = postData.dataUsingEncoding(NSUTF8StringEncoding)
var connection = NSURLConnection(request: request, delegate: nil, startImmediately: true) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-14T06:36:04.753

**目标 C**

> 使用参数发布 API 并使用 url 验证以导航是否 json
> 响应键状态为：“成功”

```
NSString *string= [NSString stringWithFormat:@"url?uname=%@&pass=%@&uname_submit=Login",self.txtUsername.text,self.txtPassword.text];
    NSLog(@"%@",string);
    NSURL *url = [NSURL URLWithString:string];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"POST"];
    NSURLResponse *response;
    NSError *err;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];
    NSLog(@"responseData: %@", responseData);
    NSString *str = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    NSLog(@"responseData: %@", str);
        NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData
                                                         options:kNilOptions
                                                           error:nil];
    NSDictionary* latestLoans = [json objectForKey:@"status"];
    NSString *str2=[NSString stringWithFormat:@"%@", latestLoans];
    NSString *str3=@"success";
    if ([str3 isEqualToString:str2 ])
    {
        [self performSegueWithIdentifier:@"move" sender:nil];
        NSLog(@"successfully.");
    }
    else
    {
        UIAlertController *alert= [UIAlertController
                                 alertControllerWithTitle:@"Try Again"
                                 message:@"Username or Password is Incorrect."
                                 preferredStyle:UIAlertControllerStyleAlert];
        UIAlertAction* ok = [UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault
                                                   handler:^(UIAlertAction * action){
                                                       [self.view endEditing:YES];
                                                   }
                             ];
        [alert addAction:ok];
        [[UIView appearanceWhenContainedIn:[UIAlertController class], nil] setTintColor:[UIColor redColor]];
        [self presentViewController:alert animated:YES completion:nil];
        [self.view endEditing:YES];
      } 
```

*JSON 响应*：{"status":"success","user_id":"58","user_name":"dilip","re​​sult":"您已成功登录"} 工作代码

**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-24T13:57:05.153

在 iOS 上发送 HTTP POST 请求（目标 c）：

```
-(NSString *)postexample{

// SEND POST
NSString *url = [NSString stringWithFormat:@"URL"];
NSString *post = [NSString stringWithFormat:@"param=value"];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setHTTPMethod:@"POST"];
[request setURL:[NSURL URLWithString:url]];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];

NSError *error = nil;
NSHTTPURLResponse *responseCode = nil;

//RESPONDE DATA 
NSData *oResponseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&responseCode error:&error];

if([responseCode statusCode] != 200){
    NSLog(@"Error getting %@, HTTP status code %li", url, (long)[responseCode statusCode]);
    return nil;
}

//SEE RESPONSE DATA
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Response" message:[[NSString alloc] initWithData:oResponseData encoding:NSUTF8StringEncoding] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
[alert show];

return [[NSString alloc] initWithData:oResponseData encoding:NSUTF8StringEncoding];
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-22T07:55:53.633

**使用 Swift 3 或 4，您可以访问这些 http 请求以进行服务器通信。**

// 用于请求 POST 数据

```
 func postAction()  {
//declare parameter as a dictionary which contains string as key and value combination. considering inputs are valid
let parameters = ["id": 13, "name": "jack"] as [String : Any]
//create the url with URL
let url = URL(string: "www.requestURL.php")! //change the url
//create the session object
let session = URLSession.shared
//now create the URLRequest object using the url object
var request = URLRequest(url: url)
request.httpMethod = "POST" //set http method as POST
do {
    request.httpBody = try JSONSerialization.data(withJSONObject: parameters, options: .prettyPrinted) // pass dictionary to nsdata object and set it as request body
} catch let error {
    print(error.localizedDescription)
}
request.addValue("application/json", forHTTPHeaderField: "Content-Type")
request.addValue("application/json", forHTTPHeaderField: "Accept")
//create dataTask using the session object to send data to the server
let task = session.dataTask(with: request as URLRequest, completionHandler: { data, response, error in
    guard error == nil else {
        return
    }
    guard let data = data else {
        return
    }
    do {
        //create json object from data
        if let json = try JSONSerialization.jsonObject(with: data, options: .mutableContainers) as? [String: Any] {
            print(json)
            // handle json...
        }
    } catch let error {
        print(error.localizedDescription)
    }
})
task.resume() } 
```

// 从请求中获取数据

```
func GetRequest()  {
    let urlString = URL(string: "http://www.requestURL.php") //change the url

    if let url = urlString {
        let task = URLSession.shared.dataTask(with: url) { (data, response, error) in
            if error != nil {
                print(error ?? "")
            } else {
                if let responceData = data {
                    print(responceData) //JSONSerialization
                    do {
                        //create json object from data
                        if let json = try JSONSerialization.jsonObject(with:responceData, options: .mutableContainers) as? [String: Any] {
                            print(json)
                            // handle json...
                        }
                    } catch let error {
                        print(error.localizedDescription)
                    }
                }
            }
        }
        task.resume()
    }
} 
```

// 从请求中获取图片或视频等下载内容

```
func downloadTask()  {
    // Create destination URL
    let documentsUrl:URL =  FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).first as URL!
    let destinationFileUrl = documentsUrl.appendingPathComponent("downloadedFile.jpg")
    //Create URL to the source file you want to download
    let fileURL = URL(string: "http://placehold.it/120x120&text=image1")
    let sessionConfig = URLSessionConfiguration.default
    let session = URLSession(configuration: sessionConfig)
    let request = URLRequest(url:fileURL!)

    let task = session.downloadTask(with: request) { (tempLocalUrl, response, error) in
        if let tempLocalUrl = tempLocalUrl, error == nil {
            // Success
            if let statusCode = (response as? HTTPURLResponse)?.statusCode {
                print("Successfully downloaded. Status code: \(statusCode)")
            }

            do {
                try FileManager.default.copyItem(at: tempLocalUrl, to: destinationFileUrl)
            } catch (let writeError) {
                print("Error creating a file \(destinationFileUrl) : \(writeError)")
            }

        } else {
            print("Error took place while downloading a file. Error description: %@", error?.localizedDescription ?? "");
        }
    }
    task.resume()

} 
```**

# c# - Assert.Equals 的用途是什么？

> ID：15749487
> 
> 赞同：19
> 
> 时间：2013-04-01T18:42:09.840
> 
> 标签：c#, unit-testing, mstest

我正在为我当前的项目进行单元测试，并遇到了一些奇怪的事情。.Net UnitTesting 库同时具有 Assert.Equals 和 Assert.AreEqual。[Assert.Equals](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assert.equals.aspx)的注释说使用 Assert.AreEqual 来比较两个对象，但没有说明为什么要在 Assert.Equals 上这样做。有人可以解释什么时候应该在单元测试中使用 Assert.Equals（如果有的话）以及 Assert.Equals 和 Assert.AreEqual 之间的区别吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-01T18:46:04.027

`Assert.Equals`只是`Equals`继承自的方法`object`。它与单元测试无关，实际上也没有任何用处。

* * *

更准确地说，`Assert.Equals`与 完全相同`Object.Equals`。`Object.Equals`有用。

但是，如果您正在使用`Assert.Equals`，那么您可能会将其与 混淆`Assert.AreEqual`，并且您想停止使用它。

# javascript - 将 jquery Alert 转换为tipTip 工具提示

> ID：15749489
> 
> 赞同：2
> 
> 时间：2013-04-01T18:42:19.203
> 
> 标签：javascript, jquery, tooltip, tiptip

我在我的项目中设置了以下代码作为用户单击 div 时触发的警报。div 是水平条形图元素，每个元素对应一个特定的测量值。警报会弹出一堆关于这些测量的信息。

```
 $(document).on('click', '.state-entry', function () {

      var startDate = $('#datepicker').datepicker('getDate');
      var duration = seconds2time(Math.round($(this).data('duration') * 86400));

      startDate.setSeconds(86400 * $(this).data('start'));

      var endDate = $('#datepicker').datepicker('getDate');
      endDate.setSeconds(Math.round(86400 * $(this).data('start') + $(this).data('duration') * 86400));

      alert($(this).data('resource') + ' changed state to ' + $(this).data('state') + ' (' + stateNames[$(this).data('state')] + ')\r\nStart Time: ' + startDate.toLocaleTimeString() + '\r\nEnd Time: ' + endDate.toLocaleTimeString() + '\r\nDuration: ' + duration);

      event.preventDefault();
      event.stopPropagation();
      return false;
  }); 
```

我只想将所有这些信息移动到工具提示而不是警报中。不过，我似乎做得不对。

我根据tipTip的文档尝试了以下操作，只是让工具提示本身出现并且它不起作用。：

```
 $(function(){
$(".state-entry").tipTip({maxWidth: "auto", edgeOffset: 10});
}); 
```

我将如何在我的 jQuery 中将此信息移动到此工具提示类型，不确定我缺少什么。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:02:14.827

我假设您正在`state-entry`动态添加 div？

如果是这样，当您创建一个时，您必须在`tiptip`创建它时使用它。

[这是一个小提琴，它显示动态元素不工作，除非你`tiptip`他们。](http://jsfiddle.net/dvzCN/3/)

# python - 烧瓶 - 使用 populate_obj 后保存额外的字段

> ID：15749499
> 
> 赞同：0
> 
> 时间：2013-04-01T18:42:57.953
> 
> 标签：python, flask, openid, wtforms, flask-login

我有一个小型 Flask 应用程序，它使用 populate.obj 方法将表单数据保存到对象。

**模型.py：**

```
class User(db.DynamicDocument):
    username = db.StringField(unique=True)
    email = db.StringField(unique=True)
    role = db.IntField(default=ROLE_USER)

class Post(db.DynamicDocument):
    created_at = db.DateTimeField(default=datetime.datetime.now, required=True)
    title = db.StringField(max_length=255, required=True)
    slug = db.StringField(max_length=255, required=True)
    comments = db.ListField(db.EmbeddedDocumentField('Comment'))
    author = db.ReferenceField(User)

## various subclasses of BlogPost
... 
```

**视图.py：**

```
class Detail(MethodView):

decorators = [login_required]

# Map post types to models
class_map = {
    'post': BlogPost,
    'video': Video,
    'image': Image,
    'quote': Quote,
}

def get_context(self, slug=None):

    if slug:
        post = Post.objects.get_or_404(slug=slug)
        # Handle old posts types as well
        cls = post.__class__ if post.__class__ != Post else BlogPost
        form_cls = model_form(cls, exclude=('created_at', 'comments', 'author'))
        if request.method == 'POST':
            form = form_cls(request.form, inital=post._data)
        else:
            form = form_cls(obj=post)
    else:
        # Determine which post type we need
        cls = self.class_map.get(request.args.get('type', 'post'))
        post = cls()
        form_cls = model_form(cls, exclude=('created_at', 'comments', 'author'))
        form = form_cls(request.form)
    context = {
        "post": post,
        "form": form,
        "create": slug is None
    }
    return context

    if form.validate():
        post = context.get('post')
        form.populate_obj(post)
        post.save() 
```

这工作正常。但我想做的也是保存用户对象：

```
...
if form.validate():
    post = context.get('post')
    form.populate_obj(post)
    post(author=MyUserObject)  # this fails!
    post.save() 
```

这失败并出现错误：

```
TypeError: 'BlogPost' object is not callable 
```

我有兴趣了解为什么会这样，以及我应该如何保存我的用户对象？我可能在`populate_obj`这里证明我对这种方法的无知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:10:55.850

所以，答案似乎是语法。这有效：

```
 if form.validate():
        post = context.get('post')
        form.populate_obj(post)
        post.author = g.user
        post.save() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T19:30:45.140

做这个：

```
if request.POST and form.validate():
    form.populate_obj(post)
    post.save() 
```

# ruby-on-rails - 由于 Postgres 解释语句，Rails 应用程序间歇性中断

> ID：15749503
> 
> 赞同：0
> 
> 时间：2013-04-01T18:43:18.970
> 
> 标签：ruby-on-rails, ruby, activerecord, rails-postgresql

Rails 3.2.12 应用程序带有一个外部 PG DB，它有一个客户表。我有一个本地 PG DB，它有一个“地理代码”表。外部客户表可能有也可能没有任何给定客户的纬度和经度，因此如果客户表没有任何纬度/经度，我使用本地地理编码表临时填充纬度和经度。

因此，在 Rails 中，我的客户表“has_one”地理编码。

发生的事情是我在选择客户时间歇性地收到 PG Explain 错误，然后尝试确定他们的纬度和经度：

`PG::Error: ERROR: relation "geocodes" does not exist ~ |: EXPLAIN SELECT "geocodes".* FROM "geocodes" WHERE "geocodes"."customer_id" = 1417 LIMIT 1 ~ |Completed 500 Internal Server Error in 586ms ~ |
~ |ActiveRecord::StatementInvalid (PG::Error: ERROR: relation "geocodes" does not exist ~ |: EXPLAIN SELECT "geocodes".* FROM "geocodes" WHERE "geocodes"."customer_id" = 1417 LIMIT 1): ~ | app/controllers/maps_controller.rb:6:in `all'`

这些错误是由 PG EXPLAIN 语句触发的，这些语句似乎与我设置的 LIMIT 成半正比变化。如果客户的 LIMIT 是 100，我永远不会触发 EXPLAIN，因此不会出错。如果我将它设置为 200，我大约有 50% 的时间会出错。LIMIT 500 没有我见过的工作机会。

当我将 LIMIT 设置为 200 时，我有大约 50% 的机会让应用程序页面正常工作（这是显示客户位置的谷歌地图）。我刷新页面的速度与它是否有效之间似乎存在相关性*。*例如：如果我在失败后快速刷新页面，看起来它的工作率很高。如果我在超过几秒的时间间隔后查看页面，它似乎失败了。

关于如何治愈这个的任何想法？

我自己普遍认为外部 PG DB 不知道本地地理编码表，并且 EXPLAIN 正在该外部 DB 上被触发，因此它爆炸了。

我对 PG 的内部运作知之甚少，无法真正弄清楚如何阻止这些 EXPLAIN 语句的发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T19:03:00.433

对于那些寻求不那么迂回的答案的人，请注意，也可以`config.active_record.silence_auto_explain`在适当的环境中设置。

# php - 错误 414：如何处理 GET 返回的大量数据？

> ID：15749504
> 
> 赞同：0
> 
> 时间：2013-04-01T18:43:21.360
> 
> 标签：php, ajax, get

因此，我需要能够从数据库中返回大量数据以用于绘图。目前，我通过 ajax 使用 GET 并通过 php 生成必要的 html。这适用于少量数据，但每当我请求超过一年的价值时，我都会收到错误 414。有没有人建议更好的方法来做到这一点，或者知道如何更改限制？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:48:59.337

您不应该收到来自服务器的*返回*数据大小的 414 错误，对 http 响应的大小没有硬性限制。

由于存在硬性限制，您用于发送 ajax 请求的URL 大小会出现***错误******。***

 *务必在您的 ajax 调用中切换到使用 POST，确保您通过键/值对发送数据（而不是拼接到 URL 本身），并且您不应再看到错误。

**有关不同浏览器中 URL 限制的信息，请参见此处（tl；dr 保持在 2000 以下）：**

[不同浏览器中 URL 的最大长度是多少？](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url-in-different-browsers)*

# mysql - 类似 XOR 的 Select 语句

> ID：15749505
> 
> 赞同：0
> 
> 时间：2013-04-01T18:43:27.280
> 
> 标签：mysql, sql, database

我有点脑筋急转弯，我什至不知道如何表达这个问题，所以我将举个例子......

我有一个表 table_a，它有一些行数，我需要基于 2 列进行选择。基本上，如果 A 和 B 为真，我想选择一行。但是，如果 B 不为真，我需要选择 A 为真且 B 为另一个值的行。

所以给定一张这样的桌子......

```
Col A    ColB
1        'X'
1        'Y'
2        'Z' 
```

我想说一些类似...

给我 ColA='1' 和 ColB='X' 的所有行。如果不存在，请给我 ColA='1' 和 ColB='Y' 的行。但如果 (1,X) 存在，我不想要 (1,Y) 。

哎呀。我怎样才能有效地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:50:36.103

我想使用这个查询：

```
SELECT *
FROM yourtable
WHERE
  (ColA, ColB) = (SELECT ColA, ColB FROM yourtable WHERE (ColA, ColB)=(1,'X')
                  UNION ALL
                  SELECT ColA, ColB FROM yourtable WHERE (ColA, ColB)=(1,'Y')
                  ORDER BY (ColA, ColB)=(1,'X') DESC
                  LIMIT 1) 
```

`ColA=1`如果至少有一行具有and ，则子查询将返回 (1, 'X') ，否则如果至少有一行具有此类值`ColB='X'`，则它将返回。`(1,'Y')`

如果它们都存在，则按`(ColA, ColB)=(1,'X')`DESC 排序并使用`LIMIT 1`可确保优先级为`(1, 'X')`.

或者这个使用 OR：

```
SELECT *
FROM yourtable
WHERE
  ((ColA, ColB) = (1, 'Y')
   AND NOT EXISTS(SELECT NULL
                  FROM yourtable
                  WHERE (ColA, ColB)=(1,'X')))
  OR
  ((ColA, ColB) = (1, 'X')) 
```

请[在此处](http://sqlfiddle.com/#!2/aa81d/4)查看小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:46:28.123

我只会使用两个单独的查询来做到这一点。第一个查询是`ColA = 1 AND colB = 'X'`. 如果它没有返回结果，那么第二个查询将运行到 acquire `(1, Y)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:58:49.663

`LEFT JOIN`如果我正确理解了您的要求， 这是一种仅使用 a 的方法。

```
SELECT T.ColA, T.ColB
FROM YourTable T
  LEFT JOIN (
    SELECT ColA
    FROM yourtable T
    WHERE ColB = 'X'
    ) T2 ON 
      T.ColA = T2.ColA
WHERE T.ColB = 'X' OR T2.ColA IS NULL 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/d7088/1)

我假设如果同一个可乐有多个记录，则返回带有 colb=X 的记录（如果存在）。否则，按原样返回该行 - 因此结果中有 2 Z：

结果：

```
COLA   COLB
1      X
2      Z 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-30T16:49:09.330

```
select T.colA,T.colB
from table T
where T.colA = ANY (select colA from table where colB != T.colB); 
```

# objective-c - 从 GPS 坐标获取状态

> ID：15749507
> 
> 赞同：0
> 
> 时间：2013-04-01T18:43:51.550
> 
> 标签：objective-c, gps, clgeocoder

我已经使用 CLLocationManager 来获取用户的当前 GPS 坐标。

我将如何使用 CLGeoCoder 将这些坐标转换为用户所处的当前状态？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:46:50.850

使用该`-reverseGeocodeLocation:completionHandler`方法，然后检查`administrativeArea`返回的地标的属性。

在代码中：

```
/* Get a CLLocation into `location` */
CLGeocoder *gc = [[CLGeocoder alloc] init];
[gc reverseGeocodeLocation:location completionHandler:^(NSArray *placemark, NSError *error)
{
  if(!placemark)
  {
    /* handle error */
  }
  else
  {
    CLPlacemark *pm = placemark[0];
    NSLog(@"%@", pm.administrativeArea);
  }
} 
```

# magento - 管理员目录产品上的静态块下拉列表

> ID：15749514
> 
> 赞同：0
> 
> 时间：2013-04-01T18:44:08.850
> 
> 标签：magento

我在 magento 上发布了同样的问题，但这里的社区往往更加活跃，我想尽快而不是稍后得到答案 LOL>

我看到的静态块非常好并且使用完整，但是我发现自己处于一种情况，我想在管理员的产品页面中添加自定义属性。这个自定义属性我想成为当前静态块的下拉菜单。

我主要关心的是升级友好以及如何实现这一点。我希望我可以使用属性管理器来完成它，但看起来我必须以编程方式完成它。

# git - 设置 Jenkins 与 git 对话时的身份验证错误

> ID：15749516
> 
> 赞同：1
> 
> 时间：2013-04-01T18:44:11.387
> 
> 标签：git, http, ssh, jenkins

我正在尝试在可以与远程 Android git 存储库对话的 Windows 上设置 Jenkins。我但是，不断收到以下错误：

```
Using strategy: Default
Cloning the remote Git repository
Cloning repository https://github.com/***********`enter code here`
git --version
git version 1.7.4.msysgit.0.173.g83185.dirty
ERROR: Error cloning remote repo 'origin' : Could not clone https://github.com/*********
hudson.plugins.git.GitException: Could not clone https://github.com/*************
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.clone(CliGitAPIImpl.java:219)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1001)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:942)
    at hudson.FilePath.act(FilePath.java:865)
    at hudson.FilePath.act(FilePath.java:838)
    at hudson.plugins.git.GitSCM.determineRevisionToBuild(GitSCM.java:942)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1101)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1364)
    at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:670)
    at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:575)
    at hudson.model.Run.execute(Run.java:1575)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:237)
Caused by: hudson.plugins.git.GitException: Command "C:\Program Files (x86)\Jenkins\PortableGit-pre-alpha-64-bit\cmd\git.cmd clone --progress -o origin https://github.com/******************* <http://localhost:8080/job/*********%20SCM%20Change%20Build%20-%20JenkinsTest2/ws/"> returned status code 128:
stdout: Cloning into <http://localhost:8080/job/******%20Change%20Build%20-%20JenkinsTest2/ws/...>

stderr: fatal: Authentication failed

    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:773)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.clone(CliGitAPIImpl.java:217)
    ... 14 more
Trying next repository
ERROR: Could not clone repository
FATAL: Could not clone
hudson.plugins.git.GitException: Could not clone
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1013)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:942)
    at hudson.FilePath.act(FilePath.java:865)
    at hudson.FilePath.act(FilePath.java:838)
    at hudson.plugins.git.GitSCM.determineRevisionToBuild(GitSCM.java:942)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1101)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1364)
    at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:670)
    at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:575)
    at hudson.model.Run.execute(Run.java:1575)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:237) 
```

我尝试使用以下方法设置 ssh 密钥：

[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

但是，当我走到这一步时：

> ssh -T git@github.com

我收到以下错误：

> 权限被拒绝（公钥）
> 
> 在此处输入代码

我不确定我做错了什么，如果我什至需要设置 ssh 密钥，因为我正在尝试使用 https url

将不胜感激任何指针

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T20:34:25.353

我遇到了同样的问题，因为我在 Jenkins 中使用的是 https URL 而不是 ssh url。一旦我更改了存储库部分中的 url，它就会像宣传的那样工作。

# css - 登录模块不会在 IE 8 Joomla 2.5 中显示

> ID：15749517
> 
> 赞同：0
> 
> 时间：2013-04-01T18:44:13.427
> 
> 标签：css, joomla, internet-explorer-8, joomla2.5

我目前正在使用 Joomla 模块的登录样式作为带有 JS Elated 模板的 Joomla 2.5.9 站点的登录模块。当用户单击登录图像时，此模块会显示一个用于登录的下拉框。

在除 Internet Explorer 8 之外的所有浏览器中，登录模块都将毫无问题地显示。但是，在 IE 8 中，登录模块的按钮图像不会出现，但该模块仍然存在。

通过与模块的支持团队交谈，我了解到导致此问题的文件是文件 ie.css。删除文件有所帮助，但导致下拉菜单中的按钮显得太暗。

查看ie.css，我发现了以下样式：

```
button,
input[type="reset"],
input[type="submit"],
input[type="button"] {
behavior: url('./templates/js_elated/css/PIE.php');
background: #eee url(../images/button-light.png) repeat-x;
background: gradient(linear, left top, left bottom, color-stop(0, #fff), color-stop(1,  #ccc));
border: 1px solid #ccc;
color: #000;
} 
```

注释掉定义背景的行或定义颜色的行会导致登录图像不显示，或者标记为“登录”的按钮的图像显得太暗。

你会建议我做什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:54:13.480

即直到版本 8 对许多 CSS3 属性和函数（例如渐变和边框半径）没有适当的支持。

PIE.css 库是一个非常有效的解决方案，因为它绕过了大多数限制；有时需要添加 position:relative 或 zoom:1。

所以你的代码应该可以工作。但是因为它显然不是你可以：

1.  摆弄 position:relative 和 zoom:1 看看它是否解决了，或者类似的东西：http: [//css3pie.com/documentation/known-issues/](http://css3pie.com/documentation/known-issues/)

2.  删除 IE 的渐变，并使用提供的背景图像。您可能希望以不同的顺序编写速记背景以使其正常工作：尽管根据[http://www.w3.org/TR/CSS2/colors.html#background](http://www.w3.org/TR/CSS2/colors.html#background)这是正确的，但我必须注意 FF 和 chrome在他们的检查员中用不同的颜色写在最后

3.  只是使用固定颜色的背景，最后如果他们使用的是 IE，他们不值得漂亮的界面。

# jquery - jQuery - 对返回的估值执行多个操作

> ID：15749521
> 
> 赞同：0
> 
> 时间：2013-04-01T18:44:17.610
> 
> 标签：jquery

从主题 - [“jQuery - 通过其文本描述设置选择控件的选定值”](https://stackoverflow.com/questions/496052/jquery-setting-the-selected-value-of-a-select-control-via-its-text-description) - 我正在使用它来选择我的值

```
$("#PersonList option").filter(function() {
  return $(this).val() == <?php $PHPUser ?>;
}).attr('selected', true); 
```

但是，如果我也想用黄色设置它的样式并更改文本怎么办。

我可以根据需要重复..但这似乎过度编码......

添加黄色：

```
$("#PersonList option").filter(function() {
  return $(this).val() == <?php $PHPUser ?>;
}).addClass(UserAccent); 
```

添加文字：

```
$("#PersonList option").filter(function() {
  return $(this).val() == <?php $PHPUser ?>;
}).innerText('Myself: ' + $PHPUser); 
```

我将如何在一次评估中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:45:50.260

遇到这个问题时，通常的做法是将过滤后的集合存储在一个变量中：

```
var elements = $("#PersonList option").filter(function() {
  return $(this).val() == <?php $PHPUser ?>;
});
elements.prop('selected', true);
elements.addClass(UserAccent);
elements.text('Myself: ' + $PHPUser); 
```

这很好，并且不需要任何特定的 JQuery 知识。

但是 jQuery 启用了链接，即大多数函数返回接收者，以便您在其上调用另一个函数，这使您可以这样做：

```
$("#PersonList option").filter(function() {
  return $(this).val() == <?php $PHPUser ?>;
}).prop('selected', true)
  .addClass(UserAccent)
  .text('Myself: ' + $PHPUser); 
```

正如 adeneo 所注意到的，您应该使用[prop](http://api.jquery.com/prop/)设置一个布尔元素属性，例如`selected`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:46:12.797

您只需将其链接在那里：

```
$("#PersonList option").filter(function() {
   return this.value == "<?php echo $PHPUser; ?>";
}).prop('selected', true)
  .addClass('someClass')
  .text('Myself: <?php echo $PHPUser; ?>'); 
```

# python - 在 CSV Writer 中将 \r\n 替换为 \n

> ID：15749538
> 
> 赞同：4
> 
> 时间：2013-04-01T18:45:08.503
> 
> 标签：python, csv, python-2.7, python-2.6

我目前正在 python 中打开和编写这样的 CSV 文件：

```
with open('Data.csv', 'wb') as redata_csv:
    csv_writer = csv.writer(redata_csv, delimiter=',') 
```

但是，每个新行都以 结尾`\r\n`，而我希望它以 just 结尾`\n`。我找不到怎么...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T18:46:18.750

使用[`lineterminator`](http://docs.python.org/2/library/csv.html#csv.Dialect.lineterminator)关键字参数。

`reader`和类都`writer`支持通过关键字参数创建自定义匿名方言。您已经通过设置部分地做到了这一点`delimiter`- 添加`lineterminator`会为您提供一个由逗号分隔并由换行符终止的匿名方言。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-01T18:46:54.277

```
csv.writer(reindentified_csv, delimiter=',', lineterminator='\n') 
```

* * *

[csv.writer 文档](http://docs.python.org/2/library/csv.html#csv.writer)：

> *csv.writer(csvfile, dialect='excel', **fmtparams)*
> 
> ...
> 
> 可以给出其他可选的 fmtparams 关键字参数来覆盖当前方言中的单个格式参数。

[方言和格式参数](http://docs.python.org/2/library/csv.html#dialects-and-formatting-parameters)：

> *线终结者*
> 
> 用于终止作者生成的行的字符串。它默认为`'\r\n'`.

# android - 均匀对齐文本

> ID：15749540
> 
> 赞同：1
> 
> 时间：2013-04-01T18:45:19.160
> 
> 标签：android, android-layout, textview

这个问题可能更早被问到，但我真的不知道如何搜索它。

我想要实现的是这样的。

```
city     : some city
state    : some state
pincode  : some pin code
phone no : some phone number 
```

城市：是一种文本视图，某些城市是第二种文本视图。两者都是线性布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                              android:orientation="horizontal"
                              android:layout_width="wrap_content"
                              android:layout_height="wrap_content">
                <TextView android:text="City : "
                          android:textSize="15sp"
                          android:layout_height="wrap_content"
                          android:layout_width="wrap_content"
                />
                <TextView android:text="Some city"
                          android:textSize="15sp"
                          android:id="@+id/lblPermanentCity"
                          android:layout_height="wrap_content"
                          android:layout_width="wrap_content"
                />
            </LinearLayout> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:49:31.320

我不认为您可以仅使用两个 TextView 来实现这一目标。问题是标题（“城市”）左对齐，冒号右对齐。

如果您可以使用左对齐的冒号，则可以使用该`layout_weight`属性使标题列在所有行上的大小相同，如下所示：

```
...
<TextView android:text="City:"
          android:layout_height="wrap_content"
          android:layout_width="0"
          android:layout_weight="40"/>
<TextView android:text="some city"
          android:layout_height="wrap_content"
          android:layout_width="0"
          android:layout_weight="60"/> 
```

这将为标题列提供 40% 的宽度，并为值列提供 60% 的宽度。确保你`LinearView`的`layout_width`是`match_parent`

如果你真的必须在中间有冒号，只需为冒号添加第三个 TextView，给它一个固定的宽度（`wrap_content`具有相同的内容就足够了）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:55:43.080

您可以每行使用三个`TextView`s，一个用于城市、州等，一个用于“：”，一个用于“某个城市”等。然后将它们放在 a 中`RelativeLayout`并将冒号（:) 对齐到右边缘最大的`TextView`（可能是您的“电话号码”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:55:52.300

为什么不使用表格布局。我认为这是解决问题的最佳方法。

# visual-studio-extensions - “Ultra Find”的 Visual Studio 扩展发生了什么？

> ID：15749546
> 
> 赞同：6
> 
> 时间：2013-04-01T18:45:28.403
> 
> 标签：visual-studio-extensions, findinfiles

“Ultra Find”的 Visual Studio 扩展发生了什么？我已经在整个网站和互联网上看到了这个据称很棒的扩展的参考资料。这里有几个链接：

[http://blog.arainia.com/2010/08/ultra-find-getting-started.html](http://blog.arainia.com/2010/08/ultra-find-getting-started.html)

[http://coolthingoftheday.blogspot.com/2010/08/i-find-you-ultra-ultra-find-vs2010-add.html](http://coolthingoftheday.blogspot.com/2010/08/i-find-you-ultra-ultra-find-vs2010-add.html)

这是一个 SO 链接：

[如何从 Visual Studio 文件搜索中排除 Designer.cs](https://stackoverflow.com/questions/1596337/how-to-exclude-designer-cs-from-visual-studio-file-search)

但是，当我在 VS **Extension Manager**中搜索时，什么也没有出现。就好像扩展从未存在过一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T18:13:57.993

我猜作者出于某种原因取消了它，也许是因为期待为 VS 2012 更新它。几周前我也注意到了这种消失，因为我会不时检查是否有正式的 VS2012 版本。

[我在此处](http://blog.outsharked.com/2012/09/using-your-favorite-visual-studio-2010.html)为 VS2012 编写了使用 VS2010 扩展的说明。这仍然是相关的，如果您仍然在 VS2010 上安装它，那么这将允许您启动并运行它。

一切都非常神秘，我在他的博客上评论了一两次，但从未得到回应。很遗憾，因为它是一个很棒的插件。我仍然使用它，但似乎不受支持，我正在寻找替代品。

*编辑*

我前段时间切换到**Entrian Source Search**。这是商业软件，但物有所值。不知道任何几乎同样有用的免费替代品。

# twitter-bootstrap - 让 Bootstrap 选项卡自动填充高度到页脚？

> ID：15749547
> 
> 赞同：6
> 
> 时间：2013-04-01T18:45:33.070
> 
> 标签：twitter-bootstrap, tabs, header, height, sticky-footer

我有以下问题：

我有一个基于引导程序的标题行、带有 3 列的选项卡式内容行和页脚行。我希望选项卡式内容行能够利用到页脚的最大可用屏幕空间。这应该始终导致 3 个选项卡区域底部的偶数行。

我过去曾尝试过这里提到的几件事，但无法让它们中的任何一个正确地为我工作。

我已经用我的问题示例设置了一个 jsfiddle：http: [//jsfiddle.net/VDtgT/embedded/result/](http://jsfiddle.net/VDtgT/embedded/result/)

这是我草率的示例代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="http://necolas.github.com/normalize.css/1.1.0/normalize.css" rel="stylesheet" media="screen">
<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet"> 
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>  
<script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.0/bootstrap.min.js"></script>

<style>

hr {
border: 0;
width: 100%;
color: #f00;
background-color: #000;
height: 1px;
margin-top: 2px; 
margin-bottom: 3px; 
 }

img { 
border:1px solid #D3D3D3;
}

body { margin: 2px 2px 0px 2px }

</style>  <!-- // Main CSS styles -->   

</head> 
    <body>

<!-- *** TOP ROW -->
<div class="row-fluid show-grid">
<div class="span12" style="background-color: #ddd;" align="center">HEADER</div>
    </div> 
<hr>

<!-- *** MIDDLE ROW --->
<div class="row-fluid">
        <div class="span4">

      <div class="tabbable" style="margin-bottom: 10px;">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab11" data-toggle="tab">Group1</a></li>
            <li><a href="#tab12" data-toggle="tab">Group2</a></li>
          </ul>

          <div class="tab-content" style="padding-bottom: 9px; border-bottom: 1px solid #ddd;">
            <div class="tab-pane active" id="tab11">                        
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
<br />
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
<br />
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
<br />
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
<br />
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
<br />
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
<br />
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
<br />
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>
    <button style="width: 48%" type="button" class="btn btn-large btn-primary">BUTTON</button>

            </div>
            <div class="tab-pane" id="tab12">
            <Pre>Empty</pre>
            </div>

        </div>
          </div>
        </div> 

            <div class="span3">
       <div class="tabbable" style="margin-bottom: 10px;">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab1" data-toggle="tab">Tab One</a></li>
            <li><a href="#tab2" data-toggle="tab">Tab Two</a></li>
          </ul>

          <div class="tab-content" style="padding-bottom: 9px; border-bottom: 1px solid #ddd;">
            <div class="tab-pane active" id="tab1">
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
<br />

    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
<br />

    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>  
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
<br />
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
<br />
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
<br />
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
<br />
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
<br />
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
    <button style="width: 45%" type="button" class="btn btn-large btn-success">button</button>
<br />
            </div>
            <div class="tab-pane" id="tab2">
            <pre>Empty</pre>
            </div>

          </div>
        </div> 

        </div>

                    <div class="span5">

 <div class="tabbable" style="margin-bottom: 10px;">                        

          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab98" data-toggle="tab">Pane1</a></li>
            <li><a href="#tab99" data-toggle="tab">Pane2</a></li>
          </ul>

          <div class="tab-content" style="padding-bottom: 9px; border-bottom: 1px solid #ddd;">         

          <div class="tab-pane active" id="tab98">  

              <br />
<div class="span3"><a href="#"> <img src="http://placehold.it/150x150" alt="img1"></a>             </div>
<div class="span3"><a href="#"> <img src="http://placehold.it/150x150" alt="img1"></a> </div>
<div class="span3"><a href="#"> <img src="http://placehold.it/150x150" alt="img1"></a> </div>
<div class="span3"><a href="#"> <img src="http://placehold.it/150x150" alt="img1"></a> </div>
<br />

<div class="span3"><a href="#"> <img src="http://placehold.it/150x150" alt="img1"></a> </div>
<div class="span3"><a href="#"> <img src="http://placehold.it/150x150" alt="img1"></a> </div>
<div class="span3"><a href="#"> <img src="http://placehold.it/150x150" alt="img1"></a> </div>
<div class="span3"><a href="#"> <img src="http://placehold.it/150x150" alt="img1"></a>    </div>
<br />

<div class="span3"><a href="#"> <img src="http://placehold.it/150x150" alt="img1"></a> </div>
<div class="span3"><a href="#"> <img src="http://placehold.it/150x150" alt="img1"></a> </div>
<div class="span3"><a href="#"> <img src="http://placehold.it/150x150" alt="img1"></a> </div>
<div class="span3"><a href="#"> <img src="http://placehold.it/150x150" alt="img1"></a> </div>

</div>

   <div class="tab-pane" id="tab99">            
<pre>Empty</pre>
            </div>

        </div>

</div>
</div>  

        </div>

<hr>        
<!-- FOOTER BEGIN --> 

<div class="row-fluid">
<div class="span12" style="background-color: #ddd;" align="center">
    Goal: Footer stuck to bottom of screen & bottom of the 3 tab frames directly above (regardless of content). Button blocks should expand with vertical spacing as needed to fill screen to footer.
</div>
</div>

  </body>
</html> 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:03:19.890

我能够非常接近..

我在这里使用了 Bootstrap“粘性页脚导航栏”示例：twitter.github.com/bootstrap/examples/sticky-footer-navbar.html

这是为了将页脚粘贴到底部。

自动调整标签大小的“魔力”是通过 jquery 动态设置 max-height 和 min-height CSS 变量来实现的。我只是调整了乘数，直到选项卡的底部离页脚足够高以满足我的喜好。fwiw，我也刚刚找到了 jquery“equalize”命令，这可能是一种更简洁的方法：（[http://www.filamentgroup.com/lab/setting_equal_heights_with_jquery/](http://www.filamentgroup.com/lab/setting_equal_heights_with_jquery/)）

无论如何，我的示例的最终更新小提琴在这里：

[http://jsfiddle.net/VDtgT/19/embedded/result](http://jsfiddle.net/VDtgT/19/embedded/result)

```
<b> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:36:52.960

为什么要修复选项卡的大小？你可以让它们是可变的，当内容需要它时，这将把页脚向下推。

查看您最新的代码，您似乎没有使用您提到的示例正在使用的`#wrap`或。`.push`您将需要包装您的内容，然后添加一个`<div class="push"></div>`就像在示例中一样。

# macos - 试图获取像素的颜色值

> ID：15749550
> 
> 赞同：2
> 
> 时间：2013-04-01T18:45:45.563
> 
> 标签：macos, colors, pixel, nsimage

我正在尝试读取 tif 图像中像素的颜色值，但我无法找出正确的方法。我正在使用 OSX，我的方法如下：

```
NSImage *picture = [[NSImage alloc] initWithContentsOfFile:@"bais2.tif"]; //file is located in resoureces folder.
NSBitmapImageRep *imageRep = [[picture representations] objectAtIndex:0];

NSColor* color = [imageRep colorAtX:10 y:10];
NSLog(@"%f %f, %f", [color redComponent], [color blueComponent], [color greenComponent]); 
```

问题是由于某种原因，NSLog 中的记录值总是变成 0.0000000....

我也尝试过使用：

```
NSBitmapImageRep* imageRep = [[NSBitmapImageRep alloc] initWithData:[picture TIFFRepresentation]]; 
```

而不是，`[[picture representations] objectAtIndex:0]`但结果是一样的。

我没有收到错误消息或警告，但我认为加载图片时有问题？请帮助我，我做错了什么？有没有更好的方法来读取像素颜色数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:22:41.480

你的错误在这里：

```
NSImage *picture = [[NSImage alloc] initWithContentsOfFile:@"bais2.tif"];
-------------------------------------------------------------------^^^^ 
```

您可以使用：

```
NSImage *picture= [NSImage imageNamed:@"bais2.tiff"]; 
```

或者 ：

```
NSImage *picture = [[NSImage alloc] initWithContentsOfFile:@"bais2.tiff"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-21T03:57:31.923

```
 NSData *someNSData = [Image TIFFRepresentation];
 NSBitmapImageRep *someNSBitmapImageRepData = [[NSBitmapImageRep alloc] initWithData:someNSData];
 NSSize imageSizee = [someNSBitmapImageRepData size];

 CGFloat y = imageSize.height - 100.0;
 NSColor* color = [someNSBitmapImageRepData colorAtX:100.0 y:y];

 NSLog(@"color = %@",color); 
```

输出：颜色 = NSCalibratedRGBColorSpace 1 1 1 1

# javascript - 为什么 .on() 可以工作，但 .listenTo() 会失败？

> ID：15749555
> 
> 赞同：1
> 
> 时间：2013-04-01T18:46:03.920
> 
> 标签：javascript, backbone.js, backbone-events

我正在研究一个主干项目，并且在视图的初始化函数内部，我正在尝试在集合上设置一个侦听器，如下所示：

```
this.listenTo(this.collection, "change:attr", this.render) 
```

然而，这并没有抓住这个事件。非常令人困惑的是，这实际上可以代替它：

```
this.collection.on("change:attr", this.render); 
```

有谁知道为什么会发生这种情况？如果必须，我会使用`on`，但我更愿意利用该`listenTo`方法。

谢谢！

更新：

有关此问题的情况的其他信息，请参阅下面的答案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:22:31.693

好的，我知道问题是什么（有点）并且不确定是否应该关闭这个问题......但我想我会分享这个以防万一有人遇到同样的问题并且它没有关闭。

在原始视图的子视图中，我有一个如下所示的事件哈希：

```
// ...in subview definition
events: {
    'keyup input': 'changeAttr'
},
changeAttr: function(){
    var value = this.$('input').val();
    this.model.set('attr', value); // this.model is in the collection
} 
```

使用此设置，这是有效的：

```
// inside parent_view:
initialize: function() {
    this.collection.on('change:attr', function(){ alert("changed") });
} 
```

...但这失败了：

```
initialize: function() {
    this.listenTo('change:attr', function() { alert("changed") });
} 
```

我没有提到的是我正在使用 jQuery 在子视图上模拟“keyup”事件，例如。`$('input').trigger('keyup')`（这是出于自动化测试目的）。出于某种我不太清楚的原因，Backbone 不喜欢这样。更奇怪的是，属性居然会发生变化！因此`on`上面的方法工作......也许有人可以向我解释为什么会这样（也许keyup事件的某些属性丢失并且listenTo不喜欢那个？）

# php - 您如何构建 URL 以访问 google docs/drive 文件夹？

> ID：15749560
> 
> 赞同：4
> 
> 时间：2013-04-01T18:46:18.260
> 
> 标签：php, http, google-docs-api, google-drive-api

我试图弄清楚如何向[Google 驱动器发出原始请求](https://developers.google.com/drive/v2/reference/files/list)以[访问公用文件夹](https://drive.google.com/folderview?id=0B-eVxZFKAu61TmFQUUFPbzBmVVU)。

```
https://www.googleapis.com/drive/v2/files?q=0B-eVxZFKAu61TmFQUUFPbzBmVVU&key=__________ 
```

但是，该 URL 给出了以下错误：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "invalid",
    "message": "Invalid Value",
    "locationType": "parameter",
    "location": "q"
   }
  ],
  "code": 400,
  "message": "Invalid Value"
 }
} 
```

这告诉我，也许我不应该在里面传递文件夹的 ID `q=`。

在相关说明中，我知道您可以通过以下请求访问单个公共文件：

```
https://docs.google.com/document/pub?id=_____ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:36:44.687

您是正确的，因为您为`q`参数传递了无效值。该`q`参数接收字段、值和运算符的组合。您通过 传递了文件夹 id `q`，但没有指定与该 id 匹配的字段。

您需要传递的`q`是`'0B-eVxZFKAu61TmFQUUFPbzBmVVU' in parents`（不要遗漏单引号！）。因此，您的查询将如下所示`https://www.googleapis.com/drive/v2/files?q='0B-eVxZFKAu61TmFQUUFPbzBmVVU'+in+parents&key={YOUR_API_KEY}`：

查看[此 API 页面](https://developers.google.com/drive/search-parameters)以了解有关用于`q`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:18:19.173

尝试使用以下 q 值：`trashed=false and title contains 'Public Folder'`

[文档](https://developers.google.com/drive/search-parameters)说该字段`title`是`Title of the file`. 但是我记得您也可以使用它来搜索文件夹名称。

您可能还想通过包含 mimeType 字段来优化您的搜索。从文档：

> 使用特定于文件夹的 MIME 类型搜索文件夹：
> 
> `mimeType = 'application/vnd.google-apps.folder'`

*编辑*- 谷歌驱动器目前似乎有问题，明天试试这样的事情：

```
https://www.googleapis.com/drive/v2/files?q=title contains 'Public Folder' and trashed=false&mimeType = 'application/vnd.google-apps.folder'&key={YOUR_API_KEY} 
```

# php - php解析错误，数组中的str_replace值

> ID：15749562
> 
> 赞同：-1
> 
> 时间：2013-04-01T18:46:19.190
> 
> 标签：php, function, str-replace

我正在尝试制作一个很酷的 php 函数来替换东西，但由于不明原因而出现解析错误。我错过了什么吗？

```
error_reporting(E_ALL);

$array_pairs  = array( '{{simple}}' => 'simple_value', '{{organization}}' => 'Apple Inc');

function the_replace($aray_pairs,  $content){
foreach($aray_pairs as $a => $b)
{
$content = str_replace($a, $b, $content);

 return $content;
}

$invoice = '{{organization}} is a {{simple}}';

$invoice = replace_values($array_pairs, $invoice);
echo $invoice; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:47:09.830

缺少 } 函数名称也不匹配

```
error_reporting(E_ALL);

$array_pairs  = array( '{{simple}}' => 'simple_value', '{{organization}}' => 'Apple Inc');

function replace_values($aray_pairs,  $content){ // function names didn't match too.
   foreach($aray_pairs as $a => $b)
   {
       $content = str_replace($a, $b, $content);

   }
   return $content;

} // here

$invoice = '{{organization}} is a {{simple}}';

$invoice = replace_values($array_pairs, $invoice);
echo $invoice; 
```

# asp.net - 使用 JCrop、JQuery 和 asp.net 保存缩略图预览

> ID：15749565
> 
> 赞同：0
> 
> 时间：2013-04-01T18:46:36.063
> 
> 标签：asp.net, jcrop

我一直在涉足 JCrop，我可以让它工作，直到上传图像，选择一个区域，然后将我选择的内容保存到原始图像的裁剪版本。我还可以让缩略图预览正常工作，以便我选择的任何内容（无论大小适合 150px*150px 区域）......到目前为止一切都很好。

我现在唯一遇到的问题是保存缩略图预览中的内容，即 150*150 并且如上所述包含我选择的任何内容......

我在谷歌上环顾四周，看不到任何保存拇指邮件预览的东西。

有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:53:16.513

好的，基本上我正在做的是保存裁剪后的图像，然后再次保存，但将其调整为预览窗格中的任何尺寸......我不确定它是否能给我预览窗格中内容的精确副本就质量而言，但我猜它还不错。

# c# - 如何调整条码大小？

> ID：15749567
> 
> 赞同：0
> 
> 时间：2013-04-01T18:46:46.553
> 
> 标签：c#, barcode

我创建了一个生成 PDF417 二维条码的工具。输出 png 文件为 290x78 像素。

此宽度和高度背后的原因是用于创建此符号的公式，以便条形码扫描仪正确读取它。

我的符号是 13 列和 39 行。

这个公式是：

```
Width = ((17 * # of columns) + 69) X + 2 (size of quiet zone)
Height = (# of rows) (row height) + 2 (size of quiet zone) 
```

所以：

```
17 * 13 + 69 = 290px
39 * 2 = 78px 
```

我的问题是我用来创建这些条形码的软件允许您将文件保存到这个大小，但以不同的大小打印它。

这些打印参数结果如下，但我不知道如何计算它们：

```
X Dimension (in)       :0.0067
Y Dimension (in)       :0.0133
Height x Width (in)    :0.52 x 1.93
Height x Width (mm)    :13.21 x 49.11
Rows x Columns         : 39 x 13   
Error Correction Level :5
Bytes Encoded          :257
SLD Codeword           :1
Data Codewords         :157
Pad Codewords          :285
MPDF Codewords         :0
EC Codewords           :64
Total Codewords        :507 
```

这是我目前使用的程序的快照：

![在此处输入图像描述](https://i.stack.imgur.com/j4gim.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:44:10.693

这似乎是 DPI 和打印尺寸的问题。

```
pixels/dpi=inches 
```

或者如果你走另一条路

```
inches x dpi = pixels 
```

您可以将软件中的 DPI 下拉菜单设置为必要的值。

请参阅此计算器以使用这些值：[http ://auctionrepair.com/pixels.html](http://auctionrepair.com/pixels.html)

# javascript - 以编程方式检查安装了哪个版本？

> ID：15749570
> 
> 赞同：3
> 
> 时间：2013-04-01T18:46:55.303
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm

有没有办法通过 javascript 查看 crm 组织/服务器的版本（或汇总）？我真正想知道的是我是否在 UR11 或之前。

我试过了：

1.  [Xrm.Page.context](http://msdn.microsoft.com/en-us/library/gg328399.aspx) - 但没有关于版本（我错过了什么吗？）
2.  检查是否（crmForm == null）（因为从 UR12 开始禁用） 问题是如果组织启用 HTC 支持，那么 crmForm 将不会为空，我需要知道启用或不启用 HTC 支持的版本。

我现在所做的是让解决方案安装程序负责修改具有“isRollup12”变量为真或假的 javascript 文件，这非常笨拙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:44:36.247

您可以检查一个全局 JS 变量：

```
alert(APPLICATION_FULL_VERSION);
//on UR12 '5.0.9690.3236'
//on UR11 '5.0.9690.2839'
//and so on... 
```

但不支持此方法，因此使用风险自负。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T18:55:30.057

您可以检查是否定义了 getClientUrl 函数，它是 UR12 中包含的新函数。

```
var isRollup12 = false;
if (Xrm.Page.context.getClientUrl !== undefined) {
   isRollup12 = true;
} 
```

# knockout.js - 如何绑定可编辑的可观察字符串 ko.observableArray？

> ID：15749572
> 
> 赞同：6
> 
> 时间：2013-04-01T18:47:06.710
> 
> 标签：knockout.js, knockout-2.0, knockout-mvc

这是[如何绑定 ko.observableArray 字符串的后续内容？](https://stackoverflow.com/questions/15747211/how-can-i-bind-a-ko-observablearray-of-strings)

如何将可编辑的可观察字符串数组绑定到一组输入框？我不想绑定到对象数组，因为从服务器发送的底层 JSON 是字符串数组。

以下示例不起作用（在[http://jsfiddle.net/LDNeA/](http://jsfiddle.net/LDNeA/)尝试）。用可观察字符串绑定对象数组是可以的，但是直接绑定可观察字符串数组是行不通的，而且模型没有更新。

重要的是文本框中的条目被映射回模型。

JS：

```
var ViewModel = function() {
    this.value = ko.observable("hi")
    this.array1 = ko.observableArray([ko.observable("hi"), ko.observable("there")]);
    this.array2 = ko.observableArray([{ data: ko.observable("hi") }, { data: ko.observable("there") }]);
};

ko.applyBindings(new ViewModel()); 
```

HTML：

```
<div class='liveExample'>   
    <p><input data-bind='value: value' /></p> 
    <div data-bind="foreach: array1">
        <p><input data-bind='value: $data' /></p> 
    </div>
    <div data-bind="foreach: array2">
        <p><input data-bind='value: data' /></p> 
    </div>
</div>

<pre data-bind="text: ko.toJSON($data)"></pre> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T22:40:59.090

正如@Tyrsius 发布的链接所指出的，这是Knockout 中的一个错误（？）。

最简单的解决方法是使用`$parent.items()[$index()]`，如本小提琴所示：http: [//jsfiddle.net/r8fSg/](http://jsfiddle.net/r8fSg/)。请注意，`$parent.items()`这是 foreach 中使用的项目的 observableArray。

```
<div data-bind="foreach: items">
    <p><input data-bind='value: $parent.items()[$index()]' /></p> 
</div>

<pre data-bind="text: ko.toJSON($data)"></pre> 
```

和模型：

```
var ViewModel = function() {
    this.items = ko.observableArray([ko.observable("hi"), ko.observable("hi")]);
};

ko.applyBindings(new ViewModel()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T19:06:29.023

问题是，当 Knockout 不是某物的属性时，它不会获得对源的引用。由于您只是向它传递一个函数，因此双向绑定失败。之前已经[注意到](https://stackoverflow.com/questions/10621008/knockout-binding-doesnt-update-using-array-of-simple-observables)这一点，在此处记录为[问题](https://github.com/SteveSanderson/knockout/issues/482)，并且在[此问题](https://github.com/SteveSanderson/knockout/issues/708)中解释了该行为。

这不是一个理想的解决方案，但您可以使用`toJSON`方法控制对象序列化。这将允许您生成*看起来*是字符串数组的内容，同时仍在`observable`您的应用程序中。

```
var Item = function(name){
    this.name = ko.observable(name);
};

Item.prototype.toJSON = function(){
    //special note: knockout already unwraps the observable for you
    return this.name;
}; 
```

这是[小提琴](http://jsfiddle.net/tyrsius/bRDSX/)

* * *

## **更新**

有关仅使用绑定的解决方案，请参阅 slipheeds 答案，我更喜欢这种方法。留下这个答案以防其他人喜欢它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-27T17:32:19.587

在 Knockout 3.0 及更高版本中，使用`$rawData`代替`$data`解决了这个问题。它也被称为解决方案@ [https://github.com/knockout/knockout/issues/708#issuecomment-27630842](https://github.com/knockout/knockout/issues/708#issuecomment-27630842)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T00:35:38.423

另一种解决方案是使用重复绑定 ( [https://github.com/mbest/knockout-repeat](https://github.com/mbest/knockout-repeat) )，它确实提供了此功能。这是您的示例更新为使用重复：http: [//jsfiddle.net/LDNeA/1/](http://jsfiddle.net/LDNeA/1/)

```
<div data-bind="repeat: array1">
    <p><input data-bind='value: $item' /></p> 
</div> 
```

# javascript - 乳清将方法附加到对象原型而不是将它们放在构造函数上？

> ID：15749575
> 
> 赞同：0
> 
> 时间：2013-04-01T18:47:21.810
> 
> 标签：javascript, jquery, prototype

这是我的问题，我有一个对象 Car 和他们的属性，我在对象内部定义了一个方法。但我认为建议将此方法附加到对象原型中，但为什么呢？有什么优点和缺点？谢谢 ：）

我做了什么..

```
function Car (desc) {
    this.desc = desc;
    this.color = "red";
    this.getInfo = function getInfo() {
        return 'A ' + this.color + ' ' + this.desc + '.';
    };
} 
```

受到推崇的 ：

```
Car.prototype.getInfo = function() {
    return 'A ' + this.color + ' ' + this.desc + '.';
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:50:16.500

您所做的会导致每个实例都`Car`拥有自己的`getInfo`方法副本。将它放在原型上会自动为每个实例提供一个函数定义。

# javascript - String.format 不是函数

> ID：15749578
> 
> 赞同：1
> 
> 时间：2013-04-01T18:47:31.613
> 
> 标签：javascript, html, jenkins, hudson, jenkins-plugins

我正在使用 HTML 发布者，希望有一个 html 页面，其中包含一些在 hudson 上运行的 javascript 代码。HTML 代码是这样的：

```
<html>
    <head>

            <!--Load the AJAX API-->
            <script type="text/javascript" src="https://www.google.com/jsapi"></script>
            <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
            <script type="text/javascript" src="../stringformat.js"></script>
            <script type="text/javascript">

            ......

            sql=String.format("/.csv? select from table where exchange=`ABC......")

            </script>
    </head> 
```

但是，在成功构建之后，我的 html 页面没有显示它应该显示的内容，并且当我检查错误控制台时，它说

```
Error: TypeError: String.format is not a function 
```

我已将我的 stringformat.js 放入顶部文件夹，因为 HTML 发布者似乎不允许该文件包含 HTML 文件以外的任何内容。

谁能告诉我为什么 String.format 没有正确加载？谢谢！

PS：stringformat.js 是我得到的文件

[http://www.masterdata.se/r/string_format_for_javascript/](http://www.masterdata.se/r/string_format_for_javascript/)

该代码应该可以正常工作，因为这段代码在哈德逊之外工作

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-02T16:28:34.637

尝试代码：

```
<html>
<head>
<title>String format javascript</title>
<script type="text/javascript">
    String.format = function() {
    var s = arguments[0];
    for (var i = 0; i < arguments.length - 1; i++) {
    var reg = new RegExp("\\{" + i + "\\}", "gm");
    s = s.replace(reg, arguments[i + 1]);
    }
    return s;
    }
var _myString = String.format("hi {0}, i'am {1}","everybody", "stackoverflower");
function show(){
alert(_myString);
}
</script>
</head>
<body>
<input type="button" name="btnTest" id="btnTest" value="Test string format" onclick="show();" /> 
</body>
</html> 
```

# ssl - 向 socketserver Python3 添加 SSL 支持

> ID：15749581
> 
> 赞同：1
> 
> 时间：2013-04-01T18:47:39.717
> 
> 标签：ssl, tcp, python-3.x, openssl, socketserver

我想为基于python3（3.3版）socketserver的服务器添加SSL支持。我在[这里](https://stackoverflow.com/questions/8582766/adding-ssl-support-to-socketserver)找到了我的问题的答案，但是这段代码在 Python 3 中不起作用。方法 socket._fileobject 不再可用。有没有办法让这个例子在 Python3 中运行？

# php - FuelPHP routes.php 不工作

> ID：15749583
> 
> 赞同：0
> 
> 时间：2013-04-01T18:47:46.357
> 
> 标签：php, apache, .htaccess, url-routing, fuelphp

我有一个非常基本的设置，带有一个新的 Fuel 结帐。

`fuel/app/classes/controllers/auth.php`

```
class Controller_Auth extends Controller
{
    public function action_login()
    {
        return View::forge('auth/login');
    }
} 
```

`fuel/app/views/auth/login.php`

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>FuelPHP Framework</title>
    <?php echo Asset::css('bootstrap.css'); ?>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
    <style>
        #login-block {
            margin: auto;
            border: 1px solid #ddd;
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
            -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.055);
            -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.055);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.055);
            padding: 5px;
        }
    </style>
</head>
<body>
    <div id="content" class="container-fluid">
        <div id="login-block">
            <h1>Login</h1>
        </div>
    </div>
    <?php echo Asset::js('jquery.min.js'); ?>
    <?php echo Asset::js('bootstrap.js'); ?>
</body>
</html> 
```

`fuel/app/config/routes.php`

```
return array(
    '_root_'        => 'settings/index',  // The default route
    '_404_'         => '404',    // The main 404 route
    'login'         => 'auth/login',
); 
```

但是，访问`http://localhost/tmp/public/login`给出了 404。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:43:00.863

假设您运行 Apache，您的问题可能出在配置错误的**.htaccess**文件上。

从您尝试访问的 URL 中，如下配置就足够了：

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

我要引用的**.htaccess与****index.php**位于同一目录中，并且通常默认为：**/fuel/public/.htaccess**

如果上述方法不起作用，您可能会在**[文件](https://github.com/fuel/fuel/blob/1.6/develop/public/.htaccess)**中看到一条通知，上面写着：

**# 注意：如果你得到一个 404 游戏，其中包含以下注释掉的行的组合**

试着摆弄它，直到你做对了。

# c# - mc:Ignorable="d" 在 WPF 中是什么意思？

> ID：15749584
> 
> 赞同：111
> 
> 时间：2013-04-01T18:47:47.677
> 
> 标签：c#, wpf, xaml

`mc:Ignorable="d"`在 WPF中是什么意思？

而这一行：

```
d:DesignHeight="500" 
d:DesignWidth="300" 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-04-01T18:49:57.553

[`mc:Ignorable`](http://msdn.microsoft.com/en-us/library/aa350024.aspx)命名空间提供被 xaml 处理器“忽略”的 xaml 定义。

这允许您指定设计者在设计时使用的信息，这些信息在运行时被忽略。在您的情况下，您可以指定`DesignHeight`and `DesignWidth`，它们不是 a 上的“真实”属性`Window`，而是在设计器中工作以提供默认的设计时体验。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-04-01T18:50:57.233

`mc:Ignorable="d"`设置`d:`前缀作为设计中使用的属性的标记。在 MSDN 上阅读更多内容：[`mc:Ignorable`属性](http://msdn.microsoft.com/en-us/library/aa350024.aspx)

`d:DesignHeight="500"`并`d:DesignWidth="300"`使用该`d:`前缀，使它们仅在设计时可用 - 在标准程序编译后它们被忽略。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-01T18:52:25.320

这是`namespace`WPF 中预定义的，用于设计时，但在实际编译和执行时将被忽略。它将显示您的设计时选择，但对实际布局没有影响。

有[一篇](https://web.archive.org/web/20130730215413/http://geekswithblogs.net/lbugnion/archive/2010/02/01/quick-tip-commenting-out-properties-in-xaml.aspx)关于该主题的文章。

# powershell - 如何使用 Powershell httpListener 捕获发布/获取变量？

> ID：15749588
> 
> 赞同：2
> 
> 时间：2013-04-01T18:48:08.710
> 
> 标签：powershell, http-post, http-get, httplistener

我想知道如何使用 powershell system.net.HttpListener 捕获 url vars 谢谢

```
$listener = New-Object system.net.HttpListener
$listener.Prefixes.Add('http://127.0.0.1:8080')
$listener.Start()
$context = $listener.GetContext() # block
$request = $context.Request
$response = $context.Response
# $var = read post/get var
$page = Get-Content -Path C:\play.html -Raw
$page = $page.Replace('%VAR%',$var)
$buffer = [System.Text.Encoding]::UTF8.GetBytes($page)
$response.ContentLength64 = $buffer.Length
$output = $response.OutputStream
$output.Write($buffer,0,$buffer.Length)
$output.Close()
$listener.Stop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:13:56.287

如果方法标头是 GET，则使用 QueryString 属性获取查询参数。如果方法标头是 POST，则检查 HasEntityBody 属性，如果为真，则使用 InputSteam 属性从主体中读取 POST 数据。

# python - Python 正则表达式；有 0 匹配 0 或 1

> ID：15749591
> 
> 赞同：1
> 
> 时间：2013-04-01T18:48:16.200
> 
> 标签：python, regex

我有一个较短的字符串`s`，我试图匹配一个较长`s1.`的字符串 1 匹配 1，但 0 将匹配 0 或 1。

例如：

```
s = '11111' would match s1 = '11111'

s = '11010' would match s1 = '11111' or '11011' or '11110' or '11010' 
```

我知道正则表达式会使这变得更容易，但对从哪里开始感到困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T18:50:02.817

用 替换每个实例`0`以`[01]`使其匹配`0`或`1`：

```
s = '11010'
pattern = s.replace('0', '[01]')
regex = re.compile(pattern)

regex.match('11111')
regex.match('11011') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T19:17:36.720

在我看来，您实际上是在寻找位算术

```
s = '11010'
n = int(s, 2)
for r in ('11111', '11011', '11110', '11010'):
    if int(r, 2) & n == n:
        print r, 'matches', s
    else:
        print r, 'doesnt match', s 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T18:50:43.097

```
import re

def matches(pat, s):
    p  = re.compile(pat.replace('0', '[01]') + '$')
    return p.match(s) is not None

print matches('11111', '11111')
print matches('11111', '11011')
print matches('11010', '11111')
print matches('11010', '11011') 
```

你说“匹配一个*更长*的字符串 s1”，但你没有说你是想匹配字符串的开头还是结尾等。在我更好地理解你的要求之前，这会执行完全匹配。

# fluent-nhibernate - 流利的休眠一对多父删除

> ID：15749592
> 
> 赞同：1
> 
> 时间：2013-04-01T18:48:19.183
> 
> 标签：fluent-nhibernate, nhibernate-mapping, nhibernate-cascade

我们有 2 个班级，Parent 和 Child

父级没有对子级的引用，子级在其流利映射中定义了以下内容：

```
References(x => x.Parent, "Parent_id").Not.Nullable(); 
```

删除父记录时，会产生以下错误：

```
The DELETE statement conflicted with the REFERENCE constraint "FKFF68C21EE06905B9". The conflict occurred in database "DatabaseName", table "dbo.tblChild", column 'Parent_id'.
The statement has been terminated. 
```

考虑到父模型没有子类型的属性集合，启用删除父模型的正确映射是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:20:10.753

您不能删除由于外键约束而被子记录引用的父记录。如果您不想将子项映射为集合引用，则必须在删除父记录之前删除所有子记录中对父记录的引用。您可以通过将对父项的引用设置为 null（删除您的 not null 约束）或删除子记录来做到这一点。

所有其他解决方案都在您的父记录中包含一个具有级联映射的反向子集合。

# video.js - 如何限制 Video.js 中的 HTML5 视频带宽使用？

> ID：15749593
> 
> 赞同：1
> 
> 时间：2013-04-01T18:48:20.070
> 
> 标签：video.js

尝试向带宽有限的客户端推出视频。客户担心视频会占用他们现场办公室的所有带宽。在测试中，我发现即使我的视频以 420kbps 编码，下载客户端时它仍然使用大约 1.5mbps。有没有办法控制 video.js 或 video 标签使用的最大带宽？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:20:50.313

抱歉不行。html5 视频元素没有任何限制选项。完全由浏览器决定如何获取视频数据。有些人会立即下载整个内容，其他人会根据需要下载片段。所有我认为将使用尽可能多的管道，因为你给他们。

[媒体源扩展提案](https://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html)希望在此处添加一些功能，但暂时无法使用。

我会在办公室以外的地方找到其他地方来托管视频，比如 Amazon S3。

# json - Jaxb 是否需要 @XmlElement

> ID：15749599
> 
> 赞同：3
> 
> 时间：2013-04-01T18:48:43.677
> 
> 标签：json, xml, jaxb, jersey

我的问题是，在做出 JSON 响应时，是否有必要在 pojo 中的每个元素之前添加 @XmlElement 才能被 jaxb 拾取。我正在使用 jersey-json 1.17 。我问这个的原因是，[泽西网站上给出的例子](https://github.com/jersey/jersey/blob/master/examples/jaxb/src/main/java/org/glassfish/jersey/examples/jaxb/JaxbXmlRootElement.java)没有使用注释。

我得到一个输出 as `{}`，但是当我在属性之前添加 @XmlElement 时，我得到了预期的 JSON 输出。我做错了什么，因为我的 JSON 字符串是空的吗？

我的代码：

顶点列表填充在构造函数中。

**这会产生错误的输出`{}`**

```
@XmlRootElement
public class SquareModel {
    List<Float> vertices = new ArrayList<Float>();
    ....
} 
```

**而这会产生正确的 JSON 字符串：**

```
@XmlRootElement
public class SquareModel {
    @XmlElement(name="vertices")
    List<Float> vertices = new ArrayList<Float>();
    ....
} 
```

**我的返回 JSON 的资源类**

```
@GET
@Produces(MediaType.APPLICATION_JSON)
public SquareModel getJsonString() {
    return new SquareModel();
} 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:00:49.020

不，默认情况下，JAXB (JSR-22@) 实现会将所有公共字段和属性（get/set 组合）视为已映射（不需要`@XmlElement`注释）。

*   [http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html](http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html)

如果您想注释一个字段，我建议您使用`@XmlAccessorType(XmlAccessType.FIELD)`

*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:56:19.983

根据这个[http://jersey.java.net/nonav/documentation/latest/json.html#json.jaxb.approach.section](http://jersey.java.net/nonav/documentation/latest/json.html#json.jaxb.approach.section) 你应该有这个注释（我也在我的代码中使用它，即使它是 XML面向，但它也给了我很酷的 JSON）

> 如果您想轻松地生成/使用 JSON 和 XML 数据格式，采用这种方法将为您节省大量时间。因为即便如此，您仍然可以使用统一的 Java 模型。另一个优点是使用这种模型的简单性，因为 JAXB 使用带注释的 POJO，这些可以作为简单的 Java bean 处理。
> 
> 如果您需要使用非常特定的 JSON 格式，则基于 JAXB 的方法的一个缺点可能是。那么可能很难找到一种适当的方法来生产和使用这种格式。这就是为什么提供了很多配置选项的原因，以便您可以控制事物如何序列化和反序列化。
> 
> 以下是一个非常简单的示例，说明 JAXB bean 的外观。
> 
> 例 5.3。简单的 JAXB bean 实现

```
@XmlRootElement
   public class MyJaxbBean {
     public String name;
     public int age;

     public MyJaxbBean() {} // JAXB needs this

     public MyJaxbBean(String name, int age) {
       this.name = name;
      this.age = age;
    }
  } 
```

# html - 位置在 Safari 中不起作用

> ID：15749606
> 
> 赞同：0
> 
> 时间：2013-04-01T18:49:07.753
> 
> 标签：html, css, safari

我使用了 s3 滑块，它在除 safari 之外的所有浏览器中都能正常工作。仅在 safari 中也未正确加载第一张图像。

[http://www.bestandards.com/new/Joomla_tdavlin/](http://www.bestandards.com/new/Joomla_tdavlin/)。有人可以建议我吗？

```
 #header ul {
        display: block;
        list-style-type: none;
        margin: 0 0 1px;
        padding: 10px 0;
        position: absolute;
        right: 0;
        text-align: right;
        top: 0;
    }
.s3sliderImage {
    display: none;
    float: left;
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:59:07.153

我不能真正 100% 检查它，因为它似乎只发生在第一页加载但你可以尝试从第2745 行的类中删除`float: left;`和删除，但老实说，我认为你的主要问题是你有 2800 行css 仅在您的布局 css 中，然后您的站点还有 7 个其他巨大的 css 文件，并且您的站点非常简单，可以用更少的行来完成，这将减少混乱的机会并使其更容易调试。`position: relative;``.s3sliderImage``layout.css`

# android - 如何在切换按钮上将文本设置在图像右侧

> ID：15749607
> 
> 赞同：2
> 
> 时间：2013-04-01T18:49:27.417
> 
> 标签：android, image, togglebutton

我有一个带有图像的切换按钮，但是当我更改按钮的文本时，文本位于图像后面。我在函数中添加了额外的空格`setText()`，但这不能很好地适应不同的屏幕尺寸。那么我能做什么呢？

切换按钮 auton_select.xml 的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

 <item android:state_checked="true" 
       android:drawable="@drawable/auto_select" /> <!-- pressed -->

 <item android:state_checked="false"
       android:drawable="@drawable/auto_unselect" /> <!-- unchecked -->

 <item android:drawable="@drawable/auto_unselect" /> <!-- default -->

</selector> 
```

在布局中使用切换按钮 xml

```
<ToggleButton
        android:id="@+id/auto_ring_button" 
        android:textOn="               test"
        android:textOff=" "
        android:disabledAlpha=".9"
        android:button="@drawable/auton_select"

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:onClick="showPopupR"
        /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T18:56:10.143

尝试将图像设置为复合可绘制而不是背景。

```
toggleButton.setCompoundDrawablesWithIntrinsicBounds(R.drawable.image, 0, 0, 0); 
```

或在 XML

```
android:drawableLeft="@drawable/image" 
```

参考：
[`setCompoundDrawablesWithIntrinsicBounds()`](https://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawablesWithIntrinsicBounds%28int,%20int,%20int,%20int%29)
[`android:drawableLeft`](https://developer.android.com/reference/android/widget/TextView.html#attr_android%3adrawableLeft)

# javascript - 使用 $.Deferred() 作为回调

> ID：15749611
> 
> 赞同：0
> 
> 时间：2013-04-01T18:49:35.267
> 
> 标签：javascript, jquery, jquery-deferred

在我的项目中，我没有使用回调，而是尝试使用 $.Deferred 在所有应用程序中具有统一的逻辑，我的代码中有很多地方可以执行以下操作：

```
function someMagicHandler(request) {
    var me = this;
    var sandbox = me.getSandbox();

    var options = request.options;
    var deferred = request.deferred;

    var result = [];

    var databaseOperation = sandbox.database.all('records').done(function (records) {
        result.concat(records);
        deferred.notify(records);
    });

    var serverResponse;
    var serverOperation = sandbox.server.requestRecords(options).then(function (response) {
        // First we are trying to save received records to database
        serverResponse = response;
        result.concat(response.Records);
        deferred.notify(response.Records);

        return sandbox.database.put('records', response.Records);
    }).done(function() {
        sandbox.storage.setTimestamp('records', new Date(serverResponse.Timestamp));
    });

    $.when(databaseOperation, serverOperation).then(deferred.resolve, deferred.reject);
} 
```

在这段代码中，我个人不喜欢最后一行：

```
$.when(databaseOperation, serverOperation).then(deferred.resolve, deferred.reject); 
```

有没有标准的表达方式：

```
$.when(databaseOperation, serverOperation).then(deferred); 
```

这基本上意味着：

```
$.when(databaseOperation, serverOperation).then(deferred.resolve, deferred.reject, deferred.notify); 
```

# 编辑

我已经更深入地研究了这个问题，似乎只有当您不依赖没有内存的 deferred.progress() 时，以下解决方案才可以，因此在后续异步操作同步完成时不会返回任何数据。

# 概括

如果您使用 $.Deferred() 作为回调（即当您依赖`notify`或`progress`函数时，在这种情况下您需要将其作为参数传递），那么您将不得不使用丑陋的

```
blahblahblah.then(deferred.resolve, deferred.reject, deferred.notify) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:04:41.757

你可以替换这个

```
$.when(databaseOperation, serverOperation).then(deferred.resolve, deferred.reject); 
```

有了这个：

```
request.deferred = $.when(databaseOperation, serverOperation); 
```

并删除对变量的所有引用，`deferred`因为`$.when`已经为您创建了一个承诺（据我阅读手册）。

# svn - 对 hg 存储库的只读 svn 访问

> ID：15749613
> 
> 赞同：3
> 
> 时间：2013-04-01T18:49:41.610
> 
> 标签：svn, mercurial

Hg 很好，但是，我们（开发团队）确实缺少一些 Svn 功能。最重要的是：

*   能够使用“svn externals”将（部分）项目提取到其他项目的子目录中，以及
*   只能检出存储库的子目录（主要与第一个问题结合使用）。

这是两个相当紧迫的问题，而 Hg 相对于 Svn 的优势似乎越来越成为具有优势的功能。这是因为我喜欢适合我们（已建立和成功的）工作流程的工具，而不是将我们的工作流程更改为工具的范例。

因此，一个想法是维护我们 hg 存储库的只读 svn 存储库克隆。经过大量谷歌搜索后，我发现 bitbucket 实际上正在尝试这样的事情：

[https://confluence.atlassian.com/display/BITBUCKET/Using+Subversion+to+Access+a+Bitbucket+Repository](https://confluence.atlassian.com/display/BITBUCKET/Using+Subversion+to+Access+a+Bitbucket+Repository)

（而且看起来，它的效果不是很好）。

我对通过 svn 提交到存储库不感兴趣，也不需要通过 svn 获得的完整历史记录。我只需要可用的默认提示。

最重要的存储库目前托管在 SourceForge 上。如果 BitBucket 中的此功能一直有效，我不介意切换主机。但是，我不想维护自己的服务器（我已经遇到了足够多的问题）。

因此，我的问题是：

有谁知道通过 Subversion 访问托管 Hg 存储库的有效解决方案？

可悲的是，如果没有，我们实际上可能会迁移回 svn。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:51:40.917

1.  AFAIK，不存在这样的（工作）桥梁 - hg 和 svn 之间的核心存在很多架构差异，这使得“任务不可能”（来自我的 POV）
2.  您可以考虑从 Mercurial 镜像到 Subversion*的手工桥梁*（主要取决于您的数据），它必须

    *   `hg export`将变更集（可能在钩子中）提示为补丁文件（尝试使用其他选项，我不知道，这可能很有用）
    *   `svn patch`您的 WC 与上述点的补丁

另一方面，我建议阅读、研究、检查和评​​估 Mercurial 中的[Subrepositories](http://mercurial.selenic.com/wiki/Subrepository)（但我建议**从一开始就使用** [GuestRepo 扩展](http://mercurial.selenic.com/wiki/GuestrepoExtension)，这是为了[避免 Subrepos 中的一些缺点而创建](https://bitbucket.org/selinc/guestrepo)的）。

这样您就不必更改工作流程，而只需在底层存储存储库结构：您不必为每个项目使用大型的整体存储库，而是使用一组较小的独立存储库，它们（薄）“超级存储库”组合到项目的存储库中（和subrepos 将提供模拟/*在某种程度上*/来自 SVN 世界的稀疏结帐和外部）

# windows - Inno Setup 组件之间的动态依赖关系

> ID：15749616
> 
> 赞同：2
> 
> 时间：2013-04-01T18:49:45.860
> 
> 标签：windows, inno-setup

我有三个组件。其中两个都依赖于第三个。当检查其他两个组件中的任何一个进行安装时，是否有一种编程方式来自动选中第三个组件的框？

这种行为类似于嵌套组件的行为，但它们处于同一级别，我无法使用该功能。如果 Inno 提供了一种组件间依赖关系的方法会很好，但在那之前......

**更新**
也许我设想的一个虚构的例子会有所帮助：

```
[Components]
Name: "parent1"; Description: "app 1"
Name: "parent2"; Description: "app 2"; Depends: parent1
Name: "parent2\child"; Description: "feature"
Name: "parent3"; Description: "app 3"; Depends: parent1
Name: "parent3\child"; Description: "feature" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:22:45.953

默认情况下，选择子组件也会自动选择其父组件（尽管您可以禁用它）。不过，这听起来正是您想要的行为——您只是倒着想。

假设您有独立的组件 A 和 B。您还拥有组件 C 和 D，它们中的每一个都可以彼此单独安装，但需要安装组件 B。

```
[Components]
Name: "A"; Description: "app 1"
Name: "B"; Description: "app 2"
Name: "B\C"; Description: "feature C of app 2"
Name: "B\D"; Description: "feature D of app 2" 
```

鉴于这种安排，用户将能够根据需要自行选择 A 或 B；他们还可以选择添加 C 或 D（或不添加）。但是选择 C ​​或 D 也会强制选择 B。

（注意：这假设您有其他以所有这些为条件的条目，特别是 B 本身。如果您只是自己测试复选框并且尚未添加`Components:`条件，那么您将不得不添加`Flags: checkablealone`到 B in为了获得所需的行为。）

为了更接近您上面的示例，请尝试以下操作：

```
[Components]
Name: "app1"; Description: "app 1"
Name: "app1\app2"; Description: "app 2"
Name: "app1\app2\child"; Description: "feature"
Name: "app1\app3"; Description: "app 3"
Name: "app1\app3\child"; Description: "feature" 
```

应用程序 1 可以自行安装，应用程序 2 可以与应用程序 3 分开安装 - 但选择应用程序 2 或应用程序 3 将强制包含应用程序 1。（是的，这将显示为一个可见的层次结构——但您可能应该无论如何都应该显示它，以便用户知道为什么他们的选择以这种方式被强制。）

另一种可能性：如果用户没有理由需要自行安装 app1，那么您可以将其从组件中完全删除。只需将条件从 更改`Components: app1`为`Components: app2 or app3`。（或者如果 app2 和 app3 是唯一的替代方案，并且它们都需要 app1，则完全删除该条件。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:30:18.733

```
procedure InitializeWizard();
begin
  WizardForm.ComponentsList.OnClickCheck := @ComponentsClickCheck;
end;

procedure ComponentsClickCheck(Sender: TObject);
var
  ListBox: TNewCheckListBox;
  parent1_top: Integer;
  parent2_top: Integer;
  parent3_top: Integer;
begin
  ListBox := TNewCheckListBox(Sender);
  parent1_top := 0;
  parent2_top := 1;
  parent3_top := 3;
  (* Check if parent2_top was selected. *)
  if (ListBox.State[parent2_top] = cbChecked) or
    (ListBox.State[parent2_top] = cbGrayed) then begin
    (* Check a dependent component. *)
    ListBox.CheckItem(parent1_top, coCheckWithChildren);
  end;
  (* Check if parent3_top was selected. *)
  if (ListBox.State[parent3_top] = cbChecked) or
    (ListBox.State[parent3_top] = cbGrayed) then begin
    (* Check a dependent component. *)
    ListBox.CheckItem(parent1_top, coCheckWithChildren);
  end;
end; 
```

有一个副作用是，在取消选择“依赖”组件之前，“依赖”变得不可更改。更改依赖项的启用状态以进行视觉澄清也会有所帮助。

# sql-server - 在存储过程中调用带有输出参数的存储过程 - 列名无效

> ID：15749617
> 
> 赞同：3
> 
> 时间：2013-04-01T18:49:47.460
> 
> 标签：sql-server, stored-procedures

我编写了一个使用输出变量的存储过程。存储过程运行良好，我知道这是事实。我可以使用下面的代码片段运行存储过程

```
DECLARE @return_value int,
    @coEfficientAlpha float

EXEC    @return_value = [dbo].[getTestCoEfficientAlphaByDasIdAndKeyStandard]
    @dasId = 4001,
    @keyStandardId = 960,
    @coEfficientAlpha = @coEfficientAlpha OUTPUT

SELECT  @coEfficientAlpha as N'@coEfficientAlpha'

SELECT  'Return Value' = @return_value

GO 
```

但是当我从我的其他存储过程中调用这个过程时`getTestReliabilityOnDasId`，我收到一个

> 列名无效

错误信息。我在这两个程序中都没有做任何奇怪的事情。有任何想法吗？

如果需要，我会发布更多代码。

编辑：

我的 2 个存储过程的代码如下：

好的，定义`getTestCoEfficientAlphaByDasIdAndKeyStandard`是

```
ALTER procedure [dbo].[getTestCoEfficientAlphaByDasIdAndKeyStandard]
@dasId int,
@keyStandardId int,
@coEfficientAlpha float output
as

--declare @dasId int
--set @dasId = 4001

--declare @keyStandardId int
--set @keyStandardId = 960

-- used all over query
select qa.*, dq.dasQuestionId
into #temp
from test t 
    inner join question q on t.testId = q.testId
    inner join questionAnswer qa on q.questionId = qa.questionId
    inner join dasQuestion dq on t.dasId = dq.dasId and q.questionNumber = dq.questionNumber
    inner join keyStandardDasQuestion ksdq on dq.dasQuestionId = ksdq.dasQuestionId
where t.dasId = @dasId
    and q.questionTypeId = 2
    and ksdq.keyStandardId = @keyStandardId

-- used later in query
select tb1.DasQuestionId, sum(square(tb1.score - tb2.avgScore))/count(tb1.score) as qSd2
into #questions
from #temp tb1
    inner join (
        select questionId, sum(score)/cast(count(score) as float) as avgScore
        from #temp
        group by questionId
    )tb2 on tb1.questionId = tb2.questionId
group by tb1.dasQuestionId

-- used later in query
select studentNo, sum(score) as studentTestScore, count(score) as cntTestScore
into #testData
from #temp
group by studentNo

-- average number of questions correct on test          
declare @avgTScore float
set @avgTScore = (  
    select sum(studentTestScore) / cast(count(studentTestScore) as float) from     #testData    
    )   

-- average variance of questions right on test
declare @tSd2 float
set @tSd2 = (
        select sum(xMinusMean)/count(xMinusMean) as tSd2
        from (
            select (t.studentTestScore - @avgTScore)*(t.studentTestScore - @avgTScore) as xMinusMean
        from #testData t
        )tb1 

    )

set @coEfficientAlpha = (
    select (count(distinct dasQuestionId)/ (cast(count(distinct dasQuestionId) as     float) - 1))*(1-((select sum(qSd2) from #questions)/@tSd2)) as coEfficientAlpha
    from #temp
)

drop table #temp, #questions , #testdata 
```

的定义`getTestReliabilityOnDasId`是

```
ALTER procedure [dbo].[getTestReliabilityOnDasId]
@dasId int
as

--declare @dasId int
--set @dasId = 4001

select ROW_NUMBER() OVER(order by ks.keyStandardId asc) AS rowNumber,
    da.dasId, da.title, ks.keyStandardId, ks.keyStandardText, count(dq.dasQuestionId)     as countQuestions
into #temp
from districtAssessment da
    inner join dasQuestion dq on da.dasId = dq.dasId
    inner join keyStandardDasQuestion ksdq on dq.dasQuestionId = ksdq.dasQuestionId
    inner join keyStandard ks on ksdq.keyStandardId = ks.keyStandardId
where da.dasId = @dasId
group by da.dasId, da.title, ks.keyStandardId, ks.keyStandardText

create table #KeyStandards(
    [keyStandardId] int,
    coEfficientAlpha float
)

declare @numRows int
select @numRows = max(rowNumber)
from #temp

declare @keyStandardId int, @rowNumber int
set @rowNumber = 1

DECLARE @return_value int,
        @coEfficientAlpha float,
        @numQuestions int

WHILE @rowNumber <= @numRows
BEGIN
    set @keyStandardId = (
   select keyStandardId
   from #temp
   where rowNumber = @rowNumber )

    set @numQuestions = (select countQuestions from #temp where keyStandardId = @keyStandardId   )

    if @numQuestions > 1
    begin
        EXEC    @return_value = [dbo].    [getTestCoEfficientAlphaByDasIdAndKeyStandard]
                @dasId = @dasId,
                @keyStandardId = @keyStandardId,
            @coEfficientAlpha = @coEfficientAlpha OUTPUT

    end

   insert into #keyStandards
   select @keyStandardId, case when @coEfficientAlpha is null then 'Not Enough     Questions' else @coEfficientAlpha end 

   set @rowNumber = @rowNumber + 1
END

select t.*, k.coEfficientAlpha
from #temp t
    inner join #keyStandards k on t.keyStandardId = k.keyStandardId

drop table #temp, #KeyStandards 
```

我得到的确切错误消息是：

> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 33 行
> 无效的列名称“questionId”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 31 行
> 无效的列名称“questionId”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 31 行
> 无效的列名称“分数”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 31 行
> 无效的列名称“分数”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 34 行
> 无效的列名称“questionId”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 35 行
> 无效列名称“dasQuestionId”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 27 行
> 无效的列名称“DasQuestionId”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 27 行
> 无效的列名称“分数”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 27 行
> 无效的列名称“分数”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 41 行
> 无效的列名称“studentNo”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 38 行
> 无效的列名称“studentNo”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 38 行
> 无效的列名称“分数”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 38 行
> 无效的列名称“分数”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 66 行
> 无效列名称“dasQuestionId”。
> 消息 207，级别 16，状态 1，过程 getTestCoEfficientAlphaByDasIdAndKeyStandard，第 66 行
> 无效列名称“dasQuestionId”。

注意：如果我运行，`getTestReliabilityOnDasId`我会收到这些错误消息。如果我运行`getTestCoEfficientAlphaByDasIdAndKeyStandard`然后`getTestReliabilityOnDasId`在单独的查询窗口中运行，那么一切运行正常。这几乎就像 SQL Server 引擎必须预热或其他东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T20:20:19.887

你有一个命名冲突。它们都`SELECT ... INTO`用于创建一个名为`#temp`.

当一个存储过程调用另一个存储过程时，嵌套存储过程可以看到父级的临时表。

这个预先存在的`#temp`表将具有与子过程引用的完全不同的一组列名，并且它不会编译。

如果您用`#temp`不同的临时表名称替换其中一个过程中对的所有引用，那么您应该不会再看到这些编译错误。

# bash - 将命令作为参数传递给 bash 脚本

> ID：15749618
> 
> 赞同：8
> 
> 时间：2013-04-01T18:49:49.533
> 
> 标签：bash

如何将命令作为参数传递给 bash 脚本？在下面的脚本中，我尝试这样做，但它不起作用！

```
#! /bin/sh

if [ $# -ne 2 ]
then
    echo "Usage: $0 <dir> <command to execute>"
    exit 1;
fi;

while read line
do
    $($2) $line
done < $(ls $1);

echo "All Done" 
```

此脚本的示例用法是

```
./myscript thisDir echo 
```

执行上面的调用应该回显`thisDir`目录中所有文件的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:04:11.957

您的命令“echo”命令从 $line 中的参数“隐藏”在子 shell 中。

我想我理解你的尝试`$($2)`，但它可能有点矫枉过正，除非这不是全部，所以

```
 while read line ; do
    $2 $line
 done < $(ls $1) 
```

应该适用于您的示例`thisDir echo`。如果您真的需要 cmd-substitution 和 subshel​​l，请输入参数，以便它们可以互相看到：

```
 $($2 $line) 
```

正如 DS 所提到的，您可能需要`eval`在其中任何一个之前。

IHTH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:12:51.723

第一个大问题：作为命令自行`$($2) $line`执行，然后尝试将其输出（如果有）作为另一个命令运行，并作为其参数。你只是想要。`$2``$line``$2 $line`

第二个大问题：`while read ... done < $(ls $1)`不从文件名列表中读取，它会尝试由 ls 的输出指定的文件的内容——这将根据具体情况以多种方式失败。进程替换 ( `while read ... done < <(ls $1)`) 或多或少会做你想要的，但它是一个仅限 bash 的功能（即你*必须*`#!/bin/bash`用，而不是开始脚本`#!/bin/sh`）。[无论如何，解析 ls](http://mywiki.wooledge.org/ParsingLs)是个坏主意，你应该几乎总是只使用 shell glob ( `*`) 来代替。

该脚本还存在一些其他潜在问题，文件名中的空格（使用`$line`周围没有双引号等）和奇怪的风格怪异（您不需要`;`在 shell 中的行尾）。这是我对重写的尝试：

```
#! /bin/sh

if [ $# -ne 2 ]; then
    echo "Usage: $0 <dir> <command to execute>"
    exit 1
fi

for file in "$1"/*; do
    $2 "$file"
done

echo "All done" 
```

请注意，我没有在`$2`. 这允许您指定多字命令（例如`./myscript thisDir "cat -v"`，将被解释为运行`cat`带有`-v`选项的命令，而不是尝试运行名为 的命令`"cat -v"`）。将第一个参数之后的所有参数作为命令及其参数实际上会更灵活一些，允许您执行例如`./myscript thisDir cat -v`、`./myscript thisDir grep -m1 "pattern with spaces"`等：

```
#! /bin/sh

if [ $# -lt 2 ]; then
    echo "Usage: $0 <dir> <command to execute> [command options]"
    exit 1
fi

dir="$1"
shift

for file in "$dir"/*; do
    "$@" "$file"
done

echo "All done" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T19:03:38.513

你可以试试：（在你的代码中）

```
echo "$2 $line"|sh 
```

或`eval`：

```
eval "$2 $line" 
```

# matlab - Matlab - 获取子图行和列

> ID：15749620
> 
> 赞同：2
> 
> 时间：2013-04-01T18:49:51.417
> 
> 标签：matlab, resize, matlab-figure, subplot

我正在编写一个脚本来调整给我的任何图形的大小，并且我想获取子图的行和列。例如，如果有人给我一个由以下人员创建的图形：

```
hfig = figure;
haxes = subplot(3,4,1);
... 
```

图形或轴句柄中是否有一个属性告诉我图形有 3 行和 4 列？我需要调整每个轴的大小，知道行和列很重要，所以我知道如何调整它们的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:54:48.133

不，没有这样的财产。只有`'Position'`轴对象的属性。subplot 函数的作用是计算正确的轴位置。

您可以使用 找到图形上的所有轴`ax = findobj(gcf,'type','axes');`。然后获取位置`get(ax,'position')`并分析它们的行数和列数。

例如：

```
pos = cell2mat(get(ax,'position'));
nrows = numel(unique(pos(:,2))); % the same Y position means the same row
ncols = numel(unique(pos(:,1))); % the same X position means the same column 
```

但是请注意，它将仅分析现有轴。如果只创建了两个轴`subplot(221)`，`subplot(222)`您将得到 1 行，而不是 2。

# javascript - AJAX 光标 - Sharepoint Visual Webpart

> ID：15749624
> 
> 赞同：0
> 
> 时间：2013-04-01T18:49:57.697
> 
> 标签：javascript, asp.net, ajax, sharepoint, web-parts

我正在创建自定义 SharePoint 2010 Web 部件。

我是 AJAX 新手，所以请帮助我。

谁能给我一步一步的程序来执行以下操作：

在按钮单击：

1.  禁用按钮

2.  显示等待屏幕/等待动画/沙漏光标

3.  做一个长期的工作。

4.  显示在作业成功完成的文本框中。

为了更容易理解，我在下面发布了我的代码：

以下是我的 VisualWebPart.ascx 文件：

```
<%@ Assembly Name="$SharePoint.Project.AssemblyFullName$" %>
<%@ Assembly Name="Microsoft.Web.CommandUI, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
<%@ Register Tagprefix="SharePoint" Namespace="Microsoft.SharePoint.WebControls" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
<%@ Register Tagprefix="Utilities" Namespace="Microsoft.SharePoint.Utilities" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Register Tagprefix="asp" Namespace="System.Web.UI" Assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" %>
<%@ Import Namespace="Microsoft.SharePoint" %> 
<%@ Register Tagprefix="WebPartPages" Namespace="Microsoft.SharePoint.WebPartPages" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="VisualWebPart1.ascx.cs" Inherits="AE_Project_Form.VisualWebPart1.VisualWebPart1" %>

<style type="text/css">
.auto-style1 {
        width: 26%;
        height: 248px;
    }

.wait{
        cursor:wait;
    }
</style>

<script type="text/javascript">
     function ShowCursor() {    
document.getElementById('btn_Submit').disabled = true;
$(this).addClass("wait");    
     }
</script>

<table class="auto-style1">
<tr>
<td class="auto-style4" colspan="2">
<asp:Button ID="btn_Submit" runat="server" OnClick="btn_Submit_Click" Text="Submit" Width="97px" Height="20px" />
</td>
</tr> 
```

现在我的 VisualWebPart.ascx.cs 文件如下所示：

```
using System;
using System.ComponentModel;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Data.SqlClient;
using Microsoft.SharePoint;
using Microsoft.SharePoint.Publishing;
using System.Data;

namespace AE_Project_Form.VisualWebPart1
{
    [ToolboxItemAttribute(false)]
    public partial class VisualWebPart1 : WebPart
{
public VisualWebPart1()
        {
        }

        protected override void OnInit(EventArgs e)
        {
            base.OnInit(e);
            InitializeControl();

        }
protected void Page_Load(object sender, EventArgs e)
        {
            this.btn_Submit.Attributes.Add("onClick", "ShowMessage()");
}
protected void btn_Submit_Click(object sender, EventArgs e)
        {
//Do a long process including some Database updates etc...

//Just show a MSGBOX saying process completed 

Type cstype = this.GetType();
ClientScriptManager cs = Page.ClientScript;
if (!cs.IsStartupScriptRegistered(cstype, "PopupScript"))
{
 String cstext = "alert('Successfully Added  Project');";
cs.RegisterStartupScript(cstype, "PopupScript", cstext, true);
 }

}
} 
```

现在我想要 webpart 做的是当一个按钮被点击时：

1.  禁用按钮并启动等待光标

2.  做长数据库过程

3.  漫长的过程完成后，显示一个消息框，表明过程已完成。

但是发生的情况是该按钮没有被禁用，我也没有看到等待光标。长处理器按预期需要很长时间，并且只显示一个最终消息框。

我在某处对 Javascript C# webpart 编码的理解错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:08:49.253

我在这里的讨论中得到了答案： [http ://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopmentprevious/thread/09f6e65c-5d8c-4516-81f1-f48c21d20ef0/?prof=required](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopmentprevious/thread/09f6e65c-5d8c-4516-81f1-f48c21d20ef0/?prof=required)

请参阅杰克的最后回复......它对我有用，谢谢......

# cloud-foundry - cloudfoundry - vmc 以非交互方式指定“无”url

> ID：15749632
> 
> 赞同：0
> 
> 时间：2013-04-01T18:50:19.253
> 
> 标签：cloud-foundry, vmc

我希望以非交互方式推送 URL 为“none”的应用程序

现在我的命令看起来像：

```
vmc push sometestapp -f --framework "standalone" --command "python nowebapp.py" --runtime "python2" --url "none" 
```

但这给了我一个

```
FAILED
CFoundry::UriNotAllowed: 702: External URIs are not enabled for this account 
```

错误。

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:07:33.817

如果您保存清单，您可以编辑并使用它来重新推送应用程序。根据 VMC 的版本，您需要将 URL 键设置为“无”或将其留空。

# javascript - If/Else 语句在 Click 上显示不同。

> ID：15749633
> 
> 赞同：0
> 
> 时间：2013-04-01T18:50:25.917
> 
> 标签：javascript, jquery, onclick

[http://bvh.delineamultimedia.com/?page_id=2](http://bvh.delineamultimedia.com/?page_id=2) -> 如果您单击第一张图片，下拉菜单中有一个画廊……这就是我想要的。但是，如果您关闭它并重新打开它。它转到静态图像。

所以我正在使用的这个js中有一个函数语句，似乎无法弄清楚问题是什么。[http://bvh.delineamultimedia.com/wp-content/themes/bvh/js/portfolio/superbox.js](http://bvh.delineamultimedia.com/wp-content/themes/bvh/js/portfolio/superbox.js)

这里是函数...

```
$('.superbox').on('click', '.superbox-list', function (e) {

//allows for superbox to work inside of quicksand
$('ul.filterable-grid').css({
    overflow: 'visible'
});

var currentimg = $(this).find('.superbox-img');

// cleanup
superbox.find('.title').remove();
superbox.find('.description').remove();
superbox.find('.royalSlider').appendTo(superboximg);
//superbox.find('.royalSlider').appendTo($(this)); // remove the slider from previous events
//superbox.find('.royalSlider').remove();

var imgData = currentimg.data();
superboximg.attr('src', imgData.img);
if (imgData.title) {
    superbox.append('<h3 class="title">' + imgData.title + '</h3>');
}
if (imgData.description) {
    superbox.append('<div class="description">' + imgData.description + '</div>');
}

//royal slider fix

var sliderData = currentimg.siblings('.royalSlider'); // grab the slider html that we want to insert

if (sliderData.length > 0) { // show the slider if there is one
    superbox.append(sliderData); // clone the element so we don't loose it for the next time the user clicks
    superboximg.css('display', 'none');
} else { // if there is no slider proceed as before
    if (imgData.img) {
        superboximg.attr('src', imgData.img);
        superboximg.css('display', 'block');
    }
}

if ($('.superbox-current-img').css('opacity') == 0) {
    $('.superbox-current-img').animate({
        opacity: 1
    });
}

if ($(this).next().hasClass('superbox-show')) {
    superbox.toggle();
} else {
    superbox.insertAfter(this).css('display', 'block');
}

$('html, body').animate({
    scrollTop: superbox.position().top - currentimg.width()
}, 'medium');

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:57:34.920

如果您重新打开页面，浏览器将再次从头开始加载 url ( [http://bvh.delineamultimedia.com/?page_id=2 )。](http://bvh.delineamultimedia.com/?page_id=2)如果您想重新显示某些内容，则必须更改 url 并确保 JavaScript 能够选择它。这通常使用`window.location.hash`.

# java - 如何使用 compareToIgnoreCase 方法？

> ID：15749637
> 
> 赞同：-6
> 
> 时间：2013-04-01T18:50:32.200
> 
> 标签：java, string, methods

如何使用`compareToIgnoreCase`“String”类的方法来查看一个字符串是小于还是大于另一个字符串？我不能使用“ `>`”和“ `<`”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T18:53:08.687

此例程返回 -1、0 或 1 作为值，因此您可以执行以下操作：

```
String first;
String second;
... assign first and second

if( first.compareToIgnoreCase(second) < 0) {
    // second is less than first...
} else if first.compareToIgnoreCase(second) == 0) {
    // second is same as first...
} else if first.compareToIgnoreCase(second) > 0) {
    // second is greater than first...
} 
```

# android - Android画布绘图顺序不正确......为什么/如何修复它？

> ID：15749640
> 
> 赞同：2
> 
> 时间：2013-04-01T18:50:37.690
> 
> 标签：android, android-canvas, draw

所以，基本上，如果位图存在，首先绘制它，在整个视图/画布上拉伸。然后在上面画一些文本和一个矩形，它应该很好用。对？

我假设这会绘制一个“背景”（Being currentPicture），然后在它下面画一些东西，% 和矩形。

想知道为什么它的行为不是这样？它以前可以工作，但是发生了一些变化，现在没有了。

此外，该：

```
canvas.drawRect(0, 0, width, 200, p); 
```

不画。

类似的故事：

```
canvas.drawRect(0, 100, width, 200, p); 
```

两者都在 if 语句中。我认为不应该绘制第一个，但应该绘制第二个。位图绘制正确。

有任何问题，请追问！

代码：

```
@Override
public void onDraw(Canvas canvas) {
    int myColor = 0;
    p.setColor(Color.TRANSPARENT);
    canvas.drawRect(0, 0, width, height, p);
    if (currentPicture != null) {
        p.setColor(Color.RED);
        canvas.drawRect(0, 0, width, 200, p);
        canvas.drawBitmap(currentPicture, new Rect(0, 0, width, height), new Rect(0, 0, width, height), p);
        canvas.translate(translateX, translateY);
        canvas.scale(scaleX, scaleY);
        pictureCanvas = canvas;
        p.setColor(Color.GREEN);
        canvas.drawRect(0, 100, width, 200, p);
    }
    if (ci >= 66) {
        myColor = (Color.RED);
    } else if (ci >= 33) {
        myColor = (Color.YELLOW);
    } else {
        myColor = (Color.GREEN);
    }
    p.setColor(myColor);
    // Progress bar stuff.
    canvas.drawRect(0, height - 100, (progress * width / 20), height, p);
    // backdrop for textview.
    p.setColor(Color.BLACK);
    canvas.drawText(ci + "%", -1, height - 19, p);
    canvas.drawText(ci + "%", +1, height - 21, p);
    // Draw CI.
    p.setColor(myColor);
    p.setTextSize(100);
    canvas.drawText(ci + "%", 0, height - 20, p);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:17:34.483

```
p.setColor(Color.TRANSPARENT);
canvas.drawRect(0, 0, width, height, p); 
```

非常荒谬，尤其是当您在那之后绘制完整的背景时。

您是否尝试删除翻译/比例以查看这是否可能是问题？

哦，你为什么这样做：`pictureCanvas = canvas;`？

# javascript - 创建多个图像滑块

> ID：15749644
> 
> 赞同：0
> 
> 时间：2013-04-01T18:50:45.123
> 
> 标签：javascript, jquery, html, css

我有一个图像滑块，但同一页面上需要多个滑块。是否可以复制我的功能使其不干扰原件？

HTML

```
<div id="slideshow">
   <div>
     <img src="http://farm6.static.flickr.com/5224/5658667829_2bb7d42a9c_m.jpg">
   </div>
   <div>
     <img src="http://farm6.static.flickr.com/5230/5638093881_a791e4f819_m.jpg">
   </div>
</div> 
```

CSS

```
#slideshow { 
    margin: 50px auto; 
    position: relative; 
    width: 240px; 
    height: 240px; 
    padding: 10px; 
}
#slideshow > div { 
    position: absolute; 
    top: 10px; 
    left: 10px; 
    right: 10px; 
    bottom: 10px; 
} 
```

jQuery

```
$(function() {

            $("#slideshow > div:gt(0)").hide();

            setInterval(function() { 
              $('#slideshow > div:first')
                .fadeOut(1000)
                .next()
                .fadeIn(1000)
                .end()
                .appendTo('#slideshow');
            },  3000);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:20:19.640

我不确定是否真的需要创建自己的函数。Horen 给出了一个很好的答案，但是在实现它时，您意识到需要稍微调整代码以处理区分将孩子附加到自己的幻灯片或另一个幻灯片的代码。为此，我使用该`.each()`功能对每个幻灯片进行“沙盒化”。

当您使用多于两张图片时也会出现错误。我处理这个问题的方法是在加载时隐藏除第二个图像之外的所有图像，而不是仅仅隐藏第一个图像。

这是我使用的最终标记：

演示：http: [//jsfiddle.net/F4nTJ/2/](http://jsfiddle.net/F4nTJ/2/)

# css

```
.slideshow { 
    margin: 50px auto; 
    position: relative; 
    width: 240px; 
    height: 240px; 
    padding: 10px; 
}
.slideshow > div { 
    position: absolute; 
    top: 10px; 
    left: 10px; 
    right: 10px; 
    bottom: 10px; 
} 
```

# html

```
<div class="slideshow">
   <div>
       <img src="http://farm6.static.flickr.com/5224/5658667829_2bb7d42a9c_m.jpg"/>
   </div>
   <div>
       <img src="http://farm6.static.flickr.com/5230/5638093881_a791e4f819_m.jpg"/>
   </div>
</div>
<div class="slideshow">
   <div>
       <img src="http://farm6.static.flickr.com/5230/5638093881_a791e4f819_m.jpg"/>
   </div>
   <div>
       <img src="http://farm6.static.flickr.com/5224/5658667829_2bb7d42a9c_m.jpg"/>
   </div>
</div> 
```

# javascript

```
$(function() {
    $(".slideshow").each(function(){$(this).children().not(":nth-child(2)").hide();});

    setInterval(function() {
        $('.slideshow').each(function(){
            $(this).children(':first')
            .fadeOut(1000)
            .next()
            .fadeIn(1000)
            .end()
            .appendTo($(this));
        });
    },  3000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:53:03.240

是的，给它一个`class`而不是一个`id`

在 HTML 中更改`id="slideshow"`为`class="slideshow"`，在 CSS 和 jQuery 中更改`#slideshow`为`.slideshow`

然后，您可以向 HTML 添加第二个（以及更多）幻灯片容器。只需更改嵌套的图像源，您就会拥有不同的幻灯片 - 很有趣！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:00:32.753

这是您应该考虑编写自己的插件的情况：

```
$.fn.slider = function() {
    return this.each(function() {
        var $self = $(this); 
        $(this).children("div:gt(0)").hide();
        setInterval(function() {
            $self.children('div:first')
                .fadeOut(1000)
                .next()
                .fadeIn(1000)
                .end()
                .appendTo($self);
        }, 3000);
    });
};

$('.slideshow').slider(); 
```

[http://jsfiddle.net/pnp8m/2/](http://jsfiddle.net/pnp8m/2/)

# c# - 实体框架（数据库优先）找不到连接字符串

> ID：15749656
> 
> 赞同：0
> 
> 时间：2013-04-01T18:51:41.313
> 
> 标签：c#, asp.net-mvc, entity-framework, web-config, connection-string

我有两个独立的项目，一个用于数据交互，另一个用于 WebUI。

WebUI 项目根目录中的 web.config 具有以下连接字符串：

```
<add name="MySiteEntities" connectionString="metadata=res://*/MySite.csdl|res://*/MySite.ssdl|res://*/MySite.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=tcp:**********.database.windows.net,****;initial catalog=MySite;user id=username@**********;password=*******;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" /> 
```

EDMX（数据库优先）生成的 dbcontext 具有以下内容：

```
public partial class MySiteEntities : DbContext
{
    public MySiteEntities()
        : base("name=MySiteEntities")
    {
    }
... 
```

当我在本地运行站点时，实体框架会找到连接字符串并成功连接到数据库。

但是，当我发布时，实体框架似乎找不到连接字符串，而是抛出一个`UnintentionalCodeFirstException`.

我在这里到底做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:35:12.587

调试的第一步是确保您了解引发的异常。根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.data.entity.infrastructure.unintentionalcodefirstexception%28v=vs.103%29.aspx)，`UnintentionalCodeFirstException`是：

> 在 Database First 或 Model First 模式下从 DbContext 模板生成上下文时引发的异常，然后在 Code First 模式下使用。

这不是非常有帮助，但它确实为您提供了一些线索：您使用 Database First 或 Model First 生成了上下文，但现在由于某种原因，上下文认为它应该是 Code First。

基于此的一点搜索让我得到了：[不要错误地使用 Code First](http://blog.oneunicorn.com/2012/02/26/dont-use-code-first-by-mistake/)，它在解释可能的原因方面做得很好。我建议你读一读，看看是否有什么适合你的。

我最好的猜测是，由于这在本地而不是远程有效，因此与您的连接字符串对应的 EDMX 映射无论出于何种原因都没有进行跳转。如果您正在使用源代码控制，那么它可能没有被提交。如果没有此映射，EF 将导致代码优先策略，该策略将导致此异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:41:30.343

我认为您的连接字符串中的数据源值中不需要“tcp：”。我的天蓝色应用程序的配置中没有它，它工作正常。

# xpath - Xpath：选择匹配三个子属性的父链接

> ID：15749657
> 
> 赞同：2
> 
> 时间：2013-04-01T18:51:43.683
> 
> 标签：xpath

我需要使用符合以下三个标准的 xpath 选择链接：

父@class = 'testItem'

孩子@class ='icon icon_checked'

text = '测试文本放在这里！'

我不确定将 text 属性放在 xpath 引用中的哪个位置。我尝试了以下许多排列：

```
//a[@class="testItem" and child::span[@class="icon icon_checked"] and li[text()="test text goes here!"]] 
```

我的问题是文本部分不在它自己的范围内。

这是原始示例：

```
<li>
<a class="testItem2" data-code="2" href="javascript:void(0);">
<span class="icon icon_checked"></span>
test text goes here2!
</a>
</li>

<li>
<a class="testItem" data-code="2" href="javascript:void(0);">
<span class="icon icon_checked"></span>
test text goes here!
</a>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:07:31.950

谢谢您的帮助。我找到了答案。

我可以简单地将 xpath 的最后一部分从 li[text()="test text goes here!"] 更改为 .[text()="test text goes here!"]]。

我最终的工作 xpath 是：

```
//a[@class='testItem' and child::span[@class='icon icon_checked'] and .[text()='test text goes here!']] 
```

# google-apps-script - 谷歌应用脚 本面板布局 - 设置宽度水平面板

> ID：15749659
> 
> 赞同：2
> 
> 时间：2013-04-01T18:51:45.487
> 
> 标签：google-apps-script

我有一个包含两个垂直面板（1 个左侧，1 个右侧）的水平面板当我为水平面板分配宽度（比如 80%）时，左右垂直面板被粘在水平面板的各自侧面。因此，两个垂直面板之间存在间隙。我怎样才能让两个面板并排出现，并在它们的右侧留下任何额外的空间？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:10:58.417

插图 ：

![在此处输入图像描述](https://i.stack.imgur.com/sWKby.jpg)

```
function doGet() {
  var app = UiApp.createApplication().setTitle('panels');
  var hor = app.createHorizontalPanel().setWidth('80%').setHeight('200px').setBorderWidth(2).setStyleAttribute('background', 'yellow');
  var vp1 = app.createVerticalPanel().setBorderWidth(5).setWidth('100%').setStyleAttribute('background', 'green');
  var vp2 = app.createVerticalPanel().setBorderWidth(5).setWidth('100%').setStyleAttribute('background', 'red');
  vp1.add(app.createLabel('panel1').setHeight('150px'))
  vp2.add(app.createLabel('panel2').setHeight('150px'))
  app.add(hor);
  hor.add(vp1).add(vp2)
  return app
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:39:48.587

将 vpanels 的宽度设置为 100%

# elasticsearch - 使用 from 和 size 参数的弹性搜索过滤器方面

> ID：15749665
> 
> 赞同：2
> 
> 时间：2013-04-01T18:52:04.620
> 
> 标签：elasticsearch, facet

我试图在一个方面获取过滤文档的前几页中的计数。

那可能吗？

例如，在这里我希望我的 previous_macs 方面计算 20 个之前具有 os_name:"mac" 的所有文档。

```
{
    "from": 20,
    "size": 10,
    "sort": {
        "created_at": "desc"
    },
    "facets": {
        "previous_macs": {
            "filter": {
                "term": {
                    "os_name": "mac"
                }
            }
            // something here ? facet_filter maybe?
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:29:31.597

没有通用的方法可以做到这一点，但是如果您可以制定一个过滤器来可靠地过滤掉除前 20 条记录之外的所有内容，您可以将其用作`facet_filter`. 因此，如果`created_at`字段是唯一的，您可以使用它来创建一个范围过滤器，该过滤器将包括所有内容，包括第 20 个文档。然后，您可以将此范围过滤器用作`facet_filter`您的构面。

# css - 如果值包含井号 # 符号，则 CSS 属性值选择器不起作用

> ID：15749666
> 
> 赞同：4
> 
> 时间：2013-04-01T18:52:11.170
> 
> 标签：css, css-selectors

我正在使用带有自定义 HTML5 属性的 bootstrap LIKE 下拉菜单，`data-`其前缀是从 开始的值`#`，现在由于某种原因我无法更改它。

这是[脚本链接](http://labs.abeautifulsite.net/jquery-dropdown/)（就像这样`<a href="#" data-dropdown="#dropdown-1">dropdown</a>`）

现在的问题是使用 PHP 使用动态方法，因此元素的子元素经常更改，所以我没有使用`nth-child`这么想的使用`attribute-value`选择器，但 CSS 不接受 if value contains `#`。有什么解决方法吗？

```
<div data-demo="works">This works</div>
<br />
<div data-demo="#doesnt_works">This fails</div> 
```

CSS

```
div[data-demo=works] {
    color: red;
}

div[data-demo=#doesnt_works] {
    color: green;
} 
```

[**演示**](http://jsfiddle.net/jeq5W/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T18:54:09.823

使用引号：

```
div[data-demo='#does_work'] {
    color: green;
} 
```

[**演示**](http://jsfiddle.net/jeq5W/2/)

为什么一定要引用？因为`#`在 CSS 中有特殊的含义。引用它隐藏了这种特殊含义。可以使用:`"`或*`[data-demo="#does_work"]`*转义:来达到相同的效果`#``\`*`[data-demo=\#does_work]`*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T18:54:09.207

将值括在引号中`"`

```
div[data-demo="#doesnt_works"] {
    color: green;
} 
```

[http://jsfiddle.net/jeq5W/1/](http://jsfiddle.net/jeq5W/1/)

# java - 从文本文件输入到数组

> ID：15749667
> 
> 赞同：0
> 
> 时间：2013-04-01T18:52:11.287
> 
> 标签：java

输入将是一个文本文件，其中包含从 0 到 9 的任意数量的整数，没有空格。如何使用这些整数填充数组，以便以后对它们进行排序？

到目前为止，我所拥有的如下：

```
BufferedReader numInput = null;
    int[] theList;
    try {
        numInput = new BufferedReader(new FileReader(fileName));
    } catch (FileNotFoundException e) {
        System.out.println("File not found");
        e.printStackTrace();
    }
    int i = 0;
    while(numInput.ready()){
        theList[i] = numInput.read();
        i++; 
```

显然 theList 没有初始化，但我不知道长度是多少。另外，我不太确定如何做到这一点。感谢我收到的任何帮助。

为了澄清输入，它看起来像：1236654987432165498732165498756484654651321 我不知道长度，我只想要单个整数字符，而不是多个。所以0-9，而不是我之前不小心说的0-10。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:54:35.367

选择 Collection API 即 ArrayList

```
ArrayList a=new Arraylist();
while(numInput.ready()){
       a.add(numInput.read());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:56:26.130

您可以使用 a`List<Integer>`而不是 a `int[]`。使用 a `List<Integer>`，您可以根据需要添加项目，它`List`会随之增长。如果完成，您可以使用该[`toArray(int[])`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#toArray%28T%5b%5d%29)方法将 转换`List`为`int[]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:04:31.793

1\. 使用番石榴很好地将文件的第一行读入 1`String`

[读第一行](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html#readFirstLine%28java.io.File,%20java.nio.charset.Charset%29)

2\. 将该字符串转换[为 char 数组](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#toCharArray%28%29)- 因为您的所有数字都是一位数长度，所以它们实际上是`char`s

3\. 将字符转换为整数。

4\. 将它们添加到列表中。

```
public static void main(String[] args) {

    String s = "1236654987432165498732165498756484654651321";
    char[] charArray = s.toCharArray();
    List<Integer> numbers = new ArrayList<Integer>(charArray.length);
    for (char c : charArray) {
        Integer integer = Integer.parseInt(String.valueOf(c));
        numbers.add(integer);
    }

    System.out.println(numbers);
} 
```

印刷：`[1, 2, 3, 6, 6, 5, 4, 9, 8, 7, 4, 3, 2, 1, 6, 5, 4, 9, 8, 7, 3, 2, 1, 6, 5, 4, 9, 8, 7, 5, 6, 4, 8, 4, 6, 5, 4, 6, 5, 1, 3, 2, 1]`

# asp.net-mvc - 使用 LINQ 计算值频率并在 MVC 视图中显示

> ID：15749670
> 
> 赞同：0
> 
> 时间：2013-04-01T18:52:22.140
> 
> 标签：asp.net-mvc, linq, entity-framework-mapping

我有一张桌子

ID|值

VALUE 一个可能值为 0 - 1 的整数字段。如何返回每个值的计数？

我正在尝试在下面的视图中返回结果 - repository(repository.paths)

```
namespace CessationPath.Controllers
{
    public class SampleController : Controller
    {
        private IPathsRepository repository;

        public SampleController(IPathsRepository repoParam) {
            repository = repoParam;
        }

        //
        // GET: /Sample/

        public ActionResult Index()
        {
            return View(repository.Paths   );
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:03:19.453

创建一个类来保存你的结果：

```
public class ViewModelData{
    public int Key{ get; set; }
    public int Count { get; set; }
} 
```

然后在你的控制器中

```
var result = repository.Paths.GroupBy(x => x.Value)
                             .Select(x => new ViewModelData{ Key = x.Key, 
                                                             Count = x.Count())
                             .ToList(); 
```

这将创建一个`IEnumerable<ViewModelData>`存储每个值的计数，同时只查询数据源一次。

然后可以使用以下方法将其传递给视图：

```
return View(result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:07:36.833

如果我理解你的问题 -

您正在尝试遍历结果以查找计数并将每个计数返回到视图 -

```
return(repository.Paths.Where(p => p.VALUE == 0).Count()); 
```

或者

```
return(repository.Paths.Where(p => p.VALUE == 1).Count()); 
```

如果您尝试返回每个列表 -

```
return(repository.Paths.Where(p => p.VALUE == 0).ToList()); 
```

或者

```
return(repository.Paths.Where(p => p.VALUE == 1).ToList()); 
```

# jquery - Struts Jquery Ajax Success 未被调用

> ID：15749678
> 
> 赞同：0
> 
> 时间：2013-04-01T18:52:32.993
> 
> 标签：jquery, ajax, struts

我的阿贾克斯电话：

```
$.ajax({
      type: "POST",
      url: "DataDictionaryAjax.do",
      dataType: "xml",
      async: false,
    success:function(data){
      var form = data;
    }
}); 
```

我的回应是 xml

```
Content-Type:xml;charset=UTF-8
Date:Mon, 01 Apr 2013 18:45:29 GMT
Server:Apache-Coyote/1.1
Transfer-Encoding:chunked 
```

xml 很长，但我已经确认它格式正确。

```
servletResponse.setContentType("xml");
        String xml = "<?xml version='1.0' encoding='UTF-8'?>" + Formdata;
        servletResponse.getWriter().print(xml);
        return null;
    } 
```

我的 ajax 成功并没有被解雇。

# r - 如何计算 R 中线性预测模型中的预测系数？

> ID：15749681
> 
> 赞同：0
> 
> 时间：2013-04-01T18:52:43.860
> 
> 标签：r

我对 R 很陌生，我有以下问题：

我有一个时间序列/信号，我想建立[线性预测模型](http://en.wikipedia.org/wiki/Linear_prediction)。看起来像 Matlab [lpc](http://www.mathworks.com/help/signal/ref/lpc.html)这样的东西会很棒，但我在 R 中找不到相应的函数。我应该使用哪个包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:15:32.520

您尝试进行的分析可以使用[时间序列任务视图](http://cran.r-project.org/web/views/TimeSeries.html)中的包来完成。很可能您需要某种自回归模型 (AR)，为此我参考了`Forecasting and Univariate Modeling`该任务视图的部分。您提到的线性过滤方法可能在类似的包中实现`robfilter`，更多信息可以在`Decomposition and Filtering`任务视图部分找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T19:20:00.213

您似乎在谈论自回归 (AR) 模型 - Yule-Walker 方程似乎是您所链接的核心。在这种情况下，`ar`基本 R 安装中的功能可能就足够了，或者对于更复杂的型号`arima`，基本安装中的功能也可以。

您还应该查看 CRAN 上的[时间序列任务视图](http://cran.r-project.org/web/views/TimeSeries.html)，以获取有关合适软件包的更多信息，我建议您查阅它以获取更多选项。

# c++ - winapi c++ HICON

> ID：15749682
> 
> 赞同：0
> 
> 时间：2013-04-01T18:52:44.293
> 
> 标签：c++, winapi, icons

我使用 minGW 和 eclipse。我以这种方式制作了 HICON：

```
case WM_CREATE:
{
...
hIcon = (HICON)LoadImage(NULL, "icon.ico", IMAGE_ICON, 32, 32, LR_LOADFROMFILE);
if(hIcon) { SendMessage(hwnd, WM_SETICON, ICON_BIG, (LPARAM)hIcon); }
else { MessageBoxW(hwnd, "ico not found", "ico not found", MB_OK | MB_ICONERROR); }
...
} 
```

因此，.ico 必须与 .exe 位于同一文件夹中。如何将这个 .ico 构建到 exe 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:55:10.113

使用 .rc 文件将 .ico 文件添加到可执行文件的资源中。然后在调用时`LoadImage()`，去掉`LR_LOADFROMFILE`标志并在`lpszName`参数中指定资源的 ID 而不是文件名。例如：

```
MY_ICON ICON "icon.ico" 
```

.

```
case WM_CREATE:
{
...
hIcon = (HICON) LoadImage(GetModuleHandle(NULL), "MY_ICON", IMAGE_ICON, 32, 32, 0);
...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T18:54:49.810

您可以使用资源文件。

有关更多信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/zabda143 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/zabda143(v=vs.71).aspx)

# c# - 在图片框中移动图片时如何减少内存消耗？

> ID：15749683
> 
> 赞同：2
> 
> 时间：2013-04-01T17:02:58.867
> 
> 标签：c#, memory, winforms

我正在尝试以这种方式制作“googlemaps 效果”：我有一张巨大的图片，所以我从中剪出了一张相当大的图片（2000x2000）。让我们称之为cachedImage。现在我希望能够在图片框中拖动和移动这张图片。我通过更改 cachedImage 中的左上点 (TLPoint) 的位置，然后使用给定的 TLPoint 将矩形区域缓存到图片框区域中来实现。因此，每次图片移动时，我都会调用 DrawSelection() 方法，并在参数中使用 TopLeft Point 的新位置。然后程序由于大内存占用而崩溃（第 282 行的 clone() 函数崩溃）。你能帮我解决这个问题吗？

该文件的代码在这里[https://github.com/novellizator/path-planner/blob/master/TomyMaps/TomyMaps/Map.cs](https://github.com/novellizator/path-planner/blob/master/TomyMaps/TomyMaps/Map.cs)

您能否帮助如何使其更有效地记忆？我应该用什么替换 Bitmap.clone() 函数？

# ruby - 任何数组更新函数，将在指定索引处更新后返回整个修改后的数组？

> ID：15749686
> 
> 赞同：0
> 
> 时间：2013-04-01T18:52:55.343
> 
> 标签：ruby

我需要一个帮助。

```
[1,2][-1] = 44
#=> 44 
```

上面的很好。但我正在寻找一个直接函数，它将对任何数组的指定索引进行此类更新，并将返回整个修改后的数组。是否可以？那里有任何内置功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:57:02.767

您可以使用以下方法返回原始对象`tap`：

```
[1,2].tap { |array| array[-1] = 44 }
=> [1,44] 
```

但是，如果您要走那么远，则可能有更漂亮的方法可以做到这一点。例如

```
class Array
  def set_item index, value
    self[index] = value
    self
  end
end

[1,2].set_item( -1, 44 )
=> [1,44] 
```

# c# - 将硬盘驱动器上的 NuGet 包（不在任何地方托管）添加到项目中

> ID：15749692
> 
> 赞同：5
> 
> 时间：2013-04-01T18:53:12.043
> 
> 标签：c#, nuget, nuget-package, nugetgallery

我的任务是生成一个包含静态内容和二进制文件的项目的 NuGet 包。然后可以在另一个项目/解决方案中使用此 NuGet 包的方式。

我已经完成了任务的前半部分，我能够从项目中生成 NuGet 包，但不确定如何在另一个项目/解决方案中使用它。我只看到从 NuGet 存储库添加已发布项目的选项，但没有看到文件系统/硬盘驱动器上的任何内容。

任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T18:55:11.963

您需要将包含包的目录添加为 NuGet 包源。在 Visual Studio 中执行以下操作

*   工具 -> 选项
*   包管理器 -> 包源
*   添加文件系统位置并点击“更新”

在此之后，本地包应该出现在包库管理器中

如果您要更改 NuGet.exe 命令行，请创建 Nuget.exe.config 文件并添加以下内容

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <packageSources>
    <add key="LocalName" value="path/to/your/package" />
  </packageSources> 
</configuration> 
```

# c# - 当 IDENTITY_INSERT 设置为 OFF 时，无法在表“Reservation_Contacts”中插入标识列的显式值

> ID：15749694
> 
> 赞同：0
> 
> 时间：2013-04-01T18:53:18.453
> 
> 标签：c#, sql-server, entity-framework, linq-to-sql

我在预订和联系人之间存在多对多关系，当我尝试将新联系人添加到预订时，会发生以下错误。

```
 _db.Reservations.Add(reservation);
    reservation.Contacts.Add(user.Contact);
    _db.SaveChanges(); 
```

我认为我的表定义存在一些问题，所以我复制了我的表的粘贴创建脚本。我在reservaion_contact 表中同时设置了reservaionId 和contactId 主键。这是错的吗？我的表结构：

```
CREATE TABLE [dbo].[Reservation_Contacts](
    [Reservation_Id] [int] NOT NULL,
    [Contact_Id] [int] IDENTITY(1,1) NOT NULL,
 CONSTRAINT [PK_Reservation_Contacts] PRIMARY KEY CLUSTERED 
(
    [Reservation_Id] ASC,
    [Contact_Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[Reservation_Contacts]  WITH CHECK ADD  CONSTRAINT [FK_Reservation_Contacts_Contact] FOREIGN KEY([Contact_Id])
REFERENCES [dbo].[Contact] ([Id])
GO

ALTER TABLE [dbo].[Reservation_Contacts] CHECK CONSTRAINT [FK_Reservation_Contacts_Contact]
GO

ALTER TABLE [dbo].[Reservation_Contacts]  WITH CHECK ADD  CONSTRAINT [FK_Reservation_Contacts_Reservation] FOREIGN KEY([Reservation_Id])
REFERENCES [dbo].[Reservation] ([Id])
GO

ALTER TABLE [dbo].[Reservation_Contacts] CHECK CONSTRAINT [FK_Reservation_Contacts_Reservation]
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:07:50.860

不要在您的插入中发送contact_id，它是一个身份，它将自动生成。

# css - 带有背景图像的维恩图，添加链接？

> ID：15749696
> 
> 赞同：0
> 
> 时间：2013-04-01T18:53:21.103
> 
> 标签：css, hyperlink, hover, background-image, css-selectors

已创建此维恩图以用作一种导航区域。

[http://i.stack.imgur.com/xlyCJ.png](http://i.stack.imgur.com/xlyCJ.png)

当用户将鼠标悬停在每个圆圈上时，图像会发生变化（相同的图像，减去绿色叠加层和文本）。我想让每个圈子都可以点击，每个圈子都链接到网站中的相应页面。

无法弄清楚如何。

这是我用来创建它的 HTML 和 CSS。

HTML：

```
<div class="buttons">
<div><a class="buttons" href="fashion_design.html"></a></div>`
<div><a href="costume_design.html"> </a></div>
<div><a href="photography.html"></a></div>
<div><a href="artwork.html"></a></div>
</div><!--buttons--> 
```

CSS: .buttons div { 宽度: 390px; 高度：390px；边框半径：200px；-moz-边界半径：200px；-webkit-border-radius:200px; -khtml-border-radius:200px; 向左飘浮; 不透明度：.9；显示：块；}

```
.buttons div:hover {
background-position:0px 400px;
z-index:5;
position:relative; 
```

}

```
.buttons div:nth-child(1) {
background-image:url(images/fashion_hover.png);
color: #FFF;
margin-top:60px;
z-index:1; 
```

}

```
.buttons div:nth-child(2){
background-image:url(images/costume_double.png);
color: #FFF;
margin-left:-60px;
margin-top:60px;
z-index:2; 
```

}

```
.buttons div:nth-child(3){
background-image:url(images/photography_hover.png);
color: #FFF;
margin-top:-60px;
z-index:3; 
```

}

```
.buttons div:nth-child(4){
background-image:url(images/artwork_hover.png);
color: #FFF;
margin-left: -60px;
margin-top:-60px;
z-index:4; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:10:01.730

它不起作用，因为锚中没有文本，因此实际上没有显示锚。你可以使用jquery：

```
$(".buttons div").click(function(){
     window.location=$(this).find("a").attr("href"); 
     return false;
}); 
```

或者，只需在每个 div 上使用 javascript：

```
<div onClick="window.open('http://yahoo.com');"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:15:42.073

更改您的 CSS，使其针对锚标记而不仅仅是 div

例如

```
.buttons div{} should be .buttons div a{} 
```

看[小提琴](http://jsfiddle.net/anpsmn/3d5Cp/)

# android - 如何不使用 XML 文件而是使用 Java 将 Header 和 Preference 对象添加到 PreferenceActivity？

> ID：15749698
> 
> 赞同：7
> 
> 时间：2013-04-01T18:53:33.853
> 
> 标签：android, android-fragments, android-preferences

我有 PreferenceFragment 和一个 PreferenceActivity ，我以这种方式从 XML 文件中添加标头：

**偏好活动**

```
@Override
public void onBuildHeaders(List<Header> target) {  
    if(DEBUG) Log.i("PreferenceActivity", "onBuildHeaders() -> LogicAnalizerPrefs");
    if(android.os.Build.VERSION.SDK_INT >= 12) {
        loadHeadersFromResource(R.xml.preference_header_logicanalizer, target);
    }
} 
```

**偏好片段：**

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if(DEBUG) Log.i("PreferenceFragment", "onCreate() -> LogicAnalizerPrefsFragment");
        int res = getActivity().getResources().getIdentifier(getArguments().getString("logicprefsheaders"), "xml", getActivity().getPackageName());
        addPreferencesFromResource(res);
    } 
```

我拥有标题的 XML 文件是：

**R.xml.preference_header_logicanalizer：**

```
<header
        android:fragment="com.protocolanalyzer.andres.LogicAnalizerPrefsFragment"
        android:icon="@drawable/settings"
        android:title="General" >
        <extra
            android:name="logicprefsheaders"
            android:value="logicgeneral" />
    </header>
    <header
        android:fragment="com.protocolanalyzer.andres.LogicAnalizerPrefsFragment"
        android:icon="@drawable/settings"
        android:title="Canal 1" >
        <extra
            android:name="logicprefsheaders"
            android:value="c1analizerprefs" />
    </header>
    <header
        android:fragment="com.protocolanalyzer.andres.LogicAnalizerPrefsFragment"
        android:icon="@drawable/settings"
        android:title="Canal 2" >
        <extra
            android:name="logicprefsheaders"
            android:value="c2analizerprefs" />
    </header>
    <header
        android:fragment="com.protocolanalyzer.andres.LogicAnalizerPrefsFragment"
        android:icon="@drawable/settings"
        android:title="Canal 3" >
        <extra
            android:name="logicprefsheaders"
            android:value="c3analizerprefs" />
    </header>
    <header
        android:fragment="com.protocolanalyzer.andres.LogicAnalizerPrefsFragment"
        android:icon="@drawable/settings"
        android:title="Canal 4" >
        <extra
            android:name="logicprefsheaders"
            android:value="c4analizerprefs" />
    </header> 
```

这是我的 xml 文件之一，用于在单击 Header 时显示首选项之一：

**c1analizerprefs.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceCategory android:title="@string/AnalyzerProtocolTitle1" >
        <ListPreference
            android:defaultValue="0"
            android:entries="@array/protocolList"
            android:entryValues="@array/protocolValues"
            android:key="protocol1"
            android:summary="@string/AnalyzerProtocolSummary"
            android:title="@string/AnalyzerProtocolTitle1" />
        <ListPreference
            android:defaultValue="1"
            android:entries="@array/channelNames"
            android:entryValues="@array/protocolValues"
            android:key="SCL1"
            android:summary="@string/AnalyzerSCLSummary"
            android:title="@string/AnalyzerSCLTitle" />

        <EditTextPreference
            android:defaultValue="9600"
            android:title="@string/AnalyzerBaudTitle"
            android:key="BaudRate1"
            android:summary="@string/AnalyzerBaudSummary"
            android:inputType="number" />
    </PreferenceCategory>

</PreferenceScreen> 
```

所以在一个大屏幕上，我得到[了](http://stuff.mit.edu/afs/sipb/project/android/docs/images/ui/settings/settings-headers-tablet.png "这")预期的结果，我只使用一个 PreferenceFragment 来添加我的 4 个标题。

但是我在 XML 中定义的四个首选项（如 c1analizerprefs.xml）几乎相同，唯一的变化是一个数字（例如：Pref.1、Pref.2、...）所以我想在 Java 中添加它们以便我可以使用a for() 添加 4 个或更多首选项 轻松更改重复次数，因为文本始终相同 我只更改一个数字，所以这样我不需要为每个首选项创建一个 XML 文件，我动态创建它们在爪哇。

如何在 Java 中添加首选项而不是使用 XML 文件？在 PreferenceFragment 中，我只有 addPreferencesFromResource() 或 addPreferencesFromIntent()。有什么方法可以添加首选项对象吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-15T15:37:05.493

以防万一有人真的在寻找一些代码......

以下示例从 XML 加载一些标头，然后以编程方式附加到它们。

第一次覆盖*onBuildHeaders*内的**PreferenceActivity**：

```
@Override
public void onBuildHeaders(List<Header> target) {
    loadHeadersFromResource(R.xml.preference_headers, target);

    // Add layer as a new settings header
    Header header = new Header();
    header.title = "More Settings";
    header.summary = "Change even more settings";
    header.fragment = SettingsFragment.class.getName();

    Bundle b = new Bundle();
    b.putString("category", "MoreSettings");
    header.fragmentArguments = b;
    target.add(header);
} 
```

然后在**PreferenceActivity**中覆盖*onHeaderClick*。请注意，您将标头的 fragmentArguments 传递给片段，以便您可以检测单击了哪个标头（类别）：

 **```
@Override
public void onHeaderClick(Header header, int position) {    
    this.startPreferencePanel(SettingsFragment.class.getName(), header.fragmentArguments, header.titleRes, header.title, null, 0);
} 
```

然后在您的**PreferenceFragment**覆盖*onCreate*：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (savedInstanceState == null) {
        mCategory = getArguments().getString("category");
    }
    else {
        // Orientation Change
        mCategory = savedInstanceState.getString("category");
    }

    if (mCategory.equals("Map")) {
        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.preferences_map);
    }
    if (mCategory.equals("MoreSettings")) {
        // Load the preferences from an XML resource
        PreferenceScreen preferenceScreen = getPreferenceManager().createPreferenceScreen(getActivity());
        // add prefrences using preferenceScreen.addPreference()
        this.setPreferenceScreen(preferenceScreen);
    }
} 
```

如果您想查看预定义标头的 xml。

*res/xml/preference_headers.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android">
    <header 
        android:fragment="com.appName.fragments.SettingsFragment"
        android:title="@string/pref_category_map_title"
        android:summary="@string/pref_category_map_sum" >
        <!-- key/value pairs can be included as arguments for the fragment. -->
        <extra android:name="category" android:value="Map" />
    </header>
</preference-headers> 
```

*res/xml/preferences_map.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <CheckBoxPreference
        android:key="pref_zoomToCurrentLocationOnStart"
        android:title="@string/pref_zoomToCurrentLocationOnStart_title"
        android:summary="@string/pref_zoomToCurrentLocationOnStart_sum"
        android:defaultValue="true" />
    <CheckBoxPreference
        android:key="pref_myLocation"
        android:title="@string/pref_myLocation_title"
        android:summary="@string/pref_myLocation_sum"
        android:defaultValue="true" />
</PreferenceScreen> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T13:42:29.047

动态添加标题并不容易。正如android文档所述：

> Blockquote 典型的实现将使用 loadHeadersFromResource(int, List) 从资源中填充列表。

如果您仍想使用动态解决方案，您可能需要查看 loadHeadersFromResource 的源代码（例如，此处为[http://grepcode.com/file/repository.grepcode.com/java/ext/com .google.android/android/4.0.1_r1/android/preference/PreferenceActivity.java#PreferenceActivity.loadHeadersFromResource(int%2Cjava.util.List)](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/preference/PreferenceActivity.java#PreferenceActivity.loadHeadersFromResource(int%2Cjava.util.List)) )

总结一下，

1.  你需要创建一个 PreferenceActivity.Header 对象，

2.  通过设置可以在文档中找到的各种属性来准备使用：http: [//developer.android.com/reference/android/preference/PreferenceActivity.Header.html](http://developer.android.com/reference/android/preference/PreferenceActivity.Header.html)，

3.  最后将创建的标头添加到列表中：（`target.add(header);`目标是传递给 onBuildHeaders 的参数）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T03:10:52.673

希望我没有误解你的问题：

```
getPreferenceScreen().addPreference( preference ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-20T05:20:34.690

@goodies4uall 的好回答

我只会添加（因为我还不能编辑帖子）你不需要在 onHeaderClick() 中做任何花哨的事情。

如果您希望在 onBuildHeaders() 之外添加标头，最好的方法是使它们无效并允许 onBuildHeaders() 在下次触发时添加新标头（invalidateHeaders 将导致 onBuildHeaders 再次触发），如下所示：

```
private boolean flagToAddMyNewHeader = false;

public void someEventFiredThatRequiresANewHeader() {
    flagToAddMyNewHeader = true;
    invalidateHeaders();
} 
```

然后你的 onBuildHeaders：

```
@Override
public void onBuildHeaders(List<Header> target) {
    loadHeadersFromResource(R.xml.preference_headers, target);

    if (flagToAddMyNewHeader) {
        flagToAddMyNewHeader = false;

        Header header = new Header();
        header.titleRes = R.string.my_new_header_title;
        header.iconRes = R.drawable.my_new_header_icon;
        header.fragment = MyNewHeaderFragment.class.getName();

        Bundle b = new Bundle();
        b.putString("category", "MyNewHeader");
        header.fragmentArguments = b;

        // inserts my new header as the 2nd entry
        target.add(1, header);
    }
} 
```**

# objective-c - sqlite3 使用 NSMutableArray 选择

> ID：15749699
> 
> 赞同：0
> 
> 时间：2013-04-01T18:53:38.497
> 
> 标签：objective-c, sqlite

我想使用 SQLite3 在 iOS XCode 中进行选择，如下所示：

```
//arraycat is the array from which the data comes...multiple selections of a tableview

pros = [arraycat componentsJoinedByString:@","];

const char *sqlselect = "SELECT DISTINCT zuser.zid, zuser.zplz,zuser.zort,zuser.zhofname,zuser.zstrassenr,zuser.zlatitude,zuser.zlongitude FROM zuser,zangebot,zkategorie WHERE zkategorie.zprodukt IN(?) and zangebot.zprodukte=1 and zkategorie.zuser_id=zuser.zid and zangebot.zuser_id=zuser.zid and zkategorie.zdelete_r=0 and zangebot.zdelete_r=0";

if (sqlite3_prepare_v2(database, sqlselect, -1, &selectStmt, NULL) != SQLITE_OK) {
    NSAssert1(0,@"Failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
    NSLog(@"abfrage select produkt hat nicht geklappt");
}

//here has to be the problem... 
sqlite3_bind_text(selectStmt, 1, [pros UTF8String], -1, SQLITE_STATIC); 
```

如果我只在 tableview 上选择一个类别，那么它可以工作，但如果我选择多个并将它们发送到这个语句，那么它就不起作用。为什么这个？`IN(?)`当我在 SQL Query中手动编写类别时，`('Vegetable','fruits')`它也可以工作......为什么不使用该`componentsJoinedByString`方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:16:05.037

[*在 SQL 中，参数是单个*](http://www.sqlite.org/lang_expr.html#varparam)[值](http://www.sqlite.org/lang_expr.html#varparam)的占位[符](http://www.sqlite.org/lang_expr.html#varparam)*。当您将字符串绑定到参数时，该参数的值就是字符串的内容，而不管这些内容是什么。换句话说，您的查询可能等同于*

 *```
SELECT ... WHERE produkt IN ('Vegetable,fruits') 
```

如果要与多个字符串进行比较，则必须创建具有多个参数的查询：

```
SELECT ... WHERE produkt IN (?,?) 
```

并分别绑定它们：

```
sqlite3_bind_text(selectStmt, 1, "Vegetable", -1, SQLITE_STATIC);
sqlite3_bind_text(selectStmt, 2, "fruits", -1, SQLITE_STATIC); 
```*

# regex - 如何在 web.config 文件中重写规则

> ID：15749700
> 
> 赞同：0
> 
> 时间：2013-04-01T18:53:43.230
> 
> 标签：regex, url, web-config

需要一个帮助。我们在 web.config 文件中有一个这样重写的规则。

```
<DomainRedirectRule>      
        <LookFor>http://(www.)?sitename.com(/)?(default.aspx)?</LookFor>
        <SendTo>http://www.sitename.com/test</SendTo>
      </DomainRedirectRule> 
```

现在的新要求是当有人输入[http://sitename.com/asdf](http://sitename.com/asdf)时，它应该转到目标 url 而不是返回 404 页面。

有人可以建议我应该如何重写上述规则以实现这一点。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:07:30.687

您可以`http://(www.)?sitename.com(/|default.aspx)?$`在 LookFor 规则中尝试使用。我的猜测是，使用该`$`符号，它只会匹配以您要表达的内容结尾的地址。

# sockets - Windows 套接字 htons(80) 与 0x5000

> ID：15749703
> 
> 赞同：0
> 
> 时间：2013-04-01T18:54:06.157
> 
> 标签：sockets, network-programming, port, htonl

当我将端口写入 SOCKADDR_IN 结构时，我可以使用 0x5000 代替 htons(80) 吗？

（为什么是 0x5000？——我调试了 htons(80)，它返回 0x5000）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:02:11.883

你可以，但它不会是便携式的。`htons`存在让您不必担心计算机和网络中的字节顺序（并且它们在各种系统上可能不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:51:48.317

你可以，但你为什么要这样做？便携有什么问题？并清楚？和其他写过这段代码的人一样吗？

# python - 导入资源文件

> ID：15749707
> 
> 赞同：2
> 
> 时间：2013-04-01T18:54:10.553
> 
> 标签：python, resources, pyqt

我在删除 pyqt 文档中的资源文件时遇到问题，我也在使用 monkeystudio IDE。我制作了一个带有图像的程序，并且全部链接到一个名为“resources.qyc”的资源文件，现在我得到了错误

```
Traceback (most recent call last):
  File "main.py", line 9, in <module>
    from Login import Login
  File "J:\Newone\Login.py", line 3, in <module>
    import mainwindow
  File "J:\Newone\mainwindow.py", line 2, in <module>
    import Addcadet
  File "J:\Newone\Addcadet.py", line 6, in <module>
    ( Ui_Addcadet, QDialog ) = uic.loadUiType( 'Addcadet.ui' )
  File "C:\Python32\lib\site-packages\PyQt4\uic\__init__.py", line 203, in loadUiType
    exec(code_string.getvalue(), ui_globals)
  File "<string>", line 179, in <module>
ImportError: No module named resources_rc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:12:14.753

您首先必须使用[`pyrcc4`](http://pyqt.sourceforge.net/Docs/PyQt4/resources.html). 你将从命令行运行这样的东西：

```
pyrcc4 ResourceFile.qrc -o ui_ResourceFile.py 
```

# objective-c - 如何使用 UIPopOver 将文本输入到 UITextField？

> ID：15749709
> 
> 赞同：1
> 
> 时间：2013-04-01T18:54:20.183
> 
> 标签：objective-c, delegates, uitextfield, uipopovercontroller

我想了解如何让 UITextField 从 UIPopover 视图中获取文本。假设我的弹出框上有带有数字的按钮，我希望将这些数字输入到文本字段中。

有些人向我们建议 BOOL 是这样的：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *) textField {
  [self.myPopover presentPopoverFromRect:textField.frame 
        inView:self.view 
        permittedArrowDirections:UIPopoverArrowDirectionAny
        animated:YES];
  return NO;
} 
```

还有一个：

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView {
  if(popoverController == nil){   //make sure popover isn't displayed more than once in the view
    popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverDetailContent]; 
  }
  [popoverController presentPopoverFromRect:textView.frame 
        inView:self.view 
        permittedArrowDirections:UIPopoverArrowDirectionAny
        animated:YES];
  popoverController.delegate = self;
  return NO; // tells the textfield not to start its own editing process (ie show the keyboard)
} 
```

两者都没有太大变化，我的 textField 仍然调用默认的 iPad 键盘而不是我的弹出框。第二个示例使用委托 popoverController 而我的控制器是`flipsidePopoverController`.

我可以使用这样的 IBAction 吗？

```
- (IBAction)togglePopover:(id)sender {
  if (self.flipsidePopoverController) {
    [self.flipsidePopoverController dismissPopoverAnimated:YES];
    self.flipsidePopoverController = nil;
  } else {
    [self performSegueWithIdentifier:@"showAlternate" sender:sender];
  }
} 
```

# c# - 加载和使用 Web Cookie

> ID：15749710
> 
> 赞同：0
> 
> 时间：2013-04-01T18:54:20.997
> 
> 标签：c#, .net, http, cookies, web

我正在用 C# 编写一个小型网络爬虫。它将使用 HttpWebRequest 获取 HTML 文件，找到所需的数据，然后将其报告给调用者。

所需数据仅在用户登录时可用。由于我不熟悉以编程方式与 http、Javascript 等进行交互，因此我不会尝试以编程方式登录。用户必须登录网站，我的程序将获取存储的 cookie，并将其加载到 CookieContainer 中以进行 http 请求。

我已经做了足够的研究，知道数据属于 CookieContainer（我认为），但我似乎无法在任何地方找到如何找到由 IE（或 firefox，或 chrome 等）创建的 cookie 的示例，以编程方式加载它，填充 CookieContainer，并使用 http get 请求发送它。那么如何做到这一切呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:48:06.383

恐怕你做不到。主要原因是安全。由于使用 cookie 来识别用户，浏览器无法提供对 cookie 的轻松访问。否则真的很容易让它们静止。

您应该更好地学习如何使用`HttpWebRequest`或任何其他类似的类登录用户。

# android - 无法加载的 android 虚拟设备。单击“详细信息”以查看错误

> ID：15749711
> 
> 赞同：4
> 
> 时间：2013-04-01T18:54:25.683
> 
> 标签：android, eclipse

我刚刚在 Eclipse 中安装了 Android 插件。创建了一个在 Android 4.0 API 级别 14 (Nexus S) 上运行的新虚拟设备，但它不会模拟。我在一篇文章中读到我可以将 android 文件夹移动到另一个位置，所以我这样做了，但无济于事，它仍然不会模拟 android 窗口将启动，并且“ANDROID”文本将加载数天，但没有任何更远。（我通常只是阅读但从未发布过，所以请原谅我的格式）检查控制台这是可用的文本：

```
 [2013-04-01 20:35:42 - Android Test] ------------------------------
   [2013-04-01 20:35:42 - Android Test] Android Launch!
   [2013-04-01 20:35:42 - Android Test] adb is running normally.
   [2013-04-01 20:35:42 - Android Test] Performing com.theprogrammer.android.test.MainActivityMainActivity activity launch
   [2013-04-01 20:35:43 - Android Test] Automatic Target Mode: launching new emulator with compatible AVD 'Phone_IceCreamSandwich'
   [2013-04-01 20:35:43 - Android Test] Launching a new emulator with Virtual Device 'Phone_IceCreamSandwich'
   [2013-04-01 20:35:55 - Android Test] New emulator found: emulator-5554
   [2013-04-01 20:35:55 - Android Test] Waiting for HOME ('android.process.acore') to be launched...
   [2013-04-01 20:37:12 - Android Test] HOME is up on device 'emulator-5554'
   [2013-04-01 20:37:12 - Android Test] Uploading Android Test.apk onto device 'emulator-5554'
   [2013-04-01 20:37:12 - Android Test] Installing Android Test.apk...
   [2013-04-01 20:38:13 - Android Test] Success!
   [2013-04-01 20:38:13 - Android Test] Failed to install Android Test.apk on device 'emulator-5554': device not found
   [2013-04-01 20:38:13 - Android Test] com.android.ddmlib.InstallException: device not found
   [2013-04-01 20:38:13 - Android Test] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:41:37.233

在这种情况下，您可以执行以下操作：

*   重新安装 ADT Android Eclipse 工具
*   清理项目
*   在eclipse中尝试手动启动模式

另外，我发现这些答案可能对您有所帮助：

*   [问题 1](https://stackoverflow.com/questions/8267354/install-exception-device-not-found-android)
*   [问题2](https://stackoverflow.com/questions/7927102/apk-fails-to-install-on-android-4-0-emulator)

看看，看看有没有帮助。Android有时很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T14:22:36.040

我发现耐心是一种美德，因为模拟器需要时间来启动，但它最终会启动，只需记下你给它的 RAM 大小，因为它实际上会从你的物理内存中获取它。

**编辑**
我建议使用 Genymotion，因为自从这个错误以来我一直在使用它，它对我来说效果很好。迁移到另一台 PC 也很简单，因为您只需移动虚拟设备。

# android - Android 应用程序运行但没有在画布上绘制

> ID：15749714
> 
> 赞同：0
> 
> 时间：2013-04-01T18:54:32.493
> 
> 标签：android, eclipse, android-canvas

我写了一个来自 Android 应用程序教程书的 Compass 示例，并编写了自定义视图、方法等，但是当应用程序运行时，屏幕上没有绘制任何内容。

这是课程：

```
package com.example.compass;

import android.view.View;
import android.content.Context;
import android.content.res.Resources;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.view.accessibility.AccessibilityEvent;

public class CompassView extends View {

private float bearing;
private Paint markerPaint;
private Paint textPaint;
private Paint circlePaint;
private String northString;
private String eastString;
private String southString;
private String westString;
private int textHeight;

public CompassView(Context context) {
    super(context);
    initCompassView();
}

public CompassView(Context context, AttributeSet attrs) {
    super(context, attrs);
    initCompassView();
}

public CompassView(Context context, AttributeSet ats, int defaultStyle) {
    super(context, ats, defaultStyle);
    initCompassView();
}

protected void initCompassView() {
    setFocusable(true);

    Resources r = this.getResources();

    circlePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
    circlePaint.setColor(r.getColor(R.color.background_color));
    circlePaint.setStrokeWidth(1);
    circlePaint.setStyle(Paint.Style.FILL_AND_STROKE);

    northString = r.getString(R.string.cardinal_north);
    eastString = r.getString(R.string.cardinal_east);
    southString = r.getString(R.string.cardinal_south);
    westString = r.getString(R.string.cardinal_west);

    textPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
    textPaint.setColor(r.getColor(R.color.text_color));
    textHeight = (int)textPaint.measureText("yY");

    markerPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
    markerPaint.setColor(r.getColor(R.color.marker_color));
}

@Override
protected void onDraw(Canvas canvas) {
    int mMeasuredWidth = getMeasuredWidth();
    int mMeasuredHeight = getMeasuredHeight();

    int px = mMeasuredWidth/2;
    int py = mMeasuredHeight/2;

    int radius = Math.min(px, py);

    canvas.drawCircle(px, py, radius, circlePaint);

    canvas.save();
    canvas.rotate(-bearing, px, py);

    int textWidth = (int) textPaint.measureText("W");
    int cardinalX = px-textWidth/2;
    int cardinalY = py-radius+textHeight;

    for (int i = 0; i < 24; i++) {
        canvas.drawLine(px, py-radius, px, py-radius+10, markerPaint);
        canvas.save();
        canvas.translate(0, textWidth);

        if (i%6 == 0) {
            String dirString = "";
            switch (i) {
            case(0):{
                dirString = northString;
                int arrowY = 2*textHeight;
                canvas.drawLine(px, arrowY, px-5, 3*textHeight, markerPaint);
                canvas.drawLine(px, arrowY, px+5, 3*textHeight, markerPaint);
                break;
                }
                case(6): dirString = eastString; break;
                case(12): dirString = southString; break;
                case(18): dirString = westString; break;
            }
            canvas.drawText(dirString, cardinalX, cardinalY, textPaint);
        }

        else if (i%3==0) {
            String angle = String.valueOf(i*15);
            float angleTextWidth = textPaint.measureText(angle);

            int angleTextX = (int)(px-angleTextWidth/2);
            int angleTextY = py-radius+textHeight;
            canvas.drawText(angle, angleTextX, angleTextY, textPaint);
        }
        canvas.restore();
        canvas.rotate(15, px, py);
    }
    canvas.restore();
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int measuredWidth = measure(widthMeasureSpec);
    int measuredHeight = measure(heightMeasureSpec);

    int d = Math.min(measuredWidth, measuredHeight);

    setMeasuredDimension(d, d);
}

private int measure(int measureSpec) {
    int result = 0;

    int specMode = MeasureSpec.getMode(measureSpec);
    int specSize = MeasureSpec.getMode(measureSpec);

    if (specMode == MeasureSpec.UNSPECIFIED) {
        result = 200;
    } 
    else {
        result = specSize;
    }

    return result;
}

public void setBearing(float _bearing) {
    bearing = _bearing;
    sendAccessibilityEvent(AccessibilityEvent.TYPE_VIEW_TEXT_CHANGED);
}

public float getBearing() {
    return bearing;
}

@SuppressWarnings("deprecation")
@Override
public boolean dispatchPopulateAccessibilityEvent(final AccessibilityEvent event) {
    super.dispatchPopulateAccessibilityEvent(event);
    if (isShown()) {
        String bearingStr = String.valueOf(bearing);
        if (bearingStr.length() > AccessibilityEvent.MAX_TEXT_LENGTH)
            bearingStr = bearingStr.substring(0, AccessibilityEvent.MAX_TEXT_LENGTH);

        event.getText().add(bearingStr);
        return true;
    }
    else
        return false;
}
} 
```

我没有收到任何 logcat 错误；但是它确实显示了这个（这可能是相关的）：

```
04-01 18:41:57.163: D/gralloc_goldfish(583): Emulator without GPU emulation detected. 
```

然而，在看到这个之后，我将 GPU 仿真硬件添加到我的模拟器并选择了“是”选项，但此消息不断出现。

什么可能是什么原因没有显示在屏幕上？如果需要，我还可以发布 xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:51:57.953

找出原因：第二次调用 getMode 而不是 getSize ......我现在感觉很愚蠢。

# c - ___ 的先前声明在这里？

> ID：15749715
> 
> 赞同：2
> 
> 时间：2013-04-01T18:54:34.483
> 
> 标签：c, list

```
void delete_node(node_t *p, void *item) {

    while(p -> next != NULL && (p->next)-> item != item) {
        p = p -> next;
    }

    if (p -> next == NULL) {
        printf ("The element you are searching for is not in the list\n");  
    }

    node_t *temp;
    temp = p -> next;
    p -> next = temp -> next;
    temp -> prev = p;
    free(temp);
} 
```

我在 .c 文件中有此代码。

```
void delete_node(node_t *p, void *item); 
```

这个原型在一个 .h 文件中，我收到一个错误，上面写着“delete_node 的类型冲突”和“delete_node 的先前声明在这里”，我不知道为什么。

任何帮助，将不胜感激。谢谢！！

这是我的 node_t 结构：

```
typedef struct node {
    void *item;
    struct node *next;
    struct node *prev;
} node_t; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:00:24.657

鉴于您有一个定义，最可能导致此错误的原因是您`delete_node`在编译器遇到声明或定义之前使用了该定义。如果是这种情况，`delete_node`将假定`int`此时返回类型为 。因此，当编译器稍后看到它的实际定义/声明时`delete_node`，将产生该错误。

搜索 of 的使用`delete_node`并确保`delete_node`始终在使用之前处理 of 的定义。理想情况下，如果在多个文件中使用，这应该包含在文件的顶部`.c`或头文件中`delete_node``.h`

# html - 在画布上画一个梯形

> ID：15749717
> 
> 赞同：0
> 
> 时间：2013-04-01T18:54:36.207
> 
> 标签：html, canvas, transformation

有人可以建议如何将画布上的图像从矩形转换为梯形吗？

例如，我有一个 100x200 的图像矩形和 300x300 的画布。然后我想转换我的图像并将角放在以下点：100,0; 200,0; 0,300；300,300 并且转换应该重新调整图像大小以适应新图形。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:55:19.310

我明白了，你想做一个 y 旋转（就像星球大战滚动介绍）。

**当前画布 2d 上下文变换矩阵不可能**

二维变换矩阵如下所示，最后一个值固定为 0,0,1：

M11、M21、dx

M12、M22、dy

0, 0, 1

您需要一个如下所示的 y 旋转矩阵：

cosA, 0, 正弦A

0, 1, 0

-sinA, 0, cosA

但是你不能设置 -sinA, 0, cosA

[上一个答案]

**以下是将包含矩形的图像更改为包含梯形的图像的方法**

您必须单独绘制空中飞人的每条腿。但是您可以绘制 3 条边，然后使用 closePath() 自动绘制第 4 条边。

此代码在矩形和梯形之间进行动画处理并缩放剪裁的图像。此代码假定您希望图像以保持缩放图像尽可能大的方式呈现。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/7T2YQ/](http://jsfiddle.net/m1erickson/7T2YQ/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; padding:20px;}
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");
        ctx.lineWidth=5;

        window.requestAnimFrame = (function(callback) {
          return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
          function(callback) {
            window.setTimeout(callback, 1000 / 60);
          };
        })();

        var left=1.0;
        var right=300;
        var sizing=.25;

        var img=new Image();
        img.onload=function(){
          animate();
        }
        img.src="http://dl.dropbox.com/u/139992952/stackoverflow/KoolAidMan.png";

        function animate() {

          // update scaling factors
          left+=sizing;
          right-=sizing;
          if(left<0 || left>100){sizing = -sizing;}
          console.log(left+"/"+right);

          // clear and save the context
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.save();

          // draw the clipping trapezoid
          defineTrapezoid(left,right);
          ctx.clip();

          // draw trapezoid border
          defineTrapezoid(left,right);
          ctx.stroke();

          // draw image clipped in trapeze
          var imgX=left/2;
          var imgY=left;
          var w=300-left;
          ctx.drawImage(img,0,0,img.width,img.height,imgX,imgY,w,w);

          ctx.restore();

          // request new frame
          requestAnimFrame(function() {
            animate();
          });
        }
        animate();

        function defineTrapezoid(left,right){
            ctx.beginPath();
            ctx.moveTo(left,0);
            ctx.lineTo(right,0);
            ctx.lineTo(300,300);
            ctx.lineTo(0,300);
            ctx.closePath();
        }        

    }); // end $(function(){});
</script>

</head>

<body>

<canvas id="canvas" width=300 height=300></canvas>

</body>
</html> 
```

# python - 缓存 Python 脚本返回的 mysql 查询

> ID：15749719
> 
> 赞同：4
> 
> 时间：2013-04-01T18:54:44.117
> 
> 标签：python, mysql, performance, caching

我有这个 python '2.6.4' 脚本：

```
#!/usr/bin/python
import MySQLdb
import csv
import pprint

db = MySQLdb.connect(host="localhost", # The Host
                     user="username", # username
                      passwd="password", # password
                      db="dbname") # name of the data base

cursor = db.cursor() 

cursor.execute("SELECT name, id, city, storeid FROM Products;")

StudentsData = cursor.fetchall()
pprint.pprint(StudentsData) 
```

该查询返回数百万行，并且需要`3 minutes`执行，并且每天运行 20 次，每个用户必须等待三分钟才能获取输出。

我正在考虑`caching`它，但我不知道如何在 python 中做到这一点，这是一个好主意，如果是这样，我该怎么做，使用上面的代码。

如果有更好的方法可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T19:12:25.710

是否缓存的决定完全取决于您。过时的数据会成为问题吗？

我能想到的最简单的缓存方案是使用 Python 的[**pickle 模块**](http://docs.python.org/2/library/pickle.html)如下所示：

```
import MySQLdb
import csv
import pprint
import time

MAX_CACHE_AGE = 60*20  # 20 Minutes
CACHE_FILENAME = 'results.cache'

with open(CACHE_FILENAME, 'r') as cache:
    cached = pickle.load(cache)

if(time.time() > cached['timestamp'] + MAX_CACHE_AGE):
    # Cache too old, run query
    db = MySQLdb.connect(host="localhost", # The Host
                     user="username", # username
                     passwd="password", # password
                     db="dbname") # name of the data base

    cursor = db.cursor() 
    cursor.execute("SELECT name, id, city, storeid FROM Products;")
    StudentsData = cursor.fetchall()

    # Update cache file
    data = {'results': StudentsData, 'timestamp':time.time()}
    with open(CACHE_FILENAME, 'w') as cache:
        pickle.dump(data, cache)

else:
    # Cached data is fresh enough, use that
    StudentsData = cached['results']

pprint.pprint(StudentsData) 
```

您需要`results.cache`手动初始化文件一次。

* * *

***编辑***

该`with`语法是上下文管理器，在 Python 2.5 中引入。

```
with open(CACHE_FILENAME, 'r') as cache:
    cached = pickle.load(cache) 
```

可以改写为

```
cached = open(CACHE_FILENAME, 'r')
cached = pickle.load(cache)
cached.close() 
```

* * *

***编辑2***

经过长时间的聊天讨论，以下工作：

```
import MySQLdb
import csv
import pprint
import time
import pickle

MAX_CACHE_AGE = 60*20  # 20 Minutes
CACHE_FILENAME = 'results.cache'

regen = False
try:
    with open(CACHE_FILENAME, 'r') as cache:
        cached = pickle.load(cache)

    if(time.time() > cached['timestamp'] + MAX_CACHE_AGE):
        print("Cache too old: regenerating cache")
        regen = True
    else:
        print("Cached data is fresh enough: loading results from cache")

except IOError:
    print("Error opening %s: regenerating cache" % CACHE_FILENAME)
    regen = True

if(regen):
    # Cache too old, run query
    db = MySQLdb.connect(host="localhost", # The Host
                     user="username", # username
                     passwd="password", # password
                     db="dbname") # name of the data base

    cursor = db.cursor()
    cursor.execute("SELECT name, id, city, storeid FROM Products;")
    StudentsData = cursor.fetchall()
    cursor.close()

    # Update cache file
    data = {'results': StudentsData, 'timestamp':time.time()}
    with open(CACHE_FILENAME, 'w') as cache:
        pickle.dump(data, cache)

else:
    # Cached data is fresh enough, use that
    StudentsData = cached['results']

print StudentsData 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T19:01:45.110

在 Python 3 中，对于一个非常简单的情况，您可以查看 functools.lru_cache：[http ://docs.python.org/3.2/library/functools.html#functools.lru_cache](http://docs.python.org/3.2/library/functools.html#functools.lru_cache)

对于更复杂的缓存，烧杯可能是要走的路：http: [//beaker.readthedocs.org/en/latest/caching.html](http://beaker.readthedocs.org/en/latest/caching.html)

# c - 解释C代码指令

> ID：15749722
> 
> 赞同：1
> 
> 时间：2013-04-01T18:54:51.127
> 
> 标签：c, microcontroller

下面的代码用于对微控制器进行编程。我想知道下面的代码在做什么。我知道'|' 是 OR 和 '&' AND 但整行在做什么？

```
lcd_port = (((dat >> 4) & 0x0F)|LCD_EN|LCD_RS); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:05:24.013

由于我们不知道`dat`包含什么内容，因此很难将其置于上下文中，但我们可以看到：

1.  例如，数据右移 4 位，因此`11111111`变为`00001111`。
2.  该值与 0x0F 进行“与”运算。这是删除不需要的位的常用技巧，因为`b & 1 = 1`和`b & 0 = 0`. 将您的数字视为一系列位，这是一个 2 字节的示例：

    0011010100111010

    &

    0000000000001111

    * * *

    00000000000001010

3.  现在`LCD_EN`and`LCD_RS`标志是 OR'ed。同样，这是一个常见的二进制技巧，因为`b | 1 = 1`and `b | 0 = b`，所以您可以添加标志但不能删除它们。所以，如果说`LCD_EN = 0x01`and `LCD_RS = 0x02`，

    00000000000001010

    |

    0000000000000011

    * * *

    0000000000001011

希望这对你来说更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:03:37.243

一些猜测，因为您可能需要找到芯片数据表来确认这一点：-

`lcd_port`可能是一个直接映射到一块[内存映射硬件](http://en.wikipedia.org/wiki/Memory-mapped_I/O)的变量——可能是一个字母数字 LCD 显示器。

显示器可能将数据作为四位“半字节”（因此移位/和操作），端口的高四位是控制信号。

`LCD_EN`可能是 LCD ENABLE 的缩写——端口上使用的控制线。

`LCD_RS`可能是 LCD READ STROBE（或 LCD REGISTER SELECT）的缩写 - 端口上使用的另一条控制线。在写入端口时设置这些位可能会告诉端口要执行的操作类型。

[如果使用的硬件是日立 HD44780](http://en.wikipedia.org/wiki/Hitachi_HD44780_LCD_controller)或其他衍生产品，我一点也不感到惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:58:09.083

它似乎在 lcd_port 上设置了一些数据和标志。第一部分将掩码 0x0F 应用于 (dat >> 4)（将 dat 右移 4），然后应用 LCD_EN 标志和 LCD_RS 标志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T18:59:12.587

它将变量`data`向右移动四位，然后用值 15 屏蔽该值。这导致值范围为 0-15（最左边的四位）。这个结果是带有`LCD_EN`and`LCD_RS`标志的二进制 ORd。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T19:01:33.307

此代码将 dat 的位向右移动 4 位，然后使用 & 0x0F 确保它仅获得这 4 个最低有效位。然后它使用 OR 来查找该值或 LCD_EN 或 LCD_RS 中存在哪些位，并将该值分配给 lcd_port。

# macos - OS X 应用程序在两台显示器上处于全屏模式

> ID：15749723
> 
> 赞同：1
> 
> 时间：2013-04-01T18:54:52.140
> 
> 标签：macos, cocoa, nsview, nswindow, nsapplication

基本上我想在两台显示器上以全屏模式运行 OS X 应用程序。我没有想要完成的特定布局，我只想放大应用程序以使用整个两个屏幕。只有我看到的应用程序以这种方式运行是平行的。

我该如何做到这一点？

更新：

此应用程序将仅在我的个人设置上运行，其中我有两个具有相同分辨率的屏幕。OSx 应用程序包含两个表视图。一个表视图有一列，第二个表视图有许多列。在全屏模式下，我想从 tableview2 中看到尽可能多的这些列。最好是 tableview2 伸展以使用两个屏幕。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-02T09:07:11.850

您可以使用几种不同的方法：

1.  创建两个全屏窗口，您将在其中放置两个滚动视图，其中包含两个显示数据的表格视图。
    然后，您需要将表格视图滚动到适当的位置，以显示您的内容。您还必须在视图之间同步滚动。

2.  创建一个放大的窗口，使其横跨显示器。这将比解决方案 (1) 容易得多，因为您的显示器尺寸相同。你有一个大的tableview。你必须照顾码头和工具栏。

3.  其他解决方案，需要更多的巫术。不值得细说。

**优点/缺点**

**解决方案 1：**操作系统会为您处理扩展坞和工具栏。处理不同尺寸/分辨率的显示器很容易。但是设置（以编程方式）需要一些努力。

**解决方案 2：**易于设置。但是您必须注意扩展坞和工具栏，如果显示器具有不同的尺寸/分辨率，则不会真正起作用。

# javascript - 主干模型保存客户端和服务器之间的更改循环

> ID：15749725
> 
> 赞同：1
> 
> 时间：2013-04-01T18:54:57.050
> 
> 标签：javascript, backbone.js

在我的主干模型中，当发生更改事件时，我调用 save 。

```
myModel = Backbone.View.extend({

  initialize: function() {
    var self = this;
    self.model.on("change", function() { self.model.save(); });
  }

}); 
```

从 Backbone 文档中，我了解到 Backbone 期望从服务器返回一个 json 对象。

所以我把模型发回给客户。然后主干更新模型，再次触发更改事件，导致它再次重新保存。

防止这种行为的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:17:46.017

In general in Backbone when you don't want side effects from your action you just pass a `silent: true` option. For instance:

```
self.model.on("change", function() { self.model.save({silent: true}); }); 
```

I haven't tested to ensure this solves your case, but I suspect it will.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T15:05:07.290

一种更简洁的编写方式是：

```
//inside you model
initialize: function () {
    this.on('change',function(){ this.save(null,{silent: true}); });
} 
```

正如在文档[主干js.org/#Model-save](http://backbonejs.org/#Model-save)中一样。

第一个参数是属性，第二个是选项。

# php - 多用户的维护模式功能 - php 数组不起作用？

> ID：15749729
> 
> 赞同：0
> 
> 时间：2013-04-01T18:55:15.690
> 
> 标签：php, wordpress

我创建了一个维护模式功能，但我只能让它为一个用户名工作。

```
get_currentuserinfo();

global $current_user;

// MAINTAINANCE MODE
function website_site_maintenance() {
    global $current_user;
    if ( 'josh' != $current_user->user_login ) {
       // vars
       $logout_url = wp_login_url().'?mode=maintenance';
       wp_logout();
       wp_redirect( $logout_url, 302 );
    }     
}
add_action('get_header', 'website_site_maintenance');
add_action('admin_init', 'website_site_maintenance');

// CUSTOM LOGIN MESSAGES
function website_my_login_message() {

    if( $_GET['mode'] == 'maintenance' ){
        $message = '<p class="message"><b>Site undergoing maintenance.</b></p>';
        return $message;
    }

}
add_filter('login_message', 'website_my_login_message'); 
```

上述功能有效，但我想添加更多维护用户。

所以我试过这个，但它不起作用......

```
// MAINTAINANCE MODE
function website_site_maintenance() {
    global $current_user;
    $maintenance_users = array('josh','george','bob');
    if ( $maintenance_users != $current_user->user_login ) {
       // vars
       $logout_url = wp_login_url().'?mode=maintenance';
       wp_logout();
       wp_redirect( $logout_url, 302 );
    }     
} 
```

我只是尝试将用户添加到数组中。

```
$maintenance_users = array('josh','george','bob'); 
```

但这似乎不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:10:55.373

而不是使用

```
if ( $maintenance_users != $current_user->user_login ) {
   // vars
   $logout_url = wp_login_url().'?mode=maintenance';
   wp_logout();
   wp_redirect( $logout_url, 302 );
} 
```

采用

```
if ( !in_array($current_user->user_login, $maintenance_users) ) {
   // vars
   $logout_url = wp_login_url().'?mode=maintenance';
   wp_logout();
   wp_redirect( $logout_url, 302 );
} 
```

您遇到的问题是您正在将数组与字符串进行比较，这是行不通的。在“正确”版本中，您将检查当前登录用户的用户名是否在`$maintenance_users`您指定的数组中。希望有帮助。

# javascript - 访问缓存图片phonegap

> ID：15749730
> 
> 赞同：1
> 
> 时间：2013-04-01T18:55:16.370
> 
> 标签：javascript, cordova, camera

我正在使用 Phonegap 的相机功能在我的应用程序中保存图片。当我尝试通过其保存的 file_URI（我从相机获得的）获取文件时，图像不会加载。

```
    函数 toBase64(url) {
        var canvas = document.createElement("canvas");
            var ctx = canvas.getContext('2d');
            var img = new Image();
            img.src = 网址；
            如果（img.height！= 0）{
                变量高度 = img.height，宽度 = img.width；
                canvas.height = 高度；
                画布.宽度 = 宽度；
                ctx.drawImage(img, 0, 0, 宽度, 高度);    
                尝试 {
                    var dataURL = canvas.toDataURL("image/jpg");
                    return dataURL.replace(/^data:image\/(png|jpg);base64,/, "");    
                }
                捕捉（错误）{ console.log（“错误”+错误）；}  
            }
            别的 {
                alert("路径错误！");
            }
        }

```

图像保存在应用程序的缓存文件夹中（/data/data/my.app/cache）

关于问题可能来自哪里的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:01:56.437

我解决了这个问题，不得不使用 Phonegap 的 FileReader 对象。

```
     变量 base64;
     函数 toBase64（文件名）{
        window.requestFileSystem(LocalFileSystem.TEMPORARY, 0, function(fileSystem) {
        // 文件系统的根是应用程序的缓存文件夹：/storage/emulated/0/Android/data/com.yourcompany.whatever
            fileSystem.root.getFile(filename, null, function(fileEntry) {
                fileEntry.file（函数（文件）{
                    var reader = new FileReader();
                    reader.onloadend = 函数（evt）{
                        控制台.log(evt.target.result);
                        // 触发回调
                        base64 = evt.target.result;
                    };
                    reader.readAsDataURL(文件);  
                }， 失败）;
            }， 失败）;
        }， 失败）;
        // 我们等待阅读器完全加载，然后我们返回 base64 加密数据！
        而（base64 ==“”）{}
        base64 = base64.replace(/^data:image\/(png|jpg|jpeg);base64,/, "");
        返回base64；
     }

```

不要认为 "while(base64 == "" ) {}" 是一个好习惯......

[编辑：我使用了这位先生](https://stackoverflow.com/questions/2296583/javascript-wait-for-something-to-be-true-then-run-action)的 do_when 方法而不是空循环！

# php - 问题将用户标识添加到其他表

> ID：15749731
> 
> 赞同：0
> 
> 时间：2013-04-01T18:55:23.853
> 
> 标签：php, symfony, fosuserbundle

Doctrine 没有在联系人表中添加用户 ID 列。我正在使用 FOSUserBundle。

我的联系人实体

```
/*
 * @ORM\ManyToOne(targetEntity="User", inversedBy="contacts")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 */
protected $user; 
```

我的用户实体

```
/**
 * @ORM\OneToMany(targetEntity="Contacts", mappedBy="user")
 */
protected $contacts; 
```

我做了学说：模式：更新--force

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:32:26.350

我的联系人

```
/*
 * @ORM\ManyToOne(targetEntity="User", inversedBy="contacts")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 */
 protected $user; 
```

应该

```
/** 
 * @ORM\ManyToOne(targetEntity="User", inversedBy="contacts")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 */
protected $user; 
```

文档块中缺少额外的星号

# json - GitHub 上最“流行”的 Python 存储库

> ID：15749738
> 
> 赞同：5
> 
> 时间：2013-04-01T18:55:47.767
> 
> 标签：json, curl, github, github-api

根据[v3 文档](http://developer.github.com/v3/search/#search-repositories)，我会认为：

```
$ curl https://api.github.com/legacy/repos/search/python?language=Python&sort=forks&order=desc 
```

将按分叉数的降序返回前 100 个 Python 存储库。它实际上返回一个空的 (json) 存储库列表。

这：

```
$ curl https://api.github.com/legacy/repos/search/python?language=Python&sort=forks 
```

返回存储库列表（以 json 格式），但其中许多未列为 Python 存储库。

所以，显然我误解了 Github API。检索特定语言的前*N*​​个存储库的公认方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T01:09:15.510

Repository Search API 的目的是按关键字查找 Repositories，然后通过其他可选的查询字符串参数进一步过滤这些结果。

由于您缺少 a `?`，因此您将整个预期的查询字符串作为`:keyword`. 很抱歉，我们目前不支持您通过 GitHub API 进行的搜索。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T07:22:06.653

正如 pengwynn 所说——目前仅通过 GitHub 的 API 并不容易做到这一点。但是，看看使用 GitHub Archive 项目的另一种查询方式：[如何查找过去日期的 100 个最大的 GitHub 存储库？](https://stackoverflow.com/questions/13745285/how-to-find-the-100-largest-github-repositories-for-a-past-date)

本质上，您可以使用类似 SQL 的语言查询 GitHub 的历史数据。因此，如果实时结果对您来说并不重要，您可以在[https://bigquery.cloud.google.com/?pli=1](https://bigquery.cloud.google.com/?pli=1)上执行以下查询，以获取截至 4 月的前 100 个 Python 存储库2013 年 1 月（昨天），按分叉数递减：

```
SELECT MAX(repository_forks) as forks, repository_url 
 FROM [githubarchive:github.timeline] 
 WHERE (created_at CONTAINS "2013-04-01" and repository_language = "Python") 
 GROUP BY repository_url 
 ORDER BY forks 
 DESC LIMIT 100 
```

我已将查询结果以 CSV 格式放在[此 Gist](https://gist.github.com/izuzak/0192f6576532594e1365)中，前几个存储库是：

```
forks  repository_url
1913   https://github.com/django/django
1100   https://github.com/facebook/tornado
994    https://github.com/mitsuhiko/flask
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T23:59:28.653

试试这个： [https ://api.github.com/search/repositories?q=language:Python&sort=forks&order=desc](https://api.github.com/search/repositories?q=language:Python&sort=forks&order=desc)

它正在搜索存储库。

# ruby-on-rails - Ruby on Rails 中具有不同关联的同一模型的多个表单

> ID：15749744
> 
> 赞同：0
> 
> 时间：2013-04-01T18:56:21.300
> 
> 标签：ruby-on-rails, form-for, nested-form-for

我正在构建具有以下关联的项目管理：

```
Project
  - Section
    - Milestone
      - Issue 
```

在 app/views/section/show.html.erb 内部 - 我想要了解整个部分的里程碑及其相关问题。对于每个里程碑，我希望有一个不同的表单来创建一个新的相关问题。

这是视图文件的样子：

```
 <%= @section.title %>
    <% @milestones.each do |milestone| %>
    <div id="milestone">
    <%= milestone.info %>
    </div>
<% milestone.issues.each do |issue| %>
    <div id="issue">
         <p><%= issue.content %></p>
    </div>
<% end %> 
```

在每个里程碑的末尾，我都有以下表格来添加新问题：

```
 <%= form_for([@project, milestone.issues.build], :url => project_section_milestone_issue_path ) do |f| %>
        <p>
            <%= f.text_field :content   %>
            <%= f.submit %>
        </p>
<% end %> 
```

这是我的路线.rb：

```
resources :projects do 
  resources :sections do
    resources :milestones do 
      resources :issues
    end
  end
end 
```

表单不起作用，页面（查看文件）本身无法加载，并且路径 url 错误。我猜路线或 form_for 方法中的分配有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:18:39.333

问题出在 form_for 语句上。

在@Zippie 的提示下，我将其更改为：`<%= form_for([@project, @section, milestone, milestone.issues.build] ) do |f| %>`并解决了问题。

# php - 如何将 PHP 结果编码为 UTF-8？

> ID：15749750
> 
> 赞同：0
> 
> 时间：2013-04-01T18:56:49.507
> 
> 标签：php, html, mysql, encoding

我环顾四周，一直无法让我的网站使用多种语言（我试图在下拉列表中显示我存储在我的 MySQL 数据库中的语言列表）。

1.  使用记事本++，我已将所有（PHP）页面更改为`UTF-8 without BOM`
2.  在服务器的根文件夹中，我有 .htaccess ：`AddCharset UTF-8 .php`
3.  在我页面的 HTML 标题中，我有这个：`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />`
4.  在我的数据库中，我有一个两列表（id|languages），表的“排序规则”设置为`uft8_unicode_ci`. 在“语言”一栏，我也设置`uft8_unicode_ci`了排序规则。

现在，当我输入：`echo("한국어 (ko)");`在我的 php 文件中，它返回`한국어 (ko)`

但是当我从查询中获取值时，我有类似`??????(ko)`.

我试图调试，认为问题来自数据库中的值，但是当我这样做时`mb_detect_encoding($source_language);`，它返回`UTF-8`。

我究竟做错了什么？

谢谢！

# c# - 在c#.net中BeginTransaction MySql Transaction之后锁定表

> ID：15749752
> 
> 赞同：0
> 
> 时间：2013-04-01T18:56:54.500
> 
> 标签：c#, mysql, database, transactions

在某个事务开始后，如何限制其他用户更新或插入表？

我试过这个：

```
MySqlConnection con = new MySqlConnection("server=localhost;database=data;user=root;pwd=;");
con.Open();

MySqlTransaction trans = con.BeginTransaction();

try

        {

            string sql = "insert INTO transaction_ledger (trans_id,voucher_id,voucher_number,trans_date,ledger_code,company_code,trans_type, trans_amount,primary_ledger,narration,ledger_parent,trans_type_name,ledger_ref_code,r_trans_id,IsSync) VALUES (0, 'EReceipt-4',4,'2013-04-01','483', '870d7d83-05ec-4fbb-8e9d-801150bd3ed1', 'EReceipt',-233.22,1,'asadfsaf','Bank OD A/c','Receipt','4274',1173,'N')";

            new MySqlCommand(sql, con, trans).ExecuteNonQuery();

            sql = "insert INTO transaction_ledger (trans_id,voucher_id,voucher_number,trans_date,ledger_code,company_code,trans_type, trans_amount,primary_ledger,narration,ledger_parent,trans_type_name,ledger_ref_code,r_trans_id,IsSync) VALUES (0, 'EReceipt-4',4,'2013-04-01','4274', '870d7d83-05ec-4fbb-8e9d-801150bd3ed1', 'EReceipt',100,0,'asadfsaf','Sundry Creditors','Receipt','483',1173,'N')";

            new MySqlCommand(sql, con, trans).ExecuteNonQuery();

            sql = "insert INTO transaction_ledger (trans_id,voucher_id,voucher_number,trans_date,ledger_code,company_code,trans_type, trans_amount,primary_ledger,narration,ledger_parent,trans_type_name,ledger_ref_code,r_trans_id,IsSync) VALUES (0, 'EReceipt-4',4,'2013-04-01','427', '870d7d83-05ec-4fbb-8e9d-801150bd3ed1', 'EReceipt',133.22,0,'asadfsaf','Sundry Creditors','Receipt','483',1173,'N')";

            new MySqlCommand(sql, con, trans).ExecuteNonQuery();

            trans.Commit();
        }
        catch (Exception ex)
        {

            trans.Rollback();
        }
        finally
        {
            con.Close();
        } 
```

但这仍然允许在 BeginTransaction 之后插入行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:11:11.733

BeginTransaction 并不意味着“您的交易已经开始并且一切都被锁定了”。它只是通知 RDBMS 您启动事务的意图，以及您从现在开始应该做的所有事情都应该而且必须被认为是原子的。

这意味着您可以调用 BeingTransaction，我可以从您的数据库中的所有表中删除所有数据，RDBMS 会很乐意让我这样做。希望它不应该让我放弃数据库，因为你有一个开放的连接，但是，这些天你永远不知道。可能有一些我不知道的未记录功能。

原子意味着任何动作或一组动作都必须作为一个动作来执行。如果其中任何一个失败了，那么他们都失败了。这是一个有或无的概念。

看起来您正在向表中插入三行。如果您的表为空或行数非常少，它可能会根据您的 RDBMS 的 LOCK ESCALATION 规则锁定整个表。但是，如果它是一个大或非常大或分区的表，则 LOCK 升级规则可能无法保证表锁定。因此，多个事务可能仍然有可能同时将行插入到您的表中。这完全取决于 RDBMS 如何处理这种情况以及数据模型的结构。

现在回答你的问题：

提示 - 在开始插入数据之前寻找锁定整个表的方法。

但是，这通常不好，但我假设您有合理的理由这样做。

希望这可以帮助。

# php - stream_notification_callback 似乎不起作用

> ID：15749755
> 
> 赞同：6
> 
> 时间：2013-04-01T18:56:59.117
> 
> 标签：php, stream

[http://www.php.net/manual/en/function.stream-notification-callback.php](http://www.php.net/manual/en/function.stream-notification-callback.php)

根据我不希望以下内容会产生错误：

```
<?php
stream_context_create(array('notification' => 'callback')); 
```

...但确实如此：

```
Warning: stream_context_create(): options should have the form ["wrappername"]["optionname"] = $value in /path/to/file.php on line 2 
```

这也会产生错误：

```
<?php
$ctx = stream_context_create();
stream_context_set_option($ctx, array('notification' => 'callback')); 
```

具有讽刺意味的是，示例中的代码`stream_notification_callback`不会产生错误。但由于它使用`stream_context_set_params`而不是`stream_context_set_option`我不相信它实际上在做任何事情，哈哈：

[stream_context_set_params 与 stream_context_set_option](https://stackoverflow.com/q/15749404/569976)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-01T15:49:16.167

该函数等待数组中的一个数组，因此代码必须更改为：

```
stream_context_create(array('wrapper' => array ('notification' => 'callback'))); 
```

# php - 转换为浮点数时处理空值

> ID：15749764
> 
> 赞同：3
> 
> 时间：2013-04-01T18:57:31.220
> 
> 标签：php, arrays, json, highcharts, encode

我正在使用 Highcharts 进行项目。

一点php文件：

```
$sql    =   "SELECT unix_timestamp(`datetime`) as `datetime`, `temp_cellule`, `temp_exterieur` FROM `tablebase`";
$result =   mysql_query($sql);
$data   =   array();
while   ($row   =   mysql_fetch_array($result)) {
    extract($row);
    $datetime   +=  3600;   //GMT+1
    $datetime   *=  1000;   //UNIX_TIMESTAMP to java
    $data[] =   array((float)$datetime,(float)$temp_cellule);           
    $data2[]=   array((float)$datetime,(float)$temp_exterieur);
}

$array[]    =   json_encode($data);
$array2[]   =   json_encode($data2); 
```

使用此代码：`$data2[]= array((float)$datetime,(float)$temp_cellule);`

我得到了一个很好的格式，但 Highcharts 无法识别值 "null" 因为它不是浮点数，所以它被转换为 0 ：

```
[[1362133360000,25],[1362136955000,0],[1362140579000,35] 
```

但是，如果我使用：（`$data[] = array($datetime,$temp_cellule);` **不强制转换为浮动）我得到了“datetime”和“null”的良好格式，但由于****“** ”而不是 temp_cellule ：

```
[[1362133360000,"25"],[1362136955000,null],[1362140579000,"35"]] 
```

而且我要：

```
[[1362133360000,25],[1362136955000,null],[1362140579000,35]] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T20:23:24.823

您可以通过使用[三元运算符](http://www.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)来做到这一点。它将检查一个条件然后执行第二个参数*（什么在`?`和之间`:`）*，否则它将执行第三个参数*（什么在之后`:`）*。

```
$data[] = array((float)$datetime, is_null($temp_cellule) ? null : (float)$temp_cellule); 
```

三元运算符是 if-else then assign 运算符的简写运算符。因为它返回第二个或第三个参数的值。

这和这样写是一样的：

```
if(is_null($temp_cellule)){
    $data[] = array((float)$datetime, null);
} else {
    $data[] = array((float)$datetime, (float)$temp_cellule);
} 
```

* * *

**请注意，**根据这种情况在您的代码中出现的次数，您可以使用它创建一个实用函数。

```
function handleFloat($value){
    return is_null($value) ? null : (float)$value;
} 
```

然后你就写：

```
$data[] = array((float)$datetime, handleFloat($temp_cellule)); 
```

这可能有助于保持您的代码[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T19:06:35.920

您可以按条件进行类型转换；

```
$data[] =   array((float)$datetime,(is_null($temp_cellule) ? null : (float)$temp_cellule)) 
```

# c++ - 拆分 64 位值以适合双精度参数类型

> ID：15749765
> 
> 赞同：2
> 
> 时间：2013-04-01T18:57:34.173
> 
> 标签：c++, c, math, floating-point-precision

我有一个无法更改语法的函数，比如说这是我正在调用的一些库函数：

```
void schedule(double _val);

void caller() {
   uint64_t value = 0xFFFFFFFFFFFFFFF;
   schedule(value);
} 
```

由于函数 schedule 接受 double 作为参数类型，如果参数的值大于 52 位（考虑 double 将尾数存储为 52 位值），我会在这种情况下失去精度。

我打算做的是，如果该值大于双精度可以容纳的最大值，我需要循环剩余的值，以便最终得出正确的值。

```
 void caller() {
       uint64_t value = 0xFFFFFFFFFFFFFFF;
       for(count = 0; count < X ; count++) {
           schedule(Y);
       }
    } 
```

我需要从变量“值”中提取 X 和 Y。如何实现？我的目标不是因为类型铸造而降低精度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:14:25.940

如果您的问题只是在 中`caller`而不是在 中丢失精度`schedule`，则不需要循环：

```
void caller() {
    uint64_t value = 0xFFFFFFFFFFFFFFF;
    uint64_t modulus = (uint64_t) 1 << 53;
    schedule(value - value % modulus);
    schedule(value % modulus)
} 
```

在`value - value % modulus`中，只有高 11 位有效，因为低 53 位已被清除。因此，当它转换为 时`double`，没有错误，并且将确切的值传递给`schedule`。类似地，`value % modulus`只有 53 位，并且精确地转换为双精度。

（IEEE-754 64 位二进制浮点对象的有效位编码有 52 位，但由于隐含的前导位，实际有效位有 53 位。）

注意：上面可能会导致`schedule`被调用的参数为零，我们尚未确定这是允许的。如果这是一个问题，则应跳过此类呼叫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:04:14.927

如果`N`是您可以精确表示的最大积分值`double`，那么显然您可以使用

```
Y = N 
```

和

```
X = amount / Y 
```

（假设整数除法）。完成迭代后，`X`您仍然需要安排剩余部分

```
R = amount % Y 
```

请记住，所有积分计算都必须在`uint64_t`类型域内执行，即您必须为常量（`UL`或`ULL`）添加适当的后缀，或者使用类型转换或使用类型的`uint64_t`中间变量`uint64_t`。

当然，如果您的程序并不真正关心`schedule`调用了多少次，只要总数正确，那么您几乎可以为 使用任何值`N`，只要它可以精确表示即可。例如，您可以简单地设置`N = 10000`.

另一方面，如果您想最小化`schedule`调用次数，那么值得注意的是，由于“隐式 1”规则，可以用 52 位尾数精确表示的最大整数是`(1 << 53) - 1`.

# javascript - 在 AngularJS 中立即调用函数

> ID：15749769
> 
> 赞同：0
> 
> 时间：2013-04-01T18:57:46.793
> 
> 标签：javascript, angularjs

我完全是 AngularJs 的新手。

我有很好的 ngClick 示例，它正在调用 Facebook 函数。

我想更改它并在我的控制器准备好后以编程方式调用 registerWithFacebook 函数。它的方法是什么？

这是示例：http: [//jsfiddle.net/IgorMinar/Hxbqd/5/](http://jsfiddle.net/IgorMinar/Hxbqd/5/)

```
 angular.module('HomePageModule', []).service('facebookConnect', function($rootScope) {
        this.askFacebookForAuthentication = function(fail, success) {
            FB.login(function(response) {
                if (response.authResponse) {
                    FB.api('/me', function() { $rootScope.$apply(success) });
                } else {
                   $rootScope.$apply(function() {
                     fail('User cancelled login or did not fully authorize.')
                   });
                }
            });
        }
});

function ConnectCtrl(facebookConnect, $scope, $resource) {

    $scope.user = {}
    $scope.error = null;

    $scope.registerWithFacebook = function() {
        facebookConnect.askFacebookForAuthentication(
        function(reason) { // fail
            $scope.error = reason;
        }, function(user) { // success
            $scope.user = user
        });
    }

    // Tried this but no success
    // $scope.registerWithFacebook();
}

ConnectCtrl.$inject = ['facebookConnect', '$scope', '$resource']; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:45:37.030

如果要异步加载 FB 库，需要在初始化后让 angular 知道。这是一种方法：

[http://plnkr.co/edit/YO4duxL1Mh3dwYEEpprV?p=preview](http://plnkr.co/edit/YO4duxL1Mh3dwYEEpprV?p=preview)

# tfs - TFS2012 构建文件夹中的所有项目

> ID：15749770
> 
> 赞同：0
> 
> 时间：2013-04-01T18:57:47.813
> 
> 标签：tfs, tfsbuild

有没有一种方法可以为 TFS2012 创建一个包含给定文件夹中的所有项目（例如 $\AllProjects）的构建定义？我想要这样的功能，以便每次在子文件夹中的任何位置添加新项目时，我都不必手动更新构建定义。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:37:39.483

我认为这是不可能的，但是您可以为此目的创建一个解决方案（例如 DeployProjects.sln），其中包含您想要构建的所有项目。对于每个新项目，您都将其添加到此解决方案中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:53:48.820

如果您不介意自定义工作流程，您可以这样做。

使用 FindMatchingFiles 活动查找所有 csproj 文件，然后遍历它们并使用 MSBuild 活动来构建每个文件。

虽然，我会坚持 Rafael 的建议，并专门为 TFS Build 创建一个包含您要构建的所有项目的 sln。

# ruby-on-rails - 如何在 RoR 中为不同运动的玩家建模？

> ID：15749772
> 
> 赞同：0
> 
> 时间：2013-04-01T18:57:52.063
> 
> 标签：ruby-on-rails, model

我正在构建一个具有以下要求的应用程序：

> -> 一个用户可以是不同球队的球员。-> 团队可以是运动类型。

我的问题是：

> -> 因为对于每种运动类型，我都想存储玩家的不同信息，那么最好的建模方法是什么？

我考虑过为每种运动设置几个模型（和表格），例如：

Basketball_Players、Football_Players 等等，但我不确定这是否是一个好方法。您通常如何在 RoR 上执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:10:09.463

我会说您有两个选择，而且我不知道在不知道您的应用程序要求的详细信息的情况下，是否真的可以说哪个是“最正确”的方法。

给定的是您将拥有一张`sport`桌子和一张`player`桌子。我可以肯定地说。问题是如何将两者联系起来。

**选项 1：单个连接表**

您可以有一个名为`player_sport`（或其他）的表，其中包含一`player_id`列、一`sport_id`列和一`serialized_player_data`列或类似的东西，您可以在其中保留序列化的球员数据（可能是 JSON），具体取决于运动。**优点：**简单的架构。**缺点：**没有正确规范化，因此会出现不一致。

**选项 2：每项运动都有一个单独的连接表**

这就是您在问题中提到的内容，您有一个`basketball_player`,`football_player`等。在这里，您还有一`player_id`列，但可能不是一`sport_id`列，因为既然您在表名中指定了运动，那将是多余的。拥有一`serialized_player_data`列的需要将消失，因为您现在可以自由地将所需的属性直接存储在列中，例如`wrestling_player.weight_class_id`或其他。**优点：**适当的标准化。**缺点：**更复杂的模式，因此在您的应用程序代码中工作更多。

实际上还有第三种选择：

**选项 3：1 和 2 的组合**

在这里，您可以执行您在选项 2 中所做的所有操作，除了您将通用球员属性移动到`player_sport`表格并保存`basketball_player`等运动特定属性。所以`weight_class_id`会留在`wrestling_player`但`player_sport`会有`height`, `weight`, 和其他与所有运动相关的列。

**如果您正在寻找建议，我可能会选择选项 2，或者，如果看起来有足够的重叠以使其有意义，则选择选项 3。**

# sharepoint-2010 - 会话抛出对象引用未设置为共享点 ItemUpdated 事件中的对象实例

> ID：15749773
> 
> 赞同：0
> 
> 时间：2013-04-01T18:57:52.210
> 
> 标签：sharepoint-2010

我试图在事件接收器的 itemupdated 事件中使用会话状态，但它抛出了这个错误：对象未设置为对象的实例。

我已将此事件接收器附加到表单库。也许这些信息会有所帮助。

这就是我使用的所有内容：

```
public override void ItemUpdated(SPItemEventProperties properties)
{
 HttpContext.Current.Session["OldValue"] = "Some value";
} 
```

**编辑：** 还有一件事。我在 sharepoint 中启用了会话状态。这些是我遵循的步骤：

```
1) Enable-SPSessionStateService –DefaultProvision
2) <pages enableSessionState="true" in web.config
3) <add name="Session" type="System.Web.SessionState.SessionStateModule" /> inside modules element in web.config 
```

我忘记了什么吗？

知道为什么会抛出此错误吗？

# protocol-buffers - mosh：dyld：库未加载：/usr/local/lib/libprotobuf.7.dylib

> ID：15749776
> 
> 赞同：6
> 
> 时间：2013-04-01T18:58:15.043
> 
> 标签：protocol-buffers, homebrew

我真的很喜欢`mosh`（[http://mosh.mit.edu/](http://mosh.mit.edu/)）但是在`brew upgrade`它停止工作之后，产生了以下错误。

```
> mosh example.com
dyld: Library not loaded: /usr/local/lib/libprotobuf.7.dylib
  Referenced from: /usr/local/bin/mosh-client
  Reason: image not found
Died at /usr/local/bin/mosh line 201\. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T18:58:15.043

经过一番挖掘后，我意识到这是由于`protobuf`已经升级并且`mosh`是硬编码的`protobuf 2.4.1`。

所以我所要做的就是从`protobuf 2.5.0`to恢复`2.4.1`。在带有自制软件的 Mac 上，这是通过以下步骤完成的：

```
> brew versions protobuf
2.5.0    git checkout 019364d /usr/local/Library/Formula/protobuf.rb
2.4.1    git checkout 544209f /usr/local/Library/Formula/protobuf.rb
> git checkout 544209f /usr/local/Library/Formula/protobuf.rb
> brew unlink protobuf
> brew link protobuf 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-27T04:36:39.797

你应该重新安装使用： [https ://mosh.mit.edu/#getting](https://mosh.mit.edu/#getting)

不要使用`brew`，它适用于我的 MAC OSX 10.9.5

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T09:51:31.183

您还可以更新`brew`然后升级`mosh`到 1.2.4：

```
$ brew update 
```

...

```
$ brew upgrade mobile-shell
==> Upgrading 1 outdated package, with result:
mobile-shell 1.2.4
==> Upgrading mobile-shell
==> Downloading http://mosh.mit.edu/mosh-1.2.4.tar.gz
######################################################################## 100.0%
==> ./configure --prefix=/usr/local/Cellar/mobile-shell/1.2.4
==> make install
  /usr/local/Cellar/mobile-shell/1.2.4: 12 files, 1004K, built in 41 seconds 
```

# gwt - GWT 上传/下载最佳实践

> ID：15749779
> 
> 赞同：0
> 
> 时间：2013-04-01T18:58:21.350
> 
> 标签：gwt, rpc

所以我是 GWT 的新手，我不确定我想要做的最好的编程实践是什么。在我的 Web 应用程序中，用户将能够上传数据文件，我的应用程序需要能够访问该文件，对其执行一些操作，然后让用户下载处理过的文件。

到目前为止，我已经能够使用此 doPost 方法成功上传带有上传 servlet 的文件：

```
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

    try {
        DiskFileItemFactory fileItemFactory = new DiskFileItemFactory();
        ServletFileUpload fileUpload = new ServletFileUpload(fileItemFactory);
        fileUpload.setSizeMax(FILE_SIZE_LIMIT);

        List<FileItem> items = fileUpload.parseRequest(req);

        for (FileItem item : items) {
            if (item.isFormField()) {
                logger.log(Level.INFO, "Received form field:");
                logger.log(Level.INFO, "Name: " + item.getFieldName());
                logger.log(Level.INFO, "Value: " + item.getString());
            } else {
                logger.log(Level.INFO, "Received file:");
                logger.log(Level.INFO, "Name: " + item.getName());
                logger.log(Level.INFO, "Size: " + item.getSize());
            }

            if (!item.isFormField()) {
                if (item.getSize() > FILE_SIZE_LIMIT) {
                    resp.sendError(HttpServletResponse.SC_REQUEST_ENTITY_TOO_LARGE, "File size exceeds limit");

                    return;
                }
                String fileName = item.getName();
                if (fileName != null) {
                    fileName = FilenameUtils.getName(fileName);
                }
                fileName = getServletContext().getRealPath("/uploadedFiles/" + fileName);

                byte[] data = item.get();
                FileOutputStream fileOutSt = new FileOutputStream(fileName);
                fileOutSt.write(data);
                fileOutSt.close();

                if (!item.isInMemory())
                    item.delete();
            }
        }
    } catch (Exception e) {
        logger.log(Level.SEVERE, "Throwing servlet exception for unhandled exception", e);
        throw new ServletException(e);
    }
} 
```

当我查看我的 war 文件夹时，uploadFiles 文件夹已成功创建并将文件放在那里。

在这一点上，我有点卡住了，我一直在研究，但似乎无法找到一个明确简洁的答案，说明什么是我在客户端访问上传文件以操作它们然后允许用户的最佳方式下载它们。也许我正在接近这个错误，我不确定。如果有人能指出我正确的方向或向我展示一些做事的正确方法的好例子，那就太好了，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:23:33.607

要在客户端访问文件，您需要一个新的 servlet 或与`doGet`方法一起使用的相同。

`Anchor`客户端应根据文件类型通过 an或 an请求文件，`Image`但添加参数以便服务器能够识别文件。通常您可以使用`FileInput`您用于上传的名称，或者您可以从服务器返回一个标签。

我建议你尝试一下[gwt-upload](http://code.google.com/p/gwtupload/wiki/GwtUpload_GettingStarted)，它会为你节省很多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T19:20:00.533

我解决了我的问题。文件成功上传后，我存储了文件名。后来我使用了一个RPC来访问服务器上的文件。我将文件名传递给 RPC，以便它知道我正在处理的文件，然后它在上传文件夹中查找该文件。所以我可以像这样创建java文件，

```
File file = new File((this.getServletContext().getRealPath("uploadedFiles") + File.separator + fileName)); 
```

并以我认为合适的方式操纵它。

# objective-c - 与 connectionDidFinishLoading 和 Delegate 相关的 Objective-C 问题

> ID：15749780
> 
> 赞同：0
> 
> 时间：2013-04-01T18:58:22.203
> 
> 标签：objective-c, api, delegates

我正在尝试使用 API 类从 URL 获取数据，然后将该数据返回到 ViewController 内的方法。我让 ViewController 调用 API 方法。

已经在 SO 上尝试了几个地方并提出了以下建议，但它不起作用，作为一个 Objective-C 菜鸟已经尝试阅读文档等，但仍然不明白可能出了什么问题。

我有一个视图控制器在类“api”中调用方法“fetch”。
我在 api 类中有连接委托，它工作正常（在`connectionDidFinishLoading`方法中打印了正确的数据）。
我需要一个委托将数据返回给 viewcontroller 类中的方法。

到目前为止我有

**视图控制器.h**

```
#import "Api.h"

@interface ViewController : UIViewController <apiDelegate>{

}

- (void)apiSucceeded:(NSString *)jsonString;
- (void)apiFailed:(NSString *)failedMessage;

@end 
```

**视图控制器.m**

```
#import "ViewController.h"
#import "Api.h"

- (void)apiSucceeded:(NSString *)jsonString {
    NSLog(@"WORKED");
}
- (void)apiFailed:(NSString *)failedMessage {
    NSLog(@"FAILED");
}
- (void)viewDidLoad {
    [super viewDidLoad];
    Api* myapi = [[Api alloc]init]; 
    [myapi fetch]; 
}
@end 
```

**api.h**

```
@protocol apiDelegate
@required
- (void)apiSucceeded:(NSString *)jsonString;
- (void)apiFailed:(NSString *)failedMessage;
@end

@interface Api : NSObject {
    id _delegate;

}
@property (nonatomic, assign) id _delegate;

-(void)fetch;
@end 
```

**api.m**

```
#import "Api.h"
#import "ViewController.h" 

@synthesize _delegate; 

- (void)fetch{  

//connection setup....
[NSURLConnection connectionWithRequest:[request autorelease] delegate:self];

}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [self.receivedData setLength: 0];
}
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    //  NSLog(@"append data");
    [self.receivedData appendData:data];
    // NSLog(@"Bytes: %d", [receivedData length]);
}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    //TODO error handling for connection
    if ([_delegate respondsToSelector:@selector(apiFailed:)]) {
        [_delegate apiFailed:[error localizedDescription]];
    }
    NSLog(@"Cannot Connect");
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"DONE. Received Bytes: %d", [self.receivedData length]);

    NSString *jsonString = [[NSString alloc] initWithBytes: [receivedData mutableBytes] length:[receivedData length] encoding:NSUTF8StringEncoding];

    if ([_delegate respondsToSelector:@selector(apiSucceeded:)])    {
        [_delegate apiSucceeded:jsonString];
    }

}

@end 
```

没有错误，但它只是不运行 'apiSucceeded' 方法。
请不要将此误解为有关“connectionDidFinishLoading”的问题。那一点效果很好，它将数据返回给导致问题的 ViewController。

任何人都可以看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:01:15.163

我好像你忘了设置

```
myapi.delegate = self; 
```

后

```
Api* myapi = [[Api alloc]init]; 
```

# php - 如何在 javascript 的查询字符串中创建重定向页面？

> ID：15749782
> 
> 赞同：0
> 
> 时间：2013-04-01T18:58:29.170
> 
> 标签：php, javascript, url, redirect, query-string

我有一个网站，它根据用户在 url 中输入的内容来更改页面的内容。

只有一页，但由于我使用了 .htaccess，似乎还有更多。

网站去了

```
www.site.com/1 or www.site.com/482 
```

然后内容会根据 url 是什么而改变，例如 /1 将加载分配给 ID 1 和 /482 的内容，加载分配给 ID 482 的数据。

我的问题是，当用户刚刚访问 www.site.com 时，页面仍然加载，但页面上的 youtube 剪辑显示模糊屏幕，并显示“参数无效”消息，这显然是不专业的。我希望用户在访问 www.site.com 时（没有正斜杠和数字）被重定向到我网站中的随机页面（从 /1 到 /999 的任何页面）。

```
I have this code:
var randomnumber = Math.round((Math.random()) * 999 + 1);
var DATA = window.location.pathname.replace('/', '');
if (typeof DATA == "undefined"){
    DATA = randomnumber;
} 
```

但它似乎并没有改变任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:07:16.933

如果你想使用 javascript 重定向，你必须像这样设置对象 `location`的属性`window`

```
var randomnumber = Math.round((Math.random()) * 999 + 1);
var DATA = window.location.pathname.replace('/', '');
if ( DATA == ""){
    window.location = '/' + randomnumber;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:12:32.090

如果禁用 Javascript，您可以使用 php 进行重定向：

```
<?php 
  if (!is_numeric($_SERVER['QUERY_STRING'])){
     header("Location: http://www.site.com/?".rand(1,999));
  } 
```

# bash - 使用命令替换设置位置参数

> ID：15749787
> 
> 赞同：1
> 
> 时间：2013-04-01T18:58:57.670
> 
> 标签：bash, parameters

我想使用命令替换来设置位置参数。这适用于一个简单的案例

```
$ set $(echo hello; echo world)

$ echo $1
hello 
```

但是，如果“行”包含空格，那么它将失败

```
$ set $(echo hello hello; echo world world)

$ echo $1
hello 
```

我也尝试过改变`IFS`价值

```
$ IFS=$'\n' set $(echo hello hello; echo world world)

$ echo $1
hello 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:37:55.100

`IFS=$'\n' set $(echo hello hello; echo world world)`几乎是正确的，但并不完全正确：它运行`set`命令时将 IFS 设置为换行符，但这发生在`$( ... )`已经使用 IFS 的标准值解析的输出之后。您需要将 IFS 设置为单独的命令，*然后*使用该`set`命令，然后将 IFS 设置回：

```
$ saveIFS=$IFS
$ IFS=$'\n'
$ set $(echo hello hello; echo world world)
$ IFS=$saveIFS
$ echo "$1"
hello hello
echo "$2"
world world 
```

# c++ - 使用 SDL 在 OpenGL 表面上绘制文本

> ID：15749792
> 
> 赞同：0
> 
> 时间：2013-04-01T18:59:11.470
> 
> 标签：c++, opengl, sdl

我正在使用 SDL，我有 OpenGL 渲染设置，我想在屏幕上绘制一些文本。

我发现了这个问题：[Using SDL_ttf with OpenGL](https://stackoverflow.com/questions/5289447/using-sdl-ttf-with-opengl)这似乎解决了同样的问题，但我认为我的 GL-fu 不足以理解下一步该做什么。

即，我有`texture`来自另一篇文章的内容，如果我正确理解所有内容，它是一个整数 ID，表示包含渲染文本的 GL 纹理。我如何将这个纹理实际渲染到我的屏幕上（这里的一切都是 2D 的，所以我只想将它渲染为屏幕上的平面文本，而不是渲染到 3D 场景中的某个花哨的表面或任何东西上）。

或者，有没有更简单的方法可以让这个工作？（即，通过 SDL 渲染一些文本，同时也能够渲染 GL 形状）

编辑：或者，更一般地说，是否有一种更简单的方法可以通过 SDL 将文本和形状呈现到屏幕上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:30:16.417

1.  使用 SDL_ttf 将您的字符串转换为位图；这只是一个函数调用。

2.  使用您发布的链接中的代码将其转换为纹理。

3.  使用所述纹理绘制一个矩形。即glBindTexture,glBegin,(glTexCoord,glVertex)x4,glEnd。如果您对这一步有疑问，最好先阅读一些基本的 OpenGL 教程（当然包括纹理映射）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T00:03:10.673

试试这个片段，它从屏幕的左下角开始呈现一个 SDL true type 字体扩展库字体。

注意 texcords 与屏幕上形状的排列。文本纹理的像素从图像左上角的 0,0 开始。所以我需要翻转它以使其正确显示在左下角的 x,y 屏幕上。

```
void RenderText(std::string message, SDL_Color color, int x, int y, 
                TTF_Font* font) 
{

  glMatrixMode(GL_MODELVIEW);
  glPushMatrix();
  glLoadIdentity();

  gluOrtho2D(0, gWindow->getWidth(),0,gWindow->getHeight()); 
  glMatrixMode(GL_PROJECTION);
  glPushMatrix();
  glLoadIdentity();

  glDisable(GL_DEPTH_TEST);
  glEnable(GL_TEXTURE_2D);
  glEnable(GL_BLEND);
  glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

  GLuint texture;
  glGenTextures(1, &texture);
  glBindTexture(GL_TEXTURE_2D, texture);

  SDL_Surface * sFont = TTF_RenderText_Blended(font, message.c_str(), color);

  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
  glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, sFont->w, sFont->h, 0, GL_BGRA, 
                GL_UNSIGNED_BYTE, sFont->pixels);

  glBegin(GL_QUADS);
  {
    glTexCoord2f(0,1); glVertex2f(x, y);
    glTexCoord2f(1,1); glVertex2f(x + sFont->w, y);
    glTexCoord2f(1,0); glVertex2f(x + sFont->w, y + sFont->h);
    glTexCoord2f(0,0); glVertex2f(x, y + sFont->h);
  }
  glEnd();

  glDisable(GL_BLEND);
  glDisable(GL_TEXTURE_2D);
  glEnable(GL_DEPTH_TEST);

  glMatrixMode(GL_PROJECTION);
  glPopMatrix();
  glMatrixMode(GL_PROJECTION);
  glPopMatrix();

  glDeleteTextures(1, &texture);
  SDL_FreeSurface(sFont);
} 
```

# linux - 在 linux shell 脚本中设置 cal 月份和年份的用户输入

> ID：15749794
> 
> 赞同：1
> 
> 时间：2013-04-01T18:59:16.950
> 
> 标签：linux

我正在为一个 linux 类编写一个 shell 脚本，但无法确定如何将用户输入应用于日历。我正在从用户那里读取月份和年份，并且需要显示带有指定月份和年份的日历。

我不确定如何让 cal 显示输入的月份和年份？任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:19:11.853

这个例子有帮助吗？

```
#!/bin/bash
month=$1
year=`date +%Y`

cal $month $year 
```

获取命令行参数设置月份

使用 date 命令设置年份

呼叫校准

# sql - SQL查询识别在一定时间间隔内有效的记录

> ID：15749797
> 
> 赞同：1
> 
> 时间：2013-04-01T18:59:20.660
> 
> 标签：sql, sql-server

我正在构建一个 SQL 查询，该查询可用于获取有效日期介于给定开始/结束日期时间之间的记录，并捕获有效日期永远有效，直到有另一条具有不同有效日期的记录。例如，我正在显示一个价格表，其中产品价格基于特定日期有效

```
ProductID    EffectiveDate   Price
  Milk         01/01/2012     3
  Milk         02/01/2012     2.85
  Milk         03/01/2012     3.1
  Milk         03/15/2012     3.4
  Milk         04/01/2012     3.2 
```

如果我的开始/结束日期时间是 03/01 和 03/31，那么我想要日期为 03/01 和 03/15 的记录，但如果我的开始/结束日期是 03/20 和 03/31，那么我只需要获取记录 03/15 我的查询有效，但是我正在尝试查看是否有一种非常有效的方法来获得所需的结果。

```
SELECT productid, 
       effectivedate, 
       price 
FROM   product p 
WHERE  ( p.effectivedate >= '03/20/2012' 
         AND c.effectivedate <= '03/31/2012' ) 
        OR p.effectivedate = (SELECT TOP 1 pp.[effectivedate] 
                              FROM   product pp 
                              WHERE  pp.effectivedate <= '03/20/2012' 
                                     AND pp.productid = p.productid 
                              ORDER  BY pp.effectivedate DESC) 
```

我希望改进的原因是表格可以变得更大，我只是在这里展示一个示例作为产品，但是最终表格有更多的列。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:05:46.537

像这样的东西应该工作：

```
select somefields, max(effectivedate) maxdate
from product
where effectivedate >= @startdate
and effectivedate < @TheDayAfterEndDate
and not exists
(select *
from product
where effectivedate > @EndDate)
group by somefields 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:06:33.707

对于这样的结构，我认为最好添加结束日期，然后从那里开始工作：

```
with BetterDataStructure as (
      select p.*,
             (select min(p2.EffectiveDate) from product p2 where p2.productId = p.productId and p2.EffectiveDate > p.EffectiveDate
             ) as EndDate
      from product p
     )
select *
from BetterDataStructure bds
where bds.startDate <= '2012-03-31' and
      (bds.endDate > '2013-03-01' or bds.endDate is NULL); 
```

如果您使用的是 SQL Server 2012，则可以使用该`lead()`函数而不是相关子查询。

# c++ - 这两个功能没有组合成一个功能有什么原因吗？

> ID：15749799
> 
> 赞同：3
> 
> 时间：2013-04-01T18:59:25.900
> 
> 标签：c++, reference, pass-by-reference, stdvector

c++ 标签下投票率最高的问题之一是[“Splitting a string in C++”](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)。在其中，提问者问道：“在 C++ 中分割字符串最优雅的方法是什么？”。

[这个问题的最高投票答案](https://stackoverflow.com/a/236803/12711)提供了这两个功能：

```
std::vector<std::string> &split(const std::string &s, char delim, std::vector<std::string> &elems) {
    std::stringstream ss(s);
    std::string item;
    while (std::getline(ss, item, delim)) {
        elems.push_back(item);
    }
    return elems;
}

std::vector<std::string> split(const std::string &s, char delim) {
    std::vector<std::string> elems;
    return split(s, delim, elems);
} 
```

这些功能很好用。但我试图理解为什么回答者没有将这两个功能组合成一个功能。当您结合这些功能时，是否有一些我没有看到您错过的性能、可用​​性或可读性优势？具有组合功能的完整程序如下：

```
#include <iostream>
#include <vector>
#include <string>
#include <sstream>

using namespace std;    
// splitting them into two seperate functions is unnecessary it seems to me, and makes the underlying function harder to understand.
std::vector<std::string> split(const std::string &s, char delim) {
    std::vector<std::string> elems;
    std::stringstream ss(s);
    std::string item;
    while (std::getline(ss, item, delim)) {
        elems.push_back(item);
    }
    return elems;
}

int main()
{
    std::vector<std::string> x = split("one:two::three", ':');
    for (int i = 0; i<x.size(); ++i) cout << x[i] << '\n';
    return 0;
} 
```

我发现这个功能分开后非常不优雅 - 也更难理解 - 但我觉得我一定错过了一些东西。他为什么不把它们结合起来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:01:16.017

想象一下，您要拆分一堆不同的来源，但希望结果全部放在一个容器中。为此，您不希望该函数始终为您分配一个新容器：

之前，需要额外的工作：

```
std::vector<std::string> sources = /* populate */;

std::vector<std::string> results;

for (const auto& source : sources)
{
    auto result = split(source, ":");

    // or maintain a vector of vectors...yuck
    results.insert(std::make_move_iterator(result.begin()),
                   std::make_move_iterator(result.end()));
} 
```

之后，直截了当：

```
std::vector<std::string> sources = /* populate */;

std::vector<std::string> results;

for (const auto& source : sources)
{
    split(source, ":", results);
} 
```

* * *

或者：假设您要拆分一堆差异源，并且为了提高效率，您希望最小化内存分配（例如，您的**分析器**说您在这里分配了太多）。因此，您一遍又一遍地重复使用相同的向量，以避免在第一次拆分后进行后续内存分配。

之前，慢：

```
std::vector<std::string> sources = /* populate */;

for (const auto& source : sources)
{
    auto result = split(source, ":");

    process(result);
} 
```

之后，更好：

```
std::vector<std::string> sources = /* populate */;

std::vector<std::string> result;
for (const auto& source : sources)
{
    result.clear();
    split(source, ":", result);

    process(result);
} 
```

* * *

当然，在一般情况下，为您创建容器的简单性很好，我们可以轻松地重用更通用的函数来以很少的成本创建第二个函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T19:06:46.953

您从原始代码中复制的代码提供了两个语义略有不同的函数。第一个将拆分结果*添加*到现有向量中，而第二个构建在第一个之上，创建一个新向量，其中仅包含来自此*拆分*的元素。

通过提供两种功能，您可以（以相同的成本）提供两种不同的行为，以满足不同用户的不同需求。如果您将它们合并到一个版本中，并且用户需要使用从拆分多个字符串中获得的所有标记构建一个列表，则它必须创建多个向量并将它们合并。

一个有趣的部分，不是关于一/两个功能设计的问题的一部分，是实际的实现。第二个功能应实现为：

```
std::vector<std::string> split(const std::string &s, char delim) {
    std::vector<std::string> elems;
    split(s, delim, elems);
    return elems;

} 
```

`split`不同之处在于，您应该直接返回局部变量，而不是返回从内部调用获得的引用。此更改启用了局部变量的命名返回值优化，消除了副本^*的成本。

^*在 C++11 中，您还可以使用`return std::move(split(s,delim,elems));`, 来获得相同的行为，但这需要更多的击键并且仍然是一个*移动*而不是删除整个操作。

# sql - TSQL + Entity Framework 连接表并将行连接成一个字符串列

> ID：15749801
> 
> 赞同：1
> 
> 时间：2013-04-01T18:59:33.637
> 
> 标签：sql, sql-server, entity-framework, tsql

我正在尝试在查询中加入 3 个表，以获得总结员工及其职位的连贯输出。设置如下：

```
CREATE TABLE employees (id INT, name VARCHAR(16))
CREATE TABLE titles (employeeId INT, standardTitleId INT)
CREATE TABLE standard_titles(standardTitleId INT, title VARCHAR(16))
GO

INSERT INTO standard_titles VALUES
    (0, 'Co-Founder'),
    (1, 'CEO'),
    (2, 'CTO'),
    (3, 'CFO')
INSERT INTO employees VALUES 
    (0, 'Bill'),
    (1, 'Bob'),
    (2, 'Sue')
INSERT INTO titles VALUES
    (0, 0),
    (0, 1),
    (1, 0),
    (1, 2),
    (2, 3)
GO 
```

我想要的输出是这样的：

```
id    name      titles
================================
0     Bill      Co-Founder, CEO
1     Bob       Co-Founder, CTO
2     Sue       CFO 
```

通读帖子后，我设法接近但也设法解决了一些问题：

```
SELECT
    e.id,
    e.name, 
    STUFF((
        SELECT ', ' + s.title
        FROM standard_titles s
            INNER JOIN titles t ON t.standardTitleId = s.standardTitleId
            INNER JOIN employees e ON e.id = t.employeeId
        WHERE t.standardTitleId = s.standardTitleId
        FOR XML PATH ('')), 1, 1, '')
FROM employees e 
```

这给了我这个：

```
id  name    (No column name)
===========================================================
0   Bill       Co-Founder, CEO, Co-Founder, CTO, CFO
1   Bob        Co-Founder, CEO, Co-Founder, CTO, CFO
2   Sue        Co-Founder, CEO, Co-Founder, CTO, CFO 
```

问题：

1.  我在这`FOR XML PATH`部分做错了什么。

2.  一旦 TSQL 被修复，有没有办法通过实体框架来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:07:52.797

所以，这里有一半的答案，只针对你的第一个问题：

```
SELECT
    e.id,
    e.name, 
    STUFF((
        SELECT ', ' + s.title
        FROM standard_titles s
            INNER JOIN titles t ON t.standardTitleId = s.standardTitleId
            --INNER JOIN employees e ON e.id = t.employeeId
        WHERE e.id = t.employeeId
        FOR XML PATH ('')), 1, 1, '')
FROM employees e 
```

[这是一个演示](http://sqlfiddle.com/#!3/5f5dd/2)供您尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:05:29.490

尝试这个：

```
SELECT
    e.id,
    e.name, 
    STUFF((
        SELECT ', ' + s.title
        FROM standard_titles s
            INNER JOIN titles t ON t.standardTitleId = s.standardTitleId
        WHERE e.id = t.employeeId
        FOR XML PATH ('')), 1, 1, '')
FROM employees e 
```

您没有与外部员工表相关联。

# vb.net - 在 VB.NET 中删除特定文件

> ID：15749808
> 
> 赞同：0
> 
> 时间：2013-04-01T19:00:09.337
> 
> 标签：vb.net, file-io

在我已经从闪存驱动器中的文件夹中提取所有文件并将它们放在计算机上的文件夹中之后，我试图找出 Visual Basic 上的代码。我怎样才能让这个程序删除计算机上文件夹中以前日期未修改的所有文件？

这是我到目前为止所拥有的：

```
Imports System.IO

Public Class frmExtractionator

    Private Sub btnStart_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnStart.Click

        Dim sourceDirectory As String = "E:\CopierFolderforTestDriveCapstone"
        Dim archiveDirectory As String = "E:\FilesExtracted"

        Try
            Dim txtFiles = Directory.EnumerateFiles(sourceDirectory)

            If(Not System.IO.Directory.Exists(archiveDirectory )) Then
                System.IO.Directory.CreateDirectory(archiveDirectory)
            End If

            For Each currentFile As String In txtFiles
                Dim fileName = currentFile.Substring(sourceDirectory.Length + 1)
                File.Move(currentFile, Path.Combine(archiveDirectory, fileName))
            Next
        Catch eT As Exception
            Console.WriteLine(eT.Message)
        End Try

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:45:11.233

Something like this will delete files that have not been modified since the given date.

```
Private Sub DeleteUnmodifiedFiles(directoryName As String, modificationThreshold As Date)
    Dim folder As New DirectoryInfo(directoryName)
    Dim wasModifiedSinceThreshold As Boolean
    For Each file As FileInfo In folder.GetFiles
        wasModifiedSinceThreshold = (file.LastWriteTime > modificationThreshold)
        If (Not wasModifiedSinceThreshold) Then file.Delete()
    Next
End Sub 
```

To delete based on a number of days...

```
Private Sub DeleteUnmodifiedFiles(directoryName As String, modificationThresholdDays As Integer)
    Dim folder As New DirectoryInfo(directoryName)
    Dim thresholdDate As Date
    Dim wasModifiedSinceThreshold As Boolean
    For Each file As FileInfo In folder.GetFiles
        thresholdDate = DateTime.Now().AddDays(-1 * modificationThresholdDays)
        wasModifiedSinceThreshold = (file.LastWriteTime > thresholdDate)
        If (Not wasModifiedSinceThreshold) Then file.Delete()
    Next
End Sub 
```

# ruby - 使用 Daemons gem 运行代码块

> ID：15749821
> 
> 赞同：0
> 
> 时间：2013-04-01T19:01:01.760
> 
> 标签：ruby, process, daemon

有人可以解释为什么下面的代码不会产生传递的块吗？

```
require 'daemons'

t = Daemons.call do
  # This block does not start
  File.open('out.log','w') do    # code don't get here to open a file
    |fw|
    10.times {
      fw.puts "=>#{rand(100)}"
      sleep 1
    }
  end
end
#t.start # has no effect
10.times {
  puts "Running ? #{t.running?}"    # prints "Running ? false" 10 times
  sleep 1
}
t.stop
puts 'finished' 
```

Ruby 1.9.3p392，x86_64 Linux

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:51:53.643

你确定你不是在尝试运行`Thread`并发编程吗？

下面是一个`Thread`实现的样子：

```
f = File.open('out.log', 'w')
t = Thread.new do
  10.times {
    f.puts "=>#{rand(100)}"
    sleep 1
  }
end
10.times {
  puts "Running ? #{t.alive?}"
  sleep 1
}
t.exit
puts 'finished' 
```

# mysql - MySQL：重置 AUTO_INCREMENT

> ID：15749823
> 
> 赞同：2
> 
> 时间：2013-04-01T19:01:07.197
> 
> 标签：mysql

我正在尝试根据其中当前的行数重置我的一个表中的自动增量值。这是我到目前为止的代码。

```
SET @numrows = 0;

SELECT COUNT(*) total, @numrows := COUNT(*) + 1 numrows FROM maj_user ;
ALTER TABLE `maj_user` AUTO_INCREMENT = @numrows ; 
```

如果我在 MySQL Workbench 中执行它，这将非常有用。但是，我需要将其保存为 SQL 文件并将其作为数据库导入脚本的一部分执行。如果我这样做，我会得到：

```
ERROR 1064 (42000) at line 39: You have an error in your SQL syntax; check the
manual that corresponds to your MySQL server version for the right syntax to
use near '@numrows' at line 1 
```

第 39 行是 ALTER TABLE 语句。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:31:25.450

您可以更改语法以跳过实际设置@numrows 吗？我不确定问题是什么，但解决方法似乎是这样的：

```
ALTER TABLE `maj_user` AUTO_INCREMENT = (SELECT COUNT(*) + 1 from maj_user); 
```

# c++ - 隐式常量表达式？

> ID：15749825
> 
> 赞同：7
> 
> 时间：2013-04-01T19:01:10.807
> 
> 标签：c++, c++11, constexpr

C++11 编译器（他们是否）能注意到一个函数是一个*constexpr*并这样对待它们，即使它们没有被声明为*constexpr*？

我正在使用直接来自维基百科的示例向某人演示*constexpr的使用：*

```
int get_five() {return 5;}

int some_value[get_five() + 7]; // Create an array of 12 integers. Ill-formed C++ 
```

令我惊讶的是，编译器可以接受。因此，我进一步更改了 get_five() 以获取一些 int 参数，将它们相乘并返回结果，同时仍未显式声明为*constexpr*。编译器也可以。似乎如果编译器可以做到这一点，那么为了显式声明*constexpr*所需的限制并没有多大意义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T19:03:49.727

在正常运行的 C++11 编译器上，您的代码将被拒绝。

基于它被接受，您几乎可以肯定使用 gcc（或密切模仿其错误的东西）。gcc [在某种程度上取决于标志] 可以接受在任何情况下都不是恒定的数组大小（例如，取决于用户的运行时输入），因为它们支持 C++ 中的 C99 可变长度数组的模拟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:11:23.943

编译器*可以*检测函数是否可以被声明，`constexpr`即使它们没有声明，用于*优化*目的（即在编译时计算函数的结果）。编译器在 C++11 之前就这样做了。

`constexpr`但是在需要常量表达式的地方使用，例如整数类型的模板参数，允许调用未使用关键字声明的函数是违反标准的。

# events - 如何使用 Box Api 获取对象特定事件

> ID：15749829
> 
> 赞同：1
> 
> 时间：2013-04-01T19:01:17.753
> 
> 标签：events, box-api

我很难获取特定对象的事件。基本上，我希望有一个事件集合，在 box.com 上查看文件属性时代表“访问统计”。我现在能想到的唯一方法是遍历流中的所有事件并手动构建集合。是否没有我可以使用的端点或我可以在事件端点上放置的查询过滤器来完成此操作？

谢谢

肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:48:29.313

这是我们的 fields 参数可以帮助的，但它还不是 GET /events。请密切关注我们文档的这一部分，以了解何时提供支持。[http://developers.box.com/docs/#fields](http://developers.box.com/docs/#fields)

# c# - Dispatcher.Invoke 在 vs2010 中工作，但在 vs2008 中出错

> ID：15749836
> 
> 赞同：0
> 
> 时间：2013-04-01T19:01:40.027
> 
> 标签：c#, wpf, timer, compiler-errors, dispatcher

我必须在明天早上提交我的 WPF 项目；它在 VS 2010 中完美运行，但使用 C# 在 VS 2008（两种情况下均为 .NET 3.5）中出现错误。

我正在使用计时器，`Dispatcher.Invoke`但在 VS 2008 中它给出了错误：

> 错误 163
> 匹配的最佳重载方法`System.Windows.Threading.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority, System.Delegate)`有一些无效参数。

下面的代码给出了错误：

```
Dispatcher.Invoke(new Action(() =>
{
    // ANY ACTIONS HERE
    .. some task
}), null); 
```

代码**必须**在 VS 2008 中运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T19:04:48.920

听起来 VS 2008 构建的目标是 .NET 3.0，而不是 3.5。[您正在使用](http://msdn.microsoft.com/en-us/library/cc647509%28v=vs.90%29.aspx)的重载是在 .NET 3.5 中添加的，并且错误消息表明正在找到 .NET 3.0。

您可以通过以下方式使用 3.0 重载轻松地重新调用工作：

```
Dispatcher.Invoke(DispatcherPriority.Normal, new Action(() =>
   {
      // ...some task
   })); 
```

# vba - 向 XY 散点图添加多个不需要的系列的宏

> ID：15749840
> 
> 赞同：0
> 
> 时间：2013-04-01T19:01:53.047
> 
> 标签：vba, excel, for-loop

我正在编写一个宏来在 Excel 2010 中创建一个 XY 散点图，但遇到了一些麻烦。我正在尝试使用循环分配 .Name、.XValues 和 .Value，但是每当我的宏完成时，图表中就会出现几个不需要的条目。这是我的代码：

```
 For m = 4 To 36
    ActiveChart.SeriesCollection.NewSeries
    ActiveChart.SeriesCollection(m).Name = Range("A" & m)
    ActiveChart.SeriesCollection(m).XValues = Range("Q" & m)
    ActiveChart.SeriesCollection(m).Values = Range("R" & m)
    Next m 
```

出于某种原因，添加的前三个系列是 M1:M2、N1:N2 和 O1:O2，但我不知道为什么。我只想要来自 A、Q 和 R 列的数据。此外，在图表底部总是有十个附加系列（例如 Series1 到 Series10）。有谁知道为什么会发生这种情况以及我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:20:38.187

试试下面这样的方法：比依赖 SeriesCollection 索引更安全。此外，如果您在代码中创建图表，则默认情况下它将从当前选择的任何范围中获取数据。为了安全起见，您应该在创建图表后立即循环并删除任何现有系列，然后再添加所需的数据。

```
Dim s 

For m = 4 To 36
    Set s = ActiveChart.SeriesCollection.NewSeries()
    With s
        .Name = Range("A" & m)
        .XValues = Range("Q" & m)
        .Values = Range("R" & m)
    End With
Next m 
```

# javascript - 命名以前的匿名函数会中断

> ID：15749845
> 
> 赞同：1
> 
> 时间：2013-04-01T19:02:12.913
> 
> 标签：javascript

为什么这不起作用：

```
$(document).on('click','a',myFunction);
var myFunction = function() {
   debugger;
} 
```

当这样做时：

```
$(document).on('click','a',function() {
   debugger;
} 
```

我已经开始通过命名我所有的匿名函数并将它们分解成各自独立的命名函数来了解更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:03:29.380

您必须交换行：

```
var myFunction = function() {
   debugger;
}
$(document).on('click','a', myFunction); 
```

否则，您将[分配`undefined`](https://stackoverflow.com/questions/3725546/variable-hoisting)为事件处理程序，因为`myFunction`当您将变量传递给`.on`.

另外：将函数分配给这样的变量不会使其命名，它仍然是一个匿名函数，只是存储在一个变量中。命名函数将是：

```
var myFunction = function someName() {
    debugger;
} 
```

有关详细信息，请参阅[揭秘的命名函数表达式。](http://kangax.github.com/nfe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:53:44.953

而不是说：

```
var myFunction = function() {
   debugger;
} 
```

你需要说：

```
function myFunction() {
   debugger;
} 
```

这将在第一次传递时声明该函数，以便在程序执行期间可以引用它。

# c++ - 使用解构函数停止 Thrift TSimpleserver

> ID：15749846
> 
> 赞同：1
> 
> 时间：2013-04-01T19:02:12.983
> 
> 标签：c++, boost, mfc, thrift

我有一个单独的课程来处理我的 Thrift `TSimpleServer`。由于`serve()`功能块我在与我的主要功能不同的线程中调用它。现在我的主要问题是即使我可以让服务器运行，我也找不到优雅地退出它的方法。我尝试`stop()`在解构中调用 ，但它不起作用，我不得不假设这是因为我必须`TSImpleServer`在解构中重新声明一个新对象，这样我才能访问`stop()`. 我一辈子都找不到一种方法来全局或至少在头文件中声明和初始化`TSimpleServer`. 所以希望有人可以帮助我`stop()`优雅地退出这个服务器。

代码：

标题

```
typedef boost::thread m_thread;

class ServerThread
{
public:

    m_thread thread_t;

    ServerThread();
    ~ServerThread(void);
    void Run();
}; 
```

cpp

```
boost::shared_ptr<TProtocolFactory> protocol_t(new TBinaryProtocolFactory());
boost::shared_ptr <ServerHandler> handler(new ServerHandler());
boost::shared_ptr<TProcessor> processor_t(new ServerProcessor(handler));
boost::shared_ptr<TServerTransport> server_transport_t(new TServerSocket(9090));
boost::shared_ptr<TTransportFactory> transport_factory_t(new TBufferedTransportFactory());

ServerThread::ServerThread()
{
    thread_t = boost::thread(&ServerThread::Run,this);
}

ServerThread::~ServerThread(void)
{
    TSimpleServer server(processor_t, 
                         server_transport_t, 
                         transport_factory_t, 
                         protocol_t);

    server.stop();

    thread_t.join();
}

void ServerThread::Run()
{
    TSimpleServer server(processor_t, 
                         server_transport_t, 
                         transport_factory_t, 
                         protocol_t);

    server.serve();
} 
```

# sql-server - 存储过程的奇怪错误

> ID：15749857
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:02:39.173
> 
> 标签：sql-server, stored-procedures

这是我在存储过程中的动态 sql

```
BEGIN

SET NOCOUNT ON;
declare @SQL as varchar(4000)

set @SQL = 'CREATE VIEW vw_GCS_Export
    As
    select division, [primary image id],[Item Number], [Brand Name],[Marketing Description],
    [Colours]as Colors,[Live Date],[Sample Type],substring([FileName],charindex('+ CHAR(39) + '_' + CHAR(39) +',[FileName],1)+1,CHARINDEX('+ CHAR(39) + '.' + CHAR(39) +',[FileName],1)-5) as BatchID,
    '+ CHAR(39) + '670' + CHAR(39) +' as Status, [Primary image ID] + '+ CHAR(39) + '_P' + CHAR(39) +' as [Shot Name],
    Cast(Null as varchar(50))as [Swatch/Variation],Cast(Null as varchar(50))as [Alternate Shot],[UserName],''' + CAST(convert(date,Sysdatetime(),110)as varchar(10)) + ''' as [Import Date],
    Cast(Null as varchar(50))as [Return Instructions],Cast(Null as varchar(50))as [Rush Request], DATEADD(WEEKDAY,-5,[live date]) as [ImageDeliveryDate],
    '  + convert(varchar(50), ' + ' +  CHAR(39) + 'Division ' + CHAR(39) +' + [Division] + '+ CHAR(39) + ' * ' + CHAR(39) +' + [UserName] ) as JobName 
    from Sheet1$'

EXEC @SQL
select * from vw_GCS_Export

END 
```

我在执行时遇到错误

```
Incorrect syntax near the keyword 'EXEC'. 
```

我不确定为什么。SQL 语句中似乎没有任何错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T19:04:06.427

你需要括号：

```
EXEC (@sql) 
```

请参阅[如何从变量运行生成的 SQL？](https://stackoverflow.com/questions/7872959/how-to-run-generated-sql-from-a-variable)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:01:51.307

您的实际问题在这里：

```
 '  + convert(varchar(50), ' 
```

你有一个`CONVERT`没有第二个论点。可能是您打算`CONVERT`在动态 SQL 中包含 或者您打算拥有这部分

```
' + [UserName] ) as JobName 
```

作为你的结束，`CONVERT`但在任何一种情况下，它都不会编译并且你的语法被破坏了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:13:54.920

这是我最终得到的结果：

```
SET NOCOUNT ON;
declare @SQL as varchar(4000)

set @SQL = 'CREATE VIEW vw_GCS_Export
    As
    select division, [primary image id],[Item Number], [Brand Name],[Marketing Description],
    [Colours]as Colors,[Live Date],[Sample Type],substring([FileName],charindex('+ CHAR(39) + '_' + CHAR(39) +',[FileName],1)+1,CHARINDEX('+ CHAR(39) + '.' + CHAR(39) +',[FileName],1)-5) as BatchID,
    '+ CHAR(39) + '670' + CHAR(39) +' as Status, [Primary image ID] + '+ CHAR(39) + '_P' + CHAR(39) +' as [Shot Name],
    Cast(Null as varchar(50))as [Swatch/Variation],Cast(Null as varchar(50))as [Alternate Shot],[UserName],''' + CAST(convert(date,Sysdatetime(),110)as varchar(10)) + ''' as [Import Date],
    Cast(Null as varchar(50))as [Return Instructions],Cast(Null as varchar(50))as [Rush Request], DATEADD(WEEKDAY,-5,[live date]) as [ImageDeliveryDate],
    ' + CHAR(39) + 'Division ' + CHAR(39) +'+ cast([Division] as varchar(50)) + '+ CHAR(39) + ' * ' + CHAR(39) + ' + [UserName] as JobName 
    from Sheet1$'

    EXEC (@SQL)
    select * from vw_GCS_Export 
```

关键是我不能对整个字符串使用强制转换，我只能将它放在浮动字段 [Division] 上。我感谢所有帮助 FreshPrinceofSO

# java - 队列模拟

> ID：15749859
> 
> 赞同：0
> 
> 时间：2013-04-01T19:02:45.677
> 
> 标签：java

嗨，我正在尝试使用 Java 模拟等待队列。我的程序必须包含的内容：

*   用户输入第n个收银员
*   至少有 10 位客户将随机到达队列中。
*   当收银员空闲时，将处理下一个客户所在的行。
*   程序必须输出队列的每个阶段以及每个客户在队列中花费的时间。

Oki 所以我有一个空队列对象，一个将字符串发送到队列的随机字符串列表生成器。

但是我遇到的问题是随机字符串生成器在循环中选择重复项，我该如何解决这个问题？另外我如何让它以 0.5 秒的间隔将客户发送到队列，我需要记录他们进入队列和离开队列的时间，这样我就可以输出在队列中花费的时间。我卡住了不知道现在该怎么办？

```
public static Queue<String> line = new  LinkedList<String> ();

public static void main(String[] args) 
{
    String[] list = {"a", "b", "c", "e", "f", "g", "h", "i", "j", "k", };
    int customer = list.length;

    for (int x = 0; x < customer; x++ )
    {
      int cus = (int) (Math.random() * customer);
      line.add(list[cus]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:13:11.463

您应该熟悉[System.currentTimeMillis()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#currentTimeMillis%28%29)和[Thread.sleep()](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#sleep%28long%29)。你应该考虑一个你工作的循环（消费/生产），然后休眠 500 毫秒，然后再次继续循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:28:25.313

到目前为止，Oki 已经设法通过使用另一个类中的方法来输出客户名称和服务时间，从而使循环工作。但是，如果用户输入第 n 个收银员，我仍然坚持，这基本上意味着整个循环将运行 x（输入的第 n 个收银员）。

```
 Random ran = new Random();
    while (!line.isEmpty())
    {
        System.out.println(line  + "\n");
        System.out.println("The queue has " + line.size() + " customers left");
        Customer cus = line.remove();
        System.out.println(cus.name + " queued at " + cus.getTime() + " <=== SERVED" + "\n");
        // you will have to sleep a random number of seconds here
        int wait = ran.nextInt(2) + 1;  // will generate 1 or 2
        try 
        {
             Thread.sleep(wait * 1000);
        }
        catch(Exception e) 
        {
            System.out.println("Sleep error: " + e);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:10:22.620

听起来很熟悉的问题：[生产者消费者问题](http://en.wikipedia.org/wiki/Producer-consumer_problem)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T19:08:00.920

Random 函数根据执行的时间生成一个数字。因为 for 循环非常快，所以 random 函数会生成相同的数字。尝试使用循环中的代码创建一个新函数并从循环中调用它。

# magento - 多个类别 URL - 让类别 URL 像产品 URL 一样工作

> ID：15749860
> 
> 赞同：1
> 
> 时间：2013-04-01T19:02:53.193
> 
> 标签：magento, url

在 Magento 中，产品 url 可以在多种情况下使用，例如

```
phones/apple/iphone5.html
phones/iphone5.html
iphone5.html 
```

将全部服务于 iPhone 5 产品页面。

但是，此回退不适用于类别。我怎样才能做到这两个网址

```
phones/apple.html
apple.html 
```

会显示 Apple 类别页面吗？

# c# - System.Collections.ArrayList

> ID：15749864
> 
> 赞同：-4
> 
> 时间：2013-04-01T19:03:05.787
> 
> 标签：c#, arrays, arraylist

新手在这里

我这里有这行代码

```
lblDepart.Text = t.DepartureCities; 
```

它返回

```
System.Collections.ArrayList 
```

我猜这是一个 ArrayList....我将如何正确显示它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:06:36.140

An`ArrayList`是元素的集合。为了向用户显示这个值，您必须将所有元素组合成一个`string`值。有不同的方法可以做到这一点，但最简单的方法是使用逗号

```
ArrayList list = t.DepartureCities;
StringBuilder builder = new StringBuilder();
for (int i = 0; i < list.Count; i++) {

  if (builder.Length > 0) {
    builder.Append(", ");
  }
  object current = list[i];
  builder.Append(current);
}
lblDeparture.Text = builder.ToString(); 
```

请注意，这`ArrayList`通常被认为是 .Net 中的过时类型。如果你控制`DepartureCities`你应该使用`List<T>`。

原因是强类型。`ArrayList`我不知道你在集合中存储什么类型的元素：, `string`,`City`等等......`List<T>`这很明显，因为它会直接说明它包含的元素：`List<string>`, `List<City>`, 等等......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:07:59.640

```
lblDepart.Text = String.Join(",", t.DepartureCities.OfType<YourType>()); 
```

相应地改变`YourType`。也许`City`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:06:46.297

如果你打电话

```
lblDepart.Text = t.DepartureCities; 
```

然后这隐含地调用

```
lblDepart.Text = t.DepartureCities.ToString(); 
```

而`ToString()`这些内置类型的 - 方法通常会返回对象的名称。该对象是一个`Collection`包含多个单独对象的对象。如果要访问单个项目，请使用

```
foreach(var item in t.DepartureCities){
//use item in here
} 
```

# asp.net - timer.tick 杀死我的 .net 页面

> ID：15749865
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:03:10.343
> 
> 标签：asp.net, timer

我在 vb 中有一个简单的计时器方法，目前什么都不做，它只是滴答作响。但是，一旦这样做，我在页面上的所有其他代码都将停止工作。

例如，我的页面上有图像按钮，可将控件添加到静态占位符。

```
btnCreate.Text = "Create"
btnCreate.ID = "btnCreateSpecialNotes"
AddHandler btnCreate.Click, AddressOf btnCreateSpecialNotes_Click
plhCreateSpecialNotes.Controls.Add(btnCreate) 
```

因此，如果没有 timer.tick 方法，它（以及不包括的其他代码）会按预期启动并执行我想要的操作，但是当 timer.tick 发生时，一切都会冻结并且没有任何效果。

我的计时器设置如下

```
<asp:Timer ID="specialNotesTimer" runat="server" Interval="2000" ontick="specialNotesTimer_Tick"></asp: Timer> 
```

在后面的代码中......

```
Protected Sub specialNotesTimer_Tick(Byval sender as object, Byval e as eventArgs) Handles specialNotesTimer.Tick
'Do things to the page
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T06:29:22.550

免责声明：我从未使用过 System.Web.UI.Timer 类。

我认为客户端 javascript 代码和服务器端 C# 代码之间可能存在一些混淆。

阅读 MSDN 后，似乎 Timer 控件将每 2000 毫秒（因为您在上面这么说是 2 秒）启动一次完整的回发。这只能在 javascript 中完成，并且需要有一个服务器端事件处理程序来在服务器上执行一些任务（你称之为 specialNotesTimer_Tick）。

现在，如果这个任务的执行时间超过 2 秒，我会假设您永远不会在网页上看到任何信息，因为它会不断地回发（回发？）并刷新屏幕。

建议：

1.  重新考虑使用计时器的方法
2.  增加定时器间隔
3.  添加一个 UpdatePanel 以便异步进行处理，从而避免屏幕刷新

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T16:21:03.480

我认为我在这里遇到的主要问题是我的 html 流没有结束。我从头开始慢慢地重新启动我的页面，虽然我使用了几乎相同的代码，但我只是三次检查了所有关闭标签以及 html 中没有的内容，这似乎解决了问题本身。

很抱歉，没有更深入的答案，但我仍然不明白为什么我的旧代码在这里不起作用，但是从一开始重新做我的页面对我有用。

# iphone - 如何在 UICollectionView 中的 UICollectionViewCells 之间添加视图？

> ID：15749868
> 
> 赞同：24
> 
> 时间：2013-04-01T19:03:21.803
> 
> 标签：iphone, ios, objective-c, uicollectionview, uicollectionviewcell

我正在尝试在 my 的 s 之间添加s `UIView`，但我不知道该怎么做。我正在尝试完成这样的事情：`UICollectionViewCell``UICollectionView`

![截屏](https://i.stack.imgur.com/TCnEZ.png)

我可能需要编写一个 custom `UICollectionViewLayout`，但我真的不知道从哪里开始。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-03T19:39:01.377

我研究了更多`UICollectionViewLayout`的工作原理并想出了如何解决它。我有一个`UICollectionReusableView`名为的子类`OrangeView`，它将位于我的视图之间，而不是我编写了一个`UICollectionViewFlowLayout`名为的子类`CategoriesLayout`来处理我的布局。

抱歉，代码块很大，但它是这样的：

```
@implementation CategoriesLayout

- (void)prepareLayout {
    // Registers my decoration views.
    [self registerClass:[OrangeView class] forDecorationViewOfKind:@"Vertical"];
    [self registerClass:[OrangeView class] forDecorationViewOfKind:@"Horizontal"];
}

- (UICollectionViewLayoutAttributes *)layoutAttributesForDecorationViewOfKind:(NSString *)decorationViewKind atIndexPath:(NSIndexPath *)indexPath {
    // Prepare some variables.
    NSIndexPath *nextIndexPath = [NSIndexPath indexPathForItem:indexPath.row+1 inSection:indexPath.section];

    UICollectionViewLayoutAttributes *cellAttributes = [self layoutAttributesForItemAtIndexPath:indexPath];
    UICollectionViewLayoutAttributes *nextCellAttributes = [self layoutAttributesForItemAtIndexPath:nextIndexPath];

    UICollectionViewLayoutAttributes *layoutAttributes = [UICollectionViewLayoutAttributes layoutAttributesForDecorationViewOfKind:decorationViewKind withIndexPath:indexPath];

    CGRect baseFrame = cellAttributes.frame;
    CGRect nextFrame = nextCellAttributes.frame;

    CGFloat strokeWidth = 4;
    CGFloat spaceToNextItem = 0;
    if (nextFrame.origin.y == baseFrame.origin.y)
        spaceToNextItem = (nextFrame.origin.x - baseFrame.origin.x - baseFrame.size.width);

    if ([decorationViewKind isEqualToString:@"Vertical"]) {
        CGFloat padding = 10;

        // Positions the vertical line for this item.
        CGFloat x = baseFrame.origin.x + baseFrame.size.width + (spaceToNextItem - strokeWidth)/2;
        layoutAttributes.frame = CGRectMake(x,
                                            baseFrame.origin.y + padding,
                                            strokeWidth,
                                            baseFrame.size.height - padding*2);
    } else {
        // Positions the horizontal line for this item.
        layoutAttributes.frame = CGRectMake(baseFrame.origin.x,
                                            baseFrame.origin.y + baseFrame.size.height,
                                            baseFrame.size.width + spaceToNextItem,
                                            strokeWidth);
    }

    layoutAttributes.zIndex = -1;
    return layoutAttributes;
}

- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect {
    NSArray *baseLayoutAttributes = [super layoutAttributesForElementsInRect:rect];
    NSMutableArray * layoutAttributes = [baseLayoutAttributes mutableCopy];

    for (UICollectionViewLayoutAttributes *thisLayoutItem in baseLayoutAttributes) {
        if (thisLayoutItem.representedElementCategory == UICollectionElementCategoryCell) {
            // Adds vertical lines when the item isn't the last in a section or in line.
            if (!([self indexPathLastInSection:thisLayoutItem.indexPath] ||
                  [self indexPathLastInLine:thisLayoutItem.indexPath])) {
                UICollectionViewLayoutAttributes *newLayoutItem = [self layoutAttributesForDecorationViewOfKind:@"Vertical" atIndexPath:thisLayoutItem.indexPath];
                [layoutAttributes addObject:newLayoutItem];
            }

            // Adds horizontal lines when the item isn't in the last line.
            if (![self indexPathInLastLine:thisLayoutItem.indexPath]) {
                UICollectionViewLayoutAttributes *newHorizontalLayoutItem = [self layoutAttributesForDecorationViewOfKind:@"Horizontal" atIndexPath:thisLayoutItem.indexPath];
                [layoutAttributes addObject:newHorizontalLayoutItem];
            }
        }
    }

    return layoutAttributes;
}

@end 
```

我还编写了一个类别，其中包含一些方法来检查索引路径是一行中的最后一行、最后一行还是一节中的最后一个：

```
@implementation UICollectionViewFlowLayout (Helpers)

- (BOOL)indexPathLastInSection:(NSIndexPath *)indexPath {
    NSInteger lastItem = [self.collectionView.dataSource collectionView:self.collectionView numberOfItemsInSection:indexPath.section] -1;
    return  lastItem == indexPath.row;
}

- (BOOL)indexPathInLastLine:(NSIndexPath *)indexPath {
    NSInteger lastItemRow = [self.collectionView.dataSource collectionView:self.collectionView numberOfItemsInSection:indexPath.section] -1;
    NSIndexPath *lastItem = [NSIndexPath indexPathForItem:lastItemRow inSection:indexPath.section];
    UICollectionViewLayoutAttributes *lastItemAttributes = [self layoutAttributesForItemAtIndexPath:lastItem];
    UICollectionViewLayoutAttributes *thisItemAttributes = [self layoutAttributesForItemAtIndexPath:indexPath];

    return lastItemAttributes.frame.origin.y == thisItemAttributes.frame.origin.y;
}

- (BOOL)indexPathLastInLine:(NSIndexPath *)indexPath {
    NSIndexPath *nextIndexPath = [NSIndexPath indexPathForItem:indexPath.row+1 inSection:indexPath.section];

    UICollectionViewLayoutAttributes *cellAttributes = [self layoutAttributesForItemAtIndexPath:indexPath];
    UICollectionViewLayoutAttributes *nextCellAttributes = [self layoutAttributesForItemAtIndexPath:nextIndexPath];

    return !(cellAttributes.frame.origin.y == nextCellAttributes.frame.origin.y);
}

@end 
```

这是最终的结果：

![最后结果](https://i.stack.imgur.com/j1m0V.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:18:30.333

如果您正在使用节并且布局适合它，则可以使用节页眉和页脚。

但是根据您的插图，您似乎只需要定义 UICollectionViewCell 来包含这些视图。所以，你在哪里注册你的班级：

```
[collectionView registerClass:[CollectionViewCell class] forCellWithReuseIdentifier:@"Cell"]; 
```

将这些边框图像放在 UICollectionView 单元子类中（在上述情况下，“CollectionViewCell”）。这似乎是最简单的方法。

这是我使用的一个：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        self.restorationIdentifier = @"Cell";
        self.backgroundColor = [UIColor clearColor];
        self.autoresizingMask = UIViewAutoresizingNone;
        const CGFloat borderWidth = 3.0f;
        UIView *bgView = [[UIView alloc] initWithFrame:frame];
        bgView.layer.borderColor = [UIColor blackColor].CGColor;
        bgView.layer.borderWidth = borderWidth;
        bgView.layer.cornerRadius = 6.0f;
        self.selectedBackgroundView = bgView;
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T02:47:18.673

看起来如果您的 collectionView 背景是绿色而 contentView 是白色的，您可以获得在单元格[minimumLineSpacing](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewFlowLayout_class/Reference/Reference.html)之间有空格的水平线。垂直间隙将是棘手的部分，但如果您对 contentView 有创意并仔细设置[minimumInteritemSpacing](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewFlowLayout_class/Reference/Reference.html)您可以得到它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-10T13:19:10.143

哇。其他答案中有很多代码仅用于行之间的分隔线..

这就是我解决它的方法。首先，您需要在单元格内添加行分隔符。确保你一直拖动它，使它比实际的单元格宽度更宽，所以如果你的单元格宽度是 60p，你的分隔线将是 70。

```
@implementation CollectionViewController
{
    NSArray *test;
    int currentLocInRow;
} 
```

里面`cellForItemAtIndexPath`：

```
if((indexPath.row+1) % 4 == 0)
    {
        cell.clipsToBounds = YES;
    }
    else
    {
        cell.clipsToBounds = NO;
    }
    currentLocInRow++;

    if([test count] - indexPath.row+1 < 4 - currentLocInRow)
    {
        cell.lineSeparator.alpha = 0;
    }
    else
    {
        cell.lineSeparator.alpha = 1;
    }
    if(currentLocInRow==4)currentLocInRow=0; 
```

![在此处输入图像描述](https://i.stack.imgur.com/BFJZa.png)

如果您想在集合视图的末尾添加一个分隔符，但最后一行可能没有 4 个单元格，您可以添加一个简单的集合可重用视图作为页脚。

# functional-programming - 计算纯函数式语言中字节的频率

> ID：15749878
> 
> 赞同：1
> 
> 时间：2013-04-01T19:03:51.087
> 
> 标签：functional-programming

如果我们有一个任务：

> 给定一个二进制数据块，计算其中字节的频率。

而且您应该在 C 中执行此操作，即使对于较大的二进制块，答案也是微不足道且相当快的。**一个人如何在没有副作用的情况下用一种纯粹的函数式语言来实现它？**

例如，如果您编写了一个函数，该函数接受每个字节和其余字节列表的频率计数，并返回修改后的频率计数，那么它必须为 100M 字节的数据集做大量工作。

此外，如果您对数据进行排序，然后以某种方式计算后续相同值字节的数量，则排序本身将花费大量时间。

有没有合理的方法来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T21:46:27.703

直接的方法确实是传入并返回将字节映射到计数的数据结构。这可能会被实现为某种树（据我所知，这就是您从标准库容器中得到的东西）。在纯函数式编程中，当您传入一棵树并且需要返回一棵仅在一个节点上有差异的新树时，返回的树最终会与原始树共享几乎所有的结构和数据。

遍历树以获取计数有一些开销，但由于您正在计算字节，因此树永远小于 256 个元素，因此开销是 log(255)，它是一个常数。对于大型数据集，它不会变得更大——它不会改变算法的复杂性。即使您使用最大可能的开销来复制完整的 256 项计数数组而没有共享，这实际上也是如此。

如果您想优化这一点，您可以利用“中间”频率计数永远不需要的事实，除非作为下一组计数的计算的一部分。这意味着您可以使用各种技术来让实现使用破坏性更新，即使您仍在语义上编写函数式代码。Haskell 中的 An`STref`基本上是让您手动执行此操作。

从理论上讲，编译器可能会注意到您正在用一个新值替换一个不再需要的值，因此它可以为您进行适当的更新。我不知道目前是否有任何实际的生产就绪编译器能够进行这种优化。

# windows-8 - 如何在 Visual Studio 2012 中使用 Monogame 编译 box2d？

> ID：15749882
> 
> 赞同：0
> 
> 时间：2013-04-01T19:04:04.050
> 
> 标签：windows-8, visual-studio-2012, box2d, xna-4.0, monogame

我正在尝试使用使用 2d 物理引擎的 Monogame 为 Windows 8 创建游戏。我找到了`Box2d`XNA 的端口，但是当我在 Visual Studio 2012 中打开解决方案时，我收到一条消息说

> 此版本的 XNA Game Studio 或此版本的 Visual Studio 不支持 Windows。

我开始为游戏编写一些代码，并想添加一个物理库。有没有人有任何建议如何使用`Box2d`或其他 XNA 物理引擎来完成此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:12:33.923

我设法让 Farseer Physics 与 MonoGame 一起工作。这并不太难，但我确实必须从源代码重新编译它，用 MonoGame 替换 XNA 引用。

我相信它与 Box2D 非常相似。

[http://farseerphysics.codeplex.com/](http://farseerphysics.codeplex.com/)

对不起，我也没有更详细的教程来指点你。

# php - Cakephp 不呈现视图

> ID：15749883
> 
> 赞同：0
> 
> 时间：2013-04-01T19:04:04.813
> 
> 标签：php, cakephp, view, controller, render

我有一个控制器，它不呈现视图（文件存在）。它只是简单地显示一个空白页。

它也只发生在登台服务器上——另外两个开发环境工作正常。

这是代码：

```
function category($catId = null)
{
    if (!isset($catId) || empty($catId)) {

        $this->data['category'] = 'all';
        $this->data['categories'] = $this->ShopCat->find('all',array('order'=>array('ShopCat.title ASC')));

        $this->paginate = array(
            'limit' => 9,
            'order' => array('ShopProd.featured DESC','ShopProd.title ASC')
        );
        $this->data['products'] = $this->paginate('ShopProd');
    } else {
        $catId = (int) $catId;
        $this->ShopCat->id = $catId;
        if (!$this->ShopCat->exists($catId)) $this->cakeError('error404');

        $this->data['category'] = $this->ShopCat->find('first', array('ShopCat.id' => $catId));
        $this->data['categories'] = $this->ShopCat->find('all',array('order'=>array('ShopCat.title ASC')));

        $this->paginate = array(
            'conditions' => array('ShopProd.shop_cat_id' => $catId),
            'limit' => 9
        );
        $this->data['products'] = $this->paginate('ShopProd');
    }
} 
```

为什么这不起作用？因为我没有想法...

**更新**：整个控制器代码运行正常，它只是不渲染任何东西。在其他控制器方法中 - 一切正常，完美运行。

**更新**：问题已解决，感谢大家:) 这是视图文件中的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:51:42.563

您的 $catId 将永远存在。您已在函数中声明。

如果要更新你的第一个可能更有用

如果（空（$catId））{...}

* * *

您是否在控制器中导入了另一个模型？比如： $uses = array('ShopCat', 'ShopProd');

或在 $this->find 之前使用 App::import('Model', 'ShopCat')

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-01T20:12:33.313

想通了 - 视图文件中有错误。

# c# - 从 IEnumerable 中删除项目

> ID：15749889
> 
> 赞同：1
> 
> 时间：2013-04-01T19:04:19.787
> 
> 标签：c#

我从复选框列表中选择了字符串类型的 IEnumerable，如下所示：

```
var list1 = chkboxlist.Items.Cast<ListItem>().Where(item => item.Selected == true).Select(item => item.Value);

if (list1.Contains("4"))
{
    //then remove that item from the list like

    for (int i = list1.Count() - 1; i >= 0; i--)
    {
        if (list1.ElementAt(i) == "4") list1.ToList().RemoveAt(i);
    }
} 
```

但项目仍然存在于该列表中。它没有被删除。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T19:06:26.667

您正在调用`ToList()`which 创建一个*新*列表，该列表是该序列的副本，然后您将其从该列表中删除......但是您基本上是在丢弃该列表。

您应该将原始序列转换为列表，*然后*删除不需要的值...或者您可以使用`Except`以下方法开始：

```
var list1 = chkboxlist.Items
                      .Cast<ListItem>()
                      .Where(item => item.Selected)
                      .Select(item => item.Value)
                      .Except(new[] { "4" }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T19:06:35.753

如果您将枚举预先转换为列表，则可以删除该项目：

```
var list1 = chkboxlist.Items.Cast<ListItem>()
                      .Where(item => item.Selected == true)
                      .Select(item => item.Value)
                      .ToList(); 
```

话虽如此，您可以先排除该项目：

```
var list1 = chkboxlist.Items.Cast<ListItem>()
                      .Where(item => item.Selected == true && item.Value != "4")
                      .Select(item => item.Value)
                      .ToList(); 
```

# .net - .net 4 升级后无法加载 404 页面

> ID：15749892
> 
> 赞同：0
> 
> 时间：2013-04-01T19:04:35.873
> 
> 标签：.net, iis, http-status-code-404, sitecore

我有一个问题，我的 404 页面没有加载到我们的 CMS 中，我意识到它在那些 404 页面的代码中出现了一行。

即 Response.StatusCode = 0x194

因此，当我加载 404 时，我得到了老式的 404 页面

404 - 找不到文件或目录。您要查找的资源可能已被删除、名称已更改或暂时不可用。

我想要的是从我的 cms 中显示的 404 页的实际内容。所以我认为这与这条线有关。

Response.StatusCode = 0x194;

知道这条线应该做什么，为什么这会阻止内容加载，而是显示 iis 404 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:41:22.403

尝试将[HttpResponse.TrySkipIisCustomErrors](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.tryskipiiscustomerrors.aspx)属性设置为 True，同时设置 Response.StatusCode。

# c# - 在下次登录期间记住首选项的应用程序

> ID：15749896
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:04:45.597
> 
> 标签：c#

我的 Simple C# 应用程序包含一个设置窗口。它实际上提示设置或重置密码。目前，我正在使用数据库保存这些首选项，并在下次登录时相应地显示它。

我想知道是否有一种简单的方法可以让应用程序在我们下次打开它时记住这些偏好。

可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:12:14.307

有几种方法可以保存首选项。您可以使用内置的设置系统`Properties.Settings.Default.yoursetting`，您可以使用IsolatedStorage `System.IO.IsolatedStorage`，您可以简单地将文件写入应用程序目录，您可以通过创建自己的注册表项将其保存在注册表中。如果您想要一些简单的东西，请转到解决方案资源管理器使用内置设置，打开“属性”文件夹并双击 Settings.settings。添加您想要的设置字段，您可以通过`Properties.Settings.Default.yoursetting`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:31:33.993

首先要做的是清楚地了解您的设置：

我将总结一下我通常如何对应用程序的选项进行分类。
我称它们为“DomainOptions”、“MachineOptions”和“UserOptions”

**DomainOptions**是为每个用户以及从他们运行应用程序的任何机器定义应用程序行为的设置。这些设置显然应该存储在共享数据库中，并且只有有限数量的用户应该能够修改它们（即 Web 服务的 uri、应用程序数据的共享文件夹、当地法规要求的固定税值等等)

**ApplicationOptions**是定义应用程序在特定机器启动时的行为的设置。例如，考虑一台具有 VPN 连接并且需要在运行应用程序之前进行身份验证的机器。这些设置可以存储在 app.config 或其他本地存储中（不惜一切代价避免使用 REGISTRY），但请记住，如果您需要在运行时更改这些值，则不能将它们写入应用程序的配置文件中部分，因为它在运行时只读。在这种情况下，我建议编写您自己的类来将某种 XML 文件存储在您的公共应用程序数据目录中（Environment.SpecialFolder.CommonApplicationData + yourappfolder）

**UserOptions**是每个用户都可以个性化的设置，例如颜色、窗口位置、可访问性参数等。这些可以通过配置文件（用户部分）轻松存储，因为每个用户都可以修改它们。但是，如果您还有一个类来存储 ApplicationOptions，那么实现一个变体将这些设置存储在本地应用程序数据中是微不足道的。(Environment.SpecialFolder.ApplicationData + yourappfolder)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:32:27.707

如果这是一个正常的偏好，或者如果你真的不关心是否有人可以读取用户的凭据并使用它，那么将它存储在某个配置文件中就可以了。您还可以选择加密凭据并将其存储在某个位置。但是，我宁愿使用 Windows 的内置凭证管理器来存储登录信息，就像 TFS 一样。

“控制面板\所有控制面板项\凭据管理器”

[在凭据管理器服务中存储凭据](https://stackoverflow.com/questions/2394721/storing-credentials-in-credential-manager-service)

# jakarta-ee - 集群 EJB 在 JBoss AS 7 中不平衡

> ID：15749897
> 
> 赞同：4
> 
> 时间：2013-04-01T19:04:45.757
> 
> 标签：jakarta-ee, ejb, cluster-computing, jboss7.x, load-balancing

我已经成功设置了一个包含 2 个 JBoss AS 7 实例的集群，并部署了以下 SLSB：

```
@Stateless
@Remote(TestEJBRemote.class)
@Clustered
public class TestEJB implements TestEJBRemote {
  private static final long serialVersionUID = 1L;
  private static final Logger logger = Logger.getLogger(...);

  @Override
  public void test() {
    String nodeName = System.getProperty("jboss.node.name");
    logger.info(nodeName);
  }
}
```

从日志文件中我可以看到 bean 已正确部署在集群上。然后，在客户端，我创建了许多线程来查找和调用`TestEJB`. 但是，似乎所有实例最终都在同一个节点中。

这是“jndi.properties”文件：

```
java.naming.factory.url.pkgs=org.jboss.ejb.client.naming
```

和“jboss-ejb-client.properties”：

```
endpoint.name=client-endpoint
remote.connectionprovider.create.options.org.xnio.Options.SSL_ENABLED=false

remote.connections=default
remote.connection.default.host=192.168.0.1
remote.connection.default.port=4447
remote.connection.default.connect.options.org.xnio.Options.SASL_POLICY_NOANONYMOUS=false
remote.connection.default.username=user
remote.connection.default.password=pass

remote.clusters=ejb
remote.cluster.ejb.clusternode.selector=org.jboss.ejb.client.RandomClusterNodeSelector
```

在客户端我做`final InitialContext ctx = new InitialContext();`然后在每个线程中形成：

```
String name = "ejb:/test//TestEJB!" + TestEJBRemote.class.getName();
TestEJBRemote remote = (TestEJBRemote) ctx.lookup(name);
remote.test();
```

我做错了什么？

**更新**

如果我只指定连接列表中的第二个节点，我会得到：

`java.lang.IllegalStateException: No EJB receiver available for handling [...] combination for invocation context org.jboss.ejb.client.EJBClientInvoc ationContext`

所以可能这个问题需要首先解决......

**更新 2**

我最终通过在从节点中设置*应用程序用户解决了这个问题。*之前，我尝试以管理用户身份连接，但没有成功。

只要我在连接列表中指定一个从节点（在“jboss-ejb-client.properties”中），负载平衡现在也可以正常工作。如果我指定主节点，所有 EJB 将仅在该节点中结束。然而，这个解决方案对我来说已经足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:12:49.217

看起来您需要在属性构建中指定两个服务器。此外，JBoss 7.1 中似乎有一个但是，因此您应该至少使用 7.2，[请查看](https://issues.jboss.org/browse/AS7-4223)以下示例的链接：

```
Properties properties = new Properties();
properties.put("endpoint.name", "farecompare-client-endpoint");
properties.put("remote.connectionprovider.create.options.org.xnio.Options.SSL_ENABLED", "false");
properties.put("remote.connections", "cmc5101,cmc5102");
properties.put("remote.connection.cmc5101.host", "cmc5-101");
properties.put("remote.connection.cmc5101.port", "4447");
properties.put("remote.connection.cmc5101.connect.options.org.xnio.Options.SASL_POLICY_NOANONYMOUS", "false");
properties.put("remote.connection.cmc5102.host", "cmc5-102");
properties.put("remote.connection.cmc5102.port", "4447");
properties.put("remote.connection.cmc5102.connect.options.org.xnio.Options.SASL_POLICY_NOANONYMOUS", "false");
PropertiesBasedEJBClientConfiguration configuration = new PropertiesBasedEJBClientConfiguration(properties);
final ContextSelector ejbClientContextSelector = new ConfigBasedEJBClientContextSelector(configuration);
final ContextSelector previousSelector = EJBClientContext.setSelector(ejbClientContextSelector);
final Hashtable jndiProperties = new Hashtable();
jndiProperties.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");
final Context context = new InitialContext(jndiProperties); 
```

此[链接](https://docs.jboss.org/author/display/AS71/Clustered+EJBs)也可能会有所帮助。另一个[有用的链接](https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI)。

# ios - IOS dispatch_get_main_queue() 被多次调用

> ID：15749902
> 
> 赞同：0
> 
> 时间：2013-04-01T19:04:55.203
> 
> 标签：ios, objective-c, objective-c-blocks, reachability

我测试互联网连接，`Reachability`当 `dispatch_async(dispatch_get_main_queue()` 我测试以下代码时它可以工作，但它被多次调用。

家长：

```
@protocol RootViewDelegate <NSObject>
@optional
-(void)internetIsDownGoToRoot;
@end
- (void)testInternetConnection
{
    internetReachableFoo = [ReachabilityTony reachabilityWithHostname:@"www.google.com"];

    __weak typeof(self) weakSelf = self;
    // Internet is reachable
    internetReachableFoo.reachableBlock = ^(ReachabilityTony *reach)
    {
        // Update the UI on the main thread
        dispatch_async(dispatch_get_main_queue(), ^{
            NSLog(@"Yayyy, we have the interwebs!");
            [weakSelf sendLoginRequest];
        });
    };
        // Internet is not reachable
internetReachableFoo.unreachableBlock = ^(ReachabilityTony *reach)
{
    // Update the UI on the main thread
    dispatch_async(dispatch_get_main_queue(), ^{
        NSLog(@"Someone broke the internet :(");
        CloudConnection *sharedInstance=[CloudConnection  sharedInstance];
        sharedInstance.isUserLoggedIN=NO;
        //update login button
        [weakSelf updateButtons];
        [weakSelf notifyChild];

    });
};
    [internetReachableFoo startNotifier];
}
-(void)viewDidAppear:(BOOL)animated
{
[self testInternetConnection];
 }
-(void)viewWillDisappear:(BOOL)animated
{
    internetReachableFoo= nil;

}
//notify childs no connection come back to root
-(void) notifyChild
{
    [delegate internetIsDownGoToRoot];

} 
```

孩子：

```
-(void)viewDidAppear:(BOOL)animated
{

    NSArray *viewControllers =     self.navigationController.viewControllers;
    int count = [viewControllers count];
    id previousController = [viewControllers objectAtIndex:count - 2];
    RootViewController *rvc= previousController;
    rvc.delegate=self;

}

-(void)internetIsDownGoToRoot
{
    //internet connection is no avaliable go to root
    [self.navigationController popToRootViewControllerAnimated:YES];

} 
```

所以这是父视图，可以说我推送了 5 次子视图并关闭了互联网。我在 nslog 上看到

```
Someone broke the internet :(
Someone broke the internet :(
Someone broke the internet :(
Someone broke the internet :(
Someone broke the internet :( 
```

如您所见，我已添加`internetReachableFoo= nil;`，但我没有更改任何内容。

上面的代码是怎么回事，为什么会被多次调用？

使用此块可能存在哪些危险？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:14:35.170

它被多次调用，因为每次弹出孩子时，根都会获取`-viewDidAppear:`并调用`-testInternetConnection`，这会重新运行可达性测试。

**更新：**好的，你稍微改变了你的问题。您收到 5 条“确实消失”消息的原因是因为您从未停止通知程序。只要它在运行，可达性就会一直保持生命，所以取消你的引用并不会杀死它。您需要`[internetReachableFoo stopNotifier]`在取消之前明确说明。

# servicestack - 在 ServiceStack Web 服务中设置公共属性

> ID：15749904
> 
> 赞同：2
> 
> 时间：2013-04-01T19:04:57.610
> 
> 标签：servicestack

我正在尝试使用 Sqlite 为 ServiceStack 服务编写单元测试。由于 Sqlite 不支持存储过程，我创建了“ServiceCommand”类型的公共属性，该属性将命令文本和命令类型作为输入。默认情况下，它被配置为运行存储过程，并且在编写单元测试用例时，我在调用如下方法之前将 SelectCommand 属性重新分配给针对 sqlite 的 sql 查询`Any()`。所有测试用例都可以正常工作。

```
var request = new CustomerRequest() { name = "alfki"  };
var service = new CustomerService(InMemoryTestDatabase.OpenDbConnection());
service.SelectCommand = new ServiceCommand() { SQL = "SELECT * FROM customers where customerid = {0}" };
var result = service.Any(request); 
```

但是根据这个[线程](https://stackoverflow.com/questions/15745074/how-to-assign-default-value-to-a-property)，在解析引用时，IOC 将 CustomerService 的公共属性设置为 null，因此 SelectCommand 在`Any()`方法中为 null，从而导致对象引用错误。通过将属性设置为受保护、私有、内部或静态，我将无法运行单元测试。

```
public class CustomerService : Service
{
  private readonly IDbConnection _dbConnection;
  public ServiceCommand SelectCommand {get;set;}

  public CustomerService(IDBConnection dbConnection)
  {        
         _dbConnection = dbConnection;  //injected successfully
         SelectCommand =  new ServiceCommand(){ SQL = "sp_getcustomers",
            CommandType = CommandType.StoredProcedure};          
  }

  public Customer Any(CustomerRequest request)
  {
        //Select command is not accessible here.

  }
}

[Route("/customers")]
public class CustomerRequest
{
    public string name { get; set; }
} 
```

**服务命令**

```
public class ServiceCommand
{
    public string SQL { get; set; }        
    public CommandType CommandType { get; set; }

    public ServiceCommand()
    {
        CommandType = CommandType.Text;
    }
} 
```

为了能够同时运行测试用例和服务，我修改`Any()`了方法来实例化 ServiceCommand（如果它为空）。我想知道这是要走的路还是更好的选择。

```
public class CustomerService : Service
{
  private readonly IDbConnection _dbConnection; // injected successfully
  public ServiceCommand SelectCommand {get;set;}

  public CustomerService(IDBConnection dbConnection)
  {        
         _dbConnection = dbConnection;  //injected successfully         
  }

  public Customer Any(CustomerRequest request)
  {
        SelectCommand = SelectCommand ?? new ServiceCommand() { SQL = "sp_getCustomers",CommandType = CommandType.StoredProcedure };

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:36:25.923

由于[ServiceStack](http://www.servicestack.net/)服务将为所有公共属性注入已注册的 IOC 属性，因此它将覆盖您在构造函数中设置的值，因此您不能在不将其注册到 IOC 的情况下将其设为公共属性，因为它将被覆盖为 null。

鉴于此，一些可能的选择是：

### 使其成为公共领域

```
public class CustomerService : Service
{
    public ServiceCommand SelectCommand = new ServiceCommand { 
       SQL = "sp_getcustomers", 
       CommandType = CommandType.StoredProcedure };
    ...
} 
```

### 使用 setter 注入只读属性

```
service.SetSelectCommand(
  new ServiceCommand { SQL = "SELECT * FROM customers where customerid = {0}" }); 
```

### 在您的 IOC 中注册并在您的构造函数中指定它

```
container.Register(new ServiceCommand { 
   SQL = "sp_getcustomers", 
   CommandType = CommandType.StoredProcedure }); 
```

并将构造函数更改为：

```
public CustomerService(IDBConnection dbConnection, ServiceCommand serviceCommand)
{        
    _dbConnection = dbConnection; 
    _serviceCommand = serviceCommand;    
} 
```

# rsync - Rsync 因环境变量而失败

> ID：15749906
> 
> 赞同：1
> 
> 时间：2013-04-01T19:05:00.000
> 
> 标签：rsync, env

我正在使用以下脚本来同步回文件。如果我在 shell 上一一执行，它就可以工作。但是当我用在脚本中执行它们时，它给出了错误

"rsync: link_stat "/home/tan/testnfs#015" 失败：没有这样的文件或目录 (2)"

# 015 不在脚本中，我已经编辑了脚本并验证没有空格或字符留下。但是有同样的问题。

```
#!/bin/bash
#========================================
#Environment varibale settings
#========================================
username=test
codedir=/home/tan/testnfs
nfs=10.100.200.4::test
adminemail=backup@tan.com
errorlog=/home/tan/backuperror_log.txt
dat=$(date)
rm -fr $errorlog
echo $dat 2>&1>> $errorlog
echo $nfsserver
echo ========== Before rsync =================
rsync --stats -vr --exclude "*.png" --exclude "*.jpg" --exclude "*.jpeg" --exclude "*.zip" --exclude "*.pdf" --exclude "*.doc" --exclude "*.csv" --exclude "*.swf" $codedir $nfs
if [ $? = 0 ] then
mail -s "$username sync--complete" $adminemail < $errorlog
else
mail -s "$username sync--Incomplete" $adminemail < $errorlog
fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T17:10:10.257

我已经弄清楚了。我在 Windows 上编辑脚本，它正在添加它的行终止符。我已经用记事本++将它保存为linux文件并且它有效

# c - 是否可以从终端应用程序更改鼠标图标？

> ID：15749924
> 
> 赞同：0
> 
> 时间：2013-04-01T19:05:57.407
> 
> 标签：c, ncurses

标题几乎说明了一切：我想知道是否可以更改鼠标光标图标以响应来自 ncurses 库或其他库的终端应用程序（例如，单击事件）中的反馈？

例如：我在 X 下运行 xterm，并在该 xterm 内运行一个 curses 应用程序。我可能会也可能不会被 sshed 到另一个盒子里。

用户单击我的光标应用程序的元素 - 是否可以将鼠标光标图标从条形更改为加号以响应单击？

这里有一些信息，但我想要更完整的资源：

[NCurses 中的鼠标移动事件](https://stackoverflow.com/questions/7462850/mouse-movement-events-in-ncurses?rq=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:18:14.603

我不相信它是。ncurses 可以[从鼠标读取事件，](http://invisible-island.net/ncurses/man/curs_mouse.3x.html)但实际上不能更改鼠标光标设置。终端将鼠标移动和单击作为[转义序列](http://invisible-island.net/xterm/ctlseqs/ctlseqs.html#Mouse%20Tracking)发送到 ncurses 程序。

某些终端（例如 putty）会在区域可单击时将光标更改为箭头。否则，将显示一个文本选择光标。但我不认为这是可以通过转义序列控制的。

# java - 未能创建 google+ 客户端对象以检索 Java 中的活动

> ID：15749926
> 
> 赞同：2
> 
> 时间：2013-04-01T19:06:14.400
> 
> 标签：java, google-api, google-plus, google-api-java-client, google-api-client

我是 Google+ API 和 Java-Client API 的新手。所以请耐心等待我。

我试图使用 Java-Client 和 G+ APIs 1.14 检索我的 google+ 活动，但我未能创建客户端对象，我已经尝试了一天但我没有运气自己解决它所以我来这里寻求帮助。

我的代码是：

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import com.google.api.client.auth.oauth2.Credential;
import com.google.api.client.googleapis.auth.oauth2.GoogleCredential;
import com.google.api.client.googleapis.services.CommonGoogleClientRequestInitializer;
import com.google.api.client.googleapis.services.GoogleClientRequestInitializer;
import com.google.api.client.googleapis.services.json.CommonGoogleJsonClientRequestInitializer;
import com.google.api.client.http.HttpRequestInitializer;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.gson.GsonFactory;
import com.google.api.services.plus.Plus;
import com.google.api.services.plus.model.Activity;
import com.google.api.services.plus.model.ActivityFeed;
import com.google.api.services.plus.Plus.Builder;

public class GooglePlusService {

      /**
       * google plus service acess stub
       */
      private Plus plusSvc;

      /**
       * google plus api key
       */
      private String GooglePlusAPIKey = "MY key"; //<-- YOUR KEY GOES HERE

      /**
       * connect to the google plus service
       */
      public GooglePlusService() {

        setupTransport();

      }

      public List<Activity> getActivityList(String userid) throws IOException {

        List<Activity> retval = new ArrayList<Activity>();

        Plus.Activities.List listActivities =
            plusSvc.activities().list(userid, "public");

        listActivities.setMaxResults(100L);

        // get the 1st page of activity objects
        ActivityFeed activityFeed = listActivities.execute();

        // unwrap the request and extract the pieces we want
        List<Activity> pageOfActivities = activityFeed.getItems();

        // loop through until we arrive at an empty page
        while (pageOfActivities != null) {
          for (Activity activity : pageOfActivities) {
            retval.add(activity);
            System.out.println("ID " + activity.getId() + " Content: " +
                               activity.getObject().getContent());
          }

          // we will know we are on the last page when the next page token
          // is null (in which case, break).
          if (activityFeed.getNextPageToken() == null) {
            break;
          }

          // prepare to request the next page of activities
          listActivities.setPageToken(activityFeed.getNextPageToken());

          // execute and process the next page request
          activityFeed = listActivities.execute();
          pageOfActivities = activityFeed.getItems();
        }

        return retval;

      }

      /**
       * google plus service stub object
       */
      public Plus getPlusSvc() {
        return plusSvc;
      }

      private void setupTransport() {

          /*
plusSvc = new Plus(new NetHttpTransport(),
                       new GsonFactory());
    plusSvc.setKey(GooglePlusAPIKey);

                */

          HttpRequestInitializer initializer =  (HttpRequestInitializer) new  CommonGoogleClientRequestInitializer("GooglePlusAPIKey"); 

          plusSvc = new Plus(new NetHttpTransport(),  new GsonFactory(), initializer);

          GoogleClientRequestInitializer KEY_INITIALIZER = new CommonGoogleJsonClientRequestInitializer(GooglePlusAPIKey);     
      }

} 
```

我的问题是在 setupTransport() 部分，我未能创建客户端对象，因为我不知道分配给 httpRequestInitializer 的内容：

Plus(HttpTransport 传输,JsonFactory jsonFactory,HttpRequestInitializer httpRequestInitializer)

我试过： HttpRequestInitializer initializer = (HttpRequestInitializer)new CommonGoogleClientRequestInitializer("GooglePlusAPIKey");
但它给出了无法转换 CommonGoogleClientRequestInitializer 的错误

我试过： GoogleClientRequestInitializer KEY_INITIALIZER = new CommonGoogleJsonClientRequestInitializer(GooglePlusAPIKey); 但是不知道之后该怎么办。

我需要了解如何使用 API 的 http 请求初始化程序

我真的需要帮助，我很感激。

等待回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:46:03.940

HttpRequestInitializer 实例旨在成为 GoogleCredential 对象，如[PhotoHunt 示例](https://github.com/vicfryzel/gplus-photohunt-server-java/blob/master/src/com/google/plus/samples/photohunt/ConnectServlet.java#L234)中所示。GoogleCredential 对象将在发送请求之前对 Plus 服务的每个请求设置相关的 Authorization 标头。

创建 GoogleCredential 对象并在 Plus.Builder 中使用它的相关行是：

```
GoogleCredential credential = new GoogleCredential.Builder()
    .setJsonFactory(JSON_FACTORY).setTransport(TRANSPORT)
    .setClientSecrets(CLIENT_ID, CLIENT_SECRET).build();
GoogleTokenResponse tokenFromExchange = exchangeCode(accessToken);
credential.setFromTokenResponse(tokenFromExchange);
Plus plus = new Plus.Builder(TRANSPORT, JSON_FACTORY, credential).build(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:49:15.830

非常感谢，问题解决了:))..

这是解决方案：

```
 GoogleCredential credential = new GoogleCredential();
            //plusSvc = new Plus(new NetHttpTransport(),  new GsonFactory(), credential);
            plusSvc =  new Plus.Builder(new NetHttpTransport(),  new GsonFactory(), credential)
            .setApplicationName("Meetrbus/1.0")
            .setHttpRequestInitializer(credential)
            .setPlusRequestInitializer(
                    new PlusRequestInitializer(GooglePlusAPIKey) ).build(); 
```

# c# - 数组中的所有元素是否满足由另一个字符串数组确定的特定条件

> ID：15749935
> 
> 赞同：0
> 
> 时间：2013-04-01T19:06:37.923
> 
> 标签：c#, arrays, algorithm

很抱歉标题，但我不知道能简要解释一下我需要做什么。

我有这个预定义的数组：

```
string[] SkippedAreasArray = new string[] {"A", "B", "C", "D", "E", "F", "G",
            "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q"}; 
```

我们可以调用每一个字母`Area`。我们有一个变量`NumberOfAreas`，它保存一个从 0(null) 到 17 的整数值。这个值的含义是 this。如果`NumberOfAreas`= 5 那么我们有 string `"A", "B", "C", "D", "E"`。如果`NumberOfAreas`= 3，那么我们有`"A", "B", "C"`，依此类推。该字符串始终以字母顺序开头`"A"`并遵循字母顺序。

用户输入是所谓的`SkippedAreas`数组。它可以包含随机字母，不能重复且在范围内`A-Q`。

想法是什么 - 如果我们有`SkippedAreas`数组 =`"A", "C"`和`NumberOfAreas`= 5，或者我们必须通过跳过字母并添加接下来的两个字母`"A", "B", "C", "D", "E"`来保持`NumberOfAreas`等于 5，这样就变成了 - 。`"A"``"C"``NumberOfAreas``"B", "D", "E", "F", "G"`

我们只能跳过已经在范围内的字母（区域），`NumerOfAreas`例如，如果我们得到基本示例 when `NumerOfAreas`= 5 并且字符串 is`"A", "B", "C", "D", "E"`我们只能跳过这 5 个字母之一的字母。但是，通过跳过任何字母，我们打开了对下一行的访问权限，因此如果我们第一次跳过`"A"`，我们可以自由地`"F"`用于下一轮并且如果`"F"`是用户输入字符串的一部分，`SkippedAreas`那么跳过`"F"`和打开是合法的`"G"`。

我需要一个能够验证用户输入的算法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T19:10:39.633

使用 LINQ

```
var FilteredAreas = 
    ListOfAreas.Where(a => !SkippedAreas.Contains(a)).Take(NumberOfAreas); 
```

# php - PHP/MySQL 使用变量在字符串中搜索结果

> ID：15749941
> 
> 赞同：0
> 
> 时间：2013-04-01T19:06:57.140
> 
> 标签：php, mysql, sql-like

我有一个不提供结果的查询：

```
$name = "John Smith";

$query = "SELECT * FROM my_table WHERE lname LIKE '%$name%' AND fname LIKE '%$name%'"; 
```

数据库中的 lname 将被列为 Smith 数据库中的 fname 可能会被列为 John S.

有些条目的名字后面有一个中间的首字母，有些则没有。

此外，名称在我查询此信息的页面上作为一个字符串提取，而不是名字和姓氏字符串。现有代码的限制。

所以我试图在字符串 $name 中搜索姓氏以及名字。我假设我做错了。这可能吗？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:22:05.113

这个怎么样（如果我理解正确的话）：

```
SELECT *
FROM my_table
WHERE '$name' like concat(fname,' %')
  AND '$name' like concat('% ',lname) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/8bb87/2)

要搜索 fname 字段，它会在要搜索的全名之后连接一个“%”。并且要搜索 lname 字段，它会在全名之前连接一个 '% '。

*编辑：马里奥的好评论略有变化，使用`REGEXP`：*

```
SELECT *, CONCAT_WS(' ', fname, lname)
FROM my_table
WHERE  CONCAT_WS(' ', fname, lname) REGEXP REPLACE('$name',' ', '.*') 
```

[更多小提琴](http://sqlfiddle.com/#!2/8bb87/6)

既然你提到你不能分解参数（为什么？），这使用 replace 相应地替换空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:21:21.397

我不明白到底是什么问题，但下一个查询可以帮助你：

```
SELECT * FROM my_table WHERE '$name' LIKE CONCAT('%', lname ,'%') and '$name' LIKE         CONCAT('%',fname ,'%') 
```

如果您需要检查 lname 是否包含在 $name 中，则您显示的查询不正确，而您正在检查相反的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:25:56.647

我有解决方案..你可以试试这样

```
$name = "John Smith";

$query = "SELECT * FROM my_table WHERE fname LIKE substring_index(".$name.",' ',1) AND fname LIKE substring_index(".$name.",' ',-1)"; 
```

# android - 在线性布局中以相等的间距水平对齐按钮

> ID：15749942
> 
> 赞同：5
> 
> 时间：2013-04-01T19:06:57.713
> 
> 标签：android, android-linearlayout

我正在尝试制作一个线性布局，其中 5 个按钮以相等的间距水平放置，但所有按钮的大小（宽度）应该仅为 40dp。

我试过这个：

```
<LinearLayout   android:id="@+id/button_layout"
                    android:background="#DCE1DC"
                    android:orientation="horizontal"
                    android:weightSum="5"
                    android:layout_width="fill_parent"
                    android:layout_height="70dip">

        <Button     android:id="@+id/button_A"
                    android:layout_weight="1"
                    android:layout_height="60dp"
                    android:layout_width="0dp"
                    android:layout_gravity="center_vertical"
                    android:layout_marginLeft="30dp"/>

        <Button     android:id="@+id/button_B"
                    android:layout_weight="1"
                    android:layout_height="60dp"
                    android:layout_width="0dp"
                    android:layout_gravity="center_vertical"
                    android:layout_marginLeft="30dp"/>

        <Button     android:id="@+id/button_C"
                    android:layout_weight="1"
                    android:layout_height="60dp"
                    android:layout_width="0dp"
                    android:layout_gravity="center_vertical"
                    android:layout_marginLeft="30dp"/>

        <Button     android:id="@+id/button_D"
                    android:layout_weight="1"
                    android:layout_height="60dp"
                    android:layout_width="0dp"
                    android:layout_gravity="center_vertical"
                    android:layout_marginLeft="30dp"/>

        <Button     android:id="@+id/button_E"
                    android:layout_weight="1"
                    android:layout_height="60dp"
                    android:layout_width="0dp"
                    android:layout_gravity="center_vertical"
                    android:layout_marginRight="30dp"
                    android:layout_marginLeft="30dp"/>

    </LinearLayout> 
```

它的工作，但我需要按钮宽度更小，如何实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:24:15.730

我想这将解决您的查询...

正如你所说你正在使用 Linearlayout 那么你可以做类似的事情......

```
<LinearLayout
android:layout_width="match_parent"
android:layout_height="yourheight"
android:orientation="horizontal">
<Button 
android:id="@+id/button_name"
android:weight="1"
android:layout_height="wrap_content"
android:layout_width="match_parent" />

<Button 
android:id="@+id/button_name"
android:weight="1"
android:layout_height="wrap_content"
android:layout_width="match_parent" />

//add as many buttons as you want 

<Button 
android:id="@+id/button_name"
android:weight="1"
android:layout_height="wrap_content"
android:layout_width="match_parent" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:11:05.020

对于每个按钮，更改此：

```
android:layout_width="0dp" 
```

对此：

```
android:layout_width="40dp" 
```

# c - C中如何跟踪动态内存的大小

> ID：15749944
> 
> 赞同：1
> 
> 时间：2013-04-01T19:07:02.533
> 
> 标签：c, malloc, free, dynamic-memory-allocation, calloc

我知道使用`calloc()`and`malloc()`将在堆上分配特定数量的内存并返回一个指向分配开头的指针。

我也知道这`free( poinerVar)`将取消分配（释放分配的内存）。但是，我无法想象 free() 如何知道要取消分配的内存量。诸如 C#、Java 之类的托管语言会跟踪它的垃圾回收对象，但 C 肯定不会（据我所知）。

在内存管理级别发生了什么，它允许使用 free 取消分配内存并仅将指针变量传递给它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:10:14.953

这里的常用方法是内存分配函数在实际内存块之前存储有关已分配空间的元数据。

这样，`free()`就可以在实际分配的块之前读取内存，并且可以找出它实际上应该释放多少内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:12:26.173

C 标准没有说明malloc/free*如何在幕后工作。*只是外在的行为。如果你真的想了解它，你需要看一个具体的实现。查看一个开源 libc，比​​如 GNU/gcc 使用的那个。

# ruby-on-rails - ActiveScaffold 搜索连接表？

> ID：15749946
> 
> 赞同：0
> 
> 时间：2013-04-01T19:07:12.857
> 
> 标签：ruby-on-rails, activescaffold

我在 ActiveScaffold 工作中进行了一般字段搜索。我不确定如何进行更复杂的搜索。

我有两个表，帐户和用户，我想搜索电子邮件并返回匹配帐户的列表。email 字段在 User 中，Account has_many :users。

我无法思考查询应该如何发生。理想情况下，我想做这样的事情：

`Account.where(email: 'search_term').all`

或者

`User.where(email: 'search_term').includes(:account).all`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:09:46.170

如果要从一个表中搜索数据并从（包括）另一个表中返回结果，只需将这些外部列添加为虚拟列：

在用户控制器中：

```
active_scaffold :user do |conf|
conf.search.columns << :email
conf.list.columns << :account
#...
end 
```

就是这样，没有查询:)

如果帐户列结果出现像 <#23423.. 这样的代码，这是因为 Active Scaffold 无法告诉如何描述该类记录，所以你告诉它你在模型中想要的方式：

```
class Account << ActiveRecord::Base
....
def to_label
 "cod: #{account_number}"
end 
```

# jquery - 如果浏览器是 msie 8 及以下，如何在 jQuery 的最新版本中检测？

> ID：15749949
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:07:19.527
> 
> 标签：jquery, browser, internet-explorer-8

我正在使用 jQuery 1.x 版本的最新版本。我相信他们`$.browser`在最新版本中删除了支持。那么我怎样才能通过 jQuery 做到这一点呢？还是我的信息不正确？

我只需要针对 MSIE 8 及以下版本的脚本！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:11:39.253

取自[http://jquery.com/upgrade-guide/1.9/](http://jquery.com/upgrade-guide/1.9/)

> 该`jQuery.browser()`方法自 jQuery 1.3 以来已被弃用，并在 1.9 中被删除。如果需要，它可以作为 jQuery Migrate 插件的一部分使用。我们建议将特征检测与 Modernizr 等库一起使用。

但是，我强烈建议使用特征检测而不是浏览器嗅探来根据浏览器支持的条件执行代码。如果你想了解更多，这里有[一篇有趣的文章](http://jibbering.com/faq/notes/detect-browser/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:11:59.083

如果用户使用的是 IE 8 或更低版本，您可以在标记中使用条件语句来加载特定版本的 jQuery。

```
<!--[if lt IE 9]>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.X.X/jquery.min.js"></script>
<![endif]--> 
```

这将执行您要求做的事情，但正如这里的其他人所说，这并不是处理问题的最佳方法。检测该功能或使用类似 moderizer 的库可能是您最好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:13:34.843

> 对于您自己项目的功能检测需求，我们强烈建议使用诸如 Modernizr 之类的外部库，而不是依赖 jQuery.support 中的属性。

参考：[http ://api.jquery.com/jQuery.support/#entry-longdesc](http://api.jquery.com/jQuery.support/#entry-longdesc)

# c# - 使用文本框计算器的复杂操作

> ID：15749955
> 
> 赞同：-1
> 
> 时间：2013-04-01T19:07:41.580
> 
> 标签：c#, windows-phone-7

我不是 wp7/c# 编程的专家。我正在尝试创建一个化合物计算器。该应用程序基于文本框计算器工作......我用这段代码做了 3 个文本框：

```
 {
           {
              {
                  try
                    {

                    double a = Convert.ToDouble(textBox14.Text);
                    double d = Convert.ToDouble(textBox15.Text);
                    double g = Convert.ToDouble(textBox16.Text);

                    textBox17.Text = (a + d + g).ToString();
                    }
                    catch
                    {
                    }
                }
            }
        } 
```

在我想在相同的代码中创建一个更复杂的操作，但有更多的文本框之后，我尝试了：

```
 {
        {
            {
                try
                {
                    double a = Convert.ToDouble(textBox14.Text);
                    double d = Convert.ToDouble(textBox15.Text);
                    double g = Convert.ToDouble(textBox16.Text);
                    double b = Convert.ToDouble(textBox4.Text);
                    double h = Convert.ToDouble(textBox2.Text);
                    double k = Convert.ToDouble(textBox18.Text);
                    double l = Convert.ToDouble(textBox17.Text);
                    double m = Convert.ToDouble(textBox38.Text);

                    textBox17.Text = (a + d + g).ToString();
                    textBox19.Text = (h * a / k - l * b / k - m).ToString();
                }
                catch
                {
                }
            }
        }
    } 
```

有了这个我想要（在总和之后并使用这个......观看“l”和textbox17）执行第二个操作......但不起作用（我将代码放在每个使用的文本框中）。有没有办法（甚至替代）来创建这样的操作？如果是，我该怎么做？请帮帮我！

编辑

我尝试过这种方式，效果很好，感谢 Alex Ovechkin：

```
 textBox19.Text = ((h * a / k) - (l * b / K ) - m).ToString(); 
```

我不知道 C# 在没有这个数学规则的情况下执行直线运算：先乘除，后加减。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:34:41.100

我猜你已经被零除，你捕捉到一个异常但什么都不做，所以你的文本框中什么都没有显示

# python - Gephi 脚本控制台不显示节点

> ID：15749956
> 
> 赞同：3
> 
> 时间：2013-04-01T19:07:43.473
> 
> 标签：python, jython, gephi

我是否遗漏了什么或者这是 Gephi 脚本控制台中的一个奇怪的错误？

控制台显示边缘但没有节点

例如

```
>>> len(g.edges)
4314
>>> len(g.nodes)
1

>>> g.edges
set([e8926, e8794, e7024 ......])
>>> g.nodes
set([None]) 
```

您可以使用Gephi提供的数据集**Power Grid.gml来复制错误。**[例如，我从这里](http://www-personal.umich.edu/~mejn/netdata/)对几个数据集进行了测试，得到了同样的错误。

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T06:40:33.240

有一个名为“Data Table”的插件，当你安装它时，你可以看到你的数据集的结构。我有一个完全一样的问题，我理解节点 id 是一个字符串而不是一个数字。如果您想查看脚本插件在控制台脚本插件中执行 g.nodes() 命令的区别，您可以看到（从“数据表”插件中）新创建的节点的 id 是数字而不是字符串。当你在 Gephi 控制台中执行 g.nodes 或 len(g.nodes) 时，你可以看到新创建的节点。我用这种方式解决它：我安装了一个名为“数据表”的插件，在“导出表”中，选择它，它告诉你需要导出哪些列，你选择任何你想要的但不是Id，然后选择一个分隔符然后按确定它会保存它。创建一个新项目，打开“数据表”插件，然后单击“

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-09T12:52:16.200

现在，在最初的问题两年后，错误仍然存​​在于 Gephi 的 Jython 控制台中的位置：

```
>>> g.nodes
set([None]) 
```

但是，我找到了一种解决方法，可以像这样通过脚本控制台直接操作节点：

```
>>> graph = g.getUnderlyingGraph()
>>> nodes = [node for node in graph.nodes]
>>> nodes
[n0, n1, n2, n3, n4, n5, n6, n7, ... 
```

通过这样做，我能够像这样操作节点属性：

```
>>> node = nodes[0]
>>> attr = node.attributes
>>> value = attr.getValue('attribute_name')
>>> new_value = do_something(value)
>>> attr.setValue('attribute_name', new_value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-18T20:34:35.083

这是我在 python 中编写的一个脚本，如果您在完成 user1290329 在这里所做的操作后无法将边缘恢复原位 [ [https://stackoverflow.com/a/15827459/1645451]](https://stackoverflow.com/a/15827459/1645451])

这基本上会将您的新 gephi 创建的整数 Id 列映射到边缘表。

```
 import pandas as pd

    # Once you have re-imported your CSV, and your ID is an Int, 
    # but your edge table is still messed up
    nodes = pd.read_csv('nodes_table.csv')
    edges = pd.read_csv('edges_table.csv')

    # delete any unnecessary cols
    del edges['Label']

    # Create a dictionary with your Node name as the key, 
    # and its Gephi int Id as the value
    # To do this Set index to be col you want the dict keys to be
    # and the dict values will be col you specifiy in the brackets after 'ie ['Id']
    node_dict = nodes.set_index('Label')['Id'].to_dict()

    # Then use the map function, col you are mapping with should have they keys
    # And will fill with value of key when matched
    # In this case we just over-write the Source and Target cols
    edges['Source'] = edges['Source'].map(node_dict)
    edges['Target'] = edges['Target'].map(node_dict)

    edges.to_csv('edges_formatted_for_gephi.csv', index=False)
    edges.head() 
```

现在在 gephi 数据实验室中，导入电子表格，确保选择边缘选项，然后单击选择“edges_formatted_for_gephi.csv”，取消选中创建缺失节点，您的边缘应该回到您的 gephi 图中。:)

# node.js - Jade Mixin：500 TypeError：无法读取未定义的属性“长度”

> ID：15749963
> 
> 赞同：0
> 
> 时间：2013-04-01T19:08:01.227
> 
> 标签：node.js, pug, templating

我有一个mixin给我带来了麻烦：

```
mixin dialog(title, description, choices)
    form.choices.dialog.row
        legend
            h1 #{title}
            p.description #{description}
        fieldset
            for choice in choices
                label
                    input(type= "radio", name = "choice.name", checked = "checked", required = "required")
                    | choice.name
        div.row.form-actions
            button(type="submit", ) Make Choice 
```

为了调用它，我首先将 mixin 文件包含在这个 mixin 中：

```
import dialog 
```

然后我在创建一个 javascript 变量后使用 mixin：

```
- var investiageUFODialog = [{headerText: "Would you like to investiage the UFO?", description: "Choose whether or not to investigate the UFO."}, {choices: [{name: "Yes"}, {name: "No"}]}]

mixin dialog(investiageUFODialog.headerText, investiageUFODialog.description, investiageUFODialog.choices) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:19:00.133

`investiageUFODialog`如果你想这样使用它就不能是一个数组。只需将其更改为：

```
- var investiageUFODialog = {headerText: "Would you like to investiage the UFO?", description: "Choose whether or not to investigate the UFO.", choices: [{name: "Yes"}, {name: "No"}]} 
```

此外，在您的 mixin 中，您需要编写`name = choice.name`（不带引号）。

# xamarin.ios - Xamarin TableViewCell 选择一个

> ID：15749969
> 
> 赞同：0
> 
> 时间：2013-04-01T19:08:15.853
> 
> 标签：xamarin.ios, xamarin, radio-group, xamarin-studio

我正在尝试使用 Xamarin Studio 制作如下表格视图单元格。

![在此处输入图像描述](https://i.stack.imgur.com/0LZ3z.png)

公共枚举类别
{
旅行，
住宿，
书籍
}

我正在使用 Monotouch.Dialog，但找不到任何元素。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:13:44.933

我猜你正在寻找的是`RadioElement`MonoTouch.Dialog。[您可以在MonoTouch.Dialog 介绍](http://docs.xamarin.com/guides/ios/user_interface/monotouch.dialog)中的 3.1 节中看到一个示例。

从文档中的示例：

```
var root = new RootElement ("Meals") {
    new Section ("Dinner"){
        new RootElement ("Dessert", new RadioGroup ("dessert", 2)) {
            new Section () {
                new RadioElement ("Ice Cream", "dessert"),
                new RadioElement ("Milkshake", "dessert"),
                new RadioElement ("Chocolate Cake", "dessert")
            }
        }
     }
} 
```

在此示例中，您将拥有一个包含一个名为 的根元素的对话框`Meals`。点击此项目时，您将看到一个新对话框，您可以在其中选择一个 RadioElement。`RadioGroup`您为属于一起的元素创建一个，并且`RootElement`您从中启动的元素`RadioGroup`将显示当前选定的值。在第 4.8 节中有更多关于此的信息。提供的链接也是如此。

# sitecore - Sitecore 一次从库中放置多张图片

> ID：15749971
> 
> 赞同：3
> 
> 时间：2013-04-01T19:08:38.887
> 
> 标签：sitecore, sitecore-media-library

为客户做一个项目。他们有一个 PDF，它被分成不同的页面作为图像，他们希望这些图像中的每一个都出现在一个页面上——仅这一页就至少有 40 个图像。

到目前为止，我只是单独放置它们。每次您使用富编辑器放置图像时，您都从媒体根目录开始——根据媒体库的结构方式，这些图像被深埋在子文件夹中。因此，大约需要 20 秒的点击、滚动和阅读才能找到要放置的每个图像。

这些图像是连续的，并按顺序放置在媒体库中。有没有办法我可以选择一组图像并将它们放入？将有数百个这样的图像，这极大地浪费了我（和我的客户）的时间来一张一张地放置图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:40:32.523

按照 TwentyGotoTen 所说的，我会：

*   在文件夹内的媒体库中构建您的图像（如果您还没有这样做）
*   创建一个包含转发器的子布局/xsl 渲染来渲染图像
*   将控件添加到布局并将该控件的数据源设置为媒体文件夹
*   然后，代码应从该文件夹中检索所有子项并根据需要进行渲染。

您可能需要使用[Sublayout Parameter Helper](http://marketplace.sitecore.net/en/Modules/Sub_Layout_Parameter_Helper.aspx)从 ascx 代码隐藏访问数据源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T19:56:01.927

我假设您只是希望图像一个接一个地出现，中间没有其他任何东西。与其在富文本中嵌入图像，不如考虑为模板中的图像创建一个多列表字段，并创建一个渲染/子布局来渲染它们。

您可以为多列表设置比媒体根更合适的来源。这应该使选择图像变得更加容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T08:28:29.203

Mark van Aalst 创建了一个自定义图像字段，它也可以更轻松地执行此操作。

[通读一遍](http://newguid.net/sitecore/2012/multiple-images-selector-field/)。
这也可以在 Sitecore 的 Marketplace 上找到：[多张图片选择器](http://marketplace.sitecore.net/Modules/Multiple_Images_Selector.aspx)

它将允许您通过多列表字段选择图像，但它将图像显示为具有多个图像的图像字段。

我认为这几乎是 TwentyGotoTen 正在谈论的解决方案，但也显示了所选图像的缩略图。

# c++ - 将内容复制到 char*

> ID：15749973
> 
> 赞同：0
> 
> 时间：2013-04-01T19:09:25.167
> 
> 标签：c++, string, char

我有一个类型的缓冲区`char*`和一个`string`. 我想将`string`长度 +放在缓冲区内`string`。

我编写了以下代码来完成此操作，但它不起作用，因为`std::cout<<strlen(buffer)`无论我作为函数的参数传递什么字符串，都会打印“1”。

```
int VariableLengthRecord :: pack (const std::string strToPack)
    {
        int strToPackSize = strToPack.length();
        if (sizeof(strToPackSize) + strToPackSize > maxBytes - nextByte)
            return RES_RECORD_TOO_LONG; // The string is too long

        int start = nextByte;

        // Copy the string length into the buffer
        copyIntToBuffer((buffer+start),strToPackSize);

        // Copy the string into the buffer
        strcpy((buffer+start+sizeof(strToPackSize)),strToPack.c_str());

        // Move the buffer pointer
        nextByte += sizeof(strToPackSize) + strToPackSize;

        // Update buffer size
        bufferSize = nextByte;

        std::cout << "Size of buffer = " << strlen(buffer) << std::endl;
        return RES_OK;
    }

void copyIntToBuffer (char* buffer, int integer)
{
    buffer[0] = integer & 0xff;
    buffer[1] = (integer >> 8) & 0xff;
    buffer[2] = (integer >> 16) & 0xff;
    buffer[3] = (integer >> 24) & 0xff;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:11:49.937

`strlen`不适用于二进制数据（长度字段是二进制的）。跟踪实际长度，或`5 + strlen(buffer+4)`仅用于测量文本部分。

或者，利用您将长度存储在缓冲区中的事实，并从那里读取长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:20:22.027

在您的情况下，您不能使用`cout`直接打印`buffer`，也不能使用`strlen`。问题是您正在存储二进制数据。

该`strlen`函数将在缓冲区中找到的第一个 0x00 字节处停止。

`cout`将为不可打印的值打印垃圾 。

在打印它们之前，您需要将它们转换`buffer`为十六进制值的 ASCII 版本。

就像是：

```
for (i = 0; i < BUFFER_SIZE; i ++)
{
    cout << hex << buffer[i];
}
cout << endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T19:12:47.017

strlen 将遍历字符串，直到找到一个空字节 (\0)。您正在尝试组合一个帕斯卡字符串。如果你想使用内置的 strlen，你需要提前指针 sizeof(string_length_type)

# mysql - 在多表删除上使用动态数据库名称的过程

> ID：15749975
> 
> 赞同：0
> 
> 时间：2013-04-01T19:09:27.067
> 
> 标签：mysql, stored-procedures, sql-delete, mysql-5.1

我正在尝试为 MySQL 5.1 创建一个将数据库名称作为参数并在该数据库内发出 MULTI DELETE 的过程。我遇到了两个我不确定如何解决的问题：

*   `USE`不能在准备好的语句中使用。当我尝试时，我得到“准备好的语句协议尚不支持此命令”。
*   MULTI DELETE 不能删除不同数据库中的表。当我尝试时，我得到“MULTI DELETE 中的未知表'x'”。

代码示例如下：

```
DELIMITER $$
CREATE PROCEDURE multi_test (
    IN dbname VARCHAR(20)
)
BEGIN
    SET @us = CONCAT('USE ', dbname, ';');
    PREPARE ustmt FROM @us;
    EXECUTE ustmt;
    DEALLOCATE PREPARE ustmt;
    SET @s = CONCAT('DELETE t FROM ', dbname, '.t as t INNER JOIN ', dbname, '.t2 as t2 IN t.f_id = t2.id');
    PREPARE stmt FROM @s;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;
END $$
DELIMITER ; 
```

同样，这会导致“准备好的语句协议尚不支持此命令”。

另一个目标是将其保留在 MySQL 中——我宁愿不使用连接到 MySQL 的脚本语言，而是只使用一些我可以从客户端 CLI 调用的 MySQL 过程。但是，如果在 MySQL 中可能的话，我不反对使用其他语言的过程（就像您可以在 PostgreSQL 中那样）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:24:12.560

看来我在尝试使用 MULTI DELETE 时需要使用 dbname 和表 ALIAS。

```
DELETE dbname.talias FROM dbname.t as talias INNER JOIN dbname.t2 as t2 ON talias.f_id = t2.id 
```

我相信我已经尝试过了，但它失败了，但它现在似乎正在工作：-/

# javascript - JSColor 自动文字变色

> ID：15749978
> 
> 赞同：0
> 
> 时间：2013-04-01T19:09:39.623
> 
> 标签：javascript, jscolor

我正在使用[jscolor](http://jscolor.com/)并注意到它会根据所选颜色自动更改文本颜色。示例：如果我选择黑色背景颜色，它会自动将文本颜色更改为白色。无论如何要禁用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:56:06.777

朱利安：

从 JSColor 中注释掉以下代码行

```
this.styleElement = target; // where to reflect current color 
```

它调用一个设置目标输入字段样式的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T12:01:45.187

试着找到这个：

```
 this.exportColor = function(flags) {
            if(!(flags & leaveValue) && valueElement) {
                var value = this.toString();
                if(this.caps) { value = value.toUpperCase(); }
                if(this.hash) { value = '#'+value; }
                valueElement.value = value;
            }
            if(!(flags & leaveStyle) && styleElement) {
                styleElement.style.backgroundImage = "none";
                styleElement.style.backgroundColor =
                    '#'+this.toString();
                styleElement.style.color =
                    0.213 * this.rgb[0] +
                    0.715 * this.rgb[1] +
                    0.072 * this.rgb[2]
                    < 0.5 ? '#FFF' : '#000';
            }
            if(!(flags & leavePad) && isPickerOwner()) {
                redrawPad();
            }
            if(!(flags & leaveSld) && isPickerOwner()) {
                redrawSld();
            }
        }; 
```

编辑这些行：

```
 styleElement.style.color =
                    0.213 * this.rgb[0] +
                    0.715 * this.rgb[1] +
                    0.072 * this.rgb[2]
                    < 0.5 ? '#FFF' : '#000'; 
```

也许

```
 styleElement.style.color =
                    0.213 * this.rgb[0] +
                    0.715 * this.rgb[1] +
                    0.072 * this.rgb[2]
                    < 0.5 ? '#000' : '#000'; 
```

如果你想让它稍微整洁一点

```
styleElement.style.color = '#000'; 
```

这可以完全隐藏文本

```
styleElement.style.color = 'transparent'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-27T04:17:17.853

在源文件中找到以下代码：

```
if (this.valueElement) {
            if (jsc.isElementType(this.valueElement, 'input')) {
                var updateField = function () {
                    THIS.fromString(THIS.valueElement.value, jsc.leaveValue);
                    jsc.dispatchFineChange(THIS);
                };
                jsc.attachEvent(this.valueElement, 'keyup', updateField);
                jsc.attachEvent(this.valueElement, 'input', updateField);
                jsc.attachEvent(this.valueElement, 'blur', blurValue);
                this.valueElement.setAttribute('autocomplete', 'off');
            }
        } 
```

只需评论那些 attachEvent 例如，如果您不希望文本字段在从颜色面板中选择颜色后更新其背景颜色，只需评论“输入”行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-30T10:52:13.247

添加`styleElement.style.color = 'transparent';`可以从输入字段中删除文本值，但它不适用于“字体颜色”属性。

相反，我申请了

```
styleElement.style.color = '#' + this.toString(); 
```

从输入字段中删除的文本值和 font-color 属性也有效。

谢谢

# c# - .NET 代码的代码优化是否会受到重命名而不是 Release 的影响？

> ID：15749991
> 
> 赞同：0
> 
> 时间：2013-04-01T19:10:45.123
> 
> 标签：c#, visual-studio, build, release, buildconfiguration

我有一个简单的场景，我继承了构建配置与标准配置的名称非常不同的代码。

特别是，我们的“生产”配置更像我们的发布配置。

所以我想我有几个问题：

1.  需要打开或关闭什么，以便我可以仔细检查，以使某些东西成为“发布”配置？诸如代码优化、调试符号等之类的东西。
2.  如果启用了代码优化等，与库存的 Release 配置有什么不同吗？那些可能在 JIT 或编译器级别硬编码的东西？
3.  除了第 1 项中的内容以及标准版本配置中的内容之外，是否还有其他应该启用/禁用的东西会在配置级别导致明显的性能影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:24:42.150

1 和 2 - 发布和调试之间的差异非常小：优化已打开（请参阅[Eric Lippert 的含义](http://blogs.msdn.com/b/ericlippert/archive/2009/06/11/what-does-the-optimize-switch-do.aspx)），并且没有为发布构建定义 DEBUG。

了解两种配置有何不同的最简单方法是创建基本项目并比较配置部分以进行调试和发布。

调试： `Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' "`

```
<Optimize>false</Optimize>
<DefineConstants>DEBUG;TRACE</DefineConstants> 
```

释放：`Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' "`

```
<Optimize>true</Optimize>
<DefineConstants>TRACE</DefineConstants> 
```

调试信息类型也有区别，但主要影响调试的方便性。

3 - 对于所有类型的解决方案来说，没有什么是通用的以提高性能。每种类型的解决方案都有调整性能的方法——正确的日志配置、在 ASPX 中编译相关文件的选项、NGen 到 pre-JIT、选择 x86/x64……基本上你需要开始做常规的性能工作——设定目标、测量、调整/优化。

# linux - 尝试使用 /dev/uinput 打开内置网络摄像头

> ID：15749992
> 
> 赞同：0
> 
> 时间：2013-04-01T19:10:45.747
> 
> 标签：linux, webcam, inject, keystroke

基本上，我想从 shell 或 shell 脚本打开我笔记本的内置网络摄像头，而不必`Fn+ESC`每次我想打开它时都按一下。

我一直在尝试激活我的 lemote [yeeloong 8089B 笔记本](http://www.gnewsense.org/Projects/Lemote)中的集成网络摄像头，方法是使用 /dev/uinput，在 debian 挤压下，内核 2.6.32-loongson-2f #1 PREEMPT 来自[bjlx](http://www.bjlx.org.cn/loongson/squeeze/kernel/)。我已经使用 uinput 激活了 WLAN，但是我无法使用 uinput 打开相机。通常，我会按下`Fn+ESC`打开相机，但使用 uinpuit 似乎不起作用。相机工作正常，可以通过以下方式进行测试：

```
mplayer tv:// -really-quiet -tv driver=v4l2:device=/dev/video0 </dev/null 
```

我正在使用以下程序（基于 Gregory Thiemonge 和 Mehul Patel 的 HOWTO）尝试使用 uinput 激活我的网络摄像头（抱歉，如果代码有点难看，我有点匆忙写了它）：

cam_wlan.c：

```
#include <errno.h>
#include <fcntl.h>
#include <linux/input.h>
#include <linux/uinput.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

#define end(arg) do { \
    perror(arg); \
    exit(EXIT_FAILURE); \
} while (0)

static int fd = -1;
struct uinput_user_dev uidev;
struct input_event ev;

int setup_uinput_dev();
void cam();
void wifi();
int destroy_close();

int main(void) {
    setup_uinput_dev();
    cam();
    wifi();
    destroy_close();
    return 0;
}

int setup_uinput_dev() {
    fd = open("/dev/uinput", O_WRONLY | O_NDELAY);
    if(fd < 0)
        end("Unable to open /dev/uinput\n");
    memset(&uidev,0,sizeof(uidev));
    strncpy(uidev.name, "uinput-sample", UINPUT_MAX_NAME_SIZE);
    uidev.id.version = 1;
    uidev.id.bustype = BUS_USB;
    if(ioctl(fd, UI_SET_EVBIT, EV_KEY) < 0)
        end("Unable to setup UINPUT device.\n");
    if(ioctl(fd, UI_SET_KEYBIT, KEY_CAMERA) < 0)
        end("Unable to setup UINPUT device.\n");
    if(ioctl(fd, UI_SET_KEYBIT, KEY_WLAN) < 0)
        end("Unable to setup UINPUT device.\n");
    if(write(fd, &uidev, sizeof(uidev)) < 0)
        end("Unable to write to UINPUT device.\n");
    if(ioctl(fd, UI_DEV_CREATE) < 0)
        end("Unable to create UINPUT device.\n");
    return 0;
}

void cam() {
    memset(&ev, 0, sizeof(ev));
    ev.type = EV_KEY;
    ev.code = KEY_CAMERA;
    ev.value = 1;
    if(write(fd, &ev, sizeof(struct input_event)) < 0)
        end("Unable to write to UINPUT device.\n");
    ev.type = EV_SYN;
    ev.code = SYN_REPORT;
    ev.value = 0;
    if(write(fd, &ev, sizeof(struct input_event)) < 0)
        end("Unable to write to UINPUT device.\n");
    memset(&ev, 0, sizeof(ev));
    ev.type = EV_KEY;
    ev.code = KEY_CAMERA;
    ev.value = 0;
    if(write(fd, &ev, sizeof(struct input_event)) < 0)
        end("Unable to write to UINPUT device.\n");
    ev.type = EV_SYN;
    ev.code = SYN_REPORT;
    ev.value = 0;
    if(write(fd, &ev, sizeof(struct input_event)) < 0)
        end("Unable to write to UINPUT device.\n");
}

void wifi() {
    memset(&ev, 0, sizeof(ev));
    ev.type = EV_KEY;
    ev.code = KEY_WLAN;
    ev.value = 1;
    if(write(fd, &ev, sizeof(struct input_event)) < 0)
        end("Unable to write to UINPUT device.\n");
    ev.type = EV_SYN;
    ev.code = SYN_REPORT;
    ev.value = 0;
    if(write(fd, &ev, sizeof(struct input_event)) < 0)
        end("Unable to write to UINPUT device.\n");
    memset(&ev, 0, sizeof(ev));
    ev.type = EV_KEY;
    ev.code = KEY_WLAN;
    ev.value = 0;
    if(write(fd, &ev, sizeof(struct input_event)) < 0)
        end("Unable to write to UINPUT device.\n");
    ev.type = EV_SYN;
    ev.code = SYN_REPORT;
    ev.value = 0;
    if(write(fd, &ev, sizeof(struct input_event)) < 0)
        end("Unable to write to UINPUT device.\n");
}

int destroy_close() {
    if(ioctl(fd, UI_DEV_DESTROY) < 0)
        end("Unable to destroy UINPUT device.\n");
    close(fd);
    return 0;
} 
```

我编译

```
gcc -o cam_wlan cam_wlan.c 
```

在运行之前`cam_wlan`，必须以 root 身份：

```
modprobe uinput
lsmod | grep uinput
ls /dev/uinput 
```

确认 uinput 设备已被激活。

我遇到的问题是，当我运行时`cam_wlan`，WLAN LED 会切换，但网络摄像头没有。通常，当我按下`Fn+ESC`切换内置网络摄像头时，`dmesg`会显示：

```
[45254.379000] usb 1-1: new high speed USB device using ehci_hcd and address 15
[45254.536000] usb 1-1: New USB device found, idVendor=064e, idProduct=a114
[45254.536000] usb 1-1: New USB device strings: Mfr=2, Product=1, SerialNumber=3
[45254.536000] usb 1-1: Product: USB 2.0 Camera
[45254.539000] usb 1-1: Manufacturer: SuYin
[45254.539000] usb 1-1: SerialNumber: CN0317-S30C-MC03-VS-B20081113
[45254.546000] usb 1-1: configuration #1 chosen from 1 choice
[45254.550000] uvcvideo: Found UVC 1.00 device USB 2.0 Camera (064e:a114)
[45254.567000] input: USB 2.0 Camera as /devices/pci0000:00/0000:00:09.1/usb1/1-1/1-1:1.0/input/input896 
```

`lsusb`会显示：

```
Bus 001 Device 015: ID 064e:a114 Suyin Corp. 
```

并`evtest /dev/input/event2`以 root 身份运行将显示：

```
Input driver version is 1.0.0
Input device ID: bus 0x19 vendor 0x0 product 0x0 version 0x0
Input device name: "HotKeys"
Supported events:
  Event type 0 (Sync)
  Event type 1 (Key)
    Event code 113 (Mute)
    Event code 114 (VolumeDown)
    Event code 115 (VolumeUp)
    Event code 142 (Sleep)
    Event code 212 (Camera)
    Event code 224 (Brightness down)
    Event code 225 (Brightness up)
    Event code 227 (?)
    Event code 238 (?)
  Event type 5 (?)
    Event code 0 (?)
Testing ... (interrupt to exit)
Event: time 1364796475.137014, type 1 (Key), code 212 (Camera), value 1
Event: time 1364796475.138119, -------------- Report Sync ------------
Event: time 1364796475.138145, type 1 (Key), code 212 (Camera), value 0
Event: time 1364796475.138159, -------------- Report Sync ------------ 
```

但是，当我运行`cam_wlan`. 我应该提到，运行时 WLAN 切换不会发生任何事件报告`cam_wlan`，尽管 WLAN LED 确实会切换（并且 WLAN 会通过运行来激活和停用`cam_wlan`），而网络摄像头不会切换。

我还尝试在原始 cam_wlan.c 中替换这些行

```
...
    if(ioctl(fd, UI_SET_KEYBIT, KEY_WLAN) < 0)
...
    ev.code = KEY_WLAN;
... 
```

和

```
...
    if(ioctl(fd, UI_SET_KEYBIT, KEY_FN_ESC) < 0)
...
    ev.code = KEY_FN_ESC;
... 
```

但这也没有用。

所以，我愿意接受建议。为了从外壳激活我的集成网络摄像头，我还能尝试什么？（即，不必`Fn+ESC`在我的键盘上进行物理按下）

# java - 在 Itext 中，如何将单元格的内容倒置？

> ID：15749994
> 
> 赞同：1
> 
> 时间：2013-04-01T19:10:53.990
> 
> 标签：java, rotation, itext

我有一个带有一些 pdfpcells 的 pdfptable，这张表被打印出来并随每个部分一起带走。当零件在机架上时，纸张是倒置的。如何将一些文本写入 pdfpcell，然后将其旋转 180 度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:55:27.443

pdfpcells 详细信息：http: [//api.itextpdf.com/itext/com/itextpdf/text/Image.html](http://api.itextpdf.com/itext/com/itextpdf/text/Image.html)

[编辑] 忽略下面的方法，使用下面发现​​的 Dah 的 setRotation。感谢您的支持 Dah，我不应该得到它:)

您将必须创建图像，将文本绘制到图像，将图像转换为 -y，或旋转图像。

然后将图像写入 url，然后将该图像 url 传递给“com.itextpdf.text.Image”的构造函数。

在图像中绘制文本：[Java - 在图像中心绘制文本](https://stackoverflow.com/questions/7323538/java-draw-text-in-the-center-of-an-image)

[将图像倒置：](http://www.zetcode.com/gfx/java2d/java2dimages/)

```
g2d.translate(0, 2 * imageHeight + gap);
g2d.scale(1, -1); 
```

或者

旋转图像：[Java：旋转图像](https://stackoverflow.com/questions/8639567/java-rotating-images)

然后：

将图像写入文件：[http ://docs.oracle.com/javase/tutorial/2d/images/saveimage.html](http://docs.oracle.com/javase/tutorial/2d/images/saveimage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:33:48.797

显然我错过了哦-如此明显的 PdfPCell.setRotation();

# c# - 如何在 C# WinForms 应用程序中设计工作流？

> ID：15749998
> 
> 赞同：4
> 
> 时间：2013-04-01T19:11:05.890
> 
> 标签：c#, winforms, background, workflow, worker

这可能是一个非常普遍的问题 - 但我对 C# 很陌生。您能否向我解释一下，或者给我一个很好的示例或解释链接。

我想设计一个 C# Winform 应用程序。该应用程序有一个主窗体，它在需要时收集用户输入。与 UI 一起开发了一个复杂的长时间运行的计算算法。计算的开始是从主窗体上的按钮触发的。(CaculateClass.Start())

**问题 1：** 在 CaculateClass 的方法调用堆栈深处的某个时间点，CaculateClass 检测到它需要用户进一步输入才能继续计算。

在古老的 C++ 控制台应用程序时代，人们会做这样的事情： cout << "Ask question"; cin >> 回答;

这是如何在 C# 中使用 winforms 完成的，从调用堆栈深处的某处将控制权传递给 UI，获取输入并返回计算中断的地方？还是 CaculateClass 的设计方式完全不同？

**问题 2** 为避免 UI 冻结，许多文章建议将如此长时间运行的计算放入另一个线程 - 例如使用 BackgroundWorker()

如果我让 BackgroundWorker 计算 CaculateClass.Start() -> 那么收集用户输入如何工作？

感谢您的帮助，CS

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:20:54.503

> > 这是如何在 C# 中使用 winforms 完成的，从调用堆栈深处的某处将控制权传递给 UI，获取输入并返回计算中断的地方？还是 CaculateClass 的设计方式完全不同？

它可能不是特定于语言的，但您希望将事物解耦。从表单中获取您的输入，例如在委托类中对其进行操作。一旦您的委派课程准备就绪并显示结果，您就可以更新您的 UI。

> > 问题 2 为避免 UI 冻结，许多文章建议将如此长时间运行的计算放入另一个线程 - 例如使用 BackgroundWorker()

至于响应能力，是的，后台线程在那里可以正常工作。收集输入没有什么不同，您只需将输入传递给一个对象，该对象就会为您计算东西。在同一线程或不同线程上执行此操作是设计选择的问题。将结果发布回主线程时会有所不同。由于您不应该（不能）在主线程之外的另一个线程上更改用户控件，因此您需要`Invoke`将结果返回到主线程。[可以在 MSDN 上找到](http://www.google.be/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDEQFjAA&url=http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx&ei=Y95ZUcqpI6X14QS8yoHYCw&usg=AFQjCNGcW5sFOGrNkREl7IWD2CG6GUw25g&bvm=bv.44442042,d.bGE)有关此主题的更多信息。

> > 关于一般问题的一般评论:)

尽量保持 UI 的东西尽可能薄。它负责可视化事物并获取用户输入。Google for [MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)（模型视图控制器）——众所周知的 GUI 设计模式。或者看看[MVVM](http://en.wikipedia.org/wiki/MVVM)（模型视图视图模型）——一种更现代的 GUI 设计模式。两者都有很多最佳实践和方法来保持您的设计解耦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T19:18:44.367

你应该看看继续任务：http: [//msdn.microsoft.com/en-us/library/ee372288.aspx](http://msdn.microsoft.com/en-us/library/ee372288.aspx)

任务是执行后台工作的新编程范例，它们优于 BackgroundWorker。

# hive - Oozie 工作流程：未找到 Hive 表，但它确实存在

> ID：15749999
> 
> 赞同：6
> 
> 时间：2013-04-01T19:11:08.077
> 
> 标签：hive, cloudera, oozie

我有一个 oozie 工作流，在 4 台机器的 CDH4 集群上运行（一个主控一切，三个“哑”工人）。Hive Metastore 使用 mysql（存在驱动程序）在主服务器上运行，oozie 服务器也使用 mysql 在主服务器上运行。使用 Web 界面，我可以按预期导入和查询配置单元，但是当我在 oozie 工作流程中执行相同的查询时，它会失败。即使添加“IF EXISTS”也会导致以下错误。我尝试将连接信息作为属性添加到配置单元作业中，但没有成功。

任何人都可以给我一个提示吗？我错过了什么吗？需要任何进一步的信息吗？

这是作业日志的输出：

```
 Script [drop.sql] content:
  ------------------------
  DROP TABLE IF EXISTS performance_log;

  ------------------------

  Hive command arguments :
  -f
  drop.sql

  =================================================================

  >>> Invoking Hive command line now >>>

  Intercepting System.exit(10001)

  <<< Invocation of Main class completed <<<

  Failing Oozie Launcher, Main class [org.apache.oozie.action.hadoop.HiveMain], exit code [10001]

  Oozie Launcher failed, finishing Hadoop job gracefully 
```

这是错误消息：

```
 FAILED: SemanticException [Error 10001]: Table not found performance_log
  Intercepting System.exit(10001)
  Failing Oozie Launcher, Main class [org.apache.oozie.action.hadoop.HiveMain], exit code [10001] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T00:31:23.110

问题是其他节点不知道你的 MYSQL 在哪里，所以你得到错误表未找到。

你需要做两件事

1.  复制 oozie 工作流目录中的 hive-site.xml
2.  在您的 Hive 操作中，告诉 oozie 使用我的 hive-site.xml

像下面的东西

`action name="hive-node"> <hive xmlns="uri:oozie:hive-action:0.2"> <job-tracker>${jobTracker}</job-tracker> <name-node>${nameNode}</name-node> <job-xml>hive-site.xml</job-xml>`

这应该有效。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T09:39:39.260

除了上面提到的关于正确指定 hive-site.xml 的解决方案之外，我遇到了同样的问题。我也建议遵循以下内容。

1.  检查类路径中是否有 mysql 连接器 jar（如果您使用 mysql 作为元存储）。
2.  如果发生 oozie 蜂巢操作，只需检查您是否没有多次添加蜂巢罐。例如，它已经存在于 oozie 共享库中，并且您还复制到了工作流/库中