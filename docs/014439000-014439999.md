# StackOverflow 问答 14439000-14439999

# python - Tkinter 中的 Python 帮助

> ID：14439001
> 
> 赞同：0
> 
> 时间：2013-01-21T12:48:37.450
> 
> 标签：python, python-2.7, tkinter

我需要一些帮助，我正在编写一个 Zip 密码破解器。我正在尝试为我的破解器创建一个 gui 界面。
如果在密码文件中创建，我想显示一个正确密码的消息框。
但是，`showinfo`单击破解按钮后消息框没有执行，而如果我正在使用它打印密码，`print`它正在工作。
所以，请帮助我为什么`showinfo`消息框是不执行。
这里，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:55:23.470

您不能从主线程以外的任何线程调用 Tkinter 命令。Tkinter 不是线程安全的。

# asp.net - 在企业网络上创建存储在 SQL Server 2008 R2 上的可访问 ASP Intranet 页面

> ID：14439007
> 
> 赞同：0
> 
> 时间：2013-01-21T12:48:50.913
> 
> 标签：asp.net, sql-server, sql-server-2008-r2, webserver, intranet

我有一个 SQL Server 2008 R2 数据库，我想为其设置一个内部仪表板类型的基于 ASP 的网站，用于监控各种 KPI。

我已经在 SSRS 中开发了报告，我可以链接到这些报告，并且可以轻松编写 ASP 代码，但我并不真正熟悉设置服务器以允许用户访问网页（或者知道这有多困难）。

这是在我们的公司网络上运行的，所以我只是希望有人能给我一些关于一些基本步骤的指示或链接到一个教程，这将使我能够进行设置。

我在查找这方面的信息时遇到了一些麻烦，因为我的任何搜索都与如何通过 ASP 连接到数据库或查找将代表我托管 SQL Server 的公司有关。

我可以在连接的服务器桌面上成功打开一个基本的 ASP 页面等，但我希望公司内的其他用户能够访问服务器上的特定页面，我可以从中编写自定义页面。

我希望内部用户能够输入...

`http://servername/`

或其他别名，然后直接进入此页面。

任何帮助或指导将不胜感激！！

提前致谢！！

人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:44:27.623

1) http--//--servername--
在本地域控制器上添加 DNS 条目（本地 IT 会这样做），或者将主机文件条目添加到网络上的所有系统/服务器作为
Windows：[http:// www.accs-net.com/hosts/how_to_use_hosts.html](http://www.accs-net.com/hosts/how_to_use_hosts.html)
Linux/Unix：[http ://www.unix.com/shell-programming-scripting/32394-adding-host-entry-another-machine.html](http://www.unix.com/shell-programming-scripting/32394-adding-host-entry-another-machine.html)

2) 我可以在连接的服务器桌面上成功打开一个基本的 ASP 页面等，但我希望公司内的其他用户能够访问服务器上的特定页面，我可以从中编写自定义页面。

默认情况下，IIS 将以匿名方式向所有人打开一个本地运行的网页，除非它因特定情况而被阻止。

如果您需要进一步的帮助，请告诉我。谢谢。

# joomla - （！）致命错误：未捕获的异常'将joomla 1.5迁移到2.5时发生异常

> ID：14439010
> 
> 赞同：0
> 
> 时间：2013-01-21T12:48:55.143
> 
> 标签：joomla, joomla2.5, joomla1.5, joomla-extensions

我正在尝试将我的 joomla 网站从 1.5.26 迁移到 2.5。通过 jupgrade 扩展迁移 joomla 网站时，它向我显示“迁移未定义”。因此，我在 jupgrade 扩展中出现了迁移错误，然后它向我显示了以下与 j25_users 表相关的错误。请查看以下错误：-

```
( ! ) Fatal error: Uncaught exception 'Exception' with message 'Unknown column 'subscribe' in 'field list' SQL=INSERT INTO `j25_users` (`id`,`name`,`username`,`email`,`password`,`usertype`,`block`,`sendEmail`,`registerDate`,`lastvisitDate`,`activation`,`params`,`subscribe`) VALUES ('62','ChhathPoojaAdmin','admin','info@vivid-techno.com','36b6db909a7471b4e6fdf31b4eec641e:UELuOKlpIjy0jqPf36I8Kzj8uNElGBf9','Super Administrator','0','1','2010-06-27 16:18:02','2013-01-21 12:36:40','','{\"admin_language\":\"en-GB\",\"language\":\"en-GB\",\"editor\":\"xstandard\",\"helpsite\":\"\",\"timezone\":\"UTC\"}','1')' in C:\wamp\www\jdchhath\administrator\components\com_jupgrade\includes\jupgrade.class.php on line 347 
```

大家猜一猜，怎么解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:55:01.657

将旧的 joomla 网站升级到最新的 joomla 版本可能会很忙，因为它会让你感到非常生气。我的解决方案的答案是订阅列不在最新的 joomla 版本中，这使得将我的网站升级到最新版本成为问题。所以我在我的#__users 表中插入了列表“订阅”，请注意不要删除由 jupgrde 创建的旧数据库表，即使它不成功。就是这样，你就完成了。如果您遇到与数据库相关的任何其他问题，那么首先请确保您的数据库中存在或不存在列或表。如果 jupgrade 扩展创建除了这些表 jupgrade_categories、jupgrade_menus、jupgrade_modules、jupgrade_steps 之外的任何新数据库，请不要从我的意见中删除它。

# algorithm - 用不超过 8 个顶点的多边形围绕地图上的零簇

> ID：14439011
> 
> 赞同：0
> 
> 时间：2013-01-21T12:49:12.553
> 
> 标签：algorithm, game-engine, game-physics

在图像映射（500 x 500）上，我只有零和一。大多数情况下，一切都是一个，但我有几个带零的集群（代表障碍，所以玩家不能越过，比如山丘）。障碍物可以有任意形状，因此需要简化，我决定找到一种方法，用不超过 8 个顶点的多边形包围每个这样的障碍物（周围的多边形内部可以有一些 1，但障碍物的所有 0 都必须在里面那个多边形）。对于每个障碍物，我需要生成一个多边形。我可以连接障碍物外边界上的每个 0，但它会产生具有 n ( n >> 8 ) 个顶点的多边形。我正在寻求任何建议如何做到这一点或一些类似算法的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:44:10.790

您应该最初构建集群的**凸包**。在此之后，您可以使用以下策略将顶点数量减少到 8 个： ![在此处输入图像描述](../Images/0180fadfdb75d475b74a9aaae5fbb619.png)

您可以找到任何一对连接点的交叉点。在提供的图像点 8 和 9 上替换为一个 10，但增加多边形大小。

**注意：**这种方法不能保证这个多边形不会与另一个“零”簇重叠。有时，如果没有另一个簇的交集，具有 8 个顶点的多边形可能无法覆盖一个簇。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:36:19.080

您可以将 S、SW、W、NW、N、NE、E 和 SE 最远点作为障碍物，并通过在垂直方向上通过这些点的线段创建一个八边形集。即适当地：WE，NW-SE，等等。我认为，这将是最快和最简单的算法，与@Толя 的解决方案相反，它永远不会给你超长的星光状顶点。

# c++ - 需要帮助了解 cin 缓冲区行为

> ID：14439015
> 
> 赞同：2
> 
> 时间：2013-01-21T12:49:32.130
> 
> 标签：c++

下面的代码将输出显示为

> ```
> enter something
> abc
> you entered: a
> you entered: b
> you entered: c 
> ```

```
 #include "stdafx.h"
    #include <iostream>

    using namespace std;

    int _tmain(int argc, _TCHAR* argv[])
    {
    char c;

    while(cin>>c)
    {
    //Do something  
        cout<<"you entered: "<<c<<"\n";
    }

    return 0;
    } 
```

为什么它不只显示输入的第一个字符？我知道我可以通过使用强制它在第一个字符后忽略 cin 缓冲区

`cin.ignore(1,'\n')`

但它不应该只准备一个字符而忽略其余的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:14:46.410

> ...但它不应该只准备一个角色而忽略其余的吗？

不。它工作正常，我不知道你从哪里得到它应该忽略某些东西的想法。它读取缓冲区中的任何内容，并在缓冲区为空时阻止等待更多输入。在您的情况下，它仅在 while 循环的三次迭代后才变为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:56:44.173

你的代码说`while (cin >> c) doStuff`。即：只要有要读取的字符，doStuff。所以程序正是这样做的。你也许是说`if (cin >> c)`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:15:34.803

cin 只能在按下 RETURN 键后处理来自键盘的输入。while 循环继续操作，直到 cin 缓冲区中的所有字符都被一个一个打印出来。

程序的行为也是如此。

# nunit - 如何让 CruiseControl.NET/nant 运行所有以 .Test 为后缀的 Unittest 项目？

> ID：14439018
> 
> 赞同：1
> 
> 时间：2013-01-21T12:49:40.630
> 
> 标签：nunit, cruisecontrol.net, nant, nunit-console

在我们的持续集成设置中，我想设置 CruisControl.NET 来自动运行我们所有的单元测试。但是，我不想在配置中单独指定每个 unittest dll。

所有单元测试项目都带有后缀`.Test`（所有非单元测试项目都没有）。如何配置 CruiseControl.NET 以运行这些项目中的所有单元测试（我使用的是 CruiseControl.NET v1.5.7256.1）？

**我当前的配置尝试：**

```
<nunit>
    <path>$(nunit.path)</path>
    <assemblies>
        <assembly>$(working.dir)\**\*.Test.dll</assembly>
    </assemblies>
</nunit> 
```

我发现很难找到有关此特定 nunit 元素的文档。我能找到的大多数页面都在谈论使用[exec](http://nant.sourceforge.net/nightly/latest/help/tasks/exec.html)、[nunit2](http://nant.sourceforge.net/nightly/latest/help/tasks/nunit2.html)或其他[nunit](http://nant.sourceforge.net/nightly/latest/help/tasks/nunit.html)元素或[nunit-console 命令行选项](http://www.nunit.org/index.php?p=consoleCommandLine&r=2.6)。

我在管理构建环境方面没有太多经验，并且正在处理现有配置，其中每个程序集都以下列方式单独指定。

```
<nunit>
    <path>$(nunit.path)</path>
    <assemblies>
        <assembly>$(artifact.dir)\test1.dll</assembly>
        <assembly>$(artifact.dir)\test2.dll</assembly>
    </assemblies>
</nunit> 
```

因此，我尝试使用通配符失败。

**编辑：**

这是我的配置文件的一些额外 xml，用于稍微显示上下文：

```
<cruisecontrol xmlns:cb="urn:ccnet.config.builder">
    <project name="MyProject">
        <!-- whole bunch of other elements -->
        <tasks>
            <nunit>
                <!-- see above -->
            </nunit>
        </tasks>
    </project>
</cruiscontrol> 
```

在 Mightmuke 的建议之后，我尝试用`<nunit>`他的建议替换元素，但得到以下异常：`Unable to instantiate CruiseControl projects from configuration document. Configuration document is likely missing Xml nodes required for properly populating CruiseControl configuration. Unable to load array item 'property' - Cannot convert from type System.String to ThoughtWorks.CruiseControl.Core.ITask for object with value: ""`

然后我尝试将`<property>`and元素移到`<foreach>`元素之外。然后我得到了异常：`Unused node detected: <property name="nunit.filelist" value="" />`

我现在正试图找出有关该`<foreach>`元素的更多信息以及我可以把它放在哪里，但不知何故，我发现很难找到任何关于它的文档。

**编辑2：**

我找到了我正在使用的 nunit 任务的文档：http: [//ccnet.sourceforge.net/CCNET/NUnit%20Task.html](http://ccnet.sourceforge.net/CCNET/NUnit%20Task.html)

我将元素指定为 String[] 类型。我不确定这意味着什么......但从示例中可以看出它只是意味着它必须包含单数形式的同名子元素列表。

* * *

PS：我意识到这个问题有点失控......当整个事情解决后，我会尝试以这种格式编辑它，以便以后对其他人有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:49:34.547

如果您要使用 nunit 控制台，这是一个示例配置。

```
<property name="nunit.filelist" value="" />
<foreach item="File" property="testfile" verbose="true">
  <in>
    <items basedir=".">
      <include name="${working.dir}\**\*.Test.dll" />
    </items>
  </in>
  <do>
    <property name="nunit.filelist" value="${nunitfile.list + ' ' + testfile}" />
  </do>
</foreach>

<exec program="nunit-console-x86.exe" failonerror="true" verbose="true">
  <arg value="${nunit.filelist}" />
  <arg value="/xml=nunit-results.xml" />
  <arg value="/nologo" />
  <arg value="/nodots" />
</exec> 
```

这尚未经过测试，并且可能有更好的方法来剥皮，但它有望为您提供一个起点。

# ios - 用画外音模拟 UIAlertView：发出正确的声音

> ID：14439024
> 
> 赞同：1
> 
> 时间：2013-01-21T12:50:01.847
> 
> 标签：ios, accessibility, uialertview, voiceover

我决定创建一个模拟其功能的类，`UIAlertView`以便我可以拥有更好的回调 API 和更好的警报主题。我在 iOS 主窗口中添加了另一个窗口来显示警报。

问题在于画外音。标准`UIAlertView`画外音会发出特殊的声音，表示屏幕上有警报视图。

我可以通过发布获得标准的画外音屏幕更改啁啾声，`UIAccessibilityScreenChangedNotification`但这与警报视图的啁啾声不同。

我希望这感觉像是`UIAlertView`配音用户。为此，我需要能够以编程方式复制其特殊的啁啾声。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:27:15.293

这并不理想（例如，您会失去主题），但您可以让您的自定义实现检测是否启用了画外音，如果是，则`UIAccessibilityIsVoiceOverRunning()`回退到使用标准`UIAlertView`。

# android - 将泰语添加到区域设置和文本设置

> ID：14439026
> 
> 赞同：2
> 
> 时间：2013-01-21T12:50:05.107
> 
> 标签：android, locale

嗨，是否可以在三星 Galaxy Ace 型号 GT-S5839i、Android 版本 2.3.6 Gingerbread .XXLK2 的区域设置和文本设置选项中添加泰语选项？我们该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:13:10.690

**Thai Language Pack** - AnySoftKeyboard 键盘包：泰语键盘布局。

这是 AnySoftKeyboard 的扩展布局包。

首先安装 AnySoftKeyboard，然后从 AnySoftKeyboard 的 Settings->Keyboards 菜单中选择所需的布局。

这是列表（[来源](http://colincooper.net/?p=238)）

```
Language / Locale                 Supported since version

English, US (en_US)               1.1
German, Germany (de_DE)           1.1
Chinese, PRC (zh_CN)              1.5
Chinese, Taiwan (zh_TW)           1.5
Czech, Czech Republic (cs_CZ)     1.5
Dutch, Belgium (nl_BE)            1.5
Dutch, Netherlands (nl_NL)        1.5
English, Australia (en_AU)        1.5
English, Britain (en_GB)          1.5
English, Canada (en_CA)           1.5
English, New Zealand (en_NZ)      1.5
English, Singapore(en_SG)         1.5
French, Belgium (fr_BE)           1.5
French, Canada (fr_CA)            1.5
French, France (fr_FR)            1.5
French, Switzerland (fr_CH)       1.5
German, Austria (de_AT)           1.5
German, Liechtenstein (de_LI)     1.5
German, Switzerland (de_CH)       1.5
Italian, Italy (it_IT)            1.5
Italian, Switzerland (it_CH)      1.5
Japanese (ja_JP)                  1.5
Korean (ko_KR)                    1.5
Polish (pl_PL)                    1.5
Russian (ru_RU)                   1.5
Spanish (es_ES)                   1.5
Arabic, Egypt (ar_EG)             2.3
Arabic, Israel (ar_IL)            2.3
Bulgarian, Bulgaria (bg_BG)       2.3
Catalan, Spain (ca_ES)            2.3
Croatian, Croatia (hr_HR)         2.3
Danish, Denmark(da_DK)            2.3
English, India (en_IN)            2.3
English, Ireland (en_IE)          2.3
English, Zimbabwe (en_ZA)         2.3
Finnish, Finland (fi_FI)          2.3
Greek, Greece (el_GR)             2.3
Hebrew, Israel (iw_IL)*           2.3
Hindi, India (hi_IN)              2.3
Hungarian, Hungary (hu_HU)        2.3
Indonesian, Indonesia (in_ID)*    2.3
Latvian, Latvia (lv_LV)           2.3
Lithuanian, Lithuania (lt_LT)     2.3
Norwegian-Bokmol, Norway(nb_NO)   2.3
Portuguese, Brazil (pt_BR)        2.3
Portuguese, Portugal (pt_PT)      2.3
Romanian, Romania (ro_RO)         2.3
Serbian (sr_RS)                   2.3
Slovak, Slovakia (sk_SK)          2.3
Slovenian, Slovenia (sl_SI)       2.3
Spanish, US (es_US)               2.3
Swedish, Sweden (sv_SE)           2.3
Tagalog, Philippines (tl_PH)      2.3
Thai, Thailand (th_TH)            2.3
Turkish, Turkey (tr_TR)           2.3
Ukrainian, Ukraine (uk_UA)        2.3
Vietnamese, Vietnam (vi_VN)       2.3 
```

# iphone - 如何在 Iphone 中单击 UIButton 时设置 UiScrollView Frame？

> ID：14439027
> 
> 赞同：5
> 
> 时间：2013-01-21T12:50:05.767
> 
> 标签：iphone, ios, objective-c, xcode, uiscrollview

我有 UIScrollView 我正在使用 2 UIButtons。UIScrollView 初始帧为 (0,0,768,1024)。我希望当我单击第一个按钮时 UIScrollView y 坐标位置将为 500，这意味着它将向下滚动 500 个位置到其实际位置。

当我单击将在 UIScrollView 上显示的第二个按钮时，UIScrollView 的 Y 坐标位置 y=535，然后 UIScrollView 再次向上移动到位置 y=0。

第一个按钮单击 UIScrollView y = 500 第二个按钮单击 UIScrollView y = 0

专家的任何提示都将非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:54:30.507

也许您不想更改**`frame`**滚动视图的 （这只会取代整个视图），但是**`contentOffset`**. 这也可以是动画的。

```
CGPoint offset = scrollView.contentOffset;
offset.y += 500;
[scrollView setContentOffset:offset animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:54:07.577

这可以解决你的 pbm

```
-(IBAction) clickfirstbutton 
{
   [scrollview setContentOffset:CGPointMake(0, 500)) animated:TRUE];
}

-(IBAction) clicksecondbutton
{
   [scrollview setContentOffset:CGPointMake(0, 0) animated:TRUE];
} 
```

如果你不想使用动画

```
[scrollview setContentOffset:CGPointMake(0, 0) animated:FALSE]; 
```

# events - 为什么 UIGraphicsGetCurrentContext 不正确？

> ID：14439030
> 
> 赞同：1
> 
> 时间：2013-01-21T12:50:10.890
> 
> 标签：events, touch, cgcontext

你能帮助我吗 ？？我的触摸事件中的某些内容无法正常工作。我的绘画区域有 900 x 700px，不是完整的 UIView。在控制台错误中告诉我：

```
 CGContextAddLineToPoint: invalid context 0x0
  CGContextMoveToPoint: invalid context 0x0
  CGContextSetRGBStrokeColor: invalid context 0x0
  CGContextSetLineWidth: invalid context 0x0......
  .......
  ....... 
```

为什么 UIGraphicsGetCurrentContext 不正确？

我该如何解决这个错误

我的代码：

```
- (void)**touchesMoved**:(NSSet *)touches withEvent:(UIEvent *)event {

mouseSwiped = YES;
UITouch *touch = [touches anyObject];
CGPoint currentPoint = [touch locationInView:self.tempDrawImage];

UIGraphicsBeginImageContext(self.tempDrawImage.frame.size);
[self.tempDrawImage.image drawInRect:CGRectMake(0, 0, self.tempDrawImage.frame.size.width, self.tempDrawImage.frame.size.height)];

CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);

CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), brush );
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);
CGContextSetBlendMode(UIGraphicsGetCurrentContext(),kCGBlendModeNormal);

CGContextStrokePath(UIGraphicsGetCurrentContext());
self.tempDrawImage.image = UIGraphicsGetImageFromCurrentImageContext();
[self.tempDrawImage setAlpha:opacity];
UIGraphicsEndImageContext();

lastPoint = currentPoint; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:42:11.063

之前已经回答过这个问题 看这个链接： [invalid context error](https://stackoverflow.com/questions/2570846/why-there-is-an-invalid-context-error)。

我已经对视图进行了子类化并将我的代码放在 drawRect 方法中，它对我有用。

# environment-variables - 具有 Windows 环境变量值的环境变量设置

> ID：14439034
> 
> 赞同：3
> 
> 时间：2013-01-21T12:50:25.593
> 
> 标签：environment-variables, putty

我需要使用 Putty 上的配置在 Linux 上设置一个变量。我可以通过在 SSHD.CONF 上设置这个变量来做到这一点。有用。

但是，我需要动态设置这个值，首先我在 Windows 上设置变量：

```
set WIN_USER_CODE=1324567890 
```

然后我尝试将其配置为 PuTTy 上的值：

类别 > 连接 > 数据 > 环境变量 变量：LC_USER_CODE（在 sshd.conf 上授权） 值：WIN_USER_CODE（在 Windows 上设置的变量值）

我不工作...我尝试过不同的方式，例如 %WIN_USER_CODE%、$WIN_USER_CODE...

有人可以帮我吗？

谢谢！

# java - 从 MS Access 文件中获取值

> ID：14439040
> 
> 赞同：0
> 
> 时间：2013-01-21T12:50:55.490
> 
> 标签：java, ms-access

我希望用户给我一个输入。输入将是我在 ms 访问文件中的主键（一个整数，如 00 或 567），然后我希望我的方法在我的数据库中查找它并从 ms 访问中打印出记录。

我已经建立了连接并且一切都设置好了，我知道如何打印所有这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-30T22:20:02.617

我意识到这是不久前提出的问题 - 但在我看来，您正在寻找类似于我在下面输入的代码。如果您将“Reportname”替换为您要查找的报告的实际名称，并且“IDFromUser”获取主键的值，并且“RecordID”被您的主键名称替换，此函数将打开一个报告到特定记录的打印预览。

```
DoCmd.OpenReport Reportname, acViewPreview, , "RecordID=" & IDFromUser 
```

而且，如果您想让它真正自动化，您可以将报告直接转为 PDF，并添加以下脚本。

```
DoCmd.OutputTo acOutputReport, strReportObject, acFormatPDF, strFileName, True, , , acExportQualityPrint
DoCmd.Close acReport, strReportObject, acSaveYes 
```

让我知道这是否有帮助 - 如果询问的人不再观看，希望这对其他人有帮助。

# php - 收到无法修改标头信息错误

> ID：14439044
> 
> 赞同：0
> 
> 时间：2013-01-21T12:51:34.437
> 
> 标签：php, javascript, ajax

> **可能重复：**
> [PHP 错误：无法修改标头信息 - 标头已发送 标头](https://stackoverflow.com/questions/1793482/php-error-cannot-modify-header-information-headers-already-sent)
> [已由 PHP 发送](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

```
if ((isset($username)) && (isset($userid))){ 

}else{ 

header( 'Location: teacherlogout.php' ) ;

} 
```

我上面有一个 if/else 语句，我想做的是，如果满足 else 语句，则导航到该`teacherlogout.php`页面。但不是这个，我收到一条错误消息：

```
Warning: Cannot modify header information - headers already sent by (output started at /:431) in / on line 1654 
```

我不太明白我做错了什么？第 431 行只是`var qremain = <?php echo (int)$_SESSION['textQuestion']; ?>;`一行代码。第 1654 行是该`header( 'Location: teacherlogout.php' ) ;`行。这里发生了什么？

**更新：**

实际上使用ajax在后台导航到teacherlogout.php脚本会更好，如下所示：

```
<?php   

}else{ 

echo "Please Login to Access this Page | <a href='./teacherlogin.php'>Login</a>";

?>

<script type="text/javascript">

        $.ajax({    
        url: "teacherlogout.php",
        async: false,
        type: "POST",
      });

</script>

<?php

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:56:02.720

确保文件顶部没有任何空格。例如，如果您在顶部有一个空行，您将收到此错误。

```
(Blank Line Here)
<?php
if ((isset($username)) && (isset($userid))){ 

} else { 

header( 'Location: teacherlogout.php' ) ;

}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:56:27.010

```
Cause: 
```

如果您的 PHP 脚本在发送标头之前打印到浏览器，则会导致此错误。一个常见的例子是在开始会话之前打印 html 标签，或者设置 cookie。该错误告诉需要更改的行（在这种情况下，它是 on `line 431`）。

```
Resolution: 
```

要解决此错误，请在发送标头之前从 PHP 代码中删除正在打印到浏览器的行。

Another common cause for this error is white space either at the beginning or end of the file. The fix is to remove that whitespace from the file. Read the error message carefully. It says output started at ... followed by a file name and a line number. That is the file (and line) that you need to edit. Ignore the second file name - that is only a file that included the file that has the whitespace. The first file is the one you have to edit, not the second one.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:01:32.467

`header( 'Location: teacherlogout.php' ) ;`

The above function (header) only works if there has been no echo (output to screen). Check if something is printed before the function call.

HTML newline (usually considered as a whitespace) may also cause problem. Like a blank new line on page start.

# ios - 如何将 UILabel 放在 UITabbar 上？

> ID：14439045
> 
> 赞同：0
> 
> 时间：2013-01-21T12:51:39.433
> 
> 标签：ios, uitabbarcontroller, uitabbar

我希望在 UITabbar 上放置一个 UILabel，我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:10:26.597

假设您使用的是`UINavigationController`带有工具栏的 a ，这应该可以解决问题：（它的两侧都有一个灵活的空间来居中。

```
CGRect myFrame = CGRectMake(0, 0, 100, 44);
UILabel *myLabel = [[UILabel alloc] initWithFrame:myFrame];
UIBarButtonItem *spaceItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:NULL];
UIBarButtonItem *labelItem = [[UIBarButtonItem alloc] initWithCustomView:myLabel];
UIBarButtonItem *spaceItem2 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:NULL];
[self setToolbarItems:[NSArray arrayWithObjects:spaceItem,labelItem,spaceItem2, nil] animated:YES]; 
```

# php - 使用 Web 服务错误 - SOAP PHP

> ID：14439049
> 
> 赞同：1
> 
> 时间：2013-01-21T12:51:54.710
> 
> 标签：php, web-services, soap

我正在尝试发送数据以使用 Web 服务。但它返回错误：

> 错误：服务器无法读取请求。---> XML 文档中存在错误 (2, 734)。---> 指定类型为抽象：name='PaymentDataRequest', namespace='https://www.pagador.com.br/webservice/pagador', at .

有人可以帮我吗？这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
    <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
      <soap:Body>
    <AuthorizeTransaction xmlns="https://www.pagador.com.br/webservice/pagador">
      <request>
        <OrderData>
          <MerchantId>xxxxxxxxxxxxxxx</MerchantId>
          <OrderId>Test0003</OrderId>
          <BraspagOrderId xsi:nil="true" />
        </OrderData>
        <CustomerData>
          <CustomerIdentity>99999999999</CustomerIdentity>
          <CustomerName>Teste</CustomerName>
          <CustomerEmail>compradot@teste.com</CustomerEmail>
          <CustomerAddressData xsi:nil="true" />
          <DeliveryAddressData xsi:nil="true" />
        </CustomerData>
        <PaymentDataCollection>
          <PaymentDataRequest xsi:type="CreditCardDataRequest">
            <PaymentMethod>997</PaymentMethod>
            <Amount>100</Amount>
            <Currency>BRL</Currency>
            <Country>BRA</Country>
            <NumberOfPayments>1</NumberOfPayments>
            <PaymentPlan>0</PaymentPlan>
            <TransactionType>2</TransactionType>
            <CardHolder>Comprador Teste</CardHolder>
            <CardNumber>0000000000000001</CardNumber>
            <CardSecurityCode>111</CardSecurityCode>
            <CardExpirationDate>07/2017</CardExpirationDate>
            <AdditionalDataCollection xsi:nil="true" />
          </PaymentDataRequest>
        </PaymentDataCollection>
        <RequestId>80a51fb5-f9d7-44b8-bdc2-da2d533f3b8d</RequestId>
        <Version>1.0</Version>
      </request>
    </AuthorizeTransaction>
  </soap:Body>
</soap:Envelope> 
```

代码：

```
$parameters             = new stdClass();
$parameters->request    = new StdClass();

$parameters->request->OrderData->MerchantId='xxxxxxxxxx';
$parameters->request->OrderData->OrderId='Test0004';
$parameters->request->CustomerData->CustomerIdentity='99999999999';
$parameters->request->CustomerData->CustomerName='Teste';
$parameters->request->CustomerData->CustomerEmail='compradot@teste.com';
$parameters->request->CustomerData->CustomerEmail='compradot@teste.com';
$parameters->request->PaymentDataCollection->PaymentDataRequest='997';
$parameters->request->PaymentDataCollection->PaymentDataRequest->Amount='100';
$parameters->request->PaymentDataCollection->PaymentDataRequest->Currency='BRL';
$parameters->request->PaymentDataCollection->PaymentDataRequest->Country='BRA';
$parameters->request->PaymentDataCollection->PaymentDataRequest->NumberOfPayments='1';
$parameters->request->PaymentDataCollection->PaymentDataRequest->PaymentPlan='0';
$parameters->request->PaymentDataCollection->PaymentDataRequest->TransactionType='2';
$parameters->request->PaymentDataCollection->PaymentDataRequest->CardHolder='Comprador Teste';
$parameters->request->PaymentDataCollection->PaymentDataRequest->CardNumber='0000000000000001';
$parameters->request->PaymentDataCollection->PaymentDataRequest->CardSecurityCode='111';
$parameters->request->PaymentDataCollection->PaymentDataRequest->CardExpirationDate='07/2017';
$parameters->request->RequestId='80a51fb5-f9d7-44b8-bdc2-da2d533f3b8d';                             
$parameters->request->Version='1.0';

try {

$braspag = new SoapClient( 'https://homologacao.pagador.com.br/webservice/pagadorTransaction.asmx?WSDL',

        array(
                'trace'                 => 1,
                'exceptions'            => 1,
                'style'                 => SOAP_DOCUMENT,
                'use'                   => SOAP_LITERAL,
                'soap_version'          => SOAP_1_1,
                'encoding'              => 'UTF-8'
        )

);

$AuthorizeTransactionResponse  = $braspag->AuthorizeTransaction($parameters);

print_r($AuthorizeTransactionResponse);

echo $AuthorizeTransactionResponse->AuthorizeTransactionResponse;

} 

catch(SoapFault $fault) {

echo 'Ocorreu um erro: ' , $fault->getMessage();

}

echo "<hr>";
print_r($parameters);
echo "<hr>";

echo "<pre>";
echo htmlspecialchars($braspag->__getLastRequestHeaders())."\n";
echo htmlspecialchars($braspag->__getLastRequest())."\n";
echo "Response:\n".htmlspecialchars($braspag->__getLastResponseHeaders())."\n";
echo htmlspecialchars($braspag->__getLastResponse())."\n";
echo "</pre>"; 
```

回复：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Body>
      <AuthorizeTransactionResponse xmlns="https://www.pagador.com.br/webservice/pagador">
         <AuthorizeTransactionResult>
            <CorrelationId>xxxxxxxx</CorrelationId>
            <Success>true</Success>
            <ErrorReportDataCollection/>
            <OrderData>
               <OrderId>Test0003</OrderId>
               <BraspagOrderId>74025d35-2bae-48cb-b84e-07e5a1df4a50</BraspagOrderId>
            </OrderData>
            <PaymentDataCollection>
               <PaymentDataResponse xsi:type="CreditCardDataResponse">
                  <BraspagTransactionId>40dd42b0-7d86-4c90-ac0c-266e454bc2fc</BraspagTransactionId>
                  <PaymentMethod>997</PaymentMethod>
                  <Amount>100</Amount>
                  <AcquirerTransactionId>0118041611250</AcquirerTransactionId>
                  <AuthorizationCode>20130118041611250</AuthorizationCode>
                  <ReturnCode>6</ReturnCode>
                  <ReturnMessage>Operation Successful</ReturnMessage>
                  <Status>0</Status>
                  <CreditCardToken xsi:nil="true"/>
               </PaymentDataResponse>
            </PaymentDataCollection>
         </AuthorizeTransactionResult>
      </AuthorizeTransactionResponse>
   </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T15:44:20.890

如果您像我一样使用 SOAP UI 在开始实际实现之前对 Braspag 进行第一次测试，请像这样修改 PaymentDataRequest

`<pag:PaymentDataRequest xsi:type="CreditCardDataRequest">`

如上所述由 SparKot ॐ</p>

并添加缺少的参数

```
<pag:ServiceTaxAmount>0</pag:ServiceTaxAmount>
<pag:NumberOfPayments>1</pag:NumberOfPayments>
<pag:PaymentPlan>0</pag:PaymentPlan>
<pag:TransactionType>1</pag:TransactionType>
<pag:CardHolder>Comprador de Teste</pag:CardHolder>
<pag:CardNumber>0000000000000001</pag:CardNumber>
<pag:CardSecurityCode>999</pag:CardSecurityCode>
<pag:CardExpirationDate>05/2013</pag:CardExpirationDate>
<pag:CreditCardToken />
<pag:SaveCreditCard /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:23:26.227

从 WSDL 链接

[Pagador Web 服务 - WSDL](https://homologacao.pagador.com.br/webservice/pagadorTransaction.asmx?WSDL)

我只能收集到：

> ```
>  <s:complexType name="PaymentDataRequest" abstract="**true**">
>     <s:sequence>
>       <s:element minOccurs="1" maxOccurs="1" name="PaymentMethod" type="s:short"/>
>       <s:element minOccurs="1" maxOccurs="1" name="Amount" type="s:long"/>
>       <s:element minOccurs="0" maxOccurs="1" name="Currency" type="s:string"/>
>       <s:element minOccurs="0" maxOccurs="1" name="Country" type="s:string"/>
>       <s:element minOccurs="0" maxOccurs="1" name="AdditionalDataCollection" type="tns:ArrayOfAdditionalDataRequest"/>
>     </s:sequence> 
> ```

**PaymentDataRequest**是抽象的；您需要扩展**PaymentDataRequest的****CreditCardDataRequest**。

# ios - 无法在 Iphone 应用程序的搜索按钮单击时隐藏键盘

> ID：14439055
> 
> 赞同：0
> 
> 时间：2013-01-21T12:52:02.837
> 
> 标签：ios, objective-c

嗨，我是 xcode 开发的新手，我正在创建一个简单的应用程序。在那我有表格视图控制器和搜索栏控件。`onClick`搜索栏键盘出现我无法隐藏键盘。我试图隐藏它

```
(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{       

[self resignFirstResponder];    
[self.searchbar setShowsCancelButton: NO animated: YES]; 

} 
```

但它不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:18:28.450

要隐藏键盘，您应该失去对文本输入的关注，而不是类实例本身（self）

在你的情况下，你应该做

```
[searchBar resignFirstResponder] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:36:34.517

尝试

```
[self.view endEditing:YES]; 
```

在您的按钮操作中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T16:09:39.983

我希望这能帮到您

```
if([text length] == 0) {
    [searchBar performSelector: @selector(resignFirstResponder)
                       withObject: nil
                       afterDelay: 0.1];
} 
```

其中文本是搜索栏文本

祝你好运

# titanium-mobile - appcelerator 钛 - 全新安装后没有“新钛移动项目”菜单选项

> ID：14439056
> 
> 赞同：0
> 
> 时间：2013-01-21T12:52:07.950
> 
> 标签：titanium-mobile, appcelerator-mobile

我刚刚为 windows 8 (x64)、android sdk 等安装了最新的稳定钛。所有安装都正常，钛工作室的检查显示 android 安装正确。

问题是在“文件/新建”菜单下，我没有“钛移动项目”作为选项。观看和阅读有关开始使用 Titanium for mobile 的各种在线资源，我发现这是我需要单击的内容。

任何人都可以协助检查我应该验证我已在 ide 中安装的任何插件或其他任何可能看起来相关的插件吗？

确认; 我目前有 3 种项目类型。这些都是

钛项目... 钛模块项目... 项目...

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:08:21.513

钛项目是根据另一个论坛的新钛移动项目，因为不再包括钛桌面选项。

# c# - 将多个时区转换为本地时间

> ID：14439059
> 
> 赞同：0
> 
> 时间：2013-01-21T12:52:17.603
> 
> 标签：c#, datetime, timezone

我在 CST 时区保存日期时间，如何将 CST 日期时间更改为本地时间。

前任：

在 DB 中，日期时间为 2013-01-21 06:50:00，其时区为 CST。此日期时间应转换为本地当前时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:55:12.007

将它们保存为 UTC 时间，然后在加载到 UI 时将它们转换为本地时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:55:45.887

示例代码就像

```
using System;

public class Example
{
 public static void Main()
 {
  DateTime date1 = new DateTime(2010, 3, 14, 2, 30, 0, DateTimeKind.Local);
  Console.WriteLine("Invalid time: {0}", 
                    TimeZoneInfo.Local.IsInvalidTime(date1));
  DateTime utcDate1 = date1.ToUniversalTime();
  DateTime date2 = utcDate1.ToLocalTime();
  Console.WriteLine("{0} --> {1}", date1, date2);      
  }
 }
// The example displays the following output: 
//       Invalid time: True 
//   3/14/2010 2:30:00 AM --> 3/14/2010 3:30:00 AM 
```

希望这可以帮助

# python - 读取缺少数据的表

> ID：14439060
> 
> 赞同：1
> 
> 时间：2013-01-21T12:52:29.570
> 
> 标签：python, pandas

是否可以使用基于列的标签读取缺少数据的表？我有下表：

```
 Band                             Band                %  of
  Band   Peak         for                          %   for  Area           Total
   No.   Pos.   Delta Sep.  Separ.  Height  FWHM Gauss Area Ratio   Area   Area 
    4   214.01   4.67   3     2.70    5737  1.69   90    3   0.67   10836  30.76
    2   212.04   2.70   1     2.70    1391  2.10   90    1   0.67    3254   9.24
    3   211.31   1.97   0             8580  1.70   90    0          16255  46.14
    1   209.34   0.00   0             2193  2.00   90    0           4882  13.86 
```

我想以基于列的方式阅读它。我相信`pandas`可以做到。我会跳过前两行——但是如何`pandas`以基于列的方式读取剩余的数据？

解析此类表（缺少数据）的任何其他解决方案也可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:31:22.733

哦，我设法做到了：

```
asciitable.read("1.txt", Reader=asciitable.FixedWidthNoHeader,
                col_starts=( 8, 16, 22, 28, 36, 44, 49, 55, 60, 67, 74),
                col_ends  =(14, 21, 25, 34, 42, 48, 53, 58, 65, 73, 80)) 
```

丢弃前三行。

**编辑**：

正如[DSM](https://stackoverflow.com/users/487339/dsm)所指出的——同样可以通过以下方式实现`pandas`：

```
pandas.read_fwf("1.txt", widths=[6, 8, 7, 5, 8, 8, 6, 6, 5, 6, 8, 7], skiprows=3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:52:58.533

关于什么：

```
import pandas as pd
pd.read_table('example.txt', skiprows=3, sep=r'\s*' ) 
```

如果中间只有空格，我认为它不会起作用，但如果没有样本数据就很难说。

# excel - 如何使用 VBA 将工作表从一个工作簿复制到另一个工作簿？

> ID：14439070
> 
> 赞同：0
> 
> 时间：2013-01-21T12:52:50.493
> 
> 标签：excel, vba

我尝试使用以下代码将工作表从我的模板文件复制到并自动生成工作表。

```
 Set wb = Workbooks("Generated.xlsx")
For Each sh In Workbooks("TemplateASA.xlsx").Worksheets
   sh.Copy After:=wb.Sheets(wb.Sheets.Count)
Next sh 
```

但我在编译时不断收到此错误：运行时错误'9'下标超出范围

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:51:30.563

这将更容易找到问题 - 如上所述，我猜工作簿尚未打开。如果我是对的，这`Set wbTemplate = Workbooks("TemplateASA.xlsx")`条线就会失败。这未经测试 - 如果它不起作用，请告诉我。

```
Sub CopyWorksheets()

Dim wbGenerated as Workbook, wbTemplate as Workbook
Dim ws as Worksheet

Set wbGenerated = Workbooks("Generated.xlsx")
Set wbTemplate = Workbooks("TemplateASA.xlsx") 'If this line fails, remove it and uncomment the following line
' Set wbTemplate = Workbooks.Open("TemplateASA.xlsx", ,True) ' Opens as read only
For Each sh In wbTemplate.Worksheets
   sh.Copy After:=wbGenerated.Sheets(wbGenerated.Sheets.Count)
Next sh
'wbTemplate.Close(False) 'Only required if you opened wbTemplate above

End sub 
```

# ios - 如何过滤 NSArray

> ID：14439072
> 
> 赞同：-1
> 
> 时间：2013-01-21T12:52:51.853
> 
> 标签：ios, objective-c, properties, filter, nsarray

嘿，我想过滤一个 NSArray。在这个数组中有很多信息，如姓名、城镇、电话号码等。但有些城镇在阵列中是两倍或三倍。
我有财产，里面有一个城镇。
所以我只想要数组中与属性匹配的那些对象。

例如：在 Array 中表示：

1.  弗兰克，纽约，123456
2.  奥利弗，纽约，123456
3.  托马斯，波士顿，123456

当房产是纽约时，我想要 olny 对象 1 和 2。

有谁知道我该怎么做？

这是我的代码：

```
NSString *filterString = newsArticle;
NSPredicate *prediacte = [NSPredicate predicateWithFormat:[NSString stringWithFormat:@"Ort == '%@'",filterString]];
newsTownArray = [news filteredArrayUsingPredicate:predicate]; 
```

当我上线时：

```
cell.textLabel.text=[[newsTownArray objectAtIndex:indexPath.row] objectForKey:"Name"]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:58:41.910

为此，您需要使用[**NSPredicate**](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"town == 'New York'"];
[yourArray filterUsingPredicate:predicate]; 
```

您可以动态创建谓词，例如：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:[NSString stringWithFormat:@"town == '%@'",yourInput]]; 
```

这`yourInput`是一个`NSString`包含所需城镇名称的。

请查看这些文章以获取更多详细信息：

1.  [**代码项目**](http://www.codeproject.com/Articles/68468/How-To-Do-Amazingly-Simple-Searches-With-NSArray-N)
2.  [**用你的面包**](http://useyourloaf.com/blog/2010/10/19/searching-arrays-with-nspredicate-and-blocks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:58:33.697

**但是，您可以使用NSPredicate**在数组中执行此操作，但我建议您做一些不同的事情，这将增加您的代码和良好的编程方式。

创建`Person`具有这些属性的自定义类`name`，`city`并且`telephone`.

创建一个数组来存储`Person`.

在此之后，您可以很容易地操作/过滤/排序等。

* * *

```
NSString *filterCity=@"Delhi";

NSMutableArray *yourArray=[NSMutableArray arrayWithArray:self.persons];
NSPredicate *predicate = [NSPredicate predicateWithFormat:[NSString stringWithFormat:@"city == '%@'",filterCity]];
[yourArray filterUsingPredicate:predicate];

NSLog(@"Filtered");
for (Person *per in yourArray) {
    NSLog(@"Name: %@, City: %@, Telephone: %@",per.name, per.city, per.telephone);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:03:02.497

使用此代码

```
NSMutableArray *subpredicates = [NSMutableArray array];

    for(NSString *term in arryOfWordsToBeSearched) {
        NSPredicate *p = [NSPredicate predicateWithFormat:@"self contains[cd] %@",term];
        [subpredicates addObject:p];
        }

     NSPredicate *filter = [NSCompoundPredicate andPredicateWithSubpredicates:subpredicates];
    result = (NSMutableArray*)[arryOfDummyData filteredArrayUsingPredicate: filter]; 
```

# html - 如何模仿html选择框

> ID：14439074
> 
> 赞同：1
> 
> 时间：2013-01-21T12:53:00.247
> 
> 标签：html, css, html-select

我想要一个普通的 html 选择，但不是文本有 css/图像。现在我知道除了 Firefox 之外的任何浏览器都无法做到这一点，但我想知道是否有办法在**不**使用 JavaScript 的情况下解决这个问题。我的网站必须显示在功能手机（即不是智能手机）上，而 JavaScript 不能在这些手机上运行。有没有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:28:43.837

经过几个小时的工作，我找到了一个合理的解决方案。如果您希望“图像”出现在您的 html 中，请选择简单地使用 font-face。因此，请在线下载一种在其字母表中有星号的字体。然后在css中使用以下内容。确保您的 url 路径正确：

```
font-family: 'WebSymbolsRegular';
        src: url('../css/websymbols-regular-webfont.eot');
        src: url('../css/websymbols-regular-webfont.eot?#iefix') format('embedded-opentype'),
             url('../css/websymbols-regular-webfont.woff') format('woff'),
             url('../css/websymbols-regular-webfont.ttf') format('truetype'),
             url('../css/websymbols-regular-webfont.svg#WebSymbolsRegular') format('svg');
        }

    #Condition
    {
        font-family: 'WebSymbolsRegular';
    } 
```

然后在您的 html 中选择以下内容：

```
<select id = "Condition">
      <option >R</option>
      <option >RR</option>
      <option >RRR</option>
      <option >RRRR</option>
      <option >RRRRR</option>
</select> 
```

我们使用 R 是因为 R 是表示此给定字体中的星形的字母。也看看下面的[链接](http://net.tutsplus.com/tutorials/html-css-techniques/building-a-5-star-rating-system-with-jquery-ajax-and-php/)。它真的有帮助

# c# - 显示来自 system.data.datarow 的行号

> ID：14439077
> 
> 赞同：1
> 
> 时间：2013-01-21T12:53:06.637
> 
> 标签：c#, asp.net, datatable, datarow

所以我正在将一个 excel 文档导入我的项目

```
DataSet result = excelReader.AsDataSet();

 if (result != null)
            {
                foreach (System.Data.DataTable t in result.Tables)
                {
                    if (t != null && t is System.Data.DataTable)
                    {
                        System.Data.DataTable table = t as System.Data.DataTable;

                        Items Lastitem = new Items();

                        foreach (System.Data.DataRow r in t.Rows)
                        {
                            if (r != null && r is System.Data.DataRow)
                            {
                                //new ItemType
                                if (r.ItemArray[0] != null)
                                { 
```

然后我运行检查以检查当我得到空列时哪一列是空的，然后我想得到空行。我努力了：

```
if (checkIfColumnisEmpty(r.ItemArray[0]) && !checkIfColumnisEmpty(r.ItemArray[1]))
                                        {
                                            throw new ImportBOQException("Error importing document: First column is empty at row " + r); 
```

r 作为数据行，telesense 允许我 rowError、rowState 等...但不是行号....有什么想法吗？}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:03:54.560

您可以在遍历行时使用 a`For Loop`而不是，如下所示：`Foreach`

```
for (int i = 0; i < t.Rows.Count; i++)    
{

    // Do Your Null Checking and throw the exception with iteration number + 1

    if (checkIfColumnisEmpty(t.Rows[i].ItemArray[0]) && !checkIfColumnisEmpty(t.Rows[i].ItemArray[1]))
       {
          throw new ImportBOQException("Error importing document: First column is empty at row " + (i + 1));
       }
} 
```

# javascript - 选择特定 JSON 键的值对其进行求和

> ID：14439078
> 
> 赞同：0
> 
> 时间：2013-01-21T12:53:07.190
> 
> 标签：javascript, json, sum, d3.js, key-value

对于如下所示的 JSON 对象：

```
[{
    "gemeente": "amsterdam",
    "stadsdeel": "centrum",
    "adres": "damrak 28-30",
    "bvo": "2000",
},
{
    "gemeente": "amsterdam",
    "stadsdeel": "centrum",
    "adres": "damrak 66",
    "bvo": "1500",
    "": ""
}] 
```

我试图获得价值的总和`bvo`。在这种情况下，输出将是 3500。然后我需要使用这个数字进行数据可视化。我正在工作`d3.js`，但任何 Javascript 解决方案都可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-01T18:04:34.500

[D3 用d3.sum](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_sum)很好地处理了这个问题，没有适当的测试我认为语法应该是这样的

```
d3.sum(list, function(d) { return d.bvo; }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:40:34.920

你需要的是

```
var list = [{
    "gemeente": "amsterdam",
    "stadsdeel": "centrum",
    "adres": "damrak 28-30",
    "bvo": "2000",
},
{
    "gemeente": "amsterdam",
    "stadsdeel": "centrum",
    "adres": "damrak 66",
    "bvo": "1500",
    "": ""
}];

// code to sum the values
var sum = 0;
for(var len = list.length, i=0; i < len; i++){ // for each object in the list
    var item = list[i]; 
    sum += parseInt(item.bvo, 10); // parse its "bvo" element as integer and add it to the sum
}

// output to console the sum.. or do whatever you want with the sum here..
console.log(sum); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:26:48.563

我用常规的 Javascript 得到了答案：

```
var SumByTipe = {};
for (i in data) {
    var currtipe = data[i].tipe;
    if (currtipe in SumByTipe) {
        for (j in data[i]) {
            if (j != "tipe" && j != "mc") {
                SumByTipe[currtipe][j + '_total'] += parseFloat(data[i][j]);
            }
        }
    }
    else {
        var firstSum = {};
        for (j in data[i]) {
            if (j != "tipe" && j != "mc"){
                firstSum[j + '_total'] = parseFloat(data[i][j]);
            }
        }
        SumByTipe[currtipe] = firstSum;
    }
}
console.log(SumByTipe); 
```

虽然我真的不明白它是*如何*工作的，但它工作得很好。:-)

# c# - IHTMLDocument2 - 点击 iframe 内的按钮

> ID：14439081
> 
> 赞同：0
> 
> 时间：2013-01-21T12:53:12.400
> 
> 标签：c#, ihtmldocument2

我正在为一些非常旧的应用程序创建一个 DCOM 扩展。主应用程序内部有 IE 控件。

使用 C# 我能够获得该 IE 控件的处理程序，如下所示：

```
Process pr = Process.GetCurrentProcess();

var title = pr.MainWindowTitle;
if(title.IndexOf("My old application -")<0)
{
    MessageBox.Show("No such window");
    return;
}
var wlwWindow = pr.MainWindowHandle;
var ieWindow = PI.FindWindowRecursive(wlwWindow, "Internet Explorer_Server", null);
if (ieWindow == IntPtr.Zero)
{
    MessageBox.Show("Unable to locate IE window.");
    return;
}
var myDocument= PI.GetIEDocumentFromWindowHandle(ieWindow);
MessageBox.Show(myDocument.url); 
```

这是我的辅助方法：

```
 public static IntPtr FindWindowRecursive(IntPtr parent, string windowClass, string windowCaption)
    {
        var found = FindWindowEx(parent, IntPtr.Zero, windowClass, windowCaption);
        if (found != IntPtr.Zero)
        {
            return found;
        }

        var child = FindWindowEx(parent, IntPtr.Zero, null, null);
        while (child != IntPtr.Zero)
        {
            found = FindWindowRecursive(child, windowClass, windowCaption);
            if (found != IntPtr.Zero)
            {
                return found;
            }
            child = GetNextWindow(child, 2);
        }
        return IntPtr.Zero;
    }

    public static IHTMLDocument2 GetIEDocumentFromWindowHandle(IntPtr hWnd)
    {
        IHTMLDocument2 htmlDocument = null;
        if (hWnd != IntPtr.Zero)
        {
            uint lMsg = RegisterWindowMessage("WM_HTML_GETOBJECT");
            UIntPtr lResult;
            SendMessageTimeout(hWnd, lMsg, UIntPtr.Zero, UIntPtr.Zero,
                SendMessageTimeoutFlags.SMTO_ABORTIFHUNG, 1000, out lResult);
            if (lResult != UIntPtr.Zero)
            {
                htmlDocument = ObjectFromLresult(lResult, typeof(IHTMLDocument).GUID, IntPtr.Zero) as IHTMLDocument2;
                if (htmlDocument == null)
                {
                    throw new COMException("Unable to cast to an object of type IHTMLDocument");
                }
            }
        }
        return htmlDocument;
    } 
```

这部分工作正常，我能够从 temp 获取该 html 页面的内容：

```
<body id="state" class="saveFavorite" onload="load()" onunload="RUIMaster.Destroy()" style="margin: 0px; padding: 0px; overflow: hidden;">
<p style="display: none;">
<object classid="clsid:22FD36F1-A133-11d4-A0E4-005056E2D8AA" height="0" width="0" id="RUIMaster">
</object>
</object>
<form>
<input id="id" type="hidden" value="" />
</form>
</p>
<iframe name="AAMain" style="margin: 0px; border: 0px; padding: 0px;" id="contents" src="rdaui_frame.htm" width="100%" height="100%" frameborder="0" />
</body> 
```

我必须使用 name 访问 iframe `AAMain`。
该 iframe 文档的内容如下所示：

```
<frameset cols="135,*" border="0" frameborder="no" framespacing="0">
    <frame name="Menu" scrolling="no" noresize marginwidth="0" marginheight="0" src="blank.htm">
    <frameset rows="310,*,31">
        <frame name="Top" noresize marginwidth="0" marginheight="0" src="blank.htm">
        <frame name="Centre" noresize marginwidth="0" marginheight="0" src="blank.htm">
        <frame name="Bottom" noresize marginwidth="0" marginheight="0" src="blank.htm">
    </frameset>
</frameset> 
```

所以基本上我必须访问名为**AAMain的****iframe**内的**框架**名称**Center**

 ****myDocument -> iframe(AAMain) -> frame(Centre) -> 然后点击图片

我试图迭代帧，`myDocument`但我得到无效的强制转换异常。

```
try
{
    FramesCollection frames = myDocument.frames;
    object index = 0;
    IHTMLWindow2 frame = (IHTMLWindow2)frames.item(ref index);
    var xx = (HTMLDocument)frame.document;
    MessageBox.Show(xx.body.innerHTML);
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

甚至像这样的代码：

```
MessageBox.Show(myDocument.frames.length.ToString()); 
```

给了我同样的演员例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-24T14:27:05.220

尝试使用单线程架构（STA 线程）访问帧集合。在确认框架内容的功能性 nunit 测试中，这对我有用。在切换线程模型之前，我遇到了相同的转换错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T10:20:06.123

根据[http://www.w3schools.com/jsref/prop_frame_contentwindow.asp](http://www.w3schools.com/jsref/prop_frame_contentwindow.asp) ，这应该可以通过 iframe 元素的 contentWindow 或 contentDocument 属性实现，但我无法让它工作，contentWindow 似乎返回一些元素，但它具有空文档属性（在我的情况下使用 IE9）。

由于这个问题已经发布了一段时间，我想知道你是否设法在这方面取得了一些进展？****

# php - 在贝宝熟练的 ExecutePayment 调用中修改辅助接收方金额

> ID：14439085
> 
> 赞同：1
> 
> 时间：2013-01-21T12:53:20.823
> 
> 标签：php, paypal-adaptive-payments, chained, delay

我已经实施了 Paypal Adeptive (Delayed Chained Payment)，并且运行良好。

我首先调用“支付”从客户（预先批准）接收付款到我的企业帐户，然后在下一次事件中我调用“ExecutePayment”支付辅助接收者（预先批准）

我的问题是“我可以在 ExecutePayment 方法中更改金额以向二级收款人支付更少或更多的费用，或者无法更改金额”？

# c#-4.0 - 从 silverlight 中的给定 URL 下载文件

> ID：14439086
> 
> 赞同：0
> 
> 时间：2013-01-21T12:53:27.173
> 
> 标签：c#-4.0, silverlight-4.0

我正在尝试在 IE8（SL 4）中使用 HtmlPage.Window.Navigate() 下载文件。新的浏览器窗口短暂出现然后消失。

我为受信任的站点和弹出窗口阻止程序尝试了不同的设置，但似乎没有任何帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T04:37:31.007

您应该尝试使用**超链接按钮**来执行此操作。或者尝试[这个解决方案来打开一个新窗口并传递一个 URL](https://stackoverflow.com/questions/14392390/how-to-play-swf-file-in-silverlight)

快乐的编码...

# python - 打开多个文件

> ID：14439092
> 
> 赞同：0
> 
> 时间：2013-01-21T12:53:44.033
> 
> 标签：python

我想打开多个文件名几乎没有变化的文件。

例如，我想打开

```
abc.001.xyz.010.trj 
```

对数据文件进行一些操作后，我想将结果保存到文件中：

```
out.abc.001.xyz.010.trj.dat 
```

这个过程应该一直持续到 10 个文件。

我知道如何打开这个文件

```
readfile = abc.001.xyz.010.trj
f = open(readfile, "r") 
```

后来我尝试写入文件

```
outfile = out.readfile
f = open(outfile, "w") 
```

但我失败了。期望得到输出文件

```
 out.abc.001.xyz.010.trj.dat 
```

对于每个循环。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T12:58:58.863

> 我知道如何打开这个文件

*不，你没有。*您对 的初始化`filename`无效，将导致`SyntaxError`.

你应该写

```
readfile = "abc.001.xyz.010.trj"
f = open(readfile, "r") 
```

并以类似的方式打开输出文件

```
outfile = "out."  + readfile
f = open(outfile, "w") 
```

顺便说一句，在您的代码中还有其他问题不是很常规。

通常人们倾向于`open`文件和`close`它并且不依赖垃圾收集，甚至更好的是，将整个文件操作包含在一个[with](http://docs.python.org/2/reference/compound_stmts.html#the-with-statement)构造中

# java - 在生产服务器上出现 Google 分析“invalid_grant”错误

> ID：14439093
> 
> 赞同：1
> 
> 时间：2013-01-21T12:53:57.487
> 
> 标签：java, google-analytics-api, ubuntu-11.04, ubuntu-12.10

我正在使用 Google 分析 api 从我的分析帐户中检索数据（在 java 中）。我的代码在我的计算机（Windows 7）上运行良好，我也在 Linux 计算机上测试了相同的代码。在这两种情况下它都可以正常工作，但是当我将相同的代码放在生产服务器中时，它会给出以下错误。

```
Query Created: {dimensions=ga:customVarValue1,ga:keyword,ga:source,ga:medium,ga:campaign,ga:adGroup,ga:date, end-date=2013-01-21, ids=ga:xxxxxxxx, max-results=10000, metrics=ga:visitors, sort=ga:date, start-date=2013-01-20, start-index=1}
com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
{
  "error" : "invalid_grant"
}
        at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
        at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:303)
        at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:323)
        at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:320)
        at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:505)
        at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:266)
        at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:859)
        at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:399)
        at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:328)
        at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:449) 
```

我再次检查了代码，但我认为代码没有问题。你认为有什么战略上的错误会导致这个问题吗？因为错误与身份验证有关，所以如果它在计算机上成功运行，它应该可以在任何地方运行，对吧？

**编辑：**相同的程序在 windows7、ubuntu 11.04 中运行良好，但此错误仅在 ubuntu 12.10 中发生

# css - 创建具有背景和前景图像的按钮

> ID：14439094
> 
> 赞同：0
> 
> 时间：2013-01-21T12:54:05.203
> 
> 标签：css

我有一个小问题试图让以下工作，并且不确定这是否是 CSS3 旨在处理的事情。我环顾四周，发现支持多个背景图像，但是尝试了许多示例都导致了 nada。

这是渲染我的按钮的主要 CSS 代码：

```
.button {
    background:#eee url(images/button.gif) repeat-x 0 0;
    border:solid 1px #b1a874;
    color:#7f7f7f;
    font-size:11px;
    padding:2px 6px 2px 6px;
    cursor:pointer;
    line-height:14px !important;
} 
```

上面的代码生成了很好的标准按钮。但现在我想在某些按钮上添加图标，例如打印按钮。我使用了 2 组额外的 CSS 类：

```
input.addImage {
    background-repeat: no-repeat;  /* once */
    background-position: 5px 2px;  
    padding-left: 16px;     
    vertical-align: middle;
} 
```

和：

```
input.Print {
    background-image: url(../img/buttons/print.png); /* 16px x 16px */
} 
```

如您所见，我的图像实际上是 16x16，非常适合按钮。然而，原始背景图像被完全剥离，背景颜色保持透明。

我敢肯定，如果可能的话，这是我忽略的基本内容，并期待解决这个问题。

最后是按钮的代码：

```
<input type="button" class="button addImage Print" ... > 
```

感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:01:46.247

仅在同一个 CSS 类/元素定义中支持多个背景。意味着，您必须在`.button`.

您`.print`必须包含默认背景，也用逗号分隔，然后是您的`print.png`图标。

**编辑**

我的回答不是很清楚。你必须先指定背景，它应该在另一个之上。这是一些带有随机图片的示例代码。

演示：http: [//jsfiddle.net/RzWfp/](http://jsfiddle.net/RzWfp/)

```
.button {
    background-image: url(http://www.myinkblog.com/wp-content/uploads/2009/02/background2.jpg);
    border:solid 1px #b1a874;
    color:#7f7f7f;
    font-size:11px;
    padding:2px 6px 2px 6px;
    cursor:pointer;
    line-height:14px !important;
}

.button-test {
    background-image:  url(http://www.famfamfam.com/lab/icons/silk/icons/feed.png), url(http://www.tutorial9.net/wp-content/uploads/2008/07/air-balloon-gradient.jpg);   
    background-position: left center, center center;
    background-repeat: no-repeat;
    padding-left: 20px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:01:55.727

当您在 CSS 中应用属性时，它会完全覆盖之前为该元素定义的任何属性。您需要做的是告诉它为元素应用 2 个背景，如下所示：

```
.button.Print {
    background-image: url(images/button.gif), url(../img/buttons/print.png);
} 
```

# oracle - Oracle Delete Statement：级联删除删除了多少行

> ID：14439097
> 
> 赞同：3
> 
> 时间：2013-01-21T12:54:10.153
> 
> 标签：oracle, oracle-sqldeveloper, cascading-deletes

我正在执行一个类似的语句

```
DELETE FROM USER WHERE USER_ID=1; 
```

在 SQL 开发人员中。

由于在许多表中都引用了用户（例如，用户有订单、设置……），我们激活了 ON DELETE CASCADE，这样我们就不必手动删除每一行。然而，在开发过程中，我们很想知道有多少行以及哪些表被级联删除“自动”删除。

有什么办法可以找出来。通过 SQL 语句，直接在 sqldeveloper 中的日志文件或任何其他想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:46:50.143

虽然这对于 sql%rowcount 是不可能的，但如果您编写触发器代码，则有可能，但这意味着您需要在要监视的所有表上都有一个触发器。触发器也会稍微减慢操作速度。

例如：

```
SQL> select * from one;

        ID
----------
         1
         2

SQL> select * from child_of_one;

        ID       O_ID
---------- ----------
         1          1
         2          1
         3          1
         4          2
         5          2
         6          2
         7          2
         8          2 
```

我们想要一个包规范来保存一组表+计数：

```
SQL> create or replace package foo
  2  as
  3    type rowcount_tab is table of pls_integer index by varchar2(30);
  4    t_rowcount rowcount_tab;
  5  end foo;
  6  /

Package created. 
```

我们希望顶层表上的触发器将这些计数重置为零：

```
SQL> create or replace trigger one_biud
  2  before insert or update or delete
  3  on one
  4  declare
  5  begin
  6    foo.t_rowcount.delete;
  7  end;
  8  /

Trigger created. 
```

这假设您只对从顶级表中删除的数组感兴趣。如果没有，你会希望在每个表上都有一个触发器`foo.t_rowcount.delete('TABLE_NAME')`。

现在在每个感兴趣的表上的每一行触发器之后设置数组：

```
SQL> create or replace trigger one_aiudfer
  2  after insert or update or delete
  3  on one
  4  for each row
  5  declare
  6  begin
  7    if (foo.t_rowcount.exists('ONE'))
  8    then
  9      foo.t_rowcount('ONE') := nvl(foo.t_rowcount('ONE'), 0)+1;
 10    else
 11      foo.t_rowcount('ONE') := 1;
 12    end if;
 13  end;
 14  /

Trigger created.

SQL> create or replace trigger child_of_one_aiudfer
  2  after insert or update or delete
  3  on child_of_one
  4  for each row
  5  declare
  6  begin
  7    if (foo.t_rowcount.exists('CHILD_OF_ONE'))
  8    then
  9      foo.t_rowcount('CHILD_OF_ONE') := nvl(foo.t_rowcount('CHILD_OF_ONE'), 0)+1;
 10    else
 11      foo.t_rowcount('CHILD_OF_ONE') := 1;
 12    end if;
 13  end;
 14  /

Trigger created. 
```

现在当我们删除或其他时：

```
SQL> delete from one where id = 1;

1 row deleted.

SQL> declare
  2    v_table varchar2(30);
  3  begin
  4    v_table := foo.t_rowcount.first;
  5    loop
  6       exit when v_table is null;
  7             dbms_output.put_line(v_table || ' ' || foo.t_rowcount(v_table) || ' rows');
  8             v_table := foo.t_rowcount.next(v_table);
  9     end loop;
 10  end;
 11  /
CHILD_OF_ONE 3 rows
ONE 1 rows

PL/SQL procedure successfully completed.

SQL> delete from one where id = 2;

1 row deleted.

SQL> declare
  2    v_table varchar2(30);
  3  begin
  4    v_table := foo.t_rowcount.first;
  5    loop
  6       exit when v_table is null;
  7             dbms_output.put_line(v_table || ' ' || foo.t_rowcount(v_table) || ' rows');
  8             v_table := foo.t_rowcount.next(v_table);
  9     end loop;
 10  end;
 11  /
CHILD_OF_ONE 5 rows
ONE 1 rows 
```

# unit-testing - 使用索引测试 neo4j

> ID：14439103
> 
> 赞同：0
> 
> 时间：2013-01-21T12:54:19.367
> 
> 标签：unit-testing, nosql, neo4j

我想用 nosql 单元测试我的 neo4j 项目。只要我不需要 lucene 索引，它就可以正常工作。有没有办法用索引创建一个测试数据库？我认为graphml没有提供索引的可能性，所以我尝试像这样使用自动索引：

```
@Before
public void startAutoIndex(){
    AutoIndexer<Node> nodeAutoIndexer = graphDb.index().getNodeAutoIndexer();
    nodeAutoIndexer.startAutoIndexingProperty( "id" );
    nodeAutoIndexer.startAutoIndexingProperty( "refname" );
    nodeAutoIndexer.setEnabled(true);
} 
```

这对我不起作用。还有另一种实现自动索引的方法吗？

最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:10:17.063

一般来说，两种方式。

1.  要么你使用`geoff`xml 导出格式

2.  或使用您的graphml，但使用该`conf/server.properties`文件在服务器端设置自动索引。在那里，设置这些行：

    node_auto_indexing=true
    node_keys_indexable=id,refname

重新启动数据库并执行 graphml 导入（假设导入的节点具有`id`和`refname`作为它们的属性 - 如果您需要 neo4j 数据库的通用 id 而不是唯一的，则无需将 id 指定为索引。）。

# java - Java：在二维数组中搜索单词

> ID：14439109
> 
> 赞同：1
> 
> 时间：2013-01-21T12:54:41.153
> 
> 标签：java, search, multidimensional-array

我已经学习 Java 大约 4 个月了，它是我学习的第一门编程语言。对于学校，我们必须做一个项目，一个基于控制台的游戏。我选择了Boggle。

我有一个带有骰子的 ArrayList，每个都有一个随机的“面朝上”，然后 ArrayList 被打乱，一个二维数组被每个面朝上的值填充。此时数组中充满了字符串，字符可能是更好的选择，但它很容易更改。

我面临的问题是我需要能够在数组中找到单词。Boggle 中的单词可以向任何方向前进，每个唯一块每个单词只能使用一次，但路径可以交叉，您也可以对角搜索。我设法找到数组中是否存在第一个字母。如果不是，则可以中止搜索，如果存在，则需要开始搜索该单词的第二个字符，该字符必须在第一个字符的块周围。

我做了一些数学运算，发现它总是例如“i-1 and j-1”作为周围块的左上角。我解决了这个问题，但似乎无法找到单词......另外，如果周围有 2 个“e”，我不知道如何搜索每个“e”的单词。到目前为止，这是我的代码：

这是我此刻最重要的课，游戏板课

```
public class Gameboard {

private List<Dice> dices = new ArrayList<Dice>();
private final int boardSize;
private String[][] board;
private boolean [][] blocksAvailable;
private Random random = new Random();

public GameBoard() {
    // Making the board with a given size (will be changeable later but is "4" for now)
    boardSize = 4;
    board = new String[boardSize][boardSize];
    blocksAvailable = new boolean[boardSize][boardSize];
    for(int i = 0; i < boardSize; i++) {
        for(int j = 0; j < boardSize; j++) {
            blocksAvailable[i][j] = true;
        }
    }
}

public String[][] getBoard() {
    return board;
}

public int getFullSize() {
    return boardSize*boardSize;
}

public void makeBoard() {
    //random "side up" for each dice
    for(int i = 0; i < dices.size(); i++) {
        dices.get(i).setSideUp();
    }

    // Shuffle all dices
    Collections.shuffle(dices);

    // Fill the board with the values of the dices
    int counter = 0;
    for(int i = 0; i < boardSize; i++) {
        for(int j = 0; j < boardSize; j++) {
            board[i][j] = dices.get(counter++).getSideUp();
        }
    }

}

public String showBoard() {
    //Show the board, each block divided by "|"
    String str = "";
    for(int i = 0; i < boardSize; i++) {
        for(int j = 0; j < boardSize; j++) {
            str += String.format("|%s|", board[i][j].toString());
            if(j == 3) {
                str += "\n";
            }
        }
    }
    return str;
}

public void addDices() {
    dices.add(new dice("R", "I", "F", "O", "B", "X"));
    dices.add(new dice("I", "F", "E", "H", "E", "Y"));
    dices.add(new dice("D", "E", "N", "O", "W", "S"));
    dices.add(new dice("U", "T", "O", "K", "N", "D"));
    dices.add(new dice("H", "M", "S", "R", "A", "O"));
    dices.add(new dice("L", "U", "P", "E", "T", "S"));
    dices.add(new dice("A", "C", "I", "T", "O", "A"));
    dices.add(new dice("Y", "L", "G", "K", "U", "E"));
    dices.add(new dice("Q", "B", "M", "J", "O", "A"));
    dices.add(new dice("E", "H", "I", "S", "P", "N"));
    dices.add(new dice("V", "E", "T", "I", "G", "N"));
    dices.add(new dice("B", "A", "L", "I", "Y", "T"));
    dices.add(new dice("E", "Z", "A", "V", "N", "D"));
    dices.add(new dice("R", "A", "L", "E", "S", "C"));
    dices.add(new dice("U", "W", "I", "L", "R", "G"));
    dices.add(new dice("P", "A", "C", "E", "M", "D"));
}

public boolean searchWord(String word) {
    String wordUp = woord.toUpperCase();
    String firstLetter = Character.toString(wordUp.charAt(0));

    for(int i = 0; i < boardSize;i++) {
        for(int j = 0; j < boardSize;j++) {
            if(firstLetter.equals(board[i][j]) == true) {

                int a = i;
                int b = j;
                String theLetter = "";
                // First letter found, continue search
                for(int h = 1; h < hetWoord.length(); h++) {
                    theLetter = Character.toString(wordUp.charAt(h));
                    int[] values = searchLetter(theLetter, a, b);
                    if(values[0] > -1) {
                        a = values[0];
                        b = values[1];
                    } else {
                        return false;
                    }
                }
                return true;

            }
        }
    }
    return false;
}

public int[] searchLetter(String letter, int i, int j) {
    int[] values = new int[2];

    try{if(board[i-1][j-1].equals(letter) && blocksAvailable[i-1][j-1] == true) {
        values[0] = i-1;
        values[1] = j-1;
        blocksAvailable[i-1][j-1] = false;
    }  else if(board[i-1][j].equals(letter) && blocksAvailable[i-1][j] == true) {
        values[0] = i-1;
        values[1] = j;
        blocksAvailable[i-1][j] = false;
    } else if(board[i-1][j+1].equals(letter) && blocksAvailable[i-1][j+1] == true) {
        values[0] = i-1;
        values[1] = j+1;
        blocksAvailable[i-1][j+1] = false;
    } else if(board[i][j-1].equals(letter) && blocksAvailable[i][j-1] == true) {
        values[0] = i;
        values[1] = j-1;
        blocksAvailable[i][j-1] = false;
    } else if(board[i][j+1].equals(letter) && blocksAvailable[i][j+1] == true) {
        values[0] = i;
        values[1] = j+1;
        blocksAvailable[i][j+1] = false;
    } else if(board[i+1][j-1].equals(letter) && blocksAvailable[i+1][j-1] == true) {
        values[0] = i+1;
        values[1] = j-1;
        blocksAvailable[i+1][j+1] = false;
    } else if(board[i+1][j].equals(letter) && blocksAvailable[i+1][j] == true) {
        values[0] = i+1;
        values[1] = j;
        blocksAvailable[i+1][j] = false;
    } else if(board[i+1][j+1].equals(letter) && blocksAvailable[i+1][j+1] == true) {
        values[0] = i+1;
        values[1] = j+1;
        blocksAvailable[i+1][j+1] = false;
    } else {
        values[0] = -1;  // If not found, negative values, easy to check in searchWord if letter was found
        values[1] = -1;
    }}catch (ArrayIndexOutOfBoundsException e) {

    }

    return values;
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T13:11:11.983

这可能会被删除，因为我不会回答你的问题。但是请，非常请，使用：

```
// instead of: board[i-1][j-1]

public String getBoardValue(int x, int y) {
  if (x<0 || x>=boardSize) return "";
  if (y<0 || y>=boardSize) return "";
  return board[x][y];
} 
```

使用这种辅助方法，您将

*   确保没有抛出 IndexArrayOutOfBoundsException
*   总是有一个非空的板值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:56:55.533

好吧，你问的有点复杂。你必须查看你的单词中所有可能的方向`Array`。我建议你应该看看迷你项目，看看他们`logic`的评估。你可以在谷歌上找到很多项目。示例[http://1000projects.org/java-projects-gaming.html](http://1000projects.org/java-projects-gaming.html)

我不是要您复制粘贴，而是要了解以适当的方式做事。几年前我在 中制作了一个 XO 游戏`c/c++`，可以给你检查 x 和 o 组合的代码（如果你愿意的话）（你可以弄出代码，语法差别不大）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:19:43.390

您的方法`searchLetter`可以重写以更易于理解。

```
public boolean isValid(int x, int y) {
   return x>= 0 && x < boardSize && y >=0 && y < boardSize;
}

public int[] searchLetter(String letter, int i, int j) {

   int[] values = new int[2];
  //initialization as not found.
   values[0] = -1;
   values[1] = -1; 
   for(int ix = i-1; ix <= i+1 ; ix++){
      for(int jx = j-1; jx <= j+1 ; jx++){
         if(i == ix && j == jx)
            //skip the cell from were the search is performed
            continue;

         if(isValid(ix,jx)
            && board[ix][jx].equals(letter) 
            && blocksAvailable[ix][jx] == true) {
              values[0] = ix;
              values[1] = jx;
              blocksAvailable[ix][jx] = false;
              //early return 
              return values;
         }
      }
    return values;
} 
```

即使没有评论，读者也会暗示这是某种邻近搜索。

事实是您的算法应该返回一个可能的下一个位置列表。上面的代码返回第一次出现。如果您将每对索引放在一个列表中而不是返回第一个索引，您将看到您的单词的所有候选字母。在这样做的同时，您将实现[呼吸优先搜索的 getNeighbour 或 adjancentVertexes。](http://en.wikipedia.org/wiki/Breadth-first_search)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-29T01:10:33.987

我在面试时被问到这个问题，我没有太多时间了，所以我向面试官解释了我将如何解决这个问题。他似乎对我的回答很满意，甚至没有要求我尝试编写代码，可能是因为他知道这个问题并不像看起来那么简单，而且我们没有足够的时间。面试结束后，我在家里试了一下，但我的解决方案有一些错误。一直在思考它并提出了我之前发布的想法，然后注意到这篇文章已经 3 年了，所以我决定编写它。此解决方案有效，但仍有改进空间：

```
import java.util.LinkedHashSet;
import java.util.Set;

public class StringsArrays {

    public static void main(String[] args) {
        final char[][] matrix = new char[4][4];
        matrix[0] = new char[] { 'G', 'A', 'B', 'C' };
        matrix[1] = new char[] { 'O', 'O', 'E', 'F' };
        matrix[2] = new char[] { 'O', 'H', 'O', 'I' };
        matrix[3] = new char[] { 'J', 'K', 'L', 'D' };

        System.out.println(search("JOOG", matrix)); //N
        System.out.println(search("BEOL", matrix)); //S
        System.out.println(search("AB", matrix));   //E
        System.out.println(search("FE", matrix));   //W
        System.out.println(search("HEC", matrix));  //NE
        System.out.println(search("DOOG", matrix)); //NW
        System.out.println(search("GOOD", matrix)); //SE
        System.out.println(search("FOK", matrix));  //SW        
        System.out.println(search("HO", matrix));

    }

    public static boolean search(final String word, char[][] matrix) {

        final char firstLetter = word.charAt(0);
        for (int y = 0; y < matrix.length; y++) {
            for (int x = 0; x < matrix[y].length; x++) {
                if (matrix[y][x] == firstLetter) {
                    final Set<String> words = readInAllDirections(word.length(), x, y, matrix);
                    if (words.contains(word)) {
                        return true;
                    }
                }
            }
        }

        return false;
    }

    enum Direction {
        NORTH, SOUTH,
        EAST, WEST,
        NORTH_EAST, NORTH_WEST,
        SOUTH_EAST, SOUTH_WEST
    }

    private static Set<String> readInAllDirections(final int length, final int x, final int y, final char[][] matrix) {
        final Set<String> words = new LinkedHashSet<>();
        for (final Direction direction : Direction.values()) {
            words.add(readWord(length, x, y, matrix, direction));
        }
        return words;
    }

    private static String readWord(final int length, final int xBegin, final int yBegin, final char[][] matrix, final Direction direction) {
        final int xEnd = getXEnd(xBegin, length, direction);
        final int yEnd = getYEnd(yBegin, length, direction);
        int x;
        int y;

        final StringBuilder matrixWord = new StringBuilder();

        if (direction == Direction.SOUTH) {
            if (yEnd > matrix.length-1) {
                return null;
            }
            for (y = yBegin; y <= yEnd; y++) {
                matrixWord.append(matrix[y][xBegin]);
            }
        }
        if (direction == Direction.NORTH) {
            if (yEnd < 0) {
                return null;
            }
            for (y = yBegin; y >= yEnd; y--) {
                matrixWord.append(matrix[y][xBegin]);
            }
        }
        if (direction == Direction.EAST) {
            if (xEnd > matrix[yBegin].length-1) {
                return null;
            }
            for (x = xBegin; x <= xEnd; x++) {
                matrixWord.append(matrix[yBegin][x]);
            }
        }
        if (direction == Direction.WEST) {
            if (xEnd < 0) {
                return null;
            }
            for (x = xBegin; x >= xEnd; x--) {
                matrixWord.append(matrix[yBegin][x]);
            }
        }
        if (direction == Direction.SOUTH_EAST) {
            if (yEnd > matrix.length-1 || xEnd > matrix[yBegin].length-1) {
                return null;
            }
            x = xBegin;
            y = yBegin;
            while (y <= yEnd && x <= xEnd) {
                matrixWord.append(matrix[y][x]);
                y++;
                x++;
            }
        }
        if (direction == Direction.SOUTH_WEST) {
            if (yEnd > matrix.length-1 || xEnd < 0) {
                return null;
            }
            x = xBegin;
            y = yBegin;
            while (y <= yEnd && x >= xEnd) {
                matrixWord.append(matrix[y][x]);
                y++;
                x--;
            }
        }
        if (direction == Direction.NORTH_EAST) {
            if (yEnd < 0 || xEnd > matrix[yBegin].length-1) {
                return null;
            }
            x = xBegin;
            y = yBegin;
            while (y >= yEnd && x <= xEnd) {
                matrixWord.append(matrix[y][x]);
                y--;
                x++;
            }
        }
        if (direction == Direction.NORTH_WEST) {
            if (yEnd < 0 || xEnd < 0) {
                return null;
            }
            x = xBegin;
            y = yBegin;
            while (y >= yEnd && x >= xEnd) {
                matrixWord.append(matrix[y][x]);
                y--;
                x--;
            }
        }

        return matrixWord.toString();
    }

    private static int getYEnd(final int y, final int length, final Direction direction) {
        if (direction == Direction.SOUTH || direction == Direction.SOUTH_EAST || direction == Direction.SOUTH_WEST) {
            // y0 + length + ? = y1
            return y + length - 1;
        }
        if (direction == Direction.NORTH || direction == Direction.NORTH_EAST || direction == Direction.NORTH_WEST) {
            // y0 - length + ? = y1
            return y - length + 1; 
        }

        // direction == Direction.EAST || direction == Direction.WEST)
        return y;
    }

    private static int getXEnd(final int x, final int length, final Direction direction) {
        if (direction == Direction.EAST || direction == Direction.NORTH_EAST || direction == Direction.SOUTH_EAST) {
            // x0 + length + ? = x1
            return x + length - 1;
        }
        if (direction == Direction.WEST || direction == Direction.NORTH_WEST || direction == Direction.SOUTH_WEST) {
            // x0 - length + ? = x1
            return x - length + 1;
        }

        // direction == Direction.NORTH || direction == Direction.SOUTH)
        return x;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-28T22:08:07.937

一个提示：一旦你找到了第一个字母，而不是一个一个地寻找下一个字母，只需计算你可以从那个点得到的 8 个相同长度的可能单词。根据该字母在黑板上的位置，您可能会发现少于 8 个。一旦你能够为一个方向弄清楚这一点，将这个逻辑转换为其他可能的方向就会更容易。然后你只需要比较这些单词，如果没有匹配，找到首字母并重复相同的过程。

# php - 表单没有选择要发布的变量

> ID：14439119
> 
> 赞同：1
> 
> 时间：2013-01-21T12:55:01.430
> 
> 标签：php, html, forms

我的测试PHP提交代码：

```
<?php 
if($_POST['create']) { echo $_POST['name']; }
?> 
```

我的 HTML 表单代码：

```
<form class="form-horizontal" id="ConsultantSignUp" method="post" action="#">

<div class="control-group">
    <label class="control-label" for="inputForename">Name</label>
    <div class="controls">
        <input type="text" class="input-xlarge" id="name" name="name" rel="popover" data-content="Enter your first and last name." data-original-title="Full Name">
    </div>
</div>

<div class="control-group">
        <label class="control-label" for="input01"></label>
        <div class="controls">
            <button type="submit" class="btn btn-success" rel="create" title="create" id="create" name="create">Create My Account</button>
        </div>

    </div>

</form> 
```

我的错误是提交后它甚至没有打印出名称。我检查了 PHP 错误日志，它说：

> PHP 注意：未定义索引：在第 2 行的 /Users/ ***** *** /sites/signup.php 中创建

第 2 行是 'if($_POST['create']) { echo $_POST['name']; }'。

我知道 isset() 方法可以删除未定义索引通知，但是，我只想测试我的表单！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:01:03.403

这是我的总代码...这在 Chrome、Explorer 和 Firefox 中非常适合我。只需检查一下

```
<?php
    if(isset($_POST['create'])) 
    { 
        echo $_POST['name']; 
    }
    else
    {
?>
<form class="form-horizontal" id="ConsultantSignUp" method="post" action="#">

<div class="control-group">
<label class="control-label" for="inputForename">Name</label>
<div class="controls">
    <input type="text" class="input-xlarge" id="name" name="name" rel="popover" data-content="Enter your first and last name." data-original-title="Full Name">
</div>
</div>
<div class="control-group">
    <label class="control-label" for="input01"></label>
    <div class="controls">
        <button type="submit" class="btn btn-success" rel="create" title="create" id="create" name="create">Create My Account</button>
    </div>
</div>

<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:02:05.150

当您使用 isset() 函数时，“未定义索引”通知将消失。当还发布了未选中的复选框时，通常会发生这种情况。

错误只是因为提交按钮上没有传递“值”并且提交按钮是空的。

将提交按钮替换为，

```
<button value='submitbtn' type="submit" class="btn btn-success" rel="create" title="create" id="create" name="create">Create My Account</button> 
```

PS ONLY (value='submitbtn') 被添加到您的原始按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:58:50.363

您`<button ... name="create">`没有，`value`因此它将提交一个空字符串并`$_POST['create']`评估为假。

给它一个值。

# html - 之间的差距 s

> ID：14439124
> 
> 赞同：8
> 
> 时间：2013-01-21T12:55:05.500
> 
> 标签：html, css, html-lists, gaps-in-visuals

为了避免长列表，我将我的 li 设置为 float: left 以便它们交替行。但是，当 li 中的内容占用两行时，有时这会导致元素之间的无意间隙。我的 HTML 是：

```
<ul class="gmc-ingredient-list">                                   
<li>500g Tagliatelle</li>                                                                   
<li>50g wortel</li>                                 
<li>50g ui</li>                                  
<li>50g bleekselderij</li>                                  
<li>100g pancetta</li>                                  
<li>200g half-om-half-gehakt</li>                                  
<li>200g rundergehakt</li>                                  
<li>200 ml Primitivo (rode wijn)</li>                                  
<li>200ml runderbouillon</li>                                  
<li>5 eetlepels tomatenpuree</li>                                  
<li>Olijfolie</li>                                  
<li>Zeezout</li>                                  
<li>Verse peper</li>                                             
</ul> 
```

我的 CSS 是：

```
ul.gmc-ingredient-list { 
margin: 0; 
padding: 0;
list-style: none; 
width: 300px; 
}

ul.gmc-ingredient-list li { 
background: url(http://allesoveritaliaanseten.nl/wp-content/uploads/2012/11/aoie-list.png) no-repeat scroll left top transparent; 
list-style: none outside none;
padding: 0px 0 0 20px; 
width: 130px; 
float: left;
} 
```

输出看起来像[http://allesoveritaliaanseten.nl/ragu-alla-bolognese/](http://allesoveritaliaanseten.nl/ragu-alla-bolognese/)

但也有一些情况，一个 li 占用两行，输出就很好，比如[http://allesoveritaliaanseten.nl/italiaanse-tomatensoep/](http://allesoveritaliaanseten.nl/italiaanse-tomatensoep/)

我怎样才能停止显示这些差距的列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:10:52.667

使用 css3，您可以将列添加到列表中

```
ul.gmc-ingredient-list {
    margin: 0;
    padding:0;
    -moz-column-count: 2;
    -moz-column-gap: 0;
    -webkit-column-count: 2;
    -webkit-column-gap: 0;
    column-count: 2;
    column-gap: 0;
    width:300px;
}
ul.gmc-ingredient-list li {
    background: url(http://allesoveritaliaanseten.nl/wp-content/uploads/2012/11/aoie-list.png) no-repeat scroll left top transparent;
    list-style: none outside none;
    padding: 0px 0 0 20px;
    width:130px;
} 
```

不要忘记从 li 中移除浮子

示例：http: [//jsfiddle.net/LWBdp/3/](http://jsfiddle.net/LWBdp/3/)

**IE 问题** CSS 列似乎不适用于 IE，如果您将 float:left 留在其中，它看起来就像您在 IE 中使用的那样，但在其他浏览器中看起来会更好！

有关 css-columns 的更多信息，请查看[w3schools上的这篇文章](http://www.w3schools.com/css3/css3_multiple_columns.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:05:05.263

我建议您使用[http://www.csscripting.com/css-multi-column/](http://www.csscripting.com/css-multi-column/)

我现在使用这个脚本很长时间了，与其他可用的可能性相比，它真的很有效。如果您的网站使用 AJAX，则必须修改此行： ut.XBrowserAddEventHandler(window,'load',function() { documentReady = true; processElements(); } );

编辑：此解决方案适用于自 IE6 以来的任何浏览器...

# javascript - jquery ui对话框关闭后聚焦文本框

> ID：14439125
> 
> 赞同：0
> 
> 时间：2013-01-21T12:55:10.350
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-ui

我的 asp.net MVC 视图上有一个文本框，它显示一个 JQuery UIi 对话框焦点。在此对话框中，我想确保单击“确定”按钮时，父页面上的相同文本框应该获得焦点，显示弹出窗口。我尝试在关闭之后和之前使用 JQuery 焦点，如下所示：

```
$(this).dialog("close");
$("#DefaultCallFrom1").focus(); 
```

但它不工作。请提出解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:59:09.080

初始化对话框时，使用 close 事件设置对话框关闭时的焦点：

```
$(this).dialog({
  close: function( event, ui ) {
     $("#DefaultCallFrom1").focus();
  }
}); 
```

用于关闭事件的jQuery UI 对话框[**文档。**](http://api.jqueryui.com/dialog/#event-close)

**编辑**

如果您在单击对话框中的按钮后尝试应用焦点，则应该很简单：

```
$( "#dialog" ).dialog({ 
    autoOpen: true,
    buttons: [ 
        { 
            text: "Ok", click: function() {
                $( this ).dialog( "close" ); 
                $('#DefaultCallFrom1').focus();
            } 
        } 
    ] 
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/q9L86/)

# linux - 我想通过使用 bash 脚本获得 rm 命令过滤器的提示

> ID：14439126
> 
> 赞同：0
> 
> 时间：2013-01-21T12:55:11.497
> 
> 标签：linux, bash, rm

几周前，一位高级团队成员意外删除了一个重要的 oracle 数据库文件 (.dbf)。幸运的是，我们可以使用几天前保存的备份文件来恢复系统。

看到这种情况后，我决定实施一种解决方案，`rm`在提示符下键入命令时至少进行双重确认。（检查超过`rm -i`）

即使我们`rm -i`默认使用别名，超级快速的键盘手通常也会像那个成员一样犯错误，包括我在内。

起初，我将（通过使用别名）基本 rm 命令替换为特定的 bash 脚本文件，该文件会打印并多次确认目标是否与 oracle 数据库路径或文件相关。简单来说，该脚本在操作rm之前作为过滤器操作。如果与 oracle 无关，则 rm 会正常运行。

在实现时，我认为大多数功能都运行良好，因为除了一个问题外，我只期望用户提示环境。

如果在其他脚本（提供的 oracle、其他供应商修改 oracle 路径、安装程序等）或程序（通过使用系统调用）中调用 rm 命令。

1.  我该如何区分这种情况？如果上面提供的脚本遇到修改后的 rm，则该执行将不再继续。

2.  你有更复杂的方法吗？

我相信大多数读者都能理解我懒惰的解释。如果您无法从上面看到清晰的风景，请告诉我。我会详细说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:10:49.327

我们读到`man bash`：

> 除非使用 shopt 设置了 expand_aliases shell 选项，否则当 shell 不是交互式时，别名不会展开。

然后，如果您使用`alias`make`rm`调用您的 shell 脚本，则默认情况下其他脚本不会使用它。如果这是你想要的，那么你就已经安全了。

问题是如果您*希望*脚本调用您的 rm 版本并在它发生时做一些聪明的事情。Alias 对前者来说是不够的；对于显式`rm`调用. 对于不是 shell 脚本的程序，系统调用比.`$PATH``/bin/rm``unlink``system("rm ...")`

我认为，为了使整个“安全 rm”变得有用，即使交互调用它也应该避免提示。每个用户都会养成对它说“是”的习惯，并且没有已知的解决方法。可行的方法是将文件移动到回收站而不是删除，从而使损坏易于撤消（我似乎记得，有现成的解决方案）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:03:19.973

答案在`alias`手册页中：

```
 Note  aliases  are  not  expanded  by default in non-interactive
          shell, and it can be enabled by setting the expand_aliases shell
          option using shopt. 
```

自己检查一下`man alias`；）

不管怎样，我会按照你选择的方式去做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-06T18:36:13.243

如果您正在使用`bash`，您可以**导出**您的 shell 函数，这也将使其在脚本中可用。

```
#!/usr/bin/env bash

# Define a replacement for `rm` and export it. 
rm() { echo "PSYCH."; }; export -f rm 
```

Shell 函数优先于内置函数和外部实用程序，因此仅使用`rm`脚本将调用该函数 - 除非它们通过调用`/bin/rm ...`或显式绕过该函数`command rm ...`。

将上述内容（使用您的实际实现`rm()`）放在每个用户的`~/.bashrc`文件中，或者放在系统范围的 bash 配置文件中 - 遗憾的是，它的位置不是标准化的（例如：Ubuntu: `/etc/bash.bashrc`; Fedora `/etc/bashrc`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T13:15:33.507

区分情况：您可以创建一个环境变量 say, `APPL`，它将设置为 say `export APPL="DATABASE`。在您的自定义脚本中，仅当is （表示与数据库相关的脚本）`rm`时才执行双重检查，否则表示调用来自其他脚本。`APPL``DATABASE``rm`

# actionscript-3 - 如何在 adobe air 中打印多页时添加页脚和页眉？

> ID：14439128
> 
> 赞同：0
> 
> 时间：2013-01-21T12:55:15.933
> 
> 标签：actionscript-3, apache-flex, air, flex4

我需要打印一个数据网格，它有大量数据要打印。所以我需要在每一页中包含页眉和页脚。如何在 adobe air 中打印多页时添加页脚和页眉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:05:30.213

您只能打印视图所代表的内容，您必须在发出打印命令之前添加页眉和页脚。

Mayb alive PDF 可以提供一个解决方案：[http](http://alivepdf.bytearray.org/) ://alivepdf.bytearray.org/ 更具体地说：[自定义页眉和页脚](http://indepthflex.wordpress.com/2011/02/16/alive-pdf-custom-header-footer/)

# javascript - 如何链接 getElementById 和 getElementByClassName

> ID：14439134
> 
> 赞同：4
> 
> 时间：2013-01-21T12:55:32.610
> 
> 标签：javascript, dom

我有一个 id 为“productPriceContainer”的 div，在这个 div 中有一个类“price”。我想访问“price”类的innerHTML，因为我还有其他名为“price”的类。

我可以链接这样的东西吗？

```
document.getElementById(productPriceContainer).getElementsByClassName(price).innerHTML 
```

如果不是，那么做我需要的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T12:57:19.567

如果您`price`在带有 id 的元素中有一个带有 class 的元素`productPriceContainer`，您可以这样做

```
 document.getElementById('productPriceContainer')
     .getElementsByClassName('price')[0].innerHTML 
```

注意 中的**s**。`getElementsByClassName`它解释了为什么你不能像这样链接。您没有调用函数`getElementByClassName`，因为与 id 相反，具有给定类的元素没有唯一性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:57:40.143

几乎。

*   如果要传递字符串，则必须传递字符串而不是未定义的变量
*   `getElementsByClassName`（复数！）返回一个 NodeList，而不是一个节点，所以你必须循环它来获取节点（然后你可以在其上使用`innerHTML`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T13:00:48.613

1.  `"price"`您正在向方法传递一个变量，而不是一个 String -> 它不应该是`price`。

2.  通过类名检索节点的方法是`getElementsByClassName` *您缺少“s”*

3.  它返回一个 DOM 元素数组，因此您必须遍历容器的子元素

例如：

`document.getElementById("productPriceContainer").getElementsByClassName("price")[0].innerHTML = "Asdf";`

将容器元素`innerHTML`中的第一个 DOM 元素的类设置`"price"`为“Asdf”

遍历元素可能如下所示：

```
var elements = document.getElementById("productPriceContainer")
if(elements) {
  var classes = elements.getElementsByClassName("price");
   for (var i = 0; i < elements.length; i++) {
     elements[i].innerHTML = "Asdf" + i;
    }
} 
```

这是一个[JSBin](http://jsbin.com/avomuh/1/edit)

# visual-studio-2008 - 将版本号插入源代码

> ID：14439139
> 
> 赞同：1
> 
> 时间：2013-01-21T12:55:43.487
> 
> 标签：visual-studio-2008

我们正在使用带有 VS2008 的 Team Foundation Server 2012。有没有办法在签入时将版本（变更集）编号插入源文件？我们有一些开发人员在 TFS 之外处理文件。所以如果我们能够在源代码中插入版本号会很有帮助。任何方式？请帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:02:39.857

听起来您需要一些关键字替换。[Codeplex http://logsubstpol.codeplex.com/](http://logsubstpol.codeplex.com/)上已经存在一个签入策略， 它也有一个 VS2008 版本，但不确定它如何与 TFS2012 交互。

另一种选择是创建您自己的事件订阅者（[http://blog.hinshelwood.com/team-foundation-server-2010-event-handling-with-subscribers/](http://blog.hinshelwood.com/team-foundation-server-2010-event-handling-with-subscribers/)），它在应用层上运行并且应该独立于客户端. 对 TFS2012 做了同样的事情，除了更改为 11.0 而不是 2010 的路径，当然还有 API 参考的版本。

# plugins - 社交插件坏了？

> ID：14439141
> 
> 赞同：0
> 
> 时间：2013-01-21T12:55:52.510
> 
> 标签：plugins, height, social, facebook-likebox

上周五我正在为我的公司页面实施社交插件 LikeBox，它看起来非常好。今天我又看了一遍，在某种程度上它似乎坏了。我正在使用一个只包含流的likebox。它的高度为 600 像素，但出于某种奇怪的原因，因为今天高度限制为 300 像素，它忽略了更大的高度。这在页面上看起来不太好。我也想要一个白色边框，上周五也可以使用，但现在边界似乎被硬编码为灰色。

我还尝试使用 CSS 样式设置高度，但由于内容是从不同的页面加载的，它似乎不接受我的 css 文件给出的任何样式......

任何人都可以解决任何信息/建议/提示？

这非常紧急，因为我们希望尽快部署 facebook 插件。

提前致谢！

问候，安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:11:41.407

我也有同样的问题。Firebug 显示 IFRAME 确实设置为 Facebook 代码中设置的高度（750px），但由于某种原因，IFRAME 内页面的 BODY 只有 300px 高。

这是最近开始的，因为我有其他网站已经运行了一段时间没有问题，现在所有网站都有同样的问题。

# c# - 项目引用包含 32bit 或 64bit

> ID：14439149
> 
> 赞同：0
> 
> 时间：2013-01-21T12:56:21.057
> 
> 标签：c#, x86-64

我有一个平台目标是 x86 的项目（C# Exe）。它包含不同第三方库的引用。我正在考虑将应用程序从 x86 转移到 AnyCPU 或 x64。

现在我面临的问题是我不知道引用库是基于 x86 或任何其他构建的。一种方法是我一个一个地检查第三方库并检查他们的平台目标（一个长度过程，因为它包含太多 50 多个引用）。

他们是否有任何方法可以找到依赖库是 x86 或 x64 或其他。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:59:15.133

您可以使用[GetAssemblyName](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyname.getassemblyname.aspx)方法来检索[AssemblyName](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyname.aspx)类型，其中您有提供该信息的[ProcessorArchitecture属性。](http://msdn.microsoft.com/en-us/library/system.reflection.processorarchitecture.aspx)

# linq - 带有数据表的 Linq 查询

> ID：14439150
> 
> 赞同：1
> 
> 时间：2013-01-21T12:56:22.773
> 
> 标签：linq, datatable

我在 c# 中有这个数据表结果

```
Date    Employee Job1   Job2   Job3
1/1/2012    a    1      1      1 
1/1/2012    b    2      2      2
1/1/2012    c    2      1      4
1/1/2012    d    4      2      1
1/2/2012    a    3      2      5
1/2/2012    b    2      2      2
1/2/2012    c    3      3      3
1/2/2012    d    1      1      1
1/3/2012    a    5      5      5
1/3/2012    b    2      2      6
1/3/2012    c    1      1      1
1/3/2012    d    2      3      4
2/1/2012    a    2      2      2
2/1/2012    b    5      5      2
2/1/2012    c    2      2      2
2/2/2012    a    3      3      3
2/2/2012    b    2      3      3
3/1/2012    a    4      4      2 
```

现在我想要这样的结果：

工作1：

```
Employee      January       February            March
A             9             5                   4
B             6             7
C             6             2
D             7 
```

拜托，有人可以建议我如何在 C# 中使用“Linq”来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:14:31.153

这可能有效（或至少给您一个想法）：

```
var monthEmpGroups = tblEmpJobs.AsEnumerable()
    .Select(r => new
    {
        Row = r,
        Employee = r.Field<String>("Employee"),
        Year = r.Field<DateTime>("Date").Year,
        Month = r.Field<DateTime>("Date").Month
    })
    .GroupBy(x => x.Employee);

DataTable tblMonthResultJob1 = new DataTable();
tblMonthResultJob1.Columns.Add("Employee", typeof(string));
var dtf = System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat;

foreach (var empGroup in monthEmpGroups)
{
    string employee = empGroup.Key;
    var newRow = tblMonthResultJob1.Rows.Add();
    newRow["Employee"] = employee;
    var empMonthGroup = empGroup.GroupBy(mg => new { mg.Year, mg.Month });

    foreach (var empYearMonthGroup in empMonthGroup)
    {
        int year = empYearMonthGroup.Key.Year;
        int month = empYearMonthGroup.Key.Month;
        string colName = string.Format("{0} {1}", dtf.GetMonthName(month), year);
        if (!tblMonthResultJob1.Columns.Contains(colName))
            tblMonthResultJob1.Columns.Add(colName, typeof(int));
        int empJob1Count = empYearMonthGroup.Sum(x => x.Row.Field<int>("Job1"));
        newRow[colName] = empJob1Count;
    }
}

// do the same for the other job types 
```

**更新**如果您需要在“结束”处添加“总行”，如评论：

```
DataRow totalRow = tblMonthResultJob1.Rows.Add();
totalRow["Employee"] = "ALL";
var monthGroups = tblEmpJobs.AsEnumerable()
    .Select(r => new {
        Row = r,
        Year = r.Field<DateTime>("Date").Year,
        Month = r.Field<DateTime>("Date").Month
    })
    .GroupBy(x => new { x.Year, x.Month });
foreach (var monthGroup in monthGroups)
{
    int yearAll = monthGroup.Key.Year;
    int monthAll = monthGroup.Key.Month;
    string colName = string.Format("{0} {1}", dtf.GetMonthName(monthAll), yearAll);
    if (!tblMonthResultJob1.Columns.Contains(colName))
        tblMonthResultJob1.Columns.Add(colName, typeof(int));
    int allJob1Count = monthGroup.Sum(x => x.Row.Field<int>("Job1"));
    totalRow[colName] = allJob1Count;
} 
```

**更新2**

> 我在这一行 int 上收到错误 system.dbnull

```
empJob1Count = empYearMonthGroup.Sum(x => x.Row.Field<int>("Job1")); 
```

> 我认为有一些空值，并且在求和时无法转换空值。请帮忙，我应该如何解决这个问题

您可以使用此代码将 an 默认`int?`为零：

```
var empYearMonthCount = empYearMonthGroup.Sum(x => 
{ 
    int? job1 = x.Row.Field<int?>("Job1"); 
    int value = 0; 
    if(job1.HasValue) value = job1.Value; 
    return value; 
}); 
```

# actionscript-3 - FDT - 使用现有的源文件、资产、文件夹等创建项目

> ID：14439153
> 
> 赞同：1
> 
> 时间：2013-01-21T12:56:28.727
> 
> 标签：actionscript-3, eclipse-plugin, fdt

我正在使用 FDT 5，并希望使用现有的源文件和资产创建一个新项目。当我启动项目向导（新建-> FDT 项目）时，我浏览到我想作为项目创建的文件夹，但我无法继续，因为 FDT 给了我错误：

*“PROJECT_NAME 与另一个项目的位置重叠：PROJECT_NAME”*

我已经下载了一个 Flash 项目（在 FDT 中开发），只是想在我的 FDT 环境中将其作为一个项目。

我的意思是这不应该那么复杂，对吧？我不想创建一个全新的项目（它自己的文件夹）我想使用我下载的同一个文件夹并查看该项目。我正在使用 git，所以我必须在同一条路径上工作，有点说。

有任何想法吗？

**编辑：**

显然这是 FDT 的一个问题，一个小错误。我设法解决了以下问题：

[FDT / Eclipse 错误：“与另一个项目的位置重叠”](http://benje.tumblr.com/post/23735611907/fdt-eclipse-error-overlaps-the-location-of-another)

在 Eclipse 论坛上： [Eclipse Forum](http://www.eclipse.org/forums/index.php/m/270705/)

# iphone - 从 MySQL 或其他数据库存储和检索数据

> ID：14439156
> 
> 赞同：0
> 
> 时间：2013-01-21T12:56:30.523
> 
> 标签：iphone, ios

我已经研究了几天关于这个问题，但没有运气。我正在学习iOS开发，主要是开发iPhone应用程序。现在这个应用程序将模仿我的 PHP 站点的行为。

问题：我可以从我的 iPhone 应用程序直接与我的表交互以加载和/或插入新数据吗？如果不是 mySQL，那么哪个数据库用于托管 CRUD 操作的数据？JSON对象？如果是，那么如何？

正如您所看到的，我真的不知道这种方式，并希望对从现有数据库中存储和检索数据或我需要托管新数据库以与 iPhone 一起使用的方式有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:02:06.460

“最好”和最简单的方法（无论如何对我来说）是使用 CoreData。

CoreData 是一个数据管理系统。您在其中设置了一些对象和关系，然后与它们进行交互（使用获取请求来检索它们和东西）。

然后，CoreData 管理一个数据存储（通常是 SQLite DB），它用于存储对象和关系等......

使用 CoreData 消除了 DBA 的必要性以及许多复杂的数据库逻辑和东西。

一个很好的教程是这个......

[http://mobile.tutsplus.com/tutorials/iphone/iphone-core-data/](http://mobile.tutsplus.com/tutorials/iphone/iphone-core-data/)

虽然我买了这本书...

[http://www.amazon.co.uk/Pro-Core-Data-Professional-Apress/dp/1430236566/ref=sr_1_2?s=books&ie=UTF8&qid=1358773284&sr=1-2](http://www.amazon.co.uk/Pro-Core-Data-Professional-Apress/dp/1430236566/ref=sr_1_2?s=books&ie=UTF8&qid=1358773284&sr=1-2)

并发现它对从开始到更高级的东西都非常有用。

如果使用得当，CoreData 可以非常容易地使用和操作持久数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:25:46.823

是的，您可以从您的 iPhone 应用程序直接与您的表格交互以加载和/或插入新数据；查看下一个教程 - 与您的 MySQL/PHP 服务器交互[http://www.scott-sherwood.com/ios-5-uistoryboards-a-practical-example/](http://www.scott-sherwood.com/ios-5-uistoryboards-a-practical-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:12:44.320

CoreData 很好，但仅限于访问 iDevices。

我使用 couchdb，意味着副本存储在云中，并在云和设备之间自动同步，允许网络更新和 Android

# drools - 三个连续的对象在流口水

> ID：14439161
> 
> 赞同：0
> 
> 时间：2013-01-21T12:56:49.397
> 
> 标签：drools, drools-fusion

我一直在尝试查找 Drools Fusion 中是否存在三个相同类的对象。我有一个名为 Tick 的 POJO，如下所示

```
public class Tick
{
    CrossOverPrice crossoverprice;
    CrossOverType crossovertype;
    public Tick(CrossOverPrice crossoverprice, CrossOverType crossovertype) {
        super();
        this.crossoverprice = crossoverprice;
        this.crossovertype = crossovertype;
    }
    public CrossOverPrice getCrossoverprice() {
        return crossoverprice;
    }
    public void setCrossoverprice(CrossOverPrice crossoverprice) {
        this.crossoverprice = crossoverprice;
    }
    public CrossOverType getCrossovertype() {
        return crossovertype;
    }
    public void setCrossovertype(CrossOverType crossovertype) {
        this.crossovertype = crossovertype;
    }
} 
```

我试图找出是否有三个连续的 Tick 对象具有 crossovertype ==CrossOverType.bear

以下是规则和主要课程

```
public class DroolsTest {

    public static final void main(String[] args) {
        try {
            // load up the knowledge base
            KnowledgeBase kbase = readKnowledgeBase();
            StatefulKnowledgeSession ksession = kbase.newStatefulKnowledgeSession();
            KnowledgeRuntimeLogger logger = KnowledgeRuntimeLoggerFactory.newFileLogger(ksession, "test");
            // go !
            Tick t1=new Tick(CrossOverPrice.p12,CrossOverType.bear);
            Tick t2=new Tick(CrossOverPrice.p23,CrossOverType.bear);
            Tick t5=new Tick(CrossOverPrice.p34,CrossOverType.bear);

            ksession.insert(t1);
            ksession.fireAllRules();
            /*ksession.insert(t3);
            ksession.fireAllRules();*/
            ksession.insert(t2);
            ksession.fireAllRules();
            ksession.insert(t5);
            ksession.fireAllRules();

            logger.close();
        } catch (Throwable t) {
            t.printStackTrace();
        }
    }

    private static KnowledgeBase readKnowledgeBase() throws Exception {
        KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();
        kbuilder.add(ResourceFactory.newClassPathResource("Sample.drl"), ResourceType.DRL);
        KnowledgeBuilderErrors errors = kbuilder.getErrors();
        if (errors.size() > 0) {
            for (KnowledgeBuilderError error: errors) {
                System.err.println(error);
            }
            throw new IllegalArgumentException("Could not parse knowledge.");
        }
        KnowledgeBase kbase = KnowledgeBaseFactory.newKnowledgeBase();
        kbase.addKnowledgePackages(kbuilder.getKnowledgePackages());
        return kbase;
    }
} 
```

规则是

```
declare Tick
@role(event)
end

rule "Check three bear"
    when
        $t:Tick(crossovertype:CrossOverType.bear ,crossoverprice : CrossOverPrice.p12)
        not Tick(this after $t,crossovertype == CrossOverType.bull)
        $t1 : Tick(this after $t ,crossovertype == CrossOverType.bear ,crossoverprice ==CrossOverPrice.p23)
        not Tick(this after $t1,crossovertype == CrossOverType.bull)
        $t3 : Tick(this after $t1 ,crossovertype == CrossOverType.bear ,crossoverprice ==CrossOverPrice.p34)

    then
    System.out.println("great");

end 
```

我能够找到是否有两个连续的 Tick 对象具有 crossovertype==CrossOverType.bear 但这不适用于三个连续的对象。请给我一些建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:10:29.220

如果您看一下您发布的“检查三熊”规则，您会发现第二个条件元素和第三个条件元素之间存在矛盾：

> **不**打勾（**这在 $t** ...之后）
> $t1 ：打勾（**这在 $t** ...之后）

这是我过去用来从流中获取最新 3 个事件的方法：

```
$t1:Tick() //the newest
not Tick(this after $t1)
$t2:Tick(this before $t1)
not Tick(this before $t1, this after $t2) //no events between $t1 and $t2
$t3:Tick(this before $t2)
not Tick(this before $t2, this after $t3) //no events between $t2 and $t3 
```

另一种解决方案可能是使用滑动窗口：

```
List(size == 3) from collect( Tick(...) over window:length(3) ) 
```

在这种情况下，*size == 3*条件是为了防止在窗口中只有 1 或 2 个元素时激活规则。

希望能帮助到你，

# javascript - 如何处理 JSP 和 Servlet 和 AJAX 调用中的相对路径

> ID：14439162
> 
> 赞同：1
> 
> 时间：2013-01-21T12:56:55.143
> 
> 标签：javascript, ajax, jsp, servlets

我有如下所示的文件夹结构，

```
web
|_Lib
|   |_lib.js
|_Images
|   |_Image1
|_ Folder_1
|   |_ Folder_1_page1 (Includes Page 2) (Displaying Image using lib.js from folder Images)
|_ Page1 (Includes Page 2) (Displaying Image using lib.js from folder Images)
|_ Page2 
```

我的问题是
如何在调用页面时处理相对路径/上下文路径，如上所示

如果我在根文件夹“page1”上，它会从显示图像文件夹中的图像的同一文件夹中调用 page2，
但
如果我在 Folder_1_Page1 页面上，则它会从无法显示图像的根文件夹中调用 page2

# javascript - 如何将 node.js 中的一个源文件与 javascript 一起使用？

> ID：14439163
> 
> 赞同：1
> 
> 时间：2013-01-21T12:57:12.603
> 
> 标签：javascript, node.js

我在 node.js 中有一个代码。

```
var testFunc = function( y, m, d ) {
        //- do something~~
        return chkDObj.getFullYear( ) == y && chkDObj.getMonth( ) == m && chkDObj.getDate( ) == d;
};

res.render( "index.jade", { testFunc: testFunc } ); 
```

在翡翠中，

```
script 
    var tmp = #{testFunc} 
```

我希望它显示相同的内容，但渲染结果是，

```
<script>
var tmp = function( u, m, d ) {
        //- do something~~
        return chkDObj.getFullYear( ) == y &amp;&amp; chkDObj.getMonth( ) == m &amp;&amp; chkDObj.getDate( ) == d;
        };
</script> 
```

如何管理一个源文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:31:25.393

你可以像 utils.js 一样创建 js 文件，可以通过 http 访问，比如 Node.js 模块。这很简单并且有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:36:33.533

Jade 默认转义所有数据。您可以通过更改 jour 玉模板来禁用转义：

```
script 
    var tmp = !{testFunc} 
```

# windows - 由于操作系统版本之间的 GetDetailsOf 列编号发生变化，是否有正确的方法在 Windows 中获取文件详细信息？

> ID：14439169
> 
> 赞同：1
> 
> 时间：2013-01-21T12:57:30.737
> 
> 标签：windows, shell32, file-properties

我们一直在使用 Shell32 Folder.GetDetailsOf(folderItem, column) 来获取不同文件的文件详细信息和扩展文件详细信息。[不幸的是，这在操作系统版本之间中断，因为列编号发生了变化，从这个代码示例](http://www.kixtart.org/forums/ubbthreads.php?ubb=showflat&Number=160880&page=1)中可以看出（与我们的项目无关） 。

我似乎找不到正确的方法来获取不会轻易破坏的扩展文件详细信息，也没有办法（非 hackily）找到正确的列编号。那么问题来了，这是如何以正确的方式完成的？

（编辑：更具体地说，我们读出的信息是音频、视频和图像信息，例如大小、fps、比特率等。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:43:59.363

用来`FolderItem2.ExtendedProperty`获取你想要的属性。看到[这个答案](https://stackoverflow.com/questions/2265759/how-to-read-the-properties-of-files-using-ipropertystorage/2266316#2266316)，虽然这个答案很难（通过 fmtid）。更简单的是使用规范名称“System.Author”而不是丑陋的 GUID。

# android - 如何从谷歌电视的蓝光光盘播放器获取信息

> ID：14439170
> 
> 赞同：0
> 
> 时间：2013-01-21T12:57:31.917
> 
> 标签：android, google-tv

我正在尝试为 Google TV 开发一个应用程序，它将检测来自光盘播放器的媒体项目并通过该应用程序显示或播放这些项目。是否有任何 api 可以从 CD/DVD 中检索内容。请帮忙。

苏迪普塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:30:42.643

不，对不起。大多数 Google TV 设备没有“CD/DVD”。欢迎您向特定设备的设备制造商询问他们是否有某种 SDK 插件来提供您所寻求的内容。

# spring - 在 Spring Framework 中使用带有静态最终变量的 @Value 注释

> ID：14439171
> 
> 赞同：6
> 
> 时间：2013-01-21T12:57:33.860
> 
> 标签：spring, spring-mvc, spring-3, spring-el

我想让我的 Spring 应用程序中的请求映射动态化。这样我的网址就无法理解了。而且我可以向用户展示任何毫无意义的东西，并且仍然可以解决映射目的。

为此，我将 URL 的动态部分存储在属性文件中。并想在`@RequestMapping`注释中使用它。同样的事情将在 JSP 中的客户端完成。我将从属性文件中读取值，然后创建 href。

我正在使用`@Value`注释来读取属性文件值。

有一个类将所有这些值保存在最终静态变量中。

```
public class UrlMappingAbstraction {
    public static final @Value("#{urlAbstractionProperties['url.message']?:'message'}") String MESSAGE = "";
} 
```

我正在我的控制器中扩展这个类，并使用@RequestMapping 注释中的静态最终字段，如下所示。

```
@RequestMapping(value="/"+MESSAGE+"/{id}", method=RequestMethod.GET) 
```

在jsp中，我也在使用href从属性文件中读取值`<spring:message/>`并生成url。

问题是 jsp 能够根据属性文件值创建正确的 url，但在 @RequestMapping 注释中我的值没有被替换。

谁能告诉我确切的问题？我知道我们不能在初始化后更改静态最终变量的值。那么@Value注解有什么用。

如果这可以通过其他方式完成，那么你也可以给我看。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T14:01:04.530

注释本质上是静态的，因此你不能这样做。

`@Value`不能在`static`字段上使用，但在这里没关系 - 真正的问题是除了编译时常量之外没有其他方法可以使用值作为注释的属性。

您可以使用以下替代方法之一：

*   添加 URL 重写过滤器（例如[this](http://ocpsoft.org/rewrite/)或[this](http://tuckey.org/urlrewrite/)）并将其配置为执行必要的转换。

    由于明确的职责分离，这种方法看起来更优雅 - 控制器负责完成他们的工作，重写过滤器负责 URL 的混淆。

*   在此步骤通过覆盖[`RequestMappingHandlerMapping. getMappingForMethod()`](http://static.springsource.org/spring/docs/3.2.0.RELEASE/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/RequestMappingHandlerMapping.html)和更改其 URL 模式来拦截控制器映射的创建（未测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:15:14.043

我将通过说你应该反过来做来增加@axtavt 的建议。您真的需要使消息 URL 运行时可配置吗？

如果您不只是像拥有它一样创建一个静态变量，但没有`@Value`：

```
public final class UrlMapping {
    public static final String MESSAGE = "message";
} 
```

然后在您的 JSP 中引用 UrlMapping.MESSAGE 而不是属性文件。

虽然它没有那么灵活，但它更简单，恕我直言，让端点 URL 过于可配置是一个坏主意，因为不可避免地你会在 Javascript 或模板中硬编码一些东西。更改 URL 也对 SEO 不利。

# java - Android getter setter 返回空数据？

> ID：14439177
> 
> 赞同：1
> 
> 时间：2013-01-21T12:57:52.677
> 
> 标签：java, android, setter, getter, getter-setter

我有一类 ApplicationDetails，带有 getter 和 setter 方法。

```
public class ApplicationDetails {
    String supportURL;
    String companyURL;
    String copyRightText;

    // with getter and setter methods 

} 
```

我在启动屏幕活动中设置所有数据。

```
ApplicationDetails appDetails = new ApplicationDetails();
String supportURL = getResources().getString(R.string.support_url);
appDetails.setSupportURL(supportURL); 
```

对于示例，我只是从字符串文件中设置数据，但在应用程序中它来自不同的来源。

但是当我尝试访问不同活动中的数据时，它返回空值。例如

```
public class AboutViewController extends Activity {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ApplicationDetails appDetails = new ApplicationDetails();
        System.out.println(" app support url " + appDetails.getSupportURL());
    }

} 
```

输出

```
I/System.out(2242):  app support url null 
```

任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T13:15:09.200

您得到 null，因为您创建了一个新对象并且所有字段都初始化为零。

在您的情况下，我看到这些字段在应用程序中将是相同的，因此您可以使用[单例](http://www.javapractices.com/topic/TopicAction.do?Id=46)模式并为您的应用程序仅实例化一个对象并稍后引用它。您不需要在每次引用它时都创建一个新对象。这个类没问题，你也可以让它们成为常量。（我猜这些变量不会通过执行而改变）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:11:46.890

作为快速解决方案，您可以将 supportURL 对象设为静态，但这不是好的解决方案。

```
public class ApplicationDetails {
static String supportURL;
static String companyURL;
static String copyRightText;

// with getter and setter methods 
```

}

更好的解决方案是在启动 AboutViewController 活动时将字符串从一个活动传递到另一个活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:14:44.810

您可以使用共享首选项来存储要通过您的应用程序使用的数据。这里构造函数中的 Context 就是你的 Activity。

```
public class ApplicationDetails {

        public static final String SUPPORT_URL = "support_url"; 
        public static final String COMPANY_URL = "company_url";
        public static final String COPYRIGHT_URL = "copyright_url";

        String supportURL;
        String companyURL;
        String copyRightText;
        private Context context;

        public ApplicationDetails(Context context) {
            super();
            this.context = context;
        }

        private String getPreference(String key)
        {
            return PreferenceManager.getDefaultSharedPreferences(context).getString(key, null);
        }

        private void setPreference(String key, String value)
        {
            PreferenceManager.getDefaultSharedPreferences(context).edit().putString(key, value).commit();
        }

        public String getSupportURL() {
            if(supportURL == null)
                supportURL = getPreference(SUPPORT_URL);
            return supportURL;
        }

        public void setSupportURL(String supportURL) {
            this.supportURL = supportURL;
            setPreference(SUPPORT_URL, supportURL);
        }

        public String getCompanyURL() {
            if(supportURL == null)
                supportURL = getPreference(COMPANY_URL);
            return companyURL;
        }

        public void setCompanyURL(String companyURL) {
            this.companyURL = companyURL;
            setPreference(COMPANY_URL, companyURL);
        }

        public String getCopyRightText() {
            if(copyRightText == null)
                copyRightText = getPreference(COPYRIGHT_URL);
            return copyRightText;
        }

        public void setCopyRightText(String copyRightText) {
            this.copyRightText = copyRightText;
            setPreference(COPYRIGHT_URL, copyRightText);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T13:22:22.300

感谢所有人的所有建议。现在我只使用一个类的一个实例。

```
public class ApplicationDetails {

private static ApplicationDetails instance = null;

String supportURL;
String companyURL;
String copyRightText;

// with getter and setter methods 

public static ApplicationDetails getInstance() {
 if (instance == null) {
    instance = new ApplicationDetails();
 }
   return instance;
 } 
```

}

我正在设置并变得像这样

```
 ApplicationDetails appDetails = ApplicationDetails.getInstance();
 appDetails.setSupportURL(supportURL); 
```

并且在活动中

```
ApplicationDetails appDetails = ApplicationDetails.getInstance();
appDetails.getSupportURL(); 
```

它工作得很好。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-21T13:04:32.153

**更新**

当您在启动画面中设置值时，内存中的对象是不同的，而在另一个活动中，您创建的另一个对象在内存中也不同，这就是您获得 null 的原因。

如果这是您在启动画面中初始化 url 并在另一个屏幕中使用的要求，那么有很多方法。

1.  当您进入初始屏幕时，您可以直接在活动中获取字符串。
2.  在启动画面中，将 appDetails 对象设为公共静态对象，以便您也可以在其他活动中访问
3.  在 ApplicationDetails 上实现序列化并将此对象放入 putExtra 中，因为我们将字符串、int 等值用于在活动之间传递数据并在启动的活动中使用捆绑包获取此数据

**已编辑**

要使用单个对象，您需要将该对象声明为初始屏幕中的公共静态

```
public static ApplicationDetails appDetails; 
```

现在在初始屏幕 oncreate() 中分配值并在另一个活动甚至另一个类中使用也像这样

```
public class AboutViewController extends Activity {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // direct use object by class name
        System.out.println(" app support url " + SplashScreen.appDetails.getSupportURL());
    }

} 
```

# latitude-longitude - 如何通过经纬度获得城市？

> ID：14439180
> 
> 赞同：0
> 
> 时间：2013-01-21T12:58:10.227
> 
> 标签：latitude-longitude, geocode

我需要按纬度和经度获取城市名称。（使用 xcode）有 google 本身的 api 地理编码，但它不想返回最近的城市（我只需要最近的城市）并且它返回地名的西里尔名称。如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:51:25.577

您可以将[Geonames.org 网络](http://www.geonames.org/export/web-services.html)服务用于“查找附近的人口稠密地点/反向地理编码”（向下滚动一点），请参阅[此示例](http://api.geonames.org/findNearbyPlaceName?lat=47.3&lng=9&username=demo)。

# java - Spring MVC 中的数据表

> ID：14439182
> 
> 赞同：4
> 
> 时间：2013-01-21T12:58:16.043
> 
> 标签：java, spring, spring-mvc

在进行数据绑定时，在 JSF 中，我们具有数据表功能，用于在具有样式的表中排列数据。

Spring MVC 中是否有类似数据表的功能？我像往常一样使用 JSTL forEach 来做到这一点。但是如果有像 datatable(in JSF) 这样的特性，我们可以轻松管理它，包括它们的 CSS 样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:26:42.143

我会推荐**[datatables4j](http://datatables4j.github.com/docs/index.html)**（基于[jQuery DataTables](http://datatables.net/)），它与 Spring MVC 配合得很好。

也可以看看

*   [https://github.com/datatables4j](https://github.com/datatables4j)
*   [将 Spring MVC 与 jQuery、Bootstrap、DataTables4J 和 webjars 集成](https://speakerdeck.com/michaelisvy/integrating-spring-mvc-with-jquery-bootstrap-datatables4j-and-webjars)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:11:55.473

Spring MVC 没有任何特定的东西 - 它并没有真正提供任何 UI 组件，请参阅[Spring MVC 和 UI 组件](https://stackoverflow.com/questions/7520490/spring-mvc-ui-components)

在过去，我最终使用了 JSP 标记库或 JavaScript 库。

您可能想查看[Display Tag](http://www.displaytag.org/1.2/) (JSP) 或[jQuery Datatables plugin](http://www.datatables.net/) (JavaScript)。使用显示标签，我经常最终编写一些实用程序类来抽象和处理控制器中的分页/排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-06T19:14:15.663

我在几个项目中集成了 Spring MVC、Hibernate 和 DataTables。我已经[为 Spring Roo 编写了一个 howto，](http://www.pabloguerrero.org/cgblog/2/15/DataTables-server-side-processing-integration-with-Spring-Roo-and-Hibernate)但它可以很容易地应用于普通的 Spring MVC 应用程序和任何 JPA 实现。

github 中还有[整个项目的链接](https://github.com/yellowtrolley/RooDataTablesHibernate)。

# python - OpenCV Python 绑定：如何从内存中捕获图像

> ID：14439194
> 
> 赞同：2
> 
> 时间：2013-01-21T12:58:55.977
> 
> 标签：python, opencv

我有多个 jpeg 图像作为字符串存储在内存中。我想从它们生成一个视频（所以这些图片将是视频中的帧）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:13:32.093

如果您有一组字符串，每个字符串分别代表一个图像，您可以结合`StringIO`使用`PIL`来读取它而不将它们保存到文件中。然后`PIL`使用 . 从图像转换为 OpenCV `numpy`。此外，更新您的代码以使用新的 OpenCV 绑定。

这是一个复制您所拥有的示例（sys.argv[1] 假定为输出视频文件的名称），您可能需要调整视频编解码器：

```
import sys
import numpy
import cv
import cv2
from cStringIO import StringIO
from PIL import Image

out_video = cv2.VideoWriter()
fourcc = cv.CV_FOURCC('D', 'I', 'V', 'X')
fps = 30
color = True

size = None
for fname in sys.argv[2:]:
    data = open(fname).read() # Your String

    s = StringIO(data)
    img = Image.open(s)
    if size and img.size != size:
        img = img.resize(size)
    else:
        size = img.size
        out_video.open(sys.argv[1], fourcc, fps, size, color)
    out_video.write(cv2.cvtColor(numpy.array(img), cv2.COLOR_RGB2BGR)) 
```

# mysql - MYSQL 性能问题 - 1 个单行表与 1 个多行表

> ID：14439196
> 
> 赞同：0
> 
> 时间：2013-01-21T12:58:58.930
> 
> 标签：mysql, sql, performance

我对如何在 MYSQL 表中存储数据有疑问。

假设我写了 10k 个帖子，每个帖子 400 个字。

将每个帖子（400 个字）存储在一行中会更好吗？或者将其拆分为 10 行（每行 40 个单词）？还是分成 100 行（每行 4 个单词）？

哪种结构会给我最好的性能、更轻的重量、更好的加载时间等等。更重要的是 - 您有多少行（1 或 10 或 100）或行中有多少数据（400 或 40 或 4）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:02:20.967

更多的行会使查询速度变慢。除此之外，通过拆分帖子增加的复杂性是不值得的。新开发人员弄清楚正在发生的事情所花费的时间会增加，并且更复杂的代码更有可能在现在或将来出现错误。

将每个帖子排成一行，对其进行分析，然后在发现性能问题时进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:35:36.820

你的问题没有明确的答案。

鉴于在数据库中存储消息/帖子的任务，我假设大多数人会从设计表格开始，以每行存储一条消息。也许在对要存储的数据进行一些分析之后，会决定将每条消息分成若干页，每页占用 400 个单词。没有这个分析，你就没有问题要解决。

老实说，你最好自己对这个主题进行一些研究。阅读关系数据库背后的理论。尝试制作一个简单的系统，该系统将创建和加载分成多个页面的帖子。

# linux - linux - 如何检查程序终止后使用了多少内存和时间？

> ID：14439200
> 
> 赞同：1
> 
> 时间：2013-01-21T12:59:02.820
> 
> 标签：linux

我目前正在开发一些 OJ 系统，系统会在我的程序运行后给出 TIME 和 MEMORY 的使用情况。我知道`./time`可以检查时间使用情况，内存呢？或者有什么命令可以同时检查吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:09:53.730

使用`valgrind`.

```
valgrind your_exec 
```

当您的进程退出时，`valgrind`将输出在执行期间分配/释放的字节摘要以及退出前仍分配多少空间

输出示例：

```
==840==
==840== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 17 from 1)
==840== malloc/free: in use at exit: 88,940 bytes in 163 blocks.
==840== malloc/free: 376 allocs, 213 frees, 208,624 bytes allocated. 
```

# javascript - 如何在 Spotify 中自动播放热门曲目？

> ID：14439211
> 
> 赞同：1
> 
> 时间：2013-01-21T12:59:28.923
> 
> 标签：javascript, html, spotify

我创建了一个按钮并在其上设置了 onclick 事件。现在我想播放和暂停我的热门曲目，但无法播放。任何人都可以帮忙吗？

```
 var sp = getSpotifyApi();
      var models = sp.require('$api/models');
      var myAwesomePlaylist = new models.Playlist("My Awesome Playlist");
      myAwesomePlaylist.add(models.player.track);
      myAwesomePlaylist.add("spotify:track:6PvpKM4BW48ic8cbM4Vxcg"); 
```

这是我的代码，正在添加播放列表，但如果我正在操作它，比如

myAwesomePlaylist.play("spotify:track:6PvpKM4BW48ic8cbM4Vxcg");

它不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:13:15.193

播放列表不播放 - 你需要`player`它。

`models.player.play(track, playlist, 0);`

或者，如果您只想播放/暂停：

`models.player.playing = true;`/`models.player.playing = false;`

文档[在这里](https://developer.spotify.com/technologies/apps/docs/f19ff300f8.html)。如果这不是您的意思，请更清楚您的问题 - 您粘贴的代码是直接从文档中的示例复制而来的。

# php - 如何在 YII 的输入字段中传递一个类以使其不可见？

> ID：14439212
> 
> 赞同：0
> 
> 时间：2013-01-21T12:59:35.793
> 
> 标签：php, yii

```
<?php 
    $this->widget('CAutoComplete', array(
    'name'=>'search',
    'id'=>'input-box',
    'attribute'=>'search',
    'url'=> $this->createAbsoluteUrl('products/suggestions'),
    'value'=>($_GET['search'] == '')?'Search for Mobiles, Cameras & Laptops':$_GET['search'],
    'minChars'=>2,
    'scroll'=>false,
    'resultsClass'=>'searchAutoComplete ac_results',
    'htmlOptions'=> array(
    'class'=>'searchClickClear',
    ),
    'methodChain'=>'.result(function(){$("form#search-form").submit();})'
));
?> 
```

这是我用于输入的小部件，我正在通过类`searchAutoComplete`。课程应该是什么？我想要的是，当我单击该字段时，该值将为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:20:39.590

当您单击输入字段时，事件`onclick`正在发生。因此，您可以处理它并将输入值更改为空。如何？

像这样更改您的“htmlOptions”：

> 'htmlOptions'=> 数组(
> 'onclick'=>'$("#input-box").val("")';
> ),

*#input-box* - 输入的 css 选择器。

*val()* - 为元素设置一些值的 jQuery 方法。查看有关此方法[的更多信息](http://api.jquery.com/val/)

*resultsClass* - 下拉列表的 CSS 类。默认为“ac_results”。 [更多信息](http://www.yiiframework.com/doc/api/1.1/CAutoComplete#resultsClass-detail)

对于任务解决方案，您不需要更改`resultsClass`默认值。删除此字符串。

# iphone - 视图不在窗口层次结构中

> ID：14439213
> 
> 赞同：0
> 
> 时间：2013-01-21T12:59:43.947
> 
> 标签：iphone, ios, objective-c, appdelegate

我在应用程序委托中创建了一个函数，我从一个视图运行，但是当我回来再次运行该函数时，它给了我

```
<ResultViewController: 0x757dfc0> on <ViewController: 0x71325c0> whose view is not in the window hierarchy! 
```

**错误**

应用程序委托代码正在打开一个视图控制器

代码是

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    ViewController *view1 = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];

    [self.window setRootViewController:view1];

    [self.window makeKeyAndVisible];

    return YES;
}
-(void)specify
{

    ResultViewController *res = [[ResultViewController alloc]init];

    CATransition *transition = [CATransition animation];
    transition.duration = 0.3;
    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionPush;
    transition.subtype = kCATransitionFromRight;
    [self.window.layer addAnimation:transition forKey:nil];

    [self.window.rootViewController presentModalViewController:res animated:NO];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:18:49.420

不运行您的代码我猜这是因为您尝试添加到的窗口在视图层次结构中不存在，您只是在创建视图并将它们添加到屏幕 - 您需要获取实际的屏幕本身。

尝试类似 UIViewController *presentController = [[[[UIApplication sharedApplication] delegate] window] rootViewController];

ViewController *view1 = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];

[presentController presentViewController:view1 动画：YES 完成：nil];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:20:07.060

在创建类时创建`UIViewController`它的父类。

似乎`UIViewController`不是您的类的父类，您的对象没有 .view

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:45:17.743

您应该在 rootViewController 的 navigationController 中显示模态视图控制器。

```
[self.window.rootViewController.navigationController presentModalViewController:res animated:NO]; 
```

所以，如果你真的想将模态视图控制器呈现到 rootViewController 中，请记住：

> 如果窗口具有现有的视图层次结构，则在安装新视图之前删除旧视图。

您第一次尝试显示模态 viewController 替换视图层次结构，但 self.window.rootViewController 没有改变，它不再在窗口层次结构中。

或类似的东西。

# javascript - SlideJS 的选项 generateNextPrev 不起作用

> ID：14439218
> 
> 赞同：0
> 
> 时间：2013-01-21T13:00:01.223
> 
> 标签：javascript, jquery, html, css, slideshow

SlideJS 有问题。我不想显示上一个/下一个按钮，所以我将选项 generateNextPrev 设置为 false。但这无济于事。

有谁知道我做错了什么？

这是代码：

```
 $("#articlesSlider1").slides({
            generateNextPrev: false,
            play: 5000,
            pause: 2500,
            width: 700,
            height: 320,

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:45:35.077

首先检查您的 HTML 标记。并搜索以下代码：

```
<a href="#" class="prev">Prev</i></a>
<a href="#" class="next">Next</i></a> 
```

删除它，然后重试。如果您已经在代码中添加了 prev/next，则**generateNextPrev: false**将不起作用。通常您不需要在标记中添加该链接，因为 Slidejs 可以生成该上一个/下一个链接。

# ruby-on-rails - heroku db：拉奇怪的响应

> ID：14439219
> 
> 赞同：0
> 
> 时间：2013-01-21T13:00:04.327
> 
> 标签：ruby-on-rails, database, heroku, heroku-toolbelt

我跑

```
$ heroku 数据库：拉
```

它说

```
加载的水龙头 v0.3.24
自动检测到的本地数据库：mysql2://root:mypassword@127.0.0.1/app?encoding=utf8
警告：数据库 'mysql2://root:mypassword@127.0.0.1/app?encoding=utf8' 中的数据将被覆盖且无法恢复。

 ！警告：破坏性行动
 ！此命令将影响应用程序：heroku-app-9999
 ！要继续，请输入“heroku-app-9999”或使用 --return heroku-app-9999 重新运行此命令

```

所以我跑

```
$ cryptic-harbor-6329
```

然后我得到这个回复：

```
!    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 !        <html>
 !        <head>
 !          <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
 !          <style type="text/css">
 !            html, body, iframe { margin: 0; padding: 0; height: 100%; }
 !            iframe { display: block; width: 100%; border: none; }
 !          </style>
 !        <title>Application Error</title></head>
 !        </head>
 !        <body>
 !          <iframe src="//s3.amazonaws.com/heroku_pages/error.html">
 !            <p>Application Error</p>
 !          </iframe>
 !        </body>
 !        </html> 
```

我已经用不同的应用程序多次拉和推到heroku。我从未收到此错误。剂量是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:15:27.383

```
heroku db:pull mysql://root:mypass@localhost/mydb 
```

尝试这个

# java - JAX-WS Web 方法中的自定义线程

> ID：14439222
> 
> 赞同：4
> 
> 时间：2013-01-21T13:00:12.873
> 
> 标签：java, multithreading, jax-ws

我有一个通过 JAX-WS 的 Web 服务问题。如果我在 web 方法中启动线程，它将在与客户端的连接结束时结束。

例子：

```
@WebMethod(operationName="test")
public boolean test()
{
  Thread th = new MyThread();
  th.start();
  // Thread is running
  ...
  return true;
  // Now thread th ends;
} 
```

有什么解决方案可以保持线程运行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T13:50:10.200

问题是您试图在 Java EE 应用服务器上启动线程。手动线程违反了 Java EE 规范，这就是您遇到问题的原因。在某些应用服务器上，您甚至根本无法*启动*单独的线程。从规范：

> 企业 bean 不得尝试管理线程。企业 bean 不得尝试启动、停止、挂起或恢复线程，或者更改线程的优先级或名称。企业 bean 不得试图管理线程组。这些功能是为 EJB 容器保留的。允许企业 bean 管理线程会降低容器正确管理运行时环境的能力。

如果您需要在单独的线程上完成工作，则需要使用应用服务器提供的工具进行异步工作。一些选项是将数据排队到 JMS 队列以供 MDB 处理，或者可能使用异步 ejb 请求（认为这是在 Java EE 6 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:08:38.777

如果您只是想在返回线程已完成之前确定 - 最简单的方法是 th.join()。此方法等待线程死亡。

# android - SlidingDrawer 替代组件

> ID：14439223
> 
> 赞同：3
> 
> 时间：2013-01-21T13:00:24.527
> 
> 标签：android, slidingdrawer

我看到 SlidingDrawer 从 API 级别 17 开始被弃用。有没有类似的组件可以使用。我需要能够像在 SlidingDrawer 中一样拥有一个把手，拉动它并查看更多内容

# java - 控制台输入错误 java.lang.NullPointerException

> ID：14439226
> 
> 赞同：7
> 
> 时间：2013-01-21T13:00:47.413
> 
> 标签：java, io

我试过代码：

```
import java.io.Console;
public class Default
{
    public static void main(String args[]) throws IOException
    {
        Console console = System.console();
        String testing = console.readLine("Enter Name: ");
        System.out.println("Entered Name: "+ testing);
    }
} 
```

出现以下错误的异常：
`Source not found. NullPointerException`

我正在使用 Eclipse Juno EE 进行调试..！

以上编写代码的参考链接在[这里](http://www.javapractices.com/topic/TopicAction.do?Id=79)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T13:06:46.303

从 IDE 使用时，您是否从 ide 运行程序作为`console.readLine`返回`null`。

[有关更多详细信息，请参阅此](http://illegalargumentexception.blogspot.in/2010/09/java-systemconsole-ides-and-testing.html)

如果您从命令行运行它，您将不会收到此错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T13:03:28.790

`System.console()`如果没有控制台，则返回 null。

您可以通过[向代码添加一个间接层](http://illegalargumentexception.blogspot.com/2010/09/java-systemconsole-ides-and-testing.html)或通过在外部控制台中运行代码并[附加远程调试器](https://stackoverflow.com/questions/104254/java-io-console-support-in-eclipse-ide)来解决此问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T13:06:19.477

那是因为，IDE 没有使用控制台！

转到 cmd.exe

键入`cd <bin path>`回车..

现在`java <classname>`输入回车

有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-24T02:13:36.773

```
import java.io.*;

public class ConsoleExTest {

    public static void main(String[] args) throws Exception {
        Console c = System.console();
        String uname = c.readLine("User Name:");
        char[] pwd = c.readPassword("Password:");
        String upwd = new String(pwd);
        if (uname.equals("chenna") && upwd.equals("chenna")) {
            System.out.println("User is valid");
        } else {
            System.out.println("User is not valid");
        }
    }

} 
```

笔记：

`System.console();`return null 所以我们会得到

# c# - 字段初始值设定项不能引用非静态字段、方法或属性

> ID：14439231
> 
> 赞同：109
> 
> 时间：2013-01-21T13:01:07.037
> 
> 标签：c#

我有一堂课，当我尝试在另一堂课中使用它时，我收到以下错误。

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace MySite
{
    public class Reminders
    {
        public Dictionary<TimeSpan, string> TimeSpanText { get; set; }

        // We are setting the default values using the Costructor
        public Reminders()
        {
            TimeSpanText.Add(TimeSpan.Zero, "None");
            TimeSpanText.Add(new TimeSpan(0, 0, 5, 0), "5 minutes before");
            TimeSpanText.Add(new TimeSpan(0, 0, 15, 0), "15 minutes before");
            TimeSpanText.Add(new TimeSpan(0, 0, 30, 0), "30 minutes before");
            TimeSpanText.Add(new TimeSpan(0, 1, 0, 0), "1 hour before");
            TimeSpanText.Add(new TimeSpan(0, 2, 0, 0), "2 hours before");
            TimeSpanText.Add(new TimeSpan(1, 0, 0, 0), "1 day before");
            TimeSpanText.Add(new TimeSpan(2, 0, 0, 0), "2 day before");
        }

    }
} 
```

在另一个类中使用该类

```
class SomeOtherClass
{  
    private Reminders reminder = new Reminders();
    // error happens on this line:
    private dynamic defaultReminder = reminder.TimeSpanText[TimeSpan.FromMinutes(15)]; 
    .... 
```

错误（CS0236）：

```
A field initializer cannot reference the nonstatic field, method, or property 
```

为什么会发生以及如何解决？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2013-01-21T13:02:34.320

这一行：

```
private dynamic defaultReminder = 
                          reminder.TimeSpanText[TimeSpan.FromMinutes(15)]; 
```

您不能使用实例变量来初始化*另一个*实例变量。为什么？因为编译器可以重新排列这些——不能保证`reminder`之前会被初始化`defaultReminder`，所以上面的行*可能会*抛出一个`NullReferenceException`.

相反，只需使用：

```
private dynamic defaultReminder = TimeSpan.FromMinutes(15); 
```

或者，在构造函数中设置值：

```
private dynamic defaultReminder;

public Reminders()
{
    defaultReminder = reminder.TimeSpanText[TimeSpan.FromMinutes(15)]; 
} 
```

[MSDN - Compiler Error CS0236](http://msdn.microsoft.com/en-us/library/5724t6za.aspx)上有关于此编译器错误的更多详细信息。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-21T13:02:50.840

您需要将该代码放入类的构造函数中：

```
private Reminders reminder = new Reminders();
private dynamic defaultReminder;

public YourClass()
{
    defaultReminder = reminder.TimeSpanText[TimeSpan.FromMinutes(15)];
} 
```

原因是您不能使用一个实例变量来使用字段初始化程序来初始化另一个实例变量。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-08-06T16:17:21.390

你可以这样使用

```
private dynamic defaultReminder => reminder.TimeSpanText[TimeSpan.FromMinutes(15)]; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-09-02T21:23:03.973

`private dynamic defaultReminder = reminder.TimeSpanText[TimeSpan.FromMinutes(15)];`是一个字段初始化器并首先执行（在没有初始化器的任何字段设置为其默认值之前以及在执行调用的实例构造函数之前）。没有初始化器的实例字段只有在所有实例字段初始化器完成后才会有一个合法的（默认）值。由于初始化顺序，实例构造函数最后执行，这就是为什么在执行初始化程序时还没有创建实例的原因。因此，编译器不允许在类实例完全构造之前引用任何实例属性（或字段）。这是因为任何对实例变量的访问，例如`reminder`隐式引用实例 ( `this`)，以告诉编译器要使用的实例的具体内存位置。

这也是`this`不允许在实例字段初始化器中使用的原因。

> 实例字段的变量初始值设定项不能引用正在创建的实例。因此，在变量初始化器中引用 this 是编译时错误，因为变量初始化器通过 *simple_name*引用任何实例成员是编译时错误。

唯一保证在执行实例字段初始化程序*之前初始化的类型成员是类（静态）字段初始化程序和类（静态）构造函数和类方法。*由于静态成员是独立于实例的，因此可以随时引用它们：

```
class SomeOtherClass
{
  private static Reminders reminder = new Reminders();

  // This operation is allowed,
  // since the compiler can guarantee that the referenced class member is already initialized
  // when this instance field initializer executes
  private dynamic defaultReminder = reminder.TimeSpanText[TimeSpan.FromMinutes(15)];
} 
```

这就是为什么实例字段初始化器只允许引用一个类成员（静态成员）。此编译器初始化规则将确保确定性类型实例化。

有关更多详细信息，我推荐此文档：[Microsoft Docs：类声明](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/classes#field-initialization)。

这意味着引用另一个实例成员以初始化其值的实例字段必须从实例构造函数初始化，或者必须声明被引用的成员`static`。

# android - android/sqlite：无法在更改的路径中创建数据库

> ID：14439233
> 
> 赞同：0
> 
> 时间：2013-01-21T13:01:09.113
> 
> 标签：android

我正在尝试在其他位置创建数据库文件，但该应用程序始终未能这样做。

```
 try {
        File sdcardfile = Environment.getExternalStorageDirectory();
        SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(sdcardfile.getPath()+ "/test.db", null);
        System.out.println("Its open? "  + db.isOpen());

    } catch (Exception e) {
        tv.setText("error is "+e.toString());// tv is a text view
    } 
```

我可以创建任何数据库，只要它不使用更改的路径。如果我使用“test.db”，它可以正常工作，但如果我使用“//test.db”则不行。

这是 logcat 文本：

```
01-21 20:14:19.470: I/Database(3678): sqlite returned: error code = 14, msg = cannot open file at source line 25467 
```

它给我的错误是：`SQLite exception: unable to open database file.` 我使用 BlueStack 作为我的模拟器。

谢谢大家的阅读。

已编辑：我的应用程序失败，因为它缺少写入权限...插入它，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:05:00.533

更好的解决方案是将数据库保存在文件夹中：/data/data/you.package.name/database，使用 SQLiteDatabaseOpenHelper。阅读[这里](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)。我希望我有所帮助

**编辑 ：**

这是简单的代码：

```
package com.radzik.mypersolnalnotepad;

import static com.radzik.mypersolnalnotepad.Stale.HASH;
import static com.radzik.mypersolnalnotepad.Stale.INT1;
import static com.radzik.mypersolnalnotepad.Stale.INT2;
import static com.radzik.mypersolnalnotepad.Stale.INT3;
import static com.radzik.mypersolnalnotepad.Stale.KIEDY;
import static com.radzik.mypersolnalnotepad.Stale.KTO;
import static com.radzik.mypersolnalnotepad.Stale.KTORY;
import static com.radzik.mypersolnalnotepad.Stale.LOGIN;
import static com.radzik.mypersolnalnotepad.Stale.NAZWA_TABELI1;
import static com.radzik.mypersolnalnotepad.Stale.NAZWA_TABELI2;
import static com.radzik.mypersolnalnotepad.Stale.NAZWA_TABELI3;
import static com.radzik.mypersolnalnotepad.Stale.TRESC;
import static com.radzik.mypersolnalnotepad.Stale.TYTUL;
import static com.radzik.mypersolnalnotepad.Stale.WANN;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class Bazodanowiec extends SQLiteOpenHelper {

    public static final String NAZWA_BAZY = "database.db";
    public static final int WERSJA_BAZY = 1;

    public Bazodanowiec(Context kon)
    {
        super(kon, NAZWA_BAZY, null, WERSJA_BAZY );
    }

    public void onCreate(SQLiteDatabase bd)
    {
        bd.execSQL("CREATE TABLE IF NOT EXISTS " + NAZWA_TABELI1 + " (" + INT1 + " INTEGER PRIMARY KEY AUTOINCREMENT, " + LOGIN + " VARCHAR(60) NOT NULL, " + HASH + " VARCHAR(64) NOT NULL);");
        bd.execSQL("CREATE TABLE IF NOT EXISTS " + NAZWA_TABELI2 + " (" + INT2 + " INTEGER PRIMARY KEY AUTOINCREMENT, " + TYTUL + " VARCHAR(60) NOT NULL, " + TRESC + " TEXT NOT NULL, " + KIEDY + " TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, " + KTO + " INTEGER NOT NULL, FOREIGN KEY(kto) REFERENCES konta(id1));");
        bd.execSQL("CREATE TABLE IF NOT EXISTS " + NAZWA_TABELI1 + " (" + INT3 + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KTORY + " INTEGER NOT NULL, " + WANN + " TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY(ktory) REFERENCES konta(id1));");
    }

    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

      db.execSQL("DROP TABLE IF EXISTS " + NAZWA_TABELI1 + ";");
      db.execSQL("DROP TABLE IF EXISTS " + NAZWA_TABELI2 + ";");
      db.execSQL("DROP TABLE IF EXISTS " + NAZWA_TABELI3 + ";");
      onCreate(db);
    }

} 
```

“陈旧”是界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:06:22.510

胡乱猜测（您的问题中缺少信息），但您是否在应用清单中请求访问 SD 卡的权限？

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:06:52.213

您是否获得了应用程序的 WRITE_EXTERNAL_STORAGE 权限？我在我的 DatabaseHelper 中得到了很好的结果：

```
 public DatabaseHelper(final Context context) {
        super(context, Environment.getExternalStorageDirectory()
            + File.separator + FILE_DIR
            + File.separator + DATABASE_NAME, null, DATABASE_VERSION);
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-21T13:45:34.257

试试这种方式：

> ```
> private static String DB_PATH;
> public DataBaseHelper(Context p_context)
> {
> try
> {
>     m_context = p_context;
>     if (DB_PATH == null)
>     {
>         DB_PATH = Environment.getExternalStorageDirectory()+ p_context.getApplicationContext().getPackageName() +File.separatorChar+ "databases" + File.separatorChar + "/test.db";
>         }
>         openOrCreateDatabase();
>         m_dbhelper = new DBHelper(this.m_context, DB_PATH, null, DBConstant.DATABASE_VERSION);
>     }
>     catch (Exception e)
>     {
>     }
> } 
> ```

# asp.net-mvc-3 - 循环遍历 @Html.DropDownListFor (MVC3) 中的 IEnumerable

> ID：14439236
> 
> 赞同：0
> 
> 时间：2013-01-21T13:01:22.387
> 
> 标签：asp.net-mvc-3, linq, collections

我有一组要传递给视图的模型，我想在下拉列表中显示每个 model.property。问题是我的代码中有一个错误，它显示了两个重复的项目。

```
@model IEnumerable<UserManager.Models.vw_UserManager_Model>

@Html.Label("BRAD Module:")&nbsp
@Html.DropDownListFor(model => model.FirstOrDefault().module_name, Model.Select(x => new SelectListItem { Text = x.module_name, Value = x.module_name }), new { id = "ddlSelectedBrad", onchange = "chkSelection()" }) 
```

我目前正在使用 FirstOrDefault() 来访问我的模型集合中每个模型的模块名称。但是通过这样做，我有一个重复的值。

请参阅下面的屏幕截图：

![在此处输入图像描述](../Images/3785407ff031e0b10abf635a4cb748bc.png)

市场：休闲两次出现

![在此处输入图像描述](../Images/b6640b8e5e24a55bcc8b94faa43763e7.png)

情报显示两次。如果我更改此下拉值并返回此屏幕，它将显示两个重复值。 **概括**

有谁知道编写 LINQ 查询的更好方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:29:28.533

代替

```
Model.Select(x => new SelectListItem { Text = x.module_name, Value = x.module_name }) 
```

尝试

```
Model.GroupBy(x => x.module_name).Select(x => new SelectListItem { Text = x.First().module_name, Value = x.First().module_name }) 
```

这应该过滤重复的记录。

# php - 如何使 PDO 更简单

> ID：14439237
> 
> 赞同：5
> 
> 时间：2013-01-21T13:01:22.933
> 
> 标签：php, mysql, function, pdo

当我将自己（终于！）从 mysql_connect() 转换为 PDO::etc 和所有其他 mysql 函数时，为了对我的网站采用更好的 DB 抽象编码风格，我不禁注意到面向对象的错误异常处理和基于这些东西的准备好的陈述是。我对这一切都很好，但我确信我旁边的初学者只会简单地复制和粘贴。

是否有任何库/脚本/用户贡献可以使 DBO 调用更简单，例如删除异常处理和面向对象，或者至少对 n00b 友好？

我用 PDO 创建了自己的库，但我不确定那里已经有什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:03:13.577

您可以使用使用 ORM 的框架，例如 Laravel：[http ://laravel.com/docs/database/eloquent](http://laravel.com/docs/database/eloquent)

但是你没有编写自己的 SQL 查询（或不推荐），否则你可以只使用 MySQLi：[http](http://se2.php.net/mysqli_query) ://se2.php.net/mysqli_query但它们都没有删除我认为的任何客观观点。但是对于新程序员来说，两者都可能更容易理解。

我建议你至少为你未来的项目寻找一个框架。

以下是其中的一些示例：

*   [http://laravel.com/docs/database/eloquent](http://laravel.com/docs/database/eloquent) (Laravel)
*   [http://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html) (CodeIgniter)
*   [http://book.cakephp.org/2.0/en/models/retrieving-your-data.html](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html) (CakePHP)
*   [http://li3.me/docs/manual/quickstart](http://li3.me/docs/manual/quickstart)（锂，用于替代数据库 MongoDB）

# ksh - 读取目录 ksh 中的所有文件

> ID：14439241
> 
> 赞同：0
> 
> 时间：2013-01-21T13:01:40.080
> 
> 标签：ksh

我想从文件中一一读取所有文件，`/home/ram/files/*.txt` 如果文件少于或等于 7 行，我想删除文件。

我正在使用`ksh`脚本

以下代码对我不起作用！请帮忙

```
for file in /home/ram/files/*.txt
do
 no_of_lines=$(wc -l "$file")
 if [[ $no_of_lines -le 7 ]];
  then
  rm "$file"
 fi
done 
```

谢谢，拉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:09:34.970

`wc`命令也给出计数和文件名。

将其更改为：

```
no_of_lines=$(wc -l < "$file") 
```

# symfony - 在 Doctrine 中与多个数据库进行映射

> ID：14439246
> 
> 赞同：0
> 
> 时间：2013-01-21T13:01:49.563
> 
> 标签：symfony, doctrine

我正在尝试设置我的 symfony 以使用两个数据库连接。问题是 Symfony 不会将实体映射到正确的 EntityManager。所以执行一个查询，我必须告诉 Symfony 它应该使用哪个管理器。

我的配置：

```
# Doctrine Configuration
doctrine:
  dbal:
    default_connection: default
      connections:
        default:
          driver:   "%database_driver%"
          host:     "%database_host%"
          port:     "%database_port%"
          dbname:   "%database_name%"
          user:     "%database_user%"
          password: "%database_password%"
          charset:  UTF8

        lookup:
          driver:   "%database_driver%"
          host:     "%database_host%"
          port:     "%database_port%"
          dbname:   "Lookup"
          user:     "%database_user%"
          password: "%database_password%"
          charset:  UTF8

  orm:
    auto_generate_proxy_classes: "%kernel.debug%"

    default_entity_manager: default
    entity_managers:
      default:
        connection: default
          mappings:
            MbMyAppBundle: ~

      mvibes:
        mappings:
          MbLookupBundle: ~
        connection: mvibes 
```

所以，要从我的查找中查询，我必须这样做：`$this->getDoctrine()->getRepository('MbLookupBundle:Country', 'lookup');`

相反，我希望我可以省略第二个参数。这样，我的捆绑包将是独立的。项目经理可以决定他将在他的项目中实现什么数据库配置。他只需要确保映射是正确的。

这是如何运作的？如果这是不可能的，那么映射用于什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:28:55.540

您在连接命名方面有错误：

```
# Doctrine Configuration
doctrine:
  dbal:
    default_connection: default
      connections:
        default:
          # ...

        mvibes:   #This is the name of the connection
          # ...

  orm:
    auto_generate_proxy_classes: "%kernel.debug%"

    default_entity_manager: default
    entity_managers:
      default:
        connection: default
        mappings:
          MbMyAppBundle: ~

      mvibes:
        mappings:
          MbLookupBundle: ~
        connection: mvibes #must refre to a connection's name defined above 
```

官方文档：[http](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html) ://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html 我写的一篇博文：http: [//blog.alterphp.com/2011/10/configuration-trick-for-多实体.html](http://blog.alterphp.com/2011/10/configuration-trick-for-multiple-entity.html)

# javascript - 将支持 IMS 和 WebRTC 的客户端集成到 Lync 客户端？

> ID：14439249
> 
> 赞同：1
> 
> 时间：2013-01-21T13:01:58.040
> 
> 标签：javascript, html, rtp, webrtc, lync-server-2010

最近我遇到了datachannel。我想集成两个基础架构以启用 webrtc 互操作性。

Lync 服务器将提供信令和状态来帮助定位 lync 客户端和其他对等点连接到 IMS 应用程序服务器。另一个对等点不是 lync 客户端，而是启用了 webrtc 的浏览器。我将如何通过集成这两个基础架构（Lync 和 IMS）来传输数据？

如果有一些关于哪些应用层协议可用于通过可互操作的对等点传输数据流的信息会很棒吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:54:44.993

除非您准备好进行大量低级编码和/或高级拉毛，否则我怀疑 WebRTC 还没有为这样的场景做好准备。有些人设法让它与 Asterisk 等服务器一起工作，据说这里有一个通用的 SIP 客户端：[https](https://code.google.com/p/sipml5/) ://code.google.com/p/sipml5/ 。但是从我在 WebRTC 邮件列表上听到的消息来看，人们在这些集成场景中遇到了一些麻烦。当然，没有什么是开箱即用的。Lync 支持 SDP 和 SIP，但我希望您需要花费大量时间弄清楚如何在 WebRTC 生成的 SDP 到达 Lync 服务器之前对其进行转换。

[编辑 1/28/2013] - 除了上述问题之外，真正的问题可能与每个平台支持的编解码器有关。目前，我认为 WebRTC 支持的唯一编解码器是 Google 的 VP8，Lync 似乎不支持它。因此，您需要在它们之间安装一个实时网关/转码器，在 H.264（或 Microsoft Lync 采用的任何协议）和 VP8 之间进行转换。假设你可以找到一个网关来做到这一点——它们很可能存在——我无法想象它会很好地扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:11:44.260

为了补充 Ken Smith 的回答，请查看[Medooze 的 MCU Media Server](http://www.medooze.com/products/mcu.aspx)。他们声称具有转码和会议功能，并且支持 WebRTC。

# c# - 不可变只读对象与具有自动属性的对象

> ID：14439252
> 
> 赞同：2
> 
> 时间：2013-01-21T13:01:58.567
> 
> 标签：c#

我一直在想这个问题，并且无法找到关于该主题的太多评论，也无法自己得出结论。

创建对象时，公认的最佳做法是尽可能限制对象的公开数据和允许操作该数据。如果您可以使对象不可变，尤其是在多线程应用程序中，那么最好这样做。

话虽如此，C# 似乎偏爱不遵循此规则的开发人员，允许类的定义更简单，更重要的是，更易于维护。

采用以下只读不可变类：

```
public class ActiveDirectoryUser
{
    private readonly string firstName, lastName, office, username, email;

    public ActiveDirectoryUser(string firstName, string lastName, string office, string username, string email)
    {
        this.firstName = firstName;
        this.lastName = lastName;
        this.office = office;
        this.username = username;
        this.email = email;
    }

    public string FirstName
    {
        get { return firstName; }
    }

    public string LastName
    {
        get { return lastName; }
    }

    ...

    public string Email
    {
        get { return email; }
    }
} 
```

并将其与下面更简单的示例进行比较，该示例不是只读的。

```
public class ActiveDirectoryUser
{
    public string FirstName
    {
        get;
        set;
    }

    public string LastName
    {
        get;
        set;
    }

    ...

    public string Email
    {
        get;
        set;
    }
} 
```

可以用以下实例化的是：

```
ActiveDirectoryUser user = 
    new ActiveDirectoryUser
       { FirstName= "Sam", LastName = "Shiles", ..., Email ="Sam@shiles.com" }; 
```

给定更简单的定义、更少的代码行、更少的开发人员错误机会以及其他开发人员可以轻松理解代码（尤其是比我们的简单示例更真实的示例），这就是创建正确的价值只读的，不可变的对象，值得付出代价吗？

此外，其他人是否认为在 C# 中制作不可变对象应该更容易使用自动 esq 语法，例如：

```
public string FirstName {get; readonly set;} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T16:26:24.833

> 给定更简单的定义、更少的代码行、更少的开发人员错误机会以及其他开发人员可以轻松理解代码（尤其是比我们的简单示例更真实的示例），这就是创建正确的价值只读的，不可变的对象，值得付出代价吗？

是的。

我注意到没有什么能阻止你说

```
int Foo { get; private set; } 
```

然后只在构造函数中使用setter，以保证属性的不变性。你只是没有得到好的对象初始化语法，但你可以很容易地创建一个构造函数。

> 此外，其他人是否认为使用自动 esq 语法在 C# 中制作不可变对象应该更容易......

是的。C# 语言设计团队尤其相信这一点。

C# 3.0 添加了许多特性，使 C# 成为一种更“不可变友好”的语言：匿名类型、查询理解和表达式树尤其鼓励不可变数据的“函数式”编程风格。它还添加了使 C# 成为更“可变友好”语言的功能：自动属性、对象初始化器和类型推断数组浮现在脑海中。

语言设计团队很清楚，在 DLR 团队正在制作一个庞大的不可变表达式树类型库的同时，后面的这些特性使创建可变对象变得更加容易。我可以向你保证，他们并没有失去讽刺意味。

语言设计团队周围有许多提议，以寻求更好的语法糖来制作不可变对象。需要可变性的对象初始值设定项具有与不可变的匿名类型初始值设定项几乎相同的语法这一事实显然是探索的起点，但不是唯一的起点。

当然，所有这一切，首先，我不再代表语言设计团队发言，其次，除了 Roslyn 项目之外，没有公布的 C# 未来版本。因此，关于假设的未来语言版本的可能特性集的猜测只是：我的猜测。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T13:06:58.757

> 创建适当的只读、不可变对象的价值是否值得付出代价？

这取决于您对不变性、线程安全性的关注程度以及您对其他开发人员不会犯错误的信任程度。

我会问相反的问题 - 可能的线程错误的成本是否值得真正快速而简单地创建可变对象的价值？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T14:46:15.210

当我思考这些问题时，我倾向于将代码分为几类。

*   应用层
*   内部框架层
*   公共 API 级别

在应用程序级别，您的类通常是叶类，旨在实现项目范围内的非常特定的功能。它们很少被重用，唯一依赖于它们的是应用程序本身中的其他特定类。

在这里，我给自己一些自由，我想说一些公共财产不会伤害任何人。无论如何，这一切都非常本地化，并且随着应用程序的更改，您仍然需要了解代码如何交互才能对此代码进行任何更改。然而，自由不等于草率。

在框架级别上，我的意思是在项目之间高度可重用的子系统。可能是多年来已被证明有效的盐+哈希密码类。或者可能是您在多个项目中依赖的整个第三方产品的包装器。

引用此类程序集或将源文件添加到解决方案后，您的应用程序仍可被视为该代码的唯一使用者。但是该代码仍然必须非常包含，并且应该承诺遵守合同。如果公共属性允许对象具有损坏状态，我会说这是一个非常蹩脚的框架。

在 Api 级别上，情况发生了巨大变化。现在您正在设计的代码应该会随着时间的推移被许多订阅者使用。只是不要与术语混淆，这里明显的候选者是 .NET Framework 本身。但是，如果您是提供 api 的人，人们甚至可以通过保修付费；你真的想要一个不会轻易被滥用的稳定系统。

我认为有趣（并且有点有趣）的是，来自 OOP 纯粹主义者和 SOLID 纯粹主义者（以及其他纯粹主义者）的所有好的原则似乎都默认假设他们的所有代码都在高端支持中api 级别。

所以为了回答你的问题，我会给你几个问题来思考

*   这个对象会改变状态吗？
*   是否会更改其他代码段的破坏假设？
*   如果是这样，是否会以这种方式滥用我的对象的任何理智使用？
*   如果我的对象被疯狂滥用，这是本地错误还是主要支持问题？
*   我在这里实际需要什么级别的保护？
*   我要为此付出多少努力？
*   这是否带有任何文档？

举一个明确的例子。在我引以为豪的 Web 项目中，很多数据都缓存在单例中（实际上是静态类）。我们确实正确锁定以确保 GetOrSet 上的线程安全。除了一个小细节。我们将缓存中实际对象的引用分发给多个线程。它们是可变的，任何写入其公共属性的尝试都可能导致各种问题。现在我们克隆它们吗？让它们不可变？复制这些对象会降低性能，这样它们就不会造成伤害？没有。由于我们是自己缓存的唯一消费者，我们只是决定将来自服务的所有数据都视为只读。当我们确实需要副本时，我们会使用 Automapper。我们会在代码审查期间对此进行检查。它工作得很好。虽然我们有一些错误，但还没有一个是由写入可变对象引起的。

病人： - 我这样跳的时候腿疼。

医生：-那就不要那样跳了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T13:09:00.610

尽管您的第二个示例不正确（它不是不可变的，您应该添加一个构造函数，该构造函数接受与您的字段匹配的参数）我会说它可以是因为 readonly 修饰符表示您在编写类时的意图。这意味着将来当其他人修改类时，他们将知道这些字段是只读的，而不是它们实际上是只读的。

# ruby-on-rails - 太阳黑子现场查询

> ID：14439263
> 
> 赞同：1
> 
> 时间：2013-01-21T13:02:33.670
> 
> 标签：ruby-on-rails, solr, sunspot

假设我有一个定义如下的模型（标题和描述分别是字符串和文本字段）：

```
class Entity < ActiveRecord::Base
  # Skipped

  searchable do
    text :title,
    text :description
  end
end 
```

我希望能够使用像“title:foo description:bar”这样的搜索查询，它假设只检索那些字段满足搜索条件的实体，即标题包含“foo”和/或描述包含“bar”的实体。确切的语法无关紧要。

我试图在我的演示应用程序的搜索字段中输入这样的查询，但显然它没有返回任何结果 :-)

那么，Sunspot 查询解析器是否支持字段查询（不确定该术语是否正确）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:02:39.810

这是 Solr 的 edismax 查询解析器应该支持的功能。但是 Sunspot 当前默认使用较旧的 dismax 查询解析器。

要在您的搜索中启用 edismax，请在您的`search`块中尝试以下行：

```
adjust_solr_params { |p| p[:defType] = 'edismax' } 
```

（这不是我的想法；如果我错过了语法，请告诉我。）

# sandbox - libsandbox / pysandbox 文档

> ID：14439267
> 
> 赞同：1
> 
> 时间：2013-01-21T13:02:47.067
> 
> 标签：sandbox

我想为一个在线评委项目执行代码。

[我找不到libsandbox](http://sourceforge.net/projects/libsandbox/)的 Python 包装器的文档， 我找到了 sample2.py 和一些[测试用例](https://github.com/liuyu81/TR-OJA-201209A)，但没有解释。

创建沙盒时的默认设置是什么？默认情况下是否安全？

我想执行不受信任的代码 - 限制 CPU - 限制内存 - 限制执行时间 - 只允许对特定文件夹进行读/写访问并限制此文件夹的大小。- 阻止网络 IO。- 阻止执行其他程序。

这段代码结合了我发现的两个例子：

```
cookbook = {
'args': args[1:],               # targeted program
'stdin': sys.stdin,             # input to targeted program
'stdout': sys.stdout,           # output from targeted program
'stderr': sys.stderr,           # error from targeted program
    'jail': './foo',
    'owner': 'nobody',
'quota': dict(wallclock = 30000,# 30 sec
              cpu = 2000,       #  2 sec
              memory = 8388608, #  8 MB
              disk = 1048576)}  #  1 MB
# create a sandbox instance and execute till end
s = Sandbox(**cookbook)
s.run()
s.result == S_RESULT_OK 
```

磁盘配额限制是什么？它是否限制了脚本在此运行中可以写入的总字节数或文件夹的大小？将所有者设置为没人有什么作用？我的示例中的代码会阻止执行任意代码、阻止网络 IO 并阻止访问被监禁文件夹之外的文件吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:37:32.553

> 创建沙盒时的默认设置是什么？默认情况下是否安全？

*   默认情况下，`Sandbox`实例是允许的。除非您指定，否则它会授予无限配额`quota`；它允许所有系统调用，除非您使用自定义策略过滤系统调用事件，否则会导致多处理（即，，，... `fork()`）和进程间通信（即， ...）。`vfork()``clone()``waitid()``ptrace()`
*   随附的示例代码 ( `sample2.py`)`libsandbox`是限制性白名单沙盒的最小工作示例。将其用作看门狗程序的框架。

> 磁盘配额限制是什么？它是否限制了脚本在此运行中可以写入的总字节数或文件夹的大小？

*   `disk`配额限制目标程序可以写入所有符合条件的文件系统（即支持配额限制并能够生成`SIGXFSZ`信号的文件系统）的总字节数。
*   `ext3`如果程序在文件系统或文件系统上写入常规文件`ext4`，这通常很重要；但写入标准输出流或`/dev/null`不计入配额。不过，您可以在自定义策略中实施基于文件夹的配额。

> 设置`owner`做`nobody`什么？

*   代表用户执行目标程序`nobody`。该`owner`参数包装了操作系统级别的服务`setuid()`。之后`setuid()`，`nobody`目标程序拥有操作系统授予用户的所有权限`nobody`，除此之外没有其他权限。
*   请注意，您必须是超级用户才能指定您`owner`以外的其他用户。

> 我的示例中的代码会阻止执行任意代码、阻止网络 IO 并阻止访问被监禁文件夹之外的文件吗？

*   不完全是。程序进行的所有系统调用都会报告给沙箱，但您必须插入一个策略模块，明确阻止与网络 IO 相关的系统调用。或者，您可以像示例代码一样，根据白名单过滤所有系统调用`sample2.py`。
*   另请注意，您必须是超级用户才能指定`jail`根目录以外的目录`/`。

> 免责声明：我是`libsandbox`.

# sql-server - 检测一个表的身份PK

> ID：14439268
> 
> 赞同：0
> 
> 时间：2013-01-21T13:02:48.330
> 
> 标签：sql-server, visual-studio

我在 SQL Server 中创建了两个表：

```
create table Voyage(NumV int primary key identity, NbpAgadir int, NbpCasa int, NbpRabat int, Montant float)
create table Archive(NumV int foreign key references Voyage(NumV), NumPlace int, Ville varchar(10)) 
```

我在 VS 中有一个表格：

![在此处输入图像描述](../Images/35ec0845549ac8c8bb11a7712e381ff8.png)

`DGV`当我按下`Valider Button`将第一行中的所有数据保存在第二行中时，第二行只包含我想要`DGV`的一行`Voyage table`，所以我编写了它的代码并且它可以工作。

问题是当我按下`Valider Button`它时也应该将数据保存在第一个`DGV`into 中，但我不知道如何检测将添加到的新行的 PK `Voyage table`，因为我需要在保存数据`Archive table`时写入也这`NumV FK`是一个PK int `Voyage table`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:59:39.833

如果您使用存储过程来保存记录，您可以在 SQL 中使用 @@IDENTITY 或 SCOPE_IDENTITY() 来返回最后插入的记录的 ID。

有关使用信息，请参阅[此链接](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)。

另见：

*   [MSDN @@IDENTITY](http://msdn.microsoft.com/en-gb/library/aa933196%28v=sql.80%29.aspx)
*   [MSDN SCOPE_IDENTITY](http://msdn.microsoft.com/en-us/library/aa259185%28v=sql.80%29.aspx)

# html - 添加 标签和 在 joomla 2.5.7 文章中添加标签

> ID：14439272
> 
> 赞同：0
> 
> 时间：2013-01-21T13:02:54.403
> 
> 标签：html, joomla

我无法在 joomla 2.5.7 文章中添加 div 和视频标签，就像我添加 div 但内容没有实时显示一样。

```
<div class="rightside">
<div>
<video width="900" height="550">
<source src="http://eb5mg.com/video/1.mp4" type="video/mp4">
</source>
<source src="http://eb5mg.com/video/eb5.ogg" type="video/ogg">
</source>
</video>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:07:39.660

试试下面的代码

```
<div class="rightside">
<div>
    <video width="900" height="550">
      <source src="http://eb5mg.com/video/1.mp4" type="video/mp4">
      <source src="http://eb5mg.com/video/eb5.ogg" type="video/ogg">
    Your browser does not support the video tag.
    </video>
</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T19:24:17.673

我看到这是一个老话题，但我也遇到了同样的问题。它与 Joomla 有关，对我来说它来自两个不同的来源。

首先有一个 html 单词过滤器，它是全局配置的一部分，默认情况下使用黑名单去除许多标签。我将发布者和超级用户过滤器类型设置为无过滤，但根据您的用户和安全需求，您可能希望更加严格（比如在黑名单上展开并且只允许超级用户没有过滤器）。

然后是您用于文章的所见即所得编辑器。它也可能是文本过滤您的 html，我的默认编辑器 TinyMCE 也有用于剥离代码的选项，您可以对其进行调整，但在玩了一段时间后，我将用户配置文件文本编辑器更改为无。

在那之后我的视频标签工作了，我想你的 div 标签也可以工作。

# javascript - 在 node.js 中做一个 while 循环，总是给我最后一个数组项？

> ID：14439280
> 
> 赞同：0
> 
> 时间：2013-01-21T13:03:18.773
> 
> 标签：javascript, node.js, coffeescript, zombie.js

我使用zombie.js库，对dom做一些测试，我有这个脚本

```
Browser = require "zombie"
arr = new Array("http://yahoo.com", "http://google.com", "http://msn.com")
i = 0
while i < arr.length
    b = new Browser()
    b.visit arr[i], ->
        console.log b.text "title"
    b.close()
    i++ 
```

一切正常，但它只记录两次 msn 标题，因此 while 循环将数组中的最后一项记录两次。我似乎看不出问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:22:07.807

您正在注册浏览器`visit`完成时的回调。到那时，循环已经运行完成，因此变量`b`指向您创建的最后一个浏览器，这意味着它的标题将是 MSN 的标题，而不是其他页面的标题。为了解决这个问题，使用闭包：

```
Browser = require "zombie"
arr = new Array("http://yahoo.com", "http://google.com", "http://msn.com")
i = 0
createBrowser = (url) ->
    b = new Browser()
    b.visit url, -> console.log b.text "title"
    b.close()

while i < arr.length
    createBrowser(arr[i++]) 
```

这是有效的，因为现在您创建的每个浏览器都有一个单独的范围，以及一个单独的浏览器变量。

或者，使用 ZombieJS`visit`函数的回调参数：

```
Browser = require "zombie"
arr = new Array("http://yahoo.com", "http://google.com", "http://msn.com")
i = 0
while i < arr.length
    b = new Browser()
    b.visit arr[i], (e, myBrowser) ->
        console.log myBrowser.text "title"
    b.close()
    i++ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:10:37.783

该`visit`方法是异步的，采用回调函数。换句话说，`visit`在任何日志记录发生之前调用了 3 次，即在和调用之间*不*执行console.log。到最后一个回调完成时，指的是“最后一个”浏览器实例（msn 实例）。该方法可能会传递回调的结果，请查看文档。`b.visit``b.close``b``visit`

```
Browser = require 'zombie'

for url in ["foo", "bar", "baz"] # elegant way to loop lists in coffeescript
  b = new Browser
  b.visit url, (err, b) ->       # b given as argument masks the b in outer scope
    console.log b.text "title"
    b.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T13:27:55.637

我认为您想要做的是类似于以下内容（警告，未经测试！）：

```
Browser = require "zombie"
sites = ['http://yahoo.com', 'http://google.com', 'http://msn.com']

process = (site) ->
  b = new Browser()
  b.visit site, () ->
    title = b.text title
    console.log title
    b.close()

process site for site in sites 
```

我冒昧地更改了一些零碎的东西-希望它仍然很清楚。

如果您不习惯 JavaScript（和 CoffeeScript），它们会有奇怪的作用域规则。我发现通常最好在一个函数中完成所有工作，以使事情按您的预期工作。

我不确切地知道zombie.js 是如何工作的，但我认为这应该如你所愿。

# c# - 使用统一寻找各种实现方式依赖注入

> ID：14439284
> 
> 赞同：1
> 
> 时间：2013-01-21T13:03:29.687
> 
> 标签：c#, dependency-injection, unity-container

我是依赖注入的新手。我刚刚熟悉了如何使用接口注入实现依赖注入，但我们知道依赖注入可以通过三种方式实现，或者可能更多，它们是：-

1.  **接口注入**：服务提供消费者必须实现的接口。该接口在运行时公开特定行为。
2.  **Setter 注入**：依赖对象公开了一个“setter”方法来注入依赖项。
3.  **构造函数注入**：依赖是通过类构造函数注入的

所以我正在寻找一些示例代码，它们可以帮助我了解如何使用 Setter 注入或使用 Unity 的构造函数注入来实现依赖注入。对于实现依赖注入的不同方式的小代码的任何帮助将不胜感激。

我只知道使用统一的接口注入。这是我的代码，它使用统一的接口注入可以正常工作。

```
public interface ILogger
{
     void Write(string message);
}

We have define three classes as follows.

public class FileLogger : ILogger
{
     public void Write(string message)
     {
          //Do somthing
     }
}

public class SQLLogger : ILogger
{
     public void Write(string message)
     {
          //Do somthing
     }
}

public class WindowsEventLogger : ILogger
{
     public void Write(string message)
     {
          //Do somthing
     }
} 
```

需要在配置文件（即app.config）中注册和映射这些类与接口。

```
<configSections>
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration"/>
  </configSections>

  <unity xmlns="http://schemas.microsoft.com/practices/2010/unity">
    <alias type="UnityTest.ILogger, UnityTest" alias="ILogger" />
    <namespace name="UnityTest"/>

    <container>
      <register mapTo="UnityTest.FileLogger, UnityTest" name="MyFileLogger" type="ILogger"/>
      <register mapTo="UnityTest.SQLLogger, UnityTest" name="MySQLLogger" type="ILogger"/>
      <register mapTo="UnityTest.WindowsEventLogger, UnityTest" name="MyWindowsEventLogger" type="ILogger"/>
    </container>
</unity> 
```

注意：名称属性在注册标签中很重要。

最后我们必须在我们的代码中使用这个映射。因此，我们必须知道哪个更适合特定国家/地区。

字典对象可用于保持此映射如下。

```
IDictionary<string, string> loggers = new Dictionary<string, string>();
loggers.Add("USA", "MyFileLogger");
loggers.Add("GBR", "MySQLLogger");
loggers.Add("IN", "MyWindowsEventLogger"); 
```

您可以从数据库、xml 或其他来源填充​​它，现在是时候调用 Write 方法了。

```
IUnityContainer container = new UnityContainer();
container.LoadConfiguration();

ILogger logger = container.Resolve<ILogger>(loggers[objUser.countryCode]);
logger.Write("Hello World"); 
```

## **新问题**

我找到了一个统一的构造注入示例代码，但仍有一件事不清楚。这是代码。

```
public class CustomerService
{
  public CustomerService(LoggingService myServiceInstance)
  { 
    // work with the dependent instance
    myServiceInstance.WriteToLog("SomeValue");
  }
} 

IUnityContainer uContainer = new UnityContainer();
CustomerService myInstance = uContainer.Resolve<CustomerService>(); 
```

当我们编写时`uContainer.Resolve<CustomerService>();`，我们没有发送任何 LoggingService 类的实例，那么我们如何创建`CustomerService`类的实例，因为它的构造函数需要`LoggingService`.

这个区域不清楚。请向我解释它是如何工作的。

另一个问题是`[Dependency]`属性：它做什么，以及何时需要用`[Dependency]`属性修饰方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:24:28.093

以您的代码为基础。

如果您有一些依赖于 ILogger 的类，并且您有 ILogger 的默认注册（没有名称的注册）

```
IUnityContainer container = new UnityContainer();

//fixed
//by default RegisterType will create new instance of the type every time 
//the container resolves the dependancy 
container.RegisterType<ILogger,SomeLoggerImplementation>();
container.RegisterType<Foo>();
container.RegisterType<Bar>();

//will create a new instance of SomeLoggerImplementation using a default ctor, pass it to the constructor of Foo and return the instance of Foo
//if SomeLoggerImplementation has some other dependancies they can be registered in the container too! 
var foo = container.Resolve<Foo>();

//will create a new instance of SomeLoggerImplementation using a default ctor, create a new instance of Bar, 
//Set the value of the Property Logger (but not the Logger2), and return the instance of Bar
var bar = container.Resolve<Bar>();

//Constructor injection
public class Foo
{
    private ILogger _logger;
    public Foo(ILogger logger)
    {
        //if Foo is resolved from the container , the value for the logger parameter will be provided from the container
        _logger = logger;
    }
}

//property injection
public class Bar
{
    //If Bar is resolvced from the container the value for the Logger property will also  be provided from the container
    [Dependency]
    public ILogger Logger { get; set; }

    //this will not be injected
    public ILogger Logger2 { get; set; }

    public Bar()
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:24:38.993

首先将要求解的类注册到统一（在这种情况下，将测试类注册到统一）。当您尝试`Test`使用统一解决类的实例时，它也会解决`ILogger`。您可以参考[msdn 的注入属性](http://msdn.microsoft.com/en-us/library/ff660887%28v=pandp.20%29.aspx)

二传手注入；

```
public class Test : ITest
{
    [Dependency("MyFileLogger")]
    public ILogger Logger
    {
       get { return iLogger; }
       set { iLogger = value; }
    }
} 
```

构造函数注入；

```
public class Test : ITest
{
    public Test([Dependency("MyFileLogger")] ILogger logger)
    {
         //// you will have an instance of MyFileLogger
    }
} 
```

对于您问题的第二部分，由于`LoggingService`也已注册到 unity，因此在`CustomerService`尝试解析时，它将使用构造函数注入来解析`LoggingService`参数。换句话说，当容器尝试解析时`CustomerService`；它知道`LoggingService`需要解决它。然后它首先解析`LoggingService`参数，然后尝试解析`CustomerService`。

# facebook - wordpress中fancybox的动态facebook元标签

> ID：14439285
> 
> 赞同：0
> 
> 时间：2013-01-21T13:03:30.547
> 
> 标签：facebook, wordpress, addthis

我有一个用 wordpress 开发的网站。有一个产品类别，并且有分配给它的帖子，现在当点击一个产品时，会打开一个花式框。我正在尝试使用 addthis 让 facebook 喜欢fancybox 内的产品。现在的问题是，当产品被喜欢时，会显示随机图像而不是产品图像。经过大量研究发现我需要即时设置 facebook 元，但我无法找到实现此任务的方法。由于页面未重新加载，我如何设置具有产品相应图像的元标记？

网站网址是[http://havmor.com/products/](http://havmor.com/products/)

问候，乔尔·詹姆斯

# java - 如何在不注册客户端的情况下制作 RMI 服务器多客户端程序

> ID：14439286
> 
> 赞同：1
> 
> 时间：2013-01-21T13:03:32.950
> 
> 标签：java, rmi

我有一个 RMI 服务器，许多客户端连接到该服务器。当客户端注册更改时，服务器会做出反应并指示所有客户端进行更改。

我一直在研究许多 hello world RMI 示例，但没有一个解决如何从服务器持久连接回客户端。

我想要实现的是这些方面：服务器在 rmiregistry 上注册。客户端 1 连接到服务器并调用服务器上的方法。客户端 2 连接到服务器并调用服务器上的方法。服务器将更改从 client2 发送到 client1。

如果不将每个客户端都注册为服务器，如何实现这一点？

编辑：看了几个优秀的答案（更平坦）后，我遇到了以下异常 java.rmi.StubNotFoundException: Stub class not found: thegame.connectivity.GameClient_Stub; 嵌套异常是：

```
java.lang.ClassNotFoundException: thegame.connectivity.GameClient_Stub
    at sun.rmi.server.Util.createStub(Util.java:292)
    at sun.rmi.server.Util.createProxy(Util.java:140)
    at sun.rmi.server.UnicastServerRef.exportObject(UnicastServerRef.java:196)
    at java.rmi.server.UnicastRemoteObject.exportObject(UnicastRemoteObject.java:310)
    at java.rmi.server.UnicastRemoteObject.exportObject(UnicastRemoteObject.java:237)
    at thegame.connectivity.GameClient.bind(GameClient.java:37)
    at thegame.connectivity.GameClient.run(GameClient.java:51)
    at thegame.connectivity.GameClient.main(GameClient.java:29)
Caused by: java.lang.ClassNotFoundException: thegame.connectivity.GameClient_Stub
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at sun.rmi.server.Util.createStub(Util.java:286)
    ... 7 more 
```

在这堂课上

```
public class GameClient extends Thread implements Remote, Client, ModelChangeListener<Client>{
    private static final long serialVersionUID = -394039736555035873L;
    protected Queue<GameModelEvent> queue = new ConcurrentLinkedQueue<GameModelEvent>(); 

    public GameClient(){

    }

    public static void main(String[] args){
        GameClient client = new GameClient();
        client.run();
    }

    protected void bind(){
        System.setProperty("java.rmi.server.codebase","file:bin/");
        try {
            Registry registry = LocateRegistry.getRegistry();
            Client c = (Client)UnicastRemoteObject.exportObject(this);
            Server stub = (Server) registry.lookup("Server");
            stub.registerClient(c);
        } catch (RemoteException | NotBoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @Override
    public void run() {
        super.run();
        bind();
        while(!Thread.interrupted()){
            System.out.print(".");
            GameModelEvent event = queue.poll();
            while(event != null){

                System.out.println(event);

                event = queue.poll();
            }

            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                return;
            }
        }

    }
... 
```

当我注释掉 UnicatRemoteObject 并仅将 null 作为参数传递时，它运行良好。所以有一个连接，一切都在运行。但是没有存根......注释掉代码库也没有效果。代码库在服务器上运行良好。

关于什么是错的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:15:13.713

当您的客户第一次联系 RMI 服务器时，他们可以提供某种类型的侦听器来实现该`Remote`接口。服务器可以维护这些`RemoteListener`s 的集合，并且无论何时应通知客户端某些事件，它都可以调用`remoteAction(ActionEvent e)`您想要创建的任何内容。如果不了解您的问题域的更多信息，很难具体说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:24:58.360

客户端不仅可以与服务器对话，还可以直接相互对话。

在客户端上注册客户端，从少数“主客户端”开始构建类似树状结构的东西，并且只有这些客户端向服务器注册。它们可以将消息级联到其他子客户端，因此可能支持大量客户端，而只有少数直接在服务器上注册。

不幸的是，使用这种方法必须允许客户端正确关闭，以便他们可以将当前拥有的子客户端的职责分配给其他节点，或返回服务器。他们不能简单地被杀死，因为整个树枝都会被切断。也许如果客户端感觉与主服务器不再连接，它应该向服务器请求并获取另一个。

另请参阅可以完成的[文档](http://docs.oracle.com/javase/tutorial/rmi/implementing.html)。

也不要调用`exportObject(Remote obj)`，因为使用它需要有一个存根类（它返回该类的一个实例，`RemoteStub`）。使用`exportObject(Remote obj, int port)`返回接口。也盖[在这里](http://www.stratos.me/2008/05/stub-class-not-found/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T12:53:33.120

这可以使用 RMI 回调来实现。很多细节和源代码可在[http://docs.oracle.com/cd/E13211_01/wle/rmi/callbak.htm#1023775 获得](http://docs.oracle.com/cd/E13211_01/wle/rmi/callbak.htm#1023775)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T13:18:04.910

**回答第一部分）**

要使用纯 RMI 执行此操作，客户端必须充当 RMI 服务器以用于回调 - 根本无法摆脱这一点，这就是 RMI 协议的工作方式。

如果您不希望每个客户端都以这种方式运行，那么您将需要在网络堆栈中降低一个级别并实现您自己的套接字协议来代替 RMI。当服务器接收到注册消息时，它需要保持客户端建立的套接字连接，根据需要通过该套接字将数据推送回客户端。

**回答第二部分（在对问题进行编辑之后））**

在使用时导出客户端时，您需要预先生成一个存根，[`UnicastRemoteObject.exportObject(Remote)`](http://docs.oracle.com/javase/6/docs/api/java/rmi/server/UnicastRemoteObject.html#exportObject%28java.rmi.Remote%29)如 JDK 源中的以下注释所示：

*使用 UnicastServerRef 构造函数传递布尔值 true 以指示应仅使用生成的存根类。必须使用生成的存根类而不是动态代理，因为此方法的返回值是动态代理类无法扩展的 RemoteStub。*

因此`java.lang.ClassNotFoundException`.

好吧，要么那个要么打电话[`UnicastRemoteObject.exportObject(Remote, int)`](http://docs.oracle.com/javase/6/docs/api/java/rmi/server/UnicastRemoteObject.html#exportObject%28java.rmi.Remote,%20int%29)。

您还需要通过调用指定服务名称来将存根*绑定*[`Registry.bind(String, Remote)`](http://docs.oracle.com/javase/6/docs/api/java/rmi/registry/Registry.html#bind%28java.lang.String,%20java.rmi.Remote%29)到注册表。

这实际上是将客户端作为 RMI 服务器运行 - 正如我在回答“答案第一部分”中所说，这是使用 RMI 时可以工作的唯一方法 - RMI 在那里进行远程方法调用，仅此而已。

# php - 从电子邮件自动提交

> ID：14439290
> 
> 赞同：0
> 
> 时间：2013-01-21T13:03:49.257
> 
> 标签：php, forms, email, submit, reply

我不知道是否有更简单的方法可以做到这一点，我从 php 开始，我正在尝试添加一个指向电子邮件信函的链接，以便一旦按下链接，它就会打开一个网页并自动向我的仅包含添加到链接的参考号的电子邮件地址。

我尝试了几种使用 php 的方法，但只能收到一封空白电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:12:17.810

在链接中使用 id（标识符）。稍后使用 id 来跟踪谁打开了链接。

发送电子邮件时添加参数到链接（“？referer = xyx23”）并将推荐人保存在数据库中。当用户打开链接时，您可以使用数据库跟踪引用者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:40:50.890

您需要添加具有唯一获取参数的链接，例如：http: //your-site.com?sendemail= [9adb879856464](http://your-site.com?sendemail=9adb879856464)。此参数保存在数据库中。如果用户使用来自服务器的电子邮件链接进入站点，则运行脚本，此脚本会检查链接是否有效。如果链接有效，则检查是数据库中的链接。如果此链接在数据库中，则使用 php mail-function 发送邮件。如果您希望用户使用一次链接，请删除数据库中的链接。

# f# - F# Async.RunSynchronously 与 timeout 和 cancelToken

> ID：14439292
> 
> 赞同：5
> 
> 时间：2013-01-21T13:04:00.627
> 
> 标签：f#, cancellation-token, async-workflow

当使用超时和 CancellationToken 调用 Async.RunSynchronously 时，超时值似乎被忽略了。我可以通过在 CancellationToken 上调用 CancelAfter 来解决此问题，但理想情况下，我希望能够区分工作流中发生的异常 TimeOutExceptions 和 OperationCanceledExceptions。

我相信下面的示例代码证明了这一点。

```
open System
open System.Threading

let work = 
    async {
        let endTime = DateTime.UtcNow.AddMilliseconds(100.0)
        while DateTime.UtcNow < endTime do
            do! Async.Sleep(10)
            Console.WriteLine "working..."
        raise ( Exception "worked for more than 100 millis" )
    }

[<EntryPoint>]
let main argv = 
    try
        Async.RunSynchronously(work, 50)
    with
        | e -> Console.WriteLine (e.GetType().Name + ": " + e.Message)

    let cts = new CancellationTokenSource()

    try
        Async.RunSynchronously(work, 50, cts.Token)
    with
        | e -> Console.WriteLine (e.GetType().Name + ": " + e.Message)  

    cts.CancelAfter(80)
    try
        Async.RunSynchronously(work, 50, cts.Token)
    with
        | e -> Console.WriteLine (e.GetType().Name + ": " + e.Message)  

    Console.ReadKey(true) |> ignore

    0 
```

输出如下，表明超时仅在第一种情况下有效（未指定 CancelationToken）

```
working...
working...
TimeoutException: The operation has timed out.
working...
working...
working...
working...
working...
working...
working...
Exception: worked for more than 100 millis
working...
working...
working...
working...
working...
working...
OperationCanceledException: The operation was canceled. 
```

这是预期的行为吗？有没有办法得到我所追求的行为？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T13:27:43.157

我不确定这是否是预期的行为 - 至少，我看不出有任何理由。但是，这种行为是在处理 的参数时直接实现的`RunSynchronously`。如果您查看[库源代码](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/control.fs#L1333)，您可以看到：

```
static member RunSynchronously (p:Async<'T>,?timeout,?cancellationToken) =
  let timeout,token =
    match cancellationToken with
    | None -> timeout,(!defaultCancellationTokenSource).Token                
    | Some token when not token.CanBeCanceled -> timeout, token                
    | Some token -> None, token 
```

在您的情况下（使用超时和可以取消的取消令牌），代码将通过最后一个分支并忽略超时。我认为这要么是一个错误，要么是应该在文档中提到的东西。

作为一种解决方法，您可以创建一个单独`CancellationTokenSource`的来指定超时并将其链接到主取消源，以便调用者提供（使用`CreateLinkedTokenSource`）。当您得到 时`OperationCancelledException`，您可以检测源是实际取消还是超时：

```
type Microsoft.FSharp.Control.Async with
  static member RunSynchronouslyEx(a:Async<'T>, timeout:int, cancellationToken) =
    // Create cancellation token that is cancelled after 'timeout'
    let timeoutCts = new CancellationTokenSource()
    timeoutCts.CancelAfter(timeout)

    // Create a combined token that is cancelled either when 
    // 'cancellationToken' is cancelled, or after a timeout
    let combinedCts = 
      CancellationTokenSource.CreateLinkedTokenSource
        (cancellationToken, timeoutCts.Token)

    // Run synchronously with the combined token
    try Async.RunSynchronously(a, cancellationToken = combinedCts.Token)
    with :? OperationCanceledException as e ->
      // If the timeout occurred, then we throw timeout exception instead
      if timeoutCts.IsCancellationRequested then
        raise (new System.TimeoutException())
      else reraise() 
```

# jsf - 如何在 Icefaces 中覆盖 xp.css？

> ID：14439294
> 
> 赞同：1
> 
> 时间：2013-01-21T13:04:16.003
> 
> 标签：jsf, jsf-2, icefaces, icefaces-3

我在我的 Web 应用程序中使用[Icefaces 。](http://www.icesoft.org/java/projects/ICEfaces/)我想覆盖一些在`xp.css`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:07:13.880

1.  创建您自己的 css 文件，例如。样式.css。
2.  将它放入您的网页目录中，在 WEB-INF 目录旁边。
3.  在 xhtml 文件的 head 标记中引用您的 css 文件

您可以通过以下方式引用它：

```
 <link href="style.css" rel="stylesheet" type="text/css" /> 
```

# oracle-adf - 需要帮助来修复 ADF 中的 selectonechoice 错误

> ID：14439295
> 
> 赞同：3
> 
> 时间：2013-01-21T13:04:22.350
> 
> 标签：oracle-adf, jdeveloper

我有一个具有三个值的 selectonechoice：A、B、C，但我在其更改事件中收到以下错误：

```
<SimpleSelectOneRenderer> <_getSelectedIndex> Could not find selected item matching value "B" in RichSelectOneChoice[UIXEditableFacesBeanImpl, id=soc1] 
```

我的 selectonechoice 配置为：

```
<af:selectOneChoice label="Condition Codes :" id="soc1"
                        valueChangeListener="#{myManageBean.onCondCodeChg}"
                        binding="#{myManageBean.propConditionCode}"
                        autoSubmit="true" valuePassThru="true"
                        unselectedLabel="Please Select"">
    <f:selectItems value="#{myManageBean.conditionCodes}" id="si1"/>
</af:selectOneChoice> 
```

请帮忙！！！！我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-10T06:58:38.213

问题是，即使在设置了值之后，它也会以某种方式被空值覆盖。

`component.resetValue()`对我来说，在调用 setter 并设置值后，通过在相应的 bean 中使用解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:14:28.653

使用下面的代码解决您的问题

```
<f:selectItems value="#{myManageBean.conditionCodes}" id="si1"/> 
```

# jasper-reports - Jasper 报告导出崩溃

> ID：14439299
> 
> 赞同：2
> 
> 时间：2013-01-21T13:04:51.113
> 
> 标签：jasper-reports, jasperserver, crosstab

我有一个输出 75 页的交叉表报告。当我导出到 Excel 时，2-3 分钟后，它崩溃并显示“查找 FlowDefinition 需要一个 id”。

查询的输出包含少于 100,000 行，并且查询本身需要 25 秒来执行。（来自 Naivcat）在此之后，jasper 服务器需要更多时间来填充报告。但是导出不起作用。

仅供参考 - 我已将交叉表限制从默认的 100000 更改为 1000000。

```
#limit the crosstab bucket/measure count to prevent out of memory errors
net.sf.jasperreports.crosstab.bucket.measure.limit=10000000

#suppress page and column footers and all but the first page and column headers when     exporting to XLS
net.sf.jasperreports.export.xls.exclude.origin.keep.first.band.1=pageHeader
net.sf.jasperreports.export.xls.exclude.origin.band.2=pageFooter
net.sf.jasperreports.export.xls.exclude.origin.keep.first.band.3=columnHeader
net.sf.jasperreports.export.xls.exclude.origin.band.4=columnFooter

# report exporter hints override export parameters
net.sf.jasperreports.export.parameters.override.report.hints=false 
```

谢谢拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:55:01.740

这可能是浏览器依赖性，我遇到了同样的问题，然后我在 Google Chrome 中运行了报告，现在我的报告正在运行。

因此，我建议您使用 Chrome 或您使用的任何其他浏览器进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:40:30.637

删除总页数，只显示“第 1 页”而不是“第 1 页，共 75 页”——这应该会显着改进报告生成，因为 JR 不需要重新评估每个页面来添加总页数。

# android - 编译我的钛 android 模块时 build\generated\libs 不存在

> ID：14439303
> 
> 赞同：0
> 
> 时间：2013-01-21T13:04:56.043
> 
> 标签：android, ant, module

我正在尝试用 ant 编译我的钛 android 模块，但错误就像 build\generated\libs 不存在，如果我手动创建它编译但效果不佳，我在这个论坛中发现只有这个过程不正确，所以请任何人帮助我。

```
C:\Users\ensis\Documents\Titaniumstudioworkspace\sip6>ant
Buildfile: C:\Users\ensis\Documents\Titaniumstudioworkspace\sip6\build.xml

init:

process.annotations:

generate.rhino.bindings:
     [java] Generating C:\Users\ensis\Documents\Titaniumstudioworkspace\sip6\bui
ld\generated\java\com\yydigital\sipclient\SipclientProxyPrototype.java
     [java] Generating C:\Users\ensis\Documents\Titaniumstudioworkspace\sip6\bui
ld\generated\java\com\yydigital\sipclient\SipclientModulePrototype.java
     [java] Generating C:\Users\ensis\Documents\Titaniumstudioworkspace\sip6\bui
ld\generated\java\sip6GeneratedBindings.java

generate.rhino.idswitch:
     [echo] Generating IDs for C:\Users\ensis\Documents\Titaniumstudioworkspace\
sip6\build\generated\java\com\yydigital\sipclient\SipclientBootstrap.java
     [echo] Generating IDs for C:\Users\ensis\Documents\Titaniumstudioworkspace\
sip6\build\generated\java\com\yydigital\sipclient\SipclientModulePrototype.java
     [echo] Generating IDs for C:\Users\ensis\Documents\Titaniumstudioworkspace\
sip6\build\generated\java\com\yydigital\sipclient\SipclientProxyPrototype.java
     [echo] Generating IDs for C:\Users\ensis\Documents\Titaniumstudioworkspace\
sip6\build\generated\java\sip6GeneratedBindings.java

generate.v8.bindings:
     [java] Generating C:\Users\ensis\Documents\Titaniumstudioworkspace\sip6\bui
ld\generated\jni\com.yydigital.sipclient.SipclientProxy.h
     [java] Generating C:\Users\ensis\Documents\Titaniumstudioworkspace\sip6\bui
ld\generated\jni\com.yydigital.sipclient.SipclientProxy.cpp
     [java] Generating C:\Users\ensis\Documents\Titaniumstudioworkspace\sip6\bui
ld\generated\jni\com.yydigital.sipclient.SipclientModule.h
     [java] Generating C:\Users\ensis\Documents\Titaniumstudioworkspace\sip6\bui
ld\generated\jni\com.yydigital.sipclient.SipclientModule.cpp
     [exec] Traceback (most recent call last):
     [exec]   File "C:\Users\ensis\AppData\Roaming\Titanium\mobilesdk\win32\2.1.
4.GA\module\android\bootstrap.py", line 395, in <module>
     [exec]     main()
     [exec]   File "C:\Users\ensis\AppData\Roaming\Titanium\mobilesdk\win32\2.1.
4.GA\module\android\bootstrap.py", line 363, in main
     [exec]     from manifest import Manifest
     [exec]   File "C:\Users\ensis\AppData\Roaming\Titanium\mobilesdk\win32\2.1.
4.GA\manifest.py", line 4, in <module>
     [exec]     from StringIO import StringIO
     [exec] ImportError: No module named 'StringIO'

generate.bindings:

pre.compile:
     [exec]   File "C:\Users\ensis\AppData\Roaming\Titanium\mobilesdk\win32\2.1.
4.GA\module\android\android.py", line 25
     [exec]     print "[ERROR] Couldn't find the Android API r%s platform direct
ory" % androidsdk.DEFAULT_API_LEVEL
     [exec]
   ^
     [exec] SyntaxError: invalid syntax

js.compile:

ndk.build:
    [mkdir] Created dir: C:\Users\ensis\AppData\Local\Temp\ensis\sip6-generated
     [copy] Copying 15 files to C:\Users\ensis\AppData\Local\Temp\ensis\sip6-gen
erated
     [exec] jni/Android.mk:24: warning: overriding commands for target `C:/Users
/ensis/AppData/Local/Temp/ensis/sip6-generated/KrollGeneratedBindings.cpp'
     [exec] jni/Android.mk:24: warning: ignoring old commands for target `C:/Use
rs/ensis/AppData/Local/Temp/ensis/sip6-generated/KrollGeneratedBindings.cpp'
     [exec] jni/Android.mk:27: warning: overriding commands for target `C:/Users
/ensis/AppData/Local/Temp/ensis/sip6-generated/BootstrapJS.cpp'
     [exec] jni/Android.mk:27: warning: ignoring old commands for target `C:/Use
rs/ensis/AppData/Local/Temp/ensis/sip6-generated/BootstrapJS.cpp'
     [exec] jni/Android.mk:24: warning: overriding commands for target `C:/Users
/ensis/AppData/Local/Temp/ensis/sip6-generated/KrollGeneratedBindings.cpp'
     [exec] jni/Android.mk:24: warning: ignoring old commands for target `C:/Use
rs/ensis/AppData/Local/Temp/ensis/sip6-generated/KrollGeneratedBindings.cpp'
     [exec] jni/Android.mk:27: warning: overriding commands for target `C:/Users
/ensis/AppData/Local/Temp/ensis/sip6-generated/BootstrapJS.cpp'
     [exec] jni/Android.mk:27: warning: ignoring old commands for target `C:/Use
rs/ensis/AppData/Local/Temp/ensis/sip6-generated/BootstrapJS.cpp'
     [exec] "Compile++ thumb : com.yydigital.sipclient <= com.yydigital.sipclien
t.SipclientModule.cpp
     [exec] In file included from jni/com.yydigital.sipclient.SipclientModule.cp
p:23:
     [exec] jni/com.yydigital.sipclient.SipclientProxy.h:36: error: expected unq
ualified-id before 'const'
     [exec] jni/com.yydigital.sipclient.SipclientProxy.h:36: error: expected ')'
 before 'const'
     [exec] make: *** [C:\Users\ensis\AppData\Local\Temp\/ensis/sip6-generated/o
bj/local/armeabi/objs/com.yydigital.sipclient/com.yydigital.sipclient.SipclientM
odule.o] Error 1
     [move] Moving 15 files to C:\Users\ensis\Documents\Titaniumstudioworkspace\
sip6\build\generated

BUILD FAILED
C:\Users\ensis\AppData\Roaming\Titanium\mobilesdk\win32\2.1.4.GA\module\android\
build.xml:364: C:\Users\ensis\Documents\Titaniumstudioworkspace\sip6\build\gener
ated\libs does not exist. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T18:45:44.297

在 C:\Users\ensis\Documents\Titaniumstudioworkspace\sip6\build\gener ated\ refresh 项目中创建文件夹库并运行 ant。

（英语不好：D）

萨卢多斯。

# dart - DART：画布：跨浏览器 setLineDash (Firefox 18.0.1)

> ID：14439307
> 
> 赞同：1
> 
> 时间：2013-01-21T13:05:04.560
> 
> 标签：dart

`context.setLineDash()`在 Chrome 中工作，但在 FireFox 18.0.1 中会导致

> 类型错误：this.setLineDash 不是函数

在*bootstrap.dart.js*文件的深处。

即使我使用这个功能

```
void setLineDashCatch(var ctx,var param) {
  try {
    ctx.setLineDash(param);
  } on Exception catch (e) {
    log('SetLineDash exception');
  }
} 
```

异常没有被捕获，方法被中止。

避免方法被中止的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:22:15.583

您没有得到日志，因为它不是`Exception`被抛出的。它是一个`NoSuchMethodError`. 以下代码应该可以工作：

```
void setLineDashCatch(var ctx,var param) {
  try {
    ctx.setLineDash(param);
  } on NoSuchMethodError catch (e) {
    print('SetLineDash exception');
  }
} 
```

# c# - 如何使用 C# 获取数字签名的 Outlook .msg 文件的正文文本

> ID：14439309
> 
> 赞同：0
> 
> 时间：2013-01-21T13:05:09.330
> 
> 标签：c#, outlook

我们有一个要求，例如将文档显示为预览窗格。因此，为了显示 Outlook .msg 文件的正文，我使用以下链接从 Codeproject 文章中获取了代码 Read [an Outlook MSG File in C#](http://www.codeproject.com/Articles/32899/Reading-an-Outlook-MSG-File-in-C?PageFlow=Fluid)

使用链接中的上述代码，我可以显示 .msg 文件的正文。但是，如果 .msg 文件经过数字签名，则 .msg 文件的 BodyText（纯文本和 Rtf 类型文本）为空。

1）如何查找 .msg 文件是否已签名的天气？

2) 如何让签名的 .msg 文件正文显示在任何控件中？

请在这方面帮助我，我是这种类型的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:50:51.773

您将需要查看消息类以确定项目类型。
如果您没有使用 Outlook 对象模型来读取加密/签名的邮件（OOM 总是解密邮件并将它们表示为常规 MailItem 对象），您可以解密包含实际数据的 p7m 文件（如果您可以在[OutlookSpy](http://www.dimastr.com/outspy)中看到它，如果您单击 OpenIMsgOnIStg）或者您可以使用 Redemption 及其[RDOEncryptedMessage](http://www.dimastr.com/redemption/rdoencryptedmessage.htm)对象（调用 RDOEncryptedMessage.GetDecryptedMessage）。
要打开 MSG 文件，请使用[RDOSession](http://www.dimastr.com/redemption/rdosession.htm) .GetMessageFromMsgFile。

# matlab - matlab中的阿拉伯语短信

> ID：14439313
> 
> 赞同：8
> 
> 时间：2013-01-21T13:05:23.627
> 
> 标签：matlab, character-encoding, dialog, arabic

当我使用阿拉伯语文本显示任何消息对话（如警告对话或帮助对话）作为消息时，它没有以正确的方式显示。

**例子**：

* * *

英语：

```
helpdlg('Hello World !!'); 
```

![你好世界消息](../Images/adeaa868e302729cbfae5569de99b079.png)

* * *

阿拉伯：

```
helpdlg('أهلا أيها العالم'); 
```

![阿兰留言](../Images/2a04cf46342875d306a3ce3072276691.png)

* * *

我的想法是它的字符编码问题，我真的不确定！

我尝试使用不同的字体，例如：

```
text(0.6,0.5,'أهلا و سهلا','fontname','david','rotation',180,'fontsize',50,'color','r');
text(0.6,0.5,'أهلا و سهلا','fontname','arial','rotation',180,'fontsize',50,'color','r');
text(0.6,0.5,'أهلا و سهلا','fontname','Arabic Typesetting','rotation',0,'fontsize',50,'color','r');
text(0.6,0.5,'أهلا و سهلا','fontname','Courier','rotation',0,'fontsize',50,'color','r'); 
```

而问题仍然没有解决。

**问题是，** Matlab 对话消息如何以**阿拉伯语**出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:30:33.757

解决方案是将**机器本地数字和格式更改为阿拉伯语**[[指南]](http://support.microsoft.com/kb/307938)

然后重新启动 Matlab，GUI、命令窗口、工作区等将支持阿拉伯语。

只有对话仍然不支持阿拉伯语。

![在此处输入图像描述](../Images/42a5a21d227df2bc81e06f64096f634b.png)

# java - 如何在阿拉伯语语言环境中以简单日期格式解析日期？

> ID：14439315
> 
> 赞同：7
> 
> 时间：2013-01-21T13:05:37.130
> 
> 标签：java, android, localization

我有来自服务器的日期，格式为 =“2013-01-20T16:48:43”我的应用程序支持阿拉伯语和英语语言环境。但是当我将语言环境更改为阿拉伯语时，日期没有解析它给我解析异常。到现在为止我写的是

```
private static Date parseJsonDate(final String string) throws Exception
    {
    final String change_Locale = Locale.getDefault().getISO3Language();
            if (change_Locale.equalsIgnoreCase("ara"))
            {

                System.out.println(":: Date :::" + string);
                final SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss", new Locale("ar"));

                System.out.println("new date " + format.parse(string));
                return format.parse(string); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T13:11:00.607

不要将您的日期解析为阿拉伯语，它会一直给您错误，除了通过仅设置语言环境英语进行如下尝试。

```
final SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss", Locale.ENGLISH); 
```

# api - 获取所有股票代码（指数）股票市场

> ID：14439317
> 
> 赞同：1
> 
> 时间：2013-01-21T12:16:38.010
> 
> 标签：api, yahoo, c#

我对 Yahoo Finance API 没有太多经验。我需要使用这个 API 从雅虎获取所有股票市场的股票代码。有人可以帮我实现这个目的吗？

我认为这可以通过从雅虎下载股票数据来实现。

我已经尝试进入 http://code.google.com/p/yahoo-finance-managed/[^] 上的示例代码，但没有运气。

我很感激任何一点帮助。

到目前为止，我已经尝试过：

```
TextWriter tw = File.CreateText("StockData.csv");
            AlphabeticIDIndexDownload dl1 = new AlphabeticIDIndexDownload();
            dl1.Settings.TopIndex = null;                      
            Response<AlphabeticIDIndexResult> resp1 = dl1.Download();

            tw.WriteLine("Id|Isin|Name|Exchange|Type|Industry");
            Console.WriteLine("Id|Isin|Name|Exchange|Type|Industry");
            foreach (var alphabeticalIndex in resp1.Result.Items)
            {
                AlphabeticalTopIndex topIndex = (AlphabeticalTopIndex)alphabeticalIndex;
                dl1.Settings.TopIndex = topIndex;
                Response<AlphabeticIDIndexResult> resp2 = dl1.Download();
                foreach (var index in resp2.Result.Items)
                {
                    IDSearchDownload dl2 = new IDSearchDownload();
                    Response<IDSearchResult> resp3 = dl2.Download(index);                   
                    foreach (var item in resp3.Result.Items)
                    {
                        tw.WriteLine(item.ID + "|" + item.ISIN + "|" + item.Name + "|" + item.Exchange + "|" + item.Type + "|" + item.Industry);
                        Console.WriteLine(item.ID + "|" + item.ISIN + "|" + item.Name + "|" + item.Exchange + "|" + item.Type + "|" + item.Industry + "Exchange: " + item.Exchange);
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:48:18.137

我不知道 C# 但如果你能得到以下 URL 的结果

```
http://download.finance.yahoo.com/d/quotes.csv?s=AAPL+MSFT&f=nxl1c1p2poabt8mwva2j1re7yhgs 
```

例如

```
 using System.Net;  
   HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
   HttpWebResponse response = (HttpWebResponse)request.GetResponse();
   Stream resStream = response.GetResponseStream(); 
```

您将获得生成的 CSV，其中每个请求的符号有两行 - 在本示例中为 MSFT 和 AAPL：

```
Apple Inc.,NasdaqNM,432.8399,-8.5601,-1.94%,441.4,438,432.84,432.75,630.24,432.45 - 438.1799,435.00 - 705.07,6073652,20595200,406.5B,10.01,44.7,1.8,438.1799,432.45,AAPL
Microsoft Corpora,NasdaqNM,27.59,-0.21,-0.76%,27.8,27.69,27.6,27.59,33.11,27.52 - 27.76,26.26 - 32.95,7088381,47882500,231.1B,15.27,2.85,3.09,27.76,27.52,MSFT 
```

&f=... 是您想要的响应格式，在此示例中包括以下内容：

```
 company: 'n',
  exchange: 'x',
  last: 'l1',
  change: 'c1',
  percent_change: 'p2',
  prev_close: 'p',
  open: 'o',
  bid: 'a',
  ask: 'b',
  one_year_target: 't8',
  day_range: 'm',
  fifty_two_week_range: 'w',
  volume: 'v',
  average_daily_volume: 'a2',
  market_cap: 'j1',
  p_e_ratio: 'r',
  eps: 'e7',
  div_yield: 'y',
  day_high: 'h',
  day_low: 'g',
  symbol: 's' 
```

在此处查看完整列表 [http://www.gummy-stuff.org/Yahoo-data.htm](http://www.gummy-stuff.org/Yahoo-data.htm)

现在只需解析 CSV，例如[https://stackoverflow.com/a/2081430/514463](https://stackoverflow.com/a/2081430/514463)

# wpf - 将 1000 个用户控件绑定到列表框很慢 wpf

> ID：14439321
> 
> 赞同：0
> 
> 时间：2013-01-21T13:06:06.093
> 
> 标签：wpf

我有一个列表框，我将大约 1000 个用户控件与 itemspaneltemplate 作为网格绑定到该列表框，并且我通过指定工作正常的行和列来放置每个用户控件。但问题是加载需要太多时间我什至使用了后台工作进程但也没有用。请帮助我解决上述问题的方法是什么。

```
 <ListBox VerticalAlignment="Top" ItemsSource="{Binding Session.LstPlannedLightChkEntity,ElementName=uc, IsAsync=True}"  Grid.Row="0" 
                               VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Recycling"
                              local:DragDropHelper.IsDragSource="true" local:DragDropHelper.IsDropTarget="true" 
                              local:DragDropHelper.DragDropTemplate="{StaticResource planetTemplateDrag}"  
                              ScrollViewer.VerticalScrollBarVisibility="Hidden" ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
                              ScrollViewer.CanContentScroll="True"  
                            >
  <ListBox.ItemContainerStyle>
    <Style TargetType="ListBoxItem">
      <Setter Property="Grid.Row" Value="{Binding Row}"/>
      <Setter Property="Grid.Column" Value="{Binding Column}"/>
      <Setter Property="Grid.ColumnSpan" Value="{Binding ColumnSpan}" />
    <Style.Resources>
    <!-- Background of selected item when focussed -->
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
    <!-- Background of selected item when not focussed -->
    <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent" />
      </Style.Resources>
    </Style>
  </ListBox.ItemContainerStyle>
  <ListBox.ItemsPanel>
    <ItemsPanelTemplate>
      <local:GridControl x:Name="gcMenuPlanned" VerticalAlignment="Stretch"  Margin="-1,-1,0,0"
         ShowCustomGridLines="True" GridLineBrush="#FFE4E7EB" GridLineThickness="0.5" SnapsToDevicePixels="True">
        <local:GridControl.ContextMenu>
        <ContextMenu >
          <MenuItem Foreground="Black"  Header="Add Task" Click="AddTask_Click" Tag="{Binding CheckType}"  />
          <MenuItem Foreground="Black"  Header="Goto..."  Click="miGoto_Click" Tag="{Binding CheckType}"  />
        </ContextMenu>
      </local:GridControl.ContextMenu>
    </local:GridControl>
  </ItemsPanelTemplate>
</ListBox.ItemsPanel>
<ListBox.ItemTemplate>
  <DataTemplate>
    <local:LightFCCheckBlockControl  CheckColor="#FFA2CAEB" MouseLeftButtonDown="LightFCCheckBlockControl_MouseLeftButtonDown">
      <local:LightFCCheckBlockControl.ContextMenu>
        <ContextMenu >
          <MenuItem Foreground="Black"  Header="Edit" Click="miEdit_Click" Tag="{Binding CheckType}" Visibility="{Binding Path=OpacityForCCheck,Converter={StaticResource opacityToVisibility}}"/>
          <MenuItem Foreground="Black" Style="{StaticResource MenuItemBindingStyle }"  Click="miFreeze_Click" Tag="{Binding CheckType}" Visibility="{Binding Path=OpacityForCCheck,Converter={StaticResource opacityToVisibility}}">
          </MenuItem>
          <MenuItem Foreground="Black" Click="RemoveChecks_Click"  Header="Remove Checks" Tag="{Binding CheckType}"/>
          <MenuItem Foreground="Black" Click="DeleteChecks_Click"  Header="Delete Checks" Tag="{Binding CheckType}" Visibility="{Binding Path=OpacityForCCheck,Converter={StaticResource opacityToVisibility}}"/>
          <MenuItem Foreground="Black"  Header="Goto..."  Click="miGoto_Click" Tag="{Binding CheckType}" Visibility="{Binding Path=OpacityForCCheck,Converter={StaticResource opacityToVisibility}}"/>
        </ContextMenu>
      </local:LightFCCheckBlockControl.ContextMenu>
    </local:LightFCCheckBlockControl>
  </DataTemplate>
</ListBox.ItemTemplate>
</ListBox> 
```

谢谢Yogaraj我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:11:22.097

嗯，听起来有点奇怪。首先，你应该回答这个问题......真的有必要将1000个项目绑定到一个列表中，它应该在UI中显示吗？可用性不会是最好的。也许您可以选择延迟加载的方法。

其次，您是否禁用`Virtualization`了`ListBox`? 通常，只渲染元素的视觉效果，这些视觉效果是可见的。在滚动的情况下，控件将被重用。

# javascript - 来自一个外部 IP 地址的 WebSocket 客户端

> ID：14439326
> 
> 赞同：1
> 
> 时间：2013-01-21T13:06:22.870
> 
> 标签：javascript, tomcat, networking, websocket, local

我通过 WebSockets 写了一个聊天。服务器端用 Java (Tomcat) 编写，客户端用 JavaScript 编写。

一切正常。但是当我尝试从本地网络中的两台机器（它们在路由器下；有一个外部 ip）连接到服务器时，只有一个客户端从服务器接收数据。

连接（ socket.onopen() ）适用于两者。socket.send(data) 也适用于两个客户端；

但是接收消息（ socket.onmessage() ）仅适用于第一个连接的客户端。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:01:14.673

问题出在服务器部分。

我想将传入消息广播到 ArrayList 中的所有可用连接。

向第一个用户发送消息后，收到的消息被清空。因此，消息已发送，但它只是空字符串。

我的英语不好。所以我会的：

前 ：

```
 protected void onTextMessage(CharBuffer message) throws IOException {
  // List<MessageInbound> connections
  for (MessageInbound user : connections ) 
   user.getWsOutbound.writeTextMessage(message);
 } 
```

后：

```
 protected void onTextMessage(CharBuffer message) throws IOException {
  String msg = message.toString();
  for (MessageInbound user : connections ) 
   user.getWsOutbound.writeTextMessage(CharBuffer.wrap(msg));
 } 
```

# html - html cgi printf("内容类型: text/html\n\n"); 为什么一定要写\n\n？

> ID：14439328
> 
> 赞同：0
> 
> 时间：2013-01-21T13:06:37.677
> 
> 标签：html, cgi, special-characters, printf

我今天有一个简单的问题： cgi 程序中的**double** 到底是做什么的：`\n``printf("Content-type: text/html\n\n");`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:09:46.083

一个空行将 HTTP 响应标头与 HTTP 响应正文分开。

没有一个，就无法知道正文的第一行是正文还是另一个标题。

HTTP虽然`\r\n`不使用`\n`。我建议使用库来抽象 CGI 的细节，而不是手动进行。

# objective-c - 如何在方法 IMP 之间传递 va_list？（目标 c）

> ID：14439330
> 
> 赞同：2
> 
> 时间：2013-01-21T13:06:40.113
> 
> 标签：objective-c, reflection, variadic-functions, swizzling

我正在尝试调配一个函数并使用函数 args 调用原始实现。新 IMP 的形式为：

```
static id WrapperFunction(id self, SEL _cmd, ...) {
     va_list args;
     va_start(args, _cmd);

     originalImp(self, _cmd, args);
     ...
} 
```

这显然是错误的，因为`args`现在包含 _cmd 而`...`没有。

我怎样才能传递`...`给 originalImp？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T17:58:17.970

Gcc 有： http: [//gcc.gnu.org/onlinedocs/gcc/Constructing-Calls.html](http://gcc.gnu.org/onlinedocs/gcc/Constructing-Calls.html)

clang 什么都没有，你必须做汇编才能做到这一点（基本上如果你知道 originalImp 的地址，你只想“jmp”到它）。

# c# - 当前上下文中不存在文本框

> ID：14439331
> 
> 赞同：0
> 
> 时间：2013-01-21T13:06:41.047
> 
> 标签：c#, asp.net, webforms

代码中的问题

2 个文件：Register.aspx Register.aspx.cs

注册.aspx：

```
 <%@ Page Title="Register" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Register.aspx.cs" Inherits="HSE_Monitoring_Application.Account.Register" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:CreateUserWizard ID="RegisterUser" runat="server" EnableViewState="false" OnCreatedUser="RegisterUser_CreatedUser">
        <LayoutTemplate>
            <asp:PlaceHolder ID="wizardStepPlaceholder" runat="server"></asp:PlaceHolder>
            <asp:PlaceHolder ID="navigationPlaceholder" runat="server"></asp:PlaceHolder>
        </LayoutTemplate>
        <WizardSteps>
            <asp:CreateUserWizardStep ID="RegisterUserWizardStep" runat="server">
                <ContentTemplate>
                    <h2>
                        Create a New Account
                    </h2>
                    <p>
                        Use the form below to create a new account.
                    </p>
                    <p>
                        Passwords are required to be a minimum of <%= Membership.MinRequiredPasswordLength %> characters in length.
                    </p>
                    <span class="failureNotification">
                        <asp:Literal ID="ErrorMessage" runat="server"></asp:Literal>
                    </span>
                    <asp:ValidationSummary ID="RegisterUserValidationSummary" runat="server" CssClass="failureNotification" 
                         ValidationGroup="RegisterUserValidationGroup"/>
                    <div class="accountInfo">
                        <fieldset class="register">
                            <legend>Account Information</legend>
                            <p>
                                <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">User Name:</asp:Label>
                                <asp:TextBox ID="UserName" runat="server" CssClass="textEntry"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" ControlToValidate="UserName" 
                                     CssClass="failureNotification" ErrorMessage="User Name is required." ToolTip="User Name is required." 
                                     ValidationGroup="RegisterUserValidationGroup">*</asp:RequiredFieldValidator>
                            </p>
                            <p>
                                <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password">Password:</asp:Label>
                                <asp:TextBox ID="Password" runat="server" CssClass="passwordEntry" TextMode="Password"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" ControlToValidate="Password" 
                                     CssClass="failureNotification" ErrorMessage="Password is required." ToolTip="Password is required." 
                                     ValidationGroup="RegisterUserValidationGroup">*</asp:RequiredFieldValidator>
                            </p>
                            <p>
                                <asp:Label ID="ConfirmPasswordLabel" runat="server" AssociatedControlID="ConfirmPassword">Confirm Password:</asp:Label>
                                <asp:TextBox ID="ConfirmPassword" runat="server" CssClass="passwordEntry" TextMode="Password"></asp:TextBox>
                                <asp:RequiredFieldValidator ControlToValidate="ConfirmPassword" CssClass="failureNotification" Display="Dynamic" 
                                     ErrorMessage="Confirm Password is required." ID="ConfirmPasswordRequired" runat="server" 
                                     ToolTip="Confirm Password is required." ValidationGroup="RegisterUserValidationGroup">*</asp:RequiredFieldValidator>
                                <asp:CompareValidator ID="PasswordCompare" runat="server" ControlToCompare="Password" ControlToValidate="ConfirmPassword" 
                                     CssClass="failureNotification" Display="Dynamic" ErrorMessage="The Password and Confirmation Password must match."
                                     ValidationGroup="RegisterUserValidationGroup">*</asp:CompareValidator>
                            </p>
                        </fieldset>
                        <p class="submitButton">
                            <asp:Button ID="CreateUserButton" runat="server" CommandName="MoveNext" Text="Create User" 
                                 ValidationGroup="RegisterUserValidationGroup" OnClick="onSubmitNewUser"/>
                        </p>
                    </div>
                </ContentTemplate>
                <CustomNavigationTemplate>
                </CustomNavigationTemplate>
            </asp:CreateUserWizardStep>
        </WizardSteps>
    </asp:CreateUserWizard>
</asp:Content> 
```

问题：无法从 Register.aspx.cs 类中看到文本框“用户名”：

```
void onSubmitNewUser(Object sender, EventArgs e)
        {
            string strcon = "connect_information";
            SqlConnection con = new SqlConnection(strcon);

            SqlCommand com = new SqlCommand("storelogin", con);
            com.CommandType = CommandType.StoredProcedure;
            SqlParameter p1 = new SqlParameter("username",  UserName.Text);
            SqlParameter p3 = new SqlParameter("password", ConfirmPassword.Text);
            com.Parameters.Add(p1);
            com.Parameters.Add(p3);
            con.Open();
            com.ExecuteNonQuery();
            Labelinfo.Text = "registered successful";
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:42:35.930

您也可能很难获得 ConfirmPassword 文本框的内容..因为您的控件被埋在另一个容器中，所以在一些小挖掘之后您必须得到奖励..让我们开始挖掘......

使用已经可以访问的向导找到您的文本框

```
 TextBox  UserName= (TextBox)CreateUserWizard.FindControl("UserName"); 
```

//然后根据需要使用它。希望这会有所帮助。

# migration - 从 playframework 2.0 迁移到 2.1 RC2 (java) 后使用 Forms

> ID：14439332
> 
> 赞同：1
> 
> 时间：2013-01-21T13:06:41.933
> 
> 标签：migration, playframework-2.0, playframework-2.1

我已经更新了我的控制器以使用 play.data.Form.form() 方法而不是 Controller.form()。当我尝试运行我的应用程序时，我收到如下错误：

错误：类 create_user 中的方法渲染不能应用于给定类型；

```
return ok(create_user.render("", Form.form(CreateUserInfo.class), creator.get())); 
```

必需：字符串，play.api.data.Form，用户找到：字符串，play.data.Form，用户

看起来我的模板希望获得 play.api.data.Form 而不是 play.data.Form。是否有任何隐式转换，或者我应该更新我的模板以使用 play.data.Form？

如果我在我的模板中使用 play.data.Form 我错过了 play.api.data.Form 的一些功能，比如通过 apply 方法请求参数的能力（例如：createUserForm("username") )

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:39:20.263

该解决方案由[playframework google group](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/octCwQ4_hmI)的 Guillaume Bort 提供。

更新 Build.scala 后，我忘记将 javaCore 添加为我的应用程序的依赖项。您必须在 2.1 中显式添加 javaCore 作为依赖项。

```
val appDependencies = Seq(
      javaCore
) 
```

并记住开始使用 play.Project 而不是 PlayProject：

```
val main = play.Project(appName, appVersion, appDependencies).settings(
      // Add your own project settings here
) 
```

# c# - 数字签名 - 要签名的种子数据的最佳大小是多少

> ID：14439334
> 
> 赞同：0
> 
> 时间：2013-01-21T13:06:49.427
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我计划使用数字签名来验证调用我的 MVC 4.0 Web API 服务的客户端。在 ASP.NET 3.5 客户端中，我将使用证书创建数字签名并将其放入 Authorization 标头中。

我想知道数据应该是什么大小（当我说数据时，我的意思是我用来生成签名的字符串）。这很重要吗？

每次生成签名时更改此种子数据也是一种好习惯 - 即通过在其中包含当前日期时间。

我一直在看这个：

[http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html](http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:28:08.057

可以认为数字签名如下：

```
SignatureValue = EncryptWithPrivateKey(DigestOf(data)) 
```

由于数字签名应用于数据的摘要值，因此其长度并不那么重要。

# android - 手机重启后保留 NFC 意图

> ID：14439335
> 
> 赞同：0
> 
> 时间：2013-01-21T13:06:51.513
> 
> 标签：android, nfc

我遇到了一个新问题，就像这样，我已经阅读了标签，一切正常，之后我将手机置于睡眠/阻塞状态。

然后我按下一个按钮“唤醒”手机，然后解锁手机，然后活动出现，问题是它再次触发读取，但这次我没有接近标签，它保留了最后的意图。这怎么可能？我怎样才能删除意图。

这是活动的代码：

```
public class LerTags extends Activity {
private NfcAdapter mNfcAdapter;
private ImageView mScanner;
private Animation mAnimation;
SharedPreferences gameSettings;
String user="";
String posto="";

String content="";
String tagsvisitadassemnet="";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    gameSettings = getSharedPreferences("MyGamePreferences", MODE_PRIVATE);
    user=gameSettings.getString("User", "");
    posto=gameSettings.getString("Posto", "");

    //verificar que tipo de utilizador é..
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    if(posto.equals("1")==true)
        setContentView(R.layout.activity_lertags);
        else
            setContentView(R.layout.activity_lertags_noadmin);  
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.mytitle);

        ((TextView)findViewById(R.id.titlebarTitleTxt)).setText(user);

        //verificar o status da conecao e por imagem correspondente
        if(isNetworkAvailable(LerTags.this)==true)
        {
              ImageView statusrede = (ImageView) findViewById(R.id.statusrede);
              statusrede.setImageResource(R.drawable.rede);
        }
        else
        {
              ImageView statusrede = (ImageView) findViewById(R.id.statusrede);
              statusrede.setImageResource(R.drawable.redeoff);

        }

        //animaçao
        mScanner = (ImageView)findViewById(R.id.img);

        mScanner.setVisibility(View.VISIBLE);
        TranslateAnimation mAnimation = new TranslateAnimation(
                 TranslateAnimation.RELATIVE_TO_SELF, -1.0f,
                 TranslateAnimation.RELATIVE_TO_SELF, 0.2f,
                 TranslateAnimation.ABSOLUTE, 0f,
                 TranslateAnimation.ABSOLUTE, 0f);
        mAnimation.setDuration(3000);
        mAnimation.setRepeatCount(-1);
        mAnimation.setRepeatMode(Animation.REVERSE);
        mAnimation.setInterpolator(new LinearInterpolator());
        mScanner.setAnimation(mAnimation);

        mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
        if (mNfcAdapter == null) {
            Toast.makeText(this, "Sorry, NFC is not available on this device", Toast.LENGTH_SHORT).show();
            //finish();
        }
        else
        {
        if(mNfcAdapter.isEnabled()==false)
        {
            //Toast.makeText(getApplicationContext(), "Please activate NFC and press Back to return to the application!", Toast.LENGTH_LONG).show();
            startActivity(new Intent(android.provider.Settings.ACTION_WIRELESS_SETTINGS));
            setResult(2);
            finish();

        }
        }

        Button btsair= (Button) findViewById(R.id.exit);

           btsair.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    exit();
                }
            });

}
private boolean isWriteReady = false;

  //funçao para eliminar todas as actividades
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(resultCode==2){
        setResult(2);
        finish();
    }
}

//funcao usada para sair...
 public void exit()
    {
        SharedPreferences.Editor prefEditor = gameSettings.edit(); 
        prefEditor.putString("UserName",""); 
        prefEditor.putString("Password","");  
        prefEditor.commit();
        setResult(2);
        finish();

    }

   //verificar se tem ou nao internet
public static boolean isNetworkAvailable(Context context) {
    ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    if (connectivity != null) {
       NetworkInfo[] info = connectivity.getAllNetworkInfo();
       if (info != null) {
          for (int i = 0; i < info.length; i++) {
             if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                return true;
             }
          }
       }
    }
    return false;
 }

@Override
public void onNewIntent(Intent intent) {
    // onResume gets called after this to handle the intent
    intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    setIntent(intent);

}

@Override
public void onResume() {
    super.onResume();
     //verificar o status da conecao e por imagem correspondente
    if(isNetworkAvailable(LerTags.this)==true)
    {
          ImageView statusrede = (ImageView) findViewById(R.id.statusrede);
          statusrede.setImageResource(R.drawable.rede);
    }
    else
    {
          ImageView statusrede = (ImageView) findViewById(R.id.statusrede);
          statusrede.setImageResource(R.drawable.redeoff);

    }
    tagsvisitadassemnet=gameSettings.getString("tagsvisitadas", "");
    Toast.makeText( LerTags.this, "Dados em memoria em RESUME 2:"+tagsvisitadassemnet, Toast.LENGTH_LONG).show();

        //Toast.makeText( TagsActivity2.this, "vai continuar... login:"+user, Toast.LENGTH_LONG).show();
     //Toast.makeText( LerTags.this, "REsume--tags em memoria:"+tagsvisitadassemnet, Toast.LENGTH_LONG).show();
    Toast.makeText( LerTags.this, "REsume--valor do iswriteready:"+isWriteReady, Toast.LENGTH_LONG).show();
    if (isWriteReady && NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction())) {

    } else if (!isWriteReady
            && (NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction()) || NfcAdapter.ACTION_NDEF_DISCOVERED
                    .equals(getIntent().getAction()))) {
        processReadIntent(getIntent());
    }
}

public void processReadIntent(Intent intent) {
     //Toast.makeText( LerTags.this, "process read intent"+isWriteReady, Toast.LENGTH_LONG).show();
    List<NdefMessage> intentMessages = NfcUtils.getMessagesFromIntent(intent);
    List<String> payloadStrings = new ArrayList<String>(intentMessages.size());

    for (NdefMessage message : intentMessages) {
        for (NdefRecord record : message.getRecords()) {
            byte[] payload = record.getPayload();
            String payloadString = new String(payload);

            if (!TextUtils.isEmpty(payloadString))
                payloadStrings.add(payloadString);
        }
    }

    if (!payloadStrings.isEmpty()) {
         content =  TextUtils.join(",", payloadStrings);
         //verificar se leu ou nao o conteudo da tag´

         if(content.equals(""))
         {
             //erro
             LayoutInflater inflater = getLayoutInflater();
                View layout = inflater.inflate(R.layout.customtoasterro,(ViewGroup) findViewById(R.id.toast_layout_root));

                TextView text = (TextView) layout.findViewById(R.id.texttag);
                text.setText(content);

                Toast toast = new Toast(LerTags.this);
                toast.setGravity(Gravity.FILL, 0, 0);
                toast.setDuration(Toast.LENGTH_LONG);
                toast.setView(layout);
                toast.show();
         }
         else
         {
             LayoutInflater inflater = getLayoutInflater();
                View layout = inflater.inflate(R.layout.customtoast,(ViewGroup) findViewById(R.id.toast_layout_root));

                TextView text = (TextView) layout.findViewById(R.id.texttag);
                text.setText("Sucesso");

                Toast toast = new Toast(LerTags.this);
                toast.setGravity(Gravity.FILL, 0, 0);
                toast.setDuration(Toast.LENGTH_LONG);
                toast.setView(layout);
                toast.show();

         }
        //Toast.makeText(TagsActivity2.this, "Read from tag: " + content,
    //          Toast.LENGTH_LONG).show();
        Toast.makeText( LerTags.this, "a tag tem content"+content +"e vai testar interenet", Toast.LENGTH_LONG).show();
        //ver se existe con a internet

         if(isNetworkAvailable(LerTags.this)==true) {

            //if(tagsvisitadassemnet.length()>0)
            //{
                //tem tags guardadas em memoria
                Toast.makeText( LerTags.this, "existem dados por enviar:"+tagsvisitadassemnet, Toast.LENGTH_LONG).show();
            new savetagdataandtagmemory().execute(new String[] { "http://www.onetag.pt/metrodoporto/teste.php" });

            //} 
            //else
            //{ //Toast.makeText( TagsActivity2.this, "tem internet vai registar ", Toast.LENGTH_LONG).show();
            //  new savetagdata().execute(new String[] { "http://www.onetag.pt/metrodoporto/teste.php" });
            //}//estava a criar este erro por causa de ter o toast dentro do doinbackground
            //Android AsyncTask [Can't create handler inside thread that has not called Looper.prepare()]
        }
        else
        {
            //Toast.makeText( TagsActivity2.this, "n tem internet vai guardar dados:"+tagsvisitadassemnet, Toast.LENGTH_LONG).show();
            Calendar c = Calendar.getInstance();

            SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
            String formattedDate = df.format(c.getTime());
            SharedPreferences gameSettings = getSharedPreferences("MyGamePreferences", MODE_PRIVATE);  
            tagsvisitadassemnet=gameSettings.getString("tagsvisitadas", "");
            tagsvisitadassemnet+=content+"/"+formattedDate+"_";
            Toast.makeText( LerTags.this, "Dados em memoria:"+tagsvisitadassemnet, Toast.LENGTH_LONG).show();
            SharedPreferences.Editor prefEditor = gameSettings.edit();
            prefEditor.putString("tagsvisitadas", tagsvisitadassemnet);
            prefEditor.commit();
        }

    }
}

private class savetagdataandtagmemory extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
        SharedPreferences gameSettings = getSharedPreferences("MyGamePreferences", MODE_PRIVATE);  

        String urlpost="http://www.onetag.pt/metrodoporto_/saveBDregistos2.php";

        ArrayList<NameValuePair> parametrospost=new ArrayList<NameValuePair>();
        parametrospost.add(new BasicNameValuePair("usuario",user));
        parametrospost.add(new BasicNameValuePair("mimecode",content));
        parametrospost.add(new BasicNameValuePair("memorytags",tagsvisitadassemnet));
        Log.i("Inicio","vai entrar no try");
        String resposta = null;
        try{
            //Toast.makeText( TagsActivity2.this, "entrou no try com o server"+urlpost, Toast.LENGTH_LONG).show();
            resposta= http.executHttpPost(urlpost, parametrospost);
            String resposta2=resposta.toString();
            resposta2=resposta.replaceAll("\\a+"," ");
            Log.i("Inicio","resposta:"+resposta2 );

        }
        catch(Exception erro)
        {
            resposta="terminou";
            return resposta;
        }
        return resposta;
    }

    @Override
    protected void onPostExecute(String result) {

         //retornou erro, por exemplo tempo excedido
         if(result.equals("terminou"))
         {
            /* String erro="";
            Log.i("Inicio","Erro:"+erro );
            LayoutInflater inflater = getLayoutInflater();
            View layout = inflater.inflate(R.layout.customtoasterro,(ViewGroup) findViewById(R.id.toast_layout_root));

            TextView text = (TextView) layout.findViewById(R.id.texttag);
            text.setText("Erro");

            Toast toast = new Toast(LerTags.this);
            toast.setGravity(Gravity.FILL, 0, 0);
            toast.setDuration(Toast.LENGTH_LONG);
            toast.setView(layout);
            toast.show();*/
            Calendar c = Calendar.getInstance();

             SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
             String formattedDate = df.format(c.getTime());
            SharedPreferences gameSettings = getSharedPreferences("MyGamePreferences", MODE_PRIVATE);  
            tagsvisitadassemnet=gameSettings.getString("tagsvisitadas", "");
            tagsvisitadassemnet+=content+"/"+formattedDate+"_";
            Toast.makeText( LerTags.this, "Dados em memoria:"+tagsvisitadassemnet, Toast.LENGTH_LONG).show();
            SharedPreferences.Editor prefEditor = gameSettings.edit();
            prefEditor.putString("tagsvisitadas", tagsvisitadassemnet);
            prefEditor.commit();

         }
         else
         {
             String f=result.substring(0, result.length()-4);
             Toast.makeText(LerTags.this, "Registo adicionado com sucesso::::"+f, Toast.LENGTH_LONG).show();
             if(f.equals("sucesso")==true)
             {
            //Notas="";
            //Tarefas="";
            //TarefasNFeitas="";
            /*
            LayoutInflater inflater = getLayoutInflater();
            View layout = inflater.inflate(R.layout.customtoast,(ViewGroup) findViewById(R.id.toast_layout_root));

            TextView text = (TextView) layout.findViewById(R.id.texttag);
            text.setText("Sucesso");

            Toast toast = new Toast(LerTags.this);
            toast.setGravity(Gravity.FILL, 0, 0);
            toast.setDuration(Toast.LENGTH_LONG);
            toast.setView(layout);
            toast.show();*/
            //apagar as tags da memoria
            SharedPreferences.Editor prefEditor = gameSettings.edit(); 
            prefEditor.putString("tagsvisitadas",""); 
            prefEditor.commit();
            tagsvisitadassemnet=gameSettings.getString("tagsvisitadas", "");

            //Toast.makeText( LerTags.this, "Dados em depois de enviar:"+tagsvisitadassemnet, Toast.LENGTH_LONG).show();

             }
             else
             {
                 Calendar c = Calendar.getInstance();

                 SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
                 String formattedDate = df.format(c.getTime());
                SharedPreferences gameSettings = getSharedPreferences("MyGamePreferences", MODE_PRIVATE);  
                tagsvisitadassemnet=gameSettings.getString("tagsvisitadas", "");
                tagsvisitadassemnet+=content+"/"+formattedDate+"_";
                Toast.makeText( LerTags.this, "Dados em memoria:"+tagsvisitadassemnet, Toast.LENGTH_LONG).show();
                SharedPreferences.Editor prefEditor = gameSettings.edit();
                prefEditor.putString("tagsvisitadas", tagsvisitadassemnet);
                prefEditor.commit();

             }

         }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T23:23:52.530

您必须添加一个变量来通知您的程序该意图已被处理。如果没有，那么您将处理每个 onResume 的意图。您几乎做对了，只需添加（请参见[此处](http://code.google.com/p/ndef-tools-for-android/source/browse/ndeftools-util/src/org/ndeftools/util/activity/NfcDetectorActivity.java)）：

```
protected boolean intentProcessed = false;

@Override
    public void onNewIntent(Intent intent) {

        Log.d(TAG, "onNewIntent");

        // onResume gets called after this to handle the intent
        intentProcessed = false;

        setIntent(intent);
    }

@Override
    protected void onResume() {
        super.onResume();

        // your current stuff

        if(!intentProcessed) {
             intentProcessed = true;

             processIntent();
        }

    } 
```

这样，您将处理初始意图以及随后的所有意图（扫描的标签） - 但每个意图仅处理一次。

# javascript - 保存输入值

> ID：14439340
> 
> 赞同：0
> 
> 时间：2013-01-21T13:07:12.043
> 
> 标签：javascript

好的，我有以下内容：http: [//jsfiddle.net/RaWF7/](http://jsfiddle.net/RaWF7/)

当我单击保存时，我希望`saveFunction`保存输入中的值。

```
function saveFunction(){
    calculator.result.value
 } 
```

我知道在这之后我会感到愚蠢:)

```
<li><a href="#" style="text-decoration:none; color:black;" onClick="saveFunction()">Edit</a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:14:25.657

要将值保存在剪贴板中，您可以使用此库：[https ://github.com/jonrohan/ZeroClipboard](https://github.com/jonrohan/ZeroClipboard)

目前是因为如果出现安全问题，则不允许使用 JavaScript 操作剪贴板（至少它不是跨浏览器）。

# javascript - div 不可见

> ID：14439341
> 
> 赞同：1
> 
> 时间：2013-01-21T13:07:15.260
> 
> 标签：javascript, jquery

我有一个覆盖页面，其中有一个父 div 和子 div 像这样

```
<div id="completeBlock" style="display:block">
    <div id="id1" style="display:block">
       This is div one
    </div>
    <div id="id2" style="display:none">
       This is div two
    </div>
        <div id="id3" style="display:none">
       This is div three
    </div>
</div> 
```

和单独的链接来显示 div

```
<a onclick=doChangeDiv(id1)>link one</a>
<a onclick=doChangeDiv(id2)>link two</a>
<a onclick=doChangeDiv(id3)>link three</a> 
```

我的目标是一次显示一个 div 而其他的不显示。它在所有浏览器中都可以正常工作，但在 Firefox 中它在我第一次打开页面时工作。如果我关闭页面并再次打开它，隐藏的 div 不能变得可见，我收到错误“TypeError：无法访问死对象”

我的 jquery 脚本是

```
function doChangeDiv(fromId){
$('#completeBlock').children().each(function() {
        if($(this).css('display') != 'none')
        {
            var hideId = '#'+$(this).attr('id');
            $(hideId).hide();
        }
   });
   $(fromId).attr('display','block');
   $(fromId).show();
} 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:18:17.563

看到这个：http: [//jsfiddle.net/uD9mU/1/](http://jsfiddle.net/uD9mU/1/)

```
$(document).ready(function () {

$('a').click(function (e) {
    e.preventDefault();
    var fromId = $(this).attr("data");
    //alert(fromId);
    $('#completeBlock').children().hide().filter('#'+fromId).fadeIn('slow');
});

}); 
```

# jenkins - 无需等待即可同时构建 jenkins 的电子邮件

> ID：14439344
> 
> 赞同：1
> 
> 时间：2013-01-21T13:07:19.623
> 
> 标签：jenkins, hudson, jenkins-plugins, hudson-plugins

我正在使用詹金斯 1.495。

问题是当启用并发构建时，直到所有构建完成后才会发送电子邮件。

我已经关注了这个问题，它源于所有内置电子邮件通知操作都具有依赖于先前构建的触发器，以便他们可以知道当前构建是否“仍然失败”或“修复”或“损坏”或“仍然成功'等等。这可以很容易地在[这里](https://issues.jenkins-ci.org/browse/JENKINS-16376)看到。

我想知道如何在不等待其他版本的情况下发送电子邮件，方法是：

*   一个可以解决我的问题的现有插件。
*   编写或改编我自己的电子邮件插件。
*   一个我永远不会想到的聪明的解决方案。

如果我要编写或改编自己的电子邮件插件，我想知道是否有人对此有任何经验，或者他们可能已经拥有可以分享的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T23:27:05.653

我也有类似的情况。

我正在考虑使用触发器参数化构建来触发辅助作业以发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-21T11:38:36.530

我决定我应该在这里回答（问这个问题已经有几年了）

我通过简单地自己编写电子邮件报告解决了这个问题，而不是使用内置的。

我知道这不能解决问题，但这是我的解决方法。

事实上，最终我们只是将整个过程从 Jenkins 转移到了我们自己的脚本中，并且只是将 Jenkins 用作 Web 界面。

# linq - 有没有办法使用 LINQ 搜索两个不同的集合并填充另一个集合？

> ID：14439349
> 
> 赞同：0
> 
> 时间：2013-01-21T13:07:42.360
> 
> 标签：linq, c#-4.0, lambda

我有两个不同的集合，如下所示

```
public class Student
{
    public int StudentID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }      
}

public class Skills
{
    public int SkillID { get; set; }
    public int StudentID { get; set; }
    public string Keyskill_Name { get; set; }        
    public int LastUsedYear { get; set; }
} 
```

这里一个学生可以包含多个keyskills

我只想填写一个新的集合，如下所示

```
public class StudentDetails
{
    public int StudentID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public list<string> Keyskill_Name { get; set; }
} 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:20:45.283

`GroupJoin`LINQ 方法是这种情况的完美解决方案：

```
 List<Student> students = new List<Student>();
    List<Skills> skills = new List<Skills>();

    List<StudentDetails> studentDetails = students.GroupJoin(skills, student => student.StudentID, skill => skill.StudentID, (student, skillsForStudent) => new StudentDetails
    {
        FirstName = student.FirstName,
        LastName = student.LastName,
        StudentID = student.StudentID,
        Keyskill_Name = (from skill in skillsForStudent
                         select skill.Keyskill_Name).ToList()
    }).ToList(); 
```

### 如何使用`GroupJoin`方法？

*   从集合中调用与结果具有 1 对 1 关系的方法（这里对于每个`Student`，只有一个对应`StudentDetails`的 .
*   该方法的第一个参数是您要“分布”在其他项目上的集合（这里的技能是“分布”在整个学生集合上）
*   第二个和第三个参数用于解释如何使第一个集合的元素和第二个集合的元素发生碰撞。Lambda 表达式在这种情况下非常有用。
*   最后，第四个参数用于定义结果。它是一个具有 2 个参数的函数：第一个集合（此处`students`）的一个元素及其在第二个集合中使用碰撞找到的相应元素。

# ios - 在没有播放按钮覆盖的情况下在 ios 中显示 html5 视频

> ID：14439352
> 
> 赞同：12
> 
> 时间：2013-01-21T13:07:46.800
> 
> 标签：ios, html, video

我正在尝试显示一个图像，单击该图像会在 html 5 中打开一个视频播放器，但我不希望小半透明播放按钮出现在它上面。有什么方法可以在标签中指定不要将该图标放在海报图像上并按原样显示海报图像？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-04-04T11:10:32.480

您可以使用一些 CSS 隐藏iPhone 上的叠加**播放按钮：**

```
video::-webkit-media-controls-start-playback-button {
  display: none;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T14:09:43.997

**更新：**这不再是最好的方法 - 请参阅下面[的](https://stackoverflow.com/a/36401013/1813169)答案以获得实际解决方案。

* * *

据我所知，播放按钮覆盖是由移动Safari中的渲染引擎添加的，所以没有办法隐藏它。但是，当单击静态图像时，您可能能够使用 ajax 来欺骗它来加载视频。例如：

**HTML**

```
<div id="videoContainer">

</div> 
```

**CSS**

```
#videoContainer {
  background-image: url(http://placehold.it/60x40.png);
  height: 40px;
  width: 60px;
} 
```

**JavaScript**

```
$("#videoContainer").click(function() {
  $(this).css('background', 'none').parent().html("<video id=\"video\" width=\"60\" height=\"40\">\n" +
    "<source src=\"video.mp4\" type=\"video/mp4\">\n" +
    "<source src=\"video.ogg\" type=\"video/ogg\">\n" +
    "</video>");
  $("#video").get(0).play();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-14T09:33:08.347

你应该试试这个

```
video::-webkit-media-controls {
    display: none;
} 
```

# c# - 通过缩放将屏幕位置转换为等距平铺位置

> ID：14439355
> 
> 赞同：0
> 
> 时间：2013-01-21T13:08:08.967
> 
> 标签：c#, xna

我正在尝试将鼠标在屏幕上的位置转换为地图上的特定图块。使用下面的功能，我相信我是正确的，但是当我缩放时我无法正确缩放。任何想法为什么？

这是我正在使用的功能：

```
 Vector2 TranslationVectorFromScreen(Vector2 toTranslate)
    {
        Vector2 output = new Vector2();

        toTranslate -= offset; // Offset is the map's offset if the view has been changed

        toTranslate.X /= tileBy2; // tileBy2 is half of the each tile's (sprite) size
        toTranslate.Y /= tileBy4; // tileBy2 is a quarter of the each tile's (sprite) size

        output.X = (toTranslate.X + toTranslate.Y) / 2;
        output.Y = (toTranslate.X - toTranslate.Y) / 2;

        return output;
    } 
```

根据我的调试信息，当我沿着瓷砖线移动鼠标时，X 和 Y 正在增加，但是它们的值都是错误的，因为没有考虑到比例。我尝试在上面的函数中包含比例，但是无论我在哪里添加它，它似乎都让事情变得更糟。作为参考，比例存储为浮点数，其中 1.0f 表示没有缩放（以防万一）。

这是一个屏幕截图，以防万一：

![在此处输入图像描述](../Images/a756336ef9f9f5258a1720f536a0916f.png)

**编辑：**

通过将函数更改为以下，数字似乎仍然在相同的点增加（即沿每个图块的相关轴增加 1 或减少 1），但结果似乎仍然缩放太多。例如，如果结果是 100、100，当我放大时，即使鼠标在同一个图块上，这些也可能会变为 50、50。

新功能：

```
 Vector2 TranslationVectorFromScreen(Vector2 toTranslate)
    {
        Vector2 output = new Vector2();

        toTranslate -= offset;

        toTranslate.X /= (tileBy2 * scale); // here are the changes
        toTranslate.Y /= (tileBy4 * scale); // 

        output.X = (toTranslate.X + toTranslate.Y) / 2;
        output.Y = (toTranslate.X - toTranslate.Y) / 2;

        return output;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:32:14.947

在对代码进行了一些修改之后，我似乎找到了解决方案。我会把它留在这里，以防它对其他人有用：

```
 Vector2 TranslationVectorFromScreen(Vector2 toTranslate)
    {
        Vector2 output = new Vector2();
        Vector2 tempOffset = offset; // copy of the main screen offset as we are going to modify this

        toTranslate.X -= GraphicsDevice.Viewport.Width / 2;
        toTranslate.Y -= GraphicsDevice.Viewport.Height / 2;
        tempOffset.X /= tileBy2;
        tempOffset.Y /= tileBy4;

        toTranslate.X /= tileBy2 * scale;
        toTranslate.Y /= tileBy4 * scale;

        toTranslate -= tempOffset;

        output.X = (toTranslate.X + toTranslate.Y) / 2;
        output.Y = (toTranslate.X - toTranslate.Y) / 2;

        output += new Vector2(-1.5f, 1.5f); // Normaliser - not too sure why this is needed

        output.X = (int)output.X; // rip out the data that we might not need
        output.Y = (int)output.Y; // 

        return output;
    } 
```

我不完全确定为什么规范化器需要在那里，但我已经玩过地图的比例和大小，这似乎不会影响这个值需要是什么。

最后，这是一个截图来说明它在左上角的工作：

![在此处输入图像描述](../Images/0af9a1e911a3c44126d6e2463673e2c7.png)

# c# - 按值对复杂类型进行分组

> ID：14439361
> 
> 赞同：2
> 
> 时间：2013-01-21T13:08:33.863
> 
> 标签：c#, linq

我有这个对象：

```
notes:[ 
     { user: {
           name: "A",
           group:{
                id:1,
                name:"Group 1"
           }
     }, 
     { user: {
           name: "B",
           group:{
                id:1,
                name:"Group 1"
           }
    }] 
```

我需要按组分组..所以我尝试了这个：

```
foreach (IGrouping<Group, Note> item in notes.GroupBy(n => n.User.Group))
{
    var groupName = item.Key.Name;

    foreach (var note in item)
    {
        //
    }
} 
```

但是我遇到了一个问题，因为分组不起作用（我认为这是因为它使用引用来分组复杂类型）。如果我`n.User.Group`通过`n.User.GroupId`它进行更改，但如果我这样做，我将无法获得组名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:12:45.110

您需要在 Group 类中覆盖 Equals 和 GetHashCode。R# 为其生成这种代码：

```
public class Group
{
    public int GroupId { get; set; }
    public string Name { get; set; }

    protected bool Equals(Group other)
    {
        return GroupId == other.GroupId;
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != this.GetType()) return false;
        return Equals((Group) obj);
    }

    public override int GetHashCode()
    {
        return GroupId;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T13:12:59.883

是的，这是正确的。默认情况下，类都是唯一的，但是您可以覆盖唯一性。

1.  在组对象上覆盖`Equals(object obj)`&`GetHasCode()`以实现您自己的相等性
2.  实现`IEqualityComparer<Group>`并将其作为第三个参数传递给 GroupBy 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T13:14:17.690

您在这里有几个选择：

*   确保组对象的类实现 GetHashCode 和 Equals。实现这些可以像比较组内的 id 一样简单
*   按 id 分组，并从分组中第一个用户的组中获取组名。所有分组的用户属于同一个组，因此名称将相同
*   如果您无权访问您的组类的源，请根据其包装的组的 id 实现 GetHashCode 和 Equals 的包装器进行分组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T13:16:50.153

您利用比较匿名类的优势并写为

```
notes.GroupBy(n => new{n.User.Group.ID,n.User.Group.Name}); 
```

# android - 在整个 Android 应用程序中维护连接变量

> ID：14439363
> 
> 赞同：0
> 
> 时间：2013-01-21T13:08:44.303
> 
> 标签：android, android-activity, client-server, android-service, opc-ua

我有三个问题：-

1) 我正在为 OPCUA 服务器创建 OPCUA 客户端。我的应用程序有几个 avtivities，其中大多数都需要连接的客户端。让我的连接客户端在我的所有活动中可用的最佳方式是什么？我目前使用静态变量来保存我的客户。但是有没有其他更好的方法。我的客户不是 Serializable 或 Parcelable，因此不能作为意图参数传递。

2) 我可以在服务中维护这个静态变量并使用 MySerivce.connectedClient 在我的所有活动中访问相同的变量吗？那会是好的编程习惯吗？

3) 如果我的应用程序强制关闭并且与我的服务器的连接没有释放怎么办。即使我的应用程序强制关闭，我也希望能够与我的服务器断开连接。有没有办法确保这一点（除了将我的所有代码包含在 try catch 块中）？

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:17:05.190

对我来说，这听起来好像您应该将您的客户端实现为一个并发的、特定于应用程序的（私有）服务。它将由 Android 按需启动和停止，并且您的所有活动都可以绑定到它。

[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:37:17.257

最好将所有应用程序特定的东西保留在 Application 类中。

[http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

例如-

```
 public class XYZ extends Application {
 .....

 } 
```

所有应用程序特定的初始化也可以在这里使用。

根据您的要求，静态初始化很适合这里。唯一的事情是它可以在 Application 类而不是 Service 中完成（这很容易被 android 杀死）

强制停止应用程序将终止整个进程（即使用 Process.killProcess(int pid)）。与应用程序关联的所有资源都将被内核删除和释放。所以不，您无法拦截此操作。

但总是为了更安全的一面

1) 你应该在 OnDestory() 中取消注册服务器连接

2）为了更安全，您可以在 Application 类中使用以下功能

```
public void onLowMemory ()
public void onTerminate ()
public void onTrimMemory (int level) 
```

# javascript - Javascript：Chrome 为 [object HtmlDivElement] 提供 [object text]

> ID：14439364
> 
> 赞同：0
> 
> 时间：2013-01-21T13:08:59.160
> 
> 标签：javascript, google-chrome, dom, html

我在我的 javascript 函数中使用以下 for 循环在我的应用程序中创建数据行。

```
for (var j = 0, length = contentsArray.length; j < length; j++) {
      //get the control for the node at this index
      contentControl = contentControlDef.getControlForObjectAtContainerIndex(contentsArray[j], j);
      //repopulate node; call overwriteDomNode(instanceDom, contentsArray, index);
          contentControl.overwriteDomNode(contentsDom.childNodes[j], contentsArray, j);
    } 
```

在这种情况下，是IE 和 FF 中`contentsDom.childNodes`的数组。`[object HtmlDivElements]`但在 Chrome 中，情况就不同了。它在数组中具有相同数量的元素。但它两者`[object text]`兼而有之`[object HtmlDivElement]`。它应该有所有的 HtmlDivElements。有谁知道为什么在chrome中会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:11:48.170

将代码更改为：

```
for (var j = 0, length = contentsArray.length; j < length; j++) {
  //get the control for the node at this index
  contentControl = contentControlDef.getControlForObjectAtContainerIndex(contentsArray[j], j);
  //repopulate node; call overwriteDomNode(instanceDom, contentsArray, index);
  contentControl.overwriteDomNode(contentsDom.children[j], contentsArray, j);
} 
```

`childNodes`还返回文本节点。`children`如果您不需要文本节点，请使用。

# extjs - EXT4JS 名称约定

> ID：14439365
> 
> 赞同：2
> 
> 时间：2013-01-21T13:09:00.423
> 
> 标签：extjs, extjs4

我正在使用 EXTJS 4.1，我将组件命名如下。如果我创建一个商店，我会以 Store 结束它，我对控制器、模型等做同样的事情。所以我可能有 UserStore.js。然后我把它放在一个控制器中。现在 EXTJS 将为它创建 getter 和 setter，但它的方式是它们将名称“Store”附加到末尾，所以我现在有以下内容：getUserStoreStore()。我不喜欢。

但是我想将 Store 附加到我的文件名中，这样我就知道我正在处理哪些文件。例如，我可能有一个 UserModel.js、UserStore.js、UserView.js、UserController.js。如果我不这样做，我将有 4 个名为 User.js 的文件，而且总是必须记住我正在处理的文件会很痛苦。

所以我的问题是有一个配置可以改变 EXTJS 命名这些 getter 和 setter 的方式，还是我必须使用 getUserStoreStore。更难看的是我在商店下有子目录，例如，如果我有以下内容：

```
-store
 -user
  -UserStore.js
  -UserPersmission.js 
```

我这样定义商店：

```
Ext.define('MyApp.store.user.UserStore' 
```

然后我得到以下二传手：

```
getUserUserStoreStore() 
```

呸！有什么想法还是我只是忍受这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:22:27.010

简短的回答是**不**

您只能通过覆盖创建“getter”的方法来更改它，因为没有配置。除此之外，fe .Net ExtJS 使用命名空间来识别类型（fe 控制器命名空间）而不是应用的后缀。此外; 其他后缀由放置类的数组应用（fe 存储、模型、视图）。

我建议您只按名称空间划分。

# c++ - C++ 中的异步函数

> ID：14439375
> 
> 赞同：1
> 
> 时间：2013-01-21T13:09:45.993
> 
> 标签：c++, asynchronous, callback, boost-thread, producer-consumer

我有一个充当服务器的类对象。它从任何地方接收请求并将请求推送到其请求队列（`Producer`）中。现在有一个消费者线程正在运行，它从请求队列中弹出请求，并根据请求调用适当的类方法来提供请求。现在，队列中的请求的消耗和适当功能的启动正在以同步方式执行。我想要的是消费者线程从队列中弹出一个请求并以异步方式启动适当的函数，以便消费者可以立即从队列中弹出下一个请求。

我尝试过的一种解决方案是消费者从队列中弹出一个请求，并`boost::thread`在新线程中创建并启动适当的函数。我已经保存了线程指针，`std::vector`也试过了`boost::thread_group`。到现在为止还挺好。但是这个解决方案有一个问题。

一旦我提供了超过 150 个请求，就会有更多 150 个线程，之后 `pthread`不会创建新线程并给出错误`"pthread_create: Resource temporarily unavailable"`，我相信这意味着当前进程的堆栈已经用完，因此无法创建新线程。

**问题 #1**我的请求处理程序不包含`while (1)`，它们只是在做一些工作并退出并且根本不等待任何东西，这就是为什么我期望我的初始线程已经完成它们的处理并退出线程处理程序函数。考虑到这一点，如果线程已完成处理并退出，它不应该从堆栈中清理掉它的东西吗？

这个问题的一个解决方案是我可以设置线程的堆栈大小，但是在说 1000 个线程之后仍然会引发这个错误。

所以我的要求是我必须在一段时间后清理完成的线程（即当线程指针向量超过 100 或每 1 分钟或类似的时间后）。

**问题 #2**除了像我上面提到的那样启动新线程之外，我应该尝试的其他异步函数调用机制是什么。`boost::function`+是`boost::bind`异步的吗？这是解决我提到的情况的好方法吗？假设我的系统应该 24/7/365 在线并且每天收到 >1000 个请求。

* * *

**更新 #1** 所以我在我的设计中发现了一个问题。我在问题 #1 中提到我的请求处理程序只包含我发现不正确的普通调用。它是从服务器同步下载文件，本质上是一个阻塞操作。我应该异步下载文件。

如果请求处理程序没有执行任何阻塞操作，则创建底层系统无法同时处理的线程是没有用的。

因此，正如 Alex 提到的那样，拥有多个消费者线程（我认为 5 个就足够了）从队列中弹出一个请求并进行异步文件下载将解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:12:39.717

一种解决方案是拥有多个消费者线程，每个线程从队列中弹出一个工作项并同步处理它。它使您能够管理并发（避免过度订阅），同时仍然一次处理多个项目。您还消除了在每个项目上启动新线程的开销，我预测这是您的瓶颈之一。

您应该确保您的队列是为多个消费者设计的。

从未使用过[此实现](http://threadpool.sourceforge.net/)，但线程池可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:21:59.170

您已经使用了 Boost 并下载了文件。因此，将 Boost.Asio 用于网络和所有其他多线程/异步相关的东西，比如中央调度程序，这将是很自然的。

首先，我建议创建一个线程池并在它们上运行 Asio 调度程序：[就像这里](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/examples.html#boost_asio.examples.http_server_3)。使用 Asio 异步网络下载文件：[此处的示例](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/http/client/async_client.cpp)。下载文件时，只需处理它。

这种方法非常可扩展，您不必担心异步网络或多线程同步（相当棘手的事情）。Boost.Asio 提供了很好的例子来实现这一点。

# sql - 从 SQL 表中选择行并从另一个表中选择 5 行

> ID：14439378
> 
> 赞同：1
> 
> 时间：2013-01-21T13:09:58.393
> 
> 标签：sql, sql-server

我有三个这样的 SQL 服务器表![在此处输入图像描述](../Images/2509cf0398b777d8eed31aba7bf331c5.png)

我需要选择`categories from LS_categoires where nodeid = 183`和选择`select only 5 files from LS_files`与每个类别相关的

**如果我有两个与结果相关的类别`node 183`应该`10 rows`** 是可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:18:26.000

试试这个：

```
 SELECT
  *  
FROM LS_Categories c 
INNER JOIN
( 
   SELECT 
     *, ROW_NUMBER() OVER(PARTITION BY catid
                          ORDER BY item_id ASC) rownum
   FROM LS_ItemTypes
) l  ON c.catid = l.catid
    AND l.rownum <= 5
INNER JOIN LS_Files f ON l.item_id = f.id
where c.nodeid = 183; 
```

这将为每个类别选择第一个文件。

# jquery - jQuery 数据表方法 fnSetColumnVis 未显示复选框

> ID：14439382
> 
> 赞同：0
> 
> 时间：2013-01-21T13:10:13.707
> 
> 标签：jquery, checkbox, datatable

我正在使用以下数据属性来隐藏一列。

```
data.aoColumnDefs = [ {
 "bVisible": false, 
 "aTargets": [ 9 ] 
}]; 
```

此列的每一行都有复选框。要添加复选框，我在每一行上调用以下方法，它工作正常。

```
_buildCheckBox : function() {
    var newScriptElement = $("<input type='checkbox' class='re-execute-check' />");
        return $('<div>').append(newScriptElement.eq(0).clone()).html(); 
    } 
```

稍后在一种情况下，我尝试使用 fnSetColumnVis 方法显示此列。

```
 var table = this._resultsTable.dataTable();
 table.fnSetColumnVis(9, true); 
```

有了这个我可以看到列，但没有为每一行显示复选框。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:30:20.753

你可以：

[使用mRender 参数](http://datatables.net/ref#mRender)绘制表格时渲染复选框：

```
"mRender": function (data, type, full) {
     return data + ' <input type='checkbox' class='re-execute-check' />';
} 
```

或者

只需在显示隐藏列后调用您的方法。

# objective-c - 推送通知示例

> ID：14439387
> 
> 赞同：-1
> 
> 时间：2013-01-21T13:10:27.473
> 
> 标签：objective-c, ios6, push-notification, apple-push-notifications

我是 iPhone 开发的新手，我想学习如何编写推送通知。

有人能指出我正确的方向吗？

有人可以为我提供一些很好的链接到我可以在哪里学习这个吗？我发现了很多使用 Google 的示例，但没有提出任何好的建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-21T13:19:11.727

这是**PushNotification的**[教程 -1](http://maniacdev.com/2011/05/tutorial-ios-push-notification-services-for-beginners/) 和[教程 - 2](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)，在本教程中，您还可以获得代码。

 **或者， **如果您想要更人性化的介绍 -**敬请关注`iTunesU`斯坦福**CS193 iOS 课程**。它是免费的，您可以观看有关推送通知的讲座视频。**

# c# - 使用 SignalR 发送 JSON

> ID：14439389
> 
> 赞同：5
> 
> 时间：2013-01-21T13:10:30.687
> 
> 标签：c#, javascript, asp.net, json, signalr

我想使用 Signalr 将对象从 Javascript 发送到服务器，但未调用服务器端方法。

```
// Model-Class generated by EF5.0
public partial class ttFragen
{   
     ...
    public long ID { get; set; }
    public Nullable<long> UserID { get; set; }
    public string Titel { get; set; }
    public string Text { get; set; }
    public Nullable<int> ProductID { get; set; }
    public Nullable<int> Score { get; set; }
    public Nullable<System.DateTime> Date { get; set; }
}

public class Chat : Hub
{

    public void Send2(ttFragen frage)
    {
       ...
    }

} 
```

客户代码：

```
 $.connection.hub.start().done(function() {

 $("#broadcast").click(function () {
 var frage = {
            ID: -1,
            UserID: -1,
            Titel: "titel2",
            Text:"testsst",
            ProductID: -1,
            Score: -1,
            Date : null
           };

chat.server.Send2(frage); // nothing happens
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T13:24:21.203

在客户端上，函数必须以小写字母开头。因此将调用更改为：

```
chat.server.send2(frage); 
```

解决问题

# c++ - 从文件中读取整数时的值错误

> ID：14439390
> 
> 赞同：0
> 
> 时间：2013-01-21T13:10:32.770
> 
> 标签：c++

几周前我问了一个类似的问题，但我被卡住了，我真的不知道我是否没有犯任何其他错误。

我现在可以比较清楚地分辨出我在与什么战斗。

我正在尝试用 C++ 重写一个 VB6 函数。困难的线路是这一行：

```
vector<int>vIntegerValues;

vIntegerValues.resize(iCountIntegers);

fseek(iReadFile, uFromBytePos * sizeof(int), SEEK_CUR);

size_t readElements = fread(&vIntegerValues[0], sizeof(int), iCountIntegers, iReadFile); 
```

我的 VB6 版本是这样的：

```
Dim vIntegerValues() As Integer

ReDim vIntegerValues(0 To iCountIntegers)

Get #iReadFile, uFromBytePos, vIntegerValues() 
```

然而，C++ 函数用不符合预期的数据填充整数向量。

例如在 VB6 中，第一个值是：0,0,2,2,0,-2,0,-2,0,2,0,0,-2,

在 C++ 中，第一个值为 131074、-131072、-131072、131072、0、65534

当他看到我哪里出错时，有人可以帮忙吗？非常感谢。

ps：我事先不知道向量vIntegerValues的大小会是多少，所以请不要建议任何带有固定向量的东西。这就是我会卡住的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:14:13.183

您的 VB6`Integer`是 16 位字。使用`int16_t`（或`short int`在某些平台上，包括你的 :) 在 C++ 中获得相同的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T13:16:43.490

查看数字的大小，您正在将 16 位数字读入 32 位字段。将您的数据类型定义为`short int`并相应地修改您的代码。

# javascript - 查找具有特定单元格值的行

> ID：14439396
> 
> 赞同：2
> 
> 时间：2013-01-21T13:10:55.320
> 
> 标签：javascript, jquery, html

我有一个函数可以在 html 表中找到第一列包含特定值的行...

```
$('#table tr').find('td:eq(0):contains(' + value + ')').parent(); 
```

我遇到的问题是它返回第 0 列中编号为 1 的所有行，而不仅仅是 1 的行。（即 1、15、21 等）

是否有与此搜索的“包含”部分等效的“等于”或其他某种方式？我似乎找不到一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:12:50.477

最简单的方法是使用[filter](http://api.jquery.com/filter/)：

```
$('#table tr').filter(function(){
   return $.trim($('td', this).eq(0).text())=="1";
}); 
```

[示范](http://jsfiddle.net/sGsEV/)

# wso2 - WSO2 ESB SOAP 1.2 子代码错误

> ID：14439398
> 
> 赞同：0
> 
> 时间：2013-01-21T13:11:05.707
> 
> 标签：wso2, wso2esb, synapse

我有一个代理服务 stup 来对模式执行验证，如果验证失败则抛出错误。

```
<inSequence>
  <log level="full"/>
  <validate xmlns:lod="http://example.com" source="$body/lod:Request">
        <schema key="gov:/repository/schemas/com/example/data.xsd"/>
        <on-fail>
           <makefault version="soap12">
              <code xmlns:soap12Env="http://www.w3.org/2003/05/soap-envelope" value="soap12Env:Sender"/>
              <reason>Text reason goes here.</reason>
              <node>http://example.com</node>
              <detail/>
              <role/>
           </makefault>
           <send/>
           <drop/>
        </on-fail>
     </validate>
  </inSequence> 
```

这工作正常，请求按预期得到验证。

问题是：是否可以将子代码添加到 SOAP 1.2 错误中以获得类似于以下内容的内容：

```
<env:Fault>
 <env:Code>
   <env:Value>env:Sender</env:Value>
     <env:Subcode>
       <env:Value>SOME_SPECIFIC_ERROR_SUBCODE</env:Value>
     </env:Subcode>
 </env:Code>
 <env:Reason>
    <env:Text xml:lang="en">Text reason goes here.</env:Text>
 </env:Reason>
 <env:Node>http://example.com</env:Node>
</env:Fault> 
```

先感谢您。弗拉基米尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:02:30.540

我想[这就是你要找的](http://heshans.blogspot.com/2010/10/generate-custom-error-messages-with.html)：

> 在[这篇博](http://heshans.blogspot.com/2010/10/generate-custom-error-messages-with.html)文中，我们将研究如何使用 makefault 调解器生成肥皂故障。除此之外，我将展示如何在该肥皂故障中嵌入自定义消息。为了实现这个目标，我们将使用 makefault 中介器和脚本中介器。

# asp.net-mvc - Kendo UI Treeview - 节点不会展开

> ID：14439401
> 
> 赞同：1
> 
> 时间：2013-01-21T13:11:07.720
> 
> 标签：asp.net-mvc, kendo-treeview

我目前正在使用基本上是 Kendo UI Treeview 文档中“远程数据”示例的副本......但是我似乎在加载任何子节点时遇到问题。

看法：

```
<div class="treeview">
    @(Html.Kendo().TreeView()
        .Name("treeview")
        .DataTextField("Name")
        .DataSource(dataSource => dataSource
            .Read(read => read
                .Action("Pages", "Page", new { Area = "Admin" })
            )
        )
    )
</div> 
```

方法：

```
public JsonResult Pages(int? id)
{
    var pages = _page.Items;

    if(id.HasValue)
    {
        pages = pages.Where(u => u.Parent.Id == id);
    }
    else
    {
        pages = pages.Where(u => u.Parent == null);
    }

    var pagesToReturn = from p in pages
                        select new {
                            id = p.Id,
                            text = p.Title,
                            hasChildren = p.Children.Any()
                        };

    return Json(pagesToReturn, JsonRequestBehavior.AllowGet);
} 
```

但是由于某种原因，单击以展开节点似乎实际上并没有做任何事情。如果我使用 Firefox 的 Net 选项卡来查看数据传输，我可以看到它实际上是转到该方法并为子节点返回正确的 JSON，但实际上并没有将任何内容添加到树视图中！

我真的不知道在调试方面要尝试什么，我真的很难过。任何帮助/方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:17:44.673

单击展开按钮时是否出现加载动画？

顺便说一句，您在**DataTextField中使用了“*****名称***”，但正如我在您的 json 上看到的那样，它没有定义。它会给你“未定义”的节点。尝试用“ ***text*** ”替换它。

 ***```
.DataTextField("text") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:22:12.767

我有类似的问题。在我的情况下，删除 DataTextField 声明并定义 Template 解决了这个问题。

```
@(Html.Kendo().TreeView().Name("tvNodes")
          .DataSource(ds =>  ds.Read(read => read.Action("ReadLeafTreeNodes", "Classifications")))
          .Template("#=item.Text#") 
```

更新：这似乎是一个随机问题，我提出的修复方法并非一直有效。刷新页面后它有时可以工作，有时不能。***

# jquery - 选择多个值的加法

> ID：14439403
> 
> 赞同：0
> 
> 时间：2013-01-21T13:11:19.217
> 
> 标签：jquery, css, jquery-ui, jquery-selectors

下面的代码是一个多选表单，它在选择值之前完成。我需要添加选定的值以在我选择选定的时候显示。我的意思是，如果我选择 item1 和 item2，它应该在同一页面中动态地将总和作为 223 uisng jquery。我认为必须使用 css。在选择多个值的求和计算中帮助我。任何关于此的教程都是令人鼓舞的。

```
 $('#btn-add').click(function(){
        $('#select-from option:selected').each( function() {

          });
    });

</script>

<form>
  <fieldset>

    <select name="selectfrom" id="select-from" multiple size="5">
      <option value="111">Item 1</option>
      <option value="112">Item 2</option>
      <option value="113">Item 3</option>
      <option value="114">Item 4</option>
    </select>

    <a href="JavaScript:void(0);" id="btn-add">Add &raquo;</a>

    </select>

  </fieldset>
</form>' 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:34:18.260

`selectedTotal`每次选择/取消选择时都会更新`option`（我认为这就是您想要的？）

```
$selectOptions = $('option', '#select-from');

$selectOptions.click(function() {   
  var selectedTotal = 0;

  $selectOptions.filter(':selected').each(function() {
    selectedTotal += parseInt(this.value);
  });

  $('#total').text(selectedTotal);  
}); 
```

[这是一个演示](http://jsfiddle.net/KzBYS/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:14:44.783

```
var sum = 0;
$('#select-from option:selected').each( function(i, v) {
    sum += parseInt($(v).attr('value'), 10);
      });
alert(sum); 
```

应该这样做。

你可以在[这里查看演示](http://jsfiddle.net/arunpjohny/gBYSe/)。

# node.js - 什么是最可靠和最流行的 Node.js 模板引擎？

> ID：14439413
> 
> 赞同：4
> 
> 时间：2013-01-21T13:11:40.007
> 
> 标签：node.js, mongodb, pug, ejs

Node noobie问题我希望有智慧的人可以帮助回答：

1) 什么是最可靠和最流行的 Node.js 模板引擎？我正在使用 Express，我正在考虑 Jade 或 EJS（嵌入式 JavaScript）。

顺便说一句，在为 Node 开发时可以不使用模板引擎吗？或者这会在路上造成很多痛苦吗？

2) 同样，当我们讨论最流行的话题时，MongoDB 在 Node 数据库方面是一个明智的选择吗？

非常感谢那些在这方面有经验的人的反馈。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:19:28.007

我可以推荐 EJS，因为它允许您在模板中无缝使用简单的 JS。
**PS** Jade 是 Express 的发明者[TJ](https://github.com/visionmedia/jade)的项目，值得注意的原因不是 :-)

**更新**：
MongoDB 是非常明智的决定，请查看 mongoose 模块，健壮的[ORM](https://github.com/LearnBoost/mongoose)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T20:14:00.487

我建议使用[ECT](https://github.com/baryshev/ect)。这是一个专注于性能的模板引擎，但具有非常强大的功能。它比许多其他人[快得多。](http://ectjs.com/#benchmark)并具有友好的 CoffeeScript 嵌入式语法。[你可以在这里](http://ectjs.com/)玩演示。ECT 也支持客户端。

# neo4j - 带有参数映射的 neo4j 密码集语句

> ID：14439414
> 
> 赞同：3
> 
> 时间：2013-01-21T13:11:44.900
> 
> 标签：neo4j, cypher

我正在努力寻找如何使用带有参数映射的 set cypher 命令的定义

备忘单说使用：`SET n = {map}`

我努力了：

```
START n = node(11379)
SET n = {Name: "Random Test Change"} 
```

在我的服务器上

我收到错误：-

```
`.' expected but `=' found 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:57:34.260

map 参数可以这样使用：

```
String query = "START n = node(11379) SET n = {map}";

Map<String, String> myMap = new HashMap<String, String>();
myMap.put("Name", "Random Test Change");

Map<String, Object> queryParameters = new HashMap<String, Object>();
queryParameters.put("map", myMap);

ExecutionEngine engine = new ExecutionEngine(graphDatabase);
executionResult = engine.execute(query, queryParameters); 
```

# jquery - 使用ajax jquery重新加载图像

> ID：14439415
> 
> 赞同：0
> 
> 时间：2013-01-21T13:11:45.877
> 
> 标签：jquery, html, ajax, image-upload

我正在使用 ajax 上传图像。

我想让这个函数使用类名而不是 ids。

```
$(document).ready(function(){

var button = $('#uploader'), interval;

new AjaxUpload(button, {
    action: 'upload.php',
    onSubmit : function(file , ext){
    if (! (ext && /^(jpg|png|jpeg|gif)$/.test(ext))){
        alert('Error: Only images are allowed');
        return false;
    } else {
                  // Image Accepted.
    }
    },
    onComplete: function(file, response){
        button.attr("src", response);
    }   
});

}); 
```

在 HTML 中

```
<img id="uploader" src="" /> 
```

工作正常，但我想添加更多 img 标签。

请建议我如何更改此功能以使用类而不是 id

```
<img class="uploader" src="" />
<img class="uploader" src="" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:31:08.163

尝试这个：

```
var button = $('.uploader'), interval; 
```

和：

```
<img class="uploader" src="" />
<img class="uploader" src="" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:16:09.260

[您可以在此处](http://api.jquery.com/class-selector/)阅读有关 jQuery 类选择器的信息。我猜你会使用 jQuery`.each`来循环所有按钮或不循环。

# sql - 在不同条件下使用 IN 参数的 sqlite 查询

> ID：14439416
> 
> 赞同：0
> 
> 时间：2013-01-21T13:11:46.037
> 
> 标签：sql, sqlite

我在 sqlite 中有一个名为 Devices 的表，其中包含以下列

```
Id, DeviceId, FavBrands, FavCategories 
```

其中的样本数据是

```
 1        50ea9017cb5ad            1,2,8,9           4,6,8
 2        50ead1683dcc0            3,7,9             4,5,9
 3        50ee73b56c4ea            1,2,7             6,7,8 
```

我想查询此表以返回其中包含 FavBrands 7 的 deviceid 与上面的表的关系，它应该给出行号 2 和 3。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:20:04.503

你可以使用这个：

```
SELECT * FROM Devices
WHERE instr(','||FavBrands||',' , ',7,')>0; 
```

（关于请规范化数据库的强制性评论，带有指向 [Is storage a delimited list in a database column 难道真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-delimited-list-in-a-database-column-really-that-bad)）。

如果您听取其他建议并使用`LIKE`，请确保您`'%,7,%'`像我们在这里一样使用和添加逗号，以避免误报（例如`77`列表中的 with）。

# android - 膨胀新布局以替换现有布局

> ID：14439420
> 
> 赞同：2
> 
> 时间：2013-01-21T13:11:52.063
> 
> 标签：android, layout-inflater

`onCreate()`我通过布局充气器在主 Activity 的方法中加载布局。我想提供用户可以在我的应用程序设置中设置的替代布局。

当用户在返回主活动之前进行设置更改时，是否只是使当前视图无效并在设置代码中膨胀新布局的问题？或者我是否需要在 Activity 中添加 if 语句来`onCreate`增加设置的布局，因此需要用户在更改设置后重新启动应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:38:29.210

当用户从您的主要活动导航到偏好活动时，您的主要活动进入`onPause()`生命周期方法，您的活动进入后台。你失去了对主要活动的参考。在对共享首选项进行更改并且用户按下后退按钮后，您的主要活动将被带到前台。您可以添加条件语句`onResume()`来检查用户是否选择了新布局。

我认为您正在使活动中的视图无效，而不是尝试刷新活动的整个布局（您可以通过将新布局传递给`setContentView()`in`onResume()`尽管条件语句来满足您的要求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T03:53:23.240

您需要在 onCreate 中使用 setContentView 执行此操作...这意味着您不能临时执行此操作，而是必须完成并重新启动 Activity。

使用 Fragments 提供您的内容并简单地将它们换出是更好的方法。

# php - 使用 FirePHP 代替 var_dump

> ID：14439422
> 
> 赞同：3
> 
> 时间：2013-01-21T13:11:56.923
> 
> 标签：php, firefox-addon, var-dump, firephp

当我使用`fb()`函数输出变量时，它只输出变量值，有什么方法可以显示变量类型`var_dump`吗？也没有显示变量的名称，它表明世界会更美！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:16:36.350

尝试这个：

```
FB::log(gettype($var).":$var"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:26:24.180

你可以很容易地包装它。

```
function fb_dump() {
  ob_start();
  foreach(func_get_args() as $arg) {
    var_dump($arg);
  }
  $debug = ob_get_clean();
  fb($debug());
}

$foo = array(1, 5, 4);
$bar = "lorem ipsum";
fb_dump($foo, $bar); 
```

# c# - nancyfx - 从父文件夹提供静态文件

> ID：14439424
> 
> 赞同：4
> 
> 时间：2013-01-21T13:12:10.807
> 
> 标签：c#, nancy

我想从父目录提供我的静态文件，以便在应用程序仍在运行时修改它们以便于开发。我试图在我的引导程序中添加一个静态内容约定，如下所示：

```
this.Conventions.StaticContentsConventions.Add(
  StaticContentConventionBuilder.AddDirectory("content", @"../../content")
);
base.ConfigureConventions(nancyConventions); 
```

但它仍然无法找到那些静态文件。不能从父文件夹提供服务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:50:26.063

不使用 StaticContentConventionBuilder；出于安全原因，我们明确不允许这样做。我们确保用户请求的任何文件始终位于 Web 根目录的范围内，否则人们可能会使用一些路径操作来检索您不希望他们检索的文件。

如果您真的必须这样做（尽管您可以像在其他任何地方一样轻松地编辑 Web 根目录中的文件时，您的推理毫无意义），那么您将不得不自己从头开始编写约定 - 它是一个 Func。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T12:15:18.857

您可以`IRootPathProvider`在调试版本中实现并返回您想要的任何路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-29T11:47:16.717

如果您将这两个文件添加到您的项目中： [https ://gist.github.com/elliotwoods/4822f9c512b4f464534d9e01eb6d21b1](https://gist.github.com/elliotwoods/4822f9c512b4f464534d9e01eb6d21b1)

然后你可以像这样使用自定义静态文件夹：

```
public class CustomBootstrapper : DefaultNancyBootstrapper
{

    protected override void ConfigureConventions(NancyConventions nancyConventions)
    {
        base.ConfigureConventions(nancyConventions);

        nancyConventions.StaticContentsConventions.Add(
#if (DEBUG)
            UnsafeStaticContentConventionBuilder.AddDirectory("/StaticContent", "../../StaticContent")
#else
            StaticContentConventionBuilder.AddDirectory("/StaticContent", "StaticContent")
#endif
            );
    }

} 
```

有很好的理由说明为什么您不想在任何公开的内容中这样做。在我的位置：

1.  git 不跟踪 TargetDir
2.  在调试模式下，我想在应用程序运行时编辑内容并查看结果
3.  我的应用程序只会在专用网络上运行

那我觉得这个套路是安全的

# network-programming - 带有arduino的以太网屏蔽卡住了

> ID：14439425
> 
> 赞同：1
> 
> 时间：2013-01-21T13:12:13.490
> 
> 标签：network-programming, arduino

我的以太网屏蔽有问题。

这是我写的草图

```
void loop() {
  wdt_reset ();

  EthernetClient client = server.available();
  if (client) {
    wdt_reset();
    if (client.available() > 0) {
      char thisChar = client.read();
      Serial.write(thisChar);
      RXtext += thisChar;
      // --------------------- this one repeat for few other strings ----
      if (RXtext.indexOf("L1_On") >= 0) {
        // do stuff
        RXtext = GetStat();  // get system status and replay
        server.print(RXtext);
        Serial.println(RXtext);
        RXtext = "";

        wdt_reset();
      }
      // ---------- end of repeat -------
    }
  }
} 
```

由于某种原因，arduino 在我连接到它几次后卡住了，它没有重置 wtd 并且它被重置并且它失去了 IP 并获得了`255.255.255.255`IP。

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:09:36.387

您需要在循环结束时关闭连接：

```
client.stop(); 
```

否则，您将用完连接，并且事物将锁定并且看门狗计时器将超时。

根据[以太网库文档](http://arduino.cc/en/Reference/Ethernet)：*该库最多支持四个并发连接（传入或传出或组合）*

# javascript - 简单的小书签在 chrome 中不起作用

> ID：14439430
> 
> 赞同：4
> 
> 时间：2013-01-21T13:12:22.807
> 
> 标签：javascript, google-chrome, bookmarklet

我是小书签编码的新手，我遇到了一个问题，即常规 javascript 在浏览器中可以正常工作，但在小书签版本中不能正常工作。

我找到了一个小书签，它可以找到图像并将其转换为 BB 代码并且工作正常，但是它加载了 jQuery，我不希望它一直这样做。所以我基本上只是想消除对它的需求，但现在它不再作为书签了。

原来的书签是这样的：

```
javascript:document.body.appendChild(document.createElement('script')).src='http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js';var%20pictureurl=jQuery('img[id$=%22myImage%22]').attr('src');var%20linkurl=document.location.href;alert('%5BURL='+linkurl+'%5D%5BIMG%5D'+pictureurl+'%5B%2FIMG%5D%5B%2FURL%5D'); 
```

我作为常规 JS 代码工作的 javascript 是：

```
// Create array variables
var imgs = [];

// Put all of the documents tags in to the arrays
imgs = document.getElementsByTagName('img');

var pictureurl = '';
var linkurl = document.location.href;

for(var i = 0; i < imgs.length; i++){
    var str = imgs[i].getAttribute('id');
    var find = str.search("myImage"); 
    if(find != -1){
        pictureurl = imgs[i].getAttribute('src');
        alert('[URL=' + linkurl + '][IMG]' + pictureurl + '[/IMG][/URL]');
    }
} 
```

当我添加 javascript: 并附加最小化的代码时，无论我尝试什么，我都无法让它工作。如果有人可以帮助我完成这项工作，那将是一个很大的帮助，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T13:37:17.410

是的，您的代码中有错误。我想告诉你如何自己找到它，而不是只说它在哪里，所以这里有一个微教程；）

1.  从您的 JS 代码中删除行注释 ( `//`)，因为小书签将在一行上。您最终应该得到以下代码：

    ```
    var imgs = [];
    imgs = document.getElementsByTagName('img');
    var pictureurl = '';
    var linkurl = document.location.href;
    for(var i = 0; i < imgs.length; i++){
        var str = imgs[i].getAttribute('id');
        var find = str.search("myImage"); 
        if(find != -1){
            pictureurl = imgs[i].getAttribute('src');
            alert('[URL=' + linkurl + '][IMG]' + pictureurl + '[/IMG][/URL]');
        }
    } 
    ```

2.  从代码中删除*换行符*并在代码前面加上`javascript:`协议，以便 Chrome 知道内容是 JavaScript 代码。您的代码现在应该如下所示：

    ```
    javascript: var imgs = []; imgs = document.getElementsByTagName('img'); var pictureurl = ''; var linkurl = document.location.href; for(var i = 0; i < imgs.length; i++){     var str = imgs[i].getAttribute('id');     var find = str.search("myImage");      if(find != -1){         pictureurl = imgs[i].getAttribute('src');         alert('[URL=' + linkurl + '][IMG]' + pictureurl + '[/IMG][/URL]');     } } 
    ```

3.  将您的小书签创建为书签并确保其可访问（即可见，以便您可以在任何 Chrome 窗口中单击它）。

4.  转到您将在其上测试您的书签代码的页面。
5.  按住++打开开发者*工具*。`CTRL``SHIFT``I`
6.  切换到名为*Console*的选项卡。
7.  单击小书签。
8.  控制台现在应该向您显示在执行 bookmarlet 代码时发出的错误/警告。
9.  如果是您的代码，它会吐出：

    ```
    Uncaught TypeError: Cannot call method 'search' of null (program):1
    (anonymous function) 
    ```

这似乎是合理的，因为`search()`在其值上调用`str`包含`ID`属性值的值，但并非所有`IMG`标签都已`id`分配。

很酷的是，您可以单击`(program):1`窗口右侧的 并调试代码、检查变量等。

# powershell - PowerShell 模块中的变量

> ID：14439431
> 
> 赞同：32
> 
> 时间：2013-01-21T13:12:24.880
> 
> 标签：powershell, module

我有一个主脚本，其中定义了一些常量。然后我有一个模块（psm1）来包含辅助函数。详情如下：

在主脚本中，我已将模块作为对象导入：

```
$cud2ADhleper = Import-Module -Force $cud2ADhelperModule -AsCustomObject 
```

在模块中，我有两个变量，

```
[string]$SQLServer = $null

Function SetSQLServerAddr ([string] $name)
{
    $SQLServer = $name
}
Function GetSQLServerAddr
{
    return $SQLServer
} 
```

我的理解是因为我不是`$SQLServer`从模块中导出的，所以这个变量应该是本地的，我应该能够设置/获取它。

事实证明并非如此。在我调用之后`SetSQLServerAddr ([string] $name)`，调用`GetSQLServerAddr`返回 $null。我错过了什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-21T13:47:41.657

```
Function SetSQLServerAddr ([string] $name)
{
    $SQLServer = $name
} 
```

这会在该函数的范围内创建一个新的*本地* `$SQLServer`。

如果要在模块 ( `.psm1`) 范围内更新变量，则需要在名称前加上前缀以表明：

```
Function SetSQLServerAddr ([string] $name)
{
    $script:SQLServer = $name
} 
```

有关范围的更多信息，请参阅[`get-help about_scopes`](http://technet.microsoft.com/en-us/library/hh847849.aspx)。

# xaml - 如果值为0，如何隐藏控制？

> ID：14439432
> 
> 赞同：0
> 
> 时间：2013-01-21T13:12:28.410
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

在 xaml 中，可以使用[DataTemplate.Triger](https://stackoverflow.com/questions/4799918/is-that-possible-to-have-a-conditional-setter-more-than-0-value)处理控件的外观，但在 win8 xaml 中它不可用：

```
<DataTrigger Binding="{Binding Role.Count, Converter={StaticResource isGreaterThanZero}" Value="True">
    <Setter TargetName="Counts" Property="Visibility" Value="Hidden" />
</DataTrigger> 
```

如何在 Windows 8 xaml 中做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:23:06.373

如果您查看网格和拆分布局的默认 Visual Studio 模板，您会发现一个值转换器的示例，它根据布尔值设置控件的可见性。代码显示在这里

```
public sealed class BooleanToVisibilityConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, string language)
        {
            return (value is bool && (bool)value) ? Visibility.Visible : Visibility.Collapsed;
        }

        public object ConvertBack(object value, Type targetType, object parameter, string language)
        {
            return value is Visibility && (Visibility)value == Visibility.Visible;
        }
    } 
```

您需要做的就是复制此代码并对其进行修改以根据整数值设置可见性属性 - 例如，IntToVisibilityConverter。你可以在你想受到影响的控件上使用这样的转换器

```
Visibility="{Binding IsActive, Converter={StaticResource IntToVisibilityConverter}}" 
```

# javascript - 将 JavaScript 更改为 jQuery

> ID：14439437
> 
> 赞同：-1
> 
> 时间：2013-01-21T13:12:47.163
> 
> 标签：javascript, jquery

我正在尝试制作一个常规的 javascript/html 元素，但我需要了解如何`change document.getElementById()`进入`$()`. 如何更改`document.getElementById("response").innerHTML = res;`为 jQuery？所有回复都会很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:13:24.430

尝试这个`.html`

```
 $('#response').html(res); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:13:47.303

使用[`html()`](http://api.jquery.com/html/)jQuery的功能。至于选择器，您必须[`#`在 id 前面](http://api.jquery.com/id-selector/)放一个来标记它。

```
$( '#response' ).html( res ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T13:14:05.007

与 .html()

```
$("#response").html(res); 
```

# git - 我如何摆脱解决 git 冲突的尝试

> ID：14439443
> 
> 赞同：5
> 
> 时间：2013-01-21T13:13:03.697
> 
> 标签：git, git-revert

我检查了 'production_branch' 然后合并了 'master_branch for_production_branch' 存在大量冲突。'production_branch' 已部署到生产环境。但冲突需要更有经验的眼睛。我需要在生产分支“production_branch”上获得一个关键补丁（我将手动完成），以便我可以部署。

```
git co 'production_branch'  # => 
lib/tasks/foobar.rake: needs merge
vendor/plugins/acts_as_syncable/lib/active_record/whatever.rb: needs merge
error: you need to resolve your current index first 
```

和

```
git co 'master_branch for_production_branch'
lib/tasks/foobar.rake: needs merge
vendor/plugins/acts_as_syncable/lib/active_record/whatever.rb: needs merge
error: you need to resolve your current index first 
```

我怎样才能回到我的工作目录中的“production_branch”，以便部署一个简单的关键修复。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-21T13:20:15.597

您可以使用

```
git merge --abort 
```

中止当前的合并操作并恢复到开始合并之前的情况。有关更多详细信息，请参阅[git 合并文档](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)。

请注意，它会丢弃您所做的任何更改，但我想这在您目前的情况下不是问题......

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-21T13:18:29.950

吹走所有更改并设置为合并之前

```
git reset --hard commitsha 
```

这里的 commitsha 是 git 提交的 sha id。您可以使用`gitk`或`git log`检查您的分支的状态并找出`commit_sha`

**更新**

或在树枝上`git reset --hard production_branch`

# android - android 中带有自定义对话框集适配器的自定义列表视图。

> ID：14439449
> 
> 赞同：2
> 
> 时间：2013-01-21T13:13:13.457
> 
> 标签：android

在我`listview`单击更改时`button`打开一个自定义对话框。输入项目名称。

*我正在自定义对话框中的确定按钮上编写更新列表视图代码*。

给我以下错误：

```
01-21 12:33:30.069: E/AndroidRuntime(1789): java.lang.IllegalStateException: System services not available to Activities before onCreate() 
```

![在此处输入图像描述](../Images/85eb4fd7c64a688c2904e00cb463e283.png)

# objective-c - 使用不带 Retina 显示屏的 Retina 图像测试桌面应用程序

> ID：14439452
> 
> 赞同：2
> 
> 时间：2013-01-21T13:13:17.333
> 
> 标签：objective-c, macos, retina-display

我需要添加到我的桌面应用程序 Retina 图像。我知道如何添加它，但我在测试它时遇到了问题，因为我的 MacBook 没有 Retina 显示屏。那么，是否有一些解决方案可以在没有 Retina 显示器的情况下测试视网膜图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:14:01.043

Apple 提供了一套工具来做到这一点。你会在那里找到它：[https ://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Testing/Testing.html#//apple_ref/doc/uid/TP40012302-CH6-SW1](https://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Testing/Testing.html#//apple_ref/doc/uid/TP40012302-CH6-SW1)

# android - Android/Eclipse：9 补丁图像和黑线

> ID：14439453
> 
> 赞同：1
> 
> 时间：2013-01-21T13:13:19.550
> 
> 标签：android, eclipse, nine-patch

我用 draw9patch 创建了一个 9-patch 图像，但是当我启动应用程序时，黑线仍然出现在设备上，而它们没有出现在图形布局中。我试图做 Eclipse -> Project -> Clear 但它没有用 ![在此处输入图像描述](../Images/99e100f10b8d37e31639761c1dbdbe8c.png)

# javascript - ckeditor 4 fckeditor 文件管理器集成

> ID：14439456
> 
> 赞同：0
> 
> 时间：2013-01-21T13:13:36.460
> 
> 标签：javascript, ckeditor, fckeditor

我正在尝试将 fckeditor 文件管理器集成到最新的 ckeditor 中。我正在学习一个小教程，你可以在这里找到
`http://www.mixedwaves.com/2010/02/integrating-fckeditor-filemanager-in-ckeditor/`

我按照建议添加了替换链接。并更改了我的 config.php 以启用文件管理器。

问题是我得到一个错误 错误 `ckeditor.js`是`line 252`
`TypeError: b is undefined`

这是什么原因造成的？

 **当我这样做时**编辑**`document.write(b.value);`
： 我得到正确的输出**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:49:22.983

问题的答案很简单:)
**给你的 textarea 一个 ID**

老的：
`<div id='ckeditor_div' style='display:none;'><textarea class='ckeditor' style='display:inline-block;' name='tooltip_info'>". $tooltip['tip'] ."</textarea></div>`

新的：
`<div id='ckeditor_div' style='display:none;'><textarea id='ckeditor' class='ckeditor' style='display:inline-block;' name='tooltip_info'>". $tooltip['tip'] ."</textarea></div>`

如您所见，我`id='ckeditor'`在`textarea`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T06:45:37.227

当您尝试使用相同元素的多个 CkEditor 实例时，也会出现此错误。只要确保您没有在同一个元素上多次使用“CKEDITOR.replace”。就我而言，我必须从 config.js 中删除该行**

# objective-c - 使用视图控制器中的任何对象运行应用程序时面临的问题

> ID：14439462
> 
> 赞同：0
> 
> 时间：2013-01-21T13:13:54.913
> 
> 标签：objective-c

我正在尝试在我的 aap 中添加 ECSlidingViewController。当我在我的第一个视图控制器上不添加任何对象时，它工作正常。但是当我添加任何对象，如按钮、导航栏、图像视图时，它开始给我错误。我尝试使用 Try And Catch 查找错误，但没有成功。我是新手，请帮助我，并告诉我是否有比 ECSlidingViewController 更好的解决方案。这是我的项目文件。谢谢你 [的项目 Zip 文件](https://www.box.com/s/60p0h2lns17vmnv069by)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:30:27.227

嘿，这可能无关，但在第 23 行或 XYZViewController 中，您有 MainStoryBoard，它应该是 MainStoryboard。这让它为我编译和运行。此外，您正在使用仅适用于 6.0 及更高版本的自动布局约束，因此选择 6 模拟器或通过单击情节提要返回到他们所谓的“弹簧和支柱”（较旧的布局范例），转到第一个选项卡以右边（看起来像一张折纸，取消选中“使用自动布局”。

希望对您有所帮助，或者如果您发现了更险恶的问题。

# nsis - 为什么我无法设置安装程序的背景？

> ID：14439465
> 
> 赞同：0
> 
> 时间：2013-01-21T13:14:01.560
> 
> 标签：nsis

我正在为我的安装程序编写一个脚本，我想为它设置一个背景图像。所以我正在使用这个代码，但它不起作用。

代码：

```
 !define UMUI_USE_CUSTOMBG
!macro UMUI_BG
        SetOutPath "$PLUGINSDIR"
        File "${NSISDIR}\Contrib\UltraModernUI\BGSkins\SoftGray\BackGround.bmp"
        BgImage::SetBg /NOUNLOAD /FILLSCREEN "$PLUGINSDIR\BackGround.bmp"
        CreateFont $1 "Verdana" 30 700
        BgImage::AddText /NOUNLOAD "$(^Name)" $1 255 255 255 16 114 -1 -1
        BgImage::AddText /NOUNLOAD "$(^Name)" $1 132 132 132 12 110 -1 -1
        BgImage::Redraw /NOUNLOAD
!macroend
!macro UMUI_BG_Destroy
        BgImage::Destroy
!macroend 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:17:37.083

据我所知， UMUI_PAGEBGIMAGE_BMP 不是 UMUI 设置。您应该阅读[文档](http://ultramodernui.sourceforge.net/Readme.php)以找到可用的设置（并查看示例）。

# asp.net-mvc - 如何使用实体框架代码优先方法执行 SP？

> ID：14439467
> 
> 赞同：2
> 
> 时间：2013-01-21T13:14:08.540
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, c#-4.0, entity-framework-4.1

我在互联网上做了一些研究，以了解如何使用实体框架代码优先方法执行存储过程。但我没有得到任何明确的想法。每个人都在讲述自己的 SP 执行方式。在一些博客中，他们提到了以以下方式执行，而在其他博客中，他们提到了以传统的 ADO.NET 方式执行。

```
DbContext.Database.SqlQuery<ProcedureResult>("sp_TestProcedure @param1, @param2",param1val, param2value); 
```

请让我知道执行 SP 的适当方法是什么。我正在使用 MVC3，实体固件代码优先方法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:45:34.303

几周前我有同样的问题，并用我最终使用的解决方案更新了我的答案。此后稍微扩大了使用范围，并且对解决方案的清洁程度相对满意。我需要的结果不会映射到我的实体，所以我没有直接返回实体这一事实对我来说并不是一个损失，但如果这是你的意图，在你的情况下可能会很烦人。

请参阅此处：[带有存储过程的代码优先实体框架，从复杂的全文搜索中返回结果](https://stackoverflow.com/questions/14243946/code-first-entity-framework-w-stored-procedure-returning-results-from-complex-f)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:56:31.413

从 Entity Framework 5 开始，代码首先不支持 Strored 过程，我知道人们使用它们的两种最常见的方式`DbContext.Database.SqlQuery`就像你提到的那样，为存储过程设置 .edmx 文件，我个人倾向于使用 .edmx 文件但这只是我

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-21T14:06:29.510

引用一本书 Julie Lerman 写道： **虽然实体框架支持映射到存储过程，但 Code First 不支持此功能。实体框架团队不打算在 EF 5.0 中向 Code First 添加存储过程支持。他们表示，没有明确的计划何时添加。**

SAFARI 上的图书链接 [http://my.safaribooksonline.com/book/-/9781449331825](http://my.safaribooksonline.com/book/-/9781449331825)

# openerp - Openerplib 错误“方法不可用 execute_kw”

> ID：14439470
> 
> 赞同：1
> 
> 时间：2013-01-21T13:14:21.873
> 
> 标签：openerp

当我尝试使用[OpenErp Client Lib](http://pypi.python.org/pypi/openerp-client-lib/1.0.3)从 OpenERP bd 加载数据时：

我从 iPython 屏幕收到此错误。

openerp-server 和 openerp-web 正在运行，我在日志中没有收到任何错误。两者的配置文件都是默认值。

```
In [8]: import openerplib

In [9]: connection = openerplib.get_connection(hostname="localhost",database="my_db",login="admin", password="1234")

In [10]: user_model = connection.get_model("res.users")

In [11]: ids = user_model.search([("login", "=", "admin")])
---------------------------------------------------------------------------
Fault                                     Traceback (most recent call last)
/home/vanessa/<ipython-input-11-762f474d37fc> in <module>()
----> 1 ids = user_model.search([("login", "=", "vanessa")])

/usr/local/lib/python2.7/dist-packages/openerp_client_lib-1.1.0-py2.7.egg/openerplib/main.pyc in proxy(*args, **kw)
311                                                     self.model_name,
312                                                     method,
--> 313                                                     args, kw)
314             if method == "read":
315                 if isinstance(result, list) and len(result) > 0 and "id" in result[0]:

/usr/local/lib/python2.7/dist-packages/openerp_client_lib-1.1.0-py2.7.egg/openerplib/main.pyc in proxy(*args)
178             """
179             self.__logger.debug('args: %r', args)
--> 180             result = self.connector.send(self.service_name, method, *args)
181             self.__logger.debug('result: %r', result)
182             return result

/usr/local/lib/python2.7/dist-packages/openerp_client_lib-1.1.0-py2.7.egg/openerplib/main.pyc in send(self, service_name, method, *args)
 81         url = '%s/%s' % (self.url, service_name)
 82         service = xmlrpclib.ServerProxy(url)
---> 83         return getattr(service, method)(*args)
 84 
 85 class XmlRPCSConnector(XmlRPCConnector):

/usr/lib/python2.7/xmlrpclib.pyc in __call__(self, *args)
1222         return _Method(self.__send, "%s.%s" % (self.__name, name))
1223     def __call__(self, *args):
-> 1224         return self.__send(self.__name, args)
1225 
1226 ##

/usr/lib/python2.7/xmlrpclib.pyc in __request(self, methodname, params)
1576             self.__handler,
1577             request,
-> 1578             verbose=self.__verbose
1579             )
1580 

/usr/lib/python2.7/xmlrpclib.pyc in request(self, host, handler, request_body, verbose)
1262         for i in (0, 1):
1263             try:
-> 1264                 return self.single_request(host, handler, request_body, verbose)
1265             except socket.error, e:
1266                 if i or e.errno not in (errno.ECONNRESET, errno.ECONNABORTED, errno.EPIPE):

/usr/lib/python2.7/xmlrpclib.pyc in single_request(self, host, handler, request_body, verbose)
1295             if response.status == 200:
1296                 self.verbose = verbose
-> 1297                 return self.parse_response(response)
1298         except Fault:
1299             raise

/usr/lib/python2.7/xmlrpclib.pyc in parse_response(self, response)
1471         p.close()
1472 
-> 1473         return u.close()
1474 
1475 ##

/usr/lib/python2.7/xmlrpclib.pyc in close(self)
791             raise ResponseError()
792         if self._type == "fault":
--> 793             raise Fault(**self._stack[0])
794         return tuple(self._stack)
795 

Fault: <Fault Method not available execute_kw: 'Traceback (most recent call last):\n       File "/usr/local/lib/python2.7/dist-packages/openerp-server/netsvc.py", line 489, in dispatch\n    result = ExportService.getService(service_name).dispatch(method, auth, params)\n  File "/usr/local/lib/python2.7/dist-packages/openerp-server/service/web_services.py", line 595, in dispatch\n    raise NameError("Method not available %s" % method)\nNameError: Method not available execute_kw\n'> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:14:52.873

`execute_kw`可从 OpenERP 6.1 获得

因此，OpenERP Client Lib 与 OpenERP 6.0 或更低版本不兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:22:28.600

此库与 6.1 兼容并适用于 6.1。此外，您的服务器必须正在运行。

所以只要用 6.1 试试就行了。

谢谢

# javascript - jQuery函数比较日期和当前日期

> ID：14439471
> 
> 赞同：3
> 
> 时间：2013-01-21T13:14:23.553
> 
> 标签：javascript, jquery

我通过在单独的文本框中输入日期，从下拉列表中选择年份并在文本框中输入年份来在表单中输入出生日期。现在我想检查输入的日期不能大于 jquery 中的当前日期。请帮忙怎么办？

```
var CurrentMonth = date.getDate() + '/' + date.getMonth() + '/' + date.getFullYear();
    var SelectedDate = $('[id$=spDate]').val() + '/' + $('[id$=drpMonth]').val() + '/' + $('[id$=txtYear]').val();
    if (CurrentDate > SelectedDate) {
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T13:21:31.243

假设您的输入值是整数，您可以[`Date`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)使用它们构造一个实例：

```
var CurrentDate = new Date();
var SelectedDate = new Date(
    $('[id$=txtYear]').val(),
    $('[id$=drpMonth]').val(),
    $('[id$=spDate]').val()
);

//As quite rightly mentioned, January = 0, so if your inputs have the literal number for each month (1 for January) replace the line above with the following, to take a month off:
//var SelectedDate = new Date($('[id$=txtYear]').val(), $('[id$=drpMonth]').val()-1, $('[id$=spDate]').val());

if(CurrentDate > SelectedDate){
    //CurrentDate is more than SelectedDate
}
else{
    //SelectedDate is more than CurrentDate
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-11T06:01:53.547

```
 function compareDate() {
var dateEntered = document.getElementById("txtDateEntered").value; 
var date = dateEntered.substring(0, 2);
var month = dateEntered.substring(3, 5);
var year = dateEntered.substring(6, 10);

var dateToCompare = new Date(year, month - 1, date);
var currentDate = new Date();

if (dateToCompare > currentDate) {
    alert("Date Entered is greater than Current Date ");
}
else {
    alert("Date Entered is lesser than Current Date");
}
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T13:28:35.183

比较`Date`对象很简单，只需使用标准的关系运算符即可。当传递一个时，`Object`它们会隐式调用对象的`.valueOf()`函数，该函数将以毫秒为单位返回时间，适合比较。

困难的部分首先是构造一个有效的`Date`对象。

为了可靠性，我强烈建议使用这个版本的[`Date`构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)，而不是传递一个字符串：

```
new Date(year, month, day [, hour, minute, second, millisecond]); 
```

这确保了本地日期格式无关紧要。`mm/dd/yyyy`根据默认日期格式是在用户的语言环境中还是`dd/mm/yyyy`在用户的语言环境中，传递字符串可能会产生不同的结果。

不要忘记年份必须是完整的数字年份，并且在这个版本中，一月用 0 表示，而不是 1：

```
var SelectedDate = new Date(
    $('[id$=txtYear]').val(),
    $('[id$=drpMonth]').val() - 1,
    $('[id$=spDate]').val());

if (CurrentDate > SelectedDate) { ... } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-14T09:36:10.240

检查这是否有帮助：

```
var TodayDate = new Date();
var endDate= new Date(Date.parse($("#EndDate").val()));

if (endDate> TodayDate) {
    // throw error here..
} 
```

[https://stackoverflow.com/a/40039798/885627](https://stackoverflow.com/a/40039798/885627)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-07T12:35:07.497

试试这个功能：

```
function isFutureDate(dateText) {

            var arrDate = dateText.split("/");
            var today = new Date();
            useDate = new Date(arrDate[2], arrDate[1] - 1, arrDate[0]);
            if (useDate > today) {
                return true;
            } else return false;
        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-12T17:28:30.843

接受的答案按时间检查。
由于输入类型是“日期”，毫秒是 000
**来比较天**

```
var variable1 = new Date();
var variable2 = variable1.toISOString().split('T')[0];
var SelectedDate = new Date(
    $('[id$=txtYear]').val(),
    $('[id$=drpMonth]').val(),
    $('[id$=spDate]').val()
);
if (SelectedDate.getTime() < new Date(variable2).getTime()) {
    //input date less than todays date
}else{
    //input date bigger than todays date
} 
```

# css - 列表样式外部不显示，但内部是

> ID：14439478
> 
> 赞同：2
> 
> 时间：2013-01-21T13:14:41.987
> 
> 标签：css, html-lists, invisible

“li”内的内容之前的黑色圆盘在这个css中是可见的： `li{ list-style: disc inside none; }` 但它们没有显示在这个代码中： `li{ list-style: disc outside none; }` 我怎样才能让它们可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:14:41.987

将父级“ul”的 padding-left 属性设置为：“20px”，它们就会显示出来。

# c++ - 使用 SFINAE 检测某物是否是（提升）范围

> ID：14439479
> 
> 赞同：3
> 
> 时间：2013-01-21T13:14:43.693
> 
> 标签：c++, boost, sfinae, c++03

对于日志记录代码，我想检测是否可以使用[Boost.Range](http://www.boost.org/libs/range/doc/html/index.html)中的工具对模板函数的给定参数进行迭代。显然我需要实例化不同的代码，所以我需要 SFINAE，可能（当然）结合 boost::enable_if。我试过检测是否定义`begin`了`end`自由函数，如下所示：

```
namespace is_range_impl {
    template <typename T> T &make();
    struct any { template <class T> any(T const&); };
    struct not_range {};
    not_range begin(const any &);
    not_range end(const any &);
    struct no_type { char x[8]; };
    typedef char yes_type;
    template <typename T> yes_type check(const T &t);
    no_type check(const not_range &t);
    using boost::begin;
    using boost::end;
    template <typename T> struct is_range_impl {
        enum e {
            value = (sizeof(check(begin(make<T>()))) == sizeof(yes_type) &&
                     sizeof(check(end(make<T>()))) == sizeof(yes_type)),
        };
    };
}

template <typename T>
struct is_range : public is_range_impl::is_range_impl<T> {};

template <typename T>
typename boost::disable_if<is_range<T> >::type repr(std::ostream &s, const T &v)
{ ... }

template <typename T>
typename boost::enable_if<is_range<T> >::type repr(std::ostream &s, const T &v)
{ ... } 
```

但是，它不是在没有明确定义的时候默默失败`boost::begin`，`boost::end`而是大声失败并出现错误

```
'type' : is not a member of 'boost::mpl::eval_if_c<C,F1,F2>'
    [C=false, F1=boost::range_const_iterator<void *>, F2=boost::range_mutable_iterator<void *>] 
```

在以下代码中`boost/range/iterator.hpp:63`：

```
typedef BOOST_RANGE_DEDUCED_TYPENAME
        mpl::eval_if_c< is_const<C>::value,
                        range_const_iterator< typename remove_const<C>::type >,
                        range_mutable_iterator<C> >::type type; 
```

（我有 boost 1.51，但 1.52 没有列出任何更改，1.53 alpha 列出了两个错误修复，但似乎都没有相关）

那么有没有更好的方法来检测范围？虽然我坚持使用一些 C++03 编译器并且可能会持续很长一段时间，但我想让它可以轻松切换到 C++11（似乎只需要免费`begin`和通过 ADL 获得） `end`.

具体来说，编译器是 Visual C++ 9.0 和 GCC 4.5。SFINAE 对两者的支持都足够了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:13:33.200

I believe the metafunction you need to use is [`has_range_iterator`](http://www.boost.org/libs/range/doc/html/range/reference/concept_implementation/semantics/metafunctions.html).

[Running on LWS](http://liveworkspace.org/code/744iw%243)

```
#include <iostream>
#include <string>
#include <utility>

#include <boost/range.hpp>

template <typename T>
typename boost::disable_if<boost::has_range_iterator<T> >::type repr(const T &, const std::string& name)
{ std::cout << name << " is not a range" << std::endl; }

template <typename T>
typename boost::enable_if<boost::has_range_iterator<T> >::type repr(const T &, const std::string& name)
{ std::cout << name << " is a range" << std::endl; }

struct foo{};
struct bar
{
   typedef int iterator;
    typedef const int const_iterator;
    int begin(){ return 0;};
    int end(){ return 1;};
};

int main()
{
    int i;
    repr(i, "int");
    int array[10];
    repr(array, "int array");
    std::string str;
    repr(str, "std::string");
    foo f;
    repr(f, "foo");
    bar b;
    repr(b, "bar");

    std::pair<int, int> p;
    repr(p, "pair"); // it does make a mistake here, because std::pair<int, int> looks like range, but int is not valid iterator (cannot be dereferenced)
} 
```

# telerik - 在自定义模块中将图像添加到站点地图页面

> ID：14439486
> 
> 赞同：0
> 
> 时间：2013-01-21T13:14:50.420
> 
> 标签：telerik, sitefinity, sitefinity-5, sitefinity-3x

我正在开发一个自定义顶部菜单，并希望为每个站点地图页面添加一张图片。我像下面的附图一样编写了模块。在这个结构中，我将 sitefinity 页面名称输入到 Title 字段并在代码隐藏中拍摄图像。但这种用法不是动态的。

我的问题是如何生成结构来显示哪个图像与哪个站点地图页面一起使用？是否有任何字段或组件可以显示自定义模块中的所有站点地图页面？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:52:29.843

I would recommend looking at [this](http://www.sitefinitywatch.com/blog/09-03-13/Hack_Adding_Properties_to_Sitefinity_Pages.aspx) the only difference would be you need the image selector type which is `<sitefinity:ImageField ID="ImageSelector" runat="server" DisplayMode="Write" UploadMode="Dialog" DataFieldName="Image" />`

Then on in your custom menu widget you will need to add the codebehind and attach to the TabDataBoundEvent event of the navigation type you have chosen.
in CS [Telerik](http://demos.telerik.com/aspnet-ajax/tabstrip/examples/populatingwithdata/hierarchicaldatabinding/defaultcs.aspx)

```
protected void RadTabStrip1_TabDataBound(object sender,
Telerik.Web.UI.RadTabStripEventArgs e)
{
e.Tab.ToolTip ="Read more about " +
(string) DataBinder.Eval(e.Tab.DataItem, "Text");
} 
```

Once you get "e" you should be able to get at your custom fields but either looking up the page via a GUID or possibly right from this. Good Luck

# c++ - 如何在 Windows 中从鼠标挂钩设置光标位置？

> ID：14439491
> 
> 赞同：3
> 
> 时间：2013-01-21T13:15:10.313
> 
> 标签：c++, windows, winapi, mouse-hook

我正在尝试创建一个小应用程序，该应用程序将检测鼠标光标何时移动到屏幕边缘并将其移动到另一边缘，以创建连续的桌面效果，如果这有意义的话。

下面是来自其他人的一些代码（鼠标钩部分），我通过添加 SetCursorPos 来将鼠标移动到固定位置。当我运行它时，SetCursorPos 返回 true，我认为这意味着调用成功，但鼠标没有移动。我在某个地方读到了一些关于更高版本 Windows 版本中的安全约束的内容，以防止这样的事情，这是有道理的，但来源不清楚这是多么真实。有谁知道为什么这不起作用？

谢谢，代码如下：

```
#define _WIN32_WINNT 0x0400
#pragma comment( lib, "user32.lib" )

#include <windows.h>
#include <stdio.h>

HHOOK hMouseHook;

__declspec(dllexport) LRESULT CALLBACK KeyboardEvent (int nCode, WPARAM wParam, LPARAM lParam)
{
    MOUSEHOOKSTRUCT * pMouseStruct = (MOUSEHOOKSTRUCT *)lParam;
    if (pMouseStruct != NULL)
    {
        if (pMouseStruct->pt.x < -1900)
        {
            BOOL r = SetCursorPos(
                500,
                500
            );

            printf("Trigger %d.  Response %d", pMouseStruct->pt.x, r);
        }
    }

    return CallNextHookEx(hMouseHook, nCode, wParam, lParam);
}

void MessageLoop()
{
    MSG message;
    while (GetMessage(&message,NULL,0,0)) {
        TranslateMessage( &message );
        DispatchMessage( &message );
    }
}

DWORD WINAPI MyMouseLogger(LPVOID lpParm)
{
    HINSTANCE hInstance = GetModuleHandle(NULL);
    if (!hInstance) hInstance = LoadLibrary((LPCSTR) lpParm); 
    if (!hInstance) return 1;

    hMouseHook = SetWindowsHookEx (  
        WH_MOUSE_LL,
        (HOOKPROC) KeyboardEvent,  
        hInstance,                 
        NULL                       
        );
    MessageLoop();
    UnhookWindowsHookEx(hMouseHook);
    return 0;
}

int main(int argc, char** argv)
{
    HANDLE hThread;
    DWORD dwThread;

    hThread = CreateThread(NULL,NULL,(LPTHREAD_START_ROUTINE)
        MyMouseLogger, (LPVOID) argv[0], NULL, &dwThread);
    if (hThread)
        return WaitForSingleObject(hThread,INFINITE);
    else return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:32:56.880

这似乎是在您的钩子过程中调用 SetCursorPos 的问题。我想这在 Vista/Windows 7 中是明确禁止的，但我找不到任何文档来确认这一点。我稍微修改了您的代码以在它想要移动光标时发布一条线程消息，并在您的消息过程中执行实际的 SetCursorPos 。一旦完成，它就可以正常工作。

在您的钩子程序中：

```
if (pMouseStruct->pt.x < -1900)
    {
        PostThreadMessage( GetCurrentThreadId(), WM_USER, 0, 0 );
        printf("Trigger %d.  Response %d", pMouseStruct->pt.x, r);
    } 
```

在您的消息循环中：

```
while (GetMessage(&message,NULL,0,0)) {
    if( message.hwnd == NULL ) {
        if( message.message == WM_USER ) {
            SetWindowPos( 500, 500 );
        }
     } else {
         TranslateMessage( &message );
         DispatchMessage( &message );
     }
} 
```

（请注意，这只是一个演示，而不是实际修复。）

话虽如此，您的代码存在许多严重的问题。我认为这里不适合全部介绍，但我建议您将其发布在[https://codereview.stackexchange.com/](https://codereview.stackexchange.com/)上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:22:07.250

看起来你需要翻译坐标。根据文档，您需要调用[`ClientToScreen`](http://msdn.microsoft.com/en-us/library/aa931003.aspx)或`ScreenToClient`翻译这一点。我不知道哪个 Window 是参考。您需要将该窗口句柄作为点（作为输出参数）作为参数传递。然后使用改变的点`SetCursorPos`

检查[示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648380%28v=vs.85%29.aspx#_win32_Using_the_Keyboard_to_Move_the_Cursor)

如果你想要 Screen 你需要做`GetDC(NULL)`的并将返回的句柄传递给`ClientToScreen`

# asp.net - 将 Windows 身份验证与 SQL Server 自定义身份验证 MVC3 混合使用

> ID：14439497
> 
> 赞同：0
> 
> 时间：2013-01-21T13:15:22.527
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, session, windows-authentication

我想根据 User.Identity.Name 对用户进行身份验证，并从 SQL Server 数据库中获取其他详细信息，例如角色和上次登录日期等。

登录后，我应该授权同一用户进行后续调用，而无需访问数据库。

但是，我在初始登录时点击并加载了用户信息，并将其存储在会话中。

这是我的 SQL 表

**应用用户**

*   UserId -> 此处存储的 windows 身份名称映射
*   显示名称
*   角色 ID
*   上次登录日期
*   活跃

登录控制器逻辑

```
public ActionResult Login()
{
 string userId = User.Identity.Name;
    userId = userId.Substring(userId.IndexOf(@"\") + 1);
    var key = "Roles." + userId;
    var roles = HttpContext.Cache[key]
    if (roles == null)
    {
        User user = AdminService.SelectUser(userId);
        roles = new string[] { user.Role.RoleName };
        HttpContext.Cache.Add(key, roles, null,
            DateTime.Now.AddMinutes(HttpContext.Session.Timeout),
            Cache.NoSlidingExpiration);

        HttpContext.User = Thread.CurrentPrincipal = new
                    GenericPrincipal(User.Identity, roles);
        HttpContext.Session["LoggedInUser"] = user;
    }
} 
```

我也有下面的代码来授权用户在 MVC3 中的每个请求

```
void MvcApplication_PostAuthenticateRequest(object sender, EventArgs e)
{
if (User.Identity.IsAuthenticated)
{
    string userId = User.Identity.Name;
    userId = userId.Substring(userId.IndexOf(@"\") + 1);
    var key = "Roles." + userId;
    var roles = HttpContext.Cache[key];
    if (roles != null)
    {
        HttpContext.Current.User =
            Thread.CurrentPrincipal =
                new GenericPrincipal(User.Identity, roles);
    }
}
} 
```

但我建议更改上述逻辑，因为我在访问存储在会话中的用户对象时遇到问题。我不知道为什么会这样。

是否有人有**其他可能的代码/逻辑来进行上述混合身份验证？**

**编辑：**我在其他一些控制器方法中访问 HttpContext.Session["LoggedInUser"] 时出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:18:38.733

> 因为我在访问存储在会话中的用户对象时遇到问题。

您没有将信息存储在会话中。您将其存储在缓存中。那是你的问题。缓存在您的应用程序的所有用户之间共享。因此，`HttpContext.Cache`您可以使用`HttpContext.Session`.

除了使用会话和缓存之外，您还可以将此信息存储在表单身份验证 cookie 的 UserData 部分中，正如我[在这篇文章中所说明的那样](https://stackoverflow.com/a/5947309/29407)。

# typo3 - TYPO3：向 RTE 添加不同的块格式

> ID：14439498
> 
> 赞同：0
> 
> 时间：2013-01-21T13:15:23.133
> 
> 标签：typo3, typoscript, rte

在 RTE 中有一些预定义的块格式，如“标题”、“段落”等。是否可以做新的块格式，并自定义包装它们的标记？

我正在做一份时事通讯，我想在每个段落周围使用表格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:54:30.230

这可以在 Page TSconfig 中实现：

```
RTE.default.userElements {
  10 = Various elements
  10 {
    1 = Table
    1.description = Wrap in a table
    1.content = <table><tr><td>|</td></tr></table>
  }
} 
```

要启用“插入自定义元素”按钮：

```
RTE.default.showButtons := addToList(user)
RTE.default.hideButtons := removeFromList(user) 
```

**编辑**：您可能需要摆弄解析器以允许某些标签或属性。我认为这个是为我的情况做的：

```
RTE.default.proc.HTMLparser_db.allowTags = html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td 
```

来源：[htmlarea 手册](http://typo3.org/extension-manuals/rtehtmlarea_manual/4.7.0/view/4/4/)和[这个片段](http://snipplr.com/view/23427/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:29:16.580

有一个名为的按钮`Insert custom element`，您可以在其中为 RTE 添加自定义*para-templates* ，但是您可能需要启用它并添加新的“项目”。

[此处](http://www.typo3-lisardo.de/home/blog-post/2010/09/01/custom-tags-im-rte.html)(DE) 在***Einfügen über User-Elemente***部分中对此进行了描述。呈现的片段应放置在最高（根）页面的 PageTS 中。

# jquery - 关闭弹出窗口仅使用jquery单击关闭和遮罩区域

> ID：14439502
> 
> 赞同：-2
> 
> 时间：2013-01-21T13:15:34.523
> 
> 标签：jquery

请看这个[链接](http://jsfiddle.net/AYdGS/10/)

我试过的

**jQuery**

```
$("div.prod").click(function() {
    $("div.mask").css("display","");
});

$("div.mask,div.close").click(function() {
    $("div.mask").css("display","none");
}); 
```

**HTML**

```
<div class="prod">
    Product 1
</div>
<div class="prod">
    Product 2
</div>

<br style="clear:both"/>

<div class="mask" style="display:none">
    <div class="popup">
        <div class="close">X</div>
        <div class="details">product details will come here</div>
    </div>
</div> 
```

**CSS**

```
.prod {
    width:100px;
    height: 150px;
    border:1px solid red;
    float:left;
}

.mask {
    position:absolute;
    top:0px;
    left:0px;
    width:100%;
    height:100%;
    opacity:0.8%;
     background-color: rgba(255, 255, 255, 0.55);
}

.popup {
    position:absolute;
    width:250px;
    height:205px;
    left:100px;
    top:50px;
    border:5px solid purple;
    background:#F5F5F5;
}

.details {
    width:220px;
    height:120px;
}

.close {
    cursor:pointer;
    position:absolute;
    top:0px;
    right:0px;
} 
```

我想关闭弹出窗口，只需单击“**关闭**”按钮和“**掩码**”区域...

但是我的脚本会在单击弹出窗口的地方关闭弹出窗口。

我在谷歌上搜索了这个错误，但我找不到。

产品细节应该在里面`<div class="mask"`。例如网站[链接](https://chrome.google.com/webstore/detail/maskme/dpkiidbpeijnaaacjlfnijncdlkicejg/details)

任何人请帮助我。

提前谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:22:17.813

检查`event.target`是否单击了所需的元素：

```
$("div.mask,div.close").click(function(event) {
    var $target = $(event.target);

    if ($target.hasClass("mask") == true
     || $target.hasClass("close") == true) {
        $("div.mask").css("display","none");
    };
}); 
```

小提琴：http: [//jsfiddle.net/AYdGS/13/](http://jsfiddle.net/AYdGS/13/)

# php - 将php插入我的表单变量

> ID：14439504
> 
> 赞同：0
> 
> 时间：2013-01-21T13:15:44.263
> 
> 标签：php

我在一个 php 变量中有我的表单，该变量稍后在代码中返回：

```
$email_form = '<form class="cpd-form store-form" method="post" action="'.get_permalink().'">

        <input type="hidden" id="contact-action" name="contact-action" value="" />
            <div class="your-details group">
            <div class="your-detail">
                    <label for="cpdstore_name">Name:</label>
                    <input type="text" name="cpdstore_name" id="cpdstore-name" value="" />
                    </div>
                    <div class="your-detail end-detail">
                    <label for="cpdstore_school">School/Department:</label>
                    <input type="text" name="cpdstore_school" id="cpdstore-school" value="" />
                    </div>
                    <div class="your-detail">
                    <label for="cpdstore_email">Email:</label>
                    <input type="text" name="cpdstore_email" id="cpdstore-email" value="" />
                    </div>
                    <div class="your-detail end-detail">
                    <label for="cpdstore_phone">Phone:</label>
                    <input type="text" name="cpdstore_phone" id="cpdstore-phone" value="" />
                    </div> ... 
```

我需要使表单具有粘性，我如何以及如何将 php 条件插入到输入值中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:26:46.607

```
$email_form = '<form class="cpd-form store-form" method="post"  action="'.get_permalink().'">
    <input type="hidden" id="contact-action" name="contact-action" value="" />
        <div class="your-details group">
        <div class="your-detail">
                <label for="cpdstore_name">Name:</label>
                <input type="text" name="cpdstore_name" id="cpdstore-name" value="<?php echo $value1;?>" />
                </div>
                <div class="your-detail end-detail">
                <label for="cpdstore_school">School/Department:</label>
                <input type="text" name="cpdstore_school" id="cpdstore-school" value="<?php echo $value2;?>" />
                </div>
                <div class="your-detail">
                <label for="cpdstore_email">Email:</label>
                <input type="text" name="cpdstore_email" id="cpdstore-email" value="<?php echo $value3;?>" />
                </div>
                <div class="your-detail end-detail">
                <label for="cpdstore_phone">Phone:</label>
                <input type="text" name="cpdstore_phone" id="cpdstore-phone" value="<?php echo $value4;?>" />
                </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:28:41.897

默认情况下，您似乎想在输入字段中显示一个值。我无法从你的解释中得到清晰的想法。但我假设它。如果您的要求实际上是这样，只需尝试以下代码。

```
$email_form = '<form class="cpd-form store-form" method="post" action="'.get_permalink().'">

        <input type="hidden" id="contact-action" name="contact-action" value="'.$value1.'" />
            <div class="your-details group">
            <div class="your-detail">
                    <label for="cpdstore_name">Name:</label>
                    <input type="text" name="cpdstore_name" id="cpdstore-name" value="'.$value2.'" />
                    </div>
                    <div class="your-detail end-detail">
                    <label for="cpdstore_school">School/Department:</label>
                    <input type="text" name="cpdstore_school" id="cpdstore-school" value="'.$value3.'" />
                    </div>
                    <div class="your-detail">
                    <label for="cpdstore_email">Email:</label>
                    <input type="text" name="cpdstore_email" id="cpdstore-email" value="'.$value4.'" />
                    </div>
                    <div class="your-detail end-detail">
                    <label for="cpdstore_phone">Phone:</label>
                    <input type="text" name="cpdstore_phone" id="cpdstore-phone" value="'.$value5.'" />
                    </div> ... 
```

# continuous-integration - 为开源项目构建脚本

> ID：14439505
> 
> 赞同：1
> 
> 时间：2013-01-21T13:15:50.277
> 
> 标签：continuous-integration

我的公司正在开发一个开源项目。因此，我们必须考虑两种不同的构建脚本设置。第一个是本地构建，由我们和社区使用。第二次构建在 CI 服务器上执行（我们使用团队城市）。

现在出现两个问题：

1.  我们是否应该将特定于服务器的构建文件与本地构建文件放在同一个存储库中？
2.  如果是，我们如何处理敏感数据？例如，NuGet API 密钥或随着每晚/每周构建增加的版本信息？

*现在的情况*：我们只将本地构建文件放在存储库中，并将合理的东西保存在父目录中。因此感觉有点笨拙（至少对我个人而言）。

*我能想到的位置*：在存储库中有一个*local.build*和*server.build*文件。然后在团队城市中设置一个包含密码和版本号的系统变量。现在我不知道团队城市如何处理属性的可见性。当然，我们不希望我们的每个开发人员都可以访问或读取密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:02:42.387

我认为您对第二种选择的直觉很好。您可以在源代码控制中包含这两个脚本并将变量传递给*server.build*，或者您可以将整个*server.build*过程移动到 TeamCity 构建配置中。

*版本号：* TC 使用递增的构建计数器处理版本号，您可以在其前面添加任意的major.minor.etc。您可以在“常规设置”页面的 下配置内部版本号的格式`Build Number Format`。在我们的团队中，我们有一个构建参数 ，`%version%`我们用 major.minor 值填充它。然后我们的内部版本号格式设置为`%version%.{0}`，这给了我们major.minor.build。该组合值可通过`%system.build.number%`变量获得。

*敏感数据：*您可以创建屏蔽敏感数据的构建参数。添加新参数并单击字段`Edit`中的按钮`Spec`。然后，您可以声明该参数应被视为密码（以及其他选项）。然后对该参数进行加密和混淆。您可以像使用任何其他构建参数一样使用它。

# simple.data - 不能多次指定命名参数“ArgName”

> ID：14439511
> 
> 赞同：1
> 
> 时间：2013-01-21T13:16:09.550
> 
> 标签：simple.data

请问有人可以帮我解决上述问题吗？我在我的项目中使用 SimpleData 并尝试如下更新记录，但出现上述错误。

```
var releasedHosts = show_crm.tblName.Update(ID: Id, ID: newId); 
```

错误信息：

> 命名参数“ID”不能多次指定

谢谢你。

## 代码片段

```
string siteName = ddlDeleteSite.SelectedItem.Text;
if (!siteName.Equals("Unknown-Site") && siteName != null)
        {
            int siteId = Convert.ToInt32(ddlDeleteSite.SelectedValue);
            //Update record to Attach Hostname to selected site by updating it's SiteID and remove it from 'Unknown-Site'
            var updatedSite = show_crm.tblSites.UpdateBySiteID(SiteID: siteId, Deleted: true);
            if (updatedSite != null)
            {
                var unknownSite = show_crm.tblSites.FindBySiteName("Unknown-Site");
                int unknownSiteId = unknownSite.SiteID;
                var releasedHosts = show_crm.tblHostNames.Update(new { SiteID = unknownSiteId }, new { SiteID = siteId });//(show_crm.tblHostNames.SiteID == siteId, SiteID: unknownSiteId);
            }
            lblDeleteSiteStatus.Text = ddlDeleteSite.SelectedItem.Text + " deleted successfully.";
            lblDeleteSiteStatus.Visible = true;
            RetrieveSites(ddlDeleteSite);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:58:30.543

当您想使用列作为条件*并*更新它时，您必须使用更新的条件重载：

```
show_crm.tblName.UpdateAll(show_crm.tblName.ID == Id, ID: newId); 
```

或者您可以指定两个对象作为执行乐观并发类型的条件：

```
show_crm.tblName.Update(new {ID = newId}, new {ID = Id}); 
```

在后一种形式中，第一个对象包含新值，第二个对象包含“原始”值。

# html - 浏览器在mac中显示纯文本而不是HTML

> ID：14439513
> 
> 赞同：6
> 
> 时间：2013-01-21T13:16:11.877
> 
> 标签：html, macos, firefox, browser

我想写一个这样的html文档：

```
<html>
<body>

<h1>My First Heading</h1>

</body>
</html> 
```

我写了它并用名字保存在我的桌面上`hello.html`，但是当我用 firefox 或 safari 打开这个文件时，浏览器会显示整个文本（包括`<html>`所有文本）而不是只显示`my first heading`！有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T13:39:16.960

问题是我用“文本编辑”应用程序编写了 HTML 文档，它保存了带有`.rtf`扩展名的文件，这不是纯文本，所以将文件名更改为`hello.html`并没有改变任何内容。

有两种方法可以解决此问题：

1）如果您坚持使用“文本编辑”，您应该转到页面顶部`text edit->preferences`并勾选，然后当您保存某些内容时，它会保存为纯文本`plain text`

2）你可以使用一些文本编辑器，比如石灰编辑

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T13:18:24.287

最可能的原因是您使用了所见即所得的编辑器并将文档保存为 HTML。

这创建了您键入的 HTML 源代码的 HTML 表示。

请改用文本编辑器。我喜欢 Sublime Edit 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-08T14:33:49.260

我在 TextEdit 中遇到了同样的问题。解决方案是 - 转到“格式”，然后“制作纯文本”。保存文档并在浏览器中再次打开它。它在我的情况下有效。希望它也对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-10T16:54:48.890

我有同样的问题。我正在使用文本编辑。通过以下更改修复了问题：文本编辑->首选项>新文档>Fromat>纯文本（不是富文本）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-24T16:23:57.477

我发现我的 Web 服务器上的父文件夹包含一个旧`.htaccess`文件，导致 HTML 文件显示为纯文本。重命名/修改`.htaccess`文件或只是将我的 HTML 文件移动到另一个文件夹解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-27T16:16:23.763

下载安装“TextWrangler”（适用于 Mac）将您的 html 内容粘贴到其中的新文件中并使用 .html 链接保存。不要使用文本编辑。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-05T14:05:46.860

如果您使用基本文本编辑器（如终端中的 nano）打开文件，您可能会看到基本 HTML 代码中添加了许多额外的行。这就是发生在我身上的事。

我删除了除了我想要的所有行，它最终正确渲染。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-21T13:23:35.980

使用 Dreamweaver、Sublime 等文本编辑器

崇高 [http://www.sublimetext.com/2](http://www.sublimetext.com/2)

并确保您的文件以 .html 而不是 .txt 结尾

# javascript - 在提交打开灯箱。如果灯箱关闭，请提交表单。如果链接被点击，请勿提交

> ID：14439517
> 
> 赞同：-1
> 
> 时间：2013-01-21T13:16:29.503
> 
> 标签：javascript, jquery, forms, fancybox, fancybox-2

我有一个类似于以下内容的 HTML 表单：

```
<form id="cart-form">
    <input type="text" name="quantity" />
    <input type="hidden" name="sku" value="SKU123" />
    <input type="submit" name="submit" value="Submit" />
</form> 
```

我也有一个隐藏的 div，如下所示：

```
<div id="cart-special-offers" style="display:none;"><p>Would you like to take a look at our <a href="/catalogue/category/543" class="ignore-form">current promotions</a>?</p>
    <p><a href="/catalogue/category/543" class="ignore-form">Yes please</a></p>
    <p><a href="#" class="fancybox-close-link">No thanks</a></p>
</div> 
```

在提交表单时，我想在一个花哨的弹出窗口中显示隐藏的 div（停止表单提交）。

如果用户选择查看特价商品，表单提交应该完全取消，用户应该被重定向。

如果用户选择关闭fancybox 弹出窗口（以任何方式），*现在*应该提交用户的表单。

我目前拥有的JS是：

```
$('#cart-form').submit(function(){
    $.fancybox.open([
        {
            href : '#cart-special-offers'
        }
    ]);

    return false;

});

$('.fancybox-close-link').click(function(){
    $.fancybox.close();
    $('#cart-form').submit();
}); 
```

这显然会导致一个循环，每次我尝试关闭它而不查看特别优惠时都会显示fancybox窗口。

我该如何阻止这种情况发生？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:15:30.463

这实际上是一种荒谬的处理方式。

我想要的是发布并转到一个页面，但我有两个提交按钮。

我没有意识到我可以隐藏一个提交按钮（显示：无），在其位置放置一个触发灯箱的锚点，然后在单击灯箱上的关闭时触发对隐藏输入的单击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:28:14.250

尝试这样的事情

```
$('#cart-form').submit(function (e)
{
  $.fancybox.open([
    {
        href : '#cart-special-offers'
    }
  ]);
  return !!e.submit;
});

$('.fancybox-close-link').click(function(){
   $.fancybox.close();
   $('#cart-form').submit({
        submit: true
     });
 }); 
```

# ios - 处理 UILabel 文本对齐的优雅方式？

> ID：14439520
> 
> 赞同：1
> 
> 时间：2013-01-21T13:16:46.377
> 
> 标签：ios, uilabel, uitextview, text-alignment

我正在 iOS 6 中开发一个应用程序并使用 Xcode 4.5.2。

我有一个简单的**UIView**，其中包含根据可本地化字符串的一些文本。嗯，根据显示的语言，文本的行数是变化的。例如，在英语中，有两行，但在土耳其语中，只有一行。

我也应该居中文本对齐。好吧，现在我能够完成它，但是我使用了两个不同的**UILabel**并且我已经手动设置了它们的文本。因此，如果我更改文本的显示语言，它就不起作用![简单的图像](../Images/9f1544de3c3602f8210f726f2d34a81d.png)

所以，

**1-**处理这种对齐问题的最佳方法是什么？

**2-**假设我使用`UILabel`，那么我如何制作一个新行才能获得如图所示的输出。断线模式似乎都不起作用。如果我使用同样的问题`UITextView`？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:43:31.553

做这些事

1.  将您的行数设置为 0。
2.  使您的文本对齐中心。
3.  **`\n`**在要换行的字符串中插入字符。
4.  确保设置`UILabel`.

默认情况下，当文本达到标签的宽度时，它会移动到下一行，但是在达到它的宽度之前，它应该移动到下一行，这通过设置`UILabel`. 为此，您必须在字符串中设置换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:25:08.643

您是否尝试过使用`UILabel`实例方法[`textRectForBounds:limitedToNumberOfLines:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UILabel_Class/Reference/UILabel.html#//apple_ref/doc/uid/TP40006797-CH3-SW11)

从文档中：

> 值 0 表示没有最大行数，矩形应包含所有文本。

# asp.net - CustomValidation 检查更新 GridView 中没有一个 DropDownList 是相同的

> ID：14439522
> 
> 赞同：1
> 
> 时间：2013-01-21T13:16:49.160
> 
> 标签：asp.net, c#-4.0, gridview

希望这对于那里的专家来说是一个相对快速的问题！

我有一个更新 GridView 函数，它有 5 个下拉列表。这 5 个列表绑定到同一个 DataTable，但最终用户（客户端）不能多次指定同一个 SelectedValue。Group01 被RequiredFieldValidator 覆盖，因此它们必须至少指定一个组。

我遇到的问题是，我为 CustomValidation 所做的是一个布尔值，它比较 selectedValue 以确保它们不一样。但是，我不能直接说“ddGroup01”或“ddGroup02”，因为它在当前上下文中不存在。

所以我的问题是，我需要做什么才能使下拉列表存在以进行服务器验证？

.aspx 页面。

```
 <asp:GridView ID="gvEditUser" runat="server" AllowPaging="True" AutoGenerateColumns="False" OnRowDataBound="gvEditUser_RowDataBound" OnRowCancelingEdit="gvEditUser_RowCancelingEdit" OnRowEditing="gvEditUser_RowEditing" OnRowUpdating="gvEditUser_RowUpdating" OnRowDeleting="gvEditUser_RowDeleting" CellPadding="4" ForeColor="#333333" GridLines="None">
        <AlternatingRowStyle BackColor="White" />
        <Columns>
            <asp:TemplateField HeaderText="User ID">
                <ItemTemplate>
                    <asp:Label ID="lbUserID" runat="server" Text='<%# Eval("userid") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Full Name">
                <ItemTemplate>
                    <asp:Label ID="lbFullName" runat="server" Text='<%# Eval("fullname") %>' ></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="tbFullName" runat="server" Text='<%# Eval("fullname") %>' ></asp:TextBox>
                    <asp:RegularExpressionValidator ID="val_reg_FullName" runat="server" ErrorMessage="Not a valid Full Name." ControlToValidate="tbFullName" ValidationExpression="^[A-Z][a-zA-Z']+[ ]+[A-Z][a-zA-Z'\- ]*$" CssClass="password_red_fail" Display="None"></asp:RegularExpressionValidator>
                    <asp:RequiredFieldValidator ID="valFullName" runat="server" ErrorMessage="Full Name is required." CssClass="password_red_fail" ControlToValidate="tbFullName" Display="None"></asp:RequiredFieldValidator>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Email">
                <ItemTemplate>
                    <asp:Label ID="lbEmail" runat="server" Text='<%# Eval("email") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Group 01">
                <ItemTemplate>
                    <asp:Label ID="lbGroup01" runat="server" Text='<%# Eval("group01") %>' ></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:DropDownList ID="ddGroup01" runat="server"></asp:DropDownList>
                    <asp:RequiredFieldValidator ID="valddGroup01" runat="server" ErrorMessage="Group 01 is required." CssClass="password_red_fail" ControlToValidate="ddGroup01" Display="None"></asp:RequiredFieldValidator>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Group 02">
                <ItemTemplate>
                    <asp:Label ID="lbGroup02" runat="server" Text='<%# Eval("group02") %>' ></asp:Label>
                </ItemTemplate>

                <EditItemTemplate>
                    <asp:DropDownList ID="ddGroup02" runat="server"></asp:DropDownList>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Group 03">
                <ItemTemplate>
                    <asp:Label ID="lbGroup03" runat="server" Text='<%# Eval("group03") %>' ></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:DropDownList ID="ddGroup03" runat="server"></asp:DropDownList>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Group 04">
                <ItemTemplate>
                    <asp:Label ID="lbGroup04" runat="server" Text='<%# Eval("group04") %>' ></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:DropDownList ID="ddGroup04" runat="server"></asp:DropDownList>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Group 05">
                <ItemTemplate>
                    <asp:Label ID="lbGrou05" runat="server" Text='<%# Eval("group05") %>' ></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:DropDownList ID="ddGroup05" runat="server"></asp:DropDownList>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Admin">
                <ItemTemplate>
                    <asp:CheckBox ID="cbAdmin" runat="server" Checked='<%# Convert.ToBoolean(Eval("admin")) %>' Enabled="false" />
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:CheckBox ID="cbAdmin" runat="server" />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Created by">
                <ItemTemplate>
                    <asp:Label ID="lbCreatedBy" runat="server" Text='<%# Eval("createdby") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Last Login">
                <ItemTemplate>
                    <asp:Label ID="lbLastLogin" runat="server" Text='<%# Eval("lastlogin") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Edit" ShowHeader="false">
                <ItemTemplate>
                    <asp:LinkButton ID="btnEdit" runat="server" CommandName="Edit" Text="Edit"></asp:LinkButton>
                    <asp:LinkButton ID="btnDelete" runat="server" CommandName="Delete" Text="Delete"></asp:LinkButton>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:LinkButton ID="btnUpdate" runat="server" CommandName="Update" Text="Update"></asp:LinkButton>
                    <asp:LinkButton ID="btnCancel" runat="server" CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                </EditItemTemplate>
            </asp:TemplateField>
        </Columns>
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="Black" />
        <HeaderStyle BackColor="#507CD1" ForeColor="White" CssClass="size14_text" />
        <PagerStyle BackColor="#2461BF" ForeColor="Black" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#FFFFFF" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
    </asp:GridView>
    <asp:ValidationSummary ID="valSummary" runat="server" CssClass="password_red_fail" /> 
```

后面的代码片段。假设这是人们需要的部分。

```
protected void gvEditUser_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if (e.Row.RowState != null)
        {
            if ((e.Row.RowState & DataControlRowState.Edit) > 0)
            {
                DropDownList ddGroup01 = (DropDownList)e.Row.FindControl("ddGroup01");
                ddGroup01.DataTextField = "association";
                ddGroup01.DataValueField = "association";
                ddGroup01.DataSource = load_group();
                ddGroup01.DataBind();
                ddGroup01.Items.Insert(0, new ListItem());

                DropDownList ddGroup02 = (DropDownList)e.Row.FindControl("ddGroup02");
                ddGroup02.DataTextField = "association";
                ddGroup02.DataValueField = "association";
                ddGroup02.DataSource = load_group();
                ddGroup02.DataBind();
                ddGroup02.Items.Insert(0, new ListItem());

                DropDownList ddGroup03 = (DropDownList)e.Row.FindControl("ddGroup03");
                ddGroup03.DataTextField = "association";
                ddGroup03.DataValueField = "association";
                ddGroup03.DataSource = load_group();
                ddGroup03.DataBind();
                ddGroup03.Items.Insert(0, new ListItem());

                DropDownList ddGroup04 = (DropDownList)e.Row.FindControl("ddGroup04");
                ddGroup04.DataTextField = "association";
                ddGroup04.DataValueField = "association";
                ddGroup04.DataSource = load_group();
                ddGroup04.DataBind();
                ddGroup04.Items.Insert(0, new ListItem());

                DropDownList ddGroup05 = (DropDownList)e.Row.FindControl("ddGroup05");
                ddGroup05.DataTextField = "association";
                ddGroup05.DataValueField = "association";
                ddGroup05.DataSource = load_group();
                ddGroup05.DataBind();
                ddGroup05.Items.Insert(0, new ListItem());

                ddGroup01.SelectedValue = DataBinder.Eval(e.Row.DataItem, "group01").ToString();
                ddGroup02.SelectedValue = DataBinder.Eval(e.Row.DataItem, "group02").ToString();
                ddGroup03.SelectedValue = DataBinder.Eval(e.Row.DataItem, "group03").ToString();
                ddGroup04.SelectedValue = DataBinder.Eval(e.Row.DataItem, "group04").ToString();
                ddGroup05.SelectedValue = DataBinder.Eval(e.Row.DataItem, "group05").ToString();

                CheckBox cbAdmin = (CheckBox)e.Row.FindControl("cbAdmin");

                DataRowView dr = e.Row.DataItem as DataRowView;
                if (Convert.ToBoolean(dr["admin"] = true))
                {
                    cbAdmin.Checked = true;
                }
                else
                {
                    cbAdmin.Checked = false;
                }

            }
        }
    }
}

protected void val_sameDropDown_ServerValidate(object source, ServerValidateEventArgs args)
{
    args.IsValid = !haveSameValue(ddGroup01.SelectedValue, ddGroup02.SelectedValue) &&
                   !haveSameValue(ddGroup01.SelectedValue, ddGroup03.SelectedValue) &&
                   !haveSameValue(ddGroup01.SelectedValue, ddGroup04.SelectedValue) &&
                   !haveSameValue(ddGroup01.SelectedValue, ddGroup05.SelectedValue) &&
                   !haveSameValue(ddGroup02.SelectedValue, ddGroup03.SelectedValue) &&
                   !haveSameValue(ddGroup02.SelectedValue, ddGroup04.SelectedValue) &&
                   !haveSameValue(ddGroup02.SelectedValue, ddGroup05.SelectedValue) &&
                   !haveSameValue(ddGroup03.SelectedValue, ddGroup04.SelectedValue) &&
                   !haveSameValue(ddGroup03.SelectedValue, ddGroup05.SelectedValue) &&
                   !haveSameValue(ddGroup04.SelectedValue, ddGroup05.SelectedValue);
}
protected bool haveSameValue(string first, string second)
{
    if (!string.IsNullOrEmpty(first) & !string.IsNullOrEmpty(second) && first.Equals(second))
    {
        return first.Equals(second);
    }
    return first == null && second == null;
} 
```

谢谢大家。期待回复（喜欢学习这些东西）

干杯，

特伦特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:06:25.260

由于您将无法访问验证方法范围内的 edititem 模板，因此您必须进行一些挖掘以找到各个下拉列表。幸运的是，网格视图的 EditIndex 属性可以帮助您轻松定位控件。您应该然后做这样的事情

**标记**

```
<asp:TemplateField HeaderText="Group 01">
            <ItemTemplate>
                <asp:Label ID="lbGroup01" runat="server" Text='<%# Eval("group01") %>' ></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:DropDownList ID="ddGroup01" runat="server"></asp:DropDownList>
                <asp:RequiredFieldValidator ID="valddGroup01" runat="server" ErrorMessage="Group 01 is required." CssClass="password_red_fail"  OnServerValidate="val_sameDropDown_ServerValidate" ControlToValidate="ddGroup01" Display="None" ></asp:RequiredFieldValidator>
            </EditItemTemplate>
        </asp:TemplateField> 
```

**代码背后**

```
 protected void val_sameDropDown_ServerValidate(object source, ServerValidateEventArgs args)
{
DropDownlist ddGroup01 = (DropDownList)YourGridView.Rows(YourGridView.EditIndex).FindControl("ddGroup01");
//Now you can use the selected value as you wish.

} 
```

让我知道这个是否奏效。

# android - 自定义评分栏？

> ID：14439523
> 
> 赞同：3
> 
> 时间：2013-01-21T13:16:49.423
> 
> 标签：android, android-theme, ratingbar

我有一个布局。我在其中嵌入了一个自定义评分栏：

```
<RatingBar
            android:id="@id/rate"
            style="?android:attr/ratingBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="5.0dip"
            android:isIndicator="true"
            android:max="5"
            android:numStars="5"
            android:progressDrawable="@drawable/ratebar_theme"
            android:stepSize="0.1" /> 
```

它是`ratebar_theme`：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@android:id/background"
        android:drawable="@drawable/star_empty_show"/>

    <item
        android:id="@android:id/secondaryProgress"
        android:drawable="@drawable/star_empty_show"/>

    <item
        android:id="@android:id/progress"
        android:drawable="@drawable/star_filled_show"/>

</layer-list> 
```

`star_empty_show`和都是项目文件夹`star_filled_show`中的文件。以上代码都没有错误，但在选项卡中我看到了这个：`.png``drawable``Graphical layout`

```
Failed to parse file E:\...\res\drawable\ratebar_theme.xml 
```

在`Error Log`我看到这个：

```
 org.xmlpull.v1.XmlPullParserException: Binary XML file line #6: <item> tag requires a 'drawable' attribute or child tag defining a drawable 
```

但是我已经`drawable`为每个项目添加了属性。你知道为什么会发生这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:22:52.807

简单清理您的项目并重新启动您的 Eclipse，希望它能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:41:02.167

尝试这个..

```
<?xml version="1.0" encoding="utf-8"?>
    <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

        <item
            android:id="@+android:id/background"
            android:drawable="@drawable/star_empty_show"/>

        <item
            android:id="@+android:id/secondaryProgress"
            android:drawable="@drawable/star_empty_show"/>

        <item
            android:id="@+android:id/progress"
            android:drawable="@drawable/star_filled_show"/>

    </layer-list> 
```

# c# - 中继器 ItemCommand 事件未触发

> ID：14439525
> 
> 赞同：0
> 
> 时间：2013-01-21T13:16:53.913
> 
> 标签：c#, asp.net, events, event-handling, repeater

我想要当用户单击`Panel`具有`session_box`单击事件触发的类时。但是当我点击它时，什么也没有发生。当我调试代码时，`ItemCommand`甚至没有调用该事件！

这是我的代码：

HTML：

```
<div id="sessions_wrapper">
    <asp:Repeater ID="sessions_repeater" runat="server" 
        DataSourceID="SqlDataSource1" 
        onitemcommand="sessions_repeater_ItemCommand">
        <ItemTemplate>
            <asp:Panel CssClass="session_box" runat="server" data-session-id='<%# Eval("session_id") %>'>
                <asp:Image CssClass="session_icon" runat="server" ImageUrl='<%# Eval("session_cover") %>' alt="" />
                <div class="session_info">
                    <p>Title: <%# Eval("session_name") %></p>
                    <p>Date: <%# Eval("session_date") %></p>
                    <p>Photos: <%# Eval("session_photos") %></p>
                </div>
            </asp:Panel>
        </ItemTemplate>
    </asp:Repeater>                            
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:DBCS %>" 
        ProviderName="<%$ ConnectionStrings:DBCS.ProviderName %>" 
        SelectCommand="SELECT * FROM [sessions]"></asp:SqlDataSource>
</div> 
```

C＃ ：

```
protected void sessions_repeater_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    string sid = ((Panel)e.CommandSource).Attributes["data-session-id"];
    Response.Redirect("sessions.aspx?sid=" + sid);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:33:51.323

大编辑：我认为更简单的方法是添加 ImageButton 而不是 Image 控件。它有两个属性，CommandName 和 CommandArgument。您可以使用它们将参数传递给后面的代码，而无需任何转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:27:32.450

这是因为 Panel 不会引发 Command 事件。Button、ImageButton、LinkBut​​ton 等控件会引发此事件。

您可能需要重新考虑您的 UI 布局以包含某种类型的按钮来引发 Command 事件。

# javascript - 闭包中的 module.exports

> ID：14439529
> 
> 赞同：1
> 
> 时间：2013-01-21T13:17:12.700
> 
> 标签：javascript, node.js

```
var object = {}; // Global Object

(function() {

    var theArg, google, yahoo;

    object.google = function(arg) {
        theArg = arg;
        alert(theArg);
    }

    object.yahoo = function() {
        alert(theArg);
    }

    module.exports = yahoo;

})();

// This will set initial value of 
google("Hello World"); 
```

我可以这样称呼吗`module.exports = yahoo`？`yahoo`并在其他地方调用该函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:26:57.220

您可以使用：

**测试.js**

```
var object = {}; // Global Object

alert = console.log;

(function() {

    var theArg, google, yahoo;

    object.google = function(arg) {
        theArg = arg;
        alert(theArg);
    }

    object.yahoo = function() {
        alert(theArg);
    }

    module.exports.yahoo = object.yahoo;

})();

// This will set initial value of 
object.google("Hello World"); 
```

**main.js**

```
require('./test.js').yahoo(); // Hello World 
```

# c# - 如何在 c# 中使用 InternetSetOption 设置 INTERNET_OPTION_MAX_CONNS_PER_SERVER 选项？

> ID：14439530
> 
> 赞同：0
> 
> 时间：2013-01-21T13:17:13.193
> 
> 标签：c#, .net, internet-explorer, webbrowser-control, internetsetoption

我是 .NET、c# 和 windows 编程的新手。我想增加 .NET Web 浏览器控件可以为每个服务器创建的最大连接数。我发现通过使用 wininet.dll 中的 InternetSetOption 函数更改 INTERNET_OPTION_MAX_CONNS_PER_SERVER 选项，我可以做到这一点。

我已经完成了以下导入。

```
[DllImport("wininet.dll", SetLastError = true, CharSet = CharSet.Auto)]
private static extern bool InternetSetOption(
    IntPtr hInternet,
    int dwOption,
    IntPtr lpBuffer,
    int lpdwBufferLength); 
```

从[msdn](http://msdn.microsoft.com/en-us/library/aa385328%28VS.85%29.aspx)文档中，IntPtr lpBuffer 应该是一个无符号长整数。谁能告诉我如何为 unsigned long int 变量创建 IntPtr。

在 c# 中调用 InternetSetOption 以将最大连接数设置为 50 会有所帮助。

PS：我无法使用 regedit.exe 更改注册表设置来增加连接数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:27:12.820

```
[DllImport("WinInet.dll", CharSet = CharSet.Unicode, ExactSpelling = true, SetLastError = true)]
internal static extern Boolean InternetSetOption
(
    [In] IntPtr hInternet,
    [In] UInt32 dwOption,
    [In] IntPtr lpBuffer,
    [In] UInt32 lpdwBufferLength
); 
```

只需尝试：

```
NativeMethods.InternetSetOption(IntPtr.Zero, INTERNET_OPTION_MAX_CONNS_PER_SERVER, 10, 4); 
```

你不应该在这里需要一个指针。

# mono - 为ARM交叉编译单声道源？

> ID：14439531
> 
> 赞同：6
> 
> 时间：2013-01-21T13:17:15.173
> 
> 标签：mono, arm, cross-compiling

[我正在尝试使用链接http://www.mono-project.com/Mono:ARM#Compiling_on_the_device](http://www.mono-project.com/Mono:ARM#Compiling_on_the_device)中的步骤为 arm 交叉编译 mono-2.10.5 源代码。在我的电脑中安装了暂存盒。大多数人建议将上述链接用于交叉编译单声道。但我做不到。

我对交叉编译的总体思路如下：

1.  需要两个编译阶段。
2.  我电脑中的第一个。
3.  划痕盒内的第二个。
4.  之后需要合并生成的两个安装目录并将其复制到我的手臂板上。

    但我对上述步骤有些怀疑。

**Q** 1.1 在编译的第一阶段（在主机 PC 内）需要什么所有环境参数？？

**Q** 1.2 下面给出的步骤是否可以？

**Q** 1.3 ./configure 有什么要补充的吗？

```
 $ mkdir host-mono

 $ cd host-mono

 $ tar xzf ../mono-1.xx.tar.gz

 $ cd mono-1.xx

 $ ./configure

 $ make

 $ make install DESTDIR=`pwd`/tmptree 
```

在暂存框中的第二阶段：

```
[sbox-ARMEL: ~] > mkdir cross

[sbox-ARMEL: ~] > cd cross

[sbox-ARMEL: ~] > tar xzf ../mono-1.xx.tar.gz

[sbox-ARMEL: ~] > cd arm-mono-1.xx

[sbox-ARMEL: ~] > ./configure --disable-mcs-build

[sbox-ARMEL: ~] > make 

[sbox-ARMEL: ~] > make install DESTDIR=`pwd`/tmptree 
```

**Q** 2.1) 如何进入 arm-mono-1.xx 目录？提取后(tar xzf ../mono-1.xx.tar.gz) 我们只得到mono-1.xx 对吗？

**Q** 2.2) 我需要用“./configure --disable-mcs-build”添加什么配置？

**Q** 2.3）当我尝试使用“./configure --host=arm-none-linux-gnueabi --disable-msc-build ”导致配置：错误：交叉编译时无法运行测试程序。

谁能帮我 ？？

提前致谢

# php - 如何将变量传递给 Drupal 回调？

> ID：14439532
> 
> 赞同：1
> 
> 时间：2013-01-21T13:17:25.007
> 
> 标签：php, drupal, callback, drupal-7, drupal-webform

我从代码中创建了一个如下所示的字段结构，而不是使用 webform UI。我以编程方式执行此操作的原因是因为我有数百个表单，并且我想一劳永逸地执行此操作。

![在此处输入图像描述](../Images/6eeb54ba22fcbaeeca8492a4c10ce2b0.png)

下面是我的代码：

```
for ($i = 0; $i <= 4; $i++) {
            $form['submitted']['file' . $i] = array(
                '#title' => t('File'),
                '#type' => 'managed_file',
                '#description' => t('Please upload a document or image.'),
                '#default_value' => variable_get('file' . $i, ''),
                '#weight' => 100,
               );

                $form['submitted']['remove_name'] = array(
               '#type' => 'submit',
               '#value' => t('Remove'),
               //I NEED A WAY TO PASS $i AS ARGUMENT TO THE CALLBACK
               '#submit' => array('form_remove_attachment'),
               // Since we are removing a name, don't validate until later.
              '#limit_validation_errors' => array(),
);
        } 
```

并在回调下方

```
function form_remove_attachment($i) {

    $form_state['submitted']['file' . $i]--;
   // Setting $form_state['rebuild'] = TRUE causes the form to be rebuilt again.
    $form_state['rebuild'] = TRUE;
} 
```

现在我需要的是每个附件字段的删除按钮，以允许用户改变他们对附加文件的看法。我当然可以通过 JS 添加它，但这样附件不会从 $form_state 中删除。

有人对如何将 $i 传递给回调 form_remove_attachment 有一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:13:29.003

首先`$form['submitted']['remove_name']`，您应该使用类似于 的东西，而不是`$form['submitted']['remove_name' . $i]`，就像您对 所做的那样`$form['submitted']['file' . $i]`。

因为`$form['submitted']['remove_name' . $i]`您可以使用自定义属性，例如`$form['submitted']['remove_name' . $i]['#mymodule_file_id']`. （将 mymodule 替换为您正在使用的模块的短名称。）然后提交表单应使用以下代码。

```
function form_remove_attachment($form, &$form_state) {
  // This is the same value used for #mymodule_file_id for the clicked button.
  $file_id = $form_state['triggering_element']['#mymodule_file_id'];
  // ...
} 
```

作为旁注：

*   managed_file 表单元素不使用 #default_value 属性
*   模块实现的每个功能都应该以模块的短名称为前缀；如果函数是*私有*的，函数名的第一个字符应该是下划线，后跟模块的简称

### 参考

*   [drupal_build_form()](http://api.drupal.org/api/drupal/includes!form.inc/function/drupal_build_form/7)中对`$form_state`键的解释

# javascript - 单击第一页的链接后，如何更改第二页上 div 的背景颜色

> ID：14439533
> 
> 赞同：0
> 
> 时间：2013-01-21T13:17:37.983
> 
> 标签：javascript, html

**单击更改颜色**链接后，我需要使用 javascript 在特定 div 中使用背景颜色更改重定向到 page2.html。

page1.html

```
<a href="page2.html id="page1">Change color</a> 
```

page2.html

```
<div id="page2>
<h1>color change</h1>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:21:53.880

我认为您可以用当前页面的新背景覆盖第一页背景

# android - 如何更改 AlertDialog 标题的颜色及其下方线条的颜色

> ID：14439538
> 
> 赞同：110
> 
> 时间：2013-01-21T13:17:54.913
> 
> 标签：android, android-alertdialog

我使用此命令更改了 AlertDialog 标题的颜色

```
alert.setTitle( Html.fromHtml("<font color='#FF7F27'>Set IP Address</font>")); 
```

但我想改变标题下出现的线条的颜色；我怎样才能做到这一点 ？

注意：我不想使用自定义布局

![所需效果的屏幕截图](../Images/ea2ca8fc6a56bcd6d5e21fbc6a3439b6.png)

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-03-08T02:09:57.107

不幸的是，这并不是一项特别简单的任务。[在我的回答](https://stackoverflow.com/questions/12171209/change-the-line-color-used-in-listseparatortextviewstyle/12172490#12172490)`ListSeparator`中，我详细介绍了如何通过检查 Android 使用的父样式、创建新图像以及基于原始样式创建新样式来调整 a 的颜色。不幸的是，与`ListSeparator`'s 样式不同，`AlertDialog`主题是内部的，因此不能作为父样式引用。没有简单的方法可以改变那条小蓝线！因此，您需要求助于制作自定义对话框。

如果这不是你的一杯茶......**不要放弃！**我很不安，没有简单的方法可以做到这一点，所以我在 github 上建立了一个小项目，用于快速定制全息样式对话框（假设手机支持全息样式）。**您可以在这里找到该项目：[https ://github.com/danoz73/QustomDialog](https://github.com/danoz73/QustomDialog)**

它应该可以轻松地从无聊的蓝色变为令人兴奋的橙色！

![在此处输入图像描述](../Images/d631c06848d66f90976b273981bfeca7.png)

该项目基本上是使用自定义对话框构建器的示例，在示例中，我创建了一个自定义视图，该视图似乎迎合了您在原始问题中给出的 IP 地址示例。

使用`QustomDialog`，为了创建一个带有所需不同颜色的标题或分隔符的基本对话框（标题、消息），您可以使用以下代码：

```
private String HALLOWEEN_ORANGE = "#FF7F27";

QustomDialogBuilder qustomDialogBuilder = new QustomDialogBuilder(v.getContext()).
    setTitle("Set IP Address").
    setTitleColor(HALLOWEEN_ORANGE).
    setDividerColor(HALLOWEEN_ORANGE).
    setMessage("You are now entering the 10th dimension.");

qustomDialogBuilder.show(); 
```

为了添加自定义布局（例如，添加小 IP 地址`EditText`），您添加

```
setCustomView(R.layout.example_ip_address_layout, v.getContext()) 
```

使用您设计的布局发送给构建器（IP 示例可以在 github 中找到）。我希望这有帮助。[非常感谢 Joseph Earl 和他的回答](https://stackoverflow.com/questions/2422562/how-to-change-theme-for-alertdialog/5392617#5392617)。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2014-04-13T12:33:10.093

**分隔线颜色：**

这有点骇人听闻，但对我来说效果很好，并且无需任何外部库即可工作（至少在 Android 4.4 上）。

```
AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
builder.setTitle(R.string.dialog)
       .setIcon(R.drawable.ic)
       .setMessage(R.string.dialog_msg);
//The tricky part
Dialog d = builder.show();
int dividerId = d.getContext().getResources().getIdentifier("android:id/titleDivider", null, null);
View divider = d.findViewById(dividerId);
divider.setBackgroundColor(getResources().getColor(R.color.my_color)); 
```

[您可以在alert_dialog.xml](https://chromium.googlesource.com/android_tools/+/4745ecc25a0a36c24e355ee3e6bd87f63b6a48c7%5E%5E%5E/sdk/platforms/android-16/data/res/layout/alert_dialog.xml)文件中找到更多对话框的 ID 。例如。`android:id/alertTitle`用于更改标题颜色...

**更新：标题颜色**

更改标题颜色的技巧：

```
int textViewId = d.getContext().getResources().getIdentifier("android:id/alertTitle", null, null);
TextView tv = (TextView) d.findViewById(textViewId);
tv.setTextColor(getResources().getColor(R.color.my_color)); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-03-07T14:16:17.120

检查这对你*有用*...

```
public void setCustomTitle (View customTitleView) 
```

您可以从以下链接获得详细信息。

[http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setCustomTitle%28android.view.View%29](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setCustomTitle%28android.view.View%29)

CustomDialog.java

```
Dialog alert = new Dialog(this);
    alert.requestWindowFeature(Window.FEATURE_NO_TITLE);
    alert.setContentView(R.layout.title);
    TextView msg = (TextView)alert.findViewById(R.id.textView1);
    msg.setText("Hello Friends.\nIP address : 111.111.1.111");
    alert.show(); 
```

标题.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Set IP address"
    android:textColor="#ff0000"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<ImageView 
    android:layout_width="fill_parent"
    android:layout_height="2dp"
    android:layout_marginTop="5dp"
    android:background="#00ff00"
    />
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="#775500"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

![在此处输入图像描述](../Images/2af411512a90d4d5861ce4ce44d48110.png)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-05-04T06:06:42.160

这将为标题、图标和分隔线设置颜色。一定会随着任何新的 Android 版本而改变。

```
public static void colorAlertDialogTitle(AlertDialog dialog, int color) {
    int dividerId = dialog.getContext().getResources().getIdentifier("android:id/titleDivider", null, null);
    if (dividerId != 0) {
        View divider = dialog.findViewById(dividerId);
        divider.setBackgroundColor(color);
    }

    int textViewId = dialog.getContext().getResources().getIdentifier("android:id/alertTitle", null, null);
    if (textViewId != 0) {
        TextView tv = (TextView) dialog.findViewById(textViewId);
        tv.setTextColor(color);
    }

    int iconId = dialog.getContext().getResources().getIdentifier("android:id/icon", null, null);
    if (iconId != 0) {
        ImageView icon = (ImageView) dialog.findViewById(iconId);
        icon.setColorFilter(color);
    }
} 
```

请记住在调用此方法之前调用 dialog.show()。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-04-24T20:07:57.883

跟着[Dialog源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/app/Dialog.java)，我发现Title是在Class中[`MidWindow`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/com/android/internal/policy/impl/MidWindow.java)通过inflating[`dialog_title_holo.xml`](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/dialog_title_holo.xml)布局生成的。所以`mTitleView`is`title`的 Id 和 divider 的 Id 是`titleDivider`。

`title`我们可以通过简单地访问 Id `android.R.id.title`。

`titleDivider`并通过以下方式访问 Id`Resources.getSystem().getIdentifier("titleDivider","id", "android");`

我用来改变标题方向和改变颜色的最终代码是：

```
TextView mTitle = (TextView)findViewById(android.R.id.title);
mTitle.setGravity(Gravity.RIGHT|Gravity.CENTER_VERTICAL);
int x = Resources.getSystem().getIdentifier("titleDivider","id", "android");
View titleDivider = findViewById(x);
titleDivider.setBackgroundColor(getContext().getResources().getColor(R.color.some_color)); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-09-05T14:04:33.577

如果你不想要一个“图书馆”，你可以使用这个糟糕的黑客：

```
((ViewGroup)((ViewGroup)getDialog().getWindow().getDecorView()).getChildAt(0)) //ie LinearLayout containing all the dialog (title, titleDivider, content)
.getChildAt(1) // ie the view titleDivider
.setBackgroundColor(getResources().getColor(R.color.yourBeautifulColor)); 
```

这已经过测试并在 4.x 上运行；未经测试，但如果我的记忆力很好，它应该适用于 2.x 和 3.x

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-04-05T07:32:06.217

在 onCreateView 类中，我放了这个：

```
Dialog d = getDialog();
    d.setTitle(Html.fromHtml("<font color='#EC407A'>About</font>"));
    int dividerId = d.getContext().getResources().getIdentifier("android:id/titleDivider", null, null);
    View divider = d.findViewById(dividerId);
    divider.setBackgroundColor(getResources().getColor(R.color.colorPrimary)); 
```

colorPrimary 链接到存储所有颜色的 colors.xml 文件。还`d.setTitle`提供了一种设置标题颜色的 hacky 方法。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-11-19T10:05:14.747

这是另一种解决方案（基于建议的答案），它在一个类中处理对话框的样式，而无需担心更改样式时对话框的状态 - 对话框可能已经显示或刚刚初始化。

使用示例：

```
AlertDialog.Builder builder = new AlertDialog.Builder(context);
AlertDialog dialog = builder.create(); //or builder.show()
DialogViewDecorator.decorate(dialog, android.R.color.holo_red_light); //can also set the defaut color in the class 
```

执行：

```
public class DialogViewDecorator {

private static final
@ColorRes int DEFAULT_TITLE_DIVIDER_COLOR = android.R.color.holo_orange_light;

public static void decorate(Dialog dialog) {
    decorate(dialog, DEFAULT_TITLE_DIVIDER_COLOR);
}

/**
 * Sets the title divider color when the view is shown by setting DialogInterface.OnShowListener on the dialog.
 * <p/>
 * If you want to do other things onShow be sure to extend OnDecoratedDialogShownListener(call super.show(...)!)
 * and call {@link #decorate(Dialog, int, OnDecoratedDialogShownListener)}.
 *
 * @param dialog
 * @param titleDividerColor
 */
public static void decorate(Dialog dialog, final int titleDividerColor) {
    decorate(dialog, titleDividerColor, new OnDecoratedDialogShownListener(titleDividerColor));
}

/**
 * Method for setting a extended implementation of OnDecoratedDialogShownListener. Don't forget to call super
 * or the titleDividerColor wont be applied!
 *
 * @param dialog
 * @param titleDividerColor
 * @param OnShowListener
 * @param <T>
 */
public static <T extends OnDecoratedDialogShownListener> void decorate(Dialog dialog, int titleDividerColor, T OnShowListener) {
    if (dialog == null || titleDividerColor <= 0) { return; }

    if (dialog.isShowing()) {
        setTitleDividerColor(dialog, titleDividerColor);
    } else {
        dialog.setOnShowListener(OnShowListener);
    }
}

private static void setTitleDividerColor(DialogInterface dialogInterface, int titleDividerColor) {
    try {
        Dialog dialog = (Dialog) dialogInterface;
        int dividerId = dialog.getContext().getResources().getIdentifier("android:id/titleDivider", null, null);
        View divider = dialog.findViewById(dividerId);
        if (divider != null) {
            divider.setBackgroundColor(dialog.getContext().getResources().getColor(titleDividerColor));
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public static class OnDecoratedDialogShownListener implements DialogInterface.OnShowListener {
    private int titleDividerColor;

    public OnDecoratedDialogShownListener() {
        this.titleDividerColor = DEFAULT_TITLE_DIVIDER_COLOR;
    }

    public OnDecoratedDialogShownListener(int titleDividerColor) {
        this.titleDividerColor = titleDividerColor;
    }

    @Override
    public void onShow(DialogInterface dialogInterface) {
        setTitleDividerColor(dialogInterface, titleDividerColor);
    }
}} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-21T13:28:22.083

如果您正在为警报对话框创建自定义布局

那么您可以像这样轻松添加以更改颜色

```
<LinearLayout
    android:id="@+id/DialogTitleBorder"
    android:layout_width="fill_parent"
    android:layout_height="1dip"
    android:layout_below="@id/mExitDialogDesc"
    android:background="#4BBAE3"            <!--change color easily -->
    >

</LinearLayout> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-01-21T14:31:54.607

如果您使用**自定义标题布局**，那么您可以像这样使用它 `alertDialog.setCustomTitle(customTitle);`

**例子**

在 UI 线程上使用对话框，如：

```
 LayoutInflater inflater = LayoutInflater.from(getApplicationContext());
 View customTitle = inflater.inflate(R.layout.customtitlebar, null);
 AlertDialog.Builder d = new AlertDialog.Builder(this);
 d.setCustomTitle(customTitle);
 d.setMessage("Message");
 d.setNeutralButton("OK", null);
 d.show(); 
```

自定义标题栏.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="#525f67">

    <ImageView
        android:id="@+id/icon"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:src="@drawable/ic_launcher"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true" >
    </ImageView>

    <TextView
        android:id="@+id/customtitlebar"
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:textColor="#ffffff"
        android:text="Title Name"
        android:padding="3px"
        android:textStyle="bold" 
        android:layout_toRightOf="@id/icon"
        android:layout_alignParentTop="true"
        android:gravity="center_vertical"/>

     <ImageView
        android:layout_width="match_parent"
        android:layout_height="2dp"
        android:background="#ff0000" 
        android:layout_below="@id/icon"><!-- This is line below the title -->
    </ImageView>

</RelativeLayout> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-07-17T08:47:20.647

```
 ForegroundColorSpan foregroundColorSpan = new ForegroundColorSpan(Color.BLACK);

    String title = context.getString(R.string.agreement_popup_message);
    SpannableStringBuilder ssBuilder = new SpannableStringBuilder(title);
    ssBuilder.setSpan(
            foregroundColorSpan,
            0,
            title.length(),
            Spanned.SPAN_EXCLUSIVE_EXCLUSIVE
    );

AlertDialog.Builder alertDialogBuilderUserInput = new AlertDialog.Builder(context);
alertDialogBuilderUserInput.setTitle(ssBuilder) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-01-10T18:01:01.747

从这个答案继续：[https://stackoverflow.com/a/15285514/1865860](https://stackoverflow.com/a/15285514/1865860)，我从@daniel-smith 分叉了不错的github repo并做了一些改进：

*   改进的示例活动
*   改进的布局
*   固定`setItems`法
*   将分隔线添加到`items_list`
*   单击时关闭对话框
*   支持`setItems`方法中的禁用项
*   `listItem`触摸反馈
*   可滚动的对话框消息

链接：[https ://github.com/dentex/QustomDialog](https://github.com/dentex/QustomDialog)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-04-19T09:20:04.733

不要在对话框中使用分隔线，而是在自定义布局中使用视图并将布局设置为对话框中的自定义布局。

custom_popup.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayoutxmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content">

    <com.divago.view.TextViewMedium
        android:id="@+id/txtTitle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:paddingBottom="10dp"
        android:paddingTop="10dp"
        android:text="AlertDialog"
        android:textColor="@android:color/black"
        android:textSize="20sp" />

    <View
        android:id="@+id/border"
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:layout_below="@id/txtTitle"
        android:background="@color/txt_dark_grey" />

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/border"
        android:scrollbars="vertical">

        <com.divago.view.TextViewRegular
            android:id="@+id/txtPopup"
            android:layout_margin="15dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </ScrollView>
</RelativeLayout> 
```

活动.java：

```
public void showPopUp(String title, String text) {

    LayoutInflater inflater = getLayoutInflater();
    View alertLayout = inflater.inflate(R.layout.custom_popup, null);

    TextView txtContent = alertLayout.findViewById(R.id.txtPopup);
    txtContent.setText(text);

    TextView txtTitle = alertLayout.findViewById(R.id.txtTitle);
    txtTitle.setText(title);

    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setView(alertLayout);
    alert.setCancelable(true);

    alert.setPositiveButton("Done", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            dialog.dismiss();
        }
    });

    AlertDialog dialog = alert.create();
    dialog.show();
} 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-07-19T05:44:33.957

如果您使用扩展对话框，请使用：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

# c# - 为什么我在使用时会出现内存不足错误？

> ID：14439549
> 
> 赞同：9
> 
> 时间：2013-01-21T13:18:35.147
> 
> 标签：c#, using, memorystream

我有以下方法，将 a 转换`BitmapImage`为 a `System.Drawing.Bitmap`：

```
public static Bitmap BitmapImageToBitmap(BitmapImage bitmapImage)
{
    Bitmap bitmap;

    using (var ms = new MemoryStream())
    {
        var encoder = new JpegBitmapEncoder();
        encoder.Frames.Add(BitmapFrame.Create(bitmapImage));
        encoder.Save(ms);

        bitmap = new Bitmap(ms);
    }

    return bitmap;
} 
```

每当我尝试使用返回的 Bitmap 对象时，都会收到以下错误：

> 发生 OutOfMemoryException - 内存不足。

但是，每当我用这个替换代码时：

```
public static Bitmap BitmapImageToBitmap(BitmapImage bitmapImage)
{
    var ms = new MemoryStream();

    var encoder = new JpegBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(bitmapImage));

    encoder.Save(ms);

    return new Bitmap(ms);
} 
```

这工作正常。但是，我很确定我应该使用**using**作为`MemoryStream`对象 implements `IDisposable`。这里发生了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T13:21:19.367

Bitmap 的构造函数[Bitmap Constructor (Stream)](http://msdn.microsoft.com/en-us/library/z7ha67kw.aspx)声称

> 您必须在位图的生命周期内保持流打开。

在您的情况下，当您使用`using`语句时，流（被 Disposable）自动处置，因此您的 Bitmap 对象变得无效。这不是关于你分配太多内存，而是关于那个位图指向 - 不再存在的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:28:22.180

@Tigran**所说**的绝对正确，我实现**了 @CodesInChaos**的解决方法，如下所示：

```
public static Bitmap BitmapImageToBitmap(BitmapImage bitmapImage)
{
    Bitmap bitmap;

    using (var ms = new MemoryStream())
    {
        var encoder = new JpegBitmapEncoder();
        encoder.Frames.Add(BitmapFrame.Create(bitmapImage));
        encoder.Save(ms);

        using (var localBitmap = new Bitmap(ms))
        {
            bitmap = localBitmap.Clone(new Rectangle(0, 0, localBitmap.Width, localBitmap.Height),
                   PixelFormat.Format32bppArgb);  
        }
    }

    return bitmap;
} 
```

# prolog - 序言中的四骑士拼图

> ID：14439550
> 
> 赞同：1
> 
> 时间：2013-01-21T13:18:36.030
> 
> 标签：prolog, puzzle

问题是在 3x3 棋盘中用两个白骑士交换 2 个黑骑士位置，请参阅链接[http://www.puzzles.com/puzzleplayground/FourKnights/FourKnights.htm](http://www.puzzles.com/puzzleplayground/FourKnights/FourKnights.htm) 我必须让 Prolog 给我至少一个解决方案，在这些步骤之后，我完全迷失了。

```
%mouvement possibilities
mouv(2,1).
mouv(-2,1).
mouv(2,-1).
mouv(-2,-1).
mouv(1,2).
mouv(-1,2).
mouv(1,-2).
mouv(-1,-2).
%conditions for valid mouvement

%not going out of the small chessboard
pos(X,Y):- X<4 ,X>0,Y<4,Y>0.

%free position
%????????

%initial positions
kgt(b,3,1).
kgt(b,3,3).
kgt(w,1,3).
kgt(w,1,1).
%mouv knight

%??? 
```

接下来我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:05:05.277

一种简单（且效率低下）的方法可以对棋子应用有效的移动，并迭代直到出现所需的位置。当然，我们应该避免重复已经访问过的位置，因为这会导致无限循环。

然后我们需要一种方法来表示这个搜索空间。板列表是显而易见的选择。

一个棋盘可以是一个排序的棋子列表，在查看我们是否到达目标位置时很方便，并且移动后的棋盘还没有被访问过。

```
puzzle :-
  setof(kgt(C,X,Y), kgt(C,X,Y), InitialBoard),
  apply_moves([InitialBoard], Boards),
  maplist(writeln, Boards).

apply_moves([Board|Visited], Solution) :-
  move_knight(Board, Moved),
  not_visited(Moved, Visited),
  Next = [Moved,Board|Visited],
  (  is_target(Moved)
  -> Solution = Next
  ;  apply_moves(Next, Solution)
  ).

move_knight(Board, Moved) :-
  select(kgt(C,X,Y), Board, B1),
  ...

is_target(Board) :-
  ...

not_visited(Moved, Visited) :-
  \+ memberchk(Moved, Visited). 
```

看看你是否可以填写省略号。

# jquery - 动态内容引导弹出框

> ID：14439551
> 
> 赞同：1
> 
> 时间：2013-01-21T13:18:36.920
> 
> 标签：jquery, twitter-bootstrap, popover

我正在使用`Bootstrap popover`. 一切正常。我`div`在弹出窗口上显示。在这里，我[创建了 js fiddle](http://jsfiddle.net/rK34t/5/)。现在我该如何替换`title`and `contents`？谢谢

编辑：我也无法点击`Show details`按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:16:32.043

您无法单击显示详细信息按钮的原因是由于您使用了悬停，您应该恢复使用单击或在悬停效果消失之前设置延迟：

```
$('#popover').popover({
    delay: { show: 100, hide: 500 }
}); 
```

我建议为您要显示的每个项目创建一个单独的弹出链接，例如，请参阅[更新的 jsfiddle](http://jsfiddle.net/rK34t/9/)。另一种选择是使用 jquery 为每次单击弹出链接更改 div 的文本。

# encryption - 加密：“DES”和“PBKDF2WithHmacSHA1”

> ID：14439555
> 
> 赞同：-6
> 
> 时间：2013-01-21T13:18:43.163
> 
> 标签：encryption, des

我可以使用带有“DES”加密的“PBKDF2WithHmacSHA1”算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:25:04.263

您可能正在使用`PBKDF2WithHmacSHA1`生成 128 位或更多位的密钥，`DES`由于它使用 56 位密钥，因此无法使用。

我不知道您尝试使用哪种语言生成密钥，但应该有一个参数来指定密钥长度。确保将其指定为输出 56 位密钥。

DES 的 56 位密钥长度也是您不应该使用 DES 的原因。您的密钥将在一天内被暴力破解。使用 AES。

# xml - AS3：XML 变量使用

> ID：14439557
> 
> 赞同：1
> 
> 时间：2013-01-21T13:18:53.367
> 
> 标签：xml, actionscript, parent

我正在使用 XML 在 Flash 游戏中存储某些默认变量。在我的主类中访问这些变量很容易，因为我可以实例化并加载一个 XML 变量（在本例中为`defaultXML`），然后执行`defaultScore = defaultXML.defaults.score.@value;`或类似的操作。但是，如果我想从子类中检索该数据，我必须使用`defaultScore = MovieClip( this.parent ).defaultXML.defaults.score.@value;`. 当我在孙辈班级时，它变得更加混乱，因为我什至不知道有一种方法可以从祖父母那里检索值。

在 Actionscript 中从 XML 文件中检索值的好方法是什么？我应该继续做我正在做的事情，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:39:08.557

您可以简单地通过链接调用来访问祖父母对象`parent`以达到您需要的级别：

```
MovieClip( this.parent.parent.parent ).defaultXML.defaults.score.@value; 
```

当您将代码添加到在时间轴上手动制作的现有影片剪辑中时，这是一种让事情正常工作的简单方法，但如果嵌套影片剪辑的结构发生变化，它很容易中断。

另一种方法是将 xml 存储为全局对象，以便可以从时间轴层次结构上的任何位置访问它。

```
global.defaultScore = defaultXML 
```

当您需要在简单的应用程序中将代码添加到时间线时，这些是快速简便的技术。在更高级的应用程序中，所有代码都只存在于类中，然后面向对象技术是在需要的地方传递 xml 数据的方式。

# ios - 使我的 UIView 可滚动

> ID：14439559
> 
> 赞同：3
> 
> 时间：2013-01-21T13:19:04.240
> 
> 标签：ios, xcode, uiview, uiscrollview

我知道我必须在我的 UIView 中插入一个 UIScrollView，并在我的 viewLoad 中放入我的 IBOutlet UIScrollView 的 sizeContent，但我有一些疑问，因为它对我不起作用，我想我缺少一些信息。

我的 UIView 大小是 320x678，所以我需要垂直向下/向上滚动，我用谷歌搜索了一些方法，但总是崩溃或不起作用，我将目标部署到 iOS 4.3，以便我的应用程序适用于所有 iOS >= 4.3，我在这一点上需要帮助澄清我的想法......

我应该从头到尾采取哪些步骤？并且滚动视图应该在所有控制器的前景或背景上？

编辑：我这样做了....

```
|-button-||-imgview-||-button-| |-some-|
|-------scrollview content size--------|  Size = 320x678
|--------------scrollview--------------|  Size = 320x678
|----------------view------------------|  Size = 320x678 
```

这可能是我的错误，但是，为什么我不能让我的 iPhone 可滚动？

```
|-----iPhone screen-----|
|-------------My app------------| 
```

如果我不做任何滚动的技巧，我不会看到比我的 iPhone 屏幕更多的东西，那么这种“问题”就没有任何自动滚动？或者我必须按照你告诉我的去做？

因为现在我的问题是我必须重建我的 .xib 而我真的不明白如何去做，我理解但不知道如何去做的理论。

编辑2：

我按照你的理论解决了。

```
1.- I created a Iphone screen 3.5
2.- I created an auxiliar view with freeform and adapted to 320x678
3.- I designed my 320x678 view
4.- In my main .xib I added my scroll IBOutlet and in the IB then linked.
5.- On my loadview I added the sizecontent
6.- I dragged to my 3.5 screen all the content from my auxiliar window.. then I deleted the auxiliar window. 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T13:23:44.793

我认为你的滚动视图想法是错误的。

为了使用滚动视图，您将其添加到不滚动的视图中。即`yourViewController.view`。然后将内容添加到您的并`scrollView`设置`contentSize`.`scrollView`

`ScrollView`包含自己的滚动视图。

IE

```
|-button-|     |-button-|    |--label--|
|-------scrollview content size--------|  Size = 320x678
|--scrollview----|   Size = 320x480
|------view------|   Size = 320x480 
```

这将显示一个半按钮，但允许您滚动，以便您也可以看到标签。

我希望这是有道理的。

# perl - 如何根据某些条件使用 perl 跳过 CSV 文件中的特定行

> ID：14439561
> 
> 赞同：-3
> 
> 时间：2013-01-21T13:19:10.747
> 
> 标签：perl, csv

```
while(my $line=<$data>)
    {
        chomp $line;
        my @fields   = split ",",$line;
        my $type = $fields[2];
        if($type eq "CHILD")
        {
        next;
        }    
        # some code
    } 
```

我正在尝试跳过第三列值为 CHILD 的行。但我无法这样做。我正在从 .csv 文件中读取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:21:23.910

打印调试语句是非常 Perl 要做的事情。请注意

`print "DEBUG type[$type]\n";`以下。

因此，请尝试以下操作：

```
while(my $line=<$data>) {
    chomp $line;
    my @fields = split /,/, $line;
    my $type = $fields[2];
    print "DEBUG type[$type]\n";
} 
```

请使用 DEBUG 行编辑您的原始 POST...

# linux - 在这些情况下 TCP 会自动关闭套接字吗

> ID：14439567
> 
> 赞同：0
> 
> 时间：2013-01-21T13:19:41.710
> 
> 标签：linux, sockets, tcp

我们正在使用 C/S 在 linux 上开发一个网络应用程序，最近我们发现当有大量 UDP 和 TCP 数据通过带宽传输时，一些打开和连接的套接字上的写入/读取可能会失败，看起来套接字是因不明原因关闭。

问题来了，请告诉我TCP是否会自动关闭套接字。

1.  假设有发送方和接收方，发送方通过 TCP 非阻塞套接字向接收方发送大量数据。并假设应用程序本身和其他应用程序在带宽上有大量流量。如果带宽完全部署，发送方没有任何机会发送数据，那么 TCP 会在一段时间后自动关闭套接字吗？如果是，时间价值是多少？

2.  假设问题 1 的带宽没有完全部署，发送方可以成功将数据传递给接收方。但是如果接收方没有读取数据并且在一段时间后缓冲区会填满，那么 TCP 会在几小时内自动关闭套接字吗？

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:08:09.853

我从未听说过 TCP 套接字会自动关闭，所以我怀疑是这种情况。如果发送方无法发送任何数据，它只会等待并重试。套接字关闭的唯一原因是，如果发送方多次尝试发送数据，但不能，然后**显式**关闭套接字。如果发送方有足够的带宽来发送数据，但接收方缺乏接收数据的带宽，协议本身将重新发送数据并确保数据正确到达（参见[Wikipedia](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Data_transfer)）。

至于#2，也来自维基百科（正如 ott 提到的）：

> 当接收方通告窗口大小为 0 时，发送方停止发送数据并启动持久计时器。持久计时器用于保护 TCP 免受死锁情况的影响，如果来自接收方的后续窗口大小更新丢失，并且发送方在接收到来自接收方的新窗口大小更新之前无法发送更多数据，则可能会出现死锁情况。当持续计时器到期时，TCP 发送方通过发送一个小数据包来尝试恢复，以便接收方通过发送另一个包含新窗口大小的确认来响应。

因为 TCP 有这个系统来确定要发送多少数据，所以我假设 TCP 连接总是可以接受一个更新数据包。在缓冲区仍然满的情况下，接收器将继续广播大小为 0 的窗口。除非某个软件在 X 重复“0 窗口大小”后明确关闭套接字，否则套接字没有理由关闭.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:23:05.327

尽管主机的 TCP 实现可能不会使连接超时，即使很长一段时间没有活动（但请注意，存在一些 TCP 选项来处理和控制该行为，例如[RFC 5482: TCP User Timeout Option](https://www.rfc-editor.org/rfc/rfc5482)），大多数网络设备（路由器、NAT 盒、防火墙等）有一些超时策略，空闲连接将被终止。某些设备的超时值短至 5 分钟。

因此，如果您使用 UDP 泛洪您的网络连接，则同时的 TCP 连接可能无法获取单个数据包，从而导致路由器终止连接。

虽然 TCP 试图表现良好并防止网络链接泛滥，但 UDP 根本不在乎。因此，如果您可以控制 UDP 流量的行为（在应用程序或我的网络质量控制工具中），那将对您的 TCP 流量有很大帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-11T12:19:08.013

我在我的案例中看到过（C Linux，非阻塞套接字中的内核 3.2），当在 recv 函数中接收到零字节并且当我在 send -> errno = 对等方重置连接时出现错误时，套接字会自动关闭。我认为还有其他情况（当程序在 recv 和 send 函数中接收到某种特定类型的错误时）。我希望这对你有用。

# mysql - MySql插入重复键

> ID：14439568
> 
> 赞同：2
> 
> 时间：2013-01-21T13:19:43.847
> 
> 标签：mysql

我有一个名为“csv_db”的数据库和一个名为“reportinc”的表。

该表具有以下列：

`ID incidente`, `Aperto da`, `Stato`, `Categoria`, `Area`, `Sottoarea`, `Titolo`, `Priorità`, `Data/ora apertura`, `Data/Ora risoluzione`, `Data/ora chiusura`, `Inizio Interruzione di servizio`, `Fine interruzione di servizio`, `Conteggio riassegnazioni`, `Gruppo di assegnazione`, `Assegnatario`, `Risolto da`, `Gruppo risoluzione`, `Chiuso da`, `Gruppo di chiusura`, `ID interazione`, `Id Remedy`, `Descrizione`, `Soluzione`, `Servizio Interessato`, `Servizi Interessati`, `CI interessato`, `CI operativo`,`Ultimo aggiornamento da`

主键和唯一键是`ID incidente`

我需要每天从 .CSV（逗号分隔）导入，并且：

1.  插入具有新值的新行（`ID incident`也）
2.  更新列表中的现有行（如果存在）。

如果重复，我需要更新行，而不是追加。

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:52:00.290

# android - 进入全屏时处理活动调整大小

> ID：14439570
> 
> 赞同：6
> 
> 时间：2013-01-21T13:19:51.657
> 
> 标签：android

在我的 Android 应用程序中，当我使用以下代码切换到全屏模式时：

```
this.getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

通过隐藏顶部的通知栏，屏幕进入全屏状态。通知栏在可见空间之外动画化，但活动突然扩展。在通知栏隐藏期间，空间被白色区域占据。当通知隐藏完成时，活动会调整大小。

如何让活动随动画展开？为此，要回答的问题是如何处理在这种情况下更改的活动大小？

我已经尝试处理 onConfigurationChanged() - 没有命中（在 android:configChanges 中为清单中的我的活动提供 screenSize 之后）

隐藏操作栏时也会发生同样的事情。操作栏隐藏动画，在其后面留下空白区域。当它完成后，活动就很适合混蛋！啊！

# app-store - App Store 应用名称区分标点符号？

> ID：14439571
> 
> 赞同：0
> 
> 时间：2013-01-21T13:19:55.580
> 
> 标签：app-store

如果两个应用程序的标点符号不同，它们的名称是否不同？例如：

*   我的应用
*   我的应用程序！

那些会被认为是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:27:43.443

答案是肯定的，它们是不同的。不，他们不一样

# javascript - 如何使用户能够有效地将 indexedDB 对象存储的内容保存到文件中？

> ID：14439573
> 
> 赞同：10
> 
> 时间：2013-01-21T13:19:59.913
> 
> 标签：javascript, html, indexeddb

我在 IndexedDB 中存储了大量的小对象。我想让用户能够将其中一个对象存储导出到他们可以“下载”的文件中。

我已经阅读[了这篇博客文章](http://www.raymondcamden.com/index.cfm/2012/8/23/Proof-of-Concept--Build-a-download-feature-for-IndexedDB)。其中描述了读取数据、读取`JSON.stringify`数据、使用 对其进行编码`encodeURIComponent`以及将其放置为`href`可用于下载数据的链接。像这样的东西：

```
var transaction = db.transaction([objectstore], "readonly");
var content = [];
var objectStore = transaction.objectStore(objectstore);

objectStore.openCursor().onsuccess = function(event) {
    var cursor = event.target.result;
    if (cursor) {
        content.push({key:cursor.key,value:cursor.value});
        cursor.continue();
    }
}; 

transaction.oncomplete = function(event) {
    var serializedData = JSON.stringify(dataToStore);
    link.attr("href",'data:Application/octet-stream,'+encodeURIComponent(serializedData));
    link.trigger("click");
}; 
```

这很好，除了对象存储将有数百万条记录，而且我觉得这还不够高效。有没有办法更直接地允许用户将对象存储另存为文件（以我可以通过网页再次导入的方式）。

* * *

**编辑**从评论中的一些注释中，我重写了一些它是如何工作的，以便从中获得更多的汁液。新代码类似于：

```
var transaction = db.transaction([objectstore], "readonly");
var objectStore = transaction.objectStore(objectstore);

objectStore.getAll().onsuccess = function(evt) {
    var url = window.URL.createObjectURL(new Blob(evt.target.results, {'type': 'application/octet-stream'}));
    link.attr('href', url);
    link.trigger('click');
}; 
```

这会给我这样的结果：

*   10k 条记录，975.87ms 平均导出时间
*   100k 条记录，5,850.10ms 平均导出时间
*   100 万条记录，平均导出时间为 56,681.00 毫秒

如您所见，导出 100 万条记录大约需要一分钟。有没有更好的方法来做到这一点？（我也尝试使用游标代替`.getAll()`，但游标速度较慢）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T23:01:30.067

[IDBObjectStore.getAll](https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB#Using_a_cursor)不是 IndexedDB 标准的一部分，它在幕后使用游标。

> 注意：Mozilla 还实现了 getAll() 来处理这种情况（以及 getAllKeys()，它目前隐藏在 about:config 中的 dom.indexedDB.experimental 首选项后面）。这些不是 IndexedDB 标准的一部分，因此将来可能会消失。我们将它们包括在内是因为我们认为它们很有用。下面的代码和上面做的完全一样：
> 
> ```
> objectStore.getAll().onsuccess = function(event) {
>   alert("Got all customers: " + event.target.result);
> }; 
> ```
> 
> 查看游标的 value 属性会带来性能成本，因为对象是惰性创建的。例如，当您使用 getAll() 时，Gecko 必须一次创建所有对象。例如，如果您只对查看每个键感兴趣，则使用游标比使用 getAll() 更有效。但是，如果您尝试获取对象存储中所有对象的数组，请使用 getAll()。

获取不知道密钥的记录的唯一方法是使用游标。所以不，我认为没有更好的方法。但是您需要问自己这是否比从服务器获取记录更快。

# matlab - 用零替换所有NaN而不循环整个矩阵？

> ID：14439582
> 
> 赞同：10
> 
> 时间：2013-01-21T13:20:38.900
> 
> 标签：matlab

我有一个想法，通过循环遍历每个 NaN 并使用 isnan 来替换矩阵中的所有 NaN。但是，我怀疑这会使我的代码运行得比它应该运行的更慢。有人可以提供更好的建议吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-21T13:25:05.440

假设您的矩阵是：

```
A = 
     NaN   1       6
     3     5     NaN
     4     NaN     2 
```

您可以`NaN`使用以下方法找到元素并将它们替换为零[`isnan`](http://www.mathworks.com/help/matlab/ref/isnan.html)：

```
A(isnan(A)) = 0; 
```

那么你的输出将是：

```
A =
     0     1     6
     3     5     0
     4     0     2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T13:24:36.720

如果`x`是您的矩阵，则使用该`isnan`函数来索引数组：

```
x( isnan(x) ) = 0 
```

如果您分两步执行此操作，则可能会更清楚地看到发生了什么。首先创建一个真/假值数组，然后使用它将选定元素设置为零。

```
bad = isnan(x);
x(bad) = 0; 
```

这是非常基本的东西。您最好阅读一些有关 MATLAB 的在线教程以加快速度。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-21T13:25:08.983

该函数`isnan`是矢量化的，意思是：

```
>> A = [[1;2;NaN; 4; NaN; 8], [9;NaN;12; 14; -inf; 28 ]]
A =
     1     9
     2   NaN
   NaN    12
     4    14
   NaN  -Inf
     8    28

>> A(isnan(A)) = 0
A =
     1     9
     2     0
     0    12
     4    14
     0  -Inf
     8    28 
```

# sql - vb.net 使用 vb.net 更新查询

> ID：14439584
> 
> 赞同：0
> 
> 时间：2013-01-21T13:20:47.030
> 
> 标签：sql, vb.net, sql-update, sql-server-2008r2-express

在 vb.net 应用程序中运行的 sql 更新查询中，我将某些列的数据更新到 sql 数据表，这是代码

```
dim cnn = New SqlConnection(connetionString)
Dim q As New SqlCommand("UPDATE products SET rank=@rank,rankchange=@rankchange,PD=@PD,PDP=@PDP,TPD=@TPD where catalogid=@catalogid",cnn)
cnn.Open()
For i = 0 To mainDatatable.Rows.Count - 1
 q.Parameters.Add(New SqlParameter("@rank", mainDatatable.Rows(i)("rank")))
 q.Parameters.Add(New SqlParameter("@rankchange", mainDatatable.Rows(i)("rankchange")))
 q.Parameters.Add(New SqlParameter("@PD", mainDatatable.Rows(i)("PD")))
 q.Parameters.Add(New SqlParameter("@PDP", mainDatatable.Rows(i)("PDP")))
 q.Parameters.Add(New SqlParameter("@TPD", mainDatatable.Rows(i)("TPD")))
 q.ExecuteNonQuery()
 q.Parameters.Clear()
Next 
```

我有 2 个问题

1.  考虑到该表有大约 60k 条记录，它的运行速度很慢
2.  如果我的数据表应用程序中的 a 值为 NULL，那么我想将其更新为 NULL，最好的方法是什么？我尝试了类似以下的方法

If IsDBNull(mainDatatable.Rows(i)("rank")) Then q.Parameters.Add(New SqlParameter("@rank", "NULL")) Else q.Parameters.Add(New SqlParameter("@rank", mainDatatable.Rows(i)("rank"))) End If

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:33:02.450

回答 (1) 速度问题...

如果您确实有 60K+ 更改要处理，则不需要执行 60K 更新语句。我会将 60K 记录上传到临时表并调用存储过程在真实表和临时表之间执行 UPDATE FROM...INNER JOIN 语句。如果您不想重写已有的内容，另一个可能的想法是过滤掉数据表中没有被污染的任何行。如果没有变化，那么就没有理由发送这些更新声明......

关于（2）这里是语法......

这应该适用于您将 NULL 值作为 SqlParameters 发送。

```
If mainDatatable.Rows(i)("rank") = DBNull.Value Then
  q.Parameters.Add(New SqlParameter("@rankchange", SqlDbType.Int, 4) With { .Value = DBNull.Value })
Else
  q.Parameters.Add(New SqlParameter("@rankchange", SqlDbType.Int, 4) With { .Value = mainDatatable.Rows(i)("rank") })
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:32:33.510

编写以下代码行`q.Parameters.Add(New SqlParameter("@rank", "NULL"))`不会产生空条目，而是将其`Null`视为字符串。
你可以尝试的是这个。

```
q.Parameters.Add(new SqlParameter() { 
        ParameterName="@test",
        IsNullable=true,
        Value=DBNull.Value
    }); 
```

# android - 最佳实践 phonegap 架构

> ID：14439585
> 
> 赞同：5
> 
> 时间：2013-01-21T13:20:51.090
> 
> 标签：android, model-view-controller, cordova, jquery-mobile, architecture

我正在尝试使用phonegap applicaion，但我真的不知道如何构建架构。

我尝试了一种 MVC 模型，它带有一个用于控制器的大 js，一个带有 ajax 请求的 js 文件，用于从服务器（模型）获取信息。

对于视图，我使用带有标题和标题的主布局。

我使用 JQuery 中的负载更新我的内容。

我在使用这个系统时遇到了一些问题，例如上一个按钮关闭应用程序，因为我总是使用相同的页面。当我旋转屏幕时，我回到第一个屏幕，因为页面已刷新。

我想知道您是否有一些解决方案或一些代码示例以开始良好的基础

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:32:13.667

这取决于你想改变你当前的项目多少。

如果您不介意进行完整的应用程序改造，请考虑将 Phonegap 与[jQuery Mobile](http://jquerymobile.com/) + [Backbone.js](http://backbonejs.org/)或 Phonegap 与[Kendo UI](http://www.kendoui.com/)一起使用。您已经说过 jQuery 用于内容加载，因此跳转到 jQuery Mobile 不会有那么大的问题。

您仍然可以将 MVC 原则与[主干](http://backbonejs.org/).js 一起使用，并且[jQuery Mobile](http://jquerymobile.com/)将处理页面处理/转换/UI。如果您创建太复杂的应用程序，此解决方案的唯一问题是可能的性能问题。但无论您是从头开始创建所有内容还是因为您使用的是 UI 框架，这都会发生在您身上。

如果您愿意尝试一下，请查看我对相关问题的其他答案：

1.  框架和一些关于它们的东西：[https ://stackoverflow.com/a/14166593/1848600](https://stackoverflow.com/a/14166593/1848600)
2.  Phonegap + jQuery Mobile 教程：[https ://stackoverflow.com/a/14375842/1848600](https://stackoverflow.com/a/14375842/1848600)

虽然 Phonegap + jQuery Mobile 远不是完美的组合，但它仍然是最好的组合之一，它将为您节省大量时间。

**编辑 ：**

当您使用 jQuery Mobile 时，如果您使用以下命令，您可以拥有一个持久的页眉和页脚：

```
...data-position="fixed" data-id="footer"... 
```

在他们两个。

这是我关于这个问题的“如何做”文章：[https ://stackoverflow.com/a/14417307/1848600](https://stackoverflow.com/a/14417307/1848600)

这是一个工作示例：http: [//jsfiddle.net/Gajotres/Beq4H/](http://jsfiddle.net/Gajotres/Beq4H/)

# visual-studio - 未找到“AntlrClassGenerationTask”任务

> ID：14439586
> 
> 赞同：1
> 
> 时间：2013-01-21T13:20:57.747
> 
> 标签：visual-studio, antlr

在具有 ANTLR 语法的 Visual Studio 2010 项目中，我收到以下错误“未找到“AntlrClassGenerationTask”任务”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:15:48.873

我发现了问题，解决方案文件夹的名称中有字符“(2)”，显然这导致找不到 ANTLR 任务（在其他分支中工作正常）并且任务程序集包含在解决方案内的文件夹中.

因此，将文件夹名称从“MySolution(2)”更改为“MySolution”后，问题就消失了。

有点奇怪，因为没有对解决方案文件夹的绝对引用，都使用了 VS 宏，如 $(ProjectDir)Antlr。

# interface - SystemVerilog：将接口传递给函数/任务（用于综合！）

> ID：14439589
> 
> 赞同：7
> 
> 时间：2013-01-21T13:20:58.733
> 
> 标签：interface, system-verilog, synthesis

是否有任何可综合的方式将接口传递给函数或任务？我的用例如下：我有一个包含多个功能的包（尽管我可以将它们转换为任务，如果有帮助的话:)），所有这些都可能在模块中使用并且可能需要访问模块的端口。现在，通常我只是将所有端口分组`interface`，将其添加到模块中，然后将其传递`virtual`给函数。但是，我的综合工具手册中提到`virtual`不支持。

我错过了什么吗？必须有一种方法为综合任务提供端口，类似于 VHDL 的`signal`论点？

一些示例代码：

```
module mymod (
    input logic clk,
    input logic rst,
    input uint16_t adr,
    input bit cyc,
    input uint32_t dat_m,
    input bit stb,
    input bit we,
    output bit ack,
    output uint32_t dat_s
    );

    always_comb begin
        mypack::do_something(a, b, c, adr, cyc, dat_m, stb, we, ack, dat_s);
endmodule 
```

理想情况下，任务`mypack::do_something`将能够将端口用作端口，即等待它们的更改、向它们写入值等；`signal`基本上，通过将它们作为参数传递（与`variable`或参数相反）在 VHDL 中实现的效果相同`constant`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:07:55.417

不幸的是，看起来接口必须是虚拟的才能通过函数或任务端口列表传递。

SystemVerilog IEEE Std 1800-2009 说函数端口列表必须是 data_type。有关声明函数的语法，请参见第 13.4 节、附件 A.2.6 和语法 13-2。参见 A.2.2.1 来定义 data_type。我也检查了 IEEE Std 1800-2005，它似乎也有同样的限制，只是没有清楚地说明。请参见 1800-2005 的第 12.3 节和附录 A。

如果要使用接口，请尝试在接口中使用转换函数来制作结构（可能需要`packed`，请参阅 IEEE Std 1800-2009 第 13.4 节，脚注#12）：

```
interface myif ( /* ... */);
/* signal list */
function mypack::var_list_s toStruct();
   /* make translation */
endfunction : toStruct
endinterface : myif

module mymod(myif my_if);
always_comb
   mypack::do_something(my_if.toStruct(), my_if.ack, my_if.dat_s);
endmodule : mymod 
```

或者，您总是可以``include "myports"`在需要的地方使用经典方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T23:20:39.753

通常，您会在接口定义本身中声明任何特定于接口的函数。这样，任何任务或函数声明都已经在范围内具有接口端口。

```
interface int1(ports...);
  function func1(args...);
  // Do stuff with ports and args
  endfunction
endinterface

module mod1(input wire clk,interface intf);
...
  always @(posedge clk)
    intf.func1(module_specific_data); 
...
endmodule 
```

# python - Python中的二叉树

> ID：14439590
> 
> 赞同：6
> 
> 时间：2013-01-21T13:21:02.950
> 
> 标签：python, binary-tree

这是我在 Python 中实现二叉树的代码片段。这在我运行 PreOrder 函数时有效。

```
class Node:
    def __init__(self,data):
        self.left = None
        self.right = None
        self.data = data

class BinaryTree(Node):
    def __init__(self):
        self.root = None

    def addNode(self,data):
        return Node(data)

    def insert(self,root,data):
        if(root == None):
            root = self.addNode(data)
        else:
            if(data <= root.data):
               root.left = self.insert(root.left,data)
            else:
                root.right = self.insert(root.right,data)
        return root

    def PreOrder(self,root):
        if root == None:
            pass
        else:
            print(root.data)
            self.PreOrder(root.left)
            self.PreOrder(root.right)

a = BinaryTree()
root = a.addNode(2)
#root = None
a.insert(root,4)
a.insert(root,34)
a.insert(root,45)
a.insert(root,46)
a.insert(root,41)
a.insert(root,48)
a.PreOrder(root) 
```

但是将 main 中的第 2 行和第 3 行更改为

```
#root = a.addNode(2)
root = None 
```

不打印任何东西。我觉得我在这里错过了一些基本的东西。任何澄清将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T13:23:35.010

您正在传递`None`给您定义的函数：

```
if root == None:
    pass 
```

这就是为什么没有打印任何内容的原因。

另外，这只是个人观点，我实际上会让 PreOrder 只接受 self 参数，然后从那里执行 PreOrder，使得递归定义变得非常简单。

基本上是这样的：

```
 def PreOrder(self):
     print self.data 
     if self.left:
          print self.left.PreOrder()
     if self.right:
          print self.right.PreOrder() 
```

但这是一个偏好问题，您的解决方案工作得很好。

作为公然的宣传，我最近写了一篇关于用 Python 写一个基本的二叉树的帖子，如果你想看看，可以在这里找到：

[http://intothewebs.tumblr.com/post/40256328302/embrace-the-basics-binary-tree](http://intothewebs.tumblr.com/post/40256328302/embrace-the-basics-binary-tree)

更新：

好的，在您发表评论后，我了解您的疑问。

传递给您的方法的根参数并没有真正改变，因为 Python 中的参数是按值传递的：

[如何通过引用传递变量？](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)

阅读这个问题中接受的答案，这太棒了，应该解释我的意思。

你们有：

```
root = None
a = a.insert(root,4)
a.insert... 
```

依此类推，您的代码应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:23:48.017

你有`root = None`，然后在`PreOrder`你的第一行是`if root == None: pass`所以它不会为你做任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-17T10:23:08.137

```
class Node:
def __init__(self,data):
    self.left = None
    self.right = None
    self.data = data

class BinaryTree:

    def __init__(self):
        self.root = None

    def insert_node(self,root,element):
        if self.root is None:
            self.root = Node(element)
        else:

            if root is None:
                root = Node(element)
            elif root.data <= element:
                root.right = self.insert_node(root.right,element)
            elif root.data > element:
                root.left = self.insert_node(root.left,element)

        return root

    def PreOrder(self,root):
        if root is not None:
            print(root.data)
            if root.left is not None:
                self.PreOrder(root.left)
            if root.right is not None:
                self.PreOrder(root.right)

a = BinaryTree()
a.insert_node(a.root,3)
a.insert_node(a.root,4)
a.insert_node(a.root,34)
a.insert_node(a.root,45)
a.insert_node(a.root,46)
a.insert_node(a.root,2)
a.insert_node(a.root,48)
a.PreOrder(a.root) 
```

# security - 限制 Teamcity 共享帐户

> ID：14439591
> 
> 赞同：2
> 
> 时间：2013-01-21T13:21:10.523
> 
> 标签：security, teamcity

开发人员多次讨论过在启动/停止构建等时不要使用共享帐户。因此“共享帐户”通常会导致构建损坏:)

除了查看构建结果外，我如何限制共享帐户在 TC 上进行任何活动？
离开共享帐户（未注册用户）查看 TC 构建结果以便能够与任何人共享任何 TC 构建结果/工件是必不可少的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:28:51.670

TeamCity 提供了细粒度的[角色和权限](http://confluence.jetbrains.net/display/TCD65/Role+and+Permission)。`Project Viewer`它具有适合您需要的内置角色。将此角色分配给`Shared Account`：

1.  浏览到*管理*->*用户*
2.  查看`Shared Account`用户
3.  删除该用户的现有角色并将其分配给“项目查看者”角色。

您可以将此角色全局分配（分配给所有项目）或分配给项目子集。如果`Shared Account`是任何组的成员，它可能继承了这些组的角色。在这种情况下，您可能必须更改这些成员资格或它们所承担的角色。

# ios - iOS 中的自定义 UIAction Sheets

> ID：14439592
> 
> 赞同：0
> 
> 时间：2013-01-21T13:21:10.743
> 
> 标签：ios, ios5, ios6, uiactionsheet, uianimation

我有一种情况，单击一个按钮，我想从底部为 tableView 设置动画，我尝试使用[CustomActionSheet 示例](https://github.com/homeyer/CustomUIActionSheet)，但我觉得它非常复杂。请告诉我我们可以做到的可能方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:09:34.127

首先将您的表格视图的框架设置在视图之外，然后添加为子视图然后通过更改框架来提供动画......

```
CGFloat height = 100;
[yourTableView setFrame:CGRectMake(0, 480, 320, height)];
[self.view addSubview:yourTableView];
[UIView animateWithDuration:0.5 animations:^{
     [yourTableView setFrame:CGRectMake(0, 480 - height, 320, 100)];
}]; 
```

希望对你有帮助

# jquery-file-upload - jquery fileupload 语法错误类型错误

> ID：14439594
> 
> 赞同：1
> 
> 时间：2013-01-21T13:21:17.717
> 
> 标签：jquery-file-upload

使用这个（jquery for fileupload）脚本我收到一些错误，但它在本地的 wamp 中工作。对于生产，我需要停止此警报错误”

> “SyntaxError：属性列表
> progressall之后缺少}：函数（e，数据）{”

或在 Chrome 中：

> “第 211 行未捕获的语法错误意外标识符”

与 Firefox 中的行相同。

有人有想法吗？

```
 $(function () {
     $('#fileupload').fileupload({
        dataType: 'json',       
        done: function (e, data) {
        $.each(data.result.files, function (index, file) {
            $('<p/>').text(file.name).appendTo(document.body);
        });
    }
    progressall: function (e, data) {
    var progress = parseInt(data.loaded / data.total * 100, 10);
    $('#progress .bar').css(
        'width',
        progress + '%'
     );
    }
    add: function (e, data) {
        data.context = $('<p/>').text('Uploading...').appendTo(document.body);
        data.submit();
    }
    done: function (e, data) {
        data.context.text('Upload finished.');
    }
    add: function (e, data) {
        data.context = $('<button/>').text('Upload')
            .appendTo(document.body)
            .click(function () {
                $(this).replaceWith($('<p/>').text('Uploading...'));
                data.submit();
            });
    }
    done: function (e, data) {
        data.context.text('Upload finished.');
    }

     });
}); 
```

我做了一些修改：Mozilla 没有错误但无法正常工作

在 chrome 错误中（Uncaught TypeError: Cannot call method 'push' of undefined）并且不工作

```
$(function () {
    //declare a "updloadOptions" variable object that will be passed to the plugin constructor method as a parameter. (You can give any name to this object.)
    var updloadOptions = {};

    //set the datatype property to 'json'.
    updloadOptions.dataType = 'json';
    //declare the "done" callback method on "updloadOptions" object.
    updloadOptions.done = function (e, data) {
        $.each(data.result.files, function (index, file) {
            $('<p/>').text(file.name).appendTo(document.body);
        });
    };
    //declare the "progressall" callback method on "updloadOptions" object.
    updloadOptions.progressall = function (e, data) {
        var progress = parseInt(data.loaded / data.total * 100, 10);
        $('#progress .bar').css(
            'width',
        progress + '%');
    };
    //declare the "add" callback method on "updloadOptions" object.
    updloadOptions.add = function (e, data) {
         data.context = $('<button/>').text('Upload')
         .appendTo(document.body)
         .click(function () {             $(this).replaceWith($('<p/>').text('Uploading...'));                
        data.context = $('<p/>').text('Uploading...').appendTo(document.body);
        data.submit();
        });
    };
    //initialize the component
    $('#fileupload').fileupload(updloadOptions);
}); 
```

语法错误的正确脚本

> SyntaxError: 在属性列表
> filesContainer: $('.filescontainer')之后缺少 }

而且我永远不需要`filesContainer`，因为我用上传系统检索了第二个 jquery 选项卡

```
$(function () {
$('#fileupload').fileupload({
   dataType: 'json',       
   done: function (e, data) {
       $.each(data.result.files, function (index, file) {
           $('<p/>').text(file.name).appendTo(document.body);
       });
   },
   progressall: function (e, data) {
   var progress = parseInt(data.loaded / data.total * 100, 10);
   $('#progress .bar').css(
       'width',
       progress + '%'
    );
   },
   add: function (e, data) {
       data.context = $('<p/>').text('Uploading...').appendTo(document.body);
       data.submit();
   },
   done: function (e, data) {
       data.context.text('Upload finished.')
   },
   add: function (e, data) {
       data.context = $('<button/>').text('Upload')
           .appendTo(document.body)
           .click(function () {
               $(this).replaceWith($('<p/>').text('Uploading...'));
               data.submit();
           });
   },  done: function (e, data) {
       data.context.text('Upload finished.')
   }
   filesContainer: $('.filescontainer') 

});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:42:10.023

您的脚本存在会产生多个错误的基本错误。

*   您应该在传递给`.fileupload()`插件的选项对象的每个成员的末尾都有逗号。
*   您已声明重复的回调方法。`done`回调被声明了 3 次，`add`回调被声明了两次。

因此，您应该只使用每个重复减速中的一个，或者将这些重复中的代码合并为一个。但我看到这些回调中的代码也是重复的。

这是您的代码的清理版本：

```
<script type="text/javascript">
    $(function () {
        $('#fileupload').fileupload({
            dataType: 'json',
            done: function (e, data) {
                $.each(data.result.files, function (index, file) {
                    $('<p/>').text(file.name).appendTo(document.body);
                });
            },
            progressall: function (e, data) {
                var progress = parseInt(data.loaded / data.total * 100, 10);
                $('#progress .bar').css('width', progress + '%');
            },
            add: function (e, data) {
                data.context = $('<p/>').text('Uploading...').appendTo(document.body);
                data.submit();
            }
        });
    });
</script> 
```

这是一个更易读的版本：

```
<script type="text/javascript">

    $(function () {

        //declare a "updloadOptions" variable object that will be passed to the plugin constructor method as a parameter. (You can give any name to this object.)
        var updloadOptions = {};

        //set the datatype property to 'json'.
        updloadOptions.dataType = 'json';

        //declare the "done" callback method on "updloadOptions" object.
        updloadOptions.done = function (e, data) {
            $.each(data.result.files, function (index, file) {
                $('<p/>').text(file.name).appendTo(document.body);
            });
        };

        //declare the "progressall" callback method on "updloadOptions" object.
        updloadOptions.progressall = function (e, data) {
            var progress = parseInt(data.loaded / data.total * 100, 10);
            $('#progress .bar').css('width', progress + '%');
        };

        //declare the "add" callback method on "updloadOptions" object.
        updloadOptions.add = function (e, data) {
            data.context = $('<p/>').text('Uploading...').appendTo(document.body);
            data.submit();
        };

        //initialize the component
        $('#fileupload').fileupload(updloadOptions);

    });

</script> 
```

# r - 无法使用 plyr 包和使用列表

> ID：14439599
> 
> 赞同：5
> 
> 时间：2013-01-21T13:21:30.203
> 
> 标签：r, plyr

我很难理解 plyr 包的用法。我尝试使用它来拆分存储在列表中的数据帧，应用函数，将结果存储为数据帧并将数据帧再次组合为列表。因此，鉴于以下数据：

```
 #create test dfs
    df1<-data.frame(a=sample(1:50,10),b=sample(1:50,10),c=sample(1:50,10),d=(c("a","b","c","a","a","b","b","a","c","d")))
    df2<-data.frame(a=sample(1:50,9),b=sample(1:50,9),c=sample(1:50,9),d=(c("e","f","g","e","e","f","f","e","g")))
    df3<-data.frame(a=sample(1:50,8),b=sample(1:50,8),c=sample(1:50,8),d=(c("h","i","j","h","h","i","i","h")))

    #make them a list
    list.1<-list(df1=df1,df2=df2,df3=df3) 
```

我想计算每个数据帧的 d 中定义的每个组的平均值。如果我只在一个数据帧上使用 plyr（按组计算特定列的平均值），则使用 plyr 包的可能性是：

```
 ddply(df1,.(d),summarise, mean=mean(a)) 
```

但是如何将它应用于数据框中的每一列以及列表中的每个数据框？以及如何重新组合所有数据，以便最终获得包含结果的矩阵列表？对于这个非常基本的问题，我很抱歉，但我是 R 的新手，我已经尝试解决这个问题很长一段时间了......谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:30:56.230

您需要将所有数据放入一个大文件中`data.frame`：

```
library(reshape)

big_dataframe = ldply(list.1, function(x) melt(x, id.vars = "d"))
> head(big_dataframe)
  .id d variable value
1 df1 a        a    44                                                      
2 df1 b        a    17                                                      
3 df1 c        a    15                                                      
4 df1 a        a    30                                                      
5 df1 a        a    49                                                      
6 df1 b        a    33 
```

...然后使用`ddply`它。

```
res = ddply(big_dataframe, .(.id, d, variable), summarise, mn = mean(value))
> res
   .id d variable       mn
1  df1 a        a 40.00000                                                  
2  df1 a        b 25.25000                                                  
3  df1 a        c 31.25000                                                  
4  df1 b        a 22.66667                                                  
5  df1 b        b 16.00000                                                  
6  df1 b        c 26.00000                                                  
7  df1 c        a  9.00000                                                  
8  df1 c        b 16.50000                                                  
9  df1 c        c 15.00000                                                  
10 df1 d        a 28.00000                                                  
11 df1 d        b 24.00000                                                  
12 df1 d        c 39.00000                                                  
13 df2 e        a 18.50000                                                  
14 df2 e        b 15.50000                                                  
15 df2 e        c 16.50000                                                  
16 df2 f        a 26.33333                                                  
17 df2 f        b 42.00000                                                  
18 df2 f        c 37.00000                                                  
19 df2 g        a 26.50000                                                  
20 df2 g        b 22.00000                                                  
21 df2 g        c 31.00000                                                  
22 df3 h        a 29.25000                                                  
23 df3 h        b 34.25000                                                  
24 df3 h        c 32.00000                                                  
25 df3 i        a 30.33333                                                  
26 df3 i        b 40.00000                                                  
27 df3 i        c 24.33333                                                  
28 df3 j        a 21.00000                                                  
29 df3 j        b  5.00000                                                  
30 df3 j        c 46.00000 
```

它给出了每个变量 ( `a`- `c`)、每个因子级别`d`和每个子数据帧 (df1-df3) 的平均值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T13:58:48.577

你总是可以只是`lapply`你的`ddply`：

```
 lapply(list.1, function(x)   ddply(x, .(d), function(x)  
                             data.frame(a=mean(x$a),b=mean(x$b),c= mean(x$c))) ) 
```

或完全使用您的代码：

```
lapply(list.1, function(x) ddply(x,.(d),summarise, mean=mean(a)) ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T13:58:37.853

这是一个结合`llply()`和的解决方案`ddply()`。首先，`llply()`将函数应用于列表的每个元素并返回一个列表。然后`ddply()`应用于 list 的每个数据帧，并根据 column 划分每个数据帧`d`。函数`colMeans()`用于计算每个数值列的平均值。

```
llply(list.1,function(x) ddply(x,.(d),function(x) colMeans(x[,1:3])))
$df1
  d        a     b        c
1 a 22.25000 26.25 34.25000
2 b 19.66667 22.00 28.66667
3 c 37.00000 44.50 18.00000
4 d 17.00000  3.00  4.00000

$df2
  d        a        b    c
1 e 20.50000 32.25000 18.5
2 f 25.33333 34.33333 21.0
3 g 20.50000 26.50000 16.5

$df3
  d    a        b        c
1 h 17.5 26.50000 37.25000
2 i 45.0 22.33333 26.33333
3 j 25.0 33.00000 42.00000 
```

# sql - 获取连接表中的最后一条记录

> ID：14439602
> 
> 赞同：0
> 
> 时间：2013-01-21T13:21:38.217
> 
> 标签：sql, sql-server, select, greatest-n-per-group

我在这里遇到问题，我不明白有关该主题的帖子。所以这是我的问题：

在我的应用程序中，我有以下实体：

```
Customer( CustomerId int, Name varchar(200), Email varchar(100), ...)
Employee (EmployeeId int, Name varchar(200), Email varchar(100), ...)
Sale(SaleId int, CustomerId int, EmployeeId int, SaleDate datetime, ...) Join Table 
```

我怎样才能得到表中每个客户的最后一笔销售？

示例（示例数据）：

```
Customer:
    1, John Smith, jonh@smith.com, ...
    2, Michael Jackson, michael@jackson.com, ...
    3, Bill Clinton, bill@clinton.com, ...

Employee:
   1, Steve Jobs, steve@jobs.com, ...
   2, Bill Gates, bill@gates.com, ...
   3, Mark Zuckerberg, mark@zuckerberg.com, ...

Sales:
   1, 1 (John Smith), 1 (Steve Jobs), '2013-01-02'
   2, 1 (John Smith), 2 (Bill Gates), '2013-01-11'
   3, 1 (John Smith), 3 (Mark Zuckerberg), '2012-12-25'
   4, 2 (Michael Jackson), 2 (Bill Gates), '2012-11-02'
   5, 2 (Michael Jackson), 1 (Steve Jobs), '2013-01-13'
   6, 3 (Bill Clinton), 3 (Mark Zuckerberg), '2013-01-17'
   7, 3 (Bill Clinton), 2 (Bill Gates), '2011-12-20' 
```

我的结果查询必须给我带来以下结果：

```
 2, 1 (John Smith), 2 (Bill Gates), '2013-01-11'
   5, 2 (Michael Jackson), 1 (Steve Jobs), '2013-01-13'
   6, 3 (Bill Clinton), 3 (Mark Zuckerberg), '2013-01-17' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:38:35.817

既然您提到您正在使用`SQL Server`，请使用`Common Table Expression`和`Window Function`

```
WITH latestRecords
AS
(
    SELECT  SaleId , CustomerId, EmployeeId , SaleDate,
            DENSE_RANK() OVER (PARTITION BY CustomerId
                                ORDER BY SaleDate DESC) RN
    FROM    Sale
)
SELECT  a.SaleId,
        b.Name AS CustomerName,
        c.Name as EmployeeName,
        a.SaleDate
FROM    latestRecords a
        INNER JOIN Customer b
            ON a.CustomerID = b.CustomerID
        INNER JOIN Employee c
            ON a.EmployeeID = c.EmployeeID
WHERE   a.RN = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/6d920/4)

# objective-c - 如何找出实际内存使用情况

> ID：14439608
> 
> 赞同：1
> 
> 时间：2013-01-21T13:22:16.200
> 
> 标签：objective-c, memory-management, cocos2d-iphone, xcode-instruments

我想通过仪器分配找出我的应用程序的实际内存使用情况这是我的 2 张图片

[![#1](../Images/e3532277aede2f3f743baf7ce683221a.png)](https://i.stack.imgur.com/gVKZc.jpg)

[![#2](../Images/706e1be52cda5bed5fe418b3e0cad10d.png)](https://i.stack.imgur.com/QXzDS.jpg)

第一次运行没有任何过滤器和实时字节：14.79 MB

第二次使用过滤器 CF、Malloc、CG、CA 类型和实时字节运行：40.94 KB

所以哪一个是真正的内存使用。如果没有比如何找出这个，我不知道这是否重要，但一切都在模拟器上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:10:19.607

#1 是您的应用程序的“真实”内存使用情况。

尽管 CF、CG 等内存使用可能来自 iOS 库，但最终导致 iOS 框架分配内存的是您的代码。所以你也需要把它算作你的应用程序的内存使用量。

请记住，不仅在设备和模拟器上运行可能会影响最终结果，而且无论您运行调试还是发布版本也可能会有所不同。始终在发布版本中配置文件，因为这是用户将使用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:28:58.683

最好在设备上运行您的应用程序以了解真实情况。这很重要。在模拟器上运行意味着所有系统进程也将被显示。所以...

**在DEVICE**上分析应用程序并选择 Activity Monitor。它应该为您提供设备上运行的所有应用程序的内存使用情况。在该列表中观察您自己的应用程序。

# php - 重新定义数组键php

> ID：14439617
> 
> 赞同：0
> 
> 时间：2013-01-21T13:22:30.170
> 
> 标签：php, arrays

我有一个数组。

```
Array
(
    [0] => Array
        (
            [TotalClicksPerDay] => 5
            [Date] => 2012-11-26
            [weekDay] => 2
        )

    [1] => Array
        (
            [TotalClicksPerDay] => 13
            [Date] => 2012-11-27
            [weekDay] => 6
        )

) 
```

我想通过使用值 [weekday] 作为键来重新定义键。

因此，在上面的示例中，新数组将如下所示：

```
Array
(
    [2] => Array
        (
            [TotalClicksPerDay] => 5
            [Date] => 2012-11-26
            [weekDay] => 2
        )

    [6] => Array
        (
            [TotalClicksPerDay] => 13
            [Date] => 2012-11-27
            [weekDay] => 6
        )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:23:37.907

```
foreach ($old_array as $values) {
    $new_array[$values['weekDay']] = $values;
} 
```

# deployment - Java-EE6：如何从服务器组件内部自动重新部署 Glassfish 3 应用程序？

> ID：14439618
> 
> 赞同：4
> 
> 时间：2013-01-21T13:22:38.530
> 
> 标签：deployment, java-ee-6, glassfish-3

我有一个带有 Glassfish 3.1.2.2、MySQL 5.5 服务器和一个基于 Swing 的独立客户端应用程序的 3 层应用程序设计。

我目前面临如何在 Glassfish 上自动更新/重新部署服务器端应用程序（* .ear 文件）的问题。

我的客户会定期检查我存放更新文件（client-jar-files 和 server-ear-files）的更新服务器上的新更新。一旦有新版本，客户端就会从我的更新服务器下载它并将其存储到连接到 Glassfish 实例的数据库中。

我的问题是如何以编程方式将新的 *.ear 文件重新部署到 Glassfish ？

我尝试通过打开一个新进程并使用 Glassfish 附带的 asadmin 工具来强制重新部署来解决此问题：

```
Runtime.getRuntime().exec("./asadmin --user admin --passwordfile "+getPathToPwdFile()+" deploy --force=true "+getPathToNewEarFile()); 
```

但是这个解决方案很糟糕，因为在重新部署期间，进程在进程终止之前被剥离，因为派生进程的服务器应用程序被重新部署......这会导致应用程序服务器上出现一些错误。

[Glassfish v3 的 JMX / AMX 项目](http://glassfish.java.net/nonav/v3/admin/planning/V3Changes/V3_AMX_SPI.html)似乎已经死了（2009 年最后一次更新）......

有人对这个问题有适当的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:13:14.670

以编程方式将 ear 文件复制到 auto Glassfish 的 autodeploy 文件夹怎么样？默认的自动部署检查间隔是每 2 秒，但您可以增加此间隔以使您的进程有足够的时间完成。

请参阅[http://docs.oracle.com/cd/E18930_01/html/821-2417/gilfm.html#fvxze](http://docs.oracle.com/cd/E18930_01/html/821-2417/gilfm.html#fvxze)

# java - quickbooks 在线公司MetaData java

> ID：14439620
> 
> 赞同：0
> 
> 时间：2013-01-21T13:22:49.760
> 
> 标签：java, quickbooks

我正在尝试使用 java api 在线访问 quickbooks 中的 companyMetaData。我正在寻找一种方法来捕获财政年度的开始日期。我尝试使用 new CompaniesMetaDataImpl(context) 调用创建一个新的 CompaniesMetaDataImpl 对象。这不会产生任何错误，也不会产生任何公司价值。我与 qb 在线公司的连接正常，我只是在寻找获取这些数据的指导。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:33:23.540

您需要创建一个 QBCompanyService，并使用它来获取可用的公司：

```
QBCompanyService db = QBServiceFactory.getService(context, QBCompanyService.class);
CompaniesMetaData comp_mdatas = db.getAvailableCompanies(context);
List<CompanyMetaData> mdatas = comp_mdatas.getCompanyMetaData(); 
```

# c# - 如何知道包含datagridview的选项卡中的一个选定行

> ID：14439621
> 
> 赞同：1
> 
> 时间：2013-01-21T13:22:50.730
> 
> 标签：c#

我有一个带有 3 个选项卡的表单的项目，每个选项卡包含 1 个 datagridview。我禁用了多选，只能选择一行。

我需要从这三个数据网格中添加新数据行或修改数据行，因此我在窗口顶部有一个 MenuStrip，其中有一个带有“添加”、“修改”和“删除选定行”选项的菜单。

我如何知道当前选定的选项卡中当前正在选择哪一行，该选项卡包含包含该行的数据网格？因为有 3 个选项卡包含 3 个数据网格。我不想让输出说选择了 3 个 datagridviews 选择了任何行。我想要屏幕上的一行。

如果我的问题不够清楚，请问我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:36:35.633

我假设这个问题是关于`WinForms`. 下面有一个示意性的代码逻辑示例，用于单击表单上属于a 的`ToolStripMenuItem`命名。只需将方法逻辑调整到您的和按钮事件即可。`Show selected row``MenuStrip``Modify``Delete``click`

```
public Form1()
{
    InitializeComponent();

    dataGridView1.DataSource = new[] { new { Id = 1 }, new { Id = 10 } };
    dataGridView2.DataSource = new[] { new { Id = 2 }, new { Id = 20 } };
    dataGridView3.DataSource = new[] { new { Id = 3 }, new { Id = 30 } };
}

private void showSelectedRowToolStripMenuItem_Click(object sender, EventArgs e)
{
    var dgv = tabControl1.SelectedTab.Controls.OfType<DataGridView>().FirstOrDefault();
    if(dgv != null)
    {
        if (dgv.SelectedRows.Count > 0)
        {
            // I'm using MessageBox to show the index of the row. 
            // You should add your Modify / Delete logic
            MessageBox.Show(dgv.SelectedRows[0].Index.ToString());
        }
    }
} 
```

对于 .NET Framework 2.0，您可以找到所选选项卡的第一个`DataGridView`控件（如果存在），如下所示：

```
DataGridView dgv = null;
for (int i = 0; i < tabControl1.SelectedTab.Controls.Count; i++)
{
    if (tabControl1.SelectedTab.Controls[i].GetType() == typeof(DataGridView))
    {
        dgv = (DataGridView)tabControl1.SelectedTab.Controls[i];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:26:50.490

检查单击
假设选项卡控件是 tabCtrlReports 并且选项卡名称是 tbUser 然后检查条件

```
 If (tabCtrlReports.SelectedTab.Name = "tbUser") Then
// your code of grid
End If 
```

在 C# 中

```
if (tabCtrlReports.SelectedTab.Name = "tbUser") 
{
    // your code of grid
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:32:00.537

在您的回发事件中，也许检查选择了哪个选项卡（if 语句、case 语句），然后采取特定操作来相应地修改您的数据和页面。

如果您想为数据网格调用另一个 VS 生成的回发函数，您必须正确传递参数 - 我相信源应该是数据网格中的行对象。

另一种选择可能是修改数据、重新查询并将结果绑定到适当的网格（而不是尝试使用网格事件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T13:38:41.317

```
DataGridViewRow row = new DataGridViewRow();
if (tabControl1.SelectedTab.Name == "Name1") 
{
     row = dataGridView1.CurrentRow;
}
else
{
    if (tabControl1.SelectedTab.Name == "Name2") 
    {
        row = dataGridView2.CurrentRow;
    }
    else
    {
        row = dataGridView3.CurrentRow;
    }

if (row != null)
{
    //your logic here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T13:56:42.320

一种不依赖于 datagridview 名称的方法：

```
 var rtb = ((DataGridView)tabControl1.SelectedTab.Controls.Cast<Control>()
                  .FirstOrDefault(x => x is DataGridView)).CurrentRow; 
```

（可能会添加一个测试以验证标签页是否具有数据网格视图）

# xml - 将 XML 连续导入到 powershell 脚本中

> ID：14439625
> 
> 赞同：1
> 
> 时间：2013-01-21T13:22:59.590
> 
> 标签：xml, powershell

我有一个项目来创建一个脚本来处理我们的 Lync 配置 - 尽量保持它的模块化。我认为最好将每个脚本文件保存在自己的目录中，并使用其自己的“scopedConfig”和“centralXML”以及全局有用的标签。

我遇到的问题是尝试使用 Get-content 连续导入 2 个 XML 文件时。

我的**代码**是：

```
# Import CentralConfig
[xml]$centralXML = Get-content ".\centralConfig.xml"

# Import ScopedConfig
[xml]$scopedXML = Get-content ".\ExecutionResources\ScopedConfigfiles\HostConsole\config.xml" 
```

我正在使用以下内容**测试**成功导入：

```
"------------------"
"------------------"
$centralXML
"------------------"
$scopedXML
"------------------"
"------------------" 
```

结果和**问题**所在是输出：

```
------------------
------------------
Global_ConfigRoot
-----------------
Global_ConfigRoot
------------------

------------------
------------------ 
```

我希望两个 XML 的根节点作为输出，而不是我只得到第一个的根节点。如果我将其交换为第一个 $scopedXML - 我只得到 $scopedXML 根节点，而从 $centralXML 什么也没有。

需要注意的一件有趣的事情是，如果我将第二个 XML 传递给 Get-member - 您通常希望在其中看到所有与 XML 相关的东西及其属性，我会得到一大堆空白：

```
------------------
------------------
Global_ConfigRoot
-----------------
Global_ConfigRoot
------------------

------------------
------------------ 
```

我以前从来没有遇到过，有人有什么建议吗？

（PS尽量遵守发帖规则，如果有什么问题请告诉我这是我第一次在这里发帖）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:26:00.053

函数、cmdlet 或脚本只能返回 AN 对象。如果你通过调用这两个变量返回多个，它实际上返回一个`object[]`包含两个项目的数组（+你打印的行）。对象未触及，只是添加到此集合中。

现在，当您的脚本输出（显示）返回的对象时，它会将其格式化为表格，因为里面有多个对象。一个表只能包含 1 个标题（列名），当显示一个数组时，它从第一项中获取列（属性），在这种情况下`$centralxml`。这就是为什么你得到 2 列：xml 和服务器。

如果你想将它们分开，你必须告诉脚本在单独的表格中格式化它们。前任：

```
# Import CentralConfig
[xml]$centralXML = Get-content ".\test.xml"

# Import ScopedConfig
[xml]$scopedXML = Get-content ".\test2.xml"

$centralXML | Format-Table
$scopedXML | Format-Table 
```

# python - Python - GAE - 脚本循环消耗大量内存

> ID：14439626
> 
> 赞同：1
> 
> 时间：2013-01-21T13:23:05.793
> 
> 标签：python, google-app-engine, memory, urlfetch

我正在使用以下脚本创建一些 rss 快照（只是说）。

该脚本在后端运行，我的内存消耗越来越大。

```
class StartHandler(webapp2.RequestHandler):

    @ndb.toplevel
    def get(self):
        user_keys = User.query().fetch(1000, keys_only=True)
        if not user_keys:
            return
        logging.info("Starting Process of Users")
        successful_count = 0
        start_time = time.time()
        for user_key in user_keys:
            try:
                this_start_time = time.time()
                statssnapshot = StatsSnapShot(parent=user_key,
                                        property=get_rss(user_key.id())
                                        )
                #makes a urlfetch
                statssnapshot.put_async()
                successful_count += 1               
            except:
                pass
        logging.info("".join(("Processed: [",
                            str(successful_count),
                            "] users after [",
                            str(int(time.time()-start_time)),
                            "] secs")))
        return 
```

**编辑**

这也是 rss 函数可以说：

```
def get_rss(self, url):
        try:
            result = urlfetch.fetch(url)
            if not result.status_code == 200:
                logging.warning("Invalid URLfetch")
                return
        except urlfetch.Error, e:
            logging.warning("".join("Fetch Failed to get ",url," with",e))
            return
        content = result.content #Around 500 - 200KB
        reobj = re.compile(r'(?<=")[0-9]{21}(?=")')
        user_ids = reobj.findall(content)
        user_ids = set(user_ids)#set to fail if something is not unique
        return user_ids 
```

脚本运行正常，但随着用户的增多，脚本消耗的内存也越来越多。来自 CI 的人不知道如何在 Python 中高效地操作内存和变量。

例如，我知道如果没有再次引用 python 中的变量，垃圾收集器会释放用于该变量的内存，但那似乎是我的情况，我在哪里做错了？

如何优化此脚本以**不****增加**内存使用量，而仅消耗**每个**用户进程**所需**的内存？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:45:39.090

NDB 增加了自动缓存，这通常很方便。你有内存缓存和内存缓存，你可以为它们设置策略。

进行看跌时，您可以提供[上下文选项](https://developers.google.com/appengine/docs/python/ndb/functions#context_options)，我怀疑以下内容对您有用：

```
statssnapshot.put_async(use_cache=False) 
```**

# java - 部分 Java 文件在 Maven 构建期间不生成类

> ID：14439627
> 
> 赞同：0
> 
> 时间：2013-01-21T13:23:06.953
> 
> 标签：java, maven

我有一个项目，我使用 maven 编译：`mvn clean compile`. Java 文件的总数约为 2000 个。

编译成功，但部分Java文件没有生成类。

我使用 Maven 3.0.4。系统是Linux。

```
 <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
               <!--<version>3.0</version>-->
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                    <verbose>true</verbose>
                    <encoding>GBK</encoding>

                    <compilerArguments>
                        <sourcepath>${project.build.sourceDirectory}</sourcepath>
                        <extdirs>${project.basedir}/src/lib </extdirs>
                    </compilerArguments>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

有效的 pom ：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" 
    xmlns:xsi="http://www.w3.org /2001/XMLSchema-instance" 
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
    http://maven.apache.org  /xsd/maven-4.0.0.xsd">
      <modelVersion>4.0.0</modelVersion>
      <parent>
        <groupId>com.xxoo</groupId>
        <artifactId>xxooroot</artifactId>
        <version>1.0-SNAPSHOT</version>
      </parent>
      <groupId>com.xxoo</groupId>
      <artifactId>xxoodev</artifactId>
      <version>1.0-SNAPSHOT</version>
      <description>the root pom for all maven project</description>
      <distributionManagement>
        <repository>
          <id>nexus-releases</id>
          <name>Internal Release Repository</name>
          <url>http://ip/nexus/content/repositories/releases</url>
        </repository>
        <snapshotRepository>
          <id>nexus-snapshots</id>
          <name>Internal Snapshot Repository</name>
          <url>http://ip/nexus/content/repositories/snapshots</url>
        </snapshotRepository>
      </distributionManagement>
      <properties>
        <aspectj.version>1.6.2</aspectj.version>
        <checkstyle.url>/home/tony/.config/maven_checks.xml</checkstyle.url>
        <cobertura.encoding>UTF-8</cobertura.encoding>
        <compile.encoding>UTF-8</compile.encoding>
        <compile.source>1.6</compile.source>
        <compile.target>1.6</compile.target>
        <junit.version>4.8.2</junit.version>
        <pmd.sourceEncoding>UTF-8</pmd.sourceEncoding>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <resource.log4j>log4j.*</resource.log4j>
        <resources.encoding>UTF-8</resources.encoding>
        <slf4j.version>1.7.2</slf4j.version>
        <spring.version>3.1.3.RELEASE</spring.version>
      </properties>
      <dependencyManagement>
        <dependencies>
          <dependency>
            <groupId>aopalliance</groupId>
            <artifactId>aopalliance</artifactId>
            <version>1.0</version>
          </dependency>
          <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
          </dependency>
          <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
          </dependency>
          <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.1.3.RELEASE</version>
          </dependency>
          <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.3.RELEASE</version>
          </dependency>
                 omitted....
      </dependencies>
      <repositories>
        <repository>
          <releases>
            <enabled>true</enabled>
          </releases>
          <snapshots>
            <enabled>true</enabled>
            <updatePolicy>always</updatePolicy>
          </snapshots>
          <id>central</id>
          <url>http://central</url>
        </repository>
      </repositories>
      <pluginRepositories>
        <pluginRepository>
          <releases>
            <enabled>true</enabled>
          </releases>
          <snapshots>
            <enabled>true</enabled>
          </snapshots>
          <id>central</id>
          <url>http://central</url>
        </pluginRepository>
      </pluginRepositories>
      <build>
        <sourceDirectory>/opt/myself/xxoosource/xxoodev/src/main/java</sourceDirectory>
        <scriptSourceDirectory>/opt/myself/xxoosource
     /xxoodev/src/main/scripts</scriptSourceDirectory>
        <testSourceDirectory>/opt/myself/xxoosource/xxoodev/src
    /test /java</testSourceDirectory>
        <outputDirectory>/opt/myself/xxoosource/xxoodev/target/classes</outputDirectory>
        <testOutputDirectory>/opt/myself/xxoosource/xxoodev/target
    /test-classes</testOutputDirectory>
        <defaultGoal>package</defaultGoal>
        <resources>
          <resource>
            <filtering>true</filtering>
            <directory>/opt/myself/xxoosource/xxoodev/src/main/resources</directory>
            <excludes>
              <exclude>log4j.*</exclude>
            </excludes>
          </resource>
          <resource>
            <directory>/opt/myself/xxoosource/xxoodev/src/main/java</directory>
            <includes>
              <include>**/*.xml</include>
            </includes>
            <excludes>
              <exclude>log4j.*</exclude>
            </excludes>
          </resource>
        </resources>
        <testResources>
          <testResource>
            <filtering>true</filtering>
            <directory>/opt/myself/xxoosource/xxoodev/src/test/resources</directory>
          </testResource>
          <testResource>
            <directory>/opt/myself/xxoosource/xxoodev/src/test/java</directory>
            <includes>
              <include>**/*.properties</include>
              <include>**/*.xml</include>
            </includes>
          </testResource>
        </testResources>
        <directory>/opt/myself/xxoosource/xxoodev/target</directory>
        <finalName>xxoodev-1.0-SNAPSHOT</finalName>
        <pluginManagement>
          <plugins>
            <plugin>
              <artifactId>maven-antrun-plugin</artifactId>
              <version>1.3</version>
            </plugin>
            <plugin>
              <artifactId>maven-assembly-plugin</artifactId>
              <version>2.3</version>
            </plugin>
            <plugin>
              <groupId>org.mortbay.jetty</groupId>
              <artifactId>maven-jetty-plugin</artifactId>
              <version>6.1.7</version>
            </plugin>
                  omitted....
            <plugin>
              <groupId>org.codehaus.mojo</groupId>
              <artifactId>cobertura-maven-plugin</artifactId>
              <version>2.5</version>
              <configuration>
                <encoding>UTF-8</encoding>
                <formats>
                  <format>xml</format>
                </formats>
              </configuration>
            </plugin>
            <plugin>
              <artifactId>maven-pmd-plugin</artifactId>
              <version>2.5</version>
              <configuration>
                <linkXref>false</linkXref>
                <sourceEncoding>UTF-8</sourceEncoding>
                <minimumTokens>100</minimumTokens>
                <targetJdk>1.6</targetJdk>
                <excludes>
                  <exclude>**/generated/*.java</exclude>
                </excludes>
                <excludeRoots>
                  <excludeRoot>target/generated-sources/stubs</excludeRoot>
                </excludeRoots>
              </configuration>
            </plugin>
            <plugin>
              <artifactId>maven-war-plugin</artifactId>
              <version>2.1.1</version>
            </plugin>
            <plugin>
              <artifactId>maven-dependency-plugin</artifactId>
              <version>2.2</version>
            </plugin>
            <plugin>
              <artifactId>maven-release-plugin</artifactId>
              <version>2.0</version>
            </plugin>
            <plugin>
              <artifactId>maven-resources-plugin</artifactId>
              <version>2.5</version>
            </plugin>
            <plugin>
              <artifactId>maven-compiler-plugin</artifactId>
              <version>2.3.2</version>
            </plugin>
            <plugin>
              <artifactId>maven-deploy-plugin</artifactId>
              <version>2.6</version>
            </plugin>
            <plugin>
              <artifactId>maven-install-plugin</artifactId>
              <version>2.3.1</version>
            </plugin>
          </plugins>
        </pluginManagement>
        <plugins>
          <plugin>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.5</version>
            <executions>
              <execution>
                <id>default-resources</id>
                <phase>process-resources</phase>
                <goals>
                  <goal>resources</goal>
                </goals>
                <configuration>
                  <encoding>UTF-8</encoding>
                </configuration>
              </execution>
              <execution>
                <id>default-testResources</id>
                <phase>process-test-resources</phase>
                <goals>
                  <goal>testResources</goal>
                </goals>
                <configuration>
                  <encoding>UTF-8</encoding>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <encoding>UTF-8</encoding>
            </configuration>
          </plugin>
          <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <executions>
              <execution>
                <id>default-testCompile</id>
                <phase>test-compile</phase>
                <goals>
                  <goal>testCompile</goal>
                </goals>
                <configuration>
                  <source>1.5</source>
                  <target>1.5</target>
                  <verbose>true</verbose>
                  <encoding>GBK</encoding>
                  <compilerArguments>
                    <sourcepath>/opt/myself/xxoosource/xxoodev/src
    /main/java</sourcepath>
                    <extdirs>/opt/myself/xxoosource/xxoodev/src/lib</extdirs>
                  </compilerArguments>
                </configuration>
              </execution>
              <execution>
                <id>default-compile</id>
                <phase>compile</phase>
                <goals>
                  <goal>compile</goal>
                </goals>
                <configuration>
                  <source>1.5</source>
                  <target>1.5</target>
                  <verbose>true</verbose>
                  <encoding>GBK</encoding>
                  <compilerArguments>
                    <sourcepath>/opt/myself/xxoosource/xxoodev/src
    /main/java</sourcepath>
                    <extdirs>/opt/myself/xxoosource/xxoodev/src/lib</extdirs>
                  </compilerArguments>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <source>1.5</source>
              <target>1.5</target>
              <verbose>true</verbose>
              <encoding>GBK</encoding>
              <compilerArguments>
                <sourcepath>/opt/myself/xxoosource/xxoodev/src/main/java</sourcepath>
                <extdirs>/opt/myself/xxoosource/xxoodev/src/lib</extdirs>
              </compilerArguments>
            </configuration>
          </plugin>
          <plugin>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.3.2</version>
            <executions>
              <execution>
                <id>default-jar</id>
                <phase>package</phase>
                <goals>
                  <goal>jar</goal>
                </goals>
                <configuration>
                  <archive>
                    <manifestEntries>
                      <Build-Date>${__now}</Build-Date>
                      <SCM-Revision>${__revision}</SCM-Revision>
                      <SCM-Url>${__fullurl}</SCM-Url>
                    </manifestEntries>
                  </archive>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <archive>
                <manifestEntries>
                  <Build-Date>${__now}</Build-Date>
                  <SCM-Revision>${__revision}</SCM-Revision>
                  <SCM-Url>${__fullurl}</SCM-Url>
                </manifestEntries>
              </archive>
            </configuration>
          </plugin>
          <plugin>
            <artifactId>maven-source-plugin</artifactId>
            <version>2.2.1</version>
            <executions>
              <execution>
                <id>attach-sources</id>
                <goals>
                  <goal>jar</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
               <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>findbugs-maven-plugin</artifactId>
            <version>2.3.2</version>
          </plugin>
          <plugin>
            <artifactId>maven-surefire-report-plugin</artifactId>
            <version>2.8</version>
          </plugin>
          <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>cobertura-maven-plugin</artifactId>
            <version>2.5</version>
            <configuration>
              <encoding>UTF-8</encoding>
              <formats>
                <format>xml</format>
              </formats>
            </configuration>
          </plugin>
          <plugin>
            <artifactId>maven-pmd-plugin</artifactId>
            <version>2.5</version>
            <configuration>
              <linkXref>false</linkXref>
              <sourceEncoding>UTF-8</sourceEncoding>
              <minimumTokens>100</minimumTokens>
              <targetJdk>1.6</targetJdk>
              <excludes>
                <exclude>**/generated/*.java</exclude>
              </excludes>
              <excludeRoots>
                <excludeRoot>target/generated-sources/stubs</excludeRoot>
              </excludeRoots>
            </configuration>
          </plugin>
          <plugin>
            <artifactId>maven-clean-plugin</artifactId>
            <version>2.4.1</version>
            <executions>
              <execution>
                <id>default-clean</id>
                <phase>clean</phase>
                <goals>
                  <goal>clean</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <artifactId>maven-install-plugin</artifactId>
            <version>2.3.1</version>
            <executions>
              <execution>
                <id>default-install</id>
                <phase>install</phase>
                <goals>
                  <goal>install</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.10</version>
            <executions>
              <execution>
                <id>default-test</id>
                <phase>test</phase>
                <goals>
                  <goal>test</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <artifactId>maven-deploy-plugin</artifactId>
            <version>2.6</version>
            <executions>
              <execution>
                <id>default-deploy</id>
                <phase>deploy</phase>
                <goals>
                  <goal>deploy</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <artifactId>maven-site-plugin</artifactId>
            <version>3.0</version>
            <executions>
              <execution>
                <id>default-site</id>
                <phase>site</phase>
                <goals>
                  <goal>site</goal>
                </goals>
                <configuration>
                  <outputDirectory>/opt/myself/xxoosource/xxoodev
    /target/site</outputDirectory>
                  <reportPlugins>
                    <reportPlugin>
                      <groupId>org.apache.maven.plugins</groupId>
                      <artifactId>maven-project-info-reports-plugin</artifactId>
                    </reportPlugin>
                  </reportPlugins>
                </configuration>
              </execution>
              <execution>
                <id>default-deploy</id>
                <phase>site-deploy</phase>
                <goals>
                  <goal>deploy</goal>
                </goals>
                <configuration>
                  <outputDirectory>/opt/myself/xxoosource/xxoodev
    /target/site</outputDirectory>
                  <reportPlugins>
                    <reportPlugin>
                      <groupId>org.apache.maven.plugins</groupId>
                      <artifactId>maven-project-info-reports-plugin</artifactId>
                    </reportPlugin>
                  </reportPlugins>
                </configuration>
              </execution>
            </executions>
            <configuration>
              <outputDirectory>/opt/myself/xxoosource/xxoodev
    /target/site</outputDirectory>
              <reportPlugins>
                <reportPlugin>
                  <groupId>org.apache.maven.plugins</groupId>
                  <artifactId>maven-project-info-reports-plugin</artifactId>
                </reportPlugin>
              </reportPlugins>
            </configuration>
          </plugin>
        </plugins>
      </build>
      <reporting>
        <outputDirectory>/opt/myself/xxoosource/xxoodev/target/site</outputDirectory>
      </reporting>
    </project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:25:10.873

导航到项目的主目录。然后将目录更改为`target`，应该有`class`文件。

# lisp - 读取行时未捕获具有挂断条件的 iolib

> ID：14439629
> 
> 赞同：1
> 
> 时间：2013-01-21T13:23:10.503
> 
> 标签：lisp, common-lisp

我是一个比较新的common lisp，当我用iolib写服务器的时候，发现当telnet到服务器，然后断开telnet，服务器抛出

**未知类型说明符：挂断**

当我打印回溯时，我发现它出现在 make-server-line-echoer 中的 read-line 执行时。我在那里使用处理程序案例，但不起作用。有什么帮助吗？

这是我的代码：

```
(ql:quickload 'iolib)

(defpackage :com.server.test
  (:use :sockets :iomux :common-lisp))
(in-package :com.server.test)

(defvar *server-event-base* nil)

(defun make-server-line-echoer (socket)
  (lambda (fd event exception)
    (handler-case
        (progn
          (let ((line (read-line socket)))
            (format t "Read ~A~%" line)
            (format socket "~A~%" line)
            (finish-output socket)))
      (socket-connection-reset-error ()
        (format t "Connection reset by peer~%")
        (close socket))
      (hangup ()
        (format t "Client close connection on write~%")
        (close socket))
      (end-of-file ()
        (format t "Client closed connection on read~%")
        (close socket)))))

(defun make-server-listener-handler (socket)
  (lambda (fd event exception)
    (let ((client (accept-connection socket :wait t)))
      (when client
        (multiple-value-bind (who port)
            (remote-name client)
          (format t "Accept a client from ~A:~A~%" who port)
          (set-io-handler *server-event-base*
                          (socket-os-fd client)
                          :read
                          (make-server-line-echoer
                           client)))))))

(defun run-server (&key port)
  (setf *server-event-base* (make-instance 'event-base))
  (let ((listener (make-socket :connect :passive
                               :address-family :internet
                               :type :stream
                               :ipv6 nil
                               :external-format '(:utf-8 :eol-style :crlf))))
    (bind-address listener +ipv4-unspecified+ :port port :reuse-addr t)
    (listen-on listener :backlog 5)
    (format t "Listening on socket bound to: ~A:~A~%"
            (local-host listener)
            (local-port listener))
    (set-io-handler *server-event-base*
                    (socket-os-fd listener)
                    :read
                    (make-server-listener-handler listener))
    (handler-case
        (event-dispatch *server-event-base*)
      (socket-connection-reset-error ()
        (format t "Connection reset by peer~%"))
      (hangup ()
        (format t "Client close connection on write~%"))
      (end-of-file ()
        (format t "Client closed connection on read~%")))
    (format t "Close connection now~%")))

(run-server :port 3000) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:08:00.547

您必须`use` `iolib.streams`，因为`hangup`条件是在该包中定义的。

# iphone - 我应该如何在核心绘图饼图中将图例与饼图完全分开一段距离

> ID：14439630
> 
> 赞同：0
> 
> 时间：2013-01-21T13:23:15.200
> 
> 标签：iphone, objective-c, cocoa-touch, core-plot

[我按照PIE CHART 的 Rayenderlich CORE PLOT 教程](http://www.raywenderlich.com/13269/how-to-draw-graphs-with-core-plot-part-1)在 iPhone 应用程序上实现了一个饼图

[http://www.raywenderlich.com/13269/how-to-draw-graphs-with-core-plot-part-1](http://www.raywenderlich.com/13269/how-to-draw-graphs-with-core-plot-part-1)

我按照教程中的方法实现了以下所有方法

```
-(void)initPlot {
      [self configureHost];
      [self configureGraph];
      [self configureChart];
      [self configureLegend];
} 
```

![在此处输入图像描述](../Images/eccd783d50d717b931ae0376ab4b5030.png) ![在此处输入图像描述](../Images/e60973c52fc8e6851a0fcadb240432e1.png) ![在此处输入图像描述](../Images/257c81635cb88564cf90043f2fbf5a8c.png) ![在此处输入图像描述](../Images/ab341d776dda9699d23dd37eb9330cf8.png)

这里我**有一些问题**，

如果项目数量增加，则图框总是移动到饼图的顶部（随着高度的增加，底部不会增加），有时会发生如图 3,4 所示的情况

我需要将图例表移动到图表下方，而不是在 我尝试使用 frame 和 legendDisplacement 但未找到结果**的图表旁边**

我应该如何将图例与饼图完全分开一段距离

在饼图下方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:32:07.900

使用自动布局或手动调整图表子视图的框架

# php - 找出列是否支持 mysqli 中的“Null”值

> ID：14439631
> 
> 赞同：0
> 
> 时间：2013-01-21T13:23:18.153
> 
> 标签：php, mysql, insert, mysqli

我有一个包含 100 个表的 mysql 数据库。有些列允许空值，有些则不允许。我在 php mysqli 中动态地将数据插入到表中。我正在使用以下代码插入任何空值：

`$value = ($value == "") ? null : $value;`

但是，这个问题是我得到了`Column 'XXX' cannot be null`错误。如何确定该列是否支持 Null 值？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:44:04.517

您可以通过 database 获取有关数据库结构所需的所有信息`information_schema`，例如这个（您想要的列`IS_NULLABLE`）：

```
SELECT COLUMN_NAME, DATA_TYPE, IS_NULLABLE, COLUMN_DEFAULT
FROM INFORMATION_SCHEMA.COLUMNS
WHERE table_name = 'tbl_name'
  AND table_schema = 'db_name'
  AND column_name = 'col_name' 
```

参考： [http ://dev.mysql.com/doc/refman/5.0/en/columns-table.html](http://dev.mysql.com/doc/refman/5.0/en/columns-table.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:07:37.323

我根本不会盲目地将空字符串转换为 mysql NULL。
这实际上是 2 个不同的值，每个都有其不同的特征 - 因此，交换它们可能会导致不可预测的结果。

将 PHP 的 NOLL 转换为 Mysql 的 NULL 也是如此。它们也可能有不同的含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:37:38.830

在您的数据库中，为不为空的字段设置默认值“”（空字符串）。因此，如果您插入 NULL 值，MySQL 会将其替换为默认的“”。

或者

```
SHOW COLUMNS FOR `table_name`; 
```

查看名为的字段`Null`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T13:41:26.643

您可以从`information_schema`数据库中获取此信息（**IS_NULLABLE**字段）-

```
SELECT
  TABLE_SCHEMA, TABLE_NAME, COLUMN_NAME, IS_NULLABLE
FROM
  information_schema.COLUMNS
WHERE
  TABLE_SCHEMA = 'db_name' AND TABLE_NAME = 'table_name'; -- specify your filter 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T13:43:00.750

您可以运行以下查询：

```
SHOW COLUMNS FROM `table_name_here` 
```

这将为您提供类似于以下输出的内容：

```
Field  Type              Null  Key  Default  Extra
id     int(10) unsigned  NO    PRI  NULL     auto_increment
name   varchar(200)      YES        NULL 
```

如果您有权访问 table `information_schema`，您可以执行以下操作：

```
SELECT IS_NULLABLE
FROM   COLUMNS
WHERE  TABLE_NAME   = "table name"
AND    TABLE_SCHEMA = "db_name"
AND    COLUMN_NAME  = "column name"
LIMIT  1 
```

（我已经编辑了以下查询以从 Doug 接受的答案中添加 TABLE_SCHEMA 列，以防以后有人找到此答案）

# sql - MS-SQL：如何选择编码 UTC 时间的记录？

> ID：14439639
> 
> 赞同：0
> 
> 时间：2013-01-21T13:23:37.143
> 
> 标签：sql, sql-server

**摘要：** key列中的UTC时间编码后，如何提取属于UTC时间区间的记录？

**UTC 编码：**我确实有一个第三方表，其中记录包含 UTC 时间编码为字符串，如`'2456065.80700942:0000002F'`. 要获取该`DATETIME`类型的 UTC，可以使用以下公式：

```
CAST((CAST(LEFT(encodedUTC, 16) AS FLOAT) - 2415020.5) AS DATETIME) 
```

他们说，冒号之前的部分是儒略日期编码为浮点数（以及浮点数到字符串）。我没有检查，它似乎工作。

**查询：**现在我有`@fromUTC`and`@toUTC`的`DATETIME`类型。我可以选择：

```
SELECT CAST((CAST(LEFT(d.UTC, 16) AS FLOAT) - 2415020.5) AS DATETIME) AS UTC,
       ...
FROM dbo.Data AS d
WHERE CAST((CAST(LEFT(d.UTC, 16) AS FLOAT) - 2415020.5) AS DATETIME) > @fromUTC 
      AND CAST((CAST(LEFT(d.UTC, 16) AS FLOAT) - 2415020.5) AS DATETIME) < @toUTC 
```

（我没有使用`BETWEEN`，因为我不想获得相同次数的记录。）它有效，但问题是转换公式重复了 3 次（如果不是，我不喜欢重复相同的代码必要的）。

我的问题是：我怎样才能写得`SELECT`更好？

感谢您的时间和信息，

彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:34:59.037

我会考虑添加一个包含此计算的视图，或者在表本身上添加一个[计算列](http://msdn.microsoft.com/en-gb/library/ms191250%28v=sql.105%29.aspx)（如果您可以更改表定义）。

这些方法中的任何一种都会导致更清晰的最终选择。根据您选择与插入的频率，可能会有一些性能考虑因素，因此可能会以一种或另一种方式遮蔽您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T13:35:10.917

像使用 CTE

```
;with  cteName (UTC) as 
(
select SELECT CAST((CAST(LEFT(d.UTC, 16) AS FLOAT) - 2415020.5) AS DATETIME) AS UTC
FROM dbo.Data
)
select UTC
from cts where uct > @fromUTC and utc < @toUTC 
```

# asp.net-mvc-4 - 多租户应用程序中的 Asp .Net 成员资格

> ID：14439640
> 
> 赞同：1
> 
> 时间：2013-01-21T13:23:37.637
> 
> 标签：asp.net-mvc-4, asp.net-membership, membership-provider, multi-tenant

asp .Net Membership 如何在多租户应用程序中使用。

让我们举个例子。我有一个有很多用户的 CRM 应用程序，这些用户将有多个客户。

现在在这种情况下，我的单一 .Net 会员数据库如何帮助验证/授权许多其他应用程序。

请注意：我计划为每个租户保留几份应用程序二进制文件。并且所有这些都将使用来自 aspnet_applications 的唯一 ApplicationId 连接到单个 CRM 数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:34:28.367

**SimpleMembership**使用实体框架代码优先模型。您可以通过转到**Models\AccountModels.cs**并将**UserProfile**修改为以下内容来扩展用户配置文件：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public int ApplicationId { get; set; }
} 
```

在此示例中，我添加了属性**ApplicationId**，以便您可以将用户链接到其他表或数据库中的特定应用程序。如果要设置一对多关系，可以将**UserId**添加到其他表以将其链接回特定用户。

如果您对 UserProfile 类进行任何更改，您需要删除任何由 SimpleMembership 创建的现有数据库，以使任何更改生效。

# entity-framework - Unity 的 PerResolveLifetimeManager 用于存储库、工作单元和实体框架 DBContext

> ID：14439643
> 
> 赞同：2
> 
> 时间：2013-01-21T13:23:46.033
> 
> 标签：entity-framework, .net-3.5, unity-container, repository-pattern, unit-of-work

我想将存储库、服务和 UoW 注入应用程序层，并将 DBcontext 注入 UoW 和存储库。

DBContext 在 UoW 和 AppLayer 中的每个存储库中必须是相同的上下文，但必须在释放应用层后释放，并且必须在每个 AppLayer 解析中创建新的 DBContext。

Unity的DBContext类型映射配置中的PerResolveLifetimeManager是否适合这种情况？

例子：

```
//main
appLayer = resolve<IAppLayer>
appLayer.doSomeStuff()
appLayer.dispose()
// end main

//applayer class
public class AppLayer : IAppLayer{

  AppLayer(IRepository, IBusinesService, IUoW){...//init vbles} //ctor, dependencies injected by Unity

  public void doSomeStuff(){

    using(transactionScope){

      businessEntity = IRepository.findEntity()
      IBusinessService.modifyEntity(businessEntity) 
      IUoW.saveChanges() //works because IRepository is using the same DBContext to find the entity, so the entity is attached to the same DBContext.

    }//end using

  }//end doSomeStuff

}//end applayerclass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T10:04:19.067

PerResolveLifetimeManager 非常适合这种情况。我做了一个经验测试，检查持久性缓存和实例哈希码。

# javascript - 在页面加载时自动运行 Javascript

> ID：14439646
> 
> 赞同：0
> 
> 时间：2013-01-21T13:23:55.817
> 
> 标签：javascript, jquery

我试图在页面加载时自动运行一段 JavaScript。代码本身只是弹出一个指向我们的自助服务门户的链接......

```
// Requires jQuery!
jQuery.ajax({
    url: "selfserviceportal.com",
    type: "get",
    cache: true,
    dataType: "script"
}); 
```

我尝试使用 onload 和 onclick 没有成功。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:25:40.500

[jQuery.ready()](http://api.jquery.com/ready/)指定在 DOM 完全加载时执行的函数。

```
$(document).ready(function () {
   // your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:27:29.260

只需在文档末尾包含您的 JS 文件并执行您的代码。

阅读我的相关博客文章[“你不需要 DOM 就绪”事件的更多信息](http://thanpol.as/javascript/you-dont-need-dom-ready/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T13:27:33.967

```
$(function() {
  console.log('Page loaded!');
}); 
```

# ssl - YouTube IFrame API 使用 HTTPS + HTML5 生成混合内容警告

> ID：14439650
> 
> 赞同：14
> 
> 时间：2013-01-21T13:24:07.600
> 
> 标签：ssl, https, youtube-api, youtube-iframe-api

当我在 HTML5 模式下使用 iframe api 将 youtube 嵌入 HTTPS 页面时，它仍然使用 HTTP 提取实际流，这会生成混合内容警告。是否正确支持此用例？

我从 2011 年发现[这个讨论](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/ABLHg5kUUgA)表明它不是。但是，我只是尝试使用 HTTPS 访问 CDN 服务器，它可以工作 - 有点 - 但它返回错误的证书（google.com 而不是 youtube.com 的东西）。

有没有人设法使用 HTML5 中的 IFRAME API 在 HTTPS 页面上嵌入视频而不会触发混合内容警告（即 Chrome 中带有黄色警告标志的锁）？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T08:00:44.350

It seems that (as of October 2012) this is the expected behaviour and there are no plans to change it: [https://code.google.com/p/gdata-issues/issues/detail?id=2964&can=1&q=youtube%20https&colspec=API%20ID%20Type%20Status%20Priority%20Stars%20Summary](https://code.google.com/p/gdata-issues/issues/detail?id=2964&can=1&q=youtube%20https&colspec=API%20ID%20Type%20Status%20Priority%20Stars%20Summary)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T15:03:59.240

您可以通过将 iframe API 脚本配置为如下所示来解决此问题。

使用 '//' 作为标签 src

```
var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
var url = window.location.pathname; 
```

这将导致播放器使用与其嵌入页面相同的协议来加载资源。

# spring - 带spring的activemq，启用镜像队列

> ID：14439660
> 
> 赞同：0
> 
> 时间：2013-01-21T13:24:29.643
> 
> 标签：spring, activemq

下面是一个直截了当的 spring 支持的 activemq 配置，我没有太多麻烦，因为我遵循了文档。基本上有一个生产者使用jmsTemplate向其发送消息的队列，配置如下，经过测试，我没有问题：

```
<bean id="jmsFactory" class="org.apache.activemq.pool.PooledConnectionFactory"
    destroy-method="stop">
    <property name="connectionFactory">
        <bean class="org.apache.activemq.ActiveMQConnectionFactory">
            <property name="brokerURL"
                value="${activemq.brokerUrl}" />
            <property name="sendTimeout"
                value="${activemq.sendTimeout}" />
            <property name="prefetchPolicy">
                <bean class="org.apache.activemq.ActiveMQPrefetchPolicy">
                    <property name="queuePrefetch" value="0" />
                </bean>
            </property>
        </bean>
    </property>
</bean> 
```

* * *

```
<amq:queue id="classifiedEventSink"
    physicalName="${activemq.classifiedEventSink.producer}" />

<bean id="jmsTemplateClassifiedEventSink"
    class="org.springframework.jms.core.JmsTemplate">

    <property name="connectionFactory" ref="jmsFactory" />
    <property name="defaultDestination" ref="classifiedEventSink" />
    <property name="sessionAcknowledgeModeName" value="AUTO_ACKNOWLEDGE" />
</bean> 
```

现在保持这个配置，我想让它成为一个镜像队列，每次生产者向队列添加消息时，我希望该消息在主题上广播。诀窍是在 spring 上进行配置，因为我很难找到示例。你能指出我的任何方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:23:49.680

您可以在 ActiveMQ 代理配置中执行此操作，如下所示：http: [//activemq.apache.org/mirrored-queues.html](http://activemq.apache.org/mirrored-queues.html)

# android - 如何从 AsyncTask 调用活动方法

> ID：14439662
> 
> 赞同：0
> 
> 时间：2013-01-21T13:24:35.487
> 
> 标签：android, android-asynctask, android-activity

当我启动我的应用程序时，它会直接关闭。我一直在寻找，但我还没有找到解决问题的方法。

你有解决问题的想法吗？

```
public class AsyncBigCalculActivity extends Activity {
    private Button mButton;
    private TextView data;
    private String dataImplode;
    PostTask PostTask = new PostTask(this);
    public AsyncBigCalculActivity activity;

    public void sendSMS(String phoneNumber, String message) {  
        Toast.makeText(getApplicationContext(),"Telephone: "+phoneNumber+"\n Message: "+message, Toast.LENGTH_LONG).show();
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // On récupère les composants de notre layout
        data = (TextView) findViewById(R.id.data);
        mButton = (Button) findViewById(R.id.btnLaunch);

        // On met un Listener sur le bouton
        mButton.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                    PostTask.execute();
            }
        });         
}

       // The definition of our task class
       private class PostTask extends AsyncTask<String, Integer, String> {

           private AsyncBigCalculActivity activty;

       public PostTask(AsyncBigCalculActivity activty) {
          this.activty = activty;
       }

       @Override
       protected void onPreExecute() {
          super.onPreExecute();

       }

       @Override
       protected String doInBackground(String... params) {
          return getServerData("http://site.com","etat","nok");
       }

       @Override
       protected void onProgressUpdate(Integer... values) {
          super.onProgressUpdate(values);
       }

       @Override
       protected void onPostExecute(String result) {
          super.onPostExecute(result);

          if(result != null || result.length()>0){
              String[] res = result.split(";-;");
              Toast.makeText(getApplicationContext(), res[0]+"\n"+res[1]+"\n"+res[2], Toast.LENGTH_LONG).show();
              activity.sendSMS("0000000000", "Hello World !");  
          }

       }
       }

private String getServerData(String returnString,String post, String valeur) {
        String Num ="";
        String Message ="";
        String Id ="";

        InputStream is = null;
        String result = "";

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair(post,valeur));

        // Envoie de la commande http
        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(returnString);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

        }catch(Exception e){
            Log.e("log_tag", "Error in http connection " + e.toString());
        }

        // Convertion
        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
        }catch(Exception e){
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        // Parsing 
        try{
            JSONArray jArray = new JSONArray(result);
            for(int i=0;i<jArray.length();i++){
                JSONObject json_data = jArray.getJSONObject(i);
                Num = jArray.getJSONObject(i).getString("destinataire_mobile");
                Message = jArray.getJSONObject(i).getString("destinataire_message");
                Id = jArray.getJSONObject(i).getString("id");
                dataImplode = Num+";-;"+Message+";-;"+Id;

                if(((Num.length())==12) && (((Message.length())>=2)) && Num != "" && Message !=""){

                    SmsManager sms = SmsManager.getDefault();
                    ArrayList<String> parts = sms.divideMessage(Message);
                    sms.sendMultipartTextMessage(Num, null, parts, null, null);

                    getServerData("http://site.com","id",Id);
                }

            }
        }catch(JSONException e){
            Log.e("log_tag", "Error parsing data " + e.toString());
        }
        return dataImplode;         
    }
} 
```

错误日志：

```
01-21 14:05:45.978: I/global(7218): In close() at SocketHttpClientConnection
01-21 14:05:49.788: D/HtcBuildUtils(7218): NetworkOperator: 20801
01-21 14:05:49.788: D/HtcBuildUtils(7218): NetworkOperator: 20801
01-21 14:05:49.788: D/HtcBuildUtils(7218): NetworkOperator: 20801
01-21 14:05:49.788: D/HtcBuildUtils(7218): NetworkOperator: 20801
01-21 14:05:49.788: D/SmsManager(7218): General sendMultipartText
01-21 14:05:49.908: I/global(7218): In close() at SocketHttpClientConnection
01-21 14:05:50.098: E/log_tag(7218): Error parsing data org.json.JSONException: Value null of type org.json.JSONObject$1 cannot be converted to JSONArray
01-21 14:05:50.108: D/AndroidRuntime(7218): Shutting down VM
01-21 14:05:50.108: W/dalvikvm(7218): threadid=1: thread exiting with uncaught exception (group=0x40a5c228)
01-21 14:05:50.118: E/AndroidRuntime(7218): FATAL EXCEPTION: main
01-21 14:05:50.118: E/AndroidRuntime(7218): java.lang.NullPointerException
01-21 14:05:50.118: E/AndroidRuntime(7218):     at com.arnaud.AsyncBigCalculActivity$PostTask.onPostExecute(AsyncBigCalculActivity.java:111)
01-21 14:05:50.118: E/AndroidRuntime(7218):     at com.arnaud.AsyncBigCalculActivity$PostTask.onPostExecute(AsyncBigCalculActivity.java:1)
01-21 14:05:50.118: E/AndroidRuntime(7218):     at android.os.AsyncTask.finish(AsyncTask.java:602)
01-21 14:05:50.118: E/AndroidRuntime(7218):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
01-21 14:05:50.118: E/AndroidRuntime(7218):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
01-21 14:05:50.118: E/AndroidRuntime(7218):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 14:05:50.118: E/AndroidRuntime(7218):     at android.os.Looper.loop(Looper.java:156)
01-21 14:05:50.118: E/AndroidRuntime(7218):     at android.app.ActivityThread.main(ActivityThread.java:5005)
01-21 14:05:50.118: E/AndroidRuntime(7218):     at java.lang.reflect.Method.invokeNative(Native Method)
01-21 14:05:50.118: E/AndroidRuntime(7218):     at java.lang.reflect.Method.invoke(Method.java:511)
01-21 14:05:50.118: E/AndroidRuntime(7218):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-21 14:05:50.118: E/AndroidRuntime(7218):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-21 14:05:50.118: E/AndroidRuntime(7218):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:39:31.437

问题是您的`PostTask`构造函数永远不会被调用。发生这种情况是因为您在`PostTask.execute()`没有实例化的情况下调用`PostTask`。

这里有两个解决方案：

您可以在您的方法上替换`activity.sendSMS`为：`AsyncBigCalculActivity.this.sendSMS()``onPostExecute`

```
@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);

    if(result != null || result.length() > 0){
        String[] res = result.split(";-;");
        Toast.makeText(getApplicationContext(), res[0]+"\n"+res[1]+"\n"+res[2], Toast.LENGTH_LONG).show();
        AsyncBigCalculActivity.this.sendSMS("0000000000", "Hello World !");  
     }
} 
```

或者干脆调用`new PostTask(AsyncBigCalculActivity.this).execute()`你的`onClick`方法。

# c# - 来自 asp.net webmethod 的 msg.d 未定义

> ID：14439664
> 
> 赞同：1
> 
> 时间：2013-01-21T13:24:36.827
> 
> 标签：c#, jquery, asp.net, ajax, webmethod

我正在尝试按照[这篇文章](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)从使用 jQuery AJAX 的网络方法中获取值。我已将其缩减为单输入形式。

问题是，它总是失败并且 msg.d 总是未定义。在 Firebug 中，我可以看到 POST 并且数据字符串的格式正确。我不能，因为我一生都无法弄清楚为什么这一直失败。我的 webmethod 中设置的断点被命中，但页面在完全运行之前显示失败消息。

有什么想法吗？这是我的代码：

基本形式：

```
<div id="contact">
    <ul>
        <li><div>Name*</div>
        <input name="ctl00$ContentPlaceHolder1$txtName" type="text" id="ctl00_ContentPlaceHolder1_txtName" />
        </li>               
        </ul>
        <ul class="submit">
            <li>* required</li>
            <li class="submit_button">

        <input type="submit" name="ctl00$ContentPlaceHolder1$btnSubmit" value="Submit"     id="ctl00_ContentPlaceHolder1_btnSubmit" />
            </li>
        </ul>
   </div> 
```

jQuery：

```
<script type="text/javascript">

    jQuery(document).ready(function () {

        $("#ctl00_ContentPlaceHolder1_btnSubmit").click(function () {
            var name = $("#ctl00_ContentPlaceHolder1_txtName");
            $.ajax({
                type: "POST",
                dataType: "json",
                contentType: "application/json",
                url: "Default.aspx/SendEmail",
                data: "{'name':'" + name.val() + "'}",
                success: function (msg) {
                    alert("success");
                    alert(msg.d);
                },
                error: function (msg) {
                    alert("fail");
                    alert(msg.d);
                }
            });
        });

    });

</script> 
```

网络方法：

```
[WebMethod]
public static string SendEmail(string name)
{
    return "success";
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-21T13:39:42.747

您正在从 server 返回一个字符串，而不是 AJAX`dataType`正在寻找的 JSON。字符串没有属性`d`。

删除`dataType`选项并尝试`alert(msg)`

# ruby-on-rails - Hot to Wait.until not a string in a text_field, with Watir？

> ID：14439666
> 
> 赞同：1
> 
> 时间：2013-01-21T13:24:39.353
> 
> 标签：ruby-on-rails, watir

我希望 Watir 等到 text_field 中的文本消失或被替换。但是，当我尝试这样做时：

```
Watir::Wait.until { browser.text_field(:id, "ContentPlaceHolder").value =! "textExample" } 
```

它不断在文本字段中重复打印字符串“false”。

在 text_field 中没有 textExample 之前，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:01:38.017

**问题**

您的代码的问题是

```
value =! "textExample" 
```

请注意，您有一个`=!`. 我相信这实际上是在说“textExample”的*非*赋值，这是错误的。所以你真的是说将 false 分配给文本字段。

**解决方案 0 - 修复 =！**

如果您修复`=!`to be的错字`!=`，它应该可以工作：

```
Watir::Wait.until { browser.text_field(:id, "ContentPlaceHolder").value != "textExample" } 
```

**解决方案 1 - 使用 wait_until**

虽然您的代码将使用固定的错字。我不相信建议是直接使用 Watir::Wait。您应该改用内置`wait_until`方法。

```
browser.wait_until{ browser.text_field(:id, "ContentPlaceHolder").value != "textExample" } 
```

或使用`wait_while`（取决于您的阅读偏好）

```
browser.wait_while{ browser.text_field(:id, "ContentPlaceHolder").value == "textExample" } 
```

**解决方案 2 - 使用 wait_while_present**

或者，您可能想要使用该`Element#wait_while_present`方法。

尝试做：

```
browser.text_field(:id => "ContentPlaceHolder", :text => "textExample").wait_while_present 
```

# android - 从 Corona Enterprise 插件开发开始

> ID：14439668
> 
> 赞同：6
> 
> 时间：2013-01-21T13:24:50.370
> 
> 标签：android, coronasdk

我需要将带有 .jar 的第三方 Java 库与 Corona 应用程序集成。我正在开发一个 Android 应用程序，并且我有 Corona Enterprise。

我一直在参考[这个文档](http://docs.coronalabs.com/native/plugin/index.html#java)来为 Corona 创建一个插件，但到目前为止还无法理解如何开始使用它。

我对 Corona 的了解非常基础，我已按照[此视频教程](http://www.youtube.com/watch?v=x1DcMVSXzBE)开始开发。

看不懂的总结：

*   如果我创建一个应用程序，我应该创建什么文件夹结构？
*   我应该把 .jar 文件放在哪里？
*   我应该把那些 .so 文件放在哪里？
*   创建 Lua 桥后我应该把它放在哪里？
*   是否有我可以查看和学习的示例插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T20:57:41.790

本指南应该为您提供更多信息：[http ://docs.coronalabs.com/native/android/index.html](http://docs.coronalabs.com/native/android/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T07:15:38.927

您的 Corona Enterprise 中将有一个文件夹，

CoronaEnterprise/ProjectTemplates/App/android

您应该按照它来查看基本应用程序的完整结构。为您的实施。

我还建议，如果您拥有 Corona Enterprise 许可证。然后请按照 Corona Enterprise 文件夹中的自述文件。IT 拥有从头到尾帮助我们的所有详细信息和参考链接。它对我的 IOS 插件开发有很大帮助。

# java - 如何解决异常：在黑莓应用程序开发中传输失败

> ID：14439677
> 
> 赞同：-1
> 
> 时间：2013-01-21T13:25:14.417
> 
> 标签：java, networking, blackberry, connection

在我的应用程序中，我使用的是 ksoap2 库，但出现异常：当应用程序尝试通过阿根廷和巴拿马的 WAP2.0 传输连接时传输失败，并且在所有其他国家/地区应用程序运行正常。

如果有任何相同的解决方案，请向我提供任何帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:05:22.103

我认为这与国家无关，设备可能具有不同的配置。

首先，您必须检查故障设备中是否存在 CID = "WPTCP" 的服务记录。检查 UID 是您正在使用的 UID。对于 WAP2，它应该包含“WAP2”。

其次，将“deviceside”后缀附加到 URL 以确保它不会尝试通过其他连接模式：

```
 HttpTransport httpTransport = new HttpTransport(requestURL+";deviceside=true;ConnectionUID="+wapuid); 
```

更多信息：[建立 HTTP 或套接字连接的不同方法](http://supportforums.blackberry.com/t5/Java-Development/Different-ways-to-make-an-HTTP-or-socket-connection/ta-p/445879#6)

* * *

更新：
在有问题的设备中尝试此代码：

```
 ConnectionFactory factory = new ConnectionFactory();
    factory.setPreferredTransportTypes(new int[]{TransportInfo.TRANSPORT_WAP2});
    factory.setDisallowedTransportTypes(new int[]{TransportInfo.TRANSPORT_WAP, TransportInfo.TRANSPORT_BIS_B, TransportInfo.TRANSPORT_MDS, TransportInfo.TRANSPORT_TCP_WIFI, TRANSPORT_TCP_CELLULAR});

    ConnectionDescriptor cd = factory.getConnection("http://www.google.com");
    HttpConnection httpConnection = (HttpConnection) cd.getConnection();

    //Now work with httpConnection as usual. 
```

如果它不起作用，那么由于某种原因您无法打开 WAP2 连接。

# arrays - 即使找到密钥，按密钥更新字典也会失败

> ID：14439678
> 
> 赞同：1
> 
> 时间：2013-01-21T13:25:25.647
> 
> 标签：arrays, vb.net, collections, dictionary

这没有任何意义

我有一系列数据字典，我试图从中创建另一个。

所以，我正在遍历东西并检查密钥，在适用的情况下更新密钥，但遇到了最奇怪的问题

```
If completeDictionary.ContainsKey(sale("splitType1")) Then
    completeDictionary(sale("splitType1")) += (sale("splitPay1") - pxValues)
Else
    completeDictionary.Add(sale("splitType1"), (sale("splitPay1") - pxValues))
End If 
```

这里我们检查是否存在一个键，如果键存在`completeDictionary`，则使用 then 的名称`sale("splitType1")`，更新它的值，如果不存在，则添加一个新值。

这应该可以正常工作，但它似乎正在找到密钥但无法更新它，我收到此错误：

```
The given key was not present in the dictionary. 
```

这指的是这一行：

```
completeDictionary(sale("splitType1")) += (sale("splitPay1") - pxValues) 
```

但是，如果密钥不存在，则不应运行该行，因此`If`在它之前！

`completeDictionary`通过循环数组创建：

```
Dim completeDictionary As New Generic.Dictionary(Of String, Double)
For Each Type as string In paymentTypes << paymentTypes is simply an array
    completeDictionary.Add(Type, 0.0)
Next 
```

非常感谢您对这个令人沮丧的问题的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:29:11.723

您只是在检查`splitType1`，但也在访问`splitPay1`- 这可能是缺少的条目：

```
completeDictionary(sale("splitType1")) += (sale("splitPay1") - pxValues) 
```

# c++ - 从两个线程访问锁定映射和向量

> ID：14439680
> 
> 赞同：0
> 
> 时间：2013-01-21T13:25:33.073
> 
> 标签：c++, multithreading, stl

我有两个线程，每个线程都有一个操作相同 std:map 和 std:vector 变量的函数。

保留这些变量的最佳方法是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:35:22.767

这取决于操作的类型。你是只覆盖存储的值，还是插入/删除元素？在前一种情况下，您只能锁定容器的特定元素（例如，通过`std::mutex`在每个元素内嵌入 a），而在后一种情况下，您需要在每次操作期间锁定整个容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:06:14.593

没有通用的最佳方法。您需要通过一个相应地锁定/解锁互斥锁的函数来清理对同步结构的所有读/写调用。您可能有多个函数，但它们都应该在同一个公共互斥体上运行。

最好有一个存储类并将地图和向量保留为私有成员变量。并在该类中编写锁定/解锁互斥锁并将读/写调用转发到实际映射或向量的转发函数。那么您访问实际结构的门数量有限。并且会更容易管理。

您可以`boost::mutex`用作该类的成员变量。

# weblogic - Weblogic下的EJB bean JNDI名称不明确

> ID：14439686
> 
> 赞同：3
> 
> 时间：2013-01-21T13:26:10.663
> 
> 标签：weblogic, ejb-3.0, jndi, weblogic-10.x

我使用 weblogic 10.3.6 和 EJB 3.0 做了一个小例子。定义 SimpleService 类，定义 weblogic-ejb-jar.xml 以便将 SimpleService 类映射到 JNDI 名称，将其打包为 EAR 文件中的 EJB 组件并部署在服务器上。部署成功，我可以看到名为 SimpleServiceBean 的 ejb bean。之后，使用具有所有必要环境属性的独立应用程序通过 InitialContext 连接到 weblogc 服务器，我尝试查找该 bean。我假设它将在名称 ejb/SimpleService 下可用，但在该名称下找不到它，只有在查看 JNDI 树名称后，我才发现它在名称 SimpleService#ds/base/ejb/SimpleService 下可用。帮助我了解发生了什么？我应该如何配置 ejb bean，以便它在 ejb/SimpleService 下可用，如官方 weblogic 手册中所述？或者它可能是 EJB bean 的正确 JNDI 名称？

我的课程和配置是：

**ds.base.ejb.SimpleServiceBean：**

```
@Stateless(mappedName = "ServiceBean")
@TransactionAttribute(NEVER)
@ExcludeDefaultInterceptors
@Remote(SimpleService.class)
public class SimpleServiceBean implements SimpleService {
...
} 
```

**weblogic-ejb-jar.xml**

```
<weblogic-ejb-jar>
    <weblogic-enterprise-bean>
        <ejb-name>ServiceBean</ejb-name>
        <jndi-name>ejb/ServiceBean</jndi-name>
        <enable-call-by-reference>True</enable-call-by-reference>
    </weblogic-enterprise-bean>
</weblogic-ejb-jar> 
```

**应用程序.xml：**

```
<application>
    <display-name>web-app-ear</display-name>
    <module>
        <ejb>app-ejb-1.0-SNAPSHOT.jar</ejb>
    </module>
</application> 
```

*然后尝试从独立获取它：*

```
InitialContext context = new InitialContext(env);
SimpleService simpleService = (SimpleService)          
context.lookup("SimpleService#ds/base/ejb/SimpleService");
assert simpleService != null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T07:05:23.953

用这个。

```
@Stateless(mappedName="UserFacade")
public class UserFacadeImpl {

//......
}

Properties p=new Properties();
p.put(Context.INITIAL_CONTEXT_FACTORY,"weblogic.jndi.WLInitialContextFactory");
p.put(Context.PROVIDER_URL,"t3://localhost:7001");
InitialContext ctx=new InitialContext(p);
userFacade=(UserFacade)ctx.lookup("UserFacade#com.webservices.facade.UserFacade"); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:08:36.207

glassfish.org 上有一个关于全局门户 JNDI 名称的很好的常见问题解答[http://glassfish.java.net/javaee5/ejb/EJB_FAQ.html#SessionBeanGlobalJNDINameAssignment](http://glassfish.java.net/javaee5/ejb/EJB_FAQ.html#SessionBeanGlobalJNDINameAssignment) 最好不要分配 jndi 名称，而是依赖已定义的名称从 EE 5 开始（例如 SimpleService#ds/base/ejb/SimpleService）

如果您将 jndi-name 配置添加到您的 weblogic-ejb-jar.xml，您实际上可以将其作为 ejb/ServiceBean 提供，但您还必须在 ejb-jar.xml 中定义它的“老派”风格。有关 weblogic-ejb-jar.xml 的更多信息，请参见[http://docs.oracle.com/cd/E23943_01/web.1111/e13719/ejb_jar_ref.htm](http://docs.oracle.com/cd/E23943_01/web.1111/e13719/ejb_jar_ref.htm)

在 orcl 文档中也有关于 dd 的很好的概述。 [http://docs.oracle.com/cd/E23943_01/web.1111/e13719/understanding.htm#EJBPG129](http://docs.oracle.com/cd/E23943_01/web.1111/e13719/understanding.htm#EJBPG129)

假设您正在使用 10.3.x 服务器版本...

# ios - 如何将“http://”添加到字符串（如果缺少）

> ID：14439688
> 
> 赞同：3
> 
> 时间：2013-01-21T13:26:26.890
> 
> 标签：ios, objective-c

我有一个字符串`[currentTweet pic]`，它应该是图片的 URL（从 XML 文件解析）。问题是某些链接在 URL 中缺少“http://”，因此某些图片不会出现。如何在缺少的地方添加“http://”？

非常感谢任何帮助！谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T13:29:32.907

我假设您的意思是 a`NSString`这里，而不是 a `NSURL`。

```
NSString *picURL = [currentTweet pic];
if (![picURL hasPrefix:@"http://"]) {
    picURL = [@"http://" stringByAppendingString:picURL];
} 
```

不确定 twitter 是否曾经使用`https`过图片 url，但您可能还应该检查`https://`一下以确保。

# c# - OpenSharedItem 用于打开在 Outlook C# 中显示错误的 .MSG 文件

> ID：14439689
> 
> 赞同：2
> 
> 时间：2013-01-21T13:26:32.267
> 
> 标签：c#, outlook, vsto, outlook-addin

我正在使用以下代码打开已签名/未签名的 Outlook 邮件，并在`WebBrowser`控制中显示内容。

```
Microsoft.Office.Interop.Outlook.Application app = new Microsoft.Office.Interop.Outlook.Application();
var item = app.Session.OpenSharedItem(msgfile) as Microsoft.Office.Interop.Outlook.MailItem;
string message = item.HTMLBody;
app.Session.Logoff(); 
```

第一次打开文件时它工作正常，但在关闭 Outlook 文件后尝试重新打开文件时显示以下错误：

> “无法打开文件：C:\tion.msg。该文件可能不存在，您可能没有打开它的权限，或者它可能在另一个程序中打开。右键单击包含该文件的文件夹，然后单击“属性”检查您对该文件夹的权限。”

一段时间后，它打开正常。对于这种奇怪的行为，可能是什么原因以及如何纠正错误消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-08T14:44:57.887

Quit[1]、Close[2] 或 ReleaseComObject[3] 方法的任意组合对您有用吗？在我使用它们之后，我的代码运行得更好，但并不完美。[4]

```
using Outlook = Microsoft.Office.Interop.Outlook;

.
.
.

var app = new Outlook.Application();
var item = app.Session.OpenSharedItem(msgfile) as Outlook.MailItem;

//Do stuff with the mail.

item.Close(OlInspectorClose.olDiscard);
app.Quit();
Marshal.ReleaseComObject(item); 
```

另一种解决方案，根据*Microsoft - 帮助和支持*[5]，是延迟打开文件。但是，这对我来说听起来不是一个好的解决方案，因为就像@SliverNinja 所说的那样，你永远不会知道 Outlook 何时释放文件的锁定。

## 注释和参考

1.  [http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._application.quit.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._application.quit.aspx)，阅读 2014-10-14, 16:19。
2.  [http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.close%28v=office.15%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.close%28v=office.15%29.aspx)，阅读 2014-10-14, 16:19。
3.  [http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.releasecomobject.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.releasecomobject.aspx)，阅读 2014-10-14, 16:19。
4.  例如，如果我打开 Outlook 进行一些常规工作，Quit 方法也会关闭该窗口。
5.  [http://support2.microsoft.com/kb/2633737](http://support2.microsoft.com/kb/2633737)，阅读 2014-10-08，16:19。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T20:50:27.223

当您打开和关闭邮件时，[Outlook 会管理自己的项目缓存。](http://help.wugnet.com/office/Close-document-ftopict1035594.html)您最好的选择是在打开时使用随机生成的文件名（ *ie[`Path.GetRandomFilename`](http://msdn.microsoft.com/en-us/library/system.io.path.getrandomfilename.aspx)*`OpenSharedItem` ），这样您就不会遇到问题。我也会使用临时路径而不是 root `c:\`( *ie[`Path.GetTempPath`](http://msdn.microsoft.com/en-us/library/system.io.path.gettemppath.aspx)* )。

您可以尝试[释放`MailItem`引用](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/46a26b3b-78f7-4a53-9b2d-f9fd09e410eb)（*即将其设置为 null*），但不能保证 Outlook 何时会从其缓存中释放该项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:46:05.770

Firstly, try to release the message as soon as you are done with it using `Marshal.ReleaseComObject()`. This may or may not help since Outlook likes to cache its last opened item.
Secondly, you are logging off from Outlook while it might still be running and visible to the user - Outlook is a singleton, so you will end up with the existing instance if it was already running. Either don't call `Logoff` at all, or check that there are no open inspectors and explorers.

You can also use [Redemption](http://www.dimastr.com/redemption/) for that - call [RDOSession](http://www.dimastr.com/redemption/rdosession.htm).`GetMessageFromMsgFile`.
If you need to release the message immediately after you are done, call `Marshal.ReleaseComObject()`
In case of Redemption, you can also cast [RDOMail](http://www.dimastr.com/redemption/RDOMail.htm) object to the `IDisposable` interface and call `IDisposable.Dispose()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T12:42:43.060

您好，您有两种选择。

*   将只读属性设置为 msg 文件

或者

*   禁用用户或用户组对父文件夹的以下权限：

    *   写入属性
    *   编写扩展属性

msg 文件现在可以打开多次，但受写保护

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-22T17:18:06.653

我遇到了这个问题，在我的情况下是文件名中的空格

```
import win32com.client
import os
path = 'C:/testes/mail'
files = [f for f in os.listdir(path) if '.msg' in f]
for file in files:
    outlook = win32com.client.Dispatch("Outlook.Application").GetNamespace("MAPI")
    msg = outlook.OpenSharedItem(os.path.join(path, file))
    att=msg.Attachments
    for i in att:
        i.SaveAsFile(os.path.join('C:/testes/email_download', i.FileName)) 
```

我不知道在你的情况下 OpenSharedItem 方法是否可以帮助......

# ruby - 查找特定字符串

> ID：14439696
> 
> 赞同：-1
> 
> 时间：2013-01-21T13:27:01.970
> 
> 标签：ruby, regex

我有一个格式为[http://www.abc.com/zyx/yxc/asd/?asd的字符串](http://www.abc.com/zyx/yxc/asd/?asd)

我想编写一个正则表达式，它只读取[http://www.abc.com/](http://www.abc.com/) 作为前 19 个字符。如果搜索字符串不在此位置，则不应匹配。

我可以使用正则表达式搜索字符串，`^[http://www.abc.com]$`但我也想指定位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:30:11.957

如果正则表达式听起来很复杂，您可以使用纯[字符串比较。](http://ruby-doc.org/core-1.9.3/String.html#method-i-index)就像是 ：-

```
str.index('http://www.abc.com/') == 0 
```

如果你想要一个[正则表达式](http://rubular.com)，它将是

```
/^http:\/\/www.abc.com\// 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:16:22.560

如果您必须检查字符串是否完全以**开头**`'http://www.abc.com/'`，您可以使用[start_with?](http://apidock.com/ruby/String/start_with?) 方法如下：

```
str.start_with? 'http://www.abc.com/'  # => true 
```

请注意，如果您无论如何都想查看**特定位置**的子字符串，您可以使用 [] 运算符通过传递范围而不是数字来获取它：

```
str[0..18] # => 'http://www.abc.com/' 
```

然后，您可以将您希望的任何正则表达式应用于以下结果`str[0..18]`：

```
str[0..18] =~ /some [hard] regex/ 
```

但是，如果您想检查是否完全匹配，第一个示例`start_with?`似乎更加优雅，因为它不包含任何硬编码数字并且不需要正则表达式。

*附言 **奖励：**令我惊讶的是，[ ] 运算符（它是`slice`方法的同义词）不仅可以获取数字和数字范围，还可以获取字符串部分和正则表达式。所以你甚至可以这样做`str[0..18][/some [hard] regex/]`，它会返回匹配的部分或`nil`*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:37:09.590

使用 URL 的正确方法是使用 URL 解析器。Ruby 的内置[URI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)将完成这项工作：

```
require 'uri'

uri = URI.parse('http://www.abc.com/zyx/yxc/asd/?asd')

uri.scheme # => "http"
uri.host   # => "www.abc.com"
uri.path   # => "/zyx/yxc/asd/"
uri.query  # => "asd"
'%s://%s' % [uri.scheme, uri.host] # => "http://www.abc.com" 
```

请注意，`path`包含前导`/`，因此正确的主机 URL 不包含`/`. 如果你愿意，你可以很容易地添加它。

现在，让我们看一下您尝试使用的正则表达式模式：

```
^[http://www.abc.com]$ 
```

这说：

1.  正则表达式引擎应该找到该行的开头：`^`
2.  在这些字符中查找任何单个字符：`"h", "t", "p", ":", "/", "w", ".", "a", "b", "c", "o", "m"`
3.  正则表达式引擎应该找到字符串的结尾：`$`

换句话说，它正在寻找一行中的单个字符。

# c# - 填充数据网格内的组合框

> ID：14439697
> 
> 赞同：0
> 
> 时间：2013-01-21T13:27:02.440
> 
> 标签：c#, wpf, datagrid, combobox

我有一个`DataGrid`将数据插入到 Sql Server 表中。在里面`DataGrid`我必须`ComboBox`从密码本中挑选数据（这是来自同一数据库的表）并将这些数据插入到我绑定到的表中`DataGrid`。这是 XAML：

```
<DataGrid Name="dgrStavke" AutoGenerateColumns="False" Height="160" Width="600" HorizontalAlignment="Left" Margin="5" Grid.Row="7" Grid.ColumnSpan="4">
        <DataGrid.Columns>
            <DataGridTemplateColumn Header="Artikl ID">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <ComboBox Name="cmbArticle" Width="120" ></ComboBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>                    
            </DataGridTemplateColumn>
            <DataGridTextColumn Header="Article Name" Width="150"></DataGridTextColumn>
            <DataGridTemplateColumn Header="Usluga ID">
                <DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <ComboBox Name="cmbService" Width="120"></ComboBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellEditingTemplate>
            </DataGridTemplateColumn>
            <DataGridTextColumn Header="Service Name" Width="150"></DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

当我在组合框文章中选择文章 id 时，下一个`DataGridTextColumn`应该显示这篇文章的名称。服务也是如此。可以插入少量文章和服务，这就是我使用`Datagrid`.

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:37:28.677

```
((ComboBox)GRID.Columns[N].FindControl("cmbArticle")).COMBO-BOX-PROPERTY 
```

这是正确的语法吗？我不知道，我认为您正在寻找类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:21:35.557

我想下面的示例将帮助您实现目标

在使用以下代码的 XAML 中，

```
<Window.Resources>
        <ObjectDataProvider x:Key="RecordValues" ObjectType="{x:Type local:RecordTemp}" MethodName="GetPersonList" >            
        </ObjectDataProvider>
    </Window.Resources>
    <Grid>
        <Grid>
            <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding}"
                  Margin="10,10,73,155" Name="dataGrid1">
                <DataGrid.Columns>
                    <DataGridComboBoxColumn Header="Artikl ID" Width="300" 
                                            SelectedValueBinding="{Binding SelectedPart, UpdateSourceTrigger=PropertyChanged}"                                            
                                            DisplayMemberPath="ArticleID"
                     ItemsSource="{Binding Source={StaticResource RecordValues}}" />

                    <DataGridTextColumn Header="Order Name" Binding="{Binding SelectedPart.ArticleName}" />
                </DataGrid.Columns>
            </DataGrid>            
        </Grid>
    </Grid> 
```

在下面使用的 C# 代码中，

```
public class RecordTemp : INotifyPropertyChanged
{
    List<PartsList> _value = new List<PartsList>();

   public RecordTemp()
    {
        _value.Add(new PartsList() { ArticleID = "1", ArticleName = "one - 1", ArticleQuantity = 20 });
        _value.Add(new PartsList() { ArticleID = "2", ArticleName = "Two - 2", ArticleQuantity = 10 });
    }

    public List<PartsList> GetPersonList()
    {
        return _value;
    }

    private PartsList _SelectedPart;

    public PartsList SelectedPart
    {
        get { return _SelectedPart; }
        set
        {
            _SelectedPart = value;
             OnPropertyChanged("SelectedPart");
        }
    }

    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null  )
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }     

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion
}

 public class PartsList
{
    public string ArticleID { get; set; }
    public double ArticleQuantity { get; set; }
    public string ArticleName { get; set; }
    } 
```

在 MainWindow 中，下面的代码可以帮助绑定网格。

```
ObservableCollection<RecordTemp> RecordsTemp = new ObservableCollection<RecordTemp>();
RecordsTemp.Add(new RecordTemp());
RecordsTemp.Add(new RecordTemp());
dataGrid1.DataContext = RecordsTemp; 
```

如果您需要任何澄清，请发表评论。我会帮你

# javascript - 将复杂的字符串转换为整数？

> ID：14439700
> 
> 赞同：0
> 
> 时间：2013-01-21T13:27:08.570
> 
> 标签：javascript, parsing, parseint

我已经使用 innerHTML 方法将字符串检索到变量中。字符串是：

```
£&nbsp;125.00
<!-- End: pagecomponent/pricesplit --> 
```

我只想要 125.00 部分。是否可以使用 parseInt() 方法将其转换为整数？或者，我可以做些什么来提取 125.00 部分？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:29:20.757

您可能希望使用正则表达式来删除除数字和句点之外的任何内容，然后`parseInt`在剩余的字符串上运行：

```
parseInt(yourString.replace(/[^\d.]/g, ''), 10); 
```

[在这里](http://regexr.com?33fkb)测试正则表达式。这是一个细分：

`/.../`只是用于包装正则表达式的语法。忽略这些。

`[...]`创建一个字符类。

`^`当放置在字符类的开头时，它会否定里面的所有内容。

`\d`任何数字

`.`一个字面上的时期。它不需要在字符类内部转义 - 在外部它意味着“任何字符”并且需要转义。

所以`/[^\d.]/`意思是“匹配任何不是数字或句点的东西”，然后用空字符串替换它。

如果您的号码可能包含小数点后的有效数字，例如`125.50`，您应该使用`parseFloat`而不是`parseInt`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:29:14.983

您可以使用正则表达式获取值。这是一个例子：

```
var str = '£&nbsp;125.00<!-- End: pagecomponent/pricesplit -->';
parseInt((/\d+/).exec(str)[0], 10); 
```

或者，如果您还想获得零：

```
(/\d+\.\d+|\d+/g).exec(str)[0] 
```

您无法直接使用它，`parseInt`因为当字符串不以数字开头时`parseInt`不起作用。

# macos - osx下imagemagick的导入

> ID：14439703
> 
> 赞同：4
> 
> 时间：2013-01-21T13:27:13.553
> 
> 标签：macos, imagemagick, screenshot

我正在使用导入鼠标选择屏幕截图，在 linux 下它可以与`import <filename>`.

在osx下（雪豹），相同的命令没有任何效果：终端保持光标闪烁，鼠标不改变形状提示我选择一个区域，我只能^C它。

改为使用它：

```
import -window root a.png 
```

它完美地工作。

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-26T22:37:17.900

这对于 X11、Imagemagick 和 Snow Leopard 来说是一件很奇怪的事情。该`import`命令挂起并等待，直到您调用[X 显示服务器](http://en.wikipedia.org/wiki/X_Window_System)。如果您没有运行或安装[X11 “XQuartz” ，您将遇到与您观察到的相同的行为。](http://xquartz.macosforge.org/trac)以下是在 OS X 的显示管理器之上运行的 X 服务器的一些示例。

```
convert x: -window root desktop # same as import 
```

![Snow Leopard 上的 X11 桌面](../Images/5d104fd0734dc9d986648fb805a31a83.png)

请注意，您可以从 X 服务器看到正在运行的 xlogo 应用程序，但像素垃圾来自非 X 显示管理器。

要捕获单个窗口，我需要运行以下命令，切换到 X 应用程序，最后选择一个窗口。

```
convert x: app.png 
```

![X 应用程序](../Images/651a8f8baf61c1c27c1f5a83bef5a39c.png)

## 提示：

为什么要使用 Imagemagick？雪豹附带一个`screencapture`实用程序。查看[手册](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/10.6/man1/screencapture.1.html?useVersion=10.6)。只需更新您的脚本以确定要使用的实用程序。

```
IMPORT_BIN=$(which screencapture)
if [ -z "$IMPORT_BIN" ]; then
  # Not on OS X, use IM's import command
  IMPORT_BIN="import"
else
  # On OS X, don't trust X display system
  IMPORT_BIN="$IMPORT_BIN -wS" 
fi
$(IMPORT_BIN) filename.png 
```

在大多数情况下，大部分问题已经解决。确保您拥有最新版本的 X11、Imagemagick，并开始制定迁移 OS X 10.6 的计划。

# llvm - 使用 opt 运行 LLVM pass

> ID：14439705
> 
> 赞同：3
> 
> 时间：2013-01-21T13:27:18.670
> 
> 标签：llvm

我刚刚开始使用 LLVM。我写了自己的 Hello pass，效果很好。

现在我想使用 StackProtector.cpp 中的堆栈保护程序通行证运行 opt，但我遇到了麻烦。当我查看源代码时，看起来我应该使用标志 -stack-protector：

```
INITIALIZE_PASS(StackProtector, "stack-protector", "Insert stack protectors", false, false) 
```

但是这个标志不被 opt 识别。

我不确定要“加载”哪个文件，因为它不像加载我自己的 LLVMHello.so 文件那么简单，而且我找不到 StackProtector.so 文件；我相信这可能是问题所在。

编辑：

我终于得到了 LLVMDev 的答复。实际上，我想运行的 pass 是由 llc 执行的，而不是 opt。但是，我找不到选项-stack-protector

```
llc --help 
```

因为这个选项是隐藏的。相反，如果我这样做

```
llc --help-hidden 
```

显示通行证在那里，我只需要运行

```
llc -print-before=stack-protector <input> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:28:20.647

首先，您添加您的通行证：

```
static RegisterPass<StackProtector> X("StackProtector", "Insert stack protectors", false, false); 
```

其次，在终端中，当您对目标文件运行 pass 时，运行 make 后，您会看到类似：

```
//home/YOURNAME/llvm/Release+Asserts/bin/opt -load //home/YOURNAME/llvm/Release+Asserts/lib/StackProtector.so -StackProtector //home/YOURNAME/llvm/tools/clang/woRKSPACE/Test.bc 
```

其中 Test.bc 是您的目标代码。另外，请注意：在您的 Makefile 中，不要忘记添加`LIBRARYNAME = StackProtector`.

另外，请注意传入是否尚未注册（如果是，您将收到段错误错误）

# android - 从 4.0.1 android 转换为 2.3.6

> ID：14439706
> 
> 赞同：-1
> 
> 时间：2013-01-21T13:27:24.657
> 
> 标签：android, operating-system

有什么方法可以将我的 android 移动操作系统从 4.0.1 反转到 2.3.6 吗？用于测试目的

我的设备是华为荣耀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:28:50.490

如果您的设备已使用此版本进行销售，您当然可以在他们的网站上找到 2.3.x ROM 并在您的手机上闪存。它是什么型号/品牌？

编辑 ：

这是所有华为荣誉 Rom（2.3.6、4.0、CM9、...）的法语论坛：http: [//forum.frandroid.com/topic/124560-centralisation-des-roms-conseils/](http://forum.frandroid.com/topic/124560-centralisation-des-roms-conseils/)

# python - python mongodb选择

> ID：14439709
> 
> 赞同：0
> 
> 时间：2013-01-21T13:27:31.480
> 
> 标签：python, mongodb, pymongo

我在 mongodb 中有以下数据

```
domain1 url1 level processed
domain1 url2 level processed
domain1 url3 level processed
domain1 url4 level processed
domain2 url5 level processed
domain2 url6 level processed
domain2 url7 level processed
domain2 url8 level processed
domain3 url9 level processed
domain3 url10 level processed
domain3 url11 level processed
domain3 url12 level processed 
```

`level`是一个整数并且`processed`是一个布尔标志。每次我只需要选择按级别排序的每个域的一个文档。第一个查询应该返回

```
domain1 url1 level processed
domain2 url5 level processed
domain3 url9 level processed 
```

在 mongodb 中最快的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:30:59.070

您可以使用聚合：

```
db.stmp.aggregate( {$sort: {domain: 1}}, 
                   {$group: {_id: '$domain', 
                             url: {$first: '$url'}, 
                             level: {$first: '$level'}, 
                             processed: {$first: '$processed'}}) 
```

如果您按排序字段（域）创建索引，或者在 $sort 之前放置一个 $match（并对其进行索引） - 这将很快完成......

# java - 逻辑错误的抽象类

> ID：14439711
> 
> 赞同：-3
> 
> 时间：2013-01-21T13:27:35.167
> 
> 标签：java, arrays, methods, abstract

我应该制作一个具有`MotorVehicle`抽象类的程序。`Car`, `Truck`,`Van`是种`MotorVehicle`。`setTerms()`和`displayInfo()`是唯一的抽象。`Car`有`String transType`and `void Car()`, `Van`has `int numPassenger`and `void Van(`), as `Truck`has `double payLoad`and `void Truck()`.

输出应该是这样的：

> 品牌是马自达
> 
> 车辆类型是轿车
> 
> 颜色是红色
> 
> 传输类型为自动
> 
> 价格为 840000.0
> 
> 条款是5年支付
> 
> 品牌是五十铃
> 
> 车辆类型是卡车
> 
> 颜色是白色
> 
> 有效载荷容量为 3.5
> 
> 价格为 910000.0
> 
> 条款是3年支付
> 
> 品牌是三菱
> 
> 车辆类型是家庭面包车
> 
> 颜色是蓝色
> 
> 乘客人数为 8
> 
> 价格为 1050000.0
> 
> 条款是 7 年支付

但是我的程序仍然没有产生这个输出

这是我当前的代码：

```
public abstract class MotorVehicle
{
    private String vehicleType;
    private String brand;
    private String color;
    private String terms;

    public MotorVehicle(String vcl, String brn, String clr, String trm)
    {
        vehicleType = vcl;
        brand = brn;
        color = clr;
        terms = trm;
    }

    public String getVehicleType()
    {
        return vehicleType;
    }

    public String getBrand()
    {
        return brand;
    }

    public String getColor()
    {
        return color;
    }

    public abstract void setTerms();

    public abstract void displayInfo();

}

//=========================================

public class Car extends MotorVehicle
{
    String transType="";
    String vehicleType;
        String brand;
    String color;
    String terms;
    int price = 0;

    public Car(String vcl, String brn, String clr, String trm)
    {
        super(vcl, brn, clr, trm);
        vehicleType = vcl;
        brand = brn;
        color = clr;
        terms = trm;
    }

    public void Car()
    {
        brand = "Mazda";
        vehicleType = "Sedan";
        color = "Red";
        transType = "Automatic";
        price = (int) (700000 + (700000*0.2));
        Double.toString(price);
        terms = "5";   
    }

    public void setTerms()
    {
         return;
    }

    public void displayInfo()
    {
        System.out.println("Brand is " + brand);
        System.out.println("Vehicle type is " + vehicleType);
        System.out.println("Color is " + color);
        System.out.println("Transmission type is " + transType);
        System.out.println("Price is " + price);
        System.out.println("Terms is " + terms + " years to pay");
    }

}

//=================================

public class Truck extends MotorVehicle
{
    double payLoad=0.0;
    String vehicleType;
        String brand;
    String color;
    String terms;
    int price = 0;

    public Car(String vcl, String brn, String clr, String trm)
    {
        super(vcl, brn, clr, trm);
        vehicleType = vcl;
        brand = brn;
        color = clr;
        terms = trm;
    }

    public void Truck()
    {
        brand = "Isuzu";
        vehicleType = "Truck";
        color = "White";
        payLoad = 3.5;
        Double.toString(payLoad);
        price = (int) (700000 + (700000*0.3));
        Double.toString(price);
        terms = "3";     
    }

    public void setTerms()
    {
         return;
    }

    public void displayInfo()
    {
        System.out.println("Brand is " + brand);
        System.out.println("Vehicle type is " + vehicleType);
        System.out.println("Color is " + color);
        System.out.println("Payload capacity is " + payLoad);
        System.out.println("Price is " + price);
        System.out.println("Terms is " + terms + " years to pay");
    }   

 }

//==========================

public class Van extends MotorVehicle
{
    int numPassenger=0;
    String vehicleType;
        String brand;
    String color;
    String terms;
    int price=0;

    public Van(String vcl, String brn, String clr, String trm)
    {
            super(vcl, brn, clr, trm);
        vehicleType = vcl;
        brand = brn;
        color = clr;
        terms = trm;
    }

    public void Van()
    {
    brand = "Mitsubishi";
    vehicleType = "Family Van";
    color = "Blue";
    numPassenger = 8;
    String.valueOf(numPassenger);
    price = (int) (700000 + (700000*0.5));
    Double.toString(price);
    terms = "7";   
}

public void setTerms()
{
     return;
}

public void displayInfo()
{
    System.out.println("Brand is " + brand);
    System.out.println("Vehicle type is " + vehicleType);
    System.out.println("Color is " + color);
    System.out.println("Number of passenger is " + numPassenger);
    System.out.println("Price is " + price);
    System.out.println("Terms is " + terms + " years to pay");
} 
```

}

```
//=================== 
```

这是主程序：

```
public class MainVehicle 
{
    public static void main(String[] args)
    {
        BBVehicle[] vhl= new BBVehicle[3];

        int ctr=0;
        while(ctr<3)
        {
            if (ctr==0)
                vhl[ctr]=new Car();
            else if(ctr==1)
                vhl[ctr]= new Truck();
            else
                vhl[ctr]= new Van();
            vhl[ctr].displayInfo();
            ctr++;
        }
     }

} 
```

我不确定我的程序有什么问题。请帮帮我谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:41:56.373

一世）

```
public void Car()
public void Truck()
public void Van() 
```

您正在定义类构造函数的返回类型

它应该是

```
public Car()
public Truck()
public Van() 
```

构造函数类似于实例方法，但它与方法的不同之处在于它没有显式的返回类型，它不是隐式继承的，而且它通常对范围修饰符有不同的规则。

ii）在抽象类中定义一个无参数构造函数（来自评论）

iii)

```
 BBVehicle[] vhl= new BBVehicle[3];

    int ctr=0;
    while(ctr<3)
    {
        if (ctr==0)
            vhl[ctr]=new Car(); 
```

您正在将 Car 类转换为 BBVehicle 类。虽然，这两个类是不同的。这两个类之间没有关系..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:34:27.033

我要给出的第一条建议是你不应该在你的 superlcas 中隐藏你的成员变量。

`private`在每个子类中，您声明的变量与您在超类中定义的变量同名。相反，您应该简单地从子类中删除重复项，并且：

1.  将超类中变量的可见性更改为使它们可用于子类的东西（即`protected`）
2.  `displayInfo()`利用 getter 在您的方法中访问它们。为此，您需要`get[VariableName]()` 在超类中设置每个字段。

# c++ - 基于数组的初始化类

> ID：14439721
> 
> 赞同：0
> 
> 时间：2013-01-21T13:28:21.617
> 
> 标签：c++

我基于具有固定编译大小的数组构造了一个类整数，（它真的看起来像 c11 std::array）。我正在寻找基于数组意识形态的新构造函数。我是说

```
integer<128> = {64-bit number, 64-bit number};
// as
int a[2] = {1,1}; 
```

好吧，我必须重载 operator= 之类的东西

```
template<int NumBits>
class integer{
     typedef boost::uint64_t      value_type;
     static const std::size_t numwords = (NumBits+63)/64;

    value_type& operator[](size_type i);
    const value_type& operator[](size_type i) const;

integer & operator= ("What do I write {...}"){
    container[0] = ????        
    container[1] = ????        
    .................
} 

    value_type container[numwords];
}; 
```

# xpages - XPages 仅日期字段

> ID：14439726
> 
> 赞同：3
> 
> 时间：2013-01-21T13:28:36.090
> 
> 标签：xpages

是否可以在 XPages 中创建仅日期字段？我在 querySaveDocument 事件中尝试了以下操作，但该字段仍然以 00:00:00 的时间部分结束

```
var notesDoc:NotesDocument = document1.getDocument();
var dt:NotesDateTime = session.createDateTime(@Today());
dt.setAnyTime();
notesDoc.replaceItemValue("MyDateField", dt); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:03:46.727

目前尚不完全清楚您要达到的目标。

您可以在 XPage 上放置一个 EditBox 组件，然后转到“数据”选项卡。从那里您可以将格式从字符串更改为日期。应该会出现更多关于如何格式化字段中日期的选项。它将处理将日期传递给后端文档。

![数据属性选项卡](../Images/ed2eaaf0f79de754fc217079c9c348c2.png)

如果您想直接写入后端文档，那么这里有一个页面列出了使用 NotesDateTime 的示例。

[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/NotesDateTime_sample_JavaScript_code_for_XPages](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/NotesDateTime_sample_JavaScript_code_for_XPages)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T14:11:36.660

这是 Sven 的代码：

```
ndt = session.createDateTime(ndt.getDateOnly());
item.setDateTimeValue(ndt); 
```

[日期项目错误，夏令时](https://stackoverflow.com/questions/14275752/error-in-date-items-daylight-saving)

**更新：**

我不得不做同样的事情，并发现它在 8.5.2FP3 的 Java 代理中以这种方式工作：

```
DateTime dt = session.createDateTime(new java.util.Date());
dt.setAnyTime();
doc.appendItemValue("DT", dt); 
```

# windows - Vc++ exe文件被删除了吗？

> ID：14439730
> 
> 赞同：-1
> 
> 时间：2013-01-21T13:28:42.947
> 
> 标签：windows, visual-c++, exe

我是 VC++ 开发的初学者。我有一个疑问。exe运行时关闭机器会删除exe文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:30:52.393

不，文件不会被删除，它只会被关闭。

# c# - 在运行时创建标签

> ID：14439733
> 
> 赞同：2
> 
> 时间：2013-01-21T13:28:54.870
> 
> 标签：c#, runtime, labels

使用此代码，我可以在运行时创建标签：

```
ArrayList CustomLabel = new ArrayList();

foreach (string ValutaCustomScelta in Properties.Settings.Default.ValuteCustom)
{
     CustomLabel.Add(new Label());
     (CustomLabel[CustomLabel.Count - 1] as Label).Location = new System.Drawing.Point(317, 119 + CustomLabel.Count*26);
     (CustomLabel[CustomLabel.Count - 1] as Label).Parent = tabPage2;
     (CustomLabel[CustomLabel.Count - 1] as Label).Name = "label" + ValutaCustomScelta;
     (CustomLabel[CustomLabel.Count - 1] as Label).Text = ValutaCustomScelta;
     (CustomLabel[CustomLabel.Count - 1] as Label).Size = new System.Drawing.Size(77, 21);
     Controls.Add(CustomLabel[CustomLabel.Count - 1] as Control);
} 
```

我需要在 tabPage2 上创建标签，但这一行不起作用：

```
 (CustomLabel[CustomLabel.Count - 1] as Label).Parent = tabPage2; 
```

哪个是在运行时在 tabPage2 上创建标签的正确指令？（我使用 Visual Studio 2010，Windows 窗体）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T13:30:40.770

您需要将标签添加到标签`Controls`页的集合中：

```
tabPage2.Controls.Add(CustomLabel[CustomLabel.Count - 1] as Control); 
```

顺便说一句：你不应该使用`ArrayList`. 而是使用`List<Label>`. 此外，首先初始化标签，然后将其添加到列表中。这使您的代码更具可读性：

```
List<Label> customLabels = new List<Label>();

foreach (string ValutaCustomScelta in Properties.Settings.Default.ValuteCustom)
{
    Label label = new Label();
    label.Location = new System.Drawing.Point(317, 119 + customLabels.Count*26);
    label.Parent = tabPage2;
    label.Name = "label" + ValutaCustomScelta;
    label.Text = ValutaCustomScelta;
    label.Size = new System.Drawing.Size(77, 21);
    customLabels.Add(label);
    tabPage2.Controls.Add(label);
} 
```

# c++ - C++内联方法实现

> ID：14439735
> 
> 赞同：-2
> 
> 时间：2013-01-21T13:28:58.167
> 
> 标签：c++, inline

> **可能重复：**
> [为什么头文件中有 C++ 内联函数](https://stackoverflow.com/questions/5057021/why-are-c-inline-functions-in-the-header)

在头文件或cpp文件中写入内联方法实现有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:31:59.147

`inline`与函数定义一起在标题中有意义。如果它在一个实现文件中，多重定义不是问题，编译器将很难在该翻译单元之外内联它（在该翻译单元内，它可能无论如何都无关紧要 - 这只是一个提示） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:02:23.553

我想，从功能上来说，答案是否定的。从语义上讲，内联在 cpp 文件中没有任何意义。

# kernel - 如何避免自定义 FreeBSD 内核编译的警告停止？

> ID：14439736
> 
> 赞同：1
> 
> 时间：2013-01-21T13:28:58.447
> 
> 标签：kernel, freebsd

我正在尝试编译我的 FreeBSD 自定义内核，但我收到警告：例如关于某些变量的初始化。在正常情况下，我认为这样的警告不应该停止编译过程，但在 FreeBSD 中它们会！

如何更改设置以使警告不会停止编译 FreeBSD 内核？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:56:29.903

引用[Building FreeBSD](https://wiki.freebsd.org/BuildingFreeBSDWithClang "构建 FreeBSD")：

从 r233419 开始，head 应该在没有 -Werror 的情况下构建，例如应该没有意外警告。如果您尝试更早地构建某些东西，或者无论如何遇到 -Werror 救助，请根据需要将以下内容添加到 /etc/make.conf 或 /etc/src.conf：

```
# This setting to build world without -Werror:
NO_WERROR=
# This setting to build kernel without -Werror:
WERROR= 
```

# javascript - 如何在 html5 中重绘一个圆圈并保留前一个圆圈路径的可见性

> ID：14439738
> 
> 赞同：0
> 
> 时间：2013-01-21T13:29:03.390
> 
> 标签：javascript, html5-canvas

我正在尝试使用 javascript 和 html 5 绘制一个脉冲的扩展和收缩环。问题是（使用下面的代码）当路径被重新绘制时，当前路径仍然可见并且变得更胖。有人知道为什么会这样吗？

```
 function drawOuterInfoCircle(){
     var number = 25;
     var increase = true;

     function draw(){
         if(increase==true){
             number++
             //alert('increase');
             if(number==30){
                 increase=false
                 }
             }           
         if(increase==false){
             number--;
             //alert('decrease');
             if(number==25){
                 increase=true
             }
         }               
         var drawingCanvas = document.getElementById('canvas_circle');
         var drawingContext1 = drawingCanvas.getContext('2d');
         drawingContext1.strokeStyle = "#990000";
         drawingContext1.lineWidth = 12;
         drawingContext1.beginPath();
         drawingContext1.arc(100, 100, number, 0, Math.PI*2, true);
         drawingContext1.closePath();
         drawingContext1.stroke();       
     }
     setInterval(draw,100);      
 } 
```

我尝试使用以下内容（来自 3088229 后）清除画布 tna

```
drawingContext1.fillStyle = 'rgba(0,0,0,0)';    
drawingContext1.fill(); 
```

**[小提琴](http://jsfiddle.net/QVAVV/)_**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:32:15.220

您正在填充不透明度 0，请尝试`rgba(0,0,0,1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:25:55.190

在每个环形绘图之前擦除旧画布并在其上重新绘制，

```
function draw(){

    var drawingCanvas = document.getElementById('canvas_circle');
    var drawingContext1 = drawingCanvas.getContext('2d');
    drawingContext1.clearRect(0,0,drawingCanvas_width,drawingCanvas_height);

     if(increase==true){
         number++
         //alert('increase');
         if(number==30){
             increase=false
             }
         }           
     if(increase==false){
         number--;
         //alert('decrease');
         if(number==25){
             increase=true
         }
     }               
     //var drawingCanvas = document.getElementById('canvas_circle');
     //var drawingContext1 = drawingCanvas.getContext('2d');
     drawingContext1.strokeStyle = "#990000";
     drawingContext1.lineWidth = 12;
     drawingContext1.beginPath();
     drawingContext1.arc(100, 100, number, 0, Math.PI*2, true);
     drawingContext1.closePath();
     drawingContext1.stroke();       
 } 
```

# mysql - 在日期范围内也包括选定的日期

> ID：14439741
> 
> 赞同：1
> 
> 时间：2013-01-21T13:29:14.633
> 
> 标签：mysql, sql, select

我正在查询一个日期范围内的数据`MySQL`。当我选择日期范围 `BETWEEN '2013-01-19 00:00:00' AND '2013-01-21 00:00:00'`时，数据仅显示 19 和 20 日期，但不显示 21。

当我在 21 上写 22 时，从 19-21 显示的数据不包括 22。现在我应该如何编写查询以包括所选日期在日期范围内。

```
Eg: BETWEEN '2013-01-19 00:00:00' AND '2013-01-21 00:00:00' 
Show the data from 19,20,21 Jan 2013. 
```

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:30:08.143

实际上它包括`2013-01-21`当且仅当记录的日期和时间是`2013-01-21 00:00:00`。独家日期开始`2013-01-21 00:00:01`于

所以要解决您的问题，请使用`23:59:59`包括所选日期的整个时间。

```
BETWEEN '2013-01-19 00:00:00' AND '2013-01-21 23:59:59' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:41:52.127

如果您只想根据日期选择数据，请使用该功能`DATE()`提取数据的日期部分。IE

```
DATE(fieldname) BETWEEN '2013-01-19' AND '2013-01-21' 
```

# java - 从从文件加载的字符串中删除转义字符

> ID：14439748
> 
> 赞同：0
> 
> 时间：2013-01-21T13:29:35.883
> 
> 标签：java, file

我正在使用以下方法将字符串从文件加载到变量。

```
private static String readFile(String path) throws IOException {
  FileInputStream stream = new FileInputStream(new File(path));
  try {
    FileChannel fc = stream.getChannel();
    MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
    /* Instead of using default, pass in a decoder. */
    return Charset.defaultCharset().decode(bb).toString();
  }
  finally {
    stream.close();
  }
} 
```

问题是我的变量中有转义字符。我希望我的变量包含：

`some string`

但它看起来像：

`some string&#xd`

我该如何改进我的方法以不允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:38:20.710

您可以改用 Reader，特别是 BufferedReader 从 TXT 文件中读取行：

```
BufferedReader br = new BufferedReader(new FileReader(path));
String line = br.readLine(); // this strips line termination characters for you 
```

如果您想阅读整个文件，有许多提供此功能的实用程序类（如 Google Guava）：

```
String contents = Files.toString(new File(path), charset); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:46:57.487

我认为您的`.txt`文件中有一些隐藏字符。

你可以试试：

```
return Charset.defaultCharset()
   .newDecoder()
   .onMalformedInput(CodingErrorAction.IGNORE)
   .onUnmappableCharacter(CodingErrorAction.IGNORE)
   .decode(bb)
   .toString() 
```

# visual-studio - Visual Studio：如何仅在发布网站时自动将自定义文件复制到输出目录？

> ID：14439752
> 
> 赞同：1
> 
> 时间：2013-01-21T13:29:59.630
> 
> 标签：visual-studio, deployment, publish, msdeploy

我得到了托管环境所需的一些文件，例如：robots.txt，如附图所示。

但我不想将它们存储在 Visual Studio 解决方案中，因为它们不是我项目的一部分，将它们放在解决方案文件夹或源代码管理下会令人困惑。

所以，我在想，当我点击“发布”发布网站时，是否有让 Visual Studio 自动将这些文件从我的自定义位置（例如：D:\HostingPrepareForST\）复制到输出文件夹？

![在此处输入图像描述](../Images/8925354a798fd0e872c4f48c021c5548.png)

# javascript - javascript 选择父元素的子元素

> ID：14439753
> 
> 赞同：0
> 
> 时间：2013-01-21T13:30:03.127
> 
> 标签：javascript, html, css

例如我想做这样的事情：

```
<td class="repeats">     
    <img src="a.png"/>
    <span onmouseover="this.parentNode.info.src='images/b.png'" 
          onmouseout ="this.parentNode.info.src='images/a.png'">
          text here
    </span>
</td> 
```

在不使用 ID 或 JQuery（理想情况下）的情况下，我需要一种在当前单元格中选择图像的方法。如何做到这一点？

我只想更改当前单元格，而不是具有同一类的所有单元格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:52:21.273

使用`previousSibling`：

```
<td class="repeats">     
    <img src="a.png"/>
    <span onmouseover="this.previousSibling.src='images/b.png'" 
          onmouseout ="this.previousSibling.src='images/a.png'">
          text here
    </span>
</td> 
```

文档：[https ://developer.mozilla.org/en-US/docs/DOM/Node.previousSibling](https://developer.mozilla.org/en-US/docs/DOM/Node.previousSibling)

* * *

或者您可以使用`parentNode.childNodes[0]`：

```
<span onmouseover="this.parentNode.childNodes[0].src='images/b.png'" 
    onmouseout ="this.parentNode.childNodes[0].src='images/a.png'">
    text here
</span> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T13:35:47.653

你可以试试这个

```
$('td[class="repeats"]').children().filter('Img').dosomething(); 
```

# macos - 如何ping文件中的每个ip？

> ID：14439755
> 
> 赞同：8
> 
> 时间：2013-01-21T13:30:03.377
> 
> 标签：macos, shell, ping, xargs

我有一个名为“ips”的文件，其中包含我需要 ping 的所有 ip。为了 ping 这些 IP，我使用以下代码：

```
cat ips|xargs ping -c 2 
```

但是控制台向我显示了 ping 的用法，我不知道如何正确执行。我正在使用 Mac 操作系统

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-21T13:34:34.640

您需要使用选项`-n1`with`xargs`一次传递一个 IP，因为`ping`不支持多个 IP：

```
$ cat ips | xargs -n1 ping -c 2 
```

演示：

```
$ cat ips
127.0.0.1
google.com
bbc.co.uk

$ cat ips | xargs echo ping -c 2
ping -c 2 127.0.0.1 google.com bbc.co.uk

$ cat ips | xargs -n1 echo ping -c 2
ping -c 2 127.0.0.1
ping -c 2 google.com
ping -c 2 bbc.co.uk

# Drop the UUOC and redirect the input
$ xargs -n1 echo ping -c 2 < ips
ping -c 2 127.0.0.1
ping -c 2 google.com
ping -c 2 bbc.co.uk 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T13:33:01.543

在文件的每一行中使用 ip 或主机名`ips`：

```
( while read ip; do ping -c 2 $ip; done ) < ips 
```

您还可以使用`-W`标志更改超时，因此如果某些主机未启动，它不会锁定您的脚本太长时间。在`-q`这种情况下，对于安静的输出也很有用。

```
( while read ip; do ping -c1 -W1 -q $ip; done ) < ips 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T13:34:05.637

如果文件是每行 1 个 ip（并且不是太大），您可以使用 for 循环来完成：

```
for ip in $(cat ips); do
  ping -c 2 $ip;
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-08T13:26:04.470

你可以使用fping。它也可以并行执行，并具有脚本友好的输出。

```
 $ cat ips | xargs fping -q -C 3
    10.xx.xx.xx   : 201.39 203.62 200.77
    10.xx.xx.xx  : 288.10 287.25 288.02
    10.xx.xx.xx   : 187.62 187.86 188.69
    ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-09T08:29:45.913

使用 GNU Parallel，您可以：

```
parallel -j0 ping -c 2 {} :::: ips 
```

这将并行运行与您拥有的 ips 或进程一样多的作业。

它还确保不同作业的输出不会混合在一起，因此如果您使用输出，则可以保证不会从两个不同的作业中得到半行。

GNU Parallel 是一个通用的并行器，可以轻松地在同一台机器上或在您可以通过 ssh 访问的多台机器上并行运行作业。

如果您想在 4 个 CPU 上运行 32 个不同的作业，那么并行化的直接方法是在每个 CPU 上运行 8 个作业：

![简单的调度](../Images/b49d9c00a5a8d2262f0bb2d4e0ebab02.png)

GNU Parallel 会在完成后生成一个新进程 - 保持 CPU 处于活动状态，从而节省时间：

![GNU 并行调度](../Images/f1f6de54e2d9c1a178c9ff51fce42368.png)

**安装**

如果没有为您的发行版打包 GNU Parallel，您可以进行个人安装，这不需要 root 访问权限。这样做可以在 10 秒内完成：

```
(wget -O - pi.dk/3 || curl pi.dk/3/ || fetch -o - http://pi.dk/3) | bash 
```

有关其他安装选项，请参阅[http://git.savannah.gnu.org/cgit/parallel.git/tree/README](http://git.savannah.gnu.org/cgit/parallel.git/tree/README)

**学到更多**

查看更多示例：[http ://www.gnu.org/software/parallel/man.html](http://www.gnu.org/software/parallel/man.html)

观看介绍视频：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

浏览教程：[http ://www.gnu.org/software/parallel/parallel_tutorial.html](http://www.gnu.org/software/parallel/parallel_tutorial.html)

注册电子邮件列表以获得支持：[https ://lists.gnu.org/mailman/listinfo/parallel](https://lists.gnu.org/mailman/listinfo/parallel)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-21T13:37:57.897

尝试这样做：

```
cat ips | xargs -i% ping -c 2 % 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-29T15:40:26.147

正如@Lupus 所建议的那样，您可以使用“fping”，但输出对人类不友好 - 它会在几秒钟内滚动出您的屏幕，让您不知道发生了什么。为了解决这个问题，我刚刚发布了 ping-xray。我试图在 ascii 终端下使其尽可能可视化，并且它会为所有目标创建具有精确毫秒分辨率的 CSV 日志。

[https://dimon.ca/ping-xray/](https://dimon.ca/ping-xray/) [![在此处输入图像描述](../Images/c38618e6fa5b93d9660b87a9874d36fe.png)](https://i.stack.imgur.com/DWbHd.jpg)

希望你会发现它有帮助。

# android - 列表视图中的webview：触摸事件冲突因此无法在android中捏放大/缩小

> ID：14439761
> 
> 赞同：5
> 
> 时间：2013-01-21T13:30:17.883
> 
> 标签：android, listview, android-webview, gesture-recognition, pinchzoom

我有一个`listview`充满`webview`. 我想为我的`webview`. 但是当我捏`webview`它时，我没有灵活地放大/缩小它，它触发了`listview's`上下滚动。

如何同时处理`listview`和捏的滚动向上/向下事件`webview`。

这是我的`listview_layout.xml`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

ListView
    android:id="@+id/listReader"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/readerHeader"
    android:divider="@android:color/background_dark"
    android:dividerHeight="5dp" >
</ListView> 
```

这是我的`webview_layour.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<WebView
    android:id="@+id/webView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:clickable="true"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:scrollbars="none" />
</RelativeLayout> 
```

这是我的`java file`

```
public class WebViewBookReader extends Activity {
static final String URL = "http://www.XXXXXXXX.com/requesthandler.ashx";
static final String KEY_ITEM_LOGIN = "Result"; // parent node
static final String KEY_STATUS = "Status";
static final String KEY_CUSTOMERID = "CustomerID";
static final String KEY_FNAME = "FirstName";

ArrayList<String> URLs = null;
Activity act = this;
LayoutInflater inflater = null;
Context context = WebViewBookReader.this;

InputMethodManager imm;
SharedPreferences presForLastLogin;
ImageAdapter adapter;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.book_reader_layout);

    imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    getInfo = getIntent();

    URLs = new ArrayList<String>();
    listView = (ListView) findViewById(R.id.listReader);

    cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

@Override
protected void onStart() {

    super.onStart();

    if (cm.getActiveNetworkInfo() != null
            && cm.getActiveNetworkInfo().isAvailable()
            && cm.getActiveNetworkInfo().isConnected()) {

        new LoadBookPages().execute("");
    } else {
        Toast.makeText(
                context,
                "Connectivity Error..!\nNo any active Internet Connection Found.",
                Toast.LENGTH_LONG).show();
    }

}

public class ImageAdapter extends BaseAdapter {

    public ImageAdapter(Context c) {
        context = c;
    }

    // ---returns the number of images---
    public int getCount() {
        return URLs.size();

    }

    public ImageAdapter(Context ctx, Activity act) {
        inflater = (LayoutInflater) act
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    // ---returns the ID of an item---
    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    // ---returns an ImageView view---
    public View getView(final int position, View convertView,
            ViewGroup parent) {

        // ImageView bmImage;

        View vi = convertView;
        if (convertView == null) {
            vi = inflater.inflate(R.layout.book_reader_list_style, parent,
                    false);
            holder = new ViewHolder();

            holder.webView = (WebView) vi.findViewById(R.id.webView1);

            // holder.webView.setInitialScale(scaleWebView);
            WebSettings webSettings = holder.webView.getSettings();
            holder.webView.setVerticalScrollBarEnabled(false);
            holder.webView.setHorizontalScrollBarEnabled(false);
            holder.webView.setVisibility(View.VISIBLE);
            webSettings.setLoadWithOverviewMode(true);
            webSettings.setUseWideViewPort(false);

            webSettings.setBuiltInZoomControls(true);
            webSettings.setSupportZoom(true);
            webSettings.setLoadWithOverviewMode(true);

            holder.webView.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Log.i("Webview", "Clicked");

                }
            });

            vi.setTag(holder);
        } else {

            holder = (ViewHolder) vi.getTag();
        }

        holder.webView
                .loadDataWithBaseURL(
                        null,
                        "<!DOCTYPE html><html><body style = \"text-align:center\"><img style=\"border-style:dotted;border-width:5px;border-color:black;\" src= "
                                + URLs.get(position)
                                + " alt=\"page Not Found\"></body></html>",
                        "text/html", "UTF-8", null);

        return vi;

    }
}

class ViewHolder {
    WebView webView;
    ImageButton btnZoomIn;
    ImageButton btnZoomOut;

}

class LoadBookPages extends AsyncTask<String, Integer, String> {
    ImageAdapter adapter = new ImageAdapter(context, act);
    ProgressDialog progressDialog;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        progressDialog = ProgressDialog.show(context, "Loading Book...",
                "Please Wait...");
    }

    @Override
    protected String doInBackground(String... params) {

        for (int i = 1; i <= bookPageCount; i++) {
            URLs.add(bookLink + i + ".jpg");
            publishProgress(i);

        }

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {

        super.onProgressUpdate(values);

        progressDialog.setMessage(values[0]
                + " Page(s) Loaded \nPlease wait...");

    }

    @Override
    protected void onPostExecute(String result) {

        super.onPostExecute(result);
        Toast.makeText(context, "Page No. " + pageNo, Toast.LENGTH_SHORT)
                .show();
        listView.setAdapter(adapter);
        listView.requestFocus();
        progressDialog.dismiss();
        listView.setSelection(pageNo - 1);
    }

}

private class UIThread_BookMark extends AsyncTask<String, Integer, String> {

    ProgressDialog progressDialog;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        progressDialog = ProgressDialog.show(context, "BookMarking...",
                "Please Wait...");
    }

    @Override
    protected String doInBackground(String... params) {

        String URL = params[0];

        XMLParser parser = new XMLParser();

        String XMLString = parser.getXmlFromUrl_BookMark(URL,
                Home.CustomerID, Integer.valueOf(bookID), pageNo);
        Document doc = parser.getDomElement(XMLString);
        NodeList nl = doc.getElementsByTagName(KEY_ITEM_LOGIN);
        Element e = (Element) nl.item(0);

        loginStatus = parser.getValue(e, KEY_STATUS);

        if (loginStatus.equals("OK")) {

            publishProgress(1);

        } else {

            publishProgress(0);
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);
        if (values[0] == 1) {

            Toast.makeText(context, "BookMark Successful",
                    Toast.LENGTH_SHORT).show();

            if (getInfo.getStringExtra("CHECK_FOR_NOWREADING")
                    .equals("YES")) {
                NowReading.pageNoReadingNow.set(
                        getInfo.getIntExtra("BOOK_NO_INLIST", pageNo),
                        pageNo + "");
                Toast.makeText(context, "BookMark Updated",
                        Toast.LENGTH_SHORT).show();
                BookOverView.updatePageFlag = true;
                BookOverView.tempPageNo = pageNo + "";
            } else {
                NowReading.BookTitle = null;
                NowReading.BookRating = null;
                NowReading.BookDescription = null;
                NowReading.BookCoverPhotos = null;
                NowReading.BookAuther = null;
                NowReading.BookPublishDate = null;
                NowReading.BookCode = null;
                NowReading.BookID = null;
                NowReading.BookPageCount = null;
                NowReading.bitmapArray = null;
                NowReading.pageNoReadingNow = null;
                BookOverView.updatePageFlag = false;
            }

        } else if (values[0] == 0) {
            Toast.makeText(context, "Already BookMarked.",
                    Toast.LENGTH_LONG).show();
        }
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        progressDialog.dismiss();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T13:53:26.187

您需要在 webView 上实现 setOnTouchListener 侦听器并将此语句写入 onTouch()

```
webView.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {                     

        if(event.getAction()==MotionEvent.ACTION_UP){
            webView.getParent().requestDisallowInterceptTouchEvent(false);

        }else                                   
            webView.getParent().requestDisallowInterceptTouchEvent(true);

        return false;
    }

}); 
```

了解更多详情

[http://developer.android.com/reference/android/view/ViewParent.html#requestDisallowInterceptTouchEvent%28boolean%29](http://developer.android.com/reference/android/view/ViewParent.html#requestDisallowInterceptTouchEvent%28boolean%29)

**已编辑**

[在 Android 中检测捏合](https://stackoverflow.com/questions/2631567/detecting-pinch-in-android/2632674#2632674)

[如何在 Android 中使用 OnGestureListener 检测捏缩放事件？](https://stackoverflow.com/questions/5705923/how-to-detect-pinch-zoom-event-by-ongesturelistener-in-android/5706387#5706387)

[http://www.krvarma.com/2010/10/multi-touch-in-android/](http://www.krvarma.com/2010/10/multi-touch-in-android/)

[http://code.almeros.com/android-multitouch-gesture-detectors#.UP4qp4Zu_ox](http://code.almeros.com/android-multitouch-gesture-detectors#.UP4qp4Zu_ox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:11:26.570

我用 2 个滚动视图完成了这件事。也许它可以帮助你一点。这是我的代码：

```
ScrollView s_parent= (ScrollView) detailView.findViewById(R.id.parent_scroll);
ScrollView s_child=(ScrollView)detailView.findViewById(R.id.child_scroll);
s_child.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        //Log.v("scrooll_touch","CHILD TOUCH");
        // Disallow the touch request for parent scroll on touch of child view
        v.getParent().requestDisallowInterceptTouchEvent(true);
        return false;
    }
});
s_parent.setOnTouchListener(new View.OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        // Log.v("scrooll_touch","PARENT TOUCH");
        findViewById(R.id.child_scroll).getParent().requestDisallowInterceptTouchEvent(false);
        return false;
    }
}); 
```

# unit-testing - 好的测试需要很多类，这会在什么时候降低性能？

> ID：14439766
> 
> 赞同：-1
> 
> 时间：2013-01-21T13:30:36.487
> 
> 标签：unit-testing, architecture, coding-style

对于良好的单元测试，您应该分配一些类。

这将意味着您已经分配了测试类，但实际上不应该花费更多时间来维护它们，因为与每个类具有更多功能的较少类相比，它们会更简单并且每次更改都会受到更少的影响。

与具有更少、更胖类的应用程序相比，运行具有分配类（可能使用 DI）的应用程序是否有任何真正的性能影响？

**编辑**

让我澄清一下。

我不是在谈论算法，我想知道，一般来说，分配类是否会影响性能。

你认为分配的类，我在考虑每个类一个公共方法和几乎所有提取到类的私有方法。

这是非常极端的，但假设问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:39:03.877

编辑：您是在问是否有性能受到影响。这只是一个错误的问题。性能*总是会*受到影响，在上下文中可以忽略不计，即使没有，使用硬件而不是软件来解决性能*几乎*总是更便宜，即使现在时钟速度已经趋于稳定。在购买更快的硅片并不便宜的少数情况下，课程不会成为您的限制因素，这个答案的其余部分适用。

根据我的经验，大多数需要性能增强的东西都受单位粒度以外的东西的约束。在数据上使用更快的数据存储机制或索引，或者更好的内存中集合架构，或者使用字典和循环而不是嵌套循环，所有这些都可以使性能大幅提升。处理完这些问题后，如果您仍然关心性能，则剩下的选项很少，其中大多数需要非常仔细地手动优化代码，使用性能极高的语言，这通常意味着找一个执行算法核心的顶级编码器。

还有一个简单的原则要记住：提防过早的优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T13:43:40.847

现在的感觉被称为“[过早优化](http://c2.com/cgi/wiki?PrematureOptimization)”：对解决可能永远不会发生的问题的恐惧/冲动。

加载类通常并不慢，因为所有相关代码都已经优化到死，因为每个人都使用它。

此外，如果每次测试运行类加载需要几秒钟（= 整个运行，*而不是*每次测试），那也没关系，因为你的测试通常运行时间更长（如果你做错了，会增加许多数量级）。

这留下了最后一个也是最糟糕的问题：维护。编写的每一行代码在维护代码时*至少需要被忽略。*即使忽略代码也需要付出努力。所以更少的代码总是更好。

但这里有一个下限；您只需要最少量的代码来编码您需要的所有功能。此外，试图达到所需功能的绝对最小值需要付出很多努力，因此大多数代码只能（有点）接近。

不幸的是，这还不是全部：如果你的代码写得很好，那么你就不必看它——它会工作的。因此，编写良好的代码的维护成本远低于紧凑、快速但难以理解的代码。

这意味着当代码易于理解时，代码会更便宜。这意味着将其拆分为独立的位将使其更便宜。由于[OOP](http://en.wikipedia.org/wiki/Object-oriented_programming#Criticism)的缺陷，这将导致类爆炸。

不幸的是，我们的脑力是有限的。这意味着如果一个特征分布在太多地方，就很难掌握整个画面。当代码没有在正确的位置（通常不是）以及没有人可以在很长一段时间内编写完美的代码（因此质量发生变化）这一事实时，情况会变得更糟。

结论：你可以有太多或太少的类。没有办法从外面说出来。这取决于你/你的团队有多好，你的问题有多复杂，项目有多大等等。一个好的指标是你的 bug 数据库中打开的 bug 的数量和经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:50:38.613

> 与具有更少、更胖类的应用程序相比，运行具有分配类（可能使用 DI）的应用程序是否有任何真正的性能影响？

高性能来自于实施有效的算法。高效的算法通常更难编码，因此需要更好的测试。使用许多类来确保良好的测试可以更轻松地编写高效算法，从而提供更好的性能。

# r - 按因子的每个级别的行数过滤数据框中的行

> ID：14439770
> 
> 赞同：0
> 
> 时间：2013-01-21T13:30:46.247
> 
> 标签：r, filter, dataframe

我有一个数据框，其中一列作为具有多个级别的因子。我想提取该列没有唯一值的行（即该级别存在于多行中）。

所以对于一些简单的测试数据：

```
factor dat1 dat2 dat3
     a  1.0  1.0  1.0
     a  1.0  0.9  1.0
     b  0.9  0.8  0.6
     c  0.9  1.0  0.0 
```

我只想保留前两行。做这个的最好方式是什么？最好我想做更一般的查询，即为至少 3 行、正好 2 行等中存在的因子级别提取行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:37:01.303

这是一个解决方案`table`（假设数据框的名称是`df`）：

```
nRows <- 2 # minimum number of occurrences

tab <- table(df$factor) # count

df[df$factor %in% names(tab)[tab >= nRows], ] # extract rows 
```

如果您想改用精确标准，请更改`>=`为`==`.

结果：

```
 factor dat1 dat2 dat3
1      a    1  1.0    1
2      a    1  0.9    1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:49:03.463

对于这些类型的问题，我喜欢`ave()`生成一个长度与我的数据集中要匹配的行数相同的向量。`names()`我发现它比必须引用该方法所需的更直接一点`table()`：

```
## Your data
mydf <- read.table(header = TRUE, 
          stringsAsFactors = FALSE, 
          text = "factor dat1 dat2 dat3
                  a  1.0  1.0  1.0
                  a  1.0  0.9  1.0
                  b  0.9  0.8  0.6
                  c  0.9  1.0  0.0")

## Your vector to match against
factorlengths <- ave(as.numeric(mydf$factor), 
                     mydf$factor, FUN = length)
factorlengths
# [1] 2 2 1 1

## The subsetting
mydf[factorlengths > 1, ]
#   factor dat1 dat2 dat3
# 1      a    1  1.0    1
# 2      a    1  0.9    1
mydf[factorlengths == 1, ]
#   factor dat1 dat2 dat3
# 3      b  0.9  0.8  0.6
# 4      c  0.9  1.0  0.0 
```

如果 的值`mydf$factor`实际上是因素，则必须`ave(as.numeric(as.character(mydf$factor...`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:00:08.173

这是一种不同的方法供您考虑：

```
mydf <- data.frame(fac = c("a", "a", "b", "c", "d", "d", "e"),
dat1 = rnorm(7), dat2 = rnorm(7), dat3 = rnorm(7))

library("plyr")

cts <- count(mydf, vars = "fac")
keep <- as.character(subset(cts, freq > 1)$fac)
keep2 <- mydf$fac %in% keep
mydf2 <- mydf[keep2,] 
```

哪个转换：

```
 fac        dat1       dat2       dat3
1   a  0.83565861  0.2293744 -1.2932864
2   a -0.05509087  0.1995655 -1.7961443
3   b -0.82794260  1.6314641 -0.3622872
4   c  0.13907037 -0.4560306 -0.3751849
5   d -0.30057042  0.8347340  0.4798789
6   d -1.15576099 -0.5945094 -0.3124572
7   e  1.17671034  0.1453544 -2.6906382 
```

到：

```
 fac        dat1       dat2       dat3
1   a  0.83565861  0.2293744 -1.2932864
2   a -0.05509087  0.1995655 -1.7961443
5   d -0.30057042  0.8347340  0.4798789
6   d -1.15576099 -0.5945094 -0.3124572 
```

我认为可能有一个单行使用`duplicated`，但在这种情况下并不能完全返回所需的内容。

# time - 为什么我使用 OpenMP 进行线性搜索的并行程序比顺序线性搜索程序花费更多的执行时间？

> ID：14439777
> 
> 赞同：0
> 
> 时间：2013-01-21T13:31:05.183
> 
> 标签：time, parallel-processing, openmp, execution-time

```
#include <stdio.h>
#include <omp.h>
int main()
{
    int i, key=85, tid;
    int a[100] =     {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33, 34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,6 4,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94 ,95};
    #pragma omp parallel num_threads(2) private(i)
    {
        tid = omp_get_thread_num();
        #pragma omp for
        for(i=0; i<100; i++)
            if(a[i] == key)
            {
                printf("Key found. Position = %d by thread %d \n",     i+1, tid);
            }
    }
    return 0;
} 
```

这是我的并行程序..我正在使用`GCC`in`Fedora`并且系统是双核的...实际上我需要比较线性搜索的顺序和并行程序并证明并行优于顺序。

我是否需要添加用户和系统时间来计算顺序和并行的执行时间（因为它使用两个核心）？

请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:42:34.617

设置并行环境需要一些时间。尝试更大的数组。您肯定会看到速度加快。

# javascript - 在 Oracle Apex 中从 JavaScript 分配字段值

> ID：14439782
> 
> 赞同：1
> 
> 时间：2013-01-21T13:31:10.737
> 
> 标签：javascript, oracle, oracle-apex

我正在尝试在 Oracle APEX 应用程序的页面标题中实现 JavaScript。如果客户数据存在，默认情况下表单中的字段将被禁用，但可以通过单击“解锁”按钮触发编辑模式。通过单击按钮 EnableItems() 运行，但不会重新提交表单，它只是运行的 js 函数。

```
function DisableItems()
{
$x_disableItem('P31_TITLE',true);
}
function EnableItems()
{
$x_disableItem('P31_TITLE',false);
} 
```

如果表单为空，则所有字段都应该可供编辑。

在 Javascript >> 页面加载时执行我有

```
PageStart(); 
```

现在我需要第三段代码，以便页面知道我是否要加载启用或禁用模式。为此，我有

```
 function PageStart(){
 if ($x('P31_TEST2').value == "") {
 EnableItems();
 }
 else {
 DisableItems();
  }
 } 
```

困难在于此代码的第二行，我需要放置一些标志来为字段分配值或从 Apex 字段中收集值，这将触发第一个或第二个函数但是我不太确定最佳实践是什么周围。任何想法高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:47:41.760

P31_START_ENABLED：隐藏项，受保护的值 = 否。提供起始值。例如，此处的值为“Y”或“N”，表示启用 Y/N

```
function PageStart(){
   if($v("P31_START_ENABLED")=='Y') {
      EnableItems();
   } else {
      DisableItems();
   };
};

function DisableItems()
{
   $s("P31_START_ENABLED", 'N');
   $x_disableItem('P31_TITLE',true);
};
function EnableItems()
{
   $s("P31_START_ENABLED", 'Y');
   $x_disableItem('P31_TITLE',false);
}; 
```

# c# - 如何在多用户环境中安全地分配 ID 号列表

> ID：14439786
> 
> 赞同：0
> 
> 时间：2013-01-21T13:31:30.090
> 
> 标签：c#, sql-server

我有第三方提供的身份证号码列表。目前让我们假设这些数字没有任何顺序或增量算法。当多个人可能同时尝试相同的事情时，我如何根据请求安全地分配号码？我所想到的一切，我也可以想出一个失败的条件。

我为此使用 c# 和 sql server。

EG：将数字添加到具有自动生成的标识列的表中，然后将该标识与具有标识号列表的表匹配 - 不好，因为存在重新分配标识号的可能性，并且标识列可能无论出于何种原因，与 id 表不同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:00:30.690

我一直看到它的做法与此类似：首先生成 ID（可能是 guid），标记您的记录（锁定表以便您可以同时处理多个请求），然后提取数据。

```
DECLARE @ID UniqueIdentifier

SET @ID = NEWID()

--ProductTable contains third party ID information
UPDATE TOP(1) ProductTable
    SET Assigned = 1,
        ID = @ID
WHERE Assigned <> 1

SELECT 
    ThirdPartyID
FROM ProductTable 
WHERE ID = @ID 
```

如果您不想在 SQL 中执行此操作，也可以在 C# 中生成您的 guid

这是一种更简单的方法，您可以使用标识列而不是 GUID，正如 Bertrand 指出的那样，存储成本会更小。此假设您已将第三方号码加载到 ID 作为标识列的表中

```
DECLARE @ID INT

UPDATE TOP(1) ProductTable
    SET Assigned = 1,
        @ID = ID
WHERE Assigned <> 1

SELECT 
    ThirdPartyID
FROM ProductTable 
WHERE ID = @ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:04:49.520

好吧，如果我给你一个最简单的方法，一个 Table ThirdPartyID (PK) UserID (FK) (or session ?) TimeAllocated DateTime 然后存储 procs 来分配和解除分配

使用时间列查找由于某些故障而分配的时间超过合理时间的时间。如果您正在使用会话，并且您很高兴在删除它时释放第 3 方 ID，那么当您整理死会话时，级联将代替您完成这项工作。

制作这个永远不会失败的傻瓜证明会变得非常昂贵，事实上，给定一个有限的 ID 列表，你可能会用完，所以根本不可能。

想一想，你不会为一个用户提供一个以上的 id，或者为一个以上的用户提供一个 id。从理论上讲，您可能会遇到密钥违规，但重试应该在几乎所有情况下都会对其进行排序。开始简单，看看会发生什么。

# angularjs - Angularjs 指令 ng-click 未触发

> ID：14439787
> 
> 赞同：0
> 
> 时间：2013-01-21T13:31:30.460
> 
> 标签：angularjs

这是我的 plnkr [http://plnkr.co/edit/U5WiZzhX31ifux33enYh](http://plnkr.co/edit/U5WiZzhX31ifux33enYh)

我正在编写一个就地编辑器指令。它第一次按预期工作，但随后的“保存”或“取消”按钮不起作用。这是为什么？

在 plnkr 中，当我第二次单击“保存”或“取消”时，它什么都不做，只是在我的本地开发环境中重新加载页面。

我是角度新手，感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:11:48.897

如果您从 DOM 中删除编辑器元素，则必须在再次添加模板之前重新编译模板，否则您将失去对范围的访问权限。

`show`将您的功能更改为以下内容：

```
function show(){        
    editor = $compile(template)(scope);
    element.after(editor);
    element.hide();
} 
```

# javascript - Javascript 代码有效，但在 Firebug 中出现“未定义”警告

> ID：14439789
> 
> 赞同：0
> 
> 时间：2013-01-21T13:31:35.107
> 
> 标签：javascript, html

我在下面有javascript代码，它正在工作，但在Firebug中它说

> document.form1.element[i] 未定义

然后它工作正常

```
function set_action(){

for (var i=0;i<=3;i++)
{

    if (document.form1.PayType[i].checked == true)

        {
            var billerid = document.form1.billerid[i].value;
                            document.form1.action = billerid +"_mypag.htm";
        }
} 
```

我的html标记如下

```
<form name="form1" action="...">
<input name="PayType" type="radio" value="0" id="ultipay" class="radiobtn" checked/>
<select name="billerid" class="dropbox">
<option>item1</Option>...
</select>
<input name="PayType" type="radio" value="1" id="ultipay" class="radiobtn"/>
<select name="billerid" class="dropbox">
<option>item1</Option>
</select>
<input name="PayType" type="radio" value="2" id="ultipay" class="radiobtn"/>
<select name="billerid" class="dropbox">
<option>item1</Option>...
</select>
<input name="PayType" type="radio" value="3" id="ultipay" class="radiobtn"/>
<select name="billerid" class="dropbox">
<option>item1</Option>...
</select>
<input type="button" onclick="set_action()" value="submit">
</form> 
```

我不知道为什么我会收到这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:41:18.377

如果您只有**一个**名为的单选按钮`PayType`，那么您需要使用`document.form1.PayType`. `document.form1.PayType[i]`如果有多个具有相同名称的单选按钮，则将其作为数组寻址。例如：

```
<input name="PayType" type="radio" value="0" id="ultipay0" class="radiobtn" checked="checked" />
<input name="PayType" type="radio" value="1" id="ultipay1" class="radiobtn" /> 
```

# c# - 限制对所有 Web 表单的直接 URL 访问，但登录？

> ID：14439790
> 
> 赞同：0
> 
> 时间：2013-01-21T13:31:37.633
> 
> 标签：c#, asp.net, .net, webforms

## 客观的

限制对所有页面的直接 URL 访问，但`Logon.aspx`确保*必须*每隔一个页面引用用户。

## 司机

这一要求背后的驱动力是我们的内部安全部门。他们认为这是确保应用程序始终安全的唯一可接受的解决方案。

## 问题

问题是双重的，所以让我们处理第一个。如果用户登录并在页面上，他们可以复制 URL、打开新选项卡、关闭前一个选项卡、粘贴 URL，会话仍然有效。我理解为什么会发生这种情况，但他们说我们需要防止这种情况发生。**请不要问我为什么，如果我能回答，否则我可能会说服他们。**

问题的第二部分是最初编写应用程序的方式（在此处插入**非常** *生气*的脸）其中两个 Web 表单被重复用于注册。这特别意味着即使用户没有登录，这些页面也可以访问。但是，我们必须使它们通过流程流被专门引用到这些页面，因此不能直接访问。

作为上述段落的示例，请考虑以下内容。用户将 URL 复制到其中一个共享表单，打开新浏览器，然后粘贴 URL。会话已终止，但会显示用于注册目的的表单。然而，这是有问题的，因为他们没有接受这些条款***，并且***打破了已经脆弱的流程。

## 我尝试了什么？

老实说，什么都没有。我在这里寻找想法，因为到目前为止我所见过的最好的谷歌搜索是围绕**确保用户首先登录的**东西。**有些人使用cookies，有些人使用会员提供者，但用户已经登录**的事实并不能解决我的任何一个问题。

我期待着大家的回音！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:44:48.657

用户登录系统后，隐藏您已授予访问权限的任何内容有什么意义。但无论如何，这里可能有几种方法可以做到这一点： -

首先，我的建议是将您的页面包装在 IFrame 中并禁用右键单击，这样您就无法访问视图源或链接信息。

一旦以上是可以实现的。您还可以将令牌附加到每个 URL。然后您可以检查是否令牌可用。如果可用，则请求有效，否则请求无效。

如果我想到了，我会给你更多的解决方案。

# python - django cms 中的占位符错误

> ID：14439791
> 
> 赞同：0
> 
> 时间：2013-01-21T13:31:40.350
> 
> 标签：python, django, django-cms

我正在使用 django-cms 设计一个 cms 站点，我已经配置了所有内容并且工作正常。但是当我尝试使用`placeholder`标签时，它显示错误

假设我的**base.html**代码如下

```
{% load cms_tags sekizai_tags menu_tags %}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
     <title>Welcome to Services</title>
</head>
<body>
   {% cms_toolbar %}
   <div class='new'> 
      {% block base_content %}{% endblock %} 
   </div> 
</body>
</html> 
```

我正在尝试使用以下代码呈现**home.html**

```
{% extends "base.html" %}
{% load cms_tags menu_tags sekizai_tags %}

{% block base_content %}
  {% placeholder 'terms_and_conditions' %}
     <p>This is the placeholder of editing the data</p>
  {% endplaceholder %}
{% endblock %} 
```

刷新页面时出现以下错误

```
Exception Value:    
Invalid block tag: 'endplaceholder', expected 'endblock'
Exception Location: /usr/lib/python2.7/site-packages/django/template/base.py in invalid_block_tag, line 320 
```

谁能告诉我上面的html代码有什么问题以及如何解决上面的错误

## 已编辑

此外，当我`admin.autodiscover()`在 urls.py 中取消注释时，我收到一个奇怪的错误，如下所示

```
Exception Value:  cannot import name plugin_pool
Exception Location: /usr/lib/python2.7/site-packages/cms/admin/__init__.py in <module>, line 7 
```

当我访问 url 时`http://localhost:8000/admin/`，它的显示

```
"You had no permissions to edit anything" 
```

**已编辑2**

即使在添加后我也没有/无法看到可编辑`{% cms_toolbar %}`模式`body tag`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T00:22:47.110

删除 {% endplaceholder %}

没有您的错误日志中指定的 endplaceholder 这样的标签

无效的块标签：'endplaceholder'，预期的'endblock'

# ios - 保存 UIImageView 信息

> ID：14439794
> 
> 赞同：1
> 
> 时间：2013-01-21T13:31:57.663
> 
> 标签：ios, uiimageview, uiimage

我想`UIImageViews`用他们的路径、坐标等保存一些，因为在我的应用程序中，我可以用手指捏合、旋转和平移`UIImageView`.

我应该用什么来保存这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:14:30.090

你的问题对我来说有点不清楚，但据我了解

路径 - 我找不到获取路径或文件名的简单方法

协调 -`img_view.frame`

查看和的`UIImageView`属性`UIImage`

# freebase - Freebase MQL 查询以获取有关特定日期的所有信息

> ID：14439803
> 
> 赞同：2
> 
> 时间：2013-01-21T13:32:15.747
> 
> 标签：freebase, mql

我想知道是否可以从 Freebase 获取有关特定日期的所有信息。

我可以轻松地检索有关特定主题的日期的信息，例如，获取在特定日期出生的所有感兴趣的人：

```
[{
  "type":"/people/person",
  "limit":1000,
  "sort":"name",
  "name":null,
  "guid":null,
  "timestamp":null,
  "/people/person/date_of_birth":"1955-02-24"
}] 
```

是否可以抓取所有类型？我追求的是诸如在那个日期出生的人（我有）、重大事件（战争的开始、暗杀感兴趣的人等）等等。

本质上，我想匹配所有日期字段并返回有关该条目的完整信息，无论`type`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:46:35.783

[反射](http://mql.freebaseapps.com/ch03.html#reflection)是您在这里需要的：

```
[{
  "/type/reflect/any_value": [{
    "type": "/type/datetime",
    "value": "1955-02-24",
    "link": {
      "source": {
        "id": null
      },
      "master_property": null
    }
  }]
}] 
```

对此有几点说明：我链接到的 MQL 手册在细节上有些陈词滥调，但仍然是 MQL 上最好的文档。`"*": null`其次，如果您使用或更具体`"target_value": null`地在上面的子句中使用或者更具体地在上面的子句中使用 MQL 错误，我很确定`link`它会忽略您指定的外部值......所以不要这样做:-)

# javascript - 在javascript中检测字符串中的多个文件类型

> ID：14439808
> 
> 赞同：0
> 
> 时间：2013-01-21T13:32:41.500
> 
> 标签：javascript, string, file-type

如果内容只是文本还是图像 URL，我会搜索以检测字符串。我的检测基于文件类型，但我不知道如何检测多种文件类型……</p>

```
var wrapper = (content.indexOf(".jpg", ".jpeg", ".gif", ".png", ".bmp") != -1)
                ? '<img src="' + content + '" />'
                : '<span>' + content + '</span>'; 
```

我知道 indexOf 的这种语法是错误的，但在理想情况下，这就是我搜索的内容！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:35:20.453

只需在数组上使用 indexOf

```
var wrapper = ([".jpg", ".jpeg", ".gif", ".png", ".bmp"].indexOf(content.slice(-4)) > -1)
                ? '<img src="' + content + '" />'
                : '<span>' + content + '</span>'; 
```

`content.slice(-4)`返回最后 4 个字符`content`

在较旧的浏览器上，您需要使用 polyfill `indexOf`，
请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:48:32.117

我会采用更清洁的解决方案 - 不涉及 slice/indexOf 或类似的东西：它根据内容测试 ext 数组的所有元素并返回匹配的元素。由于应该只有一个匹配项，因此您只需要检查第一个元素。

```
var content = "/test.png",
    ext = [".jpg", ".jpeg", ".gif", ".png", ".bmp"],
    res,wrapper;

res = ext.filter(function(el){return content.match(el)});

wrapper = res[0] ? '<img src="'+content+'" />' : '<span>'+content+'</span>'; 
```

有关详细说明，请参阅[MDN 上的 Array.prototype.filter 。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)与 Fabrizio 的解决方案一样，如果您有多个文件名`.` `/test.png.jpg`（无论原因是什么），该解决方案也可能会中断。

# python - 无法使用 urllib2 从网络保存图像

> ID：14439809
> 
> 赞同：3
> 
> 时间：2013-01-21T13:32:43.870
> 
> 标签：python, python-2.7, beautifulsoup, urllib2

我想使用 python 从网站保存一些图像，`urllib2`但是当我运行代码时，它会保存其他东西。

这是我的代码：

```
user_agent = 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'
headers = { 'User-Agent' : user_agent }
url = "http://m.jaaar.com/"
r = urllib2.Request(url, headers=headers)
page = urllib2.urlopen(r).read()

soup = BeautifulSoup(page)
imgTags = soup.findAll('img')
imgTags = imgTags[1:]

for imgTag in imgTags:
    imgUrl = "http://www.jaaar.com" + imgTag['src']
    imgUrl = imgUrl[0:-10] + imgUrl[-4:]
    fileName = "khabarnak-" + imgUrl[-12:]
    print fileName

    imgData = urllib2.urlopen(imgUrl).read()
    print imgUrl

    output = open("C:\wamp\www\py\pishkhan\\" + fileName,'wb')
    output.write(imgData)
    output.close() 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T14:08:38.107

该网站正在向您返回标准图像，因为您正在抓取该网站。在检索图像时使用相同的“技巧”来设置标题：

```
imgRequest = urllib2.Request(imgUrl, headers=headers)
imgData = urllib2.urlopen(imgRequest).read() 
```

# salesforce - 将自定义按钮添加到 Salesforce 标准页面

> ID：14439814
> 
> 赞同：0
> 
> 时间：2013-01-21T13:33:02.067
> 
> 标签：salesforce

拥有开发人员帐户的用户如何将自定义按钮添加到标准页面有办法做到这一点。因为我找不到编辑按钮，为标准的 visualforce 编辑页面添加按钮或编辑按钮的重定向 URL。即机会创造形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:09:41.070

You can not delete the standard button but you can edit it and override it with Visualforce page. You can find the all standard buttons for the opportunity are here. Setup-->App Setup --> Customize --> Opportunity --> Buttons and Links.

Form here you can either create any custom button or you can edit the standard button.

**Note : If you are overriding standard page with Visualforce page then make sure that the Visualforce page is having standardcontroller as selected object i.e. here in this case is "Opportunity"**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:48:32.617

你的问题不清楚：/

1.  您的组织是“开发者版”（在 Force.com 平台上试用的免费版）或例如“企业版”，而您的用户配置文件（一组系统权限）称为“开发者”？在“开发者版”中，您可能是系统管理员，因此您拥有所有权限。在后一种情况下 - 检查您的个人资料是否具有“自定义应用程序”权限。
2.  “标准visualforce编辑页面”是什么意思，没有这样的东西。您是指标准页面布局，还是有用于编辑机会的自定义 Visualforce 页面？

* * *

最佳猜测答案：

您可以转到设置 -> 自定义 -> 机会 -> 按钮和链接，在那里创建一个“详细信息页面按钮”，完成后 - 将其添加到机会的页面布局中。如果您没有看到这些选项 - 您没有[自定义应用程序](https://help.salesforce.com/htviewhelpdoc?id=customize_enterprise.htm&siteLang=en_US)的权限。

但是：以这种方式添加的所有按钮都不能显示在“编辑”页面上，这是一个标准页面，自定义选项非常有限。只有标准的“查看”页面会显示额外的按钮。有一些 JavaScript 技巧可以将内容注入“新建/编辑”（通过部分标题或侧边栏）...但是如果您希望按钮以最佳方式可靠地运行，则可能是创建一个 Visualforce 页面并覆盖操作。

这个按钮到底应该做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:48:41.537

要将自定义按钮添加到标准页面，请转到设置 -> 自定义 -> 机会 -> 按钮和链接。单击“新建”自定义按钮和链接按钮。

这是添加 javascript 操作的好教程。 [http://www.interactiveties.com/b_execute_javascript_button.php](http://www.interactiveties.com/b_execute_javascript_button.php)

如果您想用 visualforce 页面覆盖标准按钮，请先创建页面，然后在上面的相同按钮和链接页面上，在要覆盖的操作上选择“编辑”。

# php - 透明数组和对象转换

> ID：14439818
> 
> 赞同：1
> 
> 时间：2013-01-21T13:33:21.997
> 
> 标签：php, database, arrays, object, syntactic-sugar

当您使用 3rd 方库的 PHP 扩展获得一些数据库记录时，您知道其中一些返回一个数组和一些其他返回对象，在 Web 开发期间，我必须将此类对象转换为数组，反之亦然，或者至少记住 foo 是array 和 boo 是对象并使用正确的语法来访问记录属性。这很烦人，我想也许有一个语法糖让它更容易，不是吗？

无论结构如何，我都想访问重新编码的属性。因为我们知道以下结构具有相同的句法能力。

```
$foo = ['a'=>'b','x'=>'y'];

$foo = new stdClass();
$foo->a='b';
$foo->x='y'; 
```

在 javscript 中：`foo={a:'b',x:'y'};`然后`x= foo['a'];`或者`x= foo.a;`如果这在 JS 中是可能的，为什么不在 PHP 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:35:52.163

您可以使用 (object)$array_name 进行类型转换（将变量类型更改为对象），反之亦然 (array)$obj_name

```
 //Array To Object Example
    $person = array (
       'firstname' => 'Richard',
       'lastname' => 'Castera'
    );

    $p = (object) $person;
    echo $p->firstname; // Will print 'Richard'

    //Object to Array Example
    $array = (array) $object; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:43:58.473

没有简单的方法可以做到这一点我可以为您编写一个使用 PHP ArrayObject 类并将每个对象/数组转换为 PHP ArrayObject (http://php.net/manual/en/class.arrayobject.php) 的代码，但这将比类型转换更复杂

# html - 在表格行悬停时调整图像大小

> ID：14439823
> 
> 赞同：1
> 
> 时间：2013-01-21T13:33:43.050
> 
> 标签：html, css, image, html-table, resize

将鼠标悬停在表格行上时，是否可以更改下面的代码以扩展图像？目前，它设置为在将鼠标悬停在独立图像上时重新调整为更大的版本。

```
//HTML

<tr>
<td><img class="bigpic" src="pic.png"></td>
<td>information</td>
<td>information</td>
<td>information</td>
</tr>

//CSS

.bigpic:hover {
    width: 45px;
    height: 55px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:35:12.960

尝试这个：

```
tr:hover .bigpic {
    width: 45px;
    height: 55px;
} 
```

因为`hover`sudo 类应用于表格行并且`bigpic`是 a 的后代`tr`，所以您所要做的就是为悬停行的后代添加规则。

虽然这有调整整行大小的缺点，但它会使你的桌子变得丑陋。我建议在表格单元格中放置一个 div 并绝对定位图像。这样当您悬停时它会“弹出”行。

[这是](http://jsfiddle.net/59aLb/)[我对 div 和弹出的建议](http://jsfiddle.net/59aLb/1/)的示例和示例

# visual-studio-2008 - 访问其他用户工作区

> ID：14439824
> 
> 赞同：0
> 
> 时间：2013-01-21T13:33:43.970
> 
> 标签：visual-studio-2008, tfs

我们将 TFS2012 与 VS2008 一起使用。我们要进行更改，在其他用户工作区中签入。有什么方法可以通过 TFS 访问其他用户的工作空间，比如访问本地工作空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:31:46.603

如果您在他们的机器上，您只能访问其他人的工作区，只要工作区设置为“公共”。

如果您需要更改工作区的访问级别，请让管理员使用`tf workspace`命令和`/permission`开关：

```
[/permission:(Private|PublicLimited|Public)] 
```

您可以从中获取所有命令`tf help workspace`。

TFS 不会将实际更改存储在服务器工作区中。仅当文件是最新版本时，它们处于什么状态（添加/编辑/删除/合并/等）、任何锁和其他元数据都存储在服务器上。

# javascript - ajax 加载中的访问被拒绝 (Grails)

> ID：14439827
> 
> 赞同：0
> 
> 时间：2013-01-21T13:33:51.560
> 
> 标签：javascript, jquery, ajax, grails, gsp

我想加载到 div“example_id”文件“status.gsp”中。

但应用程序拒绝访问文件“status.gsp”

```
$('#example_id').load('status.gsp').hide().fadeIn(3000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:43:08.583

不要直接加载 GSP（默认情况下，views 目录是不可见的）。通过控制器的操作对其进行路由，并将其用作 URL 以加载 GSP 呈现的 HTML。

**示例**：

有一个名为 的控制器`StatusController`，其动作名为`status`，它将把 GSP 渲染回输出流。

```
class StatusController {
  ...
  def status() {
    render(view: "status");
  }
  ...
} 
```

# java - 使用文件集和路径元素在 build.xml 中设置类路径的区别

> ID：14439828
> 
> 赞同：4
> 
> 时间：2013-01-21T13:33:52.963
> 
> 标签：java, ant, classpath, build.xml

我有一个声明类路径的构建文件，如图所示

```
<path id="compile.classpath">
    <fileset dir="${basedir}/lib"    includes="**"/>        
    <fileset dir="${jboss.home}/lib" includes="**"/>        
    <pathelement path ="${build.classes.dir}"/>
</path> 
```

我尝试查看文档，但无法理解**.** `pathelement`

我知道 ID 用于在执行任务时引用此类路径，并且文件集包括 jarfile。

编辑1： **我的疑问是为什么我们不能用`fileset`包含类文件来代替`pathelement`？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T08:45:33.907

最新编辑：

> 我的疑问是为什么我们不能使用文件集来包含类文件来代替路径元素？

如果您使用文件集，那么您将向路径中添加一组类文件，如下所示：

```
CLASSPATH=classes/MyClass1.class:classes/MyClass2.class:classes/MyClass3.class:.... 
```

当 Java 期望看到的只是：

```
CLASSPATH=classes 
```

只有 jar（和 WAR、EAR 等）文件明确列在类路径中（Java 将打开它们并加载它们的类文件），因此需要 ANT 中的文件集。

# 更新

这是 Oracle 文档：

*   [http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html)

> .jar、.zip 或 .class 文件的类路径。每个类路径都应以文件名**或目录**结尾，具体取决于您将类路径设置为：
> 
> *   For a .jar or .zip file that contains .class files, the class path ends with the name of the .zip or .jar file.
> *   For .class files in an unnamed package, the class path ends with the directory that contains the .class files.
> *   For .class files in a named package, the class path ends with the directory that contains the "root" package (the first package in the full package name).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T14:16:33.757

[这里](https://stackoverflow.com/questions/2526826/where-are-classpath-path-and-pathelement-documented-in-ant-version-1-8-0)已经有关于“路径元素”的类似问题。从提供的文档中：“如果它是您的示例中的路径结构：“类似路径的结构可以通过嵌套元素包含对另一个类似路径的结构（路径本身就是资源集合）的引用”

```
 <path id="base.path">
  <pathelement path="${classpath}"/>
  <fileset dir="lib">
    <include name="**/*.jar"/>
  </fileset>
  <pathelement location="classes"/>
</path> 
```

如果是类路径结构：“路径属性旨在与预定义路径一起使用”

```
<classpath>
  <pathelement path="${classpath}"/>
  <pathelement location="lib/helper.jar"/>
</classpath> 
```

# c# - Azure 表客户端 ListTablesSegmented

> ID：14439833
> 
> 赞同：0
> 
> 时间：2013-01-21T13:34:07.207
> 
> 标签：c#, azure, azure-table-storage

当我`CloudTableClient.ListTableSegmented`用来检索表时，当我指定要接收的最大结果数时，我会得到一个奇怪的行为。我正在使用 2.0.3 版的 WindowsAzure.Storage。

[这个帮助参考](http://msdn.microsoft.com/en-us/library/windowsazure/jj731923.aspx)说如果我使用 0 作为 maxResults，`ListTablesSegmented`应该返回最大可能的结果数，最多 5000。当我使用 0 作为输入时，该方法会抛出异常，说该值应该是大于零的正数，如果我使用4999 或 5000 我得到一个`StorageException`InvalidInput 作为错误代码。如果我使用例如 1000 或其他值，一切都会顺利进行。

我做错了什么还是有人知道这是否是一个已知的错误？我没有[在已知问题](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/12/10/updated-known-issues-for-windows-azure-storage-client-library-2-0-for-net-and-windows-runtime.aspx)中找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:08:22.300

文档有问题。一次调用表服务最多可以返回 1000 个实体（或表）。请在此处查看更多详细信息：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd179405.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179405.aspx)。5000 适用于 blob 存储（列出容器和 blob）和队列（列出队列）。

# google-plus - 谷歌共享显式加载

> ID：14439834
> 
> 赞同：1
> 
> 时间：2013-01-21T13:34:11.673
> 
> 标签：google-plus, share

想法：加载动态内容后，在鼠标悬停时，我正在尝试呈现谷歌共享按钮，就像官方谷歌开发者网站上所说的那样。

我正在使用的代码是：

```
gapi.plus.render(div); 
```

事实：

*   如果我将 plus 更改为 plusone，它会呈现 google plus 按钮而不是共享。（意味着：脚本加载）
*   如果我删除 {"parsetags": "explicit"}，按钮会加载（但不会在悬停时加载）

问题： **分享按钮无法加载。**

使用 plus.render 和 plusone.render 调试链接：

1.  [http://romanlosev.igloro.info/googleshare.php?load=plusone](http://romanlosev.igloro.info/googleshare.php?load=plusone)（ plusone - 工作，但 plus+ 按钮加载）
2.  [http://romanlosev.igloro.info/googleshare.php?load=plus](http://romanlosev.igloro.info/googleshare.php?load=plus)（加 - 不起作用）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T01:15:25.160

[StackOverflow 上](https://stackoverflow.com/questions/10680969/how-to-load-google-plus-share-button-in-iframe/13573282#13573282)有一个类似的问题。

您需要做的是调用共享按钮的显式渲染方法。用以下代码替换选择 div 的函数将延迟屏幕上共享对象的渲染。

```
$("#clickme").click(function()
{
  gapi.plus.go();
}); 
```

要呈现单个按钮，您必须传递一个带有 action 参数设置为共享的对象，例如：

```
gapi.plus.render("plusOne", {action: "share"}); 
```

以下是一个更完整的示例，它执行异步脚本加载并呈现各种共享目标，[在此处](http://wheresgus.com/incrender.html)可见：

```
<html>
<body>
  <p>
  <div data-action="share" class="g-plus" id="plusOne"></div>
  <button onClick="gapi.plus.render('plusOne', getParamBag('https://www.google.com'))"></button>
  </p>
  <p>
  <div data-action="share" class="g-plus" id="plusTwo"></div>
  <button onClick="gapi.plus.render('plusTwo', getParamBag('https://plus.google.com'))">  </button>
  </p>
  <p>
  <div data-action="share" class="g-plus" id="plusThree"></div>
  <button onClick="gapi.plus.render('plusThree', getParamBag('https://developers.google.com'))"></button>
  </p>
</body>
<script type="text/javascript">
  window.___gcfg = {
      lang: 'en-US',
      parsetags: 'explicit'
  };
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
  function getParamBag(url){
    return {
      action: "share",
      href: url
    };
  }
</script>
</html> 
```

# css - 我可以在 CSS 中为移动设备选择字体加载吗？

> ID：14439835
> 
> 赞同：3
> 
> 时间：2013-01-21T13:34:14.413
> 
> 标签：css, twitter-bootstrap, responsive-design

我目前的网站设计是使用 Bootstrap 响应式框架构建的。它使用几种自定义字体，约占文档大小的 50%。字体是通过 CSS 包含的，包含的方式不能改变。

我现在的目标是阻止移动设备请求这些字体，以减少它们的带宽消耗。

有没有一种 CSS 方式，比如`@media (min-width: 480px)`不加载响应式布局中的字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:28:01.643

在大多数实现中，CSS 媒体查询中引用的背景图像会被预先下载。（除非您对. 的使用[做了一些摆弄](http://timkadlec.com/2012/04/media-query-asset-downloading-results/)`display:none;`，但并非所有浏览器都支持。）

这同样适用于您通过媒体查询包含的任何字体——即使它们是为更大/不同的视口指定的。*

为什么？

如果视口大小发生变化，例如从纵向到横向，这允许更平滑的过渡。

解决方案？

考虑到您提到的限制，我没有看到仅使用 CSS 来做到这一点的干净方法。你可以用 JS 做一些事情（但要确保它优雅地降级），或者[PHP](https://stackoverflow.com/a/14440853/1779823)。

但减少[HTTP 请求](https://stackoverflow.com/questions/13808322/css-media-query-http-request)和访问者必须下载多少的最简单方法包括执行以下一项或全部操作：

*   改用较少的字体或网络安全字体。
*   为字体使用[CDN](http://en.wikipedia.org/wiki/Content_delivery_network)。
*   包括“缩小”字体文件，这些文件只包含您将使用它们的字符。

查看后两者的[Google Web Fonts](http://www.google.com/webfonts)。

如果您期望或获得大量对网站很重要的移动流量，那么从移动优先的方法重新考虑网站的设计和标记总是值得的：什么是必要的，什么不是。（这种方法通常甚至可以帮助减少您网站桌面版本的混乱。）

* * *

^(*[摆弄方法](https://stackoverflow.com/a/14442397/1779823)也可能对字体有用，但你必须自己进行浏览器测试，因为到目前为止它还没有记录。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:33:28.740

您可以创建两个不同的样式表，一个用于移动设备，一个用于桌面设备，然后使用 PHP 浏览器检测或其他各种方法来查看用户是在移动设备上还是桌面设备上，并为他们提供相应的样式表。

看一下PHP`get_browser`函数： http: [//php.net/manual/en/function.get-browser.php](http://php.net/manual/en/function.get-browser.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T15:55:44.550

如果您的媒体查询中引用了所有背景图像，则不一定要预先下载 -

[http://timkadlec.com/2012/04/media-query-asset-downloading-results/](http://timkadlec.com/2012/04/media-query-asset-downloading-results/)

也许这种技术也适用于字体。如果您正在使用任何需要 JS 的东西（例如 typekit、google），则不会因为 JS 无论如何 afaik 而请求您的字体。

# entity-framework - 实体框架代码优先映射（链接）表？

> ID：14439840
> 
> 赞同：4
> 
> 时间：2013-01-21T13:34:27.257
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1

我正在使用 EF 代码优先方法，并希望添加一个链接（地图）表。我正在处理以下示例并收到以下错误：

```
System.Data.Entity.Edm.EdmEntityType: : EntityType 'EmployeeDepartmentLink' has no key defined. Define the key for this EntityType. 
```

问题是我不想要这张桌子上的钥匙，它只是将两张桌子映射在一起：

```
public class Employee
{
    [Key()]
    public int EmployeeID;
    public string Name;
}

public class Department
{
    [Key()]
    public int DepartmentID;
    public string Name;
}

public class EmployeeDepartmentLink
{
    public int EmployeeID;
    public int DepartmentID;
} 
```

我尝试了各种方法，例如添加“[Key()]”属性，但使用它没有意义，我应该将它添加到哪个字段？我想知道是否甚至支持这种表模型？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-21T15:34:10.977

您正在尝试进行“多对多”映射。

要执行此操作，请编写以下代码：

```
public class Employee
{
    [Key]
    public int EmployeeId;
    public string Name;
    public List<Department> Departments { get; set; }

    public Employee()
    {
        this.Departments = new List<Department>();
    }
}

public class Department
{
    [Key]
    public int DepartmentId;
    public string Name;

    public List<Employee> Employees { get; set; }

    public Department()
    {
        this.Employees = new List<Employee>();
    }
} 
```

然后，在你的`DbContext`：

```
public class YourContext : DbContext
{
    public DbSet<Employee> Employees { get; set; }
    public DbSet<Department> Departments { get; set; }

    public YourContext() : base("MyDb")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Department>().
            HasMany(c => c.Employees).
            WithMany(p => p.Departments).
            Map(
                m =>
                {
                    m.MapLeftKey("DepartmentId");
                    m.MapRightKey("EmployeeId");
                    m.ToTable("DepartmentEmployees");
                });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T14:50:36.627

因为`M:M relationship`您必须创建您的加入（链接）类，如下所示。

```
public class EmployeeDepartmentLink
{
    [Key, Column(Order = 0)]
    public int EmployeeID;

    [Key, Column(Order = 1)]
    public int DepartmentID;

} 
```

有关更多信息，请查看先[**创建代码，多对多**](https://stackoverflow.com/questions/7050404/create-code-first-many-to-many-with-additional-fields-in-association-table)

我希望这对你有帮助。

# html - 如何让 ☆ 围绕中心旋转？

> ID：14439841
> 
> 赞同：6
> 
> 时间：2013-01-21T13:34:29.583
> 
> 标签：html, css

我试图让这颗恒星围绕它的中心旋转。现在它围绕着另一个点旋转。

```
#question {
    font-size: 3em;
    animation: 1s linear 0s normal none infinite spin;
    display: block;
    width: 0;
}

 @keyframes spin {
     from { transform: rotate(00deg); }
     to { transform: rotate(360deg); }
 }
```

```
<div id="testWrapper"><span id="question">☆&lt;/span></div>
```

我怎样才能修复它，让星星围绕它的中心旋转？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:06:23.733

默认`transform-origin`是`50% 50%`你想要的。

但是您将宽度设置为 0，因此它在水平方向上围绕 0 旋转。

您需要使您的元素与内容一样大，并使内容在其中居中。

在您的示例中，只需将元素设置为`inline-block`并删除`width:0`将几乎可以修复它。

# asp.net-mvc-4 - SimpleMembershipProvider：webpages_Membership 表

> ID：14439843
> 
> 赞同：3
> 
> 时间：2013-01-21T13:34:34.340
> 
> 标签：asp.net-mvc-4, asp.net-membership, membership-provider, simplemembership

在 MVC 4 中使用 SimpleMembershipProvider 访问 pages_Membership 表信息的最佳方法是什么？如果他/她输入错误的密码三次，我正在尝试实施帐户阻止..

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T14:27:20.927

使用 SimpleMembership，您将使用以下方法访问此信息：

```
WebSecurity.IsAccountLockedOut(userName, allowedPasswordAttempts, intervalInSeconds) 
```

IsAccountLockedOut 根据您希望允许的尝试次数和自上次登录尝试失败以来的时间返回帐户是否被锁定。这用于阻止其他机器暴力破解密码的尝试。您将在验证用户身份的位置添加此检查，例如帐户控制器登录方法。你可以这样做：

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Login(LoginModel model, string returnUrl)
    {
        if (ModelState.IsValid && 
           !WebSecurity.IsAccountLockedOut(model.UserName, 3, 180) &&
           WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
        {
            return RedirectToLocal(returnUrl);
        }

        // If we got this far, something failed, redisplay form
        ModelState.AddModelError("", "The user name or password provided is incorrect.");
        return View(model);
    } 
```

在这种情况下，您不希望完全禁用用户并允许有效用户在间隔过后重新进入。这是为了阻止暴力攻击，而不是忘记密码的人。

IsConfirmed字段在注册期间使用，您希望用户确认他们为您提供了有效的电子邮件地址**。**您将在数据库中生成并存储一个**ConfirmationToken**，您将通过电子邮件发送给用户并指示他们单击一个链接，该链接会将他们带到 MVC 应用程序中的控制器/操作，该控制器/操作将验证令牌并将**IsConfirmed**字段设置为 true .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T21:24:03.780

大卫，要完全禁用用户，您可以创建一个新角色“禁用”并修改登录代码：

```
public ActionResult Login(LoginModel model, string returnUrl)
{
    string errorMsg = "The user name or password provided is incorrect.";
    if (Roles.IsUserInRole(model.UserName, "Disabled"))
    {
        errorMsg = "Your account has been disabled. Contact webmaster for more info.";
    }
    else if (ModelState.IsValid &&
        !WebSecurity.IsAccountLockedOut(model.UserName, 3, 180) &&
        WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
    {
            return RedirectToLocal(returnUrl);
    }

    if (!WebSecurity.IsConfirmed(model.UserName))
    {
        errorMsg = "You have not completed the registration process. "
            + "To complete this process look for the email that provides instructions.";
    }

    // If we got this far, something failed, redisplay form
    ModelState.AddModelError("", errorMsg);
    return View(model);
} 
```

# jquery - Ajax .post 在 .get() 之后不起作用

> ID：14439847
> 
> 赞同：0
> 
> 时间：2013-01-21T13:34:47.650
> 
> 标签：jquery, ruby-on-rails, ajax

我有一个带有以下coffeescript jquery代码的应用程序来执行一些ajax调用：

```
 $('#records-filter-date').submit ->
$.get(@.action, $(@).serialize(), null,'script')
return false

$('#records-delete').submit ->
 $.post(@.action, $(@).serialize(), (data)->
  $('.check-for-delete:checked').parent().parent().hide(600,'swing')
  $('#alert-div').html("<div class='alert alert-success '><button class='close' data-dismiss='alert' type='button'>x</button><div id='flash_notice'>"+data+ " record(s) successfully deleted!</div></div>")
  $.get('#records-filter-date'.action, $('#records-filter-date').serialize(), null,'script')
,'text')
return false 
```

现在该页面列出了某些记录。第一个调用是通过 ajax 提交搜索字段。第二个是删除选定的记录（使用复选框）。现在我可以删除记录并重定向到列出记录的操作，但搜索参数将丢失（如果用户在删除记录之前过滤了记录），他们将不得不再次过滤记录。

所以我所做的是在删除被称为成功之后，我调用了在搜索字段中提交日期并考虑更新记录。

但是......当没有搜索参数时（当没有搜索完成时）删除工作很好。但是当我进行搜索然后我进行删除时......请求被处理为普通的http请求......

无论如何要维护搜索参数？还是我需要做任何事情来解决这个问题？

编辑：提交要删除的记录的表单在搜索调用更新的 div 内。是否会在更新 div 时破坏与 ajax 调用的绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:54:41.467

> 提交要删除的记录的表单在搜索调用更新的 div 中。是否会在更新 div 时破坏与 ajax 调用的绑定？

是的，这就是问题所在。当您替换元素的 HTML 内容时，其中的所有现有元素都会从 DOM 中删除，并且它们的关联数据和事件处理程序将随之而来。即使您用相同的内容替换它，生成的元素也是新元素。

您需要使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)。这是代码的常规 jQuery 版本：

```
$(document).on('submit', '#records-delete', function(e) {
    // your $.post() code here
}); 
```

理想情况下，`document`您应该使用在层次结构中更接近动态元素的静态元素（您的`#records-delete`表单将是此处的动态元素），而不是 。在您的情况下，这将是`<div>`包含该表单的选择器。

# c++ - c++中基于范围的for循环

> ID：14439850
> 
> 赞同：5
> 
> 时间：2013-01-21T13:35:10.503
> 
> 标签：c++, arrays, templates, template-argument-deduction, for-range

似乎 C++11 中可用的“for each”语法风格允许数组迭代，而不需要知道数组的实际大小（元素数量）。我假设，因为它是新标准的一部分，所以这是完全安全的，即使对于 C 数组也是如此。通常，您还必须在操作之前单独知道 C 数组的大小，但我希望任何使用过这种新 C++ 技术的人验证它的工作方式完全符合您的预期：

```
extern float bunch[100];

for (float &f : bunch) {
  f += someNumber;
} 
```

关于这种技术的非明显副作用或缺点，我有什么需要了解的吗？它在我看到的代码中没有显示太多，可能是因为大多数代码都是在标准中之前编写的。想确保它的罕见用法不是因为其他一些不为人知的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:41:11.420

这种用法没有什么奇怪或不安全的。数组的大小在编译时是已知的，因此可以在循环中使用。这是一个模板函数的示例，它允许您找出数组的长度：

```
template< class T, std::size_t N >
std::size_t length( const T (&)[N] )
{
  return N;
}

Foo f[5];
std::cout << length(f) << "\n"; 
```

这应该清楚地表明您不能在动态大小的 C 样式数组上使用这种技术或基于范围的循环。

当然，如果您有基于范围的循环，那么您也应该有`std::array`（如果没有，您可能可以从`std::tr1`或 boost 中获取 ti），因此您可以完全避免使用 C 样式的数组：

```
extern std::array<float, 100> bunch;

for (auto &f : bunch) {
  f += someNumber;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T13:46:10.957

对数组使用基于范围的 for 循环是非常安全的。我想你担心你可能会不小心在指针上使用它：

```
float* array = new float[100];
for (float& f : array) {
    // ...
} 
```

不过不用担心。在这种情况下，编译器会产生错误。因此，在不安全的情况下，无论如何您都会收到编译错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T13:37:52.603

数组可以作为引用传递，并推导出它们的类型和长度。

```
#include <iostream>

template<typename T, size_t N>
void fun(T const (&arr)[N])
{
    for (std::size_t i = 0; i < N; ++i)
       std::cout << arr[i] << " ";
}

int main()
{
   int x[] = { 1, 2, 3 }; // no need to set length here
   fun(x); // 1 2 3, no need to specify type and length here
} 
```

# java - 使用 Apache Commons Compress 的压缩级别

> ID：14439852
> 
> 赞同：2
> 
> 时间：2013-01-21T13:35:11.863
> 
> 标签：java, gzip, archive, tar, apache-commons

我正在尝试在[Apache Commons Compress](http://commons.apache.org/compress/) lib`tar`和`gzip`存档类型中查找压缩级别的设置。

你能告诉图书馆是否支持它吗？如果是，我该如何配置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:57:41.737

你不能。

首先，[tar](http://en.wikipedia.org/wiki/Tar_archive)根本不压缩；它只是一种存档格式。

其次，[gzip](http://en.wikipedia.org/wiki/Gzip)使用单一压缩类型[deflate](http://en.wikipedia.org/wiki/DEFLATE)。允许“级别”的压缩方案使用这些级别在算法之间进行选择（或者，在有损压缩的情况下，要丢弃多少信息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:58:28.057

`tar`它本身不是一种压缩格式，它只是将多个文件捆绑到一个文件中（因此名称，文件粘在一起就像它们被 tar 覆盖一样）。

您无法更改压缩级别，如果您需要更好的压缩，请使用 bzip2 而不是 gzip。

# timer - 在游戏运行时更改计时器的参数

> ID：14439859
> 
> 赞同：1
> 
> 时间：2013-01-21T13:35:28.807
> 
> 标签：timer, coronasdk

当我的应用程序已经启动时，如何更改计时器上的参数？

这是我的功能

```
increase = function()  
    frequency = frequency - 100
end 
```

然后我有一个按钮应该增加定时器的频率

> 对象：addEventListener（“点击”，增加）

计时器：

> 频率 = 1000
> superTimer = timer.performWithDelay（频率，spawnCircle，-1）

谢谢！乔金

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:31:32.893

```
local freq = 1000;

 function increase()  
    freq = freq - 100
    print(freq)
 end

object:addEventListener("tap", increase)

function myTimer()
     superTimer = timer.performWithDelay(freq,function () spawnCircle();myTimer() end, 1)
end
myTimer() 
```

这将是工作。

# java - Google OAuth2 删除提示

> ID：14439860
> 
> 赞同：-2
> 
> 时间：2013-01-21T13:35:34.590
> 
> 标签：java, oauth-2.0, google-oauth

我正在尝试按照[此示例](https://code.google.com/p/google-api-java-client/wiki/OAuth2Draft10)制作 Google OAuth 应用程序。我的应用程序是一个 Web 应用程序，我想替换以下代码：

```
System.out.println("Paste this url in your browser: " + authorizeUrl);

// Wait for the authorization code
System.out.println("Type the code you received here: ");
BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
String authorizationCode = in.readLine(); 
```

因为它提示输入我`authorizeUrl`在浏览器中点击 URL 后得到的代码。我想删除此提示，并且应用程序本身应该不需要提示`code`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:55:59.587

用户必须在他们第一次访问您的应用程序时授予访问权限 - 除非您使用的是双向 OAuth 并且有 Google Apps 管理员授予对他们整个域的访问权限。不过，用户只需授权您的应用程序一次。当您从 OAuth 服务器取回响应时，您应该存储刷新令牌。然后，刷新令牌可用于在旧令牌过期后请求新的访问令牌。刷新令牌永不过期，但可以由用户撤销；如果发生这种情况，您需要再次提示他们。

[您应该在https://developers.google.com/accounts/docs/OAuth2WebServer](https://developers.google.com/accounts/docs/OAuth2WebServer)阅读 Google 的 OAuth 实施。您还可以使用[OAuth Playground](https://developers.google.com/oauthplayground/)在实时环境中检查请求和刷新流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:37:54.283

为了删除提示 Spring MVC 帮助。

使用重定向到该 URL`RedirectView`并将回调 URL 设置回您的应用程序当前 URL/页面并`CODE`从请求中获取参数。

# java - 简单选择上的 lambdaJ 和 ClassCastException

> ID：14439864
> 
> 赞同：4
> 
> 时间：2013-01-21T13:35:39.613
> 
> 标签：java, classloader, classcastexception, cglib, lambdaj

我的想法用完了，谷歌也没有帮助。用例似乎微不足道，但因 ClassCastException 而失败。我不知道我做错了什么。有一个简单的方法可以返回匹配给定类别的第一个元素，看看。

```
private Category selectElement(List<? extends Category> results, Code code) {
    return selectFirst(results, having(on(Category.class).getCode(), is(code)));
} 
```

执行给出了堆栈的顶部：

```
java.lang.ClassCastException: name.wilu.logic.report.utils.SheetLoader$Category$$EnhancerByCGLIB$$3a35aefc cannot be cast to net.sf.cglib.proxy.Factory
at ch.lambdaj.proxy.ClassImposterizer.createProxy(ClassImposterizer.java:134)
at ch.lambdaj.proxy.ClassImposterizer.imposterise(ClassImposterizer.java:101)
at ch.lambdaj.proxy.ProxyUtil.createProxy(ProxyUtil.java:52)
at ch.lambdaj.function.argument.ArgumentsFactory.createPlaceholder(ArgumentsFactory.java:68)
at ch.lambdaj.function.argument.ArgumentsFactory.registerNewArgument(ArgumentsFactory.java:58)
at ch.lambdaj.function.argument.ArgumentsFactory.createArgument(ArgumentsFactory.java:50)
at ch.lambdaj.function.argument.ArgumentsFactory.createArgument(ArgumentsFactory.java:39)
at ch.lambdaj.Lambda.on(Lambda.java:63) 
```

我在使用 lambdaJ 对 hibernate 的持久集合进行操作时遇到了同样的问题。我放弃了假设已经是代理的代理对象（集合中的实体）可能存在一些问题。看来我错了，因为类别和所有继承的类都是作为结果转换器传递给休眠的 pojos。

这种行为的原因可能是什么？你有什么主意吗？

（我使用的是最新的 lambdaj-2.4）。

**添加以满足马里奥的要求**

代码是一个简单的枚举。类别是不同类别的基类，它有代码字段。此外，它是公共静态类，与所有继承类相同（如果重要的话）。

我将尝试提供失败的测试。

**再次编辑以提供更多信息。** 我的一个朋友查看了代码，并对这个问题提出了新的看法。

我将尝试从一开始就重现我们的演绎路径。

*// 给定*

有一个应用程序分为两部分，第一个基础应用程序（保存模型文件）和 Web 应用程序（保存 UI 连接文件，如 backing beans 等）。 **我们的类别和代码是模型类，因此位于基础应用程序中。**然后我们有一个支持 bean 服务于一些 web 逻辑，特别**是 bean 或其合作者调用我们的 select。**

*// 什么时候*

我们正在将应用程序部署到 Web 服务器！就我而言，JBoss。类由加载器读取，一些我不知道的非常复杂的事情发生了，所有这些都是为了让我的应用程序运行。我做了一些网络操作，然后调用**了支持 bean 的**方法

```
 selectFirst(results, having(on(Category.class).getCode(), is(code))); 
```

从应用程序的 Web 部分。

魔法来了。我们的 Category.class 和 Code.class 由 UnifiedClassLoader 在应用程序加载时加载。我们在**on(Category.class)**方法中，并且将构建 Category 的代理。一些真正纠结的逻辑被用来做到这一点，最重要的是，代理是用

```
setThreadsCallbacks(Callback[]callbacks) 
```

方法，但 Callback.class 取自该类加载器

```
 aCategory.getClass.getClassLoader() 
```

因此，最初加载该类 UnifiedClassLoader 的是一个类加载器。干净地完成所有这些之后，我们终于打电话给

```
 getFirstInstance() 
```

使用反射浏览代理类寻找： Proxy.getDeclaredMethod("setThreadsCallbacks", new Class[]{ Callback[].class });

我忽略了事实，我不明白

```
 new Class[]{ Callback[].class } 
```

在我们的例子中重要的是 Callback.class 不是由 UnifiedClassLoader 提供的。应用程序在网络轮胎中执行，因此对 Callback.class 的调用将通过网络应用程序进行服务器。类加载器和返回的 Callback.class 将与之前作为提到的*setThreadsCallbacks*函数的参数放置的内容不同。反思残酷地失败了。

```
Category.class != Category.class //these two were provided by different classLoaders 
```

这就是为什么我无法提供失败的测试。（相同的类加载器）。

我怀疑这种情况有什么解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:17:13.220

我遇到了类似的问题。（同样抛出异常：java.lang.ClassCastException: XXX$Category$$EnhancerByCGLIB$$XXX cannot be cast to net.sf.cglib.proxy.Factory）

就我而言，结果证明是重复（甚至三倍）CGLib 库的问题。我们有如下：

*   JBoss (4.2.3) 库中的 cglib.jar
*   cglib-nodep.jar 在我们的应用程序网络库（WAR 文件）中
*   应用程序 Web 库中的 labmdaj-2.4-with-dependencies.jar。

然后，当使用 Lambda.on(SomeClass.class) 时，我们会在 CGLib 的`Enhancer`类中使用此方法：

```
private static Method getCallbacksSetter(Class type, String methodName) throws NoSuchMethodException {
        return type.getDeclaredMethod(methodName, new Class[]{ Callback[].class });
} 
```

where`methodName = "CGLIB$SET_THREAD_CALLBACKS"` 和 type 是我们的 SomeClass 由`Enhancer`.

“CGLIB$SET_THREAD_CALLBACKS”方法存在于包装类型中，但 getDeclaredMethod() 返回 null。似乎在 getDeclaredMethod() 内部有两个`net.sf.cglib.proxy.Callback.class`实例的比较。它们是不同的，因为一个是从 cglib.jar (JBoss) 加载的，另一个是从 cglib-nodep.jar (webapp) 加载的。

解决方案是删除多余的 cglib-nodep.jar 并将 lambda-2.4-with-dependencies.jar 替换为 lambda-2.4.jar。现在所有的 CGLib 类都是从共同的地方加载的，问题已经消失了。

# sql-server - 动态内容中的 SQL 游标

> ID：14439866
> 
> 赞同：3
> 
> 时间：2013-01-21T13:35:51.653
> 
> 标签：sql-server, sql-server-2005, dynamic, cursor

我需要一些帮助来解决 CURSOR 问题。

我做了一个aspx报告，很简单。对于每个项目，我需要查看研究、开发和内部花费了多少小时。第一个非常简单，我只是用 3 组和相等的 3 种时间对解决方案进行硬编码。Boss 认为这是一份出色的报告，因此他希望它涵盖所有客户。不幸的是，下一位顾客有 5 组，每组有 2-7 种不同类型的时间。

现在我需要一个动态解决方案，我可以在其中指定组（完成）并指定进入每个组的时间类型（完成），最后我需要将这两者与记录花费的小时数的表结合起来。

我有一个基本光标，可以在其中列出项目、时间类型以及在这组时间中花费了多少时间。

我所拥有的是：
项目 A -|- A 组 -|- 5
项目 B -|- A 组 -|- 2
项目 C -|- A 组 -|- 10

项目 A -|- B 组 -|- 1
项目 B -|- B 组 -|- 10
项目 C -|- B 组 -|- 2

项目 A -|- C 组 -|- 0
项目 B -|- C 组 -|- 3
项目 C -|- C 组 -|- 7

问题是，我需要报告为
Header____Group A|Group B|Group C|Group N
Project A -|- 5 -|- 1 -|- 0 -|- x
Project B -|- 2 -|- 10 -| - 3 -|- y
项目 C -|- 10 -|- 2 -|- 7 -|- z

```
声明 @iTimeTypeGroupID 整数

DECLARE cur CURSOR LOCAL READ_ONLY
为了
选择 iRefTimeTypeGroupID
FROM tbl_TimeTypeGrouping
其中 iRefCustomerID = @customerID

打开当前

从当前获取下一个
INTO @iTimeTypeGroupID

而@@FETCH_STATUS = 0
开始
    选择 PT.iRefProjectID
        , PT.iRefTimeTypeID
        , SUM(PT.decNumberOfHours) sumNumberOfHours
    FROM tbl_ProjectTransaction PT
    iRefTimeTypeID 在哪里（
        选择 iRefTimeTypeID
        FROM tbl_TimeTypeGrouping
        WHERE iRefTimeTypeGroupID = @iTimeTypeGroupID
            和 iRefCustomerID = @customerID)
    按 PT.iRefProjectID 分组
        , PT.iRefTimeTypeID

    从当前获取下一个
    INTO @iTimeTypeGroupID
结尾

关闭当前
解除当前

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:53:33.173

我不确定列名。所以在这个例子中，我希望`tbl_ProjectTransaction`有一个名为的列`projectName`并且`tbl_TimeTypeGrouping`有一个`GroupName`. 就像有人在问题中提出的那样，在这种情况下您不应该使用光标。您应该使用动态枢轴。这是和示例：

像这样获取组的名称：

```
DECLARE @cols VARCHAR(MAX)
SELECT @cols=STUFF
(
    (
        SELECT 
            ',' +QUOTENAME(tbl_TimeTypeGrouping.sGroupName) -- ????
        FROM
            tbl_TimeTypeGrouping
        FOR XML PATH('')
    )
,1,1,'') 
```

这会给你：

```
'[Group A],[Group B],[Group C],[Group N]' 
```

然后像这样做一个动态支点：

```
DECLARE @query NVARCHAR(4000)=
N'SELECT
    *
FROM
(
    SELECT
        tbl_ProjectTransaction.sProjectName, -- ????
        tbl_ProjectTransaction.decNumberOfHours,
        tbl_TimeTypeGrouping.sGroupName -- ???
    FROM
        tbl_ProjectTransaction
        JOIN tbl_TimeTypeGrouping
            ON tbl_ProjectTransaction.iRefTimeTypeID=tbl_TimeTypeGrouping.iRefTimeTypeID
) AS SourceTable
PIVOT
(
    SUM(decNumberOfHours)
    FOR GroupName IN ('+@cols+')
) As Pvt'
EXECUTE(@query) 
```

参考：

*   [使用 PIVOT 和 UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

# c# - 如何在 C# 或 nunit 界面中调整 nunit 测试用例的速度？

> ID：14439868
> 
> 赞同：0
> 
> 时间：2013-01-21T13:35:54.323
> 
> 标签：c#, selenium, nunit

我使用了 selenium IDE 并创建了测试用例。我已经使用 C# 将它们转换为 Nunit，并开始运行测试用例。如何使用 nunit 接口或 C# 代码调整运行测试用例的速度。（在 selenium ide 界面中，我可以调整速度以缓慢运行测试用例。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:20:18.760

这些链接之一应该可以工作：

类似的问题：

[selenium webdriver 管理速度？](https://stackoverflow.com/questions/7889137/selenium-webdriver-manage-speed)

硒论坛结果（[http://seleniumforum.forumotion.net/t376-to-control-of-speed-execute-in-selenium-rc](http://seleniumforum.forumotion.net/t376-to-control-of-speed-execute-in-selenium-rc)）：

```
[SetUp]
public void SetupTest()
{
selenium = new DefaultSelenium("localhost", 4444, "*iexplore", URL");
selenium.Start();
selenium.SetSpeed("1000");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:08:12.310

您可以在`TestFixtureSetup`每个`TestFixture`. 下面的示例应该在每次测试之前运行并导致 5 秒的等待：

```
[TestFixture]
public MyTests()
{
    [TestFixtureSetUp]
    public void Init()
    {
        System.Thread.Sleep(5000);
    }

    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T14:52:29.490

在过去的几天里，我一直在研究这个问题。到目前为止，解决这个问题的最简单方法是创建一个驱动程序属性，而不是一个变量，然后在 get 中添加一个等待。

```
 private IWebDriver _driver;
    public IWebDriver driver
    {
        get{ Thread.Sleep(500);
            return _driver;
        }

        set
        { _driver = value; }
    } 
```

这意味着无论何时请求您的驱动程序，即您在浏览器中执行任何操作时，它都会将其减慢指定数量。

# linux - 从文件中提取文本+变量不起作用

> ID：14439869
> 
> 赞同：1
> 
> 时间：2013-01-21T13:36:05.807
> 
> 标签：linux, bash, unix, grep

我经常有很多文件（每天超过 1500 个）我必须搜索“\HF=”，然后有一个值示例

```
\HF=-546.523456 
```

这几乎不是相同的值，而且大多数时候都是负值。

这里的问题是“\HF”出现在文件底部附近，但它可能出现在两个连续的行中，如下所示：

```
bla bla bla \H
F=number 
```

或者

```
bla bla bla \
HF=number 
```

我在谷歌上搜索了很多，并混合了很多这样的阅读材料，我得到了这个：

```
grep "\\\\HF=[-]\?[0-9]*[.]\?[0-9]*\\\\" *.log 
```

（这些是 .log 文件）

当我没有得到确切的“\HF”时，该`grep`命令不起作用；我不知道为什么但`-r`也不起作用，而且我有很多子目录。

你能帮我创建一个 bash 脚本吗？

这是文件底部的示例

```
 -1.8078238555,2.9578874797\H,-6.5637417591,1.9616010611,-0.4401499738\
 H,-6.788515386,1.1005867152,1.097842586\H,-6.6310211349,0.1875790572,-
 0.4056194057\\Version=EM64L-G09RevB.01\State=1-A\HF=-2032.6976718\RMSD
 =5.982e-09\RMSF=5.561e-07\Dipole=3.5537566,0.6605675,0.6605341\Quadrup
 ole=-5.9562335,7.5807637,-1.6245302,-27.037518,-2.3011825,2.5397027\PG
 =C01 [X(C37H33B1O8)]\\@

 THE WORLD IS MADE UP OF THE WILLS, THE WON'TS, AND THE CANT'S:
 THE WILLS DO EVERYTHING,
 THE WON'TS DO NOTHING,
 THE CAN'TS CAN'T DO ANYTHING.

                               -- FROM WALT DISNEY'S "BLACK HOLE"
 Job cpu time:  1 days  5 hours 59 minutes 54.7 seconds.
 File lengths (MBytes):  RWF=   2510 Int=      0 D2E=      0 Chk=     20 Scr=      1
 Normal termination of Gaussian 09 at Mon Dec 24 19:58:22 2012. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:42:27.690

嗯，首先，你想要的标志是`-R`，递归地`grep`通过目录。

其次，既然你知道你想要的信息是在文件的末尾，那么抓住足够的行来确保信息会在那里，删除换行符，然后进行简单的搜索。

您可以执行以下操作：

```
tail -30 <file> | sed "s/^ *\(.*\) *$/\1/" |
    tr -d "\n" | grep -oP "\\\\HF=[-]?\d+\.\d+" 
```

由于您必须递归地执行此操作，您可以使用`xargs`：

```
find . -type f -name '*.log' -print0 |
    xargs -0 -I {} bash -c 'tail -30 "{}" | sed "s/^ *\(.*\) *$/\1/" |
        tr -d "\n" | grep --label "{}" -oHP "\\\\HF=[-]?\d+\.\d{1,4}"' 
```

如果数字可能不包含小数，您可以将表达式更改为：

```
... grep --label "{}" -oHP "\\\\HF=[-]?\d+(\.\d{1,4})?" 
```

使用文件“temp.log”：

```
bla bla bla \
HF=-546.523456
something else but a number
bla bla bla \
HF=-546.523456
something else but a number 
```

输出是：

```
./temp.log:\HF=-546.523456
./temp.log:\HF=-546.523456 
```

# c# - 通过 id 在 NHibernate 会话中初始化对象

> ID：14439871
> 
> 赞同：1
> 
> 时间：2013-01-21T13:36:13.843
> 
> 标签：c#, nhibernate

我有这段代码用于将我的对象保存到数据库中，它工作正常。

```
 public int CreateOrder(OrderDB orderDB)
    {
        using (ISession session = sessionFactory.OpenSession())
        {
            using (ITransaction transaction = session.BeginTransaction())
            {
                try
                {
                    session.SaveOrUpdate(orderDB.Car);
                    session.SaveOrUpdate(orderDB.Owner);

                    for (int i = 0; i < orderDB.Service.Count; i++)
                    {
                        session.SaveOrUpdate(orderDB.Service[i]);
                    }
                    session.SaveOrUpdate(orderDB);
                    transaction.Commit();
                }
                catch (Exception e)
                {
                    throw;
                }
            }
        }
        return orderDB.ID;
    } 
```

实体：

```
public class OrderDB:BasicRecordDB
{
    public virtual int ID { get; set; }

    public virtual IList<Service> Service { get; set; }

    public virtual Owner Owner { get; set; }

    public virtual Car Car { get; set; }

    public virtual Box Box { get; set; }

    public virtual double TotalPrise { get; set; }

    public virtual int OrderNumber { get; set; }
}

public class Car
{
    public virtual int ID { get; set; }

    public virtual string CarNumber { get; set; }

    public virtual Model Model { get; set; }

} 
```

例如，实体模型（在汽车中）已经包含在数据库中，为了保存订单应该只是模型 ID 就足够了，但现在它从客户端向服务器发送所有实体汽车和具有所有属性的模型。如果我只发送实体 ID（我的意思是已经在数据库中并拥有私钥的那个实体），我怎么能保存订单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:20:25.347

在这种情况下，我使用两个属性的方法，`column`以不同的方式表示一个：*Reference*和*ReferenceId*。

所以让我们先扩展 Car 类：

```
public class Car
{
  ...
  Model _model 

  public virtual Model Model
  { 
   get { return _model; } 
   set 
   {
     _model = value;
     ModelId = _model.ID;
   } 
  }

  public virtual int ModelId { get; set; }
} 
```

所以，现在我们可以直接

1.  设置`ModelId`或
2.  设置对`Model`实例的引用

在这两种情况下`ModelId`都有正确的价值。

和 NHibernate 映射

```
<many-to-one name="Model" column="ModelId" insert="false" update="false"   />
<property  name="ModelId" column="ModelId/> 
```

好吧，唯一持久的属性是`ModelId`. 但是，参考`Model`完全适用于过滤、导航......而且您只能发送`Car`带有 int 属性的实例......

# ms-access - 我的数据库允许不在下拉列表中的数据，我该如何解决这个问题？

> ID：14439872
> 
> 赞同：2
> 
> 时间：2013-01-21T13:36:17.197
> 
> 标签：ms-access, database-design, ms-access-2007

我的数据库中有一个查找字段，我希望它只允许您输入查找列表中的数据，而没有其他内容。是否有我必须添加的验证规则才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:02:10.977

根据我之前的评论，以便您将问题标记为已解决：

将`Limit to list`属性设置为**True**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:17:09.837

如果要限制表列的可能值，可以为这些值创建一个表（查找表），并在两个表之间创建一个强制引用完整性的关系。然后可以将查找表用作`RowSource`列表框和组合框。

```
主表
----------
身份证（PK）
其他一些领域
value_id (FK) <-----+
                    |
查找表 |
------------ |
value_id (PK) <-----+
值文本
```

通常，主表将仅保存`Long Integer`字段中值的 ID，而查找表将使用`AutoNumber`该 ID 的字段。组合框可以很好地查找与 ID 对应的文本。查找表的优点是您可以轻松地添加、删除和更改值，而无需修改应用程序。如果您编辑与 ID 对应的文本，则此更改将自动对主表中引用此 ID 的所有记录可见。

# php - 使用命名范围的图表上的 PHPExcel 错误

> ID：14439873
> 
> 赞同：1
> 
> 时间：2013-01-21T13:36:17.977
> 
> 标签：php, phpexcel

使用 PHPExcel 1.7.8 我有一个 2007 xlsx Excel 文件，由 Sheet1 上的饼图和 Sheet2 中的两列简单数据组成。

工作簿为 Sheet2 中的两列定义了一个命名范围，一个用于标签，另一个用于数据。Sheet1 中的饼图然后引用这些命名范围，这意味着它将随着数据从 Sheet2 添加/删除而自动更新。

使用 PHPExcel，我可以读取工作表，在 Sheet2 中编辑数据并写回 Excel 2007。但是，使用上面提到的设置，其中图表使用命名范围，PHPExcel`Invalid cell coordinate CHARTDATA`在读取 Excel 时会引发错误，进一步看似乎 PHPExcel 没有读取任何预先存在的命名范围但丢失它们，尽管这些可以通过代码再次定义 - 错误仍然存​​在。

至关重要的是，我使用 PHPExcel 加载其中包含图表的电子表格，编辑基础数据 - 添加或删除行，然后写回 Excel 并相应地更新图表。

非常感谢您的帮助！

完整错误如下：

```
Fatal error: Uncaught exception 'PHPExcel_Exception' with message 'Invalid cell coordinate CHARTDATA' in /home/content/34/6122134/html/core.excel/Classes/PHPExcel/Cell.php:539
Stack trace:
#0 /home/content/34/6122134/html/core.excel/Classes/PHPExcel/Cell.php(674): PHPExcel_Cell::coordinateFromString('CHARTDATA')
#1 /home/content/34/6122134/html/core.excel/Classes/PHPExcel/Cell.php(693): PHPExcel_Cell::rangeBoundaries('ChartData')
#2 /home/content/34/6122134/html/core.excel/Classes/PHPExcel/Chart/DataSeriesValues.php(298): PHPExcel_Cell::rangeDimension('ChartData')
#3 /home/content/34/6122134/html/core.excel/Classes/PHPExcel/Chart/DataSeries.php(350): PHPExcel_Chart_DataSeriesValues->refresh(Object(PHPExcel_Worksheet), false)
#4 /home/content/34/6122134/html/core.excel/Classes/PHPExcel/Chart/PlotArea.php(121): PHPExcel_Chart_DataSeries->refresh(Object(PHPExcel_Worksheet))
#5 /home/content/34/6122134/html/core.excel/Classes/PHPExcel/Chart.php(499): PHPExcel_Chart_PlotArea->refresh(Object(PHPExcel_Worksheet))
#6 /home/conten in /home/content/34/6122134/html/core.excel/Classes/PHPExcel/Cell.php on line 539 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-08T22:52:35.940

我也有这个问题。打开 Excel 的名称管理器并确保命名的范围没有`#REF!`或以其他方式损坏。

此外，请确保您没有从另一张工作表中引用命名单元格。那也会破坏PHPexcel ..

希望有帮助！

（确保您使用的是最新版本）

# jakarta-ee - 结合@Produce和@Qualifier的动态对象创建

> ID：14439876
> 
> 赞同：0
> 
> 时间：2013-01-21T13:36:28.940
> 
> 标签：jakarta-ee, glassfish, cdi

我必须实现一个实例工厂，它返回一个新的消息处理程序实例，具体取决于消息代码。

有一个接口 MessageHandler 和这个接口的大约 50 个实现。由于项目结构（maven 循环依赖...），工厂类与具体接口实现没有依赖关系。

一个messageHandler接口：

```
interface MessageHandler {
    void receive(Message message);

    MessageCode getMessageCode();
} 
```

每个 MessageHandler 实现都返回一个唯一的消息代码。例如：

```
class FirstMessageHandler implements MessageHandler {
     ...
     @Override
     MessageCode getMessageCode(){
          return MessageCodes.MESSAGE_TYPE_ONE;
     }
     ...
}

class SecondMessageHandler implements MessageHandler {
     ...
     @Override
     MessageCode getMessageCode(){
          return MessageCodes.MESSAGE_TYPE_TWO;
     }
     ...
} 
```

MessageHandlerFactory 应该为每条消息创建新的处理程序实例。工厂没有关于具体实现的信息，并且不依赖于实现的 maven 包。它只有消息代码。

```
class MessagehandlerFactory {
       MessageHandler createHandler(MessageCode messageCode){
       ...
       }
} 
```

搜索后，我找到了一个关于 @Produce 注释的例子和这个很好的例子：

[http://docs.oracle.com/javaee/6/tutorial/doc/gkgkv.html](http://docs.oracle.com/javaee/6/tutorial/doc/gkgkv.html)

但是在这个例子中，我需要知道工厂中的所有实现类型，这是不允许的。

实际上解决方案是使用@Any @Instance。

```
 @Inject
 @Any
 private Instance<MessageHandler> messageHandlers;

@PostConstruct
public void init() {
    for (MessageHandler handler : messageHandlers) {
        messageHandlerMap.put(handler.getMessageCodes(), handler);
    }
} 
```

但是此代码为每个接收到的消息的所有 MessageHandler 实现的每个消息实例创建。可以结合@Produce 和@Qualifier 以便根据收到的MessageCode 只创建一个MessageHandler 实例？

我正在使用 Glassfish 3.1.2.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:38:49.610

您可以通过观察来获取可移植扩展中的所有实例`ProcessAnnotatedType`。将它们存储在另一个类或侦听器类的静态集合中，然后您可以通过注入该类来获取所有这些实例。

另一种选择是将 注入`InjectionPoint`到您的生产者方法中，并使用那里的信息返回您在`Instance`遍历期间需要的实例。但是请注意，这仅适用于依赖范围的注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:43:06.683

不确定我是否了解您的功能要求。

听起来生产者模式是错误的选择，如果您不知道要生产什么，那么为什么要使用它呢？

我不遵循代码实际上会做什么，但让我问你，仅仅拥有接口并进行实现有什么问题？

每个新实现都有自己的限定符，任何上下文实例都可以使用 @Inject @QualifierName 来获取它。

我实际上认为您可能会无缘无故地做复杂的事情，但我不确定，因为我不太了解这个问题:-)

# blackberry - 将自定义表情符号添加到 BlackBerry Messenger 聊天字段

> ID：14439880
> 
> 赞同：0
> 
> 时间：2013-01-21T13:36:37.683
> 
> 标签：blackberry

我想将第三方应用程序中的笑脸添加到 bbm 聊天字段。我如何以编程方式进行操作？Jingu-Smiley App 有这个功能。我查看了 BlackBerry API 文档，但没有找到任何 API 可以将笑脸添加到 BBM 聊天中。

# android - 如何检查元素是android中的json对象还是json数组？

> ID：14439882
> 
> 赞同：-3
> 
> 时间：2013-01-21T13:36:41.513
> 
> 标签：android, json

我想访问 AmenityCodes，您可以在图像中看到 0 位置 Amenity Codes 是数组，但在 49 位置是 json 对象，所以如何检查这是对象或 json 数组 ![在此处输入图像描述](../Images/86388272c4aba3b935f87d6523d022fe.png)

![在此处输入图像描述](../Images/9842db421b5c0477421fd27823355765.png)

> 我的活动.java

```
for(int r=0;r<results.length();r++)
{

    HashMap<String, String>  map = new HashMap<String, String>();
    hotelrating=results.getJSONObject(r).get(TAG_STARRATING).toString();
    deeplink=results.getJSONObject(r).get(TAG_HOTELDEEPLINK).toString();

    JSONArray amenityarray=results.getJSONObject(r).getJSONArray(TAG_AMENITYCODES);

    Log.e("Amenitiescode","-->"+amenityarray);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:38:53.447

代替：

```
JSONArray amenityarray=results.getJSONArray(r); 
```

和：

```
JSONArray amenityarray=results.getJSONObject(r).getJSONArray("AmenityCodes"); 
```

# php - 使用 php-ews 回复邮件

> ID：14439884
> 
> 赞同：4
> 
> 时间：2013-01-21T13:36:52.720
> 
> 标签：php, exchangewebservices, email, php-ews

我正在使用 php-ews 来读取交换邮箱。但是，我想从收件箱中选择一封电子邮件并回复该电子邮件，其中包含电子邮件历史记录并发送回复。下面是我用来从收件箱中获取特定电子邮件的代码。

```
$ews = new ExchangeWebServices($account_array['server'], $account_array['username'], $account_array['password'], ExchangeWebServices::VERSION_2010_SP1);
$message_id = 'AAMkADU3ZDdmZmY3LWI3OGMtNDRmMy1hYTdlLTBlZjkwOGE3NTU5MwBGAAAAAADkJRKCdlaES7sRqf3veO/UBwCgoREk6zyqQqi6KC/gJMy0AAAAvGoCAACgoREk6zyqQqi6KC/gJMy0AAAAvGpQAAA=';
$change_id = 'CQAAABYAAACgoREk6zyqQqi6KC/gJMy0AAAAvMEZ';

$request = new EWSType_GetItemType();
$request -> ItemShape = new EWSType_ItemResponseShapeType();
$request -> ItemShape -> BaseShape = EWSType_DefaultShapeNamesType::ALL_PROPERTIES;

$request -> ItemShape -> BodyType = EWSType_BodyTypeResponseType::HTML;

$body_property = new EWSType_PathToUnindexedFieldType();
$body_property -> FieldURI = 'item:Body';
$request -> ItemShape -> AdditionalProperties = new EWSType_NonEmptyArrayOfPathsToElementType();
$request -> ItemShape -> AdditionalProperties -> FieldURI = array($body_property);

$request -> ItemIds = new EWSType_NonEmptyArrayOfBaseItemIdsType();
$request -> ItemIds -> ItemId = array();

$message_item = new EWSType_ItemIdType();
$message_item -> Id = trim($message_id);
$request -> ItemIds -> ItemId[] = $message_item;

$response = $ews -> GetItem($request);
//print '<pre>' . print_r($response, true) . '</pre><hr/>';
$message = $response -> ResponseMessages -> GetItemResponseMessage -> Items -> Message;

print '<pre>' . print_r($message, true) . '</pre><hr/>'; 
```

现在我已经收到要回复的消息，我该如何进一步处理并起草回复消息并为此电子邮件创建回复项目。

我已经在谷歌上搜索过这个，但没有运气。

钻了几个小时的 php-ews 类，我看了 EWSType_ReplyAllToItemType、EWSType_PostReplyItemType、EWSType_PostReplyItemBaseType 等，但无法理解如何使用这些代码。

请帮助伙计们！任何帮助将不胜感激。

我相信对这篇文章的任何回复都会有所帮助，因为没有论坛讨论这个问题。:)

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-27T12:23:17.443

> **终于找到了关于如何使用 PHP-EWS 回复电子邮件的答案。**

首先，我们需要修改 EWSType/MessageType.php 并在关闭类之前在类的末尾添加以下行：

```
public $NewBodyContent; 
```

回复功能如下：

```
Public function replyToMessage($id,$changeKey)
    {
        $ews = new ExchangeWebServices($this->server_url, $this->username, $this->password, ExchangeWebServices::VERSION_2010_SP1);

        //$msg = new EWSType_ReplyAllToItemType();
        $msg = new EWSType_MessageType();

//In Case you need to add anyone in CC
        $cc = new EWSType_ArrayOfRecipientsType();
        $cc->Mailbox = new EWSType_EmailAddressType();
        $cc->Mailbox->EmailAddress = 'emailaddresshere';
        $cc->Mailbox->Name = 'displaynamehere';
        $msg->CcRecipients = $cc;

        $msg->ReferenceItemId = new EWSType_ItemIdType();
        $msg->ReferenceItemId->Id = $id;
        $msg->ReferenceItemId->ChangeKey = $changeKey;

        $msg->NewBodyContent = new EWSType_BodyType();
        $msg->NewBodyContent->BodyType = 'HTML';
        $msg->NewBodyContent->_ = 'HTML Content Goes Here';

        $msgRequest = new EWSType_CreateItemType();
        $msgRequest->Items = new EWSType_NonEmptyArrayOfAllItemsType();
        $msgRequest->Items->ReplyAllToItem = $msg;
        $msgRequest->MessageDisposition = 'SendAndSaveCopy';
        $msgRequest->MessageDispositionSpecified = TRUE;

        $response = $ews->CreateItem($msgRequest);

        return $response->ResponseMessages->CreateItemResponseMessage->ResponseCode;

    } 
```

这将向指定的 ID 和 ChangeKey 发送回复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:42:30.303

你不能简单地向你要回复的电子邮件的回复地址发送一封新电子邮件吗？

[https://github.com/jamesiarmes/php-ews/wiki/Email:-Send-Email](https://github.com/jamesiarmes/php-ews/wiki/Email:-Send-Email)

将主题设置为`Re: <subject of previous message>`

然后简单地将原始电子邮件的正文包含在响应正文的下方？

# php - Mysql查询使用同一表中的其他列值分组来获取第二和第三最小值

> ID：14439888
> 
> 赞同：0
> 
> 时间：2013-01-21T13:37:06.380
> 
> 标签：php, mysql, sql, greatest-n-per-group

> **可能重复：**
> [我的 sql 查询使用 GROUP BY 函数获取中间行值](https://stackoverflow.com/questions/14433948/my-sql-query-to-get-middle-row-values-using-group-by-function)

我的数据库结构就像

```
Id     Price     Code
1      0.12      93
2      0.13      93
3      0.54      93
4      0.96      93
5      0.10      94
6      0.30      94
7      0.90      94
8      1.40      94
9      2.30      94 
```

我必须使用`GROUP BY`代码获取数据，并且我想要第二个最少的行作为输出。在上面的示例中，我希望输出为

```
Id     Price     Code
2      0.13      93
6      0.30      94 
```

在其他情况下，我想要第三个最小值，输出应该是

```
Id     Price     Code
3      0.54      93
7      0.90      94 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:50:17.977

这将为您提供第二个值

```
SELECT MAX(Price), Code
FROM
(
    SELECT ID, Price, Code
    FROM   TableName
    WHERE 
    (
       SELECT  COUNT(*) 
       FROM    TableName as f
       WHERE   f.Code = TableName.Code and 
               f.Price <= TableName.Price
    ) <= 2                                // << just change this value
) s
GROUP BY Code 
```

*   [SQLFiddle Demo（*二*）](http://www.sqlfiddle.com/#!2/1d607/2)
*   [SQLFiddle Demo（*第三*）](http://www.sqlfiddle.com/#!2/1d607/3)

# backbone.js - Backbone.js 和 pushState 与 Laravel 后端

> ID：14439893
> 
> 赞同：2
> 
> 时间：2013-01-21T13:37:28.290
> 
> 标签：backbone.js, laravel, pushstate

目前，我正在开发一个 Backbone.js 应用程序，并且 API 由 Laravel 框架提供服务。所有对服务器的请求都通过 index.php 文件传递​​，该文件是 Laravel 框架的一部分。

我的 Backbone.history 使用 'pushState'，所以当我刷新页面时，Laravel 会负责路由并重定向到 404 页面。如何防止这种情况？

如果我做错了，请纠正我，我的 Backbone 应用程序在 Laravel 呈现主视图时启动，主视图是一个简单的 html 骨架。其他视图和路线由 Backbone 提供。如何将此主视图与 Laravel 分开？我认为这会导致 pushState 出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:03:53.503

你在使用 Restful 控制器吗？您是否将此行添加到您的 laravel 控制器中？

### 公共 $restful = true;

# javascript - 如何检测 JavaScript 中的设备触摸支持？

> ID：14439903
> 
> 赞同：16
> 
> 时间：2013-01-21T13:38:01.313
> 
> 标签：javascript, google-chrome, dom-events

过去，当在 JavaScript 中检测设备是否支持触摸事件时，我们可以这样做：

```
var touch_capable = ('ontouchstart' in document.documentElement); 
```

`true`但是，即使底层设备不支持触摸事件，Google Chrome (17.x.x+) 也会返回上述检查。例如，在 Windows 7 上运行上述代码会返回 true，因此如果我们将其与以下内容结合使用：

```
var start_evt = (touch_capable) ? 'ontouchstart' : 'onmousedown'; 
```

在 Google Chrome 上，自从我们绑定到`ontouchstart`. 简而言之，有没有人知道一种可靠的方法来规避这个问题？我目前正在运行以下检查：

```
var touch_capable = ('ontouchstart' in document.documentElement && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) 
```

这远非理想...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-21T13:38:56.613

正确的答案是处理*这两种*事件类型——它们不是相互排斥的。

要获得更可靠的触控支持测试，还请查看[Modernizr](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/touchevents.js)`window.DocumentTouch && document instanceof DocumentTouch`使用的测试之一

更好的是，只需自己使用 Modernizr 并让它为您进行特征检测。

请注意，尽管您无法防止误报，因此我上面的第一行 - 您必须*同时*支持两者。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-12-08T01:05:46.663

这是对 Modernizr 执行触摸检测方式的修改，增加了对 IE10+ 触摸设备的支持。

```
var isTouchCapable = 'ontouchstart' in window ||
 window.DocumentTouch && document instanceof window.DocumentTouch ||
 navigator.maxTouchPoints > 0 ||
 window.navigator.msMaxTouchPoints > 0; 
```

这不是万无一失的，因为[检测到触摸设备显然是不可能的](http://www.stucox.com/blog/you-cant-detect-a-touchscreen/)。

你的旅费可能会改变：

*   较旧的触摸屏设备仅模拟鼠标事件
*   某些浏览器和操作系统设置可能会在未连接触摸屏时启用触摸 API，例如，在安装了触摸屏驱动程序但触摸硬件不起作用或未安装的系统中。
*   在混合鼠标/触摸/触控板/笔/键盘环境中，这并不表示正在*使用*哪个输入，只是浏览器检测到存在触摸硬件。例如，用户可以随时从使用鼠标切换到触摸支持触摸的笔记本电脑或连接鼠标的平板电脑上的屏幕。它只检测浏览器是否认为它*可以*接受或模拟触摸输入，例如，在 Chrome 开发工具中使用移动模拟模式时。

**更新：** 提示：不要使用触摸功能检测来控制和指定 UI 行为，[而是使用事件侦听](https://www.smashingmagazine.com/2015/03/better-browser-input-events/)器。为点击/触摸/按键事件设计，而不是设备，触摸功能检测通常用于节省添加事件侦听器的 CPU/内存开销。触摸检测可能有用且合适的一个示例：

```
if (isTouchCapable) {
    document.addEventListener('touchstart', myTouchFunction, false); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T13:41:52.517

您应该考虑使用经过良好测试（和跨浏览器）的 Modernizr 的触摸测试。

*从他们的网站：*

```
// bind to mouse events in any case

if (Modernizr.touch){
   // bind to touchstart, touchmove, etc and watch `event.streamId`
} 
```

[http://modernizr.github.com/Modernizr/touch.html](http://modernizr.github.com/Modernizr/touch.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-26T16:09:21.340

好老的问题，但是必须在没有库的情况下执行此操作，我创建了以下解决方案 - 只需让事件自己说话 - 当您看到`touch`事件时，只需禁用`mouse`事件处理即可。

在 coffescript 中是这样的；

```
 hasTouch = false
           mouseIsDown = false
           @divs.on "touchstart", (e)->
              hasTouch = true
              touchstart(e.timeStamp,e.originalEvent.touches[0].pageX);
              return true
           @divs.on "mousedown", (e)->
              mouseIsDown = true;
              touchstart(e.timeStamp,e.clientX) if not hasTouch
              return true

           @divs.on 'touchmove', (e) ->
              touchmove(e.timeStamp,e.originalEvent.touches[0].pageX);
              return true;
           @divs.on 'mousemove', (e) ->
              touchmove(e.timeStamp,e.clientX) if mouseIsDown and not hasTouch 
              return true;

           @divs.on 'touchend', (e) ->
              touchend();
              return true
           @divs.on 'mouseup', (e) ->
              mouseIsDown = false;
              touchend() if not hasTouch
              return true 
```

刚刚定义的函数`touchstart`，`move`并`end`包含实际的逻辑....

# node.js - 用 Kue 在同一个节点进程中生产和消费作业可以吗？

> ID：14439904
> 
> 赞同：0
> 
> 时间：2013-01-21T13:38:12.613
> 
> 标签：node.js, kue

看着 Kue（https://github.com/LearnBoost/kue）我有点困惑，我是否可以在同一个节点进程中生产和消费作业，还是需要在单独的节点进程中启动消费者？

我需要在没有任何 HTTP 请求阻塞的情况下将一些 CPU 繁重的任务（生成 PDF）卸载到作业队列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:06:17.047

我想你回答了你自己的问题。;-) 是的——至少在生产中，您的工作进程应该与服务 HTTP 请求的进程分开。在开发过程中，也许你想简化你的生活，让一切都在一个进程中运行，但即便如此，我还是推荐单独的进程。

# php - 在类中调用静态方法

> ID：14439908
> 
> 赞同：2
> 
> 时间：2013-01-21T13:38:31.580
> 
> 标签：php, static

```
class Test {
    public function __construct() {
        self::runTest();
        Test::runTest();
    }

    public static function runTest() {
        echo "Test running";
    }
}

// echoes 2x "Test running"
new Test(); 
```

`self::runTest()`和有什么区别`Test::runTest()`吗？如果是这样，我应该使用哪一个？

`self::runTest()`在类内和类外调用方法`Test::runTest()`时？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T13:39:42.153

您应该`self::runTest()`从类方法内部和类方法`Test::runTest()`外部调用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T13:40:36.707

> self::runTest() 在类内调用方法，而在类外调用 Test::runTest()？

确切地！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-21T14:12:19.027

这是一些示例代码来显示正在发生的事情：

```
class A {
  function __construct(){
     echo get_class($this),"\n"; 
     echo self::tellclass();
     echo A::tellclass();
  }

  static function tellclass(){
    echo __METHOD__,' ', __CLASS__,"\n";
  }

}

class B extends A {
}

class C extends A{
    function __construct(){
        echo "parent constructor:\n";
        parent::__construct();
        echo "self constructor:\n";
        echo get_class($this),"\n";
        echo self::tellclass();
        echo C::tellclass();
    }

    static function tellclass(){
        echo __METHOD__, ' ', __CLASS__,"\n";
    }
}

$a= new A;
// A
//A::tellclass A
//A::tellclass A

$b= new B;
//B
//A::tellclass A
//A::tellclass A

$c= new C;

//parent constructor:
//C    
//A::tellclass A
//A::tellclass A

//self constructor:
//C
//C::tellclass C
//C::tellclass C 
```

要点是`A::tellclass()` *始终*调用中`tellclass`定义的方法`A`。但是`self::tellclass()`允许子类使用他们自己的版本，`tellclass()` *如果*他们有的话。正如@One Trick Pony 所说，您还应该查看后期静态绑定：[http ://ca2.php.net/manual/en/language.oop5.late-static-bindings.php](http://ca2.php.net/manual/en/language.oop5.late-static-bindings.php)

# c++ - 为什么某些类名没有被 Visual Studio 2012 着色？

> ID：14439910
> 
> 赞同：0
> 
> 时间：2013-01-21T13:38:34.217
> 
> 标签：c++, c++11, ide, visual-studio-2012, visual-assist

`'thread'`并且`'function'`是 STL 类名`'vector', 'list', etc.`

然而`'thread'`和`'function'`在 Visual Studio 2012 的文本编辑器中没有着色，而`'vector'`和`'list'`是正常的。

为什么以及如何解决？

PS：

`'std::thread'`很好；但是`'thread'`（没有前缀`std::`）仍然没有着色。

此外，还启用了 Visual AssistX。我尝试禁用 Visual AssistX，但没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:24:43.283

std::thread 在我的环境中是彩色的。这取决于您的环境设置，您可以在 VS 2012 中的选项->环境->字体和颜色下导入或制作自己的。有几个免费在线主题。

# junit - 如何在模拟对象中调用另一个方法

> ID：14439920
> 
> 赞同：3
> 
> 时间：2013-01-21T13:39:20.497
> 
> 标签：junit, mocking, mockito

我有里面的对象面板是方法

```
protected Confirmation confim() {
    Confirmation confirmation = new Confirmation() {
        @Override
        public void onConfirm() {
            doCancel();
        }
    };

    return confirmation;        
}

protected void doCancel() {
    ....
} 
```

我需要检查 Confirm() 调用 doCancel 方法

我的测试

```
@Test
public void test() {
    Panel panel = Mockito.mock(Panel.class);

    Mockito.doCallRealMethod().when(panel).confirm();
    Mockito.doCallRealMethod().when(panel).cancel();

    panel.confirm();

    Mockito.verify(panel).cancel();
}` 
```

问题是它`cancel()`永远不会被调用......也许是因为它`OnConfirm()`是一个被覆盖的方法并且它需要一个模拟......或者其他东西......有人可以帮助如何测试吗？

必须模拟 PS 面板。

问题是不要调用 panel.confirm().onConfirm(); 这是愚蠢的错误..所以请删除这个问题..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:45:08.360

```
 @Test
public void test() {
    Panel panel = Mockito.mock(Panel.class);

    Mockito.doCallRealMethod().when(panel).confirm();
    Mockito.doCallRealMethod().when(panel).cancel();

        panel.confirm().onConfirm();

    Mockito.verify(panel).cancel();
}` 
```

# c++ - 在vc2010中为映射值类型创建指向成员的指针

> ID：14439921
> 
> 赞同：8
> 
> 时间：2013-01-21T13:39:23.387
> 
> 标签：c++, visual-c++

我们在将代码移植到稍微不那么旧的 VC++ 2010 版本时遇到了问题。

该问题是由 VC 中的 map 实现引起的，这导致需要 a 的派生到基础`pointer-to-member`转换`non-type-argument`：

```
#include <map>
#include <algorithm>

template <typename MapValueType, int MapValueType::*var>
bool f (MapValueType const & v);

int main ()
{
  typedef std :: map<int, int> MapType;
  MapType m;
  std :: find_if (m.begin ()
      , m.end ()
      , f<MapType::value_type, & MapType::value_type::second> );
} 
```

生成以下消息：

> 模板参数 file.cc(x) 不适用于从基的指向成员的指针到派生的指向成员的标准转换：错误 C2973：'f'：无效的模板参数'int std::_Pair_base<_Ty1， _Ty2>::* '

因此，似乎 in 的实现在基类`value_type`中`std::map`具有该对。

关于如何解决这个问题*并将*其保留`pointer-to-member`为的任何想法`non-type-argument`？

`f`是我们改变结构的唯一选择`functor`吗`pointer-to-member`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:26:40.557

为什么您坚持将指向成员的指针保留为非类型模板参数/参数？

无论如何，我认为你可以使用它，如果你可以限制为 Visual Studio 2010 或编译器`decltype()`

```
template <typename Class, typename Type>
Class
get_class_type (Type Class:: *);
//...
it = std::find_if(m.begin(), m.end(),
    f<decltype(get_class_type(&MapType::value_type::second)), &MapType::value_type::second>); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T14:38:20.167

如果您的代码应该编译 IMO（它在 GCC 4.7.2 和 Clang 3.2 上编译），我相信您的设计是不必要的复杂。A`pair`只有两个成员变量，因此您将访问第一个或第二个。

我也不认为需要仿函数对象：只需使用布尔模板参数来确定代码是否应`first`在成员变量或`second`成员变量上工作。这是一种可能性：

```
#include <map>
#include <algorithm>

template <typename MapValueType, bool first>
bool f (MapValueType const & p)
{
    auto& v = (first) ? p.first : p.second;
    // ... do your work on v ...    
}

int main ()
{
    typedef std :: map<int, int> MapType;
    MapType m;

    // Will work on the `first` member
    std::find_if(m.begin (), m.end (), f<MapType::value_type, true>);

    // Will work on the `second` member
    std::find_if(m.begin (), m.end (), f<MapType::value_type, false>);
} 
```

如果您真的无法更改您的客户端代码或`f()`函数内的代码，那么您可以使用这个 VS2010 特定的 hack：

```
// Add "_MyBase" here... works, but ugly IMO
template <typename MapValueType, int MapValueType::_Mybase::* var>
bool f(MapValueType const & v);

// And the client side could stay unchanged...
int main ()
{
    typedef std :: map<int, int> MapType;
    MapType m;
    std::find_if(
        m.begin(), 
        m.end (), 
        f<MapType::value_type, &MapType::value_type::second>
        );
} 
```

最后，如果您的代码必须在其他平台上编译，*并且*对函数和客户端代码的不可修改性的所有约束仍然存在，那么您可以定义一个预处理器宏，该宏扩展`_Mybase::`为 VS2010 和其他编译器的空字符串。

# php - HTTP 全局 PHP 变量

> ID：14439931
> 
> 赞同：0
> 
> 时间：2013-01-21T13:39:47.800
> 
> 标签：php, globals

有没有办法获取对包含 HTTP 请求数据（如 get、post、cookie 等）的全局数组的引用？例如：

```
$varName = getRequestReference()['varName']; 
```

其中 getRequestReference() 将返回 &$_GET, &$_POST...，具体取决于用户用于在脚本中提交数据的请求类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:41:30.200

听起来你在 $_REQUEST 变量之后？

[请求变量文档](http://php.net/manual/en/reserved.variables.request.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:42:02.290

您可以使用`$_REQUEST`来获取`$_POST`,`$_GET`或`$_COOKIE`值

有关更多详细信息，请参阅[文档](http://php.net/manual/en/reserved.variables.request.php)。

您还可以创建一个自定义函数，该函数可以抓取`$_POST`或`$_GET`，具体取决于哪个具有请求的密钥：

```
function getRequest($key)
{
    if(!empty($_GET[$key]))
    {
        return $_GET[$name];
    }
    if(!empty($_POST[$key]))
    {
        return $_POST[$name];
    }

    return null;
}

$varValue = getRequest('varName'); 
```

此函数将返回更新的值（当您在运行时修改这些全局变量之一时）

# symfony - 如何在奏鸣曲管理过滤器 symfony2 中设置日期时间和日期的格式

> ID：14439933
> 
> 赞同：7
> 
> 时间：2013-01-21T13:39:51.837
> 
> 标签：symfony, datetime-format, sonata-admin

如何在奏鸣曲管理数据网格过滤器中设置日期时间或日期过滤器？

我想为奏鸣曲管理过滤器执行以下操作，它适用于编辑表单

```
->add('createdAt', 'datetime', array('label' => 'Created at', 'disabled' => true, 
                  'input' => 'datetime',
                  'date_widget' => 'choice',
                  'time_widget' => 'choice',
                  'date_format' => 'MMM d, y',))

->add('deadline', 'date', array('label' => 'Deadline', 'disabled' => true, 
                  'input' => 'datetime',
                  'widget' => 'choice',
                  'format' => 'MMM d, y')) 
```

但是当在过滤器中使用时，它不起作用（或选项被忽略）

```
->add('createdAt', 'doctrine_orm_datetime', array('label' => 'Created At',
                'input' => 'datetime',
                  'date_widget' => 'choice',
                  'time_widget' => 'choice',
                  'date_format' => 'MMM d, y'))

->add('deadline', 'doctrine_orm_date', array('label' => 'Deadline',
                'input' => 'datetime',
                  'widget' => 'choice',
                  'format' => 'MMM d, y')) 
```

我被迫这样做的原因是，在我的服务器（centos 5.2，php 5.3.20）上，月份字段被呈现为时间戳，但在我的开发机器上它被完美呈现 - 关于这个问题有几个问题但没有真正的修复。这 2 个链接描述了我的问题主要问题 - 例如[symfony2 - 日期选择输入呈现时间戳而不是月份名称](https://stackoverflow.com/questions/13879604/symfony2-date-choice-input-renders-timestamp-instead-of-month-name)， http: [//iqwen.net/question/155068](http://iqwen.net/question/155068)

所以我想知道三件事

1.  如何在奏鸣曲管理过滤器中设置日期时间/日期字段的格式选项
2.  有没有办法解决月份在 linux env 上显示为时间戳的问题
3.  如何在 symfony2 / sonata admin 中为日期 / 日期时间字段设置全局格式选项，这样我就不必指定每个字段旁边的格式

任何有关的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T20:47:33.480

你可以这样做：

```
->add('createdAt', 'doctrine_orm_callback', 
              array(
                'label' => 'Created At',
                'callback' => function($queryBuilder, $alias, $field, $value) {
                                if (!$value['value']) {
                                    return;
                                }
                                $time = strtotime($value['value']);
                                $inputValue = date('Y-m-d', $time);
                                $queryBuilder->andWhere("DATE($alias.createdAt) <= :CreatedAt");
                                $queryBuilder->setParameter('CreatedAt', $inputValue);
                                return true;
                              },
                'field_type' => 'text'
              ), null, array('attr' => array('class' => 'datepicker'))) 
```

DATE 函数是您使用 DQL 定义的转换。

# ckeditor - ckeditor 最大化屏幕

> ID：14439935
> 
> 赞同：4
> 
> 时间：2013-01-21T13:40:01.353
> 
> 标签：ckeditor

我正在为我的一个项目使用[Ckeditor](http://ckeditor.com/)。它具有“最大化”的特点，它在整个浏览器窗口中阅读。问题是当我单击浏览器后退按钮时，它会转到上一页，丢失表单的内容。

我们能否以某种方式做到这一点，当我单击浏览器后退按钮时，它会返回表单而不是前一页。

- 谢谢你的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T20:00:42.710

您不能覆盖任何浏览器的后退/前进功能，因为它会违反许多安全方面。请参阅：[如何禁用 IE 和 Firefox 中的后退按钮？](https://stackoverflow.com/questions/780718/how-to-disable-back-button-in-ie-and-firefox), [https://stackoverflow.com/a/12103965/1485219](https://stackoverflow.com/a/12103965/1485219)

最多可以显示一个警报，让用户知道未保存的数据等。最大化的 CKEditor 实例只不过是一个覆盖整个网页的块元素。它与浏览器导航无关。

无论如何，如果您希望使用您的代码最大化编辑器：

```
CKEDITOR.instances.yourInstance.execCommand( 'maximize' );
console.log( CKEDITOR.instances.yourInstance.commands.maximize.state ); 
```

# android - 将 Fragment 之间的数据传递给 Activity

> ID：14439941
> 
> 赞同：16
> 
> 时间：2013-01-21T13:40:33.993
> 
> 标签：android, android-activity, fragment

我需要在 5`fragments`到 1之间传递数据，当我到达5 时`Activity`，那些数据一个接一个地发送，然后我需要存储所有 5 个数据，我们该怎么做。任何想法都很棒。`fragments``fragment``fragments`![在此处输入图像描述](../Images/2ff3e0dee0e1fdbcfd88ee5501c25b43.png)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-21T13:49:26.890

将数据从每个片段传递给活动，当活动获取所有数据然后处理它。您可以使用接口传递数据。

分段：

```
public class Fragment2 extends Fragment {

  public interface onSomeEventListener {
    public void someEvent(String s);
  }

  onSomeEventListener someEventListener;

  @Override
  public void onAttach(Activity activity) {
    super.onAttach(activity);
        try {
          someEventListener = (onSomeEventListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString() + " must implement onSomeEventListener");
        }
  }

  final String LOG_TAG = "myLogs";

  public View onCreateView(LayoutInflater inflater, ViewGroup container,
      Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.fragment2, null);

    Button button = (Button) v.findViewById(R.id.button);
    button.setOnClickListener(new OnClickListener() {
      public void onClick(View v) {
        someEventListener.someEvent("Test text to Fragment1");
      }
    });

    return v;
  }
} 
```

活动：

```
public class MainActivity extends Activity implements onSomeEventListener{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Fragment frag2 = new Fragment2();
        FragmentTransaction ft = getFragmentManager().beginTransaction();
        ft.add(R.id.fragment2, frag2);
        ft.commit();
    }

  @Override
  public void someEvent(String s) {
      Fragment frag1 = getFragmentManager().findFragmentById(R.id.fragment1);
      ((TextView)frag1.getView().findViewById(R.id.textView)).setText("Text from Fragment 2:" + s);
  }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-21T14:03:07.810

以下链接解释了片段之间通信的设计。

[与其他 Fragment 通信](https://developer.android.com/training/basics/fragments/communicating.html)

要允许 Fragment 与其 Activity 进行通信，您可以在 Fragment 类中定义一个接口并在 Activity 中实现它。Fragment 在其 onAttach() 生命周期方法期间捕获接口实现，然后可以调用接口方法以与 Activity 通信。

以下是 Fragment 到 Activity 通信的示例：

```
public class HeadlinesFragment extends ListFragment {

OnHeadlineSelectedListener mCallback;

// Container Activity must implement this interface
public interface OnHeadlineSelectedListener {
    public void onArticleSelected(int position);
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception
    try {
        mCallback = (OnHeadlineSelectedListener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement OnHeadlineSelectedListener");
    }
}

...
} 
```

现在，片段可以通过使用 OnHeadlineSelectedListener 接口的 mCallback 实例调用 onArticleSelected() 方法（或接口中的其他方法）将消息传递给 Activity。

例如，当用户单击列表项时，将调用片段中的以下方法。片段使用回调接口将事件传递给父活动。

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // Send the event to the host activity
    mCallback.onArticleSelected(position);
} 
```

**实现接口**

为了从片段接收​​事件回调，承载它的活动必须实现片段类中定义的接口。

例如，以下活动实现了上述示例中的接口。

```
public static class MainActivity extends Activity
    implements HeadlinesFragment.OnHeadlineSelectedListener{
...

public void onArticleSelected(int position) {
    // The user selected the headline of an article from the HeadlinesFragment
    // Do something here to display that article
}
} 
```

**将消息传递到片段**

宿主 Activity 可以通过 findFragmentById() 捕获 Fragment 实例，将消息传递给 Fragment，然后直接调用 Fragment 的公共方法。

例如，假设上面显示的活动可能包含另一个片段，用于显示上述回调方法中返回的数据指定的项目。在这种情况下，活动可以将回调方法中接收到的信息传递给将显示该项目的另一个片段：

```
public static class MainActivity extends Activity
    implements HeadlinesFragment.OnHeadlineSelectedListener{
...

public void onArticleSelected(int position) {
    // The user selected the headline of an article from the HeadlinesFragment
    // Do something here to display that article

    ArticleFragment articleFrag = (ArticleFragment)
            getSupportFragmentManager().findFragmentById(R.id.article_fragment);

    if (articleFrag != null) {
        // If article frag is available, we're in two-pane layout...

        // Call a method in the ArticleFragment to update its content
        articleFrag.updateArticleView(position);
    } else {
        // Otherwise, we're in the one-pane layout and must swap frags...

        // Create fragment and give it an argument for the selected article
        ArticleFragment newFragment = new ArticleFragment();
        Bundle args = new Bundle();
        args.putInt(ArticleFragment.ARG_POSITION, position);
        newFragment.setArguments(args);

        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

        // Replace whatever is in the fragment_container view with this fragment,
        // and add the transaction to the back stack so the user can navigate back
        transaction.replace(R.id.fragment_container, newFragment);
        transaction.addToBackStack(null);

        // Commit the transaction
        transaction.commit();
    }
   }
 } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-01-17T09:52:31.013

我尝试了以上所有方法，但对我没有用。这就是我让它工作的方式。我使用接口作为将数据从片段发送到活动的手段。

**FragmentToActivity.java**

```
public interface FragmentToActivity {
void communicate(String comm);

} 
```

**片段一**

```
public class FragmentOne extends Fragment {

private FragmentToActivity mCallback;

@Override
public void onAttach(Context context) {
    super.onAttach(context);
    try {
        mCallback = (FragmentToActivity) context;
    } catch (ClassCastException e) {
        throw new ClassCastException(context.toString()
                + " must implement FragmentToActivity");
    }
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.fragment_login, container, 
false);
sendData("Andrews");

return v;
}
@Override
public void onDetach() {
    mCallback = null;
    super.onDetach();
}

public void onRefresh() {
    Toast.makeText(getActivity(), "Fragment : Refresh called.",
            Toast.LENGTH_SHORT).show();
  }
private void sendData(String comm)
    {
    mCallback.communicate(comm);

    }

 }

} 
```

**活动一**

```
public class Account extends AppCompatActivity implements 
  FragmentToActivity{

  @Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
 }

@Override
public void communicate(String s) {

    Log.d("received", s);
      }

} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-21T13:47:40.120

您必须将信息返回到片段的活动中。并且您的 Activity 将信息发送到其片段：

```
// In fragment A
((ParentActivity)getActivity()).dispatchInformations("test");

// In ParentActivity
public void dispatchInformations(String mesg){
    fragmentB.sendMessage(mesg);
} 
```

这是一个基本的例子

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-17T10:06:08.380

您可以使用上述答案中解释的 Communicator 模式。此外，您可以使用[RxJava2](https://github.com/ReactiveX/RxJava) . 以获得更好的解耦和效率。

**1-创建总线：**

```
public final class RxBus {

    private static final BehaviorSubject<Object> behaviorSubject
        = BehaviorSubject.create();

    public static BehaviorSubject<Object> getSubject() {
        return behaviorSubject;
    }

} 
```

**2- 发送者活动或片段**

```
//the data to be passed
MyData  data =getMyData();
RxBus.getSubject().onNext(data) ; 
```

**3-接收者活动或片段**

```
private Subscription subscription;

public onCreate(Bundle savedInstanceState){
    subscription = RxBus.getSubject()
                    .subscribe(new Subscriber<Object>() {

            @Override
            public void onNext(Object o) {
                if (o instanceof MyData) {
                    Log.d("tag", (MyData)o.getData();
                }
            }

            @Override
            public void onError(Throwable e) {

            }

            @Override
            public void onComplete() {

            }
        });
} 
```

**4-取消订阅以避免内存泄漏：**

```
@Override
protected void onDestroy() {
    super.onDestroy();
 if(subscription!=null){
     subscription.unsubscribe();
   }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-16T02:13:50.710

有一种非常简单的方法可以将数据从 Fragment 传递到另一个不是其容器的 Activity。

1）在片段中：当您启动活动时，例如 onButtonClick，将您想要传递的数据作为额外的数据传递给您的意图，如下所示：

```
 Intent intent = new Intent(getActivity(), MapsActivity.class);
     intent.putExtra("data", dataString);
     startActivity(intent); 
```

2）在接收Activity中：在你的onCreate方法中，创建一个Bundle来检索传递的信息，如下：

```
Bundle extras = getIntent().getExtras();
    if (extras != null) {
        receivingString = extras.getString("data");
    } else {
        // handle case
    } 
```

希望它有所帮助:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-08T03:48:55.453

我正在寻找一种将数据从片段传递到活动的解决方案。我就是这样做的，我发现它最适合我需要的东西。

我发现最好使用全局共享和更新数据`shared ViewModel`

在共享 ViewModel 中，我使用可变实时数据存储和更新数据，并将其范围限定为 MainActivity。ViewModel 是一个单例，在活动生命周期结束之前一直保留在内存中。

```
class SharedViewModel: ViewModel() {

    private val selectedItems: MutableLiveData<List<Product>> =
        MutableLiveData<List<Product>>(listOf())

    fun getItems(): LiveData<List<Product>> {
        return selectedItems
    }

    fun sendSelectedItems(items: MutableList<Product>) {
        selectedItems.postValue(items)
    }
}

MainActivity: AppCompactActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
    // scope shared view model to MainActivity
    // I can access and update data from here
        val model = ViewModelProvider(this).get(SharedViewModel::class.java)
    }
}

class MyFragment1: Fragment() {
    // I'm able to get and update data in the SharedViewModel in fragment
    // to activity
    private val sharedModel: SharedViewModel by activityViewModels()
} 
```

此外，您可以向主活动添加回调。您可以使用接口。

```
interface IAddListener {
    fun sendItems(items: MutableList<Product>?)
}

class MyFragment: Fragment() {

   override fun onAttach(context: Context) {
        super.onAttach(context)

        if (context is IAddListener)
            mCallback = context
    }

    private var mCallback: IAddListener? = null
} 

class MainActivity: AppCompactActivity(), IAddToPrintQueueListener {

    override fun sendItems(items: MutableList<Product>?) {
        // update something
    }
} 
```

这是有关共享数据[文档的文档的链接](https://developer.android.com/guide/fragments/communicate)

# java - Mule 可以运行 JavaEE Web 应用程序吗？

> ID：14439944
> 
> 赞同：1
> 
> 时间：2013-01-21T13:40:37.877
> 
> 标签：java, mule

我正在尝试将 Java servlet 转换为 Mule Web 服务，但我的程序不止一个类。我已经看过很多关于在 Java 组件中使用带有 Mule 的 POJO 的教程，但从来没有看到一个包含多个类的程序。如何才能做到这一点？

编辑：我的 servlet 当前正在 Tomcat 服务器上运行。它接收一个带有搜索详细信息的 xml 文档，搜索一个数据库，然后输出一个带有搜索结果的 xml 文档。xml的解析和生成，数据库的连接和查询目前都由servlet处理。我只想能够使用Mule而不是在tomcat服务器上运行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:25:46.250

得益于其嵌入式 Jetty 容器，Mule 可以运行 JavaEE 网络应用程序。

查看与独立发行版捆绑在一起的 Bookstore 示例，了解它是如何完成的。这个例子确实在 Mule 中独立部署了两个 Web 应用程序*bookstore*和*bookstore-admin 。*

假设你的 web-app 是**xmlproc.war**，你在 Mule 应用程序 Zip 中想要的布局是：

```
.
├── mule-config.xml
├── classes
│   ├── <classes and resources from xmlproc/WEB-INF/classes>
├── lib
│   ├── <non-provided libs from xmlproc/WEB-INF/lib>
└── webapps
    └── xmlproc
        ├── <jsps>
        └── WEB-INF
            └── web.xml 
```

使用 mule-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesoft.org/schema/mule/core"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:jetty="http://www.mulesoft.org/schema/mule/jetty"
      xsi:schemaLocation="
        http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
        http://www.mulesoft.org/schema/mule/jetty http://www.mulesoft.org/schema/mule/jetty/current/mule-jetty.xsd">

    <jetty:connector name="jettyConnector">
        <jetty:webapps directory="${app.home}/webapps" port="8083"/>
    </jetty:connector>
</mule> 
```

*未提供的*库意味着您不应嵌入位于 $MULE_HOME/lib/** 下的库。

# asp.net-mvc - 重命名控制器

> ID：14439947
> 
> 赞同：6
> 
> 时间：2013-01-21T13:40:47.123
> 
> 标签：asp.net-mvc, asp.net-mvc-3, visual-studio-2010, razor, controller

我正在学习[asp.net 的 ASP.NET MVC3 入门章节](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/accessing-your-model%27s-data-from-a-controller)。我刚刚创建了`MoviesController`控制器，但我打错了。如何重命名它（所以它不会破坏任何东西）。不幸的是，我没有在解决方案资源管理器中找到如何重命名（重构）控制器，因此所有名称更改都适用于整个项目。至少，`.cs`应该重命名控制器文件、视图文件夹以及文件中的一些名称。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T13:45:21.293

我觉得**[ReSharper](http://www.jetbrains.com/resharper/)**是您的 Visual Studio 配置中不能缺少的工具。它是一个生产力插件，可让您非常轻松地重构代码、清理代码、查找问题以及查找文件或类。

例如，对于您的用例，您只需将插入符号放在控制器名称上并使用重构快捷键热键重命名它，它将重命名该类的所有用法，对于控制器，它将在视图中这样做好。

*非常*方便。对我来说这是一个**要求**。我已经使用它三年了，从未回头。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-21T13:47:29.223

使用 Visual Studio：在编辑器中突出显示控制器名称，然后按 F2。您必须自己重命名文件夹。

或者，安装 Resharper 并使用其中的重构......它使重命名目录和文件变得非常容易，但需要一点时间来学习它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-23T15:03:12.907

请记住（手动）执行任何引用控制器名称的 RedirectToAction。按照惯例，它们中没有“控制器”一词，这可能弊大于利（但我离题了），并且不适合胆小的人。

此外，虽然我很欣赏人们在这些论坛上发帖，但依赖于非免费外部工具的东西并不是很好的答案。大概有一种方法可以做到这一点，而无需重新锐化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T13:46:54.973

您应该投资使用[T4MVC](http://t4mvc.codeplex.com/)，这样您的视图中就不会出现旧的“魔术”字符串的问题。

# css - 行距和混合字体大小

> ID：14439948
> 
> 赞同：3
> 
> 时间：2013-01-21T13:40:47.940
> 
> 标签：css

任何人都知道是否可以使用 CSS 保持恒定的行距，即使您在一行上使用不同的字体大小？下面是一个示例，其中第二段的行距大于第一个。我尝试将 CSS 中“巨大”跨度的 line-height 设置为 0，但这似乎还不够。

```
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Line Spacing Test</title>
<style type="text/css">
body {
    font-size: 14px;
    line-height: 1;
}
.huge {
    font-size: 64px;
    line-height: 0;
}
</style>
</head>
<body>

<p>Here is a line using normal font size.<br />
Here is another line using normal font size.</p>

<p>Here is a line with a span with <span class="huge">huge</span> font
size.<br />
Here is another line with a span with <span class="huge">huge</span>
font size.</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:59:37.737

只有将行间距设置得足够大以容纳所使用的最大字体，才能使行间距保持不变。根据规范，[`line-height`](http://www.w3.org/TR/CSS21/visudet.html#propdef-line-height)在块元素上设置会设置行框的*最小*高度。对于内联元素，事情要复杂得多，但归根结底是让浏览器最终决定行框的高度，从而决定间距。

但是，在某些浏览器上，您可以说服浏览器使用您的身高，例如通过添加

```
span { display: inline-block; height: 16px; } 
```

# java - 添加验证我是否在 Eclipse 中的代码？

> ID：14439955
> 
> 赞同：2
> 
> 时间：2013-01-21T13:41:18.720
> 
> 标签：java, eclipse, maven, junit, openoffice-api

正如在不同位置所提到的，maven（3.0.1 版）不支持项目外部的 CLASSPATH。因此，当 jUnitTest 想要启动外部应用程序（如 OpenOffice ie）时，它会在启动命令 '$> mvn test' 时失败。在 Eclipse 中，我可以在“运行配置”中手动添加 CLASSPATH，然后它就可以正常工作了。

我的问题：我可以在我的 jUnitTest 源代码中添加代码来验证我在 Eclipse 中吗？因为这只会跳过命令行上的测试。而其他测试仍在命令行上继续进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:07:58.957

您可以使用[Maven 配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)来激活不同的属性、运行不同的命令、根据需要修改类路径，甚至过滤掉一些测试。例如，您可以创建仅在 Eclipse 中使用的特定配置文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T15:09:48.580

编写一个类来验证您要使用的类是否已加载（由于类加载器的工作方式，需要是一个单独的类。它将类似于

```
public class OODetector {
  public static boolean isOOOnClassPath() {
    try {
      OODetector.class.getClassLoader().loadClass("org.... class name here ...");
      return true;
    } catch (Throwable t) {
      return false;
    }
  } 
} 
```

现在在任何需要类路径上的类的测试开始时，只需放置`Assume.assumeThat(OODetector.isOOOnClassPath(), is(true));`，在这种情况下您的测试将被跳过，例如

```
public class OOTests {
  @Test
  public void smokes() throws Exception {
    Assume.assumeThat(OODetector.isOOOnClassPath(), is(true));
    // rest of test
  }
} 
```

或者更好的是，把它放在@BeforeClass 中，例如

```
public class OOTests {
  @BeforeClass
  public static void smokes() throws Exception {
    Assume.assumeThat(OODetector.isOOOnClassPath(), is(true));
  }

  // tests
} 
```

如果 OO 不在类路径上，这将跳过类中的所有测试，不影响失败计数，但保持总测试计数有效，并且当您找出正确方法将运行时依赖项获取到 Maven 启动的测试时类路径然后测试将神奇地开始运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:45:29.700

只需添加一个运行时或 VM 标志，您可以在代码中测试其值。

# asp.net-mvc - Kendo Grid 不为我处理脏东西。为什么？

> ID：14439956
> 
> 赞同：0
> 
> 时间：2013-01-21T13:41:23.680
> 
> 标签：asp.net-mvc, kendo-ui

我的 mvc 项目中有一个剑道网格（内联模式），我通过 mvc 初始化了网格。问题是当我添加一个新行时，它的 id 为 0，并且它的脏属性设置为 true。如何刷新添加的项目并为其设置正确的 ID？

这是我的剑道网格：

```
@(Html.Kendo().Grid<IranHost.Tools.Services.Core.DataModel.Site>()
                                    .Name("grid")
                                    .Columns(columns =>
                                    {
                                        columns.Bound(p => p.Domain).Width(250).Title("دامین");
                                        columns.Command(command => { command.Edit().Text("ویرایش").UpdateText("ذخیره").CancelText("لغو"); command.Destroy().Text("حذف"); });
                                    })
                                    .ToolBar(toolbar => toolbar.Create().Text("افزودن دامین جدید").HtmlAttributes(new { @class = "add-button" }))
                                    .Editable(editable => { editable.Mode(GridEditMode.InLine); })
                                    .Sortable()
                                    .Pageable()
                                    .Scrollable()
                                    .Events(action => { action.Edit("gridEdit"); action.Save("gridSave"); action.SaveChanges("gridSaveChanges"); })
                                    .DataSource(dataSource => dataSource
                                        .Ajax()
                                        .Events(events => { events.Error("result_handler"); })
                                        .Model(model => model.Id(p => p.Id))
                                        .Create(create => create.Action("AddDomain", "Service", new { customerID = ViewBag.CustomerId }))
                                        .Read(read => read.Action("GetDomainListForGrid", "Service", new { customerID = ViewBag.CustomerId }))
                                        .Update(update => update.Action("EditDomain", "Service"))
                                        .Destroy(destroy => destroy.Action("DeleteDomain", "Service"))
                                    )
                                    ) 
```

这就是我在服务器端所做的：

```
public ActionResult AddDomain([DataSourceRequest] DataSourceRequest request, DataModel.Site site)
    {
        if (ModelState.IsValid)
        {
            var pattern = "([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w\\.-]*)";
            if (!Regex.IsMatch(site.Domain, pattern))
            {
                //TODO: Must be added in the framework.
                ModelState.AddModelError("ERROR", "Wrong URL Format!");
                return Json(ModelState.ToDataSourceResult(), JsonRequestBehavior.AllowGet);
            }

            var siteContext = new Biz.Site(DataContext);
            siteContext.Add(site);
            DataContext.SaveChanges();
            ModelState.AddModelError("ADDED", site.id);
            return Json(new[] { site }.ToDataSourceResult(request, ModelState), JsonRequestBehavior.AllowGet);
        }

        return new HttpStatusCodeResult(403);
    } 
```

但是还是不行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:54:47.830

问题解决了！我使用的是旧版本的 KendoUI，它没有 requestEnd，所以我开始使用 AddModelError 来处理服务器端结果。实际上，我使用 AddModelError 不是为了错误，而只是告诉客户端添加/编辑该项目是成功的。

这实际上是一个非常糟糕的主意，但我现在别无选择。在客户端，我提出了 Events.Error("result_handler")。Kendo 虽然这确实是一个错误，所以它没有对 ui 进行任何更改，而是将脏属性设置为 true！

现在我的老板正试图在我使用 ajaxComplete 引发其他事件的同时获得新版本的 KendoUI。不幸的是，在我获得更新版本之前，我真的没有太多选择！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:18:37.393

创建新记录时，默认 int id 值为 0。

这个想法是当你点击保存按钮时，记录被发送到服务器，你需要返回带有更新的 id 的项目（从数据库中检索到的那个）。然后返回客户端，当 Grid 读取该值并看到它与默认值（零）不同时，它将将新记录标记为成功插入。如果没有返回项目或缺少更新的 id 值，则 Grid 将继续将记录标记为脏记录，并将在未来单击 save/saveChanges 按钮时继续将其重新发送到服务器。

如果要更改默认 ID 值，可以在模型定义中使用 DefaultValue 方法。

```
.Model(model => model.Id(p => p.Id).DefaultValue(-42)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:36:31.593

您需要在任何 CRUD 操作之后将记录返回到网格。您甚至希望在 Destory 上执行此操作，以便为您的 error_handler 事件返回错误。这是我在此处发布的许多答案中使用的代码，还有一些额外的内容，但您应该查看的是如何将单个记录转换为列表，就像最初的读取一样。如果需要，请查看我的其他答案以获取有关模型和 FlattenToThis 的更多详细信息。但我认为这应该足以让你到达你要去的地方。

```
[HttpPost]
public JsonResult CreatePerson([DataSourceRequest]DataSourceRequest request, Person person)
{
    if (ModelState.IsValid)
    {
        try
        {
            person = _personDataProvider.Create(person);
        }
        catch (Exception e)
        {
            ModelState.AddModelError(string.Empty, e.InnerException.Message);
        }
    }
    var persons = new List<Person> {person};
    DataSourceResult result = PersonModel.FlattenToThis(persons).ToDataSourceResult(request, ModelState);
    return Json(result, JsonRequestBehavior.AllowGet);
}

public JsonResult ReadPeople([DataSourceRequest]DataSourceRequest request)
{
    var persons = _personDataProvider.Read(false);
    DataSourceResult result = PersonModel.FlattenToThis(persons).ToDataSourceResult(request);
    return Json(result, JsonRequestBehavior.AllowGet);
}

[HttpPost]
public JsonResult UpdatePerson([DataSourceRequest]DataSourceRequest request, Person person)
{
    if (ModelState.IsValid)
    {
        try
        {
            person = _personDataProvider.Update(person);
        }
        catch (Exception e)
        {
            ModelState.AddModelError(string.Empty, e.InnerException.Message);
        }
    }
    var persons = new List<Person>() {person};
    DataSourceResult result = PersonModel.FlattenToThis(persons).ToDataSourceResult(request, ModelState);
    return Json(result, JsonRequestBehavior.AllowGet);
}

[HttpPost]
public JsonResult DestroyPerson([DataSourceRequest]DataSourceRequest request, Person person)
{
    if (ModelState.IsValid)
    {
        try
        {
            person = _personDataProvider.Destroy(person);
        }
        catch (Exception e)
        {
            ModelState.AddModelError(string.Empty, "There was an error deleting this record, it may still be in use.");
        }
    }
    var persons = new List<Person>() {person};
    DataSourceResult result = PersonModel.FlattenToThis(persons).ToDataSourceResult(request, ModelState);
    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

# tridion - Tridion 多行文本字段大小限制

> ID：14439969
> 
> 赞同：1
> 
> 时间：2013-01-21T13:42:06.370
> 
> 标签：tridion, textfield

我有一种情况，多行文本字段的所需内容超过了 Content Porter 中允许的 3,400 个字节（正如彼得指出的那样，此限制不适用于组件字段 CME 端中此字段的存储- 错误如下[1]）。

我看到的解决方案是

1.  减小内容的大小以减少冗长
2.  我尝试将 maxlength 添加到架构定义中（这将强制执行上述操作！）
3.  使用可重复的字段并（手动或使用事件系统以编程方式）将文本拆分为最大大小的块
4.  寻求扩大限制？

**1**出来了——这是客户的事情。

**2**是不行的 - 我看到这是[设计排除的](https://stackoverflow.com/questions/14396071/maxlength-restriction-for-multilinetext-field-in-sdl-tridion-2011)

**3**是我正在考虑的——我什至可以使用 GUI 扩展来提醒用户[服务器端](http://nunolinhares.blogspot.be/2012/07/validating-content-on-save-part-1-of.html)代码或[Anguilla](http://www.curlette.com/?p=913)）

**4**是我想知道是否有人以受支持的方式通过 SDL 实现了这一点（因为我们显然不能只更改数据库中的字段长度！）

感谢您的任何评论

[1]

```
Destination with name 'HTTPS=[Password=****, URL=http://server.com:81/HTTPUpload.aspx, UserName=removed]' reported the following failure:
A processing error occurred processing a transport package Could not deploy component  [Component id=tcm:11-123-16 title=article_title schema=tcm:11-121-8], Error while creating custom meta data, String or binary data would be truncated., String or binary data would be truncated., Error while creating custom meta data, String or binary data would be truncated., String or binary data would be truncated. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:13:53.497

在 Tridion 2009 SP1 的日子里，由于数据库列的大小为 5000 个字符，因此存在限制。除此之外的任何文本都被截断。使用可重复字段不是一种选择，因为可重复字段都存储在同一个 DB CustomMeta 记录中，并且只是用逗号分隔。我使用的解决方法是创建单独的字段，最多可以存在预期的最大字符数。

我认为对于您使用 Content Porter 的情况，您应该首先查看可用的 CP 修补程序，否则请向支持部门开票。

# c# - 从 NetworkStream 读取会破坏缓冲区

> ID：14439976
> 
> 赞同：0
> 
> 时间：2013-01-21T13:42:27.943
> 
> 标签：c#, multithreading, sockets, asynchronous, system.reactive

使用 ReadUntilClosedObservable1 从 NetworkStream 读取数据时，返回的数据已损坏，就像某些读取数据块重叠一样。

但是，当我使用 ReadUntilClosedObservable2 读取数据时，数据到达时没有问题。

我想使用 ReadUntilClosedObservable1，因为在 ReadUntilClosedObservable2 中重复读取流正在消耗 CPU。

如何按同步顺序获取消息？

**更新：**

```
return Observable.Timer(TimeSpan.Zero, interval, TaskPoolScheduler.Default)
                    .SelectMany(_ => readToEnd)
                    .Where(dataChunk => dataChunk.Length > 0); 
```

我只是注意到`readToEnd`to 在完成上一份工作之前被一次又一次地解雇。不需要同步吗？如果`Observable.Timer`是问题，如果没有它，我怎样才能达到相同的效果，间隔阅读但不等待就开始？

```
public static IObservable<int> ReadObservable(this Stream stream, byte[] buffer
                                              ,int offset, int count)
{
    return stream.ReadAsync(buffer, offset, count)
                    .ToObservable();
}

public static IObservable<byte[]> ReadObservable(this Stream stream,
                                                 int bufferSize)
{
    var buffer = new byte[bufferSize];

    return stream.ReadObservable(buffer, 0, buffer.Length)
                    .Select(cbRead =>
                                {
                                    if (cbRead == 0)
                                    {
                                        return new byte[0];
                                    }

                                    if (cbRead == buffer.Length)
                                    {
                                        return buffer;
                                    }

                                    var dataChunk = new byte[cbRead];

                                    Buffer.BlockCopy(buffer, 0, dataChunk,
                                                     0, cbRead);

                                    return dataChunk;
                                });
}

public static IObservable<byte[]> ReadUntilClosedObservable1(this NetworkStream
                                     stream, int bufferSize, TimeSpan interval)
{
    var readToEnd = Observable.Defer(() => stream.ReadObservable(bufferSize))
                                .DoWhile(() => stream.DataAvailable)
                                .ToList()
                                .Select(dataChunks =>
                                    {
                                        var buffer = new List<byte>();

                                        foreach (var dataChunk in dataChunks)
                                        {
                                            buffer.AddRange(dataChunk);
                                        }

                                        return buffer.ToArray();
                                    });

    return Observable.Timer(TimeSpan.Zero, interval, TaskPoolScheduler.Default)
                        .SelectMany(_ => readToEnd)
                        .Where(dataChunk => dataChunk.Length > 0);
}

public static IObservable<byte[]> ReadUntilClosedObservable2(this Stream stream
                                                             ,int bufferSize)
{
    return Observable.Defer(() => stream.ReadObservable(bufferSize))
                        .Repeat()
                        .Where(dataChunk => dataChunk.Length > 0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:29:24.983

哦，不，不……不要那样做……

Async + Rx 是一种更...*非直观的*设置来开始工作，但它比您尝试的要简单得多。关键位是三个不同的 Rx 运算符：

*   `FromAsyncPattern``IObservable`：从异步调用签名生成“工厂”
*   `Observable.Defer`：允许您使用上述`IObservable`工厂为每个订阅者生成 observables
*   `Observable.While`：允许您“在我说什么时候重新调用”`IObservable`

（编辑：更改为使用`NetworkStream`示例）

（双重编辑：根据评论更改）

试试这个 - 除非我错过了我的猜测，它或多或少是你正在尝试的：

```
void Main()
{    
    // We'll feed this to listener
    var message = "Yo mamma said you like messages like this";

    var listenerTask = Task
        .Factory
        .StartNew(() => 
            {
                var bufferSize = 1024;
                var localhost = new IPAddress(new byte[]{127,0,0,1});
                var listener = new TcpListener(localhost, 11201);
                listener.Start();
                var incomingClient = listener.AcceptTcpClient();
                var clientStream = incomingClient.GetStream();
                // our buffered reader
                var observer = clientStream.ReadObservable(bufferSize);
                var compareBuffer = observer
                    // Take while we're getting data and the client
                    // is still connected
                    .TakeWhile(returnBuffer => returnBuffer.Length > 0 && 
                        incomingClient.Connected)
                    // In between read blocks, respond back to the client
                    // No need for fanciness here, just normal async writeback
                    .Do(returnBuffer => clientStream.BeginWrite(
                             returnBuffer, 
                             0, 
                             returnBuffer.Length, 
                             ar => clientStream.EndWrite(ar), 
                             null))
                    .ToEnumerable()
                    .SelectMany (returnBuffer => returnBuffer)
                    .ToArray();
                listener.Stop();
                Console.WriteLine(
                     "Listener thinks it was told... {0}", 
                     Encoding.ASCII.GetString(compareBuffer));
            });

    var clientTask = Task.Factory.StartNew(
        () => 
        {
            var client = new TcpClient();
            client.Connect("localhost", 11201);
            var random = new Random();
            var outStream = client.GetStream();
            var bytesToSend = Encoding.ASCII.GetBytes(message);
            foreach(byte toSend in bytesToSend)
            {
                // send a character over
                outStream.WriteByte(toSend);

                // Listener should parrot us...
                int goOn = outStream.ReadByte();
                if(goOn != toSend)
                {
                    Console.WriteLine(
                        "Huh. Listener echoed wrong. I said: {0}, they said {1}", 
                         toSend, 
                         goOn);
                    break;
                }
                Console.WriteLine("I said: {0}, they said {1}", toSend, goOn);

                // Take a little nap (simulate latency, etc)
                Thread.Sleep(random.Next(200));
            }
            client.Close();
        });

    Task.WaitAll(listenerTask, clientTask);
}

public static class Ext
{        
    public static IObservable<byte[]> ReadObservable(this Stream stream, int bufferSize)
    {        
        // to hold read data
        var buffer = new byte[bufferSize];
        // Step 1: async signature => observable factory
        var asyncRead = Observable.FromAsyncPattern<byte[], int, int, int>(
            stream.BeginRead, 
            stream.EndRead);
        return Observable.While(
            // while there is data to be read
            () => stream.CanRead, 
            // iteratively invoke the observable factory, which will
            // "recreate" it such that it will start from the current
            // stream position - hence "0" for offset
            Observable.Defer(() => asyncRead(buffer, 0, bufferSize))
                .Select(readBytes => buffer.Take(readBytes).ToArray()));
    }
} 
```

# spring - Spring 模型对象未呈现

> ID：14439977
> 
> 赞同：2
> 
> 时间：2013-01-21T13:42:28.563
> 
> 标签：spring, jsp

我试图在某个 JSP 页面（**success.jsp**）上从我的控制器返回一个消息字符串作为模型对象。但是该消息未在目标页面上呈现。这是我在页面上得到的（**success.jsp**）：

> 欢迎.. ${message}

这是我的 JSP 页面返回的控制器方法：

```
@RequestMapping(value="/register",method=RequestMethod.POST)
      public ModelAndView registerUser(@ModelAttribute("dtoUserInfo") DtoUserInfo dtoUserInfo)
      {
            ModelAndView modelAndView = new ModelAndView();
            serviceUserInfo1.registerUser(dtoUserInfo);
            modelAndView.setViewName("success");
            modelAndView.addObject("message","New User");
            return modelAndView;
      } 
```

这是我的 jsp 页面内容（**success.jsp**）

欢迎.. ${message}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:57:52.820

您需要配置您的 JSP 来处理 EL 表达式。

为此，请在您的 jsp 中添加这一行：

```
<%@ page isELIgnored="false" %> 
```

# ruby - heroku db:push sqlite://mydatabase.db 错误

> ID：14439981
> 
> 赞同：0
> 
> 时间：2013-01-21T13:42:44.887
> 
> 标签：ruby, sqlite, heroku, sinatra

**当我执行“heroku db:push sqlite://mydatabase.db”时，我遇到了 Ruby + Sinatra + Sqlite3 + Heroku 的问题：

**当我这样做时：“heroku db:push sqlite://anotador.db”**

**控制台日志：**

```
2013-01-21T12:37:11+00:00 app[web.1]: Errno::ENOENT - No such file or directory - /app/views/home.erb:
2013-01-21T12:37:11+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:572:in `erb' 
```

**我的 anotador.rb ：**

```
require 'rubygems'  
require 'sinatra'  
require 'data_mapper'

DataMapper::setup(:default, ENV['DATABASE_URL'] || "sqlite3://#{Dir.pwd}/anotador.db")  
class Nota  
  include DataMapper::Resource  
  property :id, Serial  
  property :content, Text, :required => true  
  property :complete, Boolean, :required => true, :default => false  
  property :created_at, DateTime  
  property :updated_at, DateTime  
end  
DataMapper.finalize.auto_upgrade! 
```

**我的宝石文件：**

```
source :rubygems
gem 'sinatra'
gem 'data_mapper' 
gem 'rack-flash'
gem 'sinatra-redirect-with-flash'
gem 'builder'
gem 'dm-postgres-adapter', :group => :production
gem 'dm-sqlite-adapter', :group => :development
gem 'thin'

group :development, :test do
  gem 'sqlite3'
end
group :production do
  gem 'pg'
end 
```

**在命令行中：**

```
$ bundle
$ git init 
$ git add .
$ git commit -m "comentario" 
$ heroku create nombreAPP --stack cedar
$ git push heroku master 

$ heroku addons:add heroku-postgresql:dev
$ heroku pg:promote <DATABASE_URL>  
$ heroku db:push sqlite://anotador.db 
```

**我知道 Heroku 不使用 Postgres 和 SQLite**

但是 Heroku 有能力移动数据库并使用 SQLite 到 Postgres，在这个链接中举例说明：

[https://devcenter.heroku.com/articles/ruby](https://devcenter.heroku.com/articles/ruby) # using-a-sql-database

我在开发中使用 sqlite3，在生产中使用 Postgres

在 GemFile 中：

```
group :development, :test do
  gem 'sqlite3'
end
group :production do
  gem 'pg'
end 
```

这个链接有一个例子：

[http://yamilurbina.com/post/4854924459/deploying-a-sinatra-datamapper-sqlite-app-to-heroku](http://yamilurbina.com/post/4854924459/deploying-a-sinatra-datamapper-sqlite-app-to-heroku)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:59:47.017

据我所知，您不能在 Heroku 上使用 SQLite3。您可以改用 Postgres 或 Mysql 数据库。

所以当你说

```
heroku db:push sqlite://mydatabase.db 
```

你不应该那样做。它不起作用，因为 SQLite Gem 在 Heroku 上不可用。是什么`db:push`？是一些 rake 任务吗？我想您仍然需要将其指定给 Heroku。

*   [将带有 SQLite3 的 Rails 推送到 Heroku 失败](https://stackoverflow.com/questions/3747002/heroku-rails-3-and-sqlite3)

*   [使用 Sqlite3 将 RoR 应用程序部署到 Heroku 失败](https://stackoverflow.com/questions/3897431/deploying-ror-app-to-heroku-with-sqlite3-fails)

# r - 聚合的意外输出

> ID：14439987
> 
> 赞同：10
> 
> 时间：2013-01-21T13:43:14.520
> 
> 标签：r, aggregate

[在这里](https://stackoverflow.com/questions/14434632/find-frequency-of-each-unique-column-in-a-matrix-or-data-frame/14436500#14436500)尝试`aggregate`另一个问题时，我遇到了一个相当奇怪的结果。我无法弄清楚为什么，我想知道我所做的是否完全错误。

假设，我有一个`data.frame`这样的：

```
df <- structure(list(V1 = c(1L, 2L, 1L, 2L, 3L, 1L), 
                     V2 = c(2L, 3L, 2L, 3L, 4L, 2L), 
                     V3 = c(3L, 4L, 3L, 4L, 5L, 3L), 
                     V4 = c(4L, 5L, 4L, 5L, 6L, 4L)), 
                  .Names = c("V1", "V2", "V3", "V4"), 
        row.names = c(NA, -6L), class = "data.frame")
> df
#   V1 V2 V3 V4
# 1  1  2  3  4
# 2  2  3  4  5
# 3  1  2  3  4
# 4  2  3  4  5
# 5  3  4  5  6
# 6  1  2  3  4 
```

现在，如果我想输出一个`data.frame`具有*唯一行*的附加列，该列指示它们在`df`. 对于这个例子，

```
#   V1 V2 V3 V4 x
# 1  1  2  3  4 3
# 2  2  3  4  5 2
# 3  3  4  5  6 1 
```

我通过以下实验获得了这个输出`aggregate`：

```
> aggregate(do.call(paste, df), by=df, print)

# [1] "1 2 3 4" "1 2 3 4" "1 2 3 4"
# [1] "2 3 4 5" "2 3 4 5"
# [1] "3 4 5 6"
#   V1 V2 V3 V4                         x
# 1  1  2  3  4 1 2 3 4, 1 2 3 4, 1 2 3 4
# 2  2  3  4  5          2 3 4 5, 2 3 4 5
# 3  3  4  5  6                   3 4 5 6 
```

所以，这给了我粘贴的字符串。因此，如果我使用`length`而不是`print`，它应该给我这样的出现次数，这是期望的结果，就是这种情况（如下所示）。

```
> aggregate(do.call(paste, df), by=df, length)
#   V1 V2 V3 V4 x
# 1  1  2  3  4 3
# 2  2  3  4  5 2
# 3  3  4  5  6 1 
```

这似乎奏效了。但是，当`data.frame`维度为 4*2500 时，输出`data.frame`为 1*2501 而不是 4*2501（所有行都是唯一的，因此频率为 1）。

```
> df <- as.data.frame(matrix(sample(1:3, 1e4, replace = TRUE), nrow=4))
> o <- aggregate(do.call(paste, df), by=df, length)
> dim(o)
# [1]    1 2501 
```

我用只有唯一行的较小的 data.frames 进行了测试，它给出了正确的输出（`nrow=40`例如 change ）。但是，当矩阵的维度增加时，这似乎不起作用。我就是不知道出了什么问题！有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T14:20:47.080

这里的问题是如何`aggregate.data.frame()`确定组。

其中`aggregate.data.frame()`有一个形成分组变量的循环`grp`。在该循环中，`grp`通过以下方式更改/更新：

```
grp <- grp * nlevels(ind) + (as.integer(ind) - 1L) 
```

如果曾经`by`将其转换为因子，并且循环已经遍历了*所有*这些因子，那么您的示例的问题`grp`最终是：

```
Browse[2]> grp
[1] Inf Inf Inf Inf 
```

本质上，循环更新将 的值推`grp`送到一个与 . 无法区分的数字`Inf`。

做完之后再做`aggregate.data.frame()`这个

```
y <- y[match(sort(unique(grp)), grp, 0L), , drop = FALSE] 
```

这就是之前的问题现在表现出来的地方

```
dim(y[match(sort(unique(grp)), grp, 0L), , drop = FALSE]) 
```

因为

```
match(sort(unique(grp)), grp, 0L) 
```

显然只返回`1`：

```
> match(sort(unique(grp)), grp, 0L)
[1] 1 
```

因为只有一个唯一值`grp`。

# eclipse - Eclipse 找不到 JRE

> ID：14439988
> 
> 赞同：0
> 
> 时间：2013-01-21T13:43:19.403
> 
> 标签：eclipse, java

> **可能重复：**
> [Eclipse 找不到 JDK 或 JRE](https://stackoverflow.com/questions/4419983/eclipse-cant-find-the-jdk-or-jre)

我安装了 Eclipse Juno 64 位，但 eclipse 没有运行。它给我一个错误，它无法找到 jvm.dll 和 jdk 等。我提供了 JDK 和 jre 所在的文件夹的路径，`eclipse.ini`但我仍然遇到错误并且无法运行 eclipse。

我的 JDK 和 jre 在`C:/Program Files(x86)`

我该如何解决这个问题？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:50:14.373

您不能使用 32 位 JVM 运行 64 位 Eclipse（32 位软件转到`Program Files(x86)`）。

安装 64 位版本的 Java 或 32 位版本的 Eclipse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:47:31.290

在 eclipse.ini 文件中，关键是 -vm 条目必须位于 -vmargs 条目之前，并且 -vm 参数和您的路径之间有一个换行符。

它应该类似于：
-vm
*absolute_path_to_javaw.exe* /javaw.exe

我相信你也可以使用java.exe（而不是javaw.exe）。

运行 eclipse 的任何东西都应该在 -vmargs 行之前，而 JVM 的任何东西都应该在它之后。

# android - 使用片段以编程方式将 Google maps v2 添加到我的 android 应用程序

> ID：14439990
> 
> 赞同：1
> 
> 时间：2013-01-21T13:43:34.737
> 
> 标签：android, google-maps, fragment

嗨，我正在玩片段和谷歌地图，由于某种原因我的地图不会显示，我正在使用带有标签的片段，我想以编程方式将地图添加到其中一个标签中。

请问我做错了什么：

主要活动

```
public class MainActivity extends FragmentActivity implements
ActionBar.TabListener, OnClickListener {

/**
 * The serialization (saved instance state) Bundle key representing the
 * current tab position.
 */
private static final String STATE_SELECTED_NAVIGATION_ITEM = "selected_navigation_item";
private SlidingMenu menu;

private double latitude;
private double longitude;
private static int lng = 0;
private static int lat = 0;

String display = "";
ProgressDialog pDialog;
ProgressDialog pDialog2;
GooglePlaces googlePlaces;
Foursquare foursquare;
PlacesList nearPlaces;
ArrayList<FsqVenue> nearbylist;
String types;
String Message;
Foursquare fsq;
Boolean isInternetPresent = false;
ConnectionDetector cd;
GPSTracker gps;
AlertDialogManager alert = new AlertDialogManager();
LayoutInflater inflater;
RelativeLayout rlayout;
ListView listview;
Location location;
TextView myTitleText;
ImageView myTitleImage;
// static Context context;
public static Context appContext;

String catId = null;

int minlat = Integer.MAX_VALUE;
int minlong = Integer.MAX_VALUE;
int maxlat = Integer.MIN_VALUE;
int maxlong = Integer.MIN_VALUE;

public static String KEY_REFRENCE = "refrence";
public static String KEY_NAME = "name";
public static String KEY_VICINITY = "vivinity";
public static String KEY_CATEGORY = "category";

Foursquare NearbyList = new Foursquare();

public static ArrayList<HashMap<String, String>> placesListItems = new ArrayList<HashMap<String, String>>();
static List<Float> myLat = new ArrayList<Float>();
static List<Float> myLng = new ArrayList<Float>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    /*getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,
            R.layout.window_title_single_item);*/
    setContentView(R.layout.activity_main);
    getSupportFragmentManager()
    .beginTransaction()
    .replace(R.id.container, new SampleListFragment())
    .commit();

    // Set up the action bar to show tabs.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // For each of the sections in the app, add a tab to the action bar.
    actionBar.addTab(actionBar.newTab().setText("MAP")
            .setTabListener(this));
    actionBar.addTab(actionBar.newTab().setText("List")
            .setTabListener(this));
    actionBar.addTab(actionBar.newTab().setText("AR")
            .setTabListener(this));
    menu = new SlidingMenu(this);

    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    menu.setShadowWidthRes(R.dimen.shadow_width);
    menu.setShadowDrawable(R.drawable.shadow);
    menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    menu.setFadeDegree(0.35f);
    menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
    menu.setMenu(R.layout.behind_main);

    cd = new ConnectionDetector(getApplicationContext());

    // Check if Internet present
    isInternetPresent = cd.isConnectingToInternet();
    if (!isInternetPresent) {
        // Internet Connection is not present
        alert.showAlertDialog(MainActivity.this,
                "Internet Connection Error",
                "Please connect to working Internet connection", false);

        // stop executing code by return
        return;
    }

    // creating GPS Class object
    gps = new GPSTracker(this);

    // check if GPS location can get
    if (gps.canGetLocation()) {
        Log.d("Your Location", "latitude:" + gps.getLatitude()
                + ", longitude: " + gps.getLongitude());
    } else {
        // Can't get user's current location
        alert.showAlertDialog(MainActivity.this, "GPS Status",
                "Couldn't get location information. Please enable GPS",
                false);

        // stop executing code by return
        return;
    }

    latitude = gps.getLatitude();
    longitude = gps.getLongitude();
    lng = (int) (longitude * 1E6);
    lat = (int) (latitude * 1E6);
    location = gps.getLocation();

    Button pointOfIntrest = (Button) findViewById(R.id.point_of_intrest);
    Button cloth = (Button) findViewById(R.id.clothing);
    Button sports = (Button) findViewById(R.id.atletics);
    Button nightlife = (Button) findViewById(R.id.nightlifespot);
    Button spirt = (Button) findViewById(R.id.spritual);
    Button medic = (Button) findViewById(R.id.medic3);
    Button university = (Button) findViewById(R.id.university);
    Button hotel = (Button) findViewById(R.id.lodging);
    Button atm = (Button) findViewById(R.id.banks);
    Button eat = (Button) findViewById(R.id.food);

    pointOfIntrest.setOnClickListener(this);
    cloth.setOnClickListener(this);
    sports.setOnClickListener(this);
    nightlife.setOnClickListener(this);
    spirt.setOnClickListener(this);
    medic.setOnClickListener(this);
    university.setOnClickListener(this);
    hotel.setOnClickListener(this);
    atm.setOnClickListener(this);
    eat.setOnClickListener(this);

}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    // Restore the previously serialized current tab position.
    if (savedInstanceState.containsKey(STATE_SELECTED_NAVIGATION_ITEM)) {
        getActionBar().setSelectedNavigationItem(
                savedInstanceState.getInt(STATE_SELECTED_NAVIGATION_ITEM));
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    // Serialize the current tab position.
    outState.putInt(STATE_SELECTED_NAVIGATION_ITEM, getActionBar()
            .getSelectedNavigationIndex());
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onTabSelected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, show the tab contents in the
    // container view.

    if (tab.getPosition() == 0) {
        Fragment mMapFragment = new MapDisplayFragment();
        Bundle arguments = new Bundle();
        arguments.putInt(MapDisplayFragment.ARG_SECTION_NUMBER,
                89);
        ((Fragment) mMapFragment).setArguments(arguments);
        getSupportFragmentManager().beginTransaction()
        .replace(R.id.container, mMapFragment).commit();
    }

    if (tab.getPosition() == 1) {
        Fragment mListFragment = new ListDispalyFragment();
        Bundle arguments = new Bundle();
        arguments.putInt(MapDisplayFragment.ARG_SECTION_NUMBER,
                49);
        mListFragment.setArguments(arguments);
        getSupportFragmentManager().beginTransaction()
        .replace(R.id.container, mListFragment).commit();
    }

    if (tab.getPosition() == 2) {
        Fragment mMapFragment = new MapDisplayFragment();
        Bundle arguments = new Bundle();
        arguments.putInt(MapDisplayFragment.ARG_SECTION_NUMBER,
                59);
        mMapFragment.setArguments(arguments);
        getSupportFragmentManager().beginTransaction()
        .replace(R.id.container, mMapFragment).commit();
    }

}

@Override
public void onTabUnselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    //fragmentTransaction.remove(fragment);
}

@Override
public void onTabReselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {

    case R.id.point_of_intrest:

        catId = "4d4b7104d754a06370d81259";
        if (myTitleText != null) {
            myTitleText.setText("Arts & Entertainment");
        }

        if (myTitleImage != null) {
            myTitleImage.setVisibility(ImageView.INVISIBLE);
        }

        menu.toggle();
        new LoadPlaces().execute();

        break;

    case R.id.clothing:

        types = "zoo|museum|amusement_park|city_hall|casino|aquarium|shopping_mall|university|spa";
        catId = "4d4b7105d754a06378d81259";
        if (myTitleText != null) {
            myTitleText.setText("Clothing Stores");
        }

        if (myTitleImage != null) {
            myTitleImage.setVisibility(ImageView.INVISIBLE);
        }

        menu.toggle();
        new LoadPlaces().execute();
        break;

    case R.id.atletics:

        types = "zoo|museum|amusement_park|city_hall|casino|aquarium|shopping_mall|university|spa";
        catId = "4d4b7105d754a06377d81259";
        if (myTitleText != null) {
            myTitleText.setText("Recreation& Outdoors");
        }

        if (myTitleImage != null) {
            myTitleImage.setVisibility(ImageView.INVISIBLE);

        }

        menu.toggle();
        new LoadPlaces().execute();
        break;

    case R.id.nightlifespot:

        catId = "4d4b7105d754a06376d81259";

        if (myTitleText != null) {
            myTitleText.setText("Nightlife Spots");

        }

        if (myTitleImage != null) {
            myTitleImage.setVisibility(ImageView.INVISIBLE);

        }

        menu.toggle();
        new LoadPlaces().execute();
        break;

    case R.id.spritual:

        catId = "4bf58dd8d48988d131941735";
        if (myTitleText != null) {
            myTitleText.setText("Spiritual Centers");

        }
        if (myTitleImage != null) {
            myTitleImage.setVisibility(ImageView.INVISIBLE);

        }

        menu.toggle();
        new LoadPlaces().execute();

        break;

    case R.id.medic3:

        catId = "4bf58dd8d48988d104941735";
        if (myTitleText != null) {
            myTitleText.setText("Medical Centers");

        }
        if (myTitleImage != null) {
            myTitleImage.setVisibility(ImageView.INVISIBLE);

        }

        menu.toggle();
        new LoadPlaces().execute();

        break;

    case R.id.university:

        catId = "4d4b7105d754a06372d81259";

        if (myTitleText != null) {
            myTitleText.setText("College & University");

        }

        if (myTitleImage != null) {
            myTitleImage.setVisibility(ImageView.INVISIBLE);

        }

        menu.toggle();
        new LoadPlaces().execute();
        break;

    case R.id.lodging:

        catId = "4bf58dd8d48988d1fa931735";

        if (myTitleText != null) {
            myTitleText.setText("Hotels");

        }

        if (myTitleImage != null) {
            myTitleImage.setVisibility(ImageView.INVISIBLE);

        }

        menu.toggle();
        new LoadPlaces().execute();
        break;

    case R.id.banks:

        catId = "4bf58dd8d48988d10a951735";

        if (myTitleText != null) {
            myTitleText.setText("Banks & ATMs");

        }

        if (myTitleImage != null) {
            myTitleImage.setVisibility(ImageView.INVISIBLE);

        }

        menu.toggle();
        new LoadPlaces().execute();
        break;

    case R.id.food:

        catId = "4d4b7105d754a06374d81259";

        if (myTitleText != null) {
            myTitleText.setText("Food");

        }

        if (myTitleImage != null) {
            myTitleImage.setVisibility(ImageView.INVISIBLE);

        }

        menu.toggle();
        new LoadPlaces().execute();
        break;

    }

}

private void validate(int size) {
    // TODO Auto-generated method stub

    if (size != 0) {
        for (FsqVenue item : nearbylist) {
            HashMap<String, String> map = new HashMap<String, String>();
            // System.out.print("match");
            map.put(KEY_REFRENCE, item.id);
            map.put(KEY_NAME, item.name);
            map.put(KEY_CATEGORY, item.type);
            myLat.add((float) item.location.getLatitude());
            myLng.add((float) item.location.getLongitude());
            Log.d("categories-match", String.valueOf(item.verified));
            placesListItems.add(map);

        }

    }

}

class LoadPlaces extends AsyncTask<String, String, String> {

    protected void onPreExecute() {

        super.onPreExecute();
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage(Html
                .fromHtml("<b>Search</b><br/>Loading Places......"));
        pDialog.setIndeterminate(true);
        pDialog.setCancelable(false);
        pDialog.show();

    }

    @Override
    protected String doInBackground(String... arg0) {
        // TODO Auto-generated method stub
        // googlePlaces = new GooglePlaces();
        foursquare = new Foursquare();

        try {
            // double radius = 10000;
            // NearbyList = foursquare.getNearby(latitude, longitude);
            // NearbyList.getNearby(latitude, longitude);
            nearbylist = foursquare.getNearby(latitude, longitude, catId);
            // int size = nearbylist.size();
            // System.out.print(size);
            // nearPlaces =
            // googlePlaces.search((double)gps.getLatitude(),(double)gps.getLongitude(),
            // radius, types);
        } catch (Exception e) {
            e.printStackTrace();
            System.out.println("error" + e);
        }
        try {
            validate(nearbylist.size());
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    protected void onPostExecute(String file_url) {

        pDialog.dismiss();

        /*mapFrag = new MapDispalyFragment(location, placesListItems, myLat,
                myLng);

        mAdapter = new MyAdpater(getSupportFragmentManager());
        mPager.setAdapter(mAdapter);
         */
        runOnUiThread(new Runnable() {

            public void run() {

            }

        });

    }
} 
```

}

我的地图片段活动公共类 MapDisplayFragment 扩展 SupportMapFragment {

```
public static final String ARG_SECTION_NUMBER = "section_number";
private static final String MAP_FRAGMENT_TAG = "map";
private GoogleMap mMap;
private SupportMapFragment mMapFragment;

/*
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

     mMapFragment = (SupportMapFragment) getSupportFragmentManager()
                .findFragmentByTag(MAP_FRAGMENT_TAG);

        // We only create a fragment if it doesn't already exist.
        if (mMapFragment == null) {
            // To programmatically add the map, we first create a SupportMapFragment.
            mMapFragment = SupportMapFragment.newInstance();

            // Then we add it using a FragmentTransaction.
            FragmentTransaction fragmentTransaction = getSupportFragmentManager()
                    .beginTransaction();
            fragmentTransaction.add(android.R.id.content, mMapFragment, MAP_FRAGMENT_TAG);
            fragmentTransaction.commit();
        }

        // We can't be guaranteed that the map is available because Google Play services might
        // not be available.
        setUpMapIfNeeded();
}

*/  
@Override
public void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    setUpMapIfNeeded();
    Log.d("OnResume View" , "Sucess");
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    //return super.onCreateView(inflater, container, savedInstanceState);
    /*TextView textView = new TextView(getActivity());
    textView.setGravity(Gravity.CENTER);
    textView.setText(Integer.toString(getArguments().getInt(
            ARG_SECTION_NUMBER)));*/

    mMapFragment = (SupportMapFragment) getFragmentManager()
            .findFragmentByTag(MAP_FRAGMENT_TAG);

    // We only create a fragment if it doesn't already exist.
    if (mMapFragment == null) {
        // To programmatically add the map, we first create a SupportMapFragment.
        mMapFragment = SupportMapFragment.newInstance();

        // Then we add it using a FragmentTransaction.
        FragmentTransaction fragmentTransaction = getFragmentManager()
                .beginTransaction();
        fragmentTransaction.add(android.R.id.content, mMapFragment, MAP_FRAGMENT_TAG);
        fragmentTransaction.commit();

        mMapFragment.onCreate(savedInstanceState);

        Log.d("OnCreate View" , "Sucess");
    }

    // We can't be guaranteed that the map is available because Google Play services might
    // not be available.
    setUpMapIfNeeded();
    return null;
}

private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = mMapFragment.getMap();
        // Check if we were successful in obtaining the map.
        if (mMap != null) {
            setUpMap();
        }
    }
}

private void setUpMap() {
    mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));

} 
```

}

我的日志消息

```
01-21 21:12:38.639: E/AndroidRuntime(8924): FATAL EXCEPTION: main
01-21 21:12:38.639: E/AndroidRuntime(8924): java.lang.RuntimeException: Unable to resume activity {com.example.reddotiantired/com.example.reddotiantired.MainActivity}: java.lang.NullPointerException
01-21 21:12:38.639: E/AndroidRuntime(8924):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2464)
01-21 21:12:38.639: E/AndroidRuntime(8924):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2492)
01-21 21:12:38.639: E/AndroidRuntime(8924):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1997)
01-21 21:12:38.639: E/AndroidRuntime(8924):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-21 21:12:38.639: E/AndroidRuntime(8924):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-21 21:12:38.639: E/AndroidRuntime(8924):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 21:12:38.639: E/AndroidRuntime(8924):     at android.os.Looper.loop(Looper.java:137)
01-21 21:12:38.639: E/AndroidRuntime(8924):     at android.app.ActivityThread.main(ActivityThread.java:4441)
01-21 21:12:38.639: E/AndroidRuntime(8924):     at java.lang.reflect.Method.invokeNative(Native Method)
01-21 21:12:38.639: E/AndroidRuntime(8924):     at java.lang.reflect.Method.invoke(Method.java:511)
01-21 21:12:38.639: E/AndroidRuntime(8924):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:01:43.683

看看这个帖子：

[子类化 SupportMapFragment 导致 NullPointerException](https://stackoverflow.com/questions/13725056/subclassing-supportmapfragment-results-in-a-nullpointerexception)

这对我有用。

# htmlunit - 在 HTML 单元中跳过特定的 Javascript 执行

> ID：14439991
> 
> 赞同：6
> 
> 时间：2013-01-21T13:43:35.127
> 
> 标签：htmlunit

我有一个网址。我想在执行 Java 脚本后获取 URL 的页面源。

[使用 HtmlUnit 获取页面源：URL 卡住了](https://stackoverflow.com/questions/14396052/fetch-page-source-using-htmlunit-url-got-stuck)

最初我怀疑是由于系统资源和 CPU 使用率过高，导致 URL 卡住了。

然后我尝试在 HTML UNIT 2.9 和 2.11 上运行它。它在解析时卡在两者上。[有关卡住的 HTML UNIT 代码抓取，](https://stackoverflow.com/questions/14396052/fetch-page-source-using-htmlunit-url-got-stuck)请参阅上述问题。

现在我怀疑这可能是由于 JS 执行进入无限循环。

我想检查导致问题的 JS 文件并将它们从执行中删除。

如果它们是谷歌分析、推特等网站的 JS，我可能根本不需要它们。

所以我想找到一种方法来告诉 HTML 单元忽略某些 JS 文件并执行其余的。

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T07:09:04.883

尝试这个。它对我有用：

```
class InterceptWebConnection extends FalsifyingWebConnection{
    public InterceptWebConnection(WebClient webClient) throws IllegalArgumentException{
        super(webClient);
    }
    @Override
    public WebResponse getResponse(WebRequest request) throws IOException {
        WebResponse response=super.getResponse(request);
        if(response.getWebRequest().getUrl().toString().endsWith("dom-drag.js")){
            return createWebResponse(response.getWebRequest(), "", "application/javascript", 200, "Ok");
        }
        return super.getResponse(request);
    }
} 
```

然后在设置你的时候写下`webClient`

```
new InterceptWebConnection(webClient); 
```

# ios - 我可以使用 iOS 推送通知进行应用实时内容更新吗？

> ID：14439993
> 
> 赞同：1
> 
> 时间：2013-01-21T13:43:36.473
> 
> 标签：ios, notifications, push

我想使用没有徽章、消息或声音的推送通知消息，仅使用与应用程序相关的 JSON 来实时更新应用程序的内容。这些通知在应用程序未运行时无用，因此当应用程序进入后台或用户空闲时我不会发送它们（向我的服务器发送 unsubsrcibe ）并在应用程序进入前台或用户活动时再次订阅。Apple 是否允许这种推送通知的使用？我不想使用基于轮询或自定义套接字的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:04:07.067

我确定有更多理由不使用 APNS 与您的服务器进行实时通信，但这里有两个“阻止程序”

1.  如果用户失去连接，您将无法从您的服务器取消订阅。
2.  推送通知在交付时间方面并不可靠。您只会收到推送服务器通知您的 apn 已排队，而不是实际已交付。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:04:46.677

我不确定推送通知是否适合您。

你应该非常小心地使用推送，如果没有充分的理由，人们不喜欢接收通知。（有些人沉迷于离开通知中心的通知，这是一种强迫症..）。

现在，我不确定您究竟想何时发送通知，但如果它是出于更新目的，并且您会在应用程序未运行时将其关闭，为什么不在使用启动应用程序后每隔一段时间更新一次一个简单的休息服务器。如果您不想提醒用户（没有声音、消息或徽章），那么推送的意义何在..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-11T12:48:46.290

Apple 明确指示不要使用它来发送数据。仅通知有新数据可用。而且通知显然不是实时的。

# css - 在重新调整网页大小时，首先调整两个大小

> ID：14439996
> 
> 赞同：0
> 
> 时间：2013-01-21T13:43:56.460
> 
> 标签：css, html, resize

我有一个带有垂直放置在页面中心部分的 div 的 HTML 页面。 ![在此处输入图像描述](../Images/dcda92f11051d702a09232f9c358fdd4.png) *注意：它只包含中心而不是两侧的 div。

我的要求是，当我重新调整页面大小时，中心 div 应该保持不变，而两侧应该越来越薄，直到中心 div 是唯一可见的东西。听起来很复杂？请检查下面的链接。

```
 <%@ Master Language="C#" AutoEventWireup="true" CodeBehind="TestMasterPage.master.cs" Inherits="WebApplication4.TestMasterPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">

    <title></title>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
    <style media="screen" type="text/css">

        #header
        {
        margin-top:0;
        margin-bottom:0;
        margin-left:8.0em;
        margin-right:8.0em;
        min-width:800px;
        height:25px;
        background-color:#303033;
        border:solid 1px #CCC;
        }

        #menuBar1
        {
        margin-top:0px;
        margin-bottom:0px;
     margin-left:8.0em;
        margin-right:8.0em;
       min-width:800px;
        min-height:2px;       
        }

         #menuBar2
        {
        margin-top:0px;
        margin-bottom:5px;
       margin-left:8.0em;
        margin-right:8.0em;
        min-width:800px;
        min-height:20px;
        background-color:#F5F5F5;
        border:solid 1px #CCC;

        }

         #mainContentArea
        {
        margin-top:5px;
        margin-bottom:0px;
        margin-left:8.0em;
        margin-right:8.0em;
        min-width:800px;
        height:100px;
        background-color:#F5F5F5;
        border:solid 1px #CCC;
        }

         #interfaceArea1
        {
        margin-top:0px;
        margin-bottom:0px;
      margin-left:8.0em;
        margin-right:8.0em;
        min-width:800px;
        height:20px;
        background-color:#F5F5F5;
        border:solid 1px #CCC;
        }

         #contentArea1
        {
        margin-top:0px;
        margin-bottom:0px;
     margin-left:8.0em;
        margin-right:8.0em;
        min-width:800px;
        height:80px;
        background-color:#F5F5F5;
        border:solid 1px #CCC;
        }

        #contentArea2
        {
        margin-top:0px;
        margin-bottom:0px;
  margin-left:8.0em;
        margin-right:8.0em;
        min-width:800px;
        height:80px;
        background-color:#F5F5F5;
        border:solid 1px #CCC;
        }

        #footer
        {
        margin-top:5px;
        margin-bottom:0px;
  margin-left:8.0em;
        margin-right:8.0em;
        min-width:800px;
        height:35px;
        background-color:#303033;
        border:solid 1px #CCC;
        }

      ul
{
list-style-type:none;
padding:0;
overflow:hidden;
margin-top:0;

}
li
{
float:left;
}
a:link,a:visited
{
display:block;
width:120px;
font-weight:bold;
color:#FFFFFF;
background-color:#303033;
text-align:center;
padding:4px;
text-decoration:none;
text-transform:uppercase;
}
a:hover,a:active
{
background-color:#CCC;
}

    </style>

</head>
<body>

    <div id="header">

    </div>    

    <div id="menuBar1">
   <ul>
<li><a href="#home">Home</a></li>
<li><a href="#news">Applications</a></li>
<li><a href="#contact">Webservice</a></li>
<li><a href="#about">Android</a></li>
<li><a href="#about">.NET</a></li>
<li><a href="#about">Other</a></li>

</ul>
    </div>

    <div id="menuBar2">

    </div>

     <div id="mainContentArea">

    <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
    </asp:ContentPlaceHolder>

    </div>

    <div id="interfaceArea1">

    </div>

    <div id="contentArea1">

    </div>

    <div id="contentArea2">

    </div>

    <div id="footer">

    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:18:25.860

查看 CSS 媒体查询并阅读有关响应式设计的信息。

您可能还想在中心设置宽度`divs`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:55:05.670

如果您希望内容保持在中间，则不应设置 a`min-width`而应设置为 fixed`width`或 a `max-width`。将此与`auto`左右边距相结合，这将告诉浏览器将内容居中。例如这个设置：

```
body {
    max-width: 800px; /* can also be "width" depending on your requirements */
    margin-left: auto;
    margin-right: auto;
} 
```

在上面的示例中，我将其应用于`body`元素，但基本上您可以使用任何块元素（在您的情况下*内容 div 之一）执行此操作。

这种布局还有很多其他示例。例如[，ironmyers 布局](http://layouts.ironmyers.com/)具有您似乎想要[的这种单列固定宽度布局。](http://layouts.ironmyers.com/950_pixel_Layouts/layout/?id=7)

* * *

* 注意：您并没有完全轻松地在您的上下文中说出答案，因为您提供的代码不是一个[sscce](http://sscce.org/)，有很多不相关的标记。

# android - Android 应用程序看到 Restlet Web 服务表单模拟器，但没有从设备。（我不使用本地主机地址）

> ID：14439999
> 
> 赞同：0
> 
> 时间：2013-01-21T13:44:09.753
> 
> 标签：android, web-services, android-emulator, restlet

在我设法使用这个网站解决我的问题的所有那些时间里，我都非常满意，这是我第一次不得不寻求帮助。我希望它会成功，我感谢任何试图提供帮助的人。

所以，我有一个使用**Restlet** api 与**restful web 服务通信的****android 应用程序**。这些是事实：

 ****1.  **应用程序正在模拟器上运行**。
2.  我正在使用服务器机器的本地局域网地址（**192.168.1.x**），并且android设备在同一个网络中。
3.  我**可以**从通过 wifi 连接的其他机器上的浏览器访问 ws。
4.  我**可以**从手机上的浏览器访问 ws，但不能从应用程序本身访问。
5.  **防火墙被禁用。**

还有什么我可能需要在 android 应用程序中配置以便它可以在真实设备上运行吗？我假设它可以建立连接，因为我可以从手机上的浏览器访问 WS。它可能与Restlet api有关吗？

提前致谢，

尼古拉****