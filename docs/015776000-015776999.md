# StackOverflow 问答 15776000-15776999

# php - 使用 REST 在 php 中上传文件

> ID：15776003
> 
> 赞同：12
> 
> 时间：2013-04-02T23:03:46.470
> 
> 标签：php, rest, file-upload, curl

有没有办法使用 REST 使用 PHP 将文件从客户端上传到服务器，

我正在尝试使用下面的代码，但它对我不起作用。

```
<?php

$file_to_upload = array('file_contents'=>'@c:\\test.txt');
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://localhost/api/upload.php');
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_RETURNTRANSER, TRUE);
curl_setopt($ch, CURLOPT_UPLOAD, TRUE);
curl_setopt($ch, CURLOPT_POST,TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, $file_to_upload);
 curl_exec($ch) or die( curl_error($ch) );
$error = curl_error($ch);
curl_close ($ch);
echo " Server response: ".$result;
echo " Curl Error: ".$error;

?> 
```

和我的upload.php

```
$uploaddir = realpath('./') . '/';
$uploadfile = $uploaddir . basename($_POST['file']['name']);

echo $uploadfile;
echo "\n";
echo '<pre>';
echo $_POST['file']['tmp_name'];
       if (move_uploaded_file($_POST['file']['tmp_name'], $uploadfile)) {
           echo "File is valid, and was successfully uploaded.\n";
       } else {
           echo "Possible file upload attack!\n";
       }
       echo 'Here is some more debugging info:';

      print_r($_FILES);
       echo "\n<hr />\n";
       print_r($_POST);
print "</pr" . "e>\n";
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-09T10:00:58.660

试试这个。

索引.php

```
<?php
    echo "<pre>";
    print_r($_FILES);
    error_reporting(9);
    if($_REQUEST['action'] == 'submit') {
        $ch = curl_init();
        $filePath = $_FILES['file_upl']['tmp_name'];
        $fileName = $_FILES['file_upl']['name'];
        $data = array('name' => 'Foo', 'file' => "@$filePath", 'fileName' =>$fileName);             
        curl_setopt($ch, CURLOPT_URL, 'http://www.restServiceHost.com/file3/upload.php');
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
        curl_exec($ch);
        curl_close($ch);
    }
?>

<form name="file_up" action="" method="POST" enctype="multipart/form-data">
Upload your file here
<input type="file" name="file_upl" id="file_upl"/>
<input type="submit" name="action" value="submit"/>
</form> 
```

[和http://www.restServiceHost.com/file3](http://www.restServiceHost.com/file3)中的 upload.php

```
<?php
    echo "<pre>";
    echo 'in upload.php<br/>';
    print_r($_FILES);
    print_r($_REQUEST);
    move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_REQUEST["fileName"]);
?> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-24T15:30:33.017

> 我认为你应该寻找`$_FILES['file_contents']`而不是 `$_POST['file']`。– 用户 1190992

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-10T08:36:10.650

php5.5+

```
$filePath = $_FILES['file_upl']['tmp_name'];
$type=$_FILES['file_upl']['type'];
$fileName = $_FILES['file_upl']['name'];

$data = array('file_upl' => curl_file_create($filePath, $type, $fileName));

$ch = curl_init();     
curl_setopt($ch, CURLOPT_URL, 'http://localhost/api/upload.php');
curl_setopt($ch, CURLOPT_HTTPHEADER,array('Content-Type: multipart/form-data'));
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$response = curl_exec($ch);
curl_close($ch); 
```

# javascript - 如何在数组中创建重复对象

> ID：15776007
> 
> 赞同：0
> 
> 时间：2013-04-02T23:04:01.433
> 
> 标签：javascript

我想复制数组中的 3 个对象，直到总共有 50 个。我该怎么做呢？

```
var listings = [
    { 
        address: "123 41st St",
        bedrooms: 2,
        bathrooms: 2,
        image: "img/1bdrm_a.jpg"
    },
    { 
        address: "234 52nd St",
        bedrooms: 1,
        bathrooms: 1,
        image: "img/1bdrm_b.jpg"
    },
    { 
        address: "345 63rd St",
        bedrooms: 3,
        bathrooms: 2,
        image: "img/1bdrm_c.jpg"
    }
]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T23:08:37.127

这个循环应该可以解决问题：

```
for (var i = 3; i < 50; i++) {
  listings[i] = listings[i%3];
} 
```

神奇之处在于模运算符 ( `%`)。 `i`可以递增到您需要的任何值，但`i%3`会继续按该顺序返回 0、1 和 2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T23:08:19.277

您可以使用这样的方法对每个项目进行深层复制（克隆[）](https://stackoverflow.com/a/122190/1156119)。我们可以避免使用`%`此解决方案，因为它最终将毫无用处。

[jsFiddle](http://jsfiddle.net/SeAhX/)

```
var i = 0;
while (listings.length < 50) {
    listings[listings.length] = clone(listings[i++]);
}
console.log(listings);

//https://stackoverflow.com/a/122190/1156119
function clone(obj){
    if(obj == null || typeof(obj) != 'object')
        return obj;

    var temp = obj.constructor(); // changed

    for(var key in obj)
        temp[key] = clone(obj[key]);
    return temp;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:14:33.153

```
var listings = [
    { 
        address: "123 41st St",
        bedrooms: 2,
        bathrooms: 2,
        image: "img/1bdrm_a.jpg"
    },
    { 
        address: "234 52nd St",
        bedrooms: 1,
        bathrooms: 1,
        image: "img/1bdrm_b.jpg"
    },
    { 
        address: "345 63rd St",
        bedrooms: 3,
        bathrooms: 2,
        image: "img/1bdrm_c.jpg"
    }
];
var len=listings.length;
for(var i=0;i<listings.length;i++){
    for(var j=i;j<50;j+=len){
        listings[j]=listings[i];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T23:09:08.983

```
while(listings.length <= 50){
    listings[listings.length] = listings[listings.length - 3]
} 
```

对于这样的事情，我更喜欢 while 循环而不是 for 循环。

# jquery-ui - 自动完成窗口放置得太高

> ID：15776008
> 
> 赞同：1
> 
> 时间：2013-04-02T23:04:01.673
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我有一个 jQuery UI 自动完成菜单，它最初显示得太高并阻塞了文本框。但是，在再敲几下键之后，该框将向下移动到正确的位置。任何人都遇到过这个并知道如何修复它，或者它是 jQuery-ui 中的一个错误？我能找到的唯一其他实例是大约两年前[在此处输入的错误，该错误已关闭并标记为删除。](http://bugs.jqueryui.com/ticket/6636)我在 Chrome 26 和 IE 10 中得到了这个，但在 Firefox 20 中没有。

![在此处输入图像描述](https://i.stack.imgur.com/vTiT5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:10:48.133

弄清楚了。这是导致问题的 jQuery/jQuery-UI 版本的不匹配。愚蠢的 MVC 4 模板。如果有人感兴趣，我将 jQuery 1.7.1 与 jQuery-UI 1.10.1 一起使用。

# mod-rewrite - Apache重写引擎不适用于子域

> ID：15776010
> 
> 赞同：1
> 
> 时间：2013-04-02T23:04:16.637
> 
> 标签：mod-rewrite, yii, apache2

我正在使用 Yii 框架并在 .htaccess 中有以下代码：

```
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

我在 URL 管理器中使用此代码来制作 SEO-URL：

```
'urlManager'=>array(
  'urlFormat'=>'path',
  'rules'=>array(
  ''=>'site/index',
  'admin'=>'admin/default/login',
  '<action:\w+>'=>'site/<action>',
  array('page/view', 'pattern'=>'/<url:(\w|-)+>.html', 'caseSensitive'=>false),
  array('category/view', 'pattern'=>'category/<url:(\w|-)+>', 'caseSensitive'=>false),
  array('product/view', 'pattern'=>'product/<url:(\w|-)+>', 'caseSensitive'=>false),
),
  'showScriptName'=>false,
), 
```

它在我的本地计算机上完美运行。但是当我试图在我的 VDS 上应用它时，我会得到服务器，只有当此代码适用于子域时，例如：我有 blah-blah.com - 此代码有效，但如果我有 new.blah-blah.com（这应该是不同的网站，与 blah-blah.com 没有任何共同之处）我收到以下错误（内部服务器错误 500）：内部服务器错误

服务器遇到内部错误或配置错误，无法完成您的请求。

请联系服务器管理员，[我的电子邮件]，并告知他们错误发生的时间，以及您可能所做的任何可能导致错误的事情。

服务器错误日志中可能提供有关此错误的更多信息。

在 apache 的日志中，我一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:51:22.350

您可以将错误记录到文件或发送到邮件。

在你的 config/main.php

```
 'log'=>array(
                    'class'=>'CLogRouter',
                    'routes'=>array(
                            array(
                                    'class'=>'CFileLogRoute',
                                    'levels'=>'error, warning',
                            ),
                            array(
                                    'class'=>'CEmailLogRoute',
                                    'levels'=>'error, warning',
                                    'emails'=>'yourmail@yourdomain.com',
                            ),

                    ),
             ), 
```

# knockout.js - 内部绑定 带敲除的绑定

> ID：15776015
> 
> 赞同：0
> 
> 时间：2013-04-02T23:04:43.377
> 
> 标签：knockout.js, foreach

我是淘汰的新手，我正在尝试在列表中显示我的数据库中的所有企业，希望运行良好，但我也想显示每个企业的所有联系人仍然无法正常工作。

Entreprise 和 Contact 有关系 -> NumberEnterprise

```
 <tbody id="list" data-bind="foreach: Enterprise">
 <tr class="line">
 <td data-bind="text: NameEnterprise"></td>
 <td data-bind="text: PrioPhone"></td>  
 <td data-bind="with: Enterprise"></td>  
 <td data-bind="Contacts, text:FullName, value : $parent.NumberEnterprise"></td>  
 </tr>
 </tbody> 
```

感谢帮助 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:33:49.577

`data-bind="Contacts,`据我所知，您的数据绑定无效。

做你想做的事，你就在正确的轨道上。这是一个示例模型：

```
function HolderObject(enterPriseArray){
   var self = this;
   self.enterprise = ko.observableArray([]);

   _.each(enterPriseArray, function(e){
          self.enterprise.push(new SomeObject(e));
    });

    ko.applybindings(self) // probably bind it to a div tag somewhere
}

function SomeObject(data){
    var self = this;
    self.nameEnterprise = ko.observable();
    self.prioPhone = ko.observable();
    self.NumberEnterprise = ko.observable();
    self.EnterPrise = ko.observable(new Enterprise(data.fullName)); 
}

function Enterprise(fullName){
   var self = this;
   self.fullName = ko.observable(fullName);
} 
```

然后将您的表格更新为类似

```
<tbody id="list" data-bind="foreach: enterprise">
    <tr class="line">
        <td data-bind="text: nameEnterprise "></td>
        <td data-bind="text: prioPhone "></td>  
        <td><span data-bind="text:FullName"></span><span data-bind="value: $parent.NumberEnterprise"></span></td>  
    </tr>
</tbody> 
```

# ios - UISwitch 仅以一种方式工作

> ID：15776022
> 
> 赞同：1
> 
> 时间：2013-04-02T23:05:29.673
> 
> 标签：ios, uiswitch

我有一个`UISwitch`放在我的情节提要中并将其连接到我的实现文件中的插座，并将该`valueChanged:`方法连接到控制事件“值已更改”。但是，仅当我将其从关闭切换到打开时才调用它，而不是从打开到关闭。

这是我的代码：

视图控制器.h

```
@interface splitViewController : UIViewController
@property (weak, nonatomic) IBOutlet UISwitch *tipIncluded;

@end 
```

视图控制器.m：

```
- (IBAction)valueChanged:(UISwitch *)sender {
    NSLog(@"3");
    if (_tipIncluded.isOn==YES){
        NSLog(@"2");
        _tipIncluded.on=NO;
        _tip.text=@"";
        _tip.backgroundColor = [UIColor whiteColor];

    }
    if (_tipIncluded.isOn==NO){
        NSLog(@"1");
        _tipIncluded.on=YES;
        _tip.text=@"0";
        _tip.backgroundColor = [UIColor lightGrayColor];
        _tip.textColor = [UIColor blackColor];
    }

} 
```

我知道它仅在从关闭变为打开时才调用此方法，因为当我以这种方式切换时，我仅在方法结束时从 NSLog 中获取 3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T23:11:09.053

永远不要将任何事情与“是”或“否”进行比较：

```
if (_tipIncluded.isOn==YES){
if (_tipIncluded.isOn==NO){ 
```

那个代码是错误的。UISwitch也没有`isOn`属性。

简化您的代码。只需说`if (_tipIncluded.on)`和`else`（或`if (!tipIncluded.on)`）。

你正在做的事情也很疯狂。用户将开关切换到 ON 的那一刻，您将*立即*将其切换到 OFF *，*反之亦然。这将使开关无法移动！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:39:40.070

记住也要在开关上放一个插座。这对我有用。只需确保首先输入默认值即可。开也许。

```
[mySwitchOutlet setOn:YES animated:YES];

- (IBAction)mySwitch:(UISwitch *)sender {

    if ([sender isOn])
    {
         NSLog(@"ON");

    }else{
         NSLog(@"OFF");
    }

} 
```

# javascript - 为什么 jQuery 验证在非异步远程请求上返回 1 是否为真，我该如何解决？

> ID：15776032
> 
> 赞同：0
> 
> 时间：2013-04-02T23:06:17.333
> 
> 标签：javascript, ajax, validation, jquery-validate

我正在使用 jQuery.validate 库来检查表单字段是否与数据数组匹配。

[这是远程方法的文档。](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)

当它返回 true 时，jQuery.validate`1`在错误字段中显示 a，并阻止表单，就好像出现错误一样。即使`echo true;`我的 PHP 文件中什么都没有，我也会得到相同的结果。我能找到的每一个参考都暗示`async:false`了我已经完成的设置。下面的代码对我的网页是准确的：

```
var unl_validator = jQuery('.unlimited_coupon_form').validate({
    rules: {
        coupon: {
            required: true,
            minlength: 4,
            remote: {
                url: "<?= get_template_directory_uri() ?>/inc/checkCoupon.php",
                async:false,
                data: {
                    coupon: function(){
                        return jQuery('#subscribe_coupon').val();
                    },
                },
                type: "post",

            }
        }
    },
    messages: {
        coupon: { required: "Please enter a valid coupon.", minlength: "Please enter a valid coupon.", remote: "This coupon code is not valid." }
    },
    onkeyup: false,
    onblur: true
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:13:51.003

验证插件是否知道如何处理真实的显示？听起来不像。您可能需要在 PHP 中显示其他内容。

要正确输出服务器响应，一个简单的字符串是不够的。在 PHP 中，您可以这样使用 JSON：

```
$result = true;
echo json_encode($result); 
```

或者如果您需要输出特定值

```
$result = new stdClass();
$result->someField = true;
$result->otherField = false;
echo json_encode($result);
// the above will output {someField: 1, otherField: 0}; 
```

# jquery - jQuery 的 .is() 选择器的对立面是什么？

> ID：15776034
> 
> 赞同：3
> 
> 时间：2013-04-02T23:06:24.757
> 
> 标签：jquery, jquery-selectors

我正在尝试使用`is()`选择器制作悬停功能。但我需要的是相反的！

```
$('.tray .tab').is(".active").hover(
...function
); 
```

我尝试了`not()`选择器，但这是一种过滤方法，所以它不能按我想要的方式工作。

```
$('.tray .tab').not(".active").hover(
...function
); 
```

我想要做的是，如果您悬停包含 class 的元素`active`，则不应执行该函数。

```
<div class='tray'>
    <div class='tab'>Tab 1</div>
    <div class='tab active'>Tab 1</div>
    <div class='tab'>Tab 3</div>
</div> 
```

我知道这可以通过检查来实现`if( $(this).is('.active') ){}`，但是没有直接的方法吗？提前致谢！

[编辑：]

我想这是`not()`我需要的方法！但是当一个元素从类开始时`active`它可以工作，但是当我用它添加它时却`addClass()`不行。怎么会？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T23:10:44.267

该博客准确地解决了您的问题：

[http://ajpiano.com/the-opposite-of-jquerys-is-method-is-not-not-it-is-is/](http://ajpiano.com/the-opposite-of-jquerys-is-method-is-not-not-it-is-is/)

它的最后一行说：

与 jQuery`.is()`方法相反的不是`.not()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T23:13:14.547

您可以`is()`与选择器结合使用`:not`。

```
if( $(this).is(':not (.active)') ){} 
```

这是基于 Jquery 文档的 jsFiddle `is()`：

[http://jsfiddle.net/Hjff5/](http://jsfiddle.net/Hjff5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T23:20:11.083

`is`返回一个布尔值并且不是可链接的方法，因为它不返回 jQuery 对象，使用事件委托。

```
$('.tray').on({
   mouseenter: function(){
     // ...
   },
   mouseleave: function(){
    // ...
   }
}, '.tab:not(.active)'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-30T10:19:40.593

我知道这是旧的，但它是很好的参考。使用 jQuery 检查元素是否被禁用。

是：

```
if($(this).is('.disabled')){
    // Do something
} 
```

不是：

```
if(!$(this).is('.disabled')){
    // Do something
} 
```

# c# - 如何显示gridview，在后台运行一些东西并用结果更新gridview

> ID：15776041
> 
> 赞同：0
> 
> 时间：2013-04-02T23:06:57.797
> 
> 标签：c#, asp.net, visual-studio-2010

我有一个gridview，其中一列的生成成本很高。我想展示 gridview 用微调器替换昂贵的值，然后在生成值时自动更新它们。

我对 ASP.Net 比较陌生，所以对如何做到这一点有点迷茫。也许可以通过 Web 服务和每个值的 javascript 调用来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:11:04.930

`Maybe it can be done with a web service and a javascript call for each value?`
这。

当然，最好使用单个 ajax 调用一次获取所有必要的值，以防止对 Web 服务器的请求过多。

无论如何，这不是特定于 asp.net，而是特定于 web 开发。不管你在 Rails 上使用 php、asp.net、java、python 还是 ruby​​，过程都差不多。HTTP 是无状态的，因此您的服务器不知道您的客户端何时完成呈现页面。当您的客户端准备好时，您需要使用 javascript (ajax) 来查询服务器。

# emacs - 在 Common Lisp 中，什么是打印表示？

> ID：15776044
> 
> 赞同：6
> 
> 时间：2013-04-02T23:07:19.240
> 
> 标签：emacs, lisp, read-eval-print-loop, sbcl, hunchentoot

我正在使用 SBCL、emacs、slime 和 quicklisp 来安装各种软件包。

我像这样实例化并启动一个hunchentoot接受器，

```
CL-USER> (hunchentoot:start (make-instance 'hunchentoot:acceptor :port 4242))
#<HUNCHENTOOT:ACCEPTOR (host *, port 4242)> 
```

我通过在端口 4242 上打开浏览器进行测试，它工作正常。

然后要停止它，我可以复制打印的表示并发出命令，如下所示：

```
CL-USER> (hunchentoot:stop #<HUNCHENTOOT:ACCEPTOR (host *, port 4242)>)
#<HUNCHENTOOT:ACCEPTOR (host *, port 4242)> 
```

这仅适用于相应开始返回的打印表示。

这让我很惊讶。我认为打印的表示只是返回的文本，大概是因为对象本身无法显示。因此，我认为 hunchentoot:stop 可以使用文本字符串来查找对象非常简洁。但是经过更多的实验，我注意到我必须使用与开头相对应的打印表示，而不仅仅是任何一个。我还注意到，当我将鼠标放在打印的表示上时，它会突出显示整个片段。所以它根本不是文本，而是实际在 REPL 中的对象，我可以使用它。

因此，一方面返回的是打印表示，因此我可以看到它，但另一方面它是我可以在 REPL 中复制和粘贴的实际对象。这是正确的吗？我想这一定是因为我正在这样做。这对我来说太棒了。

任何解释或见解将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T23:17:08.117

这就是 SLIME 的“魔法”。事实上，你不能在 Lisp 中用这种“打印表示”做任何事情，因为它被认为是一个不可读的对象：在你的实现的控制台模式下尝试它。但是 SLIME 会记住与实际对象的关联，所以它会用对象代替那个`#<...>`东西——有点像 Lisp 机器......

什么会正常工作并且总是这样：

```
CL-USER> (defvar *server* (hunchentoot:start (make-instance 'hunchentoot:easy-acceptor :port 4242)))
*server*
CL-USER> (hunchentoot:stop *server*)
#<HUNCHENTOOT:ACCEPTOR (host *, port 4242)> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T07:29:04.707

这些就是所谓的“演示文稿”。请参阅 SLIME 用户手册，[演示文稿](http://common-lisp.net/project/slime/doc/html/Presentations.html)。

该文档还解释了如果对象不消失会发生什么......

这个想法主要来自 BBN (Zdybel, et al., An Information Presentation System, 1981)，然后是 Symbolics Lisp Machine 和可移植的[Common Lisp Interface Manager](http://www.lispworks.com/documentation/lw61/CLIM/html/climuser-25.htm#pgfId-254779)，后者在其窗口系统中记录输出过程中的底层对象。这些演示文稿用于图形和文本输出，是其用户界面的重要基础。

SLIME 已经接受了它的 REPL 的想法。

# ios - 自动旋转/横向 Zxing 条码扫描器 PhoneGap 2.5 插件 iOS

> ID：15776048
> 
> 赞同：0
> 
> 时间：2013-04-02T23:07:51.710
> 
> 标签：ios, xcode, phonegap-plugins, zxing, barcode-scanner

我想知道如何将条形码扫描仪更改为自动旋转或至少为最新版本的 PhoneGap 2.5 的 Zxing 条形码扫描仪插件的横向模式。

该插件可在此处获得：[https ://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner)

我找到了有关如何切换到横向的[这些](https://stackoverflow.com/questions/10945976/zxing-barcode-scanner-phonegap-plugin-ios-landscape-mode?answertab=active#tab-top)说明，但它适用于旧版本的 PhoneGap 和 Zxing 条码扫描仪并且不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T20:52:51.820

zxing Barcode Scanner 的源代码表明它只是横向的。

[编辑：无论如何，在Android上]

[编辑2：关于纵向v横向的长线程： [https](https://code.google.com/p/zxing/issues/detail?id=178) ://code.google.com/p/zxing/issues/detail?id=178 ]

# java - 最有效的基本日期验证和转换程序？

> ID：15776056
> 
> 赞同：0
> 
> 时间：2013-04-02T23:08:37.220
> 
> 标签：java

我打算用 Java 创建一个程序来确定输入的年份是否是闰年和有效日期。取那个日期，我希望将其转换为完整的书面名称（2013 年 4 月 2 日 = 2013 年 4 月 2 日），然后确定该日期在一年中的编号（2013 年 4 月 2 日 = 第 92 天）。

有很多程序可以做一个或另一个，但我正在学习方法/获得关于如何将它们组合在一起的想法，如果可能的话。

为了检查闰年，这就是我使用的：

```
public class LeapYear {
    public static void main (String[] args) {
    int theYear;
    System.out.print("Enter the year: ");
    theYear = Console.in.readInt();
    if (theYear < 100) {
        if (theYear > 40) {
        theYear = theYear + 1900;
        }
        else {
        theYear = theYear + 2000;
        }
    }
    if (theYear % 4 == 0) {
        if (theYear % 100 != 0) {
        System.out.println(theYear + " is a leap year.");
        }
        else if (theYear % 400 == 0) {
        System.out.println(theYear + " is a leap year.");
        }
        else {
        System.out.println(theYear + " is not a leap year.");
        }
    }
    else {
        System.out.println(theYear + " is not a leap year.");
    }
    }

} 
```

我意识到我需要对其进行一些更改以读取一年中的月份和日期，但对于这种情况，我只是检查年份。我怎样才能输入相同的日期并将其转换为完整的书面姓名？我是否必须创建一个 if 语句，例如：

```
if (theMonth == 4){
     System.out.println("April");
         if (theDay == 2){
          System.out.print(" 2nd, " + theYear + ".");
         }
    } 
```

这似乎是很多硬编码的工作。我正在尝试限制所需的硬编码数量，以便获得类似：

```
Output:
 Valid entry (4/2/2013).
 It is April 2nd, 2013.
 It is not a leap year.
 It is day 92. 
```

如果出现错误，例如无效日期，我希望程序重新提示用户，直到收到有效条目，而不是必须运行程序（在编写“退出”时结束程序）。

我想我可能只是为主要方法（获取日期）创建不同的类，检查它是否是闰年、转换方法，也许还有验证方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:34:43.317

```
public void testFormatDate() throws ParseException {
        final String[] suffixes =
                //    0     1     2     3     4     5     6     7     8     9
                { "th", "st", "nd", "rd", "th", "th", "th", "th", "th", "th",
                        //    10    11    12    13    14    15    16    17    18    19
                        "th", "th", "th", "th", "th", "th", "th", "th", "th", "th",
                        //    20    21    22    23    24    25    26    27    28    29
                        "th", "st", "nd", "rd", "th", "th", "th", "th", "th", "th",
                        //    30    31
                        "th", "st" };
        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
        SimpleDateFormat odf = new SimpleDateFormat("MMMM"); // Gives month name.
        Calendar dayEntered = new GregorianCalendar();
        dayEntered.setTime(sdf.parse("04/02/2013"));
        System.err.println("You chose date: " + odf.format(dayEntered.getTime()) + " " + dayEntered.get(Calendar.DAY_OF_MONTH) + suffixes[dayEntered.get(Calendar.DAY_OF_MONTH)]
        + " " + dayEntered.get(Calendar.YEAR));
        System.err.println("This is " + (((GregorianCalendar)dayEntered).isLeapYear(dayEntered.get(Calendar.YEAR)) ? "" : "not ") + "a leap year.");

        System.err.println("This is day: " + dayEntered.get(Calendar.DAY_OF_YEAR));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:38:26.073

这是一种方法。问题是没有办法`SimpleDateFormatter`打印当天的序数值。我无耻地从[这里](https://stackoverflow.com/a/4011232/2071828)`getDayOfMonthSuffix`偷走了方法。

```
public static void main(String[] args) {
    final String input = "4/2/2013";
    final SimpleDateFormat parser = new SimpleDateFormat("MM/dd/yyyy");
    final SimpleDateFormat formatter1 = new SimpleDateFormat("MMMM");
    final GregorianCalendar cal = (GregorianCalendar) GregorianCalendar.getInstance();
    final Date date;
    try {
        date = parser.parse(input);
        cal.setTime(date);
    } catch (ParseException ex) {
        System.out.println("Invalid input \"" + input + "\".");
        return;
    }
    if (cal.isLeapYear(cal.get(Calendar.YEAR))) {
        System.out.println("The year is a leap year");
    } else {
        System.out.println("The year is not a leap year");
    }
    System.out.println("The day of the year is " + cal.get(GregorianCalendar.DAY_OF_YEAR));
    final int dayOfMonth = cal.get(GregorianCalendar.DAY_OF_MONTH);
    System.out.println("The date is " +
            formatter1.format(date) +
            " " +
            dayOfMonth +
            getDayOfMonthSuffix(dayOfMonth) +
            ", " +
            cal.get(GregorianCalendar.YEAR));
}

static String getDayOfMonthSuffix(final int n) {
    if (n < 1 || n > 31) {
        throw new IllegalArgumentException("illegal day of month: " + n);
    }
    if (n >= 11 && n <= 13) {
        return "th";
    }
    switch (n % 10) {
        case 1:
            return "st";
        case 2:
            return "nd";
        case 3:
            return "rd";
        default:
            return "th";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T00:05:53.983

正如您所说，由于您需要更多的框架 - 来吧：

```
package com.yours

import java.io.Console;
import java.util.Calendar;

public class DoStuffWithADate {

    private Calendar parsedDate;

    public static void main(String[] args) {
        DoStuffWithADate soundsNaughty = new DoStuffWithADate();
        System.out.println("Enter a date my friend.  You should use the format: (MM/dd/yyyy)");
        Console theConsole = System.console();
        String enteredDate = theConsole.readLine();

        if (soundsNaughty.isValidDate(enteredDate)) {
            soundsNaughty.writeTheDateInNewFormat();
            soundsNaughty.writeIfItsALeapYear();
            soundsNaughty.writeTheDayOfYearItIs();
        }
    }

    private boolean isValidDate(String enteredDate) {
        //logic goes here.
        parsedDate = null;// if it's valid set the parsed Calendar object up.
        return true;
    }

    private void writeTheDateInNewFormat() {
        System.out.println("The new date format is: ");
    }

    private void writeIfItsALeapYear() {
        System.out.println("The year is a leap year.");
    }

    private void writeTheDayOfYearItIs() {
        System.out.println("The day of year is: ");
    }

} 
```

# javascript - 在文本框旁边添加一个按钮

> ID：15776063
> 
> 赞同：0
> 
> 时间：2013-04-02T23:09:27.983
> 
> 标签：javascript, jquery, html, css, jquery-ui

当您缩小浏览器窗口时，您会看到 iphone 布局的不同布局...如何在搜索文本框旁边添加按钮....这里的问题是我在 js 中获取文本框...不知道如何在js中获取按钮......

在下面提供我的代码

[http://jsfiddle.net/bz2C4/11/](http://jsfiddle.net/bz2C4/11/)

```
<script type="text/javascript" >
$(document).ready(function() {
    $('#inventoryTable').dataTable( {
        "bFilter": true,
        "bLengthChange": false,
        //"bJQueryUI": true,
        "bSort": false,
        "iDisplayLength": 20,
        "sPaginationType": "full_numbers"
    } );
    $('.dataTables_length').remove();
    $('.dataTables_info').remove();
    $('.dataTables_filter').css("text-align", "center");

    $(function() {
        var search = $('.dataTables_filter').detach();
        $('.page-title').before(search);
        search.css('margin-left','0');

        var div = $('.dataTables_filter');
                var start = $(div).offset().top;

                $.event.add(window, "scroll", function() {
                    var p = $(window).scrollTop();
                    $(div).css('position', ((p) > start) ? 'fixed' : 'static');
                    $(div).css('top', ((p) > start) ? '0px' : '');
                });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:17:43.627

如果这是您想看到的：[JsFiddle](http://jsfiddle.net/bz2C4/12/)？`...css('position', 'fixed')` 只是把位置固定了。如果您想根据滚动改变定位，只需使用其他示例的事件侦听器。

# r - 使用自加入的小组首次观察

> ID：15776064
> 
> 赞同：16
> 
> 时间：2013-04-02T23:09:31.607
> 
> 标签：r, data.table, self-join

我正在尝试使用 data.table 通过一组三个变量来获取第一行。

我有一个可行的解决方案：

```
col1 <- c(1,1,1,1,2,2,2,2,3,3,3,3)
col2 <- c(2000,2000,2001,2001,2000,2000,2001,2001,2000,2000,2001,2001)
col4 <- c(1,2,3,4,5,6,7,8,9,10,11,12)
data <- data.frame(store=col1,year=col2,month=12,sales=col4)

solution1 <- data.table(data)[,.SD[1,],by="store,year,month"] 
```

我在以下链接中使用了 Matthew Dowle 建议的较慢的方法：

[https://stats.stackexchange.com/questions/7884/fast-ways-in-r-to-get-the-first-row-of-a-data-frame-grouped-by-an-identifier](https://stats.stackexchange.com/questions/7884/fast-ways-in-r-to-get-the-first-row-of-a-data-frame-grouped-by-an-identifier)

我正在尝试实现更快的自我加入，但无法使其正常工作。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-02T23:19:32.060

### 选项 1（使用密钥）

将密钥设置为`store, year, month`

```
DT <- data.table(data, key = c('store','year','month')) 
```

然后，您可以使用`unique`创建一个包含键列的唯一值的 data.table。默认情况下，这将采用第一个条目

```
unique(DT)
   store year month sales
1:     1 2000    12     1
2:     1 2001    12     3
3:     2 2000    12     5
4:     2 2001    12     7
5:     3 2000    12     9
6:     3 2001    12    11 
```

但是，可以肯定的是，您可以将自联接与`mult='first'`. （其他选项是`'all'`或`'last'`）

```
# the key(DT) subsets the key columns only, so you don't end up with two 
# sales columns
DT[unique(DT[,key(DT), with = FALSE]), mult = 'first'] 
```

### 选项 2（无键）

`.I` 不设置key，使用not会更快`.SD`

```
DTb <- data.table(data)
DTb[DTb[,list(row1 = .I[1]), by = list(store, year, month)][,row1]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T23:22:57.047

关于什么：

```
solution2 <- data.table(data)[ , sales[1], by="store,year,month"]
> solution2
   store year month V1
1:     1 2000    12  1
2:     1 2001    12  3
3:     2 2000    12  5
4:     2 2001    12  7
5:     3 2000    12  9
6:     3 2001    12 11 
```

我想您可以重命名该列：

```
data.table(data)[,fsales := sales[1],by="store,year,month"] 
```

# javascript - 动态添加事件监听器。函数触发但如何发送可变参数？

> ID：15776066
> 
> 赞同：0
> 
> 时间：2013-04-02T23:09:36.003
> 
> 标签：javascript, events

我正在用 JavaScript 构建一个表格，它包含一个带有链接的单元格，单击该链接时应该触发一个函数。单元格被添加到一个循环中，`i`每个循环都会增加一个循环，我想将`i`其作为参数嵌入到我的函数中。

使用下面的代码，当我`alert(i);`在接收函数中时，我没有得到正确的号码。一方面，无论迭代如何添加的元素都有编号`3`（可能并非巧合，我正在对 3 记录数据源进行测试）。

编码

```
// Add supplier name to cell as a link
var a = document.createElement('a');
var linkText = document.createTextNode(data[i].supName);
a.appendChild(linkText);
a.title = "Click to create a purchase order.";
a.href = "#";
alert('inserting '+i); // diagnostic line
a.onclick = function(){postData ('main/createPO.php', '', 'makePO(resp,'+i+')', '', '')};
td1.appendChild(a);
tr.appendChild(td1); 
```

以上是在递增的`for`循环中。`i`

诊断警报触发：

```
inserting 0
inserting 1
inserting 2 
```

...但嵌入`i`似乎总是3！

这是重要的一行：

```
a.onclick = function(){postData ('main/createPO.php', '', 'makePO(resp,'+i+')', '', '')}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:17:51.707

这个人和你有同样的问题，有一个很好的答案： [JavaScriptclosure inside loops – 简单实用的例子](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:24:32.283

有一种更简单的方法可以解决您的问题。我有这个问题的更复杂的版本。

对于每个元素，只需制作一个自定义属性。

$(a).attr("myValue", i);

然后在.click上，只需传递 Number($(this).attr("myValue"));

# perl - 缓冲区溢出字符解析

> ID：15776068
> 
> 赞同：2
> 
> 时间：2013-04-02T23:09:40.990
> 
> 标签：perl, buffer, overflow

当我试图对缓冲区溢出进行概念验证时，我遇到了一个奇怪的问题。程序中存在我想在地址**0x0828433c**执行的代码。这是一个简单的溢出，所以攻击是这样执行的：

`$ perl -e 'system("./program lotsofcharacterstofillinspacethen\x3c\x43\x28\x08")'`

但是，`\x3c`在 ascii 中转到 >，并且 shell 期望其余的字符是一个输出文件。（即。`echo 1 > hello.txt`）

幸运的是它上面有 2 个 nop，所以我不需要使用那个特定的地址，但是如果我需要呢？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:55:37.913

两种解决方案：

1.  [使用system](http://perldoc.perl.org/functions/system.html)的多参数版本，它不调用 shell：

    ```
    system "./program", "lotsofcharacterstofillinspacethen\x3c\x43\x28\x08"; 
    ```

2.  [转义](https://stackoverflow.com/questions/3212128/perl-equivalent-of-phps-escapeshellarg)参数中的任何 shell 元字符，例如使用[String::ShellQuote](http://search.cpan.org/perldoc?String::ShellQuote)。

# screenshot - 如何使用 selenium webdriver 获得相同大小的屏幕截图？

> ID：15776072
> 
> 赞同：4
> 
> 时间：2013-04-02T23:10:00.507
> 
> 标签：screenshot, selenium-webdriver

我正在尝试使用 Selenium Webdriver 截屏。

```
File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
FileUtils.copyFile(scrFile, new File(File_Location)); 
```

现在的问题是，对于 IE 和 Firefox，即使我设置了窗口的尺寸，屏幕截图的大小也会有所不同。

谁能给我建议如何为所有浏览器获取相同大小的屏幕截图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:28:57.513

你不能。

不同的驱动实现截图的方式不同，IEDriver会根据IE的版本产生不同的大小。

对此提出了一系列错误，这个错误可能会告诉您您需要知道的所有内容并验证此答案：

[https://code.google.com/p/selenium/issues/detail?id=5332&can=1&q=screenshot%20size&colspec=ID%20Stars%20Type%20Status%20Priority%20Milestone%20Owner%20Summary](https://code.google.com/p/selenium/issues/detail?id=5332&can=1&q=screenshot%20size&colspec=ID%20Stars%20Type%20Status%20Priority%20Milestone%20Owner%20Summary)

具体来说

> **项目成员 #3 james.h....@gmail.com**当前 WebDriver API 中的屏幕截图是指整页屏幕截图。与其他浏览器不同，让 IE 呈现整个页面的唯一方法是让 IE 窗口足够大以绘制整个页面。换句话说，调整窗口大小。对于 IE，我们要么接受调整大小，要么不截取整页截图。这是 IE 的限制；IE 驱动程序无法解决此问题。如果您只想截取可见视口的屏幕截图，而不需要调整大小，您可以使用 Windows API PrintWindow 函数。 **状态：按预期工作**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:49:20.357

尝试这个：

```
EventFiringWebDriver efDriver = new EventFiringWebDriver(driver);
File scrFile = efDriver.getScreenshotAs(OutputType.FILE);
FileUtils.copyFile(scrFile, new File(File_Location)); 
```

# r - 通过改变向量的顺序在 R 中创建一个矩阵

> ID：15776074
> 
> 赞同：1
> 
> 时间：2013-04-02T23:10:05.457
> 
> 标签：r, matrix, indexing

我是 R 的新用户。我在 R 中有两个向量，我想将这些向量放在一个矩阵中，如下所示：

```
 x = c(1, 2, 3, 5, 4)
    y = c(1.1, 2.3, 4.5, 6.7, 5.5)
    > m
         [,1] [,2]
   [1,]    1  1.1
   [2,]    2  2.3
   [3,]    3  4.5
   [4,]    5  5.5
   [5,]    4  6.7 
```

我怎么能在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:16:02.610

您可以通过以下方式到达那里：

```
cbind(x,y[x])

     x    
[1,] 1 1.1
[2,] 2 2.3
[3,] 3 4.5
[4,] 5 5.5
[5,] 4 6.7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T00:11:55.007

如果 x 向量不是连续的，您仍然可以通过以下方式获得成功：

```
cbind(x, y[order(x)] ) 
```

# asp.net - ASP.NET 不提供多个服务器端表单

> ID：15776080
> 
> 赞同：0
> 
> 时间：2013-04-02T23:10:34.160
> 
> 标签：asp.net

ASP.NET 不允许使用标签制作多个表单背后的理念是什么`runat=server`......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:29:17.237

无论好坏，Web 表单都是围绕旨在抽象底层平台的概念构建的。服务器控件、服务器事件、ViewState 和 UpdatePanel 就是这种方法的示例。

多种形式并非不可能，但对于将服务器控件添加到他/她的页面并希望它们“正常工作”的新手开发人员来说是不直观的。对于有经验的开发人员来说，这会很好，但它会引入一组新的警告（并且 Web 表单有*许多*细微差别和警告）。

例如，假设我`GridView`在表单 A 中添加了一个，`DropDownList`在表单 B 中添加了一个。下拉菜单会触发回发，但只有表单 B 中的数据会发布到服务器（这就是表单的工作方式；一次只发布一个）。

但是，GridView 现在丢失了它的所有 ViewState，它包含在表单 A 中。页面现在完全损坏了。

Ad hoc ViewState 值更加棘手。开发人员可以将他们想要的任何内容作为名称/值对放入 ViewState。服务器应该如何决定哪个表单获取 ViewState？如果它进入*所有*形式，那就是页面膨胀。

**概括**

*   这在技术上并非不可能，但问题可能大于好处。
*   您可以通过一些方法`<form>`向 ASPX 页面添加第二个页面（尽管它可能不在服务器上运行）。
*   一个页面上的多个表单绝对没有错。这是使用平台而不是对抗/抽象它的众多优势之一，例如 ASP.Net MVC 尝试做的。

# wpf - WPF图像工具提示边缘检测

> ID：15776082
> 
> 赞同：0
> 
> 时间：2013-04-02T23:10:41.570
> 
> 标签：wpf, image, tooltip, edge-detection

我对 WPF 有点陌生，但我遇到了一个问题，我试图在带有背景图像的图像或按钮上放置工具提示。基本上我想要做的是我希望工具提示只显示图像实际存在的位置而不是透明度。这是一个问题，因为按钮或图像使用存储它的矩形，工具提示也将显示在该区域内。

这是一个示例按钮（忽略糟糕的设计，但我需要一个复杂的形状来给你一个想法）

![示例：1](https://i1109.photobucket.com/albums/h426/Melkirth/Capture.png)

这是图像/按钮的边缘

![示例：1](https://i1109.photobucket.com/albums/h426/Melkirth/Untitled-2.png)

Printscreen 没有捕捉到鼠标，但想象一下鼠标实际上并没有悬停在形状上，而是在图像框/按钮的区域内。

[示例：1 http://i1109.photobucket.com/albums/h426/Melkirth/Imagearea.png](http://i1109.photobucket.com/albums/h426/Melkirth/Imagearea.png)

这是我的实际代码的一个小例子

```
 <Button Height="160" Width="240" BorderThickness="0" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}">
        <Button.Background>
            <ImageBrush ImageSource="Images/Cloud1.png"></ImageBrush>
        </Button.Background>
        <Button.ToolTip>
            <TextBlock Margin="10" FontSize="14">Click me to begin your test</TextBlock>
        </Button.ToolTip>
    </Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:46:30.120

取自[this answer to a similar question](https://stackoverflow.com/a/4801434/643085)：

专业图像类：

```
public class OpaqueClickableImage : Image
    {
        protected override HitTestResult HitTestCore(PointHitTestParameters hitTestParameters)
        {
            var source = (BitmapSource)Source;
            var x = (int)(hitTestParameters.HitPoint.X / ActualWidth * source.PixelWidth);
            var y = (int)(hitTestParameters.HitPoint.Y / ActualHeight * source.PixelHeight);
            var pixels = new byte[4];
            source.CopyPixels(new Int32Rect(x, y, 1, 1), pixels, 4, 0);
            if (pixels[3] < 10) return null;
            return new PointHitTestResult(this, hitTestParameters.HitPoint);
        }
    } 
```

XAML：

```
<Window x:Class="MiscSamples.ImageButton"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:MiscSamples"
        Title="ImageButton" Height="300" Width="300">
    <Grid Background="Green">
        <Button VerticalAlignment="Center" HorizontalAlignment="Center"
                ToolTip="Hello!!">
            <Button.Template>
                <ControlTemplate>
                    <local:OpaqueClickableImage Source="./Resources/SomeImage.png"/>
                </ControlTemplate>
            </Button.Template>
        </Button>
    </Grid>
</Window> 
```

这将使工具提示仅在鼠标悬停在图像的非透明区域上时显示。

# php - authorize.net 中的定期计费 - 有 n 个月的折扣 - Php？

> ID：15776087
> 
> 赞同：-2
> 
> 时间：2013-04-02T23:11:03.777
> 
> 标签：php, authorize.net

我是 authorize.net 的新手。我需要一些对我的项目非常重要的信息。

1) Authorize.net 能否进行每月更改的定期计费。?
2）特定月份可以有折扣吗？
3) 它接受哪些类型的卡。？
4) 是否接受借记卡和信用卡？5）有没有这方面的教程或库？6）服务器集成方法是简单的还是高级集成方法？

我无法通过互联网找到信息，请帮助请为我找到解决方案。或给我任何参考链接以搜索详细信息。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:38:51.260

您应该查看[http://www.chargify.com](http://www.chargify.com)，它有一个很好的 API 来管理经常性计费系统。他们处理您的网站与 Authorize.net 之间的所有交易。

您可以在任何月份为会员提供折扣。为此使用他们的 API 并为您的客户降低计划的价格，然后在下个月将其恢复。

Authorize.net 是一个网关。您的商户提供商应接受大多数卡 Visa、Mastercard、Amex、Discovery。

如果借记卡带有 Visa 或 Mastercard 符号，则可接受。

# ruby-on-rails - 转换我的 json 索引

> ID：15776090
> 
> 赞同：0
> 
> 时间：2013-04-02T23:11:15.610
> 
> 标签：ruby-on-rails, ruby, json, ruby-on-rails-3

我正在尝试从以下样式转换以下 json 索引

```
[{"event":{"title":"test"}},{"event":{"title":"test2"}}] 
```

但不是这样，我想知道是否可以将索引 json 操作创建为以下 json 结构

```
{"event": [ { "title":"test"},{ "title":"test2" }] } 
```

我可以通过以下代码生成第一个样式

```
respond_with @events.as_json(:root => true, :only => [:title]) 
```

但不确定如何让rails生成json索引结构有第二种格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:49:46.543

我认为您必须自己构建json，即：

```
render :json, {event: @events.map {|e| {title: e.title}}}.to_json 
```

如果它变得太复杂，您可能应该使用[RABL](https://github.com/nesquena/rabl)（请参阅[此处](http://railscasts.com/episodes/322-rabl)的 railscast ）

# html - 使固定内容滚动

> ID：15776092
> 
> 赞同：0
> 
> 时间：2013-04-02T23:11:22.260
> 
> 标签：html, css

我有一个 div 固定在页面左侧，高度为 100%。我在其中放置了超过左侧 div 高度的内容。现在，我知道我可以添加 overflow:auto 以允许用户滚动该 div 中的内容，但我希望固定 div 中的内容与页面一起滚动。这可能只用css吗？

谢谢

JSFIDDLE：http: [//jsfiddle.net/yZmu6/](http://jsfiddle.net/yZmu6/)

HTML：

```
<div id="newsfeed-left">
    <div class="green-square"></div>
    <div class="blue-square"></div>
    <div class="green-square"></div>
    <div class="blue-square"></div>
    <div class="green-square"></div>
    <div class="blue-square"></div>
    <div class="green-square"></div>
    <div class="blue-square"></div>
    <div class="green-square"></div>
</div> 
```

CSS：

```
body {
margin: 0px 0px 0px 0px;
padding: 0px 0px 0px 0px;
}

#newsfeed-left {
position: fixed;
float: left;
height: 100%;
width: 200px;
padding: 0px 10px 0px 10px;
border-right: 1px solid rgb(228, 228, 228);
}

.green-square {
margin: 10px 0px 0px 0px;
height: 200px;
width: 200px;
background-color: green;
}

.blue-square {
margin: 10px 0px 0px 0px;
height: 200px;
width: 200px;
background-color: blue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:12:40.357

fixed`div`的滚动条与页面的其余部分是分开的。不过这可以用 JS 来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:01:52.300

这可能无法回答您的问题，或者是您正在寻找的答案，但是将您的 CSS 更改为使用绝对位置而不是固定位置会使页面正确滚动。

```
#newsfeed-left {
   position: absolute;
   ...
} 
```

# autohotkey - AutoScriptWriter 宏不起作用

> ID：15776094
> 
> 赞同：0
> 
> 时间：2013-04-02T23:11:34.557
> 
> 标签：autohotkey

我用 AutoScriptWriter 创建了一个小宏，它在我创建后立即运行良好，但后来当我打开它正在工作的程序并启动宏时，它出现在我的系统托盘中，但什么也没发生。我还没有分配热键，只是单击宏来运行它。我究竟做错了什么？

谢谢，艾伦

```
#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.
; #Warn  ; Enable warnings to assist with detecting common errors.
SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.

run C:\Program Files\VinylStudio\VinylStudio.exe, , max

#SingleInstance Force
#installKeybdHook
#Persistent

SetTitleMatchMode, 2 ;  Allow more flexibility in matching the windows title.
SetTimer, CloseScript, 1000
Return ; stop the script here on startup

CloseScript:
IfWinExist ahk_class VinylStudio_main
    Return
ExitApp

#ifWinActive ahk_class VinylStudio_main

^h:: ; Here I assigned the hotkey [Ctrl]+h

WinActivate, VinylStudio
WinWait, VinylStudio, , 3 ; Wait for 3 seconds and then alert user
if ErrorLevel
{
    MsgBox, VinylStudio timed out.
    return
}
MouseClick, left,  479,  79 ; MouseClicks are less reliable than keyboard shortcuts or ControlSend/ControlClick.
Sleep, 100
MouseClick, left,  421,  40
Sleep, 100
MouseClick, left,  425,  443
Sleep, 100
WinWait, Filter Settings, , 3 ; Wait 3 seconds for pop-up else alert user
if ErrorLevel
{
    MsgBox, Filter Settings timed out.
    return
}
MouseClick, left,  29,  109
Sleep, 100
WinWait, Define Noise Sample, , 3 ; Wait 3 seconds for pop-up else alert user
if ErrorLevel
{
    MsgBox, Define Noise Sample timed out.
    return
}
MouseClick, left,  388,  168
Sleep, 100
MouseClick, left, -86,  660, 2
;MouseClick, left, -86,  660
Sleep, 100
WinWait, VinylStudio, , 3 ; Wait 3 seconds for pop-up else alert user
if ErrorLevel
{
    MsgBox, VinylStudio timed out.
    return
}
MouseClick, left,  200,  675, 2
;MouseClick, left,  200,  675
Sleep, 100
MouseClick, left,  200,  675, 2
;MouseClick, left,  200,  675
Sleep, 100
MouseClick, left,  201,  673
Sleep, 100
MouseClick, left,  203,  673, 2
;MouseClick, left,  203,  673
Sleep, 100
MouseClick, left,  203,  673
Sleep, 100
MouseClick, left,  787,  645
Sleep, 100
Return

#ifwinactive 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:39:50.730

好的，我看过了。在当前代码中，您确实检查了很多，但永远不知道您的检查失败的地方。

这是一些清理代码的开始：

```
#SingleInstance Force
#installKeybdHook
#Persistent
SetTitleMatchMode, 2 ;  Allow more flexibility in matching the windows title.
Return ; stop the script here on startup

!v:: ; Here I assigned the hotkey [Alt]+v
;IfWinNotExist, VinylStudio ; Line could be removed if VS is running
;    Run, VinylStudio.exe Collection.mcf ; Line could be removed
WinActivate, VinylStudio
WinWait, VinylStudio, , 3 ; Wait for 3 seconds and then alert user
if ErrorLevel
{
    MsgBox, VinylStudio timed out.
    return
}
MouseClick, left,  479,  79 ; MouseClicks are less reliable than keyboard shortcuts or ControlSend/ControlClick.
Sleep, 100
MouseClick, left,  421,  40
Sleep, 100
MouseClick, left,  425,  443
Sleep, 100
WinWait, Filter Settings, , 3 ; Wait 3 seconds for pop-up else alert user
if ErrorLevel
{
    MsgBox, Filter Settings timed out.
    return
}
MouseClick, left,  29,  109
Sleep, 100
WinWait, Define Noise Sample, , 3 ; Wait 3 seconds for pop-up else alert user
if ErrorLevel
{
    MsgBox, Define Noise Sample timed out.
    return
}
MouseClick, left,  388,  168
Sleep, 100
MouseClick, left, -86,  660, 2
;MouseClick, left, -86,  660
Sleep, 100
WinWait, VinylStudio, , 3 ; Wait 3 seconds for pop-up else alert user
if ErrorLevel
{
    MsgBox, VinylStudio timed out.
    return
}
MouseClick, left,  200,  675, 2
;MouseClick, left,  200,  675
Sleep, 100
MouseClick, left,  200,  675, 2
;MouseClick, left,  200,  675
Sleep, 100
MouseClick, left,  201,  673
Sleep, 100
MouseClick, left,  203,  673, 2
;MouseClick, left,  203,  673
Sleep, 100
MouseClick, left,  203,  673
Sleep, 100
MouseClick, left,  787,  645
Sleep, 100
Return 
```

艾伦，尽量避免点击坐标。更好的方法是例如使用 ControlSend 或 ControlClick 并将信息/点击发送到特定对象。您通常可以使用 AHK Windows Spy（在 classNN 下）找到对象名称。ControlClick 可能如下所示：ControlClick、Toolbar321、VinylStudio 或 ControlClick、OK、Define Noise Sample 以单击“Define Noise Sample”窗口中的 OK 按钮。

我指定了一个热键 [Alt]+v，但您可以创建任何您喜欢的组合。
！= `Alt`,
^ = `Ctrl`,
# = `Win`,
+ = `Shift`.

所以
!t = `Alt`+ `t`，
^+F2 = `Ctrl`+ `Shift`+`F2`和
#w = `Win`+`w`

在热键之后，我仍然检查 VS 是否正在运行，如果没有，我将启动它，但您可以删除这些行并将热键放在 WinActivate、VinylStudio 上方

# javascript - Kinetic JS - 基于旋转另一个对象和逆时针旋转的图像旋转

> ID：15776096
> 
> 赞同：0
> 
> 时间：2013-04-02T23:11:37.683
> 
> 标签：javascript, image, rotation, kineticjs

我正在尝试使用鼠标角度旋转图像：首先我使用以下方法计算鼠标度数：

```
 mouseX = parseInt(e.clientX - offsetX);
                mouseY = parseInt(e.clientY - offsetY);
                var mouse_x = e.pageX; var mouse_y = e.pageY;
                var radians = Math.atan2(mouse_y - crossY, mouse_x - crossX);
                if (radians < 0) radians += 2.0 * Math.PI;
                degree = (radians * 180 / Math.PI + 90) % 360; 
```

然后我在舞台中心做了一个圆圈（根据圆圈的位置重新计算偏移量）；当我拖动图像旋转的圆圈时，使用以下命令：

```
 circle2.on('dragmove', function (event) {
            var newangle = dImage1.getRotation();
            $("#newangle").html(newangle);
            dImage1.rotate((degree - newangle) / 36000); // I used 36000 as a factor to calibrate the degree of rotation
            dlayerA1.draw();
        }); 
```

第一个问题是我无法确定基于圆形旋转来旋转图像的正确因素。第二个问题是如何逆时针旋转圆圈？

完整的演示位于[http://jsfiddle.net/user373721/pz7W8/](http://jsfiddle.net/user373721/pz7W8/)。

非常感谢您的帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:05:23.467

我相信 .rotate() 只会添加您想要的角度 .setRotation()，这将允许向前和向后旋转；

[http://jsfiddle.net/pz7W8/2/](http://jsfiddle.net/pz7W8/2/)

```
 dImage1.setRotation((degree - newangle) / 180); // Keep experimenting what number to divide by 
```

# java - Hibernate 在 SQL 查询中显示问号

> ID：15776097
> 
> 赞同：13
> 
> 时间：2013-04-02T23:11:41.437
> 
> 标签：java, hibernate

如何查看查询中的实际值而不是问号？现在，我看到

```
Hibernate: inser into TABEL (ID, FORMAT, SIZE) values (?,?,?) 
```

我想看到使用的实际值而不是问号。

我在我的休眠配置文件中设置了它并打开了调试标志。

```
<property name="show_sql"> true </property> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T23:40:04.893

Hibernate 使用准备好的语句，因此您看不到完整的 SQL。您可以设置日志级别`org.hibernate.type`以`trace`查看绑定到参数的值。

### 参考

*   Hibernate 3.5 核心文档
    *   [3.5\. 日志记录](http://docs.jboss.org/hibernate/core/3.5/reference/en/html/session-configuration.html#configuration-logging)
*   Hibernate 4.1 核心文档
    *   [4.1。日志记录](http://docs.jboss.org/hibernate/core/4.1/manual/en-US/html/ch03.html#configuration-logging)

（如/参见[此答案](https://stackoverflow.com/a/2536835/643141)中所述）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T23:18:30.530

使用 Log4j 或 Logback 启用并设置`javax.sql`为`DEBUG`：

```
<logger name="java.sql" level="debug">
    <appender-ref ref="STDOUT" /> <!-- or your own appender -->
</logger> 
```

# java - Jython SyntaxError（来自 Java 应用程序）

> ID：15776099
> 
> 赞同：1
> 
> 时间：2013-04-02T23:11:54.043
> 
> 标签：java, syntax-error, jython

在我的 Java 应用程序中，我想使用 Jython 来解释 Python 代码。
所以我初始化 Jython 如下：

```
PySystemState.initialize();
PythonInterpreter jython = new PythonInterpreter(); 
```

然后我想像这样测试它：

```
jython.eval("out = ''");
jython.eval("out += 'Test1\n'");
jython.eval("out += 'Test2\n'");
System.out.println(jython.get("out").toString()); 
```

但是，第一个 eval 行会引发此错误：

```
 File "<string>", line 1
    out = ''
       ^
SyntaxError: mismatched input '=' expecting EOF 
```

当我用**exec**而不是**eval**尝试它时，我得到了这个错误：

```
 File "<string>", line 2
    '
    ^
SyntaxError: no viable alternative at character ''' 
```

有什么想法我在这里做错了吗？

PS：我正在使用 jython-2.5.4-rc1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:04:33.063

您需要确保具备以下条件

*   声明一个`out`变量
*   因为您使用的是 Java，所以请转义特殊字符，例如`\\n`
*   使用`exec`而不是`eval`

这将产生：

```
PythonInterpreter jython = new PythonInterpreter();
jython.set("out", new PyString());
jython.exec("out = ''");
jython.exec("out += 'Test1\\n'");
jython.exec("out += 'Test2\\n'");
System.out.println(jython.get("out").toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:47:59.223

您应该使用**exec**来执行语句。**eval**评估并返回一个**PyObject**。

# php - php socket_write

> ID：15776100
> 
> 赞同：1
> 
> 时间：2013-04-02T23:11:54.823
> 
> 标签：php, javascript, websocket

我正在尝试将一些数据（文本）发送到当前套接字。

以前握手 - 好的。

然后从客户端（Chrome，最新版本）发送数据 -`socket_recv`接收它 - 好的。

然后，我尝试`socket_recv`使用`socket_write`-NOTHING 将我刚刚读取的内容写入同一个套接字。

任何错误（使用检查`socket_last_error`并且函数返回`TRUE`）。看起来一切正常。

但是`onmessage`客户端的事件没有触发。安静...

谁在PHP中使用过websockets，请帮助。

客户：

```
var host = "ws://192.168.0.100:5000/wbs_r1.php";

try {
    var socket = new WebSocket(host);
    message('<p class="event">Socket Status: ' + socket.readyState);

    socket.onopen = function (msg) {
        message('<p class="event">Socket Status: ' + socket.readyState + ' (open)');
        console.log(socket);
        console.log(msg);
    }

    socket.onmessage = function (msg) {
        message('<p class="message">Received: ' + msg.data);
        console.log(socket);
        console.log(msg);
    }

    socket.onclose = function (msg) {
        message('<p class="event">Socket Status: ' + socket.readyState + ' (Closed)');
        console.log(socket);
        console.log(msg);
    }

    socket.onerror = function (msg) {
        message('Error: ');
        console.log(socket);
        console.log(msg);
    }

} catch (exception) {
    message('<p>Error' + exception);
    console.log(exception);
} 
```

服务器：

```
header('Content-Type: text/plain; charset=utf-8');
set_time_limit(0); 
error_reporting(E_ALL);
ob_implicit_flush(true);
$sockets = array(); 
$handshakes = array();

$sockets["wbs1"] = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
socket_set_option($sockets["wbs1"], SOL_SOCKET, SO_REUSEADDR, 1);
socket_bind($sockets["wbs1"], "0.0.0.0", 5000);
socket_listen($sockets["wbs1"], 20);
socket_set_nonblock($sockets["wbs1"]);

echo $sockets["wbs1"] . "\n";

while(true) {
    $changed_sockets = $sockets;
    $num_sockets = socket_select($changed_sockets, $write = null, $exceptions = null, null);
    //print_r($changed_sockets);
    foreach($changed_sockets as $socket) {
        echo "\n\n\n" . "Current socket: " . $socket . "\n";
        if($socket == $sockets["wbs1"]) {
            if(($client = socket_accept($sockets["wbs1"])) >= 0) $sockets[] = $client;
            echo "Accepting socket ".$socket."\n";
            echo "Client: " . $client . "\n";
        } else {
            $index = array_search($socket, $sockets);
            $len = @socket_recv($socket, $buffer, 2048, 0);
            echo "Received " . $len . " bytes from socket ".$socket.": " . $buffer . "\n";

            if($len == 0) {
                unset($sockets[$index]);
                unset($handshakes[$index]);
                socket_close($socket);
                echo "Closing socket " . $socket . "\n";
            } else if(!isset($handshakes[$index])) {
                $buffer = substr($buffer, strpos($buffer, "Sec-WebSocket-Key: ") + 19);
                $accept = base64_encode(sha1(substr($buffer, 0, strpos($buffer, "\r\n")) . '258EAFA5-E914-47DA-95CA-C5AB0DC85B11', true));

                $upgrade = "HTTP/1.1 101 Switching Protocols\r\n" .
                    "Upgrade: websocket\r\n" .
                    "Connection: Upgrade\r\n" .
                    "Sec-WebSocket-Accept: {$accept}\r\n\r\n" .
                    "Sec-Websocket-Extensions=x-webkit-deflate-frame". chr(0);

                socket_write($socket, $upgrade, strlen($upgrade));
                $handshakes[$index] = true;

                echo "Handshaking: " . $socket . "\n";
            } else {
                $msg = "Hello!!!\n\0";
                $wr = socket_write($socket,$msg);
                if(!$wr) echo socket_strerror(socket_last_error()) . "\n";
                else echo "Writing to socket " . $socket . "\n";
            }
        }
    }
} 
```

# c# - 在 asp 中调试 jquery。网络应用

> ID：15776102
> 
> 赞同：1
> 
> 时间：2013-04-02T23:12:02.527
> 
> 标签：c#, jquery, asp.net

我有一个 Web 应用程序，它在某处调用*jQuery*来显示`<div>`. 任何人都知道拦截该呼叫的方法，看看究竟是什么呼叫`<div>`出现？

我需要使该 div 出现在另一个按钮上，并且使该 div 出现的原始按钮`<div>`发生了一堆事情，我想只显示那个`<div>`？

该应用程序是asp的。*带有jQ​​uery*的网络 Web 表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:58:23.863

人们通常有两种方法来做到这一点。

A. 他们“隐藏” div，然后通过使用 display:none 添加和删除 css 类来“显示”它；

或者

B. 他们从字面上删除了 div 元素，然后将其重新添加。

无论哪种方式，您都可以使用 Chrome 开发人员工具 ( [https://developers.google.com/chrome-developer-tools/docs/overview#access](https://developers.google.com/chrome-developer-tools/docs/overview#access) ) 来捕捉这种情况。

如果 A. 找到添加/删除 CSS 类的 div，然后右键单击它。然后点击“Break on..”->“属性修改”。当节点修改其类属性时，这将破坏 javascript。

如果 B. 找到添加/删除 div 的父元素。右键单击父元素“Break on..”->“Subtree Modification”，添加或删除 div 时会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:38:30.473

在源代码内部，`<html>`您会注意到一个`<script>`参考。该参考通常会概述整个*jQuery*代码。另一个可能的含义是该文件所在位置的参考*URL*`<script>`。

在此文件中，您将看到分配特定和*隐藏和显示的**jQuery*代码。不幸的是，没有代码，很难指定确切的细节。`<div>`

 *希望这会为您指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T00:13:28.633

**调试 jQuery 提示**

正如@Jazzepi 所说，当您想要发现 JavaScript 代码的问题时，Chrome + 开发人员工具非常有用。

就个人而言，我更喜欢将**Firefox**与**FireBug**扩展一起使用——您可以找到 JavaScript 控制台，您会在那里看到错误消息。*

# c++ - 查找 4 个非共面点的 2D-3D 对应关系

> ID：15776105
> 
> 赞同：2
> 
> 时间：2013-04-02T23:12:31.577
> 
> 标签：c++, opencv

我有一个具有 4 个非共面特征点的 3 维对象。它们的空间排列是已知的，即存在一个“对象”坐标系，并且我知道这 4 个特征点相对于该坐标系的 3D 坐标。

在这个对象的 2D 投影图像（例如，从任意角度拍摄的照片）中，我可以定位这 4 个特征点的 2D 坐标，但不知道哪个坐标属于哪个特征点。

换句话说：我有 4 个不同的 2D 坐标**a**、**b**、**c**和**d**，我知道它们每个都恰好属于 4 个特征点**A**、**B**、**C**和**D**之一。每个特征点都有一个ID，它只是一个从1到4的数字。如何找到2D投影坐标和相应3D特征点之间的对应关系，即如何确定每个投影到哪个特征点属于？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:39:10.167

我认为您的问题没有解决方案。想象一下，你拍一张正四面体的照片。现在将其旋转 120°，您会得到相同的图片，但点不同。所以你需要更多信息。

# ruby-on-rails - 在 ActiveAdmin 中按字符串过滤而不是选择

> ID：15776106
> 
> 赞同：9
> 
> 时间：2013-04-02T23:12:37.673
> 
> 标签：ruby-on-rails, ruby, activeadmin, meta-search

我有两个模型之间的 belongs_to 和 has_many 关联。默认情况下，activeadmin 使用选择输入。但就我而言，这是不可能的——因为我有数千件物品。当我尝试将过滤器更改为

```
filter :item, as: :string 
```

它说

```
undefined method `item_id_contains' for #<MetaSearch::Searches::DeliveryTime:0x007fdd57f12db8> 
```

做对的最好方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-02T23:20:34.130

ActiveAdmin 使用 MetaSearch [，](https://github.com/ernie/meta_search)所以你应该能够做到

```
filter :items_<attribute>, as: :string 
```

因此，在您的情况下，如果该项目有名称，您可以执行以下操作：

```
filter :items_name, as: :string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-05T13:44:55.210

**参考模型和以下代码的关系**

表 = 用户 ID、姓名、电子邮件

表 = 客户 ID、名称、用户 ID

用户 has_many customers

客户属于用户

使用过滤器:user_name, as::string 而不是过滤器:user

# php - php/javascript - 使用 ajax 自动更新客户端

> ID：15776107
> 
> 赞同：0
> 
> 时间：2013-04-02T23:12:37.950
> 
> 标签：php, javascript, ajax, web-services, jquery

我正在使用 PHP 编写网页的服务器端，并使用 javascript 构建客户端。

网站上有一个 div 会显示从服务器端接收到的数据，例如，假设显示数据库中当前注册用户的数量。这个数字会在一段**未知的时间内**不断变化。例如，数字可能在 10 小时内保持不变，而在 10 分钟内增加 1000。

我的**第一个问题**是，执行此功能的最佳方法是什么，以便网站始终可以显示此数据的最新或几乎最新值？

我最初的方法是使用 Javascript AJAX 并由 setInterval(1000) (-1 秒) 包装以将 Ajax 请求发送到服务器端。但是我不确定这对于客户端（因为javascript是单线程的，如果每1秒内运行一个函数可能会很慢）甚至服务器端（例如，如果数百个用户打开这个网站）并将数百个请求发送到服务器端）。那么这样可以吗？

我的**第二个问题**是，如果这不是一个好方法，我还能做些什么来实现同样的目标。我正在考虑使用另一种方式。例如，如果服务器端有更新，那么在服务器端使用 PHP 将更新推送到客户端，甚至使用 PHP 脚本直接更改 HTML 中显示的数据。这可能吗？如果是，这是一个好方法吗？

提供的任何代码或示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:18:06.583

您可以使用简单[的长轮询](http://en.wikipedia.org/wiki/Push_technology#Long_polling)。

客户端请求一个脚本`"/counter?oldvalue=...&timestamp=...`。如果没有更改，服务器不会立即返回值，而是空闲最多 30 秒。

如果计数器值发生更改，则立即返回更新后的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:26:13.237

您当然可以使用 AJAX 进行随时间分布的更新，但如果您想每隔一秒左右连接到您的服务器，我建议您不要这样做。

你有几个选择：

*   正如@Kay 已经提到的，`long polling`可能是一种选择。

*   或者，您可能想研究[WebSockets](http://en.wikipedia.org/wiki/WebSocket)或支持 WebSockets 的框架，如[Meteor](http://meteor.com/main)

# c# - 使用 LINQ 插入主从细节

> ID：15776111
> 
> 赞同：1
> 
> 时间：2013-04-02T23:12:47.823
> 
> 标签：c#, linq, entity-framework

我想插入一个具有以下结构的主从细节：

每个销售都有一个 ID、日期和一个客户、员工和销售细节。每个销售明细都有一个件数和价格，当然还有对它的主人和产品的参考。

我尝试了以下代码，但我无法让它工作：

```
private void GenerarNota()
{
    EntityCollection<SalesDetail> details = new EntityCollection<SalesDetail>();

    foreach (ListItem item in _productList)
    {
        SalesDetail detail = new SalesDetail();
        detail.Product = db.Product.FirstOrDefault(p => p.Id == item.Id);
        detail.Pieces = item.Pieces;
        detail.Price = item.Price;

        details.Add(detail);
    }

    Sale sale = new Sale
    {
        Client = (Client )txtCliente.Item,
        Employee = (Employee )txtEmp.Item,
        SalesDetail = details
    };

    db.AddToSale(sale);
    db.SaveChanges();
} 
```

我得到的例外：

> 无法将该对象添加到 EntityCollection 或 EntityReference。无法将附加到 ObjectContext 的对象添加到不与源对象关联的 EntityCollection 或 EntityReference。

难道我做错了什么？我阅读了有关附加和分离对象的信息，但在我尝试之后，我遇到了 FK 约束违规。

你能告诉我我做错了什么还是另一种方法？我是 LINQ 的新手，我可以用纯 SQL 完美地做到这一点，但我想了解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:25:43.970

detail.Product 仍然与 db 相关联。价格和件数也可能与之相关。系统非常严格地确保每个对象只能与一个对象上下文（您的数据库）相关联或完全分离（您的 EntityCollection<>）。

要么您的详细信息 EntityCollection 需要与 db 相关联（不知道如何执行此操作），要么您的所有对象必须在添加到详细信息之前正确分离。

老实说，我只是重新排序 - 首先创建销售并添加它，然后开始将东西插入到 Sale.SalesDetail 中。

# php - php数字数组选择大于数字且小于另一个数字的值并将其保存到新数组中

> ID：15776113
> 
> 赞同：12
> 
> 时间：2013-04-02T23:12:58.440
> 
> 标签：php, arrays

我有一个包含以下数字的数组（动态创建）

```
$numbers = array (200, 400, 600, 800, 1000, 1200, 1400, 1600, 1800, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000, 10000, 12000, 14000, 15000, 16000, 18000, 20000, 21000, 24000, 25000, 27000, 30000, 35000, 40000, 45000, 50000, 60000, 70000, 75000, 80000, 90000, 100000, 105000, 120000, 135000, 140000, 150000, 160000, 180000, 200000, 250000, 300000, 350000, 400000, 450000, 500000, 600000, 700000, 800000, 900000, 1000000) 
```

我想通过 >= 和 <= 创建新数组（过滤），例如，新数组包含大于或等于（>=）800 且小于或等于（<=）1600 的数字

```
New Array
(
    [0] => 800
    [1] => 1000
    [2] => 1200
    [3] => 1400
    [4] => 1600
) 
```

不使用foreach有可能吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-02T23:16:48.300

```
$min = 800;
$max = 1200;
$newNumbers = array_filter(
    $numbers,
    function ($value) use($min,$max) {
        return ($value >= $min && $value <= $max);
    }
); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-02T23:18:16.990

您正在寻找[array_filter](http://php.net/manual/en/function.array-filter.php) [http://php.net/manual/en/function.array-filter.php](http://php.net/manual/en/function.array-filter.php)

一个很好的使用示例是：

```
array_filter($numbers, function($n){ 
    return $n >= 800 && $n <= 1600;
}); 
```

# android - 接近警报是否需要我的应用程序中的坐标更新？

> ID：15776116
> 
> 赞同：2
> 
> 时间：2013-04-02T23:13:16.660
> 
> 标签：android, location, alert, updates, proximity

我正在开发一个使用接近警报来触发某些功能的应用程序。我已经研究了一些教程和示例，设置了一些警报，它似乎工作得还不错。但是，当我关闭应用程序时（我调用 locationManager.removeUpdates() 以不再接收更新），似乎警报不断出现。

所以我的问题是，我真的需要为警报 api 提供 gps 修复吗？还是系统自己获取它，我不需要担心它，除非创建一个新的，你需要那些坐标？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:39:51.763

我认为您不必使用请求位置更新-您只需取消注册接收器即可停止警报

```
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.database.Cursor;
import android.graphics.Color;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.widget.Toast;

public class ProximityService extends Service {

    String proximitysd = "com.apps.ProximityService";
    int n = 0;
    private BroadcastReceiver mybroadcast;
    private LocationManager locationManager;

    public ProximityService() {}

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate() {
        mybroadcast = new ProximityIntentReceiver();
        locationManager = (LocationManager) 
                getSystemService(Context.LOCATION_SERVICE);
        double lat;
        double lng;
        float radius = 50f;
        long expiration = -1;
        MyDBAdapter db = new MyDBAdapter(this);
        Cursor cursor;
        db.read();
        cursor = db.getAllEntries();
        boolean go = cursor.moveToFirst();
        while (cursor.isAfterLast() != true) {
            lat = cursor.getInt(MyDBAdapter.LATITUDE_COLUMN) / 1E6;
            lng = cursor.getInt(MyDBAdapter.LONGITUDE_COLUMN) / 1E6;
            String what = cursor.getString(MyDBAdapter.ICON_COLUMN);
            String how = cursor.getString(MyDBAdapter.TYPE_COLUMN);
            String proximitys = "com.apps.ProximityService" + n;
            IntentFilter filter = new IntentFilter(proximitys);
            registerReceiver(mybroadcast, filter);
            Intent intent = new Intent(proximitys);
            intent.putExtra("alert", what);
            intent.putExtra("type", how);
            PendingIntent proximityIntent = PendingIntent.getBroadcast(this, n,
                    intent, PendingIntent.FLAG_CANCEL_CURRENT);
            locationManager.addProximityAlert(lat, lng, radius, expiration,
                    proximityIntent);
            // sendBroadcast(new Intent(intent));
            n++;
            cursor.moveToNext();
        }
        db.close();
        cursor.close();
    }

    @Override
    public void onDestroy() {
        Toast.makeText(this, "Proximity Service Stopped", Toast.LENGTH_LONG)
                .show();
        unregisterReceiver(mybroadcast);
    }

    @Override
    public void onStart(Intent intent, int startid) {
        Toast.makeText(this, "Proximity Service Started", Toast.LENGTH_LONG)
                .show();
        // IntentFilter filter = new IntentFilter(proximitys);
        // registerReceiver(mybroadcast,filter);
    }

    public class ProximityIntentReceiver extends BroadcastReceiver {

        private static final int NOTIFICATION_ID = 1000;

        @Override
        public void onReceive(Context arg0, Intent arg1) {
            String key = LocationManager.KEY_PROXIMITY_ENTERING;
            Boolean entering = arg1.getBooleanExtra(key, false);
            String here = arg1.getExtras().getString("alert");
            String happy = arg1.getExtras().getString("type");
            if (entering) {
            }
            NotificationManager notificationManager = (NotificationManager) 
                    getSystemService(Context.NOTIFICATION_SERVICE);
            PendingIntent pendingIntent = PendingIntent.getActivity(arg0, 0,
                    arg1, 0);
            Notification notification = createNotification();
            notification
                    .setLatestEventInfo(arg0, "Proximity Alert!",
                            "You are approaching a " + here + " marker.",
                            pendingIntent);
            notificationManager.notify(NOTIFICATION_ID, notification);
        }

        private Notification createNotification() {
            Notification notification = new Notification();
            notification.icon = R.drawable.icon;
            notification.when = System.currentTimeMillis();
            notification.flags |= Notification.FLAG_AUTO_CANCEL;
            notification.flags |= Notification.FLAG_SHOW_LIGHTS;
            notification.defaults |= Notification.DEFAULT_VIBRATE;
            notification.defaults |= Notification.DEFAULT_LIGHTS;
            notification.ledARGB = Color.WHITE;
            notification.ledOnMS = 1500;
            notification.ledOffMS = 1500;
            return notification;
        }
        // make actions
    }
} 
```

# objective-c - Objective-C 线程和 NSZone

> ID：15776123
> 
> 赞同：0
> 
> 时间：2013-04-02T23:13:52.843
> 
> 标签：objective-c, multithreading, process

当我第一次读到 NSZone 和它是什么的时候，我对使用区域来隔离线程的内存空间的前景感到非常兴奋，这样我就可以有效地杀死一个线程并释放它的区域。但似乎 NSZone 毕竟不能真正用于此目的。

所以我想知道是否有任何方法可以将Objective-C中的线程隔离到可以安全地被杀死和释放的特定内存块？

如果做不到这一点，有没有办法在 Objective-C 中生成子进程（肯定有自己的内存空间），类似于 Chrome 的处理方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:25:00.437

进程间通信是一个对你想要实现的东西来说太具有挑战性的主题。只要您只是在寻找可以取消和解除分配的某些工作的表示，[NSThread](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html)的子类就是完美的。通过覆盖`-main`，您可以获得 NSOperation 的所有好处（不关心究竟发生在*哪个*线程工作，从实际线程抽象，封装等），但以更具体和可取消的形式。

# java - 蓝牙到 PC：设备、端口和 UUID

> ID：15776124
> 
> 赞同：1
> 
> 时间：2013-04-02T23:13:57.630
> 
> 标签：java, android, bluetooth, bluecove

我正在开发一个应该通过蓝牙连接到自定义设备的 Android 应用程序，但为了模拟该设备（我还没有），我使用 Java 的 Bluecove 在 PC 上制作了一个模拟器。

但是，我很难弄清楚不同的连接方法。

首先，在 Android 上，我们发现设备（这里是 PC），然后：

-我们有“UUID”解决方案，如[android sdk doc](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#createRfcommSocketToServiceRecord(java.util.UUID))中所述。

[- 或者这里](http://stackoverflow.com/questions/14562217/android-bluetooth-chat-with-pc-serially)提出的“端口”解决方案。

第二个对我来说似乎更自然，因为我不太明白在这种情况下什么是 UUID。

我确实知道我们需要连接到设备的端口，但 UUID 与此有什么关系？为什么我们不需要在第二个解决方案中指定它？

如果有人能给我一个线索，那将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T16:56:46.813

蓝牙通信是与服务的通信，所以当你想连接到设备时，你正在尝试连接到服务，而 uuid 是我们连接到服务的号码，就像好的，我想要这个 uuid（这个服务）。

# macos - 重新启动后修改 /private/etc/paths 没有改变 $PATH

> ID：15776128
> 
> 赞同：0
> 
> 时间：2013-04-02T23:14:41.993
> 
> 标签：macos, unix, path

在这里使用 rMBP。我不确定负责执行此操作的脚本是什么。基本上我想将python utils的路径添加到`$PATH`...

例如，我`brew python`为了得到brewed python `pip`，然后运行`pip install flake8`​​. 现在

```
$ which flake8
flake8 not found

$ find / | grep flake8
...
......
/usr/local/share/python/flake8

$ ls -la /usr/local/share/python/
total 32
drwxr-xr-x   6 lust  admin  204 Apr  2 18:15 .
drwxr-xr-x  15 lust  admin  510 Apr  2 18:12 ..
lrwxr-xr-x   1 lust  admin   45 Apr  2 18:13 Extras -> ../../Cellar/python/2.7.3/share/python/Extras
-rwxr-xr-x   1 lust  admin  389 Apr  2 18:15 flake8
-rwxr-xr-x   1 lust  admin  385 Apr  2 18:15 pep8
-rwxr-xr-x   1 lust  admin  405 Apr  2 18:15 pyflakes 
```

好吧！

```
$ cat /private/etc/paths
/usr/bin
/bin
/usr/sbin
/sbin
/usr/local/bin

$ sudo vim /private/etc/paths
$ cat /private/etc/paths
/usr/bin
/bin
/usr/sbin
/sbin
/usr/local/bin
/usr/local/share/python 
```

制作一个新的外壳，检查`$PATH`，python 不存在。好的。

重新启动，启动一个新的 shell，检查`$PATH`，python**仍然**不存在。

哦，顺便说一下，解决方案是**不要**附加任何类似的东西`export PATH=$PATH:newpath`，因为我实际上并不关心从命令行运行`flake8`，我希望 Sublime Text 3' SublimeLinter 插件能够真正知道它在哪里，而不需要添加一些hacky在编辑器的设置中配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:53:37.893

我发现了问题。作为 oh-my-zsh 的一部分，zsh 设置为在`~/.zshrc`. 我没有考虑到这一点。在不使用命令行调用的情况下启动 ST3 时，它会获得自己的（不正确的）路径环境变量，因此该部分仍然不起作用。然而，问题的最终解决方案就在[这里](https://github.com/SublimeLinter/SublimeLinter/pull/345#issuecomment-15815467)。

# python - 发送自定义 Mime 类型 Google App Engine 电子邮件

> ID：15776136
> 
> 赞同：2
> 
> 时间：2013-04-02T23:15:10.923
> 
> 标签：python, google-app-engine, smtp, mime-types, smtplib

嗨，我刚刚发现我无法使用 smtplib 从 GAE 发送电子邮件，但我需要指定自定义 mime 类型，如下所示：

```
part = MIMEBase('application', "vnd.openxmlformats-officedocument.wordprocessingml.document")
part.set_payload( doc )
Encoders.encode_base64(part)
part.add_header('Content-Disposition', 'attachment; filename="%s"' % "ackReceived.docx")
msg.attach(part) 
```

如果我尝试以记录的方式使用 api，它会发送带有“application/msword”的附件，这会导致我的 docx 损坏。

我可以使用谷歌的邮件 API 手动指定 MIME 类型吗？

**编辑：**当我的 docx 是通过邮件 api 发送时，我面临的问题的更多信息：

smtplib 像这样发送附件：

```
Content-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document
MIME-Version: 1.0
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="ackReceived.docx"

UEsDBBQABgAIAAAAIQCCVgdJnwEAAMgIAAATAAAAW0NvbnRlbnRfVHlwZXNdLnhtbMWWS0/DMBCE
70j8h8hXlLhwQAg17YHHEZAo4mzsTWMRP2Qvj/571k1bIaiaiDbiEilZz3wzsSJnPP00TfYOIWpn
S3ZajFgGVjql7bxkT7Pb/IJlEYVVonEWSraAyKaT46PxbOEhZqS2sWQ1or/kPMoajIiF82BpUrlg... 
```

Google 邮件 api 发送相同的文件，如下所示：

```
Content-Type: application/msword
MIME-Version: 1.0
Content-Disposition: attachment; filename="ackReceived.docx"

PK�����!�‚VIŸ��È�����[Content_Types].xmlÅ–KOÃ0„ïHü‡ÈW”¸p@5íÇ(âlìMc?d/þ{ÖM[!¨šˆ6â)YÏ|3±"g<ý4Mö!jgKvZŒXV:¥í¼dO³Ûü‚e…U¢qJ¶€È¦“ã£ñlá!f¤¶±d5¢¿ä<ÊŒˆ…ó`iR¹`Òm˜s/ä«˜?Î¹tÁbŽÉƒMÆ×P‰·³›OzÜ&!9Ë®Úu    U2á}£¥@ó4å[uÞÎè´IÜô|»"@w Þ­úÑ'_u)H¹\kíãÉ*Ó=½Ì d"à0dÇ?\P\9ùfQì®¶…çªJKØè“›NBŒ´K¦)6#´íÌqÑ@<|ŠÖ·'þYc}SU ±Oó¤-~i»i€Hñ†¨»rîŒð/ƒ¥øfÞ¤r­Ã!ö~cÝ¬(ÃÚ¹3B
BA8=|‚Ö¸'ÿìßøi³éß÷äÐ¿7Ÿxâ¥!¬¬;C ”Ð^÷ß‰¥Í.$­|ÎG:yÃj¯¼¤Î©°‡€z÷—¶!’õÞý Ö... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:39:49.870

简而言之，您不能使用 Google AppEngine 电子邮件指定自定义 mime 类型。

为了通过 Google AppEngine 通过 Google 发送电子邮件，您需要使用提供的 Mail API。您可以`application/msword`在此处了解 .docx 使用内容类型的原因：[https](https://cloud.google.com/appengine/docs/standard/python/mail/mail-with-headers-attachments) ://cloud.google.com/appengine/docs/standard/python/mail/mail-with-headers-attachments 。您可能希望向问题跟踪器提交问题以解决此问题。

可能值得关注第三方电子邮件提供商，例如[Amazon 的 SES](http://aws.amazon.com/ses/)或[SendGrid](http://sendgrid.com/)。我个人一直在使用 Amazon 的 SES 来解决 GAE 的 Mail API 中许多缺乏功能和限制的问题（尽管 Google 一直在改进这个 API）。

您可以使用[boto 库](https://github.com/boto/boto)与 AWS SES 通信并发送[RAW 电子邮件消息](http://docs.pythonboto.org/en/latest/ref/ses.html#boto.ses.connection.SESConnection.send_raw_email)。（查看[此问题](https://stackoverflow.com/questions/3362600/how-to-send-email-attachments-with-python)以获取有关如何创建电子邮件的示例，可能需要为您的目的进行一些小的修改）

# xml - 使用 c# 对 XML 类型的字符串进行正则表达式

> ID：15776137
> 
> 赞同：0
> 
> 时间：2013-04-02T23:15:23.497
> 
> 标签：xml, regex, c#-4.0

输入的格式如下所示：

```
<HiddenRowGroups>
    <HiddenGroup>
      <From>16</From>
      <To>17</To>
      <Level>0</Level>
      <GroupName>TABS</GroupName>
      <ItemTotalHeader>Total</ItemTotalHeader>
    </HiddenGroup>
    <HiddenGroup>
      <From>3</From>
      <To>3</To>
      <Level>0</Level>
      <GroupName>ABSCDXH</GroupName>
      <ItemTotalHeader>Total</ItemTotalHeader>
    </HiddenGroup>
  </HiddenRowGroups> 
```

期望的输出：`<HiddenRowGroups />`

如何将字符串形式的正则表达式替换为`<HiddenRowGroups />`. 我尝试通过`Regex.Replace`C# 的方法替换它。

# c# - 将文件放入现有文件夹

> ID：15776141
> 
> 赞同：1
> 
> 时间：2013-04-02T23:15:33.650
> 
> 标签：c#, visual-studio, tfs, wix

我想为我的自定义 TFS 工作项控件的文件制作一个安装程序。我使用 WIX。为了使控件正常工作，我必须将文件放入

```
C:\Users\UserName\AppData\Local\Microsoft\Team Foundation\Work Item Tracking\Custom Controls\. 
```

文件夹。

我在xml中制作了这个目录结构：

```
<Fragment>
    <!--Microsoft\Team Foundation\Work Item Tracking\Custom Controls\.-->
    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="LocalAppDataFolder">
        <Directory Id="MS" Name="Microsoft">
          <Directory Id="TF" Name="Team Foundation">
            <Directory Id="WIT" Name="Work Item Tracking">
              <Directory Id="CC" Name="Custom Controls">
                <Directory Id="INSTALLFOLDER"/>

              </Directory>
            </Directory>
          </Directory>
        </Directory>
      </Directory>
    </Directory>
  </Fragment> 
```

问题是，我在构建过程中收到 MS、TF、WIT、CC 文件夹错误：

```
ICE64: The directory <<id>> is in the user profile but is not listed in the RemoveFile table. 
```

好的，我理解错误，但如果我不想在卸载时删除这些文件夹怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:40:33.410

该`RemoveFolder`元素只会删除空目录。这意味着它可以安全地用于清理用户配置文件中的文件夹，而不会过早地删除那里的内容。

# sas - 通过引用外部文本文件对 SAS 中的数据集进行子集化

> ID：15776143
> 
> 赞同：0
> 
> 时间：2013-04-02T23:15:42.187
> 
> 标签：sas, subset, data-manipulation

我正在使用来自 FDA 的数据集，其中包含对药物反应的数据。我正在尝试按药物名称对数据进行子集化。我有一个包含我感兴趣的药物名称的外部文本文件。我想创建一个包含我感兴趣的药物的数据子集。我的外部文本文件名为 SSRIFULL.txt，变量名为 DRUGNAME。我尝试了很多明显错误的事情

IE

数据 SSRIFULL2;

---- 设置 SSRIFULL;

---- 如果 Drugname ~= "P:\APPRENTICESHIP\SSRI_LIST.txt" 则删除；

跑;

我找不到任何关于这个问题的文献。我应该更多地研究关于 trunco​​ver 或 proc sql 的主题吗？文本文件包含约 20 种药物的列表。我也对某种类型的内联代码持开放态度，但出于某种原因，SAS 不喜欢这样......

数据 SSRIFULL2;

---设置SSRIFULL;

------IF (AGE >19) OR (AGE = .) 然后删除；

------If (DRUGNAME ~= 'clomipramine' OR 'fluvoxamine' or 'Paxil' or 'paroxetine' or 'Prozac'

------或“氟西汀”或“思瑞康”或“维布特林”或“安非他酮”或“左洛复”或“舍曲林”

------OR 'Zyban') 然后删除；

跑;

可能很明显，我对 SAS 没有太多经验，我只是想让这个数据集可用于此时的分析。感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:40:34.670

您应该查阅 SAS 文档以了解必要的语法。您的第二次尝试非常接近，但这是正确的：

```
DATA SSRIFULL2;
 SET SSRIFULL;
 IF (AGE >19) OR (AGE = .) Then Delete;
 If DRUGNAME in ('clomipramine' 'fluvoxamine' 'Paxil' 'paroxetine' 'Prozac' 'fluoxetine' 'Seroquel'  'Wellbutrin' 'bupropion' 'Zoloft' 'sertraline' 'Zyban') then delete;
RUN; 
```

请注意，存储在变量中的名称`drugname`将区分大小写，因此，如果变量是“paxil”，而您尝试匹配“Paxil”，那将不起作用。您可以使用该`lowcase`功能来处理这个问题。

要实现类似于您的第一次尝试，您必须将文件读入 SAS 数据集，然后在第二步中使用它进行匹配：

```
data ssri_list;
 length drugname $50.;
 infile 'P:\APPRENTICESHIP\SSRI_LIST.txt';
 input drugname$;
run;

proc sql;
 create table ssrifull2 as
  select * from ssrifull where 0<=age<19 and drugname not in
   (select drugname from ssri_list);
quit; 
```

或类似的东西。

# php - PHP 数组格式不正确

> ID：15776145
> 
> 赞同：0
> 
> 时间：2013-04-02T23:15:55.480
> 
> 标签：php, arrays

我似乎无法弄清楚问题所在，但我的 PHP 数组没有输出为正确的 JSON。我删除了 json_encode 函数，只是发现我的数组是级联的并且没有正确格式化自己。这是一个输出示例（删除了 json_encode）：

```
Array (
    [0] => Array (
        [username] => g4m3b0y
        [profile_photo] => default.png
        [email] => michael@me.com
        [first_name] => Michael
        [last_name] => Simpson
    )
) 
Array (
    [0] => Array (
        [username] => g4m3b0y
        [profile_photo] => default.png
        [email] => michael@me.com
        [first_name] => Michael
        [last_name] => Simpson
    )
    [1] => Array (
        [username] => michelle
        [profile_photo] => default.png
        [email] => michelle@gmail.com
        [first_name] => Michelle
        [last_name] => Houston
    )
) 
```

如您所见，它在单独的数组中创建了重复的结果，因此我对 JSON 输出有疑问。这是我生成结果的代码：

```
 $sql2 = "SELECT DISTINCT username, profile_photo, first_name, last_name, email FROM users WHERE (
        first_name LIKE '%$q%'
        OR last_name LIKE '%$q%'
    ) ORDER BY last_name";

    $sq2 = mysql_query($sql2);
    $st2 = mysql_num_rows($sq2);

    if($st2>=1) {   
        while($a = mysql_fetch_array($sq2)) {
            $userRow[] = array(
                'username' => $a['username'],
                'profile_photo'   => $a['profile_photo'],
                'email'   => $a['email'],
                'first_name'   => $a['first_name'],
                'last_name'   => $a['last_name']
            );
        header('Content-Type: application/json');
        echo json_encode($userRow);
        }
    }

    else {
        exit;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:23:09.827

您对`header`and`json_encode`的调用在您的 while 循环中。将它移到外面，它会将很多编译成一个 json 字符串。目前它正在输出多个单独的。

这也解释了为什么你也会得到副本。迭代一个将第一行添加到数组`$userRow`中，然后输出获得键的结果`0`。然后第二次迭代将下一行添加到现有数组中，因此得到 key `1`。然后它再次回显 json 编码的字符串，因此这次打印 0 和 1。因此 0 然后 0 然后 1

```
$sql2 = "SELECT DISTINCT username, profile_photo, first_name, last_name, email FROM users WHERE (
    first_name LIKE '%$q%'
    OR last_name LIKE '%$q%'
) ORDER BY last_name";

$sq2 = mysql_query($sql2);
$st2 = mysql_num_rows($sq2);

if($st2>=1) {   
    while($a = mysql_fetch_array($sq2)) {
        $userRow[] = array(
            'username' => $a['username'],
            'profile_photo'   => $a['profile_photo'],
            'email'   => $a['email'],
            'first_name'   => $a['first_name'],
            'last_name'   => $a['last_name']
        );
    }

    // I moved this below the above }
    header('Content-Type: application/json');
    echo json_encode($userRow);
}

else {
    exit;
} 
```

# linq - Linq 从多个表中选择

> ID：15776152
> 
> 赞同：1
> 
> 时间：2013-04-02T23:16:21.360
> 
> 标签：linq, entity-framework

我有以下型号

```
public class SummaryModel
{
    public int CompanyCount { get; set; }
    public int GroupCount { get; set; }
    public int ProjectCount { get; set; }
    public int ResourcesCount { get; set; }
    public int PeopleCount { get; set; }
} 
```

我想使用 linq 查询我的数据库并从多个表返回记录计数并填充此模型对象。

这就是我的做法：

```
 using (var ctx = new WeWorkModel.weWorkEntities())
        {
            var summary = new SummaryModel()
                {
                    CompanyCount = ctx.Companies.Count(),
                    PeopleCount = ctx.People.Count(),
                    GroupCount = ctx.Groups.Count(),
                    ProjectCount = ctx.Projects.Count(),
                    ResourcesCount = ctx.Resources.Count()
                };

        } 
```

这是最有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-10T20:44:52.897

是的，这是最有效的方法 - 相当于编写 sql 查询，因为它不会获取对象，而只会在服务器上进行计数。所以像这样（使用分析器跟踪查询）

```
SELECT 
[GroupBy1].[A1] AS [C1]
FROM ( SELECT 
    COUNT(1) AS [A1]
    FROM [dbo].[Company] AS [Extent1]
)  AS [GroupBy1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:17:42.423

您是否需要将此模型存储在数据库中或在实例化后更改它的值？如果不是，为什么不将此代码块放在无参数构造函数中，并将字段标记为只读，以避免以不同于预期的方式使用此模型。如果您稍后发现您需要更好地控制字段的初始化，只需添加另一个构造函数来处理该特定情况。对于主要问题，我认为您的处理方式没有什么特别低效的。虽然，使用代码几乎总是有更简洁或更有效的方式来处理任何场景。

# heroku - Heroku 目前是否支持 RabbitMQ

> ID：15776153
> 
> 赞同：0
> 
> 时间：2013-04-02T23:16:32.850
> 
> 标签：heroku, rabbitmq, message-queue, amqp

所以我的问题是heroku目前支持rabbitmq吗？它是插件“rabbitmq”，但目前看起来它已禁用。如果heroku不支持rabbitmq，那么它是否支持其他可以通过amqp协议工作的代理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:34:46.353

您可以[在 Heroku 插件目录中搜索 RabbitMQ 插件](https://addons.heroku.com/?q=rabbitmq)。那里有两个：

*   [云AMQP](https://addons.heroku.com/cloudamqp)
*   [RabbitMQ 大佬](https://addons.heroku.com/rabbitmq-bigwig)

# c# - 列表 和派生类中的 GetRange() 问题

> ID：15776154
> 
> 赞同：1
> 
> 时间：2013-04-02T23:16:35.250
> 
> 标签：c#, list

我有一个实现 MyItems 列表的类。我想要一种从该列表中删除某些元素的方法，它应该返回已删除的项目。这是我尝试过的：

```
public class MyItemList : List<MyItem>
{
    ...

    public MyItemList cutOff(int count)
    {
        MyItemList result = this.GetRange(0, count);
        this.RemoveRange(0, count);
        return result;
    } 
```

不幸的是 GetRange() 返回 List 但不是 MyItemList :( 我怎样才能以更好的方式处理这个问题？铸造不起作用。必须有一种优雅的方法来解决这个非常简单的问题并保持在 MyItemList 类型内（没有肮脏的黑客）。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:22:09.230

这应该可以解决问题，但我强烈建议重新设计组合，您将在内部存储 List

```
public class MyItemList : List<MyItem>
{
    public MyItemList(){}

    public MyItemList(IEnumerable<MyItem> sequence): base(sequence) {}

    public MyItemList cutOff(int count)
    {
        MyItemList result = new MyItemList(this.GetRange(0, count));
        this.RemoveRange(0, count);
        return result;
    }
} 
```

还可以考虑创建列表的开放泛型类型，例如`MyList<T> : List<T>`，`MyList<T> : List<T> where T : MyItem`以便该类的客户端可以利用泛型

**编辑：**好的，我已经`List<T>`为扩展方法实现了通用版本，这将帮助您对 MyItemList 类之外的列表进行更通用的逻辑

```
public static class ListExtensions
{
    public static List<T> CutOff<T>(this List<T> list, int count)
    {
        var result = list.GetRange(0, count);
        list.RemoveRange(0, count);
        return result;
    }
} 
```

现在你可以

```
var list = new List<int> {1,2,3,4,5,6};

Console.WriteLine ("cutted items:");
Console.WriteLine (string.Join(Environment.NewLine, list.CutOff(2)));

Console.WriteLine ("items in list:");
Console.WriteLine (string.Join(Environment.NewLine, list)); 
```

印刷：

```
cutted items:
1
2
items in list:
3
4
5
6 
```

**另一个注意事项：**

我建议这样做

```
public class MyItemList<T> : IList<T> where T : MyItem
{
     private List<T> list;

     //here will be implementation of all methods required by IList
     //that will simply delegate to list field

} 
```

请注意，如果所有逻辑`MyItemList`都是通用的（可以应用于`List<T>`, like`Cutoff`方法），您可能不需要单独的类。也是`where T : MyItem`可选的，仅当您访问`MyItem`在 MyItemList中定义的方法时才需要

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T23:25:20.407

你可以只返回一个`List<MyItem>`或`MyItem[]`删除的项目。或使用采用 ienumerable 的 List<> 构造函数。

没有编译这个 - 但应该没问题

```
public class MyItemList : List<MyItem>
{
   // def ctor
   public MyItemList() {}

   public MyItemList(IEnumerable<MyItems> items): base(items) {}

   public MyItemList cutOff(int count)
    {
        MyItemList result = new MyItemList(this.GetRange(0, count));
        this.RemoveRange(0, count);
        return result;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T23:49:25.827

不要继承自`List<MyItem>`( 除非您要做的只是避免键入尖括号。而是将a*封装*`List<MyItem>`为您的类的后备存储并仅公开您的问题域所需的特定/方法和属性。通过继承 from `List<MyObject>`，您的正在泄漏实现细节并将自己绑定到特定类型的后备存储。您希望保持完成工作所需的最小公共表面积。这样做有助于测试，并使未来的更改更容易。

如果您希望与标准 SCG 集合类型具有*互操作性，请仅实现您需要的接口——最好是显式实现。*

# gwt - GWT Jquery Mobile 刷新列表视图

> ID：15776158
> 
> 赞同：1
> 
> 时间：2013-04-02T23:17:05.743
> 
> 标签：gwt, jquery-mobile, jsni

我在 GWT 中使用 AJAX 添加了一些 ListView 项目。

如果我在 Chrome 中使用控制台调用，则它可以正常工作。

> $("#basket").listview("刷新");

如果我在 Java 中调用以下函数，则不会发生任何事情：

```
public static native void refreshListView()/*-{
    $wnd.$( "#basket" ).listview( "refresh" );
}-*/; 
```

我在 Java 中的 JSNI 语法有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:12:38.297

在正确加载小部件之前，我正在调用 refreshViewList。这有效：

```
item.addAttachHandler(new AttachEvent.Handler() {

      @Override
      public void onAttachOrDetach(AttachEvent event) {
          JQMUtil.refreshListView();
      }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:35:13.357

你试过[这个](https://stackoverflow.com/questions/10817236/jsni-gwt-jquery#)

```
public static native void refreshListView()/*-{
$wnd.$($doc).ready(function($) { 
   $( "#basket" ).listview( "refresh" );
});
}-*/; 
```

# c# - 大屏多点触控交互应用设计

> ID：15776160
> 
> 赞同：4
> 
> 时间：2013-04-02T23:17:09.593
> 
> 标签：c#, java, html, apache-flex, multi-touch

我应该为大型多点触控屏幕设计一个应用程序。大，我的意思是新闻播音员大（大约 55 英寸及以上）。该应用程序是一个交互式地图。

我的问题是：使用哪种技术开发应用程序。我的第一个想法是在 Adob​​e Flex 中制作它，但也有 HTML5 ......必须有一些很棒的用于触摸交互的 Java 库，但是在 Windows 平台上也必须是 C# 库吗？

有人可以指出我正确的方向。

后端可能会使用 Java EE。

有专门的触摸地图sdk吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:31:18.103

为什么要重新发明轮子？

[Ventuz 提供](https://www.ventuz.com/)了我用过的最好的触控软件，而且我每天都在使用它。它专门用于大型多点触控演示。

如果您想自己构建它，那么您将有很长的路要走。Ventuz 非常灵活，可以让您在大多数情况下通过触摸完成任何您需要做的事情。

（他们和你一样都在德国）

这是他们去年在 NAB 上展示的一些演示

![选举地图](https://i.stack.imgur.com/viKfM.jpg) [![多屏](https://i.stack.imgur.com/R5QcK.jpg)](https://i.stack.imgur.com/R5QcK.jpg)
[（来源：[ventuz.com](http://www.ventuz.com/images/news/company/12-04-27%20NAB%202012/nab_2012_11.jpg)）]

# .net - DbGeography 上的坐标系统 ID

> ID：15776161
> 
> 赞同：12
> 
> 时间：2013-04-02T23:17:20.537
> 
> 标签：.net, sql-server-2008-r2, entity-framework-5, geospatial

我需要使用 Bing 地图服务、EF 5 和 SQL Server 2008 对大量地址进行地理编码。我在 SQL 中使用地理数据类型，它由 EF 转换为 DbGeography 类型。

当我创建一个 DbGeography 对象时，像这样

```
string point = string.Format("POINT({0} {1})",address.Longitude,address.Latitude);
address.Location = System.Data.Spatial.DbGeography.PointFromText(point, 4326); 
```

第二个参数调用“coordinateSystemId”。这究竟是什么？我看到的很多例子都使用 4326。我是空间数据的新手，但我猜有一组定义明确的坐标系？我似乎找不到定义。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-08-29T07:08:41.143

GIS 有一个完整的 StackExchange，如果您像我一样，作为不了解 GIS 的编码员在其中遇到问题，那么您就可以搭便车了：

[https://gis.stackexchange.com/questions/48949/epsg-3857-or-4326-for-googlemaps-openstreetmap-and-leaflet](https://gis.stackexchange.com/questions/48949/epsg-3857-or-4326-for-googlemaps-openstreetmap-and-leaflet)

事实证明，地图（“GIS”）中有一个名为 EPSG 的标准，人们在提及它时似乎可以互换使用“EPSG”、“EPSG SRID”和“SRID”。在大多数 GPS 坐标使用中，如果您谈论的是地球（包括您从谷歌地图获得的纬度），那么您使用的是 EPSG SRID 4326，如果您谈论的是平面 2D 地图（如谷歌自定义地图） ，您说的是 EPSG SRID 3857。

还有一些关于 WGS 的问题你可以忽略。

.Net 仅在 EPSG SRID 中寻找实际的数字 ID。如果这些只是 DbGeography 上的常量，那将非常有帮助，例如：

```
public class DbGeography
{    
    public const int SridGps = 4326;
    public const int Srid2dPlane = 3857; 
```

但没有这样的运气。

无论如何，请考虑在您的应用程序中使它们成为常量，而不是仅仅抛出一个未记录的幻数。我们的小助手类：

```
public class GeoHelper
{
    public const int SridGoogleMaps = 4326;
    public const int SridCustomMap = 3857;

    public static DbGeography FromLatLng(double lat, double lng)
    {
        // http://codepaste.net/73hssg
        return DbGeography.PointFromText(
            "POINT("
            + lng.ToString() + " "
            + lat.ToString() + ")",
            SridGoogleMaps);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T23:21:22.413

它是一个[定义明确的空间参考标识符](http://en.wikipedia.org/wiki/SRID)——一个唯一标识各种空间投影、基准、单位、朝向等的某种配置的数字。

# matlab - Matlab以特定方式重塑两个向量

> ID：15776162
> 
> 赞同：0
> 
> 时间：2013-04-02T23:17:20.890
> 
> 标签：matlab

我有两个向量，我希望数字彼此跟随。我的意思是：

```
a = [5 6 4 2 1];
b = [4 2 1 3]; 
```

矢量 b 可以比 a 小一或可以是我想要得到的相同长度

```
c = [5 4 6 2 4 1 2 3 1]; 
```

我尝试使用 reshape 但放弃了。所以我只是实现了循环。但是有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:38:15.713

您可以使用切片分配：

```
% prepare c
c = zeros(1, length(a) + length(b));

% assign a
c(1:2:length(a)*2) = a;

% assign b
c((1:2:length(b)*2)+1) = b; 
```

注意：此解决方案不会验证是否`a`太短`b`。太长`a`还是`b`会报错。

AFAIK`reshape`仅可用于更改单个数组/矩阵的尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:42:52.220

为什么不使用简单的连接和重新排序？

```
>> a = [5 6 4 2 1];
>> b = [4 2 1 3];
>> c = [a b];                 % initialize by concatenation
>> c([1:2:end 2:2:end]) = c   % reorder by sliced re-assignment 

c =
    5     4     6     2     4     1     2     3     1 
```

# winforms - 为什么这个 C++/CLI 代码没有将文件添加到列表框

> ID：15776164
> 
> 赞同：-1
> 
> 时间：2013-04-02T23:17:32.723
> 
> 标签：winforms, file, listbox, c++-cli

我有这个 c++ 代码，它应该检测何时在目录中修改了文件并将文件名添加到列表框中。

这是文件监视器部分，它位于启动监视过程的按钮内

```
private: System::Void button1_Click(System::Object^ sender, System::EventArgs^ e) {
    array<String^>^ args = Environment::GetCommandLineArgs();

    FileSystemWatcher^ fsWatcher = gcnew FileSystemWatcher( );
    fsWatcher->Path = "C:\\users\\patchvista2";
    fsWatcher->IncludeSubdirectories = true;
    fsWatcher->NotifyFilter = static_cast<NotifyFilters> 
              (NotifyFilters::FileName | 
               NotifyFilters::Attributes | 
               NotifyFilters::LastAccess | 
               NotifyFilters::LastWrite | 
               NotifyFilters::Security | 
               NotifyFilters::Size );

    Form1^ handler = gcnew Form1(); 
    fsWatcher->Changed += gcnew FileSystemEventHandler(handler, &Form1::OnChanged);
    fsWatcher->Created += gcnew FileSystemEventHandler(handler, &Form1::OnChanged);

    fsWatcher->EnableRaisingEvents = true;
} 
```

然后对于 onchange 部分我有这个代码

```
void OnChanged (Object^ source, FileSystemEventArgs^ e)
{
    // Here is the problem
    MessageBox::Show(e->FullPath);
    listBox1->Items->Add(e->FullPath);
    // End problem

    System::Security::Cryptography::MD5 ^ md5offile = MD5CryptoServiceProvider::Create();
    array<Byte>^ hashValue;
    FileStream^ fs = File::Open(e->FullPath, IO::FileMode::Open, IO::FileAccess::Read, IO::FileShare::ReadWrite);
    fs->Position = 0;
    hashValue = md5offile->ComputeHash(fs);
    PrintByteArray(hashValue);
    fs->Close();
    Application::DoEvents();
} 
```

它会向我发送文件名消息框，但不会将其添加到列表框中。我尝试让它将文件名显示到标签上，但这也不起作用。一旦启动此代码循环，屏幕似乎不会刷新。我在 vb.net 中有这段代码，它确实将文件名添加到列表框中。有人可以告诉我为什么文件名没有添加到列表框中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:34:23.123

两件事情：

1.  您需要保持 FileSystemWatcher 处于活动状态。它很可能会在你现在拥有它的地方被垃圾收集。（创建一个类字段并将其粘贴在那里。）
2.  每当您对 UI 组件执行任何操作时，都需要[调用](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invoke.aspx)UI 线程。

这是 #2 的大致语法（我现在远离编译器，这可能不准确。）

```
void Form1::AddToListBox(String^ filename)
{
    listBox1->Items->Add(filename);
}

void Form1::OnChanged(Object^ source, FileSystemEventArgs^ e)
{
    Action<String^>^ addDelegate = gcnew Action<String^>(this, &Form1::AddToListBox);
    this->Invoke(addDelegate, e->FullPath);
    ...
} 
```

# node.js - Grunt 任务输出然后调用 grunt-notify

> ID：15776168
> 
> 赞同：4
> 
> 时间：2013-04-02T23:17:47.600
> 
> 标签：node.js, gruntjs, compass-sass, grunt-notify

Grunt 通知：[https](https://github.com/dylang/grunt-notify) ://github.com/dylang/grunt-notify很棒。但是，它似乎有点有限。据我所知，我所有的消息都需要预先生成。所以第一个问题是如何生成通知？

接下来，似乎 grunt notify 会根据某些任务的错误或成功触发。我猜基于标准输入/输出/错误？这个问题的问题是如果某些任务不使用这些。如果有编译错误，grunt compass 不使用 stderr。那么当出现错误时如何运行 grunt notify 呢？这就引出了下一个问题。如何从 grunt 任务中获取控制台输出或标准错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T07:46:44.253

首先，使用[咆哮](https://github.com/visionmedia/node-growl)。它易于使用且灵活。要安装**咆哮**：

```
npm install growl --save-dev 
```

然后你需要[挂钩](http://gruntjs.com/api/grunt.util#grunt.util.hooker)到进程的 stderr/out 流。这样，您可以在每次新消息到达 stderr/out 流时创建通知。

这就是我创建的。我制作了一个 CommonJs 模块，该模块将钩子添加到：

*   `grunt.fail.warn()`,`grunt.fail.fatal()`
*   `grunt.log.warn()`,`grunt.log.error()`
*   `grunt.warn()`
*   `process.stderr.write()`
*   `process.stdout.write()`（错误行）
*   （孩子）`process.stderr.write()`
*   （孩子）`process.stdout.write()`（错误行）

它或多或少地工作，但它可能需要一些调整。

**任务/lib/notify.js**

```
(function (module) {
    var grunt = require('grunt'),
        growl = require('growl'),
        Buffer = require('buffer').Buffer;

    function notify(obj, title) {
        if (obj) {
            var message = Buffer.isBuffer(obj) ? obj.toString() : (obj.message || obj);
            var msg = grunt.log.uncolor(message);

            if (msg.length > 0) {
                growl(msg, {
                    title: title,
                    image: 'Console'
                });
            }
        }
    }

// add a hook to grunt.fail.warn(), grunt.fail.fatal()
    ['warn', 'fatal'].forEach(function (level) {
        grunt.util.hooker.hook(grunt.fail, level, function(obj) {
            notify(obj);
        });
    });

// add a hook to grunt.log.warn(), grunt.log.error()
    ['warn', 'error'].forEach(function (level) {
        grunt.util.hooker.hook(grunt.log, level, function(obj) {
            notify(obj, level);
        });
    });

// add a hook to grunt.warn()
    grunt.util.hooker.hook(grunt, 'warn', function(obj) {
        notify(obj, 'warn');
    });

// add a hook to process.stderr.write()
    grunt.util.hooker.hook(process.stderr, 'write', function(obj) {
        var messages = grunt.log.uncolor((Buffer.isBuffer(obj) ? obj.toString() : (obj.message || obj))).split('\n');
        messages.forEach(function (message) {
            notify(message, 'stderr');
        });
    });

// add a hook to process.stdout.write() (only error lines)
    grunt.util.hooker.hook(process.stdout, 'write', function(obj) {
        var messages = grunt.log.uncolor((Buffer.isBuffer(obj) ? obj.toString() : (obj.message || obj))).split('\n');
        messages.forEach(function (message) {
            if (message && message.indexOf('error ') > -1) {
                notify(message, 'stdout');
            }
        });
    });

// add a hook to child process stdout/stderr write() (only error lines)
    grunt.util.hooker.hook(grunt.util, 'spawn', {
        post: function(child) {
            child.stderr.on('data', function (data) {
                var messages = grunt.log.uncolor(data.toString()).split('\n');
                messages.forEach(function (message) {
                    notify(message, 'stderr');
                });
            });
            child.stdout.on('data', function (data) {
                var messages = grunt.log.uncolor(data.toString()).split('\n');
                messages.forEach(function (message) {
                    if (message && message.indexOf('error ') > -1) {
                        notify(message, 'stdout');
                    }
                });
            });
        }
    });
}) (module); 
```

然后你需要在你的**Gruntfile.js**中包含一个`require`声明：

```
module.exports = function (grunt) {

    grunt.initConfig({
       ...
    });
    require('./tasks/lib/notify');

    ...
}; 
```

PS 我已将文件放在 中`tasks/lib/notify.js`，但请随意将其放在其他位置。

# opencv - detectMultiScale中的参数scaleFactor如何影响人脸检测？

> ID：15776170
> 
> 赞同：4
> 
> 时间：2013-04-02T23:17:51.240
> 
> 标签：opencv

我正在尝试[http://docs.opencv.org/2.4.4-beta/doc/tutorials/introduction/desktop_java/java_dev_intro.html中的示例的细微变化](http://docs.opencv.org/2.4.4-beta/doc/tutorials/introduction/desktop_java/java_dev_intro.html)

```
 CascadeClassifier faceDetector = new CascadeClassifier("/haarcascade_frontalface_default.xml");
    Mat image = Highgui.imread(originalFile.getAbsolutePath());
    MatOfRect faceDetections = new MatOfRect();
    double w = ((double)originalCrop.getWidth());
    double h = ((double)originalCrop.getHeight());
    faceDetector.detectMultiScale(image, faceDetections, 3, 1, 
                   Objdetect.CASCADE_DO_CANNY_PRUNING , new Size(w/16, h/16), new Size(w/2, h/2)); 
```

来自 API： scaleFactor – 指定在每个图像比例下图像尺寸减小多少的参数。

更改 scaleFactor 会更改检测到的内容。例如，对于以下图像： http: [//graphics8.nytimes.com/images/2013/04/02/world/MOSCOW/MOSCOW-articleLarge-v2.jpg](http://graphics8.nytimes.com/images/2013/04/02/world/MOSCOW/MOSCOW-articleLarge-v2.jpg)

scaleFactor of 3 --> Gorbachev 的脸未被检测到
scaleFactor of 2 --> Gorbachev 的脸被检测到两次（一个较大的矩形包含一个较小的矩形）
scaleFactor of 1.01 ---> Gorbachev 的脸被检测到一次

这究竟是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T15:14:38.890

在[opencv 论坛上](http://answers.opencv.org/question/10654/how-does-the-parameter-scalefactor-in/?answer=10703#post-id-10703)回答：

> 基本上，比例因子用于创建比例金字塔。更多解释可以在[这里](https://sites.google.com/site/5kk73gpu2012/assignment/viola-jones-face-detection#TOC-Image-Pyramid)找到。简而言之。您的模型在训练期间定义了固定大小。这意味着如果出现这种大小的人脸，就会在图像中检测到。但是，通过重新缩放输入图像，您可以将较大的人脸调整为较小的人脸，使其可被算法检测到。使用一小步来调整大小，例如 1.05，这意味着您将大小减小 5%，您增加了找到与模型匹配大小以进行检测的机会。

# c - C 未定义的引用 - 不是名称修饰

> ID：15776172
> 
> 赞同：0
> 
> 时间：2013-04-02T23:17:58.923
> 
> 标签：c, compilation, linker, opencl

我有一个带有源文件的项目（每个函数也有一个.h）：

*   test_functions.c
    *   函数1.c
    *   函数2.c
    *   函数3.c
    *   func4.c
    *   func5.c

我得到一个未定义的引用，`test_functions.c`用于`func3.c`.

到目前为止的步骤：

*   `make VERBOSE=1`显示 func3.c 的构建和 func3.co 的链接
*   `nm func3.c.o`显示符号已定义
*   `readelf -s func3.c.o`还定义了显示符号
*   `make VERBOSE=1`显示正在使用 gcc，而不是名称修改问题

这就是它变得有趣的地方，我疯狂并删除了`func3.c`重新编译，现在我得到了未定义的引用`func3`（显然），现在还有一个未定义的引用`func2`!! 然而我之前已经用那个函数编译过！

如果我添加`func3.c`回源代码，请注释掉对`func3()`我可以调用的函数调用`func2()`......我完全不知所措。

* * *

要求编译：

```
Scanning dependencies of target test_opencl_functions
make[2]: Leaving directory `/home/constantin/workspace/durp/tests/release_arm'
make -f CMakeFiles/test_opencl_functions.dir/build.make CMakeFiles/test_opencl_functions.dir/build
make[2]: Entering directory `/home/constantin/workspace/durp/tests/release_arm'
/usr/bin/cmake -E cmake_progress_report /home/constantin/workspace/durp/tests/release_arm/CMakeFiles 14
[ 53%] Building C object CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclpyramid.c.o
/usr/bin/arm-linux-gnueabi-gcc-4.5   -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -I/home/constantin/workspace/durp/tests/../PanasonicCameraLib -I/home/constantin/workspace/durp/tests/../linux_arm_tool/include    -o CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclpyramid.c.o   -c /home/constantin/workspace/durp/tests/src/opencl/opencl_functions/openclpyramid.c
/usr/bin/cmake -E cmake_progress_report /home/constantin/workspace/durp/tests/release_arm/CMakeFiles 15
[ 57%] Building C object CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclimagewarp.c.o
/usr/bin/arm-linux-gnueabi-gcc-4.5   -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -I/home/constantin/workspace/durp/tests/../PanasonicCameraLib -I/home/constantin/workspace/durp/tests/../linux_arm_tool/include    -o CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclimagewarp.c.o   -c /home/constantin/workspace/durp/tests/src/opencl/opencl_functions/openclimagewarp.c
/usr/bin/cmake -E cmake_progress_report /home/constantin/workspace/durp/tests/release_arm/CMakeFiles 16
[ 61%] Building C object CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/opencl_utilities.c.o
/usr/bin/arm-linux-gnueabi-gcc-4.5   -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -I/home/constantin/workspace/durp/tests/../PanasonicCameraLib -I/home/constantin/workspace/durp/tests/../linux_arm_tool/include    -o CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/opencl_utilities.c.o   -c /home/constantin/workspace/durp/tests/src/opencl/opencl_functions/opencl_utilities.c
/usr/bin/cmake -E cmake_progress_report /home/constantin/workspace/durp/tests/release_arm/CMakeFiles 17
[ 65%] Building C object CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclbackgroundsub.c.o
/usr/bin/arm-linux-gnueabi-gcc-4.5   -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -I/home/constantin/workspace/durp/tests/../PanasonicCameraLib -I/home/constantin/workspace/durp/tests/../linux_arm_tool/include    -o CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclbackgroundsub.c.o   -c /home/constantin/workspace/durp/tests/src/opencl/opencl_functions/openclbackgroundsub.c
/usr/bin/cmake -E cmake_progress_report /home/constantin/workspace/durp/tests/release_arm/CMakeFiles 18
[ 69%] Building C object CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclconvolution.c.o
/usr/bin/arm-linux-gnueabi-gcc-4.5   -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -I/home/constantin/workspace/durp/tests/../PanasonicCameraLib -I/home/constantin/workspace/durp/tests/../linux_arm_tool/include    -o CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclconvolution.c.o   -c /home/constantin/workspace/durp/tests/src/opencl/opencl_functions/openclconvolution.c
/usr/bin/cmake -E cmake_progress_report /home/constantin/workspace/durp/tests/release_arm/CMakeFiles 19
[ 73%] Building C object CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclrgbtogray.c.o
/usr/bin/arm-linux-gnueabi-gcc-4.5   -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -I/home/constantin/workspace/durp/tests/../PanasonicCameraLib -I/home/constantin/workspace/durp/tests/../linux_arm_tool/include    -o CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclrgbtogray.c.o   -c /home/constantin/workspace/durp/tests/src/opencl/opencl_functions/openclrgbtogray.c
/usr/bin/cmake -E cmake_progress_report /home/constantin/workspace/durp/tests/release_arm/CMakeFiles 20
[ 76%] Building C object CMakeFiles/test_opencl_functions.dir/src/opencl/test_functions.c.o
/usr/bin/arm-linux-gnueabi-gcc-4.5   -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -I/home/constantin/workspace/durp/tests/../PanasonicCameraLib -I/home/constantin/workspace/durp/tests/../linux_arm_tool/include    -o CMakeFiles/test_opencl_functions.dir/src/opencl/test_functions.c.o   -c /home/constantin/workspace/durp/tests/src/opencl/test_functions.c
Linking C executable test_opencl_functions
/usr/bin/cmake -E cmake_link_script CMakeFiles/test_opencl_functions.dir/link.txt --verbose=1
/usr/bin/arm-linux-gnueabi-gcc-4.5   -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16 -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi -mfpu=vfpv3-d16  -Wl,--fix-cortex-a8 -Wl,--no-undefined -Wl,--gc-sections -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now -Wl,--fix-cortex-a8 -Wl,--no-undefined -Wl,--gc-sections -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now -Wl,-z,nocopyreloc -Wl,-rpath-link,/home/constantin/workspace/durp/tests/../linux_arm_tool/lib,-rpath-link,/usr/arm-linux-gnueabi/lib,-rpath-link CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclpyramid.c.o CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclimagewarp.c.o CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/opencl_utilities.c.o CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclbackgroundsub.c.o CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclconvolution.c.o CMakeFiles/test_opencl_functions.dir/src/opencl/opencl_functions/openclrgbtogray.c.o CMakeFiles/test_opencl_functions.dir/src/opencl/test_functions.c.o  -o test_opencl_functions  -L/home/constantin/workspace/durp/tests/../linux_arm_tool/lib  -L/home/constantin/workspace/durp/CarmaDev/cuda/lib -rdynamic -lPanasonicCameraLib -lm -lOpenCL -lGAL 
CMakeFiles/test_opencl_functions.dir/src/opencl/test_functions.c.o: In function `TestPyramid':
test_functions.c:(.text+0x89c): undefined reference to `opencl_pyramid' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:55:31.457

这是经典的 PEBCAK。如果您仔细查看编译行，就会发现`rplink-path`它后面没有路径。我猜 gcc 链接器将下一个目标文件作为参数附加到`rplink-path`.

# c++ - 如何在二叉树遍历C ++的末尾添加一个新行

> ID：15776173
> 
> 赞同：0
> 
> 时间：2013-04-02T23:18:00.897
> 
> 标签：c++, recursion, binary-search-tree

我写了一个二叉搜索树类，它有一个递归函数，可以按升序打印出所有元素。

```
template <typename T>
void BST<T>::printInOrder(BSTNode *t) const
{
    if( t == NULL ){
        return;
    }
    printInOrder( t->left );
    cout << t->element << " ";
    printInOrder( t-> right );
    cout << "\n"; // this is not correct 
} 
```

一旦读取了最大值，我正在尝试添加一个新行。我怎样才能做到这一点？在其当前状态下，该函数仅打印 n 个新行，其中 n 是树中的节点数。

**注意：**这适用于规定在函数内调用换行符并且函数本身是递归的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:24:56.483

*   函数中添加了换行符
*   函数必须是递归的

奇怪的要求，但鉴于此，这是一种方法：

```
template <typename T>
void BST<T>::printInOrder(BSTNode *t, bool addNewline) const
{
    if( t == NULL ){
        return;
    }
    printInOrder( t->left, false );
    cout << t->element << " ";
    printInOrder( t-> right, false );
    if( addNewLine )
        cout << "\n";
}

// ...somewhere else...
bst.printInOrder(node, true); 
```

但实际上，您应该使用两个函数，或者自己添加换行符：

```
bst.printInOrder(node);
cout << "\n"; 
```

# vim - VIM 中没有缓冲区 3？

> ID：15776180
> 
> 赞同：1
> 
> 时间：2013-04-02T23:18:52.007
> 
> 标签：vim, minibufexplorer

所以我打开VIM：

```
$ vim 
```

然后我打开 3 个文件：

```
:e file1.txt
:e file2.txt
:e file3.txt 
```

正如预期的那样，有 3 个缓冲区，但它们的编号如下：

*   1：文件1.txt
*   2：文件2.txt
*   4：文件4.txt

有任何想法吗？

* * *

```
$ vim --version
VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Mar 25 2013 19:55:22)
Included patches: 1-875
Compiled by ArchLinux
Huge version with GTK2 GUI.  Features included (+) or not (-):
+arabic          +file_in_path    +mouse_sgr       +tag_binary
+autocmd         +find_in_path    -mouse_sysmouse  +tag_old_static
+balloon_eval    +float           +mouse_urxvt     -tag_any_white
+browse          +folding         +mouse_xterm     -tcl
++builtin_terms  -footer          +multi_byte      +terminfo
+byte_offset     +fork()          +multi_lang      +termresponse
+cindent         +gettext         -mzscheme        +textobjects
+clientserver    -hangul_input    +netbeans_intg   +title
+clipboard       +iconv           +path_extra      +toolbar
+cmdline_compl   +insert_expand   +perl            +user_commands
+cmdline_hist    +jumplist        +persistent_undo +vertsplit
+cmdline_info    +keymap          +postscript      +virtualedit
+comments        +langmap         +printer         +visual
+conceal         +libcall         +profile         +visualextra
+cryptv          +linebreak       +python          +viminfo
+cscope          +lispindent      -python3         +vreplace
+cursorbind      +listcmds        +quickfix        +wildignore
+cursorshape     +localmap        +reltime         +wildmenu
+dialog_con_gui  +lua             +rightleft       +windows
+diff            +menu            +ruby            +writebackup
+digraphs        +mksession       +scrollbind      +X11
+dnd             +modify_fname    +signs           -xfontset
-ebcdic          +mouse           +smartindent     +xim
+emacs_tags      +mouseshape      -sniff           +xsmp_interact
+eval            +mouse_dec       +startuptime     +xterm_clipboard
+ex_extra        +mouse_gpm       +statusline      -xterm_save
+extra_search    -mouse_jsbterm   -sun_workshop    
+farsi           +mouse_netterm   +syntax          
   system vimrc file: "/etc/vimrc"
     user vimrc file: "$HOME/.vimrc"
      user exrc file: "$HOME/.exrc"
  system gvimrc file: "/etc/gvimrc"
    user gvimrc file: "$HOME/.gvimrc"
    system menu file: "$VIMRUNTIME/menu.vim"
  fall-back for $VIM: "/usr/share/vim"
Compilation: gcc -c -I. -Iproto -DHAVE_CONFIG_H -DFEAT_GUI_GTK  -pthread -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/pango-1.0 -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pixman-1 -I/usr/include/libdrm -I/usr/include/libpng15 -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/libpng15 -I/usr/include/pango-1.0 -I/usr/include/harfbuzz -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/freetype2  -I/usr/local/include  -march=x86-64 -mtune=generic -O2 -pipe -fstack-protector --param=ssp-buffer-size=4  -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1      
Linking: gcc   -L. -Wl,-O1,--sort-common,--as-needed,-z,relro -fstack-protector -rdynamic -Wl,-export-dynamic  -Wl,-E -Wl,-rpath,/usr/lib/perl5/core_perl/CORE  -Wl,-O1,--sort-common,--as-needed,-z,relro -L/usr/local/lib -Wl,--as-needed -o vim   -lgtk-x11-2.0 -lgdk-x11-2.0 -lpangocairo-1.0 -latk-1.0 -lcairo -lgdk_pixbuf-2.0 -lgio-2.0 -lpangoft2-1.0 -lpango-1.0 -lgobject-2.0 -lglib-2.0 -lfreetype -lfontconfig  -lSM -lICE -lXt -lX11 -lXdmcp -lSM -lICE  -lm -lncurses -lnsl   -lacl -lattr -lgpm -ldl  -L/usr/lib -llua -Wl,-E -Wl,-rpath,/usr/lib/perl5/core_perl/CORE -Wl,-O1,--sort-common,--as-needed,-z,relro -fstack-protector -L/usr/local/lib  -L/usr/lib/perl5/core_perl/CORE -lperl -lnsl -ldl -lm -lcrypt -lutil -lpthread -lc -L/usr/lib/python2.7/config -lpython2.7 -lpthread -ldl -lutil -lm -Xlinker -export-dynamic   -lruby -lpthread -lrt -ldl -lcrypt -lm  -L/usr/lib 
```

和：

```
$ cat ~/.vimrc
syntax on
set number
set mouse=a
call pathogen#infect()
filetype plugin indent on 
```

在 VIM 上：

```
:ls!
  1      "file1.txt"                    line 1
  2 #    "file2.txt"                    line 1
  3u a-  "-MiniBufExplorer-"            line 0
  4 %a   "file3.txt"                    line 1
Press ENTER or type command to continue 
```

* * *

**原因**：这个“问题”是由于 MiniBufExplorer 在`:e file2.txt`.

当 vim 启动时 MiniBufExplorer 没有打开，当 I 时也没有`:e file1.txt`。但显然，当打开 2 个或更多文件时，它会自动打开，占用下一个缓冲区（因此占用缓冲区 3）。

* * *

**解决方案**：使用不会用完缓冲区的其他插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:18:05.880

所以你打开了**4 个**缓冲区，关闭了第 3 个缓冲区，然后问*为什么*你得到 3 个缓冲区而没有 3 号缓冲区？

缓冲区在创建时编号，并且这些数字*永远不会*改变：如果创建缓冲区 1、2、3 和 4 并删除缓冲区 3，则会得到 3 个缓冲区：1、2 和 4。

现在似乎是阅读的最佳时机`:h buffers`。

# jquery - jquery照片数组容易褪色

> ID：15776181
> 
> 赞同：0
> 
> 时间：2013-04-02T23:19:06.977
> 
> 标签：jquery, arrays, fadein, fadeout, photos

我有一个带有多个背景图像的 div。我还有一个脚本可以每隔 X 秒更改一次这些图像。我只想添加一个简单的淡入淡出过渡，而不是单独使用此脚本获得的即时更改。我可以添加一行简单的代码来完成这项工作吗？非常感谢您的帮助。我是初学者！继承人的脚本：

```
<script  type="text/javascript">
var now = 0;
var int = self.setInterval("changeBG()", 2000);
var array = ["jar1.jpg", "field.jpg",];

function changeBG(){
    //array of backgrounds
    now = (now+1) % array.length ;
    $('#maincontent').css('background-image', 'url("photos/' + array[now] + '")');

}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:28:29.703

大卫！

在另一个问题中看到您的评论，我想我不妨看看。以下链接描述了 jQuery 中一种“简单”的交叉淡入淡出方法，也许这可以帮助您？

[http://www.simonbattersby.com/blog/simple-jquery-image-crossfade/](http://www.simonbattersby.com/blog/simple-jquery-image-crossfade/)

祝你好运

# android - 带有 retainInstance = true 的片段，但调用了 onCreate

> ID：15776182
> 
> 赞同：1
> 
> 时间：2013-04-02T23:19:08.430
> 
> 标签：android, android-fragments

我有一个包含片段的布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <fragment
        android:id="@+id/ID"
        class="com.teovald.app.MyFragment"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <include
        android:id="@+id/toolbar"
        layout="@layout/toolbar" />

</FrameLayout> 
```

我在这个片段的 onCreate 方法中设置了这个使用 setRetainInstance(true) ：

```
 public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setRetainInstance(true);
    ....} 
```

最后，我还在其活动 onCreate 中恢复了对该片段的引用：

```
 public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    FragmentManager fragmentManager = getSupportFragmentManager();
    mFragment = (MyFragment)  fragmentManager.findFragmentById(R.id.ID);    
    ...
} 
```

但是，每次我旋转我的设备时，都会调用活动的 onCreate ，然后也会调用片段的 onCreate ！由于我将 setRetainInstance 设置为 true，因此它不应该发生。这种行为有原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-14T20:34:03.090

我最近遇到了这个问题，并且与它斗争了几个小时，直到我发现在包含 onSaveInstanceState 中保留的非 UI 片段的 Activity 的代码（我从某个第三方库复制的）中没有调用到 super.onSaveInstanceState()

就像这样：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    // Save the mapview state in a separate bundle parameter
    final Bundle mapviewState = new Bundle();
    mMapFragment.onSaveInstanceState(mapviewState);
    outState.putBundle(BUNDLE_STATE_MAPVIEW, mapviewState);
} 
```

所以我添加了丢失的调用，如下所示：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    // Save the mapview state in a separate bundle parameter
    final Bundle mapviewState = new Bundle();
    mMapFragment.onSaveInstanceState(mapviewState);
    outState.putBundle(BUNDLE_STATE_MAPVIEW, mapviewState);
} 
```

现在 onCreate() 不会在保留的片段中调用两次。

我希望这会对某人有所帮助:)

# php - 动态下拉显示基于答案的唯一文本

> ID：15776183
> 
> 赞同：0
> 
> 时间：2013-04-02T23:19:25.227
> 
> 标签：php, javascript, html, magento

我正在使用 Magento 并使用他们的自定义选项功能。我有一些工作代码，但后来我发现当我添加第二个产品时，每个自定义选项的“值”都会增加，因为它只是数据库中分配的自动增量 ID。

我希望 stackoverflow 的优秀人员可以帮助我找到一种方法来显示每个自定义选项的自定义文本。

从这里开始是 Magento 生成的选择：

```
 <select name="options[6]" id="select_6" 
class=" required-entry product-custom-option" title=""
onchange="opConfig.reloadPrice();displayCondition();">
<option value="" >-- Please Select --</option>
<option value="13" >Perfect </option>
<option value="25" >Excellent </option>
<option value="15" >Good </option>
<option value="24" >Poor </option>
<option value="17" >Broken </option></select> 
```

这是我当前的 Javascript

```
 <script language="javascript">
   function displayCondition() {
condition = new Array("Please Select a Condition.",
"<b>Perfect:</b> Text to explain perfect condition!",
"<b>Excellent:</b> Text to explain excellent condition!",
"<b>Good:</b> Text to explain good condition!",
"<b>Poor:</b> Text to explain poor condition!",
"<b>Broken:</b> Text to explain broken condition!"); 
     var getsel = document.getElementById('select_<?php echo $_option->getId();?>').price;
     document.getElementById("divId").innerHTML = condition[getsel];
   }
</script> 
```

最后是要显示的 div

```
 <div id="divId" name="divName" style="width:100%; text-align:center; color:#FFFFFF; margin-top:25px;"></div> 
```

我愿意接受所有建议，甚至放弃它以获得更好的方法。请记住，就每个选项而言，我不能改变太多，生成的代码中显示的是什么。我找不到合适的文件来添加其他选项（即名称或标题）谢谢

* * *

开始尝试这个，我觉得它很有希望。但有些东西是不对的，因为它仍然没有显示任何东西。

```
 <script language="javascript">

   function showConditions(sel){   
locations =[ "", /*this remains blank for first selection in drop-down list*/ 
/*option 1*/                 
"<b>Perfect</b> Blah Blah ",
/*option 2*/                
"<b>Excellent</b> Blah Blah ",
/*option 3*/                 
"<b>Good</b> Blah Blah ",
/*option 4*/                 
"<b>Poor</b> Blah Blah",
/*option 5*/                 
"<b>Broken</b> Blah Blah", ];
               srcLocation = locations    [sel.selectedIndex];        
if (srcLocation != undefined && srcLocation != "") {
document.getElementById('divId').innerHTML= srcLocation;   
} 
}
</script> 
```

和

```
onchange="opConfig.reloadPrice();showConditions(this);" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:53:30.470

我在底部玩的代码让它工作了。我有一个额外的`</div>`标签导致它不显示。伍兹！

# jquery - jquery ajax "_method"="delete" 当 dataType:'script' 时给出 GET 404

> ID：15776188
> 
> 赞同：-1
> 
> 时间：2013-04-02T23:19:40.330
> 
> 标签：jquery, ajax, internet-explorer-9

我正在做一个删除 ajax 请求，像这样-

```
jQuery.ajax({
    url: delete_url,
    type:'post', 
    async: true,
    data: {"_method":"delete"},
    success: function(data) {
      alert("success");
    },
    error: function(error) {
      alert("error:" + error.status);
    }
  }); 
```

它在 IE9 上不起作用，我没有在我的日志中看到删除请求被发送到服务器。然而，这真的很奇怪，因为它在 Chrome 上运行良好。当我有“dataType:'script'”时，我在 Chrome 和 IE9 上都收到 404 Not Found GET 错误。我试过使用类型：“DELETE”，不幸的是它在 IE9 上不起作用，但在 Chrome/FF/Safari 上完美。我还尝试在查询字符串中添加 _method=DELETE，但也失败了。任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-04T16:06:05.367

OP写道：

> 找到了解决方案——解决这个问题是 IE9，我将路由更改为通过 POST 删除。

# html - 使用 SASS 进行 HTML 表单验证？

> ID：15776189
> 
> 赞同：1
> 
> 时间：2013-04-02T23:19:41.213
> 
> 标签：html, css, sass

我有一个表单，其中所有输入字段都有一个“必需”和“模式”参数。

我想在输入框的右侧显示一个绿色的小图片，只要输入不是无效的，就可以向用户展示他已经正确填写了。

我想知道是否可以不使用 javascript/jquery 而使用纯 css/sass？

我在想类似的东西

```
if input:invalid{
    .divonrightofinputbox{
    background:url('green.png');
    }
}else{
    .divonrightofinputbox{
    display:none;
    }
} 
```

这对 sass 可行吗？如果可以，怎么办？:)

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T23:41:43.563

Sass 对文档或其形式的状态一无所知。你只需要使用 CSS 提供的东西：

```
input {
    &:required {
        + .div-after-the-input {
            // required styles
        }
    }

    &:invalid, &:out-of-range {
        + .div-after-the-input {
            background: url('invalid.png') no-repeat;
        }
    }

    &:valid, &:in-range {
        + .div-after-the-input {
            display: none;
        }
    }
} 
```

# jquery - jQuery .next 选择器找不到类

> ID：15776192
> 
> 赞同：0
> 
> 时间：2013-04-02T23:19:49.267
> 
> 标签：jquery

我正在使用这个 jQuery 选择下一个列表元素并克隆该类，`.slide-title`然后将其附加到另一个类。

`$('li:visible').next('.slide-title').clone().appendTo('.feat_next');`

这是 HTML 和[jsfiddle](http://jsfiddle.net/peter/JUYSF/3/)如果我从`.next()`函数中删除选择器，它会克隆下一个列表元素并附加它。那么为什么它找不到`.slide-title`类呢？

谢谢

```
<ul id="slider" style="position: relative;">
    <li style="position: absolute; top: 0px; left: 0px; display: block; z-index: 4; opacity: 1;">
        <div class="content_left">
            <p class="slide-date">July 2, 2012</p>
            <h2><a class="slide-title" href="#">3333333333</a></h2>asdfasfasfasdfasdfasdfasdfasfdasfdasfdasfd
            <p class="post-byline">by admin</p>
        </div>
        <div class="img_right"><a href="#"><img src="#"></a>
        </div>
    </li>
    <li style="position: absolute; top: 0px; left: 0px; display: none; z-index: 2; opacity: 0;">
        <div class="content_left">
            <p class="slide-date">April 1, 2013</p>
            <h2><a class="slide-title" href="#">asdfasdfasdf</a></h2>asdfasfasdfasdfasdf
            <p class="post-byline">by admin</p>
        </div>
        <div class="img_right"><a href="#"><img src="#"></a>
        </div>
    </li>
    <li style="position: absolute; top: 0px; left: 0px; display: none; z-index: 1; opacity: 0;">
        <div class="content_left">
            <p class="slide-date">April 2, 2013</p>
            <h2><a class="slide-title" href="#">223234234</a></h2>asdfasfdasfasfasfasdfasdf
            <p class="post-byline">by admin</p>
        </div>
        <div class="img_right"><a href="#"><img src="#"></a>
        </div>
    </li>
</ul>
        <div class="feat_next"><a href="#"></a></div>
        <div class="feat_prev"><a href="#"></a></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:21:57.913

[`.next()`](http://api.jquery.com/next/)将获得下一个必须是`li`. 然后，您可以使用[`.find()`](http://api.jquery.com/find/)来检查元素的后代。

```
$('li:visible').next('li').find('.slide-title').clone().appendTo('.feat_next'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:23:45.820

检查[文档](http://api.jquery.com/next/)。`.next()`只找到被选元素的下一个兄弟。您将需要使用`.find()`来检索您所追求的。

# android - Android：无法沿 EditText 上的文本移动光标

> ID：15776196
> 
> 赞同：1
> 
> 时间：2013-04-02T23:20:15.083
> 
> 标签：android, android-edittext

我有一个多行编辑文本字段。我可以写所有东西，但是当我尝试返回并将光标放在给定位置时，我无法做到。相反，光标会转到文本的开头，并且不再从那里移动。

笔记; 我的文字只有一个很长的“单词”。十六进制字符序列。

提前致谢，

# jquery - 从 jquery mobile 中的 datepicker 中删除清除按钮

> ID：15776197
> 
> 赞同：0
> 
> 时间：2013-04-02T23:20:26.700
> 
> 标签：jquery, css, mobile, datepicker

有谁知道如何删除日期选择器中的清除按钮？我正在使用 jquery mobile 生成它，如下所示：

```
<label for="txtDate">Date:<label id="lblDateVisitVal" class="message"></label>
<input id="txtDate" type="date" data-mini="true"> 
```

无论如何我可以删除角落中显示的清除按钮或将其更改为另一个？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:49:38.513

本机 webkit 日期输入（您似乎正在使用，与标题相反）[**无法**](http://updates.html5rocks.com/2012/08/Quick-FAQs-on-input-type-date-in-Google-Chrome) [设置样式](http://trac.webkit.org/wiki/Styling%20Form%20Controls)。除非你用不同的日期选择器覆盖它，否则你会被默认外观所困扰。

# php - PHP 类不工作“OOP”

> ID：15776201
> 
> 赞同：-1
> 
> 时间：2013-04-02T23:20:56.010
> 
> 标签：php, class

这是我的 include.php：

```
<?php
class cars {
    protected $_car;

    public function __costruct($carName) {
        $this->_car = $carName;

    }

    public function getcarname (){
        return $this->_car;
    }
}?> 
```

这是我的 index.php

```
<?php
require_once 'include.php';

$selling = new cars('Ford');
echo $selling->getcarname();
?> 
```

仍然回声什么都没有！你可以说我是新手，但我知道 php，处理它有点复杂，而且我发现它没有任何意义并且浪费代码，无论如何我还是想学习它，所以我的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T23:23:17.787

你有一个错字，构造函数被调用`__construct`，而不是`__costruct`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:23:30.967

我从未使用过 OOP 但会

```
$selling = new cars; 
```

工作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:24:03.647

构造中的错字。它说构造

# ios - 退出计时器上的 void 方法

> ID：15776204
> 
> 赞同：1
> 
> 时间：2013-04-02T23:21:03.553
> 
> 标签：ios, objective-c, cocoa-touch, nstimer

我有一种与录制视频同时运行的方法。当方法结束时，它会触发一系列其他方法，这些方法会一直持续到录制结束。我希望能够按下一个按钮来提前停止录制，同时也退出该方法。我目前尝试使用的方法是使用 NSTimer 检查录制是否仍在进行，如果没有，它会停止播放音频，并且还应该调用 return 来停止该方法。

```
-(void) method
{
    self.stopTimer = [NSTimer scheduledTimerWithTimeInterval:.05 target:self selector:@selector(checkRecording) userInfo:nil repeats:YES];

    // Stuff happens
}

-(void) checkRecording
{
if (isRecording == NO)
    {
        if (player.playing == YES)
        {
            [player stop];
        }
        return;
    }

} 
```

这会立即停止音频，但该方法会继续运行，直到完成。它不会调用序列中的下一个方法，这是朝着正确方向迈出的一步，但我需要它立即停止。我唯一的理论是，这是因为我没有在我想要停止的实际方法中调用 return 而是在不同的方法中调用，但即使是这种情况，我也不确定如何解决这个问题，因为就我而言知道计时器只能指向其他方法，我不能只告诉它我想要它在我想要停止的方法内部做什么。如果这不是问题，那么我真的不确定为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:15:11.623

> 我唯一的理论是，这是因为我没有在要停止的实际方法中调用 return 而是在不同的方法中调用

你的理论是正确的。`return`结束它所在的函数或方法，仅此而已。它将当前函数的上下文从堆栈中弹出并将执行返回给调用函数。

> 我不太确定如何解决这个问题，因为据我所知，计时器只能指向其他方法，我不能只告诉它我想要它在我想要停止的方法中做什么

我们可以使用对象来存储状态并使用该状态来控制程序的流程。该状态可以不断更新和检查。对于需要取消以响应状态变化的长时间运行的任务，状态必须与任务并行更新。既然您说计时器用于停止音频，但所做的工作`method`却没有，我假设`method`它已经异步执行其长时间运行的任务。

这需要在后台执行一个异步长时间运行的任务（或一系列任务），并有可能取消，与`NSOperation`and`NSOperationQueue`类很好地匹配。

您可以`NSOperation`通过实现方法或块在对象内部执行您的工作。实施您的代码以检查操作是否已在所有适当的时间被取消，并在发生这种情况时立即退出。

下面是一个希望与您的用例匹配的示例。它是在 iOS 应用程序“空应用程序”模板中创建的，所有内容都在应用程序委托中。我们的应用程序委托跟踪做出是否取消决定所需的状态，并安排一个计时器来轮询该状态的更改。如果它确实确定应该取消，它将实际取消工作委托给操作队列及其操作。

```
#import "AppDelegate.h"

@interface AppDelegate ()

@property (nonatomic) BOOL shouldStop; // Analogous to your isRecording variable
@property (nonatomic, strong) NSOperationQueue *operationQueue; // This manages execution of the work we encapsulate into NSOperation objects

@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Typical app delegate stuff
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    // Start our long running method - analogous to method in your example
    [self method];

    return YES;
}

- (void)method
{
    // allocate operation queue and set its concurrent operation count to 1\. this gives us basic ordering of
    // NSOperations. More complex ordering can be done by specifying dependencies on operations.
    self.operationQueue = [[NSOperationQueue alloc] init];
    self.operationQueue.maxConcurrentOperationCount = 1;

    //  We create three NSBlockOperations. They only sleep the thread a little while,
    //  check if they've been cancelled and should stop, and keep doing that for a few seconds.
    //  When they are completed (either through finishing normally or through being cancelled, they
    //  log a message
    NSMutableArray *operations = [NSMutableArray array];
    for (int i = 0; i < 3; i++) {

        //  Block operations allow you to specify their work by providing a block.
        //  You can override NSOperation to provide your own custom implementation
        //  of main, or start, depending. Read the documentation for more details.
        //  The principle will be the same - check whether one should cancel at each
        //  appropriate moment and bail out if so

        NSBlockOperation *operation = [[NSBlockOperation alloc] init];

        //  For the "weak/strong dance" to avoid retain cycles
        __weak NSBlockOperation *weakOperation = operation;

        [operation addExecutionBlock:^{
            //  Weak/strong dance
            NSBlockOperation *strongOperation = weakOperation;

            //  Here is where you'd be doing actual work
            //  Either in a block or in the main / start
            //  method of your own NSOperation subclass.
            //  Instead we sleep for some time, check if
            //  cancelled, bail out if so, and then sleep some more.
            for (int i = 0; i < 300; i++) {
                if ([strongOperation isCancelled]) {
                    return;
                }
                usleep(10000);
            }
        }];

        //  The completion block is called whether the operation is cancelled or not.
        operation.completionBlock = ^{
            //  weak/strong dance again
            NSBlockOperation *strongOperation = weakOperation;
            NSLog(@"Operation completed, %@ cancelled.", [strongOperation isCancelled] ? @"WAS" : @"WAS NOT");
        };

        [operations addObject:operation];
    }

    //  Set up a timer that checks the status of whether we should stop.
    //  This timer will cancel the operations if it determines it should.
    [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(checkShouldKeepGoing:) userInfo:nil repeats:YES];

    //  Use GCD to simulate a stopped recording to observe how the operations react to that.
    //  Comment out to see the usual case.
    double delayInSeconds = 5;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        self.shouldStop = YES;
    });

    //  Add the operations to the operation queue, exeuction will start asynchronously from here.
    [self.operationQueue addOperations:operations waitUntilFinished:NO];
}

//  If we should stop, cancel the operations in the queue.
- (void)checkShouldKeepGoing:(NSTimer *)timer
{
    if (self.shouldStop) {
        NSLog(@"SHOULD STOP");
        [timer invalidate];
        [self.operationQueue cancelAllOperations];
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:18:31.040

如果计时器有效，您可以使其无效（停止计时器）。

我不确定所有检查是否真的有必要（最后一行），但我目前是这样做的：

```
if ( myTimer != nil && [myTimer isValid] )
{
    [myTimer invalidate];
    myTimer = nil;
} 
```

编辑：

```
if ( [myTimer isValid] )
{
    [myTimer invalidate];
    myTimer = nil;
} 
```

# ios - 如何将 TSPopover 合并到我的应用程序中，以免导致运行时崩溃？

> ID：15776207
> 
> 赞同：0
> 
> 时间：2013-04-02T23:21:16.493
> 
> 标签：ios, xcode4.6, uipopover

我正在尝试将 TSPopover 合并到我的 iPad 应用程序中（XCode 4.6，带有 UITabBarController 的 Storyboards，iOS 6.2）。我已将 TSPopover 代码复制到我的应用程序中，并选择了一个控制器作为开始。在一个场景中，我有一个圆圈中的小“i”供用户在需要帮助时点击（它最终会被本地化，因此需要帮助）。所以，我在**-viewDidLoad**中有这段代码：

```
 if(tfShopOpens.text.length == 0 || shopCloses.text.length == 0)  {
/*  (below code copied from the TSPopover demo code)
 UIButton *topButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];

 [topButton addTarget:self action:@selector(showPopover:forEvent:) forControlEvents:UIControlEventTouchUpInside];

 topButton.frame = CGRectMake(10,10, 300, 30);
 [topButton setTitle:@"button" forState:UIControlStateNormal];
 topButton.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
 [self.view addSubview:topButton];
 */

 [boHelpStoreHours addTarget:self action:@selector(showPopover:forEvent:) forControlEvents:UIControlEventTouchUpInside]; 
```

这是来自 .h 文件：

```
- (IBAction)bHelpStoreHours:(UIButton *)sender;
@property (strong, nonatomic) IBOutlet UIButton *boHelpStoreHours; 
```

这是来自连接检查器：

![在此处输入图像描述](https://i.stack.imgur.com/kocY2.png)

这是我点击此特定按钮时遇到的错误：

> 2013-04-02 15:49:48.016 saori[5495:c07]-[PreferencesViewController bHelpStoreHours:]：无法识别的选择器发送到实例 0x8a6c510 2013-04-02 15:49:48.019 saori[5495:c07] *** 终止应用程序uncaught exception 'NSInvalidArgumentException', reason: '-[PreferencesViewController bHelpStoreHours:]: unrecognized selector sent to instance 0x8a6c510' *** First throw call stack: (0x26fc012 0x19eae7e 0x27874bd 0x26ebbbc 0x26eb94e 0x19fe705 0x9322c0 0x932258 0x9f3021 0x9f357f 0x9f26e8 0x961cef 0x961f02 0x93fd4a 0x931698 0x2b79df9 0x2b79ad0 0x2671bf5 0x2671962 0x26a2bb6 0x26a1f44 0x26a1e1b 0x2b787e3 0x2b78668 0x92effc 0x222d 0x2155 0x1) libc++abi.dylib：终止调用抛出异常

我遇到的问题是我不确定一切都正确连接以使这项工作。TSPopover 代码中没有任何注释可以指导我，所以我猜测需要什么。我看过谷歌，所以......什么都没有！是什么导致运行时崩溃？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:18:54.867

您的`bHelpStoresHours:`方法可能不存在于您的`@implementation`. 确保您已在`PreferencesViewController.m`文件中定义方法。

# google-apps-script - Google Apps 脚本从单元格复制到新行

> ID：15776211
> 
> 赞同：0
> 
> 时间：2013-04-02T23:21:53.377
> 
> 标签：google-apps-script

我的 Google 电子表格中有两张表格。

1.  主跟踪
2.  每日追踪

Master Tracking 从其他跟踪表中提取信息，并更新单元格 M7 中每个驾驶员驾驶的英里数。

我想使用日期（A 列）和行驶里程数（B 列）设置每日跟踪。

我想编写一个 Google Apps 脚本，它将数据从 Master Tracking!M7 复制到 Daily Tracking（B 列），但每次运行脚本时都会复制到一个 NEW ROW 中。我计划使用触发器让它在每个工作日结束时运行。

我有这个到现在，但它不起作用。

```
function copyFunction() {

  var inputRange = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Master Tracking").getRange("M7:M7");

  var inputValues = inputRange.getValues();

  var outputRange = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Daily Tracking").getRange("B:B").getLastRow();

  outputRange.setValue(inputValues);
} 
```

我想不通。我可以将其粘贴到一个特定的单元格中，但我不知道如何将其粘贴到新行中。也许 getLastRow 会起作用。我不知道。

另外，如何在每日跟踪的 A 列中添加时间戳？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:07:05.537

没有测试它，但应该可以工作：（见代码中的注释）

```
function copyFunction() {
  var inputRange = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Master Tracking").getRange("M7");
  var inputValue = inputRange.getValue();// use simple getValue without S, get a simple value
  var last = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Daily Tracking").getLastRow();// get the last row on this sheet
  var outputRange = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Daily Tracking").getRange(last+1,1,1,2);// getRange col A & B +1 after last row
  outputRange.setValues([[Utilities.formatDate(new Date(), Session.getTimeZone(), 'MM-dd-yyyy'),inputValue]]);// date string in col A and value in col B in a 2D array (note the S in setValues) - 
} 
```

# c - microplaze 应用中的 lwip 缓冲液

> ID：15776212
> 
> 赞同：0
> 
> 时间：2013-04-02T23:21:53.947
> 
> 标签：c, ethernet, lwip, microblaze

只需我通过在接收回调函数中检查我的 pbuff 的有效负载来检查并将数据发送到我的 microplaze，它可以在我可以看到 microplaze 回显我的消息但当我尝试将它们从 mmicroplaze 打印到终端时工作（使用 printf()在c代码中）这里发生了一些奇怪的事情是打印输出：

```
sent "a"  printed: "a";
sent "aa"  printed: "aa";
sent "aaa"  printed: "aaa";
sent "aaaa" printed: "aaaa
|Ì¥ìk…" 
```

那是什么，为什么，它发生在超过 3 个字符的任何地方.. 为什么会这样？有任何想法吗 ？

我正在使用带有 16 位总线和 4mb ram 的 microblaze 处理器的 sprtan3a。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T14:33:51.430

发生这种情况是因为字符没有终止

# html - 通过 knockoutjs 将 HTML 标记属性设置为包含 HTML 实体的值

> ID：15776218
> 
> 赞同：2
> 
> 时间：2013-04-02T23:22:18.983
> 
> 标签：html, knockout.js, html-entities

如何通过 knockoutjs 设置 HTML 标签的 title 属性，以使标签内容中的任何 HTML 实体都被评估和显示（即不转义）？

例子：

```
<div data-bind="attr: { title: titleObservable }"></div> 
```

在上面的例子中，如果 titleObservable 包含一个 HTML 实体，它不会被渲染，而是显示实体名称。请参阅此[小提琴](http://jsfiddle.net/TMSHB/1/)以获取工作示例。请注意，当您将鼠标悬停在 div 上时，标题文本包含 ' 而不是撇号。

我知道在使用 knockoutjs 文本绑定设置 HTML 标记的内容时，出于安全原因，HTML 会被转义（请参阅[此线程](https://stackoverflow.com/questions/11225583/html-entities-with-knockout)）。我假设这是我的标题属性中的实体发生的情况。我也知道我可以将撇号直接嵌入到 title 属性中，但我想知道是否有一种方法可以使用 HTML 实体执行此操作（由于我正在处理的项目存在某些限制）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T00:14:27.580

在 Javascript（Knockout 绑定使用）中使用 HTML 实体的唯一方法是通过`innerHTML`. 对 DOM 的所有其他访问都使用 UTF-8 文本。

我建议您更新代码以在模型中使用纯文本，并且仅在实际 HTML 文档中使用 HTML 实体。但是，如果您不能这样做，您可以使用自定义绑定处理程序，在设置 DOM 属性之前将其从 HTML 转换为文本。这是我刚刚制作的一个设置标题。

```
ko.bindingHandlers.myTitle = {
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        var d = document.createElement('div');
        d.innerHTML = value;
        element.title = d.innerText;
    }
}; 
```

示例：http: [//jsfiddle.net/mbest/TMSHB/2/](http://jsfiddle.net/mbest/TMSHB/2/)

# html - 如何从 http 响应中知道文件类型和名称？

> ID：15776223
> 
> 赞同：-3
> 
> 时间：2013-04-02T23:23:06.583
> 
> 标签：html

现在我可以弄清楚是通过'Content-Disposition'和'Content-Type'！是否有关于从 http 响应中了解文件类型和名称的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:39:53.573

HTTP 响应是一种资源，而不是文件，因此它既没有文件类型也没有文件名。

对于某些资源，服务器使用相应的文件来创建它，例如大多数图像。在这种情况下，资源的名称通常与文件的名称相同，并且内容类型是从文件类型派生的。

对于某些资源，服务器会在内容处置标头中返回一个文件名。这可以与服务器上的文件名相同，但也可以是上传文件时浏览器发送给服务器的文件名，数据以不同的文件名存储在服务器上服务器，或者可能以完全不同的方式存储。

一些资源是由服务器在需要时创建的，通常是通过运行脚本源或调用一些已编译的代码来生成它。在这种情况下，资源的名称可以对应服务器上的文件，但返回的不是文件，而是处理文件的结果。

# javascript - jQuery手风琴（）不工作

> ID：15776225
> 
> 赞同：1
> 
> 时间：2013-04-02T23:23:15.327
> 
> 标签：javascript, jquery, html, jquery-ui

我的 jQuery 手风琴（）不能处理我的 HTML 段落。我哪里做错了？

**简单的.html**

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
    </head>
    <body>
        <div id="mainContent">
            <h1>This is an According Example</h1>           
        </div>
        <div id="accordion">
            <h3><a href="#">Heading for first sentence</a></h3>
            <div>
            <p>This is the first sentence.</p>
            </div>          
            <h3><a href="#">Heading for second sentence</a></h3>            
            <div>
            <p>This is the second sentence.</p>
            </div>
            <h3><a href="#">Heading for third sentence</a></h3>
            <div>
            <p>This is the third sentence.</p>
            </div>
        </div>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
        <script src="myscript.js"></script>
    </body>
</html> 
```

**myscript.js**

```
window.onload = function(){
    $("#accordion").accordion();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:29:47.860

两个问题：你没有包含 jQuery UI CSS，你的脚本也必须包含在你的`<head>`. 用这个：

```
<head>
  <title>My Title</title>
  <link href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css">
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript" src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <script>$(document).ready(function(){ $( "#accordion" ).accordion(); });</script>
</head> 
```

并从页面底部删除脚本。

小提琴： http: [//jsfiddle.net/cxJW6/](http://jsfiddle.net/cxJW6/)（这并不意味着什么，因为你的问题是在你的页面中包含 jQuery+jQuery UI）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T23:31:57.790

用这个...

```
<!DOCTYPE html>
<html>
    <head>
    <title></title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
    <script src="myscript.js"></script>
</head>
<body>
    <div id="mainContent">
        <h1>This is an According Example</h1>           
    </div>
    <div id="accordion">
        <h3><a href="#">Heading for first sentence</a></h3>
        <div>
        <p>This is the first sentence.</p>
        </div>          
        <h3><a href="#">Heading for second sentence</a></h3>            
        <div>
        <p>This is the second sentence.</p>
        </div>
        <h3><a href="#">Heading for third sentence</a></h3>
        <div>
        <p>This is the third sentence.</p>
        </div>
    </div>
</body> 
```

并将其放在 head 标签中

```
<script>
    $(document).on('ready', function(){
        $("#accordion").accordion();
    });
</script> 
```

看看这个[jsFiddle 例子](http://jsfiddle.net/z6MJN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:31:47.923

```
$(document).ready(function() {
      $("#accordion").accordion();
}); 
```

# scala - 在列表列表中选择最小大小的列表

> ID：15776227
> 
> 赞同：3
> 
> 时间：2013-04-02T23:23:26.763
> 
> 标签：scala

我有整数列表。

```
List(List(1, 1, 1, 1), List(2, 1, 1), List(2, 2)) 
```

我想从列表中获取最小大小的列表，即 List(2,2)。在 Scala 中推荐的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:26:09.040

几乎与今天提出的[另一个问题](https://stackoverflow.com/questions/15769366/how-to-find-max-from-a-list-of-tuples-in-scala/15769401#15769401)重复：

```
val xs = List(List(1, 1, 1, 1), List(2, 1, 1), List(2, 2))

xs.minBy(list => list.length)
// res0: List[Int] = List(2, 2) 
```

# sql-server-2008-r2 - SQL Server 2008 R2 表访问时间

> ID：15776229
> 
> 赞同：0
> 
> 时间：2013-04-02T23:23:33.647
> 
> 标签：sql-server-2008-r2, statistics

SQL Server 是否维护每个表的读取、写入、更新时间等统计信息？

我们想知道我们的 ERP 应用程序在哪些表上花费的时间最多，并开始寻找优化表的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:03:17.693

好吧，SQL Server 不会按表名跟踪这些统计信息。但是您可以查看 DMV 之类[`sys.dm_exec_query_stats`](http://msdn.microsoft.com/en-us/library/ms189741%28v=sql.105%29.aspx)的查询，了解哪些*查询*花费的时间最长。

```
SELECT [sql] = SUBSTRING
(
  st.[text],
  (s.statement_start_offset/2)+1,
  (CASE s.statement_end_offset 
    WHEN -1 THEN DATALENGTH(CONVERT(NVARCHAR(MAX), st.[text]))
  ELSE s.statement_end_offset END
  - s.statement_start_offset)/2
), s.*
FROM sys.dm_exec_query_stats AS s
CROSS APPLY sys.dm_exec_sql_text(s.[sql_handle]) AS st
WHERE s.execution_count > 1
AND st.[dbid] = DB_ID('Your_ERP_Database_Name')
ORDER BY total_worker_time*1.0 / execution_count DESC; 
```

当然，您可以按您想要的任何指标进行排序，然后快速查看第一列，看看您是否发现任何看起来可疑的东西。

您还可以查看[`sys.dm_exec_procedure_stats`](http://msdn.microsoft.com/en-us/library/cc280701%28v=sql.105%29.aspx)以识别消耗高持续时间或读取的过程。

请记住，这些和其他 DMV 会针对各种事件（包括重新启动、服务重新启动等）进行重置。因此，如果您想保留这些指标的运行历史以进行趋势/基准测试/比较，您将不得不自己对它们进行快照，或者获得可以帮助解决这个问题的第 3 方产品（例如[SQL Sentry Performance Advisor](http://sqlsentry.net/performance-advisor/sql-server-performance.asp)）以及更多其他产品。

*免责声明：我为 SQL Sentry 工作。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:51:33.107

您可以按照以下链接创建 SQL Server 审核：

[http://msdn.microsoft.com/en-us/library/cc280386(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/cc280386(v=sql.105).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:35:59.573

SQL Server 确实捕获了您询问的信息，但它是基于每个索引，而不是每个表 - 查看 sys.dm_db_index_operational_stats 和 sys.dm_db_index_usage_stats。您必须根据 object_id 聚合数据以获取表信息。但是，有一些注意事项 - 例如，如果未使用索引（不读取也不写入），它将不会显示在输出中。这些统计信息在实例重新启动时重置，并且有一个错误导致它们在 index_usage_stats 在重建索引时被重置（[https://connect.microsoft.com/SQLServer/feedback/details/739566/rebuilding-an-index- clears-stats-from-sys-dm-db-index-usage-stats](https://connect.microsoft.com/SQLServer/feedback/details/739566/rebuilding-an-index-clears-stats-from-sys-dm-db-index-usage-stats)）。而且，DMV 的输出之间存在显着差异 - 查看 Craig Freedman 的帖子了解更多信息（[http://blogs.msdn.com/b/craigfr/archive/2008/10/30/what-is-the-difference-between-sys-dm-db-index-usage-stats-and-sys-dm- db-index-operational-stats.aspx](http://blogs.msdn.com/b/craigfr/archive/2008/10/30/what-is-the-difference-between-sys-dm-db-index-usage-stats-and-sys-dm-db-index-operational-stats.aspx)）。

更大的问题是，你想通过这些信息解决什么问题？我同意 Aaron 的观点，即从优化的角度来看，查找需要很长时间的查询是一个更好的起点。但是，我想让你知道 SQL Server 确实有这些信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-08T12:30:43.503

[我们使用来自Adam Mechanics 博客](http://whoisactive.com)的sp_whoisActive 。
它为我们提供了服务器上当前正在发生的事情的快照，以及语句正在使用的执行计划。
它易于使用且免费。

# c - 如何终止无限循环（线程）

> ID：15776233
> 
> 赞同：2
> 
> 时间：2013-04-02T23:23:46.660
> 
> 标签：c, multithreading, pthreads

我对退出 while 循环有疑问。我正在编写代码，其中创建了两个线程，它们打印字符串，而 main() 部分必须每 500 毫秒打印一次点 (".")。你能帮我在第二个线程终止后如何退出while循环，以便在输出中得到类似的东西：...Hello...World....THE END

感谢您的帮助。

```
int main() 
{
    int mls = 0.5 ; 
    pthread_t thread1;
    pthread_t thread2;

    struktura param1 = { "Hello", 2};
    struktura param2 = { "World", 4};

    pthread_create( &thread1, NULL, thread, &param1);
    pthread_create( &thread2, NULL, thread, &param2);

    while(1)
    {
        printf(".");
        fflush(stdout);
        sleep(mls); 
    }

    pthread_join(thread1, NULL);
    pthread_join(thread2, NULL);

    printf("THE END\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:10:26.617

在考虑了这个问题之后，我得出的结论是，如果主要用例确实要确保两个线程（线程“Hello”和线程“World”）都消失了，那么就没有其他方法可以同时使用这两个线程`pthread_join()`。

由于`pthread_join()`阻塞调用线程，自然的结论是启动第三个线程（线程“Dots”）以根据请求绘制点。

然后，第三个线程（线程“Dots”）由`main()`-thread 发出信号，等待其他两个线程（线程“Hello”和线程“World”）在它从两个阻塞调用返回后完成`pthread_join()`。如果这样做了，第三个线程（线程“Dots”）就完成了。后者可以独立运行，因为没有人在等待它终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:25:51.660

```
 while(pthread_kill(thread1, 0) == 0 &&  pthread_kill(thread2, 0) == 0)
 {
      printf(".");
      fflush(stdout);
      sleep(mls); 
 } 
```

int pthread_kill（pthread_t 线程，int sig）；

您可以使用此函数检索线程的状态，如果 sig 参数为 0，则不发送任何信号，但仍会执行错误检查（例如，您可以使用此函数检查线程是否处于“活动状态”）。

它可以返回 0 或错误代码（ESRCH - 找不到具有 ID 线程的线程，并且在这种情况下多一个不重要），如果返回值为 0，则线程为“活动”，如果返回值为错误找不到比指定线程的代码（ESRCH），例如。它“死了”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T23:26:09.987

尝试使用 pthread_exit，正如您在[terminate c thread](http://www.thegeekstuff.com/2012/04/terminate-c-thread/)中看到的那样。

# java - 内部类动作监听器

> ID：15776235
> 
> 赞同：0
> 
> 时间：2013-04-02T23:23:55.413
> 
> 标签：java, swing, multidimensional-array, jbutton, getter-setter

在我的代码的不同部分，我将运行类似的变体：

```
 _grid[4][4].addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            moveBeginningPieceLeft(_square[4][11]);
            refreshBoard();
        }

    }); 
```

唯一会改变的是_grid 的坐标。我之前尝试过做一些动作监听器，但 Eclipse 迫使我将整数设为最终值。我想知道是否很容易编写一个 addListener 方法，该方法使用它被调用的网格的值（_grid 是一个 JButtons 数组，_square 是一个堆栈数组）。因此，如果我在 _grid[2][5] 上调用 addListener，它只会从 _grid 获取坐标 [2][5] 并放置在 actionlistener 的 _square 部分。所以，

```
_grid[0][5].addListener(); 
```

是相同的

```
 _grid[0][5].addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            moveBeginningPieceLeft(_square[0][5]);
            refreshBoard();
        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:46:14.187

> 我想知道是否很容易编写一个 addListener 方法，该方法使用它被调用的网格的值（_grid 是一个 JButtons 数组，_square 是一个堆栈数组）。

*   没有

> 我之前尝试过做一些动作监听器，但 Eclipse 迫使我将整数设为最终值。

*   将所需的可变变量声明为局部变量

*   关于使用[put/getClientProperty](https://stackoverflow.com/a/10385302/714968)的最简单方法的示例，您可以将此方法与另一个附加值进行多重播放

*   为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)，简短，可运行，可编译，减少并且仅关于 JButtons 网格

# c - C中的Arduino蓝牙HID NES控制器编码按键

> ID：15776240
> 
> 赞同：-1
> 
> 时间：2013-04-02T23:24:06.513
> 
> 标签：c, controller, bluetooth, arduino, hid

我将一个连接到 Arduino mini pro (3.3v) 的 NES 控制器和一个蓝牙 HID 模块（类似于 rn-42 BlueSmirf）放在一起。我可以将它连接到我的 Macbook 并发送击键。

但是，它的作用就像是重复按下键而不是按住键。我需要它像键盘一样工作，但现在它每次通过循环（50ms）时都会按下一个键。我在这里先向您的帮助表示感谢！

Arduino代码：

```
const int buttonA = 2;//Button: A
const int buttonB = 3;//Button: B
const int buttonC = 4;//Button: Start
const int buttonD = 5;//Button: Select
const int buttonE = 6;//Button: Up
const int buttonF = 7;//Button: Down
const int buttonG = 8;//Button: Left
const int buttonH = 9;//Button: Right 
```

...

```
void loop()
{
  if (digitalRead(buttonA) == LOW)      //pin is HIGH until a button is pressed
  {Serial.write('A');}
  if (digitalRead(buttonB) == LOW) 
  {Serial.write('B');}
  if (digitalRead(buttonC) == LOW) 
  {Serial.write('1');}
  if (digitalRead(buttonD) == LOW) 
  {Serial.write('2');}
  if (digitalRead(buttonE) == LOW) 
  {Serial.write('U');}
  if (digitalRead(buttonF) == LOW) 
  {Serial.write('D');}
  if (digitalRead(buttonG) == LOW) 
  {Serial.write('L');}
  if (digitalRead(buttonH) == LOW) 
  {Serial.write('R');}
  delay(50);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:05:32.957

就像@angelatlarge 所说，您的代码完全按照您的要求执行（请参阅他的回复了解原因）。

您的第一步可能应该是实现@angelatlarge 的建议：存储按钮的*状态*，并且仅在之前未按下且现在按下的情况下发送字符。对于一个按钮，它看起来像这样*：

```
const int buttonA = 2;
boolean wasAPressed = false;
boolean isAPressed  = false;

// ...

loop() {

    isAPressed = (digitalRead(buttonA) == LOW);
    if(!wasAPressed && isAPressed) {
        wasAPressed = true;
        Serial.write('A');
    } else if(wasPressed && !isAPressed){
        wasAPressed = false;
    }

    // ...
} 
```

逻辑基本上很简单。我们有两个布尔变量，为您提供四种可能的选择。如果按钮没有被按下，现在是，保存状态 ( `wasAPressed = true`) 并发送字符。如果之前按下，但现在没有按下，则保存状态 ( `wasAPressed = false`)。在其余两种情况下，不要更改任何内容。

但是请注意，每次按下按钮 A 时，这只会发送一个“A”。如果要模拟长按，则必须在两侧添加额外的逻辑。例如，我已经确定“Ad”表示按下了**A按钮（** **d**own），而“Au”表示****释放了** ***A***按钮（ *u**p）。*

 *```
// ...

isAPressed = (digitalRead(buttonA) == LOW);
if(!wasAPressed && isAPressed) {
    wasAPressed = true;
    Serial.write('Ad');
} else if(wasAPressed && !isAPressed){
    wasAPressed = false;
    Serial.write('Au');
}

// ... 
```

然后，您计算机上的接收代码将读取第一个字符以了解我们在说的是谁，然后读取第二个字符以了解它是按下还是释放动作。最后，您必须找到分别模拟按键和按键释放所需的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:39:18.433

让您开始：您的程序正在按照您的指示进行操作。这是发生了什么：每次通过循环程序都会询问：按钮是否被按下？如果是，那么它会发送一个击键。

您需要做的是存储每个按钮的*状态*（即按钮是否被按下），可能存储在一个数组中。然后读取每个按钮，检查该按钮的状态是否与您存储的状态不同，如果发生了变化，则向蓝牙发送一些内容。在这种情况下，您需要将状态更新为按钮的新状态。

如果按钮状态未更改，则不发送任何内容（针对该按钮）。那将有你想要的行为。*

# php - 谷歌地图不显示从数据库检索到的数据

> ID：15776242
> 
> 赞同：0
> 
> 时间：2013-04-02T23:24:07.897
> 
> 标签：php, google-maps-api-3

所以我试图在从我的数据库中获取的谷歌地图上显示数据（使用 API 3）。我得到了正确居中的谷歌地图，但没有标记。

generateXml.php 和 ViewMap.php 都在同一个目录中。

请帮我appriciate它...

非常感谢你。

**生成XML.php**

```
<?php

      require("db_connection.php");

      function parseToXML($htmlStr) 
      { 
          $xmlStr=str_replace('<','&lt;',$htmlStr); 
          $xmlStr=str_replace('>','&gt;',$xmlStr); 
          $xmlStr=str_replace('"','&quot;',$xmlStr); 
          $xmlStr=str_replace("'",'&#39;',$xmlStr); 
          $xmlStr=str_replace("&",'&amp;',$xmlStr); 
          return $xmlStr; 
      } 

      // Select all the rows in the markers table
      $query = "SELECT transportType,costPerKm,address,teleNo,webLink,description,lat,lng FROM transportpublic";

      $result = mysql_query($query);
      if (!$result) 
      {
        die('Invalid query: ' . mysql_error());
      }

      header("Content-type: text/xml");

      // Start XML file, echo parent node
      echo '<markers>';

      // Iterate through the rows, printing XML nodes for each
      while ($row = mysql_fetch_assoc($result)){
        // ADD TO XML DOCUMENT NODE
        echo '<marker ';
        echo 'transportType="' . parseToXML($row['transportType']) . '" ';
        echo 'costPerKm="' . $row['costPerKm'] . '" ';
        echo 'address="' . parseToXML($row['address']) . '" ';
        echo 'teleNo="' . $row['teleNo'] . '" ';
        echo 'webLink="' . parseToXML($row['webLink']) . '" ';
        echo 'description="' . parseToXML($row['description']) . '" ';
        echo 'lat="' . $row['lat'] . '" ';
        echo 'lng="' . $row['lng'] . '" ';
        echo '/>';
      }

      // End XML file
      echo '</markers>';
?> 
```

* * *

```
<markers>
<marker transportType="abc" costPerKm="1.50" address="abc" teleNo="112554476" webLink="http://www.abc.html" description="abc" lat="6.886464" lng="79.871287"/>
<marker transportType="Train" costPerKm="1.50" address="abc" teleNo="112541258" webLink="http://www.abc.html" description="Good" lat="7.284459" lng="80.637459"/>
</markers> 
```

* * *

**视图地图.php**

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>View Map</title>
    <link rel="stylesheet" type="text/css" href="template/css/style.css" />

    <style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0; padding: 0 }
    #map { height: 100% }
    </style>

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="util.js"></script>

<script type="text/javascript">

  var infowindow;
  var map;

 function initialize() 
 {
      var myLatlng = new google.maps.LatLng(6.796396,79.877823);
      var myOptions = {
      zoom: 13,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById("mapC"), myOptions);
    var transitLayer = new google.maps.TransitLayer();
    transitLayer.setMap(map);

    downloadUrl("generateXml.php", function(data) 
    {
      data = xmlParse(data);
      var markers = data.documentElement.getElementsByTagName("marker");
      var bounds = new google.maps.LatLngBounds();
       for (var i = 0; i < markers.length; i++) 
       {
          var latlng = new google.maps.LatLng(parseFloat(markers[i].getAttribute("lat")),
                                    parseFloat(markers[i].getAttribute("lng")));
          bounds.extend(latlng);
          var marker = createMarker(markers[i].getAttribute("transportType"), latlng);
       }
       map.fitBounds(bounds);
     });
  }

  function createMarker(transportType, latlng) 
  {

    var marker = new google.maps.Marker({position: latlng, map: map});
    google.maps.event.addListener(marker, "click", function() {
      if (infowindow) infowindow.close();
      infowindow = new google.maps.InfoWindow({content: transportType});
      infowindow.open(map, marker);
    });
    return marker;

  }

function downloadUrl(url, callback) 
{
    var request = window.ActiveXObject ?
        new ActiveXObject('Microsoft.XMLHTTP') :
        new XMLHttpRequest;

    request.onreadystatechange = function() 
    {
      if (request.readyState == 4) 
      {
        request.onreadystatechange = doNothing;
        callback(request, request.status);
      }
    };

    request.open('GET', url, true);
    request.send(null);
}

function doNothing() 
{

}

</script>

</head>
<body onload="initialize()">

    <div id="content123">
        <div style="height:400px">

        <!--dispaly map -->
          <div id="mapC" style="width: 100%; height: 400px"></div>

      </div>
    </div>

</body>
</html> 
```

* * *

当这一行添加到 mapView.php

```
<?php include("generateXml.php")?> 
```

它甚至不显示地图它给了我错误

```
This page contains the following errors:

error on line 57 at column 26: StartTag: invalid element name
Below is a rendering of the page up to the first error.

View Map html { height: 100% } 

body { height: 100%; margin: 0; padding: 0 } #map { height: 100% } 

var infowindow; var map; 

function initialize() 

{ 

   var myLatlng = new google.maps.LatLng(6.886464,79.871287); 

   var myOptions = { zoom: 10, center: myLatlng, mapTypeId: google.maps.MapTypeId.ROADMAP} 

   map = new google.maps.Map(document.getElementById("mapC"), myOptions); 

   var transitLayer = new google.maps.TransitLayer(); transitLayer.setMap(map); 

   downloadUrl("generateXml.php", function(data)

   { var xml = data.responseXML; 

     var markers = data.getElementsByTagName("marker"); 

     var bounds = new google.maps.LatLngBounds(); for (var i = 0; i 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:02:22.880

从此行中删除“var”：

```
 var map = new google.maps.Map(document.getElementById("mapC"), myOptions); 
```

所以它初始化全局“map”变量，而不是创建一个新的初始化函数本地的变量（全局变量在 createMarker 函数中使用）

[工作示例](http://www.geocodezip.com/v3_SO_dataRetrievedFromDB.html)（还有其他更改，但修复它的是地图变量）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:49:18.670

generateXml lat="7.284459lng=" 中有一个错字

# spring - 我的自定义转换器没有被触发

> ID：15776243
> 
> 赞同：1
> 
> 时间：2013-04-02T23:24:25.883
> 
> 标签：spring, spring-mvc

我正在尝试引入一个自定义转换器来转换对象集 --> 对象。在我的网络层中，我将使用域对象键获得逗号 (',') 分隔的字符串。

例如

如果数据库记录如下表名称所示

身份证名称

1个

2 乙

我有表的关联域对象。从网络层我得到 1,2 字符串，它作为我的域对象数组绑定到我的 DTO。

在这种情况下，我看到默认的 Spring 转换器字符串到对象数组优先于我的自定义转换器，并导致使用空域对象创建我的域对象数组。

但是，我希望执行我的转换器，它根据来自 DB 的 ID 获取域对象。

我如何强制我的转换器首先执行到 Spring 默认转换器。

PS：我将转换目标对象设为 Object 而不是我的 Domain 对象，因为我希望它是通用的并且应该适用于我的所有域对象。

我没有使用 mvc:annotation-driven，我们根据需要手动扩展了它。

* * *

```
<context:component-scan base-package="com.shivaji" use-default-filters="false">
    <context:include-filter expression="org.springframework.stereotype.Controller" type="annotation" />
  </context:component-scan>

  <bean class="com.shivaji.mvc.request.shivajiRequestMappingHandlerAdapter">
    <property name="webBindingInitializer">
      <bean class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
        <property name="conversionService" ref="applicationConversionService" />
        <property name="validator" ref="validator" />
      </bean>
    </property>
    <property name="messageConverters">
      <list>
        <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter" />
        <bean class="org.springframework.http.converter.StringHttpMessageConverter" />
        <bean class="org.springframework.http.converter.FormHttpMessageConverter" />
        <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter" />
        <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter" />
      </list>
    </property>
  </bean>

  <bean id="conversionServiceExposingInterceptor" class="org.springframework.web.servlet.handler.ConversionServiceExposingInterceptor">
    <constructor-arg ref="applicationConversionService" />
  </bean>

  <bean class="org.springframework.format.support.FormattingConversionServiceFactoryBean" id="applicationConversionService">
    <property name="converters">
      <set>
        <bean class="com.shivaji.converter.DateToStringConverter">
          <property name="pattern" value="dd-MM-yyyy HH:mm:ss.SSSSSS" />
        </bean>
      </set>
    </property>
  </bean>

  <!-- Support auto conversion -->
  <bean class="com.shivaji.converter.auto.AutoEntityToIdConverterBeanFactory" />
  <bean class="com.shivaji.converter.auto.AutoIdToEntityConverterBeanFactory" />

  <bean class="org.springframework.mapping.support.ConversionMapperFactory" id="conversionMapperFactory" autowire="byType" /> 
```

# javascript - 使用 javascript 设置背景图像大小

> ID：15776244
> 
> 赞同：0
> 
> 时间：2013-04-02T23:24:31.933
> 
> 标签：javascript

我正在尝试使用 javascript 设置背景图像大小。

我有

```
 var test= document.createElement('div');
  test.className = 'test_element';
  test.style.backgroundImage = 'url('+image.jpg+')'; 
```

如何仅在 Javascript 中设置背景图像？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:32:04.597

您可以使用背景大小属性

```
test.style.backgroundSize = width+'px '+length+'px'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:27:16.327

为什么不使用css？[http://jsfiddle.net/DX5KL/1/](http://jsfiddle.net/DX5KL/1/)

```
img{
    z-index:0;   
    position: absolute;
    top: 0px;
    left: 0px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:32:17.817

尝试`test.style.backgroundImage = 'url(' + image + '.jpg)';`

# javascript - 应用程序长时间暂停后恢复时如何处理（未终止）

> ID：15776253
> 
> 赞同：3
> 
> 时间：2013-04-02T23:25:40.633
> 
> 标签：javascript, windows-8, winjs

我的应用程序显示从 Web 服务检索的数据。假设我的应用程序进入暂停模式并长时间保持暂停状态。之后，当此应用程序恢复时，我想再次查询 Web 服务并在应用程序中显示更多最新数据。问题是我不确定处理这种情况的好地方。我在下面有简化版本的代码。在下面的示例中，当我使用 Suspend 和 Terminate 选项时，我会在控制台窗口中恢复，但是当我只执行 Suspend 并且在该 Resume 之后，似乎没有调用任何函数。有什么想法我可能做错了吗？

```
app.addEventListener("resuming", function (vt) {
        console.log("resuming");
    });

    app.addEventListener("activated", function (args) {
        console.log("activated");
        if (args.detail.kind === activation.ActivationKind.launch) {
            if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
                console.log("new launch");
            } else {
                console.log("resume");
            }
        }
    });

    app.oncheckpoint = function (args) {
        console.log("suspended");
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-12T00:08:03.807

假设您对变量“app”的定义是示例应用程序的标准：

```
 var app = WinJS.Application; 
```

那么您不能将该变量用于“恢复”或“暂停”事件，根据[MS 文档](http://msdn.microsoft.com/en-us/library/windows/apps/br229799.aspx)，内容如下：

> 注意 某些 Windows 应用商店应用事件的侦听器，如“暂停”和“恢复”，无法使用此功能添加。您必须改用 Windows.UI.WebUI.WebUIApplication.addEventListener。

因此，正如该文档所说，您需要使用：

```
Windows.UI.WebUI.WebUIApplication.addEventListener("suspending", suspending, false);
Windows.UI.WebUI.WebUIApplication.addEventListener("resuming", resuming, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:47:27.707

```
Windows.UI.WebUI.WebUIApplication.addEventListener("resuming", function onresuming()
{
    Windows.UI.Popups.MessageDialog('hi i a resuming').showAsync();
}); 
```

[请参阅此处](http://msdn.microsoft.com/en-us/library/windows/apps/br229799.aspx)的msdn 页面。可惜`app.addEventListner('resuming', function() {})`不是扔。

[此](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)msdn 页面中的应用程序恢复部分也可能很有用，它讨论了延迟恢复的相同场景。

# azure - Azure TopicClient 线程安全吗？

> ID：15776256
> 
> 赞同：9
> 
> 时间：2013-04-02T23:25:52.247
> 
> 标签：azure, azureservicebus

我一直在处理来自 TopicClient 的大量超时，我认为这可能与对象生命周期和处置有关。

我正在使用`TopicClient`该类`Microsoft.ServiceBus.Messaging`并阅读此[最佳实践指南](http://msdn.microsoft.com/en-us/library/windowsazure/hh528527.aspx)状态

> 您不应在发送消息后关闭消息传递工厂或队列、主题和订阅客户端，然后在发送下一条消息时重新创建它们。关闭消息传递工厂会删除与服务总线服务的连接，并在重新创建工厂时建立新的连接。

这让我感到困惑 - 本文档没有具体提及，`TopicClient`但我假设它适用。也许这个假设是不正确的？

我可以将我的 TopicClient 存储在静态成员中以避免重新创建连接吗？有没有更好的方法来处理这个？我应该使用某种连接池机制吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T01:28:20.143

[文档表明](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.topicclient.aspx)TopicClient的所有静态和实例成员都是线程安全的。

> “*这种类型的任何公共静态（在 Visual Basic 中为 Shared）成员都是线程安全的。实例成员也保证是线程安全的。”*

我阅读了您包含的报价，因为它确实包含 TopicClient，因为它说“队列、主题和订阅客户端”。我把它读作 QueueClient、TopicClient 和 SubscriptionClient。

对于消息传递子系统，我倾向于使用[网关模式](http://martinfowler.com/eaaCatalog/gateway.html)，它可用于处理与消息传递子系统一起工作所需的对象的生命周期。在您的情况下，网关对象将处理 TopicClient 或 MessageSender/Receivers 的生命周期。

我想问你是否见过更通用的[MessageSender](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.messagesender.aspx)和[MessageReceiver](http://msdn.microsoft.com/en-us/library/windowsazure/hh144134.aspx)类？在发送时使用这些更通用的对象意味着执行发送的客户端代码不必知道它是发送到主题还是队列，它可以只发送到地址而不关心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-19T05:55:57.457

只是从 MS 中添加另一个确认这是线程安全的，来自[***使用 Service Bus Messaging 提高性能的最佳实践***](https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-performance-improvements#reusing-factories-and-clients)：

> 您可以安全地使用 QueueClient 对象从并发异步操作和多个线程发送消息。

他们没有`TopicClient`明确提及，但希望 TopicClient 与`QueueClient`

# jquery - 加载一组图像时触发事件

> ID：15776257
> 
> 赞同：0
> 
> 时间：2013-04-02T23:26:02.327
> 
> 标签：jquery, events, triggers

我正在使用 JQuery 动态加载图像。有些图像可能很大，除非所有图像都已完全加载，否则我不想显示任何图像。所以我有类似的东西：

```
$('#mydiv img').load(function ()
{
    $('#mydiv').animate(
    {
        'width' : data.width, 
        'height' : data.height
    },800);

    $('#loading').remove();
}); 
```

所以我虽然这意味着“当“mydiv”中的所有图像都被加载时，调整 div 的大小并删除“正在加载”项”。但现在我认为它实际上意味着“当至少一个图像被加载时......”。

那我该如何解决我的问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:59:44.967

您需要的是在图像完成加载时保持计数的范围之外的变量

```
var fin = 0; 
```

然后在每个加载函数（）上增加。

```
$('#mydiv img').load(function ()
{
    fin++;
    if(fin == $('#mydiv img').length){
       $('#mydiv').animate({
           'width' : data.width, 
           'height' : data.height
       },800);    
       $('#loading').remove();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:31:50.097

这将驻留在触发事件中。例如一个点击事件：

**布兰科**

```
var all_loaded = true;

$('#mydiv img').each(function() {
    $(this).error(function (){
        all_loaded = false;
    });
})

if (all_loaded) {
    $('#mydiv').animate({'width' : data.width, 'height' : data.height},800);
    $('#loading').remove();
} 
```

**有点击事件**

```
$('#myButton').click(function() {
    var all_loaded = true;

    $('#mydiv img').each(function() {
        $(this).error(function (){
            all_loaded = false;
        });
    })

    if (all_loaded) {
        $('#mydiv').animate({'width' : data.width, 'height' : data.height},800);
        $('#loading').remove();
    }
}); 
```

如果您真的希望代码等到所有图像都加载完毕（创建无限循环很危险），您可以继续重新循环`.each()`直到`all_loaded`不再等于`false`. 像;

```
while (all_loaded !== true) {
    var all_loaded = true;

    $('#mydiv img').each(function() {
        $(this).error(function (){
            all_loaded = false;
        });
    })

    if (all_loaded) {
        $('#mydiv').animate({'width' : data.width, 'height' : data.height},800);
        $('#loading').remove();
    }
} 
```

**更新后的版本**

```
$('#myButton').click(function() {
    var all_loaded = false;

    while (all_loaded !== true) {
        var all_loaded = true;

        $('#mydiv img').each(function() {
            $(this).load().error(function (){
                all_loaded = false;
            });
        })

        if (all_loaded) {
            $('#mydiv').animate({'width' : data.width, 'height' : data.height},800);
            $('#loading').remove();
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T00:00:09.843

下面的代码将为每个加载的图像添加一个属性“数据加载”。然后它将检查加载的图像数量是否等于 #mydiv 中的图像数量，并仅在加载最后一个图像后执行动画：

```
$('#mydiv img').load(function ()
{
    $(this).attr('data-loaded', '');
    if ($('#mydiv img[data-loaded]').length == $('#mydiv img').length)
    {
        $('#mydiv').animate(
        {
            'width' : data.width, 
            'height' : data.height
        },800);

        $('#loading').remove();
    }
}); 
```

# batch-file - 批处理不允许我使用 > 和 <

> ID：15776261
> 
> 赞同：0
> 
> 时间：2013-04-02T23:26:11.723
> 
> 标签：batch-file

我需要一些帮助来修复我的 bat 文件。

```
@echo off
set Output="%USERPROFILE%\desktop"

set /p derpz=Enter variable one value: 
set /p VarTwo=Enter variable two value: 
set /p VarThree=Enter variable three value: 
set /p VarFour=Enter variable four value: 

REM enter your desired output here
echo <derp>%derpz%</derp> >> %Output%\test.txt
echo <derp>%vartwo%</derp> >> %Output%\test.txt
echo <derp>%VarThree%"</derp> >> %Output%\test.txt
echo <derp>%VarFour%</derp> >> %Output%\test.txt

echo.
echo File has been placed %Output%
pause 
```

那应该用文本创建一个新的 txt，它应该让我把我自己的自定义消息放在 %varXXX% 的位置。

我想我已经弄清楚为什么它不起作用了，因为我在文本中使用了 < 和 >，蝙蝠有什么办法可以让我这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:36:12.827

尝试：

```
echo ^<derp^>%derpz%^</derp^> >> %Output%\test.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T01:02:27.623

```
@ECHO OFF
SETLOCAL

SET derp=^^^<derp^^^>
SET pred=^^^<\derp^^^>

ECHO %derp%derpz%pred% >xderp.txt

TYPE xderp.txt 
```

就个人而言，我会做这样的事情来保存所有的插入符号......

# javascript - jquery附加和附加额外的引号

> ID：15776265
> 
> 赞同：0
> 
> 时间：2013-04-02T23:26:19.860
> 
> 标签：javascript, jquery, dom

我有一个“关于”部分，我正试图将引号拉到一边。`<span class='pq'>`我用我的报价在这里包围我想要拉到一边的文本`</span>`。我有 3 个实例将引号拉到一边。第一个实例添加了 3 组引号，第二个实例添加了 2 组引号，第三个也是最后一个实例添加了正确的 1 组引号。

我还在学习 jQuery，但这是我想出的：

```
$(document).ready(function(){
    $('span.pq').each(function(){
        var quote = $(this).clone();
        quote.removeClass('pq');
        quote.addClass('pullquote');
        $(this).before(quote);
        $('.pullquote')
            .prepend('<span class="pq">&ldquo;</span>')
            .append('<span class="pq">&rdquo;</span>');
    })//end each
});//end ready 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:37:43.273

在元素上的循环的`.pullquote`每次迭代中，您都在每个元素上预先添加和附加跨度。您应该将该代码放在 之外，因为它将对每个元素进行操作。像这样的东西（注意：未经测试，可能需要更改）：`each()``span.pq``each()``.pullquote`

```
$(document).ready(function(){
    $('span.pq').each(function(){
        var quote = $(this).clone();
        quote.removeClass('pq');
        quote.addClass('pullquote');
        $(this).before(quote);            
    })//end each
    $('.pullquote')
        .prepend('<span class="pq">&ldquo;</span>')
        .append('<span class="pq">&rdquo;</span>');
});//end ready 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:36:14.023

对于引号，实际上有 2 个标准的 HTML 标记，它们带有引号的语义，`<q>`短（内联）引号和`<blockquote>`更长的引号。CSS 伪元素可用于为每个标签添加和附加引号。

[jsFiddle](http://jsfiddle.net/yFY9W/)

**HTML**

```
<q>hello world</q>
<blockquote>A much longer quote... A much longer quote... A much longer quote... A much longer quote... A much longer quote...</blockquote> 
```

**CSS**

```
q:before,
q:after,
blockquote:before,
blockquote:after {
    content:'"';
} 
```

# c - 如何在 Windows 上使用 C 语言获取 AppPath 到可执行文件的目录（使用 MinGW gcc ）

> ID：15776269
> 
> 赞同：1
> 
> 时间：2013-04-02T23:27:03.337
> 
> 标签：c, path, mingw, shellexecute, getmodulefilename

我的可执行文件在这个地方 --> D:\Examples\C_Pro\newApp.exe 在那个“C_Pro”文件夹中也包含几个文件（file1.txt、file2.txt、file44.exe、newApp.c）

在我的 newApp.c 文件中，我包含了一个 ShellExecute 函数来执行同一文件夹中的“file44.exe”文件，如下所示 --> ShellExecute(NULL,"open","D:\Examples\C_Pro\file44.exe",NULL ,NULL,1)

这样一切正常..

我说的是 VB 中的 AppPath 之类的东西

但情况是我想在不同的电脑上运行这个 newApp.exe 所以我想用另一台电脑中包含“newApp.exe”文件的任何路径替换“D:\Examples\C_Pro\”。（比如 C ：\软件\ ）

我使用 GetModuleFileName 函数获取路径，但它包含 newApp.exe 部分，我只想要新目录 PathRemoveFileSpec 函数不起作用的点。

以及 GetModuleFileName 的返回路径，如 --> D:\Examples\C_Pro\newApp.exe 但是当我们将一些路径放入 ShellEcxecute 时，需要像这样的双字节（空格序列） --> D:\Examples\C_Pro\

我怎样才能摆脱这个问题。

实际的代码片段是这样的......

```
int main()
{
    ShellExecute(NULL,"open","D:\\Softwares\\TypingMaster700.exe",NULL,NULL,SW_SHOWNORMAL);
} 
```

但我想这样做。（这是一个虚拟函数，这里的“some_Funtion”表示虚拟函数，用于解释目的。

```
int main()
{
    char *dirPath = some_Function(a,x,d);
    char *fullPath;
    fullPath = strcat(dirPath,"\\TypingMaster700.exe");
    ShellExecute(NULL,"open",fullPath,NULL,NULL,SW_SHOWNORMAL);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:49:44.920

C 标准不标准支持获取可执行文件所在目录的绝对路径，因为并非所有运行程序的系统都支持这样的概念。然而在实践中，它是一个理想的功能。简而言之：好问题。

不幸的是，它并不是那么简单，如果你的程序是使用`execl`cs 调用的，它甚至可能是不可能的。在确定运行和启动哪个应用程序时，您必须重放 shell，`argv[0]`paulsm4 也是如此。在 Linux 上，如果路径以 开头`/`，`argv[0]`则为可执行文件的绝对路径，您可以通过去除末尾的可执行文件名称来找到该目录。在 Windows 上，您将不得不检查`\`驱动器号，我不确定。我们将在其余部分假设 Linux，只需阅读`\`所有`/`内容即可将其应用于 Windows。

如果`argv[0]`不是上面的绝对路径，您应该检查它是否包含任何内容`/`，因为如果包含，则它必须是相对于`getcwd`paulsm4 所描述的那样。

如果`argv[0]`不包含任何`/`，那么您将不得不运行`PATH`环境变量以找到包含`argv[0]`.

如果这一切都失败了，则您的应用程序已通过`execl`或其朋友之一被调用，并且他们对可执行文件的位置不诚实。你运气不好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:32:49.277

像这样的东西适用于 Windows：

```
#include <stdio.h>
#include <stdlib.h>

int
main (int argc, char *argv[])
{
  char buff[255];
  getcwd (buff, sizeof (buff));
  printf ("path=%s\\%s\n", buff, argv[0]);
  return 0;
} 
```

# database - 在 Greenplum DB [大数据] 上选择分区策略的更好实践

> ID：15776272
> 
> 赞同：1
> 
> 时间：2013-04-02T23:28:13.153
> 
> 标签：database, bigdata, database-performance, greenplum

我需要知道是否有人有任何一般准则（除了反复试验），用于为 Greenplum 中的一系列查询类型定义最佳分区/索引的良好策略？

Greenplum 对他们的管理指南有一些建议......但事实是，它几乎是来自 postgres 文档的复制粘贴，虽然其中一些建议似乎很明显（IE：当表太大而无法放入内存时进行分区），它是仅仅定义一个好的策略来实现这一点还不够。

通常 Greenplum 数据库有非常大的表（超过数百 GB），虽然专门为这种用途选择了硬件，但大多数时候我在涉及到非常大的数据库时遇到了麻烦（IE：曾经有一个数据库有 60 个字段的表和超过 2 亿行，每天增加 4-8 百万个注册表）。

我知道选择合适的分区有一些技巧，比如选择可预测的范围，这些范围将以几乎相等的大小分隔（如日期范围）。但还有一个事实是，当我尝试依赖索引的任何其他数据库时，Greenplum 通过给予某些设置更大的权重来完全阻止它们，比如它的随机页面成本，因此根本不使用索引。

但是我读过一些完全适得其反的情况：假设您有三个节点，每个节点 64GB 内存，根据 GP，您不应该分区，直到表超过 192，但由于未使用索引，您最终会seq 每个节点最多可扫描 64gb！--- 虽然这仍然可以很快，但如果你强制使用索引，你可以从 20 多秒减少到几毫秒。

另一个已知情况是，在分区时，开销使查询比应有的速度慢很多。

**那么，回到最初的问题：**
是否有人对如何定义分区/索引策略有任何好的、坚定的建议？
使用我们的一些 ETL，来自源的测试查询可能需要半小时到一整小时，因此跟踪和错误确实会降低生产力。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:20:01.120

我认为您的问题的答案较少取决于数学，而更多地取决于您的用户将如何访问该表。对于日期范围分区，如果用户通常会查找一天的数据，那么每日分区是有意义的。如果用户通常查询更长的日期范围，那么每日分区只会增加开销。Greenplum DB 表中的每个分区或子分区都被视为一个单独的表（因此文件系统上的一个单独文件），因此您必须扫描的分区越多以满足查询，您需要访问的打开文件就越多。了解您的用户希望如何访问数据，这将为您提供有关可能的分区策略的更好线索。

混合分区策略也很有用。某些用例会偏爱一个表，其中有最近一周/月的每日分区，然后让较旧的分区覆盖更长的时间范围，因为它们访问频率较低，并且通常用于报告/分析查询而不是行查找或类似查询。

就索引而言，虽然 Greenplum DB 的优化器偏爱表扫描而不是索引访问，但在某些地方索引是有意义的。在某些情况下，我对位图索引很幸运。

不幸的是，与其他数据库一样，调整 GPDB 仍然是一种艺术形式，因此可能不可避免地需要进行一定程度的反复试验。

# regex - 使用 Lex/Yacc 检索匹配标记的范围

> ID：15776280
> 
> 赞同：0
> 
> 时间：2013-04-02T23:29:18.757
> 
> 标签：regex, nlp, yacc, lex, flex-lexer

我正在使用 Lex 解析 C 程序中的给定输入字符串。到目前为止一切正常，但我想知道原始输入字符串中匹配标记的范围。这可能吗？

yytext 给我匹配的标记，但不是原始字符串中标记的范围。由于令牌可能在输入字符串中存在多次，但不一定每次都有效，因此我不能简单地搜索第一个/最后一个/等。在输入字符串中出现标记 - 我需要知道匹配的确切范围，如下例所示：

示例输入：“提醒我在 5 分钟内买牛奶”

```
token "min":  range 27-30 (and not 2-5) 
```

我已经查看了 yy_buffer_state ，但它似乎没有包含我需要的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:41:52.447

您必须在消耗字符时保持连续计数：基本上 count += strlen(yytext) 在每个 flex 规则中。在匹配关键字或变量的规则中，您需要的范围（我自己称它们为坐标）您需要 int start = count; 计数 += strlen(yytext); int end = count，那么 start 和 end 就是坐标。

# php - PHP中的正则表达式从骆驼案例中找到最后一个大写字符

> ID：15776293
> 
> 赞同：0
> 
> 时间：2013-04-02T23:31:19.087
> 
> 标签：php, regex, capitalize, ucfirst

我想在 PHP 中匹配字符串中的最后一个大写（[http://php.net/manual/en/function.ucfirst.php](http://php.net/manual/en/function.ucfirst.php)）字符。

为了增加复杂性，我想忽略不同字符串之后的所有内容，例如一系列未大写或驼峰式风格的大写字母。

下面是一些应该和不应该匹配的例子

**火柴：**

```
Foobar => Expected char: F
fooBar  => Expected char: B
A_fooBar  => Expected char: B
fooBAR => Expected char: B (Most complicated situation) 
```

**无匹配：**

```
foo A_bar
foobar
foo bar foo bar
foobar /* Comment */ 
```

到目前为止，我已经尝试了以下正则表达式：

```
(?!A_)[A-Z](?!((?!/\*).)*\*/) 
```

但没有运气。来自问题：正则[表达式匹配除特定字符串之外的任何大写字符](https://stackoverflow.com/questions/1667237/regexp-match-any-uppercase-characters-except-a-particular-string)（非常相似的情况）

**@编辑**

还有另一个正则表达式

```
/([A-Z])[^A-Z\W]*$/ 
```

[http://phpfiddle.org/main/code/dyq-3h7](http://phpfiddle.org/main/code/dyq-3h7)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:55:41.430

我相信这在适当的情况下匹配，并且也会忽略您的其他示例。

```
^\w*?(?<![A-Z_])([A-Z])(?!_) 
```

[看到这个小提琴](http://phpfiddle.org/main/code/pfc-f9y "看到这个小提琴")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:37:42.730

试试这个

`/([A-Z])([A-Za-z]|[^_\*\/])*$/`

这适用于您的每个示例：

[http://phpfiddle.org/main/code/sgb-7m](http://phpfiddle.org/main/code/sgb-7m)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T23:52:53.280

如果我理解你的话，你基本上想要最后一个没有另一个大写字母的大写字母。在这种情况下，试试这个：

```
/.*(?<![A-Z])([A-Z])/ 
```

然后只需获取第一个子模式。

# ios - 从高分辨率相机图像创建单个 UIImage 以进行打印

> ID：15776294
> 
> 赞同：0
> 
> 时间：2013-04-02T23:31:20.100
> 
> 标签：ios, objective-c, printing, uiimage, resolution

我正在尝试从多个 UIImage 和一个标签创建一个 UIImage。我知道如何在视图中创建它，它看起来不错。问题是我想要由专业印刷公司印刷的这张单幅图像。印刷公司接受的最低分辨率为 1838x1238。视图分辨率显然比这小得多。我想从几个相机图像创建一个高分辨率 UIImage 并包含一个标签，但不会显示高分辨率副本（b/c 我认为它会使应用程序崩溃）。由于分辨率问题，我无法进行屏幕截图或使用 UIGraphicsGetImageFromCurrentImageContext()。我完全被难住了，我们将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:16:23.537

如果您不想将视图大小设置为 1838x1838，则始终可以将图片绘制到 Core Graphics 图像上下文中，如下所示：

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(1838.0, 1838.0), NO, 1); //Scale is 1 so the resolution isn't necessarily doubled for retina devices - change to zero if you want this
[image drawInRect:firstImageRect];
//.....
[labelText drawInRect:labelTextRect]; //labelText is an NSString or NSAttributedString
finalImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

希望这可以帮助！

# c# - C#.NET 我可以修改字符串的默认构造吗？

> ID：15776302
> 
> 赞同：0
> 
> 时间：2013-04-02T23:32:12.043
> 
> 标签：c#, string, constructor

我看过一些帖子说扩展构造函数不存在，但我想知道是否有另一种方法可以实现这一点。

从本质上讲，我的任务是构建一系列 Web 服务（作为消息代理），其中可能会将完整的信用卡详细信息传递到任何文本字段中。

我遇到的问题是，无论有人在哪个字段输入完整的信用卡号（有意或无意），我都需要确保在允许数据被使用或去任何地方之前适当地混淆数据。

我认为，如果我可以修改字符串对象的默认行为以在实例化它们时执行此检查，而不是编写一大堆显式调用，并且可能在过程中丢失字段，那将是很棒的。那么就没有任何数据泄漏的机会。

忽略这种方法的潜在性能问题，有没有办法真正实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:59:15.687

System.Security.SecureString 类

[http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:13:14.860

最后，我选择了@sambomartin 建议的方法

我生成了一个不同的类来将字符串封装在对象的属性中。

真正的诀窍是隐式运算符覆盖。再加上一些与字符串实现相同的接口，这使我能够创建一个（到目前为止）在代码中运行得相当顺畅的类。

```
public class MyString : IComparable, IComparable<string>, IEnumerable<char>, IEnumerable, IEquatable<string>
{
    #region Static Operators
    public static implicit operator MyString(string value)
    {
        return new MyString(value);
    }

    public static implicit operator string(MyString value)
    {
        return value.value;
    }

    public static bool operator !=(MyString a, MyString b)
    {
        return a.value != b.value;
    }

    public static bool operator ==(MyString a, MyString b)
    {
        return a.value == b.value;
    }

    public static bool operator !=(MyString a, string b)
    {
        return a.value != b;
    }

    public static bool operator ==(MyString a, string b)
    {
        return a.value == b;
    }

    public static bool operator !=(string a, MyString b)
    {
        return a != b.value;
    }

    public static bool operator ==(string a, MyString b)
    {
        return a == b.value;
    }
    #endregion

    private string value;

    public int Length
    {
        get { return (value != null) ? value.Length : 0; }
    }

    public MyString(string value)
    {
        this.value = PciCleaner.Clean(value);
    }

    #region Object Overrides
    public override string ToString()
    {
        return value;
    }

    public override bool Equals(object obj)
    {
        return (value != null) ? value.Equals(obj) : false;
    }

    public override int GetHashCode()
    {
        return (value != null) ? value.GetHashCode() : new object().GetHashCode();
    }
    #endregion

    #region IComparable
    public int CompareTo(object obj)
    {
        return (value != null) ? value.CompareTo(obj) : -1;
    }
    #endregion

    #region IComparable<string>
    public int CompareTo(string other)
    {
        return (value != null) ? value.CompareTo(other) : -1;
    }
    #endregion

    #region IEnumerable<char>
    public IEnumerator<char> GetEnumerator()
    {
        return (value != null) ? value.GetEnumerator() : null;
    }
    #endregion

    #region IEnumerable
    IEnumerator IEnumerable.GetEnumerator()
    {
        return (value != null) ? (value as IEnumerable).GetEnumerator() : null;
    }
    #endregion

    #region IEquatable<string>
    public bool Equals(string other)
    {
        return (value != null) ? value.Equals(other) : false;
    }
    #endregion
} 
```

# android - 如何在我的 android 应用程序上有一个教程界面？

> ID：15776303
> 
> 赞同：0
> 
> 时间：2013-04-02T23:32:16.263
> 
> 标签：android, user-interface

我想在我的应用程序上添加一个功能，在用户首次启动应用程序时向他们展示。它将显示一个演示选项，该选项将贯穿应用程序的主要部分。（例如，一个箭头会指向撰写按钮并说撰写，或者它会向用户展示如何访问设置菜单。）。我已经做了一些研究，我相信你会使用偏好，但我不确定。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:44:11.627

我使用[ShowcaseView](https://github.com/Espiandev/ShowcaseView)库来突出显示我的应用程序的主要功能。它非常干净且易于使用。

# iphone - 获取上个月的第一天/日期和下个月的最后一天/日期

> ID：15776305
> 
> 赞同：1
> 
> 时间：2013-04-02T23:32:18.323
> 
> 标签：iphone, ios, cocoa-touch, time, nsdate

我想获取上个月的第一天和日期，以及下个月的最后一天和日期。例如，当前月份是四月。我想要 3 月 1 日和 5 月 31 日。

我如何从中获取此信息`NSDate`？

尽管有获取本月第一天的解决方案，但我认为获取上个月的第一天和下个月的最后一天对我没有帮助。

我已经尝试过：

```
NSDateComponents *dateComponents = [gregorian components:( NSYearCalendarUnit |
NSMonthCalendarUnit | NSDayCalendarUnit ) fromDate:[NSDate date]]; 
```

但是这里 [NSDate date] 是当前日期，但我想要上一个和下一个日期。

# android - 如何使用 ADT 将计算机上的文件移动到我的 Android SD 卡？

> ID：15776306
> 
> 赞同：0
> 
> 时间：2013-04-02T23:32:21.560
> 
> 标签：android, file, adt, sd-card, transfer

我是Android新手，所以希望有人可以帮助我。我想使用 Android 开发工具以编程方式将三个文件移动到我的 Android SD 卡中。我已经在 Android Manifest 文件中包含了 WRITE-PERMISSIONS。我发现这段代码是从[如何检查新创建的文件夹是否存在于 Android 中的 SD 卡中](https://stackoverflow.com/questions/6911041/how-to-create-folder-into-sd-card-in-android)创建一个目录“：

```
 File direct = new File(Environment.getExternalStorageDirectory() + "/New Folder");

    if(!direct.exists())
    {
        if(direct.mkdir()) 
        {
            //directory is created;
        }

    } 
```

现在我只需要代码就可以将文件放在文件夹中显示“//directory is created;”的位置。有人知道这样做的方法吗？请帮助并提前感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:42:42.910

您可以将文件从内部存储复制到 SD 卡。详细答案在这里[如何将文件从内部应用程序存储移动/重命名到 Android 上的外部存储？](https://stackoverflow.com/questions/4770004/how-to-move-rename-file-from-internal-app-storage-to-external-storage-on-android).

# python - 使用类的python中的阶乘错误

> ID：15776307
> 
> 赞同：0
> 
> 时间：2013-04-02T23:32:34.770
> 
> 标签：python

我正在尝试编写一个类来使用递归解决阶乘。

这是我的代码：

```
class Factorial:

def __init__(self,n):
self.n = n

def factorial(self):
    if self.n == 0:
        return 1 
    else:
        return self.n * self.factorial(self.n - 1) 
```

我这样称呼它：

```
 fact = Factorial(4) 
 fact.factorial() 
```

我收到此错误：

```
Traceback (most recent call last):
  File "factorial.py", line 13, in <module>
    fact.factorial()
  File "factorial.py", line 10, in factorial
    return self.n * self.factorial(self.n - 1)
  TypeError: factorial() takes exactly 1 argument (2 given) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:36:56.220

您将实例变量与传递给您的方法的参数混合在一起。

`factorial`应该看起来像：

```
def factorial(self):
    if self.n == 0:
        return 1 
    else:
        temp_n = self.n
        self.n -= 1
        return temp_n * self.factorial() # alternatively, (self.n + 1)*self.factorial() 
```

您想要 1) 递减`n`变量，然后 2) 乘以 的阶乘`n-1`。

我能问一下你为什么要这样做吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:57:07.180

如果您想要一个实际上适用于不太小的参数的阶乘，您应该执行类似的操作

```
def factorial(self):
    ans = 1
    loop = self.n
    while loop>0:
        ans *= loop
        loop -= 1
    return ans 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-25T13:49:59.617

我更新了你的代码，它工作了请检查这个

```
class Factorial:

    def fact(self,n):
        if n == 0:
            return 1 
        else:
            return n * self.fact(n - 1)

f = Factorial()
print(f.fact(4)) 
```

# python - 计算每个文件的MD5

> ID：15776308
> 
> 赞同：-1
> 
> 时间：2013-04-02T23:32:41.160
> 
> 标签：python

我有两个包含少量文件的目录，我想计算每个目录中每个文件的 MD5，并将哈希值存储在每个目录列表中。

我可以使用 import hashlib 计算一个文件的哈希值

图书馆，但想不出办法做到以上几点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:35:48.040

[在此处输入链接描述](http://www.joelverhagen.com/blog/2011/02/md5-hash-of-file-in-python/)中查看如何计算某些文件总和的 MD5 。如果要从目录中获取所有文件的列表，请参阅[仅列出当前目录中的文件](https://stackoverflow.com/questions/11968976/python-list-files-in-the-current-directory-only)。

# php - 从表中打印记录但不打印重复项

> ID：15776311
> 
> 赞同：2
> 
> 时间：2013-04-02T23:32:50.053
> 
> 标签：php, mysql, database, inbox

好的，我不知道如何简短地把它作为一个问题来表达，所以很抱歉它的措辞不是很好。我在其他任何地方都找不到答案（可能是因为我无法正确说出我的问题）

这是我的问题：我在我的网站中实现了一个收件箱/发件箱系统，我想做的是列出向该用户发送消息的人员的姓名列表，但我想不出任何方法来做到这一点它将在消息表中搜索，并且每个用户名只选择一个记录，如果不够清楚，很抱歉，如果需要，很乐意进一步扩展..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:19:22.917

如果您提供了一些您所拥有的代码和结构，那将会很有帮助。

我假设你有一张这样的桌子：

```
CREATE TABLE `messages` (
`id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`sender` VARCHAR ( 50 ) NOT NULL ,
`receiver` VARCHAR ( 50 ) NOT NULL ,
`dateSent` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ,
`contents` TEXT NOT NULL ) 
```

并输入数据，如下所示：

```
id  sender  receiver    dateSent    contents
1   Joe     Jane    4/8/2013 9:15   How are you?
2   Jane    Joe     4/8/2013 9:22   Fine
3   Joe     Jane    4/8/2013 9:27   Can you help me with MySQL?
4   Jane    Joe     4/8/2013 9:31   Sorry. Ask Meg.
5   Joe     Meg     4/8/2013 9:38   Can you help me with MySQL?
8   Meg     Joe     4/8/2013 9:45   Sure! 
```

现在你想知道，谁给乔发了消息。这是SQL：

```
SELECT `sender` FROM `messages`
WHERE `receiver` = "Joe"
GROUP BY `sender` 
```

该 SQL 的结果将是：

```
 Sender
  Jane
  Meg 
```

尽管 Jane 向 Joe 发送了 2 条消息，但她的名字只出现了一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:52:27.073

最好的办法是可能创建一个新表来表示“之前已向我（或彼此？）发送过消息”

您基本上将需要用户 ID 的多对多关系表来表示这一点。

创建一个表 HasMessaged，其中包含两列 SenderId 和 ReceiverId。然后，您可以通过此表将用户加入到自身，并为任何单个用户创建一个向他发送消息的每个人的列表。该表最初需要通过在您的消息表上运行一次昂贵的查询来填充，但它应该不会太糟糕。填充后，您可以通过执行简单的 INSERT ... ON DUPLICATE KEY UPDATE 来更新它，以确保表包含正确的记录。

# java - 将字符串传递给 InetSocketAddress

> ID：15776312
> 
> 赞同：0
> 
> 时间：2013-04-02T23:32:53.530
> 
> 标签：java, string, arguments

有没有办法将字符串参数传递给 的参数`InetSocketAddress`？

这是生成代理的正确方法：

```
SocketAddress addr = new InetSocketAddress("127.0.0.1", 9050);  
Proxy proxy = new Proxy(Proxy.Type.SOCKS, addr); 
```

但我想创建一个方法来接收这样的字符串：

```
method("127.0.0.1",9050);  

public void method (String a){  
SocketAddress addr = new InetSocketAddress(a); //can't place string here is there away forit work?  
Proxy proxy = new Proxy(Proxy.Type.SOCKS, addr);    
} 
```

有没有办法让新`InetSocketAddress`的字符串IP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:40:11.397

您还必须将端口传递给构造函数，而不仅仅是 IP 地址：

```
method("127.0.0.1",9050);

public void method (String a, int port){  
    SocketAddress addr = new InetSocketAddress(a, port);
    Proxy proxy = new Proxy(Proxy.Type.SOCKS, addr);    
} 
```

# python-2.7 - Python 2.7 的 pyPdf 不适用于 py2exe 和 cx_freeze？

> ID：15776313
> 
> 赞同：2
> 
> 时间：2013-04-02T23:32:56.900
> 
> 标签：python-2.7, py2exe, cx-freeze, pypdf

每个人，

我使用 pyPdf 为 Python 2.7 编写了一个小程序。它已经在 Python 中进行了测试。现在我希望将它转换为 exe 文件以在 Windows 中运行它。py2exe 或 cx_freeze 都不起作用。exe 文件不运行。

看起来它在输出文件夹中不包含 pyPdf 模块。

文件夹结构是这样的：

```
dist\
    tcl [folder]
    tk [folder]
    _ctypes.pyd
    _tkinter.pyd
    bz2.pyd
    Filing.exe
    python27.dll
    tcl85.dll
    tk85.dll
    unicodedata.pyd 
```

Filing.exe 是程序。

我尝试在命令窗口下运行exe，错误信息是这样的：

```
Traceback (most recent call last):
 File "C:\python27\lib\site-packages\cx_Freeze\initscripts\console.py", line 27, in <module>
    exec code in m.__dict__
 File "filing.py", line 1, in <module>
ImportError: No module named pyPdf 
```

请帮忙。

谢谢你们！

当我冻结它时，输出显示如下：

```
C:\Python27\Scripts>cxfreeze pypdf_test.py
copying C:\Python27\lib\site-packages\cx_Freeze\bases\Console.exe -> C:\Python27
\Scripts\dist\pypdf_test.exe
copying C:\Windows\system32\python27.dll -> C:\Python27\Scripts\dist\python27.dl
l
writing zip file C:\Python27\Scripts\dist\pypdf_test.exe

  Name                      File
  ----                      ----
m StringIO
m UserDict
m __builtin__
m __main__                  pypdf_test.py
m _abcoll
m _codecs
m _codecs_cn
m _codecs_hk
m _codecs_iso2022
m _codecs_jp
m _codecs_kr
m _codecs_tw
m _multibytecodec
m _struct
m _warnings
m _weakref
m _weakrefset
m abc
m base64
m binascii
m bz2                       C:\Python27\DLLs\bz2.pyd
m codecs
m copy
m copy_reg
m cx_Freeze__init__         C:\Python27\lib\site-packages\cx_Freeze\initscripts\
Console.py
P encodings
m encodings.aliases
m encodings.ascii
m encodings.base64_codec
m encodings.big5
m encodings.big5hkscs
m encodings.bz2_codec
m encodings.charmap
m encodings.cp037
m encodings.cp1006
m encodings.cp1026
m encodings.cp1140
m encodings.cp1250
m encodings.cp1251
m encodings.cp1252
m encodings.cp1253
m encodings.cp1254
m encodings.cp1255
m encodings.cp1256
m encodings.cp1257
m encodings.cp1258
m encodings.cp424
m encodings.cp437
m encodings.cp500
m encodings.cp720
m encodings.cp737
m encodings.cp775
m encodings.cp850
m encodings.cp852
m encodings.cp855
m encodings.cp856
m encodings.cp857
m encodings.cp858
m encodings.cp860
m encodings.cp861
m encodings.cp862
m encodings.cp863
m encodings.cp864
m encodings.cp865
m encodings.cp866
m encodings.cp869
m encodings.cp874
m encodings.cp875
m encodings.cp932
m encodings.cp949
m encodings.cp950
m encodings.euc_jis_2004
m encodings.euc_jisx0213
m encodings.euc_jp
m encodings.euc_kr
m encodings.gb18030
m encodings.gb2312
m encodings.gbk
m encodings.hex_codec
m encodings.hp_roman8
m encodings.hz
m encodings.idna
m encodings.iso2022_jp
m encodings.iso2022_jp_1
m encodings.iso2022_jp_2
m encodings.iso2022_jp_2004
m encodings.iso2022_jp_3
m encodings.iso2022_jp_ext
m encodings.iso2022_kr
m encodings.iso8859_1
m encodings.iso8859_10
m encodings.iso8859_11
m encodings.iso8859_13
m encodings.iso8859_14
m encodings.iso8859_15
m encodings.iso8859_16
m encodings.iso8859_2
m encodings.iso8859_3
m encodings.iso8859_4
m encodings.iso8859_5
m encodings.iso8859_6
m encodings.iso8859_7
m encodings.iso8859_8
m encodings.iso8859_9
m encodings.johab
m encodings.koi8_r
m encodings.koi8_u
m encodings.latin_1
m encodings.mac_arabic
m encodings.mac_centeuro
m encodings.mac_croatian
m encodings.mac_cyrillic
m encodings.mac_farsi
m encodings.mac_greek
m encodings.mac_iceland
m encodings.mac_latin2
m encodings.mac_roman
m encodings.mac_romanian
m encodings.mac_turkish
m encodings.mbcs
m encodings.palmos
m encodings.ptcp154
m encodings.punycode
m encodings.quopri_codec
m encodings.raw_unicode_escape
m encodings.rot_13
m encodings.shift_jis
m encodings.shift_jis_2004
m encodings.shift_jisx0213
m encodings.string_escape
m encodings.tis_620
m encodings.undefined
m encodings.unicode_escape
m encodings.unicode_internal
m encodings.utf_16
m encodings.utf_16_be
m encodings.utf_16_le
m encodings.utf_32
m encodings.utf_32_be
m encodings.utf_32_le
m encodings.utf_7
m encodings.utf_8
m encodings.utf_8_sig
m encodings.uu_codec
m encodings.zlib_codec
m errno
m exceptions
m genericpath
m imp
m itertools
m linecache
m nt
m ntpath
m os
m posixpath
m quopri
m repr
m stat
m string
m stringprep
m strop
m struct
m sys
m traceback
m types
m unicodedata               C:\Python27\DLLs\unicodedata.pyd
m warnings
m weakref
m zipimport
m zlib

Missing modules:
? pyPdf imported from __main__

copying C:\Python27\DLLs\bz2.pyd -> C:\Python27\Scripts\dist\bz2.pyd
copying C:\Python27\DLLs\unicodedata.pyd -> C:\Python27\Scripts\dist\unicodedata
.pyd

C:\Python27\Scripts> 
```

好的。我检查了 pyPdf 的位置，它在这里：

```
>>import pyPdf
>>print pyPdf
module 'pyPdf' from 'C:\Python27\lib\site-packages\pypdf-1.13-py2.7.egg\pyPdf\__init__.pyc' 
```

那么如何将 pyPdf 带到 exe 程序中呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:41:09.583

重新发布作为答案：

安装在 .egg 目录中的模块似乎有些奇怪 - cx_Freeze 显然没有看到 setuptools 对路径的修改。

我已经[提交了一个关于它的 cx_Freeze 问题](https://bitbucket.org/anthony_tuininga/cx_freeze/issue/28/failure-to-find-module-inside-egg)，但与此同时，简单的解决方案是将 Python 包复制到 PYTHONPATH 上的某个位置，例如 site-packages 文件夹。

# php - 更改多维数组php的元素

> ID：15776316
> 
> 赞同：0
> 
> 时间：2013-04-02T23:33:42.533
> 
> 标签：php, multidimensional-array

我有这个多维数组，`type`当我找到`parc`值时我需要更改字段，在这种情况下`100`，在这个数组中使用 php ......但我总是找到的所有东西都用最后一个数组替换了总数组。任何人都可以帮助我吗？非常感谢...对不起我的英语不好。

```
Array
(
    [1] => Array
        (
            [designacao] => 
            [imagem] => 
            [produto] => KITCHENAID Robot de cozinha Artisan 5KSM150PSETG cor-de-laranja
            [preco_t] => 710
            [t_parc] => Parcela 1
            [parc] => 100
            [symbol] => €
            [zona] => COZINHA
            [id] => 0
            [type] => checkbox
        )

    [2] => Array
        (
            [designacao] => 
            [imagem] => 
            [produto] => KITCHENAID Robot de cozinha Artisan 5KSM150PSETG cor-de-laranja
            [preco_t] => 710
            [t_parc] => Parcela 2
            [parc] => 100
            [symbol] => €
            [zona] => COZINHA
            [id] => 0
            [type] => checkbox
        )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:37:59.220

```
foreach ($array as $key => $value) {
    if ($key == 'parc' && $value == 100) {
        $array['type'] = 'something new';
    }
} 
```

类似的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:48:26.010

试试这个：

```
$source = array(); // your array

$keyName = 'parc';
$keyValue = 100;
$keyToChange = 'type';

array_walk($source, function (&$element) use ($keyName, $keyValue, $keyToChange) {
    if (
        array_key_exists($keyName, $element)
        && $element[$keyName] === $keyValue
    ) {
        $element[$keyToChange] = '[do_something]';
    }
}); 
```

# ruby - 如何让 xcode 在运行脚本时使用正确版本的 ruby ？

> ID：15776319
> 
> 赞同：12
> 
> 时间：2013-04-02T23:33:54.713
> 
> 标签：ruby, xcode, rvm

在 xcode 中，我有一个运行 ruby​​ 脚本的“运行脚本”构建阶段。但是，似乎 xcode 正在尝试使用默认的 mac 1.8 版本的 ruby​​ 而不是最新版本来运行它。鉴于该脚本需要一个 gem，它会因 require 错误而失败，并且错误中的路径指向 `/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/`

显然，这条道路上的 1.8 让我怀疑。

如果我打开终端并运行命令，`ruby -v`那么它会正确返回`2.0.0p0`我安装的并使用 RVM 设置为默认值。

我怎样才能让 Xcode 出现在正确的位置？还是我误解了这个错误？

**更新：**

为了提供更多信息，这是编译器抛出的确切错误：

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- json (LoadError)
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
from /Volumes/Macintosh HD/Documents/Projects/WesternMusicElements/WesternMusicElements/Ruby/NoteCollectionParser.rb:9
Command /bin/sh failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-08-21T00:44:40.213

您也可以`rvm use system`切换到默认的 mac os ruby​​，然后使用 sudo 安装 gem。对我来说似乎是最简单的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-07T14:59:18.203

假设您在项目中指定您的 rvm ruby​​ 版本控制（我认为您应该这样做），我认为这是一个比目前更普遍适用的答案。

概括地说，在你的 shell 脚本中，你应该

```
# provides the rvm *function* to your shell script 
source "${SOMETHING}/scripts/rvm"

# then, for this script, the rvm function will change to
# the controlling ruby version for the pwd when this is run
rvm use . 
```

我在这个[答案](https://stackoverflow.com/a/26238864/45813)中更详细地介绍了这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T20:23:29.523

如果您让 Xcode 打印出环境变量 IIRC，则Xcode 设置的设置与您在常规终端会话中加载的`$PATH`设置不同。`$PATH`

这使您（至少）有两种方法可以解决问题：

1.  您可以编辑脚本以直接指向 rvm 安装的 ruby​​。如果您的脚本必须在多个系统上工作，这可能会更好（即使它确实违背了 rvm 承诺的工作方式）。

2.  根据 Peter Hosey 对 Chris Hanson 在[此](https://stackoverflow.com/questions/386783/nstask-not-picking-up-path-from-the-users-environment)问题中的回答的评论，您可以设置环境变量，`~/.MacOSX/environment.plist`该变量将应用于您启动的所有进程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-22T19:17:56.160

我有类似的情况，但是正在运行的脚本有一个 shebang 行，指的是系统安装的 Ruby。

```
#!/usr/bin/ruby 
```

我的解决方案（可能很**危险**`/usr/bin/ruby`）是用 RVM 安装的 Ruby 的符号链接替换。

以下是我采取的步骤：

1.  安装多用户 RVM（`sudo`来自[https://rvm.io/rvm/install](https://rvm.io/rvm/install)的选项）
2.  `rvm`使用“设置”应用程序（设置 > 用户和组）将自己添加到组中。
3.  注销并重新登录以确保操作系统尊重组成员身份。
4.  从命令行安装我需要的 gem。由于我现在是`rvm`组中的 RVM 经理，因此这会影响`/usr/local/rvm`.
5.  移开`/usr/bin/ruby`并在其位置符号链接 RVM 默认 Ruby。（这是危险的部分。如果程序假设它们将使用系统安装的版本，则可能会导致问题。）

为了替换符号链接，我做了：

```
sudo mv /usr/bin/ruby /usr/bin/system_ruby
sudo ln -s /usr/local/rvm/rubies/default/bin/ruby /usr/bin/ruby 
```

完成此操作后（当 Xcode 未运行时），下次我在 Xcode 中构建项目时，脚本使用了我在 RVM 中安装的 Ruby。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-06T17:43:49.743

我使用它来使用默认系统解释器以外的解释器运行 Xcode：

1.  如果 Xcode 已打开，请退出并转到您的终端。
2.  激活您要使用的 rvm。
    `rvm use 2.0.0p0`
3.  然后从终端打开 Xcode：
    `open -a Xcode`

要对此进行测试，您可以在构建中包含一些记录解释器版本或可用 gem 的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-25T08:14:37.690

我也有这个问题，因为我想使用 xcpretty。我最终执行以下操作以指向正确的 gem 文件夹

```
$RUBYPATH=$(eval ~/.rvm/bin/rvm info | grep "GEM_HOME:" | awk -F '"' '{print $2}') 
```

您想要的任何宝石都将在此文件夹中。

另外，如果您只想使用 ruby​​ 主路径：

```
$RUBYPATH=$(eval ~/.rvm/bin/rvm info | grep "MY_RUBY_HOME:" | awk -F '"' '{print $2}') 
```

xcpretty 在我的场景中位于 bin/ 中的第一个选项下，如下所示。所以对我来说，我最终做了以下事情：

```
$RUBYPATH=$(eval ~/.rvm/bin/rvm info | grep "GEM_HOME:" | awk -F '"' '{print $2}')
RUBY_BIN_PATH=${RUBY_PATH}"/bin/" 
XCPRETTY=$RUBY_BIN_PATH"xcpretty"
eval $XCPRETTY 
```

你可以通过 which 找到你的 ruby​​ 命令在哪里

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-01T10:47:33.990

如果您使用`rbenv`，您可以在构建阶段脚本中的所有内容之前添加以下行：

```
export PATH=~/.rbenv/shims:$PATH 
```

# actionscript-3 - 覆盖函数中的对象状态更改未反映在基类函数中

> ID：15776320
> 
> 赞同：0
> 
> 时间：2013-04-02T23:33:59.607
> 
> 标签：actionscript-3, actionscript

我认为这应该是显而易见的，但由于某种原因，这对我来说没有意义。

```
public class Foo extends Sprite
{
    protected var dict:Dictionary = new Dictionary();

    protected function subclassBehavior():void
    {
        //defined in subclass
    }
    public function accessDictionary():void
    {      
        subclassBehavior();

        var i:int = 0;
        for each(var value:Object in dict)  
        {
            i++;
        }
        trace(i);
    }
} 
```

很简单。

然后是子类：

```
public class Bar extends Foo
{
    override protected function subclassBehavior():void
    {
        dict["a"] = "b";
    }
} 
```

然后如果我这样做：

```
var instance:Foo = new Bar();
instance.accessDictionary(); 
```

我希望跟踪返回 1。相反，它返回 0。就 Foo 中的任何方法而言，dict 中的条目并不存在。如果我在 Bar 中有另一个查看 dict 的函数，它将看到该条目。我尝试在 Bar 中实例化字典并将其传递给 Foo，将 Bar 中的调用更改为调用 Foo 中更新字典的方法等，这些似乎都没有改变我的情况。

我是否需要覆盖基类中的所有功能，以反映子类中的其他覆盖行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:09:56.623

我不确定是否每个人都在使用字典。你可以试试

```
for(var key:String in dict)
{
  i++;
} 
```

# sql-server - 如何将一个数据库中的表与 SQL Server 中另一个数据库的视图连接起来

> ID：15776321
> 
> 赞同：0
> 
> 时间：2013-04-02T23:34:01.720
> 
> 标签：sql-server, sql-server-2008

我有一个在数据库中调用的表并在`TableA`数据库中`A`查看`ViewB``B`

我试图简单地将表与视图连接起来以编写查询。例如：

```
SELECT * 
FROM TABLEA a, B.VIEWB b 
WHERE a.id = b.id 
```

但是，它不起作用。

连接来自不同数据库的表和视图的方法是什么？我应该创建一个同义词吗？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:36:51.030

您可以使用三部分命名或创建同义词。

三部分命名将是：

```
SELECT * 
FROM DatabaseA.Schema.TABLEA a
join DatabaseB.Schema.VIEWB b ON a.id = b.id 
```

创建同义词：

```
CREATE SYNONYM DatabaseB_ViewB
FOR DatabaseB.Schema.VIEWB;
GO

USE DatabaseA
GO

SELECT * 
FROM TABLEA a
join DatabaseB_ViewB b ON a.id = b.id 
```

# javascript - 向 JavaScript 模块模式添加方法

> ID：15776323
> 
> 赞同：0
> 
> 时间：2013-04-02T23:34:10.623
> 
> 标签：javascript, module

刚刚学习了 JavaScript 模块模式。爱它！

因此，我创建了我的通用自定义库，该库位于我所有项目中包含的一个文件中。然后我想为每个单独的项目添加几个项目特定的方法，并将它们放在一个单独的文件中。我不想为这些方法创建一个全新的对象，而是想将它们添加到我现有的 MODULE 对象中。

我该怎么做呢？谢谢

```
var MODULE = (function () {
    var my = {},
        privateVariable = 1;

    function privateMethod() {
        // ...
    }

    my.moduleProperty = 1;
    my.moduleMethod = function () {
        // ...
    };

    return my;
}()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T23:51:04.413

你可以通过说来添加一个属性或函数`Module.namedproperty = ...whatever...`

但应该注意的是，如果这是在不同的文件中，*它将无法访问模块状态中的任何私有变量*。

如果您想为这些新方法提供额外的私有状态，或者不想担心首先运行哪个文件，您可以像这样设置您的模块

```
var MODULE = (function (my) {
    var privateVariable = 1;

    function privateMethod() {
        // ...
    }

    my.moduleProperty = 1;
    my.moduleMethod = function () {
        // ...
    };

    return my;
}(MODULE||{})); 
```

如果尚未创建模块，它将创建一个新模块，如果有，则添加到现有模块。

私有变量仍然是它们自己的特定闭包私有的，而不是整个命名空间/模块的私有变量。

### 更新解释

此模块格式将输入输入到其闭包函数中。如果 MODULE 已经定义，则接收 MODULE 对象，否则创建一个新的空对象。 `||`是逻辑或，因此`MODULE||{}`与“如果 MODULE 已定义且为真（像 MODULE 这样的对象将是），则传递它，如果它未定义或以其他方式为假，则传递一个空对象。

额外的括号不是绝对必要的，但它们是一种约定，以明确传递函数的结果，而不是函数本身。

# networking - 低延迟点对点 udp 隧道库？

> ID：15776328
> 
> 赞同：3
> 
> 时间：2013-04-02T23:34:38.437
> 
> 标签：networking, udp, p2p

我有兴趣开发一个点对点网络，该网络使用 UDP 隧道绕过 NAT，以实现类似于多人游戏的低延迟通信。将有中央服务器可用于身份验证和识别外部 IP 地址。是否有带有 LGPL 或 BSD（等）许可证的开源库？如果可能的话，我想避免重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T21:56:37.797

以下开源库都是 ICE 的变种或直接实现，用于 UDP 的 P2P NAT 穿越场景。

[PJNATH](http://www.pjsip.org/pjnath/docs/html/)

[图书馆](http://nice.freedesktop.org/wiki/)

[libjingle](https://developers.google.com/talk/libjingle/)

我一直在使用 pjnath，发现它非常好、强大，并且拥有最广泛的平台支持。

[在此处](https://stackoverflow.com/a/8524609/104458)查看我关于 UDP NAT 传输和 P2P 的基础知识的经典答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:46:17.260

你应该看看 zeroMQ，它是一个简单的库，它封装了 TCP/UDP 网络以创建分布式协议。每种语言都有绑定。

对于 P2P，您可以使用以下模式：

*   PGM/EPGM 用于发现 LAN 上的 P2P 成员（它使用多播）
*   REQ/REP 向一位成员提问
*   PULL/PUSH 用于在网络上复制一个资源
*   发布/订阅以将文件传输给所有请求者

# mysql - MySQL中两个表的自然连接

> ID：15776330
> 
> 赞同：0
> 
> 时间：2013-04-02T23:34:42.810
> 
> 标签：mysql, sql, inner-join

在过去一小时的大部分时间里，我一直在查看这段代码，试图找出我的失误。这可能很明显，但是在电脑前呆了这么久之后，我可能只需要第二双眼睛就可以让它弹出。我连接了多个表以使它们保持 1NF 和 2NF，但有两个表让我绊倒。

我有一个名为 my_contacts 的主表，还有一个名为 zip_code 的包含州/城市信息的表。zip_code 保存主键行“zip_code”，my_contacts 保存其外键。

问题是，当我尝试加入他们时，我什么也得不到。我在什么地方搞砸了吗？以下是每个的 SHOW CREATE TABLEs：

对于 my_contacts：

```
 CREATE TABLE `my_contacts` (
    `contact_id` int(11) NOT NULL AUTO_INCREMENT,
    `last_name` varchar(100) DEFAULT NULL,
    `first_name` varchar(100) DEFAULT NULL,
    `phone` varchar(13) DEFAULT NULL,
    `email` varchar(100) DEFAULT NULL,
    `gender` char(1) DEFAULT NULL,
    `birthday` date DEFAULT NULL,
    `prof_id` int(11) DEFAULT NULL,
    `zip_code` int(11) DEFAULT NULL,
    PRIMARY KEY (`contact_id`),
    KEY `mc_profid_fk` (`prof_id`),
    KEY `my_zip_fk` (`zip_code`),
    CONSTRAINT `mc_profid_fk` FOREIGN KEY (`prof_id`) 
    REFERENCES `profession` (`prof_id`),
    CONSTRAINT `my_zip_fk` FOREIGN KEY (`zip_code`) REFERENCES `zip_code` (`zip_code`)
    ) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 
```

对于邮政编码：

```
 CREATE TABLE `zip_code` (
    `zip_code` int(11) NOT NULL AUTO_INCREMENT,
    `city` varchar(50) DEFAULT NULL,
    `state` char(2) DEFAULT NULL,
    PRIMARY KEY (`zip_code`)
    ) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:40:53.513

表`zip_code`中`zip_code`的 设置为 auto_increment。

对于该表中的该字段，这似乎不是一个可能的选择。你实际存储在`zip_code`哪里？顺便说一句，我希望实际的邮政编码存储为字符串，以处理前导 0。邮政编码可能看起来像一个数字，但它实际上不是一个（排序不是很明确，算术运算没有意义）。

# javascript - jQuery最接近的元素不是自我

> ID：15776333
> 
> 赞同：0
> 
> 时间：2013-04-02T23:35:06.423
> 
> 标签：javascript, filter, coordinates, touch-event

尝试在活动`document.elementFromPoint()`期间使用`touchEnd`。它工作正常，因为它显示了最高可见元素，但问题是我正在转换正在移动的元素，因此它始终是最可见的。

我想知道是否有两者的组合，`elementFromPoint`那`not()`会起作用吗？我一直在测试，只是被退回`undefined`。

```
var x = orig.changedTouches[0].pageX,
    y = orig.changedTouches[0].pageY,
    d = $(document.elementFromPoint(x, y)).not('.moving'); 
```

“moving”是一个类，表示正在转换的元素。这些元素与`document.elementFromPoint()`. 从逻辑上讲，我正在寻找那些没有移动的坐标处的任何元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:49:06.857

不幸的是，我认为这个功能不能使用 Javascript 以标准方式实现。但是，该开发人员设计了一种策略，允许跟踪应该支持您需要做的事情的自定义层：http: [//www.vinylfox.com/forwarding-mouse-events-through-layers/](http://www.vinylfox.com/forwarding-mouse-events-through-layers/)

# php - 具有以下兄弟姐妹的强元素后的 xpath 文本不起作用

> ID：15776334
> 
> 赞同：2
> 
> 时间：2013-04-02T23:35:08.277
> 
> 标签：php, html, xpath, simplexml, siblings

我检查并在许多示例中

```
following-sibling::text()[1] 
```

在强标签之后作为接收文本的正确答案给出。我用星号标记了我感兴趣的文本：

```
 <?php
    $html='
      <html>
        <head>
        </head>
        <body>    
            <div class="someclass">
                <h2 class="h3">header 1</h2>
                <ul class="bulleted">
                    <li><strong>prop1: </strong>**name**</li>
                    <li><strong>prop2: </strong>**street**</li>
                    <li><strong>prop is 3: </strong>**city**</li>
                    <li><strong>prop 4: </strong>**more**</li>
                </ul>
            </div>
        </body>
    </html>
';
    $doc = new DOMDocument();
    $doc->strictErrorChecking = FALSE;
    $doc->loadHtml($html);
    $data = simplexml_import_dom($doc);
    $properties = $data->xpath('//strong/following-sibling::text()[1]');

    var_dump($properties); 
```

我总是得到的是 [strong] 的内容，而不是 [li] [/li] 中没有 [strong] 内容的文本：

```
array(4) {
  [0] =>
  class SimpleXMLElement#3 (1) {
    public $strong =>
    string(7) "prop1: "
  }
  [1] =>
  class SimpleXMLElement#4 (1) {
    public $strong =>
    string(7) "prop2: "
  }
  [2] =>
  class SimpleXMLElement#5 (1) {
    public $strong =>
    string(11) "prop is 3: "
  }
  [3] =>
  class SimpleXMLElement#6 (1) {
    public $strong =>
    string(8) "prop 4: "
  }
} 
```

如果您指出我犯的错误，我会很高兴...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T00:07:27.227

不要将此 XPath 操作使用 SimpleXML，它在某些方面受到限制，在您的情况下，限制是您不能使用 SimpleXML Xpath 返回文本节点。[DOMXPath](http://php.net/class.domxpath)功能更强大，它可以返回所有节点类型，包括文本节点：

```
$xpath = new DOMXpath($doc);
$properties = $xpath->query('//strong/following-sibling::text()[1]');

foreach ($properties as $property)
  var_dump($property->textContent); 
```

结果：

```
string(8) "**name**"
string(10) "**street**"
string(8) "**city**"
string(8) "**more**" 
```

# c++ - 编译时覆盖关键字引发错误

> ID：15776338
> 
> 赞同：7
> 
> 时间：2013-04-02T23:35:29.790
> 
> 标签：c++, c++11, g++, overriding

我有基类

```
template<typename T>
Class Base {
  Base();

public:
  virtual void myfunc()=0; 
} 
```

我有派生类

```
template<typename T>
Class Derived: public Base<T> {
  Derived():Base() {
  }

public:
  void myfunc() override; 
} 
```

当我编译时`g++ -std=c++0x`，我得到了突出显示覆盖函数的错误， `error: expected ‘;’ at end of member declaration` `error: ‘override’ does not name a type`

g++ 版本是 4.6。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T23:43:04.433

**GCC 4.6 不支持**override关键字。**如果要覆盖 myfunc，只需删除 override 关键字或将 GCC 升级到 4.7 版本。（参考：[https](https://blogs.oracle.com/pcarlini/entry/c_11_tidbits_explicit_overrides) ://blogs.oracle.com/pcarlini/entry/c_11_tidbits_explicit_overrides ）**

 *** * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T23:43:25.920

g++ 4.6.3 不支持`override`C++11 的特性。当您消除语法错误时，此代码在[4.7.2](http://liveworkspace.org/code/4yc7Hy%243516)和 Clang 中编译得很好。

此外，我认为这就是您的代码的意思：

```
template <typename T>
class Base {
   Base();

   public:
      virtual void myfunc() = 0; 
};

template <typename T>
class Derived : public Base<T> {
   Derived() : Base<T>() {}

   public:
      void myfunc() override;
}; 
```**

# c - 更改 Emacs 中的默认编译器？

> ID：15776339
> 
> 赞同：5
> 
> 时间：2013-04-02T23:35:32.087
> 
> 标签：c, gcc, emacs, makefile, clang

我`M-x compile`在 Emacs 中使用来编译我的 C 代码，然后启动`make -k`并允许我编译代码。我希望使用 Clang（或者可能是安装后的 GCC 4.8）作为默认编译器。我有`cc`别名`clang -Wall -Werror -std=c99 -ggdb -O0`，虽然它`Clang`是从 Emacs 外部的命令行调用的，`M-x compile`但从 Emacs 内部调用似乎仍然`cc`是我安装的 GCC 版本 4.7 的别名。我希望利用 Clang（和 GCC 4.8）提供的更丰富、更易于理解的错误和警告消息，但不希望为我正在编写的每个学生级短程序创建单独的 makefile，因为我目前正在经历 K&R，包括解决练习。

我如何说服 Emacs`M-x compile`并且`make -k`应该调用 Clang（或 GCC 4.8）而不是旧版本的 GCC？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T23:46:29.277

这不是emacs，这是make。它默认使用环境变量 CC，而 CC 又默认为 gcc。在启动 emacs 之前运行它（假设您使用的是 Unix）：

```
$ export CC=clang 
```

或者，使用直接指定 CC 的生成文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T23:44:44.723

您可以编写一个makefile，并在编译行显式使用clang。

像这样的东西会起作用：

```
抄送=叮当
CFLAGS= -Wall -Werror -std=c99 -ggdb -O0

％： ％。C
	$(CC) $(CFLAGS) $^ -o $@

```

请注意，最后一行需要以选项卡开头才能实际工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T18:36:19.643

假设在您的 makefile 中，您`$(CC)`用于编译代码，您可以执行以下操作之一：

*   当您这样做时`M-x compile`，您可以将编译命令更改为`CC=clang make -k`.

*   `.emacs`在您的文件中添加以下行：

    `(setq compile-command "CC=clang make -k")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T20:22:22.770

您也可以不使用`make`. @Lazylabs 提到您可以更改`compile-command`. 要使其特定于模式，请将其添加到您的 Emacs 配置中：

```
(add-hook 'c-mode-hook
      (lambda ()
        (setq compile-command 
              (concat "clang -Wall -Werror -std=c99 -ggdb -O0" buffer-file-name)))) 
```

默认情况下它将使用当前文件名。

# c# - 尾随点从 URL 中截断

> ID：15776341
> 
> 赞同：4
> 
> 时间：2013-04-02T23:35:44.497
> 
> 标签：c#, httpwebrequest, webdav

我正在使用 IT HIt WebDAV 引擎在 .Net 中创建 WebDAV 服务器。

这是问题：

当 URL 以点 ('.') 结尾时，将从 URL 中截断点。例如：“ [http://webdav.company.com/Company/My](http://webdav.company.com/Company/My) Company, Inc.” 原始的 Context.Request.Path 最后没有点。任何想法为什么会发生这种情况，是否有解决方法？

我在 IIS 7.5、.NET Framework 4.0 中托管解决方案

我还将 web.config 中的 relaxUrlToFileSystemMapping 属性设置为 true。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:06:12.157

使用适用于 Visual Studio 的 IT Hit WebDAV 服务器引擎向导生成的代码并选择了“在文件系统中存储文件和元数据”选项时，您可能会遇到此问题。

这是 Windows 文件系统的限制，据我所知，没有任何解决方法。这是[MSDN 所说的](http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx)：

> 不要以空格或句点结尾的文件或目录名称。尽管底层文件系统可能支持此类名称，但 Windows shell 和用户界面不支持。

如果您使用数据库或任何其他存储，您将不会遇到此问题。

# gtk - 创建 Gtk::Dialog 时出错

> ID：15776343
> 
> 赞同：0
> 
> 时间：2013-04-02T23:35:59.533
> 
> 标签：gtk, gtkmm

我正在尝试在单击按钮时创建一个对话框。单击按钮时调用的函数是这样的：

```
void clicked(){
const std::string title = "Title";
Gtk::Dialog *m_dialog(title, false);
} 
```

我在创建对话框的最后一行不断收到错误消息。

我得到的两个错误如下：

```
error: expression list treated as compound expression in initializer [-fpermissive]
error: cannot convert ‘bool’ to ‘Gtk::Dialog*’ in initialization 
```

根据 gtkmm 参考，第一个参数应该是标题，第二个参数应该是布尔值，指示它是否应该是模式。

有谁知道我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:39:31.903

你可能打算

```
Gtk::Dialog m_dialog(title, false); 
```

或者

```
Gtk::Dialog *m_dialog = new Gtk::Dialog(title, false); 
```

# c++ - Visual C++ 和 SDL 没有正确导出？

> ID：15776345
> 
> 赞同：0
> 
> 时间：2013-04-02T23:36:11.847
> 
> 标签：c++, visual-studio-2010, sdl

我的主要编程语言是 c++，唯一对我有用的 ide 是 Visual Studio。我将 SDL 用于我的图形组件和主要刻度，以使我的工作更轻松。但问题是，当我尝试导出我的游戏并构建解决方案和其他东西时，SDL 没有得到处理，因此当我分发游戏时，它不起作用。它经常会抱怨缺少“SDL.dll”，即使我专门测试以确保它被包含在内。如何使 SDL 可以在其他计算机上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:16:32.593

Zammalad 的链接很好。但我喜欢做的另一件事是确保每次运行时都将 DLL 复制到构建目录中。那么您就不必担心系统中是否安装了正确的 DLL（32 位或 64 位）以及是否在 PATH 中定义了它。

我的 SDL 安装在 C:\SDL-1.2.15。在 Visual Studio 中，我在项目的属性下执行此操作。

转到“构建事件”选项卡和“发布构建事件”并添加

```
copy /y C:\SDL-1.2.15\lib\x86\SDL.dll "$(OutDir) 
```

那是 64 位的 32 位

```
copy /y C:\SDL-1.2.15\lib\x64\SDL.dll "$(OutDir) 
```

请参阅我在 [使用 C 中的 DLL 的评论](https://stackoverflow.com/questions/15592870/using-dlls-in-c/15611173#15611173)

# dynamic - 在绘图期间使用定位器坐标来索引矩阵

> ID：15776346
> 
> 赞同：0
> 
> 时间：2013-04-02T23:36:11.907
> 
> 标签：dynamic, graphics, wolfram-mathematica, interactive

我想“绘制”到 Mathematica 中的矩阵中。也就是说，我想使用鼠标（例如，使用 EventHandler）将矩阵索引处的值从 0 更改为 1。最简单的方法似乎是使用定位器坐标 p，取舍入值这些坐标，并将该值处的矩阵位置分配为 1。这似乎不起作用，因为 M[[Sequence @@ Round[p]]]=1 中的“Sequence @@ Round[p]”形式不导致正确的索引，因为 p 本身就是一个动态量（可以使用 FullForm 看到）。

做这样的事情似乎非常有用，但我找不到对此的引用，或者任何其他采用定位器坐标输出并将其用作数组索引的方法。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:36:04.470

我的经验是定位器非常适合它们的本质，但试图概括它们并不能很好地发挥作用。幸运的是，您想要做的仍然非常简单。

```
clickFunction[point,moreargs]:=Module[{}, see below ];

DynamicModule[{},

  ClickPane[
    Dynamic[Show[ what you want to click on ]],
    clickFunction[#,moreargs]
  ]
] 
```

当用户在窗格中单击时，将使用鼠标指针的坐标和可能的其他参数调用 clickFunction。您可以将 Dynamic[] 放置在 click 函数调用中的各个参数周围（在 DynamicModule 的第一个参数中添加符号，使它们成为动态的）。clickFunction 也可以返回值，使用形式

```
 ({v1,v2,v3,..}=clickFunction[#,moreargs])& 
```

返回值列表中的符号可以是动态的，但不应具有动态包装器。

clickFunction 需要弄清楚点击了什么。对于单击窗格上的每个区域（假设它是矩形），使用其左下角和右上角创建 x 和 y 不等式，当点参数位于或超出矩形时返回 true 或 false。您可以将它们保存在一个列表中，您可以使用适当的函数遍历该列表以检测单击的内容。

不要回避 Dynamic[]。我试图用 Manipulate[] （和定位器）做事情太久了，认为 Dynamic[] 是一个很大的学习曲线。它不是。

# perl - 解析文本，在 `:` 冒号后选择值，修剪周围的空白

> ID：15776352
> 
> 赞同：0
> 
> 时间：2013-04-02T23:36:45.290
> 
> 标签：perl, bash, awk

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T05:10:30.183

While I personally go for awk as a first recourse for this sort of thing, the code you use there is perhaps not as general as you'd like. In particular, by setting the field separator as you've done, you run the risk of it getting recognized on the right-hand side of your property lines, making `$2` not actually be the full property value. I think you'd probably be better off avoiding using FS at all and doing something like the following, which operates on the full original line(s):

```
awk '{ sub(/^[^:]*:[:blank:]*/, ""); print }' 
```

which is the slightly abbreviated version of:

```
awk '{ sub(/^[^:]*:[:blank:]*/, "", $0); print $0; }' 
```

That is, remove (replace with the empty string) from the line (`$0`) everything up to the first colon followed by zero or more blanks. Print the result.

For a bash version, I'd use the match operator available in `[[` expressions. The variable name you have to use for extracted sub-expressions is a bit verbose, but I like that I can use less quirky (or at least the usual expected quirks of) regular expression syntax:

```
[[ $v =~ ^[^:]*:[:blank:]*(.*) ]] && echo "${BASH_REMATCH[1]}" 
```

The regex here is mostly the same as the one used in the awk version above.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T23:49:18.950

Another Perl version:

```
lsb_release -d | perl -pe 's/^[^:]*:\s*//;s/\s*$//;' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T01:04:46.717

Perl has a [module available](https://metacpan.org/module/Config%3a%3aProperties%3a%3aCommons) to parse Commons Configuration files. As an (overengineered) one-liner:

```
lsb_release -d | perl -MConfig::Properties::Commons -E'say Config::Properties::Commons->new(load_file=>\*STDIN)->get_property("Description")' 
```

As a normal script:

```
#!perl
use strict; use warnings; use 5.010;

use Config::Properties::Commons;

my $cpc = Config::Properties::Commons->new;
$cpc->load($ARGV[0] // \*STDIN);

say $cpc->get_property("Description"); 
```

Without that module, I would use `split`:

`split /:\s*/, $_` would split on any colon and remove all following whitespace,
`split /:\s*/, $_, 2` will split the string into two pieces max (so the value can include colons),
and `(split /:\s*/, $_, 2)[1]` will return the second fragment. Therefore

```
lsb_release -d | perl -lne's/\s*$//, print for (split /:\s*/, $_, 2)[1]' 
```

would work as well.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T05:14:23.613

I guess this could still be considered a one-liner:

```
lsb_release -d|php -r "echo trim(end(explode(':', file_get_contents('php://stdin'), 2)));" 
```

Sadly PHP doesn't have a shorthand to handle fetching from `stdin` ;-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T15:04:21.267

If you truly want to actually *parse* text like you described, you could use [YAML::XS](https://metacpan.org/module/YAML%3a%3aXS).

```
$ lsb_release -d | perl -MYAML::XS -E'local $/;say Load(<>)->{Description}'
Ubuntu 12.04.2 LTS 
```

```
$ perl -MYAML::XS -MData::Printer -E'p Load(do{local $/;<>})'
key1: value1
key2: value2
^d
\ {
    key1   "value1",
    key2   "value2"
} 
```

(`^d` represents pressing `Ctrl` + `d`)

The output of [Data::Printer](https://metacpan.org/module/Data%3a%3aPrinter) is actually more colorful than can be reproduced here.

# c# - WP7 - 删除多个项目 Linq to XML

> ID：15776353
> 
> 赞同：0
> 
> 时间：2013-04-02T23:36:49.140
> 
> 标签：c#, silverlight, windows-phone-7, xaml, linq-to-xml

我需要从我的 XML 文件中删除节点中的所有项目，`Finished != ""`但我的代码仅删除此条件为真的第一项

我的代码：

```
try
{
    var file = IsolatedStorageFile.GetUserStoreForApplication();
    XElement xElem;

    using (IsolatedStorageFileStream read = file.OpenFile("tasks.xml", FileMode.Open))
    {
        xElem = XElement.Load(read);
    }

    var tasks = from task in xElem.Elements("Task")
                where (string)task.Element("Finished") != ""
                select task;

    using (IsolatedStorageFileStream write = file.CreateFile("tasks.xml"))
    {
        foreach (XElement task in tasks)
        {
            task.Remove();
        }

        xElem.Save(write);
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
}
finally
{
    NavigationService.GoBack();
} 
```

但是如果我用它替换`task.Remove();`它`MessageBox`会多次显示消息框，因为它是正确的。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:04:25.257

You should call `ToList()` when you search for items and then use that list as a source in `foreach` loop, instead of `IEnumerable`.

```
var tasks = (from task in xElem.Elements("Task")
             where (string)task.Element("Finished") != ""
             select task).ToList(); 
```

It's described on MSDN, within [`XNode.Remove`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xnode.remove.aspx) method description:

> In LINQ to XML programming, you should not manipulate or modify a set of nodes while you are querying for nodes in that set. In practical terms, this means that **you should not iterate over a set of nodes and remove them**. Instead, you should materialize them into a List by using the ToList extension method. Then, you can iterate over the list to remove the nodes. For more information, see Mixed Declarative Code/Imperative Code Bugs (C#) (LINQ to XML).

# c++ - 有没有更好的方法来分配/复制 shared_array

> ID：15776364
> 
> 赞同：2
> 
> 时间：2013-04-02T23:38:18.213
> 
> 标签：c++, boost, shared-ptr

我有一个提供`GetBuffer()`和`GetBufferSize()`方法的流对象。该`GetBuffer`方法返回一个原始`uint8_t`指针。我想（按值）将此缓冲区传递给另一个需要`shared_array<uint8_t>`. 我正在使用 boost，（我对它相当陌生），这就是我想出的。

```
// relevant protos for a and b
void BClass::SetData(shared_array<uint8_t> data, size_t data_len);
uint8_t* AClass::GetBuffer(void);
size_t AClass::GetBufferSize(void);

AClass a;
BClass b;

shared_array<uint8_t> data = shared_array<uint8_t>(new uint8_t[a.GetBufferSize()]);
memcpy(data.get(), a.GetBuffer(), a.GetBufferSize());
b.SetData(data, a.GetBufferSize()); 
```

感觉应该有类似于 boost 的 make_shared 的东西可以清理它。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:40:22.223

在`Boost 1.53` [我们有`make_shared`数组](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/make_shared_array.html#example)。因此，您的代码可能如下所示：

```
shared_ptr<uint8_t[]> data = make_shared<uint8_t[]>(a.GetBufferSize()); 
```

当然，那么您需要更改`BClass::SetData`签名，接受`shared_ptr`而不是`shared_array`.

# html - HTML 最佳实践：我应该使用 ' 还是特殊的键盘快捷键？

> ID：15776365
> 
> 赞同：53
> 
> 时间：2013-04-02T23:38:21.910
> 
> 标签：html, apostrophe, smart-quotes

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-02T23:54:24.677

I don't think that one is better than the other in general; it depends on how you intend to use it.

*   If you want to store it in a DB column that has a charset/collation that does not support the right single quote character, you may run into storing it as the multi-byte character instead of 7-bit ASCII (`&rsquo;`).
*   If you are displaying it on an html element that specifies a charset that does not support it, it may not display in either case.
*   If many developers are going to be editing/viewing this file with editors/keyboards that do not support properly typing or displaying the character, you may want to use the entity
*   If you need to convert the file between various character encodings or formats, you may want to use the entity
*   If your HTML code may escape entities improperly, you may want to use the character.

In general I would lean more towards using the character because as you point out it is easier to read and type.

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-11-20T21:47:14.090

Typographically, the correct glyph to use in sentence punctuation is the quote mark, both single (including for apostrophes) and double quotes. The straight-looking mark that we often see on the web is called a prime, which also comes in single and double varieties and has limited uses, mostly for measurements.

[This article](http://webdesignledger.com/tips/common-typography-mistakes-apostrophes-versus-quotation-marks) explains how to use them correctly.

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-08-10T22:42:49.727

With `&rsquo;` you know for certain that the output will be correct, no matter what.

I wish `&apos;` would output the proper apostrophe and not the typewriter apostrophe.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-31T17:41:04.807

You should only use `&rsquo;` if your intention is to make either a closed single quotation mark or an apostrophe. Both of these punctuation marks are curved in shape in most fonts. If your intent is to make a foot mark, go the other route. A foot mark is always a straight vertical mark.

It’s a matter of typography. One way is correct; the other is not.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-25T13:48:47.070

If your text will be consumed by non-browsers then it's safer to type the character with the keyboard-combo `option shift right bracket` because `&rsquo;` will not be transformed into an apostrophe by a regular XML or JSON parser. (e.g. if you are serving this content to native Android/iOS apps).

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-12T13:26:27.697

One risk of using the keyboard shortcut is that it requires using a non-ASCII encoding. That might be fine, but if your source is loaded by different editors in different locales, you might hit trouble somewhere along the line.

It might be safer to use either `&#8217;` or `&rsquo;` (which are equivalent) as both are ASCII.

# c# - 错误地定义自定义类型？

> ID：15776374
> 
> 赞同：3
> 
> 时间：2013-04-02T23:38:53.637
> 
> 标签：c#, .net, winforms

在下面的代码中，我试图定义一个自定义类型：

```
public class WindowPosition
{
    public static WindowPosition Below;
    public static WindowPosition Right;
}

private void ChildWindow(Form Form, WindowPosition Position)
{
    Form.Location = new Point(
        Position == WindowPosition.Right ? this.Location.X + this.Width : 0,
        Position == WindowPosition.Below ? this.Location.Y + this.Height : 0
    );

    Form.Show();
}

private void buttonNew_Click(object sender, EventArgs e)
{
    ChildWindow(new New(), WindowPosition.Below);
} 
```

该代码应该使`New`表单直接在主表单*下方*打开- 但它在此处打开：

![一种](https://i.stack.imgur.com/anmkz.png)

`New`的`StartPosition`设置为`Manual`。

我认为我不正确地定义了类型。我该如何正确定义它？

或者其他问题是什么，或者我是以错误的方式处理这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T23:41:39.080

你想要一个枚举，而不是一个类。

```
enum WindowPosition {
     Right,
     Bottom
} 
```

像这样引用它：`WindowPosition.Right`

您正在做的是声明一个类，然后说它有 2 个与它相同类型的静态成员，这对于某些不同的应用程序来说并非完全不合理，但它不适用于此。

它不适用于您的代码的原因是因为它们都没有被分配任何东西，因此它们都 return `null`，这将使`WindowPosition.Right == WindowPosition.Left`return 为真。

# c++ - 缺少.dll文件c ++

> ID：15776378
> 
> 赞同：0
> 
> 时间：2013-04-02T23:39:24.540
> 
> 标签：c++

我在 C++ Visual Studios Express 2010 中编码并且一直在创建一个程序。我认为它会运行良好，但是当其他人尝试运行它时，他们只是缺少 .dll 错误。我知道我可能没有正确获取 .exe，但我不知道该怎么做。

有人可以告诉我如何编译 CLR 控制台应用程序以便它们包含这些库吗？

.dll文件是MSVCR100D.dll，不知道还有没有。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:40:26.620

看起来您已经在调试模式下构建了应用程序。您需要在 Release 模式下重建它，然后分发。

![调试模式 - Visual Studio](https://i.stack.imgur.com/0NQpT.jpg)

# css - CSS 直接后代选择器

> ID：15776379
> 
> 赞同：0
> 
> 时间：2013-04-02T23:39:31.540
> 
> 标签：css, css-selectors

我遇到了一些麻烦，我相信这个看似微不足道的问题有一个简单的解决方法。

我的 HTML 页面设置如下：

```
<ul class="locations">
   <li>
      Georgia
      <ul class="children">
         <li>
            Fulton County
            <ul class="children">
               <li>
                  Atlanta
               </li>
            </ul>
         </li>
      </ul>
   </li>
</ul> 
```

我正在尝试以一种方式设置“父母”列表项的样式，以一种方式设置“孩子”，以另一种方式设置“孙子”。

我尝试了以下方法：

```
ul li{
    list-style: none;
    margin: 0;
}
ul.locations li+ul.children li{
    margin-left: 15px;
    clear: both;
}
ul.locationsli+ul.children li+ul.children li{
    float: left;
} 
```

在这种情况下，我希望“孙子”彼此相邻浮动......无论我如何工作，`clear:both;`似乎都适用于“子”和“孙”项目。我也尝试过`>`用作 CSS 选择器，但没有成功。

关于解决这个问题的任何想法？TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T23:45:19.763

您将兄弟姐妹（`~`或`+`）与直系后代（`>`）混淆了。试试这个：

[jsFiddle](http://jsfiddle.net/kVX3C/1/)

```
ul li{
    list-style: none;
    margin: 0;
}
ul.locations > li > ul.children > li{
    margin-left: 15px;
    clear: both;
}
ul.locations > li > ul.children  > li > ul.children > li{
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:44:27.443

您的示例根本没有任何兄弟姐妹，但是根据您的描述，您甚至不想使用兄弟姐妹选择器（兄弟姐妹是层次结构中同一级别的元素）。基本上，如果您删除所有`+`s，您所拥有的将起作用，但您还需要`clear: none`孙辈。

```
ul li{
    list-style: none;
    margin: 0;
}
ul.locations li ul.children li{
    margin-left: 15px;
    clear: both;
}
ul.locations li ul.children li ul.children li {
    float: left;
    clear: none;
} 
```

[http://jsfiddle.net/pT8LA/](http://jsfiddle.net/pT8LA/)

# c - 从单链表中删除节点 -- 使用 MALLOC/FREE

> ID：15776381
> 
> 赞同：0
> 
> 时间：2013-04-02T23:39:36.777
> 
> 标签：c, data-structures, linked-list, malloc

我正在编写从单链表中删除节点的常见方法，但我不确定我删除它们的方式（通过使用 FREE()）是否正确。我想真正删除节点并释放内存。我已经提供了 Node 的 strut 定义以及如何创建 Node 结构。

我理解在 Java 中任何时候都没有指向数据，它会被自动清理。我想C，我必须免费使用，但我使用正确吗？例如下面的例子，当我“释放”电流时，我可以在之后做电流参考吗？做这个的最好方式是什么？

谢谢，我希望我的问题很清楚！

```
typedef struct Node {
    int data;
    struct Node *next;
} Node;

struct Node* newNode(int value) {
    struct Node* node = (Node *)malloc(sizeof(struct Node));
    if (node == NULL) {
        // malloc fails. deal with it.
    } else {
        node->data = value;
        node->next = NULL;
    }
    return node;
}

void delete(int value, struct node *head) {
    struct Node* current = head;
    struct Node* previous = NULL;

    while (current != NULL) {
        if (current->data == value) {
            if (previous == NULL) {
                current = current->next;
                free(head);
            } else {
                previous->next = current->next;
                free(current);
                current = previous->next;
            }
        } else {
            previous = current;
            current = current->next;
        }
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:48:10.777

这是对的。当您使用`free`并提供指针时，指针当前指向的数据将在内存中释放。指针本身存储在其他地方，可用于指向“释放”后的不同数据。`previous->next = current->next`删除非头节点（和`current = previous->next`）时，您在前一个节点和下一个节点之间创建链接是正确的。

我对您的代码建议的一个补充是，在释放后`head`您应该将头指针重新分配给新的头后删除，在这种情况下将是最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-24T16:19:42.913

希望这可以帮助，使用`free()`命令

```
struct Node
{
     int data;
     struct Node *next;
}
Node* Delete(Node *head, int position)
{
  Node *temp1 = head;
  if(position==0){
      head = temp1->next;
      free(temp1);
      return head;
  }
  Node *temp2;
  while(position>1){
      temp1 = temp1->next;
      position--;
  }      
  temp2= temp1->next;
  temp1->next = temp2->next;
  free(temp2);
  return head;
} 
```

# matlab - 在matlab中创建特定的大矩阵

> ID：15776383
> 
> 赞同：2
> 
> 时间：2013-04-02T23:39:45.667
> 
> 标签：matlab

我的问题是如何在 matlab 程序中创建相同类型的矩阵，使其保持相同的逻辑，即主对角线中的 10 秒，然后主对角线周围的上下对角线中的 3 秒，以及对角线中的矩阵在其他情况下高于和低于 3 和 0，并且我可以根据我想要的任何 NxN 进行修改？

类似这样的 6x6 机箱

```
A = [10  3  1  0  0  0 ; 
      3 10  3  1  0  0 ;
      1  3 10  3  1  0 ; 
      0  1  3 10  3  1 ; 
      0  0  1  3 10  3 ;
      0  0  0  1  3 10 ]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:45:02.497

代码：

```
toeplitz([10  3  1  0  0  0]) 
```

输出：

```
ans =

    10     3     1     0     0     0
     3    10     3     1     0     0
     1     3    10     3     1     0
     0     1     3    10     3     1
     0     0     1     3    10     3
     0     0     0     1     3    10 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T05:59:09.817

对于非常大的矩阵（`N`=10000），您必须使用稀疏矩阵。
考虑使用以下构造[`spdiags`](http://www.mathworks.com/help/matlab/ref/spdiags.html)

```
function A = largeSparseMatrix( N )
%
% construct NxN sparse matrix with 10 on main diagonal, 
% 3 on the first off-diagonals and 1 on the second off-diagonals
%
B = ones(N, 5); % pre-allocate for diagonals
B(:,1) = 10;  % main diagonal d(1) = 0
B(:,2:3) = 3; % first off diagonal
B(:,4:5) = 1; % second off-diagonal
d = [ 0 , 1, -1, 2, -2 ]; % mapping columns of B to diagonals of A
A = spdiags( B, d, N, N ); % TA-DA! 
```

请注意， 中的某些条目在`B`的构造中被忽略`A`。有关更多信息，
请参阅[手册。](http://www.mathworks.com/help/matlab/ref/spdiags.html)`spdiags`

# python - 初学者 Python 3 语法

> ID：15776387
> 
> 赞同：2
> 
> 时间：2013-04-02T23:40:03.080
> 
> 标签：python, syntax, python-3.x

我一直在用 python 编写一个简单的测验，但在我的 Python GUI 中不断收到“SyntaxError：在编译单个语句时发现多个语句”。请帮忙。

```
print("Welcome to my quiz!")
score = 0
question1 = str(input("What colour is a banana."))
if question.lower() == 'yellow':
    print("Correct. The answer is", question1)
    score = score + 1
else:
    print("Incorrect. The answer is yellow, not", question1)
print score 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T23:43:10.310

你有几个问题。首先，`question`未定义（第 4 行）；那应该是`question1`。其次，`print`是 Python 3 中的一个函数，所以你的最后一行应该是`print(score)`. 第三，`input`已经返回一个字符串，所以你不需要`str`调用。所以第 3 行应该是这样的：

```
question1 = input("What colour is a banana.") 
```

# c - 实时控制音量

> ID：15776390
> 
> 赞同：3
> 
> 时间：2013-04-02T23:40:14.587
> 
> 标签：c, raspberry-pi, audio-processing, portaudio, libsndfile

我目前正在将[libsndfile](http://www.mega-nerd.com/libsndfile/)与[PortAudio V19](http://portaudio.com/docs/v19-doxydocs/tutorial_start.html)结合使用来从文件中读取音频数据并进行播放。（请注意，我是在运行 Raspbian 的 Raspberry Pi 上执行此操作的。）我遇到的问题是，我需要为以这种方式播放的每个音频样本实时动态控制播放音量。我尝试使用系统调用通过 alsamixer 来操纵全局播放音量，这在我的用例中是一个可以接受的解决方案，但是延迟太高而无法工作。

我正在寻找的是两件事之一：

*   一个可以实时处理修改音频音量的库，可以通过对 libsndfile 检索到的原始音频数据进行操作，或者通过设置具有最小延迟（亚毫秒）的全局播放音量。该库必须是免费的（免费）并可在 Raspbian 上使用；许可不是问题。

*   需要对 libsndfile 检索到的音频数据应用数学变换，以修改数据的音量级别，最好目标音量在 [0.0f, 1.0f] 范围内，0.0f 为静音， 1.0f 是文件中的原始卷。

我试图到处寻找有关此主题的有用（免费）材料，但未能找到任何有帮助的东西。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-25T20:31:35.230

您可以通过对每个样本应用乘数来控制 PCM 音频流的幅度。您可以在将每个缓冲区（样本集）传递给 PortAudio 之前执行此操作。它很简单：

```
float buffer[SAMPLES_PER_BUFFER];
const float volumeMultiplier = 0.2f;
for(int i = 0; i < SAMPLES_PER_BUFFER; ++i)
{
   buffer[i] *= volumeMultiplier;
} 
```

但是，诀窍在于如何计算乘数。通常，在将整体信号电平减半之前，您不会注意到信号电平有太大变化`volumeMultiplier = 0.5f`。正如您可能知道的那样，人耳感知的音量变化不是线性的，而是对数的。以下链接可能有助于解释这个概念：

*   [http://en.wikipedia.org/wiki/Decibel#Acoustics](http://en.wikipedia.org/wiki/Decibel#Acoustics)
*   [http://en.wikipedia.org/wiki/Sound_pressure](http://en.wikipedia.org/wiki/Sound_pressure)
*   [http://www.sengpieaudio.com/calculator-levelchange.htm](http://www.sengpielaudio.com/calculator-levelchange.htm)

使用此信息可能会更改上面的代码：

```
float buffer[SAMPLES_PER_BUFFER];
//volume in dB 0db = unity gain, no attenuation, full amplitude signal
//           -20db = 10x attenuation, significantly more quiet
float volumeLevelDb = -6.f; //cut amplitude in half; same as 0.5 above
const float VOLUME_REFERENCE = 1.f;
const float volumeMultiplier = (VOLUME_REFERENCE * pow(10, (volumeLevelDb / 20.f);
for(int i = 0; i < SAMPLES_PER_BUFFER; ++i)
{
   buffer[i] *= volumeMultiplier;
} 
```

出于您的目的，这可能并不重要，但是如果您要将 volumeLevelDb 或 volumeMultiplier 的值附加到像滑块小部件这样的用户界面，则差异会很明显。

您可以将此算法应用于任何数据类型。

# c# - 如何使双击 DataGrid 项目打开更详细的视图？

> ID：15776392
> 
> 赞同：1
> 
> 时间：2013-04-02T23:40:19.500
> 
> 标签：c#, wpf, entity-framework, datagrid

*请原谅任何基本错误 - 我是实体框架和 WPF 的新手。*

我在 TabControl 中有一个 DataGrid。网格绑定到实体框架模型。

我的最终目标是能够双击 DataGrid 中的一行并打开一个新选项卡，其中包含同一记录的更详细视图。

到目前为止，我已经能够捕获双击事件：

```
<Style TargetType="DataGridRow">
    <EventSetter Event="MouseDoubleClick" Handler="MemberRowDblClick" />
</Style> 
```

但无法识别我的 C# 中单击的行。

我也不确定是否有一种聪明的方法可以从行中返回数据。即，如果我想对记录的内容做点什么，从行索引返回有多容易？

很抱歉一次问两个问题，但我偷偷怀疑一个会影响另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:33:06.170

虽然声明为 type `Object`，但`sender`事件处理程序的参数包含触发事件的行。

投射`sender`到`DataGridRow`应该给你你需要的东西。

# javascript - 模型更改时未更新角度视图（DOM 元素）

> ID：15776397
> 
> 赞同：4
> 
> 时间：2013-04-02T23:40:36.033
> 
> 标签：javascript, angularjs, angularjs-scope

在最新的稳定版 Chrome 中运行最新的稳定版 Angular。我在带有 ng 控制器 A 的视图内的 DOM 元素上进行了 ng-click，但 DOM 元素本身有一个 ng-controller 设置为*另一个*控制器 B. ng-click 在控制器 B 内触发，但是会更改范围属性， ng-model 属性绑定到哪个 DOM 元素，不会被反映。

具体来说，我有一个 textarea，以及其他 HTML5 输入类型。没有错误，当我在调试器中中断时，我可以查看范围变量并看到 $scope 实际上指向控制器 B。

Plnkr 示例在这里，请注意它如何只更新同一 DIV 内的输入？：[http ://plnkr.co/edit/DmccNj?p=preview](http://plnkr.co/edit/DmccNj?p=preview)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T00:26:06.003

我最近遇到了同样的问题。显然，当您创建两个具有相同的 HTML 片段时`ng-controller`，它会创建两个单独的控制器实例。因此，在实例 1 中点击“编辑”按钮集`$scope.comment`，但输入字段绑定到控制器的实例 2。

如果你必须这样做，你最好创建一个角度服务，因为它们是单例的。

这是我的问题：[为一个控制器拆分 HTML 组件会导致控制器停止工作](https://stackoverflow.com/questions/15607728/splitting-html-components-for-one-controller-causes-controller-to-stop-working)

此外，[Angular Batarang](https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk/related)是一个非常酷的 Chrome 扩展，来自 AngularJS 团队，用于调试 Angular 应用程序。我之所以提到这一点，是因为如果您（或我）使用过它，我们会立即看到出了什么问题。

# php - 使脚本执行无限

> ID：15776400
> 
> 赞同：63
> 
> 时间：2013-04-02T23:40:52.440
> 
> 标签：php, xampp

我需要在localhost（xampp）中运行一个脚本，它将生成14400条记录并将它们添加到数据库中，我已经设置了`max_execution_time = 50000000000`，我不知道是否可以通过将其设置为0或-1来使其不受限制。但是我之前用这个 max_execution_time 到 50000000000 尝试了这个脚本，但它在某个点停止了，我不知道还有什么可以限制执行时间，我已经运行了很多次，我厌倦了等待和再次失败，什么我应该在再次运行此脚本之前进行更改，这次完成工作吗？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2013-04-02T23:42:58.897

您必须将其设置为零。零意味着脚本可以永远运行。在脚本开头添加以下内容：

```
ini_set('max_execution_time', 0); 
```

参考PHP文档[`max_execution_time`](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)

注意：

```
set_time_limit(0); 
```

会有同样的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-02T05:50:43.357

您的脚本可能正在停止，不是因为 PHP 超时，而是因为您用于访问脚本的浏览器（即 Firefox、Chrome 等）超时。不幸的是，很少有简单的方法来延长这个超时时间，而且在大多数浏览器中你根本做不到。您可以在此处选择通过终端访问脚本。例如，在 Windows 上，您将确保 PHP 可执行文件在您的路径变量中，然后我认为您执行：

```
C:\path\to\script> php script.php 
```

或者，如果您使用的是 PHP CGI，我认为是：

```
C:\path\to\script> php-cgi script.php 
```

另外，您还可以`ini_set('max_execution_time', 0);`像其他人提到的那样在脚本中进行设置。以这种方式运行 PHP 脚本时，我很确定您可以根据需要使用缓冲区刷新定期将脚本的进度回显到终端。我认为这种方法的最大问题是脚本一旦启动就真的无法停止，除了停止整个 PHP 进程或服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-15T14:03:44.117

正如@Peter Cullen 回答提到的那样，您的脚本将首先遇到浏览器超时。因此，提供一些日志输出是个好主意`flush()`，但是连接有缓冲区，除非提供大量输出，否则您将看不到任何东西。以下是有助于提供可靠日志的代码片段：

```
set_time_limit(0);
...
print "log message";
print "<!--"; print str_repeat (' ', 4000); print "-->"; flush();
print "log message";
print "<!--"; print str_repeat (' ', 4000); print "-->"; flush(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-19T07:39:35.280

.htaccess 文件中的以下代码对我有用：

```
php_value max_execution_time 0
RewriteEngine On
RewriteRule .* - [E=noconntimeout:1]
<IfModule mod_security.c>
SecFilterEngine Off
SecFilterScanPOST Off
</IfModule>
<IfModule mod_php5.c>
#Session timeout
php_value session.cookie_lifetime 10
php_value session.gc_maxlifetime 10
</IfModule> 
```

# graph - Three.js 粒子加载速度非常慢？是什么导致了 FPS 的缓慢和大幅削减？（从 60+ fps 到 1-2 fps）

> ID：15776405
> 
> 赞同：0
> 
> 时间：2013-04-02T23:41:06.200
> 
> 标签：graph, 3d, three.js

我无法弄清楚是什么减慢了我的可视化速度。理想情况下，我想要 60 fps。不是 1 fps 或 2 fps。

这是存储库。对于第一个，在 LeapVis1.2 中，如果在下载文件夹后使用 Firefox 打开 index.html，vis 应该加载。 [非粒子](https://github.com/Glchriste/JSGraphVis)

对于使用粒子的存储库，请在 Firefox 中打开 canvas_particles_random.html。 [粒子（更慢）](https://github.com/Glchriste/JSParticleGraphVIs)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:08:40.300

首先这是这个[问题](https://stackoverflow.com/questions/15371176/using-david-piegzas-3d-force-directed-graph-for-large-data-visualization-is-to/15386837?noredirect=1#comment22427449_15386837)的延续。其缓慢的原因是因为您使用的是 CanvasRenderer 而不是 WebGLRenderer。我猜你误会了我。在 three.js 中有两个对象：Particle - 用于画布和 ParticleSystem - 用于 webgl。我从来没有使用过画布，因为它与 webgl 相比非常慢。

# jquery - 取消引用链接的“href”作为 jQuery 中的 DOM 元素

> ID：15776406
> 
> 赞同：0
> 
> 时间：2013-04-02T23:41:05.957
> 
> 标签：jquery, dom, href

```
 $("#my-tab-link").on("show", function(e) {
    console.log(e.target.href);
  }); 
```

这将链接`href`作为字符串提供：

```
file:///...index.html?#mytab 
```

您如何访问链接指向的 DOM 元素，而不仅仅是其 URL？

我可以像这样拼凑它：

```
$(".known-parent-of-target").find($(e.target).attr("href"))[0] 
```

有没有更清洁的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:51:13.947

可能不是最优雅的方式，但它应该有效。如果您已经知道它是一个链接，您可以通过所有 < a > 循环（或每个循环）并找到具有您想要的 url 的那个并在那里更改它......

```
$.each($(a), function(i){
  if(e.target.href == $($(a)[i]).attr("href"){
    alert("holy bananas, this is the link you want!");
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:52:34.043

如果您想`<a>`为当前页面的哈希查找元素，例如 # **mytab**

```
$('a[href="'+window.location.hash+'"]') 
```

或来自字符串/href 属性

```
var url ="file:///...index.html?#mytab";
var idx = url.indexOf("#");
var hash = idx != -1 ? url.substring(idx+1) : "";
$('a[href="'+hash +'"]') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T23:52:39.407

`$($(e.target).attr("href"))[0]`使用或不使用 jQuery怎么样`document.getElementById(e.target.getAttribute("href").substr(1))`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T23:53:37.880

您可以使用以下方法更清洁`getElementById`：

```
var element = document.getElementById(e.target.getAttribute("href").substr(1)); 
```

# java - JLabel 没有去我想去的地方

> ID：15776407
> 
> 赞同：0
> 
> 时间：2013-04-02T23:41:14.133
> 
> 标签：java, swing, jframe, jpanel, jlabel

我正在制作游戏，但无法让 JLabel 在特定位置显示![在此处输入图像描述](https://i.stack.imgur.com/LnkqZ.png)

我希望 JLabel 位于级别面板之上。当我尝试做我认为可行的事情时，它会显示一个带有标签但没有级别面板的空白屏幕。另外，当我拖动窗口时，为什么我的游戏不能正确重绘？

游戏

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.Timer;

public class Game {

    private Level l;
    private Player p;
    private ArrayList<Monster> m;
    private static JLabel status = new JLabel();
    private JLabel score = new JLabel();
    private static LevelPanel lp;
    private Timer timer;
    public Game()
    {
        l = new Level(this,4,11);
        p = new Player(this,1,1);
        m = new ArrayList<Monster>();
        Monster monster = new SimpleMonster(this,0,0,0,1);
        Monster m1 = new SimpleMonster(this);
        m.add(monster);
        m.add(m1);
        lp = new LevelPanel(this);
        status = new JLabel("null");
        lp.add(status);
        timer = new Timer(10, new TimerListener());
        timer.start();
    }

    public void win()
    {
        timer.stop();
        status.setText("Congrats you won!");
        System.out.println("You win!");
    }

    public void lose()
    {
        timer.stop();
        status.setText("Sorry you lose.");
//      System.out.println("Sorry");
    }

    public static void main(String[] args)
    {
        JFrame jframe = new JFrame();

        jframe.add(new LevelPanel(new Game()));
//      jframe.add(lp);
        jframe.getContentPane().add(lp);
//      jframe.getContentPane().add(status);
//      jframe.add(status);
        jframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jframe.setPreferredSize(new Dimension(500, 500));   
        jframe.pack();
        jframe.setVisible(true);

    }

    private class TimerListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent ae) {
            // TODO Auto-generated method stub
//          panel.repaint();

            //update score and remainder
            for (Monster m : getMonsters())
            {
                m.update();
            }
            //call update() of all monsters
        }
    }
    public Level getLevel()
    {
        return l;
    }

    public Player getPlayer()
    {
        return p;
    }

    public ArrayList<Monster> getMonsters()
    {
        return m;
    }
} 
```

我的关卡面板

```
import java.awt.Graphics;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JPanel;

public class LevelPanel extends JPanel implements KeyListener{

    private Game game;
    public LevelPanel(Game game)
    {
        this.game = game;
        setFocusable(true);
        addKeyListener(this);

    }

    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        game.getLevel().draw(g);
        repaint();
    }
    @Override
    public void keyPressed(KeyEvent arg0) {

        if (arg0.getKeyCode() == KeyEvent.VK_UP)
        {
            game.getPlayer().move(-1, 0);
        }
        if (arg0.getKeyCode() == KeyEvent.VK_DOWN)
        {
            game.getPlayer().move(1, 0);
        }
        if (arg0.getKeyCode() == KeyEvent.VK_LEFT)
        {
            game.getPlayer().move(0, -1);
        }
        if (arg0.getKeyCode() == KeyEvent.VK_RIGHT)
        {
            game.getPlayer().move(0, 1);
        }
//      System.out.print(game.getLevel().getItemsLeft());
//      repaint();
    }
    @Override
    public void keyReleased(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void keyTyped(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:59:30.387

问题是您只是使用 add() 添加了 JPanel 和 JLabel，所以它们只会去默认的地方。如果您想以某种对齐方式定位它们，您需要使用布局管理器。最简单的使用是 BorderLayout，但如果你想要完全控制你应该使用 GridBagLayout。使用 GridBag，您可以为每个单独的组件设置约束。从长远来看，要了解 GridBagLayout 并节省您的时间，我建议您查看 Constraints 和 Insets 以及 GridBagLayout。

# java - 声明私有方法静态

> ID：15776409
> 
> 赞同：0
> 
> 时间：2013-04-02T23:41:29.780
> 
> 标签：java, static-methods

如果类中没有其他方法`public static`调用它，是否有充分的理由将私有方法声明为静态？即使该方法不需要任何实例变量，例如将两个输入参数加在一起。声明一个静态方法是否有任何开销，在这种情况下，即使它可以独立于它所在的类的实例运行，它也值得不是静态的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T23:44:39.840

实例方法具有必须将`this`引用传递给方法的开销，即使它没有在方法中使用，所以调用静态方法比调用实例方法*便宜。*

优化方面它没有添加任何东西：该方法已经是私有的，因此如果 JVM 愿意，它可以自由地内联它。静态或非静态没有区别。

设计方面：这是一种私有方法，因此您可以自由地做任何您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:31:06.390

将方法声明为静态的原因与它是否为私有无关。如果它不引用任何实例变量，您可以将其声明为静态，有些人可能认为这样做是一种好习惯。

# android - java.lang.ClassCastException: android.text.SpannableStringBuilder 不能转换为 java.util.ArrayList

> ID：15776416
> 
> 赞同：12
> 
> 时间：2013-04-02T23:42:06.053
> 
> 标签：android, cordova, spannablestring

我正在使用 phonegap Android 插件：EmailComposerwithAttachments [https://github.com/phonegap/phonegap-plugins/tree/master/Android/EmailComposerWithAttachments](https://github.com/phonegap/phonegap-plugins/tree/master/Android/EmailComposerWithAttachments)执行 startActivitywithResult 函数时出现以下错误。我正在使用带有 Cordova 2.5.0 的 Android 4.2

java.lang.ClassCastException: android.text.SpannableStringBuilder 不能转换为 java.util.ArrayList

```
// setting attachments
    try {
        JSONArray attachments = parameters.getJSONArray("attachments");
        if (attachments != null && attachments.length() > 0) {
            ArrayList<Uri> uris = new ArrayList<Uri>();
            //convert from paths to Android friendly Parcelable Uri's
            for (int i=0; i<attachments.length(); i++) {
                try {
                    File file = new File(attachments.getString(i));
                    if (file.exists()) {
                        Uri uri = Uri.fromFile(file);
                        uris.add(uri);
                    }
                } catch (Exception e) {
                    LOG.e("EmailComposer", "Error adding an attachment: " + e.toString());
                }
            }
            if (uris.size() > 0) {
                emailIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
            }
        }
    } catch (Exception e) {
        LOG.e("EmailComposer", "Error handling attachments param: " + e.toString());
    }

    this.cordova.startActivityForResult(this, emailIntent, 0); 
```

以下是完整的跟踪。

```
04-02 16:34:13.120: W/Bundle(698): Key android.intent.extra.TEXT expected ArrayList<CharSequence> but value was a android.text.SpannableStringBuilder.  The default value <null> was returned.

04-02 16:34:13.150: W/Bundle(698): Attempt to cast generated internal exception:

04-02 16:34:13.150: W/Bundle(698): java.lang.ClassCastException: 
android.text.SpannableStringBuilder cannot be cast to java.util.ArrayList

04-02 16:34:13.150: W/Bundle(698):  at android.os.Bundle.getCharSequenceArrayList(Bundle.java:1326)

04-02 16:34:13.150: W/Bundle(698):  at android.content.Intent.getCharSequenceArrayListExtra(Intent.java:4224)

04-02 16:34:13.150: W/Bundle(698):  at android.content.Intent.migrateExtraStreamToClipData(Intent.java:6682)

04-02 16:34:13.150: W/Bundle(698):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1410)

04-02 16:34:13.150: W/Bundle(698):  at android.app.Activity.startActivityForResult(Activity.java:3351)

04-02 16:34:13.150: W/Bundle(698):  at android.app.Activity.startActivityForResult(Activity.java:3312)

04-02 16:34:13.150: W/Bundle(698):  at org.apache.cordova.DroidGap.startActivityForResult(DroidGap.java:812)

04-02 16:34:13.150: W/Bundle(698):  at org.apache.cordova.example.EmailComposer.sendEmail(EmailComposer.java:157)

04-02 16:34:13.150: W/Bundle(698):  at org.apache.cordova.example.EmailComposer.execute(EmailComposer.java:36)

04-02 16:34:13.150: W/Bundle(698):  at org.apache.cordova.api.CordovaPlugin.execute(CordovaPlugin.java:61)

04-02 16:34:13.150: W/Bundle(698):  at org.apache.cordova.api.PluginManager.exec(PluginManager.java:220)

04-02 16:34:13.150: W/Bundle(698):  at org.apache.cordova.ExposedJsApi.exec(ExposedJsApi.java:44)

04-02 16:34:13.150: W/Bundle(698):  at android.webkit.WebViewCore.nativeMouseClick(Native Method)

04-02 16:34:13.150: W/Bundle(698):  at android.webkit.WebViewCore.nativeMouseClick(Native Method)

04-02 16:34:13.150: W/Bundle(698):  at android.webkit.WebViewCore.access$6800(WebViewCore.java:57)

04-02 16:34:13.150: W/Bundle(698):  at android.webkit.WebViewCore$EventHub.dispatchWebKitEvent(WebViewCore.java:1806)

04-02 16:34:13.150: W/Bundle(698):  at android.webkit.WebViewInputDispatcher.dispatchWebKitEvent(WebViewInputDispatcher.java:689)

04-02 16:34:13.150: W/Bundle(698):  at android.webkit.WebViewInputDispatcher.dispatchWebKitEvents(WebViewInputDispatcher.java:639)

04-02 16:34:13.150: W/Bundle(698):  at android.webkit.WebViewInputDispatcher.access$800(WebViewInputDispatcher.java:78)

04-02 16:34:13.150: W/Bundle(698):  at android.webkit.WebViewInputDispatcher$WebKitHandler.handleMessage(WebViewInputDispatcher.java:1153)

04-02 16:34:13.150: W/Bundle(698):  at android.os.Handler.dispatchMessage(Handler.java:99)

04-02 16:34:13.150: W/Bundle(698):  at android.os.Looper.loop(Looper.java:137)

04-02 16:34:13.150: W/Bundle(698):  at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:827)

04-02 16:34:13.150: W/Bundle(698):  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-30T11:30:41.153

在 Android 4.x 中解决了[这个错误](https://code.google.com/p/android/issues/detail?id=38303)

您可以通过替换 EmailComposer.java 中的这一行来解决纯文本电子邮件的问题：

```
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, body); 
```

和

```
ArrayList<String> extra_text = new ArrayList<String>();
extra_text.add(body);
emailIntent.putStringArrayListExtra(android.content.Intent.EXTRA_TEXT, extra_text); 
```

但这不适用于 HTML 电子邮件，因为 Spanned（由 Html.fromHtml 返回）不是 Charsequence 的子类。当我尝试将 Html.fromHtml() 的结果转换为字符串时，标签显示为文本的一部分:-(

同样，当我尝试此操作时，使用 Gmail 应用程序时会出现纯文本电子邮件的正文，但它没有出现在股票电子邮件应用程序中 - 正文始终为空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-01T16:53:38.357

只需尝试不同的方法：

```
Intent emailIntent = new Intent(Intent.ACTION_SENDTO, Uri.parse("mailto:" + email));
emailIntent.putExtra(Intent.EXTRA_SUBJECT, subject);
emailIntent.putExtra(Intent.EXTRA_TEXT, body);
//emailIntent.putExtra(Intent.EXTRA_HTML_TEXT, body); //If you are using HTML in your body text

startActivity(Intent.createChooser(emailIntent, "Chooser Title")); 
```

取自这里：[发送电子邮件意图](https://stackoverflow.com/questions/8701634/send-email-intent)

# domain-driven-design - DDD 实施

> ID：15776418
> 
> 赞同：8
> 
> 时间：2013-04-02T23:42:11.477
> 
> 标签：domain-driven-design

我是领域驱动设计的新手，我对一些概念有一些疑问（希望这是问这个问题的正确地方）。
我知道在 DDD 中我应该避免一个贫血模型，所以考虑一个应该建立（保存）两个朋友之间友谊**的社交网络模型？**
我想象这样的情况，比如有一个代表用户的类（使用类似 Java 的语法）：

```
class User{
    String username
    List<User> friends
} 
```

那么，它应该有一个添加朋友的方法吗？

```
class User{
    void friendship(User friend)
} 
```

还是我必须使用服务来做到这一点？

```
class UserService{
     void friendship(User user, User user2)
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T23:55:25.870

我的想法是，这是关系数据库理论中被称为“弱实体”的一个例子。A`Friendship`可以仅通过友谊中涉及的两个 s 的标识符来标识`User`，但可以具有自己的属性，例如它是何时创建的以及它是什么类型的关系。

我会将其设为自己的实体，并可能将其隐藏在`User`对象暴露的外观后面：

```
class User {
    protected List<Friendship> _friendships { get; private set; }

    public IEnumerable<User> Friends {
        get { return _friendships.Select( /* get other user */ ); }
    }

    public void AddFriend(User otherUser) {
        // check to see if friendship exists
        // if not, create friendship
        // do other friendshippy things

        // make sure the other user knows about our friendship 
        // and gets to do its friendshippy things
        otherUser.AddFriend(this);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T08:19:12.643

我会使用类似的东西

```
public sealed class Username : IEquatable<Username> { /* string wrap here */ }
public class User
{
    private readonly Username _username;
    private readonly HashSet<Username> _friends;
    public User(Username username)
    {
        if (null == username) throw new ArgumentNullException("username");
        _username = username;
        _friends = new HashSet<Username>();
    }

    public Username Name { get {return _username; } }
    public void Befriend(User user)
    {
        if (null == user) throw new ArgumentNullException("user");
        _friends.Add(user.Name);
    }

    public bool IsFriendsOf(User user)
    {
        if (null == user) throw new ArgumentNullException("user");
        return _friends.Contains(user.Name);
    }
} 
```

请注意，根据[Demeter 法则](http://pragprog.com/articles/tell-dont-ask)，用户不会公开任何集合。如果您真的需要它们，我会`IEnumerable<Username>`为朋友公开。

此外，在 DDD 中，所有[查询和命令](http://epic.tesio.it/doc/manual/command_query_separation.html)都应该是[通用语言](http://martinfowler.com/bliki/UbiquitousLanguage.html)的一部分（这就是我使用`Befriend`而不是 的原因`AddFriend`）。

但是，让我说这看起来有点过于[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)，不需要 DDD。**如果您（至少）不需要领域专家来了解该领域，那么您根本不需要 DDD**。如果您不需要 DDD，它会成为您项目中最昂贵的错误。

**编辑**
让我们假设领域专家声明“友谊总是互惠的”（根据**guillaume31的建议）：通过对**[幂等](http://en.wikipedia.org/wiki/Idempotence)命令建模，您可以很容易地确保这样的业务规则。`Befriend`命令变为：

```
public void Befriend(User user)
{
    if (null == user) throw new ArgumentNullException("user");
    if(_friends.Add(user.Name))
    {
        user.Befriend(this);
    }
} 
```

您**始终**可以使用此类属性对幂等命令进行建模，但有时需要进行更多分析以确保其参数及其内部状态提供所需的一切。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-14T10:43:45.957

我认为; 友谊本身就是聚合根。它可以直接在应用程序服务中创建，也可以委托给域服务创建。

如果用户特定的验证需要，域服务可以要求用户聚合进行验证。或者将两个用户聚合分派给友谊聚合创建者/构造者。

然后，友谊存储库可以轻松地返回给定用户的朋友列表。

即使是友谊聚合也没有丰富的模型或行为；它有一个单独的一致性边界。

此外，如果我们使用事件源；可以收听友谊创建的事件；并通知两个用户有关情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T07:47:58.777

`transferFunds()`这与银行域中的问题类似——您应该在源帐户还是目标帐户上调用该方法？并且应该`Account`能够首先操纵另一个`Account`？`Balance`

当某些行为似乎不适合现有实体或操纵多个实体时，DDD 域服务会派上用场。这不会使您的域贫血，因为服务*是*域的一部分，并且拥有有限数量的没有行为的实体并不意味着您的整个模型无论如何都是贫血的。

`User`如果友谊关系从一开始就是互惠的，那么将友谊创建委托给域服务而不是让一个人修改另一个`User`人的朋友列表可能更合乎逻辑。

否则，一种`addFriend()`方法将正常工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-19T13:44:03.007

弱或贫血的域模型仅意味着您的“域对象”是 DTO，没有任何行为。您基本上得到的是事务脚本模式，其中 DTO 被加载、修改和再次保存。CRUD，换句话说。这对于很多应用程序来说都很好，因为它们没有足够复杂的规则来从 DDD 方法中受益。

域对象应该封装*行为*。这就是他们的本质。任何公共状态（可能没有公共 getter 或 setter）都应该是只读的，如果你想改变状态，你可以调用一个与用例/业务需求相关的方法。

您所有的“域逻辑”都应该在这些类中。域逻辑只是一个花哨的名称，用于描述您选择的域的规则和操作参数。无论是银行、零售、人力资源等。当您的领域专家解释“通过卡付款”用户案例并告诉您“在 PDC 机器与银行联系之前，我们无法打开收银台。”，这是一个业务规则/不变量/域逻辑。

您通常会将域对象（由实体和值对象组成）组装成聚合，聚合定义了必须满足给定规则集的边界。作为该域对象图的根的实体称为聚合根，只有聚合根才能让其他对象持有引用。在您的情况下，`User`是一个实体，因为它是聚合中的唯一对象，所以它也是聚合根。例如：

```
public class User // Entity and also the Aggregate Root 
{
    private readonly IList<Friendship> _friends = new List<Friendship>();

    public void Befriend(User user)
    {
        _friends.Add(new Friendship(/* Date? */, user));
    }

    public class Friendship // Entity
    {
        // ... Date?
        private User _friend { get; private set; }

        public Friendship(/* Date? */, User friend)
        {
            _friend = friend;
        }
    }
} 
```

这真的不是一个很好的例子，因为理论上你需要为一对中的两个朋友中的每一个调用这个，但是任何交易都应该只执行一个操作，而不是两个。在这种情况下，您将引入流程管理器的概念。这些还有更多的对象处理本质上是长期运行的事务（其中两个朋友成为*彼此的*朋友）的协调。您可能会创建一个友谊（作为聚合根），它的创建会产生某种事件驱动的过程，其中涉及的朋友被加载、结交和保存。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-06T23:56:31.643

两个用户之间的友谊应该是一个单独的聚合（AR）。作为该 AR 的 ID，我建议使用用户的 ID。这样，您就可以拥有可以扩展/分区的低压小骨料。用户之间发送的消息也是如此。每条消息都是一个聚合。

这就是我们设计它的方式并且它是成功的。

祝你好运

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-13T22:46:42.263

考虑到一个用户可以拥有无​​限数量的友谊，我认为它不应该被建模为用户 AR 中的价值对象。AR 应该尽可能小，每次你想改变状态时加载 10k 的朋友并不理想。

我可以选择拥有`Friendship`和`FriendRequest`作为单独的根。A`FriendRequest`是一个单一方向的东西，包含一个 from_user_id 和一个 to_user_id。它可以被忽略、拒绝或接受。接受后，就建立了双向友谊。友谊可以通过物化视图（例如弹性搜索）搜索，并通过最终由用户配置文件更新事件更新的用户名进行增强。对于用户 UI，如果需要有条件的好友按钮或好友请求指示符，可以使用`Friendship`和/或.id 的 ID 维护链接表/搜索视图`FriendRequest`。

# lisp - 使用嵌套列表 LISP

> ID：15776420
> 
> 赞同：-1
> 
> 时间：2013-04-02T23:42:22.353
> 
> 标签：lisp, common-lisp, nested-lists

我对 lisp 比较陌生，并且对在以下上下文中使用嵌套列表的最佳方法感到好奇：

所以，我有以下功能：

```
(defun get-p0 (points)
    (loop for (label x y) in points
    ; collect (list (if (> x y) (+ 2 3))))
    collect (list (get-angle (first points) (second points))))
) 
```

我这样称呼它：

```
(get-p0 '((A 5 2) (B 2 3) (C 8 9))) 
```

我一直在尝试做的是获取每个坐标相对于其他坐标的角度。例如，AB、AC、BA、BC、CA、CB 的角度并打印出来。我得到的输出如下：

```
((161.56505) (161.56505) (161.56505)) 
```

这实际上只是出于测试目的。虽然我真正想做的是输出最低和最左边的坐标。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:07:10.683

前段时间我做了非常相似的练习。这看起来可能对您有用：

```
;; Define struct `point'
(defstruct point x y)

;; Define methods specializing on `point'
(defgeneric add (a b))

(defgeneric subtract (a b))

(defgeneric distance (a b))

(defgeneric projection (a))

(defmethod add ((this point) (that point))
  (make-point :x (max (point-x this) (point-x that))
              :y (max (point-y this) (point-y that))))

(defmethod subtract ((this point) (that point))
  (make-point :x (min (point-x this) (point-x that))
              :y (min (point-y this) (point-y that))))

(defmethod distance ((this point) (that point))
  (let ((a (add this that)) (b (subtract this that)))
    (make-point :x (- (point-x a) (point-x b))
                :y (- (point-y a) (point-y b)))))

(defmethod projection ((this point))
  (sqrt (+ (expt (point-x this) 2) (expt (point-y this) 2))))

;; Define helper functions
(defun angle (a b c)
  (acos (/ (+ (* a a) (* b b) (- (* c c))) (* 2 a b))))

(defun radian->degree (radian) (/ (* 180 radian) pi))

;; Define struct `triangle'
(defstruct triangle
  (a nil :type (or null point))
  (b nil :type (or null point))
  (c nil :type (or null point)))

;; Define methods specializing on `triangle'
(defgeneric angles-of (triangle))

(defgeneric sides-of (triangle))

(defgeneric points-of (triangle))

(defmethod points-of ((this triangle))
  (let ((result (list (triangle-a this) (triangle-b this) (triangle-c this))))
    (nconc result result)))

(defmethod sides-of ((this triangle))
  (loop for (p . rest) on (points-of this)
     for i from 0 below 3
     collect (projection (distance p (car rest))) into result
     finally (return (nconc result result))))

(defmethod angles-of ((this triangle))
  (loop for (a b c) on (sides-of this)
       for i from 0 below 3
       collect (radian->degree (angle a b c)) into result
       finally (return (nconc result result))))

;; Create some test triangle
(defvar *pythagorean-triangle*
  (make-triangle :a (make-point :x 1 :y 2)
                 :b (make-point :x 4 :y 2)
                 :c (make-point :x 4 :y 6)))

;; Finally! don't forget to
(setf *print-circle* t)
;; so you can see circular lists' content
(angles-of *pythagorean-triangle*)

#1=(90.00000265626015d0 36.86989784081561d0 53.13009995842113d0 . #1#) 
```

几条笔记，我在另一篇文章中看到表格有些混乱

```
(loop for <list-like expression> in some-list ...) 
```

这`list-like expression`就是通常所说的“解构绑定”。它是一种有限的模式匹配工具。实际上，这是一种模式，它将您在模式内定义的符号映射到您正在迭代的列表中找到的任何值。

因此，例如，`(loop for (x y) on '(1 2 3 4))`将和绑定`x`到`y`和`1`，`2`然后`2`，，，`3`然后`3`，`4`最后`4`，`nil`。当然，您可以使用更多变量/您可以对模式使用点列表等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:06:12.147

If I understand your goal correctly, you want to consume a list like `'((A 5 2) (B 2 3) (C 8 9))` and return something like `(2 2)` (point a has A `y` of 2 and point B has an `x` of 2, and these are the lowest coordinates). I'd do something like

```
(loop for (_l x y) in lst
        minimizing y into min-y minimizing x into min-x
        finally (return (list min-x min-y))) 
```

`loop` is a deep and powerful construct, so I'd recommend you read through the [relevant PCL chapter](http://www.gigamonkeys.com/book/loop-for-black-belts.html) and the [`loop` spec](http://www.lispworks.com/documentation/HyperSpec/Body/m_loop.htm#loop) (it's very easy to forget a directive that might turn out to be perfect for a given situation). If you're new to Lisp, you may want to take a look at [the entire book](http://www.gigamonkeys.com/book/), actually.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T10:50:23.177

您使用表单在每次迭代中正确绑定值`for (x y z) in list`。但是当您在下一行中进行收集时，您正在从`list`. 该值永远不会随着循环的评估而改变。

您应该将代码更改为如下所示：

```
(defun get-p0 (points)
  (loop
      for (label x y) in points
      collect (list (get-angle x y)))) 
```

# breeze - 过滤在服务器上不使用实体框架的 BreezeJS 应用程序中的查询

> ID：15776422
> 
> 赞同：0
> 
> 时间：2013-04-02T23:42:34.310
> 
> 标签：breeze

我正在尝试调整 Breeze **NoDb**示例应用程序中采用的方法，并将其连接到不使用实体框架的现有应用程序后端（它具有我正在尝试重用的现有业务对象）。

我正在努力了解如何最好地将控制器收到的查询转换为对我的业务对象的调用以获取/保存数据，以及如何优化这些查询。

目前在 NoDb 示例应用程序中`TodoContext`，服务器上的类充当对象的内存数据库，并通过类将`TodoList`这些对象呈现给. 然后将此列表公开为单个操作。这允许客户端将 odata 过滤条件传递给服务器并返回过滤后的集合（如果项目指定了 odata 搜索过滤器）。我相信这一切都会自动神奇地发生，这要归功于 BreezeController。`TodoRepository``TodoController``TodoController``IQueryable<TodoList> TodoList()``TodoList`

*现在，*假设您`TodoList`在某种形式的数据存储中存储了大量的存储到内存对象中，以便能够将过滤后的结果返回给客户端。

 *您将如何使用客户端请求中可用的过滤条件来减少从服务器上的数据存储中提取的数据量？例如，我想检索包含“买牛奶”的`TodoList`项目集合`TodoItem`，但我不想将`TodoList`所有详细项目加载到内存中以找出答案。我宁愿将 odata 过滤条件转换为本地数据存储查询（或者在我的情况下调用我现有的业务对象）。

希望这是有道理的。

谢谢！理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:02:51.470

.NET 上可用的大多数第三方数据存储都提供了 IQueryable 实现。如果您为每个资源返回基本数据存储 IQueryable，那么微风服务器将组成一个复合 IQueryable（由您的基本 IQueryable 和应用的任何客户端过滤器组成），并将其发送到您的数据存储。这意味着完全组合的查询是由您的数据存储执行的。

我们希望在下个月左右有一个 MongoDb 或 RavenDb 样本，这证明了这一点。*

# javascript - 谷歌地图时区获取当地时间

> ID：15776424
> 
> 赞同：3
> 
> 时间：2013-04-02T23:42:53.010
> 
> 标签：javascript, api, timezone, timestamp-with-timezone

我正在尝试使用谷歌时区 API。我提供经度和纬度，API 给我时区。

如何使用以下值（dstOffset 和 rawOffset）获取本地时间？

这是Json

```
{
   "dstOffset" : 0.0,
   "rawOffset" : -28800.0,
   "status" : "OK",
   "timeZoneId" : "America/Los_Angeles",
   "timeZoneName" : "Pacific Standard Time"
} 
```

我已经尝试过这个 javascript 函数，但我没有得到正确的时间。

```
function calcTime(offset) {
    var d = new Date();
    var utc = d.getTime() + (d.getTimezoneOffset() * 60000);
    var nd = new Date(utc + (3600000*offset));

    alert("The local time is " + nd.toLocaleString());
}

calcTime(-28800.0); 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T02:32:45.287

你很近。问题出在这一行：

```
var nd = new Date(utc + (3600000*offset)); 
```

Json 给出的偏移量似乎以秒为单位；您将其视为以小时为单位。将其更改为以下内容，它应该开始工作：

```
var nd = new Date(utc + (1000*offset)); 
```

这是工作的[jsFiddle](http://jsfiddle.net/m7Kyj/1/)。

# css - nth-child 没有在我的图库中选择特定图像

> ID：15776429
> 
> 赞同：0
> 
> 时间：2013-04-02T23:43:07.297
> 
> 标签：css, css-selectors

我有一个画廊，我正在尝试使用 CSS 设置样式。具体来说，我正在尝试编写查找特定编号的 div 的 CSS，然后应用一个新的像素高度，该高度将覆盖默认高度。这是因为与其他方形图像相比，我有一些肖像图像需要更长的高度。

这是画廊的一个工作示例：

[http://kylework.com/](http://kylework.com/)

这是我正在使用的 CSS 示例：

```
html body div#page_div div#page_content.full_width div.container_div  div#mainworkpanelsheet div.mainworkpanel div:nth-child(2)
{
height: 200px!important;
} 
```

从上面的代码中，我希望唯一的第二个 div/图像被设置样式——而不是*每个*画廊 div 都被设置样式。我也尝试过“div.mainworkpanel:nth-child(2)”（我想这更准确？）但这也无济于事。我还尝试通过 div[style="imageURL.jpg"] 通过其“背景图像”属性选择每个 div，但我似乎也无法让它工作。

我无法控制画廊中 div 的 CSS 类 - 它们都是相同的（“mainworkpanelthumb”）。这个画廊是由 jquery 通过 XML 文件生成的。生成拇指后，CSS 是否无法覆盖图像属性？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:51:57.790

改用这个：

```
div.mainworkpanel:nth-child(3) div.mainworkpanelthumb {
background: red;
height:1500px !important;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:07:15.187

工作的最短选择器应该是这个（经过测试）：

```
div.mainworkpanel:nth-child(3) div.mainworkpanelthumb {
    background: red;
    height:1500px !important;
} 
```

它选择库中的特定容器。在这个容器中，它设置持有图像的孩子的高度。您需要使用`!important`以及所有这些容器都具有将覆盖 CSS 规则的内联样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:51:46.850

代替 nth-child(2) 使用 nth-of-type(2)

# gradle - 在 Exec 类型的 gradle 任务中，为什么 commandLine 和可执行文件的行为不同？

> ID：15776431
> 
> 赞同：30
> 
> 时间：2013-04-02T23:43:12.637
> 
> 标签：gradle

有谁知道为什么在 Exec 命令行和可执行类型的任务中，在继承环境变量方面表现不同？

例如，我无法运行此任务，因为 Gradle 无法从我的环境中找到 ruby​​：

```
task checkRubyVersionCommandLine(type: Exec) {
       commandLine 'ruby -v'
} 
```

然而这很好用：

```
task checkRubyVersionExecute(type: Exec) {
    executable = 'ruby' 
    args = ['-v']
} 
```

commandLine 的用途是什么，或者我怎样才能让它从执行它的 shell 中获取变量？为什么可执行文件只是工作？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-03T10:01:02.810

使用命令行时，您需要将字符串拆分为空格，否则可执行文件将变为“ruby -v”，而不是“ruby”。

所以试试这个：

```
task checkRubyVersionExecute(type: Exec) {
  commandLine 'ruby', '-v'
} 
```

[请参阅此处](https://github.com/gradle/gradle/blob/master/subprojects/core/src/main/java/org/gradle/process/internal/DefaultExecHandleBuilder.java)的代码以了解 Exec 任务如何处理此问题。

# ios - 使用 AFIncrementalStore 从故障更新

> ID：15776436
> 
> 赞同：1
> 
> 时间：2013-04-02T23:44:01.650
> 
> 标签：ios, core-data, afincrementalstore

我有一个使用 AFIncrementalStore 同步到 REST API 的项目。假设我有一个简单的一对多关系设置，其中商店有很多部门。

我有宁静的端点：/Stores/:id（仅返回有关商店的数据，没有嵌套资源）/Stores/:id/Departments

以及 CoreData 中的 Store 和 Department 模型，在 Store 上具有一对多的“部门”关系。

假设我正在填充一个 tableView，显示特定商店的所有部门。如果我有一个 store 对象并调用 store.departments，我将在关系上出错，触发对 /Stores/:id/Departments 的异步请求。

这将调用 AFIncrementalStore::newValueForRelationship 来处理错误，该错误不会触发我可以在请求完成后侦听更新表的任何通知。一旦请求返回而不重新加载视图，更新表的适当方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T15:40:10.267

您应该使用 NSFetchedResultsController 填充您的 tableView。这样，您将在创建/更新与您的谓词匹配的新对象时收到通知。

# python - 范围函数的正确编码

> ID：15776438
> 
> 赞同：4
> 
> 时间：2013-04-02T23:44:06.063
> 
> 标签：python, range

在使用 python 时，当我们想要从 0 开始创建列表时，我已经看到了 2 种不同的方式来使用 range 函数。

```
list=range(10)
list=range(0,10) 
```

我知道如果我们将 0 更改为另一个数字，则输出会有所不同，但在这种情况下，输出完全相同。

我想知道这是否只是个人决定，还是使用一种或另一种语法（内存、调试等）更有意义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T23:47:27.137

第二种方式没有什么特别之处。我能想到的一个原因是，如果您希望`0`成为其他内容的占位符 - 即，如果您打算稍后将其更改为其他内容，并且您包含`0`以表明这一点。除此之外，这只是偏好。在我个人看来，除非你有充分的理由包括.，否则`0`我会坚持使用`range(10)`.

就像一个注释，你不应该使用`list`变量名，因为它是一个内置函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:00:55.533

第二个示例是对范围类的更显式调用。它明确定义了起点。同样，您可以显式定义每次迭代的“步骤”： `range(0, 10, 2)` ---> `(0, 2, 4, 6, 8)` （参见`help(range)`python 解释器：其中显示： `class range(object) | range([start,] stop[, step])` 其中 [start,] 和 [,step] 是可选的。如您所见， range(x)将从 0 开始，默认按 1 递增。

从 python 3 开始，range 函数现在与以前的 xrange() 相同，因为它在每一步都迭代，而不是创建一个列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T00:10:04.143

编程就是交流。不仅要与计算机交流您希望它做什么，还要与包括您自己在内的人交流您的意图。代码应该是富有表现力的。对我来说，

```
for i in range(10): 
```

说“做这件事 10 次，实际的索引号不相关”。

```
for i in range(0,10): 
```

说“为 0 到 9 的每个数字做这件事，这些数字实际上代表了一些东西”，这是一条不同的信息。如果我稍后重新访问这段代码，我会更仔细地查看我对那个索引号做了什么，我可以将它传递给什么函数，等等。第一种情况我可能会使用不同的循环结构重新编码，而无需此类保留。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T01:45:48.200

这种行为`range`不是很 Pythonic - 即。根据参数的数量改变位置参数的含义。

然而，每个人都习惯使用`range(stop)`它，它永远不会改变。

我个人觉得读起来有些刺耳`range(0, stop)`。当我看到`range`多个参数时，我预计会发生一些不寻常的事情，因为一个参数形式更为常见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-29T18:20:16.160

在常规 python 代码中，函数定义不能使第一个参数成为可选的（后面的参数不是可选的）。所以在这个函数中，第一个参数似乎是可选的，它必须运行一些额外的代码来切换参数。

这意味着它`range(0,10)`比 更有效`range(10)`，因为它不必运行额外的代码来切换参数。

# android - Android Activity onNewIntent，同时保持在后台

> ID：15776440
> 
> 赞同：0
> 
> 时间：2013-04-02T23:44:09.753
> 
> 标签：android, android-intent

是否可以在后台保持活动句柄 onNewIntent ？我的活动主要保留在根目录中，并在 onNewIntent 内接收来自应用程序外部活动的调用（它处于 singleTop 模式）。只要我的顶部没有其他活动，一切都会正常工作，但是一旦我启动另一个活动 - 那些对我的根活动的外部调用会将活动带回顶部。

理想情况下，我宁愿在后台处理那些 onNewIntent 调用，而不让我的活动进入前台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:53:35.080

您可能会更改向该根活动发送消息的方式，向其发送广播将正常工作。

# c# - 将一个空字符串添加到 HashTable.Add() 可能是“值不在预期范围内”的罪魁祸首？

> ID：15776442
> 
> 赞同：2
> 
> 时间：2013-04-02T23:44:12.910
> 
> 标签：c#, hashtable, concatenation, ienumerator, .net-1.0

我一生都无法弄清楚遗留代码为什么会这样做：

```
HashSiteMapping.Add(""+sm.SiteNumber, sm.LocationNumber); 
```

...当这似乎更明智时：

```
HashSiteMapping.Add(sm.SiteNumber, sm.LocationNumber); 
```

我只是耸耸肩，把它归结为这段代码的一般奇怪之处，但我在这段代码中得到“值不在预期范围内”，我想知道这是否可能是问题所在。在更完整的上下文中，代码是这样的：

```
IEnumerator en = mFile.Map.Mappings.GetEnumerator();

while (en.MoveNext())
{
    SiteMapping sm = (SiteMapping) en.Current;      
    HashSiteMapping.Add(""+sm.SiteNumber, sm.LocationNumber);
} 
```

...我将其更改为：

```
IEnumerator en = mFile.Map.Mappings.GetEnumerator();

while (en.MoveNext())
{
    SiteMapping sm = (SiteMapping) en.Current;      
    if (!HashSiteMapping.Contains(sm.SiteNumber))
    {
        HashSiteMapping.Add(sm.SiteNumber, sm.LocationNumber);
    }
} 
```

...但我仍然得到，“价值不在预期范围内”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:05:11.017

我不熟悉**HashSiteMapping**。这是一个自定义类吗？您可以提供链接或定义代码吗？

我最好的猜测是在某些情况下您的**SiteMapping** `SiteNumber`是`null`或空的。在这种情况下，您的原始代码将执行以下操作：

```
IEnumerator en = mFile.Map.Mappings.GetEnumerator();

while (en.MoveNext())
{
    SiteMapping sm = (SiteMapping) en.Current;
    if (String.IsNullOrEmpty(sm.SiteNumber))
    {
      HashSiteMapping.Add(String.Empty, sm.LocationNumber);
    }
    else
    {
      HashSiteMapping.Add(sm.SiteNumber, sm.LocationNumber);
    }
} 
```

请注意，即使上面的代码没有注释，发生的事情仍然比您留下的神秘代码更容易理解。

您尝试的第二个版本（如下所示）*可能*会失败，因为**SiteNumber**和**LocationNumber**一起创建了一种复合键（我再次猜测，因为我不知道**HashSiteMapping**定义）

```
while (en.MoveNext())
{
  SiteMapping sm = (SiteMapping) en.Current;        
  if (!HashSiteMapping.Contains(sm.SiteNumber))
  {
    HashSiteMapping.Add(sm.SiteNumber, sm.LocationNumber); // What if LocationNumber has not been included yet?
  }
} 
```

考虑：

```
|_SiteNumber__|_LocationNumber_|
| "Warehouse" |      "A1"      |
| "Warehouse" |      "B1"      |
|     NULL    | "Boss'sOffice" |
|     NULL    |"JanitorCloset" |
|     NULL    |   "RestRoom"   | 
```

你当然不想让所有这些都感到困惑！

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:20:07.637

您可能希望在调试构建中挂接一个断言，并注意违反 HashSiteMapping 类定义为“预期范围”的值 -

# windows-8 - 使用 Windows 8 和 vs2012 的开发人员的最佳 VirtualBox 设置

> ID：15776444
> 
> 赞同：7
> 
> 时间：2013-04-02T23:44:19.520
> 
> 标签：windows-8, visual-studio-2012, virtualbox

配置 VirtualBox 以运行 Windows 8 和 vs2012 以进行 WinRT 开发（商店应用程序等）的最佳设置（和最佳方式）是什么？

我的机器规格是 64 位 Intel Core i7-2600 CPU @ 3.40GHz 和 8G RAM。

任何建设性的建议都是最受欢迎的。请尽可能详细。

先谢谢大家了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:04:09.863

我的一个队友写了一份关于将 Windows 8 安装到在 Mac OS X 上运行的 Oracle VirtualBox 的分步指南：http: [//blogs.technet.com/b/chrisavis/archive/2013/01/27/installing-windows -8-into-oracle-virtualbox-running-on-mac-os-x.aspx](http://blogs.technet.com/b/chrisavis/archive/2013/01/27/installing-windows-8-into-oracle-virtualbox-running-on-mac-os-x.aspx)

# mongodb - 如何从聚合中隐藏_id？

> ID：15776453
> 
> 赞同：33
> 
> 时间：2013-04-02T23:44:48.320
> 
> 标签：mongodb, pymongo, motordriver, tornado-motor

我有这个查询：

```
produits = yield motor.Op(db.users.aggregate, [{"$unwind":"$pup"},{"$match":{"pup.spec.np":nomp}}, {"$group":{"_id":"$pup.spec.id","pup":{"$push":"$pup"}}}]) 
```

这给了我这个结果：

```
print produits

{u'ok': 1.0, u'result': [{u'_id': None, u'pup': [{u'avt': {u'fto': ..all the results}}]}]} 
```

所以我可以这样做：

```
prod = produits["result"]

[{u'_id': None, u'pup': [{u'avt': {u'fto': ..all the results}}]}] 
```

但我怎么能隐藏`"_id"`，所以我只能得到：

```
[{u'pup': [{u'avt': {u'fto': ..all the results}}]}] 
```

在普通查询中，我会简单地添加类似的东西，`{"_id":0}`但在这里它不起作用。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-02T23:57:22.487

来自 mongodb 文档

您可以 $project 将结果排除在外`_id`- 这是您的意思吗？

[http://docs.mongodb.org/manual/reference/aggregation/#pipeline](http://docs.mongodb.org/manual/reference/aggregation/#pipeline)

注意 默认情况下始终包含 _id 字段。您可以明确排除 _id，如下所示：

```
db.article.aggregate(
    { $project : {
        _id : 0 ,
        title : 1 ,
        author : 1
    }}
); 
```

从您的示例来看，管道中的第一个操作是排除 _id 并包含其他属性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-06-09T16:32:42.033

开始`Mongo 4.2`时，[`$unset`](https://docs.mongodb.com/master/reference/operator/aggregation/unset/index.html#pipe._S_unset)聚合运算符可以用作`$project`仅删除字段时的替代语法：

```
// { _id: "1sd", pup: [{ avt: { fto: "whatever"} }] }
// { _id: "d3r", pup: [{ avt: { fto: "whatever else"} }] }
db.collection.aggregate({ $unset: ["_id"] })
// { pup: [{ avt: { fto: "whatever" } } ] }
// { pup: [{ avt: { fto: "whatever else" } } ] } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T23:54:46.287

我不熟悉电机，但您应该能够直接从结果字典中删除该属性。

```
>>> produits = {u'ok': 1.0, u'result': [{u'_id': None, u'pup': [{u'avt': {u'fto': 'whatever'}}]}]}
>>> prod = produits['result'] 
>>> del prod[0]['_id']
>>> print prod
[{u'pup': [{u'avt': {u'fto': 'whatever'}}]}] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-11T16:58:52.033

这不是一种 mongoWay 的做法，但您可以使用此工厂生成一个对象，该对象包含除 _id 之外的所有内容

```
/**
 * Factory that returns a $project object that excludes the _id property https://docs.mongodb.com/v3.0/reference/operator/aggregation/project/ 
 * @params {String} variable list of properties to be included  
 * @return {Object} $project object including all the properties but _id
 */
function includeFactory(/* properties */){
    var included = { "_id": 0 };
    Array.prototype.slice.call(arguments).forEach(function(include){
        included[include] = true
    })

    return { "$project": included }
} 
```

然后像这样使用它：

```
cities.aggregate(
{ "$group": { "_id": null, "max": { "$max": "$age" }, "min": { "$min": "$age" }, "average": { "$avg": "$age" }, "total": { "$sum": "$count" } } },
        includeFactory('max','min','average','total') 
) 
```

# grails - 声明服务实例时不包括插件服务

> ID：15776455
> 
> 赞同：0
> 
> 时间：2013-04-02T23:44:53.793
> 
> 标签：grails

我正在尝试重构依赖于插件服务的服务。

原始服务工作正常，但是当我移出部分服务并将它们放入另一个类中以因某种原因被调用时，插件服务实例未设置

原始服务

```
package myPackage

class MyService {
  def pluginService

  def myMethod(args){
    def methodVar = pluginService.pluginMethod()
    // Do stuff with methodVar

    return methodVar
  }

  ...

  def myVar = myMethod(args)
  ...
} 
```

我将这些方法移到了我的 Groovy 类中，这样我就可以在服务中引用它并分解我拥有的整体文件

新的类文件

```
package myPackage

    class MyClass {
      def pluginService

      def myMethod(args){
        def methodVar = pluginService.pluginMethod()
        // Do stuff with methodVar

        return methodVar
      }  
    } 
```

修改服务

```
package myPackage

class MyService {
      def myClass
     ...
     def myVar = myClass.myMethod(args)
     ...
} 
```

`def methodVar = pluginService.pluginMethod()`通过在运行时执行此操作，我在 MyClass 文件的行中得到“无法在 null 上调用 pluginMethod” 。我添加`import PluginPackage.PluginService`到删除空错误的类文件中，但现在它给了我“无法在空时调用 pluginMethodFromOtherPluginSerivceFromSamePlugin”错误。

当我将代码移出服务并将其放入类文件时，我是否忘记声明某些内容？

我一直在网上搜索，似乎找不到任何解决此问题的方法。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:15:17.073

如果您的课程位于 src/groovy 中，那么您的服务将不会自动注入您的课程。我熟悉几种可以解决此问题的方法：

1.  而是创建一个 UtilityService，它与其他服务一起驻留。
2.  使用应用程序上下文手动将服务注入到您的 src/groovy 类中。这是一个[有用的链接](http://www.qlambda.com/2013/02/inject-service-class-into-srcgroovy.html)

# android - 我应该为 Android 4.0+ 应用程序使用 ActionBarSherlock 吗？

> ID：15776456
> 
> 赞同：12
> 
> 时间：2013-04-02T23:45:02.537
> 
> 标签：android, actionbarsherlock

我的应用只能在 Android 4.0/API 14 或更高版本上运行（即 minSdkVersion="14"、targetSdkVersion="17"）。

在这种情况下使用 ActionBarSherlock 有什么好处吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-02T23:58:26.037

> 在这种情况下使用 ActionBarSherlock 有什么好处吗？

作为 ActionBarSherlock 的开发者，我只能告诉你一件事......

# 不！:)

图书馆的全部意义在于有一天它会消失。[你可以在我写的一篇](http://jakewharton.com/deprecated-from-inception/)名为“Deprecated from Inception”的博文中了解更多相关信息。

# sublimetext2 - Sublime 2 将当前日期附加到文件名

> ID：15776458
> 
> 赞同：2
> 
> 时间：2013-04-02T23:45:08.090
> 
> 标签：sublimetext2, build-system

我正在尝试使用 YUICompressor 将当前日期添加到压缩文件中。这是我的代码

```
{
    "cmd": ["java", "-jar",  "${packages}/User/YUI Compressor/build/yuicompressor-2.4.6.jar", "$file", "-o", "${file_base_name}%date:~4,2%%date:~7,2%%date:~12,2%-min.${file_extension}", "--charset", "utf-8"],
    "selector": "source.js"
} 
```

但是当我运行它时，我会尝试将字符串的日期部分逐字写入文件名。这样的事情可能吗？我该怎么办？

# gephi - 在 gephi 0.82 中设置节点大小

> ID：15776462
> 
> 赞同：3
> 
> 时间：2013-04-02T23:45:46.047
> 
> 标签：gephi

我正在尝试绘制图表，但我无法理解如何通过 UI 设置节点大小。

我在这里看到了其他图表（[http://dhs.stanford.edu/dh/gephi/dhstanford2.html](http://dhs.stanford.edu/dh/gephi/dhstanford2.html)）可以做到这一点。

我看不出这是怎么做到的。相比之下，在NodeXL中有一个名为Size的列，所以并不难。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-18T20:42:10.930

是的，“如何调整节点大小”是我最可能得到的一个问题，因为“调整节点大小”图标不是很有标志性。这是一个屏幕截图，您可以在其中找到它，因为它非常难以错过。

![在此处输入图像描述](https://i.stack.imgur.com/06hno.jpg)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-12T22:42:08.350

GUI 中主图形窗口的左下方有一个“大小”图标。如果您*右键单击*此图标，您将能够为您的节点设置默认大小。然后，*左键单击*同一图标将将此默认大小应用于所有节点。

# javascript - 应该在加载事件之前调用激活吗？

> ID：15776463
> 
> 赞同：0
> 
> 时间：2013-04-02T23:45:57.533
> 
> 标签：javascript, windows-8, event-handling, winjs

我正在阅读[这本](http://blogs.msdn.com/b/microsoft_press/archive/2012/10/29/free-ebook-programming-windows-8-apps-with-html-css-and-javascript.aspx)免费的电子书。在第 105 页上，它描述了调用各种事件的顺序，并且似乎暗示`activated`在`loaded`. 为了测试它，我添加了以下简单代码，并在两种方法中都添加了断点。问题是`loaded`断点总是在之前执行`activated`。我是不是误会了什么？

```
app.addEventListener("loaded", function (vt) {
    console.log("loaded");
});

app.addEventListener("activated", function (args) {
    console.log("activated");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:43:15.587

电子书是错误的，[来自文档](http://msdn.microsoft.com/en-us/library/windows/apps/br212679.aspx)：

> onactivated 在 WinRT 激活发生时发生。此事件的名称是“激活的”（也是“主窗口激活的”）。此事件发生在加载事件之后和就绪事件之前。

# web-services - 如何使用 Groovy 访问简单的 Web 服务？

> ID：15776467
> 
> 赞同：1
> 
> 时间：2013-04-02T23:46:13.417
> 
> 标签：web-services, groovy

我绝对是网络服务的菜鸟。我正在尝试使用 groovy 作为客户端来访问一个简单的 Web 服务。Web 服务具有基本身份验证并使用 https。在浏览器中，我会使用这样的东西：

```
https://myserver.com/app/services/soap/call?script=MyService&username=me&password=secret 
```

我如何从 groovy 中调用它？我试图弄清楚如何使用 groovy-wslite，但我无法弄清楚（我知道如何使用 URL 进行服务......不知道所有这些正文和标题......等等......是或者它与我知道的 url 的关系如何工作）。我还尝试使用真正简单的 http 类型的调用：

```
'https://myserver.com/app/services/soap/call?script=MyService&username=me&password=secret'.toURL().text 
```

但这没有用。是否有捷径可寻？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:07:56.993

我在发布后立即意识到问题可能与 SSL 和自签名证书有关。我找到了这篇文章：

[http://java.dzone.com/articles/reading-https-url-self-signed](http://java.dzone.com/articles/reading-https-url-self-signed)

使用这个库：

[https://github.com/kevinsawicki/http-request](https://github.com/kevinsawicki/http-request)

然后解决方案变得非常简单：

```
def req = 'https://myserver.com/app/services/soap/call?script=MyService&username=me&password=secret'
req = HttpRequest.get(req)
req.trustAllCerts()
req.trustAllHosts()
println(req.body()) 
```

我确信有更好的方法可以做到这一点，但这对我有用。:D

# c# - 如何使用交替背景突出显示 WPF Listview 控件中的选定行

> ID：15776470
> 
> 赞同：2
> 
> 时间：2013-04-02T23:46:25.587
> 
> 标签：c#, wpf, xaml, visual-studio-2008, listview

我正在使用 VS 2008 和 .NET 框架的 3.5。我已经设置我的代码来交替 WPF ListView 控件中的背景行。使用的一种颜色是白色。使用的另一种颜色是浅绿色。单击白线时，它会以浅蓝色突出显示该线。单击绿线时，没有突出显示，背景颜色保持浅绿色。我尝试在 XAML 中指定 HighlightBrushKey 和 ControlBrushKey，但它们没有效果。我需要做什么才能在单击时突出显示绿线？

这是 XAML 代码：

```
<!-- Define the resource for the alternating background background used in the ListView objects.  -->
<StackPanel.Resources>
   <Style x:Key="alternatingListViewItemStyle" TargetType="{x:Type ListViewItem}">
      <Style.Resources>
         <!-- Foreground for Selected ListViewItem -->
         <!-- <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black"/> -->
         <!-- Background for Selected ListViewItem -->
         <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Green"/>
         <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Brown"/>
      </Style.Resources>
      <Style.Triggers>
         <!-- Tried setting the background property here, but this did not work.
         <DataTrigger Binding="{Binding Path=RowSelected}" Value="True">
            <Setter Property="Background" Value="Gainsboro"  />
            <Setter Property="FontWeight" Value="Bold" />
         </DataTrigger> -->
         <!-- setting up triggers for alternate background colors -->
         <Trigger Property="ItemsControl.AlternationIndex" Value="1">
            <Setter Property="Background" Value="#FFD9F2BF"></Setter>
         </Trigger>
         <!-- setting up triggers for alternate background colors
         <Trigger Property="ItemsControl" Value="1">
            <Setter Property="Background" Value="#FFD9F2BF"></Setter>
         </Trigger> -->
         <Trigger Property="ItemsControl.AlternationIndex" Value="2">
            <Setter Property="Background" Value="White"></Setter>
         </Trigger>
      </Style.Triggers>
      <!-- setting row height here -->
   </Style>
</StackPanel.Resources>

<ListView x:Name="ListView1" ItemContainerStyle="{StaticResource alternatingListViewItemStyle}"
AlternationCount="2" SelectionChanged="ListView1_SelectionChanged" SelectionMode="Multiple"
HorizontalAlignment="Left" ItemsSource = "{Binding ElementName=LobbyWindow, Path=ListCollection1}">
   <ListView.View>
      <GridView>
         <GridViewColumn DisplayMemberBinding="{Binding Game}">
         <GridViewColumnHeader Content="Game" FontWeight="Bold" />
         </GridViewColumn>
         <GridViewColumn DisplayMemberBinding="{Binding Stakes}">
         <GridViewColumnHeader Content="Stakes" Width="68" FontWeight="Bold" />
         </GridViewColumn>
         <GridViewColumn Width="30" DisplayMemberBinding="{Binding Seats}">
         <GridViewColumnHeader Content="Seats" FontWeight="Bold" />
         </GridViewColumn>
      </GridView>
   </ListView.View>
</ListView> 
```

我还在 ListView1 中定义了一个 Selection_Changed 事件，但不知道如何获取正确的属性或视图元素以更改该行的背景颜色：

```
private void ListView1_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
{
   ListView listview = sender as ListView;
} 
```

任何 XAML 或 C# 代码中的建议将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T05:59:48.277

```
<StackPanel.Resources>
   <Style x:Key="alternatingListViewItemStyle"
          TargetType="{x:Type ListViewItem}">
      <Style.Triggers>
         <Trigger Property="ItemsControl.AlternationIndex" Value="0">
            <Setter Property="Background" Value="#FFD9F2BF"/>
         </Trigger>
         <Trigger Property="ItemsControl.AlternationIndex" Value="1">
            <Setter Property="Background" Value="White"/>
         </Trigger>
         <MultiTrigger>
            <MultiTrigger.Conditions>
               <Condition Property="IsSelected" Value="True"/>
               <Condition Property="ItemsControl.AlternationIndex" Value="0"/>
            </MultiTrigger.Conditions>
            <Setter Property="Background" Value="LightGreen"/>
         </MultiTrigger>
         <MultiTrigger>
            <MultiTrigger.Conditions>
               <Condition Property="IsSelected" Value="True"/>
               <Condition Property="ItemsControl.AlternationIndex"
                          Value="1"/>
            </MultiTrigger.Conditions>
            <Setter Property="Background" Value="LightBlue"/>
         </MultiTrigger>
      </Style.Triggers>
   </Style>
</StackPanel.Resources> 
```

# c# - 如何自动刷新网页的div

> ID：15776474
> 
> 赞同：1
> 
> 时间：2013-04-02T23:47:04.023
> 
> 标签：c#, javascript, asp.net, jquery, asp.net-ajax

我正在解析 RSS 提要的 xml 并显示它。我想刷新一个显示最近新闻的 div。我正在使用更新面板和 asp 计时器来执行此操作（请参阅下面的代码），但每次刷新整个页面都会刷新。

谁能让我知道我哪里出错了

```
protected void Page_Load(object sender, EventArgs e)
{

    string loggedinuser = "experiment4";
    Read_Rss(loggedinuser);
    var rssFeed = from el in doc.Elements("rss").Elements("channel").Elements("item")
                  orderby datetime(el.Element("pubDate").Value) descending

                  select new
                  {
                      Title = el.Element("title").Value,
                      Link = el.Element("link").Value,
                      Description = replace_other(el.Element("description").Value),
                      // Image = regex(el.Element("description").Value),
                      Image =
                      el.Element(media + "thumbnail") != null ?
                      el.Element(media + "thumbnail").Attribute("url").Value :
                      el.Element(media + "content") != null ?
                      el.Element(media + "content").Attribute("url").Value :
                      regex(el.Element("description").Value) != null ?
                      regex(el.Element("description").Value) : null,
                      PubDate = datetime(el.Element("pubDate").Value),
                  };
    lvFeed.DataSource = rssFeed;
    lvFeed.DataBind();
    Data_Load(sender, e);
}   

protected void Data_Load()
{
    //  try
    //{
    string loggedinuser = "experiment4";
    Read_Rss(loggedinuser);
    var rssFeed = from el in doc.Elements("rss").Elements("channel").Elements("item")
                  orderby datetime(el.Element("pubDate").Value) descending

                  select new
                  {
                      Title = el.Element("title").Value,

                  };
    newFeed.DataSource = rssFeed;
    newFeed.DataBind();

}

  <div id="leftcolumn">
            <asp:ListView runat="server" ID="lvFeed">
                <LayoutTemplate>
                    <ul>
                        <li runat="server" id="itemPlaceHolder"><a></li>
                    </ul>
                </LayoutTemplate>
                <ItemTemplate>
                    <div class="box">
                        <strong>
                            <%#Eval("Title") %>
                            : </strong>
                        <br />
                        <br />
                        <img src="<%#Eval("Image")%>" alt="" id="photo" class="photo" onload="imageload(this,0,100)"
                            onerror="onImgError(this,0)"></img>
                        <%#Eval("Description")%><a href="<%#Eval("Link") %>">readmore</a><br />
                        <br />
                        <br />
                    </div>
                </ItemTemplate>
            </asp:ListView>
        </div>

        <div id='rightcolumn'> 
            <div id='side'>
                <asp:ScriptManager ID="ScriptManager1" runat="server">
                </asp:ScriptManager>
                <asp:UpdatePanel ID="UpdatePanel2" UpdateMode="Conditional" runat="server">
                    <ContentTemplate>
                        <asp:Timer ID="Timer2" OnTick="Data_Load" runat="server" Interval="300">
                        </asp:Timer>
                        <asp:ListView runat="server" ID="newFeed">
                            <LayoutTemplate>
                                <ul>
                                    <li runat="server" id="itemPlaceHolder"><a></li>
                                </ul>
                            </LayoutTemplate>
                            <ItemTemplate>
                            <div class="small">
                                <%#Eval("Title") %>
                                :<a href="<%#Eval("Link") %>">readmore</a><br />

                                </div>
                                <br />
                            </ItemTemplate>
                        </asp:ListView>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T14:11:37.897

如果我是你，我会在位于更新面板中的隐藏按钮上设置一个触发器，然后在该触发器上使用 javascript 计时器调用 button.click()，我以前做过这个，奇怪的技巧有效。

触发示例： [http ://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:50:13.067

如果要刷新更新面板，可以在将其 UpdateMode 设置为条件后对其调用 Update。实际上，看看这个例子，它非常好：

[http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.update.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.update.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T02:32:30.920

检查以下示例，使用 jquery 完成。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    $("#changePanel").click(function() {
    var data = "foobar";
    $("#panel").hide().html(data).fadeIn('fast');
    })
  });
    </script>
    <style type="text/css">
    div {
    padding: 1em;
    background-color: #00c000;
     }

    input {
    padding: .25em 1em;
     }​
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <div id="panel">test data</div>
    <input id="changePanel" value="Change Panel" type="button"/>​

    </form>
</body>
</html> 
```

或者你可以使用[jQuery Auto refresh div 之类的东西搞砸](https://stackoverflow.com/questions/13005420/jquery-auto-refresh-div-messing-up)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-08T11:25:31.960

```
<asp:ScriptManager ID="ScriptManager1" runat="server" />
 <asp:Timer runat="server" id="Timer1" interval="900000" ontick="Timer1_Tick" />
 <asp:UpdatePanel runat="server" id="TimedPanel" updatemode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger controlid="Timer1" eventname="Tick" />
    </Triggers>
    <ContentTemplate>
        <div>
             //your div content goes here
        </div>
    </ContentTemplate>
 </asp:UpdatePanel>

the interval attribute of timer control is in milisecond... so for 15 minutes interval would be 900000 ((15*60) * 1000) -> 1 sec=1000 milisecond

now, create an event in codebehind which will be called after interval period

protected void Timer1_Tick(object sender, EventArgs e)
{
    //update div content
} 
```

# ruby-on-rails - 使用 BlueCloth 如何关闭部分文本的降价？

> ID：15776475
> 
> 赞同：1
> 
> 时间：2013-04-02T23:47:06.987
> 
> 标签：ruby-on-rails, markdown, bluecloth

我们在 Rails 网站上使用 Bluecloth 进行文本格式化，但我遇到了一些电子邮件地址的问题。当地址中有双下划线时，BlueCloth 会将其转换为 EM 标签。

在导轨控制台中：

```
BlueCloth::new("bob_smith@foo.com").to_html
"<p>bob_smith@foo.com</p>" 
```

带有单个下划线的电子邮件地址可以正常工作，但是当地址中有两个下划线时，下划线将更改为 em 标记：

```
BlueCloth::new("bob_jones_smith@foo.com").to_html
"<p>bob<em>jones</em>smith@foo.com</p>" 
```

我需要其余文本的格式，但我需要关闭电子邮件地址的格式。我觉得我以前可以使用 notextile 标签，但这似乎不再起作用了。

```
BlueCloth::new("<notextile> bob_jones_smith@foo.com </notextile>").to_html
"<p><notextile> bob<em>jones</em>smith@foo.com </notextile></p>" 
```

有谁知道如何处理这个问题？我们使用的是 bluecloth 2.2.0 版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T04:20:05.600

一种选择是将`:relaxed`设置切换为`true`：

```
BlueCloth.new('bob_jones_smith@foo.com', relaxed: true).to_html 
```

[选项文档可在线获得](http://rubydoc.info/gems/bluecloth/BlueCloth)，但选项名称及其映射到底层 C 库中选项的方式并不总是显而易见的。

如果您想在某些地方需要文字强调而不是其他地方的文本使用默认选项，则可以[显式转义下划线](http://daringfireball.net/projects/markdown/syntax#backslash)：

```
escaped_email = 'bob_jones_smith@foo.com'.gsub('_', '\_')
BlueCloth.new(escaped_email).to_html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:02:38.787

为什么不使用字符串插值？

```
BlueCloth::new("don't format this: %s").to_html % 'bob_jones_smith@foo.com' 
=> "<p>don't format this: bob_jones_smith@foo.com</p>" 
```

除非您不知道要将原始字符串保存在哪里，否则这将是……奇怪。

# spring - SPRING AOP: ::0 处的错误找不到引用的切入点 selectAll

> ID：15776477
> 
> 赞同：1
> 
> 时间：2013-04-02T23:47:18.920
> 
> 标签：spring, aspectj, spring-aop

我阅读了很多关于这个问题的主题，但我还没有解决......也许我正在寻找太多的解决方案。

我有以下课程：

```
package com.aspects;

import org.aspectj.lang.annotation.After;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;

@Aspect
public class AspectModule {
@Pointcut("execution(* com.tutorialspoint.HelloWorld.*(..))")
private void selectAll(){
}

@Before("selectAll()")
public void printMessage() {
System.out.println("That's it!");
}

}

package com.tutorialspoint;

public class HelloWorld {

private String message;

public void setMessage(String message){
this.message = message;
}

public void getMessage(){
System.out.println("Your Message : " + message);
}
}

package com.tutorialspoint;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MainApp {

private static Log log = LogFactory.getLog(MainApp.class);

public static void main(String[] args) {
ApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml");

HelloWorld helloWorld = (HelloWorld) context.getBean("helloWorld");

log.info("Sto per mandare il messaggio!");

helloWorld.getMessage();

}
} 
```

以及以下 XML

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop-3.0.xsd ">

<aop:aspectj-autoproxy />

<bean id="helloWorld" class="com.tutorialspoint.HelloWorld">
<property name="message" value="Ciao a tutti e buongiorno!"/>
</bean>

<bean id="AspectModule" class="com.aspects.AspectModule">
</bean>

</beans> 
```

我得到以下堆栈跟踪：

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'helloWorld' defined in class path resource [Beans.xml]: Initialization of bean failed; nested exception is java.lang.IllegalArgumentException: error at ::0 can't find referenced pointcut selectAll
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:532)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:626)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
at com.tutorialspoint.MainApp.main(MainApp.java:17)
Caused by: java.lang.IllegalArgumentException: error at ::0 can't find referenced pointcut selectAll
at org.aspectj.weaver.tools.PointcutParser.parsePointcutExpression(PointcutParser.java:315)
at org.springframework.aop.aspectj.AspectJExpressionPointcut.buildPointcutExpression(AspectJExpressionPointcut.java:208)
at org.springframework.aop.aspectj.AspectJExpressionPointcut.buildPointcutExpression(AspectJExpressionPointcut.java:194)
at org.springframework.aop.aspectj.AspectJExpressionPointcut.checkReadyToMatch(AspectJExpressionPointcut.java:183)
at org.springframework.aop.aspectj.AspectJExpressionPointcut.getClassFilter(AspectJExpressionPointcut.java:164)
at org.springframework.aop.support.AopUtils.canApply(AopUtils.java:208)
at org.springframework.aop.support.AopUtils.canApply(AopUtils.java:262)
at org.springframework.aop.support.AopUtils.findAdvisorsThatCanApply(AopUtils.java:294)
at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findAdvisorsThatCanApply(AbstractAdvisorAutoProxyCreator.java:118)
at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findEligibleAdvisors(AbstractAdvisorAutoProxyCreator.java:88)
at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.getAdvicesAndAdvisorsForBean(AbstractAdvisorAutoProxyCreator.java:69)
at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:359)
at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:322)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:412)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1494)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
... 11 more 
```

我什么都试过了，但总是同样的错误。如果我评论 @Before 没有错误，但显然没有任何反应，如果我取消评论它我有错误。

我已经更新了所有库...我开始认为这可能是代码问题...

有什么帮助吗？

我的罐子 aopalliance-1.0 asm-all-4.0_RC1 aspectj-1.7.2 aspectjrt aspectjtools aspectjweaver cglib-2.2.0 org.aspectj.matcher spring-framework-3.2.2.RELEASE

# c# - 如何让我的服务停止自动发布到 Windows 应用程序事件日志中

> ID：15776481
> 
> 赞同：4
> 
> 时间：2013-04-02T23:47:34.477
> 
> 标签：c#, .net, windows, visual-studio-2010, service

我刚刚使用 Windows 服务项目模板在 Visual Studio 中创建了一个 Windows 服务应用程序。当我安装并运行该服务时，我注意到它会自动将某些事件记录到 Windows 应用程序事件日志中。例如：

> 服务启动成功。

或者

> 服务已成功处理 PowerEvent。

我计划更详细地实现我自己的事件日志记录，因此这些自动生成的消息最终会成为额外的“噪音”，我不想让日志混乱。有什么方法可以阻止服务将默认消息写入事件日志？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T23:50:15.737

使用服务的 autolog 属性：

```
this.AutoLog = false; 
```

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/f6567h1s.aspx](http://msdn.microsoft.com/en-us/library/f6567h1s.aspx)

# r - R 或其他软件中的加权 ARIMA

> ID：15776482
> 
> 赞同：3
> 
> 时间：2013-04-02T23:47:50.600
> 
> 标签：r, time-series, forecasting

我正在使用 R 中的预测包进行时间序列预测。我有 5 年的历史，想预测接下来的 3 个月。我注意到，如果我在训练集中只使用最近几年的 2-3 年，则预测比使用全部 5 年要好。我相信这是因为 ARIMA 算法在 5 年前发现的模式不再适用于预测未来。

与其完全消除很久以前的数据，是否可以减少这些数据的权重？目前预测中没有这样的选项，但是有没有办法破解这个，或者有替代的软件包吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:34:12.753

当您的方差发生变化并使用 Tsay 检验进行识别时，加权实际上更多。

听起来您可以使用“电平转换”变量（即 0,0,0,0,1,1,1,1,1）。这将允许您仍然保持季节性和星期几的影响，但也可以对均值的变化做出反应。您还应该注意变化异常值、趋势变化和季节性变化，因为星期一可能会变低并变高。您还应该考虑具有领先和滞后影响的假期、一个月中的某天影响和长周末。

Ruey Tsay 跟进 Box 和 Tiao 对异常值的研究，您可以在此处阅读 www.unc.edu/~jbhill/tsay.pdf

既然您问了 - 我们的软件称为 Autobox，它会自动执行这些操作，并于 1976 年推出
。www.autobox.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:28:35.943

AUTOBOX 中也包含的 Chow 测试实际上可以确定是否有任何参数在时间上发生了变化。如果您断言过去 2-3 年的 ARIMA 结构与之前的时期不同，AUTOBOX 将建议数据分段。如果您想使用此功能，请联系 Aautomatic Forecasting Systems 的人员。顺便说一句，我已经为他们编写了这些程序。

# twitter-bootstrap - 用于 popover-inner 的 Bootstrap 弹出框宽度

> ID：15776487
> 
> 赞同：41
> 
> 时间：2013-04-02T23:48:38.453
> 
> 标签：twitter-bootstrap

我希望 Bootstrap Popover 更宽。我读到这应该有效：

```
.popover-inner a {
   width: 600px;
} 
```

但是，浏览器控制台仍然使用上述代码显示自动。很难形容。这是一个快照：

![在此处输入图像描述](https://i.stack.imgur.com/RMLIb.png)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-03T00:00:51.080

根据我在 bootstrap.css 文件中的内容，默认值为 max-width 属性。

我用这个

```
.popover {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 1010;
  display: none;
  max-width: 600px;
  padding: 1px;
  text-align: left;
  white-space: normal;
  background-color: #ffffff;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  -webkit-border-radius: 6px;
     -moz-border-radius: 6px;
          border-radius: 6px;
  -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
     -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
          box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  -webkit-background-clip: padding-box;
     -moz-background-clip: padding;
          background-clip: padding-box;
} 
```

它完全按照您的预期工作。

我的 bootstrap.css 文件根本不包含 popover-inner a css 选择器

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-12-04T02:02:33.297

bootstrap 上有一个[pull request](https://github.com/twbs/bootstrap/pull/2332)可以使这更容易，但是您可以使用这种设置弹出框选项的[技术对其进行修改：](https://github.com/twbs/bootstrap/pull/2332#issuecomment-10132668)`template`

```
$('#yourPopover').popover({
  template: '<div class="popover special-class"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'
}) 
```

然后你可以随意设置你的popover `special-class`css（宽度和更多！）

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-04-25T18:15:06.300

```
.popover {
  max-width: 600px;
  width: auto;
} 
```

将 max-width 更改为您想要的值`min-width`，如果您愿意，您也可以设置

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-10T22:38:09.253

如果您想控制弹出窗口的最小宽度，只需在 css（或额外 css）中添加一个额外的行，如下所示：

```
.popover
{
    min-width: 200px ! important;
} 
```

（将 200px 替换为所需的值）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-31T10:36:42.673

1）简单的方法：（警告：这将影响所有弹出窗口）：

只需覆盖引导程序 .popover 样式，如下所示

```
.popover{
    max-width: 600px; 
} 
```

2）推荐方式：

```
$("#a-div-id-001").popover({
    //set a custom container
    // which can minimize the displacement of popover
    //when window resizing
    container: $("#Div"),
    html : true,
    content: function() {
        return "<span>Hello there!</span>";
    },
    viewport: {
        selector: 'body',
        padding: 10
    },
    title:"Apps",
    template:'<div class="popover my-custom-class" role="tooltip">'
        +'<div class="arrow"></div><h3 class="popover-title"></h3>'
        +'<div class="popover-content"></div>'
        +'</div>'
}); 
```

首先向弹出框模板添加一个自定义类，如上面的 my-custom-class。请注意，除非您指定了自定义模板，否则弹出框将使用默认模板呈现。

然后覆盖引导程序的 .popover 样式，如下所示：

```
div.popover.my-custom-class{
    max-width: 600px;
} 
```

这种样式可让您拥有高达 600 像素的动态宽度。如果需要为弹出框设置最小宽度，直接设置宽度选项即可。见下面的例子，

```
div.popover.my-custom-class{
    min-width: 600px;
} 
```

当您增加宽度时，您可能需要调整弹出框与左/右页面边框之间的间距（偏移量）。查看 viewport 属性，因为它设置了边界。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-02-25T17:39:27.703

禁用：`max-width`_`.popover`

```
.popover {
    max-width: none;
} 
```

然后你可以更自由地玩内容的大小。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-10-26T23:12:01.997

这里的一些答案建议只使`popover`类具有一定的宽度。这不好，因为它会影响所有弹出框。改用这样的东西，更有针对性的东西：

```
.container-div .popover {
    /* add styles here */
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-26T11:14:13.677

这是我使用的示例初始化。

```
 $(".property-price")
    .popover({ 
            trigger: "hover", 
            placement: 'bottom',
            toggle : "popover",
            content : "The from price is calculated ba....the dates selected.",
            title: "How is the from price calculated?",
            container: 'body',
            template: '<div class="popover popover-medium"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>',
        }); 
```

如您所见，它使用自定义模板。该模板使用自定义 popover-medium 类。

然后我有一个 CSS 选择器

```
.popover-medium {
    max-width: 350px;
} 
```

如果需要，您也可以在模板类上设置样式。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-23T13:20:28.840

```
...
width:auto;
... 
```

在我的情况下是完美的解决方案。我在同一页面上有多个弹出窗口，其中一个有一个长 URL。他们现在看起来都不错。谢谢肯尼迪！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-03T14:09:09.620

使用您自己的类将弹出框内容添加为 HTML，然后在 CSS 文件中添加：

```
.popover .own-class { width: ... } 
```

“.own-class”元素宽度将决定弹出框宽度。

# windows - 如何在 WinRT 中打印字形元素

> ID：15776488
> 
> 赞同：1
> 
> 时间：2013-04-02T23:49:02.833
> 
> 标签：windows, printing, windows-runtime, glyph

我正在尝试打印带有路径、文本块和[字形](http://msdn.microsoft.com/en-us/library/windows/apps/br209921.aspx)元素的画布，但是字形被排除在打印的内容中。[这与Silverlight 5 矢量打印](https://stackoverflow.com/questions/9012014/vector-printing-glyphs-in-silverlight-5)的完全相同的问题非常相似，我从未找到解决方案。我是否遗漏了什么或 WinRT 中是否存在相同的问题？

作为背景，我想打印一个 XPS 文档，但由于 WinRT 无法直接打印，我正在从每一页创建一个 Canvas，然后可以将其馈送到 WinRT 打印 API。除了缺少 Glyphs 之外，这工作 A-OK，使整个方案相当无用。

有关打印 XPS 文档、打印字形或确认两者都不可能的任何帮助都会有所帮助。

更新：当 UIElement 被发送到打印机时，似乎 ImageBrush 元素也被丢弃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:53:06.733

也许您可以使用 DirectWrite 提取字形路径并改为打印路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T17:18:34.297

从 Microsoft 在其 MSDN 论坛上收到以下信息：

> 嗨，James，您还不能在 WinRT 中真正打印 Glyphs - 您必须改用 TextBlocks。

# php - PHP 5.4.7 编译 ext php_printer

> ID：15776490
> 
> 赞同：38
> 
> 时间：2013-04-02T23:49:07.200
> 
> 标签：php, dll, printing, compilation

我的知识库是，我可以使用 php。我从未使用过 C、C++、C# 或任何编译器。

我从使用 php 5.3 的 XAMPP 1.7.3 升级到 1.8.1，其中包括：Apache 2.4.3 MySQL 5.5.27 PHP 5.4.7

它正在安装在 Windows 7 Pro、Windows XP Pro 和 Windows Server 2008 r2 上。但我目前正试图让它在 Windows 7 上运行。

我升级是因为出于安全原因我需要更新版本的 Apache 和 MySQL。我没有降级的选项。

我使用 php_printer.dll 将原始数据打印到打印机：

```
printer_set_option($handle, PRINTER_MODE, "RAW"); 
```

我的代码在 PHP 5.3 中运行良好，但在 PHP 5.4 中中断。

收到错误后：“致命错误：调用未定义的函数printer_open() in ~”。我检查了 php_error_log 并收到了以下信息。

```
PHP Warning: PHP Startup: printer: Unable to initialize module
Module compiled with module API=20090626
PHP compiled with module API=20100525
These options need to match 
```

我找了几个小时试图为 PHP 5.4.7 找到预编译的 php_printer.dll 无济于事。我已经得出结论，我必须从 PECL 中的源文件编译它。pecl.php.net/package/printer

在我做任何互联网用户应该做的事情之前，我从来没有这样做过。我用谷歌搜索并在这里找到了一些信息： [https ://wiki.php.net/internals/windows/stepbystepbuild](https://wiki.php.net/internals/windows/stepbystepbuild)

我花了一整天的时间，但 PHP 构建工作。但随后尝试创建 php_printer.dll 首先我尝试：

```
svn co http://svn.php.net/repository/pecl/printer/trunk pecl/printer 
```

但它说：'svn' 不是内部或外部命令、可运行程序或批处理文件。

所以我自己从： **svn.php.net/repository/pecl/printer/trunk/**下载了文件 并将它们放入： **C:\php-sdk\php54dev\vc9\x86\php5.4-201303311430\ext\printer**

我确保从以下位置下载库： **windows.php.net/downloads/php-sdk/deps/vc9/x86/** 也只是： **deps-5.4-vc9-x86.7z**

但是，我尝试了一个然后另一个；每次我尝试 nmake 时收到以下信息：

```
c:\php-sdk\php54dev\vc9\x86\php5.4-201303311430>nmake

Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
Copyright (C) Microsoft Corporation.  All rights reserved.

printer.c
ext\printer\printer.c(266) : error C2065: 'pval' : undeclared identifier 
```

* * *

更新

我在另一个论坛上得到了一些帮助。

* * *

作者 hackattack142 » 2013 年 4 月 3 日 23:51

你好，

打开“printer.c”并将“pval”的所有实例替换为“zval”，它应该可以编译。

* * *

谢谢 Hackattack，我希望更近一步，

```
c:\php-sdk\php54dev\vc9\x86\php5.4-201303311430>buildconf
~
c:\php-sdk\php54dev\vc9\x86\php5.4-201303311430>configure --disable-all --enable-cli 
--enable-printer
~
c:\php-sdk\php54dev\vc9\x86\php5.4-201303311430>nmake

Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
Copyright (C) Microsoft Corporation.  All rights reserved.

internal_functions.c
printer.c
   Creating library Release_TS\php5ts.lib and object Release_TS\php5ts.exp
   Creating library Release_TS\php.lib and object Release_TS\php.exp
SAPI sapi\cli build complete 
```

它似乎已经编译。然而; 我找不到打印机.dll 或 php_printer.dll，这是我希望的结果。

在**Release_TS\ext**文件夹中有一个名为**Printer**的文件夹。它包含以下文件： **printer.obj 打印机.sbr vc90.idb**

我也做了最后一步：

```
c:\php-sdk\php54dev\vc9\x86\php5.4-201303311430>cd Release_TS
c:\php-sdk\php54dev\vc9\x86\php5.4-201303311430\Release_TS>php -m
[PHP Modules]
Core
date
ereg
pcre
printer
Reflection
SPL
standard
[Zend Modules]
c:\php-sdk\php54dev\vc9\x86\php5.4-201303311430\Release_TS> 
```

* * *

来自另一个论坛的帮助

```
configure --disable-all --enable-cli --enable-printer=shared 
```

它起作用了，我创建了 php_printer.dll 但是当我尝试使用它时：

在 PHP 错误日志中：[15-Apr-2013 15:34:53 UTC] PHP 警告：PHP 启动：无效库（可能不是 PHP 库）“php_printer.dll”在第 0 行的未知中

* * *

我在使用 5.4.15 时必须获取 5.4.7 文件，但 XAMPP 1.8.1 使用 5.4.7

[http://www.oldapps.com/php_programming_language.php?old_php=8227](http://www.oldapps.com/php_programming_language.php?old_php=8227)

并将其放入：C:\php-sdk\php54dev\vc9\x86\php-5.4.7

然后将打印机文件放在 ext 文件夹中并完成上述所有过程，并且：

配置 --enable-printer=shared

**它奏效了：**

**PHP 版本 5.4.7 php_printer.dll**

**[http://pylonx.com/PHP/php_printer_5.4.7.zip](http://pylonx.com/PHP/php_printer_5.4.7.zip)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-24T09:16:38.417

下载并安装您喜欢的任何版本的 php，并在此处安装适当的 php 打印机 dll：http: [//windows.php.net/downloads/pecl/snaps/printer/0.1.0-dev/](http://windows.php.net/downloads/pecl/snaps/printer/0.1.0-dev/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T02:01:10.917

这是 PHP 5.4.7 到 5.4.11 版本中的一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-18T11:44:54.533

如果您可以使用 xampp 1.6.8 版本，它将解决这些问题。它具有 php 5.2.6 并且 php_printer.dll 文件已保存在 php 文件夹的 ext 文件夹中。所以你只需要取消注释 php.ini 文件中的行 extension=php_printer.dll ，这在 php 信息页面的“加载的配置文件”部分下的路径中注意到。你可以从 oldapps.com 找到那个版本的 xampp

# java - Antlr 获取子代币

> ID：15776494
> 
> 赞同：0
> 
> 时间：2013-04-02T23:49:30.370
> 
> 标签：java, antlr4

如果我的术语不正确，请原谅我。

假设我有一点简化的语法：

```
// parser
expr : COMPARATIVE;

// lexer
WS : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+; 
COMPARATOR 
        : 'vs'
    | 'versus'
        ;
ITEM 
        : 'boy'
        | 'girl'
        ;
COMPARATIVE :ITEM WS* COMPARATOR WS* ITEM; 
```

所以这当然会匹配`'boy vs girl'`or`'girl vs boy'`等​​。但我的问题是当我创建 Lexer 时，即

```
CharStream stream = new ANTLRInputStream("boy vs girl");
SearchLexer lex = new SearchLexer(stream);
CommonTokenStream tokens = new CommonTokenStream(lex);
tokens.fill();
for(Token token : tokens) {
    System.out.print(token.getType() + " [" + token.getText() + "] ");
} 
```

这会打印出类似这样的内容：9 [boy vs girl]，即它与我的查询匹配得很好，但现在我希望能够执行类似的操作，获取当前令牌的子令牌。

我的直觉告诉我我需要使用树，但对于我的示例，我真的不知道如何在 Antlr4 中执行此操作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:19:14.853

目前，`COMPARATIVE`是一个词法分析器规则，这意味着它将尝试从与该规则匹配的所有文本中生成单个标记。您应该改为制定解析器规则`comparative`：

```
comparative : ITEM WS* COMPARATOR WS* ITEM; 
```

由于`COMPARATIVE`将不再被视为单个令牌，因此您将获得`ITEM`、`WS`和的单独令牌`COMPARATOR`。

两个旁注：

1.  如果空格不重要，您可以将其隐藏在解析器规则中，如下所示：

    ```
    WS : ('\t' | ' ' | '\r' | '\n'| '\u000C')+ -> channel(HIDDEN); 
    ```

    然后，您可以将`comparative`解析器规则简化为：

    ```
    comparative : ITEM COMPARATOR ITEM; 
    ```

2.  在 ANTLR 4 中，您可以使用新语法来简化字符集：

    ```
    WS : [ \t\r\n\u000C]+ -> channel(HIDDEN); 
    ```

# mysql - '<' 运算符被保留 PowerShell 错误

> ID：15776495
> 
> 赞同：40
> 
> 时间：2013-04-02T23:49:33.877
> 
> 标签：mysql, powershell

我正在尝试`mysql -u root -p Tutorials < tut_backup.sql`在 PowerShell 中使用来恢复 MySQL DB 中的表，但它给了我 `The '<' operator is reserved for future use.`错误。有迂回的方式吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-03T06:01:57.597

怎么样

```
 & cmd.exe /c "mysql -u root -p Tutorials < tut_backup.sql" 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-01-02T18:56:47.083

您可以像这样通过管道输入内容：

```
Get-Content tut_backup.sql | mysql -u root -p Tutorials 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-25T06:48:16.213

试试这个：

```
mysql -u root -p
(prompts for password)
source tut_backup.sql 
```

* * *

^([归功于](https://stackoverflow.com/a/1774262/1429387)wallyk 。)

# java - 解释 jstack 跟踪以跟踪停滞的锁

> ID：15776500
> 
> 赞同：0
> 
> 时间：2013-04-02T23:49:55.913
> 
> 标签：java, multithreading, concurrency, locking, jstack

我使用了 Samurai，我可以看到没有死锁并且有几个线程在等待，但我似乎无法确切地确定哪个锁正在停止进程。谁能帮我吗？

我不是在寻找人们来猜测我的问题是什么，而是关于如何更改代码以更容易追踪问题的更多建议。我完成了第一次发送和接收，然后程序在应该发送第二条消息时停止。我是多线程新手，这是我第一次拉 jstack

```
2013-04-02 23:43:12
Full thread dump OpenJDK Zero VM (22.0-b10 mixed mode):

"Attach Listener" daemon prio=10 tid=0x0037c880 nid=0x105b waiting on condition     [0x00000000]
java.lang.Thread.State: RUNNABLE

"Thread-3" prio=10 tid=0x0037c488 nid=0x1041 waiting on condition [0xa7ddd000]
java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0xab770958> (a     java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at org.dnsdojo.ryanhost.GA.MuPlusOne.RobotInterface.evaluate(RobotInterface.java:38)
    at org.dnsdojo.ryanhost.GA.MuPlusOne.RobotInterface.run(RobotInterface.java:69)
    at java.lang.Thread.run(Thread.java:722)

"Thread-1" prio=10 tid=0x0036ff10 nid=0x1036 waiting on condition [0xa7f5d000]
java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0xab770940> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at   java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at org.dnsdojo.ryanhost.GA.MuPlusOne.TwoWaySerialCommTest$SerialWriter.run(TwoWaySerialCommTest.java:229)
    at java.lang.Thread.run(Thread.java:722)

"Thread-0" daemon prio=10 tid=0x0036a1e8 nid=0x1035 runnable [0xa80dd000]
java.lang.Thread.State: RUNNABLE
    at gnu.io.RXTXPort.eventLoop(Native Method)
    at gnu.io.RXTXPort$MonitorThread.run(RXTXPort.java:1644)

"Service Thread" daemon prio=10 tid=0x00253440 nid=0x102b runnable [0x00000000]
java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x00251988 nid=0x102a runnable [0x00000000]
java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=10 tid=0x0020c880 nid=0x1029 in Object.wait() [0xa8ac1000]
java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0xab718a88> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:135)
    - locked <0xab718a88> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:151)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)

"Reference Handler" daemon prio=10 tid=0x00209f18 nid=0x1028 in Object.wait() [0xa8c41000]
java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0xab718b10> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:503)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
    - locked <0xab718b10> (a java.lang.ref.Reference$Lock)

"main" prio=10 tid=0x00180fa8 nid=0x1022 in Object.wait() [0xb6848000]
java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0xa90716a8> (a org.dnsdojo.ryanhost.GA.MuPlusOne.CandidateTest)
    at java.lang.Object.wait(Object.java:503)
    at org.dnsdojo.ryanhost.GA.MuPlusOne.MuPlusOneAlgorithm.runOnBot(MuPlusOneAlgorithm.java:120)
    - locked <0xa90716a8> (a org.dnsdojo.ryanhost.GA.MuPlusOne.CandidateTest)
    at org.dnsdojo.ryanhost.GA.MuPlusOne.MuPlusOneAlgorithm.initialFitness(MuPlusOneAlgorithm.java:72)
    - locked <0xab718bd0> (a org.dnsdojo.ryanhost.GA.MuPlusOne.MuPlusOneAlgorithm)
    at org.dnsdojo.ryanhost.GA.MuPlusOne.MuPlusOneAlgorithm.main(MuPlusOneAlgorithm.java:138)

"VM Thread" prio=10 tid=0x00204910 nid=0x1027 runnable

"VM Periodic Task Thread" prio=10 tid=0x00255130 nid=0x102c waiting on condition

JNI global references: 36 
```

根据要求添加代码串行通信类

```
 package org.dnsdojo.ryanhost.GA.MuPlusOne;

    import gnu.io.CommPort;
    import gnu.io.CommPortIdentifier;
    import gnu.io.SerialPort;
    import gnu.io.SerialPortEvent;
    import gnu.io.SerialPortEventListener;

    import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;

    /**
     * This version of the TwoWaySerialComm example makes use of the
     * SerialPortEventListener to avoid polling.
     *
     */
    public class TwoWaySerialComm
    {
        public TwoWaySerialComm()
        {
            super();
        }

        void connect ( String portName ) throws Exception
        {
            listPorts();
            CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(portName);
            if ( portIdentifier.isCurrentlyOwned() )
            {
                System.out.println("Error: Port is currently in use");
            }
            else
            {
                CommPort commPort = portIdentifier.open(this.getClass().getName(),2000);

                if ( commPort instanceof SerialPort )
                {
                    SerialPort serialPort = (SerialPort) commPort;
                    serialPort.setSerialPortParams(57600,SerialPort.DATABITS_8,SerialPort.STOPBITS_1,SerialPort.PARITY_NONE);

                    InputStream in = serialPort.getInputStream();
                    OutputStream out = serialPort.getOutputStream();

                    (new Thread(new SerialWriter(out))).start();

                    serialPort.addEventListener(new SerialReader(in));
                    serialPort.notifyOnDataAvailable(true);

                }
                else
                {
                    System.out.println("Error: Only serial ports are handled by this example.");
                }
            }
        }

        static void listPorts()
        {
            java.util.Enumeration<CommPortIdentifier> portEnum = CommPortIdentifier.getPortIdentifiers();
            while(portEnum.hasMoreElements())
            {
                    CommPortIdentifier portIdentifier = portEnum.nextElement();
                    if(portIdentifier == null)
                    {
                            System.out.println("No ports");
                    }
                    System.out.println("Available - " + portIdentifier.getName());
            }
        }

        /**
         * Handles the input coming from the serial port. A new line character
         * is treated as the end of a block in this example.
         */
        public static class SerialReader implements SerialPortEventListener
        {
            private InputStream in;
            private byte[] buffer = new byte[1024];

            public SerialReader ( InputStream in )
            {
                this.in = in;
            }

            public void serialEvent(SerialPortEvent arg0) {
                int data;

                try
                {
                    int len = 0;
                    while ( ( data = in.read()) > -1 )
                    {
                        if ( data == '\n' ) {
                            break;
                        }
                        buffer[len++] = (byte) data;
                    }
                    System.out.print(new String(buffer,0,len));
                }
                catch ( IOException e )
                {
                    e.printStackTrace();
                    System.exit(-1);
                }
            }

        }

        /** */
        public static class SerialWriter implements Runnable
        {
            OutputStream out;

            public SerialWriter ( OutputStream out )
            {
                this.out = out;
            }

            public void run ()
            {
                try
                {
                    int c = 0;
                    while ( ( c = System.in.read()) > -1 )
                    {
                        this.out.write(c);
                    }
                }
                catch ( IOException e )
                {
                    e.printStackTrace();
                    System.exit(-1);
                }
            }
        }

        public static void main ( String[] args )
        {
            try
           {
               (new TwoWaySerialComm()).connect("/dev/ttyS82");
           }
           catch ( Exception e )
           {
              TwoWaySerialComm.listPorts();
               e.printStackTrace();
           }
        }

    } 
```

RobotInterface 类

```
package org.dnsdojo.ryanhost.GA.MuPlusOne;

import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;

public class RobotInterface implements Runnable
{
    // create a serial connection
    // transmit a string and check for response
    // wait for evaluation
    // take evaluation
    private CandidateTest candidate;
    private TwoWaySerialCommTest serialConnection;
    //private Random rng = new Random();

    protected static Logger logger = Logger.getLogger("Thread" + Thread.currentThread().getName());

    public RobotInterface(CandidateTest test, TwoWaySerialCommTest serialConnection)
    {
            this.candidate = test;
            this.serialConnection = serialConnection;
            PropertyConfigurator.configure("log4j.properties");
    }

    public void evaluate (Genome genome)
    {
            //send to robot and return fitness
            //genome.setFitness(rng.nextDouble());
            logger.debug("fitness is " + genome.getFitness());

                    try
        {
                            String s = candidate.getCandidate().toString();
                            System.out.println(s);
                            TwoWaySerialCommTest.lock.lock();
                            System.out.println(s);
            serialConnection.put(s);
            TwoWaySerialCommTest.inputAvailable.await();
            try
            {
                    candidate.getCandidate().setFitness(Float.parseFloat(serialConnection.take()));
            }
            catch(Exception e)
            {
                    e.printStackTrace();
            }

        }
        catch ( Exception e )
        {
            TwoWaySerialCommTest.listPorts();
            e.printStackTrace();
        }
                    finally
                    {
                            TwoWaySerialCommTest.lock.unlock();
                    }
    }

    public void run()
    {
            logger.debug("entering run of Robot Interface");
            logger.debug("Send Genome via serial and wait for a response");
            Genome testSubject = candidate.getCandidate();
            evaluate(testSubject);
            candidate.finished();
    }
} 
```

总结执行 - 我有一个创建 RobotInterface 线程的 for 循环，每个线程都用于包含位串的基因组。此基因组参考保存在候选测试中，该候选测试只是 RobotInterface 和调用线程在完成时发出信号的共享类。

位串由 RobotInterface 使用 TwoWaySerialCommTest 发送给机器人。机器人对其进行评估并返回一个适应度函数，该函数被 SerialReader 解析为浮点数。然后将下一个字符串发送给机器人。

在第一个字符串返回给机器人并且正在发送第二个字符串之后发生锁定。我可以看到第一个字符串到达​​机器人，但第二个字符串没有。输出如下 -

```
initialFitness method
1101010101111111001100000101011100110000100001111111001000001001101101000011100101011000000100000000110110001110
5436 [main] DEBUG org.dnsdojo.ryanhost.GA.MuPlusOne.GeneticAlgorithm  - Testing candidate
1101010101111111001100000101011100110000100001111111001000001001101101000011100101011000000100000000110110001110
1101010101111111001100000101011100110000100001111111001000001001101101000011100101011000000100000000110110001110
5853 [Thread-2] DEBUG Threadmain  - entering run of Robot Interface
5869 [Thread-2] DEBUG Threadmain  - Send Genome via serial and wait for a response
5881 [Thread-2] DEBUG Threadmain  - fitness is 0.0
1101010101111111001100000101011100110000100001111111001000001001101101000011100101011000000100000000110110001110
1101010101111111001100000101011100110000100001111111001000001001101101000011100101011000000100000000110110001110
10
Output buffer after put
1101010101111111001100000101011100110000100001111111001000001001101101000011100101011000000100000000110110001110

Buffer isn't empty

initialFitness method
1110110101110000001100101100110001001010010101011110001101010010100100111011111000011101110000001110100111001111
16593 [main] DEBUG org.dnsdojo.ryanhost.GA.MuPlusOne.GeneticAlgorithm  - Testing candidate
1110110101110000001100101100110001001010010101011110001101010010100100111011111000011101110000001110100111001111
1110110101110000001100101100110001001010010101011110001101010010100100111011111000011101110000001110100111001111
16944 [Thread-3] DEBUG Threadmain  - entering run of Robot Interface
16953 [Thread-3] DEBUG Threadmain  - Send Genome via serial and wait for a response
16964 [Thread-3] DEBUG Threadmain  - fitness is 0.0
1110110101110000001100101100110001001010010101011110001101010010100100111011111000011101110000001110100111001111
1110110101110000001100101100110001001010010101011110001101010010100100111011111000011101110000001110100111001111
10
Output buffer after put
1110110101110000001100101100110001001010010101011110001101010010100100111011111000011101110000001110100111001111

Buffer isn't empty 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:21:34.267

我的方法是消除明显不相关的线程。对你来说，这可能是

*   `Attach Listener`
*   `Service Thread`
*   `Signal Dispatcher`
*   `Finalizer`
*   `Reference Handler`
*   `VM Thread`
*   `VM Periodic Task Thread`

这些是VM 管理的线程，也就是说，您没有显式或隐式地创建它们。

那叶子`Thread-x`和`Main`线程。

查看堆栈跟踪，您可以`WAITING`根据您对代码的了解推断出事情的原因。例如，看起来队列正在等待 a`Condition`被满足；

```
parking to wait for <0xab770958> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject) 
```

`Conditions`会被`signal`唤醒，因此您可能会考虑为什么`signal`没有发送消息。因为这个条件包含在队列实现中，所以感觉问题不太可能不是您忘记调用`signal`. 但是，您可能忘记调用某些东西，而这又会调用它？还是无意中设置了一个条件从未满足的情况？

因此，我会查看事件流，以确保任何被锁定的东西都被解锁或任何会导致活锁的条件（请记住，JVM/samauri 可以检测死锁但不能检测活锁）。

这是我对如何解决它的一般想法。如果您想在某处发布代码，这将有助于实际调试它/提供更多关于人们如何解决它的见解。

祝你好运！

# c++ - libpq VS qpsql（postgre 的 QT 驱动程序）

> ID：15776506
> 
> 赞同：0
> 
> 时间：2013-04-02T23:50:41.130
> 
> 标签：c++, c, database, qt, libpq

我一直在使用 QT 4.8 和 QT Postgresql 驱动程序来制作 Postgresql 连接头和一个类，当我最终完成它时，我的老板告诉我忘记它并在本机 libpq 中重新制作它......他使用 QT 作为将使用标头的程序所在的 ide，我知道，以编程方式，结合范式并不是一个好主意，但是……我正在按照他说的做。所以！我想知道的真正问题是......使用这两者的主要区别是什么？（除了一个是c，另一个是c++）

我的意思是，就程序的效率、性能和大小以及数据类型而言？此外，如果可能是与数据库的连接发生变化。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:02:56.287

快速浏览一下 Qt `./src/sql/drivers/psql/qsql_psql.cpp`(Qt 4.4.3) 的 postgres 界面会发现它是基于`libpq`.

为你的老板辩护：通过在 GUI 之上构建，`libpq`部分可以与应用程序的核心分离，例如允许批处理。另一方面，必须说 Qt 应用程序也可以批量运行。然而，您的老板可能会担心依赖 Qt 的未来发展。

# c++ - 教科书中的指针赋值

> ID：15776507
> 
> 赞同：1
> 
> 时间：2013-04-02T23:50:45.673
> 
> 标签：c++, pointers

在我的 c++ 教科书中，出现了以下代码：

```
B * pointerToB = new B();
A * pointerToA = pointerToB(); 
```

我对指针非常熟悉，但让我感到困惑的是第二行末尾的括号。我以前从未见过这样做过。我期待更多类似的东西：

```
A * pointerToA = &(*pointerToB); 
```

我已经搜索了我的教科书以获得解释，但没有找到答案。最终，我得出的结论是

```
A * pointerToA = pointerToB(); // is synonymous with
A * pointerToA = &(*pointerToB); // this line 
```

以下是 A 类和 B 类的实现：

```
class A {
public:
 A (): dataOne(2){}
 virtual void whoAmI(){printf("class A");}
private:
 int dataOne;
};

class B : public A {
public:
 B (): dataOne(4){}
 virtual void whoAmI(){printf("class B");}
private:
 int dataTwo;
}; 
```

我的推理合理吗？

# html - 使用 CSS 生成箭头线

> ID：15776510
> 
> 赞同：6
> 
> 时间：2013-04-02T23:51:07.910
> 
> 标签：html, css, css-shapes

我正在尝试生成一条中间有细分的水平直线以显示箭头。这个想法是，行下显示的内容将提供有关行上显示的内容的详细信息。这条线应该是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/QvL6S.png)

我正在尝试使用纯 HTML 和 CSS（无位图图像）生成它。如果最终产生正确的结果，使用[Font Awesome是可以接受的。](http://fortawesome.github.com/Font-Awesome/)我需要控制线条的粗细和颜色。击穿的角度无关紧要（上图示例中的 45 度和 90 度）。我知道这个[CSS 三角形技巧](http://css-tricks.com/snippets/css/css-triangle/)，但我想不出将它应用到这种情况的方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T23:54:02.503

这个漂亮的效果可以使用 CSS`:before`和`:after`属性来实现。最好在[cssarrowplease](http://cssarrowplease.com/)使用 Simon Højberg 的在线生成器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-09T09:16:26.663

具有透明箭头背景的解决方案，允许您在每个背景中使用它：

**HTML：**

```
<div class="line-separator">
    <div class="side-line"> </div>
    <div class="triangle"> </div>
    <div class="side-line"> </div>
</div> 
```

**CSS：**

```
.side-line {
    display: inline-block;
    border-top: 1px solid black;
    width: 20%;
}

.triangle {
    display: inline-block;
    height: 7px;
    width: 7px;
    transform: rotate(45deg);
    transform-origin: center center;
    border-top: 1px solid black;
    border-left: 1px solid black;
    margin: 0 -3px -3px;
} 
```

**现场演示：http:** [//jsfiddle.net/85saaphw/](http://jsfiddle.net/85saaphw/)

# frameworks - Qcodo/Qcube gen 模型错误“语法错误，意外')' in”

> ID：15776517
> 
> 赞同：0
> 
> 时间：2013-04-02T23:51:53.073
> 
> 标签：frameworks, model, qcodo, codegen

我正在使用一个名为 Qcube 的框架。在它以 Qcodo 的名字而闻名之前。它具有称为 codegen 的功能，它为您的所有数据库表生成模型，包括它们的关系（如果有）。问题是它生成的文件有语法错误。在谷歌搜索后我找不到任何解决方案。

这是错误消息：

```
Parse error: syntax error, unexpected ')' in C:\Program Files (x86)\Ampps\www\osnet\includes\model\generated\EmployeeGen.class.php on line 967 
```

这是错误指向的行。

```
$objToReturn = Employee::QuerySingle(
            QQ::AndCondition(
                QQ::Equal(QQN::Employee()->Id, $intId),
            ),
            $objOptionalClauses
        ); 
```

附言

我知道是什么导致了语法错误，但是为了清除那些有语法错误的代码行是由框架的 codegen 函数“生成”的，而不是我硬编码的。我不能只编辑生成的文件，因为现在有 58 个表，每个表都有它的 gen 文件，每个 gen 文件至少有 10 个这样的错误，最重要的是，我需要重新生成文件我添加了一个新的数据库表。

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:57:25.463

这是在 WAMP 环境中使用 QCubed 开发时的一个已知错误。codegen 使用一个名为 GO_BACK() 的函数，它依赖于具有 Linux 行结尾的模板文件。Linux 使用 (lf)，Windows 使用 (cr lf)。这意味着 Windows 使用了一个额外的字符。

这是我自己报告的一个错误[https://github.com/qcubed/framework/issues/107](https://github.com/qcubed/framework/issues/107)并且该问题已在 QCubed 的最新版本中得到修复，您可以在 Github 上找到下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-21T06:56:37.583

它基于您的操作系统，如果您使用 Windows 然后搜索`GO_BACK()`并且在任何地方将`GO_BACK(2)`其更改为`GO_BACK(3)`和重新**启动**它。`GO_BACK(5)``GO_BACK(6)`

# jquery - jQuery ajax $(xml).find() 适用于 IE 但不适用于 Chrome

> ID：15776529
> 
> 赞同：2
> 
> 时间：2013-04-02T23:52:46.903
> 
> 标签：jquery, xml, ajax, post, dynamics-crm-2011

我正在从托管在同一 CRM 实例上的网络资源向 CRM 发出 FetchXML 请求

此代码在 IE 中有效，但在 Chrome 中无效……为什么？

```
 $.ajax({
        type: "POST",
        dataType: 'xml',
        contentType: "text/xml; charset=utf-8",
        processData: false,
        url: path,
        data: fetchRequest,
        beforeSend: function(xhr) {
            xhr.setRequestHeader(
                "SOAPAction",
                "http://schemas.microsoft.com/xrm/2011/Contracts/Services/IOrganizationService/Execute"
            ); //without the SOAPAction header, CRM will return a 500 error
        }
    }).done(
         function(data){
           $(data).find("a\\:Entity").each(function () {
            // loop entered in IE but not in chrome
           }
         }
     ); 
```

编辑

问题不在于 ajax 调用，问题在于 .find() 没有从返回的 xml 中获取节点。

所以要清楚，我从每个浏览器中的请求中得到了看起来相同的 xml，但是这里的 find 方法

```
$(data).find('a\\Entity') 
```

在 chrome 中不返回任何项目...它在 IE 中完美运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T22:11:53.053

好的，我想我找到了问题

[http://bugs.jquery.com/ticket/155](http://bugs.jquery.com/ticket/155)

jQuery find() 有问题，因为在不同的浏览器中 selectSingleNode 的实现不同。

这个错误说它已修复，但我不认为它是。

**编辑**

我发现使选择器看起来像这样似乎可行

```
$(xml).find("a\\:Entity, Entity") 
```

这有点像黑客，但它解决了我的特殊问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:03:16.597

您很可能需要连接`.fail`以查看它是否返回错误。您应该能够将其附加到`.done`函数的末尾，例如

```
$.ajax({
    type: "POST",
    dataType: 'xml',
    contentType: "text/xml; charset=utf-8",
    processData: false,
    url: path,
    data: fetchRequest,
    beforeSend: function(xhr) {
        xhr.setRequestHeader(
            "SOAPAction",
            "http://schemas.microsoft.com/xrm/2011/Contracts/Services/IOrganizationService/Execute"
        ); //without the SOAPAction header, CRM will return a 500 error
    }
}).done(
     function(data){
       $(data).find("a\\:Entity").each(function () {
        // loop entered in IE but not in chrome
       }
     }
 ).fail(function(p1, p2, p3){
    ...
}); 
```

注意 - 如果失败像旧的“错误”函数那样工作，那么应该有多个参数您可以允许失败函数接受，第二个和第三个为您提供有关错误的更多详细信息。

除了捕获失败之外，我还记得 chrome 和异步模式存在问题，因此您还可以尝试在 dataType 标志之后将 async 标志设置为 false。像这样的东西：

```
$.ajax({
    type: "POST",
    dataType: 'xml',
    async: false,
    .... etc 
```

我读到的关于 chrome 的唯一另一个问题是 jsonp 的问题，但你在这里使用的是 xml，所以这显然不是问题。

# vb.net - 将整数转换为 UTF-8 字符？

> ID：15776532
> 
> 赞同：0
> 
> 时间：2013-04-02T23:52:57.123
> 
> 标签：vb.net, utf-8, integer, converter

我正在尝试将整数转换为 VB.net 中的 UTF-8 字符。我试过了：

```
Function ConvertToUTF8(Input as Integer)
    Return Chr(Input).ToString
End Function

Function ConvertToUTF8(Input as Integer)
    Return Convert.ToUInt16(Input).ToString
End Function 
```

但我得到的只是错误（第一个）和数字（第二个）。我确信有一种简单的方法可以实现我所缺少的。我在 MSDN 上看过，但找不到太多 :(

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:54:35.943

你试过`Return Chr(Input)`吗？

*   [http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.chr.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.chr.aspx)

您还应该能够做到这一点：

`Return Convert.ToChar(Input)`

# labview - 为什么我的波形在 labview 中没有正确的频率间隔？

> ID：15776538
> 
> 赞同：0
> 
> 时间：2013-04-02T23:53:34.610
> 
> 标签：labview, waveform

在 LabView GUI 中，我将频率设置为 300Hz = 1/300 秒 = 3.333 毫秒，脉冲宽度设置为 2 毫秒。这计算为 60% 的占空比。

![在此处输入图像描述](https://i.stack.imgur.com/FoRnd.jpg)

为什么下面显示的脉冲之间的间隔不等于 3.333 毫秒？它们看起来更接近 1 毫秒，这很遥远。

![在此处输入图像描述](https://i.stack.imgur.com/tgZyc.jpg)

以下是我正在使用的接线图：

![在此处输入图像描述](https://i.stack.imgur.com/vxoVB.jpg)

问题是否可能是我的定时循环设置为每秒循环一次？我应该更快地循环吗？我应该使用什么样的循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:27:31.983

你每 3.333 毫秒就有一个脉冲上升，所以没关系。您不需要定时循环，express VI 将保持相位，只要确保它的运行频率高于 express VI 产生的数据量即可。一个简单的等待毫秒就可以了。

# jquery - jQuery 同位素：IE 未加载

> ID：15776543
> 
> 赞同：1
> 
> 时间：2013-04-02T23:53:55.227
> 
> 标签：jquery, html, jquery-masonry, jquery-isotope

这是我从未使用过的浏览器上的常见问题，但似乎有些人仍然这样做。当我在网站上设置同位素网格时，它们似乎在每个浏览器中都可以正常工作，但是当我使用[http://netrenderer.com](http://netrenderer.com)在 IE 中进行测试时，它无法布置 div，而是它们都坚持浏览器的左侧。我正在尝试找到一种 jQuery 方法来启动同位素/砌体布局等，它是跨浏览器友好的（尤其是 IE）。
这是 jsfiddle 中的一个简单模型：http: [//jsfiddle.net/73Xv7/3/](http://jsfiddle.net/73Xv7/3/)
和现场演示版本：http: [//jsfiddle.net/73Xv7/3/show/](http://jsfiddle.net/73Xv7/3/show/)
jQuery：

```
var jQuerycontainer = jQuery('#main-grid');

jQuerycontainer.imagesLoaded( function(){
jQuerycontainer.isotope({
    itemSelector: '.grid-block',
    animationEngine: 'best-available',
    masonry: {
    columnWidth: 4
    }
});
    }); 
```

我尝试的其他方法是将主体设置为`display: none`并在窗口加载时启动淡入，如下所示：

```
(function($) {

  $(window).load(function() {
    $(document.body).fadeIn(1000);
  });

  setTimeout(function() {
      $('#main-grid').isotope( 'reLayout' );
}, 1000);

})(jQuery); 
```

为了给脚本更多的加载时间，这同样适用于所有浏览器，除了 IE。是否有任何方法可以启动在 IE 中也可以使用的砌体布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:14:56.433

我已经在 IE8 和 IE9 中尝试过你的 jsfiddle，它正在工作。我认为这可能是 netrenderer.com 引擎的问题。

你有没有考虑过使用布局回调函数来触发fadeIn？

```
$('#container').isotope({
  onLayout: function( $elems, instance ) {
    // `this` refers to jQuery object of the container element
    console.log( this.height() );
    // callback provides jQuery object of laid-out item elements
    $elems.css({ background: 'blue' });
    // instance is the Isotope instance
    console.log( instance.$filteredAtoms.length );
  }
}); 
```

见：http: [//isotope.metafizzy.co/docs/options.html](http://isotope.metafizzy.co/docs/options.html)

# javascript - 文本框为固定标题

> ID：15776546
> 
> 赞同：0
> 
> 时间：2013-04-02T23:54:06.283
> 
> 标签：javascript, jquery, html, css

当您缩小浏览器窗口时，您会看到不同的布局....当您向下滚动时，搜索文本框会上升并且它不固定，因此它不可见...如何在滚动时使搜索文本框固定下来....我使用了另一个示例中的代码，但问题是当我使用我的新代码实现时它不起作用....我正在尝试使用数据表搜索框....不知道是什么我的代码错了....

[http://jsfiddle.net/bz2C4/11/](http://jsfiddle.net/bz2C4/11/)

```
$(function() {
        var search = $('.dataTables_filter').detach();
        $('.page-title').before(search);
        search.css('margin-left','0');

        var div = $('.dataTables_filter');
                var start = $(div).offset().top;

                $.event.add(window, "scroll", function() {
                    var p = $(window).scrollTop();
                    $(div).css('position', ((p) > start) ? 'fixed' : 'static');
                    $(div).css('top', ((p) > start) ? '0px' : '');
                });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:13:14.803

基本问题与css相关。`DIV`当 position 未设置为`absolute`或时，像这样的块元素将自动填充所有可用宽度`fixed`。一旦你使用了这些位置之一，如果它对你的布局很重要，你需要定义宽度。

我建议您切换一个具有所有固定位置和宽度规则的类，而不是`position`使用方法设置内联`css()`。尝试使用`width:100%`

# pug - 翡翠到带有新行的html

> ID：15776547
> 
> 赞同：0
> 
> 时间：2013-04-02T23:54:10.207
> 
> 标签：pug

在翡翠中，我使用：

```
each item in items
  li
    a(href='http://www.#{item.href}/') #{item.name} 
```

html 输出没问题，但只有一大行。如何在每个列表元素之间换行？像

```
<li><a ...</a></li>
<li><a ...</a></li>
<li><a ...</a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:19:03.623

您需要启用翡翠的漂亮模式。传入`{pretty: true}`选项

# java - 用鼠标拖动创建矩形，而不是绘制

> ID：15776549
> 
> 赞同：4
> 
> 时间：2013-04-02T23:54:20.067
> 
> 标签：java, awt, screenshot

我想使用整个屏幕创建一个矩形。通过使用整个屏幕，我的意思是这样的：

![用户看到的桌面](https://i.stack.imgur.com/MG1Qo.png)

首先，在 Java 中是否可以使用这样的整个屏幕？其次，我将如何去做？另一件事，我不想绘制一个实际的矩形，我想创建一个新的`java.awt.Rectangle`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T00:42:20.007

*nb- 首先要注意，这是使用 Java 7 完成的，在 Java 6 中创建透明窗口的方式不同，并且在更新 10 之后是不可能的（我相信）*

基本上，这会创建一个透明窗口，其大小和位置可以覆盖整个虚拟屏幕（也就是说，如果您有多个屏幕，它将覆盖所有屏幕）。

然后我使用 a`JPanel`作为主要容器来捕获鼠标事件并执行绘画效果。

面板是透明的。这允许面板（和框架）下方的任何内容保持可见。然后我用透明的颜色过度绘制它（我这样做只是为了突出事实）。

当您单击并拖动一个区域时，它就会暴露出来。

![在此处输入图像描述](https://i.stack.imgur.com/04Kn3.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Area;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class MySnipTool {

    public static void main(String[] args) {
        new MySnipTool();
    }

    public MySnipTool() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setUndecorated(true);
                frame.setBackground(new Color(0, 0, 0, 0));
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new CapturePane());
                Rectangle bounds = getVirtualBounds();
                frame.setLocation(bounds.getLocation());
                frame.setSize(bounds.getSize());
                frame.setAlwaysOnTop(true);
                frame.setVisible(true);
            }
        });
    }

    public class CapturePane extends JPanel {

        private Rectangle selectionBounds;
        private Point clickPoint;

        public CapturePane() {
            setOpaque(false);

            MouseAdapter mouseHandler = new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    if (SwingUtilities.isLeftMouseButton(e) && e.getClickCount() == 2) {
                        System.exit(0);
                    }
                }

                @Override
                public void mousePressed(MouseEvent e) {
                    clickPoint = e.getPoint();
                    selectionBounds = null;
                }

                @Override
                public void mouseReleased(MouseEvent e) {
                    clickPoint = null;
                }

                @Override
                public void mouseDragged(MouseEvent e) {
                    Point dragPoint = e.getPoint();
                    int x = Math.min(clickPoint.x, dragPoint.x);
                    int y = Math.min(clickPoint.y, dragPoint.y);
                    int width = Math.max(clickPoint.x - dragPoint.x, dragPoint.x - clickPoint.x);
                    int height = Math.max(clickPoint.y - dragPoint.y, dragPoint.y - clickPoint.y);
                    selectionBounds = new Rectangle(x, y, width, height);
                    repaint();
                }
            };

            addMouseListener(mouseHandler);
            addMouseMotionListener(mouseHandler);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setColor(new Color(255, 255, 255, 128));

            Area fill = new Area(new Rectangle(new Point(0, 0), getSize()));
            if (selectionBounds != null) {
                fill.subtract(new Area(selectionBounds));
            }
            g2d.fill(fill);
            if (selectionBounds != null) {
                g2d.setColor(Color.BLACK);
                g2d.draw(selectionBounds);
            }
            g2d.dispose();
        }
    }

    public static Rectangle getVirtualBounds() {
        Rectangle bounds = new Rectangle(0, 0, 0, 0);

        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice lstGDs[] = ge.getScreenDevices();
        for (GraphicsDevice gd : lstGDs) {
            bounds.add(gd.getDefaultConfiguration().getBounds());
        }
        return bounds;
    }
} 
```

同样，您可以创建一个用户可以调整大小的透明框架。您将负责自己实现所有调整大小的代码，但该解决方案仍然是可行的。

**更新**

您可能还需要检查操作系统/硬件是否可以支持透明度...

```
GraphicsConfiguration config = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();
if (!AWTUtilities.isTranslucencyCapable(config)) {
    System.out.println("Transluceny is not supported");
}

if (!AWTUtilities.isTranslucencySupported(AWTUtilities.Translucency.PERPIXEL_TRANSPARENT)) {
    System.out.println("PerPeixel Transparency is not supported");
} 
```

**用替代方法更新**

这是解决问题的另一种方法。基本上，它会拍摄屏幕快照并将其渲染到窗口。然后，这使我们可以根据需要控制突出显示/选择。

这样做的缺点是它是静态结果，您不会获得任何当前正在运行的动画效果。

![在此处输入图像描述](https://i.stack.imgur.com/EAWZQ.png)

```
import java.awt.AWTException;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.HeadlessException;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class SnipWithScreenShoot {

    public static void main(String[] args) {
        new SnipWithScreenShoot();
    }

    public SnipWithScreenShoot() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                try {
                    JFrame frame = new JFrame("Test");
                    frame.setUndecorated(true);
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setLayout(new BorderLayout());
                    frame.add(new TestPane());
                    frame.pack();
                    frame.setLocationRelativeTo(null);
                    frame.setVisible(true);
                } catch (AWTException exp) {
                    exp.printStackTrace();
                    System.out.println("That sucks");
                }
            }

        });
    }

    public class TestPane extends JPanel {

        private BufferedImage image;
        private Rectangle selection;

        public TestPane() throws AWTException {
            Robot bot = new Robot();
            image = bot.createScreenCapture(getVirtualBounds());

            MouseAdapter handler = new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent e) {
                    selection = new Rectangle(e.getPoint());
                    repaint();
                }

                @Override
                public void mouseDragged(MouseEvent e) {
                    Point p = e.getPoint();
                    int width = Math.max(selection.x - e.getX(), e.getX() - selection.x);
                    int height = Math.max(selection.y - e.getY(), e.getY() - selection.y);
                    selection.setSize(width, height);
                    repaint();
                }
            };

            addMouseListener(handler);
            addMouseMotionListener(handler);
        }

        @Override
        public Dimension getPreferredSize() {
            return image == null ? super.getPreferredSize() : new Dimension(image.getWidth(), image.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (image != null) {
                Graphics2D g2d = (Graphics2D) g.create();
                g2d.drawImage(image, WIDTH, 0, this);
                if (selection != null) {
                    g2d.setColor(new Color(225, 225, 255, 128));
                    g2d.fill(selection);
                    g2d.setColor(Color.GRAY);
                    g2d.draw(selection);
                }
                g2d.dispose();
            }
        }

    }

    public static Rectangle getVirtualBounds() {

        Rectangle bounds = new Rectangle(0, 0, 0, 0);

        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice lstGDs[] = ge.getScreenDevices();
        for (GraphicsDevice gd : lstGDs) {

            bounds.add(gd.getDefaultConfiguration().getBounds());

        }

        return bounds;

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:00:45.403

您可以考虑创建一个透明的全屏 JFrame。不过，这不是一种理想的技术。

你可以看看[这个](http://docs.oracle.com/javase/tutorial/extra/fullscreen/index.html)，让你开始一个真正的解决方案。

# python - 使用 Python 在文件中查找字符串并在同一行提取整数值

> ID：15776550
> 
> 赞同：3
> 
> 时间：2013-04-02T23:54:22.737
> 
> 标签：python, python-2.6

我是 python 新手，遇到以下问题。

我有一个文本文件 (filename.dat)，它提供了有关我的模型的信息。相关部分摘要如下：

```
 NUMBER OF ELEMENTS IS                               1367466
      NUMBER OF NODES IS                                   252624
      NUMBER OF NODES DEFINED BY THE USER                  248291
      NUMBER OF INTERNAL NODES GENERATED BY THE PROGRAM      4333
      TOTAL NUMBER OF VARIABLES IN THE MODEL               783873 
```

我可以使用以下 python 命令搜索该行：

```
with open('filename.dat', 'r') as inF:
    for line in inF:
        if 'NUMBER OF ELEMENTS IS' in line:
            print "true" 
```

但是，我不确定如何在与“元素数量是”相同的行上提取整数值 (1367466)。现在有谁如何从与字符串字符混合的行中提取字符串数字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T23:58:39.097

从右边用空格分割行，一次：

```
In [18]: line.rsplit(None, 1)
Out[18]: ['TOTAL NUMBER OF VARIABLES IN THE MODEL', '783873'] 
```

看第二部分：

```
In [19]: line.rsplit(None, 1)[1]
Out[19]: '783873' 
```

将其转换为 int：

```
In [20]: int(line.rsplit(None, 1)[1])
Out[20]: 783873 
```

您可以使用元组解包来使代码更清晰（如果您的整个文件都是这种格式）：

```
with open('filename.dat', 'r') as inF:
    for line in inF:
        label, number = line.rsplit(None, 1)
        if 'NUMBER OF ELEMENTS IS' in label:
            print "true"
            number = int(number)
            ... 
```

如果某些行的格式不同，则必须先搜索并稍后拆分：

```
with open('filename.dat', 'r') as inF:
    for line in inF:
        if 'NUMBER OF ELEMENTS IS' in line:
            print "true"
            label, number = line.rsplit(None, 1)   # label is unused then
            number = int(number)
            ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:58:09.743

一种方法是使用[`str.split()`](http://docs.python.org/2/library/stdtypes.html#str.split)并获取最后一个元素：

```
In [21]: line = 'NUMBER OF ELEMENTS IS                               1367466'
In [22]: line.split()[-1]
Out[22]: '1367466' 
```

将其转换为 int 并且您有一个数字。但是，如果您的号码不是最后一行，这将不起作用。买者自负。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:58:15.647

一种方法是使用拆分：

```
with open('filename.dat', 'r') as inF:
    for line in inF:
        if 'NUMBER OF ELEMENTS IS' in line:
            print [int(d) for d in line.split() if d.isdigit()] 
```

[str.isdigit](http://docs.python.org/2/library/stdtypes.html) () 如果字符串中的所有字符都是数字并且至少有一个字符，则返回true，否则返回false。`line.split`将行拆分为单词，因此对于您的示例，您将得到`['NUMBER', 'OF', 'ELEMENTS', 'IS', '1367466']`. 然后，`isdigit()`用作过滤器以选择由所有数字组成的部分。如果您不确定数字在哪里，这可能会很方便。否则你可以抓住感兴趣的词。

另一种方法是使用正则表达式，但这对于您的简单示例来说太过分了：

```
import re
with open('input', 'r') as inF:
    for line in inF:
            m = re.match('NUMBER OF ELEMENTS IS\s*(\d+)', line)
            if m:  
                    print m.group(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T00:06:22.830

您可以使用正则表达式。

```
text = open('filename.dat', 'r').read()

matches = re.search("NUMBER OF ELEMENTS IS\s+(\d+)", text)
if matches is not None:
    num_of_elem = matches[0].group(1) 
```

正则表达式中的括号表示匹配表达式的子匹配，允许您稍后使用`group`函数访问匹配的这一部分（如最后一行中的示例）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-01T22:05:25.970

我也会选择正则表达式

```
import re

with open('filename', 'r') as inF:
    for line in inF:  
        match = re.match(r"([a-z]+)([0-9]+)", line)
          if match:
            items = match.groups() 
```

这会给你一个包含字符串和数字的列表

# excel - 具有帐号的两个工作表的 SUMIF

> ID：15776552
> 
> 赞同：0
> 
> 时间：2013-04-02T23:54:31.400
> 
> 标签：excel, match

我有两张带有帐号和收入编号的工作表。我正在尝试查找 sumif 函数，如果 A 列中的帐号与 B 列中的帐户匹配，那么它将相应的值相加。

**这是数据集：**

![http://imgur.com/e0fQPd2](https://i.stack.imgur.com/2m4nV.png)

**这是我想要的答案栏：**

![http://imgur.com/qxGWz6V](https://i.stack.imgur.com/N1ICI.png)

我尝试了 SUMIF 和 MATCH 函数的变体，但我不知道如何将多个列设置为范围。我也不确定我是否正在使用校正功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:52:44.560

我假设您有两张纸，`Sheet1`其中`Sheet2`两个**帐号**都在 A 列中，而**收入**在 B 列中。

尝试将此添加到单元格**C2**并将公式向下拖动以进行其余操作：

```
=SUMIF(Sheet2!$A:$A, $A2, Sheet2!$B:$B) + $B2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:26:04.747

您可以在任何工作表上使用**vlookup**。如果帐号匹配，这将从其他工作表获得收入，然后使用 if 条件您可以添加两个收入列。请参考下图。

![在此处输入图像描述](https://i.stack.imgur.com/0Kmgs.png)

**输出**

![在此处输入图像描述](https://i.stack.imgur.com/eE7RB.png)

# html - HTML5中的&和&有什么区别？

> ID：15776556
> 
> 赞同：2
> 
> 时间：2013-04-02T23:54:57.590
> 
> 标签：html, share, href, mailto, subject

`&`和有什么区别`&amp;`？

就像下面的代码一样，两者的工作方式相同吗？

```
<a href="mailto:EMAIL?subject=BLABLABLA&body=http://URL, SHORT DESCRIPTION"></a>
<a href="mailto:EMAIL?subject=BLABLABLA&amp;body=http://URL, SHORT DESCRIPTION"></a> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T00:00:05.530

在 HTML5 中，它们在该示例中是等价的。传统上，只有在 HTML 中`&amp;`是正确的——但与许多事情一样，Web 开发人员愉快地忽略了这个不方便的规则，并且到处都写了简单的 & 符号。就浏览器而言，它们只是“做了正确的事情”并将这些 & 符号解释为 & 符号。HTML5 标准化了这种行为，因此 now`&`本身就是允许的，只要之后的内容看起来不像实体引用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T23:59:42.747

`&amp;`是 的 html 特殊字符`&`，作为 html 特殊字符的 sigial 具有特殊含义。工作的事实`href="&"`是大多数浏览器都提供了便利，这些浏览器足够好，可以正确处理无效的 HTML，但在技术上是不正确的。`&amp;`因为实体会被转换成`&`HTML 代码，所以要使用。

考虑是否使用`"`而不是`&`. 那会结束`href`值并使 HTML 不正确，对吗？你想用`&quot;`.

请参阅：[http](http://www.w3.org/html/wg/drafts/html/master/single-page.html#syntax-errors) ://www.w3.org/html/wg/drafts/html/master/single-page.html#syntax-errors “涉及脆弱语法结构的错误” - 事实上它指出使用`&`是可以的它后面没有命名字符引用，但其中有很多；理想情况下，您会或多或少地自动转义属性输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:57:40.577

`&amp;`是 html 实体（编码形式）`&`，用于在语言中描述 & 符号，其中 & 符号实际上表示某种东西，例如 XML。

HTML 渲染工具，如浏览器，会`&amp;`在源代码中看到但会渲染`&`

# ruby-on-rails - Heroku + Mechanize 将 OBJ 变成 String

> ID：15776557
> 
> 赞同：1
> 
> 时间：2013-04-02T23:54:57.840
> 
> 标签：ruby-on-rails, heroku, mechanize

所以我有一个使用 Mechanize 来获取页面的应用程序。请注意，我试图解析的 HTTP 站点是一个 *.TXT 文件。

在 IRB 中，我运行一个简单的程序，例如：

```
require 'rubygems'
require 'mechanize'
require 'nokogiri'

@agent = Mechanize.new{|agent| agent.user_agent = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:9.0a2) Gecko/20111101 Firefox/9.0a2'}

@agent.get(http://some_sort_of_text_file.txt)

for line in @agent.page.content
puts line
end 
```

这运行良好，我将文本文件中的每一行作为输出。

但是当我将它推送到 Heroku 时.. 我收到这样的错误：

```
NoMethodError (undefined method `each' for #<String:0x00000003ebf200>): 
```

嗯......我发现由于某种奇怪的原因，页面变成了一个巨大的字符串文件，我需要采取另一个步骤来进行一些编程，例如：

```
 @doc = @agent.page.content
      @items =[]
      start =0
      @doc.gsub(/|/, " ")
      @doc.gsub(/\\n/,"|")
      counter=0
      while counter <= @doc.length
         if(@doc[counter]== "|")
           @items << @doc[start..counter]
           start=counter+1
         end
         counter = counter+1
      end 
```

知道为什么它将站点作为 Heroku 上的字符串接收，以及为什么我需要采取额外的步骤来将每一行分解为一个数组吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T05:18:39.400

当我在 irb 的本地计算机上运行您的代码时，`@agent.page.content`是一个字符串。

如果您想要获取结果并将其转换为数组，这将起作用：

```
# (put this after @agent.get(http://some_sort_of_text_file.txt)
lines = @agent.page.content.split("\n")

# Now you can do something like this if you want
lines.each do |line|
  puts line
end 
```

# asp.net - ObjectDataSource 设置 MaximumRowsParameterName= -1

> ID：15776558
> 
> 赞同：0
> 
> 时间：2013-04-02T23:54:58.070
> 
> 标签：asp.net, vb.net, gridview, objectdatasource

我有一个 GridView 和一个 ObjectDataSource

```
<asp:ObjectDataSource ID="ObjectDataSource1" runat="server" TypeName="myType" SelectMethod="FindByName"
    MaximumRowsParameterName="NumRows" StartRowIndexParameterName="RowStart" EnablePaging="true">
    <SelectParameters>
        <asp:Parameter Name="namex" Type="String" Direction="Input" DefaultValue="" />
        <asp:Parameter Name="RowStart" Type="Int32" Direction="Input" DefaultValue="0" />
        <asp:Parameter Name="NumRows" Type="Int32" Direction="Input" DefaultValue="15"/>
   </SelectParameters> 
```

Everyting 似乎工作正常。但是当我在 GridView 上更改页面并且 ObjectDataSource 调用它发送参数 NumRows=-1(StartRowIndexParameterName="NumRows") 的方法时。如果我调用 ObjectDataSource.Select() 它发送 NumRows=0

即使我为参数 NumRows 设置了一个值

```
Protected Sub ObjectDataSource_Selecting(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.ObjectDataSourceSelectingEventArgs) Handles ObjectDataSource.Selecting
        e.InputParameters("NumRows") = 15
End Sub 
```

ObjectDataSource 仍然发送 -1 或 0。对参数 RowStart 它发送正确的值（单击第 1 页发送 0，单击第 2 页发送 15...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T08:12:24.167

control的`SelectCountMethod`属性`ObjectDataSource`设置为返回查询中记录总数的方法的名称。

您必须按以下方式实现数据源：

```
<asp:ObjectDataSource ID="ObjectDataSource1" runat="server"
    TypeName="myType"
    SelectMethod="FindByName"
    SelectCountMethod="GetMyTypeCount"

    MaximumRowsParameterName="NumRows"
    StartRowIndexParameterName="RowStart"

    EnablePaging="true">

    <%--TODO : ...--%>

</asp:ObjectDataSource> 
```

或者您可以按照[此 URL](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.maximumrowsparametername.aspx)的示例进行操作。

# javascript - 更改每个页面访问 jquery cookie 的背景图像

> ID：15776560
> 
> 赞同：0
> 
> 时间：2013-04-02T23:55:01.073
> 
> 标签：javascript, jquery, cookies

我想在每次用户访问该网站时更改背景图片。我假设这可以通过 jquery cookie 插件来实现，但我只找到了在设定的几个小时后可以更改图像的实例，而不是每次用户访问页面时。

关于如何实现这一点的任何想法或你们都可能知道的教程，我很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:59:14.827

如果您长期交谈，最好的方法是服务器端。将他们的 IP 地址记录到数据库中，然后在每次有人访问该页面时检查它。如果他们在那里，则加载新图像，否则加载第一个图像并丢失人员 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:01:18.137

假设您有一组可能的图像，您可以将当前图像索引存储在 cookie 中。当页面加载时，从 cookie 中获取当前图像索引并以图像数量为模递增它。如果它为空，请将其设置为零。然后在这个新索引处显示图像并将其值存储在 cookie 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T00:02:58.000

> 我只发现了几个小时后可以更改图像的实例

假设您有五个不同的背景图像：1 => 狗，2 => 猫等。当用户访问该页面时，您为他分配一个值为 1 的 cookie，表示：该用户见过狗。当他再次访问时：检查 cookie。获取数字、递增、显示猫并使用新数字 (2) 重置 cookie。

# asp.net - 如何包含异常处理？

> ID：15776562
> 
> 赞同：1
> 
> 时间：2013-04-02T23:55:04.240
> 
> 标签：asp.net, vb.net, web-applications, visual-studio-2012

我正在创建一个 Web 表单，它接受用户对某些事情的输入并在点击确定后显示它......但我没有任何方法来检查输入是否有效。VB 对我来说是新的，我想“如果”语句会起作用……但它们看起来不像。

```
Public Class HelloForm
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    End Sub

    Protected Sub cmdOk_Click(sender As Object, e As EventArgs) Handles cmdOk.Click
        msgLabel.Text = nameTextBox.Text + ", " + lastTextBox.Text + "; " + addrTextBox.Text + ", " +
                        cityTextBox.Text + ", " + stateTextBox.Text + ", " + zipTextBox.Text + "; " +
                        phoneTextBox.Text

    End Sub
End Class 
```

当我运行它时，一切正常。但是如果我包含无效的电话号码或邮政编码（某些东西），请说。我如何以及在哪里包含异常处理来做到这一点？

如果我在电话号码输入中输入“asdhasd”，我希望它说“无效的电话号码”。

（我想我可能应该包括一个清除所有输出/输入的按钮。;x）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:58:15.557

我认为您需要将一些RequiredFieldValidator 和Regular ExpressionValidator 拖到您的页面上，它们最适合用于验证输入...

将它们拖到您的 texboxes 旁边..

您的电话号码文本框的示例是：

```
 <asp:RegularExpressionValidator ID="RegularExpressionValidator2"
    ControlToValidate="phoneTextBox" ErrorMessage="Numbers only" 
    runat="server"  ValidationExpression="^[0-9]+$" Display="Dynamic">
   </asp:RegularExpressionValidator> 
```

要将您的手机文本框设为必填字段：

```
 <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server"
      ErrorMessage="*Please enter phone number"
      ControlToValidate="phoneTextBox" Display="Dynamic">
    </asp:RequiredFieldValidator> 
```

让你的名字文本框只有字符：

```
 <asp:RegularExpressionValidator ID="RegularExpressionValidator1" ControlToValidate="nameTextBox"
        ErrorMessage="Letters only" runat="server" ValidationExpression="^[a-zA-Z]+$" Display="Dynamic"></asp:RegularExpressionValidator> 
```

您可以将以上内容复制并粘贴到您的页面上。

# php - 这个带有 2 个联合的 sql 可以最小化为没有联合吗？

> ID：15776563
> 
> 赞同：0
> 
> 时间：2013-04-02T23:55:08.210
> 
> 标签：php, mysql, performance, union

我有一个查询，我使用 2 UNIONS 来获得我需要的结果

可以使用 CASE 语句来完成，但我无法弄清楚。如果有人能解决这个问题，我将不胜感激

这是我当前的查询，请记住 viewable_by 只能是 1、2 或 3 但是，client_id、team_id 和 created_by 将是一个变量，具体取决于用户，它们会改变

```
SELECT view_name, view_id, viewable_by  FROM `phone_call_views`
WHERE status = 1 AND ( viewable_by = 1  AND client_id = 1)
UNION
SELECT view_name, view_id, viewable_by  FROM `phone_call_views`
WHERE status = 1 AND ( viewable_by = 2  AND team_id =5 AND client_id = 1)
UNION
SELECT view_name, view_id, viewable_by  FROM `phone_call_views`
WHERE status = 1 AND ( viewable_by = 3  AND created_by= 6) 
```

这是我在 php 中使用变量的实际查询

```
$db->getDataSet(' SELECT view_name, view_id, viewable_by  FROM `phone_call_views`
                                     WHERE status = 1 AND ( viewable_by = 1  AND client_id = '.CLIENT_ID.')
                                     UNION
                                     SELECT view_name, view_id, viewable_by  FROM `phone_call_views`
                                     WHERE status = 1 AND ( viewable_by = 2  AND team_id ='.TEAM_ID.' AND client_id = '.CLIENT_ID.')
                                     UNION
                                     SELECT view_name, view_id, viewable_by  FROM `phone_call_views`
                                     WHERE status = 1 AND ( viewable_by = 3  AND created_by= '.USER_ID.') '
                                    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:58:35.957

```
SELECT view_name, view_id, viewable_by  FROM `phone_call_views`
WHERE status = 1 AND ( (viewable_by = 1  AND client_id = 1) OR 
( viewable_by = 2  AND team_id =5 AND client_id = 1) OR ( viewable_by = 3  AND created_by= 6)) 
```

是最简单的方法吗

此外，对于 mysql，请记住 UNION 将删除重复项，而这不会。

如果您可以将逻辑约束限制为每个查询的同一组列，则可以将所有 OR 和 UNION 替换为 WHERE ROW（所有列）IN（所有值）。但鉴于您对每个查询的要求非常不同，我认为 OR 是您最好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:59:46.637

你可以像这样组合它们：

```
SELECT view_name, view_id, viewable_by  FROM `phone_call_views`
WHERE status = 1 AND (
   (viewable_by = 1  AND client_id = 1) or 
   (viewable_by = 2  AND team_id =5 AND client_id = 1) or 
   (viewable_by = 3  AND created_by= 6)
) 
```

您还可以使用**`SELECT .... WHERE IN`**语句来组合 OR 语句。

像

```
SELECT * FROM ... WHERE viewable_by IN (1,2,3) 
```

将翻译为

```
SELECT * FROM ... WHERE viewable_by='1' or viewable_by='2' or viewable_by='3' 
```

但是`IN`我相信在逻辑上等同于`OR`'s 的子句在查询执行方面完全不同

# file - 通过 ftp 上传文件

> ID：15776565
> 
> 赞同：1
> 
> 时间：2013-04-02T23:55:22.743
> 
> 标签：file, upload, vb6, ftp

如何使用 Visual Basic 6.0 将文本文件上传到我的 ftp 服务器？

我想将“C:\hello.txt”上传到我的服务器上的“files/hello.txt”。

我以前尝试过这段代码，但没有成功：

```
Function UploadFile(ByVal HostName As String, _
ByVal UserName As String, _
ByVal Password As String, _
ByVal LocalFileName As String, _
ByVal RemoteFileName As String) As Boolean

Dim FTP As Inet

Set FTP = New Inet
    With FTP
        .Protocol = icFTP
        .RemoteHost = HostName
        .UserName = UserName
        .Password = Password
        .Execute .URL, "Put " + LocalFileName + " " + RemoteFileName
        Do While .StillExecuting
            DoEvents
        Loop
        UploadFile = (.ResponseCode = 0)
    End With
    Set FTP = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:29:29.373

将 Internet Transfer Control 拖放到窗体上（[VB6：如何添加 Inet 组件？](https://stackoverflow.com/questions/2227462/vb6-how-to-add-inet-component)）。然后使用它的`Execute`方法。请注意，无需将`Protocol`属性指定为`Execute`从`URL`参数中得出的数字。

有关使用 Internet 传输控制的 MSDN 演练：http: [//msdn.microsoft.com/en-us/library/aa733648%28v=vs.60%29.aspx](http://msdn.microsoft.com/en-us/library/aa733648%28v=vs.60%29.aspx)

```
Option Explicit

Private Declare Sub Sleep Lib "kernel32.dll" _
    (ByVal dwMilliseconds As Long)

Private Function UploadFile(ByVal sURL As String _
    , ByVal sUserName As String _
    , ByVal sPassword As String _
    , ByVal sLocalFileName As String _
    , ByVal sRemoteFileName As String) As Boolean
    'Pessimist
    UploadFile = False

    With Inet1
        .UserName = sUserName
        .Password = sPassword
        .Execute sURL, "PUT " & sLocalFileName & " " & sRemoteFileName

        'Mayhaps, a better idea would be to implement
        'StateChanged event handler
        Do While .StillExecuting
            Sleep 100
            DoEvents
        Loop

        UploadFile = (.ResponseCode = 0)
        Debug.Print .ResponseCode
    End With
End Function

Private Sub cmdUpload_Click()
    UploadFile "ftp://localhost", "", "", "C:\Test.txt", "/Level1/Uploaded.txt"
End Sub 
```

# python - 将配置从 mod_wsgi 移动到脚本以进行调试

> ID：15776573
> 
> 赞同：0
> 
> 时间：2013-04-02T23:56:35.170
> 
> 标签：python, apache, flask, mod-wsgi

我继承了在 apache 服务器上使用 mod_wsgi 运行的 Flask 应用程序。它没有调试设置，所以我编写了一个快速调试脚本来使用该`werkzeug.run_simple()`方法运行应用程序。我在将两个 mod_wsgi 选项移植到脚本时遇到问题。

`WSGIPythonPath`似乎是更简单的一个。我不太确定它是如何工作的，但这是否基本上将指定的路径附加到 PYTHONPATH 环境变量？

`WSGIScriptAlias`是更成问题的一个。在 apache 配置中，它非常标准：

```
WSGIScriptAlias /myapp /path/to/myapp.wsgi 
```

这`app.route('/login')`在`/myapp/login`URL 中出现。如何以`/myapp`与 wsgi 脚本中相同的方式为所有 URL 添加前缀`WSGIScriptAlias`？

如果您需要更多信息，请告诉我，并提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T02:11:06.157

[`WSGIPythonPath`](https://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIPythonPath)确实将模块附加到系统路径。根据其文档，它相当于[`site.addsitedir`](http://docs.python.org/2/library/site.html#site.addsitedir)为每个条目运行（除非您正在运行 mod_wsgi 1.x，在这种情况下它相当于`sys.path.append`）：

```
import site

for p in list_of_paths:
    site.addsitedir(p) 
```

这会添加每个条目`sys.path` *，*它还会扫描目录中的`.pth`文件并将条目添加到它找到的任何此类文件中`sys.path`（这意味着鸡蛋将按预期工作）。

因为`WSGIScriptAlias`您可以简单地在 Flask 应用程序中设置[配置变量`APPLICATION_ROOT`](http://flask.pocoo.org/docs/config/#builtin-configuration-values)`config`：

```
app.config["APPLICATION_ROOT"] = "/myapp" 
```

# c - 为函数的局部变量分配字节和是否只调用一次 POP 指令

> ID：15776575
> 
> 赞同：-3
> 
> 时间：2013-04-02T23:56:40.000
> 
> 标签：c, unix, assembly, x86

我试图在递归函数调用期间理解汇编代码。

```
#include<stdio.h>
int recursive(int no){
  if(no > 1){
    no--;
    recursive(no);
    printf("\n %d \n",no);
  }
  else if(no == 1){
    return 1;
  }
}

int main(){
  int a = 10;
  recursive(a);
  return 0;
} 
```

拆卸：

```
 .file   "sample2.c"
        .section        .rodata
.LC0:
        .string "\n %d \n"
        .text
.globl recursive
        .type   recursive, @function
recursive:
        pushl   %ebp
        movl    %esp, %ebp
        subl    $24, %esp
        cmpl    $1, 8(%ebp)
        jle     .L2
        subl    $1, 8(%ebp)
        movl    8(%ebp), %eax
        movl    %eax, (%esp)
        call    recursive
        movl    $.LC0, %eax
        movl    8(%ebp), %edx
        movl    %edx, 4(%esp)
        movl    %eax, (%esp)
        call    printf
        jmp     .L5
.L2:
        cmpl    $1, 8(%ebp)
        jne     .L5
        movl    $1, %eax
        movl    %eax, %edx
        movl    %edx, %eax
        jmp     .L4
.L5:
.L4:
        leave
        ret
        .size   recursive, .-recursive
.globl main
        .type   main, @function
main:
        pushl   %ebp
        movl    %esp, %ebp
        andl    $-16, %esp
        subl    $32, %esp
        movl    $10, 28(%esp)
        movl    28(%esp), %eax
        movl    %eax, (%esp)
        call    recursive
        movl    $0, %eax
        leave
        ret
        .size   main, .-main
        .ident  "GCC: (Ubuntu/Linaro 4.4.4-14ubuntu5) 4.4.5"
        .section        .note.GNU-stack,"",@progbits 
```

我可以理解 .LC0 始终包含字符串文字。但我不知道它的真正含义。想了解在函数调用过程中进行递归的代码。我无法理解这段汇编代码的作用，

```
 subl    $24, %esp
        cmpl    $1, 8(%ebp)
        jle     .L2
        subl    $1, 8(%ebp)
        movl    8(%ebp), %eax
        movl    %eax, (%esp)
        call    recursive
        movl    $.LC0, %eax
        movl    8(%ebp), %edx
        movl    %edx, 4(%esp)
        movl    %eax, (%esp)
        call    printf
        jmp     .L5
.L2:
        cmpl    $1, 8(%ebp)
        jne     .L5
        movl    $1, %eax
        movl    %eax, %edx
        movl    %edx, %eax
        jmp     .L4 
```

Q1：递归函数包含 1 个参数。所以在填充对齐之后，它必须是8。为什么它是24。

同样在 .L2 中，

```
 movl    $1, %eax
        movl    %eax, %edx
        movl    %edx, %eax
        jmp     .L4 
```

Q2：我们已经将“1”移动到累加器，为什么我们再次移动到数据寄存器然后又回到累加器。

Q3：我们是否从堆栈中弹出。如果 leave 用于弹出堆栈，我们不是弹出其余 8 个堆栈帧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:00:45.737

要回答您帖子中唯一与您的标题相匹配的内容：

> 为什么我们不从堆栈中弹出而只在程序集中推送指令。

因为`leave`相当于：

```
movl %ebp, %esp
popl %ebp 
```

# xml - 用于检索 xml 的子标签的正则表达式，无论其位置如何

> ID：15776576
> 
> 赞同：0
> 
> 时间：2013-04-02T23:57:05.903
> 
> 标签：xml, regex

使用分组表达式检索标签的子标签（ASObject）内容之一的正则表达式是什么，而与以下xml中子标签的位置无关。它可能是第一个或第二个。但我想检索具有“postinjr”工资源代码的 ASObject，无论其位置如何。您可以在这里为我提供解决方案... [http://gskinner.com/RegExr/?2usad](http://gskinner.com/RegExr/?2usad)

```
<insuredwages>
    <ASObject mappedClass="com.taliantsoftware.claims.wages.InsuredWagesDTO" encoding="0">
        <wagescategorytypecode tagClass="String">postinjr</wagescategorytypecode>
        <agreementid tagClass="double">2654630.0</agreementid>
        <jobtitle tagClass="String">Worker</jobtitle>
        <createddatetime tagClass="Date">2012-10-01 13:28:05.213 CDT</createddatetime>
        <new tagClass="boolean">false</new>
        <employmentstatustypename tagClass="String">Disabled</employmentstatustypename>
        <updated tagClass="boolean">false</updated>
        <voided tagClass="boolean">false</voided>
        <wagescategorytypename tagClass="String">Post Injury</wagescategorytypename>
        <employmentstatustypecode tagClass="String">dsabld</employmentstatustypecode>
        <useridcreated tagClass="double">111.0</useridcreated>
        <userupdated tagClass="String"/>
        <recordid tagClass="double">1030237.0</recordid>
        <usercreated tagClass="String">TESTER QA</usercreated>
    </ASObject>
    <ASObject mappedClass="com.taliantsoftware.claims.wages.InsuredWagesDTO" encoding="0">
        <agreementid tagClass="double">2654630.0</agreementid>
        <wagescategorytypecode tagClass="String">preinjr</wagescategorytypecode>
        <createddatetime tagClass="Date">2012-10-01 13:28:00.291 CDT</createddatetime>
        <new tagClass="boolean">false</new>
        <updateddatetime tagClass="Date">2012-10-01 13:28:00.291 CDT</updateddatetime>
        <updated tagClass="boolean">false</updated>
        <voided tagClass="boolean">false</voided>
        <wagescategorytypename tagClass="String">Pre-Injury</wagescategorytypename>
        <useridcreated tagClass="double">111.0</useridcreated>
        <userupdated tagClass="String">TESTER QA</userupdated>
        <useridupdated tagClass="double">111.0</useridupdated>
        <recordid tagClass="double">1036667.0</recordid>
        <usercreated tagClass="String">TESTER QA</usercreated>
    </ASObject>
</insuredwages> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:14:53.830

你没有。正则表达式完全不适合这项任务。使用专为这项工作设计的 XPath。

有关原因的解释，请参阅[RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#) - StackOverflow 经典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:03:26.363

这将获取整个条目；

```
/<ASObject.*?>postinjr</wagescategorytypecode>.*?</ASObject>/gs 
```

.. 但强烈建议使用 XML 解析器来正确处理数据。

这是 RegExr 的链接：[http: //regexr.com?34cfg](http://regexr.com?34cfg)

这只会获取它的内部（没有`<ASObject> ... </ASObject>`）；

```
/<ASObject.*?>(.*?>postinjr</wagescategorytypecode>.*?)</ASObject>/gs 
```

.. 并获取组 1 ( `$1`); [http://regexr.com?34cfj](http://regexr.com?34cfj)

您应该对获取的内容执行另一个 RegEx 以分隔您拥有的子项目。制作情境正则表达式以根据该内部值准确获取数据并按组分隔项目将非常混乱。

这是获取内部项目的一个非常原始的开始，但它只会下降一级并且不会处理转义的斜杠和 ( `<`/ `>`, `/`);

```
/<.*?>(.*?)</.*?>/gs 
```

[http://regexr.com?34cfm](http://regexr.com?34cfm)

如果你真的想在一个 RegEx 中做所有事情，你应该研究断言；

*   `?=` 前瞻断言
*   `?!` 负前瞻
*   `?<=`后向断言
*   `?!=`负后视（或`?<!`）
*   `?>` 一次性子表达式
*   `?()`条件`[if then]`
*   `?()|`健康）状况`[if then else]`
*   `?#` 评论

我会离开，这一切是如何运作的，让你去研究；）

# javascript - TypeError：d3.layout.cloud 不是函数

> ID：15776577
> 
> 赞同：1
> 
> 时间：2013-04-02T23:57:14.437
> 
> 标签：javascript, d3.js

我正在从[这里](https://github.com/jasondavies/d3-cloud/blob/master/examples/simple.html)复制代码。除了我在服务器上运行 d3.layout.cloud.js 之外，我的代码基本上与示例代码相同。当我运行它时，我收到 d3.layout.cloud 不是函数的类型错误。这可能是什么原因？

```
 <!DOCTYPE html>
<meta charset="utf-8">
<script src="../lib/d3/d3.js"></script>
<script src="../d3.layout.cloud.js"></script>
<body>
<script>
  var fill = d3.scale.category20();

  d3.layout.cloud().size([300, 300])
      .words([
        "Hello", "world", "normally", "you", "want", "more", "words",
        "than", "this"].map(function(d) {
        return {text: d, size: 10 + Math.random() * 90};
      }))
      .rotate(function() { return ~~(Math.random() * 2) * 90; })
      .font("Impact")
      .fontSize(function(d) { return d.size; })
      .on("end", draw)
      .start();

  function draw(words) {
    d3.select("body").append("svg")
        .attr("width", 300)
        .attr("height", 300)
      .append("g")
        .attr("transform", "translate(150,150)")
      .selectAll("text")
        .data(words)
      .enter().append("text")
        .style("font-size", function(d) { return d.size + "px"; })
        .style("font-family", "Impact")
        .style("fill", function(d, i) { return fill(i); })
        .attr("text-anchor", "middle")
        .attr("transform", function(d) {
          return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
        })
        .text(function(d) { return d.text; });
  }
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T03:27:21.080

您确定已将 d3.cloud.layout.js 放在服务器上的正确文件夹中吗？

我编辑了您的代码以指向确实存在的文件：

```
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="https://gist.github.com/emeeks/3361332/raw/61cf57523fe8cf314333e5f60cc266351fec2017/d3.layout.cloud.js"></script> 
```

它似乎有效：

[http://jsfiddle.net/fHBsS/](http://jsfiddle.net/fHBsS/)

要查看这是否导致您的问题，请在 chrome (ctrl-shift-j) 中打开控制台并查看是否有任何“加载资源失败”错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-08T17:37:29.950

这发生在我身上是因为我在 D3 之前加载了云布局 JS。应先加载 D3 进行修复。

# mysql - 使用 MySQL 中的邻接模型抓取父节点的子节点

> ID：15776578
> 
> 赞同：1
> 
> 时间：2013-04-02T23:57:17.223
> 
> 标签：mysql, nodes, adjacency-list-model

我对我的 MySQL 表的当前模型有困难，即我似乎无法正确查询特定父节点的所有子节点。正如标题所述，我使用的是邻接模型。

问题是我在网上找到的大多数方法要么查询**所有**叶节点，要么选择的不仅仅是我试图抓取的内容。

我关注的第一个教程是在[MikeHillyer.com](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)上，他的解决方案是：

```
SELECT t1.name FROM
category AS t1 LEFT JOIN category as t2
ON t1.category_id = t2.parent
WHERE t2.category_id IS NULL; 
```

问题在于，它查询所有叶节点，而不仅仅是与父节点相关的叶节点。他还建议使用嵌套集模型，我*真的*不想使用它，因为插入新节点有点困难（我确实意识到它的重要性，我宁愿不必求助于它）。

我找到的下一个解决方案是幻灯片 53 上的共享[幻灯片](http://www.slideshare.net/billkarwin/sql-antipatterns-strike-back)（从 StackOverflow 上的另一个答案中找到）。这个解决方案应该查询一个节点的直接子节点，只是......这个解决方案似乎对我不起作用。

这是他们的解决方案：

```
SELECT * FROM Comments cl
LEFT JOIN Comments c2
  ON(c2.parent_id = cl.comment_id); 
```

现在，我的表格有点不同，所以我调整了一些代码。我的表格的简短摘录如下：

```
 Table: category
 id | parent | section  | title    | ...
----+--------+----------+----------+-----
 1  |  NULL  | home     | Home     | ...
 2  |  NULL  | software | Software | ...
 3  |   2    | software | Desktop  | ...
 4  |   2    | software | Mobile   | ...
 5  |  NULL  | about    | About    | ...
 6  |   5    | about    | Legal    | ...
... |  ...   |  ...     |  ...     | ... 
```

当我修改上述查询时，我做了以下事情：

```
SELECT * FROM category cat1
LEFT JOIN category cat2
  ON(category.parent = cl.id); 
```

这导致所有东西都被查询并绑定在一个表中，是未更改表的两倍（显然不是我想要的）

我很确定我只是对我的查询做错了，所以我只是希望这里有人能纠正我的错误并指出我正确的方向。

我知道使用嵌套集模型应该更容易，但我只是不喜欢该选项，因为难以添加新选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:34:13.267

看起来你很接近。您的左连接保证将返回表中的所有记录。

请参阅以下查询。

```
SELECT c1.*, c2.id FROM category c1 INNER JOIN category c2 ON (c1.parent = c2.id); 
```

# ruby - 没有要加载的文件 -- json (LoadError)

> ID：15776582
> 
> 赞同：1
> 
> 时间：2013-04-02T23:57:29.373
> 
> 标签：ruby, json, heroku

这个应用程序一切正常，现在当我尝试推送到 Heroku 时，我得到了这个：

```
Counting objects: 28, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (22/22), done.
Writing objects: 100% (22/22), 2.20 KiB, done.
Total 22 (delta 14), reused 0 (delta 0)
/app/slug-compiler/lib/slug.rb:12:in `require': no such file to load -- json (LoadError)
    from /app/slug-compiler/lib/slug.rb:12
    from /app/slug-compiler/bin/slugc:14:in `require'
    from /app/slug-compiler/bin/slugc:14
To git@heroku.com:cold-night-9597.git
! [remote rejected] master -> master (pre-receive hook declined)
 error: failed to push some refs to 'git@heroku.com:server-name-1234.git' 
```

非常奇怪-在任何地方都找不到有关此错误的任何信息-并且在本地运行良好...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T13:36:30.457

试试这个：

```
require 'rubygems'
require 'json' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-24T06:32:41.123

有关详细信息，请参阅**[此答案](https://stackoverflow.com/a/36819950/441652)**。

我在运行通过以下方式管理的项目时遇到了同样的错误[`bundle`](http://bundler.io/)：

```
bundle exec jekyll build 
```

中缺少以下行`Gemfile`：

```
gem "json" 
```

# android - ListView：应突出显示所选项目

> ID：15776583
> 
> 赞同：0
> 
> 时间：2013-04-02T23:57:30.737
> 
> 标签：android, android-widget

我有一个实现 ListView 的相当简单的程序。当我在列表中选择一个项目时，它会短暂变为橙色，然后恢复为黑色。但是，我希望在我选择该项目后它保持橙色（直到我清除该项目或选择其他项目）。我试图对此进行编码，但失败了。我认为它必须接近正确。谁能告诉我需要在下面的代码中修改什么才能使其工作？

文件：./res/layout/main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"              android:layout_width="match_parent"
    android:layout_height="match_parent"        android:gravity="center">
    <ListView
        android:id="@android:id/list"           android:layout_width="match_parent"
        android:layout_height="match_parent"    android:background="@drawable/list_selector"/>
</LinearLayout> 
```

文件：./res/drawable/list_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true"         android:drawable="@color/orange" />
    <item android:state_selected="false"        android:drawable="@android:color/black" />
</selector> 
```

文件：./res/values/colors.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <resources>    <color name="orange">#b0e0e6</color> </resources> 
```

文件：./src/com/commonsware/android/linearpct/LinearLayoutDemo.java

```
public class LinearLayoutDemo extends ListActivity implements OnItemClickListener {
    private static final String[] items={"1", "2", "4", "8", "16", "32", "64", "128", "256", "512", "1024", "2048", "4096", "8192"};
    ListView myLV;
    ArrayAdapter myAdapter;

    @Override public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        Log.d("LinearLayoutDemo:", "********: onCreate() begin");
        getListView().setOnItemClickListener(this);
        myAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, items);
        myLV = (ListView) findViewById(android.R.id.list);
        myLV.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        myLV.setAdapter(myAdapter);
    }

    @Override public void onItemClick(AdapterView<?> arg0, View view, int position, long lng) {
        view.setSelected(true);
        String selectedFromList =(String) (myLV.getItemAtPosition(position));
        Log.d("LinearLayoutDemo:", "********: OnItemClick: " + selectedFromList);
    }

    @Override public void onListItemClick(ListView parent, View view, int position, long id) {
        super.onListItemClick(parent, view, position, id);
        view.setSelected(true);
        String selectedFromList =(String) (myLV.getItemAtPosition(position));
        Log.d("LinearLayoutDemo:", "********: OnItemClick: " + selectedFromList);
    }
} 
```

注意：当我运行此代码时，来自 onListItemClick() 的日志消息永远不会显示在日志中。所以那里出了点问题。

另外，我不知道如何在 onItemClick() 中调用 super.onItemClick()。这可能是一个线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:04:42.617

在 list_selector.xml 中：

```
<item android:state_selected="true" android:drawable="@color/orange" /> 
```

当使用 D-PAD（触控板）聚焦对象时调用

```
<item android:state_activated="true" android:drawable="@color/orange" /> 
```

在上下文操作栏中选择对象时调用。（仅 API 11+）

在 API 11 中 - 实现多选的最佳方法是自定义适配器，以更改视图背景颜色。

```
 class CPGAdapter extends ArrayAdapter<Pack> {
public void UpdateItem() {
    notifyDataSetChanged();
}

@Override
public View getView(int position, View v, ViewGroup parent) {
    View mView = v;
    if (mView == null) {
        LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
        mView = vi.inflate(R.layout.cpga_xml, null);
    } // inflate
    TextView text = (TextView) mView.findViewById(R.id.tv_cpgatitle);
    // get views from ids
    if (mView != null) {
        if (getItem(position).Selected) {
            mView.setBackgroundResource(R.color.pressed);
        } else {
            mView.setBackgroundResource(R.color.default);
        }
        text.setText(getItem(position).Name);

    }
    return mView;
}

    } 
```

并在选择 View 时在您的代码中：

```
public void onItemClick(AdapterView<?> AV, View v, int POS, long Id) {
                ((Pack) AV.getItemAtPosition(POS)).Selected = true;
                v.setBackgroundResource(R.color.pressed);
                                    // or (CPGAdapter(AV.getAdapter)).UpdateItem()
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T05:19:04.583

更改`simple_list_item_1`为`simple_list_item_activated_1`。颜色非常难看，如果你想要漂亮的颜色，你必须扩展 ArrayAdapter。

```
public class LinearLayoutDemo extends ListActivity implements OnItemClickListener {
    private static final String[] items={"1", "2", "4", "8", "16", "32", "64", "128", "256", "512", "1024", "2048", "4096", "8192"};
    ListView myLV;
    ArrayAdapter myAdapter;

@Override public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    Log.d("LinearLayoutDemo:", "********: onCreate() begin");

    myAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_activated_1, items);
    myLV = (ListView) findViewById(android.R.id.list);
    myLV.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    myLV.setAdapter(myAdapter);
    myLV.setOnItemClickListener(this);
}

@Override public void onItemClick(AdapterView<?> arg0, View view, int position, long lng) {

    String selectedFromList =(String) (myLV.getItemAtPosition(position));
    Log.d("LinearLayoutDemo:", "********: OnItemClick: " + selectedFromList);
}

} 
```

您可以删除`list_selector.xml`并更改布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"              android:layout_width="match_parent"
android:layout_height="match_parent"        android:gravity="center">
<ListView
    android:id="@android:id/list"           android:layout_width="match_parent"
    android:layout_height="match_parent" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T00:23:56.717

查看[州列表](http://developer.android.com/guide/topics/resources/drawable-resource.html)，尤其是`android:state_activated="true"`

# ruby-on-rails - Rails_admin 中新/未保存记录的关联范围

> ID：15776585
> 
> 赞同：5
> 
> 时间：2013-04-02T23:57:51.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-admin

在 Rails_admin [wiki](https://github.com/sferik/rails_admin/wiki/Associations-scoping)中，他们描述了关联范围如何工作：

```
config.model Team do
  field :players do
    associated_collection_cache_all false  # REQUIRED if you want to SORT the list as below
    associated_collection_scope do
      # bindings[:object] & bindings[:controller] are available, but not in scope's block!
      team = bindings[:object]
      Proc.new { |scope|
        # scoping all Players currently, let's limit them to the team's league
        # Be sure to limit if there are a lot of Players and order them by position
        scope = scope.where(league_id: team.league_id) if team.present?
        scope = scope.limit(30).reorder('players.position DESC') # REorder, not ORDER
      }
    end
  end
end 
```

但是，他们也提到：

> 另请注意，范围考虑了记录的已保存版本，而不考虑您可能在编辑表单中所做的任何未保存的更改。如果您更改球队的联赛，您仍然会看到旧联赛的球员，直到您保存为止。

使这项工作也适用于未保存的新记录的最佳方法是什么？所以当我在表格中更改联赛时，球员会相应地更新，而不必保存记录。

# jquery - 使用 hcSticky 使内容滚动

> ID：15776586
> 
> 赞同：0
> 
> 时间：2013-04-02T23:58:08.737
> 
> 标签：jquery, html, css

我正在尝试使用 JQuery 插件 hcSticky 使我的固定内容滚动。但由于某种原因，我无法让它正常工作。我可能做错了什么？

JSFIDDLE：http: [//jsfiddle.net/T6gc2/](http://jsfiddle.net/T6gc2/)

这是文档：[http ://someweblog.com/hcsticky-jquery-floating-sticky-plugin/](http://someweblog.com/hcsticky-jquery-floating-sticky-plugin/)

jQuery：

```
$(document).ready(function() {
$('#newsfeed-left').hcSticky();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:23:57.243

也许您误解了 hcSticky 的工作原理。

它应该是这样的：

[http://jsfiddle.net/gBCk9/](http://jsfiddle.net/gBCk9/)

为了使 hcSticky 工作，您应该在页面上有一些内容，这比您想要浮动的元素大。第二件事，你不应该`position:fixed`自己设置它，插件会为你做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:07:00.860

你想要一个滚动条吗？如果是这样，您可以像这样添加一个溢出-y：

[http://jsfiddle.net/jquery4u/FKaWr/](http://jsfiddle.net/jquery4u/FKaWr/)

```
overflow-y: scroll; 
```

# amazon-s3 - CloudFront：成本估算

> ID：15776598
> 
> 赞同：21
> 
> 时间：2013-04-02T23:58:46.667
> 
> 标签：amazon-s3, amazon-cloudfront, akamai

必须提出将 Amazon S3 与 CloudFront 一起用作 CDN 的建议。重要的事情之一是进行成本估算。我阅读了 AWS 网站和论坛，使用了他们的计算器，但无法得出我有信心的最终数字（大约）。老实说，我对诸如“数据传出”、“GET 和其他请求”之类的术语以及是否需要在 Amazon S3 和 Amazon CloudFront 中填写详细信息然后进行汇总感到困惑。

所以在这里需要帮助来估计我的每月账单。

*   我将使用 S3 存储文件（主要是图像）
*   我将使用我的 S3 存储桶配置云前端以交付内容。
*   大多数客户群（几乎 95%）在美国。

*   平均文件大小：500KB

*   每月平均存储在 S3 上的文件数：80000 (80K)
*   每月请求文件的大约总用户数或从 CloudFront 获取文件的大约总请求数：每月 3000 万
*   每月会有一些无效请求（比如说 1000 个）

如果我能更好地了解我的每月账单将如何计算以及大约是多少，那就太好了。

此外，根据上述数据和估计，如果我使用 Akamai 或 Rackspace，每月的账单大概是多少。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T01:41:17.310

我会把另一个号码扔进戒指。

使用[http://calculator.s3.amazonaws.com/calc5.html](http://calculator.s3.amazonaws.com/calc5.html)

**CloudFront**
数据传出 0.5MB x 3000 万 = ~15,000GB

平均大小 500kb

1000 个无效请求

95% 美国

**S3**
存储 80K x 0.5MB 4GB

请求 3000 万

我的初始结果是 1,413 美元。正如@user2240751 所指出的，安全系数为 2 并非不合理，因此在 1,500 美元到 3,000 美元/月的范围内。

我习惯于处理较小的数字，但由于额外的请求和数据传输，最终数量总是比您预期的要多。

欢迎指正或改进建议！

祝你好运

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T14:17:38.730

S3 put 和 get 请求字段（在您的情况下）应仅限于您可能仅从应用程序调用/更新 S3 中的文件的次数。

要计算 Cloudfront 服务成本，您应该计算出页面加载的粗略出站带宽（每页从 cloudfront 提供的对象数量 - 然后将其加倍 - 给自己一些空间），并填写其余字段。

粗略计算。500GB 数据输出（猜测） 500k 平均对象大小 1000 个失效请求 95% 到美国的边缘位置 5% 到欧洲的边缘位置

售价为 60.80 美元 + 您的 S3 成本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-06T14:42:35.133

我认为这里的数学是错误的 0.5MB * 30,000,000 是 14503GB 而不是 1500GB - 这是 10 的因数，除非我遗漏了什么

这意味着您的每月费用将在 2000 美元左右而不是 200 美元左右

# java - Maven WAR ClassNotFound 异常

> ID：15776601
> 
> 赞同：0
> 
> 时间：2013-04-02T23:59:04.103
> 
> 标签：java, maven, jboss, classloader

我在 JBoss 中部署了一个简单的 maven WAR 项目。该项目依赖于另一个 jar (J1)，而 J1 又依赖于其他 jar J2 和 J3。

所以我在 WAR 的 pom.xml 中添加了 J1、J2、J3 依赖项，当我构建时，我可以看到 WAR 的 lib 文件夹中的所有 jar。

当我的程序在 JBoss 中运行时，我在从 J2 加载一个类时遇到类加载异常，该类是在 J1 类中导入的。

任何想法我们如何解决这个问题或可能是什么问题？我什至尝试通过在我的 WAR 类中导入该类，但奇怪的是，WAR 类加载得很好并且流程移动到 J1，然后再次得到相同的异常。如果找不到该类，我不应该在加载 WAR 类本身时遇到异常吗？

更新：课程是这样的：

```
 package com.zebra.jpos;

 public class Loader extends ClassLoader
 {
   private Class c;
   private Object o;
   private String name;
   public static final String version = "$Id: Loader.java,v 1.1.1.1 2006/08/03 15:05:19 qolson Exp $";

   public Loader(String n)
     throws ClassNotFoundException
   {
     this.o = null;
     this.name = n;
     try {
       this.c = loadClass(this.name, true);
     } catch (ClassNotFoundException e) {
       throw e;
     }
   }

   public Class theClass()
   {
     return this.c;
   }

   public Class loadClass(String name, boolean resolve) throws ClassNotFoundException
   {
     try {
       this.c = findSystemClass(name);
     } catch (ClassNotFoundException e) {
       throw e;
     }
     return this.c; }

   public Object NewInstance() {
     try {
       this.o = theClass().newInstance();
     } catch (InstantiationException e1) {
       return null;
     } catch (IllegalAccessException e2) {
       return null;
     } catch (Exception e3) {
       return null;
     }
     return this.o;
   }

   public static Object getInstance(String class_name) throws ClassNotFoundException {
     Loader classloader;
     try {
       classloader = new Loader(class_name);
     } catch (ClassNotFoundException e) {
       throw e;
     }

     if (classloader != null) {
       return classloader.NewInstance();
     }
     return null;
   }
 } 
```

# javascript - 如何让 Ember.js 工作？

> ID：15776603
> 
> 赞同：1
> 
> 时间：2013-04-02T23:59:13.630
> 
> 标签：javascript, ember.js, handlebars.js

我很困惑，我不知道我要去哪里错了。我正在使用[Inspiritas](https://github.com/littke/inspiritas-bootstrap/) Bootstrap 主题，我想在 Ember.js 应用程序中使用它。

我一直在努力阅读，我似乎无法弄清楚出了什么问题 - 调试并没有真正帮助:(

我的文件如下：

### 应用程序.js

```
app = Ember.Application.create();

app.IndexController = Ember.Controller.extend({
    name : "Hassan Khan"
}); 
```

### 索引.html

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>app</title>
    <link href="inspiritas.css" rel="stylesheet">
</head>
<body>
    <script src='../components/jquery/jquery.js'></script>
    <script src="../js/jquery.tablesorter.js"></script>
    <script src="../components/moment/moment.js"></script>
    <script src="../components/highcharts.com/js/highcharts.src.js"></script>
    <script src="../components/handlebars/handlebars.js"></script>
    <script src="../components/bootstrap/js/bootstrap-dropdown.js"></script>
    <script src="../components/bootstrap/js/bootstrap-collapse.js"></script>
    <script src="../components/bootstrap/js/bootstrap-typeahead.js"></script>
    <script src="../components/ember/ember.js"></script>
    <script src="js/app.js"></script>
</body>
</html> 
```

现在我不太确定该`application`位应该去哪里，但这里是：

### 应用程序.html

```
<div class="navbar navbar-static-top navbar-inverse">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="#">app</a>
            <span class="tagline">Blah</span>
            <div class="nav-collapse collapse" id="main-menu">
                <div class="auth pull-right">
                    <img class="avatar" src="images/img.png">
                    <span class="name">{{ name }}</span><br/>
                    <span class="links">
                        <a href="#">Settings</a>
                        <a href="#">Logout</a>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row-fluid">
        <div class="span9" id="content-wrapper">
            <div id="content">
                {{ outlet }}
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T03:28:00.047

*application.html*需要由`Ember.Handlebars`. 如果你把它的内容放在你的页面的和之间`<script type="text/x-handlebars">`，它会自动为你编译和渲染。`</script>``head``body`

命名您的应用程序变量也是一个好习惯`App`。

如果你希望它被渲染，你`name`应该移动到一个。`App.ApplicationController`

[http://emberjs.com/guides](http://emberjs.com/guides)将是创建 Ember 应用程序的良好起点。来自 Tom Dale 的新视频肯定会对您有所帮助。

[http://jsbin.com/aqokix/1](http://jsbin.com/aqokix/1)

# jquery - 如何链接 jquery-ui-tabs 依赖的 # href

> ID：15776620
> 
> 赞同：0
> 
> 时间：2013-04-03T00:00:43.550
> 
> 标签：jquery, href, jquery-ui-tabs

我在这里重新使用了本教程中基于 jQuery 的图像滑块：

[http://webdeveloperplus.com/jquery/featured-content-slider-using-jquery-ui](http://webdeveloperplus.com/jquery/featured-content-slider-using-jquery-ui)

在大多数情况下，它工作得很好，除了事物的描述方面依赖于`href`被设置为`"#fragment-whatever number"`. 基本的 HTML 设置如下所示：

```
<div id="featured" >  
    <ul class="ui-tabs-nav">  
        <li class="ui-tabs-nav-item ui-tabs-selected" id="nav-fragment-1">
          <a href="#fragment-1"><img src="images/image1-small.jpg" alt="" />
            <span>15+ Excellent High Speed Photographs</span>
          </a>
        </li>
</ul>

<div id="fragment-1" class="ui-tabs-panel" style="">  
        <img src="images/image1.jpg" alt="" /> 
</div>
</div> 
```

这是运行它的 jQuery：

```
$(document).ready(function () {
    $("#sliderContainer > ul").tabs({
        fx: {
            opacity: "toggle"
        }
    }).tabs("rotate", 5000, true);
    $("#sliderContainer > ul").hover(function () {
        $("#sliderContainer > ul").tabs({
            event: "mouseover"
        }).tabs("rotate", 0, true);
    }, function () {
        $("#sliderContainer > ul").tabs("rotate", 5000, true);
    }); 
```

现在，我的问题是我想将列表中的内容设置为“#fragment”以外的链接。我不知道该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:10:43.977

我似乎已经回答了我自己的问题。我在虚拟标签之后向 a 标签添加了一个 onclick 事件，如下所示：

```
<a href="#fragment-1" onclick="javascript: goto_this_page('http://wherever.com')"> 
```

我在它上面的某个地方创建了这个函数来处理 onclick 调用：

```
var goto_this_page = function (this_href) {
var href = this_href;
window.location.href = href;
} 
```

这似乎暂时解决了这个问题。当然，我愿意接受更好的解决方案。

# matlab - 脚本错误中的匿名函数

> ID：15776626
> 
> 赞同：1
> 
> 时间：2013-04-03T00:01:00.997
> 
> 标签：matlab, optimization, anonymous-function

我在脚本中创建了一个匿名函数，但无法让 MATLAB 运行 fminsearch？这是我到目前为止所拥有的：

```
V=x(1);
f=x(2);
q=@(x) (pi.*D.*L)./(1000.*V.*f);
fminsearch(@q,x); 
```

定义了变量 D 和 L，但 MATLAB 给了我以下错误：

错误：文件：Testing.m 行：51 列：17 “q”以前用作变量，与此处用作函数或命令的名称相冲突。有关详细信息，请参阅 MATLAB 文档中的“MATLAB 如何识别命令语法”。

q 在此命令之前未提及。我究竟做错了什么？

可以解决我的问题的另一件事是让我的脚本编写一个函数文件，但是该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:25:55.007

删除第二个`@`：

```
V=x(1);
f=x(2);
q=@(x) (pi.*D.*L)./(1000.*V.*f);
fminsearch(q,x); 
```

`q`是一个函数句柄。`fminsearch`需要一个函数句柄。`@`您可以使用（例如）从函数中创建函数句柄`@min`，但您不需要在此处执行此操作。

您还可以使用搜索命令内联编写匿名函数：

```
V=x(1);
f=x(2);
fminsearch(@(x) (pi.*D.*L)./(1000.*V.*f),x); 
```

**更新**（感谢@wakjah）

为了让您的代码做任何明智的事情，您应该使用`x`匿名函数的参数：

```
x0 = [initialV, initialF];
fminsearch(@(x) (pi.*D.*L)./(1000.*x(1).*x(2)), x0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T06:26:46.177

`@function`为现有函数创建**函数句柄。**

`q = @(x) whatever...`创建一个名为的**函数句柄**`q`。

但是，**您不能为函数句柄创建函数句柄**，只能为函数创建函数句柄。

看到这个：

```
>> fones = @ones

fones = 

    @ones

>> ffones = @fones
Error: "fones" was previously used as a
variable,
 conflicting with its use here as the name
 of a function or command.
 See MATLAB Programming, "How MATLAB
 Recognizes Function Calls That Use
 Command Syntax" for details. 
```

在 Matlab 中，函数句柄是一种指向函数的指针，与函数不同（不像在其他一些语言中，函数标识符可以作为任何其他变量传递和存储）。

重要的是要注意调用函数和函数句柄会导致相同的行为。除了在标识符后面没有任何括号的情况下使用：

```
>> ones

ans =

     1

>> fones

fones = 

    @ones

>> ones(2)

ans =

     1     1
     1     1

>> fones(2)

ans =

     1     1
     1     1 
```

# ruby-on-rails - ruby-american_date gem 仍然在文本字段中显示 yyyy-mm-dd

> ID：15776627
> 
> 赞同：0
> 
> 时间：2013-04-03T00:01:16.233
> 
> 标签：ruby-on-rails

我在 Gemfile 中添加了以下行。

宝石'american_date'

Rails 是 3.2.13，而 ruby​​ 是 1.9.3。

一切都很好，除了文本字段显示 yyyy-mm-dd 格式而不是 mm/dd/yyyy。

如何正确设置？

山姆

编辑：

我在初始化程序中有以下配置。

```
Date::DATE_FORMATS.merge!(default: "%m/%d/%Y")
Time::DATE_FORMATS.merge!(default: "%m/%d/%Y %H:%M:%S") 
```

但是，文本字段未使用该格式。为什么不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:03:52.333

为什么不使用[自定义时间格式化程序](https://stackoverflow.com/questions/3654974/where-to-put-time-format-rules-in-rails-3)？您不需要整个 gem 来为 Time 对象输出 mm/dd/yyyy 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:14:01.807

我使用 jQuery 解决了这个问题。我将代码放在就绪事件中。

```
 $('input.date').each(function() {
    if (/\d\d\d\d-\d\d-\d\d/.test(this.value)) {
      var d = $.datepicker.parseDate("yy-mm-dd",  this.value);
      this.value = $.datepicker.formatDate('mm/dd/yy', d);
    }
  }) 
```

# ios - imagePickerController didFinishPickingMediaWithInfo 给了我一个奇怪的图像

> ID：15776628
> 
> 赞同：0
> 
> 时间：2013-04-03T00:01:16.863
> 
> 标签：ios, xcode, uiimage, uiimagepickercontroller

我编写了一些代码来添加用相机拍摄的照片并将其添加到 UIImages 的 NSMutableArray 中。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [picker dismissModalViewControllerAnimated:YES];

    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    self.description.text = [NSString stringWithFormat:@"image is %d by %d", image.size.width, image.size.height];

    //[self.imageArr addObject:image]

    //[self saveImages];
} 
```

“self.description.text”是我在 iPhone 上测试时用来获取信息的 UILabel（我的 macbook 太旧，无法升级到最新的操作系统和 Xcode 版本）。

我发现当我将图像添加到我的 imageArr 时，应用程序崩溃了（我知道 imageArr 不是 nil，我使用了 UILabel 的描述来检查）。

如果我注释掉addObject和saveImages函数，我发现我拍照后，描述说UIImage的宽度为0，高度为1084850176。以前有人遇到过这个问题吗？这几天我一直在尝试在应用程序中拍摄和保存照片，但我似乎无法解决这个问题。

**编辑：** 我通过使用 %f 而不是 %d 解决了图像尺寸问题（感谢 idz！）。

当我取消注释 [self.imageArr addObject:image] 行时，它仍然崩溃。崩溃报告说运行该行时异常类型为 EXC_CRASH (SIGABRT)。我真的不知道这意味着什么，但我确信 imageArr 不是 nil 并且它是一个 NSMutableArray，所以我不明白为什么它一直在那里崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:04:41.587

通常你必须分配和初始化`self.imageArr`.

这通常是导致这些错误的原因。此外，如果它是一个数组，请确保它是一个可变数组。

# java - 无法写入文件

> ID：15776630
> 
> 赞同：-1
> 
> 时间：2013-04-03T00:01:23.003
> 
> 标签：java, filewriter, printwriter, writetofile

大家好，我正在创建一个将数据写入文本文件的程序。数据来自数组列表，它是从数组列表中解决的数据，例如：

```
 public double getGincome(){
        gincome=rpd*dwork;
        return gincome;
    } 
```

问题是我无法写入我的 txt 文件。这是我写入数据的代码：

```
public static boolean payrollWriteToFile(String filename) {
        boolean saved = false;
        PrintWriter pw = null; // pw is a PrintWriter identifier

        try {
            // instantiate pw as PrintWriter, FileWriter
            pw = new PrintWriter(new FileWriter(filename)); 

            try {

                // for each loop. each data from payrolls is 
written to parameter

                for (Person payroll : payrolls) {

                    pw.println(payroll.getName());
                    pw.println(payroll.getGincome());
                    pw.println(payroll.getSss());
                    pw.println(payroll.getPagibig());
                    pw.println(payroll.getPhil());
                    pw.println(payroll.getDeduc());
                    pw.println(payroll.getNincome());

                }
                saved = true;
            } finally {
                pw.close();
            }
        } catch (IOException e) {

            e.printStackTrace();
        }
        return saved;
    } 
```

这是我的数组

```
public class Person {

private String name;
private String add;
private String gender;
private String status;
    public double rpd;
    public double dwork;
    public static int EmployeeCount;
    public double gincome;
    public double nincome;
    public double deduc;
    public double sss;
    public double pagibig;
    public double phil;

public Person(double gincome, double nincome, double deduc, double sss, double 
pagibig, double phil ) {
    this.gincome = gincome ;
    this.nincome = nincome;
    this.deduc = deduc;
    this.sss = sss;
            this.pagibig= pagibig;
            this.phil = phil;
}

Person( String name , double gincome, double sss, double pagibig, double phil,   
double deduc, double nincome){
    this.gincome = gincome;
    this.nincome = nincome;
    this.sss = sss;
    this.pagibig = pagibig;
    this.phil = phil;
    this.deduc = deduc;

}

Person(String name, String add, String gender, String status, double dwork, double rpd)    
{

            this.name = name;
    this.add = add;
    this.gender = gender;
    this.status = status;
            this.rpd = rpd;
            this.dwork = dwork;

}

    public double getGincome(){
        gincome=rpd*dwork;
        return gincome;
    }

    public double getDeduc(){
        double sss = gincome *.03 ;
        double pagibig = gincome *.02;
        double philhealth = gincome* .0125 ;
        deduc= sss + pagibig +philhealth;

        return deduc;
    }

     public double getNincome(){
         return nincome;
     }

     public double getSss(){
         return sss = getGincome() * .03;

     }
     public double getPagibig(){
         return pagibig = getGincome() * .02;

     }
     public double getPhil(){
         return phil = getGincome() * .0125;

     }
    public static int getEmployeeCount(){
    return EmployeeCount;
   }

public String getName() {
    return name;
}

public String getAdd() {
    return add;
}

public String getGender() {
    return gender;
}

public String getStatus() {
    return status;
}

   public double getRpd(){
            return rpd;
    }

    public double getDwork(){
            return dwork;
    }

public void setName(String name) {
    this.name = name;
}

public void setAdd(String add) {
    this.add = add;
}

public void setGender(String gender) {
    this.gender = gender;
}

public void setStatus(String status) {
    this.status = status;

}

    public void setRpd(double rpd){
        this.rpd = rpd;
    }

    public void setdWork(double dwork){
        this.dwork = dwork;
    }

} 
```

我希望你们能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:51:03.077

`BufferedWriter`如果允许，请使用 a代替（也许您不是出于家庭作业目的或其他原因）。

```
File file = new File(filename);
if (!file.exists())
{
    try
    {
        file.createNewFile();
    } catch (Exception e)
    {
        e.printStackTrace();
    }
}
try
{
    // Read to end of file for writing
    BufferedReader read = new BufferedReader(new FileReader(file));
    String complete = "";
    String line = null;
    while ((line = read.readLine()) != null)
    {
        complete += line + "\n";
    }

    // Write your data
    BufferedWriter write = new BufferedWriter(new FileWriter(file));
    for (Person payroll : payrolls) 
    {
        write.append(payroll.getName());
        write.append(Double.toString(payroll.getGincome()));
        write.append(Double.toString(payroll.getSss()));
        write.append(Double.toString(payroll.getPagibig()));
        write.append(Double.toString(payroll.getPhil()));
        write.append(Double.toString(payroll.getDeduc()));
        write.append(Double.toString(payroll.getNincome()));
    }
    read.close();
    write.close();
} catch (Exception e)
{
    e.printStackTrace();
} 
```

如果您的`for`循环和所有 getter 方法都正确使用，这应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:28:52.433

在 finally 块中尝试`pw.flush();`之前。`pw.close();`它可能会解决问题。否则代码对我来说看起来是正确的。

# c - strncmp() 在我的快速排序 c 编程中给出分段错误 11

> ID：15776631
> 
> 赞同：2
> 
> 时间：2013-04-03T00:02:00.380
> 
> 标签：c, segmentation-fault

我的 strncmp() 函数出现分段错误 11。我知道错误在哪里，但不知道是什么原因造成的。这是我要解决的问题。我输入了一个包含很多单词的 txt 文件。然后我需要计算每个单词的频率，然后对单词进行排序。最后，输出排序后的单词及其频率。所以由于它是一个 C 程序，我使用链表来存储单词和频率。将单词添加到链表和计算每个单词的频率都可以很好地工作。该错误发生在我用来对单词进行排序的快速排序中。我的快速排序：

```
struct node *quick_sort(struct node *head, int l, int r){
    int i, j;
    int jval;
    int pivot;
    int min;
    char* test1;
    char* test2;
    i = l + 1;
    if (l + 1 < r) {
        test1 = get_char(head, l);
        pivot = get_freq(head, l);
        for (j = l + 1; j <= r; j++) {
            jval = get_freq(head, j);
            test2 =  get_char(head, j);
            printf("test 1:  %s test 2: %s\n",test1,test2);
            min = strlen(test1) < strlen(test2) ? strlen(test1) : strlen(test2);
            printf("Length 1 :%ld  Length 2: %ld    Max is: %d\n",strlen(test1),strlen(test2), min);

                   // HERE is where the bug is  
            if (strncmp(test2,test1,min)<0 && jval != -1) {         
                swap(head, i, j);
                i++;
            }
        }
        swap(head, i - 1, l);
        quick_sort(head, l, i);
        quick_sort(head, i, r);
    }

    return head;
} 
```

和其他相关功能：

```
int get_freq(struct node *head, int l){
    while(head && l) {
        head = head->next;
        l--;
    }
    if (head != NULL)
        return head->freq;
    else
        return -1;
}

void swap(struct node *head, int i, int j){
    struct node *tmp = head;
    int tmpival;
    int tmpjval;
    char* tmpiStr;
    char* tmpjStr;

    int ti = i;
    while(tmp && i) {
        i--;
        tmp = tmp->next;
    }
    tmpival = tmp->freq;
    tmpiStr = tmp->str;
    tmp = head;
    while(tmp && j) {
        j--;
        tmp = tmp->next;
    }
    tmpjval = tmp->freq;
    tmpjStr = tmp->str;
    tmp->freq = tmpival;
    tmp->str = tmpiStr;
    tmp = head;
    i = ti;
    while(tmp && i) {
        i--;
        tmp = tmp->next;
    }
    tmp->freq = tmpjval;
    tmp->str = tmpjStr;
}

char* get_char(struct node *head, int l){
    char* res;
    while(head && l) {
        head = head->next;
        l--;
    }
    if (head != NULL){
        char * arr = head->str;
        return arr;
    }
    else
        return res;
} 
```

如果我更改 strncmp() 中的最小值，有时程序会起作用。我不知道出了什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:13:09.793

您永远不会分配给`get_char`在这一行的函数中声明的变量

```
char* res; 
```

`Segmentation fault 11`当程序访问它尚未分配的内存时，通常会调用错误。在您的情况下，您可能正在尝试比较一个字符串和内存中的某个随机位置。

# windows - 装配：将某些内容打印到屏幕（到命令行）的最佳方式是什么

> ID：15776634
> 
> 赞同：1
> 
> 时间：2013-04-03T00:02:09.767
> 
> 标签：windows, winapi, assembly, exe, masm

我一直在做一些研究，但我只找到越来越多的方法来做我想做的事，而且我一个都不理解。

我需要将哪些代码汇编成 .exe 才能返回`5`命令行？

我想要一个 exe，在调用时打印`5`.

研究：

```
printf "5", 0 
```

它需要与 2 个库链接，我想保持简单。

```
move ebx, 5 ; or move ax, 5
ret 
```

为什么会这样打印`5`？这会加载一个带有值的寄存器`5`并返回。没有其他的。

有人可以解释一下这些返回方式之间的区别`5`吗？

对于非常简单的 Windows EXE 可执行文件，什么最适合？

我无法得到 StackOverflow 中已经提出的问题的答案。

注意，我使用：Win 7、WinAsam、MASM

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:14:50.017

为什么不使用 printf？在 Windows 上，它是 MS C 运行时的一部分，现在是 Windows 的一部分。

使用 Windows API，您将使用：

`GetStdHandle`

以及以下之一：

`WriteConsole`

`WriteConsoleOutput`

`WriteConsoleOutputAttribute`

`WriteConsoleOutputCharacter`

`WriteFile`

一切都取决于你想怎么做。

`mov`将某些内容放入寄存器不会打印任何内容，您必须告诉操作系统打印它。

如果你发现一些你不理解的东西，做一些研究，阅读文档，代码注释，玩弄代码改变的东西，看看它是如何工作的。

# math - 如何计算 SCNNode 的多轴 SCNVector4 旋转？

> ID：15776637
> 
> 赞同：3
> 
> 时间：2013-04-03T00:02:44.410
> 
> 标签：math, transformation, scenekit

SCNNode 使用 a 进行旋转`SCNVector4`，它具有角度 (w) 和该角度如何应用于每个轴 (x, y, z) 的大小。例如，要绕 x 轴旋转 45 度，我会创建一个`SCNVector4`这样的：

```
SCNVector4Make(1.0f, 0, 0, DEG2RAD(45)) 
```

我想做的是在所有三个轴上旋转它，例如：x 轴上 45 度，y 轴上 15 度和 z 轴上 -135 度。有谁知道计算决赛的数学`SCNVector4`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-19T18:27:52.203

代替`rotation`属性，使用`eulerAngles`并指定每个轴的角度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T19:21:05.117

您需要为每个旋转生成一个 SCNVector4，然后将它们相乘。请注意，操作顺序很重要！

[http://www.cprogramming.com/tutorial/3d/rotationMatrices.html](http://www.cprogramming.com/tutorial/3d/rotationMatrices.html)有一个很好的数学写作。任何处理旋转矩阵的 OpenGL 参考也值得一看。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-08T13:17:56.233

如果您没有为旋转设置动画，则直接设置变换矩阵可能更简洁，例如：

```
node.transform = CATransform3DRotate(CATransform3DRotate(CATransform3DRotate(node.transform, xAngle, 1, 0, 0), yAngle, 0, 1, 0), zAngle, 0, 0, 1); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-29T10:51:03.697

您要求旋转矩阵还是一般如何简单地旋转？如果第二个是正确的，那么例如：

```
[node runAction:[SCNAction rotateByX:0 y:M_PI z:0 duration:0]]; 
```

# java - 对于我在java中的游戏，for循环没有运行

> ID：15776638
> 
> 赞同：0
> 
> 时间：2013-04-03T00:02:44.707
> 
> 标签：java

```
for(x = mapEdge.getMinX() ; x < mapEdge.getMaxX(); x += 11){        
            if(once){
                yLoop = mapEdge.getMinY() - yLoop;
            }
            for(y = yLoop ; y == yLoop - 11; y -= 11){
                g.drawImage(grass, x, y);
            }
            yLoop = y;
            once = true;
    } 
```

* * *

```
for(y = yLoop ; y == yLoop - 11  ; y -= 11){
    g.drawImage(grass, x, y);

} 
```

这个循环在我的代码中根本没有运行；它只是完全绕过而不做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:04:29.697

您初始化`y`为`yLoop`，但条件是`y == yLoop - 11`，第一次显然是错误的，因此循环永远不会运行。

我怀疑你想要这样的条件：

```
for(y = yLoop ; y > yLoop - 11  ; y -= 11) 
```

# asp.net-mvc - 如何自定义简单的成员资格提供程序以使用我自己的数据库 ASP.NET mvc 4

> ID：15776640
> 
> 赞同：12
> 
> 时间：2013-04-03T00:03:07.677
> 
> 标签：asp.net-mvc, asp.net-mvc-4, membership-provider, simplemembership

这些天我正在探索 ASP.NET MVC 4。如果有人能回答我的问题，我会很高兴。

我正在建立一个学术项目“项目管理和支持系统”。我设计了自己的数据库，我为我的数据库中的用户（两种用户：将执行任务的员工和分配/雇用任务的客户）有自己的表，我打算创建一个新的会员提供者但是我意识到“这是浪费时间——重新发明轮子”。

现在，我正在使用 SimpleMembership 在 ASP.NET MVC4 上构建会员模型（这是 MVC 应用程序会员服务的未来）。它为 ASP.NET 框架提供了更简洁的会员提供程序，并额外支持 OAuth。

1- 我创建了一个开箱即用的 ASP.NET MVC 4 互联网应用程序来自定义登录、注册和用户管理逻辑以维护用户配置文件表。我添加了三个角色：Admin、Employee、Client

通过这篇博文，我可以自定义注册 [http://blog.longle.net/2012/09/25/seding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-自定义用户属性/](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)

2-现在，我正在将此表与我自己数据库中的用户表同步。考虑到我添加了另一个“帐户类型”字段，在注册期间要求用户创建特定的配置文件。

非常感谢任何帮助。

干杯

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-09T12:22:58.890

使用 SimpleMembership 有两种方法可以存储和使用该信息进行身份验证。

1.  您可以使用默认 (UserProfiles) 表，即在“DefaultConnection”字符串指向的数据库中。

2.  您可以使用您的数据库和其中的表来替换默认的 UserProfiles 表。

选项 1 在其他地方得到了很好的解释。对于选项 2，请按照以下步骤操作：假设您的数据库上下文是 mDbContext，而要用于替换 UserProfiles 的表是员工。

1.  您的 Employee 模型如下所示

    ```
    namespace m.Models
    {
      public class Employee
      {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int ID { get; set; }
        public string UserName { get; set; }

        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Mobile { get; set; }
        public Designation Designation { get; set; }
        ......... 
    ```

2.  你的 DbContext 看起来像这样

    ```
    namespace m.Models
    {
        public class mDBContext : DbContext
        {
             DbSet<Employee> Employees { get; set; }
    ...... 
    ```

3.  您需要告诉 WebSecurity 使用您的数据库。

    ```
    WebSecurity.InitializeDatabaseConnection("mDBContext", 
      "Employees", "ID", "UserName", autoCreateTables: true); 
    ```

4.  在 AccountModels 的 RegisterModel 类中添加其他字段

    ```
    public class RegisterModel
    {
        [Required]
        [Display(Name = "User name")]
        public string UserName { get; set; }

        [Required]
        [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
        [DataType(DataType.Password)]
        [Display(Name = "Password")]
        public string Password { get; set; }

        [DataType(DataType.Password)]
        [Display(Name = "Confirm password")]
        [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
        public string ConfirmPassword { get; set; }

        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Mobile { get; set; }
        public Designation Designation { get; set; }
    } 
    ```

5.  在 AccountController Register 方法中为 HttpPost 替换

    ```
    WebSecurity.CreateUserAndAccount(model.UserName, model. 
    ```

    和

    ```
    WebSecurity.CreateUserAndAccount(model.UserName, model.Password, 
      new {  FirstName = model.FirstName, LastName = model.LastName, 
             Mobile = model.Mobile}); 
    ```

6.  如果挂起任何更改（或添加迁移），则重建和更新数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:11:09.720

按照以下链接的类似问题的答案进行操作。如果您还有任何问题，请告诉我。

[有答案的类似问题](https://stackoverflow.com/questions/15720952/how-can-i-attach-membership-database-to-my-own-database-on-the-fly-with-ef-code/15721082#15721082)

**更新**

在阅读了您的第一条评论之后，听起来您需要先了解 MVC 的全部内容，然后再接触 SimpleMembership。尝试以下链接。

[维基百科](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

[w3schools](http://www.w3schools.com/aspnet/mvc_intro.asp#gsc.tab=0)

[MSDN](http://msdn.microsoft.com/en-us/library/ff649643.aspx)

[http://www.asp.net/mvc](http://www.asp.net/mvc)

# java - 在 Java 中创建未连接的套接字有什么好处？

> ID：15776642
> 
> 赞同：1
> 
> 时间：2013-04-03T00:03:25.250
> 
> 标签：java, networking

在我正在研究的代码中，我看到了这一行：

```
Socket clientSocket = new Socket(); 
```

所以这只是一个原始套接字，无处连接？为什么要使用这种未绑定到端口的套接字？

我[在 API](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html#setSoLinger%28boolean,%20int%29)上看到它是“系统默认类型的 SocketImpl”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:30:06.107

当您想连接超时时，您可以这样做：

```
Socket s = new Socket();
try
{
    s.connect(address, timeout);
}
catch (SocketTimeoutExceptione exc)
{
    // connect timeout
} 
```

# java - Java：如果未知数组大小，如何初始化？

> ID：15776644
> 
> 赞同：18
> 
> 时间：2013-04-03T00:03:29.903
> 
> 标签：java

我要求用户输入 1 到 100 之间的一些数字并将它们分配到一个数组中。数组大小未初始化，因为它取决于用户输入数字的次数。

我应该如何分配数组长度？

如果用户输入 5 6 7 8 9（5 个数字），则

```
int[] list; 
```

变成

```
int[] list = new int[5]; 
```

我正在尝试使用循环，但它不会停止。

```
int[] integers;
int j = 0;
do {
       integers = new int[j + 1];
       integers[j] = in.nextInt(); 
       j++;      
} while((integers[j-1] >= 1) ||(integers[j-1]) <= 100); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-03T00:03:57.320

你应该使用 a[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)这样的东西，而不是数组。作为一般的经验法则，当您事先不知道要向数组添加多少元素时，请改用 a `List`。大多数人可能会通过使用[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html).

如果你真的不能使用 a `List`，那么你可能不得不使用一些初始大小的数组（可能是 10？）并跟踪你的数组容量与你添加的元素数量，并将元素复制到 a如果你的空间用完了，新的更大的阵列（这基本上是`ArrayList`内部做的）。另请注意，在现实世界中，您*永远*不会这样做 - 您将使用专门为此类情况制作的标准类之一，例如`ArrayList`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-03T00:11:01.417

我认为您需要使用 List 或基于此的类。

例如，

```
ArrayList<Integer> integers = new ArrayList<Integer>();
int j;

do{
    integers.add(int.nextInt());
    j++;
}while( (integers.get(j-1) >= 1) || (integers.get(j-1) <= 100) ); 
```

您可以阅读[本文](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)以获取有关如何使用它的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T00:10:54.907

我同意像 List 这样的数据结构是最好的方法：

```
List<Integer> values = new ArrayList<Integer>();
Scanner in = new Scanner(System.in);
int value;
int numValues = 0;
do {
    value = in.nextInt();
    values.add(value);
} while (value >= 1) && (value <= 100); 
```

或者您可以分配一个最大大小的数组并将值加载到其中：

```
int maxValues = 100;
int [] values = new int[maxValues];
Scanner in = new Scanner(System.in);
int value;
int numValues = 0;
do {
    value = in.nextInt();
    values[numValues++] = value;
} while (value >= 1) && (value <= 100) && (numValues < maxValues); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T00:14:15.183

如果您想坚持使用数组，那么您可以使用这种方式。但它不如 List 好，不推荐。但是，它将解决您的问题。

```
import java.util.Scanner;

public class ArrayModify {

    public static void main(String[] args) {
        int[] list;
        String st;
        String[] stNew;
        Scanner scan = new Scanner(System.in);
        System.out.println("Enter Numbers: "); // If user enters 5 6 7 8 9 
        st = scan.nextLine();
        stNew = st.split("\\s+");
        list = new int[stNew.length]; // Sets array size to 5

        for (int i = 0; i < stNew.length; i++){
            list[i] =  Integer.parseInt(stNew[i]);
            System.out.println("You Enterred: " + list[i]);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-12T16:53:20.923

```
String line=sc.nextLine();
    int counter=1;
    for(int i=0;i<line.length();i++) {
        if(line.charAt(i)==' ') {
            counter++;
        }
    }
    long[] numbers=new long[counter];
    counter=0;
    for(int i=0;i<line.length();i++){
        int j=i;
        while(true) {
            if(j>=line.length() || line.charAt(j)==' ') {
                break;
            }
            j++;
        }
        numbers[counter]=Integer.parseInt(line.substring(i,j));
        i=j;
        counter++;  
    }
    for(int i=0;i<counter;i++) {
        System.out.println(numbers[i]);
    } 
```

我总是在这种情况下使用这段代码。旁边可以识别两个或三个或更多数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-07T19:23:53.853

```
int i,largest = 0;
Scanner scan = new Scanner(System.in);
System.out.println("Enter the number of numbers in the list");
i = scan.nextInt();
int arr[] = new int[i];
System.out.println("Enter the list of numbers:");
for(int j=0;j<i;j++){
    arr[j] = scan.nextInt();
} 
```

上面的代码运行良好。我已经输入了列表中元素的数量并相应地初始化了数组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-14T12:36:10.783

**从单行输入数组的数字列表。

```
 String input = sc.nextLine();
    String arr[] = input.split(" ");
    int new_arr[] = new int[arr.length];
    for(int i=0; i<arr.length; i++)
    {
         new_arr[i] = Integer.parseInt(arr[i]);
    } 
```

# java - 单击暂停按钮时线程不会暂停

> ID：15776645
> 
> 赞同：0
> 
> 时间：2013-04-03T00:03:30.623
> 
> 标签：java, multithreading, button

我试图在用户单击暂停按钮时暂停弹跳球动画，并在单击恢复时恢复它。问题是当我单击暂停按钮时，它应该将suspendRequested 设置为true，因此它进入if 语句并运行while 语句，这会导致线程等待，从而停止球的动画。然后，当用户单击 resume 时，它​​应该将其设置回 false ，这会将其从 while 循环中中断并继续动画。这不会发生，那么为什么它没有跳出循环呢？

```
class BallRunnable implements Runnable
{
   private Lock suspendLock = new ReentrantLock();
   private Condition suspendCondition = suspendLock.newCondition();
   private volatile boolean suspendRequested = false;
   private boolean isBouncing = true;
   private Ball ball;
   private Component component;
   public static final int STEPS = 1000;
   public static final int DELAY = 100;

   /**
    * Constructs the runnable.
    * @param aBall the ball to bounce
    * @param aComponent the component in which the ball bounces
    */
   public BallRunnable()
   {
   }
   public BallRunnable(Ball aBall, Component aComponent)
   {
      ball = aBall;
      component = aComponent;
   }

   public void run()
   {
      while(isBouncing())
      {
          try
          {
                ball.move(component.getBounds());
                component.repaint();
                Thread.sleep(DELAY);
                String name = Thread.currentThread().getName();
                System.out.println("Ball is bouncing " + name);
                if(suspendRequested)
                {
                    suspendLock.lock();
                    System.out.println("Locking thread");
                    try
                    {
                        while(suspendRequested)
                        {
                            System.out.println("About to await");
                            suspendCondition.await();
                        }
                    }
                    catch (InterruptedException e)
                    {
                    }
                    finally
                    {
                     suspendLock.unlock();
                     System.out.println("Unlocked " + name);
                    }
                }
          }
          catch (InterruptedException e)
          {
          }

        }
    }

    public boolean isBouncing()
    {
        if(isBouncing)
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    public void setBouncing(boolean b)
    {
        isBouncing = b;
    }

   public void requestSuspend()
   {
       suspendRequested = true;
   }

   public void requestResume()
   {
       suspendRequested = false;
       suspendLock.lock();
       try
       {
           suspendCondition.signalAll();
       }
       finally
       {
           suspendLock.unlock();
       }
   }

} 
```

在这里，它应该在单击按钮时暂停并恢复线程，但不会将它们从循环中中断。如果使它看起来的布尔值设置为true，然后用户按下暂停将其更改为false，它不应该将其打破循环吗？

```
class BounceFrame extends JFrame
{
   BallRunnable br = new BallRunnable();
   private BallComponent comp;

   /**
    * Constructs the frame with the component for showing the bouncing ball and Start and Close
    * buttons
    */
   public BounceFrame()
   {
      comp = new BallComponent();
      add(comp, BorderLayout.CENTER);
      JPanel buttonPanel = new JPanel();
      addButton(buttonPanel, "Start", new ActionListener()
         {
            public void actionPerformed(ActionEvent event)
            {
               addBall();
               //Don't let user click again
               System.out.println("Clicked start");
            }
         });

    addButton(buttonPanel, "Pause", new ActionListener()
    {
        public void actionPerformed(ActionEvent event)
        {

            System.out.println("Clicked Paused");
            br.setBouncing(false);
            System.out.println("Clicked Paused STOP BOUNCinG");
            br.requestSuspend();
            String name = Thread.currentThread().getName();
            System.out.println("Clicked Paused REQUEST SUSPEND " + name);
        }
    });

    addButton(buttonPanel, "Resume", new ActionListener()
        {
            public void actionPerformed(ActionEvent event)
            {
                System.out.println("Clicked Resume");
                br.setBouncing(true);
                br.requestResume();
            }
    });

      add(buttonPanel, BorderLayout.SOUTH);
      pack();
   } 
```

这是家庭作业，所以我不是在寻找解决方案，但是当单击暂停按钮时，我没有看到关于跳出循环的内容是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:11:21.483

所以实际上我使用了计时器对象，当你按下按钮时计时器将启动，如果你再次点击它就会停止，你需要为你的弹跳球制作一个计时器类。实际上我使用了鼠标按下动作执行的方法，但它是一样的

```
if (myTimer.isRunning())
    {
     myTimer.stop();
    }
    else
    {
     myTimer.start();
    }
    }
    }); 
```

# java - setContentView 问题

> ID：15776648
> 
> 赞同：0
> 
> 时间：2013-04-03T00:03:49.873
> 
> 标签：java, android, eclipse, sdk

我正在阅读一些电子书中的一些教程，其中一个教程是创建游戏 Crazy Eights。我在本教程的开头。到目前为止，我已经创建了项目，在 Mainifest 中添加了一些细节，还创建了一个名为“MyView”的自定义视图。该活动是 CrazyEightsActivity。

好的，所以我的问题是这样的：我也在下面的屏幕截图中添加了一些关于此的内容。

这是主要活动：

![](https://i.stack.imgur.com/6qatz.png)

这是自定义视图（MyView）：

![](https://i.stack.imgur.com/xC3ge.png)

在教程中，它要求我们修改我们的主要活动以将我们的自定义视图设置为内容视图。到目前为止，我已经复制了所有内容（代码），这个小问题不允许我在模拟器中看到应用程序（因为它是迄今为止创建的，甚至还没有接近完成）。我需要一些帮助。它在 setContentView(MyView) 行的下划线，我在它周围有一个红色方块来帮助识别它。它给了我两个都不起作用的快速修复选项。之后每当我运行它时，模拟器都会说应用程序停止运行并且必须强制关闭。

我被卡住了，我希望有人可以帮助我。我真的很想尽快完成这项工作，这样我就可以继续下一个教程并开始学习这些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:17:02.633

```
setContentView(new MyView(this)); 
```

# triggers - 插入问题前的 SQL 触发器

> ID：15776654
> 
> 赞同：0
> 
> 时间：2013-04-03T00:04:16.863
> 
> 标签：triggers, insert

我有一个带有 before insert 选项的触发器，在触发器内我将数据插入到同一个表中。SQL 将如何处理此类问题，因为这会导致创建无限触发器。

例如：

```
Create trigger trigger_name on Employee
before insert
as 
insert on table Employee values(1001, 'chas');
go 
```

谢谢您的帮助

# c - 洪水填充算法 - 迷宫导航

> ID：15776660
> 
> 赞同：2
> 
> 时间：2013-04-03T00:04:47.040
> 
> 标签：c, algorithm, flood-fill

我正在尝试实现一个版本的洪水填充算法，以帮助解决微型鼠标迷宫的最短距离路径。它的工作方式与常规洪水填充相同，只是每个相邻的未填充位置都将分配一个数字，表示该位置到起始位置的距离。每次算法移动到不同的单元格时，数字都会增加一。这是一个从左下角开始的没有墙的迷宫示例。

```
2 3 4
1 2 3
0 1 2 
```

这是我当前的代码...

```
void nav_flood_rec(struct nav_array *array, int row, int column, int flood_num)
{
    //Check the base case (not shown here)
    if (base_case)
        return;

    //Assign the flood number
    arrray->cells[row][column]->flood_number = flood_num;

    //North
    nav_flood_rec(array, row + 1, column, flood_num + 1);

    //East
    nav_flood_rec(array, row, column + 1, flood_num + 1);

    //South
    nav_flood_rec(array, row - 1, column, flood_num + 1);

    //West
    nav_flood_rec(array, row, column - 1, flood_num + 1);
} 
```

我遇到的问题是递归不是一次一步进行（有点模糊，但让我解释一下）。而不是检查所有方向然后继续算法将继续向北移动而不检查其他方向。似乎我想让其他递归调用以某种方式产生，直到检查其他方向。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T00:07:56.977

当您描述的内容听起来像是您想要广度优先搜索时，您已经实现了类似于深度优先搜索的东西。

使用队列而不是堆栈。您在这里没有显式使用堆栈，但递归本质上是一个隐式堆栈。队列也将解决堆栈溢出的问题，这似乎很可能是递归的。

此外，正如 G.Bach 所说，您需要将单元格标记为已访问，以便您的算法终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:14:44.607

[维基百科关于该主题的文章](http://en.wikipedia.org/wiki/Flood_fill#Alternative_implementations)：

> 下面的伪代码显示了一个显式基于队列的实现。它类似于简单的递归解决方案，不同之处在于它不是进行递归调用，而是将节点推入 LIFO 队列（充当堆栈）以供消费：

```
 Flood-fill (node, target-color, replacement-color):
 1\. Set Q to the empty queue.
 2\. Add node to the end of Q.
 4\. While Q is not empty: 
 5\.     Set n equal to the last element of Q.
 7\.     Remove last element from Q.
 8\.     If the color of n is equal to target-color:
 9\.         Set the color of n to replacement-color.
 10\.        Add west node to end of Q.
 11\.        Add east node to end of Q.
 12\.        Add north node to end of Q.
 13\.        Add south node to end of Q.
 14\. Return. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T00:37:42.767

您`north()`无需测试任何条件即可调用。因此，您的递归将按顺序：

*   1) 测试基本情况
*   2) 设置新的洪水编号
*   3) 相遇`//north`与呼唤`nav_flood_rec()`
*   4)**重复。**

如您所见，**您将永远无法接通其他电话。**你需要实现一个测试条件，分支它，或者类似的东西。

不太确定您要做什么，但是您可以**将另一个结构作为参数传递**，并为每个方向设置一个值，然后测试它们是否相等......就像......

```
struct decision_maker {
  int north;
  int south;
  int west;
  int east;
}; 
```

然后在您的代码中：

```
/* assume dm is passed as a pointer to a decision_maker struct */

if (dm->north > dm->south) {
  if (dm->south > dm->east) {
    dm->east++; // increment first
    // call east
  } else if (dm->south > dm->west) {
    dm->west++; // increment first
    // call west
  } else {
    dm->south++;
    // call south
} else {
    dm->north++;
    // call north
}
/* 
*  needs another check or two, like altering the base case a bit
*  the point should be clear, though.
*/ 
```

它会变得有点混乱，但它会完成这项工作。

# android - Android微调器显示对象引用而不是字符串

> ID：15776661
> 
> 赞同：18
> 
> 时间：2013-04-03T00:04:52.997
> 
> 标签：android, spinner, android-arrayadapter

好的，所以我的微调器有问题。它填充了从 Web 服务中提取的数据。我遇到的问题是，当未单击微调器而不是显示微调器中第一项的字符串时，它会显示它的对象引用。

我已经查看了相关问题，但仍然看不到我缺少什么，是否就像缺少 toString 引用一样简单？

这是填充微调器的代码

```
private void buildDrinkDropDown() {

        List<NameValuePair> apiParams = new ArrayList<NameValuePair>(1);
        apiParams.add(new BasicNameValuePair("call", "drinkList"));

        bgt = new BackGroundTask(MAP_API_URL, "GET", apiParams);

        try {

            JSONArray drinks = bgt.execute().get();

            for (int i = 0; i < drinks.length(); i++) {

                JSONObject d = drinks.getJSONObject(i);

                String id = d.getString(TAG_ID_DRINK);
                String createdAt = d.getString(TAG_CREATED_AT);
                String updatedAt = d.getString(TAG_UPDATED_AT);
                String price = d.getString(TAG_PRICE);
                String name = d.getString(TAG_NAME);

                drinkList.add(new Drink( createdAt ,id, name, price,updatedAt ));
            }

            drinkField = (Spinner) findViewById(R.id.countryField); 
            DrinkAdapter dAdapter = new DrinkAdapter(this, android.R.layout.simple_spinner_item, drinkList);
            drinkField.setAdapter(dAdapter);

            drinkField.setOnItemSelectedListener(new OnItemSelectedListener(){

                @Override
                public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
                    //Drink selectedDrink = drinkList.get(position);
                    GlobalDrinkSelected = drinkList.get(position).getId().toString();

                }

                @Override
                public void onNothingSelected(AdapterView<?> parent) {}

            });

        } catch (JSONException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            e.printStackTrace();
        }
    } 
```

这是适配器类的代码

```
package com.android.main;

import java.util.ArrayList;

import android.app.Activity;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class DrinkAdapter extends ArrayAdapter<Drink>
{
    private Activity context;
    ArrayList<Drink> data = null;

    public DrinkAdapter(Activity context, int resource, ArrayList<Drink> data)
    {
        super(context, resource, data);
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {   // Ordinary view in Spinner, we use android.R.layout.simple_spinner_item
        return super.getView(position, convertView, parent);   
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent)
    {   // This view starts when we click the spinner.
        View row = convertView;
        if(row == null)
        {
            LayoutInflater inflater = context.getLayoutInflater();
            row = inflater.inflate(R.layout.dropdown_value_id, parent, false);
        }

        Drink item = data.get(position);
        String test = item.getName();
        Log.d("test ", test);

        if(item != null)
        {   

            TextView drinkName = (TextView) row.findViewById(R.id.item_value);

            if(drinkName != null){
             drinkName.setText(item.getName());
             Log.d("find me ", drinkName.toString());
            }

        }

        return row;
    }
} 
```

这是适配器中使用的 dropdown_value_id 布局的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/item_value"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

如果需要更多信息，请大声喊叫。

任何帮助将不胜感激

编辑：截图

![微调器截图](https://i.stack.imgur.com/apwkM.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-04-05T20:25:34.437

我遇到了类似的问题，但是我使用的是默认的 ArrayAdapter 而没有在单独的类中扩展它。稍微研究了一下，我发现了这个：

> 然而，TextView 被引用，它将被数组中每个对象的 toString() 填充。您可以添加自定义对象的列表或数组。覆盖对象的 toString() 方法以确定将为列表中的项目显示哪些文本。

默认的 ArrayAdapter 将对数组中已传递给适配器的每个对象调用 .toString()。如果您的 DrinkAdapter 只是显示饮料的名称，您可以重写 toString() 方法并完成

适配器：

```
ArrayAdapter<Drink> drinkAdapter = new ArrayAdapter<Drink>(getActivity(), android.R.layout.simple_spinner_dropdown_item, drinks); 
```

类对象：

```
public Drink {

    String name;

    // Constructor, getters, and setters for the object here

    @Override
    public String toString() {
        return getName(); // You can add anything else like maybe getDrinkType()
    }
} 
```

你已经完成了，不需要为你的 DrinkAdapter 创建一个单独的类

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-03T00:25:15.387

我的快速想法：getView() 方法用于表示行。您是否也可以在 getView() 方法中实现类似的编码，例如 getDropDownView 方法。

**将 getDropDownView 方法中的内容复制到 getView() 方法中**

我没有尝试过，但我在 ListView 中做了类似的操作，在 getView() 方法中做了类似的编码。

如果我发现任何东西，我也会尝试在本地复制并发布。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-03T01:12:11.803

好的，所以我通过做更多的研究并查看这个问题的答案来解决这个问题[自定义 setDropDownViewResource 微调项的示例](https://stackoverflow.com/questions/9970675/example-of-custom-setdropdownviewresource-spinner-item)

我提取了我在 getDropDownView 中所做的事情，并在 getView 和 getDropDownView 中调用了它。

这是代码

```
package com.android.main;

import java.util.ArrayList;

import android.app.Activity;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class DrinkAdapter extends ArrayAdapter<Drink>
{
    private Activity context;
    ArrayList<Drink> data = null;

    public DrinkAdapter(Activity context, int resource, ArrayList<Drink> data)
    {
        super(context, resource, data);
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {   // Ordinary view in Spinner, we use android.R.layout.simple_spinner_item

        return initView(position, convertView, parent);  
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent)
    {   // This view starts when we click the spinner.
        return initView(position, convertView, parent);
    }

    private View initView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        if(row == null)
        {
            LayoutInflater inflater = context.getLayoutInflater();
            row = inflater.inflate(R.layout.dropdown_value_id, parent, false);
        }

        Drink item = data.get(position);
        String test = item.getName();
        Log.d("test ", test);

        if(item != null)
        {   

            TextView drinkName = (TextView) row.findViewById(R.id.item_value);

            if(drinkName != null){
             drinkName.setText(item.getName());
             Log.d("find me ", drinkName.toString());
            }

        }

        return row;
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-11T07:26:34.090

在您的类中定义要在 ListView 中显示的对象，您在下面添加示例代码行

```
@Override
public String toString() {
    return getComment();
} 
```

它对我来说。

# android - haxm 在 osx 上挂起模拟器

> ID：15776664
> 
> 赞同：3
> 
> 时间：2013-04-03T00:05:03.777
> 
> 标签：android, android-emulator, emulation, intel

在我的 osx 10.6.8、eclipse juno、adt 21.1.0 上安装 Intel HAXM 后，我无法运行任何模拟器。模拟器进程会炸我的 CPU，如下所示：

![活动监视器的摘录](https://i.stack.imgur.com/JxWXh.png)

cpu 使用率永远不会低于 100%。然而，我在模拟器上有一个巨大的黑屏。

HAXM 扩展不会引发任何错误。在控制台，我阅读

```
[2013-04-02 20:09:58 - myapp] Launching a new emulator with Virtual Device 'x86'
[2013-04-02 20:10:03 - Emulator] HAX is working and emulator runs in fast virt mode
[2013-04-02 20:10:07 - myapp] New emulator found: emulator-5554
[2013-04-02 20:10:07 - myapp] Waiting for HOME ('android.process.acore') to be launched... 
```

如果我删除了 HAXM 内核扩展，我可以运行模拟器。在我看来，HAXM 无法正常运行。

有没有人面临同样的问题？如何让模拟器在安装了 HAXM 的情况下运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-15T21:11:41.770

英特尔已修复此问题。如果你去：

[英特尔® 硬件加速执行管理器 1.0.6 (R3)](http://software.intel.com/en-us/articles/intel-hardware-accelerated-execution-manager/)

..并下载并安装该项目：

> 仅适用于 OS X 10.9 的修补程序
> 
> haxm-macosx_r03_hotfix.zip

.. 现在可以了。我可以在 Mac OSX 10.9 上运行不错的快速 Android 模拟器，而不会冻结我的整台机器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-04T08:29:16.093

您可以尝试禁用硬件图形加速。

1.  启动 AVD 管理器
2.  选择您的 AVD 实例
3.  在硬件部分：如果没有 GPU 仿真选项，请单击新建，选择 GPU 仿真
4.  将值更改为否
5.  启动您的 AVD 实例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T14:26:22.923

请参阅[http://software.intel.com/en-us/forums/topic/477793](http://software.intel.com/en-us/forums/topic/477793) 英特尔已经意识到并正在调查它。不幸的是，唯一的解决方法是不在 OSX Mavericks 上使用 HAXM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-27T12:55:21.607

我知道这是一篇旧帖子，但我最近也遇到了这个问题，在 Windows 上运行。我是如何解决这个问题的：

1.  使用模拟器目标版本 17 或更高版本。

2.  使用较旧的模拟器目标版本进行如下设置：

![在此处输入图像描述](https://i.stack.imgur.com/TuQOZ.png)

![在此处输入图像描述](https://i.stack.imgur.com/sCOrM.png)

*   确保取消勾选“使用主机 GPU”并勾选“快照”
*   在启动选项上勾选“保存到快照”

你不必缩放它，你可以不勾选它

# html - 请在同一行创建 div

> ID：15776667
> 
> 赞同：0
> 
> 时间：2013-04-03T00:05:40.000
> 
> 标签：html

很难创建此图标页面。基本上，我希望图标彼此靠近排列，所以基本上是这样的......

自定义图标 - 铅笔自定义图标 - 时钟 铅笔的图标 时钟的图标

```
<div>
    <!-- Icon Button - pencil -->
    Custom Icon - pencil <br />
    <div id="pencil">pencil</div>
</div>

<div>
    <!-- Icon Button - clock -->
    Custom Icon - clock <br />
    <div id="clock">clock</div>
</div>

<div>
    <!-- Icon Button - disk -->
    Custom Icon - disk <br />
    <div id="disk">disk</div>
</div>

<div>
    <!-- Icon Button - calendar -->
    Custom Icon - calendar <br />
    <div id="calendar">calendar</div>
</div>

<div>
    <!-- Icon Button - zoomin -->
    Custom Icon - zoomin <br />
    <div id="zoomin">zoomin</div>
</div>

<div>
    <!-- Icon Button - zoomout -->
    Custom Icon - zoomout <br />
    <div id="zoomout">zoomout</div>
</div> 
```

我有一个庞大的预制按钮，我想在页面上显示给员工:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:59:50.753

我很难准确理解你在寻找什么，但我可以给出一些一般性的指示。如果你有 div 并且你想将它们水平排列，最常见的实现方法是使用`float`CSS。

[这是一个小提琴](http://jsfiddle.net/4SBS9/)。

这里发生了什么事？我制作了 3 个 div，它们彼此相邻排列。我给他们每人上了两节课。它们都有 class `icon`，它控制所有三个的行为。然后每个人都有第二个类来定义他们的个人行为。它们里面还有文本来演示如何用其他内容填充这些 div。

排列它们的重要一点是它们都是`float: left`并且它们都有一个集合`width`。设置宽度可能对您的布局很重要，除非内容都具有特定宽度 - 在这种情况下，您可能会很高兴使用`padding`.

如果我完全错过了您的观点，请尝试澄清，我会再试一次。

# c# - 在属性设置中保存数组仅返回最后一个对象

> ID：15776670
> 
> 赞同：0
> 
> 时间：2013-04-03T00:05:59.850
> 
> 标签：c#, winforms, visual-studio-2010

我有一个标签数组，我想保存这些标签的文本，以便在加载表单时将相同的信息加载到相同的标签中

这段代码：

```
 for (int i = 0; i < count; ++i)
    {
        Properties.Settings.Default.label = lblArray[i].Text;
        Properties.Settings.Default.Save();
    } 
```

继续覆盖最后一个对象，因为该属性不是其自身的数组。是否可以制作`Properties.Settings.Default.label`一个数组以便保存数据然后正确加载？

更新

RE：（下面给出的答案）

再次加载：

```
for (int i = 0; i < countHeadWaiters; ++i)
           {
               lblHeadWaiterHours[i].Text = Properties.Settings.Default.label[i];
           } 
```

但不返回任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:07:34.703

您遍历您的数组，并在每次迭代时覆盖存储在`Properties.Settings.Default.label`此处的先前值：

```
Properties.Settings.Default.label = lblArray[i].Text; 
```

您可以连接值并将其写入`Settings`. 这不是最好的解决方案，如果您碰巧在文本中有分隔符，这可能不起作用，但适用于简单的场景。

```
Properties.Settings.Default.label = string.Joint(Environment.NewLine, lblArray.Select(l => l.Text));
Properties.Settings.Default.Save(); 
```

您可能应该将您的设置命名为`labelsText`

或者您可以将`label`设置更改为`StringCollection`，以便您可以

```
 var strings = new StringCollection();

 lblArray.Select(l => l.Text).ToList().ForEach(text => strings.Add(text));

 Properties.Settings.Default.label = strings;
 Properties.Settings.Default.Save(); 
```

# python - 从方法返回 self.__dict__

> ID：15776672
> 
> 赞同：0
> 
> 时间：2013-04-03T00:06:11.370
> 
> 标签：python, deep-copy

我正在使用来自第三方的一个不错的小 python 模块，我遇到了一个让我的大脑完全扭曲的问题，我最关心的是数据完整性。

快速总结：有一个类方法大致如下：

```
def as_dict(self):
    ##adjust some attributes that don't make sense outside this scope        
    ##... ... ...
    return self.__dict__ 
```

我手动使用了这个方法的结果，但是有几个地方我传递了它，我不知道这些函数实际上对返回的字典做了什么。

现在，这是安全的，还是一些杂散的函数开始弄乱我的实例属性？我最初认为“自我”以某种方式保护了数据集，并且我正在传递数据的副本，但现在我想知道我是否正在传递对实例内存的引用？（里面有嵌套的可变对象）

我应该这样做：`return copy.deepcopy(self.__dict__)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:11:20.880

你是对的，实例字典像任何其他字典一样完全可变。像这样返回字典是不寻常的。也许出于某种原因，它打算在实例之外进行修改。似乎它可能是一个糟糕的设计。

有时人们会做这样可怕的事情，因为他们认为这比使用全局变量更好。

复制并不是一个很好的解决方案。它可能非常慢，并且只是隐藏了潜在的设计问题

复制的替代方法是包装 dict，这样它就不会被意外修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:09:43.993

如果您想确保通过副本，`copy.deepcopy(self.__dict__)`那将是要走的路。

# dos - 使用dos从两个文本文件中搜索和删除常用文本

> ID：15776674
> 
> 赞同：0
> 
> 时间：2013-04-03T00:06:17.087
> 
> 标签：dos, findstr

只想知道最简单的解决方案：

如何使用 DOS 删除 b.txt 中的 a.txt 中的文本（a.txt 和 b.txt 包含数百个文本）

a.文本

```
hfdjfhfjdfd
jjdhfjhkfkkf
jkfjjdfjdj 
```

b.txt

```
dkhfkhf
hfdjfhfjdfd
jjdhfjhkfkkf
jkfjjdfjdj
jddkbskdjksk
bsdbvbdsdj 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:11:13.520

DOS 不是首选方式。此链接包含有关如何从文件中删除数据的一些详细信息。我不是DOS专家。以下信息可能对您有所帮助。

[http://www.computing.net/answers/programming/delete-text-in-txt-files-with-dos/12552.html](http://www.computing.net/answers/programming/delete-text-in-txt-files-with-dos/12552.html)

以下内容来自上面给出的网站

```
If "in DOS" means Win XP/2K prompt, as I suspect, that can be achieved by For /F statement. Something as
For /F "tokens=1*" %%A in (Text_File) Do (
Echo horse %%B >> New_Text_File)
Move New_Text_File Text_File /Y
but you get a solution only if you can understand it. 
```

# ruby-on-rails - Ruby on Rails - 从 curl 创建 Net::HTTP 请求

> ID：15776681
> 
> 赞同：1
> 
> 时间：2013-04-03T00:07:04.787
> 
> 标签：ruby-on-rails, ruby, curl

我的卷曲很有效并且非常简单：

卷曲 -d

> "学期=20141暑期+2013+++++++++++++++++++++++++++++&courseid=&subject=IT++INFORMATION+TECHNOLOGY&college=&campus=1% 2C2%2C3%2C4%2C5%2C6%2C7%2C9%2CA%2CB%2CC%2CI%2CL%2CM%2CN%2CP%2CQ%2CR%2CS%2CT%2CW%2CU%2CV%2CX%2CZ&courselevel=&coursenum= &startTime=0600&endTime=2359&days=ALL&All=All+Sections" [http://www3.mnsu.edu/courses/selectform.asp](http://www3.mnsu.edu/courses/selectform.asp)

我正在尝试在 ruby​​ on rails 中使用 Net::HTTP 来做到这一点，我有这个：

```
uri = URI.parse("http://www3.mnsu.edu/courses/selectform.asp")
params = {"semester" => "20141Summer+2013+++++++++++++++++++++++++++++", 
          "subject" => "IT++INFORMATION+TECHNOLOGY",
          "campus" => "1%2C2%2C3%2C4%2C5%2C6%2C7%2C9%2CA%2CB%2CC%2CI%2CL%2CM%2CN%2CP%2CQ%2CR%2CS%2CT%2CW%2CU%2CV%2CX%2CZ",
          "startTime" => "0600",
          "endTime" => "2359",
          "days" => "ALL",
          "ALL" => "All+Sections"}

#=====  FORM POST  =====#
@response = Net::HTTP.post_form(uri, params) 
```

但是，每次运行时，它都会返回“Microsoft VBScript 运行时错误 800a0009” curl 永远不会那样做。

关于什么不匹配的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:39:30.993

看起来远程服务器不喜欢 Ruby 的用户代理。有两种方法可以解决：

**#1 修改 Net::HTTP 的用户代理：**

```
require 'net/http'
params = {"semester" => "20141Summer+2013+++++++++++++++++++++++++++++", 
    "subject" => "IT++INFORMATION+TECHNOLOGY",
    "campus" => "1%2C2%2C3%2C4%2C5%2C6%2C7%2C9%2CA%2CB%2CC%2CI%2CL%2CM%2CN%2CP%2CQ%2CR%2CS%2CT%2CW%2CU%2CV%2CX%2CZ",
    "startTime" => "0600",
    "endTime" => "2359",
    "days" => "ALL",
    "ALL" => "All+Sections"}

uri = URI.parse("http://www3.mnsu.edu/courses/selectform.asp")
url = uri.to_s + "?" + URI.encode_www_form(params)

req = Net::HTTP::Get.new(url)
req['User-Agent'] = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_2) AppleWebKit/534.51.22 (KHTML, like Gecko) Version/5.1.1 Safari/534.51.22"

res = Net::HTTP.start(uri.hostname, uri.port) {|http| http.request(req) } 
```

这可行，但会为您提供“302 对象已移动”消息，您必须手动执行该消息。

**#2 使用[机械化](http://mechanize.rubyforge.org/)宝石**

```
require 'rubygems'
require 'mechanize'
@agent = Mechanize.new
@agent.user_agent_alias = 'Mac Safari'
page = @agent.get 'http://www3.mnsu.edu/courses/selectform.asp?semester=20141Summer+2013+++++++++++++++++++++++++++++&courseid=&subject=IT++INFORMATION+TECHNOLOGY&college=&campus=1%2C2%2C3%2C4%2C5%2C6%2C7%2C9%2CA%2CB%2CC%2CI%2CL%2CM%2CN%2CP%2CQ%2CR%2CS%2CT%2CW%2CU%2CV%2CX%2CZ&courselevel=&coursenum=&startTime=0600&endTime=2359&days=ALL&All=All+Sections' 
```

这会让你进入“MSU 课程表——搜索课程”

# java - 下载的文件在用户媒体应用程序中不可见？

> ID：15776690
> 
> 赞同：0
> 
> 时间：2013-04-03T00:07:42.207
> 
> 标签：java, android, download

我需要使下载的文件（例如 mp3 图片等）在相册或媒体播放器等媒体应用程序中可见

它是文件 chmod 还是不可读？在这个类中一切都很好，但它只在下载文件夹中显示下载的文件

这是我的课

```
public class Download extends AsyncTask<String, Void, String> {
        ProgressDialog mProgressDialog;

        Context context;
        String file_url,file_name;

        public Download(Context context,String url , String file_name) {
        this.context = context;

        this.file_url  = url;
        this.file_name = file_name;

        }

        protected void onPreExecute() {
        mProgressDialog = ProgressDialog.show(context, "",
        "Please wait, Download …");
        }

        protected String doInBackground(String... params) {

        // //////////////////////
        try {

        URL url = new URL(file_url);
        HttpURLConnection c = (HttpURLConnection) url.openConnection();
        c.setRequestMethod("GET");
        c.setDoOutput(true);
        c.connect();
        String[] path = url.getPath().split("/");
        String mp3 = path[path.length - 1];
        int lengthOfFile = c.getContentLength();

        String PATH = Environment.getExternalStorageDirectory()+ "/downloads/" ;

        File file = new File(PATH);
        file.mkdirs();

        String fileName = file_name;

        File outputFile = new File(file , fileName);
        FileOutputStream fos = new FileOutputStream(outputFile);

        InputStream is = c.getInputStream();

        byte[] buffer = new byte[1024];
        int len1 = 0;
        while ((len1 = is.read(buffer)) != -1) {

        fos.write(buffer, 0, len1);
        }
        fos.close();
        is.close();

        } catch (IOException e) {
        e.printStackTrace();
        }

        return "done";
        }

        protected void onPostExecute(String result) {
        if (result.equals("done")) {
        mProgressDialog.dismiss();

        }
}

} 
```

任何的想法 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:14:12.463

您需要调用 MediaScannerConnection 并告诉它扫描您的文件。文档[在这里](http://developer.android.com/reference/android/media/MediaScannerConnection.html)。

# android - Android 库和模拟器

> ID：15776696
> 
> 赞同：0
> 
> 时间：2013-04-03T00:07:59.660
> 
> 标签：android, google-maps, google-maps-api-3, android-emulator

这个问题可能看起来很愚蠢，但我真的被困住了。要在我的模拟器上的应用程序上运行地图，我需要使用 Google Api 库和模拟器运行），但对于 textview 和我使用 Android 4.2 运行的其他内容。我如何运行整个应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:12:17.667

当您选择“Google API”作为您的 SDK 目标时，它也包括该级别的完整 Android API。

因此，如果您选择“Google APIs (level 17)”，那将包括 Android 4.2。

请注意，除了设置适当的 API 级别之外，您可能还需要其他库来支持特定的 Google 服务。例如，有关添加地图库的详细信息，请参阅[https://developers.google.com/maps/documentation/android/start ，或](https://developers.google.com/maps/documentation/android/start)[http://developer.android.com/google/gcm/gs.html#libs](http://developer.android.com/google/gcm/gs.html#libs)有关为 Google Cloud Messaging 添加帮助程序库的详细信息。

# php - txt 文件到 php 中带有分隔符的数组中

> ID：15776697
> 
> 赞同：0
> 
> 时间：2013-04-03T00:08:00.343
> 
> 标签：php, arrays, file, text, split

我的`ips.txt`文件包含以下内容：

```
radie1230: 116.79.254.131
Y_O_L_O: 122.149.157.42
midgetman63: 121.121.14.101, 124.112.115.69, 114.182.51.1, 114.118.55.131, 111.21.22.156
kypero: 121.211.61.118, 117.117.117.46, 121.214.109.247, 111.219.37.75
lythorous: 111.161.225.214, 12.111.184.71, 1.112.201.113, 11.137.214.184, 1.115.21.117, 12.115.241.212, 11.117.116.217 
```

此列表在左侧包含用户名，在右侧由`:`IP 分隔。IP 以 . 分隔`,`。

创建以下输出的实现是什么？

```
Array (
    [midgetman63] => Array
        (
            [0] => 121.121.14.101
            [1] => 124.112.115.69
            [2] => 114.182.51.1
            [3] => 114.118.55.131
            [4] => 111.21.22.156
        )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:18:04.330

尝试这个：

```
$dataFromFile = file('ips.txt');
$dataFromFile = array_map('trim', $dataFromFile);
$result = array();
foreach ($dataFromFile as $line) {
    list($user, $ips) = explode(':', $line, 2);
    $arrayOfIPs = explode(',', $ips);
    $result[trim($user)] = array_map('trim', $arrayOfIPs);
}

var_dump($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:42:45.533

如果你在文本文件的末尾没有空格，这应该是可行的。祝你好运。

```
$text = file_get_contents("ipsontext.txt");
$array = explode("\n",$text);
$finally_array = array();
foreach ($array as $key => $value) {
  $this_key = explode(":",$value);
  $this_values = explode(",",$this_key[1]);
   foreach($this_values as $tv) {
       $finally_array[$this_key[0]][] = $tv;
     }  
 }
 var_dump($finally_array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T00:15:50.737

也许这个？

```
<?php
$output = array();
$search = 'something';
$lines = file('file.txt');
foreach($lines as $line) {
  if(strpos($line, $search) !== false) {
    $d = explode(':', $line); 
    $s = explode(',', $d[1]); 
    foreach $s as $i { array_push($output, $i); }
  }
}

print_r($output);

?> 
```

# javascript - if 语句不正确

> ID：15776698
> 
> 赞同：0
> 
> 时间：2013-04-03T00:08:06.130
> 
> 标签：javascript, jquery, html, if-statement

如果estimatedVal 为空，我希望将变量estimatedVal 替换为avgList。我的代码有问题，因为下面的代码没有任何反应。如果我删除 if 语句，其他一切都有效：

```
$('#estimatedVal').html($(context).find('ul.estimates a:eq(1)').text()
                                + ' - ' + $(context).find('ul.estimates a:eq(0)').text());

if(estimatedVal == ' - '") {
$('#estimatedVal').html(avgList);
} else {
$('#estimatedVal').html(estimatedVal);
} 
```

我需要做什么才能使用 if 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:09:39.027

你有一个“孤独的双引号”，使用 IDE/代码编辑器并使用记事本退出：P

```
if(estimatedVal == ' - ') {
    $('#estimatedVal').html(avgList);
} else {
    $('#estimatedVal').html(estimatedVal);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:10:02.823

你的 if 中有一个杂散的双引号。

# ruby - 为什么这个数组的结果是 9 而不是数组的内容？

> ID：15776699
> 
> 赞同：0
> 
> 时间：2013-04-03T00:08:10.113
> 
> 标签：ruby, arrays

为什么：

```
code3_x = []
level = 7

(level + 2).times do |i|
# This is more what I want:
# code3_x[i] << i
# This works to demonstrate:
  code3_x << i
end 
```

返回：

```
=> 9 
```

为什么不？

```
=> [0,1,2,3,4,5,6,7,8,9] 
```

我创建一个数组作为`code3_x`& 我有一个值（*用有条件选择的数字*`x` *替换第二个，只是在示例中作为占位符重用）`i``i`*我想`x`在 code3_x 中的特定索引处插入。

*笔记：*

我正在尝试将以下 javascript 转换为 ruby *​​ 这只是一个更大函数的片段*

```
if ... conditions ...{
  code3_x[i] =2;
  mod_x -= h_pow;
}else... 
```

**更新：** *这里是我试图在 ruby​​ 中重新实现的整个 javascript 函数的要点的链接。* [https://gist.github.com/therocketforever/d1dca656f4579bc5baf3](https://gist.github.com/therocketforever/d1dca656f4579bc5baf3)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T00:31:55.807

我猜你的代码中有错字。`<<`未定义在`code3_x[i]`（即`nil`）上。`code3_x[i] = i`带有返回的版本，`9`因为返回值`#times`是您将消息发送到的对象（在这种情况下`(level + 2)`）。`code3_x`仍将设置：

```
(level + 2).times do |i|
  code3_x[i] = i
end # => 9
code3_x # => [0,1,2,3,4,5,6,7,8] 
```

如果您需要返回值，例如可以使用`#map`范围

```
(0..9).map{ |i| i * i } # => [0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:14:02.930

因为你正在做一个位移；）试试

```
code3_x[i] = i 
```

# javascript - 这是自动执行的功能吗？如果是，它们是如何工作的？

> ID：15776701
> 
> 赞同：0
> 
> 时间：2013-04-03T00:08:30.807
> 
> 标签：javascript, jquery

我在stackoverflow中找到了这段代码，但我仍然在问自己计时器是如何自动启动第一次的。

但是我注意到对此发表评论：

```
 //Optionally, activate each timer:
 //restart(i)(); 
```

将阻止计时器自动启动。

它可能是一个自动执行的功能，如果是的话。即使在这种情况下仍未单击按钮，自动执行功能是否会始终自动启动？

我还看到函数内部还有其他可能是自动执行的函数，有人可以解释一下这是如何工作的。

```
<!DOCTYPE html PUBLIC>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script src='//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>

</head>

<body>

<input type="submit" name="clear" value="Stop Timer" />
<input type="submit" name="reset" value="Restart Timer" />
<span id="count0">0</span>
<input type="submit" name="increment" value="Increment" />
<br />
<input type="submit" name="clear" value="Stop Timer" />
<input type="submit" name="reset" value="Restart Timer" />
<span id="count1">0</span>
<input type="submit" name="increment" value="Increment" />

<br />
<input type="submit" name="clear" value="Stop Timer" />
<input type="submit" name="reset" value="Restart Timer" />
<span id="count2">0</span>
<input type="submit" name="increment" value="Increment" />

<br />
<input type="submit" name="clear" value="Stop Timer" />
<input type="submit" name="reset" value="Restart Timer" />
<span id="count3">0</span>
<input type="submit" name="increment" value="Increment" />

<br />
<input type="submit" name="clear" value="Stop Timer" />
<input type="submit" name="reset" value="Restart Timer" />
<span id="count4">0</span>
<input type="submit" name="increment" value="Increment" />

<script>

    (function(){ //Anonymous function, to not leak variables to the global scope
        var defaultSpeed = 3000; //Used when missing
        var timerSpeed = [500, 1000, 2000, 4000, 8000];

        var intervals = [];

        function increase(i){
            return function(){
                var elem = $("#count"+i);
                elem.text(parseInt(elem.text()) + 1);
            }
        }
        function clear(i){
            return function(){
                clearInterval(intervals[i]);
            }
        }
        function restart(i){ //Start AND restart
            return function(){
                clear(i)();
                increase(i)();
                intervals[i] = setInterval(increase(i), timerSpeed[i]||defaultSpeed);
            }
        }

        // Manual increment
        $('input[name=increment]').each(function(i){
            $(this).click(function(){
                restart(i)();
                increase(i)();
            });
        });

        // Clear timer on "Clear"
        $('input[name=clear]').each(function(i) {
            $(this).click(clear(i));
        });

        // Restart timer on "Restart"
        $('input[name=reset]').each(function(i) {
            $(this).click(restart(i));

            //Optionally, activate each timer:
            restart(i)();
        });

    })();

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:34:22.717

代码中只有一个自执行函数，它是代码顶部的包装函数（//匿名函数，不会将变量泄漏到全局范围内）。

自执行函数可能有格式`(function(parameters){})(arguments list);`.

像这样的函数`restart`不是自执行函数，它们不是自动调用的，而是手动调用的。这些函数是返回另一个函数的函数，称为[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)。

因此，如果您查看语句`restart(i)();`，则会发生两件事。1.`restart(i)`返回一个函数 2\. 我们使用第二组括号调用函数。
为了更好地理解，我们可以将此语句分为两部分

```
var fn = restart(i);
fn(); 
```

**更新：** 由于以下代码，计时器会自动启动

```
//Optionally, activate each timer:
restart(i)(); 
```

它将启动每个计时器

# objective-c - iPhone iOS6如何将Image IO类型“常驻脏内存”返回给OS？

> ID：15776704
> 
> 赞同：4
> 
> 时间：2013-04-03T00:09:18.897
> 
> 标签：objective-c, memory-management, ios6, memory-profiling

我正在观看处理高级内存分析的 WWDC 2010 视频（**会话 311**）：

![在此处输入图像描述](https://i.stack.imgur.com/Zvf2C.png)

在视频的 45:00 左右，性能工程师讨论了如何处理您的应用已加载到 RAM 中的“驻留脏内存”。工程师建议，为了响应内存警告，您的应用程序应该清除它。工程师将他的自定义类“flush”方法粘贴到`didReceiveMemoryWarning`其中，一切都很好，但代码并没有真正提供任何关于**如何释放内存的示例。**

我的问题是 -**如何刷新“Image IO”使用的大块脏内存？**：

这里有大约 74 mb 的内存，只是坐在肮脏的地方（现在将近 6 分钟），等待有人将它返回到 iOS6。它什么也没有发生。由于它不会自行消失，我需要知道如何将其返回到 iOS。

![在此处输入图像描述](https://i.stack.imgur.com/H4Zj0.png)

这些块似乎源于这样的代码和（可能是其他与图像相关的操作）。

```
 UIImage *screenshot = nil;

    @autoreleasepool {

        if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
            UIGraphicsBeginImageContextWithOptions(iPhoneRetinaIconSize, NO, [UIScreen mainScreen].scale);

        else
            UIGraphicsBeginImageContext(iPhoneRetinaIconSize);

        [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
        screenshot = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

    } 
```

问题是有大量内存存在，加载到 RAM 中，在应用程序崩溃之前无法返回到操作系统。

对于 webview 相关的脏内存，我发现这可能有效：

```
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

    [[NSURLCache sharedURLCache] removeAllCachedResponses];
    [[NSURLCache sharedURLCache] setDiskCapacity:0];
    [[NSURLCache sharedURLCache] setMemoryCapacity:0];
    // Dispose of any resources that can be recreated.
} 
```

是否有 UIImage、CALayer 或 UIGraphics 的等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T21:51:00.087

我远不是这些问题的专家，但根据我使用您提供的代码进行的测试，我想说您只需要发布`UIImage`在这些代码块中创建的 s 即可。

据我了解，`Image IO`或`GC raster data`标记的内存块实际上只是图像的基础数据（`UIImage`作为`UIKit`这些数据的包装器）。所以要释放内存，释放图像。

我通过使用您的代码创建一堆`UIImage`s 来测试这一点，模拟一个释放所有创建图像的内存警告：

![高达 1.5GB 的 CG 数据](https://i.stack.imgur.com/WxLCE.png)
![全没了 ！](https://i.stack.imgur.com/v8vYP.png)

图像不言自明。释放我`UIImage`的 s（在 ~00:08）`GC raster data`从常驻内存中删除了大块。

因为从您的 UI 中完全删除图像可能不是用户体验的最佳解决方案，也许您可​​以在收到内存警告时尝试缩小最大的图像，较低的分辨率会导致较小的内存占用。另一个想法（同样这取决于您的图像的用途）可能是将图像转储到磁盘，然后在需要时加载它们。

希望有帮助。

# mysql - 获取关系不为 NULL 的列

> ID：15776705
> 
> 赞同：0
> 
> 时间：2013-04-03T00:09:24.043
> 
> 标签：mysql, sql-server-2008, code-translation

我有一个从 SQL Server 迁移到 MySQL 的数据库。我在 SQL Server 中有一个现有查询来获取关系不为空的列的值，我的意思是，如果两个表之间的关系为空，那么这意味着应该与另一个表存在关系。

这是我使用的查询：

```
SELECT C.expediente, 
       C.status, 
       Sum(M.monto)                             AS monto, 
       Sum(M.interes)                           AS interes, 
       Sum(M.iva)                               AS iva, 
       Sum(M.capital)                           AS capital, 
       M.fecha_mov, 
       AB.tipo_abono, 
       AB.id_deposito, 
       Isnull(Min(tg.nombre), Min(tp.nombcomp)) AS nombreGrupo 
FROM   movimientos AS M 
       JOIN acreditados AS A 
         ON A.id_acreditado = M.id_acreditado 
       JOIN creditos AS C 
         ON C.id_credito = A.id_credito 
       JOIN abonos AS AB 
         ON AB.id_movimiento = M.id_movimiento 
       OUTER apply (SELECT TOP 1 G.nombre 
                    FROM   grupos G 
                    WHERE  G.id_credito = C.id_credito) tg 
       OUTER apply (SELECT TOP 1 P.nombres + ' ' + P.apellido_paterno + ' ' 
                                 + P.apellido_materno AS NombComp 
                    FROM   personas P 
                    WHERE  A.id_persona = P.id_persona) tp 
GROUP  BY M.fecha_mov, 
          AB.tipo_abono, 
          AB.id_deposito, 
          C.expediente, 
          C.status 
ORDER  BY M.fecha_mov 
```

但似乎 MySQL 没有`OUTER APPLY`or `ISNULL`。如何将此查询转换为 MySQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:38:12.097

您有几个问题需要审查：

1 - `APPLY`MySQL 不支持该运算符。但是，对于您给定的用法，看起来您可能只使用`LEFT OUTER JOIN`.

2-MySQL 不支持`TOP`。相反，使用`LIMIT`. 但是，我认为在这种情况下您不需要它，因为您正在使用`MIN`这些字段中的每一个。

3 - 要在 MySQL 中连接字符串，请使用`CONCAT`vs `"+"`。

4 - 最后，我更喜欢`COALESCE`在 MySQL 中使用来检查`NULLs`. 不过还有其他选择。

所以把它们放在一起，这应该很接近（未经测试）：

```
SELECT C.expediente, 
       C.status, 
       Sum(M.monto)                             AS monto, 
       Sum(M.interes)                           AS interes, 
       Sum(M.iva)                               AS iva, 
       Sum(M.capital)                           AS capital, 
       M.fecha_mov, 
       AB.tipo_abono, 
       AB.id_deposito, 
       COALESCE(MIN(tg.nombre), MIN(tp.nombcomp)) AS nombreGrupo 
FROM   movimientos AS M 
       JOIN acreditados AS A 
         ON A.id_acreditado = M.id_acreditado 
       JOIN creditos AS C 
         ON C.id_credito = A.id_credito 
       JOIN abonos AS AB 
         ON AB.id_movimiento = M.id_movimiento 
       LEFT OUTER JOIN (
            SELECT id_credito, nombre 
            FROM   grupos
            ) tg ON tg.id_credito = C.id_credito 
       LEFT OUTER JOIN (
            SELECT id_persona, CONCAT(nombres,' ',apellido_paterno,' ',apellido_materno) AS NombComp 
            FROM   personas 
            ) tp ON A.id_persona = tp.id_persona
GROUP  BY M.fecha_mov, 
          AB.tipo_abono, 
          AB.id_deposito, 
          C.expediente, 
          C.status 
ORDER  BY M.fecha_mov 
```

您可能不需要其中的一些字段`GROUP BY`——只`DISTINCT`需要您的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T01:23:00.433

我认为这会将其变成有效的 MySQL 查询：

```
SELECT C.expediente, C.status, Sum(M.monto) AS monto, Sum(M.interes) as interes, 
       Sum(M.iva) as iva, Sum(M.capital) as capital, 
       M.fecha_mov, AB.tipo_abono, AB.id_deposito, 
       coalesce(Min(tg.nombre), Min(tp.nombcomp)) AS nombreGrupo 
FROM   movimientos  M join
       acreditados A 
       ON A.id_acreditado = M.id_acreditado join
       creditos C 
       ON C.id_credito = A.id_credito join
       abonos AB 
       ON AB.id_movimiento = M.id_movimiento join
       (select g.id_credito, max(g.nombre) -- arbitrary nombre
        from grupos g
        group by g.id_credito
       ) tg
       on tG.id_credito = C.id_credito join
       (SELECT P.id_persona, concat_ws(' ', P.nombres, P.apellido_paterno, P.apellido_materno) AS NombComp 
        FROM   personas P 
        group by p.id_persona
       ) tp
       on A.id_persona = tP.id_persona
GROUP  BY M.fecha_mov, AB.tipo_abono, AB.id_deposito, C.expediente, C.status 
ORDER  BY M.fecha_mov 
```

我将其替换为`isnull()`--`coalesce()`如果您要在数据库之间切换，请尽可能使用标准 SQL。我将`+`for 连接替换为`concat_ws()`. 注意有一个小的区别。. . 如果其中一个字段为 NULL，则 MySQL 值会将其视为 ''。

我用`cross apply`聚合替换了。您在`top 1`没有 的情况下使用`order by`，因此这会获取任意行。所以，这个版本任意选择最大值。

# jquery - 如何使用 jQuery 将 id 用作变量

> ID：15776709
> 
> 赞同：2
> 
> 时间：2013-04-03T00:09:51.543
> 
> 标签：jquery, html, variables

我不确定我是否会很好地描述这一点......但是：

我有一个 div，我想在我的 jQuery 函数中使用 div 的 id 作为变量。

有一个与 ID 值同名的变量，并且它已经被声明为一个数字.. 此刻我得到 NaN。

我只需要变量 whatIsIt 作为 aqstn 登陆函数 - jsfiddle 有一个带有 id 的警报.. 但它不会转化为代码中的数量.. 如果你知道我的意思.! ?

为了更好地解释，这里有一个 js fiddle 的问题！ [http://jsfiddle.net/CpFqk/](http://jsfiddle.net/CpFqk/)

jQuery：

```
$('.add').click(function() {

    whatIsIt = $(this).attr('id');
    alert (whatIsIt);
    base = (base+whatIsIt);
    // base = (base+aqstn); --> This works OK
    // Some maths to get +- 15%
    fifteen = (base*.15)
    price1 = (base+fifteen)
    price2 = (base-fifteen)

    $(".price span.more").html(price1);
    $(".price span.less").html(price2);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:15:55.933

如果你想使用 id 作为变量，你可以使用一个对象

```
var data = {aqstn : 236}; 
```

然后从数据对象中获取值

```
whatIsIt = data[$(this).attr('id')]; // or data[this.id] 
```

[小提琴](http://jsfiddle.net/wirey00/rgx9f/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:16:56.950

您不能以这种方式在 HTML 和 Javascript 之间共享变量。相反，您将需要使用`rel`属性来保存和指定整数值，如下所示：

[http://jsfiddle.net/qwFCk/1/](http://jsfiddle.net/qwFCk/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T00:22:20.897

如果您`var`从 before中删除，`aqstn`它将作为 的属性使用，`window`并且您可以通过命名参数访问它。`window[whatIsIt]`

不过，我完全不建议您这样做；我只是提供它作为最后的手段。有线的答案是更正确的答案。

[http://jsfiddle.net/CpFqk/1/](http://jsfiddle.net/CpFqk/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T00:34:27.280

您必须将变量“aqstn”放入诸如窗口（或任何）之类的对象中：

```
window["aqstn"] = 236; 
```

然后使用 id 作为这个对象的键

```
whatIsIt = $(this).attr('id');
alert( window[whatIsIt] ); 
```

我不知道你的目的是什么，但可能有更聪明的方法可以做到这一点:) 你看过[jQuery.data()](http://api.jquery.com/jQuery.data/)方法吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T19:42:09.640

因为一旦我添加所有价格，将这个 id 字符串转换为变量似乎不会很整洁，这是另一种方法。它使价格远离 html。

检查 id == 变量名（字符串）是否定义了计算中使用的新变量。这意味着为每个价格定义一个，但是.. :/

```
if(whatIsIt=='ovrhead'){ var jammin = ovrhead };
if(whatIsIt=='aqstn'){ var jammin = aqstn };

base = (base+(jammin)); 
```

# debugging - 逐步执行 Geany 中的每条指令

> ID：15776711
> 
> 赞同：1
> 
> 时间：2013-04-03T00:09:56.010
> 
> 标签：debugging, geany

使用 Geany IDE，是否可以在运行每条指令时单步执行函数中的每条指令？我知道很多 IDE（包括 Eclipse 和 Visual Studio）都有这个功能，但我还没有在 Geany 中找到它。

```
function doStuff(){
    for(var i = 0; i < 10; i++){
        console.log("Is it possible to step through this JavaScript function in Geany?");
    }
}
doStuff(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T04:21:24.280

较旧的 GDB 插件（Geany-GDB 和调试器）不支持 Windows，因为它们依赖于非跨平台 libvte，但最新的名为[Scope](https://github.com/geany/geany-plugins/blob/master/scope/README)的插件应该可以在 Windows 上运行（至少根据该自述文件）。我知道作者经常在 Windows 上工作，所以很可能是这种情况，但它显然没有内置的终端模拟器，可以在 *nix 上使用该插件。

# android - 如何在 NumberPicker 中一次显示 3 个以上的值

> ID：15776716
> 
> 赞同：4
> 
> 时间：2013-04-03T00:10:28.570
> 
> 标签：android, numberpicker

我正在创建一个数字选择器，如下图所示，但如果空间可用，我想显示 3 个以上的值。这个选择器有 20 个项目，并且有足够的空间来显示超过 3 个值。这可以使用 NumberPicker 完成吗？

![在此处输入图像描述](https://i.stack.imgur.com/LT0nK.png)

* * *

## 回答 #1

> 赞同：-7
> 
> 时间：2018-11-06T11:26:48.077

只需以编程方式设置`numberPicker.setWheelItemCount(10);`

# android - 如何实现 ConnectionException -Android

> ID：15776717
> 
> 赞同：0
> 
> 时间：2013-04-03T00:10:30.643
> 
> 标签：android, json, return, connectionexception

我正在与 php mysql travez 中的数据库通信以在 ListView 中显示结果，但我正在尝试在 3G 或 WIFI 但应用程序无法连接时实现 ExeptionConnection，返回到以前的 Activity 并显示 Toast。但不是如何在我的代码中实现它，我只能实现 JsonExeption。这是我的代码：

```
protected String doInBackground(String... args) {

        List<NameValuePair> params = new ArrayList<NameValuePair>();

        JSONObject json = jParser.makeHttpRequest(url_list_rs, "GET",
                params);

        Log.d("All Products: ", json.toString());

        try {

            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {

                daftar_rs = json.getJSONArray(TAG_DAFTAR_RS);
                for (int i = 0; i < list_rs.length(); i++) {
                    JSONObject c = list_rs.getJSONObject(i);

        //Process Code
                }
            } else { 

            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;

    } 
```

其中 url_list_rs 是我的 php 的 url。我可以在哪里实施 ExeptionConnection？任何人都可以帮忙吗？感谢大师！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:26:28.567

如果要创建自己的异常，可以执行以下操作：

```
//create a new Exception class    
public class ConnectionException extends Exception {
    public ConnectionException(String message){
         super(message);
    }
} 
```

在您的 makeHttpRequest 方法中

```
if(no connection) { //check connection
    throw new ConnectionException ("No connection!");
} else { ... } 
```

最后，try-catch 块

```
try {
    JSONObject json = jParser.makeHttpRequest(url_list_rs, "GET",
            params);
catch(ConnectionException ex) {
    ex.printStackTrace();
} 
```

*注意：我不确定这是否是最佳做法。*

# java - 使用 JUnit 类别与简单地在单独的类中组织测试

> ID：15776718
> 
> 赞同：4
> 
> 时间：2013-04-03T00:10:36.440
> 
> 标签：java, junit, junit4, categories

我有两个逻辑类别的测试：简单的功能单元测试（通过/失败）和仅用于度量/诊断的基准性能测试。

目前，我在一个类中拥有所有测试方法，称之为`MyTests`：

```
public class MyTests 
{
    @Test
    public void testUnit1()
    {
        ...

        assertTrue(someBool);
    }

    @Test
    public void testUnit2()
    {
        ...

        assertFalse(someBool);
    }

    @Test
    @Category(PerformanceTest.class)
    public void bmrkPerfTest1()
    {
        ...
    }

    @Test
    @Category(PerformanceTest.class)
    public void bmrkPerfTest2()
    {
        ...
    }
} 
```

然后我有一个`UnitTestSuite`定义为

```
@RunWith(Categories.class)
@Categories.ExcludeCategory(PerformanceTest.class)
@SuiteClasses({ MyTests.class })
public class UnitTestSuite {} 
```

和一个`PerformanceTestSuite`

```
@RunWith(Categories.class)
@Categories.IncludeCategory(PerformanceTest.class)
@SuiteClasses({ MyTests.class })
public class PerformanceTestSuite {} 
```

这样我就可以将单元测试`Ant`与性能测试分开运行（我认为不需要包含 Ant 代码）。

这意味着我总共有四个类（MyTests、PerformanceTest、PerformanceTestSuite 和 UnitTestSuite）。我意识到我可以将所有单元测试放在一个类中，并将基准测试放在另一个类中并完成它，而不会增加类别和额外注释的额外复杂性。我在 Ant 中按类名调用测试，即不在一个包中运行所有测试。

它是否有意义，使用注释按类别组织它的原因是什么，或者如果我只是在两个简单的测试类中重构它会更好吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T19:46:09.120

关于是否将测试分为两类的问题：

由于它们显然是*非常不同类型的测试*（单元测试和性能测试），因此无论如何我都会将它们放在不同的类中，仅出于这个原因。

一些进一步的思考：

不过，我不认为使用`@Category`注释是一个坏主意。在一个包含数十个或数百个包含测试的类的更典型的项目中，我要做的是用 注释测试*类*（而不是方法）`@Category`，然后[使用 ClassPathSuite 库](https://stackoverflow.com/a/2176791/56285)来避免对测试进行分类的重复工作。（并且可能[使用 Ant 按类别运行测试](https://stackoverflow.com/questions/6226026/how-to-run-all-junit-tests-in-a-category-suite-with-ant?lq=1)。）

如果您只有两个测试课程，那当然没关系。您可以保留类别和套件，或者将它们扔掉（正如您所说的那样，测试是在 Ant 中按类名运行的），如果有额外的类让您感到厌烦。我会保留它们，并转向上述场景，因为通常（在一个健康的项目中）随着时间的推移会积累更多的测试。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:56:22.607

如果您只有两个测试课程，那么可能没关系。我从事的项目有 50-60 节课。按名称列出它们会很累。您可以使用文件名模式，但我觉得注释更清晰。

# android - 如何在意图过滤器中指定不接收额外为空的意图

> ID：15776722
> 
> 赞同：0
> 
> 时间：2013-04-03T00:11:00.417
> 
> 标签：android, android-intent, intentfilter

我有一个安卓应用程序。出于某种原因，当意图的额外内容为空时，我希望我的应用程序不显示在选择器对话框中。实际上，null extra 会使我的应用程序崩溃。有什么方法可以在意图过滤器中指定此类信息？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:16:23.650

我想不是。检查 null 怎么办？

```
if( getIntent().getExtras() != null) {
  //your code
} 
```

# java - 一个异常的多个 Java 根本原因

> ID：15776730
> 
> 赞同：4
> 
> 时间：2013-04-03T00:11:24.157
> 
> 标签：java, exception, exception-handling

我有一个有趣的场景，我在 catch 子句中设置了 HttpServletResponse 错误。“response.sendError(..)”也会引发异常。在异常处理期间处理异常以保留原始异常细节的最佳方法是什么？

我有这样的事情：

```
try {
...
} catch(Exception e) {
  try {
      response.sendError(500);
    } catch(IOException e2) {
      //Can I do something like:
      //'throw new ServletException(e,e2)' here?
    }
} 
```

换句话说，将两个异常中的信息捆绑到下一个抛出的异常中的最佳方法是什么？我不想在处理第二个异常时丢失第一个异常的信息。

一般来说，多个 try catch 块对于可读性来说似乎很糟糕。理想情况下希望避免这种混乱。总是可以将嵌入的 try/catch 捆绑在一个方法中......虽然看起来仍然很糟糕，并且不能解决保留所有异常细节的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T00:16:48.163

尝试：

```
try {
...
} catch(Exception e) {
  try {
      response.sendError(500);
    } catch(IOException e2) {
      e2.initCause(e);
      throw e2;
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-01-15T20:46:33.813

如果异常已经有原因，则使用`initCause()`不会消除工作。相反，您可以使用`addSupressed()`将异常包含在不同异常的堆栈跟踪中。

```
try {
...
} catch(Exception e) {
  try {
      response.sendError(500);
    } catch(IOException e2) {
      e.addSuppressed(e2);
      throw e;
    }
} 
```

# javascript - 如何获取随机用户输入变量以在 html 中返回

> ID：15776731
> 
> 赞同：0
> 
> 时间：2013-04-03T00:11:24.313
> 
> 标签：javascript, html, css

好的，所以基本上我要做的是创建一个 html 文档，该文档允许用户通过任意数量的选择输入他们想要的任何内容，然后单击一个按钮，然后随机选择他们输入的内容之一。我的女朋友真的很优柔寡断，有时当我不在的时候需要几个小时才能做出选择，所以我想我会写一个代码来帮助她。我不确定该怎么做。我已经搜索了几个小时，但没有发现任何关于此的信息。对不起，如果这是非常简单的事情，但任何帮助将不胜感激。到目前为止，我将其作为获取文本框并通过单击按钮显示新文本框的代码

`

```
<html>
<head> 
<script type="text/javascript">
var instance = 1;    
function newTextBox(element)
{               
instance++; 
var newInput = document.createElement("INPUT");
newInput.id = "text" + instance;
newInput.name = "text" + instance;
newInput.type = "text";
//document.body.write("<br>");
document.body.insertBefore(newInput, element);

document.body.insertBefore(document.createElement("br"), element);
            }
</script>
</head>

<body>
<input id="text2" type="text" name="text1"/> <br>
<input type="button" id="btnAdd" value="New text box" onclick="newTextBox(this);" />
</body>
</html>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:20:26.167

我认为这应该有效：

## HTML：

```
<input type="button" value="Get Random" onclick="selectRandomInput();"/> <!-- select a random element among [1,instance] elements. --> 
```

## JS：

```
function selectRandomInput(){
    var selectedId=Math.floor(Math.random()*instance+1);
    for(var i=0;i<document.getElementsByTagName("input").length;i++){
        element=document.getElementsByTagName("input")[i];
        if(element.id!=selectedId && element.type!="button")
            element.style.display="none";
    }
} 
```

**PS：**更好的解决方案是添加一个类来输入文本元素，并遍历具有此类的那些而不是所有输入标签。

# regex - 如何将字符串向量转换为标题大小写

> ID：15776732
> 
> 赞同：11
> 
> 时间：2013-04-03T00:11:28.303
> 
> 标签：regex, r, replace

我有一个小写的字符串向量。我想将它们更改为标题大小写，这意味着每个单词的第一个字母都会大写。我已经设法用双循环来做到这一点，但我希望有一种更有效和更优雅的方式来做到这一点，也许是一个带有`gsub`正则表达式的单线。

这是一些示例数据，以及有效的双循环，然后是我尝试过的其他无效的东西。

```
strings = c("first phrase", "another phrase to convert",
            "and here's another one", "last-one")

# For each string in the strings vector, find the position of each 
#  instance of a space followed by a letter
matches = gregexpr("\\b[a-z]+", strings) 

# For each string in the strings vector, convert the first letter 
#  of each word to upper case
for (i in 1:length(strings)) {

  # Extract the position of each regex match for the string in row i
  #  of the strings vector.
  match.positions = matches[[i]][1:length(matches[[i]])] 

  # Convert the letter in each match position to upper case
  for (j in 1:length(match.positions)) {

    substr(strings[i], match.positions[j], match.positions[j]) = 
      toupper(substr(strings[i], match.positions[j], match.positions[j]))
  }
} 
```

这行得通，但它似乎异常复杂。我只是在尝试更直接的方法失败后才使用它。以下是我尝试过的一些事情以及输出：

```
# Google search suggested \\U might work, but evidently not in R
gsub("(\\b[a-z]+)", "\\U\\1" ,strings)
[1] "Ufirst Uphrase"                "Uanother Uphrase Uto Uconvert"
[3] "Uand Uhere'Us Uanother Uone"   "Ulast-Uone"                   

# I tried this on a lark, but to no avail
gsub("(\\b[a-z]+)", toupper("\\1"), strings)
[1] "first phrase"              "another phrase to convert"
[3] "and here's another one"    "last-one" 
```

正则表达式捕获每个字符串中的正确位置，如调用所示`gregexpr`，但替换字符串显然没有按预期工作。

如果你还不能说，我对正则表达式比较陌生，希望能帮助你如何让替换正常工作。我还想学习如何构建正则表达式以避免在撇号后捕获字母，因为我不想更改这些字母的大小写。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-03T00:19:19.023

主要问题是您丢失了`perl=TRUE`（并且您的正则表达式略有错误，尽管这可能是试图解决第一个问题的结果）。

如果您的代码最终在一些奇怪的（[对不起，爱沙尼亚人](https://stackoverflow.com/questions/6799872/how-to-make-grep-a-z-independent-of-locale)）语言环境中运行，而不是字母表的最后一个字母，则使用`[:lower:]`而不是稍微安全一些......`[a-z]``z`

```
re_from <- "\\b([[:lower:]])([[:lower:]]+)"
strings <- c("first phrase", "another phrase to convert",
             "and here's another one", "last-one")
gsub(re_from, "\\U\\1\\L\\2" ,strings, perl=TRUE)
## [1] "First Phrase"              "Another Phrase To Convert"
## [3] "And Here's Another One"    "Last-One" 
```

您可能更喜欢使用`\\E`（停止大写）而不是`\\L`（开始小写），具体取决于您要遵循的规则，例如：

```
string2 <- "using AIC for model selection"
gsub(re_from, "\\U\\1\\E\\2" ,string2, perl=TRUE)
## [1] "Using AIC For Model Selection" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-03T00:15:40.313

如果不使用`regex`，帮助页面`tolower`有两个示例函数可以做到这一点。

更强大的版本是

```
capwords <- function(s, strict = FALSE) {
    cap <- function(s) paste(toupper(substring(s, 1, 1)),
                  {s <- substring(s, 2); if(strict) tolower(s) else s},
                             sep = "", collapse = " " )
    sapply(strsplit(s, split = " "), cap, USE.NAMES = !is.null(names(s)))
}
capwords(c("using AIC for model selection"))
## ->  [1] "Using AIC For Model Selection" 
```

要使您的`regex`方法（几乎）起作用，您需要设置 `perl = TRUE)

```
gsub("(\\b[a-z]{1})", "\\U\\1" ,strings, perl=TRUE)

[1] "First Phrase"              "Another Phrase To Convert"
[3] "And Here'S Another One"    "Last-One" 
```

但是您可能需要更好地处理撇号

```
sapply(lapply(strsplit(strings, ' '), gsub, pattern = '^([[:alnum:]]{1})', replace = '\\U\\1', perl = TRUE), paste,collapse = ' ') 
```

快速搜索 SO 发现[https://stackoverflow.com/a/6365349/1385941](https://stackoverflow.com/a/6365349/1385941)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-03T00:27:16.447

这里已经有了很好的答案。这是使用报告包中的便利功能的一个：

```
strings <- c("first phrase", "another phrase to convert",
    "and here's another one", "last-one")

CA(strings)

## > CA(strings)
## [1] "First Phrase"              "Another Phrase To Convert"
## [3] "And Here's Another One"    "Last-one" 
```

尽管它没有大写一个，因为出于我的目的这样做没有意义。

**更新**我管理具有 (title case) 函数的**qdapRegex**包，该`TC`函数执行真正的标题大小写：

```
TC(strings)

## [[1]]
## [1] "First Phrase"
## 
## [[2]]
## [1] "Another Phrase to Convert"
## 
## [[3]]
## [1] "And Here's Another One"
## 
## [[4]]
## [1] "Last-One" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-03T04:00:27.997

为了好玩，我会再加入一个：

```
topropper(strings)
[1] "First Phrase"              "Another Phrase To Convert" "And Here's Another One"   
[4] "Last-one"  

topropper <- function(x) {
  # Makes Proper Capitalization out of a string or collection of strings. 
  sapply(x, function(strn)
   { s <- strsplit(strn, "\\s")[[1]]
       paste0(toupper(substring(s, 1,1)), 
             tolower(substring(s, 2)),
             collapse=" ")}, USE.NAMES=FALSE)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-26T20:11:56.467

这是另一种基于`stringr`包装的单线：

```
str_to_title(strings, locale = "en") 
```

`strings`你的字符串向量在哪里。

[来源](https://stringr.tidyverse.org/reference/case.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-13T06:33:28.540

将任何情况转换为任何其他情况的最佳方法是`snakecase`在 r 中使用 package。

只需使用该软件包

```
library(snakecase)
strings = c("first phrase", "another phrase to convert",
        "and here's another one", "last-one")

to_title_case(strings)

## [1] "First Phrase"              "Another Phrase to Convert" 
## [3] "And Here s Another One"    "Last One" 
```

继续编码！

# php - 使用 PHP cURL 发布数据

> ID：15776734
> 
> 赞同：0
> 
> 时间：2013-04-03T00:11:41.787
> 
> 标签：php, curl

如果页面中有 2 个表单域，有 2 个不同的提交按钮，我如何告诉 cURL 提交哪个表单？

例子

```
<form method="post" action="index.php">
   <input type="text" name="age">
   <input type="submit" name="agree">
   <input type="submit" name="disagree">
</form> 
```

到目前为止我的代码

```
//create array of data to be posted
$post_data['age'] = '5';

//traverse array and prepare data for posting (key1=value1)
foreach ( $post_data as $key => $value) {
    $post_items[] = $key . '=' . $value;
}

$post_string = implode ('&', $post_items);

curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:27:49.000

您可以将数组传递给`CURLOPT_POSTFIELDS`并让 php 的 curl 扩展完成编码等脏活。

这样可以避免对字符串进行编码！

`curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_data);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:31:14.693

无需知道必须发布 HTML 中的哪个表单。

形式可以由方法、操作和/或字段集确定。

PS Clicked 命名提交也正在发送。所以添加`post_data['agree'] = '';`.

PPS 不要将其用于垃圾邮件。

# ruby-on-rails - 在 Rails 中设置表单外的字段值

> ID：15776738
> 
> 赞同：1
> 
> 时间：2013-04-03T00:12:02.787
> 
> 标签：ruby-on-rails, ruby, forms, activerecord

所以我有一个带有`Post`模型的 Rails 应用程序。其中一个字段是`collection_id`.

每个帖子都应具有发布时最新集合的 ID。如果我在后端有那个 ID，并且我删除了 的表单字段`collection_id`，我如何确保这个 ID 进入数据库而不在 Rails 前端有一个 hidden_​​field？

隐藏字段的问题是用户可以使用网络检查器来更改值。这需要安全。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T00:15:05.707

如果您在后端有该 ID，则可以在保存之前将其传递到控制器操作中：

```
 @post = Post.create(params[:post])
   @post.controller_id = variable_holding_the_id
   if @post.save ... 
```

或者在某些情况下，您可以通过回调在模型中执行此操作：

```
 after_create :set_collection_id

   def set_collection_id
      self.collection_id = variable_holding_the_id
   end 
```

# php - 脚本无法从目录中读取文件

> ID：15776740
> 
> 赞同：2
> 
> 时间：2013-04-03T00:12:06.227
> 
> 标签：php, exif

我有一个脚本，它从存储在给定目录中的照片中提取 Exif 数据，然后在网页上显示带有 exif 信息的图像。

这是检索 exif 数据的脚本部分，此示例是硬编码图像：

```
 $Image = 'original/raleighbike.JPG';

    echo "$Image";

    $exif = exif_read_data($Image, 0, true); 
```

这有效并显示 exif 数据。（“回声”只是为了验证是否正在设置正确的图像以在下一部分中检索 - 这是我遇到问题的地方。）

我现在使用相同的脚本从先前脚本中上传并存储在同一目录中的图像中获取 exif。上传脚本设置一个包含图像名称和位置的变量 ($Image9)，exif 提取脚本现在如下所示：

```
$Image = $Image9;

echo "$Image";

$exif = exif_read_data($Image, 0, true); 
```

我遇到的问题是“回声”打印了正确的图像名称和位置，但 exif 数据为空并且错误日志显示：

```
[02-Apr-2013 18:45:29 America/Chicago] PHP Warning:  exif_read_data() [<a href='function.exif-read-data'>function.exif-read-data</a>]: Unable to open file in /home2/webi8726/public_html/domain.com/sqlsidebar/displayexif.php on line 23 
```

第 23 行是上面引用部分的最后一行。

我不明白为什么打开硬编码图像没有问题，但无法打开由变量标识的图像 - 即使变量包含正确的信息并且指向同一个硬编码文件。

任何人都可以提出问题发生的原因。

* * *

好的-今天又玩了一些，这就是我发现的。

1 - 在上传和存储 jpg 的脚本中，我将它设置的变量更改为 $photo。$photo 应该包含 jpg 的名称及其存储的目录。我还设置了一个名为 $thumb 的不同变量，其中包含由上传脚本创建和存储的 jpg 缩略图的名称和位置。

2 - 我更改了 exif 提取脚本以使用 $photo 变量创建一个名为 $Image 的变量，该变量在 exif 提取后在脚本中的各个点使用 - 例如获取和显示图像以及将图像详细信息存储在sql数据库。

3 - 我设置了一些“回声”命令来验证变量的内容，以及确认文件是否存在。

这是现在的脚本代码：

```
 $Image = $photo;

    echo "$photo";

    echo $Image;

    echo file_exists($Image) ? 'ok' : ' image file not found';

    echo file_exists($photo) ? 'ok' : '  photo file not found';

    echo $thumb;

    echo file_exists($thumb) ? 'ok' : '  thumb file not found';

    $exif = exif_read_data($photo, 0, true); 
```

生成的回显字符串显示以下内容

```
original/raleighbike.jpg - content of variable $photo (correct)
original/raleighbike.jpg - content of variable $Image (correct)
image file not found - when checking for the file in $Image (incorrect, file does exist)
photo file not found - when checking for the file in $photo (incorrect, file does exist)
thumb file not found - when checking for the file in $thumb (incorrect, file does exist)
thumbnail/thumb_raleighbike.jpg 
```

因此，如果一个文件是硬编码的，那么脚本可以在物理上找到它，但是如果一个文件被指定为变量，脚本就找不到它们。

有没有人知道为什么会发生这种情况 - 我肯定不会是唯一遇到这个问题的人;-(

# php - CodeIgniter 表单验证错误重定向

> ID：15776742
> 
> 赞同：2
> 
> 时间：2013-04-03T00:12:40.180
> 
> 标签：php, forms, codeigniter, validation

我有以下控制器，它在验证表单和显示错误方面工作正常。

用户尝试登录： http: [//mydomain.com/index.php/login](http://mydomain.com/index.php/login)

但是，当用户输入错误的凭据时，它会正确加载登录视图（应该如此）并正确显示错误“无效登录”，但浏览器窗口中的 URI 显示：

[http://mydomain.com/index.php/verify_login](http://mydomain.com/index.php/verify_login)（与上述相反）。

验证失败后如何重定向到“.../index.php/login”

这是有问题的代码：

```
<?
   class Login extends CI_Controller {

public function index()
{
    $this->load->helper(array('form'));
    $this->load->helper('url');
    $this->load->view('login_page');
}

function verify_login() 
{

$this->load->model('login_model','',TRUE);
$this->load->library('form_validation');
$this->form_validation->set_error_delimiters('<label class="error">', '</label>');
$this->form_validation->set_rules('username', 'Login', 'trim|required|xss_clean');
$this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');

if($this->form_validation->run() == FALSE)
{
 //Field validation failed. User redirected to login page
 $this->index();
}
else
{
 //Go to private area
 redirect('private_area', 'refresh');
 }

}

function check_database($password)
 {
  //Field validation succeeded. Validate against database
  $username = $this->input->post('username');

  //query the database
  $result = $this->login_model->login($username, $password);

  if($result)
   {
   $sess_array = array();
   foreach($result as $row)
   {
     $sess_array = array(
     'id' => $row->id,
     'username' => $row->username
   );
   $this->session->set_userdata('logged_in', $sess_array);
 }
 return TRUE;
}
 else
 {
 $this->form_validation->set_message('check_database', '<div class="alert alert-error">Invalid username or password</div>');
 return false;
 }
 }
} 
```

**更新：** Cyrode 的解决方案修复了该问题，但现在它在加载视图时不显示来自 check_database() 函数的“无效登录”错误消息 (set_message)。有什么想法我在这里做错了吗？

**更新2：** 给你：

```
 class Login extends CI_Controller {

public function index()
{
    $this->load->helper(array('form'));
    $this->load->helper('url');
    $this->load->view('login_page');

    $this->load->model('login_model','',TRUE);
    $this->load->library('form_validation');
    $this->form_validation->set_error_delimiters('<label class="error">', '</label>');
    $this->form_validation->set_rules('username', 'Login', 'trim|required|xss_clean');
    $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');

 if($this->form_validation->run() == FALSE)
  {
   $this->load->view('login_page');
  }
 else
 {
 //Go to private area
 redirect('private_area', 'refresh');
 }
}

 function check_database($password)
  {
   //Field validation succeeded. Validate against database
   $username = $this->input->post('username');

    //query the database
    $result = $this->login_model->login($username, $password);

   if($result)
   {
    $sess_array = array();
     foreach($result as $row)
    {
     $sess_array = array(
     'id' => $row->id,
     'username' => $row->username
    );
    $this->session->set_userdata('logged_in', $sess_array);
  }
  return TRUE;
 }
else
{
  $this->form_validation->set_message('check_database', '<div class="alert alert-error">Invalid username or password</div>');
 return false;
   }
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:17:02.530

只需在`index()`方法中完成所有表单处理。

```
public function index()
{
    $this->load->model('login_model','',TRUE);
    $this->load->library('form_validation');
    $this->load->helper('url');

    $this->form_validation->set_error_delimiters('<label class="error">', '</label>');
    $this->form_validation->set_rules('username', 'Login', 'trim|required|xss_clean');
    $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');

    if ($this->form_validation->run() == false)
    {
        $this->load->view('login_page');
    }
    else
    {
        redirect('private_area', 'refresh');
    }
} 
```

然后，确保您的表单的操作转到`login`而不是`verify_login`。

顺便说一句，不要 xss_clean 密码字段，因为它可能会更改它们的值，并且您的用户会想知道为什么他们输入的完美密码不起作用。无论如何，您应该对密码进行哈希处理，这将消除安全问题。

# java - Java井字游戏

> ID：15776745
> 
> 赞同：2
> 
> 时间：2013-04-03T00:12:58.450
> 
> 标签：java

我正在完成我的任务，即创建一个井字棋检查器，但由于某种原因，我想不出一种方法来完成创建游戏的第一步。我们从一个包含代表一个游戏的行的文本文件中读取；例如：

```
x,x,o, , ,x, ,o,o 
```

在传统板上看起来像这样：

```
x|x|o
-----
 | |x
-----
 |o|o 
```

这是我到目前为止所拥有的：

```
class TicTacToe{
    static String[][] game;

    public TicTacToe(int size){
        this.game = new String[size][size];
    }

    public static TicTacToe create(String input){
        String tokens = input.split(",");
        int size = (int)Math.sqrt(tokens.length); //For setting a size
                                                  // of the board

        return null;
    }
} 
```

我不明白的是如何返回一个新的井字游戏对象：当我编写检查行、列等的方法时，我将如何让棋盘进行检查？我会以正确的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:37:15.123

> [W]当我编写检查行、列等的方法时，我将如何让董事会检查？

您的对象的实例应该包含有关板的所有信息。您已经（大部分）完成了 -`game`是包含有关董事会信息的字段。唯一的问题是*每个*板将包含相同的板信息，如果它被更新，它将包含更新的信息。

如果您想像对待[工厂](http://en.wikipedia.org/wiki/Factory_method_pattern#Java_2)一样对待它，那么您需要做四件事：

*   从 中删除`static`修饰符`game`。这是不必要的，并且会导致跨多个对象的状态不一致。
*   将您的构造函数设为私有 - 除非我遗漏了什么，否则没有理由在工厂之外对其进行初始化。

    ```
     private TicTacToe(int size) {
         game = new String[size][size];
     } 
    ```

    或者，更好的是：

    ```
     private TicTacToe(String[][] hydratedBoard) {
          game = hydratedBoard;
     } 
    ```

    我稍后会告诉你为什么。

*   实施`TicTacToe.create(String)`，并返回完全水合的对象。一个建议是`String[][]`隐式创建，使用作为参数传入构造函数的对象创建对象，然后返回您的`TicTacToe`对象。

    ```
    public static TicTacToe create(String input) {
        String[][] board = new String[3][3];
        int i = 0; // count the row we're on
        String[] tokens = input.split(",");
        for(int j = 0; j < board.length; j++) {
            if (j % 3 == 0) { // advanced to the end of the column set (SO)
                i++;
            }
            board[i][j] =  tokens[i*3 + j];
        }
        return new TicTacToe(board);
     } 
    ```

*   为板对象提供某种吸气剂。您可能不必根据作业执行此操作，但这是一种很好的做法。它可以是 的直接吸气剂，也可以是`String[][]`某种漂亮的打印表示；我不知道。我将把这个实现留给读者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:22:05.123

你想多了。不要使用“return null;”，而是使用“return new TicTacToe(size);”。

虽然，通常当我创建一个静态工厂方法（如您的“创建”方法）时，我将构造函数设为私有，因此只能从静态创建方法调用它。

...然后，如果您想真正记住您传入的 x/o 位置，则需要更新板子...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-03T16:17:57.360

在这里，我为这个游戏添加了一个集成测试，它可能会给你一些关于如何创建/思考游戏的想法。

```
 public void testWinnerPlayerIWithVerticalLine() {

    this.displayUnitTestDescription("Integration Test for having player 'X' as winner on a vertical line use case");
    final IBoardGame<TicTacToeMove, TicTacToePlayer> ticTacTocGame = new TicTacToeGame();
    final String playerIDisplayName = "X";
    final String playerIIDisplayName = "O";
    final TicTacToePlayer playerI = new TicTacToePlayer(playerIDisplayName);
    final TicTacToePlayer playerII = new TicTacToePlayer(playerIIDisplayName);
    ticTacTocGame.setGamePlayers(new TicTacToePlayer[]{playerI, playerII});
    TicTacToePlayer[][] expectedBoardInteractionSnapshot = new TicTacToePlayer[][]{
        new TicTacToePlayer[]{playerI,      null,       playerII},
        new TicTacToePlayer[]{playerI,      playerII,   null},
        new TicTacToePlayer[]{playerI,      playerII,   playerI}            
    };

    ticTacTocGame.start();
    ticTacTocGame.makeMove(new TicTacToeMove(0, 0));
    ticTacTocGame.makeMove(new TicTacToeMove(1, 1));
    ticTacTocGame.makeMove(new TicTacToeMove(2, 2));
    ticTacTocGame.makeMove(new TicTacToeMove(0, 2));
    ticTacTocGame.makeMove(new TicTacToeMove(2, 0));
    ticTacTocGame.makeMove(new TicTacToeMove(2, 1));
    ticTacTocGame.makeMove(new TicTacToeMove(1, 0));

    this.displayBoardPlayerInteractionSnapshot(ticTacTocGame);
    final TicTacToePlayer[][] actualBoardInteractionSnapshot = ticTacTocGame.getPlayerInteractionSnapshotBoard();

    Assert.assertFalse(ticTacTocGame.isGameDraw());
    Assert.assertTrue(ticTacTocGame.existWinner());
    Assert.assertEquals(ticTacTocGame.getWinner().getDisplayName(), playerIDisplayName);
    Assert.assertArrayEquals(actualBoardInteractionSnapshot, expectedBoardInteractionSnapshot);     
} 
```

如果您有兴趣了解更多信息，可以找到井字游戏的整个 java 实现： [https ://github.com/ncaralicea/tictactoe](https://github.com/ncaralicea/tictactoe)

# java - 哈希码这是什么？

> ID：15776752
> 
> 赞同：3
> 
> 时间：2013-04-03T00:13:24.687
> 
> 标签：java, arrays, class, hash

```
int value = 5381;

for (int i = 0; i < item.length(); i++) {
  value = value * 33 + item.charAt(i);
}

value &= 0x7fffffff;
value %= size; 
```

这是伯恩斯坦的哈希码。除了最后两行之外，我得到了所有内容。他们在做什么？它们还会在 Java 编译器中产生错误，因此它们显然不是有效代码。他们还能如何被代表？

我几乎不在乎他们做什么，只要他们工作哈哈：P

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T00:16:07.547

按位和的目的`&`是将所有值转换为正整数范围。与简单的绝对值操作相比，这可能更好地保留了前操作创建的均匀分布。此外，正如@yshavit 在评论中指出的那样，摆脱负号的一般原因是，`value`最终可能会被用作某种索引。

取模的目的`%`是使哈希码适合有限大小的空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T00:15:01.677

`&`是按位与，并且`%`是模数。

`&=`and`%=`显然是这些操作的简写和`=`.

# sql - 接受所有表字段并更新这些值的存储过程

> ID：15776755
> 
> 赞同：0
> 
> 时间：2013-04-03T00:13:51.720
> 
> 标签：sql, sql-server, procedure

我正在处理几个练习题，我遇到了这个问题，我在尝试执行程序时不断收到错误消息

> 消息 156，级别 15，状态 1，第 1 行
> 关键字“程序”附近的语法不正确。”

有人可以帮忙吗？

编写一个`UpdateTitle`接受所有`Title`表列并使用这些值更新标题的过程。引发以下错误消息： ISBN 不存在 类别和/或出版商代码无效。

```
Create PROCEDURE UpdateTitle (@ISBN char(10), @SuggestedPrice smallmoney,@NumberInStock smallint,@PublisherCode int,@CategoryCode int)
AS
BEGIN
IF @ISBN is null or @CategoryCode is null or @PublisherCode is null
BEGIN
 RAISERROR ('ISBN,CategoryCode, or PublisherCode is not valid please enter valid data',16,1)
END
ELSE
BEGIN    
 IF (SELECT COUNT(*) FROM Title WHERE ISBN = @ISBN) = 0
 BEGIN
    RAISERROR ('ISBN does not exist.',16,1)
 END
 ELSE
 BEGIN
    SELECT 'Table Sucessfully Updated.';
    UPDATE Title 
    SET SuggestedPrice = @SuggestedPrice
    WHERE ISBN = @ISBN;

    BEGIN
     IF (SELECT COUNT(*) FROM Title WHERE ISBN = @ISBN) = 0
     BEGIN
    RAISERROR ('ISBN does not exist.',16,1)
 END
 ELSE
 BEGIN
    SELECT 'Table Sucessfully Updated.';
    UPDATE Title 
    SET NumberInStock = @NumberInStock
    WHERE ISBN = @ISBN;
  END

          BEGIN
     IF (SELECT COUNT(*) FROM Title WHERE ISBN = @ISBN) = 0
     BEGIN
    RAISERROR ('ISBN does not exist.',16,1)
 END
 ELSE
 BEGIN
    SELECT 'Table Sucessfully Updated.';
    UPDATE Title 
    SET PublisherCode = @PublisherCode
    WHERE ISBN = @ISBN;
  END
          BEGIN
     IF (SELECT COUNT(*) FROM Title WHERE ISBN = @ISBN) = 0
     BEGIN
    RAISERROR ('ISBN does not exist.',16,1)
 END
 ELSE
 BEGIN
    SELECT 'Table Sucessfully Updated.';
    UPDATE Title 
    SET CategoryCode = @CategoryCode
    WHERE ISBN = @ISBN;
  END

 END
END
END
END
END
END
GO 
```

然后

```
 Execute Procedure UpdateTitle @ISBN ='1021031040', @suggestedproce ='40' , @NumberInStock ='10', @PublisherCode = '200', @CategoryCode = '1' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:23:42.270

```
Execute Procedure UpdateTitle ... 
```

应该：

```
EXEC dbo.UpdateTitle ... 
```

其他一些评论：

*   ISBN 不再限于 10 个字符（[如果您相信 WikiPedia，此更改发生在 2007 年](http://en.wikipedia.org/wiki/International_Standard_Book_Number)）。
*   [创建或引用对象时始终使用模式前缀](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)。
*   您只需要检查 ISBN 是否有效一次。而且您不应该使用计数恕我直言，特别是因为 - 大概 - 这是关键，无论如何它只能返回 0 或 1。
*   您不应选择“更新成功”然后执行更新。在告诉用户更新成功之前，您应该确保更新成功。
*   也没有理由将其分成多个更新。
*   请自由使用回车、缩进和空格。可读性的价值值得在输入时付出额外的代价（因为您只输入一次，但您会阅读多次）。
*   用作`RETURN;`退出机制，这样您就不必嵌套`IF`和`ELSE`多次。
*   始终`SET NOCOUNT ON;`在程序开始时使用。
*   您可能希望自定义消息以告诉用户哪些参数无效。
*   哦，是的，[请使用分号终止 statements 来证明您的代码的未来](https://sqlblog.org/2009/09/03/ladies-and-gentlemen-start-your-semi-colons)。

这是一个更简洁的版本，可以满足您的所有要求：

```
CREATE PROCEDURE dbo.UpdateTitle
  @ISBN           CHAR(10), 
  @SuggestedPrice SMALLMONEY,
  @NumberInStock  SMALLINT,
  @PublisherCode  INT,
  @CategoryCode   INT
AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @msg VARCHAR(255);

  IF @ISBN IS NULL OR @CategoryCode IS NULL OR @PublisherCode IS NULL
  BEGIN
    SELECT @msg = 'The following parameter(s) were invalid:'
      + CASE WHEN @ISBN IS NULL THEN ' @ISBN' ELSE '' END 
      + CASE WHEN @CategoryCode IS NULL THEN ' @CategoryCode' ELSE '' END 
      + CASE WHEN @PublisherCode IS NULL THEN ' @PublisherCode' ELSE '' END;

    RAISERROR (@msg, 11, 1);
    RETURN;
  END

  IF NOT EXISTS (SELECT 1 FROM dbo.Title WHERE ISBN = @ISBN)
  BEGIN
    SET @msg = 'ISBN %s does not exist.';
    RAISERROR(@msg, 11, 1, @ISBN);
    RETURN;
  END

  BEGIN TRY
    UPDATE dbo.Title
      SET SuggestedPrice = @SuggestedPrice,
          NumberInStock  = @NumberInStock,
          PublisherCode  = @PublisherCode,
          CategoryCode   = @CategoryCode
      WHERE ISBN = @ISBN;

    SELECT 'Update successful.';
  END TRY
  BEGIN CATCH
    SET @msg = ERROR_MESSAGE();
    RAISERROR(@msg, 11, 1);
  END CATCH
END
GO 
```

# ruby - ruby 中 NET::HTTP 的 curl 等效代码片段

> ID：15776759
> 
> 赞同：1
> 
> 时间：2013-04-03T00:14:23.230
> 
> 标签：ruby, curl, net-http

NET:HTTP 的语法似乎很复杂，并且可能会遗漏一些非常小的东西。

然而 curl 更古老并且有据可查。

是否有一些文档/博客文章等在其中发布了 NET:HTTP 等效的 curl 约束？

例如：

要发出 https 请求，请使用：

```
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE 
```

如何在 NET:HTTP 中使用 -u、-X、-H、-d 等 curl 标志？任何资源都会有所帮助。

谢谢

PS：在我使用的环境中无法使用第三方 gem。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:26:55.257

-X 控制您提出的请求类型。您可以通过创建所需的请求类型来控制它，即：（`Net::HTTP::Post`或`Net::HTTP::Put`，等等）。

-d 设置数据，所以，`request.set_form_data({"key" => "value"})`.

-u 用于用户名（和密码？我不记得带有 cURL 的 -u 的细节），所以，`request.basic_auth("username", "password")`.

-H 设置一个标题，所以，`request.add_field("header", "value")`

当我使用 Net::HTTP 并忘记某些东西时，我通常将[其](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)用作参考（因为当我丢失链接时，它很容易在 Google 上找到。）

PS：您始终可以将 gems 安装到本地目录并设置自定义 GEM_HOME 和 GEM_PATH 而不是使用系统提供的 gem 目录。

# c++ - 将派生类对象添加到 C++ 中的 bas 类对象向量中？

> ID：15776761
> 
> 赞同：0
> 
> 时间：2013-04-03T00:14:33.487
> 
> 标签：c++, class, inheritance, polymorphism

好久没用过这个c++特性了，就忘记了。假设我有一个名为“object”的类和一个从“object”公开派生的类“button”。

现在，考虑我有一个向量 a 或 hash_map a。我可以在其中添加“按钮：”类型的对象吗？或者实际上是从“对象”公开派生的任何其他类对象。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:17:03.067

使用指针向量：

```
struct Base
{
    virtual ~Base() {}
    virtual int foo() = 0;   // good manners: non-leaf classes are abstract
};

struct Derived1 : Base { /* ... */ };
struct Derived2 : Base { /* ... */ };
struct Derived3 : Base { /* ... */ };

#include <vector>
#include <memory>

int main()
{
    std::vector<std::unique_ptr<Base>> v;

    v.emplace_back(new Derived3);
    v.emplace_back(new Derived1);
    v.emplace_back(new Derived2);

    return v[0]->foo() + v[1]->foo() + v[2]->foo();  // all highly leak-free
} 
```

# java - 在 Android 中搜索数据库

> ID：15776767
> 
> 赞同：0
> 
> 时间：2013-04-03T00:14:48.817
> 
> 标签：java, android

使用 Eclipse 定位 4.2

我有一个基本的输入屏幕，它从用户那里获取地址簿信息并将其放入一个名为`myAddressBook`我创建表的代码的 db 表中，如下所示（db 是`SQLiteDatabase`声明：

```
//MODE_PRIVATE = only this application
db = openOrCreateDatabase("AdddressBookDB", MODE_PRIVATE, null);
//Create the Table
db.execSQL("CREATE TABLE IF NOT EXISTS myAddressBook(Name VARCHAR, Address1 NVARCHAR, Address2 NVARCHAR, City VARCHAR, State VARCHAR, Zip INT(5), Phone INT(10));"); 
```

现在我`Search`在表单上有一个按钮`EditText`，我想用它来搜索我的表格并将结果显示在列表中，或者可能在`EditTexts`用于输入的原始中显示。在搜索按钮的 OnClick 中，我有：

```
String searchvalue = searchEditText.getText().toString(); 
```

获取用户想要搜索的任何内容的字符串。现在我基本上怎么说“在数据库中找到任何部分或完全匹配的东西`searchvalue`”？？（我是 Android 新手，但对 SQL 很陌生）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:28:38.357

可能，这是您问题的答案

```
Cursor cursor = getReadableDatabase().
  rawQuery("select * from todo where _id = ?", new String[] { id }); 
```

[这](http://www.vogella.com/articles/AndroidSQLite/article.html)是一篇好文章。请阅读该内容以获得您问题的答案。

# c++ - QMenus 通常在自己的线程中吗？等待他们完成事件处理的正确方法是什么？

> ID：15776776
> 
> 赞同：2
> 
> 时间：2013-04-03T00:15:20.610
> 
> 标签：c++, qt, pyqt, qthread, qmenu

在调试器中，我可以看到我的 QMenu 对象与主 gui 线程不在同一个线程中。例如, `QApplication.instance().thread() == 0xdeadbeef`, 但是`mymenu.thread() == 0xdeadbabe`

1）这是预期的吗？顺便说一句，我的 QMenus*不是*本机菜单（我使用过`setNativeMenuBar(False)`）

2）我想阻止，直到菜单完成处理所有事件。我试过`QApplication.processEvents()`了，但这有点棘手，因为它必须从与我要等待的小部件（在我的情况下是菜单）*相同的线程中调用。*我结合使用自定义事件过滤器类`moveToThread()`来确保`processEvents()`从 QMenu 正在运行的同一个线程中调用它，但这似乎并不重要。

无论我尝试什么，我似乎都无法阻止所有 QMenu 事件/动作信号处理的完成。我唯一的选择似乎是`sleep()`足够长，以至于我知道处理已完成。但这对于我的用例来说并不是真正可以接受的。

# jquery - 使用带有 CSS Tricks 有机标签的 Google 地图

> ID：15776777
> 
> 赞同：0
> 
> 时间：2013-04-03T00:15:29.583
> 
> 标签：jquery, google-maps, tabs

我在尝试使用 CSS Tricks Organic Tabs ( [http://css-tricks.com/organic-tabs/](http://css-tricks.com/organic-tabs/) ) 实现 Google Maps 时遇到问题。我修复了单击选项卡时地图无法正确加载的问题。但现在我坚持把地图偏离中心。

单击选项卡时，我正在尝试设置地图的中心。这可能吗？像这样的东西：

```
jQuery('tab-nav li > a').click(function(){
    map.setCenter(point);
}); 
```

这是我解决它无法正确显示的问题的地方

```
// Fade in new list on callback
base.$el.find("#"+listID).fadeIn(base.options.speed, function(){
    if(map != undefined && map != null)
        google.maps.event.trigger(map, "resize");
}); 
```

您可以在这里看到问题：[https ://www.revival.tv/new/](https://www.revival.tv/new/)

它仅在该选项卡上加载时正确显示地图：[https ://www.revival.tv/new/?tab=location](https://www.revival.tv/new/?tab=location)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T06:56:52.447

尝试将 setTimeout 设置为 500 左右，它为我修复了故障行为。您还可以在重绘后再次设置中心...例如，在您从 tabs .js 中的点击事件返回 false 之前放置它：

```
setTimeout(function() {
                        google.maps.event.trigger( minimap[redrawMapId], 'resize' );
                        minimap[redrawMapId].setZoom( 11 );
                        minimap[redrawMapId].setCenter(myLatLng); 
                    }, 500); 
```

minimap[redrawMapId] 就是我的代码中的“地图”——我在一个页面上有几个地图。

# svg - RaphaelJS 规模问题

> ID：15776781
> 
> 赞同：0
> 
> 时间：2013-04-03T00:15:55.370
> 
> 标签：svg, resize, raphael, transform, scale

有人可以帮我吗？我试图将 svg 的大小缩小到原始大小的一半。

```
Here is the JSfiddle link

http://jsfiddle.net/wildleaf/ntzf3/ 
```

它与原版运行良好，但如果我取消注释最后一行，尺寸会减半，但形状会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:18:03.680

弄清楚了。它正在覆盖原始图中的变换信息。我将最后一行更改为 elements.transform("...s0.5,0.5,0,0") 然后一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:06:28.770

您需要添加转换，而不是覆盖它。

请参阅更新的小提琴[http://jsfiddle.net/ntzf3/1/](http://jsfiddle.net/ntzf3/1/)

**代码**

```
...    

var rsr = Raphael("canvas", 800, 400);
var elements = rsr.set();

for (var room in floorData) {
    var r = floorData[room];
    var ele = rsr.add([r]);
    elements.push(ele);
    if (r.data) {
        ele.data('room', r.data['room']);
    }
}

elements.forEach(function (el) {
    var e = el[0];
    e.transform(e.transform() + "s0.5,0.5,0,0");
}); 
```

# c++ - 简单的二维数组错误-c++

> ID：15776790
> 
> 赞同：3
> 
> 时间：2013-04-03T00:16:54.340
> 
> 标签：c++, arrays

我定义了一个名为“matriu”的数组：

```
#include "CQix.h"
#include "Graphics_Console.h"

class cTauler
{

CQix Qix;
HANDLE hScreen;
int iniciX, iniciY, fiX, fiY;

private:
bool matriu[38][28];

int area_activa;

}; 
```

我想将所有值初始化为false：

```
void cTauler::InicialitzarTauler()
{

int i,j;

for(i=0;i<=fiX+2;i++)
{
    for(j=0;i<=fiY+2;j++)
    {
        matriu[i][j]=false;
    }
} 
```

但是当我编译我得到这个错误：0xC0000005：访问冲突。

所以我试图定义数组这样做：

```
bool matriu[38][28]= {false}; 
```

而且我无法编译，因为：“不允许数据成员初始化程序”

我能做些什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:18:44.033

Your inner loop has a faulty stop condition of

```
i<=fiY+2 
```

'j' will increment through the inner for-loop, but it will not stop because 'i' is not incremented within the inner loop.

Your error is just a result of a typo. Change the inner loop to

```
for(j=0;j<=fiY+2;j++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:26:39.673

如果数据`matriu[38][28]`将始终保持相同大小，请考虑创建`const static`类成员`fiX`并将`fiY`它们初始化为值 38 和 28。您可能没有正确初始化它们...

# version-control - 跨 TFS 文件夹共享代码（如 svn:externals）？

> ID：15776799
> 
> 赞同：2
> 
> 时间：2013-04-03T00:17:33.513
> 
> 标签：version-control, tfs

我有多个具有常见内部 JavaScript 库依赖项的项目。我想在多个项目中共享这些依赖项。

不幸的是，我们正在使用 TFS。我想要 svn:externals 之类的东西，借此我可以将特定文件夹链接到源代码控制树中其他位置的不同文件夹。所以我想拥有

```
ProjectA
  app
  js
    lib [should link to SharedProject/lib]

ProjectB
  app
  js
    lib [should link to SharedProject/lib]

SharedProject
  lib
    library1.js
    library2.js 
```

我不想跨工作区链接……我不想疯狂地为每个开发人员定制设置。我只想让开发人员检查一个项目，它知道“哦，另一个项目中有共享资源。我也会得到这些。” 我不关心它总是得到一个特定的版本；我只是厌倦了跨项目复制文件。

这在 TFS 中远程可行吗？我用谷歌搜索并没有发现任何结论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:09:02.173

只需将共享项目从其原始位置分支到您想要的位置。

当您在 svn:externals 上切换到下一个修订版时，只需将该修订版的更改合并到分支副本。

（坦率地说，即使在 SVN 上我也更喜欢这种方式）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T18:41:23.003

在源代码中使用外部链接不是一个好主意。它会产生很多副作用。您可以使用 NuGet 将库打包并发布到专用 NuGet 服务器，然后在所有依赖项目中使用已发布的包。

# asp.net - 使用 ServiceStack 检查请求标头

> ID：15776800
> 
> 赞同：6
> 
> 时间：2013-04-03T00:17:35.140
> 
> 标签：asp.net, servicestack

检查服务端点的请求标头的最佳方法是什么？

```
ContactService : Service 
```

阅读此[https://github.com/ServiceStack/ServiceStack/wiki/Access-HTTP-specific-features-in-services](https://github.com/ServiceStack/ServiceStack/wiki/Access-HTTP-specific-features-in-services)我很好奇进入界面的首选方式。

谢谢你，斯蒂芬

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T00:27:27.800

在 ServiceStack[服务](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Service.cs)中，您可以通过以下方式访问[IHttpRequest](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/ServiceHost/IHttpRequest.cs)和[IHttpResponse](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/ServiceHost/IHttpResponse.cs)对象：

```
public class ContactService : Service 
{
    public object Get(Contact request)
    {
        var headerValue = base.Request.Headers[headerKey];

        //or the same thing via a more abstract (and easier to Mock):
        var headerValue = base.RequestContext.GetHeader(headerKey);
    }
} 
```

IHttpRequest 是底层 ASP.NET HttpRequest 或 HttpListenerRequest 的包装器（取决于您是托管在 ASP.NET 上还是自托管 HttpListener）。因此，如果您在 ASP.NET 中运行，则可以通过以下方式获取底层 ASP.NET HttpRequest：

```
var aspnetRequest = (HttpRequest)base.Request.OriginalRequest;
var headerValue = aspnetRequest.Headers[headerKey]; 
```

# java - Antlr4 创建更有意义/一致的类型名称

> ID：15776801
> 
> 赞同：2
> 
> 时间：2013-04-03T00:17:39.747
> 
> 标签：java, antlr4

默认情况下，该`token.getType()`方法返回一个`int`，并且对于基于代码的代码非常无用，无需加载和解析`*.tokens`生成的文件。

ANTLR 用户通常如何一致地使用令牌类型？我所说的一致的意思是，如果你改变语法，记号很可能会改变。

您通常会创建一个`Utility`加载`*.tokens`文件并解析它的类吗？

我的示例`Search.tokens`文件：

```
LOCATION=8
TIME=5
AGE=3
WS=1
COMPARATIVE=9
GENDER=4
PHRASE=2 
```

示例令牌流：

```
(token.getType(), token.getText())
9 [MegaBlocks vs Legos], -1 [<EOF>] 
```

目前我正在做类似的事情：

```
public class TokenMapper {

    private HashMap<Integer, String> tokens;

    public TokenMapper(String file) {
        tokens = new HashMap<Integer, String>();
        parse(file);
    }

    private void parse(String file) {
        // trivial code that maps the Integer typeId to the String name
    }

    public Integer type(String type) {
        for(Map.Entry<Integer, String> entry : tokens.entrySet()) {
            if(entry.getValue().equals(type)) {
                return entry.getKey();
            }
        }
        return null;
    }

    public String type(Integer type) {
        return tokens.get(type);
    }   

} 
```

然后我总是可以通过诸如`LOCATION`or之类的名称来引用我的标记，`GENDER`而不必担心`Integer`会发生变化的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:26:19.563

当您生成词法分析器和/或解析器时，生成的类将包含语法中声明的每个标记类型的常量以及通过标记文件导入的那些。

例如，如果您有以下语法：

```
lexer grammar SearchLexer;

options { tokenVocab = Search; }

... 
```

然后生成的`SearchLexer.java`类将包含常量 ( `public static final int`)`LOCATION`和`GENDER`因为它们是由于`tokenVocab`选项而被导入的。

# asp.net - 如何在 ASP.NET MVC 4 中通过 Logged User 将 UserId 添加到发布的数据中

> ID：15776807
> 
> 赞同：2
> 
> 时间：2013-04-03T00:18:08.340
> 
> 标签：asp.net, entity-framework, asp.net-mvc-4

所以我正在做的事情可能看起来很简单，但我不知道该怎么做。

我已经注册并登录了一个帐户（我使用的是 ASP.NET MVC 4 中使用的默认会员系统），所以我想将我的 UserId 添加到我要插入数据库的一些数据中。

这是我插入的数据模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Reroute.Models
{
    public class Request
    {
        public int      RequestId { get; set; }
        // I want to add UserId based on my current session
        public int      UserId { get; set; }
        public string   OrderNumber { get; set; }
        public string   TrackingNumber { get; set; }
        public string   CurrentAddress { get; set; }
        public string   NewAddress { get; set; }
        public string   Comment { get; set; }
    }
} 
```

和 ActionResult （这是我认为我必须进行更改的地方）：

```
[HttpPost]
public ActionResult Create(Request collection)
{
    try
    {
        _db.Requests.Add(collection);
        _db.SaveChanges();
        //return RedirectToAction("Index");
        return Content("Done! Added to DB");
     }
     catch
     {
        return View();
     }
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:47:46.490

登录后可以将认证用户的UserId保存在Session中：

```
Session["UserId"] = userId; 
```

或者由于您使用的是 FormsAuthentication，您可以使用[此处所示](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.aspx)的 UserData 属性，或者执行一个不错的技巧：

```
public SignInUser(string name, string id) {
    // store the userid
    FormsAuthentication.SetAuthCookie(name + '|' + id, false);
} 
```

然后像这样检索 Name 和 UserId：

```
public int CurrentUserId
{
    get
    {
        var context = HttpContext.Current;
        if (context == null) return 0;

        return context.Request.IsAuthenticated
                    ? Convert.ToInt32(context.User.Identity.Name.Split('|')[1])
                    : 0;
    }
}

public string CurrentUserName
{
    get
    {
        var context = HttpContext.Current;
        if (context == null) return string.Empty;

        return context.Request.IsAuthenticated 
            ? context.User.Identity.Name.Split('|')[0] 
            : string.Empty;
    }
} 
```

你可以在一个类中拥有这些方法和属性，这样你就可以将它们放在一个地方，我实际上就是这样做的。现在，您可以像这样在控制器中调用它：

```
[HttpPost]
public ActionResult Create(Request collection)
{
    try
    {
        collection.UserId = _authProvider.CurrentUserId;
        // if you want to use session, I prefer the FormsAuthentication approach
        // you need to do additional check that the Session has not expired (not null)
        collection.UserId = Session["UserId"];

        _db.Requests.Add(collection);
        _db.SaveChanges();
        //return RedirectToAction("Index");
        return Content("Done! Added to DB");
    }
    catch
    {
        return View();
    }
} 
```

`_authProvider`是具有我上面给出的代码的类的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:55:18.343

这应该有效。

```
var loggedInUserName=Thread.CurrentPrincipal.Identity.Name;
var user=Membership.GetUser(loggedInUserName);
var key = user.ProviderUserKey; 
```

吨

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T02:09:38.990

假设您`Create`还有一个`GET`已加载并用作模型的`Create.cshtml`，您只需要在其中显式设置它`ActionResult`

```
public ActionResult Create() 
{
   Result model = new Result();
   model.UserId = myUserId;
} 
```

然后在你的`Create.cshtml`你可以有一个隐藏的字段：

```
@Html.HiddenFor(m => m.UserId) 
```

我仍然会检查`POST`以确保允许进行保存的用户进行保存并且没有将您的隐藏字段值欺骗给完全不同的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T09:57:46.277

使用它可以获取用户 ID ...

```
Membership.GetUser().ProviderUserKey 
```

# php - 在我已经移动到 logincheck.php 页面后，我可以在之前的 signin.html 页面中显示“密码错误”消息吗

> ID：15776809
> 
> 赞同：-3
> 
> 时间：2013-04-03T00:18:27.750
> 
> 标签：php

我的 signin.html 只是一个带有用户名和密码字段的普通 html 页面..nd 一个登录按钮..我只想在上一个 signin.html 页面的 echo 下显示所有这些错误消息。 logincheck.php 的代码如下：

```
<?php

session_start();

$username = $_POST['username'];
$password = $_POST['password'];

if($username && $password)
{

$connect = mysql_connect("localhost","root","") or die("Couldn't connect!");
mysql_select_db("project") or die("Couldn't find db");

$query= mysql_query("SELECT * From signup1 WHERE username='$username'");
$numrows = mysql_num_rows($query);

if ($numrows!=0)
{
//code to login
 while ($row = mysql_fetch_assoc($query))
    {
        $dbusername = $row['username'];
        $dbpassword = $row['password'];
    }
    if($username==$dbusername&&$password==$dbpassword)
    {

        $_SESSION['username']=$username;
        header('Location:mailbox.php');
    }
    else
     echo "Incorrect password!";

}
else
die("That user does't exist!");

}
else
die("Please enter  username and Password!");

if($_SESSION['username'])
echo "Welcome, " .$_SESSION['username']."!<br><a href='logout.php'>Logout</a><br> ";
else
die ("You must be logged in!");

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:22:40.087

最好的方法是使这两个页面成为一个页面。表单可以指向同一个页面，您可以使用十几种变体来检查 POST 数据是否可用。如果有 POST 数据，则处理登录。

如果登录成功，则根据需要重定向。否则打印错误。一些示例代码：

```
<?php

if(!empty($_POST)){

// logic to check login status

   if( login_successful ){
      // redirect user
      exit;
   }
   print "error";

}
?>
<form method="post" action="login.php">
  login form here
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T00:24:50.683

如果我误解了，请纠正我，但您基本上只是想重定向到登录页面，对吗？如果是这样，您可以这样做：

```
header("Location: ./login.php?error=incorrect+password"); 
```

或类似的，然后在 login.php 中进行处理以显示错误消息。

* * *

顺便说一句，考虑分离你的逻辑和表示：[twig](http://twig.sensiolabs.org/)或[其他 PHP 模板引擎](https://www.google.com/search?q=php%20template%20engine)

# oracle - Oracle PL/SQL 组（按问题）

> ID：15776812
> 
> 赞同：1
> 
> 时间：2013-04-03T00:19:12.020
> 
> 标签：oracle, plsql, oracle10g

我想为 Oracle 10g Express 做这个练习

> “编写一个 SQL 查询来检索该部门获得最高薪水的员工的部门名称、名字、姓氏、薪水。”

我尝试了这段代码，但它对我不起作用。

有两个表名为employees，departments

错误是：ORA-00979：不是 GROUP BY 表达式

```
SELECT first_name, last_name, departments.department_name, salary
FROM employees, departments

where employees.department_id = departments.department_id

group by salary 
```

*输出一定是这样的。*

![在此处输入图像描述](https://i.stack.imgur.com/gqn6a.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:14:10.450

您将需要使用聚合函数来获取结果。在这种情况下，您将使用`max()`获得每个部门的最高薪水。

有几种写法。

您可以在连接中使用子查询：

```
select d.department_name,
  e.first_name,
  e.last_name,
  e.salary
from employees e
inner join
(
  select max(salary) MaxSalary, department_id
  from employees
  group by department_id
) e1
  on e.department_id = e1.department_id
  and e.salary = e1.maxsalary
inner join departments d
  on e.department_id = d.department_id; 
```

由于您使用的是 Oracle，因此可以使用窗口函数来获得结果：

```
select department_name, first_name, last_name, salary
from 
(
  select d.department_name,
    e.first_name,
    e.last_name,
    e.salary,
    row_number() over(partition by d.department_id order by e.salary desc) rn
  from employees e
  inner join departments d
    on e.department_id = d.department_id
) d
where rn = 1 
```

或者您甚至可以使用`WHERE`子句来过滤数据：

```
select d.department_name,
  e.first_name,
  e.last_name,
  e.salary
from employees e
inner join departments d
  on e.department_id = d.department_id
where salary in (select max(salary)
                 from employees e1
                 where e.department_id = e1.department_id
                 group by department_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:48:28.773

我了解您提出的问题是关于使用 GROUP BY 的，但我会仔细研究这个问题。

“编写一个 SQL 查询来检索该部门获得最高薪水的员工的部门名称、名字、姓氏、薪水。”

我认为您也将从查看最大值函数中受益，因为您正在寻找具有最高薪水的员工。

您需要一个聚合函数才能使用 GROUP BY。聚合函数是对多个记录执行任务的函数。这些是 SUM、AVG 和 COUNT 等函数。当你有一个聚合函数时，你可以按函数中没有的内容进行分组。

在您的示例中，MAX 将是您的聚合函数，您可以成功使用您的 GROUP BY。

[这是聚合函数的链接](http://infogoal.com/sql/sql-aggregate.htm)

# iphone - 应用程序崩溃使用 popViewControllerAnimated:YES

> ID：15776817
> 
> 赞同：2
> 
> 时间：2013-04-03T00:19:46.280
> 
> 标签：iphone, ios, xcode, ipad

我正在尝试创建一个后退按钮以返回我的应用程序的主菜单，现在发生的事情是，一旦我按下后退按钮，它就会显示主菜单，但是应用程序在一秒钟后崩溃了。

我用于后退按钮的代码是；

```
- (void)backButtonPressed:(id)sender {
    [self.navigationController popViewControllerAnimated:YES];
} 
```

从 AppDelegate.m 文件

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[[MenuViewController alloc] initWithNibName:@"MenuViewController_iPhone" bundle:nil] autorelease];
    } else {
        self.viewController = [[[MenuViewController alloc] initWithNibName:@"MenuViewController_iPad" bundle:nil] autorelease];
    }
    navigationController = [[myNavigationViewController alloc] initWithRootViewController:self.viewController];
    navigationController.navigationBarHidden = YES;
    self.window.rootViewController = navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

我看不到哪里出错了？它似乎调用了正确的屏幕，但之后立即崩溃？

编辑 - 这是 MenuViewController.m 文件；

```
#import "MenuViewController.h"
#import "MagicAppDelegate.h"
#import "MagicViewController.h"

@interface MenuViewController ()

@end

@implementation MenuViewController

- (void)viewDidLoad
{
    self.view.frame = [[UIScreen mainScreen] bounds];

    [super viewDidLoad];

  //  [self initLoad];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.

}

-(IBAction)onStart:(id)sender
{
    MagicViewController* viewController;

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
        viewController = [[MagicViewController alloc] initWithNibName:@"MagicViewController_iPhone" bundle:[NSBundle mainBundle]];
    else
        viewController = [[MagicViewController alloc] initWithNibName:@"MagicViewController_iPad" bundle:[NSBundle mainBundle]];

    [self.navigationController pushViewController:viewController animated:YES];
    [viewController release];
}

- (void)dealloc {

    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:08:17.620

请使用下面的代码，你想去 mainmenuview 控制器吗？

```
 [self.navigationController popToRootViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:02:44.717

实际上，我不明白您的代码：在语句`navigationController = [[myNavigationViewController alloc] initWithRootViewController:self.viewController];`中，您发送的`alloc`东西似乎是class的**实例**`UINavigationController`，但 alloc 是一个**类**方法。因此，我假设 myNavigationViewController 是 UINavigationController 的子类（但应该以大写字母开头）。
然后将返回的新实例直接分配给变量，即不使用 setter 方法`navigationController`。因此**不**保留。如果您的语句返回一个 autorelease 对象，那么一旦程序返回到主事件循环，它就会被释放。
因此尝试使用setter方法，即`self.navigationController = [[myNavigationViewController alloc] initWithRootViewController:self.viewController];`

# arrays - 在 NumPy 中，如何将一个数组插入另一个数组

> ID：15776822
> 
> 赞同：1
> 
> 时间：2013-04-03T00:20:51.233
> 
> 标签：arrays, numpy

例如，如果我有一个 NumPy 数组

```
import numpy as np

a = np.arange(10)
b = np.zeros(5) 
```

如何插入`b`到开头`a`？

我知道我可以创建一个新的大小数组`len(a)+len(b)`并进行切片分配，但是有没有办法直接插入数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:22:56.597

这个怎么样：

```
c = np.hstack([b, a]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T00:23:11.880

您可以使用`numpy.concatenate`：

```
>>> np.concatenate((b, a))
    array([ 0.,  0.,  0.,  0.,  0.,  0.,  1.,  2.,  3.,  4.,  5.,  6.,  7.,
        8.,  9.]) 
```

# google-app-engine - 只有一个实体的跨组交易错误

> ID：15776823
> 
> 赞同：2
> 
> 时间：2013-04-03T00:20:58.297
> 
> 标签：google-app-engine

我正在尝试执行下面的代码。有时它工作正常。但有时它不起作用。

```
@db.transactional
def _add_data_to_site(self, key):
    site = models.Site.get_by_key_name('s:%s' % self.site_id)
    if not site:
        site = models.Site()

    if key not in site.data:
        site.data.append(key)
        site.put()
        memcache.delete_multi(['', ':0', ':1'], key_prefix='s%s' %                                                                       
            self.site_id) 
```

我收到错误：

```
File "/base/data/home/apps/xxxxxxx/1-7-1.366398694339889874xxxxxxx.py", line 91, in _add_data_to_site
  site.put()
File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/db/__init__.py", line 1070, in put
  return datastore.Put(self._entity, **kwargs)
File "/base/python_runtime/python_lib/versions/1/google/appengine/api/datastore.py", line 579, in Put
  return PutAsync(entities, **kwargs).get_result()
File "/base/python_runtime/python_lib/versions/1/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
  return self.__get_result_hook(self)
File "/base/python_runtime/python_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1569, in __put_hook
  self.check_rpc_success(rpc)
File "/base/python_runtime/python_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1224, in check_rpc_success
  raise _ToDatastoreError(err)
BadRequestError: cross-group transaction need to be explicitly specified, see TransactionOptions.Builder.withXG 
```

# 所以，我的问题是：

如果我只更改一个实体 ( `models.Site`)，为什么会出现跨组事务错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-07T14:58:54.970

如日志中所述：“需要明确指定跨组事务”。尝试使用指定它

```
@db.transactional(xg=True) 
```

代替：

```
@db.transactional 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:30:28.550

跨组事务错误是指正在使用的[实体组](https://developers.google.com/appengine/docs/python/datastore/entities#Transactions_and_Entity_Groups)，而不是使用的类型（此处`Site`）。

当它发生时，这是因为您正在尝试对具有不同父级的实体进行事务，因此将它们放在不同的实体组中。

# 无耻的插头：

您应该停止使用`db`并将代码移至`ndb`，尤其是因为您似乎处于开发阶段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T04:21:45.047

如果您在 get_by_key_name() 查询中指定 parent=None，这是否有效？

本质上，为了使用事务，事务中的所有实体必须共享同一个父对象（即您使用一个父对象进行查询，并使用相同的父对象创建一个新实体），或者您必须使用 XG 事务。您看到问题是因为您没有指定父级。

您可能需要创建人工实体来充当父母，以便做您想做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T14:10:33.907

我遇到过同样的问题。通过单步执行客户端代码，我进行了以下两个观察：

1) 设置 (None) 的父级似乎仍表示该类型的父级，即使没有特定记录被选为该父级。
2) 您的交易也将包括所有 ReferenceProperty 属性。

因此，从理论上讲，如果您没有在至少有两个影响的任何类型上声明父级（通过省略或设置为（无）），则您应该获得跨组事务异常（因为如果您使用 A 类和 B 类，看起来您正在使用两个不同的实体组，分别用于 A 记录和 B 记录），以及任何 ReferenceProperty 属性引用的任何类型。

要解决此问题，您必须至少创建一个没有任何属性的种类，可以将其设置为所有以前的无父记录的父记录，以及它们声明的所有 ReferenceProperty 属性的父记录。

如果这还不够，则为跨组事务设置标志。

此外，对我来说，例外的文本是：“需要明确指定跨组事务”（复数“组”）。我有 Python AppEngine 客户端的 1.7.6 版。

如果它适合您的场景，请投票赞成这个答案。

# javascript - 当放置在可滚动的 div 中时，jquery ui sortable 不会在 IE 中滚动

> ID：15776832
> 
> 赞同：1
> 
> 时间：2013-04-03T00:22:16.863
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

在 Internet Explorer 中查看这个小提琴：http: [//jsfiddle.net/MSygf/3/](http://jsfiddle.net/MSygf/3/)

```
<div style="overflow-y:auto;max-height:100px;">
<ul class="draggable">
    <li class="drag">Drag 1</li>
    <li class="drag">Drag 2</li>
    <li class="drag">Drag 3</li>
    <li class="drag">Drag 4</li>
    <li class="drag">Drag 5</li>
    <li class="drag">Drag 6</li>
    <li class="drag">Drag 7</li>
    <li class="drag">Drag 8</li>
    <li class="drag">Drag 9</li>
    <li class="drag">Drag 10</li>
    <li class="drag">Drag 11</li>
    <li class="drag">Drag 12</li>
</ul>
</div>

  var sort_opts = {
    helper: function(e, ui) {
      ui.children().each(function() {
        $(this).width($(this).width());
      });
      return ui;
    },
    stop: function(e, ui) {
      tableObj.siblings('.' + attrs.realm + '-reorder-weights').val(tableObj.sortable('toArray').toString());
    },
    axis: 'y',
    items: 'li.drag'
  };
  $('.draggable').sortable( sort_opts ); 
```

在 Firefox、Chrome 等中，将句柄拖到可滚动 div 的底部将滚动 div。但是，Internet Explorer (8,9) 并非如此...

有没有办法让它拖动手柄到可滚动 div 的底部也会滚动 IE 中的 div？

我试过`position:relative`在 div 上做，但现在 div 会无限滚动而不是停在底部，所以这是不行的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:43:23.807

好吧，当可拖动对象靠近边缘时，我设法通过使用 javascript 滚动 div 来制作一个相当粗略的方法。

小提琴：http: [//jsfiddle.net/2cESH/](http://jsfiddle.net/2cESH/)

JS：

```
 var sort_opts = {
      helper: function (e, ui) {
          ui.children().each(function () {
              $(this).width($(this).width());
          });
          return ui;
      },
      stop: function (e, ui) {
          tableObj.siblings('.' + attrs.realm + '-reorder-weights').val(tableObj.sortable('toArray').toString());
      },
      sort: function (e, ui) {
          if($(ui.item).offset().top < 20 && $('#container-element').scrollTop() > 0){
              $('#container-element').scrollTop($('#container-element').scrollTop()-3);
          }
          if($(ui.item).offset().top > $('#container-element').height()-20 && $('#container-element').scrollTop() < $('#container-element ul').eq(0).height()){
              $('#container-element').scrollTop($('#container-element').scrollTop()+3);
          }
      },
      axis: 'y',
      items: 'li.drag'
  };
  $('.draggable').sortable(sort_opts); 
```

HTML：

```
<div id="container-element" style="overflow-y:auto;max-height:100px;">
    <ul class="draggable">
        <li class="drag">Drag 1</li>
        <li class="drag">Drag 2</li>
        <li class="drag">Drag 3</li>
        <li class="drag">Drag 4</li>
        <li class="drag">Drag 5</li>
        <li class="drag">Drag 6</li>
        <li class="drag">Drag 7</li>
        <li class="drag">Drag 8</li>
        <li class="drag">Drag 9</li>
        <li class="drag">Drag 10</li>
        <li class="drag">Drag 11</li>
        <li class="drag">Drag 12</li>
    </ul>
</div> 
```

# iphone - 在 UIImage 中获取和显示 facebook 个人资料图片

> ID：15776836
> 
> 赞同：-1
> 
> 时间：2013-04-03T00:22:30.400
> 
> 标签：iphone, ios, objective-c

我正在尝试制作一个 facebook 朋友选择器，显示当前安装了该应用程序的朋友，这些朋友也是当前用户的 facebook 朋友。

在这里，我正在获取用户的 facebook 个人资料图片，但是，我似乎有一个警告，其中没有使用最后一条语句。谢谢你的帮助。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"friendCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    PFUser *facebookID = [[PFUser alloc] init];
    facebookID = [friendUsers objectAtIndex:0];
    NSString *fbIdString = [[NSString alloc] init];
    fbIdString = [facebookID objectForKey:@"fbId"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        NSURL *profilePictureURL = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@/picture?type=large", fbIdString]];
        NSData *picData = [NSData dataWithContentsOfURL:profilePictureURL];
        UIImage *fbPic = (UIImage *)[self.view viewWithTag:1001];
        [fbPic initWithData:picData];

    }

    // Configure the cell...

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:31:03.157

您需要将`initWithData:`调用结果实际分配给您的`fbPic`图像。例如

```
fbPic = [fbPic initWithData: picData]; 
```

从[关于 UIImage 的苹果文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)：

`- (id)initWithData:(NSData *)data`

**参数**

*   data - 包含图像数据的数据对象。

**返回值**

*   一个已初始化的 UIImage 对象，如果方法无法从指定的数据初始化图像，则返回 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:39:08.757

有几件事：

1.  `UIImage *fbPic = (UIImage *)[self.view viewWithTag:1001];`- 我想你正试图从单元格中获取 UIImageView？
2.  没有 UIImageView 您实际显示图像的位置。

它应该是这样的：

```
if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        NSURL *profilePictureURL = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@/picture?type=large", fbIdString]];
        NSData *picData = [NSData dataWithContentsOfURL:profilePictureURL];
        UIImageView *fbPicImageView = (UIImageView *)[self.view viewWithTag:1001];
        [fbPicImageView setImage:[UIImage imageWithData:picData]];
    } 
```

# c# - 无效的高代理字符 (0xDEE1)。高代理字符的值必须在 (0xD800 - 0xDBFF) 范围内

> ID：15776838
> 
> 赞同：0
> 
> 时间：2013-04-03T00:22:41.093
> 
> 标签：c#, linq-to-xml, aes

我该如何解决这个错误，我`cardnumber`只尝试过加密，当我已经添加了 .xml 文件时，我在创建 xml 文件时没有问题`expdate`。它提示错误，

到目前为止，这是我的代码：

```
 cardnumber = cs_aes.Encrypt(cardnumber);
expdate = cs_aes.Encrypt(expdate);

XElement xml_request = new XElement("Request",
                new XElement("Transaction",
                    new XElement("CardNumber", cardnumber),
                    new XElement("CardMember", cardmember),
                    new XElement("ExpDate", expdate),
                    new XElement("Amount", amount),
                    new XElement("Invoice", invoice),
                    new XElement("Zip", zip),
                    new XElement("Street", street),
                    new XElement("Security", security),
                    ));

                    xml_request.Save(path here); 
```

加密/解密代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T00:49:13.583

您的 GetString() 方法已损坏。您不能将 byte[] 存储在这样的字符串中。字符串中的字节值**不是**任意的，它们必须遵守规范化的 utf-16 编码字符串的规则。您可能很幸运，因为它很早就因一个不好的代理值而窒息，标准化也有随机破坏您的数据的习惯，而您不会轻易发现它。

您可以使用 Convert.ToBase64String() 将 byte[] 转换为字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T00:45:31.847

正如预期的那样，您的代码通过本质上将字节数组转换为字符数组而不是字符串来将字节序列转换为字符串。

这是个坏主意，因为字节数组可能包含在许多期望有效字符串的上下文中无效/不可接受的序列：

*   0 个字符（两个 0 字节）可能会导致许多 API 将字符串视为在该字符处终止
*   0-31 个字符在 XML 中不可打印/不允许
*   尝试在屏幕上打印/显示时，无效的代理对将无法正确呈现，在 XML 中也不允许
*   许多字符与可见表示无关。

处理字节数组/二进制数据的正确方法是按原样存储（如果存储格式允许）或编码（即对于 XML，建议使用 base64 编码）。

# c - 为什么返回浮点数的函数不能与 void* 回调一起使用？

> ID：15776839
> 
> 赞同：1
> 
> 时间：2013-04-03T00:22:42.130
> 
> 标签：c, callback

在下面的代码中，为什么`int`有效但无效`float`？结果如下。

voidptr.c：

```
#include <stdio.h>

typedef void* (*Fn) ();

int Fun()
{
    return 5;
}

float fFun()
{
    return 5.0;
}

void callfun(Fn f)
{
    printf ("%d \n", f());
}

void callffun(Fn f)
{
    printf ("%f \n", f());
}

int main()
{

    callfun(Fun); // works
    callffun(fFun); // --> doesnt work ??
    printf ("%f", fFun()); // works

    return 0;
} 
```

输出 ：

```
5 
0.000000 
5.000000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:25:10.110

你在对编译器撒谎。结果是不可预测的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T00:37:34.577

您不能将 a`void*`转换为 a`float`并期望它起作用。

更好的解决方案是让您的回调函数返回 void，但接受 void * 作为删除返回值的位置：

```
typedef void (*Fn) (void *);

void Fun(void *ptr)
{
    *(int *)ptr = 5;
}

void fFun(void *ptr)
{
    *(float *)ptr = 5.0;
}

void callfun(Fn f)
{
    int num;
    f(&num);
    printf ("%d \n", num);
}

void callffun(Fn f)
{
    float num;
    f(&num);
    printf ("%f \n", num);
} 
```

这仍然存在问题 - 您需要提前知道传递给回调的指针指向的变量类型。

# mono - SharpZipLib 的 FastZip 不会在 Mac 上解压缩目录

> ID：15776842
> 
> 赞同：3
> 
> 时间：2013-04-03T00:23:06.017
> 
> 标签：mono, sharpziplib, fastzip

我在 Mac 上使用以下代码使用 Mono 解压缩 zip 文件。zip 文件包含目录下的条目（例如`foo/bar.txt`）。但是，在解压后的目录中，FastZip 不是创建一个包含文件的目录，而是创建一个`foo`文件。我该如何解决这个问题？`bar.txt``foo\bar.txt`

```
FastZip fz = new FastZip();
string filePath = @"path\to\myfile.zip";

fz.ExtractZip(filePath, @"path\to\unzip\to", null); 
```

这会`foo\bar.txt`在`path\to\unzip\to`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:56:24.290

显然不能`FastZip`用于这种情况，所以我最终编写了自己的解压缩机制：

```
string filePath = @"path\to\myfile.zip";
string unzipDir = @"path\to\unzip\to";

using (var zipFile = new ZipFile(filePath))
{
    foreach (var zipEntry in zipFile.OfType<ZipEntry>())
    {
        var unzipPath = Path.Combine(unzipDir, zipEntry.Name);
        var directoryPath = Path.GetDirectoryName(unzipPath);

        // create directory if needed
        if (directoryPath.Length > 0)
        {
            Directory.CreateDirectory(directoryPath);
        }

        // unzip the file
        var zipStream = zipFile.GetInputStream(zipEntry);
        var buffer = new byte[4096];

        using (var unzippedFileStream = File.Create(unzipPath))
        {
            StreamUtils.Copy(zipStream, unzippedFileStream, buffer);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-04T05:45:00.107

创建 zip 时使用正斜杠分隔文件夹

# bash - Expect / Bash：在expect中运行bash if语句

> ID：15776844
> 
> 赞同：0
> 
> 时间：2013-04-03T00:23:26.560
> 
> 标签：bash, scripting, tcl, expect

我正在尝试 ssh 进入服务器，并检查 id_rsa.pub 是否存在。如果它不存在，我想运行 ssh-keygen，否则我不想做任何事情。

我可以在 Tcl/Expect 中使用 send 运行简单的命令，如“cat”或“rm”，但是当我尝试做这样的事情时它不起作用：

```
send "if [ ! -f $USER_SSH_PATH/id_rsa.pub ]; then CREATE_FILE=true; fi\r"
expect "# " { }

send "if $CREATE_FILE; then; ssh-keygen -t rsa -C $USER -f $USER_SSH_PATH/id_rsa\r"
... 
```

我收到以下错误消息：# invalid command name "!" 在执行从内部调用的“！-f /root/.ssh/id_rsa.pub ”时

请问可以运行这样的命令吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T06:55:44.000

您需要转义方括号，因为它是 tcl 语法的一部分：

```
send "if \[ ! -f $USER_SSH_PATH/id_rsa.pub \]; then CREATE_FILE=true; fi\r" 
```

在 tcl 中，`[]`以相同的方式工作````或`$()`在 bash 中工作。所以发生的事情是，在执行`send`命令之前，解释器首先对字符串进行替换，它会看到需要替换的两件事：

1.  $USER_SSH_PATH 被变量 USER_SSH_PATH 中包含的值替换

2.  [！`!`....] 被调用函数/命令的结果替换。正如你所发现的那样不存在。

请注意，在 tcl（以及扩展期望）中，变量和函数名称不限于字母数字。具有变量和函数名称，例如甚至 NUL 字符（值为 0 的字节）是有效`$`的`!`：

```
proc ! {} {puts "!"}
proc "$" {} {puts "\$"}
proc \0 {} {puts "NUL character"}

!   ;# this prints !
\$  ;# this prints $
\0  ;# this prints "NUL character" 
```

有关 tcl 语法的更多信息，请参见[http://www.tcl.tk/man/tcl/TclCmd/Tcl.htm](http://www.tcl.tk/man/tcl/TclCmd/Tcl.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:34:39.607

正如 slebetman 已经指出的那样，字符`[`, `]`,`$`和`\`内部具有特殊含义`"`。

*   `[`and`]`用于命令替换，因此`[expr {2+3}]`将替换为`5`(结果)。
*   `$`用于变量替换。
*   `\`用于特殊字符（如`\r`代码点为 13 的字符）

`"`您可以使用以下命令转义这些字符`\`：[我假设这`$USER_SSH_PATH`是一个本地（tcl）变量]

```
send "if \[ ! -f $USER_SSH_PATH/id_rsa.pub \]; then CREATE_FILE=true; fi\r" 
```

或使用`{`and`}`包围你的字符串。
如果您使用`{`并且`}`不会进行替换。这也包括`\r`将被发送`\r`到服务器，而不是作为单个字符。

还有其他一些选项可以创建这样的东西：

*   [`subst`](http://www.tcl.tk/man/tcl8.6/TclCmd/subst.htm)可以对字符串进行替换。也有可能只发生某些类型的替换（使用`-nocommands`switch 来防止`[]`替换，`-novariables`for`$`替换和`-nobackslashes`for `\`）
    示例：

    ```
    send [subst -nocommands \
        {if [ ! -f $USER_SSH_PATH/id_rsa.pub ]; then CREATE_FILE=true; fi\r}] 
    ```

*   [`string map`](http://www.tcl.tk/man/tcl8.6/TclCmd/string.htm#M34)替换某些序列。
    例子

    ```
    send [string map [list {@@r@@} \r {@@USER_SSH_PATH@@} $USER_SSH_PATH] \
       {if [ ! -f @@USER_SSH_PATH@@/id_rsa.pub ]; then CREATE_FILE=true; fi@@r@@}] 
    ```

有很多方法可以做这样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T00:55:06.187

你的里面有什么`$USER_SSH_PATH`？在您的本地和远程机器上是否相同，意味着您具有正确的权限...以下可能会帮助您调试。

```
echo ${USER_SSH_PATH}
ssh <hostname> "
if [ ! -f ${USER_SSH_PATH}/id_rsa.pub ]; then
   echo ${USER_SSH_PATH};
   echo \"File Not Found, Creating....\";
   ssh-key-gen -t rsa -C ${USER} -f ${USER_SSH_PATH}/id_rsa;
else
   echo \"File Found\";
   exit 1;
fi
" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T02:00:40.583

我刚刚想到的一种解决方案是在发送中运行“ls /root/.ssh/ | grep id_rsa.pub”，并使用期望查看输出。我很好奇我怎么能运行 bash if 命令。

要么我会得到“id_rsa.pub”作为回报，要么是空行。但如果我有“id_rsa.pub*”，它就会坏掉。

请问有人有改进的想法吗？谢谢！

# php - 实例化后的声明仅在类未实现接口时才有效

> ID：15776850
> 
> 赞同：2
> 
> 时间：2013-04-03T00:23:59.750
> 
> 标签：php

```
new A;

class A {}

new C;

class C extends A {}

new B;

class B implements iB {}
interface iB {} // we can even put interface definition after the class
                // that implements it 
```

我希望这段代码可以正常工作，而我得到

> PHP致命错误：在...中找不到类'B'

有人可以解释为什么会这样吗？这是记录在案的行为吗？

PS：php 5.3.2

PPS：ideone 上的相同行为：http: [//ideone.com/q4cT6A](http://ideone.com/q4cT6A)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:25:14.980

这与PHP*中的预期一致。*对不起，我也期待过一次。;)

引用[PHP 文档](http://www.php.net/manual/en/language.oop5.inheritance.php)：

> 除非使用自动加载，否则必须在使用类之前定义类。如果一个类扩展了另一个类，则必须在子类结构之前声明父类。此规则适用于继承其他类和接口的类。

# cakephp - cakephp unix登录并执行命令

> ID：15776862
> 
> 赞同：0
> 
> 时间：2013-04-03T00:25:54.410
> 
> 标签：cakephp, unix, command

在过去的几个月里，我为我的公司构建了一个完整的 cakephp 应用程序，用于在 unix 环境中处理工作流、出勤等。

除了那个应用程序，许多人直接登录到 unix 提示符以执行各种 unix 命令，ls、rm 等。

我需要在我的 cakephp 应用程序中添加一个允许登录到 unix 服务器并执行命令的界面（用户将从命令列表中选择）。

对于执行的任何命令，我们都需要显示命令结果。

正如我所提到的，我对 cakephp 非常熟悉，但是我不知道从哪里开始构建我的应用程序的这一部分，即是否有任何神奇的东西可以用于 a) 登录到 unix 服务器，b) 执行 a命令，以及 c) 显示结果。

你能帮我吗？

太感谢了。

卡洛斯

# php - 非法偏移类型？

> ID：15776864
> 
> 赞同：0
> 
> 时间：2013-04-03T00:25:57.397
> 
> 标签：php, mysql, arrays, timestamp

```
$images = valley_images();
var_dump($images);
$sorted_data = array();

foreach($images as $key => $value) {
    if ($key == 'timestamp') {
        $sorted_data[$value][] = $images;
    }
}

ksort($sorted_data); 
```

错误出现在这一行：

```
$sorted_data[$value][] = $images; 
```

当我对图像进行 var 转储时，我收到以下信息：

```
array(2) { 
[0]=> array(2) {
 ["id"]=> string(2) "17" ["timestamp"]=> string(10) "1359797773" 
} 
[1]=> array(2) {
 ["id"]=> string(2) "20" ["timestamp"]=> string(10) "1359934365"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:47:28.100

一种对多维数组中的键进行排序的好方法，而无需先知道数组中有哪些键：

```
<?php 
$people = array( 
array("name"=>"Bob","age"=>8,"colour"=>"red"), 
array("name"=>"Greg","age"=>12,"colour"=>"blue"), 
array("name"=>"Andy","age"=>5,"colour"=>"purple")); 

var_dump($people); 

$sortArray = array(); 

foreach($people as $person){ 
    foreach($person as $key=>$value){ 
        if(!isset($sortArray[$key])){ 
            $sortArray[$key] = array(); 
        } 
        $sortArray[$key][] = $value; 
    } 
} 

$orderby = "name"; //change this to whatever key you want from the array 

array_multisort($sortArray[$orderby],SORT_DESC,$people); 

var_dump($people); 
```

# actionscript-3 - 我可以使用谷歌分析来跟踪 adobe air 桌面应用程序的可用性吗？

> ID：15776865
> 
> 赞同：-1
> 
> 时间：2013-04-03T00:25:58.270
> 
> 标签：actionscript-3, air, google-analytics

我正在尝试使用 gaforflash 来跟踪桌面 adobe air 应用程序的可用性。没有运气......这甚至可能吗？我一直在寻找他们说可能的博客和其他他们说不可能的博客......在谷歌分析Flash网站中，他们有以下评论。

注意：目前，Flash 跟踪可用于网页中嵌入的任何 Flash 内容。目前不支持跟踪从 Adob​​e Air、Shockwave 或通过 Flash IDE（例如使用测试影片）发送的数据。

这里有点失落。非常感谢您能给我一些建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:28:45.330

您可以使用自己的事件来获取分析。但它不在自动模式下。您应该创建许多处理程序。看起来像：

```
protected function init()
{
    // init tracker
    tracker = new GATracker(stage, account, "AS3", false);

    //add handlers
    videoPlayer.addEventListener(MediaPlayerStateChangeEvent.MEDIA_PLAYER_STATE_CHANGE, onPlayerStateChangeHandler);
}
..

protected function onPlayerStateChangeHandler(event:MediaPlayerStateChangeEvent):void 
{
    if (event.state == MediaPlayerState.BUFFERING) 
    {
        if (tracker) tracker.trackEvent("Video", "BUFFERING",  'some title');
    }       

    if (event.state == MediaPlayerState.PLAYING) 
    {
        if (tracker) tracker.trackEvent("Video", "PLAYING",  'some title');
    }
} 
```

# php - 设置选择字段 Symfony FormType 的默认值

> ID：15776867
> 
> 赞同：3
> 
> 时间：2013-04-03T00:26:12.273
> 
> 标签：php, symfony

我想从用户那里选择一种问卷类型，所以我设置了一个包含问卷类型的选择。

类型是从实体加载的`QuestionType`。

```
 $builder
        ->add('questionType', 'entity', array(
              'class'    => 'QuizmooQuestionnaireBundle:QuestionType',
              'property' => 'questionTypeName',
              'multiple' => false,
              'label' => 'Question Type'))
        ->add('type', 'hidden')
    ; 
```

无法实现的是为结果选择设置默认值。

我用谷歌搜索了很多，但我只得到了只适用于数组的[preferred_choice 解决方案](http://symfony.com/doc/current/reference/forms/types/entity.html#preferred-choices)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:28:57.387

我通过在控制器的 newAction 中设置一个类型来实现它，我将设置的类型作为默认值。

```
public function newAction($id)
{
    $entity = new RankingQuestion();

    //getting values form database 
    $em = $this->getDoctrine()->getManager();
    $type =  $em->getRepository('QuizmooQuestionnaireBundle:QuestionType')->findBy(array('name'=>'Ranking Question'));
    $entity->setQuestionType($type); // <- default value is set here 

    // Now in this form the default value for the select input will be 'Ranking Question'
    $form   = $this->createForm(new RankingQuestionType(), $entity);

    return $this->render('QuizmooQuestionnaireBundle:RankingQuestion:new.html.twig', array(
        'entity' => $entity,
        'form'   => $form->createView(),
        'id_questionnaire' =>$id
    ));
} 
```

`data`如果您有一个恒定的默认值（[http://symfony.com/doc/current/reference/forms/types/form.html](http://symfony.com/doc/current/reference/forms/types/form.html) ），您可以使用属性，但如果您使用表单来编辑实体（不要创建一个新的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T00:46:52.177

```
class MyFormType extends AbstractType{

        public function __construct($foo){
          $this->foo = $foo;
        }

        $builder
            ->add('questionType', 'entity', array(
                  'class'    => 'QuizmooQuestionnaireBundle:QuestionType',
                  'property' => 'questionTypeName',
                  'multiple' => false,
                  'label' => 'Question Type'

                  'data' => $this->foo))

            ->add('type', 'hidden')
        ;
} 
```

在控制器中

```
$this->createForm(new MyFormType($foo)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T08:40:58.927

如果您使用实体结果来创建选择菜单，那么您可以使用[preferred_choices](http://symfony.com/doc/current/reference/forms/types/entity.html#preferred-choices%20preferred-choices)。

如文档中所述，首选选项将呈现在列表顶部，因此从技术上讲，第一个选项将是默认选项，前提是您不添加空值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-17T23:41:17.427

预先在模型中设置的公认答案是一个很好的答案。但是，我遇到过需要为类型中每个对象的某个字段设置默认值的情况`collection`。该集合启用了`allow_add`and`allow_remove`选项，因此我无法预先实例化集合中的值，因为我不知道客户端将请求多少对象。因此，我将该`empty_data`选项与所需默认对象的主键一起使用，如下所示：

```
class MyChildType
extends AbstractType 
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('optionalField', 'entity', array(
            'class' => 'MyBundle:MyEntity',
            // Symfony appears to convert this ID into the entity correctly!
            'empty_data' => MyEntity::DEFAULT_ID,
            'required' => false,
        ));
    }
}

class MyParentType
extends AbstractType 
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('children', 'collection', array(
            'type' => new MyChildType(),
            'allow_add' => true
            'allow_delete' => true,
            'prototype' => true,  // client can add as many as it wants
        ));
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-28T17:56:41.697

在实体 ( ) 内的成员变量上设置默认值`QuestionType`，例如

```
/**
 * default the numOfCourses to 10
 *
 * @var integer
 */
private $numCourses = 10; 
```

# objective-c - 如何在标签栏处理的视图中保留 barButton 的值？

> ID：15776870
> 
> 赞同：0
> 
> 时间：2013-04-03T00:26:26.940
> 
> 标签：objective-c, xcode, uibarbuttonitem

我有两周的时间在 Objective-C 中编程。基本上，我有一个由标签栏处理的三个视图。每个视图都有圆角矩形按钮，可以调用具有不同信息的另一个视图。此外，在每个视图的顶部，都有一个条形按钮项。所有这些条形按钮项目的标题取决于开关的值：手动或自动。如果是自动的，按钮的标题必须是“触发器”。如果是手动的，按钮的标题必须是“星”，如果你点击它必须变成“停止”。我的问题是，按钮的标题正在改变，但如果我在第一个视图中并按下“开始”，它会变为“停止”，但在第二个视图中它仍然是“开始”。

那么，你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:41:29.293

对不起，我不明白你的问题（如果你能提供代码或图片会更容易）。因此我试图解释你的问题的标题：
你有一个标签栏控制器，它控制着几个视图控制器，每个控制器都有自己的视图。这些视图彼此独立。如果每个视图都有自己的 barBottom 项，但是当您从一个选项卡视图切换到另一个选项卡视图时它们都应该具有相同的标题，则它们的标题必须由程序更改。由于只有标签栏控制器知道它何时更改其视图，因此它必须将新标题分配给其视图的所有 barBottom 项。
它可以使用与协议对应的委托来执行此操作`UITabBarControllerDelegate`。这个委托（和标签栏控制器可能是它自己的委托）可以例如实现该方法`tabBarController:didSelectViewController:`当一个视图从一个视图切换到另一个视图时调用。在此方法中，标签栏控制器可以通过在其每个视图控制器中调用一个方法来设置新标题（可以通过 property 访问`viewControllers`）。

# c# - 多播和订阅主题的反应式框架问题

> ID：15776877
> 
> 赞同：3
> 
> 时间：2013-04-03T00:27:29.373
> 
> 标签：c#, system.reactive

我刚刚开始学习如何使用反应式框架，并且正在努力将多播发布到多个订阅者。

我让一切都像这样正常工作：

```
m_MessagePublisher = m_ServerClient.MessageQueue
      .GetConsumingEnumerable()
      .ToObservable(TaskPoolScheduler.Default);

var genericServerMessageSubscriber = m_MessagePublisher
      .Where(message => message is GenericServerMessage)
      .Subscribe(message =>
      {
          // do something here
      } 
```

但后来我意识到这不支持多播，当我尝试附加另一个应该被相同消息击中的订阅者时，它不会触发。我一直在阅读 .MultiCast 扩展名并试图弄清楚 Subject 是如何参与其中的，但还不能让它工作：

```
var subject = new Subject<BesiegedMessage>();

var messagePublisher = m_ServerClient.MessageQueue
      .GetConsumingEnumerable()
      .ToObservable(TaskPoolScheduler.Default)
      .Multicast(subject);

// All generic server messages are handled here
var genericServerMessageSubscriber = subject
      .Where(message => message is GenericServerMessage)
      .Subscribe(message =>
      {
            // do something here
      } 
```

但现在没有一个订阅者受到打击，包括之前工作正常的单个订阅者。为了能够正确多播给多个订阅者，我在这里缺少什么？

更新：使用 Subscribe(subject) 而不是 Multicast(subject) 似乎正在多播，这让我对 .MultiCast() 的用途感到非常困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:35:31.000

编辑：

哈哈-适合我阅读太快-您要问的要简单得多...也就是说，我认为以下内容很重要，所以我要离开了...所以，您的问题-尝试添加此行：

```
var messagePublisher = m_ServerClient.MessageQueue
  .GetConsumingEnumerable()
  .ToObservable(TaskPoolScheduler.Default)
  .Multicast(subject)
  // Here: connectable observables are a PITA...
  .RefCount(); 
```

结束编辑：

嗯...如何描述`Multicast`...我想我们举个例子：

假设你有这样的东西——你认为它会产生什么？

```
int delay = 100;
var source = Observable.Interval(TimeSpan.FromMilliseconds(delay));
var publishingFrontend = new Subject<string>();

// Here's "raw"
var rawStream = source;
using(rawStream.Subscribe(x => Console.WriteLine("{0}", x)))
{
    Thread.Sleep(delay * 3);
    using(rawStream.Subscribe(x => Console.WriteLine("Inner: {0}", x)))
    {
        Thread.Sleep(delay * 3);
    }
    Thread.Sleep(delay * 5);
} 
```

由于您订阅的是原始流，因此新订阅者基本上是从头开始的：

（如果您重新运行，这将不会 100% 匹配，因为我采取了笨拙的方式`Thread.Sleep`，但应该接近）

```
0
1
2
Inner: 0
3
Inner: 1
4
5
6
7
8
9 
```

嗯……所以如果我们想“在中游”，我们使用以下`Publish().RefCount()`模式：

```
var singleSource = source.Publish().RefCount();
using(singleSource.Subscribe(x => Console.WriteLine("{0}", x)))
{
    Thread.Sleep(delay * 3);
    using(singleSource.Subscribe(x => Console.WriteLine("Inner: {0}", x)))
    {
        Thread.Sleep(delay * 3);
    }
    Thread.Sleep(delay * 5);
} 
```

这会产生类似的东西：

```
0
1
2
Inner: 2
3
Inner: 3
4
Inner: 4
5
6
7
8
9 
```

假设我们没有`Publish()`操作符——我们如何*模拟*它？

```
Console.WriteLine("Simulated Publish:");
// use a subject to proxy values...
var innerSubject = new Subject<long>();
// wire up the source to "write to" the subject
var innerSub = source.Subscribe(innerSubject);
var simulatedSingleSource = Observable.Create<long>(obs =>
{
    // return subscriptions to the "proxied" subject
    var publishPoint = innerSubject.Subscribe(obs);        
    return publishPoint;
}); 
```

运行这个，我们得到：

```
Simulated Publish:
0
1
2
Inner: 2
3
Inner: 3
4
Inner: 4
5
6
7
8
9 
```

哇！

*但还有另一种方法...*

```
Console.WriteLine("MulticastPublish:");
var multicastPublish = source.Multicast(new Subject<long>()).RefCount();    
using(multicastPublish.Subscribe(x => Console.WriteLine("{0}", x)))
{
    Thread.Sleep(delay * 3);
    using(multicastPublish.Subscribe(x => Console.WriteLine("Inner: {0}", x)))
    {
        Thread.Sleep(delay * 3);
    }
    Thread.Sleep(delay * 5);
} 
```

输出：

```
MulticastPublish:
0
1
2
Inner: 2
3
Inner: 3
4
Inner: 4
5
6
7
8
9 
```

编辑：

事实上，所有的`ConnectableObservable`生成扩展都依赖于`Multicast`/`Subject`配对：

```
Publish() => Multicast(new Subject<T>)
Replay() => Multicast(new ReplaySubject<T>)
PublishLast() => Multicast(new AsyncSubject<T>) 
```

# php - 来自另一个函数的数组中的参考检测

> ID：15776880
> 
> 赞同：10
> 
> 时间：2013-04-03T00:28:28.743
> 
> 标签：php, arrays, loops, reference

所以我使用的是 pin 方法，但是检测到参考为时已晚：

```
$pin = time();

function wrap($arr){
  test($arr);
}

function test(&$arr){
    global $pin;

    if(in_array($pin, $arr))
        return print "ref";

    $arr[] = $pin;

    foreach($arr as &$v){

        if($v != $pin){

            if(is_array($v))
                return test($v);

            print $v . " ";

      }

    }

}

$array = array(1, 2, 3);
$array[4] = &$array;

wrap($array); 
```

我明白了`1 2 3 1 2 3 rec`

但我期待`1 2 3 rec`

如果我只是这样做，`test($arr)`那么它可以工作，但问题是我需要将测试函数包装在另一个接受值而不是引用的函数中:(

有什么方法可以在正确的时刻用我的包装函数检测到引用吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T08:38:42.017

**介绍**

我认为更好的方法是创建数组的副本并比较修改而不是使用全局引脚，它仍然可以是`100% Recursive`

**示例 1**

这是来自您上面的示例：

```
$array = array(1,2,3);
$array[4] = &$array;
wrap($array); 
```

输出

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [4] => ref
) 
```

**示例 2**

我们真的确定它的检测参考还是只是数组的副本

```
//Case 1 : Expect no modification
$array = array(1, 2, 3, array(1, 2, 3));
wrap( $array);

//Case 2 : Expect Modification in Key 2
$array = array(1, 2, 3, array(1, 2, 3));
$array[2] = &$array;
wrap( $array); 
```

输出

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
        )

)
Array
(
    [0] => 1
    [1] => 2
    [2] => ref
    [3] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
        )

) 
```

**示例 3**

这真的是递归的吗？

```
$array = array(1, 2, 3, array(1, 2, 3));
$array[4][4][2][6][1] = array(1,2,3=>&$array);
wrap( $array); 
```

输出

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
        )

    [4] => Array
        (
            [4] => Array
                (
                    [2] => Array
                        (
                            [6] => Array
                                (
                                    [1] => Array
                                        (
                                            [0] => 1
                                            [1] => 2
                                            [3] => ref   <-- GOT YOU
                                        )

                                )

                        )

                )

        )

) 
```

**您修改后的功能**

```
/**
 * Added printf since test now returns array
 * @param array $arr
 */
function wrap(array $arr) {
    printf("<pre>%s<pre>", print_r(test($arr), true));
}

/**
 * - Removed Top Refrence
 * - Removed Global
 * - Add Recursion
 * - Returns array
 * @param array $arr
 * @return array
 */
function test(array $arr) {
    $temp = $arr;
    foreach ( $arr as $key => &$v ) {
        if (is_array($v)) {
            $temp[$key]['_PIN_'] = true;
            $v = isset($arr[$key]['_PIN_']) ? "ref" : test($v);
        }
    }
    unset($temp); // cleanup
    return $arr;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T00:45:46.497

我认为你把事情复杂化了。我通过遍历数组并检查数组中的当前值是否与数组等价（`===`）来解决这个问题。

```
function wrap( $arr){
    test($arr);
}

function test( $arr){
    foreach( $arr as $v) {
        if( $v === $arr) { 
            print 'ref, ';
        } else {
            if( is_array( $v)) { 
                test( $v); 
            } else {
                print $v . ', ';
            }
        }
    }
} 
```

我使用了以下测试用例：

```
echo "Array 1:\n";
$array1 = array(1, 2, 3);
$array1[4] = &$array1;
wrap( $array1);

echo "\nArray 2:\n";
$array2 = array(1, 2, 3, array(1, 2, 3));
$array2[2] = &$array2;
wrap( $array2); 
```

产生[了这个输出](http://viper-7.com/riQjk6)：

```
Array 1: 
1, 2, 3, ref 
Array 2: 
1, 2, ref, 1, 2, 3, 
```

但是，对于嵌套引用，上述方法将失败。如果嵌套引用是可能的，如以下测试用例所示：

```
echo "\nArray 3:\n";
$array3 = array(1, 2, 3, array(1, 2, 3));
$array3[3][2] = &$array3;
wrap( $array3); 
```

然后我们需要跟踪我们看到的所有数组引用，如下所示：

```
function wrap( $arr){
    test( $arr);
}

function test( $arr){
    $refs = array(); // Array of references that we've seen

    $f = function( $arr) use( &$refs, &$f) {
        $refs[] = $arr;
        foreach( $arr as $v) {
            if( in_array( $v, $refs)) { 
                print 'ref, ';
            } else {
                if( is_array( $v)) {
                    $f( $v); 
                } else {
                    print $v . ', ';
                }
            }
        }
    };
    $f( $arr);
} 
```

使用上面的测试用例，输出：

```
Array 3: 
1, 2, 3, 1, ref, 3, 
```

**编辑：**我更新了跟踪所有引用以消除全局依赖关系的最终函数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-25T08:43:36.020

```
function wrap($arr){ test($arr); }
/// ...
wrap($array); 
```

您的`wrap()`函数为`$arr`. 当你`test()`在 s 体内调用函数时`wrap()`，它会引用`$arr`内存块，而不是`$array`s 内存块，因为`$arr` ***它是一个副本***，`$array`PHP 内存管理系统*将它们分开存储*。

* * *

有一个通用的参考点功能：

```
function is_equal_refs(&$a, &$b){
    $buffer = $a;          // saving current value in temporary variable

    $a = md5(time());      // assigning new value to memory block, pointed by reference

    $result = ($a === $b); // if they're still equal, then they're point to the same place.

    $a = $buffer;          // restoring value

    return $result;        // returning result
} 
```

所以，让我们做一些测试：

```
<?php
header('Content-Type: text/plain');

function is_equal_refs(&$a, &$b){
    $buffer = $a;

    $a = md5(time());

    $result = ($a === $b);

    $a = $buffer;

    return $result;
}

function wrap($arr){ test($arr); }

function test(&$arr){
    foreach($arr as &$v){

        if(is_equal_refs($arr, $v)){
            print_r('ref');
            echo PHP_EOL;
            break;
        }

        if(is_array($v))return test($v);

        print_r($v);
        echo PHP_EOL;
    }
}

$array   = array(1, 2, 3);
$array[] = &$array;

wrap($array);
?> 
```

显示：

```
1   // < $arr
2
3
1   // < $array
2
3
ref // < $array doubled -> reference found 
```

这种行为的原因是`$arr[3]`包含对`$array`s内存块的引用，而不是对自身内存块的引用。

让我们删除`$array[] = &$array;`一行，并修改`wrap()`函数以检查：

```
function wrap($arr){
    $arr[] = &$arr;

    test($arr);
} 
```

结果将是：

```
1   // < $arr
2
3
ref // < $arr doubled -> reference found 
```

因为`$arr`不是指向`$array`，而是指向本身在`$arr[3]`。因此，在您的代码中，您想要发现不同的引用。

* * *

**结论：**您想要实现的是打破 PHP 内存管理规则。

* * *

**UPDv1：**

需要寻求**解决方法**，以恢复函数范围内`$array`的引用。`wrap()`

*1）“**坏**”/“**全局**”实践：*

```
<?php
header('Content-Type: text/plain');

function is_equal_refs(&$a, &$b){
    $buffer = $a;

    $a = md5(time());

    $result = ($a === $b);

    $a = $buffer;

    return $result;
}

function wrap($array){
    global $check; // <- THIS

    test(empty($check) ? $array : $check); // <- THIS
}

function test(&$arr){
    foreach($arr as &$v){

        if(is_equal_refs($v, $arr)){
            print_r('ref');
            echo PHP_EOL;
            break;
        }

        if(is_array($v)){
            test($v);
        } else {
            print $v . ' ';
            echo PHP_EOL;
        }
    }
}

$array   = array(1, 2, 3);
$array[] = &$array;
$check   = &$array; // <- and THIS

wrap($array);
?> 
```

这表明：

```
1
2
3
ref 
```

* * *

*2）“**将所有内容包装在数组或对象中**”的做法：（*首选且可靠）

```
<?php
header('Content-Type: text/plain');

define('REF_MARKER', 'x-my-tr!cky-ref'); // trick key definition

function is_equal_refs(&$a, &$b){
        $buffer = $a;

        $a = md5(time());

        $result = ($a === $b);

        $a = $buffer;

        return $result;
    }

function wrap(array $arr){
        // restore reference, if trick.
        // it might be moved to the top part of test() function (might affect performance).
        if(isset($arr[REF_MARKER]))$arr = &$arr[REF_MARKER];

        test($arr);
    }

// $array - subject to test;
// $refs  - internal ref list of all `subjects`;
function test(&$array, $refs = array()){
        $refs[] = &$array;

        foreach($array as &$value){

            foreach($refs as &$ref){
                if(is_equal_refs($ref, $value))return print 'ref ';
            }

            if(is_array($value)){
                $refs[] = &$value;

                test($value, $refs);
            } else {
                print $value . ' ';
            }
        }
    }

$array   = array(1, 2, 3);
$array[] = &$array;

wrap(array(REF_MARKER => &$array)); // trick

print PHP_EOL;

$ring      = array(1, 2, 3, array(4, 5, 6));
$ring[3][] = &$ring;

wrap(array(REF_MARKER => &$ring)); // trick

print PHP_EOL;

$test = array('a', 'b', 'c');
$ring = array(1, 2, 3);

$ring[] = &$test;
$test[] = &$ring;

wrap(array(REF_MARKER => &$ring)); // trick

print PHP_EOL;

wrap(range(1, 5)); // normal

print PHP_EOL;

$test = array(1, 2, 3, array(1, 2, 3), 4, array(5, 2, 3), array(6, array(1, 2, 3), 7), array(1, 2, 3));

wrap($test); // normal

print PHP_EOL;

$test[]    = &$test;
$test[3][] = &$test;
$test[5][] = &$test[3];

wrap(array(REF_MARKER => &$test)); // trick
?> 
```

显示：

```
1 2 3 ref
1 2 3 4 5 6 ref
1 2 3 a b c ref
1 2 3 4 5
1 2 3 1 2 3 4 5 2 3 6 1 2 3 7 1 2 3
1 2 3 1 2 3 ref 4 5 2 3 ref 6 1 2 3 7 1 2 3 ref 
```

# jquery - jqgrid > 多个分组折叠

> ID：15776883
> 
> 赞同：0
> 
> 时间：2013-04-03T00:28:40.900
> 
> 标签：jquery, jqgrid

我一直在使用一个处理销售检查的数据库，我需要能够首先按分支对数据进行分组，然后按销售人员，最后按客户，并显示已注册给每个客户的所有个人支票。我使用了 groupCollapse 参数，但令我惊讶的是，它只影响您添加到 groupField 数组的最后一列，因此其余字段，即使折叠图标是一个 + 号，它们也会显示为未折叠。

有谁知道解决方法？我试图弄乱 groupingToggle 功能，但我真的不知道它是如何工作的......我仍在尝试了解 javascript/jquery 的工作原理，所以我真的很难找到解决这个问题的方法问题。

如果您需要我，我可以将我的代码上传到某个地方，以便您查看。
**更新**

这是我的代码的分组部分：

```
grouping:true,
groupingView : {
groupField : ['Sucursal','SlpName','OCRDCardName'],
groupColumnShow : [false, false],
groupText : ['<b>{0}</b>'],
groupCollapse : true,
groupOrder: ['asc', 'asc'],
groupSummary : [true, true],
showSummaryOnHide: true
} 
```

这是我的 jsfiddle：http: [//jsfiddle.net/xnkUr/](http://jsfiddle.net/xnkUr/)

# mysql - mysql 在匹配用户表中找到的用户名和 uid 时插入主机表

> ID：15776886
> 
> 赞同：1
> 
> 时间：2013-04-03T00:29:11.123
> 
> 标签：mysql, insert

我有一个命令行脚本可以将用户插入到主机表中。但是我只想在用户名和 UID 与用户表中的用户名和 uid 匹配时才允许添加到主机。

我有这个.. 效果很好... [即使没有 INTO]

```
doquery2() {                                                                                                                              
mysql -e "$query2" -h $DBHOST --password=******* userdb

}                                                         

INSERT hosts SET hostname=\"$HostName\",                                                                                          
username=\"$UserName\",                                                                                                                   
password=\"$Password\",                                                                                                                   
UID=\"$zUID\",                                                                                                                            
GID=\"$zGID\",                                                                                                                            
Full_Name=\"${FullName:=empty}\",                                                                                                         
Homedir=\"${HomeDir:=empty}\",                                                                                                            
Default_shell=\"${DefaultShell:=empty}\"" 
```

但我想从用户表中添加查找，并且仅在用户名和 UID 匹配时添加到主机。

有任何想法吗？

# javascript - 未捕获的类型错误：在单独的文件中包含 javascript 类时，未定义不是函数

> ID：15776887
> 
> 赞同：4
> 
> 时间：2013-04-03T00:29:20.047
> 
> 标签：javascript, class, include, raphael

我是 Javascript 类的新手，但我尝试使用 Raphael 创建一个简单的绘图应用程序。我目前遇到的问题是一些代码在同一个文件中时有效，但是当我尝试将其取出并包含它时，它给了我：

```
Uncaught TypeError: undefined is not a function. 
```

我的第一个想法是文件没有被正确包含，所以我检查了，chrome 的开发帮助工具显示资源很好。

代码位于名为 line.js 的文件中：

```
function line(paper) {
    this.x1 = null;
    this.x2 = null;
    this.y1 = null;
    this.y2 = null;

    this.paper = paper;
};

line.prototype.draw = function(){
    this.paper.path(
        "M " + this.x1 + " " + this.y1 +
        " l " + (this.x2 - this.x1) + " " + (this.y2 - this.y1) + " z"
    );
}; 
```

并且正在使用它的代码是：

```
<script type="text/javascript" src="../js/raphael-min2.1.js"></script>
<script type="text/javascript" src="../js/line.js"></script>

<script>
window.onload = function() {  
    var paper = new Raphael($('#canvas')[0], 500, 500);
    var canvas =$('#canvas');    
    var line = new line(paper);

    canvas.mousedown(function(e){
        line.x1 = e.offsetX;
        line.y1 = e.offsetY;
    });

    canvas.mouseup(function(e){
        line.x2 = e.offsetX;
        line.y2 = e.offsetY;
        line.draw();
    });
};
</script> 
```

我以前从未在 javascript 中使用过类，也没有包含我自己制作的 js 文件，所以对此事的任何了解，不仅仅是修复会很好。此外，如果您认为有更好的方法来处理我通常如何做到这一点，请告诉我！非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:46:47.440

出现此问题是因为您的对象的名称和类的名称相同。尝试为您的对象起一个不同的名称，如下所示：

```
var newLine=new line(paper); 
```

此外，当我尝试为对象和类赋予相同的名称时，我得到 TypeError: line is not a constructor in Firebug 并且当我将代码放入 line.js 或 window.onload 之前的位置时会发生此错误。

# android - 如何实现自定义视图作为 MVC 的一部分？

> ID：15776889
> 
> 赞同：1
> 
> 时间：2013-04-03T00:29:31.353
> 
> 标签：android, model-view-controller, view

所以我正在尝试在 Android 中实现 MVC 模式，其中我的视图是从 RelativeLayout、LinearLayout、ScrollView 等子类化的......它一直在工作，直到我尝试在我的视图中获取一个视图。我得到一个NPE。我尝试访问视图以便在构造函数和 onAttachedToWindow() 中设置 onClickListener，但我在这两个地方都得到了 NPE。

例如，这是一个视图类：

```
public class ViewAchievements extends LinearLayout
{
    private RelativeLayout mRelativeLayoutAchievement1;

    public ViewAchievements(Context context, AttributeSet attrs)
    {
        super(context, attrs);

        mRelativeLayoutAchievement1 = (RelativeLayout) findViewById(R.id.relativeLayout_achievement1);
        mRelativeLayoutAchievement1.setOnClickListener((OnClickListener) context); //NPE on this line
    }

    @Override
    protected void onAttachedToWindow()
    {
        super.onAttachedToWindow();

        mRelativeLayoutAchievement1.setOnClickListener(mOnClickListener); //Also get NPE on this line
    }
} 
```

有人可以告诉我获取我的子视图的正确方法，在这种情况下是 mRelativeLayoutAchievement1？

这是一个 XML 片段：

```
<com.beachbody.p90x.achievements.ViewAchievements xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/gray_very_dark"
    android:orientation="vertical" >

    <!-- kv Row 1 -->

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:orientation="horizontal" 
        android:layout_weight="1"
        android:baselineAligned="false">

        <RelativeLayout
            android:id="@+id/relativeLayout_achievement1"
            style="@style/linearLayout_achievement"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_margin="@dimen/margin_sm"
            android:layout_weight="1" >

            <TextView
                android:id="@+id/textView_achievement1"
                style="@style/text_small_bold_gray"
                android:layout_width="wrap_content" 
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_centerHorizontal="true"
                android:layout_marginBottom="@dimen/margin_large"
                android:text="1/20" />
        </RelativeLayout>
... 
```

下面是我如何从我的 Activity 创建视图：

```
public class ActivityAchievements extends ActivitySlidingMenu
{
    private ViewAchievements mViewAchievements;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        mViewAchievements = (ViewAchievements) View.inflate(this, R.layout.view_achievements, null);
        setContentView(mViewAchievements);
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:21:23.447

You're trying to get the child views during the view's constructor. Since they are child views, they haven't been inflated yet. Can you move this code out of the constructor, possibly into View.onAttachedToWindow()?

[http://developer.android.com/reference/android/view/View.html#onAttachedToWindow()](http://developer.android.com/reference/android/view/View.html#onAttachedToWindow())

# vb.net - ASCII 转换工具帮助 VB.NET

> ID：15776891
> 
> 赞同：-2
> 
> 时间：2013-04-03T00:29:49.263
> 
> 标签：vb.net

我正在尝试按照 Branah Unicode Converter 的方式制作一些东西来解码这样的行，例如：[99,97,108,108,32,99]。[http://www.branah.com/unicode-converter](http://www.branah.com/unicode-converter)。我找到了这个。我猜这个表单有一个文本框和 2 个按钮。一种是使用 Asc 获取文本框的 ASCII 码，另一种是使用 Chr 将文本框中的 ASCII 码转换为字符。

所以，上次我发布这个时，它被关闭了，因为它不是“一个真正的问题”。让我直言不讳。我不知道如何让这个工作。事物的标签非常混乱。我应该将 Text1、Text2、Text3 和 Label 6 声明为什么，因为它给了我未声明它们的错误？我还收到一个错误，即 TextBox1 无法从此行转换为整数：Text2 = Text2 + Chr(TextBox1)。我该如何解决？我不是在进口我应该进口的东西吗？

```
 Private Sub EncodeButton_Click()

     'Code the character
     TextBox1 = Asc(Text1)
     'clears text box
     Text1 = ""
     ' adds the coded character to the textbox (Textbox1)
     LABEL6 = LABEL6 + "," + TextBox1
     ' set focus to textbox
     Text1.SetFocus
     'decodes the coded character
     Text2 = Text2 + Chr(TextBox1)
   End Sub

      Private Sub DecodeButton_Click()

      'this part decodes the coded number
      TextBox1 = Text3
      Text3 = ""
      LABEL6 = LABEL6 + "," + TextBox1
      Text2 = Text2 + Chr(TextBox1)
      Text3.SetFocus
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:04:28.740

以下是如何使此代码在 VB.NET 中工作：

*   创建一个新的 Windows 窗体项目。
*   在项目中有一个表单，打开它并创建以下项目：

    *   三个文本框，分别命名为 Text1、Text2、Text3
    *   两个按钮，分别命名为 EncodeButton 和 DecodeButton
    *   一个名为 Label6 的标签
*   右键单击解决方案资源管理器中的表单，然后选择“查看代码”。

*   将以下代码粘贴到代码窗口中：

    ```
    Public Class Form1

    Private Sub EncodeButton_Click(sender As System.Object, e As System.EventArgs) Handles EncodeButton.Click
        Dim sTextBox1 As String
        sTextBox1 = Asc(Text1.Text)
        Text1.Text = ""
        Label6.Text = Label6.Text & "," & sTextBox1
        Text1.Focus()
        Text2.Text = Text2.Text + Chr(sTextBox1)
    End Sub

    Private Sub DecodeButton_Click(sender As System.Object, e As System.EventArgs) Handles DecodeButton.Click
        Dim sTextBox1 As Integer

        sTextBox1 = Val(Text3.Text)
        Text3.Text = ""
        Label6.Text = Label6.Text & "," & sTextBox1
        Text2.Text = Text2.Text & Chr(sTextBox1)
        Text3.Focus()
    End Sub

    End Class 
    ```

*   运行项目。

*   在 Text1 中键入一个字母，然后单击 EncodeButton
*   在 Text3 中输入一个数字（先尝试 Label6 中出现的数字之一），然后单击 DecodeButton

这应该完成您粘贴的示例旨在完成的所有工作。如果您对这些步骤中的任何一个有困难，我建议您在线查找一个好的 Windows 窗体教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:34:25.017

您的部分问题可能是您需要了解像 TextBoxes 这样的控件具有属性和方法。

因此，要从名为 Text1 的文本框中获取值并将其设置为名为 TextBox1 的文本框，您可以这样做：

```
 TextBox1.Text = Asc(Text1.Text) 
```

如果您输入控件的名称并在之后点击句号（“.”）字符，智能感知将为您提供一个非常有用的属性列表和可以使用的方法。

如果您从其他地方复制了此代码，您可能还需要创建一个表单，并将一些 TextBox 控件拖放到它上面，然后给出与您的代码匹配的名称。

# pyqt - 更改 QGraphicsScene 中的多选绑定键

> ID：15776895
> 
> 赞同：5
> 
> 时间：2013-04-03T00:30:30.327
> 
> 标签：pyqt, qgraphicsview, qgraphicsscene

我`QGraphicsScene`在 PyQT 中进行子类化，并希望将`Shift`键（修饰符）用于多选项目而不是`control`键。

我可以通过将其子类化并制作自己的 来`mousePressedEvent`做到这一点，但是当我这样做时，当我开始拖动它们时，场景中的 graphicsItem 表现得很奇怪。

我需要的只是将`control`键更改`shift`为多选键。如果有人可以提供帮助，我将不胜感激。

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *

class GraphicsScene(QGraphicsScene):
    def __init__(self, parent=None, ns=""):
        super(GraphicsScene, self).__init__(parent)
        self.parent = parent
        self.prevItem = []
        self.ns = ns
        self.setBackgroundBrush(QBrush(QColor(50,50,50) , Qt.SolidPattern))

    def mouseReleaseEvent(self, event):
        if event.button() == 2: #Right mouse click
            #Set previous selections selected
            for item in self.prevItem:
                item.setSelected(1)

            item = self.itemAt(event.lastScenePos ().x(), event.lastScenePos ().y())
            if item:
                item.setSelected(1)

        if event.button() == 1: # Left mouse click
            #Get selected item
            items = self.selectedItems()

            #Shift click
            if event.modifiers() & Qt.ShiftModifier: 
                #Set previous items selected
                for item in self.prevItem:
                    item.setSelected(1)

                for item in items:
                    self.prevItem.append(item)

                item = self.itemAt(event.scenePos ().x(), event.scenePos ().y())
                if item == None:
                    self.clearSelection()

            else:
                self.prevItem = []
                for item in items:
                    self.prevItem.append(item)

        super(GraphicsScene, self).mouseReleaseEvent(event)

    def mousePressEvent(self, event):
        if event.modifiers() & Qt.ShiftModifier:
            item = self.itemAt(event.scenePos ().x(), event.scenePos ().y())
            if item:
                item.setSelected(1)

        super(GraphicsScene, self).mousePressEvent(event)

class MainClass(QMainWindow):
    def __init__(self, parent=None):
        super(QMainWindow, self).__init__(parent)        

        self.setGeometry(50,50,400,600)

        widget = QWidget()
        self.setCentralWidget(widget)
        layout = QGridLayout()
        layout.setMargin(3)

        widget.setLayout(layout)

        view = QGraphicsView()
        view.setMouseTracking(1)
        view.setDragMode(QGraphicsView.RubberBandDrag)
        view.setRenderHint(QPainter.Antialiasing)
        view.setRenderHint(QPainter.TextAntialiasing)
        view.setTransformationAnchor(QGraphicsView.AnchorUnderMouse) 
        view.setAlignment(Qt.AlignJustify)

        scene = GraphicsScene(self)
        scene.setSceneRect(0,0, 300, 500)

        view.setScene(scene)
        layout.addWidget(view)

        elipseOne = QGraphicsEllipseItem (30,30,30,30, parent=None, scene=scene)
        elipseOne.setFlags(QGraphicsItem.ItemIsSelectable | QGraphicsItem.ItemIsFocusable | QGraphicsItem.ItemIsMovable)

        elipseTwo = QGraphicsEllipseItem (60,60,30,30, parent=None, scene=scene)
        elipseTwo.setFlags(QGraphicsItem.ItemIsSelectable | QGraphicsItem.ItemIsFocusable | QGraphicsItem.ItemIsMovable)

win = MainClass()
win.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-11T13:06:35.453

修改了你的 mousePress 和 mouseRelease 事件希望它有帮助

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *
import sys
from collections import deque

class GraphicsScene(QGraphicsScene):
    def __init__(self, parent=None, ns=""):
        super(GraphicsScene, self).__init__(parent)
        self.parent = parent
        self._selectedItemVec = deque()
        self.ns = ns
        self.setBackgroundBrush(QBrush(QColor(50,50,50) , Qt.SolidPattern))

    def mouseReleaseEvent(self, event):
        item = self.itemAt(event.scenePos ().x(), event.scenePos ().y())
        if item:
            item.setSelected(1)
        else:
            if len(self._selectedItemVec):
                self._selectedItemVec.popleft()
                return QGraphicsScene.mouseReleaseEvent(self, event)
        if event.modifiers() & Qt.ShiftModifier:
            for item in self._selectedItemVec:
                item.setSelected(1)
        else:
            self._selectedItemVec.popleft()

    def mousePressEvent(self, event):

        item = self.itemAt(event.scenePos ().x(), event.scenePos ().y())
        if item:
            item.setSelected(1)
            self._selectedItemVec.append(item)
        else:
            return QGraphicsScene.mousePressEvent(self, event)

class MainClass(QMainWindow):
    def __init__(self, parent=None):
        super(QMainWindow, self).__init__(parent)        

        self.setGeometry(50,50,400,600)

        widget = QWidget()
        self.setCentralWidget(widget)
        layout = QGridLayout()
        layout.setMargin(3)

        widget.setLayout(layout)

        view = QGraphicsView()
        view.setMouseTracking(1)
        view.setDragMode(QGraphicsView.RubberBandDrag)
        view.setRenderHint(QPainter.Antialiasing)
        view.setRenderHint(QPainter.TextAntialiasing)
        view.setTransformationAnchor(QGraphicsView.AnchorUnderMouse) 
        view.setAlignment(Qt.AlignJustify)

        scene = GraphicsScene(self)
        scene.setSceneRect(0,0, 300, 500)

        view.setScene(scene)
        layout.addWidget(view)

        elipseOne = QGraphicsEllipseItem (30,30,30,30, parent=None, scene=scene)
        elipseOne.setFlags(QGraphicsItem.ItemIsSelectable | QGraphicsItem.ItemIsFocusable | QGraphicsItem.ItemIsMovable)

        elipseTwo = QGraphicsEllipseItem (60,60,30,30, parent=None, scene=scene)
        elipseTwo.setFlags(QGraphicsItem.ItemIsSelectable | QGraphicsItem.ItemIsFocusable | QGraphicsItem.ItemIsMovable)
if __name__ == '__main__':

    app = QApplication(sys.argv)
    win = MainClass()
    win.show()
    sys.exit(app.exec_()) 
```

# .net - 如何将 ManagementObjectCollection 对象转换为 Powershell 可读的格式？

> ID：15776896
> 
> 赞同：2
> 
> 时间：2013-04-03T00:30:38.023
> 
> 标签：.net, powershell, wmi-query

由于我需要超时参数，我正在尝试使用 Daniele 的自定义[get-wmiobject 函数从远程计算机检索逻辑磁盘信息。](http://blogs.msdn.com/b/dmuscett/archive/2009/05/27/get_2d00_wmicustom.aspx)

该函数工作得很好，但我还想将 $results 存储在一个变量中并循环通过它来查找可用空间已降至某个阈值以下的驱动器。

这是我的部分代码。我在 Daniele 的函数中添加了一个 $where 参数以附加到查询中。他的功能在其他方面是相同的。

```
Function get-wmicustom([string]$computername,[string]$namespace,[string]$class,[int]$timeout=15,[string]$where)
{
    $ConnectionOptions = new-object System.Management.ConnectionOptions
    $EnumerationOptions = new-object System.Management.EnumerationOptions

    $timeoutseconds = new-timespan -seconds $timeout
    $EnumerationOptions.set_timeout($timeoutseconds)

    $assembledpath = "\\" + $computername + "\" + $namespace
    write-host $assembledpath -foregroundcolor green

    $Scope = new-object System.Management.ManagementScope $assembledpath, $ConnectionOptions
    $Scope.Connect()

    $querystring = "SELECT * FROM " + $class + " " + $where
    write-host $querystring

    $query = new-object System.Management.ObjectQuery $querystring
    $searcher = new-object System.Management.ManagementObjectSearcher
    $searcher.set_options($EnumerationOptions)
    $searcher.Query = $querystring
    $searcher.Scope = $Scope

    trap { $_ } $result = $searcher.Get()

    return $result
}

$servers = get-content -Path "c:\ServerMonitoring\servers.txt"
$threshold = 5

foreach($server in $servers)
{
    write-host "Checking server $server..."

    #$drive_information = get-wmiobject -ComputerName $server -query "select Name, FreeSpace from Win32_logicaldisk where MediaType = 12"
    $drive_information = get-wmicustom -ComputerName $server -NameSpace "root\cimv2" -Class Win32_logicaldisk -TimeOut 3 -Where "WHERE MediaType = 12"

    write-host "Drive information collected from $server..."

    foreach($drive in $drive_information)
    {
        $drive_freespace_gb = [Math]::Round($drive.FreeSpace / 1024 / 1024 / 1024, 2)
        $drive_name = $drive.Name

        write-host "Checking drive $drive_name"

        if ($drive_freespace_gb -le $threshold -and $drive_name -notlike "*T:*")
        {
            write-host "Drive $drive_name on $server has only $drive_freespace_gb GB left."
            $wait = $host.UI.RawUI.ReadKey("NoEcho,IncludeKeyDown")
        }
    }
} 
```

当我从命令行运行这个脚本时，它给出了这个错误：

> “=”运算符失败：类无效。

我知道这可能是由于这里返回的 $results 是一个 ManagementObjectCollection .Net 对象。所以我尝试通过将 ToString() 方法附加到 Get() 方法来将其转换为字符串。这停止了​​错误，但 ToString() 方法只返回对象所属类的名称，而不是实际数据。我也尝试过 Get().GetEnumerator().ToString() 得到类似的结果。

如何将结果转换为 Powershell 可读的格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-01T15:58:36.930

语法可以是：

```
$SearchKBsResult | select <property you want> | foreach {$_.property you want} 
```

# asp.net-mvc - asp.net mvc：从 IIS 运行应用程序时 InitializeSimpleMembershipAttribute 引发异常，但从 Visual Studio 运行应用程序时工作正常

> ID：15776903
> 
> 赞同：1
> 
> 时间：2013-04-03T00:31:30.910
> 
> 标签：asp.net-mvc

我在 Visual Studio 中创建了一个 asp.net mvc4 Web 应用程序。默认情况下，它会创建一个文件`Filters\InitializeSimpleMembershipAttribute.cs`。调用此属性时，我在第 34 行遇到异常：

```
using (var context = new UsersContext())
                    {
                        **if (!context.Database.Exists())**
                        {
                            // Create the SimpleMembership database without Entity Framework migration schema
                            ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                        }
                    } 
```

当我尝试通过 IIS 运行 webapp 时会发生异常，但通过 Visual Studio F5 或 Ctrl+F5 运行应用程序时不会发生异常（我认为 VS 使用 iisexpress）。ConnectionString 在这两种情况下都是相同的，并在下面复制。此外，我已将 IIS 中的 apppool 配置为以我的身份运行（以匹配应用程序通过 VS 运行时发生的情况）。

```
context.Database.Connection
{System.Data.SqlClient.SqlConnection}
    [System.Data.SqlClient.SqlConnection]: {System.Data.SqlClient.SqlConnection}
    base {System.ComponentModel.Component}: {System.Data.SqlClient.SqlConnection}
    ConnectionString: "Data Source=(LocalDb)\\v11.0;AttachDbFilename=|DataDirectory|\\aspnet-MvcApplication1-20130328112431.mdf;Initial Catalog=aspnet-MvcApplication1-20130328112431;Integrated Security=True;Application Name=EntityFrameworkMUE"
    ConnectionTimeout: 15
    Database: "aspnet-MvcApplication1-20130328112431"
    DataSource: "(LocalDb)\\v11.0"
    ServerVersion: 'context.Database.Connection.ServerVersion' threw an exception of type 'System.InvalidOperationException'
    State: Closed 
```

我检查了我的机器是否安装了 SQLEXPRESS

```
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Microsoft SQL Server 2008 (SP1) - 10.0.2531.0 (X64) 
    Mar 29 2009 10:11:52 
    Copyright (c) 1988-2008 Microsoft Corporation
    Express Edition (64-bit) on Windows NT 6.1 <X64> (Build 7601: Service Pack 1)

(1 row(s) affected) 
```

我该如何解决这个异常？万一有人想要的例外细节：

```
Server Error in '/EntityBrowser' Application.
--------------------------------------------------------------------------------

A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 50 - Local Database Runtime error occurred. Error occurred during LocalDB instance startup: SQL Server process failed to start.
) 
  Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

 Exception Details: System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 50 - Local Database Runtime error occurred. Error occurred during LocalDB instance startup: SQL Server process failed to start.
)

Source Error: 

Line 32:                     using (var context = new UsersContext())
Line 33:                     {
Line 34:                         if (!context.Database.Exists())
Line 35:                         {
Line 36:                             // Create the SimpleMembership database without Entity Framework migration schema

 Source File:  c:\Users\siddjain\Documents\Visual Studio 2012\Projects\MvcApplication1\Filters\InitializeSimpleMembershipAttribute.cs    Line:  34 

Stack Trace: 

[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 50 - Local Database Runtime error occurred. Error occurred during LocalDB instance startup: SQL Server process failed to start.
)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +5295167
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +242
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover) +5307115
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover) +145
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout) +889
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance) +307
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions) +434
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions) +225
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions) +37
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnectionOptions userOptions) +558
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnectionOptions userOptions) +67
   System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection) +1052
   System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection) +78
   System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection) +167
   System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions) +143
   System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry) +83
   System.Data.SqlClient.SqlConnection.Open() +96
   System.Data.SqlClient.SqlProviderServices.UsingConnection(SqlConnection sqlConnection, Action`1 act) +79
   System.Data.SqlClient.SqlProviderServices.UsingMasterConnection(SqlConnection sqlConnection, Action`1 act) +384
   System.Data.SqlClient.SqlProviderServices.GetDbProviderManifestToken(DbConnection connection) +241
   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +26

[ProviderIncompatibleException: The provider did not return a ProviderManifestToken string.]
   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +170
   System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection) +32

[ProviderIncompatibleException: An error occurred while getting provider information from the database. This can be caused by Entity Framework using an incorrect connection string. Check the inner exceptions for details and ensure that the connection string is correct.]
   System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection) +192
   System.Data.Entity.ModelConfiguration.Utilities.DbConnectionExtensions.GetProviderInfo(DbConnection connection, DbProviderManifest& providerManifest) +39
   System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) +46
   System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) +62
   System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input) +123
   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +468
   System.Data.Entity.Internal.InternalContext.CreateObjectContextForDdlOps() +17
   System.Data.Entity.Database.Exists() +36
   MvcApplication1.Filters.SimpleMembershipInitializer..ctor() in c:\Users\siddjain\Documents\Visual Studio 2012\Projects\MvcApplication1\Filters\InitializeSimpleMembershipAttribute.cs:34

[InvalidOperationException: The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588]
   MvcApplication1.Filters.SimpleMembershipInitializer..ctor() in c:\Users\siddjain\Documents\Visual Studio 2012\Projects\MvcApplication1\Filters\InitializeSimpleMembershipAttribute.cs:45

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +113
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +232
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +83
   System.Activator.CreateInstance(Type type) +6
   System.Threading.LazyHelpers`1.ActivatorFactorySelector() +68
   System.Threading.LazyInitializer.EnsureInitializedCore(T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory) +115
   System.Threading.LazyInitializer.EnsureInitialized(T& target, Boolean& initialized, Object& syncLock) +106
   MvcApplication1.Filters.InitializeSimpleMembershipAttribute.OnActionExecuting(ActionExecutingContext filterContext) in c:\Users\siddjain\Documents\Visual Studio 2012\Projects\MvcApplication1\Filters\InitializeSimpleMembershipAttribute.cs:21
   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +69
   System.Web.Mvc.Async.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35() +21
   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +489
   System.Web.Mvc.Async.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35() +21
   System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__31(AsyncCallback asyncCallback, Object asyncState) +191
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +130
   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters, AsyncCallback callback, Object state) +197
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState) +446
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +130
   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeAction(ControllerContext controllerContext, String actionName, AsyncCallback callback, Object state) +302
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__17(AsyncCallback asyncCallback, Object asyncState) +30
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +130
   System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state) +382
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +130
   System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +317
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +15
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__2(AsyncCallback asyncCallback, Object asyncState) +71
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +130
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +249
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +50
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +301
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.17929 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:57:51.033

机器配置可能配置为使用需要覆盖的本地数据库连接。尝试添加

```
 <clear/>
 <add name="LocalSqlServer" connectionString="... same as your UsersContext connection string"/> 
```

在您的网络配置中连接字符串的开头

# c++ - 无限循环的问题

> ID：15776905
> 
> 赞同：1
> 
> 时间：2013-04-03T00:31:33.520
> 
> 标签：c++

我正在处理一项任务，我们必须计算运费。出于某种原因，我在执行时遇到了无限循环。有人可以看看这个并帮助我，我无法确定原因。

代码：

```
#include <iostream> 
#include <iomanip> 
#include <cmath> 
#include <fstream> 

using namespace std; 

const double basic_charge = 12; 
const double Vsurcharge = 5; 
const double Dsurcharge = 4; 
const double Wsurcharge = 2; 

double calculate(double length, double width, double height)
{ 
    double volume; 
    volume = length * width * height; 
    return volume; 

} 
int main () 
{ 

    ifstream inFile; 
    ofstream prt("c:\\lab6a_out.txt"); 

    double length, width, height, x, volume, weight, total, shipping_cost; 
    total = 0; 

    cout << "    Shipping Information\n\n"; 
    cout << "Length Width Height Weight Shipping\n"; 
    cout << "                           Cost\n\n";

    prt << "    Shipping Information\n\n"; 
    prt << "Length Width Height Weight Shipping\n"; 
    prt << "                           Cost\n\n"; 

    inFile.open("pkg6a.dat"); 
        if (!inFile) 
        cout << "Error opening the file\n"; 

    inFile >> length, width = 0, height = 0, weight = 0; 

    while (!inFile.eof())  
    { 
        shipping_cost = basic_charge; 
        volume = calculate (length, width, height); 

        if (volume > 7)  
            shipping_cost += Vsurcharge; 
        if (length > 3 || width > 3 || height > 3) 
            shipping_cost += Dsurcharge; 
        if (weight > 50) 
            shipping_cost += weight * Wsurcharge; 

        total += shipping_cost; 

        cout << setw(6) << right << setprecision(0) << length << setw(6) << right << width << setw(7) << right << height << setw(7) << right; 
        cout << weight << setw(9) << right << setprecision(2) << fixed << shipping_cost << endl;

        prt << setw(6) << right << setprecision(0) << length << setw(6) << right << width << setw(7) << right << height << setw(7) << right; 
        prt << weight << setw(9) << right << setprecision(2) << fixed << shipping_cost << endl; 

        inFile >> length, width, height, weight; 

    } 

    cout << "\nTotal cost: " << total;
    prt << "\nTotal cost: " << total; 
    //cin >> x; 
    return 0; 

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T00:37:54.170

这：

```
inFile >> length, width, height, weight; 
```

是错的。它应该是：

```
inFile >> length >> width >> height >> weight; 
```

您正在使用逗号运算符，这不是您想要的。

# file - 如何检查文件中的一行是否超过字符数

> ID：15776906
> 
> 赞同：0
> 
> 时间：2013-04-03T00:31:35.710
> 
> 标签：file, batch-file, lines

我想知道是否有一种简单的方法可以检查目录中包含超过一定字符数的行的文件。例如，我有一个包含 10000 个文件的目录，我想查看哪些文件至少有一行超过 1000 个字符。是否可以通过批处理脚本进行检查？谢谢你。

这适用于 Windows 7 Enterprise，64 位，Service Pack 1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T02:16:14.480

最简单和最快的方法是使用 GnuWin32 中的`grep` [二进制](http://gnuwin32.sourceforge.net/packages/grep.htm)文件。我相信这种语法会起作用：

```
grep -Pl ".{1000}" * 
```

这将对包含 1000 个字符的任何行执行 perl 语法正则表达式搜索，`*`如果找到匹配项，则输出文件名。

使用纯批处理脚本绝对有可能完成您所要求的任务，但是`for`循环遍历 10,000 个文件，每个文件都知道有多少行，这将需要永远和一天的时间。

* * *

好的，Pickle 教授，这是您的批处理文件。我使用[可变子字符串提取](http://www.dostips.com/DtTipsStringManipulation.php)来提高速度。此外，如果遇到包含 1000 个字符的行，请立即移至下一个文件。我仍然认为`grep`会更快更简单。 `o°/`

```
@echo off
setlocal enabledelayedexpansion
for %%a in (*) do (
    call :look "%%a"
)

goto :EOF

:look
for /f "usebackq delims=" %%I in ("%~1") do (
    set "line=%%I"
    if "!line:~999,1!" neq "" echo %~1 && exit /b
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T07:01:20.130

纯批次：

```
@echo off&setlocal enabledelayedexpansion

for %%a in (*.txt) do (
 for /f "tokens=1-2delims=:" %%i in ('"cmd /c type "%%~a" ^&echo(|findstr /no ^^"') do (
    set "pos1=!pos0!"&set "line1=!line0!"
    set "pos0=%%j"&set "line0=%%i"
    set /a length=!pos0!-!pos1!-2
    if !length! gtr 1000 echo line: !line1! length: !length! in file: %%~a
)) 
```

将 *.txt 更改为您想要的搜索模式。

编辑：小改进（`^^`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:45:38.767

我用临时文件找到了一个更快的解决方案：

```
@echo off&setlocal enabledelayedexpansion
set "tempfile=%temp%\%random%"
for %%a in (*.txt) do (
 <"%%~a">"%tempfile%" more
 echo(>>"%tempfile%"
 for /f "tokens=1-2delims=:" %%i in ('^"^< "%tempfile%" findstr /no "^" ^"') do (
    set "pos1=!pos0!"&set "line1=!line0!"
    set "pos0=%%j"&set "line0=%%i"
    set /a length=!pos0!-!pos1!-2
    if !length! gtr 0 echo line: !line1! length: !length! in file: %%~a
))
del "%tempfile%" >nul 2>&1 
```

编辑：改进了 XP 的转义。

# git - Git：在分支之前移动提交

> ID：15776907
> 
> 赞同：3
> 
> 时间：2013-04-03T00:31:53.897
> 
> 标签：git

我的提交历史如下所示：

```
 B-X
 /
A-C
 \
  D 
```

我想申请所有`X`分支机构`B`，，，`C`。`D`虽然`cherry-pick`成功了，但它创造了这样的历史：

```
 B-X
 /
A-C-X
 \
  D-X 
```

现在commit`X`重复了3次，如果我有很多分支，这很不方便。理想情况下，我希望历史看起来像这样：

```
 B
   /
A-X-C
   \
    D 
```

哪里`X`只出现一次。这段历史要干净得多。我应该使用哪个命令来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:39:12.787

第一个要点是您请求的修复将重写历史记录，这只是在没有其他人使用分支时您应该做的事情。例如，如果您移动`D`到后`X`，那么之前已签出的其他任何人在拉出`D`时都会感到非常困惑。仅当没有其他人使用它，或者他们知道并期待更改时，您才应该这样做。

```
// Make a new temporary branch starting at A, and move X into it.
git checkout -b tmp A
git cherry-pick X

// For each of B, C and D, rebase them on top of the temporary branch.
git checkout <branch>
git rebase tmp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:09:03.047

别人指出的樱桃采摘策略效果很好。只是想指出你也可以使用一组带有 --onto 标志的变基来做这种事情，它不需要临时分支。

## 将您的提交克隆到其新位置

```
git rebase --onto A B X 
```

这意味着您应用在 X 点存在但在 B 点不存在的提交，并将它们应用到 A 的末尾。这将导致以下结果。

```
 B-X
 /
A--Y
|\
D C 
```

***阅读此答案底部的注释，了解`Y`为什么它的名称不同于`X`，以及 git 如何处理历史中的任何更改。***

所以你已经在你想要的地方应用了 X，现在你只需要重新设置其他分支的基础，以便它们也可以在他们的历史记录中使用它。

## 更新下游分支

```
git checkout C
git rebase Y

git checkout D
git rebase Y

git checkout B  
git rebase Y 
```

这里唯一的规定是 with `B`。无论字母代表分支名称还是 SHA1 提交，上述顺序都是有意义的。但是，如果`B`并且`X`实际上在一个分支中，那么您需要签出该分支并将其倒回到`X`创建之前。为了示例，我们将分支称为“蜜蜂”。

```
git checkout bee
git reset --hard B  
git rebase Y 
```

现在你有....

```
 B
    /
A--Y-C
    \
     D 
```

之后，只吃蛋糕。

## 序幕

**重新定位，挑选樱桃，修改，哦，我的！**

提交及其 SHA1 对于父提交、执行的更改以及其他一些细节是唯一的。因此，当更改提交的父级或祖先时，该提交实际上会被克隆并具有新的 SHA1。变基、挑选或修改现有提交或提交的父级的任何其他操作将导致修改后的提交获得新的 SHA1，此外，由于提交 SHA1 已更改，所有提交子级都认为他们有一个新的父级，所以他们也会得到新的 SHA1 哈希值。

旧的提交仍然存在，因此上面的第一个图表显示 Y 是 X 的克隆，具有新名称和新父级。两者都仍然存在，在大多数情况下可以轻松检索旧提交，并且在某些情况下（例如这种情况），您实际上需要故意将旧提交移开。这就是为什么在 rebase --onto 之后，您会看到图表同时显示 X 和 Y。X 提交没有“移动”，它更像是一个克隆。之后 X 仍然存在，需要通过检查 B 的分支并将其重置为“X”之前的提交来处理。

实际上， 、 和 中的提交`B`也`C`将`D`克隆其所有提交，并且它们都将具有新的 SHA1 哈希值。

这就是为什么在与其他开发人员共享提交后重新设置基准、挑选或修改提交可能很麻烦的原因。*如果这些开发人员引入克隆，他们的本地 repo 将认为它的新工作，并且他们将获得重复的提交，并且因为这些提交做完全相同的事情，他们将获得冲突*。然后克苏鲁将崛起并开始统治世界。

解释这一点的困难是由于在这些示例中，我们使用分支名称，就好像它们是提交一样。如果这个问题专门关于修改历史的副作用，我会添加更准确的图表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T00:37:41.297

一种可能的解决方案是使用多个樱桃挑选来做到这一点。结帐 A 并挑选 X 来创建

```
 B-X
 /  
A-X'
 \
  \-C
   \
    D 
```

现在你应该在 X' 上，这样你就可以挑选 B：

```
 B-X
 /  
A-X'-B'
 \
  \-C
   \
    D 
```

结帐 X' 和樱桃挑选 C。再重复一次：结帐 X' 和樱桃挑选 D。

这可能不是最有效的解决方案，但它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T01:12:36.273

对我来说，它看起来像[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)，即询问您*尝试的解决方案*而不是您的*实际问题*。

为什么不在从共同祖先开始的单独的 bugfix-X 分支上创建 bugfix commit 'X'，并将其合并到 'A'、'B' 和 'C' 中。例如 Junio C. Hamano 博客文章“[尽早解决主题分支之间的冲突/依赖关系](http://gitster.livejournal.com/27297.html)”中描述了这个想法

这意味着创建以下历史：

```
 B---------b
 /          |
A-C-----c   |
|\      |   /
| D-d   /  /
\   |  /  /
 \X/--/--/ 
```

其中“b”、“c”和“d”是合并提交。

* * *

这可以通过以下命令完成：

1.  首先，将（[rebase](https://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)）提交“X”移动到分支（提交）“B”、“C”和“D”的共同祖先上。

    `$ git rebase --onto $(git merge-base B C D) B X`

    这将导致以下情况，错误修复提交“X”在单独的错误修复分支上：

    ```
     B
     /
    A-C
    |\
    | D
    \
     \X' 
    ```

2.  接下来，将错误修复合并到所有需要它的分支中。例如合并到分支'D'可以通过以下方式完成：

    `$ git checkout D`
    `$ git merge X`

    这将导致：

    ```
     B
     /
    A-C
    |\
    | D---d
    \    /
     \X'/ 
    ```

3.  对分支“C”和“B”执行相同的操作。

# java - 何时使用 JFrame、JLabel 和 JPanel

> ID：15776910
> 
> 赞同：3
> 
> 时间：2013-04-03T00:32:42.163
> 
> 标签：java, swing, jframe, jpanel, jlabel

很长一段时间以来，我一直在想何时使用 JFrame 和 JPanel。教科书、面对面和互联网搜索告诉我一些原因，但当然，我查看了 Java 文档才发现 JPanel 具有paintComponent(Graphics); 方法，它允许您指定对对象本身执行的操作，这与 JFrame 不同。此外，JPanels 是可嵌套的，允许比仅使用一个容器实现的更复杂的图形。我还偶然发现了 JLabel 也是一个容器的事实。（它甚至有一个奇怪的布局！）现在我的问题是：我应该什么时候使用 JLabel，什么时候应该使用 JPanel？

//我知道您可以将 JLabel 放在 JPanel 中，并且偶然发现 JPanel 比 JLabel 更昂贵。从长远来看，我计划制作一个收银游戏，其中包含一些轻量级的“钱”容器，当点击时，“钱”会移到客户的手上。我正在考虑将 JLabels 用于货币金额（美元钞票和硬币），并将 JPanel 用作交易的俯视图。我还在考虑在“货币标签”本身上调用 repaint() （据我了解，它可以模拟动画）。这是一个双重问题，但您认为这是最便宜的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-30T14:05:19.447

在大多数情况下，JPanel 是一个允许更好组织的容器。当您需要组织 gui 的组件时，您应该使用 JPanel 并为 JPanel 定义布局。您还可以将 JPanel 相互嵌套，等等。JLabel 不具备为要在 JLabel 中显示的更多组件定义布局的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T15:15:47.530

这是一个显示“Hello World!!!”的应用程序示例 没有引号：

```
import javax.swing.JFrame;        
import javax.swing.JPanel;        
import javax.swing.JLabel;        
public class JFrame {        
    public static void main (strings args[]) {        
        JFrame frame = new JFrame();        
        String title = "Hello App";        
        frame.setTitle(title);        
        frame.setSize(300, 200);        
        frame.setDefaultCloseOperation        
            (JFrame.EXIT_ON_CLOSE);        
        frame.setVisible(true);        
        JPanel panle = new JPanel();        
        frame.add(panle);        
        JLabel lable = new JLabel("Hello World!!!");        
        panle.add(lable);        
    }
} 
```

文件名为“JFrame.java”，不带引号。

# php - $_POST、$_GET 和 $_REQUEST 空

> ID：15776911
> 
> 赞同：-1
> 
> 时间：2013-04-03T00:32:51.463
> 
> 标签：php, post, get, apache2.2

**已解决**：我省略了输入字段上的名称属性。我有一个简单的 html/php -form。我提交它。$_POST 始终为空。如果我尝试获取，那么 GET 始终为空。$_REQUEST 和 php://input 相同。我什么也得不到。

有很多关于这个主题的帖子，但我还没有找到解决我问题的方法。我没有重写或重定向。method_request 是 POST。表单中的 id 没有冲突，php://input 也是空的，REQUEST 也是空的。我已将 Suhosin.simulation 开启，这意味着它无法正常工作。POST_MAX_SIZE = 16M。对于两个小文本应该足够了。

php.ini 变量 request_order 和 variable_order 分别是 GP 和 GPS。Magic_quotes_gpc 已关闭。默认 mime-type = text/html 并且每个页面都有字符集 UTF-8。函数 php_sapi_name() 的结果是 apache2handler。

PHPVersion = 5.3，Suhosin - 补丁 0.9.1。操作系统 = Ubuntu 12.04 LTS，Apache = 2.2.22。

这里有两个文件。我对它们进行了一些简化，但通常它们可以正常工作。我有 GET 方法的类似文件。

```
<?php

$tmpHeader = "<!DOCTYPE html><html><head>\n";
$tmpHeader .= "<meta charset=\"UTF-8\"> <meta http-equiv=\"Content-Type\" content=\"application/x-www-form-urlencoded; charset=utf-8\">\n";
$tmpHeader.= "<title>testPost</title>\n";
$tmpHeader.= "<link rel=\"stylesheet\" href=\"/css/layout.css\">\n";
$tmpHeader.= "<link rel=\"stylesheet\" href=\"/css/semantics.css\">\n";
$tmpHeader.= "<link rel=\"stylesheet\" href=\"/css/defaults.css\">\n";
$tmpHeader.="</head>";

$tmpBody = "<body id=\"defaultBody\"><section id=\"page\">\n";
$tmpBody .= "<div id=\"container\">\n";
$tmpBody .= "<form id=\"pagewrap\" name=\"pagewrap\" method=\"POST\" action=\"http://www.thuis.lb/testPost_2.php\" enctype=\"application/x-www-form-urlencoded\">\n";
$tmpBody .= "<input type=\"hidden\" id=\"context_id\" value=\"testPost\">\n";
$tmpBody.="<header id=\"pageHeader\">\n";
$tmpBody.="<div id=\"leftHeader\"><img src=\"".clientSideImages."Homerus.jpg\" alt=\"homerus\"></div>\n";
$tmpBody.="<div id=\"centralHeader\"><h1>Slogan</h1></div>\n";
$tmpBody.="</header>\n";

$pageData = "<section id=\"doc_content\">\n";
$pageData.= "<fieldset><legend>testPost</legend>\n";
$pageData.= "<div class=\"fourcolumns_odd\"><label for=\"username\">username</label></div>\n";
$pageData.= "<div class=\"fourcolumns_even\"><input type=\"text\" id=\"username\" value=\"\"></div>\n";
$pageData.= "<div class=\"fourcolumns_odd\"><label for=\"password\">password</label></div>\n";
$pageData.= "<div class=\"fourcolumns_even\"><input type=\"text\" id=\"password\" value=\"\"></div>\n";
$pageData.= "<div class=\"onecolumn\"><input type=\"submit\" id=\"submitButton\" value=\"inloggen\"></div>\n";
$pageData.= "</fieldset>\n";
$pageData.= "<input type=\"hidden\" id=\"passwordHash\" value=\"\">\n";
$pageData.="</section><!--end of section doc_content -->\n";
$tmpBody .= "<div id=\"leftWing\"><img src=\"".clientSideImages."IronPillarDelphi.jpg\" alt=\"homerus\"></div>\n";
$tmpBody.= "<div id=\"centerField\" class=\"centerVertically\">".$pageData."</div>\n";
$tmpBody.= "<div id=\"rightWing\"><img src=\"".clientSideImages."IronPillarDelphi.jpg\" alt=\"homerus\"></div>\n";
$tmpBody.="</form>\n";
$tmpBody.= "</div><!-- end of container -->\n";
$tmpBody.="</section><!-- end of page -->\n";
$tmpBody.="</body></html>\n";

logStatement('requestheaders: ');
$testpostdata = file_get_contents("php://input");
log_r($testpostdata);

print $tmpHeader.$tmpBody;
?> 
```

$_POST 数据应该发送到的另一个文件：

```
<!DOCTYPE html><html><head>
<meta charset="UTF-8"> <meta http-equiv="Content-Type" content="application/x-www-form-urlencoded; charset=utf-8">
<title>testPost_II</title>
<link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/semantics.css">
<link rel="stylesheet" href="/css/defaults.css">
</head><body id="defaultBody"><section id="page">
<div id="container">
<form id="pagewrap" name="pagewrap" method="POST" action="http://www.thuis.lb/testPost.php" enctype="application/x-www-form-urlencoded">
<header id="pageHeader">
<div id="leftHeader"><img src="/images/Homerus.jpg" alt="homerus"></div>
<div id="centralHeader"><h1>Slogan</h1><span>Special for ><?php print getValue('username','nothing found');?></span></div>
</header>
<div id="leftWing"><img src="/images/IronPillarDelphi.jpg" alt="homerus"></div>
<div id="centerField" class="centerVertically"><section id="doc_content">
<input type="text" id="context_id" value="<?php var_dump($_POST);?>">
<fieldset><legend>testPost_2</legend>
<div class="fourcolumns_odd"><label for="username">username</label></div>
<div class="fourcolumns_even"><input type="text" id="username" value="<?php print     getValue('username','Noname');?>"></div>
<div class="fourcolumns_odd"><label for="password">password</label></div>
<div class="fourcolumns_even"><input type="text" id="password" value="<?php echo getValue('password','Secret');?>"></div>
<div class="fourcolumns_odd"><label for="request_method">request method</label></div>
<div class="fourcolumns_even"><input type="text" id="username" value="<?php print $_SERVER['REQUEST_METHOD'];?>"></div>
<div class="onecolumn"><input type="submit" id="submitButton" value="inloggen"></div>
</fieldset>
</section><!--end of section doc_content -->
</div>
<div id="rightWing"><img src="/images/IronPillarDelphi.jpg" alt="homerus"></div>
</form>
</div><!-- end of container -->
</section><!-- end of page -->
</body></html> 
```

www.thuis.lb 是本地服务器的名称。它的 IP 为 127.0.0.1。Thuis 是荷兰语，意为在家。有什么我忘记了或者我做错了什么吗？

编辑：更多信息。在更复杂的第一个 php 中，存在与数据库的信息交换。这就像一个魅力。完全没有问题。因此，我认为这个问题是一个安全问题。我将为 www.thuis.lb 添加虚拟主机文件。虽然它几乎就像默认的虚拟主机，但它可能是问题所在。

```
<VirtualHost thuis.lb:80>
    ServerName www.thuis.lb
    ServerAlias thuis.lb *.thuis.lb
    ServerAdmin lbergman@loekbergman.nl
    DocumentRoot /var/www/thuis
    RewriteEngine On
    RewriteOptions Inherit

<Directory /var/www/thuis/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    allow from all
</Directory>

ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin">
    AllowOverride None
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
</Directory>

ErrorLog /var/log/apache2/thuis/error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel debug

CustomLog /var/log/apache2/thuis/access.log combined

Alias /doc/ "/usr/share/doc/"
<Directory "/usr/share/doc/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
    Allow from 127.0.0.0/255.0.0.0 ::1/128
</Directory>
</VirtualHost> 
```

编辑二：我可以添加更多信息。在访问日志中有例如这一行： 127.0.0.1 - - [04/Apr/2013:11:13:43 +0200] "POST /testPost_2.php HTTP/1.1" 200 2020 " [http://www. thuis.lb/testPost.php](http://www.thuis.lb/testPost.php) " "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:19.0) Gecko/20100101 Firefox/19.0"。这表明 imo apache2 正在以良好的状态接收帖子。但是 PHP 中的 $_POST 仍然是完全空的。在 Firebug>Net>Headers 的显示中是 Content Length 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:48:21.897

您的所有表单输入字段都有名称属性还是只有一个 id 属性？它可能就像为每个输入字段添加名称属性一样简单。

```
<input type="text" id="afield" value="a value"> 
```

不一样

```
<input type="text" id="afield" name="afield" value="a value"> 
```

$_POST['afield'] 应该只返回上面第二个示例的值

# javascript - 为什么这个简单的代码可以在 JSFiddle 上运行，但不能在我的服务器上运行？

> ID：15776913
> 
> 赞同：1
> 
> 时间：2013-04-03T00:33:15.250
> 
> 标签：javascript

我有以下代码，我正在尝试开始工作。出于某种原因[，它在 JSFiddle 上运行良好](http://jsfiddle.net/9mwqL/1/)，但是当我从服务器提供代码时在文本框中键入时没有任何反应。为什么会这样？

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.js"></script>

    <script type="text/javascript">
        $('#userInput').keyup(function(){
            alert("key up");
        });
    </script>
</head>

<body>
    <input id="userInput" type="text">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:37:48.313

您的脚本正在将 keyup 函数附加到尚不存在的元素。您需要将脚本放在页面底部，或者使用`$(document).ready(function(){//your code});`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:35:43.677

可能是因为您需要将其包装在`.ready`函数中

```
$(document).ready(function() {
    $('#userInput').keyup(function(){
        alert("key up");
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T00:35:47.583

你的代码应该已经准备好了

```
$(function(){
        $('#userInput').keyup(function(){
            alert("key up");
        });
}); 
```

在 jsfiddle 下的`Frameworks & Extensions`第二个下拉部分`onload`默认会被选中，这意味着脚本框架中的所有脚本只有在整个 dom 加载后才会被执行。

但是当我们将该脚本移动到页面时，我们需要使用[.ready](http://api.jquery.com/ready/)

演示：[问题](http://jsfiddle.net/arunpjohny/r6R6C/)
演示：[解决方案](http://jsfiddle.net/arunpjohny/r6R6C/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T00:36:32.870

您的 JS 代码在 DOM 准备好之前执行。将 JavaScript 放在底部或使用 jQuery `$(document).ready()`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T00:36:42.947

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.js"></script>

    <script type="text/javascript">
    $(function() {
        $('#userInput').keyup(function(){
            alert("key up");
     });
        });
    </script>
</head>

<body>
    <input id="userInput" type="text">
</body>
</html> 
```

# javascript - 在 Derby.js 中包含 JS 文件

> ID：15776922
> 
> 赞同：3
> 
> 时间：2013-04-03T00:34:23.500
> 
> 标签：javascript, jquery, node.js, derbyjs

我正在尝试学习[Derby.js](http://www.derbyjs.com/)，但遇到了很多麻烦。我知道我可以通过 npm 包含诸如 jQuery 之类的包并将其添加到 node_modules 文件夹中，但这并不是我想要做的。我希望能够像在普通 HTML 中一样包含这些文件。

所以我想做类似的事情`<Head:> <script src="js/jquery.js"></script>`。这不起作用，因为它找不到 js 目录。我希望这与 node.js 运行应用程序的方式有关，并且应用程序本身不会保存 js 目录。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T22:27:17.053

德比提供`Script:`标签：

```
<Scripts:>
    <script type="text/javascript" src="/components/jquery/jquery.js"></script> 
```

components 目录是因为使用[bower](https://github.com/bower/bower)。将`components`目录放入`public`目录中。根据[express FAQ](http://expressjs.com/faq.html)，静态路由在给定目录**下**搜索（在 derby 的示例应用程序中是公共的）。配置 bower 将文件放在下面`public/components`（[选择 bower 安装目录](https://stackoverflow.com/questions/15042570/choose-bower-install-directory)）。

公共目录配置在`lib/server/index.js`：`.use(gzippo.staticGzip(publicPath, {maxAge: ONE_YEAR}))`，`publicPath`上面配置为`path.join(root, 'public')`。

请注意，“内联脚本背后的想法是它会在加载任何外部脚本之前立即运行。这仅应在脚本应在页面显示在浏览器中之前运行的极少数情况下使用，例如调整大小在不支持“自动对焦”属性的浏览器中，窗口或自动聚焦元素。” [Nate Smith 在 derby google 小组](https://groups.google.com/d/msg/derbyjs/-JEI83SOkjE/tb6Y8CBAq14J)中。

内联脚本应放置在`inline.js`与应用程序相同的目录中`index.js`。

如果您需要 jQuery 在加载的页面上执行某些操作，则以下代码在我身边（Firefox，Chrome）中工作`inline.js`：

```
window.onload = function() {
    alert($(this));
} 
```

# r - 如何根据前一行的值选择 R 数据框中的行

> ID：15776925
> 
> 赞同：1
> 
> 时间：2013-04-03T00:34:56.597
> 
> 标签：r, dataframe, subset

我有一个似乎很简单但我无法解决的问题。我有一个 R 数据框，它由单列数据点组成，如下所示。我想子集到一个新的数据帧中，其中包含基于先前数据点值的数据点。

因此，在下面，例如，我想对先前值大于 0.04 的所有行进行子集化。任何想法，将不胜感激。谢谢你。

```
 Price
[1,] -0.006666667
[2,]  0.040268456
[3,]  0.051612903
[4,] -0.006134969
[5,]  0.006172840
[6,]  0.006134969
[7,]  0.030487805 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T04:53:23.743

These types of manipulations can be done in a way which directly mimics our thought process by using a time series representation. This also has the advantage that its now in such a representation and that will facilitate further computations as well. Suppose `DF` is the data frame. Convert it to a [zoo](http://cran.r-project.org/package=zoo) object `z` and then extract those components of `z` whose lag exceeds `0.04` :

```
> library(zoo)
> z <- zoo(DF$Price)
> z[lag(z, -1) > 0.04]
           3            4 
 0.051612903 -0.006134969 
```

If `result` is the value of the last line of code then `time(result)` gives the times (`3` and `4` in the above example) and `coredata(result)` gives the data values.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T00:40:07.960

像这样：

```
x[c(FALSE, head(x$Price, -1) > 0.04), , drop = FALSE] 
```

（从您的印刷品看来，您的对象可能是矩阵，而不是 data.frame。如果是这种情况，请替换`x$Price`为`x[, "Price"]`。）

# php - mysql中不同查询的多个表

> ID：15776933
> 
> 赞同：0
> 
> 时间：2013-04-03T00:36:28.793
> 
> 标签：php, mysql

最初我的 sql 查询用于检查是否有待处理的时间表/加班准备好供经理审查......现在我添加了在不同表上的待命时间表......

我以前的 sql 查询有效但没有 $ONCALL_TABLE ...

```
list($qh, $num) = dbQuery("SELECT manager FROM $USER_TABLE WHERE username IN (SELECT DISTINCT uid FROM $TIMES_TABLE WHERE submitstatus=1 OR ot_status=1)"); 
```

* * *

现在我试图将挂起的 on-call 时间表添加到同一个 sql 查询中，但我不断收到错误......也许有人可以帮我修复我的语法？：

```
list($qh, $num) = dbQuery("SELECT manager FROM $USER_TABLE WHERE username IN (SELECT DISTINCT $TIMES_TABLE.uid, $ONCALL_TABLE.uid FROM $TIMES_TABLE, $ONCALL_TABLE WHERE $TIMES_TABLE.submitstatus=1 OR $TIMES_TABLE.ot_status=1 OR $ONCALL_TABLE.submitstatus=1)"); 
```

错误我得到：无法执行查询：操作数应包含 1 列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:11:44.580

问题出在子查询中，但我会使用`union all`：

```
SELECT manager
FROM $USER_TABLE
WHERE username IN (SELECT uid
                   from (select $TIMES_TABLE.uid
                         from $TIMES_TABLE
                         where $TIMES_TABLE.submitstatus=1 OR $TIMES_TABLE.ot_status=1
                         union all
                         select $ONCALL_TABLE.uid
                         from $ONCALL_TABLE
                         where $ONCALL_TABLE.submitstatus=1
                        ) t
                   ) 
```

不过老实说，这`union all`可能会干扰索引的使用。这可能会表现得更好：

```
SELECT manager
FROM $USER_TABLE
WHERE username IN (select $TIMES_TABLE.uid
                   from $TIMES_TABLE
                   where $TIMES_TABLE.submitstatus=1 OR $TIMES_TABLE.ot_status=1
                  ) or
      username in (select $ONCALL_TABLE.uid
                   from $ONCALL_TABLE
                   where $ONCALL_TABLE.submitstatus=1
                  ) 
```

# ruby-on-rails - Rails 动态创建关系记录

> ID：15776936
> 
> 赞同：0
> 
> 时间：2013-04-03T00:36:39.637
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有两个模型：图像和灯箱。为了关联这两个模型（has_many），我有第三个模型 LightboxImages。

一个灯箱可以有多个图像，一个图像可以在多个灯箱中。

一个灯箱是动态创建的（使用远程 js），用户也可以动态地将图像添加到这个灯箱中。

我的第一个想法是简单地为 LightboxImages 控制器的 create 方法创建一个 URL，将 Lightbox Id 和 Image Id 作为参数传递。

然而，这种方法似乎脆弱且不安全，因为用户可以轻松地模拟这种行为。

这种情况的最佳设计是什么，动态创建关系记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:40:59.843

你实际上有第四个模型——用户。我假设你无论如何都会这样做。

```
User has_many :lightboxes
Lightbox has_many :lightbox_items
Image has_many :lightbox_items
LightboxItem belongs_to :lightbox
LightboxItem belongs_to :image
Lightbox has_many :images, :through => :lightbox_item
Image has_many :lightboxes, :through => :lightbox_item 
```

LightboxItem 是您可能想要存储附加数据的位置，例如该特定 Lightbox 中图像的位置。

关键是每个灯箱都属于一个用户。有了这个，您就可以将控制器中的所有 AR 调用限定为当前用户——从而防止他们修改其他灯箱。

因此，用户 carlos 的灯箱 ID 为 1。用户 phallstrom 的灯箱 ID 为 2。

在您的控制器中，您以某种方式`current_user`在前置过滤器中设置为当前用户。然后，例如在获取指定灯箱的操作中，您将执行以下操作：

```
@lightbox = current_user.lightboxes.find_by_id(params[:id].to_i) 
```

如果 current_user 是 carlos，并且 params[:id] 是 2，那么这样做不会返回任何内容。

同样，对于所有其他 CRUD 操作，您也可以将其范围限定为 current_user。

# arrays - 显示 IO 数组

> ID：15776937
> 
> 赞同：4
> 
> 时间：2013-04-03T00:36:40.433
> 
> 标签：arrays, haskell, io

当我一直在学习 haskell 时，我很喜欢纯粹的部分，但现在我在 monadic 和 IO 部分中磕磕绊绊，可能正在经历一些人觉得这门语言真正令人愤怒的地方。我解决了一个项目欧拉问题，我想要一个可变数组，因为我必须经常按索引更新元素。我尝试了 Vectors，但无法让它们工作，所以我尝试了 Data.Array.IO。我可以很好地读取和写入元素，但我无法以我想要的方式在终端中显示数组。到目前为止，我有这个。

```
test = do
    arr <- newArray (1,10) 37 :: IO (IOArray Int Int)
    a <- readArray arr 1
    writeArray arr 1 64
    b <- readArray arr 1
    dispArray arr 
    return ()

dispArray arr = do
    (a,b) <- getBounds arr
    printf "["
    dispArray' arr a
    printf "]\n"
        where dispArray' arr i = do
                (a,b) <- getBounds arr
                if i < a || i > b
                    then return ()
                    else do
                        v <- readArray arr i
                        print v
                        dispArray' arr (i+1) 
```

正如您所期望的那样，输出是这样的：

```
[64
37
37
37
37
37
37
37
37
37
] 
```

但这很不方便，我想要`[64,37,37,37....`这样。我见过类似的函数`toList`，但我不想要这个。我不想每次显示时都转换为列表。所以我想我需要使用`printf`. 所以我换成`print v`了`printf " %s," (show v)`. 但这不会编译。我不知道为什么。我认为它会因为它`print :: Show a => a -> IO ()`为什么`show :: Show a => a -> String`不能工作，因为它`%s`表示一个字符串？所以我然后把电话放在一起。看看 printf 是否可以工作。

```
printf " %s," "hello"
print v 
```

编译并显示：

```
[ hello,64
 hello,37
 hello,37
 hello,37
 hello,37
 hello,37
 hello,37
 hello,37
 hello,37
 hello,37
] 
```

为什么我不能使用`show v`？为什么 Haskell IO 对初学者如此恼火？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T02:10:34.863

你想要的咒语是：

```
putStr (show v) 
```

打印出来`v`没有换行符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T08:39:36.507

这是一个有趣的类型检查难题。

调用`printf`产生的错误消息是

```
Could not deduce (PrintfType (m a0))
  arising from the ambiguity check for `dispArray' 
```

这些短语通常暗示 GHC 的类型信息不足，无法得出该程序应如何键入的结论`Could not deduce`。`ambiguity`这可能是一个真正的类型错误，但也有可能通过提供更多类型信息来修复它（这里就是这种情况）。

这里的罪魁祸首真的是`printf`，结合可变数组接口的灵活性，而不是 Haskell 的 IO 系统。的类型`printf`是一种巧妙的 hack，但仍然是一种 hack。为了了解仅依赖于格式字符串的各种类型的灵活数量的参数，`printf`具有一种不是很安全也不是非常有用的类型：

```
printf :: PrintfType r => String -> r 
```

所以我们真正确定的是第一个参数是 type `String`。其余的可以是`r`类型类中的任何类型`PrintfType`。

实例的细节无关紧要。有趣的是，它`show`会产生一个`String`，如果我们应用`printf`到一个格式字符串，然后是一个`show`- 产生的第二个字符串，我们仍然会得到一个相当无信息的类型：

```
> :t printf "%s," (show 2)
printf "%s," (show 2) :: PrintfType t => t 
```

特别是，这里没有迹象表明结果是在`IO`monad 中。

如果 GHC 可以从您所在的上下文中得出结论，这通常不会成为问题`IO`。但在 内`dispArray'`，您调用的唯一其他函数是`readArray`, `getBounds`, `return`（和`dispArray'`递归）。这些函数都没有指定它存在于`IO`其中。特别是，所有数组函数都在 monad 上重载，例如：

```
getBounds :: (Ix i, MArray a e m) => a i e -> m (i, i) 
```

（实际上，`getBounds`例如，也可以在`ST`monad 上下文中工作。）所以根本没有任何东西`dispArray'`可以决定你住在`IO`. 这反过来意味着 GHC 无法解析`printf`.

正如我所说，这是所需的灵活性本身无法提供此信息的结果`printf`，`printf`它必须在外部可用。

解决方案很简单。正如其中一条评论所建议的，将调用的结果类型注释为`printf`：

```
printf "%s," (show v) :: IO () 
```

无论如何您都在使用`printf`（并且如果您实际上只对十进制数数组感兴趣），您还可以使用：

```
printf "%d," v :: IO () 
```

为定义中的任何其他内容提供类型签名也足够（但读者不太清楚），`dispArray'`以便将返回类型固定为`IO ()`. 例如，您可以在表达式`return ()`的`then`-branch 中注释`if`：

```
return () :: IO () 
```

# vim - Vim autocmd 模式只匹配特定目录（而不是子目录）中的文件

> ID：15776939
> 
> 赞同：2
> 
> 时间：2013-04-03T00:36:49.653
> 
> 标签：vim

我正在尝试匹配直接在我的桌面上的所有文件。但是 autocmd 模式`*/Desktop/*`也匹配桌面的任何子目录中的文件。什么模式可以做我需要的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T01:12:38.893

一种方法是使用合适的正则表达式，但如果`/`文件名中有 s，这个可能会失败，但你可以改进它：

```
au BufRead * if expand('<amatch>') =~ "/Desktop/[^/]*$" | set tw=90 | endif 
```

另一种方法是使用两个命令，一个还原另一个：

```
 au BufRead */Desktop/*  set tw=90
  au BufRead */Desktop/*/*  set tw=31 
```

# javascript - 在 dygraph 中显示平均值的水平线

> ID：15776940
> 
> 赞同：5
> 
> 时间：2013-04-03T00:36:57.387
> 
> 标签：javascript, dygraphs

我正在尝试向 dygraph 添加一条水平线，它已经显示了我的时间序列数据。

我有完整数据的平均值，我想在 dygraph 上显示为静态水平线。

有谁知道如何简单地做到这一点。

我已经检查了以下链接： [http](http://dygraphs.com/tests/highlighted-region.html) ://dygraphs.com/tests/highlighted-region.html 查看源代码： http: [//dygraphs.com/tests/crosshair.html](http://dygraphs.com/tests/crosshair.html)

必须有一些简单的解决方案

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-24T17:23:42.317

正如[danvk 之前提到](https://stackoverflow.com/a/15789175/217324)的，尝试`"underlayCallback"`在调用中指定选项`"new Dygraph()"`。使用 HTML Canvas 上下文绘制线条。

**下面的示例：** *（xmin 和 xmax 是您的 unix 纪元时间，以毫秒为单位）*

```
var yavg= 50, xmin=1357016400000, xmax=1359694800000;
new Dygraph(document.getElementById('graph1'), data,{
  (....other options....),
  underlayCallback:function(ctx,area,dygraph){      
    var xl = dygraph.toDomCoords(xmin,yavg);
    var xr = dygraph.toDomCoords(xmax,yavg);
    ctx.strokeStyle= 'green';
    ctx.beginPath();
    ctx.moveTo(xl[0],xl[1]);
    ctx.lineTo(xr[0],xr[1]);
    ctx.closePath();
    ctx.stroke();       
 }}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:48:27.683

您的选择是使用底层回调（ala [http://dygraphs.com/tests/highlighted-region.html](http://dygraphs.com/tests/highlighted-region.html)）或添加第二个恒定数据系列。

# matlab - 在 Matlab 中从 3D 冲浪图生成方程

> ID：15776949
> 
> 赞同：0
> 
> 时间：2013-04-03T00:38:08.670
> 
> 标签：matlab, 3d, plot, equation, trend

我想知道是否有人知道（或者可能吗？）如何从 Matlab 的 3D 冲浪图生成趋势方程？我知道我们可以为 2D 图（线性和非线性）创建趋势线并显示其方程，但是 3D 图呢？我们可以创建类似的东西：

z = ax + by?

问候套件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:06:29.667

如果您有曲线拟合工具箱，则可以使用 cftool 拟合 3D 曲面，如此[处](http://www.mathworks.com/help/curvefit/surface-fitting.html)所述。

这是一个例子：

```
[X,Y] = meshgrid(1:100,1:100);
X = reshape(X,numel(X),1);
Y = reshape(Y,numel(Y),1);
Z = 3*X+4*Y;
plot3(X,Y,Z)

f = fit([X, Y], Z, 'poly11');
coeffvalues(f) 
```

# qt - qml 文件在 qrc 中不起作用？

> ID：15776952
> 
> 赞同：0
> 
> 时间：2013-04-03T00:38:27.473
> 
> 标签：qt, qml

平台：win8、qt5.0

```
this->engine = new QQmlEngine;
this->component = new QQmlComponent(this->engine, ":/Foodie.qml");
this->mainWindow = new QQuickWindow;

while(this->component->isReady()) {
    this->mainItem = qobject_cast<QQuickItem*>(component->create());
    this->mainItem->setParentItem(this->mainWindow->contentItem());
    break;
}

<RCC>
    <qresource prefix="/">
        <file>Foodie.qml</file>
    </qresource>
</RCC> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:03:43.410

```
see this passage..  component would not load auto. 
```

> [https://bugreports.qt.io/browse/QTBUG-12916](https://bugreports.qt.io/browse/QTBUG-12916)

# javascript - 一个客户端的 Redis WATCH MULTI EXEC

> ID：15776955
> 
> 赞同：10
> 
> 时间：2013-04-03T00:38:38.787
> 
> 标签：javascript, node.js, redis, node-redis

我在 RedisOnGo + node_redis 上使用 NodeJS + Express + Redis 作为客户端。我希望有很多并发，所以尝试测试 WATCH。这个例子不包含 Express，只包含必要的东西。

```
var redis = require("redis")
var rc = redis.createClient(config.redis.port, config.redis.host)

rc.auth(config.redis.hash, function(err) {
    if (err) {
        throw err
    }
})

rc.on('ready', function () {
    rc.set("inc",0)
    for(var i=1;i<=10;i++){
        rc.watch("inc")
        rc.get("inc",function(err,data){
            var multi = rc.multi()
            data++ // I do know I can use rc.incr(), this is just for example
            multi.set("inc",data)
            multi.exec(function(err,replies){
                console.log(replies)
            })
        })
    }
}) 
```

**预期结果**：在 exec 回调中出现 N 个错误，最后得到“inc”变量 = 10-N。

**意外结果**：在 exec 回调中出现 0 个错误，但最终得到“inc”变量 = 1。

Watch 不适用于我的代码。

我发现这个线程[redis 和 watch + multi 允许并发用户](https://stackoverflow.com/questions/11832637/redis-and-watch-multi-allows-concurrent-users)。他们说这是因为唯一的redis客户端。

然后我发现这个线程[我应该为每个连接创建一个新的Redis客户端吗？](https://stackoverflow.com/questions/11009880/should-i-create-a-new-redis-client-for-each-connection). 他们说“绝对不推荐”为每笔交易生成一个新客户。我搞不清楚了。

另请注意，我必须对 Redis 服务器进行身份验证。提前致谢！

**第 1 版：**

通过在每次 WATCH-MULTI-EXEC 迭代之前创建一个新的客户端连接，我能够使用本地 Redis 实例（因此我不使用 client.auth）使其工作。虽然不确定它是否好，但现在结果是 100% 准确的。

**版本2** 如果我在每次 WATCH-MULTI-EXEC 迭代之前创建一个新的客户端连接，然后执行 client.auth 并等待 client.on，它就可以工作。

问题仍然存在，我可以为每次迭代创建新的客户端连接吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-11-25T06:51:39.313

你的结果是完全可以预测的。没错。

请记住 - node.js 是一个线程应用程序。Node.js 使用异步输入-输出，但命令应该在 redis 中严格按“请求-响应”顺序发送。因此，当您只使用一个与 redis 服务器的连接时，您的代码和您的请求会严格并行执行。

看看你的代码：

```
rc.on('ready', function () {
    rc.set("inc",0)
    for(var i = 1; i <= 10; i++){
        rc.watch("inc")
        //10 times row by row call get function. It`s realy means that your written
        //in an asynchronous style code executed strict in series. You are using just
        //one connection - so all command would be executed one by one.
        rc.get("inc",function(err,data){
            //Your data variable data = 0 for each if request.
            var multi = rc.multi()
            data++ //This operation is not atomic for redis so your always has data = 1
            multi.set("inc",data) //and set it
            multi.exec(function(err,replies){
                console.log(replies) 
            })
        })
    }
}) 
```

要确认这一点，请执行以下步骤：

1.  连接redis并执行[`monitor`](http://redis.io/commands/monitor)命令。
2.  运行你的 node.js 应用程序

输出将是

```
 SET inc 0
    WATCH inc

    GET inc 
    .... get command more 9 times

    MULTI
    SET inc 1
    EXEC
    .... command block more 9 times 
```

这样您就可以准确地得到上面写的结果：“在 exec 回调中出现 0 个错误，但最终得到“inc”变量 = 1。”。

**您可以为每次迭代创建新的客户端连接吗？**

对于这个示例 - 是的，它解决了您的问题。一般来说 - 这取决于您要运行多少“并发”查询。Redis 仍然是一个线程，因此这种“并发”意味着将命令批处理并发到 redis 引擎的方式。

例如，如果使用 2 个连接，则`monitor`可能会给出如下内容：

```
 1 SET inc 0 //from 1st connection
 2 WATCH inc //from 1st connection
 3 SET inc 0 //from 2nd connection            
 4 GET inc //from 1nd connection            
 5 WATCH int //from 2nd connection       
 6 GET inc //from 2nd connection                 
 7 MULTI //from 1st connection           
 8 SET inc 1 //from 1st connection    
 9 MULTI //from 2nd connection           
10 SET inc 1 //from 2nd connection           
11 EXEC //from 1st failed becouse of 2nd connection SET inc 0 (line 3) 
        //was executed after WATCH (line 2) 
12 EXEC //success becouse of MULTI from 1st connection was failed and SET inc 1 from first 
        //connection was not executed

-------------------------------------------------------------------------------> time 
               |   |    |  |   |     |     |    |   |     |    |         |
connection 1  set watch | get  |     |   multi set  |     |   exec(fail) |
connection 2          set    watch  get            multi set            exec 
```

了解 redis 如何执行您的命令非常重要。Redis 是单线程的，来自所有连接的所有命令一个接一个地执行。Redis 不保证来自一个连接的命令将连续执行（如果这里存在另一个连接），因此如果要确保您的命令执行一个块（如果需要），您应该 MULTI。但是为什么需要 WATCH 呢？看看我上面的redis命令。您可以看到来自不同连接的命令是混合的。并且手表可以让你管理这个。

**[这在文档](http://redis.io/topics/transactions)中得到了很好的解释。请阅读！**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T08:46:13.483

我终于明白了你的问题。

如果您想测试**WATCH**的并发性，我认为您需要更改代码。据我们所知。**WATCH**只监控值的变化，不获取值操作。因此，在您当前的代码中，您的所有`get`命令都将成功执行并 get `0`，然后它们将设置`inc`为`1`. 所有设置值都相同（`1`），所以手表不会失败。

在这种情况下，我们需要确保不仅`write`操作受到保护，而且`read`. 在设置之前`inc`，你需要`watch`修改另外一把钥匙作为**悲观锁**，然后我们就可以获取和更改了`inc`。这样，它将确保您的期望。

```
rc.set("inc",0)
for(var i=1;i<=10;i++){
    rc.watch("inc-lock")
    rc.get("inc",function(err,data){
        var multi = rc.multi()
        data++
        multi.incr("inc-lock")
        multi.set("inc",data)
        multi.exec(function(err,replies){
            console.log(replies)
        })
    })
} 
```

我在我的电脑上测试了它。

> [2013-11-26 18:51:09.389] [INFO] 控制台 - [1, 'OK']
> 
> [2013-11-26 18:51:09.390] [INFO] 控制台 - [2, 'OK']
> 
> [2013-11-26 18:51:09.390] [INFO] 控制台 - [3, 'OK']
> 
> [2013-11-26 18:51:09.390] [INFO] 控制台 - [4, 'OK']
> 
> [2013-11-26 18:51:09.391] [INFO] 控制台 - [5, 'OK']
> 
> [2013-11-26 18:51:09.391] [INFO] 控制台 - [6, 'OK']
> 
> [2013-11-26 18:51:09.392] [INFO] 控制台 - [7, 'OK']
> 
> [2013-11-26 18:51:09.392] [INFO] 控制台 - [8, 'OK']
> 
> [2013-11-26 18:51:09.393] [INFO] 控制台 - [9, 'OK']
> 
> [2013-11-26 18:51:09.393] [INFO] 控制台-[10，'OK']

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-26T12:19:51.403

如果您想使用事务/原子 MULTI 操作，但又想使用共享连接，据我所知，您唯一的选择是使用 LUA。

我在redis中使用LUA脚本来做很多事情，而LUA的事情是整个脚本将原子执行，这非常方便。你必须意识到，这意味着如果你有一个缓慢的 LUA 脚本，你会让使用你服务器的每个人的 redis 变慢。

此外，在使用 LUA 时，即使您可以对不同的键进行操作，但请注意，如果您在脚本中使用多个键，则一旦发布，您将无法使用 Redis 集群。这是因为，在使用集群时，密钥将被分发到不同的 Redis 进程，因此您的 LUA 脚本可能无法访问单个服务器上的所有密钥。

无论如何，在发出 MULTI 时，redis 集群的问题是相同的，因为不允许 MULTI 在集群上设置不同的键。

干杯，

j

# mysql - mysql删除最后一个字符是字符，如果它的数字

> ID：15776957
> 
> 赞同：0
> 
> 时间：2013-04-03T00:39:07.100
> 
> 标签：mysql

从 select 语句中，在一个字段中，我想删除最后一个字符是字符（如果它的编号）。MySQL中是否有可用的字符串函数？

对于我想要的这两个 SQL

> 测试

作为输出

```
select 'test1';
select 'test'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:59:26.583

要删除最后一个字符（如果它是数字），不使用正则表达式的一种方法是使用`LEFT`,`RIGHT`和`LENGTH`:

```
select if( right(yourfield,1) = 0 && right(yourfield,1) != '0', 
           yourfield, 
           left(yourfield, length(yourfield) - 1))
from yourtable; 
```

要替换所有尾随数值，您可以使用`REVERSE`：

```
select if( cast(reverse(yourfield) as signed) = 0 && right(yourfield,1) != '0', 
           yourfield, 
           left(yourfield, length(yourfield) - length((reverse(yourfield) + 0))))
from yourtable; 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/2ebf8/1)

当在 MySQL 中将字段转换为整数/有符号时，它将所有数字字符转换为第一个非数字字符——从而使`REVERSE`工作正常。如果最后一个字符不是数字，则结果为 0。

使用`IF`上面的检查，如果最后一个字符不是数字，则打印原始值，否则打印除最后一个字符之外的所有字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T01:02:03.020

另一种方法是使用`REGEXP`,

```
SET @val = 'test12';
SELECT CONCAT(LEFT(@val, CHAR_LENGTH(@val) - 1), 
              IF(RIGHT(@val, 1) REGEXP '[0-9]' = 0, RIGHT(@val, 1), '')) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/9965)
*   [SQLFiddle 演示（*另一个例子*）](http://www.sqlfiddle.com/#!2/93e21/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T00:42:35.833

这是一个指针：

在两个查询之间使用联合。

在第一个 - 要么使用正则表达式，要么获取字段的 substr，其中最后一个字符的另一个 substr 是一个数字，

然后联合文本字段，其中最后一个字符的 substr 不是数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T00:44:39.267

您可能想在 MySQL 中使用正则表达式。这个包可能会帮助你[https://launchpad.net/mysql-udf-regexp](https://launchpad.net/mysql-udf-regexp)。但是，我不建议在 MySQL 语句中这样做，因为它可能会很慢。您最好在获取编程语言中的值之后再做。

# c - C中的简单拍卖系统-技巧？

> ID：15776961
> 
> 赞同：0
> 
> 时间：2013-04-03T00:39:15.130
> 
> 标签：c, file

我使用从文件中收集的信息，用 C 语言为一个小型拍卖系统编写了这个程序。拍卖系统应存储出价，将起始出价/最低增加出价应用于列表，然后通过菜单系统显示结果。我相信我已经实现了项目的目标，但我现在正试图简化我的代码。

我不确定我的代码是否完全正确，或者是否有更简单的方法来使用更少的代码来布局信息。任何提示也将不胜感激！感谢您的时间。

输入文件看起来像这样

```
500 40
100 20
20 7
300 55
700 120 
```

其中第一个数字是“拍卖起始价”

第二个数字是“拍卖最低增加”

```
#include<stdio.h>
#include<stdlib.h>

//int main
int main() {

//open input text
    FILE * ifp;
    ifp = fopen("input.txt", "r");

    printf("Welcome to the Silent Auction\n");
    printf("\nPlease make a selection from the following:\n");

    int number = 1;
    int starting_bid1 = 0;
    int starting_bid2 = 0;
    int starting_bid3 = 0;
    int starting_bid4 = 0;
    int starting_bid5 = 0;

    int au1_start, au1_min, au2_start, au2_min, au3_start, au3_min, au4_start, au4_min, au5_start, au5_min;
    char choice [20];

    fscanf(ifp, "%d %d", &au1_start, &au1_min);
    fscanf(ifp, "%d %d", &au2_start, &au2_min);
    fscanf(ifp, "%d %d", &au3_start, &au3_min);
    fscanf(ifp, "%d %d", &au4_start, &au4_min);
    fscanf(ifp, "%d %d", &au5_start, &au5_min);

    printf("\nView Auctions [VIEW]\nBid on an Auction [BID]\nClose Auctions [CLOSE]\n");
    scanf("%s", &choice);

    if (strcmp(choice, "VIEW", "view", "View") == 0) {

            printf("\nNumber    Current Bid    Minimum Increase\n");

            if (starting_bid1 < au1_start){
                printf("1         $%d             $%d\n", starting_bid1, au1_start);
            }
            else{
                printf("1         $%d             $%d\n", starting_bid1, au1_min);
            }

            if (starting_bid2 < au2_start){
                printf("2         $%d             $%d\n", starting_bid2, au2_start);
            }
            else{
                printf("2         $%d             $%d\n", starting_bid2, au2_min);
            }

            if (starting_bid3 < au3_start){
                printf("3         $%d             $%d\n", starting_bid3, au3_start);
            }
            else{
                printf("3         $%d             $%d\n", starting_bid3, au3_min);
            }

            if (starting_bid4 < au4_start){
                printf("4         $%d             $%d\n", starting_bid4, au4_start);
            }
            else{
                printf("4         $%d             $%d\n", starting_bid4, au4_min);
            }

            if (starting_bid5 < au5_start){
                printf("5         $%d             $%d\n", starting_bid5, au5_start);
            }
            else{
                printf("5         $%d         D    $%d\n", starting_bid5, au5_min);
            }
        }

    else if (strcmp(choice, "BID", "bid", "Bid") == 0) {
            printf("\nWhich auction would you like to bid on?\n");
            scanf("%d", &number);

                switch (number) {
                    case 1:
                        printf("The minimum bid is $%d.\n", au1_start);
                        printf("How much would you like to bid?\n");
                        scanf("%d", &starting_bid1);
                        if (starting_bid1 < au1_start){
                            printf("Sorry, that bid is not high enough.\n");
                        }
                        break;
                    case 2:
                        printf("The minimum bid is $%d.\n", au2_start);
                        printf("How much would you like to bid?\n");
                        scanf("%d", &starting_bid2);
                        if (starting_bid2 < au2_start){
                            printf("Sorry, that bid is not high enough.\n");
                        }
                        break;
                    case 3:
                        printf("The minimum bid is $%d.\n", au3_start);
                        printf("How much would you like to bid?\n");
                        scanf("%d", &starting_bid3);
                        if (starting_bid3 < au3_start){
                            printf("Sorry, that bid is not high enough.\n");
                        }
                        break;
                    case 4:
                        printf("The minimum bid is $%d.\n", au4_start);
                        printf("How much would you like to bid?\n");
                        scanf("%d", &starting_bid4);
                        if (starting_bid4 < au4_start){
                            printf("Sorry, that bid is not high enough.\n");
                        }
                    case 5:
                        printf("The minimum bid is $%d.\n", au5_start);
                        printf("How much would you like to bid?");
                        scanf("%d", &starting_bid5);
                        if (starting_bid5 < au5_start){
                            printf("Sorry, that bid is not high enough.\n");
                        }
                    default:
                        printf("\n");
                }
            }
    else if (strcmp(choice, "CLOSE", "close", "Close") == 0) {
            if (starting_bid1 >= au1_start){
                printf("\nAuction 1 sold for %d.\n", starting_bid1);
            }
            else{
                printf("\nAuction 1 did not sell.\n");
            }

            if (starting_bid2 >= au2_start){
                printf("Auction 2 sold for %s.\n", starting_bid2);
            }
            else{
                printf("Auction 2 did not sell.\n");
            }

            if (starting_bid3 >= au3_start){
                printf("Auction 3 sold for %s.\n", starting_bid3);
            }
            else{
                printf("Auction 3 did not sell.\n");
            }
            if (starting_bid4 >= au4_start){
                printf("Auction 4 sold for %s.\n", starting_bid4);
            }
            else{
                printf("Auction 4 did not sell.\n");
            }

            if (starting_bid5 >= au5_start){
                printf("Auction 5 sold for %s.\n", starting_bid5);
            }
            else{
                printf("Auction 5 did not sell.\n");
            }
    }
    else{
        printf("\nPlease choose either VIEW, BID, or CLOSE.\n");
    }

// formatting
    printf("\n");

//close file
    fclose(ifp);

//return main
return 0;
} 
```

**粗体表示用户输入**

最终产品应如下所示：

```
Welcome to the Silent Auction 

Please make a selection from the following: 
View Auctions [VIEW] 
Bid on an Auction [BID] 
Close Auctions [CLOSE] 
```

**看法**

```
Number Current Bid Minimum Increase 
1  $0.00  $500.0 
2  $0.00  $100.00 
3  $0.00  $20.00 
4  $0.00  $300.00 
5  $0.00  $700.00 

Please make a selection from the following: 
View Auctions [VIEW] 
Bid on an Auction [BID] 
Close Auctions [CLOSE] 
```

**出价**

```
Which auction would you like to bid on? 
```

**3**

```
The minimum bid is $20.00\. 
How much would you like to bid? 
```

**21**

```
Please make a selection from the following: 
View Auctions [VIEW] 
Bid on an Auction [BID] 
Close Auctions [CLOSE] 
```

**关**

```
Auction 1 did not sell. 
Auction 2 did not sell. 
Auction 3 sold for $21.00! 
Auction 4 did not sell. 
Auction 5 did not sell. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:42:57.920

你少了一个逗号：

```
fscanf(ifp, "%d %d", &au1_start &au1_min); 
```

应该

```
fscanf(ifp, "%d %d", &au1_start, &au1_min); 
```

显然，编译器将其解析为`(&au1_start) & au1_min`，第二个`&` 被解释为二进制`&`（按位与）运算符，因此由于数据类型不匹配而发出警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:51:25.140

关于您是否有更简单的方法来使用更少的代码来布置信息的问题，最明显的解决方案是使用 和`starting_bid`制作`au_start`数组`au_min`。然后，不用为 5 次拍卖中的每一次都使用单独的 if-else 或 case 语句，您可以使用一条语句使用拍卖编号对数组进行索引。

# mysql - (MySQL) 为什么 ID 列应该设置为主键（唯一）？

> ID：15776962
> 
> 赞同：0
> 
> 时间：2013-04-03T00:39:18.307
> 
> 标签：mysql

我听说主键意味着唯一。如果我错了，请纠正我。

假设我们有一个用户表。它有 3 列 id、用户名和密码。我们通常将 id 设置为 AUTO_INCREMENT。因此，每次我们向表中添加一行时，它在技术上都会生成一个新的唯一 ID。那么，为什么我们还要将 id 列设置为 Primary Key 或 Unique？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:43:58.450

主键做两件事：

1.  强制数据库完整性（列的唯一性和非空值）

2.  创建一个索引来实现它，这也使得通过主键列快速查找作为“副作用”。

如果您可以确保在您的应用程序代码中（例如仅使用自动增量值），您可能并不严格需要 (1)，但这并没有什么坏处。

不过，您几乎肯定想要 (2)。

> 因此，每次我们向表中添加一行时，它在技术上都会生成一个新的唯一 ID

好吧，这取决于你。仅当您未指定显式值时才会插入唯一 ID。从技术上讲，它不能保证是唯一的，它只是一个自动增量，不考虑表中的任何现有值（可能以某种方式结束）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:45:24.910

将列作为键提供了其他方面。首先，如果它是主要的或唯一的，这将强制没有查询可以为该键输入重复值。键也可以让你做类似的事情

```
INSERT ... ON DUPLICATE KEY UPDATE... 
```

当然，您还需要列上的索引以进行快速查找。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T00:45:53.850

AUTO_INCREMENT 行为仅在插入期间未指定列时出现。考虑：

```
CREATE TABLE ai (
    ai int unsigned not null auto_increment,
    oi int unsigned,
    key (ai),
    primary key (oi)
);
INSERT INTO ai VALUES (1,2);
INSERT INTO ai VALUES (1,3);
INSERT INTO ai VALUES (null,5); 
```

这将产生`(1,2), (1,3), (2,5)`. 请注意 AUTO_INCREMENT 列如何重复。

# c# - 如何在表单标题中显示当前打开文件的名称？

> ID：15776963
> 
> 赞同：1
> 
> 时间：2013-04-03T00:39:24.550
> 
> 标签：c#, winforms, visual-studio-2012, openfiledialog, savefiledialog

我正在制作一个文本编辑器，我想在表单标题中显示当前打开文件的名称（就像记事本一样，它显示“无标题 - 记事本”或““文件 - 记事本”）。

我假设这是使用 SaveFileDialog 和 OpenFileDialog 完成的，所以我将发布我当前的代码。

打开文件：

```
 private void OpenFile()
        {
            NewFile();
            OpenFileDialog ofd = new OpenFileDialog();
            ofd.Title = "Open File";
            ofd.FileName = "";
            ofd.Filter = "Rich Text Files (*.rtf)|*.rtf|Text Document (*.txt)|*.txt|Microsoft Word Document (*.doc)|*.doc|Hypertext Markup Language Document (*.html)|*.html";
            if (ofd.ShowDialog() != DialogResult.OK) return;
            StreamReader sr = null;
            try
            {
                sr = new StreamReader(ofd.FileName);
                this.Text = string.Format("{0} - Basic Word Processor", ofd.FileName);
                richTextBoxPrintCtrl1.Text = ofd.FileName;
                richTextBoxPrintCtrl1.Text = sr.ReadToEnd();
                filepath = ofd.FileName;
                richTextBoxPrintCtrl1.LoadFile(fileName, RichTextBoxStreamType.RichText);

            }
            catch 
            { 
            }
            finally
            {
                if (sr != null) sr.Close();
            } 
```

保存存档

```
private void SaveFileAs()
        {
            SaveFileDialog sfdSaveFile = new SaveFileDialog();
            sfdSaveFile.Title = "Save File";
            sfdSaveFile.FileName = "Untitled";
            sfdSaveFile.Filter = "Rich Text Files (*.rtf)|*.rtf|Text Document (*.txt)|*.txt|Microsoft Word Document (*.doc)|*.doc|Hypertext Markup Language Document (*.html)|*.html";
            if (sfdSaveFile.ShowDialog() == DialogResult.OK)
                try
                {
                    filepath = sfdSaveFile.FileName;
                    SaveFile();
                    this.Text = string.Format("{0} - Basic Word Processor", sfdSaveFile.FileName);
                }
                catch (Exception exc)
                {

                }

void SetWindowTitle(string fileName) {
    this.Text = string.Format("{0} - Basic Text Editor", System.IO.Path.GetFileNameWithoutExtension(OpenFileDialog.Filename)); 
```

如何获取文件名并将其放在表单的标题中（就像记事本一样，文件名后跟文本编辑器的名称）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:04:59.187

在打开的时候。. .

```
private void OpenFile()
{
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.Title = "Open File";
        ofd.FileName = "";
        ofd.Filter = "Rich Text Files (*.rtf)|*.rtf|Text Document (*.txt)|*.txt|Microsoft Word Document (*.doc)|*.doc|Hypertext Markup Language Document (*.html)|*.html";
        ofd.ShowDialog();
        try
        {
            // just one line is added
            this.Text = string.Format("{0} - MyNotepad", Path.GetFileName(ofd.Filename));
            richTextBoxPrintCtrl1.Text = ofd.FileName;
            StreamReader stread = new StreamReader(richTextBoxPrintCtrl1.Text);
            richTextBoxPrintCtrl1.Text = stread.ReadToEnd();
            stread.Close();
            richTextBoxPrintCtrl1.LoadFile(fileName, RichTextBoxStreamType.RichText);
        }
        catch { } 
    } 
```

保存的同时。. .

```
private void SaveFileAs()
{
    SaveFileDialog sfdSaveFile = new SaveFileDialog();
    sfdSaveFile.Title = "Save File";
    sfdSaveFile.FileName = "Untitled";
    sfdSaveFile.Filter = "Rich Text Files (*.rtf)|*.rtf|Text Document (*.txt)|*.txt|Microsoft Word Document (*.doc)|*.doc|Hypertext Markup Language Document (*.html)|*.html";
    if (sfdSaveFile.ShowDialog() == DialogResult.OK)
        try
        {
            richTextBoxPrintCtrl1.SaveFile(sfdSaveFile.FileName, RichTextBoxStreamType.RichText);
            filepath = sfdSaveFile.FileName;
            // just one line is added
            this.Text = string.Format("{0} - MyNotepad", Path.GetFileName(sfd.Filename));
        }
        catch (Exception exc)
        {

        }
} 
```

* * *

只是更新

托比——`The empty catch blocks are needed. If the user cancels the ofd or sfd without the catch block, the program crashes. It keeps the program from crashing`

您不需要 catch 块来检查用户是否选择了确定/取消。

OpenFileDialog 和 SaveFileDialog 具有`ShowDialog`返回的方法`DialogResult`

DialogResult.OK 的值告诉用户已选择要打开/保存的文件并且尚未取消操作。

并以 OpenFile 为例

private void OpenFile() { OpenFileDialog ofd = new OpenFileDialog(); ofd.Title = "打开文件"; ofd.FileName = ""; ofd.Filter = "富文本文件 ( *.rtf)|* .rtf|文本文档 ( *.txt)|* .txt|Microsoft Word 文档 ( *.doc)|* .doc|超文本标记语言文档 ( *.html)|* .html";

```
 if (ofd.ShowDialog() == DialogResult.OK)
    {     
        // just one line is added
        this.Text = string.Format("{0} - MyNotepad", Path.GetFileName(ofd.Filename));
        richTextBoxPrintCtrl1.Text = ofd.FileName;
        StreamReader stread = new StreamReader(richTextBoxPrintCtrl1.Text);
        richTextBoxPrintCtrl1.Text = stread.ReadToEnd();
        stread.Close();
        richTextBoxPrintCtrl1.LoadFile(fileName, RichTextBoxStreamType.RichText);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T00:55:09.457

您可以将其包装在这样的函数中：

```
void SetWindowTitle(string fileName) {
    this.Text = string.Format("{0} - MyEditor", System.IO.Path.GetFileName(fileName));
} 
```

..并传入对话框文件名..

编辑：

你的问题是你没有调用我给你的函数。你有我上面给你的功能..但你没有调用它。

替换这个：

```
this.Text = string.Format("{0} - Basic Word Processor", sfdSaveFile.FileName); 
```

有了这个：

```
SetWindowTitle(sfdSaveFile.FileName); 
```

并替换这个：

```
this.Text = string.Format("{0} - Basic Word Processor", ofd.FileName); 
```

有了这个：

```
SetWindowTitle(ofd.FileName); 
```

# cakephp - 带日期的操作

> ID：15776971
> 
> 赞同：0
> 
> 时间：2013-04-03T00:41:37.437
> 
> 标签：cakephp

我需要检查是否缺少 10 天或更短的时间才能到达某个日期。

我正在尝试这个：

```
 if(date('d/m/Y') >= CakeTime::format('d/m/Y','30/04/2013','-10 days', true )) { 
```

但显然 Caketime::format 工作不正常。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:59:33.247

CakePHP 不会阻止您使用常规的 PHP 功能。如果 PHP*本身*已经提供了您正在寻找的东西，那么它甚至是首选。

在 PHP 中，您可以使用以下方法计算两个日期之间的差异[`DateTime::diff()`](http://www.php.net/manual/en/datetime.diff.php)

在 StackOverflow 上快速搜索给了我这个问题，其中包含适当的示例：

[php中的日期差异？](https://stackoverflow.com/questions/1940338/date-difference-in-php-on-days)

# android - 为 Eclipse 安装新软件时不断出错

> ID：15776975
> 
> 赞同：1
> 
> 时间：2013-04-03T00:42:12.583
> 
> 标签：android, eclipse, installation

我在为我的 eclipse helios 安装 ADT 时不断收到此消息

![在此处输入图像描述](https://i.stack.imgur.com/cePhy.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:15:58.843

之前已使用 JDK7 运行的 Eclipse Helios 报告了这一点：

*   “[未能将 ADT 插件安装到 Eclipse - '违反合同' 错误消息](https://stackoverflow.com/questions/7221267/failure-to-install-adt-plugin-to-eclipse-violates-contract-error-message)”
*   "[在 Eclipse Helios 中安装 Android SDK 的问题](https://stackoverflow.com/q/12825776/6309)"
*   “ [eclipse 3.7.1 更新错误](https://stackoverflow.com/questions/7544379/eclipse-3-7-1-update-error)”

解决方法似乎仍然是：

> 将以下行添加到您的`eclipse.ini`：

```
-Djava.util.Arrays.useLegacyMergeSort=true 
```

然后重新启动 Eclipse。

* * *

另一个更简单的解决方案是将 Eclipse 更新到 Juno

# javascript - 如何从 WWW 目录 phonegap (IOS) 中读取图像文件

> ID：15776983
> 
> 赞同：0
> 
> 时间：2013-04-03T00:43:12.547
> 
> 标签：javascript, ios, cordova

基本上，我想从 IOS5/6 的 phonegap 中的 /WWW/images/ 目录中读取/获取图像文件（jpg），但我无法访问它们。

这似乎是一项简单的任务，但我做不到，这令人沮丧

这被编程到虚拟机中并从模拟器中播放。

这是我的代码。

```
function first(){
    window.requestFileSystem(LocalFileSystem.PERSISTENT,0,gotFS,fail1);

}
function gotFS(fileSystem){
    console.log("gotFS__");
    fileSystem.root.getFile("images/faq.jpg",null,gotFileEntry,fail1);
}
function gotFileEntry(fileEntry){
     console.log("gotFileEntry___");
    fileEntry.file(gotFile,fail1);
}
function gotFile(file){
    readDataUrl(file);
}
function readDataUrl(file){
     console.log("readDataUrl___");
    var reader =  new Filereader();
    reader.onloadend=function(evt){
        console.log("read as data URL");
        console.log("result:"+evt.target.result);

        }
    }
    reader.readAsDataURL(file);
}
function fail1(evt){
    console.log(evt.target.error.code);
} 
```

没有错误报告。但什么也没发生我的错误在哪里？请帮我。此致

**解决方案**

我找到了解决方案，就我而言，我想打开一个位于 www/library/pdffiles/file.pdf 的 pdf 文件。

```
 var path = window.location.pathname;
   var phoneGapPath =  path.substring(0,path.lastIndexOf('/')+1);
   var resource = phoneGapPath + "/pdffiles/"+ localFileName;
   window.plugins.childBrowser.showWebPage( resource ); 
```

如果遇到同样的问题，我希望有人会提供服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T19:56:06.523

解决方案

我找到了解决方案，就我而言，我想打开一个位于 www/library/pdffiles/file.pdf 的 pdf 文件。

```
var path = window.location.pathname;
var phoneGapPath =  path.substring(0,path.lastIndexOf('/')+1);
var resource = phoneGapPath + "/pdffiles/"+ localFileName;
window.plugins.childBrowser.showWebPage( resource ); 
```

如果遇到同样的问题，我希望有人会提供服务。

# r - 在 lm.wfit 中，z <- .Call(C_Cdqrls, x *wts, y*wts, tol) 有什么作用？

> ID：15776984
> 
> 赞同：5
> 
> 时间：2013-04-03T00:43:17.850
> 
> 标签：r, lm

我的首要问题是，在 WLS 案例中，R 如何计算 R^2？它不仅对观察结果进行加权，然后计算 R^2。为了弄清楚这一点，我一直在浏览源代码，直到我在`lm.wfit`代码中遇到这个：

```
z <- .Call(C_Cdqrls, x *wts, y*wts, tol) 
```

这里正在做什么？有谁知道我如何访问此代码以获取详细信息？即，返回`z`什么？`C_Cdqrls`, `x*wts`, `y*wts`,是如何`tol`使用的？

到目前为止我所理解的（我不确定它是否正确），这`.Call`意味着 R 正在 C 中执行此代码。但是，如果可能的话，我想看看这是如何在 C 中完成的。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T01:05:31.340

该`R squared`值实际上是在调用时计算的`summary.lm`，您可以查看任何函数的源代码，无论是在实际的 svn 存储库（[https://svn.r-project.org/R/](https://svn.r-project.org/R/)）中，还是在 github 上的[这个只读镜像中。](https://github.com/wch/r-source)

在[https://github.com/wch/r-source/blob/trunk/src/library/stats/R/lm.R](https://github.com/wch/r-source/blob/trunk/src/library/stats/R/lm.R)查看 `summary.lm`

我们看到以下占权重 ( `w`)

```
r <- z$residuals
f <- z$fitted.values
w <- z$weights
if (is.null(w)) {
    mss <- if (attr(z$terms, "intercept"))
        sum((f - mean(f))^2) else sum(f^2)
    rss <- sum(r^2)
} else {
    mss <- if (attr(z$terms, "intercept")) {
        m <- sum(w * f /sum(w))
        sum(w * (f - m)^2)
    } else sum(w * f^2)
    rss <- sum(w * r^2)
    r <- sqrt(w) * r
}
# ..... some other code
# ... then this definition
ans$r.squared <- mss/(mss + rss) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T00:48:09.140

谷歌搜索很快产生了这个：

[https://svn.r-project.org/R/trunk/src/library/stats/src/lm.c](https://svn.r-project.org/R/trunk/src/library/stats/src/lm.c)

# ruby-on-rails - Rails - 为嵌套模型属性设置默认值

> ID：15776985
> 
> 赞同：1
> 
> 时间：2013-04-03T00:43:21.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在构建一个嵌套模型表单，它允许客户端注册（客户端模型）并同时创建登录（用户模型）。但是，对于新注册者，我想设置 user.role_code（对管理员说“A”），但我一直在努力解决这个问题。从数据模型的角度来看，客户端有多个用户，因为注册后，客户端可以访问应用程序添加其他用户。从这个角度来看，我认为我不能在模型中默认 user_role，因为对于添加的用户，他们的 role_code 可能会有所不同。我想在控制器中设置默认值。

此外，在提交表单后，用户作为数组发送，所以我想确保在注册时只发送一个用户数组对象（显然是出于漏洞原因）。

这是我的代码

```
#client registration form new.html
<%= form_for @client do |client_form| %>
.....
    <%= client_form.fields_for :users do |user_form| %>
        <div class="field">
            <%= user_form.label :first_name %>
            <%= user_form.text_field :first_name %>
        </div>  
.....       
#client Controller

  def create
    logger.info params.inspect
    @client = Client.new(params[:client])

    if @client.save
    ......   

#client model
class Client < ActiveRecord::Base

  attr_accessible :business_name, ... #and more
  attr_accessible :users_attributes

  has_many :users
  has_many :items

  accepts_nested_attributes_for :users, allow_destroy: true

#logger.info params.inspect
"...users_attributes"=>{"0"=>{"first_name"=>..." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:33:19.133

找到了！！！经过大量研究，谷歌搜索，拔出我的头发，最后遇到[Get nested params](https://stackoverflow.com/questions/10596238/get-nested-params)，答案如下：

```
@client.users.first.role_code = "A" 
```

并测试用户数组对象的数量，使用以下

```
if @client.users.size != 1
...
end 
```

# cakephp - cakePHP 和双下拉

> ID：15776987
> 
> 赞同：0
> 
> 时间：2013-04-03T00:43:42.783
> 
> 标签：cakephp, drop-down-menu

我想创建一种双下拉菜单。例如，最初选择框是空的，带有一个向下箭头。如果您单击箭头，您会看到一个包含两个条目的下拉列表：MA 和 NH。如果您然后单击 MA，您将获得另一个带有波士顿和伍斯特的下拉列表。如果您单击 NH，您会看到 Concord 和 Nashua 的下拉菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:58:16.733

据我所知，这与 CakePHP 无关。CakePHP 是一个服务器端 PHP 框架，而不是客户端库。这可以用 JavaScript 来完成，我推荐在这里使用 jQuery 库。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<div id="dropdown">
    Hover me
    <div class="state">
        MA
        <div class="city">Boston</div>
        <div class="city">Worcester</div>
    </div>
    <div class="state">
        NH
        <div class="city">Concord</div>
        <div class="city">Nashua</div>
    </div>
</div>

<style>
    #dropdown{background-color: yellow;width:200px}
    .state{background-color: orange;}
    .city{background-color: lime;}
    .city,.state{display:none}
</style>

<script>
    $(document).ready(function(){
        $("#dropdown").mouseenter(function(){
            $(this).find(".state").show()
            $(this).find(".city").hide()
        }).mouseleave(function(){
            $(this).find(".state").hide()
        })
        $(".state").mouseenter(function(){
            $(".city").hide()
            $(this).find(".city").show()
        }).mouseleave(function(){
            $(".city").hide()
        })
    })
</script> 
```

此代码仅用于说明。它没有优化，但 100% 工作。

永远不要使用内联样式和脚本。

# filter - windows过滤器图中死锁

> ID：15776988
> 
> 赞同：1
> 
> 时间：2013-04-03T00:43:53.557
> 
> 标签：filter, directshow, deadlock, mediacontroller

这是一个难以重现的错误，但我终于设法重现了它。但是，我对可能导致它的原因没有清楚的了解。我目前正试图让自己克服这个错误并找出错误的根源。

想知道是否有人可以给我一些方向或提示。

* * *

我的程序在 Directshow 过滤器图中的停止函数中死锁。

这是调用堆栈：

```
ntdll.dll!_ZwDeviceIoControlFile@40()  + 0x15 bytes 
ntdll.dll!_ZwDeviceIoControlFile@40()  + 0x15 bytes 
KernelBase.dll!_CreateEventExW@16()  + 0x6e bytes   
ksproxy.ax!SetState()  + 0x3e bytes 
ksproxy.ax!Inactive()  + 0x3d bytes 
```

> ksproxy.ax!CKsOutputPin::Inactive() + 0x1d 字节
> ksproxy.ax!CKsProxy::Stop() + 0x59 字节
> quartz.dll!CFilterGraph::Stop() + 0x123f3 字节
> **quartz.dll!CFGControl::CImplMediaControl::Stop () + 0x12dba 字节** <--- 直接调用 *cam.dll!UVCCamera::Shutdown() 第 140 行 + 0x1b 字节 C++ cam.dll！`anonymous namespace'::closeCamera(unsigned int hCamera) Line 297 C++ cam.dll!`匿名命名空间'::CoreThreadFunc(void * data) 第 916 行 + 0xb 字节 C++ kernel32.dll！@BaseThreadInitThunk@12() + 0x12 字节
> ntdll.dll！__ *RtlUserThreadStart@8() + 0x27 字节
> ntdll.dll！*_RtlUserThreadStart@8() + 0x1b 字节*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:17:03.147

我可能已经通过使用下面链接末尾描述的方法解决了这个问题：

[http://social.msdn.microsoft.com/Forums/en-US/windowsdirectshowdevelopment/thread/53563921-6398-491c-999c-3bfaa2f218ca/](http://social.msdn.microsoft.com/Forums/en-US/windowsdirectshowdevelopment/thread/53563921-6398-491c-999c-3bfaa2f218ca/)

现在我得到了一个不同的错误！

# android-activity - 如何使用 Open Graph API 发布过去的操作并隐藏小时钟图标？

> ID：15776992
> 
> 赞同：-3
> 
> 时间：2013-04-03T00:44:33.600
> 
> 标签：android-activity, facebook-opengraph, clock, facebook-timeline

我只是按照[这些说明](https://developers.facebook.com/docs/opengraph/howtos/posting-past-actions/)制作了一个小应用程序，可以在过去将活动发布到 facebook 时间线，但是时钟的小图标一直显示在帖子中，因此显示了两个日期[小烦人的时钟](http://i.stack.imgur.com/XF19l.png)

我的疑问是，为什么示例中使用的 goodreads 应用程序隐藏了小时钟图标而我的应用程序没有？我的意思是，我的应用对隐藏图标有一定的要求，还是应该添加另一个参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:32:48.763

不幸的是，您无法控制 Facebook 如何解释您的打开图形操作并将其显示在 Facebook 上。它永远存在。

# jquery - 如果未设置 css 属性，则无法检索图像宽度

> ID：15776998
> 
> 赞同：0
> 
> 时间：2013-04-03T00:45:04.487
> 
> 标签：jquery, google-chrome, firefox, browser

在除 firefox 之外的所有浏览器上，如果未设置 css 属性，似乎无法检索图像宽度，我尝试了找到的所有代码但无法解决此问题，这是 Html 代码

```
<div class="slide"><img src="../images/image1.jpg"/></div>
<div class="slide"><img src="../images/image2.jpg"/></div>
<div class="slide"><img src="../images/image3.jpg"/></div> 
```

和 Javascript

```
 var slideWidth = parseInt($('.slide').find('img:first').css('width'));
    alert(slideWidth);      //Works on FF but not Other browsers 
    var slideWidth = $('.slide').children('div > img:first').width();
    alert(slideWidth);        //Works on FF but not Other browsers 
```

警报会在 FF 上显示正确的宽度，但在其他人上会显示 0 有没有办法解决这个问题，谢谢..

这里有一个例子：

[http://jsfiddle.net/j82s6/](http://jsfiddle.net/j82s6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:47:41.780

您忘记等待图像首先加载 - 其他浏览器正在检索图像加载之前的宽度。使用`.load()`事件。

小提琴： http: [//jsfiddle.net/M6TxJ/](http://jsfiddle.net/M6TxJ/)
JS：

```
$('.slide img:first').load(function(){
    var slideWidth = parseInt($('.slide').find('img:first').css('width'));
    alert(slideWidth);      //Works on FF but not Other browsers 
    var slideWidth = $('.slide').children('div > img:first').width();
    alert(slideWidth);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:59:53.847

如果您`onLoad`在 jsfiddle 中选择选项（我使用的是 Chrome），您的代码可以正常工作。

[http://jsfiddle.net/j82s6/4/](http://jsfiddle.net/j82s6/4/)

确保将代码放入其中

```
$(document).ready(function{
  // your code
}); 
```

# ios - UITableView 编辑 - 减去仅按下并按住

> ID：15776999
> 
> 赞同：0
> 
> 时间：2013-04-03T00:45:06.780
> 
> 标签：ios, objective-c, xcode, uitableview, editing

我已经尝试调试这个几个小时了，我还没有看到网上有人遇到同样的问题。

我之前的删除功能按预期工作，然后添加一些代码后，减号按钮神秘地停止工作。起初我以为他们根本不工作，但后来发现如果我按住我的水龙头大约 5 秒钟，它会转动并按应有的方式显示删除按钮。

tableview 上有一些手势，但没有 LongPress 手势。这些单元格是自定义单元格，但是当我第一次使用它时并没有引起问题。任何帮助表示赞赏。以下是相关代码：

```
///
/// Pushes detail view for item swiped
///
- (IBAction)cellSwipeLeft:(UISwipeGestureRecognizer *)sender {
    if (sender.state == UIGestureRecognizerStateEnded && ![self isEditing]) {
        NSIndexPath *gestureIndexPath = [self modelIndexPathForIndexPath:[self indexPathForUIGestureRecognizer:sender]];

        // swiped left
    }
}

///
/// Checks off reminder in list
///
- (IBAction)cellSwipeRight:(UISwipeGestureRecognizer *)sender {
    if (sender.state == UIGestureRecognizerStateEnded && ![self isEditing]) {
        NSIndexPath *gestureIndexPath = [self modelIndexPathForIndexPath:[self indexPathForUIGestureRecognizer:sender]];

        //swiped right
    }
}

- (IBAction)cellTap:(UITapGestureRecognizer *)sender {

    if (sender.state == UIGestureRecognizerStateEnded && ![self.tableView isEditing]) {
    NSIndexPath *gestureIndexPath = 
     [self modelIndexPathForIndexPath:[self indexPathForUIGestureRecognizer:sender]];

       // push detail view
    }
}

///
/// Makes tableview rows editable
///
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath     {
    return YES;
}

///
/// Returns editing style of tableview
///
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView     editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {
    return UITableViewCellEditingStyleDelete;
}

///
/// Toggles tableview editing
///
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {

    [super setEditing:editing animated:animated];
    [self.tableView setEditing:editing animated:animated];
}

///
/// Deletes selected rows
///
- (void)tableView:(UITableView *)tableView
commitEditingStyle:(UITableViewCellEditingStyle)editingStyle
 forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        [self deleteReminderAtIndexPath:indexPath];

        //  Animate deletion
        NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
        [[self tableView] deleteRowsAtIndexPaths:indexPaths
                            withRowAnimation:UITableViewRowAnimationAutomatic];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:34:47.390

我发现评论中建议的点击手势导致了问题。我通过将点击手势设置为 2 次触摸来实现这一点，只是想看看发生了什么。它按预期工作，所以他们一定是互相干扰。