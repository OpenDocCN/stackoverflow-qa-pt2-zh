# StackOverflow 问答 12685000-12685999

# debian - 如何在 Debian 中安装 tophat？

> ID：12685004
> 
> 赞同：1
> 
> 时间：2012-10-02T05:31:14.770
> 
> 标签：debian, samtools

我试过搜索和尝试一切。我的系统中安装了 bowtie、samtools 和 libbam-dev。运行`./configure`时出现此错误：

```
checking for bamlib... configure: error: We could not detect the
bam libraries (version  or higher). If you have a staged bam library
(still not installed) please specify $BAM_ROOT in your environment
and do not give a PATH to --with-bam option. 
```

如何解决此错误并安装 tophat？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:39:46.353

SAMtools 必须正确打包，否则 TopHat 无法使用它们。所以：

1.  首先从源代码构建 BAM。[从http://samtools.sourceforge.net/](http://samtools.sourceforge.net/)获取。
2.  选择 BAM 安装文件夹（我将其称为下面的**安装**）。
3.  复制所有 C 头文件以**安装**/ *include/bam*。
4.  复制*libbam.a*到**install** / *lib*。
5.  将*samtools*二进制文件放在您的路径上。
6.  对于 TopHat，尝试*./configure* --with-bam= **install**
7.  如果由于某种奇怪的原因这不起作用，请在运行*./configure之前尝试 export BAM_ROOT=* **install**。

# objective-c - 如何将 iOS 应用程序部署到亚马逊 EC2？

> ID：12685008
> 
> 赞同：2
> 
> 时间：2012-10-02T05:31:54.523
> 
> 标签：objective-c, database, database-design, amazon-ec2, backend

我目前正在使用 Parse.com 作为我的 iOS 应用程序后端。但是，我发现它在许多方面令人沮丧和限制，我想切换到亚马逊 EC2。

我一直在寻找一个关于如何从头开始将 iOS 应用程序部署到亚马逊 EC2 的好教程，但我找不到任何好的东西。

有谁知道一个很好的教程，逐步解释如何为 iOS 应用程序设置 EC2？

我对后端知识的了解接近于零，但我渴望学习。

谢谢！

# asp.net - asp.net 错误的替代错误消息

> ID：12685010
> 
> 赞同：2
> 
> 时间：2012-10-02T05:31:58.643
> 
> 标签：asp.net, razor

输入脚本标签时出现错误

```
 A potentially dangerous Request.Form value was detected
 from the client (memberRequest="<script>alert("hi..."). 
```

我想向用户提供信息性错误消息而不是这个怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T05:43:28.943

您应该在 global.asax 中使用 Application_Error 事件。任何未处理的异常都会在此处捕获，您可以将它们转发到自定义错误页面。

更多信息可以在这里找到：

[http://msdn.microsoft.com/en-us/library/24395wz3(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/24395wz3(v=vs.100).aspx)

您还可以使用 Page_Error 事件。更多信息可以在这里找到：

[http://support.microsoft.com/kb/306355](http://support.microsoft.com/kb/306355)

# vb.net - vb.NET：文本框文本更改

> ID：12685015
> 
> 赞同：2
> 
> 时间：2012-10-02T05:33:02.837
> 
> 标签：vb.net, textbox

再会：）

我有一个带有参考号，收款人，办公室和地址的文本框的程序......我想要的是，如果参考号存在于义务表中，它将自动输入收款人，办公室和地址，如果没有，您将输入收款人的姓名，但如果 Payees 表中自动存在，它将把 Office 和 Address...

我的问题是它显示了正确的结果，但显示了一个消息框，上面写着“数据阅读器中没有当前查询”。我认为代码相互重叠，但我不知道如何解决这个问题。

这是我的 txtRefNo.Text 代码：

```
Private Sub txtRefNo_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtRefNo.TextChanged
    Try
        modGlobalFunctions.Connection.Close()
        modGlobalFunctions.connectDatabase()

        Reader = modGlobalFunctions.executeQuery("SELECT DISTINCT ref_no, payee from bims_obligations " & _
                                                 "WHERE ref_no = '" & txtRefNo.Text & "'")

        If Reader.HasRows Then
            While Reader.Read
                txtPayee.Text = Reader("payee").ToString()
                txtOffice.Text = Reader("office").ToString()
                txtAddress.Text = Reader("address").ToString()

                txtPayee.Enabled = False
                txtOffice.Enabled = False
                txtAddress.Enabled = False

                certALoadGrid()

            End While

        Else

            txtPayee.Clear()
            txtOffice.Clear()
            txtAddress.Clear()

            txtPayee.Enabled = True
            txtOffice.Enabled = True
            txtAddress.Enabled = True

        End If

        Reader.Close()

        modGlobalFunctions.Connection.Close()
    Catch ex As Exception
        MessageBox.Show(ex.Message, "BIMS", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try

    modGlobalFunctions.Connection.Close()
End Sub 
```

对于 txtPayee.text：

```
 Private Sub txtPayee_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtPayee.TextChanged
    Try

        modGlobalFunctions.Connection.Close()
        modGlobalFunctions.connectDatabase()

        Reader = modGlobalFunctions.executeQuery("SELECT * from bims_payee " & _
                                                 "WHERE payee = '" & txtPayee.Text & "'")

        If Reader.HasRows Then
            While Reader.Read
                txtOffice.Text = Reader("office").ToString()
                txtAddress.Text = Reader("address").ToString()

            End While

        Else

            txtOffice.Clear()
            txtAddress.Clear()

        End If

        Reader.Close()

        modGlobalFunctions.Connection.Close()
    Catch ex As Exception
        MessageBox.Show(ex.Message, "BIMS", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try

    modGlobalFunctions.Connection.Close()

End Sub 
```

期待答案......或者是否有一个 if 语句，如果 refNo 存在，那么它将忽略 txtPayee 的 textChange ？？？上帝保佑 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:17:03.597

我相信这条线：

```
txtPayee.Text = Reader("payee").ToString() 
```

会引起`txtPayee_TextChanged`火灾。然后调用：

```
modGlobalFunctions.Connection.Close()
modGlobalFunctions.connectDatabase() 
```

您没有向我们展示这些函数的代码，但这些名称肯定具有暗示性。然后在内部使用这个全局连接对象`txtPayee_TextChanged`，并在底部再次关闭它。

最后，里面的代码`txtRefNo_TextChanged`以这些行继续：

```
txtOffice.Text = Reader("office").ToString()
txtAddress.Text = Reader("address").ToString() 
```

但这`Reader`与已关闭两次的连接相关联（或以某种方式再次替换，您没有显示该代码） - 您将遇到错误。

* * *

这只是为什么拥有一个全局共享对象是一个坏主意的一个原因（如果/当您想开始使用后台工作程序、任务或任何其他涉及多线程的东西时，这也很糟糕）*。*`Connection`

在你的模块中只有一个连接*字符串*会好得多。`modGlobalFunctions`然后，在每个函数内部，创建单独`SqlConnection`的`SqlCommand`对象 - 将每个对象放在`Using`语句中。这样他们就不会互相干扰。

我猜是

```
modGlobalFunctions.Connection.Close() 
```

在每个函数的顶部添加以解决同一问题的早期症状

* * *

另外，正如我的评论中所指出的那样 - 不要抓住`Ex as Exception`并只显示`Ex.Message`. 您不知道*可能*会抛出什么异常，并且您正在处理许多有用的信息（例如堆栈跟踪和内部异常）

* * *

例如，这就是我写你的第一个子的方式：

```
Private Sub txtRefNo_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtRefNo.TextChanged
    Using conn As New SqlConnection(ConnectionString) 'Our own private connection, no one else can interfere
        Using cmd As New SqlCommand("SELECT DISTINCT ref_no, payee from bims_obligations WHERE ref_no = @RefNo", conn) 'Using parameters, safer SQL
            cmd.Parameters.AddWithValue("@RefNo", txtRefNo.Text)
            conn.Open() 'Open the connection
            Dim Reader = cmd.ExecuteReader()
            If Reader.HasRows Then
                While Reader.Read
                    txtPayee.Text = Reader("payee").ToString()
                    txtOffice.Text = Reader("office").ToString()
                    txtAddress.Text = Reader("address").ToString()

                    txtPayee.Enabled = False
                    txtOffice.Enabled = False
                    txtAddress.Enabled = False

                    certALoadGrid()

                End While

            Else

                txtPayee.Clear()
                txtOffice.Clear()
                txtAddress.Clear()

                txtPayee.Enabled = True
                txtOffice.Enabled = True
                txtAddress.Enabled = True

            End If
            Reader.Close() 'Not really necessary, but anyway
        End Using
    End Using 'These have cleaned up our connection and command objects
        'If an exception has occurred, we don't know what it is, or how to recover
        'So we don't try and catch it.
End Sub 
```

# android - 即使屏幕关闭并锁定，音量按钮监听器

> ID：12685019
> 
> 赞同：10
> 
> 时间：2012-10-02T05:33:08.300
> 
> 标签：android, service, android-activity, broadcastreceiver, volume

> **可能重复：**
> [收听后台服务中的音量按钮？](https://stackoverflow.com/questions/10154118/listen-to-volume-buttons-in-background-service)

即使在锁定屏幕和显示器关闭的情况下，我也想在我的应用程序中收听音量键的变化。该服务一直运行的主要问题（在唤醒锁的帮助下）但我只能通过我的方法读取音量变化。

如果我使用始终运行的服务（即使在锁定屏幕和关闭显示的情况下）我有问题。[在这篇](https://stackoverflow.com/questions/7130455/volume-change-listener)文章的帮助下，它具有用于音量变化的广播接收器。

```
public BroadcastReceiver MediaButton_Receiver = new BroadcastReceiver(){
    @Override
    public void onReceive(Context context, Intent intent) {
        KeyEvent event = (KeyEvent)intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);
        if (event == null) {
            return;
        }
        int action = event.getAction();
        if (action == KeyEvent.KEYCODE_VOLUME_DOWN) {
            Log.d(TAG,"VOLUME_DOWN Pressed");   
        }
    };
}; 
```

`event`在服务中始终为空。它仅在音量更改时调用。屏幕关闭时，BroadcastReceiver 也不起作用。

另一种方法是使用具有覆盖功能的 Activity，`dispatchKeyEvent()`但我的 Activity 只运行了一点点，我尝试了唤醒锁，但没有帮助。而且我仍然不确定它是否适用于锁定的屏幕。我已经在整个互联网上进行了搜索，但我找不到答案。

我可以创建一个活动，即使在锁定和关闭屏幕的情况下也会按下音量按钮？或者我可以通过服务以某种方式做到这一点吗？

# iphone - 在 iPhone 上使用 Telstra 3G 连接调用 Web 服务不起作用

> ID：12685020
> 
> 赞同：4
> 
> 时间：2012-10-02T05:33:20.493
> 
> 标签：iphone, web-services

我是一名IOS开发人员。在我最新的应用程序中，我显示了从我的服务器获取的视频列表。我正在使用基于 xml 的 Web 服务来获取要在应用程序上显示的视频数据。我在这里使用 SOAP Post 方法和 HTTP Post 方法。它在每个网络中都运行良好。即使我使用 Telstra sim 并连接 wi-fi，它也能正常工作。但是，每当我切换到 Telstra 3G Connection 时，我的应用程序就不再工作了，它不会从 Web 服务中获取数据，尽管 gmail、Facebook 等其他应用程序在这个 Telstra 3G Connection 上工作得很好。谁能帮我找出为什么这个网络服务不能特别适用于 Telstra 3G Connection？

任何帮助，将不胜感激。提前致谢。

丽兹酒店

# ios - 读写分离的核心数据解决方案

> ID：12685021
> 
> 赞同：0
> 
> 时间：2012-10-02T05:33:22.670
> 
> 标签：ios, core-data

我正在用核心数据做一些事情。由于原始 sqlite 文件包含应用程序中的数据。我决定执行以下操作：

将阅读和写作动作分开。从一个 sqlite 文件的一个数据源进行所有读取，并在另一个文件中进行所有写入。

由于iOS应用中的目录有一些规则，所以我打算将bundle中的所有读取数据复制到缓存目录中，并将写入数据放在文档目录中。

问题是，是否可以直接使用捆绑资源中的读取文件。这意味着我不必将其复制到缓存文件中，这将为设备节省一些空间。

或者你们还有什么更好的主意，请告诉我。

> 我将写入数据放入文档中，因为其中的文件可以由 icloud 备份，这可以作为我程序中的一个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:49:26.983

你问你想做的是否是个好主意，但首先你需要考虑一些可能的陷阱。

我想你的包中的文件也是用 Core Data 创建的，它有一个 MOM。您编写的新文件 - 它可能使用相同的 MOM。如果您需要更新 MOM，您会怎么做？iCloud 上的文件将是版本 1，可能用户 iPhone 使用版本 1，但您的新版本 2 已加载到用户 iPad 上。怎么办？ipad 不应更新存储库，因为这会使 iPhone 在尝试使用数据时失败 - ipad 无法知道所有其他设备是否已更新。

# php - PHP互斥文件/ MySQL使用perl从文件中读取和执行语句

> ID：12685029
> 
> 赞同：0
> 
> 时间：2012-10-02T05:34:51.087
> 
> 标签：php, mysql, perl, mutual-exclusion

所以我想知道PHP如何/如果PHP在文件读写方面有某种互斥。

以下是我打算如何使用它：

我正在使用的网站使用需要离开服务器的支付服务，这使得处理表单提交变得困难，因此在从支付服务返回之前，表单不会被提交到数据库中。信息可以通过支付服务传递并在另一端反刍。但是，可以传递的信息最少。

我对解决方案的想法：

在将注册传递给支付服务之前，处理并在文件中写入 sql 语句，每组语句引用由某个令牌分隔的注册。

返回时，根据您通过支付服务发送的信息查找条目，执行语句并从文件中删除注册块。

改写问题：

- 所以问题是 - 在这种情况下，我是否需要对文件进行互斥，如果需要，我将如何实现？这可以从多种语言中锁定吗？（支付服务需要返回一个 cgi / perl 脚本——尽管我可以包含一个实际处理的 php 脚本）

- 我将如何运行和执行 SQL 语句（最好在 perl 中）？

- 我的解决方案是否看起来不错？

谢谢，

特拉维斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:58:28.077

PHP 和 Perl 都支持`flock()`。

但是，更好的方法是使用数据库。您的 DB 表可能有一`processed`列指示付款是否已处理。当您将请求发送到支付服务时，添加一条记录`processed = 0`。返回注册后，使用 更新表`processed = 1`。

# mercurial - 将本地存储库上传到 Bitbucket

> ID：12685031
> 
> 赞同：0
> 
> 时间：2012-10-02T05:35:44.777
> 
> 标签：mercurial, bitbucket, tortoisehg

如何使用 Tortoise Hg 将我的代码从本地机器上传到 Bitbucket？有人可以提供一步一步的程序吗？我将衷心感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:00:03.847

你读过 Bitbucket 的文档吗？

他们有一个广泛的[“Bitbucket 101”教程](https://confluence.atlassian.com/display/BITBUCKET/Bitbucket+101)，一步一步地解释了所有的基础知识。

来自链接的报价：

> 如果您不熟悉托管代码、使用分布式版本控制系统 (DVCS) 或 Git 或 Mercurial 进行代码管理，那么这个 Bitbucket 101 教程将让您体验所有这些。在本教程中，您将首先为您的操作系统安装 Git 和 Mercurial。您将使用 Git 和 Mercurial 完成一些工作。在整个过程中，您将使用托管代码管理系统，即 Bitbucket。
> 
> [...]
> 
> **如何完成本教程**
> 
> 如果您完全不熟悉 DVCS 和/或 Bitbucket，您应该按顺序浏览每个页面，因为每个新页面都建立在前几页的材料之上。每个页面的末尾是一个导航到后续页面的下一个标题。如果您迷路了，您可以使用导航栏（在您的左侧）找到下一页。如果您有信心跳过页面或只是转到您需要的页面，也可以随意这样做。
> 如果您是一个完全的初学者，您应该留出至少几个小时来完成整个教程。如果您有经验或只是浏览页面，您会很熟悉其中的大部分内容，并且不会花费太长时间。

# mapreduce - 我的减速器的输出键类型可以不同于输入吗？

> ID：12685033
> 
> 赞同：-1
> 
> 时间：2012-10-02T05:35:48.087
> 
> 标签：mapreduce, text-formatting, reducers

实际上，我的 reducer 键是自定义键 (word1, word2) ，我想以 "word1\tword2" 之类的格式编写输出。而我无法做到这一点。

任何帮助表示赞赏。

谢谢。

编辑：一对之间已经有 \t ......我没有注意到它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:49:54.160

你遇到什么错误试试这个

```
public void reduce(Text key, Iterable<IntWritable> values,Context context) 
        throws IOException, InterruptedException {

  CustomKey customkey = (CustomKey) key;

  context.write(new Text(customkey.word1+"/"+customkey.word2), result);
} 
```

# asp.net - 添加服务失败。服务元数据可能无法访问。确保您的服务正在运行并公开元数据

> ID：12685034
> 
> 赞同：0
> 
> 时间：2012-10-02T05:35:48.803
> 
> 标签：asp.net, web-services

我正在编写 WCF 服务。我的代码是

```
namespace RestService
{
    public class user
    {
        public user(string i, string b, string l)
        {
            id = i;
            badgeNumber = b;
            login = l;
        }

        public string id { get; set; }
        public string badgeNumber { get; set; }
        public string login { get; set; }
    }

    public class RestServiceImpl : IRestServiceImpl
    {
        #region IRestServiceImpl Members

        public string XMLData(string id)
        {
            return "You requested product " + id;
        }

        public user[] JSONData(string id)
        {
            OleDbConnection connection = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\confiz\Desktop\att2000.mdb");
            connection.Open();
            OleDbCommand command = new OleDbCommand("SELECT count(*) FROM USERINFO", connection);
            int users_count = (int)command.ExecuteScalar();

            command = new OleDbCommand("SELECT * FROM USERINFO", connection);
            OleDbDataReader reader = command.ExecuteReader();
         //   string jsonString = "";
            user[] users = new user[users_count];

            int i=0;
            while (reader.Read())
            {
                users[i].id = reader["USERID"].ToString();
                users[i].badgeNumber = reader["Badgenumber"].ToString();
                users[i].login = reader["SSN"].ToString();

             /*   user = new user(reader["USERID"].ToString(), reader["Badgenumber"].ToString(), reader["SSN"].ToString());
                System.Web.Script.Serialization.JavaScriptSerializer jsSerializer;
                jsSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();
                System.Text.StringBuilder sbUser = new System.Text.StringBuilder();
                jsSerializer.Serialize(user, sbUser);
                string json = sbUser.ToString();
                */
           //     jsonString = jsonString + json;

                i++;
            }
            connection.Close();
            return users;
        }

        #endregion
    }
} 
```

我的 Web.config 文件是这样的

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="RestService.RestServiceImpl" behaviorConfiguration="ServiceBehaviour">
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address ="" binding="webHttpBinding" contract="RestService.IRestServiceImpl" behaviorConfiguration="web">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
        </endpoint>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

但是当我运行此代码时，我收到错误无法添加服务。服务元数据可能无法访问。确保您的服务正在运行并公开元数据。

错误详细信息：错误：无法从 RestServiceImpl.svc 获取元数据 如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:54:56.930

我要说这是因为您在 web.config 中没有端点地址。

```
<endpoint address ="" binding="webHttpBinding" 
          contract="RestService.IRestServiceImpl" behaviorConfiguration="web"> 
```

# iphone - 如何在 iPhone 上弹出 In-App-Purchase 窗口时停止加载指示器？

> ID：12685041
> 
> 赞同：-1
> 
> 时间：2012-10-02T05:37:00.517
> 
> 标签：iphone, in-app-purchase

当用户点击购买产品按钮时，我想在之前显示加载指示器

弹出应用内购买窗口。

但我不知道我停止指标的委托方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:53:25.870

您可以在将付款添加到 SKPaymentque 时显示它

```
 SKPayment *newPayment = [SKPayment paymentWithProduct:aPakage.storeProduct];
   [[SKPaymentQueue defaultQueue] addPayment:newPayment]; 
```

对于删除，您可以实现一种方法

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions {

[transactionsArray addObjectsFromArray:transactions];
for (SKPaymentTransaction *currentTransaction in transactions) {
    switch (currentTransaction.transactionState) {
        case SKPaymentTransactionStatePurchasing: {
            break;
        }
        case SKPaymentTransactionStatePurchased: {
            [self completeTransaction:currentTransaction];
            break;
        }
        case SKPaymentTransactionStateFailed: {
            [self failedTransaction:currentTransaction];
            break;
        }
        default:
            break;
    }

} 
```

}

当根据购买状态调用此委托方法时，您可以删除加载屏幕。我个人为失败和成功的交易实现了两个独立的功能。

# java - 如何在 index.xthml 中调用 doFilter()

> ID：12685044
> 
> 赞同：0
> 
> 时间：2012-10-02T05:37:21.553
> 
> 标签：java, jsf

我参与了`JSF`登录应用程序。这里有两个方法调用`doLogin()`，包括*登录*逻辑和类`doFilter()`内部`LoginBean`。在`index.xhtml`里面有一个命令按钮`login`，在这里我使用了这个。`action="#{loginBean.doLogin}"`，所以我可以打电话。`doLogin()`我的问题是我怎么打电话`doFilter()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:03:43.990

假设你有一个这样的托管 bean：

```
@RequestScoped
@ManagedBean
public class Login {

    public Login() {
    }

    public String doLogin() {
    }

    public void doFilter() {
    }
} 
```

如果你需要调用`doFilter`里面`doLogin`的方法，只需像基本编程一样添加调用：

```
public String doLogin() {
    //some code here...
    doFilter();
    //more code over here...
} 
```

* * *

根据您的最后一个问题：[Primefaces Login Application](https://stackoverflow.com/questions/12667449/primefaces-login-application)，您混淆了`doFilter`属于 Web 过滤器的`doLogin`方法和属于托管 bean 的方法：

*   当`doLogin`用户激活它调用此方法的事件时，FacesServlet 将调用 。例如，一个 UI 命令动作：

    ```
    <h:form>
        <h:commandButton value="Click me!" action="#{loginBean.doLogin}" />
    </h:form> 
    ```

*   该`doFilter`方法将由 Web 过滤器调用。请注意，当且仅当请求 URL 与 Web 过滤器中声明的 URLPattern 匹配时，过滤器才会在 (Faces)Servlet 之前执行。这表示：

    *   我们有一个 URLPattern = "*.xhtml" 的过滤器
    *   每次我向 发出请求时`<whatever>.xhtml`，都会调用过滤器。
    *   调用时，它将执行该`doFilter`方法（默认方法）。

更多信息：

*   [Java Web开发，我需要什么技能？](https://stackoverflow.com/a/1958854/1065197)通过 BalusC. （我建议您阅读答案中的链接）。
*   我们的 wiki 页面中的[Java Servlet 过滤器。](https://stackoverflow.com/tags/servlet-filters/info)
*   [JSF](https://stackoverflow.com/tags/jsf/info)在我们的 wiki 页面中。
*   [BalusC 的JSF HTTP 会话登录](https://stackoverflow.com/q/3841361/1065197)。
*   [JSF：如何在 JSF 中控制访问和权限？](https://stackoverflow.com/a/12522629/1065197)通过 BalusC.

附带说明：您确实必须学习 Java Web 开发的基础知识**和**最佳实践。

# c++ - 有没有办法转换 std::stack 到 std::stack ?

> ID：12685045
> 
> 赞同：0
> 
> 时间：2012-10-02T05:37:29.853
> 
> 标签：c++, stl, iterator, stack

这里有一些背景。我有一个二叉树迭代器（比如按顺序）。它通过将指针压入堆栈顶部来跟踪其当前节点的父节点。现在我还想要*互操作性*，即转换为的`iterator`能力`const_iterator`。但是`iterator`有`std::stack<pointer>`和`const_iterator`有`std::stack<const pointer>`。

实现相同效果的任何其他方式也是值得赞赏的。

# 编辑

目前我已经放弃了`std::stack`完全使用的想法。我正在使用`std::deque`和`push_back()`++ `pop_back()`。`back()`为了转换`std::deque<pointer>`为`std::deque<const pointer>`，我只是在使用`std::copy( std::begin(ptrDeque), std::end(ptrDeque), std::begin(constPtrDeque) );`，而且这个设置很***简单***。

出于好奇，我仍然想回答这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:54:39.090

只需在您的 const_iterator 中保留一个非常量堆栈。它是一个私有数据成员，所以它并不重要。

确保您的 const_iterator 实现不会通过指针进行修改。再次确定，请始终使用您的 const_iterator 自己的 operator*() ，它应该返回一个 const 引用。（实际上，我认为您不需要过多地取消引用指针，但如果您这样做，就是这样。您应该这样做。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:34:06.297

在 C++ 中进行此类转换并不容易。看起来一个演员就足够了，但它不是这样工作的。

C++ 方式是隐藏关键数据结构并管理不同 API 的访问。是的，这意味着在某一时刻，您拥有的`const`比期望的要少。但这就是隐藏的目的。只要它只是在实现中，其他人就不能滥用它。

`vector`如果您将堆栈/双端队列/任何[我想就足够了] 封装在一个专用类中，您可以非常接近所需的解决方案。在内部它保留非常量指针，但所有`const`方法都返回`const pointer`s。如果您的迭代器仅通过 getter 访问它，则应该不可能绕过它`const`。

# c# - 在 C# 中打开文件和加载应用程序的默认程序

> ID：12685052
> 
> 赞同：4
> 
> 时间：2012-10-02T05:39:04.713
> 
> 标签：c#, winforms, advanced-installer

我有一个 C# WinForm 应用程序。该程序旨在创建和打开特定文件 (.cus)。文件是使用该程序创建的，可以在同一程序中打开。

我正在使用[高级安装程序](http://www.advancedinstaller.com)来创建安装程序。

安装后，我需要我的程序在双击时打开文件（.cus）。（就像，如果我们 dblClick .xls 文件，它会加载并打开 MS Excel，如果它在系统中。）

我怎样才能做到这一点？

我详细的回答会很好理解。让我知道是否需要更清楚。

感谢期待。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T05:50:50.207

安装应用程序时，您需要获取安装包以在 Windows 中创建文件关联。我不确定如何在 Advanced Installer 中实现这一点，但大多数安装包都允许您这样做。您还需要确保您的 Winforms 应用程序接受文件路径作为 Main(string[] arg) 方法的参数，该窗口将设置为您双击的 .cus 文件。

# zend-framework - Zend_Date() 没有给出正确/预期的结果

> ID：12685054
> 
> 赞同：1
> 
> 时间：2012-10-02T05:39:18.950
> 
> 标签：zend-framework, zend-date

Zend_Date 函数返回值 "Feb 10, 2012" 。它应该返回“2012 年 10 月 2 日”。如果给定日期大于 12，则返回当前输出。我不知道我错过了什么。请帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:05:23.963

如果您的格式是 YYYY-MM-DD (2012-10-02)，请尝试以下代码：

```
$str  = '2012-10-02';
$date = new Zend_Date($str, Zend_Date::YEAR . '-' . Zend_Date::MONTH . '-' . Zend_Date::DAY);
echo $date->toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:13:50.950

您用来调用该函数的代码是什么？

不同的国家使用不同的日期格式。有些使用 dd/mm/yyyy，有些使用 mm/dd/yyyy。您在日期和月份中传递的顺序与函数期望调用的方式不同。

在调用函数之前尝试反转月份和日期。

# java - 打开的套接字和连接的套接字有什么区别？

> ID：12685056
> 
> 赞同：11
> 
> 时间：2012-10-02T05:39:29.780
> 
> 标签：java, sockets, datagram, closesocket

Java`Socket`类有两个方法`isClosed`，`isConnected`分别检查套接字是关闭还是连接。我想知道仅打开的 TCP 套接字和打开并连接的 TCP 套接字之间有什么区别，以及这与 UDP 有何不同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T05:47:08.350

简而言之，*打开*`Socket`的 a是一个正在等待连接或已与另一个成功连接的套接字。当一个套接字被*关闭*时，就意味着这个套接字不再可用于连接，并且它的资源已经被释放。A that is connected，嗯，这意味着套接字连接到另一个。*`Socket`*`Socket``Socket`**

 **所以`Socket`一罐..

*   同时打开和连接。
*   是开放的，而不是同时连接。
*   关闭时不连接。

**更新**

来自@Bryan

显然，TCP Sockets 有*半关闭*或*半打开*状态；哪个用法（今天）与它的原始含义不同。更多关于这个[链接](https://superuser.com/questions/298919/what-is-tcp-half-open-connection-and-tcp-half-closed-connection)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-02T05:49:24.157

此页面对套接字状态进行了很好的概述： http: [//diranieh.com/SOCKETS/SocketStates.htm](http://diranieh.com/SOCKETS/SocketStates.htm)以及 TCP 和 UDP 套接字之间的区别。特别：

*   状态“打开”（TCP 和 UDP）：已创建未命名的套接字。未命名的套接字是未绑定到本地地址和端口的套接字
*   状态“已连接”（仅限 TCP）：已在本地和远程主机之间建立关联（虚拟电路）。现在可以发送和接收数据了。

请注意，java.net.DatagramSocket 的较新实现支持对 TCP/IP 网络状态的扩展：DatagramSocket 也可以处于“已连接”状态，因此即使数据报套接字永远不会返回 isConnected() 也不一定返回 false在网络层“连接”。特别是：*“当 DatagramSocket 连接到远程地址时，数据包只能发送到该地址或从该地址接收。默认情况下，未连接数据报套接字。”*

有关更多信息，请参阅[源代码](http://www.docjar.com/html/api/java/net/DatagramSocket.java.html)和[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/net/DatagramSocket.html#connect%28java.net.InetAddress,%20int%29)。**

# css - 如何设置浮动 div 的边距？

> ID：12685064
> 
> 赞同：2
> 
> 时间：2012-10-02T05:39:57.547
> 
> 标签：css, css-float

我有这些 div，一个向左浮动，另一个向左浮动，但它们之间的距离太远了，我希望它们离得更近一点，我尝试设置边距，但没有奏效。谁能帮忙

这是CSS

```
.right{float:right; margin-left:-200px;}
.left{float:left;}

.date{
width:80px;
margin: 50px 90px 0px 200px;
padding: 0px 0px 0px 0px;
}

.entry {
margin: 0px 0px 0px 0px;
padding: 20px 0px 0px 0px;
border-bottom: 0px solid #cccccc;
    font-family:eurofurence;
    font-size:17px;
    width:610px;
    background:#000;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:44:27.027

放

```
 margin-right:200; 
```

为 .right

或者你可以使用

像这样的样式的位置和左或右属性

```
.left{
  position:relative;
  float:left;
  left:100px;
 } 
```

[演示](http://jsfiddle.net/afshinprofe/nK7tv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:51:25.783

试试这个CSS：

```
.left{ float:left;}

.right{float:left; margin-left:200px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-18T00:32:40.030

请注意，当前规范中的左/右浮动元素及其*垂直*边距存在一个错误：这些垂直边距不会折叠到它们*上方*的非浮动元素的垂直边距中，只有那些浮动在它们下方的元素。

它是不连贯的......有时这些垂直边距的行为在浏览器中是不一样的（有些会正常折叠）。

这会创建这些浮动元素与旁边的非浮动元素的不平衡垂直对齐：

```
<div style="border:1px solid black;margin:10px">Non-floatting above.</div>
<div style="border:1px solid black;margin:10px;float:left">Floatting on the left.</div>
<div style="border:1px solid black;margin:10px;float:right">Floatting on the right.</div>
<div style="border:1px solid black;margin:10px">Non-floatting in the middle.</div>
<div style="border:1px solid black;margin:10px;clear:both">Non-floatting below.</div> 
```

您会注意到中间的 3 个块没有对齐：左右浮动块*意外地*位于中央非浮动块下方 10px...

但是下面的块（带有“clear：both”）*可能*会向下移动（但是这种清除将忽略之前浮动的底部边距，这些浮动底部边距*可能*仍然参与到下面元素的顶部边距的折叠中。

所以浮动的上边距没有按预期工作：不可能创建一个设计，其中浮动将采用正确的上边距，如果这些非浮动元素也需要相同的边距，则与设计为就在它们旁边的非浮动元素保持一致.

一种解决方法是将中间行的所有块封装在具有自己垂直边距的父块中，并且中间的所有块都*不能*有任何垂直边距。然后如果所有这些浮点数都不适合行，就会产生问题，有些会“包裹”并且没有任何边距！

唯一的解决方法是将所有中心元素封装在没有边距的父块内，不参与垂直边距的折叠，内容高于或低于它们，但是中间的所有元素都需要设置它们的边距。在这种情况下，无法正确折叠中央行的垂直边距，而行的垂直边距正好位于中间行的上方或下方。

```
<div style="border:1px solid black;margin:10px">Non-floatting above.</div>
<div style="position:relative">
  <div style="border:1px solid black;margin:10px;float:left">Floatting on the left.</div>
  <div style="border:1px solid black;margin:10px;float:right">Floatting on the right.</div>
  <div style="border:1px solid black;margin:10px">Non-floatting in the middle.</div>
  <div style="clear:both"></div>
</div>
<div style="border:1px solid black;margin:10px">Non-floatting below.</div> 
```

# asp.net - 使用razor asp.net在浏览器中显示电子邮件地址

> ID：12685065
> 
> 赞同：0
> 
> 时间：2012-10-02T05:40:11.197
> 
> 标签：asp.net, razor

我想`"me@mymail.com"`在浏览器上显示。我知道这样显示电子邮件地址是不安全的。因此，当我们查看源代码时，它会显示为 javascript。剃刀是否可能。`safe_email()`在浏览器中显示电子邮件地址时，我曾经像使用 codeigniter php 框架那样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:04:18.033

您使用 Razor 的事实无关紧要。保护电子邮件地址免受地址收集者侵害的唯一方法是在页面中对其进行混淆处理，然后使用客户端脚本对适当的客户端进行去混淆处理。我喜欢使用人类可读的混淆，以免锁定禁用脚本的用户。这就是我所做的（使用 MVC WebForms 语法）：

```
String emailAddress = "name@example.com";

public static String Escape(String s) {
    StringBuilder sb = new StringBuilder();
    foreach(Char c in s) {
        sb.Append('%');
        Int32 ic = (Int32)c;
        String hex = ic.ToString("X2"); // convert to hexadecimal
        sb.Append( hex );
    }
    return sb.ToString();
}

<span id="email"><%= Html.Encode( emailAddress.Replace("@", "REMOVE@CAPITALIZED") ) %></span>

<script type="text/ecmascript">
    document.getElementById("email").innerText = unescape("<%= Escape( emailAddress ) %>" );
</script> 
```

转义文本可以保护它们免受收割者的侵害，但脚本会在任何合适的浏览器中自动显示它。没有脚本的用户将看到一个人类可读的模糊地址，他们可以轻松地纠正自己。

# drupal-modules - 如何将模块 Suggest a Frend 从 Drupal 6 升级到 Drupal 7，或者如何替换它？

> ID：12685066
> 
> 赞同：0
> 
> 时间：2012-10-02T05:40:17.757
> 
> 标签：drupal-modules

我正在创建一个需要模块[Suggest a Friend](https://www.drupal.org/project/suggest_a_friend)的社交网站。但是这个模块不适用于 Drupal 7（还），仅适用于 Drupal 6。

是否有任何模块可以替代 Suggest a Friend 模块（对于 Drupal 7）。或者我们如何将 Drupal 6 模块升级到 Drupal 7？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:26:37.893

您应该查看从 Drupal 6 到 Drupal 7 的 api 更改，并查找使用的函数/对象：

[http://drupal.org/node/224333](http://drupal.org/node/224333)

# iphone - Facebook 问题成功

> ID：12685067
> 
> 赞同：1
> 
> 时间：2012-10-02T05:40:27.153
> 
> 标签：iphone, facebook, facebook-graph-api, facebook-login

> **可能重复：**
> [IOS：安全警告：上述 URL 对现金卡或礼品卡无效](https://stackoverflow.com/questions/12674417/ios-security-warning-the-above-url-is-not-valid-for-a-cash-card-or-gift-card)

我只从今天开始面对这个问题。请帮助我，因为我今天想上传 IPA，它刚刚开始。直到今天它工作正常。

**安全警告：**以上 URL**不适用于现金卡或礼品卡**。泄露URL**可能会导致您的帐户被劫持**。

我的 Facebook 功能在没有更改任何代码的情况下停止了。

![在此处输入图像描述](../Images/7f5038e8c9b428f4879765365cdc8e8b.png)

# php - 如何修复联系表单编码？使用联系表格发送泰语

> ID：12685070
> 
> 赞同：0
> 
> 时间：2012-10-02T05:40:45.187
> 
> 标签：php, email, contact-form

我的问题是，当我使用联系表格发送泰语时，当我收到电子邮件时，编码变得非常奇怪。但它不会发生在英语中。通常，泰语对网站使用 TIS-620 编码，所以我也将它放在页面的标题中。

这是我使用联系表格收到的电子邮件：

> 姓名：א×�°��·�ל ����·��¹¹·ל 电子邮件：melo6767@hotmail.com 电话：0811234472 留言：¤��¼����¼י����¹�ל���� 上一页 ��µי�§¹�´��ה���§ה§÷י�§ µ�´µט�·�§ג·���¾·לה´יא��¤��÷ 电子邮件�� ¨¨                                                               ...

我不知道该怎么做，因为我对 PHP 一无所知。请帮忙。

这是我的联系表格编码

```
 <div class="contactform">
                            <?php
              if (isset($_REQUEST['email'])){
                $mailcheck = spamcheck($_REQUEST['email']);

                if (($mailcheck==FALSE) || (!$_REQUEST['name']) || (!$_REQUEST['subject'] || (!$_REQUEST['message']))){
                    if(isset($_POST['name'])){
          $name = $_POST['name'];
        }
        if (isset($_POST['email'])){
          $email = $_POST['email'];
        }
        if (isset($_POST['phone'])){
          $phone = $_POST['phone'];
        }
        if (isset($_POST['subject'])){
          $subject = $_POST['subject'];
        }
        if (isset($_POST['message'])){
          $message = $_POST['message'];
        }

        $form = "<div class=\"indent\"><form method=\"post\" action=\"contactus.php?pg=5\">";
                    $form .= "<p class='textred indent'>Name / ชื่อ-นามสกุล * </p>";
                    $form .= "<input name=\"name\" type=\"text\" value=\"".htmlentities($name)."\" />";
                    $form .= "<br />";
                    $form .= "<p class=\"textred indent\">Email / อีเมล * </p>";
                    $form .= "<input name=\"email\" type=\"text\" value=\"".htmlentities($email)."\"/>";
                    $form .= "<br />";
                    $form .= "<p class=\"indent\">Phone / เบอร์โทรศัพท์ </p>";
                    $form .= "<input name=\"phone\" type=\"text\" value = \"".htmlentities($phone)."\" />";
                    $form .= "<br />";
                    $form .= "<p class=\"textred indent\">Subject / หัวข้อ * </p>"; 
                    $form .= "<input name=\"subject\" type=\"text\" value = \"".htmlentities($subject)."\" />";
                    $form .= "<br />";
                    $form .= "<p class=\"textred indent\">Message / ข้อความ * </p>";
                    $form .= "<textarea name='message' rows='17' cols='46'>".htmlentities($message)."</textarea><br />";
        $form .= "<img src=\"captcha.php\" id=\"captcha\" /><br/>
        <a href=\"#\" onclick=\"
          document.getElementById('captcha').src='captcha.php?'+Math.random();
          document.getElementById('captcha-form').focus();\"
          id=\"change-image\"><p style='font-size:12px;'>Change text.</p></a><br/>
        <p class='textred indent'>Enter code above*</p>  
          <input type=\"text\" name=\"captcha\" id=\"captcha-form\" autocomplete=\"off\" /><br/>
          <input type='submit' />
                    </form> <p class='textred'>*Please provide the necessary details. กรุณาใส่ข้อมูลให้ถูกต้อง</p></div>";

        echo $form;

                }else{

                  $name = $_REQUEST['name'] ;
                  $email = $_REQUEST['email'] ;
                  $phone = $_REQUEST['phone'] ; 
                  $subject = $_REQUEST['subject'] ;
                  $message = $_REQUEST['message'] ;

                  $toEmail = 'info@culfix.com';
                  $messageBody = "Name: ". $_REQUEST['name']. "\n";
                  $messageBody .="Email: ". $_REQUEST['email']. "\n";
                  $messageBody .="Phone: ". $_REQUEST['phone']. "\n";
                  $messageBody .="Message: ". $_REQUEST['message']. "\n";
                  $mailHeader = "From: ". $_REQUEST['email']."\r\n";
                  $mailHeader .= "Reply-To: ". $_REQUEST['email']."\r\n";

                  mail($toEmail, $subject, $messageBody, $mailHeader);
                  header("Location:email.php?pg=5");
                  ob_end_finish();
                }
              }else{
                echo "<div class=\"indent\">
                <form method='post' action='contactus.php?pg=5'>
                    <p class=\"indent\">Name / ชื่อ-นามสกุล * </p>
                    <input name='name' type='text' />
                    <br />
                    <p class=\"indent\">Email / อีเมล * </p>
                    <input name='email' type='text' />
                    <br />
                    <p class=\"indent\">Phone / เบอร์โทรศัพท์ </p>
                    <input name='phone' type='text' />
                    <br />
                    <p class=\"indent\">Subject / หัวข้อ * </p>
                    <input name='subject' type='text' />
                    <br />
                    <p class=\"indent\">Message / ข้อความ *</p>
                    <textarea name='message' rows='17' cols='46'></textarea><br />
        <div class='indent'><img src=\"captcha.php\" id=\"captcha\" /></div>
        <a href=\"#\" onclick=\"
          document.getElementById('captcha').src='captcha.php?'+Math.random();
          document.getElementById('captcha-form').focus();\"
          id=\"change-image\"><p style='font-size:12px;'>Change text.</p></a><br/>
          <p class='indent'>Enter code above</p>
        <input type=\"text\" name=\"captcha\" id=\"captcha-form\" autocomplete=\"off\" />  <br/>
                    <input type='submit' />
                    </form></div>";
              }
            ?>
                        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:53:07.227

尝试设置表单的**enctype**属性`<form enctype="application/x-www-form-urlencoded;charset=UTF-8">`。

而不是“UTF-8”，设置“TIS-620”，看看是否解决了你的问题。

# linux - 在 netbeans 中部署 java 桌面应用程序

> ID：12685071
> 
> 赞同：0
> 
> 时间：2012-10-02T05:40:57.773
> 
> 标签：linux, visual-studio, netbeans

我在 Netbeans 中创建了一个 java 桌面应用程序，现在我想部署为在 Linux 中作为软件工作，但我对整洁的 bean 不太熟悉我使用 Visual Studio 和 Mono 为 Windows 和 Linux 构建应用程序，它们都创建了你的应用程序在 bin/release 目录中，现在我想知道什么相当于 Netbeans 中的 Visual Studio/Mono 发布。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:02:22.807

转到项目文件夹。里面有一个名为“dist”的文件夹，其中包含 jar 文件。这是 .exe 的 java 等价物。您需要使用它在 linux 上运行（假设 JRE 安装在 Linux 机器上）。如果是外部库：库位于“dist”文件夹内的“lib”文件夹中。

# php - mysql_query() 显示包含的 PHP 函数的错误

> ID：12685072
> 
> 赞同：0
> 
> 时间：2012-10-02T05:40:58.353
> 
> 标签：php, mysql

我有两个文件：

### 购物车功能.php

```
function get_product_name($pid){
    $result = mysql_query("SELECT product_name FROM product_table WHERE product_id='".$pid."'", $link);
    $row = mysql_fetch_array($result);
    return $row['product_name'];
} 
```

### 购物车.php

```
<?php
    include('cart_function.php');
    $pid = $_GET['product_id'];
    $pname = get_product_name($pid);
    echo $pname;
?> 
```

在我执行之后`cart.php`，它显示一个错误

> 提供的参数不是有效的 MySQL-Link 资源'

如果我直接在 MySQL 数据库中运行查询，它会完美运行。如果我`get_product_name()`直接在 中使用该功能`cart.php`，它再次不起作用。但是，如果我删除该函数并使用下面的代码，它就可以工作：

```
<?php
    $pid = $_GET['product_id'];
    $result = mysql_query("SELECT product_name FROM product_table WHERE product_id='".$pid."'",$link);
    $row = mysql_fetch_array($result);
    $pname = $row['product_name'];
    echo $pname;
?> 
```

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T05:45:13.887

问题在这里：

```
function get_product_name($pid){
    $result = mysql_query("SELECT product_name FROM product_table WHERE product_id='".$pid."'",
                          $link); 
```

您已编写`$link`，但未提供其值。在传递值时，您必须在函数参数中传递此`$pid`值，如下所示：

```
function get_product_name($pid,$link){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:46:18.587

1）您直接将数据库连接链接用作 $link 到函数中，因此它应该被视为局部变量并且它没有任何内容。

2）所以你需要在你的函数中将 $link 声明为全局。

```
function get_product_name($pid){
        global $link;
        $result=mysql_query("SELECT product_name FROM product_table WHERE product_id='".$pid."'",$link);
        $row=mysql_fetch_array($result);
        return $row['product_name'];
    } 
```

3) 或者您可以将 $link 作为 get_product_name($pid,$link) 的第二个参数传递

# licensing - Google Drive SDK 是否应该使用任何特定的许可证？

> ID：12685075
> 
> 赞同：0
> 
> 时间：2012-10-02T05:41:21.570
> 
> 标签：licensing, google-drive-api

它与 Apache 许可证版本 2.0 兼容吗？

虽然它有使用 Apache 许可证的示例，但找不到任何官方提到该许可证的 sdk 文档。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:10:05.747

Java SDK 代码托管在[http://code.google.com/p/google-api-java-client/](http://code.google.com/p/google-api-java-client/)

它在那里被称为 Apache 2.0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:18:40.240

我认为它只是“Apache 许可证，版本 2.0”。

阅读相同的条款：[https ://developers.google.com/terms/](https://developers.google.com/terms/)

# javascript - AngularJS - 路线 - 如何匹配星（*）作为路径

> ID：12685085
> 
> 赞同：9
> 
> 时间：2012-10-02T05:43:02.503
> 
> 标签：javascript, routes, angularjs

我正在制作资源查看器应用程序，但问题是我试图匹配 `when("/!/:resourceUrl")`.

如果资源 url`/path`类似于`/path/to/the/resource`.
我不知道要走多少路，所以我做不到`.when("/!/:path1/:path2/:path3")`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-27T03:06:37.850

从 angular-1.2 开始，您可以这样做：

```
when("/!/:resourceUrl*") 
```

[http://code.angularjs.org/1.2.0/docs/api/ngRoute.$routeProvider](http://code.angularjs.org/1.2.0/docs/api/ngRoute.$routeProvider)

特别是文档给出了以下示例：

例如，像这样的路由`/color/:color/largecode/:largecode*\/edit`将匹配`/color/brown/largecode /code/with/slashs/edit`并提取：

*   `color: brown`
*   `largecode: code/with/slashs`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T06:03:33.563

截至目前，AngularJS 不支持路由中的正则表达式。

检查这些链接：[https](https://github.com/angular/angular.js/issues/918) ://github.com/angular/angular.js/issues/918，https : [//github.com/angular/angular.js/pull/972](https://github.com/angular/angular.js/pull/972)

# mysql - CentOS 6上的MySQL启动错误

> ID：12685086
> 
> 赞同：1
> 
> 时间：2012-10-02T05:43:13.013
> 
> 标签：mysql

我已经使用以下命令从 CentOS 6 中删除了预装的 MySQL -

```
yum remove mysql mysql-* 
```

现在，我想在我的系统中安装“MySQl-server-5.5.28-1.linux2.6.i386.rpm”。但它无法在我的系统上启动。请告诉我如何使用用户帐户以及 root 启动 MySQL。

我已经这样做了：-

```
[rex@dhcppc0 MySQL]$ 
[rex@dhcppc0 MySQL]$ su -
Password: 
[root@dhcppc0 ~]# cd /home/rex/Documents/Software/MySQL
[root@dhcppc0 MySQL]# rpm -i MySQL-server-5.5.28-1.linux2.6.i386.rpm
    package MySQL-server-5.5.28-1.linux2.6.i386 is already installed

[root@dhcppc0 MySQL]# mysql -u
-bash: mysql: command not found
[root@dhcppc0 MySQL]# mysql -u mysql
-bash: mysql: command not found
[root@dhcppc0 MySQL]# mysql.server start
-bash: mysql.server: command not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:11:43.537

MySQL-server-xxxx 是只包含 MySQL Server 的包。服务器的可执行文件是“mysqld”-“d”字母用于[守护进程](http://en.wikipedia.org/wiki/Daemon_%28computing%29)）。

**您尝试执行的文件（mysql）是 MySQL 客户端。服务器包中没有客户端应用程序。**

请安装 MySQL-client-xxxx 包，其中 xxxx 是一个版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:02:39.530

以 root 用户身份执行下面的 initscript：

```
# /etc/init.d/mysql start 
```

如果您尝试从本地客户端访问数据库，则需要安装 MySQL-client-5.5.28-1.linux2.6.i686.rpm 包。然后就可以控制MySQL数据库了。

```
$ /usr/bin/mysql -u mysql 
```

# facebook - 使用 Facebook graph api 获取陌生人的最爱

> ID：12685089
> 
> 赞同：0
> 
> 时间：2012-10-02T05:44:03.470
> 
> 标签：facebook, facebook-graph-api

我正在尝试获取公众喜欢的列表，

例如`graph.facebook.com/[my own id]/likes` ，给出我“喜欢”的书籍、作者等的列表。

但是，如果我为未连接的人使用 ID，虽然我可以在他们的公共页面上看到他们有一长串“喜欢”，我可以去查看，但图形 API 会返回一个空列表。

关于图形 API 权限和公众喜欢，我有什么遗漏吗？

感谢您提供的任何信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:32:38.473

> 关于图形 API 权限和公众喜欢，我有什么遗漏吗？

应用程序不允许访问*任何*数据，只是因为通过 facebook.com 查看时这些数据可能是“公开的”。

对于大多数数据，您必须向应用程序的当前用户请求相应的[权限](https://developers.facebook.com/docs/authentication/permissions/)才能通过 API 访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T19:45:00.547

此外，重要的是要指出“最爱”和“喜欢”是两个不同的东西。当您登录 Facebook 主页时，“收藏夹”是左侧的应用程序和页面列表。这些与您“喜欢”的页面不同。仅供参考。

![在此处输入图像描述](../Images/4a5d449d6d756ae5424e8f20a9322638.png)

# javascript - 使用 Javascript 自定义 Flash Player 控制器

> ID：12685095
> 
> 赞同：0
> 
> 时间：2012-10-02T05:44:42.597
> 
> 标签：javascript, embed, flash

我想知道它是否可以在 Flash 播放器控制器的某些部分上删除或自定义。我有一个嵌入标签，可以从 Ustream 生成视频。情况是有一个共享按钮，我不希望它在那里。目前，流媒体提供商不允许用户禁用它。

![在此处输入图像描述](../Images/3a0373edb9885a32df9796fd09321bad.png)

我也试过在 jwplayer 上播放视频，但他们不支持，这是因为一些跨域限制。所以我在想Javascript是否有能力为我删除按钮。如果没有，谁能给我一些替代方案？

这是我生成的嵌入标签

```
<object width="320" height="260">
<param name="flashvars" value="autoplay=false&amp;vid=1234" />
<param name="allowfullscreen" value="true" />
<param name="allowscriptaccess" value="always" />
<param name="src" value="http://www.ustream.tv/flash/viewer.swf" />
<embed 
    flashvars="autoplay=false&amp;vid=1234" 
    width="320" 
    height="260" 
    allowfullscreen="true" 
    allowscriptaccess="always" 
    src="http://www.ustream.tv/flash/viewer.swf" 
    type="application/x-shockwave-flash" />
</object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:51:59.487

You can't hide the button through JavaScript unless the player has some kind of `ExternalInterface` API for you to work with (unlikely). You could load their entire player inside another swf of your own, for example using a Loader component ([http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)):

```
var url:String = "http://www.ustream.tv/flash/viewer.swf?autoplay=false&vid=1234";
var urlReq:URLRequest = new URLRequest(url);
ldr.load(urlReq);
addChild(ldr); 
```

Once the player has loaded, you will have access to it via the loader's `content` property. How much access may depend on the swf's version and security settings, and you may need to set the security and app domain's of the [LoaderContext](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/LoaderContext.html) before loading the url request.

Assuming you can get access to the loaded swf, you then need to walk down the tree of DisplayObjects until you find the button you want to hide. This is probably going to be a case of trial and error. Once you get to it, it's just a case of setting `visible=false;`

Alternatively, you could use CSS to position a bit of coloured DIV over the top of the button. That's not likely to look very good, though.

# c++ - 麻烦覆盖派生类的函数

> ID：12685099
> 
> 赞同：0
> 
> 时间：2012-10-02T05:45:16.090
> 
> 标签：c++, inheritance, overriding

我在用我的 AVL 树调用覆盖函数时遇到了一些麻烦。它正在调用 BST 树中的那个。这比平常更令人困惑，因为 AVLNode 是从 BinaryNode 派生的。我需要添加一个高度数据成员。这可能是导致问题的原因还是比这更简单。

```
class BST
{
     public:
     Parent():root(NULL) { }
     void insert( const string & x, int lineNum, int& count )
     {
           insert(x, lineNum, root, count);
     }

     protected:
     BinaryNode* root;
     void insert( const string & x, int lineNum, Node * & t, int& count )
     {//stuff
     }
};

class AVL:public BST
{
     public:
     void insert( const string & x, int lineNum, int& count )
     {
        cout << "INSERT\n";   
        insert(x, lineNum, root, count);
     }
     protected:
     AVLNode* root;

     void insert( const string & x, int lineNum, AVLNode * & t, int& count )
     {
          cout << "insert\n";   
        //different stuff
     }
};

class BinaryNode
{//constructors
}

class AVLNode:public BinaryNode
{//constructors
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:46:45.247

您需要使要覆盖的功能成为虚拟的。例如：

```
 virtual void insert( const string & x, int lineNum, int& count )
 {
       insert(x, lineNum, root, count);
 }

 virtual void insert( const string & x, int lineNum, Node * & t, int& count )
 {//stuff
 } 
```

带有 AVLNode* 的插入方法不会覆盖带有 Node* 的方法。它将创建一个新的插入方法重载。

另外，为了清楚起见，没有理由通过引用传递指针，除非您打算更改函数中指针（而不是指向）的值并希望更改在调用者中可见。通过引用传递只会添加不必要的取消引用（受上述警告的影响）。

# xml - 如何模仿选项卡 onAction 属性？

> ID：12685104
> 
> 赞同：0
> 
> 时间：2012-10-02T05:45:44.063
> 
> 标签：xml, excel, vba, ribbon

如果激活了相应的选项卡XML ，我需要激活特定的工作表

```
<tab id="books" label="books" onAction = "goTo1"> 
```

VBA

```
Sub goTo1()
Sheet1.Activate
End Sub 
```

似乎选项卡元素的 onAction 属性不存在（noComment）
是否有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:56:04.770

这将“反过来”使用功能区界面 - 它不可能开箱即用。功能区的想法是，只有在当前工作表中有意义的操作和选项卡是可见的。

您可以做的是在隐藏表单上设置一个计时器，以检查活动功能区并激活相应的工作表。不过，获取活动选项卡并非易事 -请[在此处](https://stackoverflow.com/a/11140486/783388)查看详细信息。

# visual-studio-2012 - 错误 TF30063：您无权访问... \DefaultCollection

> ID：12685111
> 
> 赞同：229
> 
> 时间：2012-10-02T05:46:25.697
> 
> 标签：visual-studio-2012, tfs, azure-devops

我在 Visual Studio 2012 的一个项目中使用[TFS 预览](https://tfspreview.com/)（团队基础服务）。我还在我的大多数项目中使用本地 TFS 服务器。当我在使用 TFS 预览后使用我的本地 TFS 并返回使用 TFS 预览时，我收到此错误：

> TF30063: 您无权访问 MyProject\DefaultCollection。

如果我去*Team* → *Disconnect TFS*然后再次连接到 TFS 预览，我可以看到“加载标识符”加载屏幕出现，但最后我无法输入我的凭据到 TFS 预览（我的Microsoft 帐户），因此仍然会出现 TF30063 错误。

我怀疑这与我的 Microsoft 帐户（即 Live ID）有关。我使用在 TFS 预览版中使用的相同 Microsoft 帐户登录到 Windows。我已经使用其他 Microsoft 帐户登录到其他站点（Windows 开发中心、MSDN 等），但我验证如果我退出这些服务并使用正确的 Microsoft 帐户重新登录，我仍然会收到 TF30063 错误我尝试从 Visual Studio 登录到 TFS 预览。

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2013-05-22T19:51:39.373

当我遇到这个问题时，提供的答案都没有解决这个问题，或者我不喜欢重新创建项目。我最终解决问题的方式：

![在此处输入图像描述](../Images/65fc2ae304f63feb45cf43fa6dda76d2.png)

1.  单击“连接到团队项目按钮”（团队资源管理器选项卡中主页按钮旁边的插件）
2.  右键单击您遇到此问题的项目。
3.  单击连接。

我猜“记住我”cookie 超时但给了我一个通用的响应来尝试推送或拉取任何代码。

* * *

## 回答 #2

> 赞同：192
> 
> 时间：2012-12-21T11:54:13.307

我通过使用 Visual Studio 中的浏览器解决了这个问题，查看->其他 Windows->Web 浏览器；`Ctrl+Alt+R`（或 * `Ctrl+W, W`* 在 VS2010 之前的 VS 版本中）导航到 TFS 页面并注销错误的帐户并重新登录。

对我来说，这个问题是由使用另一个 live-id 解锁 Windows 手机进行开发引起的。似乎以某种方式缓存了凭据。

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2013-05-07T06:21:11.973

对我来说，更改我的 AD 帐户密码后出现错误。

我不得不从**凭据管理器**中删除该行（其中包含以前的密码。）

然后它又起作用了。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2017-03-07T22:33:56.767

我已将 TFS 2015 升级到 TFS 2017，然后在我的一台客户端计算机上出现 TF30063 错误。这里的解决方案都不起作用......

对我来说，唯一有效的解决方案是从[Developer Command Prompt](https://docs.microsoft.com/en-us/dotnet/framework/tools/developer-command-prompt-for-vs)运行以下命令：

```
tf workspaces /collection:https://tfs.xxxxx.com/tfs/DefaultCollection 
```

当然，您需要将 url 调整为有效的。

来源：[https ://www.visualstudio.com/en-us/docs/setup-admin/tfs/admin/backup/refresh-data-caches](https://www.visualstudio.com/en-us/docs/setup-admin/tfs/admin/backup/refresh-data-caches)

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2012-10-02T10:32:05.217

TFS Preview 登录显然使用 Internet Explorer，因此可能与您正在使用的其他 MS 帐户发生冲突。完全清除 IE 缓存似乎对我有用。清除缓存后，我会进入正确的登录屏幕，并可以根据需要输入我的凭据。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2014-03-26T12:40:06.420

我在这里尝试了所有建议。没有工作。这可能是我将一些 VS 实例连接到我们公司的 TFS 并将一些实例连接到我的私有 TFS 的特殊情况。

为我解决它的唯一方法是关闭所有 VS 实例并启动一个新实例。

奇怪的是，连接到内部 TFS 从来都不是问题。连接到*** .visualstudio.com 有时会引发此问题。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2016-01-15T10:26:27.520

在 VS 2015 中，可以通过 Team Explorer > Connect > Manage Connections 并再次选择团队项目来实现。如果 VS 中存在多个帐户，Team Explorer 会询问使用哪个帐户连接到团队项目。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2016-07-19T23:33:39.583

I tried the following to resolve this issue. Hopefully one of these will work for you

A - Close VS then start the VS Developer Command prompt as an administrator. Then enter: `devenv /resetuserdata`

B - Clear the cache in IE (apparently VS uses this to access your account [mentioned here](https://social.msdn.microsoft.com/Forums/vstudio/en-US/adbb8bcf-16cc-4476-8154-3b5358543d02/tfs-service-tf30063-you-are-not-authorized-to-access-projectnamedefaultcollection?forum=TFService))

C - Click `View -> Other Window -> Web browser (CTRL+ALT+r)` sign in to your old account, log out and sign in to your new one

D - Open the folder containing you solution, delete (backup if you want) the `Visual Studio Source Control Solution Metadata File` delete the `.suo` file and open the .sln file in Notepad and delete the below section

```
GlobalSection(TeamFoundationVersionControl) = preSolution
    SccNumberOfProjects = 6
    SccEnterpriseProvider = {**********************}
    SccTeamFoundationServer = theServer
    SccLocalPath0 = .
    SccProjectUniqueName1 = pro
    SccProjectName1 = myProject.BL
    SccLocalPath1 = myProject.BL
    .....more stuff.....
EndGlobalSection 
```

The last step was required because, while I had managed to disconnect VS my solution was still trying to connect to the old source control account.

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2014-02-27T08:12:16.573

确保没有为 IIS 中的网站/应用程序禁用 Windows 身份验证。

我不确定这是怎么发生的，但我今天确实卸载了 Hyper-V，以便能够安装 VMWare Player，然后重新安装 Hyper-V

重新启用它可以让一切重新工作。

![在此处输入图像描述](../Images/e4636448fd6108c40b8642deb54802e3.png)

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2018-04-24T08:25:13.587

在团队资源管理器中，我删除了项目...然后在管理连接中，单击“连接到项目...”

[![在此处输入图像描述](../Images/71e37d0d08797ba07b29710dbaafd608.png)](https://i.stack.imgur.com/dmDIj.png)

[![在此处输入图像描述](../Images/78e750b6ce30ad7ee6a3f90f4e2ebaef.png)](https://i.stack.imgur.com/VNdY6.png)

在此屏幕中选择您的项目，然后单击连接...这解决了我的问题。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2013-08-06T06:40:53.197

这种情况经常发生在我身上，并且上述解决方案都不是每次都有效。大多数情况下，您使用“连接到团队项目”按钮的解决方案工作正常，但有时当我这样做时没有任何反应。

其他时候，我只需使用 Visual Studio 内置浏览器 ( ++ )或 Internet Explorer重新登录到[http://tfs.visualstudio.com 。](http://tfs.visualstudio.com)`Ctrl``Alt``R`

（正如其他一些答案中所建议的那样，就我而言，这不是由多个 live-id 引起的）

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2018-02-28T05:54:00.460

当前的答案都不适合我。我在[这里](https://developercommunity.visualstudio.com/content/problem/93366/tf30063-you-are-not-authorized-to-access-visualstu.html)找到了解决方案。

> 问题是我以前的凭据被 TFS 服务器的 Windows 操作系统缓存。虽然有些人可能已经成功清除了 AppData 临时文件夹，但这不是必需的。
> 
> 您需要通过 Windows 操作系统上的控制面板更新凭据。
> 
> 在 Windows 10 上对我来说：关闭 VS。转到控制面板（带有小图标视图）--> 用户帐户--> 管理您的凭据（在左侧列）--> 选择“Windows 凭据”-->向下滚动到“通用凭据”部分并查找您的 TFS 服务器连接。展开下拉菜单并单击“编辑”。输入新的网络密码。重新打开VS，一切都应该再次工作。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2012-10-16T01:52:03.940

我刚刚从团队资源管理器中删除了服务器，然后再次添加，它工作了 =)。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2016-12-02T20:12:41.657

当 Visual Studio 提示我提供 Visual Studio Team Services 凭据时，有两个选项：

1.  使用“工作或学校”
2.  使用“个人”帐户

在我的情况下，我使用的是工作电子邮件地址，但是，我必须**选择“个人”**才能建立联系。选择“工作或学校”给了我“tf30063 您无权访问...”错误。

出于某种原因，我的电子邮件地址似乎已注册为“个人”，即使一切都在 Office 365 / Azure 中设置为公司。我相信 Microsoft 帐户是在我们与 Microsoft 的银牌合作伙伴关系之前创建的。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2018-09-05T16:41:27.323

只需重新启动 Visual Studio 即可完成这项工作。当我这样做时，它就像一个魅力

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2014-08-28T13:33:18.067

我得到了这个错误，毕竟我可以做一些琐碎的工作——磁盘空间已满！

清除它解决了我的问题。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2019-09-03T08:00:08.790

我也遇到了和你一样的问题。这是我要解决的问题：

**方法一**

1.  单击解决方案资源管理器中主页图标旁边的“连接”图标。
2.  选择您的项目 > 右键单击​​ > 连接。
3.  尝试签入项目，这一次它会愉快地进行。

这是我尝试过的，我不需要从 TFS 或 VS 帐户的任何会话中注销。

**方法二**

1.  只需按团队资源管理器顶部的刷新。
2.  尝试办理登机手续。

这也是一种简单的方法。

希望这可以帮助。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2017-07-10T12:24:01.317

从团队菜单下的团队喷泉服务器断开连接，然后从团队资源管理器窗口下的连接选项卡重新连接

[![在此处输入图像描述](../Images/433e19c8d11720ca08da0f59bc0e6b99.png)](https://i.stack.imgur.com/SmsOc.png) [![在此处输入图像描述](../Images/65fc2ae304f63feb45cf43fa6dda76d2.png)](https://i.stack.imgur.com/QkXio.png)

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2017-12-18T16:02:59.093

我在 TFS 升级后遇到了这个问题，并且不知何故 Visual Studio 正在缓存无效的登录凭据。我找到了两种修复方法，首先，[使用这个答案](https://stackoverflow.com/a/27728464/2912011)我完全重置了 Visual Studio，然后重新连接：

> 单击菜单*工具*→*导入和导出设置*→*重置所有设置*→*下一步*→ *“不，只是重置设置，覆盖所有当前设置”* →*下一步*→*完成*。

出于某种奇怪的原因，重置后它连接没有问题（我什至不必在重置后重新输入我的凭据或重新配置 TFS）。

第二种方法更容易。首先关闭 Internet Explorer 和 Visual Studio 的所有实例，然后打开 Internet Explorer 并浏览到 TFS，登录，然后再次打开 Visual Studio 并再次尝试连接到 TFS。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2018-02-26T22:53:01.487

我终于在网上找到了适合我的正确答案。

对我来说，这发生在我更改密码并且 Windows 缓存了 TFS 密码之后。需要手动更新。这是一种方法：

解决方案位于：[developercommunity.visualstudio.com](https://developercommunity.visualstudio.com/content/problem/151627/tf30063-you-are-not-authorized-to-access-after-pas.html)

信用：拉文特纳吉！非常感谢！

修复总结：

> 我找到了一个解决方案，它也适用于 Windows 7/Windows 10。步骤是一样的：
> 
> 关闭 Visual Studio。转到控制面板（带有小图标视图）→ 用户帐户→ 管理您的凭据（在左列）→ 选择“Windows 凭据”→ 向下滚动到“通用凭据”部分并查找您的 TFS 服务器连接。展开下拉菜单并单击“编辑”。输入新的网络密码。重新打开 Visual Studio，一切都应该再次运行。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2016-11-23T18:39:22.897

我必须“以不同的用户身份运行”才能让 Visual Studio 使用我的 TFS 帐户进行连接。它似乎是在尝试使用我的 Microsoft 帐户。

文字和图片来自：[https ://www.visualstudio.com/en-us/docs/connect/connect-team-projects](https://www.visualstudio.com/en-us/docs/connect/connect-team-projects)

更改帐户

要在不同于您登录的 Windows 帐户的帐户下运行 Visual Studio，请打开 devenv.exe 的上下文菜单以访问您的运行选项。

[![Visual Studio devenv.exe 的上下文菜单](../Images/342d3e373a621f43739e24588ef04a8d.png)](https://i.stack.imgur.com/a3QH3.png)

您可以在以下文件夹中找到可执行文件：Drive:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2019-09-26T18:03:03.697

什么不是这里的正式答案，但对我有用（其他答案没有帮助）：单击团队资源管理器选项卡 - > 连接超链接 - 连接\选择存储库。它有效。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2018-07-23T10:31:03.783

**检查注册表中的信息：** *HKEY_CURRENT_USER\SOFTWARE\Microsoft\VSCommon\Keychain\Accounts* 并删除 Accounts 部分下的相关键。

**清除这些路径中的缓存：**

*   %localappdata%\Microsoft\TeamTest

*   %localappdata%\Microsoft\Team Foundation

*   %localappdata%\Microsoft\VisualStudio

*   %appdata%\Roaming\Microsoft\VisualStudio

希望这会奏效。

**注意：这样做可能会清除所有 cookie 和缓存并加载 Visual Studio New。**

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2014-06-29T00:59:37.460

确保您的密码没有在您决定安装新开发机器的同一天巧合过期。

如果您甚至无法使用 Web 界面登录 TFS，那么可能就是这种情况。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2015-03-30T09:17:34.687

现在我解决了我遇到的问题：当我使用移动 VPN 登录时，TFS 记住了之前的密码。

解决方案：

重置我用来使用 VPN 连接的帐户

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2018-07-18T13:39:24.823

当我们的 IT 安全政策强制我更改密码时，我遇到了这个问题。更改密码后，当我使用 VS2017 连接到 TFS 时，我不再被授权访问我们的 TFS 服务器并收到`TF30063: You are not authorised to access ...:8080/tfs`错误消息。

但是，如果我使用 VS2013 连接，我可以毫无问题地连接到服务器，**并且**VS2017 的访问被拒绝错误消失了。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2013-09-16T20:38:14.860

尝试将 Internet Explorer 暂时设为您的默认浏览器。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-03-13T20:41:01.297

我也经历了许多这样的解决方案，这对我有用：

出于某种原因，团队资源管理器认为我正在尝试上传到一个新项目。

在团队资源管理器下 -> 同步

我单击“高级”，然后也显示了一个项目下拉列表，在我的情况下我不必更改它，我只需单击发布存储库，瞧。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2019-08-09T02:06:00.160

对我来说，以上所有方法都不起作用（虽然部分起作用）！

在**凭据管理器**中，在**Windows 凭据**和**通用凭据**下，我必须添加用户凭据。

在 Windows 凭据中，没有“http”和端口信息的 TFS 服务器名称。只是服务器名称。

在通用凭证中，带有“http”和端口信息的 TFS 服务器名称。比如，[http://servername:8080/](http://servername:8080/)

[![在此处输入图像描述](../Images/873f88b0da6a3c41e56ee0c3ec350ee1.png)](https://i.stack.imgur.com/KE1Jn.png)

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2018-04-18T13:26:51.520

就我而言，我有一个代理。我已经编辑了 devenv.exe.config 并在那里设置了代理。但是今天我更改了代理域密码，TFS失败（菜单*查看*→ *Windows* →*浏览器*也失败了）。我当然可以再次编辑 devenv.exe。但是有一个解决方案可以完全删除它。一个辉煌的。它在[这里](https://stackoverflow.com/questions/13717815/visual-studio-error-407-proxy-authentication-required#13769953)给出。

打开菜单工具* →*扩展和更新*。
单击左侧菜单中的更新...

在这里它要求输入密码并重新启动 Visual Studio。一切都好。有关更多信息，请在链接中查找答案。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-06-13T13:43:07.057

上周末从 TFS 2018 v3 更新到 DevOps Server 2019.0.1 后，我现在在尝试管理安全性时收到此身份验证错误：

TF30063: 您无权访问 tfs。

尝试通过应用程序层 > 管理安全性从服务器管理控制台管理安全性时收到此错误。当我尝试通过 tfssecurity cli 工具设置权限时，我也会收到错误消息。我在本地管理员组中，并且在控制台管理用户部分中列出。

我正在尝试设置权限，因为在更新后我收到了几份来自员工的报告，这些报告在他们尝试访问他们的项目时收到错误。这些错误是：

TF40049：您没有访问此功能的许可权限：代码。

昨天我花了 8 个小时解决这个问题，这就是解决我们的问题的方法：

*   删除了 DevOps 服务器缓存。（服务器上的 devops 管理控制台中列出的缓存位置）
*   重启服务器。

我根据我阅读的一篇文章从服务器上删除了缓存，但出现了同样的错误，一个用户在使用 Visual Studio 时遇到了安全/权限问题，他们删除了本地机器上的 vs 缓存，这解决了他们的问题。我不知道删除缓存或重新启动是否会独立修复它，因为我将它们都作为一个故障排除步骤进行。

希望这可以帮助某人。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-11-20T20:40:21.333

如果错误消息告诉我们它试图访问 TFS 的用户名，那会容易得多。

我已经处理了一段时间，并且通常只在第二天重新登录以再次停止。

我发现我有两个帐户，删除不需要的帐户解决了这个问题。

[![在此处输入图像描述](../Images/21faa802cea4777e023b19be879ddca7.png)](https://i.stack.imgur.com/vS8k4.png)

这是下`Help > Register Visual Studio`

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2019-10-07T11:50:23.413

如果 Rizowski 的单击绿色插头连接按钮的答案不起作用*并且*您有多个工作区，则问题可能会通过切换到另一个工作区并再次返回而消失。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2021-03-04T15:35:18.610

为我尝试了上述所有解决方案后，同样的问题没有解决，然后下面的命令解决了这个问题。在 Windows 上打开一个运行命令，只需复制以下命令并进行必要的更改，例如 domain\loginname 和 VS 路径

runas /netonly /user:domain\loginname "C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\Common7\IDE\devenv.exe"

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2018-12-01T07:15:58.383

[![只需输入新的凭据](../Images/1d0d60f31dd7c68324974ebec8c4d267.png)](https://i.stack.imgur.com/DvJrG.png)

1.  按 Win 按钮，然后键入凭据管理器并打开它。
2.  添加通用凭据。
3.  返回团队资源管理器，再次添加服务器。

# c++ - pthreads：快速重新锁定导致的线程饥饿

> ID：12685112
> 
> 赞同：12
> 
> 时间：2012-10-02T05:46:34.167
> 
> 标签：c++, multithreading, pthreads

我有两个线程，一个在紧密循环中工作，另一个偶尔需要与第一个执行同步：

```
// thread 1
while(1)
{
    lock(work);
    // perform work
    unlock(work);
}

// thread 2
while(1)
{
    // unrelated work that takes a while
    lock(work);
    // synchronizing step
    unlock(work);
} 
```

我的意图是线程 2 可以通过获取锁有效地暂停线程 1 并执行必要的同步。线程 1 也可以通过解锁来暂停，如果线程 2 没有等待锁定，则重新锁定并返回工作。

我遇到的问题是互斥锁不公平，所以线程 1 快速重新锁定互斥锁并饿死线程 2。我尝试使用`pthread_yield`，到目前为止它似乎运行正常，但我不确定它是否适用所有系统/核心数。有没有办法保证线程 1 总是让给线程 2，即使在多核系统上也是如此？

处理此同步过程的最有效方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T07:12:18.320

您可以在 pthreads 互斥锁之上构建一个 FIFO“票证锁”，如下所示：

```
#include <pthread.h>

typedef struct ticket_lock {
    pthread_cond_t cond;
    pthread_mutex_t mutex;
    unsigned long queue_head, queue_tail;
} ticket_lock_t;

#define TICKET_LOCK_INITIALIZER { PTHREAD_COND_INITIALIZER, PTHREAD_MUTEX_INITIALIZER }

void ticket_lock(ticket_lock_t *ticket)
{
    unsigned long queue_me;

    pthread_mutex_lock(&ticket->mutex);
    queue_me = ticket->queue_tail++;
    while (queue_me != ticket->queue_head)
    {
        pthread_cond_wait(&ticket->cond, &ticket->mutex);
    }
    pthread_mutex_unlock(&ticket->mutex);
}

void ticket_unlock(ticket_lock_t *ticket)
{
    pthread_mutex_lock(&ticket->mutex);
    ticket->queue_head++;
    pthread_cond_broadcast(&ticket->cond);
    pthread_mutex_unlock(&ticket->mutex);
} 
```

在这种方案下，当线程处于票据锁保护的临界区时，不会持有低级 pthreads 互斥锁，从而允许其他线程加入队列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T06:13:37.160

在您的情况下，最好使用[条件变量](https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables)在需要唤醒并执行所有必需操作时通知第二个线程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T06:36:48.450

`pthread`在其 API 中提供了线程优先级的概念。当两个线程竞争一个互斥体时，**调度策略**会决定哪一个会得到它。该功能`pthread_attr_setschedpolicy`允许您设置它，并`pthread_attr_getschedpolicy`允许检索信息。

现在坏消息：

*   当只有两个线程锁定/解锁互斥锁时，我看不到任何形式的竞争，第一个运行原子指令的人接受它，其他人阻止。我不确定此属性是否适用于此。
*   该函数可以采用不同的参数（`SCHED_FIFO`, `SCHED_RR`,`SCHED_OTHER`和`SCHED_SPORADIC`），但[在这个问题](https://stackoverflow.com/questions/1362372/pthread-scheduling-methods)中，已回答仅`SCHED_OTHER`在 linux 上受支持）

所以如果我是你，我会试一试，但不要期望太高。`pthread_yield`对我来说似乎更有希望。更多信息可[在此处](http://man.yolinux.com/cgi-bin/man2html?cgi_command=pthread_attr_setschedpolicy)获得。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-16T14:19:12.290

上面的票锁看起来是最好的。但是，为了确保您的 pthread_yield 正常工作，您可以等待 bool，它由 thread2 设置和重置。只要设置了 bool waiting，thread1 就会产生。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-24T08:37:19.887

这是一个简单的解决方案，适用于您的情况（两个线程）。如果您正在使用，`std::mutex`那么这个类是一个替代品。将您的互斥锁更改为这种类型，您可以保证，如果一个线程持有锁而另一个线程正在等待它，一旦第一个线程解锁，第二个线程将在第一个线程再次锁定之前获取锁。

如果两个以上的线程碰巧同时使用互斥锁，它仍然可以工作，但不能保证公平。

如果您使用普通版`pthread_mutex_t`，您可以根据此示例轻松更改锁定代码（解锁保持不变）。

```
#include <mutex>

// Behaves the same as std::mutex but guarantees fairness as long as
// up to two threads are using (holding/waiting on) it.
// When one thread unlocks the mutex while another is waiting on it,
// the other is guaranteed to run before the first thread can lock it again.

class FairDualMutex : public std::mutex {
public:
    void lock() {
        _fairness_mutex.lock();
        std::mutex::lock();
        _fairness_mutex.unlock();
    }
private:
    std::mutex _fairness_mutex;
}; 
```

# php - Silverstripe 3.0- 脚本标签在保存和发布后从编辑器内容中剥离

> ID：12685115
> 
> 赞同：2
> 
> 时间：2012-10-02T05:46:55.687
> 
> 标签：php, javascript, jquery, tinymce, silverstripe

我需要在 SilverStripe 3.0 编辑器 (Tinymce) 中扩展允许的标签，并允许其中包含 javascript

我在 mysite/_config.php 中添加了以下代码：

HtmlEditorConfig::get('cms')->setOptions(array('valid_elements' => "* [*]"));

上面的代码有效，并且接受了表单和输入等标签....

但它不接受javascript ..（我已经尝试过警报（'hello'）;）它在点击编辑器上的更新后仍然存在，但在点击“保存并发布”后被剥离

版本 2.4.7 中的相同代码已接受脚本，但已被注释掉并添加了 CDATA..

请告诉我如何在编辑器中允许 javascript .....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-24T14:09:48.607

已报告并解决了此问题，但计划在 3.3 之前发布：[https ://github.com/silverstripe/silverstripe-framework/issues/3611](https://github.com/silverstripe/silverstripe-framework/issues/3611)

对于短期解决方法，您可以尝试：[https ://github.com/kinglozzer/htmleditorscripts](https://github.com/kinglozzer/htmleditorscripts)

# php - 用于 LDAP 属性、值、条目等的 PHP 函数“first_”和“next_”与“get_”的用例

> ID：12685116
> 
> 赞同：1
> 
> 时间：2012-10-02T05:46:56.960
> 
> 标签：php, ldap, traversal

PHP LDAP 库定义了几类用于遍历搜索结果的函数，“first/next”函数和“get”函数：

*   `ldap_first_entry`
*   `ldap_next_entry`
*   `ldap_get_entries`

等等属性，值等。

其中每一个都有哪些用例（迭代每个结果与在多维数组中获取所有结果），哪个更容易编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:14:57.427

与任何数据库类似，如果您希望收到大量结果，则最好一次迭代一个结果。另一种方法是一次获取所有结果，虽然很方便，但如果返回数百个结果，可能会导致高内存使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:18:06.313

PHP 中有许多领域提供类似的功能对。

例如，`file_get_contents()`vs`fopen()`和`fread()`。或`XMLReader`与`SimpleXML`.

在所有情况下，它们之间的主要区别在于，一个选项一次将整个数据结构加载到内存中，而另一个选项允许您在遍历数据时一次加载一个。

这些 LDAP 功能是相同的。

一次将它们全部加载到内存中会更快，并且如果您想要做的不仅仅是通过列表进行简单的迭代，那么它具有优势。

另一方面，一次加载一个显然在内存使用方面具有优势，特别是在您有很多项目要阅读的情况下。

PHP 为您提供了选择，因为这两种选择都有其优点。使用适合您的应用程序。

希望有帮助。

# c - 星型对线控制练习

> ID：12685122
> 
> 赞同：3
> 
> 时间：2012-10-02T05:47:46.057
> 
> 标签：c

我正在练习在以下结果中生成星星，但我失败了。

1.

```
*****
 ****
  ***
   **
    * 
```

2.

```
 *
    **
   ***
  ****
 ***** 
```

对于我在这种情况下的逻辑，我认为可以通过在循环上使用宽度对齐控制来生成，但结果表明它是错误的......

```
*    *    *    *    *
*    *    *    *
*    *    *
*    *
* 
```

使用代码：

```
 int i,j;
    char ch='*';//created for using of alignment
    for(i=1;i<=5;i++)
    {
        for(j=5;j>=i;j--)
        {
            printf("%5c", ch);
        }
        printf("\n");
    } 
```

对于我的逻辑，我假设可以通过使用对齐方法 (%5c) 生成。但是，结果与我预期的不一样。

我已经成功生成了星星，如下图：

```
*****
****
***
**
* 
```

带代码：

```
 int i,j;
    for(i=1;i<=5;i++)
    {
        for(j=5;j>=i;j--)
        {
            printf("*");
        }
        printf("\n");
    } 
```

我对制作模式1和2的方法有错误的想法吗？还是错误编码的正确思维？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:19:25.353

要对齐，您实际上可能正在绘制一个矩形。在每一行中，您输出一系列星号（可能为空，即零星号）和一系列空格（可能为空，即无空格）。

它是该`(condition) ? (value_if_true) : (value_if_false)`构造的理想应用。您*总是*绘制完整的矩形，而图案只会因条件而变化：“这是空格还是星号？”

```
int i, j;
for(i=1;i<=5;i++)
{
    for(j=1;j<=5;j++)
    {
        // This generates a full rectangle
        // printf("%c", '*');
        // This generates an empty rectangle ;-)
        // printf("%c", ' ');
        // This generates a triangle
        printf("%c", (i >= j) ? '*' : ' ');
    }
    printf("\n");
} 
```

有两个自上而下的三角形，由条件 (i >= j) 或 (i <= j) 控制；要水平翻转三角形，请将递增序列替换为递减序列，即 (6-j) 而不是 (j)：

```
 when j is       6-j is
       1              5
       2              4
      ...            ...
       5               1 
```

所以测试是`((6-j) <= i)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:55:27.540

您可以尝试以下两种模式的理论：

> 假设一个三角形由一个由空间组成的三角形和另一个由星组成的三角形组成。在一个 for 循环中，您可以创建另外两个 for 循环来控制两个三角形。

尝试我建议的方法，如果你不成功，让我知道我会帮助......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:08:07.280

Chirag 没有错，但你不需要三个 for 循环，只需要两个。

接受 Chirag 的建议：

> 假设一个三角形由一个由空间组成的三角形和另一个由星组成的三角形组成。

现在，将每一行独立地视为一些星号（和空格），它们相对于行号减少/增加。

```
int i, j;
for (i = 0; i < 5; i++)
{
    printf("\n%*s", i, " "); // Print i spaces
    for (j = i; j < 5; j++)
    {
        printf("*");
    }
} 
```

这会给你

```
*****
 ****
  ***
   **
    * 
```

# java - 尝试一次使用 100 个线程。

> ID：12685123
> 
> 赞同：0
> 
> 时间：2012-10-02T05:47:59.363
> 
> 标签：java, multithreading

我正在创建一个测试工具来测试 Web 服务的性能。现在我想在 100 个用户点击此 Web 服务时测试我的工具的性能。
在 Current 中，我创建了一个线程来加热并在日志中显示请求响应详细信息。但我需要创建 100 个并行工作的线程并向我展示 100 个线程的请求响应。
我的问题是如何创建`100 parallel thread's`. 在这里我尝试创建 100 个线程并行但是当我运行这个程序时它不会调用`run()`方法。

这是我的代码。

```
public class Main implements Runnable
{
int counter= 0;
 public static void main(String args[]) throws Throwable  
 {      
  Thread t[]=new Thread[100];
  for (int j=0; j<100;j++)
  {
      t[j]=new Thread();
      t[j].start();       
  }          
 }
 public void run()
 {
  try {

        System.out.println("thread "
           +Thread.currentThread().getName()+" step "+counter++);

  } 
  catch (Throwable t) { 
      t.printStackTrace();
   }
 }
} 
```

给我一些提示或参考。我不明白我错在哪里。
提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T05:49:59.613

你没有实例化*你的*线程类——它恰好是 Main。

你的班级应该是这样的：

```
public class Main extends Thread {
    int counter= 0;
    public static void main(String args[]) throws Throwable {      
        Main t[] = new Main[100];
        for (int j=0; j<100;j++) {
            t[j] = new Main();
            t[j].start();       
        }          
    }
    public void run() {
        try {
            System.out.println("thread " + Thread.currentThread().getName()+" step "+counter++);
        } 
        catch (Throwable t) { 
            t.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T05:52:50.347

你可能是说`t[j]=new Thread(new Main())`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T05:53:49.320

我建议您使用[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)来管理您的线程，并且您可以将 Runnable 作为任务提交到该池。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T07:22:35.263

我建议您使用 Apache JMeter 进行 Web 服务测试。它已经具有请求/响应的并行线程功能。

无论如何：要创建新线程，请使用构造函数：

```
Thread(Runnable target) 
```

如您所见，线程实现了runnable，另一种方式就是覆盖run方法。

```
public class Thread implements Runnable 
```

# sql-injection - Sql 注入 MS Access

> ID：12685124
> 
> 赞同：1
> 
> 时间：2012-10-02T05:48:02.313
> 
> 标签：sql-injection

我正在进行渗透测试，对供应商的登台 Web 服务器进行第 3 方验证，并找到了一个似乎正在运行 MS-Access 作为其后端数据库的 IIS 实例。我认为我可能已经找到了潜在的 SQLi 攻击媒介，但需要进行一些验证。我已经对使用 MS-Access 的 SQLi 漏洞进行了一些研究，但并没有真正得到任何与我的情况相关的有用信息。

当我最初访问登录页面时，我输入了“1 OR 1=1”作为用户名，看看我是否能得到一些低调的果实。这是我收到的错误消息：

HTTP 500.100 - 内部服务器错误 - ASP 错误 Internet Information Services

技术信息（支持人员）

```
Error Type:
Microsoft OLE DB Service Components (0x80040E73)
Format of the initialization string does not conform to the OLE DB specification.
/arnisi/start.asp, line 204

Browser Type:
Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1

Page:
POST 196 bytes to /arnisi/start.asp

POST Data:
username=%271+OR+1%3D1%27&password=&dataSource=mkgt13&lang=en&database=esuite&  provider=SQLOLEDB&FromLoginPage=1&dir=ltr&screenHeight=900&screenWidth=1600&browserType=NS&browserVer=6&font=arial 
```

有趣的是，错误显示数据源为 mkgt1，数据库为 esuite。杀死我的是在 MS-Access 上运行查询的语法。这可能吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T06:16:54.983

试试a'or'1'='1。这将起作用，如果存在 sql 注入漏洞，它将被暴露。

# function - SciLab 绘图

> ID：12685125
> 
> 赞同：3
> 
> 时间：2012-10-02T05:48:03.700
> 
> 标签：function, matlab, graph, graphing, scilab

您将如何在 SciLab 或 MatLab 中绘制这些图？我对这些不熟悉，不知道该软件是如何工作的。请帮忙。

```
$Plot following functions with different colors in Scilab or MatLab
–   f2(x) = logn
–   f3(x) = n
–   f4(x) = nlogn
–   f5(x) = n2
–   f6(x) = nj (j > 2)
–   f7(x) = cn (c > 1)
–   f8(x) = n!

where x = linspace(1, 50, 50). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:27:02.193

嗯，其中很多都是内置函数。例如

```
>> x = linspace(1,50,50);
>> plot(x,log(x))
>> plot(x,x)
>> plot(x,x.*log(x))
>> plot(x,x.^2) 
```

我不知道应该是`nj (j > 2)`什么`cn (c > 1)`意思。

对于最后一个，您应该查看 function `factorial`。

从上下文中不清楚您是应该将它们绘制在不同的图表上还是全部绘制在同一个图表上。如果都在同一张图上，那么您可以使用

```
>> hold on; 
```

冻结当前轴 - 这意味着任何新线都将绘制在旧线之上，而不是绘制在一组新的轴上。

在 Matlab 中（可能在 Scilab 中）你可以为函数提供一个“line spec”参数`plot`，它告诉它绘制线条的颜色和样式。例如，

```
>> figure
>> hold on
>> plot(x,log(x),'b')
>> plot(x,x/10,'r')
>> plot(x,x.^2/1000,'g') 
```

告诉 Matlab`f(x)=log(x)`用蓝色、`f(x)=x/10`红色和`f(x)=x^2/1000`绿色绘制函数，结果如下图：

![在此处输入图像描述](../Images/803feaa6de3084bc8c0237c0f584dcc7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:53:01.170

我还不能评论或投票，但我想补充一下 Chris Taylor 的回答，即在 Scilab中没有使用`hold on`and`hold off`约定。所有绘图命令都输出到当前轴，这些轴一直“保持”。如果您想生成一个新图形或更改您可以使用的当前轴`figure(n)`，其中`n`可以是任何（非连续）正整数 - 实际上只是一个标签。

另请参阅`clf(n)`，`gcf()`并且`gca()`- Scilab 的图形处理与 Matlab 的有很大不同，尽管 matplotlib ATOMS 模块在某种程度上使 Scilab 看起来和行为更像 Matlab。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-29T11:27:51.893

在 Scilab 中，它将是

```
x = 1:50;
clf
plot("ll", x,log, x,x, x,x.*log(x), x,x.^2)
gca().sub_ticks(2) = 8;
xgrid(color("grey"))
legend("$"+["ln(x)", "x", "x.ln(x)", "x^2"]+"$", "in_upper_left") 
```

[![在此处输入图像描述](../Images/bae1bb0dd4dd91bdc98204d3218c5055.png)](https://i.stack.imgur.com/yyG2E.png)

# java - Project Sumatra 在其他 JVM 语言中的应用

> ID：12685126
> 
> 赞同：4
> 
> 时间：2012-10-02T05:48:04.933
> 
> 标签：java, jvm, gpu

我最近刚刚发现了[Project Sumatra](http://openjdk.java.net/projects/sumatra/)，它旨在将 JVM 引入显卡。在他们的网页上，这包括一个用于 Java的自定义编译器（称为[Rootbeer ）。](http://chirrup.org/rootbeer/)

这都是好消息，但是，如果这意味着 Sumatra 项目也适用于其他 JVM 语言，我想听听对项目内部有更多了解的人？是否可以直接从 Scala 或 Clojure 进行 Aparapi 调用？或者您是否必须在 Java 中开发一些核心功能，然后通过其他 JVM 语言访问这些功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T14:12:20.760

我只是遇到了这个问题。抱歉花了这么长时间。完全披露我是苏门答腊的 Aparapi 发明人/牵头人和共同赞助商。

与 Aparapi 不同，Sumatra 具有从 JVM 内部使用 Java 方法的 IR（中间表示）工作的优势。这意味着最终它将根据在此抽象级别发现的模式检测 GPU 卸载的机会。Aparapi 不得不从字节码中逆向工程机会。

Sumatra 很可能最初会关闭用户提示，而不是尝试自动并行化代码。目前的主要关注点是 Java 8 的新“lambda”特性及其配套的“stream API”。因此，Aparapi 要求用户从内核基类继承。Sumatr a 可能会使用以下建议的并行性的“显式”提示：-

IntRange.range(1024).parallel().forEach(gid->{out[gid]=a[gid]+b[gid];});

尽管对于明显的情况，例如

for (int id=0; i< 1024; i++){ out[gid]=a[gid]+b[gid]; }

应该完全可以卸载这个循环。因此，对其他基于 JVM 的语言的支持将取决于我们寻找自动并行化机会的雄心。我怀疑来自其他语言（JavaScript (Nashorn)、JRuby、Scala、JPython 等）的许多模式都是可以检测到的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T07:27:07.247

AFAIK Rootbeer（一个大学项目）和 Aparapi（一个基于 AMD 的项目）是不相关的，所以你可能在这里错过了一些东西。

关于 Aparapi 本身，它在其 Wiki 中声明它不适用于 Scale/Closure 等，或者实际上除了纯 Java 之外的任何东西，因为它依赖于 JDK 的 javac 使用的模式来正确分析字节码。它还要求您扩展其 Kernel 类，以便能够将字节码转换为 OpenCL 并在 GPU 中执行。所以看起来你会使用一个或另一个。

回到您的问题：基于所有这些，您必须使用 Java 进行开发并从其他 JVM 语言中调用它。

# list - 如何使用 foreach 循环在 Velocity 中获取列表元素以显示为表格

> ID：12685129
> 
> 赞同：1
> 
> 时间：2012-10-02T05:48:54.997
> 
> 标签：list, foreach, velocity

我有一个从数据库中获取的列表。列表中有 6 个元素

```
 List<String> list=new ArrayList<String>();
 list.add("No Connection");
 list.add("sep 24 ,2009");
 list.add("no issues are there");
 list.add("dec 30,2012");
 list.add("no meter");
 list.add("april 12,2013");

map.put("list",list); 
```

我正在使用速度模板。在那我使用foreach循环来获取列表项。我必须在表格中显示第一个单元格中的两个单元格，偶数索引中的三个元素应该显示，而第二个单元格中的奇数索引应该显示。如何做到这一点。

```
#foreach($mylist in $list)
    <td>even indexed list elements in my list</td>
    <td align="center">odd indexed elements in the list.</td>
    #end 
```

**更新：**

我试过这样但它不起作用。这是获取速度索引的正确方法吗？

```
#set ($counter = 0)
#foreach ($i in $descList)
    #set ($counter = $counter + 1)
    #if ( $couter % 2 == 0)
        <td>$descList[$i]</td>
        <td align="center"></td>
    #else
        <td></td>
        <td align="center">$descList[$i+1]</td>
    #end
#end 
```

我收到以下错误。

07:53:31,952 错误 VelocityEngine:43 - 模运算的左侧 ($couter) 具有空值。无法操作。/emailtemplates/diis_nem_issues_email.vm [第 47 行，第 20 列]

07:53:31,953 错误 VelocityEngine:43 - '==' 操作的左侧 (2) 具有空值。如果是引用，它可能不在上下文中。无法操作。/emailtemplates/diis_nem_issues_email.vm [第 47 行，第 25 列]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:24:11.977

我通过在我的应用程序中使用哈希表而不是在我的应用程序中使用 List 解决了这个问题

```
#foreach( $key in $hashtab.keySet() )
 <tr><td>$key</td><td align="center">$hashtab.get($key)</td></tr>
#end 
```

在我的java类中我有这样的

```
HashTable<String,Date> hashtab=new HashTable<String,Date>();
hashtab.put(key,value); 
```

谢谢你们的想法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-14T05:16:06.743

我正在使用对我有用的这个片段：

```
#set( $count = 1 )
<p>User details:</p>
<table>
    #foreach( $user in $users)
        <tr>
            <td>$count</td>
            <td>$user.username</td>
            <td>$user.age</td>
        </tr>
        #set( $count = $count + 1 )
    #end
</table> 
```

其中 '$users' 是我在 java 中设置的列表，如下所示：

```
List<User> users = ...
params.put("users", users); 
```

我在这里找到了这些解决方案：http: [//thinkinginsoftware.blogspot.com.ar/2010/03/velocity-templates-for-email.html](http://thinkinginsoftware.blogspot.com.ar/2010/03/velocity-templates-for-email.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T13:24:04.983

问题是你有一个错字：`couter`而不是`counter`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T07:26:00.333

据我记得你可以做这样的事情：

```
#set ($counter = 0)
#foreach ($mylist in $list)
    #set ($counter = $counter + 1)
    #if ( $couter % 2 == 0)
        <td>even indexed result</td>
        <td align="center"></td>
    #else
        <td></td>
        <td align="center">odd index result</td>
    #end
#end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-03T18:30:55.287

代码中有一个小错误，如下：

```
if ( $**couter** % 2 == 0)

**couter** ->>>> **counter** 
```

# html - CSS3 动画中 Firefox 的背景图像

> ID：12685133
> 
> 赞同：1
> 
> 时间：2012-10-02T05:49:18.020
> 
> 标签：html, css, firefox, animation, keyframe

我正在用 CSS 制作关键帧动画。由于支持 -webkit 语法，动画似乎在 Chrome 中运行良好。

```
@-webkit-keyframes title_toggle 
{
from { background-image:url(images/title.png); }
75%{ background-image:url(images/title_hover.png); }
to { background-image:url(images/title.png); }
} 
```

我为 Firefox 尝试了下面的代码，但它不起作用

```
@-moz-keyframes title_toggle {
from { background-image:url(images/title.png); }
75%{ background-image:url(images/title_hover.png); }
to { background-image:url(images/title.png); }
} 
```

请让我知道我会在 FF 中工作。

这是 CSS 部分。

```
@-moz-keyframes title_toggle {
from { background-image:url(images/title.png); }
75%{ background-image:url(images/title_hover.png); }
to { background-image:url(images/title.png); }
}

.title{
    width:40%;
    height: 30%;
    position: absolute;
    top: 10%;
    left: 5%;
    background-size: 100% 100%;
    background-repeat:no-repeat;
    -webkit-animation-name: title_toggle;
    -webkit-animation-duration:5s;
    -webkit-animation-iteration-count:infinite;
    background-size: 100% 100%; 
     -moz-animation-name: title_toggle;
     -moz-animation-duration:5s;
     -moz-animation-iteration-count:infinite;
} 
```

这是HTML

```
<div class="title"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:21:30.227

如果您询问不同图像之间缺乏交叉淡入淡出插值，那是规范的一个非常新的补充，尚未得到广泛支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T04:51:42.887

这不起作用，因为 Firefox 不支持背景图像上的动画。背景图像是不可动画的。Chrome 有自己的实现，但你不会让它在 Firefox 中运行。[https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties)

# git - .gitignore：如何忽略嵌套目录？

> ID：12685134
> 
> 赞同：46
> 
> 时间：2012-10-02T05:49:22.187
> 
> 标签：git, gitignore

我有以下目录结构：

```
test/a
test/b/c
test/a/b/Ouput
test/c/d/e/Output
test/f/Output 
```

我想忽略“测试”下的所有“输出”目录。我试过`test/**/Output`了，但没有用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-02T06:24:16.680

您说您希望`Output/`模式仅在`test/`目录下匹配，因此在`test/`目录中创建一个`.gitignore`包含内容的文件：

```
Output/ 
```

如果您将此模式放在顶级`.gitignore`文件中，那么它将在顶级目录下的**所有目录中匹配。**

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-08-19T14:51:38.080

从**1.8.2 版本**（*2013 年 3 月 8 日*）开始，git 支持`.gitignore`文件中的 **，因此使用`test/**/Output/`将仅忽略 test 目录下的 Output 子目录。

# java - Jersey JAX-RS 和 AWS SDK：Tomcat 无法启动

> ID：12685136
> 
> 赞同：0
> 
> 时间：2012-10-02T05:49:25.837
> 
> 标签：java, amazon-s3, jersey, jax-rs

我正在开发一个使用 Jersey JAX-RS 实现来构建 RESTful 服务的 java web 应用程序。在我将 Amazon Web Services jar 添加到我的 WEB-INF/lib 文件夹之前，一切都很好。我想在 Amazon S3 中存储一些数据，但 AWS 开发工具包和 Jersey 似乎不能很好地配合使用。在我的 lib 文件夹中使用两组 jar 时，Tomcat 将无法启动。如果我删除 jersey-servlet.jar，Tomcat 会启动，但我的服务当然会中断。我正在使用 Jersey v1.2 和 AWS SDK 1.3.20。

有没有其他人看到过同样的行为？

谢谢

```
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java heap space
at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
at java.util.concurrent.FutureTask.get(FutureTask.java:83)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:785)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.OutOfMemoryError: Java heap space
at org.apache.tomcat.util.bcel.classfile.ClassParser.readFields(ClassParser.java:223)
at org.apache.tomcat.util.bcel.classfile.ClassParser.parse(ClassParser.java:126)
at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2066)
at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1942)
at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1908)
at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1893)
at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1296)
at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:855)
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:346)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
... 8 more
Oct 2, 2012 12:36:04 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component      [StandardEngine[Catalina].StandardHost[localhost]]
at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
at java.util.concurrent.FutureTask.get(FutureTask.java:83)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:05:20.357

能够解决这个问题。事实证明，它就像为 JVM 分配更多空间一样简单。

# spring - Spring - BeanPostProcessor 接口

> ID：12685141
> 
> 赞同：0
> 
> 时间：2012-10-02T05:50:05.517
> 
> 标签：spring

我刚开始学春天。在实现一个示例程序时，我遇到了一个问题，并想在这个论坛上查看以获得答案。

## 下面是spring.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org    /dtd/spring-beans-2.0.dtd">

<beans>
    <bean id="triangle" class="org.springdemo.Triangle" autowire="byName">
    </bean>

    <bean id="employee" class="org.springdemo.emp.Employee" autowire="byName">

    </bean>

    <bean id="address" class="org.springdemo.emp.Address">
        <property name="city" value="PUNE"></property>
        <property name="street" value="MH"></property>
        <property name="pin" value="411013"></property>
    </bean>

    <bean id="customerDAO" class="org.mykong.springdb.Customer">

    </bean>

</beans> 
```

## 这是我的客户程序：

```
 public static void main( String[] args )
    {
        ApplicationContext context = 
            new ClassPathXmlApplicationContext("spring.xml");

        Customer customer = (Customer) context.getBean("customerDAO");
 System.out.println(customer.getBeanName());

    } 
```

## 我的客户 bean：

```
 public class Customer implements BeanNameAware, BeanPostProcessor{

            private String name;
        private int age;

        protected Customer() {

        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public int getAge() {
            return age;
        }

        public void setAge(int age) {
            this.age = age;
        }

        public String toString() {
            return "Customer id : "  + " , Name : "  + this.name + " , Age: " +     this.age;
        }

        public void setBeanFactory(BeanFactory arg0) throws BeansException {

        }

        private String beanName = null;
        public void setBeanName(String name) {
            this.beanName = name;
        }

        public String getBeanName() {
            return beanName;
        }

        public Object postProcessAfterInitialization(Object bean, String arg1)
                throws BeansException {

            System.out.println(" IN : postProcessAfterInitialization - bean         initialized" + bean.getClass() );
            return bean;
        }

        public Object postProcessBeforeInitialization(Object bean, String arg1)
                throws BeansException {

            System.out.println(" IN : postProcessBeforeInitialization "  );
            return bean;
        }
        } 
```

问题1：因为我的spring.xml 有大约4 个bean 的配置。但是只有三个 bean 的输出（customerDAO 除外）。为什么？

问题2：如果我只想为 customerDAO 调用之前和之后的流程初始化方法怎么办？可能就这么简单？我不知道。但请回答。提前致谢

## 输出：

IN：postProcessBeforeInitialization IN：postProcessAfterInitialization - bean 初始化类 org.springdemo.Triangle IN：postProcessBeforeInitialization IN：postProcessAfterInitialization - bean 初始化类 org.springdemo.emp.Address IN：postProcessBeforeInitialization IN：postProcessAfterInitialization - bean 初始化类 org.springdemo.emp.Employee customerDAO

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:17:47.077

的目的`BeanPostProcessor`是拦截其他bean的初始化。它不能拦截自己的初始化，因为 Spring 保证在调用其后处理方法时完全初始化后处理器。

如果您需要在初始化这个 bean 之后执行操作，您可以执行以下操作之一：

*   实施`InitializingBean`和覆盖`afterPropertiesSet`
*   使用`init-method`属性 of`<bean>`指定要调用的方法的名称
*   注释要调用的方法`@PostConstruct`

# android - Galaxy S3 智能手机上的 WebGL 照明

> ID：12685143
> 
> 赞同：0
> 
> 时间：2012-10-02T05:50:10.987
> 
> 标签：android, firefox, webgl, galaxy

在[glowscript.org](http://glowscript.org)上有各种用JavaScript 或CoffeeScript 编写的涉及少量代码的演示程序。

例如，单行程序`box()`创建一个可以旋转和缩放的 3D 立方体，这要归功于许多默认值（可以被覆盖），包括基本照明（两个远处的灯光和一些环境照明）。

## 问题：

这些程序在 Windows、Mac 和 Linux 上的许多浏览器中运行良好，但在*三星 Galaxy S3 上的 Firefox 中*它们非常暗。外观表明环境光有效（增加它会使场景变亮）但远处的灯光不起作用（打开或关闭没有区别）。我试过运行一些在网上找到的 WebGL 演示，它们看起来不错。

**谁能想到我应该在哪里寻找问题？为什么台式机/笔记本电脑的行为与 Galaxy S3 上的行为如此不同？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:24:23.317

我修复了 Galaxy 智能手机上的问题，并将以下内容添加到 GlowScript 帮助中：

“大多数平板电脑和智能手机还不支持 WebGL，尽管这可能会改变。在三星 Galaxy S3 智能手机上，Firefox 和 Opera 确实运行 GlowScript 程序，但动画速度很慢，透明度有问题，目前还没有办法缩放和旋转。有报道称 GlowScript 也适用于 Sony Experia 智能手机。

问题是 Galaxy 着色器编译器无法正确处理 for 循环。在片段着色器中，有一个针对各种灯光（最多 8 个灯光）的 for 循环。在 for 循环中设置的变量通常设置为零而不是指定值。解决方案包括用这样的直线结构替换循环，其中 LP(i) 和 LC(i) 是光的位置和颜色：

```
if (light_count == 0) return;
calc_color(LP(0), LC(0));
if (light_count == 1) return;
calc_color(LP(1), LC(1));
if (light_count == 2) return;
etc. 
```

呸。幸运的是，我们只需要支持有限数量的灯光。

# asp.net-mvc-3 - Telerik MVC3 中的条件 TabStrip

> ID：12685147
> 
> 赞同：0
> 
> 时间：2012-10-02T05:50:44.183
> 
> 标签：asp.net-mvc-3, telerik-mvc

我需要在 Telerik MVC Grid 中实现条件 TabStrip。父网格行包含状态的单元格值。如果状态为活动，我不希望在子网格中显示标签条。如果状态为待处理，那么我需要显示 TabStrip 以创建新项目。

我必须做这样的事情：

```
if ("<#= Status #>" == "Pending") // The condition is not working here. Always show this tab.
                    {
                        items.Add().Text("Create New Detail").Url("/Acq/PoDet/Create/<#=Id#>");
                    }
                })
                .ToHtmlString() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:06:31.037

由于您很可能正在使用 Ajax 绑定，因此您需要编写一点 JavaScript 来实现您的目标。您的著作不正确，因为您将 JavaScript 代码 (#= ...#) 与 C# 代码相结合。这是您可以在详细模板中执行的操作的一个想法，（这有点棘手，因为您需要转义特殊符号）：

```
<script id="employeesTemplate" type="text/kendo-tmpl">

            @(Html.Kendo().TabStrip()
                .Name("test#=EmployeeID#")
                .Items(it=>it.Add().Text("test").Content("content test"))
                .ToClientTemplate()
                    )

           <script>
                    if (#=EmployeeID # % 2) {  
                        $('\#test' + #=EmployeeID#).data().kendoTabStrip.append({"text":"This is the TabTitle",content:"this is some content"})
                    }
           <\/script>

</script> 
```

上面的示例是使用称为 append 的客户端 API 方法在 DetailView 生成到详细信息行时将节点附加到客户端的 TabStrip `EmployeeID%2 == 0`（一个简单的条件）。

我希望你明白了。

# iphone - UIImageView 允许触摸它下面的按钮

> ID：12685150
> 
> 赞同：2
> 
> 时间：2012-10-02T05:51:06.773
> 
> 标签：iphone, ios, cocoa-touch

我正在开发一个 iPhone 应用程序。当用户点击一个按钮时，在页面上显示一个半透明的 UIImageView（即覆盖整个页面）。现在，由于 UIImageView 是半透明的，因此可以看到其下方的按钮。单击按钮（尽管 UIImageView 位于其顶部）正在处理按钮单击；但我想阻止这一点。当 UIImageView 在顶部时，只有触摸 UIImageView （调用方法）应该可以工作；不应该触摸它下面的任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:56:24.357

假设 yourImageView 是按钮上方的 UIImageView，请执行此操作，

```
[yourImageView setUserInteractionEnabled:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:57:34.307

您有以下选择：首先确保 UIImageView 位于按钮之上。使用bringSubviewToFront 将如果放在前面

1.  您可以禁用 UIImageView 的 userInteraction。
2.  如果您有任何与 UIImageView 关联的操作，那么您可以更喜欢那里的 UIButton 而不是 UIImageView 并将您的图像设置为 UIButton 的背景，并添加您需要使用此按钮执行的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T05:59:00.900

```
your_semi_transparent_ImageView.userInteractionEnabled = YES; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T06:04:35.707

您可以通过单击按钮添加 UIView，然后将 UIImageview 添加为视图的子视图。然后降低uiview的alpha。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T06:14:56.543

如果您将半透明的 imageView 不是添加到 self.view 而是添加到应用程序的窗口，那就更好了。像这样：

```
AppDelegate *delegate = (Appdelegate *)[[UIApplication sharedApplication] delegate];
[delegate.window addSubview:yourImageView]; 
```

要删除 yourImageView 只需使用

```
[yourImageView removeFromSuperView]; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-02T05:55:10.493

显示 ImageView 时隐藏和禁用按钮：

```
[button setEnabled:NO]; // If you want the button not to respond
[button setHidden:YES]; // If you want the button not to be seen 
```

# jquery - jQuery Dirtyforms - 是否可以使用本机浏览器确认（）作为对话框？

> ID：12685155
> 
> 赞同：2
> 
> 时间：2012-10-02T05:51:29.910
> 
> 标签：jquery, jquery-dirtyforms

[他们网站](https://github.com/snikch/jquery.dirtyforms)中的示例通常假设使用了 jquery 对话框，例如 facebox 或 jquery-ui。是否可以使用本机浏览器确认（）作为对话框？如果是这样，有没有办法绑定确定和取消按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:32:02.787

我不知道这有多优雅，但我通过这样做解决了它：

```
$('form').dirtyForms();
$.DirtyForms.debug = true;
$.DirtyForms.dialog = {
    fire: function (message, title) {
        $.DirtyForms.choiceContinue = confirm(message);
    },
    bind: function () {
        $.DirtyForms.choiceCommit($.Event("click"));
    },
    refire: function (content) {
        return false;
    },
    stash: function () {
        return false;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-21T12:14:33.577

根据[文档](https://github.com/snikch/jquery.dirtyforms/tree/8e731503db5fe95a70700cf81295e5c7334fa253#dialog-example)，使用浏览器对话框的正确解决方案是将对话框设置为`false`.

```
$('form').dirtyForms();
$.DirtyForms.dialog = false; 
```

# android - 使用 android 的图形 api 获取 facebook 个人资料图片更新时间

> ID：12685166
> 
> 赞同：0
> 
> 时间：2012-10-02T05:52:53.107
> 
> 标签：android, facebook-graph-api, datetime, profile, image

谁能告诉我如何使用 Graph API for android 获取 facebook 朋友的个人资料图片的更新数据时间。简而言之，我需要知道一个人何时在我的 android 应用程序中更新了他/她的个人资料图片。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:30:09.927

[用户](https://developers.facebook.com/docs/reference/api/user/)对象有一个名为 的字段，`updated_time`它反映了一些个人资料更新，包括个人资料图片。（虽然我似乎记得这仅限于在特定时间跨度内发生的更新，因此您可能需要定期检查。）要查看更新的是他们的个人资料图片还是其他内容，您必须比较我猜是上一个的网址。

更好/更简单的方法可能是访问用户的相册，查找带有 `"name": "Profile Pictures"`/的相册`"type": "profile"`，并请求其`cover_photo`字段的详细信息。（当前头像始终是该相册的封面图片。）

然后，在查找封面照片的 ID 时，您将获得两个字段`created_time`和`updated_time`。

根据您要实现的具体目标，您可能必须将上次更新的时间戳存储在应用程序中的某个位置以进行比较。

# android - android：NotificationManager 无法解析为变量

> ID：12685167
> 
> 赞同：1
> 
> 时间：2012-10-02T05:53:06.327
> 
> 标签：android, notifications

请帮助我，我是 android 新手，我需要在我的闹钟中添加通知声音。我可以把通知声音放在哪里？这是我的带有通知的代码，但出现错误“NotificationManager 无法解析为变量”

应用程序力量现在关闭我不知道为什么请帮忙，这是日志猫

> 3683) 10-02 06:03:38.879: E/AndroidRuntime(938): 在 java.lang.reflect.Method.invokeNative(Native Method) 10-02 06:03:38.879: E/AndroidRuntime(938): 在 java .lang.reflect.Method.invoke(Method.java:507) 10-02 06:03:38.879: E/AndroidRuntime(938): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java: 839) 10-02 06:03:38.879: E/AndroidRuntime(938): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 10-02 06:03:38.879: E/AndroidRuntime( 938): 在 dalvik.system.NativeStart.main(Native Method) 10-02 06:03:43.855: I/Process(938): 发送信号。PID：938 SIG：9 android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 10-02 06:03:38.879: E/AndroidRuntime(938): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java :597) 10-02 06:03:38.879: E/AndroidRuntime(938): at dalvik.system.NativeStart.main(Native Method) 10-02 06:03:43.855: I/Process(938): 发送信号。PID：938 SIG：9 android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 10-02 06:03:38.879: E/AndroidRuntime(938): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java :597) 10-02 06:03:38.879: E/AndroidRuntime(938): at dalvik.system.NativeStart.main(Native Method) 10-02 06:03:43.855: I/Process(938): 发送信号。PID：938 SIG：9

```
 Intent alarmIntent = new Intent (Enter_med.this, MyAlarmService.class);

                   NotificationManager manager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);

                   PendingIntent pi = PendingIntent.getActivity(context, 0, alarmIntent, PendingIntent.FLAG_UPDATE_CURRENT);
                    Notification note = new Notification(R.drawable.ic_launcher, "Alarm", System.currentTimeMillis());
                    Uri alarmSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
                    if(alarmSound == null){
                        alarmSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
                        if(alarmSound == null){
                            alarmSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
                        }
                    }
                    note.sound = alarmSound;
                    note.defaults |= Notification.DEFAULT_VIBRATE;
                    note.flags |= Notification.FLAG_AUTO_CANCEL;
                    manager.notify(0, note);

                 //alarm1
                        PendingIntent pendingAlarmIntent = PendingIntent.getService(Enter_med.this, 0, alarmIntent, PendingIntent.FLAG_UPDATE_CURRENT);

                        AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

                        Calendar AlarmCal = Calendar.getInstance();
                        AlarmCal.setTimeInMillis(System.currentTimeMillis());
                        AlarmCal.set(Calendar.HOUR_OF_DAY, pHour);
                        AlarmCal.set(Calendar.MINUTE, pMinute);
                        AlarmCal.set(Calendar.SECOND, 0);

                        alarmManager.set(AlarmManager.RTC_WAKEUP, AlarmCal.getTimeInMillis(), pendingAlarmIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:55:43.730

您需要将代码更改为：

`NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);`

只需删除 . 在`getSystemService()`方法之前。

编译器正在寻找一个名为“NotificationManager”的变量，因为您使用了 . 旁边的接线员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:57:26.897

在您的代码中

```
NotificationManager manager = (NotificationManager).getSystemService(Context.NOTIFICATION_SERVICE); 
```

将其更改为

```
NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:01:03.447

如果你愿意，你可以这样做

```
String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

        int icon = R.drawable.ic_launcher;
        CharSequence tickerText = "Hello";
        long when = System.currentTimeMillis();

        Notification notification = new Notification(icon, tickerText, when);

        Context context = getApplicationContext();
        CharSequence contentTitle = "My notification";
        CharSequence contentText = "Hello World! " + android_id;
        Intent notificationIntent = new Intent(this,
                ExpMapLatLongActivity.class);
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
                notificationIntent, 0);

        notification.setLatestEventInfo(context, contentTitle, contentText,
                contentIntent);

        mNotificationManager.notify(HELLO_ID, notification); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T06:28:47.800

你忘记了这个伙伴：

```
note.setLatestEventInfo(this, "contentTitle", "contentText", pi); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-18T03:59:02.273

You can also use other solution by using `NotificationManagerCompat`. try this code

```
NotificationManagerCompat mNotifyMgr =
    NotificationManagerCompat.from(mCtx);

if (mNotifyMgr != null) {
    mNotifyMgr.notify(1, mBuilder.build());
} 
```

where mCtx is `context` or you can `getApplicationContext()`

# php - Iphone 上的 Codeigniter 会话问题

> ID：12685171
> 
> 赞同：0
> 
> 时间：2012-10-02T05:54:01.420
> 
> 标签：php, iphone, codeigniter, session, session-cookies

我的身份验证使用 CI 会话，并且在我检查过的任何地方都可以正常工作。我刚刚注意到，在 iPhone 上，只有清除 iPhone（safari）浏览器中的所有 cookie 和数据，我才能登录。Ipad很好，没有这个问题。

cookie 是否已损坏？有没有人遇到过这个。我希望能够继续使用 CI 会话。正如有人建议的那样，我已经切换了加密 cookie。没用。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:44:11.537

环顾四周，原因似乎是 iphone 上的 safari 缓存 Ajax 请求。与会话完全无关。向我的 ajax 请求添加时间戳解决了我的问题。

```
var timestamp = new Date().getTime(); 
```

关闭我浏览所有 js 文件以查找 $.ajax :)

# c# - 循环Xml数据输出结果

> ID：12685173
> 
> 赞同：0
> 
> 时间：2012-10-02T05:54:21.430
> 
> 标签：c#, linq, xml-parsing, linq-to-xml

```
var runnerElement = xDox.Descendants("User")
      .SingleOrDefault(u => u.Element("Name").Value == "David");

if (runnerElement != null)
{
    var result = runnerElement.Descendants("Runners")
      .Select(a => new
        {

            Date = DateTime.Parse(a.Element("Date").Value),
            MyLength = int.Parse(a.Element("Length").Value)
            City = a.Element("City").Value,
        })
      .Where(a => a.Date >= DateTime.Parse("3/29/2012")
                && a.Date <= DateTime.Parse("8/29/2012"))

      .GroupBy(a => a.City)
      .Select(g => new {City = g.Key, Avg = g.Average(x => x.MyLength)});
} 
```

您将如何遍历这些数据，以便它可以给我这样的输出

```
User:David
Date:3/29/2012 to 8/29/2012
Average Distance in Paris : //Data
Average Distance in Madrid: //Data 
```

我尝试进一步澄清我的代码..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:01:54.413

好吧，您已经丢失了查询中的前两位信息（但无论如何它们都是硬编码的），但是对于“平均距离”位，它很简单：

```
foreach (var item in result)
{
    Console.WriteLine("Average Distance in {0}: {1}", item.Place, item.Avg);
} 
```

这就是你所追求的吗？显然，您需要将其放在`if`块内，以便`result`在范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:11:29.673

为了纠正我之前的答案，它应该有一个方法，假设`GetData`有相关的输入，所以你可以`StringBuilder`用来构建字符串：

```
public string GetData(string userName, DateTime fromDate, DateTime toDate)
{
     var userElement = xDox.Descendants("User")
            .SingleOrDefault(u => u.Element("Name").Value == userName);

    var builder = new StringBuilder();

    if (userElement != null)
    {
        var result = userElement.Descendants("Attempts")
            .Select(a => new
                {
                    Place = a.Element("Place").Value,
                    Date = DateTime.Parse(a.Element("Date").Value),
                    Distance = int.Parse(a.Element("Distance").Value)
                })

            .Where(a => a.Date >= fromDate
                        && a.Date <= toDate)

            .GroupBy(a => a.Place)
            .Select(g => new {Place = g.Key, Avg = g.Average(x => x.Distance)});

        builder.AppendFormat("User:{0}", userName);
        builder.AppendLine();

        builder.AppendFormat("Date:{0} to {1}", fromDate, toDate);
        builder.AppendLine();

        foreach (var item in result)
        {
            builder.AppendFormat("Average Distance in {0}: {1}", 
                                               item.Place, item .Avg);
            builder.AppendLine();
        }
    }

    return builder.ToString();
} 
```

为了使用：

```
var fromDate = DateTime.Parse("8/30/2012");
var toDate = DateTime.Parse("10/1/2012");

string result = GetData("David", fromDate, toDate); 
```

# android - 如何在我的 Android 项目中使用 Spring 框架？

> ID：12685180
> 
> 赞同：0
> 
> 时间：2012-10-02T05:54:58.847
> 
> 标签：android, spring

理论上我有点理解spring框架。但我想知道如何在 Android 项目中使用它。如果可能的话，我可以举个例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:11:51.303

如果你需要 IOC，你需要看看 roboguice（托管在 googlecode 上）

如果您需要 spring 小工具[`RestTemplate`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html)，例如 spring-android 项目。

*   [spring-android 主页](http://www.springsource.org/spring-android)
*   [机器人之家](http://code.google.com/p/roboguice/)

# mysql - 需要定期从 Oracle 更新 Mysql

> ID：12685181
> 
> 赞同：2
> 
> 时间：2012-10-02T05:55:03.773
> 
> 标签：mysql, database-connection

我在 Mysql 中有一个用户表。该表是从另一个数据库（Oracle）复制而来的。

当然，他们有完全相同的桌子。并且需要每天更新一次。（Mysql←Oracle）

是否可以在 MYsql 中访问 Oracle 并检索数据？我的意思是程序之类的东西。

（[Mysql 之间似乎可以](http://dev.mysql.com/doc/refman/5.0/en/federated-use.html)）

还是我必须找到其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:16:59.250

尝试使用dbForge Studio for MySQL 中的[数据导入](http://www.devart.com/dbforge/mysql/studio/data-export-import.html)工具。

*   开始数据导入
*   检查 ODBC 格式，指定其选项并选择要从中导入的表
*   指定映射和其他选项
*   选择追加、更新或追加/更新导入模式。

此外，您可以在命令行模式下运行此工具。保存数据导入模板文件，每天以命令行方式运行一次。

# asp.net - SignalR 和 Memcached 用于持久组数据

> ID：12685184
> 
> 赞同：0
> 
> 时间：2012-10-02T05:55:22.497
> 
> 标签：asp.net, memcached, signalr

我在我的 ASP.NET 应用程序中使用**SignalR**。我的应用程序需要的是压缩从各种服务器更新的组数据。根据 SignalR 文档，我有责任这样做。这意味着我需要使用一个外部服务器/服务来从一个或多个服务器收集数据，并且我可以从一个地方查询这些数据。

我首先认为**MemCached**是最好的选择，因为它速度很快，而且我需要放在那里的数据是不稳定的。问题是我需要存储集合，例如：具有用户 ID 的集合 A，因此我可以拥有具有 2000 个用户 ID 的集合 A 和具有 40,000 个 ID 的集合 B。问题是我需要更新这个集合并非常快速地删除和插入 id。我担心因为命令将从多个服务器启动，而且我可能需要读取整个集合并在任一 Web 服务器上更新它，因此数据将不一致。Web 服务器 A 可能会更新数据，但服务器 B 会在服务器 A 完成更新之前读取数据。存在并发冲突。

我正在寻找在我的 ASP.NET 4.5 应用程序中实现这种策略的最佳方法。我认为这可能是使用**内存数据库**或确保没有数据完整性的一种选择。

我想问你什么是我的问题的最佳解决方案。

这是我的问题的一个例子：

*   MemCached Server - 存储集合（例如集合 A、B、C、D），每个集合存储用户 ID，可能是数千个 ID，甚至更多。

*   Web 服务器 - 我安装了 SignalR 的 Amazon EC2 Web 服务器。可以在负载均衡器后面。这些服务器需要访问 memcached 服务器并通过 Collection 名称（例如“Collection_23”）获取完整的集合项。他们需要能够删除项目（用户 ID）并添加项目。这一切都应该尽可能快。

我希望我对自己的解释是正确的。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:17:44.393

或者，您可以使用[Redis](http://redis.io/)，就像 Memcached 一样，所有内容都从内存中提供。除了简单的键值数据存储之外，Redis 还有许多其他功能；对于您的特定情况，您可能会使用[Redis transactions](http://redis.io/topics/transactions)，这可以确保数据的一致性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T17:42:15.107

在另一篇文章的评论中，它显示了指向 redis 提供程序的链接。链接坏了，现在好像集成到了SignalR主项目中：[https ://github.com/SignalR/SignalR/tree/master/src/Microsoft.AspNet.SignalR.Redis](https://github.com/SignalR/SignalR/tree/master/src/Microsoft.AspNet.SignalR.Redis)

你在这里有redis nuget： [http ://www.nuget.org/packages/Microsoft.AspNet.SignalR.Redis](http://www.nuget.org/packages/Microsoft.AspNet.SignalR.Redis)

和这里的文档： [http ://www.asp.net/signalr/overview/signalr-20/performance-and-scaling/scaleout-with-redis](http://www.asp.net/signalr/overview/signalr-20/performance-and-scaling/scaleout-with-redis)

# angularjs - Angular JS在更改后更新输入字段

> ID：12685185
> 
> 赞同：44
> 
> 时间：2012-10-02T05:55:24.127
> 
> 标签：angularjs

我正在尝试在 Angular 中构建一个简单的计算器，如果需要，我可以在其中覆盖总数。我有这部分工作，但是当我返回在字段一或二中输入数字时，字段中的总数没有更新。

这是我的 jsfiddle [http://jsfiddle.net/YUza7/2/](http://jsfiddle.net/YUza7/2/)

表格

```
<div ng-app>
  <h2>Calculate</h2>

  <div ng-controller="TodoCtrl">
    <form>
        <li>Number 1: <input type="text" ng-model="one">  
        <li>Number 2: <input type="text" ng-model="two">
        <li>Total <input type="text" value="{{total()}}">       
        {{total()}}
    </form>
  </div>
</div> 
```

javascript

```
function TodoCtrl($scope) {
    $scope.total = function(){
        return $scope.one * $scope.two;
    };
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-02T11:50:21.690

您可以将`ng-change`指令添加到输入字段。看看文档[示例](http://docs.angularjs.org/api/ng.directive%3angChange)。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-02T09:23:23.707

我猜当您在总计字段中输入一个值时，该值表达式会以某种方式被覆盖。

但是，您可以采用另一种方法：为总值创建一个字段，并在其中一个`one`或`two`更改时更新该字段。

```
<li>Total <input type="text" ng-model="total">{{total}}</li> 
```

并更改javascript：

```
function TodoCtrl($scope) {
    $scope.$watch('one * two', function (value) {
        $scope.total = value;
    });
} 
```

示例小提琴[在这里](http://jsfiddle.net/YUza7/8/)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-06T01:04:33.483

我编写了一个指令，您可以使用它来将 ng-model 绑定到您想要的任何表达式。每当表达式更改时，模型都会设置为新值。

```
 module.directive('boundModel', function() {
      return {
        require: 'ngModel',
        link: function(scope, elem, attrs, ngModel) {
          var boundModel$watcher = scope.$watch(attrs.boundModel, function(newValue, oldValue) {
            if(newValue != oldValue) {
              ngModel.$setViewValue(newValue);
              ngModel.$render();
            }
          });

          // When $destroy is fired stop watching the change.
          // If you don't, and you come back on your state
          // you'll have two watcher watching the same properties
          scope.$on('$destroy', function() {
              boundModel$watcher();
          });
        }
    }); 
```

您可以像这样在模板中使用它：

```
 <li>Total<input type="text" ng-model="total" bound-model="one * two"></li> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-25T09:56:58.970

你只需要更正你的html格式

```
<form>
    <li>Number 1: <input type="text" ng-model="one"/> </li>
    <li>Number 2: <input type="text" ng-model="two"/> </li>
        <li>Total <input type="text" value="{{total()}}"/>  </li>      
    {{total()}}

</form> 
```

[http://jsfiddle.net/YUza7/105/](http://jsfiddle.net/YUza7/105/)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-16T00:30:20.347

创建一个指令并对其进行监视。

```
app.directive("myApp", function(){
link:function(scope){

    function:getTotal(){
    ..do your maths here

    }
    scope.$watch('one', getTotals());
    scope.$watch('two', getTotals());
   } 
```

})

# jquery - 使用 Jquery 进行联系表单验证

> ID：12685186
> 
> 赞同：0
> 
> 时间：2012-10-02T05:55:24.527
> 
> 标签：jquery, html, jquery-validate, validation

我想用 jquery 表单验证来验证一个 for。所以我包括以下内容。

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2  /jquery.min.js"></script> 
  <script type="text/javascript" src=" http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
  <script type="text/javascript">
               $(function() {                           
                             $('#contact-form').validate({
                                 rules:{
                                   name:{
                                     required:true
                                   },
                                   email:{
                                     required:true,
                                     email:true
                                   }                                                                     
                                 }
                             });
                           });
  </script> 
```

但是当我单击提交按钮时，会显示如下错误

> TypeError: $("#contact-form").validate 不是函数

帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:58:01.907

你有一个奇怪的空间来分解你的 jQuery 脚本包含 url。如果您查看，您可能会收到有关脚本未加载的控制台错误。

```
/1.7.2  / 
```

需要是

```
/1.7.2/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:58:39.347

它在这里工作[http://jsfiddle.net/UWhJE/](http://jsfiddle.net/UWhJE/)

确保在包含 validate.js 之前加载了 jquery。还要检查 firebug 控制台（对于 firefox）或 chrome 开发工具中的 javascript 错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T05:59:20.620

确保 jquery 和 jquery.validate 加载成功。您可以像上面那样调用该函数，但通常的方法是调用它 document.ready。希望能帮助到你。

# php - php编写编辑的脚本文件内容会导致额外的换行符

> ID：12685192
> 
> 赞同：2
> 
> 时间：2012-10-02T05:55:57.843
> 
> 标签：php, file, filesystems, fopen

在一个多语言站点中，我有两个包含 php 常量的 php 文件。

## 喜欢

定义（'电子邮件'，'电子邮件'）；
定义（'性别'，'性别'）；. .

## .

我使用表单中的文本区域从管理员端提供对这些文件的编辑。在 textarea 中打印完整文件。当管理员更新它导致重定向问题的文件时，意味着在包含此文件 header() 函数后无法报告上面的非空白字符。

## 我在编辑后检查了 php 文件，它在每个 php 语句之间包含很多额外的空间，如下所示，

定义（'电子邮件'，'电子邮件'）；

定义（'性别'，'性别'）；

## 定义（'名称'，'名称'）；

长的单行也分成许多行，例如。

**define('SENTENCE', '这是一个很长的句子，根据我提到的文本区域的宽度分成多行');**

所以这也会导致错误，因为它必须在单行中

我确信这些额外的空格和换行符是所有问题的原因。我在 textarea 之间使用此代码进行打印：

```
<textarea  style="width: 664px; height: 353px;" id="edit_file" name="edit_file"><?php
$file = fopen("../en.php", "r") or exit("Unable to open file!");
//Output a line of the file until the end is reached
while(!feof($file))
  {
echo fgets($file);
  }
fclose($file);
?> </textarea> 
```

并保存文件：

```
if(isset($_POST['btn']) && $_SERVER['REQUEST_METHOD']=='POST' && !empty($_POST['btn'])){
if (get_magic_quotes_gpc()) {
$filedata = stripslashes($_POST['edit_file']);
}
$filedata=str_replace(array("<br />'",'\n'),array("",''),$filedata);
$size=strlen($filedata);
$file = fopen("../en.php", "w") or exit("Unable to open file!");
fwrite($file,"$filedata",$size);
fclose($file);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:02:54.907

有 1 个意外引号，并且 \n 不能放在简单引号内：

```
$filedata=str_replace(array("<br />'",'\n'),array("",''),$filedata); 
```

替换为：

```
$filedata=str_replace(array("<br />","\n"),array("",''),$filedata); 
```

# mysql - 如何左连接 2 个不同数据库上的 2 个表？

> ID：12685193
> 
> 赞同：17
> 
> 时间：2012-10-02T05:56:00.180
> 
> 标签：mysql, sql

我有第一个数据库**（dbA）**，带有这样的表，名为**Username**：

```
+------------------+--------------+
| Username         | PhoneNumber  |
+------------------+--------------+
| jamesbond007     | 555-0074     |
| batmanbegins     | 555-0392     |
+------------------+--------------+ 
```

然后，在另一边，我有这样的表**dbB**，名为**PrivateMessage**：

```
+------------------+---------------------------------+
| Username         | Message                         |
+------------------+---------------------------------+
| jamesbond007     | I need new bond-girl            |
| batmanbegins     | thanks for the paycheck, Nolan  |
+------------------+---------------------------------+ 
```

现在，如何组合来自 2 个不同数据库的这两个表，输出将如下所示：

```
+------------------+--------------+---------------------------------+
| Username         | PhoneNumber  | Message                         |
+------------------+--------------+---------------------------------+
| jamesbond007     | 555-0074     | I need new bond-girl            |
| batmanbegins     | 555-0392     | thanks for the paycheck, Nolan  |
+------------------+--------------+---------------------------------+ 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-02T06:00:22.653

您可以简单地加入不同数据库的表。您需要在`FROM`子句中指定数据库名称。为了让它更短，`ALIAS`在上面添加一个，

```
SELECT  a.*,          -- this will display all columns of dba.`UserName`
      b.`Message`
FROM  dba.`UserName` a  -- or LEFT JOIN to show all rows whether it exists or not
      INNER JOIN dbB.`PrivateMessage` b    
         ON a.`username` = b.`username` 
```

但是有些方法，有可能`username`没有消息。在这种情况下`LEFT JOIN`，如果您仍想显示 的所有记录，请使用`dba.Username`。

从您的评论中阅读，这些表格有不同的`collation`. 解决此问题的方法是`COLLATE`在您的连接语句中指定，

```
SELECT  a.*,          -- this will display all columns of dba.`UserName`
      b.`Message`
FROM  dba.`UserName` COLLATE latin1_swedish_ci a  
      LEFT JOIN dbB.`PrivateMessage` COLLATE latin1_swedish_ci b    
         ON a.`username` = b.`username` 
```

你可以改变`latin1_swedish_ci`任何你想要的。

有关整理的更多信息，请参阅此完整列表

**[MySQL 中的字符集和排序规则](http://dev.mysql.com/doc/refman/5.0/en/charset-mysql.html)**

* * *

如果您对表有足够的权限`ALTER`，只需使用此语法手动转换和匹配它们的排序规则，

```
ALTER TABLE tbl_name CONVERT TO CHARACTER SET latin2 COLLATE 'latin2_general_ci'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T06:02:56.080

与普通表相同，除了指定数据库：

```
SELECT dbA.Username, dbA.PhoneNumber, dbB.Message
   FROM dbA.Username LEFT JOIN dbB.PrivateMessage
   ON (dbA.UserName.Username = dbB.PrivateMessage.Username); 
```

需要注意的事项：

*   LEFT JOIN 将返回所有用户，包括没有消息的用户（用于`INNER JOIN`仅检索*有*消息的用户）
*   拥有多条消息的用户将出现多次（使用聚合并且`GROUP BY`每个用户只检索一条消息 - 您必须提供一个标准来选择一条消息）
*   您需要在两个数据库上都具有查询权限（否则某些具有这两个数据库权限的用户必须定期复制，例如在 crontab 中，一个表或一个表的子集从一个数据库复制到另一个）
*   排序规则可能不匹配。如果是这种情况，您必须使用[COLLATE更改两个表之一的排序规则，或者使用](http://dev.mysql.com/doc/refman/5.0/en/charset-collate.htm)[CONVERT](http://dev.mysql.com/doc/refman/5.0/en/charset-convert.html)将一个 DB 的字段转换为另一个 DB 的字符集：CONVERT(db.table.field USING Latin1)，*这将防止使用索引从而降低性能*。您可以修改这两个表中的一个，但请**确认**您没有中断使用`ALTER`'ed 表的任何查询或应用程序（在紧要关头，将整个数据库转换为规范的 UTF8）。
*   `JOIN`即使您在两个表中都有 INDEX ，文本字段上的 s 也不是很有效；最好让 Message 表保存一个唯一的数字*用户 ID*来引用消息所有者。我了解具有不同逻辑的两个不同数据库可能不利于此解决方案，但您可以应用上述“技巧”之一（“*复制表或其子集*”）并定期导出转换和 ID 的表从一个数据库到另一个。一个定期查询会很昂贵，但所有后续的 JOIN 都会受益匪浅。

# 测试运行

这会在两个不同的数据库中创建两个具有相同结构的表，并在*第三个*数据库中连接它们。

> ```
> Welcome to the MySQL monitor.  Commands end with ; or \g.
> Your MySQL connection id is 3
> Server version: 5.6.30 openSUSE package
> 
> Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.
> 
> Oracle is a registered trademark of Oracle Corporation and/or its
> affiliates. Other names may be trademarks of their respective
> owners.
> 
> Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.
> 
> mysql> CREATE DATABASE first_database;
> Query OK, 1 row affected (0.01 sec)
> 
> mysql> CREATE DATABASE second_database;
> Query OK, 1 row affected (0.00 sec)
> 
> mysql> USE first_database;
> Database changed
> mysql> CREATE TABLE mytable ( x integer, t varchar(32) );
> Query OK, 0 rows affected (0.00 sec)
> 
> mysql> INSERT INTO mytable ( x, t ) VALUES ( 1, 'One in First Database' ), ( 2, 'Two in First Database' );
> Query OK, 2 rows affected (0.00 sec)
> Records: 2  Duplicates: 0  Warnings: 0
> 
> mysql> USE second_database;
> Database changed
> mysql> CREATE TABLE mytable ( x integer, t varchar(32) );
> Query OK, 0 rows affected (0.00 sec)
> 
> mysql> INSERT INTO mytable ( x, t ) VALUES ( 1, 'One in Second Database' ), ( 3, 'Three in Second Database' );
> Query OK, 2 rows affected (0.00 sec)
> Records: 2  Duplicates: 0  Warnings: 0
> 
> mysql> USE test;
> Database changed
> mysql> SELECT * FROM first_database.mytable LEFT JOIN second_database.mytable USING ( x );
> +------+-----------------------+------------------------+
> | x    | t                     | t                      |
> +------+-----------------------+------------------------+
> |    1 | One in First Database | One in Second Database |
> |    2 | Two in First Database | NULL                   |
> +------+-----------------------+------------------------+
> 2 rows in set (0.00 sec)
> 
> mysql> 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:01:32.107

用于此的 SQL 相当简单...

```
SELECT A.Username, A.PhoneNumber, B.Message
FROM dbA.Username as A
INNER JOIN dbB.PrivateMessage as B ON A.Username = B.Username 
```

...假设您可以在连接中访问这两个数据库。

如果您无法访问它们，则必须采用不同的方法（例如在查询之前将一个表复制到另一个数据库或类似的方法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-26T08:12:40.107

试试下面的代码

```
SELECT * FROM dbA.Username JOIN dbB.PrivateMessage USING(Username); 
```

# activex - 如何忽略函数 ATR 的 Nulls？

> ID：12685195
> 
> 赞同：0
> 
> 时间：2012-10-02T05:56:01.173
> 
> 标签：activex, teechart

对于 ExpMovAvg，有代码 TChart1.Series(1).FunctionType.asExpMovAvg.IgnoreNulls = True 来忽略空值，但对于 ATR，我在 FunctionType 之后没有找到任何东西（对于 ADX，有 FunctionType.asADX，但没有ATR），那么如何为 ATR 做到这一点，谢谢。（我使用 Teechart2011 Eval & VB6）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:12:49.633

恐怕此函数类型不存在 IgnoreNulls 属性。由于 TeeChart ActiveX 是 TeeChart VCL 版本的包装器，因此我已将其添加到 VCL 愿望清单中，以便在下一个版本中实现 (TV52016368)。

同时，我能想到的唯一方法是从*源*序列中完全删除零点。

# c++ - 如何获取 crtdbg.h 文件？

> ID：12685202
> 
> 赞同：13
> 
> 时间：2012-10-02T05:56:58.847
> 
> 标签：c++, eclipse, mingw

我在 Windows 上使用[MinGW](http://en.wikipedia.org/wiki/MinGW) GCC + [Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)，我遇到了这个错误：

> C:\Program Files\ITG Derivatives LLC\api_clear-2.0.2.48\include/windows/csassert.h:12:20: 致命错误 crtdbg.h 没有这样的文件或目录

文件是什么`crtdbg.h`？我怎样才能得到它并解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T06:13:48.887

`<crtdbg.h>`是 Microsoft Visual C++ 特定的标头。您可以使用类似于以下的存根来解决此问题：

```
#ifdef _MSC_VER
#include <crtdbg.h>
#else
#define _ASSERT(expr) ((void)0)

#define _ASSERTE(expr) ((void)0)
#endif 
```

请注意，这将禁用您正在编译的代码中的任何断言，并且如果您正在编译的代码在内部使用更高级的功能`crtdbg.h`（例如内存泄漏检测），仍然无法帮助您。如果正在使用这些功能，您将需要使用 MSVC++ 而不是 MinGW 编译代码。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-01-18T17:34:08.953

我遇到了同样的问题，但使用的是 Visual Studio Community Edition 2019。

解决方案是使用 Visual Studio 安装程序下载 Windows 10 SDK。一旦我这样做了，下一个编译就可以正常工作了。

头文件“crtdbg.h”是 Windows 10 SDK 工具包的一部分。我相信您会在此处找到 crtdbg.h C:\Program Files... 或 C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\crtdbg.h，具体取决于您的设置和版本.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-04T22:49:54.417

我遇到了同样的问题，但使用的是 Visual Studio Code。首先启动/重启 VS Installer 并安装 Win10 SDK。然后重新启动您的计算机，所需的预兆就可用了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-26T02:47:13.013

我来自 Go--g-- 在这里搜索。

安装 Visual Studio 2019 preview(2022 preview) 后，我也遇到了同样的情况。

打开`Developer Command Prompt`并转到特定文件夹后，

`cl test.cpp`给出了上述错误。

**解决 ：**

安装**Visual Studio 2022 预览版**或任何其他版本后，做`reboot`系统。

重新启动后，我可以成功，运行`cl`命令，并编译一个测试程序，没有任何上述错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-14T12:11:59.813

我最近尝试安装 LLVM/Visual Studio Code 时遇到了这个问题。clang 编译器需要安装 Windows SDK。

要安装 Windwos SDK 打开/下载 Visual Studio 安装程序并在使用 C++ 开发的桌面中检查 Windows 10 SDK

# javascript - 使用 javascript 以漂亮的格式显示未来时间

> ID：12685204
> 
> 赞同：0
> 
> 时间：2012-10-02T05:57:20.980
> 
> 标签：javascript, pretty-print, date-formatting

有没有可以为未来工作的javascript？例如，我想发布一个日期为 2012 年 1 月 11 日的事件，我需要它在网页中显示为“一个月后”或类似的内容。我经历了[美好的约会](http://ejohn.org/blog/javascript-pretty-date/)，但看起来它有时不起作用。有什么东西适用于过去和未来的时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:06:40.800

```
function func()
{
    var mEvent = new Date('11/1/2012');
    var now = new Date();

    var timeDif = mEvent.getTime() - now.getTime();
    var dSec, dMin, dHr, dDay;

    dSec = (timeDif / 1000);
    dMin = (dSec / 60);
    dHr = (dMin / 60);
    dDay = (dHr / 24);

    var mStr = (dDay>>0) + "d, " + (dHr>>0) + "h, " + (dMin>>0) + 'm, ' + (dSec>>0) + "s.";

    if (now < mEvent)
        alert('future: ' + mStr);
    else
        alert('past: ' + mStr);
} 
```

# javascript - onclick后更改javascript中的变量

> ID：12685208
> 
> 赞同：0
> 
> 时间：2012-10-02T05:57:39.557
> 
> 标签：javascript

我在使用 javascript 编码方面很新，我有这个问题：我有 uploadify 配置，我有这一行：

```
 // <![CDATA[
  $(document).ready(function() {
      $('#file_upload').uploadify({
          'uploader'  : 'js/uploadify/uploadify.swf',
          'script'    : 'ajaxup.php<?php if(isset($_SESSION['user_id'])) { echo "?session_id=" . session_id() ; } ?>',
          'cancelImg' : 'css/img/cancel.png',
          'auto'      : true,
          'displayData' : 'speed',
          'multi'       : true,
          'fileDataName' : 'uploaded',
          'fileExt'     : '*.jpg;*.gif;*.png;*.jpeg',
          'fileDesc'    : 'Image Files',
          'queueSizeLimit' : 30,
          'simUploadLimit' : 1,
          'sizeLimit'   : 5024*1024,
          'scriptData'         : {'postkey' : postValueVariable},

          'onOpen'      : function() {

              document.getElementById('index_upload').style.cssText = 'width: 600px !important';
              document.getElementById('ajax_allbbcodes').style.cssText = 'display:inherit;';

              $("#ajax_bbcodes").animate({
                  width: "500",
                  height: "100"
              }, 1000 );

              $("#ajax_HTMLcodes").animate({
                  width: "500",
                  height: "100"
              }, 1000 );

              $("#ajax_DirectLinks").animate({
                  width: "500",
                  height: "100"
              }, 1000 );
              <?php if(DIRECT_LINK_SHOW == 1) { ?>
              $("#ajax_DirectLinkToImgs").animate({
                  width: "500",
                  height: "100"
              }, 1000 );
              <?php } ?>
          },
          'onProgress'  : function(event,ID,fileObj,data) {
              var bytes = Math.round(data.bytesLoaded / 1024);
              $('#' + $(event.target).attr('id') + ID).find('.percentage').text(' - ' + bytes + 'KB Uploaded');

              document.getElementById('progressbarOver').style.cssText = 'display:inherit;';

              $("#progressbar").animate({
                  width: data.percentage + "%",
                  height: "20"
              }, 200 );

              return false;
          },
          'onComplete'  : function(event, ID, fileObj, response, data) {

              old_guests = document.getElementById("testajax").innerHTML;
              document.getElementById('testajax').innerHTML = old_guests + response;

              myArrayBBCode = $('.ajax_BBCode');
              oldbb = document.getElementById('ajax_bbcodes').innerHTML;
              document.getElementById('ajax_bbcodes').innerHTML = oldbb + myArrayBBCode[myArrayBBCode.length-1].innerHTML + ' ';

              myArrayHTMLCode = $('.ajax_HTMLCode');
              oldbbHTMLCode = document.getElementById('ajax_HTMLcodes').innerHTML;
              document.getElementById('ajax_HTMLcodes').innerHTML = oldbbHTMLCode + myArrayHTMLCode[myArrayHTMLCode.length-1].innerHTML + ' ';

              myArrayDirectLink = $('.ajax_DirectLink');
              oldbbDirectLink = document.getElementById('ajax_DirectLinks').innerHTML;
              document.getElementById('ajax_DirectLinks').innerHTML = oldbbDirectLink + myArrayDirectLink[myArrayDirectLink.length-1].innerHTML + ' \r\n';

            <?php if(DIRECT_LINK_SHOW == 1) { ?>
              myArrayDirectLinkToImg = $('.ajax_DirectLinkToImg');
              oldbbDirectLinkToImg = document.getElementById('ajax_DirectLinkToImgs').innerHTML;
              document.getElementById('ajax_DirectLinkToImgs').innerHTML = oldbbDirectLinkToImg + myArrayDirectLinkToImg[myArrayDirectLinkToImg.length-1].innerHTML + ' \r\n';
            <?php } ?>

          },
          'onAllComplete' : function(event,data) {
              document.getElementById('progressbarOver').style.cssText = 'display:none;';
          }

      });
  });

  // ]]> 
```

我需要有两个具有 onclick 功能或其他功能的按钮，当按下时，将**postValueVariable**更改为 Yes 或 No 。我尝试了很多方法，但没有奏效。希望我能在这里找到答案。先感谢您 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:42:11.417

[这](http://jsfiddle.net/5deaH/3/) *应该可以*帮助您入门。

```
<button data-boolean='yes'>button one</button>
<button data-boolean='no'>button two</button>

window.postValueVariable = null;

updateValueVariable = function () {
    window.postValueVariable = this.getAttribute('data-boolean');
    alert('postValueVariable is now ' + window.postValueVariable);
};

var buttons = document.querySelectorAll('button');

for (var i = 0; i < buttons.length; i += 1) {
    var button = buttons[i];
    (function () {
        button.addEventListener('click', updateValueVariable, false);
    }())
} 
```

# ios - 如何在 OpenGL ES（使用 GLKit）中启用彩色顶点？

> ID：12685210
> 
> 赞同：1
> 
> 时间：2012-10-02T05:58:25.820
> 
> 标签：ios, opengl-es, glkit

我这个周末开始学习 OpenGL，并发现了一条学习曲线。大多数事情我都设法解决了，但现在我被困住了......

我创建了一个顶点数组。每个顶点（vertexT）由 3 个向量（位置、法线和颜色）组成。每个向量 (GLKVector3) 都是浮点数的三元组（即 x、y、z 或 r、g、b）。由于 GLKVector3 被定义为适用于颜色，我假设 opengl 很乐意使用不指定第三个浮点数（即 alpha）的颜色值

我设置 gl 对象的函数如下所示： glBindVertexArrayOES(_vertexArrayObject);

```
glGenBuffers(1, &_vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(vertexT) * _vertexCount, [_vertexData mutableBytes], GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, sizeof(vertexT), BUFFER_OFFSET(0));

glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, sizeof(vertexT), BUFFER_OFFSET(sizeof(GLKVector3))); 
```

到目前为止，一切都很好。我没有使用交错数组的颜色部分，整个对象呈现为白色，在我的绘图函数中使用以下调用：

```
glBindVertexArrayOES(_vertexArrayObject);
glDrawElements(GL_TRIANGLES, _triangleCount * 3, GL_UNSIGNED_SHORT, [_triangleData mutableBytes]); 
```

所以现在我想为我的模型设置每个顶点的颜色，所以我添加了以下内容：

```
glEnableVertexAttribArray(GLKVertexAttribColor);
glVertexAttribPointer(GLKVertexAttribColor, 3, GL_FLOAT, GL_FALSE, sizeof(vertexT), BUFFER_OFFSET(sizeof(GLKVector3)*2)); 
```

但它仍然是白色的。我设法找到[了一个](https://stackoverflow.com/questions/820263)听起来像我的问题的 SO 问题，但提供的解决方案是使用 GL_COLOR_MATERIAL 调用 glEnable ，据我所知，这个常量在 OpenGL ES 中无效（根据 Khronos 的[sdk 页面](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glEnable.xml)）。

我敢肯定这很简单。但我没有看到它。一点帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:23:31.177

最终找到了一种在 GLKit 中启用颜色材料的方法。

这条线可以解决问题：

```
self.effect.colorMaterialEnabled = GL_TRUE; 
```

# jquery - 复选框在 php 的可扩展列表中不起作用

> ID：12685211
> 
> 赞同：0
> 
> 时间：2012-10-02T05:58:27.187
> 
> 标签：jquery, html, checkbox

我有以下代码

```
<ul id="expList">
<li>TITLE
        <ul>
            <li>          
    </li>           
         </ul>
 </li>
     <li>INNOCULUM
         <ul>
             <li>
                 <form><table border=1 frame=border name='mytable' id='mytable'>
                        <tr><th >Select</td><th >Field</td><td>Value to be updated</td>/tr>
                        <tr>
                            <td><input type='checkbox' name='check1'></td> 
                            <th>INNOCULUM</td>
                            <td><input type='text' name='innoculum'/></td></tr>
                        <tr><td><input type='checkbox' name='check2'></td> 
                            <th>ORGANISM</td>
                            <td><input type='text' name='organism'/></td></tr>
    </li>           
        </ul>
   </li>
</ul> 
```

这是一个示例代码，我在使用 jquery 创建的可扩展列表中包含了复选框。不幸的是，它对我不起作用。复选框未启用。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:02:35.520

如果这是您的代码的复制和粘贴，我发现了一个错字：

```
<tr><th >Select</td><th >Field</td><td>Value to be updated</td>/tr> 
```

您的关闭`</tr>`缺少**<**。这可能会导致您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:31:22.313

未检查的复选框可能是无效标记的结果（正如[Darko Z 提到](https://stackoverflow.com/questions/12685211/checkbox-is-not-working-in-expandable-list-in-php#comment17121745_12685254)的，您没有关闭表格，并且正如[Tyanna 提到](https://stackoverflow.com/a/12685254/758177)的，您的结束`</tr>`标记不完整）。浏览器有时会在给出无效标记（尤其是标签损坏）时做各种疯狂的事情。此外，您使用 关闭`<th>`标签`</td>`，这是错误的。

修复无效代码可能会解决您的复选框问题。

**这是您的代码工作**：[http://jsfiddle.net/jshado1/HdzqH/](http://jsfiddle.net/jshado1/HdzqH/)。我所做的只是修复标记（实际上还有其他几个标记问题）。

# nemerle - 如何在 Nemerle 中定义字节数组

> ID：12685216
> 
> 赞同：2
> 
> 时间：2012-10-02T05:58:54.613
> 
> 标签：nemerle

```
def cmd = array [ 0x0F, 0x03 ] 
```

这段代码定义了整数数组，所以我想要字节数组

有趣的是

```
def cmd = array [ 0x0Fb, 0x03b ] 
```

这段代码定义了相同的......

如何在这里定义字节数组而不是int数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:09:28.733

```
def cmd = array [ 0x0F : byte, 0x03 ] 
```

到目前为止，修饰符不适用于十六进制。

# c# - 增加 HttpWebRequest.BeginGetResponse 的超时时间

> ID：12685220
> 
> 赞同：2
> 
> 时间：2012-10-02T05:59:18.810
> 
> 标签：c#, asynchronous, timeout, httprequest

我需要对远程计算机上的 Web 服务执行异步 HttpRequest。此请求可能需要超过 60 秒，这似乎是 HttpRequest 的默认超时。我可以在 HttpRequest 对象中设置 timeout 属性，但不幸的是 Timeout 属性对使用 BeginGetResponse 或 BeginGetRequestStream 方法发出的异步请求没有影响（请参阅[http://msdn.microsoft.com/en-us/library/system. net.httpwebrequest.timeout.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout.aspx)）。

有谁知道无论如何我可以增加超时时间，以便在 60 秒后不会出现异常？

# linux - 核心转储中的部分数量超过了 mmaped

> ID：12685222
> 
> 赞同：1
> 
> 时间：2012-10-02T05:59:25.023
> 
> 标签：linux, memory, core, mmap

我正在尝试调试内核模块。我有一段代码可以获取进程中的地图数量：

```
 static int tmp_func(void){
      int count = 0;
      struct mm_struct  *mm = current->mm;
      struct vm_area_struct *map;
      down_read(&mm->mmap_sem);
      /* 1\. just counts maps ... */
      for (map = mm->mmap; map ; map = map->vm_next) {
         count ++;
      }
      up_read(&mm->mmap_sem);
      printk("tmp_func,count: %d\n",count);
      return count;
    } 
```

它返回 28。当我检查核心转储时，有 32 个负载：

```
 (gdb)maintenance info sections
     ....
     Core file:
     file type elf64-x86-64.
     0x00000000->0x00000344 at 0x00000778: note0 READONLY HAS_CONTENTS
     0x00000000->0x000000d8 at 0x000007fc: .reg/22787 HAS_CONTENTS
     0x00000000->0x000000d8 at 0x000007fc: .reg HAS_CONTENTS
     0x00000000->0x00000130 at 0x0000098c: .auxv HAS_CONTENTS
     0x00400000->0x00400000 at 0x00001000: load1 ALLOC READONLY CODE
     0x00600000->0x00601000 at 0x00001000: load2 ALLOC LOAD HAS_CONTENTS
     0x00601000->0x00622000 at 0x00002000: load3 ALLOC LOAD HAS_CONTENTS
     0x390ee00000->0x390ee00000 at 0x00023000: load4 ALLOC READONLY CODE
     0x390f01c000->0x390f01d000 at 0x00023000: load5 ALLOC LOAD READONLY HAS_CONTENTS
     0x390f01d000->0x390f01e000 at 0x00024000: load6 ALLOC LOAD HAS_CONTENTS
     0x390f200000->0x390f200000 at 0x00025000: load7 ALLOC READONLY CODE
     0x390f34e000->0x390f34e000 at 0x00025000: load8 ALLOC READONLY
     0x390f54e000->0x390f552000 at 0x00025000: load9 ALLOC LOAD READONLY HAS_CONTENTS
     0x390f552000->0x390f553000 at 0x00029000: load10 ALLOC LOAD HAS_CONTENTS
     0x390f553000->0x390f558000 at 0x0002a000: load11 ALLOC LOAD HAS_CONTENTS
     0x390f600000->0x390f600000 at 0x0002f000: load12 ALLOC READONLY CODE
     0x390f602000->0x390f602000 at 0x0002f000: load13 ALLOC READONLY
     0x390f802000->0x390f803000 at 0x0002f000: load14 ALLOC LOAD READONLY HAS_CONTENTS
     0x390f803000->0x390f804000 at 0x00030000: load15 ALLOC LOAD HAS_CONTENTS
     0x390fa00000->0x390fa00000 at 0x00031000: load16 ALLOC READONLY CODE
     0x390fa16000->0x390fa16000 at 0x00031000: load17 ALLOC READONLY
     0x390fc15000->0x390fc16000 at 0x00031000: load18 ALLOC LOAD READONLY HAS_CONTENTS
     0x390fc16000->0x390fc17000 at 0x00032000: load19 ALLOC LOAD HAS_CONTENTS
     0x390fc17000->0x390fc1b000 at 0x00033000: load20 ALLOC LOAD HAS_CONTENTS
     0x3912200000->0x3912200000 at 0x00037000: load21 ALLOC READONLY CODE
     0x391220d000->0x391220d000 at 0x00037000: load22 ALLOC READONLY
     0x391240d000->0x391240e000 at 0x00037000: load23 ALLOC LOAD HAS_CONTENTS
     0x2b1df1bef000->0x2b1df1bf1000 at 0x00038000: load24 ALLOC LOAD HAS_CONTENTS
     0x2b1df1bf1000->0x2b1df1bf1000 at 0x0003a000: load25 ALLOC READONLY CODE
     0x2b1df1bfa000->0x2b1df1bfa000 at 0x0003a000: load26 ALLOC READONLY
     0x2b1df1dfa000->0x2b1df1dfb000 at 0x0003a000: load27 ALLOC LOAD HAS_CONTENTS
     0x2b1df1dfb000->0x2b1df1dfd000 at 0x0003b000: load28 ALLOC LOAD HAS_CONTENTS
     0x2b1df1e0f000->0x2b1df1e12000 at 0x0003d000: load29 ALLOC LOAD HAS_CONTENTS
     0x7fff99a35000->0x7fff99a4a000 at 0x00040000: load30 ALLOC LOAD HAS_CONTENTS
     0x7fff99b5e000->0x7fff99b5f000 at 0x00055000: load31 ALLOC LOAD READONLY CODE HAS_CONTENTS
     0xffffffffff600000->0xffffffffff600000 at 0x00056000: load32 ALLOC READONLY CODE 
```

我检查并发现负载 3,21,22,23 不在我的代码中。

我得到了所有部分的全部内容。这里：

```
 load3: has libgcc_s.so.1
    load21 and load22 were not there
    load23: nothing meaningful (seems to be a Hash Section) 
```

我想知道可能是什么原因。

信息：x86_64、centos 5.7、2.6.32、GCC 4.1.2。

[编辑：我的应用程序是一个带有 printf 和 sleep 的 for 循环]

# haskell - Haskell 错误：“（枚举 [Int]）没有实例

> ID：12685229
> 
> 赞同：3
> 
> 时间：2012-10-02T06:00:04.673
> 
> 标签：haskell, compiler-errors

我有以下代码：

```
betaRest :: Int -> [Int] -> Int
betaRest n prevDigits | n == 0    = (length prevDigits)
                      | otherwise = (sum (map (betaRest (n - 1)) [0..9]))

betaFirst :: Int -> Int
betaFirst n | n == 0    = 0
            | otherwise = (betaRest (n - 1) [1..9]) 
```

它给了我以下错误，我不知道为什么。

> 1) (Enum [Int]) 没有从算术序列 '0 .. 9' 产生的实例
> 
> 2) (Num [Int]) 没有由文字“0”产生的实例

Haskell 是否认为用“..”运算符制作的东西是枚举？但是为什么下面 4 行（带有“[1..9]”）的行没有错误呢？

* * *

编辑：我想要代码做的是这样的（程序上）：

```
int betaRest(int n, int[] prevDigits) {
  if (n == 0) return prevDigits.length;
  else {
    sum = 0;
    foreach prevDigit in prevDigits {
      sum += betaRest(n - 1, [0..9]);
    }
    return sum;
  }
}

int betaFirst(int n) {
  if (n == 0) return 0;
  else return betaRest(n - 1, [1..9]);
} 
```

因此，betaFirst(1) == 9 和 betaFirst(2) == 90。是的，有人可能想建议一个公式来生成它，但我将在 [0..9 中添加某种过滤器]，从而缩小范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T07:01:48.003

你`betaRest`传给`map`. 地图对于您传递它`(a -> a) -> [a] -> [a]`的列表来说是这样的，它需要一个功能。但部分应用的是.`[Int]``Int -> Int``betaRest``[Int] -> Int`

至于`[0..9]`它的类型是`(Enum t, Num t) => [t]`，它被翻译成`enumFromTo 0 9`应用程序。所以编译器以相反的方式计算了你的错误：如果你为列表定义了特殊`Num`和`Enum`实例，那么`[0..9]`它就变成了一个 int 列表的列表，那么你的应用程序就有意义了。

但我认为你想使用`inits`或`tails`功能。让我们知道您想要实现的目标，以便我们提供解决方案。

一个最小的修复方法是添加`prevDigits`作为参数`map`并使用 lambda 抽象来忽略未使用的`prevDigit`：

```
 | otherwise = sum (map (\prevDigit -> betaRest (n - 1) [0..9]) prevDigits) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T12:04:54.633

```
(sum (map (betaRest (n - 1)) [0..9])) 
```

让我们减少括号的数量，以便更好地了解发生了什么。

```
sum (map (betaRest (n - 1)) [0..9]) 
```

的论点`sum`是

```
map (betaRest (n-1)) [0 .. 9] 
```

现在，`betaRest :: Int -> [Int] -> Int`，因此部分应用函数的类型是

```
betaRest (n-1) :: [Int] -> Int 
```

因此我们可以推断出类型

```
map (betaRest (n-1)) :: [[Int]] -> [Int] 
```

但是传递给的参数`map (betaRest (n-1))`is `[0 .. 9]`，它有类型

```
[0 .. 9] :: (Num a, Enum a) => [a] 
```

`Num`约束来自整数文字的使用，而约束`Enum`来自`enumFromTo`函数的使用（以其语法糖化形式`[low .. high]`）。将其作为参数传递给需要类型参数的函数`[[Int]]`意味着类型变量`a`必须实例化为`[Int]`，然后需要检查约束，即必须查找`[Int]`for`Num`和的实例。`Enum`这些都不存在，因此出现错误消息。

我不确定您的程序示例是否真的是您想要的，

```
int betaRest(int n, int[] prevDigits) {
  if (n == 0) return prevDigits.length;
  else {
    sum = 0;
    foreach prevDigit in prevDigits {
      sum += betaRest(n - 1, [0..9]);
    }
    return sum;
  }
} 
```

循环`foreach`更容易（也更有效）表示为

```
sum = prevDigits.length * betaRest(n-1, [0 .. 9]); 
```

所以为了`foreach`有意义，`prevDigit`在循环体中应该有依赖。

翻译成 Haskell 将是

```
betaRest n prevDigits
    | n == 0    = length prevDigits
    | otherwise = length prevDigits * betaRest (n-1) [0 .. 9]
    -- or with the loop, with the small improvement that `betaRest (n-1) [0 .. 9]
    -- is only computed once (if the Haskell implementation is sensible)
    -- | otherwise = sum $ map (const $ betaRest (n-1) [0 .. 9]) prevDigits 
```

但如上所述，我怀疑这真的是你想要的。

# session-cookies - 会话超时后仍然可以调用 alfresco webscripts 吗？

> ID：12685236
> 
> 赞同：0
> 
> 时间：2012-10-02T06:00:36.023
> 
> 标签：session-cookies, alfresco, session-timeout, alfresco-share

我正在做的是我在他们的 web.xml 文件中将 alfresco 和 share 设置为会话超时时间 60 分钟。

我的情况是

> 1.  当我想在“开始工作流程”页面中启动工作流程时，我填写了所有必要的数据，但没有单击“开始工作流程”按钮。
> 2.  会话超时后，我单击此“开始工作流程”按钮。
> 3.  第一次，验证框打开并要求输入用户名和密码。
> 4.  我填写了另一个用户的用户名和密码。
> 5.  它使用经过身份验证的另一个用户启动工作流。
> 6.  其他时间会话超时，它不请求身份验证框，而是为先前请求的经过身份验证的用户执行操作。

所以我想**为什么会这样？？？是因为饼干吗？？**

目前使用的cookie有四种，分别是alfLogin、alfUsername2、JSSESSIONID、_alfTest。只有当用户退出时，alfUsername2 cookie 才会被删除，其他的会保留。alfLogin 和 alfUsername2 cookie 的过期时间是 7 天，其他 cookie 取决于会话。

**会话超时后还可以使用 alfresco 网络脚本吗？**如果是这样，我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:39:35.783

虽然我必须回答我自己的问题，但我只想分享我的结果。我必须追查很多。但答案就是这么简单。

首先，这不是因为 cookie。

此答案不仅用于单击“开始工作流程”按钮，还**用于在共享会话超时后调用 alfresco webscript**。

`EndPointProxyController`所有对 alfresco webscript的调用都是由`org.springframework.extensions.webscripts.servlet.mvc.EndPointProxyController`.`spring-webscripts-1.0.0-sources.jar`

在`handleRequestInternal`方法中如果没有会话并且 basicHttpAuthChallenge 为真，基本认证框如下图所示。

```
 else if (this.basicHttpAuthChallenge || descriptor.getBasicAuth())
            {
                // check for HTTP authorisation request (i.e. RSS feeds, direct links etc.)
                String authorization = req.getHeader("Authorization");
                if (authorization == null || authorization.length() == 0)
                {
                    res.setStatus(HttpServletResponse.SC_UNAUTHORIZED,
                            "No USER_ID found in session and requested endpoint requires authentication.");
                    res.setHeader("WWW-Authenticate", "Basic realm=\"Alfresco\"");

                    // no further processing as authentication is required but not provided
                    // the browser will now prompt the user for appropriate credentials
                    return null;
                }
                else
                {
// other coding
                } 
```

我们可以避免这种情况

> 在`endpointController`slingshot **-application-context.xml**中，将 **basicHttpAuthChallenge 更改为 false。**

像

```
 <!-- Override EndPointProxyController to enable Basic HTTP auth challenge on 401 response -->
   <bean id="endpointController" class="org.springframework.extensions.webscripts.servlet.mvc.EndPointProxyController">
      <property name="cacheSeconds" value="-1" />
      <property name="useExpiresHeader"><value>true</value></property>
      <property name="useCacheControlHeader"><value>true</value></property>
      <property name="configService" ref="web.config" />
      <property name="connectorService" ref="connector.service" />
      <property name="supportedMethods"><null/></property>
      <property name="basicHttpAuthChallenge"><value>false</value></property>
   </bean> 
```

# php - 在数据库表中搜索字符串形式的多列

> ID：12685238
> 
> 赞同：1
> 
> 时间：2012-10-02T06:00:47.927
> 
> 标签：php, mysql, database, string

在我的代码中，我想通过名字、姓氏和电子邮件字段搜索朋友。现在我想匹配数据库表字段名称中的确切字符串。我也想显示该字段。我还想获取搜索数据的 id，然后我将显示关于该人的完整描述。我该怎么做它。感谢对我的任何帮助。我试试看。

```
$term=$_POST['find'];
$searchquery=mysql_query("select firstname,lastname,email from account where output LIKE %$term%"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:06:36.353

您正在寻找：

```
SELECT id, firstname, lastname, email
FROM account
WHERE firstname LIKE %$term%
OR lastname LIKE %$term%
OR email LIKE %$term%
LIMIT 20 
```

请注意，您的方式有潜在危险，您应该保护您的`$term`变量：

```
$term = mysql_real_escape_string($_POST['find']); 
```

Anso 请注意 mysql_* 系列函数正在弃用过程中，您应该查看 PDO 或 mysqli。

*编辑：*

`$term`添加了一个 LIMIT ，因为如果不包含任何内容，我认为您不想恢复所有数据库表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:05:12.963

查询应该是这样的

```
$searchquery=mysql_query("select id,firstname,lastname,email from account where firstname LIKE '%$term%' OR lastname LIKE '%$term%' OR email LIKE '%$term%'"); 
```

如果您想在这 3 列（名字、姓氏、电子邮件）中进行搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T06:07:03.613

更改您的查询以获取您想要显示的所有需要​​的信息，并根据该术语检查您的 where 语句。像这样：

```
select id, firstname, lastname, email /*, ... other fields */ from account where firstname LIKE '%$term%' OR lastname LIKE '%$term%' OR email LIKE '%$term%' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T06:12:28.733

```
select firstname,lastname,email from account where concat_ws(' ',firstname,lastname,email) LIKE %$term%" 
```

将所有三个字段视为单个字段，结果会更快

# objective-c - Objective-C 块是否总是在单独的线程中执行？

> ID：12685239
> 
> 赞同：8
> 
> 时间：2012-10-02T06:00:53.820
> 
> 标签：objective-c, multithreading, grand-central-dispatch, block, sendasynchronousrequest

Objective-C 块是否总是在单独的线程中执行？

具体来说，我询问的是 NSURLConnection 类的 sendAsynchronousRequest:queue:completionHandler 方法。这是场景：

> 主线程（第一个线程）调用 sendAsynchronousRequest 方法 sendAsynchronousRequest 在第二个线程上执行，方法完成时由 NSOperationQueue 管理并调用commpletionHandler，它在哪个线程上执行？第二个线程？还有第三个线程？还是第一个线程？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T06:06:49.417

它在您指定为`queue`参数的任何操作队列上执行它：

> 加载 URL 请求的数据并在请求完成或失败时在操作队列上执行处理程序块。

该`queue`参数记录为：

> 当请求完成或失败时，处理程序块被分派到的操作队列。

因此，这实际上取决于使用`NSOperationQueue`了多少线程。我*希望*池行为 - 因此虽然*可以*有多个线程，但我不希望每个处理程序有不同的线程，必然。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-25T21:53:19.730

块只是一个闭包，就像你在 python 或函数式语言中拥有它们一样。它们不会“在线程上运行”，而是在调用它们的地方运行。

```
int main(void)
{
    void (^f)(void) { printf("hello world!\n"); }
    f();
    return 0;
} 
```

做你认为它做的事，没有调度队列，没有线程，什么都没有。

但是，一旦您拥有具有所有良好捕获语义的块，**就很**容易让 API 来安排它们在任何地方的执行。但基本上，一个块与一个函数指针和一个包含所有捕获变量的临时结构相同，作为参数传递给回调（甚至它在编译器中的实现方式也是如此）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T06:07:59.110

块在被告知的任何地方执行。将代码包装在块中不会影响将在其上运行的线程或队列。在您的特定情况下，如文档所述，完成块在`queue`参数中传入的队列上执行。

我不确定，对于您的目的，如果您确实需要区分队列和线程，关键原则是URL请求与调用代码异步执行，并在传入的队列上执行完成块作为方法参数。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-02T06:10:31.757

正如其他人所说，它将在您指定的任何队列上运行。如果这是一个后台队列，并且你想在主线程上执行一些代码，你可以包含一个访问主队列的 GCD 块。您的完成块看起来像这样：

```
^(NSURLResponse *response, NSData *data, NSError*error){

   // do whatever in the background

   dispatch_async(dispatch_get_main_queue(), ^{
   // this block will run on the main thread
   });
} 
```

# qml - 为 PySide 导入 Qt 桌面组件时出现 dll 错误

> ID：12685242
> 
> 赞同：2
> 
> 时间：2012-10-02T06:01:03.710
> 
> 标签：qml, pyside

我正在尝试让 Qt Quick Desktop Components 与 PySide 1.1.2 和 Python 2.7 一起使用。到目前为止，我已经在发布模式下使用 MSVC 编译了最新版本的桌面组件，并将包含 .qml 文件和 plugin/styleplugin.dll 的组件文件夹复制到 Python\Lib\site-packages\PySide\imports\ Qt桌面。

这是我当前的代码：

```
import sys
from PySide.QtCore import *
from PySide.QtGui import *
from PySide.QtDeclarative import QDeclarativeView

app = QApplication(sys.argv)
view = QDeclarativeView()

view.setSource(QUrl('server.qml'))
view.setResizeMode(QDeclarativeView.SizeRootObjectToView)
view.show()

sys.exit(app.exec_()) 
```

我的 Qml 文件：

```
import QtQuick 1.1
import QtDesktop 0.1

Window {
} 
```

我得到的错误：

```
file:///C:/Programming/CibAbi/server.qml:15:1: plugin cannot be loaded for module "QtDesktop":
 Cannot load library C:/Programming/Python27_32bit/Lib/site-packages/PySide/imports/QtDesktop/plugin/styleplugin.dll:
 The specified procedure could not be found.
 import QtDesktop 0.1
 ^ 
```

有没有人知道解决这个问题的方法，或者有没有人有更具体的步骤来使用带有 PySide 的桌面组件？谢谢你。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T16:42:08.163

适用于 Windows 的 pyside py 3.3 32 位 Qt 库 4.8.5（VS 2010）完美运行

配置发布和构建

将文件夹“component”重命名为“QtDesktop” 复制此文件夹 en pyside/imports/

和瓜拉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:55:43.437

Edit your system PATH variable so that the PySide directory appears in the path before any PyQt or other Qt directory.

[http://qt-project.org/wiki/PySide_FAQ#6624847b60a84a6d81a5950805dfb6df](http://qt-project.org/wiki/PySide_FAQ#6624847b60a84a6d81a5950805dfb6df)

# data-structures - 查找给定数字的下一个较大的字谜

> ID：12685244
> 
> 赞同：1
> 
> 时间：2012-10-02T06:01:10.667
> 
> 标签：data-structures, anagram

找到给定数字的下一个较大字谜的有效算法是什么？

例子：

1.  输入：7813 -> 输出：7831
2.  输入：3791 -> 输出：3917
3.  输入：4321 -> 输出：（无）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:57:02.523

基本上你从右到左移动数字。一旦你找到一个递减的数字，你就停下来。将该数字与之前的所有数字进行比较。将其替换为下一个最高数字，然后按升序对其余数字进行排序。例如：

取 978654321。 1) 从右向左移动，直到你得到一个递减的数字：

```
Stop at the 7 because that is the first digit that decreases. 
```

2）找到我们已经看到的下一个最大的数字：

```
out of 1 2 3 4 5 6 and 8, 8 is the next largest digit to 7. 
```

3）按升序对剩余数字进行排序并将其附加到末尾。

```
1234567 
```

产生 981234567

复杂：

n 是位数。

步骤 1) O(n) 因为在最坏的情况下，数字会增加（或保持不变）直到最后一位数字。

步骤 2) O(n) 因为在最坏的情况下，您必须将该数字与所有 n 位数字进行比较。

步骤 3) O(n lg n) 因为你必须排序，最好的排序算法是 nlgn。

所以这个算法在 O(n lg n) 中运行。再次，其中 n 是数字中的位数。

# xcode4.2 - 在会话中存储一个值并传递到 iPhone 中的下一个视图？

> ID：12685245
> 
> 赞同：0
> 
> 时间：2012-10-02T06:01:29.290
> 
> 标签：xcode4.2

在我的应用程序中，我使用 XML Parsing 从 WCF 服务 URL 检索一个值，并将这些值存储在 NSString 和 NSMutableArray 中。现在我想通过单击按钮将这些值从一个视图传递到下一个视图，并且它们必须显示在 nextView 的标签中。我怎样才能实现它？即如何将值存储在 Xcode 的会话中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:04:26.523

你在使用故事板吗？如果是这样，您可以使用`prepareForSegue()`此示例中的调用。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"YOURVIEW"]) {
        YOURVIEWCONTROLLER *destViewController = segue.destinationViewController;
        destViewController.var1  = @"HELLO 1";
        destViewController.var2  = @"HELLO 2";
    }
} 
```

# android - 如何从android调用导航网络服务

> ID：12685255
> 
> 赞同：2
> 
> 时间：2012-10-02T06:02:42.727
> 
> 标签：android, nav

我想调用在 Microsoft Dynamics nav ERP 中运行的 Web 服务我正在使用 ksoap2 库，但问题是每次我运行我的应用程序时都会抛出

```
java.net.ConnectException: localhost/127.0.0.1:7047 - Connection refused 
```

Microsoft Dynamics nav 使用 NTLM 身份验证可能是问题所在，请提出解决方案。提前致谢。

我的代码是

```
String namespace = "urn:microsoft-dynamics-schemas/codeunit/NavisionWS";
String url = "http://localhost:7047/DynamicsNAV/WS/Codeunit/NavisionWS";   
String soap_action = "urn:microsoft-dynamics-schemas/codeunit/NavisionWS:GetLoginInfo";
String method_name = "GetLoginInfo";
try
        {
              SoapObject request = new SoapObject(namespace, method_name);    
              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

               envelope.dotNet = true;   
               envelope.setOutputSoapObject(request);   
               HttpTransportSE transport = new HttpTransportSE(url);    
               transport.call(soap_action, envelope); // Receive Error here!
                    SoapObject result = (SoapObject) envelope.getResponse();
                    great = result.toString();
        }
        catch (Exception e)
        {
            e.printStackTrace();
                 great = e.toString();
                 Toast.makeText(this, great, Toast.LENGTH_LONG).show();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-26T04:29:18.377

使用 IP 地址而不是 Localhost 从 Android 连接到 web 服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:10:57.140

您是否已添加`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>`到清单中？

# mysql - Mysql 事件执行开始时间

> ID：12685257
> 
> 赞同：3
> 
> 时间：2012-10-02T06:02:51.073
> 
> 标签：mysql, events

我有一个 mysql 事件，它将每 1 天执行一次并进行一些活动。请找到相同的代码片段。

```
delimiter |    
CREATE EVENT createTest     
ON SCHEDULE EVERY 1 DAY 
DO
BEGIN
  -- Do some work
END |
delimiter ; 
```

当我创建此事件时，它在同一天的同一时间执行。第二天执行（最后执行 + 24 小时）方案。

是否可以在活动中设置开始时间？我想在每天 0 小时执行此事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-23T11:40:03.167

你可以使用这个：

```
CREATE EVENT createTest     
ON SCHEDULE EVERY '1' DAY
STARTS CONCAT(DATE(NOW()+INTERVAL 1 DAY ), ' 00:00:00')
DO 
BEGIN
 -- do your task
END 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T06:06:12.243

是的，你可以做到。为此目的使用 STARTS 选项。

```
CREATE EVENT event1
ON SCHEDULE EVERY '1' DAY
STARTS '2012-10-03 00:00:00'
DO 
BEGIN
 -- do something
END 
```

请注意，该事件开始日期时间必须在将来。

* * *

对于@spt -

```
CREATE EVENT event1
    ON SCHEDULE EVERY '1' YEAR
    STARTS '2016-04-01 00:00:00'
    DO 
BEGIN
END 
```

此外，如果难以创建和设置事件对象，您可以使用[dbForge Studio for MySQL](https://www.devart.com/dbforge/mysql/studio/)中的 GUI 事件对象编辑器（免费 Express 版本允许）。

# c# - C# 从环境中获取本地化路径

> ID：12685261
> 
> 赞同：0
> 
> 时间：2012-10-02T06:03:08.143
> 
> 标签：c#, path

我有一个德语操作系统，我需要获取文件夹的路径。在 Windows 7 中，“文档”的显示名称为“Dokumente”。但如果我走这条路

```
string path = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) 
```

我得到`C:\\Users\\Username\\Documents\\` 但我需要`C:\\Benutzer\\Username\\Dokumente\\`

知道如何获得本地化路径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:40:52.963

也许：

```
[DllImport("shell32.dll")]
        static extern int SHGetFolderPath(
            IntPtr hwndOwner, 
            int nFolder, 
            IntPtr hToken,
            uint dwFlags, 
            [Out] StringBuilder pszPath
            );

    public static string GetLocalizedPath(Environment.SpecialFolder folder)
    {
        var builder = new StringBuilder();
        SHGetFolderPath(IntPtr.Zero, (int)folder, IntPtr.Zero, 0x0000, builder);
        return builder.ToString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:53:12.380

您会发现它在您的系统上实际上被称为“文档”。“Dokuments”路径实际上只显示在资源管理器中（`desktop.ini`文件中引用了这个本地化名称）。所以`Environment.GetFolderPath`返回的路径实际上是正确且可用的。您可以通过在您的配置文件目录中打开`cmd`并运行来查看“真实”名称。`dir /a`

# c# - 如何将字节转换为布尔值

> ID：12685262
> 
> 赞同：-2
> 
> 时间：2012-10-02T06:03:09.920
> 
> 标签：c#

我想将一个字节转换为布尔值。这是代码：

```
String text = textBox1.Text;
UdpClient udpc = new UdpClient(text,8899);
IPEndPoint ep = null;

while (true)
{
    MessageBox.Show("Name: ");
    string name = "Connected";
    if (name == "") break;

    byte[] sdata = Encoding.ASCII.GetBytes(name);
    udpc.Send(sdata, sdata.Length);

    if (udpc.Receive(ref ep)=null)
    {
      //  MessageBox.Show("Host not found");
    }
    else
    {        
        byte[] rdata = udpc.Receive(ref ep);
        string job = Encoding.ASCII.GetString(rdata);
        MessageBox.Show(job);
    }
} 
```

我想将这行代码转换为布尔值：

```
 udpc.Receive(ref ep); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:11:37.903

您根本不想将结果与 null 进行比较……那样您会丢失实际数据，然后`Receive`再次调用，从而有效地跳过数据包。

你应该使用：

```
byte[] data = udpc.Receive(ref ep);
if (data == null)
{
    // Whatever
}
else
{
    MessageBox.Show(Encoding.ASCII.GetBytes(data));
} 
```

另请注意，此代码已损坏：

```
string name = "Connected";
if (name == "") break; 
```

`name`当您刚刚将其设置为时，它怎么可能是一个空字符串`"Connected"`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:46:46.980

在`UdpClient`接收到字节之前，它自然是阻塞的。

这意味着您根本不应该获取数据，假设您正在寻找一种方法来指示您是否已收到数据，那么一旦您经过`udpc.Recieve`，您应该返回 true。

我还会考虑稍微更改代码，因为该`= null`语句会出现一些编译问题，因为这不会转换为可编译的代码表达式。

当您尝试从 UDP 客户端读取数据时，您的 if else 语句也存在问题，该客户端会消耗已发送的数据。

就我个人而言，我会选择 UDP 套接字，但为了让你滚动，我会将代码更改为如下所示：

```
String text = textBox1.Text;
UdpClient udpc = new UdpClient(text,8899);
IPEndPoint ep = null;

while (true)
{
    MessageBox.Show("Name: ");
    string name = "Connected";
    if (name == "") break; //This will never happen because you have already set the value
    byte[] sdata = Encoding.ASCII.GetBytes(name);
    int dataSent = 0;
    try
    {
        dataSent = udpc.Send(sdata, sdata.Length);
    }
    catch(Exception e)
    {
        dataSent = 0;
        //There is an exception. Probably the host is wrong
    }
    if (dataSent > 0)
    {
        try
        {
            byte[] rdata = udpc.Receive(ref ep);
            if(rdata!=null && rdata.Length > 0)
            {
                string job = Encoding.ASCII.GetString(rdata);
                MessageBox.Show(job)
                //True here as we managed to recieve without going to the catch statement
                //and we actually have data in the byte[]
            }
            else
            {
                MessageBox.Show("We did not recieve any data");
                //False here, because the array was empty.
            }
        }
        catch(Exception udpe)
        {
            //False here as we had a socket exception or timed out
            MessageBox.Show(udpe.ToString());
        }
    }
} 
```

# java - 为什么 java.net.DatagramSocket 支持“已连接”状态？

> ID：12685263
> 
> 赞同：0
> 
> 时间：2012-10-02T06:03:24.147
> 
> 标签：java, sockets, datagram

关于这个[问题](https://stackoverflow.com/questions/12685056/whats-the-difference-between-a-socket-which-is-open-and-a-socket-which-is-connec)： java.net.DatagramSocket 支持“已连接”状态的背景是什么？

我原以为 isConnected() 方法总是返回 false，因为 UDP/数据报套接字[不支持连接状态](http://diranieh.com/SOCKETS/SocketStates.htm)。但是快速查看[源代码](http://www.docjar.com/html/api/java/net/DatagramSocket.java.html)表明 isConnected() 方法背后有一些逻辑。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:13:49.610

阅读 Javadoc。当您“连接”`DatagramSocket`到远程 IP/端口时，您只是告诉套接字不要接受来自任何其他远程主机的数据包。

# postgresql - 删除行后postgreSQL表查询速度没有提高

> ID：12685267
> 
> 赞同：2
> 
> 时间：2012-10-02T06:03:34.750
> 
> 标签：postgresql

我有一张桌子（我们称之为 table_a）。它有大约 1500 万行。这是一个具有主键的简单表。

最近我创建了一个备份表（我们称之为 table_a_bkp）并从 table_a 中移动了 1200 万行。我使用简单的 SQL（删除/插入）来执行任务。两个表具有相同的结构并使用相同的表空间。

即使总数据行减少到 2+ 百万，table_a 的查询速度也没有提高。事实上 table_a_bkp(12m 行) 的查询速度甚至比 table_a(2m 行) 还要快。

使用 pg_stat_all_tables 检查了两个表，这两个表似乎都是在执行删除后自动清理和分析。

我预计 table_a 查询速度应该会提高，因为它现在获得的数据要少得多......

数据库版本：Linux 上托管的 PostgreSQL 9.1

解释（备份表比第一个表快，即使行大得多）：

```
EXPLAIN (ANALYZE TRUE, COSTS TRUE, BUFFERS TRUE) select count(*) from txngeneral
"Aggregate  (cost=742732.94..742732.95 rows=1 width=0) (actual time=73232.598..73232.599 rows=1 loops=1)"
"  Buffers: shared hit=8910 read=701646"
"  ->  Seq Scan on txngeneral  (cost=0.00..736297.55 rows=2574155 width=0) (actual time=17.614..72763.873 rows=2572550 loops=1)"
"        Buffers: shared hit=8910 read=701646"
"Total runtime: 73232.647 ms"

EXPLAIN (ANALYZE TRUE, COSTS TRUE, BUFFERS TRUE) select count(*) from txngeneral_bkp
"Aggregate  (cost=723840.13..723840.14 rows=1 width=0) (actual time=57134.270..57134.270 rows=1 loops=1)"
"  Buffers: shared hit=96 read=569895"
"  ->  Seq Scan on txngeneral_bkp  (cost=0.00..693070.30 rows=12307930 width=0) (actual time=5.436..54889.543 rows=12339180 loops=1)"
"        Buffers: shared hit=96 read=569895"
"Total runtime: 57134.321 ms" 
```

> 已解决：VACUUM FULL 确实加快了表扫描。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:39:04.673

你应该`VACUUM ANALYZE`你原来的表。（可能需要一个完整`VACUUM`的表。）由于新表是同时创建和填充的，它们形成或多或少连续的“块”，而原始表的元组分布在整个磁盘上。

# android - android listview 项目值

> ID：12685274
> 
> 赞同：0
> 
> 时间：2012-10-02T06:04:17.470
> 
> 标签：android, listview

我想知道如何获取这样的列表视图项值

```
item1
item2 
```

我想获得第一个项目值 item1，就像这段代码

```
if (listview part of value == item1)
{
// do something
} 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:10:38.100

你的问题在细节上非常稀疏，所以我会尽力解释它（考虑扩大你的问题）。

您想在给定位置从 listadapter 获取项目，是吗？如果是这样的话...

```
yourListView.getAdapter().getItem(position); 
```

也可以看看：

[http://developer.android.com/reference/android/widget/ListView.html#getAdapter](http://developer.android.com/reference/android/widget/ListView.html#getAdapter) () [http://developer.android.com/reference/android/widget/ListAdapter.html](http://developer.android.com/reference/android/widget/ListAdapter.html) http://developer.android。 com/reference/android/widget/Adapter.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:10:27.827

我试图猜测你的问题。也许，您希望当用户单击某个项目时执行一些代码。如果这是你的情况，那么你可以这样做：

```
lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {

 public void onItemClick(AdapterView<?> parentAdapter, View view, int position,
                         long id) {
  // do your code here
  }
 } 
```

其中 lv 是您的列表视图。如果您想了解更多信息，请访问我的博客[这里](http://www.survivingwithandroid.com/2012/09/listviewpart-1.html)

# youtube-api - youtube embed - 强制使用特定语言的默认字幕

> ID：12685280
> 
> 赞同：15
> 
> 时间：2012-10-02T06:05:02.773
> 
> 标签：youtube-api

我正在嵌入带有特定语言字幕的 youtube 视频（在我的例子中是希伯来语）。我在用着：

```
hl=He&cc_load_policy=1 
```

显示希伯来语字幕，效果很好。

但是，如果我的语言没有字幕，我希望将英语字幕（如果有的话）作为默认设置。有没有办法强制这样做？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-04-11T14:58:37.213

`cc_load_policy`您可以通过使用&`cc_lang_pref`选项强制字幕和语言

**网址：**

[http://www.youtube.com/embed/M7lc1UVf-VE?cc_load_policy=1&cc_lang_pref=en](http://www.youtube.com/embed/M7lc1UVf-VE?cc_load_policy=1&cc_lang_pref=en)

**接口：**

```
var ytPlayer = new YT.Player(
    ...
    playerVars: {
        cc_load_policy: 1,
        cc_lang_pref: 'en'
    },
    ....
}); 
```

学分：[https ://webapps.stackexchange.com/questions/27669/is-there-any-way-to-force-subtitles-in-a-youtube-video](https://webapps.stackexchange.com/questions/27669/is-there-any-way-to-force-subtitles-in-a-youtube-video)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-29T01:46:34.593

我在他们的 api 文档中的任何地方都没有找到这个，但是使用您的 youtube 播放器对象，您应该能够执行以下操作将其更改为英文字幕：

```
player.setOption("captions", "track", {"languageCode": "en"});  //Works for html5 ignored by AS3
player.setOption("cc", "track", {"languageCode": "en"});  //Works for AS3 ignored by html5 
```

你也可以这样做：

```
var module;
if (testplayer.getOptions().indexOf("cc") !== -1) {
    module = "cc";
} else if (testplayer.getOptions().indexOf("captions") != -1) {{
    module = "captions";
}
var tracklist = testplayer.getOption(module, "tracklist");

// then iterate through the tracklist to see if "he" or "en" is there. 
```

你有 cc_load_policy=1 但你也可以通过 js 打开它：

```
player.loadModule("captions");  //Works for html5 ignored by AS3
player.loadModule("cc");  //Works for AS3 ignored by html5 
```

将其关闭：

```
player.unloadModule("captions");  //Works for html5 ignored by AS3
player.unloadModule("cc");  //Works for AS3 ignored by html5 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T19:14:33.290

我相信完全省略 hl= 会更好。（这实际上不是我们[官方支持的播放器参数](https://developers.google.com/youtube/player_parameters)之一。）字幕将默认为视频观看者的语言偏好，我的假设是如果没有观看者首选语言的字幕，它将使用英语。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-02T19:05:09.023

我发现的唯一方法是将 URI 从

```
https://www.youtube.com/watch?v=2s3aJfRr9gE 
```

对这个模式

```
"https://www.youtube-nocookie.com/embed/" + video_id + "?hl=" lang_code 
```

在 bash/Linux 上，您只需复制具有该结构的 URI，然后运行此命令（西班牙代码硬编码）来转换剪贴板内容（您可以创建别名）：

```
xclip -selection c -o | echo "$(cat -)?&amp;hl=es-419" | sed "s|youtube.com/watch?v=|youtube-nocookie.com/embed/|1" | xclip -selection c 
```

您可以使用[youtube-dl](https://ytdl-org.github.io/youtube-dl/index.html)列出可用的字幕[ISO 639-1 语言代码](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)：

```
youtube-dl --list-subs "{video_id or url}" 
```

唯一的缺点是视频将覆盖整个屏幕......这可能是停止拖延相关视频的好事:)

# redis - “来自程序集的‘ServiceStack.Redis.RedisNativeClient’类型中的方法‘Expire’

> ID：12685282
> 
> 赞同：1
> 
> 时间：2012-10-02T06:05:12.523
> 
> 标签：redis, servicestack

当我尝试在本地加载我的 webrole 时出现以下错误。

来自程序集“ServiceStack.Redis，Version=3.9.14.0，Culture=neutral，PublicKeyToken=null”的“ServiceStack.Redis.RedisNativeClient”类型中的方法“Expire”没有实现。

它昨天工作......有什么想法吗？

# fortran - ifort 上的螺纹 DGEMM

> ID：12685285
> 
> 赞同：1
> 
> 时间：2012-10-02T06:05:58.803
> 
> 标签：fortran, openmp, intel-fortran, intel-mkl

我已经实现了一个调用 DGEMM 的工作程序（FORTRAN，编译器：Intel ifort 11.x）。我读过有一种快速的方法可以通过编译来并行化：

```
ifort -mkl=parallel -O3 myprog.f -o myprog 
```

我有一个四核处理器，所以我使用（通过 bash）运行程序：

```
export OMP_NUM_THREADS=4
./myprog 
```

我的假设是 DGEMM 会自动调用 4 个线程，从而实现更快的矩阵乘法。这似乎没有发生。我错过了什么吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:57:06.403

我认为 -mkl=parallel 是英特尔编译器的默认选择。因此，您不必特别设置此标志。改用 -mkl=sequential 看看计算是否变慢。

# ruby-on-rails - 如何防止 rails 3.2 预编译单个图像？

> ID：12685294
> 
> 赞同：2
> 
> 时间：2012-10-02T06:07:38.857
> 
> 标签：ruby-on-rails, sass, compass-sass

我正在使用指南针进行精灵编译，我想知道如何防止未使用的图像在`rake assets:precompile`.

例如在我拥有的 sass 文件中。

```
@import "my-icons/*.png";
@include all-my-icons-sprites; 
```

资产预编译后，我得到编译的精灵图和所有编译的图像：

```
public/assets/my-icons-{hash}.png
public/assets/my-icons/2-{hash}.png
public/assets/my-icons/3-{hash}.png
public/assets/my-icons/4-{hash}.png
public/assets/my-icons/5-{hash}.png 
```

我的问题是如何停止预编译从编译单个图像`my-icons/`并仅编译单个精灵图以便我最终得到`public/assets/my-icons-{hash}.png`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:18:15.130

你不需要。这些图像（只是副本，具有新文件名）不会在您的页面中使用，因此不会提供服务，它们不会消耗带宽、内存或并行请求。

# linux - 确定两个 fd 是否重复？

> ID：12685309
> 
> 赞同：0
> 
> 时间：2012-10-02T06:09:37.610
> 
> 标签：linux, unix, file-descriptor

最好是可移植的，但至少在 Linux 下，有没有办法确定两个文件描述符是否重复引用相同的打开文件描述？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:55:31.087

简短的回答是否定的，这是不可能的。

# android - AndEngine LiveWallpaper UpdateHandler 停止

> ID：12685311
> 
> 赞同：2
> 
> 时间：2012-10-02T06:10:26.157
> 
> 标签：android, andengine, live-wallpaper, game-physics

我正在使用 AndEngine 动态壁纸。我制作了一个动态壁纸，我在其中注册了一个带有 sprite 的 updatehandler，它运行良好。设置此壁纸后，updatehandler 仍然可以正常工作，但是当我关闭屏幕并再次打开屏幕时，updatehandler 停止工作并且壁纸变得静止图片，不知道是什么问题，问题出在哪里，请帮忙，谢谢。

# jquery - 无法将 HTML 代码发布到 XSS 攻击服务器端

> ID：12685314
> 
> 赞同：0
> 
> 时间：2012-10-02T06:10:30.743
> 
> 标签：jquery, asp.net-mvc, xss

我有一个 ASP.NET MVC 4 项目，其中我在视图中使用 HTML 输入元素。该元素的值通过 JQuery post 调用发送到服务器。我没有使用任何 Razor 语法，也没有手动向 Controller 操作添加任何特殊代码。

当我将 post 参数之一设置为 HTML 代码时，调用将失败，返回 500 Internal Server Error。我的问题是，为了帮助防止 XSS 攻击，JQuery 是即时终止调用还是 ASP.NET MVC？其次，我将如何关闭此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:11:37.767

> JQuery 是即时终止调用还是 ASP.NET MVC？

他们都没有。它是 ASP.NET 引擎。这个*特性*早在 ASP.NET MVC 出现之前就已经存在于 ASP.NET 中，并且由于 ASP.NET MVC 是在 ASP.NET 之上构建的，因此它继承了它。

> 其次，我将如何关闭此功能？

通过装饰视图模型属性，您将使用属性绑定到该值`[AllowHtml]`：

```
public class MyViewModel
{
    [AllowHtml]
    public string Html { get; set; }
} 
```

现在您可以进行以下控制器操作：

```
[HttpPost]
public ActionResult SomeAction(MyViewModel model)
{
    ...
} 
```

您正在使用 jQuery.ajax 调用并发送任意 HTML 内容：

```
$.ajax({
    url: '@Url.Action("SomeAction")',
    type: 'POST',
    data: { html: '<div>Hello World</div>' },
    success: function(result) {

    }
}); 
```

显然，通过这样做，您完全承认用户可以向您的站点发送任意 HTML，包括脚本和所有危险内容。因此，为了防止 XSS 攻击，请确保您已正确编码此值，然后再将其显示回某个页面。

# jquery - jQuery定位

> ID：12685327
> 
> 赞同：-9
> 
> 时间：2012-10-02T06:11:53.540
> 
> 标签：jquery, hover

点击[这里](http://www.mbu.mn/test/ "jQuery 问题")！只需单击单击此链接。幻灯片搞砸了。

我上传了一张图片。

点击[这里查看图片](http://www.mbu.mn/test/123.png "jQuery 问题")！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:31:07.127

只需添加

```
left: 100px; 
```

到你的`#pageslide`CSS。

# c - C语言中函数的执行是从右到左还是从左到右？

> ID：12685329
> 
> 赞同：0
> 
> 时间：2012-10-02T06:12:24.727
> 
> 标签：c, function

> **可能重复：**
> [任何人都可以解释这些未定义的行为（i = i++ + ++i，i = i++ 等）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)
> [函数参数评估顺序](https://stackoverflow.com/questions/9566187/function-parameter-evaluation-order)

在此处输入代码在C语言中函数的执行是从右到左还是从左到右？我发现它是从右到左的。（函数的执行意味着它传递参数的顺序）。

所以我想知道c中是否有任何函数或任何内置函数从左到右执行？

例子：-

```
#include<stdio.h>
int print(int a,int b);
int main()
{
    int a=10,b=20;
    print(++a,a++);
    getch();
    return 0;
}

int print(int a,int b)
{
    printf("%d %d",a,b);
} 
```

因此，在此它从右侧开始并通过`a=10`比`a++`现在`a=11` 比现在比`++a`现在`a=12`比它在打印功能中传递`a=12`它打印`12 10`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T06:13:32.257

函数参数的求值顺序是**Unspecified**。
c 标准为实现提供了充分的自由来评估它们：

*   从左到右或
*   从右到左或
*   任何其他魔法命令

此外，实现不需要指定它遵循的顺序。

* * *

**参考：**

**C99 标准 6.5.2.2 函数调用**
**第 10 段：**

> 函数指示符、实际参数和实际参数中的子表达式的求值顺序未指定，但在实际调用之前有一个顺序点。

**C99 标准 3.19：**

> **本国际标准提供了两种或多种可能性并且在任何情况下都没有选择任何要求的 **未指定行为。****
> 
>  **示例未指定行为的一个示例是计算函数参数的顺序。**

# java - Java字符reverseBytes中的问题

> ID：12685332
> 
> 赞同：3
> 
> 时间：2012-10-02T06:12:39.673
> 
> 标签：java, netbeans, encryption, character-encoding

我正面临这个奇怪的问题。我使用该`"Character.reverseBytes(char ch)"`方法进行加密。它工作正常，在里面运行时`NetBeans`。但是每当我尝试在外面运行它时，它都会给出奇怪的输出。

我认为问题在于，在两种情况下，它使用了两种不同的编码方法（或类似的方法）。以下代码演示了该问题。

```
import java.io.File;
import java.io.PrintWriter;
import java.util.ArrayList;

public class Encryptor {

    public static String encode(String in) {
        ArrayList<Character> list = new ArrayList<Character>();
        for (int i = 0; i < in.length(); i++) {
            list.add(Character.reverseBytes(in.charAt(i)));
        }
        return arrayToString(list);
    }

    public static String decode(String in) {
        ArrayList<Character> list = new ArrayList<Character>();
        for (int i = 0; i < in.length(); i++) {
            list.add(Character.reverseBytes(in.charAt(i)));
        }
        return arrayToString(list);
    }

    private static String arrayToString(ArrayList<Character> list) {
        char[] ch = new char[list.size()];
        for (int i = 0; i < list.size(); i++) {
            ch[i] = list.get(i);
        }
        return String.copyValueOf(ch);
    }

    public static void main(String[] args) throws java.io.FileNotFoundException, java.io.IOException {
        String pass = "Password";
        String passEn = encode(pass);
        File file = new File(System.getProperty("user.dir") + "/pass.txt");
        file.createNewFile();
        PrintWriter pr = new PrintWriter(file);
        pr.write(passEn);
        pr.flush();
        passEn = new java.util.Scanner(file).next();
        String passDe = decode(passEn);
        String msg;
        msg = "Initial : " + pass
                + "\nEncrypted : " + passEn
                + "\nDecrypted : " + passDe;
        javax.swing.JOptionPane.showMessageDialog(null, msg);
    }
} 
```

首先我将加密的单词保存到一个文件中，然后尝试对保存的单词进行解码。这在上述两种情况下给出了两种不同的输出。

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T06:20:19.600

从根本上说，`Character.reverseBytes`是给你一个有点随意的 UTF-16 代码单元。无法保证您之后获得的字符将形成一个有效的字符串 - 例如，可能有“一半”代理对，或者在 Unicode 中没有任何特定含义的字符。

更重要的是，当您将“文本”写入文件并将其读回时，很有可能会得到不同的值——尤其是当您没有指定编码时。您使用的默认编码很可能不支持您最终使用的字符。

从根本上说，您不想这样做。字符串的加密基本上应该采用以下形式：

*   以固定编码（例如 UTF-8）将字符串编码为字节
*   加密二进制数据（请不要自己动手；Java 包含大量加密工具）
*   将加密的二进制数据传递到您需要的任何地方。如果您*必须*将二进制数据表示为字符串，请使用 base64 之类的东西来确保您以后可以恢复准确的二进制数据。

然后解密，你反转每个操作：

*   检索加密的二进制数据，这可能涉及从 base64 转换回来
*   根据您之前使用的任何加密算法执行适当的解密步骤（二进制到二进制）
*   使用您在开始时使用的相同编码将结果（仍然是字节）转换回字符串

将任意二进制数据视为文本 - 这实际上`Character.reverseBytes`是以一种非常粗略的方式正在做的事情 - 是一个非常糟糕的主意。

# android - 跨多个 Android 应用程序共享单个 SQLite 数据库。

> ID：12685338
> 
> 赞同：2
> 
> 时间：2012-10-02T06:13:32.027
> 
> 标签：android, sqlite, android-contentprovider, android-sqlite

如果用户在他的设备中安装了我的 android 应用程序（数据库大小为 300mb），我如何让我的所有其他应用程序或第三方应用程序自由访问数据库。ContentProvider 可能是一个解决方案，但我仍处于开发阶段，所以不知道有多少第三方应用程序将利用我的数据库来预先指定 AndroidManifest.xml 中的共享用户 ID

如果不是 SQLite，是否有任何替代 android 支持 DB 支持该要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:19:45.017

根据[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)最好将 sqlite 用于一台设备。

但是您要求为多个设备共享一个数据库。所以使用`Network Connection`并检查[连接到远程数据库](http://www.helloandroid.com/tutorials/connecting-mysql-database)

# android - Statelist 可绘制样式看起来像旧的 Android 2.2 样式

> ID：12685347
> 
> 赞同：0
> 
> 时间：2012-10-02T06:14:13.103
> 
> 标签：android, listview, drawable, statelistdrawable

我本质上是在尝试实现一个不会滚动的类似 ListView 的东西。（相关：[如何获得不可滚动的 ListView？](https://stackoverflow.com/questions/4338185/how-to-get-a-non-scrollable-listview)）。除了“点击”动画外，我几乎所有东西都在工作。

我的列表元素的基本小部件是`LinearLayout`. 我发现了这个不错的技巧，将背景可绘制设置为可选元素，并打开“可点击”。它工作正常，但风格似乎是旧的 Android 2.2，带有橙色渐变。

相关代码：

```
<LinearLayout
    android:id="@+id/listViewRow"
    android:background="@android:drawable/list_selector_background"
    android:clickable="true"
    ... > 
```

添加，

```
 style="@style/AppTheme" 
```

似乎没有帮助。提前致谢！

# android - 当我将视图添加到 LinearLayout 时，Android match_parent 不会改变高度

> ID：12685348
> 
> 赞同：1
> 
> 时间：2012-10-02T06:14:24.953
> 
> 标签：android, android-layout

我有`ListView`可能包含不同行数的项目（很少有键：值字段）。所以我`LinearLayout`在适配器的内部添加了行`getView`

现在我想`>`在垂直居中的列表项右侧绘制一个箭头。

这是我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/ListItemContainerBase"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="?activatableItemBackground"
    android:baselineAligned="true"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/list_item_middle_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:orientation="vertical" >
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/arrow_container"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentRight="true"
        android:layout_centerHorizontal="true"
        android:background="#bbbbbb" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:padding="8dip"
            android:src="@drawable/arrow" />
    </RelativeLayout>

</RelativeLayout> 
```

现在我的问题是：将视图添加到 list_item_middle_container 后，arrow_container 没有调整大小。它仅包装 ImageView 但不填充父高度。我尝试调用 requestLayout 并打开/关闭可见性，但没有结果。谢谢！

# ruby-on-rails - 如何根据 ruby on rails 中的验证错误结果执行不同的操作？

> ID：12685352
> 
> 赞同：0
> 
> 时间：2012-10-02T06:14:54.540
> 
> 标签：ruby-on-rails

我在用户模型中有一行在注册时验证电子邮件的以下内容

```
validates :email, presence: true, 
                uniqueness: { case_sensitive: false },
                length: { maximum: 254 } 
```

如果有错误，我会呈现带有错误消息的注册页面（“新”）： 在控制器中：

```
if @user.save
  redirect_to root_path
else
  render 'new'
end 
```

在视图中：

```
 <% if @user.errors.any? %>
   <div id="error_explanation">
      <p><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</p>
      <ul>
         <% @user.errors.full_messages.each do |msg| %>
           <li><%= msg %></li>
         <% end %>
      </ul>
   </div>
 <% end %> 
```

但是，如果用户输入的电子邮件地址不是唯一的，我想重定向到新页面。有什么办法可以做到这一点吗？如何修改控制器以针对这种特定类型的错误执行不同的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:21:20.240

[ActiveRecord 模型无效？](http://ar.rubyonrails.org/classes/ActiveRecord/Errors.html#M000305)似乎是你要找的

```
// in controller
redirect_to your_path if @user.errors.invalid?(:email) 
```

# javascript - HTML5 - 使用下拉菜单或单选按钮切换图像

> ID：12685355
> 
> 赞同：-1
> 
> 时间：2012-10-02T06:15:27.683
> 
> 标签：javascript, html

这可能是一个愚蠢而明显的问题，但有谁知道如何使用下拉菜单或单选按钮更改画布中显示的图像？

因此，如果我有一个红色的多云图像并且我想用一个绿色的多云图像替换它，使用下拉菜单/收音机，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:41:18.497

使用下拉菜单或单选按钮的 onChange-Event 并调用 javascript 函数，将图像的名称传递给它。

```
<input type="radio" name="cloud" value="red" onChange="javascript:imgChange('red.gif')"> Red cloud<br>
<input type="radio" name="cloud" value="blue" onChange="javascript:imgChange('blue.gif')"> Blue cloud<br>
<input type="radio" name="cloud" value="green" onChange="javascript:imgChange('green.gif')"> green cloud 
```

使用 javascript，您现在可以构建一个函数来更改图像。

```
function imgChange(var img){
    var c=document.getElementById("myCanvas");
    var ctx=c.getContext("2d");
    var img = new Image;
    // set your image according to the parameter
    ctx.drawImage(img,10,10);
} 
```

# android - 如何在 ListView 中使用 Intent

> ID：12685357
> 
> 赞同：1
> 
> 时间：2012-10-02T06:16:03.693
> 
> 标签：android, android-intent

在我的 Android 程序中，我列出了一些应用程序名称，例如

1.任务提醒 2.个人资料

现在我想点击这个列表并想进入这个应用程序。我已经为这两个程序编写了课程。谁能告诉我如何使用 Intent 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:29:41.437

使用它来将侦听器添加到您的列表视图

```
yourListViwObject.OnItemClickListener(this); 
```

当你使用它时，你的类将被提示实现 OnItemClickListener 。这样做，你的类会要求你添加未实现的方法。当你添加它们时，你会得到一个方法 onItemClick() 并实现你需要在这个方法中实现的东西，比如以下

```
 public void onItemClick(AdapterView arg0, View arg1, int arg2, long arg3) {

   Toast.makeText(this,
    "Item is clicked " + arg2,
    600).show();
   Intent i = new Intent(YourClass.this, TheActivityYouNeedToInvoke.class);
   startActivity(i);

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:22:20.847

```
list.setOnItemClickListener(new OnItemClickListener() 
        {
            public void onItemClick(AdapterView<?> arg0,
            View arg1, int position, long arg3) 
            {
                Intent n = new Intent(getApplicationContext(), profile.class);
                // you can pass the value to profile class using "n.putExtra(name, value);"
                startActivity(n);
            }

        }); 
```

# java - ArrayList 仅插入单个元素

> ID：12685358
> 
> 赞同：0
> 
> 时间：2012-10-02T06:16:17.737
> 
> 标签：java, collections

```
ArrayList<Fix> fixList = new ArrayList<Fix>();
StringTokenizer st = new StringTokenizer(idlist, ",");
int index = 0;
while(st.hasMoreElements()) {
    Long id = Long.parseLong(st.nextElement().toString());          
    fixList.add(index++,fixManager.getFixById(id));
} 
```

这里的 Arraylist 只能取一个元素。我调试了它，它只需要一个元素，但计数显示 arraylist 中有两个或多个元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:19:46.233

为什么不只添加元素而不定义索引？

```
fixList.add(fixManager.getFixById(id)); 
```

查看[http://javafiddle.net/jqPDma](http://javafiddle.net/jqPDma)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:19:56.840

用于`HashMap`您想要的任何类型的映射..

```
Map<Integer, Fix> fixList = new HashMap<Integer, Fix>();
StringTokenizer st = new StringTokenizer(idlist, ",");
int index = 0;
while(st.hasMoreElements()) {
    Long id = Long.parseLong(st.nextElement().toString());          
    fixList.put(index++,fixManager.getFixById(id));
} 
```

或者，如果您在对象`id`内部`Fix`..您可以简单地将`2nd`元素添加到列表中..您不需要`index`访问它们..

```
fixList.add(fixManager.getFixById(id)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:28:59.380

您确定 fixManager 为每个调用返回对象吗？如果您尝试添加 null，ArrayList 不会抱怨。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T06:32:37.370

你的语法是正确的，但你的方法

```
fixManager.getFixById(id) 
```

内部循环仅返回一个基于该 ID 的元素。

你可以看到，它通过调试`getFixById(id)`你的 fixManager 内部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T06:36:31.463

我尝试了以下代码

```
ArrayList <Integer> x = new ArrayList<Integer>();

    for(int i=0;i<15;i++)
    {
        x.add(i);
        x.add(i);

    }

    for(int i=0;i < x.size();i++)
    {
        System.out.println(x.get(i));
    } 
```

它工作正常。所以我认为 sou 应该检查你的 getFixbyID() 函数。我怀疑它是否在每次调用中都返回了新的 Fix 类型对象。

# regex - 正则表达式=>两个匹配之间的前瞻c#

> ID：12685360
> 
> 赞同：1
> 
> 时间：2012-10-02T06:16:23.953
> 
> 标签：regex, c#-4.0, lookahead

```
const string numericReg = "\\d+"; // Matches a digit character. Equivalent to [0-9].
const string realNumsReg = numericReg + b + "(\\." + b + numericReg + ")?";
        const string b = "\\s*"; 
```

这句话是真的：

```
 private const string rte = "(?<rate>" + realNumsReg + ")" +
                            "(?=(?<rte1>" + b + "qs " + "))"; 
```

和

这句话是真的：

```
 private const string barl = "(?<barl>" + numericReg + ")" +
                                    "(?=((?<q>" + b + "point to print )))"; 
```

这对于 rte 是正确的：

```
 MatchCollection s = Regex.Matches
                ("3000 qs / min", rte , RegexOptions.IgnoreCase); 
```

这对 barl 来说是正确的：

```
 MatchCollection s = Regex.Matches
                ("6 point to print  ", barl , RegexOptions.IgnoreCase); 
```

为什么这是错误的？

```
 MatchCollection s = Regex.Matches
                ("6 point to print  3000 qs/ min", barl+b+rte  , RegexOptions.IgnoreCase); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:32:08.390

第一个问题：3,000 中的逗号 (',')。第一个匹配项匹配“000 rds” 第三个 Regex.Matches 中没有匹配“3”的内容。

第二个（不太明显的问题）：

两个前瞻断言 (?= *expression* ) 是不匹配的断言，因此没有任何内容与第三个正则表达式中的第一个断言内的任何内容相匹配。

在你的情况下：'barl' + 'b' + 'rte'

'barl' 匹配 '6 buckets per mount' 中的 '6'，'b' 匹配 '6' 和 'barrels' 之间的空间（'barrels per mount' 由前瞻断言但不匹配）和 'rte ' 不能匹配后跟 'rds' 的数字。

只需从表达式中删除逗号和前瞻，您实际上并不需要它们，因为您感兴趣的组无论如何都已命名，并且它们匹配的内容可以从 Match 中的 Groups 集合中轻松获得。

改进：

1.  您可能想要更改 rte 以匹配 'qs/min' 中的 '/min' 而不仅仅是 qs。
2.  将 numericReg 更改为 @"\d+(,\d{3})*(.\d+)?" （匹配任意数量的数字，后跟零个或多个逗号，正好是 3 个数字组和一个或零组点，后跟数字）。此正则表达式匹配以下形式的数字：3000 3,000 3,000.0000

# asp.net-mvc - Cannot run MVC4 project if not using standard output directory

> ID：12685364
> 
> 赞同：14
> 
> 时间：2012-10-02T06:16:58.493
> 
> 标签：asp.net-mvc, asp.net-mvc-4

My project structure looks like this:

*   src
    -- class library 1
    -- class library 2
    -- web project
*   bin
    -- debug
    -- release

The default output directory for an MVC4 web project is `.\Bin\` (i.e. within the web project's directory), but I change it to something like `..\bin\debug\` or `..\bin\release\` to fit my above project structure. It compiles fine and the binaries go to the correct places.

But when I run the project it complains that `Could not load type Myproject.MvcApplication`, whereas if I don't make the above changes then it works.

*How do I control the location for the binaries?* I want the output directory to be completely separate from the source directories - it's easier to deploy and more secure because I don't have a mixture of source and binaries in one place.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T06:25:21.497

Short answer, you can't. It has nothing to do with Visual Studio or even .NET, it's an IIS restriction.

The reason is that IIS expects the bin directory to be directly under the web site folder location. This is a security mechanism that you cannot bypass. It's purpose is to prevent a compromised web site from "escaping" from the bounds of the root directly of the site.

Why would you even WANT to do this?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T02:09:48.340

I hit this as well, it is unexpected and confusing given that separation of debug and release binaries is standard practice and MVC has an output folder setting which makes it tempting to do so. It is possible to do this, see [here](https://stackoverflow.com/a/13263992/746754), but it is a bit ugly.

It seems that there is a conflict between adhering to the expectations of IIS and the need to keep debug and release separate and clearly labelled. I think that there is a need for both that the current solution doesn't satisfy very well. Debug and release are build time considerations, adhering to IIS is package/deploy time and the two have become confused.

# python - 正则表达式查找搜索词并将结果放在另一个数据文件中？

> ID：12685368
> 
> 赞同：1
> 
> 时间：2012-10-02T06:17:18.337
> 
> 标签：python, regex, scripting, python-2.7, cisco

不确定这个问题的标题是否正确，所以让我提供一些背景信息。我有两个文本文件。一个称为data.txt，另一个称为results.txt。在数据文件中，我有 Cisco 网络设备上“显示版本”的结果。它如下所示：

```
Cisco IOS Software, s72033_rp Software (s72033_rp-ADVIPSERVICESK9_WAN-M), Version 12.2(33)SXI4, RELEASE SOFTWARE (fc3)
Technical Support: http://www.cisco.com/techsupport
Copyright (c) 1986-2010 by Cisco Systems, Inc.
Compiled Sat 29-May-10 17:54 by prod_rel_team

ROM: System Bootstrap, Version 12.2(17r)SX6, RELEASE SOFTWARE (fc1)

 core-router uptime is 2 years, 5 weeks, 1 day, 5 hours, 47 minutes
Uptime for this control processor is 2 years, 5 weeks, 1 day, 4 hours, 50 minutes
Time since san-qrc1 switched to active is 2 years, 5 weeks, 1 day, 4 hours, 56 minutes
System returned to ROM by reload at 16:12:08 PDT Fri Aug 27 2010 (SP by reload)
System restarted at 16:19:33 PDT Fri Aug 27 2010
System image file is "sup-bootdisk:s72033-advipservicesk9_wan-mz.122-33.SXI4.bin"
Last reload reason: Reload Command

This product contains cryptographic features and is subject to United
States and local country laws governing import, export, transfer and
use. Delivery of Cisco cryptographic products does not imply
third-party authority to import, export, distribute or use encryption.
Importers, exporters, distributors and users are responsible for
compliance with U.S. and local country laws. By using this product you
agree to comply with applicable laws and regulations. If you are unable
to comply with U.S. and local laws, return this product immediately.

A summary of U.S. laws governing Cisco cryptographic products may be found at:
http://www.cisco.com/wwl/export/crypto/tool/stqrg.html

If you require further assistance please contact us by sending email to
export@cisco.com.

cisco WS-C6509-E (R7000) processor (revision 1.5) with 983008K/65536K bytes of memory.
Processor board ID XXXXXXXXXX
SR71000 CPU at 600Mhz, Implementation 0x504, Rev 1.2, 512KB L2 Cache
Last reset from s/w reset
35 Virtual Ethernet interfaces
51 Gigabit Ethernet interfaces
26 Ten Gigabit Ethernet interfaces
1917K bytes of non-volatile configuration memory.
8192K bytes of packet buffer memory.

65536K bytes of Flash internal SIMM (Sector size 512K).
Configuration register is 0x2102 
```

简单来说，就是我想读取data.txt，拉出某些字符串，放到results.txt中。CSV 格式会很好，但我很乐意只提取数据。

例如，脚本会提取相关数据，例如设备的主机名（在本例中为核心路由器）、系统映像文件名（s72033-advipservicesk9_wan-mz.122-33.SXI4.bin）、正常运行时间（2 年, 5 周, 1 天, 5 小时, 47 分钟), 序列号 (XXXXXXXX) 和型号 (WS-C6509-E)。所有这些信息将以制表符分隔的格式放入 results.txt 中。

将来，可以使用不同的 data.txt 文件，并将数据附加到 results.txt 中，为我提供数据点的运行统计。我希望这是有道理的。我尝试搜索我要查找的内容，但我发现的大多数内容要么是在文本文件中查找整行，要么是获取单词出现的索引号。

最后一件事：根据思科设备的型号，所有项目都会有所不同。它周围的单词通常是相同的，但我正在寻找的项目会有所不同。您能提供的任何帮助将不胜感激。提前致谢。

**更新**

我使用了您提供的脚本，但我仍然看到以下内容：

```
python
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> with open("data.txt") as infile:
...     text = infile.read()
... 
>>> import re
>>> regex = re.compile(
...     r"""^(?P<device>\S*)           # Match non-whitespace device name
...     \suptime\sis\s                 # Match " uptime is "
...     (?P<uptime>[^\r\n]*)           # Match until end of line --> uptime
...     .*?^System\simage\sfile\sis\s  # Match intervening text
...     "[^:]*:                        # Match from quote to colon
...     (?P<sifilename>[^"]*)          # Match everything until quote --> filename
...     .*?^cisco\s                    # Match intervening text
...     (?P<model>\S*)                 # Match non-whitespace model name
...     .*?^Processor\sboard\sID\s     # Match intervening text
...     (?P<serialno>[^\r\n]*)         # Match until end of line --> serial no""", 
...     re.DOTALL | re.MULTILINE | re.VERBOSE)
>>> match = regex.search(text)
>>> match.groups()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'NoneType' object has no attribute 'groups' 
```

问题是主机名缩进 1 个空格。当我粘贴它时，缩进消失了。但是，当发出“show version”命令时，会出现 1 个空格缩进。尝试运行上面的代码会破坏脚本。删除空间允许它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:32:01.817

您可以将文件读入这样的字符串：

```
with open("data.txt") as infile:
    text = infile.read() 
```

然后您可以使用正则表达式来提取相关信息：

```
import re
regex = re.compile(
    r"""^(?P<device>\S*)           # Match non-whitespace device name
    \suptime\sis\s                 # Match " uptime is "
    (?P<uptime>[^\r\n]*)           # Match until end of line --> uptime
    .*?^System\simage\sfile\sis\s  # Match intervening text
    "[^:]*:                        # Match from quote to colon
    (?P<sifilename>[^"]*)          # Match everything until quote --> filename
    .*?^cisco\s                    # Match intervening text
    (?P<model>\S*)                 # Match non-whitespace model name
    .*?^Processor\sboard\sID\s     # Match intervening text
    (?P<serialno>[^\r\n]*)         # Match until end of line --> serial no""", 
    re.DOTALL | re.MULTILINE | re.VERBOSE)
match = regex.search(text) 
```

现在`match.groups()`包含：

```
>>> match.groups()
('core-router', '2 years, 5 weeks, 1 day, 5 hours, 47 minutes', 
's72033-advipservicesk9_wan-mz.122-33.SXI4.bin', 'WS-C6509-E', 'XXXXXXXXXX') 
```

您可以使用它来写入 csv 文件，如下所示：

```
import csv
with open("results.txt", "a") as outfile:
    outcsv = csv.Writer(outfile)
    outcsv.writerow(match.groups()) 
```

# c# - 通过将两个列表与某些条件进行比较来过滤列表

> ID：12685369
> 
> 赞同：-1
> 
> 时间：2012-10-02T06:17:37.187
> 
> 标签：c#, asp.net, .net, linq

在通过 Linq 将两个列表进行比较之后，我想准备一个 CampaignDetails 类型的列表。您可以在下面看到代码片段：

```
List<CampaignDetails> str = service.GetActiveCampaignBySubCatId(lang, subCatId);  //List1
List<CampaignDetails> sploffer = service.GetSpecialOfferCampaignsForMobile(lang); // List2

List<CampaignDetails> CampList = new List<CampaignDetails>();        
foreach (var data in str)
{
    var CampL = (from offer in sploffer
                where offer.CampaignId != data.CampaignId
                select offer).ToList();
    CampList.Add(CampL);  // getting red mark here
} 
```

CampaignDetail 类：

```
public class CampaignDetail
{
    public int CampaignId { get; set; }
    public string CampaignName { get; set; }
    public string CampaignHeading { get; set; }
    public decimal OfferPrice { get; set; }
    public string CampaignDescription { get; set; }
} 
```

这里出了什么问题？我无法根据上面的代码片段过滤列表。我在以下位置收到编译器警告`CampList.Add(CampL);`：

> 'System.Collections.Generic.List.Add(CampaignDetails)-Method' 的最佳重载方法匹配有一些无效参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:20:48.370

使用此方法：

```
 CampList.AddRange(CampL) 
```

但是如果你使用 LINQ with`SelectMany`方法会更好：

```
var CampList = str.SelectMany(data => sploffer
                          .Where(offer => offer.CampaignId != data.CampaignId))
                  .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:21:05.650

Insetead 的`Add`使用[`AddRange`](http://msdn.microsoft.com/en-us/library/z883w3dc%28v=vs.80%29.aspx)方法将项目列表添加到现有列表中。

所以你的代码应该是：

```
foreach (var data in str)
{
    var CampL = (from offer in sploffer
                where offer.CampaignId != data.CampaignId
                select offer).ToList();
    CampList.AddRange(CampL);  // here change it to AddRange
} 
```

方法`Add`in`CampList.Add(CampL)`用于将单个项目添加到列表中。由于您在上面的查询中选择了项目列表 ( `CampL`)，因此您不能使用`Add`方法插入到现有列表中`CampList`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:21:14.990

确保 CampL 的类型为 CampaignDetails，然后您就可以将其添加到类型为 List 的 CampList。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T06:48:28.223

```
var CampList  = from data in str
                from offer in sploffer
                where offer.CampaignId != data.CampaignId
                select offer;

//in case you want to materialize it,
//or in case you really need a list,
//but this could be unnecessary
CampList = CampList.ToList(); 
```

# asp.net - 访问服务器中已发布的 mvc3 应用程序

> ID：12685370
> 
> 赞同：1
> 
> 时间：2012-10-02T06:17:41.317
> 
> 标签：asp.net, asp.net-mvc-3, deployment, webserver

我正在尝试发布我的 asp.net mvc3 Web 应用程序，这是我第一次发布。我已经能够在 iis 中发布应用程序，并且运行良好。但是当我将应用程序放入服务器时，网络中的其他计算机无法访问该页面。

```
401 - Unauthorized: Access is denied due to invalid credentials. 
```

我正在使用 Windows 7，v4.0 框架。

我的 web.config 作为身份验证设置为表单，它使用 asp.net 成员身份。

更新：

刚刚检查过，它在 windows xp、IIS5 中运行良好。客户端可以访问服务器中的应用程序。问题仅在 Windows 7、IIS7 中。

同样，没有身份验证的简单页面也可以在 Windows 7 和 iis7 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:32:06.393

这似乎是应用程序池的身份验证问题。检查您用于验证 IIS 中对应用程序的访问权限的用户是否有权访问该站点。

# php - 如何添加 jReject - jQuery 浏览器拒绝进入 Joomla1.5 网站

> ID：12685372
> 
> 赞同：2
> 
> 时间：2012-10-02T06:17:50.663
> 
> 标签：php, jquery, templates, frameworks, joomla

我想将 jReject - jQuery Browser Rejection 添加到我的 Joomla 网站中。我只是尝试将 JS 文件添加到我的模板文件夹中，但它对我不起作用。

[jReject - jQuery 浏览器拒绝](http://jreject.turnwheel.com/)

如何向我的网站添加浏览器兼容性警告。有什么建议么

我已添加`jquery.reject.js`并`jquery.reject.css`进入我的模板（龙门）

我`<head></head>`在我的 index.php 中放置了标签，并在这些标签中添加了以下内容：

```
<link rel="stylesheet" type="text/css" href="jquery.reject.css" />
<script type="text/javascript" src="templates/gantry/js/jquery.reject.min.js"></script>   
<script language="javascript" type="text/javascript">
        $(document).ready(function{
            $.reject({
                reject: {
                    safari: true, // Apple Safari
                    chrome: true, // Google Chrome
                    firefox: true, // Mozilla Firefox
                    msie: true, // Microsoft Internet Explorer
                    opera: true, // Opera
                    konqueror: true, // Konqueror (Linux)
                    unknown: true // Everything else
                }
            }); // Customized Browsers    
            return false;
        });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:11:56.303

请记住，Joomla 是随 Mootools 一起提供的。
您可能知道，Mootools 和 jQuery 都共享美元符号`$`作为其功能的简写，因此请记住调用`jQuery.noConflict()`，否则您将遇到一些错误。

由于您只想在某些页面上显示弹出窗口，因此您应该创建一个模块（可能处于隐藏位置）并将其分配给主页。
请注意，某些文本编辑器会删除您的 javascript，因此最好的办法是在没有任何编辑器的情况下编写纯文本。

希望这可以帮助。

# php - 具有无限选项的 Magento 可配置产品

> ID：12685373
> 
> 赞同：1
> 
> 时间：2012-10-02T06:18:04.003
> 
> 标签：php, magento, webshop, configurable-product

我有一个 Magento 网店，并且想要一个可配置的产品，其产品大小的属性值不受限制。我有一块可以按毫米订购的织物。所以有人可以订购50mm，也可以订购50000mm，真的没有限制。我怎样才能在 Magento 中做到这一点？我认为在可配置产品的下拉列表中添加数千个选项作为属性值不是一个好主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:27:37.747

我假设您的价格会根据用户输入的长度而有所不同。您需要在简单产品上使用“自定义选项”以允许用户选择以毫米为单位的长度。但关键是如何获得可变定价。我发现这个插件可能对你有用：http: [//www.micosolutions.com/magento-extensions/advanced-variation-pricing-for-magento](http://www.micosolutions.com/magento-extensions/advanced-variation-pricing-for-magento)

请注意，我与插件开发人员无关 - 我只是对如何解决您的问题感到好奇，并通过 Google 找到了这个。

# java - Servlet 未在浏览器中加载

> ID：12685377
> 
> 赞同：1
> 
> 时间：2012-10-02T06:18:20.437
> 
> 标签：java, jakarta-ee

我刚刚开始研究 servlet，我是新手。我开发了一个带有下拉菜单的 html 页面，用户可以从中选择啤酒的颜色，并且有一个调用 servlet 的提交按钮。这是它的 html 代码。

```
<html>
<head>
<title>Beer Selection</title>
</head>
<body>
<h2>Beer Selection Page</h2>
<p>Select beer charecteristics:</p>
<hr>
<form method="POST" action="SelectBeer.do">
    <b>Color :</b><!--Keeping it outside the form unnecessarily creates a line break between color and Drop-down menu-->
    <select name="color">
        <option>Light</option>
        <option>Brown</option>
        <option>Amber</option>
        <option>Dark</option>
    </select><br>
    <input type="SUBMIT" value="SUBMIT">
</form>
</body>
</html> 
```

我创建了以下部署描述符

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5">
<servlet>
<servlet-name>MyBeer</servlet-name>
<servlet-class>com.example.web.BeerSelect</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>MyBeer</servlet-name>
<url-pattern>/SelectBeer.do</url-pattern>
</servlet-mapping>
</web-app> 
```

我还成功编译了 BeerSelect.java servlet，其代码如下

```
package com.example.web;

import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;

public class BeerSelect extends HttpServlet
{
public void doPost(HttpServletRequest request,HttpServletResponse response)throws IOException,ServletException
{
    response.setContentType("text/html");
    PrintWriter out=response.getWriter();
    out.println("Beer Selection Advice<br>");
    String c=request.getParameter("color");
    out.println("<br>Got Beer color"+c);
}
} 
```

我正在使用 tomcat 7.0.21，并且创建了如下目录：tomcat/webapps/learning/Beer-v1/form.html 和
tomcat/webapps/learning/Beer-v1/WEB-INF/web.xml 和
tomcat/ webapps/learning/Beer-v1/WEB-INF/classes/com/example/web/BeerSelect.class
（学习只是一个文件夹，我将所有的小型 servlet 和 jsp 项目保存在 webapps 里面学习我有我的不同项目如 Beer-v1、DateDisplay、HotelMgmt 等）

现在，当我在 tomcat 中运行 form.html 时，它会正确显示，但是当我单击提交时，它会显示

```
HTTP Status 404 - /learning/Beer-v1/SelectBeer.do

type Status report

message /learning/Beer-v1/SelectBeer.do

description The requested resource (/learning/Beer-v1/SelectBeer.do) is not available.
Apache Tomcat/7.0.21 
```

我在做什么错。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:16:21.960

如果您将`Beer-v1`其作为 Tomcat 文件夹的直接子文件夹，它应该可以工作`webapp`。
然后尝试访问 [tomcaturl]/Beer-v1/[yourhtmlform].html。

因为您将 servlet 映射到上下文根（即`/`），所以没有`/learning/Beer-v1/SelectBeer.do`.

*恕我直言，将工作区文件夹结构放在*Tomcat 的 webapp 文件夹中并不是一个好主意。这是一个用于部署 webapps 的特殊文件夹，Tomcat 期望该文件夹具有一种标准结构（例如，根目录中的 WEB-INF）。

我认为最好使用 Eclipse 或自动将您的应用程序（从您的文件系统）部署到 Tomcat 的东西。通过这种方式，您可以随心所欲地管理您的工作区。

Eclipse 维护着一个所谓的“工作区”，它存储您使用它创建的所有项目。第一次启动 Eclipse 时，它​​会询问您将哪个文件夹用作工作区。然后，您可以在使用时命名您的“学习”文件夹。

当您将服务器执行环境添加到 Eclipse（例如 Tomcat 安装）时，您可以配置 Eclipse 的部署方式。默认配置是将 webapp 复制到 Eclipse 特定的工作区子文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:25:46.737

尝试在表单动作中添加斜线

```
action="SelectBeer.do" 
```

到

```
action="/SelectBeer.do" 
```

# mysql - mysql bin 日志模式自动递增

> ID：12685378
> 
> 赞同：0
> 
> 时间：2012-10-02T06:18:25.340
> 
> 标签：mysql, auto-increment, database-replication, mysqlbinlog

目前我们有一个数据库，其中 STATEMENT bin 日志格式可以正常工作。
现在我们正在添加一个具有自动增量值的新表。
此自动增量列对业务逻辑没有用处。
我们已将此添加为我们的主键的一部分。
这里 offer_expiry_time 是主键的第一部分，因为我们将所有查询都作为基于到期时间范围的范围查询。

假设我们的表格看起来像这样：

```
创建表 offer_expiry_info  
    offer_expiry_time BIGINT UNSIGNED NOT NULL null,  
    purchase_id INT UNSIGNED auto_increment,
    主键（offer_expiry_time，purchase_id），
    KEY idx_purchase_id (purchase_id)
)引擎 = INNOBB;

```

现在我们担心的是：

1.  STATEMENT 级别的 bin 日志格式是否适用于此表？（即使我们对跨复制的自动增量列的不同值也很好）。基本上 STATEMENT 级别会起作用吗？

2.  如果它有效，那么在启动失败的数据库机器时可能会出现什么问题？

3.  如果 STATEMENT 模式不起作用，那么我们可以单独为该表使用特定（MIXED）复制模式吗？同一个数据库中的其余表可以有STATEMENT模式吗？

4.  这可能是一个非常愚蠢的问题，因为我不知道 mysql 如何处理复制。是否可以根据查询类型指定复制模式？（对于插入查询执行 ROW 级复制，对于 DELETE 查询执行 STATEMENT 级复制）

    问题 4 是因为我们确实基于基于范围的删除来执行删除，因此如果我们可以对删除查询进行 STATEMENT 复制，将会有更好的性能。

```
DELETE FROM order_expiry_info WHERE offer_expiry_time "LESS THAN" SOME TIME

```

由于我们进行批量插入，因此 STATEMENT 级别的复制对我们有很大帮助。
是否可以让具有自动增量列的表具有 STATEMENT 级别的 bin 日志格式？

[已编辑] 此外，我们还有事务隔离级别的另一个问题。
错误：“无法获取错误二进制日志记录。消息：InnoDB 中的事务级别'REA D-UNCOMMITTED'对于二进制日志模式'STATEMENT'是不安全的”

有什么建议会很有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:24:38.083

是的，这些场景适用于语句二进制日志。

如果您可以访问日志，您将看到在每个语句之前记录了某些值，以确保正确保留时间戳和自动增量值等内容。

多年来，我一直在使用基于语句的复制，在这些领域中没有任何问题。我建议坚持这一点，并且仅在出现可能需要它们的特定性能情况时才考虑基于行或混合复制。

请注意，某些类型的使用对于基于语句的复制是不安全的，但简单的自动增量使用不是其中之一。

# javascript - 在Javascript中基于for循环显示div

> ID：12685379
> 
> 赞同：0
> 
> 时间：2012-10-02T06:18:36.303
> 
> 标签：javascript, html-table

我有选择框和一张表格，如果我从选择框中选择 2，则在选择框中我有 1 到 5 个数字，表格应该显示 2 次。

这是我的代码..

```
<script type="text/javascript">
$(document).ready(function(){
$('#Lessons').change(function(){
     var lesNum = $('#Lessons').val();
     for(k=1;k<=lesNum;k++){
         $("#xyz").css("display", "block");
     }
});
});
</script> 
```

我的表格代码在这里：

```
<select id="Lessons" name="Lessons">
   <?php for($j=1;$j<=5;$j++):?>
       <option value="<?=$j?>"><?=$j?></option>
   <?php endfor;?>
</select>
<div id="xyz" style="display:none;">
 <table>
   //some table data goes here.
 </table>
</div> 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:25:31.000

以下是您可以使用的：

**HTML**

```
<select id="Lessons" name="Lessons">
   <?php for($j=1; $j <= 5; $j++) {
        echo "<option value="$j">$j</option>";
        }
   ?> </select>
<div id="result"></div> 
```

**JavaScript**

```
$(document).ready(function(){
    var table = '<?php echo "<table></table>"; /* Generating the table */ ?>',
        parent = $('#result');
    $('#Lessons').change(function(){
        var lesNum = parseInt($('#Lessons').val(), 10);
        parent.empty();
        for(var k=1;k<=lesNum;k++){
            parent.append(table);
        }
    });
});​ 
```

我可以建议您远离全局变量（`k`在循环中）。​还有一个 JSFiddle 示例：http: [//jsfiddle.net/pWLhS/5/](http://jsfiddle.net/pWLhS/5/)

# java - 在同一个列表中返回两个不同的 bean

> ID：12685381
> 
> 赞同：1
> 
> 时间：2012-10-02T06:19:23.707
> 
> 标签：java, interface, polymorphism

我使用 MVC 在 Java 中开发 Web 项目。
我的问题是我需要从一个类中返回三个不同的 bean。所有三个 bean 都有多个对象，所以我现在将每个相同的 bean 对象添加到一个列表中并返回三个不同的列表。
好的，为了更清楚，我需要从存储评论的表中检索所有内容。所以所有评论文本都存储在一个名为comment 的bean 中，并添加到一个名为listcomment 的列表中。发表评论的成员名称被添加到另一个名为 member 的 bean 中，并且再次添加到名为 listmember 的列表中。
那么有什么可能的方法可以将这两个 bean 添加到同一个列表中？

```
public class TeleCommentView {

int qid;
TeleComment comment;
TeleHospital hospital;
doctorperson doctor;

ConnectionFile connection = new ConnectionFile();
List<TeleComment> listcomment = new ArrayList<TeleComment>();
List<doctorperson> listdoctor = new ArrayList<doctorperson>();
List<TeleHospital> listhospital = new ArrayList<TeleHospital>();

public TeleCommentView(int qid)
{
    this.qid = qid;
    process();
}
public void process()
{
    int count=0;
    try
    {
    Connection con = connection.connectionfile();
    PreparedStatement  pstmt = con.prepareStatement("select TeleHospital.HospitalName,DoctorDetail.Name,TeleComment.Comment,TeleComment.SDate from"
                                                     + "( (TeleComment left join TeleHospital on TeleHospital.HospitalId=TeleComment.Hid) "
                                                    + "left join DoctorDetail on DoctorDetail.DoctorId = TeleComment.Did) "
                                                    + "where TeleComment.Qid=?");
    ResultSet rs = pstmt.executeQuery();

    while(rs.next())
    {
        comment = new TeleComment();

        comment.setComment(rs.getString("Comment"));
        comment.setSdate(rs.getDate("SDate"));

        listcomment.add(count,comment) ;

        /******End of comment**************/

        //Add doctor or hospital name as required

        doctor = new doctorperson();
        hospital = new TeleHospital();

        if(rs.getString("HospitalName").equals(null))
            {
                doctor.setName(rs.getString("Name"));
                listdoctor.add(count,doctor);
            }
            else
                {
                    hospital.setHospitalname(rs.getString("HospitalName"));
                    listhospital.add(count,hospital);
                 }
        count++;
         }
    }
    catch(Exception ex)
    {
        ex.printStackTrace();
    }

}

  public List getCommentList()
  {
   return listcomment;
  }

 public List getDoctorList()
  {
   return listdoctor;
  }

 public List getHospitalList()
  {
   return listhospital;
  }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:21:34.000

如果不同的 bean 都包含某个方法（或多个方法），您可以创建一个`interface`并让每个 bean 实现它。

这是刚刚被问到的类似问题：

[对不同的对象一视同仁](https://stackoverflow.com/q/12684528/778118)

愚蠢的示例代码：

```
interface CommentItem {
    public String getComment();
}

class ModeratorComment implements CommentItem {
    public String getComment() {
        return "Comment from moderator";
    }
    // other moderator-specific code...
}

class StudentComment implements CommentItem {
    public String getComment() {
        return "Comment from student";
    }
    // other student-specific code...
}

class CommentContainer {

    private List<CommentItem> commentList;

    public List<CommentItem> getCommentList() {
        return commentList;
    }

    public void addComment(CommentItem someComment) {
        commentList.add(someComment);
    }
}

class TestIt() {

    public static void main(String[] args) {

        StudentComment sc = new StudentComment();
        ModeratorComment mc = new ModeratorComment();

        CommentContainer comments = CommentContainerFactory.createCommentContainer();
        comments.add(sc);
        comments.add(mc);

        for (CommentItem ci : comments.getCommentList()) {
            System.out.println(ci.getComment());
        }

    }

} 
```

# java - JSF rich:pickList 添加拖放？

> ID：12685389
> 
> 赞同：0
> 
> 时间：2012-10-02T06:20:18.213
> 
> 标签：java, jsf, drag-and-drop, richfaces

我的任务是通过拖放进行两个多项选择。

[我使用了此](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=pickList)示例中的 rich:pickList ，对其进行了自定义。现在我不仅想用按钮控制项目，还想拖放功能。找到[了这个](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=dragDrop&skin=blueSky)例子。

怎么可以一起用？而且我必须实现多个拖放，而不仅仅是一个元素，而是所有选定的项目。

有钱人能做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T17:50:41.773

我们切换到[primefaces](http://www.primefaces.org/)。它有更多的组件和拖放[选项列表。](http://www.primefaces.org/showcase/ui/picklist.jsf)

# sdk - 是否有适用于 SugarCRM 的 SDK？

> ID：12685395
> 
> 赞同：0
> 
> 时间：2012-10-02T06:20:47.543
> 
> 标签：sdk, sugarcrm

是否有适用于 SugarCRM 的 SDK？如果是这样，有人知道下载的地方吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:26:08.920

从评论中抽出，查看 SOAP/REST Web 服务文档。

[http://support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.5/02_Application_Framework#Web_Services](http://support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.5/02_Application_Framework#Web_Services)

# android - Android：用于访问和/或备份系统设置的 API

> ID：12685398
> 
> 赞同：1
> 
> 时间：2012-10-02T06:20:56.570
> 
> 标签：android, backup, settings

Android 是否将其所有系统设置存储在一个文件中？是否可以访问此文件并将其复制到 SD 卡。如果存在您可以调用的 API 将所有系统设置复制到 SD 卡并允许您从 SD 卡恢复这些设置，那就太好了。如果您想使用相同的系统设置设置新手机（或重置），这可能很有用。

不确定 getConfiguration 方法是否这样做。它的文档没有提供任何细节：

[http://developer.android.com/reference/android/provider/Settings.System.html#getConfiguration(android.content.ContentResolver](http://developer.android.com/reference/android/provider/Settings.System.html#getConfiguration(android.content.ContentResolver) , android.content.res.Configuration)

通过将此功能封装在 API 中，应用程序不必在每次发布包含新系统设置的新版本 Android 时自行更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:47:30.713

内部设置存储在数据库中，您可以通过设置内容提供程序访问它们。内容提供者强制执行权限：您需要一个权限才能使用它，一些设置是只读的，对于一些您需要另一个权限才能更改它们，还有一些只能由系统修改（即，使用设置应用程序 UI）。这是设计使然。直接更改和/或覆盖设置势必会破坏很多东西。此外，升级到新的操作系统版本会添加、删除或弃用设置，因此它会负责正确的迁移。同样，如果您升级操作系统，盲目覆盖可能会是一场灾难。

希望您现在明白为什么您提出的 API 是个坏主意。

Android 确实保存了一些设置，例如经常使用 WiFi 接入点和已安装应用程序列表（来自 Google Play），通过将它们与您的 Google 帐户相关联到“云”。如果您重置手机，这些设置会自动恢复。使用标准备份系统可以为用户应用程序实现相同的目标。

# android - android定价中的iText找不到类

> ID：12685399
> 
> 赞同：0
> 
> 时间：2012-10-02T06:20:57.667
> 
> 标签：android, itext

```
10-02 05:36:39.589: E/dalvikvm(2570): Could not find class 'org.bouncycastle.cms.CMSEnvelopedData', 
referenced from method com.itextpdf.text.pdf.PdfReader.readDecryptedDocObj 
```

logcat显示这种错误，我一直在谷歌搜索，仍然找不到解决方案。

这是源代码：

> MainActivity.java

```
import java.io.FileOutputStream;

import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;

import com.itextpdf.text.Document;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.pdf.PdfWriter;

public class MainActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        try {
            GenerarPDF();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
        public void GenerarPDF()throws Exception{
            Document document = new Document();
            String file = Environment.getExternalStorageDirectory().getPath() + "/Hello.pdf";
            PdfWriter.getInstance(document,new FileOutputStream(file));
            document.open();
            Paragraph p = new Paragraph("Hello PDF");
            document.add(p);
            document.close();
        } 
} 
```

这是我的 manifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.samplepdf"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

谁能指出这个问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:23:36.363

好像您没有使用 iText 的官方 Android 端口。官方端口不使用 BouncyCastle。它使用 SpongyCastle 来避免与 Android 随附的旧 BouncyCastle 版本发生冲突。使用官方端口，问题就会消失。

# ruby-on-rails - Rails：2单击一个提交按钮在两个数据库中插入记录（将一个控制器的记录保存在另一个控制器中）

> ID：12685407
> 
> 赞同：0
> 
> 时间：2012-10-02T06:21:36.540
> 
> 标签：ruby-on-rails, model, controller, save

我有 2 个模型对应于 2 个单独的数据库表。
一个是`task`，另一个是`bookedhour`

关系就像

```
Task: has_many booked_hours
BookedHour: belongs_to Task 
```

要创建任务，它需要从模型中为该任务**预订小时数。**`BookedHour`它采用新任务的形式，并`attr_accessor`在任务模型中声明。
现在我想存储该**任务**并**预订**保存任务的时间。（基本上我想保存新的`task`并`bookedHours`单击一次）

我在任务的创建方法中使用了以下代码，但它不起作用。我在保存后写了这一行`task(@task.save)`

```
BookedHour.create(:user_id => @user_id, :project_id => session[:actual_project].id, :hours_booked => params[:task][:spend_today]) 
```

我在控制台中得到了关注，但没有保存记录，`bookedhours`但它成功保存了新任务。

```
BookedHour Columns (0.7ms)   SHOW FIELDS FROM `booked_hours`      
  SQL (0.1ms)   BEGIN     
  SQL (0.0ms)   ROLLBACK 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:57:57.527

尝试

```
@task.booked_hours.create!(:user_id => @user_id, 
                           :project_id => session[:actual_project].id, 
                           :hours_booked => params[:task][:spend_today]) 
```

如果出现问题（如果事务回滚，则会出现问题），您将看到异常，您将能够解决它。

您可以发布 BookedHour 课程的验证部分吗？（类定义中所有以“belongs_to”、“validate_...”和“validates”开头的行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:47:01.977

创建实际上不会将记录保存到数据库中，您需要创建！创建和保存。

在 BookedHour.create 中也没有任何地方可以将任务记录与预定时间记录相关联。

尝试以下操作：

```
BookedHour.create!(
  :task_id => @task.id, 
  :user_id => @user_id, 
  :project_id => session[:actual_project].id, 
  :hours_booked => params[:task][:spend_today]
) 
```

# c++ - VideoCapture dosnt 从网络摄像头 openCV2.4.0 linux 读取

> ID：12685408
> 
> 赞同：1
> 
> 时间：2012-10-02T06:22:18.083
> 
> 标签：c++, linux, opencv, webcam

我正在尝试通过阅读 openCV 中的网络摄像头流来制作一些计算机视频。我已经尝试过使用内部网络摄像头和外部 USB 网络摄像头，它们都可以很好地与 camorama、streamer 等程序配合使用。

我的代码的一部分：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <iostream>
#include "pic_manipulation.hpp"
#include "colorDetector.h"
#include <time.h>
using namespace std;

int main ( int argc, char **argv ){
    string file="../test.avi";
    cv::VideoCapture capture(0);//les video
    if(!capture.isOpened()){
        cout <<"could not read file"<<endl;
        return -1;
    }   
    double rate=capture.get(CV_CAP_PROP_FPS);
    bool stop(false);
    cv::Mat frame;
    cv::namedWindow("Extract frame");
    int delay=1000/rate;
    while(!stop){
        if(!capture.read(frame))break;
        cv::imshow("Extract frame", frame);
        sleep(delay/1000);
        if(cv::waitKey(delay)>=0){
            cout<<"stop"<<endl;
            stop=true;
            capture.release();
        }
        cout<< "one loop finished"<<endl;
    }
    return 0;
} 
```

当我编译并运行程序时，我没有收到任何错误或警告，它只是在 if(!capture.isOpened()) 处返回（或者如果我跳过 isOpened 它在下一个 if(...) 处返回）。它可以毫无问题地读取视频文件。任何人都知道这是我安装的opencv的一些错误，还是导致问题的linux网络摄像头设置？我正在使用 linux mint 并使用 cmake/g++ 构建项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:38:51.867

再看看你的代码：

```
cv::VideoCapture capture(0);      // open the default camera
if(!capture.isOpened())           // check if it succeeded
{
  //...
} 
```

`isOpened()`索引失败的事实`0`告诉您它无法打开默认相机。由于您有其他相机连接到您的计算机，您也可以尝试传递`1`, `2`, `3`, ...

[检查文档](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=videocapture#videocapture)并了解每种方法的作用和返回总是很好的。

[这是受支持的网络摄像头列表，](http://opencv.willowgarage.com/wiki/Welcome/OS)您的某些摄像头可能不受 OpenCV 支持。这可以解释为什么默认相机不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T06:13:57.477

我按照这个优秀的指南安装 openCV 解决了这个问题：[在 Ubuntu 上安装和配置 OpenCV 2.4.2 的综合指南](http://www.ozbotz.org/opencv-installation/)

我怀疑我没有按照上述指南中的说明在 64 位平台上为构建 ffmpeg、v4l 设置正确的配置。无论如何，它终于奏效了！

# jboss - Glassfish 的 BPM

> ID：12685412
> 
> 赞同：1
> 
> 时间：2012-10-02T06:22:47.600
> 
> 标签：jboss, glassfish, jbpm, business-process-management

目前我们正在开发一个需要 JMS 的企业应用程序，因此我们决定获得一个符合 JavaEE6 的应用程序服务器，即 Glassfish 3.1.2.2。我们之所以选择它，是因为它是参考实现 (JavaEE6)（我想知道我们是否做出了正确的选择？）。

现在我们正在研究一种可以与 Glassfish 一起使用/集成的 BPM 技术，到目前为止，我只知道 JBPM 和 JBoss。

BPM有什么推荐吗？Glassfish 是正确的选择还是 JBoss 是更好的选择？请注意，我们买不起 Weblogic 或 Websphere，所以它们都不在图片中:-)。

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:46:31.437

如果您继续使用 jBPM5，则无需选择 jBoss。您可以在任何 Application Server 中使用 jBPM，因此您不必担心您选择的 Application Server。您可以将 jBPM 视为休眠，一个完全独立的框架，用于将 BPM 功能添加到您的应用程序中。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:44:04.730

熟悉 JBPM4，显然我在寻找类似的东西，所以我尝试了 JBPM5，但很明显它是完全不同的东西。在阅读了一些关于谷歌的文章后，我发现 JBPM5 实际上是 Drools。而 JBPM4 的继任者现在使用了不同的名称“Activiti”。所以我选择了 Activiti。[http://activiti.org/](http://activiti.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-06T15:00:26.687

我们花了很多时间让 jBPM 在 Glassfish 中运行，但没有成功！问题从持久性进程存储开始。kie-server.war 不能在 Glassfish 上部署，与 jbpm-console 相同。

不幸的是，直到今天，开发 Java EE 应用程序并不意味着它可以部署在所有应用程序服务器上。

# java - 如何在图像 clickEvent 上使用 BaseAdapter 的 getview 刷新列表视图

> ID：12685418
> 
> 赞同：0
> 
> 时间：2012-10-02T06:23:24.527
> 
> 标签：java, android

```
public View getView(final int position, View v, ViewGroup parent) {

    Teami = (LayoutInflater) contextTeam
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    v = Teami.inflate(com.yellowflag.activity.R.layout.yf_login3_list_row,
            null);
    TextView txtzmarket = (TextView) v
            .findViewById(com.yellowflag.activity.R.id.txtzmarket);
    TextView txtzname = (TextView) v
            .findViewById(com.yellowflag.activity.R.id.txtzname);
    final ImageView img_nfl_favoriteactive = (ImageView) v
            .findViewById(com.yellowflag.activity.R.id.imgfavoriteactive);
    ImageView nfllist_image = (ImageView) v
            .findViewById(com.yellowflag.activity.R.id.list_image);

    String s = TeamList.get(position).getTeamID();
    String lower = s.toLowerCase();

    int image_id = contextTeam.getResources().getIdentifier(lower + "_25",
            "drawable", contextTeam.getPackageName());
    nfllist_image.setBackgroundResource(image_id);
    txtzmarket.setText(TeamList.get(position).getMarket());
    txtzname.setText(TeamList.get(position).getName());

    if (selected[position] == 1) {
        img_nfl_favoriteactive.setSelected(true);
    }

    img_nfl_favoriteactive.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            for (int i = 0; i < TeamList.size(); i++) {
                selected[i] = 0;
            }

            img_nfl_favoriteactive.setSelected(true);
            selected[position] = 1;

        }
    });

    return v;
} 
```

我想使用 img_nfl_favoriteactive 刷新列表视图，这是我的行视图的图像视图，Clickevent 与 getview 方法。如何使用getview方法刷新这个使用android的clickevent请帮助我？同样，我也想知道如何在此列表视图中实现单项选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:32:26.037

> 适配器.notifyDataSetChanged()

用于刷新您的适配器，从而刷新您的列表视图。在您有兴趣的任何地方使用它

# php - pregmatch 多源

> ID：12685419
> 
> 赞同：1
> 
> 时间：2012-10-02T06:23:28.037
> 
> 标签：php, preg-match

如何精确匹配多个 img 标签实例？我阅读了一些关于 preg_match 的教程，但从来没有真正理解过。

我有这个作为我的基础：

```
<img src="http://example.com/1.png" alt="Example" />

<img class="Class" src="http://example.com/2.jpg" alt="Example 2" /> 
```

我做了一个小的像正则表达式：

```
<img (src="|class="Class" src=")http://.+\.(?:jpe?g|png)" alt=" 
```

在此之后，我被卡住了。如何继续匹配所有字符串直到两个字符串结束？

我发现了 PHP 网站本身的数组部分：

```
preg_match('@^(?:http://)?([^/]+)@i',
    "http://www.php.net/index.html", $matches);
$host = $matches[1]; 
```

使用我的代码，如何获取图像 URL 和 alt 标签？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:35:23.307

对于原始问题，使用`preg_match_all()`函数获取所有匹配项。

对于第二个问题（“使用我的代码，我如何获取图像 URL 和 alt 标签？”），基本上你的正则表达式是正确的。但是，我建议先获取整个`<img>`标签，然后再`preg_match()`获取`href`and`alt`属性，因为它们的顺序可能会有所不同。

```
$html = "<img src='test.jpg' alt='aaaaaaaaaaa!'>  adfa <img src='test2.jpg' alt='aaaaaaaaaaa2'>  ";

$pattern = '/<img\s[^>]*>/';
$count = preg_match_all($pattern, $html, $matches, PREG_SET_ORDER);

echo "Found: " . $count . "\n";
if ($count > 0) {
    foreach ($matches as $match) {
        $img = $match[0];
        echo "img: " . $img . "\n";
        if (preg_match("/src=['\"]([^'\"]*)['\"]/", $img, $val)) {  # UPDATE: use () to catch the content of src
            $src = $val[1];      # UPDATE: get the part in ()
        }
        if (preg_match("/alt=['\"]([^'\"]*)['\"]/", $img, $val)) {   # UPDATE
            $alt = $val[1];      # UPDATE
        }

        echo "src = " . $src . ", alt = " . $alt . "\n";
    }
} 
```

* * *

**更新**

回答您的评论。当然。只需使用一个组来捕捉后面的部分`src=`。我更新了上面的源代码并用“更新”进行了评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:35:25.543

为什么不`DOMDocument`呢？无论图像如何编写，您都可以获得所有属性：

```
$string = '<img class="Class" src="http://example.com/2.jpg" alt="Example 2" />';

$dom = new DOMDocument;
$dom->loadHTML($string);
$xpath = new DOMXPath($dom);

$query = '//img';
$elements = $xpath->query($query);

$attributes = array();
$i = 0;
foreach($elements as $one){
    foreach($one->attributes as $att){
        $attributes[$i][$att->nodeName] = $att->nodeValue;
    }
    $i++;
}
print_r($attributes);

/*Array
(
    [0] => Array
        (
            [class] => Class
            [src] => http://example.com/2.jpg
            [alt] => Example 2
        )

)*/ 
```

# php - Laravel 中的数组推送

> ID：12685420
> 
> 赞同：11
> 
> 时间：2012-10-02T06:23:31.267
> 
> 标签：php, mysql, arrays, laravel

我正在尝试将新数组项推送到现有数组变量中，该数组变量包含数据库中的项。我想要做的是在这个数组的末尾添加一个名为“Others”的新项目，并将其显示为视图中的选择下拉列表，其中包含数据库中的所有项目，并在最后选择“Others”项目我手动添加到我的控制器中。

这是我试图做的：

```
 $competition_all = Competition::all();
    $newCompete = array('name'=>'Others');
    array_push($competition_all, $newCompete);

    $this->competition_games = array('Competition');

    foreach ($competition_all as $competition_games) {
        $this->competition_games[$competition_games->name] = $competition_games->name;
    } 
```

它说的是这样的

> 未处理的异常
> 
> 信息：
> 
> 试图获取非对象位置的属性：
> 
> C:\xampp\htdocs\khelkheladi\khelkheladi\application\controllers\register.php 在第 104 行

在我的数据库中，竞赛具有这种类型的列结构

```
->id
->year
->place
->name
->created_at
->updated_at 
```

按照给定的顺序。

我想要做的是没有实际在数据库中插入一个项目，只是在视图中的选择标签中静态显示其他选择项目。如何插入这样的新项目而不实际将其插入数据库但仅显示在视图中？

我之前通过检索数据库项目得到的输出是这样的

```
<select>
  <option value="1">Value 1</option>
  <option value="2">Value 2</option>
  <option value="3">Value 3</option>
  <option value="4">Value 4</option>
</select> 
```

我喜欢做的就是这样

```
<select>
  <option value="1">Value 1</option>
  <option value="2">Value 2</option>
  <option value="3">Value 3</option>
  <option value="4">Value 4</option>
  <option value="5">Others</option>
</select> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T06:42:51.370

那是因为您要向数组的最后一个元素添加一个非对象。

在这里，我假设您得到一个具有 name 属性的对象数组

```
$competition_all = Competition::all(); 
```

在这里，您将 key=>value 对添加到 objects 数组的最后一个元素

```
$newCompete = array('name'=>'Others');
array_push($competition_all, $newCompete); 
```

在这里，您遍历对象数组，当涉及到最后一个元素时，“$competition_games->name”没有名称属性

```
foreach ($competition_all as $competition_games) {
            $this->competition_games[$competition_games->name] = $competition_games->name;
        } 
```

尝试为它包含一个标准类，例如：

```
$newCompete = new StdClass();
$newCompete->name = 'Others';
array_push($competition_all, $newCompete); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T06:39:29.527

做到这一点的“干净”方法是创建一个实例`Competition`而不将其提交到数据库，然后用额外的实例再次重复你的循环。

但是，在这里您似乎只是在生成一个列表，因此应该足以更快地添加到最终列表中：

```
// Empty array
$this->competition_games = [ 0 => 'Others' ];

foreach (Competition::all() as $game) {
    $this->competition_games[$game->id] = $game->name;
} 
```

使用 0（或 -1）作为不存在的 ID。

# c# - Web 用户控件成员变量在未声明为静态时不可访问

> ID：12685425
> 
> 赞同：0
> 
> 时间：2012-10-02T06:24:11.500
> 
> 标签：c#, asp.net, static, webusercontrol, member-variables

我正在使用 C# 创建一个 Web 用户控件来播放服务器中的一些 .wav 文件。以下是我的代码。

```
public partial class WaveFilePlayer : System.Web.UI.UserControl
{
    //private string[] files;
    private static string[] files;

    protected void ButtonLoad_Click(object sender, EventArgs e)
    {
        string resourcePath = ConfigurationManager.AppSettings["ResourcePath"];
        string searchPattern = ConfigurationManager.AppSettings["SearchPattern"];

        files = System.IO.Directory.GetFiles(path, searchPattern);
    }

    protected void ButtonPlay_Click(object sender, EventArgs e)
    {
        int selectedIndex = ListBoxFiles.SelectedIndex;

        SoundPlayer soundPlayer = new SoundPlayer(files[selectedIndex]);
        soundPlayer.Play();
    } 
```

如上面的代码所示，我声明`string[] files`为成员变量。然后我在`ButtonLoad_Click`方法中分配它。但是`NullReferenceException`当我尝试在`ButtonPlay_Click`方法中访问它时它会抛出一个，除非`string[] files`被声明为静态的。

这是否意味着`System.Web.UI.UserControl`在 asp.net 页面中加载用户控件时未创建新对象？这是否意味着当多个客户端（浏览器）尝试播放 .wav 文件时，`string[] files`在服务器上只创建一个实例供所有客户端使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:27:46.803

我怀疑问题不在于它根本无法*访问*。我强烈怀疑问题在于您有两个不同的请求，因此有两个不同的`WaveFilePlayer`- 所以当您执行时`ButtonPlay_Click`，该`files`变量将为 null ，除非您编写了一些代码来在请求之间保留它。

此处的选项将是视图状态或某些服务器端会话。您不应该*使用*静态变量，因为这基本上意味着您在*所有*请求（所有用户）之间共享了一个变量。

# haskell - 如何在反应香蕉中实现游戏循环？

> ID：12685430
> 
> 赞同：20
> 
> 时间：2012-10-02T06:24:59.487
> 
> 标签：haskell, reactive-banana

这个问题专门针对具有物理和视觉组件（例如游戏）的反应性香蕉和实时模拟。

根据[修复您的时间步长！](http://gafferongames.com/game-physics/fix-your-timestep/)设置游戏循环的理想方式（假设物理需要可重现），您需要帧之间的固定时间步长。在考虑了一些真正的复杂性之后，作者得出了这个游戏循环：

```
double t = 0.0;
const double dt = 0.01;

double currentTime = hires_time_in_seconds();
double accumulator = 0.0;

State previous;
State current;

while ( !quit )
{
     double newTime = time();
     double frameTime = newTime - currentTime;
     if ( frameTime > 0.25 )
          frameTime = 0.25;   // note: max frame time to avoid spiral of death
     currentTime = newTime;

     accumulator += frameTime;

     while ( accumulator >= dt )
     {
          previousState = currentState;
          integrate( currentState, t, dt );
          t += dt;
          accumulator -= dt;
     }

     const double alpha = accumulator / dt;

     State state = currentState*alpha + previousState * ( 1.0 - alpha );

     render( state );
} 
```

概要是物理模拟总是以相同的时间增量 ( `dt`) 为数值稳定性。安排这一点必须考虑到物理和视觉效果可能会以不同的频率更新，并且您不想落后太远。

例如，您可能希望以 20hz 的频率进行更新，但以 60hz 的帧速率进行视觉更新。该循环对物理场进行线性插值，以弥补物理场更新和图形更新之间的差异。

此外，当帧之间的时间差远大于`dt`有一个循环来处理以`dt`. 关于死亡螺旋的注释只是指您的物理计算根本无法跟上所需的更新频率的情况，因此您允许它跳过一些更新。

对于本次讨论，我最感兴趣的部分是安排对物理引擎的调用（对 的调用`integrate`）总是由`dt`. **reactive-banana**是否允许用户编写这种样式循环？如果有怎么办？也许一个做实时物理模拟的例子是有序的（或已经存在的）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-02T17:14:22.863

> 对于本次讨论，我最感兴趣的部分是安排对物理引擎的调用（对集成的调用）始终由 dt 执行。reactive-banana 是否允许用户编写这种样式循环？

是的，reactive-banana 可以做到这一点。

这个想法是你编写一个自定义事件循环并将响应香蕉挂钩。该库不对您从何处获取事件做出任何假设，它“仅”解决了根据现有事件整齐描述新事件的问题。特别是，您可以使用该`newAddHandler`函数创建两个回调函数，在事件循环中的适当位置调用它们。从本质上讲，reactive-banana 只是编写维护状态的普通回调函数的一种令人难以置信的方法。何时以及如何调用这些函数取决于您。

这里有一个大致的概述：

```
-- set up callback functions
(renderEvent, render) <- newAddHandler
(stateUpdateEvent, stateUpdate) <- newAddHandler

-- make the callback functions do something interesting
let networkDescription = do
    eRender      <- fromAddHandler renderEvent
    eStateUpdate <- fromAddHandler stateUpdateEvent
    ...
    -- functionality here

actuate =<< compile networkDescription

-- event loop
while (! quit)
{
    ...
    while (accumulator >= dt)
    {
        stateUpdate (t,dt)      -- call one callback
        t += dt
        accumulator -= dt
    }
    ...
    render ()                   -- call another callback
} 
```

* * *

事实上，我已经为旧版本的响应式香蕉编写了这种风格的[游戏循环示例](https://gist.github.com/3821030)，但还没有开始完善并在 hackage 上发布它。我希望看到完成的重要事情是：

*   选择一个易于安装并在 GHCi 中工作的图形引擎。这个概念使用了 SDL，但这真的很尴尬，因为它不能从 GHCi 中使用。像 OpenGL + GLFW 这样的东西会很好。
*   提供一个小的抽象，以便更容易编写插值阶段。可能只有两件事：`eTimer :: Event t ()`代表常规物理更新的事件和`bSinceLastTimer :: Behavior t TimeDiff`测量自上次物理更新以来的时间的行为，可用于进行插值。（这是一种行为而不是事件，因此内部“绘制这个！”更新是透明的。）

Andreas Bernstein 的[使用响应式香蕉的停电克隆](https://github.com/bernstein/breakout)可能是实现这种风格的一个很好的例子。

# python - Django Admin 输入 DateTime 的时区并在其中显示

> ID：12685432
> 
> 赞同：2
> 
> 时间：2012-10-02T06:25:25.617
> 
> 标签：python, django

我将让用户将事件输入我们的管理员（Django 1.4）。如果他们可以输入日期/时间并选择将在其中发生和显示的时区，那将是最直观的。

也就是说，我希望他们能够以某种方式指定“此事件将在 11 月 2 日美国东部标准时间下午 4:00 发生”，并确保它显示在该时区。

管理员似乎还没有任何处理时区条目或为日期时间字段指定时区的能力，所以我不太确定如何执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:55:46.647

Django在 1.4 中添加了对模型日期时间对象的[时区支持。](https://docs.djangoproject.com/en/1.4/releases/1.4/#support-for-time-zones)

但是，我没有使用它，我不确定它是否允许在管理员中或创建 ModelForm 时自动设置时区。

了解正在发生的事情很重要，一旦你掌握了正在做的事情，你最好使用 django 的时区支持。

忽略内部 django 支持，我会用这样的方法来解决问题：

```
from pytz import all_timezones, timezone

TIMEZONES = zip(all_timezones, all_timezones)

class EventModel(models.Model):

    dt = models.DateTimeField() # user entry
    tz = models.CharField(max_length=150,
                          choices=TIMEZONES) # user entry

    def get_dt_in_user_timezone(self, user_profile):
        event_tz = timezone(self.tz)
        event_dt = event_tz.localize(self.dt) # assign timezone to datetime

        # convert registered datetime to utc
        # --> This can probably be bypassed
        utc_dt = event_dt.astimezone(pytz.utc) 

        # convert to user's time defined in profile
        user_tz = timezone(user_profile.tz)
        return utc_dt.astimezone(user_tz) 
```

在 python 中处理时区时，您将需要[pytz](http://pytz.sourceforge.net/)。

# nservicebus - 自托管 NServiceBus 不读取队列

> ID：12685437
> 
> 赞同：0
> 
> 时间：2012-10-02T06:26:09.593
> 
> 标签：nservicebus

我在 MVC4 应用程序中运行自托管的 NSB 3.2.8，这是我的配置：

```
Configure.With()
.DefiningMessagesAs(t => t.Namespace != null && namespaces.Contains(t.Namespace))
.CastleWindsorBuilder(container)
.XmlSerializer()
.Log4Net()
.MsmqTransport()
    .IsTransactional(true)
    .IsolationLevel(IsolationLevel.ReadUncommitted)
    .PurgeOnStartup(false)                  
.UnicastBus()
.ImpersonateSender(false)
.CreateBus()
.Start(); 
```

我可以`IBus`在我的控制器中添加一个依赖项并将消息发送到队列中，`Bus.SendLocal()`但队列没有被读取，也没有创建 log4net 日志文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:55:30.277

您没有提及您希望它从哪个队列中读取。由于 MVC 托管的应用程序没有`IConfigureThisEndpoint`用于推断端点名称的类，因此您应该立即使用它`.DefineEndpointName("MyEndpoint")`来`Configure.With()`执行此操作 - 如果适用，这将为输入队列设置名称。

我看到的另一个问题是，在`.UnicastBus()`您需要调用`.LoadMessageHandlers()`来声明您在 MVC 应用程序中处理消息的意图之后。很多时候，Web 应用程序将是仅发送端点，因此无需创建输入队列或处理来自它的任何消息。调用此方法将扫描您的类型以查找消息处理程序，并开始从队列中读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:56:02.900

我认为你需要使用`Configure.WithWeb()`

另外，您如何定义端点的名称？

# java - java - 如何在将元素添加到Java中的另一个列表时从列表中删除元素？

> ID：12685438
> 
> 赞同：0
> 
> 时间：2012-10-02T06:26:12.827
> 
> 标签：java, list

我有两个类型列表`List<Integer[]>`：`A.Unassigned`和`A.Shanghai`。

我尝试了以下方法：

```
Iterator<Integer[]> UnassignedIt = A.Unassigned.iterator();
A.Shanghai.add(UnassignedIt.next());
UnassignedIt.remove(); 
```

但它给出了一个`NoSuchElementException`：

> java.util.AbstractList$Itr.next 处的 java.util.NoSuchElementException（未知来源）

[我该如何解决这个问题？]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:32:12.713

检查此代码：

> 列表 listA = new ArrayList(); listA.add(1); listA.add(2); listA.add(3);

```
 List<Integer> listB = new ArrayList<Integer>();

    Iterator<Integer> iterator = listA.iterator();
    while(iterator.hasNext()){
        Integer obj = iterator.next();
        listB.add(obj);
        iterator.remove();
    } 
```

`java.util.NoSuchElementException`如果您尝试访问（使用`iterator.next()`）的列表为空，则会发生这种情况。所以最好检查一下`iterator.hasNext()`之前是否这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T06:40:49.367

在调用之前检查迭代器是否有下一项`next()`：

```
Iterator<Integer[]> it = A.Unassigned.iterator();
while (it.hasNext()) {
    Integer intArray = it.next();
    A.Shanghai.add(intArray);
    it.remove();
} 
```

此外，[文档](http://docs.oracle.com/javase/tutorial/collections/interfaces/collection.html)可能会有很大帮助。并考虑评论、命名约定等。

# php - 需要上传2MB以上的图片

> ID：12685443
> 
> 赞同：0
> 
> 时间：2012-10-02T06:26:30.170
> 
> 标签：php

我已将 PHP.ini 中的配额更改为 upload_max_filesize 的 10 MB。我无法在 PHP 中上传超过 2MB 的图像。

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T06:28:23.603

您应该首先检查服务器的设置。它们是否正确并且超过 2MB？

```
echo ini_get('post_max_size');
echo ini_get('upload_max_filesize'); 
```

如果它较低，您可以通过以下方式更改它

```
ini_set('upload_max_filesize', '8M'); 
```

或通过 htaccess（如果您的服务器允许）

```
php_value upload_max_filesize 20M
php_value post_max_size 20M
php_value max_execution_time 200
php_value max_input_time 200 
```

为了完整起见，您可以将**php.ini**设置编辑为

```
upload_max_filesize = 8M
post_max_size = 8M 
```

* * *

要检查的另一件事是您的表单代码是否具有正确的属性

```
 method="POST" enctype="multipart/form-data" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T06:29:18.550

1）您需要将以下变量更改为您的 php.ini 文件。

```
upload_max_filesize from 2MB to 4MB or 8MB 
```

2）或者您也可以将其设置为php文件

```
ini_set('upload_max_filesize', '4M'); 
```

3）或者你也可以使用 .htaccess 文件

```
php_value upload_max_filesize 4M 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T06:44:40.263

并查看 php.ini 中的下一行：

```
max_execution_time 
max_input_time 
set_time_limit 
```

因为您可能与服务器连接不良。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T06:29:24.930

您需要在 php.ini 文件中设置 upload_max_filesize

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T06:46:31.900

您好，问题已解决。我只是重新启动我的服务器。现在它的工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T06:30:49.703

需要编辑 php.ini 文件。并将其设置 `upload_max_filesize`为您自己的

# playframework-2.0 - Play 2 Css / JS minifiaction 和 concatenation

> ID：12685445
> 
> 赞同：5
> 
> 时间：2012-10-02T06:26:44.337
> 
> 标签：playframework-2.0

是否有一些内置工具或插件可以将我的所有页面脚本保存在一个文件中？我在播放邮件列表中找到了一些主题，但它们都没有回答这个问题。

此外，在某处深处还有谷歌闭包编译器，但看起来除了框架开发人员之外没有人真正知道如何使其工作。

无论如何，如果有一些工具至少能够将我所有的 css 连接到一个文件中，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T11:03:02.760

您是否阅读过[Closure 的文档](https://github.com/playframework/Play20/wiki/AssetsGoogleClosureCompiler)？它说：

> 'app/assets' 中存在的任何 JavaScript 文件都将由 Google Closure 编译器解析，检查错误和依赖关系，如果在构建配置中激活，则将其缩小。

注意：我没有检查它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-05T16:32:43.197

我正在开发一个插件，它可以进行 javascript 连接、缩小和 gzip 压缩，以替代内置的 Assets 控制器，我们在我们的应用程序中使用它。它为 Play 2.2.1 设置，也许它会对你有所帮助。

[https://github.com/edeustace/assets-loader](https://github.com/edeustace/assets-loader)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-17T08:47:44.463

我认为您应该使用集成在 Play 框架中的 RequireJS。它在以下链接中进行了描述： - [Stackoverflow 问题](https://stackoverflow.com/questions/17283864/how-to-use-multiple-main-js-files-for-requirejs-in-play-framework-2-1-1-java) -[播放框架 RequireJS 支持](http://www.playframework.com/documentation/2.1.0/RequireJS-support)

我找到了 Play 1.x 系列的一个模块，这似乎是我们需要的：

[最小化 javascript/css 文件“按下”模块](https://www.playframework.com/modules/press)

在我的 Play 2.x 项目中，我们使用视图来连接多个 javascript 文件。它禁用了缩小，但在 javascript 重用和文件组织方面非常有用。对于 css，您也可以使用此方法。

名为 JavascriptRoutes 的控制器获取脚本内容并将其放入模板中：

```
package controllers

import play.api.Play
import play.api.templates.Html

/**
 * Created by dnoz on 30/06/2014.
 */
object JavascriptRoutes {
  def javascriptRouter(scriptName :String): String = {
    val scriptFile = Play.getFile("app/assets/javascripts/" + scriptName)(Play.current)
    val bufferScriptFile = scala.io.Source.fromFile(scriptFile, "utf-8")
    val reformatedScriptContent = bufferScriptFile.mkString
    reformatedScriptContent
  }
} 
```

这是脚本视图的一部分的示例：

```
<script type='text/javascript'>
$(function(){
  @Html(JavascriptRoutes.javascriptRouter("backboneClasses/StoredObject/storedObject.model.js"))
  @Html(JavascriptRoutes.javascriptRouter("backboneClasses/Form/form.view.js"))

  //script specific to the view itself:
  var toto = new Object;
  //...
});
</script> 
```

所以脚本完全显示在最终的 HTML 文件中，没有缩小。如果您使用 gzip http 请求发送结果 html，则不必缩小（但总是更好）。

# .htaccess - URL重写，保留自然路径

> ID：12685448
> 
> 赞同：0
> 
> 时间：2012-10-02T06:27:01.950
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我正在为运行多个 JS 应用程序包的系统编写默认的 .htaccess。我希望 URL 重写以从根目录转发以运行这些应用程序（即，如果系统包含在*www/*中，则*www/appname/*应该转发到*server.index.php?app=appname*）。

这大致是我现在所拥有的（我将跳过我的 .htaccess 中的其他内容）。

```
RewriteRule ^use/?([^/]*)/?([^/]*)/?([^/]*)/? \server/index.php?app=$1&servable=$2&action=$3
RewriteRule ^web/?([^/]*)/? \server/index.php?servable=clients&action=web&app=$1 
```

如您所见，我目前使用两个端点：*使用*转发到后端的任何操作，而*Web*转发到实际将应用程序本身作为 HTML 文档提供服务的操作。**在后一种情况下，我基本上想跳过 URL 中的*web/*前缀，但不会妨碍对系统目录中已经存在的自然目录的访问。**

这是[完整的来源](https://bitbucket.org/Eiskis/proot/src/3f46120eae37/.htaccess "完整来源")。（如您所见，我的 .htaccess 可能还有其他问题，所以如果您有任何指示，我很乐意修复它们。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:45:55.673

> 在后一种情况下，我基本上想跳过 URL 中的 web/ 前缀，但不会妨碍对系统目录中已经存在的自然目录的访问。

您可以使用条件标志`-f`和`-d`. **因此，如果您在/web**规则上方包含这些条件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

意味着请求的 URI 不映射到现有文件或目录，然后：

```
RewriteRule ^/?([^/]*)/? \server/index.php?servable=clients&action=web&app=$1 
```

除了没有这`/web`部分。

# c# - 如何在我的 ASP.NET 应用程序中长时间使用 Session

> ID：12685451
> 
> 赞同：1
> 
> 时间：2012-10-02T06:27:09.050
> 
> 标签：c#, asp.net, session, cookies, browser

我有一个使用会话的 ASP.NET 应用程序。在本次会议中，我获得了示例的语言。

例子：

```
Session["language"] = language; 
```

然后在我的代码的另一个区域中使用...

```
language = Session["language"].toString(); 
```

它工作正常，但用户在后台使用应用程序打开了一个 feu 小时的浏览器，然后会话不起作用:(

为什么它不起作用以及我如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:32:26.893

我建议您将值保存在 cookie 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T06:34:52.440

您有两个选项可以使用[cookie](http://msdn.microsoft.com/en-us/library/aa289495%28v=vs.71%29.aspx)或增加会话超时设置。

您可以通过增加`web.config`.

```
<configuration>
  <system.web>
  ...
   <sessionState timeout="90" />
  ...
 </system.web>
</configuration> 
```

在我看来，使用 cookie 是一种更好的方法。

> [ASP NET Cookie 初学者指南](http://www.codeproject.com/Articles/31914/Beginner-s-Guide-To-ASP-NET-Cookies)

# c# - 为什么使用虚拟方法

> ID：12685452
> 
> 赞同：2
> 
> 时间：2012-10-02T06:27:12.233
> 
> 标签：c#

> **可能重复：**
> [什么是虚拟方法？](https://stackoverflow.com/questions/622132/what-are-virtual-methods)

在 C# 中，即使您不将基类方法声明为虚拟方法，编译器也会在方法签名匹配时调用最新的派生类方法。如果没有 virtual 关键字，我们只会收到警告消息，说明将调用派生方法（现在可以使用 new 关键字将其删除）。

如果没有 this 关键字，当签名匹配时调用最后一个派生类中的方法时，将方法声明为虚拟方法有什么用。

我不明白这里的东西。“虚拟”是为了代码可读性目的吗？史密斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T06:50:28.477

这并不是关于“最新的派生方法”。这是关于当你使用多态性时会发生什么。`virtual`当您在预期父类的上下文中使用派生类的实例时，如果您不使用/ ，它将调用父类的方法`override`。

例子：

```
class A
{
    public int GetFirstInt() { return 1; }
    public virtual int GetSecondInt() { return 2; }
}

class B : A
{
    public int GetFirstInt() { return 11; }
    public override int GetSecondInt() { return 12; }
}

A a = new A();
B b = new B();

int x = a.GetFirstInt(); // x == 1;
x = a.GetSecondInt();    // x == 2;
x = b.GetFirstInt();     // x == 11;
x = b.GetSecondInt();    // x == 12; 
```

但有以下两种方法

```
public int GetFirstValue(A theA)
{
   return theA.GetFirstInt();
}

public int GetSecondValue(A theA)
{
   return theA.GetSecondInt();
} 
```

有时候是这样的：

```
x = GetFirstValue(a);   // x == 1;
x = GetSecondValue(a);  // x == 2;
x = GetFirstValue(b);   // x == 1!!
x = GetSecondValue(b);  // x == 12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:29:54.450

> 可以重新定义虚拟方法。在 C# 语言中，virtual 关键字指定可以在派生类中重写的方法。这使您能够添加新的派生类型，而无需修改程序的其余部分。因此，对象的运行时类型决定了你的程序做什么。

您可以查看详细[示例](http://www.dotnetperls.com/virtual)。

```
public class Base
{
  public int GetValue1()
  {
    return 1;
  }

  public virtual int GetValue2()
  {
    return 2;
  }
}

public class Derived : Base
{
  public int GetValue1()
  {
    return 11;
  }

  public override int GetValue2()
  {
     return 22;
   }
}

Base a = new A();
Base b = new B();

b.GetValue1();   // prints 1
b.GetValue2();   // prints 11 
```

# winapi - Win32 - 使对话框需要焦点/动作

> ID：12685463
> 
> 赞同：0
> 
> 时间：2012-10-02T06:28:39.343
> 
> 标签：winapi, dialog, focus, require, z-order

在 Win32 编程中，MessageBox 函数会启动一个需要操作的对话框，在您按下“确定”之前，您不能将焦点放在应用程序中的另一个窗口上。好吧，我有一个在 Visual Studio 2008 的资源编辑器中设计的对话框，问题是我可以单击启动它的菜单项，而当该对话框仍在显示时，我可以再次单击它并显示另一个其中。我也可以在对话框打开时使用我的应用程序的其余部分。

我想让用户必须在我的自定义对话框上按“确定”或“取消”才能在应用程序中执行任何其他操作，就好像它是一个 MessageBox。我将如何做到这一点？我可以在 Dialog 资源上设置特定的 windows 样式或 ex-style 吗？我试过 WS_TOPMOST 但没有效果，我不知道还能尝试什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:35:08.870

您的对话框需要使用[DialogBox() 启动。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645452%28v=vs.85%29.aspx)、[DialogBoxParam()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645465%28v=vs.85%29.aspx)或任何直接对话框模式启动器。此外，当您调用它时，您需要确保并提供应用程序的顶级窗口作为父窗口。这样做应该使您的对话框成为模态的，而不是无模态的。在资源脚本中为您的对话框模板使用 WS_POPUP 窗口样式也很重要，但它通常是默认设置的，因此这可能不是您的问题。

# delphi - DWScript：在运行时向 dwsUnit 添加新的数组定义

> ID：12685466
> 
> 赞同：3
> 
> 时间：2012-10-02T06:28:56.833
> 
> 标签：delphi, delphi-xe2, dwscript

使用 Delphi XE2 在运行时调用将数组定义添加到`dwsUnit`组件的方法是什么？

`MyDwsUnit.Arrays.Add`返回 a `TCollectionItem`， not `TdwsArray`，而在设计时添加数组定义会添加一个`TdwsArray`实例！。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:41:27.243

默认的 TCollection.Add 方法返回一个 TCollectionItem，即使它实际上是集合管理的任何项目的实例（这不是特定于 DWScript，它是 Delphi VCL 的东西）。

为了简化这一点，DWScript 中的大多数子类集合现在重新引入了一个 Add 方法，该方法将使用强制转换包装默认集合，因此您不必手动进行强制转换。因此，您可能使用的是旧版本的 DWScript。

如果你不想更新，你可以使用

```
(MyDwsUnit.Arrays.Add as TdwsArray) 
```

反而。

# php - Youtube Developer Key 可以用来获取视频关键词吗？

> ID：12685468
> 
> 赞同：0
> 
> 时间：2012-10-02T06:29:04.893
> 
> 标签：php, zend-framework, tags, youtube-api, keyword

我正在使用**ZendGdata 1.12.0**和 PHP，因为 Youtube 决定将视频的关键字/标签更改为私有。使用开发人员密钥效果最好，因为我从同一个帐户获取视频并且用户登录不起作用。

我的问题是***标签/关键字***总是来自 Youtube API 的空数组，即使视频确实有它们。

我的示例代码可以在[https://gist.github.com/3816646](https://gist.github.com/3816646)找到。有什么我想念的想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:12:25.177

如果您想获取响应中的关键字，您需要发出请求被授权为视频所有者。仅使用开发人员密钥是不够的。

[在https://developers.google.com/youtube/2.0/developers_guide_php#Authentication](https://developers.google.com/youtube/2.0/developers_guide_php#Authentication)中有使用 PHP 客户端库中内置的方法处理身份验证的说明

或者，您可以使用外部 OAuth 2 库，这是一种更向前兼容的解决方案。

# django - 如何使用“make”来构建 mod_wsgi 模块包？

> ID：12685469
> 
> 赞同：0
> 
> 时间：2012-10-02T06:29:05.713
> 
> 标签：django, apache, command-line, makefile, mod-wsgi

> 配置完包后，可以通过运行以下命令来构建它：

我运行了配置脚本，它说“过程完成”。

如何在终端中执行此任务？我正在使用 Mac。我不熟悉命令行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:10:47.897

在您运行的目录中`configure`（它应该包含 a `Makefile`），只需键入`make`并按 Enter。

# asp.net - IIS 中的页面 URL 重定向

> ID：12685474
> 
> 赞同：0
> 
> 时间：2012-10-02T06:29:28.297
> 
> 标签：asp.net, url, iis, url-rewriting, response.redirect

如果请求仅来自 www.firstsite.com/Login.aspx，则需要我的客户端加载网页（www.secondsite.com/Page1.aspx）。

其他明智的客户应将客户重定向回 www.secondsite.com/page1.aspx

我可以使用 IIS 7 或任何其他方式来实现这一点吗？我在 IIS 中尝试过 URL 重写模块，但我只设法限制对 www.firstsite.com/Login.aspx 的访问并将 thr 请求重定向到 www.firstsite.com/Login.aspx。但无法在 IIS 中实现上述行为。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:35:16.690

有可能，看[这里的解释](http://www.iis.net/configreference/system.webserver/httpredirect)

# java - 在 java 中加密，在 node.js 中解密

> ID：12685475
> 
> 赞同：2
> 
> 时间：2012-10-02T06:29:31.297
> 
> 标签：java, node.js, encryption, aes

我需要用 java 加密并用 node.js 解密。解密结果已损坏。

这是java代码：

```
 public String encrypt(SecretKey key, String message){ 
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");              
        cipher.init(Cipher.ENCRYPT_MODE, key);        
        byte[] stringBytes = message.getBytes("UTF8");       
        byte[] raw = cipher.doFinal(stringBytes);

        // converts to base64 for easier display.
        BASE64Encoder encoder = new BASE64Encoder();
        String base64 = encoder.encode(raw);

        return base64;

    } 
```

这是 node.js 代码：

```
 AEse3SCrypt.decrypt = function(cryptkey,  encryptdata) {
    encryptdata = new Buffer(encryptdata, 'base64').toString('binary');

    var decipher = crypto.createDecipher('aes-128-cbc', cryptkey);
    decipher.setAutoPadding(false);
    var decoded  = decipher.update(encryptdata);

    decoded += decipher.final();
    return decoded;
  }

  As a key I use: "[B@4ec6948c"
  The jave encrypted result is: "dfGiiHZi8wYBnDetNhneBw=="<br>
  The node.js result is garbich.... 
```

1.  在java中我使用“PKCS5Padding”。在 node.js 中关于填充应该做什么？我做了 setAutoPadding(false)。如果我不这样做，我会得到错误解密失败。（仅来自 node.js 版本 0.8）。

2.  我试图从 java 中删除 utf8 编码以与 node.js 互补，但它没有用。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:34:12.853

> 作为我使用的键：“[B@4ec6948c”

这听起来很像您只是在调用`toString()`一个字节数组。这并没有给你字节数组中的*数据*——它只是在`Object.toString()`字节数组上调用的默认实现。

尝试使用`Arrays.toString(key)`打印出密钥。

如果你在 node.js 代码中使用那个损坏的键值，难怪它会给你垃圾。

> 我试图从 java 中删除 utf8 编码，以便与 node.js 互补

这绝对是错误的做法。相反，您应该研究如何使 node.js 代码将纯文本数据解释为 UTF-8 编码文本。从根本上说，字符串是字符数据，而加密作用于二进制数据——您需要一种方法来弥合差距，而 UTF-8 是一种完全合理的方法。node.js 中解密的初始结果应该是二进制数据，然后您可以通过 UTF-8 将其“解码”为文本。

恐怕我对填充方面的了解不够多，无法对此发表评论。

# linux - bash脚本，修改文件

> ID：12685478
> 
> 赞同：0
> 
> 时间：2012-10-02T06:29:44.670
> 
> 标签：linux, bash, shell, file-io, scripting

这是我的脚本：

```
#!/bin/bash

for i in *.csv
do
        echo "i: $i"
        THE_FILE2="$i-2.csv"

        file_read()
        {
                lineno=0
                while read line
                do
                        echo $line | awk -F, '{print $1","$2",,,"$3","$4}'
                        ((lineno++))
                done
        } < $i > $THE_FILE2
        echo "the_file2: $THE_FILE2"
        echo "end"
done

file_read 
```

输出：

```
i: 2992.csv
the_file2: 2992.csv-2.csv
end
i: 5415.csv
the_file2: 5415.csv-2.csv
end
i: csa.csv
the_file2: csa.csv-2.csv
end
i: loc.csv
the_file2: loc.csv-2.csv
end
i: visa.csv
the_file2: visa.csv-2.csv
end

$ ls
2992.csv       csa.csv        transform.sh   visa.csv-2.csv
5415.csv       loc.csv        visa.csv 
```

不幸的是，它只对列表中的最后一个文件执行此操作。它跳过了所有其他的。我有一种感觉，这与缓冲或通配或其他东西有关。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:39:25.497

您已`file_read`在循环内部定义，然后从外部调用它。

应该是反过来的！

您可能希望将某些值`file_read`作为参数传递给 to。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:00:09.797

不需要这个`file_read`功能。只需将该代码直接放在 for 循环中即可。

另外，为什么要使用 shell 的`read`命令，然后将其回显到`awk`每一行的新命令？您可以将整个文件重定向到 awk，它会自动读取每一行。

而且您正在增加`lineno`，但没有将其用于任何事情。如果您需要未显示的内容的行号，则可以使用 awk 的`NR`变量。

```
for i in *.csv
do
        echo "i: $i"
        THE_FILE2="$i-2.csv"
        awk -F, '{print $1","$2",,,"$3","$4}' < $i > $THE_FILE2
        echo "the_file2: $THE_FILE2"
        echo "end"
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:19:23.570

*不幸的是，它只对列表中的最后一个文件执行此操作。*

那是因为你只`file_read`在循环之后调用一次。它只对最后一个文件执行它，因为变量`i`并`THE_FILE2`保留在循环的最后一次迭代中。

这是一个`awk`解决方案：

```
awk -f - *.csv << 'EOD'
BEGIN { OFS = FS = "," }
{
    out = FILENAME "-2.csv"
    print $1,$2,",",$3,$4 >> out
}
EOD 
```

# jquery - 在重定向到内容页面时在 Masterpage 中突出显示 div 标签

> ID：12685480
> 
> 赞同：0
> 
> 时间：2012-10-02T06:30:10.940
> 
> 标签：jquery, asp.net

我在 div 标签内的母版页中有一个链接。我想在单击链接时突出​​显示 div，以便重定向到某些内容页面。

**我写了以下代码：**

```
<li>
    <div id="div_test" runat="server">
        <asp:LinkButton ID="lnk_test_menu" Font-Underline="false" 
            ForeColor="Black" runat="server" Text="Test Link"
            CausesValidation="false" onclick="lnk_test_menu_Click1" >
        </asp:LinkButton>
    </div>
</li> 
```

**cs页面中的代码：**

```
 protected void lnk_test_menu_Click1(object sender, EventArgs e)
   {
        div_test.Attributes.Add("class", "testSelected"); 
        Response.Redirect(Test.aspx");           
   } 
```

重定向时未选择母版页中的 div。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:49:39.893

**第一种方法：**使用 jQuery

从 div 中删除 runat="server"。

```
<div id="div_test"> 
```

&

将此代码放在 Test.aspx 页上。

```
$(function(){
  $("#div_test").addClass("testSelected");
}); 
```

**第二种方法：**

```
protected void lnk_test_menu_Click1(object sender, EventArgs e)
{
    Response.Redirect("Test.aspx");
} 
```

在 Test.aspx 页面的 Page_Load 事件中，设置：

```
HtmlGenericControl div_test = (HtmlGenericControl)Master.FindControl("div_test");
div_test.Attributes.Add("class", "testSelected"); 
```

# python - 在编写一些 Django Tasty-Pie 代码时卡住了。如何让这个确切的查询工作？

> ID：12685488
> 
> 赞同：1
> 
> 时间：2012-10-02T06:30:51.923
> 
> 标签：python, django, tastypie

这是我的models.py：

```
from tastypie.utils.timezone import now
from django.contrib.auth.models import User
from django.db import models
from django.template.defaultfilters import slugify

class Link(models.Model):
    user = models.ForeignKey(User)
    pub_date = models.DateTimeField(default=now)
    title = models.CharField(max_length=200)
    slug = models.SlugField()
    body = models.TextField()

    def __unicode__(self):
        return self.title

    def save(self, *args, **kwargs):
        # For automatic slug generation.
        if not self.slug:
            self.slug = slugify(self.title)[:50]

        return super(Link, self).save(*args, **kwargs)

class OAuthConsumer(models.Model):

    name = models.CharField(max_length=255)
    key = models.CharField(max_length=255)
    secret = models.CharField(max_length=255)
    active = models.BooleanField(default=True)

    class Meta:
        db_table = "api_oauth_consumer"

    def __unicode__(self):
         return u'%s' % (self.name) 
```

现在一切正常，我得到这个作为回应：`/api/v1/links/list/?format=json`

```
{
    "meta": {
        "previous": null, 
        "total_count": 1, 
        "offset": 0, 
        "limit": 20, 
        "next": null
    }, 
    "objects": [
        {
            "body": "http://www.youtube.com/watch?v=wqQ6BF50AT4&feature=relmfu", 
            "title": "Youtube", 
            "slug": "main-kya-karoon", 
            "user": "/api/v1/users/1/", 
            "pub_date": "2012-10-01T00:23:53", 
            "id": 1
        }
    ]
} 
```

我想做这些改变：

1.  传递用户名并获取属于该用户名的所有链接。
2.  我目前正在通过 django admin 添加内容并创建新用户，因为在发布帖子时我总是会遇到错误。我想我可能出错了，所以任何帮助可能是使用我当前的 api 创建新用户的 curl 一行会有所帮助。

编辑：

这是我的新 api.py（我决定创建一个新的 UserSignUpResource）：

```
# myapp/api.py

from django.contrib.auth.models import User
from tastypie.authorization import Authorization
from tastypie import fields
from tastypie.resources import ModelResource, ALL, ALL_WITH_RELATIONS
from links.models import Link
from tastypie.serializers import Serializer
from tastypie.admin import ApiKeyInline
from tastypie.models import ApiAccess, ApiKey
from django.db import models
from tastypie.authentication import ApiKeyAuthentication
from tastypie.models import create_api_key
class UserResource(ModelResource):

    class Meta:
        queryset = User.objects.all()
        resource_name = 'users'
        excludes = ['email', 'password', 'is_active', 'is_staff', 'is_superuser'] 
        authorization = Authorization()
        allowed_methods = ['post','get']
        fields = ['username']

        def obj_create(self, bundle, request=None, **kwargs):
            try:
                bundle = super(CreateUserResource, self).obj_create(bundle, request, **kwargs)
                bundle.obj.set_password(bundle.data.get('password'))
                bundle.obj.set_username(bundle.data.get('username'))
                bundle.obj.save() 
            except IntegrityError:
                raise BadRequest('That username already exists')
            return bundle

class LinkResource(ModelResource):
    user = fields.ForeignKey(UserResource, 'user')
    authorization = Authorization()
    class Meta:
        queryset = Link.objects.all()
        resource_name = 'links/list'
        excludes = ['id']
        authorization = Authorization()
        include_resource_uri = False
        excludes = ['limit']

    def apply_filters(self,request,applicable_filters):
        base_object_list = super(LinkResource, self).apply_filters(request, applicable_filters)

        query = request.META.get('HTTP_AUHTORIZATION')
        if query:
            qset = (
                Q(api_key=query))
            base_object_list = base_object_list.filter(qset).distinct()

            return base_object_list

class UserSignUpResource(ModelResource):

    class Meta:
        object_class = User
        queryset = User.objects.all()
        allowed_methods = ['post']
        include_resource_uri = False
        resource_name = 'newuser'
        excludes = ['is_active','is_staff','is_superuser']
        authentication = ApiKeyAuthentication()
        authorizaton = Authorization()
        models.signals.post_save.connect(create_api_key, sender=User)

    def obj_create(self,bundle,request=None,**kwargs):
        try:
            bundle = super(UserSignUpResource, self).obj_create(bundle,request,**kwargs)
            bundle.obj.set_password(bundle.data.get('password'))
            bundle.obj.save()
        except IntegrityError:
            raise BadRequest('The username already exists')
        return bundle

    def apply_authorization_limits(self,request,object_list):
        return object_list.filter(id=request.user.id,is_superuser=True) 
```

现在当我这样做时：

```
curl -v -X POST -d '{"username" : "puck", "password" : "123456"}' -H "Authorization: ApiKey superusername:linklist" -H "Content-Type: application/json" http://127.0.0.1:8000/api/v1/newuser 
```

我收到 404 错误：该 url 不存在。我检查并重新检查，我没有发现网址有任何问题。

编辑：对我来说这是一个相当愚蠢的错误。我忘记在 urls.py 中注册 UserSignUpResource。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:06:24.210

*1.传递用户名并获取属于该用户名的所有链接*

查看基于[在 django/tastypie 资源中传递请求变量中的 api 调用过滤资源](https://stackoverflow.com/questions/10798230/passing-request-variables-in-django-tastypie-resources)

要创建用户，请参阅[如何以编程方式使用 django-tastypie API 创建或注册用户？](https://stackoverflow.com/questions/8889153/how-to-create-or-register-user-using-django-tastypie-api-programmatically)

# hibernate - 子选择获取策略不适用于 Hibernate 中的嵌套集合

> ID：12685489
> 
> 赞同：5
> 
> 时间：2012-10-02T06:30:57.020
> 
> 标签：hibernate

我有 3 个实体和它们的嵌套集合，如下所示：实体 A 包含 B 的集合，实体 B 包含 C 的集合。

而且我需要获取实体 A 的完整对象图列表。当我将获取策略设置为 B 集合和 C 集合的“子选择”时，实际上仅通过单个查询读取 B 集合。每个 B 类型的每个实体都通过单独的查询读取 C 的每个集合 - 就像获取策略在那里“选择”一样。

所以我期待以下内容：

```
从 A 中选择 ...
select ... from B where a_id in (select id from A)
select ... from C where b_id in (select id from B where a_id in (select id from A)
```

但实际上得到：

```
从 A 中选择 ...
select ... from B where a_id in (select id from A)
select ... from C where b_id = ?
select ... from C where b_id = ?
...
select ... from C where b_id = ?

```

嵌套子选择是否有任何限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:27:06.817

问题已确定 - 映射到数据库的实体具有 getHashCode() 的自定义实现，它根据包括集合在内的所有内部成员的值计算哈希码。当 Hibernate 为实体 B 调用 getHashCode() 时，集合 C 尚未读取，但它是获取哈希所必需的。因此，执行单独的查询以获取当前对象 B 的 C 集合...

# c# - 如何在 asp.net 中从内容页面发布值

> ID：12685494
> 
> 赞同：0
> 
> 时间：2012-10-02T06:31:36.223
> 
> 标签：c#, asp.net, http-post

在我的 Web 应用程序中，我有母版页，它有太多的内容页面，在我的内容页面中，我想将表单发布到其他 URL。但它不会以这种方式将值发布到其他页面。

但是当我在没有母版页的简单 aspx 页面中执行相同的代码时，它运行良好。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<form id="frmPay">
    <div>

    <!-- Receiver Details -->
    <input type="hidden" name="merchant_id" id="merchant_id" value="xxgxg" >
    <input type="hidden" name="merchant_key" id="merchant_key" value="gxgagag" runat="server">
    <input type="hidden" name="return_url" id="return_url" value="http://www.widget.co.za/payment_finished" runat="server">
    <input type="hidden" name="cancel_url" id="cancel_url" value="http://www.widget.co.za/payment_cancelled" runat="server">
    <input type="hidden" name="notify_url" id="notify_url" value="http://www.widget.co.za/payment_notify" runat="server">

    <!-- Payer Details -->
    <input type="hidden" name="name_first" id="name_first"  value="Bob" runat="server">
    <input type="hidden" name="name_last" id="name_last" value="Smith" runat="server">
    <input type="hidden" name="email_address" id="email_address" value="bob.smith@example.com" runat="server">

    <!-- Transaction Details -->
    <input type="hidden" name="m_payment_id" id="m_payment_id" value="TRN123456789" runat="server">
    <input type="hidden" name="amount" id="amount" value="200.00" runat="server">
    <input type="hidden" name="item_name" id="item_name" value="Widget Model 123" runat="server">
    <input type="hidden" name="item_description" id="item_description" value="Widget Model 123" runat="server">

    <!-- Transaction Options -->
    <input type="hidden" name="email_confirmation" id="email_confirmation" value="" runat="server">

    <!-- Security -->
    <input type="hidden" name="signature" id="signature" value="" runat="server">
        <asp:Button ID="Button1" runat="server" PostBackUrl="https://www.payfast.co.za/eng/process" Text="Button" />
    </div>
    </form>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:48:51.963

您的`<form>`元素没有`action=""`属性 - 表单不会去任何地方（或者更确切地说，它将提交到当前 URI（无论它是什么））。如果您想将值提交到 ASP.NET 中的另一个页面，您可以阅读以下内容：http: [//www.codeproject.com/Articles/14092/Cross-Page-Posting-in-ASP-NET-2-0](http://www.codeproject.com/Articles/14092/Cross-Page-Posting-in-ASP-NET-2-0)

# cakephp - CakePHP 生成一个文档到 Webroot

> ID：12685500
> 
> 赞同：-1
> 
> 时间：2012-10-02T06:32:08.697
> 
> 标签：cakephp, ms-word

我目前正在使用 cakephp，并且正在生成一个 word 文档。我的问题是如何将生成的文档放在我的 Web 根目录上而不是作为下载文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:25:29.493

我猜你正在使用一个动作来生成一个文档，该文档将输出到浏览器。

您应该使用[输出缓冲](http://php.net/manual/en/ref.outcontrol.php)来“捕获”输出，然后将其写入文件，或者将文档数据写入字符串，然后将该字符串写入服务器上的文件。

编辑：PHPWord 有一个 SAVE 方法。在您的操作中，您可以将文档保存到某个位置，但输出其他内容，即成功通知。这样，您的操作**只会生成**文件：

```
public function generateWordDocument(){
//... your word file creation...
    $wordDocumentLocation = TMP . 'word_files/';
    $objWriter = PHPWord_IOFactory::createWriter($PHPWord, 'Word2007');
    $objWriter->save($wordDocumentLocation . 'helloWorld.docx');
    $this->Session->setFlash('Document generated!');
    $this->redirect(array('action'=>'index')); //or wherever you want
} 
```

如果要保护该文件，可以将文件保存到“安全”文件夹（这可以是“app/webroot”文件夹之外的文件夹，也可以是受 .htaccess 拒绝所有指令保护的文件夹），然后使用另一个操作，例如“getWordDocument”：

```
function getWordDocument($documentName){
    $wordDocumentLocation = TMP . 'word_files/';
    if (file_exists($wordDocumentLocation . $documentName)) { //this is not really the safest way of doing it
         $fp = fopen($wordDocumentLocation . $documentName, 'rb');
         header("Content-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document");
         header("Content-Length: " . filesize($wordDocumentLocation . $documentName));
         fpassthru($fp);
         exit();
    }
} 
```

请注意，此代码仅用于“掌握概念”，绝不安全或最佳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:44:43.480

我认为您想在 webroot 中添加文件，但公共用户无法下载，
您有几种方法：
- 使用 .htaccess 保护文件夹（如 Js 文件夹）
- 在 app 文件夹中创建新文件夹，如 webroot 并将文件放入其中
- 使用cakephp 中的调度程序过滤器：http: [//book.cakephp.org/2.0/en/development/dispatch-filters.html](http://book.cakephp.org/2.0/en/development/dispatch-filters.html)
和 ....

# windows-8 - 使用数据绑定将 Bing 地图居中

> ID：12685502
> 
> 赞同：2
> 
> 时间：2012-10-02T06:32:14.200
> 
> 标签：windows-8, bing-maps, winrt-xaml

我有一个带有 Bing 地图的 ControlTemplate 的 ScrollViewer，请参见下面的代码段。图钉定位正确，因此纬度和经度属性具有正确的值，但地图始终以非洲为中心，我认为它是 0,0 位置...

```
<bing:Map 
    x:Name="Karta" 
    Grid.Row="5" 
    Grid.ColumnSpan="2" 
    HorizontalAlignment="Center" 
    Width="500" 
    Height="500" 
    ZoomLevel="5"
    Credentials="--removed--">
    <bing:Map.Center>
        <bing:Location Latitude="{Binding Latitud}" Longitude="{Binding Longitud}" />
    </bing:Map.Center>
    <bing:Map.Children>
        <bing:Pushpin x:Name="LokalPin" >
            <bing:MapLayer.Position>
                <bing:Location Latitude="{Binding Latitud}" Longitude="{Binding Longitud}" />
            </bing:MapLayer.Position>
        </bing:Pushpin>
    </bing:Map.Children>
</bing:Map> 
```

以前我使用代码（见下文）执行此操作，但我想改为绑定它。而且我认为我`<bing:Map Center>`当时没有使用过，但是如果我从上面删除它，则没有区别。

```
MapLayer.SetPosition(LokalPin, loc);
Karta.SetView(loc, 12.0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T10:27:49.277

几个月太晚了，但也许其他人可以使用它...我假设我们希望地图基于支持字段更新（不是 xaml 中的数据绑定，而是一种解决方法），并试图将使用支持字段的值映射...

我所做的，因为地图的数据绑定不起作用（很高兴在这里更正）...我在包含地图的页面的代码隐藏文件中的 intializecomponent() 之后设置了 viewmodel.propertychanged 事件。

当视图模型更新您要用作地图中心的坐标属性时，将引发更改的事件，并且我通过从视图模型读取新坐标来使地图居中，例如：

```
 void CurrentViewModel_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
            {
                try
                {
                   if (e.PropertyName != "latitude") return;
                    //Karta is the name of the map
                    //assuming the properties are in double format, if not then just cast a double
                    //do something like this: 
                    var latitude = ViewModel.latitude;
                    var longitude =ViewModel.longitude;

                    Karta.Center = new Location(latitude,longitude);
                }
                Catch(Exception exception)
                {Debug.WriteLine(exception.Message);}
            } 
```

这一切都基于您的页面具有引用或使用视图模型并且属性有一些通知属性已更改附加到它们的假设......如果我走错了切线......请随意跳过这个答案...哈哈！使用视图模型和后面代码中的 viewmodel.propertychanged 事件对地图中心进行数据绑定是一件轻而易举的事。完成后太容易了。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:04:27.437

要在 C# 中设置地图的视图，请使用

```
Karta.SetView(loc, zoomLevel); 
```

其中 loc 是要设置中心的 Location 对象，zoomLevel 是整数缩放级别。

您也可以在 XAML 中执行此操作，但您似乎拼错了“纬度”（Latitud）和“经度”（Longitud）

有关文档，请参见[此处](http://msdn.microsoft.com/en-us/library/hh846504.aspx)。

# android - Android Sqlite 数据库连接

> ID：12685506
> 
> 赞同：-3
> 
> 时间：2012-10-02T06:32:44.633
> 
> 标签：android, sqlite

连接到 Sqlite 数据库时会显示一些错误。而且还需要在每个设备中创建单独的 Sqlite 数据库。如何自动创建一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:56:04.423

```
 public Data getdata(int id) {
  Cursor cursor = db.query(DATABASE_TABLE, new String[] {KEY_ROWID,
                   KEY_NAME, KEY_RANK }, KEY_ID + "=?",
                    new String[] { String.valueOf(id) }, null, null, null, null);
            if (cursor != null)
                cursor.moveToFirst();

            Data data = new Data(Integer.parseInt(cursor.getString(0)),
                    cursor.getString(1), cursor.getString(2));
            // return name
            return data;
} 
```

创建一个活动类并使用您的模型类调用读取数据参数

```
 txt = (TextView) findViewById(R.id.textView4);
            txt1 = (TextView) findViewById(R.id.textView5);
            txt2 = (TextView) findViewById(R.id.textView6);

            bt.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    viewData();
                }

                private void viewData() {
                    // TODO Auto-generated method stub
                    try {
                        // ask the database manager for data
                        name = db.getdata(id);
                        txt.setText(name._name);
                        txt1.setText(name._rank);
    }
} 
```

在**你的 onCreate(SQLitedatabase db)**

```
public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                        KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                        KEY_NAME + " TEXT NOT NULL, " +
                        KEY_RANK + " TEXT NOT NULL "+ ")"); 
```

}

# mysql - 通过 MySQL 访问 Drizzle 数据库

> ID：12685510
> 
> 赞同：0
> 
> 时间：2012-10-02T06:33:03.987
> 
> 标签：mysql, stored-procedures, drizzle

这是一个奇怪（可能很愚蠢）的问题，但是否可以通过 MySQL 存储过程操作 Drizzle 数据库？我需要这样做的原因是我正在将我的 MySQL 数据库（包含很多存储过程）迁移到 Drizzle（它不支持存储过程）。这本质上是我对此的“宏伟”短期想法之一。

这样做的任何想法，或其他一些想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:46:20.090

我知道没有一个简单的方法可以做到这一点（作为核心 Drizzle 开发人员，前 MySQL 开发人员，目前在 Percona 担任服务器开发总监）。不过，您也许可以使用 Continuent 从 MySQL 复制到 Drizzle。

虽然您可能会使用 FEDERATED 或 FEDERATEDX 引擎取得一些成功……但我不敢打赌您的访问模式会使远程高效。

最好的选择是远离存储过程——无论如何，它们都是维护和可伸缩性的噩梦（模式版本控制很难，在模式中拥有应用程序代码只会让它变得更难）。

# php - 多选Dropbox

> ID：12685511
> 
> 赞同：-1
> 
> 时间：2012-10-02T06:33:11.307
> 
> 标签：php, javascript, jquery, html

我正在做一个项目，我必须在下拉列表中选择多个选项，并且该数量的文本框应该与该选定的标签一起出现。即在下拉列表中我有 4 个选项在下拉列表中我有国家名称，如印度、美国、中国，我想选择多个选项，所以我按 shift 并单击多个选项，在这种情况下，我按美国和中国，所以我想要 2 个文本框将自动创建，其中包含该国名的文本。

**我已经完成的工作**：我已经完成了点击工作，例如当用户点击按钮创建文本框时。这就是我在粘贴中所做的工作。请帮我怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:00:17.633

鉴于此标记：

```
<div id="cont1">

    <select id="sel1" name="sel1" multiple>
        <option value="First">First</option>
        <option value="Second">Second</option>
        <option value="Third">Third</option>
    </select>

</div> 
```

这个脚本应该让你开始：

```
$(function() {

    $('#sel1 option').on('click', function(e){

        if($(this).is(':selected')){
            $('<input value="'+$(this).val()+'" />').appendTo('#cont1');
        }

    });

}); 
```

为了实际使用 PHP 脚本中的值，您需要为每个输入添加名称；否则，表单字段不会与表单一起提交。另外，请注意，此语法确实假设您使用的是 jQuery 1.7+。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T06:42:08.870

您可以按照本教程使用 ajax

[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

# java - 在 Java 中，如果 Object 可能是 Integer、int[]、String、long[][] 等，我如何打印 Object

> ID：12685513
> 
> 赞同：2
> 
> 时间：2012-10-02T06:33:20.450
> 
> 标签：java, oop

我正在编写一个需要通用输出对象的代码块。Object 可以是任何东西，包括数组数组的数组。如果它是一个数组，**它可以是一个原始数组**或类对象数组。我怎样才能做到这一点？

基本上：

```
Object x = new int[]{1, 2, 3, 4};
Object y = new int[][]{{},{1,2}};
Object z = "hello";
//etc... 
```

现在我想要一种通用的方式来打印 x、y 或 z。

例如，对于 y，我想要 "{{},{1,2}}"

编辑：如果右侧是 Object []，我会看到一些有效的答案，但它们似乎不适用于原始数组

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T06:39:19.373

使用[GSON 的](http://code.google.com/p/google-gson/downloads/list)示例：

```
static Gson gs = new Gson();

public static void main(String[] args) {
    Object obj = new int[] { 1, 2, 3, 4 };
    System.out.println(gs.toJson(obj));
}

// output: [1,2,3,4] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T06:37:31.183

1 - [Arrays.deepToString](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#deepToString%28java.lang.Object%5B%5D%29)

2 - [Arrays.toString](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:37:57.037

使用`instanceof`?

```
Object x = new int[]{1, 2, 3, 4};
        Object y = new int[][]{{},{1,2}};
        Object z = "hello";

        if(x instanceof int[])
        {
            for(int i:(int[])x)
            {
                System.out.println(i);
            }
        }
        if(y instanceof int[][])
        {
             for (int[] arr : (int[][])y) {
                    System.out.println(Arrays.toString(arr));
                }

        }
        if(z instanceof String)
        {
            System.out.println(z);
        } 
```

**更新** 我认为如果您使用相应的包装类，它也适用于 Primitives。

```
 byte a =1;
            Object t = a;
            char c = 'c';
            Object j = c;
            if(t instanceof Byte)
            {
                System.out.println(t);
            }

            if(j instanceof Character)
            {
                System.out.println(j);
            } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T06:35:13.943

使用 toString() 它默认在每个对象中被覆盖

# javascript - 如何检测 jQuery 在 HTML 中创建的新元素？

> ID：12685514
> 
> 赞同：1
> 
> 时间：2012-10-02T06:33:21.013
> 
> 标签：javascript, jquery, ajax

我是 jQuery 的新手，我想知道如何解决这个问题。我标记了删除以通过以下代码显示链接：

```
$('a[id^="del"]').css('border','red 1px solid'); 
```

![初始表](../Images/632fcc8a7044b51dd402c9b6b294f56f.png)

问题是当我通过以下代码添加新活动时：

```
function addGradebkhdr() {

var formData = formToJSON();

    $.ajax({
      type: 'post',
      contentType: 'application/json',
      url: 'http://samle.com/api',
      dataType: "json",
      data: formData,
      success: function(data, textStatus, jqXHR){
        **addTableGradebkhdr(data);**
      },
      error: function(jqXHR, textStatus, errorThrown){
        // handle error
      }
    });
 }

function addTableGradebkhdr(data) {

  var lr = $(".tb-gradebkhdr tbody tr:last-of-type");
  var no = parseInt($(".tb-gradebkhdr tbody tr:last-of-type td:first-of-type").text());
  var ctr = no + 1;
    var d = new Date(data.date);
    var day = d.getDate();
    var month = d.getMonth() + 1; //Months are zero based
    var year = d.getFullYear();
    var sDate = month + "/" + day + "/" + year;

    var row = '<tr id="'+ data.id +'" ><td>'+ ctr +'</td>';
            row += '<td>'+ data.criteria_name +'</td>';
            row += '<td>'+ data.rawhigh +'</td>';
            row += '<td>'+ sDate +'</td>';
            row += '<td>'+ data.quarter +'</td>';
            row += '<td>'+ data.remarks +'</td>';
            row += '<td>';
            row += '<a gradebkhdrid="'+ data.id +'" id="edit-'+ data.id +'" href="#">Edit</a> ';
            row += '<a gradebkhdrid="'+ data.id +'" id="del-'+ data.id +'" href="#">Delete</a>';
            row += '</td></tr>';
        lr.after(row);

}

$(document).ready(function(){

$("#frmBtn-grbkhdr-save").on('click',**addGradebkhdr**);

$('a[id^="del"]').each(function(){
    $(this).on("click",function() {
            var gradebkhdrid = $(this).attr('gradebkhdrid');    
        deleteGradebkhdr(gradebkhdrid);
        });     
  });
}); 
```

表格变成这样：

![快消品](../Images/66689083e781bd7abe678f768f85364e.png)

如您所见，上次删除未被检测到

```
$('a[id^="del"]').each(function(){
    $(this).on("click",function() {            
        var gradebkhdrid = $(this).attr('gradebkhdrid');
        deleteGradebkhdr(gradebkhdrid);
     });
}); 
```

红色边框不是表格的一部分。我用它来跟踪事件/错误捕获。正如您在第一张图片中看到的那样，页面已加载，所有删除链接都标记为红色。这意味着删除链接所有工作。

但是当我通过 jQuery ajax 函数添加一个新的 Activity 来提交表单并创建一个 Table Row 及其内部元素时，包括 Delete 按钮。添加的删除链接不起作用，我创建的红线也没有应用，正如您在第二张图片中看到的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:37:41.870

所以你是说你想将`click`事件附加到不存在的元素（将来会存在）？尝试这个：

```
$(document).on( 'click', 'a[id^="del"]', function(){      
    var gradebkhdrid = $(this).attr('gradebkhdrid');
    deleteGradebkhdr(gradebkhdrid);
}); 
```

您可以`document`使用所有这些行的持有者进行更改，例如`$( '#myTable' )...`.

至于 CSS：将自定义类添加到`a`标签并在单独的样式表文件（或`<style>`标签）中正确设置样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:42:31.197

这个问题有两个方面，有两个单独的解决方案。

向删除按钮添加一个类，以便您可以使用纯 CSS 定位它们，而无需直接更改元素的样式：

```
row += '<a gradebkhdrid="'+ data.id +'" id="del-'+ data.id +'" class="delButton" href="#">Delete</a>'; 
```

现在您可以使用此 CSS 设置边框，并且它也适用于新添加的元素。

```
.delButton { border: 1px solid red; } 
```

要处理添加元素的点击事件，请使用委托：

```
$('.tb-gradebkhdr').on('click', 'a[id^="del"]', function(){
  var gradebkhdrid = $(this).attr('gradebkhdrid');    
  deleteGradebkhdr(gradebkhdrid);
}); 
```

事件处理程序将绑定在表格上并在事件冒泡时捕获事件，因此它也适用于新添加的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:37:10.123

可以使用 jQuery 的 live 功能：http: [//api.jquery.com/live/](http://api.jquery.com/live/)

或者您可以在创建行时在函数“addTableGradebkhdr”中显式添加处理程序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T06:38:55.263

您应该记得`$('a[id^="del"]').css('border','red 1px solid');`您没有使用 CSS，因此边框将仅应用于您通过 jQuery 选择的已添加元素。

```
...your code
....
lr.after(row);
$('a[id^="del"]').css('border','red 1px solid'); 
```

或者

可以直接设置边框颜色

```
row += '<a style="border:red 1px solid;" gradebkhdrid="'+ data.id +'" id="del-'+ data.id +'" href="#">Delete</a>'; 
```

你可以使用 jQuery.live

```
$('a[id^="del"]').live(function() {            
     var gradebkhdrid = $(this).attr('gradebkhdrid');
     deleteGradebkhdr(gradebkhdrid);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T06:42:35.847

如果您希望表格在页面加载时有行，并且同时附加了前端函数，则可以使用 jquery.clone() 函数复制前一行并随后更改内容。这将为您节省一些代码，并将以前的侦听器应用于新元素。

```
var newRow = $("table tr:last").clone(true);
$(newRow).find("td:eq(0)").html("new data for column 1");

$(newRow).insertAfter(row); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T06:47:40.027

你可以试试这个

```
....
lr.after(row);
$("a[id^='del']:last").css('border', 'red 1px solid'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T06:48:11.567

您可以通过 2 种方式做到这一点。

1）您可以在样式表中定义样式
2）您可以通过从实时绑定函数调用同一行来使用 javascript 应用样式。[您可以从http://api.jquery.com/on/](http://api.jquery.com/on/)执行实时绑定使用 jquery 的 on() 函数在
这里，当您的脚本使用时，id 以“del”开头，您的添加元素应该具有以开头的删除链接 id 'del'，如果您使用的是相同的脚本。最好为该删除链接修复一个类并更新您的脚本行，如下所示

```
$('a[class="deleteLink"]').css('border','red 1px solid'); 
```

希望能帮助到你。

# c# - Ping 类中的 OpenNETCF 发送方法

> ID：12685515
> 
> 赞同：0
> 
> 时间：2012-10-02T06:33:23.603
> 
> 标签：c#, c#-2.0

我有点新，所以它只是一个在 C# 中测试的简单代码（WINdow CE 版本 2.0）。我想知道为什么在OpenNETCF.Net.NetworkInformation中，Ping类的Send(string)方法不能发送IP？它显示错误（PingException 未处理 - 无法发送数据包），而当我将命名空间更改为 System.Net.NetworkInformation 时，它运行良好。谁能帮忙解释一下？因为我正在处理无法使用 System.Net.NetworkInformation 命名空间的 Window CE（2.0 版）。先谢谢了。

```
 bool result = false;
        Ping ping = new Ping();

        PingReply pingReply = ping.Send("12.35.146.98");

        if (pingReply.Status == IPStatus.Success)
            result = true;

        Console.WriteLine(result.ToString());
        Console.Read(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:03:52.943

我已经知道是什么问题了。该错误是由于“缺少 coredll”导致的，这需要您使用模拟器来测试程序。如果使用模拟器，则没有错误。

# javascript - 如何在JS中定义一个全局变量

> ID：12685520
> 
> 赞同：-2
> 
> 时间：2012-10-02T06:34:24.547
> 
> 标签：javascript, jquery, ajax, abort

我在 JavaScript 中声明变量有一个小问题。在文件的开头，`var send;`我通过. 所以它喜欢：`$(document).ready(function()``setTimeOut``abort()`

```
var send;
$(document).ready(function(){
//somecode
    function loop(){
        send = $.getScript('index.php', function(data){
            //somecode
        }
    }
//somecode
}
function one_more(){
    send.abort();
} 
```

问题是`send.abort();`我收到：

> 类型错误：发送未定义
> 
> 发送.中止（）；

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:37:23.273

由于`send`仅在`loop()`函数中定义，它只会在被调用时定义（并且仅在文档就绪处理程序的范围内调用）

我假设你在定义`one_more()`之前打电话。`send`

出于说明的目的，您上面所拥有的基本上是

```
var send;
send.abort(); 
```

一个快速的解决方法是`send`使用适当命名的方法进行定义，例如

```
var send = send || {abort: function(){}}; 
```

这将停止错误，但你真的应该弄清楚什么时候执行和定义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:40:11.743

据我所知，这段代码是否错误：

```
function loop(){
    send = $.getScript('index.php', function(data){
        //somecode
    }
} 
```

应该是这样的：

```
function loop(){
    send = $.getScript('index.php', function(data){
        //somecode
    });
} 
```

见）；在发送结束时 = ....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:41:21.057

变量的赋值`send`发生在 ready 函数内部。当您到达`send.abort()`指令时，该`ready`功能尚未执行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T06:44:48.583

定义`window.varname`将使变量成为全局变量。我认为`window`就像所有变量的根，因为你可以调用`window.window.window.window.window.window.window.window`它，它会返回`window`。

# iphone - UIAlertView 需要时间来显示

> ID：12685534
> 
> 赞同：1
> 
> 时间：2012-10-02T06:35:33.547
> 
> 标签：iphone, ios, nsuserdefaults, uialertview

我想在按下按钮时显示警报视图。它已显示，但在屏幕上显示需要很长时间。这是我在按下按钮时调用的函数：

```
-(void)saveAndClose:(id)sender
{
    waitForOCR=[[UIAlertView alloc] initWithTitle:@"Processing..." message:@"Please wait." delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:nil, nil];
    waitForOCR.delegate=self;
    [waitForOCR show];
    if(!isCancelled){
    NSMutableArray *dateSaved=[[NSMutableArray alloc] initWithArray:[[NSUserDefaults standardUserDefaults] arrayForKey:@"dateCaptured"]];
    NSDateFormatter *dateText=[[NSDateFormatter alloc] init];
    [dateText setDateFormat:@"yyyy-MM-dd"];
    NSDate *now=[NSDate date];
    NSString *dateValue=[dateText stringFromDate:now];
    [dateSaved addObject:dateValue];
    NSMutableArray *timeSaved=[[NSMutableArray alloc] initWithArray:[[NSUserDefaults standardUserDefaults] arrayForKey:@"timeCaptured"]];
    NSDateFormatter *timeText=[[NSDateFormatter alloc] init];
    [timeText setDateFormat:@"HH:mm:ss"];
    NSString *timeValue=[timeText stringFromDate:now];
    [timeSaved addObject:timeValue];
    [[NSUserDefaults standardUserDefaults] setObject:dateSaved forKey:@"dateCaptured"];
    [[NSUserDefaults standardUserDefaults] setObject:timeSaved forKey:@"timeCaptured"];
    [dateSaved release];
    dateSaved=nil;
    [timeSaved release];
    timeSaved=nil;
    int counter = [[NSUserDefaults standardUserDefaults] integerForKey:@"LaunchesCounter"];
    counter++;
    [[NSUserDefaults standardUserDefaults] setInteger:counter forKey:@"LaunchesCounter"];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *localFilePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"image%d.png",counter]];
    NSData *thedata = [[NSData alloc] initWithData:UIImagePNGRepresentation(imageToCrop)];
    [thedata writeToFile:localFilePath atomically:YES];
    [thedata release];

    [NSThread detachNewThreadSelector:@selector(processOcrAt:) toTarget:self withObject:[self.imageCropper getCroppedImage]];
    }
    else{
        isCancelled=FALSE;
    }

} 
```

如您所见，我`UIAlerView`在函数开始时显示。但是显示时间太长了。有什么建议可以解决这个问题吗？感谢问候 Idrees

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T06:40:14.817

警报只会在当前运行循环结束时显示，因此您在“显示”它之后所做的一切实际上都会发生在之前。请注意，无论如何将代码移到后台是个好主意，否则它会阻塞主线程并使应用程序无响应。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-16T17:39:51.143

移动`[alertview show];`到主队列。如果您打算显示来自异步回调的警报，这将很有帮助。

```
dispatch_async(dispatch_get_main_queue(), ^{
    [alertview show];
}); 
```

# iphone - 如何在 App Store iPod 2G + iPhone3GS 上提供我的应用程序

> ID：12685536
> 
> 赞同：0
> 
> 时间：2012-10-02T06:36:07.907
> 
> 标签：iphone, ios, ipod

我们正在制作一个需要支持的应用`iPod Touch 2G`程序`iPhone 3GS`。

那可能吗？

**编辑**：我不想支持`3G`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:42:26.127

3GS不难支持；它是一个 armv7 处理器，可以针对 Xcode 4.5。它们将运行 iOS 5 甚至 iOS 6。除了内存有限之外，它们根本不难开发。

第二代 iPod Touch（以及第三代）都配备了 armv6 系列处理器。

*   Xcode 4.5 无法为 armv6 生成代码。您需要使用 Xcode 4.4.1 或更早版本为它们进行开发，并且编译器状态不佳。
*   他们无法运行 iOS 5 或 6。事实上，他们甚至不会运行 4.3；你需要瞄准4.2。

3GS 是一个相当合理的要求，但您不应该针对较旧的 iPod touch 型号。

# c# - 如何在c#中将括号与正则表达式匹配

> ID：12685537
> 
> 赞同：0
> 
> 时间：2012-10-02T06:36:18.710
> 
> 标签：c#, regex, parentheses

> **可能重复：**
> [正则表达式匹配外括号](https://stackoverflow.com/questions/546433/regular-expression-to-match-outer-brackets)

我正在尝试匹配一个包含括号的字符串，但用反斜杠转义括号会给我一个错误“无法识别的转义序列”。我如何匹配括号并检索里面的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:39:49.513

使用 Regex.Escape()：http: [//msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)

# jquery - 使用 jquery ajax 在一个页面上为多个实体加载数据的常用技术

> ID：12685544
> 
> 赞同：0
> 
> 时间：2012-10-02T06:36:49.527
> 
> 标签：jquery

JS：

```
$('.product').each(function(){
    $parent = $(this);
    $.ajax({
        url: $parent.attr('url'),
        cache: false,
        dataType: 'text',
        success: function(data){       
            $parent.text(data);
        }
    });
}); 
```

对于我想加载一些数据的每种产品，说价格。我知道该`each`功能不适合这个，因为`each`不等待`async ajax`过程完成。

在我的示例中，只有最后一个产品填充了数据。

如何在文档加载时加载每个产品的数据？这种情况有通用技术吗？是一次对所有产品提出请求，还是逐个提出请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:43:08.520

在 javascript 中创建一个包含所有产品 id 的数组，然后在该数组的间隔上调用 $.ajax，在第一个 ajax 调用的完成事件上，检查数组中是否还有更多产品并再次触发ajax 调用，直到数组为空。这样，您将获得缓冲的产品，而无需并行进行 ajax 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:48:55.847

**原因：**在您的代码`$parent`中未在本地声明，因此成为全局变量。因此，最后一次迭代将`$('.product').each() { .. }`其覆盖为`$('.product')`DOM 中的最后一个元素。

**解决方案：**如果您更改`$parent = $(this);`为`var $parent = $(this);`，它可能会开始正常工作。

# java - 获取两个标签之间的内容，然后返回完整的字符串

> ID：12685550
> 
> 赞同：1
> 
> 时间：2012-10-02T06:37:11.260
> 
> 标签：java

我如何在每两个标签（`<tagname></tagname>`）之间获取一些文本，在更改这两个标签的文本后，**我需要完整的字符串以及更改**。想想，这是 java 字符串内容。

**改变前**

* * *

“Lorem ipsum dolor `<tagname>text to be changed 1</tagname>`amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua。Ut enim ad minim veniam, quis nostrud `<tagname>text to be changed 2</tagname>`laboris nisi ut aliquip ex ea ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur。Exceptioneur sint `<tagname>text to be changed 3</tagname>`cupidatat non proident，sunt in culpa qui officia deserunt mollit anim id est laborum。

* * *

**改了之后应该是这样的**

* * *

“Lorem ipsum dolor `<tagname>text changed 1</tagname>`amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua。Ut enim ad minim veniam, quis nostrud `<tagname>text changed 2</tagname>`laboris nisi ut aliquip ex ea ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur。Exceptioneur sint `<tagname>text changed 3</tagname>`cupidatat non proident，sunt in culpa qui officia deserunt mollit anim id est laborum。

* * *

实际上我需要这样的方法，

```
String getChangedString(String toBeChanged){
   //process
   return changedString;
} 
```

我怎么能得到这个。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:53:14.113

```
String getChangedString(String toBeChanged){
   String changedString = toBeChanged;

   while (changedString.indexOf("<tagname>") >= 0)
   {
     changedString = changedString.substring(0, changedString.indexOf("<tagname>")) +
       "whatever replacement string" +
       changedString.substring(changedString.indexOf("</tagname>") + "</tagname>".length());
   }

   return changedString;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:26:36.437

假设标签在 XML 文件中，您应该使用现有的 XML 解析器之一，例如 DOM 或 SAX，而不是重新发明轮子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T19:40:27.440

我一直在寻找相同的，也许这个问题可以帮助你，看看： [Java regex to extract text between tags](https://stackoverflow.com/questions/6560672/java-regex-to-extract-text-between-tags)

它使用正则表达式来获取标签之间的文本内容。就我而言，我有兴趣从我的 xml 中找到的第一个标签中获取文本，而不是从每个标签中获取文本

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-15T10:38:41.037

org.apache.commons.lang.StringUtils 中有一个完美的基于字符串解析的实用程序，下面的代码非常适合我。

```
String title = StringUtils.substringBetween(testHtml, "<title>", "</title>");
System.out.println("title:" + title); // good 
```

# ruby-on-rails - Rails 添加 Twilio 子帐户：未初始化的常量 User::Twilio

> ID：12685557
> 
> 赞同：0
> 
> 时间：2012-10-02T06:37:41.293
> 
> 标签：ruby-on-rails, twilio

*********更新：我刚刚尝试重新启动 Rails 服务器，它似乎已经工作了！

我按照 Michael Hartl 的 Rails 教程构建了一个基本的身份验证系统，现在我想做的是在用户注册时使用 Twilio 的 API 创建一个 Twilio 子帐户。

[https://www.twilio.com/docs/api/rest/subaccounts](https://www.twilio.com/docs/api/rest/subaccounts)

我对如何创建它的想法是在用户模型中使用 before_save，并让 twilio 为子帐户创建 Auth Token 和 Account Sid。问题是，当我点击提交时，我得到——

```
NameError in UsersController#create

uninitialized constant User::Twilio
Rails.root: C:/Sites/dentist

Application Trace | Framework Trace | Full Trace
app/models/user.rb:45:in `create_twilio_subaccount'
app/controllers/users_controller.rb:13:in `create' 
```

这是我当前的用户模型：

```
#Twilio authentication credentials
ACCOUNT_SID = '####removed for stackoverflow#####'
ACCOUNT_TOKEN = '####removed for stackoverflow#####'

# == Schema Information
#
# Table name: users
#
#  id                 :integer          not null, primary key
#  name               :string(255)
#  email              :string(255)
#  created_at         :datetime         not null
#  updated_at         :datetime         not null
#  password_digest    :string(255)
#  remember_token     :string(255)
#  twilio_account_sid :string(255)
#  twilio_auth_token  :string(255)
#

class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token
  before_save :create_twilio_subaccount

  validates :name,  presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: true

  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true

    private

      def create_remember_token
        self.remember_token = SecureRandom.urlsafe_base64
      end

    def create_twilio_subaccount     
      @client = Twilio::REST::Client.new(ACCOUNT_SID, ACCOUNT_TOKEN)
      @subaccount = @client.accounts.create({:FriendlyName => self[:email]})
      self.twilio_account_sid = @subaccount.sid
      self.twilio_auth_token  = @subaccount.auth_token
    end

end 
```

任何关于我应该在 create_twilio_subaccount 中做什么的帮助将不胜感激。这只是我对如何做到这一点的猜测，基于 remember_token 的工作方式。让我知道我是否在做一些完全古怪的事情！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:04:02.053

我刚刚尝试重新启动 Rails 服务器，它似乎成功了！

# sqlite - How to find out version SQLite in Qt?

> ID：12685563
> 
> 赞同：7
> 
> 时间：2012-10-02T06:38:34.463
> 
> 标签：sqlite, qt4

I want to discover SQLite version in Qt 4.6.2 & 4.7.4 How to find out version SQLite in Qt?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T07:34:16.537

If you have direct access to the SQLite C API, call [`sqlite3_libversion()`](http://www.sqlite.org/c3ref/libversion.html).

If you have only SQL access, run the query [`SELECT sqlite_version();`](http://www.sqlite.org/lang_corefunc.html#sqlite_version).

# c# - Linq to SQL 获取事务中的更新记录

> ID：12685565
> 
> 赞同：0
> 
> 时间：2012-10-02T06:38:49.480
> 
> 标签：c#, asp.net, linq, linq-to-sql

我是 Linq to Sql 的新手。我有一个场景。我有两张桌子。MasterTable 和 DetailTable 表。我想做的是：

在 DetailTable 和 DetailTable 行的基础上插入新行我试图在一个事务中更新 Master。

这是我的代码：

```
DBContext context = new DBContext();
context.Connection.Open();
context.Transaction = context.Connection.BeginTransaction();

DetailTable detail = new DetailTable();

detail.Amount = 100;

var detailTable = context.GetTable<DetailTable>();
                // pass in the object with insert on submit
                // and then submit changes
detailTable.InsertOnSubmit(detail);

var result = (from Total in context.MasterTable
select Total).Sum();

decimal total = (decimal)result; // This total is not the latest.

// UpdateMaster.....
// ................

context.SubmitChanges();
context.Transaction.Commit(); 
```

现在，我面临的问题是我没有从 MasterTable 获得最新的 Sum。就像在插入数量为 100 的新行之后，说我应该得到 600 但我得到了 500（总和行，就好像我没有插入新行一样）。请让我知道这是否可以使用 Linq to Sql 如果是这样的话，或者我正在尝试实现一些不可能的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:55:55.910

试着把`context.SubmitChanges();`上面的`decimal total = (decimal)result;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:48:24.047

您的数据上下文中的数据已过时。在您提交更改之前，Linq-2-sql 不会应用挂起的更新。

因此，您需要执行以下任一操作：

```
decimal total = (decimal)result + detail.amount 
```

或者您确实按照 Jan P. 的建议行事。这也将起作用，因为您自己管理交易。

另外：你为什么要自己打开连接？在这种情况下没有必要这样做。

# c# - 从 Metro Style App c# 加载 C 库 (gsdll32.dll)

> ID：12685567
> 
> 赞同：4
> 
> 时间：2012-10-02T06:38:53.087
> 
> 标签：c#, pdf, microsoft-metro, dllimport, ghostscript

我想使用 Metro Style App c# 中的 gsdll32.dll。我加载dll如下：

```
[DllImport("gsdll32.dll", EntryPoint = "gsapi_delete_instance")]
private static extern void gsapi_delete_instance(IntPtr instance);

[DllImport("gsdll32.dll", EntryPoint = "gsapi_revision")]
private static extern int gsapi_revision(ref GS_Revision pGSRevisionInfo, int intLen);        

[DllImport("gsdll32.dll", EntryPoint = "gsapi_set_stdio")]
private static extern int gsapi_set_stdio(IntPtr lngGSInstance, StdioCallBack gsdll_stdin, StdioCallBack gsdll_stdout, StdioCallBack gsdll_stderr); 
```

但是当我尝试加载 dll 时未找到异常发生。我已经把它放在调试文件中。但它确实有效。

我从[这个链接](http://www.codeproject.com/Articles/32274/How-To-Convert-PDF-to-Image-Using-Ghostscript-API)引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:16:43.260

这是可能的，但是：

*   gsdll32.dll 是否针对 WinRT SDK 编译？
*   gsdll32.dll是否通过App认证？
*   你是否在你的包中包含了dll？

如果任何这些问题的答案是“否”，那么您的代码将无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-12T17:16:17.373

从源代码构建 Ghostscript（PC 版）
Microsoft Environment for WinRT

Ghostscript 可以以 win32 DLL 的形式构建，以在 Windows 运行时应用程序或 Windows 运行时组件中使用。为 WinRT 构建需要使用 Microsoft Visual Studio 2012。在目录 winrt 中有一个可以加载到 VS 2012 的解决方案文件

WinRT 应用程序或组件应包含来自 gs/psi 的 iapi.h 并与来自 gs/debugbin 或 gs/releasebin 的 gsdll32metro.lib 链接。此外，任何直接或通过组件使用 ghostscript 的应用程序都应将 gsdll32metro.dll 添加为“内容”。包含 dll 是必要的，以便将其与应用程序打包在一起。如果希望能够在 ghostscript 上运行调试器，那么 gsdll32metro.pdb 也应该作为内容添加。

来自[GhostScript 9.21 文档](https://ghostscript.com/doc/9.21/Make.htm)

是的，我确实意识到这个问题已经有五年历史了。

# java - 从第一次 RMI 调用到服务器的固定时间后通知所有客户端

> ID：12685569
> 
> 赞同：0
> 
> 时间：2012-10-02T06:38:57.360
> 
> 标签：java, rmi

我希望服务器在第一次 RMI 调用对服务器进行固定时间后使用回调通知多个客户端。

即服务器将等待固定时间，以便多个客户端可以加入

```
//server code
void connect (callback) {

thread.sleep(time)
callback.notify()

} 
```

但发生的情况是所有客户端都不会同时收到回调。变化取决于对 server 进行 rmi 调用的时间。如何确保所有客户同时收到通知。

我是 RMI 的新手，正在尝试实现客户端-服务器机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:49:12.323

你不能。要么你要一个接一个地调用它们，这已经破坏了同时性，或者你并行调用它们，在这种情况下你仍然无法控制线程执行，并且在这两种情况下你也无法控制数据包的发送方式到网络。

这里的问题是需求本身，而不是如何实现它。为什么第一次通话后要有固定时间？你怎么知道所有可能的客户端都在那个固定的时间内连接？为什么客户端都需要同时收到通知？为什么你需要回调？RMI 中的回调通常是设计不佳的标志，出于安全原因，网络管理员对任何类型的回调都抱有极大的怀疑。

对于一般的客户端-服务器机制，您不需要回调。RMI 已经是一种客户端-服务器机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:50:29.643

请记住，自从我使用 RMI 以来已经有一段时间了，
我同意另一个答案，即这是一个有问题的要求。
但是，如果这个要求是必须的，
我会尝试实现我将要建议的东西，
希望我能正确理解问题是每个服务于 RMI 调用的服务器线程都会调用连接。
我建议以下 -
在 RMI 服务器线程之间实现共享数据结构（即 - 那些运行对“连接”方法的调用的人）。
. 共享数据结构可以是 java.util.Date（或表示毫秒的 Long）到回调列表的并发映射。
connect 的代码将执行以下伪代码：

一个。检查是否有您想要通知回调的日期对象的条目。
如果没有这样的条目，则创建它并放入映射并将“true”设置为 newEntry 标志
b。在列表中添加回调。
C。如果设置了“newEntryFlag”，则使用[ScheduledThredPoolExectuor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)来安排将在到达日期对象的时间时调用的任务。
d。当任务的时间到了——任务的run方法会从共享map中获取回调列表，并为每一个回调调用notify方法。

当然，您需要在这里正确处理同步，我相信您可以做到这一点。

# .net - TraceListener 页眉和页脚

> ID：12685581
> 
> 赞同：2
> 
> 时间：2012-10-02T06:39:44.903
> 
> 标签：.net, logging, tracelistener, tracesource

在编写自定义 TraceListener 时，如何强制 writeheader、数据/消息和 writefooter 成为一个谨慎的记录？具体来说，有问题的自定义跟踪侦听器写入非基于文件的源，例如数据库或事件流。我需要忽略 TraceListener 中的 writeHeader、writefooter 基本方法，或者以某种方式将其打包到单个写入事件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:18:06.473

[这是一篇](http://blogs.msdn.com/b/bclteam/archive/2005/09/21/472021.aspx)关于 custom 如何`TraceListener`工作的好文章，它还解释了何时、何地`WriteHeader`以及`WriteFooter`被调用。避免`WriteHeader`并且`WriteFooter`显然是覆盖[TraceData](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracelistener.tracedata.aspx)和/或[TraceEvent](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracelistener.traceevent.aspx)调用的技巧。

[在这个 SO thread](https://stackoverflow.com/questions/2826211/how-does-system-tracelistener-prepend-message-with-process-name)中也有一些关于这个问题的讨论。

最后，我鼓励您看看[Ukadc.Diagnostics](http://ukadcdiagnostics.codeplex.com/)，它是一个非常酷的扩展库`System.Diagnostics`，除其他功能外，它还提供了一种实现类似 log4net/NLog 输出格式的好方法。[在这个 SO 线程](https://stackoverflow.com/questions/4062277/net-how-to-suppress-tracesource-header-sourcename-traceeventtype-id)中有一些关于这个库的讨论。

祝你好运！

# asp.net - IIS 上用于安全页面的两个虚拟目录

> ID：12685582
> 
> 赞同：1
> 
> 时间：2012-10-02T06:39:45.657
> 
> 标签：asp.net, iis-7, security

我正在.net 4.0 中开发应用程序。在我的 Web 应用程序项目中，它具有安全文件夹。现在我只想将经过身份验证的用户重定向到安全页面。

我想在 IIS 上创建两个不同的虚拟目录。（另一个目录中的虚拟目录）

我可以这样做吗？我怎样才能做到这一点？或者有什么办法吗？

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:17:13.677

如果您想使用代码手动执行此操作，那么正确的位置就`global.asax`在`Application_AuthenticateRequest`触发器上。这是一个示例，您可以根据自己的逻辑进行更改。

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    string cTheFile = HttpContext.Current.Request.Path;

    if(!cTheFile.Contains("/securedir/"))
    {
    if (HttpContext.Current.Request.IsSecureConnection)
    {
        HttpApplication app = (HttpApplication)sender;
        string cookieName = FormsAuthentication.FormsCookieName;
        HttpCookie authCookie = Context.Request.Cookies[cookieName];

        // if this is null, then the user is not logged in
        if (null == authCookie)
        {
  // for the same check you can also use
  //if(HttpContext.Current.User == null || HttpContext.Current.User.Identity == null || !HttpContext.Current.User.Identity.IsAuthenticated)

            string sExtentionOfThisFile = System.IO.Path.GetExtension(cTheFile);

            if (sExtentionOfThisFile.Equals(".aspx", StringComparison.InvariantCultureIgnoreCase))
            {
                Response.Redirect("/", true);
                Response.End();

                // There is no authentication cookie.
                return;
            }
        }
        }
    }
    }
} 
```

# scala - Scala中匿名函数中参数前的隐式关键字

> ID：12685591
> 
> 赞同：29
> 
> 时间：2012-10-02T06:40:18.523
> 
> 标签：scala, implicit

我了解 Scala 中的隐式参数和隐式转换，但我今天第一次看到这个：匿名函数中参数前面的隐式关键字：

```
Action { implicit request =>
  Ok("Got request [" + request + "]")
} 
```

隐含关键字在这里做什么？

网络上是否有更多描述用例的资源？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-02T07:28:44.113

这里有两个不同的特点。

首先，`request`在方法调用中并不是真正的参数。这是匿名函数的参数。匿名函数本身就是方法调用的参数。

其次，在匿名函数中声明隐式参数可以方便地使您免于“强制”将 val 转换为隐式：

```
Action { request =>
  implicit val r = request
  Ok("Got request [" + request + "]")
} 
```

我碰巧知道这是一个 Play 框架代码，但我不确定 Action 和 Ok 的签名是什么。我猜他们是这样的：

```
def Action(r:Request => Result):Unit
case class Ok(str:msg)(implicit r:Request) 
```

同样，这纯粹是出于说明目的的猜测。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T07:21:23.607

找了几个资源：

[https://issues.scala-lang.org/browse/SI-1492](https://issues.scala-lang.org/browse/SI-1492)

[https://stackoverflow.com/a/5015161/480674](https://stackoverflow.com/a/5015161/480674)

在第二个链接上搜索“闭包中的隐式参数”

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-01T19:49:40.710

在我的理解中，隐式的关键字意味着**让编译器完成工作**

声明一个隐式变量意味着它可以用于范围内其他方法的隐式参数。换句话说，编译器正在考虑使用该变量来填充隐式参数。

```
 def index = Action { implicit request =>
    val str = sayHi("Jason")
    Ok(views.html.index("Your new application is ready." + str))
  }

  private def sayHi(name: String)(implicit req: Request[AnyContent]) = name + ", you can the following content" + req.body 
```

I declare an implicit parameter `req` in `sayHi` with type `Request[AnyContent]`, however, I can call the method with only first parameter `sayHi("Jason")` because the implicit **parameter** `req` is filled in by the compiler to reference the implicit **variable** `request`

# jquery - 当内容接近溢出边缘时如何使内容缓慢“淡出”：隐藏的div？

> ID：12685592
> 
> 赞同：0
> 
> 时间：2012-10-02T06:40:26.033
> 
> 标签：jquery, css, html

我希望我不会让任何人感到困惑。我的 div 高度为 300px，内容比 div 大。我已经设置`overflow`在`hidden`div 里面，一切都很好。如果当用户滚动内容时，页面底部上方和下方的任何内容都不会在某个点之后立即消失，这会更好，我希望顶部和底部可能有一个半透明的图像div，这样当用户滚动时，内容会慢慢淡入淡出。

正如我所说，希望我不会混淆任何人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:43:50.497

我以前做过类似的事情。不幸的是，代码目前不在我身边。

但是，我确实使用了这个网站作为参考，也许它可以帮助你： [http ://css-tricks.com/examples/FadeOutBottom/](http://css-tricks.com/examples/FadeOutBottom/)

# ruby-on-rails - 检查 https 状态码 ruby

> ID：12685599
> 
> 赞同：7
> 
> 时间：2012-10-02T06:41:04.253
> 
> 标签：ruby-on-rails, ruby, https

有没有办法在 ruby​​ 中检查 HTTPS 状态码？我知道有一些方法可以在 HTTP 中使用`require 'net/http'`，但我正在寻找 HTTPS。也许我需要使用不同的库？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-02T07:03:32.370

您可以在 net/http 中执行此操作：

```
require "net/https"
require "uri"

uri = URI.parse("https://www.secure.com/")
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true

request = Net::HTTP::Get.new(uri.request_uri)
res = http.request(request)

res.code #=> "200" 
```

参考：

*   [Net::HTTP 备忘单](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)
*   [如何治愈 Net::HTTP 的风险默认 HTTPS 行为](http://www.rubyinside.com/how-to-cure-nethttps-risky-default-https-behavior-4010.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-02T08:24:30.150

您可以使用 Net::HTTP(S) 周围的任何包装器来获得更简单的行为。我在这里使用法拉第 ( [https://github.com/lostisland/faraday](https://github.com/lostisland/faraday) ) 但 HTTParty 具有几乎相同的功能 ( [https://github.com/jnunemaker/httparty](https://github.com/jnunemaker/httparty) )

```
 require 'faraday'

 res = Faraday.get("https://www.example.com/")
 res.status # => 200

 res = Faraday.get("http://www.example.com/")
 res.status # => 200 
```

（作为奖励，您可以获得解析响应、引发状态异常、记录请求的选项......

```
 connection = Faraday.new("https://www.example.com/") do |conn|
   # url-encode the body if given as a hash
   conn.request :url_encoded
   # add an authorization header
   conn.request :oauth2, 'TOKEN'
   # use JSON to convert the response into a hash
   conn.response :json, :content_type => /\bjson$/
   # ...
   conn.adapter Faraday.default_adapter
 end

 connection.get("/")

  # GET https://www.example.com/some/path?query=string
 connection.get("/some/path", :query => "string")

 # POST, PUT, DELETE, PATCH....
 connection.post("/some/other/path", :these => "fields", :will => "be converted to a request string in the body"}

 # add any number of headers. in this example "Accept-Language: en-US"
 connection.get("/some/path", nil, :accept_language => "en-US") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-25T11:29:42.300

```
require 'uri'  
require 'net/http'  

res = Net::HTTP.get_response(URI('http://www.example.com/index.html'))  
puts res.code # -> '200' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-03T14:41:04.110

更具可读性的方式：

`response.kind_of?(Net::HTTPOK)`

# c - 为什么分段错误（核心转储）错误适用于我的 C 程序？

> ID：12685600
> 
> 赞同：0
> 
> 时间：2012-10-02T06:41:07.217
> 
> 标签：c

我不断收到此错误，我不确定它如何应用于我的程序。这是我的程序。

```
#include<stdio.h>
#include<stdlib.h>

int nextword(char *str);

void main(void)
{
  char *str = "Hello! Today is a beautiful day!!\t\n";
  int i = nextword(str);
  while(i != -1)
    {
      printf("%s\n",&(str[i]));
      i = nextword(NULL);
    }
}

int nextword(char *str)
{
  // create two static variables - these stay around across calls
  static char *s;
  static int nextindex;
  int thisindex;
  // reset the static variables
  if (str != NULL)
    {
      s = str;
      thisindex = 0;
      // TODO:  advance this index past any leading spaces
      while (s[thisindex]=='\n' || s[thisindex]=='\t' || s[thisindex]==' '                )
    thisindex++;  

    }
  else
    {
      // set the return value to be the nextindex
      thisindex = nextindex;
    }
  // if we aren't done with the string...
  if (thisindex != -1)
    {
      nextindex = thisindex;
      // TODO: two things
      // 1: place a '\0' after the current word
      // 2: advance nextindex to the beginning
      // of the next word
      while (s[nextindex] != ' ' || s[nextindex] != '\n' || s[nextindex] != '\t')
    {
      if ( s[nextindex] == '\0')
        return -1;
      else
        {
          nextindex++;
          if (s[nextindex]==' '||s[nextindex]=='\n'||s[nextindex]=='\t')
        str[nextindex]='\0';
        }
    }

    }
  return thisindex;
} 
```

我的程序应该有一个输出到控制台

```
Hello!
Today
is 
a
beautiful 
day!! 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T06:46:46.790

您正在尝试更改[String 文字](http://en.wikipedia.org/wiki/String_literal)。这会导致未定义的行为，例如段错误。

```
str[nextindex]='\0' 
```

在这里，`str`是 的参数`nextWord()`，即：

```
char *str = "Hello! Today is a beautiful day!!\t\n";
int i = nextword(str); 
```

因为`"Hello! Today is a beautiful day!!\t\n"`是字符串文字 - 更改它是未定义的行为，并且在您的情况下（幸运的是）它导致了段错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T06:45:21.323

您应该在启用所有警告和调试信息的情况下进行编译（如果在 Linux 上使用*GCC*，则意味着使用 编译`gcc -Wall -g`）。

然后你应该学习如何使用调试器（即`gdb`在 Linux 上）和可能的泄漏检测器，如[valgrind](http://valgrind.org/)

如果您取消引用一些“坏”指针，例如 NULL 指针或未初始化指针，则可能会发生分段[错误。](http://en.wikipedia.org/wiki/Segmentation_fault)如果您写入只读段，也可能发生这种情况（您可能正在覆盖放入只读段的字符串`.text`文字`.rodata`）

考虑编译器的每个警告（并启用它们）并使用调试器是任何 C 程序员的基本技能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:49:13.180

请给`nextindex`一个初始值

# android - 无法使用我的查询重命名字段数据库

> ID：12685603
> 
> 赞同：0
> 
> 时间：2012-10-02T06:41:38.293
> 
> 标签：android, sqlite

> **可能重复：**
> [如何重命名 SQLite 数据库表中的列？](https://stackoverflow.com/questions/805363/how-do-i-rename-a-column-in-a-sqlite-database-table)

我想重命名 SQlite 中的字段表，但我无法在我的应用程序中重命名它。这是我要重命名的查询：

```
ALTER TABLE 'table_name' RENAME 'column1' TO 'new_column1' 
```

但我的查询得到这个错误：

```
SQLiteManager: Likely SQL syntax error: ALTER table 'table_name' 
RENAME 'column1' TO 'new_column1' [ near "'column1'": syntax error ]

Exception Name: NS_ERROR_FAILURE
Exception Message: Component returned failure code: 0x80004005 
(NS_ERROR_FAILURE) [mozIStorageConnection.createStatement] 
```

并且无法重命名字段...我更改了我的查询：

```
ALTER TABLE 'table_name' RENAME COLUMN 'column1' TO 'new_column1'
ALTER TABLE 'table_name' CHANGE 'column1' 'new_column1' TEXT 
```

又出错了……我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:46:31.470

您不能直接重命名 SQLite 表中的列。您需要重新创建表。整体流程是这样的

1.- 使用新列创建一个新表

2.- 将所有旧表内容复制到新表中

3.-重新创建所有索引

4.- 将旧表重命名为另一个名称

5.- 将新表重命名为原名

# c# - 在 mvc 3 的三层架构中获取数据库连接错误

> ID：12685607
> 
> 赞同：0
> 
> 时间：2012-10-02T06:42:09.543
> 
> 标签：c#, asp.net-mvc, 3-tier

我正在尝试使用 mvc 3 实现基本的三层架构。但是在运行解决方案时出现错误（在构建解决方案时没有显示错误）。我的项目组织和错误消息可以在附图中看到。![在此处输入图像描述](../Images/88359922fd7dd7f5c2043f9c21696905.png)

请帮忙。

好的，伙计们，这是一个更新。

正如一些评论所指定的，我将原始连接字符串从 app.config 复制到了我的 web.config 文件并得到了这个错误，如图所示。 ![在此处输入图像描述](../Images/8fa0d8df153d36a754fe2773e023a3c8.png)

我试图搜索很多，但没有任何线索！任何帮助都将得到高度利用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:55:10.117

您复制的连接字符串是普通的连接字符串。您正在使用 edmx 文件，这意味着您需要一个实体连接字符串。

您需要将实体连接字符串复制到 web.config 中。您可以在 EF 为您添加的数据层的 app.config 文件中找到 EF-connectionstring。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:21:58.077

@Maarten 是对的。您总是复制正常的连接字符串（这是实体连接字符串的一部分）。您需要复制在**数据层的****App.config**文件中生成的整个连接字符串，并将其粘贴到**表示层的****web.config**文件中。实体连接字符串，如：

 ******```
<add name="NorthwindEntities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\sqlexpress;initial catalog=Northwind;persist security info=True;user id=sa;password=Blister01;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

**不要复制粘贴它，它只是一个示例**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:51:59.893

您只需在**表示层**中添加连接字符串`connectionStrings`部分！`web.config`

 **[看到这张图片](http://i.stack.imgur.com/50Ey2.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T07:07:21.883

编辑：试试这个

```
<add name="NORTHWINDEntities" providerName="System.Data.SqlClient" connectionString="data source=(local)/sqlexpress; initial catalog=NORTHWND;Integrated Security=SSPI" /> 
```********

# javascript - ajax 从数据库请求接收数据不起作用

> ID：12685618
> 
> 赞同：0
> 
> 时间：2012-10-02T06:42:55.890
> 
> 标签：javascript, mysql, ajax, request, xmlhttprequest

我是 ajax 领域的真正初学者，我真的需要帮助。

事实上，我已经做了一个查询来从数据库中接收一些数据。

在标题上我有：

```
<script type="text/javascript">

    <?php if(isset($_GET['p']) AND $_GET['p']=='create_dossier') {?>
    function writeInDiv(text){
        var objet = document.getElementById('code_client');
        objet.innerHTML = text;
    }

    function ajax()
    {
        var xhr=null;

        if (window.XMLHttpRequest) {
            xhr = new XMLHttpRequest();
        }
        else if (window.ActiveXObject)
        {
            xhr = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xhr.open("GET", "ajaxclient.php?code_client=<?php echo $_GET['code_client'] ; ?>", false);
        xhr.send(null);
        writeInDiv(xhr.responseText);
            setInterval("ajax()",5000);
    }
    <?php }?>
    </script> 
```

在页面 ajaxclient.php 我有以下代码：

```
<?php require_once('Connections/localhost.php'); ?><?php mysql_select_db( $database_localhost ); ?>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
</head>
<body>
 <table width="100%" border="0" id="box-table-a">
  <tr>
    <th scope="col" width="15%">CODE CLIENT</th>
    <th scope="col" width="15%">RAISON SOCIALE</th>
    <th scope="col" width="55%">ADRESSE </th>
    <th scope="col" width="15%">ACTION</th>
  </tr>
<?php 
$code_client=$_GET["code_client"];
      $sql="SELECT * FROM `client` INNER JOIN `adresse_client` ON `client`.`code_client` = `adresse_client`.`code_client` WHERE `client`.`code_client`='".$code_client."'";
        if (mysql_errno() <> 0) 
        {
            echo mysql_error(),'<br>',$sql,'<br>';
            die();
        } 
        $result=mysql_query($sql);
        while($donnees=mysql_fetch_assoc($result))
        {?>

  <tr>
    <td><?php echo $donnees['code_client'] ; ?></td>
    <td><?php echo $donnees['raison_sociale'] ; ?></td>
    <td><p align="left">&nbsp;<?php echo $donnees['rue'].'<br>'.$donnees['complement1'].'<br>'.$donnees['complement2'].'<br>'.$donnees['code_postal'].' - '.$donnees['ville'].'<br>'.$donnees['pays'] ; ?></p></td>
    <td><a href="index.php?p=create_dossier2&amp;code_client=<?php echo $data['code_client'] ; ?>"><img src="images/001_18.gif" width="24" height="24" /></td>
  </tr>
 <?php }
?></table>
</body>
</html> 
```

名为 create_dossier.php 的页面包含：

```
<form action="#" method="get"><fieldset>
 <legend>CR&Eacute;ANCIER</legend>
 <br />
 <label>Raison sociale:</label><input type="hidden" name="p" value="create_dossier" /> <input type="text" name="code_client" onkeypress="form.submit()" /></fieldset><p align="center"><input type="submit" name="enreg" value="Chercher !" /></form> 
```

我想要的是在不发送页面的情况下显示数据，问题是它总是在返回任何数据之前发送表单。为此我不需要ajax。

我真的不知道出了什么问题以及如何纠正它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:02:22.513

实际上，您应该防止像这样提交表单：

```
onclick="return doSomeAction();"

function doSomeAction() {
    // create XHR object
    // send data
    // handle response
    return false;
} 
```

doSomeAction() = ajax() 在你的情况下不要忘记返回 false

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:43:49.670

您应该将查询结果作为 XML 或 JSON 返回，并在调用文件中用 XML 填充表。

这是一个示例 php.file (需要转换为 PDO) require("dbinfo.php");

```
// Get parameters from URL
$code_client=$_GET["code_client"];
// Start XML file, create parent node
$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node);

// Opens a connection to a mySQL server
$connection=mysql_connect ($host, $username, $password);
if (!$connection) {
  die("Not connected : " . mysql_error());
}

// Set the active mySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
die ("Can\'t use db : " . mysql_error());
 }

// Search the rows in the markers table
$sql="SELECT * FROM `client` INNER JOIN `adresse_client` ON `client`.`code_client` = `adresse_client`.`code_client` WHERE `client`.`code_client`='".$code_client."'";
    if (mysql_errno() <> 0) 
    {
        echo mysql_error(),'<br>',$sql,'<br>';
        die();
    } 
    $result=mysql_query($sql);
    while($donnees=mysql_fetch_assoc($result))
}
header("Content-type: text/xml");

    // Iterate through the rows, adding XML nodes for each
            while ($row = @mysql_fetch_assoc($result)){
            $node = $dom->createElement("client");
            $newnode = $parnode->appendChild($node);
            $newnode->setAttribute("'code_client'", $row['code_client']);
            //$newnode->setAttribute("xxx", $row['xx']); list all other

    }
}

echo $dom->saveXML();
?> 
```

# c# - 如何将一组 <= ， >= if...else 语句重构为字典或类似的东西

> ID：12685624
> 
> 赞同：1
> 
> 时间：2012-10-02T06:43:44.037
> 
> 标签：c#, asp.net, if-statement, dictionary, refactoring

有一种方法接收一个 int 参数并通过一组**if...else**语句检查参数来返回一个字符串：

```
if(param == 1)
{
    return "1";
}
else if(param ==20)
{
    return "20";
}
else
{
    if(param <= 10)
    {
        return "below 10";
    }
    else if(param <= 30 )
    {
        return "below 30";
    }
    ...
} 
```

我想知道是否可以将这些 ">= ， <=" 条件放在字典中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:15:52.777

您可以使用`Dictionary<Func<int, bool>, string>`：

```
 private string Do(int input)
    {
        var dic = new Dictionary<Func<int, bool>, string>
            {
                {param => param == 1, "1"},
                {param => param == 20, "20"},
                {param => param <= 10, "below 10"},
                {param => param <= 30, "blow 30"}
            };

        return dic.First(pair => pair.Key(input)).Value;  
    } 
```

**编辑：**

@Maarten 的评论是正确的，`Dictionary`不保证项目的顺序，在这种情况`List`下`KeyValuePair`应该是最好的：

```
 private string Do(int input)
    {
        var pairs = new List<KeyValuePair<Func<int, bool>, string>>
            {
                {param => param == 1, "1"},
                {param => param == 20, "20"},
                {param => param <= 10, "below 10"},
                {param => param <= 30, "blow 30"}
            };

        var pair = pairs.FirstOrDefault(pair => pair.Key(input));
        if (pair == null) return string.Empty; // return whatever you want

        return pair.Value;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:49:21.890

可以使用，例如，字典。

只是*伪代码*的一个例子：

```
var dic = new Dictionary<int,string>{{1,"1"}, {20, "20"}...} 
```

而不是长`if`

```
string value = null; 
dic.TryGetValue(param, out value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:59:07.880

您的操作不是为字典设计的。考虑以下两种情况

```
param == 29 and param ==28 
```

两者都会给出“低于 30”的输出。如果参数变量的范围很大，那么您必须将所有可能的值和相应的输出字符串手动放入字典中。这似乎是个好主意？？？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T07:23:20.420

不，字典不是为此而设计的。如果你真的有太多的比较条件，你可以把比较对象放在一个数组或列表中，将值按相应的顺序放在另一个数组/列表中，然后你使用二进制搜索找到键的索引，并使用索引来获取值。这是一个例子：

```
 static string find(int val)
    {
        int[] keys = {30,40,50};
        string[] messages = {"Below 30","Below 40","Below 50"};
        int idx = Array.BinarySearch(keys,val);
        if(idx < 0)idx = ~idx;
        return idx < 3 ? messages[idx] : "Off the chart!";
    }

    public static void Main (string[] args)
    {
        Console.WriteLine (find(28));
        Console.WriteLine (find(50));
        Console.WriteLine (find(100));
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-22T10:20:26.913

我累了以下。如果您遇到任何问题，请告诉我们：

```
 int testInput = 15;

            Func<int, bool> delegateForCondition1 = param => param == 1;
            var conditionsSet = new HashSet<KeyValuePair<Func<int, bool>, String>> 
                        { 
                          new KeyValuePair<Func<int, bool>, String>(delegateForCondition1, "It is 1"), 
                          new KeyValuePair<Func<int, bool>, String>(param => param <= 10 , "below 10"),
                          new KeyValuePair<Func<int, bool>, String>(param => param <= 30 , "below 30")
                        };

            foreach (KeyValuePair<Func<int, bool>, String> pair in conditionsSet)
            {
                Func<int, bool> currentKeyAsDelegate = pair.Key;
                bool currentResult = pair.Key(testInput);
                Console.WriteLine(currentKeyAsDelegate + "---" + currentResult);
            }

            //Select the first matching condition
            KeyValuePair<Func<int, bool>, String> selectedPair = conditionsSet.FirstOrDefault(p => p.Key(testInput));
            if (selectedPair.Key != null)
            {
                Console.WriteLine(selectedPair.Value);
            }

            Console.ReadLine(); 
```

# php - 长文本数据中的 PHP /MYSQL 变量

> ID：12685627
> 
> 赞同：0
> 
> 时间：2012-10-02T06:44:06.903
> 
> 标签：php, mysql

这怎么可能？

说一个长文本数据，其中保存了变量。

长文本 mysql 数据库中的实际数据位于名为“description”的字段中。

```
"The date today is :" . $data_var . "." 
```

在 PHP 中：

```
$data_var = date('Y/m/d'); 
echo  $row['description']; 
```

输出应该是：

```
The date today is : 2012/10/02. 
```

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:46:20.007

数据库中的变量不会被解析为变量，请使用`str_replace()`：

```
$data_var = date('Y/m/d'); 
echo str_replace('$data_var', $data_var, $row['description']); 
```

或者在你的情况下：

```
echo str_replace('" . $data_var . "', $data_var, $row['description']); 
```

尽量不要在数据库中插入变量！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:39:46.233

我认为您应该分析为什么需要这样做，并且应该重新设计您的应用程序，这样您就不必这样做了。您应该尽力将数据与应用程序逻辑分开，而您要实现的是将应用程序逻辑存储在数据库中。

# string - 给定一组字符串，找到可用于构建这些字符串的最佳词典

> ID：12685628
> 
> 赞同：1
> 
> 时间：2012-10-02T06:44:07.607
> 
> 标签：string, algorithm, np-hard

想象一下我有一组字符串，例如：

```
"entrance",
"scent",
"transcend". 
```

我想找到可用于构建初始字符串的子字符串的最佳“词典”。标准是存储词典和使用该词典的字符串所需的最小内存量。

例如，对于给定的字符串集，子字符串的最佳词典可能是：

```
"scen" = 1,
"tran" = 2,
"en" = 3,
"ce" = 4,
"t" = 5,
"d" = 6 
```

使用以下方式编码的初始字符串集（每个`\N`表示对词典中字符串 N 的引用）：

```
\3\2\4
\1\5
\2\1\6 
```

用于构建字符串的总共 8 个引用 + 存储词典所需的 14 个字符，而原始字符串中的 22 个字符 + 包含原始字母表的 8 个字符。如果您需要一个精确的足迹公式，假设`sizeof( reference ) == sizeof( char )`，并且单个字符串（编码和词典中）的足迹是`length of string * sizeof( char or reference )`，没有额外的开销。

解决这个问题的最佳算法是什么？这个算法有固定的名字吗？NP难吗？如果是这样，是否存在次优但多项式的解决方案？

**编辑**：我能想出的最佳解决方案如下：在初始字符串集中找到最长的公共子字符串。让该子字符串的分数为 ，说明`(substring_length - 1) * total_occurrences_of_it_in_the_set - substring_length`该替换保存的字符/引用的数量。现在找到所有较小的子字符串（直到长度为 2）并以相同的方式计算它们的分数。在以这种方式找到的所有子字符串中，得分最高的子字符串获胜并进入词典。然后子字符串在初始字符串集中被对它的引用替换，并且该过程重复，直到我们的字符串集仅包含单个字符和词典引用。之后，将所有剩余的单个字符引入词典，并用它们在集合中的引用替换它们。打分的解释如下：我们去掉`substring_length`每次出现的字符，添加一个引用（因此`-1`），并且需要`substring_length`字符来存储子字符串（因此`-substring_length`）。

你能想到什么更好的方法吗？

# sas - SAS 如何在没有“保留”语句的情况下保留前一行的值？

> ID：12685632
> 
> 赞同：4
> 
> 时间：2012-10-02T06:44:50.297
> 
> 标签：sas

我正在研究[这个例子](http://support.sas.com/documentation/cdl/en/statug/63962/HTML/default/viewer.htm#statug_mcmc_sect059.htm)，它解释了如何用`proc mcmc`in拟合标准 Cox 模型`SAS 9.3`。

对于数据中的第一行 ( `ind=1`)，`S=exp(bZ)`与其他量一起计算。需要注意的是，这是一个从原始数据集的列构造**`S`的新变量。**

对于第二行 ( `1 < in < &N`)，`S`递增：`S = S + exp(bZ)`。

**问题：** SAS 如何保留`S`上一行的值？我本来希望有一个`retain`声明或类似的东西......

* * *

**代码的相关部分：**

```
if ind = 1 then do;        /* first observation         */
  S = exp(bZ);
  l = vstatus * bZ;
  v = vstatus;
 end;
 else if (1 < ind < &N) then do;
  if (lag1(time) ne time) then do;
     l = vstatus * bZ;
     l = l - v * log(S);  /* correct the loglike value   */
     v = vstatus;         /* reset v count value         */
     S = S + exp(bZ);
  end;
  else do;                /* still a tie                 */
     l = vstatus * bZ;
     S = S + exp(bZ);
     v = v + vstatus;     /* add # of nonsensored values */
  end;
 end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:27:02.793

很抱歉，这不是答案，只需注意[http://support.sas.com/documentation/cdl/en/statug/63962/HTML/default/viewer.htm#statug_mcmc_sect017.htm上的内容](http://support.sas.com/documentation/cdl/en/statug/63962/HTML/default/viewer.htm#statug_mcmc_sect017.htm)

> 大多数可以在 DATA 步中使用的编程语句也可以在 PROC MCMC 中使用。

和

> 在大多数情况下，SAS 编程语句的工作方式与它们在 DATA 步骤中的工作方式相同，如 SAS 语言参考：概念中所述。但是，有几个不同之处......

所以我的印象是内部的语法`BEGINCNST`和`ENDCNST`块几乎与datastep中的相同，但一些内部工作方式不同，这可能是关于保留计算值的情况（？）。因此，这可能与 datastep PDV（程序数据向量）中的工作方式不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:30:10.410

这`lag1()`是保留值的功能，但要小心！

该`lag()`函数将记住*上次执行时*的值，而不是前一行！因为您的滞后函数仅在第一个条件不成立时才会执行`if`，因此可能很难调试由此引起的问题。

我建议更改为使用`retain`更明确且更易于调试的语句。如果您确实选择继续使用该`lag1()`函数并且代码有问题，我建议您将其移出条件逻辑，以便您的代码如下所示：

```
prev_time = lag1(time);
if ind = 1 then do;        /* first observation         */
  S = exp(bZ);
  l = vstatus * bZ;
  v = vstatus;
 end;
 else if (1 < ind < &N) then do;
  if prev_time ne time then do;
     l = vstatus * bZ;
     l = l - v * log(S);  /* correct the loglike value   */
     v = vstatus;         /* reset v count value         */
     S = S + exp(bZ);
  end;
  else do;                /* still a tie                 */
     l = vstatus * bZ;
     S = S + exp(bZ);
     v = v + vstatus;     /* add # of nonsensored values */
  end;
 end; 
```

顺便说一句 - 还有一些`lag(), lag1(), lag2(), lag3(), etc....`功能也存在。

# php - 替换大括号内的所有空格

> ID：12685637
> 
> 赞同：5
> 
> 时间：2012-10-02T06:45:46.750
> 
> 标签：php, regex, preg-replace, preg-match

我想要做的是找到用大括号括起来的所有空格，然后用另一个字符替换它们。

就像是：

```
{The quick brown} fox jumps {over the lazy} dog 
```

更改为：

```
{The*quick*brown} fox jumps {over*the*lazy} dog 
```

我已经在网上搜索过，但到目前为止我得到的只有这个，而且它似乎非常接近我真正想要的。

```
preg_replace('/(?<={)[^}]+(?=})/','*',$string); 
```

我对上述代码的问题是它替换了所有内容：

```
{*} fox jumps {*} dog 
```

我正在研究正则表达式教程，以弄清楚我应该如何修改上面的代码以仅替换空格但无济于事。任何输入将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T06:57:17.807

假设所有大括号都正确嵌套，并且没有嵌套大括号，您可以使用前瞻断言来执行此操作：

```
$result = preg_replace('/ (?=[^{}]*\})/', '*', $subject); 
```

仅当下一个大括号是右大括号时才匹配并替换空格：

```
(?=     # Assert that the following regex can be matched here:
 [^{}]* #  - Any number of characters except braces
 \}     #  - A closing brace
)       # End of lookahead 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T07:34:45.233

我正在对您的评论做出反应，即您不想使用正则表达式，只是字符串操作。没关系，但你为什么还要写你正在寻找一个正则表达式？

没有正则表达式的解决方案：

```
<?php

$str = "{The quick brown} fox jumps {over the lazy} dog";

for($i = 0, $b = false, $len = strlen($str); $i < $len; $i++)
{ 
    switch($str[$i])
    {
        case '{': $b = true; continue;
        case '}': $b = false; continue;
        default:
        if($b && $str[$i] == ' ')
            $str[$i] = '*';
    }
}

print $str;

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T06:57:25.667

这个怎么样：

```
$a = '{The quick brown} fox jumps {over the lazy} dog';
$b = preg_replace_callback('/\{[^}]+\}/sim', function($m) {
    return str_replace(' ', '*', $m[0]);
}, $a);
var_dump($b); // output: string(47) "{The*quick*brown} fox jumps {over*the*lazy} dog" 
```

# php - facebook 注册插件 - 来自 facebook 的邮政编码字段？

> ID：12685645
> 
> 赞同：0
> 
> 时间：2012-10-02T06:46:52.290
> 
> 标签：php, python, facebook, facebook-graph-api, facebook-javascript-sdk

是否可以在 facebook 注册的字段中添加邮政编码和地址字段。如果可能的话，我该如何添加它们？它们实际上可以在我们的 facebook 个人资料中找到，所以我们必须有一种方法可以添加它们。

```
<iframe src="https://www.facebook.com/plugins/registration?
         client_id=appid&
         redirect_uri=https%3A%2F%2Fdevelopers.facebook.com%2Ftools%2Fecho%2F&
         fields=name,birthday,gender,location,email"
    scrolling="auto"
    frameborder="no"
    style="border:none"
    allowTransparency="true"
    width="100%"
    height="330">
</iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:16:46.640

> 是否可以在 facebook 注册的字段中添加邮政编码和地址字段。

不——至少不要让他们被 Facebook 预先填写。

FB 不再将这些信息提供给应用程序——因此，如果您需要它，您必须通过自定义字段向用户请求，以便他们手动填写。

# php - 在 Drupal 7 中创建链接

> ID：12685648
> 
> 赞同：1
> 
> 时间：2012-10-02T06:47:03.220
> 
> 标签：php, drupal, menu

我正在尝试使用 menu_link_save($link) 在 Drupal 7 中创建一个链接

我正在使用 var_dump 检查菜单的名称，它输出：

```
array(8) { ["devel"]=> string(11) "Development" ["menu-drushcommands"]=> string(13) "DrushCommands" ["menu-footer-menu"]=> string(11) "Footer Menu" ["main-menu"]=> string(9) "Main menu" ["management"]=> string(10) "Management" ["navigation"]=> string(10) "Navigation" ["user-menu"]=> string(9) "User menu" ["menu-sub-menu"]=> string(7) "submenu" } 
```

我尝试使用键添加到子菜单的链接，也尝试使用值一次，但它不起作用。

我唯一能做的就是将菜单项添加到导航栏，这是默认的后备值。

这是我的功能：

```
function save_menu(){
$output =  menu_get_menus();
var_dump($output);  

$link = array();

$link['link_title'] = "menulinkname";      //required value
$link['link_path']  = 'ctModules/inserted nodename';    //required value
$link['menu_name']  = 'submenu';                         
menu_link_save($link);
menu_cache_clear_all();
} 
```

# asp.net - 在 asp.net 中的表单之间发送控制值

> ID：12685649
> 
> 赞同：0
> 
> 时间：2012-10-02T06:47:06.607
> 
> 标签：asp.net, visual-studio-2010

我需要在 asp.net 中的表单之间发送控件值我尝试使用以下 URL 发送信息：

DisplayNews.aspx?cmd=HyperLink1.value

并尝试使用以下代码接收信息：

```
string s = Request.QueryString["cmd"]; 
```

但在输出中我看到“HyperLink1.value”而不是实际值。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:50:16.143

尝试这个：

```
 string url = "DisplayNews.aspx?cmd=" + HyperLink1.Text;
        Response.Redirect(url, false); 
```

您可以像这样设置 HyperLink1.NavigateUrl：

```
 HyperLink1.NavigateUrl = "DisplayNews.aspx?cmd=" + HyperLink1.Text; 
```

# google-apps-script - GAS：将文件保存在文件夹中

> ID：12685651
> 
> 赞同：0
> 
> 时间：2012-10-02T06:47:35.363
> 
> 标签：google-apps-script

GAS：我使用 DocumentApp.create 成功创建了一个文件，并使用 saveAndClose() 将它保存在我的驱动器根目录中。我要做的是将文件保存在驱动器根目录中存在的 MyFolder 中。

我可以使用 createFile() 在此文件夹中创建一个文件，但我想使用 DocumentApp.create 创建它，以便我可以格式化文本。这有可能吗？如果不是，是否可以将文件从根目录复制到 MyFolder？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:58:12.797

您可以使用[File.addToFolder()](https://developers.google.com/apps-script/class_file#addToFolder)

# java - hibernate：插入/更新的自定义代码

> ID：12685653
> 
> 赞同：0
> 
> 时间：2012-10-02T06:47:41.563
> 
> 标签：java, hibernate, insert-update

我是hibernate的新手，并试图评估我是否可以将它实际用于我的项目。一种类型的实体需要对插入或更新进行一些特殊检查。我将尝试尽可能简单地解释。假设我们有颜色。用户可以创建 n 种颜色的混合物并将该混合物存储在数据库中。稍后，如果用户搜索颜色“蓝色”，则应显示所有包含蓝色的混合物。

业务规则是任何颜色都只能在数据库中出现一次。因此，如果插入新的混合物，则必须首先检查所有颜色是否已在数据库中，如果是，则应重复使用（引用）该颜色，如果不是则应创建新颜色。

如果一个混合物被改变，说“蓝色”被“红色”取代，行为必须是最初的“蓝色”保持不变，系统检查“红色”是否存在，要么重用它，要么创建它，然后将它添加到混合物。

我怎么能用休眠来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:19:01.380

你可以做到，但这与 Hibernate 没有什么关系。

你描述的东西是你的服务类应该做的事情。

这应该是您的应用程序的逻辑，而不是 ORM 工具应该做的事情。

听到是链接，您可以在其中阅读有关[Hibernate 事件的信息](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html)

# .net - 后台线程集合中对象的线程安全刷新属性

> ID：12685656
> 
> 赞同：0
> 
> 时间：2012-10-02T06:47:59.047
> 
> 标签：.net, vb.net, thread-safety

我有一个对象 a `Product`，它存储在我的应用程序的本地缓存中。这个产品缓存是使用一些 ORM 代码从数据库加载的，我不能轻易更改。为简单起见，`Product`是：

```
Public Class Product
    Public Property ID as Integer
    Public Property Name as String
    Public Property Price as Decimal
    Public Property Rank as Integer
End Class 
```

产品存储在本地缓存中：

```
 Public Class ProductList
       Public Shared Function GetCache as List(Of Product)
           Static _List as List(Of Product)
           If _List is Nothing then
               'Code to load Data and populate List from DB
           End If
           Return _List
       End Function
    End Class 
```

这被大大简化了，但你明白了。

该`Rank`属性是根据过去 90 天的所有销售额计算得出的未绑定字段，因此常见产品在搜索中显示得更高。我想在后台线程上生成排名 - 因为它可能很耗时，并且不时刷新它。像这样的东西：

```
Public Sub UpdateRank
    Dim dt as Datatable
    dt = GetDataTable("exec usp_GetProductRank") 'Returns [ID, Rank]
    For each row in dt.rows
        _prod = getCache.getbyID(row.item(0))
        If _prod isnot Nothing then
            _prod.rank = row.item(1)
        End If
    Next
End Sub 
```

更新排名时可能会使用缓存，从而导致脏读，但我很乐意接受。我想要做的是以线程安全的方式执行此操作。也就是说，更新集合而不用担心是否添加和删除东西等。

我可以使用 a`System.ComponentModel.BackgroundWorker`来执行此更新吗？我在主 UI 中使用了大量线程来处理这样的事情，但这是 DLL 中的非 UI 类。我正在考虑将缓存拉到第`Dictionary(of Integer, Product)`一个？

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:20:38.820

当您使用对对象的共享写访问时，您将需要使用锁或信号量来避免冲突。这样做时，它会告诉其他线程等到对象被解锁。这不需要 cpu 资源。当对象被解锁时，下一个线程可以在先到先服务的基础上访问它（理论上）。

前：

VB.Net：

```
Class ThreadSafe

    Private Shared _locker As Object = New Object

    Private Shared Sub Go()
        SyncLock _locker
            If (_val2 <> 0) Then
                Console.WriteLine((_val1 / _val2))
            End If
            _val2 = 0
        End SyncLock
    End Sub
End Class 
```

C＃：

```
class ThreadSafe
{
  static readonly object _locker = new object();
  static int _val1, _val2;

  static void Go()
  {
    lock (_locker)
    {
      if (_val2 != 0) Console.WriteLine (_val1 / _val2);
      _val2 = 0;
    }
  }
} 
```

示例来自一本免费的电子书，它是关于多线程的极好参考： [http ://www.albahari.com/threading/part2.aspx#_Locking](http://www.albahari.com/threading/part2.aspx#_Locking)

# mocking - 模拟通过 websphere mq 工作的外部系统

> ID：12685657
> 
> 赞同：3
> 
> 时间：2012-10-02T06:48:08.617
> 
> 标签：mocking, ibm-mq, messagebroker

我正在开发与*消息代理*的集成解决方案。*解决方案使用websphere mq*与后端系统通信。在开发过程中，我无法访问真正的后端服务，所以我不得不以某种方式模拟它。模拟实现必须从队列中读取消息，执行简单的转换，然后将消息放回队列。为了实现这一点，我考虑过创建单独的消息流，但我实际上正在寻找的是现成的解决方案，我可以利用这些任务来实现。

有人知道任何可能对此有用的工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:21:44.203

设置自己的 QMgr 怎么样？甚至是您自己的经纪人和 QMgr？根据 WebSphere Message Broker 最新版本的许可条款，任何拥有单一付费许可的人都有权在开发人员桌面（Windows 和 Linux）上安装任何或所有代理组件。Infocetner[*许可证要求*](http://publib.boulder.ibm.com/infocenter/wmbhelp/v7r0m0/index.jsp?topic=/com.ibm.etools.mft.doc/bh25920_.htm)主题指出：

> 您的许可证还涵盖将产品用于开发和单元测试目的。组织中所有为 WebSphere Message Broker 开发资源和应用程序的开发人员都可以在他们的计算机上安装所有组件的一个副本。他们可以在没有任何功能或资源限制的情况下创建和配置代理环境。WebSphere Message Broker Toolkit 的安装将这种用途限制为 Windows、x86 上的 Linux 和 x86-64 计算机上的 Linux。即使您购买了 WebSphere Message Broker for z/OS 的许可证，单元测试环境也仅限于这三个平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-08T17:31:32.887

有一些工具允许模拟或模拟通过 IBM Websphere MQ 进行通信的系统。

您可以使用例如[Traffic Parrot](http://trafficparrot.com/documentation/3.10.x/ibmmq.html)。它将从请求队列中读取消息，进行转换（使用其[扩展](http://trafficparrot.com/documentation/3.10.x/extensions.html#extract-data)）并将响应消息放入响应队列。看看这个演示如何做到这一点的[视频。](https://www.youtube.com/watch?v=ZHREpYQ-vvM)

看看其他[API 模拟工具](https://en.wikipedia.org/wiki/Comparison_of_API_simulation_tools)，只要确保您选择支持 IBM MQ 的工具即可。

# java - 缩放时 GWT 中心对话框

> ID：12685658
> 
> 赞同：1
> 
> 时间：2012-10-02T06:48:09.983
> 
> 标签：java, gwt, zooming, dialog

我正在开发一个`GWT` `mobile`应用程序`GWT 2.4`。我希望我`DialogBox`总是在用户`viewport`缩放或正常视图的中心看到。在普通视图上，`center()`可以处理它，但是当页面缩放时，`DialogBox`整个浏览器窗口的中心会弹出，其中包括页面的滚动部分，而不是用户视口的中心。这个怎么做？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T02:23:05.910

我必须`implements ResizeHandler`在我的窗口及其构造函数上添加`ResizeEvent`处理程序 > `Window.addResizeHandler(this);`。因为我正在实现`ResizeHandler`接口，所以我需要覆盖以下内容：

```
@Override
public void onResize(ResizeEvent event) {
    if (isShowing() ) { //check if popup is showing
        int left = (Window.getClientWidth() * 0.5 - (widthOfMyWindow * 0.5) );
        int top = (Window.getClientHeight() * 0.5  - (heightOfMyWindow * 0.5) );

        setPopupPosition( left < 10 ? 10 : left, top < 0 ? 0 : top );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:29:18.513

您需要将处理程序附加到捕获缩放事件的窗口。在此处理程序中，您调用

```
myDialogBox.setPopupPosition((Window.getClientWidth() - myDialogBox.getOffsetWidth())/2, (Window.getClientHeight() - myDialogBox.getOffsetHeight())/2);
} 
```

如果您想以不同的方式对待它们，您可能需要添加检查对话框大于浏览器窗口的情况。

# loops - Excel VBA：将遍历唯一名称组并创建相应图表的图表制作宏？

> ID：12685660
> 
> 赞同：0
> 
> 时间：2012-10-02T06:48:14.070
> 
> 标签：loops, excel, charts, vba

好吧，我一直在绞尽脑汁，为傻瓜阅读 excel 编程，并四处寻找，但我正在为我在这里遇到的这个小问题感到压力。我对 vba 编程或任何编程语言都是全新的，但我正在尽力掌握它。

场景和我的目标是：

下图是我从不同流站获得的一长串数据的示例。该样本仅包含两个（niobrara 和蛇）来说明我的问题，但实际上我有超过 80 个站的数据，每个站的压力期数量都不同（B 栏）。

COLUMN A，是站名列。COLUMN B，应力期数 COLUMN C，模拟速率 COLUMN D，估计速率

我一直试图弄清楚的是如何制作一个宏来循环遍历站名（A列），并为每个唯一的站名组制作一个图表，该图表将在组的右侧弹出，例如E 列区域。

图表非常简单，只需要两个系列的散点图/折线图；一个系列，B 列作为 x 值，C 列作为 y 值；其他系列需要 COLUMN B 作为 x 值，COLUMN D 作为 y 值。

现在我的主要考验是，我不知道如何让宏区分站名，使用与该名称相关的所有数据制作图表，然后循环到下一个站组并创建一个对应于的图表并继续循环遍历 A 列中的所有 80 多个电台名称，并在其右侧制作相应的 80 多个图表，例如 COLUMN E。

如果我有足够的积分来“赏金”，我会心跳加速。但既然我没有，那么谁能解决我的困境，我真诚地感谢帮助我理解这个问题顺利运行，并希望将来能更好地理解这样的场景。如果我需要澄清更多信息以使我的问题更易于理解，请评论您的查询，我很乐意更详细地解释该主题。

干杯。

哦，还有额外的功劳；现在我考虑了一下，我在 COLUMN B 中手动输入了数字。由于循环需要使用该列作为 x 值，因此如果它可以循环自身并在生成之前自行填充该列，这将是很重要的图表（我想它与“计算与站名对应的行”这样简单的事情有关。但同样，我不知道与站名相对应的正确术语，因此我是泡菜m in; 但是，如果足够精明地回答这个问题的资深程序员可以，我想这样一段代码将足够简单，但对于我寻求的这样一个宏的成功至关重要。

![在此处输入图像描述](../Images/28ed03a8c44700fa703139b957cc079b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:12:01.380

尝试这个

```
Sub MakeCharts()
    Dim sh As Worksheet
    Dim rAllData As Range
    Dim rChartData As Range
    Dim cl As Range
    Dim rwStart As Long, rwCnt As Long
    Dim chrt As Chart

    Set sh = ActiveSheet

    With sh
        ' Get reference to all data
        Set rAllData = .Range(.[A1], .[A1].End(xlDown)).Resize(, 4)
        ' Get reference to first cell in data range
        rwStart = 1
        Set cl = rAllData.Cells(rwStart, 1)
        Do While cl <> ""
            ' cl points to first cell in a station data set
            ' Count rows in current data set
            rwCnt = Application.WorksheetFunction. _
               CountIfs(rAllData.Columns(1), cl.Value)
            ' Get reference to current data set range
            Set rChartData = rAllData.Cells(rwStart, 1).Resize(rwCnt, 4)
            With rChartData
                ' Auto fill sequence number
                .Cells(1, 2) = 1
                .Cells(2, 2) = 2
                .Cells(1, 2).Resize(2, 1).AutoFill _
                   Destination:=.Columns(2), Type:=xlFillSeries
            End With
            ' Create Chart next to data set
            Set chrt = .Shapes.AddChart(xlXYScatterLines, _
               rChartData.Width, .Range(.[A1], cl).Height).Chart
            With chrt
                .SetSourceData Source:=rChartData.Offset(0, 1).Resize(, 3)
                ' --> Set any chart properties here

                ' Add Title
                .SetElement msoElementChartTitleCenteredOverlay
                .ChartTitle.Caption = cl.Value

                ' Adjust plot size to allow for title
                .PlotArea.Height = .PlotArea.Height - .ChartTitle.Height
                .PlotArea.Top = .PlotArea.Top + .ChartTitle.Height

                ' Name series'
                .SeriesCollection(1).Name = "=""Modeled"""
                .SeriesCollection(2).Name = "=""Estimated"""

                ' turn off markers
                .SeriesCollection(1).MarkerStyle = -4142 
                .SeriesCollection(2).MarkerStyle = -4142 

            End With

            ' Get next data set
            rwStart = rwStart + rwCnt
            Set cl = rAllData.Cells(rwStart, 1)
        Loop

    End With

End Sub 
```

# c# - 对 SSIS 中的完整行集合执行 LINQ？

> ID：12685661
> 
> 赞同：0
> 
> 时间：2012-10-02T06:48:17.753
> 
> 标签：c#, linq, ssis

嗯，正如标题所说。我想使用脚本组件目标，然后利用 LINQ 选择要处理哪些行以进行输出。

对于更多背景知识，我将这个丑陋的合并事物与一对多关系。这些行看起来有点像：

```
[ID] [Title]   [OneToManyDataID]
1    Item one   2
1    Item one   4
1    Item one   3
3    Item two   1
3    Item two   5 
```

我们将调用对象 [Item]，它具有 ID 和 Title 列以及 [OneToMany]

我希望我可以把整个东西扔到一个脚本组件的目的地，然后使用 LINQ 做一些事情，比如按项目分组，只从最高的 OneToMany 对象中获取数据。有点像：

```
foreach(var item  in Data.GroupBy(d=>d.Item).Select(d=> new {Item = d.Key})){
     //Then pick out the highest OneToMany ID for that row to use with it.
} 
```

我意识到可能有更好的 LINQ 查询来实现这一点，但关键是，SSIS 中的脚本组件似乎只允许使用预定义的 ProcessInputRow 方法在每行的基础上使用它。我想在哪里准确确定处理了哪些行以及将哪些属性传递给该方法。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:10:20.513

要重申您的问题，如何使脚本转换停止逐行处理？默认情况下，脚本转换将是一个同步组件 - 1 行输入，1 行输出。您需要将其更改为异步组件 1 行输入 - 0 到多行输出。

在脚本转换编辑器的 Inputs and Outputs 选项卡上，为您的输出集合`Output 0`将 SynchronousInputID 的值从它的任何值更改为`None`.

不要在我的 LINQ 代码上扔石头——我相信你可以处理好这项工作。此代码块的目的是演示如何收集行进行处理，然后在修改它们后将它们传递给下游消费者。我对这些方法进行了评论，以帮助您了解它们每个人在脚本组件生命周期中的作用，但如果您更愿意阅读[MSDN](http://msdn.microsoft.com/en-us/library/ms136045.aspx)，他们知道的比我多一点；）

```
using System;
using System.Data;
using System.Linq;
using System.Collections.Generic;
using Microsoft.SqlServer.Dts.Pipeline.Wrapper;
using Microsoft.SqlServer.Dts.Runtime.Wrapper;

[Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute]
public class ScriptMain : UserComponent
{
    /// <summary>
    /// Our LINQ-able thing.
    /// </summary>
    List<Data> data;

    /// <summary>
    /// Do our preexecute tasks, in particular, we will instantiate
    /// our collection.
    /// </summary>
    public override void PreExecute()
    {
        base.PreExecute();
        this.data = new List<Data>();
    }

    /// <summary>
    /// This method is called once the last row has hit.
    /// Since we will can only find the highest OneToManyDataId
    /// after receiving all the rows, this the only time we can
    /// send rows to the output buffer.
    /// </summary>
    public override void FinishOutputs()
    {
        base.FinishOutputs();
        CreateNewOutputRows();
    }

    /// <summary>
    /// Accumulate all the input rows into an internal LINQ-able
    /// collection
    /// </summary>
    /// <param name="Row">The buffer holding the current row</param>
    public override void Input0_ProcessInputRow(Input0Buffer Row)
    {
        // there is probably a more graceful mechanism of spinning
        // up this struct.
        // You must also worry about fields that have null types.
        Data d = new Data();
        d.ID = Row.ID;
        d.Title = Row.Title;
        d.OneToManyId = Row.OneToManyDataID;            
        this.data.Add(d);
    }

    /// <summary>
    /// This is the process to generate new rows. As we only want to
    /// generate rows once all the rows have arrived, only call this
    /// at the point our internal collection has accumulated all the
    /// input rows.
    /// </summary>
    public override void CreateNewOutputRows()
    {
        foreach (var item in this.data.GroupBy(d => d.ID).Select(d => new { Item = d.Key }))
        {
            //Then pick out the highest OneToMany ID for that row to use with it.
            // Magic happens
            // I don't "get" LINQ so I can't implement the poster's action
            int id = 0;
            int maxOneToManyID = 2;
            string title = string.Empty;
            id = item.Item;
            Output0Buffer.AddRow();
            Output0Buffer.ID = id;
            Output0Buffer.OneToManyDataID = maxOneToManyID;
            Output0Buffer.Title = title;
        }
    }

}
/// <summary>
/// I think this works well enough to demo
/// </summary>
public struct Data
{
    public int ID { get; set; }
    public string Title { get; set; }
    public int OneToManyId { get; set; }
} 
```

脚本转换的配置

![输入选项卡](../Images/599ca28de26558a8518f9fc25e4256bb.png)

![输出](../Images/ef03371b68d09fd9c2febbcc0260af02.png)

![结果](../Images/02e9113e2275cd2d11141d460677e172.png)

# c++ - 防止 .lib 在运行时加载 DLL

> ID：12685664
> 
> 赞同：0
> 
> 时间：2012-10-02T06:48:43.807
> 
> 标签：c++, visual-c++, dll, runtime, dllimport

我如何防止导入库加载它在运行时引用的 DLL，直到我调用类似的东西`LoadLibrary`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:55:42.297

也许你需要这个：

[http://www.west-wind.com/weblog/posts/2007/Dec/02/Delay-Loading-a-DLL-with-a-Linker-Switch-in-Visual-Studio](http://www.west-wind.com/weblog/posts/2007/Dec/02/Delay-Loading-a-DLL-with-a-Linker-Switch-in-Visual-Studio)

[http://www.codeproject.com/Articles/273419/Dynamic-Libraries-with-Delayed-Function-Loading](http://www.codeproject.com/Articles/273419/Dynamic-Libraries-with-Delayed-Function-Loading)

# ruby-on-rails - 可以调用 Rails ActionMailer 邮件方法的次数

> ID：12685668
> 
> 赞同：0
> 
> 时间：2012-10-02T06:48:54.213
> 
> 标签：ruby-on-rails, ruby, actionmailer

是否可以从一个方法多次调用 ActionMailer 邮件方法？我想发送一些类似的电子邮件，并想遍历收件人列表并为每个收件人调用一次邮件。

我可以将它向上推到调用和传递邮件程序类方法的位置，但我很想看到关于邮件方法是否可以在单个 ActionMailer 方法中多次调用的明确答案。

明确地说，这个特定的问题不能通过传递给 mail 方法的 to、cc 或 bcc 散列中的地址数组来解决。

要么必须多次调用 mail 方法，要么需要多次调用 ActionMailer 类方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:10:34.837

您可以多次调用该方法。您可能遇到的唯一问题是，如果您没有后台任务系统（如 Resque、Sidekiq 或 girlFriday），在 Web 请求期间发送大量邮件可能会触发 tiemout。

# asp.net-mvc - 编辑默认 TypeScript 模板/脚手架

> ID：12685674
> 
> 赞同：2
> 
> 时间：2012-10-02T06:49:21.973
> 
> 标签：asp.net-mvc, typescript

我今天一直在使用 TypeScript 和 MVC4。一切运行良好，但每次我使用 VS 的“添加/TypeScript 文件”对话框添加新的 .ts 文件时，添加的文件都会填充一些示例代码：

```
 // Interface
interface IPoint {
getDist(): number;
}

// Module
module Shapes { 
```

.... ETC。

这个示例代码来自哪里？我希望我的文件为空。我不想每次添加文件时都撕掉这段代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T09:06:50.403

您需要编辑模板，您可以在此处找到...

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\msfz1qy5.oca\~IC\IT\CSharp\1033\f.zip 
```

名为的文件`file.ts`包含 TypeScript 新文件的项目模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:55:57.050

上面史蒂夫芬顿的回答是正确的，但是对于 TypeScript 0.8.3，我必须使用 Windows 搜索功能来查找 f.zip - 它现在位于三个位置，至少对我而言：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TypeScript\~IC\IT\CSharp\1033\f.zip
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TypeScript\IT\CSharp\1033\f.zip
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\VWDExpressExtensions\TypeScript\IT\CSharp\1033\f.zip 
```

只有在更改了上述所有内容后，TypeScript 文件才会以正确的模板出现。

如果 Microsoft 包含更改默认值的选项，那就太好了；每次我想添加文件时都必须删除一堆不必要的代码并不好——这在设置项目时尤其令人恼火，这可能涉及在复杂的目录树中创建超过 100 个源文件。谷歌搜索终于把我带到了这篇文章。

# c# - 在方法中使用多个 RETURN 语句是一种好习惯吗？

> ID：12685675
> 
> 赞同：16
> 
> 时间：2012-10-02T06:49:32.780
> 
> 标签：c#, asp.net

> **可能重复：**
> [为什么在方法结束时返回是一种好习惯](https://stackoverflow.com/questions/708675/why-is-it-good-practice-to-return-at-the-end-of-a-method)

我想知道在一个方法中使用多个 RETURN 语句是否可以被认为是一种好的做法，以及为什么。如果没有，我想知道您将如何以不同的方式重写代码。

```
public string GetNominativeById(int? candidateId)
        {
            if (candidateId.HasValue)
                return repepositoryCandidate.GetById(candidateId.Value).Nominative;
             else
                return string.Empty;
            }
        } 
```

一次返回

```
 public string GetNominativeById(int? candidateId)
    {
        string result;
        if (candidateId.HasValue)
            result =  repepositoryCandidate.GetById(candidateId.Value).Nominative;
         else
            result =  string.Empty;

        return result;
        }
    } 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-02T06:52:24.257

你实际上并不需要`else`

```
string GetNominativeById(int? candidateId)
{
    if (!candidateId.HasValue)  
        return string.Empty;

    return repepositoryCandidate.GetById(candidateId.Value).Nominative;
} 
```

考虑这种*反箭头模式*：

```
if (condition1)
{
    if (condition2)
    {
        if (condition3)
        {
            // code lines
        }
    }
} 
```

*立即返回*的方式将使您的代码更具可读性：

```
if (!condition1) return;
if (!condition2) return;
if (!condition3) return;

// code lines 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-02T06:53:59.083

不，在一个方法中有多个退出点被认为是~~不好的做法而不是好的做法。~~如果有单点退出，则更容易遵循代码。

但是，当方法像示例中一样小时，无论如何遵循代码并不难，因此具有多个退出点并不是问题。如果它使代码更简单，您可以很好地使用多个`return`语句。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-02T06:52:14.053

尽管出于可读性目的，您应该努力只使用一个 return 语句，但有几种模式涉及多个 return 语句。一个例子是**[Guard Clause](http://c2.com/cgi/wiki?GuardClause)**。

保护条款示例：

```
 public Foo merge (Foo a, Foo b) {
    if (a == null) return b;
    if (b == null) return a;
    // complicated merge code goes here.
  } 
```

一些风格指南会让我们用一个单一的回报来写这个，如下所示

```
 public Foo merge (Foo a, Foo b) {
    Foo result;
    if (a != null) {
      if (b != null) {
        // complicated merge code goes here.
      } else {
        result = a;
      }
    } else {
      result = b;
    }
    return result;
  } 
```

另一种情况是 switch 语句，当您可能希望从每种情况下返回时：

```
switch(foo)
{
   case "A":
     return "Foo";
   case "B":
     return "Bar";
   default:
     throw new NotSupportedException();
} 
```

我会将您的代码重写为：

```
 public string GetNominativeById(int? candidateId)
        {
            return candidateId.HasValue 
                ? repepositoryCandidate.GetById(candidateId.Value).Nominative;
                : string.Empty;
        } 
```

归根结底，请记住您（和其他开发人员）将多次*阅读*您的代码，因此请确保其可读性和明显性。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-02T06:53:16.933

看看维基百科上的以下[文章](http://en.wikipedia.org/wiki/Structured_programming)。您要问的是您是否应该遵循结构化编程的 SESE（单入口，单出口）原则。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-02T07:00:53.480

拥有更多的 return 语句并没有错，有时它实际上可以帮助您缩小代码并节省一些不必要的变量分配，就像 Cuong Le 指出的那样。:D

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-02T06:53:19.637

[结构化编程](http://en.wikipedia.org/wiki/Structured_programming)的规则之一是每个方法都应该有一个入口和出口点。有一个退出点（`return`在这种情况下是语句）意味着任何清理，例如调用 Close 或 Dispose，只需要发生一次。拥有多个出口点对小型方法的影响很小，但随着方法复杂性的增加而增加，在这种情况下可能很容易遗漏一个案例，或者代码被重构或修改。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-02T06:51:35.413

养成`return`在方法末尾添加的习惯，因此您必须关闭所有活动对象（*如果有*）

```
public string GetNominativeById(int? candidateId)
{
    string _returnValue = string.Empty;
    if (candidateId.HasValue)
        _returnValue repepositoryCandidate.GetById(candidateId.Value).Nominative;
     else
        _returnValue =  string.Empty;

    return _returnValue;
} 
```

旁注：三元运算符并不是这个问题的真正答案（*我认为*），因为在某些情况下，您的`IF`语句中有多个代码块。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-02T06:53:18.657

这一切都取决于

*   您与其他开发人员一起使用的编码标准
*   和实际代码可读性（所以个人对代码的看法）

一般来说，当`if/else`变得太多时，我会使用`return`。

所以不要使用：

```
if(...)
{
    if(...)
    {
        if(...)
        {
        }
    }
    else if(...)
    {
    }
     ..
    else
    {
    }
} 
```

使用`return`：

```
if(!...)
   return;

if(!...)
   return; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-02T06:53:36.503

你实际上不能在一个方法中使用多个返回语句，你在代码中所做的，你使用了 if else 语句，所以无论如何只会执行一个。你的代码对我来说似乎很好。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-10-02T06:54:50.567

是的，如果有必要，那么为什么不使用多个 return 语句。性能不会有问题。

要重写此代码：

```
public string GetNominativeById(int? candidateId)
{
    if (candidateId.HasValue)
          return repepositoryCandidate.GetById(candidateId.Value).Nominative;

    return string.empty;
} 
```

或使用“三元运算符”。

```
public string GetNominativeById(int? candidateId)
{
     return candidateId.HasValue ? repepositoryCandidate.GetById(candidateId.Value).Nominative : string.Empty;  
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-02T06:51:36.877

为什么不？但你不需要别的。

```
public string GetNominativeById(int? candidateId)
        {
            if (candidateId.HasValue)
                return repepositoryCandidate.GetById(candidateId.Value).Nominative;
            return string.Empty;
        } 
```

# javascript - 不附加属性的主干视图元素

> ID：12685681
> 
> 赞同：0
> 
> 时间：2012-10-02T06:50:13.673
> 
> 标签：javascript, jquery, backbone.js, backbone-views

我正在尝试将 HTML TD 标记附加到另一个视图中的选定名称列表。它会产生一个空的 div 标签。列表包含逗号分隔的值。您能解释一下如何将属性附加到视图元素吗？

以下是将 TD 作为视图元素传递的基本视图中的代码。

```
base view
--------

                            var model = new DataNames();
                      var view = new SearchDataView({
                                model:model
                            });
                view.render().showModal({
                    x: event.pageX,
                    y: event.pageY
                            });
                            var dName = new DataNamesView({
                                    el: "#dataName"  // this needs to be populated
                            });
                            dName.render();

subview 1 --- this view gets called from base view

 SearchDataView = Backbone.ModalView.extend(
        {
        name: "SearchDataView",
        model: DataNames,
        templateHtml :  
                "<div id='select'><span>Search name</span>" +
                "<table border='1'>"+
                "<tr>"+
                "<td><input type='checkbox' value='test1'></td>"+
                     "<td name='selected'>test1</td>"+
                     "<td></td>"+
                     "<td></td></tr>"+
                     "<tr>"+
                "<td><input type='checkbox' value='test2'></td>"+
                     "<td name='selected'>test2</td>"+
                     "<td></td>"+
                     "<td></td></tr>"+

"</table><button id='select'>Select</button></div>", 

                initialize: function(){
                _.bindAll( this, "render");
                                this.template = _.template( this.templateHtml);
                        },
        events: {
                "click #select": "select"
                        },
                select: function(){
                                 var allVals = [];
                                 $('#select :checked').each(function() {
                                   allVals.push($(this).val());
                                 });
                                 alert(allVals);
                                 this.model.set("name",allVals);
                                 var dName = new DataNamesView({selectedList: allVals});
                                 dName.render();
                                 this.hideModal();
                              },        
        render: function(){
                            $(this.el).html(this.templateHtml); 
                            return this;
            }
    });

subview 2
----------  

        DataNamesView = Backbone.ModalView.extend(
        {
        name: "DataNamesView",

                initialize: function(){
            _.bindAll( this, "render");
                            var selectedList = this.options.selectedList;
                        },
        events: {

                        },
                render: function(name){
                                alert("selected from names view"+this.options.selectedList);

                                this.el.innerHTML = "testing";// this works fine
                            // $(this.el).html(this.options.selectedList); //does not work 
                            //this.el.innerHTML = this.options.selectedList;//does not work
                            //this.$el.append(this.options.selectedList); //does not work
                            return this;
                           }
    }); 
```

# java - m2e 连接器 buildhelper 与 Eclipse Juno SR1 m2e 1.2 不兼容

> ID：12685683
> 
> 赞同：13
> 
> 时间：2012-10-02T06:50:21.900
> 
> 标签：java, eclipse, maven

**更新**：将解决方案移至答案

Eclipse Juno SR1 安装 m2e 插件版本 1.2。Eclipse 市场提供的 m2e 连接`buildhelper`器与此版本的 m2e 插件不兼容。我一直在查看各种邮件列表，但找不到可以找到更新的 buildhelper 的位置。

尝试安装 m2e 连接器 buildhelper 时出现以下错误：

```
Operation details
Cannot complete the install because of a conflicting dependency.
Software being installed: m2e connector for build-helper-maven-plugin 0.15.0.201109282249 (org.sonatype.m2e.buildhelper.feature.feature.group 0.15.0.201109282249)
Software currently installed: m2e - Maven Integration for Eclipse 1.2.0.20120903-1050     (org.eclipse.m2e.feature.feature.group 1.2.0.20120903-1050)
Only one of the following can be installed at once: 
    Maven Integration for Eclipse JDT 1.2.0.20120903-1050 (org.eclipse.m2e.jdt 1.2.0.20120903-1050)
    Maven Integration for Eclipse JDT 1.1.0.20120530-0009 (org.eclipse.m2e.jdt 1.1.0.20120530-0009)
Cannot satisfy dependency:
    From: m2e - Maven Integration for Eclipse 1.2.0.20120903-1050 (org.eclipse.m2e.feature.feature.group 1.2.0.20120903-1050)
    To: org.eclipse.m2e.jdt [1.2.0.20120903-1050]
Cannot satisfy dependency:
    From: m2e connector for build-helper-maven-plugin 0.15.0.201109282249 (org.sonatype.m2e.buildhelper 0.15.0.201109282249)
    To: bundle org.eclipse.m2e.jdt [1.1.0,1.2.0)
Cannot satisfy dependency:
    From: m2e connector for build-helper-maven-plugin 0.15.0.201109282249 (org.sonatype.m2e.buildhelper.feature.feature.group 0.15.0.201109282249)
    To: org.sonatype.m2e.buildhelper [0.15.0.201109282249] 
```

在我们的 pom 文件中，我们使用 buildhelper 将带有生成源的目录添加到 Eclipse：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.5</version>
    <executions>
      <!-- Fix this eclipse error by discovering the plugin in the marketplace -->
        <execution>
            <id>add-source</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>add-source</goal>
            </goals>
            <configuration>
                <sources>
                        <source>${project.build.directory}/generated-sources/cxf</source>
                </sources>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-02T10:35:55.680

pom 中的注释建议使用 Eclipse 市场来安装 buildhelper：

```
<!-- Fix this eclipse error by discovering the plugin in the marketplace --> 
```

这样做不行，因为 Eclipse 市场中的 buildhelper 版本已经过时。

我没有使用 Eclipse Marketplace，而是使用 Eclipse 安装新软件菜单选项直接从 Sonatype 存储库安装了 buildhelper。具有（当前）最新版本的 Sonatype 存储库在这里： [https ://repository.sonatype.org/content/repositories/forge-sites/m2e-extras/0.15.0/N/0.15.0.201206251206/](https://repository.sonatype.org/content/repositories/forge-sites/m2e-extras/0.15.0/N/0.15.0.201206251206/)

这解决了我的问题。

# ios - 在哪里存储音乐？

> ID：12685687
> 
> 赞同：0
> 
> 时间：2012-10-02T06:50:34.067
> 
> 标签：ios, app-store

我正在开发一个从网上下载音乐的应用程序。我现在需要将它上传到应用商店。但是我不知道应该将加载的音乐保存在哪个文件夹中。它说对于从 Web 下载的文件，我需要使用 Library/Caches 目录，但 iOS 可以从该目录中删除文件。我不希望这种情况发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:53:12.027

将它们存储在 Documents 或 Library 目录中。（`NSDocumentsDirectory`和`NSLibraryDirectory`常量，分别。）iOS 不会删除存储在其中的文件，因为这些不是临时（tmp 或缓存）路径。

# c# - Ncrunch all test pass 第一次运行，但在代码更改和运行时按下所有按钮后失败

> ID：12685690
> 
> 赞同：2
> 
> 时间：2012-10-02T06:50:39.793
> 
> 标签：c#, nunit, ninject, ncrunch

我正在使用 nunit 和 ninject 在 VS2012 中的新 MVC 4 解决方案中运行 ncrun。

当我第一次打开解决方案时，所有 50 个左右的测试运行并成功通过。

在我进行任何代码更改（即使只是添加了空白区域）之后，ncrun 报告我的大部分单元测试都失败了。如果我在 ncrunch 窗口中按“运行所有测试”，也会发生同样的事情。

但是，如果您点击“运行此处可见的所有测试”按钮，则所有 50 次测试再次通过，并且 ncrunch 报告一切都很好。

此外，当您单独运行每个测试时，它们每次都通过。

当他们确实失败时，他们似乎在我的 ninject 设置代码中失败了

错误：ControllerTestSetup 中的 TestFixtureSetUp 失败

```
public class ControllerTestSetup
{

    [SetUp]
    public void InitIntegrationTest()
    {
        var context = IntegrationTestContext.Instance;
        context.Init();
        context.NinjectKernel.Load<MediGapWebTestModule>();
    }

    [TearDown]
    public void DisposeIntegrationTest()
    {
        IntegrationTestContext.Instance.Dispose();
    }
}

public class IntegrationTestContext : IDisposable
{  

    private static IntegrationTestContext _instance = null;
    private static readonly object _monitor = new object();

    private IntegrationTestContext() { }

    public static IntegrationTestContext Instance
    {
        get
        {
            if (_instance == null)
            {
                lock (_monitor)
                {
                    if (_instance == null)
                    {
                        _instance = new IntegrationTestContext();
                    }
                }
            }

            return _instance;
        }
    }
} 
```

所有测试也在 resharper 测试运行器中运行，每次都没有问题。

有谁知道这可能是什么原因造成的？

我猜这与 Instance 属性中的单例锁定代码有关，但我不确定。

==================================================== ============================= 进度：

通过将其包装在 try catch 语句中并将错误写入输出窗口，我能够将其追踪到上述 ninject 设置方法中的错误。

该异常是由于尝试多次加载模块引起的，即使我绝对没有，也没有使用任何类型的自动模块加载。

这发生在线路上

```
LocalSessionFactoryModule.SetMappingAssemblies(() => new[] { typeof(ProviderMap).Assembly });

_kernel.Load<LocalSessionFactoryModule>();
_sessionFactory = _kernel.Get<ISessionFactory>(); 
```

其中 LocalSessionFactoryModule 是为 NinjectModule 类派生的 ninject 模块类。

为什么这只发生在 ncrun 上，我能做些什么来解决这个问题？有没有办法检查模块是否已经加载？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T10:41:33.350

NCrunch 永远不会在同一进程中执行并发测试，因此除非您的测试逻辑中有多线程行为，否则可以肯定地说这不是由单例上的锁定或线程引起的问题。

由于您已经尝试禁用并行执行并且这没有产生任何影响，我假设问题不会是由测试运行程序进程之外的资源（即磁盘上的文件）的并发使用引起的。

这意味着问题几乎肯定与执行测试的顺序有关。几乎所有手动测试运行程序（包括 Resharper）都会按照定义的顺序从开始到结束运行测试。这有利于一致性，但它可以掩盖测试以不一致/随机顺序运行时可能出现的问题。NCrunch 将按优先级顺序执行测试，并且还可以在测试运行之间重用测试过程，如果没有考虑到这一点，这可能会使测试的运行时行为有所不同。

显示（并因此调试）与序列相关的问题的一种有用方法是尝试使用 NCrunch 以手动定义的顺序运行测试。如果您在 NCrunch 测试窗口中右键单击测试，在“高级”菜单下，您会找到使用现有任务运行程序进程运行测试的选项。对你的几个测试尝试这个操作，看看你是否可以重现出现问题的序列。当它发生时，您应该能够轻松地将调试器用于测试并找出它失败的原因。

大多数与序列相关的问题都是由未清除的静态成员引起的，因此请确保您的每个测试都是在假设现有状态可能被进程中运行的另一个测试留下的假设下编写的。另一种选择是确保通过拆卸测试完全清除所有状态（尽管在我看来，这通常是一种不太实用的方法）。

# .net - 使用 MVC4 和 MvcContrib.TestHelper 测试路由

> ID：12685691
> 
> 赞同：3
> 
> 时间：2012-10-02T06:50:41.837
> 
> 标签：.net, testing, asp.net-mvc-4

我正在尝试使用 MvcContrib.TestHelper 测试我的 MVC4 站点的路由。当我做这样的事情时：

```
"~/".ShouldMapTo<myController>(x => x.Index()); 
```

我有一个错误，如“System.Security.VerificationException：方法 MvcContrib.TestHelper.RouteTestingExtensions.ShouldMapTo：类型参数‘myController’违反了类型参数‘TController’的约束。

我进行了快速搜索，发现了那篇文章：[http](http://www.kevinlabranche.com/blog/UsingMVCContrib3TestHelpersWithASPNetMVC4Beta.aspx) ://www.kevinlabranche.com/blog/UsingMVCContrib3TestHelpersWithASPNetMVC4Beta.aspx但它不起作用。事实上，我认为它适用于 MVC4 Beta，但不适用于 MVC4。

我知道还有其他解决方案可以测试我的规则，我只是喜欢那个方法的方式和清洁度。任何使其工作的解决方案将不胜感激。

万分感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T06:22:22.620

正如 kevin labranche 在[他的博客](http://www.kevinlabranche.com/blog/UsingMVCContrib3TestHelpersWithASPNetMVC4Beta.aspx)中建议的那样，我下载了源代码，用 Visual Studio 2012 编译。

# batch-processing - 如何创建批处理文件来编辑 sql 查询

> ID：12685695
> 
> 赞同：0
> 
> 时间：2012-10-02T06:51:05.143
> 
> 标签：batch-processing, batch-file

我需要创建一个应该参数化的批处理文件

我的查询

```
select * from glob2("parameterised value what the user is entering") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:05:41.237

在您的代码中，您可以通过引用 %1 %2 等来访问命令行参数。

阅读`HELP CALL`并尝试这个

```
@echo off
echo QUERY SELECT * FROM GLOB2 WHERE NAME="%1" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:04:32.527

您可以使用`set /p`查询用户的输入：

```
set /p value=Enter something: 
```

然后您可以随后使用该变量；在这种情况下`%value%`。

# javascript - 在 javascript 中使用 iPad 的方向

> ID：12685698
> 
> 赞同：1
> 
> 时间：2012-10-02T06:51:28.967
> 
> 标签：javascript, html, cordova

我正在使用 iPad 中的方向。我正在使用电话间隙来构建应用程序。我已经为方向更改完成了以下代码：

```
 function updateOrientation() 
        {
            var orientation=window.orientation;
            if ( orientation == 0 ) {
                alert("Do Something In Portrait Mode");
            }
            else if ( orientation == 90 ) {
                alert("Do Something In landscape Mode");
            }
            else if ( orientation == -90 ) {
                alert("Do Something In Portrait Mode");
            }
            else if ( orientation == 180 ) {
                alert("Do Something In landscape Mode");
            }               
        } 
```

我收到警报，但我不知道如何调整其中的窗口大小？任何人都可以帮助我吗？我想要如下： ![在此处输入图像描述](../Images/d7950bdc051cf01aaba210e4cfafdca6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:03:35.260

Safari 和 Android 都支持简单的方向更改事件侦听器。

```
<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=320; user-scalable=no" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>PhoneGap</title>
     <script type="text/javascript" charset="utf-8" src="phonegap-1.1.0.js"></script>
     <script type="text/javascript" charset="utf-8" src="main.js"></script>

</head>
<body onload="init();" >

    <h2>Orientation Test</h2>
    <div id="status"></div>

</body>
</html> 
```

和js代码：

```
function init() {
    window.addEventListener("orientationchange", orientationChange, true);
}

function orientationChange(e) {
    var orientation="portrait";
    if(window.orientation == -90 || window.orientation == 90) orientation = "landscape";
        document.getElementById("status").innerHTML+=orientation+"<br>";
} 
```

[资源](http://www.raymondcamden.com/index.cfm/2011/11/4/PhoneGap-Orientation-Example)

# jquery - 动态更改 Jquery UI 可拖动助手宽度并更改可放置的容差效果？

> ID：12685718
> 
> 赞同：1
> 
> 时间：2012-10-02T06:53:34.270
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

**如何动态更改 Jquery UI 可拖动助手宽度并更改可放置的容差效果？**

案例：当我在 jquery ui 中创建一个 helper 时可以拖动。然后将此可拖动对象放入可放置区域。在 droppable 中，***over 函数必须更改此辅助宽度***。所以在这个函数中改变了辅助对象的宽度，但是 容差效果 在 droppable 中***不起作用。***见代码：

```
// let the gallery items be draggable
            $( ".elementDrag", elementContainer ).draggable({
                    revert: "invalid",
                    //helper: "clone",
                     helper: function(event) {

                        DOM2 = $('<div style="border: 1px solid;"></div>');
                        DOM2.outerWidth(passObj.width + 20);
                        DOM2.outerHeight(passObj.height);

                        return DOM2;
                                                      },
                    cursor: "move",
                    start: function(event, ui) 
                     {

                     },
                    stop: function(event, ui) 
                     {

                     }
                });

pageContainer.droppable({
                accept: ".elementDrag",
                tolerance: "fit",
                greedy: true,
                drop: function( event, ui ) 
                {
                                    outerContainer.removeClass('over');
                },
                over: function(event, ui) {
                    console.log(ui);
                    console.log(ui.helper);
                    console.log($(ui.helper).outerWidth());
                    // new width set but tolerance effect is not work .... 
                    $(ui.helper).outerWidth($(ui.helper).outerWidth() - 20);

                    console.log($(ui.helper).outerWidth());

                     outerContainer.addClass('over');
                },
                out: function() {
                     outerContainer.removeClass('over');
                }
            }) 
```

# android - 在android中具有特定时间间隔的textview垂直自动滚动文本

> ID：12685720
> 
> 赞同：0
> 
> 时间：2012-10-02T06:53:37.733
> 
> 标签：android, timer, scroll, textview, scrollview

我是安卓的初学者。在我的应用程序中，我的 textview 有多行文本，它可能有 15-20 行。我想要该文本视图中文本的垂直自动滚动。那么解决方案是什么？

这是我的 xml 代码：

```
<LinearLayout 
    android:id="@+id/Thumbnail"
    android:layout_width="fill_parent"
    android:layout_height="200dp"
    android:paddingTop="10dp"
    android:paddingBottom="10dp"
    android:gravity="center"
    android:background="@drawable/imgres">
    <ScrollView      
        android:id="@+id/sv"     
        android:layout_width="fill_parent"     
        android:layout_height="fill_parent"    
        android:fillViewport="true" >

    <TextView 
    android:id="@+id/tv"
    android:layout_width="fill_parent"
    android:layout_height="200dp"
    android:background="#80000000"
    android:width="200dp"
    android:textStyle="bold"
    android:textColor="#ffffff"
    android:gravity="center"
    android:layout_alignParentTop="true" 
    android:focusable="true"
    android:focusableInTouchMode="true" 
    android:scrollbars = "vertical"
    android:maxLines="10"
    />    
   </ScrollView>
</LinearLayout> 
```

在函数中，我使用以下代码设置了我的 textview 的文本：

```
tv.setText(textArray); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:00:08.077

您实际上不需要使用 ScrollView。

只需设置

```
android:maxLines = "AN_INTEGER_NUMBER"

android:scrollbars = "vertical" 
```

布局的 xml 文件中 TextView 的属性。

然后使用：

```
yourTextView.setMovementMethod(new ScrollingMovementMethod()) 
```

在你的代码中。

# javascript - Early Returns and Callbacks：返回回调？

> ID：12685722
> 
> 赞同：2
> 
> 时间：2012-10-02T06:53:49.100
> 
> 标签：javascript, node.js

对我的代码有一个分裂的时刻。提早退货时，首选哪个？

```
if (err) callback(err);
else {
  ...
} 
```

或者

```
if (err) {
   callback(err)
   return
}
... 
```

或者

```
if (err) return callback(err);
... 
```

但是，我不愿意返回`callback`，因为它是一个同步函数。你喜欢哪个？为什么？是否有技术原因决定哪个是首选？

理想情况下，我可以做类似的事情，`if (err) callback(err), return;`但这是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T01:30:02.747

我和我的团队确定了您的最后选择：

```
function (x, y, z, cb) {
  var err, data;
  ...
  if (err) return cb(err);

  ...
  return cb(err, data);
} 
```

原因很简单。一，我们已经为我们的回调选择了“cb”——一致性非常有帮助。虽然 cb 没有返回任何内容，但它可以让您轻松查看。每次我们使用回调，我们都希望确保执行返回，因为如果我们不这样做，它会导致非常烦人的错误和“return cb(err);” 简短，易于阅读，一致，消除了一定程度的缩进，最重要的是易于查找。

而且，如果您可以让自己养成这种或任何其他类似结构的习惯，那么查看您的代码并查看没有领先回报的流浪“cb（err）”将成为第二天性。

而且，顺便说一句，

```
process.nextTick(function () { return cb(err); }); 
```

比

```
setTimeout(function () { return cb(err); }, 0); 
```

请记住，有时您需要 nextTick 回调来展开您的堆栈。

是的，我们总是做

```
return cb(err); 
```

即使我们不需要。一致性很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:56:01.040

我会建议：

```
if (err) {
   setTimeout(function() {
      callback(err);
   }, 0);
   return;
} 
```

这样回调就可以*像*另一个线程一样有效地工作，而不会干扰主 UI 线程。

# sql-server - SQL 代理队列填充了两次

> ID：12685726
> 
> 赞同：0
> 
> 时间：2012-10-02T06:54:04.357
> 
> 标签：sql-server, queue

我正在使用 SQL 代理执行一些异步任务（在我的情况下发送邮件）。但是我遇到的问题是每次将 XML 消息从触发器传递到队列时，将值插入队列时运行的存储过程会运行两次。

我有一个消息类型：

```
CREATE MESSAGE TYPE MailMessage
AUTHORIZATION dbo 
VALIDATION = WELL_FORMED_XML 
```

我有一份合同：

```
CREATE CONTRACT MailContract
AUTHORIZATION dbo 
(MailMessage SENT BY INITIATOR) 
```

我有一个队列：

```
 CREATE QUEUE dbo.MessageQueue
WITH STATUS=ON, 
 ACTIVATION ( 
 PROCEDURE_NAME = MailExecuter , 
 MAX_QUEUE_READERS = 1,
 EXECUTE AS OWNER ); 
```

我有两个服务：

```
 CREATE SERVICE MailSendActivator  
AUTHORIZATION dbo  
ON QUEUE dbo.MessageQueue (MailContract) ; // I have removed this the contract to make it a initiator but it did not worked out  

-- Create target Service   
CREATE SERVICE MailSendExec  
AUTHORIZATION dbo   
ON QUEUE dbo.MessageQueue (MailContract); 
```

这是我的触发器：

```
 CREATE TRIGGER MailSendTrigOnMailQueue ON dbo.MailQueue
 FOR INSERT 
 As  
 SET NOCOUNT ON;   

DECLARE @MessageBody XML  
DECLARE @TableId int  

SET @MessageBody = (SELECT CreatedDateTime,[Subject], MailType FROM inserted  
FOR XML AUTO)  

If (@MessageBody IS NOT NULL)  
BEGIN  

DECLARE @Handle UNIQUEIDENTIFIER;   
BEGIN DIALOG CONVERSATION @Handle   
FROM SERVICE MailSendActivator   
TO SERVICE 'MailSendExec'   
ON CONTRACT MailContract   
WITH ENCRYPTION = OFF;   

SEND ON CONVERSATION @Handle MESSAGE TYPE MailMessage(@MessageBody);   

END 
```

我有一个存储过程：在存储过程中，我将值插入到测试表中，无论存储过程是否正在运行。

存储过程：

```
 CREATE PROCEDURE dbo.MailExecuter  
AS   
BEGIN   

DECLARE @msgBody XML    
DECLARE @dlgId uniqueidentifier 
Insert into TestTable(Name, Test) values('MEX','test'); 
WHILE (1 = 1)   
    BEGIN 

            WAITFOR ( RECEIVE TOP(1) @msgBody = CAST(message_body AS XML),     @dlgId = conversation_handle  FROM dbo.MessageQueue ), TIMEOUT 500    
            IF (@@ROWCOUNT = 0 OR @msgBody IS NULL) 
                BEGIN   
                    BREAK   
                END   
            ELSE   
                BEGIN 

                 DECLARE @Subject nvarchar(200), @CreatedDateTime datetime, @MailType nvarchar(50)

                ---EXEC dbo.SendMails 1,1;

                END  
            END CONVERSATION @dlgId

            END  

    END 
```

但是存储过程运行了两次并填充了我的测试表两次。我认为问题在于`send conversation`触发器中的部分。

很长一段时间以来，我一直对此感到震惊。拜托，有人可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:21:04.347

您需要`RECEIVE`将`message_type_name`. 您必须查看收到的消息类型，并且*仅*在消息类型为 时才调用邮寄例程`MailMessage`。事实上，您总是会收到第二条消息，即来自您的`END DIALOG`. 在这种情况下，您只需再次调用 END DIALOG 即可关闭发送端句柄：

```
 WAITFOR ( 
      RECEIVE TOP(1) 
         @msgBody = CAST(message_body AS XML),     
         @dlgId = conversation_handle ,
          @msgType = message_type_name
       FROM dbo.MessageQueue ), TIMEOUT 500    
    IF (@@ROWCOUNT = 0 OR @msgBody IS NULL) 
       BREAK   
    ELSE IF @msgType = N'MailMessage'   
    BEGIN 
       DECLARE @Subject nvarchar(200), @CreatedDateTime datetime, @MailType nvarchar(50)
       ---EXEC dbo.SendMails 1,1;
    END  

    END CONVERSATION @dlgId; 
```

你重新发明轮子有什么特别的原因吗？这几乎就是[`sp_send_dbmail`](http://msdn.microsoft.com/en-us/library/ms190307.aspx)已经工作的方式（使用外部激活除外）。

# javascript - 尝试实现 svg:clipPath 但最终几乎是空白屏幕

> ID：12685728
> 
> 赞同：1
> 
> 时间：2012-10-02T06:54:12.877
> 
> 标签：javascript, d3.js

```
 var w = 725;

    var h = 500;

    var padding = 20;

     var svgcanvas = divElem.append("svg:svg")
        .attr("width", w)
        .attr("height", h); 
```

我希望将区域限制到的路径，但元素已消失

```
 svgcanvas.append("svg:clipPath")
        .attr("id", "clipper")
        .attr("d","M -200,0 A200,200 0 0,0 500,0 L -200,0") 
        .attr("transform", "translate(220,400) scale(1, -1)")
        .style("stroke-width", 2)
        .style("stroke", "steelblue")
        .style("fill", "yellow"); 
```

不希望线超出此路径但元素已消失

```
 var myLine = svgcanvas.append("svg:line")
        .attr("x1", 40)
        .attr("y1", 50)
        .attr("x2", 450)
        .attr("y2", 150)
        .attr("clip-path", "url(#clipper)")
        .style("stroke", "rgb(6,120,155)"); 
```

不希望圆圈超越这条路径，但元素已经消失

```
var circle = svgcanvas.selectAll("circle").data(jsoncirclehigh);

circle.enter().append('circle')
.attr('opacity',0)
.attr("cursor","pointer")
.on("mouseover", function(){d3.select(this).style("fill", "red");})
.on("mouseout", function() {d3.select(this).style("fill", "orange");})
.attr("clip-path", "url(#clipper)")
.attr("cx", function(d) {return d.cx;})
.attr("cy", function(d) {return d.cy;}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:06:43.910

看这个例子，我应用了一个 ClipPath 和一个带有 setInterval 的行： [demo](http://jsfiddle.net/cristian540/t2xwS/)

# opengl - 是否有任何可行的 GPU 访问替代 OpenGL

> ID：12685729
> 
> 赞同：1
> 
> 时间：2012-10-02T06:54:15.267
> 
> 标签：opengl, opencl, openmp, gpu

我希望在 GPU 上进行一些编程，但不需要任何类型的 3D 或高级图形功能。本质上，我需要做的就是调用能够非常快速地循环数千次迭代的函数。我开始研究 OpenCL，但似乎对它的支持比 OpenGL 低得多，因为我什至可以在移动设备上使用 OpenGL ES，在 Web 上使用 WebGL。在这一点上，Web 对我来说并不是那么重要，但是是否有可行的替代方案具有 OpenGL 的广泛支持但更多地用于计算？我想要能够在尽可能多的计算机和设备上运行的东西。

编辑：我也在寻找 AMD、Nvidia 等各种显卡的最佳支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T06:59:19.093

OpenCL 受到两家主要 GPU 制造商的支持，是迄今为止您最好的选择。另一种选择是 CUDA。我认为您最好提出“如何使用 OpenCL 解决这个问题？”这样的问题。而不是简单地说它不适合您需要完成的工作，因为仅根据上面的描述很难提出建议。

另请注意，OpenCL 支持嵌入式配置文件，这意味着它在移动设备上有一些支持。但是 iPhone 目前不支持此功能。有[传言](http://iphonedeveloperjournal.com/2012/04/18/a-prediction-for-ios-6-a-new-public-framework-opencl-2/)说它将进入 iOS 6，但这似乎还没有发生。另请参阅[这个问题](https://stackoverflow.com/questions/9005352/how-to-use-opencl-on-android)，它解释了 android 和 OpenCL 如何一起工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:56:43.187

我猜对于 NVIDIA 卡，最好使用的模型是[CUDA](http://developer.nvidia.com/cuda/what-cuda)。它现在已经非常成熟并且得到了很好的支持。您可以在主站点上找到许多指南，并且它们写得很好，因此您应该能够快速找到它。

# sql - 这是一种乐观的方法吗？

> ID：12685734
> 
> 赞同：0
> 
> 时间：2012-10-02T06:55:14.933
> 
> 标签：sql, sql-server, sql-server-2008

在乐观方法的示例中，@version（例如作为过程中的参数）总是预先知道的。是否可以在过程中接收@version 以及它会产生什么影响。部分程序：

```
CREATE PROCEDURE [dbo].[UpdateTestTable2]
...
SELECT @version = [version]
FROM dbo.TestTable2
WHERE Id = @Id

BEGIN TRANSACTION

UPDATE dbo.TestTable2
SET testName = @testName
WHERE Id = @Id AND [version] = @version
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:56:00.017

“版本”需要来自应用程序并反映已选择更新的记录的版本。然后将此信息作为更新的一部分包含在内，以确保更新正在“查看”的记录的相同版本。

通过从外部提供一些信息（在本例中为@id），这似乎是您正在做的事情。但是，正如 Igor 所指出的，名为“版本”的列并没有什么神奇之处：您可以放弃您的第一个选择并使用@id 离开过滤器。

但是......您缺少的是版本/id 字段的同时更新。你应该这样做：

```
update testtable2
set versioning_column += 1
where versioning_column = @versioning_column 
```

这样，您将准确地更新您打算更新的列，但同时通过更改版本标记来阻止其他任何人这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:05:22.877

实现乐观并发的一种简单方法是在读取数据时计算哈希值，然后在保存新数据之前针对表重新计算该值：如果哈希值不同，则表在读取和写入操作之间被修改。

```
CREATE TABLE #TMP(name VARCHAR(10), age TINYINT);
INSERT #TMP VALUES ('Ann', 10);
INSERT #TMP VALUES ('Ann', 10);
INSERT #TMP VALUES ('Ann', 20);
INSERT #TMP VALUES ('Beth', 10);
SELECT *, CHECKSUM(*) AS [hashvalue] FROM #TMP

-- name       age  hashvalue
-- ---------- ---- -----------
-- Ann        10   940063178
-- Ann        10   940063178
-- Ann        20   940063188
-- Beth       10   1206720504 
```

# javascript - 如何将预加载图像设置到相应的位置？

> ID：12685738
> 
> 赞同：0
> 
> 时间：2012-10-02T06:55:51.663
> 
> 标签：javascript, html

我最近遇到了这样的问题，不知道如何解决。我有一个 HTML 图像表：

1.  表格行数会根据用户输入动态变化，无需页面刷新
2.  表中的每一行都包含数据库中的一个特殊图像
3.  我想为显示的行加载图像（许多其他行被隐藏，所以我不想为它们加载图像）

我发现了一个如下片段：

```
var img = $("<img />").attr('src', 'http://somedomain.com/image.jpg')
    .load(function() {
        if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {
            alert('broken image!');
        } else {
            $("#something").append(img);
        }
    }); 
```

但问题是，在 .load 方法上，图像本身会忘记它应该放在哪里（因为我使用 for 循环在表格中逐行加载图像）

有没有人知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:02:44.557

您需要将图像与其行相关联。如果您在创建图像时手头有该行，则可以在对`.load`. 例如，如果在某个时候您有一个新行列表，您可以执行以下操作：

```
var loadImageForRow = function(row) { 
    var img = $("<img/>").attr('src', 'my-image-source.png')
        .load(function() { 
            if (!this.complete || typeof this.naturalWidth == 'undefined' || this.naturalWidth == 0) {
                // handle broken image
            } else {
                 row.find('.image-cell').append(img);
            }
        });
});

newRows.each(function() { loadImageForRow($(this)); } 
```

这使用`row`来自回调内部封闭闭包的参数。或者，您可以使用图像或行上的数据属性（例如`data-row-index='17'`在`img`元素上放置类似的东西）或任何等效机制来关联两者。

# javascript - 使用javascript将表一个值与同一行的另一个值进行比较

> ID：12685741
> 
> 赞同：1
> 
> 时间：2012-10-02T06:56:02.817
> 
> 标签：javascript, asp-classic

在当前屏幕中，我想使用 javascript 进行验证

**1.用户不能在RO Qty中输入负值。和**

**2.RO 数量值应小于发货数量。**

对于第一次验证，我编写了 javascript 并在 button 的 keypress 事件中调用它。

```
 function onlyNumeric() {

        if (event.keyCode < 48 || event.keyCode > 57) {
            alert("Invalid RoQuantity,Quantity should not be negative.");
            event.returnValue = false;
        }
    } 
```

它工作正常，但是当我想在 keyup 和 keydown 中添加更小和更大的验证时，负值验证不起作用。

对于第二次验证，我尝试过这样但没有成功

```
if (document.getElementById("ROQuantity").value > document.getElementById("shpdqty").innerHTML) {
            alert("Please Enter RO Qty, and ROQty shouldnot be greater then shipped quantity.");
            return false;
        } 
```

这也适用，但仅适用于第一行，因此如何在此处使用 for 循环，以便它适用于所有行。

所以请帮我怎么做。

**还有一件事是 ASP CLASSIC 页面。**

这是我绑定值的 TR 标签。

```
<tr valign="top" bgcolor="#E9E9E9">
      <td colspan="2" bgcolor="#FFFFFF" scope="col">
        <table width="100%" border="0" cellpadding="10" cellspacing="0" bordercolor="#E5E5E5"
                                        id="ctl00_ContentPlaceHolder1_GV">
            <tr bgcolor="#333333">
               <td scope="col">
                 <strong><font color="#FFFFFF">No</font></strong>
                </td>
                <td align="center" scope="col">
                  <strong><font color="#FFFFFF">Carton</font></strong>
                </td>
                <td scope="col">
                   <strong><font color="#FFFFFF">Article Code </font></strong>
                </td>
                <td align="center" scope="col">
                   <strong><font color="#FFFFFF">Color</font></strong>
                 </td>
                <td align="center" scope="col">
                   <strong><font color="#FFFFFF">Size</font></strong>
                </td>
                <td align="right" scope="col">
                   <strong><font color="#FFFFFF">Order Qty</font></strong>
                </td>
                <td align="center" scope="col">
                   <strong><font color="#FFFFFF">Shipped Qty </font></strong>
                </td>
                <td align="center" scope="col">
                   <strong><font color="#FFFFFF">RO Qty</font></strong>
                </td>
              </tr>
            <tbody>

         <% i =1
            set rs1 = server.CreateObject("adodb.recordset")
            sql1 = "SELECT     tblOrderAllocationListItems.OItemID, tblOrderAllocationListItems.MALItemID, tblOrderAllocationListItems.OrderNo, " & _
                    "tblOrderAllocationListItems.MALNo, tblOrderAllocationListItems.CartonName, tblOrderAllocationListItems.ArticleCode, " & _
                    "tblOrderAllocationListItems.Cup, tblOrderAllocationListItems.ColorID, " & _ 
                    "tblOrderAllocationListItems.SizeID, tblOrderAllocationListItems.UOM, tblOrderAllocationListItems.ArticleCostPrice, " & _
                    "tblOrderAllocationListItems.ArticleRCP, tblOrderAllocationListItems.OrderedQuantity, tblOrderAllocationListItems.ShippedQuantity, tblOrderAllocationListItems.ROQuantity, " & _
                    "tblArticleImage.ImagePath FROM tblOrderAllocationListItems LEFT OUTER JOIN " & _
                    "tblArticleImage ON tblOrderAllocationListItems.ArticleCode = tblArticleImage.ArticleCode where tblOrderAllocationListItems.OrderNo = '" & OrderNo & "' order by tblOrderAllocationListItems.CartonName, tblOrderAllocationListItems.ArticleCode"   
            rs1.Open sql1,strconnect,3,3,&H0001
            while Not rs1.EOF

            if i mod 2 = 0 then
            nbgcolor = "#F3F3F3"
            else
            nbgcolor = "#FFFFFF"
            end if

            orderamt = rs1("OrderedQuantity") * rs1("ArticleCostPrice")
            shippedamt = rs1("ShippedQuantity") * rs1("ArticleCostPrice")
            ShippedVarious = rs1("OrderedQuantity") - rs1("ShippedQuantity") 
            ROamt = rs1("ROQuantity") * rs1("ArticleCostPrice")
                                        %>
                                        <tr bgcolor="<%=nbgcolor%>">
                                            <td>
                                                <%=i%>
                                            </td>
                                            <td align="center">
                                                <font color="#000000">
                                                    <%=rs1("CartonName")%>
                                                </font>
                                            </td>
                                            <td>
                                                <a href="javascript:popup('http://www.anakku.com/v5/products_detail.asp?pro_id=609','photo','scrollbars=yes,resizable=yes,width=400,height=400')">
                                                    <font color="#000000">
                                                        <%=rs1("ArticleCode")%>
                                                    </font></a>
                                            </td>
                                            <td align="center">
                                                <a href="javascript:popup('http://www.anakku.com/v5/products_detail.asp?pro_id=609','photo','scrollbars=yes,resizable=yes,width=400,height=400')">
                                                    <font color="#000000">
                                                        <%=rs1("ColorID")%>
                                                    </font></a>
                                            </td>
                                            <td align="center">
                                                <font color="#000000">
                                                    <%=rs1("SizeID") & "/" & rs1("Cup")%>
                                                </font>
                                            </td>
                                            <td align="right" bgcolor="#D9D9FF">
                                                <font color="#000000">
                                                    <%=rs1("OrderedQuantity")%>
                                                </font>
                                            </td> 
```

//我想比较这两个TD

```
 <td align="center" bgcolor="#C6FFC6" id="shpdqty">
                     <%=rs1("ShippedQuantity")%>
                </td>
               <td align="center" bgcolor="#D5E6FF">
                  <input name="ROQuantity<%=rs1("OItemID")%>" type="text" value="<%=rs1("ROQuantity")%>"
                                                    id="ROQuantity" size="5" onkeypress="onlyNumeric();" />
                                            </td>

                                        </tr>
                                        <%
            tOrderedQuantity = tOrderedQuantity + rs1("OrderedQuantity")                
            tShippedQuantity = tShippedQuantity + rs1("ShippedQuantity")                
            tShippedvariousQuantity = tShippedvariousQuantity + ShippedVarious              
            tROQuantity = tROQuantity + rs1("ROQuantity")
            tROamt = tROamt + ROamt

            i = i + 1
            rs1.movenext
            wend
            rs1.close
            set rs1 = nothing                   
                                        %>
                                        <tr style="color: #333333; background-color: white">
                                            <td colspan="5" align="right">
                                                <strong>Total Qty</strong>
                                            </td>
                                            <td align="right" bgcolor="#AEAEFF">
                                                <strong>
                                                    <%=tOrderedQuantity%>
                                                </strong>
                                            </td>
                                            <td align="center" bgcolor="#AAFFAA">
                                                <strong>
                                                    <%=tShippedQuantity%>
                                                </strong>
                                            </td>
                                            <td align="center" bgcolor="#AEAEFF">
                                                <font color="#000000">
                                                    <%=tROQuantity%>
                                                </font>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:22:32.363

将其更改为：

```
if (parseInt(document.getElementById("ROQuantity").value) > parseInt(document.getElementById("shpdqty").innerHTML)) { 
```

# .net - Sql Server 2008 decimal(10,2) 将插入的值除以 100

> ID：12685743
> 
> 赞同：1
> 
> 时间：2012-10-02T06:56:08.983
> 
> 标签：.net, sql-server-2008

我有一个在表中看起来像这样的列`DECIMAL(10,2)`和一个在该表中插入行的存储过程。该列的参数如下所示，`@FuelLiters AS DECIMAL(10, 2),`
我使用 ado.net 调用此存储过程。该列的 sql 参数如下所示

```
cmd.Parameters.Add(@FuelLiters, SqlDbType.Decimal).Value = fuelLiters; 
(it's decimal value) 
```

无论我做什么 sql 都在修改我的值，所以它有 2 位小数。如果fuelLiters = 56，它将在数据库中保存0.56。如果fuelLiters = 75.4，它将保存在数据库7.54中。

我究竟做错了什么？

我的 sql 参数现在看起来像这样，但仍然是同样的问题。

```
 SqlParameter fuelParam = new SqlParameter();
            fuelParam.SqlDbType = SqlDbType.Decimal;
            fuelParam.ParameterName = "@FuelLiters";                
            fuelParam.Precision = 10;
            fuelParam.Scale = 2;
            fuelParam.Value = fuelLiters ;
            cmd.Parameters.Add(fuelParam); 
```

LE：我修改了 sql 参数，以便在设置精度和小数位数之后设置值，并添加了存储过程。

```
CREATE PROCEDURE [dbo].[SaveFuel] 
    @Id AS INT,
    @RegNumber AS NVARCHAR(50),
    @FuelLiters AS DECIMAL(10, 2)
AS
BEGIN

    INSERT INTO [dbo].[Fuel]
        (
            [Id],       
            [RegNumber],
            [Fuel_litres]         
        )
        VALUES
        (
            @Id,
            @RegNumber,
            @FuelLiters
        )

END 
```

好的，我很愚蠢，有一个我没有注意到的触发器正在对该字段进行一些*更正*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:00:00.603

您必须指定 SqlParameter 的精度和小数位数。请参阅[http://msdn.microsoft.com/en-us/library/5a10hy4y.aspx](http://msdn.microsoft.com/en-us/library/5a10hy4y.aspx)

# ios - 在文件的所有者中不会出现 Outlet

> ID：12685744
> 
> 赞同：0
> 
> 时间：2012-10-02T06:56:14.970
> 
> 标签：ios, exception, xib, iboutlet

我无法连接到文件的所有者 XIB。应用类型是通用的。在“参考插座”中的文件所有者中，只有“新参考插座”，在“参考插座集合”下，只有“新参考插座集合”。不可能将 UIImageView 的 IBOutlet 连接到 xib。尽管我合成了它，但在文件的所有者中没有出现 UIImageView 的 Outlet。这是代码：

在 RootViewController.h

```
 #import <UIKit/UIKit.h>

 @interface RootViewController : UIViewController <UIGestureRecognizerDelegate>{

  }

 @property (nonatomic, copy) IBOutlet UIImageView *imageView;
 @property (nonatomic, assign)BOOL fromRootViewController;

 - (void)handleTap:(UITapGestureRecognizer *)recognizer;

 @end 
```

在 RootViewController.m

```
 @interface RootViewController ()

  @end

  @implementation RootViewController

  @synthesize  imageView;
  @synthesize fromRootViewController; 
```

在 RootViewController_iPhone.xib 和 RootViewController_iPad.xib 中不要出现 UIImageView 的 Outlet。

当我运行应用程序时，这是一个错误：

NSInternalInconsistencyException。无法在 Bundle 中加载 NIB：NSBundle

我能怎么做？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:34:28.870

打开 IB 和文件的所有者并在自定义类下查看，检查类名引用 XIB 是否正确，或者它是否表示通用***NSObject***，在这种情况下，修复它。

# python - 在单个输入上合并数据

> ID：12685748
> 
> 赞同：2
> 
> 时间：2012-10-02T06:56:47.560
> 
> 标签：python, data-processing

我正在处理一些数据存储。但是经过预处理后，数据是这样的，例如：

```
-1|news.cnet.com|Technology News - CNET News|-1|-1
-1|news.google.com|Google News|-1|-1
-1|www.bbc.co.uk|BBC News - Home|-1|-1
-1|www.cnn.com|CNN.com|-1|-1
-1|www.news.com.au|News.com.au|-1|-1
1|news.google.com|-1|2|5,156,672
2|www.cnn.com|-1|71|325,362
3|www.news.com.au|-1|569|74,584
4|www.bbc.co.uk|-1|49|442,302
5|news.cnet.com|-1|107|187,705 
```

格式就像`INDEX|URL|TITLE|RANK|SLI`. 该值`-1`表示该列没有特定值。可能有相同的重复条目`URL`，将它们全部合并将完成记录。

是否有一种巧妙的技巧和技巧可以快速将这些记录组合成一个完整的文件？我不想对所有行进行迭代和循环重复以找到重复的行并合并。

**编辑：** 预期的输出是这样的：

```
1|news.google.com|Google News|2|5,156,672
2|www.cnn.com|CNN.com|71|325,362
3|www.news.com.au|News.com.au|569|74,584
4|www.bbc.co.uk|BBC News - Home|49|442,302
5|news.cnet.com|Technology News - CNET News|107|187,705 
```

**编辑 2：** 通过使用 Panda，`root`如下所示，我可以合并数据列：

```
from pandas import *

frame = read_csv(r'data.txt', sep='|', names=['index', 'url', 'title', 'rank', 'sli'])
mask = frame['index'].map(lambda x: x > 0)

frame1 = frame[mask].set_index('url')
frame2 = frame[~mask].set_index('url')

frame1.title = frame2.title
frame1.set_index('index')
print frame1 
```

但是，有没有使用任何第三方库的快速方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:59:02.963

您可以将数据加载到[熊猫](http://pandas.pydata.org/) `DataFrame`中并进行处理。

```
from pandas import *

In [360]: frame=read_csv(r'C:\Python26\test.csv',sep='|', names=['index', 'url', 'title','rank','sli'])

In [361]: print frame
   index              url                        title  rank        sli
0     -1    news.cnet.com  Technology News - CNET News    -1         -1
1     -1  news.google.com                  Google News    -1         -1
2     -1    www.bbc.co.uk              BBC News - Home    -1         -1
3     -1      www.cnn.com                      CNN.com    -1         -1
4     -1  www.news.com.au                  News.com.au    -1         -1
5      1  news.google.com                           -1     2  5,156,672
6      2      www.cnn.com                           -1    71    325,362
7      3  www.news.com.au                           -1   569     74,584
8      4    www.bbc.co.uk                           -1    49    442,302
9      5    news.cnet.com                           -1   107    187,705

In [362]: mask = frame['index'].map(lambda x: x>0)

In [363]: frame = frame[mask]

In [364]: print frame
   index              url title  rank        sli
5      1  news.google.com    -1     2  5,156,672
6      2      www.cnn.com    -1    71    325,362
7      3  www.news.com.au    -1   569     74,584
8      4    www.bbc.co.uk    -1    49    442,302
9      5    news.cnet.com    -1   107    187,705 
```

如果您有更多重复，请使用：

```
df.drop_duplicates() 
```

另外，请注意，在您删除重复项后，`index`您可以“重新索引”：

```
In [372]: print frame.set_index('index')
                   url title  rank        sli
index                                        
1      news.google.com    -1     2  5,156,672
2          www.cnn.com    -1    71    325,362
3      www.news.com.au    -1   569     74,584
4        www.bbc.co.uk    -1    49    442,302
5        news.cnet.com    -1   107    187,705 
```

# regex - 如何选择文件 1-88

> ID：12685749
> 
> 赞同：0
> 
> 时间：2012-10-02T06:56:57.157
> 
> 标签：regex, bash, sed

我在名为 OIS001_OD_EYE_MIC.png - OIS176_OD_EYE_MIC.png 的目录中有一个文件

如此正则表达式所示，提取数字 1-99 很容易。我想要 1-88 将目录分成两半。

为什么？所以我可以有两套偶数的文件来压缩

```
ls | sed  -n '/^[A-Z]*0[0-9][0-9].*EYE_MIC.png/p' 
```

这是我获得 0-99 的尝试。你能帮我弄到 1-88 或者 89-176 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:08:05.790

您可以使用范围：`{start..end}`像这样：

```
echo OIS00{0..88}_OD_EYE_MIC.png 
```

将扩大到

```
OIS000_OD_EYE_MIC.png OIS001_OD_EYE_MIC.png [...] OIS0087_OD_EYE_MIC.png OIS0088_OD_EYE_MIC.png 
```

在 bash 的手册页中查找*[Brace 扩展](http://www.gnu.org/software/bash/manual/html_node/Brace-Expansion.html)*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T07:06:22.743

有了一个足够新的 bash：

```
ls OIS0{01..88}_OD_EYE_MIC.png 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:49:40.967

这是一个管道并行替代方案：

```
ls -v | columns --by-columns -c2 | tr -s ' '   \
| tee >(cut -d' ' -f1 | tar cf part1.tar -T -) \
      >(cut -d' ' -f2 | tar cf part2.tar -T -) > /dev/null 
```

如果文件的名称中有空格，则此方法需要更多工作。

这个想法是将文件列表列成列并用于`tee`将其多路复用到单独的压缩过程中。

该`columns`程序随`autogen`软件包一起提供（至少在 Debian 中）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T06:59:09.940

使用正则表达式，您必须考虑某些数字范围的字符串的外观（您不能直接匹配特定的数字范围）。1-88：

```
/^[A-Z]*(00[1-9]|0[1-7][0-9]|08[0-8]).*EYE_MIC.png/ 
```

对于 88 - 176：

```
/^[A-Z]*(089|09[0-9]|1[0-6][0-9]|17[0-6]).*EYE_MIC.png/ 
```

[这里还有一些例子。](http://www.regular-expressions.info/numericranges.html)

# java - 使导入的图像适合面板

> ID：12685751
> 
> 赞同：2
> 
> 时间：2012-10-02T06:57:17.220
> 
> 标签：java, image, swing, jpanel, jfilechooser

我尝试通过`JFileChooser`into导入图像`JPanel`。有效。但我需要在不丢失其纵横比或比例的情况下将图像放入面板内。

我尝试重新缩放图像，这是我的代码：

```
Image img = Toolkit.getDefaultToolkit().createImage(picture.getSource());
Image scaledImage = img.getScaledInstance(jPanel1.getWidth(),jPanel1.getHeight(),Image.SCALE_SMOOTH);

g2.drawImage(scaledImage, 0, 0,null,null); 
```

但无法保护其比例。我需要一个简单的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:01:46.727

尝试阅读[说明](http://docs.oracle.com/javase/7/docs/api/java/awt/Image.html#getScaledInstance%28int,%20int,%20int%29)：

> 如果宽度或高度为负数，则替换一个值以保持原始图像尺寸的纵横比。如果宽度和高度都是负数，则使用原始图像尺寸。

# iphone - 在旋转轮视图上添加减速动画

> ID：12685753
> 
> 赞同：1
> 
> 时间：2012-10-02T06:57:21.333
> 
> 标签：iphone, ios, cocoa-touch, ipad, uigesturerecognizer

如何为轮视图旋转添加减速动画效果？

目前，我正在关注以下源代码以进行单指旋转。 [https://github.com/kirbyt/KTOneFingerRotationGestureRecognizer/](https://github.com/kirbyt/KTOneFingerRotationGestureRecognizer/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:11:53.000

看看这个 [https://github.com/rajendrahn/RotationWheelAndDecelerationBehaviour](https://github.com/rajendrahn/RotationWheelAndDecelerationBehaviour)。它有带减速的旋转轮。它还具有用于减速行为的单独类，因此可以与任何视图一起使用。

# spring-data-mongodb - Spring Data MongoDB 支持批量插入/保存

> ID：12685754
> 
> 赞同：7
> 
> 时间：2012-10-02T06:57:21.417
> 
> 标签：spring-data-mongodb

我已经google了一段时间，不确定Spring Data MongoDB是否支持批量保存。

我需要将一组文档作为原子保存到 mongo 中，要么全部保存，要么不保存。

任何人都可以为此分享链接或一些示例代码吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T17:16:13.237

当您通过 MongoDB Java 驱动程序进行保存时，您只能将单个文档传递给 MongoDB。

进行插入时，可以传递单个元素，也可以传递元素数组。后者将导致“批量插入”（即客户端的单个插入命令将导致在服务器上插入多个文档）。

但是，由于 MongoDB 不支持事务的概念，如果其中一个插入失败，则无法指示应该删除或回滚先前插入的文档。

出于原子性的目的，每个文档插入都是一个单独的操作，并且不支持使 MongoDB 插入全部或不插入的方法。

如果这是您的应用程序需要的东西，可能还有其他方法可以实现它： - 更改您的架构，以便这些是单个父文档的子文档（那么从技术上讲，父文档只有一个“插入”） - 编写事务语义到您的应用程序代码 - 使用本机支持两阶段提交事务的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-03T08:09:51.377

我们已经使用 Spring Data 和 Mongo Driver 来实现将数据从一个数据库服务器复制到另一个数据库服务器。

```
import com.mongodb.MongoBulkWriteException;
import com.mongodb.MongoClient;
import com.mongodb.MongoException;
import com.mongodb.bulk.BulkWriteResult;
import com.mongodb.client.MongoCollection;
import com.mongodb.client.model.BulkWriteOptions;
import com.mongodb.client.model.InsertOneModel;
import com.mongodb.client.model.WriteModel;
import org.springframework.data.domain.PageRequest;
import org.springframework.data.domain.Pageable;
import org.springframework.data.domain.Sort;
import org.springframework.data.mongodb.core.MongoTemplate;
import org.springframework.data.mongodb.core.query.Criteria;
import org.springframework.data.mongodb.core.query.Query;
import org.springframework.stereotype.Component;

@Component
public class DataCopy{

public void copyData(MongoTemplate sourceMongo,MongoTemplate destinationMongo ){

Class cls = EmployeeEntity.class;
String collectionName = sourceMongo.getCollectionName(cls).get();
        MongoCollection<Document> collection = destinationMongo.getCollection(collectionName);       
Query findQuery = new Query();
        Criteria criteria = new Criteria();

        criteria.andOperator(Criteria.where("firstName").is("someName"),
                    Criteria.where("lastName").is("surname"));

        query.addCriteria(criteria);

    Pageable pageable = PageRequest.of(0, 10000);

        findQuery.with(pageable);

    List<?> pagedResult = sourceMongo.find(findQuery, cls).get()        

        while (!pagedResult.isEmpty()) {
            try {
                 BulkWriteResult result = collection.bulkWrite(
                        pagedResult.
                          stream().map(d -> mapWriteModel(d, destinationMongo)).collect(Collectors.toList()),
                        new BulkWriteOptions().ordered(false));

            }  catch (Exception e) {
                log.error("failed to copy", e);
            }

            pageable = pageable.next();
            findQuery.with(pageable);
            pagedResult = sourceMongo.find(findQuery, cls).get();

        }

 }
}

private WriteModel<? extends Document> mapWriteModel(Object obj,
                                                         MongoTemplate mongoTemplate
                                                        ) {
        Document document = new Document();
        mongoTemplate.getConverter().write(obj, document);
        return new InsertOneModel<>(document);
    }

// Code example to create mongo templates for source and target databases
MongoClient targetClient = new MongoClient("databaseUri")  
            MongoTemplate destinationMongo = new MongoTemplate(targetClient, "databaseName"); 
```

希望这对您有所帮助。

# ios - dataWithContentsOfURL 返回 操作无法完成。（可可错误 256。）

> ID：12685756
> 
> 赞同：2
> 
> 时间：2012-10-02T06:57:33.153
> 
> 标签：ios, nsdata

我发现了其他类似的问题，但它们并没有解决我的问题。

这是我的代码

```
 NSURL *audioUrlValidation   = [NSURL URLWithString:[sender objectAtIndex:1]];

DLog(@"audio validate nsurl %@", audioUrlValidation);

    NSError* error = Nil;
NSData *data            = [NSData dataWithContentsOfURL:audioUrlValidation options:NSDataReadingUncached error:&error];

    if (nil != error) {
        DLog(@"Connection failed! Error %@ - %@", error, [error userInfo]);
    }
    DLog(@"response data %@", data);

NSString *audioValidationResponse = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]; 
```

我得到的错误

```
audio validate nsurl  NSURL=http://www.mydomain.com/returntexthtml.php

Connection failed! Error Error Domain=NSCocoaErrorDomain Code=256 "The operation couldn’t be completed. (Cocoa error 256.)" UserInfo=0x98b4680 {NSURL=http://www.mydomain.com/returntexthtml.php}

response data (null) 
```

我知道错误代码 256 是 NSFileReadUnknownError，这个错误代码根本没有帮助。

我的 URL 有 http:// 所以这也不是问题吗？

以下是请求的响应标头

```
Connection  keep-alive
Content-Length  28
Content-Type    text/html
Date    Tue, 02 Oct 2012 06:54:58 GMT
Server  nginx
Vary    Accept-Encoding 
```

可能出了什么问题？

# knockout.js - 与 $index 的淘汰数据绑定会带来问题

> ID：12685761
> 
> 赞同：3
> 
> 时间：2012-10-02T06:58:12.513
> 
> 标签：knockout.js

考虑一个包含单选按钮和标签的 jQuery Mobile“列表”。

```
<!-- ko foreach: $data.answers -->
<input type="radio" name="radio-choice" data-bind="attr: { id: [...] }" />
<label data-bind="attr:{ for: [...] }">Label</label>
<!-- /ko --> 
```

为了工作，标签的**for**属性需要与输入的**id**相同。

```
REPLACEMENT FOR [...]            RESULTS IN
$index                           ok
'radio-nr-'+$index               fails
$root.testFunction(1)            ok
$root.testFunction($index)       fails
'radio-nr-'.concat(1)            ok
'radio-nr-'.concat($index)       fails 
```

在哪里

```
function testFunction(a) {  return "radio-nr-"+a; }; 
```

为什么我所有连接 $index 的尝试都失败了？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T07:16:21.273

从[$index 文档](http://knockoutjs.com/documentation/binding-context.html)：

> 与其他绑定上下文属性不同，$index 是可观察的

所以你需要`$index()`在你的绑定中写（注意括号）：

```
<!-- ko foreach: $data.answers -->
<input type="radio" name="radio-choice" 
                    data-bind="attr: { id: 'radio-nr-' + $index()  }" />
<label data-bind="attr:{ for: 'radio-nr-' + $index() }">Label</label>
<!-- /ko --> 
```

[JSFiddle](http://jsfiddle.net/85LAv/1/)中的工作示例

# php - 减少 php 守护进程内存使用

> ID：12685767
> 
> 赞同：0
> 
> 时间：2012-10-02T06:59:16.183
> 
> 标签：php, zend-framework, memory-management, daemon

你能帮我找出导致这个进程达到 500MB 内存使用量的原因吗？它基本上是一个 html 页面下载器。尽管该过程是稳定的（并且不超过该限制），但它意味着在性能低下的机器上使用，我并不满意。mysql 表“站点”的大小为 170MB。遵循脚本代码。提前致谢。

```
function start() {
try {
    global $log;
    $db = getConnection();
    Zend_Db_Table::setDefaultAdapter($db);
    $log->logInfo("logger start");
    while (1) {
        $sitesTable = new Zend_Db_Table('Sites');
        $rowset = $sitesTable->fetchAll();
        foreach ($rowset as $row) {
            if (time() >= (strtotime($row->lastUpdate) + $row->pollingHours * 60 * 60)) {
                db_updateHtml($row);
            }
        }
    }
} catch (Exception $e) {
    global $log;
    $log->logError($e->getMessage());
}
}

    function db_updateHtml($siteRecord) {
        try {
            if ($siteRecord instanceof Zend_Db_Table_Row) {
                $rowwithConnection = $siteRecord;
                $url = $siteRecord->url;

                $idSite = $siteRecord->idSite;
                $crawler = new Crawler();
                $sitesTable = new Zend_Db_Table('Sites');
                //$rowwithConnection = $sitesTable->fetchRow(
                  //      $sitesTable->select()->where('idSite = ?', $idSite));
                $newHtml = HtmlDbEncode($crawler->get_web_page($url));

                if (strlen($newHtml) < 10) {
                    global $log;
                    $log->logError("Download failed for: url: $url \t idsite: $idSite ");
                }
                if ($rowwithConnection->isChecked != 0) {
                    $rowwithConnection->oldHtml = $rowwithConnection->newHtml;
                    $rowwithConnection->isChecked = 0;
                }
                $rowwithConnection->newHtml = $crawler->get_web_page($url);
                $rowwithConnection->lastUpdate = date("Y-m-d H:i:s");
                //$rowwithConnection->diffHtml = getDiff($rowwithConnection->oldHtml, $rowwithConnection->newHtml, false, $rowwithConnection->minLengthChange);
                $rowwithConnection->diffHtml = getDiffFromRecord($rowwithConnection, false, $rowwithConnection->minLengthChange);
                /* if (strlen($rowwithConnection->diffHtml) > 30) {
                  $rowwithConnection->lastChanged = $rowwithConnection->lastUpdate;
                  } */
                $rowwithConnection->save();
            } else {
                $log->logCrit("siteRecord is uninitialized");
            }
        } catch (Exception $e) {
            global $log;
            $log->logError($e->getMessage());
        }
    }

    function getDiffFromRecord($row, $force = false, $minLengthChange = 100) {
        if ($row instanceof Zend_Db_Table_Row) {
            require_once '/var/www/diff/library/finediff.php';
            include_once '/var/www/diff/library/Text/Diff.php';
            $diff = new AndreaDiff();
            $differences = $diff->getDiff($row->oldHtml, $row->newHtml);
            if ($diff->isChanged($minLengthChange) || $force) {
                $row->lastChanged = $row->lastUpdate;
                $row->isChecked = false;
                return ($differences);
            }
        }
        return null;
    }

    function getConnection() {
        try {
            $pdoParams = array(
                PDO::MYSQL_ATTR_USE_BUFFERED_QUERY => true
            );
            $db = new Zend_Db_Adapter_Pdo_Mysql(array(
                        'host' => '127.0.0.1',
                        'username' => 'root',
                        'password' => 'administrator',
                        'dbname' => 'diff',
                        'driver_options' => $pdoParams
                    ));
            return $db;
        } catch (Exception $e) {
            global $log;
            $log->logError($e->getMessage());
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:36:19.280

1）尝试使用 fetch 方法，而不是 fetchAll：

```
foreach($sitesTable->fetch() as $row){
   //...
} 
```

2）尝试取消设置存储html代码的所有变量（如果你将它保存在内存中），最后一次迭代我想变量`$rowwithConnection`里面会有html代码。

当我想要配置文件 php 应用程序时，我使用[xhprof](http://php.net/manual/en/book.xhprof.php)它将为您节省很多时间。祝你好运！

# jquery - threedubmedia - jquery.event.drop - 将元素注册为放置目标

> ID：12685772
> 
> 赞同：2
> 
> 时间：2012-10-02T06:59:48.830
> 
> 标签：jquery, jquery-plugins

我一直在研究这些示例，并且[http://threedubmedia.com/code/event/drop/demo/dragover](http://threedubmedia.com/code/event/drop/demo/dragover)做了我需要实现的事情 - 可拖动知道它是什么可放置的。

但是，我不知道如何添加自己的元素（例如 div）并使其成为放置目标。在示例中，我看到的只是使用了 drop 方法。这是否等同于将元素注册为放置目标？

抱歉，如果我的问题看起来很愚蠢，我已经在服务器端完成了所有编程，并且我刚刚开始使用 JS。

干杯，Maciej。

# ruby - 将方法传递给 Ruby 中的 Proc

> ID：12685773
> 
> 赞同：3
> 
> 时间：2012-10-02T06:59:48.660
> 
> 标签：ruby

在 Ruby 中，符号可以方便地转换为 Proc，例如：

```
%{john terry fiona}.map(&:capitalize)   # -> %{John Terry Fiona} 
```

有没有办法将方法传递给 Proc，以缩短以下代码：

```
["john", "terry", "fiona"].each do |n|
  assert n.valid_encoding?
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T08:48:14.167

```
%w{john terry fiona}.map(&:valid_encoding?).each(&method(:assert)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:07:24.707

对同一件事的非正统方法：

```
Compose = 
  lambda do |*xs|
    ph, *ps = xs.map(&:to_proc)
    lambda do |*ys|
      r = ph[*ys]
      ps.each do |p|
        r = p[r]
      end
      r
    end
  end

["john", "terry", "fiona"].each(&Compose[:valid_encoding?, method(:assert)]) 
```

# ruby-on-rails - 用于 nil 的未定义方法“fragment_for”：NilClass 渲染部分带有缓存

> ID：12685782
> 
> 赞同：1
> 
> 时间：2012-10-02T07:00:13.460
> 
> 标签：ruby-on-rails, caching, partials

我在rails 2.3.14的一些代码中有这段代码：

```
<% cache "some_partial_#{some_id}" do %>
....
<% end %> 
```

在视图中渲染它时工作正常，但我得到：

```
undefined method `fragment_for' for nil:NilClass 
```

当我尝试在模型中执行此操作时：

```
 ActionView::Base.new("app/views").render(:partial => "home/temp"} 
```

我可以看到 actionpack-2.3.14/lib/action_view/helpers/cache_helper.rb:35 中出现的问题

```
 def cache(name = {}, options = nil, &block)
    @controller.fragment_for(output_buffer, name, options, &block)
 end 
```

我不确定它希望在@controller 中找到什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T18:04:05.833

您也许可以添加：

```
include ActionController::Caching 
```

到你的班级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:29:16.267

简而言之：不要从模型中渲染部分——它们应该只包含业务逻辑。由于缓存调用了由于您在此处绕过视图呈现逻辑而尚未初始化的控制器对象，因此发生错误。

更新：

我看到它的唯一方法是获取控制器实例并将其作为参数传递。如何在模型中获取控制器实例取决于您。我认为[这个问题](https://stackoverflow.com/questions/2419120/ruby-on-rails-access-controller-variable-from-model)可能会有所帮助

```
ActionView::Base.new("app/views", {}, @your_controller_instance).render(:partial => "home/temp") 
```

# c - 如何使用 gdb 逐步查看宏扩展的每一行的执行

> ID：12685785
> 
> 赞同：15
> 
> 时间：2012-10-02T07:00:39.237
> 
> 标签：c, linux, gdb

我有一个宏，它的定义大约有 50 行，并且有很多“if else”语句。此宏 def'n 出现在 .h 文件中。我正在运行“TUI 模式下的 gdb”，但是当执行到达该宏时，代码窗口变为空白，并且仅在宏代码执行后才返回。我想逐行查看完整宏代码的执行情况。请让我知道如何做到这一点（一种方法是用代码中的定义替换宏，然后重新编译它。我不想使用这个选项，因为我的代码中有几个这样的宏）。

任何帮助将不胜感激。期待得到这个问题的解决方案。请让我知道这个问题是否有其他方法而不是使用预处理文件？我的代码可以运行到数百个 .c 和 .h 文件中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T08:07:47.253

一种选择是完全预处理您的 C 文件，展开其中的所有宏，然后编译生成的预处理文件。

例如，考虑这个简单的 C 程序：

```
// file: prep.c
#include <stdio.h>

#define MY_BIG_MACRO \
  int i; \
  printf("integers from 0 to 9:\n"); \
  for (i = 0; i < 10; i++) \
    printf("%d ", i); \
  printf("\n");

int main(void)
{
  MY_BIG_MACRO
  return 0;
} 
```

编译它，保存临时文件（包括预处理的源代码）：

```
gcc -Wall -O2 -g -std=c99 prep.c -o prep.exe -save-temps 
```

这应该给你一个预处理版本的`prep.c`, `prep.i`（为了简洁而缩短）：

```
# 1 "prep.c"
# 1 "C:\\MinGW\\msys\\1.0\\home\\Alex//"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "prep.c"

# 1 "c:\\mingw\\bin\\../lib/gcc/mingw32/4.6.2/../../../../include/stdio.h" 1 3

...

int __attribute__((__cdecl__)) __attribute__ ((__nothrow__)) vswscanf (const wchar_t * __restrict__,
         const wchar_t * __restrict__, __gnuc_va_list);
# 3 "prep.c" 2
# 11 "prep.c"
int main(void)
{
  int i; printf("integers from 0 to 9:\n"); for (i = 0; i < 10; i++) printf("%d ", i); printf("\n");
  return 0;
} 
```

现在你想摆脱#-lines。一种或另一种方式，如果它们被留下，它们将影响调试信息。令人惊讶的是，这意味着宏不会在`gdb`.

值得庆幸的是，`grep`可以提供帮助（我不是 grep 专业人士，因此请检查参数是否正确，但它们似乎适用于使用 MinGW x86 的 Windows）：

```
grep ^[^\#].*$ prep.i > prepi.c 
```

这将为您提供`prep.i`in的剥离版本`prepi.c`：

```
typedef unsigned int size_t;
typedef short unsigned int wchar_t;
typedef short unsigned int wint_t;

...

int __attribute__((__cdecl__)) __attribute__ ((__nothrow__)) vswscanf (const wchar_t * __restrict__,
         const wchar_t * __restrict__, __gnuc_va_list);
int main(void)
{
  int i; printf("integers from 0 to 9:\n"); for (i = 0; i < 10; i++) printf("%d ", i); printf("\n");
  return 0;
} 
```

现在你可以编译它了：

```
gcc -Wall -O2 -g -std=c99 prepi.c -o prepi.exe 
```

并运行它`gdb`：

```
gdb prepi.exe 
```

发出以下命令：

```
b main
r
l 
```

这将执行应用程序，直到`main()`并列出与到达断点相关的源代码：

```
(gdb) b main
Breakpoint 1 at 0x40643f: file prepi.c, line 184.
(gdb) r
Starting program: C:\MinGW\msys\1.0\home\Alex\prepi.exe
[New Thread 7340.0x20c4]

Breakpoint 1, main () at prepi.c:184
184       int i; printf("integers from 0 to 9:\n"); for (i = 0; i < 10; i++) pri
ntf("%d ", i); printf("\n");
(gdb) l
179              const wchar_t * __restrict__, __gnuc_va_list);
180     int __attribute__((__cdecl__)) __attribute__ ((__nothrow__)) vswscanf (c
onst wchar_t * __restrict__,
181              const wchar_t * __restrict__, __gnuc_va_list);
182     int main(void)
183     {
184       int i; printf("integers from 0 to 9:\n"); for (i = 0; i < 10; i++) pri
ntf("%d ", i); printf("\n");
185       return 0;
186     }
(gdb) 
```

如您所见，宏主体现在处于普通视图中。

这里的一个小问题是多行宏（以 继续`\`）被扩展为单行。我还没有找到将它们扩展为多行的选项，但您可以手动执行此操作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T07:35:01.390

“一个不简​​单的`step`变成宏”。

你还有几个选择：

1.  正如@WhozCraig 推荐的那样，使用预处理器。
2.  为了减少代码膨胀，将宏转换为函数并重新编译。
3.  如果您绝对不想重新编译并且您对汇编代码感到满意，则可以使用`stepi`一次执行一条机器指令来执行宏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-27T09:30:59.943

如果以上所有方法都不起作用，那么你真的应该回到`printf/fprintf`在你的大宏中使用。

我不得不处理一个 300 行的 MACRO，深埋在库中。这比手工编译和处理后处理文件更容易。

# c++ - 在优先级队列中配对

> ID：12685787
> 
> 赞同：30
> 
> 时间：2012-10-02T07:00:59.907
> 
> 标签：c++, stl, priority-queue, std-pair

我正在尝试将对存储在优先级队列中，并且我正在使用一个比较函数来比较每对的第二个值。

```
#include<iostream>
#include<queue>
#include<utility>
using namespace std;

class CompareDist
{
public:
    bool operator()(pair<int,int> n1,pair<int,int> n2) {
        return n1.second>n2.second;
    }
};
int main()
{
    priority_queue<pair<int,int>,CompareDist> pq;
} 
```

当我编译这个我得到一个错误

```
error: no type named ‘value_type’ in ‘class CompareDist’ 
```

可能是什么原因。我是 STL 的新手。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-02T07:10:29.483

这是[priority_queue](http://en.cppreference.com/w/cpp/container/priority_queue)的样子：

```
template<
    class T,
    class Container = std::vector<T>, 
    class Compare = std::less<typename Container::value_type>
> class priority_queue; 
```

换句话说，`CompareDist`应该是**第三个**参数，第二个参数应该是容器（有`value_type`），如下所示：

```
priority_queue<pair<int,int>,vector<pair<int,int>>,CompareDist> pq; 
```

另请注意，这`priority_queue`就是所谓的“容器适配器”。另一个容器用作底层容器，priority_queue 具有访问它的特殊成员函数。容器适配器的另一个例子是 std::stack。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-26T18:49:13.923

```
priority_queue<pair<int,int>,vector<pair<int,int>>,CompareDist> pq; 
```

您需要为priority_queue 的内置模板提供第二个参数。

# sql - 在 SQL 查询中获取逗号分隔值

> ID：12685792
> 
> 赞同：2
> 
> 时间：2012-10-02T07:01:40.753
> 
> 标签：sql, sql-server-2008-r2

请检查下表

```
Code   Name  
-----------
 001   A
 001   B 
```

我的查询是

```
Select Code,Name from TableA 
```

但我需要像这样的记录

```
Code  Name
------------
001    A,B 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:02:32.763

与 MySQL 不同，`SQL Server`它没有内置函数，但您仍然可以通过使用`CROSS APPLY`和来模拟它`FOR XML PATH('')`

```
SELECT  a.Code, 
        SUBSTRING(d.[Name],1, LEN(d.[Name]) - 1) AddressList
FROM    
        (
            SELECT DISTINCT Code
            FROM TableA
        ) a
        CROSS APPLY
        (
            SELECT [Name] + ', ' 
            FROM TableA AS B 
            WHERE A.[Code] = B.[Code] 
            FOR XML PATH('')
        ) D ([Name]) ; 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/6a399/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:10:34.333

你可以使用`COALESCE`. 以下示例将其变为

> 你好
> 
> 世界
> 
> 它是
> 
> 我

进入这个

> 你好，世界，它是我

```
DECLARE @test NVARCHAR(2000)
SELECT @test = COALESCE(@test + ', ', '') + Field FROM Sampletable WHERE … AND Field IS NOT NULL
SELECT @test 
```

您应该能够根据您的样本进行调整。

# css - Safari 5.x 上带有 CSS 的灰度图像

> ID：12685794
> 
> 赞同：9
> 
> 时间：2012-10-02T07:01:46.267
> 
> 标签：css, safari, grayscale

我试图在页面上显示一些图像，它们应该以**灰度显示，除了鼠标悬停时它们平滑过渡到 color**。我已经让它在 IE、Chrome 和 Firefox 上运行良好，但它**在 Safari 5.x 上不起作用**。问题出在 Mac版 Safari*和*Windows 版 Safari 上。这是我到目前为止的代码：

```
filter: url('desaturate.svg#greyscale'); 
filter: gray;
-webkit-filter: grayscale(1); 
```

第一行加载一个外部 .svg 过滤器（我没有用`url("data:`... 规则内联它，因为我想避免[旧版本 Firefox 中的错误](https://stackoverflow.com/questions/2852095/svg-filters-in-firefox/6345950#comment16869365_6345950)）。

第二行是针对 IE 的，似乎和`filter:progid:DXImageTransform.Microsoft.BasicImage(grayScale=1);`.

关于 webkit 的最后一行应该可以在 Safari 6 及更高版本以及 Chrome 上运行。

是否有任何 CSS 规则可以在**Safari 5.x**上显示灰度图像？或者，如果这是不可能的，有人可以推荐一个 javascript 解决方案，最好是一个可以处理灰度动画的解决方案？**我想避免**使用灰度图像进行服务器端黑客攻击，因为这会弄乱我的 HTML，然后我必须进行一些令人讨厌的浏览器检测以有条件地提供 HTML。

谢谢

**编辑：**

*由于这已被证明是一个“值得注意的问题”，因此请不要继续在此处发布更多仅适用于 Safari 6 及更高版本的答案，或者在数据 url 中包含 .svg 文件的答案。在我写 OP 的时候，支持一些今天被认为**非常**过时的 Safari 和 Firefox 版本对我来说很重要，但那是我最初的问题。*

***我很清楚，对于现代浏览器来说，灰度过滤可以通过几行 CSS 代码轻松完成**，但在我做这个项目时，图形设计师使用的是 Safari 5.x，而客户端使用的是 Firefox 3.x。对我有用的解决方案是 Giona 建议的，即使用 Modernizr 测试 css 过滤，如果不支持回退到 javascript。*

*如果我今天做同样的事情，我会告诉他们去更新他们的浏览器！*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T07:18:07.190

正如您在[caniuse.com](http://caniuse.com/css-filters)上看到的那样，目前很少有浏览器支持 CSS3 过滤器。

[如果你谷歌“ javascript grayscale plugin](http://www.google.it/search?q=jquery%20grayscale%20plugin) ” ，会有很多 JavaScript/jQuery 后备。这里有一些：

*   [灰度.js](http://james.padolsey.com/demos/grayscale/)
*   [jQuery GreyScale 插件](https://github.com/Prydie/jQuery-GreyScale-Plugin)
*   [悬浮液](http://www.iliasiovis.com/hoverizr/)
*   [用画布做（教程）](http://www.ajaxblender.com/howto-convert-image-to-grayscale-using-javascript.html)

但是我对他们没有经验，所以我不能建议你哪个是最好的。

很久以前我尝试过[jQuery Black And White ，它给我带来了很多关于相对/绝对定位图像的问题，所以也许可以避免它。](https://github.com/GianlucaGuarini/jQuery.BlackAndWhite)

* * *

将此[Modernizr 构建](http://modernizr.com/download/#-shiv-cssclasses-css_filters-load)到您的页面中，您可以通过 Javascript 定位不支持过滤器的浏览器：

```
if(!Modernizr.css_filters){
    /* javascript fallback here */
} 
```

或 CSS：

```
.no-css_filters .element {
    /* css fallback here */
} 
```

* * *

哦，别忘了网站是否需要在[每个浏览器中查看完全相同的内容？](http://dowebsitesneedtolookexactlythesameineverybrowser.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T05:03:48.013

其实很简单：

*   [http://www.karlhorky.com/2012/06/cross-browser-image-grayscale-with-css.html](http://www.karlhorky.com/2012/06/cross-browser-image-grayscale-with-css.html)
*   [http://jsfiddle.net/KDtAX/487/](http://jsfiddle.net/KDtAX/487/)

我尝试使用 javascript 后备，但它真的没有任何意义，而且在大图像上真的很慢。这更有意义。请注意，有一个新的语法`grayscale`，我必须从 LESS 手动编辑生成的缩小 CSS。

这是我的混音：

```
.filter (...) {
    -webkit-filter: @arguments;
    -moz-filter: @arguments;
    -ms-filter: @arguments;
    -o-filter: @arguments;
    filter: @arguments;
} 
```

我的班级：

```
.grayscale-hover, .home-image {
    filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); /* Firefox 10+, Firefox on Android see http://jsfiddle.net/KDtAX/487/*/
    .filter(grayscale(1) blur(1px));
    filter: gray; /* IE6-9 */
    -webkit-backface-visibility: hidden; /* Fix for transition flickering */
    &:hover {
        .filter(none);
        filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'1 0 0 0 0, 0 1 0 0 0, 0 0 1 0 0, 0 0 0 1 0\'/></filter></svg>#grayscale");
    }
} 
```

在 IE 6+、Firefox、Chrome 中工作和测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T11:24:15.100

这是这样的：

```
.grayscale {    
   filter: url(css/grayscale.svg#greyscale);    
   -webkit-filter: grayscale(1);    
   -moz-filter: grayscale(100%);    
   -ms-filter: grayscale(100%);    
   -o-filter: grayscale(100%);    
} 
```

您也需要下载 svg 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T12:40:28.870

这对我很有用：

* * *

```
img { float:left;
filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\' filterRes=\'800\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); /* Firefox 10+ */
    filter: gray; /* IE6-9 */
    -webkit-filter: grayscale(100%); /* Chrome 19+ & Safari 6+ */
    -webkit-backface-visibility: hidden; /* Fix for transition flickering */
    -webkit-transition: all 1.5s ease;
       -moz-transition: all 1.5s ease;
        -ms-transition: all 1.5s ease;
         -o-transition: all 1.5s ease;
            transition: all 1.5s ease;
            z-index: 40 !important;
             display:block;

 }

img:hover { 
  filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\' filterRes=\'800\'><feColorMatrix type=\'matrix\' values=\'1 0 0 0 0, 0 1 0 0 0, 0 0 1 0 0, 0 0 0 1 0\'/></filter></svg>#grayscale");
    -webkit-filter: grayscale(0%);} 
```

* * *

然而，这些图像在 Safari 中看起来确实曝光过度（但它们是灰度的）。Firefox 不支持过渡。

# c# - C#中URI类型文件路径的驱动器号

> ID：12685797
> 
> 赞同：10
> 
> 时间：2012-10-02T07:01:58.847
> 
> 标签：c#, filepath

从 URI 类型文件路径获取驱动器号的最简单方法是什么，例如

```
file:///D:/Directory/File.txt 
```

我知道我能做到（这里的路径是一个包含上述文本的字符串）

```
path = path.Replace(@"file:///", String.Empty);
path = System.IO.Path.GetPathRoot(path); 
```

但感觉有点笨拙。有没有办法在不使用 String.Replace 或类似的情况下做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T07:13:10.930

```
var uri = new Uri("file:///D:/Directory/File.txt");
if (uri.IsFile)
{
    DriveInfo di = new DriveInfo(uri.LocalPath);
    var driveName = di.Name; // Result: D:\\
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T07:11:10.277

这可以使用以下代码完成：

```
 string path = "file:///D:/Directory/File.txt";
    if(Uri.IsWellFormedUriString(path, UriKind.RelativeOrAbsolute)) {
        Uri uri = new Uri(path);
        string actualPath = uri.AbsolutePath;
    } 
```

# iphone - 缩放或旋转后将视图转换回（0,0）原点的最有效方法？

> ID：12685798
> 
> 赞同：0
> 
> 时间：2012-10-02T07:02:02.777
> 
> 标签：iphone, ios, cocoa-touch, core-graphics

我正在缩放一个对象，如下所示：

> CGAffineTransform newTransform = CGAffineTransformScale(self.graphicView.transform, (graphicViewSize.width + resizeValue) / graphicsViewSize.width, (graphicViewSize.height + resizeValue) / graphicsViewSize.height);

这可以正确缩放，但是它会移动视图的原点位置。将其移回的最佳方法是什么？最好翻译一下？有什么好方法可以做到这一点，是否可以同时进行翻译和缩放，从而发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:13:45.503

更改图层的锚点属性。默认情况下，它设置为中心，因此视图将在所有方向上缩放，但您可以将其更改为角落以将其中一个保持在固定位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:16:22.910

用这个：

```
CGAffineTransform newtransform = CGAffineTransformIdentity; 
```

如果您的初始视图在缩放或旋转之前位于 (0,0)，这应该可以工作。

# php - PHP脚本中的开始和结束标签不匹配错误

> ID：12685799
> 
> 赞同：0
> 
> 时间：2012-10-02T07:02:12.653
> 
> 标签：php

我正在为我的网站开发注册脚本，但出现错误：

```
Warning: DOMDocument::loadHTML() [domdocument.loadhtml]: Opening and
ending tag mismatch: form and label in Entity, line: 132 in (path)
mergeformpost.inc.php on line 21 
```

这发生在两种不同的情况下。

1）当用户输入已经存在于主键字段中的数据时。

2）当用户错误输入验证码挑战时。

这是（我认为）是来自mergeformpost.inc.php的相关代码：

```
function MergeFormPost( $page ) {

    set_error_handler( 'myErrorHandler', E_WARNING ) ;
    $dom = DOMDocument::loadHTML( $page->source );  //this is line 21
    restore_error_handler();

    if( $dom === false ) {
        writeErrorLog('Failed to parse HTML form.');
        return;
    } 
```

# couchbase - 超过 2 个节点的 couchbase 社区版

> ID：12685801
> 
> 赞同：11
> 
> 时间：2012-10-02T07:02:24.913
> 
> 标签：couchbase

我目前正在围绕沙发数据库建立一个网站，如果它变得流行，我很可能会在未来某个阶段在超过 2 台机器上托管该网站和数据库。它仍然是一个公平的方式，所以我想要一些信息来帮助我决定从这里往哪个方向走。我的问题是：

1.  有人知道我是否可以在超过 2 个节点上部署免费版 (ce) 的 couchbase 吗？如果答案因版本而异，那么请告诉我哪个版本允许这样做（如果有）。

2.  如果不可能在超过 2 个节点上部署免费版本的 couchbase，那么有人可以解释一下这是否被软件或法律所阻止？

[我在 couchbase 网站上](http://www.couchbase.com/couchbase-server/editions)找到了以下声明：

> **Community Edition** (CE) 最适合非商业开发人员，在这些开发人员中，花一些时间找出或解决问题不会导致重大问题。在生产系统上使用这些二进制文件没有任何限制

这听起来像是该软件可以在生产中安装在任意数量的机器上，而无需付费，但随后[另一个 couchbase 页面](http://www.couchbase.com/couchbase-support)显示：

> **寻找免费版本？**我们的企业版免费版提供 Couchbase Server 的全部功能，可在开发中免费无限使用，在生产集群中最多可使用两个节点。

所以我很困惑。也许最后一个只是指支持成本，而不是与软件本身相关的任何成本？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T15:40:30.117

您可以在 2 个或更多节点上部署 Community Edition。限制仅适用于企业版：

[http://www.couchbase.com/couchbase-support](http://www.couchbase.com/couchbase-support)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-04T20:34:07.530

如果您将鼠标悬停在下载页面上的“为什么选择企业”或“为什么选择社区”链接上，您将获得详细信息：

> **社区版**：
> 
> 如果您从事的是非商业项目，请选择 Community Edition：
> 
> *   对于能够独立解决问题的爱好者
> *   未包含最新 EE 错误修复的未经测试的二进制文件
> *   在生产系统上使用二进制文件没有限制
> *   可从 Couchbase 用户社区获得帮助

因此，您可以在生产或开发中不受限制地使用社区版。

**企业版**：

如果您正在从事受资助的项目，请选择企业版，原因如下：

*   经过严格测试的生产就绪版本，带有最新的错误修复
*   免费测试和开发任意数量的节点
*   免费生产最多两个节点
*   提供年度订阅，包括支持和热修复

免费企业版约束是“免费”专栏中其他答案之一中引用的表中所指的内容：http: [//www.couchbase.com/couchbase-support](http://www.couchbase.com/couchbase-support)。

这些软件包还具有描述二进制许可证的许可证文件。

当然，Couchbase Server 的源代码是开放的，在 Apache 2.0 许可下。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-03T23:20:08.927

这是两个不同的版本，社区版和企业版。CE 可以免费部署在您想要的任意数量上，但是对于论坛，只有 Support vs Enterprise 是免费的，最多可用于 2 个生产节点。

也就是说，如果您的数据对您或您的客户至关重要，建议迁移到企业版。如果您的应用程序只能由论坛帮助支持，则无需从您的 CE Couchbase 服务器迁移。

# mongodb - 如何将 MongoDB 设置为只读非本地主机连接

> ID：12685802
> 
> 赞同：3
> 
> 时间：2012-10-02T07:02:28.280
> 
> 标签：mongodb

我的 EC2 服务器上有一个 MongoDB 实例，我希望可以从机器本身（在本地主机上）和远程访问它。

我目前已对其进行配置，以便我可以从 localhost:27017 上的机器本身连接到我的数据库（具有读/写访问权限）。我想通过 my.ip.address:27017 将此数据库提供给其他客户端（但仅是只读的）。

我将如何进行设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:34:56.733

如果您打开[身份验证](http://www.mongodb.org/display/DOCS/Security+and+Authentication)并添加具有读取和写入权限的本地用户，您还可以添加只读用户。

您必须在应用程序/shell 代码中管理身份验证，但基本上，任何不是来自本地主机的人都应该以只读用户身份进行身份验证。

# c - 如果没有崩溃，我真的应该担心修复 null defres 吗？

> ID：12685804
> 
> 赞同：0
> 
> 时间：2012-10-02T07:02:34.587
> 
> 标签：c

Clang 的 scan-build 报告了我的项目中很多空指针的取消引用，但是，我真的没有看到任何异常行为（在使用它的 6 年中），即：

```
Dereference of null pointer (loaded from variable chan)

char *tmp;
CList *chan = NULL; 
/* This is weird because chan is set via do_lookup so why could it be NULL? */
chan = do_lookup(who, me, UNLINK);
if (chan)
tmp = do_lookup2(you,me,0);

prot(get_sec_var(chan->zsets));

                 ^^^^ 
```

我知道 null derefs 会导致崩溃，但这真的是一个很大的安全问题，因为有些人认为它是？在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:04:23.307

取消引用指针是**未定义的行为。**`NULL`它可以显示任何行为，它可能会崩溃，但你**必须**修复这些！

未定义行为的真相是它遵守**[墨菲定律](http://en.wikipedia.org/wiki/Murphy%27s_law)**

## “任何可能出错的事情都会出错”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T07:06:24.943

`chan`在某一时刻检查 NULL是没有意义的：

```
if (chan)
  tmp = do_lookup2(you,me,0);     /* not evaluated if `chan` is NULL */
  prot(get_sec_var(chan->zsets)); /* will be evaluated in any case */ 
```

...但没有在下一行检查它。

您不必在`if`分支中执行这两个语句吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T07:07:37.087

Clang 警告您，因为您检查是否为`chan`NULL，然后您在下一行无条件地取消引用它。这不可能是正确的。要么`do_lookup`不能返回NULL，那么检查是没有用的，应该被删除。或者它可以，那么最后一行可能会导致未定义的行为并且必须修复。Als 是 100% 正确的：NULL 指针取消引用是未定义的行为，并且*始终*存在潜在风险。

可能您想将代码包含在一个块中，以便所有代码都由检查 NULL 来控制，而不仅仅是下一行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T07:09:24.080

您必须尽快解决这些问题。或者可能更早。该标准说 NULL 指针是一个指向“没有有效内存位置”的指针，因此取消引用它是***未定义的行为。***这意味着它可能会工作，它可能会崩溃，它可能会在你程序的其他部分做一些奇怪的事情，或者可能导致守护进程飞出你的鼻子。

**修复它们。现在。**

方法如下：将取消引用语句放入`if`- 否则（如您所做的那样：检查 NULL 然后取消引用）*没有任何意义。*

```
if (pointer != NULL) {
    something = pointer->field;
} 
```

^^ 这是一个好习惯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T07:27:02.780

如果您从未遇到过此代码的问题，可能是因为：

```
do_lookup(who, me, UNLINK); 
```

总是返回一个有效的指针。

但是如果这个函数改变了会发生什么呢？还是它的参数不同？

**您必须在取消引用它们之前检查 NULL 指针**。

```
if (chan)
   prot(get_sec_var(chan->zsets)); 
```

如果您绝对确定`do_lookup`将来它们或其参数都不会更改（并且您可以打赌程序在其上的安全执行），并且与您获得的收益相比，更改所有出现的类似函数的成本过高会这样做，然后：

## 你可能会决定让你的代码被破坏。

许多程序员过去都这样做过，将来还会有更多的程序员这样做。否则怎么解释 的存在`Windows ME`？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T08:29:50.503

如果您的程序由于 NULL 指针取消引用而崩溃，这可以归类为拒绝服务 (DoS)。

如果这个程序与其他程序一起使用（例如，他们调用它），安全方面现在开始依赖于其他程序在这个程序崩溃时会做什么。总体影响可能是相同的 DoS 或更糟（利用、敏感信息泄漏等）。

如果您的程序没有因为 NULL 指针取消引用而崩溃，而是继续运行，同时破坏自身以及可能在同一地址空间内的操作系统和/或其他程序，您可能会遇到一系列安全问题。

不要在线（或在线）放置损坏的代码，除非您有能力处理潜在黑客攻击的后果。

# microsoft-metro - 我应该在哪里将 C# dll 放在 Metro Style Appc# 中

> ID：12685805
> 
> 赞同：0
> 
> 时间：2012-10-02T07:02:36.423
> 
> 标签：microsoft-metro, dllimport

我正在尝试从 Metro Style App 导入 dll。但我不知道我应该把dll放在哪里。请回复我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:12:51.023

您只能引用针对 WinRT 构建的 DLL。通常，这些可以通过 nuget 添加，或者作为项目添加，并使用项目引用。使用其他方法可能无法通过认证，并且不允许您将应用程序分发给公众。

# ruby-on-rails - Rails - 安装了最新的 gem，但应用程序很旧

> ID：12685808
> 
> 赞同：1
> 
> 时间：2012-10-02T07:02:49.237
> 
> 标签：ruby-on-rails, gem

我正在研究 Bluehost。我安装了 3.2.8 gem of rails，现在我得到了：

```
> gem list --local | grep rails
rails (3.2.8) 
```

但：

```
rails --version
Rails 2.3.11 
```

如何使“rails”命令使用最新的 gem？我想这与我的 $PATH 变量有关，但我对此一无所知。

此外，gem 和 rails 命令会产生一些如下所示的错误：

```
Invalid gemspec in [XXX]: invalid date format in specification: "YYY" 
```

我不确定这是否相关（而且我想知道是什么导致了此类错误）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:01:26.420

尝试运行以下命令：

```
curl -L https://get.rvm.io | bash -s stable --ruby --rails 
```

它所做的是安装 RVM，它为每个安装的 Ruby 版本维护单独的 gem。`--ruby`and参数告诉它在`--rails`安装 RVM 时安装 ruby​​ 和 rails。RVM 安装会自动更新 $PATH 和任何其他必要的环境变量。

在安装结束时，它应该提示您运行：

```
source ~/.rvm/scripts/rvm 
```

这将使这些环境变量更改立即生效。或者，您可以注销然后重新登录。

运行`rails -v`并`ruby -v`在那一点上，您应该看到它们指向新版本。从您的 RoR 应用程序的目录运行`bundle install`，您需要的所有 gem 都应该安装在 ~/.rvm/gems/ruby-/gems 中。

此时，您可以在安装 RVM 之前删除/卸载任何 gems/rails/ruby。

2012 年 10 月 17 日编辑：没关系我的回答。尽管有可能让 Rails 3.x 与当前安装的 Ruby 1.8 一起运行（请参阅这个 Stackoverflow 问题），但您将无法使用 Bluehost Shared Hosting 运行 Ruby 1.9.x。您唯一的选择（目前）是 VPS 托管。

原因是Passenger Phusion 与安装在/usr/lib 中的Ruby 版本相关联，如果没有root 访问权限，您无法更改该版本。即使您可以使用 RVM 安装任何版本的 Ruby，您也不会让Passenger 与它对话，因此您的 Rails 项目不会使用它的 gem。

# c# - XNA - 如何从 .x 模型访问纹理？

> ID：12685810
> 
> 赞同：1
> 
> 时间：2012-10-02T07:02:56.250
> 
> 标签：c#, xna, hlsl, .x

我刚刚进入 XNA 编程并且无法弄清楚如何从“.x”模型访问纹理。我正在使用自定义着色器来显示我的模型（只是一个贴有纹理的立方体），过滤器设置为点。为此，我需要传递需要与模型分开导入的纹理文件的效果，否则它会抱怨，因为它也包含在我的模型中。这完全符合我的要求，但是当我有许多具有自己纹理的不同模型时，这并不是一个真正令人愉快的方法。

**我的问题是：**

我如何能够直接从中访问模型中包含的纹理并将其发送到我的着色器？或者我可以直接使用 HLSL 访问它吗？

**我试过的：**

我发现帖子说它可以分配给一个纹理变量：

`Texture2d texture = ((BasicEffect)model.Meshes[0].Effects[0]).Texture`

当我尝试这个时，游戏运行但立方体只是黑色的。我可以看到纹理变量保存了信息并且具有正确的尺寸，但我无法判断它是否正确保存了实际图像。当我只使用`BasicEffect`它们时，它们的纹理渲染得很好。

**更新：**

经过一番摆弄，我设法让它工作。我的游戏加载了数百个相同的立方体，在创建每个立方体后，它会尝试使用上面的代码保存模型的纹理，然后遍历网格部分并将效果更改为我的自定义效果。我发现创建的第一个立方体可以保存纹理，但任何后续创建的立方体都会抱怨它们不能作为 BasicEffect 投射。这导致了一个带纹理的立方体，然后是很多黑色的。我猜想当它像这样一遍又一遍地重复使用相同的模型时，它只会使用修改后的模型以使用我在多维数据集的第一个实例上完成的自定义效果。这是正常的吗？通过将纹理变量更改为静态，我已将它们全部渲染为纹理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T07:32:32.277

如果其他人对此感到疑惑，因为我正在使用以下方法保存纹理：

```
Texture2d texture = ((BasicEffect)model.Meshes[0].Effects[0]).Texture 
```

这确实有效，但有一点需要注意，这就是导致我出现问题的原因。如果您将模型的效果从一个实例的默认 BasicEffect 更改为之后创建的模型的每个实例，它将被更改。因此，您只能在第一次在特定模型上更改效果之前使用上述代码。

后来我发现这本书准确描述了如何从模型中提取纹理和其他信息：*Sean James 的 3D Graphics with XNA Game Studio 4.0* - 特别是第 2 章

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:17:06.590

请注意，您将模型的纹理分配给临时 Texture2D 变量，而不是设置当前绑定到网格的效果中存在的纹理。如果您执行以下操作：

```
Texture2D textureToSet = Content.Load<Texture2D>("MyTex");

//Keep in mind that this method requires a basic effect type and that only one 
//effect is present on each mesh to work properly.
foreach(Mesh mesh in model.Meshes)
{
    ((BasicEffect)(mesh.Effects[0])).Texture = textureToSet;
} 
```

在 foreach 中发生的古怪事情只是您正在抓取效果，然后将其转换为 BasicEffect 并使用其 Texture 属性为其提供新的纹理以在使用时进行绘制。更详细的介绍请参见[文档](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.basiceffect.aspx)和[Shawn 的博客](http://www.shawnhargreaves.com/blogindex.html)。

# iphone - iPhone 5 和 ios6 有什么新的开发功能？

> ID：12685813
> 
> 赞同：-4
> 
> 时间：2012-10-02T07:03:28.653
> 
> 标签：iphone, ios, ipad

当 iPhone 4 发布时，有一个特殊的硬件用于基于位置的服务和 API。但是当我看到 iphone 5 和 ios6 时，有一些简单的内置应用程序和一些硬件改进。iOS6 和 iphone 5 有什么特殊的开发?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:07:58.373

您可以在登录 iOS 开发中心后自行了解所有新功能。有一个区域叫做“iOS 6 中的新功能”

[https://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Introduction/Introduction.html](https://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Introduction/Introduction.html)

# django - django社交身份验证中的网址错误

> ID：12685814
> 
> 赞同：0
> 
> 时间：2012-10-02T07:03:29.813
> 
> 标签：django, django-urls, django-facebook

我在我的应用程序中使用 django social auth，我发现一个**Page not** found 错误。我已将其安装在我的应用程序中，并将其与我的应用程序并行放置在我的项目中。

而且我还添加了 url 到我的 url 文件

网址（r''，包括（'social_auth.urls'）），

但是，当它向我显示错误时，它会显示我的 url 文件中的 url 列表以及我正在寻找的所需 url 的位置。

错误页面如下：

```
Page not found (404)
Request Method: GET
Request URL:    http://abc.com/login/
Using the URLconf defined in webdev.urls, Django tried these URL patterns, in this order:
^$ [name='home']
^polls/
^admin/doc/
^admin/
^register1/
^edit/
^edit1/
^customerreg/
^checkout/
^checkout1/
^order/
^order1/
^upload/
^upload1/
^product/
^profile/
^logout/
^login/(?P<backend>[^/]+)/$ [name='socialauth_begin']
^complete/(?P<backend>[^/]+)/$ [name='socialauth_complete']
^associate/(?P<backend>[^/]+)/$ [name='socialauth_associate_begin']
^associate/complete/(?P<backend>[^/]+)/$ [name='socialauth_associate_complete']
^disconnect/(?P<backend>[^/]+)/$ [name='socialauth_disconnect']
^disconnect/(?P<backend>[^/]+)/(?P<association_id>[^/]+)/$ [name='socialauth_disconnect_individual']
The current URL, login/, didn't match any of these. 
```

在上面的列表中，您可以看到该 url 文件具有该 url ，但它不访问该 ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:15:28.727

```
^login/(?P<backend>[^/]+)/$ [name='socialauth_begin'] 
```

此 url 不匹配，`http://abc.com/login/`因为 url 模式需要后端参数。

像这样的东西将匹配您正在访问的 url，但是那里没有后端参数，因此您可能需要选择默认值。

```
url(r'^login/$', 'your_view',), 
```

# java - 更新 JLabel 图像，通过选择动态

> ID：12685817
> 
> 赞同：2
> 
> 时间：2012-10-02T07:03:42.710
> 
> 标签：java, image, swing, jlabel, imageicon

所以基本上我创建了一个允许用户选择文件的 GUI，这个文件被检查为 .wav 文件。然后通过[JFreechart](http://www.jfree.org/jfreechart/)绘制这个文件的数据。这个由 Jfreechart 创建的图形或图像我想放入 JFrame 中。问题是代码：

```
 ImageIcon myIcon1 = new ImageIcon("blah.jpg");   
 JLabel graphLabel1 = new JLabel(myIcon1);
 southContent.add(graphLabel1); 
```

必须在我创建 JFrame 的方法中创建和声明（必须添加到框架中），因此我无法根据用户选择的文件将图像动态更新为新创建的图形。（在选择新文件时，通过按钮创建一个新的图形图像）

有没有办法强制

```
 ImageIcon myIcon1 = new ImageIcon("blah.jpg");   
  JLabel graphLabel1 = new JLabel(myIcon1);
  southContent.add(graphLabel1); 
```

更新到新图像（在同一个目录中，同名）

或者有没有办法使用映射来使用计数器动态设置图像名称（“blah.jpg”）？

这是我的SSCCE

```
public class gui extends JFrame {

    ImageIcon myIcon1 = new ImageIcon("C:/location/chart1.jpg");
    JLabel graphLabel1 = new JLabel(myIcon1);

    gui() {
        // create Pane + contents & listeners...
        JPanel content = new JPanel();
        JPanel southContent = new JPanel();
        content.setLayout(new FlowLayout());
        content.add(open_File);
        // Jfreechart graph image  -- not visible until selected
        graphLabel1.setVisible(false);
        // this is the graph image being added to the panel
        southContent.add(graphLabel1);
        southContent.setLayout(new FlowLayout());
        // add action listeners to buttons
        open_File.addActionListener(new OpenAction());
        // set Pane allignments & size...
        this.setContentPane(content);
        this.add(southContent, BorderLayout.SOUTH);
        this.setTitle("Count Words");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setSize(1100, 720);
        this.setLocationRelativeTo(null);
    }

    //  opening selected file directory.
    class OpenAction implements ActionListener {

        public void actionPerformed(ActionEvent ae) {
            /// gets user selection ( file ) and procesess .wav data into array
            /// loops through array creating X series for JfreeChart
            // Add the series "series" to data set "dataset"
            dataset.addSeries(series);
            // create the graph
            JFreeChart chart = ChartFactory.createXYLineChart(
                    ".Wav files", // Graph Title
                    "Bytes", // X axis name
                    "Frequency", // Y axis name
                    dataset, // Dataset
                    PlotOrientation.VERTICAL, // Plot orientation
                    true, // Show Legend
                    true, // tooltips
                    false // generate URLs?
                    );
            try {
                ChartUtilities.saveChartAsJPEG(
                        new File("C:/location/chart1.jpg"), chart, 1000, 600);
            } catch (IOException e) {
                System.err.println("Error occured:  " + e + "");
            }
            // !!!!! this is where i need to set the ImageIcon added to the 
            //  panel in "gui" to this new created Graph image ("chart1.jpg") 
            //  as above
            //  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            // sets the image label itself to visible as a new image has been
            // added ot it
            graphLabel1.setVisible(true);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:19:06.543

只需`JLabel`像往常一样将其添加到其容器中。然后，一旦你创建了图像并且你有一个 的实例，`ImageIcon`只需调用`setIcon()`.`JLabel`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T08:14:11.067

使用这样的东西应该允许显示波形的图像，以及波形的新图像。

```
try {
    //ChartUtilities.saveChartAsJPEG(
    //        new File("C:/location/chart1.jpg"), chart, 1000, 600);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ChartUtilities.saveChartAsPNG(baos, chart, 1000, 600);
    ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());
    BufferedImage image = ImageIO.read(bais);
    // !!!!! this is where we need to set the ImageIcon..
    graphLabel1.setIcon(new ImageIcon(image));
} catch (IOException e) {
    e.printStackTrace();
    System.err.println("Error occured:  " + e + "");
} 
```

OTOH，您可能希望增加内存大小并一次性生成整个波形，然后在滚动窗格中显示标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:25:01.627

感谢[Dan](https://stackoverflow.com/users/391554/dan)和[Andrew Thompson](https://stackoverflow.com/users/418556/andrew-thompson)，我有一个工作产品。

我使用计数变量来计算选择“OpenAction”按钮的教学时间。然后我使用这个变量为我通过[JFreechart](http://www.jfree.org/jfreechart/)创建的每个图像创建动态名称。因此，我使用 .setIcon 将图标图像重置为具有新名称的每个新创建的图像。如果您尝试将标签重置为与先前选择的图像图标同名的图像图标，.setIcon 似乎不起作用。

完成的代码段如下所示：

ImageIcon myIcon1 = new ImageIcon("C:/location/chart"+CounterVariable+".png");
graphLabel1.setIcon(myIcon1);

例如，这将创建图表；图表 1 图表 2 图表 3 等等。

# jquery - 来自asp.net weservice的jquery解析错误Json对象

> ID：12685822
> 
> 赞同：0
> 
> 时间：2012-10-02T07:04:33.540
> 
> 标签：jquery, json, parsing

这是一个从 asp.net webservice 返回的 JSON 对象。

```
[{"fullname":"martin","isAdmin":false,"Latitude":47,"Longitude":-124,"isOnline":false},
{"fullname":"melvyn","isAdmin":false,"Latitude":47,"Longitude":-124,"isOnline":true},
{"fullname":"simon","isAdmin":false,"Latitude":47,"Longitude":-124,"isOnline":false}] 
```

当我在 jquery 中使用警报时

```
 $(function () {
            $("#btnShow").click(function () {
               $.ajax(
               {
                 type: "POST",
                 url: "WS_PfaMembers.asmx/GetPFAMembersForMap",
                 data: "{}",
                 contentType: "application/json; charset=utf-8",
                 dataType: "json",
                 success: function (msg) {
                     alert(msg);
                 },
                 failure: function (msg) {
                     alert('error');
                 }

               });
           });
       }); 
```

的警报`msg`正在给予`object Object`。

如何解析对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:22:13.080

您将无法打印出返回的 JSON 对象并期望仅使用对象上的 alert 直接获取其内容。您可以做的是使用 jQuery.parseJSON 方法解析代码。看一眼：

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:27:52.157

[W3SCHOOLS.COM](http://www.w3schools.com/json/json_syntax.asp)

如果我是正确的！

```
alert(msg[0].fullname); 
```

会给你
马丁

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:33:09.403

解析是什么意思。如果你想遍历 json 对象.. ??

如果是这样试试这个

```
success : function(msg){

     $.each(msg , function(){
        $.each(this , function(i,value){
           console.log('The value of : ' + i + ' is - ' + value);  
        });
      });
} 
```

[检查小提琴](http://jsfiddle.net/sushanth009/LacBx/)

# php - 从数据库中返回随机行而不重复

> ID：12685823
> 
> 赞同：4
> 
> 时间：2012-10-02T07:04:58.173
> 
> 标签：php, mysql

我正在做一个测验，我将问题存储在表格中，每次提出一个问题时，我都希望显示另一个问题。我试过使用`rand()`：

```
select * from quiz order by rand() LIMIT 1 
```

但是这些行正在重复。

还有什么我可以使用的地方我可以获得随机行但不会再次遇到相同的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:09:19.337

您可以使用会话和测验 ID。

例如

```
select * from quiz order by rand() LIMIT 1 
```

在会话测验中添加测验ID：

```
if(!$_SESSION['quiz']) { $_SESSION['quiz'] = array(); }
$_SESSION['quiz'][] = $row['id']; 
```

并调用 NOT IN：

```
$session = implode(", ", $_SESSION['quiz']);
$query = "select * from quiz WHRE `id` NOT IN (".$session.") order by rand() LIMIT 1"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:06:34.910

只需获取`id`先前返回的行并将其从将来的查询中排除。

```
select * from quiz WHERE id NOT :previous_id order by rand() LIMIT 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T07:24:32.157

如果您要求用户以随机顺序完成所有问题一次，则必须跟踪每个用户的单独“播放列表”。最好使用会话：

```
session_start();

if (!$_SESSION['ids']) {
    $_SESSION['ids'] = $db->getAllQuestionIdsFromTheDatabase();
                    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                    // Leaving this up to you.

    shuffle($_SESSION['ids']);

    // $_SESSION['ids'] should now look like array(42, 12, 75, ...);
}

$question = $db->getQuestionById(array_shift($_SESSION['ids']));
... 
```

您可以在数据库中使用`ORDER BY RAND()`或在 PHP 中使用进行随机化`shuffle`，两者都可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T07:07:16.893

是的，您可以选择所有行（或其中一些行）并使用[`shuffle()`](http://www.php.net/manual/en/function.shuffle.php)主要是因为`ORDER BY RAND()`它确实对资源*不友好*，它实际上会重新查询表的每一行，分配一个随机数 ID，然后提供结果。

# php - 我们可以覆盖 html 电子邮件中的 Outlook 发件人姓名吗？

> ID：12685825
> 
> 赞同：-1
> 
> 时间：2012-10-02T07:05:12.760
> 
> 标签：php, mailto

我每月向客户发送一份 html 电子邮件通讯。我在布局中添加了转发给朋友的链接

```
href="mailto:%20?subject=SUBJECT &body=TEXT"> 
```

现在，当我单击该按钮时，它会打开“Outlook 新电子邮件”页面。当我将电子邮件发送给自己（测试）时，我会收到一封以发件人姓名作为我的姓名的电子邮件，这是我的 Outlook 电子邮件帐户中的帐户名称。所以我的问题是我们可以覆盖这个发件人姓名并在这种情况下选择一个默认显示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:12:05.907

这是您可以使用 href 邮件进行链接的所有操作。

[http://www.echocho.com/htmllinks11.htm](http://www.echoecho.com/htmllinks11.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:26:51.050

你不能用“mailto：”链接做到这一点。

您可能需要创建一些带有联系表格的小型“联系我”网站。

# asp.net - ASP.NET MVC 3 和 ASP.NET MVC 4 剃刀语法更改？

> ID：12685827
> 
> 赞同：4
> 
> 时间：2012-10-02T07:05:15.833
> 
> 标签：asp.net, asp.net-mvc, razor

我在 VS2012 中创建了两个应用程序

1.  应用#1。**MVC 3** , 网络 4.5
2.  应用#2。**MVC 4** , 网络 4.5

现在我打开任何 .cshtml 文件并添加以下代码：

```
<div>
@if (true)
{
      @string.Format("{0}", "test")
}
</div> 
```

它在 Application#1 (mvc3) 中工作得很好，我看到显示“测试”字样。但它在 Application#2 (mvc4) 中不起作用。

任何人都可以解释它为什么会发生以及应该改变什么？

**更新：**我刚刚发现了一件非常奇怪的事情。如果您将 @string.format("some text") 替换为 @String.format("some text") 一切正常（注意大写字符串）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T14:08:42.890

升级时我们遇到了类似的问题......看起来简单的写入`@string.Format("{0}", "test")`将不再像在 MVC3 中那样直接写入页面。相反，您必须执行以下操作：

```
<div>
@if (true)
{
      Html.Raw(string.Format("{0}", "test"));
}
</div> 
```

或者

```
<div>
@if (true)
{
      <text>@string.Format("{0}", "test"))</text> //added @ to evaluate the expression instead of treating as string literal
}
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:07:46.343

你在使用 Razor 引擎吗？

既然你在一个`@if`块中，你可以写：`string.Format("{0}", "test")`而不是 `@string.Format("{0}", "test")`.

*注意@*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:11:06.543

在 Razor Syntax for Conditional check 中，您可以使用一个 @ 符号开始一个块，然后将您的 Condition 放入其中。

例如

```
 @{var price=20;}
<html>
<body>
@if (price>30)
  {
  <p>The price is too high.</p>
  }
else
  {
  <p>The price is OK.</p>
  }
</body>
</html> 
```

因此，在您的情况下，您在一个块内使用两个 @ 。检查该部分，它将得到解决。

所以你的代码块应该如下所示。

```
<div>
@if (Model == null)
{
      <p>@string.Format("{0}", "test")</p>
}
</div> 
```

最重要的是，如果您像在代码行中那样两次输入“@”，它将为您提供如下图所示的提示。这是 Razor 语法 4.0 的功能。你也错过了“;” 在你的代码行中。

![在此处输入图像描述](../Images/031fe9b17071c1b9b31d8d6ec229bf69.png)

[http://www.w3schools.com/aspnet/razor_cs_logic.asp](http://www.w3schools.com/aspnet/razor_cs_logic.asp)

# ruby-on-rails - 在 Rails 中将缩写语言转换为完整（ en -> English ）的更好方法是什么？

> ID：12685830
> 
> 赞同：0
> 
> 时间：2012-10-02T07:05:37.133
> 
> 标签：ruby-on-rails

我需要从缩写中制作完整的语言名称。

我试图用简单的方式来制作它（不工作）

```
def long(lang)
 if lang == "en"
  lang == "English"
 elsif lang == "ru"
  lang == "Russian"
 end
 ...
end 
```

有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:31:06.850

它不起作用，因为当赋值运算符应该是比较运算符时。看一下这个：

```
def long(lang)
  if lang == "en"
    lang = "English"
  elsif lang == "ru"
    lang = "Russian"
  ...
  end

  lang
end 
```

或者你可以让它更干净更短

```
def long lang
  map = {en: 'English',
    ru: 'Russian'}
  map[lang.to_sym]
end 
```

甚至更短（通过消除临时变量）

```
def long lang
  {
    en: 'English',
    ru: 'Russian'
  }[lang.to_sym]
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:03:24.557

`I18n`当前语言环境、可用语言环境等是符号，而不是字符串。所以你会有

```
def long(language)
  case language
  when :en
    "English (symbol)"
  when "en"
    "English (string)"
  else
    "something else"
  end
end

>> long(I18n.default_locale)
=> "English (symbol)" 
```

如果你想按照你的意愿去做，你必须先将其转换为字符串。

```
def long(language)
  case language.to_s
  when :en
    "English (symbol)"
  when "en"
    "English (string)"
  else
    "something else"
  end
end

>> long(I18n.default_locale)
=> "English (string)" 
```

# javascript - 浏览器后退按钮点击事件

> ID：12685833
> 
> 赞同：2
> 
> 时间：2012-10-02T07:06:16.363
> 
> 标签：javascript, jquery, jquery-mobile

我想捕获浏览器的后退按钮事件

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:08:00.120

没有*后退按钮*事件，但您可以检测到随着[`popstate`](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#The_popstate_event)事件发生的历史变化。

# php - 为动态规划保存状态的算法

> ID：12685834
> 
> 赞同：2
> 
> 时间：2012-10-02T07:06:19.657
> 
> 标签：php, c, algorithm, dynamic-programming

这是一个关于使用动态编程在问题中保存状态的问题。

*   DP 的每个问题都会保存结果并进一步使用它们来减少计算量。假设我们计算函数值，`f(x,y)=290`并将其保存在二维数组 $save 中，这样，`$save[x][y]=290`. 这可以在`'f'`仅依赖于少量变量时完成（例如，在上面的示例中只有 2 个变量 x 和 y）。但是**什么时候可以做`'f'`取决于说，10或15个变量。制作 10 或 15 维的数组不会节省内存。**

*   **另一种解决方案**可能是我们**连接变量的值**（假设它们是唯一的）并将它们存储在关联数组中，使用通过连接获得的字符串作为键。但是，**串联是一项耗时的操作**。**因此，我们在内存和时间之间进行了权衡**。

**如果状态所依赖的变量数量更多，有没有办法存储状态**？我认为可能有一些方法可以使用 OOPS 或指针，但我不太能够构建任何东西。有什么建议么？每个想法都受到赞赏，但优先考虑有关**“C”**或**“PHP”的解决方案。**我知道'C'不处理关联数组，但**我只想要一种算法/方法来保存状态。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:22:17.560

1.  在稀疏数据中保存状态通常使用[`map` （关联数组）](http://en.wikipedia.org/wiki/Associative_array)接口完成。尽管 C 没有内置它 - 互联网上到处都是提供此功能的库。

2.  如果您无论如何都要计算大多数/所有 (x1,...,xk) 值 -`map`不鼓励使用 a - 它会更慢并且不会节省内存（实际上对于这些情况是相反的）。如果是这种情况 - 多维数组可能是最好的解决方案。

3.  很多时候，在 DP 中，您不需要包含迄今为止*所有信息的数组，只需要先前计算的“线”，并覆盖数组。*有效 - 对于许多需要 k*N 表的 DP 问题，您实际上只需要大小为 2*N 的表，并迭代地覆盖相同的行。同样的原则适用于我认为的任何维度——如果你需要的只是前一行的数据，而不是所有数据。

# javascript - MSDN 中 JScript 一词的状态是什么？

> ID：12685840
> 
> 赞同：0
> 
> 时间：2012-10-02T07:06:40.840
> 
> 标签：javascript, jscript

有一个类似的问题' [JavaScript 和 JScript 有什么区别？](https://stackoverflow.com/questions/135203/whats-the-difference-between-javascript-and-jscript)' 虽然它只涵盖了 IE8。奇怪的是，从 IE 9 开始，[“JavaScript”这个词被引用](http://msdn.microsoft.com/en-us/library/d1et7k7c(v=vs.94).aspx)了。似乎以后会使用“JavaScript”这个术语。

此外，MS 在对特定 ECMAScript 版本的合规性方面区分了这两种语言。

*   脚本

> 是 ECMA 262 语言规范（ECMAScript Edition 3）的 Microsoft 实现（[链接](http://msdn.microsoft.com/en-us/library/hbxc2t98(v=vs.84).aspx)）

*   Javascript

> 符合 ECMAScript 语言规范第 5 版（[链接](http://msdn.microsoft.com/en-us/library/d1et7k7c(v=vs.94).aspx)）

那么，JScript 这个术语会发生什么？会不会仅限于非浏览器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:15:23.593

编辑：我认为这个问题是关于 IE8 中 Javascript 的实现状态。请注意，“JScript”（忽略“JScript.NET”）在历史上是 Microsoft 的 ECMAScript 的“Active Scripting”实现的名称，我在下面进行了描述：

JScript（在 Internet Explorer 版本 3 到版本 8 中发现）是使用**Active Scripting**引擎实现的，该引擎与 Windows Script Host 共享以执行 shell`*.vbs`和`*.js`文件，并由服务器端 Classic ASP 环境共享。

从长远来看，Active Scripting 似乎已被弃用：在服务器端，Classic ASP 被认为已死（最后一次更新是 1999 年的 Windows 2000 版本 3.0），在浏览器中它已被 JIT“Chakra”引擎取代在 Internet Explorer 9 中，在 shell 中它已被 PowerShell 替换。

不过微软将在一段时间内支持 Active Scripting：Windows 8 为系统提供全面支持，并且 Windows 8 的支持生命周期应该到 2022 年才结束（假设 MS 坚持 10 年生命周期支持政策）。

# image - 使用位图有什么好处吗？

> ID：12685841
> 
> 赞同：0
> 
> 时间：2012-10-02T07:06:44.100
> 
> 标签：image, compact-framework

我正在将一些 CF 2.0 VB.Net 应用程序移植到具有两倍屏幕分辨率的较新版本的手机上。所以我必须将所有东西的尺寸加倍，否则它们都会被挤压到屏幕的左上角。

一个屏幕有一个 250K 大小的位图，在我将尺寸翻倍之后，它自然会膨胀到 1 MB。这在手持设备上不是很好，所以我启动了 irfanview 并将其转换为 .GIF。.GIF 文件大小只有 60KB，图像质量没有明显变化。

对我来说，这似乎很简单：将所有位图转换为 Gif（或 JPG）并在一小部分磁盘空间中获得相同的结果（并且可能更快的表单加载时间）。

但是有谁知道你会优先使用位图而不是 GIF/JPEG 的情况？我找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:29:28.590

我真的想不出任何现实的例子，你更喜欢位图而不是 GIF。由于 GIF 是一种无损格式，因此您在存储图像时不会丢失任何信息。因此，在您的应用程序中读取文件后，您将拥有与读取位图相同的图像数据。就像你说的：文件会更小，因此可能会更快地从磁盘读取。

JPEG 有所不同，因为它是一种有损格式，这意味着在其中存储图像时会丢失信息。您需要确定信息丢失在您的应用中是否有意义。

当且仅当从磁盘读取文件比在内存中解压缩文件更快时，位图才会更可取。

准确地说，在将图像存储在主内存中时，您会更喜欢位图，这样您就可以轻松地处理代码中的数据。当您使用图像库加载文件时，这实际上是您很可能已经拥有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:41:56.680

长话短说，BMP 存储为一系列像素及其颜色。如果您想做诸如模式识别、运动检测等之类的事情，这将非常有用。

位图通常用于方便 - 您可以在没有专业图形软件的情况下在油漆中敲出一张。

# php - 在 PHP 中生成大量 PDF

> ID：12685843
> 
> 赞同：2
> 
> 时间：2012-10-02T07:06:53.473
> 
> 标签：php, pdf, report

我们正在基于 php 的 ERP 平台上为我们的客户生成基于 pdf 的报告卡。他们希望能够生成大约 2000 个成绩单一个 pdf 文件作为单独的页面。

我们使用名为 DomPDF 的 HTML 到 PDF 转换器成功完成了这项工作。但是脚本太重，需要大约一个小时才能完成，有时会中断，这是不可接受的。他们目前使用基于桌面的软件，该软件通过 Crystal Reports 即时提供报告卡。

在 PHP 中，我们想知道如何以更高的速度（希望不到 10 秒）生成如此大量的 PDF 页面（2000 年）。

欢迎对此提出任何建议。

服务器在 Linux Ubuntu 上运行，我们不介意使用涉及使用 exec 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:50:07.123

使用 WKHTMLTOPDF 生成 450 到 500 页之间的 PDF 报告（仅 2 MB 文本）需要 30 到 50 秒，而 TCPPDF 或 HTMLTOPDF 或 DOMPDF 中相同数量的数据需要 5 到 8 分钟

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:23:40.303

如果您想从 HTML 生成 PDF，我建议您通过 exec() 或 system()使用[WKHTMLTOPDF 。](http://code.google.com/p/wkhtmltopdf/)我们在一些应用程序中使用它，到目前为止还没有任何问题（但我们也没有像你们一样生成相同数量的数据）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:16:40.197

我们一直在使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/) -utility，它做得很好，但我不确定它是不是最快的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T07:27:46.087

或者也许试试 i-report 设计器。我曾经使用过它，它很棒，但是您需要阅读论坛或教程以进行自定义，其中一件事是它是开源的，希望对您有所帮助。

[http://community.jaspersoft.com/project/ireport-designer](http://community.jaspersoft.com/project/ireport-designer)

# html - HTML img 属性“完成”

> ID：12685844
> 
> 赞同：8
> 
> 时间：2012-10-02T07:06:59.357
> 
> 标签：html, image, attributes

谁能解释属性的含义`complete`？

我在某处读到它可能与 DOM 有关。

```
<img src="/folder/pic.jpeg" complete="complete" /> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T09:09:56.503

该属性`complete`没有规范定义的含义，它可能没有效果（尽管可以通过`getAttribute()`方法读取）。所以问题中的代码可能是基于一些误解。

根据 HTML5 草案，根据接口，有对应于元素的对象的`complete` *属性*。[属性](http://www.w3.org/TR/html5/embedded-content-0.html#dom-img-complete)的[定义](http://www.w3.org/TR/html5/embedded-content-0.html#dom-img-complete)基本上意味着当浏览器完全接收到图像时该值为真（尽管这里有一些细微差别）。由于这是由浏览器控制的，反映加载状态，自然将属性定义为只读。`img``HTMLImageElement`[`complete`](http://www.w3.org/TR/html5/embedded-content-0.html#dom-img-complete)

此属性在浏览器中广泛存在，但显然以一种损坏的方式存在：如果您有一个`img`引用不存在资源的元素（404 Not Found），那么 Chrome 和 Firefox 将该属性指示为具有值 true （IE 在这里得到了正确的结果：错误的）。所以这个属性暂时用处不大。

在 HTML 中设置属性对此没有影响。只有在定义了对应关系时，HTML 属性和元素对象属性才会相互对应。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-02T07:08:54.317

它是在下载图像时设置的。

我从来没有像在你的例子中那样在 HTML 中明确地看到它（[MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/Img)说它不是`img`元素的属性）。我只是用来检查图像是否已使用 JavaScript 下载（但是存在跨浏览器问题）。a 上的属性`HTMLImageElement`返回 a `Boolean`。

```
[].forEach.call(document.querySelector("img"), function(img) {
    // Loaded?
    img.complete && (img.style.border = "5px solid #f00");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:13:55.860

它用于检查图像是否已完成加载。

```
document.getElementsByTagName('img')[0].complete 
```

如果加载完成返回真，否则返回假。但是，它不像您的示例中那样用作属性。

# c# - 如何在 App.Config 中编写 URI 字符串

> ID：12685846
> 
> 赞同：39
> 
> 时间：2012-10-02T07:07:00.747
> 
> 标签：c#, configuration, windows-services, uri, app-config

我正在制作一个`Windows Service`. 必须每晚下载一些东西，因此我想将`Service`URI 放在 App.Config 中，以防我以后需要更改它。

我想在我的 App.Config 中编写一个 URI。是什么使它无效，我应该如何处理？

```
<appSettings>
    <add key="fooUriString" 
         value="https://foo.bar.baz/download/DownloadStream?id=5486cfb8c50c9f9a2c1bc43daf7ddeed&login=null&password=null"/>
</appSettings> 
```

我的错误：

```
- Entity 'login' not defined
- Expecting ';'
- Entity 'password' not defined
- Application Configuration file "App.config" is invalid. An error occurred 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-02T07:10:04.940

您没有正确编码 URI 中的 & 符号。请记住，这`app.config`是一个 XML 文件，因此您必须符合 XML 的转义要求（例如`&`should be `&amp;`、`<`should be`&lt;`和`>`should be `&gt;`）。

在您的情况下，它应该如下所示：

```
<appSettings>
    <add
        key="fooUriString" 
        value="https://foo.bar.baz/download/DownloadStream?id=5486cfb8c50c9f9a2c1bc43daf7ddeed&amp;login=null&amp;password=null"
    />
</appSettings> 
```

但总的来说，如果你想存储一个看起来像这样的字符串，`"I <3 angle bra<kets & ampersands >>>"`那么这样做：

```
<appSettings>
    <add
        key="someString"
        value="I &lt;3 angle bra&lt;kets &amp; ampersands &gt;&gt;&gt;"
    />
</appSettings>

void StringEncodingTest() {
    String expected = "I <3 angle bra<kets & ampersands >>>";
    String actual   = ConfigurationManager.AppSettings["someString"];
    Debug.Assert.AreEqual( expected, actual );
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T07:13:02.733

`&amp;`应该可以正常工作，维基百科有一个[XML 中预定义实体的列表](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-02T07:12:37.633

尝试使用：`&amp;`代替**&**在网址中

# java - doFilter 后更新响应

> ID：12685848
> 
> 赞同：2
> 
> 时间：2012-10-02T07:07:13.697
> 
> 标签：java, servlets

我希望在`doFilter()`函数完成运行后添加一个 HTTP 标头。

```
public void doFilter(ServletRequest request, ServletResponse response,
                     FilterChain chain) throws IOException, ServletException {
  HttpServletResponse httpResp = (HttpServletResponse) response;

  try {
    chain.doFilter(request, httpResp);

  } finally {           
    httpResp.setHeader("ADD A HEADER: ", "HEADER");
  }                                     
} 
```

似乎`doFilter`刷新了响应。

# 更新：

谢谢。查看 IgorMadjeric 和richardtz 的答案后，我决定尝试响应包装器：

这是包装器：

```
public class BufferedHttpServletResponse extends HttpServletResponseWrapper {

public BufferedHttpServletResponse(HttpServletResponse response) {
    super(response);
}

public void flushBuffer() {
    System.out.println("flush");
} 
```

}

这是修改后的代码：

```
public void doFilter(ServletRequest request, ServletResponse response,
                     FilterChain chain) throws IOException, ServletException {
    HttpServletResponse httpResp = (HttpServletResponse) response;

    try {
        BufferedHttpServletResponse bufferedResponse = new BufferedHttpServletResponse(httpResp);
        chain.doFilter(request, bufferedResponse);

    } finally {         
        bufferedResponse.setHeader("ADD A HEADER: ", "HEADER");
    }                                       
} 
```

仍然无法正常工作。我做错什么了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:32:47.483

一旦刷新/提交（它已经发送到客户端），您就无法修改标头的响应。

doFilter 不会刷新响应，但是请求执行中的许多事情都可能导致它。（对 response.flush() 的显式调用，响应中的正文太大），并且您无法控制它。

但是，您可以使用 HttpServletResponseWrapper 来更改它。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-23T21:08:37.657

正如评论和[这个](https://stackoverflow.com/questions/11025605/response-is-committing-and-dofilter-chain-is-broken)问题中已经提到的那样，覆盖flushBuffer（）可能还不够，但您还需要覆盖getWriter（）和getOutputStream（）。在某些情况下，即使这样可能还不够。例如，如果在响应上调用 sendError(int)，它也可以被提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:30:17.537

就您发布的代码而言，您不能说：

> 似乎 doFilter 刷新了响应。

关于提交响应有一些规则。

过滤后，某些组件可能已经提交了响应。

如果您想避免这种行为，您应该使用请求/响应包装器，这将阻止组件，您的过滤器应用于提交响应。

# php - Amazon Checkout Sandbox 无法处理订单

> ID：12685849
> 
> 赞同：1
> 
> 时间：2012-10-02T07:07:14.693
> 
> 标签：php, api, amazon-web-services, amazon, amazon-fps

我的目标是将我们的网站与 Amazon Checkout 集成。我们已经与 google 和 paypal api 进行了交互，但存在一些小问题。然而，对于亚马逊，我们已经尝试过他们提供的 PHP 代码并尝试使用创建按钮。使用沙箱中的 PHP 代码，我们可以完成订单，但随后会出现错误，提示付款失败，您的借记卡未收费。在卖方中心，它根本没有提供任何信息表明任何事情都发生过。

当尝试使用亚马逊工具创建按钮并将地址更改为沙箱地址时，它说您必须将付款发送到经过验证的电子邮件地址和帐户。

该帐户上有一张信用卡、经过验证的银行帐户、已完成的税务信息和经过验证的电子邮件。

亚马逊有没有其他人有类似的问题？是否有一个令人兴奋的非亚马逊项目已成功与亚马逊对接，可以作为参考。亚马逊的文档......缺乏而且到处都是。

```
<form action="https://authorize.payments-sandbox.amazon.com/pba/paypipeline" method="POST">
<input type="image" src="https://authorize.payments-sandbox.amazon.com/pba/images/payNowButton.png" border="0">
<input type="hidden" name="accessKey" value="MERCHANT_KEY_REMOVED">
<input type="hidden" name="amount" value="USD 1.1">
<input type="hidden" name="description" value="Test of the Vidya Amazon Payment Alpha">
<input type="hidden" name="recipientEmail" value="MERCHANT_EMAIL_REMOVED">
<input type="hidden" name="signatureMethod" value="HmacSHA256">
<input type="hidden" name="referenceId" value="2">
<input type="hidden" name="immediateReturn" value="0">
<input type="hidden" name="returnUrl" value="http://yourwebsite.com/return.html">
<input type="hidden" name="abandonUrl" value="http://yourwebsite.com/cancel.html">
<input type="hidden" name="processImmediate" value="1">
<input type="hidden" name="ipnUrl" value="REMOVED">
<input type="hidden" name="cobrandingStyle" value="logo">
<input type="hidden" name="collectShippingAddress" value="0">
<input type="hidden" name="fixedMarketplaceFee" value="0.01">
<input type="hidden" name="variableMarketplaceFee" value="4">
<input type="hidden" name="signatureVersion" value="2">
<input type="hidden" name="signature" value="REMOVED">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:06:58.713

所以这是独家新闻。立即处理设置为 1，您必须省略费用字段，否则将永远不会被接受。

这两个需要删除才能正常工作

```
<input type="hidden" name="fixedMarketplaceFee" value="0.01" />
<input type="hidden" name="variableMarketplaceFee" value="4" /> 
```

如果您使用 AWS SimplyPay PHP 文件，您必须从所有 3 个文件中删除变量才能使它们工作。或设置 processImmediate = 0。

# sql - 在 SQL 字符串中查找多个子字符串

> ID：12685862
> 
> 赞同：0
> 
> 时间：2012-10-02T07:08:01.730
> 
> 标签：sql, sql-server, string, sql-server-2005

我在列中出现了几次差异字符串，例如这个例子

`'dsasdasdsd'+'ewewewew'+'45454545'+(avg('uuuuuuu'))`

我需要将此字符串拆分为几列，其中的子字符串位于单引号之间

像这样：

```
Column 1 = dsasdasdsd
Column 2 = ewewewew
Column 3 = 45454545
Column 4 = uuuuuuu 
```

出现次数是随机的，因此原始列的长度也不固定（从 50 char 到 > 1000）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:19:54.790

```
DECLARE @InStr VarChar(1000) = '''dsasdasdsd''+''ewewewew''+''45454545''+(avg(''uuuuuuu''))'''
DECLARE @intStart INT = 0
DECLARE @intEnd INT = 1
DECLARE @ColNo INT = 1
DECLARE @MyString VARCHAR(2000)
DECLARE @SelectString VARCHAR(8000) = 'SELECT '

WHILE(@intStart < LEN(@InStr) )
BEGIN 
    SELECT @intStart = CHARINDEX(CHAR(39), @InStr, 0) + 1
    SELECT @intEnd = CHARINDEX(CHAR(39), @InStr, @intStart)  
    SELECT @SelectString = @SelectString + CHAR(39) + SUBSTRING(@InStr, @intStart, @intEnd - @intStart) + CHAR(39) + ' As [Column ' + CAST(@ColNo As Varchar) + '],'
    SELECT @InStr = SUBSTRING(@InStr, @intEnd + 1, LEN(@InStr)-@intEnd )

    SET @ColNo = @ColNo +1

END

SELECT @SelectString = LEFT(@SelectString, Len(@SelectString) -1)

EXEC (@SelectString) 
```

我一直在玩这个并且它确实运行但不幸的是我现在没有时间继续它但也许你可以改进它？

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T11:27:41.127

你可以试试这个：

```
create table tSqlStrings (sText nvarchar(1000))

insert tSqlStrings values('''dsasdasdsd''+''ewewewew''+''45454545''+(avg(''uuuuuuu''))')

create table tResults (
  sColumn1 nvarchar(1000)
  ,sColumn2 nvarchar(1000)
  ,sColumn3 nvarchar(1000)
  ,sColumn4 nvarchar(1000)
) 
```

和

```
DELETE tResults

DECLARE @sText nvarchar(1000) = (
  SELECT
    sText
  FROM
    tSqlStrings
)

DECLARE @lBegin int = CHARINDEX('''',@sText)
DECLARE @lEnd int = charindex('''',
                              substring(@sText,
                                        CHARINDEX('''',@sText)+1,
                                        len(@sText)))
DECLARE @sText0 nvarchar(1000)
DECLARE @sColumn1 nvarchar(1000)
DECLARE @sColumn2 nvarchar(1000)
DECLARE @sColumn3 nvarchar(1000)
DECLARE @sColumn4 nvarchar(1000)

DECLARE @iCnt int = 1
while @iCnt<=4
  --(0<len(@sText) and 0<@lBegin and 0<@lEnd)
BEGIN

  SET @sText0 = substring(@sText,@lBegin+1,@lEnd-2)
  IF @iCnt=1 begin SET @sColumn1=@sText0 end
  IF @iCnt=2 begin SET @sColumn2=@sText0 end
  IF @iCnt=3 begin SET @sColumn3=@sText0 end
  IF @iCnt=4 begin SET @sColumn4=@sText0 end

  set @sText = substring(@sText,@lBegin + @lEnd+2,len(@sText))

  SET @lBegin = CHARINDEX('''',@sText)
  SET @lEnd = charindex('''',
                        substring(@sText,
                                  CHARINDEX('''',@sText)+1,
                                  len(@sText)))
  SET @iCnt = @iCnt+1
END

INSERT
    tResults (sColumn1,sColumn2,sColumn3,sColumn4)
    VALUES (@sColumn1,@sColumn2,@sColumn3,@sColumn4)

SELECT * FROM tResults 
```

在[sql 小提琴上](http://www.sqlfiddle.com/#!3/8a1b1/1/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:18:05.157

您将能够使用 CHARINDEX() 和 SUBSTRING() 来实现此目的 以下示例显示了拆分为 2 列。当它有更多的列时，查询会变得更复杂一些。但是，您可以按照这个来构建您的查询。

```
SELECT OriginalColumn
, SUBSTRING(OriginalColumn, 1,CHARINDEX('x',OriginalColumn,1)-1) AS Column1
, SUBSTRING(OriginalColumn, CHARINDEX('x',OriginalColumn,1) + 1 ,CHARINDEX('x',OriginalColumn,CHARINDEX('x',OriginalColumn,1)-1)) AS Column2
FROM YourTable 
```

我在示例中使用了“x”作为分隔符。以下是示例结果

![在此处输入图像描述](../Images/20674166d29e7ceaa1e5646f0eb277e3.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T09:23:49.793

尝试这个：

```
declare @delim char
set @delim = ''''
declare @str nvarchar(max)
declare @substr nvarchar(max)
declare @newstr nvarchar(max)
declare @tmpTable table (partStrings nvarchar(max))
declare @count int
set @count = 0
select @str = <***Your String***>
while(charindex(@delim,@str) != 0)
begin
set @count = @count + 1
Select @substr = substring(@str,1,charindex(@delim,@str)-1)
if((@count % 2) = 0)
begin
    insert into @tmpTable values(@substr)
end
Set @newstr = substring(@str,charindex(@delim,@str)+1,len(@str)-charindex(@delim,@str))

set @str = @newstr
end
select partStrings from @tmpTable 
```

# java - 测试已发送电子邮件 - Dumbster 和 greenmail 未捕获已发送的 JavaMail

> ID：12685865
> 
> 赞同：0
> 
> 时间：2012-10-02T07:08:28.693
> 
> 标签：java, email, testing, jakarta-mail, greenmail

我正在尝试集成[Dumbster](http://quintanasoft.com/dumbster/)来测试我们基于 JavaMail 的外发电子邮件通知程序。电子邮件已发送，但在我的测试中 Dumbster 没有收到它们。我不确定我是否需要额外的配置来完成这项工作，但是在它所说的愚蠢主页上，它会自动侦听通过端口 25 上的 smtp 发送的邮件。

这是我们的 java 邮件设置：

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host" value="smtp.somewhere.com" />
    <property name="port" value="25" />
    <property name="username" value="theUserName" />
    <property name="password" value="thePassword" />

    <property name="javaMailProperties">
        <props>
            <prop key="mail.smtp.auth">true</prop>
            <prop key="mail.smtp.starttls.enable">true</prop>
        </props>
    </property>
</bean> 
```

我们的 Mailer 类只是注入了 JavaMailer：

```
@Component
public class OurMailer {

    @Inject
    private MailSender mailSender;

    public void sendMail(String from, String to, String subject, String msg) {

        SimpleMailMessage message = new SimpleMailMessage();

        message.setFrom(from);
        message.setTo(to);
        message.setSubject(subject);
        message.setText(msg);
        mailSender.send(message);
    } 
```

正如他们在页面上展示的那样，测试非常简单：

```
@Inject
private OurMailer ourMailer;

@Test
public void ourMailer_should_send_mail() {
    SimpleSmtpServer server = SimpleSmtpServer.start();
    ourMailer.sendMail(FROM_EMAIL, TO_EMAIL, SUBJECT, MESSAGE);
    server.stop();
    Assert.assertTrue(server.getReceivedEmailSize() == 1);
} 
```

正如我所说，邮件已发送，但断言失败。

有任何想法吗？

顺便说一句：我也尝试了 Greenmail，但结果相同：

maven略有不同：

```
 <dependency>
        <groupId>com.icegreen</groupId>
        <artifactId>greenmail</artifactId>
        <version>1.3.1b</version>
        <exclusions>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

考试

```
 GreenMail greenMail = new GreenMail(); //uses test ports by default
    greenMail.start();
    // send mail
    Assert.assertEquals("subject", greenMail.getReceivedMessages()[0].getSubject());
    greenMail.stop(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:33:34.337

测试失败，因为配置显示“将邮件发送到 SMTP 服务器`smtp.somewhere.com`”，但您想将其发送到`SimpleSmtpServer`运行的`localhost`

使用系统属性作为bean的`host`参数，并在运行测试时将其设置为。`mailSender``localhost`

也就是说，我建议将测试分成两部分。第一个测试应该只是确保使用正确的参数调用该方法。这样你就会知道代码尝试在正确的时间发送邮件；在单元测试中测试 SMTP 身份验证、您的邮件服务器、邮件基础设施和网络几乎没有意义——所有这些都由各自的制造商进行了测试。

第二个测试应该只测试方法`sendMail()`方法。将该测试放入可以手动运行的测试套件中。您在这里想知道的是您是否正确设置和使用了`MailSender`API。除非您更改`sendMail()`方法中的代码，否则您根本不必运行此测试。

这将加快您的单元测试并摆脱许多不必要的依赖项，即使您的代码正常工作，也会导致测试失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T00:25:21.680

注意：似乎有较新版本的 Dumbster（无法从原始来源获得）可能已经修复了您遇到的挂起错误：

sourceforge.net/p/dumbster/patches/9/

[https://github.com/rjo1970/dumbster](https://github.com/rjo1970/dumbster)

git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;a=commit;h=b0f7be4b0666dca22205e6df5c7374677daa416e

这些天，Greenmail 似乎就住在这里：

[https://github.com/greenmail-mail-test/greenmail](https://github.com/greenmail-mail-test/greenmail)

# java - 按后退按钮不会关闭 android 应用程序

> ID：12685869
> 
> 赞同：0
> 
> 时间：2012-10-02T07:08:51.980
> 
> 标签：java, android

> **可能重复：**
> [android按下后退按钮应该退出应用程序](https://stackoverflow.com/questions/2354336/android-pressing-back-button-should-exit-the-app)

我正在尝试使用手机的后退按钮关闭应用程序。目前我正在覆盖`onKeyPressed`方法并调用`moveTaskToBack(true);`. 它确实隐藏了应用程序，但不会关闭它。它仍然留在记忆中。如何通过按返回按钮关闭应用程序？

这是我的代码

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        moveTaskToBack(true);
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:12:43.413

我认为这样做更安全`this.finish();`。

`System.exit(0)`不推荐，最好让`Android`app的管理。

检查此链接：[退出应用程序是否令人不悦？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T07:14:56.797

你没有。嗯，不完全。

应用程序的生命周期是以这样一种方式制作的，即处于后台是正常的和预期的。这允许应用程序在用户需要时快速恢复到前面，并允许 Android 进行内存管理。你有特殊的方法`onPause()`和`onResume()`帮助你处理这个问题。

除此之外，`finish()`将关闭当前活动并将其从堆栈中删除，同时`System.exit(0)`应该关闭应用程序。

您应该阅读 CommonsWare (Mark Murphy) 对[这个](https://stackoverflow.com/q/2033914/1069068)问题的出色回答，因为它解决了让 Android 将您的应用程序保留在内存中的许多原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T07:11:01.783

当您推送新活动时，请在前一个活动上调用完成（），否则它将保留在堆栈上，因此在您回击并弹出当前活动时出现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T07:17:26.873

您应该可以`finish()`用来关闭您的应用程序。但是如果是由于内存管理的原因，我宁愿使用android自己的内存管理。它实际上非常好。如果需要释放内存，它将定期删除暂停的应用程序。除非它是一项服务，否则它不应该在堆栈中占用太多内存。然而也有例外。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T07:36:33.927

不要对我说，但我相信 onbackpressed 现在是推荐的方法。是的完成（）；应该可以正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T07:10:40.450

**-**用于`System.exit(0)`在后退按钮**关闭**您的应用程序，这对 java 应用程序非常有用，同样适用于 Android，但**建议使用以下方法。**

`finish()`并且`finishActivity()`是 2 个选择

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T07:10:55.177

如果要退出应用程序，请编写以下内容：

```
finish() 
```

因为不[推荐](https://stackoverflow.com/a/18658083/1777090)**System.exit(0)**。这也将从您的应用程序中退出。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-02T07:10:22.173

`System.exit(0)`关闭整个应用程序。 `finish()`是关闭当前活动的另一个片段。

# objective-c - 魔术师和自定义类——理解头文件和实现文件

> ID：12685877
> 
> 赞同：0
> 
> 时间：2012-10-02T07:09:47.453
> 
> 标签：objective-c, oop

我在 Objective-C 世界中迈出了我的第一个绊脚石，还有一本关于这个主题的书。我现在已经到了将创建和使用自定义类的概念内化的阶段。

我猜想正确理解这些基本概念和原则是我未来学习 Objective-C 的关键，我只是想和你核实一下是否正确掌握了这些概念。

因此，在创建自定义类时，我了解到这是在两个单独的文件中完成的——公共类头文件和类实现文件。为了将这个概念内化，我将其比喻为“魔术师”在观众面前表演魔术。

头文件有点像魔术师表演的剧场外的海报。在进入之前，我们都可以看到魔术师长什么样（属性），他（主要是“他”）可以执行哪些技巧（方法），以及他可以制作哪些类型的魔术（类型声明） ）。因此从魔术师的这张“公开”海报（头文件）中，我可以了解到他可以施展什么样的魔术，使用什么道具。也许还提到了这位特殊的魔术师从伟大的胡迪尼（阶级遗产和胡迪尼因此成为超阶级）那里学到了一些技巧。

如果让我在后台，我就可以真正看到他是怎么弄的，也就是说，我可以查看魔术师的实现文件。

这个比喻会不会有点像您如何理解自定义类的概念？

但是，我还没有弄清楚类方法和实例方法的概念与这个比喻有什么关系？

你能说实例方法属于魔术师这个特殊“实例”在这个特定节目中表演的一种技巧，而类方法将是当代魔术师可以表演的技巧吗？第三，方法使用“类型”的方式有点令人困惑。有些似乎是在接口文件中预先声明的，有些似乎只是在方法中动态“声明”？

以使用“Magician”类为例，我对头文件的理解可能是这样的：

```
@interface Magician : NSHoudini

// Instance method that given a variable of type rat it will turn this into something of type rabit 

-   (rabit) FromRatToRabit: (rat) aRat;

@end 
```

实现文件可能如下所示：

```
#import “Magician.h”

@implementation Magician

rabit aRabit 
// rabit being the type and aRabit the variable

-   (rabit) FromRatToRabit:(rat)aRat;
{

// some magic code goes here which will take what’s in the aRat variable, of type rat
// and turn it into a form of type rabit and return it in the aRabit variable 

aRabit
}
@end 
```

如果以上是正确的，我想知道为什么没有声明您“提供”该方法的 aRat 变量？或者当您在方法描述中使用它时是否认为声明已完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:58:03.953

你的比喻是可以接受的。标头是其他文件查看的接口，它告诉他们可以从该类/文件及其相应的实现文件（如果有的话）中访问什么

我在您的代码中注意到，尽管 Magician 是 Houdini 的子类。我可能只是误解了您的示例，但就继承而言，这可能是不正确的。你说的是每个魔术师都是胡迪尼的一种。应该说胡迪尼是魔术师的一种。

Class vs Instance 已经解释过很多次了，并不是针对 Objective C 的，所以我不会过多的涉及它。 [这是一个有一些很好答案的帖子](https://stackoverflow.com/questions/1053592/objective-c-class-vs-instance-methods)。基本上，类函数/变量属于类本身，并不特定于该类的任何实例。类函数/变量的另一个词是`static`函数或变量。

不知道你最后一个问题是什么意思。目标 c 中的每个指针/变量都有一个类型。不过，您的语法搞砸了，您发布的代码应该是这样的（是的，我更正了 rabbit 的拼写：-P）

```
@interface Houdini : Magician

// Instance method that given a variable of type rat it will turn this into something of type rabit 

- (Rabbit *) FromRatToRabit: (Rat *) aRat;

@end 
```

* * *

```
#import “Houdini.h”

@implementation Houdini

Rabbit *aRabbit; // this is an ivar, although you're not actually using it anywhere, I'm just correcting your syntax

- (Rabbit *) fromRatToRabit:(Rat *)aRat;
{

// some magic code goes here which will take what’s in the aRat variable, of type rat
// and turn it into a form of type rabit and return it in the aRabit variable 

  [aRat doSomethingToReturnRabbit]; // assuming rat has an instance function that returns a rabbit
}
@end 
```

* * *

您可以通过执行类似的操作来使用此功能

```
Houdini *myHoudini = [[Houdini alloc] init];
Rat *houdinisRat = [[Rat alloc] init];
Rabbit *houdinisRabbit = [myHoudini fromRatToRabbit:houdinisRat]; 
```

请注意，这取决于有一个 rat 类和一个 rabbit 类（您没有提供）。我也只是使用通常的默认初始化程序。

希望这会有所帮助，您应该尝试更多地搜索您个人有疑问的特定主题，因为有大量可用的阅读材料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:57:44.343

这是理解公共接口和隐藏实现之间的鸿沟的一个很好的比喻。但是我认为您可能对此有点迷恋，并且我确实看到了两个主要的误解-“Houdini”是超类，而类方法是“所有技巧”。

评估继承层次结构合理性的常用教科书方法是评估子类实例是否“是”超类实例。这在现实中可能会变得非常抽象，但如果你正在设计魔术师公会医疗保险福利处理软件或其他东西，那么在这种情况下，魔术师“是”绝对不是胡迪尼的东西！假设他们都是自由职业者，所以每个魔术师“都是”1099 承包商（美国自雇收入税表），或类似的东西。另一种思考方式是认为魔术师“是”舞台表演者，“是”艺人，等等。并不是说您总是想制作这样的软件，但它可以帮助学习我认为的概念。

您说的第二件事是如何思考类方​​法。考虑类型固有的类方法行为和信息，并且独立于任何实例。回到福利软件示例，假设所有魔术师公会成员都获得了 401k（另一个美国税法，退休账户），每张工资有 X 美元的固定缴款。现在假设这不是随资历而变化的东西，这将是一个很好的信息，可以保持在班级级别。因此，魔术师可以执行的所有技巧都不是类方法-魔术师执行它们，因此它们将是实例方法。也许禁用技巧列表（因为太危险）可能是一个类方法 - 这是作为魔术师固有的规则，但独立于任何单个魔术师。

最后，关于你关于类型的第三个问题，我可以猜测你在问什么，但不确定。说你有一个方法

```
- (void)myMethod:(id)myArgument
{
    NSLog(@"myArgument = %@",myArgument);
} 
```

那你问在哪里`myArgument`声明？它是在方法签名中声明的，它是方法的参数，您可以在方法体的范围内（在花括号内）引用它。不确定这是否是“即时”的意思。恐怕你必须提供一些实际的源代码，而不是伪代码，并指出你想知道的具体地方。

还有一些关于术语的小问题，对不起，这太长了——将值“提供”给方法的术语通常是“传递”作为“参数”或“参数”。方法“描述”通常被称为方法签名或声明，有时我听到的原型。是的，请澄清你在谈论的类型、类型声明等等，我不是 100% 清楚你的问题。

希望这可以帮助！

# full-text-search - 全文搜索 indexeddb，示例实现

> ID：12685879
> 
> 赞同：6
> 
> 时间：2012-10-02T07:09:51.777
> 
> 标签：full-text-search, indexeddb

我很清楚规范中没有描述它，但是如果我可以从后端为我的“文章”对象获取关键字数组，我将如何使用给定的搜索短语搜索它？

我来自 ruby​​ on rails，如果这有助于解释

* * *

网络上流传的一个突出示例是待办事项列表示例，另一个（请参阅：[http](http://www.html5rocks.com/en/tutorials/indexeddb/uidatabinding/) ://www.html5rocks.com/en/tutorials/indexeddb/uidatabinding/注意：chrome 已损坏）让我们想象一下主要模型在每种情况下，（待办事项和员工）除了文章中描述的内容之外，还有一个关联的关键字数组。

现在假设我想根据存储在上述相应数组中的关键字（或员工示例的“文书工作”）来获取提及“罗马历史”的任务。

你怎么会这样做？

* * *

注意：我将使用它来构建一个谷歌浏览器打包应用程序和一个带有 sencha touch 2 或主干.js 的 phonegap 应用程序（如果其中一个或任何一个可以使上述更容易，请告诉）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T07:49:28.357

[我计划在YDN-DB](https://bitbucket.org/ytkyaw/ydn-db)中实现非常简单的全文搜索。我的想法如下：

1.  为对象存储的索引使用*全文*注释模式，从而有效地创建*关键字引用表*。*关键字引用表*是与父对象存储的 keyPath 的一对多关系表。关系数据类型是数组，我认为它比引用的多个条目更有效。
2.  放置对象时，从索引的值中拆分关键字，并更新引用对象存储的 keyPath 的*关键字引用表。*
3.  要查询全文搜索，请打开*关键字引用表*的键光标，给出搜索词的范围。该范围将提取所有以给定搜索词开头的关键字。从结果中对应的完整记录取自父对象存储。搜索在单个事务中执行。

稍后键光标可以扩展以包括相关阶段。

实现非常简单，检索应该非常快。

编辑：

在[YDN-DB-FULLTEXT 存储](https://github.com/yathit/ydn-db-fulltext)库中实现。

## 特征

*   支持完整语言范围的基于 Unicode 的标记化。
*   英语语言的词干和语音规范化。
*   具有逻辑与、或和接近的自由文本查询基础排名。
*   支持精确匹配和前缀匹配。
*   基于 YDN-DB，存储机制可以是 IndexedDB、WebSQL 或 localStorage。
*   使用全文目录进行简单灵活的配置。

## API 参考

使用`search`方法查询全文检索。

```
db.search(catalog, query) 
```

使用 add 或 put 方法将文档在存储到数据库中时进行索引。

查询格式是自由文本，其中隐式和/或/接近逻辑运算符适用于每个令牌。使用双引号进行完全匹配，使用 - 从结果中减去，使用 * 进行前缀搜索。

*参数：*

*   `{string} catalog` 全文搜索目录名称，如架构中所定义。
*   `{string} query` 自由文本查询字符串。

*回报：*

`{!ydn.db.Request}`返回一个请求对象。

`done: {Array}`返回倒排索引列表。倒排索引具有以下属性：`storeName`、`primaryKey`、`score`、`tokens`，分别表示原始文档的存储名称、原始文档的主键、匹配质量分数和令牌对象数组。Token 对象具有以下属性：`keyPath`，`value`，`loc`表示原始文档索引的键路径，原始文档中的原始单词，以及单词在文档中的位置数组列表。

`fail: {Error}`如果删除键中的任何一个失败，则会调用失败回调，并在各个元素中产生错误。

`progress: {Array}`在索引检索期间，将调度原始倒排索引​​。

## 例子

```
var schema = {
  fullTextCatalogs: [{
    name: 'name',
    lang: 'en',
      sources: [
        {
          storeName: 'contact',
          keyPath: 'first'
        }],
    ]},
    stores: [
      {
        name: 'contact',
        autoIncrement: true
      }]
};
var db = new ydn.db.Storage('db name', schema);
db.put('contact', [{first: 'Jhon'}, {first: 'Collin'}]);
db.search('name', 'jon').done(function(x) {
  console.log(x);
  db.get(x[0].storeName, x[0].primaryKey).done(function(top) {
    console.log(top);
  })
}); 
```

## 全文目录

全文目录是一个或多个全文索引的逻辑分组。它在数据库模式中的数据库初始化中定义。

*领域：*

*   `{string} name`全文目录名称。
*   `{string=} lang`语言。词干、分词和语音规范化是依赖于语言的。`lang`必须定义为正确索引。目前仅`en`得到很好的支持。如需更多语言，请查看[自然](https://github.com/yathit/natural.git) 项目 repo。
*   `{Array} indexes`全文索引。`storeName`每个索引都通过和对原始文档进行源引用`keyPath`。的值`keyPath`是要索引的文本。`weight`对搜索结果进行排名时应用因素。该值未存储在数据库中，索引后也可以更改。

以下全文目录索引作者姓名`first`和`last`记录值的字段权重更多`first`。

```
var catalog = {
  name: 'author-name',
  lang: 'en',
  sources: [{
    storeName: 'author',
    keyPath: 'first',
    weight: 1.0
  }, {
    storeName: 'author',
    keyPath: 'last',
    weight: 0.8
}] 
```

## 演示应用程序

*   [动物数据库搜索](http://dev.yathit.com/demo/ydn-db-text/animals/animals.html) 基本的索引操作，具有文本建议输入功能。
*   [Biomedical Medical Journal Abstract Search](http://dev.yathit.com/demo/ydn-db-text/pubmed-search/index.html) Ajax 数据加载、自由文本搜索排名和显示结果，匹配词突出显示。
*   [所有演示](http://dev.yathit.com/index/demos.html)

# mysql - InnoDB 频繁更新表运行缓慢

> ID：12685885
> 
> 赞同：0
> 
> 时间：2012-10-02T07:10:05.753
> 
> 标签：mysql, sql, database-design, innodb

我有一个非常简单的表格来跟踪用户活动。它的结构如下：

```
userId appId lastActivity

PRIMARY(userId, appId) 
```

表允许跟踪用户是否在特定应用程序中处于活动状态。它为每个用户每分钟更新一次，并经常阅读以计算特定应用程序中在线用户的数量。

最近我注意到，更新需要一段时间才能执行：

```
2012-10-01 16:49:10 - WARN --> Heavy query; array (
  'caller' => 'updateActivity',
  'query' => 'INSERT INTO user_activity VALUES(4953, 1, 1349095750)
                  ON DUPLICATE KEY UPDATE lastActivity = 1349095750',
  'elapsed' => 0.134618,
)
2012-10-01 18:26:06 - WARN --> Heavy query; array (
  'caller' => 'updateActivity',
  'query' => 'INSERT INTO user_activity VALUES(4533, 1, 1349101566)
                  ON DUPLICATE KEY UPDATE lastActivity = 1349101566',
  'elapsed' => 0.581776,
)
2012-10-01 18:27:16 - WARN --> Heavy query; array (
  'caller' => 'updateActivity',
  'query' => 'INSERT INTO user_activity VALUES(5590, 1, 1349101636)
                  ON DUPLICATE KEY UPDATE lastActivity = 1349101636',
  'elapsed' => 0.351321,
)
2012-10-01 20:54:32 - WARN --> Heavy query; array (
  'caller' => 'updateActivity',
  'query' => 'INSERT INTO user_activity VALUES(3726, 1, 1349110472)
                  ON DUPLICATE KEY UPDATE lastActivity = 1349110472',
  'elapsed' => 0.758706,
) 
```

表使用 InnoDB 作为存储引擎。

**我的问题**

1.  有什么问题吗？

2.  我的设计有问题吗？

3.  在这种特定情况下从哪里开始寻找性能问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T05:31:15.933

好吧，它是 InnoDb，它的性能不如 MyISAM（取决于插入的频率）您正在尝试在此处实现事件日志记录模型。如果您想生成有用的长期（甚至是中期）统计数据，您的模型将会失败，因为它基本上会忘记上次发生的所有事情。我建议你重新实现

1.  丢失该`update on duplicate`子句并简单地为每个活动/事件执行新的插入。您减少了更新活动的开销。
2.  将您的 InnoDb 引擎转换为 MyISAM，那里的性能也得到提升

3.  如果进行以上两个，PK就变得没有必要了。就目前而言，它的用途值得怀疑。也许您应该立即获取`Unique`索引。

所有这一切给你留下的只是一个高效的日志系统，它有能力变得相当大。有批量归档选项可以进一步处理该问题

# java - 通过 NAT 的 P2P 即时通讯

> ID：12685891
> 
> 赞同：3
> 
> 时间：2012-10-02T07:10:38.133
> 
> 标签：java, sockets, client-server, p2p

我正在尝试建立一个 P2P 即时消息系统，虽然我还没有遇到问题，但我预计如果客户端在本地 LAN 上的 NAT 后面我会遇到一些问题（阅读：每个人。）

让我解释一下算法，你就会明白我的意思。共有三个组件： 一个服务器和两个客户端 - 客户端 Alice 想要发起与客户端 Bob 的聊天。服务器只跟踪谁在线，但实际对话不会通过服务器（为了客户的隐私）

因此，Alice 和 Bob 都登录到服务器 - 从临时端口连接到服务器的静态侦听端口。他们告诉服务器他们正在侦听传入聊天请求的静态端口。Alice 询问服务器她如何联系 Bob。服务器使用 ipaddress 和侦听端口等进行响应。Alice 在该 IP 地址和端口上向 Bob 发送请求以建立连接。希望这是有道理的。

如果 Bob 在 NAT 之后，那么肯定他可以与服务器通信，因为他是开始通信的人。但是 Alice 的请求不会发送给他，因为尚未为他正在侦听来自 Alice 的 IP 地址的聊天请求的端口设置 NAT 关系。

是否有人知道某种黑魔法可以使这项工作发挥作用？会不会是个问题？开发还没有那么远，我还没有真正遇到这个问题。

显而易见，我不想让最终用户为他们的监听端口配置端口转发。

对于前面提到的黑魔法，客户端和服务器都在java中，但我通常只是在算法之后（如果可能的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:55:18.093

检查[冰](http://en.wikipedia.org/wiki/Interactive_Connectivity_Establishment)。

*大多数 P2P 框架，如 Java 中的 JXTA，都使用中继*服务器的原理。

假设 A 想连接到 B 并且 B 在防火墙后面。

```
- both A and B establish ** outbound ** synchronous (or full duplex/websockets) connections to Relay Server R
- A signals to R that it wants to transmit data to B
- R 'binds' the inbound connection from A to the outbound connection to B (the synchronous HTTP response to B for instance)
- A sends data to R which is relayed to B 
```

这里的关键是所有连接都是**出站**建立的（通常在众所周知的端口上使用*友好的防火墙协议，如 HTTP）*

当你有分布式中继时，事情显然会更复杂一些。然后，您需要通过依赖分布式哈希图 (DHT) 来维护信息的中继来维护到各个对等点的路由的“路由器”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:50:33.207

没有黑魔法。如果两个客户端都在 NAT 之后，则消息必须通过第三方（服务器）。如果只是关于短信，我会考虑将这种架构用于所有通信（如果隐私是一个问题，你可以考虑某种加密）。服务器（或服务器）将负载更多，但您会获得更简单（在某些情况下更可靠）的架构。例如，如果 Alice 向 Bob 发送消息，并且 Bob 有一些网络问题，服务器可以将消息排队并保留一段时间，然后再传递（即使 Alice 离线）。另一件事是会议（群）聊天。仅使用 P2P 处理它更具挑战性（但可能非常有趣）。但是如果所有客户端都在 NAT 之后，您会遇到同样的问题。我还强烈建议为所有传输和接收的消息（来自客户端和服务器）实现应用程序级确认机制。TCP/IP 等协议不够可靠。

# node.js - Node.js 静态文件服务器逻辑（使用 Connect 中间件）

> ID：12685902
> 
> 赞同：1
> 
> 时间：2012-10-02T07:11:16.280
> 
> 标签：node.js, connect, middleware, static-files, httpserver

假设我有以下文件系统结构：

```
/app/            Main application folder
  /app.js        Server JS file ran by node.js
  /public        Folder containing files for public website (port 80)
    /index.html
    /js/
      /game.js
  /admin/        Folder containing files used by local network system (port X)
    /index.html
    /js/
      /screen.js
  /share/        Folder containing files to be used by public website OR lan
    /js/
      /jquery.js 
```

最终结果是`admin/index.html`这样的：

```
<script type="text/javascript" src="/js/jquery.js"></script>
<script type="text/javascript" src="/js/screen.js"></script> 
```

也就是说，我正在从不同的位置加载两个文件。基本上，这里的想法是*“检查文件是否在`/share`，如果没有，请尝试根据端口从文件夹中加载它”*。

这是我正在使用的当前代码：

```
var connect = require('connect'),
    sourcePublic = connect().use(
        connect.static(__dirname + '/public', { maxAge: 86400000 })
    ),
    sourceAdmin = connect().use(
        connect.static(__dirname + '/admin', { maxAge: 86400000 })
    ),
    sourceShare = connect().use(
        connect.static(__dirname + '/share', { maxAge: 86400000 })
    ),
    serverPublic = http.createServer(sourcePublic).listen(80),
    serverAdmin  = http.createServer(sourceAdmin).listen(90);
// ok, how do I use sourceShare? 
```

**PS：**该系统应该可以通过`http://host/`（可能是域或静态 ip）在世界范围内访问，并且可以通过本地网络通过`http://host:90/`.

虽然端口 90 上的东西不会损坏系统（它只是一个输出屏幕），但我宁愿人们无法从外部访问它（通过确保路由器和服务器之间没有端口 90 转发来轻松完成）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:13:10.960

连接中间件是可堆叠的，因此您可以通过简单地将所有想要的处理程序一个接一个地堆叠来获得想要的结果。公共服务器获取*/public*和*/share*处理程序，管理员获取*/admin*和*/share*处理程序。

因此，对公共服务器的请求将在 /public 文件夹下搜索资源，如果在*/public*文件夹下找不到，则在*/share*文件夹下搜索。管理服务器也是这样做的。

```
var connect = require('connect'),
    sourcePublic = connect().use(
        connect.static(__dirname + '/public', { maxAge: 86400000 })
    ).use(
        connect.static(__dirname + '/share', { maxAge: 86400000 })
    ),
    sourceAdmin = connect().use(
        connect.static(__dirname + '/admin', { maxAge: 86400000 })
    ).use(
        connect.static(__dirname + '/share', { maxAge: 86400000 })
    ),
    serverPublic = http.createServer(sourcePublic).listen(80),
    serverAdmin  = http.createServer(sourceAdmin).listen(90); 
```

# python - Python脚本查找目录中所有文件的文件名和大小并将它们保存到文本文件以进行excel导入

> ID：12685905
> 
> 赞同：0
> 
> 时间：2012-10-02T07:11:25.767
> 
> 标签：python, arrays, tkinter

我对python很陌生，我正在尝试：

*   在用户定义的目录中（1000 个图像）
*   查找文件名（已完成）
*   查找文件大小（已完成）
*   存储到数组
*   将数组存储到文本文件

```

`from Tkinter import Tk
from tkFileDialog import askdirectory
from array import *
import os

Tk().withdraw()
fileDir = askdirectory()
print(fileDir)
dirList=os.listdir(fileDir)
for fname in dirList:
    print fname
    print os.path.getsize(fileDir+"/"+fname)` 

            回答 #1

赞同：0

时间：2012-10-02T08:24:54.300

some notes about the below implementation:

*   generally always use the [csv library](http://docs.python.org/library/csv.html) because it properly handles special csv characters like commas and quotes. It can be really messy if you will do this escaping by hand.
*   it's better not to hard code path delimiter like /, the above two answers won't work on windows machines. By using [os.path.join](http://docs.python.org/library/os.path.html#os.path.join) your code will run correctly on all platforms.

code:

```
from tkFileDialog import askdirectory
from glob import glob
from os import listdir
from os.path import join, getsize
import csv

CSV_FILE = 'listing.csv'

path = askdirectory()
files = listdir(path)
rows = [(i, getsize(join(path, i))) for i in files]
with open(CSV_FILE, 'wb') as f:
    writer = csv.writer(f)
    writer.writerows(rows) 
```

            回答 #2

赞同：0

时间：2012-10-02T07:37:49.557

你可能想做这样的事情：

```
#!/usr/bin/env python
import csv, os

OUT = 'files_and_sizes.csv'
DIR = '<some directory>'

def main():
    writer = csv.writer(open(OUT, 'w'))
    for f in os.listdir(DIR):
        if os.path.isfile(DIR+ '/' + f):
            writer.writerow([f, os.path.getsize(DIR + '/' + f)])

if __name__ == '__main__':
    main() 
```

CSV 和 Excel 可以很好地相互配合，因此导入它应该不会有任何问题。

            回答 #3

赞同：0

时间：2012-10-02T07:26:42.010

要将文件名和大小存储在元组中并将它们写入文本文件，您可以执行以下操作：

```
from Tkinter import Tk
from tkFileDialog import askdirectory
from array import *
import os

Tk().withdraw()
fileDir = askdirectory()
print(fileDir)
dirList = os.listdir(fileDir)
data = ((fname, str(os.path.getsize(fileDir + "/" + fname)))  for fname in dirList)

outputFile = open('myoutputfile.csv', 'w')
for entry in data:
    outputFile.write(','.join(entry) + '\n')

outputFile.close() 
```

在我的 python 安装目录上运行它会得到一个如下所示的文件：

```
DLLs,4096
Doc,0
include,32768
Lib,65536
libs,4096
LICENSE.txt,40080
NEWS.txt,285115
python.exe,27136
pythonw.exe,27648
README.txt,54967
Scripts,0
tcl,4096
Tools,4096 
```

您应该可以在 Excel 中将其作为 .csv 文件打开，这没有问题。请注意，如果其中任何一个文件名中包含逗号、换行符等，您可能必须引用文件名。

对于更重的东西，有[csv 模块](http://docs.python.org/library/csv.html)，但我认为对于这样一个简单的文件来说它是多余的。如果您有兴趣使用它，它看起来像这样：

```
import csv
with open('myoutputfile.csv', 'wb') as outputFile:
    csvwriter = csv.writer(outputFile, dialect='excel')
    for entry in data:
        csvwriter.writerow(entry) 
```

            回答 #4

赞同：0

时间：2012-10-02T08:28:03.247

```
#!/usr/bin/env python
import csv
import os
from Tkinter import Tk
from os.path import join, getsize
from tkFileDialog import askdirectory

# get directory path
root = Tk()
root.withdraw()
dirpath = askdirectory()
root.destroy()

# save filename, file size entries for the directory in csv format
entries = ((fn, getsize(join(dirpath, fn))) for fn in os.listdir(dirpath))
with open('entries.csv', 'wb') as file:
    csv.writer(file).writerows(entries) 
```

```

# objective-c - 了解addChildViewController的使用

> ID：12685907
> 
> 赞同：8
> 
> 时间：2012-10-02T07:11:40.917
> 
> 标签：objective-c, ios, viewcontroller

我正在处理一些需要重构的代码。视图控制器充当其他两个视图控制器的容器，并将在它们之间进行交换，如下面的代码所示。

这可能不是最好的设计。可能不需要以这种方式交换视图控制器。我明白那个。但是，当我使用此代码时，我想进一步了解 addChildViewController 调用会发生什么。我无法在 Apple 的文档或相关问题中找到答案，这里（可能表明设计需要更改）。

具体来说 - 容器视图控制器如何处理要求添加它已经添加的子视图控制器的情况？它是否认识到它已经添加了该视图控制器对象？

例如，如果下面的代码在一个方法中 - 并且该方法被调用了两次......

```
[self addChildViewController:viewControllerB];
[self.view addSubview:viewControllerB.view];
[viewControllerB didMoveToParentViewController:self];

[viewControllerA willMoveToParentViewController:nil];
[viewControllerA.view removeFromSuperview];
[viewControllerA removeFromParentViewController]; 
```

谢谢，加文

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T07:54:16.497

一般来说，当一个包含另一个视图控制器时，应遵循[他们的视图控制器“包含”指南，以确定您是否需要实现包含。](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/AboutViewControllers/AboutViewControllers.html)

特别是，担心添加相同的子视图控制器两次就像担心显示相同的视图控制器两次一样。如果你真的想清楚了，你不应该面对这个问题。你的预感是正确的。

我同意 Apple 的文档应该更清楚地说明奇怪参数或乱序调用时会发生什么，但也可能是不想将自己与错误更正设计联系起来，这会在未来造成麻烦. 当你设计出一个永远不会以错误方式调用这些方法的设计时，你就能正确地解决问题，并使自己独立于它们可能有或可能没有的任何错误纠正——如果你考虑到这一点，那就更重要了，因为它不是记录在案，该错误更正将来可能会以不同的方式工作，从而破坏您的应用程序。

更进一步，您会注意到 Apple 的容器视图控制器不能进入无效状态（至少使用公共 API 不容易）。使用 a `UITabViewController`，从一个视图控制器切换到另一个是原子操作，并且选项卡视图控制器在任何时间点都知道发生了什么。它所要做的最多就是删除活动的并显示新的。只有当你告诉它“你应该把所有东西都从水里吹出来，然后开始使用这些视图控制器”时，它才会把所有东西都从水中吹出来。

为其他任何事情编码，例如删除*所有*视图或*所有*视图控制器，无论在某些情况下看起来是方便还是健壮，但情况恰恰相反，因为实际上代码的一端不信任代码的另一端来保留它是交易的一部分。在任何实际对您有帮助的情况下，这意味着您让人们随意添加视图控制器而没有您应该想要的控制，在这种情况下，*这就是*您应该解决的问题。

# python - 如何解决 ViewDoesNotExist

> ID：12685910
> 
> 赞同：0
> 
> 时间：2012-10-02T07:11:51.820
> 
> 标签：python, django, view

我是 Django 1.4 的新手并尝试我的第一个项目。可以创建应用程序：

```
./manage.py startapp APP_NAME 
```

并在 urls.py 中被 Django 识别如下：

```
(r'^home/$', 'APP_NAME.views.home'), 
```

但是当我只在项目的根目录中创建一个 APP_NAME.py 文件时，将 urls.py 文件更改如下：

```
(r'^home/$', 'APP_NAME.home'), 
```

调试页面告诉我 ViewDoesNotExist。即使我将 urls.py 文件更改为（使用 from...import 且没有单引号）：

```
from APP_NAME import home
(r'^home/$', home), 
```

它也不起作用。

如何解决？为每个视图文件创建 APP 很复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:09:04.183

你真的在'APP_NAME.__init__.py'中实现了你的home函数吗？如果没有，您的代码将无法工作，因为没有什么可以调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:24:34.427

```
python manage.py startapp news 
```

在您创建的`news`目录中有一个`views.py`. 现在让我们添加一些东西：

```
from django.http import HttpResponse
def index(request):
    return HttpResponse("Hello") 
```

现在在`urls.py`你添加这个：

```
(r'^news/$', 'news.index'), 
```

只需启动 devserver`python manage.py runserver`并将浏览器指向`http://localhost:8000/news/`

你应该看到“你好”。

现在你可以添加`news/views.py`更多的东西——比如`details`，`archive`等等。

还要确保`__init__.py`在您要导入的每个目录中都有一个空文件。 `from app.views import something`如果 app-directory 中没有 init-file 将不起作用。

# node.js - node.js express-coffee 错误：ENOENT，没有这样的文件或目录

> ID：12685911
> 
> 赞同：0
> 
> 时间：2012-10-02T07:11:55.860
> 
> 标签：node.js, coffeescript, express

我安装了最新的[express-coffee](https://github.com/twilson63/express-coffee)并安装了[node-config](https://github.com/lorenwest/node-config)。我创建了一个简单的 src/config/default.yaml

```
Database:
    db_host: localhost
    db_name: test 
```

在我的 src/models/index.coffee

```
config = require('config').Database

console.log "host: #{config.db_host}" 
```

但是，当尝试启动服务器时，`cake dev`甚至`cake build && node app`出现以下错误：

```
Cannot write runtime.json file Error: ENOENT, no such file or directory 
```

尝试在此处和 Google 上搜索该问题，但找不到任何内容。即使只是 ENOENT 或 node-config runtime.json 的少数点击也没有帮助。以前有其他人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:11:25.477

原来问题出在 config/default.yaml 所在的位置。我不得不将它移动到应用程序的根目录。将其移至根目录 - config/default.yaml 修复了该问题。该错误消息对于弄清楚发生了什么并没有多大帮助。

# android - 如何使用我自己的 Textview 在 facebook 墙上发布状态？

> ID：12685921
> 
> 赞同：0
> 
> 时间：2012-10-02T07:13:04.123
> 
> 标签：android, facebook

我正在使用 facebook 默认对话框在我的 facebook 墙上分享帖子。我的代码如下。

```
facebook.dialog(this, "feed", new DialogListener() {

        @Override
        public void onFacebookError(FacebookError e) {
        }

        @Override
        public void onError(DialogError e) {
        }

        @Override
        public void onComplete(Bundle values) {
        }

        @Override
        public void onCancel() {
        }
    }); 
```

但现在我添加了一个 TextView 和一个 Button ，单击按钮后，textView 文本将发布在我的 Facebook 墙上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:23:59.337

在您的**DialogListener**中覆盖**onComplete()**然后执行您想要的操作或使用**getText**从 textview 获取值并发布它。

 ****```
public void onComplete(Bundle values) { 
            mProgress.setMessage("Posting ...");
            mProgress.show();

            AsyncFacebookRunner mAsyncFbRunner = new AsyncFacebookRunner(mFacebook);

            Bundle params = new Bundle();

            params.putString("message", "A Game Developed By Me !");
            params.putString("name", "Match Maker");
            params.putString("caption", "www.labmimosa.com/");
            params.putString("link", "https://play.google.com/store/apps/details?id=com.reverie.fushh");
            params.putString("description", "Dexter:  Blood. Sometimes it sets my teeth on edge, other times it helps me control the chaos.");
            params.putString("picture", "http://twitpic.com/show/thumb/6hqd44");
            //params.putByteArray("picture", bitMapData);

            mAsyncFbRunner.request("me/feed", params, "POST", new WallPostListener());
        } 
```

Wallpostlistener 类是

```
private final class WallPostListener extends BaseRequestListener {
        public void onComplete(final String response) {
            mRunOnUi.post(new Runnable() {
                @Override
                public void run() {
                    mProgress.cancel();

                    Toast.makeText(Exp_Fb_Twt_Activity.this, "Posted to Facebook", Toast.LENGTH_SHORT).show();
                }
            });
        }
    } 
```****

# arrays - 如何在visual basic中修改数组中的值

> ID：12685922
> 
> 赞同：0
> 
> 时间：2012-10-02T07:13:07.367
> 
> 标签：arrays, vb.net, visual-studio-2010

以下是我用于创建二维数组的代码

```
Public Class frmGrades
Private Score As Dictionary(Of String, String) = New Dictionary(Of String, String)

Private Sub cmdApply_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdApply.Click
    Static intNumber As Integer
    ReDim Preserve Score(1, intNumber)
    Score(0, intNumber) = txtStudent.Text
    Score(1, intNumber) = txtGrade.Text
    hsbStudent.Maximum = intNumber
    hsbStudent.Value = intNumber
    intNumber = intNumber + 1
    txtGrade.Clear()
    txtStudent.Clear()
    txtStudent.Focus()

End Sub

Private Sub hsbStudent_Scroll(ByVal sender As Object, ByVal e As System.Windows.Forms.ScrollEventArgs) Handles hsbStudent.Scroll
    txtStudent.Text = Score(0, hsbStudent.Value)
    txtGrade.Text = Score(1, hsbStudent.Value)

End Sub

Private Sub cmdFirst_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdFirst.Click
    txtStudent.Text = Score(0, hsbStudent.Minimum)
    txtGrade.Text = Score(1, hsbStudent.Minimum)

End Sub

Private Sub cmdLast_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdLast.Click
    txtStudent.Text = Score(0, hsbStudent.Maximum)
    txtGrade.Text = Score(1, hsbStudent.Maximum)
End Sub

**Private Sub CmdEdit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CmdEdit.Click

    If Score.ContainsKey(txtStudent.Text) Then
        Score.Item(txtStudent.Text) = txtGrade.Text
    Else
        Score.Add(txtStudent.Text, txtGrade.Text)
    End If
End Sub 
```

结束类**

现在我想编辑成绩文本框，它也应该改变数组中的成绩。关于如何做到这一点的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:47:02.697

更新：

好的，我看到代码现在多了一点，问题更清楚了，也需要不同的方法。我重写了你的代码。看看这是否适合你：

```
Public Class frmGrades

    Public Class StudentGrade
        Public Name As String
        Public Grade As String
    End Class

    Private Score As List(Of StudentGrade) = New List(Of StudentGrade)

    Private Sub cmdApply_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdApply.Click

        AddStudent()

    End Sub

    Private Sub hsbStudent_Scroll(ByVal sender As Object, ByVal e As System.Windows.Forms.ScrollEventArgs) Handles hsbStudent.Scroll
        Update(hsbStudent.Value - 1) 'lists are zero-based
    End Sub

    Private Sub cmdFirst_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdFirst.Click
        Update(0)
    End Sub

    Private Sub cmdLast_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdLast.Click
        Update(hsbStudent.Maximum - 1)
    End Sub
    Private Sub AddStudent()
        Dim nm As New StudentGrade
        nm.Name = txtStudent.Text
        nm.Grade = txtGrade.Text
        Score.Add(nm)

        hsbStudent.Minimum = 1
        hsbStudent.Maximum = Score.Count 
        hsbStudent.Value = Score.Count 

        txtGrade.Clear()
        txtStudent.Clear()
        txtStudent.Focus()
    End Sub
    Private Sub Update(i As Integer)
        txtStudent.Text = Score(i).Name
        txtGrade.Text = Score(i).Grade
    End Sub
    Private Sub CmdEdit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CmdEdit.Click

        Dim index As Integer = -1, cnt As Integer = 0

        For Each nm As StudentGrade In Score
            If nm.Name.ToLower = txtStudent.Text.ToLower Then
                index = cnt
                Exit For
            End If
            cnt += 1
        Next

        If index = -1 Then
            AddStudent()
        Else
            Score(index).Name = txtStudent.Text
            Score(index).Grade = txtGrade.Text
            hsbStudent.Value = index + 1
        End If

    End Sub

End Class 
```

使用此代码，您可以扩展 StudentGrade 类以包含您需要存储的任何内容。与字典相反，该列表也允许您使用索引值。

# regex - 重定向规则未执行

> ID：12685923
> 
> 赞同：0
> 
> 时间：2012-10-02T07:13:10.400
> 
> 标签：regex, .htaccess, redirect, rule

我使用 rubular.com 测试了以下重定向规则

```
^tags\/([a-zA-Z0-9_-]+)\.html 
```

并使用作为示例 `/tags/a-led.html`正在返回`/tags/a-led`。到目前为止，一切看起来都很好，但是当我在我的 htaccess 中应用规则时，如下所示

```
 RewriteRule ^tags\/([a-zA-Z0-9_-]+)\.html$  /tags/$1 [R,L] 
```

和其他一些规则之后

```
RewriteRule ^(.*)/(d*)-(.*)\.html$  /showthread.php?$1 [R,L]
RewriteRule ^(d*)-(.*)\.html$ /threads/$2 [R,L] 
```

没有被执行，不幸的是我没有胶水可能是什么原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:19:19.600

1.  该规则看起来很好，当我将它放在一个默认安装 apache 的空白 htaccess 文件中时它可以工作。
2.  确保您已加载 mod_rewrite 并且您已打开重写引擎 ( `RewriteEngine On`)。
3.  如果您有其他规则，请确保您的重定向规则位于执行内部重写或路由的规则之前。
4.  确保您的 htaccess 文件甚至被读取。您需要`AllowOverride`在服务器/虚拟主机配置中进行适当的设置。设置`AllowOverride All`将确保 htaccess 文件中的所有内容都得到应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:19:46.140

```
RewriteEngine On 
RewriteRule ^tags\/([a-zA-Z0-9_-]+)\.html$  /tags/$1 [R,L] 
```

还要检查您是否在**[R,L]**之前设置了任何其他规则。L 告诉 apache 如果该规则匹配，则不要再处理任何规则。

# visual-studio-2012 - Visual Studio 2012 / 2013 中的用户签入历史记录

> ID：12685926
> 
> 赞同：19
> 
> 时间：2012-10-02T07:13:23.177
> 
> 标签：visual-studio-2012, visual-studio-2013, team-explorer

在 Visual Studio 2010 中，我能够从 `Team Explorer -> Team Project -> Team Members -> Right-click on a user name -> Show Check-in History`.

在剧烈的 Team Explorer UI 重新设计之后，我在 Visual Studio 2012/2013 中找不到这样的选项。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-02T08:09:34.990

您可以通过 Source Control Explorer 实现此功能。鼠标右键单击 Source Control Explorer 中的文件夹，然后选择 Find / Find Changeset。在下图中的此窗口中，您可以选择用户并仅查看该特定用户的变更集。

![在此处输入图像描述](../Images/aa6e7449ef94b54e9e2e45ff3f9931aa.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-02T08:40:54.243

您应该安装 TFS Power tools 2012（[在此处](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f)下载）。 ![团队成员](../Images/92fbf6e724ee42129b7fc7cfd366a61c.png)

> 但是，Team Members Power Tool 已更改为利用新的 TFS 2012 功能。因此，它与 TFS 2010 及更早版本不兼容，并且不会使用与 TFS 2010 Team Members Power Tool 相同的团队成员定义数据，这使得将 VS 2010 IDE 和 VS 2012 IDE 与 Team Members Power Tool 一起使用有点疼痛（双重给药）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-19T04:23:27.207

您可以通过 tf.exe 实现相同的目标

> tf 历史 * /user:用户名 -R

* 表示所有文件，-R 表示递归。

如果您只想显示命令行（更适合导出），只需键入

> tf 历史 * /user:username -R /noprompt

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-15T03:40:44.863

在 Visual Studio Professional 2015 中，Team Explorer->Team Foundation Server (TFS)，双击 TFS 服务器链接，然后提供用户名和密码，单击 OK -> 单击顶部的代码 -> 单击 Changesets-> 提供作者姓名。

# android - 将值插入到 php 文件中的输入标记

> ID：12685928
> 
> 赞同：0
> 
> 时间：2012-10-02T07:13:37.030
> 
> 标签：android

如何从 php 文件的输入框中插入值？

例如我有这个代码

```
<h1><a>App Test Form</a></h1>
        <form id="form_6" class="digitalfuture"  method="post" action="#main_body">
                    <div class="form_description">
            <h2>App Test Form</h2>
            <p></p>
        </div>                      
            <ul >

                    <li id="li_8" >
        <label class="description">Name <span id="required_8" class="required">*</span></label>
        <span>
            <input id="element_8_1" name= "element_8_1" class="element text" maxlength="255" size="8" value="hello" />
            <label>First</label>
        </span>
        <span>
            <input id="element_8_2" name= "element_8_2" class="element text" maxlength="255" size="14" value="" />
            <label>Last</label>
        </span><p class="guidelines" id="guide_8"><small>Please tell us your name</small></p> 
        </li> 
```

谁能指出任何可以帮助我的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:27:40.533

源代码：

```
<?php
    $data = 'text';
?> 
```

输入.php：

```
<?php
    include('source.php');
    echo '<input type="text" name="example" value="', $data, '" />';
?> 
```

这会将 $data 的内容插入到输入字段值中。

还是你的意思是别的？

如果希望在打开页面时直接显示文本，可以在输入标记中使用 html5 功能“占位符”。像这样：

```
<input type="text" name="example" placeholder="Write your comment" /> 
```

这将在页面中显示一个输入字段，在该字段中可见文本“写您的评论”，直到用户单击它和/或写入该字段（无需手动删除占位符文本，它会自动消失）。

所以当你把它们结合起来时，它看起来像这样：

源代码：

```
<?php
    $data = 'text';
?> 
```

输入.php：

```
<?php
    include('source.php');
    echo '<input type="text" name="example" placeholder="', $data, '" />';
?> 
```

# swing - 如何将 jre 与从 .jar 创建的 .exe 文件捆绑在一起

> ID：12685929
> 
> 赞同：0
> 
> 时间：2012-10-02T07:13:40.820
> 
> 标签：swing, exe, java

我从 .jar 文件创建了 .exe 文件。现在我的客户要求运行应用程序而不在系统中安装 jre。我听说捆绑 jre 是可能的......但我不知道如何将 jre 与 .exe 文件捆绑..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:18:09.040

我已经使用 VMware ThinApp 来完成您想要做的事情。它确实要花钱，但效果非常好。它允许您将应用程序使用的所有依赖项汇总到一个可执行文件中，然后该可执行文件可以在 Windows 的 vanilla 安装上运行。它不仅可以用于 Java，还可以通过记录您在安装应用程序 + JRE 后对系统所做的更改来实现，然后将所有这些更改打包。它确实简化了应用程序部署，因为应用程序现在是可移植的。我什至用它来汇总 Visual C++ 可再发行组件和 .NET。这当然会增加可执行文件的大小，但知道应用程序将成功运行也很方便。[在http://www.vmware.com/products/thinapp/overview.html](http://www.vmware.com/products/thinapp/overview.html)上查看更多信息.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:58:52.227

开源[Launch4j](http://launch4j.sourceforge.net/)允许您生成带有嵌入式 JRE 的 exe。 [这篇 SO 文章](https://stackoverflow.com/questions/7071133/how-to-bundle-a-jre-with-launch4j)也讨论了这个话题。警告：我在 Launch4j 上取得了非常好的成功，但从未使用过嵌入式 JRE 功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:40:30.467

JavaFX 正在解决这个问题。以下是 Java SE 7 u10 中即将推出的功能：

[https://blogs.oracle.com/talkingjavadeployment/entry/packaging_improvements_in_jdk_7#3](https://blogs.oracle.com/talkingjavadeployment/entry/packaging_improvements_in_jdk_7#3)

[https://blogs.oracle.com/talkingjavadeployment/entry/packaging_improvements_in_jdk_7](https://blogs.oracle.com/talkingjavadeployment/entry/packaging_improvements_in_jdk_7)

# python - 可以恢复到先前状态的数据结构

> ID：12685936
> 
> 赞同：2
> 
> 时间：2012-10-02T07:14:14.557
> 
> 标签：python, algorithm, data-structures, simulated-annealing

很抱歉，如果之前有人问过这个问题，但我不确定我在寻找什么，而且我缺乏正确构建问题的领域知识，这使得答案很难找到！

无论如何，我正在尝试在 Python 中实现一篇论文中的模拟退火算法（IBM J. Res. Dev., 2001; 45(3/4); 545）。作者给出了他在 C++ 中实现的算法的清晰概述，但是在他的定义结束时，他陈述了以下内容

> “为了避免重复和可能昂贵的内存分配，S 和 S* 被实现为单个对象，能够在不利的突变后恢复到其初始状态。”

（S 和 S* 表示正在优化的任何东西的原始状态和阶跃变化状态）。

在以前更天真的版本中，我使用两个列表来保存每个状态，但他的评论似乎表明这种方法内存效率低下。因此，我的问题是：

1.  他的评论是 C++ 特定的吗？在 Python 中我可以继续使用列表而不用担心吗？
2.  如果我确实需要担心它，我应该使用什么 Python 数据结构？只需定义一个具有原始和变异属性的类以及一个进行变异的方法，还是我还缺少其他东西？
3.  我仍然需要这两种状态，那么将其包装在一个类中会改变内存分配方式以使类表示更紧凑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:06:30.253

理论上，您可以记录并重播对可变 Python 对象的所有操作，以实现其在误导突变之前的状态。但这是痛苦和昂贵的。以可以恢复突变的方式将记录的事件映射到反函数也是如此。

然而，函数式编程的趋势似乎强烈鼓励扩展使用不可变数据……*尤其是并发编程*。这种思维方式不仅限于 Haskell、OCaml 和 Erlang 等函数式语言。它甚至[渗透到了 Java 世界](http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html)：

> 如果一个对象在构造后它的状态不能改变，那么它就被认为是不可变的。最大限度地依赖不可变对象被广泛认为是创建简单、可靠代码的合理策略。
> 
> 不可变对象在并发应用程序中特别有用。由于它们无法更改状态，因此它们不会被线程干扰破坏或观察到不一致的状态。
> 
> 程序员通常不愿意使用不可变对象，因为他们担心创建新对象而不是就地更新对象的成本。对象创建的影响通常被高估，并且可以被与不可变对象相关的一些效率所抵消。这些包括由于垃圾收集而减少的开销，以及消除保护可变对象免受损坏所需的代码。
> 
> 以下小节采用实例可变的类，并从中派生具有不可变实例的类。通过这样做，他们给出了这种转换的一般规则，并展示了不可变对象的一些优点。

使用地图或列表理解生成一个新列表并进行相应修改。如果 Ram 确实是一个问题，请考虑使用[生成器](http://docs.python.org/tutorial/classes.html#generators)，它可以为您提供具有所需修改和更低内存占用的迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:28:21.203

这取决于正在创建的对象。如果它是一个大对象（在内存中），那么创建其中两个`S`并`S'`作为列表或其他方式会降低内存效率，然后设计一种转换方式`S`->`S'`反之亦然，只要转换本身不消耗太多内存即可。

这些类型的数据结构被归类为[追溯数据结构](http://en.wikipedia.org/wiki/Retroactive_data_structures)与一些其他同义词，如[动力学数据结构](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Kinetic_data_structures/Chapter_main.html)。

使用 a`deque`并管理所有对象状态是一种方法。

# asp.net - 如何在运行时访问 SSRS 报告的属性和部分

> ID：12685937
> 
> 赞同：1
> 
> 时间：2012-10-02T07:14:28.790
> 
> 标签：asp.net, .net, reporting-services, runtime

我正在使用 ReportViewer 控件在 ASP.NET 页面中显示服务器报表，并且我正在寻找一种将报表放入对象中的方法，然后我可以读取和/或修改该对象。

这种事情：

```
var rw = report.Width;
var t = ((Chart)report.Body.Item[3]).Title; 
```

有没有办法，或者我坚持解析 XML 文件？

**预计到达时间：**

我开始认为我需要访问 XML 文件，但我不知道如何从服务器下载、修改它（在内存中），然后将其发送到 ReportViewer 控件。

**ETA2：**

以下是下载报告定义的方法（为简洁起见省略了清理）：

```
// Download the report
var rs = new ReportingService2010();
rs.UseDefaultCredentials = true;
var reportDefinition = rs.GetItemDefinition("/DashboardReports/MyChart");

// Convert to XML
var ms = new MemoryStream(reportDefinition);
var doc = new System.Xml.XmlDocument();
doc.Load(ms);

// To load the stream into the report viewer
stream.Position = 0; // needed because we used the stream above - doc.Load(ms)
this.ReportViewer1.ServerReport.LoadReportDefinition(stream); 
```

# opengl-es-2.0 - 使用纹理绘制多个对象

> ID：12685939
> 
> 赞同：1
> 
> 时间：2012-10-02T07:14:52.347
> 
> 标签：opengl-es-2.0

我想使用纹理绘制立方体。

```
void OperateWithMainMatrix(ESContext* esContext, GLfloat offsetX, GLfloat offsetY, GLfloat offsetZ) {

UserData *userData = (UserData*) esContext->userData;
ESMatrix modelview;
ESMatrix perspective;
    //Manipulation with matrix 
    ...
    glVertexAttribPointer(userData->positionLoc, 3, GL_FLOAT, GL_FALSE, 0, cubeFaces);
    //in cubeFaces coordinates verticles cube
    glVertexAttribPointer(userData->normalLoc, 3, GL_FLOAT, GL_FALSE, 0, cubeFaces);
    //for normals (use in fragment shaider for textures)

    glEnableVertexAttribArray(userData->positionLoc);
    glEnableVertexAttribArray(userData->normalLoc);

    // Load the MVP matrix
    glUniformMatrix4fv(userData->mvpLoc, 1, GL_FALSE, 
                       (GLfloat*)&userData->mvpMatrix.m[0][0]);

    //Bind base map
    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_CUBE_MAP, userData->baseMapTexId);

    //Set the base map sampler to texture unit to 0
    glUniform1i(userData->baseMapLoc, 0);

   // Draw the cube
    glDrawArrays(GL_TRIANGLES, 0, 36);
   } 
```

（坐标变换在 OperateWithMainMatrix() 中）然后调用 Draw() 函数：

```
void Draw(ESContext *esContext)
{
   UserData *userData = esContext->userData;
   // Set the viewport
   glViewport(0, 0, esContext->width, esContext->height);

   // Clear the color buffer
   glClear(GL_COLOR_BUFFER_BIT);

   // Use the program object
   glUseProgram(userData->programObject);

  OperateWithMainMatrix(esContext, 0.0f, 0.0f, 0.0f);

  eglSwapBuffers(esContext->eglDisplay, esContext->eglSurface);
} 
```

这工作正常，但如果我尝试绘制多个立方体（例如下一个代码）：

```
void Draw(ESContext *esContext)
{ ...

    // Use the program object
    glUseProgram(userData->programObject);

    OperateWithMainMatrix(esContext, 2.0f, 0.0f, 0.0f);
    OperateWithMainMatrix(esContext, 1.0f, 0.0f, 0.0f);
    OperateWithMainMatrix(esContext, 0.0f, 0.0f, 0.0f);
    OperateWithMainMatrix(esContext, -1.0f, 0.0f, 0.0f);
    OperateWithMainMatrix(esContext, -2.0f, 0.0f, 0.0f);
    eglSwapBuffers(esContext->eglDisplay, esContext->eglSurface);
} 
```

侧面与正面重叠。此过程如图所示： ![在此处输入图像描述](../Images/af4572aa78c473cd5397f20df548e7d7.png)

备用图片（带有颜色和干净的图像）： ![在此处输入图像描述](../Images/a994997ea75416ced9b9b8b59d3b4b38.png)

右侧立方体的侧面与中央立方体的正面重叠。如果没有它，我怎样才能消除这种效果并显示多个立方体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:51:40.643

要解决此问题，您需要利用所谓的**深度缓冲区**。这是确保表面不会被绘制在更近的表面之上的原因（例如立方体的侧面显示在立方体的前面）。

幸运的是，这样做并不需要太多工作：

1.  在初始化时启用深度测试`glEnable(GL_DEPTH_TEST)`
2.  通过将其位添加到 glClear 调用来清除每帧上的深度缓冲区： `glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)`

在此之后，您应该不再看到您的表面在更近的表面上弹出。

# sql - 程序不知道自定义类型

> ID：12685941
> 
> 赞同：2
> 
> 时间：2012-10-02T07:14:59.370
> 
> 标签：sql, tsql

我有一个过程和一些自定义类型来传递一些数据给它：

```
CREATE TYPE StringList AS TABLE
(Value NVARCHAR(255));

GO

CREATE TYPE KeyValueList AS TABLE
(
Id uniqueidentifier,
Value NVARCHAR(255));

GO

CREATE PROCEDURE 
#update_AttributeFormel(
    @modelPrefix NVARCHAR(255), 
    @definitionNeutralName NVARCHAR(255), 
    @newFormula NVARCHAR(255),
    @providersToRemove StringList READONLY,
    @providersToAdd KeyValueList READONLY)
    AS  .... 
```

ManagementStudio 没有显示任何错误（就像我注释掉类型声明时一样），但是当我执行脚本时，我收到以下错误：

```
Msg 2715, Level 16, State 3, Procedure #update_AttributeFormel, Line 2
Column, parameter, or variable #4: Cannot find data type StringList.
Parameter or variable '@providersToRemove' has an invalid data type.
Msg 2715, Level 16, State 3, Procedure #update_AttributeFormel, Line 2
Column, parameter, or variable #5: Cannot find data type KeyValueList.
Parameter or variable '@providersToAdd' has an invalid data type. 
```

此处解释的实现：

1.  [http://www.simple-talk.com/sql/t-sql-programming/temporary-tables-in-sql-server/](http://www.simple-talk.com/sql/t-sql-programming/temporary-tables-in-sql-server/)

2.  [http://www.sqlteam.com/article/sql-server-2008-table-valued-parameters](http://www.sqlteam.com/article/sql-server-2008-table-valued-parameters)

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:29:48.610

我很确定这是由于在 tempdb 空间中使用**CREATE PROCEDURE 创建`#update_AttributeFormel`**了过程。请参阅此[SQL Fiddle](http://sqlfiddle.com/#!3/273b0/2/0)，当类型和过程位于同一数据库中时，它可以完美运行。

代码复制如下：

```
CREATE TYPE StringList AS TABLE
(Value NVARCHAR(255));
GO

CREATE TYPE KeyValueList AS TABLE
(
Id uniqueidentifier,
Value NVARCHAR(255));
GO

CREATE PROCEDURE update_AttributeFormel(
    @modelPrefix NVARCHAR(255), 
    @definitionNeutralName NVARCHAR(255), 
    @newFormula NVARCHAR(255),
    @providersToRemove StringList READONLY,
    @providersToAdd KeyValueList READONLY)
AS
SELECT * FROM @providersToRemove
GO

declare @SL StringList;
insert @SL select 'abcdef' union all select 'ok';
declare @KVL KeyValueList;

exec update_AttributeFormel null,null,null,@SL,@KVL; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-29T18:23:11.400

您必须在 tempdb 中创建自定义数据类型，才能在不同的数据库中识别它。

# asp.net-mvc-3 - 在 foreach() 和 if() 中分离开始标签和结束标签

> ID：12685943
> 
> 赞同：4
> 
> 时间：2012-10-02T07:15:03.530
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4

我在做单独的开始和结束标签时遇到了一些问题，我得到一个解析错误，我在 mvc1-2 中这样做了，但是在 mvc4 中这是如何完成的？

我正在做 a`foreach()`取决于计数我走了打开 a`div`并关闭 a`div`

这是代码

```
 foreach (var d in Model.MenuDays)
 {
    if (d.Id == 1 || d.Id == 4)
    {
        <div class='row'>
    }

//code here

 @if (d.Id == 3)
 {
       </div>

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:21:50.210

试试看，不确定

```
@{
    @:<div>
}
@if(true)
{
   @:</div>
} 
```

# c# - 在 C# 中检查 Telerik 嵌套网格中的所有复选框

> ID：12685944
> 
> 赞同：0
> 
> 时间：2012-10-02T07:15:13.287
> 
> 标签：c#, telerik, radgrid

下面是我的 Telerik 嵌套网格的代码：

```
 <telerik:RadGrid runat="server" ID="OrdersGrid" ShowFooter="True" AllowSorting="True"
                                    EnableLinqExpressions="false" GridLines="None"                OnInsertCommand="OrdersGrid_InsertCommand"
                                    OnItemCommand="OrdersGrid_ItemCommand" OnItemDataBound="OrdersGrid_ItemDataBound"
                                    Width="100%" HeaderStyle-CssClass="gridHeader" OnItemCreated="OrdersGrid_ItemCreated">
                                    <ClientSettings>
                                        <Scrolling AllowScroll="True" UseStaticHeaders="True" />
                                    </ClientSettings>
                                    <MasterTableView ShowHeader="true" AutoGenerateColumns="False" PageSize="7" HierarchyLoadMode="Client"
                                        Font-Names="Verdana" Font-Size="12px" DataKeyNames="RIGHT_ID">
                                        <NestedViewTemplate>
                                            <telerik:RadGrid ID="brnchgrid" runat="server" OnItemDataBound="brnchgrid_ItemDataBound"
                                                CssClass="gridHeader" Width="100%">
                                                <MasterTableView DataSourceID="SqlDataSource1" AutoGenerateColumns="false" Font-Names="Verdana"
                                                    Font-Size="12px">
                                                    <Columns>
                                                        <telerik:GridBoundColumn HeaderText="Branch CODE" DataField="BRNCH_CODE" Visible="false">
                                                        </telerik:GridBoundColumn>
                                                        <telerik:GridBoundColumn HeaderText="Branch name" DataField="BRNCH_NAME" UniqueName="BRNCH_NAME">
                                                        </telerik:GridBoundColumn>
                                                        <telerik:GridTemplateColumn UniqueName="add" HeaderText="ADD" HeaderStyle-Width="50px">

                                                            <ItemTemplate>
                                                                <asp:CheckBox ID="chkadd" runat="server" />
                                                            </ItemTemplate>
                                                            <HeaderStyle HorizontalAlign="Left" VerticalAlign="Middle" Width="50px" />
                                                            <ItemStyle HorizontalAlign="Left" VerticalAlign="Middle" Width="50px" />

                                                        </telerik:GridTemplateColumn> 
```

我想提供一个选项来检查**brnchgrid**内嵌套网格的标题中的所有内容。复选框列名为**add**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:08:16.640

在您的标记中，将标题文本设置为包含一个`checkbox`调用函数来检查所有复选框的函数`onclick`。

```
<telerik:GridTemplateColumn UniqueName="add" HeaderText="<input type='checkbox' id='checkAll' onclick='checkAll(this, gridToCheckAll);'>" HeaderStyle-Width="50px"> 
```

然后在 javascript

```
<script>
    var gridToCheckAll = '<%= brnchgrid.ClientID %>';

    function checkAll(sender, containerID) {
            var checked = sender.checked;
            var container = document.getElementById(containerID);
            var checkboxes = container.getElementsByTagName('input');
            for (var i = 0, l = checkboxes.length; i < l; i++) {
                if (checkboxes[i] != sender && !checkboxes[i].disabled)
                    checkboxes[i].checked = checked;
            }
        }
</script> 
```

# c - C 一个指针数组的 int 比较器

> ID：12685947
> 
> 赞同：2
> 
> 时间：2012-10-02T07:15:29.743
> 
> 标签：c, pointers, compare, function-pointers, void-pointers

我正在学习 LCTHW 教程，我有一个任务要做。这是数据结构：

```
typedef struct DArray {
    int end;
    int max; 
    size_t element_size;
    size_t expand_rate;
    void **contents; 
} DArray; 
```

我已经声明了一个 typedef：

```
typedef int (*DArray_compare) (const void *a, const void *b); 
```

当我创建一个排序函数时，我将一个 DArray_compare 传递给它，问题是我无法弄清楚如何做这个比较器的示例。

我试图做这样的事情：

```
int compare(const void *a, const void *b)
{
  int i = (int)*a;
  int k = (int)*b;
  printf("%d %d\n", i, k);
  return i - k;
} 
```

但我收到一个错误：

```
error: operand of type 'void' where arithmetic or pointer type is required int i = (int)*a; 
```

问题是：在不改变比较器的struct和typedef的情况下，我想创建一个比较int的比较器，我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T07:18:47.647

```
int i = *(int*)a;
// This one has more parens to make it really obvious what your intent is.
int k = *((int*)b); 
```

第二行 (k=) 最容易解释所有括号的 cos。你可以改写如下：

```
// Cast b from a pointer to a void into a pointer to an int.
int *X = (int*)b; 
// k = "what X is pointing to" or "the contents of X"
int k = *X; 
```

编辑：我认为 ralu 的评论是建议您将所有更改`void*`为`int*`更安全的解决方案，如果您有这种能力。

```
typedef int (*DArray_compare) (const int *a, const int *b);

int compare(const int *a, const int *b)
{
    int i = *a;
    int k = *b;
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T07:19:17.173

与标准 C 库一起使用`bsearch()`或`qsort()`从标准 C 库中用于`DArray`结构数组的比较函数可能如下所示：

```
int compare(const void *a, const void *b)
{
    const DArray *d1 = a;
    const DArray *d2 = b;

    if (d1->end < d2->end)
        return -1;
    else if (d1->end > d2->end)
        return +1;
    else if (d1->max < d2->max)
        return -1;
    else if (d2->max > d2->max)
        return +1;
    else
        return 0;
} 
```

显然，如果您需要比较其他字段，您可以很容易地将这些比较添加到上面的框架中。函数的一般结构是我推荐的编写此类比较器的方法。如果您愿意，您可以在分配行中添加显式强制转换；C++ 需要它们，但 C 不需要。

请注意，您`typedef`与比较器本身的相关性最小（尽管比较器作为函数指针应该匹配`typedef`）。`typedef`它是比较器应具有的类型，但在编写函数时不能使用该名称。您可以`typedef`在 sort 函数的实现及其声明中使用 。

* * *

我在几个地方观察到，`int`作为比较器的结果返回两个有符号值的差会导致未定义的行为。

在对现已删除的答案的评论中，[AR89](https://stackoverflow.com/users/973549/ar89)问道：

> 而不是减法 if 语句会更安全？

是的。考虑一下如果您有 16 位 int 值并比较 -30,000 和 +30,000 会发生什么；你有符号溢出，你可能会从比较器中得到一个正值，即使第一个值小于第二个。32 位或 64 位整数可能会出现类似情况。它们相对不太可能；如果您知道您的值在范围内，那您就可以了。但对于通用代码，您应该进行分段比较：

```
if (i < k)
    return -1;
else if (i > k)
    return +1;
else
    return 0; 
```

`i`因为它的工作原理与和的值无关`k`。另请注意，`if`比较也适用于`unsigned int`类型，而减法实际上不起作用（结果始终为零或正数）。

# android - Android中快速滚动到GridView底部的错误

> ID：12685948
> 
> 赞同：3
> 
> 时间：2012-10-02T07:15:34.173
> 
> 标签：android

当我将 GridView 快速滚动到底部并看到最后一行时，GridView 会跳上几行。

如果我滚动缓慢，它工作正常。

如何解决？我以前从未有过这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:05:53.643

我不知道为什么，但如果你设置 overScrollMode = "never"，你会在 HTC Sensation 和 Motorola 上得到这个错误。

# windows - mysqldump 是否返回我可以在批处理文件中使用的错误代码？

> ID：12685954
> 
> 赞同：1
> 
> 时间：2012-10-02T07:15:59.033
> 
> 标签：windows, batch-file, mysqldump, errorlevel

mysqldump 是否返回错误代码，我可以在具有此类代码的 Windows 批处理文件上使用：`if errorlevel 1`等等？

我想验证备份的成功或失败。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:24:52.553

mysqldump 返回以下内容：

```
0 - Success
1 - Warning
2 - Exception 
```

[http://dev.mysql.com/doc/refman/5.5/en/error-types.html](http://dev.mysql.com/doc/refman/5.5/en/error-types.html)

因此，您可能应该使用`if errorlevel 2`忽略警告并仅处理错误（当然，这取决于您的需要以及可能发生的警告）。像这样的东西可能会起作用：

```
mysqldump.exe --user USERNAME --password=PASSWORD --database DATABASE > dump.sql

REM Check for error
if %ERRORLEVEL% NEQ 0 (goto ERROR)

echo MySQL was dumped successfully     
goto :EOF

:ERROR
   echo Error occured 
   exit 
```

# iphone - 如何在 iOS 中加载大尺寸 PDF 滚动视图？

> ID：12685956
> 
> 赞同：2
> 
> 时间：2012-10-02T07:16:18.033
> 
> 标签：iphone, ios, pdf

当我尝试在滚动视图中仅加载一页 PDF 时，我的 pdf 大小为 53MB，我收到内存警告，然后应用程序崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:46:22.070

**在UIWebView**中显示 PDF ：

```
NSString *PDFPath = [[NSBundle mainBundle] pathForResource:@"filename" ofType:@"pdf"];
NSURL *URL = [NSURL fileURLWithPath:PDFPath];
NSURLRequest *URLRequest = [NSURLRequest requestWithURL:URL];
[webView loadRequest:URLRequest]; 
```

WebView 会将页面加载到内存中，因为它们出现在屏幕上，而不是一次全部加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:08:28.503

你应该看看[vfr/Reader](https://github.com/vfr/Reader)，它是 iOS 的 PDF 阅读器核心。

UIWebView 在处理开箱即用的大文件方面不是很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:04:25.560

[这是在 iOS 上查看大型 PDF 的最佳方式是什么](https://stackoverflow.com/questions/5134113/what-is-the-best-way-to-view-large-pdfs-on-ios)的副本？

接受的答案是使用 UIWebView ，如上所示。

# xamarin.ios - 将背景设置为 GroupTableViewBackgroundColor

> ID：12685960
> 
> 赞同：2
> 
> 时间：2012-10-02T07:16:31.160
> 
> 标签：xamarin.ios, uitableview

我的 Monotouch iPhone 应用程序中有一个 UIViewController，我想将背景设置为 UITableViewStyle.Grouped 中的背景。但是，当我使用下面的代码时，它会返回黑屏。

```
this.View.BackgroundColor = UIColor.GroupTableViewBackgroundColor;  // Black screen
this.View.BackgroundColor = UIColor.Red; // Works 
```

我在 ViewWillAppear 方法中调用它们。如果我注释掉 GroupTable，则背景设置为红色。当我注释掉第二行时，我得到的只是黑屏。

有人知道为什么是这样吗？如果您不在 UITableViewController 中，您可以不调用 UIColor.GroupTableViewBackgroundColor 吗？

谢谢

麦克风

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T09:24:02.857

我已经在我当前的项目中使用了它并且它工作正常我有 xcode 4.0 和模拟器 4.3 我在网上发现它在 ios 6 上已被弃用我这样使用过

```
[self.tableview setBackgroundColor:[UIColor groupTableViewBackgroundColor]]; 
```

看看这个链接[是否在 iOS 6 上弃用了 groupTableViewBackgroundColor？](https://stackoverflow.com/questions/12452810/is-grouptableviewbackgroundcolor-deprecated-on-ios-6)

作为替代方案，您可以在互联网上找到与 UItableview 分组样式背景相同的图像。

# javascript - 通过标签和类获取元素

> ID：12685963
> 
> 赞同：31
> 
> 时间：2012-10-02T07:16:50.807
> 
> 标签：javascript

我有一个脚本

```
var firstImg = row.getElementsByTagName('img')[0]; 
```

然后

```
if (x){ firstImg.src='/images/checked.png'; } 
```

我想定义 img 应该是`class='something'`

（使用 class='something' 获取第一个 img）

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-02T07:22:41.210

使用

```
 querySelectorAll('img.classname')[0] 
```

这将返回第一个将类设置为类名的图像。但是 jQuery 更好！！

```
$('img.classname') 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-02T07:18:57.013

就设置好了...

```
firstImg.className += "something"; 
```

...或者...

```
firstImg.classList.add("something"); 
```

如果您可以摆脱不支持旧浏览器的情况。

[进一步阅读](http://blog.alexanderdickson.com/manipulating-classes-with-javascript)（免责声明：链接到我自己的博客）。

如果您打算*获取*具有特定类名的元素，您可以使用...

```
document.getElementsByClassName("something"); 
```

...或者...

```
document.querySelectorAll(".something"); 
```

请记住`getElementsByClassName()`不在 <= IE8 中。

您可以使用...

```
var getElementsByClassName(nodeList, className) {
    var i, results = [];
    for (i = 0; i < nodeList.length; i++) {
        if ((" " + nodeList[i].className + " ").indexOf(" " + className + " ") > -1) {
             results.push(nodeList[i]);
        }
    }

    return results; 
} 
```

当然，如果你使用的是 jQuery，那就超级简单了……

```
$(".something"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T07:21:04.563

这将选择第一个`img`class='something'：

```
var firstImg = $('img.something')[0]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T07:32:43.450

如果你不能扔掉旧的浏览器，那么你需要一个循环。

```
var imgs = row.getElementsByTagName('img'),
    some_class = 'something',
    i, first_img;

for (i = 0; i < imgs.length; i++) {
    if ((' ' + imgs[i].className + ' ').indexOf(' ' + some_class + ' ') > -1) {
       first_img = imgs[i];
       break;
    }
} 
```

# android - 如何在 Android 中使用 Phonegap 处理 Jquery 手机的设备后退按钮？

> ID：12685966
> 
> 赞同：1
> 
> 时间：2012-10-02T07:17:16.670
> 
> 标签：android, cordova, jquery-mobile

我正在使用 jQuery Mobile 和 Phonegap 开发一个 Android 应用程序。现在，当我登录到应用程序时，它会显示搜索一些员工。在此屏幕中，我想处理设备后退按钮。目前，如果我按下后退按钮，它将从应用程序中注销。但是，我想最小化应用程序。这意味着，它不应该注销。只是我们会将应用程序发送到后台（类似于 facebook android 应用程序）。我尝试使用以下代码处理此问题：

```
<script type="text/javascript">
            $(document).ready(function() {
document.addEventListener("backbutton", function(e) {
                    alert("ready");
                    navigator.app.exitApp();
                });
            });
        </script> 
```

这是我的清单文件：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.innominds.myspace"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
    />

     <uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.HARDWARE_TEST" />
<uses-permission android:name="android.permission.FLASHLIGHT"/>
<uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
             android:configChanges="orientation|keyboardHidden" android:screenOrientation="portrait">
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

但是当我按下后退按钮时，它也没有显示警报。我正在使用科尔多瓦 2.0 和 jquery.mobile-1.1.1.js。

[我从这里](https://stackoverflow.com/questions/8602722/phonegap-android-back-button-close-app-with-back-button-on-homepage) 和[这里](https://stackoverflow.com/questions/9631933/override-android-backbutton-behavior-only-works-on-the-first-page-with-phonegap/9739986#9739986)得到了一些帮助和参考。

谁能帮帮我吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:17:12.803

如果您在 AndroidManifest.xml 中分配了 target-SDK，请删除该条目并尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:31:37.467

```
<a href="#" data-rel="back" data-transition="slide" data-direction="reverse">
   Back
</a> 
```

并以编程方式：

```
$("#buttonId").attr('href','index.html'); 
```

您还可以更改按钮标题及其操作运行时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-11T05:44:03.397

您错过了在 html 页面中添加 cordova.js 文件路径。有时此文件不会自动添加到 html 页面中，因此请手动添加并重试。

如果这不起作用删除android平台并再次添加并再次添加所有插件，仅为android构建项目并运行您的问题肯定会得到解决。

# xml - 在 XSLT 中获取父元素

> ID：12685970
> 
> 赞同：8
> 
> 时间：2012-10-02T07:17:29.483
> 
> 标签：xml, xslt, xpath

我有一个这样的 XML：

```
<PurchaseOrder>
    <ID>1</ID>
    <PurchaseOrderLine>
        <DATA>100<DATA>
    </PurchaseOrderLine>
    <PurchaseOrderLine>
        <DATA>200<DATA>
    </PurchaseOrderLine>
    <PurchaseOrderLine>
        <DATA>300<DATA>
    </PurchaseOrderLine>
</PurchaseOrder>
<PurchaseOrder>
    <ID>2</ID>
    <PurchaseOrderLine>
        <DATA>100<DATA>
    </PurchaseOrderLine>
    <PurchaseOrderLine>
        <DATA>200<DATA>
    </PurchaseOrderLine>
    <PurchaseOrderLine>
        <DATA>300<DATA>
    </PurchaseOrderLine>
</PurchaseOrder>
<PurchaseOrder>
    <ID>3</ID>
    <PurchaseOrderLine>
        <DATA>100<DATA>
    </PurchaseOrderLine>
    <PurchaseOrderLine>
        <DATA>200<DATA>
    </PurchaseOrderLine>
    <PurchaseOrderLine>
        <DATA>300<DATA>
    </PurchaseOrderLine>
</PurchaseOrder> 
```

和 XSL：

```
<xsl:template match="PurchaseOrder">
    <xsl:apply-templates select="PurchaseOrderLine"/>
</xsl:template>

<xsl:template match="PurchaseOrderLine">
    <!-- I want to get the PurchaseOrder\ID here for the current PurchaseOrder -->
</xsl:template> 
```

如何在 PurchaseOrderLine 中获取当前父元素值 (PurchaseOrder\ID)？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-03T22:24:21.697

如果您希望您的模板是原子的（隔离且可重用），您应该以这种方式引用父节点。相反，在调用模板时，请传入您希望能够使用的引用。这样，您可以将此模板用于相同类型的节点，即使它具有不同的上下文/父节点（只要您仍然可以加载参数）。

```
<xsl:template match="PurchaseOrder">
    <xsl:apply-templates select="PurchaseOrderLine">
        <xsl:with-param name="PurchaseOrder" select="."/>
    </xsl:apply-templates>
</xsl:template>

<xsl:template match="PurchaseOrderLine">
    <xsl:param name="PurchaseOrder"/>
    <!-- I want to get the PurchaseOrder\ID here for the current PurchaseOrder -->
</xsl:template> 
```

现在在您的 PurchaseOrderLine 模板中，您可以引用 $PurchaseOrder 变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T07:21:25.470

似乎您跳过了一些关于 XPath 的基本阅读。

```
<xsl:template match="PurchaseOrderLine">
    <xsl:value-of select="../ID" />
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-09T05:40:24.043

不确定这是否是您要去的地方，但您可以通过执行以下操作匹配父节点，这将检查父节点是否具有子节点。

```
<xsl:template match="//*[PurchaseOrderLine]>
    <!--- Do you stuff here with parent context--->
</xsl:template> 
```

有了这个你可以做几件事，你可以选择一个带有 ID 和数据值的 PurchaseOrderLine。

```
<xsl:template match="//PurchaseOrder[ID=3 and PurchaseOrderLine/DATA=100]">
     <!--- Do stuff with parent that has the ID of 3 And the DATA of 200 --->
</xsl:template> 
```

# java - 从项目名称查找 api 中查找项目

> ID：12685971
> 
> 赞同：0
> 
> 时间：2012-10-02T07:17:29.460
> 
> 标签：java, c++, mysql, windows, string

我目前正在做一个项目，我需要一些我可以提供名称的东西，然后它可以返回它是什么类型的项目。

假设我有星际争霸这个词，那么 API 或某些数据库可以返回类似游戏的东西

```
or nba -> sports
or nike -> sports/shoe
or sadkljasd -> unknown 
```

几个月前我看到过类似的事情，但我不记得了。我需要具有这种功能和数据的东西，它不必是准确的

有人有什么想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:21:53.237

[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)提供了您正在寻找的那种 API。

您可以将您的项目映射到它们的类型。在 Map 中，您以`Key-Value`Pair 的形式存储映射...如果您的所有项目都是唯一的，那将是您的最佳选择。

在这里，我将简要介绍地图的工作原理。休息一下，您可以从我提供的链接中获得。

```
Map<String, String> mapping = new HashMap<String, String>();  
mapping.put("nba", "sports");

String type = mapping.get("nba");

System.out.println(type);   // Will give you `sports` 
```

如果你有`multiple`一些项目的类型，你可以有一个`Mapping`从`items`到`list`他们的类型：-

```
Map<String, ArrayList<String>> mapping = 
                             new HashMap<String, ArrayList<String>>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:22:36.263

使用`Collection`......

**-**在这个阶段使用`Map`将是适当的......

**例如：**

`Map<String, ArrayList<String>> map = new HashMap<String,ArrayList<String>>();`

**或者**

`Map<String, String> map = new HashMap<String,String>();`

# node.js - Meteor 中的客户端/服务器方法

> ID：12685972
> 
> 赞同：0
> 
> 时间：2012-10-02T07:17:35.013
> 
> 标签：node.js, meteor

我想知道像客户端/服务器操作模型这样基本的东西是否可以通过 Meteor (meteor.com) 框架轻松实现。

原始模板应该

```
<template name="input">
  <div>
    <input type="text" val="">
    <input type="submit">
  </div>
</template>

<template name="output">
  <div id="output">
  </div>
</template> 
```

等待输入，调用服务器对`serverFunction()`输入的值执行，并将结果插入到输出标签中。不需要集合、mongo 或身份验证。当然，每个客户都应该收到自己的结果。似乎`Meteor.publish()`只对集合起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:52:09.963

查看 Meteor 文档中的方法部分：http: [//docs.meteor.com/#methods_header](http://docs.meteor.com/#methods_header)

“方法是 Meteor 客户端可以调用的远程函数。”

Wordplay 示例中还有代码展示了如何使用这种 RPC 机制（有关更多信息，请参阅 model.js 和 game.js 中的 Meteor.methods({ ... }) 的定义以获取更多信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:21:59.247

Meteor Collection 仅与 Mongo 集合相关联，如果你告诉它是..你也可以使用它们来包装任意数据。

Meteor Collections 的三个主要好处（至少对我而言）：

1.  用于保持服务器和客户端数据同步的发布/订阅模型
2.  他们可以包装持久化（Mongo）或任意数据
3.  使用类似 Mongo 的语法查询它们的能力

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:18:48.970

这就是我一直在寻找的：

服务器：

```
Meteor.methods = 
  doStuff: (input) ->
    serverFunction input 
```

客户：

```
Template.input.events =
  'submit': ->
    Meteor.call 'doStuff', $('input[type=text]').val(), (error, result) -›
      Session.set 'result', result

Template.output.output = ->
  Session.get 'result 
```

# php - Magento 安全问题

> ID：12685973
> 
> 赞同：1
> 
> 时间：2012-10-02T07:17:38.460
> 
> 标签：php, security, magento

我正在为我的网站使用 magento。我正面临着一些问题。一段时间后，代码会添加到索引文件的标题中。我的网站停止工作。当我再次删除（加密）代码之类的错误时，站点运行良好。

有什么办法可以避免这种代码注入？我在网上搜索但没有得到正确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:47:32.650

在正常操作期间，只有`/var`和`/media`目录需要可写，删除 PHP 用户对所有其他目录和文件的写权限。这使得注入攻击更加困难。

这会干扰通过 Connect Manager 应用的更新，但无论如何我都不喜欢在实时站点上使用它。我更喜欢在本地或暂存副本上应用更新，测试，然后通过具有写入权限的 FTP 或版本控制上传。

# llvm - llvm-link 与外部库

> ID：12685976
> 
> 赞同：0
> 
> 时间：2012-10-02T07:17:55.577
> 
> 标签：llvm

我现在正在玩 LLVM，它是 JIT。我对 JIT 很感兴趣，然后我写了一个小 GTK+ hello world：

```
#include <gtk/gtk.h>

int main ()
{
    gtk_init(NULL, NULL);
    GtkWidget *win = gtk_window_new (GTK_WINDOW_TOPLEVEL);
    g_signal_connect (win, "delete-event", G_CALLBACK (gtk_main_quit), NULL);
    GtkWidget *lbl = gtk_label_new ("hello world");
    gtk_container_add (GTK_CONTAINER (win), lbl);
    gtk_widget_show_all (win);
    gtk_main();
    return 0;
} 
```

我以这种方式将其编译为 Bitcode：

```
clang -emit-llvm -S a.c `pkg-config --cflags gtk+-3.0`
llvm-link a.s -o a.o 
```

但是当我运行它时

```
> lli a.o
LLVM ERROR: Program used external function 'gtk_init' which could not be resolved! 
```

我试图找出如何在链接时添加外部库，但我什么也没找到。有没有办法让它运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:38:37.387

llvm-link 不是一个“普通”的链接器。它用于合并多个 IR 文件。因此，在您的情况下，ao 只是一个二进制 LLVM IR，一切正常，因为 llvm-link 自动解析了文本 LLVM IR。

您不能“链接”本机库。不过，您可以将它们加载到 lli 进程中（例如，通过 LD_PRELOAD）并且符号应该被解析。

# java - 优化器导致的段错误

> ID：12685977
> 
> 赞同：1
> 
> 时间：2012-10-02T07:18:06.950
> 
> 标签：java, curl, gdb, xml-rpc

我们在使用 gdb 跟踪日志时遇到了一个问题。当 XMLRPC 调用和 gdb 回溯显示时系统崩溃：

```
Program terminated with signal 11, Segmentation fault.
#0  finishCurlMulti (envP=0x0, curlMultiP=0xe37b800, timeoutType=timeout_no, 
    deadline=..., interruptP=0x0) at xmlrpc_curl_transport.c:572

warning: Source file is more recent than executable.
572
(gdb) bt
#0  finishCurlMulti (envP=0x0, curlMultiP=0xe37b800, timeoutType=timeout_no, 
    deadline=..., interruptP=0x0) at xmlrpc_curl_transport.c:572
#1  0x00002b84f0b4ad24 in performCurlTransaction (envP=0x46a185d0, 
    clientTransportP=0xe365d50, serverP=<value optimized out>, 
    callXmlP=<value optimized out>, responseXmlPP=0x46a185e8)
    at xmlrpc_curl_transport.c:1036
#2  performRpc (envP=0x46a185d0, clientTransportP=0xe365d50, 
    serverP=<value optimized out>, callXmlP=<value optimized out>, 
    responseXmlPP=0x46a185e8) at xmlrpc_curl_transport.c:1141
#3  call (envP=0x46a185d0, clientTransportP=0xe365d50, 
    serverP=<value optimized out>, callXmlP=<value optimized out>, 
    responseXmlPP=0x46a185e8) at xmlrpc_curl_transport.c:1362 
```

===> 有空指针错误吗？环境=0x0

-------------------------------------跟踪帧 1---------- ----------

```
(gdb) frame 1
#1  0x00002b84f0b4ad24 in performCurlTransaction (envP=0x46a185d0, clientTransportP=0xe365d50, serverP=<value optimized out>, callXmlP=<value optimized out>, 
    responseXmlPP=0x46a185e8) at xmlrpc_curl_transport.c:1036
1036               synchronous RPC can be in progress is for the 'perform' method
(gdb) print envP
$1 = <value optimized out>
(gdb) info registers
rax            0x0      0
rbx            0xec59270        247829104
rcx            0x0      0
rdx            0x2      2
rsi            0x46a18200       1184989696
rdi            0xe37b800        238532608
rbp            0x46a185d0       0x46a185d0
rsp            0x46a184e0       0x46a184e0
r8             0x46a17f00       1184988928
r9             0x46a17ef0       1184988912
r10            0x46a18100       1184989440
r11            0x206    518
r12            0xe365d50        238443856
r13            0xe37b800        238532608
r14            0xe99dda0        244964768
r15            0x46a185e8       1184990696
rip            0x2b84f0b4ad24   0x2b84f0b4ad24 <call+340>
eflags         0x10206  [ PF IF RF ]
cs             0x33     51
ss             0xe02b   57387
ds             0x0      0
es             0x0      0
fs             0x63     99
gs             0x0      0
fctrl          0x37f    895
fstat          0x0      0
ftag           0xffff   65535
fiseg          0x0      0
fioff          0x0      0
foseg          0x0      0
fooff          0x0      0
fop            0x0      0
mxcsr          0x1fa0   [ PE IM DM ZM OM UM PM ] 
```

========> envP 是否存储在寄存器 rbp 中？

------------------------返回第0帧--------------------

```
(gdb) frame 0
#0  finishCurlMulti (envP=0x0, curlMultiP=0xe37b800, timeoutType=timeout_no, deadline=..., interruptP=0x0) at xmlrpc_curl_transport.c:572
572
(gdb) print envP
$2 = (xmlrpc_env * const) 0x0
(gdb) info register
rax            0x0      0
rbx            0x0      0
rcx            0x0      0
rdx            0x2      2
rsi            0x46a18200       1184989696
rdi            0xe37b800        238532608
rbp            0xe37b800        0xe37b800
rsp            0x46a182f0       0x46a182f0
r8             0x46a17f00       1184988928
r9             0x46a17ef0       1184988912
r10            0x46a18100       1184989440
r11            0x206    518
r12            0x0      0
r13            0x0      0
r14            0x0      0
r15            0x0      0
rip            0x2b84f0b49e93   0x2b84f0b49e93 <finishCurlMulti+259>
eflags         0x10206  [ PF IF RF ]
cs             0x33     51
ss             0xe02b   57387
ds             0x0      0
es             0x0      0
fs             0x63     99
gs             0x0      0
fctrl          0x37f    895
fstat          0x0      0
ftag           0xffff   65535
fiseg          0x0      0
fioff          0x0      0
foseg          0x0      0
fooff          0x0      0
fop            0x0      0
mxcsr          0x1fa0   [ PE IM DM ZM OM UM PM ] 
```

========> 请告诉我在这种情况下出了什么问题？

我正在尝试使用 -O0 禁用优化器，但我不确定。

谢谢。

这是我使用正确的源文件的回溯：

```
#0  finishCurlMulti (envP=0x0, curlMultiP=0x12e2580, timeoutType=timeout_yes, deadline=..., interruptP=0x0) at xmlrpc_curl_transport.c:572
#1  0x00002abe7f51d0b4 in finishAsynch (clientTransportP=0x12e24c0, timeoutType=timeout_yes, timeout=10000) at xmlrpc_curl_transport.c:1301
#2  0x00002abe7f72f5c6 in xmlrpc_c::clientXmlTransport_http::finishAsync (this=0x12e2470, timeout=...) at client.cpp:624
#3  0x00002abe7f72f64a in xmlrpc_c::client_xml::finishAsync (this=0x1304bf0, timeout=...) at client.cpp:893
#4  0x00002aaaab57c26d in UrlStruct::runXmlRpc (this=0x122d140, method="mediacontrol.onEvent", paramList=<value optimized out>, result=<value optimized out>) at Utils.cpp:146
#5  0x00002aaaab57c526 in IVRUtils::executeXmlRpc (controllerUrl=0x12e2580, methodName=Traceback (most recent call last):   
#6  0x00002aaaab54366a in IvrCoreSession::_exec_xmlrpc_cmd (this=0x2aaab48277f0, paramList=..., result=0x41228cb0) at IvrCoreSession.cpp:307
#7  0x00002aaaab544c95 in IvrCoreSession::fireEndCallEvent (this=0x2aaab48277f0) at IvrCoreSession.cpp:504
#8  0x00002aaaab54752d in IvrCoreSession::~IvrCoreSession (this=0x2aaab48277f0, __in_chrg=<value optimized out>) at IvrCoreSession.cpp:101
#9  0x000000000047c15d in AmSessionContainer::clean_sessions (this=0x10cbdd0) at AmSessionContainer.cpp:94
#10 0x000000000047c898 in AmSessionContainer::run (this=0x10cbdd0) at AmSessionContainer.cpp:132
#11 0x000000000049266c in AmThread::_start (_t=<value optimized out>) at AmThread.cpp:70
#12 0x000000397ec0673d in start_thread () from /lib64/libpthread.so.0
#13 0x000000397e0d40cd in clone () from /lib64/libc.so.6 
```

此错误每 6 天发生一次。我们使用带有 curl 构建选项的 xmlrpc-c 库**--enable-threaded-resolver**。请给我们一些想法。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:03:23.777

这看起来很危险：

> 警告：源文件比可执行文件更新

这意味着调试符号与您的源代码不匹配。构建并重试；您可能正在寻找已经修复的错误。

`performCurlTransaction()`还要在at中检查代码，`xmlrpc_curl_transport.c:1036`因为此函数获取`envP != null`但它`finishCurlMulti`使用`null`.

# dynamics-crm-2011 - 创建使用 ISNULL 的 FetchXML 查询

> ID：12685981
> 
> 赞同：0
> 
> 时间：2012-10-02T07:18:29.650
> 
> 标签：dynamics-crm-2011, fetchxml

我想做一个`ISNULL`在 SQL 查询中使用的 FetchXML 查询。

在 SQL 中

```
SELECT * FROM Contact WHERE ISNULL(FirstName, '') = '' 
```

他们在 FetchXML 中有任何运算符吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T08:52:42.513

不完全一样，但下面的查询应该给你一些可以使用的东西。

```
<fetch mapping="logical">
  <entity name="contact">
    <all-attributes />
    <filter>
      <condition attribute="firstname" operator="null" />
    </filter>
  </entity>
</fetch> 
```

# amazon-ec2 - 亚马逊 EC2 存储

> ID：12685982
> 
> 赞同：1
> 
> 时间：2012-10-02T07:18:36.390
> 
> 标签：amazon-ec2, amazon-web-services

我已经购买了 Amazon EC2 m1.medium 预留实例。现在我该如何创建一个 400GB 容量的根存储卷？

通过将默认根 30GB vol 扩展到 400GB 将产生额外的 EBS 400GB，我不需要，因为 EBS 会产生额外费用。

我做了一些研究，说 Instance Store Volumes 是临时类型，不是持久的。

> 这是链接（[将数据从 EBS 移动到临时存储会提高 MySQL 查询性能吗？](https://stackoverflow.com/questions/10117939/will-moving-data-from-ebs-to-ephemeral-storage-improve-mysql-query-performance)）

任何建议将被认真考虑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T07:41:21.777

如果您从实例存储 AMI 启动您的实例，那么您将获得 400G 的本地实例存储。如果您关闭了该实例，您将丢失该数据（重启没问题）

如果您使用 EBS 基础 ami，根设备将始终是 EBS 卷。如果您希望临时卷可用，则必须在启动实例时指定。您可以通过 Web 控制台或在使用创建实例的各种 API 时传递 BlockDeviceMapping 选项来执行此操作。当实例关闭时，临时卷上的数据仍然丢失。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T07:38:14.950

用户1057161：

> 这是否意味着与介质实例捆绑在一起的 400GB 永远不会存储持久数据？唯一的方法是从亚马逊购买额外的 EBS 存储？

正确的。临时存储是……临时的。它在设计上是非持久的。附加 EBS 卷或将数据推送到 S3 是保留数据的预期方式。

高可扩展性（AWS 的设计目的）意味着将大量廉价服务器聚集在一起——其中任何一个都可能毫无预警地崩溃，但这是意料之中的。

如果您有一个实例并且您依赖临时存储......不要。“依赖”和“短暂”这两个词不属于一起。*计划*实例在没有警告的情况下崩溃，并使您的应用程序能够适应它。

我希望这有帮助！:)

# tkinter - 将 SimpleCV 与 TKinter GUI 相结合

> ID：12685984
> 
> 赞同：1
> 
> 时间：2012-10-02T07:18:56.060
> 
> 标签：tkinter, simplecv

有人知道将 SimpleCV 与 TKinter 相结合的示例，例如在显示器上放置一些小部件吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:37:10.683

我在我们的帮助论坛上回答了这个问题：http: [//help.simplecv.org](http://help.simplecv.org)

但是为了传达信息，我在这里举了一个例子： [https ://github.com/ingenuitas/SimpleCV/blob/develop/SimpleCV/examples/display/tkinter-example.py](https://github.com/ingenuitas/SimpleCV/blob/develop/SimpleCV/examples/display/tkinter-example.py)

这是代码：

```
import SimpleCV
import ImageTk #This has to be installed from the system repos
import Tkinter
import time

Tkinter.Tk()

image = SimpleCV.Image('http://i.imgur.com/FTKqh.jpg') #load the simplecv logo from the web
photo = ImageTk.PhotoImage(image.getPIL())
label = Tkinter.Label(image=photo)
label.image = photo # keep a reference!
label.pack() #show the image
time.sleep(5) 
```

# php - CodeIgniter - 额外的 dbforge / 迁移字段

> ID：12685986
> 
> 赞同：0
> 
> 时间：2012-10-02T07:18:57.620
> 
> 标签：php, codeigniter, codeigniter-2

我无法弄清楚 CodeIgniter 的迁移业务......我找不到任何体面的文档来解释额外的字段元素，如 current_timestamp、默认日期时间值等

我想知道是否有人可以帮助我将以下内容转换为正确的 dbforge->add_field 数组

我需要以下 2

```
`last_login` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP 
```

和

```
`created` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' 
```

我已经从 tank_auth 库的 SQL 插入语句中复制了这些内容。

但我现在想把它放到迁移中。

干杯，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-21T10:42:26.917

对于数字 1，您可以使用

```
$this->dbforge->add_field('last_login TIMESTAMP'); 
```

或者

```
$data = array(
 'type' => 'TIMESTAMP'
); 
```

此自动插入 ON UPDATE CURRENT_TIMESTAMP

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:33:50.843

我想你可能不走运。这些是[dbforge 的可用选项](http://codeigniter.com/user_guide/database/forge.html)：

> 此外，可以使用以下键/值：
> 
> ```
> unsigned/true : to generate "UNSIGNED" in the field definition.
> default/value : to generate a default value in the field definition.
> null/true : to generate "NULL" in the field definition. Without this, the field will >     default to "NOT NULL".
> auto_increment/true : generates an auto_increment flag on the field. Note that the >     field type must be a type that supports this,
> such as integer 
> ```

您可能必须通过标准查询。[`$this->db->query('YOUR QUERY HERE');`](http://codeigniter.com/user_guide//database/queries.html)可能是你需要的。

# google-app-engine - 如果超出配额，如何显示单独的页面？

> ID：12685994
> 
> 赞同：1
> 
> 时间：2012-10-02T07:19:36.640
> 
> 标签：google-app-engine, quota

我按照[自定义错误响应](https://developers.google.com/appengine/docs/python/config/appconfig#Custom_Error_Responses)执行此操作- app.yaml 更新为

```
error_handlers:
- error_code: over_quota
  file: templates/over_quota.html 
```

并创建相应的文件。但是仍然显示错误（异常）而不是该页面。我试图将文件放在根文件夹中（在 app.yaml 进行相应的更新） - 它没有帮助。

我究竟做错了什么？

**更新**。我根据@Gwyn Howell 评论以下列方式定义了这一点。

```
handlers:
- url: /over_quota.html
  static_files: templates/over_quota.html
  upload: templates/over_quota.html

error_handlers:
- error_code: over_quota
  file: over_quota.html 
```

但是（1）如何测试它，（2）哪个 url 用户会在结果中看到？`http://www.example.com/over_quota.html`还是会是原始网址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:30:12.753

您将超出特定配额，例如引发异常的数据存储操作，而不会超出您的实例小时配额。仅当 App Engine 由于缺少配额而根本无法向实例发送请求时，才会显示超出配额的错误消息；如果请求被发送到您的应用程序，但您尝试执行超出可用配额的操作，则由您来处理您认为合适的异常。

# javascript - 找不到 Typescript 编译器：命令“tsc”无效

> ID：12685995
> 
> 赞同：59
> 
> 时间：2012-10-02T07:19:39.633
> 
> 标签：javascript, visual-studio-2012, typescript, tsc

刚刚将 Typescript 扩展安装到 VS2012 并按照[Install TypeScript for Visual Studio 2012](http://go.microsoft.com/fwlink/?LinkID=266563)和[教程](http://www.typescriptlang.org/Tutorial/)调用编译器：

```
> tsc greeter.ts 
```

但是当我尝试编译 .ts 文件时，我应该在哪里输入：`tsc greeter.ts`？在 VS 命令行和 Windows 控制台中尝试过，总是得到 tsc 未被识别为 command( `Command "tsc" is not valid.`) 的消息。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-01-19T12:02:41.790

如果您使用 tsc 作为节点模块，请确保您已经安装了它

```
npm install -g typescript 
```

然后它应该在您的节点命令提示符中全局可用

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-10-02T07:38:41.537

确保你有，

> `C:\Program Files (x86)\Microsoft SDKs\TypeScript\0.8.0.0`

或者，

> `C:\Program Files\Microsoft SDKs\TypeScript\0.8.0.0`

在你的路上。如果没有，请尝试重新启动`CMD.EXE`并查看是否显示新副本。如果失败，请尝试将上述其中一项手动添加到您的路径中。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-11-15T17:57:17.693

对于在**Windows**上使用**Visual Studio Code**且不想安装完整 Visual Studio 的人`tsc.exe`，我可以建议从这里下载它：[https://www.microsoft.com/en-us/download/details。 aspx?id=48593](https://www.microsoft.com/en-us/download/details.aspx?id=48593)。

遗憾的是，TypeScript 下载页面中缺少此链接。

尽管安装程序名为`TypeScript for Visual Studio 2015`，但它也适用于 Visual Studio Code。

下载并安装 TypeScript 后，您应该手动将其安装目录（`C:\Program Files (x86)\Microsoft SDKs\TypeScript\2.0\`在我的例子中）添加到`%PATH%` [环境变量](https://en.wikipedia.org/wiki/Environment_variable#Windows)中。

打开环境变量编辑器：

`Win`+ `S`; `e`, `n`, `v`, `i`, `r`, `o`; 单击**为您的帐户编辑环境变量**。

在打开的窗口中找到`Path`用户变量（注意`%PATH%`这里没有命名，但仍然是它）。您可能已经在那里设置了一些路径。您只需键入`;`，**附加**TypeScript 安装位置，`;`最后再添加一个。

截图供您参考：

[![在此处输入图像描述](../Images/89e2c1aa45dd99c2e1719db4f037f8fc.png)](https://i.stack.imgur.com/vTme6.jpg)

完成后，打开命令提示符并输入`tsc -v`. 如果`tsc.exe`'s 的版本正在显示，你就完成了。为此，**请**在对`%PATH%`.

PS 如果您收到“错误 TS5057：在指定目录中找不到 tsconfig.json 文件：'.'”，只需`tsconfig.json`在文档根目录（可能是您的`.ts`文件所在的位置）中创建文件，内容简单：`{}`. 这意味着“一个空的 JSON 文件 <...>。这对大多数人来说已经足够了。” （[来源](https://github.com/TypeStrong/atom-typescript/blob/master/docs/tsconfig.md#basic)）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-10T20:16:06.707

通常关闭并重新打开命令提示符可以解决问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-22T01:04:37.010

检查这两个文件夹以找出您拥有的 TypeScript 版本：

```
C:\Program Files (x86)\Microsoft SDKs\TypeScript\
C:\Program Files\Microsoft SDKs\TypeScript\ 
```

右键单击显示版本号的文件夹，然后“复制为路径”。

将此粘贴到您的系统路径中（快速访问 - Windows 键，然后键入“env”）。然后以管理员身份打开一个新的命令提示符控制台，'tsc' 应该可以工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-01T08:57:00.987

作为新的路径变量，不要使用显示的`tsc version`数字，而是使用不同的 TypeScript 文件夹名称。

样本 ：

```
tsc -v display 2.4.1 
```

但 TypeScript 目录是

> C:\Program Files (x86)\Microsoft SDKs\TypeScript\2.4

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-14T19:51:00.590

只需删除 AppData\Roaming\npm\tsc.ps1 文件即可解决问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-21T07:19:19.967

在 CMD 类型`where tsc`中，如果它没有显示这样的路径，`C:\Program Files (x86)\Microsoft SDKs\TypeScript\typescript version you installed\`则意味着您的 tsc 没有从这里运行。您需要按照以下`@TranslucentCloud`答案手动更改环境路径。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-29T05:50:43.873

In my case, I did install typescript globally by using `-g` flag but `tsc` was not recognized. It turns out that below directory was not included in `path` environment variable:

```
C:\Users\Jitendra\AppData\Roaming\npm 
```

Adding this directory to `path` variable worked for me.