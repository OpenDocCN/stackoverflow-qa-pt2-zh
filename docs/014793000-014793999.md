# StackOverflow 问答 14793000-14793999

# cocos2d-iphone - 剪辑添加到 CCSpriteBatchNode 的 CCSprite

> ID：14793005
> 
> 赞同：1
> 
> 时间：2013-02-09T23:53:19.347
> 
> 标签：cocos2d-iphone, ccsprite, clipping, ccspritebatchnode

我正在用这段代码剪辑我的精灵：

```
//At my CCSprite subclass m.

-(void)visit
{
CGPoint worldOrg = [self convertToWorldSpace:ccp(0, 0)];
CGPoint dest = [self convertToWorldSpace:ccp(self.contentSize.width, self.contentSize.height)];
CGPoint dims = ccpSub(dest, worldOrg);

glEnable(GL_SCISSOR_TEST);

glScissor(worldOrg.x, worldOrg.y, dims.x, dims.y);

#define SHOW_CLIPPED_AREA 1

#if SHOW_CLIPPED_AREA
//Draws a red rectangle showing clipped area
ccDrawSolidRect(ccp(0, 0), ccp(1024, 1024), ccc4f(64, 0, 0, 128));
#endif
[super visit];

glDisable(GL_SCISSOR_TEST);
} 
```

然后像往常一样创建精灵，将 sprite.contentSize 属性调整为我需要的任何内容：

```
CCSprite aSprite = [CCSprite spriteWith...];
aSprite.contentSize = CGSizeMake(20,20);
//Add it to my layer
[self addChild:aSprite]; 
```

它按预期工作！

问题...

将其添加到 CCSpriteBatchNode 时，它​​不会剪切精灵……它会显示精灵，但不会剪切它。

有人可以帮我解决这个问题，我到处都用谷歌搜索，没有答案。

我还使用了[Steffen Itterheim](http://www.learn-cocos2d.com/2011/01/cocos2d-gem-clippingnode/)的 ClippingNode 类，但我也遇到了将它添加到 CCSpriteBatchNode 的问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T23:55:34.380

剪裁或任何自定义绘图不适用于精灵批处理精灵。

CCSpriteBatchNode 不会在其子节点上调用访问（或绘制）方法，因为批处理节点会接管子节点的渲染。因此，您在 CCSprite 的 draw 或 visit 方法中编写的任何代码在您对 sprite 进行 sprite-batch 时都将无效。

# laravel - laravel 4 多语言网站

> ID：14793008
> 
> 赞同：3
> 
> 时间：2013-02-09T23:53:29.287
> 
> 标签：laravel, laravel-4, multilingual

我正在尝试实现一个多语言 laravel 4 网站，网址中包含语言代码（ mywebsite.com/en/home 和 mywebsite.com/de/home ）

我已经看到了几个选项，例如过滤所有请求并检查第一个参数是否是语言代码之一。

我也检查了 packagist，但还没有找到已经做 tee 工作的东西。

有没有更好的方法来实现它？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T14:41:39.750

最后，我在 config/app.php 中创建了一个配置变量

```
'available_language' => array('en', 'fr', 'es'), 
```

在 filters.php 我检测浏览器语言：

```
Route::filter('detectLang', function($lang = "auto")
{
    if($lang != "auto" && in_array($lang , Config::get('app.available_language')))
    {
        Config::set('app.locale', $lang);
    }else{
        $browser_lang = !empty($_SERVER['HTTP_ACCEPT_LANGUAGE']) ? strtok(strip_tags($_SERVER['HTTP_ACCEPT_LANGUAGE']), ',') : '';
        $browser_lang = substr($browser_lang, 0,2);
        $userLang = (in_array($browser_lang, Config::get('app.available_language'))) ? $browser_lang : Config::get('app.locale');
        Config::set('app.locale', $userLang);
    }
}); 
```

然后在 routes.php 我可以检测语言或强制它：

```
Route::get('/', array(
    'before' => 'detectLang()', // auto-detect language
    function(){
        ...
    })
); 
```

或者

```
Route::get('/', array(
    'before' => 'detectLang("fr")', // force language to "fe"
    function(){
        ...
    })
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T07:16:45.127

您可以在用户会话中设置语言变量。

然后使用“ `before`”过滤器，查看该变量，并记录正确的语言文件。

如果没有设置变量 - 然后使用默认值（可能基于它们的 IP 位置）。

# android - 如何在线性布局中添加多个不同的文本视图

> ID：14793009
> 
> 赞同：1
> 
> 时间：2013-02-09T23:53:32.023
> 
> 标签：android

嗨，我想在我的线性布局中添加 2 个不同的文本视图，但是当我尝试同时添加它们时，只出现第一个，为什么会这样？这是我的代码：

```
 LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.MATCH_PARENT,
            LinearLayout.LayoutParams.WRAP_CONTENT);

    // create the text view for the main string to
    // be displayed
    TextView displayMainText = new TextView(this);
    displayMainText.setTextSize(15);
    displayMainText.setText(mainString);
    displayMainText.setLayoutParams(layoutParams);
    displayMainText.setPadding(0, 20, 0, 0);

    // Create the text view for the optional string to
    // be displayed
    TextView displayOppText = new TextView(this);
    displayOppText.setTextSize(15);
    displayOppText.setText(optionalString);
    displayOppText.setLayoutParams(layoutParams);
    displayOppText.setPadding(0, 20, 0, 0);

    // add text views to the layout
    LinearLayout studyTLayout = (LinearLayout) findViewById(R.id.study_time_layout);
    studyTLayout.addView(displayMainText);
    studyTLayout.addView(displayOppText);
    setContentView(studyTLayout); 
```

使用我的代码，它只会正确添加第一个文本视图

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T23:55:25.407

似乎您没有将方向设置`LinearLayout`为垂直。

```
studyTLayout.setOrientation(LinearLayout.VERTICAL); 
```

# security - 如何对客户端应用程序进行服务器端验证？

> ID：14793010
> 
> 赞同：0
> 
> 时间：2013-02-09T23:53:43.160
> 
> 标签：security, validation, client-server

我有一个 Windows 客户端（桌面）应用程序，第一次运行时会访问服务器并请求客户端 ID。不久之后，该客户端将通过其他请求回叫服务器。服务器可以整天分发客户端 ID，但重要的是服务器能够知道任何未来的请求都来自有效的客户端。

这意味着验证发出请求的是客户端应用程序，而不是假装是客户端应用程序的某人/其他人。理想情况下，它还涉及验证客户端应用程序的客户端 ID 是否未更改。

我曾考虑在未来的请求中包含加盐客户端 ID 的哈希值，但对于一个有决心的人来说，分解客户端以找出加盐值似乎并不难。

在此先感谢您提供任何解决方案、提示或指示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:19:28.580

*如果没有大量*的密码学，就无法明智地完成。只要对方有完全的控制权，他们就不可能伪造答案。Kerberos 所做的事情有点类似，协议非常复杂。罗斯安德森的[“安全工程”](http://www.cl.cam.ac.uk/~rja14/book.html)将是我了解如何做到这一点的第一站。

# java - 比较多列

> ID：14793012
> 
> 赞同：0
> 
> 时间：2013-02-09T23:53:49.640
> 
> 标签：java, oracle, jdbc, arraylist

有没有一种有效的方法来比较列表的元素？关于此事的一些背景：

我正在解析数据，然后将其存储在列表中。然后，我将在 Oracle DB 中查询与某些元素匹配的列表（ID 名称描述）。我一直在创建一个数据结构，然后将其存储到列表中。问题是如何比较内容。我需要考虑 4 个场景。

1.  新数据是全新的（添加行）
2.  新数据大多与现有数据匹配（更新上一行）
3.  数据库中存在的数据不在新数据中，而是在某些数据上匹配。（状态需要更改以表明问题已被取消）。
4.  数据完全匹配（如果更改则更新时间，否则不更改）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:14:42.790

创建一个描述该行的对象。用于`ComparisonChain`您的功能要求。

```
public int compareTo(Foo that) {
     return ComparisonChain.start()
         .compare(this.aString, that.aString)
         .compare(this.anInt, that.anInt)
         .compare(this.anEnum, that.anEnum, Ordering.natural().nullsLast())
         .result();
   } 
```

[http://code.google.com/p/guava-libraries/wiki/CommonObjectUtilitiesExplained#equals](http://code.google.com/p/guava-libraries/wiki/CommonObjectUtilitiesExplained#equals)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:21:04.723

如果我对您的理解正确，这些方法可能会对您有所帮助：

[`List.contains`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains%28java.lang.Object%29)

[`Collections.frequency`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#frequency%28java.util.Collection,%20java.lang.Object%29)

[`Collections.sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

# prolog - 查找两个城市之间的距离

> ID：14793013
> 
> 赞同：0
> 
> 时间：2013-02-09T23:54:25.000
> 
> 标签：prolog

我正在处理一个涉及城市列表的问题，并在 Prolog 中找到最接近指定城市的问题。例如，如果我想从这个数据集中找到离西雅图最近的城市

```
city(5,3, seattle).
city(22,17,nashville).
city(4,7, portland).
city(21,18, memphis).
city(1,11, sacramento). 
```

我有一个谓词/2 定义距离

```
calc(C1,C2,D) :-
   city(V1,H1,C1),
   city(V2,H2,C2),
   D is ((V1-V2)^2+(H1-H2)^2). 
```

我如何使用 findall/3 计算找到最近城市的距离？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:05:54.977

公式 (x1 - x2)^2 + (y1 - y2)^2 给出距离的平方；如果正方形最低，则距离最短。

**编辑：**需要累积的是到目前为止最近的一对城市，距离^ 2，因为您深入研究城市列表（或研究城市的事实）。看看类似的例子。

# java - 以编程方式启动 M2E Maven 命令

> ID：14793015
> 
> 赞同：0
> 
> 时间：2013-02-09T23:54:33.423
> 
> 标签：java, eclipse, maven, plugins, m2e

我正在开发一个 Eclipse 插件。这个 Eclipse 插件包含一个新建项目向导，在`performFinish`我的向导的方法中，我想使用 Maven (M2E) 来执行一个原型：生成命令。

然后我找到[了这个资源](http://maven.apache.org/shared/maven-invoker/usage.html)，我能够让 maven 调用程序以编程方式生成原型，但是它要求我定义一个 maven.home 以便它知道 mvn 可执行文件在哪里。

如果实现这一点的最佳方法是使用 maven 调用程序，我怎样才能获得嵌入式 m2e mvn（m2e 的 maven.home）的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:36:08.000

好吧-我只知道：您可能必须搜索它。大多数环境变量 M2_HOME、M3_HOME 或 MAVEN_HOME 之一是在设置/安装过程中设置的。但我不太确定，如果总是这样。如果您可以直接从命令提示符启动 maven，它可能在 PATH 环境中。所以 - 搜索 Maven 的环境：

```
String mavenHomePath = System.getProperty("maven.home");

if (mavenHomePath == null) {
    Map<String,String> filteredMap = new HashMap<>();
    final List<String> searchEnv = Arrays.asList(new String[]{"m3_home", "m3home", "m2_home", "m2home", "maven_home", "mavenhome", "path"}); 
    for (final Map.Entry<String, String> entry : System.getenv().entrySet()) {
        final String key = entry.getKey().toLowerCase();
        if (searchEnv.contains(key)){
            filteredMap.put(key, entry.getValue());
        }
    }
    for (String key : searchEnv) {
        for (final String pathEnv : filteredMap.values()) {
            for (final String path : pathEnv.split(File.pathSeparator)) {
                mavenHomePath = checkForMavenHomeIn(new File(path));
                if (mavenHomePath != null) break;
            }
            if (mavenHomePath != null) break;
        }
        if (mavenHomePath != null) break;
    }
}

System.setProperty("maven.home", mavenHomePath);

invokeYourPlugIn(); 
```

不幸的是，“PATH”并不总是被命名为“PATH”，而是可能是“Path”甚至是“path”——至少在 Windows 系统上是这样。它也可能是 m2_home 等。所以 - 我过滤了环境变量而忽略了这种情况。（我实际上并没有寻找 maven，而是 svn - 但我遇到了类似的问题）。所以 - 我经常阅读“set m2home”或“set m2_home”等 - 我不确定是否有约定。

`checkForMavenHomeIn`应该寻找bin的父目录。“path”将指向“bin”，其他指向maven主目录。

否则，您可能必须提示用户输入目录并将其保存到一些 Eclipse 工作区首选项中 - 但最好执行一些预搜索。

# php - 使用 jquery 从表中访问值的问题

> ID：14793016
> 
> 赞同：1
> 
> 时间：2013-02-09T23:54:39.430
> 
> 标签：php, jquery

嘿伙计们，我正在尝试从表中获取特定名称。这是我的代码：

```
$(document).ready(function () {
    $("#NotesAccessor").click(function () {
      var notes_name = $(this).document.getElementById("#user_table");
      alert(notes_name);
      run();
    });
}); 
```

这是上面的内容，这是我尝试使用#notesAccessor 访问与哪个表行单击的关联用户名的地方

桌子：

```
 .........
    <td>
        $csvusername
    </td>
.........
    <td>
    ";
      if ($checkNotes[1] == 'No')
    {
        echo "None";
    }
    if ($checkNotes[1] == 'Yes')
    {
            echo "<a href='#' id='NotesAccessor'>Click to access</a>";
    }
    echo "
    </td>
........ 
```

我的问题是 - 我如何获取关联的 $csvusername`NotesAccessor`以便我可以将其发送到 Jquery 中的对话框并打开我需要获取的那个人的笔记。

希望这是有道理的。

更新：

这是完整的表格：

```
<table class='results'>
    <tr class='firsttr' style='background:gray;'>
        <td>First Name</td>
        <td>Last Name</td>
        <td>Email</td>
        <td>Phone</td>
        <td>Username</td>
        <td>Password</td>
        <td>Status</td>
        <td>Combined Single Limit</td>
        <td>Bodily Injury Each Person</td>
        <td>Bodily Injury Each Accident</td>
        <td>Property Damage</td>
        <td>Address</td>
        <td>Notes</td>
        <td>#</td>
    </tr>"; $j = 0; while ($row = $sth->fetch(PDO::FETCH_ASSOC)) { $val = 1; $csvfirst
    = $row; $csvfirstname = $csvfirst['firstname']; $csvlastname = $csvfirst['lastname'];
    $csvemail = $csvfirst['email']; $csvphone = $csvfirst['phone']; $csvusername
    = $csvfirst['username']; $csvpassword= $csvfirst['password']; $csvstatus
    = $csvfirst['status']; $csvnotes = $csvfirst['notes']; $csl = $csvfirst['Combinedlimit'];
    $bodyinj = $csvfirst['bodyinjur']; $eachacc = $csvfirst['bodyinjureachacc'];
    $propertydmg = $csvfirst['propertydmg']; // Select the current employees
    address $psql = "SELECT MailingAdrs FROM insuranceverificationdisclaimer
    WHERE TraineeUsername =:user"; $psth= $DBH->prepare($psql); $psth->execute(array(':user'
    => $csvusername )); while ($prow = $psth->fetch(PDO::FETCH_ASSOC)) { $pcheck
    = $prow; $address = $pcheck['MailingAdrs']; } if ($csvstatus != "No Longer
    Work Here" && $csvstatus == "Confirmed"){ //check to see if notes exist
    if (empty($csvnotes)) { $checkNotes = 0; } else { $checkNotes = 1; } $memberfirstnamearray[$j]
    = $csvfirstname; $memberlastnamearray[$j] = $csvlastname; $memberemailarray[$j]
    = $csvemail; $memberphonearray[$j] = $csvphone; $membercsl[$j] = $csl;
    $memberbodyinj[$j] = $bodyinj; $membereachacc[$j] = $eachacc; $memberpropertydmg[$j]
    = $propertydmg; $memberstatus[$j] = $csvstatus; $memberaddress[$j] = $address;
    $j++; $i++; echo "
    <tr>
        <td>$csvfirstname</td>
        <td>$csvlastname</td>
        <td>$csvemail</td>
        <td>$csvphone</td>
        <td class='user_table'>$csvusername</td>
        <td>$csvpassword</td>
        <td>$csvstatus</td>
        <td>$csl</td>
        <td>$bodyinj</td>
        <td>$eachacc</td>
        <td>$propertydmg</td>
        <td>$address</td>
        <td>"; if ($checkNotes == 0) { echo "None"; } if ($checkNotes == 1) { echo
            "<a href='#' id='NotesAccessor'>Click to access</a>"; } echo "</td>
        <td>$i</td>
    </tr>"; } }
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:09:10.720

您正在将纯 JavaScript 与 jQuery 混合使用，您可以按如下方式解决。

首先，您可以放置​​一个类来识别`<td>`with `$csvusername`，`class='td_with_csvusername'`然后执行以下操作：

```
$(document).ready(function () {
    $(".NotesAccessor").on("click", function () {
        var td = $(this).parent().parent().find(".td_with_csvusername");
        alert(td.html());
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:06:17.357

发布输出 HTML 比 PhP 版本更好，但我假设您的 HTML 类似于：

```
<table>
    <tbody>
        <tr>
            <td>UserName</td>
            <td><a href='#' id='NotesAccessor'>Click to access</a>"</td>
        </tr>
    </tbody>
</table> 
```

然后你可以使用 jQuery 的[**parent()**](http://api.jquery.com/parent/)和[**prev()**](http://api.jquery.com/prev/)来查找锚的父级的上一个兄弟，类似于这样：

```
$(document).ready(function () {
    $("#NotesAccessor").click(function () {
        var notes_name = $(this).parent().prev().html();
        alert(notes_name);
        //run();
    });
}); 
```

* * *

[**演示**](http://jsfiddle.net/uaCzr/)- 查找匹配的用户名列

* * *

如果上面的 HTML 不是这样，那么请发布确切的输出，因为当您单击锚点时`td`，了解如何遍历匹配非常重要。`tr`假设这就是你想要达到的目标。

**编辑**

现在才看到你的更新。我知道您已经有了解决方案，但是为了完整起见，无论如何我都已添加到此答案中，以防它对未来的用户有用。

在您的示例代码中，您已经在 user-name cell 上有了类`user_table`。然后，您可以使用它来定位。此外，鉴于您说您将有几行带有`#NoteAccessor`，您应该将 更改为`id="NoteAccessor"`，`class="NoteAccessor"`因为 id 必须是唯一的，否则它是无效的 HTML。此外，jQuery 只返回第一个具有匹配 id 的元素。

你最终得到的脚本是直接的，然后`parent()`像以前一样使用，但现在你也可以使用[**prevAll()**](http://api.jquery.com/prevall/)指定类选择器：

```
$(document).ready(function () {
    // using class ".NotesAccessor" instead of id "#NotesAccessor" 
    // as element is repeated in each tr
    $(".NotesAccessor").click(function () {
        var notes_name = $(this).parent().prevAll('.user_table').html();
        alert(notes_name);
    });
}); 
```

* * *

[**演示**](http://jsfiddle.net/bMkmD/)- 使用`parent()`和`prevAll('.user_table')`

* * *

# cytoscape.js - cytoscape.js：提高设置节点属性数据的性能

> ID：14793022
> 
> 赞同：1
> 
> 时间：2013-02-09T23:55:06.260
> 
> 标签：cytoscape.js

在 cytoscape.js 中，我试图为 329 节点网络中的每个节点更改两个节点属性的值。

这有效，但需要 86 秒。我希望它会快得多。这是我的代码：

```
var data = // data of the form {lfc: {key1: 0.01, key2: 0.02, ...}, pval: {key1: 0.03,  key2: 0.04, ...}};
var nodes = cy.nodes();
console.log('starting to update node data...');
var start = new Date().getTime();
for (var i = 0; i < nodes.length; i++)
{
  var node = nodes[i];
  var id = node.data("id");
  var lfc = data['lfc'][id];
  var pval = data['pval'][id];
  node.data({lfc: lfc, pval: pval});
}
var end = new Date().getTime();
console.log("finished in " + (end - start) + "ms"); 
```

我知道如果我将网络中所有节点的属性设置为相同的值，它会快得多。这大约需要半秒钟：

```
var start = new Date().getTime();
cy.nodes().data({lfc: 1.0, pval: 1.0});
var end = new Date().getTime();
console.log("finished in " + (end - start) + "ms"); 
```

但由于我试图给每个节点单独的值，我不能这样做。

有什么提高性能的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:54:30.667

在循环中调用这样的函数的问题在于，每次迭代都会导致事件和通知给渲染器——因为可能需要视觉更新。正如您所指出的，批量添加/加载时这不是问题，因为这只会生成一个通知。

理想的架构是在初始化 cytoscape.js 之前加载您需要的所有元素，然后在服务器上更改单个节点时更新它们。轮询服务器并更新所有节点可能会导致加载性能以外的其他问题。

# windows - 从 %%i 变量中获取文件名

> ID：14793024
> 
> 赞同：4
> 
> 时间：2013-02-09T23:55:29.733
> 
> 标签：windows, batch-file, ffmpeg, cmd

我有一个脚本，可以将文件夹中的所有 mkv 转换为 mp4，使用`ffmpeg`. 缺点是它离开了 .mkv 扩展名，只是添加了 .mp4（例如：）`file.mkv.mkp4`。我知道`%~n`可以用来获取没有扩展名的名称，但我似乎无法弄清楚。

这是我的原始脚本：

```
for %%i IN (*.mkv) DO (ffmpeg -y -ss 00:00:00 -threads 6 -i "%%i" -vcodec copy -f mp4 -strict experimental -acodec aac -ab 128k -ac 2 "%%i.mp4") 
```

这是我尝试过的：

```
for %%i IN (*.mkv) DO (ffmpeg -y -ss 00:00:00 -threads 6 -i "%~ni.mkv" -vcodec copy -f mp4 -strict experimental -acodec aac -ab 128k -ac 2 "%~ni.mp4") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T00:05:43.777

循环变量的百分号必须在批处理脚本中加倍，因此您必须`%%~ni`使用`%~ni`. 请参阅[文档中的](https://technet.microsoft.com/en-us/library/bb490909.aspx)*示例*部分。

# python - 如何处理python中的大csv文件？

> ID：14793027
> 
> 赞同：1
> 
> 时间：2013-02-09T23:55:36.503
> 
> 标签：python, function, csv

我有一个包含 40k 行数据的 CSV 文件。

我的每个函数都打开 csv 文件并使用它，然后关闭它。有没有一种方法可以打开文件一次然后关闭它，我可以随时使用它？我尝试将每个字段放在一个单独的列表中，并在我调用它或在字典中使用它，但是如果超过 1k 行，这两种方法都可以正常工作，如果处理它需要很长时间，我找到了一种通过过滤来加快速度的方法他们，但不知道如何应用它。

我的代码示例。

```
files=open("myfile.csv","r")

def spec_total():
    total = 0.0
    files.readline() # skip first row
    for line in files:
        field=line.strip().split(",")  #make Into fields
        tall=float(field[0])      
            if tall >= 9.956:
        total +=tall
    print("The sum is: %0.5f" % (total))

spec_total()
files.close() 
```

其他功能

```
files=open("3124749c.csv","r")
def code():
    match= 0
    files.readline() # skip first row
    for row in files:
        field=row.strip().split(",") #make Into fields
        code=(field[4])
        import re
        if re.search(r'\[[A-Za-z][0-9]+\][0-9]+[A-Za-z]{2}[0-9]+#[0-9]+', code) is None:
            match += 1
    print("The answer that do not match code is :",match)

code()

files.close() 
```

并且每次打开 csv 文件时都会打开更多功能并将它们拆分为字段，以便识别我指的是哪个字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:10:06.920

如果我理解正确，请尝试：

```
import csv
total = 0.0
for row in csv.reader(open("myfile.csv")):
    tall = float(row[0])
    if tall >= 9.956:
        total += tall

print("The sum is: %0.5f" % total) 
```

* * *

更复杂的版本 - 创建计算类来处理每一行。

```
class Calc(object):
    def process(self,row):
       pass
    def value(self):
        pass

class SumColumn(Calc):
    def __init__(self, column=0,tall=9.956):
        self.column = column
        self.total = 0

    def process(self, row):
        tall = float(row[0])
        if tall >= self.tall:
           self.total += tall

    def value(self):
        return self.total

class ColumnAdder(Calc):
    def __init__(self, col1, col2):
        self.total = 0
        self.col1 = col1
        self.col2 = col2

    def process(self, row):
        self.total += (row[self.col1] + row[self.col2])

    def value(self):
        return self.total

class ColumnMatcher(Calc):
   def __init__(self, col=4):
      self.matches = 0

   def process(self, row):
      code = row[4]
     import re
     if re.search(r'\[[A-Za-z][0-9]+\][0-9]+[A-Za-z]{2}[0-9]+#[0-9]+', code) is None:
         self.match += 1

   def value(self):
      return self.matches

import csv
col0_sum = SumColumn()
col3_sum = SumColumn(3, 2.45)
col5_6_add = ColumnAdder(5,6)
col4_matches = ColumnMatcher()

for row in csv.reader(open("myfile.csv")):
    col0_sum.process(row)
    col3_sum.process(row)
    col5_6_add.process(row)
    col4_matches.process(row)

print col0_sum.value()
print col3_sum.value()
print col5_6_add.value()
print col4_matches.value() 
```

* * *

这段代码被输入到 SO 中，这是一件乏味的事情 - 语法等非常简单。

仅用于说明目的 - 不要太从字面上理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:35:34.030

Python 中的一切都是对象：这也意味着函数。
所以没有必要像**sotapme**那样定义特殊的类来将函数作为这些类的实例，因为我们定义的每个函数都已经是“类的实例”意义上的对象。

现在，如果有人需要创建多个相同类型的函数，例如每个函数都将精确 CSV 文件列的所有值相加，那么通过重复过程创建这些函数很有趣。
在这一点上，提出了一个问题：使用函数工厂还是类？

就个人而言，我更喜欢函数工厂的方式，因为它不那么冗长。
我还在 Theran's answer [HERE](https://stackoverflow.com/questions/901892/python-factory-functions-compared-to-class)中发现它也更快。

在下面的代码中，我使用 globals() 的技巧为通过函数工厂创建的每个函数指定一个特定的名称。有人会说这很糟糕，但我不知道为什么。如果有其他方法可以做到这一点，我会很高兴学习它。

在代码中，3 个函数是由函数工厂构建的，我让一个由普通定义（op3）定义。

Python 太棒了！

```
import csv
import re

# To create a CSV file
with open('Data.csv','wb') as csvhandle:
    hw = csv.writer(csvhandle)
    hw.writerows( ((2,10,'%%',3000,'-statusOK-'),
                   (5,3,'##',500,'-modo OOOOKKK-'),
                   (1,60,'**',700,'-- anarada-')) )
del hw

# To visualize the content of the CSV file
with open(r'Data.csv','rb') as f:
    print "The CSV file at start :\n  "+\
          '\n  '.join(map(repr,csv.reader(f)))

def run_funcs_on_CSVfile(FUNCS,CSV):
    with open(CSV,'rb') as csvhandle:
        for f in FUNCS:
            # this is necessary for functions not created via
            # via a function factory but via plain definition
            # that defines only the attribute col of the function
            if 'field' not in f.__dict__:
                f.field = f.col - 1
                # columns are numbered 1,2,3,4,...
                # fields are numbered 0,1,2,3,...
        for row in csv.reader(csvhandle):
            for f in FUNCS:
                f(row[f.field])

def SumColumn(name,col,start=0):
    def g(s):
        g.kept += int(s)
    g.kept = start
    g.field = col -1
    g.func_name = name
    globals()[name] = g

def MultColumn(name,col,start=1):
    def g(s):
        g.kept *= int(s)
    g.kept = start
    g.field = col - 1
    g.func_name = name
    globals()[name] = g

def ColumnMatcher(name,col,pat,start = 0):
    RE = re.compile(pat)
    def g(s,regx = RE):
        if regx.search(s):
            g.kept += 1
    g.kept = start
    g.field = col - 1
    g.func_name = name
    globals()[name] = g

SumColumn('op1',1)
MultColumn('op2',2)
ColumnMatcher('op4',5,'O+K')

def op3(s):
    s = int(s)
    if s%2:
        op3.kept += (2*s)
    else:
        op3.kept += s
op3.kept = 0
op3.col = 4

print '\nbefore:\n  ' +\
      '\n  '.join('%s.kept == %d'
                % (f.func_name,  f.kept)
                for f in (op1,op2,op3,op4) )

# The treatment is done here
run_funcs_on_CSVfile((op2,op3,op4,op1),r'Data.csv')
# note that the order of the functions in the tuple
# passed as argument can be any either one or another

print '\nafter:\n  ' +\
      '\n  '.join('%s(column %d) in %s.kept == %d'
                % (f.func_name, f.field+1, f.func_name, f.kept)
                for f in (op1,op2,op3,op4) ) 
```

. 结果 。

```
The CSV file at start :
  ['2', '10', '%%', '3000', '-statusOK-']
  ['5', '3', '##', '500', '-modo OOOOKKK-']
  ['1', '60', '**', '700', '-- anarada-']

before:
  op1.kept == 0
  op2.kept == 1
  op3.kept == 0
  op4.kept == 0

after:
  op1(column 1) in op1.kept == 8
  op2(column 2) in op2.kept == 1800
  op3(column 4) in op3.kept == 4200
  op4(column 5) in op4.kept == 2 
```

# java - 泛型变量可以重用吗？

> ID：14793030
> 
> 赞同：0
> 
> 时间：2013-02-09T23:56:01.070
> 
> 标签：java, generics

我只是想知道可以重用通用变量。例如，如果我有一个通用类来保存提供给它的数据库模型：

```
 DataManager<ModelObject1> manager = new DataManager<ModelObject1>();
 ModelObject1 object = new ModelObject1();
 object.setSomeProperty();
 manager.save(object); 
```

然后我可以重用同一个对象来保存不同类型的模型而不创建新的通用变量。我怎么能做这样的事情：

```
 manager = null;
 manager = new DataManager<ModelObject2>();
 ModelObject2 object2 = new ModelObject2();
 object2.setSomeProperty();
 manager.save(object2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T23:58:41.973

那不会编译。您不能将 a 分配给`DataManager<ModelObject2>`type 的变量`DataManager<ModelObject1>`，因为它们不是同一类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T00:22:45.763

由于类型擦除，在创建时 a`DataManager<ModelObject1>()`实际上与a**完全相同，**`DataManager<ModelObject2>()`因此从这个角度来看，没有理由不应该重用它 - 在正确的转换之后。

但是，有一些警告。如果您修改对象以包含对特定于定义类的某些内容的引用，那么事情会变得复杂：

像这样的事情意味着您不能安全地重新使用该对象：

```
DataManager<ModelObject1> manager = new DataManager<ModelObject1>();
manager.setObject(new ModelObject1()); 
```

但是，我强烈建议不要这样做，但没有很好的理由。也许如果创建管理器是一个非常繁重的过程，您可以证明重用它们是合理的。

这段代码编译得很好，但我强烈推荐`ss.clear()`在演员阵容之前或`is.clear()`之后，否则你最终会得到一个`Set<integer>`包含 a 的`String`：

```
public static void main(String[] args) {
    Set<String> ss = new HashSet<String> ();
    ss.add("Hello");
    Set<Integer> is = unsecureCast(ss);
}

static Set<Integer> unsecureCast(Set s) {
    return (Set<Integer>) s;
} 
```

# php - 使用while对查询中的信息进行排序？

> ID：14793034
> 
> 赞同：0
> 
> 时间：2013-02-09T23:56:25.810
> 
> 标签：php, mysql, function, sorting, loops

我正在尝试获取它，以便从此查询中检索到的信息在通过我已指定为主键的 messageid 显示到页面上之前进行排序。我不断收到此错误：

```
Warning: krsort() expects parameter 1 to be array, resource given in ... 
```

这是我的代码：

```
<?php

$id = $_SESSION[id];
$messages = @mysql_query("SELECT * FROM messages WHERE receiver='$id'");
$messagecount = mysql_num_rows($messages);
krsort($messages);

if ($messagecount == 0)
{
echo "<br>You have no messages.";
}
else
{
while ($messages2 = mysql_fetch_array($messages))
    {
    echo "<table width=800 class=\"normaltable\" cellpadding=\"3\" border=\"0\"><tr>
    <td class=\"tdmessagesubject\"><b>Subject:</b><a href=message.php?id=" .   $messages2['messageid'] . "> " . $messages2['subject'] . "</a></td>
    <td class=\"tdmessagefrom\"><b>From:</b> " . $messages2['sendercallname'] . "</td>   </tr>
    </table>";
    }
 }

?> 
```

我认为 $messages 是一个数组，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:02:16.307

看看[手册页](http://php.net/manual/en/function.mysql-query.php)，mysql_query 返回一个`resource`，不是和数组。

当你在那里时，请阅读那个红色的大警告，它说 mysql_ 系列函数已被**弃用**，这意味着你**不应该**在新代码中使用它们。

我还建议忘记更现代的 mysqli_ 继任者并立即跳到[PDO](http://php.net/manual/en/book.pdo.php) - 它是一个现代的、设计良好的 API，可与多个数据库引擎一起使用，最后但并非最不重要的一点是，它使使用准备好的语句变得轻而易举，并且准备好了语句可能是最便宜但最有效的防御[sql 注入](http://xkcd.com/327/)的方法。

但是回到当天的顺序：当您希望以某种方式对数据库结果集进行排序时，最简单的方法是让数据库服务器对其进行排序，如下所示：

```
$messages = @mysql_query("SELECT * FROM messages WHERE receiver='$id' order by messageid"); 
```

有几个很好的理由让数据库对数据进行排序而不是自己尝试：

*   这样你就不得不将整个结果集加载到内存中，这是低效的，而且结果集很大，它会耗尽 php 可用的内存
*   如果你的数据库设计得很好，很可能数据已经在你想要排序的列上建立了索引，这意味着服务器在返回它们时实际上不必对数据进行排序，从而使整个操作更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:01:43.597

您的`$messages`变量不是数组。要从数据库查询构建消息数组，您应该使用：

```
$result = @mysql_query("SELECT * FROM messages WHERE receiver='$id'");
$messages = array();
while ($message = mysql_fetch_assoc($result)) {
    $messages[] = $message;
} 
```

在这里您可以找到一个使用 mysql_fetch_assoc 的示例：http: [//php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

如果要在数据库查询中对消息进行排序，则应使用`ORDER BY`语句。例如：

```
$result = @mysql_query("SELECT * FROM messages WHERE receiver='$id' ORDER BY id"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T00:02:04.807

`@`哦，除非您有充分的理由，否则不要使用来抑制错误。

`mysql_query`返回一个资源：查询结果。如果要对其进行排序，则需要先将每一行提取到数组中，或者（更好的解决方案）`ORDER BY`在查询中使用以按排序顺序获取结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T00:02:07.197

首先要说的是，PHP中不推荐使用Mysql，建议使用新的Mysql扩展，[Mysqli](http://es1.php.net/manual/en/book.mysqli.php)

然后，您必须从资源中提取结果：

```
$data = array();
while($row = mysql_fetch_row($messages)) $data[] = $row; 
```

# ruby - 使用“发送”而不是普通的方法调用有什么意义？

> ID：14793048
> 
> 赞同：14
> 
> 时间：2013-02-09T23:58:11.920
> 
> 标签：ruby, methods, send

据我了解“发送”方法，这个

```
some_object.some_method("im an argument") 
```

和这个一样

```
some_object.send :some_method, "im an argument" 
```

那么使用“发送”方法有什么意义呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-10T00:00:51.283

如果您事先不知道方法的名称，它会派上用场，例如，当您进行元编程时，您可以将方法的名称放在变量中并将其传递给`send`方法。

它也可用于调用私有方法，尽管大多数 Ruby 开发人员并不认为这种特殊用法是一种好的做法。

```
class Test
  private
  def my_private_method
    puts "Yay"
  end
end

t = Test.new

t.my_private_method # Error

t.send :my_private_method #Ok 
```

您可以使用`public_send`只能调用公共方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-10T04:08:00.483

除了 Intrepidd 的用例之外，当您想在相同的接收器和/或参数上路由不同的方法时，它会很方便。如果你有`some_object`，并且想根据它做不同的事情`foo`，那么没有`send`，你需要这样写：

```
case foo
when blah_blah then some_object.do_this(*some_arguments)
when whatever then some_object.do_that(*some_arguments)
...
end 
```

但如果你有`send`，你可以写

```
next_method =
case foo
when blah_blah then :do_this
when whatever then :do_that
....
end
some_object.send(next_method, *some_arguments) 
```

或者

```
some_object.send(
  case foo
  when blah_blah then :do_this
  when whatever then :do_that
  ....
  end,
  *some_arguments
) 
```

或通过使用哈希，即使这样：

```
NextMethod = {blah_blah: :do_this, whatever: :do_that, ...}
some_object.send(NextMethod[:foo], *some_arguments) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-11T00:56:22.200

除了其他人的答案之外，一个很好的用例是迭代包含递增数字的方法。

```
class Something
  def attribute_0
    "foo"
  end
  def attribute_1
    "bar"
  end
  def attribute_2
    "baz"
  end
end

thing = Something.new

3.times do |x|
  puts thing.send("attribute_#{x}")
end

#=> foo
# bar
# baz 
```

这可能看起来微不足道，但它偶尔会帮助我保持 Rails 代码和模板干燥。这是一个非常具体的案例，但我认为这是一个有效的案例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T04:51:27.217

简单总结一下同事已经说过的话：`send`方法是元编程的语法糖。下面的示例演示了可能无法对方法进行本地调用的情况：

```
class Validator
  def name
    'Mozart'
  end
  def location
    'Salzburg'
  end
end

v = Validator.new
'%name% was born in %location%'.gsub (/%(?<mthd>\w+)%/) do
  # v.send :"#{Regexp.last_match[:mthd]}"
  v.send Regexp.last_match[:mthd].to_sym
end
=> "Mozart was born in Salzburg" 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-10T07:42:08.710

我喜欢这个建筑

```
Object.get_const("Foo").send(:bar) 
```

# c - 使用标准输入时等待 EOF

> ID：14793050
> 
> 赞同：0
> 
> 时间：2013-02-09T23:58:20.300
> 
> 标签：c, file-io

所以我正在做一些事情，要求我让用户在命令窗口中输入尽可能多的内容，包括新行，然后在他们按下 CTRL+D（EOF 字符）后，我应该能够打印出所有具有被键入。

我能够弄清楚如何在每个新行中做到这一点。

```
#include <stdio.h>

int main() 
{
  int C;

  C = getc(stdin);

  while(C != EOF)
  {
    putc(C, stdout);
    C = getc(stdin);
  }

  return 0;
} 
```

我也只能使用 getc 和 putc。最终，我想让用户输入尽可能多的内容，然后根据他们使用命令发送的标志，我将使用 getopt 修改他们给我的输入。

编辑：抱歉忘记添加我的问题。我想要做的是等待用户输入所有输入，然后将其全部打印出来，而不是逐行打印。我将如何去做这件事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T00:10:52.247

您将需要某种方式来缓冲用户的输入（因为他们可能会在点击`Ctrl`+之前输入整本小说`D`）。

下面是一个示例，说明您可以如何做到这一点（请注意，逐个字符读取非常慢，并且 using`printf`不会处理嵌入式 NUL，因此您可能希望在“真实”代码中使用`read`and`write`代替）：

```
size_t bufsize = 1024; // starting size
char *buf = malloc(bufsize);
off_t i = 0;
char c;

while((c = getc(stdin)) != EOF) {
    buf[i++] = c;
    if(i == bufsize) {
        bufsize *= 2; // double buffer size to avoid constant reallocation
        buf = realloc(buf, bufsize);
        if(!buf) {
            fprintf(stderr, "YOU TYPED TOO MUCH\n");
            exit(-1);
        }
    }
}

buf[i++] = 0;
printf("%s", buf); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:05:20.577

你看过使用 termios 吗？(termios.h) 您可以将标准输入设置为非规范和非回显模式，这将让您捕捉到每个按下的键，包括控制字符

[http://www.gnu.org/software/libc/manual/html_node/Noncanon-Example.html](http://www.gnu.org/software/libc/manual/html_node/Noncanon-Example.html)

# computer-vision - 加速强大的功能 SURF

> ID：14793055
> 
> 赞同：1
> 
> 时间：2013-02-09T23:59:22.537
> 
> 标签：computer-vision, surf

我正在实现 SURF 算法，我指的是 Chris Evan 的 OpenSURF 。

在 OpenSURF 和几乎所有其他 SURF 实现中，我看到当计算 Dxx 和 Dyy 时，使用了乘数 3（请看下面的代码）。SURF 论文或 OpenSURF 论文中没有提到他们这样做的原因。我做同样的事情没有问题，但我很想知道为什么要进行这种乘法。如果它对 Dxx 和 Dyy 计算很重要，那么为什么在任何地方都没有提到它？我错过了吗？有这方面经验的人可以给我一些解释吗？问候

```
Dxx and Dyy along with Dxy are used to calculate the Determinant
Dxx = BoxIntegral(img, r - l + 1, c - b, 2*l - 1, w)
          - BoxIntegral(img, r - l + 1, c - l / 2, 2*l - 1, l)*3; // Why 3 here?

Dyy = BoxIntegral(img, r - b, c - l + 1, w, 2*l - 1)
          - BoxIntegral(img, r - l / 2, c - l + 1, l, 2*l - 1)*3; // Why 3 here? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:41:55.573

*您应该参考 2008 年发布的[更新论文](http://www.cs.jhu.edu/~misha/ReadingSeminar/Papers/Bay08.pdf)，该论文提供了更多详细信息，特别是有关盒式过滤器叶片属性的信息。*

如果您参考第 3.2 节和图 2，您可以看到箱式过滤器的中央波瓣（黑色）的负因子为 ，`-2`而白色侧叶的正因子为`+1`。

使用上述公式`3`，由于积分图像，该因子仅与以下事实相关：

*   你总结`+1`了整个区域，
*   `-3`然后你只对中央叶执行减法（用）

这为您`-2`提供了中央叶 ( `1 - 3`) 的预期因子。

# sql - 如何在 COUNT 聚合中包含“零”/“0”结果？

> ID：14793057
> 
> 赞同：145
> 
> 时间：2013-02-09T23:59:37.727
> 
> 标签：sql, postgresql, aggregate-functions

我刚刚让自己有点被一些 SQL 卡住了。我认为我不能巧妙地表达这个问题 - 所以让我告诉你。

我有两张桌子，一张叫人，一张叫约会。我正在尝试返回一个人的约会次数（包括他们是否为零）。约会包含并且每个约会`person_id`都有一个。明智的做法也是`person_id`如此。`COUNT(person_id)`

查询：

```
SELECT person_id, COUNT(person_id) AS "number_of_appointments" 
FROM appointment 
GROUP BY person_id; 
```

将正确返回 person_id 的约会次数。但是，不会返回具有 0 个约会的人（显然因为他们不在该表中）。

调整语句以从 person 表中获取 person_id 给了我类似的东西：

```
SELECT person.person_id, COUNT(appointment.person_id) AS "number_of_appointments"
FROM appointment
JOIN person ON person.person_id = appointment.person_id
GROUP BY person.person_id; 
```

然而，这仍然只会返回一个有约会的 person_id，而不是我想要的返回一个有 0 个约会的人！

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-02-10T00:04:21.857

您需要为此进行外部联接（并且您需要使用人员作为“驱动”表）

```
SELECT person.person_id, COUNT(appointment.person_id) AS "number_of_appointments"
FROM person 
  LEFT JOIN appointment ON person.person_id = appointment.person_id
GROUP BY person.person_id; 
```

这样做的原因是外部（左）连接将为`NULL`那些没有预约的人返回。聚合函数`count()`不会计算`NULL`值，因此您将得到零。

如果您想了解有关外连接的更多信息，这里有一个很好的教程：[http ://sqlzoo.net/wiki/Using_Null](http://sqlzoo.net/wiki/Using_Null)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-10T00:03:44.603

您必须使用`LEFT JOIN`而不是`INNER JOIN`

```
SELECT person.person_id, COUNT(appointment.person_id) AS "number_of_appointments"
FROM person 
LEFT JOIN appointment ON person.person_id = appointment.person_id
GROUP BY person.person_id; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-20T13:30:11.080

如果您进行外连接（使用计数），然后将此结果用作子表，则可以按预期得到 0（感谢 nvl 函数）

前任：

```
select P.person_id, nvl(A.nb_apptmts, 0) from 
(SELECT person.person_id
FROM person) P
LEFT JOIN 
(select person_id, count(*) as nb_apptmts
from appointment 
group by person_id) A
ON P.person_id = A.person_id 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-11-09T10:55:52.813

USE join 使用 GROUP BY 在结果中获得 0 个计数。

只需“加入”就可以在 MS SQL 中进行内部联接，因此，进行左联接或右联接。

如果在 QUERY 中首先提到了包含主键的表，则使用 LEFT 连接，否则使用 RIGHT 连接。

例如：

```
select WARDNO,count(WARDCODE) from MAIPADH 
right join  MSWARDH on MSWARDH.WARDNO= MAIPADH.WARDCODE
group by WARDNO 
```

.

```
select WARDNO,count(WARDCODE) from MSWARDH
left join  MAIPADH on MSWARDH.WARDNO= MAIPADH.WARDCODE group by WARDNO 
```

从具有主键的表中分组，并从另一个具有实际条目/详细信息的表中计数。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-28T12:21:24.663

要对原始查询进行更少的更改，您可以将联接变成`RIGHT`联接

```
SELECT person.person_id, COUNT(appointment.person_id) AS "number_of_appointments"
FROM appointment
RIGHT JOIN person ON person.person_id = appointment.person_id
GROUP BY person.person_id; 
```

这只是建立在所选答案的基础上，但由于外连接是`RIGHT`方向，因此只需要添加一个单词并且更改较少。- 只要记住它就在那里，有时可以使查询更具可读性并且需要更少的重建。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-10-10T02:19:09.697

LEFT JOIN 的问题是，如果没有约会，它仍然会返回一个空行，当按 COUNT 聚合时会变为 1，并且看起来这个人有一个约会，而实际上他们没有约会。我认为这将给出正确的结果：

```
SELECT person.person_id,
(SELECT COUNT(*) FROM appointment WHERE person.person_id = appointment.person_id) AS 'Appointments'
FROM person; 
```

# git - 如何将 IntelliJ 与 Subversion、Git 和“git-svn”一起使用

> ID：14793063
> 
> 赞同：2
> 
> 时间：2013-02-10T00:00:43.903
> 
> 标签：git, intellij-idea, git-svn

如何将 IntelliJ 与 Subversion、Git 和“git-svn”一起使用。

我的公司正在使用 subversion 作为主存储库，但我喜欢使用 git，所以我使用命令行并发出以下命令

git-svn clone -s [http://example.com/my_subversion_repo](http://example.com/my_subversion_repo) local_dir

但最后我必须发出一个 git-svn dcommit 这可以从 IntelliJ 内部完成吗

git-svn dcommit

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T15:40:25.723

您可以将内置的 IntelliJ Git 支持与[SubGit](http://subgit.com/)一起使用。

有不同的选择：

1.  如果您对 Subversion 存储库具有管理员访问权限，则可以将 SubGit 1.0 安装到此存储库中并启用对您的 SVN 存储库的 Git 访问权限。通过这种方式，您可以使用创建的 Git 存储库，SubGit 会将所有更改与 SVN 对应项同步。

2.  您还可以使用 SubGit 2.0（目前是 EAP 阶段）并将本地 Git 存储库与远程 SVN 存储库同步。因此，您可以继续使用支持 SubGit 的本地 Git 存储库，并且所有更改都将复制到 SVN 存储库。

有关更多信息，请参阅[SubGit 文档](http://subgit.com/documentation/)并[与 git-svn 进行比较](http://subgit.com/documentation/gitsvn.html)。

免责声明：我是 SubGit 开发人员之一；SubGit 是一个带有一些免费选项的商业软件；SubGit 2.0 EAP 版本可以免费使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T15:43:52.457

我用 IntelliJ 确认它现在不能完成..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-04T16:43:21.633

我使用 PyCharm（基于 IntelliJ）并通过在“外部工具”下设置自定义命令来解决此问题，如下所示：

```
Name:        dcommit
Program:     git
Arguments:   svn dcommit
Working Dir: $ProjectFileDir$ 
```

然后，您可以通过以下方式之一进行 dcommit：

*   选择`Tools > External Tools > dcommit`菜单选项
*   使用`Ctrl+Shift+A`（查找操作...）弹出窗口执行“dcommit”
*   在您的键盘映射中分配键盘快捷键以更轻松地执行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-06T17:35:29.257

它可能在短时间内成为现实：[https ://github.com/JetBrains/intellij-community/pull/725](https://github.com/JetBrains/intellij-community/pull/725)

仍然需要从命令行克隆，但是在合并之后，将实现其他功能（dcommit、clone、tag）

# sas - 使用文件名语句导入 CSV 文档

> ID：14793066
> 
> 赞同：0
> 
> 时间：2013-02-09T22:56:03.813
> 
> 标签：sas

我想通过在 SAS 中使用`filename`语句来读取 CSV 文档，但是当我使用`input`语句输入变量名时，Excel 已经将变量名作为第一行包含了——这会出错。我该如何处理这种情况？

```
filename outdata "C:\Users\Xiang\Desktop\crime2005.csv";

data crime;
    infile outdata dlm="," dsd ;
run;

proc means mean std maxdec=1 ;
run; 

proc print;
run; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T05:50:22.547

首先 - 你说“通过文件名声明”会让事情有点混乱。这是通过数据步。文件名语句恰好是其中一个相对较小的组成部分。

其次，让我们把它变成正确的 SAS 缩进，这样我们就可以看到发生了什么：

```
filename outdata "C:\Users\Xiang\Desktop\crime2005.csv";

data crime;
 infile outdata dlm="," dsd ;
 input [your-variable-list];
run;

proc means data=crime mean std maxdec=1 ;
run;

proc print data=crime;
run; 
```

数据步骤和 Procs 以 run 结尾（以 quit 结尾的 Procs 除外）。其中每一个都是一个单独的步骤，因此始终包括运行。始终包含 data= ，除非您使用一些花哨的编程技巧。“数据”始终位于第一列，不缩进 - 数据步骤是主语句，而不是文件名。

这些使您的代码可读，并保护您免受错误。即使您独自工作，可读的代码也很重要；这意味着您了解五年前，五年后您所写的内容。

您最初的问题-如何避免标题行中的错误？

```
filename outdata "C:\Users\Xiang\Desktop\crime2005.csv";

data crime;
 infile outdata dlm="," dsd firstobs=2;
 input [your-variable-list];
run; 
```

你去吧。FIRSTOBS=2 告诉 SAS 跳过第一行 [即标题行]。

您可能会尝试的一件事是 PROC IMPORT。带有 DBMS=CSV 的 PROC IMPORT 将为您做一些非常方便的事情 - 它会在日志中放入一个完整的数据步骤，其中包含所有代码来自己读取文件。因此，虽然我实际上并不推荐 PROC IMPORT 用于生产代码[因为它经常在字符/数字格式和长度等方面做出糟糕的决定]，但了解如何开始使用输入语句非常有帮助。

```
proc import file=outdata out=crime dbms=csv replace;
run; 
```

然后查看您的日志，并复制该代码（删除行号）；现在您可以随心所欲地对其进行修改。

# ocaml - 提高简单函数的效率

> ID：14793083
> 
> 赞同：1
> 
> 时间：2013-02-10T00:03:15.680
> 
> 标签：ocaml

这是我的“转换”方法的签名：

```
let rec transform (f: -> 'a -> 'b) (l: 'a list): 'b list =
begin match l with
| [] -> []
| hd :: rest -> (f hd) :: (transform f rest)
end 
```

这个想法是我想找到一个核苷酸的补体。G与C互补，A与T互补。

这就是我实现函数的方式，但我想知道是否有比一堆嵌套 if 语句更有效的方法。

```
type nucleotide = G | C | A | T
type helix = nucleotide list

let complementary_helix_f: nucleotide -> nucleotide =
fun (n: nucleotide) -> if n = G then C
                       else if n = C then G
                       else if n = A then T
                       else A 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T00:09:41.040

OCaml 为 生成好的代码`match`，因此您可以尝试以下操作：

```
let complementary_helix_f = function
| G -> C
| C -> G
| A -> T
| T -> A 
```

它也（也许）更容易阅读。

如果你真的需要担心速度，你应该分析你的代码（在你让整个事情工作之后）。

# android - 如果在android中收到短信时没有触发语句

> ID：14793085
> 
> 赞同：0
> 
> 时间：2013-02-10T00:03:27.930
> 
> 标签：android, if-statement, sms

如果短信来自特定号码，我有一个 if 语句应该触发，但它永远不会触发。这是我的 SMSReceiver.java：

```
public String SMSMessage;
public String incomingNumber;

public void onReceive(Context context, Intent intent) 
{
    if (intent.getAction().equals(SMS_RECEIVED)) 
    {
        abortBroadcast();
        Bundle bundle = intent.getExtras();
        if (bundle != null) 
        {
            Object[] pdus = (Object[])bundle.get("pdus");
            final SmsMessage[] messages = new SmsMessage[pdus.length];
            for (int i = 0; i < pdus.length; i++)
            {
                messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
            }
            SMSMessage = messages[0].getMessageBody();
            incomingNumber = messages[0].getOriginatingAddress();
            MainActivity.updatePowerUsageTitle(SMSMessage);
            MainActivity.updatePowerUsageSummary(incomingNumber);
            if (incomingNumber == "XXXXXXXXX" || incomingNumber == "XXXXXXXXXX")
            {  
                Toast.makeText(context, messages[0].getMessageBody(), Toast.LENGTH_SHORT).show();
                if (SMSMessage.contains("Turn"))
                {
                    //TODO: Set toast for incoming message
                    Toast.makeText(context, messages[0].getMessageBody(), Toast.LENGTH_SHORT).show();
                }
                else if (SMSMessage.contains("ref"))
                {
                    //TODO: Set refresh for switches
                }
                else if (SMSMessage.contains("power"))
                {
                    //Refresh power stats
                    int END = SMSMessage.length();
                    SMSMessage = SMSMessage.substring(6 , END);
                    MainActivity.updatePowerUsageTitle(SMSMessage);
                }
            }
        }
    }
} 
```

这是重要的部分：

```
incomingNumber = messages[0].getOriginatingAddress();
if (incomingNumber == "XXXXXXXXX" || incomingNumber == "XXXXXXXXXX")
{
Toast.makeText(context, messages[0].getMessageBody(), Toast.LENGTH_SHORT).show();
} 
```

很明显，我没有把电话号码放在这里，但我知道号码是正确的。关于为什么 if 语句没有触发的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:07:21.960

尝试比较你`String`的 s ，`.equals()`因为这是`String`在 Java 中比较 s 的正确方法。`==`将改为比较参考。[这个 SO question](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)解释了差异。

```
if ("XXXXXXXXX".equals(incomingNumber) || "XYZ".equals(incomingNumber)) 
```

和往常一样，确保您在清单中拥有适当的权限。此外，如果这仍然不起作用，请在 的根目录下放置一个 print 语句，以`onReceive()`检查该方法是否被调用*。*

# c++ - 为什么 std::deque 不是在索引 0 之前保留内存的向量？

> ID：14793086
> 
> 赞同：5
> 
> 时间：2013-02-10T00:03:31.613
> 
> 标签：c++, vector, stl, deque

据我了解，deque 背后的动机是提供一个高效的随机访问容器`push_front`。

与 deque 相比，vector 的普遍优势包括更快的遍历和`at()`，但主要是它的 C 兼容性，因为它保证了连续的内存。双端队列没有，因为它是内存块的集合，每个内存块都包含多个值。

我很困惑。为什么 deque 不像向量那样构建，但是`0`除了在 index 之后保留的内存之外，还保留了在 index 之前的内存`size-1`？这将保证连续的内存，提高效率`push_front`，甚至在取消引用迭代器时避免额外的间接。

为了在插入过程中最小化移位，要移位的包含值将取决于插入点。如果在索引`n`之前插入，则将`size()/2`值向上移动`n`。否则右移 之后的值`n`。

我错过了什么是如此重要，以至于 deque 是值数组的集合而不是一个大数组？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T00:09:37.583

[根据 Wikipedia](http://en.wikipedia.org/wiki/Deque#Implementations)，您所描述的确实是一种可能的实现，至少在一般情况下是这样。

但是，C++ 标准强加了一些要求，基本上禁止将其作为 ; 的实现`std::deque`。[deque.modifiers] 状态：

> 在双端队列的任一端插入 ... 对双端队列元素引用的有效性没有影响。

（感谢@BenjaminLindley！）

# ajax - Perl - 将输入中的变量分成两个用于url

> ID：14793092
> 
> 赞同：1
> 
> 时间：2013-02-10T00:04:43.583
> 
> 标签：ajax, json, perl, web-scraping, mozrepl

我正在从 .txt 加载数据以进行抓取。但是，URL 要求我分解该变量并对其执行 +/- 2。例如，如果值为 2342，我需要为 URL 创建 2340 和 2344。

我猜测如何分解它：

```
 $args{birth_year} = ($args{birth_year} - 2) . '-' . ($args{birth_year} + 2); 
```

然后如何将其放入 URL 中？

这是代码的相关部分：

```
 use strict;
  use warnings;
  use WWW::Mechanize::Firefox;
  use Data::Dumper;
  use LWP::UserAgent;
   use JSON;
  use CGI qw/escape/;
  use HTML::DOM;

  open(my $l, 'locations2.txt') or die "Can't open locations: $!";

 while (my $line = <$l>) {
    chomp $line;
     my %args;
     @args{qw/givenname surname birth_place birth_year gender race/} = split /,/, $line;
     $args{birth_year} = ($args{birth_year} - 2) . '-' . ($args{birth_year} + 2);
      my $mech = WWW::Mechanize::Firefox->new(create => 1, activate => 1);
     $mech->get("https://familysearch.org/search/collection/index#count=20&query=%2Bgivenname%3A$args{givenname}20%2Bsurname%3A$args{surname}20%2Bbirth_place%3A$args{birth_place}%20%2Bbirth_year%3A1910-1914~%20%2Bgender%3A$args{gender}20%2Brace%3A$args{race}&collection_id=2000219"); 
```

### 例如

*输入是：*

```
Benjamin,Schuvlein,Germany,1912,M,White 
```

*所需的网址是：*

[https://familysearch.org/search/collection/index#count=20&query=%2Bgivenname%3ABenjamin%20%2Bsurname%3ASchuvlein%20%2Bbirth_place%3AGermany%20%2Bbirth_year%3A1910-1914~%20%2Bgender%3AM% 20%2Brace%3AWhite&collection_id=2000219](https://familysearch.org/search/collection/index#count=20&query=%2Bgivenname%3ABenjamin%20%2Bsurname%3ASchuvlein%20%2Bbirth_place%3AGermany%20%2Bbirth_year%3A1910-1914~%20%2Bgender%3AM%20%2Brace%3AWhite&collection_id=2000219)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T02:24:09.837

为什么你不能改变这一行：

```
$mech->get("https://familysearch.org/search/collection/index#count=20&query=%2Bgivenname%3A$args{givenname}20%2Bsurname%3A$args{surname}20%2Bbirth_place%3A$args{birth_place}%20%2Bbirth_year%3A1910-1914~%20%2Bgender%3A$args{gender}20%2Brace%3A$args{race}&collection_id=2000219"); 
```

对此：

```
$mech->get("https://familysearch.org/search/collection/index#count=20&query=%2Bgivenname%3A$args{givenname}20%2Bsurname%3A$args{surname}20%2Bbirth_place%3A$args{birth_place}%20%2Bbirth_year%3A$args(birth_year)~%20%2Bgender%3A$args{gender}20%2Brace%3A$args{race}&collection_id=2000219"); 
```

**注意：**我改变了这一点：

```
%3A1910-1914~%20 
```

对此：

```
%3A$arg(birth_year)~%20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:23:06.647

One way to do it:

```
file content:
link1
link2
...
linkn

use Data::Dumper;
use strict;
use warnings;

local $/=undef;
open(FILE,'<',$filename) or die $filename;
my $i = 1;
while (my $line = <FILE>){
  chomp($line);
  print "line: $line\n";
  my $tempfile = './$i.html';$i++;
  $mech->get( $line, ':content_file' => $tempfile, synchronize => 1 );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T01:43:43.523

这个答案没有考虑输入中的数据是否需要进行 URL 编码，即如果姓氏是“von Schtupp”，它需要变成“von%20Schtupp”

我没有对此进行测试，因此可能存在拼写错误或小错误。尽管如此，这是我会使用的方法。我的回答还假设您不在乎搜索条件的出现顺序。

```
my %query_params = (
    givenname => $args{givenname},
    surname   => $args{surname},
    birth_place => $args{birth_place},
    birth_year => sprintf("%d-%d", $args{birth_year} - 2, $args{birth_year} + 2),
    gender     => $args{gender},
    race       => $args{race},
);
my $query_parameter = join '%20',
                      map { "%2B$_%3A$query_params{$_}" }
                      keys %query_params;
my $url = "https//familysearch.org/search/collection/index#count=20&query=" .
          $query_parameter . "&collection_id=2000219"; 
```

# git - 如何让 OSX Git CLI 与 GitHub 配合使用？

> ID：14793097
> 
> 赞同：0
> 
> 时间：2013-02-10T00:05:33.917
> 
> 标签：git, version-control, github

我刚刚在 OSX 10.8.2 上安装了 Git，我正在尝试学习如何使用它。

我为 OSX 安装了 Git (git-1.8.1.2-intel-universal-snow-leopard.dmg) 和 GitHub（它看起来像是 Git 的一个不错的 GUI）。我还安装了 Git CLI。但是我使用 CLI 添加、初始化和提交的本地存储库没有显示在 OSX 的 GitHub 中。

我怎样才能让它们同步？

使用 CLI，cd 到一个包含一堆文本文件的文件夹中，然后执行以下操作：

```
 git init
    git add *
    git commit -m "added new files" 
```

但是在我的 GitHub for OSX 客户端中，即使在我刷新之后，我也看不到我的新本地存储库。

我没有推送到远程 GitHub 存储库，只使用本地存储库。

我检查了我的 ~/.gitconfig 文件，那里的用户名和电子邮件地址似乎与我在 GitHub 中为 OSX Preferences/login 输入的一致。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:45:05.913

GitHub for Mac 客户端只会自动显示推送到 GitHub.com 的存储库。对于仅“本地”的存储库，您需要将文件夹从 Finder 拖放到 GitHub for Mac，如下所述：http: [//mac.github.com/help.html#faq-add-repositories](http://mac.github.com/help.html#faq-add-repositories)

# python - 如何使用 Flask-Security 注册视图？

> ID：14793098
> 
> 赞同：18
> 
> 时间：2013-02-10T00:05:37.173
> 
> 标签：python, flask, flask-extensions, flask-security

有人使用`Flask-Security`扩展名进行身份验证吗？如何让注册视图正常工作？

[http://packages.python.org/Flask-Security/customizing.html](http://packages.python.org/Flask-Security/customizing.html)

我指的是上面的链接。

```
 @app.route('/register', methods=['GET'])
 def register():
     return render_template('security/register_user.html') 
```

我不想扩展默认类，我只想在我的站点布局中包装默认注册视图，所以我这样做了。

```
{% extends "layout.html" %}
{% block title %}upload{% endblock %}
{% block body %}

{% from "security/_macros.html" import render_field_with_errors, render_field %}
{% include "security/_messages.html" %}
<h1>Register</h1>
<form action="{{ url_for_security('register') }}" method="POST" name="register_user_form">
{{ register_user_form.hidden_tag() }}
{{ render_field_with_errors(register_user_form.email) }}
{{ render_field_with_errors(register_user_form.password) }}
{% if register_user_form.password_confirm %}
   {{ render_field_with_errors(register_user_form.password_confirm) }}
{% endif %}
{{ render_field(register_user_form.submit) }}
</form>
{% include "security/_menu.html" %}

{% endblock %} 
```

我收到以下错误？

```
werkzeug.routing.BuildError
BuildError: ('security.register', {}, None) 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-24T07:07:53.463

您不需要创建视图。Flask-Security 中包含一个默认值。你只需要在你的烧瓶应用配置中启用它：

```
app = Flask(__name__)
app.config['SECURITY_REGISTERABLE'] = True 
```

有了这个，'/register' 路由应该可以工作了。
如果需要，还有另一个配置值可以更改 URL：

```
app.config['SECURITY_REGISTER_URL'] = '/create_account' 
```

其他 Flask-Security 配置信息可以在这里找到：http: [//pythonhosted.org/Flask-Security/configuration.html](http://pythonhosted.org/Flask-Security/configuration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:51:42.143

我并没有真正使用过 Flask-Security，但 Builderror 指的是烧瓶无法将 security.register 视图绑定到 URL 的事实。安全是蓝图的名称。所以我建议你尝试如下调用视图。使用 security.route 代替 app.route。

```
@security.route('/register', methods=['GET'])
def register():
    return render_template('security/register_user.html') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-26T11:26:44.617

@dcr 的回答很有帮助，但我想稍微澄清一下，并明确一些仅在此处和文档中隐含的内容。

Flask-Security 带有默认视图（也称为路由）。其中许多可以使用`-ABLE`配置变量启用，如下所示：

```
app.config["SECURITY_REGISTERABLE"] = True 
```

您可以选择：启用并使用默认视图，**或者**将其禁用并使用您自己的视图。*启用视图后，您将无法覆盖它。*当您考虑它时，这是有道理的。如果您只是打算使用自己的实现，为什么要启用视图？烧瓶应该如何知道使用哪条路线？另一方面：*如果视图被禁用，它的端点将不起作用。*

如果您使用的是默认视图，那么您可以使用 eg `url_for('security.register')`（或`url_for_security('register')`旧样式）为其创建 URL。Flask-Security 还将在其中查找[模板](https://pythonhosted.org/Flask-Security/customizing.html)`security/TEMPLATE_NAME.html`并使用它来显示表单（如果存在）。这允许您进行视觉更改并根据需要将表单包装在 UI 中。

所以，现在应该清楚 Werkzeug 抱怨的原因了。尝试`flask routes`在命令行上运行，并查看输出。你会看到这样的东西：

```
(venv) ⋊&gt; ~/flaskapp on master ⨯ flask routes
Endpoint                    Methods    Rule
--------------------------  ---------  ------------------------------------------
index                       GET        /
register                    GET        /register
security.login              GET, POST  /login
security.logout             GET        /logout
[...] 
```

请注意，`security.register`端点不存在，因为您尚未打开`REGISTERABLE`. 所以`url_for('security.register')`会失败。

您的视图不做任何自定义，它只是显示模板。这就是@dcr 正确地说您不需要创建视图的原因。让 Flask-Security 通过完全删除您的`/register`路线并打开`REGISTERABLE`. 因为您已正确命名`register_user.html`模板并将其放置在 中`templates/security/`，Flask-Security 将使用它以默认形式（或您在安全对象被'ed时提供的任何[形式）显示页面。](https://pythonhosted.org/Flask-Security/customizing.html#forms)`init`

然而！如果您拥有的代码只是一个占位符，并且您需要在显示之前或当用户单击提交时以某种方式操作表单或页面，那么您将需要自己的视图。在这种情况下，您不应该*启用*，`REGISTERABLE`但这也意味着`security.register`您将无法在`url_for()`. 相反，您将只使用`'register'`（或者`'{bp_name}.register'`如果您的注册码在蓝图中）。此外，您不需要特别为您的页面命名，因为您不依赖于其他人的视图实现。你可以把它放在你的模板文件夹中并调用它`register.html`。无论您选择什么路径，您都需要将其传递给`render_template()`您的视图方法。

感谢[@drahoja9](https://stackoverflow.com/users/9930799/drahoja9)在[这个答案](https://stackoverflow.com/a/50864650/1749551)中终于让我明白了这一点。

# python - Pygame真的很慢

> ID：14793107
> 
> 赞同：1
> 
> 时间：2013-02-10T00:07:06.743
> 
> 标签：python, pygame, lag

我在 pygame 中有一个程序。我有很多不同的部分，其中两个如下所示。在第二个中，游戏以正常的速度进行，但在第一个中，它非常滞后，即使它具有相同的滴答速度。有什么我想念的吗？顺便说一句，每个游戏循环周期中只执行其中一个。请注意，以 结尾的行在`#`两者之间重复。

```
for event in pygame.event.get():#
    if event.type==pygame.QUIT:#
        pygame.quit()#
        sys.exit()#
    if event.type==pygame.KEYDOWN:#
        if event.key==pygame.K_ESCAPE:#
            pygame.quit()#
            sys.exit()#
for ball in balls:#
    ball.update(winrect, walls)#
window.fill(WHITE)#
for box in boxes:#
    pygame.draw.rect(window, box[1], box[0])#
for wall in walls:#
    if wall.orientation==0:#
        pygame.draw.rect(window, BLACK, (wall.left, wall.top, wall.ttopleft, wall.height))#
        pygame.draw.rect(window, BLACK, (wall.bbottomright, wall.top, wall.right-wall.bbottomright, wall.height))#
    else:#
        pygame.draw.rect(window, BLACK, (wall.left, wall.top, wall.width, wall.ttopleft))#
        pygame.draw.rect(window, BLACK, (wall.left, wall.bbottomright, wall.width, wall.bottom-wall.holesize))#
for ball in balls:#
    pygame.draw.circle(window, ball.color, ball.center, round(ball.width/2))#
    pygame.draw.circle(window, BLACK, ball.center, round(ball.width/2), 2)#
window.blit(coverso, winrect)
window.blit(texts['complete'][0], texts['complete'][1])
window.blit(stuff[0], stuff[1])
pygame.display.update()#
pygame.time.Clock().tick(100)# 
```

第二个：

```
 #event loop
    for event in pygame.event.get():#
        if event.type==pygame.QUIT:#
            pygame.quit()#
            sys.exit()#
        if event.type==pygame.KEYDOWN:#
            if event.key==pygame.K_ESCAPE:#
                mode='pause'#
    #updates
    updates=[]
    for wall in walls:
        wall.update()
    for ball in balls:#
        updates.append(ball.update(winrect, walls))#similar
    #Seeing if won
    won=True
    for update in updates:
        if not update:
            won=False
    if won:
        if levels[loadinglevel][4]==0:
            levels[loadinglevel][4]=1
        levels[loadinglevel-1][4]=2
        mode='complete'
        stuff=getcomplete(loadinglevel, coins, bigfont, texts['complete'][1].bottom+100, winrect.centerx)
        for wall in walls:
            wall.bbottomright=100000
            wall.ttopleft=90000
        coins+=loadinglevel
    #blitting
    window.fill(WHITE)#
    for box in boxes:#
        pygame.draw.rect(window, box[1], box[0])#
    for wall in walls:#
        if wall.orientation==0:#
            pygame.draw.rect(window, BLACK, (wall.left, wall.top, wall.ttopleft, wall.height))#
            pygame.draw.rect(window, BLACK, (wall.bbottomright, wall.top, wall.right-wall.bbottomright, wall.height))#
        else:#
            pygame.draw.rect(window, BLACK, (wall.left, wall.top, wall.width, wall.ttopleft))#
            pygame.draw.rect(window, BLACK, (wall.left, wall.bbottomright, wall.width, wall.bottom-wall.holesize))#
    for ball in balls:#
        pygame.draw.circle(window, ball.color, ball.center, round(ball.width/2))#
        pygame.draw.circle(window, BLACK, ball.center, round(ball.width/2), 2)#
    pygame.display.update()#
    pygame.time.Clock().tick(100)#
    if mode=='pause':
        window.blit(coverso, winrect) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:59:53.657

第一部分中唯一不重复的行是：

```
window.blit(coverso, winrect)
window.blit(texts['complete'][0], texts['complete'][1])
window.blit(stuff[0], stuff[1]) 
```

如果您**不使用 alpha**，建议您在创建表面时使用**surface.convert() 。**

如果您**使用 alpha**，则可以**使用颜色键**，因为它们比 alpha 表面**要快得多**。

为了加快计算速度，我建议使用**Psyco**。

[http://www.psyco.sourceforge.net/](http://www.psyco.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-05T19:36:30.927

除了 alexpinho98 所说的，您不必使用带有 alpha 表面的颜色键。您可以改用 surface.convert_alpha() 。

使用以下代码可以节省一些时间，并且不必重复输入 .convert_alpha() ：

```
def loadify(imgname):
    return pygame.image.load(imagename).convert_alpha() 
```

# php - 排列数组中的最后一个值并将排名数字循环到先前创建的数组中？

> ID：14793111
> 
> 赞同：0
> 
> 时间：2013-02-10T00:08:17.227
> 
> 标签：php, multidimensional-array, ranking

我需要在多维数组中取每个数组的最后一个值，将它们相互比较，并将排名值放在先前创建的数组的末尾。

我的PHP：

```
//Arrays
$rsIdeas_array = array();
$total_rank_array = array();

//Get Data
//MySQL Select Queries Here
//loop bizideas into array
do {
//Calculate variables needed
$search_rank = round(($row_rsIdeas['monthlysearches'] / $row_rsMaxSearches['monthlysearches'] * 9) + 1, 1, PHP_ROUND_HALF_EVEN);
$competition_rank = round(10 - (($row_rsIdeas['advcomp'] / ($row_rsMaxCompetition['advcomp']) * 9)), 1, PHP_ROUND_HALF_EVEN);
$search_competition_ease = ($search_rank + $competition_rank + $row_rsIdeas['startease']);
$row_rsIdeas['search_rank'] = $search_rank;
$row_rsIdeas['competition_rank'] = $competition_rank;
$row_rsIdeas['search_competition_ease'] = $search_competition_ease;

$row_rsIdeas = array(
  'ideaID' => $row_rsIdeas['ideaID'],
  'userID' => $row_rsIdeas['userID'],
  'bizidea' => $row_rsIdeas['bizidea'],
  'bizexplained' => $row_rsIdeas['bizexplained'],
  'bizmodel' => $row_rsIdeas['bizmodel'],
  'repkeyword' => $row_rsIdeas['repkeyword'],
  'monthlysearches' => $row_rsIdeas['monthlysearches'],
  'search_rank' => $row_rsIdeas['search_rank'],
  'advcomp' => $row_rsIdeas['advcomp'],
  'competition_rank' => $row_rsIdeas['competition_rank'],
  'search_competition_ease' => $row_rsIdeas['search_competition_ease'],
);
array_push($rsIdeas_array, $row_rsIdeas);
array_push($total_rank_array, $search_competition_ease);
} while ($row_rsIdeas = mysql_fetch_assoc($rsIdeas)); 
```

这产生

```
Array
(
[0] => Array
    (
        [ideaID] => 1
        [userID] => 1
        [bizidea] => Business Idea 1
        [bizexplained] => Business Idea 1 Explanation
        [bizmodel] => Utility
        [repkeyword] => Business Idea 1 Keyword
        [monthlysearches] => 33100
        [search_rank] => 1
        [advcomp] => 0.95
        [competition_rank] => 1.1
        [search_competition_ease] => 8.1 //Value to Rank From
    )

[1] => Array
    (
        [ideaID] => 2
        [userID] => 1
        [bizidea] => Business Idea 2
        [bizexplained] => Business Idea 2 Explained
        [bizmodel] => Service
        [repkeyword] => Business 2 Keyword
        [monthlysearches] => 6600
        [search_rank] => 1
        [advcomp] => 0.93
        [competition_rank] => 1.3
        [search_competition_ease] => 10.3 //Value to Rank From
    )
) 
```

我有一个产生排名的部分：

```
arsort($total_rank_array); 
$rank = 1;
foreach($total_rank_array as $ideaId => $value) {
print('Rank: ' . $rank . '<br />Value: ' . $value . '<br />');
$rank++; 
```

哪个创造（数字越高，排名越好）：

```
Rank: 1
Value: 10.3
Rank: 2
Value: 8.1 
```

我需要将这些值放在正确数组的末尾，而不需要重新排列数组的顺序。这是我想要的完整数组的示例。

```
Array
(
[0] => Array
    (
        [ideaID] => 1
        [userID] => 1
        [bizidea] => Business Idea 1
        [bizexplained] => Business Idea 1 Explanation
        [bizmodel] => Utility
        [repkeyword] => Business Idea 1 Keyword
        [monthlysearches] => 33100
        [search_rank] => 1
        [advcomp] => 0.95
        [competition_rank] => 1.1
        [search_competition_ease] => 8.1
        [total_rank] => 2 //Here is where I need the additional value
    )

[1] => Array
    (
        [ideaID] => 2
        [userID] => 1
        [bizidea] => Business Idea 2
        [bizexplained] => Business Idea 2 Explained
        [bizmodel] => Service
        [repkeyword] => Business 2 Keyword
        [monthlysearches] => 6600
        [search_rank] => 1
        [advcomp] => 0.93
        [competition_rank] => 1.3
        [search_competition_ease] => 10.3
        [total_rank] => 1 //Here is where I need the additional value
    )
) 
```

我怎样才能做到这一点？我为包含这么多代码而道歉，我只是想确保我完全被理解。

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:43:31.820

如果我理解你的代码，这应该有效：

```
arsort($total_rank_array);
foreach (array_keys($total_rank_array) as $i => $key)
{
    $rsIdeas_array[$key]['total_rank'] = $i+1;
} 
```

# opengl - 在opengl 3+中快速获得许多2d纹理正方形（四边形）

> ID：14793112
> 
> 赞同：0
> 
> 时间：2013-02-10T00:08:43.713
> 
> 标签：opengl, 2d

对于 2d 游戏，我需要每帧绘制许多纹理四边形。它们不共享任何顶点，应该被认为具有每帧都会改变的随机位置。因为我使用的是 opengl 3+，所以我不能再使用四边形（它已被删除）。我可以改为使用 2 个三角形来制作每个四边形，但这会产生大量冗余的重用数据，每帧都传递给 GPU。所以我想知道实现我的目标的最佳方法是什么？

我可以创建一个几何着色器，然后简单地将四边形左上角及其宽度、高度和纹理位置传递给它。然后着色器可以创建 2 个三角形。但是我认为这会很慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:17:51.400

您有两种可能的方法：

*   使用三列表（不是条带）。尝试使用转换会很慢，除非你有*很多*方块，否则数据不会那么重。如果您担心，可以优化顶点格式并将其降低到每个 8 或 16 个字节；请记住，PCIe 2.0 x16 是每秒*千兆字节的带宽，对于粒子系统等来说，几兆是合理的。*根据您的工作量，指数可能会有所帮助。
*   使用一个或一小批三角形，索引并在缓冲区中，并使用着色器重新定位它们。这利用了批处理（使用一组坐标绘制 100 个正方形，更新着色器中的坐标，再次绘制）并节省内存，但您必须担心深度（在着色器中处理它）和其他一些细节。这不是有史以来最糟糕的事情，我不能肯定地说它更好与否。

您可能不应该使用几何着色器。它们通常并不意味着每一帧都运行，尽管它们当然可以。您会获得一些好处，尤其是使用的内存带宽非常少，但是硬件要求要高得多，API 也要严格得多。如果您的数据来自可以在那里优化的 CPU 计算，那么您最终可能会获得更好的性能；充其量您必须转换计算或将数据下载到视频内存中。

您绝对不想从几何着色器计算两个三角形，除非您的意思是每平方两个。着色器的主要好处是并行性，因此您需要遍历尽可能多的正方形并大批量绘制它们。批处理几乎总是会给您带来性能提升，并且有多种方法可以做到这一点。更改 API 中的转换之类的事情非常缓慢，最好避免（如果您使用的是 3.0+，可能不是什么大问题，但它曾经是一个大问题）。

# r - 局部变量的使用

> ID：14793113
> 
> 赞同：9
> 
> 时间：2013-02-10T00:08:45.447
> 
> 标签：r, scope

**问题：**

如何在 r 代码的范围内定义局部变量。

**例子：**

在 C++ 中，以下示例定义了一个范围，并且在该范围内声明的变量在外部代码中未定义。

```
{
     vector V1 = getVector(1);
     vector V1(= getVector(2);
     double P = inner_product(V1, V2);
     print(P);
}
// the variable V1, V2, P are undefined here! 
```

*注意：此代码仅用于说明该想法。*

这种做法具有以下优点：

*   保持全局命名空间干净；
*   简化代码；
*   消除歧义，特别是在没有初始化的情况下重新使用变量时。

在 R 中，在我看来，这个概念只存在于函数定义中。因此，为了重现前面的示例代码，我需要执行以下操作：

```
dummy <- function( ) {
     V1 = c(1,2,3);
     V2 = c(1,2,3);
     P = inner_product(V1, V2);
     print(P);
}
dummy( );
# the variable V1, V2, P are undefined here! 
```

或者，以一种更隐晦的方式，声明一个匿名函数来阻止函数调用：

```
(function() { 
     V1 = c(1,2,3);
     V2 = c(1,2,3);
     P = inner_product(V1, V2);
     print(P);
})()
# the variable V1, V2, P are undefined here! 
```

**问题**

有没有更优雅的方法来创建局部变量？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-10T00:35:20.913

Use `local`. Using your example:

```
local({ 
     V1 = c(1,2,3);
     V2 = c(1,2,3);
     P = inner_product(V1, V2);
     print(P);
})
# the variable V1, V2, P are undefined here! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:26:46.053

You can create a new `environment` where your variable can be defined; this is how the local scope within a function is defined.

You can read more about this [here](http://cran.r-project.org/doc/contrib/Fox-Companion/appendix-scope.pdf)

check the help for `environment` as well i.e. type in your R console `?environment`

# wcf - 什么时候在 WCF 中使用“允许”作为 SessionMode？

> ID：14793114
> 
> 赞同：1
> 
> 时间：2013-02-10T00:08:48.537
> 
> 标签：wcf, wcf-sessions

你能给我一个在 WCF 服务合同中使用“允许”作为 SessionMode 值的场景吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:34:17.020

当您希望同时支持支持会话的绑定（例如，富客户端）和不支持会话的绑定（例如，基于浏览器的客户端）时。如果有会话，您只需使用会话，如果没有，您将使用非会话依赖的代码路径，或者您将使用另一种机制来存储会话信息（例如 HTTP cookie，例如）。

# php - 如果数组为空，则更改数组的结果

> ID：14793116
> 
> 赞同：0
> 
> 时间：2013-02-10T00:09:12.060
> 
> 标签：php, arrays, facebook-opengraph, fetch

我正在使用 OpenGraph 来解析来自网站的一些元属性数据，如下所示：

```
$v = 'http://url.com/';
$graph = OpenGraph::fetch($v);
$image = $graph->image . "\n";
$title = $graph->title . "\n";
$site_name = $graph->site_name . "\n";
$description = $graph->description . "\n"; 
```

但是，有些网站上没有元属性 og:image。所以我的 $image 数组变成了一个空数组，结果是这样的：

```
<img src="" /> 
```

如果 $image 数组为空，如何更改通用值的数组值？这似乎很简单，但我找不到一个好的解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:22:16.703

我想您需要通过测试返回值来自己处理它：

```
$graph = OpenGraph::fetch($v);
$image = $graph->image;
if (empty($image))
{
    $image = 'http://yoursite.com/default_og_img.jpg';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:23:01.090

也许这可以解决你的疑惑？：

```
$image = $graph->image != "" ? $graph->image."\n" : "default_value"."\n"; 
```

# php - 从列表中选择附件并使用 php 邮件发送

> ID：14793121
> 
> 赞同：0
> 
> 时间：2013-02-10T00:09:42.440
> 
> 标签：php, email

所有我都试图使这个表单工作但有一些问题，这是我的发件人脚本的一部分

```
 $mail->AddAttachment($_POST[file];);      // attachment 
```

我有一个表单，它只是从列表中的选择中发布价值并进入我的发件人脚本我将如何要求它找到文件名 file1 并将其作为附件添加到电子邮件中？，所以我可以从清单 iot 附件 2 文件 3 选择了相同的原则。

有任何想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:12:21.543

如果文件是在 POST 请求中上传的，那么您应该使用 $_FILES 而不是 $_POST。（请确保您的文件上传表单具有属性`enctype="multipart/form-data"`，否则文件上传将无法正常工作。）

见： http: [//php.net/manual/en/reserved.variables.files.php](http://php.net/manual/en/reserved.variables.files.php)

如果您在请求中上传了许多文件，您可以使用变量获取它们：`$_FILES['file1']`, `$_FILES['file2']`, ...

如果您需要在电子邮件中附加上传的文件，您应该使用文件的 tmp_name （它是文件所在服务器上的临时本地化），因此您得到：

```
$mail->AddAttachment($_FILES['file1']['tmp_name']); 
```

您还可以检查文件是否已成功上传。的值`$_FILES['file1']['error']`应为 0。如果不是，请参见此处：[http ://www.php.net/manual/en/features.file-upload.errors.php](http://www.php.net/manual/en/features.file-upload.errors.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:33:36.150

我假设您正在尝试完成多个文件选择并将它们附加到您的电子邮件中。你必须使用数组。将您的文件输入名称命名为

```
<input name="attachment[]" type="file" multiple="true"> 
```

然后使用 foreach 循环

```
foreach ($attachment['error'] as $key => $error) {
        if ($error == UPLOAD_ERR_OK) {
           // Your code goes here.
        }
    } 
```

# c++ - seekg 如何找到文件的结尾？

> ID：14793122
> 
> 赞同：6
> 
> 时间：2013-02-10T00:10:04.883
> 
> 标签：c++, fstream, seekg

在对文件使用 seekg 和 tellg 的场景中，我想知道幕后发生了什么？

```
 // Open file and get file size
    int myFileSize;
    std::fstream myFile;
    myFile.open(myFileName, std::ios::in|std::ios::binary);
    if (myFile.is_open())
    {
        myFile.seekg(0, std::ios::end);
        myFileSize = myFile.tellg();
        myFile.seekg(0, std::ios::beg);
        myFile.close();
    } 
```

**Q1：** seekg 是否真的遍历文件的全部内容，直到找到一些特殊的“EOF 字符”？或者它是否使用文件系统提供的一些其他信息来“知道”文件的末尾在哪里？

**Q2：** seekg 是一个寻流操作。这是否意味着文件的全部内容必须通过流？

如果我对这一切是如何运作的只有一个基本的了解，请原谅我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T00:14:01.967

Q1：不。操作系统会知道文件的大小，`seekg()`并将使用该知识 - 无论文件是 1、100 还是 10000000000 字节长，它都需要几乎相同的时间。

Q2: 不会。它只是设置当前的“get pointer”，在 Windows 或 Linux 系统中转换为“SetFilePos”或“lseek”。几乎所有其他操作系统都有类似的概念。

# javascript - 检查javascript函数是否存在变量并执行它

> ID：14793126
> 
> 赞同：0
> 
> 时间：2013-02-10T00:10:29.533
> 
> 标签：javascript, function, variables

我的项目中有一个弹出系统。通过名称，例如“addnews”，它知道要添加哪些弹出内容以及处理表单所需的脚本。直到现在完成后，我总是做同样的事情。现在，在某些情况下，我想做一些不同的事情。

现在我想添加一个具有相同名称的 JavaScript 函数，例如前面的示例“addnews()”，并检查该函数是否存在。如果它确实运行它，则执行标准操作。(1)

执行一个将该名称作为变量的函数似乎也不起作用。(2)

```
var functionName = 'addnews';

if (typeof functionName == 'function') { // (1) typeof functionName = string
    window[functionName](); // (2) this doesn't work for me
} else {
    // Do something standard
}

function addnews() {
    // Do something special
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T00:18:06.507

如果您在文档中使用此代码并且它没有完全加载，您的代码将找不到函数 addnews() 因为它没有在此代码之前声明。

就像在评论中一样：你需要使用

```
if (typeof window[functionName] == 'function') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:17:38.127

这将做到：

```
if (typeof eval(functionName) == 'function') { 
    eval(functionName+'()');
} else {
    // Do something standard
} 
```

**更新：**仅当 Mic 的答案不起作用（无论如何）时才使用此功能。就像他说的 eval 非常危险。

# jquery - jQuery Animate 向后播放？

> ID：14793127
> 
> 赞同：0
> 
> 时间：2013-02-10T00:10:34.817
> 
> 标签：jquery, jquery-animate

我正在尝试使用我在 stackoverflow 上找到的淡入淡出 + 幻灯片脚本。

```
$('#topmenu').animate({
    "height": "toggle",
    "opacity": "toggle" 
}, "slow");

$('.post').delay(1000).animate({
    "height": "toggle", 
    "opacity": "toggle" 
}, "slow"); 
```

出于某种原因，这两个动画正在向后播放……你能帮我找出原因吗[？](http://bit.ly/UQM7Ff)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:17:17.203

`#topmenu`并且需要最初隐藏，以便在使用该选项`.post`时能够淡入和向下滑动。`toggle`例如，

```
#topmenu, .post {
  display: none;
} 
```

在您的情况下，由于元素最初是可见的，因此该`toggle`选项将淡出并将它们滑出。

您也可以`.hide()`在动画之前使用。但是，我仍然相信使用 CSS 是这里的最佳解决方案。

**注意：**如果您正在应用一次性效果，则可以使用`"show"`and`"hide"`代替。`"toggle"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:25:11.137

您可以使用自定义值设置动画。

隐藏：

```
$('#topmenu').animate({
    "height": 0
    "opacity": 0
}, "slow");

$('.post').delay(1000).animate({
    "height": 0,
    "opacity": 0
}, "slow"); 
```

以显示：

```
$('#topmenu').animate({
    "height": $('#topmenu').outerHeight(),
    "opacity": 1
}, "slow");

$('.post').delay(1000).animate({
    "height": $('.post').outerHeight(),
    "opacity": 1
}, "slow"); 
```

或者你甚至可以使用 slideDown/slideUp 和 fadeIn/fadeOut。

# python - GAE - 奇怪的实例变量行为

> ID：14793129
> 
> 赞同：1
> 
> 时间：2013-02-10T00:10:48.543
> 
> 标签：python, google-app-engine

在 GAE 上，我`hmac`用来为 AWS API 请求生成签名。我的代码原来是这样的：

```
import urllib
import urllib2
import time
import hmac
import base64
from hashlib import sha256 as sha256

class AmazonProductAdvertisingAPI:

    secret_access_key = '...'
    my_hmac = hmac.new(secret_access_key, digestmod=sha256)

    def get_signed_url(self, params):

        ....

        # Sign it
        self.my_hmac.update('GET' + "\n" + server + "\n" + path + "\n" + paramstring)
        urlstring = urlstring + "&Signature=" + \
            urllib.quote(base64.encodestring(self.my_hmac.digest()).strip())

        return urlstring 
```

有了这个，我发现 API 请求（使用由 给出的 URL `get_signed_url`）当且仅当请求是实例的“冷启动”时，例如在我部署代码并第一次运行它之后。

但是，随后的请求失败了，AWS 声称签名无效。这是通过移至`my_hmac`方法内解决的，因此它是方法内的变量而不是类内的实例变量。

```
...
def get_signed_url(self, params):
    my_hmac = hmac.new(self.secret_access_key, digestmod=sha256)
    ... 
```

我有一个问题：为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T00:19:17.430

你的`my_hmac`变量是一个类变量；*一个由类的所有*实例共享。

这意味着每次调用都会`.get_signed_url()`将数据*添加*到摘要中，跨实例，全局到应用程序。`self.my_hmac.update()`

 *由于您只想计算一个字符串（`"GET ..."`字符串）的摘要，而不是累积计算所有字符串的摘要，因此您*必须*`hmac`为要计算的每个新摘要创建一个新对象。

请注意[.update()` 方法的文档](http://docs.python.org/2/library/hashlib.html#hashlib.hash.update)：

> 使用字符串 arg 更新哈希对象。重复调用等效于连接所有参数的单个调用：`m.update(a); m.update(b)`等效于`m.update(a+b)`.*

# ruby - 如何从 Ruby 中的表中返回唯一的随机行？

> ID：14793137
> 
> 赞同：0
> 
> 时间：2013-02-10T00:11:31.767
> 
> 标签：ruby, random

模型

```
class Answer < ActiveRecord::Base
def self.energy(v, w)
  a = self.where('energy_id = ? AND weight = ?', v, w)
  a.offset(rand(a.count)).first.name
end 
```

看法

```
<%= form_for(@answer) do |f| %>
  <%= f.submit "#{Answer.energy(3, 1)}", name: "answer", class: "btn" %>
  <%= f.submit "#{Answer.energy(4, 1)}", name: "answer", class: "btn" %>
<% end %> 
```

我有那个，它正确地返回一个随机值。虽然我调用了 36 次（18 对 2），但我不希望相同的值返回不止一次。我尝试了各种`.pop`变化，但每次都失败了。

谢谢您的帮助！

对于电话，我正在使用这些表单按钮，所以我选择了：

```
<% names = [] %>

<div id='one' class='center'>
  <%= form_for(@answer) do |f| %>
    <%= f.submit "#{record = Answer.energy(3, 1, names)}", name: "answer", class: "btn btn-large btn-primary" %>
    <% names << record %>
    <%= f.submit "#{record = Answer.energy(4, 1, names)}", name: "answer", class: "btn btn-large btn-primary" %>
    <% names << record %>
  <% end %>
</div>
~~ 17 more times ~~ 
```

奇迹般有效！感谢[jvnill](https://stackoverflow.com/users/337166/jvnill)的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:52:56.830

您可以使用`.order("RAND()")`mysql 和`.order("RANDOM()")`postgre。

更新：没有重复。

```
def self.energy(v, w)
  where('energy_id = ? AND weight = ?', v, w).limit(16).uniq.pluck(:name)
end 
```

更新：16 次，没有重复

这将返回与能量和权重匹配且不包含在 except_names 中的第一个随机记录

```
# model
def self.energy(v, w, except_names = [])
  klass = where('energy_id = ? AND weight = ?', v, w)
  klass = klass.where('name NOT IN (?)', except_names) if except_names.any?
  klass.order('RAND()').first.name
end 
```

这会调用该方法 16 次，每次都在 names 中添加一个 uniq 名称

```
# how to call
names = []
16.times do
  if record = Model.energe(1, 1, names)
    names << record
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:54:27.957

```
def self.energy(v, w)
  c = []
  a = self.where('energy_id = ? AND weight = ?', v, w)
  b = a.offset(rand(a.count)).first.name
  unless c.include?(b) do
    puts b
    c << b
    end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T03:01:27.093

如果您调用它 16 次，您可以将已经可用的行作为参数传递吗？如果是的话，这会起作用吗？

```
def self.energy(v, w, records = [])
  a = self.where("energy_id = ? AND weight = ? AND id NOT IN ('-1',?)", v, w, Array(records).map(&:to_param))
  a.offset(rand(a.count)).first.name
end 
```

用法：

```
records = []
16.times do
 records << Answer.energy(10, 5, records)
end 
```

您还可以传递单个记录而不是数组：

```
other_record = Answer.energy(10,5)
Answer.energy(10, 5, other_record) 
```

# batch-file - 批处理文件格式？

> ID：14793140
> 
> 赞同：0
> 
> 时间：2013-02-10T00:11:49.767
> 
> 标签：batch-file

为什么会这样：

```
set /a num = %random% %% 5 + 1

if %num% == 1 set map=cs_assault
if %num% == 2 set map=cs_italy
if %num% == 3 set map=cs_office
if %num% == 4 set map=de_aztec
if %num% == 5 set map=de_bank

srcds -game csgo -port 27016 -console +game_type 0 +game_mode 0 +mapgroup mg_casual +map %map% 
```

但这不是吗？

```
set /a num = %random% %% 5 + 1

if %num% == 1 set map = cs_assault
if %num% == 2 set map = cs_italy
if %num% == 3 set map = cs_office
if %num% == 4 set map = de_aztec
if %num% == 5 set map = de_bank

srcds -game csgo -port 27016 -console +game_type 0 +game_mode 0 +mapgroup mg_casual +map %map% 
```

我似乎根本无法解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:19:05.163

因为第二个示例是创建一个名为“map”而不是“map”的变量，并且值
“de_mapname”而不是“de_mapname”

所以如果你要改变

```
srcds -game csgo -port 27016 -console +game_type 0 +game_mode 0 +mapgroup mg_casual +map %map% 
```

至

```
srcds -game csgo -port 27016 -console +game_type 0 +game_mode 0 +mapgroup mg_casual +map %map % 
```

它会起作用，否则没有变量`map`。

# ruby-on-rails - Rails & Papertrail - 在查询中包含以前的版本

> ID：14793142
> 
> 赞同：2
> 
> 时间：2013-02-10T00:11:57.347
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, arel, paper-trail-gem

我正在创建一个应用程序，在创建和更新文章时需要管理员批准。我使用书面记录来完成此操作，将每次更新存储到文章中。

更新文章时，“已发布”字段设置为 false。因为我想显示文章的最新批准/发布版本，我需要一种范围来检查文章的当前版本是否被批准，如果不是，它会搜索以前的版本，直到找到批准/发布的一个。

```
def self.published(query={})
  where(query).map do |article|
    article.published? ? article : article.last_published_version
  end.compact! || []
end

def published?()
  published
end

def last_published_version()
  return self if published?
  published_versions = versions.select{ |version| version.reify.try(:published?) } 
  published_versions.present? ? published_versions.last.reify : nil
end 
```

现在，由于我在`map`这里使用，我的查询返回一个数组而不是 ActiveRecord 关系。我想在已发表的文章上链接其他查询，所以这是一个问题。

例如，我想做： `Article.published.where(...).order_by(...)`等

有什么想法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:13:21.320

我建议将两者直接关联`joins`起来，以便您可以针对版本控制表添加搜索词。我还将使用自定义版本类（不是您不能使用默认版本表执行此操作）并设置您将定期访问（或需要访问以进行搜索）的元数据，因为版本是序列化的，通过他们`meta`选项。这样可能会更快，搜索/访问数据会更方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-30T00:49:46.003

如果将 a 添加`has_many :versions, as: :item, class_name: 'PaperTrail::Version'`到模型中，则可以使用`include(:versions)`. 但是，这不会急切查询所有 PaperTrail 查询，例如`version_at`因为该查询包含 created_at 范围。除了使用该`version_at`方法之外，您可以做的事情类似于`Foo.includes(:versions).first.versions.find { |f| f.created_at > date }`. 这是 PaperTrail 的问题[here](https://github.com/paper-trail-gem/paper_trail/issues/222)中建议的。

我想要`include(:versions)`多个`Foo`，我在查询 Foo 后对版本进行了单独的查询

```
 foo_versions = PaperTrail::Version.where(
      item_type: 'Publication',
      item_id: foos.map(&:id),
    ).where("created_at >= ?", date).order(:created_at) 
```

然后我建立了一个查找索引

```
 foo_index = foo_versions.each_with_object({}) do |foo, mapping|
      mapping[foo.item_id] ||= foo
    end 
```

这使我可以省略 n+1 查询情况。

# perl - 在 Perl 中，如何用简单的 ASCII 字符替换 UTF8 字符，例如 \x91、\x{2018}、\x{2013}、\x{2014}？

> ID：14793145
> 
> 赞同：1
> 
> 时间：2013-02-10T00:12:34.527
> 
> 标签：perl, encoding, character-encoding, ascii, non-ascii-characters

我正在处理各种文章，我遇到的问题是各种作者使用各种字符作为标点符号。

例如，我目前正在使用的几个文档具有以下字符：

```
\x91
\x92
\x{2018}
\x{2019} 
```

所有这些字符都代表一个简单的引用`'`。

我想做的是简化文章，使它们都具有相同的格式样式。

有谁知道将这些字符和类似字符（如双引号、破折号等）转换为简单 ASCII 字符的模块或方法？

我目前正在做类似的事情：

```
sub fix_chars_in_document {
    my $document = shift;
    $document =~ s/\xa0/ /g;
    $document =~ s/\x91/'/g;
    $document =~ s/\x92/'/g;
    $document =~ s/\x93/"/g;
    $document =~ s/\x94/"/g;
    $document =~ s/\x97/-/g;
    $document =~ s/\xab/"/g;
    $document =~ s/\xa9//g;
    $document =~ s/\xae//g;
    $document =~ s/\x{2018}/'/g;
    $document =~ s/\x{2019}/'/g;
    $document =~ s/\x{201C}/"/g;
    $document =~ s/\x{201D}/"/g;
    $document =~ s/\x{2022}//g;
    $document =~ s/\x{2013}/-/g;
    $document =~ s/\x{2014}/-/g;
    $document =~ s/\x{2122}//g; 
    return $document ;
} 
```

但这非常困难，因为我必须手动查找字符并替换它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T00:29:12.797

首先，您的解决方案将受益于哈希。

```
my %asciify = (
   chr(0x00A0) => ' ',
   chr(0x0091) => "'",
   chr(0x0092) => "'",
   chr(0x0093) => '"',
   chr(0x0094) => '"',
   chr(0x0097) => '-',
   chr(0x00AB) => '"',
   chr(0x00A9) => '/',
   chr(0x00AE) => '/',
   chr(0x2018) => "'",
   chr(0x2019) => "'",
   chr(0x201C) => '"',
   chr(0x201D) => '"',
   chr(0x2022) => '/',
   chr(0x2013) => '-',
   chr(0x2014) => '-',
   chr(0x2122) => '/',
);

my $pat = join '', map quotemeta, keys %asciify;
my $re = qr/[$pat]/;

sub fix_chars {
    my ($s) = @_;
    $s =~ s/($re)/$asciifi{$1}/g;
    return $s;
} 
```

也就是说，你想要[Text::Unidecode](http://search.cpan.org/perldoc?Text%3a%3aUnidecode)。

* * *

只是标点符号：

```
use Text::Unidecode qw( unidecode );
s/(\p{Punct}+)/ unidecode($1) /eg; 
```

# java - 如何以'yyyy-mm-dd'格式将日期列表放入JComboBox？

> ID：14793146
> 
> 赞同：1
> 
> 时间：2013-02-10T00:12:52.577
> 
> 标签：java, swing, date, jcombobox, date-format

我正在尝试使用此代码将当前日期和第二天的日期放入 JComboBox

```
private void dateCombo(){
    Calendar cal = new GregorianCalendar();
    int month =cal.get(Calendar.MONTH);
    int year =cal.get(Calendar.YEAR);
    int day =cal.get(Calendar.DAY_OF_MONTH);
    cmb_date.addItem(+year+"-"+(month+1)+"-"+day);
    cmb_date.addItem(+year+"-"+(month+1)+"-"+(day+1));
} 
```

但它以“yyyy-md”格式显示日期，我希望它以“yyyy-mm-dd”格式显示。

我想我可以使用

```
Date date = new Date();
SimpleDateFormat  sdf = new SimpleDateFormat("yyyy/MM/dd");
txt_date.setText(sdf.format(date)); 
```

以 'yyyy-mm-dd' 格式获取当前日期，但如何处理第二天的日期？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T00:13:53.943

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DATE, 1); //next day
cal.getTime(); // next day's date 
```

并且您需要将格式更改`yyyy-MM-dd`为您想要的格式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T03:23:07.993

您应该将日期对象添加到**JComboBox**中，而不是当前日期的字符串和下一天的日期，然后使用自定义的**ListCellRenderer**以所需的格式呈现日期。

**示例代码：**

```
import java.awt.Component;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.GregorianCalendar;

import javax.swing.DefaultListCellRenderer;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JPanel;

public class DateComboExample {

    // Create Date Renderer for formatting Date
    public static class DateComboBoxRenderer extends DefaultListCellRenderer {

        // desired format for the date
        private SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

        public Component getListCellRendererComponent( JList list, Object value, int index, boolean isSelected, boolean cellHasFocus ) {
            Object item = value;

            // if the item to be rendered is date then format it
            if( item instanceof Date ) {
                item = dateFormat.format( ( Date ) item );
            }
            return super.getListCellRendererComponent( list, item, index, isSelected, cellHasFocus);
        }
    }

    public static void main( String[] str ) {
        JComboBox combo = new JComboBox();

        // Add current date
        GregorianCalendar calendar = new GregorianCalendar();
        combo.addItem( calendar.getTime() );

        // Add Next date
        calendar.roll( GregorianCalendar.DAY_OF_MONTH, 1 );
        combo.addItem( calendar.getTime() );

        // Set Renderer for formating the date in combobox
        combo.setRenderer( new DateComboBoxRenderer() );

        JFrame frame = new JFrame( "Date Rendere Example" );

        JPanel panel = new JPanel();
        panel.add( new JLabel( "Date Combo: ") );
        panel.add( combo );

        frame.add( panel );
        frame.pack();
        frame.setVisible( true );
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T00:38:04.270

我通常从不向**JComboBox**添加字符串；相反，我定义了一个*数据对象*，其中包含所需类型的成员（在您的情况下为**Date**）并覆盖**toString**方法以确定它将如何出现在**JComboBox**中。

```
public class DateItem {

    private Date mDate;

    public DateItem(Date date) {
        mDate = date;
    }

    public Date getDate() {
        return mDate;
    }

    @Override
    public String toString() {

        SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");

        return sdf.format(mDate);
    }
} 
```

现在，您可以按照 Jigar Joshi 在他的回答中显示的模式将您想要的所有日期插入到 JComboBox 中。在这里，我用它总共增加了四个星期：

```
JComboBox cb = new JComboBox();

Calendar calendar = Calendar.getInstance();

for (int i = 0; i < 28; ++i) {
    cb.addItem(new DateItem(calendar.getTime()));
    calendar.add(Calendar.DATE, 1);
} 
```

使用*数据对象*的优点是您可以轻松地从**JComboBox**中检索选定的日期，而不是从它的**String**表示。

```
DateItem di = (DateItem)cb.getSelectedItem();
Date d = di.getDate(); 
```

# php - 数组的多维关联数组

> ID：14793148
> 
> 赞同：0
> 
> 时间：2013-02-10T00:13:20.937
> 
> 标签：php, arrays, function, multidimensional-array, arguments

所以我有以下代码：

```
$options = array(
    'navigation' => array(
        'page_title' => 'test',
        'menu_title' => 'test_title',
        'capabillity' => '',
        'menu_slug' => '',
        'function' => '',
        'icon_url' => '',
        'position' => '',
        'sub_menues' => array(
            array(
                'page_title' => 'test',
                'menu_title' => 'test_title',
                'menu_slug' => 'bla'
            ), 
            array(
                'page_title' => 'apples',
                'menu_title' => 'test_apples',
            ), // Set of Navigations
        )
    ),
    'settings' => array(
        array(
            'option_group' => 'bla',
            'option_name' => '',
            'sanitize_call_back' => ''
        )
    ),
    'core_template' => 'path/to/admin/template.phtml'
);

foreach($options as $setting=>$option){
    if($setting == 'navigation' && is_array($option)){
        foreach($option as $k=>$v){
            if(is_array($v)){
                foreach($v as $sub_menu){
                    foreach($sub_menu as $sk=>$sv){
                        if(isset($sub_menu[$sk])){
                            echo $sub_menu['menu_slug'];
                        }
                    }
                }
            }

            if(isset($option[$k])){
                echo $option['page_title'];
            }
        }
    }

    if($setting == 'settings' && is_array($option)){
        foreach($option as $settings_options){
            foreach($settings_options as $sk => $sv){
                if(isset($settings_options[$sk])){
                    echo $settings_options['option_group'];
                }
            }
        }
    }

    if($setting = 'core_template'){
        echo $options['core_template'];
    }
} 
```

哪个，是的，是一团糟，需要重构，直到你输入一个不存在的变量。看到这个的好方法：

```
echo $sub_menu['menu_slug']; 
```

现在 menu_slug 存在于 navigation/sub_menues/[0] 数组中，但不在 [1] 数组中。

解决此问题的典型方法是：

```
if(isset($sub_menu['menu_slug'])){ // do something } 
```

正如您从导航数组中看到的那样，将会**有很多***if 设置做这个，否则做那个。*我正在寻找一种更简洁的方式，我可以只做 $sub_menu['something'] 并且它会自动检查是否存在某些东西，如果存在，则返回它的值，如果不做任何事情，就忽略它。

现在我有了正确的想法，我在哪里设置 *if is set $sub_menu[$sk]* 然后我可以这样做：

```
echo $sub_menu[$sk]; 
```

问题是我在这里调用一个接受参数的函数，参数是键的值，因此为什么我必须做 $sub_menu['menu_slug'] 例如。

**所以我的问题是：**

我该怎么做：

```
some_function_call($sub_menu['menu_slug']); 
```

无需做：

```
if(isset($sub_menu['menu_slug']) && isset($sub_menu['page_title']) /*...and so on...*/){
    some_function_call($sub_menu['menu_slug'], $sub_menu['page_title'] /*..and so on...*/);
} 
```

**捕获？**- 一些选项，例如（例如）menu slug，可能是可选的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:36:30.253

好吧，如果您的键相对于所有级别都是唯一的，您可以这样做：

```
array_walk_recursive($options, function($value, $key){
  if($value && in_array($key, array('menu_slug', 'page_title', 'option_group', 'core_template')))
    print $value;  
}); 
```

:)

但我假设您的真正目的是将此文本包装在 HTML 字符串中，因此您应该使用`switch`而不是我的`if`语句并打印您想要的任何内容。如果您需要按特定顺序打印内容，请使用临时数组来存储您生成的输出，并在完成后打印。

# java - 覆盖子类中的方法，同时保留超类方法的内容

> ID：14793152
> 
> 赞同：0
> 
> 时间：2013-02-10T00:13:43.263
> 
> 标签：java

在java中，有没有办法在保留超类方法的内容的同时覆盖子类中的超类方法？像这样的东西：

```
class Person { 

public void update(){
    statement 1;
    statement 2;
    }

} 

class Student extends person {

    @Override
    public void update(){
        super().update();
        statement 3; 
        statement 4;

    }
} 
```

这样在 Student 上调用 update() 会导致语句 1、2、3 和 4 被执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:25:33.427

Place `super.update()` in the beginning of the subclass method.

# python - python对象的自动redis查找

> ID：14793154
> 
> 赞同：3
> 
> 时间：2013-02-10T00:13:51.360
> 
> 标签：python, object, redis, getattribute

我正在尝试实现 redis 实际保存属性的类，但该类的用户不知道这一点（即跨多个客户端的对象持久性）。我知道有一些库为 python 包装了 redis，但没有一个库以这种简单的方式做到这一点（但如果我错了，请纠正我！）

`__getattribute__`我已经成功地实现了属性的自动 redis 存储，但如果没有无限递归将其炸毁，我似乎无法使用它进行检索。我想我在使用`object.__getattribute__`等方面很小心，但显然我必须遗漏一些东西：

```
class redisStored(object):
    global redis

    # A class method to implement object retrieval from redis
    # Call <Classname>.load(<id>) to create a new instance which exists in redis
    @classmethod
    def load(cls,id):
        # Create the object
        obj = cls.__new__(cls)
        # Set id without calling obj's __setattr__
        object.__setattr__(obj,'id',int(id))
        # Return the object we created
        return obj

    def __str__(self):
        # Return "<ClassName>:<id>" to differentiate ids in redis
        # You can use this to say redis.hgetall(g) where g is the instance

        return "%s:%s" % (self.__class__.__name__, str(object.__getattribute__(self,'id')))
        #                                     self.id here ^ would cause infinite recursion

    # This works fine
    def __setattr__(self,name,value):
        redis.hset(self,name,value)
        return object.__setattr__(self,name,value)

    # This blows up with infinite recursion, WHY??
    def __getattribute__(self,name):
        _val = redis.hget(self,name)
        if not _val:
            return object.__getattribute__(self,name)
        else:
            return _val 
```

如果我追踪它，它会在里面爆炸，`_val = redis.hget(self,name)`但我不知道为什么。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:46:14.717

你应该非常小心`__getattribute__`重载。

一个副作用是访问`self.__class__`调用`__getattribute__`并创建一个虚拟 redis 查询。

当您使用新式类时，您可能希望使用它`__getattr__`并避免无限递归问题，尽管如果您使用该属性，则如果该属性已存在于您的实例中，您将在 redis 值**之前**`__getattr__`返回对象属性。

 **无论如何，只要您重载`__setattribute__`方法，您的对象就是不可变的，所以这不是一个大问题。

`__getattr__`请参阅此 SO 响应以了解和之间的更详细区别`__getattribute__`：[__getattr__ 与 __getattribute__ 之间的区别](https://stackoverflow.com/questions/3278077/difference-between-getattr-vs-getattribute-in-python)**

# math - 将新的梅森素数表示为整数需要多少字节？

> ID：14793159
> 
> 赞同：-4
> 
> 时间：2013-02-10T00:14:02.463
> 
> 标签：math

您需要将多少字节存储`2^57,885,161 - 1`为整数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T00:26:31.303

Assuming we're doing two's complement and that 8 bits is equal to one byte; we'd need at least (57,885,161+7)/8 bytes.

If you needed a simple way to possibly explain it is by using mathematical induction that says 2^32 - 1 is the maximum number that a 32-bit integer would represent, and 32 is a base of 2 that is divisible by 8, our assumed number of bits per byte. 2^32 - 1 would be 4 bytes.

Extending this definition of assumptions you have the number 2^57885161 which isn't divisible by 8, but adding 7 to it is. So you're left with 2^57885168, and when you divide it by 8 you get the resultant 7235646 bytes.

This is just an explanation of GregS's comment.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T00:18:03.710

答案很大程度上取决于您将如何处理它。如果您正在编写一个专门使用梅森素数的程序，您可能只需要四个字节来存储它，并理解它代表梅森素数指数。

如果要将其存储为典型的未压缩“大整数”，则大约需要 7235646 个字节（ceildiv(57885161, 8)）。有些格式比其他格式更有效。例如，由于格式开销（因为 Python 使用 30 位数字） ，Python`long`格式使用 7718048 字节将此数字存储在我的机器 ( ) 上。`(2**57885161 - 1).__sizeof__()`

# java - Android 的 Javadoc 生成

> ID：14793161
> 
> 赞同：2
> 
> 时间：2013-02-10T00:14:14.417
> 
> 标签：java, android, eclipse, classpath, javadoc

我正在尝试使用 javadoc 为我的 android 项目生成文档。问题是 javadoc 无法找到 android 包。[我的错误与此](https://stackoverflow.com/questions/5200234/javadoc-in-eclipse-failing-to-recognize-packages)相同。如果我正在尝试第[一个](https://stackoverflow.com/a/5200473/1754625)解决方案，它会说：

> javadoc: error - -classpath 选项只能指定一次。

我究竟做错了什么？

此外，我尝试[了这个](https://stackoverflow.com/a/8182949/1754625)解决方案，但我不知道在最后一步我必须做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T09:13:11.853

我发现您可以向 -classpath 添加多个路径，方法是用分号分隔它们并将整个路径括在引号中（如果路径中有空格）

```
-classpath ".;c:\full\path\to\another\codebase\java;C:\path\to\android.jar" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:39:29.397

好的，我用[这个](https://stackoverflow.com/a/8182949/1754625)解决方案解决了这个问题。我需要做的就是安装[Cygwin](http://cygwin.com/install.html)。安装后，我需要像[这样](https://stackoverflow.com/a/3858799/1754625)在 Cygwin上安装[ANT](http://ant.apache.org/bindownload.cgi)。之后，我不得不在 Cygwin中[配置 java 。](https://stackoverflow.com/a/9346510/1754625)

`-classpath`现在对我来说是一个新的细节（也许是在 Eclipse 中生成 Javadoc 的第三步中该命令对我不起作用的原因）。我不得不打开**javadoc.xml**并看到这一行：

```
<javadoc [...] additionalparam="-classpath C:\Progra~2\Android\android-sdk\platforms\android-10\android.jar" classpath="C:\Program Files (x86)\Android\android-sdk\tools\support\annotations.jar" [...]/> 
```

附加参数是我自己的 Generate Javadoc 第三步。我采取了那条路并将其放入 classpath="" ... 就是这样。也许有人会说如何在 Eclipse 中手动配置类路径，因为我找不到东西。

好的，现在切换到 的文件夹`javadoc.sh`并运行该文件`sh javadoc.sh`

# c++ - 命名空间和预处理器

> ID：14793162
> 
> 赞同：1
> 
> 时间：2013-02-10T00:14:28.170
> 
> 标签：c++, compiler-construction

我在理解 C++ 中的预处理器和命名空间时遇到了一些麻烦。例如，考虑以下程序：

```
#include <iostream> 

int main() 
{
    using namespace std;

    cout << "Hello World!" << endl;

    return 0; 
} 
```

所以当这个程序准备被编译时，预处理器将识别#include 指令并将iostream 文件添加到程序中，以便程序具有I/O 能力（即“cout”和“endl”）。现在，根据我的教科书，作为 C++ 编译器标准组件的类、函数和变量被放置在命名空间 std 中。

这很令人困惑，因为如果将标准函数（“cout”和“endl”）放在这个命名空间中，iostream 的用途是什么？我基本上是想了解为什么我们需要 iostream 和一些有关正在使用的命名空间的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T00:17:43.177

严格来说，你不需要`using namespace std;`它所做的只是让你写

```
cout << "Hello World!" << endl; 
```

代替

```
std::cout << "Hello World!" << std::endl; 
```

命名空间“包含”iostream 定义（以及标准 C++ 库提供的其他定义）仅在`std::`隐含“前缀”到所有名称的意义上。这个“包含”不同于“`iostream`文件包含输入/输出函数的定义”中的“包含”：文件字面上包含定义；`std::`命名空间名称只是一个前缀，可让您避免名称冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:17:00.937

头文件`<iostream>`包括几个有用的东西的声明，包括变量`std::cout`和`std::endl`.

如果没有这些声明，编译器将不知道您在编写`cout << ...`.

# jquery - 带有缩放元素而不是容器的 jQuery 可拖动

> ID：14793164
> 
> 赞同：1
> 
> 时间：2013-02-10T00:14:47.207
> 
> 标签：jquery, jquery-ui, zooming, jquery-ui-draggable

[我有一个与this](https://stackoverflow.com/questions/2930092/jquery-draggable-with-zoom-problem)和[this](https://stackoverflow.com/questions/8605439/jquery-draggable-div-with-zoom)类似的问题，不同之处在于缩放是在可拖动元素上而不是在容器上。我复制了上面提到的第二个问题中提供的 jsFiddle，并将缩放属性从容器更改为元素。你可以在[这里](http://jsfiddle.net/f6Zzu/2/)找到它，代码是：

HTML

```
<div id="canvas">
    <div id="dragme"></div>
</div> 
```

CSS

```
#canvas {
   width:500px;
   height:250px;
   border:1px solid #444;
}
#dragme {
   width:100px;
   height:50px;
   background:#f30;
   zoom:0.9;
} 
```

JS

```
$('#dragme').draggable(); 
```

我试图了解问题所在，但似乎我尝试的每一个更改都不起作用。主要问题是：

*   当我开始拖动时，元素会稍微向上和向左移动；
*   容器边界计算不正确；

你能明白这里发生了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-26T21:18:09.183

如果绝对没有必要，请从 css 中删除缩放。它不能很好地与可拖动的 Jquery 一起使用。在此处查看更多信息[Jquery 可拖动缩放问题](https://stackoverflow.com/questions/2930092/jquery-draggable-with-zoom-problem?rq=1)

然后，如果您想在画布内拖动，只需添加

```
containment: "parent" 
```

# javascript - 在 Canvas 上使用 getImageData 进行 JavaScript 颜色检测

> ID：14793166
> 
> 赞同：0
> 
> 时间：2013-02-10T00:14:59.030
> 
> 标签：javascript, html, canvas, colors, getimagedata

我在使用 getImageData 函数时遇到问题。我正在尝试制作一个程序来检测您何时点击红色并弹出一个警报框。我编写了一个名为“collideTest”的碰撞检测函数，虽然我找不到任何问题，但它不起作用。我在下面包含了整个代码，将其分成几个部分以便于阅读。

```
(function () {
    var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
    window.requestAnimationFrame = requestAnimationFrame;
})();

//========================= B E G I N =======================================

window.onload = function init() {

    var canvas = document.getElementById("canvas");
    var c = canvas.getContext("2d");

    canvas.width = 600;
    canvas.height = 600;

    render();
}

//======================== O B J E C T S =====================================

var player = {
    x: 50,
    y: 50,
    xvel: 0,
    yvel: 0,
}

//===================== I N P U T & A D J U S T ============================

var keys = [];

window.addEventListener("keydown",function(e) {
    keys[e.keyCode] = true;
});

window.addEventListener("keyup",function(e) {
    keys[e.keyCode] = false;
});

function input() {

    if (keys[37]) {
        player.xvel -= 5
    }
    if (keys[39]) {
        player.xvel += 5
    }
    if (keys[38]) {
        player.yvel -= 5
    }
    if (keys[40]) {
        player.yvel += 5
    }

    player.x += player.xvel;
    player.y += player.yvel;

    player.xvel = 0;
    player.yvel = 0;

    collideTest();

}

//======================= C O L L I S I O N ================================

function collideTest(){
    var canvas = document.getElementById("canvas");
    var c = canvas.getContext("2d");
    var whatColor = c.getImageData(player.x - 5, player.y - 5,60,60);
    for (var i = 0; i < whatColor.data.length; i += 4) {
        if (whatColor.data[i] == 255) {
            alert("red");
        }
    }
}

//========================== R E N D E R ===================================

function render(){

    var canvas = document.getElementById("canvas");
    var c = canvas.getContext("2d");

    canvas.width = 600

    input();

    c.fillStyle = "red"
    c.fillRect(300,300,50,50);

    c.fillStyle = "rgb(106,8,136)"
    c.fillRect(player.x,player.y,50,50)

    requestAnimationFrame(render);
} 
```

当我将 collideTest() 中的“255”替换为“0”时，它会一遍又一遍地弹出警报，因此它不会/完全/损坏。我只是不确定发生了什么。

非常感谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:45:02.880

你的计算是正确的。只需将 render() 函数内部的 input() 调用移动到两个矩形创建之间：

```
c.fillStyle = "red"
c.fillRect(300,300,50,50);

input()

c.fillStyle = "rgb(106,8,136)"
c.fillRect(player.x,player.y,50,50) 
```

获取图像数据将获得整个画布的快照，因此，如果您每次都在红色之上绘制紫色，那么它始终是您正在检测的坐标处的紫色。

我可以建议使用console.log() 而不是alert() 来吐出你的结果吗？;)

# python - 如何让用户指定一个数字而不会向我抛出错误？

> ID：14793167
> 
> 赞同：1
> 
> 时间：2013-02-10T00:15:08.280
> 
> 标签：python, python-2.7

我创建了一个素数生成器，并希望用户指定生成的素数的数量。我想知道如何将“1000”更改为 raw_input，而程序不会像它一直在做的那样向我抛出错误。另外，如何将生成的此列表保存到 .txt 文件中？提前致谢

代码：

```
no_of_primes = 1
candidate = 2
start = 2
list_of_primes = []

while no_of_primes <= 5000:
    result = candidate % start

    if result > 0:
        start +=1

    elif result == 0:
        if start == candidate:
            list_of_primes.append(candidate)
            candidate +=1
            no_of_primes +=1
            start =2
        else:
            candidate +=1
            start = 2

print list_of_primes 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T00:23:02.143

首先，将 替换`5000`为变量（例如，`primes_to_generate`）。然后在循环之前，`while`通过调用`int`. 会将其从字符串转换为数字，从而修复您的错误`raw_input`：`int`

```
primes_to_generate = int(raw_input("How many to generate? ")) 
```

`try`如果有人输入“90”而不是“90”，您还可以使用块来捕获错误：

```
try:
    primes_to_generate = int(raw_input("How many to generate? "))
except ValueError:
    print "Whoa! That's not a number I know!"
    # You'd probably then want to let the user retry
    # by enclosing this whole thing in a loop or something. 
```

# java - 画一条线混合 swing 和 awt

> ID：14793170
> 
> 赞同：0
> 
> 时间：2013-02-10T00:15:42.367
> 
> 标签：java, swing, awt

我尝试使用 Graphics 类画一条线，然后将其放入 JFrame 对象中：

```
import java.awt.*;
import javax.swing.JFrame;
import javax.swing.JLabel;

class Window
{
    private JFrame frame;
    private Graphics g;

    public void Window()
    {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(15, 0);
        frame.setSize(600, 200);
        frame.setVisible(true);

    }        

    public void DrawCross()
    { 

        g.setColor(Color.BLACK);
        g.drawLine(300,0, 200, 0);
        frame.paint(g);  
    }        

} 
```

...

```
run:
Exception in thread "main" java.lang.NullPointerException
    at Window.DrawCross(Window.java:33)
    at Main.main(main.java:21)
Java Result: 1
BUILD SUCCESSFUL (total time: 0 seconds) 
```

我在哪里错了，如何解决我的错误？无法初始化抽象的 Graphics 类对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:19:08.150

该`Graphics`对象尚未实例化，导致`NPE`被抛出。

这种方法是完全错误的。不要`paint`直接打电话。也不要在 a 上做任何自定义绘画`JFrame`，而是添加一个子类`JComponent`和 override `paintComponent`。在这里，您将拥有一个易于实例化的`Graphics`对象。

[在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T00:44:32.257

主要错误是它应该`public Window()`没有`void`. 这就是java中的构造函数表示法。正如您所说`new Window()`，您没有调用公共 void 函数 Window，因此 frame 保持为空。因此出现 NullPointerException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T21:08:40.230

基于 JoopEggen 和 Reimeus 的答案创建的工作代码：

```
import java.awt.*;
import javax.swing.*;

class Window
{
    private JFrame frame;

    public Window()
    {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(15, 0);
        frame.setSize(600, 200);
        frame.setVisible(true);
    }

    public void drawCoordinateSystem()
    {                
        frame.add( new CoordinateSystem());
    }        

} 

 public class CoordinateSystem extends JPanel 
{
    @Override 
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        Dimension size = this.getSize();

        g.setColor(Color.BLACK);
        g.drawLine(0,size.height/2,size.width, size.height/2);

        g.drawLine(size.width/2, 0, size.width/2, size.height);

    }
}        

class Main 
{    
    public static void main(String [] args)
    {
     Window h = new Window();

     h.drawCoordinateSystem();      
    }        

} 
```

# c# - 如何从 iPhone 获取 pdf 到 .net c# 网站？

> ID：14793173
> 
> 赞同：0
> 
> 时间：2013-02-10T00:16:00.073
> 
> 标签：c#, .net, ios, pdf, ios6

现在，我在我的 iphone 应用程序中创建了一个 pdf。我正在使用 http 请求将一堆数据发送到我的网站，然后将该信息保存在数据库中。有没有办法将此pdf发送到网站并将其保存到网站文件系统中的包含文件夹中？该网站是用 .net 和 c# 构建的。

我知道如何在网站上创建一个页面，人们可以在其中上传文件，然后将其保存到文件系统，但我不知道如何将它从 ios 获取到网站。感谢您的任何建议。

编辑：如果这更容易的话，另一种选择是为了相同的目的只向网站发送一张图片。

编辑：我想我应该指定应用程序是用 Objective-C 构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:24:46.877

考虑使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)。让上传变得轻而易举。
（假设应用程序是用 Objective-C 编写的）。

示例：[使用 ASIFormDataRequest 发送表单 POST](http://allseeing-i.com/ASIHTTPRequest/How-to-use#sending_a_form_post_with_ASIFormDataRequest)

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setPostValue:@"Ben" forKey:@"first_name"];
[request setPostValue:@"Copsey" forKey:@"last_name"];
[request setFile:@"/Users/ben/Desktop/ben.jpg" forKey:@"photo"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:26:20.973

如果 iPhone 应用程序使用 MonoTouch（C# 和 .Net 框架），请查看[此](https://stackoverflow.com/questions/5140674/create-a-http-put-request-programmatically-with-c-sharp).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T16:47:02.667

因此，经过更多的搜索和不同的想法，这就是我最终要做的。我发现这个关于上传到 php 页面的很棒的教程，所以我只是将它添加到我的网站并将图像保存到文件系统，然后我可以使用 c# 代码从那里提取它。

[http://objective-c.wonderhowto.com/how-to/upload-image-website-from-apple-ios-application-333979/](http://objective-c.wonderhowto.com/how-to/upload-image-website-from-apple-ios-application-333979/)

# objective-c - 在空的 NSDictionary 上调用 valueForKey

> ID：14793178
> 
> 赞同：0
> 
> 时间：2013-02-10T00:17:09.030
> 
> 标签：objective-c, cocoa, nsstring, nsdictionary

在我的代码中，我调用`valueForKey`了一个空`NSDictionary`对象，并注意到应用程序确实崩溃了。但据我所知，如果向空对象发送消息，应用程序不会崩溃。有人可以帮我解释这里的矛盾吗？非常感谢。

这是我的代码：

```
if ([[storedManagedObject valueForKey:@"objectId"] isEqualToString:[record valueForKey:@"objectId"]]) {
    [self updateManagedObject:[storedRecords objectAtIndex:currentIndex] withRecord:record];
} else {
    [self newManagedObjectWithClassName:className forRecord:record];
} 
```

在某些情况下，`storedManagedObject`对象为零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:32:11.563

您的崩溃正在发生，因为`isEqualToString`在比较之前对值进行类型检查。如果您只是使用`isEqual`，则传递 nil 参数时的行为将更像您所期望的：

```
if ([[storedManagedObject valueForKey:@"objectId"] isEqual:[record valueForKey:@"objectId"]]) { 
```

请参阅[Cocoa 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html)：

> `isEqualToType:`在Cocoa 框架的所有方法中，`nil`不是有效参数，并且这些方法的实现可能会在接收到`nil`. 但是，为了向后兼容， `isEqual:`Cocoa 框架的方法确实接受`nil`，返回`NO`。

# javascript - 如何获取当前连接设备的名称到计算机？

> ID：14793181
> 
> 赞同：1
> 
> 时间：2013-02-10T00:17:21.870
> 
> 标签：javascript

当我将手机连接到计算机并在 google chrome 中访问 Google Play 商店时，页面似乎知道设备已连接，如下图所示：

![设备名称](../Images/3a2c7cbfe421c1912f1429ccf89a9fd7.png)

我怎样才能使用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:20:34.990

据我所知，一旦您将手机链接到您的 Google 帐户，Google 就会将您的手机附加到您的 Google Play 帐户，然后在您使用计算机的网络浏览器查看应用程序时将其显示给您。不要认为这里有任何 Javascript 在起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:26:06.987

你不能。Google Play 网站不知道您的手机已连接到您的计算机，它只知道您配置了哪些 Android 设备是您的 Google 帐户。

# dropbox - 如何从 Dropbox Chooser 获取 Dropbox 短网址？

> ID：14793187
> 
> 赞同：8
> 
> 时间：2013-02-10T00:17:56.953
> 
> 标签：dropbox, dropbox-api

有没有办法通过 Dropbox 选择器获取用于共享文档的短网址？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-31T12:39:40.320

是的，它回来了：创建链接，单击 Twitter 图标，复制 db.tt-link，关闭 Twitter 消息（请参阅保管箱论坛[https://forums.dropbox.com/topic.php?id=60222](https://forums.dropbox.com/topic.php?id=60222)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T18:21:27.487

不，与[Dropbox Core API](https://www.dropbox.com/developers/reference/api#shares)不同，[Dropbox](https://www.dropbox.com/developers/chooser)选择器不提供获取短 URL 的功能。

当然，这并不妨碍您事后使用首选的 URL 缩短器。

# html - HTMLUNIT根据表id在HtmlTable中添加行

> ID：14793201
> 
> 赞同：0
> 
> 时间：2013-02-10T00:20:11.263
> 
> 标签：html, htmlunit

实际上，为了避免 jquery 的东西，我打算直接在表列表中添加行。

您能否通过将值设置为 htmltable 中的字符串或其他方式（HTMLUNIT）来帮助我动态添加行。

```
--------------
<table id="list4" class="scroll">
</table>
------------------------ 
```

* * *

```
package com.test;

import java.io.IOException;
import java.net.MalformedURLException;

import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.DomCharacterData;
import com.gargoylesoftware.htmlunit.html.DomNode;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.html.HtmlTable;
import com.gargoylesoftware.htmlunit.html.HtmlTableCell;
import com.gargoylesoftware.htmlunit.html.HtmlTableRow;

public class TestMain {

  public static void main(String args[])
        throws FailingHttpStatusCodeException, MalformedURLException, IOException {
    final String htmlContent = "<html><head><title>foo</title></head><body><table id='table1'><tr id='row1'><td>cell1</td></tr><tr id='row2'><td>cell2</td></tr><tr id='row3'><td>cell3</td></tr><tr id='row4'><td>cell4</td></tr><tr id='row5'><td>cell5</td></tr><tr id='row6'><td>cell6</td></tr></table></body></html>";
    WebClient webClient = new WebClient();
    final HtmlPage page = loadPage(htmlContent);
    final HtmlTable table = page.getHtmlElementById("list4");
    // want to add to the new row here
    for (final HtmlTableRow row : table.getRows()) {
      System.out.println("Found row");
      for (final HtmlTableCell cell : row.getCells()) {
        System.out.println("   Found cell: " + cell.asText());
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:15:07.000

这段代码基本上创建了一个新的行和单元格。然后用一些文本填充单元格，然后将元素附加到它们的父级。

```
HtmlTableRow newRow = page.createElement("tr");
HtmlTableCell newCell = page.createElement("td");
Text cellContent = page.createTextNode("Hello World");
newCell.appendChild(cellContent);
newRow.appendChild(newCell);
table.appendChild(newRow); 
// you can also have `table.insertBefore(newRow, exisitingRow);` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:50:05.760

我做了，稍加修改。它对我有用。

```
 final HtmlTable table = page.getHtmlElementById("highlight");

    HtmlTableRow newRow = (HtmlTableRow) page.createElement("tr");
    HtmlTableCell newCell = (HtmlTableCell) page.createElement("td");
    DomText cellContent =  (DomText) page.createTextNode("Welcome Sireesh");

    newCell.appendChild((org.w3c.dom.Node) cellContent);
    newRow.appendChild(newCell);
    table.appendChild(newRow); 
```

# c - 写入 emacs 时进程有时会挂起

> ID：14793202
> 
> 赞同：0
> 
> 时间：2013-02-10T00:20:21.403
> 
> 标签：c, linux, terminal, posix

我目前正在做一个主要是为了好玩的项目，试图编写一个简单的终端仿真器。到目前为止，我想做的只是拥有一个只转发终端命令的“代理进程”。到目前为止，当我使用下面的代码调用 /usr/bin/nano 时，这似乎有效。

然而，当我尝试用 emacs 做同样的事情时，我遇到了一个 heisenbug：有时它工作得很好，但大多数情况下不是：调整大小工作，但是只要我输入任何内容，我的进程就会暂停，就好像我按下了 Ctrl+z （我当然没有这样做）。

emacs 的 strace 是一个序列：

```
ioctl(6, FIONREAD, [0])                 = 0
poll([{fd=7, events=POLLIN}], 1, 0)     = 0 (Timeout)
read(7, 0x7fff078de1d0, 16)             = -1 EAGAIN (Resource temporarily unavailable)
select(8, [6 7], NULL, NULL, {100000, 0}) = ? ERESTARTNOHAND (To be restarted)
--- SIGIO (I/O possible) @ 0 (0) ---
rt_sigreturn(0x1d)                      = -1 EINTR (Interrupted system call) 
```

我在暂停时的流程是：

```
rt_sigaction(SIGTSTP, NULL, {SIG_DFL, [], 0}, 8) = 0
rt_sigaction(SIGTSTP, {0x7f8964468b50, [], SA_RESTORER|SA_RESTART, 0x7f8963ea54a0}, NULL, 8) = 0
rt_sigaction(SIGINT, NULL, {SIG_DFL, [], 0}, 8) = 0
rt_sigaction(SIGINT, {0x7f8964468a80, [], SA_RESTORER|SA_RESTART, 0x7f8963ea54a0}, NULL, 8) = 0
rt_sigaction(SIGTERM, NULL, {SIG_DFL, [], 0}, 8) = 0
rt_sigaction(SIGTERM, {0x7f8964468a80, [], SA_RESTORER|SA_RESTART, 0x7f8963ea54a0}, NULL, 8) = 0
rt_sigaction(SIGWINCH, NULL, {0x401088, [WINCH], SA_RESTORER|SA_RESTART, 0x7f8963ea54a0}, 8) = 0
ioctl(1, SNDCTL_TMR_TIMEBASE or TCGETS, {B38400 opost isig -icanon -echo ...}) = 0
ioctl(1, SNDCTL_TMR_TIMEBASE or TCGETS, {B38400 opost isig -icanon -echo ...}) = 0
ioctl(1, SNDCTL_TMR_STOP or TCSETSW, {B38400 opost -isig -icanon -echo ...}) = 0
ioctl(1, SNDCTL_TMR_TIMEBASE or TCGETS, {B38400 opost -isig -icanon -echo ...}) = 0
select(4, [0 3], [], NULL, NULL)        = 1 (in [0])
read(0, 0x7fffafd46890, 4096)           = ? ERESTARTSYS (To be restarted)
--- SIGTTIN (Stopped (tty input)) @ 0 (0) ---
--- SIGTTIN (Stopped (tty input)) @ 0 (0) ---
read(0, 0x7fffafd46890, 4096)           = ? ERESTARTSYS (To be restarted)
--- SIGTTIN (Stopped (tty input)) @ 0 (0) ---
--- SIGTTIN (Stopped (tty input)) @ 0 (0) ---
read(0, 0x7fffafd46890, 4096)           = ? ERESTARTSYS (To be restarted)
--- SIGTTIN (Stopped (tty input)) @ 0 (0) ---
--- SIGTTIN (Stopped (tty input)) @ 0 (0) --- 
```

我的源代码，使用 -lutil -lncurses 编译：

```
#include <assert.h>
#include <string.h>
#include <errno.h>
#include <stdlib.h>
#include <stdbool.h>
#include <spawn.h>
#include <fcntl.h>
#include <sys/select.h>
#include <stdarg.h>
#include <unistd.h>
#include <stdio.h>
#include <malloc.h>
#include <curses.h>
#include <sys/ioctl.h>
#include <signal.h>

#ifdef __GNUC__
# define likely(x)       __builtin_expect((x),1)
# define unlikely(x)     __builtin_expect((x),0)
#else
# define likely(x)       (x)
# define unlikely(x)     (x)
#endif

int mpt; /* master pty */
pid_t pid = 0; /* child pid */
bool childexit = false;

int max (int ini, ...) {
  /* the maximum of positive integers, terminated with -1 */
  va_list ap;
  va_start(ap, ini);
  int ret = -1;
  while (ini != -1) {
ret = (ret < ini) ? ini : ret;
ini = va_arg(ap, int);
  }
  va_end(ap);
  return ret;
}
/* atexit */
void close_child (void) {
  if (! childexit) {
kill (pid, SIGTERM);
  }
}
void reset_term (void) {
  endwin();
}
/* signal handlers */
void sigwinch (int sig) {
  (void) sig;
  struct winsize w;
  if (ioctl(STDOUT_FILENO, TIOCGWINSZ, &w) != -1) {
ioctl(mpt, TIOCSWINSZ, &w);
  }
}
void sigchld (int sig) {
  (void) sig;
  //childexit = true;
  exit(EXIT_SUCCESS);
}
void sigusr1 (int sig) {
  (void) sig;
  struct winsize w;
  ioctl(STDIN_FILENO, TIOCGWINSZ, &w);
  w.ws_row = 25;
  w.ws_col = 25;
}
int main (void) {
  atexit(close_child);
  atexit(reset_term);
  char* spawnedArgs[] = { "/usr/bin/emacs", "-nw", NULL };
  char* spawnedEnv[] = { "TERM=xterm", NULL };
  size_t slave_len = 128 * sizeof(char);
  char* slave = malloc (slave_len);
  if (slave == NULL) {
fprintf(stderr, "Cannot allocate slave var");
exit(EXIT_FAILURE);
  }
  mpt = posix_openpt(O_RDWR | O_NOCTTY);
  if (mpt < 0) {
perror("Cannot open Master");
exit(EXIT_FAILURE);
  }
  if (grantpt(mpt) < 0) {
perror("Cannot grant Terminal");
exit(EXIT_FAILURE);
  }
  if (unlockpt(mpt) < 0) {
perror("Cannot unlock Terminal");
exit(EXIT_FAILURE);
  }
  while ((ptsname_r(mpt, slave, slave_len)) != 0) {
int e = errno;
if (e == ERANGE) {
  slave_len *= 2;
  slave = realloc(slave, slave_len);
  if (slave == NULL) {
    fprintf(stderr, "Cannot reallocate slave var\n");
    exit(EXIT_FAILURE);
  }
} else {
  fprintf(stderr, "Cannot get name of terminal: %s\n", strerror(e));
  exit(EXIT_FAILURE);
}
  }
  int slavefd = open(slave, O_RDWR | O_NOCTTY);
  if (slavefd < 0) {
perror("Cannot open Slave");
exit(EXIT_FAILURE);
  }
  posix_spawn_file_actions_t action;
  posix_spawnattr_t attrs;
  sigset_t set;
  sigemptyset(&set);
  posix_spawnattr_setsigmask(&attrs, &set);
  posix_spawnattr_setflags(&attrs, POSIX_SPAWN_SETSIGMASK);
  posix_spawn_file_actions_init(&action);
  posix_spawn_file_actions_adddup2(&action, slavefd, STDOUT_FILENO);
  posix_spawn_file_actions_adddup2(&action, slavefd, STDIN_FILENO);
  posix_spawnp(&pid, spawnedArgs[0], &action, &attrs, spawnedArgs, spawnedEnv);

  fd_set rfds, wfds;
  int sel, nfds;

  char mystdin[4096], yourstdout[4096];
  int mystdindef = 0, yourstdoutdef = 0;

  signal(SIGWINCH, sigwinch);
  signal(SIGCHLD, sigchld);
  signal(SIGUSR1, sigusr1);

  initscr (); raw (); noecho ();

  while (1) {
  begin_select_loop:

nfds = 0;

FD_ZERO(&rfds);
FD_ZERO(&wfds);

/* read if buffers are empty, write if buffers are filled */

if (mystdindef == 0) {
  FD_SET(STDIN_FILENO, &rfds);
  nfds = max(nfds, STDIN_FILENO, -1);
} else {
  FD_SET(mpt, &wfds);
  nfds = max(nfds, mpt, -1);
}

if (yourstdoutdef == 0) {
  FD_SET(mpt, &rfds);
  nfds = max(nfds, mpt, -1);
} else {
  FD_SET(STDOUT_FILENO, &wfds);
  nfds = max(nfds, STDOUT_FILENO, -1);
}

sel = select(1 + nfds, &rfds, &wfds, NULL, NULL);
if (sel < 0) {
  int e = errno;
  if (unlikely(e == EINTR)) {
    /* A signal has interrupted us. Well, I guess this might be
       one of the few legit uses of goto, since C99 has no good
       mechanism for continuations yet. */
    goto begin_select_loop;
  } else {
    fprintf(stderr, "Error calling select: %s\n", strerror(e));
    exit(EXIT_FAILURE);
  }
}

if (FD_ISSET(STDIN_FILENO, &rfds)) {
  mystdindef = read (STDIN_FILENO, mystdin, sizeof(mystdin));
  if (unlikely(mystdindef == -1)) {
    perror("Reading from stdin");
    exit(EXIT_FAILURE);
  } else if (unlikely(mystdindef == 0)) {
    /* EOF */
    //exit(EXIT_SUCCESS);
  }
}

if (FD_ISSET(mpt, &rfds)) {
  yourstdoutdef = read (mpt, yourstdout, sizeof(mystdin));
  if (unlikely(yourstdoutdef == -1)) {
    perror("Reading from master");
    exit(EXIT_FAILURE);
  } else if (unlikely(yourstdoutdef == 0)) {
    /* EOF */
    //exit(EXIT_SUCCESS);
  }
}

if (FD_ISSET(STDOUT_FILENO, &wfds)) {
  int written = write(STDOUT_FILENO, yourstdout, yourstdoutdef);
  if (unlikely(written == -1)) {
    perror("Writing to stdout");
    exit(EXIT_FAILURE);
  } else if (unlikely(written < yourstdoutdef)) {
    memmove(yourstdout, yourstdout + written, yourstdoutdef -= written );
  } else {
    yourstdoutdef = 0;
  }
}

if (FD_ISSET(mpt, &wfds)) {
  int written = write(mpt, mystdin, mystdindef);
  if (unlikely(written == -1)) {
    perror("Writing to stdout");
    exit(EXIT_FAILURE);
  } else if (unlikely(written < mystdindef)) {
    memmove(mystdin, mystdin + written, mystdindef -= written );
  } else {
    mystdindef = 0;
  }
}
  }
} 
```

我会很感激任何帮助，我真的不知道会发生什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:42:47.160

您不会`posix_spawnattr_t`通过初始化对象`posix_spawnattr_init()`（可能会导致使用意外属性），也不会破坏对象`posix_spawnattr_t`或`posix_spawn_file_actions_t`对象。

子进程既没有伪终端作为它的标准错误（fd 2），也没有作为它的控制终端。因此，它将部分表现得好像附加到原始 tty 而不是新的 tty。

前者很容易通过另一个 dup2 修复。后者需要在子进程中调用`setsid()`、调用非标准函数如`tcsetsid()`或ioctl；`TIOCSCTTY`因此，您需要从`posix_spawnp()`到`fork()`和`execve()`。

如果您不介意使用更多非标准函数，可以使用`login_tty()`或简化代码`forkpty()`。

# haskell - 如何从获取有关父节点信息的函数构建树

> ID：14793209
> 
> 赞同：0
> 
> 时间：2013-02-10T00:21:40.770
> 
> 标签：haskell

我有一个函数，它接收一些数据并返回一个值数组。我需要将数据列表映射到树上。

当我创建树时，每次调用我的函数都需要三个参数：

*   字符串中的一个字符
*   字符串中字符的索引
*   节点父节点的函数输出的一部分（或根节点的零）

为了争论，假设我有：

```
input = "ABC"

func :: (Char, Int, Int) -> [(Char, Int, Int)]
func ('A', 1,    0) = [('Q', 1, 1243)]
func ('B', 2, 1243) = [('D', 2, 7512), ('R', 2, 8253)] -- 1243 taken from above
func ('C', 3, 7512) = [('E', 3, 2765)]
func ('C', 3, 8253) = [('Z', 3, 9836)] 
```

这将映射到一棵树，例如：

```
 ('Q', 1243)
     /       \
('D',7512)  ('R',8253)
    |         |
('E',2765)  ('Z',9836) 
```

前两个参数很好，我可以在构建列表之前获取它们：

```
input `zip` [1..] 
```

我不确定如何获取第三个参数，因为在开始构建树之前我只知道根节点的值（将为零）。我必须学习 Monads 吗？

注意：我对 Haskell 和一般的函数式编程完全陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:17:14.390

你追求的是这样的东西吗？

```
import Data.Tree

buildForest :: String ->
               ((Char, Int, Int) -> [(Char, Int, Int)]) ->
               Forest (Char, Int)
buildForest input children = go input 1 0
    where
        go []     _ _ = []
        go (x:xs) i n = map transform (children (x,i,n))
            where
                transform (y,_,n') = Node (y,n') (go xs (i+1) n') 
```

然后使用您的示例，您可以将其称为`buildForest "ABC" func`.

（代码未经测试，但如果它是错误的，你应该仍然能够使用一般方法。）

# php - 从 URL 中获取值，无需刷新页面或单击按钮

> ID：14793211
> 
> 赞同：1
> 
> 时间：2013-02-10T00:22:05.780
> 
> 标签：php, javascript, jquery, ajax

我目前创建了一个表单，它将获取 youtube 链接并解析/正则表达式提取 ID。该功能通过单击按钮执行，然后打印`URL`. 有没有办法让它显示`ID`没有按钮点击和页面刷新？[例子](http://webprolearner2346.zxq.net/testYTvid/test.php)

```
if(isset($_POST['ytinput'])){

function getYoutubeId($sYoutubeUrl) {

    # set to zero
    $youtube_id = "";
    $sYoutubeUrl = trim($sYoutubeUrl);

    # the User entered only the eleven chars long id, Case 1
    if(strlen($sYoutubeUrl) === 11) {
        $youtube_id = $sYoutubeUrl;
        return $sYoutubeUrl;
    }

    # the User entered a Url
    else {

        # try to get all Cases
        if (preg_match('~(?:youtube\.com/(?:user/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu\.be/)([^"&?/ ]{11})~i', $sYoutubeUrl, $match)) {
            $youtube_id = $match[1];
            return $youtube_id;
        }
        # try to get some other channel codes, and fallback extractor
        elseif(preg_match('~http://www.youtube.com/v/([A-Za-z0-9\-_]+).+?|embed\/([0-9A-Za-z-_]{11})|watch\?v\=([0-9A-Za-z-_]{11})|#.*/([0-9A-Za-z-_]{11})~si', $sYoutubeUrl, $match)) {

            for ($i=1; $i<=4; $i++) {
                if (strlen($match[$i])==11) {
                    $youtube_id = $match[$i];
                    break;
                }
            }
            return $youtube_id;
        }
        else {
            $youtube_id = "No valid YoutubeId extracted";
            return $youtube_id;
        }
    }
}

 print 'Result: ' . getYoutubeId($_POST['ytinput']);

}

?>

<form action="" method="POST">
    <input type="text" name="ytinput" value="<? $sYoutubeUrl ?>">
    <input type="submit" value="Parsen">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:49:49.170

这样做的方法是通过 Javascript 使用 Ajax。

请注意，此解决方案需要使用 jQuery JavaScript 库。见[http://jquery.com/](http://jquery.com/)

首先，我们需要通过执行以下操作从表单中获取 url：

```
var sYoutubeUrl = $('input [name="ytinput"]').val(); 
```

然后我们需要向您的函数文件发出 Ajax 请求，并获得结果。

```
$.ajax({
        type: 'get',
        url: '<relative link to function file>/file.php',
        data: 'sYoutubeUrl='+sYoutubeUrl,

        //Catch the result
        success: function(response) {
            //Assign response to a variable
            var youtube_id = response;
            //Display response inside the form
            $('input [name="ytinput"]').val('youtube_id');
        },

    }); 
```

这只是一个基本指南，您需要稍微更改您的 php 文件，并将您的表单从 POST 触发表单更改。此外，您还需要将我给您的 JS 放在触发事件中，可能在表单提交上，例如：

```
$('form').submit(function() {
   //Code above here
}); 
```

# nservicebus - Web API CurrentMessageContext 空

> ID：14793215
> 
> 赞同：1
> 
> 时间：2013-02-10T00:22:24.423
> 
> 标签：nservicebus

我在 api 控制器中有以下方法

```
[System.Web.Mvc.HttpPost]
public Task<CommandResponse> Send(CommandBase command)
{
    var result = new TaskCompletionSource<CommandResponse>();

    this.Bus.Send(command).Register<int>(response =>
         {
          this.Bus.CurrentMessageContext is here null <-------
          result.TrySetResult(commandResponse);
         });
    return result.Task;
 } 
```

知道为什么 CurrentMessageContext 在这里为空。我正在关注请求/响应示例。这里唯一的区别是使用 Task 的异步模式。

谢谢， 马林科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T02:30:15.120

回调正在另一个线程中触发，并且由于`Bus.CurrentMessageContext`使用`ThreadStatic`属性，如果从不同的线程访问，则值为 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T14:14:46.120

在 AsyncPagesMVC3 示例中，您必须显式调用 Install 函数，请参见 Global.asax.cs 中 Application_Start() 方法的最后一行：

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        // NServiceBus configuration
        Configure.WithWeb()
            .DefaultBuilder()
            .ForMvc()
            .JsonSerializer()
            .Log4Net()
            .MsmqTransport()
                .IsTransactional(false)
                .PurgeOnStartup(true)
            .UnicastBus()
                .ImpersonateSender(false)
            .CreateBus()
            .Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install());
    } 
```

# android - 如何在 Android 上设置 Google Drive 访问超时

> ID：14793218
> 
> 赞同：1
> 
> 时间：2013-02-10T00:22:31.033
> 
> 标签：android, google-drive-api, google-api-java-client

让我们列出来自 Google Drive 的文件：

```
GoogleAccountCredential credential = GoogleAccountCredential.usingOAuth2(
    context, DriveScopes.DRIVE);
Drive service = new Drive.Builder(AndroidHttp.newCompatibleTransport(), 
    new GsonFactory(), credential).build();
service.files().list().execute(); 
```

但是，如果没有可用的网络连接，execute() 几乎要花很长时间才能意识到。

从 GoogleAccountCredential 的来源可以看出，它使用 ExponentialBackOffPolicy，默认情况下最大经过时间限制为 15 分钟。

问题 1：有没有办法覆盖此行为并将超时限制设置为较低的值？

问题 2：service.files().list().execute() 在 AsyncTask 中运行。如果她不想等待 15 分钟超时，那么根据用户请求取消它的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T02:25:04.030

感谢您的反馈！

看起来没有任何方法可以自定义 GoogleAccountCredential 上的指数退避策略。我在这里提交了一个功能请求：

[https://code.google.com/p/google-api-java-client/issues/detail?id=734](https://code.google.com/p/google-api-java-client/issues/detail?id=734)

看起来也没有取消的好方法。在此处提交的功能请求：

[https://code.google.com/p/google-api-java-client/issues/detail?id=735](https://code.google.com/p/google-api-java-client/issues/detail?id=735)

注意：我是[google-api-java-client](https://code.google.com/p/google-api-java-client/)项目的所有者

# javascript - 关闭后隐藏的模态 div 仍然存在

> ID：14793219
> 
> 赞同：1
> 
> 时间：2013-02-10T00:22:32.160
> 
> 标签：javascript, html, css, twitter-bootstrap

我在关闭模式和 Twitter Bootstrap 方面遇到了很大的问题。我会尽力解释。

我有一个可以打开和关闭的模态，效果很好。除了当我关闭模式时，div 似乎仍然存在（但它是隐藏的），悬停在导航栏上，这很痛苦，因为它位于导航栏上方并且无法单击任何链接。该错误似乎仅限于 Safari 和 Chrome（在 Firefox 中不会发生）。

我附上了两张图片以帮助进一步说明问题[[第一](https://www.dropbox.com/s/dh0d6z1vsp55843/navbarissue_1.png)，[第二](https://www.dropbox.com/s/nqnvbqxcdq2rn9u/navbarissue_2.45%20AM%20copy.png)]。第一个是在我关闭模式后显示导航栏上的整个 div，第二个是显示问题似乎出在模式页脚上。

我一生都无法弄清楚出了什么问题，我也无法在引导程序中找到任何与之相关的错误报告。

编辑：包括一些 HTML

```
<div id="IMS_modal" class="modal hide fade" tabindex="-1">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3 id="IMS_modalHeader">
            Editing Data
        </h3>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" id="IMS_editform">
            <div class="control-group" style="display:none;">
                <label class="control-label">ID</label>
                <div class="controls">
                    <input type="text" id="IMS_ID">
                </div>
            </div>
            <div class="control-group" id="IMS_servername_control">
                <label class="control-label">Server Name</label>
                <div class="controls">
                    <input type="text" id="IMS_servername"> &nbsp;<a href="#" rel="tooltip" id="IMS_servername_tooltip" title="Please provide a valid server name"></a>
                </div>
            </div>
            <div class="control-group" id="IMS_nodeid_control">
                <label class="control-label">Node ID</label>
                <div class="controls">
                    <input type="text" id="IMS_nodeid" maxlength="8"> &nbsp;<a href="#" rel="tooltip" id="IMS_nodeid_tooltip" title="Please provide a valid node ID"></a>
                </div>
            </div>
            <div class="control-group" id="IMS_ipaddress_control">
                <label class="control-label">IP Address</label>
                <div class="controls">
                    <input type="text" id="IMS_ipaddress"> &nbsp;<a href="#" rel="tooltip" class="validate" id="IMS_ipaddress_tooltip" title="Please provide a valid IP Address"></a>
                </div>
            </div>
                <div class="control-group" id="IMS_activeims_control">
                    <label class="control-label">Port</label>
                    <div class="controls">
                        <input type="text" maxlength="4" id="IMS_port"> &nbsp;<a href="#" rel="tooltip" id="IMS_port_tooltip" title="Please provide a valid active state"></a>
                    </div>
                </div>
                <br/>
            <div class="control-group" id="IMS_activeims_control">
                <label class="control-label">Active IMS</label>
                <div class="controls">
                    <input id="IMS_activeims" type="checkbox" name="vehicle" value="true"><br>
                </div>
            </div>
            <div class="control-group" id="IMS_activeims_control">
                <label class="control-label">Monitor Connections</label>
                <div class="controls">
                    <input id="IMS_monitor" type="checkbox" name="vehicle" value="true"><br>
                </div>
            </div>
        </form>
    </div>

    <div class="modal-footer">
        <button class="btn btn-success" onclick="saveIMSEdit()">Save changes &nbsp;</button> <button class="btn" data-dismiss="modal">Close</button>
    </div>
</div> 
```

# jquery - Supersize 插件中的多个滑块

> ID：14793220
> 
> 赞同：1
> 
> 时间：2013-02-10T00:22:32.213
> 
> 标签：jquery, slideshow

我有一个关于 Supersize 插件的问题（有关它的信息可以在[这里](http://buildinternet.com/2011/07/supersized-3-2-fullscreen-jquery-slideshow/)找到）。到目前为止，这是我的网站：[hellothisis.cc](http://www.hellothisis.cc)

我的滑块和标题工作得很好，但我希望每个标题都可以点击以加载另一个包含该项目中图像的滑块......我希望这是有道理的。

例如，第一个项目显示“Wood Slip Binding”，我希望能够单击“Wood Slip Binding”并让滑块切换到仅该项目的一组图像，而不是循环浏览不同的项目。

我想在滑块脚本代码中使用 html 将标题设为链接？但是有没有办法在该页面中有多个滑块，并让每个标题调用不同的滑块？还是让 html 链接加载带有特定滑块的单独页面更好？

# javascript - 使用 jQuery 延迟弹出菜单

> ID：14793226
> 
> 赞同：3
> 
> 时间：2013-02-10T00:23:04.997
> 
> 标签：javascript, jquery

我有一个基于 jQuery 构建的菜单，并按照[教程](http://tympanus.net/codrops/2010/07/16/slide-down-box-menu/)构建它。我想在鼠标离开菜单时添加延迟以获得更好的用户体验。我可以使用 jQuery 让菜单延迟`delay`，它运行良好，但有一个例外，即飞出下拉菜单。

由于代码的长度，我有一个带有代码的工作[jsFiddle](http://jsfiddle.net/Lynda333/6nKeM/4/)。我所指的弹出菜单包含单词`Website` `Illustrations`和`Photography`。

如何延迟弹出按钮，以便在菜单执行 vs 立即消失时关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:43:00.803

doTimeout jQuery 插件[非常](http://benalman.com/code/projects/jquery-dotimeout/examples/hoverintent/)适合您想要做的事情。

[看看这些例子](http://benalman.com/code/projects/jquery-dotimeout/examples/hoverintent/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:44:44.340

[试试这个](http://jsfiddle.net/FloydPink/46We5/1/)

这是什么：

```
$jsub_menu.hide().css('left','0px'); 
```

现在改成这样：

```
$jsub_menu.delay(100).animate({'left':'0px'},100).hide('100'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T00:56:19.750

```
Here is another take on it: 
```

[**在这里**](http://jsfiddle.net/aaaheatair/Bsybs/1/)

# json - JSON 循环通过使用 Perl 的 Google 地理编码 address_components

> ID：14793228
> 
> 赞同：0
> 
> 时间：2013-02-10T00:23:06.667
> 
> 标签：json, perl, google-maps, google-geocoder

我编写了一个脚本来使用 perl 和 json 从谷歌地理编码器中获取一些信息。下面的示例使用机场缩写获取地址信息。

```
use JSON;
use LWP::Simple;

my $geo_url = "http://maps.google.com/maps/api/geocode/json?sensor=false&address=PHL";

my $response = get($geo_url);
my $json = decode_json($response);

my $location = $json->{results}[0]->{geometry}->{location};
my $address  = $json->{results}[0]->{formatted_address};

print "<br />Latitude: ".$location->{lat}." Longiude: ".$location->{lng};
print "<br />Address: ".$address; 
```

我可以使用以下方法获取 address_component 数组的各个部分：

```
$json->{results}[0]{address_components}[0]->{short_name};
$json->{results}[0]{address_components}[1]->{short_name}; 
```

但我真正想做的是获取城市、州和邮政编码（postal_code）。为此，我需要遍历 address_components 并运行如下内容：

```
for (keys $json->{results}[0]{address_components}) {
  if ($json->{results}[0]{address_components}[$i]->types[0] eq "postal_code") {
    print "Zip: ".$json->{results}[0]{address_components}[$i]->{short_name};
    }
  } 
```

显然这不是有效的代码，但我想解释一下我想要做什么。这是我无法工作的循环。我已经尝试了很多配置，即使数组项长度为 6，我仍然得到 1 的数组长度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:33:49.130

基于

```
$json->{results}[0]{address_components}[0]->{shortname};
$json->{results}[0]{address_components}[1]->{shortname}; 
```

`$json->{results}[0]{address_components}`持有对数组的引用。虽然您可以在技术上调用`keys`数组引用来获取最新版本的 Perl 中的索引列表，但在这种情况下（以及大多数其他情况）获取数组元素的列表更简单。

```
for my $address_component (@{ $json->{results}[0]{address_components} }) {
    if ( $address_component->{types}[0] eq "postal_code") {
       print "Zip: $address_component->{shortname}\n";
    }
} 
```

可能会更好地查看所有类型。

```
for my $address_component (@{ $json->{results}[0]{address_components} }) {
    if (grep { $_ eq "postal_code" } @{ $address_component->{types} }) {
       print "Zip: $address_component->{shortname}\n";
    }
} 
```

# php - 如何从 php 变量中分配 jquery 中的类？

> ID：14793230
> 
> 赞同：1
> 
> 时间：2013-02-10T00:23:31.977
> 
> 标签：php, javascript, jquery

是否可以将 php 变量中的类分配给 jquery 中的新附加 div？

```
$newItems = $('<div class="PHP VARIABLE PRINTS HERE A CLASS"></div>'); 
```

就我而言，对于其他事情，我正在定义一个 var 来定义我然后在 jquery 中附加的内容，但我需要从 php 变量中获取新插入的 div 的类。是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T00:28:16.053

**在 PHP 中**

```
<?php
    // First you need to have the variable with the name of classe
    $myClass = 'name_of_my_classe';
?> 
```

**在 Javascript 中：**

```
$newItems = $('<div class="<?php echo $myClass; ?>"></div>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:30:44.907

我想有两种不同的方式来做这件事。

首先，您可以使用 Ajax 从 php 变量中更早地获取变量，或者您可以简单地从文件中的函数内联回显该变量。

第一种使用 Ajax 的方法可能是一种更标准的方法，而我认为后一种方法有点快和脏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T00:33:29.873

我认为 PHP 和 JavaScript 代码的硬核混合是一种反模式，可能会导致混乱。我会限制 PHP 排放以构建 HTML 并使用 JavaScript 代码来解析所述 HTML 以获得您想要的客户端结果：

```
//php
echo '<span hidden id=class-container data-class=name_of_my_class>';

//JavaScript
$("<div>").addClass($("#class-container").data('class')); 
```

# .htaccess - .htaccess 如何在页面不在同一目录中的情况下显示页面？

> ID：14793231
> 
> 赞同：-1
> 
> 时间：2013-02-10T00:23:35.140
> 
> 标签：.htaccess, file-upload, file-structure

我正在尝试制作一个上传脚本，并且我想让相同的文件/页面显示在所有空目录（以及填充的目录）上。该文件/页面将被显示并充当任何其他文件/页面，但它实际上并不存在。我认为 .htaccess 文件可能能够做到这一点。

一个例子是：当你创建一个目录时，你上传的文件将可供你用来上传到你的新目录，但它不会让你在上传时不小心覆盖同一个文件。这也将节省空间，具体取决于您必须创建多少个目录。

如果每次创建目录时都创建文件副本，并且创建十亿个目录，则创建十亿个文件……即使每个文件有 1 KB，这也很多！

我的策略是使用 1 个文件并使其对子目录通用，而实际上不会占用比一个上传文件更多的空间。

顺便说一句，我使用的是标准的 GoDaddy 托管 Linux 服务器。它上面有 PHP 5.3。

**我希望这个 .htaccess 文件下面的所有目录都有这个“规则”，而不是 .htaccess 文件所在的目录。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:08:27.267

要使目录路径（不以文件名结尾）都显示相同的索引页面，例如：`http://www.example.com/directory1/`或者`http://www.example.com/directory2`每个 load `http://www.example.com/defaultindex.html`，请尝试以下操作：

```
RewriteRule ^[^.]+$ /defaultindex.html [L] 
```

这表示匹配任何不包含点的路径（因此不以 .html、.jpg 等结尾）并将其重写为文件 example.com/defaultindex.html（此文件必须存在于这一位置）。

这是一个非常普遍的规则，显然可以匹配很多东西，但这似乎是你想要的。如果您需要排除任何特定的目录路径，则需要添加 RewriteConds 或使规则更具体，但这应该是一个起点。

# twitter-bootstrap - 如何创建可调节的分屏 Twitter 引导程序

> ID：14793232
> 
> 赞同：1
> 
> 时间：2013-02-10T00:23:48.527
> 
> 标签：twitter-bootstrap, frontend

我想使用 twitter 引导程序创建一个分屏。有点像 2 个容器相互排成一排，除了我想要更改容器宽度的选项....就像我正在更改浏览器的大小一样。这可能吗？我试图用一张图片来解释。

[图片中的解释](http://imgur.com/bZWx33v)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-14T22:09:53.073

您可以考虑[Onsen](http://onsenui.io/)拆分视图。虽然它不可调整大小，但它确实会在窄屏幕上折叠以形成滑出菜单：

[https://onsen.io/v1/reference/ons-split-view.html](https://onsen.io/v1/reference/ons-split-view.html)

```
<ons-split-view
  secondary-page="secondary.html"
  main-page="main.html"
  main-page-width="70%"
  collapse="portrait">
</ons-split-view> 
```

不幸的是，Onsen 提供了一系列已经存在于 bootstrap 中的 ui 元素。所以你会有一些冗余。像你一样，我也更喜欢以引导程序为中心的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:27:09.967

Bootstrap doesn't include this kind of functionality.

You'll need to use something like the [jQuery Splitter](http://methvin.com/splitter/) plug-in to do what you described.

# java - 在 android 上使用谷歌地图 v2 获取用户位置？

> ID：14793233
> 
> 赞同：4
> 
> 时间：2013-02-10T00:24:02.610
> 
> 标签：java, android, google-maps, google-maps-android-api-2

每次位置更改时，我都想在地图上放置一个标记。我正在从 中获取 Lat 和 Long并在该方法中`Location`创建一个标记。`onLocationChanged()`为什么不创建标记？

```
 public class MainActivity extends FragmentActivity implements LocationListener
{
Context context = this;
GoogleMap googlemap;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initMap();
    addTwittertoMap();

    LocationManager lm = (LocationManager) getSystemService(LOCATION_SERVICE);
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 0,
            this);
    String provider = lm.getBestProvider(new Criteria(), true);

}

public void onLocationChanged(Location location) {
    LatLng current = new LatLng(location.getLatitude(), location.getLatitude());
    Date date = new Date();

    googlemap.addMarker(new MarkerOptions()
            .title("Current Pos")
            .snippet(new Timestamp(date.getTime()).toString())
            .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_BLUE))
            .position(current)
            );
}

public void onStatusChanged(String provider, int status, Bundle extras) {
}

public void onProviderEnabled(String provider) {
}

public void onProviderDisabled(String provider) {

}
private void initMap(){
    SupportMapFragment mf = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);
    googlemap = mf.getMap();

    googlemap.setMyLocationEnabled(true);
    googlemap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T01:00:29.500

`LatLng current = new LatLng(location.getLatitude(), location.getLatitude());`应该 `LatLng current = new LatLng(location.getLatitude(), location.getLongitude());`

另外，作为对 LocationManager 配置的改进，我建议这样设置：

```
 LocationManager lm = (LocationManager) getSystemService(LOCATION_SERVICE);
    String provider = lm.getBestProvider(new Criteria(), true);
    lm.requestLocationUpdates(provider, 10000, 0, this); 
```

# javascript - CSS三角形点击翻转

> ID：14793234
> 
> 赞同：2
> 
> 时间：2013-02-10T00:24:07.220
> 
> 标签：javascript, jquery, css, geometry, transform

好的，所以我有这个三角形 div，当我单击它时，它只旋转 180 度。好的，到目前为止一切顺利，但如果我再次点击它，它保持不变这是我的代码。

```
$('.Triangle').click(function()
{
    var Location = $('.Triangle').offset().left;
    $('#Account').css({"left" : Location});
    $('#Account').slideToggle('fast');
    $('.Triangle').css({"transform" : "rotate(180deg)"});
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T00:28:41.783

转换不能那样工作（即你不能应用它两次）。您必须跟踪状态：

```
$(".Triangle").on('click', function () {
    if ($(this).data('flipped') {
         $(this).data('flipped', false).css('transform', 'rotate(0deg)');
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T00:28:55.173

'transform' 样式设置元素从其原始位置开始的旋转。当您第一次单击它时，它会将元素从 旋转`0deg`到`180deg`。当您再次单击它时，它会将旋转从 更改`180deg`为`180deg`。

您需要为点击次数保留一个计数器，并将其乘以您的旋转速度。这样的事情应该可以解决问题：

```
var count = 1;
$('.Triangle').click(function() {
    var Location = $('.Triangle').offset().left;
    $('#Account').css({"left" : Location});
    $('#Account').slideToggle('fast');
    $('.Triangle').css({"transform" : "rotate(" + (180 * count++) + "deg)"});
});` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T00:32:22.757

```
var i = 0;
$('.Triangle').click(function() {
    i++;
    var Location = $('.Triangle').offset().left;
    $('#Account').css({"left" : Location});
    $('#Account').slideToggle('fast');
    $('.Triangle').css({"transform" : "rotate(" + (i % 2 ? 0 : 180 + "deg)"});
}); 
```

# git - 从 git 存储库中获取特定修订号的文件

> ID：14793235
> 
> 赞同：1
> 
> 时间：2013-02-10T00:24:12.870
> 
> 标签：git, svn

我有一个 Git 存储库，其中文件仅通过一个分支提交。我只使用这些命令：

```
git init
git add -A
git commit -m "msg" 
```

我想获得文件的特定版本。这个版本是用一个数字指定的。目前我使用这个：

如果修订总数为 1：`git show HEAD:path`

如果修订号 > 1，则：`git show HEAD~n:path`

但是，当我运行代码时，在某些情况下我会收到一条错误消息，例如：无效的对象名称：HEADn（其中 n 是一个数字）。在颠覆中，我使用了`svn cat`命令。

### 更新

由于我不断更新存储库，因此如果可能，我不想在修订时签出存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:29:38.390

其他等效于的命令`svn cat`：

```
git cat-file blob ref:path/to/file
git show ref:path/to/some/file.cs. 
```

请参阅[指定修订](http://git-scm.com/docs/gitrevisions.html)以将 ref 替换为（SHA1、标签、分支……或者，当您使用时，`<rev>~<n>, e.g. master~3`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:50:32.690

关于 git 要记住的主要一点是，一切都基于您的提交。提交哈希标识它，标签、分支只是标识提交的附加机制，尽管在分支的情况下它不是静态的，它会随着 HEAD 移动。

所以..为了检查特定修订版的文件，您只需要找到该修订版所在的提交，您可以查看特定文件的历史记录...

```
git log --no-merges --oneline -- <path> 
```

或者，如果您使用 Git Extensions 或其他 GUI，则会有一个文件历史命令来直观地显示您。

一旦您知道提交哈希是什么，您就可以使用

```
git checkout <hash>:<path> 
```

# python - Python将线程引用传递给日志记录LogHandler模 块

> ID：14793236
> 
> 赞同：1
> 
> 时间：2013-02-10T00:24:34.520
> 
> 标签：python, python-2.7

我有一个模块来设置我的日志记录，我在其中定义了一个 LogHandler。在这个 LogHandler 中，我想将消息传递给从我的主 python 文件（包含我的日志记录模块的那个）创建的线程中的一个函数。我发现我可以将线程引用传递给我的日志记录模块（需要 id），但我不知道如何让它被 LogHandler 回调访问。

这是它的样子：

```
main.py
import WebSocket
import Log

wsthread = WebSocket()
wsthread.start() # thread manages websocket connection which can pipe data to 

Log.setup() # I could pass thread here if needed

WebSocket.py
class WebSocket (threading.Thread):  
    def send(self, msg):
        #send msg to websocket

Log.py
class Log():
    @staticmethod
    def setup(self):
        logger = logging.getLogger("testlogger")
        handler = LogHandler()
        logger.addHandler(handler)

class LogHandler(logging.Handler):
    def emit(self, record):
        # i want to send the 'record' txt to wsthread.send(self.format(record)) 
```

在 python 中解决这个问题的正确范例是什么？

# php - 如果在 mysql 或 php 中执行

> ID：14793242
> 
> 赞同：0
> 
> 时间：2013-02-10T00:25:18.577
> 
> 标签：php, mysql, database-design, if-statement

我有 3 张桌子：

-用户

-超级用户

-特殊用户

`SpecialUser`并且`SuperUser`是`User`表的扩展。假设`User`表有 { `name`, `email`}，`SuperUser`有 { `idUser`, `superPower`} 并且`specialUser`有 { `idUser`, `hairColor`}。

当然 a`SpecialUser`和 a`SuperUser`有一个`name`and`email`来自用户表。这意味着 User 可以是 a`SuperUser`或 a `SpecialUser`。

我的问题是如何执行获取用户所有信息的查询（在查询之前我不知道他是特殊用户还是超级用户）。

我想到了两种方法：

-在用户表中放置一列“userType”（0：他是特殊用户，1：他是超级用户）

使用这种方法，我应该在内部使用 IF 进行 MySQL 查询吗？（查询会是什么）。或者我应该做简单的查询（单独获取用户表）然后在 PHP 中我做一个 if 并查询正确的表（超级或特殊表）

或者

- 不放置任何列并在用户的 id 上使用 2 个连接执行 MySQL 查询（从技术上讲，2 个连接之一不会返回任何内容）

应该使用哪一个？（我关心的是速度性能，而不是内存——假设这些表有超过 100 万行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:56:22.663

尽管我有一个想法，但要在没有分支的情况下做到这一点可能会很棘手；既然你说内存不是问题，但性能是。

首先在`User`表中创建一个列并像您建议的那样调用它`userType`，并将表名的内容存储在一个可解析的字符串中，然后将表列存储在一个可解析的字符串中，例如：

> (SuperUser/SpecialUser), ("idUser, superPower"/"idUser, hairColor")

例子：

> "SuperUser, idUser, superPower" //对于超级用户

在伪代码中：

```
SELECT `userType` FROM `usersTable` WHERE name = [put var here]
Let the returned value be valRet
parse the valRet into an array... //the first value is the table name, the remaining values are column names
make a second sql query based on the array 
```

性能方面我相信这很好，因为**没有分支**。但是，我不确定您会对字符串解析产生什么样的性能影响。尝试在几千个查询上对其进行基准测试以查看。

//也可以在这里查看类似问题的答案： [Using an IF Statement in a MySQL SELECT query](https://stackoverflow.com/questions/8444570/if-statement-in-mysql-select-query)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:30:17.730

我将如何做到这一点是在伪 sql 中：

```
Select * from user
left outer join superuser
left outer join specialuser 
```

并归还一切。如果超级用户的字段不为空，那么在 PHP 中您可以对其进行操作，对于特殊用户也是如此。这给了你两个好处：

1）你不再需要一个字段来说明用户是什么类型的用户，加入的内容会告诉你。

2) 如果您愿意，您可以让用户同时成为超级用户和特殊用户。（如果你不希望这种情况发生，你可以使用约束或类似的方法来阻止它）

# css - 如何注入 into the head section of a page with a Chrome extension, using a content script

[问问题](https://stackoverflow.com/questions/ask)问问题 2013-02-10T00:25:23.673570 次This question shows research effort; it is useful and clear2This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I'm trying to make a very simple extension, that inserts this;

```
<style>

span.watch-view-count:hover {opacity: 1;}
span.watch-view-count {opacity: 0;}

</style> 
```

right before the body on any YouTube page I visit. I tried using content script to inject the code above, first I tried putting the code in a CSS file called `mycsscode.css` and adding it to my `manifest.json` file like this:

```
"js": ["script.js"] 
```

but I'm pretty sure nothing happened, since I viewed the source and couldn't find the code anywhere.

Then I tried following the first method in answer to this [question](https://stackoverflow.com/questions/9515704/building-a-chrome-extension-inject-code-in-a-page-using-a-content-script) but I changed the script.js to script.css hoping it would work, but nope it didn't so I'm stuck.

This are the codes I have so far; manifest.json file:

```
{
 "name": "Youtube views Hider",
 "version": "1.0",
 "manifest_version": 2,

 "description": "A plain text description",

 "permissions": [
 "*://youtube.com/*/",
 "tabs"],

 "content_scripts": [{
 "matches": ["*://youtube.com/*/"],
 "js": ["myscript.js"]}
]
} 
```

myscript.js:

```
var s = document.createElement('script');
s.src = chrome.extension.getURL("script.css");
s.onload = function() {
 this.parentNode.removeChild(this);
};
(document.head||document.documentElement).appendChild(s); 
```

Note: I'm almost an illiterate when it comes to coding lingo, so please put it in layman's terms.

[css](/tags/css "show questions tagged 'css'")[google-chrome-extension](/tags/google-chrome-extension "show questions tagged 'google-chrome-extension'")[content-script](/tags/content-script "show questions tagged 'content-script'")4

## 2 回答 2

This answer is useful3

如果您只是插入/更改 CSS，请不要使用该 javascript。将清单更改为：

```
{ "name": "Youtube views Hider", "version": "1.0", "manifest_version": 2, "description": "A plain text description", "content_scripts": [ { "matches": ["*://*.youtube.com/*"], "css": ["myCSS.css"] } ] } 
```

刚刚在哪里`myCSS.css`：

```
span.watch-view-count {opacity: 0 !important;} span.watch-view-count:hover {opacity: 1 !important;} 
```

笔记：

1.  将值更改`matches`为适用于实际的*YouTube* URL——通常具有以下形式：`http://www.youtube.com/watch?...`
2.  注意`!important`关键字的使用。
3.  如果您坚持程序化注入，请参阅[“如何在 Chrome 扩展程序中使用内容脚本文件注入 CSS？”](https://stackoverflow.com/q/11553600/331508) .

* * *

* * *

PS：如果您真正想做的只是改变页面的外观或 CSS，那么在 Chrome 或 Firefox 中， [Stylish 扩展是最快最简单的方法。](https://chrome.google.com/webstore/detail/stylish/fjnbnpbmkenffdnngjfgmeleoegfcffe?hl=en)[userstyles.org](http://userstyles.org/)
上还有数千种预制样式。[](http://userstyles.org/)

于 2013-02-10T02:06:30.937 回答This answer is useful0

我刚刚读到你说你是一个编码外行。创建扩展是困难的方法。

更简单的方法是添加名为[Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=en)的 Chrome 扩展来实现页面修改。

这是一个[很好的教程](http://hibbard.eu/tampermonkey-tutorial/)，可帮助您开始为 Tampermonkey（Firefox 中的 Greasemonkey）创建脚本。

这样您就无需担心在页面上运行脚本的机制。

于 2013-02-10T02:03:28.403 回答

#### Related

[1](/questions/13393435 "Question score (upvotes - downvotes)")[ios - 添加了自动空格](/questions/13393435)[0](/questions/13393440 "Question score (upvotes - downvotes)")[oracle - ORA-12560:TNS:协议适配器错误](/questions/13393440)[1](/questions/13393443 "Question score (upvotes - downvotes)")[kendo-ui - Kendo UI - 如何在编辑时使特定字段只读，同时在剑道网格中创建可编辑？](/questions/13393443)[1](/questions/13393444 "Question score (upvotes - downvotes)")[c++ - gnuplot 和 c++ 和管道](/questions/13393444)[0](/questions/13393445 "Question score (upvotes - downvotes)")[android - 移动搜索栏时，Android 视频视图未在暂停状态下播放](/questions/13393445)[2](/questions/13393451 "Question score (upvotes - downvotes)")[android - 将字符串以“@”开头放在android资源中](/questions/13393451)[0](/questions/13393462 "Question score (upvotes - downvotes)")[c# - 序列化关系而不是对象](/questions/13393462)[4](/questions/13393470 "Question score (upvotes - downvotes)")[c# - 我应该使用枚举还是只在需要它们内部值的地方使用单独的常量](/questions/13393470)[2](/questions/13393473 "Question score (upvotes - downvotes)")[android - 如何获得像-0400这样的时区值](/questions/13393473)[2](/questions/13393478 "Question score (upvotes - downvotes)")[module - Joomla 2.5 向组件添加插件](/questions/13393478)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：14793245
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# random - require/typed in typed racket... examples?

> ID：14793249
> 
> 赞同：1
> 
> 时间：2013-02-10T00:26:13.693
> 
> 标签：random, scheme, racket, typed-racket

I'm trying to do use the science.plt module in a typed racket program, but I'm having a hard time understanding how to use the require/typed form properly. I've read the docs repeatedly, but I guess I don't quite understand what exactly I'm trying to produce with the form.

In the

```
[struct name ([f : t] ...)] 
```

form, is the name a name I should expect to find in the module I want to require, or am I making it up for use within my own program?

Probably the most helpful thing for me would be an example or three of require/typed applied to untyped racket modules.

Or if I'm misunderstanding this *real* deeply and one cannot use untyped modules in a typed program, how should I go about structuring things? I really just need the random number and random distribution functionality from the science.plt module, and don't expect to have any other imports, at this point.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:31:44.343

您是否查看过 Typed Racket参考[页面](http://docs.racket-lang.org/ts-reference/special-forms.html?q=require/typed#(form._((lib._typed-racket/base-env/prims..rkt)._require/typed)))`require/typed`？那里有几个例子展示了如何从无类型模块导入。

子句中的`name`表达式`[#:struct name ([f : t] ...) struct-option ...]`应该是结构类型的名称。

也就是说，如果您有一个类似 的结构`(struct point (x y)`，`name`则应该是`point`。

# d3.js - 在 d3js 中缩放

> ID：14793256
> 
> 赞同：0
> 
> 时间：2013-02-10T00:27:34.697
> 
> 标签：d3.js

如果我有一组百分比范围从 -0.75 到 0.3 的数据数字，并且我想创建一个热图，其中 -0.75 是“亮红色”图块，0.3 值是“亮绿色值”，介于两者之间的是在这之间进行缩放。

我目前有这个：

js

```
var color = d3.scale.quantize()
.domain([-.7, .3])
.range(d3.range(11).map(function(d) { return "q" + d + "-11"; })); 
```

css

```
.RdYlGn .q0-11{fill:rgb(255,0,0)}
.RdYlGn .q1-11{fill:rgb(255,50,50)}
.RdYlGn .q2-11{fill:rgb(255,100,100)}
.RdYlGn .q3-11{fill:rgb(255,150,150)}
.RdYlGn .q4-11{fill:rgb(255,200,200)}
.RdYlGn .q5-11{fill:rgb(255,255,255)}
.RdYlGn .q6-11{fill:rgb(200,255,200)}
.RdYlGn .q7-11{fill:rgb(150,255,150)}
.RdYlGn .q8-11{fill:rgb(100,255,100)}
.RdYlGn .q9-11{fill:rgb(50,255,50)}
.RdYlGn .q10-11{fill:rgb(0,255,0)} 
```

但这些数字似乎并不正确。百分比似乎是这样缩放的：

```
.3 = q0  Green
.0 = q2
-.1 = q4
-.5 = q5  White
-.7 = q11 Red 
```

-.5 是我的白色中间值是有道理的，因为这是 0.3 和 -.7 的中值，但我不希望它是那样。有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-30T12:14:52.153

Fortunately there is a very simple way to accomplish what you want. Just use a polylinear scale, which is just a regular `d3.scale.linear()` with anchor points at each value where a new color should start.

To have red for negative values, white at zero, and green for positive, use:

```
polylinear_color = d3.scale.linear()
    .domain([-0.3, 0, 0.7])
    .range(['rgb(255,0,0)','rgb(255,255,255)','rgb(0,255,0)']) 
```

The scale does all the interpolation and instead of using classes you just set `.attr('fill',function(d){return polylinear_color(d);});` on the things being colored.

I made a jsfiddle to illustrate, [here](http://jsfiddle.net/laurieskelly/j4pH6/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T02:50:13.660

[在这里](https://github.com/mbostock/d3/wiki/Transitions#wiki-d3_interpolateHsl)查看 d3 的内置颜色插值器

在您的情况下，它看起来像这样：

```
var interpolator = d3.interpolateHsl('rgb(255,0,0)', 'rgb(0,255,0)');
var scale = d3.scale.linear()
  .domain([-.7, .3])
  .range([0, 1])
// interpolator(scale(0)) will return a color in between red and green 
```

# ruby-on-rails - 动作 form_for -> 显示

> ID：14793257
> 
> 赞同：0
> 
> 时间：2013-02-10T00:27:36.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

网址： `/evaluations`

我已经制作了一个表格来选择一个特定的项目（一个时期）

```
class EvaluationsController < ApplicationController
  def index
    @periods = Period.all
  end 
```

我的表格：

```
<% form_for XXXXX do %>
  <%= collection_select(:period, :period_id, @periods, :id, :fullname) %>
  <%= submit_tag("Valider") %>
<% end %> 
```

我希望表单在提交时转到 /evaluations/3（如果选择的时间段是 3）。

当我手动转到 /evaluations/3 时，它就像一个魅力，但我真的不知道如何编写 form_for 以通过提交表单来访问正确的 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:09:07.127

**简单的方法**

提交周期ID来处理数据，然后重定向到action，它 作为参数`evaluations/:id`处理。`:id`

```
redirect_to <youraction>(:period => @id) 
```

这应该可以解决问题。

**不是那么简单的方法**

如果您想在提交数据后动态更改页面上的某些内容 - 调用方法并使用 javascript 响应

```
respond_to do |format|
  format.js 
end 
```

在 javascript 响应中，您可以放置​​您想要的任何内容 - 简单的重定向或脚本，它们将动态更改页面。由你决定。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:34:30.130

您需要使用一些 javascript 来更新`action`表单

```
$('#period_period_id').change(function() {
  $('form').attr('action', '/evaluations/' + this.value);
}) 
```

# c++ - 调试模式自动关闭？

> ID：14793258
> 
> 赞同：0
> 
> 时间：2013-02-10T00:27:55.290
> 
> 标签：c++, debugging, if-statement, cout, cin

所以，我开始调试，通过这么多的代码，

```
#include <cmath>
#include <string>
#include <iostream>

using namespace std;

int main()
{
    double radius,width,length,height,area,base;
    int shape;
    const double pi =3.14159;
    cout<< "Please choose from the following menu. \n"
            "Geometry Calculator \n"
            "1\. Calculate the Area of a Circle \n"
            "2\. Calculate the Area of a Rectangle\n"
            "3\. Calculate the Area of a Triangle\n"
            "4\. Quit\n";
    cin>>shape;
    if(shape>4 || shape < 1)
    {
        cout<<"Your selection was not acceptable.\n\a\a"
              "Please choose from the following menu. \n"
              "Geometry Calculator \n"
              "1\. Calculate the Area of a Circle \n"
              "2\. Calculate the Area of a Rectangle\n"
              "3\. Calculate the Area of a Triangle\n"
              "4\. Quit\n";
    }
switch (shape)
{
case '1':
    cout<<"What is the radius of the circle?\n";
    cin>>radius;
    if(radius<0)
    {
        cout<<"Please enter a non-negative radius.\n\a";
        cin>>radius;
    }

    area = pow(radius,2) * pi;

    cout<<"Your circle has an area of " <<area<<".";
    break;

case '2':
    cout<<"What is the width of the rectangle?\n";
    cin>>width;
    if(width<0)
    {
        cout<<"Please enter a non-negative width.\n\a";
        cin>>width;
    }
    cout<<"What is the length of the rectangle?\n";
    cin>>length;
    if(length<0)
    {
        cout<<"Please enter a non-negative length.\n\a";
        cin>>length;
    }
    area = length * width;
    cout<<"The area of your rectangle is " <<area<<".\n";
    break;

case '3':
    cout<<"What is the base of the triangle?\n";
    cin>>base;
    if(base<0)
    {
        cout<<"Please enter a non-negative base measurement.\n\a";
        cin>>base;
    }
    cout<<"What is the height of the triangle?\n";
    cin>>height;
    if(height<0)
    {
        cout<<"Please enter a non-negative height measurement.\n\a";
        cin>>height;
    }
    area = base*height*.5;
    cout<<"Your triangle's area is "<<area<<".\n";
    break;
}
} 
```

等等-我认为它实际上停在`cin`. 调试窗口突然关闭，然后这是发生这种情况时输出窗口中显示的内容：

```
'heather t chapter 4 21.exe' (Win32): Loaded 'C:\Users\Heather\Documents\Visual Studio 2012\Projects\heather t chapter 4 21\Debug\heather t chapter 4 21.exe'. Symbols loaded.
'heather t chapter 4 21.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ntdll.dll'. Cannot find or open the PDB file.
'heather t chapter 4 21.exe' (Win32): Loaded 'C:\Windows\SysWOW64\kernel32.dll'. Cannot find or open the PDB file.
'heather t chapter 4 21.exe' (Win32): Loaded 'C:\Windows\SysWOW64\KernelBase.dll'. Cannot find or open the PDB file.
'heather t chapter 4 21.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcp110d.dll'. Symbols loaded.
'heather t chapter 4 21.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcr110d.dll'. Symbols loaded.
The program '[3800] heather t chapter 4 21.exe' has exited with code 0 (0x0). 
```

世界上正在发生什么，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:59:44.167

问题是您正在阅读`shape`，`int`但`switch`将其作为`char`. 您的 switch 案例应该看起来像`case 1:`，而不是`case '1':`.

为了防止程序在完成后关闭控制台，您可以`cin.get()`在代码的最后添加一个等待按键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:32:16.960

您的错误是您在switch 语句中接受`int`并使用了 a 。`character`

更改`case '1':`为`case 1:`

供您参考，C++ 中的字符根据它们的[ascii 值](http://en.wikipedia.org/wiki/ASCII)保存为数字，这就是为什么您的程序不会抱怨您尝试检查输入`'1'`值的原因`49`。

# c# - MVC BeginForm 未发布数据

> ID：14793259
> 
> 赞同：0
> 
> 时间：2013-02-10T00:27:55.950
> 
> 标签：c#, jquery, ajax, asp.net-mvc, asp.net-mvc-3

我正在使用 MVC BeginForm 和下面的代码，我无法在我的控制器中获取值 fpr 输入控件。我在这里做错了吗？

```
using (Ajax.BeginForm("CreateApp", "App",
new AjaxOptions { UpdateTargetId = "my-modal-dialog", OnBegin = "Dialog.Closing()", OnSuccess = "Dialog.Close()" },
         new
         {
             @class = "appform"
         }
        ))
{

   <input id="newAppName" type="text" size="35" value="" />
   @Html.TextBoxFor(model => model.Application.AppName);     

<input type="submit" value="Start App" class="demo-button ui-state-default ui-corner-all" />

}

My Controller looks like this
        [HttpPost]
    public ActionResult CreateApp(AppContent app, string newAppName)
    {

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:34:10.150

尝试改变

```
<input id="newAppName" type="text" size="35" value="" /> 
```

至

```
<input name="newAppName" type="text" size="35" value="" /> 
```

# android - Android：无法将图像从内部存储加载到 webview

> ID：14793260
> 
> 赞同：0
> 
> 时间：2013-02-10T00:28:13.543
> 
> 标签：android, image, webview, storage

对于我的 android 应用程序，我想将一个 html 文件加载到 webview，这个 html 文件将存储在“data/data/com.myapp/files/index.html”中。我可以使用关联的 javascript 文件加载它，但是当我想从“data/data/com.myapp/files/img/image.png”加载图像时，它不起作用。这就是我尝试这样做的方式：

```
webView.loadDataWithBaseURL(getFilesDir()+"/img/", html, "text/html","utf-8", ""); //html is my html string I get from index.html 
```

我也试过：

```
webView.loadUrl(getFilesDir()+"/img/"+index.html"); 
```

在我的 html 文件中，我有

```
 <img id="image" src="/img/image.png"/> 
```

我已经验证并且文件已加载到磁盘上，但我无法在 webview 上显示它，图像显示为空白。我就是不能让它工作。所以我的问题是：这甚至可能吗？如果是的话，有人可以告诉我怎么做吗？

我搜索并发现其他人也有类似的问题，但没有一个解决方案有效。

编辑：将我的文件放在资产目录中对我来说不是一个选择，我已经测试过它并且它有效。

我刚刚尝试了我在这里找到的以下代码：[Load the image saved in sdcard in webview](https://stackoverflow.com/questions/5051364/load-the-image-saved-in-sdcard-in-webview)

```
String base = getFilesDir(); 
String imagePath = base + "/test.jpg"; 
String html = ("<html>
            <head>
            </head>
            <body>
            <img src=\""+ imagePath + "\">
            </body>
            </html>
            "); 
mWebView.loadData(html, "text/html","utf-8"); 
```

但仍然没有成功，显然它对提出问题的人有用。我也测试了外部存储，但结果是一样的。所有权限都在 manifest.xml 中。所以我真的不明白问题是什么。任何建议或意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:35:40.690

考虑将静态文件`assets`放在 android 项目内的文件夹中，并尝试使用以下方法加载文件：

```
mWebView.loadUrl("file:///android_asset/html/index.html"); 
```

然后，从 HTML 文件中引用图像，使用相对路径的样式。

例如，在您的情况下，您将具有以下目录结构：

```
PROJECT-ROOT
 |-src/
 |-assets/
    |-html/index.html
      |-img/image.png
      |-css/style.css 
```

在此之后，您可以在内部使用普通的 html 标签，`index.html`就像制作任何网页一样。例如。`<img id="image" src="img/image.png"/>`或者`<link rel="stylesheet" type="text/css" href="css/style.css">`

不要忘记使用以下方法启用 JavaScript：

```
WebSettings webSettings = mWebView.getSettings();
webSettings.setJavaScriptEnabled(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:19:57.007

问题解决了。它实际上来自格式错误的数据，一旦我检查并将正确的文件添加到手机内存中，它就开始工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-14T17:51:40.690

当您要将图像保存到内部存储时，请确保不要使用与下载 html 文件相同的代码。这就是我犯的错误。相反，使用

[如何在 Android 中下载和保存图像](https://stackoverflow.com/questions/15549421/how-to-download-and-save-an-image-in-android)

保存你的图像，那么图像应该没问题

# java - 引用库时出现 NoClassDefFoundError

> ID：14793263
> 
> 赞同：0
> 
> 时间：2013-02-10T00:28:28.050
> 
> 标签：java, exception, noclassdeffounderror

好的，我整天都在网上搜索，我已经尝试了我所看到的一切，所以我想知道是否有人可以提供帮助。

我有一个引用 jar 文件的类，我已将其复制到 lib 文件夹中的工作区中，jar 是：Classifier4J.jar，我的类在控制台上完美运行，完全没有错误。当我尝试将 .jar 打包在一起并从另一个程序运行 .jar 时，它给了我这个错误：

```
 Exception in thread "pool-2-thread-1" java.lang.NoClassDefFoundError: net/sf/classifier4J/bayesian/IWordsDataSource...(10 more) 
```

很明显，当我创建 .jar 时，它无法引用它需要的分类器4j 库。

我尝试过的事情：

- 配置我的构建路径

- 更改清单文件

- 用我的 .jar 打包 .jar

-in eclipse 转到 file>export>java>runnable .jar 然后引用库

和许多其他的东西，没有任何效果。

如果无论如何有类似的问题或知道为什么会发生这种情况，请您帮助我，这真的让我很头疼。这是eclipse的问题吗？可以通过eclipse完成吗？

提前致谢

周杰伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T13:21:01.420

好的，经过几个小时的研究，我终于找到了解决方案，当我将我的类输出为 .jar 文件时，我将它指向我的清单文件。我找不到我做错了什么，因为它不起作用。我决定查看实际放入 jar 中的内容，发现 eclipse 没有将我要求的正确清单文件放入 jar 中。它正在放置一个新的，看起来像：

```
 Manifest-Version: 1.0 
```

它应该看起来像：

```
 Manifest-Version: 1.0
 Class-Path: ../lib/Classifier4J.jar 
```

lib 文件夹的位置是我的 jar 所在的目录。现在一切正常。谢谢你的帮助。

周杰伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:46:31.210

特定的库不包含在您的 jar 中。您可以尝试修复 Eclipse 构建配置以包含该库，或者在运行程序时将库的 jar 添加到类路径中。
后者可能更容易。只需在执行程序时将以下内容添加到命令中。

```
java -cp yourjar.jar;thelibrarysjar.jar com.your.Mainclass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T01:18:42.240

很难理解您实际尝试做什么，实际尝试过什么以及您期望工作什么，但我认为线索就在这里：

> 用我的 .jar 打包 .jar

这似乎意味着您正在尝试创建一个包含所有依赖 JAR 的“可执行 JAR”......按原样。那是行不通的，“可执行 JAR”不能包含其他 JAR。（好吧，可以......但是如果不做非常复杂的事情，您就不能将它们放在应用程序的类路径中。）

基本上，您有两种选择：

*   不要尝试在您的（可执行或不可执行的）应用程序 JAR 中包含相关 JAR。将它们分开，并配置执行类路径以包含它们。（请注意，对于可执行 JAR，执行类路径必须配置为 Manifest 条目。如果使用`java -jar ...`，则`-cp argument`and`$CLASS_PATH`将被忽略！）

*   通过将应用程序 JAR 和所有相关 JAR 分解到单个目录中，然后从该批次创建单个 JAR（带有合适的清单）来创建所谓的“uber-JAR”。您的构建工具或 IDE*可能*通过某些插件对此提供支持。

我个人更喜欢前一种方法……结合应用程序的“安装目录”和包装脚本。使用后一种方法，用户（或部署者）很难混合和匹配依赖 JAR 的版本。此外，“uber-JAR”方法*可能*与第 3 方库的许可证冲突。

* * *

最后，也许我们可以到达某个地方

> .... .jar 文件是从 tomcat 应用程序运行的，它是所有日志文件的简单适配器。

好的。你应该在之前提到过，因为它是一条**重要**的信息。为了让 JAR 文件在 Web 容器中可用（即在与 Tomcat 相同的 JVM 中），在 Web 容器的目录树中必须有 JAR 文件*及其所有相关 JAR 文件的副本。*有两种选择。要么将它们放在 webapp 的 lib 目录中（即 webapp/WEB-INFO/lib），要么将它们放在共享库目录中……这取决于您使用的 Tomcat 版本。

（“可执行 JAR”方法在这里不起作用。您放入清单中的类路径内容无关紧要。嵌套 JAR 文件也不起作用。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T01:46:51.497

您需要了解 NoClassDefFoundError 几乎不意味着找不到已识别的类。更常见的是，找到了该类，但有些东西阻止了它被成功加载。

两个最可能的问题是 -

*   其他一些阻止命名类被“验证”的缺失类。
*   由于在编译与执行中使用了不同版本的类（通常是另一个类）而导致的一些不兼容性。

在您的情况下，当您遇到问题时，您很可能会选择其他 jar 的不同（且不兼容）版本，而不是编译期间的环境。

# c# - DrawUserPrimitives 无效操作异常

> ID：14793268
> 
> 赞同：4
> 
> 时间：2013-02-10T00:29:27.413
> 
> 标签：c#, windows-phone-7, xna

我正在尝试在 XNA 中使用此代码绘制一个三角形：

```
VertexPositionColor[] vertices = new VertexPositionColor[3];
vertices[0].Position = new Vector3(-0.5f, -0.5f, 0f);
vertices[0].Color = Color.Red;
vertices[1].Position = new Vector3(0, 0.5f, 0f);
vertices[1].Color = Color.Green;
vertices[2].Position = new Vector3(0.5f, -0.5f, 0f);
vertices[2].Color = Color.Yellow;
GraphicsDevice.DrawUserPrimitives<VertexPositionColor>(PrimitiveType.TriangleList, vertices, 0, 1); 
```

但是，一旦我运行它，应用程序就会关闭，并抛出 InvalidOperationException。这是 WP7 应用程序。我错过了什么吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T09:53:53.463

[文档](http://msdn.microsoft.com/en-au/library/bb196411.aspx)说在以下情况下`DrawUserPrimitives`抛出`InvalidOperationException`：

> 在调用 DrawUserPrimitives 之前未设置有效的顶点着色器和像素着色器。在执行任何绘制操作之前，必须在设备上设置有效的顶点着色器和像素着色器（或有效效果）。

（它还说如果您的顶点无效，它会抛出 - 但它们对我来说看起来不错。）

您需要`Effect`在图形设备上设置一个。具体来说，您需要先致电`EffectPass.Apply`，然后再致电`DrawUserPrimitives`。一个简单的开始方法是使用`BasicEffect`. 这里有一些代码，适合放在`Draw`方法中，来说明这一点：

```
// These three lines are required if you use SpriteBatch, to reset the states that it sets
GraphicsDevice.BlendState = BlendState.Opaque;
GraphicsDevice.DepthStencilState = DepthStencilState.Default;
GraphicsDevice.SamplerStates[0] = SamplerState.LinearWrap;

// Transform your model to place it somewhere in the world
basicEffect.World = Matrix.CreateRotationZ(MathHelper.PiOver4) * Matrix.CreateTranslation(0.5f, 0, 0); // for sake of example
//basicEffect.World = Matrix.Identity; // Use this to leave your model at the origin
// Transform the entire world around (effectively: place the camera)
basicEffect.View = Matrix.CreateLookAt(new Vector3(0, 0, -3), Vector3.Zero, Vector3.Up);
// Specify how 3D points are projected/transformed onto the 2D screen
basicEffect.Projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(45),
        (float)GraphicsDevice.Viewport.Width / (float)GraphicsDevice.Viewport.Height, 1.0f, 100.0f);

// Tell BasicEffect to make use of your vertex colors
basicEffect.VertexColorEnabled = true;
// I'm setting this so that *both* sides of your triangle are drawn
// (so it won't be back-face culled if you move it, or the camera around behind it)
GraphicsDevice.RasterizerState = RasterizerState.CullNone;

// Render with a BasicEffect that was created in LoadContent
// (BasicEffect only has one pass - but effects in general can have many rendering passes)
foreach(EffectPass pass in basicEffect.CurrentTechnique.Passes)
{
    // This is the all-important line that sets the effect, and all of its settings, on the graphics device
    pass.Apply();

    // Here's your code:
    VertexPositionColor[] vertices = new VertexPositionColor[3];
    vertices[0].Position = new Vector3(-0.5f, -0.5f, 0f);
    vertices[0].Color = Color.Red;
    vertices[1].Position = new Vector3(0, 0.5f, 0f);
    vertices[1].Color = Color.Green;
    vertices[2].Position = new Vector3(0.5f, -0.5f, 0f);
    vertices[2].Color = Color.Yellow;
    GraphicsDevice.DrawUserPrimitives<VertexPositionColor>(PrimitiveType.TriangleList, vertices, 0, 1);
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-10T00:35:05.820

当组件发现它处于意外状态时，通常会引发该异常 (InvalidOperationException)。因此，在您的情况下，请确保 GraphicsDevice 在调用 DrawUserPrimitives 之前不需要设置其他一些属性。

# jsp - EL 表达式计算为空字符串

> ID：14793269
> 
> 赞同：0
> 
> 时间：2013-02-10T00:29:30.183
> 
> 标签：jsp, jstl, el

我是 JSP 和 JSTL 的新手，所以我可能在这里做一些非常愚蠢的事情。

我的 webapps 的 lib 目录中有 javax.servlet.jsp.jstl-api-1.2.1 和 javax.servlet.jsp.jstl-1.2.1。我在Tomcat7上运行。如果有任何区别，则 Eclipse 正在启动 tomcat。我的项目是“动态 Web 项目”。

**web.xml**看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">
        <display-name>example</display-name>
        <welcome-file-list>
                <welcome-file>index.jsp</welcome-file>
        </welcome-file-list>
</web-app> 
```

**index.jsp**看起来像这样

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Example</title>
</head>
<body>
    <%
        String s = "Foo";
    %>
    <c:out value="${s}" />
    <c:out value="Bar" />
</body>
</html> 
```

我希望这会显示一个页面`Foo Bar`。相反，它只显示`Bar`. 这发生在我所有的 EL 表达式中。我所有的 EL 表达式似乎都是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:32:57.933

我看过你的自我回答，但这不是正确的方法：

如果您已经在使用带有`c:out`s 的 JSTL，请避免完全使用 scriptlet 并替换

```
<%
    request.setAttribute("s", "Foo");
%> 
```

有了这个：

```
<c:set var="s" value="Foo" scope="request"/> 
```

然后打印值将是：

```
<c:out value="${requestScope.s}"/> 
```

或者仅仅是`${requestScope.s}`因为`c:out`标签并不是真正需要的，除非您需要转义 XML 字符。

（`${s}`也可以，因为 cointainer 在所有范围内搜索，直到找到第一次出现，但是，明确地写它更干净 imo）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:45:32.293

这只是我不了解EL。

代替

```
<%
    String s = "Foo";
%> 
```

它应该是：

```
<%
    request.setAttribute("s", "Foo");
%> 
```

# trackpad - 触控板华硕q200e

> ID：14793270
> 
> 赞同：0
> 
> 时间：2013-02-10T00:29:33.750
> 
> 标签：trackpad

我刚买了一台华硕 q200e 笔记本电脑，触控板一直出现无法滚动或使用任何其他手势的问题。有时它有效，有时则无效。

我已经尝试重新安装驱动程序，但它说它已经安装并且无法继续。

# python - 如何使用python和mechanize从php页面获取所有链接

> ID：14793271
> 
> 赞同：0
> 
> 时间：2013-02-10T00:29:51.170
> 
> 标签：python, mechanize

我想从网页中提取所有链接。到目前为止，这是我的代码。

```
import mechanize
import lxml.html
from time import sleep

links = list()
visited_links = list()

br = mechanize.Browser()

def findLinks(url):
    response = br.open(url)
    visited_links.append(response.geturl())

    for link in br.links():
        response = br.follow_link(link)
        links.append(response.geturl())
        sleep(1)

findLinks("http://temelelektronik.net")

for link in links:
    if link in visited_links:
        links.remove(link)
    else:
        findLinks(link)
        print link

for link in visited_links:
    print link 
```

事实上我不想写一个网络爬虫。我想做的是从网页中提取所有链接并创建站点地图。我还想知道是否可以使用 mechanize 和 python 从服务器获取文件的最后修改时间。

我想问的是，这段代码片段是否适用于 HTML 页面。它不会从 php 页面中提取链接。例如[这个页面](http://temelelektronik.net/sorular/index.php)。如何从 php 页面中提取链接？

任何帮助，将不胜感激。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:04:19.630

我不知道 mechanize，但我使用了[pattern.web](http://www.clips.ua.ac.be/pages/pattern-web)模块，它有一个易于使用的 HTML DOM Parser。我认为站点地图类似于您正在寻找的内容：

```
from pattern.web import URL, DOM

url = URL("http://temelelektronik.net")
dom = DOM(url.download())
for anchor in dom.by_tag('a'):
    print(anchor.href) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-12T11:02:11.797

特定于 Mechanize 的语法如下。

代理=机械化.new

page=agent.get(URL)

page.links 返回页面中所有链接的数组。

page.links.first.text 返回第一个链接的文本（不带 href）。

page.link_with(:text=>"Text").click 将返回单击特定页面会产生的页面

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T12:45:52.770

这是另一个使用网络蜘蛛访问每个链接的解决方案。

```
import os, sys; sys.path.insert(0, os.path.join("..", ".."))

from pattern.web import Spider, DEPTH, BREADTH, FIFO, LIFO

class SimpleSpider1(Spider):

    def visit(self, link, source=None):
        print "visiting:", link.url, "from:", link.referrer

    def fail(self, link):
        print "failed:", link.url

spider1 = SimpleSpider1(links=["http://www.temelelektronik.net/"], domains=["temelelektronik.net"], delay=0.0)

print "SPIDER 1 " + "-" * 50
while len(spider1.visited) < 5:
    spider1.crawl(cached=False) 
```

# haskell - 您如何使用 loadTemplates 为新的 Heist API 更新代码？

> ID：14793272
> 
> 赞同：1
> 
> 时间：2013-02-10T00:29:54.123
> 
> 标签：haskell, heist

此代码在 0.10.0 更改之前与 Heist 一起使用

```
main = do
      Right ts <- loadTemplates "templates" $
          bindSplices mySplices defaultHeistState
      etc.. 
```

现在我得到了错误

```
testdb.hs:59:33: Not in scope: `defaultHeistState' 
```

我知道 loadTemplates 的类型签名已更改为

```
loadTemplates :: FilePath -> EitherT [String] IO TemplateRepoSource 
```

但是我无法弄清楚如何调整我的旧代码以使其正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:39:58.050

好的，我可以使用它，但是我愿意接受更优雅的方式来做这件事

```
load baseDir splices = do
    tmap <- runEitherT  $ do
        templates <- loadTemplates baseDir
        let hc = HeistConfig mySplices  [] [] [] templates
        initHeist hc
    either (error . concat) return tmap

main = do
      ts <- load "templates" $ bindSplices mySplices 
      renderWithArgs [("test", T.pack "hello world")]  ts "index" >>= 
        B.putStr . maybe "Page not found" (toByteString . fst) 
```

# java - 网格中的 JAVA 孔

> ID：14793273
> 
> 赞同：2
> 
> 时间：2013-02-10T00:30:03.847
> 
> 标签：java, grid

我需要在java中的二维网格中找到“洞”——你能指出我最好的算法吗？

输入以下几点：

```
5,3
5,4
8,4
5,5
6,3
7,3
7,4
6,5 
```

我需要弄清楚这个网格中“洞”或包围空间的位置。我对如何做到这一点有点迷茫。

点的情节：

![在此处输入图像描述](../Images/0d2d5ae169ba81a71342cfec381e81ac.png)

假设每个点是 1x1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:37:51.893

这基本上是一个blob提取算法+一点额外的。做这个：

1) 找到放置任何实体的最西、最东、最北和最南。记住它们为 xmin xmax ymin ymax。

2) 分配具有这些维度的二维整数数组（初始化为 0），并将所有实心点作为值 -1 放置在其中。

3) 将计数器初始化为 1。扫描二维数组。每次找到一个为 0 的点时，将其设置为`counter`并填充`counter`s 到每个不是 -1 的相邻点上，直到用完可以填充的点为止。（要进行填充，一种方法是保留一组尚未填充所有邻居的所有点，然后迭代这些点，将新点添加到集合中，直到集合用尽 -> 没有任何东西可以填充到.) 现在增加计数器并继续。

4) 扫描整个网格后，扫描周边。每次您在外围看到非 -1 时，将该 blob 标记为没有被包围（通过拥有与您找到的 blob 数量一样长的 bool 数组）。

5）你没有标记的每个编号的斑点都被包围了。

在此处阅读有关 blob 提取的信息：[http ://en.wikipedia.org/wiki/Blob_extraction](http://en.wikipedia.org/wiki/Blob_extraction)

# c++ - 全局结构赋值给出名称类型错误

> ID：14793275
> 
> 赞同：0
> 
> 时间：2013-02-10T00:30:13.143
> 
> 标签：c++, compiler-construction

我在“parser.h”中有一个这样的结构

```
struct obj{
        char *filename;
        unsigned long nverts;
        unsigned long curvert;
        double (*verts)[3]; 
        unsigned int *faces[3]; 
};

typedef obj obj; 
```

并在 parser.cpp

我宣布

```
 obj objmesh;

    objmesh.filename="c://temp//wings.obj";
    objmesh.nverts = 20;
    objmesh.verts = (double (*)[3]) malloc( objmesh.nverts *  sizeof(double[3]) );
    objmesh.curvert = 0; 
```

当我在 parser.cpp 的顶部执行这些分配时，我得到“'objmesh'没有命名类型”错误。

但是当我将所有这些分配放在 parser.cpp 中的一个函数中时（而 obj objmesh; 具有全局范围），我没有收到错误并且编译得很好。

谁能想到为什么会这样？我正在使用 Mingw Gnu 4.6 C++ 编译器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T00:48:16.033

为什么？因为当您单独进行分配时，您实际上是在为每个分配执行指令，在 C 中必须在函数中。

但是，您可以进行静态初始化（只要值是固定的）。静态初始化由编译器在编译时完成，因此不会执行任何指令来设置结构的值。

```
double verts[20][3];

obj objmesh = {
    "c://temp//wings.obj",
    20,
    verts, /* declared above, not dynamically allocated */
    0
    }; 
```

如果您必须动态分配“顶点”，那么这对您不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T00:33:04.880

您需要在函数中分配作业，例如：

```
obj objmesh;

... 

int main(int argc, char **argv)
{
... possibly other stuff here... 
    objmesh.filename="c://temp//wings.obj";
    objmesh.nverts = 20;
    objmesh.verts = (double (*)[3]) malloc( objmesh.nverts *  sizeof(double[3]) );
    objmesh.curvert = 0;
... More code here ... 
} 
```

顺便说一句： `double (*)[3])`求一个typedef ...

# java - 在嵌套类 JAVA 中使用变量

> ID：14793277
> 
> 赞同：3
> 
> 时间：2013-02-10T00:30:35.603
> 
> 标签：java, class, variables, nested

我对编程非常陌生，并且对在我认为被称为“嵌套类”的变量中使用变量有疑问。

```
class BeginningGameTest {

    int attack;
    int defend;

    public static class James
    {
        attack = 25;
        defend = 15;
    }

    public static class Janet
    {
        attack = 45;
        defend = 1;
    }
    public static class Jackson
    {
        attack = 10;
        defend = 20;
    }

    public static void main(String[] args) {

        System.out.prinln(James.attack);

    }
} 
```

我有大致的想法吗？我想保存“相同”的变量，但因类而异，并且在打印行中的访问方式也不同。我确实遇到了一些错误，我应该怎么做才能保持相同的概念并且仍然保持相当简单以便我可以理解它？对于一般的编程新手，是否有任何易于理解的教程？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T00:48:16.807

这样的设计似乎不正确。

当您使用面向对象的语言工作时，您要尝试的是您希望表示的事物的基本模型。

这三个静态类似乎代表相同类型的对象，所以让我们为它们创建一个简单的模型。把模型想象成一个千篇一律的人。每个用它切割的饼干都是相同的通用“形状”，但会有不同的特征（洒水、糖霜胡须等）。这个模型应该在它自己的单独文件中。

```
public class Player {

    private String name;
    private int attack;
    private int defense;

    public Player(String theirName, int theirAttack, int theirDefense) {
        name = theirName;
        attack = theirAttack;
        defense = theirDefense;
    }

    // create getters and setters for their attack and defense
} 
```

要实际使用它，您需要*实例化*该对象。

```
public class BeginningGameTest {
    public static void main(String[] args) {
        Player p1 = new Player("James", 25, 15);
        Player p2 = new Player("Janet", 45, 1);
        Player p3 = new Player("Jackson", 10, 20);
        // interactions with the objects below
    }
} 
```

[Java 标签 wiki](https://stackoverflow.com/tags/java/info)中已经存在一些极好的初学者资源；给那些一个彻底的阅读。尝试新事物，不要害怕就你不理解的事物提出（好的）问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T00:36:08.523

您应该创建一个内部类，然后在 main 方法中定义该类的实例。

```
public class BeginningGameTest {

    public static void main(String[] args) {
        Player james = new Player(25,15);
        Player janet = new Player(45,1);
        Player jackson = new Player(10,20);

        System.out.println(james.getAttack());
    }
}

class Player{
    int attack;
    int defend;

    public Player(int attack, int defend){
        this.attack = attack;
        this.defend = defend;
    }

    public int getAttack() {
        return attack;
    }

    public void setAttack(int attack) {
        this.attack = attack;
    }

    public int getDefend() {
        return defend;
    }

    public void setDefend(int defend) {
        this.defend = defend;
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T00:38:39.183

您应该使用实例的概念来区分人，而不是为每个人定义一个类。您可以定义单个类“Person”并实例化 James、Jackson 等。要给它们每个不同的攻击/防御值，您可以使用带参数的构造函数。

我觉得您可能会从阅读面向对象编程的介绍中受益。尝试搜索“面向对象编程”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T00:40:58.110

你可以采取两种方式来解决这个问题。您可以创建子类，使 James、Janet 和 Jackson 都是相同类型的类，即BeginningGameTest。例如，詹姆斯可能是：

```
public class James extends BeginningGameTest
{
    public James()
    {
        attack = 25;
        defend = 15;
    }
} 
```

我认为您希望 James、Janet 和 Jackson 成为的不是子类，而是同一类BeginningGameTest 的实例，如下所示：

```
BeginningGameTest James = new BeginningGameTest();
James.setAttack(25);
James.setDefend(15); 
```

您应该阅读一些概念：

1.  类与实例
2.  遗产

我还含蓄地向您介绍了 Java bean 典型的 setter（和 getter）的概念。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T00:40:59.223

这将起作用：

```
public static class James
{
    static int attack = 25;
    static int defend = 15;
}
// ... 
```

那么这将起作用：

```
public static void main(String[] args)
{
    System.out.prinln(James.attack);
} 
```

**这可能是一个更好的设计：**

```
public class Player()
{
   public static enum NAME { JAMES, JANET };

   int attack, defend;
   public Player(NAME name)
   {
      switch (name)
      {
         case JAMES:
            attack = 25;
            defend = 15;
            break;
         // ...
      }
   }

   public static void main(String[] args) throws Exception
   {
      System.out.println(new Player(NAME.JAMES).attack);
   }
} 
```

**对于现实需求，这是一个更好的设计：（允许运行时创建播放器）**

```
int attack, defend;
String name;
public Player(int attack1, int defend1, String name1)
{
   attack = attack1;
   defend = defend1;
   name = name1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-21T07:59:54.237

您可以简单地做的是创建您的类的不同对象，这些对象将持有不同值的变量攻击和防御。这是相同的代码。

/* 打包任何东西；// 不要放置包名！*/

```
class Main
{
    int attack,defend;
    public Main(int attack,int defend)
    {
        this.attack=attack;
        this.defend=defend;
    }
    public void show()
    {
        System.out.println("attack: "
        +attack+" defend: "+defend);
    }
    public static void main (String[] args) throws java.lang.Exception
    {
        Ideone James = new Main(125,15);
        James.show();
        Ideone Janet = new Main(45,1);
        Janet.show();
        Ideone Jackson = new Main(10,20);
        Jackson.show();
    }
} 
```

# cakephp-2.0 - 设计父子控制器

> ID：14793283
> 
> 赞同：0
> 
> 时间：2013-02-10T00:31:12.413
> 
> 标签：cakephp-2.0

我是 cakePHP 的新手，并试图了解框架以了解如何实现我的要求。

我的应用程序允许（管理员）用户定义表单（父）和 FormElements（子），稍后将动态组合并呈现给最终用户。

为了开始原型制作，我烘烤了所有的部分，我可以按预期在两个表中输入行。

编辑以简化问题：

表单控制器已经显示了一个表单列表，并且选择一个表单（查看操作），该表格的列表列表。但是......当我添加一个新的 FormElement 时，我必须再次选择一个与该元素关联的表单。

相反，我希望 FormElements 控制器/模型知道最初选择了哪个 Form 并自动填充 form_id。

是否有关于如何处理此问题的“最佳实践”方法？

以防万一需要：

```
CREATE TABLE IF NOT EXISTS `forms` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `description` varchar(60) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS `form_elements` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `form_id` int(11) NOT NULL,
  `name` varchar(40) NOT NULL,
  `type` int(11) NOT NULL,
  `widget` int(11) NOT NULL,
  `mandatory` tinyint(4) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:59:38.820

这种情况发生的频率比你想象的要多。我有 QuestionModel hasMany AnswerModel 并想在我的 AnswersController 中添加 Answers。我需要显示“父”对象的 QuestionModel 名称和其他属性。这就是我在 AnswersController 中添加操作的样子：

```
public function add($question_id = null) {
    $this->Answer->Question->id = $question_id;
    if (!$this->Answer->Question->exists()) {
        throw new NotFoundException(__('Invalid question'));
    }

    if ($this->request->is('post')) {
        $this->request->data['Answer']['question_id'] = $question_id;
        $this->request->data['Answer']['user_id'] = $this->Auth->user('id');

        if ($this->Answer->save($this->request->data)) {
            $this->Session->setFlashSuccess(__('Your answer has been saved'));
        } else {
            $this->Session->setFlashError(__('Your answer could not be saved. Please, try again.'));
        }
        $this->redirect(array('controller'=>'questions','action' => 'view', $question_id));
    }

    $question = $this->Answer->Question->read();
    $this->set('question', $question);
} 
```

您会注意到我将 Question.id 传递给 AnswersController 添加操作。有了这个，我就可以从数据库中提取问题，并允许我能够将用户重定向回他们在单击“添加此问题的答案”之前所遇到的特定问题。

# c++ - BB Cascades，将数据从 C 传递到 Page1.qml 和 Page2.qml

> ID：14793286
> 
> 赞同：0
> 
> 时间：2013-02-10T00:31:55.580
> 
> 标签：c++, qml, blackberry-10, blackberry-cascades

我知道这可能是我在这里遗漏的一件非常小的事情，但我花了很多时间试图解决这个问题。我来自 Objective-C 背景，我想做的是：

我有一个 main.qml，它是一个 navigationPane，它还添加了 2 个其他外部页面作为附加对象。这两个页面具有网格列表视图。现在，有一个 MyApp.cpp 文件，它加载一个 Json 文件并将结果填充到 main.qml 文件中。我一开始只在这个页面上显示相关的项目。当用户点击任何项目时，我想将它们带到 page2.qml，它具有我上面提到的网格列表视图，并使用从 main.qml 传递的 dataModel 填充它（其中包含来自 MyApp.cpp 的所有数据）。这让我一点快乐都没有！我需要帮助。我能做些什么来完成这项工作？请问我在这方面需要帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:02:46.063

我不确定这是否是最佳实践，但我发现最简单的方法是使用 Qt 全局对象。

基本上将您的数据或对象分配给 Qt 对象，然后您可以从任何其他页面访问它。

例如
，在 onCreationCompleted 的 main.qml 或您接收数据的任何函数中：

```
function getData(data) {
    Qt.myVariable = data;
} 
```

然后在您的其他页面中，您可以访问它。例如在 Page2.qml 中：

```
Page {
    onCreationComplete: {
        myLabel.text = Qt.myVariable;
    }
} 
```

正如我所提到的，这也适用于对象，因此您可以分配导航窗格、工作表、页面等。因此，诸如“Qt.myNavPane.push(page)”之类的事情变得可能。

我遇到了需要将 Qt 用于各种目的的问题。我认为信号和插槽是更好的实践，但并不总是实用的。

# php - 警告：mysql_num_rows()：提供的参数不是有效的 MySQL 结果资源 - 找不到修复

> ID：14793296
> 
> 赞同：-1
> 
> 时间：2013-02-10T00:33:19.090
> 
> 标签：php, mysql

我已经修复了这个问题，但是当我试图修复 SQL 漏洞时，我创建了一个错误并从头开始，我再次陷入这个问题并且完全不知道该怎么做。请帮忙。

```
<? 
ob_start();
include 'easygpt_config.php';
ob_end_clean();
if(isset($_POST['login'])){
$username= trim($_POST['username']);
$password = trim($_POST['password']);
if($username == NULL OR $password == NULL){
$final_report.="Please complete both fields";
$check_user_data = mysql_query("SELECT * FROM `members` WHERE `username` = '$username'") or die(mysql_error());
}else{
if(mysql_num_rows($check_user_data) == 0){ 
$final_report.="This username does not exist";
}else{
$get_user_data = mysql_fetch_array($check_user_data) or die("A MySQL error has occurred.<br />Your Query: " . $your_query . "<br /> Error: (" . mysql_errno() . ") " . mysql_error());
if($get_user_data['password'] == $password){
$start_idsess = $_SESSION['username'] = "".$get_user_data['username']."";
$start_passsess = $_SESSION['password'] = "".$get_user_data['password']."";
$final_report.="<meta http-equiv='Refresh' content='0; URL=http://www.google.com>";
}}}}

if(isset($_SESSION['username']) && isset($_SESSION['password'])){ 
    }

?> 
```

被列为导致错误的行是第 12 行，其中包括：

```
if(mysql_num_rows($check_user_data) == 0){ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:44:05.010

正如 Explosion Pills 已经指出的那样，只需一些标准的缩进，就可以非常清楚地知道发生了什么：

```
<?
ob_start();
include 'easygpt_config.php';
ob_end_clean();
if (isset($_POST['login'])) {
    $username = trim($_POST['username']);
    $password = trim($_POST['password']);
    if ($username == NULL OR $password == NULL) {
        $final_report .= "Please complete both fields";
        $check_user_data = mysql_query("SELECT * FROM `members` WHERE `username` = '$username'") or die(mysql_error());
    } else {
        if (mysql_num_rows($check_user_data) == 0) {
            $final_report .= "This username does not exist";
        } else {
            $get_user_data = mysql_fetch_array($check_user_data) or die("A MySQL error has occurred.<br />Your Query: " . $your_query . "<br /> Error: (" . mysql_errno() . ") " . mysql_error());
            if ($get_user_data['password'] == $password) {
                $start_idsess   = $_SESSION['username'] = "" . $get_user_data['username'] . "";
                $start_passsess = $_SESSION['password'] = "" . $get_user_data['password'] . "";
                $final_report .= "<meta http-equiv='Refresh' content='0; URL=http://www.google.com>";
            }
        }
    }
}
if (isset($_SESSION['username']) && isset($_SESSION['password'])) {
}
?> 
```

您正在块中执行查询（并因此设置`$check_user_data`）`if`，并在块中对其进行测试`else`。

想在以后避免这种乱七八糟的事情吗？手动缩进您的代码或获取可以为您处理该杂务的大量代码编辑器之一。或者使用许多在线漂亮打印服务之一（如 [beta.phpformatter.com]）（[http://beta.phpformatter.com/](http://beta.phpformatter.com/)）。

最后但同样重要的是，停止使用已弃用的 mysql_ 函数。已弃用，除其他外意味着您**不应**在新代码中使用它们。

I'd also suggest to forget about the more modern mysqli_ successor and skip right away to [PDO](http://php.net/manual/en/book.pdo.php) - it's a modern, well designed API, usable with several database engines and last but not least, it makes working with prepared statements a breeze, and prepared statements are probably the least expensive yet most effective defense against [sql injection](http://xkcd.com/327/).

# ios - 核心数据 - iCloud 行为

> ID：14793300
> 
> 赞同：1
> 
> 时间：2013-02-10T00:34:05.593
> 
> 标签：ios, core-data, icloud

我正在使用 NSManagedDocument 作为核心数据堆栈在我的核心数据应用程序中实现 iCloud 支持。

一切似乎都运行良好，但出现了一些意想不到的行为：

在我的 iPhone 和 iPad 上安装通用应用程序：

从 iPhone 添加的实体通过 iCloud 传输到 iPad；从 iPad 添加的实体通过 iCloud 传输到 iPhone；从 iPhone 添加的实体，在 iPhone 上删除，在 iPad 上自动删除 从 iPad 添加的实体，在 iPad 上删除，在 iPhone 上自动删除

然而 ...

从 iPhone 添加的实体，在 iPad 上删除 在 iPhone 上不删除 从 iPad 添加的实体，在 iPhone 上删除 在 iPad 上不删除

这是预期的行为吗？这不是 Apple 'notes' 应用程序在我的 iPhone 和 iPad 上的行为方式。对任何笔记的任何更改都会反映在所有设备上。

如果这不是正确的 iCloud 行为，我可能误入歧途的任何想法？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:23:46.390

> *这是预期的行为吗？*

这取决于您如何定义“预期”。这不是 Apple 打算让它工作的方式，但你不是第一个遇到这个问题的人。在实践中，是的，至少在某些时候是预期的。

您应该检查几件事：

*   即使您退出并重新启动应用程序，这种情况是否仍然存在？可能是实例被删除，但您的应用程序未正确更新其 UI。这会使对象看起来仍然存在，直到您重新启动应用程序。

*   查看您从 iCloud 收到的“已导入”通知。它应该包含插入、更新和删除实例的对象 ID。确保它正确指示在接收端已删除哪些对象。

*   检查您的对象处理以确保您没有以某种方式保留应该已删除或重新创建的对象。

但请记住，如果您将 Core Data 与 iCloud 一起使用，**您就是在自找麻烦**，您可能无法解决此问题。Core Data 的 iCloud 集成仍然不是那么可靠。预计问题，可能太严重而无法解决。

# node.js - 运行 shell 命令并在 http 服务器中显示

> ID：14793301
> 
> 赞同：1
> 
> 时间：2013-02-10T00:34:06.903
> 
> 标签：node.js

我想运行一些预定义的 shell 命令并将它们作为纯文本返回到 http 服务器中。(1) 处写入的内容正在提供给我的浏览器，但 (2) 处最终必须是标准输出的内容没有提供。任何人都可以帮助我如何实现这一目标吗？

```
var http = require('http'),
url = require('url'),
exec = require('child_process').exec,
child,
poort = 8088;

http.createServer(function(req, res) {
 res.writeHead(200, {'Content-Type': 'text/plain'});

    var pathname = url.parse(req.url).pathname;
    if (pathname == '/who'){
        res.write('Who:'); // 1
        child = exec('who',
                     function(error, stdout, stderr){
                        res.write('sdfsdfs');   //2
                     })

    } else {
        res.write('operation not allowed');
    }

 res.end();

}).listen(poort); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:42:49.597

这是因为你放置 res.end() 的位置。

由于 exec 是异步的，因此 res.end() 实际上发生在您标记为 (2) 的 res.write 之前。在 .end 之后不能再发出写入，因此浏览器不会获得任何进一步的数据。

*在 res.write 之后，您应该在*exec 回调中调用 res.end() 。exec 回调将在子进程终止时发出，并将获得完整的输出。

# javascript - Javascript 更改颜色 onChange 选项

> ID：14793308
> 
> 赞同：1
> 
> 时间：2013-02-10T00:35:27.557
> 
> 标签：javascript, html, list, option, onchange

我回来了另一个-_-。

目前我的页面有按钮来改变我的飞利浦色调灯的颜色——但我希望它是一个下拉菜单，当我改变选项时会改变。

以下是当前按钮的外观：

```
<button class="lightbuttontall" onclick="lightcolor(1,colorred);">Light 1 red</button>
<button class="lightbuttontall" onclick="lightcolor(2,colorred);">Light 2 red</button>
<button class="lightbuttontall" onclick="lightcolor(3,colorred);">Light 3 red</button>
</p>
<p class="lightbuttonline">
    <button class="lightbuttontall" onclick="lightcolor(1,colororange);">Light 1 orange</button>
    <button class="lightbuttontall" onclick="lightcolor(2,colororange);">Light 2 orange</button>
    <button class="lightbuttontall" onclick="lightcolor(3,colororange);">Light 3 orange</button> 
```

然后，在一个单独的 js 文件中，我有这个：

```
var colorred= "{\"on\":true,\"bri\":255,\"hue\":836,\"sat\":237,\"xy\":[0.6472,0.3316],\"ct\":500}"
var colororange="{\"on\":true,\"bri\":254,\"hue\":13390,\"sat\":251,\"xy\":[0.5663,0.3978],\"ct\":500}" 
```

这就是我想要弄清楚的。

```
<select name="jumpmenu" onChange="lightcolor(1,colorred);">
<option value="">Light 1</option>
<option value="1";>Red</option>
<option value="2";>Orange</option>
<option value="3";>Green</option>
<option value="4";>Blue</option>
<option value="5";>Pink</option>
<option value="6";>Pastel</option>
</select>
<script language="javascript">
function jumpChange(sel) {
    if (sel.value === "") return; 

sel.value = ""; 

};
</script> 
```

*如果我运行该脚本，第一个灯泡将变为红色，但只有红色，因为这是它唯一可以回忆的。因此，如果我选择选项 2，我不知道如何告诉 HTML 到 onChange 去获取 colororange。希望这是有道理的。*

nnnnn 在执行 data-switchNo 代码方面帮助了我很多，但我不确定这是否适用于此或如何更改它。有任何想法吗？

编辑：

```
<select name="jumpmenu" onChange="lightcolor(this);">
<option value="">Light 1</option>
<option value="colorred";>Red</option>
<option value="2";>Orange</option>
<option value="3";>Green</option>
<option value="4";>Blue</option>
<option value="5";>Pink</option>
<option value="6";>Pastel</option>
</select>
<script language="javascript">

 var colorred ="{\"on\":true,\"bri\":255,\"hue\":15331,\"sat\":121,\"xy\":[0.1721,0.0500],\"ct\":343}"
function lightcolor(light,color){
    execute('PUT', 'http://'+bridge+'/api/'+hash+'/lights/'+light+'/state', color);

}

function execute($method,$url,$message){
xmlhttp=new XMLHttpRequest();
xmlhttp.open($method,$url,true)
xmlhttp.send($message);
}
</script> 
```

这就是我现在的位置。我觉得我可能会越来越近？

# node.js - 让 Blade 在 Windows 8 上与 Meteor 一起工作

> ID：14793317
> 
> 赞同：1
> 
> 时间：2013-02-10T00:36:58.387
> 
> 标签：node.js, windows-8, meteor, node-blade

[我通过这个 MSI 安装程序](http://win.meteor.com/)安装了 Meteor for Windows 。现在我想让 Blade 使用它。我在 Blade 文档中通读了[本教程](https://github.com/bminer/node-blade/wiki/Using-Blade-with-Meteor)，但大气/陨石似乎不适用于 Windows。

有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:41:49.297

你有流星工作吗？有一种手动方式，我以前没有尝试过，但它应该可以工作。

使用 npm 安装刀片模块`npm install blade`。

克隆刀片 git repo 并将`meteor`子目录放在流星包目录中，将其重命名为`blade`（我认为它`C:\Program Files\Meteor\packages`（但你必须检查那个目录）

编辑刀片目录下文件中的文件，以正确引用刀片 npm 模块中的文件。在 linux/unix 中，这一点很容易，因为您可以直接将其符号链接到包中，而无需复制文件夹并重新引用文件。

最后去你的流星项目并运行`meteor add blade`它应该很好。

# php - 分解这个功能

> ID：14793318
> 
> 赞同：0
> 
> 时间：2013-02-10T00:37:04.170
> 
> 标签：php, wordpress

我正在使用此功能在我的网站中进行分页，我正在尝试解决这个问题。

为什么变量 $pages 和 $ranger 在参数字段中赋值？为什么不将它们设置在函数内部？另外，页面如何将 &paged=(page#) 添加到 URL 中？如果有人可以帮助我分解此功能，将不胜感激。我希望最终只有一个下一个和上一个链接，而不是关闭所有生成的数字，所以我想最小化这个函数。

这是功能

```
<?php
function kriesi_pagination($pages = '', $range = 2) {  
 $showitems = ($range * 2)+1;  

 global $paged;
 if(empty($paged)) $paged = 1;

 if($pages == '')
 {
     global $wp_query;
     $pages = $wp_query->max_num_pages;
     if(!$pages)
     {
         $pages = 1;
     }
 }   

 if(1 != $pages)
 {
     echo "<div class='pagination'>";
     if($paged > 2 && $paged > $range+1 && $showitems < $pages) echo "<a href='".get_pagenum_link(1)."'>&laquo;</a>";
     if($paged > 1 && $showitems < $pages) echo "<a href='".get_pagenum_link($paged - 1)."'>&lsaquo;</a>";

     for ($i=1; $i <= $pages; $i++)
     {
         if (1 != $pages &&( !($i >= $paged+$range+1 || $i <= $paged-$range-1) || $pages <= $showitems ))
         {
             echo ($paged == $i)? "<span class='current'>".$i."</span>":"<a href='".get_pagenum_link($i)."' class='inactive' >".$i."</a>";
         }
     }

     if ($paged < $pages && $showitems < $pages) echo "<a href='".get_pagenum_link($paged + 1)."'>&rsaquo;</a>";  
     if ($paged < $pages-1 &&  $paged+$range-1 < $pages && $showitems < $pages) echo "<a href='".get_pagenum_link($pages)."'>&raquo;</a>";
     echo "</div>\n";
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:42:33.320

参数列表中的为这些参数`$pages = '', $rage = 2`定义*默认值*，从而使它们成为可选的。这样，如果你`kriesi_pagination()`不带参数调用，它与使用显示的值调用它是一样的。

添加到链接的页面 ID 很可能是通过`get_pagenum_link()`函数完成的，此处未显示。

# node.js - socket.io 不发送给其他用户

> ID：14793321
> 
> 赞同：4
> 
> 时间：2013-02-10T00:37:31.787
> 
> 标签：node.js, socket.io

我的 node.js socket.io 聊天应用程序没有向其他用户发送聊天消息（当我打开另一个浏览器时）。来自浏览器 A 的消息只会显示在浏览器 A 中。

服务器.js

```
var app = require('http').createServer(handler),
     io = require('socket.io').listen(app),
     fs = require('fs');

app.listen(4000);

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
  socket.on('sendChat', function (data) {
    // console.log('sendChat', data);
    socket.emit('displayChat', data);
  });
}); 
```

索引.html

```
<html>
<head>
  <title>Chat</title>

  <style type="text/css">
    #chats {
      overflow: auto;
    }

    #sender {
      position: absolute;
      bottom: 0;
    }
  </style>

  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>

  <script>
    $(document).ready(function(){
      var socket = io.connect('http://localhost');
      var chats = $("#chats ul");

      socket.on('displayChat', function (data) {
        // console.log("displayChat", data);
        chats.append($("<li></li>").text(data));
      });

      var author = $("#author");
      var message = $("#message");

      message.keypress(function(event) {
        if ((event.keyCode || event.which) == 13 && author.val() != '') {
          // console.log("sendchat", author.val() + ": " + message.val());
          socket.emit('sendChat', author.val() + ": " + message.val());
          message.val('');
        }
      });
    });
  </script>
</head>
<body>

  <div id="chats">
    <ul></ul>
  </div>

  <div id="sender">
    <input id="author" type="text"><input id="message" type="text">
  </div>

</body>
</html> 
```

这是一个日志

```
 info  - socket.io started
   debug - served static content /socket.io.js
   debug - client authorized
   info  - handshake authorized T0NOrPaqIkQMXOJjgz9E
   debug - setting request GET /socket.io/1/websocket/T0NOrPaqIkQMXOJjgz9E
   debug - set heartbeat interval for client T0NOrPaqIkQMXOJjgz9E
   debug - client authorized for 
   debug - websocket writing 1::
sendchat a: hi
   debug - websocket writing 5:::{"name":"displayChat","args":["a: hi"]}
   debug - served static content /socket.io.js
   debug - client authorized
   info  - handshake authorized PL2VRwE2V0UvBc6dgz9F
   debug - setting request GET /socket.io/1/websocket/PL2VRwE2V0UvBc6dgz9F
   debug - set heartbeat interval for client PL2VRwE2V0UvBc6dgz9F
   debug - client authorized for 
   debug - websocket writing 1::
sendchat b: hi
   debug - websocket writing 5:::{"name":"displayChat","args":["b: hi"]}
   info  - transport end (socket end)
   debug - set close timeout for client PL2VRwE2V0UvBc6dgz9F
   debug - cleared close timeout for client PL2VRwE2V0UvBc6dgz9F
   debug - cleared heartbeat interval for client PL2VRwE2V0UvBc6dgz9F
   debug - discarding transport
   debug - emitting heartbeat for client T0NOrPaqIkQMXOJjgz9E
   debug - websocket writing 2::
   debug - set heartbeat timeout for client T0NOrPaqIkQMXOJjgz9E
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client T0NOrPaqIkQMXOJjgz9E
   debug - set heartbeat interval for client T0NOrPaqIkQMXOJjgz9E
   debug - served static content /socket.io.js
   debug - client authorized
   info  - handshake authorized I3S_VVYyencv9VQOgz9G
   debug - setting request GET /socket.io/1/websocket/I3S_VVYyencv9VQOgz9G
   debug - set heartbeat interval for client I3S_VVYyencv9VQOgz9G
   debug - client authorized for 
   debug - websocket writing 1::
sendchat b: hi
   debug - websocket writing 5:::{"name":"displayChat","args":["b: hi"]}
   debug - emitting heartbeat for client T0NOrPaqIkQMXOJjgz9E
   debug - websocket writing 2::
   debug - set heartbeat timeout for client T0NOrPaqIkQMXOJjgz9E
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client T0NOrPaqIkQMXOJjgz9E
   debug - set heartbeat interval for client T0NOrPaqIkQMXOJjgz9E
   debug - emitting heartbeat for client I3S_VVYyencv9VQOgz9G
   debug - websocket writing 2::
   debug - set heartbeat timeout for client I3S_VVYyencv9VQOgz9G
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client I3S_VVYyencv9VQOgz9G
   debug - set heartbeat interval for client I3S_VVYyencv9VQOgz9G
   debug - emitting heartbeat for client T0NOrPaqIkQMXOJjgz9E
   debug - websocket writing 2::
   debug - set heartbeat timeout for client T0NOrPaqIkQMXOJjgz9E
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client T0NOrPaqIkQMXOJjgz9E
   debug - set heartbeat interval for client T0NOrPaqIkQMXOJjgz9E
   debug - emitting heartbeat for client I3S_VVYyencv9VQOgz9G
   debug - websocket writing 2::
   debug - set heartbeat timeout for client I3S_VVYyencv9VQOgz9G
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client I3S_VVYyencv9VQOgz9G
   debug - set heartbeat interval for client I3S_VVYyencv9VQOgz9G
sendchat a: digg
   debug - websocket writing 5:::{"name":"displayChat","args":["a: digg"]}
   debug - emitting heartbeat for client T0NOrPaqIkQMXOJjgz9E
   debug - websocket writing 2::
   debug - set heartbeat timeout for client T0NOrPaqIkQMXOJjgz9E
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client T0NOrPaqIkQMXOJjgz9E
   debug - set heartbeat interval for client T0NOrPaqIkQMXOJjgz9E
   debug - emitting heartbeat for client I3S_VVYyencv9VQOgz9G
   debug - websocket writing 2::
   debug - set heartbeat timeout for client I3S_VVYyencv9VQOgz9G
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client I3S_VVYyencv9VQOgz9G
   debug - set heartbeat interval for client I3S_VVYyencv9VQOgz9G
sendchat b: dd
   debug - websocket writing 5:::{"name":"displayChat","args":["b: dd"]}
   debug - emitting heartbeat for client T0NOrPaqIkQMXOJjgz9E
   debug - websocket writing 2::
   debug - set heartbeat timeout for client T0NOrPaqIkQMXOJjgz9E
   debug - got heartbeat packet
   debug - cleared heartbeat timeout for client T0NOrPaqIkQMXOJjgz9E
   debug - set heartbeat interval for client T0NOrPaqIkQMXOJjgz9E
   debug - emitting heartbeat for client I3S_VVYyencv9VQOgz9G
   debug - websocket writing 2:: 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T01:32:17.933

使用套接字，您只向当前连接发出。您需要使用 io.sockets 发射，它将发射到任何打开的套接字。

改变这个：

```
io.sockets.on('connection', function (socket) {
  socket.on('sendChat', function (data) {
    // console.log('sendChat', data);
    socket.emit('displayChat', data);
  });
}); 
```

对此：

```
io.sockets.on('connection', function (socket) {
  socket.on('sendChat', function (data) {
    // console.log('sendChat', data);
    io.sockets.emit('displayChat', data);
  });
}); 
```

# twitter - 给定日期内来自 Twitter 的数据

> ID：14793324
> 
> 赞同：0
> 
> 时间：2013-02-10T00:38:01.583
> 
> 标签：twitter, twitter4j

我想在指定日期内从 twitter 收集所有推文。可能吗？有没有办法实现它？目前我可以使用 twitter4j 检索我自己的推文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:09:39.683

twitter api 提供了一个名为[until](https://dev.twitter.com/docs/api/1.1/get/search/tweets#api-param-search_until)的搜索参数。您可以使用参数获取推文，`until`然后以编程方式按日期选择推文。

# php - 如何将另一行与另一表中的另一行连接起来

> ID：14793326
> 
> 赞同：0
> 
> 时间：2013-02-10T00:38:11.967
> 
> 标签：php, mysql, database

我要做的是连接table1中的用户ID以连接table2中的用户名。而不是在页面上显示他的用户名。减少冗余。

谁能带我上路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:40:12.510

用于跨表将数据绑定在一起的[SQL 连接](http://www.w3schools.com/sql/sql_join.asp)适用于这种情况。语法将类似于以下内容：

```
select username
from table1
join table2
on table1.userId = table2.userId 
```

# php - 我该如何避免选择文件后删除值？

> ID：14793328
> 
> 赞同：0
> 
> 时间：2013-02-10T00:38:28.090
> 
> 标签：php, javascript, jquery, html, input

我正在开发一个网络上传器，但是，我发现了一些东西，我不知道这是否是一个问题。这是我发现的：

当我选择带有 的文件时 `<input type="file" multiple>`，所有选定文件的值都存储在 INPUT 内的文件列表中。但是，当我添加更多文件时，我选择的文件会替换我之前选择的文件。我认为这是这个元素 DOM 的默认行为。

**如果我想添加更多文件而不删除之前选择的文件，我该怎么办？**

有谁知道如何做到这一点？

顺便说一句：对不起我的英语不好，这不是我的母语。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:45:19.247

You can keep track of all `FileList`s, and loop over each one when sending through ajax: [http://jsfiddle.net/46Pk8/](http://jsfiddle.net/46Pk8/). However, keep in mind that you can select (and upload) a file more than once this way. A better method would be to have a visual list, and let the user be able to add/remove files to/from the list.

```
var files = [];  // this will contain FileLists

$("button:first").on("click", function(e) {
    $("<input>").prop({
        "type": "file",
        "multiple": true
    }).on("change", function(e) {
        files.push(this.files);
    }).trigger("click");
});

$("button:last").on("click", function(e) {
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "/echo/html/", true);
    var data = new FormData();
    $.each(files, function() {  // each FileList
        $.each(this, function() {  // each file inside this list
            console.log("appending %s", this.name);
            data.append("files", this);
        });
    });
    xhr.onreadystatechange = function(e) {
        if(xhr.readyState === 4) {
            console.log("done");
        }
    };
    xhr.send(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:37:50.557

作为解决方法，您可以在文件选择后插入*另一个* `input`并隐藏原始文件。

# xcode - 修复文件 'project.pch' 已被修改，因为 Xcode 中预编译的头文件被构建错误

> ID：14793329
> 
> 赞同：54
> 
> 时间：2013-02-10T00:38:32.470
> 
> 标签：xcode, info.plist, pch

我最近在 info.plist 部分处理我的应用程序，因为我的应用程序不会在我的测试设备上运行：

> 自构建预编译头文件以来，文件“project.pch”已被修改

需要注意的是，该应用程序在模拟器中运行良好。

* * *

编辑：现在我收到此错误而不是另一个错误：

> 没有这样的文件或目录（/Users/Me/Library/Developer/Xcode/DerivedData/MyProject-abcdefghijklmnopqrstuvwxyz/Build/Products/Debug-iphoneos/MyApp./MyApp）

![没有这样的文件或目录错误](../Images/fc3a9f70c59399c91d9848c4c2a7550c.png)

如何重新生成 info.plist 文件？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-02-11T15:25:19.130

您可以尝试深度清洁（与产品 > 清洁不同）- `Option`+ `Command`+ `Shift`+`K`

**注意：**这意味着***清理构建文件夹***（通过按`Option`+ 产品 -> 清理文件夹）

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2014-07-31T02:56:10.493

1.  关闭您的项目或工作区。
2.  在 Finder 中：`⇧shift`++`⌘cmd``G`
3.  粘贴：`~/Library/Developer/Xcode/DerivedData/`
4.  删除`ModuleCache`文件夹并清空垃圾箱。
5.  打开你的项目。
6.  清洁：`⇧shift`+ `⌘cmd`+`K`
7.  构建：`⌘cmd`+`B`

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2014-04-12T13:50:39.770

就我而言，错误消息有一个小提示：

> 注意：修改系统头文件后，请删除 '~/Library/Developer/Xcode/DerivedData/ModuleCache/5CYAJ91AZCB7' 的模块缓存

我试过了，它奏效了。

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2013-07-15T12:58:47.327

只需触摸项目的 pch 文件就为我解决了这个问题：

```
touch Test.pch 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2014-09-15T07:57:58.843

*   产品 -> 清洁
*   产品 + `Option`-> 清理构建文件夹
*   关闭项目或工作区
*   在 Finder 中清理“ModuleCache”路径。

在 Xcode6 GM 和 iOS 8.0 中为我工作。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-06-12T11:09:17.747

当 Xcode 提供的库的 .h 文件被更改（甚至是空格）时，可能会发生此错误。

可能会尝试以下方法来解决此问题

*   在***Project -> Build Settings***中，将**Precompile Prefix Header**更改为**NO**

    或者

*   运行**rm -rf ~/Library/Developer/Xcode/DerivedData**并**清理构建**

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-02-10T16:28:55.337

自从使用命令行构建（xcodebuild）从 Xcode 4.6 升级到带有 iOS 项目的 Xcode 5 以来，我经常遇到这种情况。

对我有用的是将其用作命令行构建命令：

```
xcodebuild -project path/to/my.xcodeproj -configuration Debug clean build 
```

在此之前，我尝试过：

*   在 Xcode GUI 中清理项目。
*   删除有问题的 pch 文件。
*   删除有问题的 pch 文件的父文件夹。
*   删除 DerivedData 项目文件夹。

在 Xcode 5.0.2、Mavericks、iOS7 下，以上方法都不适合我。

请注意，使用 Xcode GUI 时，我没有遇到这个问题。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-09-22T03:05:29.403

我只是转到目录“/$HOME/Library/Developer/Xcode/DerivedData/”，删除那里的所有内容

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-03-27T05:08:27.213

只需从菜单中单击**产品并选择****清洁**

> **产品>清洁**

对我来说工作得很好。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-10-03T09:11:19.093

```
rm -rf ~/Library/Developer/Xcode/DerivedData/ 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-10-07T14:45:08.477

如果您使用 AppCode，您可以尝试删除内容形式：/Users/[Username]/Library/Caches/appCode30/DerivedData/

为我工作:)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-09-02T11:10:53.227

我遇到了同样的问题。我的错误说就像我需要删除以下位置的缓存，

> 用户/我的用户名/库/开发人员/Xcode/DerivedData/ModuleCache/3FGETKFCU0N0W

`3FGETKFCU0N0W`是一个文件夹，当我删除它然后清理构建项目时。然后错误消失。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-12-01T12:17:46.470

如果您在 git 分支之间切换时遇到此问题，请尝试添加这个 post-checkout 挂钩，它会在您每次更改分支时清理您的项目。

```
!/bin/sh
xcodebuild clean -configuration Debug 
```

另存为`.git/hooks/post-checkout`相对于您的项目根目录，不要忘记`chmod +x .git/hooks/post-checkout`

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-07-16T17:13:33.713

另外，只需打开终端，然后删除已生成的 .pcm 文件（**Xcode 6 以上**）

```
rm <path-to-pcm-file> 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-07-10T13:50:49.647

对我来说，这个问题只出现在 Xcode 6 beta 版本中，所以我切换回 Xcode 5，现在问题解决了。

我在这里尝试了所有用户建议的所有步骤，但没有人为我工作。

因此，如果您同时拥有两个版本的 Xcode 并且仅在 Xcode 6 beta 中出现问题，那么切换到 Xcode 5 并清理项目，问题将得到解决。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-02-19T16:07:56.557

如果您使用 xcodebuild 在命令行上构建，请删除传递给命令的“-parallelizeTargets”选项。这为我解决了这个问题

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-07-09T09:18:38.470

我一一尝试了这些，但未能构建和运行我的项目。所以我将**Precompile Prefix Header**更改为**NO**，正如 @Abhilash Gopal 所提到的，然后我重置了模拟器，删除了派生数据，删除了相应的 .pcm 文件（在我的情况下，它是 UIKit 框架中的 UIImage.h，所以删除了 UIKit .pcm)。然后我清理了项目，然后我才能成功构建它。在早期版本的 Xcode 中，这些文件基本上被锁定，不允许编辑。但现在情况并非如此。希望这可以帮助面临同样情况的人。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-09-24T16:20:09.133

唯一对我有用的解决方案是运行以​​下命令：

```
sudo rm -R /var/folders/ 
```

但这给我在 OS X 中带来了很多麻烦。

我认为因为 /var/folders/ 用于临时文件，所以应该可以清空其中的任何内容。但我错了，看下面的帖子：[link](https://apple.stackexchange.com/questions/121317/com-apple-iconservices-is-causing-high-cpu-usage-and-finder-problems-in-maverick)

每次我尝试构建我的 Xcode 项目时都会出现您描述的问题 - 我通过 Jenkins 从 CLI 构建它。

这意味着我不能每次都运行 rm 命令。所以我找到了一些灵​​感并编写了以下 ruby​​ 脚本来解决我的问题：

```
#!/usr/bin/env ruby

require 'fileutils'

cache = Dir.glob("/var/folders/**/com.apple.DeveloperTools*")
FileUtils.rm_rf(cache) 
```

我希望它对某人有帮助。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-10-28T11:05:59.503

删除`project.xcworkspace`对我有用。

`project.xcworkspace`是一个描述当前 Xcode 工作区状态模式的目录。每次启动 Xcode 时，`project.xcworkspace`如果不存在，它将重新生成。

为了删除`project.xcworkspace`：

*   右键单击您的项目文件`yourProject.xcodeproj`
*   从下拉菜单中选择`Show Package Content`
*   清除 xcworkspace 文件

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2014-11-04T10:10:12.167

经过大量答案和有用的建议后，我发现解决方案是：卸载 Xcode 6 并通过可用的 dmg 文件重新安装它，然后安装 Xcode 的所有组件。

Product + Option -> Clean Build Folder, Clean Build Project, Deleting Module Cache files and Derived data files, using touch .pch, delete pcm file, using command line to remove var/folders案子）

在找到解决方案之前被卡住了3个多小时。希望这可以帮助某人。

谢谢。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2015-05-22T09:36:54.303

只需打开终端并启动以下命令：

```
rm /Users/pratik/Library/Developer/Xcode/DerivedData/ModuleCache/LKL48GNAN6S7/UIKit-2X95M2Q1NPNPL.pcm 
```

给出返回 .pcm 错误的文件路径。然后清理项目并运行......享受！

# javascript - 未捕获的类型错误：无法读取未定义的属性“msie”

> ID：14793331
> 
> 赞同：139
> 
> 时间：2013-02-10T00:38:52.747
> 
> 标签：javascript, jquery

此错误消息是由以下代码引起的：

```
$.fn.extend({
    chosen: function(options) {
      if ($.browser.msie && ($.browser.version === "6.0" || $.browser.version === "7.0")) { 
```

从文件：[https ://github.com/koenpunt/chosen/edit/master/chosen/chosen.jquery.js](https://github.com/koenpunt/chosen/edit/master/chosen/chosen.jquery.js)

显然浏览器没有定义。知道是什么原因造成的。Chrome 和 FF 中的相同错误。

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2013-02-10T00:41:16.470

`$.browser`从 1.9 版开始从 jQuery 中删除。它现在可以[作为插件使用](https://github.com/gabceb/jquery-browser-plugin)。通常建议避免浏览器检测，这就是它被删除的原因。

# internet-explorer-7 - IE7 和 Foundation 3 使用 boxsizing.htc 的问题

> ID：14793332
> 
> 赞同：2
> 
> 时间：2013-02-10T00:39:00.790
> 
> 标签：internet-explorer-7, zurb-foundation

使用 boxsizing.htc 对我不起作用。Stack Overflow 上其他帖子的答案对我不起作用：

[Zerb Foundation 3 - IE7 修复不起作用？](https://stackoverflow.com/questions/12959499/zerb-foundation-3-ie7-fix-not-working)

[让 Zurb 的 Foundation 3 与 IE7 一起工作](https://stackoverflow.com/questions/12788381/making-zurbs-foundation-3-work-with-ie7)

这是我所做的：

1.  在 TextEdit 中创建 boxsizing 文件，将代码放在那里，命名为 boxsizing.htc，保存为 Unicode 8。

2.  上传到我的 javascripts 目录，位于我的域根目录。

3.  将此添加到我的样式表中：

    ```
    * {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
      *behavior: url(http://mydomain.com/javascripts/boxsizing.htc); 
    } 
    ```

4.  将此添加到 htaccess 文件中：

    AddType text/x-component .htc

5.  为了安全起见，我确保在样式表之前链接了 jquery 和 modernizr，以防 htc 文件需要 jquery。

仍然没有结果。有任何想法吗？

该网站是[http://bureauforgood.com/index.php](http://bureauforgood.com/index.php)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:12:00.037

你试过使用`*behavior: url(/javascripts/boxsizing.htc);`吗？

我不得不摆弄让这个工作的路径。

# java - 使用 System.out.println 在 tomcat 中的 JavaServlet 中进行调试？

> ID：14793333
> 
> 赞同：1
> 
> 时间：2013-02-10T00:39:01.997
> 
> 标签：java, tomcat, servlets

我正在尝试在 Tomcat 中调试我的 Java servlet 代码`System.out.println`。

输出会去哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T00:43:13.403

假设没有其他日志记录配置/库，它们将位于Tomcat目录`catalina.out`中的文件或其中一个文件中。但是，如果您使用任何第三方库，他们不太可能也使用 simple s。`localhost*.log``logs``println`

您没有使用日志记录框架或标准 Java 日志记录是否有特定原因？它更有用，并且可配置。

# android - In app billing v3 示例应用程序

> ID：14793334
> 
> 赞同：0
> 
> 时间：2013-02-10T00:39:17.243
> 
> 标签：android

[我正在尝试按照 developer.android.com 上的](http://developer.android.com/training/in-app-billing/preparing-iab-app.html)培训部分在我的应用程序中实现应用计费但我无法`TrivialDrive`从 eclipse 中找到要在示例下导入的示例，即使我在我的 sdk 中看到它我也可以'让它导入。任何帮助都会很棒。

[这是](http://postimage.org/image/stryq0mq9/)我尝试手动导入 Eclipse 时发生的屏幕截图

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T00:52:08.323

假设您已经通过 Android SDK 管理器安装了 Google Play 计费库，如果您单击文件 -> 新建 -> 其他 -> 现有代码中的 Android 项目 -> 导航到您的 SDK 文件夹 -> 附加功能 -> google -> play_billing ->选择 in-app-billing-v03 并单击确定，然后完成。

自己试过了，效果很好！如果您仍然有问题，请告诉

# mongodb - 我应该选择基于文档的数据库还是图形数据库？（MongoDB 与 Neo4j）

> ID：14793335
> 
> 赞同：9
> 
> 时间：2013-02-10T00:39:22.190
> 
> 标签：mongodb, neo4j, nosql

我目前正在为应用程序选择一个 NOSQL 数据库，该数据库存储大量给定主题的电子邮件（=邮件列表）。他们每个人都有大量的电子邮件。作为这个领域的业余爱好者，我不知道我应该选择基于文档的 MongoDb 还是面向图形的 Neo4j。它更像是一次写入，多次读取。

Neo4j 的事实： 1\. 电子邮件基本上是一个图表。每封电子邮件都是一个节点，一个回复另一个（= 一条边）。2\. 图表可以很深，一封邮件可以有很多回复。3\. 可能需要在图中重新排序一些电子邮件（如果确实需要，以清理排序）。

MongoDb 的事实： 1\. 有时用户可能想要搜索一些基于参数的查询。例如来自用户 X 的所有电子邮件。 2\. 电子邮件可能非常大。3\. 文档看起来更简单。

我不知道属于哪里的事实：有时最好搜索父母并检查电子邮件从哪里复制文本（电子邮件正在回复的特定文本）。

有人可以帮帮我吗？

编辑：无论如何，我也对其他 nosql 数据库持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:48:24.030

也许这篇博文会帮助您做出决定：[http ://soloso.blogspot.com/2011/07/getting-enron-mail-database-into.html](http://soloso.blogspot.com/2011/07/getting-enron-mail-database-into.html)

请注意最底部的附录区域——@rit 扩展了原始代码并在 S3 上托管了语料库的转储。

这应该让您在 MongoDB 环境中进行相当多的实验。

布莱恩

# c++ - 如何在linux中做一个假的鼠标滚轮移动

> ID：14793338
> 
> 赞同：3
> 
> 时间：2013-02-10T00:39:51.420
> 
> 标签：c++, linux, qt, x11, xlib

我正在尝试模拟键盘和鼠标事件，我已经成功制作了假键盘 keydown、keyup。假鼠标按钮向下，向上和假鼠标移动，但我没有找到如何做假鼠标滚轮移动，有人可以向我解释一个在 C++ 中执行此操作的简单方法吗？

鼠标移动和鼠标按钮按下：

```
Display *dpy = XOpenDisplay(NULL);
XTestFakeMotionEvent(dpy, -1, 50, 50, 0);
XTestFakeButtonEvent(dpy, Button1, true, 0);
XTestFakeButtonEvent(dpy, Button1, false, 0);
XFlush(dpy);
XCloseDisplay(dpy); 
```

键盘按键：

```
Display *dpy = XOpenDisplay(NULL);
unsigned int keycode = XKeysymToKeycode(dpy, XK_Super_L);
XTestFakeKeyEvent(dpy, keycode, true, 0);
XTestFakeKeyEvent(dpy, keycode, false, 0);
XFlush(dpy);
XCloseDisplay(dpy); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T00:50:03.550

Linux上的鼠标滚轮不只是另一个按钮按下吗？我现在无法为您测试这个，但我记得在我的系统上滚动鼠标滚轮只会生成按钮事件。您可以通过运行`xev`显示 X 输入事件的程序在系统上对此进行测试。

# blackberry-simulator - 如何在 Mac OS X 中运行 BB10 模拟器

> ID：14793341
> 
> 赞同：4
> 
> 时间：2013-02-10T00:40:04.790
> 
> 标签：blackberry-simulator, blackberry-10

安装模拟器后，我无法按照[此处](https://developer.blackberry.com/devzone/develop/simulator/simulator_installing.html)找到的说明进行操作。我安装了 BlackBerry 10 Dev Alpha B Simulator。该页面要求运行“BlackBerry10Simulator-BB10_ n_nn”，但我在安装目录中找不到类似的东西：

```
ls -1 BlackBerry10Simulator-BB10_0_10-261/
BlackBerry10Simulator-BB10_0_10.vmwarevm
bbm
controllers
install 
```

我在 bbm 目录中找到了“runBB10Simulator.sh”，但运行它并没有真正运行模拟器，我不确定它的作用。

```
$ls -1 BlackBerry10Simulator-BB10_0_10-261/bbm
KeyNego.SIMULATOR.keystore
README.txt
Servers
bin
classpath
licenses
runBB10Simulator.sh
shutdown.sh 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T05:45:41.187

MAC OS 需要 VMFusion 30 天试用版才能安装 BB 10 模拟器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T00:42:05.650

该模拟器需要VMWare播放器，免费下载。

[http://www.vmware.com/products/player/](http://www.vmware.com/products/player/)

干杯

编辑：Mac OS 需要[http://www.vmware.com/products/fusion/overview.html](http://www.vmware.com/products/fusion/overview.html)这不是免费的。无论是 bootcamp windows，安装 linux 发行版还是虚拟化以虚拟化模拟器......（XZibit meme 某人？）这可能无法正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T05:48:11.790

@russoue：- 安装 VMware Fusion 后，只需`**BlackBerry10Simulator-BB10_0_10.vmwarevm**`使用 VMware Fusion 打开即可。加载模拟器需要大约 5 分钟。

# string - Bash 脚本：在一行代码中查找字符串并在自己的行中插入

> ID：14793345
> 
> 赞同：0
> 
> 时间：2013-02-10T00:40:30.673
> 
> 标签：string, bash, sed, awk

我正在尝试编写一个小的 bash 脚本：

*   -wget 每隔 [x] 分钟从网络访问一个 html 文件
*   - 使用一些 linux 实用程序来查找最近两次更新之间文件的差异
*   - 使用 sed 修改检测到新文本的行

我遇到的问题是 HTML 文件使用内联 CSS 来格式化表格，但页面的实际代码存储在一个长行中。

实际上，我需要一个 Linux 实用程序，它可以扫描一行代码，找到每个标签之间的每个文本实例，并将这些实例插入到它们自己的行中。这应该使扫描文本更容易。我尝试过的每个工具都以每行为基础进行搜索，但由于整个代码都存储在一行中，因此无法满足我的需求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:45:40.480

您可以先将内容分成几行，方法是`>`用`>\n`. 这将分解每个 HTML 标记末尾的文档。

也许您甚至不需要这样做：如果您使用 awk 的`RS`变量将记录分隔符定义为“>”而不是换行符。有关使用 RS 的示例，请参阅此页面：[http ://www.thegeekstuff.com/2010/01/8-powerful-awk-built-in-variables-fs-ofs-rs-ors-nr-nf-filename- fnr/](http://www.thegeekstuff.com/2010/01/8-powerful-awk-built-in-variables-fs-ofs-rs-ors-nr-nf-filename-fnr/)

# jpa - 找不到无状态注解

> ID：14793346
> 
> 赞同：1
> 
> 时间：2013-02-10T00:40:31.950
> 
> 标签：jpa, java-ee-6

我在使用 JPA (Hibernate) 时遇到了一点问题

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.validation.constraints.NotNull;
/**
 * Bean decribing a user.
 * 
 */
@Entity
public class User implements Serializable {
... 
```

我可以使用一些注释（如@Entity），如上面的示例所示。

但是 Eclipse 找不到 @Stateless。为什么 ？

我正在使用来自 Hibernate (4.1.9) 的最新版本我创建了一个用户库，其中包含来自 hibernate 目录的所有必需库。我使用 JPA Project Facet 升级了我的动态 Web 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:38:12.383

我通过使用包含 EJB 实现的 TomEE Web 服务器解决了我的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:08:35.167

@Stateless 注解与 EJB 相关。为此，您需要在项目构建路径中包含 EJB3.1 jar。

# memory-management - cuda 内存合并

> ID：14793350
> 
> 赞同：2
> 
> 时间：2013-02-10T00:40:57.420
> 
> 标签：memory-management, cuda, coalescing

我想首先确认以下几点：到共享内存的基本全局内存事务是 32 字节、64 或 128 字节，但前提是内存访问可以合并。先前交易的延迟都是相等的。那正确吗？

第二个问题：如果内存读取不能合并，每个线程只读取 4 个字节（对吗？）所有线程的内存访问都是顺序的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:04:15.643

这取决于您正在处理的架构。然而，在费米和开普勒上，你有：

*   内存事务总是 32 字节或 128 字节称为段
*   仅使用 L2 缓存时使用 32 字节段，L2+L1 时使用 128 字节段。
*   如果同一 warp 的两个线程落入同一段，则数据在单个事务中传递
*   另一方面，如果您获取的数据段中没有请求线程 - 无论如何它正在被读取并且您（可能）浪费带宽
*   整个段都属于 L1 和 L2 缓存，当您的相邻 warp 需要相同的段时，可能会减少您的带宽压力
*   与它们通常交付的线程数量相比，L1 和 L2 相当小。这就是为什么你不应该期望一段数据在缓存中停留很长时间（与 CPU 编程相反）
*   您可以禁用 L1 缓存，如果您在随机内存访问模式中过度获取，这可能会有所帮助。

如您所见，有几个变量决定了您的内存访问将花费多少时间。一般的经验法则是：访问模式越密集 - 越好！步幅或错位现在不像过去那样昂贵，所以不要太担心，除非你正在做一些后期优化。

# java - 找到 DES 的密钥

> ID：14793355
> 
> 赞同：1
> 
> 时间：2013-02-10T00:41:51.720
> 
> 标签：java, cryptography, encryption, des

使用java中给出的DES解决加密和解密问题。我已经想出了如何很容易地加密和解密，但现在我卡住了。对于当前的问题，我有明文和对应的密文（格式为 8 个十六进制对，例如：A5 33 1F ..），但我也有密钥的前 4 个十六进制位。我并不是真的要代码，而是更多地想知道我将如何解决这个问题！任何事情都会有帮助！这是我的解密代码（只是包含它以表明我正在努力工作:)）。多谢你们！

```
public static void decrypt(){
    Cipher cipher;
    SecretKeySpec key;
    byte [] keyBytes;
    byte [] pt;
    byte [] ct;
    String plaintxt;

    keyBytes = new byte [] {(byte)0xFE, (byte)0xDC, (byte)0xBA, (byte)0x98, (byte)0x76, (byte)0x54, (byte)0x32, (byte)0x10};
    key = new SecretKeySpec(keyBytes, "DES");
    ct = new byte [] {(byte) 0x2C, (byte) 0xE6, (byte) 0xDD, (byte) 0xA4, (byte) 0x98, (byte) 0xCA, (byte) 0xBA, (byte) 0xB9};

    try{
        cipher = Cipher.getInstance("DES/ECB/NoPadding");
        cipher.init(Cipher.DECRYPT_MODE, key);
        pt = cipher.doFinal(ct);
        printByteArray(pt);
        plaintxt = byteToHex(pt);
        hexToAscii(plaintxt);
    }
    catch(Exception e){
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:44:59.753

蛮力。

枚举它可能是的每个密钥（给定固定字节），直到获得使明文和密文匹配的解密。它将需要编辑：不过，平均 2^37 次尝试，所以不要指望它会很快发生:)

There are some properties of DES that let you crack it faster, but they're very difficult to implement and I doubt you'd be expected to learn them. But if you are interested, [http://en.wikipedia.org/wiki/Data_Encryption_Standard#Security_and_cryptanalysis](http://en.wikipedia.org/wiki/Data_Encryption_Standard#Security_and_cryptanalysis)

# dart - 是否可以将 Dart 代码直接输入 Chromium 开发工具控制台？

> ID：14793357
> 
> 赞同：6
> 
> 时间：2013-02-10T00:42:01.320
> 
> 标签：dart, dartium

我正在使用 Dart VM 运行最新的 Chromium 版本。我想通过摆弄网站，使用控制台输入 Dart 命令来开始玩 Dart 的 HTML 库。显然，使用 Javascript 很容易，但我不知道如何告诉控制台我正在输入 Dart，而不是 JS。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T01:08:11.260

它不是。实际上我不久前在错误跟踪器上请求了这个功能，但我似乎找不到它。IIRC，这与您必须在特定隔离区中运行代码这一事实有关，目前这是不可能的。在 javascript 中，一切都是全局的，因此存在根本区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T15:38:18.180

如果它有 Dart VM 是可能的......我运行 Dartium 但我想它可能是相似的！

[https://drive.google.com/file/d/0B1XajbEHFd35OFRJSU5hR0FPZlE/edit?usp=sharing](https://drive.google.com/file/d/0B1XajbEHFd35OFRJSU5hR0FPZlE/edit?usp=sharing)

您必须在上下文菜单中进行更改。如果这个答案对你不起作用，我很抱歉......

# java - 在没有 BouncyCastle 的情况下以编程方式为 SSL Client-Auth 创建客户端证书的任何方式？

> ID：14793363
> 
> 赞同：0
> 
> 时间：2013-02-10T00:42:59.403
> 
> 标签：java, ssl, keystore, x509, authentication

我正在编写一个服务器应用程序，通过 SSL-Client-Auth 识别它的客户端。每个客户端都应该创建自己的密钥对和证书以连接到该服务器。任何未知的客户端（由新的公钥标识）都将作为新客户端线程并使用此公钥注册。我不想在服务器端签署客户端证书（因为这不会增加安全性）。

但似乎（在研究了数百页之后）我无法在纯 Java 中以编程方式创建必要的文件（或对象），因为 KeyStore 至少需要自签名客户端证书（如果没有 BouncyCastle，我将无法创建）库）。

我错了还是真的没有办法做到这一点？

请给我一个链接或代码。Java SSL semms 非常复杂并且文档很差。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:37:53.260

据我所知，JSSE API（包括 JSSE 和 JCE）中确实没有任何东西可以颁发 X.509 证书。手动处理 X.509 结构实际上是相当复杂的，如果你想复制 BouncyCastle 所做的事情，而不使用 BouncyCastle，你肯定需要阅读更多内容。

BouncyCastle 是迄今为止实现您想要的最便捷的方式。您也可以使用这些`sun.*`包（因为`keytool`使用它们来生成自签名证书），但是使用这些包通常是不好的做法，因为它们不是公共 JSSE API 的一部分。它们没有文档化，依赖于 JSSE 的特定实现，并且可能会发生变化。相比之下，BouncyCastle 旨在用作图书馆。

> 我不想在服务器端签署客户端证书（因为这不会增加安全性）。

由于您的服务器将仅使用公钥（而不是证书）来执行身份验证（基于您选择实现的公钥和用户之间的任何映射），因此在服务器端或客户端颁发证书并不重要在安全方面。客户端可以自签名任何它想要的东西，服务器只能依赖公钥，而不是证书的其余部分。您需要将公钥“捆绑”到 X.509 证书中的原因是因为它是唯一受支持的客户端证书（例如，JSSE 不支持 OpenPGP 证书）。

在您的服务器上拥有一个接收公钥并发送 X.509 证书（具有任何虚拟属性，由任何私钥签名）的服务可能是最简单的选择。此外，如果您使用该服务器内部的迷你 CA，这将简化您需要调整信任管理器以通过自签名证书的方式。（如果您想设计这样的安全方案，您仍然需要使用内部映射检查实际的公钥。）

# eclipse - 在输出文件夹中制作 Eclipse 复制源文件

> ID：14793366
> 
> 赞同：1
> 
> 时间：2013-02-10T00:43:17.893
> 
> 标签：eclipse, file, copy, directory, output

我在我的 java 项目中读取（有时写入）一个 .txt 文件，我希望将它复制到名为“bin”的 eclipse 输出文件夹中。

eclipse可以在编译时做到吗？

我的项目是这样的：

*   项目

    *   斌
        *   blabla.class
        *   ...
    *   源
        *   blabla.java
        *   ...
    *   我的文件.txt

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:00:34.940

我认为您实际上需要将文本文件移动到一个子目录 - 例如“资源”并将该“资源”目录作为源目录添加到项目 - 项目/属性/Java构建路径/源/添加文件夹。这并不意味着源文件夹中的所有内容都必须是可编译的。

我认为您不会有其他选择，因为如果您将根目录添加为源文件夹，eclipse 会抱怨它不能嵌套源文件夹。所以你需要一个额外的（重新）源文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T14:42:23.917

解决方案是：

使用 Eclipse 经典 4.2.1

在创建新项目时单击“添加项目'YourProjectName'文件夹以构建路径”（在源选项卡中）

做正确的包含/排除的东西来选择你想要复制的文件

# button - 如何在按钮处于加载状态时向按钮添加微调器图标？

> ID：14793367
> 
> 赞同：197
> 
> 时间：2013-02-10T00:43:21.470
> 
> 标签：button, twitter-bootstrap, icons, loading, font-awesome

Twitter [Bootstrap 的按钮](http://getbootstrap.com/javascript/#buttons)有一个很好的`Loading...`可用状态。

问题是它只显示一条消息，就像`Loading...`通过这样的`data-loading-text`属性传递的：

```
<button type="button" class="btn btn-primary start" id="btnStartUploads"
        data-loading-text="@Localization.Uploading">
    <i class="icon-upload icon-large"></i>
    <span>@Localization.StartUpload</span>
</button> 
```

查看 Font Awesome，您会看到现在有一​​个[动画微调器图标](http://fortawesome.github.com/Font-Awesome/#examples)。

在触发这样的操作时，我尝试集成该微调器图标`Upload`：

```
$("#btnStartUploads").button('loading');
$("#btnStartUploads i").removeAttr('class');
$("#btnStartUploads i").addClass('icon-spinner icon-spin icon-large'); 
```

但这根本没有效果，也就是说，我只看到`Uploading...`按钮上的文字。

按钮处于加载状态时是否可以添加图标？看起来 Bootstrap 只是`<i class="icon-upload icon-large"></i>`在处于加载状态时删除了按钮内的图标。

* * *

这是一个简单的[演示](http://jsbin.com/obogof/2)，显示了我上面描述的行为。如您所见，当它进入 Loading 状态时，图标就消失了。它会在时间间隔之后重新出现。

* * *

## 回答 #1

> 赞同：330
> 
> 时间：2014-10-09T16:35:40.873

使用 CSS3 动画的**Bootstrap 3**的简单解决方案。

将以下内容放入您的 CSS 中：

```
.glyphicon.spinning {
    animation: spin 1s infinite linear;
    -webkit-animation: spin2 1s infinite linear;
}

@keyframes spin {
    from { transform: scale(1) rotate(0deg); }
    to { transform: scale(1) rotate(360deg); }
}

@-webkit-keyframes spin2 {
    from { -webkit-transform: rotate(0deg); }
    to { -webkit-transform: rotate(360deg); }
} 
```

然后只需将`spinning`类添加到`glyphicon`加载时即可获得旋转图标：

```
<button class="btn btn-lg btn-warning">
    <span class="glyphicon glyphicon-refresh spinning"></span> Loading...    
</button> 
```

基于[http://www.bootply.com/128062#](http://www.bootply.com/128062#)

*   注意：IE9 及以下不支持 CSS3 动画。

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2013-02-10T04:11:53.457

如果您查看[bootstrap-button.js](http://getbootstrap.com/javascript/#buttons)源代码，您会看到 bootstrap 插件在调用时将按钮内部 html 替换为*data-loading-text*`$(myElem).button('loading')`中的任何内容。

对于您的情况，我*认为*您应该能够做到这一点：

```
<button type="button"
        class="btn btn-primary start"
        id="btnStartUploads"
        data-loading-text="<i class='icon-spinner icon-spin icon-large'></i> @Localization.Uploading">
    <i class="icon-upload icon-large"></i>
    <span>@Localization.StartUpload</span>
</button> 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2013-09-18T09:09:47.040

现在有一个成熟的插件：

[http://msurguy.github.io/ladda-bootstrap/](http://msurguy.github.io/ladda-bootstrap/)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-07-27T21:54:20.580

要使@flion 的解决方案看起来非常棒，您可以调整该图标的中心点，使其不会上下晃动。这看起来适合我的小字体：

```
.glyphicon-refresh.spinning {
  transform-origin: 48% 50%;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-11-16T04:05:02.180

一个懒惰的方法是使用 UTF-8 实体代码半圆`\25E0`（又名`&#x25e0;`），它看起来像◠，然后为它设置关键帧动画。这很简单：

```
.busy
{
animation: spin 1s infinite linear;
display:inline-block;
font-weight: bold;
font-family: sans-serif;
font-size: 35px;
font-style:normal;
color:#555;
}

.busy::before
{
content:"\25E0";
}

@keyframes spin
{
0% {transform: rotate(0deg);}
100% {transform: rotate(359deg);}
}
```

```
<i class="busy"></i>
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-29T00:26:44.670

这是我对 Bootstrap 4 的解决方案：

```
<button id="search" class="btn btn-primary" 
data-loading-text="<i class='fa fa-spinner fa-spin fa-fw' aria-hidden='true'></i>Searching">
  Search
</button>

var setLoading = function () {
  var search = $('#search');
  if (!search.data('normal-text')) {
    search.data('normal-text', search.html());
  }
  search.html(search.data('loading-text'));
};

var clearLoading = function () {
  var search = $('#search');
  search.html(search.data('normal-text'));
};

setInterval(() => {
  setLoading();
  setTimeout(() => {
    clearLoading();
  }, 1000);
}, 2000); 
```

在[JSFiddle上查看](https://jsfiddle.net/mikemsq/q3yjqk5s/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-04-04T13:06:38.983

这些是我的，基于纯 SVG 和 CSS 动画。不要关注下面代码片段中的 JS 代码，它只是用于演示目的。随意根据我的自定义制作您的自定义，这非常容易。

```
var svg = d3.select("svg"),
    columnsCount = 3;

['basic', 'basic2', 'basic3', 'basic4', 'loading', 'loading2', 'spin', 'chrome', 'chrome2', 'flower', 'flower2', 'backstreet_boys'].forEach(function(animation, i){
  var x = (i%columnsCount+1) * 200-100,
      y = 20 + (Math.floor(i/columnsCount) * 200);

  svg.append("text")
    .attr('text-anchor', 'middle')
    .attr("x", x)
    .attr("y", y)
    .text((i+1)+". "+animation);

  svg.append("circle")
    .attr("class", animation)
    .attr("cx",  x)
    .attr("cy",  y+40)
    .attr("r",  16)
});
```

```
circle {
  fill: none;
  stroke: #bbb;
  stroke-width: 4
}

.basic {
  animation: basic 0.5s linear infinite;
  stroke-dasharray: 20 80;
}

@keyframes basic {
  0%    {stroke-dashoffset: 100;}
  100%  {stroke-dashoffset: 0;}
}

.basic2 {
  animation: basic2 0.5s linear infinite;
  stroke-dasharray: 80 20;
}

@keyframes basic2 {
  0%    {stroke-dashoffset: 100;}
  100%  {stroke-dashoffset: 0;}
}

.basic3 {
  animation: basic3 0.5s linear infinite;
  stroke-dasharray: 20 30;
}

@keyframes basic3 {
  0%    {stroke-dashoffset: 100;}
  100%  {stroke-dashoffset: 0;}
}

.basic4 {
  animation: basic4 0.5s linear infinite;
  stroke-dasharray: 10 23.3;
}

@keyframes basic4 {
  0%    {stroke-dashoffset: 100;}
  100%  {stroke-dashoffset: 0;}
}

.loading {
  animation: loading 1s linear infinite;
  stroke-dashoffset: 25;
}

@keyframes loading {
  0%    {stroke-dashoffset: 0;    stroke-dasharray: 50 0; }
  50%   {stroke-dashoffset: -100; stroke-dasharray: 0 50;}
  100%  { stroke-dashoffset: -200;stroke-dasharray: 50 0;}
}

.loading2 {
  animation: loading2 1s linear infinite;
}

@keyframes loading2 {
  0% {stroke-dasharray: 5 28.3;   stroke-dashoffset: 75;}
  50% {stroke-dasharray: 45 5;    stroke-dashoffset: -50;}
  100% {stroke-dasharray: 5 28.3; stroke-dashoffset: -125; }
}

.spin {
  animation: spin 1s linear infinite;
  stroke-dashoffset: 25;
}

@keyframes spin {
  0%    {stroke-dashoffset: 0;    stroke-dasharray: 33.3 0; }
  50%   {stroke-dashoffset: -100; stroke-dasharray: 0 33.3;}
  100%  { stroke-dashoffset: -200;stroke-dasharray: 33.3 0;}
}

.chrome {
  animation: chrome 2s linear infinite;
}

@keyframes chrome {
  0%    {stroke-dasharray: 0 100; stroke-dashoffset: 25;}
  25%   {stroke-dasharray: 75 25; stroke-dashoffset: 0;}
  50%   {stroke-dasharray: 0 100;  stroke-dashoffset: -125;}
  75%    {stroke-dasharray: 75 25; stroke-dashoffset: -150;}
  100%   {stroke-dasharray: 0 100; stroke-dashoffset: -275;}
}

.chrome2 {
  animation: chrome2 1s linear infinite;
}

@keyframes chrome2 {
  0%    {stroke-dasharray: 0 100; stroke-dashoffset: 25;}
  25%   {stroke-dasharray: 50 50; stroke-dashoffset: 0;}
  50%   {stroke-dasharray: 0 100;  stroke-dashoffset: -50;}
  75%   {stroke-dasharray: 50 50;  stroke-dashoffset: -125;}
  100%  {stroke-dasharray: 0 100;  stroke-dashoffset: -175;}
}

.flower {
  animation: flower 1s linear infinite;
}

@keyframes flower {
  0%    {stroke-dasharray: 0  20; stroke-dashoffset: 25;}
  50%   {stroke-dasharray: 20 0;  stroke-dashoffset: -50;}
  100%  {stroke-dasharray: 0 20;  stroke-dashoffset: -125;}
}

.flower2 {
  animation: flower2 1s linear infinite;
}

@keyframes flower2 {
  0%    {stroke-dasharray: 5 20;  stroke-dashoffset: 25;}
  50%   {stroke-dasharray: 20 5;  stroke-dashoffset: -50;}
  100%  {stroke-dasharray: 5 20;  stroke-dashoffset: -125;}
}

.backstreet_boys {
  animation: backstreet_boys 3s linear infinite;
}

@keyframes backstreet_boys {
  0%    {stroke-dasharray: 5 28.3;  stroke-dashoffset: -225;}
  15%    {stroke-dasharray: 5 28.3;  stroke-dashoffset: -300;}
  30%   {stroke-dasharray: 5 20;  stroke-dashoffset: -300;}
  45%    {stroke-dasharray: 5 20;  stroke-dashoffset: -375;}
  60%   {stroke-dasharray: 5 15;  stroke-dashoffset: -375;}
  75%    {stroke-dasharray: 5 15;  stroke-dashoffset: -450;}
  90%   {stroke-dasharray: 5 15;  stroke-dashoffset: -525;}
  100%   {stroke-dasharray: 5 28.3;  stroke-dashoffset: -925;}
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>
<svg width="600px" height="700px"></svg>
```

也可在 CodePen 上找到：[https ://codepen.io/anon/pen/PeRazr](https://codepen.io/anon/pen/PeRazr)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-09-01T02:50:18.910

这是一个受 Bulma 启发的成熟的 css 解决方案。只需添加

```
 .button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      min-width: 200px;
      max-width: 100%;
      min-height: 40px;
      text-align: center;
      cursor: pointer;
    }

    @-webkit-keyframes spinAround {
      from {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
      }
      to {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
      }
    }
    @keyframes spinAround {
      from {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
      }
      to {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
      }
    }

    .button.is-loading {
      text-indent: -9999px;
      box-shadow: none;
      font-size: 1rem;
      height: 2.25em;
      line-height: 1.5;
      vertical-align: top;
      padding-bottom: calc(0.375em - 1px);
      padding-left: 0.75em;
      padding-right: 0.75em;
      padding-top: calc(0.375em - 1px);
      white-space: nowrap;
    }

    .button.is-loading::after  {
      -webkit-animation: spinAround 500ms infinite linear;
      animation: spinAround 500ms infinite linear;
      border: 2px solid #dbdbdb;
      border-radius: 290486px;
      border-right-color: transparent;
      border-top-color: transparent;
      content: "";
      display: block;
      height: 1em;
      position: relative;
      width: 1em;
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-07-30T01:18:49.750

我发现唯一有效的是这里的帖子： [https ://stackoverflow.com/a/44548729/9488229](https://stackoverflow.com/a/44548729/9488229)

我对其进行了改进，现在它提供了所有这些功能：

*   单击后禁用按钮
*   使用本机引导程序显示动画加载图标
*   页面加载完成后重新启用按钮
*   页面加载完成后文本恢复原状

Javascript：

```
$(document).ready(function () {
    $('.btn').on('click', function() {
        var e=this;
        setTimeout(function() {
            e.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Searching...';
            e.disabled=true;
        },0);
        return true;
    });
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-10T15:03:36.173

您可以使用 Bootstrap 微调器。使用“位置：绝对”使两个按钮相互重叠。使用 JavaScript 代码，您可以删除前面的按钮，然后将显示后面的按钮。

```
 button {
            position: absolute;
            top: 50px;
            left: 150px;
            width: 150px;
            font-size: 120%;
            padding: 5px;
            background: #B52519;
            color: #EAEAEA;
            border: none;
            margin: 120px;
            border-radius: 5px;
            display: flex;
            align-content: center;
            justify-content: center;
            transition: all 0.5s;
            height: 40px
        }

        #orderButton:hover {
            color: #c8c8c8;
        }
```

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

<button><div class="spinner-border"></div></button>
<button id="orderButton" onclick="this.style.display= 'none';">Order!</button>
```

# apache - Mod ReWrite 删除 URL 的组件

> ID：14793368
> 
> 赞同：0
> 
> 时间：2013-02-10T00:43:29.950
> 
> 标签：apache, .htaccess, mod-rewrite

我一定是个白痴，因为我无法解决这个问题。

我有一个网址：www.site.com.au/products/product-name.html

我需要将这些重定向到：www.site.com.au/product-name.html

所有链接都是动态的，文件夹不存在。我用什么重写规则来完成这个？

这是我到目前为止所得到的：

```
RewriteCond %{HTTP_HOST} ^(www|test)\.site\.com\.au
RewriteCond %{REQUEST_URI} ^(/products/)
RewriteCond %{REQUEST_URI} [A-Z]
RewriteRule ^.+\.html$ ${lc:%{REQUEST_URI}} [NC,R=301,L] 
```

只需要将位添加到远程 /products

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:26:22.133

```
RewriteRule ^products(/.*)$ http://www.site.com.au$1 [L, R=301] 
```

这将替换您列出的所有内容，除了第一个 RewriteCond （以匹配域，但如果您的 VirtualHost 仅在这两个域上回答，您可以排除该 RewriteCond 以简化它）。

RewriteRules 在 Apache 查看 RewriteConds 之前首先匹配，因此如果您可以在 RewriteRule 本身中进行匹配，它会大大简化事情。仅供您将来参考，如果您确实需要在 RewriteCond 中进行匹配，它看起来像这样：

```
RewriteCond %{REQUEST_URI} ^/products(/.*)$
RewriteRule ^.*$ http://www.site.com.au%1 [L, R=301] 
```

请注意`%1`用于匹配 RewriteCond 中括号中的内容与`$1`用于匹配 RewriteRule 中的内容。

编辑：根据您的评论，以下修改应强制小写。我自己不必这样做，但根据[这个 Apache 文档](http://httpd.apache.org/docs/trunk/rewrite/rewritemap.html#int)，它是一个通过 RewriteMap 的内部函数。根据您的原始代码，您可能已经在其他地方拥有了 RewriteMap 定义。如果没有，我已将其包含在此处。

```
RewriteMap lc int:tolower
RewriteCond %{REQUEST_URI} ^/products(/.*)$ [NC]
RewriteRule ^.*$ http://www.site.com.au${lc:%1} [L, R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:09:06.447

好的，我对 Apache Rewrite 的了解还不够，无法弄清楚确切的格式。但经过一番折腾，这些是有效的结果：

```
# Lowercase all /products/
RewriteCond %{HTTP_HOST} ^(www)\.site\.com\.au
RewriteCond %{REQUEST_URI} ^/products/.+\.html
RewriteCond %{REQUEST_URI} [A-Z]
RewriteRule ^ ${lc:%{REQUEST_URI}} [R=301,L]

# Lowercase all /products/ and strip products/ subfolder
RewriteCond %{HTTP_HOST} ^(www)\.site2\.com\.au
RewriteCond %{REQUEST_URI} ^/products/.+\.html
RewriteCond %{REQUEST_URI} [A-Z]
RewriteRule ^products/(.+\.html)$ /${lc:$1} [R=301,L] 
```

谢谢，

多姆

# ios - 如何为 setFrame 设置动画：在 Objective-C 中使用自动布局

> ID：14793370
> 
> 赞同：1
> 
> 时间：2013-02-10T00:43:46.427
> 
> 标签：ios, objective-c, xcode, autolayout, nslayoutconstraint

我正在开发一个 iOS (6) 应用程序，我有一个视图，我改变了它的大小（动画），并且在那个视图中是一个 UILabel，我想随着视图一起增长，但不成比例。

即我需要视图占据，如果视图是特定大小的，比如说 90% 的视图，但是当我把它变大（到另一个特定大小）时，我只希望它占据，比如 80%。这是为了容纳 UILabel 周围的其他子视图，这些子视图将在超级视图增长时变得可见。

我已经尝试使用 NSLayoutContraints ，并将前导空间设置为它需要的空间，以及设置 UILabel 的宽度以使其适当增长，我还尝试设置前导和尾随空格（如然后宽度会自动增长）。

奇怪的是，我在同一个动画代码块中（使用 UIView animateWithDuration:...）有其他子视图，它们的 NSLayoutContraints 我正在玩，它们都可以工作。然而，所有这些都是间距限制，而不是大小限制，并且没有涉及 UILabel，所以我不知道这是否与它有关......

然后我尝试设置 UILabel 的 translatesAutoresizingMaskIntoConstraints = YES，并且只在标签上使用 setFrame:，虽然这将标签的大小和位置设置在我想要的位置，但更改没有动画，所以看起来很可怕......

有没有其他人有过这样的经历或任何想法来帮助我？

谢谢

以下是我一直在尝试的一些代码，其中“left”是标签的前导空间约束，“width”是标签的宽度约束。

setFrame 方法在父视图控制器的动画代码块中调用。

```
- (void)setFrame:(CGRect)frame {
    [super setFrame:frame];

    float gap = ((frame.size.height - 36) - 9 * [self.account.accountData numberOfBars]) / ([self.account.accountData numberOfBars] + 1);
    for (NSLayoutConstraint *constraint in constraints) {
        constraint.constant = gap;
    }

    self.left.constant = frame.size.width * 34/160 + (2 - 34 * 140 / 160);
    self.width.constant = frame.size.width * 0.575 + 55.5;

    [self layoutIfNeeded];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:07:28.280

您应该能够在代码中使用 constraintWithItem:attribute:relatedBy:toItem:attribute:multiplier:constant: 来做到这一点。一起使用乘数和常数应该可以工作。将标签的宽度设置为等于其父视图的宽度，但乘数为 0.7 或 0.8，然后是一个常数，可以在较小的视图尺寸下为您提供正确的宽度。随着视图的增长，该常数值将占总宽度的较小部分。例如，使用 0.7 的乘数和 20 的常数，如果超级视图为 100 点宽，则标签将为 90 点 (100*.7 +20)。如果视图增长到 200，标签将是 160 宽（或超级视图的 80%）。

**编辑后：**

实际上，我认为我上面提到的方法行不通。在 WWDC 2012 演讲“掌握自动布局的最佳实践”中，他们讨论了使用核心动画或直接为约束设置动画。我认为这是你必须做后者的情况。如果您使用核心动画，则标签会在视图动画时跳转到其新大小，即使两者都在动画块内（至少它对我来说是这样 - Rob，如果您知道得更好，请发布）。要直接为约束设置动画（在 IOS 中），您必须使用计时器，并增加约束常量。您可以使用 NSTimer，但由于其分辨率（50-100 毫秒）的限制，我发现它有点生涩。更流畅的方法是使用与显示刷新率相关的 CADisplayLink（我认为是 16.7 毫秒）。所以这是我使用的代码。我在 IB 中的设置是一个 190 宽的视图，里面有一个 170 宽的标签。我对两者都有宽度限制（您需要为此添加 QuartzCore 框架）。

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()
@property (strong,nonatomic) CADisplayLink *displayLink;
@end

@implementation ViewController {

    IBOutlet NSLayoutConstraint *labelWidthCon;
    IBOutlet NSLayoutConstraint *viewWidthCon;
}

-(IBAction)startViewTimer:(id)sender {
    [self startDisplayLink];
}

-(void)startDisplayLink {
    self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(expandView:)];
    [self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
}

- (void)stopDisplayLink {
    [self.displayLink invalidate];
    self.displayLink = nil;
}

-(void)expandView:(CADisplayLink *) link {
    labelWidthCon.constant += 5;
    viewWidthCon.constant +=10;
    if (viewWidthCon.constant > 370) [self stopDisplayLink];
} 
```

# ios - iOS 5.1 在使用集合视图时崩溃

> ID：14793373
> 
> 赞同：2
> 
> 时间：2013-02-10T00:44:17.460
> 
> 标签：ios, ipad, ios5, ios6

我正在尝试使用集合视图，并且我想支持 5.1。我没有使用故事板。我已将 collectionview 添加到我的视图控制器中。如果它的 6.0 或更高版本打开另一个视图控制器，我正在识别版本并打开集合视图。当我在 5.1 中运行我的应用程序时，它立即崩溃并出现错误：

> 未找到符号：_UICollectionElementKindSectionHeader

我已经看到下面的链接，它仅描述了您使用故事板时的情况。 [如何在情节提要中使用 UICollectionViewController 同时仍支持 ios 5.1？](https://stackoverflow.com/questions/13176494/how-to-use-uicollectionviewcontroller-in-storyboard-while-still-supporting-ios-5)

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T05:25:54.413

您确定在项目的应用程序目标中将部署目标设置为 iOS 5.1 吗？

这应该导致以下情况：

“......在早期版本中不可用的框架 API 将被弱链接......”

（来自 的快速帮助`IPHONEOS_DEPLOYMENT_TARGET`）。

如果它在发射时立即崩溃，听起来它不是弱链接。

如果你确定你已经设置了 iOS 5.1 的部署目标，你可以尝试强制整个 UIKit.framework 弱链接来解决问题。为此，您将其标记为可选，而不是在链接框架和库部分中的必需：

![在此处输入图像描述](../Images/dc82e127b67f208f9e1e6e7b82b00393.png)

FWIW，我已经能够成功地完成您在 Mac OS X 应用程序中描述的操作：我有一个针对最新 SDK 构建的应用程序，在运行时检查 OS X 的版本并加载不同的 nib。在更高版本的 OS X 的 nib 中，我可以使用早期版本的 OS X 中不存在的 UI 元素。如果您的应用程序是基于 nib 的，我不明白为什么您不能这样做在 iOS 中也是如此。（请注意，如果您使用的是故事板，那就是另一回事了）。

这是一个如何设置它的示例项目：

[http://www.markdouma.com/developer/CollectionViewFiagler.zip](http://www.markdouma.com/developer/CollectionViewFinagler.zip)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T00:57:02.100

iOS5 不支持 UICollectionView。您只能将它与 iOS6 应用程序一起使用。对不起，但你运气不好。

[这](https://github.com/steipete/PSTCollectionView)是一个开源项目，它应该可以帮助您，正如它所定义的那样：

> 开源，100% API 兼容替换 UICollectionView for iOS4.3+

# c# - 转储方法c#，需要插件吗？

> ID：14793374
> 
> 赞同：1
> 
> 时间：2013-02-10T00:44:22.717
> 
> 标签：c#

我见过 Object.Dump() 方法，您可以在其中看到运行后在 Visual Studio 底部创建的对象。有人知道我需要什么插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:49:40.510

我认为您指的是[LinqPad](http://www.linqpad.net/)，它具有`Dump()`查看对象详细信息的扩展方法。据我所知，Visual Studio 没有内置扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:50:41.140

您可能一直在查看在 LinqPad 中运行的 C# 代码示例，它确实具有 Dump 方法。

否则，作者创建了 Dump 方法。

.NET 中没有 Dump 方法，而且我不知道有任何“插件”（库）包含该方法。

# ruby-on-rails - 如何获得“使用 Ruby 的命令提示符”的两个实例

> ID：14793381
> 
> 赞同：1
> 
> 时间：2013-02-10T00:45:15.253
> 
> 标签：ruby-on-rails, command-prompt

我是 Ruby on Rails 的绝对初学者，我似乎对我应该做事的方式有疑问。

如果我使用“rails server”来测试我的应用程序，我将无法在命令行中执行任何其他操作。

除了命令行，还有另一种搭建脚手架的方法吗？如果没有，如何同时获得两个“使用 Ruby 的命令提示符”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-21T19:39:24.467

当您从 Metro 屏幕搜索它时，右键单击它，然后单击`Open in a new window`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-25T16:03:28.593

在启动 Rails 服务器之前打开一个新的终端选项卡，然后您可以让它在后台运行。但是，请确保您返回该选项卡并在关闭终端之前专门关闭服务器，因为它并不总是在终端关闭时自动关闭，然后在稍后重新打开时可能会遇到问题。

# video - 如何为 Google Drive 上的公共 mp4 文件播放 HTML5 视频？

> ID：14793382
> 
> 赞同：3
> 
> 时间：2013-02-10T00:45:18.347
> 
> 标签：video, html5-video, google-drive-api

我希望能够使用 html5 视频标签或自定义 html5 视频播放器播放存储在我的 Google 驱动器上的公共 mp4 文件。当您单击链接时，此[文件](https://docs.google.com/file/d/0B-fYJN-c4UDjZjg0LV9XeTFpTjQ/edit?usp=sharing) 可在 Chrome 上播放，但当您使用 html5 视频播放器播放时，它会失败，如下面的简单 html5 代码。当我将相同的文件放在我的 apache web 服务器上并指向该文件的 apache web 服务器 url 时，html5 视频代码工作正常，电影在浏览器中播放。

如何使用 google drive sdk 在我的 html5 视频播放器中将其作为 html5 视频播放？请注意，我不希望使用 google 的视频播放器，而只希望使用简单的 html5 视频标签。

```
 <body>
<video src="https://docs.google.com/file/d/0B-fYJN-c4UDjZjg0LV9XeTFpTjQ/edit?usp=sharing" autoplay>
      </video></body> 
```

# c++ - 从 fstream 对象中读取括号。C++

> ID：14793383
> 
> 赞同：3
> 
> 时间：2013-02-10T00:45:20.247
> 
> 标签：c++, ifstream

我打开了一个带有名为 .txt 的 ifstream 对象的 .txt 文件`input`。如果新行以“（”开头，那么它不会按照我想要的方式读取它。预期的输出不会被打印，然后它会退出循环。我希望它仅在以下情况下跳出 while 循环它到达文件的末尾。我在做什么错？我的 do while 循环和我的 .txt 文件在下面。

```
char c;
int i;
do
{
    if(input.peek( ) == '(' || input.peek( ) == ')')
    {
        input >> c;
        cout << c;
    }else if(input.peek( ) == '+' || input.peek( ) == '-' || input.peek( ) == '*' || input.peek( ) == '/')
    {
        input >> c;
        cout << c;
    }else
    {
        input >> i;
        cout << i;
    }

}while(input && input.peek( ) != EOF); 
```

这是 .txt 文件，每个文件位于单独的行中：

```
(3)
(3)
4
(5+7)-(5*3) 
```

这是我的输出：

```
 (3)3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T00:51:26.793

所以，我很确定问题是在阅读`input.peek()`后返回换行符`')'`。然后`input >> i;`不读取数字，并`i`保持之前的值，因此输出为`3`. `i = 42;`您可以通过添加before快速尝试此操作`input >> i;`- 如果输出变为`(3)42`，那么我是对的。

如果我是对的，您将需要添加一些代码来处理`isspace()`或类似的东西。

我还可以建议您`cpeek = input.peek();`在第一个之前执行类似的操作，`if`然后再使用`if (cpeek == '(' || cpeek == ')')...`等。

# php - 如何将 1 天添加到 gg.mm.aaaa 日期

> ID：14793387
> 
> 赞同：0
> 
> 时间：2013-02-10T00:46:26.480
> 
> 标签：php, sql, date

表单正在从 MySQL 数据库中检索数据。

```
$query = $link->query("SELECT Date_ggmmaaaa AS Date 
                       FROM table
                       WHERE Date_aaaammgg BETWEEN CURDATE() + 0 - INTERVAL 1 MONTH + 0 AND CURDATE() + 0");

while($result = $query->fetch_object) {     
    $date.= "<string>".$result->date."</string>"; 
```

}

现在，当我 echo 时，我`$date`总是`gg.mm.aaaa`想添加 1 天。

例如，如果我有：

```
09.02.2013 -> I want to echo 10.02.2013

10.02.2013 -> I want to echo 11.02.2013 
```

我怎样才能做到这一点？

编辑：

运作良好的解决方案

```
$query = $link->query("SELECT date_ggmmaaaa AS date, test FROM table WHERE date_aaaammgg BETWEEN CURDATE() + 0 - INTERVAL 1 MONTH + 0 AND CURDATE() + 0 AND div1 = 0 AND div4 <> 0");

while($result = mysqli_fetch_array($query)) {
        $dt = DateTime::createFromFormat('d.m.Y', $result['date']);
        $dt->modify('+1 day');
        $result['date'] = $dt->format('d.m.Y');
        $date .= "<string>".$result['date']."</string>";
        $test .= "<number>".$result['test']."</number>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:53:26.300

```
$dt = DateTime::createFromFormat('d.m.Y', $result->date);
$dt->modify('+1 day');
$result->date = $dt->format('d.m.Y'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:52:51.573

```
$result->date=$result->date+86400;  //<-- Try that 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T00:53:27.207

也许，你可以使用这个：

```
echo date('d.m.Y', strtotime("+1 day",strtotime('10-02-2013'))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T00:58:14.700

因为您使用点，所以您可能必须先爆炸：

```
$tmp = explode(".",$result->date);
echo date("d.m.Y", mktime(0, 0, 0, $tmp[1], $tmp[0]+1, $tmp[2])); 
```

# sql - 从多个表中的多个列的平均值创建新表

> ID：14793390
> 
> 赞同：0
> 
> 时间：2013-02-10T00:47:02.513
> 
> 标签：sql, identifier, cross-join

我有以下查询：

```
CREATE TABLE Professor_Average

SELECT Instructor, SUM( + instreffective_avg + howmuchlearned_avg + instrrespect_avg)/5
FROM instreffective_average, howmuchlearned_average, instrrespect_average
GROUP BY Instructor; 
```

它告诉我这`Instructor`是模棱两可的。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:50:32.260

使用它来自的表的名称来限定讲师。

例如：`instreffective_average.Instructor`

如果您不这样做，SQL 将猜测它来自哪个查询表，但如果有 2 种或更多可能性，它不会尝试猜测并告诉您它需要帮助决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T01:04:39.173

您的查询很可能以不止一种方式失败。

除了[@Patashu 告诉您](https://stackoverflow.com/a/14793406/939860)的有关表限定列名的内容之外，您还需要`JOIN`正确地使用表。由于`Instructor`您的查询不明确，我猜测（由于缺乏信息）它*可能*看起来像这样：

```
SELECT ie.Instructor
      ,SUM(ie.instreffective_avg + h.howmuchlearned_avg + ir.instrrespect_avg)/5
FROM   instreffective_average ie
JOIN   howmuchlearned_average h  USING (Instructor)
JOIN   instrrespect_average   ir USING (Instructor)
GROUP  BY Instructor 
```

我添加了*表别名*以使其更易于阅读。

这假设三个表中的每一个都有一个`Instructor`可以连接它们的列。如果没有`JOIN`条件，您会得到 a [`CROSS JOIN`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)，这意味着每个表的每一行都将与每个其他表的每一行组合在一起。在大多数情况下非常昂贵的废话。

`USING (Instructor)`是 . 的简短语法`ON ie.Instructor = h.Instructor`。它还将连接的（必须相同的）列折叠成一列。因此，在我的示例中，如果列表中`Instructor`没有表限定，您将侥幸逃脱。`SELECT`并非每个 RDBMS 都支持此标准 SQL 功能，但您未能提供更多信息。

# python - 在 OS-X 中使用鼠标启动 Python 脚本的简单方法

> ID：14793391
> 
> 赞同：11
> 
> 时间：2013-02-10T00:47:23.007
> 
> 标签：python, macos, user-interface, command-line, frontend

我想编写作为命令行程序的 GUI 前端的跨平台 Python 脚本。问题是我认识一些 Mac 用户，他们认为使用终端与将计算机从摩天大楼的顶部扔下具有相同的效果。在 Linux 和 Windows 中，设置 Python 脚本很容易，因此用户可以双击图标，脚本将启动而无需打开任何额外的窗口。有没有一种简单的方法可以用 OS-X 做到这一点？用户是否必须安装与 OS-X 附带的 Python 不同的 Python？我一直无法找到明确的答案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-10T02:02:22.650

你可能想看看[鸭嘴兽](http://sveinbjorn.org/platypus)。这是一个免费软件应用程序，用于生成包装脚本的应用程序。

另一种方法是使用 Automator 甚至 AppleScript Editor。两者都可以生成只运行脚本的应用程序。

更新：

对于 Automator：启动 Automator，选择应用程序模板，在搜索字段中输入“脚本”，双击 Run Shell Script，将 shell 弹出菜单切换为`/usr/bin/python`，在文本字段中输入/粘贴您的 Python 脚本。或者，保留弹出菜单`/bin/bash`并在文本字段中编写一个外部脚本的调用。另存为应用程序。

您还可以从其帮助菜单中查看帮助。

对于 AppleScript，启动 AppleScript Editor，键入以下脚本：

```
do shell script "/usr/bin/true" 
```

替换`/usr/bin/true`为您喜欢的任何脚本的路径。另存为应用程序。

同样，帮助菜单中有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T02:08:15.843

[py2app](http://pythonhosted.org/py2app/)沉着地做到这一点。你制作你的 Python 脚本，使用你需要的任何依赖项（wx、Tkinter 等），py2app 让你成为一个独立的应用程序包，可以在任何现代 OS X 环境中运行。它也捆绑了 Python，因此您可以使用任何您想要的 Python（不仅仅是系统默认值）。

缺点是生成的应用程序可能很大，如果您有很多依赖项，则可能高达 50MB（尽管这有点极端）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-07T21:33:18.533

有两种方法可以做到这一点：

1.  单击一个脚本。
2.  按 command-i 打开“获取信息”窗口。
3.  展开“打开方式”部分（如果还没有）。
4.  从下拉菜单中选择“Python 启动器”。
5.  如果您希望在双击时启动所有 Python 脚本，请单击“全部更改”。
6.  可能打开 Python Launcher 并取消选中“在终端窗口中运行”这仅适用于这台机器，因此它的便携性不如以下。为什么？因为打开文档类型的默认值取决于安装的内容（XCode 和/或 IDLE 都将接管打开 .py 文件）。

方法二：

1.  验证[Interpreter Directive](https://en.wikipedia.org/wiki/Interpreter_directive)，这是文件的第一行。我建议使用`/usr/bin/env python3`. 这将运行用户路径上的第一个 python3 解释器。
2.  使脚本`chmod a+x <script_name>`从终端可执行。
3.  将扩展名从 .py 更改为 .command（这将由终端打开）。
4.  使用 zip 或 tar 进行分发，以免权限被破坏。此方法将打开一个终端窗口，但当 Python 窗口关闭时，终端窗口也将关闭。

如果您的脚本具有标准库之外的依赖项，那么您应该提供第二个`.command`文件来安装它们。这可能会使事情变得更复杂，但使用`pip3 install --user <list of dependencies>`应该尽量减少并发症。

# java - 当我多次运行基于 LWJGL 的 Java 应用程序时，为什么 NetBeans 会声明内存不足？

> ID：14793393
> 
> 赞同：5
> 
> 时间：2013-02-10T00:47:38.627
> 
> 标签：java, opengl, netbeans, java-native-interface, lwjgl

目前正在用 Java 中的 OpenGL 进行试验。在 NetBeans 中运行以下测试代码几个周期后，我收到内存不足错误，程序终止。在成功运行应用程序几个周期后，该问题会出现一段时间。

为什么会发生这种情况，如何解决？

代码：

```
package test3d;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;
import org.lwjgl.input.Keyboard;

class ColoredTriangle {
    public void start() {
        try {
            Display.setFullscreen(true);
            DisplayMode dm = new DisplayMode(34,34);
           // Display.setDisplayMode(new DisplayMode(DisplayMode.get));
            Display.create();
        } catch (LWJGLException e) {
            e.printStackTrace();
            System.exit(0);
        }

         // Init OpenGL
        GL11.glMatrixMode(GL11.GL_PROJECTION);
        GL11.glLoadIdentity();
        GL11.glOrtho(-3, 3, -2.4, 2.4, -1, 1);
        GL11.glRotatef(0.0f,5.0f,1.0f,0.0f); 
        //GL11.glOrtho(0, 640, 480, 0, 1, -1);
        GL11.glMatrixMode(GL11.GL_MODELVIEW);

        boolean quit = false;

        while (!quit) {         
            // Clear the screen.
            GL11.glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT);
            //GL11.glFrontFace(GL11.GL_CCW);
            // Begin drawing
            GL11.glBegin(GL11.GL_QUADS);
            GL11.glColor3f(1.0f,0.0f,0.0f); //Red   

     /*
                GL11.glVertex3f(0.0f,0.0f, 0.0f);

                GL11.glVertex3f(0.0f,1.0f, 0.0f);

                GL11.glVertex3f(1.0f,1.0f, 0.0f);

                GL11.glVertex3f(1.0f,0.0f, 0.0f); //*/

                 GL11.glVertex3f(1.0f,0.0f, -1f);

                GL11.glVertex3f(1.0f,1.0f, -1f);

                GL11.glVertex3f(2.0f,1.0f, -1f);

                GL11.glVertex3f(2.0f,0.0f, -1f);

              GL11.glEnd();  

            Display.update();

            if (Display.isCloseRequested() || Keyboard.isKeyDown(Keyboard.KEY_ESCAPE))
                quit = true;
        }

        Display.destroy();
        System.exit(0);
    }
}
class Test3d
{
    public static void main(String args[]) {
        ColoredTriangle ct = new ColoredTriangle();
        ct.start();
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T13:25:30.423

这是 NetBeans 的一个[已知问题](http://netbeans.org/projects/platform/lists/dev/archive/2001-10/message/101)。

NetBeans JVM 不会在每次回收后卸载 LWJGL DLL，每次执行应用程序时都会通过 LWJGL 通过 JNI 调用该 DLL。

我知道运行使用 JNI 的 Web 应用程序的 Tomcat 应用程序服务器存在类似问题（[请参阅引用它的这个 SO 问题）。](https://stackoverflow.com/questions/6228372/is-there-a-way-to-prevent-tomcat-from-crashing-when-a-loaded-jni-library-corrupt)如果你使用Tomcat管理员卸载并重新加载所述访问JNI的Web应用程序，JNI引用的DLL不会被卸载，并且在应用程序启动备份时会遇到各种问题和冲突。在这种情况下，正确的用法是完全停止 Tomcat 服务，然后重新启动 Tomcat。对于那些想要使用管理员来更新他们的 JNI 引用部署的人来说，这让他们很头疼；他们必须手动完成。

根据您的证据和[第一个链接](http://netbeans.org/projects/platform/lists/dev/archive/2001-10/message/101)，NetBeans 也遇到此问题，唯一的解决方法是：

1.  不要经常重新加载您的应用程序
2.  重新加载几次应用程序后重新启动 IDE
3.  使用可能无法执行此操作的其他 IDE（可能是[Eclipse](http://www.eclipse.org)？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T20:28:51.943

在我的 Linux Debian 上也有类似的内存问题。

以下是解决方法：

1.  运行终端
2.  以 root 身份登录
3.  类型`crontab -e`
4.  滚动到底部或文件并键入`* * * * * sync; echo 3 > /proc/sys/vm/drop_caches`

这条神奇的线路每分钟都会清除所有未使用的 ram。它删除了 NetBeans 正在产生的未使用内存（包括任何其他消耗内存的程序）。

这应该适用于大多数 UNIX 之类的操作系统。

# java - 在 JTable 单元格中渲染 BufferedImage

> ID：14793396
> 
> 赞同：0
> 
> 时间：2013-02-10T00:47:50.780
> 
> 标签：java, swing, jtable, bufferedimage, imageicon

我需要在一个 JTable 列中显示一个 BufferedImage。我覆盖了 JTable 方法

```
@Override
public Class<?> getColumnClass(int column) {
    if (column == 1){
        return BufferedImage.class;
    }
    return super.getColumnClass(column);
} 
```

但我仍然获得对象的字符串表示，而不是图像本身。有人知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T01:21:16.940

我将使用 ImageIcons 填充需要显示图像的列，并让`getColumnClass()`方法返回 Icon.class，然后使用显示图标的 JLabel 呈现它。事实上，我相信 DefaultCellRenderer 确实是一个 JLabel，所以它应该已经知道如何处理 Icons。

是的，所有模型需要知道它拥有图标。例如，下面的代码在下面的程序中工作：

```
 DefaultTableModel model = new DefaultTableModel(COL_NAMES, 0) {
     @Override
     public Class<?> getColumnClass(int column) {
        if (getRowCount() > 0) {
           return getValueAt(0, column).getClass();
        }

        return super.getColumnClass(column);
     }
  }; 
```

例如：

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.table.DefaultTableModel;

public class ImageColumnTest2 {
   public static final String IMAGE_SHEET_PATH = "http://speckycdn.sdm.netdna-cdn.com/"
         + "wp-content/uploads/2010/08/flag_icons_04.jpg";
   public static final String[] COUNTRIES = {
      "Denmark", "China", "Chile", "Canada", "Belgium", "Austria",
      "Argentina", "France", "Malaysina", "Lebanon", "Korea", "Japan",
      "Italy", "Ireland", "India", "Hong Kong", "Greece", "Germany"
   };
   public static final int COLS = 6;
   public static final int ROWS = 3;
   private static final String[] COL_NAMES = {"Country", "Flag"};

   private JTable table = new JTable();
   private JScrollPane mainPane = new JScrollPane(table);

   public ImageColumnTest2() throws IOException {
      DefaultTableModel model = new DefaultTableModel(COL_NAMES, 0) {
         @Override
         public Class<?> getColumnClass(int column) {
            if (getRowCount() > 0) {
               return getValueAt(0, column).getClass();
            }

            return super.getColumnClass(column);
         }
      };
      URL url = new URL(IMAGE_SHEET_PATH);
      BufferedImage img = ImageIO.read(url);
      int x1 = 15;  // sorry about the magic numbers
      img = img.getSubimage(x1, 0, img.getWidth() - 2 * x1, img.getHeight());

      int y1 = 20 ;  // ditto!
      int w = img.getWidth() / COLS;
      int h = img.getHeight() / ROWS;
      for (int row = 0; row < ROWS; row++) {
         int y = (row * img.getHeight()) / ROWS;
         for (int col = 0; col < COLS; col++) {
            int x = (col * img.getWidth()) / COLS;
            BufferedImage subImg = img.getSubimage(x, y, w, h);

            subImg = subImg.getSubimage(x1, 0, subImg.getWidth() - 2 * x1, subImg.getHeight() - y1);

            ImageIcon icon = new ImageIcon(subImg);
            String country = COUNTRIES[col + row * COLS];
            Object[] rowData = {country, icon};
            model.addRow(rowData);
         }
      }

      table.setModel(model);
      table.setRowHeight(((ImageIcon)model.getValueAt(0, 1)).getIconHeight());
   }

   public JComponent getMainComponent() {
      return mainPane;
   }

   private static void createAndShowGui() {
      ImageColumnTest2 imgColumnTest = null;
      try {
         imgColumnTest = new ImageColumnTest2();
      } catch (MalformedURLException e) {
         e.printStackTrace();
         System.exit(-1);
      } catch (IOException e) {
         e.printStackTrace();
         System.exit(-1);
      }

      JFrame frame = new JFrame("ImageColumnTest");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(imgColumnTest.getMainComponent());
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T00:57:45.703

没有默认值`TableCellRenderer`，`BufferedImage`你必须提供一个

为自己创建一个从`DefaultTableCellRenderer`. 覆盖 `getTableCellRendererComponent`方法

在此方法中，检查传入的值是否为 a `BufferedImage`，如果是，则创建 的实例`ImageIcon`，并将`BufferedImage`传入其中。

使用单元格渲染`setIcon`方法，将新实例传递`ImageIcon`给它

使用您的表实例，使用该`setDefaultRenderer`方法将单元格渲染器与`BufferedImage`类关联

```
table.setDefaultRenderer(BufferedImage.class, myInstanceOfBufferedImageCellRenderer) 
```

查看[使用自定义渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)了解更多信息

**添加示例**

因此，我使用我自己和气垫船的想法一起抛出了一个简单的例子。

![在此处输入图像描述](../Images/b0fae2ac4df43a6bfabf49e4e55cc110.png)

我个人的感觉是，Hovercraft 的想法将使用更少的资源并且比使用单元渲染器更快，只要您`ImageIcon`为每个创建一次`BufferedImage`并保持该引用即可。

您可以让自定义单元格渲染器执行相同的操作，但您需要涉足`WeakHashMap`s 以维护 and 之间的引用，`BufferedImage`并且`Icon`仍然存在`BufferedImage`永远不会收集有问题的引用的风险，从而使`Icon`引用悬而未决。

如果您在渲染方式上没有做任何特别的事情`BufferedImage`，我会使用 Hovercraft 的建议，纯粹从易用性和资源管理的角度来看。

```
public class BufferedImageTableCellRenderer {

    public static void main(String[] args) {
        new BufferedImageTableCellRenderer();
    }

    public BufferedImageTableCellRenderer() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                File[] files = new File("some folder some where").listFiles(new FileFilter() {
                    @Override
                    public boolean accept(File pathname) {
                        String name = pathname.getName().toLowerCase();
                        return name.endsWith(".gif") || name.endsWith(".jpg") || name.endsWith(".png");
                    }
                });

                ImageTableModel model = new ImageTableModel();
                for (File file : files) {
                    try {
                        model.add(ImageIO.read(file));
                    } catch (IOException ex) {
                        ex.printStackTrace();
                    }
                }

                JTable table = new JTable(model);
                table.setRowHeight(100);
                table.setDefaultRenderer(BufferedImage.class, new BufferedImageCellRenderer());

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(table));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class BufferedImageCellRenderer extends DefaultTableCellRenderer {
        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            if (value instanceof BufferedImage) {
                setIcon(new ImageIcon((BufferedImage)value));
                setText(null);
            } else {
                setText("Bad image");
            }
            return this;
        }
    }

    public class ImageTableModel extends AbstractTableModel {

        private List<BufferedImage> images = new ArrayList<>(25);
        private List<Icon> icons = new ArrayList<>(25);

        @Override
        public int getRowCount() {
            return images.size();
        }

        public void add(BufferedImage image) {
            images.add(image);
            icons.add(new ImageIcon(image));
            fireTableRowsInserted(images.size() - 1, images.size() - 1);
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            Object value = null;
            switch (columnIndex) {
                case 0:
                    value = images.get(rowIndex);
                    break;
                case 1:
                    value = icons.get(rowIndex);
                    break;
            }
            return value;
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            Class clazz = String.class;
            switch (columnIndex) {
                case 0:
                    clazz = BufferedImage.class;
                    break;
                case 1:
                    clazz = Icon.class;
                    break;
            }
            return clazz;
        }

        @Override
        public String getColumnName(int column) {
            String name = null;
            switch (column) {
                case 0:
                    name = "BufferedImage";
                    break;
                case 1:
                    name = "Icon";
                    break;
            }
            return name;
        }
    }
} 
```

# c - c socket：刷新数据让客户端知道可以输入

> ID：14793413
> 
> 赞同：0
> 
> 时间：2013-02-10T00:51:28.750
> 
> 标签：c, sockets, stdin

我在客户端实现多个客户端连接的客户端服务器聊天程序时遇到问题。问题是我遇到的是我如何让客户知道可以输入一些东西？目前，我的 printf 语句没有输出到屏幕上。有没有一种方法可以通知客户可以在不使用新行的情况下输入？

这是相关代码

**客户端**

```
while(1) {
  printf(">"); //this isn't being outputted

  fd_set rfds;
  FD_ZERO(&rfds);

  FD_SET(serverSocket, &rfds);
  FD_SET(0, &rfds);

  if(select(serverSocket+1, &rfds, NULL, NULL, NULL) < 0) {
      perror("select");
      exit(-1);
  }

  if (FD_ISSET(serverSocket, &rfds)) {
     //recv data from server
  }
  else if (FD_ISSET(0, &rfds)) {
     //read keyboard
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:28:16.293

由于标准输出默认是行缓冲的，您至少有两种选择：

1.  在没有换行符的情况下写入标准输出后显式刷新。`fflush(stdout);`按照 Ganeesh 的建议尝试。
2.  关闭整个程序的标准输出缓冲。试试`setvbuf(stdout, NULL, _IONBF, 0);`。你可以在这里看到一个例子：[Is it safe to disable buffering with stdout and stderr?](https://stackoverflow.com/questions/9238576/is-it-safe-to-disable-buffering-with-stdout-and-stderr)

# javascript - jquery 对指定元素应用操作

> ID：14793414
> 
> 赞同：0
> 
> 时间：2013-02-10T00:51:31.387
> 
> 标签：javascript, jquery

无论如何，我想做的是：

我有以下html：

```
<table>
    <tr id="cats">
        <td><select class="cats" id="cat_name"><option value="1">cat1</option>
                                  <option value="2">cat2</option>
            </select></td>
        <td><div id="unit"></div></td>
        <td><div id="vat"></div></td>
        <td><div id="price"></div></td>
        <td><input class="add-btn" id="Add" type="button" value="Add" /></td>
    </tr>
</table> 
```

当我单击`add`它时，它会克隆`#cats`并将其附加到表中（***所有对象（tr、select、div）保持相同的 id！***）

我使用这段代码来做这工作正常

```
$('table').delegate(".add-btn", "click", function() {
      if(i2l < max) {
        $(this).parent().parent().after($(this).parent().parent().clone());
            // some other statments
            // don't care
      }
}); 
```

但最重要的是，当我更改该目录**时，**`cat_name value`应该`unit`使用ajax/jquery 设置：`vat``price`

 **这是jQuery代码

```
var prev_cat_id = ""
$('table').delegate(".cats", "change", function() {
        var cat_id = $(this).val()
        if(jQuery(this).val()){
            $.ajax({
                url: "../ajax/catalogue.json?catalogues="+jQuery(this).val(),
                datatype: "json",
                success: function(data){
                            $('#unit'+prev_cat_id).attr('id','unit' + cat_id);
                            $('#price'+prev_cat_id).attr('id','price' + cat_id);
                            $('#vat'+prev_cat_id).attr('id','vat' + cat_id);
                            $('#unit' + cat_id).text(data['unit']);
                            $('#vat' + cat_id).text(data['vat']);
                            $('#price' + cat_id).text(data['price']);
                            prev_cat_id = cat_id;
                            }
            });
        } else {
                    $('#unit'+prev_cat_id).attr('id','unit');
                    $('#price'+prev_cat_id).attr('id','price');
                    $('#vat'+prev_cat_id).attr('id','vat');
                    $('#unit').text('');
                    $('#vat').text('');
                    $('#price').text('');
                    prev_cat_id = ""
        }
    });
}); 
```

但更改仅影响第一行

# 例如 ：

***数据库中的信息***

```
cat1[unit] = "dollar"
cat1[vat] = "7%"
cat1[price] = "80"

cat2[unit] = "euro"
cat2[vat] = "19%"
cat2[price] = "50" 
```

**我在浏览器中看到的：**

**(1) 设置`cat_name = cat1`**

```
[ cat1 [v]] euro 7% 80 [add] 
```

*** (2) 添加新行并`cat_name = cat2`在第二行设置后" 仅影响第 1 行 ***

```
[ cat1 [v]] euro 19% 50 [add]
[ cat2 [v]]             [add] 
```

***我想要的正是这个***

```
[ cat1 [v]] euro 7%  80 [add]
[ cat2 [v]] euro 19% 50 [add]
[      [v]]             [add] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:41:13.327

使用 ID 无疑是最容易编写的选择器，但是在处理模块的多个实例时，它通常比使用遍历查找元素的常见类名更复杂。

对于初学者，将演示如何使用`closest()`和`find()`隔离行实例。请注意，我将所有元素 ID 更改为类

```
/* store empty row for adding later*/
var $rowClone=$('#cats').clone().removeAttr('id');

/* if using jQuery >1.6 should use on() rather than delegate*/
$('table').delegate(".add-btn", "click", function() {    
          var $currentRow=  $(this).closest('tr');
        $currentRow.after($rowClone.clone());         

});

$('table').delegate(".cats", "change", function() {
    var val=$(this).val();  
    /* define current row to use in AJAX success*/  
    var $row= $(this).closest('tr');
    if( val){
        $.ajax({
            url:'/echo/json/',/* jsfiddle demo ajax url*/
            type:'post',
            data: {json:dummyData( val)},/* jsfiddle demo data generation*/
             datatype: "json",
             success: function(data){
                 /* only look within $row for elements to update*/
                 $row.find('.unit').text( data.unit);
                 $row.find('.vat').text( data.vat);
                 $row.find('.price').text( data.price);
             }
        })
    }
}); 
```

演示：http: [//jsfiddle.net/r8vKb/2/](http://jsfiddle.net/r8vKb/2/)

这将帮助您解决 UI 问题。至于数据库问题，在此代码中的某处，您可能需要一些与您的数据库设置相匹配的行 ID。需要更好地了解您的数据结构以帮助解决这个问题**

# c# - Ajax 工具包不工作

> ID：14793415
> 
> 赞同：2
> 
> 时间：2013-02-10T00:51:36.113
> 
> 标签：c#, asp.net

在我的开发人员环境中，ajax 工具包运行良好。将文本框渲染为滑块。都好。但是当我将它放入网络主机时，它不起作用。文本框也在控制台上留下了巨大的错误（chrome和firfox）

```
Uncaught SyntaxError: Unexpected token < ScriptResource.axd:1
Uncaught Sys.ArgumentUndefinedException: Sys.ArgumentUndefinedException: Value cannot be undefined.
Parameter name: baseType ScriptResource.axd:847
Uncaught Sys.ArgumentUndefinedException: Sys.ArgumentUndefinedException: Value cannot be undefined.
Parameter name: type ScriptResource.axd:847
2
Uncaught Sys.WebForms.PageRequestManagerServerErrorException: Sys.WebForms.PageRequestManagerServerErrorException: An unknown error occurred while processing the request on the server. The status code returned from the server was: 500 ScriptResource.axd:847 
```

我尝试从 packagemaneger 重新安装 ajaxtoolkit，但没有成功。还是一样的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T14:43:28.937

我也有这个错误。对我来说，事实证明我使用了错误的脚本管理器。

在使用 Ajax 控件的页面上，我有一个标准的`<asp:ScriptManager>`. 我的控制 (an `<ajaxToolkit:ComboBox>`) 不起作用。当我改用 a 时`<ajaxToolkit:ToolkitScriptManager>`，它开始按预期运行。

我不知道这是否能解决所有情况下的错误，但这是另一件事要检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T08:58:29.503

它只是浏览器缓存。清除那些解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T01:23:31.803

ScriptResource.axd @ line 847 中的 baseType 参数未定义。类型参数也是如此。

这就是我要做的。尝试在另一台机器上安装你的位，也许在你的办公室里，就在你的开发机器旁边。该错误表明未安装某些资源。第一步是尝试在干净的机器上复制您的设置的工作副本。

完成后，在此处发布更新...

# synchronization - 零许可信号量？

> ID：14793416
> 
> 赞同：5
> 
> 时间：2013-02-10T00:51:41.507
> 
> 标签：synchronization, semaphore

我正在尝试使用对[这个](https://stackoverflow.com/questions/6331301/implementing-an-n-process-barrier-using-semaphores)问题的第一个回复来帮助我完成我正在处理的任务。具有 0 个许可证的信号量究竟是如何工作的？这对我来说似乎没有多大意义。只是为了在那个信号灯处创造一个永恒的等待吗？如果是这样的话，你怎么能有一个线程“越过”信号量，而它只是在等待永远不会被授予的许可证？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T01:03:18.253

再次来自信号量小书，§2.2：

> ### 清单 2.1：信号量初始化语法
> 
> ```
> fred = Semaphore(1) 
> ```
> 
> 该函数`Semaphore`是一个构造函数；它创建并返回一个新的信号量。**信号量的初始值作为参数传递给构造函数。**

所以在作者的伪代码中，`0`不是许可证的数量；它是信号量的初始值。零值是什么意思？紧接着清单 2.1 的文本中对此进行了解释：

> 如果该值为正，则表示可以在不阻塞的情况下递减的线程数。如果为负数，则表示已阻塞和等待的线程数。**如果该值为零，则表示没有线程在等待，但如果一个线程试图递减，它将阻塞。**

[（重点补充）]

# php - 使用 imap_fetchbody 的零件号不起作用？

> ID：14793418
> 
> 赞同：0
> 
> 时间：2013-02-10T00:52:00.167
> 
> 标签：php, parsing, email, encoding, imap

我一直在玩这个，不能让它拉出要输入到数据库的消息的正确部分。

当我使用部件号 1 或部件号 2 时，我可以让它插入它。但我想要的也不是。我想提取 html 以便保留换行符等。

```
 $emails = imap_search($inbox,'ALL');
/* if emails are returned, cycle through each... */
if($emails) {
  foreach($emails as $email_number) {
        $overview = imap_fetch_overview($inbox,$email_number,0);
        $body = imap_fetchbody($inbox,$email_number,"1");
        $subject = $overview[0]->subject;
        createEvent($subject, $body, $email_number, $inbox);
  }
}

function createEvent($subject, $body, $msgNo, $inbox) { //process the body of the email and take it apart and find stuff in it...do whatever processing you need to here 
    $customer = ''; 
    $store    = ''; 
    $event    = ''; 
    $time = time();
    $status = '';

    // take the subject apart to get the individual elements 
    $split_subject = explode (":", $subject);

    $customer = trim($split_subject[1]);
    $store = trim($split_subject[3]);
    $event = trim(substr($split_subject[5], 0, 3));
    $status = substr($split_subject[5], 4);
    $priority = getPriority($event, $status);

    $amcs_db = mysqli_connect(AMCS_HOST, AMCS_USER, AMCS_PASS, AMCS_NAME) or die('Cannot connect to database');
    $message_body = mysqli_real_escape_string($amcs_db, $body);

    $sql = "INSERT into events values (0, '$customer', '$store', '$event', '$status', '$priority', '$time', '$body')";
    $result = mysqli_query($amcs_db, $sql) or die("Error writing to AMCS db");

    if ($result){ /*delete the email if the insertion was succesful*/
        //$delete = imap_delete($inbox, $msgNo);
        //imap_expunge($inbox);
    }
    mysqli_close($amcs_db);
}// end function 
```

使用部件号 1 时，我得到没有换行符的纯文本，一切看起来都正确并且编码正确。当我使用 2 时，它现在有换行符，但有些地方显示“错误：=A0=A0=A0=A0=A0=A0=A0 = Sign #1: error sign controller”。在常规电子邮件中，它的格式在一行中有错误，然后下一行缩进。因此，如何将缩进放入电子邮件中似乎存在某种类型的问题。

我该如何纠正这个问题？如果我使用部件号 2.2 或 1.2，它会将其输入到我的数据库空白中，这不是我想要的，哈哈。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:51:13.090

我仍然没有解决使用不同零件编号的问题，但我想出了一个解决方案。如果我使用“1”将它放入数据库，当我回显它时，它会在我使用 nl2br() 时保留换行符。希望对某人有所帮助。

我仍然很想知道为什么它不起作用。谢谢！

# java - 在现有库中添加 javadoc

> ID：14793421
> 
> 赞同：1
> 
> 时间：2013-02-10T00:52:30.447
> 
> 标签：java, netbeans, javadoc, lwjgl

我可以添加预编译库 jar 文件的 java 注释吗？我目前正在试验 lwgjl 但它缺乏记录 opengl 功能。我想在遇到新方法或属性的过程中添加对库的函数和属性的评论。

现在我必须同时打开 opengl 和 lwgjl API 来引用方法和属性，并且每次都必须查看它。在一个地方（在IDE中）使其紧凑会很方便

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:08:26.490

您可以像这样附加源代码和 javadoc：

1.  右键单击您的库
2.  编辑
3.  选择适当的选项卡（源代码或 javadoc）
4.  添加**`sourcecode`**和/或**`javadoc`**

如果你想自己添加评论，你必须提取源代码并添加这个文件夹。

# ember.js - 过渡后 Ember 不渲染

> ID：14793423
> 
> 赞同：3
> 
> 时间：2013-02-10T00:52:35.710
> 
> 标签：ember.js, rendering, ember-data, transitions, ember-router

我刚刚编写了非常简单的 Ember 应用程序，构建在 Rails 应用程序之上，使用 Ember 数据并显示、创建和持久化一种实体类型到服务器。一切都使用最新工具（Ember v1.0.0-pre.4-134-gaafb5eb）。

但是，我遇到了一个非常奇怪的问题。我的应用程序有两个视图：实体列表（索引）和用于创建新实体的表单。当我直接输入索引时，一切都显示OK。但是当我转到另一个视图然后返回列表时，该视图不会再次呈现。问题可能出在哪里？

我想这可能是由于我（可能不正确）使用新的 Ember 路由器引起的。所以我在这里粘贴应用程序的重要部分（从我的角度来看）：

**路由器：**

```
App.Router.map(function() {
  this.resource('bands', function() {
    this.route('new');
  });
});

App.IndexRoute = Ember.Route.extend({
  redirect: function() {
    this.transitionTo('bands');
  }
});

App.BandsRoute = Ember.Route.extend({
    model: function() {
        return App.Band.find();
    }
});

App.BandsNewRoute = Ember.Route.extend({
    renderTemplate : function(){
        this.render('bands_new',{
            into:'application'
        });
    }
}); 
```

**链接回列表 - 这不起作用：**

```
App.BandsNewController = Em.ArrayController.extend({
    cancel: function() {
        this.transitionTo('bands');
    }
}); 
```

在这里查看整个应用程序：[https](https://github.com/pavelsmolka/roommating) [:](https://github.com/dgeb/ember_data_example)
//github.com/pavelsmolka/roommate

我不相信，但它可能是 Ember 本身的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T12:20:32.963

我认为您在 BandsNewRoute 中的“渲染”调用搞砸了。尝试使用 Ember 默认值让事情变得更顺利。所以我会重构你的应用程序来做到这一点：

（工作小提琴：http: [//jsfiddle.net/andremalan/DVbUY/](http://jsfiddle.net/andremalan/DVbUY/)）

除了制作自己的渲染之外，您需要做的只是创建一个“bands”模板（如果需要，它可以完全为空，除了 {{outlet}}）和一个“bands.index”模板。

```
<script type="text/x-handlebars" data-template-name="application">
    {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="bands/index">
    <h2>Bands Index</h2>
    {{#linkTo bands.new}}New Band{{/linkTo}}
</script>

<script type="text/x-handlebars" data-template-name="bands">
    <h1>Bands</h1>
    <p>
      {{#linkTo index}}Start Again{{/linkTo}}
      {{#linkTo bands.new}}New Band{{/linkTo}}
    </p>
    {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="bands/new">
    I'm in new band!
    <a {{action "cancel"}}>Cancel</a>
</script> 
```

您的路线也可以通过这种方式很好地清理：

```
App.Router.map(function() {
    this.resource('bands', function() {
        this.route('new');
    });
});

App.IndexRoute = Ember.Route.extend({
  redirect: function() {
    this.transitionTo('bands');
  }
});

App.BandsNewController = Ember.Controller.extend({
    cancel: function() {
        this.transitionTo('bands');
    }
}); 
```

我希望这会有所帮助！

# php - ORDER BY 后的 DISTINCT

> ID：14793426
> 
> 赞同：1
> 
> 时间：2013-02-10T00:53:02.527
> 
> 标签：php, mysql

我基本上是在创建一个论坛。我正在输出与我的“帖子”和“成员”表连接的所有主题。这样我可以在主题索引上显示帖子和成员信息。

我想要做的是收集最后三个发布成员的用户名，我只想要唯一的值（没有重复，以防有人重复发帖）我目前正在使用 DISTINCT，但问题是用户名分组后他们是倒序排列的。如果有人发了第一篇和最后一篇文章，我将无法在此列表中检索他们的用户名。

这是我正在使用的代码：

```
SUBSTRING_INDEX(
  GROUP_CONCAT(DISTINCT `members`.`username` ORDER BY `posts`.`date` DESC SEPARATOR '\\\\') , '\\\\', 3
) AS member_last_username 
```

有没有办法可以修改该代码，以便用户名在分组之前向后排序？如果我的问题令人困惑，我深表歉意！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:33:05.507

当然，做一个子选择，以您想要的方式排序您的数据并将其用作输入。

```
SELECT 
  SUBSTRING_INDEX(
    GROUP_CONCAT(DISTINCT sub.username ORDER BY sub.`date` 
                 DESC SEPARATOR '\\\\') , '\\\\', 3
  ) AS member_last_username
FROM (SELECT m.username, p.`date` 
      FROM members m
      INNER JOIN post p ON (some join or other)
      ORDER BY backwards ordering ) sub 
```

# python - 如何使用 apt.progress 类检查 python_apt 中 commit() 的进度？

> ID：14793427
> 
> 赞同：7
> 
> 时间：2013-02-10T00:53:08.580
> 
> 标签：python, debian, apt

我正在查看由提供的这段代码，`python_apt`但它似乎有点过时了：

[https://github.com/jolicloud/python-apt/blob/master/doc/examples/inst.py](https://github.com/jolicloud/python-apt/blob/master/doc/examples/inst.py)

我在这里要做的就是跟踪`commit()`方法的进度；目前，当我们调用`commit()`并传入`fprogress`and`iprogress`时，我可以在控制台上看到其中的所有包`pkg_list`都已正确下载，问题似乎出现在此之后。

程序继续执行并且它没有`dpkg_status_change()`像我认为的那样触发？

我无法知道多个软件包的安装是否成功？

```
import apt 
from apt.progress.base import InstallProgress

    class InstallStatusUpdate(InstallProgress):

            def conffile(self, current, new):
                print "conffile prompt: %s %s" % (current, new)

            def processing(self, pkg, stage):
                print "Processing ", pkg, " stage: ", stage

            def error(self, pkg, errormsg):
                print "Package ", pkg, " error: ", errormsg

            def finish_update(self):
                print "Installation is complete"

            def status_change(self, pkg, percent, status):
                print "Package: ", pkg, " at ", percent, " -> ", status

            def dpkg_status_change(self, pkg, status):
                print "Package ", pkg, ", Status: ", status

    def install_updates(self, pkg_list):
            fprogress = apt.progress.TextFetchProgress()
            iprogress = InstallStatusUpdate()

            cache_tmp = apt.Cache()
            cache_tmp.update()
            cache_tmp.open(None)

            for pkg in pkg_list:
                try:
                    self.pkgname = cache_tmp[pkg.name]
                    if self.pkgname.is_installed and self.pkgname.is_upgradable:
                        self.pkgname.mark_upgrade()
                    else:
                        self.pkgname.mark_install()
                except Exception as e:
                    print e.message

            result = self.pkgname.commit(fprogress, iprogress)
            #Maybe i'm doing something wrong here but result always = None... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:36:30.450

显然使用`python_apt` `commit()`是一种痛苦，我最终使用`subprocess`等待一切完成（就像它应该完成的那样）并在最后解析输出以验证包确实已升级。

在`_apt_update()`我尝试之前检查以确保系统在线`apt-get update`，然后继续安装传入的包`_apt_install().`

```
 def _apt_update(self):
        import urllib2

        try:
            response = urllib2.urlopen('http://74.125.113.99', timeout=1)
            #We have internet access
            subprocess.Popen(['apt-get', 'update'])
            return True
        except urllib2.URLError as err: pass
        return False

 def _apt_install(self, pkg, update=True):
        upgraded = 0

        if update == True:
            self._apt_update()

        proc = subprocess.Popen(['apt-get', 'install', pkg, "-y"], stdout=subprocess.PIPE)
        for line in proc.stdout:
            if "upgraded" in line and "newly installed" in line and "to remove" in line:
                values = line.split(",")
                for pos in values:
                    key, value = pos.split(" ")
                    if value == "upgraded":
                        upgraded = int(key)
                    break

        print "Upgraded OK (", upgraded, ")"
        if upgraded > 0:
            return True
        else:
            return False 
```

# c# - 最大化无边框形式仅在从正常大小最大化时才覆盖任务栏

> ID：14793428
> 
> 赞同：1
> 
> 时间：2013-02-10T00:53:24.877
> 
> 标签：c#, winforms, forms

我正在使用 C# 使用无边框形式和最大化方法为应用程序提供“全屏模式”。当我在未最大化时使表单无边界时，这非常有效 - 您在屏幕上看到的只是表单，任务栏被覆盖。但是，如果我手动最大化表单（用户交互），然后尝试制作它无边界和最大化，任务栏被绘制在表单上（因为我没有使用 WorkingArea，表单上的部分控件被隐藏。这是不显示任务栏的预期行为）。我尝试将表单的属性 TopMost 设置为 true，但这似乎没有任何效果。

有什么办法可以修改它以始终覆盖任务栏？

```
if (this.FormBorderStyle != System.Windows.Forms.FormBorderStyle.None)
    {        
    this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
    }
    else
    {
        this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.Sizable;
    }
    if (this.WindowState != FormWindowState.Maximized)
    {
    this.WindowState = FormWindowState.Maximized;
    }
    else
    {
        if (this.FormBorderStyle == System.Windows.Forms.FormBorderStyle.Sizable)  this.WindowState=FormWindowState.Normal;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:07:05.167

> However, if i maximise the form manually (user interaction)...

The issue is that your window is already internally marked as being in the maximized state. So maximizing it *again* will not change the current size of the form. Which will leave the taskbar exposed. You'll need to restore it first back to Normal, then back to Maximized. Yes, that flickers a bit.

```
 private void ToggleStateButton_Click(object sender, EventArgs e) {
        if (this.FormBorderStyle == FormBorderStyle.None) {
            this.FormBorderStyle = FormBorderStyle.Sizable;
            this.WindowState = FormWindowState.Normal;
        }
        else {
            this.FormBorderStyle = FormBorderStyle.None;
            if (this.WindowState == FormWindowState.Maximized) this.WindowState = FormWindowState.Normal;
            this.WindowState = FormWindowState.Maximized;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:02:34.530

不知道为什么会这样，我*讨厌*假设他们可以占据我所有屏幕的应用程序。虽然这对于 1024x768 显示器可能是可以接受的，但当该死的东西决定它拥有我的屏幕时，我的 30 英寸显示器就被浪费了。

所以我的信息是，也许专注于确保所有**控件都是可见**的，而不是专注于最大化窗口。

您始终可以检测窗口大小的变化，然后覆盖默认行为，处理您遇到的意外问题。但是，与其最大化并占用所有 30" 显示器，不如计算窗口需要多大，并相应地设置大小。

我的 2 美分，这正是我的想法值得；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T14:01:28.157

您可以尝试使用 WinApi SetWindowPos 方法，如下所示：

```
public static class WinApi
{
    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, 
                                    int x, int y, int width, int height, 
                                    uint flags);

    static readonly IntPtr HWND_TOPMOST = new IntPtr(-1);
    const uint SWP_NOSIZE = 0x0001;
    const uint SWP_NOMOVE = 0x0002;
    const uint SWP_SHOWWINDOW = 0x0040;

    public static void SetFormTopMost(Form form)
    {
        SetWindowPos(form.Handle, HWND_TOPMOST, 0, 0, 0, 0, 
                     SWP_NOMOVE | SWP_NOSIZE | SWP_SHOWWINDOW);
    }
} 
```

在你的表格中这样称呼它：

```
WinApi.SetFormTopMost(this); 
```

# php - 它没有显示所有图像

> ID：14793432
> 
> 赞同：0
> 
> 时间：2013-02-10T00:53:32.910
> 
> 标签：php, javascript, jquery, html

我在这里有一个应用程序：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/Text20.php)

在演示中，我使用了一个基本的 jquery 滑块，这里是哪个页面：[页面信息](http://basic-slider.com/)

现在我遇到的问题是它显示问题 1 中的图像，而不是问题 2 中的图像。现在在我包含滑块之前，它显示了所有问题中的图像。但由于我包含了滑块，所以它只显示第一个问题中的图像。如何让图像显示在所有问题中？

代码：

```
<form action='results.php' method='post' id='exam'>

<?php

foreach ($arrQuestionId as $key=>$question) {

?>

<div class='lt-container'>
<p><?php echo htmlspecialchars($arrQuestionNo[$key]) . ": " .  htmlspecialchars($arrQuestionContent[$key]); ?></p>

<?php

                //start:procedure image
        $img_result = '';
        if(empty($arrImageFile[$key])){
          $img_result = '&nbsp;';
        }else{

?>

 <div id="banner-slide">
 <ul class="bjqs">
<?php foreach ($arrImageFile[$key] as $i) { ?>
<li><img alt="<?php echo $i; ?>" height="200" width="200" src="<?php echo 'ImageFiles/'.$i; ?>"></li>
<?php } ?>
</ul>
</div>

         <script type="text/javascript">

jQuery(document).ready(function($) {

         $('#banner-slide').bjqs({
            animtype      : 'slide',
            height        : 200,
            width         : 200,
            responsive    : true,
            randomstart   : true
          });  
          });

          </script>

<?php

        }
        //end:procedure image
?>

</div>

<?php

}

?>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:57:15.190

页面上有两个具有相同 ID 的 div。#1 是一个没有和不好的 HTML。您将需要在每个 div 上独立启动滑块。

```
$('#banner-slide1').bjqs({ //ETC

$('#banner-slide2').bjqs({ //ETC 
```

这是否足以了解您出错的地方以及为什么它不起作用。JQuery 不知道要使用哪个横幅幻灯片，或者它实际上只使用第一个，因为它知道每页应该只有一个 ID。

我不知道您的滑块插件是如何工作的，但您可以将 id 更改为 div 中的类，然后使用以下命令启动滑块：

```
$('.banner-slide').bjqs({ //ETC 
```

或者

```
$('.banner-slide').each(function(){
    $(this).bjqs({ //ETC 
```

这取决于插件的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:57:45.783

元素 ID 对于单个元素应该是唯一的。不允许为两个元素提供相同的 ID。尝试将 ID 更改为`banner-slide1`和`banner-slide2`。

# python - 仅将日志文件汇总为唯一条目

> ID：14793433
> 
> 赞同：2
> 
> 时间：2013-02-10T00:53:38.283
> 
> 标签：python, perl

多年来，我一直在使用这个脚本来总结日志文件。

```
 #!/usr/bin/perl

 $logf = '/var/log/messages.log';

 @logf=( `cat $logf` );
 foreach $line ( @logf ) {
      $line=~s/\d+/#/g;
      $count{$line}++;
 }

 @alpha=sort @logf;
 $prev = 'null';
 @uniq = grep($_ ne $prev && ($prev = $_), @alpha);
 foreach $line (@uniq) {
      print "$count{$line}: ";
      print "$line";
 } 
```

我想用 Python 重写它，但我不完全理解它的某些部分，例如：

```
 @alpha=sort @logf;
 $prev = 'null';
 @uniq = grep($_ ne $prev && ($prev = $_), @alpha); 
```

有谁知道一个 Python 模块可以否定重写它的需要？我没有运气找到类似的东西。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T01:13:46.207

正如 var 的名称所暗示的那样，

```
@alpha=sort @logf;
$prev = 'null';
@uniq = grep($_ ne $prev && ($prev = $_), @alpha); 
```

正在寻找独特的元素（即删除重复的行），忽略行中的数字，因为它们以前被替换为`#`. 这三行可以写成

```
@uniq = sort keys(%count); 
```

甚至可能

```
@uniq = keys(%count); 
```

用 Perl 编写程序的另一种方法：

```
my $log_qfn = '/var/log/messages.log';
open(my $fh, '<', $log_qfn)
   or die("Can't open $log_qfn: $!\n");

my %counts;
while (<$fh>) {
   s/\d+/#/g;
   ++$counts{$_};
}

#for (sort keys(%counts)) {
for (keys(%counts)) {
   print "$counts{$_}: $_";
} 
```

这应该更容易翻译成 Python。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T01:07:49.627

```
 @alpha=sort @logf;
 $prev = 'null';
 @uniq = grep($_ ne $prev && ($prev = $_), @alpha); 
```

相当于

```
uniq = sorted(set(logf)) 
```

如果`logf`是行列表。

但是，由于您正在计算行的频率，因此您可以使用[collections.Counter](http://docs.python.org/2/library/collections.html#collections.Counter)来计算行数并收集唯一行（作为键）（从而完全无需计算`uniq`）：

```
count = collections.Counter()
for line in f:
    count[line] += 1 
```

* * *

```
import sys
import re
import collections

logf = '/var/log/messages.log'
count = collections.Counter()
write = sys.stdout.write

with open(logf, 'r') as f:
    for line in f:
        line = re.sub(r'\d+','#',line)
        count[line] += 1

for line in sorted(count):
     write("{c}: {l}".format(c = count[line], l = line)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T00:57:37.620

我不得不说我经常遇到有人试图在 python perl 中做一些事情，可以在 shell 或 bash 上一行完成：

我不在乎投反对票，因为人们应该知道如果可以在 shell 上完成，就没有理由在 20 行 python 中做事

```
< my_file.txt | sort | uniq > uniq_my_file.txt 
```

# node.js - 从 StackOverflow API 请求 JSON 的编码问题

> ID：14793434
> 
> 赞同：6
> 
> 时间：2013-02-10T00:53:58.713
> 
> 标签：node.js, compression, gzip, stackexchange-api

我这辈子都想不通。下面是[请求](https://github.com/mikeal/request)模块的实现，但我也尝试使用[node-XMLHttpRequest](https://github.com/driverdan/node-XMLHttpRequest)模块无济于事。

```
var request = require('request');

var url = 'http://api.stackexchange.com/2.1/questions?pagesize=100&fromdate=1356998400&todate=1359676800&order=desc&min=0&sort=votes&tagged=javascript&site=stackoverflow';

request.get({ url: url }, function(error, response, body) {
    if (error || response.statusCode !== 200) {
        console.log('There was a problem with the request');
        return;
    }

    console.log(body); // outputs gibberish characters like �
    console.log(body.toString()); // also outputs gibberish
}); 
```

似乎是一个编码问题，但我在浏览器中使用了完全相同的代码（带有本机 XHR 对象）并且它可以正常工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-10T01:20:55.757

内容已[压缩](http://api.stackexchange.com/docs/compression)。您可以使用`request`和解[`zlib`](http://nodejs.org/api/zlib.html)压缩来自 API 的流式响应：

```
var request = require('request')
   ,zlib = require('zlib');

var url = 'http://api.stackexchange.com/2.1/questions?pagesize=100&fromdate=1356998400&todate=1359676800&order=desc&min=0&sort=votes&tagged=javascript&site=stackoverflow';

request({ url: url, headers: {'accept-encoding': 'gzip'}})
  .pipe(zlib.createGunzip())
  .pipe(process.stdout);  // not gibberish 
```

**进一步阅读**：[使用 gzip/deflate 压缩的简单 HTTP 请求](https://stackoverflow.com/a/14739453/112196)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-06T07:17:37.180

虽然 pero 的答案是正确的，但有一种更简单的方法可以做到这一点。

由于您使用的是请求，因此您也可以添加`gzip: true`标志：

```
var request = require('request');

var url = 'http://api.stackexchange.com/2.1/questions?pagesize=100&fromdate=1356998400&todate=1359676800&order=desc&min=0&sort=votes&tagged=javascript&site=stackoverflow';

request.get({ url: url, headers: {'accept-encoding': 'gzip'}, gzip: true }, function(error, response, body) {
    console.log(body); // not gibberish
}); 
```

# javascript - 修改 jParallax 滚动

> ID：14793437
> 
> 赞同：0
> 
> 时间：2013-02-10T00:54:09.603
> 
> 标签：javascript, jquery, html, css, parallax

我正在一个[可以在这里看到的网站上工作，并且在遵循](http://homegrowndevelopment.com)[本教程](http://www.jquery4u.com/animation/jquery-parallax-tutorial/)之后我刚刚合并了 jParallax 。我能够让一切正常工作，但不是让云跟随我的光标，而是希望它们朝相反的方向移动。我还想把速度放慢到更微妙的程度。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:20:41.577

你需要自己表现出一些努力。转到插件页面并阅读文档：[http](http://stephband.info/jparallax/) ://stephband.info/jparallax/ 。您正在寻找的是选项 xparallax 和 yparallax

```
$('#parallax .parallax-layer').parallax({
    mouseport: $('#parallax'),
    xparallax: -1,
    yparallax: -1
}); 
```

至于速度改变图像的尺寸

# delphi - 何时使用 TPanel FullRepaint？

> ID：14793438
> 
> 赞同：6
> 
> 时间：2013-02-10T00:54:16.173
> 
> 标签：delphi, resize, tpanel

我注意到`resize flicker`当我设置`TPanel.FullRepaint`为`False`. 由于该属性存在并且`True`默认情况下存在，因此必须有一些原因。

如何决定是否设置？

帮助只是指出：

> FullRepaint 控制面板在调整大小时如何响应。当 FullRepaint 为 true 时，整个面板，包括斜角边框，在大小发生变化时会重新绘制。当 FullRepaint 为 false 时，仅重绘斜角边框内的区域。

[http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ExtCtrls.TPanel.FullRepaint](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ExtCtrls.TPanel.FullRepaint)

该文本说明了它的作用，但没有说明原因...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T07:21:47.400

可以显示缺少的 Fullrepaint 的效果，您必须决定是否需要它。

1.  在表单上放置一个面板，将锚点设置为所有方向
2.  将 PaintCaption 设置为 false 或使用空标题
3.  在表单上放置另一个面板，以便在调整表单大小时，第一个面板的部分将被第二个面板覆盖。

运行程序并调整窗体大小，有时第一个面板的边框不会刷新。
发生这种情况是因为在 WMWindowPosChanged 的​​情况下 (FullRepaint or (ShowCaption and (Caption <> ''))) 将调用无效，否则仅包含右侧和/或底部的矩形的 InvalidateRect(Handle, Rect, True)边界无效。（感谢 Sertac Akyuz 的更正）

正如您所提到的，避免无效可以减少闪烁，并且在许多情况下，不需要完全无效，因此用户可以自行决定如何继续。

很少使用面板，上部没有Fullrepaint
![](../Images/c6b0a869c4a3dae5ab018fd84ffda296.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:59:27.720

在以前的 Windows 版本中（不确定具体是哪个版本），`FullRepaint`当调整窗体大小时，需要防止面板边框上的图形伪影。据我所知，至少从 Windows XP 开始，这一直不是问题。

# javascript - Sencha Touch：视图创建时的函数调用

> ID：14793439
> 
> 赞同：0
> 
> 时间：2013-02-10T00:54:17.747
> 
> 标签：javascript, extjs, sencha-touch-2

将视图添加到视口时，是否可以在控制器中设置方法以使该视图自动调用函数？我正在寻找类似于在开始时调用的 init 函数的东西。如果它在文档中的某个地方，我深表歉意，但我似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:46:05.663

所有容器都有初始化事件，这似乎是你想要的......

```
{
xtype: 'container',
...
listeners:{
initialize: function(){

}
} 
```

希望它可以帮助您也可以在每次显示视图时使用绘制的事件来调用一个函数

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-10T04:30:55.223

“向视口添加视图”是一种模糊的情况。显然，如果您手动添加视图（通过`Ext.Viewport.add({ ... });`），那么您可以直接在之后调用一个方法。但是，如果视图是在其他地方创建并在将来某个时间点添加到视口中，那么您可能需要该[`painted`事件](http://docs.sencha.com/touch/2-1/#!/api/Ext.Viewport-event-painted)（或[`activate`](http://docs.sencha.com/touch/2-1/#!/api/Ext.Panel-event-activate)） - 但要小心，这将在视图被渲染的*任何时候*触发，而不仅仅是第一次。您也可以直接在事件上放置一个侦听`Ext.Viewport`器并侦听该[`add`事件](http://docs.sencha.com/touch/2-1/#!/api/Ext.Viewport-event-add)，然后您需要调查究竟添加了什么视图。无论如何，这是一个示例监听器：

```
config: {
  ...
  listeners: {
    painted: function(){
      // handle the event
    }
  },
  ...
} 
```

# css - 带有左侧图像的垂直菜单

> ID：14793441
> 
> 赞同：0
> 
> 时间：2013-02-10T00:54:47.870
> 
> 标签：css, navigation

[我的网站](http://ranchocordovaeventscenter.com/?page_id=23)上有两个部分的问题

我希望导航菜单看起来像所附图像：

![侧面导航菜单示例](../Images/bf3c4e4839b60e1f1723e65350e20591.png)

我遇到的第一个问题是让导航菜单显示在页面右侧。我想我的边距设置正确，但菜单在到达黄色边框的右侧后没有出现。

其次是左侧网站主体后面的小横幅。我为此创建了一个图像，但是当我尝试放置它时，它不会出现在正确的位置。现在我把它设置为重复，这样你就可以看到它在哪里（以及一些时髦的定位）。有没有办法让显示在实际菜单链接下方的部分显示出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:20:35.673

您可以使用纯 css 来实现这种效果。

**HTML**

```
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-58" id="menu-item-58">
    <a href="http://ranchocordovaeventscenter.com/?page_id=57">Building Facts</a>
    <div>
       <div class="wrap-behind"></div>
    </div>
</li> 
```

**CSS**

```
#extra-navbar .menu-item {
    margin-bottom: 0.9rem;
    margin-left: 20px;
}

.wrap-behind {
    background: none repeat scroll 0 0 #F9B233;
    border-left: 13px solid transparent;
    border-right: 1px solid #053053;
    border-top: 10px solid #053053;
    float: left;
    height: 0;
    width: 0;
}

#extra-navbar ul li {
    background-attachment: scroll;
    background-color: #104571;
    background-position: left bottom;
    background-repeat: no-repeat;
    color: #FFFFFF;
    overflow: visible;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:08:53.797

div #page 有类 .site 与规则`overflow: hidden;`它导致第一个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T01:08:54.983

在第 1431 行的 style.css 中，您拥有属性`overflow: hidden`。删除它，您将看到菜单左侧的内容。这应该对你的两个问题都有帮助。

# javascript - JavaScript：定义函数和实例化对象的顺序

> ID：14793443
> 
> 赞同：3
> 
> 时间：2013-02-10T00:55:05.423
> 
> 标签：javascript

我对定义函数和实例化对象的顺序有疑问，请参阅：[JSFiddle](http://jsfiddle.net/Yqdj5/)

我现在只是在玩一个想法，但我碰到了这堵墙，我不知道是否有任何简单的解决方案。基本上我有一个在另一个对象上有一些方法的对象，但是这个另一个对象包含对第一个对象的引用，所以无论我实例化/定义什么顺序，我都会得到一个错误，因为一个或另一个尚未加载：

```
 var router = {
    update: function(event, from, to) {
      window.location.hash = "#/" + to;
      $("back-btn").disabled = fsm.can("back");  // *** And here I am referencing fsm
      $("next-btn").disabled = fsm.can("next");
    },
    location: window.location.hash.substring(2),
  }

  var fsm = StateMachine.create({
    initial: "intro",
    events: [

      // Next events and where to route based on our page
      { name: "next", from: "intro", to: "getname" },
      { name: "next", from: "getname", to: "welcome" },
      { name: "next", from: "welcome", to: "why" },

      // We can't go "back" from the initial route
      { name: "back", from: "getname", to: "intro" },
      { name: "back", from: "welcome", to: "getname" },
      { name: "back", from: "why", to: "welcome" } ],

    callbacks: {
      onintro  : router.update, //*** Here I am referencing the router object
      ongetname: router.update,
      onwelcome: router.update,
      onwhy    : router.update 
    }
  }); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:06:40.063

看起来出现时间问题是因为您指定的回调之一是`onintro`，它可能会立即运行。`onintro`重构回调的实现是否可行？你也许可以摆脱这样的事情：

```
var router = {
    update: function(event, from, to) {
        window.location.hash = "#/" + to;
        $("back-btn").disabled = fsm.can("back");
        $("next-btn").disabled = fsm.can("next");
    },
    location: window.location.hash.substring(2),
}

var fsm = StateMachine.create({
    //...

    callbacks: {
        //onintro  : router.update, // Don't call this in the constructor...
        ongetname: router.update,
        onwelcome: router.update,
        onwhy    : router.update 
    }
});

router.update(); // Call it just after construct. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T01:26:55.703

您可以使用 a`try/catch`来避免第一个未定义：

```
try {
    $("back-btn").disabled = fsm.can("back");
    $("next-btn").disabled = fsm.can("next");
} catch(e){} 
```

此外，如果您在 JSFiddle 中测试所有内容，它会将您的 JS 包装到一个`window.onload`函数中。因此，当您单击按钮时，它们将尝试调用`fsm.back()`or `fsm.next()`，其中`fsm`在该函数的范围内定义`window.onload`。不在这些按钮可以访问的范围内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T05:19:29.753

事后我必须将回调分配给状态机对象，然后将初始化推迟到定义我的路由器对象之后：

```
var fsm = StateMachine.create({

  //*** Here we set defer to true
  initial: { state: "intro", event: "init", defer: true },
  events: [

    // Next events and where to route based on our page
    { name: "next", from: "intro",   to: "getname" },
    { name: "next", from: "getname", to: "welcome" },
    { name: "next", from: "welcome", to: "why" },

    // We can't go "back" from the initial route
    { name: "back", from: "getname", to: "intro" },
    { name: "back", from: "welcome", to: "getname" },
    { name: "back", from: "why",     to: "welcome" } ],
});

window.onload = function() {
  var router = {
    update: function(event, from, to) {
      window.location.hash = "#/" + to;
      $("back-btn").disabled = fsm.cannot("back");
      $("next-btn").disabled = fsm.cannot("next");
    },
    location: window.location.hash.substring(2),
  }

  //*** And now we attach the callbacks since we have created the router object
  fsm.onintro = router.update, fsm.ongetname = router.update,
  fsm.ongetname = router.update, fsm.onwelcome = router.update,
  fsm.onwhy = router.update;

  //*** And call the init event!
  fsm.init();
} 
```

和[小提琴](http://jsfiddle.net/Yqdj5/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T06:10:32.080

依赖项修复可能很简单：

```
var router = {
    update: function(event, from, to) {
        window.location.hash = "#/" + to;
        if(window.fsm) {
            $("back-btn").disabled = fsm.can("back");
            $("next-btn").disabled = fsm.can("next");
        }
    },
    location: window.location.hash.substring(2),
} 
```

# python - 通过会话将两个模块路由到 Flask 中的相同 URL

> ID：14793452
> 
> 赞同：1
> 
> 时间：2013-02-10T00:56:25.783
> 
> 标签：python, routing, flask, werkzeug

我有一个未登录的模块/蓝图，`welcome`和一个登录的蓝图，`home`。我想要一个具有有效会话的用户去`home.index`，以及一个作为来宾的用户去`welcome.index`。但是，我遇到了问题，因为这两个函数都路由到同一个 URL `/`，.

我怎样才能使这个功能成为可能？我试过添加：

```
if(logged_in():
    redirect(url_for('home.index')) 
```

to`index()`在欢迎蓝图中，但这当然只会导致循环重定向，因为 URL`home.index`与`welcome.index`.

我也试图只定义`welcome.index`是否`logged_in()`为真。但是，这会导致问题，因为站点上还有其他链接指向`welcome.index`，如果用户登录，这些会导致错误，因为`welcome.index`技术上不再存在。

## 编辑

我`AttributeError: 'Blueprint' object has no attribute 'index'`从这段代码中看到了这个错误：

```
from flask import Flask, session, g

from modules.welcome import welcome
from modules.home import home as home

from modules.home import index
from modules.welcome import index

 app = Flask(__name__)
 app.config.from_pyfile('config.cfg')

 app.register_blueprint(welcome)
 app.register_blueprint(home)

 @app.route('/', methods=['GET', 'POST'])
 def index():
    if 'user_id' in session:
        return home.index()
    else:
        return welcome.index() 
```

## 编辑#2：蓝图代码

modules/home.py 中的代码：

```
from flask import Blueprint, render_template, redirect, url_for, request, session, g

from models.User import User
from helpers.login import *

home = Blueprint('home', __name__)

def index():
    return render_template('home/index.html') 
```

模块/welcome.py 中的代码：

```
from flask import Blueprint, render_template, redirect, url_for, request, session, g
import md5

from models.User import User
from helpers.login import *

welcome = Blueprint('welcome', __name__)

def index():
    alert, email = None, None
    if request.method == 'POST' and not logged_in():
        email = request.form['email'] 
        password_salt = md5.new(request.form['password']).hexdigest()
        user = User.query.filter_by(email=email , password_salt=password_salt).first()
        if user is None:
            alert = "Wrong username or password!"
        else:
            session['user_id'] = user.id
            return redirect(url_for('home.index'))
    return render_template('welcome/index.html', alert=alert, email=email)

@welcome.route('/about')
def about():
    return render_template('welcome/about.html')

@welcome.route('/tandp')
def tandp():
    return render_template('welcome/tandp.html')

@welcome.route('/logout')
def logout():
    session.pop('user_id', None)
    return redirect(url_for('welcome.index'))

@welcome.route('/register')
def register():
    error = None
    return "HI" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:38:26.303

拆分您的方法，测试记录状态，然后调用正确的函数（在每个函数上添加您需要的参数）：

```
from ????? import app
from ????? import logged_in
import home.index
import welcome.index

@app.route('/')
def your_basic_index_view():
   if logged_in():
       return home.index()
   else:
       return welcome.index() 
```

或者对装饰者做同样的事情。您将无法使用有条件地指向两个不同视图的单个路线。

**编辑：**

尝试以下操作：

```
from flask import Flask, session, g

from modules.welcome import welcome
from modules.home import home as home

from modules.home import index as h_index
from modules.welcome import index as w_index

app = Flask(__name__)
app.config.from_pyfile('config.cfg')

app.register_blueprint(welcome)
app.register_blueprint(home)

@app.route('/', methods=['GET', 'POST'])
def index():
    if 'user_id' in session:
        return h_index()
    else:
        return w_index() 
```

# matlab - Matlab：链接到变量，而不是变量值

> ID：14793453
> 
> 赞同：13
> 
> 时间：2013-02-10T00:56:30.287
> 
> 标签：matlab, variables

google、matlab文档用起来一直很困难，花了几个小时，还是学不会

```
x = 1
y = x
x = 10
y

ans = 10 
```

相反，发生的是：

```
x = 1
y = x
x = 10
y

ans = 1 
```

x 的值存储到 y 中。但我想动态更新 y 的值等于 x。

我用什么操作来做到这一点？

谢谢。M

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-10T01:35:40.180

Matlab 是 99% 的按值传递环境，这就是您刚才演示的。通过引用传递的 1% 是句柄，可以是句柄图形（此处不相关）或句柄类，它们与您想要的非常接近。

要使用句柄类来执行您描述的操作，请将以下内容放入文件 call`RefValue`中。

```
classdef RefValue < handle
    properties
        data = [];
    end
end 
```

这将创建一个“句柄”类，具有一个名为“数据”的属性。

现在您可以尝试：

```
x = RefValue;
x.data = 1;
y = x;
x.data = 10;
disp(y.data)   %Displays 10. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-10T01:26:07.153

您可以尝试以下方法；

```
x=10;
y='x'
y

y = 
    x

eval(y)
x =
    10 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-10T21:34:20.673

您还可以`x`通过定义函数`y`并引用它来定义隐式句柄：

```
x = 1;
y = @(x) x;
y(x) % displays 1
x = 10;
y(x) % displays 10 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T01:28:28.593

在 MATLAB 中，这是不可能的。但是，有很多方法可以获得类似的行为。例如，您可以有一个数组`a = [1, 5, 3, 1]`，然后使用 and 对其进行`x`索引`y`。对于`x = 2`, 您可以分配`a(x) = 7`, `y = x`, 并且一旦更改`a(x) = 4`, `a(y) == 4`。

所以索引可能是模拟引用的最快方法，但如果你想要一些优雅的解决方案，你可以通过@natan 指出的符号变量。重要的是，MATLAB 中*没有指针*。

# c++ - C++ OpenGL：调用 gluPerspective 会引发未定义的引用错误？

> ID：14793454
> 
> 赞同：2
> 
> 时间：2013-02-10T00:56:31.313
> 
> 标签：c++, opengl, perspective, freeglut, glu

我正在使用 FreeGLUT 尝试使用 OpenGL 在 C++ 中创建我的第一个立方体。我有一个问题，每当我调用“gluPerspective”时，编译器都会抛出这个错误：

```
build/Debug/MinGW-Windows/main.o: In function `main':
C:\Users\User\Dropbox\NetBeans Workspace\Testing/main.cpp:47: undefined reference to `gluPerspective@32' 
```

我环顾四周，看看是否有人遇到过这个问题，但一无所获。所以，我想我又一次忘记了一些事情。这里是我调用函数的地方：

```
......
glMatrixMode(GL_PROJECTION);
glLoadIdentity();

gluPerspective(45, 1.333, 1, 1000);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
...... 
```

我包括了 freeGLUT，除了那条线之外，其他一切都有效。我检查了文档，似乎我正确使用了它。我很茫然。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T01:02:22.760

`gluPerspective`在 3.1 版从 GLU（OpenGL 帮助程序库）中删除。您是否正在针对仍然定义了它的正确库进行编译？如果没有，那么您将需要编写自己的版本并将矩阵直接传递给 OpenGL。

OpenGL.org 在其网站上有[gluPerspective 代码](http://www.opengl.org/wiki/GluPerspective_code)（为了完整起见，在此展示）：

```
//matrix will receive the calculated perspective matrix.
//You would have to upload to your shader
// or use glLoadMatrixf if you aren't using shaders.
void glhPerspectivef2(float *matrix, float fovyInDegrees, float aspectRatio,
                      float znear, float zfar)
{
    float ymax, xmax;
    float temp, temp2, temp3, temp4;
    ymax = znear * tanf(fovyInDegrees * M_PI / 360.0);
    //ymin = -ymax;
    //xmin = -ymax * aspectRatio;
    xmax = ymax * aspectRatio;
    glhFrustumf2(matrix, -xmax, xmax, -ymax, ymax, znear, zfar);
}
void glhFrustumf2(float *matrix, float left, float right, float bottom, float top,
                  float znear, float zfar)
{
    float temp, temp2, temp3, temp4;
    temp = 2.0 * znear;
    temp2 = right - left;
    temp3 = top - bottom;
    temp4 = zfar - znear;
    matrix[0] = temp / temp2;
    matrix[1] = 0.0;
    matrix[2] = 0.0;
    matrix[3] = 0.0;
    matrix[4] = 0.0;
    matrix[5] = temp / temp3;
    matrix[6] = 0.0;
    matrix[7] = 0.0;
    matrix[8] = (right + left) / temp2;
    matrix[9] = (top + bottom) / temp3;
    matrix[10] = (-zfar - znear) / temp4;
    matrix[11] = -1.0;
    matrix[12] = 0.0;
    matrix[13] = 0.0;
    matrix[14] = (-temp * zfar) / temp4;
    matrix[15] = 0.0;
} 
```

# html - 链接颜色不对

> ID：14793459
> 
> 赞同：0
> 
> 时间：2013-02-10T00:57:17.623
> 
> 标签：html, css

我正在创建一个网站，但我不确定为什么页面上的链接在悬停时没有显示为正确的颜色。这是其中一个页面：http: [//jsfiddle.net/yentup/CR9TK/](http://jsfiddle.net/yentup/CR9TK/)

我担心的链接是页面内容中的链接。当悬停在上面时，它们应该是红色的。但是，它们保持相同的颜色。我可以强制使用正确的颜色`!important`，但我宁愿避免这种情况，因为我还必须使用所有其他链接`!important`来获得正确的颜色。这是一些有冲突的 css，但您可以在上面提到的链接中找到整个页面的所有 css：

```
a:link {
    text-decoration: none;
    color: #787878;
}

a:hover {
    color: #8B2323;
    text-decoration: underline;
}

#header ul li a {
    text-decoration: none;
    text-transform: uppercase;
    font-family: 'Quintessential', serif;
    font-size: 24px;
    font-weight: bold;
    color: #909090;
    border-left: 1px dotted #d0d0d0;
    padding: 8px 14px;
}

#header ul li a:hover {
    color: #D2691E;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T01:02:24.597

交换`a:hover`和的位置`a:visited`。

```
a:visited {
    color: #787878;
}

a:hover {
    color: #8B2323;
    text-decoration: underline;
} 
```

应该按预期工作。

# cuda - 如何让 CC 2.0 和 3.0 编译器生成 FMA 指令？

> ID：14793462
> 
> 赞同：2
> 
> 时间：2013-02-10T00:57:41.463
> 
> 标签：cuda

我正在尝试通过生成一系列 FMA 指令来运行性能测试。但是，我似乎无法让 CC 2.0 和 CC 3.0 编译器生成 FMA 指令。

如果我编译：

```
for (float x = 0; x < loop; x++) {
  a += x * loop;
  a += x * loop;
  ... (6 more repetitions)
} 
```

哪里`loop`也是一个浮点数，我得到以下每一行`a += x * loop;`：

**计算_10，sm_10**：

```
 a += x * loop;
0x0001ffa0  [0103] mov.f32 %f11, %f2;  
0x0001ffa0                  MOV R3, R2;  
0x0001ffa8  [0104] ld.param.f32 %f12, [__cudaparm__Z6kernelPfifS__loop];  
0x0001ffa8                  MOV32I R2, 0x28;  
0x0001ffb0                  LDC R2, c[0x0][R2];  
0x0001ffb8  [0105] mov.f32 %f13, %f4;  
0x0001ffb8                  MOV R0, R0;  
0x0001ffc0  [0106] mad.f32 %f14, %f12, %f13, %f11;  
0x0001ffc0                  FFMA.FTZ R2, R2, R0, R3;  
0x0001ffc8  [0107] mov.f32 %f2, %f14;  
0x0001ffc8                  MOV R2, R2; 
```

**计算_30，sm_30**：

```
 a += x * loop;
0x00044688  [0101] mul.f32 %f14, %f30, %f7;  
0x00044688                       FMUL R5, R4, R0;  
0x00044690  [0102] add.f32 %f15, %f13, %f14;  
0x00044690                       FADD R3, R3, R5; 
```

也就是说，在为 CC 3.0 编译时，我得到的是 FMUL/FADD 指令而不是 FFMA。为 CC 1.0 编译时，我得到一条 FFMA 指令。

我也在带有 的 CC 2.0 编译器`compute_20,sm_20`以及发布和调试版本上得到了这个结果。

我试图指定`-use_fast_math`and `--fmad=true`。我使用 CUDA 4.2 和 5.0 向导创建了项目，并且没有更改默认设置。

环境：

*   Windows 7 64 位
*   视觉工作室 2010
*   CUDA 4.2 + CUDA 5.0（5.0 安装在 4.2 之上）
*   GPU：单GTX660
*   Nsight 3.0 RC1

和

*   Windows 7 64 位
*   视觉工作室 2010
*   CUDA 4.2
*   Nsight 2.2
*   GPU：单GTX570

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:32:54.020

将开关传递`-G`给 nvcc 会影响代码生成，还会生成要添加到输出文件的附加调试信息（符号）。根据[nvcc 文档](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#options-for-altering-compiler-linker-behavior)，`-G`开关的描述不是“生成设备调试信息”，而实际上是“生成可调试设备代码”。

在许多情况下，使用 -G 开关会导致设备代码生成大不相同。在这种情况下，它似乎抑制了 FMA 指令的生成，以支持单独的 MUL/ADD 序列。

# ruby-on-rails - 关注后无法重定向到用户个人资料

> ID：14793463
> 
> 赞同：0
> 
> 时间：2013-02-10T00:57:42.807
> 
> 标签：ruby-on-rails, ruby, relationships

我正在使用[acts_as_follower gem](https://github.com/tcocca/acts_as_follower)。我还在为我的用户模型使用设计，而不是像 users/:id 这样的格式，我允许用户拥有用户名 URL。我正在努力允许用户互相关注，但是在关注用户之后，Rails 无法重定向到用户的个人资料。这是我的代码。

用户控制器

```
 def show
       @user = User.find_by_username(params[:id].downcase) 
    end

    def follow
       @user = User.find(params[:id])
       if current_user
         current_user.follow(@user)
         redirect_to @user.username
       else 
          flash[:error] = "You Must be logged in"
       end
    end 
```

这是我在服务器中遇到的错误。

```
 ERROR URI::InvalidURIError: the scheme http does not accept registry part: localhost:3000alaxics (or bad hostname?) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:43:16.410

删除`.username`,`redirect_to @user`应该可以按预期工作。

无论您传递给什么，`redirect_to`都必须是有效路径，并且任何前面至少没有 a`/`的字符串在附加到您的 root_url 时都将无效。这正是你得到的错误。

如果您只是 redirect_to ，那是您需要`@model`的 rails 快捷方式。`redirect_to model_path(@model)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:38:40.440

你可能想要更多类似的东西

```
redirect_to user_path(@user.username) 
```

或者，如果您打算自己编写路径，只需`redirect_to "/users/#{@user.username}"`

# ms-access - Access VBA 中的循环记录

> ID：14793464
> 
> 赞同：1
> 
> 时间：2013-02-10T00:57:44.150
> 
> 标签：ms-access, vba

我正在尝试根据“JOB”列中分配的作业类型将名称循环到“TASK”列。例如，我的表如下所示：

![示例表](../Images/ee97e3654e581b44a287ca569ae7e6c4.png)

我的代码如下：

```
Sub macro2()

Dim Rst As DAO.Recordset
Set Rst = CurrentDb.OpenRecordset("table1")

Dim employee(2) As String

employee(0) = "empname1"
employee(1) = "empname2"

Dim i As Integer
With Rst
    i = 0
    Rst.MoveFirst

    Do While Not .EOF
        If Rst.Fields("JOB") = "LETTER" Then
            Rst.Edit
            Rst.Fields("Task").value = employee(i)
            Rst.Update
        End If
        .MoveNext
        i = i + 1
        If i > 2 Then i = 0
    Loop
End With

DoCmd.Requery
End Sub 
```

问题是，有时它“错过”了一项任务，我不知道为什么。

![表图片没有拉](../Images/29dc41fa35d82380a15161ae03580490.png)

它应该一直将这两个名称循环到列中，但它不会。但是，有时在运行它几次后它会这样做。新鲜打开数据库时，它不会，并且在完成后会如上所示。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:42:45.287

这段代码允许`i`值为 2。

```
i = i + 1
If i > 2 Then i = 0 
```

但是`UBound(employee)`是 1，这意味着当是 2 时`employee(i)`应该抛出一个*“下标超出范围”*错误`i`。但是你没有报告得到那个错误，所以我不明白发生了什么。

*此外，您的第一个屏幕截图在Job*列中显示“Letter”和“Change” ，但第二个屏幕截图显示为“Letter”。那是另一个谜题。

也许您需要使用查询而不是整个表来加载记录集。

```
Set Rst = CurrentDb.OpenRecordset("SELECT Job, Task FROM table1 " & _
    "WHERE Job = 'Letter'") 
```

然后，当您在记录集行中移动时，`i`在 0 和 1 之间切换。

```
i = IIf(i = 1, 0, 1) 
```

在我看来，这些更改可能会让您的代码按您的意愿工作。但是，请考虑一种更灵活且更易于维护的方法。将员工姓名存储在表中并打开第二个记录集*rsEmployees*来保存这些员工姓名。当您移动通过第一个记录集*Rst*时，也推进第二个：`rsEmployees.MoveNext` 如果您到达`rsEmployees.EOF`，那么`rsEmployees.MoveFirst` 应该“循环”分配。

该方法将允许您通过简单地更新员工表来从可用池中添加/删除员工。每次添加/删除员工时，您都不需要修改 VBA 代码。

# java - 对于 java 上的幻想草稿程序，我如何将文本文件中的数据加载到单独的 ArrayLists 列表中？

> ID：14793476
> 
> 赞同：0
> 
> 时间：2013-02-10T01:00:19.823
> 
> 标签：java, list, object, collections, arraylist

我刚刚开始，我很难将此文本文件加载到不同的`ArrayLists`. “-----”显然打破了每个单独的角色。我想创建一个类`Roles`并为每个类创建实例，但我仍然没有弄清楚它是如何正常工作的。另外，创建一个`List <Role>`会比`List <ArrayList<String>>`? 我知道这是一个基本问题，但经过数小时的工作后我无法弄清楚。谢谢！

```
Leader
1   Superman    DC
2   Captain America Marvel
3   Professor X Marvel
4   The Shoveler    Mystery Men

Brawn
1   Hulk    Marvel
2   Wolverine   Marvel
3   The Thing   Marvel
4   Beast   Marvel
5   Thor    Marvel
6   Mr. Furious Mystery Men
7   Mr. Incredible  Pixar

Gadgets
1   Batman  DC
2   Iron Man    Marvel
3   Spiderman   Marvel
4   Green Lantern   DC

Female Influence
1   Wonder Woman    DC
2   Jean Gray   Marvel
3   Emma Frost  Marvel
4   Rogue   Marvel
5   Elastigirl  Pixar

Bad Guy
1   The Joker   DC
2   Magneto Marvel
3   Lex Luthor  DC
4   Dr. Doom    Marvel
5   Riddler DC
6   Syndrome    Pixar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:06:43.190

这是一种方法。

创建一个包含整数、字符串和字符串的类。我们称之为人。

现在，您的数据结构将是`HashMap<string, ArrayList<Person>>`

有一个字符串作为您当前正在填充的列表的名称，ListName。

有一个`ArrayList<Person>`您当前正在填充的列表，ListContents。

遍历文件的行。

1）如果该行为空白，则跳过

2）如果该行不以数字开头，我们将开始一个新列表 - 将 ListContents（如果它不为空）插入到键 ListName 下的 hashmap 中，将 ListName 设置为该行的内容（例如“Brawn”）和使 ListContents 成为一个新的空 ArrayList。

3) 如果它以数字开头，则使用正则表达式、String.Split 或任何您喜欢的方式将其拆分（希望您可以在选项卡上拆分它，否则将需要一个非常聪明的程序来确定空格何时属于该名称当它们开始属于连续性时！！），将第一个值解析为 int，并从这些值中创建一个新的 Person ，将其插入到当前列表中。

现在，每个标题都有一个人员列表，并且每个列表都由其在哈希图中的标题标题进行索引。

# iphone - 使用 KML 文件检测国家 (Xcode)

> ID：14793477
> 
> 赞同：-1
> 
> 时间：2013-02-10T01:00:33.623
> 
> 标签：iphone, xml, xcode, parsing, kml

我有一个包含所有国家和多边形的 KML 文件。我正在尝试创建一个获得经纬度并使用此 KML 检测属于哪个国家/地区的应用程序。我尝试了 SimpleKML 和 KMLViewer，但没有成功。kml 结构为：

```
 <Document>
<Folder>
    <Folder>
        <name>A -</name>
        <Placemark>
            <name>Afghanistan</name>
            <description></description>
            <Style>
                <PolyStyle>
                    <color>aaffffff</color>
                    <colorMode>random</colorMode>
                </PolyStyle>
            </Style>
            <Polygon>
                <outerBoundaryIs>
                    <LinearRing>
                        <coordinates>
65.62729644775391,37.33319854736328,0 65.64692687988283,37.45888137817383,0 
...
...

coordinates>
                    </LinearRing>
                </outerBoundaryIs>
            </Polygon>
        </Placemark>
        <Placemark>
            <name>Albania</name>
 ..
 ..
 .. 
```

1）使用xml解析器并将数据保存在本地数据库中会更好吗？2）是否有任何函数可以确定给定的纬度/经度是哪个多边形？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:46:20.770

使用 NSXMLParser 解析应该很容易，查找名称并将它们与坐标相关联。更有趣的部分是测试多边形是否包含一个点。

[这是一篇备受推崇的 SO 文章](https://stackoverflow.com/questions/217578/point-in-polygon-aka-hit-test)，看起来它在某种程度上借鉴了[这篇 wikipedia 文章](http://en.wikipedia.org/wiki/Point_in_polygon)。您要做的是构建一个多边形集合，并枚举它们以测试每个多边形是否包含一些给定的坐标。

要考虑的另一件事是完全跳过解析和多边形测试并使用谷歌地理编码API。 [本节专门](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)讨论从纬度和经度获取地址信息（包括国家/地区）。

# android-emulator - Android SDK：如何设置旧版本？例如。姜饼

> ID：14793480
> 
> 赞同：0
> 
> 时间：2013-02-10T01:01:06.000
> 
> 标签：android-emulator

我的目标是使用各种旧版本的 Android 运行一个 android 模拟器来测试网络应用程序。我是安卓新手。我有一个带有 Jellybean 的 Nexus 7。旧版本中报告了 Web 应用程序上的错误。

到目前为止，我有；

在 Windows 8 桌面上安装 Android SDK，创建并运行模拟器，但仅限于 Android 4.2 (Jellybean)

我认为下一步是运行 SDK Manager -- Ecplipse > Window > Android SDK Manager

执行此操作会报告 Manager 将很快显示 - 没有任何反应。在控制台中我收到此错误；

`[2013-02-09 16:31:49 - SDK Manager] [SDK Manager] \adt-bundle-windows-x86_64\sdk\tools\lib\\find_java.exe was unexpected at this time.`

从命令行运行 find_java.exe 给出：

`D:\Program Files (x86)\adt-bundle-windows-x86_64>sdk\tools\lib\\find_java.exe C:\Program Files\Java\jre7\bin\java.exe`

`D:\Program Files (x86)\adt-bundle-windows-x86_64>where java C:\Program Files\Java\jre7\bin\java.exe C:\Windows\System32\java.exe`

我已经更新了 PATH 环境变量以包含上面的 jre7 目录，并添加了一个 ANDROID_SDK_HOME 作为 D:\Users\myuser_000\Documents\Workspace——我创建的设备出现在 .android\avd 子目录中。

我在 Windows 8 上运行 SDK，安装在 D:\Program Files (x86)\adt-bundle-windows-x86_64

运行 SDK 管理器是否正确？

有什么想法会导致 SDK 管理器不显示吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:02:05.843

错误出现在 android.bat 文件中。

我编辑了以下内容以注释掉对 find_java.bat 的调用并硬编码到我安装的 Java 版本。

```
rem Check we have a valid Java.exe in the path.
set java_exe="C:\Program Files\Java\jre7\bin\java"
rem call lib\find_java.bat 
```

希望这对将来的某人有所帮助。

可能使问题复杂化的是 Windows 8 将 android.bat 作为不安全程序捕获并自动停止它。我在手动尝试运行批处理文件时看到了这一点。

# python - 如何使用 Python 2.7.3 修复错误 61 (Mac) 和错误 10061(Windows)

> ID：14793482
> 
> 赞同：0
> 
> 时间：2013-02-10T01:01:17.673
> 
> 标签：python, windows, macos, sockets

我目前正在尝试创建一个基本的 LAN 套接字服务器，当我在同一台计算机上同时使用客户端和服务器时，它可以正常工作。当我尝试在两台计算机（mac 和 windows）上使用客户端和服务器时，客户端始终拒绝连接。这是我在 Mac 上遇到的错误：

```
Traceback (most recent call last):
File "/Users/*****/Desktop/Client V2.py", line 31, in <module>
s.connect((host, port))
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py",
line 224, in meth
return getattr(self._sock,name)(*args)
error: [Errno 61] Connection refused 
```

在我的窗户上，我遇到了同样的错误，只是数字不同。我已经为传入和传出连接关闭了 Windows 防火墙，我对实际问题是什么感到困惑。这是我的端口代码：

**客户**

```
#Get host and port info to connect
host = 'localhost'
port = input ("What is the PORT number?") 
```

我不确定这些行是否必要，也许它们是问题的根本原因：

```
try:
    remote_ip = socket.gethostbyname(host)

except socket.gaierror:
    #could not resolve
    print "Hostname could not be resolved. Exiting"
    sys.exit() 
```

最后，连接的实际代码。（我调用了套接字`s`） s.connect((host, port))

**服务器**

```
HOST = 'localhost' #Symbolic name meaning all available interfaces

PORT = input ("Enter the PORT number (1 - 10,000)")
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
print "Socket Created"

try:
    s.bind((HOST, PORT))
except socket.error, msg:
    print "Bind failed. Error Code : " + str(msg[0]) + " Message " + str(msg[1])
    sys.exit()
print "Socket Bind Complete"

s.listen(10)
print "Socket now listening" 
```

我确信我做了一些非常愚蠢的事情，但是有人可以告诉我我的错误是什么（或者这甚至可能是跨操作系统的）。[我已经在这里](https://stackoverflow.com/questions/14784132/general-python-socket-questions-with-several-answers)发帖了，但是没有人回复。我还有其他几个问题，如果有人可以尝试回答这些问题，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:05:13.843

```
HOST = 'localhost' #Symbolic name meaning all available interfaces 
```

并不意味着“所有可用的接口”，而只是通过特殊接口的本地计算机，只有在同一台计算机上运行的程序才能看到。

```
HOST = '0.0.0.0' #Symbolic name meaning all available interfaces 
```

确实意味着所有可用的网络接口。当然，您也可以绑定到特定的网络接口，在这种情况下，您只需在字段中输入其 IP 地址。

# php - Wordpress - 将 php 对象传递到新页面

> ID：14793485
> 
> 赞同：-1
> 
> 时间：2013-02-10T01:01:35.840
> 
> 标签：php, wordpress, plugins

我正在创建一个使用 Wordpress 构建的自定义订购网站。我创建了一个面向对象的插件来存储所有订单详细信息。（产品规格、联系信息、各种选项等）订购过程跨越三页。对我来说，将对象从一个页面传递到对浏览器最友好的下一个页面的最佳方式是什么？JSON编码？序列化？$_SESSION 变量？Wordpress 本机不允许这样做，但我找到了有关如何覆盖它的说明。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:07:30.137

我建议将数据存储在 的不同索引中`$_SESSION`，这样信息将在页面之间保持持久性。

因为您没有实现像搜索这样的功能，`$_SESSION`所以这是一个不错的选择，因为用户可能会在订购产品和访问您网站上的其他页面之间切换。此外，此方法不依赖于浏览器功能。

# c++ - const T& 与 T&&

> ID：14793486
> 
> 赞同：5
> 
> 时间：2013-02-10T01:01:44.950
> 
> 标签：c++, c++11, rvalue-reference

我有以下功能：

```
T foo(); 
```

而且，在另一个函数中，我正在使用返回`T`值，例如：

```
const T& t = foo(); 
```

或者

```
T&& t = foo(); 
```

我想问一下：

1.  两者是等价的吗？

2.  在内存方面，这两种方法有什么区别？

3.  我知道在第一种方法中，临时值生命周期与参考生命周期相匹配。使用右值引用时也会发生同样的情况吗？

4.  我是否应该考虑使用 const 右值引用 ( `const T&&`)？

我正在使用第一种方法，这就是我习惯并且很好地照顾我的方法。我仍然围绕右值引用和 C++11 商品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T01:14:24.777

1.  不，它们有不同的类型。

2.  实现定义，但不太可能有任何区别。

3.  右值和左值引用的生命周期扩展工作相同。但是这个规则比“临时值生命周期匹配引用生命周期”更复杂。

4.  可能不是。我当然不会去寻找使用它的地方。如果你有它的用处，最好是这样一个显着的改进，以证明使用这种不寻常的组合以及人们将来阅读它时会产生的混乱是合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T01:14:28.277

1.  它们基本相同（适用于临时工的终身延长），但一个是`const`，一个不是。
2.  “内存方面”可能没有任何区别，但这取决于实现。
3.  是的。
4.  我无法想象你想要的情况。

但是，移动语义确实使您使用的技术过时了。它最初的目的是让人们避免制作不必要的副本，但现在有了移动语义，以前昂贵的东西现在实际上是免费的，并且更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T09:43:57.500

如果您想知道何时以及是否使用 &&，我强烈建议您观看

[http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11)

恕我直言，绝对值得投入时间。

据我了解：

1+2) 取决于 T 的类型

3) 参考值对寿命没有影响。旁注：无论**T&&**最终成为明智的类型，它现在都有一个名称：**t**，因此是一个 l 值。

4) 有点针对我自己：你是如何摆脱 const 的？

最好的约臣

编辑：添加空行。

# ruby-on-rails - ruby on rails 中的 link_to 和额外的 html

> ID：14793490
> 
> 赞同：0
> 
> 时间：2013-02-10T01:02:08.700
> 
> 标签：ruby-on-rails

我知道还有更多这些，但我找不到我的答案，因为我对 RoR 还是很陌生。

我需要接受这个：

```
<% if params[:forum_id] %>
    <%= link_to "#{category.name}", category_path(category.id,:forum_id => params[:forum_id]) %>
<% else %>
    <%= link_to "#{category.name}", category_path(category.id) %>
<% end %> 
```

打印出来：

```
<a href="mylink....">name</a> 
```

我需要：

```
<a href="mylink....">
    <figure></figure>
    <span>name</span>
</a> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:06:25.063

您可以`link_to`用作块：

```
<%= link_to category_path(category_id) do %>
  <figure></figure>
  <span><%= category.name %></span>
<% end %> 
```

编辑

完整的解决方案：

```
<% if params[:forum_id] %>
  <%= link_to category_path(category.id,:forum_id => params[:forum_id]) do %>
    <figure></figure>
    <span><%= category.name %></span>
  <% end %>
<% else %>
  <%= link_to category_path(category.id) do %>
    <figure></figure>
    <span><%= category.name %></span>
  <% end %>
<% end %> 
```

# forms - Symfony2 表单验证 - 如何仅显示每个字段的第一条错误消息

> ID：14793493
> 
> 赞同：1
> 
> 时间：2013-02-10T01:02:25.120
> 
> 标签：forms, validation, symfony

我有一个包含验证规则集的字段：

```
/**
 * @var integer
 *
 * @ORM\Column(name="options", type="integer")
 * @Assert\NotBlank()
 * @Assert\Min(limit = "1381", message = "Please provide number higher than 1381")
 * @Assert\Regex(pattern = "/^\d{4}$/" , message = "Four digits are expected")
 */
private $options; 
```

有时 Symfony 似乎会检查每个断言（什么是好的）并呈现每个错误（不期望什么）。提交带有 option=5 的表单后，我看到了以下错误消息。

```
Options
- Please provide number higher than 1381
- Four digits are expected 
```

但是当我发送 option = null 时，只显示一条错误消息。

```
Options
- This value should not be blank. 
```

是否有一个“开关”导致模板中只呈现一条错误消息？我希望表单中的每个字段只有一条错误消息。

====== 编辑 ======
[我喜欢](https://stackoverflow.com/questions/11627337/symfony-2-gives-more-than-one-validation-error-message)Bernhard Schussek
Patt 的解决方案 感谢您向我指出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:15:14.297

一种选择是为表单错误块[应用程序范围](http://symfony.com/doc/current/cookbook/form/form_customization.html#twig)修改模板/块（以便模板中的每个表单都将获得所需的行为）。[或者基于每个模板](http://symfony.com/doc/current/cookbook/form/form_customization.html#method-1-inside-the-same-template-as-the-form)覆盖表单布局。

如果您查看Symfony 标准版附带的[默认表单布局，您可以在](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig)[第 273 行](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig#L273)看到定义了`form_errors`树枝。`block`

您可以在给定模板中覆盖此块（根据文档），仅回显`errors`数组中的一个元素：

```
{# SomeTemplate:Default:index.html.twig #}
{% extends '::base.html.twig' %}

{% form_theme form _self %}

{% block form_errors %}
{% spaceless %}
    {% if errors|length > 0 %}
    {{ errors[0].message }}
    {% endif %}
{% endspaceless %}
{% endblock form_errors %}

{% block content %}
    {# ... render the form #}

    {{ form_rest(form) }}
{% endblock %} 
```

# jquery - 使用 jQuery 平滑页面滚动的美中不足

> ID：14793497
> 
> 赞同：0
> 
> 时间：2013-02-10T01:03:08.973
> 
> 标签：jquery, scrolltop, fieldset

这是我的工作代码，用于折叠字段集并平滑滚动到它们的锚点，但有时在滚动之前会有一个跳转，这并不是很平滑。

```
function smoothScrollTo(element) {
    var thisTop = $($(element).parent()).offset().top;
    $("html, body").animate({
        scrollTop: thisTop + "px"
    }, {
        duration: 600
    });
    return false;
};

$(document).ready(function () {
    $(".collapsible .collapsed").hide();
    $(".collapsible legend").html(function () {
        var scroll = $(this).parent().hasClass('scroll');
        if (scroll == true) {
            href = "#" + $(this).parent().attr('id');
        } else {
            href = "javascript:void(0)";
        };
        return '<a href="' + href + '">' + $(this).html() + '</a>';
    }).click(function () {
        $(this).parent().children('.content').slideToggle();
    });
    $(".collapsible.scroll legend").click(function () {
        smoothScrollTo(this);
    });

}); 
```

* * *

我找到了解决方案：`e.preventDefault();`需要完美滚动

最终代码：http: [//jsfiddle.net/eapo/v6URL/2/](http://jsfiddle.net/eapo/v6URL/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:05:15.237

[http://jsfiddle.net/v6URL/1/](http://jsfiddle.net/v6URL/1/)

```
$(".collapsible.scroll legend").click(function (e) {
    e.preventDefault();
    smoothScrollTo(this);
}); 
```

# php - 如何在mysql中隐藏信息模式

> ID：14793498
> 
> 赞同：0
> 
> 时间：2013-02-10T01:03:13.960
> 
> 标签：php, mysql, database

我想隐藏所有细节（表结构、数据库设计等）。我该怎么做，我在谷歌搜索并获得了一些信息。

从此，我更改了 config.inc.php 的内容：

```
<?php

 /* Servers configuration */
 $i = 0;

 /* Server: localhost [1] */
 $i++;
 $cfg['Servers'][$i]['verbose'] = 'localhost';
 $cfg['Servers'][$i]['host'] = 'localhost';
 $cfg['Servers'][$i]['port'] = '';
 $cfg['Servers'][$i]['socket'] = '';
 $cfg['Servers'][$i]['connect_type'] = 'tcp';
 $cfg['Servers'][$i]['extension'] = 'mysqli';
 $cfg['Servers'][$i]['auth_type'] = 'config';
 $cfg['Servers'][$i]['user'] = 'root';
 $cfg['Servers'][$i]['password'] = '';
 $cfg['Servers'][$i]['AllowNoPassword'] = true;
 $cfg['Servers'][$i]['hide_db'] = 'information_schema';

 /* End of servers configuration */

 $cfg['DefaultLang'] = 'en-utf-8';
 $cfg['ServerDefault'] = 1;
 $cfg['UploadDir'] = '';
 $cfg['SaveDir'] = '';

/* rajk - for blobstreaming */
$cfg['Servers'][$i]['bs_garbage_threshold'] = 50;
$cfg['Servers'][$i]['bs_repository_threshold'] = '32M';   
$cfg['Servers'][$i]['bs_temp_blob_timeout'] = 600;
$cfg['Servers'][$i]['bs_temp_log_threshold'] = '32M';

?> 
```

但是，当我去

```
http://localhost/phpmyadmin/index.php?db=mysql&token=df40bf81f38ce55621e179517c212d62 
```

我可以看到所有的信息。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:07:16.727

它*已经*隐藏了。它可用的原因是：

*   您*没有* **根**密码。
*   您尚未退出会话，因此包含您的会话信息的 cookie 已验证，您将自动重定向到信息（数据库、表）。这是为了避免每次刷新时都登录。

另外，检查“allownopassword”条目，如果它设置为 true，它允许没有密码的人登录。尝试将其设置为 false。

在 MySQL 中设置 root 密码（以及 root 密码变量。我***强烈***建议不要将密码放在 php 文件中。）

如果您从未为 MySQL 服务器设置过 root 密码，则服务器允许您在没有密码的情况下识别为 root。要设置 root 密码，请在 shell 中键入：

```
$ mysqladmin -u root password NEWPASSWORD

<?php

 /* Servers configuration */
 $i = 0;

 /* Server: localhost [1] */
 $i++;
 $cfg['Servers'][$i]['verbose'] = 'localhost';
 $cfg['Servers'][$i]['host'] = 'localhost';
 $cfg['Servers'][$i]['port'] = '';
 $cfg['Servers'][$i]['socket'] = '';
 $cfg['Servers'][$i]['connect_type'] = 'tcp';
 $cfg['Servers'][$i]['extension'] = 'mysqli';
 $cfg['Servers'][$i]['auth_type'] = 'config';
 $cfg['Servers'][$i]['user'] = 'root'; // If you're going to use ROOT for ALL WORK, set a root password and put it below.
 $cfg['Servers'][$i]['password'] = 'PASSWORD';
 $cfg['Servers'][$i]['AllowNoPassword'] = false; // False!
 $cfg['Servers'][$i]['hide_db'] = 'information_schema';

 /* End of servers configuration */

 $cfg['DefaultLang'] = 'en-utf-8';
 $cfg['ServerDefault'] = 1;
 $cfg['UploadDir'] = '';
 $cfg['SaveDir'] = '';

/* rajk - for blobstreaming */
$cfg['Servers'][$i]['bs_garbage_threshold'] = 50;
$cfg['Servers'][$i]['bs_repository_threshold'] = '32M';   
$cfg['Servers'][$i]['bs_temp_blob_timeout'] = 600;
$cfg['Servers'][$i]['bs_temp_log_threshold'] = '32M';

?> 
```

顺便说一句，config 没有密码保护 phpMyAdmin；任何访问正确 URL 的人都直接登录并可以操纵您的服务器。

制作一个 .htaccess 文件来防止这种情况！

```
Order Deny,Allow
Deny from All
Allow from YourIPAddress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T17:46:07.610

编辑 config.inc.php：

```
$cfg['Servers'][$i]['hide_db'] = '^information_schema|mysql|performance_schema|test$'; 
if(in_array($_GET['db'], array('information_schema', 'mysql', 'performance_schema', 'test'))) {
    exit;
} 
```

# javascript - 单击元素后，jQuery 在新选项卡中意外执行

> ID：14793506
> 
> 赞同：1
> 
> 时间：2013-02-10T01:04:37.460
> 
> 标签：javascript, jquery, modernizr

当不支持 CSS3 转换时，我尝试在通过 JQuery 离开画布后在视口中的屏幕上显示导航幻灯片。

但是，正在发生的事情（一旦发生 JQuery 事件）是打开了一个新选项卡，其中包含执行 JQuery 的同一页面。

换句话说，当单击列表图标时，会打开一个新选项卡，并且导航会在新选项卡中滑入。我希望它在当前窗口/选项卡中滑入的位置。

我将非常感谢实现这一目标的所有帮助。

这是一个正在运行的实时示例：[http ://db.tt/GyKXa5NF](http://db.tt/GyKXa5NF)

# regex - 正则表达式 - 这个匹配任务是不可能的吗？

> ID：14793508
> 
> 赞同：0
> 
> 时间：2013-02-10T01:04:40.883
> 
> 标签：regex

这是一个电视节目的文件名。假设我想从此文本中提取标题和年份

B6549887_MAC_THE_PERPETUALLY_ANGRY_CAT_YR06_12_07_2010_2J7211_00_23_14_09_8884889_3_16x9_6545665

我会匹配第一个和唯一的字母字符（仅限大写）和破折号，它们恰好以数字结尾。

我想包括数字，但不包括随后的下划线。

那会给我 MAC_THE_PERPETUALLY_ANGRY_CAT_YR06

这会涉及前瞻吗？（我还没学过）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:13:00.727

```
/([A-Z][A-Z_]+)_YR(\d{2})/ 
```

以上将匹配“MAC_THE_PERPETUALLY_ANGRY_CAT_YR06”，并在您的第一个反向引用中为您提供“MAC_THE_PERPETUALLY_ANGRY_CAT”，在您的第二个反向引用中为您提供“06”。

# javascript - 从 textarea 中获取带有 string("Line no.") 的行号？

> ID：14793513
> 
> 赞同：2
> 
> 时间：2013-02-10T01:05:23.550
> 
> 标签：javascript, jquery, html, textarea

我使用了一个代码来显示来自 textarea 的行号，它适用于我。但我想在旁边显示一个字符串，所以输出将是：行号：3

这是我使用的代码：

[http://jsfiddle.net/S2yn3/1/](http://jsfiddle.net/S2yn3/1/)

功能是：

```
$(function() {
    $('#test').keyup(function() {
        var pos = 0;
        if (this.selectionStart) 
            pos = this.selectionStart;
        } else if (document.selection) {
            this.focus();

            var r = document.selection.createRange();
                if (r == null) {
                pos = 0;
            } else {

                var re = this.createTextRange(),
                rc = re.duplicate();
                re.moveToBookmark(r.getBookmark());
                rc.setEndPoint('EndToStart', re);

                pos = rc.text.length;
            }
        }
        $('#c').html(this.value.substr(0, pos).split("\n").length);
    });
}); 
```

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:24:33.023

您的代码正在计算从第一个字符到光标的 '\n' 字符数。如果您正在寻找换行符的总数，请更改...

```
$('#c').html(this.value.substr(0, pos).split("\n").length); 
```

至

```
$('#c').html('Line no. ' + this.value.split("\n").length); 
```

# jquery - Add one hour onto start time using jquery

> ID：14793514
> 
> 赞同：0
> 
> 时间：2013-02-10T01:06:00.353
> 
> 标签：jquery, time

I have two textboxes. One is for a start time and the other is an end time. How can I add one hour to the end time box automatically when a user enters a time in the start time?

The values are strings and do not have a datatype of `time`. I really cannot find anything on the internet on how to go about doing this.

**Example**
`Start time: <input type="text" id="startTime" />`
`End time: <input type="text" id="endTime" />`

If the user enters 14:00 in `startTime`, I need it to automatically populate `endTime` with 15:00.

Any ideas on how this can be done? Thanks you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:21:28.923

[I think this should work for you considering the above comments and your requirements](http://jsfiddle.net/vW3x4/)

```
$('#startTime').keyup(function(){
    if(/[0-9]{2}\:[0-9]{2}/.test($(this).val())){
        var startTime = $(this).val().split(':');
        var endHours = parseInt(startTime[0]) +1;
        endHours = Math.min(Math.max(endHours, 1), 24);
        $('#endTime').val(endHours +':'+ startTime[1]);
    }
}); 
```

# asp.net-mvc - SingalR 将 json 对象映射到 c# 对象

> ID：14793515
> 
> 赞同：0
> 
> 时间：2013-02-10T01:06:20.480
> 
> 标签：asp.net-mvc, json, signalr, signalr.client

SignlaR 是否自动将从客户端发送的 json 对象映射到 c# 对象？如果是这样，我在这里做错了什么？

C# 对象

```
 public class ChatHub :Hub
    {
        public void broadcastMessage(CommentModel model)
        {
            string test = model.Comment;
            // Clients.All.writeMessage(jsonString);
        }

        public class CommentModel
        {
            [Required]
            public string Name { get; set; }

            [Required]
            public string Comment { get; set; }

            [Required]
            public string EmailAddress { get; set; }
        }
    } 
```

JavaScript

```
$(document).ready(function () {

        var chat = $.connection.chatHub;
        chat.client.writeMessage = function (t) {
            var name = t.Name;
            var email = t.Email;
            var id = t.id;
            var text = name + " " + email + " " + id + " ";
            $("#test").append(text);
        }

        $("form").submit(function (e) {

            var jsonObject = JSON.stringify($(this).serializeObject());
            chat.server.broadcastMessage(jsonObject);
            e.preventDefault();
        });

        $.connection.hub.start();
    });

    $.fn.serializeObject = function () {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function () {
            if (o[this.name] !== undefined) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:19:42.900

您似乎正在向应用服务器发送一个 Json 字符串，而服务器正在等待一个对象。

改变：

```
var jsonObject = JSON.stringify($(this).serializeObject()); 
```

到：

```
var jsonObject = $(this).serializeObject(); 
```

# python - 如何在 Python 中产生多种模式？

> ID：14793516
> 
> 赞同：3
> 
> 时间：2013-02-10T01:06:20.900
> 
> 标签：python, mode

基本上我只需要弄清楚如何从 Python 中的列表中生成模式（出现频率最高的数字），无论该列表是否具有多种模式？

像这样的东西：

```
def print_mode (thelist):
  counts = {}
  for item in thelist:
    counts [item] = counts.get (item, 0) + 1
  maxcount = 0
  maxitem = None
  for k, v in counts.items ():
    if v > maxcount:
      maxitem = k
      maxcount = v
  if maxcount == 1:
    print "All values only appear once"
  if counts.values().count (maxcount) > 1:
    print "List has multiple modes"
  else:
    print "Mode of list:", maxitem 
```

但不是在“所有值只出现一次”或“列表有多种模式”中返回字符串，而是希望它返回它引用的实际整数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T01:17:11.217

制作 a `Counter`，然后挑选出最常见的元素：

```
from collections import Counter
from itertools import groupby

l = [1,2,3,3,3,4,4,4,5,5,6,6,6]

# group most_common output by frequency
freqs = groupby(Counter(l).most_common(), lambda x:x[1])
# pick off the first group (highest frequency)
print([val for val,count in next(freqs)[1]])
# prints [3, 4, 6] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-10T19:44:46.767

在 python 3.8 的统计模块中新增了一个函数：

```
import statistics as s
print("mode(s): ",s.multimode([1,1,2,2])) 
```

输出：模式：[1, 2]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-24T13:43:40.197

```
def mode(arr):

if len(arr) == 0:
    return []

frequencies = {}

for num in arr:
    frequencies[num] = frequencies.get(num,0) + 1

mode = max([value for value in frequencies.values()])

modes = []

for key in frequencies.keys():
    if frequencies[key] == mode:
        modes.append(key)

return modes 
```

此代码可以处理任何列表。确保列表的元素是数字。

# iphone - 如何使用代码推送到新的视图控制器？

> ID：14793520
> 
> 赞同：-1
> 
> 时间：2013-02-10T01:06:46.293
> 
> 标签：iphone, ios, uiviewcontroller, xcode4.5

该应用程序应根据数据库中的某些数据转发到另一个视图控制器。数据库工作正常，但我无法让应用程序转发到第二个视图控制器。这是我的代码。

```
ssSecondViewController *tempView =[[ssSecondViewController alloc] init];
[self.navigationController pushViewController:tempView animated:YES]; 
```

我没有收到任何错误，但是当我运行代码时屏幕转发到一个空白的黑色视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:41:57.713

如果您已经在情节提要上拥有 viewController，那么您可以通过如下代码分配它，并且您必须在情节提要上将标识符设置为 viewControler

```
ssSecondViewController *tempView =[self.storyboard instantiateViewControllerWithIdentifier:@"yourIdentifier"]; 
```

在这里设置你的viewController id，在下面的图像标识符是“MenuViewController”

![在此处输入图像描述](../Images/cbce04593b1352cebdef9bf2054fcf10.png)

如果它在 .Xib 文件上，那么

```
ssSecondViewController *tempView =[[ssSecondViewController alloc] initWithNibName:@"yourIdentifier" bundle:nil]; 
```

如果您只想以编程方式添加新的 viewController 而不使用已经可用的 viewController ，那么您必须使用它来初始化它，`initWithFrame`然后它会显示 viewController

```
ssSecondViewController *tempView =[[ssSecondViewController alloc] initWithFrame:CGRectMake(0,0,320,480)]; 
```

`ssSecondViewController *tempView =[[ssSecondViewController alloc] init];`这条线只是分配 viewController，它没有任何位置来绘制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:13:22.203

你需要使用

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 
```

因此，对于您的示例，它将是：

```
ssSecondViewController *tempView =[[ssSecondViewController alloc] initWithNibName:@"ssSecondViewController" bundle:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T01:17:17.207

对于故事板，您通常不会实际执行推送，您可以使用`segueIdentifiers`故事板中的设置进行 segue：

```
[self performSegueWithIdentifier:@"ssSecondSegue" sender:self]; 
```

然后处理您的数据传递和其他设置器`prepareForSegue`

# java - 类似于类自引用`this`的静态上下文引用，经常使用`this`作为编码风格

> ID：14793523
> 
> 赞同：6
> 
> 时间：2013-02-10T01:06:56.463
> 
> 标签：java, reference, static, this

我一直使用类自引用`this`，无论它是否是强制性的。我相信它有助于代码的可读性，因为阅读它的人不必自己弄清楚变量所属的范围。

我想对静态范围进行类似的工作：在所有对静态上下文的引用之前加上一个`static`关键字，这样可以使代码更加不言自明。

然而，Java 不喜欢它。我知道从技术上讲，我可以只使用类名，但这看起来很难看，尤其是当类名很长的时候。我也可以在静态方法和属性的名称之前加上一个特殊的前缀，但我不想被视为偏执狂。

你们会认为这是一种好的 OOP 风格吗？或者我应该完全忘记前面的任何事情，让 javac 完成所有范围绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T01:25:50.213

大多数 Java 程序员希望`this`只在需要解决歧义的地方看到关键字。按照您的建议随意应用它可能会使其他人产生不必要的怀疑。对于静力学，我想如果那是你的包，你可以使用一些匈牙利式的符号，但在审查代码时发现它们也不难（除非它是可怕的单片或其他东西）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T01:26:03.907

不要在工作中尝试这个：

```
public class Foo
{
    private static class This extends Foo{}

    static int x;
    static void f(int x){}

    void test()
    {
        This.f(This.x);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T01:41:58.657

有一些约定在所有成员字段（甚至方法）的使用前加上`this`. 还有一些为变量或类名添加前缀的约定（臭名昭著的匈牙利符号）。例如，官方的 Android 代码风格指南要求在私有成员字段名称前加上`m-`（例如`private int mSize`），在私有静态名称前加上`s-`.

就个人而言，我讨厌这两种约定，因为它们只会使已经非常冗长的 Java 代码变得混乱。现代 IDE 提供了一些视觉区分方法。例如在 Eclipse 中，局部变量是标准的黑色字体，而字段是蓝色的。静态方法或字段以斜体显示。

它们还提供了如何浏览源代码的好方法。Ctrl+单击变量/方法/类型的名称可以直接进入它的声明。有大纲视图。如果您将鼠标悬停在 Eclipse 上，它甚至会显示一个带有此类信息的工具提示。

是的，有人可能会说您有时不会在 IDE 中阅读代码，而是在简单的文本编辑器中阅读代码。我有时也会这样做以快速查看代码，但老实说，每当我想做一些严肃的编码时，不使用 IDE 只是一种自虐。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-10T01:13:17.200

大多数 IDE 可以非常快速地找到所引用变量的来源。因此，现在认为添加关于它们的范围等的额外提示只是分散注意力。

总而言之，请不要`this`不必要地使用，请放弃所有的努力来握住追随你的程序员的手，当然，除了*选择好名字、写好代码和添加好评论*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-10T01:20:31.273

您可以使用简单的命名方案将所有静态方法放在静态内部类中。例如：

```
public class Myclass {

    public void instanceMethod() {
        Static.doThing();
    }

    public static class Static {
        public static void doThing() {
            //blah
        }
    }
} 
```

# ruby-on-rails - RoR - 多表的正确方法

> ID：14793529
> 
> 赞同：0
> 
> 时间：2013-02-10T01:08:02.263
> 
> 标签：ruby-on-rails, ruby

我自己的项目中有 5 个控制器和 5 个视图，我将我的应用程序划分为这 5 个主要区域，并在这些区域/控制器中放置了许多操作。

我的数据库中需要很多表/模型，例如：在地址内容中我需要分隔一些表并建立正确的关系以避免重复的字段...我想管理地址、用户、人员、法人实体、事件和还有很多。

如果我使用脚手架创建模型，此时在 Rails 中思考的正确方法是什么：

```
rails generate scaffold city name:string state_id:integer 
```

我自动得到正确的模型、控制器和视图。

我想`City`在另一个控制器（我之前创建的五个控制器之一）中管理该表，我需要在一个视图或一个控制器中管理许多表。

如果您知道我需要阅读并帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:22:07.127

模型独立于控制器。您可以在任何控制器中使用任何模型。[我认为这是MVC 架构](http://guides.rubyonrails.org/getting_started.html#the-mvc-architecture)很重要的原因之一。

基于此概念，您可以在任何控制器中管理`city`由 生成的模型。`scaffold`只需直接在控制器中使用[ORM ：](http://guides.rubyonrails.org/active_record_querying.html)

```
City.first
City.find 1 
```

# ios - 旋转将事件 iPad 更改为 HTML5

> ID：14793532
> 
> 赞同：0
> 
> 时间：2013-02-10T01:08:14.240
> 
> 标签：ios, objective-c, html

我正在开发一个 iPad 应用程序，它有一个 UIWebview，它反过来托管一个 html5 文档，该文档保存在本地并且不是从 Internet 下载的。我正在处理 obj c 中的旋转更改事件并为原生 iOS 进行相关的 UI 更改，我有另一个人在 html5 上工作，他说他正在 CSS 中处理该事件，我的问题是：可以在其中加载 html5 文档吗iOS 应用程序中的 UIWebview 知道发生了旋转吗？还是 iOS 层应该提醒（或通知）HTML5 层？

人们如何处理这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:42:56.947

一种可能性是从 iOS 执行 javascript 函数。

因此，例如，在您的视图控制器的`didRotateFromInterfaceOrientation`方法上，您可以依次调用`stringByEvaluatingJavaScriptFromString`UIWebView。这个问题讨论了如何做到这一点（[Calling Javascript using UIWebView](https://stackoverflow.com/questions/8886443/calling-javascript-using-uiwebview)）。

至于 CSS 中的旋转和处理，这里有一个描述`@media`查询的博客条目 ( [https://mislav.net/2010/04/targeted-css/](https://mislav.net/2010/04/targeted-css/) )。我没有尝试过方向查询，但我已经使用其他查询来定位特定设备和屏幕类型（即视网膜）。

# python - PyCharm 测试给出：“ImportError：没有名为nosetests 的模块”

> ID：14793533
> 
> 赞同：4
> 
> 时间：2013-02-10T01:08:29.763
> 
> 标签：python, pycharm, nosetests

这些版本是 PyCharm 2.7、nosetests-script.py 版本 1.2.1 和 Python 2.6.8，通过 Python(x,y)-2.7.3.0。还有Win7。

我可以从命令行很好地进行鼻子测试。但是当我构建一个鼻子测试 PyCharm 配置并尝试运行或调试它时，我得到了这个：

```
 C:\Python27\python.exe "C:\Program Files (x86)\JetBrains\PyCharm 2.7\helpers\pycharm\noserunner.py" nosetests
 Testing started at 4:59 PM ...

 Error
 Traceback (most recent call last):
  File "C:\Python27\lib\unittest\case.py", line 327, in run
    testMethod()
  File "C:\Python27\lib\site-packages\nose\loader.py", line 379, in loadTestsFromName
    module = resolve_name(addr.module)
  File "C:\Python27\lib\site-packages\nose\util.py", line 321, in resolve_name
    module = __import__('.'.join(parts_copy))
 ImportError: No module named nosetests 
```

哦，在几个版本之前它工作了，短暂地，然后停止工作。有人知道如何让它工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:35:43.563

我在 PyCharm 的问题跟踪器中提交了错误报告[PY-8840 。](http://youtrack.jetbrains.com/issue/PY-8840)请在问题跟踪器中投票以获取通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-18T05:28:14.497

我得到同样的错误是这样的：

> /Users/kwu/my_projects/virtualenv-root/env_py/bin/python2.7 "/Applications/PyCharm CE.app/Contents/helpers/pycharm/_jb_nosetest_runner.py" --path /Users/kwu/my_projects/frontline/Account -- nosetests --cover-branches --with-coverage --cover-erase --cover-package=帐户
> 测试开始于 13:16 ... 使用参数启动 Nosetest /Applications/PyCharm CE.app/Contents/helpers/ pycharm/_jb_nosetest_runner.py /Users/kwu/my_projects/frontline/Account nosetests --cover-branches --with-coverage --cover-erase --cover-package=Account

```
Error
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/case.py", line 327, in run
    testMethod()
  File "/Users/kwu/my_projects/virtualenv-root/env_py/lib/python2.7/site-packages/nose/loader.py", line 407, in loadTestsFromName
    module = resolve_name(addr.module)
  File "/Users/kwu/my_projects/virtualenv-root/env_py/lib/python2.7/site-packages/nose/util.py", line 312, in resolve_name
    module = __import__('.'.join(parts_copy))
ImportError: No module named nosetests 
```

这是因为我的跑步者配置

![我的跑步者配置](../Images/db327ba5da17bcf467128b4080722c03.png)

被`nosetests`视为一种选择。

我检查你也`nosetests`视为一种选择。

# sql - Postgres条件选择？

> ID：14793535
> 
> 赞同：2
> 
> 时间：2013-02-10T01:08:54.317
> 
> 标签：sql, postgresql, database-design, join

我不确定如何在没有示例的情况下描述此问题，所以这里有一个示例：

我有三张桌子：

表 1：盒子

```
BoxID | Box Name | Box Cost
1 | Bob's Box | $20
2 | Matt's Box | $21
3 | Jacob's Box | $22
4 | Beth's Box | $23
5 | Rachel's Box | $24 
```

表 2：Box_ProcessID

```
BoxID | ParentProcessID
1 | 123
2 | 456
3 | 789
4 | 012
5 | 234 
```

表 3：Box_Processes

```
ParentProcess | ChildProcess | Start Time | End Time | ProcessName 
123 | AAA | 1:00 | 1:05 | Invoiced
123 | AAB | 1:30 | 1:35 | Packed
123 | BBB | 2:00 | 2:05 | Shipped

456 | CDD | 3:15 | 3:20 | Invoiced
456 | DDD | 3:25 | 3:30 | Packaging_Complete
456 | CCD | 3:35 | 3:40 | Shipped

789 | EEE | 4:15 | 4:20 | Invoiced
789 | EEF | 4:25 | 4:30 | Done_Packing
789 | EFF | 4:35 | 4:40 | Shipped 
```

我希望输出列是：盒子名称、盒子成本、盒子运输持续时间、盒子包装持续时间、盒子发票持续时间

我知道我可以使用 like %pack% 来选择我的打包字段，并且我可以弄清楚如何使用 Date_Part 或类似的东西来获取我的持续时间，但是我不知道如何让我`shipping duration`的 、`packing duration`和`invoice duration`进入单独的字段.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T01:14:09.677

所以你想做这样的伪sql吗？

```
select b.box_name, b.box_cost,
bp2.end_time - bp2.start_time as box_shipping_duration,
bp3.end_time - bp3.start_time as box_packing_duration,
bp1.end_time - bp1.start_time as box_invoice_duration
from boxes b

join box_processids bpid on b.boxid = bpid.boxid

left outer join box_processes bp1 on bpid.parentprocessid = bp1.parentprocess
and processname = 'Invoiced'

left outer join box_processes bp2 on bpid.parentprocessid = bp2.parentprocess
and processname = 'Shipped'

left outer join box_processes bp3 on bpid.parentprocessid = bp3.parentprocess
and processname = 'Packed' 
```

（将需要空检查、正确的日期时间处理、更好的名称等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T01:56:11.480

首先，你的设计有缺陷。`time`不利于这个目的。过了午夜，它就中断了。使用[`timestamp`或`timestamptz`](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html)代替。

接下来，由于在 PostgreSQL 中不带引号的标识符会自动转换为小写，因此您的命名约定也不好。我把它改编成更有用的东西。

```
CREATE TABLE boxes (box_id int PRIMARY KEY, box_name text, box_cost numeric);
INSERT INTO boxes VALUES
  (1, 'Bob''s Box', 20)
 ,(2, 'Matt''s Box', 21)
 ,(3, 'Jacob''s Box', 22)
 ,(4, 'Beth''s Box', 23)
 ,(5, 'Rachel''s Box', 24);

CREATE TABLE box_processids (
  box_id int 
 ,parentprocess_id int
 ,PRIMARY KEY(box_id, parentprocess_id)
);

INSERT INTO box_processids  VALUES
  (1, 123)
 ,(2, 456)
 ,(3, 789)
 ,(4, 012)
 ,(5, 234);

CREATE TABLE box_processes (
  parentprocess_id int
 ,childprocess_id char(3)
 ,start_time timestamp
 ,end_time timestamp
 ,processname text
 ,PRIMARY KEY(parentprocess_id, childprocess_id)
);

INSERT INTO box_processes VALUES
  (123, 'AAA', '2013-2-10 1:00', '2013-2-10 1:05', 'Invoiced')
 ,(123, 'AAB', '2013-2-10 1:30', '2013-2-10 1:35', 'Packed')
 ,(123, 'BBB', '2013-2-10 2:00', '2013-2-10 2:05', 'Shipped')

 ,(456, 'CDD', '2013-2-10 3:15', '2013-2-10 3:20', 'Invoiced')
 ,(456, 'DDD', '2013-2-10 3:25', '2013-2-10 3:30', 'Packaging_Complete')
 ,(456, 'CCD', '2013-2-10 3:35', '2013-2-10 3:40', 'Shipped')

 ,(789, 'EEE', '2013-2-10 4:15', '2013-2-10 4:20', 'Invoiced')
 ,(789, 'EEF', '2013-2-10 4:25', '2013-2-10 4:30', 'Done_Packing')
 ,(789, 'EFF', '2013-2-10 4:35', '2013-2-10 4:40', 'Shipped'); 
```

您的查询可能如下所示：

```
SELECT b.box_name
      ,b.box_cost
      ,(i.end_time - i.start_time) AS box_invoice_duration
      ,(p.end_time - p.start_time) AS box_packing_duration
      ,(s.end_time - s.start_time) AS box_shipping_duration
FROM   boxes               b
LEFT   JOIN box_processids bp USING (box_id)
LEFT   JOIN box_processes  i ON i.parentprocess_id = bp.parentprocess_id
                            AND i.processname = 'Invoiced'
LEFT   JOIN box_processes  p ON i.parentprocess_id = bp.parentprocess_id
                            AND p.processname = 'Packed'
LEFT   JOIN box_processes  s ON i.parentprocess_id = bp.parentprocess_id
                            AND s.processname = 'Shipped' 
```

[**->sqlfiddle**](http://sqlfiddle.com/#!12/41082/1)
用于[`to_char()`](http://www.postgresql.org/docs/current/interactive/functions-formatting.html)格式化您`interval`想要的任何方式。

# ruby - 除了 PrettyPrint，还有其他方法可以在 Ruby Mechanize 中可视化页面对象吗？

> ID：14793537
> 
> 赞同：0
> 
> 时间：2013-02-10T01:09:04.233
> 
> 标签：ruby, browser, rendering, mechanize, lynx

我想知道除了 PrettyPrint 之外，是否还有其他方法可以在 Ruby Mechanize 中可视化页面对象。例如：将其渲染为 png 图像文件，或者在浏览器窗口中显示，或者在终端上打印，类似于 Lynx 浏览器的方式。

# java - Java Sockets - 客户端发送响应后服务器挂起

> ID：14793539
> 
> 赞同：0
> 
> 时间：2013-02-10T01:09:29.083
> 
> 标签：java, sockets

只是想处理套接字。服务器和客户端在两个不同的程序中运行。

它们似乎彼此连接良好，但客户端不会正确地将其输出发送到服务器。服务器只是挂起。这是代码：

服务器：

```
 private ServerSocket serverSocket;
  private Socket client;

  public void run() throws Exception {
     serverSocket = new ServerSocket(20005);
     while(currentState == Game.State.NORMAL) {
      client = serverSocket.accept();
      PrintWriter out = new PrintWriter(client.getOutputStream(), true);
      BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
      String clientInput = in.readLine();

      // Takes the client input string and does some simple game logic that returns a Gson object
      Gson serverResponse = processInput(clientInput);
      out.write(serverResponse.toString());
      out.flush();
    }
  } 
```

客户：

套接字客户端Socket；

```
 void run() throws Exception {
    clientSocket = new Socket("192.168.0.24", 20005);
    PrintWriter out;
    BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

    // Print the state of the game - returns false if state is win or lose.
    while(printState()) {
      out = new PrintWriter(clientSocket.getOutputStream(), true);
      // This method just takes some input from the console
      String clientInput = getInput();

      out.write(clientInput);
      out.flush();

      String serverResponse = in.readLine();

      updateState(serverResponse);
    }
  }
} 
```

有一些潜在的游戏逻辑正在发生，但它非常小，应该是无关紧要的。我想我只是在这里误解了一些基本的东西。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:13:10.303

确保发送换行符以`in.readLine()`匹配`Server`.

```
out.write(clientInput + "\n"); 
```

`Server`从->发送数据时也是如此`Client`。

# trending - 如何在我的网站主页上添加“热门话题”部分？

> ID：14793542
> 
> 赞同：0
> 
> 时间：2013-02-10T01:09:56.493
> 
> 标签：trending

我想在主页顶部的新闻网站中添加一个自定义的“热门话题”部分。一个准确显示我正在寻找的内容的现有示例是 Daily Beast 主页。

我想用自定义代码或插件来做到这一点，但不是作为一个小部件。有谁知道我如何以灵活的方式做到这一点，可以轻松定制我网站的样式和外观。

我的网站是一个名为 Yasta.pr 的西班牙语 24/7 新闻网站。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:28:01.190

这取决于您如何将数据存储在数据库中，但您可以尝试以下操作：

在菜单栏上方的网页标题中添加一个 div 部分。

然后您可以通过在其中插入以下代码，在页面启动时自动将最热门的主题动态添加到其中：

```
<div id="*id_name">

$query = "SELECT * FROM *table_name ORDER BY *most_trending_column LIMIT 1";
mysql_select_db(*database_name, *connection);
$result = mysql_query($query) or die(mysql_error());
$data = mysql_fetch_assoc($result);
echo "<h3 id='*id_name'>" . $data['*title_column_name'] . "</h3>";

</div> 
```

不要忘记先连接到您的数据库。

# ruby-on-rails - 从索引操作传递 json 并同时呈现另一个应用程序布局。Ruby on Rails

> ID：14793546
> 
> 赞同：0
> 
> 时间：2013-02-10T01:11:12.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, angularjs

我有 Vacancies 控制器，我需要将 @vacancies 传递给 json 并呈现另一个布局。以下代码不起作用（未传递 json，但我有“宽”布局）。如果我删除*format.html { render layout: "wide"} }* json 正确传递。如何将这两件事结合起来？

```
class VacanciesController < ApplicationController
respond_to :html, :json
...
    def index
      @vacancies = Vacancy.all
      respond_with(@vacancies) do |format|
       format.html { render layout: "wide"} }
       format.json { render json: @vacancies } 
      end
     end
  ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T01:29:55.583

你不能调用 render 两次，这是问题 #1。您也不能对单个请求发送两个响应。

同时呈现 HTML（这意味着新的页面加载）和发送 JSON（用于 AJAX 请求，即不重新加载页面的请求）也没有任何意义。这是不可能的，但即使有可能也是毫无意义的。

如果您想告诉请求使用特定布局，可以将布局选项传递给渲染调用。但是，渲染调用不会将数据对象作为第一个参数，它会使用视图名称或仅选项哈希。因此，要正确调用它，您应该使用：

```
render :index, :layout => 'example' 
```

我希望这将使您的 HTML 视图正确显示。

但是请理解，布局选项仅对 HTML 响应有用，对 JSON 响应无效。布局告诉你的渲染调用什么外部 HTML 包裹你的动作调用的视图，如果你没有指定它使用 'application.html'

为了帮助您理解另一件事：您的响应块告诉计算机如何响应不同类型的请求。它就像一个交换机。如果您使用 if/else 语句编写它，它可能如下所示：

```
if request_type == 'html'
  render :index, :layout => 'wide'
elsif request_type == 'json'
  render :json => @vacancies
else
  raise raise ActionController::UnknownFormat
end 
```

因此，使用您的 respond_with 块，如果您修复了 html 渲染调用，并假设您在 localhost 上进行开发，如果您在浏览器中输入以下 URL 并按 Enter...

```
http://localhost:3000/vacancies 
```

这将发出一个 HTML 格式的 GET 请求，它将加载页面`layout: 'wide'`但没有其他数据。如果您键入：

```
http://localhost:3000/vacancies.json 
```

这将模拟 JSON 请求，您将只获得`@vacancies`数据的 JSON 表示形式。

我希望这可以帮助您解决问题。如果没有，请更详细地描述您要完成的工作，以便我可以帮助您了解如何做到这一点。

PS：最后一个提示：如果您想在控制器级别指定布局，您可以在`layout`控制器顶部调用，如下所示：

```
class ExampleController < ApplicationController
  layout 'awesome', :only => [:new,:edit]
  ...
end 
```

这与任何其他过滤器一样工作，您可以传递 :only 或 :except 或根本不传递任何选项。

# python - Skype4Py 无法确定窗口状态

> ID：14793548
> 
> 赞同：1
> 
> 时间：2013-02-10T01:11:35.623
> 
> 标签：python, macos, skype4py

我在 Mac OSX (10.8.2) 上，并且仅在 Skype 窗口最小化时才尝试使用 Skype4py 发送消息以响应传入消息。

我设置的代码基本上如下：

```
s = Skype4Py.Skype()
c = s.Client
if not c.IsRunning:
    c.Start()
s.FriendlyName = "AR"
s.Attach() 
```

好的......这是非常基本的并且完全有道理，对吧？我的问题是我正在尝试检查窗口是否关闭......虽然[http://skype4py.sourceforge.net/doc/html/Skype4Py.client.Client-class.html](http://skype4py.sourceforge.net/doc/html/Skype4Py.client.Client-class.html)列表`IsRunning`和`WindowState`在同一个地方...无论如何格式化或尝试引用它，我都无法获得任何`c.WindowState`工作参考。

他们都产生一个`Skype4Py.errors.SkypeError: [Errno 7] GET: invalid WHAT`......这对我来说是一个完全陌生的错误代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:16:42.840

对不起，我不会说英语！:)

窗口状态打印：`print 'client: ' + str(skype.Client.WindowState)`

```
 Window state
    wndUnknown = 'UNKNOWN'
    wndNormal = 'NORMAL'
    wndMinimized = 'MINIMIZED'
    wndMaximized = 'MAXIMIZED'
    wndHidden = 'HIDDEN' 
```

用法：

```
s = Skype4Py.Skype()
c = s.Client
if not c.IsRunning:
    c.Start()
if (c.WindowState == Skype4Py.wndUnknown) | (c.WindowState == Skype4Py.wndHidden):
    # kill the skype with shell (killall -9 skype)
    c.Start()
s.FriendlyName = "AR"
s.Attach() 
```

# asp.net-mvc - UnitOfWork - 存储库 - 服务模式建议

> ID：14793557
> 
> 赞同：1
> 
> 时间：2013-02-10T01:13:46.643
> 
> 标签：asp.net-mvc, repository-pattern, unit-of-work

因此，通常在实现此模式时，我先使用`Service`然后`Repository<Type>`让存储库使用`UnitOfWork`.

我正在玩弄一个方法`UnitOfWork`，`Repository<Type>`就像这样：

```
public class UnitOfWork : IUnitOfWork
{
    public IRepository<TEntity> GetRepository<TEntity>() where TEntity : Core.Domain.Model.EntityBase<TEntity>
    {
        return new Repository<TEntity>(this);
    }
} 
```

然后`Service`将采用`UnitOfWork`并可以从中解决所需的存储库。

你怎么看？你觉得这有什么缺陷吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T21:22:24.790

我在我的 ASP.NET MVC 程序中使用了类似的方法，到目前为止它运行良好。

我的`IUnitOfWork`界面如下所示：

```
public interface IUnitOfWork
{
    IRepository<TEntity> GetRepositoryFor<TEntity>() where TEntity : class;
    void SaveChanges();
} 
```

相关的`IRepository`界面如下所示：

```
public interface IRepository<TEntity> : IQueryable<TEntity> where TEntity : class
{
    TEntity Find(params object[] keyValues);

    void Insert(TEntity entity);
    void Update(TEntity entity);
    void Delete(TEntity entity);
} 
```

然后像这样将它传递给我的服务：

```
public abstract class BaseService
{
    public BaseService(IUnitOfWork unitOfWork)
    {
        // etc...
    }
} 
```

您是对的，这使得服务可以轻松地解析其存储库，而无需将它们单独传递给构造函数，这在您可能在单个服务中使用多个存储库（例如采购订单和产品）的情况下很有用。

使用这种与 ORM 无关的接口的一个好处是，它意味着您可以轻松地切换 ORM。老实说，我从实体框架更改为另一个 ORM 的机会很小，但事实是，如果需要，我可以。作为奖励，我的服务更容易测试，而且我还发现这使我的服务类更干净，因为它现在完全不知道正在使用的 ORM，并且完全针对上面的两个接口工作。

关于关于通用存储库接口的评论，我的建议是务实，做最适合您和您的应用程序的事情。在 Stackoverflow 上有很多关于这个主题的问题，他们的答案各不相同，关于哪种是最好的方法（EG 暴露`IQueryable`vs `IEnumerable`，通用 vs 非通用）。

我玩弄*没有*通用存储库，因为您可能已经注意到我的`IRepository`界面看起来像`IDbSet`；我采用这种方法的原因是它允许我的*实现*处理您使用`DbContext`EG执行的所有 Entity Framework 实体状态管理内容

```
public void Delete(TEntity entity)
{
    if (Context.Entry(entity).State == EntityState.Detached)
    {
        EntitySet.Attach(entity);
    }
    EntitySet.Remove(entity);
} 
```

If I used `IDbSet` I would need to perform this in my service layer, which would then require a dependency on `DbContext` which seemed a much more leaky abstraction than my generic repository.

# ubuntu - Ubuntu 终端中的 Emacs：元键打开菜单

> ID：14793561
> 
> 赞同：22
> 
> 时间：2013-02-10T01:14:21.487
> 
> 标签：ubuntu, emacs

我一直在为 Ubuntu 以全屏 -nw 模式（终端）学习 Emacs，但我遇到了这个烦人的问题。每当我按 LAlt-[chr] （其中 chr 是某个字符）时，如果该组合键恰好是屏幕顶部某个终端菜单的快捷方式，则该菜单将打开，并且在 Emacs 中不会发生任何事情。如何防止这些组合键影响菜单栏？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-10T01:26:30.217

您应该能够通过取消选中编辑下快捷对话框中的相应框来禁用菜单激活。

如果菜单栏不可见，请右键单击模拟器窗口以使菜单栏可见。

由于我是 debian 用户，因此我不确定此解决方案是否至少在 gnome-terminal 版本 2.30.2 中仍然适用于 ubuntu，因此可以通过这种方式进行更改。

不幸的是，侏儒家伙似乎如此快速地发明了用户界面，我不确定它是否仍然可能。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-11T15:26:57.200

在用于 gnome 终端的 ubuntu 12.04 中：

转到`Edit -> Keyboard shortcuts...`并取消选中`Enable menu access keys (such as Alt-F to open the File menu)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-29T17:46:04.930

在 Xfce 终端的 Xubuntu 18.04 中：

1.  `Edit`-> `Preferences`->`Advanced`
2.  查看`Disable all menu access keys (such as Alt-f)`

# css - CSS - 居中对齐多行列表

> ID：14793564
> 
> 赞同：0
> 
> 时间：2013-02-10T01:14:50.060
> 
> 标签：css

我想在 div 中集中对齐多行列表：

[http://jsfiddle.net/8Wu2S/](http://jsfiddle.net/8Wu2S/)

在这个例子中，我设置了一个固定的宽度`ul`来展示我想要实现的目标。但是，我需要`ul`动态的宽度，以便它只包含列表项（它们是固定宽度），即缩小以适应。每行列表项应从左侧开始，并在流入新行之前尽可能多地容纳项目。

是可变宽度，因此`div`例如，如果`div`稍微宽一点，它看起来像这样：

[http://jsfiddle.net/8Wu2S/1/](http://jsfiddle.net/8Wu2S/1/)

我已经尝试了各种方法，但似乎比我想象的要困难得多！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:19:51.277

```
ul {
    background-color: red;
    width: 80%;
    margin: 0 auto;
}
li {
    display: inline-block;
    width: 49%;
    border: 1px solid black;
} 
```

我使用了 49%，但您可以使用 CSS`box-sizing: border-box`来避免这种情况并使用固定的 50%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:21:50.170

将 ul 和 li 元素设置为内联显示。

```
 <div style="width:20%;">
     <ul style="display:inline;">
       <li style="display:inline;">Foo</li>
       <li style="display:inline;">bar</li>
     </ul>
 </div> 
```

jsFiddle 示例：http: [//jsfiddle.net/QcNTW/4/](http://jsfiddle.net/QcNTW/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T00:11:45.560

我设法找到了基本相同的问题：

[CSS - 如何使内部带有包裹的浮动的 DIV 仅与容纳浮动所需的一样大？](https://stackoverflow.com/questions/8983182/css-how-to-make-div-with-wrapped-floats-inside-only-be-as-large-as-it-needs-to/8987026)

事实证明没有很好的解决方案。一种方法是使用媒体查询来设置`ul`. 另一种方法是使用像[Masonry](http://masonry.desandro.com/)这样的 jQuery 插件。

无论如何，我可能会在我的网站上使用 Masonry，所以我想我会沿着这条路走，非 JavaScript 用户会退回到非居中的布局。

# html - 无法弄清楚这个额外的空间是从哪里来的

> ID：14793570
> 
> 赞同：0
> 
> 时间：2013-02-10T01:15:42.623
> 
> 标签：html, css

我有一个视频和该视频的容器。但是，我无法让容器完全包裹视频。我已将约束器背景设为白色，以清楚地显示它太大的地方。我需要正确包装的原因是因为我有一组视频控件，现在位于包装结束的视频下方。![在此处输入图像描述](../Images/488126506794b3d212b7bc1d6018192a.png)

这是我写的 CSS，我尝试了很多东西，但我就是想不通：

```
#video_container{
    -webkit-box-flex: 1; 
    -moz-box-flex: 1;
    border:2px solid blue;
    margin: 20px;
    padding: 0px;
    width:100%;
    height:100%;
    position: relative;
    background-color:white;
}
#video_container video{
    width:100%;
    height:auto;
    padding: 0px;
    margin: 0px;
}
#video_container:hover #controls {
    opacity: 0.7;
    padding: 0px;
    margin: 0px;
} 
```

这是容器的 HTML：

```
<div id="video_container">
    <video id="trailers">
        <source src="vLast.mp4" type="video/mp4">
        <source src="vLast.webm" type="video/webm">
    </video>
    <nav>
       <div id="controls">
            <button id="playButton">Play</button>      
            <div id="defaultBar">
                <div id="progressBar"></div>
            </div>
            <button id="vol" onclick="level()">Vol</button>
            <button id="mute">Mute</button>
            <button id="full" onclick="toggleFullScreen()">Full</button>
        </div> 
       <div id="playlist">
            <div>cats</div>
            <div>cats</div>
            <div>cats</div>
        </div>
    </nav>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:42:42.820

在视频元素上添加 display:block ：

```
 #video_container video{
        width:100%;
        height:auto;
        padding: 0px;
        margin: 0px;
        display:block;
 } 
```

# mysql - MySQL将外键添加到现有表PHP

> ID：14793572
> 
> 赞同：0
> 
> 时间：2013-02-10T01:16:34.707
> 
> 标签：mysql, foreign-keys, relational-database

**我有一个使用INNODB**和**Foreign Keys**设置所有表的内置数据库。现在我需要修改一个表并添加一个引用另一个表的新列。我的查询是：

```
ALTER TABLE test ADD newcol INT NOT NULL;

ALTER TABLE test ADD CONSTRAINT fk_test
FOREIGN KEY (newcol) 
REFERENCES othertable(id); 
```

我收到以下错误：

```
"#1452 - Cannot add or update a child row: a foreign key constraint fails." 
```

所有其他表都包含数据，但我知道如果我删除`test`表并使用外键创建它，它将起作用。如果我删除测试表，它将删除很多记录，我想避免复制数据并重新插入它。

谁能告诉我如何通过外键添加新列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:25:40.380

该错误消息意味着您的值在列`newcol`中不存在`othertable id`。通过添加 的一列`INT NOT NULL`，您将该列的所有初始值设置为`0`。如果您没有 in 的 id `0`，`othertable`则您的密钥不匹配

试试这个查询：

```
SELECT  newcol 
FROM    test
WHERE   newcol NOT IN (
    SELECT  id
    FROM    othertable
) 
```

如果您返回任何结果，那么您的关键值`newcol`违反了 FK 限制

# c - 使用 x86 asm 制作 MMAP 宏

> ID：14793574
> 
> 赞同：0
> 
> 时间：2013-02-10T01:16:42.997
> 
> 标签：c, assembly, macros, x86

我正在尝试制作一个接受ptr和mmap参数的宏，然后相应地设置它。这是我到目前为止所拥有的：

```
#define MY_MMAP(PTR, ARG1, ARG2, ARG3, ARG4, ARG5, ARG6) \
({              \
int x = 90; \
asm  (          \
    "movl %1, %%eax \n"     \
    "movl %2, %%ebx \n" \
    "movl %3, %%ecx \n" \
    "movl %4, %%edx \n" \
    "movl %5, %%esi \n" \
    "movl %6, %%edi \n" \
    "movl %7, %%ebp \n" \
    "int $0x80 \n"          \
    "movl %%eax, %0"      \
    :"=r" (PTR)     \
    : "eax" (x) ,"ebx" (ARG1), "ecx" (ARG2), "edx" (ARG3), "esi" (ARG4), "edi" (ARG5), "ebp" (ARG6) \
    :           \
    );          \
}) 
```

但是，当我使用它时，此代码不起作用。有人可以帮我吗？

```
 char * readBuffer;
  MY_MMAP(readBuffer, 0, (sizeOfRead + 1),  PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1 ,0); 
```

这是由 gcc 制作的汇编代码：

```
 movl %eax, %eax 
 movl $0, %ebx 
 movl %ecx, %ecx 
 movl $3, %edx 
 movl $34, %esi 
 movl $-1, %edi 
 movl $0, %ebp 
 int $0x80 
 mov %eax, %ebx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:24:57.533

您将指针作为参数传递给系统调用，在执行 int 0x80 之前，它应该是 eax 中的 mmaps 系统调用号。

# c - 改变函数中某物的值

> ID：14793576
> 
> 赞同：1
> 
> 时间：2013-02-10T01:16:57.207
> 
> 标签：c, increment

这是一个更大的测试用例，这就是为什么它是这样编写的。我怎样才能编写这段代码以使 a 的值不断增加？在我的项目中，我调用了一个函数来解析文件中的一行。我需要将结构的值设置为在函数调用中设置的某些值（函数的参数在主函数中初始化，如下面的代码）。

```
int increment(int a)
{
    a++;
    return 0;
}
int main()
{
    int a =0;
    int b =0;
    while( b<5){
        increment(a);
        b++;
        cout << "a is: " << a << ". And b is: " << b << "\n";
    }
    system("PAUSE");
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T01:18:31.667

将其地址传递给递增

```
void increment(int *a){
  (*a)++;  
}
increment(&a);
//Using the address of operator pass in the address of a as argument 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T01:31:10.460

您可以使用指针：有关类似问题，请参阅[在 C 中通过引用传递。](https://stackoverflow.com/questions/2229498/passing-by-reference-in-c)

此外，您可以修改您的增量函数以返回 a 的增量值，并在 main 中调用它，如下所示：

a = 增量（a）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-26T19:16:21.263

你可以：

*   宣布`static int a = 0;` `return a++;`
*   将签名更改为`int increment( int* a )`和`return *a++;`
*   `a`在同一源文件的文件范围内声明为`increment()`
*   `a`全球化_
*   在 C++ 中执行此操作并通过`a`引用传递

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-10T01:23:02.660

您是`a`按值传递的，因此`a`永远无法更改的值。

一种解决方案是：

```
int increment (int a) { return a + 1; } 
```

然后在你的循环中：

```
a = increment(a); 
```

另一种解决方案是`a`通过引用（指针）

```
void increment (int *a) { *a = *a + 1; } 
```

并在循环中

```
increment(&a); 
```

# scala - 在不维护可变状态的情况下释放 Scala 中的 IO 资源

> ID：14793577
> 
> 赞同：0
> 
> 时间：2013-02-10T01:17:11.107
> 
> 标签：scala, immutability, resource-management

我需要使用一些 Java 库，它可能会在一个方法中抛出一些异常，并在另一组方法中返回错误代码。到目前为止，它导致了丑陋的代码，例如

```
val txn = mgr.prepareTransaction()
val accessRecord = txn.readByQuery(...)
var state : Either[MyError, Result] = null //
try {
  // do something here
  val result = txn.runCodeWithin(new Callable[Result]() {...})
  if (result == -1) {
    state = Left(CanNotReadRecord)
  } else {
    state = Right(txn.getCachedRecord())
  }
} catch {
  case e: Exception => state = Left(GeneralError(e))
} finally {
  state match {
    case Right(_) => txn.commit();
    case _        => txn.rollback();
  }
} 
```

我最感兴趣的是摆脱**状态**为**var**和在 finally 块中检查状态的能力。请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T04:30:41.683

Scala 2.10 引入了`Try`该类，它是对`Either[Throwable, Result]`. 它包含所有常见的 monad 操作（使理解起作用的东西）和一些其他有用的方法。（[在这里查看 Try 的文档](http://www.scala-lang.org/api/current/index.html#scala.util.Try)）

这是您的代码的可能重新实现，使用`Try`并替换`CanNotReadRecord`为`CanNotReadRecordException`. 除了替换之外，它应该在功能上与您的示例等效。

```
def txResults(txn: Transaction): Try[Record] = for {
    result <- Try{ txn.runCodeWithin(...) }
    checked <- result match {
        case -1 => Failure( new CanNotReadRecordException )
        case _ => Success( txn.getCachedRecord )
    }
} yield checked

txResults(txn) match {
    case Success(record) => txn.commit()
    case Failure(e) => txn.rollback() //and maybe handle `e`
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T01:45:53.810

[Scala ARM](https://github.com/jsuereth/scala-arm) （自动资源管理）库以一种完全密封的方式优雅地处理所有这些事情。

看看这个。

# python - IndexError：索引过多

> ID：14793585
> 
> 赞同：2
> 
> 时间：2013-02-10T01:18:13.683
> 
> 标签：python, numpy, scikit-learn

我正在尝试在 scikit-learn 中使用一种算法来根据多个输入来预测输出。我似乎收到错误“索引过多”返回，但无法弄清楚原因。

CSV 文件培训：

```
 1.1    0.2 0.1 0   0.12    0.1
 1.4    0.2 0.1 0.1 0.14    0.1
 0.1    0.1 0.1 0   0.26    0.1
 24.5   0.1 0   0.1 0.14    0.1
 0.1    0.1 0.1 0   0.25    0.1 
```

代码：

```
 fileCSVTraining = genfromtxt('TrainingData.csv', delimiter=',', dtype=None)

    #Define first 6 rows of data as the features
    t = fileCSVTraining[:, 6:]

    #Define which column to put prediction in
    r = fileCSVTraining[:, 0-6:]    
    #Create and train classifier 
    x, y = r, t
    clf = LinearSVC()
    clf = clf.fit(x, y)     
    #New data to predict
    X_new = [1.0, 2.1, 3.0, 2.4, 2.1]
    b = clf.predict(X_new) 
```

错误：

```
 t = fileCSVTraining[:, 6:]
 IndexError: too many indices 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T02:21:28.833

根据评论，我认为您想要：

```
fileCSVTraining = genfromtxt('TrainingData.csv') 
```

然后，要获得“前 6 行”，您将使用

```
t = fileCSVTraining[:6, :] 
```

（我假设您的实际数据文件比您显示的要长。您的示例只有 5 行。）

我怀疑您使用数组索引来获取`r`也不正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T08:23:33.350

请打印您的`x`和`y`变量，您可能会看到数据无效的原因并相应地进行修复。

最后一行：

```
X_new = [1.0, 2.1, 3.0, 2.4, 2.1]
b = clf.predict(X_new) 
```

应该：

```
X_new = [[1.0, 2.1, 3.0, 2.4, 2.1]]
b = clf.predict(X_new) 
```

正如 predict 期望的样本集合（的 2D 数组`(n_new_samples, n_features)`），而不是单个样本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:40:07.100

获取 r 和 t 的数组索引不正确。使用：

```
 t = fileCSVTraining[:, 1-0:] 
```

给了我所需的训练数据，留下了预测栏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-27T07:19:02.600

指定 dtype=float 也很重要，因为“无”将允许将整数（如果您的数据中有任何整数）包含在数组中，这将强制一维数组而不是二维数组。如图所示，索引不适用于一维。

# javascript - 使用 jquery 或 javascript 仅在 iframe 中显示表格但还隐藏某些列？

> ID：14793586
> 
> 赞同：0
> 
> 时间：2013-02-10T01:18:23.327
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我已经将 iframe 放入 div 中，我知道我可以只显示我需要的数据表并隐藏页面的其余部分，但我还需要从表中删除列，这可以使用 jquery 吗？数据保存在doms中？？？所以希望有一个小的可能性。

感谢您的评论和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:44:33.580

据我了解，您想删除特定的表格列吗？

```
$('table tr').each(
    function(tr_idx,el){
        $(el).children('td').each(
            function(td_idx,el2){
                //i'm removing first columns..
                if(td_idx == 0){
                    el2.remove();
                }
        });//inner each
});//outer each 
```

# python - 带有for循环的python

> ID：14793593
> 
> 赞同：-1
> 
> 时间：2013-02-10T01:19:08.600
> 
> 标签：python, loops, for-loop, space

嘿，我的 for 循环有问题，所以假设我想用 for 循环在一行中打印 5 次“#”符号。

```
for i in range(5):
    print "#", 
```

我可以如何获得两者之间的空间所以它看起来像#####而不是#####???

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T01:20:45.097

我假设你打算在这个循环中做一些事情，而不是仅仅打印“#”，如果是这样的话，你有几个选项：

```
import sys
for i in range(5):
    sys.stdout.write('#') 
```

或者，如果您决定使用 print：

```
for i in range(5):
    print "\b#", 
```

或者：

```
from __future__ import print_function
for i in range(5):
    print('#', end='') 
```

如果您实际上只想打印 '#'`n`次，那么您可以这样做：

```
n = 5
print '#'*n 
```

或者：

```
n = 5
print ''.join('#' for _ in range(n)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:21:18.930

请改用该`print` *功能*。（注意，在 Python 2`print`中通常是一个语句，但是通过 import `print_function`，它变成了一个函数）。

```
from __future__ import print_function

for i in range(5):
    print('#', end='') 
```

该函数支持`end`您可以指定的关键字参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T01:22:24.330

我会使用一个连接......这样的东西应该可以工作：

```
print(''.join('x' for x in range(5))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T01:23:57.593

你可以在没有循环的情况下做到这一点！

```
print '#' * 5 
```

如果您要使事情变得更复杂，则可以使用`str.join`理解：

```
print ''.join(str(i**2) for i in range(4)) # prints 0149
print ','.join(str(i+1) for i in range(5)) # prints 1,2,3,4,5 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T01:28:20.697

除了发布的其他答案之外，您还可以：

```
mystring = ''
for i in range(5):
    mystring += '#' # Note that you could also use mystring.join() method
                    # .join() is actually more efficient.
print mystring 
```

或者你甚至可以：

```
print '#'*5 
```

# c# - Silverlight 可以访问 USB 端口吗

> ID：14793594
> 
> 赞同：1
> 
> 时间：2013-02-10T01:19:13.480
> 
> 标签：c#, asp.net-mvc, silverlight, google-chrome, usb

我正在使用 MVC3 开发 Web 应用程序，要求是访问 USB 端口。如果不可能，是否有其他方法或解决方法可以使用 Web 浏览器访问端口。请给我一个示例链接。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:53:56.440

如果您提供了有关您的应用程序需要访问 USB 端口的原因的详细信息，您可能会找到更多答案。如果是这个 Intranet，那么你说的是企业，你对客户端有更多的控制权。如果这是互联网，那是没有希望的（或应该是）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:59:05.100

对的，这是可能的。Silverlight 5 可以使用 PInvoke（平台调用）访问 Win32 API。Silverlight 应用程序必须是受信任的应用程序。

这是一个例子（还有很多其他的，谷歌它）：

[http://blogs.msdn.com/b/silverlight_sdk/archive/2011/09/27/pinvoke-in-silverlight5-and-net-framework.aspx](http://blogs.msdn.com/b/silverlight_sdk/archive/2011/09/27/pinvoke-in-silverlight5-and-net-framework.aspx)

# mongodb - 如何索引只有不同排序值的 mongodb 类似 mongodb 查询

> ID：14793596
> 
> 赞同：2
> 
> 时间：2013-02-10T01:19:30.780
> 
> 标签：mongodb

例如，如果我有以下查询：

```
db.things.find({
  param1: value1,
  param2: value2,
  param3: value3
}).sort({
  sortvalue1: -1
}) 
```

这些参数总是相同的，但`sortvalue1`有许多不同的可能性（比如 5）。索引的最佳方法是什么？

```
{
  param1: -1,
  param2: -1,
  param3: -1,
  sortvalue1: -1
} 
```

对于每个`sortvalue`，或单个，大，具有所有排序索引的复合索引？

```
{
  param1: -1,
  param2: -1,
  param3: -1,
  sortvalue1: -1,
  sortvalue2: -1,
  sortvalue3: -1,
  sortvalue4: -1,
  sortvalue5: -1
} 
```

为什么？

# jsf-2 - jsf2模板和添加样式表

> ID：14793598
> 
> 赞同：0
> 
> 时间：2013-02-10T01:19:40.423
> 
> 标签：jsf-2

尝试使用 JSF2 模板功能。base.xhtml 页面如下所示

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"  xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
    >

    <h:head>
    <h:outputStylesheet name="test.css" library="style" target="head"/>
    </h:head>

    <h:body>

    <div id="page">
    <div id="header">
    <ui:insert name="header" >
    <ui:include src="/layout/header.xhtml" />
    </ui:insert>
    </div>

    <div id="content">
    <ui:insert name="content" >
     ???
    </ui:insert>
    </div>

    <div id="footer">
    <ui:insert name="footer" >
    <ui:include src="/layout/footer.xhtml" />
    </ui:insert>
    </div>

    </div>

    </h:body>
    </html> 
```

试图将此模板继承到我的页面（testpage.xhtml）

```
 <?xml version="1.0" encoding="UTF-8"?>
   <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >
    <h:body>

    <ui:composition template="/layout/base.xhtml">
    <ui:define name="content">
    Default Page content!!!!
    <h:outputText value="Foo bar" style="green"/>
    </ui:define>

    </ui:composition>

    </h:body>

    </html> 
```

test.css 文件位于 webcontent/resources/style 文件夹下，css 文件内容如下

```
.green{
color:#0000FF;      
} 
```

现在的问题是，当我尝试运行测试页时，样式表正在添加到页面中（视图源能够识别），但它没有反映在 UI 中。

上面的代码有什么问题吗？对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T08:25:56.693

您应该使用`styleClass`属性（相当于`class`纯 HTML 的属性）

代替

```
<h:outputText value="Foo bar" style="green"/> 
```

和

```
<h:outputText value="Foo bar" styleClass="green"/> 
```

# asp.net - 如何禁用/启用链接按钮组

> ID：14793601
> 
> 赞同：0
> 
> 时间：2013-02-10T01:20:06.383
> 
> 标签：asp.net

单击其中一个链接按钮时，我需要禁用 4-5 个链接按钮。在一个链接按钮上单击禁用一组链接按钮，当会话变为空时，启用所有链接按钮回到启用模式。我尝试了几种方法，但都没有真正禁用链接按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:17:03.763

为所有链接按钮创建一个 OnClick 事件处理程序，代码如下所示：

```
 lnkBtn1.Enabled = lnkBtn2.Enabled = lnkBtnZ.Enabled = false; 
```

# javascript - 如何在一个地方编写一个导航栏并在所有页面中使用它，只需要 html/css/js

> ID：14793602
> 
> 赞同：1
> 
> 时间：2013-02-10T01:20:12.277
> 
> 标签：javascript, html, css

我敢肯定我记得这样做过一次，但不记得是怎么做的。

我想做的是在一个地方用html编写一个导航栏，让每个页面从文件中获取html代码，并在页面加载时将其添加到页面中。PHP 不工作（我怀疑我需要一台服务器才能让 PHP 工作，而我什至不打算使用）

就像是：

导航栏文件：

```
<div>
    other code...
</div> 
```

主网页文件：

```
<html>
    <header>
    </header>

    <body>
    </body>

    <div>
        put navbar file code here...
    </div>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:38:25.883

```
<iframe src="file_with_only_div_content.html" allowtransparency="true" frameborder="0"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:24:23.453

您的意思是[http://en.wikipedia.org/wiki/Server_Side_Includes](http://en.wikipedia.org/wiki/Server_Side_Includes)服务器端包含？

```
<!--#include virtual="../quote.txt" --> 
```

这些甚至不再支持了吗？

**为了让 Web 服务器识别启用 SSI 的 HTML 文件并因此执行这些指令，文件名应以特殊扩展名结尾，默认为 .shtml、.stm、.shtm，或者，如果服务器配置为允许这一点，设置文件的执行位。**

# php - 使用自动增量在mysql中创建一个喜欢系统？

> ID：14793604
> 
> 赞同：0
> 
> 时间：2013-02-10T01:20:22.217
> 
> 标签：php, mysql, auto-increment

我正在尝试使用 mysql 中的自动增量创建一个非常基本的系统。

基本上这个脚本插入`user_id`并自动将like列增加到1，我需要尝试做的是一旦`user_id`第一次插入了and like，然后我需要让我的脚本说如果结果已经存在更新否则插入？

有人可以告诉我如何做到这一点，谢谢：

```
<?php

require_once('includes/session.php');
require_once('includes/functions.php');
require('includes/_config/connection.php');

session_start();

    confirm_logged_in();

    if (isset ($_GET['to'])) {
    $user_to_id = $_GET['to'];

}

if (!isset($_GET['to']))
    exit('No user specified.');

$user_id = $_GET['to'];

$result1 = mysql_query("INSERT INTO ptb_likes (liked_id) VALUES (".$user_to_id.")");

if($result1) 
{ 

header("Location: {$_SERVER['HTTP_REFERER']}");

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:22:17.160

首先执行 SELECT 以查看 ptb_likes 是否包含您要插入的行。

一旦你知道它是否存在，你就可以选择下一步做什么。

# c# - C# 中的三层应用程序 - 放置数据和业务模型的位置

> ID：14793605
> 
> 赞同：5
> 
> 时间：2013-02-10T01:20:26.710
> 
> 标签：c#, class, design-patterns, architecture, n-tier-architecture

我正在用 C# 构建一个标准的三层应用程序

1 个前端控制台应用程序/但我可能会将其更改为 ASP.NET MVC 网页

2 业务逻辑层

3 使用连接到 SQL 数据库的实体框架的数据层/但这可能会更改为 windows azure

主要目的是展示一些客户数据。

存储在数据库中的客户具有以下字段 -

```
CustomerID
Firstname
Lastname
DateOfBirth
Othervalue1
Othervalue2
Othervalue3
Creationdate
Updatedate
IsDisabled //this represents "deleted" customers i.e. the app will never use deleted customers, but I want to keep them in the database anyway 
```

在中层，我只想要

```
CustomerID
Firstname
Lastname
DateOfBirth
Othervalue1
Othervalue2
Othervalue3
Updatedate 
```

在第一个应用程序的前端，我只会展示

```
CustomerID
Firstname
Lastname
DateOfBirth 
```

从从数据层加载客户（可能会改变）并在中间层然后在表示层（可能会改变）中使用该客户的角度来看，我如何正确实现 n 层应用程序？

我将客户模型放在哪里？我需要不止一个吗？我是否需要某个地方的 ICustomer 接口？

**项目详情** 该项目将由两个团队开发，一个位于美国，另一个位于东欧，团队成员将在 4 到 5 人之间。

该项目将不会使用一个遗留数据访问层。相反，我们将使用 Entity Framework 构建一个新的；我们需要设计和构建一个将在所有新应用程序中使用的数据层（对于这个应用程序，我们只需要客户表和一两个表）。其他项目将向该层添加其他表。

我正在使用 DI 注入 ICustomerRepository （请参阅这个[SO question](https://stackoverflow.com/questions/14785855/ninject-in-a-three-tier-application)）。但将实现存储库和工作单元模式。

我关心的是适当地分离层。在接下来的几个月中，我们将添加许多新项目，新的数据层将快速增长。我们也在考虑在某个时候迁移到 Azure，因此我希望能够交换实体框架数据层，而无需重写业务层和前端层。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T01:25:07.143

您有一个数据模型（数据库模式）、一个域模型和一个视图模型。

如果您的目标是解耦这些层，那么您应该在这三层中的每一层中都有代表 Customer 的不同类（但请参阅[@Joe](http://blog.ploeh.dk/2012/02/09/IsLayeringWorthTheMapping.aspx)在评论中提到的文章）。

您的数据访问技术将推动数据模型到领域模型的映射。如果您使用实体框架，它提供了在这两个模型之间进行映射的能力。

对于域模型到视图模型的映射，请查看[Automapper](http://automapper.codeplex.com/)用于域对象（例如业务对象）和视图模型之间的映射。

**更新**

根据您的新信息，我将分享我会做的事情。这当然不是唯一有效的方法。

给定一个分布式团队，明确的职责范围很重要。不同的人，在不同的时区，有不同的团队领导，将致力于代码。

鉴于基于旧数据库构建的新软件，您必须了解三个事实：

*   更改旧数据库以适应新软件的需求并不容易。
*   由于现有数据库的结构，新软件不应固有次优设计。
*   在您构建的下一个应用程序中可能需要会污染当前应用程序设计的数据。

我会做以下事情

*   创建表示旧数据库结构的数据传输对象 (DTO)。
*   使用[存储库和工作单元模式](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)为业务对象层提供对 DTO 的访问。
*   根据该应用程序的需要设计业务对象层（中间层，其类通常称为实体）。不要污染基于 DTO 的结构（最终是遗留 DB 的结构）的对象设计。
*   使用 Automapper 等技术来简化这两层之间的映射工作。
*   创建 UI 对象（在 MVC 术语中称为模型）表示给定 UI 屏幕（MVC 术语中的视图）将处理的数据。
*   根据 UI 模型与业务对象（实体）的紧密程度，您可能想要使用 Automapper，或者可能只想在自定义代码中填充它们。

同样，鉴于我的背景、经验和偏好，这就是我将如何处理它。这不是唯一有效的方法。

# css - 嵌套的 ul 在 IE 中不起作用

> ID：14793606
> 
> 赞同：0
> 
> 时间：2013-02-10T01:20:28.743
> 
> 标签：css, internet-explorer, list, nested, html-lists

我的嵌套 ul 在 firefox、chrome 和 safari 中渲染得很好，但在 IE 中却不行。它在“答案”链接之后立即停止显示内联。所有链接也变成蓝色并垂直堆叠。

```
<ul id="headernav">
    <li><a href="donate.php">Donate</a></li>
    <li><a href="answers.php">Answers</a>
    <ul>
        <li><a href="initiatives.php">Initiatives</a></li>
    </li>
    </ul>
    <li><a style="width:8.5em;" href="news.php"><span class="current">News & Events</span> </a></li>
    <li><a href="about.php">About Us</a>
    <ul class="linkarrow">
        <li><a href="leadership.php">Leadership</a></li>
    </ul>
    </li>
    <li><a href="contact.php">Contact</a></li>
</ul>

#headernav {
    width: 555px;
    padding: 0px;
    text-align:center;
    list-style-type:none;
    margin-left:auto;
    margin-right:auto;
}

#headernav li {
    float:left;
    position:relative;

}

#headernav li a {
    display: block;
    text-decoration: none;
    width:6em;
    height:35px;
    color:#2e2d2d;
    padding:0.2em 0.6em;
    padding-top:20px;
    margin-left:3px;
    font-size:14px;
    letter-spacing:1px;
    font-weight:400;

}

/*drop down styles*/

#headernav li ul {
    display:none;
}

#headernav li ul {
    text-align:center;
    position:absolute;
    top:50px;
    left:0;
    width:6em;
    font-size:14px;
    letter-spacing:1px;
    font-weight:500;
    height:30px;
    padding-left:10px;

}

#headernav ul li a {
    display:block;
    background:transparent;
    padding:0.3em 0.6em;
    width:6em;
} 
```

![问题截图](../Images/b45c61c5ff3529c7ba373347df1083d6.png)

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:25:35.037

问题是您的第一个嵌套 ul。您正在关闭“ul”之前包含的“li”。

这

```
<ul id="headernav">
    <li><a href="donate.php">Donate</a></li>
    <li><a href="answers.php">Answers</a>
    <ul>
        <li><a href="initiatives.php">Initiatives</a></li>
    </li>
    </ul>
    <li>
    //snap 
```

变成

```
<ul id="headernav">
    <li><a href="donate.php">Donate</a></li>
    <li><a href="answers.php">Answers</a>
    <ul>
        <li><a href="initiatives.php">Initiatives</a></li>
    </ul>
    </li>
    <li> 
```

# opencv - 如何在 wxPython 窗口中播放 Python OpenCV 2.4.3（numpy 数组）

> ID：14793610
> 
> 赞同：1
> 
> 时间：2013-02-10T01:20:42.417
> 
> 标签：opencv, numpy, wxpython

我正在尝试让我的网络摄像头视频显示在 wxPython 的 GUI 窗口中。到目前为止，我发现的所有解决方案都需要转换为 IPLImage。

我想知道你们是否没有任何简单的代码可以使用 cv2.VideoCapture 获取实时视频并在 wxPython 窗口中显示来自 numpy 数组的图像。

谢谢

# php - PHP 输入到 mysql 数据库

> ID：14793613
> 
> 赞同：1
> 
> 时间：2013-02-10T01:20:47.317
> 
> 标签：php, html, mysql, sql, row

我正在尝试将输入表单放入我的数据库中，但它不起作用。这是我的代码：

```
<?php

$host="localhost"; // Host name 
$username="removed"; // Mysql username 
$password="removed"; // Mysql password 
$db_name="removed"; // Database name 
$tbl_name="input"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// Get values from form 
$email=$_POST['email'];

// Insert data into mysql 
$sql="INSERT INTO $tbl_name(email) VALUES('$email')";
$result=mysql_query($sql);

// if successfully insert data into database, displays message "Successful". 
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='insert.php'>Back to main page</a>";
}

else {
echo "ERROR";
}
?> 

<?php 
// close connection 
mysql_close();
?> 
```

你好

```
<form class="form-signin" method="post" action="./php/email2db.php">
<input type="text" name="email" class="input-block-level" placeholder="Email address">
<button class="btn btn-primary" type="submit">Pass The Popcorn</button>
</form> 
```

你能帮我得到它，所以当他们把它拿出来时，它会进入数据库吗？我想要它，但不是这样，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T18:05:32.973

我认为您的查询应如下所示：

```
<?php

$host="localhost"; // Host name 
$username="removed"; // Mysql username 
$password="removed"; // Mysql password 
$db_name="removed"; // Database name 
$tbl_name="input"; // Table name 

// Connect to server and select database.
mysql_connect($host, $username, $password)or die("cannot connect"); 
mysql_select_db($db_name)or die("cannot select DB");
//Removed the " from $db_name, $host, $username, $password

// Get values from form 
$email=$_POST['email'];

// Insert data into mysql 
$sql="INSERT INTO ".$tbl_name." (email) VALUES(".$email.")";
//Here you have to concatenate the query from multiple parts, this is important
//And you cant use "$tbl_name(email)"
$result=mysql_query($sql);

// if successfully insert data into database, displays message "Successful". 
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='insert.php'>Back to main page</a>";
}

else {
echo "ERROR";
}
?> 

<?php 
// close connection 
mysql_close();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T18:12:47.520

你的代码应该是

```
<?php
$host="localhost"; // Host name 

$username="removed"; // Mysql username 
$password="removed"; // Mysql password 
$db_name="removed"; // Database name 
$tbl_name="input"; // Table name 

// Connect to server and select database.
$conn   =   mysql_connect($host, $username, $password)or die("cannot connect"); 
mysql_select_db($db_name,$conn)or die("cannot select DB");
//Removed the " from $db_name, $host, $username, $password
// Get values from form 
$email=$_POST['email'];
// Insert data into mysql 
$sql="INSERT INTO `".$tbl_name."` (`email`) VALUES('".$email."')";
//Here you have to concatenate the query from multiple parts, this is important
$result=mysql_query($sql);
// if successfully insert data into database, displays message "Successful". 
if($result)
{
    echo "Successful";
    echo "<br/>";
    echo "<a href='insert.php'>Back to main page</a>";
}

else 
{
    echo "ERROR";
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T18:15:37.193

通过使用`INSERT INTO $tbl_name(email) VALUES('$email')`，您基本上是在说您的表的名称是 $tbl_name(email) 原样，但事实并非如此。您需要将 sql 重写为 INSERT INTO ".$tbl_name"。(电子邮件) VALUES(".$email.")

# jquery - 单击按钮时隐藏按钮附近的 div

> ID：14793615
> 
> 赞同：0
> 
> 时间：2013-02-10T01:21:04.067
> 
> 标签：jquery, html, css

好的，所以我有这个 100% 高度和 100% 宽度的 div，我有按钮居中到那个 div。现在，当用户单击该按钮时。我希望 div 在按钮附近折叠并隐藏。这是我的代码。你也可以在 JS Fiddle 上看到

[http://jsfiddle.net/ZxB4Z/](http://jsfiddle.net/ZxB4Z/)

```
$('button').click(function(){
$("div").animate({
  left:'24%',
  top:'48%',
  opacity:'0',
  height:'0px',
  width:'0px'
},'slow');}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:33:36.483

使用边距而不是位置属性（上/左）：

```
$('button').click(function(){
    $("div").animate({
        marginLeft:'24%',
        marginTop:'48%',
        opacity:'0',
        height:'0px',
        width:'0px'
    },'slow');
}); 
```

或在您的 div 上应用绝对位置：

```
div { position: absolute } 
```

# android - android:onClick="onGroupItemClick" 不断崩溃

> ID：14793616
> 
> 赞同：1
> 
> 时间：2013-02-10T01:21:06.983
> 
> 标签：android, menu

这是一些不断崩溃的代码（书中的简化版本）。Android版本14。如果我删除该行：android：onClick =“onGroupItemClick”，就可以了。有谁知道为什么以及如何解决它。

谢谢

```
activity_menu_test.xml:
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/menu1"
        android:title="Item 1"/>
    <item
        android:id="@+id/menu2"
        android:title="Item 2">
        <menu>
            <group
                android:id="@+id/group1"
                android:checkableBehavior="single" >
                <item
                    android:id="@+id/group_item1"
                    android:onClick="onGroupItemClick"
                    android:title="Sub1"/>
                <item
                    android:id="@+id/group_item2"
                    android:onClick="onGroupItemClick"
                    android:title="Sub2"/>
                <item
                    android:id="@+id/group_item3"
                    android:onClick="onGroupItemClick"
                    android:title="Sub3"/>
            </group>
        </menu>
    </item>
</menu>

MenuTestActivity:
public class MenuTestActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_test);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_menu_test, menu);
        return true;
    }

    public void onGroupItemClick(MenuItem item) {   
        if (item.isChecked()) {
            item.setChecked(false); 
        } else {
            item.setChecked(true);
        }   
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {    
        Toast.makeText(this, item.getTitle(), Toast.LENGTH_LONG).show();
        return true;    
    }    
} 
```

java.lang.IllegalStateException：问题解析行：com.android.internal.net.NetworkStatsFactory.readNetworkStatsDetail(NetworkStatsFactory.java:247) 处的 com.android.internal.net.NetworkStatsFactory.readNetworkStatsDetail(NetworkStatsFactory.java:313) 处为空com.android.internal.os.BatteryStatsImpl.getNetworkStatsDetailGroupedByUid(BatteryStatsImpl.java:5734) 在 com.android.internal.os.BatteryStatsImpl.access$100(BatteryStatsImpl.java:76) 在 com.android.internal.os.BatteryStatsImpl$Uid .computeCurrentTcpBytesReceived(BatteryStatsImpl.java:2457) 在 com.android.internal.os.BatteryStatsImpl$Uid.getTcpBytesReceived(BatteryStatsImpl.java:2446) 在 com.android.internal.os.BatteryStatsImpl.writeSummaryToParcel(BatteryStatsImpl.java:5437) 在com.android.internal.os.BatteryStatsImpl.writeLocked（BatteryStatsImpl.java：4836) 在 com.android.server.am.ActivityManagerService.updateCpuStatsNow(ActivityManagerService.java:1600) 在 com.android.server.am.ActivityManagerService 的 com.android.internal.os.BatteryStatsImpl.writeAsyncLocked(BatteryStatsImpl.java:4818) $3.run(ActivityManagerService.java:1482) 原因：java.io.FileNotFoundException：/proc/net/xt_qtaguid/stats：打开失败：在 libcore.io.IoBridge.open(IoBridge. java:406) 在 java.io.FileInputStream.(FileInputStream.java:78) 在 java.io.FileReader.(FileReader.java:42) 在 com.android.internal.net.NetworkStatsFactory.readNetworkStatsDetail(NetworkStatsFactory.java:272 ) ... 10 更多原因：libcore.io.ErrnoException: open failed: ENOENT (No such file or directory) at libcore.io.Posix.open(Native Method) at libcore.io.BlockGuardOs。open(BlockGuardOs.java:98) 在 libcore.io.IoBridge.open(IoBridge.java:390) ... 13 更多

# php - 自定义贝宝支付的输入

> ID：14793620
> 
> 赞同：1
> 
> 时间：2013-02-10T01:21:30.140
> 
> 标签：php, html, paypal

我正在使用下面的贝宝表格。我进行了一些更改，以便可以获得一些自定义输入字段。我想要一个字段名称数量或数字，这将是一个下拉菜单。当用户从中选择一个选项并点击立即购买时，他/她将被重定向到贝宝页面，价格将显示为实际价格与数量的乘积。

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">  
                <input type="hidden" name="cmd" value="_xclick">  
                <input type="hidden" name="business" value="dsfddgdr@gmail.com">
                Ad Type:<input type="text" readonly="readonly" name="item_name" value="<?php echo $product; ?>"> <br/> 
                <!-- <input type="hidden" name="item_number" value="1">   -->
                <!-- <input type="text" name="Ad_Type" value="1"> -->
                Price:<input type="text" readonly="readonly" name="amount" value="$<?php echo $price; ?>"> 
                 <strong>Which tutorial are you donating for?</strong><br />  
                <select name="item_quantity">  
                  <option value="1">1</option>  
                  <option value="2">2</option>  
                  <option value="3">3</option>  
                </select>   
                <input type="hidden" name="no_shipping" value="0">  
                <input type="hidden" name="no_note" value="1">  
                <input type="hidden" name="currency_code" value="USD">  
                <input type="hidden" name="lc" value="AU">  
                <input type="hidden" name="bn" value="PP-BuyNowBF">  
                <input type="hidden" name="return" value="domain.com/success.php?ad_id=<?php echo $ad_id; ?>&user_id=<?php echo $user_id; ?>&ad_level=<?php echo $ad_level; ?>&ad_duration=<?php echo $ad_duration; ?>">  

                <input type="image" src="paypal_checkout_EN.png" border="0" name="submit" alt="PayPal - The safer, easier way to pay online.">  
                <img alt="" border="0" src="https://www.paypal.com/en_AU/i/scr/pixel.gif" width="1" height="1">  
            </form> 
```

![在此处输入图像描述](../Images/8ce281958785867ac0c089bd43299ee6.png)

我被困住了。它向我显示了选择字段，但我如何使它在贝宝页面中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:39:29.630

PayPal页面仅用于显示提供的信息，不能用于更改金额/数量等。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:51:56.283

更改`item_quantity`为`quantity`.

# numpy - 如何将.txt内容导入python 2.7中的一行代码

> ID：14793621
> 
> 赞同：0
> 
> 时间：2013-02-10T01:21:30.797
> 
> 标签：numpy, python-2.7, matplotlib, pandas

我是 Python 新手，我尝试搜索是否有其他类似的问题，但似乎没有。我真的希望我的问题不是荒谬的，以及为什么我没有找到其他人。

我有 .txt 文件，其中包含 500 个股票代码，我必须将其包含在我的代码中以创建事件矩阵。我想知道是否有一种方法可以以某种方式将符号导入我的代码行，而无需输入每个单独的符号。如果这有所不同，我会在终端外使用 Python。

也在 Ubuntu 12.04 上的虚拟机上运行

这行代码看起来像这样。

符号 = [""]

也与原始问题有些无关，示例代码显示了这一点。

print ' ***'姓名'*** ' + "读取数据"

下划线是否代表其他东西，它只是在 .py 中显示，它似乎在尝试时会运行错误。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:47:10.560

这假设您的文件是形式

```
AAPL
MSFT
IBM 
```

等等。并且您的文件名为`tickers.txt`.

在`Pandas`做

```
import pandas as pd
tickers = pd.read_csv('tickers.txt', names=['Tickers']) 
```

这会将文件加载到数据框中。

在`Numpy`做

```
import numpy as np
tickers = np.loadtxt('ticker.txt', dtype=str) 
```

这会将文件加载到一个 numpy 数组中。

上述解决方案有效，但对于像您正在做的简单任务来说，这可能是矫枉过正。我会使用 vanilla python 来完成这项任务。

```
with open('tickers.txt') as f:
    tickers = f.readlines() 
```

# laravel - Eloquent 查询生成器 - hasOne 错误

> ID：14793622
> 
> 赞同：3
> 
> 时间：2013-02-10T01:21:38.560
> 
> 标签：laravel, eloquent, laravel-3

这让我发疯了。我有 2 张桌子；

1.  解释和
2.  交易。

在我拥有的模型文件夹`transaction.php`中`explanation.php.`

交易.php：

```
<?php

class Transaction extends Eloquent {

    public function explanation()
    {
        return $this->hasOne('Explanation');
    }

} 
```

解释.php

```
<?php

class Explanation extends Eloquent {

} 
```

我只是打电话

```
Transaction::find(18)->explanation()->first(); 
```

我收到的错误是

> Query 类上没有定义方法 [hasone]

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T01:25:36.107

刚刚想通了，正在阅读错误的文档..

**Laravel 4.x**

```
$this->hasOne(); 
```

**Laravel < 4.x**

```
$this->has_one(); 
```

# php - 如果 pagename 然后运行语句

> ID：14793629
> 
> 赞同：0
> 
> 时间：2013-02-10T01:22:32.520
> 
> 标签：php, mysql, sql, if-statement, mysqli

我正在建立一个博客并有两个表格文章和类别，并且我正在加入这些表格，但是如果我单击类别链接，我想要做的是只显示类别。我在链接中传递了 category_id，但如果页面链接类似于 blog.php?=category_id，我不知道如何只显示类别。我将在 URL 中有 category_id 编号我只是不知道如何仅显示该类别，我知道 SQL 语句仅显示类别但我不知道如何运行该语句，如果URL 包含 the?=category_id 并且不运行按日期显示所有文章的原始 SQL 语句。我尝试根据页面名称执行 if 和 else 条件，但没有工作。

```
<?php
    connect_to_db();

    $url = $_SERVER['SCRIPT_NAME'];
    $pos = strrpos($url,"/");
    $pagename = substr($url,$pos+1);

    if($pagename == ("blog.php")) {
    $sql = "SELECT article_id, title, body, date, categories.category, author FROM articles
            LEFT JOIN categories ON articles.category = categories.category_id ORDER BY article_id DESC LIMIT 4";
    }
    elseif($pagename == ("blog.php?=1")) {
    $sql = "SELECT article_id, title, body, date, categories.category, author FROM articles
            LEFT JOIN categories ON articles.category = categories.category_id WHERE category_id = 1";
    }
    $result = query($sql);
    if($result===false) {
        echo "query failed";
    }
    else {
        while( $data = mysqli_fetch_array($result))
    {
?>     
    <article>
        <h3 class="title-medium"><?php echo $data['title']; ?></h3>
        <p class="caption-medium"><?php echo $data['author']; ?> <?php echo $data['date']; ?> <?php echo $data['category']; ?></p>
        <img src="img/blog-post-1.jpg" alt="">
        <p><?php echo substr($data['body'],0,450)." ..." ?></p>
        <a href="blog-post.php?id=<?php echo $data['article_id']; ?>"><p class="caption-medium highlight">Read More</p></a>
        <hr>
    </article>

    <?php
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:03:12.073

`cat_id`在查询字符串中使用，例如：

```
blog.php?cart_id=1 
```

您可以从中提取它`$_GET[]`或`$_REQUEST[]`

```
if (isset($_GET['cat_id']))
    $category_id = intval($_GET['cat_id']);
else
    $category_id = 0;

if($category_id > 0) { //Non-Zero +ve value
    $sql = "SELECT article_id, title, body, date, categories.category, author
            FROM articles LEFT JOIN categories ON articles.category = categories.category_id
            WHERE category_id = $category_id";
} else { //Zero
    $sql = "SELECT article_id, title, body, date, categories.category, author
            FROM articles LEFT JOIN categories ON articles.category = categories.category_id
            ORDER BY article_id DESC LIMIT 4";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:05:50.930

正如您在评论中被告知的那样，您必须只使用参数，而不是整个请求。

```
connect_to_db();

$where = '';
if (isset($_GET['cat_id'])) {
    $where = "WHERE category_id = ".intval($_GET['cat_id']);
}
$sql = "SELECT article_id, title, body, date, categories.category, author 
        FROM articles LEFT JOIN categories 
        ON articles.category = categories.category_id 
        $where ORDER BY article_id DESC LIMIT 4";

$result = query($sql); 
```

# backbone.js - 从其他视图中创建时视图不呈现

> ID：14793630
> 
> 赞同：0
> 
> 时间：2013-02-10T01:22:34.087
> 
> 标签：backbone.js

我正在尝试制作一个使用 Backbone 呈现视图以进行用户身份验证的小应用程序。这是一个小提琴演示[http://jsfiddle.net/mjmitche/RRXnK/182/](http://jsfiddle.net/mjmitche/RRXnK/182/)

初始化后，三个链接出现在 AuthView 放置的 div“span6 authentication”中。

```
<div class="span6 authentication">
    <div class="row authentication">
    <a href="#login" id="login" data-toggle="tab" data-content="login">Login</a>
    <a href="#signup" id="signup" data-toggle="tab" data-content="signup">Sign up</a>
    <a href="#retrieve-password" id="retrievePassword" data-toggle="tab" data-content="retrievePassword">Retrieve password</a>      
</div> 
<div class="content" id="auth-content">I want the sign up view to appear in this div if I click on the Sign Up link</div>
</div> 
```

AuthView 中设置了三个点击事件

```
 events: {
      'click  .row.authentication a#login': 'login',
      'click  .row.authentication a#signup': 'signup',
      'click  .row.authentication a#retrievePassword': 'retrieve'
  }, 
```

例如，如果我单击注册（如小提琴中所示），它会创建 RegistrationView 并尝试放入#auth-content div

```
 signup: function(){
        alert("from signup method of auth view");
        var signUpView = new UserRegistrationView({model : this.model}).render().el;
        alert(signUpView);
      $('#auth-content').html(signUpView); 
    }, 
```

但是，它不起作用。正如您在小提琴中看到的，第二个警报没有被触发。这是注册视图。

```
var UserRegistrationView = Backbone.View.extend({

    initialize:function () {
      _.templateSettings = {
        interpolate : /\{\{=(.+?)\}\}/g,
        escape : /\{\{-(.+?)\}\}/g,
        evaluate: /\{\{(.+?)\}\}/g
    };
        var template = $('#signup_template').html();
        this.template = _.template(template);

    }, 
    render: function(){
        alert("render of Registration View");
        $(this.el).html(this.template());
    }

}) 
```

谁能指出这个设置可能存在什么问题。对于它的价值，JSHint 说代码是有效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:52:06.333

`return this;` 在`render()`函数中添加一个`UserRegistrationView`

见这里[http://jsfiddle.net/RRXnK/188/](http://jsfiddle.net/RRXnK/188/)

这是因为您正在链接`render`和访问该`el`属性

# c# - 实体框架数据库优先不创建正确的模型

> ID：14793633
> 
> 赞同：0
> 
> 时间：2013-02-10T01:22:45.617
> 
> 标签：c#, entity-framework, code-first, database-first

我正在尝试在 EF 5.0 中使用数据库优先方法，但它没有为我创建正确的模型。

这是我的数据结构：

**论坛**

![论坛](../Images/76932c1c322fa483774e8e9c0d690484.png)

**用户**

![用户](../Images/e1f6727bdd0fe62b620634ee3c32a65d.png)

**帖子**

![帖子](../Images/31b03b460b3ca88b95f2e2f2a597e9f2.png)

**关系** ![关系](../Images/1ba7cab663ad54f8ee619fc62f70838c.png)

**问题**

`Forums`主要问题是与表中的一对一关系`Posts`。该模型不将`ParentForumID`and识别为可为空值，因此在表 (和)`ReplyTo`之间创建了一对多的关系。`Forum-Forum``Post-Post`

此外，当尝试手动更改为一对一关系时，我收到此错误：

> *错误 113：多重性在关系“FK_Forums_Forums”中的角色“Forum1”中无效。因为从属角色属性不是关键属性，所以从属角色的多重性的上限必须是*。...\模型\实体\模型1.edmx*

Visual Studio 中的模型（编辑前）

![该模型](../Images/b432fd5ee907e039a9f344210075b4a3.png)

我尝试使用代码优先的方法，但它产生的数据库结果很差，然后我意识到我可以配置数据库创建的行为，但我找不到一个好的资源来解释如何正确配置它。

我宁愿使用数据库优先的方法，因为它可以让我自定义我的数据库，但它仍然会生成一个包含许多错误的不正确模型。

所以我的问题是：

1.  这样做的最佳方法是什么？

2.  哪里可以先学代码，先学数据库？

3.  为什么我的视觉工作室会产生这样的模型？

4.  为什么当我尝试更改模型以适应我的需要时，它会给我前面描述的错误？

5.  我在哪里可以了解迁移工具？我可以使用哪些功能来配置数据库创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:42:39.610

问题 2 - 5：您可以通过多种方式学习。有些人更喜欢购买几十本关于 EF with C# Programming 的非常好的书籍中的一本。

其他人更喜欢上课来引导他们使用整个实体框架技术。我在这样一家公司工作，我们的课程很棒。我不是来推一个培训公司而不是另一个，所以我会提出一个与我的雇主分开的推荐~Plural Sight。它们非常好，您可以[在此处](http://pluralsight.com/training/Courses/TableOfContents/ef41-code-first)找到代码优先 EF 方法培训计划的链接。这是一个付费课程。

我的方法包括只是挖掘尝试不同的模型，因此我了解了 EF Design Surface 的工作原理。结果，我开始喜欢使用数据库优先的建模方法，和你一样。只要挂在那里，继续使用工具，尝试不同的东西。

我也许能在有限的基础上帮助你。我不能告诉你为什么 EF 创建了它所做的模型，因为我不知道你做了什么才能走到这一步，现在可以了。如果您需要一些指导，请随时通过 StackOverflow 与我联系。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:31:22.533

问题1：视情况而定。

如果您编写了代码，或者您更喜欢先编写对象，那么就走那条路。

另一方面，如果您更喜欢先执行 DB 模式，那么请务必这样做。

没关系，所以选择对你来说最舒服的。

# java - 从字符串中提取模式？

> ID：14793634
> 
> 赞同：1
> 
> 时间：2013-02-10T01:22:48.247
> 
> 标签：java, design-patterns

好的，所以说我有一句话：`BEER`

我想创建一个这样的字符串：`- E E -`

请注意，除 之外的所有字母`E`都已替换为 a `-`，并且在每个字符之间引入了一个空格。我可以很容易地做到后者，而不是前者。

此外，不知道不被消隐的字符可能会有所帮助。我必须根据`Set`角色做出决定。

所以，如果我有一个`Set`单词：`BEER HERE HAIR`，并且我不想`E`被空白，我的输出应该是：`- E E -` `-E - E` `- - - -`。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:24:35.567

遍历字符串中的字符。

对于每个字符，如果它在集合 setOfCharactersToNotBlankOut 中，则打印该字符。如果不是，则打印`-`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:51:46.477

尝试

```
String s = "BEER HERE HAIR";
s = s.replaceAll("[^E ]", " - ");
System.out.println(s); 
```

印刷

```
 - EE -  - E - E - - - - 
```

# c - 子进程不会在 C 程序中死掉

> ID：14793636
> 
> 赞同：1
> 
> 时间：2013-02-10T01:22:53.600
> 
> 标签：c, fork, pipe, stdin, wait

我正在编写一个 C 程序，它将来自 STDIN 的输入解析为单词，生成由 numsorts 变量指定的多个排序过程，以循环方式将单词传递给每个排序过程，并发送排序的输出到标准输出。

如果指定的排序进程数为 1，我的程序将按预期工作并干净退出，但如果排序进程数大于 1，排序子进程不会死亡，并且我的程序会卡住等待它们。对我来说，最奇怪的部分是，如果我打开一个单独的终端窗口并杀死除 1 之外的所有孩子，最后一个孩子会立即自行死亡并且程序干净地退出。

这是我的解析器代码（管道文件描述符存储在二维数组中）：

```
void RRParser(int numsorts, int **outPipe){ //Round Robin parser
    int i;
    char word[MAX_WORD_LEN];

    //Close read end of pipes
    for(i = 0; i < numsorts; i++){
        closePipe(outPipe[i][0]);
    }

    //fdopen() all output pipes
    FILE *outputs[numsorts];
    for(i=0; i < numsorts; i++){
        outputs[i] = fdopen(outPipe[i][1], "w");
        if(outputs[i] == NULL)
            printf("Error: could not create output stream.\n");
    }

    //Distribute words to them
    i = 0;
    while(scanf("%[^,]%*c,", word) != EOF){
        strtoupper(word);
        fputs(word, outputs[i % numsorts]); //round robin
        fputs("\n", outputs[i % numsorts]); //sort needs newline
        i++;
    }

    //Flush the streams:
    for(i=0; i < numsorts; i++){
        if(fclose(outputs[i]) == EOF)
            printf("Error closing stream.\n");
    }
} 
```

这是生成排序过程的代码（PukeAndExit() 只是打印出错误消息并退出）：

```
int *spawnSorts(int numsorts, int **inPipe){
    //returns an array containing all the PIDs of the child processes
    //Spawn all the sort processes
    pid_t pid;
    int i; 
    int *processArray = (int *)malloc(sizeof(int) * numsorts);
    for(i = 0; i < numsorts; i++){ 
        switch(pid = fork()){
            case -1: //oops case
                    PukeAndExit("Forking error\n");
            case 0: //child case
                //Bind stdin to read end of pipe
                closePipe(inPipe[i][1]); //close write end of input pipe
                if(inPipe[i][0] != STDIN_FILENO){ //Defensive check
                    if(dup2(inPipe[i][0], STDIN_FILENO) == -1)
                        PukeAndExit("dup2 0");
                    closePipe(inPipe[i][0]); //Close duplicate pipe
                }
                execlp("sort", "sort", (char *)NULL);
               break;
            default: //parent case
                processArray[i] = pid;
        }
    }
    return processArray;
} 
```

在 main() 的末尾，这是等待排序进程终止的代码：

```
for(i=0; i<numsorts; i++){ //wait for child processes to die. 
    wait(NULL);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:03:12.377

没关系，我想通了。该错误实际上是在我生成管道的函数中。一旦我切换到在我的 spawnSorts 过程中创建管道，一切正常。以前，我在一个单独的函数中生成一组管道。我不确定为什么这现在有效，但确实有效。

旧的 generatePipes 函数：

```
int **generatePipesArray(int numpipes){ //returns a 2-dimensional array of pipes
        int **pipesArray = (int **) malloc(sizeof(int *) * (numpipes));
        int i;
        for(i = 0; i < numpipes; i++){
                pipesArray[i] = (int *) malloc(sizeof(int) * 2);
                createPipe(pipesArray[i]);
        }
        return(pipesArray);
} 
```

新功能：

```
int **generatePipesArray(int numpipes){ //returns an empty 2-dimensional array
        int **pipesArray = (int **) malloc(sizeof(int *) * (numpipes));
        int i;
        for(i = 0; i < numpipes; i++){
                pipesArray[i] = (int *) malloc(sizeof(int) * 2);
                //not creating pipes here anymore
        }
        return(pipesArray);
} 
```

添加到 spawnSorts 的代码：

```
int *spawnSorts(int numsorts, int **inPipe, int **outPipe){
//returns an array containing all the PIDs of the child processes
//Spawn all the sort processes
pid_t pid;
int i; 
int *processArray = (int *)malloc(sizeof(int) * numsorts);
for(i = 0; i < numsorts; i++){
     //new code here:
    createPipe(inPipe[i]); 
```

# iphone - 尝试在 Xcode 4.6 中使用 AudioToolbox 播放声音时出错

> ID：14793640
> 
> 赞同：0
> 
> 时间：2013-02-10T01:23:19.780
> 
> 标签：iphone, ios, objective-c, audio, audiotoolbox

这是我一段时间以来一直试图解决的问题。我在尝试使用 AudioToolbox 框架为 iOS 制作的应用程序的头文件中出现错误。这是代码：

```
 #import <iAd/iAd.h>
    #import <UIKit/UIKit.h>
    #import <AudioToolbox/AudioToolbox.h>
    #import <iAd/ADBannerView_Deprecated.h>
    #import <Foundation/Foundation.h>
    #import <AVFoundation/AVFoundation.h>

    @interface ViewController : UIViewController <ADBannerViewDelegate> {

    ADBannerView *adView;
    BOOL bannerIsVisible;

    }

    @property (nonatomic, assign) BOOL bannerIsVisible;

    - (IBAction)cstring:(id)sender {

    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"CString",         CFSTR ("caf"), NULL);
UInt32 soundID;
AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
AudioServicesPlaySystemSound(soundID);

    }

    @end 
```

此外，声音文件位于 Supporting Files 文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:45:23.840

啊，我看到了问题。

您将函数*声明*放入 .h（或头文件）文件中，这是您的“ `@interface`”，而实际代码将放入具有关键字“ `@implementation`”的 .m 文件中。

看起来您只是将代码放在错误的位置。

# python - 尝试压缩静态文件时没有模块错误

> ID：14793641
> 
> 赞同：0
> 
> 时间：2013-02-10T01:23:29.937
> 
> 标签：python, node.js, less, uglifyjs

我正在尝试使用节点压缩我的静态文件并不断收到无模块错误

```
Basil-MBP:syte Basil$ python compress.py
Traceback (most recent call last):
  File "compress.py", line 13, in <module>
    from django.conf import settings
ImportError: No module named django.conf 
```

这是我的 compress.py 文件的链接： [https ://github.com/bsiddiqui/bsiddiqui.com/blob/master/syte/compress.py](https://github.com/bsiddiqui/bsiddiqui.com/blob/master/syte/compress.py)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T14:46:14.990

django 在你的 python 路径上可用吗？你的环境被激活了吗？

# unicode - HTML Agility Pack 编码错误

> ID：14793650
> 
> 赞同：1
> 
> 时间：2013-02-10T01:24:55.687
> 
> 标签：unicode, encoding, character-encoding, html-agility-pack

我试图解析[http://www.wein-wg.de/wwg/rheinhessen/worms-pfeddersheim/weingut-goldschmidt/](http://www.wein-wg.de/wwg/rheinhessen/worms-pfeddersheim/weingut-goldschmidt/)但无法获得正确的字符集。该网站使用 iso-8859-1。不知何故，所有 unicode 字符都显示为？在 Visual Studio 中。

是否有可能将其转移到 Visual Studio 或其他任何地方的正确字符集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:20:53.090

```
using HtmlAgilityPack;

HtmlDocument doc;
HtmlWeb web = new HtmlWeb();

private void getPage(string url)
{
    web.OverrideEncoding = Encoding.GetEncoding("iso-8859-1");
    doc = web.Load(url);
    webBrowser1.DocumentText = doc.DocumentNode.OuterHtml;
}

getPage("http://www.wein-wg.de/wwg/rheinhessen/worms-pfeddersheim/weingut-goldschmidt/"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-20T15:09:32.160

解决了：

```
HtmlWeb Webget = new HtmlWeb();
HtmlDocument doc = new HtmlDocument();
Webget.AutoDetectEncoding = false;
Webget.OverrideEncoding = Encoding.UTF8;

doc_tmp.OptionOutputAsXml = true;
doc_tmp.OptionReadEncoding = true;
doc_tmp.OptionFixNestedTags = true;
doc_tmp.OptionDefaultStreamEncoding = Encoding.UTF8;

doc_tmp.LoadHtml(tmp.InnerHtml);
doc_tmp.Save(Console.Out); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-21T09:54:23.540

另一种方式：

```
 var url = "https://www.elmundo.es/espana/2019/09/19/5d835eedfdddff788e8b45bd.html";
 var web = new HtmlWeb();
 web.OverrideEncoding = Encoding.GetEncoding("iso-8859-1");

 var doc = web.Load(url); //.OptionDefaultStreamEncoding = Encoding.UTF8; 

 HtmlNodeCollection nodes = doc.DocumentNode.SelectNodes("//p");

 foreach (var node in nodes)
 {

   txt_contenido.AppendText(node.InnerText + "\n" );

 } 
```

再见

# javascript - 无法提交表单

> ID：14793658
> 
> 赞同：0
> 
> 时间：2013-02-10T01:25:53.797
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, model-view-controller

我想根据某些参数创建一个新对象。

在我的 new.html.haml

```
%table
   %thead
      %tr
        %td
          = f.label: type
         %td
           = select_tag :question_type, options_for_select
    %tbody#content 
```

javascript:

```
$('#question_type').change(function(){
     $.ajax({
        data: { question_type: $(this).val() },
        url: window.location.href,
        dataType: 'script'
     });
  }); 
```

在我的 new.js.haml

```
$('#content').html("#{escape_javascript(render(:partial => "question_form"))}"); 
```

在`_question_form.html.haml`

```
= form_for @question, :url => {:action => "create"} do |f|
  %tr
    %td{:style => 'text-align:right;'}
      = f.label :name
    %td
      = f.text_field :name
  %tr
    %td
    %td
      = f.button :Submit, :value => 'Create' 
```

在我的控制器中

```
def new
   @question = Question.new

   respond_to do |format|
     format.html
     format.js
   end
  end

  def create
   @question.save

   respond_to do |format|
     format.html (redirect_to questions_path)
     format.js
   end
  end 
```

一切正常，但输入问题名称后我无法提交表单。如何让这个表格提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:12:32.030

问题在于您的html结构。你应该把表格放在桌子外面。

```
= form_for @question do |f|
  %table 
```

请注意，这将提交您可以在创建操作中忽略的问题类型

更新：

```
# new.html.haml
#form-content= render 'question_form'

# _question_form.html.haml
= form_for @question, :url => {:action => "create"} do |f|
  %table
    %thead
      %tr
        %td= f.label: type
        %td= select_tag :question_type, options_for_select
    %tbody
      - if params[:question_type].present?
        %tr
          %td{:style => 'text-align:right;'}= f.label :name
          %td= f.text_field :name
        %tr
          %td
          %td= f.button :Submit, :value => 'Create'

# new.js.haml
$('#form-content').html("#{escape_javascript render("question_form")}"); 
```

# java - 工具包和paintComponent 不能一起工作

> ID：14793667
> 
> 赞同：0
> 
> 时间：2013-02-10T01:27:06.843
> 
> 标签：java, multithreading, swing

要初始化我的图像，我有：

```
imageWater = Toolkit.getDefaultToolkit().getImage("water5.gif"); 
```

在我的 paintComponent() 方法中，我有这样的东西：

```
g.drawImage(imageWater, 50, 50, 50, 50, this); 
```

但是，如果我将 imageWater 的引用更改为与 water5.gif 不同的文件，例如 water6.gif，paintComponent() 方法中的其他任何内容都不起作用，即使是那些与 imageWater 完全无关的文件。我已经尝试更改变量和引用，但在我将那个确切的文件替换到那个确切的位置之前，没有任何效果。我不明白为什么会这样。

我的理论是，我一直在使用的 thread.sleep 在paintComponent（或任何一般的gui）上表现不佳，而且我之前只是因为任何原因而变得幸运。我犹豫是否要对此进行测试，因为我在整个文档中有很多 thread.sleep() 并且不知道如何替换它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:43:47.893

*“我的理论是，我一直在使用的 thread.sleep 在paintComponent（或任何一般的gui”中表现不佳）*是正确的。

事实上，您没有为我们提供一个工作示例来查看，这使得您很难理解您正在做什么或您想要实现的目标。

Yu可能会喜欢看看

*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   [如何使用摆动计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

有关该主题和可能的解决方案的更多信息

# php - 使用 JQuery UI 时如何将 JavaScript 变量发送到另一个页面

> ID：14793669
> 
> 赞同：0
> 
> 时间：2013-02-10T01:27:15.313
> 
> 标签：php, javascript, jquery

嘿伙计们所以我有以下内容：

```
$(document).ready(function () {
    $(".NotesAccessor").click(function () {
       var notes_name = $(this).parent().prev().prev().prev().prev().prev().prev().prev().prev().html();
      run();
    });
}); 
```

当有人单击该属性时，这将获得一个名称，然后从那里转到打开并启动对话框的此函数：

```
function run(){
    var url = '/pcg/popups/grabnotes.php';
    showUrlInDialog(url);
}

function showUrlInDialog(url)
    {
      var tag = $("#dialog-container");
      $.ajax({
        url: url,
        success: function(data) {
          tag.html(data).dialog
          ({
              width: '100%',
                modal: true
          }).dialog('open');
        }
      });
    }

function update()
    {
        $.ajax({
        url: '/PCG/termsofservice/accepted.php',
        success: function() {
            $("#dialog-container").dialog( 'close' );

            }
          });

    }

function closeNotes()
    {
        $("#dialog-container").dialog( 'close' );
    } 
```

那么将变量 notes_name 交给在 Jquery UI 中打开的文件中的 PHP 变量？还是我必须寄过去？我不确定该怎么做。

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:32:12.583

jQuery的`$.ajax()`函数有一个传递数据的方法：

```
$.ajax({
  type: "POST",
  url: '/PCG/termsofservice/accepted.php',
  data: { /* data object goes here */ },
  success: function() {
      $("#dialog-container").dialog( 'close' );
  },
  dataType: dataType
}); 
```

文档：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - 斐波那契数列

> ID：14793670
> 
> 赞同：0
> 
> 时间：2013-02-10T01:27:16.560
> 
> 标签：java

我对下面的代码有点难以理解。我已经计算出每个循环的每个变量的值，并且我了解每个变量的值在每次循环后如何变化，但我对 int a = b; 的变化方式感到困惑。表示前两个值的总和。我被这个问题困扰了很长时间，只有通过反复试验才能解决问题。

我真的不明白 int a = b; 表示前两个值的总和。我确信，因为 int c = a + b; 对变量 a 和变量 b 求和，这是我想在程序中打印的变量。你能解释一下 int a 如何表示前两个值的总和，以及为什么 int c 不表示。

```
public class Fibonacci extends ConsoleProgram{
   public void run(){
   int i = 0; 
   int a = 0;
   int b = 1; 

   while ( i <= 12) {

     println(a);
     i++;
     int c = a + b; 
     a = b; 
     b = c; 
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T01:54:57.877

我喜欢把它想象成一个楼梯：

```
 0
0 + 1 = 1
    1 + 1 = 2
        1 + 2 = 3
            2 + 3 = 5
                3 + 5 = 8
                    5 + 8 = 13 
```

任意步骤如下所示：

```
a + b = c
    b + c = d 
```

一步之后，`c`又像又像。但是和呢？由于您的解决方案是迭代的，您只需说成为并在循环中再次重复该过程：`b``b``a``a``d``a``d`

```
a + b = c
|   b + c = a
|___________| 
```

或在代码中：

```
int a = 0;
int b = 1;
int c = 0;

while (true) {
    c = a + b;  // `a + b = c` isn't valid, so you have to flip it around.
    a = b;      // `b` "becomes" `a`
    b = c;      // `c` "becomes" `b`
    c = a;      //  You don't need this step because `c` is just a temp variable
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T01:31:25.033

所以这个程序中发生的事情是：

a = 0, b = 1

c 设置为它们的总和，= 1

a 设置为 b, = 1

b 设置为 c, = 1

a = 1, b = 1

c 设置为它们的总和，= 2

a 设置为 b, = 1

b 设置为 c, = 2

a = 1, b = 2

c 设置为它们的总和，= 3

a 设置为 b, = 2

b 设置为 c, = 3

a = 2, b = 3

c 设置为它们的总和，= 5

a 设置为 b, = 3

b 设置为 c, = 5

a = 3, b = 5

... 等等。你应该明白了:)

# phantomjs - casperjs 假快闪晚餐

> ID：14793671
> 
> 赞同：1
> 
> 时间：2013-02-10T01:27:36.483
> 
> 标签：phantomjs, casperjs

据我所知，casperJS 和 phantomJS 不再支持 flash。是否有可能在 capserJS 中伪造 Flashsupport，所以我没有收到任何关于 flash 没有运行等的警告......

如果有人有指针就好了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T07:09:02.427

我只有在开始使用旧版本的 phantomjs 1.4.0 时才能实现 Flash 支持

# android - 在另一个应用程序中向我自己的 ContentProvider 请求读取权限

> ID：14793672
> 
> 赞同：6
> 
> 时间：2013-02-10T01:27:37.857
> 
> 标签：android, android-contentprovider, runtime-error

在一个应用程序中，我在我的 AndroidManifest 中声明了以下内容提供程序：

```
 <provider android:name="com.example.MyProvider"
              android:label="@string/provider_name"
              android:authorities="com.example"
              android:readPermission="com.example.permission.READ"
    /> 
```

另一个应用程序请求使用它的权限：

```
<uses-permission android:name="com.example.permission.READ" /> 
```

但是当运行这段代码时：

```
 ContentResolver resolver = this.context.getContentResolver();
    Cursor results = resolver.query(BaseballCardContract.CONTENT_URI, BaseballCardContract.PROJECTION, null, null, null); 
```

我收到以下错误消息：

> E/DatabaseUtils(1009): java.lang.SecurityException: Permission Denial: 从 pid=996 读取 bbct.android.common.BaseballCardProvider uri content://bbct.android.baseballcard/baseball_cards，uid=10046 需要 com.example.permission .READ 或 grantUriPermission()

据我所知，我正在请求所需的许可。我在这里想念什么？我还需要看什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T13:11:09.200

在定义您的 ContentProvider 的应用程序中，您是否还定义了您需要/请求的权限（在您的其他应用程序中）？像这样（在根`<manifest/>`标签内）：

```
<permission android:name="com.example.permission.READ" /> 
```

一般来说，您需要：

1.  在您的应用程序清单文件之一中定义权限
2.  在您的应用程序的任何清单文件中请求权限，对于希望获得权限的应用程序
3.  在您希望使用此权限保护的任何组件中要求此权限，例如活动、服务或内容提供者（读取、写入，两者，特定的子 URI 等）

编辑：所以只是为了 100% 清楚，通过在你的 ContentProvider 中要求它来“隐式”定义一个权限是不够的。您必须在应用程序的清单文件中（在`<manifest/>`标签内）明确定义它。

# api - 如何验证 oauth 签名或请求？

> ID：14793675
> 
> 赞同：2
> 
> 时间：2013-02-10T01:27:57.390
> 
> 标签：api, oauth, restful-authentication

客户端正在使用 oauth 签署他们的请求并调用我的服务器，我知道客户端的 oauth 密钥和秘密，那么我如何验证调用来自实际用户？我应该计算与请求一起发送的所有参数的签名并将其与请求中的签名进行比较吗？我正在使用 singpost 库。

谢谢，任何提示都会非常有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:26:47.510

可以供将来参考-验证签名，这就是我所做的：

> 解析传入请求标头中的所有参数，并使用所有这些参数和我自己的消费者凭据再次计算签名，然后与传入的签名进行比较。这对我来说很痛苦，因为没有合适的图书馆可以轻松地做到这一点，我必须自己写......

# racket - 需要 Racket 中的数学/基础问题

> ID：14793682
> 
> 赞同：3
> 
> 时间：2013-02-10T01:28:31.437
> 
> 标签：racket, require

为什么第一个有效，第二个无效？

```
(require/typed (planet williams/science/random-source) [random-integer (Integer -> Integer)])
(require/typed math/base [random-integer (Integer Integer -> Integer)]) 
```

第二个产生一个错误，告诉我在我的收藏文件夹中没有这样的数学/基础文件或目录。我的球拍发行版（v 5.3）是否有可能遗漏了这一点？如果是这样，出于什么原因？我将如何最好地解决这个问题？

或者我只是在这里犯了一个真正的愚蠢错误？抱歉所有的菜鸟问题...

我的尝试基于[http://docs.racket-lang.org/math/base.html?q=Random](http://docs.racket-lang.org/math/base.html?q=Random "即（需要数学/基础）")

哦，我确实在 OSX 上运行 64 位发行版，如果相关的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T01:38:28.410

我没有安装模块。我在 5.3 上，该模块仅从 5.3.2 开始存在

# c - RegSetValueEx 返回 ERROR_SUCCESS 但未显示任何值

> ID：14793683
> 
> 赞同：2
> 
> 时间：2013-02-10T01:28:39.530
> 
> 标签：c, windows, winapi, registry

我正在尝试设置一个注册表值，`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`以使我的应用程序在启动时运行。以下函数正在返回`TRUE`，但该值未显示。

```
BOOL InstallRunOnStartup(const char* applicationName)
{
  HKEY key;
  char filePath[MAX_PATH];
  long result;
  BOOL ret = FALSE;

  result = RegOpenKeyEx(HKEY_LOCAL_MACHINE, "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", 0L, KEY_ALL_ACCESS, &key); 
  if (result == ERROR_SUCCESS)
  {
    if (GetModuleFileNameA(NULL, filePath, MAX_PATH) != 0)
      if (RegSetValueEx(key, applicationName, 0, REG_SZ, filePath, strlen(filePath) + 1) == ERROR_SUCCESS)
        ret = TRUE;
    RegCloseKey(key);
  }
  return ret;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:17:54.520

如果您的程序是 32 位并在 64 位操作系统上运行，您对 HKLM\SOFTWARE 的访问将被重定向到 HKLM\SOFTWARE\Wow6432Node。MSDN 上有关于此的更多信息：[注册表中的 32 位和 64 位应用程序数据](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724072%28v=vs.85%29.aspx)

# python - Python授权imgur OAuth2.0认证获取subreddit画廊

> ID：14793687
> 
> 赞同：1
> 
> 时间：2013-02-10T01:29:40.290
> 
> 标签：python, api, authentication, imgur

因此，我正在尝试访问 imgur API 以获取某个 reddit 子图库中的图像列表。这是我迄今为止尝试过的：

```
>>> header = {'client_id': 'thisismyclientid', 'response_type': 'pin'}
>>> r = requests.get('https://api.imgur.com/oauth2/authorize', headers=header, verify=False)
>>> r.text
u'{"data":{"error":"client_id and response_type are required","request":"\\/oauth2\\/authorize","parameters":"","method":"GET"},"success":false,"status":400}' 
```

不完全确定我做错了什么，这不是传递我的 client_id 和响应类型的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:41:42.167

快速查看文档会发现：

```
https://api.imgur.com/oauth2/authorize?client_id=YOUR_CLIENT_ID&response_type=REQUESTED_RESPONSE_TYPE&state=APPLICATION_STATE 
```

这些是获取参数，而不是标题。所以你必须通过字典`params`而不是`headers`.

# algorithm - 如何运行 Dijkestra 算法使其类似于 Prim 并生成 MST？

> ID：14793688
> 
> 赞同：0
> 
> 时间：2013-02-10T01:29:50.583
> 
> 标签：algorithm, dijkstra, minimum-spanning-tree

假设我正在运行 Dijkstra 算法来访问所有节点（而不是原始初始节点和目标节点），即我正在检查是否访问了所有节点，而不是目标节点。这个算法会生成 MST（最小生成树）吗？（它类似于 Prim 吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:45:10.647

不。考虑一个看起来像正方形的图，三个边为 cost `1`，其余的边为 cost `2`。该图的 MST 具有 cost `3`，但如果您在包含昂贵边的顶点上启动 Dijkstra 算法，则将采用该边，因为它是连接节点的最短路径。

很酷的 ASCII 可视化：

```
 1
 A------B
 |      |
1|      |1
 |      |
 C------D
    2 
```

如果您从 开始 Dijkstra `C`，是从到`CD`的最短路径，但它不能包含在 MST 中。`C``D`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:47:06.853

如此示例图所示，它不会生成 MST：

```
 ... A
 .... 10 -''''    \
S                  2
 '''' 11 -....      \
              ''''' B 
```

如果我们在节点 S 处启动 Dijkstra 算法，结果树将如下所示：

```
 ... A
 .... 10 -''''    
S                 
 '''' 11 -....    
              ''''' B 
```

总边长为 21，而（在这种情况下是唯一的）MST 将是：

```
 ... A
 .... 10 -''''    \
S                  2
                    \
                    B 
```

结果一共有12个。

# android - StringSets 不会保存/加载到/从 SharedPreferences

> ID：14793690
> 
> 赞同：0
> 
> 时间：2013-02-10T01:29:55.960
> 
> 标签：android, listview, arraylist, sharedpreferences, jodatime

我的应用程序存储了一个自定义 Food 对象的 ArrayList，这些对象发布到主 Activity 中的 ListView。该应用程序的 ListView 部分运行良好，但我在将这些 Food 对象保存到 SharedPreferences 和从 SharedPreferences 加载这些对象时遇到问题。

我将这些 Food 对象保存到 SharedPreferences，方法是将其每个属性保存为字符串，将它们放入 StringSet，并通过 putStringSet 函数保存每个对象。当应用程序恢复时，它会从 SharedPreferences 中读取每个 StringSet 并使用读取的属性创建一个新的 Food 项，然后将每个项添加到 ArrayList 中。该代码似乎应该可以工作，但只是不会在会话之间加载数据。谁能帮我弄清楚为什么？谢谢！

```
Code removed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:17:39.803

您似乎从未实例化 foodNamesSet 变量。因此检查 if(foodNamesSet != null) 总是返回 false。同样的事情也适用于其他集合。此外，我认为您应该在 onPause() 中而不是在 onStop() 中执行逻辑。

# css - css：如何在滑块外显示上一个和下一个链接

> ID：14793691
> 
> 赞同：0
> 
> 时间：2013-02-10T01:29:58.747
> 
> 标签：css

只是有几个无法解决的 css 问题，所以我将其保留为默认 css。

下面是显示图像滑块的应用程序：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/Text20.php)

我的问题是如何让`Prev`和`Next`链接显示在图像滑块之外的图像两侧而不是滑块中，因为它与图像重叠？

我的另一个问题是在滑块下方，它包含滑块编号`1 2 3`，因此我们知道哪个图像是滑块中的第一个第二个和第三个图像并选择它们。我的问题是如何将数字分开，以免它们靠得太近？

下面是`Prev and Next`链接的CSS：

```
ul.bjqs-controls{list-style:none;margin:0;padding:0;z-index:9999;}
ul.bjqs-controls.v-centered li a{position:absolute;}
ul.bjqs-controls.v-centered li.bjqs-next a{right:0;}
ul.bjqs-controls.v-centered li.bjqs-prev a{left:0;} 
```

下面是图片底部数字的css：

```
ol.bjqs-markers{list-style: none; padding: 0; margin: 0; width:100%;}
ol.bjqs-markers.h-centered{text-align: center;}
ol.bjqs-markers li{display:inline;}
ol.bjqs-markers li a{display:inline-block;} 
```

HTML和jQuery：

```
 <div id="banner-image_<?php echo $key; ?>">
 <ul class="bjqs">
<?php foreach ($arrImageFile[$key] as $i) { ?>
<li><img alt="<?php echo $i; ?>" height="200" width="200" src="<?php echo 'ImageFiles/'.$i; ?>"></li>
<?php } ?>
</ul>
</div>

         <script type="text/javascript">

jQuery(document).ready(function($) {

         $('#banner-image_<?php echo $key; ?>').bjqs({
            animtype      : 'slide',
            height        : 200,
            width         : 200,
            responsive    : true,
            randomstart   : false,
            automatic : false
          });  
          });

          </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:46:44.580

问题第二部分的答案是添加填充到

```
ol.bjqs-markers li{display:inline;} 
```

如图所示：http: [//jsfiddle.net/uYXkA/](http://jsfiddle.net/uYXkA/)

我将在 OP 发布 HTML 后回答第一部分。

编辑：好吧，看起来 jquery 为您的 prev 和 next 创建了它自己的 css。我们可以解决这个问题 - 只需将其添加到您的 css 中：

```
ul.bjqs-controls.v-centered li.bjqs-prev a {
    left: -40px;
} 
```

和：

```
ul.bjqs-controls.v-centered li.bjqs-next a {
    right: -40px;
} 
```

接下来，您可能希望整体移动图像。为此，只需将 css 更改为 `div.lt-container`. 如果你添加

```
margin: 0 auto;
width: 50%; 
```

它会变得居中。它看起来不会很漂亮，但它会起作用。

# javascript - Angular 在 HTML 属性中使用内联 JavaScript 是不是“坏习惯”？

> ID：14793692
> 
> 赞同：50
> 
> 时间：2013-02-10T01:30:16.413
> 
> 标签：javascript, angularjs

当我阅读 Angular 教程时，我真的很喜欢它，但“ng-click”不等同于内联 onClick 吗？我的理解是 JavaScript 社区已经确定 HTML 中的内联 JavaScript 事件处理程序是“不好的做法”。

```
<img ng-src="{{img}}" ng-click="setImage(img)"> 
```

很高兴知道为什么在使用 Angular 时这不再被认为是“不正确的”。

来源：[http ://docs.angularjs.org/tutorial/step_10](http://docs.angularjs.org/tutorial/step_10)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-10T02:17:07.130

实际上，这一切都归结为您的视图代码必须以某种方式连接到您的应用程序逻辑中。AngularJS 的最佳实践通常表明您应该编写自己的模型（代表您的业务领域的对象）并将它们附加到范围。想象一下这样的代码：

```
<img ng-src="{{img}}" ng-click="myProfile.setMainImage(img)"> 
```

```
myApp.controller("ProfileController", function($scope, myProfile) {
  $scope.myProfile = myProfile;
}); 
```

视图显示“单击此图像时，它将在 myProfile 上调用 setMainImage()。” 业务逻辑在里面`myProfile`，可以测试等等。视图只是一个钩子。

在更“传统”或“香草”的 jQuery 设置中，您必须编写如下内容：

```
$("#someId img").on('click', function() {
  var img = $(this).attr('src');
  myProfile.setMainImage(img); // where does myProfile come from here?
                               // how does it update the view?
}); 
```

当然，JavaScript 社区已经确定以这种方式编写大型应用程序并不真正站得住脚，部分原因是视图和模型对象之间的脱节（如代码片段中的注释所示），这就是为什么我们首先拥有像Angular这样的框架。

所以，我们知道这个原生 jQuery 代码并不理想，但我们仍然不确定整个`ngClick`事情。让我们将它与另一个非常流行的提供 MV* 架构的 JavaScript 框架 Backbone 进行比较。在最近关于 AngularJS 的 RailsCasts 节目中，[有人问了一个非常相似的问题](http://railscasts.com/episodes/405-angularjs?view=comments#comment_162214)：

> 只是我，还是 AngularJS 看起来很糟糕？Ryan，不要误会我的意思，这一集很棒，但我不相信这个框架。
> 
> 所有这些`ng-show`，看起来`ng-repeat`都`ng-class`像旧的 Java 的 JSF 和类似的框架。它还使用`ng-submit`和强制执行突兀的 JS `ng-click`。
> 
> 所以我的观点是：你的观点很容易变得混乱并完全依赖它。其他框架（如 Backbone）的优点是在表示和行为（较少或没有依赖关系）和结构化客户端应用程序 (MVVM) 之间分离关注点。

[我的回答](http://railscasts.com/episodes/405-angularjs?view=comments#comment_162257)也适用于这里：

> 在像 Backbone 这样的框架中，您将拥有类似以下代码（取自 Backbone 网站，减去几行代码）：
> 
> ```
> var DocumentView = Backbone.View.extend({
> 
>   events: {
>     "dblclick"                : "open",
>     "click .icon.doc"         : "select",
>     "contextmenu .icon.doc"   : "showMenu",
>     "click .show_notes"       : "toggleNotes",
>     "click .title .lock"      : "editAccessLevel",
>     "mouseover .title .date"  : "showTooltip"
>   },
> 
>   open: function() {
>     window.open(this.model.get("viewer_url"));
>   },
> 
>   select: function() {
>     this.model.set({selected: true});
>   },
> 
> }); 
> ```
> 
> 在这个*作为视图的对象中*，您正在为各种元素设置事件处理程序。这些事件处理程序调用视图对象上的函数，这些函数委托给模型。您还可以在各种模型事件（例如`change`）上设置回调，然后调用视图对象上的函数来相应地更新视图。
> 
> 在 Angular 中，DOM 是你的视图。使用`ng-click`,`ng-submit`等时，您将在这些元素上设置事件处理程序，这些处理程序调用应该委托给模型对象的函数。使用`ng-show`,`ng-repeat`等时，您正在为更改视图的模型事件设置回调。
> 
> AngularJS 在幕后为您设置这些 [钩子和] 回调的事实是无关紧要的；这与 Backbone 之类的唯一区别在于，Angular 允许您以声明方式编写视图——您描述视图*是*什么——而不是命令式地描述视图的*作用*。
> 
> 所以，最后，`<a ng-click="model.set({selected: true})">`真正添加的依赖项不超过
> 
> ```
> events: {
>   'click a': 'select'
> },
> 
> select: function() {
>   this.model.set({selected: true});
> } 
> ```
> 
> ...但它肯定是少了很多代码。;)

（注意：实际上，Angular 版本应该是`<a ng-click="select()">`，并且`select`作用域上的`select`方法类似于 Backbone 示例中视图中的方法。）

现在，也许一个*合理*的担忧是您不喜欢标记中的事件挂钩。就个人而言，我非常喜欢 Angular 视图的声明性特性，您的标记描述*了视图是什么，*并且您在事件（无论是用户生成的还是模型中的简单更改）和您的视图之间有两种方式绑定——我发现我写连接事件的样板代码要少得多（尤其是由模型更改驱动的视图更改），而且我认为总体上更容易推理视图。

# computer-science - 状态机和多个状态

> ID：14793693
> 
> 赞同：18
> 
> 时间：2013-02-10T01:30:56.203
> 
> 标签：computer-science

使用状态机的传统定义，状态机记录可以同时处于多个状态吗？例如，如果我有一个`User`模型，用户可以同时处于 a`subscriber`和一个`promotional_period`状态吗？

请注意，我不是在问这样做是否有意义，我的问题是 - 状态机是否可能。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2016-05-07T19:24:48.357

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T01:33:09.197

不，状态机一次只有*一个*状态。

组合状态可以与另一个状态完成，例如`subscriber_and_promotional_period`. 这是通常的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T01:32:54.410

多说一天维基百科：

“有限状态机 (FSM) 或有限状态自动机（复数：自动机），或简称为状态机，是用于设计计算机程序和时序逻辑电路的计算数学模型。它被视为抽象机器它可以处于有限数量的状态之一。**机器一次只处于一种状态；它在任何给定时间所处的状态称为当前状态**。

所以不行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-25T19:47:01.520

[Petri 网](https://en.wikipedia.org/wiki/Petri_net)是允许多个同时“状态”的状态机的泛化。

# c++ - Gtkmm 3.0 如何在框架或窗口之间切换

> ID：14793704
> 
> 赞同：1
> 
> 时间：2013-02-10T01:32:18.260
> 
> 标签：c++, user-interface, gtk, gtkmm

我对 C++ 比较陌生，我对 Java 中的 MCV 编程有一些经验。我在 C++ 上使用 GTKmm 我正在尝试做的是编写一个应用程序，供助教提交和编辑各种职位的应用程序，以及管理员来查看并接受这些应用程序。

我在乞讨时要做的是创建3个“框架”（我目前正在为学生提交申请）

*   这首先将有 2 个按钮 1 用于选择您是否是学生/管理员

*   单击您是学生后，我想隐藏此框架并显示我的第二个框架

*   第二个框架将有另外 2 个按钮，一个用于创建应用程序，另一个用于编辑应用程序

我的核心问题是我不明白如何在帧之间切换，我已经为我的模型编写了所有代码，并且理解了我想要它做的一切但是我似乎无法找到如何做到这一点......

我唯一的想法是为每个窗口创建窗口，使它们看起来都很好，然后当按下按钮时关闭该窗口并将字符串写入文件，我可以访问以查看已按下哪个按钮，然后相应地打开一个新窗口。我应该这样做还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-17T09:43:00.927

我想我可以为 >= GTK+ 3.10 的任何版本建议一个更好/更惯用的选项 - 公平地说，它在接受答案后大约半年就到了。

如果您想一次在一个小部件之间切换而无需任何附件（如选项卡），那么 a`Gtk::Stack`似乎是一个更好的选择。因为它是专门为一次一个演示而设计的，没有任何冗余和（理论上的）开销来自 a`Notebook`的手动选项卡功能，您只需立即禁用它！它是一个包含多个孩子的容器，在任何给定时刻都有一个可见的，当然还有更改活动孩子的方法。

您可以连接您自己的小部件和/或事件来管理显示 的哪些`Stack`子项。或者——尽管在这种情况下可能只是恢复冗余——有一个`StackSwitcher`配套的小部件，它几乎是一个垂直的标签栏，如 GTK+ 演示和 GNOME Tweak Tool 中所见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T04:31:41.443

最简单的方法是使用笔记本小部件。您可以隐藏选项卡，因为您将使用方法来控制显示哪个页面`set_show_tabs(false)`。使用方法将每个框架的顶级小部件放在窗格中`append_page()`，并使用在它们之间切换`set_current_page()`。如果它分散注意力，您可能想隐藏笔记本的斜面，使用方法`set_show_bevel(false)`。

使用信号使一个页面上的小部件（例如“我是学生”按钮）做某事（例如转到第二页）。如果您不知道这意味着什么或如何做，请阅读[gtkmm 教程](http://developer.gnome.org/gtkmm-tutorial/stable/index.html.en)，它将解释这一点以及更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-01T07:05:32.553

A bit too late ! But here is my try :

`Gtk::Notebook` is great but it is not ideal in switching between app frames on menu item clicks. `Gtk::Stack`, since gtkmm 3.10, exists to mitigate this. Assuming you're using `glade` and `Gtk::Builder` :

**class**

```
class AppName : public Gtk::ApplicationWindow
{
public:
//...Your app methods and callbacks
void on_mb_itemname_selected(); // The call back for our menu item click/select
private:
//Builder which will help build the app from a .glade file
Glib::RefPtr<Gtk::Builder> _builder;
//...
//Your menu item to activate a particular frame
Gtk::MenuItem * _mb_itemname;
//Your handle to Gtk::Stack which is usually the stack for the whole app
 Gtk::Stack * _app_stack;
//...
} 
```

**constructor**

```
AppName::AppName(BaseObjectType *cobj,
                 Glib::RefPtr<Gtk::Builder>& ref_builder)
                :Gtk::ApplicationWindow(cobj),_builder(ref_builder)
{
//.. Other setup
_builder->get_widget("your_glade_id_to_stack",_app_stack);
_builder->get_widget("your_glade_id_to_menu_item",_mb_itemname);

// Connect signal_select of our menu item to appropriate signal handler.
mb_itemname->signal_select().connect(
          sigc::mem_fun(*this,&AppName::on_mb_itemname_selected));
} 
```

**our callback**

```
void AppName::on_mb_itemname_selected()
{
// Change the visible child of the stack concerned.
Gtk::StackTransitionType ttype = STACK_TRANSITION_TYPE_NONE;
_app_stack->set_visible_child("your_widget_name",ttype);
// Note that widget name is not widget glade id.
// You can set  your widget under name Packing -> Name
return; 
} 
```

# jquery - 带有数据库 jQuery/Ajax/PHP 日期的多个倒数计时器

> ID：14793705
> 
> 赞同：0
> 
> 时间：2013-02-10T01:32:27.610
> 
> 标签：jquery, countdown

我正在尝试构建将通过 AJAX 加载交易的交易聚合器，但对我来说，问题是使用 MySQL 中的日期执行多个倒数计时器（每个交易一个）。我试图做类似下面代码的事情，但这不起作用。有人可以给我最好的解决方案吗？

jQuery代码：

```
$(document).ready(function(){

$.ajax({
url:"getdata.php",
type:"GET",
dataType:'json',
success:function(rows){

for (var i in rows){
var row=rows[i];
var id=row[0];
var end_date=row[1];
$("#countdown_"+id).countdown({
            date: end_date,
            format: "on"
        },

        function() {
        // callback function
        });
}
}
});
}); 
```

PHP代码：

```
$data=array();
while($row=mysql_fetch_row($result))
{
    $data[]=$row;
}
die (json_encode($data)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:48:12.687

插件是用一些不允许多个实例的全局变量编写的。

我做了一些调整，使它工作

见演示：http: [//jsfiddle.net/afRVm/1](http://jsfiddle.net/afRVm/1)

`.`

# php - 使用 php 处理期间丢失的 xml 元素

> ID：14793706
> 
> 赞同：0
> 
> 时间：2013-02-10T01:32:36.643
> 
> 标签：php, xml-parsing

我有一个 xml 文件，但结构处理不正确。我对为什么这种情况不断发生一无所知。在 PHP 版本 5.1.6 中处理 xml 时我应该注意什么？（我很清楚通过 VPN 的安全问题，并且没有外部访问权限。我现在不想升级。）

这是xml结构：

```
<XML>
  <actions>
    <action>
      <action_id>1</action_id>
    </action>
   <action>
     <action_id>2</action_id>
   </action>
  </actions>
  <actionreferences>
   <actionreference>
     <action_id>2</action_id>
     <reference>1</reference>
   </actionreference>
  </actionreferences>
</XML> 
```

这个模式可以有更多的动作，因此有更多的引用，新的动作可以基于但不能基于另一个动作。我们没有 DTD，但我们的 php 代码逻辑依赖于结构并且有一些安全防护措施。对我来说最重要的是，它为每个操作和它找到的引用提供了细粒度的编码日志记录。

接收 XML 文件后的 php 脚本将操作和对 ​​MySQL DB 服务器的引用写入。

所以问题是，有时缺少动作参考。从 php 的日志来看，它们似乎从未到达服务器。我无法在我的实验室设置中复制这一点，但我确信它在我们的实时系统中发生了 0.4% 的事务，大约 10 次。

*   我排除了 xml 生成错误，因为我们手动测试了生成 xml 以正常运行的 Win32 应用程序
*   我排除了传输过程中的 xml 文件损坏，因为它会导致错误被抛出，我切断了 actionreference 区域中的 xml 并再次尝试

我还缺少什么，什么会导致这些引用不时被处理？

更新详情

xml 文件是基于带有 .net 2.0 客户端的 windows 上的 mdb 访问数据库生成的。我们将 xml 生成中的问题排除为：

*   手动启动/关闭它几次，并对生成的 xml 文件进行了比较，始终与预期相同，已在其他系统上使用 2y 没有遇到问题
*   使用简单 xml2array 函数的 php 脚本
*   xml 文件被压缩并 POST 到在 Apache 2 上运行的 php 脚本
*   我们查看了 apache 和 php 自定义日志的所有日志，那里没有传输错误，客户端也写了一个日志，那里没有错误，但是我们当前使用的客户端不记录 html 返回，它只记录 HTTP 200好的
*   php xml 是[http://us4.php.net/manual/en/function.xml-parse-into-struct.php](http://us4.php.net/manual/en/function.xml-parse-into-struct.php)
*   我不能完全排除 MySQL，因为我在 Apache 错误日志中发现了一些错误，一些我没有在 php 中正确捕获的 mysql db 错误也许正确捕获所有 mysql 错误会给我更多的洞察力，但它们乍一看似乎是无关的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:38:15.750

一方面，您的 XML 中有一个错误：

```
<reference>1</references> 
```

应该

```
<reference>1</reference> 
```

（注意“s”）

# turing-machines - 证明 Turnig 机器是否接受字符串是不可判定的

> ID：14793707
> 
> 赞同：1
> 
> 时间：2013-02-10T01:32:37.557
> 
> 标签：turing-machines

我看过证明

```
ATM = {〈M,w〉 | M is a TM and M accepts w} is undecidable. 
```

最初我们建造另一台图灵机

`H` 如果我们制造另一台图灵机，则输入`<M,w>`它接受`M accept w otherwise reject`

```
D which on input <M>
1.run H on <M,<M>>
2.output the opposite of what H outputs. 
```

`That is if H accepts reject and if H reject accept`

我不明白作为输入的图灵机如何获得自己的描述然后拒绝它！你能解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:32:39.430

机器的输入没有特殊的状态，也没有任何要求。机器可以自由地拒绝自己。:)

因为我不想构建图灵机，这里有一个 Java 中的过度简化示例（它足够接近图灵完整性，它可以用来说明）：

```
class SelfReject {
    public boolean equals(Object other) {
        ...
    }

    public boolean accepts(Object input) {
        return (!this.equals(input));
    }
} 
```

这种类型的对象将接受任何输入*，但*等于自身的对象除外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T03:06:23.477

我不确定你到底在哪里卡住了，所以我或多或少会尝试重申你的问题，希望能填补任何空白。

这个想法是，我们想要证明 ATM 是不可判定的，即没有 TM H，当给定任何另一个 TM M 和该 TM M 的任何其他输入 w 作为输入时，可以决定 TM M 是否会接受输入 w .

为了证明这样的 TM H 不存在，我们使假设存在这样的机器 H。至少有足够的幻想，这似乎不是一个太不合理的猜测。

下一个想法是仅仅通过推断这样一个 TM H 的存在会导致我们的论证出现矛盾的后果。因此证明我们最初的假设这样一个 TM H 可能存在一定是错误的。这意味着不存在遵循我们上面给出的规范的任何 TM H。

所以现在进入棘手的部分：因为我们假设存在一个 TM H，当给定任何 TM M 和该 TM M 的任何输入 w 作为输入时，可以决定 M 是否接受 w 没有人可以禁止我们只提供对机器 M 本身也将 w 输入到 M 本身。我们甚至假设我们可能会使用任何输入。

正如您在上面已经说过的，将任何机器作为输入输入到另一台机器的想法似乎不太容易实现，我们宁愿尝试在我们的第一个 TM 磁带上编码第二个 TM 的描述。

乍一看，似乎并不清楚是否真的可以对磁带上的任何 TM 进行编码，但实际上是有可能的。实现这一目标的可能方案之一是以数学家库尔特·哥德尔的名字命名的 Gödelisierung。

编码本身也经常被称为哥德尔数。

鉴于我们的 TM H，当给定 ANY TM M 的描述和对 M 的任何输入 w 作为输入决定 M 是否会接受 w 时，使用我们上面已经提到的自由，我们将简单地使用 TM M 的描述作为其自身的输入。

因此，构建一个 TM H'，当给定 TM M 的任何描述作为输入时，将决定 TM M 是否将其自己的描述作为输入工作是否接受。

正如您希望看到的那样，从我们的假设开始，上面指定的 TM H 我们没有做任何“禁止”的动作，如果我们使用我们新构建的 TM H' 来构建一个 TM D，当给定 ANY 时，我们肯定不会这样做TM M 作为输入只会返回与我们的机器 H' 相反的输出。

如果将任何 TM M 的描述作为输入，这个新的 TM D 将接受 > 如果 M 不接受它自己的描述作为输入，并且拒绝 > 如果 TM M 接受它自己的描述作为输入。

正如你所看到的，我们仍然可以自由地将任何（a 的描述）TM M 作为输入提供给 D，因此再次愉快地使用我们的自由，没有人可以禁止使用 TM D 本身的描述作为输入。

根据我们的构造，D 可以在任何 TM M 上工作作为输入，因此它肯定必须能够自行工作。

但正是这里出现了转折。事实上，要根据自己的描述作为输入来确定我们运行 D 的结果，我们只需要确定可能性：D 将接受或拒绝。

现在让我们检查这两种情况：

如果 D 接受它自己的描述作为我们构造的输入，这将意味着 D 将不得不拒绝，反之亦然。请记住，接受任何 TM 的 TM H' 接受它自己的描述作为输入，我们只是在构造中将其反转。

因此，我们发现了一个奇怪的事实，即当且仅当它接受它时，D 将不得不拒绝它自己的描述作为输入。

由于这显然不可能，您必须找到我们在构建中所犯错误的根源。沿着我们再次编造的整个路径，这使我们初步推断，如果 M 将接受 w，则存在一个 TM H 能够决定任何 TM M 和任何输入 w，这是我们假设 ATM 是可判定的暗示的。

# performance - PostgreSQL Simple JOIN 很慢

> ID：14793708
> 
> 赞同：11
> 
> 时间：2013-02-10T01:32:50.980
> 
> 标签：performance, postgresql, join

我有一个简单的查询和两个表：

**`drilldown`**

```
CREATE SEQUENCE drilldown_id_seq;

CREATE TABLE drilldown (
    transactionid bigint NOT NULL DEFAULT nextval('drilldown_id_seq'),
    userid bigint NOT NULL default 0 REFERENCES users(id),
    pathid bigint NOT NULL default 0,
    reqms bigint NOT NULL default 0,
    quems bigint NOT NULL default 0,
    clicktime timestamp default current_timestamp,
    PRIMARY KEY(transactionid)
);

ALTER SEQUENCE drilldown_id_seq OWNED BY drilldown.transactionid;

CREATE INDEX drilldown_idx1 ON drilldown (clicktime); 
```

**`querystats`**

```
CREATE SEQUENCE querystats_id_seq;

CREATE TABLE querystats (
    id bigint NOT NULL DEFAULT nextval('querystats_id_seq'),
    transactionid bigint NOT NULL default 0 REFERENCES drilldown(transactionid),
    querynameid bigint NOT NULL default 0 REFERENCES queryname(id),
    queryms bigint NOT NULL default 0,
    PRIMARY KEY(id)
);

ALTER SEQUENCE querystats_id_seq OWNED BY querystats.id;

CREATE INDEX querystats_idx1 ON querystats (transactionid);
CREATE INDEX querystats_idx2 ON querystats (querynameid); 
```

`drilldown`有150万条记录，`querystats`有1000万条记录；当我在两者之间加入时，就会出现问题。

**询问**

```
explain analyse
select avg(qs.queryms)
  from querystats qs
  join drilldown d on (qs.transactionid=d.transactionid)
  where querynameid=1; 
```

**查询计划**

```
聚合（成本=528596.96..528596.97 行=1 宽度=8）（实际时间=5213.154..5213.154 行=1 循环=1）
   -> Hash Join (cost=274072.53..518367.59 rows=4091746 width=8) (实际时间=844.087..3528.788 rows=4117717 loops=1)
         哈希条件：（qs.transactionid = d.transactionid）
         -> 查询统计 qs 上的位图堆扫描（成本=88732.62..210990.44 行=4091746 宽度=16）（实际时间=309.502..1321.029 行=4117717 循环=1）
               重新检查条件：（querynameid = 1）
               -> querystats_idx2 上的位图索引扫描（成本=0.00..87709.68 行=4091746 宽度=0）（实际时间=307.916..307.916 行=4117718 循环=1）
                     索引条件：（querynameid = 1）
         -> 哈希（成本=162842.29..162842.29 行=1371250 宽度=8）（实际时间=534.065..534.065 行=1372574 循环=1）
               存储桶：4096 批次：64 内存使用量：850kB
               -> 使用drilldown_pkey 对drilldown d 进行索引扫描（成本=0.00..162842.29 行=1371250 宽度=8）（实际时间=0.015..364.657 行=1372574 循环=1）
 总运行时间：5213.205 毫秒
（11 行）

```

我知道我可以为 PostgreSQL 调整一些调整参数，但我想知道的是我正在做的查询是连接两个表的最佳方式吗？

或者可能是某种 INNER JOIN？我只是不确定。

任何指针表示赞赏！

## 编辑

```
database#\d drilldown
                                       Table "public.drilldown"
    Column     |            Type             |                       Modifiers                        
---------------+-----------------------------+--------------------------------------------------------
 transactionid | bigint                      | not null default nextval('drilldown_id_seq'::regclass)
 userid        | bigint                      | not null default 0
 pathid        | bigint                      | not null default 0
 reqms         | bigint                      | not null default 0
 quems         | bigint                      | not null default 0
 clicktime     | timestamp without time zone | default now()
Indexes:
    "drilldown_pkey" PRIMARY KEY, btree (transactionid)
    "drilldown_idx1" btree (clicktime)
Foreign-key constraints:
    "drilldown_userid_fkey" FOREIGN KEY (userid) REFERENCES users(id)
Referenced by:
    TABLE "querystats" CONSTRAINT "querystats_transactionid_fkey" FOREIGN KEY (transactionid) REFERENCES drilldown(transactionid)

database=# \d querystats
                            Table "public.querystats"
    Column     |  Type  |                        Modifiers                        
---------------+--------+---------------------------------------------------------
 id            | bigint | not null default nextval('querystats_id_seq'::regclass)
 transactionid | bigint | not null default 0
 querynameid   | bigint | not null default 0
 queryms       | bigint | not null default 0
Indexes:
    "querystats_pkey" PRIMARY KEY, btree (id)
    "querystats_idx1" btree (transactionid)
    "querystats_idx2" btree (querynameid)
Foreign-key constraints:
    "querystats_querynameid_fkey" FOREIGN KEY (querynameid) REFERENCES queryname(id)
    "querystats_transactionid_fkey" FOREIGN KEY (transactionid) REFERENCES drilldown(transactionid) 
```

所以这是请求的两个表和版本

```
PostgreSQL 9.1.7 on x86_64-unknown-linux-gnu, compiled by gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3, 64-bit 
```

所以这个查询正在做的是从每个查询类型（querynameid）的queryms的所有行值中获取平均值

```
 name            |         current_setting          |        source        
----------------------------+----------------------------------+----------------------
 application_name           | psql                             | client
 client_encoding            | UTF8                             | client
 DateStyle                  | ISO, MDY                         | configuration file
 default_text_search_config | pg_catalog.english               | configuration file
 enable_seqscan             | off                              | session
 external_pid_file          | /var/run/postgresql/9.1-main.pid | configuration file
 lc_messages                | en_US.UTF-8                      | configuration file
 lc_monetary                | en_US.UTF-8                      | configuration file
 lc_numeric                 | en_US.UTF-8                      | configuration file
 lc_time                    | en_US.UTF-8                      | configuration file
 log_line_prefix            | %t                               | configuration file
 log_timezone               | localtime                        | environment variable
 max_connections            | 100                              | configuration file
 max_stack_depth            | 2MB                              | environment variable
 port                       | 5432                             | configuration file
 shared_buffers             | 24MB                             | configuration file
 ssl                        | on                               | configuration file
 TimeZone                   | localtime                        | environment variable
 unix_socket_directory      | /var/run/postgresql              | configuration file
(19 rows) 
```

我看到 enable_seqscan=off，我没有碰任何设置，这是一个完全默认的安装。

更新

我对以下评论进行了一些更改，结果如下。

```
explain analyse SELECT (SELECT avg(queryms) AS total FROM querystats WHERE querynameid=3) as total FROM querystats qs JOIN drilldown d ON (qs.transactionid=d.transactionid) WHERE qs.querynameid=3 limit 1;
                                                                       QUERY PLAN                                                                        
---------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=196775.99..196776.37 rows=1 width=0) (actual time=2320.876..2320.876 rows=1 loops=1)
   InitPlan 1 (returns $0)
     ->  Aggregate  (cost=196775.94..196775.99 rows=1 width=8) (actual time=2320.815..2320.815 rows=1 loops=1)
           ->  Bitmap Heap Scan on querystats  (cost=24354.25..189291.69 rows=2993698 width=8) (actual time=226.516..1144.690 rows=2999798 loops=1)
                 Recheck Cond: (querynameid = 3)
                 ->  Bitmap Index Scan on querystats_idx  (cost=0.00..23605.83 rows=2993698 width=0) (actual time=225.119..225.119 rows=2999798 loops=1)
                       Index Cond: (querynameid = 3)
   ->  Nested Loop  (cost=0.00..1127817.12 rows=2993698 width=0) (actual time=2320.876..2320.876 rows=1 loops=1)
         ->  Seq Scan on drilldown d  (cost=0.00..76745.10 rows=1498798 width=8) (actual time=0.009..0.009 rows=1 loops=1)
         ->  Index Scan using querystats_idx on querystats qs  (cost=0.00..0.60 rows=2 width=8) (actual time=0.045..0.045 rows=1 loops=1)
               Index Cond: ((querynameid = 3) AND (transactionid = d.transactionid))
 Total runtime: 2320.940 ms
(12 rows) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T15:58:33.560

它的行为就像你已经设置了一样`enable_seqscan = off`，因为它使用索引扫描来填充哈希表。除非作为诊断步骤，否则切勿关闭任何计划器选项，如果您要显示计划，请显示使用的任何选项。这可以运行以显示许多有用的信息：

```
SELECT version();
SELECT name, current_setting(name), source
  FROM pg_settings
  WHERE source NOT IN ('default', 'override'); 
```

如果您告诉我们运行时环境，尤其是机器上的 RAM 量、存储系统的外观以及数据库的大小（或者更好的是，数据库中经常引用数据的*活动数据集*），这也会有所帮助）。

作为粗略的细分，5.2 秒细分为：

1.  1.3 秒找到`querystats`与您的选择标准匹配的 4,117,717 行。
2.  2.3 秒随机匹配`drilldown`记录。
3.  1.6 秒通过 4,117,717 行并计算平均值。

因此，即使您似乎削弱了它使用最快计划的能力，它也只需要 1.26 微秒（百万分之一秒）即可找到每一行，将其连接到另一行，然后计算平均值。这在绝对基础上并不算太糟糕，但你几乎可以肯定会得到一个稍微快一点的计划。

首先，如果您使用的是 x 小于 3 的 9.2.x，请立即升级到 9.2.3。在最近的版本中修复了某些类型的计划的性能回归，这可能会影响此查询。一般来说，[尽量在次要版本上保持最新](http://www.postgresql.org/support/versioning/)（版本号更改超过第二个点）。

您可以通过仅在该连接上设置计划因素并运行查询（或在其上）来测试单个会话中的不同计划`EXPLAIN`。尝试这样的事情：

```
SET seq_page_cost = 0.1;
SET random_page_cost = 0.1;
SET cpu_tuple_cost = 0.05;
SET effective_cache_size = '3GB'; -- actually use shared_buffers plus OS cache 
```

确保所有`enable_`设置都是`on`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T12:26:02.120

You claim in your question:

> I see that enable_seqscan=off, I have not touched any settings, this is a completely default install.

In contrast, the output from `pg_settings` tells us:

> enable_seqscan | off | session

Meaning, that you set `enable_seqscan = off` **in your session**. Something is not adding up here.

Run

```
SET enable_seqscan = on; 
```

or

```
RESET enable_seqscan; 
```

Assert:

```
SHOW enable_seqscan; 
```

Also, your setting for [**`shared_buffers`**](http://www.postgresql.org/docs/current/interactive/runtime-config-resource.html#GUC-SHARED-BUFFERS) is *way too low* for a db with millions of records. `24MB` seems to be the conservative setting of Ubuntu out-of-the-box. You need to edit your configuration files for serious use! I quote the manual:

> If you have a dedicated database server with 1GB or more of RAM, a reasonable starting value for shared_buffers is 25% of the memory in your system.

So edit your `postgresql.conf` file to increase the value and reload.
Then try your query again and find out how `enable_seqscan` was turned off.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T15:42:48.860

对我来说，querystats 表看起来像一个*胖*联结表。在这种情况下：省略代理键，并使用自然（复合）键（两个组件都不能为空）并添加*反向*复合索引。（单独的索引是没用的，FK 约束会自动为你生成它们）

```
-- CREATE SEQUENCE querystats_id_seq;

CREATE TABLE querystats (
    -- id bigint NOT NULL DEFAULT nextval('querystats_id_seq'),
    transactionid bigint NOT NULL default 0 REFERENCES drilldown(transactionid),
    querynameid bigint NOT NULL default 0 REFERENCES queryname(id),
    queryms bigint NOT NULL default 0,
    PRIMARY KEY(transactionid,querynameid )
);

-- ALTER SEQUENCE querystats_id_seq OWNED BY querystats.id;

--CREATE INDEX querystats_idx1 ON querystats (transactionid);
-- CREATE INDEX querystats_idx2 ON querystats (querynameid);
CREATE UNIQUE INDEX querystats_alt ON querystats (querynameid, transactionid); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T01:45:59.427

在这个查询中

```
select avg(qs.queryms) 
from querystats qs 
join drilldown d 
  on (qs.transactionid=d.transactionid) 
where querynameid=1; 
```

您没有使用“向下钻取”表中的任何列。由于外键约束保证“querystats”中的每个“transactionid”在“drilldown”中都有一行，我认为连接不会做任何有用的事情。除非我错过了什么，否则您的查询相当于

```
select avg(qs.queryms) 
from querystats qs 
where querynameid=1; 
```

根本没有加入。只要“querynameid”上有索引，您就应该获得不错的性能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-10T04:48:47.537

不加入时，`avg(qs.queryms)`执行一次。

当您执行连接时，您执行`avg(qs.queryms)`的次数与连接生成的行数一样多。

如果您总是对单个 querynameid 感兴趣，请尝试放入子`avg(qs.queryms)`选择：

```
SELECT 
    (SELECT avg(queryms) FROM querystats WHERE querynameid=1) 
FROM querystats qs 
JOIN drilldown d ON (qs.transactionid=d.transactionid) 
WHERE qs.querynameid=1; 
```

# mysql - 添加到 MYSQL 数据库时，撇号变为 ' 并被反斜杠

> ID：14793711
> 
> 赞同：1
> 
> 时间：2013-02-10T01:33:00.103
> 
> 标签：mysql, database

我最近切换到一个新服务器，现在当我向我的论坛添加新主题时，撇号`&#39;`会随着它们进入数据库而变成，而撇号会变成反斜杠。

**例如：**

迈克的网站变成：`Mike\'s website`. 在数据库中，它变为：`Mike\&#39; website`.

我已经通过 php.ini 检查了 magic_quotes 是否已打开——它已关闭。

我花了几天时间进行故障排除，但没有可用的理由。

奇怪的是，当我使用`&#39;`which 在我的论坛中创建主题时，它返回一个撇号！我假设存在一些语言问题。我的论坛被编程为使用 UTF-8，数据库也是如此。

我在切换之前检查了数据库条目，奇怪的是，它们会被记录为撇号 ' 而不是`&#39;`......就像它应该的那样。我知道我可以使用 striplashes()，但我不想这样做，因为之前没有它们它可以正常工作！

什么 apache/mysql 设置导致这种情况发生？

此外，字符 < > 也成为 html 代码字符。

# ruby - 使用 RinRuby 将 data.frame 从 R 传递到 Ruby

> ID：14793712
> 
> 赞同：0
> 
> 时间：2013-02-10T01:33:01.710
> 
> 标签：ruby, r

我正在使用 RinRuby gem 在 Ruby 中使用 R。问题是，您只能使用 RinRuby 将包含字符或数字的向量从 R 传递给 Ruby，但我想传递一个 data.frame。

我的第一个想法是将 data.frame 转换为 JSON 对象，我可以将其作为字符串从 R 传递到 Ruby，然后将其转换为 Hash。但这个解决方案似乎相当复杂。

有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:49:53.010

我不知道“使用 Rserve-Ruby-client 而不是 RinRuby”是否是一个更好的主意——也许你有充分的理由使用 RinRuby。但是，[Rserve 客户端](https://github.com/clbustos/Rserve-Ruby-client)可用于将数据帧转换为 Ruby 数组：

```
require 'rserve'
con = Rserve::Connection.new
df1 = con.eval("data.frame(a = c(1:10), b = c(11:20))")
df1 = df1.to_ruby
#<Array:69904955249600 [a=12345678910, b=11121314151617181920]>
df1['a']
# [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T01:45:00.827

您可以使用 dump 或 dput 函数返回 R 对象的 ASCII 表示。

```
> dump('dat', file="")
dat <-
structure(list(group = structure(c(1L, 1L, 2L, 2L), .Label = c(" pilot01", 
" pilot02"), class = "factor"), val2 = structure(c(1L, 2L, 1L, 
2L), .Label = c("t1", "t3"), class = "factor"), val1 = c(429.226015, 
693.795607, 262.798468, 325.854107), val1time = structure(c(29229.226015, 
29493.795607, 29062.798468, 29125.854107), class = c("POSIXct", 
"POSIXt"))), .Names = c("group", "val2", "val1", "val1time"), row.names = c(NA, 
-4L), class = "data.frame")
> dput(dat)
structure(list(group = structure(c(1L, 1L, 2L, 2L), .Label = c(" pilot01", 
" pilot02"), class = "factor"), val2 = structure(c(1L, 2L, 1L, 
2L), .Label = c("t1", "t3"), class = "factor"), val1 = c(429.226015, 
693.795607, 262.798468, 325.854107), val1time = structure(c(29229.226015, 
29493.795607, 29062.798468, 29125.854107), class = c("POSIXct", 
"POSIXt"))), .Names = c("group", "val2", "val1", "val1time"), row.names = c(NA, 
-4L), class = "data.frame") 
```

R 中的数据框只是带有行名和列名的列表。Ruby 是否具有日期时间向量和列表的数据类型？如果是这样，拆开列表结构应该相当简单。另一种方法是使用`lapply`（在 R 环境中）按列执行您将在 Ruby 中重新组装的 RinRuby 操作。

# eclipse - 如何在eclipse中将代码行左对齐到窗口的左边缘

> ID：14793714
> 
> 赞同：0
> 
> 时间：2013-02-10T01:33:14.437
> 
> 标签：eclipse, format, lines-of-code

我有很多代码在我的 Eclipse 项目中的代码行左侧有空格。我想选择这段代码并删除额外的白色间距，以便每行与窗口的左边缘对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:39:21.140

您可以选择所需的代码，然后按 SHIFT+TAB 直到代码排到屏幕边缘。你也可以去：

```
Window->Preferences->general->Editors->Text Editors 
```

当你在那里时，在下面指定标签宽度：

```
Displayed Tab Width. 
```

您还可以自定义 Eclipses 的格式化程序：

去：

```
Window->Preferences->Java->Code Style->Formatter 
```

选择格式化程序并按编辑。根据您的需要对其进行编辑。

然后选择要格式化的文本并按 Ctrl+Shift+F

# javascript - 灯箱问题，我多次放置同一个链接，图像数量增加

> ID：14793715
> 
> 赞同：0
> 
> 时间：2013-02-10T01:33:14.783
> 
> 标签：javascript, jquery, lightbox

我对灯箱有以下问题，我想在同一页面中使用相同的链接两次：

```
<a class="lightbox cboxRelative" id="myid1" href="myimage">My Link</font></a>
<a class="lightbox cboxRelative" id="myid2" href="myimage_thesame">My Link</font></a> 
```

问题出现在两个图像都合并到启动的灯箱实例上时，因此我看到 2 个图像中的 1 个，而我应该只看到一个图像。

关于灯箱实施，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:41:08.063

我还不能发表评论，所以我将其作为答案提交。希望我们能弄清楚这一点。

我假设您正在使用[此处](http://leandrovieira.com/projects/jquery/lightbox/)的 jquery 插件。而且我冒昧地猜测您是 javascript 正在使用“.lightbox”或“.cboxRelative”作为选择器。如果是这种情况，插件会抓取两个链接来创建灯箱。尝试创建灯箱的两个实例，并使用链接的 id 作为选择器。

我的建议可能不起作用，但如果您发布您的 javascript，我或其他人可能会为您提供更具体的帮助。

# ffmpeg - ffmpeg 每分钟截取一个flv文件

> ID：14793721
> 
> 赞同：0
> 
> 时间：2013-02-10T01:34:56.127
> 
> 标签：ffmpeg, screenshot, flv

我是使用 ffmpeg 的新手。我想每隔 1 分钟对一个 flv 文件进行几张截图。

我在 ffmpeg 的网站上找到了这个命令

```
ffmpeg -i input.flv -f image2 -vf fps=fps=1/60 img%03d.jpg 
```

但是这不起作用，当我运行它时，我收到错误'没有这样的过滤器'fps''

是否有捷径可寻？我也愿意使用完全不同的程序，但它必须从命令行在服务器上运行。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:44:07.573

我以前成功地使用过你的命令。也许您有旧版本的 FFmpeg。如果您还没有，请尝试[**更新。**](http://ffmpeg.org/download.html)

[**参考**](http://ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20thumbnail%20image%20every%20X%20seconds%20of%20the%20video)

# macos - g++ python错误

> ID：14793722
> 
> 赞同：1
> 
> 时间：2013-02-10T01:35:03.830
> 
> 标签：macos

我正在尝试为学校编译一些基本的 c++ 程序，但 g++ 不断抛出有关 python 文件的错误。

我输入：

```
g++ -Wall mult3-5.cpp -o mult3-5 
```

命令返回：

```
Traceback (most recent call last):
File "/usr/local/bin/grc", line 161, in <module> os.execvp(args[0], args)
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.py", line 344, in execvp
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.py", line 380, in _execvpe
OSError: [Errno 2] No such file or directory 
```

# excel - Excel Geomean 返回#value！有时？

> ID：14793724
> 
> 赞同：1
> 
> 时间：2013-02-10T01:35:21.270
> 
> 标签：vba, excel, vba, excel-formula

我已经修改了下面的[vba](/questions/tagged/vba "显示标记为“vba”的问题")函数以满足我的需要。

我有许多工作簿，其中包含 4500 多行的工作表，我使用该函数搜索两个给定值（作为边界）。然后，它选择行作为范围。最后，在该范围内做任何事情。功能：

```
Function GeoM(A, B)

Application.Volatile    
Dim x As Integer
Dim y As Integer
Dim rng As Range

x = Application.WorksheetFunction.Match(A, Range("B:B"), 0) ' looking in col B
y = Application.WorksheetFunction.Match(B, Range("B:B"), 0) ' looking in col B

Set rng = Range(Cells(x, 18), Cells(y, 18)) 'Im working on col 18
GeoM = Application.WorksheetFunction.GeoMean(rng)
End Function 
```

问题是，除了`GeoMean`n 之外，这段代码工作得很好。我注意到当数据范围相对较小（数据单元格的数量）时，它会返回一个值。但是，如果范围大于约。126 个细胞，它返回`#value!`.

我被困住了，正在努力解决这个问题。该`GeoMean`功能是否仅限于给定数量的数据？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:03:01.367

我对早期 Excel 版本的测试似乎有 170 个字符的限制（我在 xl03 中测试），在这个[Excel 先生线程中验证](http://www.mrexcel.com/forum/excel-questions/2042-geomean.html)

*（XL10 在较长的数据集上运行良好）*

我也试过：

*   使用`Evaluate`
*   使用一维数组

**不合格样品**

```
Dim X
Set rng1 = Range("A1:A171")
MsgBox Evaluate("GeoMean(A1:A171)")
X = Application.Transpose(rng1)
MsgBox Application.WorksheetFunction.GeoMean(X) 
```

无济于事。

所以我认为你的两种解决方法是：

1.  通过 VBA 将公式插入 Excel 并使用此结果
2.  根据 MrExcel 线程使用的推导`GeoMean`，即`=EXP(AVERAGE(LN(Range)))`

**建议的方法**

```
MsgBox Evaluate("EXP(AVERAGE(LN(A1:A171)))") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T13:38:47.343

感谢`brettdj`，我修复了该功能，现在可以使用：

```
Function GeoM(A, B)

Application.Volatile
Dim x As Integer
Dim y As Integer
Dim rng As Range
Dim LnValue As Double
Dim count As Integer

x = Application.WorksheetFunction.Match(A, Range("B:B"), 0) 'look in col. B
y = Application.WorksheetFunction.Match(B, Range("B:B"), 0) 'look in col. B

Set rng = Range(Cells(x, 18), Cells(y, 18)) 'set range of rows on col# 18

Do
  LnValue = LnValue + Math.Log(Cells(x, 18)) 'calculates sum of ln(value)
  x = x + 1
  count = count + 1   'calculates the total number of values
Loop Until x > y      'stop when x (upper row#) is greater than y (lower row#)

GeoM = Math.Exp((1 / count) * LnValue) 'GeoMean formula

End Function 
```

此函数在指定列中搜索两个值作为上限和下限（注意：这意味着您不应该在该列中有重复值。换句话说，该列应该具有唯一值）。然后，它找到`GeoMean`其他列上的值，该列的值位于同一行范围内。

# c++ - Qt中的缓冲区溢出错误？

> ID：14793726
> 
> 赞同：1
> 
> 时间：2013-02-10T01:35:27.590
> 
> 标签：c++, qt, debugging, crash

很长一段时间以来，我一直在开发一个名为 RoboJournal 的程序。最近有人给我发了一份错误报告，解释了在启用拼写检查功能时显示编辑器窗口表单时整个程序如何崩溃。但是，在程序设置中禁用拼写检查时，一切正常。这个错误似乎只影响特定版本的 Qt (4.8.3)，因为我已经在 4.7.4 和 4.8.4 上测试了该应用程序并且一切正常。在此之前我从未注意到这个错误，因为我没有在 4.8.3 上开发应用程序。这个错误是我还没有为 Debian 打包应用程序的主要原因；我计划在下一个版本中包含修复。

每当我遇到崩溃的错误时，我通常会通过调试器 (gdb) 运行代码，设置断点，然后逐行检查，直到找到问题所在。但是，这次我不能这样做，因为该错误仅影响发布版本；我尝试针对 Qt 4.8.3 调试库构建应用程序，但令我惊讶的是一切正常！显然，崩溃与该特定版本的 Qt 上的发布库有关，但我不知道它是什么。当遇到问题的唯一方法是发布版本时，如何正确调试应用程序？当我通过 gdb 运行它时，我尝试在发布版本上设置断点，但这不起作用。

幸运的是，这个错误似乎已经在 Qt 4.8.4 中得到修复（以及更新的版本，但我还没有在 Qt 5 上测试过），但我仍然需要为那些使用 4.8.3 的人找出一个解决方法。（我不能指望用户推出他们自己的 Qt，而且我不知道 Debian 人什么时候会用新版本更新他们的存储库）有什么想法吗？

这是崩溃的 gdb 输出。据我所知，该错误与 libc.so.6 有关：

```
buffer overflow detected ***: /usr/local/bin/robojournal terminated
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(__fortify_fail+0x5c)[0x7ffff44fb82c]
/lib/x86_64-linux-gnu/libc.so.6(+0x109700)[0x7ffff44fa700]
/usr/local/bin/robojournal[0x49982f]
/usr/local/bin/robojournal[0x49a374]
/usr/local/bin/robojournal[0x49b192]
/usr/local/bin/robojournal[0x49b6da]
/usr/local/bin/robojournal[0x4a947d]
/usr/local/bin/robojournal[0x432e17]
/usr/local/bin/robojournal[0x43529f]
/usr/local/bin/robojournal[0x421afb]
/usr/local/bin/robojournal[0x4ace7b]
/usr/lib/x86_64-linux-gnu/libQtCore.so.4(_ZN11QMetaObject8activateEP7QObjectPKS_iPPv+0x483)[0x7ffff5075123]
/usr/lib/x86_64-linux-gnu/libQtGui.so.4(_ZN15QAbstractButton7clickedEb+0x32)[0x7ffff5bee422]
/usr/lib/x86_64-linux-gnu/libQtGui.so.4(+0x589d2e)[0x7ffff5941d2e]
/usr/lib/x86_64-linux-gnu/libQtGui.so.4(+0x58a560)[0x7ffff5942560]
/usr/lib/x86_64-linux-gnu/libQtGui.so.4(_ZN15QAbstractButton17mouseReleaseEventEP11QMouseEvent+0x8c)[0x7ffff59427cc]
/usr/lib/x86_64-linux-gnu/libQtGui.so.4(_ZN11QToolButton17mouseReleaseEventEP11QMouseEvent+0xa)[0x7ffff59fc99a]
/usr/lib/x86_64-linux-gnu/libQtGui.so.4(_ZN7QWidget5eventEP6QEvent+0x7e0)[0x7ffff55d3850]
/usr/lib/x86_64-linux-gnu/libQtGui.so.4(_ZN19QApplicationPrivate13notify_helperEP7QObjectP6QEvent+0xac)[0x7ffff5583e9c]
/usr/lib/x86_64-linux-gnu/libQtGui.so.4(_ZN12QApplication6notifyEP7QObjectP6QEvent+0x99b)[0x7ffff5588b6b]
/usr/lib/x86_64-linux-gnu/libQtCore.so.4(_ZN16QCoreApplication14notifyInternalEP7QObjectP6QEvent+0x8e)[0x7ffff505f56e]
/usr/lib/x86_64-linux-gnu/libQtGui.so.4(_ZN19QApplicationPrivate14sendMouseEventEP7QWidgetP11QMouseEventS1_S1_PS1_R8QPointerIS0_Eb+0x143)[0x7ffff5584cd3]
/usr/lib/x86_64-linux-gnu/libQtGui.so.4(+0x24a554)[0x7ffff5602554]
/usr/lib/x86_64-linux-gnu/libQtGui.so.4(_ZN12QApplication15x11ProcessEventEP7_XEvent+0xd6f)[0x7ffff560144f]
/usr/lib/x86_64-linux-gnu/libQtGui.so.4(+0x270fa2)[0x7ffff5628fa2]
/lib/x86_64-linux-gnu/libglib-2.0.so.0(g_main_context_dispatch+0x135)[0x7ffff296cab5]
/lib/x86_64-linux-gnu/libglib-2.0.so.0(+0x47de8)[0x7ffff296cde8]
/lib/x86_64-linux-gnu/libglib-2.0.so.0(g_main_context_iteration+0x34)[0x7ffff296cea4]
/usr/lib/x86_64-linux-gnu/libQtCore.so.4(_ZN20QEventDispatcherGlib13processEventsE6QFlagsIN10QEventLoop17ProcessEventsFlagEE+0x66)[0x7ffff508dbf6]
/usr/lib/x86_64-linux-gnu/libQtGui.so.4(+0x270c1e)[0x7ffff5628c1e]
/usr/lib/x86_64-linux-gnu/libQtCore.so.4(_ZN10QEventLoop13processEventsE6QFlagsINS_17ProcessEventsFlagEE+0x2f)[0x7ffff505e2bf]
/usr/lib/x86_64-linux-gnu/libQtCore.so.4(_ZN10QEventLoop4execE6QFlagsINS_17ProcessEventsFlagEE+0x138)[0x7ffff505e548]
/usr/lib/x86_64-linux-gnu/libQtCore.so.4(_ZN16QCoreApplication4execEv+0x88)[0x7ffff5063708]
/usr/local/bin/robojournal[0x412f34]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7ffff441276d]
/usr/local/bin/robojournal[0x413cc1]
======= Memory map: ========
00400000-005b0000 r-xp 00000000 08:01 48248                              /usr/local/bin/robojournal
007af000-007b0000 r--p 001af000 08:01 48248                              /usr/local/bin/robojournal
007b0000-007b5000 rw-p 001b0000 08:01 48248                              /usr/local/bin/robojournal
007b5000-00eb3000 rw-p 00000000 00:00 0                                  [heap]
7fffdc000000-7fffdc021000 rw-p 00000000 00:00 0 
7fffdc021000-7fffe0000000 ---p 00000000 00:00 0 
7fffe16a0000-7fffe16a1000 ---p 00000000 00:00 0 
7fffe16a1000-7fffe1ea1000 rw-p 00000000 00:00 0 
7fffe1ea1000-7fffe215d000 r-xp 00000000 08:01 130                        /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18.0.0
7fffe215d000-7fffe235c000 ---p 002bc000 08:01 130                        /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18.0.0
7fffe235c000-7fffe2362000 r--p 002bb000 08:01 130                        /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18.0.0
7fffe2362000-7fffe23e0000 rw-p 002c1000 08:01 130                        /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18.0.0
7fffe23e0000-7fffe23e5000 rw-p 00000000 00:00 0 
7fffe23e5000-7fffe23f5000 r-xp 00000000 08:01 4894                       /usr/lib/x86_64-linux-gnu/qt4/plugins/sqldrivers/libqsqlmysql.so
7fffe23f5000-7fffe25f5000 ---p 00010000 08:01 4894                       /usr/lib/x86_64-linux-gnu/qt4/plugins/sqldrivers/libqsqlmysql.so
7fffe25f5000-7fffe25f6000 r--p 00010000 08:01 4894                       /usr/lib/x86_64-linux-gnu/qt4/plugins/sqldrivers/libqsqlmysql.so
7fffe25f6000-7fffe25f7000 rw-p 00011000 08:01 4894                       /usr/lib/x86_64-linux-gnu/qt4/plugins/sqldrivers/libqsqlmysql.so
7fffe2648000-7fffe264c000 r-xp 00000000 08:01 10234                      /usr/lib/x86_64-linux-gnu/gdk-pixbuf-2.0/2.10.0/loaders/libpixbufloader-png.so
7fffe264c000-7fffe284c000 ---p 00004000 08:01 10234                      /usr/lib/x86_64-linux-gnu/gdk-pixbuf-2.0/2.10.0/loaders/libpixbufloader-png.so
7fffe284c000-7fffe284d000 r--p 00004000 08:01 10234                      /usr/lib/x86_64-linux-gnu/gdk-pixbuf-2.0/2.10.0/loaders/libpixbufloader-png.so
7fffe284d000-7fffe284e000 rw-p 00005000 08:01 10234                      /usr/lib/x86_64-linux-gnu/gdk-pixbuf-2.0/2.10.0/loaders/libpixbufloader-png.so
7fffe284e000-7fffe286a000 r--s 00000000 08:01 40509                      /usr/share/mime/mime.cache
7fffe286b000-7fffe28cb000 rw-s 00000000 00:04 4620315                    /SYSV00000000 (deleted)
7fffe28cb000-7fffe2afe000 rw-s 00000000 00:04 4587546                    /SYSV00000000 (deleted)
7fffe2afe000-7fffe2ba3000 r--p 00000000 08:01 277820                     /usr/share/fonts/truetype/ttf-dejavu/DejaVuSans-Bold.ttf
7fffe2ba3000-7fffe2bae000 r-xp 00000000 08:01 9203                       /usr/lib/x86_64-linux-gnu/libjbig.so.0.0.0
7fffe2bae000-7fffe2dad000 ---p 0000b000 08:01 9203                       /usr/lib/x86_64-linux-gnu/libjbig.so.0.0.0
7fffe2dad000-7fffe2dae000 r--p 0000a000 08:01 9203                       /usr/lib/x86_64-linux-gnu/libjbig.so.0.0.0
7fffe2dae000-7fffe2db1000 rw-p 0000b000 08:01 9203                       /usr/lib/x86_64-linux-gnu/libjbig.so.0.0.0
7fffe2db1000-7fffe2e1e000 r-xp 00000000 08:01 9499                       /usr/lib/x86_64-linux-gnu/libtiff.so.5.1.0
7fffe2e1e000-7fffe301e000 ---p 0006d000 08:01 9499                       /usr/lib/x86_64-linux-gnu/libtiff.so.5.1.0
7fffe301e000-7fffe301f000 r--p 0006d000 08:01 9499                       /usr/lib/x86_64-linux-gnu/libtiff.so.5.1.0
7fffe301f000-7fffe3022000 rw-p 0006e000 08:01 9499                       /usr/lib/x86_64-linux-gnu/libtiff.so.5.1.0
7fffe3022000-7fffe3029000 r-xp 00000000 08:01 10954                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqtiff.so
7fffe3029000-7fffe3228000 ---p 00007000 08:01 10954                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqtiff.so
7fffe3228000-7fffe3229000 r--p 00006000 08:01 10954                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqtiff.so
7fffe3229000-7fffe322a000 rw-p 00007000 08:01 10954                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqtiff.so
7fffe322a000-7fffe322f000 r-xp 00000000 08:01 10953                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqtga.so
7fffe322f000-7fffe342e000 ---p 00005000 08:01 10953                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqtga.so
7fffe342e000-7fffe342f000 r--p 00004000 08:01 10953                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqtga.so
7fffe342f000-7fffe3430000 rw-p 00005000 08:01 10953                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqtga.so
7fffe3430000-7fffe3484000 r-xp 00000000 08:01 8631                       /usr/lib/x86_64-linux-gnu/libQtSvg.so.4.8.3
7fffe3484000-7fffe3683000 ---p 00054000 08:01 8631                       /usr/lib/x86_64-linux-gnu/libQtSvg.so.4.8.3
7fffe3683000-7fffe3685000 r--p 00053000 08:01 8631                       /usr/lib/x86_64-linux-gnu/libQtSvg.so.4.8.3
7fffe3685000-7fffe3686000 rw-p 00055000 08:01 8631                       /usr/lib/x86_64-linux-gnu/libQtSvg.so.4.8.3
7fffe3686000-7fffe368b000 r-xp 00000000 08:01 10952                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqsvg.so
7fffe368b000-7fffe388a000 ---p 00005000 08:01 10952                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqsvg.so
7fffe388a000-7fffe388b000 r--p 00004000 08:01 10952                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqsvg.so
7fffe388b000-7fffe388c000 rw-p 00005000 08:01 10952                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqsvg.so
7fffe388c000-7fffe38c1000 r-xp 00000000 08:01 9225                       /usr/lib/x86_64-linux-gnu/liblcms.so.1.0.19
7fffe38c1000-7fffe3ac0000 ---p 00035000 08:01 9225                       /usr/lib/x86_64-linux-gnu/liblcms.so.1.0.19
7fffe3ac0000-7fffe3ac1000 r--p 00034000 08:01 9225                       /usr/lib/x86_64-linux-gnu/liblcms.so.1.0.19
7fffe3ac1000-7fffe3ac2000 rw-p 00035000 08:01 9225                       /usr/lib/x86_64-linux-gnu/liblcms.so.1.0.19
7fffe3ac2000-7fffe3ac5000 rw-p 00000000 00:00 0 
7fffe3ac5000-7fffe3b4f000 r-xp 00000000 08:01 9259                       /usr/lib/x86_64-linux-gnu/libmng.so.1.1.0.10
7fffe3b4f000-7fffe3d4f000 ---p 0008a000 08:01 9259                       /usr/lib/x86_64-linux-gnu/libmng.so.1.1.0.10
7fffe3d4f000-7fffe3d52000 r--p 0008a000 08:01 9259                       /usr/lib/x86_64-linux-gnu/libmng.so.1.1.0.10
7fffe3d52000-7fffe3d54000 rw-p 0008d000 08:01 9259                       /usr/lib/x86_64-linux-gnu/libmng.so.1.1.0.10
7fffe3d54000-7fffe3d59000 r-xp 00000000 08:01 10951                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqmng.so
7fffe3d59000-7fffe3f59000 ---p 00005000 08:01 10951                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqmng.so
7fffe3f59000-7fffe3f5a000 r--p 00005000 08:01 10951                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqmng.so
7fffe3f5a000-7fffe3f5b000 rw-p 00006000 08:01 10951                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqmng.so
7fffe3f5b000-7fffe3f9a000 r-xp 00000000 08:01 9207                       /usr/lib/x86_64-linux-gnu/libjpeg.so.8.0.2
7fffe3f9a000-7fffe419a000 ---p 0003f000 08:01 9207                       /usr/lib/x86_64-linux-gnu/libjpeg.so.8.0.2
7fffe419a000-7fffe419b000 r--p 0003f000 08:01 9207                       /usr/lib/x86_64-linux-gnu/libjpeg.so.8.0.2
7fffe419b000-7fffe419c000 rw-p 00040000 08:01 9207                       /usr/lib/x86_64-linux-gnu/libjpeg.so.8.0.2
7fffe419c000-7fffe41ac000 rw-p 00000000 00:00 0 
7fffe41c2000-7fffe41c9000 r-xp 00000000 08:01 10950                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqjpeg.so
7fffe41c9000-7fffe43c8000 ---p 00007000 08:01 10950                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqjpeg.so
7fffe43c8000-7fffe43c9000 r--p 00006000 08:01 10950                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqjpeg.so
7fffe43c9000-7fffe43ca000 rw-p 00007000 08:01 10950                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqjpeg.so
7fffe43ca000-7fffe43d1000 r-xp 00000000 08:01 10949                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqico.so
7fffe43d1000-7fffe45d0000 ---p 00007000 08:01 10949                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqico.so
7fffe45d0000-7fffe45d1000 r--p 00006000 08:01 10949                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqico.so
7fffe45d1000-7fffe45d2000 rw-p 00007000 08:01 10949                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqico.so
7fffe45d2000-7fffe45d9000 r-xp 00000000 08:01 10948                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqgif.so
7fffe45d9000-7fffe47d8000 ---p 00007000 08:01 10948                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqgif.so
7fffe47d8000-7fffe47d9000 r--p 00006000 08:01 10948                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqgif.so
7fffe47d9000-7fffe47da000 rw-p 00007000 08:01 10948                      /usr/lib/x86_64-linux-gnu/qt4/plugins/imageformats/libqgif.so
7fffe47da000-7fffe47dc000 r-xp 00000000 08:01 10901                      /usr/lib/x86_64-linux-gnu/pango/1.6.0/modules/pango-basic-fc.so
7fffe47dc000-7fffe49db000 ---p 00002000 08:01 10901                      /usr/lib/x86_64-linux-gnu/pango/1.6.0/modules/pango-basic-fc.so
7fffe49db000-7fffe49dc000 r--p 00001000 08:01 10901                      /usr/lib/x86_64-linux-gnu/pango/1.6.0/modules/pango-basic-fc.so
7fffe49dc000-7fffe49dd000 rw-p 00002000 08:01 10901                      /usr/lib/x86_64-linux-gnu/pango/1.6.0/modules/pango-basic-fc.so
7fffe49dd000-7fffe49e6000 r-xp 00000000 08:01 10648                      /usr/lib/x86_64-linux-gnu/gtk-2.0/2.10.0/engines/libpixmap.so
7fffe49e6000-7fffe4be6000 ---p 00009000 08:01 10648                      /usr/lib/x86_64-linux-gnu/gtk-2.0/2.10.0/engines/libpixmap.so
7fffe4be6000-7fffe4be7000 r--p 00009000 08:01 10648                      /usr/lib/x86_64-linux-gnu/gtk-2.0/2.10.0/engines/libpixmap.so
7fffe4be7000-7fffe4be8000 rw-p 0000a000 08:01 10648                      /usr/lib/x86_64-linux-gnu/gtk-2.0/2.10.0/engines/libpixmap.so
7fffe4be8000-7fffe4c17000 r-xp 00000000 08:01 10647                      /usr/lib/x86_64-linux-gnu/gtk-2.0/2.10.0/engines/libmurrine.so
7fffe4c17000-7fffe4e17000 ---p 0002f000 08:01 10647                      /usr/lib/x86_64-linux-gnu/gtk-2.0/2.10.0/engines/libmurrine.so
7fffe4e17000-7fffe4e18000 r--p 0002f000 08:01 10647                      /usr/lib/x86_64-linux-gnu/gtk-2.0/2.10.0/engines/libmurrine.so
7fffe4e18000-7fffe4e19000 rw-p 00030000 08:01 10647                      /usr/lib/x86_64-linux-gnu/gtk-2.0/2.10.0/engines/libmurrine.so
7fffe4e19000-7fffe4e25000 r-xp 00000000 08:01 5140                       /lib/x86_64-linux-gnu/libnss_files-2.15.so
7fffe4e25000-7fffe5024000 ---p 0000c000 08:01 5140                       /lib/x86_64-linux-gnu/libnss_files-2.15.so
7fffe5024000-7fffe5025000 r--p 0000b000 08:01 5140                       /lib/x86_64-linux-gnu/libnss_files-2.15.so
7fffe5025000-7fffe5026000 rw-p 0000c000 08:01 5140                       /lib/x86_64-linux-gnu/libnss_files-2.15.so
Program received signal SIGABRT, Aborted.
0x00007ffff4427425 in raise () from /lib/x86_64-linux-gnu/libc.so.6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:46:32.643

处理分段错误的最简单方法是分析保存到内核生成的 coredump 中的堆栈跟踪。大多数发行版都禁用了 coredump 保存，因此可以启用它

```
ulimit -c unlimited 
```

Proc 文件系统有几个文件来配置 corudump 生产。最重要的是[核心模式](http://linux.die.net/man/5/core) `/proc/sys/kernel/core_pattern`，它指定核心转储名称和可选的后处理命令。

当进程接收到分段错误信号时，内核会将其状态保存在 coredump 文件中，以后可以使用[dgb](http://linux.die.net/man/1/gdb)检查该文件：

```
gdb -c core ./binary_which_produced_the_core
bt 
```

这将打印出程序在发生分段错误时所做的事情的回溯。

此外，为了使回溯信息更丰富，您必须安装带有调试符号的软件包。在您的情况下，您将需要 libc、Qt、glib 和您自己的二进制符号。使用 Qt、glib 和 libc，这就像

```
sudo apt-get install libc6-dbg libqt4-dbg libglib2.0-0-dbg 
```

如果您的构建工具是 qmake，那么使用 Qt 二进制文件会更加复杂。

```
CONFIG += debug 
```

在 .pro 文件中将启用调试符号，但是，它也会在代码中启用断言和其他检查，使其行为不同。如果构建工具是 cmake 或 autotools，那么生成调试符号就变得微不足道了。

# mysql - MYSQL 复杂查询中带 LIMIT 的子查询

> ID：14793727
> 
> 赞同：0
> 
> 时间：2013-02-10T01:35:37.977
> 
> 标签：mysql, join, subquery, limit

我正在使用的 Mysql 版本不允许我在子查询中使用 LIMIT，因此我可以加快查询速度。如何在下一个查询中使用 join 代替？

```
SELECT p . * , (

SELECT AVG( review_rating ) AS rating_total
FROM reviews r
WHERE r.review_item_ref = p.pattern_ref
AND r.review_state =1
GROUP BY r.review_item_ref
) AS review_rating
FROM patterns p
WHERE pattern_active >=0
AND p.pattern_family =27
AND p.pattern_ref
IN (

SELECT item_pattern_ref
FROM items
WHERE item_pattern_ref = p.pattern_ref LIMIT 1
)
GROUP BY p.pattern_id
ORDER BY p.pattern_description ASC , LCASE( p.pattern_description ) ASC
LIMIT 0 , 16 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:28:09.670

看起来您正在尝试验证 p.pattern_ref 在项目中是否匹配，对吗？

如果是这样的话，

```
SELECT 
    p . *,
    (SELECT AVG( review_rating ) AS rating_total
        FROM reviews r
        WHERE r.review_item_ref = p.pattern_ref
            AND r.review_state =1
        GROUP BY r.review_item_ref
    ) AS review_rating
FROM patterns p
INNER JOIN items i ON p.pattern_ref = i.item_pattern_ref
WHERE p.pattern_active >= 0
    AND p.pattern_family = 27
GROUP BY p.pattern_id
ORDER BY p.pattern_description ASC , LCASE( p.pattern_description ) ASC
LIMIT 0 , 16 
```

应该管用。INNER JOIN 只会返回双方都匹配的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:32:05.507

您不能在子查询中使用 LIMIT。

# c++ - 创建用户数据库错误“在.....中不匹配'operator =='”--C++

> ID：14793733
> 
> 赞同：0
> 
> 时间：2013-02-10T01:36:59.967
> 
> 标签：c++, function, operators

我一直在命令提示符下处理用户数据库。它允许您添加用户名和密码并登录。当我编译它时，我得到了错误`no match for 'operator==' in`。我不太确定是什么原因造成的。此外，我已将所有内容存储在一个类中。

**我的头文件是：**

```
#ifndef USER_PSW_H
#define USER_PSW_H
#include <string>

class User_Psw
{
    public:
        User_Psw();
        void addToDatabase();
        void getNameIndex();
        bool PasswordMatches();
        void UserCheck();
    protected:
    private:
        int sizeOfDatabase;
        int index;
        std::string Usernames;
        std::string Password;
        std::string username;
        std::string password;
};

#endif // USER_PSW_H 
```

**构造函数是：**

```
User_Psw::User_Psw()
{
    const int SIZE = 100;
    index = 0;
    sizeOfDatabase = 0;
    Usernames[SIZE];
    Password[SIZE];
} 
```

**实际错误的函数是：**

```
void User_Psw::getNameIndex()
{
    for(int i=0; i < sizeOfDatabase; i++)
    {
        if (username == Usernames[i])
        {
            index = i;
        }
    }
} 
```

包含错误的实际代码行是`if (username == Usernames[i])`

如果需要，我还可以添加更多代码片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:32:15.877

这是行不通的，因为`Usernames`当您实际将类型定义为 `std::string`.

你想要这样的东西：

```
std::vector<std::string> Usernames; 
```

然后你可以像这样访问它：

```
if (Usernames[i] == username) { // etc 
```

# ios - 将背景图像/视图设置为实时摄像机视图？

> ID：14793734
> 
> 赞同：5
> 
> 时间：2013-02-10T01:37:02.067
> 
> 标签：ios, objective-c, cocoa-touch

是否可以为特定视图控制器设置背景以显示实时摄像机视图？如果是这样，有人能引导我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T02:03:26.730

是的，绝对有可能。您可以在 UIView 中嵌入实时摄像头供稿，您可以将其放置在您喜欢的任何位置。

从这里开始阅读：[AVFoundation Reference](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVFoundationFramework/_index.html) - 这是你的框架

您正在寻找的特定类是[AVCaptureVideoPreviewLayer](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureVideoPreviewLayer_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009524)

与[AVCaptureSession协同工作](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureSession_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009521)

这是一个示例项目，涵盖了您需要的一切：[AVCam](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-26T15:48:32.090

进口：

```
#import <AVFoundation/AVFoundation.h> 
```

要将相机视图添加到控制器的视图中，请将此代码添加到`viewDidLoad`：

```
AVCaptureSession *session = [[AVCaptureSession alloc] init];
session.sessionPreset = AVCaptureSessionPresetHigh;

AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

NSError *error = nil;
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
[session addInput:input];

AVCaptureVideoPreviewLayer *newCaptureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
newCaptureVideoPreviewLayer.frame = self.view.bounds;

[self.view.layer addSublayer:newCaptureVideoPreviewLayer];

[session startRunning]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T01:59:33.353

我认为您最好的选择是获取并理解这个[名为 AVCam 的苹果示例代码](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112)。您将在代码中看到如何创建 AVCaptureVideoPreviewLayer。您将把它作为 UIView 的子层插入，用作“背景”。

一旦你完成了这个工作，那个 UIView 将就像你的视图层次结构的任何其他部分一样。您可以将其视为背景 UIImageView（尽管它会消耗更多的电池电量）。

# php - PDO 语句不提取数据

> ID：14793735
> 
> 赞同：-1
> 
> 时间：2013-02-10T01:37:22.813
> 
> 标签：php, mysql, pdo

我正在尝试列出表中两个特定列的数据。每当我转到该文件时，它都会返回一个服务器错误。当我删除 while 循环时，它执行得很好，所以我不知道我做错了什么。

这是错误：

> [服务器错误 网站在检索http://dayzlistings.com/reg-whitelist.php](http://dayzlistings.com/reg-whitelist.php)时遇到错误 。它可能因维护而停机或配置不正确。以下是一些建议： 稍后重新加载此网页。HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。

```
try {
    $dbh = new PDO('mysql:host=localhost;dbname=dbname','dbuser','dbpass');
            $sql = "SELECT * from wp_cimy_uef_data";
            $q = $dbh->prepar($sql);
            $q->execute();
                while($row = $q->fetchall() {
                    echo $row['USER_ID'];
                    echo $row['VALUE'];
                }
    }
$dbh = null;
} catch (PDOException $e) {
    print "Error from Dedicated Database!: " . $e->getMessage() . "<br/>";
    die();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:40:51.730

不是`fetchAll()`将整个表作为数组返回吗？

你不需要 while 循环 $row .. 只需不`$row = $q->fetchAll()`使用 while 和 print_r 整个数组，看看你得到了什么..

如果你还想在我认为你可以使用的时候做

```
while($row = $q->fetch()){
//  rest of the code here
} 
```

你也不能在 try catch 之间放任何东西。

```
try{
//code
}
$dbh = null; //**This is not allowed by the way...**
catch(PDOException $e){
  //code 
```

}

丁斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:16:50.430

500 表示当您与服务器交互时出现问题，例如访问数据库。并且`$row['USER_ID']`永远不会工作，而是应该使用`$row[0]['USER_ID']`.

# string - 如何在 AS3 中使用字符串键定义字典？

> ID：14793736
> 
> 赞同：0
> 
> 时间：2013-02-10T01:37:27.170
> 
> 标签：string, actionscript-3, dictionary, key

如何在 AS3 中使用字符串键定义字典？以及如何进行读取操作？例如：

```
var Dic:Dictionary = new Dictionary();
Dic["Exhausted"] = "He who talks more is sooner exhausted, please keep smiling :)";
String str = str.substring(8,str.length-1); // == str = "Exhausted";
trace('Dic[' + str + '] = ' + Dic[str]); 
```

输出是 Dic[Exhausted] = undefined???!!

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:17:41.560

我认为您在此行有语法错误：

```
String str = str.substring(8,str.length-1); 
```

如果你只是使用这个：

```
var d:Dictionary = new Dictionary();
d["Exhausted"] = "He who talks more is sooner exhausted, please keep smiling :)";

trace(d["Exhausted"]); 
```

你可以看到一切都很好。

问题`var str:String = str.substring(8,str.length-1);`在于您定义了一个名为 "str": 的字符串`var str:String`，但是您分配了一个值，该值是`substring()`在 str 上调用的方法的结果，并且当您在其上调用 substring 时，当然 str 尚不存在。不确定这是否有意义：您将 str 定义为在 str 上应用子字符串的结果。

actionscript 编译器应该抱怨 btw：

> 在属性字符串之后需要一个定义关键字（例如函数），而不是 str。

只是一个疯狂的猜测，但是您是否碰巧在代码中的其他地方定义了 str 并且您只是在使用 str 之前再次使用 str 更新它？在这种情况下，您不应该重新定义 str，您应该简单地分配一个新值。例如

```
//somewhere else
var str:String = "12345678Exhausted";
//further down
var Dic:Dictionary = new Dictionary();
Dic["Exhausted"] = "He who talks more is sooner exhausted, please keep smiling :)";
str = str.substring(8,str.length); // == str = "Exhausted";
trace('Dic[' + str + '] = ' + Dic[str]); 
```

此外，另一个语法错误是您如何定义`str`：应该是`var str:String`（as2/as3 语法），而不是`String str`（java/c++/etc.style）

# android - 无法获取 aacp 流

> ID：14793737
> 
> 赞同：0
> 
> 时间：2013-02-10T01:37:33.703
> 
> 标签：android, aac

我正在尝试在 android 中播放实时 AACP 流。为此，我使用了 AACP 解码器，我认为它工作得很好，因为我已经测试了许多 AACP 流并且工作得很好。但是我的流是我无法播放的。请帮助我。[在此处输入链接描述][1]

[http://listen.cheapeststream.com/api/listen/?mount=SAM03AAC265&method=sc](http://listen.cheapeststream.com/api/listen/?mount=SAM03AAC265&method=sc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:08:24.610

找到了这个库，希望它对你有用。

[https://code.google.com/p/aacdecoder-android/](https://code.google.com/p/aacdecoder-android/)

# javascript - jquery如何使用..... addClass().find().text()

> ID：14793749
> 
> 赞同：0
> 
> 时间：2013-02-10T01:39:06.003
> 
> 标签：javascript, jquery

这是我想要的结果：

```
<div id="error" class="alert warning"><span  class="icon"></span>text here</div> 
```

我试过这个：

```
$('#error').addClass('alert error').find('span').addClass('icon').text('text here');` 
```

结果是：

```
<div id="error" class="alert warning"><span class="icon">text here</span></div> 
```

我也试过这个：

```
$('#error').addClass('alert warning').text('text here').find('span').addClass('icon'); 
```

结果是：

```
<div id="error-arch" class="alert warning">text here</div> 
```

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:53:43.897

我建议：

```
$('#error')
    .addClass('error warning')
    .find('span')
    .addClass('icon')
    .after(
        function () {
            return document.createTextNode('text here');
        }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rbvey/)。

虽然我似乎在 中添加了错误的类名`addClass()`，但理论完全一样，无论如何，但显然将类名修改为您要添加的那些。而且，在链接的小提琴中，我不得不根据您在 jQuery 方法中添加/执行的内容来猜测起始 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:40:58.957

我们没有调用替换所有内容`.text()`的，而是：`div``div``append`

```
$('#error')
    .addClass('alert warning').append('text here')
    .find('span').addClass('icon'); 
```

这是小提琴：http: [//jsfiddle.net/v2ULf/](http://jsfiddle.net/v2ULf/)

* * *

如果那里已经有文本，并且只想替换它，则必须首先找到文本节点：

```
$('#error').contents().filter(function() {
    return this.nodeType == 3;
}).last()[0].nodeValue = 'New Text'; 
```

这是小提琴：http: [//jsfiddle.net/v2ULf/1/](http://jsfiddle.net/v2ULf/1/)

# php - 为什么肥皂是安全的？为什么不使用 HTTPS？

> ID：14793751
> 
> 赞同：1
> 
> 时间：2013-02-10T01:39:16.540
> 
> 标签：php, security, soap

这个问题源于我的一次工作面试。面试官问我关于我建立的一个网站。我刚从学校毕业，仍然做错了很多事情，因为我不知道更好，也没有人可以问。当我在白板上为我的面试官布置网站时，他对我没有使用 Web 服务来访问我的数据库感到惊讶。他认为这并不安全，但没有详细说明。他们认为我从来没有想过这样做是一种安全措施，我认为我不这样做是错误的。我的代码都是一页一页。没有 MVC，我的 php 连接和我所有的 php/mysql 选择、插入等都用 php 编写在与我的 html/javascript 和其他所有内容相同的文件中（由于各种原因而错误，但目前不是主题）。我的页面受 https 保护，我认为这就足够了。回顾一下，他可能不知道我的数据库在本地主机上。这个问题的困惑源于我当时和现在缺乏知识。

所以真正的问题（我猜）应该是，我是否需要像 Soap 这样的网络服务充当我的数据库之间的中间件以确保我的网站安全（即使它是本地主机）？我的假设是soap服务器会执行所有的mysql语句并返回我感兴趣的值。或者SAOP服务器会让Mysql数据库执行mysq函数和值（我认为这会增加真正的安全价值） . 我认为因为我使用的是服务器端 php 和 https，所以我会很安全（除了 mysql 注入之类的东西，但我还有其他事情要考虑，比如 mysql_real_escape_string() 和其他一些东西）。

简而言之，我的问题是使用soap将主页文件和实际上在localhost上执行php mysql select语句添加任何安全值vs https的文件之间分开。难道我不能让 php 连接，然后使用 Mysql 服务器执行一些 mysql 功能，页面受 https 保护吗？那不安全吗？

除了我不使用 MVC 模型之外，您能否就 https 与 SOAP 提供一些明智的建议？

我正在尝试在php中做一些自学。我现在使用另一种语言工作，主要是编写脚本。我对 php 非常有热情，我想学习，但不知道可靠地转向哪里。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:52:30.723

您正在混合保护对数据库的访问和保护对 Web 服务的访问的概念。

无论您使用何种 Web 服务架构，您都必须遵循最佳实践来保护您的数据库（防止 SQL 注入，当然不要公开凭据，通过防火墙将数据库与 Web 服务服务器物理分离等）。

如果您的 Web 服务不打算供公众使用，则您必须单独控制对 Web 服务的访问。SOAP 和 REST 都提供了可靠的机制来做到这一点。

SOAP 本身不保护对服务器上文件的访问。它提供了一种机制来保护对 Web 服务的访问。

**更新**

出于“安全”目的而要求网站和数据库之间的 Web 服务是一个愚蠢的想法。应将 Web 服务视为访问功能的替代接口，而不是安全层。

事实上，除非你对公众隐藏你的网络服务，否则黑客只会攻击网络服务而不是（或除了）网站。如果您确实将其隐藏在公众视野之外，那么您已经投入了相当多的工程努力以实现零收益。

从架构的角度来看，将数据访问与用户界面分开是明智的（无论这些层是否在相同或不同的机器上运行）。在 ASP.Net 世界中，[存储库和工作单元](http://www.asp.net/mvc/tutorials/getting-started-with-ef-5-using-mvc-4/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)模式非常普遍。我不确定 PHP 中常用哪些模式。仅为 DB 隔离创建单独的 Web 服务当然不是这样的模式。

# validation - cakephp 不验证选择字段

> ID：14793756
> 
> 赞同：1
> 
> 时间：2013-02-10T01:40:14.223
> 
> 标签：validation, cakephp

我刚刚下载了 cakephp 2.3.0 版的新副本，我正在尝试验证我刚刚创建的表单的选择字段：

```
echo $this->Form->input('province_id', array('empty' => '- select -', 'options' => $options));
echo $this->Form->input('username'); 
```

和验证：

```
public $validate = array(
    'username' => array(
        'required' => array(
            'rule' => array('notEmpty'),
            'message' => 'A username is required'
        )
    ),

    'province_id' => array(
        'rule' => 'notEmpty',
        'message' => 'Select something'
    )
); 
```

用户名字段被正确验证，但省 ID 被忽略。会是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:20:56.917

你应该这样写：

```
public $validate = array(
    'username' => array(
        'required' => array(
            'rule' => array('notEmpty'),
            'message' => 'A username is required'
        )
    ),
    'province_id' => array(
        'required' => array(
            'rule' => array('notEmpty'),
            'message' => 'Select something'
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-08T18:10:07.150

看起来您的表单助手声明很好。

我对 Cake 的经验表明，当您开始混合语法时，验证会很麻烦（您的一个字段有一个嵌套数组，而另一个没有）。我确信正在发生的事情有一些押韵或原因，但我并没有真正深入研究，通常只是反复试验。

尝试这个：

```
public $validate = array(
    'username' => array(
        'rule' => 'notEmpty',
        'required' => true,
        'message' => 'A username is required'
    ),

    'province_id' => array(
        'rule' => 'notEmpty',
        'required' => true,
        'message' => 'Select something'
    )
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T13:57:57.583

迟到总比不好，试试这个：

```
public $validate = array(
    'username' => array(
        'required' => array(
            'rule' => array('notEmpty'),
            'message' => 'A username is required'
        )
    ),
    'province_id' => array(
        'required' => array(
            'rule' => array('myOwnValidationRule'),
            'message' => 'Select something'
        )
    )
);

function myOwnValidationRule($data)
{ 
    if($data["province_id"] != 'empty')
    {
        return true;
    }
} 
```

# bash - 头输出直到特定行

> ID：14793757
> 
> 赞同：2
> 
> 时间：2013-02-10T01:40:15.997
> 
> 标签：bash, unix, grep, unix-head

我有一堆以下格式的文件。

*一个.txt*：

```
some text1      
more text2    
XXX
more text  
....  
XXX
.  
.  
XXX 
still more text  
text again 
```

每个文件至少有 3 行以`XXX`. 现在，对于每个文件，`A.txt`我想将所有行写入到 file 的第 3 次出现`XXX`（在上面的示例中是直到前一行`still more text`）`A_modified.txt`。

我想在 bash 中执行此操作，并想出`grep -n -m 3 -w "^XXX$" * | cut -d: -f2`在每个文件中获取相应的行号。

是否可以`head`与这些行号一起使用来生成所需的输出？

PS：我知道一个简单的 python 脚本可以完成这项工作，但我试图在这个 bash 中做没有特定的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T02:04:32.507

更简单的方法是使用`awk`. 假设您当前的工作目录中只有感兴趣的文件，请尝试：

```
for i in *; do awk '/^XXX$/ { c++ } c<=3' "$i" > "$i.modified"; done 
```

或者，如果您的文件很大：

```
for i in *; do awk '/^XXX$/ { c++ } c>=3 { exit }1' "$i" > "$i.modified"; done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T01:41:49.830

head -n 将打印出文件的前'n'行

```
#!/bin/sh

for f in `ls *.txt`; do
  echo "searching $f" 

  line_number=`grep -n -m 3 -w "^XXX$" $f | cut -d: -f1 | tail -1` 

  # line_number now stores the line of the 3rd XXX 

  # now dump out the first 'line_number' of lines from this file
  head -n $line_number $f
done 
```

# jquery - jquery 选项卡导航菜单

> ID：14793758
> 
> 赞同：2
> 
> 时间：2013-02-10T01:40:22.240
> 
> 标签：jquery, tabs, navigation

我刚开始学习jQuery，所以我是初学者。

我的目标是创建一个标签导航菜单。我在这里制作了这段代码：

```
$(".tab_content").hide();
$(".tab_content:first").show();

$("ul.tabs li").click(function() {

  $(".tab_content").hide();
  var h_active = $(this).attr("rel"); 
  $("#"+h_active).fadeIn(500);      

  $("ul.tabs li").removeClass("active");
  $(this).addClass("active");

  $(".v_tabs").removeClass("v_active");
  $(".v_tabs[rel^='"+h_active+"']").addClass("v_active");

}); 
```

但是在互联网上阅读，我意识到这并不是最好的。

[这](http://jsfiddle.net/zPavan/ESe7k/1/)是一个查看整个代码的示例：

如何添加淡出过渡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:41:27.610

```
$("#selectorForElement").fadeOut(1000); //fadeout for 1 second 
```

# wpf - WPF Grid 控件中的分页数据

> ID：14793759
> 
> 赞同：0
> 
> 时间：2013-02-10T01:40:24.427
> 
> 标签：wpf, rest, data-paging

我有一个以页面形式返回数据的 Rest 服务。我知道得到第一个结果集后有多少页数据。现在我想在 WPF 应用程序中使用此服务，例如在网格控件（或列表视图）中显示结果。

问题是整个分页机制对最终用户应该是透明的，因此他们不应该通过除了在网格中滚动之外的任何方式触发数据获取。这可能吗？您将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:27:17.020

这是您的任务的另一种可能的解决方案：http: [//www.devzest.com/blog/post/wpf-data-virtualization.aspx](http://www.devzest.com/blog/post/wpf-data-virtualization.aspx)

主要思想是创建自己的**IList**实现，它将封装所有异步页面加载功能。

作为奖励，该文章包含具有一组附加功能的完整示例代码：

> *   选择、排序和过滤效果很好，就像所有数据都存储在本地一样；
> *   根据需要在单独的线程中加载数据，不会阻塞 UI；
> *   数据加载时的视觉反馈；如果失败，用户可以重试最后一次失败的尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:50:20.720

我认为这个问题很有趣，但是对于 stackoverflow 窗口来说答案太长了，所以我构建了一个使用预取集合视图的简单应用程序。

这有点类似于 Woodman 发布的方法。

[https://github.com/mrange/CodeStack/tree/master/q14793759/AutoFetching](https://github.com/mrange/CodeStack/tree/master/q14793759/AutoFetching)

有趣的代码在类中：PrefetchingCollectionView

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T22:08:37.180

将您的网格或列表放入 ScrollViewer，订阅[ScrollChanged](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.scrollchanged.aspx)事件，然后使用事件 args 属性确定您是否足够接近可滚动区域的末尾，并从您的服务请求下一页，最后将接收到的数据添加到末尾列表或网格。

简而言之。如果您需要更具体的示例，请告诉我。

**编辑：**好的，假设您正在使用`System.Windows.Controls.DataGrid`控件来显示您的数据。我做出这个假设是因为您已经说过您的网格确实具有内置的滚动功能，并且没有其他名称类似于网格的控件具有它。也因为使用 DataGrid 进行数据显示是有意义的。:)

您像这样声明您的 DataGrid：

```
<DataGrid HorizontalAlignment="Left" Margin="20,10,0,0" 
          VerticalAlignment="Top" Height="301" Width="498" 
          ScrollViewer.ScrollChanged="DataGrid_ScrollChanged_1"
          ItemsSource="{x:Static Fonts.SystemFontFamilies}">            
</DataGrid> 
```

请注意，我正在使用`ScrollViewer.ScrollChanged`路由事件。这是可能的，因为 DataGrid 确实内置了 ScrollViewer。这意味着可以订阅该事件并分析它的参数。

以下是我出于测试目的处理此事件的方式：

```
private void DataGrid_ScrollChanged_1(object sender, ScrollChangedEventArgs e)
    {
        Debug.WriteLine("Extent height: " + e.ExtentHeight + 
                        ", vertical offset: " + e.VerticalOffset + 
                        ", viewport height: " + e.ViewportHeight);
    } 
```

当我的数据网格滚动到顶部时，我看到以下输出：

```
Extent height: 267, vertical offset: 0, viewport height: 13 
```

当它滚动到底部时：

```
Extent height: 267, vertical offset: 254, viewport height: 13 
```

因此，很容易确定您何时接近底部并采取相应措施：

```
const int threshold = 20;
if (e.ExtentHeight <= e.VerticalOffset + e.ViewportHeight + threshold) 
{
    AskForNextPage();
} 
```

当然，这里有一些细微差别。您需要跟踪您是否已经下载了某些页面，以及您已经加载了多少页面，以避免数据重复和其他不一致。而且，老实说，与我在这里写的相比，这将是最难做的部分。:)

# c++ - 将不同类型的向量传递给模板函数

> ID：14793760
> 
> 赞同：-1
> 
> 时间：2013-02-10T01:40:43.853
> 
> 标签：c++, templates, vector

我收到一个编译器错误，上面写着

`could not deduce template argument for 'std::vector<T*>&' from 'std::vector<_Ty>'`

```
template <typename T> void foo(vector<T*>& a, int left, int right)
{
     ...
}

main()
{
     ...
     //declare and instantiate 3 vectors
     vector<int> intVector;

     foo(intVector, 0, 100);
     foo(doubleVector, 0, 100);
     foo(charVector, 0, 100);
     ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:10:48.400

`int`无法匹配`T*`。

要么制作`vector`a`vector<int*>`要么制作模板 take `vector<T>`。

# mysql - Firebird中的for语句到Mysql中的Loop语句

> ID：14793768
> 
> 赞同：0
> 
> 时间：2013-02-10T01:41:28.347
> 
> 标签：mysql, firebird

我在firebird中有这个SQL代码并且工作得很好

```
set term !! ;

EXECUTE BLOCK AS
declare variable vtable_name VARCHAR(31);
BEGIN
for select table_name from mytables into :vtable_name
execute statement 'DROP TABLE ' || :vtable_name || ';';
END!!

set term ; !! 
```

现在我正在尝试在 Mysql 数据库中做一个非常相似的事情。阅读 mysql 手册我阅读了关于 LOOP 语句和关于 WHILE 语句的信息。

这是我的mysql代码，但不起作用

```
WHILE (SET @vtable_name  = (select table_name from mytables))
DO
  BEGIN
   DROP TABLE @vtable_name;
  END;
END WHILE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:35:06.140

您的问题是“（从 mytables 中选择 table_name）”语句将返回一个结果集，并且您将整个结果集分配给一个变量。第二个问题是 DROP / SELECT 语句将不允许动态表名/列名。

可以使用动态sql，见demo：[http ://sqlfiddle.com/#!2/cf278/1](http://sqlfiddle.com/#!2/cf278/1)

并[在 mysql sproc 中使用变量作为表名](https://stackoverflow.com/questions/2754423/use-a-variable-for-table-name-in-mysql-sproc)

# php - 每次 ping 时脚本都脱机返回

> ID：14793769
> 
> 赞同：0
> 
> 时间：2013-02-10T01:41:31.027
> 
> 标签：php

我有下面的脚本，它可以ping任何静态放入文件的IP，但是当我发布到它时它总是失败。

```
<?php
$server = $_POST['ip'];
if (!$socket = @fsockopen("$server", 80, $errno, $errstr))
{
  echo "<font color='red'><strong>Offline!</strong></font>";
}
else 
{
  echo "<font color='green'><strong>Online!/strong></font>";

  fclose($socket);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:48:26.300

我添加了几个功能：

```
<?php
function port($Host, $Port = '')
   {
   if (strstr($Host, ':'))
      {
      if (strstr($Host, '/'))
         {
         $Output = substr($Host, strpos($Host, ':') +1, (strpos($Host, '/') -1) - strpos($Host, ':'));
         }
      else
         {
         $Output = substr($Host, strpos($Host, ':') +1);
         }
      }

   if ((isset($Output)) and ($Output != ''))
      {
      return $Output;
      }
   else
      {
      if ($Port != '')
         {
         return $Port;
         }
      }
   }

function server($Host)
    {
   if (strpos($Host, '//'))
      {
      $Host = substr($Host, strpos($Host, '//') +2);
      }

   if(strstr($Host,"/"))
        {
        $Host = substr($Host, 0, strpos($Host, "/"));
        }

   if(strstr($Host,":"))
        {
        $Host = substr($Host, 0, strpos($Host, ":"));
        }

    return $Host;
    }

    $Host = $_GET['ip'];
    $Host = server($Host);

    $churl = @fsockopen($Host, 80, $errno, $errstr, 10);

if (!$churl) { 
    echo("<div><b>Offline</b></div>"); 
    } 
    else 
    { 
    echo("<div><b>Online</b></div>"); 
    }

?> 
```

# javascript - 在我的网站上自动搜索 Google 搜索结果

> ID：14793773
> 
> 赞同：1
> 
> 时间：2013-02-10T01:42:17.030
> 
> 标签：javascript, html, ajax, jquery

我正在做一个[网站](http://gigster.webege.com)。当您单击我的搜索框并键入时，您单击搜索，然后它会将您带到带有搜索结果的 google.com，当您键入时，我将如何使用 ajax 在框架中显示结果？当您在[http://google 上搜索时。 com](http://google.com)您键入的文本会自行显示结果，而无需按搜索，我该怎么做？这是我的html片段

```
<div class='search'>
<form method="get" id='search' action="http://www.google.com/search">
<input type="hidden" name="q" size="31" maxlength="255" value="Site Name:" />
<input type="text" name="q" size="31" maxlength="255" style="height: 24px;" placeholder="Search..." />
</div> 
```

我在它后面有很多 css 来使文本框放大和改变颜色。这是片段以防万一。

```
#search input[type="text"] {
background: url(imgs/search-white.png) no-repeat 10px 6px #444;
border: 0 none;
font: bold 12px Arial,Helvetica,Sans-serif;
color: #d7d7d7;
width:150px;
padding: 6px 15px 6px 35px;
-webkit-border-radius: 20px;
-moz-border-radius: 20px;
border-radius: 20px;
text-shadow: 0 2px 2px rgba(0, 0, 0, 0.3); 
-webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2)   inset;
-moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
-webkit-transition: all 0.7s ease 0s;
-moz-transition: all 0.7s ease 0s;
-o-transition: all 0.7s ease 0s;
transition: all 0.7s ease 0s;
outline: none;
}

#search input[type="text"]:focus {
background: url(imgs/search-dark.png) no-repeat 10px 6px #fcfcfc;
color: #6a6f75;
width: 175px;
-webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
-moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
text-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
outline: none;
}
div.search
{
position:fixed;
top:8px;
right:5px;
} 
```

那么我将如何制作一个在您键入时显示谷歌搜索结果的 ajax 框架？我对ajax一无所知我不知道如何用它开始一行代码所以请深入解释

*旁注对不起，如果网站看起来不好，我 13

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T04:02:30.207

在不了解 JavaScript 的情况下，您会被卡住，我建议您先学习它。[w3schools.com](http://w3schools.com)将是一个好地方。

Google 不再允许您通过 iframe 使用他们的网站，因此我建议使用 startpage.com，因为他们的结果来自 google.com

我能想到的最简单的方法是这样的（在这个例子中，我使用网站的移动版本，因为它嵌入得更好。）：http: [//jsfiddle.net/A8M4r/](http://jsfiddle.net/A8M4r/)

```
<!DOCTYPE html>
<html>
<head>
<script>
function querify(query) {
    return query.split(" ").join("+") // replaces spaces with +s for url
}
function updateIframe(query) {
    query = querify(query);
    var i = document.getElementById("searchResults");
    var searchEngine = "http://startpage.com/do/m/mobilesearch/?q=" 
    var yourSiteToSearch= "site:example.com+"
    i.src = searchEngine + yourSiteToSearch + query;
}
</script>
</head>
<body>
   <input oninput="updateIframe(this.value)" type="text">
   <iframe id="searchResults" height="100%" width="100%">
</body> 
```

希望这可以帮助！

PS如果你想要一个只有当用户点击搜索框时才会弹出iframe的版本，这里有一个：jsfiddle.net/4EDUK

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:47:05.083

```
$(window).load(function()
{
    var opts = 
    {
       url: "http://www.google.com/search?q=" + $("#mysearchInput").val(),
       success: function(data)
       {
           //parse the results which are in variable "data". 
           //You're going to need to analyze the results yourself
           //and parse it yourself, in whatever way you want to

           var myresults = "my example results here";
           $("#myiframe").append(myresults);
       }
    }

    $.ajax(opts);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T04:13:51.697

如果您想在 jQuery 中自定义自动完成功能，您可以使用[jQuery Autocomplete](http://jqueryui.com/autocomplete/jQuery)之类的功能，您必须使用数组或远程文件定义自动完成值。

否则，Google 自定义搜索使您能够通过带有 Google 提供的属性参数的搜索框使用自动完成功能。这是一个可以帮助您的网页 - [http://www.theblog.ca/autocomplete-google-custom-search-input-field](http://www.theblog.ca/autocomplete-google-custom-search-input-field)

# maven - 为什么执行属性不能返回 project.version？

> ID：14793775
> 
> 赞同：0
> 
> 时间：2013-02-10T01:42:41.770
> 
> 标签：maven, maven-plugin

我正在开发一个自定义 Maven 插件，并阅读了一些文件。有一些变量定义为

```
${foo} 
```

如果有在 pom 中，maven 可以理解它的价值。我也必须了解它的价值。我找到：

```
/**
* @parameter expression="${session}"
*/
private MavenSession session;
...
session.getExecutionProperties() 
```

当我说它时，我得到了很多属性，但是当我说：

```
session.getExecutionProperties().getProperty("project.version") 
```

它返回我为空。执行属性返回什么（它是否包括系统属性和 JVM 属性）以及为什么它不理解类似的东西

> ${project.version}

**我应该怎么做才能获得类似的东西的价值？**

**PS：**我的问题不是我怎样才能得到project.version，这只是一个例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:02:21.713

您应该使用以下内容：

```
/**
 * The Maven Project Object
 *
 * @parameter expression="${project}"
 * @required
 * @readonly
 */
protected MavenProject project;

...

project.getVersion(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:13:39.207

我已经实现了一个带有拦截器的插值器，并且可以获得 Maven 变量的值。

# c - 从 MIPS 调用 C 时，我们使用 JR 还是 JALR？

> ID：14793778
> 
> 赞同：0
> 
> 时间：2013-02-10T01:42:54.840
> 
> 标签：c, mips, calling-convention, mips32

我正在编写一些自修改代码，我想`foo`从 MIPS 调用一个 C 函数（调用它）。

我已将 , 的 mem add`foo`加载`&foo`到`$t1`. 现在我`jr/jalr $t1`。

将 C 设置`$ra`为我当前的 PC(+8)（在跳转之前）允许我使用`JR`还是我必须`JALR`改为使用（即，照顾它，因为 C 不会）？

我现在无法测试这个，因为我正在调试我的宏（用于 MIPS 助记符）。我一定搞砸了，因为我不断收到非法指令错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:02:43.330

你必须使用`JALR`. C函数怎么可能知道如何`$ra`为您设置？

# mysql - MySQL 您不能在 FROM 子句中指定要更新的目标表

> ID：14793779
> 
> 赞同：0
> 
> 时间：2013-02-10T01:43:00.467
> 
> 标签：mysql

当我运行这个查询

```
update Apply 
set major='CSE'
where major='EE' and sID in (select sID from Student
                             where GPA >= all (select GPA from Student
                       where sID in (select sID from Apply
                             where major='EE'))); 
```

它返回一个错误：ERROR 1093 (HY000): You can't specify target table 'Apply' for update in FROM 子句。但它在另一个 MySQL 中成功了。

如果我在代码末尾添加“as tmp”，它会返回错误：ERROR 1064 (42000): You have an error in your SQL syntax; 检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的“as tmp”附近使用正确的语法

有人可以告诉我原因以及如何修改代码吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:47:13.107

问题：您`Apply`在两个不同的上下文中引用了该表两次。

解决方案：给他们不同的别名，例如`Apply as a1`和`Apply as a2`

（也许这也需要为`Student`）

# php - 在数组中设置嵌套项

> ID：14793782
> 
> 赞同：2
> 
> 时间：2013-02-10T01:43:31.017
> 
> 标签：php, arrays, eval

我的功能：

```
function setItem(array $arr, $item, $value, $delimiter = '.') {
    $nodes = explode($delimiter, $item);
    $code = "\$arr['".join("']['", $nodes)."'] = \$value;";
    eval($code);
    return $arr;
} 
```

使用：

```
$data = array();
$data = setItem($data, 'test.qwerty.sub', 'value'); 
```

有没有“评估”的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T01:49:57.370

是的，但它涉及使用引用：

```
function setItem(array &$arr, $path, $value, $delim = '.'){

  $path = explode($delim, $path);

  $root = &$arr;

  // pointer to the current item      
  $current = &$arr;

  foreach($path as $item){
    $current[$item] = array();

    // set pointer to the newly created array
    $current = &$current[$item];
  }

  // reached the last path component;
  // assign the value to it
  $current = $value;

  return $root;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T01:59:09.967

你可以用递归来做到这一点：

```
function setItem($item, $value, $delimiter = '.') {
    $nodes = explode($delimiter, $item, 2);
    if(!isset($nodes[1]))
        $data = $value;
    else
        $data = setItem($nodes[1], $value, $delimiter);
    return array($nodes[0] => $data);
}

$data = setItem('test.qwerty.sub', 'value'); 
```

# django - 美味和原始 sql

> ID：14793785
> 
> 赞同：2
> 
> 时间：2013-02-10T01:44:04.803
> 
> 标签：django, tastypie

如何让 Tastypie 获取原始 sql 查询集？`queryset = Foo.objects.raw(sql)`似乎没有工作。不可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:39:58.167

```
queryset = super(class_name, self).get_query_set()
return queryset.whatever() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:42:35.880

这似乎有效：

```
class BarResource(ModelResource):

    class Meta:
        queryset = Bar.objects.all()

    def dehydrate(self, bundle):
        qs = Bar.objects.raw('SELECT * FROM foo_bar')
        return [row for row in qs] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T01:55:50.320

您可以尝试覆盖脱水函数以包含原始 sql 语法和/或对查询集进行按请求更改[http://django-tastypie.readthedocs.org/en/latest/cookbook.html](http://django-tastypie.readthedocs.org/en/latest/cookbook.html)

我个人更愿意在 view.py 中创建一个自定义视图函数，它与你的 api REST 语法相匹配——例如 /api/v1/rawsql 类似的东西来保持你的模式相同——你只是以不同的方式管理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-23T20:58:37.580

这对我有用：D

```
class UsersResource(ModelResource):
    class Meta:
        resource_name   = "users"
        queryset        = User.objects.all()
        allowed_methods = ['get']

   def obj_get_list(self, bundle, **kwargs):
        query = """
        SELECT 
            id, name
        FROM 
            users 
        ORDER BY name"""         
        qs = User.objects.raw(query)
        return [row for row in qs] 
```

# c - 使用 strncmp c 风格的字符串函数

> ID：14793788
> 
> 赞同：0
> 
> 时间：2013-02-10T01:44:18.577
> 
> 标签：c, c-strings, strncmp

我有一个字符串，我试图找出它是否是另一个单词的子字符串。

例如（伪代码）

```
say I have string "pp"

and I want to compare it (using strncmp) to 

happy
apples
pizza

and if it finds a match it'll replace the "pp" with "xx"
changing the words to

haxxles
axxles
pizza 
```

这可以使用 strncmp 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T01:47:30.593

不直接使用`strncmp`，但您可以使用`strstr`：

```
char s1[] = "happy";

char *pos = strstr(s1, "pp");
if(pos != NULL)
    memcpy(pos, "xx", 2); 
```

这仅适用于搜索和替换字符串的长度相同的情况。如果不是，您将不得不使用`memmove`并可能分配一个更大的字符串来存储结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T01:47:50.033

不使用 strncmp。你需要[strstr](http://linux.die.net/man/3/strstr)即

```
char happy = "happy";
char *s = strstr(happy, "pp");
if (s) memcpy(s, "xx", 2); 
```

# java - 自动检测正确的地图

> ID：14793789
> 
> 赞同：0
> 
> 时间：2013-02-10T01:44:28.860
> 
> 标签：java, static, hashmap, dao, dto

```
public class DAOHelper {

private static final Map<Class, Class> DTO_TO_DAO_MAP;
private static final Map<Class, Class> ACDTO_TO_ACDAO_MAP;

static {
    DTO_TO_DAO_MAP = new HashMap<Class, Class>();
    DTO_TO_DAO_MAP.put(EmployerDTO.class, EmployerDAO.class);

    ACDTO_TO_ACDAO_MAP = new HashMap<Class, Class>();
    ACDTO_TO_ACDAO_MAP.put(AcademicDTO.class, AcademicDAO.class);

}

public static BaseDAO<?> getDAO(Class dtoClass) {
    BaseDAO<?> dao = null;
    Class daoClass = ACDTO_TO_ACDAO_MAP.get(dtoClass); //here
    //rest of code  here

} 
```

`Class daoClass = ACDTO_TO_ACDAO_MAP.get(dtoClass);`在这部分代码中，而不是`ACDTO_TO_ACDAO_MAP`如何让代码自动检测到这一点，所以我不会为每个可能的代码`DTO_TO_DAO_MAP`或其他代码手动执行它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:54:49.470

我建议使用命名约定和反射：

假设每个 DAO (FooDTO) 在同一个包中都有一个相应的 DAO (FooDAO)，代码看起来像这样（免责声明 - 这不是我的想法，可能需要 tweek 或 2 来编译）

```
public static BaseDAO<?> getDAO(Class dtoClass) {

    String dtoClassName = dtoClass.getName();
    String daoClassName = dtoClassName.replaceAll("DTO$", "DAO");
    Class daoClass =  Class.forName(daoClassName);
    retrun daoClass.newInstance(daoClass);
} 
```

当然，这个逻辑可以很容易地改变以适应不同的命名约定或不同的包。

# javascript - 是否可以使用 socket.io 取消订阅 MtGox API 频道？

> ID：14793791
> 
> 赞同：4
> 
> 时间：2013-02-10T01:44:46.693
> 
> 标签：javascript, api, socket.io

下面的代码似乎没有做任何事情。有没有退订的方法？

```
var MTGOX  = 'https://socketio.mtgox.com/mtgox';
var conn = io.connect(MTGOX);
conn.emit({ 
  'channel':'d5f06780-30a8-4a48-a2f8-7ed181b4a13f',
  'op':'mtgox.unsubscribe'
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:01:25.323

Mt.Gox API 响应“消息”事件，因此您应该使用 Socket.IO 的`send`命令。

```
conn.send({
    "channel": "d5f06780-30a8-4a48-a2f8-7ed181b4a13f",
    "op": "unsubscribe"
}); 
```

要*取消订阅*频道，请发送操作“取消订阅”。要*订阅*，请发送操作“mtgox.subscribe” [（在 bitcoin.it wiki 上列出）](https://en.bitcoin.it/wiki/MtGox/API/Streaming#Direct_commands)。

这是替代方法（用于澄清）：

```
conn.emit('message', {
    "channel": "d5f06780-30a8-4a48-a2f8-7ed181b4a13f",
    "op": "unsubscribe"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:03:21.957

此处的示例：[https](https://en.bitcoin.it/wiki/MtGox/API/Streaming#op:subscribe_and_op:unsubscribe) : //en.bitcoin.it/wiki/MtGox/API/Streaming#op:subscribe_and_op:unsubscribe 将操作名称显示为“取消订阅”，而您有“mtgox.unsubscribe”。您可以尝试不使用前缀，和/或让我们知道您从哪里获得该前缀吗？

# python - 无法在 GTK 中垂直打包按钮

> ID：14793798
> 
> 赞同：2
> 
> 时间：2013-02-10T01:45:53.013
> 
> 标签：python, gtk

我想把两个按钮竖着装在盒子里，为什么不行？这是我的代码。

```
from gi.repository import Gtk
class MyWindow(Gtk.Window):
    def __init__(self):
        Gtk.Window.__init__(self, title="Hello World")
        self.box = Gtk.Box(orientation=Gtk.Orientation.VERTICAL)
        self.box = Gtk.Box(spacing=6)
        self.add(self.box)
        self.button1 = Gtk.Button(label="Hello")
        self.box.pack_start(self.button1, True, True, 0)
        self.button2 = Gtk.Button(label="Goodbye")
        self.box.pack_start(self.button2, True, True, 0)

win = MyWindow()
win.connect("delete-event", Gtk.main_quit)
win.show_all()
Gtk.main() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T21:57:29.690

您创建`self.box`一个具有垂直方向的框，然后立即用另一个完全不同的、间距为 6 的新框（以及默认的水平方向）覆盖它。而是做

```
self.box = Gtk.Box(orientation=Gtk.Orientation.VERTICAL, spacing=6) 
```

# c# - 使用 ValueInjecter 将 EntityFramework POCO 复制到 DTO 而不触发延迟加载列表和属性

> ID：14793800
> 
> 赞同：5
> 
> 时间：2013-02-10T01:45:58.277
> 
> 标签：c#, entity-framework, entity-framework-4, valueinjecter

我在使用 ValueInjecter 将 EntityFramework POCO 的深度克隆创建到类似的 DTO 类时遇到问题。

如果我从具有多个相关实体/具有导航属性的子实体的复杂 POCO 对象注入到稍微简单的 DTO 中，ValueInjecter 似乎仍然会触及多个属性值并导致从数据库中延迟加载此数据。

我相信是 ValueInjecter 在准备将值注入指定目标时获取特定源对象中每个属性的值。

我的实际项目相当复杂，但作为一个例子，我以 NerdDinner 为例并以更简单的方式复制了这个问题。（NerdDinner 是使用 EF4 进行代码优先开发的示例（[ScottGu NerdDinner 示例](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)）。

所以我有两个模型类。

```
public class Dinner
{
    public int DinnerId { get; set; }
    public string Title { get; set; }
    public DateTime EventDate { get; set; }
    public string Address { get; set; }
    public string HostedBy { get; set; }
    public virtual ICollection<RSVP> Rsvps { get; set; }
} 
```

和

```
public class RSVP
{
    public int RsvpID { get; set; }
    public int DinnerID { get; set; }
    public string AttendeeEmail { get; set; }
    public virtual Dinner Dinner { get; set; }
} 
```

我还创建了一个 DTO 类：

```
public class DinnerDTO
{ 
    public int DinnerId { get; set; }
    public string Title { get; set; }
    public DateTime EventDate { get; set; }
    public string Address { get; set; }
    public string HostedBy { get; set; }
} 
```

**请注意**，我`Dinner`的`DinnerDTO`.

同样重要的是，我使用 CloneInjection 约定来深度克隆对象。在 SO 以及许多其他站点上都建议使用此代码作为执行深度克隆注入的方法。此代码可在此处找到：[CloneInjection 代码](https://valueinjecter.codeplex.com/wikipage?title=Deep%20Cloning)

现在，为了强调发生的延迟加载，我去插入了 10,000 个 RSVP 用于 Id = 1 的晚餐。

然后我执行以下代码：

```
var dinner = nerdDinners.Dinners.Where(x => x.DinnerId == 1).FirstOrDefault();
DinnerDTO dinnerDTO = new DinnerDTO();
dinnerDTO.InjectFrom<CloneInjection>(dinner); 
```

如果我在带有 的行设置断点`InjectFrom`，然后跨过它，则会有相当大的延迟，因为它会延迟加载 10,000 个 RSVP。如果我还在 CloneInjection 代码中同时在`Match`和`SetValue`方法中设置断点，则在加载滞后解决之前，这些都不会被命中。这告诉我，它必须是 ValueInjecter 内部的东西，它会导致`RSVPs`属性的延迟加载。

现在，如果我将上面的代码修改为：（`Include`在查询中添加一个）

```
var dinner = nerdDinners.Dinners.Where(x => x.DinnerId == 1).Include("RSVPs").FirstOrDefault();
DinnerDTO dinnerDTO = new DinnerDTO();
dinnerDTO.InjectFrom<CloneInjection>(dinner); 
```

此更改强制 RSVP 列表的“急切加载”，并且正如预期的那样，延迟与查询一致，并且该`InjectFrom`行完全没有延迟。

我已经阅读了 StackOverflow 上一些模糊相关的帖子，其中一些建议在数据上下文上禁用然后启用 LazyLoading。我试过了，虽然它确实有效，但感觉很脏。

我通读了这篇文章（[将 NHibernate POCO 复制到 DTO 而不会触发延迟加载或急切加载](https://stackoverflow.com/q/11816732/535607)）和相关代码，他的方法似乎是使用一些 NHibernate 方法来确定属性是否是未初始化的代理并以某种方式将它们剥离。我一直无法在 EF4 中找到类似的东西。

真正让我感到困惑的部分是，Rsvps 集合甚至不在我的 DTO 对象中，我什至对它的价值都不感兴趣。这对我来说似乎不正确。我认为 ValueInjecter 代码不应该询问目标对象甚至可能不关心的属性值。

有什么方法可以覆盖 ValueInjecter 中的这种行为吗？以某种方式推迟对属性值的评估，直到绝对确定我想要该值，例如`SetValue`在`ConventionInjection`? 那么至少它不会评估我的 DTO 甚至不想要的属性。

我能想到的最佳解决方案是让 ValueInjecter 或自定义约定以某种方式能够检测到已卸载的延迟加载属性，而不是对其进行评估，而是将目标上的该属性设置为 null。我不认为这是可能的。

我应该使用通过 EF 的更好方法吗？我不想急切地加载数据库中的所有内容。

我完全关闭了，问题根本不在于 ValueInjecter 吗？

*** 编辑 *** 我找到了解决方案并回答了这个问题，我仍然很好奇我是不是做错了，或者是否还有更好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T19:28:24.373

我觉得我为自己的问题找到了一个令人满意的答案，所以我打算自己解决这个问题。我最终做了两件事。

首先，我在 dbContext 上完全禁用了延迟加载。dbContext 构造函数中的类似内容。

`this.Configuration.LazyLoadingEnabled = false;`

我并没有真正使用 EF 的延迟加载功能，所以关闭它并没有什么大的损失。这只是意味着如果我想要填充相关实体，我必须`Include`在我的查询中指定它们。没什么大不了。

我做的另一件事是修改深度克隆注入约定，以使用[SmartConventionInjection 源](http://valueinjecter.codeplex.com/wikipage?title=SmartConventionInjection&referringTitle=Home)`SmartConventionInjection`代码。除了比基础注入更快的注入之外，它在调用之前也不会触及属性值，所以即使我确实有一些延迟加载属性，除非 DTO 也具有该属性，否则它们不会被触及。`SetValue`

# bash - Bash不会改变变量值

> ID：14793814
> 
> 赞同：2
> 
> 时间：2013-02-10T01:47:53.877
> 
> 标签：bash

我正在尝试将变量`reload`从`0`更改`1`为您可以在下面的代码中看到：

```
for d in /home/*; do
  u="${d##*/}";
  reload=0;
  echo "Checking $u";
  if [ -e /home/$u/info/reload.php ]; then
    echo "FOUND!";
    reload=1;
  fi
done
echo $reload;
if [ $reload = 1 ]; then
  service apache2 reload
fi 
```

问题是它没有被改变，`$reload`保持不变`0`，输出类似于这个（apache没有重新加载）：

```
Checking user1
FOUND!
Checking user2
0 #< this should be 1 not 0 :( 
```

为什么我的 bash 变量不会改变？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T01:53:21.093

您正在`reload`为每个用户重置。如果没有找到最后一个用户的文件，`reload`将`0`在您退出循环时。

建议的修复（带有缩进以提高可读性）：

```
#!/usr/bin/env bash

reload=0
for d in /home/*; do
    u="${d##*/}"
    echo "Checking $u";
    if [ -e /home/$u/info/reload.php ]; then
        echo "FOUND!"
        reload=1
    fi
done
echo $reload
if [ $reload -eq 1 ]; then
    service apache2 reload
fi 
```

# java - 相乘区间

> ID：14793815
> 
> 赞同：0
> 
> 时间：2013-02-10T01:47:54.667
> 
> 标签：java

我正在尝试创建此方法，但由于某种原因它不起作用...

```
public static Interval multiply(Interval x, Interval y) {
   int min = Math.min(x.lo * y.lo, x.hi * y.hi, x.hi * y.lo, x.hi * y.hi);
   int max = Math.max(x.lo * y.lo, x.hi * y.hi, x.hi * y.lo, x.hi * y.hi);
   return new Interval(min, max); 
```

它与 Math.min/Math.max 有关，但我查了一下，所以我不确定我是如何使用不正确的？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:53:17.100

丑陋，但是：

```
public static Interval multiply(Interval x, Interval y) {
   int min = Math.min(Math.min(Math.min(x.lo * y.lo, x.hi * y.hi), x.hi * y.lo), x.hi * y.hi);
   int max = Math.max(Math.max(Math.max(x.lo * y.lo, x.hi * y.hi), x.hi * y.lo), x.hi * y.hi);
   return new Interval(min, max); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:23:35.020

说我疯了，但是由于区间的乘法从不使用它自己的高和低，根据定义，只要数字是正数，低和高的结果将是低*低和高*高。只要您明确知道该数字始终是正数（就像您在使用时间一样），您就可以这样做：

```
public static Interval multiply(Interval x, Interval y){
   return new Interval(x.lo*y.lo, x.hi*y.hi);
} 
```

如果你不确定，你可以试试这个：

```
public static Interval multiply(Interval x, Interval y){
   int min = (x.lo*y.lo <= x.lo*y.hi) ? x.lo*y.lo: x.lo*y.hi;
   min = (min <= x.hi*y.lo) ? min: x.hi*y.lo;
   min = (min <= x.hi*y.hi) ? min: x.hi*y.hi;
   int max = (x.lo*y.lo >= x.lo*y.hi) ? x.lo*y.lo: x.lo*y.hi;
   max = (max >= x.hi*y.lo) ? max: x.hi*y.lo;
   max = (max >= x.hi*y.hi) ? max: x.hi*y.hi;
   return new Interval(min, max);
} 
```

使用位运算符可能有更好的方法来完成这些比较，但我不知道如何。

# javascript - 给定一个带有多个提交按钮的表单，我可以单独控制它们吗？

> ID：14793816
> 
> 赞同：0
> 
> 时间：2013-02-10T01:48:10.477
> 
> 标签：javascript, jquery, forms

我有一个带有两个提交按钮的表单：一个更新购物车中的商品数量，另一个让用户继续结帐。如果购物车中没有物品是“运输”物品，那么我希望用户不能结帐。我仍然希望用户能够更新数量。

最初我使用了这个javascript：

```
 $('#cartform').submit(function (e) {
    console.log(e)

    if ($('.item.shipping').length > 0) {
      // there are Shipping items in the cart, so proceed
      console.log("OK to checkout")
    } else {
      // there are no Shipping items so display help
      console.log("NO")
      e.preventDefault();
      $('#shipping-calculator-info p').text("Please select shipping destination.")    
    }
  }); 
```

我很快意识到这也禁用了更新数量按钮。

我最初的想法是`click`从我想要处理的按钮中捕获事件，并`preventDefault`在它上面。不过，这似乎并不能阻止提交的发生。接下来我想也许`e`，事件，可能有一个指定事件来源的字段——然后我就可以在上面的`submit`代码中添加一个条件。虽然我无法找到这样的字段（并且我读到了此信息不存在的提示）。

如何防止同一表单上的多个提交按钮之一的默认操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:53:45.633

我看到你现在做了什么，你引用的是表单，而不是按钮。没问题，您只需要使用 jQuery 很棒的选择器来查找提交按钮。这是一个工作示例：

```
<form id="form1" method="post" action="formDataHandler.php">
<input name='text1' type='text' value='text input'><br />
<input id='subBtn1' type='submit' value='submit 1'><br />
<input id='subBtn2' type='submit' value='submit 2'>
</form>

<script type="text/javascript">
$("#form1").find('input[type=submit]').on('click', function (e) {
alert($(e.target).val());
    if ($(e.target).val() == 'submit 1') { 
    e.preventDefault();
    } else {
        //do something else
    }
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:53:59.333

与其附加到表单的提交事件，为什么不附加到实际按钮的单击事件？

这样您就可以为每个按钮提供适当的代码。您可以在结帐按钮的处理程序中使用 JavaScript 提交表单，然后只需从更新按钮更新 DOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T01:54:00.920

你只需要`return false;`.

```
$('#cartform').submit(function (e) {
    console.log(e)

    if ($('.item.shipping').length > 0) {
      // there are Shipping items in the cart, so proceed
      console.log("OK to checkout")
    } else {
      // there are no Shipping items so display help
      console.log("NO")
      e.preventDefault();
      $('#shipping-calculator-info p').text("Please select shipping destination.")    
      return false;
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T02:00:03.010

您可以使用的快速解决方法是将提交按钮“转换”为简单按钮，然后将您的代码绑定到点击事件，并在适当的时候从点击事件中使用：

```
$('#cartform').submit(); 
```

手动提交表单。

# android - 安卓手电筒应用

> ID：14793820
> 
> 赞同：0
> 
> 时间：2013-02-10T01:49:02.327
> 
> 标签：android, flashlight

我找不到关于如何在 Eclipse Android 中构建闪光灯应用程序的直接答案。我将如何创建这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:27:17.353

这个问题太宽泛了，可能没有人会专门为您编写教程。话虽如此，以下是可能对您有所帮助的提示：

如果您想要一个由涂成白色的屏幕模拟的手电筒应用程序，我建议您阅读*android-flashlight*的（非常简单的）来源，它正是这样做的。项目来源可在此处获得：[http ://code.google.com/p/android-flashlight/](http://code.google.com/p/android-flashlight/)

如果您想要使用相机 LED 的手电筒，我建议您阅读*搜索灯*应用程序（可在 Google Play 中获得）的资源，该应用程序正是这样做的。来源位于此处：[http ://code.google.com/p/search-light/](http://code.google.com/p/search-light/)

如果您想从头开始开发应用程序，那么没有简单的方法，只能学习 Android 平台的基础知识。互联网上有大量可用的教程，它们将指导您完成创建您的第一个最小应用程序的过程 - 只需 google 即可。该平台得到了很好的描述和记录。它还包含有关如何构建应用程序的指南。所有这些资源都在这里：http: [//developer.android.com/training/index.html](http://developer.android.com/training/index.html)

# ruby-on-rails - Rails 视图文件中的高效编码

> ID：14793827
> 
> 赞同：0
> 
> 时间：2013-02-10T01:50:20.433
> 
> 标签：ruby-on-rails, views

这些是我的控制器、视图和部分文件。我的问题是部分文件中的第二行。当项目等于@drafts 和等于@completed 我想写COMPLETED 时，我想在这里写草稿。我该如何解决？

**控制器.rb**

```
def projects
    @projects = @user.projects
    @drafts = @user.projects.draft
    @currents = @user.projects.current
    @completed = @user.projects.ended
    @user.projects.completed.each do |c|
      @completed << c
    end
    @all_projects = [@drafts,@currents,@completed]
  end 
```

**查看文件**

```
<% for projects in @all_projects %>
  <%= render :partial => 'user_projects', :locals => {:projects => projects} %>
<% end %> 
```

**部分文件**

```
<div class="panel">
        <h3>PROJECTS GENERAL NAME</h3>
        <div class="panel_contents">
          <% if projects.length == 0 %>
            <h2>There is no project.</h2>
          <% else %>
              <div class="attributes_table">
                <table cellspacing="0",cellpadding="0",border="0">
                  <thead>
                    <tr>
                      <th>Project Name</th>
                      <th>Created</th>
                      <th>Ended</th>
                      <th>Duration</th>
                      <th>Condition</th>
                      <th>Prize</th>
                    </tr>
                  </thead>
                  <tbody>
                     <% projects.each do |project| %>
                      <tr>
                        <td><%= link_to project.title, admin_projects_path('search[id_equals]' => project.id) %></td>
                        <td><%= l project.created_at, :format => :default  if project.created_at %></td>
                        <td><%= l project.end, :format => :default  if project.end %></td>
                        <td><%= Brief.find_by_project_id(project.id).duration  %></td>
                        <td><%= project.stage %></td>
                        <td><%= number_to_currency project.prize %></td>
                      </tr>
                    <% end %>
                  </tbody>
                </table>
              </div>
          <% end %>  
        </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:03:24.750

最简单的方法是在部分中使用“projects.first”。假设字符串位于名为 status 的属性下

```
<h3><%= projects.first.status %></h3> 
```

下面更复杂的解决方案

```
<% [[@drafts, 'Drafts'], [@completed, 'Completed']].each do |projects, title| %>
  <%= render 'user_projects', :projects => projects, :title => title %>
<% end %>

 # partial
<h3><%= title %></h3> 
```

# java - Hadoop 执行错误：映射中的键类型不匹配：预期 org.apache.hadoop.io.Text，收到 org.apache.hadoop.io.LongWritable

> ID：14793828
> 
> 赞同：2
> 
> 时间：2013-02-10T01:50:50.310
> 
> 标签：java, hadoop

我正在Hadoop上实现PageRank算法，正如标题所说，我在尝试执行代码时遇到了以下错误：

映射中键的类型不匹配：预期 org.apache.hadoop.io.Text，收到 org.apache.hadoop.io.LongWritable

在我的输入文件中，我将图形节点 ID 存储为键，并将有关它们的一些信息存储为值。我的输入文件具有以下格式：

1 \t 3.4,2,5,6,67

4 \t 4.2,77,2,7,83

……

试图理解错误的含义，我尝试使用 LongWritable 作为我的主要变量类型，如下面的代码所示。这意味着我有：

地图< LongWritable,LongWritable,LongWritable,LongWritable >

减少< LongWritable,LongWritable,LongWritable,LongWritable >

但是，我也试过：

地图<文字,文字,文字,文字>

减少<文本，文本，文本，文本>

并且：

地图<LongWritable，文本，LongWritable，文本>

减少< LongWritable,Text,LongWritable,Text >

我总是想出同样的错误。我想我很难理解错误中预期和接收的含义。这是否意味着我的地图函数从我的输入文件中期望 LongWritable 并且它得到了文本？我使用的输入文件的格式或变量类型是否有问题？

这是完整的代码，您能告诉我要更改什么以及在哪里更改吗？：

```
import java.io.IOException;
import java.util.*;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import java.lang.Object.*;

import org.apache.commons.cli.ParseException;
import org.apache.commons.lang.StringUtils;
import org.apache.commons.configuration.Configuration;
import org.apache.hadoop.security.Credentials;
import org.apache.log4j.*;
import org.apache.commons.logging.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.io.DoubleWritable;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.JobContext;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.input.SequenceFileInputFormat;
import org.apache.hadoop.mapreduce.lib.input.TextInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.mapreduce.lib.output.TextOutputFormat;
import org.apache.hadoop.mapreduce.lib.output.SequenceFileOutputFormat;
import org.apache.hadoop.util.GenericOptionsParser;

public class Pagerank
{   

public static class PRMap extends Mapper<LongWritable, LongWritable, LongWritable, LongWritable>
{

    public void map(LongWritable lineNum, LongWritable line, OutputCollector<LongWritable, LongWritable> outputCollector, Reporter reporter) throws IOException, InterruptedException
    {
        if (line.toString().length() == 0) {
            return;
        }

        Text key = new Text();
        Text value = new Text();
        LongWritable valuel = new LongWritable();
        StringTokenizer spline = new StringTokenizer(line.toString(),"\t");
        key.set(spline.nextToken());  
        value.set(spline.nextToken());  

        valuel.set(Long.parseLong(value.toString()));
        outputCollector.collect(lineNum,valuel);

        String info = value.toString();
        String splitter[] = info.split(",");

        if(splitter.length >= 3)
        {
            float f = Float.parseFloat(splitter[0]);
            float pagerank = f / (splitter.length - 2);

            for(int i=2;i<splitter.length;i++)
            {
                LongWritable key2 = new LongWritable();
                LongWritable value2 = new LongWritable();
                long l;

                l = Long.parseLong(splitter[i]);
                key2.set(l);
                //key2.set(splitter[i]);
                value2.set((long)f);

                outputCollector.collect(key2, value2);
            }
        }
    }
}

public static class PRReduce extends Reducer<LongWritable,LongWritable,LongWritable,LongWritable>
{
    private Text result = new Text();
    public void reduce(LongWritable key, Iterator<LongWritable> values,OutputCollector<LongWritable, LongWritable> results, Reporter reporter) throws IOException, InterruptedException
    {

        float pagerank = 0;
        String allinone = ",";
        while(values.hasNext())
        {
            LongWritable temp = values.next();
            String converted = temp.toString();
            String[] splitted = converted.split(",");

            if(splitted.length > 1)
            {                   
                for(int i=1;i<splitted.length;i++)
                {
                    allinone = allinone.concat(splitted[i]);
                    if(i != splitted.length - 1)
                        allinone = allinone.concat(",");
                }
            }
            else
            {
                float f = Float.parseFloat(splitted[0]);
                pagerank = pagerank + f;
            }
        }
        String last = Float.toString(pagerank);
        last = last.concat(allinone);

        LongWritable value = new LongWritable();
        value.set(Long.parseLong(last));

        results.collect(key, value);
    }      
}

public static void main(String[] args) throws Exception
{      

    org.apache.hadoop.conf.Configuration conf = new org.apache.hadoop.conf.Configuration();

    String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();
    if (otherArgs.length != 2) {
      System.err.println("Usage: wordcount <in> <out>");
      System.exit(2);
    }

    Job job = new Job(conf, "pagerank_itr0");

    job.setJarByClass(Pagerank.class);      
    job.setMapperClass(Pagerank.PRMap.class);       
    job.setReducerClass(Pagerank.PRReduce.class);    

    job.setOutputKeyClass(LongWritable.class);            
    job.setOutputValueClass(LongWritable.class);            
    FileInputFormat.addInputPath(job, new Path(otherArgs[0]));
    FileOutputFormat.setOutputPath(job, new Path(otherArgs[1]));
    job.waitForCompletion(true);

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T09:13:32.773

您没有在作业配置中设置映射器输出类。尝试使用以下方法从 Job 设置键和值类：

> setMapOutputKeyClass();
> 
> setMapOutputValueClass();

# node.js - 将数据从服务器返回到客户端 javascript 中发送的 ajax 请求

> ID：14793829
> 
> 赞同：0
> 
> 时间：2013-02-10T01:51:06.427
> 
> 标签：node.js, jquery, client-side

*   Node.js 网络服务器
*   Web 服务器中的请求处理程序

> ```
> app.get('/documents/:id.:format?', function(req, res) {
>    **dataTobeSentToClientSideJavaScript** = processRequest (req);
>    ... 
> }) 
> ```

*   来自客户端javascript的ajax请求

    > ```
    > var request = $.ajax({
    > url: "/documents/xxx",
    > });
    > request.done(handleResponse); 
    > ```

*   我能够在服务器端接收请求

应该在服务器端编写什么代码，以便我可以使用在服务器端创建的 dataTobeSentToClientSideJavaScript 填充上面的 ajax 请求中预期的“handleRespone”对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:56:47.220

You want to use methods exposed by the response object such as res.write, res.end or res.json

take a look at [http://nodejs.org/api/http.html#http_class_http_serverresponse](http://nodejs.org/api/http.html#http_class_http_serverresponse) (Node.js API)

and since you're using Express - [http://expressjs.com/api.html#res.status](http://expressjs.com/api.html#res.status)

# javascript - 为回调函数添加 then 方法

> ID：14793830
> 
> 赞同：5
> 
> 时间：2013-02-10T01:51:08.773
> 
> 标签：javascript, callback

我最近看到了一些看起来像这样的代码：

```
myFunc(args).then(function() { ... }); 
```

我发现这个回调语法非常优雅。我的理解是这不是 vanilla JS 的一部分，我希望能够在不依赖特定库的情况下偶尔使用它，所以我对如何自己实现它感兴趣。那么，这种事情是如何工作的，你将如何为函数调用实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T02:52:29.783

这种模式称为“承诺”。它由 jQuery 和 dojo 等实现，一种方法是查看他们的代码，看看他们是如何实现的。

一般的实现模式是创建一个函数，该函数返回一个对象，该对象包括一个函数（然后）将一对函数作为回调传递给前一个方法，然后在成功或失败时运行该方法。[MSDN 在此处的博客文章](http://blogs.msdn.com/b/ie/archive/2011/09/11/asynchronous-programming-in-javascript-with-promises.aspx)中提供了有关承诺的更多信息

在 gitHub 上发布了一个极简实现：[Promises GIST](https://gist.github.com/814052/690a6b41dc8445479676b347f1ed49f4fd0b1637)

```
function Promise () {
    this._thens = [];
}

Promise.prototype = {

    /* This is the "front end" API. */

    // then(onResolve, onReject): Code waiting for this promise uses the
    // then() method to be notified when the promise is complete. There
    // are two completion callbacks: onReject and onResolve. A more
    // robust promise implementation will also have an onProgress handler.
    then: function (onResolve, onReject) {
        // capture calls to then()
        this._thens.push({ resolve: onResolve, reject: onReject });
    },

    // Some promise implementations also have a cancel() front end API that
    // calls all of the onReject() callbacks (aka a "cancelable promise").
    // cancel: function (reason) {},

    /* This is the "back end" API. */

    // resolve(resolvedValue): The resolve() method is called when a promise
    // is resolved (duh). The resolved value (if any) is passed by the resolver
    // to this method. All waiting onResolve callbacks are called
    // and any future ones are, too, each being passed the resolved value.
    resolve: function (val) { this._complete('resolve', val); },

    // reject(exception): The reject() method is called when a promise cannot
    // be resolved. Typically, you'd pass an exception as the single parameter,
    // but any other argument, including none at all, is acceptable.
    // All waiting and all future onReject callbacks are called when reject()
    // is called and are passed the exception parameter.
    reject: function (ex) { this._complete('reject', ex); },

    // Some promises may have a progress handler. The back end API to signal a
    // progress "event" has a single parameter. The contents of this parameter
    // could be just about anything and is specific to your implementation.
    // progress: function (data) {},

    /* "Private" methods. */

    _complete: function (which, arg) {
        // switch over to sync then()
        this.then = which === 'resolve' ?
            function (resolve, reject) { resolve(arg); } :
            function (resolve, reject) { reject(arg); };
        // disallow multiple calls to resolve or reject
        this.resolve = this.reject = 
            function () { throw new Error('Promise already completed.'); };
        // complete all waiting (async) then()s
        var aThen, i = 0;
        while (aThen = this._thens[i++]) { aThen[which] && aThen[which](arg); }
        delete this._thens;
    }

}; 
```

（请注意，这不是我的代码。我查看了它，它作为一个起点看起来不错，但所有功劳归[原作者](https://github.com/unscriptable)所有）

# php - MySQL 多个“AND”语句

> ID：14793831
> 
> 赞同：1
> 
> 时间：2013-02-10T01:51:24.507
> 
> 标签：php, mysql

我正在尝试使用多个 WHERE 子句运行查询。如果我进行多项搜索，它会从单个条件返回一条记录。我需要这个查询来返回一个包含所有条件而不仅仅是一个条件的结果。

你可以[在这里](http://www.menuhead.net/Steelers/2Expert.php)看到它。

另外，我提供了代码：

```
if (isset ( $_POST ["btnSearch"] )) {
echo "<br>Selected Options are :<br>";
$checked = $_POST ["criteria"];

$criteria = "";
$separator = ", ";
for($i = 0; $i < count ( $checked ); $i ++) {
    echo "  " . $checked [$i] . "<br/>";

    if ($i == count ( $checked ) - 1) {
        $separator = "";
    }

    $criteria = $criteria . "'" . $checked [$i] . "'" . $separator;
}
echo "<br><br>";

echo $criteria . "<br><br>";
include "config.php";

mysql_select_db ( "MyHead", $con );
//$DM = implode(',',$criteria);
$mysqlQuery = "SELECT tblRestaurants.RestName, tblLocDet.LocationID, tblLocDet.DetailID, tblDetails.DetailName, tblRestaurants.RestName
FROM tblRestaurants INNER JOIN (tblLocations INNER JOIN (tblLocDet INNER JOIN tblDetails ON  tblLocDet.DetailID = tblDetails.DetailID) ON tblLocations.LocationID = tblLocDet.LocationID) ON  tblRestaurants.RestID = tblLocations.RestID
GROUP BY tblRestaurants.RestName, tblLocDet.LocationID, tblLocDet.DetailID, tblDetails.DetailName
 HAVING tblDetails.DetailName IN (" . $criteria . ");";

if (! $rs = mysql_query ( $mysqlQuery )) {
    echo "Cannot parse query";
} elseif (mysql_num_rows ( $rs ) == 0) {
    echo "No records found";
} else {
    echo "<table id=\"myTable\" table width=\"710\" class=\"beautifuldata\" align=\"Left\" cellspacing=\"0\">\n";
    echo "<thead>\n<tr>";
    echo "<th>PLACE</th>";
    echo "<th>ADDRESS</th>";
    echo "<th>PHONE</th>";
    echo "<th>PRICE</th>";
    echo "<th>RATING</th>";
    echo "</tr>\n</thead>\n";
    while ( $row = mysql_fetch_array ( $rs ) ) {
        echo "<tr><td><strong><a href='" . $row [RestPage] . "'>" . $row ['RestName'] . "</a></strong></td>";
        echo "<td>" . $row ['DetailName'] . "</td>";
        echo "<td>" . $row ['Phone'] . "</td>";
        echo "<td>" . $row ['Price'] . "</td>";
        echo "<td>" . $row ['Rating'] . "</td>";
        echo "</tr>";
    }
}
echo "</table><br />\n";

mysql_close ( $con );
}
?> 
```

表：

```
tblRestaurants (RestID, RestName)
tblLocations (LocationID, CityID, AreaID, CuisineID)
tblLocDet (DetailID, LocationID)
tblDetails (DetailID, DetailName, DetailType) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:30:00.347

为确保所有选定的行都具有 中的所有项目`$criteria`，一种方法是计算此条件变量中的这些项目，然后具有`HAVING COUNT(DISTINCT DetailName) = $n`，以便任何选定的行都应具有所有项目，例如：

```
SELECT 
  r.RestName, 
  ld.LocationID, 
  ld.DetailID, 
  d.DetailName
FROM tblRestaurants     AS r
INNER JOIN tblLocations AS l  ON r.RestID     = l.RestID
INNER JOIN tblLocDet    AS ld ON l.LocationID = ld.LocationID
INNER JOIN
(
  SELECT l.Locationid
  FROM tblLocDet l
  INNER JOIN tbldetails d ON l.detailid = d.detailid
  WHERE d.detailname IN ('det1', 'det2', 'det3')
  GROUP BY l.locationid
  HAVING COUNT(DISTINCT DetailName) = $n
)                       AS ld2 ON ld.locationid = ld2.locationid
INNER JOIN tblDetails   AS d   ON ld.DetailID   = d.DetailID   
GROUP BY r.RestName, 
         ld.LocationID, 
         ld.DetailID, 
         d.DetailName; 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/8fe92/7)。

这会给你类似的东西：

```
| RESTNAME | LOCATIONID | DETAILID | DETAILNAME |
-------------------------------------------------
|     res1 |          1 |        1 |       det1 |
|     res1 |          1 |        2 |       det2 |
|     res1 |          1 |        3 |       det3 | 
```

* * *

但是，您可以缩短此查询；例如，如果您从子句中删除`detailid`,并使用来在一行中选择它们，如下所示：`detailname``GROUP BY``GROUP_CONCAT``,`

```
SELECT 
  r.RestName, 
  ld.LocationID, 
  GROUP_CONCAT(DISTINCT d.DetailName separator ',') Details
FROM tblRestaurants     AS r
INNER JOIN tblLocations AS l  ON r.RestID     = l.RestID
INNER JOIN tblLocDet    AS ld ON l.LocationID = ld.LocationId
INNER JOIN tblDetails   AS d  ON ld.DetailID  = d.DetailID   
WHERE d.detailname IN ('det1', 'det2', 'det3')
GROUP BY r.RestName, 
         ld.LocationID
HAVING COUNT(DISTINCT d.DetailName) = 3; 
```

[**更新了 SQL Fiddle 演示**](http://sqlfiddle.com/#!2/8fe92/6)。

这会给你类似的东西：

```
| RESTNAME | LOCATIONID |        DETAILS |
------------------------------------------
|     res1 |          1 | det3,det2,det1 | 
```

**请注意：**`HAVING COUNT(DISTINCT d.DetailName) = 3`如果您想获取*至少* 将其更改为`>=`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:39:43.010

这是一个解决方案：

```
<?php
if (isset ( $_POST ["btnSearch"] )) {
$checked = (array) $_POST ["criteria"];
sort($checked);
$criteria = implode(",", $checked);
echo "<br>Selected Options are :<br>" . $criteria . "<br><br>";

include "config.php";

mysql_select_db ( "MyHead", $con );

$criteria = mysql_real_escape_string($criteria);

$mysqlQuery = "
SELECT r.RestName, ld.LocationID, ld.DetailID, d.DetailName, r.RestName
FROM tblRestaurants AS r
INNER JOIN tblLocations AS l 
  ON r.RestID = l.RestID
INNER JOIN tblLocDet AS ld 
  ON l.LocationID = ld.LocationID 
INNER JOIN tblDetails AS d 
  ON ld.DetailID = d.DetailID
INNER JOIN (
  SELECT DetailID, GROUP_CONCAT(DetailName ORDER BY DetailName) AS DetailList 
  FROM tblDetails GROUP BY DetailID) AS dx
  ON ld.DetailID = dx.DetailID
WHERE dx.DetailList = '$criteria'";

if (! $rs = mysql_query ( $mysqlQuery )) {
  . . . 
```

其余的将与您的代码相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T02:25:29.053

你需要这个查询：

```
SELECT tblRestaurants.RestName, ...
FROM tblRestaurants 
INNER JOIN tblLocations ON tblLocations.RestID = tblRestaurants.RESTID
INNER JOIN tblLocDet ON tblLocDet.LocationID = tblLocations.LocationID
INNER JOIN tblDetails ON tblLocDet.DetailID  = tblDetails.DetailID
WHERE tblDetails.DetailName IN (" . $criteria . ");";
ORDER BY... 
```

您不需要`GROUP BY`，因为您没有聚合函数（MIN、MAX 等）。用于`ORDER BY`对列表进行排序。

转移到 mysqli_*（或 PDO）函数并使用准备好的语句来避免 SQL 注入也是一个好主意

# ruby-on-rails-3 - before_filter 倒置了？

> ID：14793832
> 
> 赞同：0
> 
> 时间：2013-02-10T01:51:48.913
> 
> 标签：ruby-on-rails-3, before-filter

我目前是用户：is_logged？进入我的控制器以检查用户是否已登录，但我希望某些区域仅供未登录用户使用。

```
 private
  def is_logged?
    !!current_user
  end

  private
  def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
  end

  helper_method :is_logged?
  helper_method :current_user 
```

有没有办法让 before_filter 评估相反的结果。

当前 :is_logged? 如果它被记录，则返回 true，否则返回 false。如果没有记录，我希望它返回 true，反之亦然。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:26:04.823

我建议您只保留一种方法来确定用户是否登录，而不是使用`logged_in?`and`not_logged_in?`方法重复代码。为了简单和可读性，可能类似于：

```
private

  def logged_in?
    !current_user.nil?
  end
  helper_method :logged_in? 
```

然后，当您想对*已*登录的用户执行某些操作时：

```
if logged_in?
  # do something for logged in users
end 
```

*并专门针对未登录*的用户做一些事情：

```
unless logged_in?
  # do something for users who are not logged in.
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:07:19.317

我确信有一种方法可以简化这一点，但出于学习目的，我认为这可以做到。

```
def not_logged_in?
  if defined? current_user
    current_user.nil?
  else
    true
  end
end 
```

# php - 将mysql中的自动增量列更新+1？

> ID：14793835
> 
> 赞同：0
> 
> 时间：2013-02-10T01:52:18.290
> 
> 标签：php, mysql

有人可以帮助我吗，我正在尝试创建一个像系统这样的用户。用户应该能够单击 A like 按钮并让它插入该配置文件的 user_id 并自动增加 likes 列。我也在努力做到这一点，以便下一个出现并喜欢相同个人资料的人也可以点击喜欢并将喜欢的自动增量列每次更新一个。

我是 mysql 和 php 的新手，我真的很挣扎。有人可以告诉我哪里出错了吗？提前致谢。

```
<?php

require_once('includes/session.php');
require_once('includes/functions.php');
require('includes/_config/connection.php');

session_start();

    confirm_logged_in();

    if (isset ($_GET['to'])) {
    $user_to_id = $_GET['to'];

}

if (!isset($_GET['to']))
    exit('No user specified.');

$user_id = $_GET['to'];

$result = mysql_query("SELECT * FROM ptb_likes WHERE liked_id ='".$user_to_id."' ");

if( mysql_num_rows($result) > 0) {
    mysql_query("UPDATE ptb_likes SET likes +1 WHERE liked_id = '".$user_to_id."' ");

    $autoinc = mysql_query("ALTER TABLE likes AUTO_INCREMENT = $id");
}
else
{
    mysql_query("INSERT INTO ptb_likes (liked_id) VALUES ('".$user_to_id."') ");
}

if($result) 
{ 

header("Location: {$_SERVER['HTTP_REFERER']}");

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:57:07.657

如果你正在做一个“喜欢”的系统，最好有一个每行有一个喜欢的表格。

然后您可以通过参考ID查询数据库。

让你有帖子和喜欢。每个帖子都有一个 Post_ID，因此您的喜欢表架构将类似于

```
ID
Post_ID
Time 
```

所以下次你想看看 Post #3 有多少赞时，你可以

```
SELECT COUNT(*) FROM posts WHERE post_id = 3 
```

这样您就可以更好地控制和减少查询。

在一行中增加喜欢的值是可行的，但效率不高。

# haskell - yesod 持久性：从键列表中获取实体列表

> ID：14793837
> 
> 赞同：2
> 
> 时间：2013-02-10T01:52:29.893
> 
> 标签：haskell, persistent, yesod

假设我有`fooIds :: [Key Foo]`. 我怎么得到`foos :: [Foo]`？

我试过了

```
do
    foos <- map get fooIds 
```

但它给了我

```
No instance for (MonadBaseControl IO m0)
  arising from a use of `get' 
```

我假设是因为我需要使用`runDB`. 但我不太确定如何使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T04:56:01.083

它看起来像这样：

```
foos <- runDB $ mapM get fooIds 
```

但是，这会给你一个`Maybe Foo`s 列表。`Foo`您可以通过替换`get`为`get404`或使用将其转换为 s 列表`catMaybes`。请注意，这是两种不同的方法：第一种方法，如果任何 ID 不存在，用户将得到 404。第二种方法，该键将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-22T21:02:15.547

另一种有用的方法是

```
foos <- runDB $ mapM getJustEntity fooIds 
```

# python - 检查输入是否是循环中的字符串

> ID：14793839
> 
> 赞同：2
> 
> 时间：2013-02-10T01:52:32.137
> 
> 标签：python, string, loops, input, integer

我目前正在用 Python 3.3.0 编写一个程序，它打印出 n 个第一个平方数，最后打印出它们的总和。条件是用户只能计算大于零的整数项。这是代码：

```
print("WELCOME!")

n = input("How many numbers to sum up?: ")

while n <= 0:
    print("You have to write a positive integer; try again!")
    n = input("How many numbers to sum up?: ")

i = 1
sum = 0
while 0 < i <= n:
    print(i,"*",i,"=", i**2)
    sum += i**2
    i += 1
print("Sum:", sum) 
```

现在，我设法为用户输入负数时的错误消息编写代码。但是，当用户键入字符串（例如“十五”）时，我很难为错误消息编码。

我希望程序允许用户一次又一次地尝试分配“n”一个值，就像他们输入了一个负数一样；基本上，如果用户输入字符串，我想编写一个循环，一遍又一遍地询问相同的事情。

问题是 input() 总是将字符串分配给任意变量，所以我尝试编写代码将字符串转换为整数。当用户输入一个整数值时它可以正常工作，但是如果 'n' 不是整数，它就不能定义 int(n)。

关于这个问题，我用谷歌搜索了很多，我发现了一些使用 try 和除了 ValueError 的示例，但它们似乎都无法从中创建循环。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:57:58.393

把`try/except`里面的循环。

```
while True:
    try:
        n = int(input("How many numbers to sum up?: "))
        if n <= 0:
            print("You have to write a positive integer; try again!")
            continue
        break
    except ValueError:
        print("You have to write a positive integer; try again!") 
```

您还可以用以下代码替换代码的最后一部分（第一个循环之后的部分）：

```
squares = lambda x: [print('{0} * {0} = {1}'.format(x, x**2)), x**2][1]

print("Sum:", sum(squares(i) for i in range(1, n+1)) 
```

不过不推荐使用 lambda `;)`。您当然可以改用普通函数：

```
def squares(x):
    print('{0} * {0} = {1}'.format(x, x**2))
    return x**2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T08:55:33.253

您可以使用[str.isdigit()](http://docs.python.org/3/library/stdtypes.html#str.isdigit)来完成此操作。根据文档， isdigit() 接受兼容性上标数字，例如 \u0660123。但是 python 3 的 input() 为这种类型的输入转义了反斜杠，因此这些字符串不会引起任何问题。

```
while True:
  n = input("How many numbers to sum up?: ")
  if n.isdigit() and int(n) > 0:
    break
  else:
    print("You have to write a positive integer; try again!")

squares = (i**2 for i in range(1,int(n)+1))
s = 0
for integer in range(1,int(n)+1):
  nextsquare = next(squares)
  s += nextsquare
  print(integer, "*", integer, '=', nextsquare, sep='')

print('Sum', s) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T01:56:08.797

我猜是这样的？伪蟒蛇：

```
n = None
while n is None:
    try:
        n = int(input("How many numbers to sum up?: "))
    except ValueError:
        pass 
```

# css - 浏览器不呈现 WOFF 字体 (@font-face)

> ID：14793842
> 
> 赞同：4
> 
> 时间：2013-02-10T01:52:48.223
> 
> 标签：css, iis-7, webfonts, woff

好的，我有一个无法解决的问题，我正在尝试研究 Internet Explorer 10 中 WOFF 字体的用法。

我从[fontsquirrel](http://www.fontsquirrel.com/fontface)下载了工具包，并基于包含的 CSS 和 HTML 文件将字体添加到 Web 应用程序。（IIS 7 上的 ASP.NET MVC）

现在 TTF 字体在 Firefox 和 Chrome 中工作得非常好（IE 不支持它），但是 WOFF 字体似乎根本不工作（它们应该被所有较新的浏览器支持）。如果我从下面删除 TTF 部分 - Firefox 和 Chrome 也不呈现 WOFF 字体。

我将文件的检查名称和简化名称增加了两倍，以确保这不是问题。

```
@font-face
{
    font-family: 'KaratulaNormal';
    src: url('fonts/karan.woff') format('woff'), 
         url('fonts/karan.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

h1
{
    text-transform: uppercase;
    font-family: KaratulaNormal;
} 
```

为什么 WOFF 字体不起作用？

我知道这很难回答，但欢迎任何关于如何解决它的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:19:13.113

答对了。我一步一步来，经过几次尝试后我意识到，如果我使用原始套件 WOFF 字体确实可以工作，之后我意识到我的代码实际上也可以工作，但前提是它直接从文件系统运行，而不是低谷IIS。一旦我意识到一些谷歌搜索导致我回答：

[http://www.dirigodev.com/blog/404-errors-in-IIS7-for-embedded-woff-font-files/](http://www.dirigodev.com/blog/404-errors-in-IIS7-for-embedded-woff-font-files/)

基本上在 IIS7 下你需要为 WOFF 字体配置 mime 类型，否则 IIS 不提供它们。

# c# - Silverlight WCF 中的异步回调线程锁

> ID：14793843
> 
> 赞同：0
> 
> 时间：2013-02-10T01:52:55.497
> 
> 标签：c#, wcf, silverlight, iasyncresult

我想出了一个关于如何伪造 SL WCF 对同步调用的支持的想法。

基本上，

```
private _completed;
private IList<Customer> _customers;
public void IList<Customer> GetAllCustomers()
{
    bool completed = false;
    DataServiceQuery<Customer> myQuery = this.Context.Customers;
    myQuery.BeginExecute(OnQueryExecuted, myQuery);

    while (!_completed)
      System.Threading.Thread.Sleep(67); //tried join also

    return _customers;
}

private void OnQueryExecuted(IAsyncResult result)
{
     var query = result.AsyncState as DataServiceQuery<Customer>;
    _customers = query.EndExecute(result).ToList();
    _isCompleted = true;
} 
```

发生的事情是这永远循环。

我在 while 循环上设置了一个断点，将其移出并恢复执行，然后在下一毫秒结果到达。

因此，我认为用于接收结果的查询的回调将排队到调用查询的同一线程中。

SL 似乎非常坚决地保持这种行为，所以即使我将其包装`myQuery.BeginExecute`在一个新线程中，我仍然会得到相同的行为。

/*编辑：实际上，考虑一下，它在等待的ui线程上排队回调。`Dispatcher.Invoke`这也是我们得到结果时不必这样做的原因。无论如何，我总是可以在专用线程中完成整个操作（需要等待），然后在那里等待，但这需要进行大量重构，避免尝试这样做的重点。*/

有没有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:32:16.957

挂起的原因是该`EndExecute`方法编组到 UI 线程，但您的`Sleep`调用阻塞了 UI 线程。不管你使用什么技术来阻塞线程，你所做的任何事情都会导致死锁，因为该方法是在 UI 线程中调用的。

在 SIlverlight 环境中开发时，您需要能够异步编程，而不是使用同步方法。如果您使用的是 C# 5.0，您可以使用 async/await 功能，它可以让您编写*看起来*是同步的异步代码，但它会被编译成利用回调/延续的异步调用，如果您有，您需要这样做尚未升级到该版本。

# javascript - JavaScript - 如何在不使用 alert() 或 window.open() 的情况下创建对话框窗口？

> ID：14793845
> 
> 赞同：3
> 
> 时间：2013-02-10T01:52:57.800
> 
> 标签：javascript, user-interface, architecture, dialog

我想知道是否有一种方法可以在 JavaScript 中创建一个弹出对话框而不使用`alert(), confirm(), prompt()`或`window.open()`

原因是因为我希望能够在对话框中放置任何内容。任何内容。（例如，文本框、`div`、格式化的内容，或者我希望并具有任何文本的许多输入按钮），并且没有一个`alert(), confirm(),`or`prompt()`允许您这样做。`prompt()`只允许一个文本框。并且`alert()`只`confirm()`允许它的预设按钮和纯文本。我不想使用`window.open()`，因为它会重新定位到不同的 url，或者具有相同功能的相同 url。

另一件事是所有给定的选项都会*提醒*用户，因此是函数名称`alert()`，`prompt()`我想要一些不那么侵入性的东西。

我不想使用 jQuery 插件或制作自己的插件的原因是因为我希望对话框具有操作系统原生的 GUI。

现在，我从未见过*任何人*使用它，我想说我在网上冲浪和参考方面有足够的经验。因此，如果这是不可能的，那么另一个可接受的答案是拥有一个`alert()`或`confirm()`或`prompt()`带有*可自定义*的按钮（无论我想要多少标题值）。

**编辑：**这个请求背后的原因是因为我最近一直在学习涉及 C++ 和 Python 2 的计算机科学课程，它能够通过调用系统 GUI 来做到这一点，但我更喜欢浏览器客户端架构。那我也很好奇。

**编辑 2：**我不希望使用可以以剧烈方式操作的插件。我感兴趣的是我可以用**系统**做什么，而不是我可以用*hacks*做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T02:22:50.523

您要求的内容在 JavaScript 中是可能的，但在客户端却不行。在服务器端，您可以在[RingoJS](http://ringojs.org/ "主页 - RingoJS")和[node.js](http://nodejs.org/ "节点.js")上运行 JavaScript 。

Ringo 可以与 Java 包交互。因此，您基本上可以使用[Swing](http://en.wikipedia.org/wiki/Swing_%28Java%29 "Swing (Java) - 维基百科，免费的百科全书")在 JavaScript 中创建 GUI 应用程序。例如：

```
var {FlowLayout} = java.awt;
var {JButton, JFrame, JLabel} = javax.swing;

var frame = new JFrame("Hello World!");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

var contentPane = frame.getContentPane();
contentPane.add(new JLabel("Hello World!"));
contentPane.add(new JLabel("Press Me!"));
contentPane.setLayout(new FlowLayout);

frame.pack();
frame.setVisible(true); 
```

但是，在客户端，您需要使用库为您创建此类对话框，或者自己滚动。如果您决定自己制作，那么您需要检测用户正在使用的操作系统并相应地设置对话框的样式。

改用 jQuery UI 可能会更好。另外，我认为让您的 Web 应用程序看起来像本机应用程序并不是一个好主意，原因有两个：

1.  它在所有操作系统和所有配置上看起来都不一样。所以很容易看出你试图让它看起来很原生，这破坏了网站的感觉。而是坚持您网站的主题。
2.  只使用 jQuery UI 或其他类似的库会更容易。其他任何事情都只是矫枉过正和浪费时间（至少在我看来）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T02:03:46.157

您仍然可以使用 jQuery 模态（或任何 JS 模态），但您可以根据用户的平台对它们进行皮肤。然而，UA 检测很容易被欺骗，尤其是在有丰富的扩展和开发工具的情况下。

此外，JS 没有超出视口 4 面的管辖权（除非您从浏览器扩展/插件中获得优势，否则会带来额外的麻烦并且大部分时间是有限的）。不能直接用 JS 调用原生操作。

总而言之，我会说这是可能的，但非常棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T02:21:41.330

为什么不直接查找一个可定制的 javascript 插件？这可能是最简单的，而不是自己编码。但供您参考：

```
 <!--//create a div that has the contents of what you want-->
    <div id="popUpDialog" style='display: none; background-color: #999; position: absolute; top: 300px; left: 200px; width: 120px; height: 120px;'>some Text here<input type='radio' /><br /> Options 2<input type='radio' /></div>

    <!--//create an event to cause this popup to show up somewhere... i.e. a buttons onClick event-->
    <input id='btnTrigger' type='button' value='Show Dialog'></input>
    <input id='btnTrigger2' type='button' value='Close Dialog'></input>
    <script type="text/javascript">
    var el = document.getElementById("btnTrigger");

    el.addEventListener('mousedown', function() {
    var popUp = document.getElementById("popUpDialog");
    popUp.style.display = 'inline-block';
    });

    var el = document.getElementById('btnTrigger2');
    //alert(el);
    el.addEventListener('mousedown', function() {
    var popUp = document.getElementById('popUpDialog');
    popUp.style.display = 'none';
    });
    </script> 
```

这是给你的 jsFiddle [http://jsfiddle.net/crislivinitup/9VN7y/](http://jsfiddle.net/crislivinitup/9VN7y/)

哦，顺便说一句，在这个例子中，我没有将 div 的位置更改为绝对位置，也没有设置背景颜色（这意味着如果它确实弹出，背景将是透明的）。这只是为您提供制作元素弹出窗口的一般概念。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T02:24:31.230

看看引导程序中的模型对话框，它们看起来很酷:) [http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

# php - 简单的 HTML DOM 在找不到表时停止

> ID：14793856
> 
> 赞同：0
> 
> 时间：2013-02-10T01:54:26.673
> 
> 标签：php, html, dom, web-scraping

我正在使用以下代码从表中获取一些数据，但如果该表不存在，我的整个脚本就会停止。我不坚定地添加检查是否存在此问题，或者我应该做些什么？

```
if(($salary->find('table.rc_table_name') != null)){
$table02 = $salary->find('table.table_name');
$rows2 = $table02[0]->find('td.table_td');

foreach( $rows2 as $row ){
$getjobs3 = $row->find('td.table_td');
$getjobs33 = $getjobs3[0]->plaintext;

$jobspast .= "$getjobs33";

}}    

foreach($table02[0]->find('td.table_td') as $element2) {

$uri3 = explode( "\n", $element2->plaintext );
$uri03 = $uri3[0];
$uri13 = $uri3[1];
$slug2 = preg_replace('/[^a-z0-9]+/', '-', strtolower($uri3[0]));
$slug2 = substr($slug2, 1, -1);

$jobspast .= '<a href="'.$slug2.'">'.$uri03.'</a>'.$uri13.'<br />'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:25:01.073

想通了，在找到对象之前必须设置为null，并使用if！= null。

# javascript - 如何使用 Rangy 的 toggleRange 方法？

> ID：14793858
> 
> 赞同：0
> 
> 时间：2013-02-10T01:54:37.637
> 
> 标签：javascript, jquery, rangy

我正在使用以下代码在 a 范围内插入链接。

我有以下功能，由按钮调用以保存所选文本。然后它显示包含用于链接插入的文本输入的 linkBar div。

***注意：***当我关注文本输入中的输入文本时，我会丢失选择，因此我尝试使用 toggleRange() 而不是 toggleSelection。

```
function linkIt(){
if (savedSel) {
rangy.removeMarkers(savedSel);
}
savedSel = rangy.saveSelection();
savedSelActiveElement = document.activeElement; 

$("#linkBar").css({"display":"block", "top": "150px", "left": "500px"}); 
```

}

之后，一旦在前一个函数显示的同一 div 中单击按钮，我就会执行以下代码。

```
 submitLink.ontouchstart = submitLink.onmousedown = function() {
        var linkName = $("#linkText").val();
        toggleLink(linkName);
        $("#linkBar").css({"display":"none"});
        if (savedSel) { 
            rangy.restoreSelection(savedSel, true);
            savedSel = null;
            gEBI("restoreButton").disabled = true;
            window.setTimeout(function() {
                if (savedSelActiveElement && typeof savedSelActiveElement.focus != "undefined") {
                    savedSelActiveElement.focus();
                }
            }, 1);
        } 

        return false;
    } 
```

此函数调用以下函数将 linkApplier 应用于所选范围。但它*不起作用*

```
function toggleLink(linkName) {
    linkApplier = rangy.createCssClassApplier("link", {
        elementTagName: "a",
        elementProperties: {
            href: linkName,
            title: "Rangy home page",
            target: "_self"
        }
    });
    //linkApplier.toggleSelection();
    linkApplier.toggleRange(savedSel);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:13:58.713

You need to call `toggleSelection()` after the selection has been restored. I think the following will fix it (untested):

```
submitLink.ontouchstart = submitLink.onmousedown = function() {
    var linkName = $("#linkText").val();
    $("#linkBar").css({"display":"none"});
    if (savedSel) { 
        rangy.restoreSelection(savedSel, true);
        toggleLink(linkName);
        savedSel = null;
        gEBI("restoreButton").disabled = true;
        window.setTimeout(function() {
            if (savedSelActiveElement && typeof savedSelActiveElement.focus != "undefined") {
                savedSelActiveElement.focus();
            }
        }, 1);
    } 

    return false;
}; 
```

# javascript - 来自外部 .csv 或 .txt 文件的 d3.js 云？

> ID：14793859
> 
> 赞同：3
> 
> 时间：2013-02-10T01:54:48.143
> 
> 标签：javascript, text, csv, d3.js, word-cloud

我正在尝试使用 D3 创建一个词云。为此，我正在修改 Jason Davis 的代码：[https ://github.com/jasondavies/d3-cloud/blob/master/examples/simple.html](https://github.com/jasondavies/d3-cloud/blob/master/examples/simple.html)

我想更改代码，以便我可以链接到包含大量文本的 .txt 或 .csv 文件，而不是使用单词数组。

我尝试使用 d3.text() 和 d3.csv() 方法，但我做错了。由于这两种方法都需要 URL，因此我使用了数据 URL 生成器 ( [http://dataurl.net/#dataurlmaker](http://dataurl.net/#dataurlmaker) ) 将文本文件转换为 URL。然后我更改了代码并插入了dataurl，如下所示：

```
var fill = d3.scale.category20();
var text = d3.text(data:text/plain;base64,RGVsbCwgdGhl....continued....more...URLdata)

  d3.layout.cloud().size([300, 300])
  .words(text.map(function(d) {
    return {text: d, size: 10 + Math.random() * 90};
  }))
  .rotate(function() { return ~~(Math.random() * 2) * 90; })
  .font("Impact")
  .fontSize(function(d) { return d.size; })
  .on("end", draw)
  .start(); 
```

我尝试的第二个选项是将文本插入到 html 中的脚本标记中，然后在 JS 代码中引用它，如下所示：

```
<!DOCTYPE html>
<script src="../lib/d3/d3.js"></script>
<script id="text" type="text/plain">Dell, the company, has...more..text...</script>
<script src="../d3.layout.cloud.js"></script>
<body>

<script>
var fill = d3.scale.category20();
var text = d3.select("#text");

  d3.layout.cloud().size([300, 300])
      .words(text.map(function(d) {
        return {text: d, size: 10 + Math.random() * 90};
        }))

etc........ 
```

有人可以帮我找出一种读取 .txt 或 .csv 文件的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:42:18.127

更新：
你能看到这个吗？
[http://bl.ocks.org/8bb2b55d2c5cf5667b01](http://bl.ocks.org/8bb2b55d2c5cf5667b01)

* * *

熟悉工作 d3 和 .csv 文件的一种方法是查看[Scott Murray](http://alignedleft.com/tutorials/d3/)在 github 上的 d3-book 中的代码示例。（第 12 章是您可以查看的地方。） [https://github.com/alignedleft/d3-book/tree/master/chapter_12](https://github.com/alignedleft/d3-book/tree/master/chapter_12)

无论如何，我在 Jason Davies github 示例的修改版本中使用了 us-cities.csv。

希望这可以帮助。

**代码**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>D3 CSV</title>
</head>
<body>

<script src="d3.v3.js"></script>
<script src="cloudlayout.js"></script>
<script type="text/javascript">

var fill = d3.scale.category20();

var cityData = [], 
    width = 500, 
    height = 500;

d3.csv("us-cities.csv", function(data) {
    // build the list of city names
    data.forEach( function (d) {
        cityData.push(d.place);
    });

    d3.layout.cloud().size([500, 500])
        .words(cityData.map(function(d) {
            return {text: d, size: 10 + Math.random() * 90};
        }))
        .rotate(function() { return ~~(Math.random() * 2) * 90; })
        .font("Impact")
        .fontSize(function(d) { return d.size; })
        .on("end", draw)
        .start();
});

function draw(words) {
d3.select("body").append("svg")
    .attr("width", 500)
    .attr("height", 500)
    .append("g")
    .attr("transform", "translate(150,150)")
    .selectAll("text")
    .data(words)
    .enter().append("text")
    .style("font-size", function(d) { return d.size + "px"; })
    .style("font-family", "Impact")
    .style("fill", function(d, i) { return fill(i); })
    .attr("text-anchor", "middle")
    .attr("transform", function(d) {
        return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
    })
    .text(function(d) { return d.text; });
}           
</script>
</body>
</html> 
```

![文件结构](../Images/3d8f3af83cce76fb9e959222f2611cbc.png)

# jquery - 目的 ＃ 没有方法“数据”

> ID：14793861
> 
> 赞同：1
> 
> 时间：2013-02-10T01:54:57.013
> 
> 标签：jquery, html5-audio, custom-data-attribute

我在这里有很多脑筋急转弯。

我正在尝试使用 jQuery 在 html5 音频标签上方添加有关歌曲的数据。我想出了一种可以更自动化地做到这一点的方法是将 data-* 属性添加到音频标签，但是当我尝试使用 jQuery 将它们拉回时出现错误：“Object # has no method 'data'”。

```
<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
    </head>
    <body>
         <audio controls data-artist="horse">
              <source src="horse.ogg" type="audio/ogg">
              <source src="horse.mp3" type="audio/mpeg">
              <a href="horse.mp3">horse</a>
        </audio>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <script>
            $(function(){
                $('audio').before(function(){
                    artist = $('<div>');
                    artist.html(this.data('artist'));
                    return artist;
                });
            });
        </script>
    </body>
</html> 
```

我试图找到一个不起作用的原因，但未能找到明确的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T01:57:39.560

`this`指的是 DOM 对象。`.data()`仅在 jQuery 对象上可用，因此使用美元符号函数重新包装您的对象：

```
$(this).data('artist'); 
```

或更简洁地说：

```
$('audio').before(function() {
    return $('<div />', {
        text: $(this).data('artist')
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T01:57:32.223

你首先必须`this`用 jQuery 包装：

```
artist.html( $(this).data('artist') ); 
```

* * *

或者，您可以使用原生 HTML5 列表（在 IE < 9 中不起作用）：

```
artist.html( this.dataset.artist ); 
```

# sql - Oracle SQL开发：通过游标将txt文件插入sql表

> ID：14793863
> 
> 赞同：0
> 
> 时间：2013-02-10T01:55:03.650
> 
> 标签：sql, oracle11g, cursor, oracle-sqldeveloper

我刚开始学习Oracle SQL 开发。

我正在考虑编写 CURSOR 来逐行读取文本文件并插入到 SQL 表中。

但是，我不确定我需要放置文本文件的文件夹。

我应该把文本文件放在哪里？

和

我刚开始学习 CURSOR ......你能给我一个关于光标的简单例子吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:55:39.717

[游标](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/static.htm#i45288)是一种处理plsql查询结果的方法，所以基本上，用游标读取文件并没有什么意义......

有一些方法可以从 plsql 读取文本文件并将其插入表中。在大多数情况下，它应该从以下开始：

1.  将文件放在文件系统中的特定目录中
2.  创建一个引用该文件系统目录的[DIRECTORY db 对象。](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_5007.htm)

现在您可以使用[UTL_FILE](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/u_file.htm)或（恕我直言，更好的）[外部表](http://docs.oracle.com/cd/B28359_01/server.111/b28319/et_concepts.htm)。

# list - SML 中的串联递归

> ID：14793867
> 
> 赞同：0
> 
> 时间：2013-02-10T01:55:30.157
> 
> 标签：list, recursion, functional-programming, sml

我是另一个尝试使用 SML 元素完成 MOOC 课程的初学者。我想生成一个带有列表的函数，并生成第二个列表，其中元素相加。

如果正确完成，此函数将转换 `before_reaching_sum_test([1,2,3,4,5,6,7,8,9]);`为以下列表 `[1,3,6,10,16,23,31,40]`

这是我到目前为止所拥有的，但我很确定我做错了。

```
fun before_reaching_sum_test(ints: int list) =
if null (tl ints)    
then []
else (hd ints + hd (before_reaching_sum_test(tl ints)))::(before_reaching_sum_test(tl ints)) 
```

我知道这将省略初始列表的最后一个元素。但是这样的事情会起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:18:43.020

您的问题在于这一行`hd (before_reaching_sum_test(tl ints))`，它一直在列表的尾部递归调用，直到它返回空列表，然后您尝试获取该列表的头部。因此引发了空异常。

它实际上可以非常简单地创建

```
fun before_reaching_sum_test (x::y::xs) = x :: before_reaching_sum_test(x+y::xs)
  | before_reaching_sum_test x = x 
```

通过“将前一个数字向前推”并计算运行总和。

**更新**

为冲击做好准备

```
fun before_reaching_sum_test xs =
    if null xs then xs (* empty list *)
    else if null (tl xs) then xs (* one element list *)
    else (* Two or more elements in the list *)
      let
        val x = hd xs
        val y = hd (tl xs)
      in
        x :: before_reaching_sum_test (x+y :: tl (tl xs))
      end 
```

这实际上是一个很好的例子，说明为什么模式匹配是一件好事。

# javascript - 等待回调完成对性能有何影响？

> ID：14793869
> 
> 赞同：4
> 
> 时间：2013-02-10T01:56:00.560
> 
> 标签：javascript, node.js, mongodb

我用 Node.js 编程已经有一段时间了，我发现自己越来越讨厌需要链接回调。例如，当您需要数据库中的多个模型时，如下所示：

```
Person.findOne({ 'name.last': 'Ghost' }, 'name occupation', function (err, person) {
    Schedule.findOne({'person_id': person.id }, 'events', function(err, schedule) {
        ...
    }
}) 
```

我正在寻找解决这个问题的方法。我的一个想法是做这样的事情：

```
function() {
    var p;
    var s;
    var done = false;

    Person.findOne(..., ..., function(err, person) {
        p = person;
        done = true;
    });

    while(!done){}
    done = false;

    Schedule.findOne(..., ..., function(err, schedule) {
        s = schedule;
        done = true;
    });

    while(!done){}
    done = false;

    // ...
} 
```

如果我像这样进行查询，会对性能产生什么影响？我也对解决这个问题的其他想法持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:14:36.320

为了回答您最直接的问题，自旋等待回调的性能含义是自旋等待可能会使其他更有用的任务无法完成，无论是在同一进程中还是在同一台机器上。如果您的应用程序在没有电源管理的单用户计算机上运行，​​这无关紧要，但这些都不太可能。忙于等待会破坏移动平台上的电池寿命，增加数据中心的电费，并使未来的代码维护者诅咒你的名字！

正如 elclanrs 已经在评论中建议的那样，您可以查看“[异步](https://github.com/caolan/async)”库以帮助简化您的代码，但无论如何您应该避免忙于等待。

# google-apps-script - 在 jQuery 中使用 DataTables 插件

> ID：14793873
> 
> 赞同：1
> 
> 时间：2013-02-10T01:56:45.720
> 
> 标签：google-apps-script

我正在尝试使用数组作为数据源，使用 HtmlService 和用于 jquery 的 Datatables 插件。我在传递数组时遇到问题。结果表未正确呈现数组 - 在此 3 col 表中，col1 包含“1”，col2 包含“，”col3 包含“2”我做错了什么？

```
function doGet() { 
var temp = HtmlService.createTemplateFromFile('example2');
temp.j = [1,2,3];            
return temp.evaluate();  
}

<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />

    <title>DataTables example</title>

    <link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.1/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.1/jquery.dataTables.min.js"></script>
    <script type="text/javascript" charset="utf8">
        $(document).ready(function() {
$('#demo').html( '<table cellpadding="0" cellspacing="0" border="0" class="display" id="example"></table>' );
$('#example').dataTable( {
    "aaData": [
        /* Reduced data set */
         <?= j ?> 

    ],
    "aoColumns": [
        { "sTitle": "Engine" },
        { "sTitle": "Browser" },
        { "sTitle": "Platform" }
    ]
} );   
} );
  </script>
</head>
<body>
<div id="demo"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:31:01.850

几个想法。让我知道您更喜欢哪个/效果最好。您可以将您`[1,2,3]`的字符串写成字符串并将其扔到您的模板中。像这样：

```
temp.j = Utilities.jsonStringify([1,2,3]);

<?!= j ?> 
```

注意：`!`这里是必需的，因为它强制字符串按原样打印。请参阅“[强制打印 Scriptlet](https://developers.google.com/apps-script/html_service#TemplatedHTML) ”。

或者您可以像这样遍历 html 模板中数据的每个元素。

```
[<? for  (var i = 0; i < j.length; ++i) { ?>
  <?!= j[i]?>,
<? } ?>] 
```

注意：方括号和逗号是必需的，因为`j[i]`它只返回每个元素的值。

# asp.net - 从后面的代码在 ItemTemplate 中添加 HTML

> ID：14793884
> 
> 赞同：0
> 
> 时间：2013-02-10T01:58:05.187
> 
> 标签：asp.net

我有一个中继器控件，它列出了数据库中的 10 条记录。我想要做的是将这 10 条记录分成两列，我不知道该怎么做。
问题是我不能使用 <%# if (Container.ItemIndex == 0) %>。
我尝试使用 ItemDataBound 来操作数据，但我不知道如何使中继器控件将生成的数据显示回浏览器。

任何帮助或想法都可以。
希望你明白我要说什么。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:49:59.093

你可以用javascript来做到这一点。或者您可以创建一个包装类来完成工作。这是一个例子（非javascript）：

**aspx：**

```
<asp:Repeater runat="server" ID="myRepeater">
    <HeaderTemplate>
        <table>
            <tr>
                <th>Column 1</th>
                <th>Column 2</th>
            </tr>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td>
                <%#Eval("FirstColumnData.DisplayString") %>
            </td>
            <td>
                <%#Eval("SecondColumnData.DisplayString") %>
            </td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:Repeater> 
```

**后面的代码：**

```
// Say, this is your data item class

public class MyData
{
    public string Field1;
    public int Field2;

    public string DisplayString
    {
        get { return Field1 + " " + Field2; }
    }
}

// Wrap it

public class TwoColumnWrappedData
{
    public MyData FirstColumnData { get; set; }
    public MyData SecondColumnData { get; set; }
}

// Convert your datasource to wrapped datasource

private IEnumerable<TwoColumnWrappedData> GetWrappedData(IEnumerable<MyData> dataSource)
{
    TwoColumnWrappedData wrappedData = null;
    foreach (var myData in dataSource)
    {
        if (wrappedData == null)
        {
            wrappedData = new TwoColumnWrappedData();
            wrappedData.FirstColumnData = myData;
        }
        else
        {
            wrappedData.SecondColumnData = myData;
            yield return wrappedData;
            wrappedData = null;
        }
    }
}

// Now data bind like this

...

var dataSource = Enumerable.Range(1, 10).Select(i => new MyData { Field1 = "Item", Field2 = i }); // This is just an example; Populate it with actual data
myRepeater.DataSource = GetWrappedData(dataSource);
myRepeater.DataBind();

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:40:57.367

```
<asp:Repeater runat="server">
    <ItemTemplate>
        <div class="<%# Container.ItemIndex % 2 == 0 ? "left" : "right"%>">
            <%# Eval("data") %>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

将输出：

```
<div class="left">...</div><div class="right">...</div>
<div class="left">...</div><div class="right">...</div>
<div class="left">...</div> 
```

现在您只需要一些 CSS（这显然只是简化的示例）：

```
.left {float:left;width:50%;}
.right {float:right;width:50%;} 
```

# r - R通过crontab运行时找不到一些包

> ID：14793885
> 
> 赞同：5
> 
> 时间：2013-02-10T01:58:19.717
> 
> 标签：r, amazon-ec2, crontab

`Rscript`尝试使用via运行我的 R 脚本时遇到问题`crontab`。

在命令行中运行时，以下命令可以正常工作

```
Rscript /var/www/html/sent/sentiment/code/parse.r 
```

但是里面的下面一行`crontab`

```
*/5 * * * * Rscript /var/www/html/sent/sentiment/code/parse.r > /var/www/html/sent/sentiment/code/backup.log 2>&1 
```

会在日志中返回如下错误

```
Error in library(twitteR) : there is no package called 'twitteR'
Execution halted 
```

为什么 Rscript 在使用 cron 运行时可能无法找到包？我怎样才能让 crontab '看到'我的 R 包。

非常感谢任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T02:19:44.877

正如评论中所建议的，问题可能是您和您的 crontab 正在使用不同的 R 安装。

要检查是否是这种情况，请以您`which Rscript`自己和 crontab 的身份运行。

如果它们不同（我怀疑），`Rscript`当您从 crontab 调用它时，您可以使用适当的完整路径。更持久的解决方案需要设置环境变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:19:57.430

这很可能是您的`.libPath()`设置——这就是为什么我使用 Debian/Ubuntu 软件包使用系统范围的设置，而不是每个用户的设置。

要检查，请像您一样运行，也可以从同一个 crontab 运行

```
 print(.libPaths())
 print(installed.packages()) 
```

区别应该很清楚。我想我之前在这里回答了一个几乎相同的问题。

# html - 边距占用错误 div 的 css 创建的空间

> ID：14793896
> 
> 赞同：0
> 
> 时间：2013-02-10T02:00:49.660
> 
> 标签：html, css

我有一个小提琴在这里[http://jsfiddle.net/mjmitche/T6PBn/9/](http://jsfiddle.net/mjmitche/T6PBn/9/)显示这个 html/css 问题。

我有一个带有“mainmeal”类的div（小提琴中有白色背景），我正试图从黑色导航栏向下移动。div 的宽度比页面的主体窄。但是，当我在 mainmeal div 上放置一个顶部边距以将其从浏览器中向下推时，顶部边距创建的空间是白色的（即由 css 设置为“mainmeal”的样式）并且它扩展了身体的整个宽度. 你能解释一下为什么会发生这种情况以及如何解决吗？

我想要的是由边距创建的空间来获取包含 div“main”的 css。

谢谢

CSS

```
#header{
font-size: 24px;
background-color: #000; 
min-height: 25px;
 font-weight: bold;

}

#main {
   min-height: 300px;
   background-color: #b4db9b;
   width: 500px;
   position: relative;

}

.miracle {
    color: #1e6023;

}
.meal{
    color: #fff;

}

.mainmeal{
    background-color: #fff;
    width: 400px;
    height: 150px;
    font-size: 40px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 20px;

} 
```

HTML

```
<div id="header">

    <span class="miracle">Miracle</span><span class="meal">Meal</span>

</div>

<div id="main">
    <div class="mainmeal">

       Main Meal

    </div>
    <div id="olddeals">
        <div class="column1">
        </div>
        <div class="column2">
        <div>
        <div class="column3">
        </div>

    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:11:15.107

这应该可以解决您的问题：http: [//jsfiddle.net/T6PBn/11/](http://jsfiddle.net/T6PBn/11/)

```
#main {
   min-height: 300px;
   background-color: #b4db9b;
   width: 500px;
   position: relative;
   /* introduce this */
   padding-top: 20px;
}

.mainmeal{
    background-color: #fff;
    width: 400px;
    height: 150px;
    font-size: 40px;
    margin-left: auto;
    margin-right: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:12:39.490

mainmeal div 的高度为 150 像素，因此整个 150 像素的块都是白色的。如果你降低主餐的高度，你会得到一个更小的白盒子。

# java - 在 Java 中将变量范围扩展到大括号之外

> ID：14793901
> 
> 赞同：0
> 
> 时间：2013-02-10T02:02:03.270
> 
> 标签：java, scope, curly-braces

假设我有以下代码块：

```
int    version;
String content;
synchronized (foo) {
    version = foo.getVersion();
    content = foo.getContent();
}
// Do something with version and content 
```

其目的是获取某个对象 foo 的版本和内容的线程安全一致视图。

有没有办法写得更简洁，看起来更像这样？

```
synchronized (foo) {
    int    version = foo.getVersion();
    String content = foo.getContent();
}
// Do something with version and content 
```

问题是在这个版本中，变量是在（同步的）花括号的范围内定义的，因此不能在块之外访问。所以，问题是：有没有办法将这些花括号标记为不定义新的范围块或将变量标记为属于父范围而不必在那里声明它们？

（注意：我**不想**简单地将其拉`// Do something with version and content`入同步块。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:06:13.780

简单地说……不。作用域变量仅在它们声明的作用域中可用。这就是他们的全部意义所在。[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se5.0/html/statements.html#14.4.2)的第 14.4.2 节对此进行了描述：

> 块中局部变量声明的范围（第 14.2 节）是声明出现的块的其余部分，从其自己的初始化程序（第 14.4 节）开始，并在局部变量声明语句的右侧包括任何进一步的声明符。

您的变量需要在它们要使用的范围内声明（或更高，但绝对不能更低）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:08:45.147

很不幸的是，不行。当您越来越多地使用该语言时，它看起来会更好/正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:29:41.380

如果您希望这些变量不能从其他范围访问，您可以在另一个范围中定义变量和同步块。像这样的东西：

```
{
    int    version;
    String content;
    synchronized (foo) {
        version = foo.getVersion();
        content = foo.getContent();
    }
    // Do something with version and content
} 
```

# c++ - Vector算法中的字符串排序不起作用

> ID：14793902
> 
> 赞同：1
> 
> 时间：2013-02-10T02:02:19.397
> 
> 标签：c++, function, sorting

我有一个结构项目向量，里面有一个字符串。我试图通过在项目中按字母顺序排列字符串来对项目向量进行排序......到目前为止我有：

```
vector<Item> sorter;

std::sort(sorter.begin(), sorter.end(), SortHelp);

//predcate function
bool SortHelp(Item const& one, Item const& two) 
{
    return one.type < two.type;
} 
```

*type 是我用来排序的字符串

如何更改谓词函数以按字母顺序对字符串进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:21:38.227

以下函数将在没有外部库的情况下对两个 s 进行不区分大小写的比较`std::string`（尽管它是 C++11）。

```
bool caseinsensitivecompare(string s1, string s2) {
    locale loc;
    std::transform(s1.begin(),s1.end(),s1.begin(), 
                   [loc](char c){return std::toupper<char>(c,loc);});
    std::transform(s2.begin(),s2.end(),s2.begin(), 
                   [loc](char c){return std::toupper<char>(c,loc);});
    return (s1 < s2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:26:58.217

正如[不区分大小写的字符串比较 C++ (2012)](https://stackoverflow.com/questions/9182912/case-insensitive-string-comparison-c)中所建议的，如果比较字符串，`strcasecmp()`将提供正确的答案。`const char *`

如果比较 C++ 字符串，Boost 库有`is_iless()`，其标头在[此处](http://www.boost.org/doc/libs/1_39_0/boost/algorithm/string/compare.hpp)，正如[C++ (2008) 中不区分大小写的字符串比较](https://stackoverflow.com/questions/11635/case-insensitive-string-comparison-in-c)所建议的那样。

# objective-c - 如何在后台线程上进行长时间操作，然后在主线程上更新 UI

> ID：14793907
> 
> 赞同：0
> 
> 时间：2013-02-10T02:03:13.770
> 
> 标签：objective-c, macos, cocoa

我必须做一个可能需要很长时间才能完成的 IO 操作。从按钮调用 IO 操作。当然，UI 会挂起，直到操作完成。所以我想我需要在一些后台线程上做 IO，但是当操作完成时，我必须更新窗口的标签来表示操作完成。我想我应该在主线程上做些什么（比如 Java 中的 EDT 和 C# 中的类似），对吗？

在 C# 中有类似 TaskAsync 的类，在 Java android 中有类似的类。这使您可以在另一个线程中完成长任务，并且当任务完成时，会在主线程上调用处理程序，以便可以在主线程上更新 UI，

cocoa 究竟需要做什么类似的任务，即允许在单独的线程上进行比 main 更长的操作，然后以某种方式促进更新主线程上的用户界面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:01:14.140

您的长期运行的操作应移至 NSOperation 子类

AhmedsOperation.h

```
@interface AhmedsOperation : NSOperation

@end 
```

AhmedsOperation.m

```
@implementation AhmedsOperation

// You override - (void)main to do your work
- (void)main
{
    for (int i = 0; i < 1000; i++) {
        if ([self isCancelled]) {
            // Something cancelled the operation
            return;
        }

        sleep(5);

        // Emit a notification on the main thread
        // Without this, the notification will be sent on the secondary thread that we're
        // running this operation on
        [self performSelectorOnMainThread:@(sendNotificationOnMainThread:)
                               withObject:[NSNotification notificationWithName:@"MyNotification"
                                                                        object:self
                                                                      userInfo:nil]
                            waitUntilDone:NO];
    }
}

- (void)sendNotificationOnMainThread:(NSNotification *)note
{
    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
    [nc postNotification:note];
} 
```

然后在您的主代码中，当您想要执行操作时，您只需创建一个 AhmedsOperation 对象，并将其推送到 NSOperationQueue 并收听通知。

```
AhmedsOperation *op = [[AhmedsOperation alloc] init];
NSOperationQueue *defaultQueue = [MLNSample defaultOperationQueue];

NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
[nc addObserver:self
       selector:@selector(progressUpdateNotification:)
           name:@"MyNotification"
         object:op];

[defaultQueue addOperation:op]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:12:34.603

假设您有一个要更新 UI 的视图控制器的句柄，您可以使用 NSObject " [`performSelectorOnMainThread:withObject:waitUntilDone:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelectorOnMainThread:withObject:waitUntilDone:)" 方法。

2）您还可以使用 Grand Central Dispatch 的代码如下：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [viewController doSomethingWhenBigOperationIsDone];
}); 
```

3）或者你甚至可以从你的后台线程发布一个 NSNotification ，观察者（在主线程中）可以更新 UI。

[您可能会在这个相关问题中找到一些额外的有用信息](https://stackoverflow.com/questions/9335434/whats-the-difference-between-performselectoronmainthread-and-dispatch-async-on-m)。

# unix - 未找到安装 grails 2.2.0 ubuntu grails-ppa

> ID：14793911
> 
> 赞同：3
> 
> 时间：2013-02-10T02:03:25.640
> 
> 标签：unix, grails, ubuntu

想在 ubuntu 11.10 上安装 grails

按照 grails 网站上的说明进行操作

[http://grails.org/download/ubuntu](http://grails.org/download/ubuntu)

我可以添加存储库和更新，但是当我输入

```
sudo apt-get install grails-ppa 
```

它返回

```
Paketlisten werden gelesen... Fertig
Abhängigkeitsbaum wird aufgebaut       
Status-Informationen einlesen... Fertig
E: Paket grails-ppa kann nicht gefunden werden 
```

最后一行是德语

```
E: package grails-ppa could not be found. 
```

我应该怎么做才能更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T05:29:16.073

该 ppa 的维护者继续创建[http://gvmtool.net/](http://gvmtool.net/)，这是一个更强大的解决方案，它还支持 Groovy、Griffon 和其他技术。我们尚未更新网站以使其更清楚，但 GVM 绝对是要走的路。

# php - 文件上传不检查现有图像

> ID：14793915
> 
> 赞同：0
> 
> 时间：2013-02-10T02:03:56.530
> 
> 标签：php, file-upload, file-exists

我从 tidy-designs 获得了以下代码，它工作正常，只是它不检查现有图像。当我再次上传相同的图像时，它会毫无错误地接受。我发现脚本在上传到新的随机名称后重命名文件，并且它还试图查看新名称是否存在于保存图像的文件夹中。这意味着它为每个上传的图像提供新的随机名称，并尝试检查新名称是否存在。如何检查现有图像？我需要删除重命名上传图像的功能吗？

```
 <?php

function uploadFile ($file_field = null, $check_image = false, $random_name = false) {

//Config Section    
//Set file upload path
$path = 'productpic/'; //with trailing slash
//Set max file size in bytes
$max_size = 2097152;
//Set default file extension whitelist
$whitelist_ext = array('jpg','png','gif');
//Set default file type whitelist
$whitelist_type = array('image/jpeg', 'image/png','image/gif');

//The Validation
// Create an array to hold any output
$out = array('error'=>null);

if (!$file_field) {
$out['error'][] = "Please specify a valid form field name";           
}

if (!$path) {
$out['error'][] = "Please specify a valid upload path";               
}

if (count($out['error'])>0) {
return $out;
}

//Make sure that there is a file
if((!empty($_FILES[$file_field])) && ($_FILES[$file_field]['error'] == 0)) {

// Get filename
$file_info = pathinfo($_FILES[$file_field]['name']);
$name = $file_info['filename'];
$ext = $file_info['extension'];

//Check file has the right extension           
if (!in_array($ext, $whitelist_ext)) {
  $out['error'][] = "Invalid file Extension";
}

//Check that the file is of the right type
if (!in_array($_FILES[$file_field]["type"], $whitelist_type)) {
  $out['error'][] = "Invalid file Type";
}

//Check that the file is not too big
if ($_FILES[$file_field]["size"] > $max_size) {
  $out['error'][] = "We are sorry, the image must be less than 2MB";
}

//If $check image is set as true
if ($check_image) {
  if (!getimagesize($_FILES[$file_field]['tmp_name'])) {
    $out['error'][] = "The file you trying to upload is not an Image, we only accept images";
  }
}

//Create full filename including path
if ($random_name) {
  // Generate random filename
  $tmp = str_replace(array('.',' '), array('',''), microtime());

  if (!$tmp || $tmp == '') {
    $out['error'][] = "File must have a name";
  }     
  $newname = $tmp.'.'.$ext;                                
} else {
    $newname = $name.'.'.$ext;
}

//Check if file already exists on server
if (file_exists($path.$newname)) {
  $out['error'][] = "the image you trying to upload already exists, please upload only once";
}

if (count($out['error'])>0) {
  //The file has not correctly validated
  return $out;
} 

if (move_uploaded_file($_FILES[$file_field]['tmp_name'], $path.$newname)) {
  //Success
  $out['filepath'] = $path;
  $out['filename'] = $newname;
  return $out;
} else {
  $out['error'][] = "Server Error!";
}

} else {
$out['error'][] = "No image uploaded";
return $out;
}      
}
?>

<?php
if (isset($_POST['submit'])) {
$file = uploadFile('file', true, true);
if (is_array($file['error'])) {
$message = '';
foreach ($file['error'] as $msg) {
  $message .= '<p>'.$msg.'</p>';    
}
} else {
$message = "File uploaded successfully";
}
echo $message;
}
?>
<form action="" method="post" enctype="multipart/form-data" name="form1" id="form1">
<input name="file" type="file" size="20" />
<input name="submit" type="submit" value="Upload" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:09:30.790

您无需删除任何代码 - 只需更改调用函数的方式即可。

函数定义为：

`function uploadFile ($file_field = null, $check_image = false, $random_name = false)`

您可以看到`$random_name`变量作为参数传递给函数。如果设置为`true`它为上传的图像设置一个随机文件名。

你这样调用函数：

```
$file = uploadFile('file', true, true); 
```

所以你可以看到你传递的第三个参数（即对应的`$random_name`参数是`true`.

尝试将其更改为

```
$file = uploadFile('file', true, false); 
```

阻止函数强制文件具有随机文件名。

# javascript - 事件侦听器是否可以通过分配一个值 IF 来作为潜在输入投入使用，如果它运行？

> ID：14793916
> 
> 赞同：0
> 
> 时间：2013-02-10T02:04:03.847
> 
> 标签：javascript, javascript-events

我试图发现的是当内部函数和事件监听器被执行时如何设置一个值。如果可以做到这一点，那么该值可以用于控制其他潜在操作。由于没有找到关于此的精确材料，我一直在尝试。下面的代码不会使用 Chrome JS 控制台发出任何警报，它会在鼠标离开 MoscowNights Div 时执行 aler(77)，但整个 claptrap 代码块的后端没有任何价值。

```
function IsolateThaBUG() {
  var MoscowNights = document.getElementById("MoscowNights");

  MoscowNights.addEventListener("mouseout", function(evt) {
    var MaloMaloJavaScript = 77;
    alert(MaloMaloJavaScript);
    return MaloMaloJavaScript;
  }, false);

  var Convoluted = MoscowNights;
  return Convoluted;
}

var GotAnythingYET = IsolateThaBUG();
alert('Got This NONSENSE Instead : ' + GotAnythingYET); 
```

* * *

对，嗯……下一个块也没有放弃一个价值……或者看起来是这样。如果它是可访问的，它应该出现在 div 中，但它读取为*undefined*所以......也许没有办法一次性做到这一点。

```
 function IsolateThaBUG(){
       var MoscowNights = document.getElementById('MoscowNights');
        var MaloMaloJavaScript; // temp undefnd
        MoscowNights.addEventListener("mouseout", function (evt) {
            var MaloMaloJavaScript=77;   <<<<<<<<<<<<<<<<<<<<<<<    THAT,
            }, false);
        return MaloMaloJavaScript;   >>>>>>>>>>>>    is just NOT getting OUTSIDE!!
    }
     var GotAnythingYET = IsolateThaBUG();
     function WritetestValue() {
        var artfulArtificial = document.getElementById("whattheSAMHILLsigoinon");
        var TitleWrite = artfulArtificial.appendChild(document.createTextNode(testValue));
        return TitleWrite;
    }
    WritetestValue(); 
```

我接受的答案，正如我在研究它时发现的那样，安装并测试了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:27:23.650

您编写的函数`IsolateThaBug`正在返回 的值`MoscowNights`，它是一个元素。

我推测您希望检索`MaloMaloJavascript`. 为了实现这一点，您需要传入一个回调或其他一些变量来进行变异。

这里有一些例子。

```
function testMouseout() {
  var element = document.getElementById('MoscowNights'); 
  var testValue;  // undefined currently.
  element.addEventListener('mouseout', function(e) {
    testValue = 77;
  }, false);
  return testValue;
}

var mouseoutTest = testMouseout(); 
console.log(mouseoutTest); // undefined
// perform the mouseout action. If you did, the value will be 77.
window.setTimeout(function(){
  console.log(mouseoutTest) // 77
}, 5000) 
```

如果您想等到鼠标移出发生后再触发警报，您​​可以传入一个回调函数。这利用了 JavaScript 的一流函数。

```
function testMouseout(callback) {
  var element = document.getElementById('MoscowNights'); 
  var testValue;  // undefined currently.
  element.addEventListener('mouseout', function(e) {
    testValue = 77;
    callback(testValue);
  }, false);
  return testValue;
}

// we pass in a function that will 
// be executed when the event fires.
testMouseout(function(value) {
  alert(value); // 77
}); 
```

# php - 哪种哈希算法对密码最安全？

> ID：14793922
> 
> 赞同：1
> 
> 时间：2013-02-10T02:04:35.563
> 
> 标签：php, security

根据[http://php.net/manual/en/function.hash.php](http://php.net/manual/en/function.hash.php)，有一个php散列方法：hash()。它支持以下所有方法，但我想知道，密码哈希绝对最安全的方法是什么。

```
Results: (in microseconds)
   1\.  md4                           5307.912
   2\.  md5                           6890.058
   3\.  crc32b                        7298.946
   4\.  crc32                         7561.922
   5\.  sha1                          8886.098
   6\.  tiger128,3                    11054.992
   7\.  haval192,3                    11132.955
   8\.  haval224,3                    11160.135
   9\.  tiger160,3                    11162.996
  10\.  haval160,3                    11242.151
  11\.  haval256,3                    11327.981
  12\.  tiger192,3                    11630.058
  13\.  haval128,3                    11880.874
  14\.  tiger192,4                    14776.945
  15\.  tiger128,4                    14871.12
  16\.  tiger160,4                    14946.937
  17\.  haval160,4                    15661.954
  18\.  haval192,4                    15717.029
  19\.  haval256,4                    15759.944
  20\.  adler32                       15796.184
  21\.  haval128,4                    15887.022
  22\.  haval224,4                    16047.954
  23\.  ripemd256                     16245.126
  24\.  haval160,5                    17818.927
  25\.  haval128,5                    17887.115
  26\.  haval224,5                    18085.002
  27\.  haval192,5                    18135.07
  28\.  haval256,5                    18678.903
  29\.  sha256                        19020.08
  30\.  ripemd128                     20671.844
  31\.  ripemd160                     21853.923
  32\.  ripemd320                     22425.889
  33\.  sha384                        45102.119
  34\.  sha512                        45655.965
  35\.  gost                          57237.148
  36\.  whirlpool                     64682.96
  37\.  snefru                        80352.783
  38\.  md2                           705397.844 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T02:08:24.860

# 以上都不是。

你应该[使用 bcrypt](http://www.openwall.com/phpass/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T19:13:47.000

> 什么是密码哈希绝对最安全的方法

在问题的前提下回答：绝对最安全的可能包括：

1.  首先是[硬件安全模块](http://en.wikipedia.org/wiki/Hardware_security_module)，使用 HMAC 和 HSM 管理的密钥，
2.  然后[与密码散列竞赛的获胜者进行散列](https://password-hashing.net/)，一旦找到获胜者，并且已经有 5-10 年的时间接触现实世界和同行评审。

在那之前，最安全的可能是：

1.  如上所述的 HSM，以及
2.  [密码散列的规范答案](https://security.stackexchange.com/a/31846/2122)中的一个不错的选择。

然而，实际上密码散列并不是主要问题，只需使用任何一种“好的”解决方案进行散列就足够了。好的解决方案是：

1.  BCrypt,
2.  带有 SHA256（或 512）的 HMAC 的 PBKDF2。
3.  许多人也认为 SCrypt 是一个不错的选择，尽管有些人认为它有点年轻。

对于上述两种情况，您都不应该滚动自己的作文。您应该始终使用为长期密码存储而设计的成熟、经过良好测试和审查的库。密码散列不仅仅与使用 BCrypt 或 PBKDF2 有关，您还需要一个具有合理的字符编码、盐、迭代计数/成本因素等默认值的组合。

# html - mediaelementjs 是否支持跨所有平台的单个 mp4 h264 视频？

> ID：14793923
> 
> 赞同：1
> 
> 时间：2013-02-10T02:04:37.233
> 
> 标签：html, video, html5-video, mp4, mediaelement.js

我需要像 videojs 这样工作的东西，尽可能支持原生 HTML5，并在原生不支持 h264 的浏览器上回退到 flash。我有 videojs 工作，但因为我还需要支持 MP3 文件（videojs 不支持），我想我会尝试 mediaelementjs。

阅读 mediaelementjs 网站，看起来这应该可以工作，但我不清楚 Flash 播放器是否真的会播放 h264。似乎我可能需要包含不同的编解码器，我绝对不想这样做。我只想编码为h264，如果浏览器不支持该编解码器，则使用播放器播放它们，如果浏览器支持，则使用HTML5。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:44:22.217

我已经多次使用 mediaelementjs，恕我直言，我认为这是为视频提供跨浏览器支持的最佳方式。

单个 MP4 文件可用于在本机`video`元素中播放，也可通过 SWF 播放。

# python - 'dict' 对象没有属性 '_meta'

> ID：14793926
> 
> 赞同：0
> 
> 时间：2013-02-10T02:05:34.673
> 
> 标签：python

```
def participant_specific_donation(self, participant):
    donations = Donation.objects.filter(participant = participant)

    helper = {}

    for donation in donations:
        ##helper['donation_date'] = donation.date
        helper['donation_amount'] = donation.amount
    return helper

def participant_specific(request, participant):
helper = RelayFunctions()
info = helper.participant_specific_donation(participant)
info1 = helper.participant_specific_milestone(participant)

data = [ 'participant_specific_donation' : info , 'participant_specific_milestone' : info1 ]
json_serializer = serializers.get_serializer("json")()
response = json_serializer.serialize(data, ensure_ascii=False)
return HttpResponse(response, mimetype="application/json") 
```

错误：“dict”对象没有属性“_meta”这与我如何调用字典有关吗？我想将两个对象组合成一个。然后解析为json。

这是追溯。

```
Traceback:
 File "/home/vtrelayc/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
   111\.                         response = callback(request, *callback_args, **callback_kwargs)
 File "/home/vtrelayc/projects/relay/relayapp/views.py" in participant_specific
   192\.     response = json_serializer.serialize(data, ensure_ascii=False)
 File "/home/vtrelayc/lib/python2.6/site-packages/django/core/serializers/__init__.py" in serialize
  98\.     s.serialize(queryset, **options)
File "/home/vtrelayc/lib/python2.6/site-packages/django/core/serializers/base.py" in serialize
  46\.             concrete_model = obj._meta.concrete_model

Exception Type: AttributeError at /participants/specific/1/
Exception Value: 'dict' object has no attribute '_meta'

def participant_specific(request, participant):
helper = RelayFunctions()
info = helper.participant_specific_donation(participant)
info1 = helper.participant_specific_milestone(participant)
data = [ 'participant_specific_donation' : info , 'participant_specific_milestone' : info1 ]
json_serializer = serializers.get_serializer("json")()
response = json_serializer.serialize(data, ensure_ascii=False) ...
return HttpResponse(response, mimetype="application/json") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:33:37.160

我在代码片段中看到了两个问题。

首先，这里的逻辑问题：

```
for donation in donations:
    ##helper['donation_date'] = donation.date
    helper['donation_amount'] = donation.amount 
```

如果捐赠有多个元素，那么您最终将只得到列表中的最后一个元素，因为您`donations`每次都在循环并分配值 to `helper`。

我想你想计算总金额，你可以这样做：

```
helper['donation_amount'] += donation.amount 
```

二、线路：

```
data = [ 
    'participant_specific_donation': info,
    'participant_specific_milestone': info1 
] 
```

会给你一个语法错误。

看来你这里需要一本字典。初始化字典的正确方法是使用`{ }`大括号：

```
data = { 
    'participant_specific_donation': info, 
    'participant_specific_milestone': info1
} 
```

* * *

如果你想把所有的捐款都放在一个地方，你可以先列出一个清单：

```
donation_amount = [donation for donation in donations] 
```

然后将其分配给辅助字典：

```
helper['donation_amount'] = donation_amount 
```

# php - 得到未定义的常量错误，但它已定义

> ID：14793929
> 
> 赞同：0
> 
> 时间：2013-02-10T02:05:56.667
> 
> 标签：php, constants

我越来越：

> 注意：使用未定义的常量 ABS_BASE - 在第 11 行的 D:\path\include\global.php 中假定为“ABS_BASE”

我的`global.php`文件看起来像

```
<?php

/**
 * Load configuration file
 */
include 'config.php';

/**
 * Dynamically allocate base path
 */
$uri = reset(explode("?", preg_replace('/^' . preg_quote(ABS_BASE, '/') . '/', '', $_SERVER['REQUEST_URI'])));
define("BASE", str_repeat("../", substr_count($uri, "/")));

/**
 * Load misc functions
 */
include 'function.misc.php'; 
```

我的`config.php`文件看起来像

```
<?php

/**
 * Set to 0 or comment out to turn off errors
 */
ini_set("display_errors", 1);

/**
 * Defines the root dir of your site
 * 
 * Example values:
 *   /
 *   /shop/
 */
define("ABS_BASE", "/"); 
```

显然，我是`ABS_BASE`在调用它之前定义的，那么为什么会出现此错误？

# php - 我是否必须在 cakephp 中为简单的“我是谁”页面使用控制器？

> ID：14793931
> 
> 赞同：0
> 
> 时间：2013-02-10T02:06:05.603
> 
> 标签：php, html, cakephp

我有一个带有一些链接的页面：

*   家
*   我是谁
*   联系人

我做了链接代码：

```
<li><?php echo $this->Html->link('Contacts',array('controller' => 'contacts','action' => 'contacts')) ?>/li> 
```

我是否必须创建“ContactsController.php”只是为了显示一个带有一小段文本的简单 html 页面，或者有更简单的方法（也许没有任何控制器）？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T02:12:43.660

CakePHP 附带了这样的`Pages`控制器。您可以在此处为页面创建视图：

`app/View/Pages/my_page.ctp`

然后你可以在这里访问它：

`http://example.com/pages/my_page`

如果您不希望该`pages/`部分位于 URL 中，只需在`app/Config/routes.php`文件中添加一行，如下所示：

`Router::connect('/my_page', array('controller' => 'pages', 'action' => 'display', 'my_page'));`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-10T02:08:06.310

是的，否则你为什么要使用 MVC 框架？:)

# php - PHP 会话变量丢失

> ID：14793935
> 
> 赞同：1
> 
> 时间：2013-02-10T02:06:59.720
> 
> 标签：php, session

我的网站突然开始丢失会话变量（比如它在几秒钟内超时或什么的）。

我尝试创建一个设置会话变量的测试页面（PageA.php）和另一个读取相同会话变量的测试页面（PageB.php）。如果我首先加载 PageA 然后加载 PageB 它会在前几次回显会话变量，但如果我继续刷新 PageB 会话最终会消失，因此它什么也不显示。

页面A.php

```
session_start();
$_SESSION['test'] = 'some text'; 
```

PageB.php

```
session_start();
echo 'session variable result: ' . $_SESSION['test']; 
```

WHM 控制面板显示以下内容：

```
 total       used       free     shared    buffers     cached
Mem:      10105164    9941092     164072          0    1342940    6233408
-/+ buffers/cache:    2364744    7740420
Swap:     12369912     254180   12115732
Total:    22475076   10195272   12279804 
```

在我看来，该网站内存不足。内存短缺是否可能导致会话变量丢失？如果是这样，我该如何解决这个问题？

# c# - 如何编写可以将 DataGridView 或 ListView 作为输入的方法？

> ID：14793936
> 
> 赞同：1
> 
> 时间：2013-02-10T02:07:09.943
> 
> 标签：c#, .net, winforms, listview, datagridview

我正在使用以下两种方法来保存有关 DataGridView 和 ListView 的列信息。

我注意到这些方法非常相似，实际上我使用相同的数据结构来存储列设置。我为每一列存储的属性是，Visible，Width，DisplayIndex

我怎样才能重写这个，所以我有一个可以处理 DataGridView 或 ListView 的函数？

我曾考虑调查 DataGridView 和 ListView 是否都继承自一个公共类或实现一个公共接口 - 但我不知道如何找到它。

我还考虑过扩展每个类以实现一个通用接口......但我不知道如何继续。

```
 public void SaveDataGridView ( DataGridView view)
 {
      foreach (DataGridViewColumn col in view.Columns)
      {
           // save properties     
      }
 }

 public void SaveDataListView(ListView view)
 {
      foreach (ColumnHeader col in view.Columns)
      {
           // save properties   
      }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:19:15.667

没有办法，直到使用`dynamic`关键字不会提高性能。

[DataGridView.Columns](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumncollection.aspx)和[ListView.Columns](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.columnheadercollection.aspx)没有共同的基本类型（除了`IList`，尝试但我怀疑任何运气）。ColumnHeader和[DataGridViewColumn都](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.aspx)[没有](http://msdn.microsoft.com/en-us/library/system.windows.forms.columnheader.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:15:46.213

它们都继承自[Control 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx)。所以你可以写一个这样的函数：

```
public void SaveView(Control view)
{
    if(view is DataGridView)
    {
        //stuff
    }
    if(view is ListView)
    {
        //stuff
    }
} 
```

控制是非常通用的，所以这个函数没有多大意义，因为有大量的有效参数。不幸的是，Grid 和 List 没有从更具体的父类继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T13:21:52.887

我结束了以下操作

```
interface IView
{
   void SaveView(Control control );
}

public class GridViewHelper : IView
{
    public void SaveView(Control control)
    {
        var view = (DataGridView)control;
        foreach (DataGridViewColumn col in view.Columns)
        {
            // save properties
        }
    }
}

public class ListViewHelper : IView
{

    public void SaveView(Control control)
    {
        var view = (ListView)control;
        foreach (ColumnHeader  col in view.Columns)
        {
            // save properties
        }
    }
} 
```

# html - 如何为 HTML 中的不同 div 分配固定百分比高度？

> ID：14793940
> 
> 赞同：1
> 
> 时间：2013-02-10T02:07:52.287
> 
> 标签：html, css

假设我有一个标题 div、一个内容 div 和一个页脚 div。

```
<div id="header">
   Title
</div>
<div id="content" style="background:red">
       <p>TEST</p>
</div>
<div id="footer">
   footer
</div> 
```

如何始终将标题 div 设置为 20%，将内容设置为 70% div，将页脚设置为 10%？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:15:31.550

[JS Bin 上的工作示例](http://jsbin.com/axudak)。

HTML：

```
<!DOCTYPE html>
  <body>
    <div class="container">
      <div id="header" style="background:blue">
        Title
      </div>
      <div id="content" style="background:red">
        <p>TEST</p>
      </div>
      <div id="footer" style="background:gray">
        footer
      </div>
    </div>
  </body>
</html> 
```

CSS：

```
* {
  margin: 0;
  padding: 0;
}

html,
body,
.container {
   height: 100%;
}

#header {
   height: 20%;
}

#content {
   height: 70%;
}

#footer {
   height: 10%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:33:33.013

试试这个：http: [//jsfiddle.net/9gHY4/2/](http://jsfiddle.net/9gHY4/2/)

```
#header {
    position: absolute;
    height: 20%;
    width: 100%;
    top: 0;
    background-color: blue;
}
#content {
    position: absolute;
    top: 20%;
    height: 70%;
    width: 100%;
    background-color: red;
}
#footer {
    bottom: 0;
    position: absolute;
    height: 10%;
    width: 100%;
    background-color: green;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T02:12:54.470

您可以使用绝对定位来做到这一点：

```
#header {
  position: absolute;
  top: 0;
  height: 20%;
  left: 0;
  width: 100%;
}

#content {
  position: absolute;
  top: 20%;
  height: 70%;
  left: 0;
  width: 100%; 
}

#footer {
  position: absolute;
  top: 90%;
  height: 10%;
  left: 0;
  width: 100%;
} 
```

请参阅[JSFiddle 片段](http://jsfiddle.net/uGyaW/)以了解它的实际效果。

# heroku - 在 Heroku 上运行时激活 JetPack WordPress 插件？

> ID：14793943
> 
> 赞同：5
> 
> 时间：2013-02-10T02:08:21.420
> 
> 标签：heroku, wordpress, jetpack

尝试在 Heroku 上运行的 WordPress 实例上激活[JetPack 插件时出现以下错误。](http://wordpress.org/extend/plugins/jetpack/)

Jetpack 无法联系 WordPress.com：register_http_request_failed。这通常意味着您的网络主机上的某些配置不正确。操作在 15000 毫秒后超时，收到 0 个字节

我发现 Heroku 阻止了这种类型的企业对企业流量的说法，但找不到任何支持该说法的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T00:32:37.473

到目前为止，我找到了两种方法来解决这个问题：

1）快速而肮脏的方式（对我有用，但更多的是破解而不是解决方案）：将 Heroku 上的 Web Dynos 推到 2，连接 JetPack，然后将 Dynos 放回 1 或 0。

2) 在 Jetpack 官方网站上：自定义 httpd.conf 以允许更多并发连接：

[http://jetpack.me/support/getting-started-with-jetpack/troubleshooting-tips/jetpack-heroku/](http://jetpack.me/support/getting-started-with-jetpack/troubleshooting-tips/jetpack-heroku/)

希望有帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T02:37:56.783

让您的主机修改您的 php.ini 函数“ini_get”从“php.ini”获取数据，因此我将“max_execution_time”设置为 60

# php - 十六进制到 int 64 在 php 上签名

> ID：14793949
> 
> 赞同：0
> 
> 时间：2013-02-10T02:09:15.503
> 
> 标签：php

如何将十六进制 A67BFE427CBDC58F 转换为 int 64 签名 -6450282479763995249？

```
function bchexdec($hex) {
 if(strlen($hex) == 1) {
     return hexdec($hex);
 } else {
     $remain = substr($hex, 0, -1);
     $last = substr($hex, -1);
     $x = bcadd(bcmul(16, bchexdec($remain)), hexdec($last));
     return $x;
 } 
```

bchexdec('A67BFE427CBDC58F') == 11996461593945556367。这是正确的，但没有符号（（如何将无符号转换为有符号？

PHP 5.3+；PHP_INT_SIZE == 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:15:07.057

```
if(bccomp($x, bcpow(2, 63)) >= 0) {
    $x = bcsub($x, bcpow(2, 64);
} 
```

# ruby-on-rails - 单击时添加唯一条目

> ID：14793951
> 
> 赞同：0
> 
> 时间：2013-02-10T02:10:12.353
> 
> 标签：ruby-on-rails, orm, uniqueidentifier, rails-activerecord

我正在尝试在单击时添加一个唯一条目，以便用户可以接受他们被邀请参加的活动。用户应该只能单击此链接一次。目前我有以下代码似乎正在添加条目，虽然我认为它不是最佳实践，而且唯一 id 似乎不太好用

哈姆

```
 %li= link_to 'Add', availabilities_path(:availability => {:team_id => @event.team_id, :user_id => user, :event_id => @event.id, :unique_id => availability_unique_id(user,@event) }), :remote => true, :method => :post, :class => 'button tiny success' 
```

模型

```
validates :unique_id, :presence => true, :uniqueness => true 
```

独特的方法

```
def availability_unique_id(player,schedule)
    Base64.encode64("#{player.to_s}_#{schedule.id.to_s}_#{schedule.team.id.to_s}")
  end 
```

正如您从下面的查询中看到的那样，没有忽略唯一值

```
select * from availabilities where user_id = 41;
 id | available | user_id | team_id | event_id |         created_at         |         updated_at         |            unique_id             | comment 
----+-----------+---------+---------+----------+----------------------------+----------------------------+----------------------------------+---------
 61 |           |      41 |         |          | 2012-11-04 13:48:22.794214 | 2012-11-04 13:48:22.794214 | NDFfNDNfMQ==                    +| 
    |           |         |         |          |                            |                            |                                  | 
 84 |           |      41 |       1 |       75 | 2013-02-09 14:03:29.792374 | 2013-02-09 14:03:29.792374 | IzxVc2VyOjB4YWY3NTMxND5fNzVfMQ==+| 
    |           |         |         |          |                            |                            |                                  | 
 85 |           |      41 |       1 |       75 | 2013-02-09 14:06:04.131862 | 2013-02-09 14:06:04.131862 | IzxVc2VyOjB4YjJhODBiOD5fNzVfMQ==+| 
    |           |         |         |          |                            |                            |                                  | 
 87 |           |      41 |       1 |       75 | 2013-02-09 14:07:31.77788  | 2013-02-09 14:07:31.77788  | IzxVc2VyOjB4YjBhYjdiMD5fNzVfMQ==+| 
    |           |         |         |          |                            |                            |                                  | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:39:22.203

从评论中。下面的验证确保您`user_id`对每个`event_id`. 如果需要，您可以添加多个范围。

```
validates :user_id, uniqueness: { scope: :event_id } 
```

# php - 获取第 4 个字符之后的所有字母的子字符串

> ID：14793955
> 
> 赞同：5
> 
> 时间：2013-02-10T02:11:15.870
> 
> 标签：php, string, substring

我对子字符串只有一个基本的了解。我正在尝试将前 4 个字符提取为字符串变量，并将其余字符提取到另一个字符串变量中。我怎么能用子字符串做到这一点？使用 PHP

```
$rest = substr("jKsuSportTopics", -3, 1);
$rest2 = substr("jKsuSportTopics", 4, 0); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T02:13:21.093

第二个参数是起始索引，第三个参数是字符串的长度。如果缺少第三个参数，您将获得字符串的其余部分。

```
$first_part = substr("jKsuSportTopics", 0, 4);
$rest = substr("jKsuSportTopics", 4); 
```

[这是来自文档](http://php.net/manual/en/function.substr.php)的引用：

> ...返回的字符串将从' 中`start`的第 ' 个位置开始`string`，从零开始计数。例如，在字符串 'abcdef' 中，位置 0 的字符是 'a'，位置 2 的字符是 'c'，等等。
> 
> [...]
> 
> 如果`length`给出并且是正数，则返回的字符串将最多包含`length`从开头的字符`start`（取决于字符串的长度）。
> 
> [...]
> 
> 如果`length`省略，则`start`返回从字符串开始到字符串结尾的子字符串。

# puredata - 有什么理由使用香草纯数据而不是 Pd 扩展？

> ID：14793956
> 
> 赞同：6
> 
> 时间：2013-02-10T02:11:30.550
> 
> 标签：puredata

我刚从 Pd 开始，想知道在选择使用`Pd vanilla`与`Pd-extended`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T23:59:22.693

For beginners Pd-extended offers many convenient tools and comes with many externals, abstractions and GUI-plugins already pre-installed (and direct access to the bug tracker) that you might find useful to get started. However you can still have Vanilla Pd installed alongside and try Pd in all flavours. Vanilla is usually a little more up-to-date and has the freshest improvements, because it takes time to be packaged in a Pd-extended (at the time of writing this, Extended is at 0.43.4, while vanilla is at 0.45.4.) Under some circumstances, like when you develop for libpd or for the Raspberry Pi, you might be limited to the vanilla set of objects. Testing your patch against vanilla and knowing it's dependencies on abstractions or externals is considered good practice, then you can decide whether to get rid of the dependencies, include the abstractions with your patch for distribution or assume Pd-extended and declare the dependencies properly (by using an object [declare -lib {name of lib}]). Purists who restrict themselves on vanilla on the other hand, might call Pd-extended "bloated"; but then we are getting into matters of taste, style and personal preference.

**Update 2016:** By now the situation has changed somewhat. Pd-extended is abandoned and will not be updated any more. It is still available and features some redesigned and organized helpfiles amongst other things. However, vanilla is the current Pd and through the [deken plugin](https://puredata.info/docs/Deken), there is a convenient method of installing libraries which you might be missing.

**Update 2018:** Pd-extended is now deprecated and left far behind the current features of vanilla Pd. There is no more reason why one would use Pd-extended and it should be discouraged to do so, new users should not begin with Pd with a dead-end branch. A new offshoot is [Purr-Data](https://agraef.github.io/purr-data-intro/Purr-Data-Intro.html) which tries to take on where Pd-extended has left off.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T12:28:42.797

你可以使用 vanilla 并且只安装你真正需要的外部组件。但我认为安装 pd-extended 更简单，以便在您需要一些外部组件时节省时间。

# ruby-on-rails - 提交后清除 Rails 表单

> ID：14793957
> 
> 赞同：0
> 
> 时间：2013-02-10T02:11:37.687
> 
> 标签：ruby-on-rails, jquery

我想在提交消息后清除 text_form。这是我的表格：

```
<%= form_for :chat, :html => {:id => 'send_form'}, :url => {:controller => :chat, 
       :action => :chat_save }, :remote => true do |f| %>
    <%= f.text_field(:text, :class => "text_field round") %>
    <%= f.submit(:class => 'button round') %>           
<% end %> 
```

我已经完成了，就像在这个主题中一样：[提交后清除 Rails 远程表单](https://stackoverflow.com/questions/6053039/clear-rails-remote-form-after-submitting)。首先我在我的 js 文件中尝试这个：

```
$('#send_form').submit(function() {
$('#chat_text').val('');
}); 
```

text_field 变得清晰，但它发送一个空行。然后我试试这个，它现在发送消息，但 text_field 没有变空：

```
$(document).ready(function () {
    $("#send_form").live("ajax:complete", function(evt, data, status, xhr){
        $('#chat_text').val('');
    });
} 
```

可能会错过一些图书馆吗？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T02:16:54.803

如果您可以等待服务器的回复，您可以创建一个`.js.erb`将在请求后执行的文件。从表单动作推断，创建一个名为`chat_save.js.erb`in的文件`app/views/chat`并添加

```
$('#chat_text').val(''); 
```

# javascript - switch 语句是否最好将选定的类添加到菜单中

> ID：14793962
> 
> 赞同：0
> 
> 时间：2013-02-10T02:12:21.577
> 
> 标签：javascript

我有一个包含页面导航链接的 userControl.htm，我有带有 ID 的页面，我想将“选定”类添加到相应的主页链接。

我认为 var page = (getElementByID("someId")) 会做到这一点，但没有运气。

```
var page = (getElementByID("someId"))    
switch (page) {
case 'home':
    document.getElementById("About").className = "selected";
    break;
case 'about':
    document.getElementById("About").className = "selected";
    break;
case 'contact':
    document.getElementById("contact").className = "selected";
    break;
case 'services':
    document.getElementById("services").className = "selected";
    break;
default:
    document.getElementById("home").className = "selected";
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:21:30.953

考虑使用键值映射而不是编写冗余代码：

```
//value with corresponding, and maybe not 1:1 pair
var pairs = {
  'home' : 'About',
  'about' : 'About',
  'contact' : 'contact',
  'services' : 'services',
  'default' : 'home'
  //you can add as much as you want here
};

//then get your page value
var page = getYourValue();

//page might or might not exist on the pairs list, thus we check
//default to 'default' if non-existent
page = (pairs[page]) ? page : 'default';

//then get from the map the desired value
document.getElementById(pairs[page]).className = "selected"; 
```

您可以使用以下任一方法获取正文的 ID：

```
document.body.id
//or
document.getElementsByTagName('body')[0].id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:20:55.433

只需使用这个：

```
document.getElementById(page).className = "selected"; 
```

而不是那个大的 switch 语句，它只是复制你的字符串值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T04:13:37.503

我不得不和jquery一起去

```
 current_page = document.location.href
if (current_page.match(/index/)) {
    $("#home").addClass("selected");
} else if (current_page.match(/Contact/)) {
    $("#contact").addClass("selected");
} else if (current_page.match(/media/)) {
    $("#media").addClass("selected");
} else if (current_page.match(/About/)) {
    $("#About").addClass("selected");

} else if (current_page.match(/Information/)) {
    $("#information").addClass("selected");
} else { // don't mark any nav links as selected
    $("ul#navigation li").removeClass('selected');
}; 
```

# html - 使用 CSS 淡化元素顶部

> ID：14793969
> 
> 赞同：0
> 
> 时间：2013-02-10T02:12:43.830
> 
> 标签：html, css

如何在 CSS 中创建与**[此类](http://i.imgur.com/3ybtSPo.png)**似的效果（右侧的框）？

小问题，但简短是甜蜜的。我会发布我尝试过的代码，但我无法开始淡化整个框，这也足以满足我的目的（我可以在下面添加另一个带有背景的 div，我需要的只是淡化文本）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:30:21.237

您可以使用图像蒙版。然而，这仅适用于几乎所有的 Chrome。**[更多信息](http://caniuse.com/css-masks)**。

```
element {
    -webkit-mask-image: -webkit-gradient(
        linear, 
        0 0, 
        0 50%, 
        from(rgba(0, 0, 0, 0)), 
        to(rgba(0, 0, 0, 1))
    )
} 
```

[**JSFiddle**](http://jsfiddle.net/UULkj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:20:29.890

使用`linear-gradient`with `rgba`，从完全不透明度变为 0，颜色相同：

```
div {
    width: 400px;
    margin: 20px auto;
    background: rgb(163, 182, 245);
    padding: 10px;
    position: relative;
}

div:before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 80px;
    background: linear-gradient(
        rgba(163, 182, 245, 1),
        rgba(163, 182, 245, 0)
    );
} 
```

这是小提琴：http: [//jsfiddle.net/HUHKB/](http://jsfiddle.net/HUHKB/)

* * *

**PS**不要忘记生产中的供应商前缀......

# php - 错误：从弹出窗口访问小书签的权限被拒绝

> ID：14793971
> 
> 赞同：0
> 
> 时间：2013-02-10T02:12:55.060
> 
> 标签：php, javascript, permissions, bookmarklet

我前段时间创建了一个书签，现在我正在尝试添加登录功能。

我这样做的方式。如果用户当前未登录并单击书签，则会打开一个弹出窗口，其中包含我的登录页面的 url。

我的想法是一旦用户登录，我将回显一个 javascript 脚本标签。在脚本中有一个对小书签中定义的函数的调用。

一旦用户登录，我会在弹出窗口中回显这一点。

```
if(logged){
    echo '
    <script type="text/javascript">
        window.opener.updateLoginBookMarklet(true);
        window.close();
    </script>
   ';
    exit;
} 
```

这是书签中定义的函数：

```
window.updateLoginBookMarklet = function(status){
     LoggedIn = status;
} 
```

但是我似乎得到了`Error: Permission denied to access property "updateLoginBookMarklet"`

这可能是由于我不确定的跨域问题。

有人有线索吗？有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:10:15.457

> 这可能是由于我不确定的跨域问题。

你是对的。出于安全原因，来自一个域的页面中的 JavaScript 不能直接与来自另一个域的页面交互。

一种解决方案是使用 addEventListener 和 postMessage。我建议先阅读这些内容，然后在谷歌上搜索`bookmarklet postmessage`一些实际示例。

# python - 使用堆栈将字符串解析为树

> ID：14793972
> 
> 赞同：1
> 
> 时间：2013-02-10T02:13:09.520
> 
> 标签：python, recursion, tree, stack

为了充分披露，这*是*硬件，但任务已经到期。

如果我们定义一个简单的树如下：

```
class Tree (object):
    __slots__ = "node","children"
    def __init__(self,node,children=[]):
        self.node = node
        self.children = children 
```

我们如何从字符串中构建一棵树？在字符串模型中，“NIL”表示树的结束。因此，该字符串`1 2 5 NIL 3 4 NIL NIL NIL NIL`将返回一个类似`t = Tree(1, [Tree(2, [Tree(5, []), Tree(3, [Tree(4)])])])`. 该解决方案可以使用递归和/或堆栈。我以为我了解堆栈和递归，但我无法弄清楚这个问题。有任何想法吗？

**编辑**
要添加更多信息，我们可以像这样打印树：

```
def __str__(self):
    return "(%s)" % " ".join(map(str,[self.node]+self.children)) 
```

我无法接近创建一棵树并打印它。我能想到的只是创建一个*看起来像*创建树的字符串的字符串。我有：

```
def delinearize(self, linear_string):
    @staticmethod
    tree_data = linear_string.split()
    tree_str = ""
    if tree_data[0] == "NIL":
        print "Tree needs initial root node"
        return
    for entry in tree_data:
        if entry != "NIL":
                tree_str += "Tree("+entry+", ["
        elif entry == "NIL":
                tree_str += "])," 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:40:26.120

在您的示例中，对于此输入：

```
1 2 5 NIL 3 4 NIL NIL NIL NIL 
```

你说这应该是结果（注意我只是格式化了你的版本以便于理解）：

```
Tree(1, [
    Tree(2, [
        Tree(5, []),
        Tree(3, [
            Tree(4)
        ])
    ])
]) 
```

“看起来像”这样：

```
 1
  |
  2
 / \
5   3
    |
    4 
```

从这个（以及 nneonneo 的有用评论）我们可以确定这些树是如何从字符串构建的。它似乎是这样工作的：

1.  从理论上的根节点开始，被认为是“当前”节点。
2.  对于每个非 NIL 值，将其添加为当前节点的子节点，并将其标记为新的当前节点。也就是下降。
3.  对于每个 NIL 值，将当前节点的父节点标记为新的当前节点。也就是登高。
4.  当再次到达理论上的根节点时，我们就完成了（字符串应该被完全消耗掉）。

请注意，如果您想节省空间，可以省略返回根目录的尾随 NIL。另一方面，包括它们支持最后的健全性检查。

根据我上面给出的大纲，它可以以迭代方式实现，无需递归。有些人更喜欢递归解决方案，但任何一种方式都同样强大，所以后者留作练习！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:40:53.037

因此，假设我们知道以下两件事：

*   如果您从输入字符串中读取 NIL，您就知道您已读取并清空了树。
*   如果您读取一个数字，那么您有一个根包含该数字的非空树，您仍然需要从输入字符串中读取两棵树（一棵用于左孩子，一棵用于右孩子）。

现在我们准备好阅读树了:)。假设以下类似 C 的结构（我会让你在 python 中这样做作为练习，并且在 python 中更干净）：

```
struct tree {
   int value;
   tree *left;
   tree *right;
} 
```

并且有些挥手基本上是一种采用char *的方法，返回第一个标记并将输入字符串更改为指向下一个标记）在输入流中可以执行以下操作：

```
tree *readTree(char *&inputString) {
   char *token = read_next_token(inputString); 
   if (strcmp(token, "NIL") {
      // empty tree .. we return
      return NULL;
   }

   struct tree* node = malloc(sizeof(struct tree));
   node->value = token_as_int(token);

   // note that after the readTree is called the inputString will be modified
   // that's why i defined it to take a reference to a pointer of chars.
   node->left = readTree(inputString);
   node->right = readTree(inputString);
   return node; 
} 
```

并且 read_next_token 定义为：

```
char *read_next_token(char*&inputString) {
  char *token = inputString;

  while ( *inputString != ' ' )
    inputString++;

  *inputString = 0; // make the token a null terminated string.

  while ( *inputString == ' ' ) inputString++;

  return token;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T06:05:21.493

也许是这样的：

```
#! /usr/bin/python3.2

class Tree:
    def __init__ (self, value):
        self.value = value
        self.parent = None
        self.children = []

    def __iadd__ (self, child):
        child.parent = self
        self.children.append (child)
        return self

    def fromString (string):
        return Tree.fromList (string.split () ) [0]

    def fromList (list):
        node = Tree (list [0] )
        list = list [1:]
        while list [0] != 'NIL':
            child, list = Tree.fromList (list)
            node += child
        return node, list [1:]

    def __repr__ (self):
        return '{}{}'.format (self.value, ': {}'.format (self.children) if self.children else '')

t = Tree.fromString ('1 2 5 NIL 3 4 NIL NIL NIL NIL')
print (t)

t = Tree.fromString ('1 2 NIL 3 4 NIL 5 NIL 6 NIL NIL 7 NIL NIL')
print (t) 
```

# regex - 在PowerShell中用环境变量替换正则表达式令牌

> ID：14793973
> 
> 赞同：3
> 
> 时间：2013-02-10T02:13:11.640
> 
> 标签：regex, powershell, replace, environment-variables, template-engine

与 PowerShell 有点争执。我正在尝试用环境变量的值替换文本文件中的标记。例如，假设我的输入文件如下所示：

```
Hello [ENV(USERNAME)], your computer name is [ENV(COMPUTERNAME)]
and runs [ENV(OS)] 
```

我尝试了以下方法：

```
Get-Content test.txt | ForEach {$_ -replace '\[ENV\((\w+)\)\]', "$env:$1" } 
```

这给出了错误：

```
At line:1 char:74
+ Get-Content test.txt | ForEach {$_ -replace '\[ENV\((\w+)\)\]', "$env:$1 ...
+                                                                  ~~~~~
Variable reference is not valid. ':' was not followed by a valid variable name character. Consider using ${} to delimit the name.
    + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException
    + FullyQualifiedErrorId : InvalidVariableReferenceWithDrive 
```

我也试过：

```
Get-Content test.txt | ForEach {$_ -replace '\[ENV\((\w+)\)\]', [environment]::GetEnvironmentVariable($1) } 
```

但这无法检索变量并将其作为输出给我：

```
Hello , your computer is named
and runs 
```

我试图调用我自己定义的函数，但得到另一个错误：

```
At D:\tfs\HIPv3\prod\Dev\Tools\EnvironmentResolve.ps1:13 char:72
+ Get-Content test.txt | ForEach {$_ -replace '\[ENV\((\w+)\)\]', GetEnvVa ...
+                                                                 ~~~~~~~~
Missing expression after ','.
At D:\tfs\HIPv3\prod\Dev\Tools\EnvironmentResolve.ps1:13 char:73
+ Get-Content test.txt | ForEach {$_ -replace '\[ENV\((\w+)\)\]', GetEnvVa ...
+                                                                 ~~~~~~~~
Unexpected token 'GetEnvVar' in expression or statement.
    + CategoryInfo          : ParserError: (:) [], ParseException
    + FullyQualifiedErrorId : MissingExpressionAfterToken 
```

任何人都知道如何使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:18:56.713

我懂了：

```
$string = 'Hello [ENV(USERNAME)], your computer name is [ENV(COMPUTERNAME)] and runs [ENV(OS)]'

$regex = '\[ENV\(([^)]+)\)]'

 [regex]::Matches($string,$regex) |
  foreach {
            $org = $_.groups[0].value
            $repl = iex ('$env:' + $_.groups[1].value)
            $string = $string.replace($org,$repl)
          }

 $string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:19:41.153

而不是`"$env:$1"`（双引号）使用`'$env:$1'`（单引号），你应该没问题。PowerShell 将扩展双引号字符串中的变量。在您的上下文`$1`中**不是**PowerShell 变量：它是正则表达式标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-23T22:36:26.013

而不是`[ENV(...)]`为什么不使用`%...%`？

```
$string = 'Hello %USERNAME%, your computer name is %COMPUTERNAME% and runs %OS%'
[System.Environment]::ExpandEnvironmentVariables($string) 
```

这给了我：您好 IanG，您的计算机名称是 1EUKCOL1184 并运行 Windows_NT

# html - 如果我为组件设置像素，它在每台显示器上的行为是否相同？

> ID：14793978
> 
> 赞同：0
> 
> 时间：2013-02-10T02:13:32.830
> 
> 标签：html, css, pixel

将以下内容`css`：

```
#search_bar {
  width: 300px;
  margin-left:475px;
  height:27px;
} 
```

在每个显示器上生成与以下快照相同的搜索栏位置？

![在此处输入图像描述](../Images/6a6af570a0e2739b04b222a421142e20.png)

百分比单位会在每个显示器上相应地显示大小，像素是否相同？我的意思是我尝试将搜索框对齐在中心的快照中可见，但我不知道它在比我更宽的显示器上看起来是否相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:16:17.043

显示器和屏幕分辨率都与元素的定位方式无关。重要的是视口的宽度/高度（尤其是因为桌面用户并不总是最大化他们的浏览器）。如果视口只有 300px 宽，那么您的元素不仅不会居中，而且会偏向右侧，以至于它会出现在屏幕外！如果视口是 2000 像素宽，那么它会在左边很远。

无论视口大小如何，这里有 2 个选项可以使元素完美居中。

```
input.one {
    display: block;
    margin: 0 auto;
    width: 300px;
}

input.two {
    width: 300px;
    margin-left: -150px; /* half of the element's width */
    position: relative;
    left: 50%;
} 
```

[http://jsfiddle.net/bGMck/](http://jsfiddle.net/bGMck/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:17:10.860

如果以像素为单位定位元素，则称该元素是绝对定位的。这意味着具有不同大小窗口的用户可能看不到它在屏幕中央。

您可以使用 JavaScript 在页面加载或窗口调整大小时重新定位这些居中元素：

```
function doResize() {
    var elem = document.getElementById('myCenterDiv');
    var ww = window.innerWidth;
    var elemWidth = elem.offsetWidth;
    elem.style.left = (ww - elemWidth) / 2;
}
window.onload = doResize;
window.onresize = doResize; 
```

或者，您可以使用 CSS 方式：

```
body {
    position: relative;
}
body > #myCenterDiv {
    position: absolute;
    top: 300px;
    width: 100px;
    height: 80px;
    margin: 0 auto; /* This centers the element */
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-10T02:42:42.950

在旧的 HTML 版本中，有一个东西叫做`<center>`现在不存在。为了在 HTML5 中居中，在 css 中编写：

```
margin-left:auto;
margin-right:auto; 
```

这将使任何对象居中。

如果你不希望它在中心，那么你可以使用**Javascript：**

```
var screen = screen.availWidth;
var gapPercent = 20;
var gap = gapPercent/screen;
document.getElementById('search_bar').style.margin-left = "gap + 'px'"; 
```

我不知道确切的代码，请。试试代码，我确定如果document.get......事情写得正确然后它会工作 - 我已经很长时间没有使用js了。

# sql - 检查插入时另一个表中是否存在数据？

> ID：14793980
> 
> 赞同：1
> 
> 时间：2013-02-10T02:14:55.450
> 
> 标签：sql, constraints

```
Table A
(
Table_A_ID int
)

Table B
(
Table_B_ID int
Value int
) 
```

假设我想将数据插入表 B，其中“值”与 Table_A_ID 相同。我将如何进行约束或检查插入时表中是否确实存在数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:37:55.390

您可能不仅需要在 INSERT 到表 B 中强制执行数据完整性，还需要在两个表中的 UPDATE 和 DELETE 上强制执行数据完整性。

无论如何选择是：

1.  表 B 上的[外键约束](http://en.wikipedia.org/wiki/Foreign_key)
2.  两个表上的[TRIGGER](http://en.wikipedia.org/wiki/Database_trigger)
3.  作为最后的手段，如果出于某种原因 1 和 2 不是所有插入的选项[STORED PROCEDURE](http://en.wikipedia.org/wiki/Stored_procedure)，删除两个表的更新操作

大多数情况下**首选**的方法是外键约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:55:09.340

是的，我同意@peterm。

原因，如果您的两者`Table_A_ID`和`Table_B_Id`都是两个表的主键，那么您甚至不需要两个表来存储`value`. 因为，你的两张桌子似乎是“一对一”的关系。这是数据库*完整性*问题之一。

我认为您没有对此数据库进行适当的规范化。
只是建议一个好主意！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T04:05:09.867

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-06T09:13:26.177

在表 B 上引用“Table_A_ID”列的“值”列上创建外键约束。

这样做只会允许将表 A 中存在的值添加到表 B 的“值”字段中。

为此，您首先需要使 Table_A_ID 列成为表 A 的主键，或者至少必须对其应用某种唯一约束才能成为外键候选者。

```
BEGIN TRANSACTION -- REMOVE TRANSACTION AND ROLLBACK AFTER DONE TESTING    

--PUT A PRIMARY KEY ON TABLE A
CREATE TABLE A 
( Table_A_ID int CONSTRAINT PK_A_Table_A_ID PRIMARY KEY)

--ON VALUE ADD A FOREIGN KEY CONSTRAINT THAT REFERENCEs TABLE A
CREATE TABLE B
( Table_B_ID int,
  [Value] int CONSTRAINT FK_B_Value_A REFERENCES A(Table_A_ID)
)

-- TEST VALID INSERT
INSERT A (Table_A_ID) VALUES (1)
INSERT B (Table_B_ID, [Value]) VALUES (1,1)

--NOT ALLOW TO INSERT A VALUE THAT DOES NOT EXIST IN A
--THIS WILL THROW A FOREIGN KEY CONSTRAINT ERROR
INSERT B (Table_B_ID, [Value]) VALUES (1,2) -- 2 DNE in table A

ROLLBACK 
```

注意：'FK_B_Value_A' 或 'PK_A_Table_A_ID' 没有什么魔力，它只是一个命名约定，可以被称为任何东西。外键和主键行的语法如下：

*column-definition* CONSTRAINT *give-the-constraint-a-name* REFERENCES *table-name* ( *table-column* )

*column-definition* CONSTRAINT *give-the-constraint-a-name* PRIMARY KEY

# c# - 如何使用自定义对象仅显示 DataGridView 中的某些列

> ID：14793990
> 
> 赞同：19
> 
> 时间：2013-02-10T02:16:41.700
> 
> 标签：c#, datagridview

我有一个 DataGridView，我需要向它添加自定义对象。考虑以下代码：

```
DataGridView grid = new DataGridView();
grid.DataSource = objects; 
```

使用此代码，我得到一个 DataGridView 对象，其中所有属性都作为列。就我而言，我不想显示所有这些信息。我只想显示两三列。我知道我可以设置

`AutoGenerateColumns = false`.

但我不知道以后如何进行。一种选择是隐藏我不感兴趣的所有列，但我认为最好以相反的方式进行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-10T02:29:20.230

每当我这样做时，我通常会`grid.DataSource`在对象上生成 LINQ 投影的结果。

所以是这样的：

```
grid.DataSource = objects.Select(o => new
    { Column1 = o.SomeValue, Column2 = o.SomeOtherValue }).ToList(); 
```

好消息是您可以设置`AutoGenerateColumns`为 true，这将根据投影对象的属性生成列。

**编辑：**

这种方法的一个缺点是，通过将所有内容投影到匿名对象中，例如，在需要在单击事件中访问特定对象的情况下，您可能会遇到问题。

在这种情况下，您最好定义一个显式视图模型并将您的对象投影到其中。例如，

```
class MyViewModel
{
    public int Column1 { get;set; }
    public int Column2 { get;set; }
}

grid.DataSource = objects.Select(o => new MyViewModel()
    { Column1 = o.SomeValue, Column2 = o.SomeOtherValue }).ToList(); 
```

**编辑2：**

`MyViewModel`表示要在 中显示的所有列`DataGridView`。示例属性当然应该重命名以适合您正在做的事情。通常， ViewModel 的目的是充当一种转换器，在模型（在您的情况下是您的对象列表）和视图之间进行调解。

如果您想保留对底层对象的引用，最好的方法可能是通过构造函数提供它：

```
class MyViewModel
{
    public int Column1 { get;set; }
    public int Column2 { get;set; }

    ....

    private SomeType _obj;

    public MyViewModel(SomeType obj)
    {
        _obj = obj;
    }

    public SomeType GetModel()
    {
        return _obj;
    }
}

grid.DataSource = objects.Select(o => new MyViewModel(o)
    { Column1 = o.SomeValue, Column2 = o.SomeOtherValue }).ToList(); 
```

我使用 getter 方法来检索底层模型对象的原因只是为了避免为它生成列。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-10T02:35:01.613

您还可以在适当的情况下对基础对象中的任何属性使用属性 [Browsable(false)]。这当然会抢占该列，使其无法在其他地方浏览，因此您可能会发现这是不可取的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-01-30T12:39:58.233

`AutoGenerateColumns = false`您可以像这样使用和使用 DataPropertyName 的数据绑定

```
grid.Columns["Column_name_1"].DataPropertyName = "public_property_1";
grid.Columns["Column_name_2"].DataPropertyName = "public_property_2"; 
```

这样，datagridview 中只会显示绑定的列，如果需要，您可以在编辑器中创建列。公共属性可以是对象中的任何公共属性。

如果您正在从 datagridview 编辑数据，那么您应该在 set 方法中使用 NotifyPropertyChanged。[请在此处查看](https://stackoverflow.com/questions/21117217/best-aproach-to-bind-a-datagridview-to-database-entity-ies)我的问题/答案，我会一直解释这一点。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-03-22T22:09:01.560

最简单的方法是将“System.ComponentModel.Browsable”属性添加到 DataModel：

```
public class TheDataModel 
{
       [System.ComponentModel.Browsable(false)]
       public virtual int ID { get; protected set; }
       public virtual string FileName { get; set; }
       [System.ComponentModel.Browsable(false)]
       public virtual string ColumnNotShown1 { get; set; }
       [System.ComponentModel.Browsable(false)]
       public virtual string ColumnNotShown2  { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-04-23T06:17:54.300

你可以做这样的事情。

要首先只显示特定的列，`DataGridView`您可以`DataTable`像这样获取数据。

```
String query="Your query to dispplay columns from the database";
SqlCommand cmd=new SqlCommand(query,con); //con is your Connection String
con.Open();
DataTable dt=new DataTable();
SqlDataAdapter da=new SqlDataAdapter(cmd);
da.Fill(dt); //Now this DataTable is having all the columns lets say
/* Now take another temporary DataTable to display only particular columns*/
DataTable tempDT=new DataTable();
tempDT=dt.DefaultView.ToTable(true,"Your column name","your column name");
//Now bind this to DataGridView
grid.DataSource=tempDT;
con.Close(); 
```

我知道这是一个相当长的过程。那些去表演的人可能不喜欢这样。:P

但我认为它工作正常。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-06-15T22:58:54.333

这是我来自旧项目的代码。它可以为您的情况工作。

```
OleDbDataAdapter da = new OleDbDataAdapter("SELECT * FROM uyeler", baglanti);

da.Fill(dbDataSet1, "uyeler");

//Set AutoGenerateColumns False
dataGridView1.AutoGenerateColumns = false;

//Set Columns Count
dataGridView1.ColumnCount = 5;

//Add Columns
dataGridView1.Columns[0].Name = "İsim"; // name
dataGridView1.Columns[0].HeaderText = "İsim"; // header text
dataGridView1.Columns[0].DataPropertyName = "ad"; // field name

dataGridView1.Columns[1].HeaderText = "Soyisim";
dataGridView1.Columns[1].Name = "Soyisim";
dataGridView1.Columns[1].DataPropertyName = "soyad";

dataGridView1.Columns[2].Name = "Telefon";
dataGridView1.Columns[2].HeaderText = "Telefon";
dataGridView1.Columns[2].DataPropertyName = "telefon";

dataGridView1.Columns[3].Name = "Kayıt Tarihi";
dataGridView1.Columns[3].HeaderText = "Kayıt Tarihi";
dataGridView1.Columns[3].DataPropertyName = "kayit";

dataGridView1.Columns[4].Name = "Bitiş Tarihi";
dataGridView1.Columns[4].HeaderText = "Bitiş Tarihi";
dataGridView1.Columns[4].DataPropertyName = "bitis";

dataGridView1.DataSource = dbDataSet1;
dataGridView1.DataMember = "uyeler"; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-11-12T12:07:01.880

```
 SqlCommand cmd6 = new SqlCommand("SELECT * FROM tblinv WHERE invno='" + textBox5.Text + "'",cn);

        SqlDataReader sqlReader6 = cmd6.ExecuteReader();

        if (sqlReader6.HasRows)

        {
            DataTable dt = new DataTable();

            DataTable dt1 = new DataTable();

            dt.Load(sqlReader6);

            dt1 = dt.DefaultView.ToTable(true, "ChallanNo", "ProductName", "UoM", "Price", "Qty","Subtotal");

            dataGridView2.DataSource = dt1;
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-17T19:15:45.770

为列表创建新模型，例如 ....

```
 var today =DateTime.Today;
            DailyEnteryList = _context.Tbl_AllEntriries.Where(x => 
                x.CreatedOn.Value.Date == today.Date).
                Select(x=> new EntirysModel 
                {
                    EntiryNo=Convert.ToInt64(x.EntiryNo),
                    CustomerName=x.CustomerName,
                    Date=Convert.ToDateTime(x.Date),
                    ModelName=x.ModelName,
                }).ToList(); 
```

> 我的EntrysModel

```
 public class EntirysModel
{
    public long EntiryNo { get; set; }
    public string CustomerName { get; set; }
    public DateTime Date { get; set; }
    public string ModelName { get; set; }
} 
```

> 然后在网格中添加列

[1]

：[https ://i.stack.imgur.com/3dZAl.png](https://i.stack.imgur.com/3dZAl.png)

> 这是我的现金最好的工作谢谢！

# facebook-javascript-sdk - Facebook Javascript SDK在接受应用程序后获取空白页面

> ID：14793992
> 
> 赞同：2
> 
> 时间：2013-02-10T02:16:46.863
> 
> 标签：facebook-javascript-sdk, facebook-login

在尝试使用 Javascript SDK 进行简单登录流程时，我不断收到错误消息。我一定做错了什么，但无法弄清楚。我只是在用户接受应用程序后尝试重定向用户。

这是发生了什么：用户单击登录按钮，出现应用程序对话框（具有正确的权限）。他们批准了该应用程序，然后弹出窗口挂在带有此 URL 的空白页面上：[https](https://www.facebook.com/dialog/permissions.request) ://www.facebook.com/dialog/permissions.request 。

但是，该应用程序已获得批准，如果我单击退出对话框并再次单击登录按钮，我会正确重定向，并安装该应用程序。

这是我的代码：

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="js/functions.js" type="text/javascript">
</script>
<link type="text/css" href="style/style.css" rel="stylesheet" />
<link href='http://fonts.googleapis.com/css?family=Oranienbaum' rel='stylesheet' type='text/css'>
</head>
<body>

<script>
// Additional JS functions here
window.fbAsyncInit = function() {
    FB.init({
      appId      : 'my_app_id', // App ID
       // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional init code here
    FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        $('.submit_button').attr("href","gameurll").removeAttr("onClick");
    }
    });
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
      if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

  // Facebook Login Function

function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
            window.location = "gameurl";
        } else {
            // cancelled
        }
    }, {scope:"publish_actions,email,user_relationship_details"});
}

</script>

<a class="submit_button" href="" onclick="login();" >Login</a>

</body>
</html> 
```

在此先感谢您的帮助

# batch-file - 批处理功能无法正常工作

> ID：14793998
> 
> 赞同：0
> 
> 时间：2013-02-10T02:17:13.887
> 
> 标签：batch-file, vbscript

前段时间我做了一个函数，你可以从命令提示符或任何批处理文件中调用它（这只是为了好玩，我看不出它有什么用处）。它基本上只是让您的（Microsoft）计算机说出您作为参数写入的任何内容。我最近得到了一些灵​​感，给它添加了一个可以读取文件内容的开关。我的独立脚本可以工作，但是当我将它添加到我的函数中时，它并没有像我希望的那样工作。

这是代码：

```
@echo off & setlocal enabledelayedexpansion

if "%~1"=="/?" (
    echo.
    echo TALK "Text" [Parameters]
    echo.
    echo Text - The phrase you want to be spoken.
    echo.
    echo [Parameters]:
    echo              /f - Read the contents of a file. "Text" changes to the file path.
    echo.
    endlocal
    exit /b
)

if "%~2 X" equ "/f X" (

    if not exist %~1 (
        echo File does not exist or cannot be found.
        endlocal
        exit /b
    )

    set cont= 
    for /f "delims=" %%i in (%~1) do set cont=!cont! %%i
    :b
    echo Set a = Wscript.CreateObject("SAPI.SpVoice") > "Talk.vbs"
    echo a.speak "%cont%" >> "Talk.vbs"
    start /WAIT Talk.vbs
    del Talk.vbs
    endlocal
    exit /b
)

set text=%~1

echo set speech = Wscript.CreateObject("SAPI.spVoice") > "talk.vbs"
echo speech.speak "%text%" >> "talk.vbs"
start /WAIT talk.vbs
del Talk.vbs
endlocal
exit /b 
```

不幸的是，我没有工作功能代码（在我添加`/f`开关之前）。

这对我来说是最后的手段，因为我已经对其进行了大量编辑并搜索了代码以找出可能存在的问题。

另一个不好的事情是我没有注意到我改变了什么，所以我不能准确地告诉你我尝试了什么。我可以告诉你输出是什么。

我第一次尝试时，它给出了输出`The syntax of the command is incorrect.`

现在原始功能（只是将文本转换为语音）不再起作用了。该文件的内容`Talk.vbs`（在此过程中生成）是`a.speak ""`.

我会不断更新我的尝试，但我知道这是我忽略的非常简单的事情。

--EDIT-- 在某人的建议下，我在语法部分的方括号前加上了克拉。没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:43:19.930

在包含括号的 echo 语句中，尝试用克拉转义括号。我特别怀疑 if 语句中的回声部分被逐字评估。

另一个小建议，我也会替换

```
start /WAIT Talk.vbs 
```

和

```
cscript /nologo Talk.vbs 
```

这并不是我认为`start /wait`是导致错误的原因，而是它确实会导致第二个控制台窗口无缘无故地临时出现——或者无论如何，只要你的脚本执行那么远，它就会出现。

我在这里做了一些其他建议的更改，例如消除对 /f 开关的需要。如果“%1”是存在的文件的名称，请读取它。否则，将其视为要阅读的文本。而不是有一个单独的子程序来读取文件而不是从输入中获取文本，所有需要发生的只是一个变量具有不同的值。

```
@echo off & setlocal enabledelayedexpansion

if "%1"=="/?" ( goto usage )
if "%1"=="" ( goto usage )
if "%1"=="--help" ( goto usage )
if exist "%1" (
    set txt=
    for /f "usebackq tokens=*" %%i in (%1) do set txt=!txt! %%i
) else (
    set txt=%1
)
echo Set a = Wscript.CreateObject^("SAPI.SpVoice"^) > "talk.vbs"
echo a.speak "%txt%" >> "talk.vbs"
cscript /nologo talk.vbs
del talk.vbs
endlocal
goto :EOF

:usage
echo.
echo TALK ["text"^|filename]
echo.
echo talk filename -- speaks the contents of filename
echo talk "text"   -- speaks the supplied text
endlocal
goto :EOF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T03:38:05.443

除了转义括号外，您还必须`if exist %~1`用引号括起来以防`"some words I want it to say"`. 也清理了一下。代码在底部，但首先是解释。

如果您在 talk.vbs 被删除之前查看它，您会看到：

```
a.speak "!cont! contents of the file here" 
```

这是因为这段代码：

```
for /f "delims=" %%i in (%~1) do set cont=!cont! %%i
:b
echo Set a = Wscript.CreateObject("SAPI.SpVoice") > "Talk.vbs" 
```

如果您打开 echo 并查看代码，您会看到最后一个未转义的代码`)`正在获取 for 循环的内容并将其包含在重定向中。

更正和清理的代码：

```
@echo off & setlocal enabledelayedexpansion
if "%~1"=="/?" (
    echo.
    echo TALK "Text" [Parameters]
    echo.
    echo Text - The phrase you want to be spoken.
    echo.
    echo [Parameters]:
    echo              /f - Read the contents of a file. "Text" changes to the file path.
    echo.
    endlocal
    exit /b
)
set text=
if [%2]==[/f] (
    if exist "%~1" (
        for /f "usebackq delims=" %%i in (%1) do set text=!text! %%i
    ) else (
        endlocal
        exit /B
    )
)
if [%2]==[] set text=%~1

echo set speech = Wscript.CreateObject^("SAPI.spVoice"^) > "talk.vbs"
echo speech.speak "%text%" >> "talk.vbs"
cscript //NoLogo //B talk.vbs
del Talk.vbs
endlocal
exit /b 
```

**编辑：**修复了`for`Andriy M 指出的声明