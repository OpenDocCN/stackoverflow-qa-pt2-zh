# StackOverflow 问答 14910000-14910999

# delphi - VirtualTreeView 复制树与数据

> ID：14910000
> 
> 赞同：0
> 
> 时间：2013-02-16T11:55:23.200
> 
> 标签：delphi, virtualtreeview

如何将所有节点从一个 VirtualTreeView 复制到另一个？我尝试使用 CopyTo 功能，但数据为空，为什么？数据包含对记录的引用（像往常一样）。

我也尝试使用`OnNodeCopying`@Cosmin Prund 在他现在已删除的答案中建议的事件，但它崩溃了：

```
procedure TDataBaseForm.SourceTreeViewNodeCopying(Sender: TBaseVirtualTree; 
  Node, Target: PVirtualNode; var Allowed: Boolean); 
var 
  SourceNodeData, DestNodeData: PNodeDataForCompare; 
begin 
  SourceNodeData := Sender.GetNodeData(Node); 
  DestNodeData := VirtualStringTree1.GetNodeData(Target); 
  if Assigned(SourceNodeData) then 
  begin 
    DestNodeData^ := SourceNodeData^; 
  end; 
  Allowed := true; 
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T12:11:24.370

我已经深入研究了它的`CopyTo()`工作原理。所有要复制的节点首先保存到流中，然后在目标 VirtualTree 上重新创建流中的节点。用户节点数据需要复制到该流中，否则在目标 VirtualTree 中重新创建节点时将不可用。

处理流式用户数据的事件是：

*   OnSaveNode
*   加载节点

VirtualTree 使用这些方法是有意义的，因此将流用作中间对象是有意义的。VirtualTree 还允许将树保存到文件中，并将节点复制粘贴到剪贴板。所有这些方法都需要以某种方式复制用户的“有效负载”！在实现这些事件之后，该`CopyTo`方法运行良好，将第一棵树的内容保存到磁盘并将其重新加载到第二棵树中也是如此。我还测试了复制粘贴，效果很好。

这是我对`OnSaveNode`and的实现`OnLoadNode`。复制粘贴我的方法很可能对您不起作用，因为它取决于您放入节点有效负载中的数据类型。在我的示例中，我放置了仅由一个整数组成的记录（不是指向记录的指针）：这些记录可以安全地流式传输到磁盘并重新加载，它们不是托管类型，它们是简单的值类型。如果您将指针放入记录中（您称它们为引用记录），您仍然可以使用它并且它会起作用，但您会复制 POINTERS：您没有得到新记录，它们是相同的记录；您显然无法将树保存到文件中，重新启动程序并从磁盘重新加载。

```
procedure TForm6.VT1SaveNode(Sender: TBaseVirtualTree; Node: PVirtualNode;
  Stream: TStream);
begin
  Stream.Write(Sender.GetNodeData(Node)^, (Sender as TVirtualStringTree).NodeDataSize);
end;

procedure TForm6.VT2GetText(Sender: TBaseVirtualTree; Node: PVirtualNode;
  Column: TColumnIndex; TextType: TVSTTextType; var CellText: string);
begin
  CellText := IntToStr(PNodeDataForCompare(VT1.GetNodeData(Node)).Payload);
end; 
```

最后一点：对于您的场景，您需要`OnSaveNode`在源树上`OnLoadNode`实现并在目标树上实现；我使用相同的代码在两者上实现了它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T11:00:35.530

```
unit VirtualTrees;

...

function TBaseVirtualTree.CopyTo(Source, Target: PVirtualNode; Mode: TVTNodeAttachMode; ChildrenOnly: Boolean): PVirtualNode;

...

        Result := TargetTree.MakeNewNode;
        InternalConnectNode(Result, Target, TargetTree, Mode);
        TargetTree.InternalAddFromStream(Stream, VTTreeStreamVersion, Result);
        if not DoNodeCopying(Result, Source {Target}) then //        <=======
        begin
          TargetTree.DeleteNode(Result);
          Result := nil;
        end 
```

...

# google-visualization - 格式化谷歌图表区域日期（如 2012 年 3 月、2013 年 10 月等）

> ID：14910002
> 
> 赞同：1
> 
> 时间：2013-02-16T11:55:41.313
> 
> 标签：google-visualization, date-format, linechart

我想将 Google Chart Area 日期显示为 2012 年 3 月、2013 年 10 月等。格式中不应有任何日期数字。我只能找到 3 种格式

## 格式

var formatter_long = new google.visualization.DateFormat({formatType: 'long'});

var formatter_medium = new google.visualization.DateFormat({formatType: 'medium'});

var formatter_short = new google.visualization.DateFormat({formatType: 'short'});

## 导致

2008 年 2 月 28 日（长）

2008 年 2 月 28 日（中）

2008 年 2 月 28 日（短）

如果我可以从结果中删除日期数字，对我来说长中型工作。有没有机会以某种方式做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T23:22:16.823

Google 使用[ICU SimpleDateFormat 标准](http://icu-project.org/apiref/icu4c/classSimpleDateFormat.html#_details)的一个子集。

如果您的意思是“删除日期数字”，如“删除日期并仅显示月/年”，那么您可以按如下方式格式化字符串：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = new google.visualization.DataTable();
  data.addColumn('date', 'Date');
  data.addRows([
    [new Date(2012,1,5)],
    [new Date(2012,2,10)],
    [new Date(2012,3,15)],
    [new Date(2012,4,20)]
  ]);

  alert(data.getFormattedValue(3,0));

  var formatter1 = new google.visualization.DateFormat({pattern: 'yyyy, MMM'});

  formatter1.format(data,0);

  alert(data.getFormattedValue(3,0));
} 
```

当您定义数据表时，第一个警报会将格式化日期列为“2012 年 5 月 20 日”。应用格式化程序后，它将仅显示“2012 年 5 月”。我想这就是你想要的。您可以根据需要更改格式。

# cygwin - 便携式 Cygwin 中缺少“diff.exe”

> ID：14910005
> 
> 赞同：0
> 
> 时间：2013-02-16T11:55:45.770
> 
> 标签：cygwin, diff, portability

由于缺乏特权/权限/影响/权力/魅力/金钱，我无法在我的工作计算机上安装完整的 Cygwin。因此，我改为使用 [**便携式 Cygwin**](http://sourceforge.net/projects/cygwinportable)。

我惊恐地发现`diff.exe`便携式 Cygwin 中缺少好旧的东西。

为什么它不见了？

我可以从哪里得到它？

还缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T12:16:29.723

Baby Cygwin 的建议不起作用 - 不断获得核心转储。

我的解决方案是在 /usr/local/bin 中编写一个包装“diff”脚本，它具有以下内容：

```
F1=$( cygpath -w $1 )
F1=$( cygpath -w $2 )

/cygdrive/c/Windows/System32/fc.exe ${F1} ${F2} 
```

输出类似于“diff -c”。

不理想。仍然没有人能告诉我为什么 Portable Cygwin 缺少这个命令。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T23:23:07.823

也许你可以试试我的 [**Baby Cygwin**](http://code.google.com/p/strm/downloads)

它有`diff.exe`

# php - PHP邮件正文未正确编码

> ID：14910006
> 
> 赞同：0
> 
> 时间：2013-02-16T11:55:51.753
> 
> 标签：php, email

我有一个带有发送电子邮件表格的 wev 网站。不幸的是，今天我收到了一位客户的电子邮件，但邮件正文无法阅读，因为它无法正确显示西里尔符号。

这是php代码：

```
<?php
$owner_email = $_POST["owner_email"];
$headers = 'From:' . $_POST["email"];
$subject = 'Имате съобщение изпратено през формуляра на вашия WEB сайт от ' . $_POST["name"];
$messageBody = "";

if($_POST['name']!='nope'){
    $messageBody .= '<p>Visitor: ' . $_POST["name"] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['email']!='nope'){
    $messageBody .= '<p>Email Address: ' . $_POST['email'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}else{
    $headers = '';
}
if($_POST['state']!='nope'){        
    $messageBody .= '<p>State: ' . $_POST['state'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['phone']!='nope'){        
    $messageBody .= '<p>Phone Number: ' . $_POST['phone'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}   
if($_POST['fax']!='nope'){      
    $messageBody .= '<p>Fax Number: ' . $_POST['fax'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['message']!='nope'){
    $messageBody .= '<p>Message: ' . $_POST['message'] . '</p>' . "\n";
}

if($_POST["stripHTML"] == 'true'){
    $messageBody = strip_tags($messageBody);
}

try{
    if(!mail($owner_email, $subject, $messageBody, $headers)){
        throw new Exception('mail failed');
    }else{
        echo 'mail sent';
    }
}catch(Exception $e){
    echo $e->getMessage() ."\n";
}
?> 
```

我是php新手，所以问题是：

我应该在此代码中进行哪些更改以使其使用西里尔格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:02:03.547

在你的行之后添加这个`$headers = ...`：

```
$headers .= "\n".'MIME-Version: 1.0'."\n".'Content-Type: text/html; charset="UTF-8";'."\n".'Content-Transfer-Encoding: 7bit'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:58:24.970

尝试

`$header .= "\nContent-type: text/plain; charset=\"utf-8\"";`

并将此文件保存为 utf-8

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:00:13.037

尝试

htmlentities($_POST['message']) 而不是只有 $_POST['message']

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T12:01:32.370

添加`\nContent-type: text/plain; charset=\"utf-8\"\nContent-Transfer-Encoding: 8bit`到变量的末尾`$header`（您可以使用运算符来执行此`.=`操作）。

纯 ascii 中不存在西里尔字符，因此您需要使用不同的字符编码。

# matlab - 如何调整我的循环以使其与 matlab 的 parfor 一起使用？

> ID：14910007
> 
> 赞同：0
> 
> 时间：2013-02-16T11:56:07.153
> 
> 标签：matlab, parfor

我对 Matlab 很陌生。我使用 parfor 循环来完成一项非常耗时的任务。请参阅下面的片段。但是，我从 Matlab 得到了错误信息。任何人都可以帮忙吗？我阅读了有关 parfor 的文档，但不知道该怎么做...

谢谢你。

```
The parfor loop cannot run due to the way variable "M" is used

The parfor loop cannot run due to the way variable "T" is used

Explanation 
MATLAB runs loops in parfor functions by dividing the loop iterations into groups, and then sending them to MATLAB workers where they run in parallel. For MATLAB to do this in a repeatable, reliable manner, it must be able to classify all the variables used in the loop. The code uses the indicated variable in a way that is incompatible with classification.

 parfor i=1:size(x,1)

    if (ind(index(i)) == Index1)
        para=lsqcurvefit(F, [M(index(i)) T(index(i))], t, SS(ind(index(i)):end,i), [0 0], [MaxiM(index(i)) maxT],options);
    elseif  (ind(index(i)) == Index2) 
        para=lsqcurvefit(F, [M(index(i)) T(index(i))], t2, SS(ind(index(i)):end,i), [0 0], [MaxiM(index(i)) maxT],options);
    end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:13:43.150

您应该重新组织`M`并`T`在并行循环中使用它们。这应该有效：

```
M = M(index);
T = T(index);
parfor i=1:size(x,1)
    if (ind(index(i)) == Index1)
        para = lsqcurvefit(F, [M(i) T(i)], t, SS(ind(index(i)):end,i), ...
                           [0 0], [MaxiM(index(i)) maxT], options);
    elseif (ind(index(i)) == Index2) 
        para = lsqcurvefit(F, [M(i) T(i)], t2, SS(ind(index(i)):end,i), ...
                           [0 0], [MaxiM(index(i)) maxT], options);
    end
end 
```

但是，如果您需要返回函数`lsqcurvefit`- 那么我同意**Kleist**的评论，即您的代码毫无意义。

**更新：**

您可以尝试进行类似的重新排列以进一步提高性能：

```
M = M(index);
T = T(index);
ind = ind(index);
MaxiM = MaxiM(index);
parfor i=1:size(x,1)
    if (ind(i) == Index1)
        para = lsqcurvefit(F, [M(i) T(i)], t, SS(ind(i):end,i), ...
                           [0 0], [MaxiM(i) maxT], options);
    elseif (ind(i) == Index2) 
        para = lsqcurvefit(F, [M(i) T(i)], t2, SS(ind(i):end,i), ...
                           [0 0], [MaxiM(i) maxT], options);
    end
end 
```

# jquery - 突出显示数据时jqplot没有正确缩放

> ID：14910008
> 
> 赞同：0
> 
> 时间：2013-02-16T11:56:06.507
> 
> 标签：jquery, jqplot, bar-chart

我在条形图中使用 JQplot 光标荧光笔和数据荧光笔。当我缩放条形图时，工具提示正在移出条形图。请帮我修复它。

请在 jqplot 中找到我作为参考的以下链接。

http://www.jqplot.com/deploy/dist/examples/zoomOptions.html

```
function barChart(stringId, value, yaxislabel,barchwidth) 
    {
         //var line1 = [[6, 4], [7, 6.5], [8, 5.7], [9, 9], [10, 8.2]];
        // var value= [[6, 4], [7, 6.5], [8, 5.7], [9, 9], [10, 8.2]];

                /*console.log("in line");
                console.log( 'stringId in barchart '+stringId );
                console.log( 'value  '+value );*/
                var plot2 = $.jqplot(stringId, [value], {

                   seriesDefaults: {
                       renderer:$.jqplot.BarRenderer,
                        rendererOptions: {
                            barPadding: 5,      // number of pixels between adjacent bars in the same
                                                // group (same category or bin).
                            barMargin: 1,      // number of pixels between adjacent groups of bars.
                            barDirection: 'vertical', // vertical or horizontal.
                            barWidth: barchwidth, 
                            highlightColors: 'red', 
                            //tooltipLocation: 'sw', 
                           // showTooltipDataPosition: false, 
                            shadow: false// width of the bars.  null to calculate automatically.

                        }
                    },     

                    legend: { show: false ,
                        background: 'white',
                        placement: 'outside'
                        },

                    axes:{
                        xaxis:{
                          label:'Timestamp',
                          labelRenderer: $.jqplot.CanvasAxisLabelRenderer ,
                          renderer:$.jqplot.DateAxisRenderer,
                          tickOptions: {
                              showGridline: false,
                              showMark: true,
                              showLabel: false,
                              shadow: false,
                              fontSize: '10pt',

                              formatString: '%m/%d/%y %H:%M:%S', 

                            },

                        },
                        yaxis:{
                          label: [yaxislabel],
                          min: 0,
                          labelRenderer: $.jqplot.CanvasAxisLabelRenderer ,
                          tickOptions: {
                              showGridline: false,
                              showMark: true,
                              showLabel: true,
                              shadow: false,

                              fontSize: '10pt',

                            },

                        }
                      },

                      animate: true,
                      // Will animate plot on calls to plot1.replot({resetAxes:true})
                      animateReplot: false,
                     cursor: {
                          show: true,
                          zoom: true,
                          looseZoom: false,
                          showTooltip: true
                      },

                    axesDefaults: {
                        show: false,    // wether or not to renderer the axis.  Determined automatically.
                        min: null,      // minimum numerical value of the axis.  Determined automatically.
                        max: null,      // maximum numverical value of the axis.  Determined automatically.
                        pad: 1.2,       // a factor multiplied by the data range on the axis to give the
                                        // axis range so that data points don't fall on the edges of the axis.
                        ticks: [],      // a 1D [val1, val2, ...], or 2D [[val, label], [val, label], ...]
                                        // array of ticks to use.  Computed automatically.
                        numberTicks: 5,
                        //renderer: $.jqplot.LinearAxisRenderer,  // renderer to use to draw the axis,
                     //   rendererOptions: {},    // options to pass to the renderer.  LinearAxisRenderer
                                                // has no options,
                        tickOptions: {
                            mark: 'outside',    // Where to put the tick mark on the axis
                                                // 'outside', 'inside' or 'cross',
                            showMark: false,
                            showGridline: false, // wether to draw a gridline (across the whole grid) at this tick,
                            markSize: 4,        // length the tick will extend beyond the grid in pixels.  For
                                                // 'cross', length will be added above and below the grid boundary,
                            show: true,         // wether to show the tick (mark and label),
                            showLabel: false,    // wether to show the text label at the tick,
                                // format string to use with the axis tick formatter
                        }

                    },

                  highlighter: {
                        show: true,
                        showMarker: true,
                        showTooltip: false,
                        sizeAdjust: 7.5
                      }

                });

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:57:58.857

也许这会有所帮助：jsfiddle.net/AnthonyLeGovic/xwhqV/15/

# objective-c - 初始化后更改 NSArray 的值

> ID：14910013
> 
> 赞同：1
> 
> 时间：2013-02-16T11:56:43.743
> 
> 标签：objective-c, nsmutablearray, nsarray

对于我的作业，我必须将 .h 和 .m 写入命令行应用程序，主要由我的老师给出。它是一个简单的滑道和梯子样式板打印输出 100 个空间。

梯子和滑槽将由“L10”和“C10”表示，位于存储棋盘表示的一维数组中。给定 main 的第一部分是 initBoard，我想我将创建一个空字符串数组。梯子和滑槽的数量在提供的代码的下两行中给出，我想通过他们的方法随机填充板子。

**如果我在“initBoard”**（main 调用的第一件事）**方法中使用 for 循环来构建一个大小为 100 的 NSArray，并用空字符串填充它，我是否能够将空字符串更改为“L10”和我想要的“makeLadders”和“makeChutes”方法中的“C10”字符串，还是我必须使用 NSMutableArray 来完成类似的事情？**

我读过 NSArray 是不可变的，这意味着它在初始化后无法修改，因此如果希望修改数组的内容，则必须使用 NSMutableArray。我的老师特别提到 NSArrays 作为应该保存板数据的东西，所以我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:00:01.727

您在这里有两个选择：

1.  一个包含 NSString 对象的可变数组；
2.  一个包含 NSMutableString 对象的不可变数组。

第一个选择的示例：

```
NSMutableArray* array=[[NSMutableArray alloc] initWithCapacity: 100];
for(NSUInteger i=0; i<100; i++)
{
    [array addObject: @""];
} 
```

要更改值，请使用：

```
[array replaceObjectAtIndex: i withObject: @"New String"]; 
```

# android - Android，从其他活动中获取结果然后开始

> ID：14910015
> 
> 赞同：0
> 
> 时间：2013-02-16T11:56:56.523
> 
> 标签：android, android-camera

我正在尝试创建自己的相机活动（一个是拍照，第二个是展示它）。问题是，我先启动“takePictureActivity”，所以我会得到这个 Activity 的结果。但我想从“ShowPictureActivity”中得到结果。有人可以建议我如何使它起作用吗？

[一只忙碌的猫 http://img248.imageshack.us/img248/1783/imgqtd.png](http://img248.imageshack.us/img248/1783/imgqtd.png)

主要活动：

```
 Intent intent = new Intent(this , TakePictureActivity.class);
     startActivityForResult(intent,  TAKE_PICUTRE); 
```

拍照活动：

```
 Itent intent = new Intent(this , ShowPictureActivity.class);
      intent.putExtras(image_data);
      startActivity(intent); 
```

显示图片活动：

```
 Intent _result = new Intent();              
    _result.setData(image_data);
   setResult(Activity.RESULT_OK, _result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:00:37.297

在**TakePictureActivity**中 （仅伪代码）

使用，`startActivityForResult(intent, Result_OK);`而不是`startActivity(intent);`启动**ShowPictureActivity**。

现在，`onActivityResult()`在**TakePictureActivity**中实现，例如，

```
onActivityResult()
{
 if(resultCode == RESULT_OK)
 { 
     // Back from ShowPictureActivity with Result 
     // Set Result for your MainActivity:
     setResult();
     finish();
  }
} 
```

这会将结果发送`onActivityResult()`到**MainActivity**：

# android - 如何以编程方式更改菜单的方向（设置 android:configChanges 和 android:screenOrientation 时）？

> ID：14910023
> 
> 赞同：1
> 
> 时间：2013-02-16T11:58:07.017
> 
> 标签：android, menu, orientation

鉴于：

```
android:configChanges="orientation|keyboardHidden"
android:screenOrientation="landscape" 
```

我们如何手动更改 menu( `android.view.Menu`) 方向，就好像屏幕方向不固定一样`landscape`。我想知道可以调用什么 API 来**手动更改菜单方向**。我已经看到这个应用程序，“ ”，三星银河（*姜饼*`com.sec.android.app.camera`）中的一个股票相机应用程序，正在这样做。我已经检查过了，它有上面的设置。然而，它的菜单确实会根据设备放置为. 可惜我没有它的源代码。我已经完成了一整天的搜索。叹。*`AndroidManifest.xml``portrait`*

 *谢谢。*

# android - 适用于所有屏幕尺寸的 Android 通用布局

> ID：14910024
> 
> 赞同：-2
> 
> 时间：2013-02-16T11:58:09.720
> 
> 标签：android

你能告诉我如何为所有设备创建一个通用的单一显示界面吗？

**我尝试**使用三种线性布局；

*   首先有一个宽度和高度= match+parent
*   第二组宽度 = match_parent 和高度 = 70mm，
*   第三个布局设置宽度 = match_parent 和高度 ## Heading ##= 8mm

但是这些都会出现一些问题；在像galaxy y这样的小屏幕设备上，它会变高，而在像s3这样的大屏幕上，它会在屏幕的一半处变小。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:16:50.650

我希望以下链接对您有所帮助...

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

[在android中创建通用布局结构？](https://stackoverflow.com/questions/6748438/creating-common-layout-structures-in-android)

# delphi - 属性与功能或过程之间的区别

> ID：14910028
> 
> 赞同：4
> 
> 时间：2013-02-16T11:58:53.913
> 
> 标签：delphi

我们可以说：

```
type
  TPerson = class
   private
     pName : string;
   public
     property Name : string read pName write pName;
end; 
```

等于：

```
 type
  TPerson = class
   private
     pName : string;
   public
     procedure SetName(val: string);
     function GetName:String;
end;

//{... implementing SetName And GetName...} 
```

??

请向我解释我们需要在哪里使用“属性”，在哪里不需要。肿瘤坏死因子

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-16T13:00:58.333

这都是关于班级*设计*的。*从技术上讲，你可以用*属性做的“一切” ，你可以*不用*它们，但代码不会那么优雅。良好的设计还使类更易于使用，并降低了出错的风险。

首先，你的比较

```
TPerson = class
  private
    FName: string;
  public
    property Name: string read FName write FName;
  end; 
```

至

```
TPerson = class
  private
    FName: string;
  public
    procedure SetName(const Name: string);
    function GetName: string;
  end; 
```

不太公平。事实上，在第一种情况下，当值被设置（或读取）时，你没有机会*做某事。*因此，更合适的比较是将后一个代码与

```
TPerson = class
  private
    FName: string;
    procedure SetName(const Name: string);
    function GetName: string;
  public
    property Name: string read GetName write SetName;
  end; 
```

例如，如果您编写一个控件，当您更改属性时，您通常需要使控件无效（基本上是重新绘制），例如`TPerson`. 例如，

```
TPerson = class
  private
    FSweaterColor: string;
    procedure SetSweaterColor(const Value: TColor);
  public
    property SweaterColor: TColor read FSweaterColor write SetSweaterColor;
  end;

  ...

  implementation

  procedure TPerson.SetSweaterColor(const Value: TColor);
  begin
    if FSweaterColor <> Value then
    begin
      FSweaterColor := Value;
      Invalidate; // causes a repaint of the control
    end;
  end; 
```

无论如何，属性的意义何在？嗯，基本上，重点是为类创建一个漂亮的*接口*：对于对其实现细节不感兴趣的人来说，它应该易于使用。通过使用属性，您可以实现此目标。确实，要读取毛衣的当前颜色，您只需读取`Anna.SweaterColor`，设置它，您只需`Anna.SweaterColor := clRed`。您不知道这是否只是设置变量或导致过程运行，您不在乎。就您而言，`TPerson`对象只是具有一个可读且可设置的属性，称为`SweaterColor`.

您还可以创建只读 (no `write`) 或只写(no ) 的属性`read`。但是无论您如何实现属性的`read`and `write`（如果有的话），从类用户的角度来看，该属性看起来都是一样的。他不需要记住使用`SetSweaterColor`或`GetSweaterColor`（事实上，它们是私有的，他无法访问），而只需要使用`SweaterColor`属性。

这也暗示了使用属性的另一个好处。公共和发布的属性对类的用户可见，而私有成员则不可见（如字段`FSweaterColor`和`SetSweaterColor`过程）。这很好。因为现在您知道类用户更改一个人的毛衣颜色的唯一方法是使用该`SweaterColor`属性，这保证会重新绘制控件。如果`FSweaterColor`变量是公开的，该类的用户可能会设置它并想知道，“为什么当我更改毛衣颜色时没有任何反应？” 当然，您不需要属性来获得此好处：私有`FSweaterColor`字段和公共字段`GetSweaterColor`也`SetSweaterColor`可以，但是您需要编写一个`GetSweaterColor`即使无需处理即可获得颜色。此外，该类的用户需要学习使用*两个*标识符而不是一个标识符。

更具体地说，如果您使用 Delphi IDE 进行编程，您将看到`published property`(-y+ies) 将显示在 Object Inspector 中，您可以在其中读取/更改它们（如果适用）。如果没有房产，这怎么可能？

话虽如此，有时即使可以，您也不使用属性。例如，如果您有一个只读“属性”，您可能会选择一个公共`GetSomething`函数而不是只读属性。毕竟，这将为您节省一些编码。同样，如果您有一个只写属性，您可以使用一个公共`SetSomething`过程，这也将节省您的代码。最后，如果你有一个读/写属性不需要任何处理（既不需要获取也不需要设置），你可以简单地使用一个公共变量！

因此，毕竟，您需要逐个班级决定班级的良好设计。我想我过长的答案的简短版本类似于大卫的评论：

> 使用您喜欢的任何一个，哪个更方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T12:57:23.530

属性是一个很好的语法糖。它们相当于一对 getEnabled 和 setEnabled 方法，但大多数程序员（和编程语言）更喜欢属性。例如，代码完成窗口中的条目较少。

此外，它们将“类似变量”的东西（因此数据，对象应该使用）与使用数据的方法分开。

属性不仅限于组件，否则它们非常有用。您可以定义一个带有属性的公共接口，然后实现一些验证逻辑。（不能使用公共字段）但是对于一个简单的属性，您只需要两行代码，而方法是 8 行。

对于对象检查器来说更重要的是发布的关键字，只有发布的属性才会显示在 OI 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:07:27.283

不，这两个代码不相等。

我们`property`在将`TPerson`类实现为组件时使用，可在 Delphi 的 Object Inspector 中自定义。例如，看一下 TButton 类。您可以在 Object Inspector 中更改的所有内容（`Caption`、`Width`、`Name`等）在源代码中都用`property`关键字标记。

如果您创建一个将在程序中使用**但不作为组件**使用的类，则不要使用`property`关键字。

# android - 我如何解码图像？所以从 sqllite 中检索图像

> ID：14910031
> 
> 赞同：0
> 
> 时间：2013-02-16T11:59:05.397
> 
> 标签：android

我如何从 sql lite 中检索图像？当我使用重 jpg 图像不显示时，此代码适用于小尺寸图像我该怎么办？我找到了解决方案解码图像，但我把代码放在哪里？下面是我的完整源代码

```
 public class SQLiteDemoActivity extends Activity {

  ArrayList<Contact> imageArry = new ArrayList<Contact>();
  ContactImageAdapter adapter;
  Button BrowseButton;
 Button BrowseButton2;
 DataBaseHandler db;

   ByteArrayOutputStream stream = new ByteArrayOutputStream();
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

   db = new DataBaseHandler(this);
   //get image from drawable

   BrowseButton=(Button)findViewById(R.id.BrowseButton);
   BrowseButton2=(Button)findViewById(R.id.BrowseButton2);

   adapter = new ContactImageAdapter(this, R.layout.screen_list,    imageArry);

   BrowseButton.setOnClickListener(new View.OnClickListener() {

    @Override
   public void onClick(View v) {

    Bitmap image = BitmapFactory.decodeResource(getResources(),R.drawable.my);

    image.compress(Bitmap.CompressFormat.JPEG, 100, stream);
    byte[] imageInByte = stream.toByteArray();

    Log.d("Insert: ", "Inserting ..");
    db.addContact(new Contact("FaceBook", imageInByte));
    //display main List view bcard and contact name

    //Reading all contacts from database

  //        

   }
   });

     BrowseButton2.setOnClickListener(new View.OnClickListener() {

   @Override
   public void onClick(View v) {

    List<Contact> contacts = db.getAllContacts();
    for (Contact cn : contacts) {

    String log = "ID:" + cn.getID() + " Name: " + cn.getName()      + " ,Image: " +  
     cn.getImage();

    //Writing Contacts to log
    Log.d("Result: ", log);
    //add contacts data in arrayList
    imageArry.add(cn);

    }

    ListView dataList = (ListView) findViewById(R.id.list);
    dataList.setAdapter(adapter);

    try {
        stream.close();
        stream = null;
    } catch (IOException e) {

        e.printStackTrace();
    }

  }
    });

  }

        public class Contact {

// private variables
int _id;
String _name;
byte[] _image;

// Empty constructor
public Contact() {

}

// constructor
public Contact(int keyId, String name, byte[] image) {
this._id = keyId;
this._name = name;
this._image = image;

}

// constructor
public Contact(String contactID, String name, byte[] image) {
this._name = name;
this._image = image;

}

// constructor
public Contact(String name, byte[] image) {
this._name = name;
this._image = image;
}

// getting ID
public int getID() {
return this._id;
}

// setting id
public void setID(int keyId) {
this._id = keyId;
}

// getting name
public String getName() {
return this._name;
}

// setting name
public void setName(String name) {
this._name = name;
}

// getting phone number
public byte[] getImage() {
return this._image;
}

// setting phone number
public void setImage(byte[] image) {
this._image = image;
}
}

       public class ContactImageAdapter extends ArrayAdapter<Contact>{
      Context context;
     int layoutResourceId;
   //BcardImage data[] = null;
    ArrayList<Contact> data=new ArrayList<Contact>();
    public ContactImageAdapter(Context context, int layoutResourceId,  
    ArrayList<Contact>  
      data) {
   super(context, layoutResourceId, data);
  this.layoutResourceId = layoutResourceId;
   this.context = context;
   this.data = data;
   }

    @Override
   public View getView(int position, View convertView, ViewGroup parent) {
   View row = convertView;
   ImageHolder holder = null;
   if(row == null)
   {
    LayoutInflater inflater = ((Activity)context).getLayoutInflater();
   row = inflater.inflate(layoutResourceId, parent, false);
   holder = new ImageHolder();
   holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
   holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
   row.setTag(holder);
    }
   else
  {
   holder = (ImageHolder)row.getTag();
    }
   Contact picture = data.get(position);
   holder.txtTitle.setText("facebook");
   //convert byte to bitmap take from contact class
    byte[] outImage=picture._image;
   ByteArrayInputStream imageStream = new ByteArrayInputStream(outImage);
   Bitmap theImage = BitmapFactory.decodeStream(imageStream);
    holder.imgIcon.setImageBitmap(theImage);
   return row;
    }
   static class ImageHolder
   {
  ImageView imgIcon;
  TextView txtTitle;
   }
  }

        import java.util.ArrayList;
       import java.util.List;

          import android.content.ContentValues;
      import android.content.Context;
     import android.database.Cursor;
      import android.database.sqlite.SQLiteDatabase;
       import android.database.sqlite.SQLiteOpenHelper;

       public class DataBaseHandler extends SQLiteOpenHelper {

     //All Static variables
      //Database Version
      private static final int DATABASE_VERSION = 1;

      //Database Name
       private static final String DATABASE_NAME = "imagedb";

     //Contacts table name
     private static final String TABLE_CONTACTS = "contacts";

   //Contacts Table Columns names
     private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
   private static final String KEY_IMAGE = "image";

    public DataBaseHandler(Context context) {
     super(context, DATABASE_NAME, null, DATABASE_VERSION);
     }

   //Creating Tables
     @Override
       public void onCreate(SQLiteDatabase db) {
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
    + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
    + KEY_IMAGE + " BLOB" + ")";
   db.execSQL(CREATE_CONTACTS_TABLE);
       }

    //Upgrading database
      @Override
     public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    //Drop older table if existed
     db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

   //Create tables again
    onCreate(db);
     }

     /**
     * All CRUD(Create, Read, Update, Delete) Operations
       */

      public// Adding new contact
     void addContact(Contact contact) {
     SQLiteDatabase db = this.getWritableDatabase();

      ContentValues values = new ContentValues();
   values.put(KEY_NAME, contact._name); // Contact Name
     values.put(KEY_IMAGE, contact._image); // Contact Phone

    //Inserting Row
    db.insert(TABLE_CONTACTS, null, values);
    db.close(); // Closing database connection
   }

      //Getting single contact
     Contact getContact(int id) {
     SQLiteDatabase db = this.getReadableDatabase();

   Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
      KEY_NAME, KEY_IMAGE }, KEY_ID + "=?",
   new String[] { String.valueOf(id) }, null, null, null, null);
    if (cursor != null)
   cursor.moveToFirst();

   Contact contact = new Contact(Integer.parseInt(cursor.getString(0)),
   cursor.getString(1), cursor.getBlob(1));

    //return contact
     return contact;

     }

    //Getting All Contacts
      public List<Contact> getAllContacts() {
    List<Contact> contactList = new ArrayList<Contact>();
   //Select All Query
    String selectQuery = "SELECT * FROM contacts ORDER BY name";

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
  //looping through all rows and adding to list
    if (cursor.moveToFirst()) {
   do {
  Contact contact = new Contact();
  contact.setID(Integer.parseInt(cursor.getString(0)));
  contact.setName(cursor.getString(1));
  contact.setImage(cursor.getBlob(2));
  //Adding contact to list
  contactList.add(contact);
  } while (cursor.moveToNext());
  }
     //close inserting data from database
    db.close();
     //return contact list
     return contactList;

      }

   //Updating single contact
    public int updateContact(Contact contact) {
     SQLiteDatabase db = this.getWritableDatabase();

   ContentValues values = new ContentValues();
    values.put(KEY_NAME, contact.getName());
    values.put(KEY_IMAGE, contact.getImage());

//updating row
   return db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
  new String[] { String.valueOf(contact.getID()) });

      }

 //Deleting single contact
   public void deleteContact(Contact contact) {
  SQLiteDatabase db = this.getWritableDatabase();
   db.delete(TABLE_CONTACTS, KEY_ID + " = ?",
  new String[] { String.valueOf(contact.getID()) });
    db.close();
 }

 //Getting contacts Count
     public int getContactsCount() {
   String countQuery = "SELECT * FROM " + TABLE_CONTACTS;
 SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
     cursor.close();

  //return count
   return cursor.getCount();
  }

    <------ from where i used this function------------->

              private Bitmap decodeFile(File f) {
        try {
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            while (true) {
                if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 <  
          REQUIRED_SIZE)
                    break;
                width_tmp /= 2;
                height_tmp /= 2;
                scale++;
            }

            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null,  
    o2);
        }
        catch (FileNotFoundException e) {
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:03:42.423

在您的数据库中使用 blob 列并保存经过 base64 编码的图像，然后您可以毫无问题地对其进行解码，唯一的问题是如果图像大小太大，您可以在内存堆中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-10T08:54:37.237

我认为正确的方法是将图像保存为内部存储中的文件并在 sqlite 中存储路径。但是你必须记住内部缓存是有限的。因此，如果您想存储大量图像，则必须使用 WhatsApp 等外部存储。
[对于内部存储限制。](https://stackoverflow.com/questions/9198440/is-there-a-maximum-size-to-android-internal-storage-allocated-for-an-app)

[用于从存储中保存和读取图像。](https://stackoverflow.com/questions/17674634/saving-and-reading-bitmaps-images-from-internal-memory-in-android/35827955)

[内部与外部存储](https://developer.android.com/training/data-storage/files)

# ocaml - Ocamllex 语法问题

> ID：14910034
> 
> 赞同：1
> 
> 时间：2013-02-16T11:59:11.463
> 
> 标签：ocaml, lex, ocamllex

```
{ }
rule translate = parse
| "current_directory" { print_string (Sys.getcwd ()) }
| _ as c { print_char c }
| eof { exit 0 }
{
let main () =
let lexbuf = Lexing.from_channel stdin in
while true do
translate lexbuf
done
let _ = Printexc.print main ()
} 
```

有人可以解释一下主要功能是如何工作的吗？我已经理解了正则表达式部分，并且能够了解主要功能，但不是确切的含义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:45:04.583

该`main`函数如下所示：

```
let main () =
  let lexbuf = Lexing.from_channel stdin in
  while true do
    translate lexbuf
  done 
```

它使用标准输入作为源创建一个 lexbuf，然后`translate`使用这个 lexbuf 重复调用。的类型`translate`是`Lexing.lexbuf -> unit`。它需要一个 lexbuf，查找一个令牌，然后执行相关的规则。您为此定义了一个规则，`eof`该规则会导致程序退出，从而终止`while`.

下一行实际运行该`main`函数：

```
let _ = Printexc.print main () 
```

这就是调用`main`，传递它`()`。如果在执行过程中引发异常，`Printexc.print`将打印出它的描述。由于在测试中没有引发异常，最终您到达文件末尾并且`eof`规则导致程序退出。

# c# - Process.GetProcessById() 在所有线程 id/进程 id 上抛出 ArgumentException“进程未运行”

> ID：14910042
> 
> 赞同：3
> 
> 时间：2013-02-16T12:00:03.477
> 
> 标签：c#, exception, process, pinvoke, pid

无论我尝试使用其中的哪一个，`Process.GetProcessById().ProcessName`都会引发异常，说明所有进程都没有运行。

```
 [DllImport("user32.dll", SetLastError = true)]
    static extern uint GetWindowThreadProcessId(IntPtr hWnd, out uint lpdwProcessId);

    [DllImport("user32.dll")]
    static extern uint GetWindowThreadProcessId(IntPtr hWnd, IntPtr ProcessId);

            for (int x = 0; x < listBox1.Items.Count; x++)
            {
                IntPtr y = new IntPtr(Convert.ToInt32(listBox1.Items[x].ToString()));
                uint processID = 0;
                int procID = Convert.ToInt32(GetWindowThreadProcessId(y, out processID));
                //int procID = Convert.ToInt32(GetWindowThreadProcessId(y, IntPtr.Zero);
                //listBox2.Items.Add(procID);
                listBox2.Items.Add(Process.GetProcessById(procID).ProcessName);
            } 
```

# c# - 无法在 asp.net c# 中使用 ajaxfileupload 控件上传视频文件，导致出现红色块错误

> ID：14910044
> 
> 赞同：0
> 
> 时间：2013-02-16T12:00:12.133
> 
> 标签：c#, asp.net, ajax

我从[这里使用 ajax 工具包](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/)

我可以上传 .jpg、.jpeg、.txt、.doc，但无法上传 .wmv 文件..即无法上传视频文件。

下面是我的代码

**文件.aspx**

```
<asp:AjaxFileUpload ID="AjaxFileUpload1" OnUploadComplete="AjaxUpload1_OnUploadComplete"
    runat="server"/> 
```

**文件.cs**

```
protected void AjaxUpload1_OnUploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
    {
        try
        {
            // Generate file path
            string filePath = "~/Images/" + e.FileName;

            // Save upload file to the file system
            AjaxFileUpload1.SaveAs(MapPath(filePath));

        }
        catch (Exception ex)
        {
            Page.ClientScript.RegisterStartupScript(this.GetType(), "Error", string.Format("<script type='text/javascript'>alert('{0}')</script>", ex.Message.ToString()));
        }
    } 
```

我想知道我错在哪里......我必须在代码中添加什么才能上传视频文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T12:22:11.737

嘿 Pritesh 你检查你的文件大小。默认情况下，在 asp.net 中可以上传 4 mb 文件。如果大小有问题，则在 Web 配置文件中添加以下行。

```
<system.web>
<httpRuntime maxRequestLength="11264" />
</system.web> 
```

根据您的要求更改值。

# php - 比较操作sql查询与php

> ID：14910049
> 
> 赞同：0
> 
> 时间：2013-02-16T12:00:49.657
> 
> 标签：php, mysql, sql

```
$num=$_POST['data'];
$no = (int) $num;
$sql = "select * from uploads where id > '$no'" 
```

上面的查询不能正常工作。它显示的值低于编号。我认为转换的问题。有人请帮忙解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:05:12.977

您在值周围有撇号，因此这些值将作为字符串而不是数字进行比较。例如，字符串值`10`小于字符串值`2`。

删除撇号：

```
$sql = "select * from uploads where id > $no"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T12:06:35.113

试试这个代码：

```
if ( empty( $_POST['data'] ) ){
    // show error message
    echo "No data received";
    // use a default values
    $num = 0;
}
else 
    $num=$_POST['data'];

$no = intval($num);
$sql = "select * from uploads where id > $no"; 
```

尝试使用[intval](http://php.net/manual/en/function.intval.php)而不是强制转换为 int

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:03:16.597

你有`Sno = ...`，应该是`$no = ...`。这是一个错字。

然后，查询中的数字不需要撇号，所以不要在这种情况下使用它们。

你也有`$_post`，而不是`$_POST`- 这是另一个问题，[PHP 中的变量是区分大小写的](http://php.net/manual/en/language.variables.basics.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T12:05:46.570

试试这个

```
$sql = "select * from uploads where id > ".$no; 
```

并把 $_POST 而不是 $_post

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-16T12:02:33.100

```
$no = (int) $_POST['data']; //wrong variable declaration ?
$sql = "select * from uploads where id > $no"; 
```

尝试这个。

`$_post`取而代之`$_POST`

一个变量而不是两个

# python - python'for key in' - 如何修复'SyntaxError：无效语法'

> ID：14910051
> 
> 赞同：1
> 
> 时间：2013-02-16T12:01:16.000
> 
> 标签：python, setuptools

我正在尝试从 github （[https://github.com/danielfullmer/nzbfs](https://github.com/danielfullmer/nzbfs)）安装（python setup.py install）一些python包，但得到

```
SyntaxError: ('invalid syntax', ('build/bdist.linux-x86_64/egg/nzbfs/fs.py', 135, 15, "            for key in ('st_atime', 'st_ctime', 'st_gid', 'st_mode', 'st_mtime', 'st_nlink', 'st_size', 'st_uid'):\n")) 
```

怎么了？在 debian 上尝试了 python2.6 + 3.1 但总是卡在那条`for key ..`线上

```
def getattr(self, path, fh=None):
    st = os.lstat(self.db_root + path)

    d = {
        key: getattr(st, key)
        for key in ('st_atime', 'st_ctime', 'st_gid', 'st_mode',
                    'st_mtime', 'st_nlink', 'st_size', 'st_uid')
    }

    if stat.S_ISREG(st.st_mode):
        nzf_size = get_nzf_attr(self.db_root + path, 'size')
        if nzf_size is not None:
            d['st_size'] = nzf_size
        nzf_mtime = get_nzf_attr(self.db_root + path, 'mtime')
        if nzf_mtime is not None:
            d['st_mtime'] = nzf_mtime
    d['st_blocks'] = d['st_size'] / 512

    return d 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T12:06:49.123

给你一个语法错误的那行叫做[dict comprehension](http://docs.python.org/2/reference/expressions.html#dictionary-displays)；这些被添加到 Python 2.7 和 3 中的语言中。

这个模块*不是*Python 3 准备好的；例如，它使用了该`ConfigParser`模块，该模块已`configparser`在 Python 3 中重命名。您必须坚持使用 Python 2.7。

如果这对您来说是一个阻碍，您将不得不向开发人员[提出一个问题](https://github.com/danielfullmer/nzbfs/issues)，要求与 Python 2.6 兼容（实现起来并不难）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:00:31.910

您可以将 dict 理解更改为此

```
d = dict(
        (key, getattr(st, key))
        for key in ('st_atime', 'st_ctime', 'st_gid', 'st_mode',
                    'st_mtime', 'st_nlink', 'st_size', 'st_uid')
    ) 
```

如果您需要它在 2.6 中工作

# perl - 如何在unix中的特定行之后将文本行插入文件

> ID：14910055
> 
> 赞同：1
> 
> 时间：2013-02-16T12:01:42.667
> 
> 标签：perl, unix, sed, edit

如何在 unix 中的特定行之后将文本行插入文件中？

背景：该文件是一个自动生成的文本文件，但每次重新生成它时我都必须手动编辑它，以便在特定行之后添加 4 个附加行。我可以保证这一行将始终在文件中，但我不能保证它将在哪一行，所以我希望根据这一行的位置添加额外的行，而不是添加到固定的行号。我想自动化这个过程，因为它是我构建过程的一部分。

我正在使用 Mac OSX，所以我可以使用 unix 命令行工具，但我对这些工具不是很熟悉，无法弄清楚如何做到这一点。

**编辑**

感谢您的解决方案，尽管我还没有设法让他们工作：

我尝试了 Sed 解决方案

```
sed -i '/<string>1.0</string>/ a <key>CFBundleHelpBookFolder</key>\
<string>SongKongHelp</string>\
<key>CFBundleHelpBookName</key>\
<string>com.jthink.songkong.Help</string>
' /Applications/SongKong.app/Contents/Info.plist 
```

但得到错误

```
sed: 1: "/Applications/SongKong. ...": invalid command code S 
```

我尝试了 bash 解决方案

```
#!/bin/bash

    while read line; do
      echo "$line"
      if [[ "$line" = "<string>1.0</string>"]]; then
        cat mergefile.txt    # or echo or printf your extra lines
      fi
    done < /Applications/SongKong.app/Contents/Info.plist 
```

但有错误

```
./buildosx4.sh: line 5: syntax error in conditional expression: unexpected token `;'
./buildosx4.sh: line 5: syntax error near `;'
./buildosx4.sh: line 5: `  if [[ "$line" = "<string>1.0</string>"]]; then' 
```

**编辑 2** 现在工作，我错过了一个空间

```
#!/bin/bash

    while read line; do
      echo "$line"
      if [[ "$line" = "<string>1.0</string>" ]]; then
        cat mergefile.txt    # or echo or printf your extra lines
      fi
    done < /Applications/SongKong.app/Contents/Info.plist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:14:25.647

假设标记线`fnord`只包含其他内容；

```
awk '1;/^fnord$/{print "foo"; print "bar";
    print "baz"; print "quux"}' input >output 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:20:50.050

使用带有正则表达式的 sed 'a 命令来匹配您需要匹配的行

```
sed -i '/the target line looks like this/ a this is line 1\
this is line 2\
this is line 3\
this is line 4
' FILENAME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:25:24.963

该算法可以有效地解决任何文件大小的问题：

1.  从原始文件中读取每一行并将其打印到临时文件中。
2.  如果最后一行是标记行，则将插入行打印到临时文件
3.  打印剩余的行
4.  将临时文件重命名为原始文件名。

作为 Perl 脚本：

```
#!perl
use strict; use warnings;

$^I = ".bak"; # create a backup file

while (<>) {
  print;
  last if /regex to determine if this is the line/;
}

print <<'END';
Yourstuff
END

print while <>; # print remaining lines
# renaming automatically done. 
```

测试文件：

```
foo
bar
baz
qux
quux 
```

正则表达式是`/^ba/`.

用法：`$ perl this_script.pl source-file`

处理后的testfile：

```
foo
bar
Yourstuff
baz
qux
quux 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T13:03:47.100

另一种看待这种情况的方法是，您希望在其中一个文件中的某个时间点*合并*两个文件。如果您额外的四行在一个单独的文件中，您可以制作一个更通用的工具，如下所示：

```
#!/usr/bin/awk

BEGIN {
  SEARCH=ARGV[1];    # Get the search string from the command line
  delete ARGV[1];    # Delete the argument, so subsequent arguments are files
}

# Collect the contents of the first file into a variable
NR==FNR { 
  ins=ins $0 "\n";
  next;
}

1    # print every line in the second (or rather the non-first) file

# Once we're in the second file, if we see the match, print stuff...
$0==SEARCH {
  printf("%s", ins);    # Using printf instead of print to avoid the extra newline
  next;
} 
```

为了便于记录，我已将其详细说明；您显然可以将其缩短为看起来更像 Triplee 的答案的内容。你会这样调用：

```
$ scriptname "Text to match" mergefile.txt origfile.txt > outputfile.txt 
```

通过这种方式，您将拥有一个可用于在不同文件和不同文本上实现这种合并的工具。

或者，您当然可以在纯 bash 中执行此操作。

```
#!/bin/bash

while read line; do
  echo "$line"
  if [[ "$line" = "matchtext" ]]; then
    cat mergefile.txt    # or echo or printf your extra lines
  fi
done < origfile.txt 
```

# objective-c - 如何从 cocos2d 中的 CCProgressTimer 获取时间或百分比？

> ID：14910058
> 
> 赞同：0
> 
> 时间：2013-02-16T12:01:48.627
> 
> 标签：objective-c, timer, cocos2d-iphone, progress-bar

我已经实现了一个栏来向玩家显示游戏中的剩余时间。如果时间变为零，我想用 if 循环设置错误的结果。但是如何获得某一时刻的百分比呢？我如何识别栏是否为空？谢谢你

```
CCProgressFromTo *to1 = [CCProgressFromTo actionWithDuration:MaxTime from:100 to:0];
bar = [CCProgressTimer progressWithFile:@"barra.png"];
bar.type = kCCProgressTimerTypeHorizontalBarLR;
[bar setPosition:ccp(size.width - 250 , size.height - 18)];
float per= ?????

if (per==0)
{
    [self performSelector:@selector(wrong) withObject:nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:05:12.953

我试过这个（cocos2d 2.x 版）。精灵是一个水平滑块轨道，进度计时器上的设置将为您提供一个从右到左的“满 100”条，在 0 处为空。

```
 _pt = [CCProgressTimer progressWithSprite:[CCSprite spriteWithFile:@"slider_track.png"]];
    CCProgressFromTo *ft = [CCProgressFromTo actionWithDuration:20 from:100 to:0];
    _pt.position= ccp(kScreenWidth/2, kScreenHeight/2);
    _pt.type=kCCProgressTimerTypeBar;
    _pt.reverseDirection= NO;
    _pt.midpoint=ccp(0,1);
    _pt.barChangeRate= ccp(1,0);
    [self addChild:_pt];
    [_pt runAction:ft];
    [self schedule:@selector(watchProgressTimer:) interval:1.0];

-(void) watchProgressTimer:(ccTime) dt {
    MPLOG(@"Progress timer percentage is %f ",_pt.percentage);
    if(_pt.percentage==0.f){
        [self unschedule:@selector(watchProgressTimer:)];
        [self removeChild:_pt cleanup:YES];
        [self dowhateverYouDoAtZero] ;
    }
}

-(void) dowhateverYouDoAtZero{
    // your business logic for expired timer here
    MPLOG(@"Bang , time's up !!!");
} 
```

在控制台上给出这个

-[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 95.254395 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 90.169464 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 85.168495 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 79.918976 -[ MPGameSequencer watchProgressTimer:] : 进度计时器百分比是 74.670525 -[MPGameSequencer watchProgressTimer:] : 进度计时器百分比是 69.669678 -[MPGameSequencer watchProgressTimer:] : 进度计时器百分比是 64.667480 -[MPGameSequencer watchProgressTimer:] : 进度计时器百分比是 59.419960 -[MPGameSequencerTimer :] ：进度计时器百分比为 54.168777 -[MPGameSequencer watchProgressTimer:] ：进度计时器百分比为 49.167599 -[MPGameSequencer watchProgressTimer:] ：进度计时器百分比为 43.920143 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 38.919609 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 33.919609 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 28.917831 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 23.669678 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 18.667908 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 13.418236 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 8.168266 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为3.167412 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 0.000000 -[MPGameSequencer dowhateverYouDoAtZero]：砰，时间到了！！！920143 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 38.919609 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 33.919609 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 28.917831 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 23.66 [MPGameSequencer watchProgressTimer:]：进度计时器百分比为 18.667908 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 13.418236 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 8.168266 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 3.167412 -[MPGameSequencer watchProgressTimer:] : 进度计时器百分比是 0.000000 -[MPGameSequencer dowhateverYouDoAtZero] : Bang ，时间到了！！！920143 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 38.919609 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 33.919609 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 28.917831 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 23.66 [MPGameSequencer watchProgressTimer:]：进度计时器百分比为 18.667908 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 13.418236 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 8.168266 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 3.167412 -[MPGameSequencer watchProgressTimer:] : 进度计时器百分比是 0.000000 -[MPGameSequencer dowhateverYouDoAtZero] : Bang ，时间到了！！！进度计时器百分比为 38.919609 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 33.919609 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 28.917831 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 23.669678 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 18.667908 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 13.418236 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 8.168266 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 3.167412 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为0.000000 -[MPGameSequencer dowhateverYouDoAtZero]：砰，时间到了！！！进度计时器百分比为 38.919609 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 33.919609 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 28.917831 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 23.669678 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 18.667908 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 13.418236 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 8.168266 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 3.167412 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为0.000000 -[MPGameSequencer dowhateverYouDoAtZero]：砰，时间到了！！！919609 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 28.917831 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 23.669678 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 18.667908 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 13.48 [MPGameSequencer watchProgressTimer:]：进度计时器百分比为 8.168266 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 3.167412 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 0.000000 -[MPGameSequencer dowhateverYouDoAtZero]：砰，时间到了！！！919609 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 28.917831 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 23.669678 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 18.667908 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 13.48 [MPGameSequencer watchProgressTimer:]：进度计时器百分比为 8.168266 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 3.167412 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 0.000000 -[MPGameSequencer dowhateverYouDoAtZero]：砰，时间到了！！！进度计时器百分比为 18.667908 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 13.418236 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 8.168266 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 3.167412 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比是 0.000000 -[MPGameSequencer dowhateverYouDoAtZero]：砰，时间到了！！！进度计时器百分比为 18.667908 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 13.418236 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 8.168266 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比为 3.167412 -[MPGameSequencer watchProgressTimer:]：进度计时器百分比是 0.000000 -[MPGameSequencer dowhateverYouDoAtZero]：砰，时间到了！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T11:55:28.910

在 cocos2d-x 中你会得到这样的演示文稿

```
bar->getPresentage(); 
```

# c# - 如何查看通过编译表达式树创建的委托的反汇编？

> ID：14910064
> 
> 赞同：5
> 
> 时间：2013-02-16T12:02:34.163
> 
> 标签：c#, .net, expression-trees, jit, disassembly

我想看看 .Net 的即时编译器生成的 x86 程序集。我知道[如何为](https://stackoverflow.com/questions/1945719/is-there-a-way-to-see-the-native-code-produced-by-thejitter-for-given-c-sharp)提前编译的“普通”代码执行此操作，但不知道如何为运行时动态生成的代码执行此操作（我正在使用表达式树）。

我什至不确定要尝试什么。例如，通过编译表达式树创建的委托指向一个地址，但我不知道用什么来查看该地址的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:07:10.333

使用[`LambdaExpression.CompileToMethod(MethodBuilder)`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.lambdaexpression.compiletomethod).

然后，您可以将 AssemblyBuilder 保存到可以在您最喜欢的 .NET 反汇编程序中检查的文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T04:00:11.287

我最终使用了 leppie 的基本建议，将表达式输出到外部程序集。然后，我使用反射器提取方法并将其粘贴到我自己的代码中。然后我运行 paste 的方法，并检查了什么是 jitted。这可能不是 100% 准确，但它至少给出了一个指示。

这是一些用于写出方法的代码（生成的程序集与可执行文件位于同一目录中）：

```
/// <summary>
/// Writes an assembly, containing the given method, to the working directory.
/// The assembly, type, and method are named based on the given hash name.
/// </summary>
public static void WriteMethodToAssembly<T>(Expression<T> method, string hashName) {
    var assemblyName = new AssemblyName(hashName);
    var assemblyBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly(assemblyName, AssemblyBuilderAccess.RunAndSave);
    var moduleBuilder = assemblyBuilder.DefineDynamicModule(assemblyName.Name, assemblyName.Name + ".dll");
    var typeBuilder = moduleBuilder.DefineType(hashName, TypeAttributes.Public);
    var methodBuilder = typeBuilder.DefineMethod("Run" + hashName, MethodAttributes.Public | MethodAttributes.Static);
    method.CompileToMethod(methodBuilder);

    typeBuilder.CreateType();
    assemblyBuilder.Save(hashName + ".dll");
} 
```

组装完成后，您可以使用反射器之类的工具来提取方法。

# android - 通过 Kivy 访问 Android 相机

> ID：14910065
> 
> 赞同：15
> 
> 时间：2013-02-16T12:02:42.913
> 
> 标签：android, kivy

请我正在寻找一种解决方法来**通过 kivy 访问 Android 相机**，或者我可以**与 kivy 集成**以访问相机的库。

我正在为 android 开发一个应用程序，但在 UI 上使用**python-kivy**，

任何事情都会非常感激，

多谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-14T16:01:45.897

这是我的示例代码，适用于 Android。只需导入该文件[https://github.com/kivy/plyer/blob/master/plyer/platforms/android/camera.py](https://github.com/kivy/plyer/blob/master/plyer/platforms/android/camera.py) 另外，不要忘记将 CAMERA 权限添加到清单。

主要.py：

```
__version__ = '1.0'

import kivy

# importing file from https://github.com/kivy/plyer/blob/master/plyer/platforms/android/camera.py
# I downloaded it and saved it in the same directory:
from camera import AndroidCamera

from kivy.app import App
from kivy.uix.button import Button
from kivy.uix.boxlayout import BoxLayout
from kivy.properties import ObjectProperty, StringProperty

import base64

class MyCamera(AndroidCamera):
    pass

class BoxLayoutW(BoxLayout):
    my_camera = ObjectProperty(None)
    # /sdcard means internal mobile storage for that case:
    image_path = StringProperty('/sdcard/my_test_photo.png')

    def __init__(self, **kwargs):

        super(BoxLayoutW, self).__init__()

        self.my_camera = MyCamera()

    def take_shot(self):
        self.my_camera._take_picture(self.on_success_shot, self.image_path)

    def on_success_shot(self, loaded_image_path):
        # converting saved image to a base64 string:
        image_str = self.image_convert_base64
        return True

    #converting image to a base64, if you want to send it, for example, via POST:
    def image_convert_base64(self):
        with open(self.image_path, "rb") as image_file:
            encoded_string = base64.b64encode(image_file.read())
        if not encoded_string:
            encoded_string = ''
        return encoded_string

if __name__ == '__main__':

    class CameraApp(App):
        def build(self):
            main_window = BoxLayoutW()
            return main_window

    CameraApp().run() 
```

相机.kv：

```
<BoxLayoutW>:

    Button:
        text: 'shot'
        on_release: root.take_shot() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:13:31.337

Kivy 对调用相机有一些原生支持。查看核心提供程序[的新编程指南中的](http://kivy.org/docs/api-kivy.core.camera.html?highlight=camera#kivy.core.camera)[此页面](http://kivy.org/docs/api-kivy.uix.camera.html?highlight=camera#kivy.uix.camera)或uix 小部件的新编程指南中的此页面。理论上，核心应该能够在平台之间适应，然后小部件应该能够使用相机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-12T13:45:49.223

[这](https://groups.google.com/forum/#!topic/kivy-users/hiyAJqjhFjo)链接到可以找到自定义实现的问题。它基于 PyJNIus 对 android API 的 Camera 类的自动包装。自己没试过，但你可以试一试...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-25T01:45:46.980

感谢这篇文章，我能够解决我的应用程序中的一个关键问题，非常感谢这里是我使用的代码，我希望你们可以在某处使用它。

我做了一个屏幕并使用了 plyer 相机功能

```
from os import getcwd
from os.path import exists
from os.path import splitext

import kivy
kivy.require('1.8.0')

from kivy.app import App
from kivy.properties import ObjectProperty
from kivy.uix.floatlayout import FloatLayout
from kivy.uix.popup import Popup
from kivy.logger import Logger

from plyer import camera 
```

我还为屏幕、标签和弹出窗口等使用了一些其他导入，您可以根据您的要求明确查看

```
class ScreenFive(Screen): #camera screen

def gg1back(self):
    self.parent.current = 'First'

def do_capture(self):

    filepath = 'IMG_1.jpg'
    ext = splitext(filepath)[-1].lower()

    try:
        camera.take_picture(self.camera_callback,filepath)
    except NotImplementedError:
        popup = MsgPopup(
            "The Face_rec_image feature has not yet \n been implemented for this platform :(")
        popup.open()

def camera_callback(self, filepath):
    if(exists(filepath)):
        popup = MsgPopup("Picture saved!")
        popup.open()
    else:
        popup = MsgPopup("Could not save your picture!")
        popup.open() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-23T14:36:22.180

几年后，Android API 在处理权限和存储提供程序方面发生了变化。

我在[这里](https://github.com/alecvn/kivy-android-camera)通过 Kivy 为 Android 相机提供了一个完整的工作示例。它基本上需要对已编译的清单文件进行一些调整`python-for-android`，以及直接使用`FileProvider`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-26T10:05:43.227

由于我很难找到如何在 android 上使用相机的答案，我想我会分享我的答案之旅以节省下一个人的时间。

我找不到直接从 Kivy 制作工作相机类的方法：

[https://kivy.org/docs/examples/gen__camera__main__py.html](https://kivy.org/docs/examples/gen__camera__main__py.html)

最后我找到了上面发布的解决方案，在我的应用程序中浪费了一些时间后，结果发现拍照后我无法返回应用程序 - 应用程序已终止，所以我无法返回应用程序来使用图片（我使用的是 Kivy Launcher）。就在最近我发现这种访问相机的方式被放弃了（[https://github.com/kivy/plyer/issues/16#issuecomment-54094174](https://github.com/kivy/plyer/issues/16#issuecomment-54094174)）

但后来我找到了下面的解决方案，只需运行示例代码，看起来我就能得到我想要的结果（它只需要一点调整就不会在取消 android 相机/未拍摄照片时崩溃）

[https://github.com/kivy/kivy/tree/master/examples/android/takepicture](https://github.com/kivy/kivy/tree/master/examples/android/takepicture)

编辑：似乎我的应用程序已终止，因为我没有`on_pause: return True`在最顶层的小部件中实现。尽管如此，上面的文字仍然可能会有所帮助

# javascript - 3D效果jquery css3

> ID：14910071
> 
> 赞同：0
> 
> 时间：2013-02-16T12:03:30.950
> 
> 标签：javascript, jquery, css, 3d

我必须用 jQuery 和 css3 制作一个简单的 3D 效果。

实际上我做这个[http://www.agencevolt.fr/milestone-nicolas/](http://www.agencevolt.fr/milestone-nicolas/)我使用透视和`rotateY`，我`rotateX`使用`<div class="container">`视差效果`<img>`。但我无法达到深刻的效果。我使用“技巧”来调整新版本上图片的宽度，但它“丑陋”。您对如何进行这项工作有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:45:58.757

您将需要删除

```
overflow: hidden; 
```

从容器中添加到容器中

```
transform-style:preserve-3d; 
```

然后在图像上播放

```
transform:translate3d(x,y,z) 
```

就像是

```
transform:translate3d(0,0,100px) 
```

应该解决它;）

# php - 如何更改 Typo3 中显示菜单链接的最大值？

> ID：14910077
> 
> 赞同：1
> 
> 时间：2013-02-16T12:04:42.180
> 
> 标签：php, typo3, typoscript

您好，我想编辑 maxitems 值以在typo3 中显示链接？我从管理员登录，单击“模板”，选择主页，然后选择组合框“模板分析器”，然后单击 lib.topmenu。

我可以看到那里

```
 lib.firstlinks {
  10 = HMENU
  10.special = directory
  10.special.value = 82
  10.maxItems = 7
  10.entryLevel = 0
  10.1 = TMENU
  10.1 {
    wrap = <ul>|</ul>
     NO.allWrap = <li><span>|</span></li>
     ACT = 1
     ACT.stdWrap.htmlSpecialChars = 1
     ACT.allWrap = <li><span>|</span>|</li>
  }
} 
```

所以我想更改这个 10.maxItems = 7 值，但无法编辑它，那么我该如何更改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:09:16.737

`Template analyzer`仅显示代码（在整个根路径中汇总）。

使用`Info/modify`，找到合适的 TypoScript 模板并在`Setup`字段中搜索此声明

# c# - 分多个步骤收集数据

> ID：14910079
> 
> 赞同：0
> 
> 时间：2013-02-16T12:05:09.337
> 
> 标签：c#, asp.net, .net, vb.net, wizard

我正在尝试用多个朋友注册一个客户并保存所有数据。

当前使用 ASP .Net Wizard 控件：

第 1 阶段 - 客户输入他们的详细信息（姓名、添加等）。当他们单击下一步时，我会保存 Cust 数据。第 2 阶段 - 在第 1 阶段保存详细信息后，客户现在填写几个文本框并单击保存以保存每个朋友。第 3 阶段 - 他们单击完成，这将写回多对多表中的值以链接客户和朋友表。

如您所知，上面有一些循环孔。如果客户在第 1 阶段输入了错误的结果，那么如果我允许此选项，他们将无法返回更改它，那么它将插入另一个新行。

如果我将所有数据保存在第 3 阶段，那么我无法将第 2 阶段中保存的朋友与客户行相关联。

谁能建议其他方法来完成此操作，因为向导控件似乎不适合此目的（除非我使用不正确，否则我想知道如何以及在哪里）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:16:39.700

您需要将第 1 页的信息添加到某个会话变量中，然后当您提交第 2 页时，第 3 页将从会话变量和第 2 页获取信息并完成其工作

方法二

您需要将第1页的信息存储在第2页的某个隐藏元素中。这样，当您提交第2页时，所有数据都将在第3页中处理。

# android - 在 Xperia 智能手机中禁用/启用扩展待机模式

> ID：14910084
> 
> 赞同：0
> 
> 时间：2013-02-16T12:05:27.507
> 
> 标签：android, sony

有谁知道是否可以在 Xperia P 中以编程方式启用/禁用索尼特定的扩展待机模式？如果是，我必须使用什么代码？我将创建 android 小部件来切换配置文件，但我需要在其中处理扩展待机模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:32:09.997

Xperia P 中没有向公众开放的索尼特定待机模式 API。

# javascript - 由 div 或图像触发的 HTML 选择触发器

> ID：14910087
> 
> 赞同：5
> 
> 时间：2013-02-16T12:05:53.337
> 
> 标签：javascript, html, css

我有一个`<select>`类似于以下示例的菜单：

```
<select>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select> 
```

在一些网站上，我看到这个菜单可以通过外部图像或 div 触发。

我在谷歌上搜索过，但几乎所有的问题和答案都与如何在选择中列出图像有关，**这不是我需要**的。我希望在单击 DIV 或图像时出现选择菜单。

如何通过单击另一个 DOM 元素（即 div）来触发此选择菜单？

PS。我的网站已经包含了 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-14T20:59:02.790

在这里，我[在 JSFiddle 上编写了一个脚本，](http://jsfiddle.net/KLTga/)以便通过使用外部 div 从下拉列表中轻松选择不同的选项。

HTML：

```
<select>
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
    <option value="mercedes">Mercedes</option>
    <option value="audi">Audi</option>
</select>

<nav>
    <div data-value="volvo">volvo</div>
    <div data-value="saab">saab</div>
    <div data-value="mercedes">mercedes</div>
    <div data-value="audi">audi</div>
</nav> 
```

CSS：

```
select {
    display:block;
    margin:0 0 10px;
}
div {
    padding:5px 10px;
    margin:0 0 5px;
    border:solid 1px #ccc;
    background:#eee;
    cursor:pointer;
} 
```

JS：

```
$(document).ready(function(){
    var select = $("select"),
        value = "";

    $("div").on("click",function(){
        value = $(this).attr("data-value"); // Store the value of the clicked div        
        select.find('option[value="'+ value +'"]') // Match the option with the value we get before
            .prop("selected",true) // Assign it selected attr
            .end() // Go back to the select
                .trigger("change"); // Trigger the change to see the change reflected on the select
    });
}); 
```

基于此脚本，您可以通过向每个选项添加例如 url（例如：data-link="http://google.com"）和 window.location 来增加很多功能，或者您想要的任何内容.

无论如何，如果您想要一个真正出色的插件来自动制作它，我建议使用 msDropdown（[此处的文档](http://www.marghoobsuleman.com/mywork/jcomponents/image-dropdown/samples/index.html)）。

这个插件可以让您通过简单地将它们与选择标签或 json 信息绑定来创建带有图像、描述和许多其他功能的自定义选择。希望就是你所寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:15:47.157

当您说“我希望显示选择菜单”时，我假设您想在下拉/选择列表中选择特定值，当用户单击特定 div 时。

您需要做的第一件事是为选择标签（例如“dropdownList”）和列表中的每个选项（例如“option1”、“option2”、“option3”、“option4”）提供一个 ID。假设有 4 个不同的 div（比如“div1”、“div2”、“div3”、“div4”），当单击它们时，在下拉列表中选择不同的值。你可以这样做 -

`$("#div1").on("click",function(){$("dropdownList").val("option1");});` `$("#div2").on("click",function(){$("dropdownList").val("option2");});` `$("#div3").on("click",function(){$("dropdownList").val("option3");});` `$("#div4").on("click",function(){$("dropdownList").val("option4");});`

您始终可以通过将 4 个 div 包装在一个名为“masterDiv”的主 div 中来优化它，然后 -

`$("#masterDiv div").on("click",function(e){ $("#dropdownList option:selected").removeAttr("selected"); \\remove currently selected value $("#option"+e.target.id.charAt(e.target.id.length-1)).attr("selected","selected"); });`

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-16T12:11:55.290

这是一个示例按钮也将通过使用 jquery 触发功能触发选择

```
 <!DOCTYPE html>
    <html>
    <head>

    <style>

    button { margin:10px; }

    div { color:blue; font-weight:bold; }

    span { color:red; }

    </style>

    <script src="http://code.jquery.com/jquery-latest.js"></script>

    </head>

    <body>

    <select id = "slt">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select>

    <button id="btn">Button #2</button>

    <div><span>0</span> button #1 clicks.</div>

    <div><span>0</span> button #2 clicks.</div>

    <script>
 $("#slt").change(function () {

update($("span:first"));

});

$("button:last").click(function () {

$("#slt").trigger('change');

update($("span:last"));

});    
     function update(j) {

var n = parseInt(j.text(), 10);

j.text(n + 1);

}

    </script>

    </body>

    </html> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-16T12:08:46.040

.change jQuery 事件将检测选择字段的值是否已更改，然后您可以执行 jQuery 操作来显示您的图像。

您可以使用 .click 但它会变得混乱。最好使用.change。

[http://api.jquery.com/change/](http://api.jquery.com/change/)

# objective-c - NSPopover - 失去焦点时隐藏？（在弹出框外点击）

> ID：14910093
> 
> 赞同：19
> 
> 时间：2013-02-16T12:06:16.667
> 
> 标签：objective-c, macos, cocoa, nspopover

我正在使用`doubleClickAction`a`NSTableView`来显示 a `NSPopover`。像这样的东西：

```
NSInteger selectedRow = [dataTableView clickedRow];
NSInteger selectedColumn = [dataTableView clickedColumn];

// If something was not selected, then we cannot display anything.
if(selectedRow < 0 || selectedColumn < 0)
{
    NSLog(@"Invalid selected (%ld,%ld)", selectedRow, selectedColumn);
    return;
} // End of something was not selected

// Setup our view controller, make sure if there was already a popover displayed, that we kill that one off first. Finally create and display our new popover.
DataInspectorViewController * controller =
[[DataInspectorViewController alloc] initWithNibName: @"DataInspectorViewController"
                                              bundle: nil];

if(nil != dataPreviewPopover)
{
    [dataPreviewPopover close];
} // End of popover was already visible

dataPreviewPopover = [[NSPopover alloc] init];
[dataPreviewPopover setContentSize:NSMakeSize(400.0f, 400.0f)];
[dataPreviewPopover setContentViewController:controller];
[dataPreviewPopover setAnimates:YES];
[dataPreviewPopover showRelativeToRect: [dataTableView frameOfCellAtColumn: selectedColumn row: selectedRow]
                     ofView: dataTableView
              preferredEdge: NSMinYEdge]; 
```

哪个工作得很好。我的弹出框在我双击的单元格上创建和删除。问题是，如果我单击弹出框之外的任何位置（例如单击另一个单元格），我希望弹出框消失。我一直在环顾四周，但我一生都不知道该怎么做。

这是我假设内置在弹出窗口中的东西，（我相当肯定它在 iOS`UIPopoverController`类中）所以我只是想知道我是否遗漏了一些简单的东西。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-17T14:45:14.417

您需要将弹出框的属性行为（在代码中或在界面构建器中）更改为：

```
popover.behavior = NSPopover.Behavior.transient; 
```

> `NSPopover.Behavior.transient`
> 当用户与弹出框外的用户界面元素交互时，系统将关闭弹出框。

[在Apple 的文档](https://developer.apple.com/documentation/appkit/nspopover)中阅读更多相关信息。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-02-01T16:50:19.167

该`.transient`标志对我不起作用。

但是，我可以通过以下方式使事情正常进行：

1）每当我显示我的弹出窗口时，我都会确保我激活了应用程序（我的应用程序是菜单栏应用程序，所以这不会自动发生）

```
NSApp.activate(ignoringOtherApps: true) 
```

2）当我在应用程序外部单击时，我的应用程序将被停用。我可以在 AppDelegate 中检测到这一点

```
func applicationWillResignActive(_ notification: Notification) {
    print("resign active")
} 
```

并采取相应行动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-12T11:25:17.883

虽然`transient`在大多数情况下都有效，但当用户与应用程序外部的元素交互时，这是一个问题，因为弹出框会隐藏但**不会关闭**。

最终为我工作的是：

```
popover.behavior = .semitransient 
```

现在，当更改应用程序或与应用程序外的任何其他元素交互时，弹出框会关闭。但是在与 a 交互时**不会**`NSMenu`关闭，并且可能不会在与其他交互时关闭。

[引用NSPopover.Behavior.semitransient](https://developer.apple.com/documentation/appkit/nspopover/behavior/semitransient)的文档：

> 未指定导致半瞬态弹出框关闭的确切交互。

类似于[NSPopover.Behavior.transient](https://developer.apple.com/documentation/appkit/nspopover/behavior/transient)的文档：

> 未指定将导致瞬态弹出框关闭的确切交互。

# jquery - 在each() jQuery 中更改()

> ID：14910100
> 
> 赞同：5
> 
> 时间：2013-02-16T12:07:22.873
> 
> 标签：jquery, event-handling

处理这种情况的最佳方法是什么：

```
$('.element').each(function() {

    $sibling = // find a sibling to $this.
    $mainElement = $(this); // memorize $(this)
    $sibling.change(function() {
       // when sibling changes
       // do something using $mainElement
       // problem is, $mainElement is not the element you think
       // $mainElement is the last .element found....
    })
}); 
```

一种解决方案是一张桌子......但是将change（）嵌套在each（）中没有任何优势......

我的html示例：

```
<div id="first">
  <span class="element"></span>
  <input name="first" type="text" />
</div>
<div id="second">
  <span class="element"></span>
  <input name="second" type="text" />
</div> 
```

例如，在这个`$sibling = $(this).next('input');`例子中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T12:14:33.743

一种方法是使用[闭包](https://stackoverflow.com/a/111200/165154)。可以说，这将使用其当前值*捕获*in 中的变量。`$mainElement`

```
$('.element').each(function() {

    $sibling = // find a sibling to $this.
    $mainElement = $(this); // memorize $(this)
    $sibling.change(function($mainElement) {
        return function() {
            // use $mainElement
        }
    }($mainElement))
}); 
```

[*jsfiddle 示例*](http://jsfiddle.net/WCDBr/)（确保在编辑后模糊文本字段，否则`.change()`不会触发）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T12:14:06.973

```
$('.element .sibling').each(function( ind, el) {

    $parent = $( el ).closest( '.element' );
    $( el ).change(function() {
         $parent.doSomething();
    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T12:14:38.933

试试这个

```
$('.element').each(function() {
    $(this).siblings('.sibling').change(function() {
       var mainElement = $(this).siblings('.element');
        // Play here
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T12:12:35.597

我想说对你来说最简单的选择是在兄弟姐妹上使用 .each ，然后为兄弟姐妹找到相对的“.element”。当然取决于你的代码。否则，这样的事情可能会起作用，尽管由于 .each 感觉有点多余：

```
$('.element').each(function() {
    $(this).siblings('.sibling').change(function() {
        var mainElement = $(this).siblings('.element');
        // Do whatever you want here...
    });
}); 
```

# r - R中的拟合优度指数

> ID：14910101
> 
> 赞同：0
> 
> 时间：2013-02-16T12:07:25.193
> 
> 标签：r

我是 R 新手，当我在“sem”模型上使用摘要时，我有以下输出。然而，在网上关于 R 的大多数论述中，我在第一行下方发现了一个 RMSEA 指数和其他拟合优度指数。为什么我没有看到他们？我需要启用一些库或下载一些包吗？

![Sem 的 R 输出](../Images/ea8ae8d80ae6321966d2c60442cad667.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T12:38:10.583

像这样使用 opt 。

```
opt <- options(fit.indices = c("GFI", "AGFI", "RMSEA", "NFI", "NNFI", "CFI", "RNI", "IFI", "SRMR", "AIC", "AICc", "BIC", "CAIC")) 
```

**例子**

```
library(sem)
# The following examples use file input and may be executed via example():

etc <- file.path(.path.package(package="sem")[1], "etc") # path to data and model files

#   to get all fit indices (not recommended, but for illustration):

opt <- options(fit.indices = c("GFI", "AGFI", "RMSEA", "NFI", "NNFI", "CFI", "RNI", "IFI", "SRMR", "AIC", "AICc", "BIC", "CAIC"))

# ------------- Duncan, Haller and Portes peer-influences model ----------------------
# A nonrecursive SEM with unobserved endogenous variables and fixed exogenous variables

(R.DHP <- readMoments(file=file.path(etc, "R-DHP.txt"),
                diag=FALSE, names=c("ROccAsp", "REdAsp", "FOccAsp", 
                "FEdAsp", "RParAsp", "RIQ", "RSES", "FSES", "FIQ", "FParAsp")))
(model.dhp <- specifyModel(file=file.path(etc, "model-DHP.txt")))
sem.dhp.1 <- sem(model.dhp, R.DHP, 329,
    fixed.x=c('RParAsp', 'RIQ', 'RSES', 'FSES', 'FIQ', 'FParAsp'))
summary(sem.dhp.1) 
```

**输出**

```
 Model Chisquare =  26.69722   Df =  15 Pr(>Chisq) = 0.03130238
 Goodness-of-fit index =  0.984387
 Adjusted goodness-of-fit index =  0.9427525
 RMSEA index =  0.04875944   90% CI: (0.01451664, 0.07830923)
 Bentler-Bonett NFI =  0.969384
 Tucker-Lewis NNFI =  0.9575676
 Bentler CFI =  0.9858559
 Bentler RNI =  0.9858559
 Bollen IFI =  0.986351
 SRMR =  0.02020441
 AIC =  64.69722
 AICc =  29.15676
 BIC =  -60.24365
 CAIC =  -75.24365

 Normalized Residuals
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-0.79950 -0.11780  0.00000 -0.01201  0.03974  1.56500 

 R-square for Endogenous Variables
RGenAsp FGenAsp ROccAsp  REdAsp FOccAsp  FEdAsp 
 0.5220  0.6170  0.5879  0.6639  0.6888  0.5954 

 Parameter Estimates
           Estimate    Std Error  z value    Pr(>|z|)                         
gam11       0.16122243 0.03879229  4.1560429 3.238070e-05 RGenAsp <--- RParAsp
gam12       0.24964929 0.04398092  5.6763087 1.376323e-08 RGenAsp <--- RIQ    
gam13       0.21840307 0.04419737  4.9415399 7.750795e-07 RGenAsp <--- RSES   
gam14       0.07183948 0.04970692  1.4452610 1.483846e-01 RGenAsp <--- FSES   
gam23       0.06188722 0.05171967  1.1965895 2.314666e-01 FGenAsp <--- RSES   
gam24       0.22886655 0.04416219  5.1824090 2.190383e-07 FGenAsp <--- FSES   
gam25       0.34903584 0.04528981  7.7067195 1.290931e-14 FGenAsp <--- FIQ    
gam26       0.15953378 0.03882594  4.1089486 3.974645e-05 FGenAsp <--- FParAsp
beta12      0.18423260 0.09488782  1.9415832 5.218758e-02 RGenAsp <--- FGenAsp
beta21      0.23547774 0.11938936  1.9723511 4.856954e-02 FGenAsp <--- RGenAsp
lam21       1.06267796 0.09013868 11.7893663 4.428606e-32 REdAsp <--- RGenAsp 
lam42       0.92972549 0.07028107 13.2286762 5.993366e-40 FEdAsp <--- FGenAsp 
ps12       -0.02260953 0.05119394 -0.4416447 6.587463e-01 FGenAsp <--> RGenAsp
V[RGenAsp]  0.28098701 0.04623153  6.0778220 1.218259e-09 RGenAsp <--> RGenAsp
V[FGenAsp]  0.26383553 0.04466689  5.9067359 3.489525e-09 FGenAsp <--> FGenAsp
V[ROccAsp]  0.41214545 0.05122465  8.0458422 8.565431e-16 ROccAsp <--> ROccAsp
V[REdAsp]   0.33614511 0.05209992  6.4519310 1.104339e-10 REdAsp <--> REdAsp  
V[FOccAsp]  0.31119482 0.04592713  6.7758385 1.236867e-11 FOccAsp <--> FOccAsp
V[FEdAsp]   0.40460363 0.04618437  8.7606177 1.941833e-18 FEdAsp <--> FEdAsp  

 Iterations =  32 
```

# python - 更改颜色条宽度

> ID：14910109
> 
> 赞同：2
> 
> 时间：2013-02-16T12:08:49.407
> 
> 标签：python, matplotlib, wxpython

![在此处输入图像描述](../Images/2280fc1ddba1e813b5120145361ef641.png)

我已经创建了这个，你可以看到颜色条很薄，无论如何增加颜色条的宽度而不增加高度

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T16:02:36.960

您需要掌握颜色条的轴。
假设您持有对颜色条的引用，`cbar`您可以通过`cbar.ax`.

**您可以使用 控制高度/宽度**的比例`ax.set_aspect(number)`。这将重新缩放轴以匹配该比率，但是我并不完全理解执行重新缩放的方式：

我可能会逐渐增加/减少这个数字，并且轴会在一维上缩小/延伸以相应地匹配比率。但在某些时候，行为会发生变化并进一步增加/减少在另一个维度上产生扩展/收缩。

[axes.set_aspect](http://matplotlib.org/api/axes_api.html?highlight=aspect#matplotlib.axes.Axes.set_aspect)的文档说：

> 一个圆圈将被拉伸，使得高度是宽度的 num 倍。aspect=1 与 aspect='equal' 相同</p>

如果您想完全避免这种麻烦，您可以设置`ax.set_aspect('auto')`然后明确设置轴的确切位置

```
ax.set_position((left, bottom, width, height)) 
```

这些单位是相对于图形画布的，并且从画布的左下角延伸`0`到。`1``0,0`

示例：`set_position((0.1, 0.2, 0.4, 0.6))`将坐标轴左下边缘定位在`(0.1, 0.2)`，右上边缘定位在`(0.1 + 0.4, 0.2 + 0.6)`

# api - 如何进一步处理谷歌距离矩阵api的结果？

> ID：14910115
> 
> 赞同：0
> 
> 时间：2013-02-16T12:09:29.687
> 
> 标签：api, matrix, distance

我是编程新手..我有这个代码，它给出了两点之间的距离，但需要进一步乘以一个整数，比如 10.. 我正在研究的项目是计算两点之间的距离并将其乘以票价/公里就像 10 卢比/公里（印度卢比）一样。因此，如果距离为 30 公里，票价将为 30*10 = Rs.300

提前致谢

以下是代码

```
<script>
var map;
var geocoder;
var bounds = new google.maps.LatLngBounds();
var markersArray = [];
  var origin1 = '';
  var destinationA = '';

  var destinationIcon = 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=D|FF0000|000000';

  var originIcon = 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=O|FFFF00|000000';

function initialize() {
    var opts = {
      center: new google.maps.LatLng(55.53, 9.4),
      zoom: 10,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

map = new google.maps.Map(document.getElementById('map'), opts);

var fromText = document.getElementById('FAdd');

var options = {
            componentRestrictions: {country: 'in'}
    };var fromAuto = new google.maps.places.Autocomplete(fromText, options);

fromAuto.bindTo('bound', map);

var toText = document.getElementById('TAdd');

var toAuto = new google.maps.places.Autocomplete(toText, options);

toAuto.bindTo('bound', map);

    geocoder = new google.maps.Geocoder();
  }

  function calculateDistances() {
    var service = new google.maps.DistanceMatrixService();
    service.getDistanceMatrix(
      {
        origins: [document.getElementById("FAdd").value],
        destinations: [document.getElementById("TAdd").value],
        travelMode: google.maps.TravelMode.DRIVING,
        unitSystem: google.maps.UnitSystem.METRIC,
        avoidHighways: false,
        avoidTolls: false
      }, callback);
  }

  function callback(response, status) {
    if (status != google.maps.DistanceMatrixStatus.OK) {
      alert('Error was: ' + status);
    } else {
      var origins = response.originAddresses;
      var destinations = response.destinationAddresses;
      var outputDiv = document.getElementById('outputDiv');
      outputDiv.innerHTML = '';
      deleteOverlays();

      for (var i = 0; i < origins.length; i++) {
        var results = response.rows[i].elements;
        addMarker(origins[i], false);
        for (var j = 0; j < results.length; j++) {
          addMarker(destinations[j], true);

        outputDiv.innerHTML += results[j].distance.text  + '<br>'; 

        }
      }
   }
  }

  function addMarker(location, isDestination) {
    var icon;
    if (isDestination) {
      icon = destinationIcon;
    } else {
      icon = originIcon;
    }
    geocoder.geocode({'address': location}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        bounds.extend(results[0].geometry.location);
        map.fitBounds(bounds);
        var marker = new google.maps.Marker({
          map: map,
          position: results[0].geometry.location,
          icon: icon
        });
        markersArray.push(marker);
      } else {
        alert('Geocode was not successful for the following reason: '
          + status);
      }
    });
  }

  function deleteOverlays() {
    if (markersArray) {
      for (i in markersArray) {
        markersArray[i].setMap(null);
      }
      markersArray.length = 0;
    }
  }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:25:32.743

我使用 Ajax 调用 PHP，但尚未使用 getDistanceMatrix()，但这应该是一个简单的修复。首先，如果你知道你总是只有一个起点和一个目的地，你就不需要回调函数中的“for”循环。其次，您使用的是距离文本而不是距离值。

```
function callback(response, status) {
    if (status != google.maps.DistanceMatrixStatus.OK) {
       [...]
    } else {
        deleteOverlays();
        var outputDiv = document.getElementById('outputDiv'),
            origin = response.originAddresses[0],
            destination = response.destinationAddresses[0],
            result = response.rows[0].elements[0],
            distance = result.distance.value,
            text = result.distance.text,
            price = 10 * distance;
        outputDiv.innerHTML = '<p>' + text + ': Rs.' + price + '</p>';
        addMarker(origin, false);
        addMarker(destination, false);
    } 
```

}

我没有对此进行测试，因此可能需要对其进行调整。（见[https://developers.google.com/maps/documentation/distancematrix/#DistanceMatrixResponses](https://developers.google.com/maps/documentation/distancematrix/#DistanceMatrixResponses)）

# delphi - 不可持续的异常......这是什么意思？

> ID：14910116
> 
> 赞同：3
> 
> 时间：2013-02-16T12:09:42.460
> 
> 标签：delphi, delphi-xe2

今天我正在更改我的 RC 文件中的一些资源（更具体地说，我用另一个 PNG 文件替换了一个 PNG 文件，然后使用 BRCC32 重建了 RES 文件）。重建我的应用程序后，我尝试运行它，但出现以下异常：

```
Project Blablabla.exe raised exception class $C00000025 with message non-continuable exception at address blablabla... 
```

我正在使用 madExcept，但这个异常不是由它处理的，而是由 Delphi 的内部异常处理程序处理的。事件日志窗口显示在我的主线程中引发了此异常。到目前为止，我唯一的办法就是用原始文件替换可疑的 PNG 文件。这是什么异常？什么是不可持续的？应用负载？阅读资源？加载 DLL/包？有人知道吗？谷歌今天对我不友好...

# windows-8 - 一个解决方案中的两个 Windows 应用商店应用程序

> ID：14910118
> 
> 赞同：0
> 
> 时间：2013-02-16T12:09:44.073
> 
> 标签：windows-8, windows-store-apps, monogame

我们想在一个 Visual Studio 2012 解决方案中创建许多 MonoGames。主屏幕必须是 Windows 应用商店应用程序。从主菜单中，我们可以导航到指定的小游戏，完成后，导航回主菜单。有可能创造吗？这个项目在 Microsoft Windows Store 中是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:31:34.693

您可以从一个 Visual Studio 解决方案创建多个 Windows 应用商店应用（或项目）。每个项目都有自己的包文件。但是，它们是独立的应用程序，彼此不相关。一种替代方法是创建一个包含多个游戏的解决方案（或一个 Windows 应用商店应用程序）。例如，您为每个游戏创建一个或一组 xaml 页面，然后在这些 xaml 页面之间导航。我知道这种方法有效，但尚未使用 MonoGame 对其进行测试。有关打包的更多信息，请查看[使用 Visual Studio 2012 打包您的 Windows 应用商店应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/hh454036%28v=vs.110%29.aspx)。

# python - python3：不同的字符集支持

> ID：14910121
> 
> 赞同：1
> 
> 时间：2013-02-16T12:09:58.360
> 
> 标签：python, html, python-3.x, character-encoding, python-3.3

我在 Windows 7 中使用 python 3.3。

```
if "iso-8859-1" in str(source):
    source = source.decode('iso-8859-1')
if "utf-8" in str(source):
    source = source.decode('utf-8') 
```

所以，目前我的应用程序仅对上述两个字符集有效......但我想涵盖所有可能的字符集。

实际上，我是从网站的源头手动查找这些字符集的，并且我体验到世界上所有的网站都不仅仅是来自这两个。有时网站不会在其 HTML 源代码中显示其字符集！所以，我的应用程序无法继续前进！

我应该怎么做才能自动检测字符集并根据它进行解码？如果可能，请尝试让我深入了解并提供示例。您也可以建议重要的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:13:52.673

[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)提供了一个函数，该函数[`UnicodeDammit()`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#unicode-dammit)通过多个步骤¹来确定您给它的任何字符串的编码，并将其转换为 unicode。使用起来非常简单：

```
from bs4 import UnicodeDammit
unicode_string = UnicodeDammit(encoded_string) 
```

如果您使用 BeautifulSoup 处理您的 HTML，它会[自动使用 UnicodeDammit](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#encodings)为您将其转换为 unicode。

* * *

¹[根据 BeautifulSoup 3 的文档](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Beautiful%20Soup%20Gives%20You%20Unicode,%20Dammit)，这些是 UnicodeDammit 采取的行动：

> Beautiful Soup 按优先级顺序尝试以下编码，将您的文档转换为 Unicode：
> 
> *   您作为 fromEncoding 参数传递给汤构造函数的编码。
> *   在文档本身中发现的编码：例如，在 XML 声明或（对于 HTML 文档）http-equiv META 标记中。如果 Beautiful Soup 在文档中发现这种编码，它会重新从头开始解析文档并尝试新的编码。唯一的例外是，如果您明确指定了编码，并且该编码确实有效：那么它将忽略它在文档中找到的任何编码。
> *   通过查看文件的前几个字节来嗅探的编码。如果在此阶段检测到编码，它将是 UTF-* 编码、EBCDIC 或 ASCII 之一。
> *   chardet 库嗅探到的编码，如果您安装了它。
> *   UTF-8
> *   Windows-1252

BeautifulSoup 4 文档中似乎没有这种解释，但大概 BS4 的 UnicodeDammit 以大致相同的方式工作（尽管我没有检查源以确定）。

# cakephp - 根据相关模型中的字段检索记录

> ID：14910123
> 
> 赞同：0
> 
> 时间：2013-02-16T12:10:02.040
> 
> 标签：cakephp

我有一个员工表，其状态为活动、新和已辞职。在我的应用程序下拉菜单中，我有所有 3 种不同的状态，即活跃、新和辞职，现在我想链接到每个不同的状态，也就是说，当我点击活跃时，它只显示员工表中的活跃用户。

请不要将状态表链接到员工表。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:27:54.590

```
 $records = $this->Employee->find('all', array(
            'recursive' => -1,
            'joins' => array(
                array(
                'table' => 'status',
                'alias' => 'Status',
                'type' => 'INNER',
                'conditions' => 'Employee.status = Status.id'
                )
            ),
            'fields' => array('Employee.field1', 'Employee.field2'),
            'conditions' => array('Status.id' => 'your_status_id'),
        ) 
        ); 
```

# java - 如何从 JSON 回复中有意义地提取信息？

> ID：14910124
> 
> 赞同：0
> 
> 时间：2013-02-16T12:10:08.533
> 
> 标签：java, json, weather

## 回复印度孟买

```
{   "response": {       "version": "0.1"        
"termsofService": "http://www.wunderground.com/weather/api/d/terms.html"        
"features": {       "geolookup": 1      
        "conditions": 1     
        "forecast": 1       }   }       
    "location": {       "type":"INTLCITY"
        "country":"IN"
        "country_iso3166":"IN"
        "country_name":"India"
        "state":""
        "city":"Mumbai"
        "tz_short":"IST"
        "tz_long":"Asia/Kolkata"
        "lat":"19.12000084"
        "lon":"72.84999847"
        "zip":"00000"
        "magic":"1"
        "wmo":"43003"
        "l":"/q/zmw:00000.1.43003"
        "requesturl":"global/stations/43003.html"
        "wuiurl":"http://www.wunderground.com/global/stations/43003.html"
        "nearby_weather_stations": {        "airport": {        "station": [        { "city":"Mumbai / Santacruz"
 "state":""
 "country":"India"
 "icao":"VABB"
 "lat":"19.11666679"
 "lon":"72.84999847" }
        { "city":"Mumbai"
 "state":""
 "country":"IN"
 "icao":"VABB"
 "lat":"19.12000084"
 "lon":"72.84999847" }      ]       }       
        "pws": {        "station": [        ]       }       }   }       
    "current_observation": {        "image": {      "url":"http://icons-ak.wxug.com/graphics/wu2/logo_130x80.png"
        "title":"Weather Underground"
        "link":"http://www.wunderground.com"        }
        "display_location": {       "full":"Mumbai
 India"
        "city":"Mumbai"
        "state":""
        "state_name":"India"
        "country":"IN"
        "country_iso3166":"IN"
        "zip":"00000"
        "latitude":"19.12000084"
        "longitude":"72.84999847"
        "elevation":"14.00000000"       }
        "observation_location": {       "full":"Mumbai
 "
        "city":"Mumbai"
        "state":""
        "country":"IN"
        "country_iso3166":"IN"
        "latitude":"19.12000084"
        "longitude":"72.84999847"
        "elevation":"46 ft"     }
        "estimated": {      }
        "station_id":"VABB"
        "observation_time":"Last Updated on February 16
 5:10 PM IST"
        "observation_time_rfc822":"Sat
 16 Feb 2013 17:10:00 +0530"
        "observation_epoch":"1361014800"
        "local_time_rfc822":"Sat
 16 Feb 2013 17:25:20 +0530"
        "local_epoch":"1361015720"
        "local_tz_short":"IST"
        "local_tz_long":"Asia/Kolkata"
        "local_tz_offset":"+0530"
        "weather":"Clear"
        "temperature_string":"77 F (25 C)"
        "temp_f":77
        "temp_c":25
        "relative_humidity":"54%"
        "wind_string":"From the WNW at 8 MPH"
        "wind_dir":"WNW"
        "wind_degrees":290
        "wind_mph":8
        "wind_gust_mph":0
        "wind_kph":13
        "wind_gust_kph":0
        "pressure_mb":"1008"
        "pressure_in":"29.77"
        "pressure_trend":"0"
        "dewpoint_string":"59 F (15 C)"
        "dewpoint_f":59
        "dewpoint_c":15
        "heat_index_string":"NA"
        "heat_index_f":"NA"
        "heat_index_c":"NA"
        "windchill_string":"NA"
        "windchill_f":"NA"
        "windchill_c":"NA"
        "feelslike_string":"77 F (25 C)"
        "feelslike_f":"77"
        "feelslike_c":"25"
        "visibility_mi":"3.7"
        "visibility_km":"6.0"
        "solarradiation":""
        "UV":"-1"
        "precip_1hr_string":"-9999.00 in (-9999.00 mm)"
        "precip_1hr_in":"-9999.00"
        "precip_1hr_metric":"-9999.00"
        "precip_today_string":"0.00 in (0.0 mm)"
        "precip_today_in":"0.00"
        "precip_today_metric":"0.0"
        "icon":"clear"
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif"
        "forecast_url":"http://www.wunderground.com/global/stations/43003.html"
        "history_url":"http://www.wunderground.com/history/airport/VABB/2013/2/16/DailyHistory.html"
        "ob_url":"http://www.wunderground.com/cgi-bin/findweather/getForecast?query=19.12000084
72.84999847"    }       
    "forecast":{        "txt_forecast": {       "date":"5:30 AM IST"
        "forecastday": [        {       "period":0
        "icon":"chancerain"
        "icon_url":"http://icons-ak.wxug.com/i/c/k/chancerain.gif"
        "title":"Saturday"
        "fcttext":"Partly cloudy with a chance of rain in the morning
 then clear. High of 81F. Winds from the WNW at 10 to 15 mph. Chance of rain 30%."
        "fcttext_metric":"Partly cloudy with a chance of rain in the morning
 then clear. High of 27C. Breezy. Winds from the WNW at 15 to 25 km/h. Chance of rain 30%."
        "pop":"30"      }       
        {       "period":1
        "icon":"clear"
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif"
        "title":"Saturday Night"
        "fcttext":"Clear. Low of 68F. Winds less than 5 mph."
        "fcttext_metric":"Clear. Low of 20C. Winds less than 5 km/h."
        "pop":"0"       }       
        {       "period":2
        "icon":"clear"
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif"
        "title":"Sunday"
        "fcttext":"Clear. High of 82F. Winds from the NE at 5 to 15 mph shifting to the WNW in the afternoon."
        "fcttext_metric":"Clear. High of 28C. Winds from the NE at 5 to 20 km/h shifting to the WNW in the afternoon."
        "pop":"0"       }       
        {       "period":3
        "icon":"clear"
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif"
        "title":"Sunday Night"
        "fcttext":"Clear. Low of 66F. Winds from the NNE at 5 to 10 mph."
        "fcttext_metric":"Clear. Low of 19C. Winds from the NNE at 10 to 15 km/h."
        "pop":"0"       }       
        {       "period":4
        "icon":"clear"
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif"
        "title":"Monday"
        "fcttext":"Clear. High of 88F. Winds from the NNE at 5 to 15 mph shifting to the NW in the afternoon."
        "fcttext_metric":"Clear. High of 31C. Breezy. Winds from the NNE at 10 to 20 km/h shifting to the NW in the afternoon."
        "pop":"0"       }       
        {       "period":5
        "icon":"clear"
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif"
        "title":"Monday Night"
        "fcttext":"Clear. Low of 63F. Winds from the NNE at 5 to 10 mph."
        "fcttext_metric":"Clear. Low of 17C. Winds from the NNE at 5 to 15 km/h."
        "pop":"0"       }       
        {       "period":6
        "icon":"clear"
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif"
        "title":"Tuesday"
        "fcttext":"Clear. High of 90F. Winds from the North at 5 to 10 mph shifting to the WNW in the afternoon."
        "fcttext_metric":"Clear. High of 32C. Winds from the North at 5 to 20 km/h shifting to the WNW in the afternoon."
        "pop":"0"       }       
        {       "period":7
        "icon":"clear"
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif"
        "title":"Tuesday Night"
        "fcttext":"Clear. Low of 72F. Winds from the North at 5 to 10 mph."
        "fcttext_metric":"Clear. Low of 22C. Winds from the North at 5 to 15 km/h."
        "pop":"0"       }       ]       }
        "simpleforecast": {     "forecastday": [        {"date":{   "epoch":"1361037600"
    "pretty":"11:30 PM IST on February 16
 2013"
    "day":16
    "month":2
    "year":2013
    "yday":46
    "hour":23
    "min":"30"
    "sec":0
    "isdst":"0"
    "monthname":"February"
    "weekday_short":"Sat"
    "weekday":"Saturday"
    "ampm":"PM"
    "tz_short":"IST"
    "tz_long":"Asia/Kolkata"}
        "period":1
        "high": {       "fahrenheit":"81"
        "celsius":"27"      }
        "low": {        "fahrenheit":"68"
        "celsius":"20"      }
        "conditions":"Chance of Rain"
        "icon":"chancerain"
        "icon_url":"http://icons-ak.wxug.com/i/c/k/chancerain.gif"
        "skyicon":"mostlysunny"
        "pop":30
        "qpf_allday": {     "in": 0.01
        "mm": 0.3       }
        "qpf_day": {        "in": 0.00
        "mm": 0.0       }
        "qpf_night": {      "in": 0.00
        "mm": 0.0       }
        "snow_allday": {        "in": 0
        "cm": 0     }
        "snow_day": {       "in": 0
        "cm": 0     }
        "snow_night": {     "in": 0
        "cm": 0     }
        "maxwind": {        "mph": 14
        "kph": 22
        "dir": "WNW"
        "degrees": 294      }
        "avewind": {        "mph": 12
        "kph": 19
        "dir": "WNW"
        "degrees": 295      }
        "avehumidity": 53
        "maxhumidity": 72
        "minhumidity": 49       }       
        {"date":{   "epoch":"1361124000"
    "pretty":"11:30 PM IST on February 17
 2013"
    "day":17
    "month":2
    "year":2013
    "yday":47
    "hour":23
    "min":"30"
    "sec":0
    "isdst":"0"
    "monthname":"February"
    "weekday_short":"Sun"
    "weekday":"Sunday"
    "ampm":"PM"
    "tz_short":"IST"
    "tz_long":"Asia/Kolkata"}
        "period":2
        "high": {       "fahrenheit":"82"
        "celsius":"28"      }
        "low": {        "fahrenheit":"66"
        "celsius":"19"      }
        "conditions":"Clear"
        "icon":"clear"
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif"
        "skyicon":"sunny"
        "pop":0
        "qpf_allday": {     "in": 0.00
        "mm": 0.0       }
        "qpf_day": {        "in": 0.00
        "mm": 0.0       }
        "qpf_night": {      "in": 0.00
        "mm": 0.0       }
        "snow_allday": {        "in": 0
        "cm": 0     }
        "snow_day": {       "in": 0
        "cm": 0     }
        "snow_night": {     "in": 0
        "cm": 0     }
        "maxwind": {        "mph": 11
        "kph": 18
        "dir": "NW"
        "degrees": 306      }
        "avewind": {        "mph": 8
        "kph": 13
        "dir": "WSW"
        "degrees": 238      }
        "avehumidity": 55
        "maxhumidity": 64
        "minhumidity": 39       }       
        {"date":{   "epoch":"1361210400"
    "pretty":"11:30 PM IST on February 18
 2013"
    "day":18
    "month":2
    "year":2013
    "yday":48
    "hour":23
    "min":"30"
    "sec":0
    "isdst":"0"
    "monthname":"February"
    "weekday_short":"Mon"
    "weekday":"Monday"
    "ampm":"PM"
    "tz_short":"IST"
    "tz_long":"Asia/Kolkata"}
        "period":3
        "high": {       "fahrenheit":"88"
        "celsius":"31"      }
        "low": {        "fahrenheit":"63"
        "celsius":"17"      }
        "conditions":"Clear"
        "icon":"clear"
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif"
        "skyicon":"sunny"
        "pop":0
        "qpf_allday": {     "in": 0.00
        "mm": 0.0       }
        "qpf_day": {        "in": 0.00
        "mm": 0.0       }
        "qpf_night": {      "in": 0.00
        "mm": 0.0       }
        "snow_allday": {        "in": 0
        "cm": 0     }
        "snow_day": {       "in": 0
        "cm": 0     }
        "snow_night": {     "in": 0
        "cm": 0     }
        "maxwind": {        "mph": 12
        "kph": 19
        "dir": "NW"
        "degrees": 310      }
        "avewind": {        "mph": 9
        "kph": 14
        "dir": "SW"
        "degrees": 235      }
        "avehumidity": 44
        "maxhumidity": 62
        "minhumidity": 30       }       
        {"date":{   "epoch":"1361296800"
    "pretty":"11:30 PM IST on February 19
 2013"
    "day":19
    "month":2
    "year":2013
    "yday":49
    "hour":23
    "min":"30"
    "sec":0
    "isdst":"0"
    "monthname":"February"
    "weekday_short":"Tue"
    "weekday":"Tuesday"
    "ampm":"PM"
    "tz_short":"IST"
    "tz_long":"Asia/Kolkata"}
        "period":4
        "high": {       "fahrenheit":"90"
        "celsius":"32"      }
        "low": {        "fahrenheit":"72"
        "celsius":"22"      }
        "conditions":"Clear"
        "icon":"clear"
        "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif"
        "skyicon":"sunny"
        "pop":0
        "qpf_allday": {     "in": 0.00
        "mm": 0.0       }
        "qpf_day": {        "in": 0.00
        "mm": 0.0       }
        "qpf_night": {      "in": 0.00
        "mm": 0.0       }
        "snow_allday": {        "in": 0
        "cm": 0     }
        "snow_day": {       "in": 0
        "cm": 0     }
        "snow_night": {     "in": 0
        "cm": 0     }
        "maxwind": {        "mph": 10
        "kph": 16
        "dir": "WNW"
        "degrees": 302      }
        "avewind": {        "mph": 8
        "kph": 13
        "dir": "West"
        "degrees": 272      }
        "avehumidity": 46
        "maxhumidity": 51
        "minhumidity": 30       }       ]       }   }}
---------------------------
        mph: 8, 
```

## 回复澳大利亚悉尼

```
{   "response": {       "version": "0.1"        
"termsofService": "http://www.wunderground.com/weather/api/d/terms.html"        
"features": {       "geolookup": 1      
        "conditions": 1     
        "forecast": 1       }   }       
    "location": {       "type":"INTLCITY"
        "country":"AU"
        "country_iso3166":"AU"
        "country_name":"Australia"
        "state":"NW"
        "city":"Sydney"
        "tz_short":"EST"
        "tz_long":"Australia/Sydney"
        "lat":"-33.95000076"
        "lon":"151.17999268"
        "zip":"00000"
        "magic":"1"
        "wmo":"94767"
        "l":"/q/zmw:00000.1.94767"
        "requesturl":"global/stations/94767.html"
        "wuiurl":"http://www.wunderground.com/global/stations/94767.html"
        "nearby_weather_stations": {        "airport": {        "station": [        { "city":"Sydney Airport"
 "state":""
 "country":"Australia"
 "icao":"YSSY"
 "lat":"-33.95000076"
 "lon":"151.18333435" }
        { "city":"Sydney"
 "state":""
 "country":"AU"
 "icao":"YSSY"
 "lat":"-33.95000076"
 "lon":"151.17999268" }
        { "city":"Richmond (NSW)"
 "state":""
 "country":"AU"
 "icao":"YSRI"
 "lat":"-33.59999847"
 "lon":"150.77999878" }     ]       }       
        "pws": {        "station": [        {       "neighborhood":"Matraville"
        "city":"Sydney"
        "state":"NSW"
        "country":"AUSTRALIA"
        "id":"INSWMATR2"
        "lat":-33.957550
        "lon":151.230850
        "distance_km":4
        "distance_mi":2     }
        {       "neighborhood":"Bardwell Park"
        "city":"Sydney"
        "state":"New South Wales"
        "country":"AUSTRALIA"
        "id":"INEWSOUT37"
        "lat":-33.938381
        "lon":151.124359
        "distance_km":5
        "distance_mi":3     }
        {       "neighborhood":"APRSWXNET Sydney AU"
        "city":"Little Bay"
        "state":"NW"
        "country":"AU"
        "id":"MD5399"
        "lat":-33.958500
        "lon":151.240677
        "distance_km":5
        "distance_mi":3     }
        {       "neighborhood":""
        "city":"Pyrmont"
        "state":"NEW SOUTH WALES"
        "country":"AUSTRALIA"
        "id":"INEWSOUT155"
        "lat":-33.871807
        "lon":151.194977
        "distance_km":8
        "distance_mi":5     }
        {       "neighborhood":"Woolloomooloo"
        "city":"Woolloomooloo"
        "state":"NSW"
        "country":"AUSTRALIA"
        "id":"INSWWOOL3"
        "lat":-33.874527
        "lon":151.220734
        "distance_km":9
        "distance_mi":5     }
        {       "neighborhood":"Old\u0027s Park"
        "city":"Penshurst"
        "state":"NSW"
        "country":"AUSTRALIA"
        "id":"INSWPENS2"
        "lat":-33.958290
        "lon":-208.924866
        "distance_km":9
        "distance_mi":5     }
        {       "neighborhood":"Searl Road"
        "city":"Cronulla"
        "state":"NSW"
        "country":"AUSTRALIA"
        "id":"INSWCRON2"
        "lat":-34.052074
        "lon":151.148605
        "distance_km":11
        "distance_mi":7     }
        {       "neighborhood":"Cronulla - Cecil Apartments"
        "city":"Cronulla - Sydney"
        "state":"NSW"
        "country":"AUSTRALIA"
        "id":"INSWSYDN19"
        "lat":-34.054329
        "lon":151.153656
        "distance_km":11
        "distance_mi":7     }
        {       "neighborhood":"The Shire - Caringbah South"
        "city":"Sydney"
        "state":"New South Wales"
        "country":"Australia"
        "id":"INSWCARI2"
        "lat":-34.048203
        "lon":151.120697
        "distance_km":12
        "distance_mi":7     }
        {       "neighborhood":"Kareela"
        "city":"Kareela"
        "state":"NSW"
        "country":"AUSTRALIA"
        "id":"INSWKIRR2"
        "lat":-34.020538
        "lon":151.075287
        "distance_km":12
        "distance_mi":7     }
        {       "neighborhood":"Caringbah South"
        "city":"Caringbah South"
        "state":"NSW"
        "country":"AUSTRALIA"
        "id":"INSWCARI3"
        "lat":-34.054550
        "lon":151.115799
        "distance_km":13
        "distance_mi":7     }
        {       "neighborhood":"Sutherland Shire"
        "city":"Caringbah South"
        "state":"NEW SOUTH WALES"
        "country":"Australia"
        "id":"INEWSOUT125"
        "lat":-34.059315
        "lon":151.117416
        "distance_km":13
        "distance_mi":8     }
        {       "neighborhood":"Lower North Shore"
        "city":"Linley Point (Lane Cove)"
        "state":"NEW SOUTH WALES"
        "country":"AUSTRALIA"
        "id":"INEWSOUT83"
        "lat":-33.826977
        "lon":151.151077
        "distance_km":13
        "distance_mi":8     }
        {       "neighborhood":"Gymea Bay South of Sydney near Royal National Park"
        "city":"Sydney"
        "state":"NSW"
        "country":"Australia"
        "id":"ISYDNEY2"
        "lat":-34.047691
        "lon":151.079971
        "distance_km":14
        "distance_mi":8     }
        {       "neighborhood":"Willoughby"  
[some more text here]
    ---------------------------
            mph: 7, 
```

* * *

## 问题

这是来自`Weather Underground`两个不同城市的回复。在孟买的情况下，它只提供有关一个城市的数据，但在悉尼的情况下，它提供有关悉尼周围许多地点的数据。

我希望能够以`JSON`一致的方式从该回复中提取信息。到目前为止，我使用`String`一些方法进行一些不太可靠的提取。
我该怎么做呢？

## 代码

```
package test;

import java.net.*;
import java.io.*;

import org.apache.commons.lang3.text.WordUtils;

import com.google.gson.*;
import com.google.gson.stream.JsonReader;

public class TestGson {

    URL callToApi;
//------------------------------------------------------------------------------
    public static void main(String[] args) {
        new TestGson();
    }
//------------------------------------------------------------------------------
    public TestGson(){
        try{
            sendCallToApi();
            readJson();
        }catch(IOException e){
            e.printStackTrace();
        }
    }
//------------------------------------------------------------------------------
    public void sendCallToApi(){
        try{
            callToApi = new URL("http://api.wunderground.com/api" +
                    "/[API KEY HERE]" +
                    "/geolookup/conditions/forecast/q/" +
                    "Australia/" +
                    "Sydney.json");
        }catch(MalformedURLException e){
            e.printStackTrace();
        }
    }
//------------------------------------------------------------------------------
    public void readJson() throws IOException{
        Gson g = new Gson();
        String wdf = null;
        InputStreamReader in = new InputStreamReader(callToApi.openStream());
        BufferedReader reader = new BufferedReader(in);
        String message = "hello";
        StringBuffer buf = new StringBuffer();

        while(true){
            message = reader.readLine();

            if(message == null){
                break;
            }else{
                if(message.contains("mph")){
                    wdf = message;
                }
                buf.append(message);
            }
        }
        message = buf.toString();
        System.out.println(message.replaceAll(",","\n"));
        System.out.println("---------------------------");
        wdf = wdf.replace("\"", "");
        System.out.println(wdf);
    }
//------------------------------------------------------------------------------
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:18:07.907

JSON 是一个序列化的对象——这意味着它非常适合反序列化。这允许您将 JSON 转换为可以随意查询的 java 对象。
首先，您需要一个合适的 java bean - JSON 的结构很简单，所以应该不难。
然后，您可以使用诸如[Jackson](http://wiki.fasterxml.com/JacksonHome)之类的工具来读取您的数据并将其放到 bean 上。

# iphone - UIImageView+AFNetworking 图像请求队列阻塞来自 RestKit 的其他网络请求

> ID：14910126
> 
> 赞同：5
> 
> 时间：2013-02-16T12:10:14.273
> 
> 标签：iphone, ios, restkit, afnetworking, nsoperationqueue

我通过创建`RKObjectRequestOperation`s 并将它们添加到 RestKit 的队列中来使用 RestKit 下载数据：

```
RKObjectRequestOperation *operation = [RK objectRequestOperationWithRequest:request
       success:...
       failure:...];
[RK enqueueObjectRequestOperation:operation]; 
```

那个效果很好。此外，此数据显示在列表视图中，其中包含显示相关用户图标的 UIImageViews。然而，这些用户图标不是通过 RestKit 下载的，而是通过底层的 AFNetworking 库下载的。UIImageView+AFNetworking 也很好地完成了这项工作（包括缓存）：

```
[self setImageWithURLRequest:userIconRequest
            placeholderImage:anonymousUser
                     success:nil
                     failure:...]; 
```

问题是来自图像视图的这 15 个用户图标请求阻止了应该立即加载下一页的 RestKit 请求的处理。我可以看到显示“正在加载”行的列表以及第一个用户图标。在最后一张图片完成加载的那一刻，下一页会自行附加。

查看 UIImageView+AFNetworking 的实现表明它正在使用自己的 NSOperation 队列实例来序列化请求。但是，我想这不应该干扰 RestKit。

在所有请求中添加`NSOperationQueuePriority`s 也不会改变任何事情。也许在内部，网络请求以不同的方式序列化？我如何确定这些请求的优先级？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T00:29:49.250

`NSURLConnection`具有未记录的最大连接数。

此外，`UIImageView+AFNetworking`的操作队列具有`NSOperationQueueDefaultMaxConcurrentOperationCount`最大的当前请求，根据[这个令人信服的 AFNetworking 讨论](https://github.com/AFNetworking/AFNetworking/issues/953)，这对于您的用例来说可能是一个糟糕的选择。

你需要节流。我看到两个简单的解决方案：

1.  修改`UIImageView+AFNetworking`为拥有 4 个最大并发操作。
2.  修改`UIImageView+AFNetworking`为使用与 RestKit 相同的操作队列，在这种情况下，您设置的优先级*将*很重要。

# java - 将数组值与相同的键组合

> ID：14910127
> 
> 赞同：1
> 
> 时间：2013-02-16T12:10:15.057
> 
> 标签：java, android, arrays, map, hashmap

我有一个包含我所有数据的列表：`setData`

```
List<Map<String, Integer>> setData = new ArrayList<Map<String, Integer>>();
Map<String, Integer> set; 
```

并且值是这样添加的（这发生在循环中，当它遍历游标时）：

```
set = new HashMap<String, Integer>();
set.put("value", value);
set.put("day", day);
setData.add(set); 
```

数组**随后**被排序，从“day”的最低值到“day”的最高值。

**我的问题：**我想将所有“值”与相同的“天”结合起来，需要添加或减去“值”，我的最终数组每天只保存一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:18:09.160

试试这个：

```
 Map<Integer, Integer> dayValue = new HashMap<Integer, Integer>();
 for(Map<String, Integer> set : setData) {
     int day = set.get("day"); 
     int value = set.get("value");
     int storedValue = dayValue.get(day);
     // do your addition or subtraction with value and storedValue,
     // and update the map after that
     dayValue.put(day, storedValue);
 } 
```

因此，对于每一天，你都会有**一个**价值。在这种情况下不需要使用`array`，因为您想为每`unique`一天保留一个值，`hashmap`就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T12:23:30.147

尝试这种方式，将不必要的字段排除在外：

```
set = new HashMap<Integer, Integer>(); 
```

在每个循环中：

```
if (set.containsKey(day))
{
  value += set.get(day);
} 

set.put(day, value); 
```

这样，您每天将拥有一个包含一个值的哈希。

# database - 在 Linux 上安装 Oracle 数据库

> ID：14910129
> 
> 赞同：1
> 
> 时间：2013-02-16T12:10:29.657
> 
> 标签：database, linux, oracle, oracle-home

我正在尝试在 Linux 上安装 Oracle DB。这是我的第一次尝试，所以不要过分评价我。

通过 DBCA 创建数据库时遇到问题：

> 启动数据库控制时出错。请执行以下命令。
> 
> 1）将环境变量设置`ORACLE_UNQNAME`为数据库唯一名称
> 
> 2)`/u01/app/oracle/product/11.2.0/dbhome_1/bin/emctl start dbconsole`

难道我做错了什么？我应该继续还是退后一步做点什么？

为什么我要问：我看到安装程序没有设置`ORACLE_HOME`变量，因为`echo $ORACLE_HOME`在 oracle 用户下显示一个空字符串。我记得在 Windows 上它是自动设置的。那么，我在这里错过了一步吗？

共同点：在安装oracle软件和DB时，我应该执行特定的步骤来设置ORACLE相关的环境变量吗？还是应该自动设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:45:12.607

在进行安装之前，请花一些时间阅读您的平台和 Oracle 版本（32 位或 64 位）的安装指南。
这里只是一些提示
由于这是您的第一次安装，请尽可能简化事情。
您不需要数据库控制或企业管理器。第一次去没有所有的花里胡哨。
对于数据库创建，仅选择字符集和块大小 - 安装后可以更改任何其他参数和选项。如果您选择 AL32UTF8，请不要使用已经准备好的安装，而是选择自定义安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:09:05.190

根据igr，必须手动设置ORACLE_HOME 和相关变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-07T20:58:15.510

使用[本指南](https://ahmermansoor.blogspot.com/2019/03/install-oracle-database-18c-on-centos-7.html)，我已多次安装 Oracle DB 18c。但就我而言，要`$ORACLE_HOME/bin/`通过 PATH 提供命令，我已将 PATH 更改`~/.bash_profile`为：

```
export PATH=/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/oracle/.local/bin:/home/oracle/bin:$ORACLE_HOME/bin 
```

在您的情况下，您可以将其更改为：

```
export PATH=$PATH:$ORACLE_HOME/bin 
```

然后，作为 root，我通过命令将用户更改为 oracle 用户：

```
# su - oracle 
```

但在此之前，您应该导出一些变量：

```
# Oracle Settings
export TMP=/tmp
export TMPDIR=$TMP

export ORACLE_HOSTNAME=ol7
export ORACLE_UNQNAME=cdb1
export ORACLE_BASE=/u01/app/oracle
export ORACLE_HOME=$ORACLE_BASE/product/18.3.0/dbhome_1
export ORA_INVENTORY=/u01/app/oraInventory
export ORACLE_SID=cdb1
export PDB_NAME=pdb1
export DATA_DIR=/u02/oradata 
```

当然，可以更改值以反映您的设置。

此外，通过以下指南记下关于`$`和`#`符号，在`[oracle@host]$`用户或`[root@host]#`用户下运行命令，如指南中所述。

# android - EditText 失去对点击的关注

> ID：14910131
> 
> 赞同：5
> 
> 时间：2013-02-16T12:10:57.583
> 
> 标签：android, android-edittext, adapter

我正在编写一个活动来列​​出数据库中的一堆项目并显示一个带有数量的附加列。我实现了一个 ArrayAdapter 来显示我的自定义布局。这是适配器最重要部分的代码：

```
static class ViewHolder {
    protected TextView text;
    protected EditText editText;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = null;
    if (convertView == null) {
        LayoutInflater inflator = context.getLayoutInflater();
        view = inflator.inflate(R.layout.rowquantitylayout, null);
        final ViewHolder viewHolder = new ViewHolder();
        viewHolder.text = (TextView) view.findViewById(R.id.label);
        viewHolder.editText = (EditText) view.findViewById(R.id.editText);
        viewHolder.editText.addTextChangedListener(new TextWatcher() {
            public void afterTextChanged(Editable s) {
                Log.i(TAG, "Editable:" + s.toString());
            }

            public void beforeTextChanged(CharSequence s, int start,
                    int count, int after) {
            }

            public void onTextChanged(CharSequence s, int start,
                    int before, int count) {
            }
        });
        view.setTag(viewHolder);
        viewHolder.editText.setTag(list.get(position));
    } else {
        view = convertView;
        ((ViewHolder) view.getTag()).editText.setTag(list.get(position));
    }
    ViewHolder holder = (ViewHolder) view.getTag();
    holder.text.setText(list.get(position).getDescription());
    holder.editText.setText("" + list.get(position).getQuantity());
    return view;

} 
```

现在，当我尝试聚焦“EditText”时，它会在我单击它后失去焦点。它显示了 keboard，它甚至到达了 Log.i，但由于它没有聚焦，所以不允许我更改值。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-18T21:47:58.080

我遇到了同样的问题，我正在寻找答案。这是一个类似问题的答案：[https ://stackoverflow.com/a/9338694/1448661](https://stackoverflow.com/a/9338694/1448661)

您必须在清单中的活动中添加一行：

```
 android:windowSoftInputMode="adjustPan" 
```

你的列表视图也必须有这一行：

```
 android:descendantFocusability="beforeDescendants" 
```

现在您可能会面临另一个问题，即滚动时文本丢失。如果发生这种情况，请查看本教程：http: [//vikaskanani.wordpress.com/2011/07/27/android-focusable-edittext-inside-listview/](http://vikaskanani.wordpress.com/2011/07/27/android-focusable-edittext-inside-listview/)

希望这会有所帮助。勾衣

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-16T12:12:41.400

尝试这个：

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:ems="10"
    android:inputType="textShortMessage" >
    <requestFocus />
</EditText> 
```

# ios - SVC 网络服务——objective-c

> ID：14910135
> 
> 赞同：1
> 
> 时间：2013-02-16T12:11:14.993
> 
> 标签：ios, objective-c, wcf, svc

[我引用了此链接](https://stackoverflow.com/questions/982622/consume-wcf-web-service-using-objective-c-on-iphone)并发现它非常有用，但是当我开始尝试所有可能的方法时，我未能获得所需的输出。

```
NSString *soapMessage = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                         "<SOAP:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                         "<SOAP:Body>\n"
                         "<BindCategory xmlns=\"http://tempuri.org/\">\n"
                         "</SOAP:Body>\n"
                         "</SOAP:Envelope>\n"
                         ];

NSLog(@"soapMessage: \n%@",soapMessage);

NSURL *url = [NSURL URLWithString:@"http://assetwebservice.sudesi.in/Service/"];

NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

[theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue: @"http://tempuri.org/IService/BindCategory" forHTTPHeaderField:@"SOAPAction"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"POST"];
[theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]]; 
```

我想我一定是犯了一些小错误。我得到以下输出。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>404 (Page Not Found) Error - Ever feel like you're in the wrong place?</title>
<link href="http://p3nlhclust404.shr.prod.phx3.secureserver.net/SharedContent/404-etc-styles.css" rel="stylesheet" type="text/css" media="screen" />
</head>
<body>
    <div class="body-404">
        <h1>
            <span>Ever feel you're in the wrong place</span>
        </h1>
        <div class="info-container">
            <div class="inner-border clear-fix">
                <h2 class="info-top">
                    404 (Page Not Found) Error
                </h2>
                <div class="site-owner-404">
                    <h3>If you're the <strong>site owner,</strong> one of two things happened:</h3>
                    <ol>
                        <li>
                            1) You entered an incorrect URL into your browser's address bar, or
                        </li>
                        <li>
                            2) You haven't uploaded content.
                        </li>
                    </ol>
                </div>      
                <div class="site-visitor-404">
                    <h3>If you're a <strong>visitor</strong> and not sure what happened:</h3>
                    <ol>
                        <li>
                            1) You entered or copied the URL incorrectly or
                        </li>
                        <li>
                            2) The link you used to get here is faulty.
                        </li>
                        <li class="last">
                            (It's an excellent idea to let the link owner know.)
                        </li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 
```

任何人都可以帮助理解我做错了什么吗？任何帮助是极大的赞赏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:42:52.230

我找到了解决方案：soap 消息中的第二行已更正。

```
"<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                 "<soap:Body>\n" 
```

在 url 字符串中也缺少 .svc 扩展名。我用声明纠正了它。 *[http://assetwebservice.sudesi.in/service.svc](http://assetwebservice.sudesi.in/service.svc)* 看清楚 service.svc 中的 s 是小写的，而在 soapaction 参数中它是大写的。

下面是带有 http 标头参数的整个 soap 消息。

```
NSString *soapMessage = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                          "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                         "<soap:Body>\n"
                         "<BindCategory xmlns=\"http://tempuri.org/\">\n"
                         "</BindCategory>\n"
                         "</soap:Body>\n"
                         "</soap:Envelope>\n"
                         ];
NSLog(@"soapMessage: \n%@",soapMessage);

NSURL *url = [NSURL URLWithString:@"http://assetwebservice.sudesi.in/service.svc"];    
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

[theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue: @"http://tempuri.org/IService/BindCategory" forHTTPHeaderField:@"soapaction"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"POST"];
[theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]]; 
```

*让我感到困惑的一件事是，即使它是一个 GET 请求，它也会向我抛出“连接错误”`NSLog`并在我将其更改为 POST 时成功*

# python - 如何启用/禁用 QTableWidget 的水平/垂直标题？

> ID：14910136
> 
> 赞同：14
> 
> 时间：2013-02-16T12:11:17.860
> 
> 标签：python, header, pyqt, qtablewidget

如果我在 Qt 设计器中将 Horizo​​ntalHeaderVisible 或 verticalHeaderVisible 属性设置为 false，则可以正常工作。但是如何在我的代码中启用/禁用标头？我一直在尝试这样的事情：

```
self.ui.tblContents.horizontalHeaderVisible = False 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-16T12:51:59.447

你会得到标题和`.hide()`（或`.setVisible(False)`：

```
self.ui.tblContents.horizontalHeader().hide()
# or
# self.ui.tblContents.horizontalHeader().setVisible(False)

self.ui.tblContents.verticalHeader().hide()
# or
# self.ui.tblContents.verticalHeader().setVisible(False) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-04-10T13:12:48.100

如果你想使用 Python37 PyQt5 的 QTableWidget() 来做到这一点。以下是隐藏垂直和水平的步骤：

> # 初始化小部件，我提到它是为了方便您找到步骤：
> 
> ```
> self.tableWidget = QTableWidget() 
> ```
> 
> # 隐藏水平标题
> 
> ```
> self.tableWidget.horizontalHeader().setVisible(False) 
> ```
> 
> # 隐藏垂直标题
> 
> ```
> self.tableWidget.verticalHeader().setVisible(False) 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-05T13:36:33.867

谢谢你。在 PyQt5 中非常适合我。

一些屏幕截图供人们在感到困惑时将其可视化。

垂直的（用于行号）禁用：

```
self.tableView = QTableView()
self.tableView.verticalHeader().setVisible(False) 
```

[![在此处输入图像描述](../Images/62da34a6a1222abe252455d7c7e3fc37.png)](https://i.stack.imgur.com/2bWte.png)

水平一禁用：

```
self.tableView = QTableView()
self.tableView.horizontalHeader().setVisible(False) 
```

[![在此处输入图像描述](../Images/ec1c6158bad3b4c0e8ac8dc238e4e8cd.png)](https://i.stack.imgur.com/JQCXY.png)

禁用垂直和水平标题。

```
self.tableView = QTableView()
self.tableView.verticalHeader().setVisible(False)
self.tableView.horizontalHeader().setVisible(False) 
```

[![在此处输入图像描述](../Images/999c97674cdd56590af972a970a78354.png)](https://i.stack.imgur.com/ehEw0.png)

# c# - 在 WinRT（Windows 应用程序）中使用 System.Collections.Generic

> ID：14910139
> 
> 赞同：0
> 
> 时间：2013-02-16T12:11:26.330
> 
> 标签：c#, winrt-xaml

我正在制作一个 Windows 8 应用程序以放在商店中。

一些 .NET 程序集似乎无法访问（如一些 WPF 图形类），而一些普通的默认程序集（如 S `ystem.Collections.Generic`）不再默认添加。

我想使用 List 类，但我担心使用它会有一些隐性成本（毕竟，为什么 XAML 应用程序默认不启用它？）。我未来的用户是否会获得一个额外的用于 WinRT 的 .NET DLL，他们必须下载？他们的电脑会在响亮的震荡爆炸中爆炸吗？好吧，也许这不会发生。

我无所事事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:21:55.090

Windows 应用商店应用程序支持命名空间中的大多数类[`System.Collections.Generic`](http://msdn.microsoft.com/en-us/library/system.collections.generic.aspx)（第一列中的绿色手提箱图标）。这意味着它们在 Windws RT 系统上可用。因此，您无需担心任何事情。使用它们没有任何隐藏成本或任何东西。

# ios - 使用 Base64 和 JSON 上传大图

> ID：14910142
> 
> 赞同：6
> 
> 时间：2013-02-16T12:11:47.023
> 
> 标签：ios, objective-c, json, base64, nsurlconnection

我正在使用此功能将图像上传到使用`JSON`. 为此，我首先将图像转换`NSData`为`NSString`使用`Base64`. 当图像不是很大时，该方法可以正常工作，但是当我尝试上传 2Mb 图像时，它会崩溃。

问题是服务器没有收到我的图像，即使该`didReceiveResponse`方法被调用以及`didReceiveData`which 返回`(null)`。起初我认为这是一个超时问题，但即使将其设置为 1000.0 它仍然无法正常工作。任何想法？谢谢你的时间！

这是我当前的代码：

```
 - (void) imageRequest {

   NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.myurltouploadimage.com/services/v1/upload.json"]];

   NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
   NSString *path = [NSString stringWithFormat:@"%@/design%i.png",docDir, designNum];
   NSLog(@"%@",path);

   NSData *imageData = UIImagePNGRepresentation([UIImage imageWithContentsOfFile:path]);
   [Base64 initialize];
   NSString *imageString = [Base64 encode:imageData];

   NSArray *keys = [NSArray arrayWithObjects:@"design",nil];
   NSArray *objects = [NSArray arrayWithObjects:imageString,nil];
   NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

   NSError *error;
   NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:kNilOptions error:&error];

   [request setHTTPMethod:@"POST"];
   [request setValue:[NSString stringWithFormat:@"%d",[jsonData length]] forHTTPHeaderField:@"Content-Length"];
   [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
   [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
   [request setHTTPBody:jsonData];

   [[NSURLConnection alloc] initWithRequest:request delegate:self];

   NSLog(@"Image uploaded");

}

 - (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

   NSLog(@"didReceiveResponse");

}

 - (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

   NSLog(@"%@",[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil]);

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T20:41:36.063

我最终决定上传 Base64 图像，将其拆分为更小的子字符串。为了做到这一点，并且因为我需要很多`NSURLConnections`，我创建了一个名为的子类`TagConnection`，它为每个连接提供一个标签，这样它们之间就不会混淆。

然后我创建了一个`TagConnection`属性，`MyViewController`目的是从任何函数访问它。正如您所看到的，当我收到来自服务器的响应时，有一个`-startAsyncLoad:withTag:`分配和初始化的函数以及`TagConnection`删除它的函数。`-connection:didReceiveData:`

参考该`-uploadImage`函数，首先它将图像转换为字符串，然后将其拆分并将块放入 JSON 请求中。它被调用直到变量偏移量大于字符串长度，这意味着所有块都已上传。

您还可以通过每次检查服务器响应并仅`-uploadImage`在返回成功时才调用该函数来证明每个块已成功上传。

我希望这是一个有用的答案。谢谢。

**标记连接.h**

```
@interface TagConnection : NSURLConnection {
    NSString *tag;
}

@property (strong, nonatomic) NSString *tag;

- (id)initWithRequest:(NSURLRequest *)request delegate:(id)delegate startImmediately:(BOOL)startImmediately tag:(NSString*)tag;

@end 
```

**标签连接.m**

```
#import "TagConnection.h"

@implementation TagConnection

@synthesize tag;

- (id)initWithRequest:(NSURLRequest *)request delegate:(id)delegate startImmediately:(BOOL)startImmediately tag:(NSString*)tag {
    self = [super initWithRequest:request delegate:delegate startImmediately:startImmediately];

    if (self) {
        self.tag = tag;
    }
    return self;
}

- (void)dealloc {
    [tag release];
    [super dealloc];
}

@end 
```

**MyViewController.h**

```
#import "TagConnection.h"

@interface MyViewController : UIViewController

@property (strong, nonatomic) TagConnection *conn; 
```

**我的视图控制器.m**

```
#import "MyViewController.h"

@interface MyViewController ()

@end

@synthesize conn;

bool stopSending = NO;
int chunkNum = 1;
int offset = 0;

- (IBAction) uploadImageButton:(id)sender {

    [self uploadImage];

}

- (void) startAsyncLoad:(NSMutableURLRequest *)request withTag:(NSString *)tag {

    self.conn = [[[TagConnection alloc] initWithRequest:request delegate:self startImmediately:YES tag:tag] autorelease];

}

- (void) uploadImage {

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.mywebpage.com/upload.json"] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:1000.0];

    NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *path = [NSString stringWithFormat:@"%@/design%i.png", docDir, designNum];
    NSLog(@"%@",path);

    NSData *imageData = UIImagePNGRepresentation([UIImage imageWithContentsOfFile:path]);
    [Base64 initialize];
    NSString *imageString = [Base64 encode:imageData];

    NSUInteger length = [imageString length];
    NSUInteger chunkSize = 1000;

    NSUInteger thisChunkSize = length - offset > chunkSize ? chunkSize : length - offset;
    NSString *chunk = [imageString substringWithRange:NSMakeRange(offset, thisChunkSize)];
    offset += thisChunkSize;

    NSArray *keys = [NSArray arrayWithObjects:@"design",@"design_id",@"fragment_id",nil];
    NSArray *objects = [NSArray arrayWithObjects:chunk,@"design_id",[NSString stringWithFormat:@"%i", chunkNum],nil];
    NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

    NSError *error;
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:kNilOptions error:&error];

    [request setHTTPMethod:@"POST"];
    [request setValue:[NSString stringWithFormat:@"%d",[jsonData length]] forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:jsonData];

    [self startAsyncLoad:request withTag:[NSString stringWithFormat:@"tag%i",chunkNum]];

    if (offset > length) {
        stopSending = YES;
    }

}

- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    NSError *error;
    NSArray *responseData = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    if (!responseData) {
        NSLog(@"Error parsing JSON: %@", error);
    } else {
        if (stopSending == NO) {
            chunkNum++;
            [self.conn cancel];
            self.conn = nil;
            [self uploadImage];
        } else {
            NSLog(@"---------Image sent---------");
        }
    }

}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T12:29:06.843

请不要认为这是最后的选择，这只是我的观察。

我认为您应该以块的形式发送 NSData 而不是完整的数据。我在 YouTube 视频上传案例中看到了这种方法。他们以许多 NSData 的块发送大量 NSData（视频文件的 NSData）。

他们使用相同的方法上传大数据。

所以应该对 Youtube 数据上传 API 做谷歌。你应该搜索那个方法，YouTube Uploader Uses。

我希望它可以帮助你。

# eclipse - Appengine + Maven + Spring + Eclipse

> ID：14910145
> 
> 赞同：1
> 
> 时间：2013-02-16T12:12:01.797
> 
> 标签：eclipse, spring, google-app-engine, maven

我想在 appengine 中使用 maven 和 spring，但我不能......

我能够使用 appengine 配置 maven（以及使用 appengine 的 spring，但没有 maven），但是当我添加 spring 依赖项并尝试运行它时，出现以下错误：

警告：无法实例化侦听器 org.springframework.web.context.ContextLoaderListener java.lang.ClassNotFoundException：org.springframework.web.context.ContextLoaderListener [...] java.lang.ClassNotFoundException：org.springframework.web.filter.CharacterEncodingFilter

我该如何解决这个问题？

我阅读了大量信息，但似乎已经过时了......

谢谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:50:04.010

如果您在问题中提供更多信息会有所帮助，但我想说看看 maven Central 中的弹簧工件：[http](http://search.maven.org/#search%7Cga%7C1%7Corg.springframework) ://search.maven.org/#search%7Cga%7C1%7Corg.springframework和尝试选择适合您的所有单一版本。我认为他们在 3.2.2.RELEASE

抱歉，我无法提供更多帮助，但由于这些天 springframework 文档对于 maven 支持有点过时（[http://www.springsource.org/spring-framework](http://www.springsource.org/spring-framework)），因此很容易获得混杂的版本这会导致解决依赖关系的问题。

尝试只声明最小的依赖集，“mvn dependency:tree”也可以提示你在哪里引入重复的依赖，这可能会导致这种类型的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-09T15:43:03.070

对于 maven 依赖项，请查看： [https ://mvnrepository.com/artifact/org.springframework](https://mvnrepository.com/artifact/org.springframework)

确保您声明了 spring-web 依赖项。

```
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-web</artifactId>
  <version>${springframework.version}</version>
</dependency> 
```

请阅读 appengine spring 优化指南，以后可以为您省去一些麻烦： [https ://cloud.google.com/appengine/articles/spring_optimization](https://cloud.google.com/appengine/articles/spring_optimization)

# android - 如何使用roottools获取文件权限

> ID：14910148
> 
> 赞同：0
> 
> 时间：2013-02-16T12:12:26.787
> 
> 标签：android, file, permissions, root, roottools

我想在不解析 ls -l 的情况下获得 linux 文件权限。由于我将使用 RootTools，我看到它有一个[Permissions](http://roottools.googlecode.com/svn/trunk/Developmental/doc/index.html)类，但是我应该如何将 File 的权限数据获取到该对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-01T15:21:14.040

如果您不能修改源使用反射：

```
private Permissions RootToolsInternalMethods_getPermissions(String line)
{
    try
    {
        RootTools rootTools = new RootTools();
        Method method = rootTools.getClass().getDeclaredMethod("getInternals");
        method.setAccessible(true);
        RootToolsInternalMethods rootToolsInternalMethods = (RootToolsInternalMethods)method.invoke(rootTools);
        return rootToolsInternalMethods.getPermissions(line);
    }
    catch (Exception ignore) {}

    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:32:54.150

RootToolsInternalMethods 有 getPermissions(String) 方法，但它们只能在 RootTools 类中访问

来自 RootTools 源

```
private static final RootToolsInternalMethods getInternals() {
    if (rim == null) {
        RootToolsInternalMethods.getInstance();
        return rim;
    } else {
        return rim;
    }
} 
```

好像我必须修改 RootTools 源并从 ls -l 输出获取权限

```
getInternals().getPermissions("ls -l output line"); 
```

# database - 数据库表和面向对象的类之间有关系吗？

> ID：14910161
> 
> 赞同：4
> 
> 时间：2013-02-16T12:14:06.740
> 
> 标签：database, oop, database-design, computer-science

每次我编程时，我都会认识到类和表之间的这种关系，或者我是在想象它。

您可以为每个数据库表创建一个类，也可以为每个类创建一个表，即：

```
 tables: customer, products, order.

    classes: customer, products, order, may have methods such as addRecord, deleteRecord, updateRecord. 
```

这个叫什么？对象关系？我不是 DBA。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T16:21:03.160

除了鲍勃的回答之外，还有以下内容。

在对象建模中，类和子类之间的关系由继承处理，对象建模者知道如何充分利用继承。关系数据模型和扩展的 SQL 数据库不会为您实现继承。你必须设计表格来给你一些相同的结果。

在 ER（Entity-Relationship）建模中，相应的概念称为泛化/专业化。这会告诉您如何对类/子类关系建模，但不会告诉您在构建数据库时如何设计表。

在处理类和子类时，有三种非常容易理解的技术非常有用。以下是他们的标签： [single-table-inheritance](/questions/tagged/single-table-inheritance "显示标记为“单表继承”的问题") [class-table-inheritance](/questions/tagged/class-table-inheritance "显示标记为“类表继承”的问题") [shared-primary-key](/questions/tagged/shared-primary-key "显示标记为“共享主键”的问题")。不幸的是，许多关于数据库设计的教程从未涵盖这些技术。它们对于了解对象建模并希望加快关系建模速度的人非常有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-16T14:33:50.987

这完全取决于您使用的数据库类型。如果您使用的是[面向对象的数据库](http://en.wikipedia.org/wiki/Object_database)(OODB)，那么就没有关系，因为对象和持久数据是一回事。例如，如果您有一个`Customer`类，并将其保存在 OODB 中，那么该客户*实例***就是**存储在 DB 中的内容。

如果您使用的是[关系数据库](http://en.wikipedia.org/wiki/Relational_database)，那么类实例以及它们在数据库中的持久表示*可能*是同一件事，但很多时候它们不是。这是因为大多数人使用[规范化](http://en.wikipedia.org/wiki/Database_normalization)以有效的方式（在关系数据库中）表示他们的数据。这意味着，您可以拥有一个由多个表表示的类，而不是每个类都有一个表。在`Customer`示例中，这些表现在可能是`Customer`（具有名称、出生日期和其他属性）和`Order`（具有指向另一个表中的产品的订单）。其原因与[基数](http://en.wikipedia.org/wiki/Cardinality)有关，以及`Customers`有多个订单。当您的业务逻辑需要来自数据库的这些信息时，数据访问层的工作是将数据库中的数据（称为[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)）映射到您的类中。

如果您使用的是另一种类型的数据库，那么类（域模型）与数据库中持久的内容之间会有不同的关系。

但是，至于这种关系的名称呢？不，没有名字。

# java - 如何在运行时创建 RollingFileAppender（Web 应用程序侦听器）并替换配置 xml 中定义的 ConsoleAppender

> ID：14910165
> 
> 赞同：1
> 
> 时间：2013-02-16T12:14:19.970
> 
> 标签：java, log4j2

我正在使用 log4j2 beta 4。log4j2.xml 设置正确，一切正常。但我需要在运行时更改附加程序。从 xml 中定义的控制台到具有特定文件位置的 RollingFileAppender。

我在文档方面苦苦挣扎，却一无所获。有人解决了这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:39:32.120

您可以编写一个代码，该代码将在您的应用程序启动时调用，然后您可以从根记录器列表中删除附加程序。

它是这样的。我不太确定。

```
Logger.getRootLogger().removeAppender("stdout") 
```

我可以看看 log4j.properties 文件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:28:58.160

敬启者。

创建自定义附加程序作为插件（基本上是 RollinfFileAppender 的副本），这给了我更改文件位置的机会。并创建了 RootLogger（再次作为插件），它让我有机会更改日志级别并根据服务器在 sysout 和文件之间切换。

现在听起来很容易:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T23:47:44.323

使用 log4j2.xml 文件中的系统属性定义的文件名/文件路径定义记录器。

```
<appenders>
<File name="MyFile" fileName="${sys:logFilename}.log">
  <PatternLayout pattern="%d{${datestamp}} [%t] %-5level %logger{36} - %msg%n"/>
</File>
</appenders> 
```

在您的程序中，从用户输入中读取文件名，使用您在配置文件中为文件名使用的密钥将其保存到系统属性中。更新上下文以重新加载配置文件。--> 文件名是在运行时动态创建的。

```
String filnameInput = "GetInputLikeYouWantIt";
System.setProperty("logFilename", filnameInput);
//update the Logger context to relead the filename with the lookup
LoggerContext ctx =  (LoggerContext) LogManager.getContext(false);
ctx.reconfigure(); 
```

# plone - 在离线模式下使用 kgs 进行克隆

> ID：14910168
> 
> 赞同：2
> 
> 时间：2013-02-16T12:14:31.273
> 
> 标签：plone, offline, buildout

我用于 plone 项目的 buildout.cfg 使用 kgs（已知良好的集合）：

```
[buildout]
extends = http://dist.plone.org/release/4.2/versions.cfg 
```

由于它是网络依赖项，因此离线时构建不起作用。

```
$ bin/buildout -o
While:
  Initializing.
Error: Couldn't download 'http://dist.plone.org/release/4.2/versions.cfg' in offline mode. 
```

*在离线模式下工作并*拥有 kgs 参考的最佳做法是什么？我假设有一些方法可以缓存外部引用。当然我可以在本地使用缓存代理，但恕我直言，必须有一个更轻量级的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T15:34:31.163

您可以使用扩展缓存（也可以在不同机器之间共享，例如您的开发机器和生产机器）。

**设置**

添加一个文件以`~/.buildout/default.cfg`启用此机器上所有构建的缓存：

```
[buildout]
extends-cache = /path/to/your/extends/cache 
```

或者您可以在特定的构建中进行相同的配置。

这将在您配置的目录中创建具有散列文件名的文件。由于文件名是由扩展的 URL 生成的，因此可以很容易地复制它。因此，如果您在服务器上从来没有互联网连接，您可以在另一台服务器上运行构建`extends-cache`并复制直接

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T12:24:35.760

我们总是将 KGS URL 下载到本地文件并将其用作扩展：

```
curl -o plone-versions.cfg http://dist.plone.org/release/4.2.4/versions.cfg 
```

我们的`versions.cfg`内容如下：

```
[buildout]
extends = 
    zopeapp-versions.cfg
    ztk-versions.cfg
    zope-versions.cfg
    plone-versions.cfg 
```

我们在文件中添加标题以命名原始源，并*注释掉*文件中的 URL 扩展名：

```
# Sourced from http://dist.plone.org/release/4.2.4/versions.cfg
[buildout]
# extends = http://download.zope.org/zopetoolkit/index/1.0.7/zopeapp-versions.cfg
#          http://download.zope.org/Zope2/index/2.13.19/versions.cfg 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-16T12:51:38.023

我只是做了一个奇怪的观察，可能很有趣：

更改extends-url

```
extends = http://dist.plone.org/release/4.2/versions.cfg 
```

至

```
extends = http://dist.plone.org/release/4-latest/versions.cfg 
```

会让构建运行没有任何错误（为什么？）

对于您的情况，可能是一个更快的解决方案，但 Martijn 的答案当然是实现可复制的、受控的开发环境的方法。

# algorithm - 动态时间规整相似度百分比

> ID：14910171
> 
> 赞同：1
> 
> 时间：2013-02-16T12:14:46.060
> 
> 标签：algorithm, math, signal-processing

我希望 DTW 算法输出 2 个值数组之间的相似性百分比。我想要 0% 表示信号之间没有相似性，而 100% 表示两个信号相同。我想到的修改是 100% 将是从矩阵开始到结束的最短路径，而 0% 将是一直向右然后一直向上 (m+n) 的路径。我想映射到这个区间的值是 DTW 算法生成的路径的长度。这会产生准确的结果，还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:35:37.793

仔细研究算法后发现，最小代价路径总是在矩阵的对角线上。这意味着我上面建议的用于计算相似性百分比的修改将不起作用。

# php - 读取会话变量以写入数据库

> ID：14910175
> 
> 赞同：0
> 
> 时间：2013-02-16T12:15:29.627
> 
> 标签：php, jquery, mysql, session

如果有人能帮我解决这个问题，我会非常感激 - 我几乎让它工作了！

基本上，我正在制作自己的应用程序想法一段时间，我这样做的原因是因为我是编码新手，所以我觉得它会教我很多关于不同元素的知识（即添加、更新和删除记录）。

所以在这个例子中，我有一个用户成功登录，它正在创建一个会话，该会话正在通过其他表单传递。我希望他们能够添加一笔交易——我几乎已经完成了，但似乎在其中一个部分挣扎。

我的 HTML 代码是：

```
<!DOCTYPE html>
<html>
<head>
<title>Find A Deal</title>
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<link rel="stylesheet" href="http://localhost/findadeal/themes/deal.css" />
<style>
    #login-button {
        margin-top: 30px;
    }        
</style>
<script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>    
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script src="js/custom3.js"></script>
<script src="js/custom4.js"></script>

       <?php
    if( !isset( $_SESSION ) ){
     session_start();
        }

    if( isset( $_SESSION['username'] ) ){
      /* User is logged in */
      echo "IT WORKS!";
        } ?>

</head>

<body>
<div data-role="page" id="login">
    <div data-theme="a" data-role="header">
        <h3>Find A Deal</h3>
    </div>

    <div data-role="content">

        <label for="username">Enter your username:</label>
        <input type="text" value="" name="username" id="username"/>
        <label for="password">Enter your password:</label>
        <input type="password" value="" name="password" id="password"/>  
        <a data-role="button" id="login-button" data-theme="b">Login</a>
    </div>

    <div data-theme="a" data-role="footer" data-position="fixed">

    </div>
</div>

<!--Newly rendered page after successful login!-->

<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
        <h2>Find A Deal</h2>
    </div>

    <div data-role="content">

           <?php
    if( !isset( $_SESSION ) ){
     session_start();
        }

    if( isset( $_SESSION['username'] ) ){
      echo "IT WORKS!";
        } ?>

    <h3></h3>
    <a href="#view" data-role="button" data-icon="search">View Deals</a>
    <a href="#add" data-role="button" data-icon="plus">Add Deals</a>

    </div>
</div>

<!--View Deal Page-->

    <div data-role="page" id="view">
    <div data-role="header">
        <h2>Find A Deal</h2>
    </div>

    <div data-role="content">

           <?php
    if( !isset( $_SESSION ) ){
     session_start();
        }

    if( isset( $_SESSION['username'] ) ){
      echo "IT WORKS!";
        } ?>

    <h3></h3>
    <p>test so I know I'm onto a new page</p>
    <a href="#view" data-role="button" data-icon="search">View Deals</a>
    <a href="#add" data-role="button" data-icon="plus">Add Deals</a>
    </div>

<div data-role="footer">

</div>
</div>

<!--Add Deal Page-->

    <div data-role="page" id="add">
    <script src="js/custom4.js"></script>
    <div data-role="header">
        <h2>Find A Deal</h2>
    </div>

    <div data-role="content">

           <?php
    if( !isset( $_SESSION ) ){
     session_start();
        }

    if( isset( $_SESSION['username'] ) ){
        echo "It's working!";
        } ?>

    <label for="name">Deal Name:</label>
        <input type="text" value="" name="name" id="name"/>
        <label for="desc">Description</label>
        <input type="text" value="" name="desc" id="desc"/>  
        <a data-role="button" id="submit-button" data-theme="b">Submit</a>
    </div>

</div>
</body>
</html> 
```

所以只是为了解释一下 - 第一页是登录页面，它会将您带到索引旁边，这只是我设置的菜单页面，然后您可以从菜单中选择 2 个页面中的 1 个 - 查看交易并添加交易。我正在处理附加交易。

添加交易时，用户在相关文本框中输入交易名称和描述，以便将其添加到数据库中。我正在使用这个 JS 函数：

```
//Adding a new deal

$(document).on('pagebeforeshow', '#add', function(){ 
 $('#submit-button').on('click', function(){
    if($('#name').val().length > 0 && $('#desc').val().length > 0){
        userObject.name = $('#name').val(); // Put username into the object
        userObject.desc = $('#desc').val(); // Put password into the object
        // Convert an userObject to a JSON string representation
        var outputJSON = JSON.stringify(userObject);
        // Send data to server through ajax call
        // action is functionality we want to call and outputJSON is our data
        ajax.sendRequest({action : 'add', outputJSON : outputJSON});
    } else {
        alert('Please fill all nececery fields');
    }
 });    
});

$(document).on('pagebeforeshow', '#index', function(){ 
if(userObject.name.length == 0){ // If username is not set (lets say after force page refresh) get us back to the login page
    $.mobile.changePage( "#add", { transition: "slide"} ); // In case result is true change page to Index  
}
$(this).find('[data-role="content"] h3').append('Deal Added:' + userObject.name); // Change header with added message
//$("#index").trigger('pagecreate');
});

// This will be an ajax function set
var ajax = {
sendRequest:function(save_data){
    $.ajax({url: 'http://localhost/findadeal/login/json3.php',
        data: save_data,
        async: true,
        beforeSend: function() {
            // This callback function will trigger before data is sent
            $.mobile.showPageLoadingMsg(true); // This will show ajax spinner
        },
        complete: function() {
            // This callback function will trigger on data sent/received complete
            $.mobile.hidePageLoadingMsg(); // This will hide ajax spinner
        },
        success: function (result) {
            if(result == "true") {
                $.mobile.changePage( "#index", { transition: "slide"} ); // In case result is true change page to Index
            } else {
                alert('Deal Addition has been unsuccessful, please try again!'); // In case result is false throw an error
            }
            // This callback function will trigger on successful action
        },
        error: function (request,error) {
            // This callback function will trigger on unsuccessful action                
            alert('Error has occurred, please try again!');
        }
    });
}
}

// We will use this object to store username and password before we serialize it and send to server. This part can be done in numerous ways but I like this approach because it is simple
var userObject = {
name : "",
desc : ""
} 
```

然后将其馈送到 PHP 文件，准备将输入写入数据库，如下所示：

```
<?php

$var1 = $_REQUEST['action']; // We dont need action for this tutorial, but in a complex code you need a way to determine ajax action nature
$jsonObject = json_decode($_REQUEST['utputJSON']); // Decode JSON object into readable PHP object

$name = $jsonObject->{'name'}; // Get name from object
$desc = $jsonObject->{'desc'}; // Get desc from object

mysql_connect("localhost","root","");  // Conect to mysql, first parameter is location, second is mysql username and a third one is a mysql password
@mysql_select_db("findadeal") or die( "Unable to select database"); // Connect to database called test

$query = "INSERT INTO deal (dname, description) VALUES ('$name' ,'$desc')";
$result=mysql_query($query);
$num = mysql_numrows($result);

if($num != 0) {

    echo "true";

} else {

    echo "false"; 

}
?> 
```

这一切正常，但是，数据没有插入数据库的原因是它需要用户的 ID，用户名存储在会话变量中。

我想要帮助的是：

**1.**有人能告诉我你是如何从会话变量中获取数据并将其带到 PHP 文件中的吗？ **2.**此外，会话变量正在存储用户名 - 有没有办法我可以自行检查其相关的用户 ID 标记，或者这必须通过 PHP 文件中的 SQL 语句来完成。

我希望我没有引起任何混乱，并且我已经让自己清楚我遇到了什么麻烦。我是一名学生，因此在学习过程中将不胜感激所有帮助！我在思考会话数据应该像其他数据一样通过 javascript 函数还是应该能够直接读取到写入的 PHP 文件或什么？=/

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:35:02.247

如果我理解得很好，你现在更感兴趣的是学习东西而不是创建应用程序。我建议您尝试在单独的测试文件中一次学习一件事，当您获得必要的知识后，将所有知识结合到一个应用程序中，将您学到的所有内容应用于现实生活中的测试。

我是一名教练，培养了很多学生，帮助他们实现了一些他们可以引以为豪的产品，所以如果你有兴趣一一学习，我想我可以帮助你，如果你愿意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:37:33.987

如果我的逻辑正确，则必须执行以下操作：

在您的登录 HTML/PHP 页面上，以：

```
<?php
    if( !isset( $_SESSION ) ){ session_start(); }
?>
THE REST OF YOUR CODE FOLLOWS HERE 
```

在您的登录操作 PHP 脚本中，再次：

```
<?php
    if( !isset( $_SESSION ) ){ session_start(); }
    // now you look up your user - how ever you do this...
    // might be something like this...
    // this is not a real function it should just demonstrate
    // the possible logic.
    if(!isset($_SESSION['userid'])) {
        // you just have to check in case no session userid is set:
        function getUser( $username, $password ) {
            $db = new PDO("mysql:host=".DBHOST.";dbname=".DBNAME, DBUSER, DBPASS);
            $sql = 'SELECT id FROM users WHERE username=:username AND pwd=:pwd';
            $statement = $db->prepare($sql);
            $statement->bindParam(':username', $username, PDO::PARAM_STR);
            $statement->bindParam(':pwd', $password, PDO::PARAM_STR);
            $statement->execute();
            $result = $statement->fetch(PDO::FETCH_ASSOC);
            if(!empty($result)) {
                return $result['id'];
            }
            return false;
        }
        // call your login logic (here getUser) and 
        // if you have a result, set the session...
        $userExists = getUser($_POST['user'], $_POST['pwd']);
        if($userExists) {
            $_SESSION['userid'] = $userExists;
        }
    }
?> 
```

在交易动作中，再次：

```
<?php
    if( !isset( $_SESSION ) ){ session_start(); }
    // you check if the username session exists
    if(isset($_SESSION['userid'])) {
        // in case you have...
        // proceed with your deal logic
        // and use $_SESSION['userid'] to fill it to the DB
    }
?> 
```

# c++ - 如何以十六进制格式发送 Winsock 响应？

> ID：14910181
> 
> 赞同：0
> 
> 时间：2013-02-16T12:16:28.393
> 
> 标签：c++, request, winsock

我正在尝试使用以下代码发送响应：

```
//s is  Accepted Client 

char* buf = "0x11";      
send(s, buf, 8, 0); 
```

我有一些文件说明：

> 对于每个传入的数据包，服务器必须接收确认字节（表示该数据包已成功接收）：`0x11`

我是系统编程的新手（我是一名网络开发人员）；你能帮我理解如何发送一个字节包吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T12:20:06.227

> 对于每个传入的数据包，服务器必须接收确认字节（表示该数据包已成功接收）：0x11

您可能只需要发送一个字节：

```
char byte = 0x11;
send(s, &byte, 1, 0); 
```

或作为一个班轮：

```
send(s, "\x11", 1, 0); 
```

# django - 如果我不想打电话给 clean_ () 方法，我能做到吗？

> ID：14910182
> 
> 赞同：0
> 
> 时间：2013-02-16T12:16:33.003
> 
> 标签：django, python-2.7, django-forms, django-1.4, django-validation

Django：如果我不想调用 clean_() 方法，我可以这样做吗？

```
class myForm(forms.Form):
    userId = forms.CharField(max_length=30, required=False,)
    email = forms.EmailField(required=False,)

    def clean_userId(self):
        if 'userId' in self.cleaned_data:
            if not re.search(r'^\w+$', self.cleaned_data['userId']):
                raise forms.ValidationError('Invalid ID')
            try:
                User.objects.get(username=self.cleaned_data['userId'])
            except ObjectDoesNotExist:
                return self.cleaned_data['userId']
            raise raise forms.ValidationError('Invalid ID')
        else:
            raise raise forms.ValidationError('Invalid ID') 
```

有时，我想使用表单验证来仅验证“电子邮件”字段。

如下所示：

```
>>> form = myForm({'email':'abc@com'})
>>> form.cleaned_data['email']
Traceback (most recent call last):
  File "<console>", line 1, in <module>
AttributeError: 'myForm' object has no attribute 'cleaned_data'
>>> print form.errors
<ul class="errorlist"><li>workers<ul class="errorlist"><li>Invalid ID</li></ul> 
```

有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:26:26.757

您可以尝试以下方法：

```
form = myForm({'email':'abc@com'})
try:
    form.clean_email()
except forms.ValidationError:
    #do whatever
else:
    #do whatever 
```

`is_valid()`将调用`clean`所有内容，因此只需调用`clean`您想要的任何方法。

您也可以只有两种不同的形式或从另一个继承的形式，这将是更好的 IMO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:25:43.100

您不需要定义，`clean_userId()`或者`clean_email()`，只需定义`clean()`，在 Form 的那个方法中做所有事情。

```
class MyForm(forms.Form):
    # fields

    def clean(self):
        cleaned_data = super(MyForm, self).clean()
        email = cleaned_data.get('email')

        # do some validation

        return cleaned_data 
```

在访问之前`cleaned_data`，记得打电话`form.is_valid()`。

# asp.net - HTTP 错误 403.14 - 在 Windows 7 上禁止使用 Visual Studio 12 创建 Web 服务

> ID：14910184
> 
> 赞同：1
> 
> 时间：2013-02-16T12:16:43.410
> 
> 标签：asp.net, .net, http, windows-7, iis-7.5

嗨，我想创建一个示例 Web 服务，我是新手，但是当我运行我的 Web 服务程序时，我收到以下错误。其他详细信息如下 -

我的 AssemblyInfo.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

namespace MyFirstWebService
{
    /// <summary>
    /// Summary description for Service1
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line.
    // [System.Web.Script.Services.ScriptService]
    public class Service1 : System.Web.Services.WebService
    {
        [WebMethod]
        public string simpleMethod(String srt)
        {
            return "Hello " + srt;
        }

        [WebMethod]
        public int anotherSimpleMethod(int firstNum, int secondNum)
        {
            return firstNum + secondNum;
        }

    }
} 
```

当我运行这个时，我得到

![在此处输入图像描述](../Images/6b9f5fc1d7123689fd5d0310078b3c0a.png)

下面是我的 Windows 功能和服务的快照——

![在此处输入图像描述](../Images/6c9f00acdf85157af2e47423349b5012.png)

我的 IIS 设置如下：

![在此处输入图像描述](../Images/de553f161bca4a1bbf193aa5ea9fb311.png)

我在我的 cmd **%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -ir上运行了以下命令**

请告诉我如何摆脱这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:08:16.287

似乎“默认文档”（default.aspx、default.asp、index.htm 等）在您的 Web 应用程序中不可用。因此，未启用“目录浏览”错误。尝试打开 Web 服务的 URL，例如 http://localhost:[port]/webservicename.aspx

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T03:07:35.057

旁注，确保您有正确的启动项目集（自从我调试.net 以来很长时间：p）

# java - 创建多个子类对象

> ID：14910185
> 
> 赞同：0
> 
> 时间：2013-02-16T12:16:48.343
> 
> 标签：java, object, methods, for-loop, subclass

我试图通过 for 循环来实现敌人的“浪潮”。基本上，当一个波对象被调用时，它接受一个设置波中敌人数量的 int。每个敌人都有自己的类，它是“敌人”的子类。我坚持的是如何在波构造函数中传递第二个参数来设置创建哪个敌人子类，例如在一种方法中创建了 25 个“兽人”或 13 个“巨魔”。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:33:00.970

听起来您想创建一个 Enemy 类的静态工厂方法，该方法根据参数创建新的 Enemy 对象。就像是：

```
// EnemyType is an enum
public static Enemy createEnemy(EnemyType enemyType) {
   switch (enemyType) {
     case BASIC_MONSTER:
       return new BasicMonster();
     case ORC:
       return new Orc();
     case TROLL:
       return new Troll();
     case ..... // etc...
   }
} 
```

请注意，我会为参数使用更简洁的东西，例如枚举，而不是 int，以确保传入的参数是正确的。否则，您可能会传入一个无意义的 int，例如 -24232。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:43:01.750

您可以使用枚举

```
public enum EnemyType {
  ORC{
   @override
   public Enemy create() {
    return new Orc();
   }
  },
  TROLL{
   @override
   public Enemy create() {
    return new Troll();
   }
  }...etc;

  public abstract Enemy create();
} 
```

然后将相关的枚举传递给您的 wave 方法：

```
public Collection<Enemy> createWave(final int num, final EnemyType enemyType) {
 final Collection<Enemy> enemies = new ArrayList<>(num);
 for(int i=0;i<num;i++) {
  enemies.put(enemyType.create());
 }
 return enemies;
} 
```

如果您有很多不同的敌人类型，请考虑使用通用工厂

```
public interface EmemyFactory<E extends Enemy> {
 E create();
} 
```

然后为每种敌人类型创建一个实现并将它们存储在枚举中

```
public enum EnemyType {
  ORC(new OrcFactory()),
  TROLL(new TrollFactory()),
  ...etc;

  private final EnemyFactory enemyFactory;
  public EnemyType(final EnemyFactory enemyFactory) {
   this.enemyFactory = enemyFactory;
  }

  public Enemy create() {
   return enemyFactory.create();
  }
} 
```

最后，假设你的 Enemies 有一个 noargs 构造函数，你可以使用一点反射：

```
public Collection<Enemy> createWave(final int num, final Class<? extends Enemy> enemyClass) {
 final Collection<Enemy> enemies = new ArrayList<>(num);
 for(int i=0;i<num;i++) {
  enemies.put(enemyClass.newInstance());
 }
 return enemies;
} 
```

然而，这很混乱并且容易出现运行时错误......

# mysql - 警告：mysqli_set_charset() 需要 2 个参数，1 个给定

> ID：14910188
> 
> 赞同：0
> 
> 时间：2013-02-16T12:17:00.347
> 
> 标签：mysql, mysqli

我曾经使用 Mysql 制作我的 php 脚本，现在我想将此脚本切换到 Mysqli，而我在将所有 Mysql 代码更改为 Mysqli 时遇到了麻烦。

如何解决这个问题呢？将名称设置为 UTF8 的功能不起作用。它说 ：

> 警告：mysqli_set_charset() 需要 2 个参数，1 个给定

我在这里缺少的第二个参数是什么？

这是我正在使用的课程

```
class Database {
    private $dbhost, $dbuser, $dbpass, $dbname;

    public function __construct($host,$user, $pass,$name){
        $this->dbhost = $host;
        $this->dbuser = $user;
        $this->dbpass = $pass;
        $this->name   = $dbname;
    }   

    public function Connect (){
        mysqli_connect ($this->dbhost,$this->dbuser,$this->dbpass,$this->dbname)
            OR die (mysqli_error());
    }

    public function SetNamesUTF8($unicode){
        mysqli_set_charset($unicode);
    }
}

$Database = new Database('localhost','root','root','schoolmanager');
$Database -> Connect(); 
$Database -> SetNamesUTF8('UTF8'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:25:29.833

这是您必须使用的课程（至少）

```
class Database {
    private $conn;

    public function __construct($host, $user, $pass, $name, $charset) {
    @$this->conn = mysqli_connect($host, $user, $pass, $name);
        if ( !$this->conn )
        {
            trigger_error(mysqli_connect_errno()." ".mysqli_connect_error());
        }
        mysqli_set_charset($this->conn, $charset) 
            or trigger_error(mysqli_error($this->conn));
    }   
}
$db = new Database('localhost','root','root','schoolmanager', 'utf8'); 
```

修复了一些错误：

*   更短的代码
*   没有死
*   连接错误已更正

对于示例，您可以查看我的[safmysql 类](https://github.com/colshrapnel/safemysql/blob/master/safemysql.class.php)，包括 mysqli 类的创建和使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:19:45.480

第一个参数应该是：

> mysqli_connect() 或 mysqli_init() 返回的链接标识符

根据[文档](http://php.net/manual/en/mysqli.set-charset.php)

因此，您需要存储 mysqli_connect 的返回值，并在那里使用它。第二个参数是你已经使用过的字符集标识符字符串。您将需要很多次，因为它会识别打开的连接。你可以这样做：

```
class Database {
    private $dbhost, $dbuser, $dbpass, $dbname, $link;

    public function __construct($host,$user, $pass,$name){
        $this->dbhost = $host;
        $this->dbuser = $user;
        $this->dbpass = $pass;
        $this->name   = $dbname;
    }   

    public function Connect (){
        $this->link = mysqli_connect ($this->dbhost,$this->dbuser,$this->dbpass,$this->dbname)
            OR die (mysqli_error());
    }

    public function SetNamesUTF8($unicode){
        mysqli_set_charset($this->link, $unicode);
    }
} 
```

显然，您需要先调用 Connect，然后才能调用其他方法。考虑为此添加错误处理。

您还可以考虑按照链接文档页面的建议切换到面向对象的 API，我认为这会让您的生活更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:19:56.960

它期待一个链接，根据[http://php.net/manual/en/mysqli.set-charset.php](http://php.net/manual/en/mysqli.set-charset.php) ...

> bool mysqli_set_charset ( mysqli $link , string $charset )

```
class Database {
    private $dbhost, $dbuser, $dbpass, $dbname, $link;

    public function __construct($host,$user, $pass,$name){
        $this->dbhost = $host;
        $this->dbuser = $user;
        $this->dbpass = $pass;
        $this->name   = $dbname;
    }   

    public function Connect (){
        $link = mysqli_connect ($this->dbhost,$this->dbuser,$this->dbpass,$this->dbname)
            OR die (mysqli_error());
    }

    public function SetNamesUTF8($unicode){
        mysqli_set_charset($link, $unicode);
    }
}

$Database = new Database('localhost','root','root','schoolmanager');
$Database -> Connect(); 
$Database -> SetNamesUTF8('UTF8'); 
```

# asp.net-mvc - 为什么我们需要在 web.config 中注册提供者？

> ID：14910190
> 
> 赞同：0
> 
> 时间：2013-02-16T12:17:09.463
> 
> 标签：asp.net-mvc, membership-provider

使用 Asp.net MVC 时。为什么我们需要在 web.config 文件中注册会员提供者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:21:14.747

成员资格提供程序提供 Microsoft ASP.NET 的成员资格服务和成员资格数据源之间的接口。

会员提供者的基本工作是管理有关网站注册用户的数据，并提供创建用户、删除用户、验证登录凭据、更改密码等方法。Microsoft .NET Framework 的 System.Web.Security 命名空间包括一个名为 MembershipUser 的类，它定义了成员资格用户的基本属性，并且成员资格提供程序用来表示单个用户。

您将在此处获得更多[信息](http://msdn.microsoft.com/en-us/library/aa478949.aspx)

谢谢

# hibernate - 在 JSP 中格式化和解析基于 Joda-Time 的日期和时间对象

> ID：14910194
> 
> 赞同：1
> 
> 时间：2013-02-16T12:17:36.453
> 
> 标签：hibernate, jsp, jstl, jodatime

我正在使用[joda-time-jsptags-1.1.1](http://sourceforge.net/projects/joda-time/files/joda-time-jsptags/1.1.1/)使用以下标记库在 JSP 页面上格式化和解析基于[Joda-Time](http://www.joda.org/joda-time/)的日期和时间对象。

```
<%@taglib prefix="joda" uri="http://www.joda.org/joda/time/tags" %> 
```

我在 Oracle 数据库中有日期，这些日期使用标准 UTC 格式存储。

使用以下 JSTL 标记，

```
<c:set var="startDate" value="${row.discountStartDate}"/>
<c:set var="endDate" value="${row.discountEndDate}"/> 
```

这两个日期分别以以下格式显示。

```
2013-02-16T22:31:59.000+05:30 
2013-02-28T22:32:03.000+05:30 
```

我需要使用特定时区以特定格式显示这些日期。我正在尝试按如下方式解析这些日期。

```
<joda:parseDateTime var="startDate"
                    pattern="dd-MMM-yyyy HH:mm:ss"
                    value="${row.discountStartDate}"
                    dateTimeZone="Asia/Kolkata"/>

<joda:parseDateTime var="endDate"
                    pattern="dd-MMM-yyyy HH:mm:ss"
                    value="${row.discountStartDate}"
                    dateTimeZone="Asia/Kolkata"/> 
```

我希望以给定的格式和区域解析这些日期。但是，我遇到了以下异常。

> java.lang.IllegalArgumentException：无效格式：“2013-02-16T22:31:59.000+05:30”在“13-02-16T22:31:59.000+05:30”格式错误

如何解析这些日期

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T16:26:25.970

在这个例子中，`row.discountStartDate`通过Hibernate 返回的日期显然是.`row.discountEndDate`[`org.joda.time.DateTime`](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)

这些属性[`org.jadira.usertype.dateandtime.joda.PersistentDateTime`](http://jadira.sourceforge.net/apidocs/org/jadira/usertype/dateandtime/joda/PersistentDateTime.html)在各自的实体类中指定，例如，

```
@Column(name = "DISCOUNT_START_DATE")
@Type(type="org.jadira.usertype.dateandtime.joda.PersistentDateTime")
private DateTime discountStartDate;

@Column(name = "DISCOUNT_END_DATE")    
@Type(type="org.jadira.usertype.dateandtime.joda.PersistentDateTime")
private DateTime discountEndDate; 
```

因此，无需再次解析这些日期。我只需要用给定的格式和时区格式化这些日期，如下所示。

```
<joda:format var="startDate"
             value="${row.discountStartDate}"
             pattern="dd-MMM-yyyy HH:mm:ss"
             style="F-"
             dateTimeZone="Asia/Kolkata"/>

<joda:format var="endDate"
             value="${row.discountEndDate}"
             pattern="dd-MMM-yyyy HH:mm:ss"
             style="F-"
             dateTimeZone="Asia/Kolkata"/> 
```

格式标签的 value 属性必须是 type[`ReadableInstant`](http://joda-time.sourceforge.net/apidocs/org/joda/time/ReadableInstant.html)或[`ReadablePartial`](http://joda-time.sourceforge.net/apidocs/org/joda/time/ReadablePartial.html)

`style`属性是用于解析的样式。它指定两个字符，一个代表日期，一个代表时间。

```
S = Short
M = Medium
L = Long
F = Full
- = None 
```

[http://joda-time.sourceforge.net/contrib/jsptags/userguide.html](http://joda-time.sourceforge.net/contrib/jsptags/userguide.html)

# php - php jquery弹出消息框在while循环中工作

> ID：14910195
> 
> 赞同：1
> 
> 时间：2013-02-16T12:17:37.643
> 
> 标签：php, jquery, mysql

php jquery弹出消息框在while循环中工作，但在弹出地址字段中显示所有条目的相同地址，任何人都可以告诉我我在哪里做错了提前谢谢

Html Jquery 脚本

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#button').click(function(e) { 
            $('#modal').reveal({ 
                animation: 'fade',                   
                animationspeed: 600,                       
                closeonbackgroundclick: true,              
                dismissmodalclass: 'close'   
            });
        return false;
        });
    });
</script> 
```

**Html 表格和 PHP 页面**

```
<table>
$query1=mysql_query("select * from customers order by id desc");
while($row1=mysql_fetch_array($result))
{
?>
<tr>
<td><div align="center"><?php echo $row1['firstname']; ?></div></td>
<td><div align="center"><?php echo $row1['lastname']; ?></div></td>
<td><div align="center"><?php echo $row1['dob']; ?></div></td>
<td><div align="center"><?php echo $row1['email']; ?></div></td>
<td><div align="center"><a href="#" class="button">Address</a></div></td>
<td><div align="center"><?php echo $row1['phone']; ?></div></td>
<td><div align="center"><?php echo $row1['country']; ?></div></td>
<td><div align="center"><?php echo $row1['city']; ?></div></td>
</tr>

<Popup Start> 

<div id="modal">
<div id="heading">
Sign Up! Customer's Address
</div>
<div id="content">
<p><?php echo $row1['address']; ?></p>
</div>
</div>

<Popup End>

<?php }?>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:26:34.683

在 HTML 中

将此行更改为：

```
<td><div align="center"><a href="#" id="button">Address</a></div></td> 
```

这个：

```
<td><div align="center"><a href="#" class="button">Address</a></div></td> 
```

&

将此行更改为：

```
<div id="modal"> 
```

这个：

```
<div class="modal"> 
```

Javascript：

```
$('.button').click(function(e) { 

            $(this).closest('tr').find('.modal:first').reveal({ 
                animation: 'fade',                   
                animationspeed: 600,                       
                closeonbackgroundclick: true,              
                dismissmodalclass: 'close'   
            });
        return false;
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:19:43.610

尝试为这样的所有按钮提供唯一的 id

```
<td><div align="center"><a href="#" id="button_<?php echo $row1['id'];?>">
    Address</a>
</div></td> 
```

然后根据该按钮的 id 值应用弹出按钮单击，并像这样编辑您的 jquery

```
<script type="text/javascript">
$(document).ready(function() {
    $("input[id^='button']").click(function(e) { 
        $('#modal').reveal({ 
            animation: 'fade',                   
            animationspeed: 600,                       
            closeonbackgroundclick: true,              
            dismissmodalclass: 'close'   
        });
    return false;
    });
});
</script> 
```

# javascript - 如何使用 appendChild 添加多个 div？

> ID：14910196
> 
> 赞同：46
> 
> 时间：2013-02-16T12:17:41.557
> 
> 标签：javascript, appendchild

我正在尝试使用 javascript 制作棋盘并用它创建 64 个 div。
问题是，它只创建第一个 div。
这是代码：

```
div {
    width: 50px;
    height: 50px;

    display: block;
    position: relative;
    float: left;
}

<script type="text/javascript">
    window.onload=function()
    {
        var i=0;
        var j=0;
        var d=document.createElement("div");

        for (i=1; i<=8; i++)
        {
            for (j=1; j<=8; j++)
            {
                if ((i%2!=0 && j%2==0)||(i%2==0 && j%2!=0))
                {
                    document.body.appendChild(d);
                    d.className="black";
                }
                else
                {
                    document.body.appendChild(d);
                    d.className="white";
                }
            }
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-16T12:29:28.707

正如 tj-crowder 所指出的，OP 的代码只创建一个 div。但是，对于谷歌人来说，有一种方法可以在 DOM 中附加多个元素和一个元素`appendChild`：通过创建一个[`documentFragment`](https://developer.mozilla.org/en-US/docs/DOM/document.createDocumentFragment).

```
function createDiv(text) {
  var div = document.createElement("div");
  div.appendChild(document.createTextNode(text));
  return div;
}

var divs = [
  createDiv("foo"),
  createDiv("bar"),
  createDiv("baz")
];

var docFrag = document.createDocumentFragment();
for(var i = 0; i < divs.length; i++) {
  docFrag.appendChild(divs[i]); // Note that this does NOT go to the DOM
}

document.body.appendChild(docFrag); // Appends all divs at once 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-16T12:19:37.460

> 问题是，它只创建第一个 div。

对，因为您只创建了一个`div`. 如果要创建多个，则必须调用`createElement`多次。移动你的

```
d=document.createElement("div"); 
```

*进入*循环`j`。_

如果你调用`appendChild`传入一个已经在 DOM 中的元素，它会被*移动*，而不是复制。

```
window.onload=function()
    {
        var i=0;
        var j=0;

        for (i=1; i<=8; i++)
        {
            for (j=1; j<=8; j++)
            {
                if ((i%2!=0 && j%2==0)||(i%2==0 && j%2!=0))
                {
                    var d=document.createElement("div");
                    document.body.appendChild(d);
                    d.className="black";
                }
                else
                {
                    var d=document.createElement("div");
                    document.body.appendChild(d);
                    d.className="white";
                }
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-11-03T22:45:27.390

虽然 TJ Crowder 写的东西很好，但我建议使用 documentFragment 将它重写为下面的代码，就像 Renato Zannon 建议的那样。这样你就只会写入 DOM 一次。

```
 window.onload = function() {
        var count = 5,
            div,
            board = document.getElementById('board'),
            fragment = document.createDocumentFragment();

        // rows
        for (var i = 0; i < count; ++i) { 

            // columns
            for (var j = 0; j < count; ++j) { 
                div = document.createElement('div');
                div.className = (i % 2 != 0 && j % 2 == 0) || (i % 2 == 0 && j % 2 != 0) ? 'black' : 'white';
                fragment.appendChild(div);
            }
        }

        board.appendChild(fragment);
    };
```

```
#board {
  background-color: #ccc;
  height: 510px;
  padding: 1px;
  width: 510px;
}

.black,
.white {
    float: left;
    height: 100px;
    margin: 1px;
    width: 100px;
}

.black {
  background-color: #333;
}

.white {
  background-color: #efefef;
}
```

```
<div id="board"></div>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-29T11:22:30.580

```
function crt_dv(){
dv=document.createElement('div'),document.body.appendChild(dv)
};

crt_dv(),dv.className='white';crt_dv(),dv.className='black'; 
```

也可以使用：for(i=0;i<2;i++)

# excel - 根据某些单元格值合并一些单元格

> ID：14910197
> 
> 赞同：2
> 
> 时间：2013-02-16T12:17:50.370
> 
> 标签：vba, excel, vba

所以，我想合并一些单元格，我想这样做：

![在此处输入图像描述](../Images/8a0821574c929ad94236bf511acf16cf.png)

在上图中，我展示了我想要的那种合并。所以，如果我在单元格中输入一些文本，`B6`我想单元格范围`C6:F9`并被`G6:K9`合并。如果`B10`比`C10:F13`和`G10:K13`。等等 ...

此外，这些合并单元格中的文本应该被换行。

当我输入代码时，我会在这个合并的单元格中自动生成文本。该文本将很大，需要包装。

我用公式尝试了很多东西，寻找可以帮助我的东西。我知道使用[vba](/questions/tagged/vba "显示标记为“vba”的问题")代码我可以做到这一点，但我不喜欢 VBA 编程/代码/...！

如果有人可以帮助我，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:41:16.393

*   右键单击您的工作表选项卡
*   `View Code`
*   复制并粘贴下面的代码

此代码将仅对 B 列中每第四个更改的单元格运行合并，从`B2`

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim rng1 As Range
Dim rng2 As Range
Set rng1 = Intersect(Target, Range("B:B"))
If rng1 Is Nothing Then Exit Sub
With Application
.EnableEvents = False
.ScreenUpdating = False
End With
For Each rng2 In rng1
'If rng2.Row > 1 Then
If (rng2.Row - 2) Mod 4 = 0 Then
With rng2.Offset(0, 1).Resize(4, 4).Cells
.MergeCells = True
.WrapText = True
End With
End If
'End If
Next
With Application
.EnableEvents = True
.ScreenUpdating = True
End With
End Sub 
```

# c++ - 默认析构函数有什么作用吗？

> ID：14910198
> 
> 赞同：2
> 
> 时间：2013-02-16T12:17:58.887
> 
> 标签：c++, destructor

我想知道默认类析构函数在被调用时是否真的做任何事情。

我一直在研究它，我发现如果我用一个调用它自己的析构函数的函数创建一个类，它根本不会做任何事情（即所有变量保持不变，实例仍然存在并且可用）。

这是否意味着可以将类析构函数视为所有类都具有的继承虚函数，并且可以重新定义它（删除指针等并清除成员变量）但是如果不重新定义它会做什么都没有？

如果是这样，析构函数不能本质上用作“清除所有数据”类型的函数，并通过清除动态内存分配的变量并重新使用它而不是让计算机找到新的变量来提高代码的某些部分的效率吗？堆上的内存块？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:34:48.563

> 我一直在研究它，我发现如果我用一个调用它自己的析构函数的函数创建一个类，它根本不会做任何事情（即所有变量保持不变，实例仍然存在并且可用）。

考虑这段代码：

```
#include <iostream>

struct A
{
    ~A()
    {
        std::cout << "A::~A" << std::endl;
    }
};

struct B
{
    A a;
};

int main()
{
    B b;
    std::cout << "Calling b.~B()" << std::endl;
    b.~B();
    std::cout << "Done" << std::endl;
} 
```

[你会看到](http://ideone.com/8fxvWQ)调用`B`的默认析构函数调用了`A`析构函数，因为`B`它包含一个`A`：

```
Calling b.~B()
A::~A
Done
A::~A 
```

只有当`b`超出范围时，堆栈才会展开并`B::~B()`调用综合，反过来，`A::~A()`在它们的内存被释放之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T12:24:49.543

*   默认构造函数调用所有成员变量的默认构造函数，不包括原始类型（char、int、指针）。
*   析构函数可以显式调用，但并不意味着对象的析构。如果对象在堆栈上，那么它不可能对它做任何事情。
*   默认情况下，析构函数不是虚拟的，但如果您打算从类继承，它们确实应该是虚拟的。
*   如果对象被释放（超出范围，从堆中删除，或封闭对象以任何方式被销毁），则将调用 desctuctor。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T12:30:51.470

除了 Notinlist 的回答：

默认构造函数调用你的基类的构造函数。

> 如果是这样，析构函数不能本质上用作“清除所有数据”类型的函数，并通过清除动态内存分配的变量并重新使用它而不是让计算机找到新的变量来提高代码的某些部分的效率吗？堆上的内存块？

你有点描述一个内存池。如果您愿意，您的对象可能会获取内存缓冲区并将其返回到您发明的某个池系统/从该池系统返回。但在大多数情况下，分配足够快且频率足够低，以至于人们（不再）这样做了。并不是说它们不常见，但它们需要发生*很多*事情才能注意到对性能的影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T12:51:58.590

手动调用析构函数通常是个坏主意。[关于析构函数](http://www.parashift.com/c++-faq/dtors.html)的 C++ FAQ 部分有很多关于这方面的好信息。

如果您确实想明确地销毁一个对象，您可以使用额外的作用域来安全地调用析构函数（请参阅此 FAQ[条目](http://www.parashift.com/c++-faq/artificial-block-to-control-lifetimes.html)）。此方法还可以防止您使用已销毁的对象实例。尽管该实例似乎可用，但实际上并非如此。

如果您的意图是释放类实例所拥有的一些资源，但不是全部，您可以尝试两件事：

*   在类上定义一个`clear()`（或类似的）方法。
*   确保在`clear()`调用后保持类的不变量。

假设您最初手动调用析构函数的方法有效，或者您选择执行与上述`clear()`方法类似的操作，在这两种情况下，您以后都可能遇到问题。

在 C++ 中，一种很好理解且经常实践的资源管理方法是 Resource Acquisition Is Initialization（通常缩写为 RAII，但如果名称混淆，请忽略该名称，这个概念是可以理解的）。有关有用信息，请参阅[此](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)Wikipedia 文章或此[答案](https://stackoverflow.com/questions/395123/raii-and-smart-pointers-in-c)。

这是 tl;博士虽然：

*   资源的生命周期应始终与对象的生命周期相关联。
*   对象的生命周期从构造函数完成时开始
*   对象的生命周期在析构函数完成时结束。

遵循这个习惯用法通常可以防止 C++ 资源管理问题发生。

# java - 在 Android 中计算数学函数

> ID：14910199
> 
> 赞同：0
> 
> 时间：2013-02-16T12:18:01.880
> 
> 标签：java, android, function, math

我想为自己构建一个小应用程序，以更快地完成作业。我希望用户能够输入任何函数，例如 f(x)=x ² -5x+3 或 f(x)=x ³ /(2x-2)，然后返回特定 x- 的 y 值列表价值观。对于 f(x)=x ²它看起来像这样：

*   x=-2 y=4
*   x=-1 y=1
*   x=0 y=0
*   x=1 y=1
*   x=2 y=4
*   x=3 y=9
*   x=4 y=16

等等。java的数学类中是否有任何函数可以接收数学函数和x值并输出相应的y值，还是我需要自己的某种解析器？

**编辑**

[exp4j](http://www.objecthunter.net/exp4j/index.html)似乎对我来说是正确的。这个库非常小，快速且易于使用。

# java - 在PDF上添加内容后如何避免签名无效？

> ID：14910204
> 
> 赞同：0
> 
> 时间：2013-02-16T12:18:43.273
> 
> 标签：java, pdf, pdf-generation

尝试在签名的 PDF 上添加内容，但添加内容后签名无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:13:04.800

请阅读[http://itextpdf.com/book/digitalsignatures](http://itextpdf.com/book/digitalsignatures)

正如 mkl 的评论中所解释的，您可以进行的更改取决于先前签名的 MDP 设置。明确禁止向内容流添加额外内容，但在某些情况下，您可以添加：

*   表单域
*   注释
*   额外的签名

这在上面提到的书中都有解释（我写的，你可以免费下载）。

# java - "StringValueof && To String' 和有什么区别？

> ID：14910213
> 
> 赞同：-1
> 
> 时间：2013-02-16T12:19:36.680
> 
> 标签：java

这两者有什么区别：？

```
int a=20;
System.out.print(a.toString);
System.out.print(String.valueOf(a)); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T12:21:40.613

两个区别：

1.  您的示例，即使`a.ToString`更正为`a.toString()`，也将不起作用，因为`a`它是一个`int`，而不是一个对象，因此没有方法。你必须写`new Integer(a).toString()`。而`String.valueOf`调用会自动装箱，所以它会有一个`toString`.

2.  如果`a`是一个对象引用，不同之处在于它`String.valueOf(a)`会给你`"null"`if `a`is `null`（显然它不会在你的情况下，因为它会`a`被`int`自动装箱），而`a.toString()`会抛出一个`NullPointerException`.

    我们可以`String.valueOf`在 JDK 提供的源代码中看到：

    ```
    public static String valueOf(Object obj) {
        return (obj == null) ? "null" : obj.toString();
    } 
    ```

所以：有了`String.valueOf`，原语被自动装箱，并且对象引用被`null`-guarded。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T12:23:54.927

`String.valueOf`可用于转换，其中`toString`每个对象的标准函数要么覆盖，要么从`Object`类继承以对自身进行字符串化。

# android - Android setError 与 PopupWindow 内的 EditText

> ID：14910216
> 
> 赞同：2
> 
> 时间：2013-02-16T12:19:38.537
> 
> 标签：android

```
02-16 13:06:21.702: W/dalvikvm(5138): threadid=1: thread exiting with uncaught exception (group=0x4001d560)
02-16 13:06:21.713: E/AndroidRuntime(5138): FATAL EXCEPTION: main
02-16 13:06:21.713: E/AndroidRuntime(5138): android.view.WindowManager$BadTokenException: Unable to add window -- token android.view.ViewRoot$W@405c3bd0 is not valid; is your activity running?
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.view.ViewRoot.setView(ViewRoot.java:533)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at     android.view.WindowManagerImpl.addView(WindowManagerImpl.java:200)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:114)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.widget.PopupWindow.invokePopup(PopupWindow.java:907)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.widget.PopupWindow.showAsDropDown(PopupWindow.java:819)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.widget.TextView.showError(TextView.java:3438)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.widget.TextView.setError(TextView.java:3409)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.widget.TextView.setError(TextView.java:3373)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at com.example.zoopiekuj.MenuActions$5.onClick(MenuActions.java:185)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.view.View.performClick(View.java:2538)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.view.View$PerformClick.run(View.java:9152)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.os.Handler.handleCallback(Handler.java:587)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.os.Looper.loop(Looper.java:130)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at android.app.ActivityThread.main(ActivityThread.java:3687)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at java.lang.reflect.Method.invokeNative(Native Method)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at java.lang.reflect.Method.invoke(Method.java:507)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
02-16 13:06:21.713: E/AndroidRuntime(5138):     at dalvik.system.NativeStart.main(Native Method) 
```

所以我在 PopupWindow 中有 EditText 输入，我试图通过使用一些检查来验证这个字段，然后使用 setError 方法设置错误。我得到了以上错误：/知道有什么问题吗？

```
 final float scale = context.getResources().getDisplayMetrics().density;
   int popupWidth  =  (int) (300 * scale + 0.5f);
   int popupHeight = (int) (345 * scale + 0.5f);

   LinearLayout viewGroup = (LinearLayout) context.findViewById(R.id.popupreg);
   LayoutInflater layoutInflater = (LayoutInflater) context
   .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

   layout = layoutInflater.inflate(R.layout.logregpopup, viewGroup);
       popup = new PopupWindow(context);
       popup.setContentView(layout);
       popup.setWidth(popupWidth);
       popup.setHeight(popupHeight);
       popup.setFocusable(true);
       popup.setBackgroundDrawable(new BitmapDrawable());
       popup.showAtLocation(layout, Gravity.BOTTOM,0,90);

       Button btnreg = (Button) layout.findViewById(R.id.btnregister);
       btnreg.setOnClickListener(new OnClickListener() {
             @Override
             public void onClick(View arg0) {
                 progressDialog = ProgressDialog.show(context, "Ładowanie", "poczekaj proszę !");

                 getmethod = 1;

                 int err = 0;

                 TextHelper thelper = new TextHelper();

                 EditText login     = (EditText) layout.findViewById(R.id.reglogin);
                 EditText email     = (EditText) layout.findViewById(R.id.regemail);
                 EditText pass1     = (EditText) layout.findViewById(R.id.regpass1);
                 EditText pass2     = (EditText) layout.findViewById(R.id.regpass2);

                 String l  = login.getText().toString();
                 String e  = email.getText().toString();
                 String p1 = pass1.getText().toString();
                 String p2 = pass2.getText().toString();

                 if(l.equals("") || l.length() < 3){
                     err++;
                     login.setError("Login musi mieć co najmniej 3 znaki");
                 } 
```

我可以毫无问题地从登录字段中获取文本，所以这只是 setError 的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:05:47.060

此行中的上下文是调用活动吗？

弹出=新弹出窗口（上下文）；

如果它是死/陈旧的活动或应用程序上下文，它将像这样失败。

# android - 检测图像中的黑色峰值像素（Android）？

> ID：14910219
> 
> 赞同：0
> 
> 时间：2013-02-16T12:19:55.133
> 
> 标签：android, loops, signal-processing

我目前正在做心电图分析，为了让事情变得更容易，我认为检测峰值和计算峰值到峰值的距离可能会有很大帮助。如何检测图像中的第一个/峰值黑色像素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T11:39:48.607

这是您如何做到这一点的解决方案

```
boolean pf=false,qf=false,rf=false,sf=false,tf=false;
    BitmapFactory.Options bitmapFatoryOptions=new BitmapFactory.Options();
    bitmapFatoryOptions.inPreferredConfig=Bitmap.Config.RGB_565;
    bmp =BitmapFactory.decodeResource(getResources(), R.drawable.test4,bitmapFatoryOptions);
    bmp = bmp.copy(bmp.getConfig(), true);
    int thresh = 150;
    for(int i=0;i<bmp.getWidth();i++){
        for(int j=0;j<bmp.getHeight();j++){
            int pixel = bmp.getPixel(i, j);
            int red = Color.green(pixel);
            int green = Color.red(pixel);
            int blue = Color.blue(pixel);
            if(red<thresh&&green<thresh&&blue<thresh){
                if((oldj>=j||p.x==0)&&!pf){
                    p.x=i;
                    p.y=j;

                }
                else{
                    pf=true;
                    //Toast.makeText(getApplicationContext(), "told="+oldj, Toast.LENGTH_SHORT).show();

                if(pf&&!qf&&(oldj<=j||q.x==0)){
                    q.x=i;
                    q.y=j;
                    //Toast.makeText(getApplicationContext(), "old="+oldj, Toast.LENGTH_SHORT).show();
                }
                else{
                    qf=true;
                    if(!rf&&(oldj>=j||r.x==0)){
                        r.x=i;
                        r.y=j;
                    }
                    else{
                        rf=true;
                        if(!sf&&(oldj<=j||s.x==0)){
                            s.x=i;
                            s.y=j;
                        }
                        else{
                            sf=true;
                            if(!tf&&(oldj>=j||t.x==0)){
                                t.x=i;
                                t.y=j;
                            }
                            else{
                                tf=true;
                            }
                        }
                    }
                }
                }
                oldj=j;
                oldi=i;
                break;
            }
        }
    }
    paint(p,bmp);
    paint(q,bmp);
    paint(r,bmp);
    paint(s,bmp);
    paint(t,bmp);

} 
```

# eclipse-plugin - 如何显示之前运行的 eclipse 4 rcp 应用程序

> ID：14910221
> 
> 赞同：0
> 
> 时间：2013-02-16T12:20:00.023
> 
> 标签：eclipse-plugin, eclipse-rcp, e4

到目前为止，当用户再次单击 exe 图标时，我正在使用检查位置是否已设置，如果是，则它是否已锁定，我正在抛出错误消息。有没有办法在 eclipe 4 rcp 中显示以前运行的应用程序

# android - 如何在android中制作滑动解锁按钮

> ID：14910226
> 
> 赞同：19
> 
> 时间：2013-02-16T12:20:45.493
> 
> 标签：android

嗨，我想要一个应该用作 IOS 的“滑动解锁”按钮的按钮

简而言之，我想要一个没有点击效果但可以在拖动时从左向右滑动的按钮，在拖动完成时它应该考虑点击。

如果可能的话，请向我推荐任何示例代码。

谢谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-05-03T04:51:43.610

首先，我要感谢@matthias 的回答。我使用了以下搜索栏并进行了一些自定义：

```
 <SeekBar
        android:id="@+id/myseek"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="false"
        android:max="100"
        android:progressDrawable="@android:color/transparent"
        android:thumb="@drawable/ic_launcher" /> 
```

在java代码中

```
sb.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {

            if (seekBar.getProgress() > 95) {

            } else {

                seekBar.setThumb(getResources().getDrawable(R.drawable.ic_launcher));
            }

        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {

        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            if(progress>95){
                seekBar.setThumb(getResources().getDrawable(R.drawable.load_img1));
            }

        }
    }); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-03-14T16:37:44.343

我从 Jignesh Ansodariya 发布的示例开始，但正如 Aerrow 指出的那样，用户可以单击 SeekBar 上的任意位置来解锁。这使得它非常不可用，因为有一个滑动按钮的要点是应该忽略意外点击。我的解决方案是创建一个 SeekBar 的子类，如下所示：

```
public class SlideButton extends SeekBar {

    private Drawable thumb;
    private SlideButtonListener listener;

    public SlideButton(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void setThumb(Drawable thumb) {
        super.setThumb(thumb);
        this.thumb = thumb;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            if (thumb.getBounds().contains((int) event.getX(), (int) event.getY())) {
                super.onTouchEvent(event);
            } else
                return false;
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            if (getProgress() > 70)
                handleSlide();

            setProgress(0);
        } else
            super.onTouchEvent(event);

        return true;
    }

    private void handleSlide() {
        listener.handleSlide();
    }

    public void setSlideButtonListener(SlideButtonListener listener) {
        this.listener = listener;
    }   
}

public interface SlideButtonListener {
    public void handleSlide();
} 
```

XML:

```
 <package.SlideButton
            android:id="@+id/unlockButton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:clickable="false"
            android:max="100"
            android:progressDrawable="@android:color/transparent"
            android:thumb="@drawable/button_lock" >
        </package.SlideButton> 
```

最后是我的活动中的代码：

```
 ((SlideButton) findViewById(R.id.unlockButton)).setSlideButtonListener(new SlideButtonListener() {  
        @Override
        public void handleSlide() {
            unlockScreen();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-06-12T12:22:48.333

有一些很好的库可以为您解决问题。如果使用库来执行这对您来说不是问题，那么请考虑尝试这个：

[https://github.com/cortinico/slidetoact](https://github.com/cortinico/slidetoact)

[![在此处输入图像描述](../Images/ac882dcfd31b7eaf660b021294eb6348.png)](https://i.stack.imgur.com/vKaA5.gif)

快乐编码..!! :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T12:52:53.613

Android 提供了[`Switch`](http://developer.android.com/reference/android/widget/Switch.html)类似于*滑动解锁*的小部件。但是，您必须对其进行一些自定义，例如禁用单击更改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-01T08:03:17.890

您可以使用此库快速轻松地自定义您的解锁。

[https://github.com/cheekiat/SlideToUnlock](https://github.com/cheekiat/SlideToUnlock)

在 xml 上使用此代码

```
 <cheekiat.slideview.SlideView
        android:id="@+id/slide_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:slideBackground="@drawable/orangesquarebutton"
        app:slideSrc="@drawable/slide_image"
        app:slideText="Slide to unlock"
        app:slideTextColor="#ffffff"
        app:slideTextSize="10dp" /> 
```

[滑动解锁screenshort](https://i.stack.imgur.com/SXdE7.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-24T14:58:47.563

出于某种原因，我无法禁用触摸动作，因此仍然可能意外点击
我想出了这个解决方案，它基本上不允许每个更改事件将进度更改超过 10 个值

```
int unlockLastSeekVal = 0;
// there are skips btwn changes, use value greater than 1
// 10 is great for seekbars with 100 values
int unlockSeekSensitivity = 10;
// final stage to "unlock"; 0.9 => 90%
Double unlockFinalStage = 0.9;
//...........
unlock.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        if (fromUser){
            if (Math.abs(unlockLastSeekVal - progress) > unlockSeekSensitivity){
                // too much delta, revert to last value
                seekBar.setProgress(unlockLastSeekVal);
            }else{
                unlockLastSeekVal = progress;
            }
        }
    }

    public void onStartTrackingTouch(SeekBar seekBar) {
    }

    public void onStopTrackingTouch(SeekBar seekBar) {
        if (seekBar.getProgress() > seekBar.getMax() * unlockFinalStage){
            DoYourThing();
        }
        unlockLastSeekVal = 0;
        seekBar.setProgress(0);         
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-26T08:41:02.147

从奥斯卡的回答开始（感谢您的贡献），我创建了一个简单的示例项目来管理滑动按钮（水平和垂直）： [https ://github.com/rcaboni/AndroidSlideButton](https://github.com/rcaboni/AndroidSlideButton)

对于屏幕截图：[https ://raw.githubusercontent.com/rcaboni/AndroidSlideButton/master/screenshot.jpg](https://raw.githubusercontent.com/rcaboni/AndroidSlideButton/master/screenshot.jpg)

这是主要方法：

```
public boolean onTouchEvent(MotionEvent event) {
    if (!isEnabled()) {
        return false;
    }
    if (orientation == ORIENTATION_HORIZONTAL) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            int x= (int) event.getX();
            int y= (int) event.getY();
            if (thumb.getBounds().contains((int) event.getX(), (int) event.getY())) {
                super.onTouchEvent(event);
            } else
                return false;
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            if (getProgress() > 70)
                handleSlide();

            setProgress(0);
        } else
            super.onTouchEvent(event);
    }else{
        int i=0;
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    int x= (int) event.getX();
                    int y= (int) event.getY();
                    if (!thumb.getBounds().contains((int) event.getY(), (int) event.getX())) {
                        return false;
                    }
                }
            case MotionEvent.ACTION_MOVE:
                i=getMax() - (int) (getMax() * event.getY() / getHeight());
                setProgress(100 - i);
                onSizeChanged(getWidth(), getHeight(), 0, 0);
                break;
            case MotionEvent.ACTION_UP:
                i=getMax() - (int) (getMax() * event.getY() / getHeight());
                if (i < 30) {
                    handleSlide();
                }
                setProgress(0);
                onSizeChanged(getWidth(), getHeight(), 0, 0);
                break;

            case MotionEvent.ACTION_CANCEL:
                break;
        }
    }
    return true;
} 
```

垂直按钮的 XML：

```
<RelativeLayout
    android:layout_width="75dp"
    android:layout_height="130dp"
    android:background="@drawable/slide_background_green"
    android:id="@+id/lSlideButtonV"
    android:layout_below="@+id/lSlideButton"
    android:layout_marginTop="50dp">
    <TextView
        android:layout_width="20dp"
        android:layout_height="match_parent"
        android:text="SOS"
        android:id="@+id/tvSlideActionV"
        android:gravity="center|bottom"
        android:layout_alignParentRight="false"
        android:layout_alignParentEnd="false"
        android:layout_alignParentLeft="false"
        android:layout_alignParentStart="false"
        android:textSize="20dp"
        android:textColor="@android:color/white"
        android:layout_alignParentTop="false"
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="false"
        android:layout_marginBottom="15dp" />
    <it.aldea.android.widget.SlideButton
        android:id="@+id/unlockButtonV"
        android:layout_width="match_parent"
        android:layout_height="150dp"
        android:clickable="false"
        android:max="100"
        slideButton:orientation="vertical"
        android:progressDrawable="@android:color/transparent"
        android:thumb="@drawable/slide_track_red"
        android:indeterminate="false"
        android:layout_marginRight="5dp"
        android:layout_marginTop="20dp"
        android:layout_centerInParent="true"
        android:layout_marginBottom="10dp"
        android:thumbOffset="-2dp">
    </it.aldea.android.widget.SlideButton>

</RelativeLayout> 
```

它不是一个真正完整的小部件，因为它由两个视图（TextView 和 SlideButton）组成一个布局，但它是一个易于配置的 Slide Button 解决方案，其中包含文本。我希望这对某人有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-14T08:15:44.333

可能很晚了，但我为此目的创建了一个小型库。它允许您从 xml 滑动和自定义按钮的行为。[滑动按钮](http://github.com/masterlittle/SlideButton)

基本上它涉及覆盖 onTouch() 事件并根据接收到的坐标进行更改。之后根据需要设置背景并自定义文本是一件简单的事情。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-21T15:35:39.820

你可以重建正常的 SeekBar 来做你想做的事：

和：

*   起点 (20)
*   交叉线 (90)
*   并自动复位。

    seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() { 整数点 = 0; 整数 startPoint = 0; 布尔开始 = true;

    ```
     @Override
        public void onProgressChanged(SeekBar seekBar, int i, boolean wasUserInput) {
            point = i;

            if (started && i > 0 && wasUserInput) {
                startPoint = new Integer(i);
                started = false;
            }
        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
        }

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
            if (point > 90 && startPoint < 20) { // slided to the right correctly.
                // TODO::

            } else { // reset.
                resetSeekBar(seekBar, point);
            }

            startPoint = 0;
            started = true;
        }
    }); 
    ```

和：

```
/**
 * Resetting the seekbar, on point at a time.
 * @param seekBar                           Reference to the seekbar made smaller.
 * @param oldPoint                          The point where the dot is atm.
 */
private void resetSeekBar(final SeekBar seekBar, final int oldPoint) {
    if (oldPoint > 0) {
        final int newPoint = oldPoint -1;
        seekBar.setProgress(newPoint);

        timer.schedule(new TimerTask() {
            final SeekBar seekBar = seekBarBid;
            @Override
            public void run() {
                resetSeekBar(seekBar, newPoint);
            }
        }, 3);

    } else {
        seekBar.setProgress(oldPoint);
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-28T09:45:26.107

我希望下面的答案是工作，

```
 public class UnlockSliderView extends FrameLayout {
    @BindView(R2.id.tv_unlock_slider)
    TextView tvUnlockSlider;

    @BindView(R2.id.iv_circle_slide)
    ImageView ivCircleSlide;

    private View parentCircle;

    private float xOrigin = 0;
    private float xOriginCircle = 0;
    private boolean circleTouched = false;

    public UnlockSliderView(Context context) {
        super(context);
        init();
    }

    public UnlockSliderView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public UnlockSliderView(Context context, AttributeSet attr, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        init();
    }

    private void init() {
        inflate(getContext(), R.layout.layout_unlock_slider_view, this);
        ButterKnife.bind(this);

        parentCircle = (View) ivCircleSlide.getParent();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            eventActionDown(event);
        } else if (event.getAction() == MotionEvent.ACTION_MOVE) {
            eventActionMove(event);
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            unlockFinish();
        }
        return true;
    }

    private void eventActionDown(MotionEvent event) {
        if ((event.getX() >= ivCircleSlide.getX() && event.getX() <= ivCircleSlide.getX() + ivCircleSlide.getWidth())
                && (event.getY() >= ivCircleSlide.getY() && event.getY() <= ivCircleSlide.getY() + ivCircleSlide.getHeight())) {
            xOrigin = event.getX();
            xOriginCircle = ivCircleSlide.getX();
            circleTouched = true;
        } else {
            circleTouched = false;
        }
    }

    private void eventActionMove(MotionEvent event) {
        if (circleTouched) {
            float newXCircle = xOriginCircle + (event.getX() - xOrigin);
            newXCircle = (newXCircle < xOriginCircle) ? xOriginCircle : newXCircle;
            newXCircle = (newXCircle > parentCircle.getWidth() - ivCircleSlide.getWidth() - xOriginCircle) ? parentCircle.getWidth() - ivCircleSlide.getWidth() - xOriginCircle : newXCircle;
            float alpha = 1 - ((newXCircle - xOriginCircle) / (parentCircle.getWidth() - ivCircleSlide.getWidth() - (xOriginCircle * 2)));
            tvUnlockSlider.setAlpha(alpha);
            ivCircleSlide.setX(newXCircle);
            if (newXCircle == parentCircle.getWidth() - ivCircleSlide.getWidth() - xOriginCircle) {
                unlockFinish();
                if (mListener != null) mListener.onUnlock();
            }
        }
    }

    private void unlockFinish() {
        if (circleTouched) {
            ivCircleSlide.animate().x(xOriginCircle).setDuration(400).start();
            tvUnlockSlider.animate().alpha(1).setDuration(400).start();
            circleTouched = false;
        }
    }

   and the xml is,

  <?xml version="1.0" encoding="utf-8"?>
   <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="@dimen/unlock_slider_height"
    android:layout_margin="@dimen/default_padding"
    android:background="@drawable/btn_slider_back"
    android:gravity="center"
    android:orientation="vertical"
    android:padding="4dp">

    <TextView
        android:id="@+id/tv_unlock_slider"
        style="@style/prelogin_slider"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="@dimen/unlock_slider_handle_size"
        android:layout_marginStart="@dimen/unlock_slider_handle_size"
        android:text="@string/logon_to_mobile_banking" />

    <ImageView

        android:id="@+id/iv_circle_slide"
        android:layout_width="@dimen/unlock_slider_handle_size"
        android:layout_height="@dimen/unlock_slider_handle_size"
        android:scaleType="fitCenter"
        android:src="@drawable/btn_slider_handle"
        tools:ignore="ContentDescription" />

</FrameLayout> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-01T15:21:49.267

谢谢@Oskar Lundgren 的回答，我已经更新了一些东西，如果有人想在 kotlin 中做同样的事情。这里是

**滑动确认**

```
class SlideToConfirm : SeekBar, SeekBar.OnSeekBarChangeListener {

    private lateinit var listener: SlideButtonListener

    // To prevent the thumb to going out of track
    private val maxProgress = 91
    private val minProgress = 9

    constructor(context: Context) : super(context) {
        init()
    }

    constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {
        init()
    }

    constructor(context: Context, attrs: AttributeSet, defStyle: Int) : super(context, attrs, defStyle) {
        init()
    }

    fun init() {
        setDrawables()
        setProperties()
        setOnSeekBarChangeListener(this)
    }

    private fun setDrawables() {
        thumb = ContextCompat.getDrawable(context, R.drawable.slider_thumb)
        progressDrawable = ContextCompat.getDrawable(context, R.drawable.slider_progress_drawable)
    }

    private fun setProperties() {
        isClickable = false
        splitTrack = false
        setPadding(0, 0, 0, 0)
        progress = minProgress
    }

    override fun onProgressChanged(seekBar: SeekBar?, progress: Int, fromUser: Boolean) {
        if (progress < minProgress) {
            this.progress = minProgress
        }
        if (progress > maxProgress) {
            this.progress = maxProgress
        }
    }

    override fun onStartTrackingTouch(seekBar: SeekBar?) {}

    override fun onStopTrackingTouch(seekBar: SeekBar?) {}

    @SuppressLint("ClickableViewAccessibility")
    override fun onTouchEvent(event: MotionEvent?): Boolean {
        if (event!!.action == MotionEvent.ACTION_DOWN) {
            if (thumb.bounds.contains(event.x.toInt(), event.y.toInt())) {
                super.onTouchEvent(event)
            } else
                return false
        } else if (event.action == MotionEvent.ACTION_UP) {
            if (progress > 70) {
                handleSlide()
                progress = maxProgress
            } else {
                progress = minProgress
            }
        } else {
            super.onTouchEvent(event)
        }
        return true
    }

    fun setOnSlideListener(listener: SlideButtonListener) {
        this.listener = listener
    }

    private fun handleSlide() {
        listener.handleSlide()
    }

    interface SlideButtonListener {
        fun handleSlide()
    }
} 
```

**拇指**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="oval">
            <solid android:color="@color/cyan" />
            <corners android:radius="8dp" />
            <size
                android:width="50dp"
                android:height="50dp" />
        </shape>
    </item>
    <item android:drawable="@drawable/ic_arrow_forward_white" />
</layer-list> 
```

**进度跟踪**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <corners android:radius="35dp" />
    <size
        android:width="100dp"
        android:height="50dp" />
    <stroke
        android:width="1dp"
        android:color="@color/errorRed" />
    <solid android:color="@android:color/white" />
</shape> 
```

# java - 使用子字符串时Java无法解析的日期

> ID：14910228
> 
> 赞同：2
> 
> 时间：2013-02-16T12:20:56.747
> 
> 标签：java, substring, simpledateformat

这是我目前遇到的问题，我正在编写一个从网页表中获取信息的程序，第一行的日期是例如。“2011 年 9 月 21 日”。

随后的行的格式为“September 28, 2011 (2011-09-28)”。

我正在尝试对日期进行子字符串化，但每当我对字符串进行子字符串化时，我都会不断收到 Unparseable date: "September 21, 2011"。如果我不对第一个日期进行子字符串化，但随后的日期会崩溃，如果我什至对第一个字符串进行子字符串化，它也会崩溃。

```
String date = tableData.get(airDate).text();
int index = date.length();
if(date.contains("(")){
   index = date.indexOf((int)'(') - 1;
}
date = date.substring(0, index);
Date simpleDate = formatter.parse(date); 
```

我的程序完全塞满了，我不知道为什么。现在我不能再对字符串进行子串化，让日期格式正确:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:28:27.387

尝试

```
 Date d = new SimpleDateFormat("MMMM dd, yyyy", Locale.ENGLISH).parse("September 28, 2011 (2011-09-28");
    System.out.println(d); 
```

印刷

```
Wed Sep 28 00:00:00 EEST 2011 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T00:58:54.897

发现了问题。这类似于实习期间发生的事情。我使用的这个 HTML 库与 Java 中的简单日期格式和字符串操作具有相同的命名空间。简单的解决方法是创建一个外观以从我需要的 HTML 中获取信息，然后将其作为标准字符串进行操作

# javascript - 命名内置对象的自定义字段而不会发生冲突

> ID：14910232
> 
> 赞同：0
> 
> 时间：2013-02-16T12:21:37.720
> 
> 标签：javascript, naming-conventions

我想知道，是否有一些标准方法来命名 JavaScript 中内置对象的自定义字段以避免与标准字段发生任何冲突？

例如：

```
var xhr = new XMLHttpRequest();
xhr.thisFieldIsNotGoingToBeUsed = 'by XHR internals but is used by the app'; 
```

`this`例如，在事件中反向查找对象父对象而不使用将对象与每个成员进行比较的循环可能很有用。

HTML中有`data-`属性，但我找不到任何等效的 JavaScript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:30:20.580

经验法则是不要修改你不拥有的东西。请考虑使用这种方法作为您的示例；

```
var myObj = {};
var xhr = new XMLHttpRequest();

myObj.xhr = xhr;
myObj.customProperty = 4;
myObj.customFunc = function () {
    // use this.xhr 
}

// Now pass myObj around instead, you have a reference to xhr (myObj.xhr)
// and your customProperty (myObj.customProperty). 
```

* * *

由于闭包在 JavaScript 中的工作方式，您还应该可以访问定义`onreadystatechange`函数时范围内的变量，这再次完全消除了对`this`上下文的需要；

```
var xhr = new XMLHttpRequest();
var something = function () {
    // I have access to "xhr" because of closures.
};

xhr.onreadystatechange = function () {
    if (this.readyState === 4 && this.status === 200) {
        // I still have access to "something" here because of closures;
    }
}

// xhr.open && send. 
```

...即使您没有闭包（例如，`onreadystatechange`在不同的范围内定义），您也应该考虑修改代码以允许您传递完成工作所需的必要变量。

# java - java中虚拟键盘代码中表达式错误的非法开始

> ID：14910234
> 
> 赞同：0
> 
> 时间：2013-02-16T12:21:50.100
> 
> 标签：java, virtual, keypad

我`illegal start of expression`在下面的代码中遇到错误，在 -> 行`public class hindilang`，我在这个网站上看到了其他问题和答案，但我不知道我哪里出错了？？

```
 abstract class lang extends JFrame implements KeyListener
    {
    boolean flag=false;
    String firstRow[] = {">","=","*","_","<","{","(","'","?","-","!","[",")"};
    String secondRow[] = {"|","#",".",":","&","@","]","/","}",",","$","^","~"};
    String thirdRow[] = {"d","v","m","y","e","k","a","j","z","3","0","9"};
    String fourthRow[] = {"r","b","p","o","h","w","g","x","1","7","5","4"};
    String fifthRow[] = {"f","c","n","s","l","t","q","u","i","6","2","8"};
    String sixthRow[] = {"Space","Back","Capslock","Clear","Show me mappings"};
    JButton first[] = new JButton[13];
    JButton second[] = new JButton[13];
    JButton third[] = new JButton[12];
    JButton fourth[] = new JButton[12];
    JButton fifth[]=new JButton[12];
    JButton sixth[]=new JButton[5];
    int count=0;
    Panel main = new Panel();
    Panel keys1 = new Panel();
    Panel keys2 = new Panel();
    Panel keys3 = new Panel();
    Panel keys4 = new Panel();
    Panel keys5 = new Panel();
    Panel keys6 = new Panel();
    Panel text = new Panel();
    TextArea textArea = new TextArea();
    String strText = "";
    private JLabel label1;
    private JLabel label2;
    private JTextField textField;

    public lang()
    {
    super("Typing Application");
    label1 = new JLabel("Type some text using your keyboard. The keys you press will be
    "+ "highlighed and the text will be displayed");
    add(label1);
    label2 = new JLabel("Note: clicking the buttons with your mouse will not perform
    any action");
    add(label2);
    textField = new JTextField(30);
    textField.setEditable(false);
    TextFieldHandler handler = new TextFieldHandler();
    this.setLayout(new BorderLayout(6,6));
    main.setLayout(new GridLayout(6,1));
    keys1.setLayout(new GridLayout(1,13));
    keys2.setLayout(new GridLayout(1,13));
    keys3.setLayout(new GridLayout(1,14));
    keys4.setLayout(new GridLayout(1,12));
    keys5.setLayout(new GridLayout(1,11));
    keys6.setLayout(new GridLayout(1,4));
    text.setLayout(new BorderLayout(1,1));
    text.add(textArea);

    for(int i=0; i<13; i++)
    {
    first[i] = new JButton(firstRow[i]);
    first[i].setSize(100,100);
    keys1.add(first[i]);
    first[i].addActionListener(new TextAreaHandler());
    }

    main.add(keys1);
    for(int i=0; i<13; i++)
    {
    second[i] = new JButton(secondRow[i]);
    second[i].setBackground(Color.white);
    keys2.add(second[i]);
    second[i].addActionListener(new TextAreaHandler());
    }

    main.add(keys2);

    for(int i=0; i<12; i++)
    {
    String t=i+"";
    String m="icon";
    String n=".gif";
    String s=m+t+n;
    ImageIcon img = new ImageIcon(s);
    third[i] = new JButton(img);
    keys3.add(third[i]);
    third[i].addActionListener(new TextAreaHandler());
    }

    main.add(keys3);
    int j=12;

    for(int i=0; i<12; i++)
    {
    String t=j+"";
    String m="icon";
    String n=".gif";
    String s=m+t+n;
    ImageIcon img = new ImageIcon(s);
    fourth[i] = new JButton(img);
    keys4.add(fourth[i]);
    j++;
    fourth[i].addActionListener(new TextAreaHandler());
    }

    public class hindilang
    {
       public static void hindi()
          {
             lang lang = new lang()
               {
                 public void keyTyped(KeyEvent e) 
                   {
                        throw new UnsupportedOperationException("Not supported yet.");
                   }
                 public void keyPressed(KeyEvent e) 
                   {
                        throw new UnsupportedOperationException("Not supported yet.");
                   }
                 public void keyReleased(KeyEvent e)
                   {
                        throw new UnsupportedOperationException("Not supported yet.");
                   }
               };
           }
    } 
            lang.setSize(800, 500); // set dimensions of window
            lang.setVisible(true);
    }
    } 
```

该文件保存为hindilang.java并被编译为`javac hindilang.java`，我做错了什么？请指导我

尝试了以下建议，但仍然遇到相同的错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:27:50.313

您`public lang()`的构造方法`'}'`在有问题的行之前的方法定义末尾缺少 a

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:29:31.910

您在`}`这里缺少的是更正的代码

```
 abstract class lang extends JFrame implements KeyListener
{
boolean flag=false;
String firstRow[] = {">","=","*","_","<","{","(","'","?","-","!","[",")"};
String secondRow[] = {"|","#",".",":","&","@","]","/","}",",","$","^","~"};
String thirdRow[] = {"d","v","m","y","e","k","a","j","z","3","0","9"};
String fourthRow[] = {"r","b","p","o","h","w","g","x","1","7","5","4"};
String fifthRow[] = {"f","c","n","s","l","t","q","u","i","6","2","8"};
String sixthRow[] = {"Space","Back","Capslock","Clear","Show me mappings"};
JButton first[] = new JButton[13];
JButton second[] = new JButton[13];
JButton third[] = new JButton[12];
JButton fourth[] = new JButton[12];
JButton fifth[]=new JButton[12];
JButton sixth[]=new JButton[5];
int count=0;
Panel main = new Panel();
Panel keys1 = new Panel();
Panel keys2 = new Panel();
Panel keys3 = new Panel();
Panel keys4 = new Panel();
Panel keys5 = new Panel();
Panel keys6 = new Panel();
Panel text = new Panel();
TextArea textArea = new TextArea();
String strText = "";
private JLabel label1;
private JLabel label2;
private JTextField textField;

public lang()
{
super("Typing Application");
label1 = new JLabel("Type some text using your keyboard. The keys you press will be
"+ "highlighed and the text will be displayed");
add(label1);
label2 = new JLabel("Note: clicking the buttons with your mouse will not perform
any action");
add(label2);
textField = new JTextField(30);
textField.setEditable(false);
TextFieldHandler handler = new TextFieldHandler();
this.setLayout(new BorderLayout(6,6));
main.setLayout(new GridLayout(6,1));
keys1.setLayout(new GridLayout(1,13));
keys2.setLayout(new GridLayout(1,13));
keys3.setLayout(new GridLayout(1,14));
keys4.setLayout(new GridLayout(1,12));
keys5.setLayout(new GridLayout(1,11));
keys6.setLayout(new GridLayout(1,4));
text.setLayout(new BorderLayout(1,1));
text.add(textArea);

for(int i=0; i<13; i++)
{
first[i] = new JButton(firstRow[i]);
first[i].setSize(100,100);
keys1.add(first[i]);
first[i].addActionListener(new TextAreaHandler());
}

main.add(keys1);
for(int i=0; i<13; i++)
{
second[i] = new JButton(secondRow[i]);
second[i].setBackground(Color.white);
keys2.add(second[i]);
second[i].addActionListener(new TextAreaHandler());
}

main.add(keys2);

for(int i=0; i<12; i++)
{
String t=i+"";
String m="icon";
String n=".gif";
String s=m+t+n;
ImageIcon img = new ImageIcon(s);
third[i] = new JButton(img);
keys3.add(third[i]);
third[i].addActionListener(new TextAreaHandler());
}

main.add(keys3);
int j=12;

for(int i=0; i<12; i++)
{
String t=j+"";
String m="icon";
String n=".gif";
String s=m+t+n;
ImageIcon img = new ImageIcon(s);
fourth[i] = new JButton(img);
keys4.add(fourth[i]);
j++;
fourth[i].addActionListener(new TextAreaHandler());
}
}
}
public class hindilang
{
   public static void hindi()
      {
         lang lang = new lang()
           {
             public void keyTyped(KeyEvent e) 
               {
                    throw new UnsupportedOperationException("Not supported yet.");
               }
             public void keyPressed(KeyEvent e) 
               {
                    throw new UnsupportedOperationException("Not supported yet.");
               }
             public void keyReleased(KeyEvent e)
               {
                    throw new UnsupportedOperationException("Not supported yet.");
               }
           };
       }
} 
        lang.setSize(800, 500); // set dimensions of window
        lang.setVisible(true);
}
} 
```

# c# - 动态解析资源键

> ID：14910238
> 
> 赞同：4
> 
> 时间：2013-02-16T12:22:16.117
> 
> 标签：c#, asp.net, localization

我想`'<%$ Resources:resFile, someKey %>'`在运行时动态地将字符串（键）插入到语句中。

现在我有这个：

```
 <asp:Label runat="server" id="lbl" Text='<%$ Resources:resFile, someKey %>'/> 
```

这对我来说没用，因为键“someKey”是静态的，并且总是会收敛到相同的 x 翻译。

我试过做这样的事情：

```
 <asp:Label runat="server" id="lbl" Text='<%$ Resources:resFile, '<%#Eval("someProperty")%>' %>'/> 
```

但这并不完全编译。我不确定你是否可以有嵌套`<%%>`语句，所以这就是我在这里问的原因。我也尝试过各种各样的事情，`GetGlobalResourceObject()`但这也不是我想要的。

问题是我将一个列表绑定到转发器，并且数据源中的一项将包含与资源文件中的键匹配的键。

如果有人知道如何实现这一点，无论是使用嵌套`<%%>`语句还是其他任何方式，我都很乐意尝试一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T16:54:56.910

您可以在 ItemDataBound 事件的代码隐藏中执行此操作。

```
Label lv = (Label)e.Item.FindControl("lbl");

ResourceManager resMngr = new ResourceManager(typeof(SupertextCommon.Default));
lv.Text = resMngr.GetObject(someProperty, culture); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-08T14:19:05.840

这在使用其数据源属性的 GridView 中对我有用：

```
<%# GetGlobalResourceObject("Resource", Eval("SomeProperty").ToString()) %> 
```

您还可以使用串联来构建密钥，例如：

```
<%# GetGlobalResourceObject("Resource", "SomePrefix" & Eval("SomeProperty").ToString()) %> 
```

# file - 写入文件phonegap

> ID：14910240
> 
> 赞同：1
> 
> 时间：2013-02-16T12:22:30.740
> 
> 标签：file, cordova

我在互联网上看到了很多关于使用 phonegap 写入文件的问题，但没有一个对我有用。我已经尝试过官方 phonegap 文档，但它总是返回`error.code 1.`我不知道这到底是什么意思。

我尝试了以下解决方案

```
// Wait for PhoneGap to load
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is ready

function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function fail(){
    console.log('fail');
}

function gotFS(fileSystem) {
    var path = "test.txt";
    fileSystem.root.getFile(path, {create: true, exclusive: false}, gotFileEntry, fail);

}

function gotFileEntry(fileEntry) {
    fileEntry.createWriter(gotFileWriter, fail);
}

function gotFileWriter(writer) {
    writer.onwrite = function(evt) {
        console.log("write success");
    };
    writer.write("some sample text");
    $.ajax({
        url:'test.txt',
        success:function(msg){
            console.log('message: '+msg)
        }
    })
} 
```

但是当`gotFileWriter()`执行该函数时，控制台会记录：`write success`但是我的 ajax 返回一个 void 文档。

我使用的是 2.4.0 版本，当我尝试使用文档 2.4.0 时，我有这个日志：

[http://pastebin.com/DN8Dyptp](http://pastebin.com/DN8Dyptp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:31:46.400

代码写入文件系统中的文件，而您发出的 ajax 请求位于 www 文件夹中。由于 www 文件夹中不存在 test.txt 文件，因此您会收到该错误。

请使用文件阅读器从文件中读取。 [http://docs.phonegap.com/en/1.8.0/cordova_file_file.md.html#FileReader](http://docs.phonegap.com/en/1.8.0/cordova_file_file.md.html#FileReader)

fileSystem.root.getFile("test.txt", null, gotFileEntry, fail);

# ruby-on-rails - 我的 Rails 应用程序的收藏夹模型

> ID：14910243
> 
> 赞同：0
> 
> 时间：2013-02-16T12:22:58.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个用户和指南模型。

我希望用户能够将指南标记为他们的最爱，然后查看他们最喜欢的所有指南的列表。

这不太对。我不确定“收藏夹”操作是否正确添加了收藏夹；或者，如果添加正确，则无法在收藏夹视图中正确显示（因此“显示”操作可能不正确）...

**控制器**guidelines_controller.rb

```
def favourite
   type = params[:type]
   if type == "favourite"
    @guideline= Guideline.find_all_by_id(params[:guideline_id])
    current_user.favourite_guidelines << @guideline
     redirect_to :back, notice: 'You favourited #{@guideline.name}'
    elsif type == "unfavourite"
     current_user.favourite_guidelines.delete(@guideline)
     redirect_to :back, notice: 'Unfavourited #{@guideline.name}'

    else
    # Type missing, nothing happens
   redirect_to :back, notice: 'Nothing happened.'
    end
  end 
```

**控制器**favourites_controller.rb

```
 def show

    @user = User.find_by_profile_name(params[:id])
    if @user 
        @guidelines = @user.favourite_guidelines.all
        render action: :show
    else
        render file: 'public/404', status: 404, formats: [:html]
    end
  end
end 
```

*路线 * *routes.rb*

```
get "guidelines/favourite"
  get "favourites/show" 
```

**型号**user.rb

```
has_many :guidelines
 has_many :favourite_guidelines 
```

**模型**favourite_guidelines.rb

```
 attr_accessible :guideline_id, :user_id

  belongs_to :user 
```

**观点**guidelines/index.html.erb

```
<% if current_user %>
    <%= link_to "favourite",   guidelines_favourite_path(guideline, type: "favourite"), method: "get" %>
    <%= link_to "unfavourite", guidelines_favourite_path(guideline, type: "unfavourite"), method: "get" %> 
```

*意见 *收藏夹*/show.html.erb*

```
<% if @guidelines %>
    <% @guidelines.each do |guideline| %>

        <div class="well">
            <%= link_to guideline.title, guideline %>
            <br />
            <%= guideline.content %>
            <br />
            Added <%=  time_ago_in_words(guideline.created_at) %> ago
        </div>
    <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:40:11.163

根据您的评论，以下回报`nil`：

```
@guideline= Guideline.find_by_id(params[:guideline_id])  #=> nil
current_user.favourite_guidelines << nil #Gives association mismatch error 
```

我认为`params[:guideline_id]`是`nil`。从日志文件中发布您的参数。

或者试试这个：

将您的链接更改为如下所示：

```
<%= link_to "favourite",   guidelines_favourite_path(guideline_id: guideline.id, type: "favourite"), method: "get" %>
<%= link_to "unfavourite", guidelines_favourite_path(guideline_id: guideline.id, type: "unfavourite"), method: "get" %> 
```

在您之前的情况下：

```
 @guideline= Guideline.find_all_by_id(params[:guideline_id]) #=> []
 current_user.favourite_guidelines << [] #=> Valid and inserting nothing 
```

# uitableview - 如何使用 IBAction 将 UITableviewcell 与 PDFreader 连接？

> ID：14910246
> 
> 赞同：1
> 
> 时间：2013-02-16T12:23:27.140
> 
> 标签：uitableview, ibaction, pdf-reader

我正在开发一个用于显示多个 PDF 文档的 iPhone 应用程序。

我有一个 UItableview 显示来自 .plist 的我的 pdf 文件的名称，并且我有开源 VFR pdf 阅读器（[https://github.com/vfr/Reader](https://github.com/vfr/Reader)）。

我知道如何从 UI 按钮连接到 vfr 阅读器：

```
- (IBAction)didClickOpenPDF1SEMCYTO {
NSString *file = [[NSBundle mainBundle] pathForResource:@"1SEMCYTO" ofType:@"pdf"];    

ReaderDocument *document = [ReaderDocument withDocumentFilePath:file password:nil];

if (document != nil)
{
    ReaderViewController *readerViewController = [[ReaderViewController alloc] initWithReaderDocument:document];
    readerViewController.delegate = self;

    readerViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    readerViewController.modalPresentationStyle = UIModalPresentationFullScreen;

    [self presentModalViewController:readerViewController animated:YES]; 
```

和

```
- (void)dismissReaderViewController:(ReaderViewController *)viewController {
[self dismissModalViewControllerAnimated:YES];} 
```

显然我需要类似的东西，但我不知道如何/什么，唯一真正相似的主题是[自定义 UITableViewCell 和 IBAction](https://stackoverflow.com/questions/4103643/custom-uitableviewcell-and-ibaction) 但我不知道我是否可以使用其中的方法，

有什么想法请帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T13:45:39.157

对于表格视图，每点击一行，就会调用表格视图的didSelectRowAtIndexPath 的委托方法。（[更多关于 UITableViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDelegate)）

利用 indexPath 参数，尤其是下面方法中传递的行来确定需要在 ReaderViewController 中显示的 PDF。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    ReaderViewController *readerViewController = [[ReaderViewController alloc] initWithReaderDocument:document];
    readerViewController.delegate = self;

    //determine the PDF to be shown based on indexPath.row

    readerViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    readerViewController.modalPresentationStyle = UIModalPresentationFullScreen;

    [self presentModalViewController:readerViewController animated:YES];
} 
```

请记住将您的表视图委托设置为实现上述方法的视图控制器，就像您如何设置 ReaderViewController 的委托一样。

# lxml - python-3.3.0 上的 lxml ImportError：未定义符号：xmlBufContent

> ID：14910250
> 
> 赞同：1
> 
> 时间：2013-02-16T12:23:41.033
> 
> 标签：lxml, importerror, python-3.3

我很难在 python-3.3.0 上安装 lxml(3.1.0)。它安装没有错误，我可以在正确的文件夹（/usr/local/lib/python3.3/site-packages/）中看到 lxml-3.1.0-py3.3-linux-i686.egg，但是当我尝试时导入etree，我得到这个：

> > > from lxml import etree Traceback（最近一次调用最后一次）：文件“”，第 1 行，在 ImportError 中：/usr/local/lib/python3.3/site-packages/lxml-3.1.0-py3.3-linux-i686 .egg/lxml/etree.cpython-33m.so：未定义符号：xmlBufContent

我确实尝试使用 apt-get 进行安装，我尝试了“python3 setup.py install”并且我通过 easy_install 进行了安装。我不得不提到我安装了 3 个版本（2.7、3.2.3 和 3.3.0。），但我太初学者了，无法判断这是否与它有关。

我确实搜索了所有内容，但找不到任何解决方案。任何帮助是极大的赞赏！

最好的，乌鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:09:45.680

您可能应该提及您尝试安装的特定操作系统，但我假设它是某种形式的 Linux，可能是 Ubuntu 或 Debian，因为您提到了 apt-get。

您提到的错误消息在未安装和/或库以使其链接`lxml`时很典型。无论出于何种原因，安装过程都不会检测到它们何时不存在，并且即使不满足这些依赖关系，也可以给出安装成功的感觉。`libxml2``libxslt`

如果您发出`apt-get install libxml2 libxml2-dev libxslt libxslt-dev`应该消除此错误。

# php - 使用 IPN、Paypal 在数据库中插入更多项目失败，添加到购物车

> ID：14910251
> 
> 赞同：1
> 
> 时间：2013-02-16T12:23:51.580
> 
> 标签：php, insert, paypal, shopping-cart, paypal-ipn

我将 ipn 脚本改编为“立即购买”按钮，之后我添加了“添加到购物车”按钮。

```
This is the buy now button:
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="return" value="http://www.company.develway.com/company_user?id=    <?php echo $id; ?>">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="custom" value="<?php echo $id; ?>"/>
<input type="hidden" name="quantity" value="1">
<input type="hidden" name="item_name" value="<?php echo 'Premium Content for ' . $name; ?>">
<input type="hidden" name="hosted_button_id" value="TV4SWL86EHYYQ">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>

This is add to cart button:
<form target="paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="image" src="https://www.paypal.com/en_US/i/btn/x-click-but22.gif" border="0" name="submit" alt="Make payments with PayPal - it'sfast, free and secure!">
<input type="hidden" name="add" value="1">
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="business" value="finciucsergiu@gmail.com">
<input type="hidden" name="custom" value="<?php echo $id; ?>"/>
<input type="hidden" name="item_name" value="<?php echo 'Premium Content for ' . $name; ?>">
<input name="notify_url" value="http://www.company.develway.com/ipn.php" type="hidden">
<input type="hidden" name="item_number" value="Wid-001">
<input type="hidden" name="amount" value="0.01">
<input type="hidden" name="no_note" value="1">
<input type="hidden" name="currency_code" value="USD">
<input name="notify_url" value="http://www.company.develway.com/ipn.php" type="hidden">
</form> 
```

这是 ipn 文件的主要部分：

```
 if (strcmp ($res, "VERIFIED") == 0) {

$item_name = $_POST['item_name'];
$item_number = $_POST['item_number'];
$payment_status = $_POST['payment_status'];
$payment_amount = $_POST['mc_gross'];
$payment_currency = $_POST['mc_currency'];
$txn_id = $_POST['txn_id'];
$receiver_email = $_POST['receiver_email'];
$payer_email = $_POST['payer_email'];
$custom = $_POST['custom'];
$txn_type = $_POST['txn_type'];
$number_of_items = $_POST['num_cart_items'];

$connection = mysql_connect("hhh", "fff", "lll");
$db_select = mysql_select_db("company", $connection);

mysql_query("INSERT INTO paid_companies(users_email, companies_id)
 VALUES('$payer_email', '$custom') ") or die(mysql_error()); 
```

}

AL 适用于立即购买和添加到购物车（如果它是一件商品），但如果我在数据库中插入多个商品，则仅包含最后一件商品。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:15:26.643

当您在购物车中有多个商品时，您必须遍历 IPN 中包含的所有商品以获取数据库中的所有商品。

看一下这个...

```
// Cart Items
$num_cart_items = isset($_POST['num_cart_items']) ? $_POST['num_cart_items'] : '';

$i = 1;
$cart_items = array();   
while(isset($_POST['item_number' . $i]))   
{   
    $item_number = isset($_POST['item_number' . $i]) ? $_POST['item_number' . $i] : '';   
    $item_name = isset($_POST['item_name' . $i]) ? $_POST['item_name' . $i] : '';   
    $quantity = isset($_POST['quantity' . $i]) ? $_POST['quantity' . $i] : '';  
    $mc_gross = isset($_POST['mc_gross_' . $i]) ? $_POST['mc_gross_' . $i] : 0;
    $mc_handling = isset($_POST['mc_handling' . $i]) ? $_POST['mc_handling' . $i] : 0;
    $mc_shipping = isset($_POST['mc_shipping' . $i]) ? $_POST['mc_shipping' . $i] : 0;
    $custom = isset($_POST['custom' . $i]) ? $_POST['custom' . $i] : '';   
    $option_name1 = isset($_POST['option_name1_' . $i]) ? $_POST['option_name1_' . $i] : '';   
    $option_selection1 = isset($_POST['option_selection1_' . $i]) ? $_POST['option_selection1_' . $i] : '';   
    $option_name2 = isset($_POST['option_name2_' . $i]) ? $_POST['option_name2_' . $i] : '';   
    $option_selection2 = isset($_POST['option_selection2_' . $i]) ? $_POST['option_selection2_' . $i] : '';
    $option_name3 = isset($_POST['option_name3_' . $i]) ? $_POST['option_name3_' . $i] : '';   
    $option_selection3 = isset($_POST['option_selection3_' . $i]) ? $_POST['option_selection3_' . $i] : '';
    $option_name4 = isset($_POST['option_name4_' . $i]) ? $_POST['option_name4_' . $i] : '';   
    $option_selection4 = isset($_POST['option_selection4_' . $i]) ? $_POST['option_selection4_' . $i] : '';
    $option_name5 = isset($_POST['option_name5_' . $i]) ? $_POST['option_name5_' . $i] : '';   
    $option_selection5 = isset($_POST['option_selection5_' . $i]) ? $_POST['option_selection5_' . $i] : '';
    $option_name6 = isset($_POST['option_name6_' . $i]) ? $_POST['option_name6_' . $i] : '';   
    $option_selection6 = isset($_POST['option_selection6_' . $i]) ? $_POST['option_selection6_' . $i] : '';
    $option_name7 = isset($_POST['option_name7_' . $i]) ? $_POST['option_name7_' . $i] : '';   
    $option_selection7 = isset($_POST['option_selection7_' . $i]) ? $_POST['option_selection7_' . $i] : '';
    $option_name8 = isset($_POST['option_name8_' . $i]) ? $_POST['option_name8_' . $i] : '';   
    $option_selection8 = isset($_POST['option_selection8_' . $i]) ? $_POST['option_selection8_' . $i] : '';
    $option_name9 = isset($_POST['option_name9_' . $i]) ? $_POST['option_name9_' . $i] : '';   
    $option_selection9 = isset($_POST['option_selection9_' . $i]) ? $_POST['option_selection9_' . $i] : '';

    $btn_id = isset($_POST['btn_id' . $i]) ? $_POST['btn_id' . $i] : '';

    $current_item = array(   
                           'item_number' => $item_number,   
                           'item_name' => $item_name,   
                           'quantity' => $quantity, 
                           'mc_gross' => $mc_gross, 
                           'mc_handling' => $mc_handling, 
                           'mc_shipping' => $mc_shipping, 
                           'custom' => $custom,   
                           'option_name1' => $option_name1,   
                           'option_selection1' => $option_selection1,   
                           'option_name2' => $option_name2,   
                           'option_selection2' => $option_selection2, 
                           'option_name3' => $option_name3, 
                           'option_selection3' => $option_selection3, 
                           'option_name4' => $option_name4, 
                           'option_selection4' => $option_selection4, 
                           'option_name5' => $option_name5, 
                           'option_selection5' => $option_selection5, 
                           'option_name6' => $option_name6, 
                           'option_selection6' => $option_selection6, 
                           'option_name7' => $option_name7, 
                           'option_selection7' => $option_selection7, 
                           'option_name8' => $option_name8, 
                           'option_selection8' => $option_selection8, 
                           'option_name9' => $option_name9, 
                           'option_selection9' => $option_selection9, 
                           'btn_id' => $btn_id
                          );   

    array_push($cart_items, $current_item);   
    $i++;   
} 
```

这将为您留下一个名为 $cart_items 的数组，其中包含您的所有项目。您可以将数据库插入添加到我提供的循环中，或者您可以使用它将购物车项目收集到 $cart_items 中，然后使用它来工作。

无论哪种方式，您都需要遍历这些项目。

# java - 基于注释的自动装配永远不会给出多个结果，即使它是按类型的

> ID：14910256
> 
> 赞同：0
> 
> 时间：2013-02-16T12:24:21.703
> 
> 标签：java, autowired, springsource

我的问题是：

在我使用上下文组件扫描而不是在 xml 中编写 bean 的 Web 应用程序中，bean 是自动创建的，所以如果在一个类中我编写 @autowiring 它是按类型隐式的，并且在这种情况下永远不会有多个结果，这通常会发生如果我使用 xml 声明方式

我的理解是，在 xml 格式中，当我重复具有相同类的多个 bean 时，它只实例化一次，但值/属性值每次都不同，因为类是隐式的。所以当我在这种情况下自动装配时，springs 很困惑我在说哪个 bean，但是在注释中，因为 bean 是由自己创建的，这种情况永远不会发生。

理解正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:33:31.203

没错，是上课做的。如果您需要自动装配同一类的多个 bean，那么您可以使用

```
@Component(value="someName") 
```

然后选择你想要的bean

```
@Qualifier("someName")
@Autowired 
```

# sitecore - 架构 Sitecore 包中的 XML

> ID：14910262
> 
> 赞同：10
> 
> 时间：2013-02-16T12:24:51.893
> 
> 标签：sitecore, sitecore6

是否有人拥有与出现在 Sitecore 包文件的安装程序文件夹中的 XML 文档相关的架构？

**对project/Sources/xitems/Entries/x-item**元素的格式特别感兴趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T21:09:17.853

该 XML 文件似乎是`Sitecore.Install.PackageProject`该类的表示，因此我尝试使用该类上的序列化从代码生成 XSD。但是，如果您使用反编译来查看包构建和安装的工作原理，您会发现 Sitecore 已经为此编写了自己的序列化程序。所以我无法使用 .NET 序列化程序生成正确的 XSD。

使用反编译器（我使用[dotPeek](http://www.jetbrains.com/decompiler/)，免费软件），您可以跟踪有关该 XML 文件以及 Sitecore 如何使用它的大量信息，但我看不到从中提取模式的（现实）方法。如果您要查看它，请查看内部`Sitecore.Kernel.dll`并查找`Sitecore.Install`名称空间。

您是否尝试过询问 Sitecore 支持？如果有人有这个模式，那就是他们。

# php - 如何从 PHP 中的 SQL 将数据保存在 PDF 文件中

> ID：14910264
> 
> 赞同：1
> 
> 时间：2013-02-16T12:24:56.650
> 
> 标签：php, pdf

我的问题是我正在开展一个项目，其中向客户发送了一封电子邮件，该邮件包含一个 pdf 文件，其中显示了客户的报告。请任何人建议我是否有可能的答案，如果是，那么您可以给我该问题的答案。如果否，请向我建议任何其他解决方案来解决我的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:03:50.547

[浏览FPDF](http://www.fpdf.org)上的[教程](http://www.fpdf.org/en/tutorial/index.php)，您可以使用[FPDF](http://www.fpdf.org)或评论中提到的许多其他包来制作表单。然后，您可以使用您的数据库为您需要的任何用途创建这些 PDF，并将它们附加到电子邮件中以发送给您的客户。

# svn - VisualSVN 将存储库从 server1 移动到 server2

> ID：14910265
> 
> 赞同：1
> 
> 时间：2013-02-16T12:25:09.990
> 
> 标签：svn, repository, visualsvn-server, svnadmin

我想将我的存储库从 server1 移动到 server2 。我尝试将整个存储库文件夹复制到 server2，从 VisualSVN 创建一个新存储库并选择“导入现有存储库”（“存储库（右键单击）-> 所有任务-> 导入现有存储库”） - 但它给出了错误“ visualsvn“无法将存储库导入到祖先文件夹”

我尝试运行 svnadmin dump，但它给了我以下错误。

> C:>svnadmin 转储 "c:\repos" > repos.dmp
> 
> svnadmin: E720002: Can't open file 'C:\repos\format': 系统找不到指定的文件。

在 c:\repros - 我有 .svn、branchs、tags 和 trunks 文件夹。

我在 Server1 上有 VisualSVN 2.5.3 版本，在 Server2 上有 2.5.8 版本，因为版本很重要。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-08T21:11:15.870

当您使用现代 VisualSVN Server 版本时，请考虑使用[VisualSVN Server PowerShell](https://www.visualsvn.com/server/features/powershell/)而不是`svnadmin`. [请参阅https://www.visualsvn.com/support/topic/00088/](https://www.visualsvn.com/support/topic/00088/)上的 cmdlet 列表。您正在寻找的 cmdlet 是[**Export-SvnRepository**](https://www.visualsvn.com/support/topic/00088/#Export-SvnRepository)和[**Import-SvnRepository**](https://www.visualsvn.com/support/topic/00088/#Import-SvnRepository)。

`svnadmin`或`svnlook`工具在存储库上运行。`C:\repos`是工作副本（本地用户工作区，不是服务器端数据库）或存储库根目录，但不是存储库。因此，您会收到错误消息。

为了运行`svnadmin dump`, `svnadmin hotcopy`, whaterver，您必须提供存储库的路径。假设您的存储库存储在 C:\Repositories 中，该命令应如下所示`svnadmin dump C:\Repositories\MyRepository`

# browser - 文本文件的链接下载它而不是在浏览器中打开它

> ID：14910273
> 
> 赞同：0
> 
> 时间：2013-02-16T12:25:55.607
> 
> 标签：browser, httprequest

在我的网页中，我有一个指向类似这样的文本文件的链接。

```
 <a href="">Link</a> 
```

当我单击链接时，浏览器会下载文件而不是在浏览器中打开它。
谁能告诉我如何做到这一点。我需要做任何浏览器更改吗..？该链接实际上是指向文本文件本身的直接链接，而不是重定向来自不同页面的请求。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:38:22.300

检查用于提供文件的 HTTP 标头，您需要修复服务器，以便它在提供文件时使用正确的 mime 类型和处置。

如果浏览器无法识别类型或看到“处置：附件”，它将保存文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:10:10.697

将您的文件更改为 .html 或将您的网络服务器 mime 类型设置更改为显示 .txt 文件。

# c# - 如何创建一个与另一个文本框具有相同属性的文本框？

> ID：14910277
> 
> 赞同：0
> 
> 时间：2013-02-16T12:26:09.960
> 
> 标签：c#, .net, vb.net

我需要创建和添加一些与其他一些文本框具有相同属性的文本框。有没有办法将属性复制到另一个？

我正在寻找一个类似的解决方案。我知道我可以一个一个地设置变量。

```
TextBox Old = new TextBox() {
                             Size = new System.Drawing.Size(25,25),
                             Location = new Point(a.row*25, a.col*25),
                             Multiline = true
                             };

TextBox New = new TextBox(); //which has same location,size as old one ? 
```

**编辑**TextBox 可能是任何其他 .NET 控件！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:35:07.827

您可以使用[此](https://stackoverflow.com/questions/10266589/clone-controls-c-sharp-winform)解决方案。您可以编写一个扩展，并通过反射获得所有属性

以后请使用搜索功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:29:59.443

可能最直接的方法是这样的：

```
TextBox New = new TextBox {
  Size = Old.Size,
  Location = Old.Location,
  Multiline = Old.Multiline
}; 
```

如果这是你需要做的很多事情，你可以编写一个扩展方法来做同样的事情：

```
public static class TextBoxExtensions {
  public static TextBox Copy(this TextBox textBoxToCopy) {
    var copiedTextBox = new TextBox {
      copiedTextBox = textBoxToCopy.Size,
      copiedTextBox = textBoxToCopy.Location,
      copiedTextBox = textBoxToCopy.Multiline
    };
  }
} 
```

用法：

```
var copyOfOld = Old.Copy(); 
```

如果您要添加更多要复制的属性，我会考虑使用 AutoMapper 并定义 TextBox 和 TextBox 之间的映射。如果您对该路径感兴趣，请告诉我，我会发布示例。

它将把它变成一个衬里，但你需要对 AutoMapper 的依赖，但它在 NuGet 上可用：http: [//nuget.org/packages/AutoMapper/2.2.0](http://nuget.org/packages/AutoMapper/2.2.0)

首先，依赖 AutoMapper。

**在项目中的某处定义映射：**

```
Mapper.CreateMap<TextBox, TextBox>(); 
```

**用法：**

```
var newTextBox = Mapper.Map<TextBox, TextBox>(Old); 
```

或者，如果你已经有一个实例，你想把它塞进：

```
Mapper.Map(Old, newTextBox); 
```

AFAIK，没有内置的单行解决方案，所以它要么是扩展方法，要么依赖于 AutoMapper。扩展方法不必那样做，您可以在那里使用反射或其他选择。

我几乎在所有项目中都使用 AutoMapper，它非常宝贵。

您可以在地图定义中定义许多映射，然后您的所有副本都成为一个衬里。好吧，除了定义:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:35:51.007

创建一个初始化方法：

```
private void InitializeTextBox(TextBox textBox)
{
    textBox.Size = new System.Drawing.Size(25, 25);
    textBox.Location = new Point(a.row * 25, a.col * 25);
    textBox.Multiline = true;
} 
```

并像这样使用：

```
TextBox t1 = new TextBox(), t2 = new TextBox();
InitializeTextBox(t1);
InitializeTextBox(t2); 
```

或复印机方法：

```
private void CopyTextBoxProps(TextBox source, TextBox dest)
{
    dest.Size = source.Size;
    dest.Location = source.Location;
    dest.Multiline = source.Multiline;
    //...
} 
```

并相应地使用它。

# java - 在方法中返回数组结果

> ID：14910286
> 
> 赞同：0
> 
> 时间：2013-02-16T12:27:18.660
> 
> 标签：java, arrays, if-statement

**问题解决了。**

我的课堂上有两种方法。

```
private void retrieveDetails(){
List<String> details = File.getCredentials();
username = details.get(0);
pw = details.get(1);
}

private void checkCredentials() throws IOException {
        retrieveDetails();
        System.out.println("\nPlease enter USERNAME: ");
        String usersName = scan.next();

        System.out.println("\nPlease enter PASSWORD: ");
        String usersPW = scan.next();

        System.out.println("\nEntered details: " + usersName + ", " + usersPW);
        System.out.println("\nSystems details: " + userName + ", " + pw);

        if (usersName.equals(username) && usersPW.equals(pw)) {
            doWork();
        } else {
            System.out.println("Incorrect credentials");
        }
    } 
```

我想我想出了一个解决方案，将以下内容移到我的字符串初始化的位置。

```
List<String> creds = File.getCredentials(); 
```

我创建了一个`System.out`语句来检查来自的详细信息是否`retrieveDetails()`与用户输入的匹配。它们确实匹配 - 但是当系统转到 else 子句而不是执行时`doWork();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:34:46.210

当我有类似的问题时，我会做这个简单的技巧：

打印您正在比较的字符串的大小，因为有时您有像 \n 或 \r 这样的字符，当您打印字符串时这些字符是不可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:36:39.607

如果打印的内容相同，则在比较之前尝试修剪。例如：

`if (usersName.trim().equals(username.trim()) && usersPW.trim().equals(pw.trim())) {`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:41:30.523

首先，您似乎在下面的 sysout 语句中有错字。

```
System.out.println("\nEntered details: " + usersName + ", " + usersPW);
System.out.println("\nSystems details: " + userName + ", " + pw); //Should be username 
```

其次，您可能想要修剪字符串以获得更好的字符串比较。有时从文件或控制台读取的字符串可能包含不需要且难以捕获的空字符串，例如空格和制表符。这些可以通过在字符串上调用 .trim() 方法来删​​除。

因此，请尝试改用以下代码：

```
if (usersName.trim().equals(username.trim()) && usersPW.trim().equals(pw.trim())) {
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T12:43:04.607

```
usersName.equals(username) && usersPW.equals(pw). 
```

我也遇到过这些问题，这种相等性总是很棘手，尝试**修剪**要比较的**字符串**，以及是否可以根据它们的长度比较这些字符串。

```
if (usersName.trim().equalsIgnoreCase(username.trim()) && usersPW.trim().equalsIgnoreCase(pw.trim())) 
```

**或者**
`if (usersName.trim().length()==username.trim().length && usersPW.trim().length()==pw.trim().length))`

# c# - 如果另一个事件发生在两者之间，调度程序计时器如何在滴答事件中执行其工作？这段代码有什么问题？

> ID：14910291
> 
> 赞同：2
> 
> 时间：2013-02-16T12:27:45.550
> 
> 标签：c#, wpf, timer

在过去的几天里，我一直在研究 DispatcherTimer，但我仍然无法理解一些东西。以下是我目前所了解的，

1.  tick 事件不会同时发生两次[link](https://stackoverflow.com/a/7807903/2006434)
2.  无需担心对象的所有者线程，因为调度程序计时器会自动执行 UI 线程中的所有工作
3.  滴答的时间可能不是很准确，因为滴答本质上是从队列中执行的

现在我不清楚的是如果有另一个事件在滴答事件之间运行，则执行代码的顺序。我有一个测试 WPF 应用程序，它使用一个 DispatcherTimer，其滴答事件执行 2 个功能。`firstStep()`并按`secondStep()`顺序。

将`firstStep()`变量设置为`null`同时`secondStep()`将其设置为非空值。设置值后， secondStep() 将启动一个包含 Completed 事件的故事板，该事件尝试访问此变量。

所以我的问题是，如果我们保持计时器运行，那么 Completed 事件是否可能介于`firstStep()`and函数之间？`secondStep()`我编写了一个测试应用程序，似乎就是这种情况，最终我们将达到一个状态，即当 Completed 事件被执行时变量为空。但是我不明白这是怎么发生的，因为`firstStep()`并按`secondStep()`顺序执行，所以在这两个函数之间应该不可能执行 Completed 事件（或者我在这里错了）。UI 线程是否并行执行 tick 和 Completed 事件？

有人可以详细解释一下 UI 线程是如何按顺序执行事件的，例如示例的故事板完成事件和 dispatcherTimer 的滴答声？感谢您的阅读，**非常感谢**您的评论，我正在努力解决这个问题。以下是我使用的测试代码，运行一段时间后最终会报错。

```
public partial class Window1 : Window
{
    public Window1()
    {
        InitializeComponent();

        storyBoardTest = new Storyboard();
        storyBoardTest.Completed += new EventHandler(storyBoardTest_Completed);
        DoubleAnimation animation = new DoubleAnimation(1, 0.9, new Duration(TimeSpan.FromSeconds(1)));
        Storyboard.SetTarget(animation, this);
        Storyboard.SetTargetProperty(animation, new PropertyPath(UIElement.OpacityProperty));
        storyBoardTest.Children.Add(animation);

        DispatcherTimer dt = new DispatcherTimer();
        dt.Interval = TimeSpan.FromMilliseconds(500);
        dt.Tick += new EventHandler(dt_Tick);
        dt.Start();

    }

    private Window windowTest = null;
    private Storyboard storyBoardTest = null;

    void dt_Tick(object sender, EventArgs e)
    {
        firstStep();
        secondStep();
    }

    private void firstStep()
    {
        windowTest = null;
    }

    private void secondStep()
    {
        windowTest = this;
        storyBoardTest.Stop();
        storyBoardTest.Begin(this);
    }

    void storyBoardTest_Completed(object sender, EventArgs e)
    {
        //Attempt to access object throws null error. Why?
        windowTest.Title = "test";
        windowTest = null;
    }
} 
```

调用栈：

WpfApplication1.exe!WpfApplication1.Window1.storyBoardTest_Completed(object sender = {System.Windows.Media.Animation.ClockGroup}, System.EventArgs e = null) 第 63 行 C# PresentationCore.dll!System.Windows.Media.Animation.Clock.FireEvent (System.Windows.EventPrivateKey 键) + 0x5b 字节
PresentationCore.dll!System.Windows.Media.Animation.Clock.RaiseAccumulatedEvents() + 0x160 字节
PresentationCore.dll!System.Windows.Media.Animation.TimeManager.RaiseEnqueuedEvents() + 0x60字节
PresentationCore.dll!System.Windows.Media.Animation.TimeManager.Tick() + 0x28a 字节
PresentationCore.dll!System.Windows.Media.MediaContext.RenderMessageHandlerCore(object resizedCompositionTarget) + 0xbc 字节
PresentationCore.dll!System.Windows.Media.MediaContext.AnimatedRenderMessageHandler(object resizedCompositionTarget) + 0x9d 字节

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:49:59.607

每 500 毫秒，您将启动一个运行一秒钟的 Storyboard。这将不可避免地导致两个连续`Completed`事件而没有中间`Tick`事件。

因此，您必须检查是否`windowTest`已经`null`在您的`Completed`处理程序中：

```
void storyBoardTest_Completed(object sender, EventArgs e)
{
    if (windowTest != null)
    {
        windowTest.Title = "test";
        windowTest = null;
    }
} 
```

即使 Storyboard 的运行时间少于 500 毫秒，也会有问题。由于`Storyboard.Completed`事件以与事件相同的方式附加到 Dispatcher 队列，`DispatcherTimer.Tick`并且 DispatcherTimer 和 Storyboard 的时间不准确，因此两个事件处理程序的执行顺序不可靠。因此，两个`Completed`事件可能在没有中间`Tick`事件的情况下发生。

* * *

您可以添加一些跟踪输出以查看两个处理程序在同一个线程中运行。

```
void dt_Tick(object sender, EventArgs e)
{
    Trace.TraceInformation("Tick: {0}", Thread.CurrentThread.ManagedThreadId);
    ...
}

void storyBoardTest_Completed(object sender, EventArgs e)
{
    Trace.TraceInformation("Completed: {0}", Thread.CurrentThread.ManagedThreadId);
    ...
} 
```

# riak - 我需要 riak 来运行走廊（单独）吗？

> ID：14910294
> 
> 赞同：0
> 
> 时间：2013-02-16T12:27:59.843
> 
> 标签：riak

在走廊配置的 taskman 部分有一个关于 riak 的部分。我想知道 riak 是否需要运行 API。

```
"taskman": {
    "numWorkers": 4,
    "pagingTiming": 2000,
    "defaultScanTime": 5000,
    "attempts": 8,
    "heartbeat": 10000,
    "store": {
      "type": "riak",
      "servers": ["localhost:8098"]
    },
    "redis": {
      "host": "localhost",
      "port": 6379
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:33:58.277

如果您查看在 github 上添加的提交：

[https://github.com/Singly/hallway/commit/5eb59ae0185373c89f401cf5024f35cb2719f033](https://github.com/Singly/hallway/commit/5eb59ae0185373c89f401cf5024f35cb2719f033)

从 17 天前看来，是的，Riak 是配置中任务元数据的*默认*K/V 存储。

再四处寻找，发现这是用户可配置的，可以更改为“fs”或“mem”：

[https://github.com/Singly/hallway/pull/758#issuecomment-12725475](https://github.com/Singly/hallway/pull/758#issuecomment-12725475)

# android - 如何确保从特定活动中调用服务

> ID：14910298
> 
> 赞同：0
> 
> 时间：2013-02-16T12:28:31.953
> 
> 标签：android, android-service

在 android 中，如何确保`service`我在应用程序中拥有的 只会通过`activity`应用程序内的一个被调用。

（换句话说，我想将服务限制为仅由某个活动播放，甚至不能由该应用程序中的其他活动播放）

我试着学习`Intent-filters`，但有点困惑。

如果可能的话，有人可以举个例子吗？

**谢谢你**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:43:20.680

使用上下文。[startService](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)（意图服务）从您的活动中启动服务。尽管名称它不只是启动服务。如果服务已经在运行，它只是调用它。

从服务的角度来看，服务将调用其 onStartCommand(...) 方法。

只有同一应用程序中的活动才能以这种方式调用/启动服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:46:47.473

如果您`exported="false"`在`<service .. />`AndroidManifest.xml 的元素中设置，则该服务不能被您自己的应用程序之外的活动调用。

我知道没有办法限制对应用程序中任何特定活动的访问，但这似乎是一个不那么紧迫的问题。假设您可以信任自己的代码？

# c# - 在局域网上访问 ODBC DSN

> ID：14910301
> 
> 赞同：0
> 
> 时间：2013-02-16T12:28:36.250
> 
> 标签：c#, odbc, dsn

我已经用谷歌搜索了，但没有找到连接字符串来访问 ODBC DSN for MS ACCESS over LAN 这是我到目前为止所拥有的，但只能在本地机器上工作：

```
<connectionStrings>
  <add name="conStr" connectionString="Dsn=DSN_NAME_HERE" />
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:15:07.743

shf301 的建议还有另一种选择。您可以获得一些称为 ODBC-ODBC Bridge 的软件，它允许您访问远程计算机上的 DSN。基本上，您在 Access 数据库所在的机器上安装一个服务器进程，并设置一个系统 DSN 来连接它。然后在远程机器上安装网桥的客户端并定义一个指向远程 DSN 的本地 DSN。与 shf301 建议的方案相比，这可能具有一些优势，因为就访问而言，所有连接都是本地的。这些网桥通常也可以在 Windows 和 Unix 客户端上工作。许多公司出售 ODBC-ODBC 桥，包括[这里](http://www.easysoft.com/products/data_access/odbc_odbc_bridge/index.html)的一家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:44:43.940

ODBC DSN 是机器本地的——它们不能通过网络访问。

你有两个选择：

1.  在必须运行您的应用程序的每台机器上设置 ODBC DSN
2.  将网络共享的路径放在连接字符串中，不要使用 DSN：

您可以使用无 DSN 的 ODBC 连接：

```
Driver={Microsoft Access Driver (*.mdb, *.accdb)};
Dbq=\\serverName\shareName\folder\myAccess2007file.accdb;Uid=Admin;Pwd=; 
```

或使用 OLEDB 连接

```
Provider=Microsoft.ACE.OLEDB.12.0;
Data Source=\\serverName\shareName\folder\myAccess2007file.accdb; 
```

有关更多示例，请参见[ConnectStrings.com](http://www.connectionstrings.com/access-2007)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-27T14:53:09.403

好吧，我做了一个替代方案，它可以在网络上的所有其他系统上设置 ODBC 驱动程序，但是......从网络上为数据库提供地址（您需要共享一个文件夹才能将您的数据库放入其中）我发送了一些图片到显示更多

[![在此处输入图像描述](../Images/04e140acd6623bdff35d796424b91a32.png)](https://i.stack.imgur.com/OVNDS.png)

然后你点击网络按钮

[![在此处输入图像描述](../Images/09ecee12b6da9864c0335b8410aa4b7c.png)](https://i.stack.imgur.com/byY4e.png)

然后你给它数据库所在的共享文件夹的地址，然后点击完成按钮

[![在此处输入图像描述](../Images/e9d741d16dfb8f84dd4957dd9d7265dd.png)](https://i.stack.imgur.com/my7QI.png)

# android - 如何在不使用支持库的情况下实现水平滑动？

> ID：14910304
> 
> 赞同：9
> 
> 时间：2013-02-16T12:29:02.867
> 
> 标签：android, android-viewpager, fragment, android-support-library, native-methods

如果我不需要授予对旧版本 android 的支持并且可以只使用 API 17，是否有另一种方法来实现广为宣传的水平滑动（如在 gmail 中）而不使用 viewpager、fragmentsactivities（新 API 已经有 Fragments。 ..) 等摆脱支持库？

我找到的所有关于水平滑动的教程都展示了如何使用支持库和 FragmentActivities 来做到这一点。否则，如果我不能使用它们的原生类和方法，那么新 API 的优势是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T13:32:56.273

> 摆脱支持库

`ViewPager`仅存在于 Android 支持库中。Android 支持库不仅仅用于向后移植。

> 新的 API 已经有片段

`ViewPager`可以使用本机 API 级别 11 片段，但您可能需要创建自己的`PagerAdapter`. 或者，您可以不使用`ViewPager`任何片段，只对页面使用普通对象`View`或`ViewGroup`对象。

> 是否有另一种方法来实现广为宣传的水平滑动

欢迎您编写自己的替换`ViewPager`. 大多数开发人员更喜欢重用`ViewPager`，以降低开发和维护成本。

还有`HorizontalScrollView`，一个开源的`HorizontalListView`浮动，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T21:49:58.777

您可以编写自己的`FragmentPagerAdapter`作品，`android.app.Fragment`而不是`android.support.v4.app.Fragment`尽量减少对支持库的依赖。您只需要为适配器创建自己的类（基于`FragmentPagerAdapter`来自支持库的源可以在文件夹中找到`<android-sdks>/extras/android/support/v4/src/java/android/support/v4/app/`）。只有修改位于导入部分 - 您应该引用`Fragment`，`FragmentManager`并且`FragmentTransaction`从而`android.app`不是`android.support.v4.app`。

# c# - 两个html页面之间的数据传输方式

> ID：14910310
> 
> 赞同：0
> 
> 时间：2013-02-16T12:29:48.587
> 
> 标签：c#, cookies

我试图在一个页面中显示超链接，当用户单击链接时，页面正在导航，但我想获取超链接的名称并在不同的网页中显示为标签。在这里我正在尝试使用 cookie，但是 cookie 只需要数据库的最后一个值，可以将所有值存储在 cookie 中吗？谢谢

```
 String sql1 = "select title,song_id from up_song where Song_type='Indian Pop Album'";
    adpt = new SqlDataAdapter(sql1, cn);
    ds = new DataSet();
    adpt.Fill(ds, "title1");
    var last6Uploaded1 = ds.Tables["title1"]
                              .AsEnumerable()
                              .OrderByDescending(r=> r.Field<int>("song_id"))
                              .Take(2);
    foreach (DataRow row in last6Uploaded1)
    {

        int songID = row.Field<int>("song_id");
        // you don't need the array of hyperlinks neither
        HyperLink hl = new HyperLink(); 
        hl.ID = "hyperlink" + songID;
        string title = row.Field<string>("title");
        hl.Text = title;
        hl.NavigateUrl = "Downloadpage.aspx";
        hl.ForeColor = System.Drawing.Color.White;
        HttpCookie coo = new HttpCookie("song");
        coo["sogtit"] = title;
        Response.Cookies.Add(coo);
        Panel2.Controls.Add(hl);
        Panel2.Controls.Add(new LiteralControl("<br>"));
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:39:33.363

Cookie 可以存储多个值，您可以这样做：

```
string title = row.Field<string>("title");
string song_id = row.Field<int>("song_id").ToString();

HttpCookie coo = new HttpCookie("song");
cookie.Values.Add("songtit", title);
cookie.Values.Add("song_id", song_id); 
```

您将检索目标页面中的值，如下所示：

```
string title = response.Cookies["song"]["songtit"];
string song_id = response.Cookies["song"]["song_id"]; 
```

在网页之间传递数据的另一种常见方式是通过从`QueryString`目标页面中获取的请求参数。像这样设置您的网址：

```
hl.NavigateUrl = "Downloadpage.aspx?name=" + title; 
```

在`Downloadpage.aspx`它的`Page_Load`事件处理程序集中：

```
yourLabel.Text = Request.QueryString["name"]; 
```

where`yourLabel`是您要为其设置文本的标签的名称。

您可以通过请求传递多个参数，如下所示：

```
hl.NavigateUrl = "Downloadpage.aspx?name=" + title + "&otherParam=" + otherParam; 
```

在目标页面中，您可以通过 获取第二个参数的值`Request.QueryString["otherParam"]`。

# java - 会话 ID 对另一台服务器有意义吗？

> ID：14910313
> 
> 赞同：0
> 
> 时间：2013-02-16T12:30:06.997
> 
> 标签：java, http, session, servlets, url-rewriting

[HttpServletResponse#encodeRedirectURL](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#encodeRedirectURL%28java.lang.String%29)为重定向请求添加`JSESSIONID`（url-rewriting）。
我想知道，这只有在我们重定向到 Web 应用程序中的另一个 servlet 时才有意义，对吧？
否则，如果我们重定向到另一台服务器，我们在服务器中创建的内容如何对另一台服务器`JSESSIONID`有任何用途（有意义）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:39:59.960

你是对的。会话 ID 仅对给定的 webapp 有意义。这就是为什么 javadoc 说：

> 对指定的 URL 进行编码以在 sendRedirect 方法中使用，或者，**如果不需要编码，则返回未更改的 URL**。此方法的实现**包括确定是否需要在 URL 中编码会话 ID 的逻辑**。

（强调我的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T12:49:20.883

假设您有一个集群：具有相同应用程序集的多台服务器一致地部署（甚至是单个应用程序）。

如果启用了会话集群，则一个服务器设置的 JSESSIONID（无论是在 cookie 中还是在 URL 中编码）对该集群中的另一台服务器很有用，因此另一台服务器上的同一应用程序可以使用她的会话数据来回答用户的*请求*最初存储在第一台服务器上，甚至补充相同的会话数据。

通常最好重定向到同一台服务器，只要它启动，对于数据局部性，以限制集群中的喋喋不休。

看

*   [老板](http://www.jboss.org/jbossclustering)
*   [雄猫](http://tomcat.apache.org/tomcat-6.0-doc/cluster-howto.html)
*   [红陶](http://terracotta.org/)
*   等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:35:14.323

在 Java EE 中，应用程序容器负责会话管理，默认情况下使用 cookie。

此链接[在什么条件下创建 JSESSIONID？](https://stackoverflow.com/questions/595872/under-what-conditions-is-a-jsessionid-created)有关于**JSESSIONID**及其创建方式的详细说明。

另请参阅这篇文章[http://javarevisited.blogspot.in/2012/08/what-is-jsessionid-in-j2ee-web.html](http://javarevisited.blogspot.in/2012/08/what-is-jsessionid-in-j2ee-web.html)

# xml - 使用 PHP 在特定节点之前更新 XML 插入节点

> ID：14910314
> 
> 赞同：0
> 
> 时间：2013-02-16T12:30:12.080
> 
> 标签：xml, domdocument, php

我有一个显示客户端徽标的 XML，并希望通过 PHP 面板添加徽标。当前的 XML 代码是：

```
 <item>
        <image><![CDATA[images/clients_5.gif]]></image>
    </item>
    <item>
        <image><![CDATA[images/clients_6.gif]]></image>
    </item>
    <item>
        <image><![CDATA[images/clients_7.gif]]></image>
    </item>
    <item>
        <image><![CDATA[images/clients_8.gif]]></image>
    </item>
    <item>
        <image><![CDATA[images/clients_9.gif]]></image>
    </item>
    <item>
        <image><![CDATA[images/clients_10.gif]]></image>
    </item>
    <item>
        <image><![CDATA[images/clients_11.gif]]></image>
    </item>
    <item>
        <image><![CDATA[images/clients_12.gif]]></image>
    </item>
    <item>
        <image><![CDATA[images/clients_13.gif]]></image>
    </item>
    <item>
        <image><![CDATA[images/clients_14.gif]]></image>
    </item>
    <item>
        <image><![CDATA[images/clients_15.gif]]></image>
    </item>

    <footer><![CDATA[copyright evolve entertainment and marketing solutions, 2009]]></footer>

</clients> 
```

PHP代码是：

```
if(!empty($_FILES["logo"]["name"]))
{
    $handle = new Upload($_FILES["logo"]);  
    $imgId = uniqid();      
    if ($handle->uploaded) 
    {
        $handle->file_name_body_pre =   $imgId;
        $handle->image_resize            = false;
        $handle->Process(ROOT_PATH.'images/');
        $handle->processed;
    }
    $imgName = $imgId.$_FILES["logo"]['name'];

    $parent_path = "//main";
    $next_path = "//main/clients/footer"; 
    $xpath = new DomXPath($doc); 
    $parent = $xpath->query($parent_path); 
    $next = $xpath->query($next_path);

    $imageNode = $doc->createElement('image');
    $cdata=$doc->createCDATASection($imgName);
    $imageNode = $imageNode->appendChild($cdata);

    //$parent->item(0)->insertBefore($imageNode, $next->item(0)); 

    $section = $doc->insertBefore($imageNode,$next->item(0));

    $doc->save(XML_PATH.'clients.xml'); 
```

我想在页脚之前或子节点的顶部添加新节点。当我尝试上面的代码时，它会出现错误：未捕获的异常 'DOMException' 和消息'未找到错误'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:03:20.607

> 未捕获的异常“DOMException”和消息“未找到错误”

这意味着找不到节点。您没有指定该行，但我认为它是：

```
$section = $doc->insertBefore($imageNode, $next->item(0)); 
```

这是有问题的。`$doc`是根元素，但它不是 的父元素`$next->item(0)`。要让它工作，*refnode*（这里：）`$next->item(0)`需要是`$doc`- 但它不是的孩子。

相反，这是一个简单但广泛的示例，它也提供了一些更好的代码：

```
$refnode = $next->item(0);
$parent  = $refnode->parentNode;
$section = $parent->insertBefore($imageNode, $refnode); 
```

当然你不需要使用那么多变量，但是这个例子应该引导你，特别是看到`$refnode->parentNode`在它的任何子节点之前获取要插入的正确节点。

是的，这是错误的：

```
$imageNode = $imageNode->appendChild($cdata); 
```

您真的应该再次检查手册以了解您使用的所有功能。只是为了确保您*知道*这些函数返回什么。

# android - 使用 Android 通过 HTTPs 发出 POST 请求

> ID：14910315
> 
> 赞同：0
> 
> 时间：2013-02-16T12:30:19.897
> 
> 标签：android, post, ssl, https

我有一个大问题。我必须将我的应用程序中的一些参数发布到 URL。但是，当我尝试在 WebView 对象中执行此操作时，它会给我一个异常，上面写着“不受信任的证书”（该异常是由覆盖 WebViewClient onReceivedSslError() 的方法引发的）。我怎样才能与服务器正确握手？你能给我一些建议吗？我快疯了...

真的，真的，谢谢...

编辑：这就是我定义我的网络视图的方式

```
webView = (WebView) myFragmentView.findViewById(R.id.webView);
webView.setWebViewClient(new WebViewClient(){
        @Override
        public void onPageFinished(WebView view, String string){
            Log.debug(tag, "URL pagina terminata :"+webView.getUrl() );
            if(progress!=null) 
                if(progress.isShowing()){progress.dismiss();}
        }

        @Override
        public void onReceivedError(WebView view, 
                int errorCode,
                String description, 
                String failingUrl) {
            Log.error(tag, "ERROR:" + description );
           }

        @Override
        public void onReceivedSslError(WebView view,
                SslErrorHandler handler, SslError error) {
            super.onReceivedSslError(view, handler, error);
            Log.error(tag, "SSL Error received: "+ error.getPrimaryError());

            handler.proceed();
        }

    }); 
```

这就是我在 WebView 中创建 postRequest 的方式

```
webView.postUrl(url, EncodingUtils.getBytes(postParameters, "base64")); 
```

这是 LogCat 输出：

```
SSL Error received: 3 - Untrusted Certificate 
```

现在，谷歌搜索了一下，我发现需要检查证书的有效性并将钥匙串导入本地密钥库。但问题是我 0 不知道从哪里开始...... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:58:12.733

如果**安全不是优先事项，**您可以尝试调用`handler.proceed()`您的`onReceivedSslError()`，不要调用该`super`方法。

**如果安全是优先事项**（应该是）：

我自己没有为 webView 尝试过这个，但是尝试像这样设置你的证书： [Android WebView setCertificate issues SSL questions](https://stackoverflow.com/questions/6511434/android-webview-setcertificate-issues-ssl-problems)

要获取实际证书，您可以将它们加载到浏览器中（通过在浏览器中打开 url 时接受警告）并从那里导出它们，或者您可以使用如下所述的 openssl 工具： [http://blog。 crazybob.org/2010/02/android-trusting-ssl-certificates.html](http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html)

# apache - Intranet 中无法访问虚拟主机

> ID：14910321
> 
> 赞同：0
> 
> 时间：2013-02-16T12:30:40.130
> 
> 标签：apache, jsp, tomcat, virtualhost

是否可以使用可在 Intranet 中访问的 tomcat 和 apache 创建虚拟主机？

我是一个使用jsp和tomcat的新手，但是我已经能够创建一个虚拟主机，但是在内网中无法访问它。我必须做什么才能在 Intranet 上访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T10:33:03.710

这可以使用 tomcat 和 apache 创建一个虚拟主机。但是为了使它可以在本地 Intranet 中访问，您需要将您的 ip 地址条目添加到 Intranet 成员机器的 /etc/hosts 文件中，除非它们无法识别您创建的虚拟主机。

这根本不可行，因为 /etc/hosts 文件由 root 本身管理，并且在 root 每次重新启动时都会刷新。您可以在文件中添加一个粘性位，但这就像对机器/公司策略的入侵，不应该这样做。

:)

# android - 用于完成触摸的 android MotionEvent

> ID：14910324
> 
> 赞同：0
> 
> 时间：2013-02-16T12:31:38.363
> 
> 标签：android, textview

我有一个带有图像的文本视图，我想在使用触摸文本视图时图像会改变，当使用完成触摸图像将变为旧图像时，我试过这样

```
tv_addToBasket.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    tv_addToBasket.setCompoundDrawablesWithIntrinsicBounds(0, R.drawable.favorite, 0, 0);
                }
                return false;
            }
        }); 
```

但我不知道`MotionEven`在使用完成触摸时留下触摸是什么意思

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T12:52:32.163

请查看以下是否解决了您的问题（根据记忆，尚未尝试编译此代码）-

```
if ((event.getAction() & MotionEvent.ACTION_MASK) == MotionEvent.ACTION_DOWN) {
//down
}
else if ((event.getAction() & MotionEvent.ACTION_MASK) == MotionEvent.ACTION_UP) {
//up
} 
```

您还可以从某些 API 级别使用 event.getActionMasked()。

# javascript - Chrome 和 JS 的 onclick 功能？

> ID：14910327
> 
> 赞同：8
> 
> 时间：2013-02-16T12:32:20.740
> 
> 标签：javascript, jquery, debugging, google-chrome

我想测试 chrome 看看它是否可以告诉我`onclick`注册事件将运行什么方法。

所以我想看看哪个JS函数执行shen人们提出了一个问题：

[http://i.stack.imgur.com/3mbce.jpg](https://i.stack.imgur.com/3mbce.jpg)

![在此处输入图像描述](../Images/5d7ad30af79c52bbf88734e69cee1b05.png)

但是我找不到实际的代码。

chrome是否可以在“onclick”时找到执行哪个JS？

# 编辑

我可以使用控制台来做到这一点：

```
$.each($(".vote-up-off").data("events"), function(i, e) {  // this will work till jq 1.8
  console.log(this)
}); 
```

这是我们的朋友：

![在此处输入图像描述](../Images/f811093488854984f9e6dc12967c56bb.png)

但是，**嘿**！，我希望 chrome 完成这项工作:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:50:58.033

一个潜在的见解可能是在您的控制台中输入它并按回车键：

```
$('.vote a').data('events').click; 
```

jQuery 存储所有绑定到[data() 对象内部的](https://stackoverflow.com/a/571087/427992)对象的事件；所以如果你想查看一个特定的事件绑定，这是你要看的地方。控制台将返回一个对象。展开`handler`--> `<function scope>`-->`Closure`您现在可以看到与此单击事件相关的所有 JavaScript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T13:10:02.193

一些可用的解决方法你可以试试这个书签概念 [视觉事件](http://www.sprymedia.co.uk/article/Visual+Event)

将书签添加到您的浏览器书签（启用书签栏始终显示）并在您要调试的页面上单击书签

PS：它适用于Jquery

# php - jQuery 表单验证 equalTo 隐藏字段

> ID：14910329
> 
> 赞同：0
> 
> 时间：2013-02-16T12:32:41.417
> 
> 标签：php, jquery, captcha, hidden-field

我正在处理一个在提交之前用 jQuery 验证的表单。其中一个字段是验证码。

这个想法很简单，验证码显示为图像并存储在隐藏字段中。当用户在输入字段中输入验证码时，它应该等于隐藏字段的值。这是我拥有的 jQuery 代码；

```
<script>
$(document).ready(function(){
 $("#register").validate({ 
errorElement: 'div', ignore: 'hidden',
rules: {
          password: { 
                required: true
          }, 
          password2: { 
                required: true, equalTo: "#password"
          },
          agree: {
              required: true
          },
          captcha: {
              required: true, equalTo: "#captcha2"
          }
      },
messages: {
password2: "Please repeat the same password",
captcha: "The captcha you entered is wrong",
agree: "You have to be at least 16 years old and agree to the terms of service" 
}
});
});
</script> 
```

表单的 html 代码更简单，但我只展示其中的一部分。

```
<p>
    <img src='/includes/captcha.php'  />
</p>
<p>
  <label for="Captcha">Captcha</label>
    <em> *</em><input type="text" name="captcha" id="captcha" size="25" 
   class="require"   minlength="5" />
<input type="hidden" name="captcha2" id="captcha2" 
 value="<?php echo    $_SESSION['captcha'];?>" /> 
```

这应该有效。但是，问题是我不断收到我在 jQuery 代码中设置的错误，“您输入的验证码是错误的”。谁能告诉我为什么代码不起作用？

顺便说一句，我检查了隐藏字段的值，它与验证码相同，所以有效

更新：好的，这有点奇怪。当我回显 session['captcha'] 时，我得到的值与隐藏字段中的值不同。当我回显它时，我得到了以前的验证码。因此，假设验证码值为 abc。当我刷新验证码+隐藏字段更改为 def。但是当我回显 session['captcha'] 时，我仍然得到 abc。

# ios - 设置随机应用背景图片 iOS 6

> ID：14910336
> 
> 赞同：1
> 
> 时间：2013-02-16T12:33:37.660
> 
> 标签：ios, sdk, background, uiimageview

我想为我的应用程序设置一个随机背景图像，这样每次有人启动应用程序时都会显示一个新的背景图像。

这是我迄今为止在该`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions` 方法中尝试过的内容：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSMutableArray *myImageNames = [NSMutableArray arrayWithObjects:@"image1.png", @"image2.png", @"image3.png", nil];
   int index = arc4random() % [myImageNames count];
   UIColor *background = [[UIColor alloc] initWithPatternImage:[myImageNames objectAtIndex:index]];
   self.window.backgroundColor = background;
} 
```

我没有错误，但我不工作......有什么想法吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:43:48.023

而不是委托类将此代码放在您的主视图控制器的 initWithNibName 方法中：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        NSMutableArray *myImageNames = [NSMutableArray arrayWithObjects:@"image1.png", @"image2.png", @"image3.png",@"image4.png", @"image5.png",@"image6.png",   nil];
        int index = arc4random() % [myImageNames count];

        self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:[myImageNames objectAtIndex:index]]];
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T12:53:03.903

我认为您在从图像设置背景颜色时缺少代码中的某些内容

看`[myImageNames objectAtIndex:index]`，这段代码将返回刚刚的字符串对象。

因为您只是将 传递`string`给需要`image`.

所以你应该把那段代码改成这个

`[UIImage imageNamed:[myImageNames objectAtIndex:index]`.

现在您的代码将如下所示

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {
   NSMutableArray *myImageNames = [NSMutableArray arrayWithObjects:@"image1.png", @"image2.png", @"image3.png", nil];
  int index = arc4random() % [myImageNames count];
  UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:  [myImageNames objectAtIndex:index]]];
  self.window.backgroundColor = background;
  [background release];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T13:22:20.997

您需要考虑两件事。首先，您需要将 传递给`UIImage`，而不是传递`NSString`给`initWithPatternImage`。代码应该是：

```
 NSMutableArray *myImageNames = [NSMutableArray arrayWithObjects:@"image1.png", @"image2.png", @"image3.png", nil];
  int index = arc4random() % [myImageNames count];
  UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:  [myImageNames objectAtIndex:index]]];
  self.window.backgroundColor = background;
  [background release]; 
```

另一件事是，当 iOS 实例化主故事板时，它会为您做一些事情。其中之一是分配和初始化`self.window`属性，但它还实例化包含在故事板中的主视图控制器并将其分配给`UIWindow`'`rootViewController`属性。这意味着如果您的主视图控制器创建一个`UIView`（几乎每个视图控制器都这样做），它的背景将在视觉上覆盖`UIWindow`背景，除非它被设置为透明。由于设置透明`UIView`可能不是您想要的，而且顺便说一句很尴尬，我建议按照@Dilip 的回答将背景设置为根视图控制器的视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T12:45:01.170

试试这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSMutableArray *myImageNames = [NSMutableArray arrayWithObjects:@"image1.png", @"image2.png", @"image3.png", nil];
   int index = arc4random() % [myImageNames count];
   UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:[myImageNames objectAtIndex:index]]];
   self.window.backgroundColor = background;
   [background release];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T11:48:43.013

我得到了我的工作感谢大家谁回答，谢谢大家！

代码应该是：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSMutableArray *myImageNames = [NSMutableArray arrayWithObjects:@"image1.jpg", @"image2.jpg", @"image3.png", nil];
    int index = arc4random() % [myImageNames count];
    UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:[myImageNames objectAtIndex:index]]];
    self.window.backgroundColor = background;
    // Override point for customization after application launch.
    return YES;
} 
```

# objective-c - 使用 valueForKey 检查所有对象是否不相等的可重用方法

> ID：14910340
> 
> 赞同：0
> 
> 时间：2013-02-16T12:34:03.493
> 
> 标签：objective-c, compare

我已经使用这种方法几个小时了。它应该简单地检查作为`otherCards`isEqual 传入的卡片的属性是否与这个（自我）类实例的相同属性。但我正在扯掉我的头发 - 它给出了错误的结果

```
 (BOOL)otherCards: (NSArray *)otherCards allHaveUnequalAttribute: (NSString *)key
{
    NSArray *values = [NSArray arrayWithArray:[otherCards valueForKey:key]];
    int countUnequalMatches = 0;

        for (NSNumber *setValue in values) {
            if (![[self valueForKey:key] isEqual:setValue]) {
                countUnequalMatches++;}
        }
    NSLog(@"countUnequalMatches %d values count: %d", countUnequalMatches, [values count]);

    if (countUnequalMatches == [values count]) return  YES ?: NO;
} 
```

它是这样调用的：

```
 if ([self otherCards:otherCards allHaveUnequalAttribute:CARD_SHAPE]) {
        NSLog(@"All unequal");
    } else {
        NSLog(@"One or more card equal");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:19:22.360

如果 (countUnequalMatches == [values count]) return YES ?: NO; 我自己发现了这个错误。

应该是： if (countUnequalMatches == [otherCards count]) return YES ?: NO;

因为我使用 Set 作为计算唯一项目的一种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:31:26.027

这是谓词非常适合处理的事情。

```
-(BOOL)otherCards: (NSArray *)otherCards allHaveUnequalAttribute: (NSString *)key
{
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"%K == %@", key, [self valueForKey:key]];

    NSArray *equalCards = [otherCards filteredArrayUsingPredicate:pred];

    return equalCards.count == 0;
} 
```

# html - 离开悬停状态时应用动画

> ID：14910341
> 
> 赞同：0
> 
> 时间：2013-02-16T12:34:08.357
> 
> 标签：html, css, css-selectors, css-transitions

我有一些我在网上找到的动画。当我将已分配类的 div 悬停时，我可以应用它们，但是当我离开悬停时，我无法弄清楚如何制作动画。

我希望得到的是一个控制栏，当我悬停时它会向上滑动，当我离开时它会向下滑动。

HTML：

```
<div id="controls" class="cAnimated fadeInUp fadeInDown">
        <div id="defaultBar">
               <div id="progressBar"></div>
        </div>
   <button id="playButton"><img src="images/icons/play.png" /></button>
   <button id="vol" onclick="showSlider()"><img src="images/icons/vol.png" /></button>      
   <button id="containSlider"> 
   <input type="range" id="vSlider" min="0" max="1" step="0.1" value="0.5"/></button>
    <div id='containTime'><span id='timeDisplay'>0:00</span><span>/</span><span id='durationDisplay'>0:00</span></div>
   <button id="full"><img src="images/icons/full.png" /></button>
   <button id="mute"><img src="images/icons/mute.png" /></button>
 </div> 
```

CSS：

```
.animated:hover {
    -webkit-animation-fill-mode: both;
    -moz-animation-fill-mode: both;
    -ms-animation-fill-mode: both;
    -o-animation-fill-mode: both;
    animation-fill-mode: both;
    -webkit-animation-duration: 0.9s;
    -moz-animation-duration: 0.9s;
    -ms-animation-duration: 0.9s;
    -o-animation-duration: 0.9s;
    animation-duration: 0.9s;
}
.animated.hinge {
    -webkit-animation-duration: 2s;
    -moz-animation-duration: 2s;
    -ms-animation-duration: 2s;
    -o-animation-duration: 2s;
    animation-duration: 2s;
}
@keyframes fadeInUp {
    0% {
        opacity: 0;
        transform: translateY(5px);
    }

    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.fadeInUp:hover {
    -webkit-animation-name: fadeInUp;
    -moz-animation-name: fadeInUp;
    -o-animation-name: fadeInUp;
    animation-name: fadeInUp;
}
@keyframes fadeInDown {
    0% {
        opacity: 0;
        transform: translateY(-20px);
    }

    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.fadeInDown  {
    -webkit-animation-name: fadeInDown;
    -moz-animation-name: fadeInDown;
    -o-animation-name: fadeInDown;
    animation-name: fadeInDown;
} 
```

更多代码：http: [//jsfiddle.net/EaC82/](http://jsfiddle.net/EaC82/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:47:39.350

这使用 CSS 过渡更清晰：

```
 .fadeInUp {
    -webkit-transition: all 300ms ease;
    -moz-transition:    all 300ms ease;
    -o-transition:      all 300ms ease;
    -ms-transition:     all 300ms ease;
    transition:         all 300ms ease;
    -webkit-transform:  translate(0,10px);
    -moz-transform:     translate(0,10px);
    -o-transform:       translate(0,10px);
    -ms-transform:      translate(0,10px);
    transform:          translate(0,10px);
    opacity: 0;

}

.fadeInUp:hover {
    -webkit-transform:  translate(0,0);
    -moz-transform:     translate(0,0);
    -o-transform:       translate(0,0);
    -ms-transform:      translate(0,0);
    transform:          translate(0,0);
    opacity: 1;
} 
```

演示：http: [//jsfiddle.net/k3Y5x/](http://jsfiddle.net/k3Y5x/)

# android - 我可以在我的应用程序中使用内容解析器而不创建提供程序吗？

> ID：14910343
> 
> 赞同：0
> 
> 时间：2013-02-16T12:34:34.880
> 
> 标签：android, android-contentprovider

我正在阅读有关内容提供程序的开发人员指南，正如那里提到的那样，除非有需要，否则我不应该创建自己的提供程序。

所以我的问题是：

*   我可以在我的应用程序中使用内容解析器而不创建自己的提供程序吗？
*   最好的方法是什么？我是否应该始终使用内容解析器（并在必要时创建自己的提供程序）来对数据库执行所有操作或直接与 SQLiteHelper 类交谈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:29:01.270

> 我可以在我的应用程序中使用内容解析器而不创建自己的提供程序吗？

您可以将 a`ContentResolver`与任何其他现有的 一起使用`ContentProvider`，例如操作系统提供的那些（例如`ContactsContract`）。

> 我应该始终使用内容解析器（并在必要时创建自己的提供程序）来对数据库执行所有操作还是直接与 SQLiteHelper 类交谈

关于这个问题有不同的意见。就个人而言，我不是 的忠实粉丝`ContentProvider`，所以我只在需要时使用它，例如用于进程间通信。但是，有些人认为`ContentProvider`在应用程序中纯粹用于内部使用是很棒的。没有正确或错误的答案。

# windows - 易于使用的便携式可执行恶意软件调试器

> ID：14910348
> 
> 赞同：1
> 
> 时间：2013-02-16T12:34:57.700
> 
> 标签：windows, debugging, reverse-engineering, portable-executable, malware

我正在寻找每个类别的建议

*   自由
*   带电

易于使用的调试器适合便携式可执行（本机/非 .NET）恶意软件分析。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:22:55.000

在免费类别中，[Olly](http://www.ollydbg.de/ "奥利")是王者。如果您使用的是 Win XP 或更早版本，[SoftICE](https://en.wikipedia.org/wiki/SoftICE "软冰")也非常棒，尽管如今找到它​​的副本可能很困难。

在付费类别中，它是[IDA Pro](https://www.hex-rays.com/products/ida/index.shtml)，毫无疑问。Chris Eagle[写了一本很棒的书](http://nostarch.com/idapro2.htm "IDA 专业书籍")，向您展示了如何使用 IDA 进行高级逆向工程。

另外为了澄清 Marco，UPX 只能用于解压最初使用 UPX 打包的可执行文件。许多极其复杂的恶意软件二进制文件使用自定义打包技术，而使用 UPX 无法逆转这种技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:28:18.367

有一个免费的 Windows 调试器 (msdn.microsoft.com/en-us/windows/hardware/gg463009)

但是您可以使用 upx (upx.sourceforge.net) -> 开源解压 .exe 文件并使用广泛使用的免费调试器 ( [http://www.ollydbg.de/](http://www.ollydbg.de/) ) --> 我的建议

与便携式可执行文件一起使用的一种收费工具是 PE Explorer (www.heaventools.com/overview.htm)

另一个很棒的工具是 IDA ( [https://www.hex-rays.com/products/ida/support/tutorials/unpack_pe/manual.shtml](https://www.hex-rays.com/products/ida/support/tutorials/unpack_pe/manual.shtml) ) --> 我的推荐

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-31T11:31:08.643

如果您无法摆脱使用 OllyDbg 的 GUI 体验，您可以使用 32 位和 64 位的 X64Dbg。还有有用的插件。我通常使用 IDAPro 进行静态分析。

# objective-c - 未找到实例方法 - 用于 App Delegate 属性

> ID：14910353
> 
> 赞同：1
> 
> 时间：2013-02-16T12:35:22.120
> 
> 标签：objective-c, cocoa, warnings, appdelegate

好的，这是我的情况...

**我的 App Delegate 声明如下：**

```
@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;
@property (assign) ppDocumentManager* documentManager; 
```

**现在，从我尝试访问的不同位置`documentManager`，如下所示：**

```
AppDelegate* de = (AppDelegate*)[[NSApplication sharedApplication] delegate]; 
ppDocumentManager* docs = [de documentManager]; 
```

而且，在文件的顶部，我还添加了`@class AppDelegate;`以便编译器知道`AppDelegate`代表什么。

**它工作正常。**

* * *

**但是**，我不断收到警告：

```
Instance method '-documentManager' not found (return type defaults to 'id') 
```

我应该怎么做才能消除所有警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:47:10.170

好的，这对我有用：

*   为了避免循环引用的风险，我决定在文件`@class AppDelegate;`的开头使用 .`.m``documentManager`

然而，事实证明这是没有必要的。

我刚刚导入`AppDelegate.h`，一切都到位。

呼……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T12:48:18.607

我遇到了同样的问题，我发现它来自名为“AppDelegate”的 appdelegate，而不是像“MyAppDelegate”这样的自定义名称。

将我的课程重命名为“MyAppDelegate”，导入“MyAppDelegate.h”就成功了。

# php - 在magento的类别产品列表中的默认图像上显示另一个图像

> ID：14910354
> 
> 赞同：0
> 
> 时间：2013-02-16T12:35:24.133
> 
> 标签：php, jquery, magento

我正在开发一个 magento 网站。在我的类别产品列表页面 ( `catalog/products/list.phtml`)。我需要在默认图像上的鼠标上实现交换图像功能...（这里每个产品都有 2 个或更多图像，当鼠标悬停在默认图像上时，应该显示任何其他图像）

我是这个magento的新手..

有没有人帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:51:07.377

据我所知，magento 默认情况下仅在类别页面上加载 1 张图片，即“small_image”。如果要显示任何其他图像，则必须创建产品的完整实例

```
$_product = Mage::getModel('catalog/product')->load([product id]); 
```

然后循环浏览媒体库：

```
foreach ($_product->getMediaGalleryImages() as $image) {
  // assign the image you want to the product object
  $_product->setImage($image->getFile());
} 
```

完成后，您可以使用访问新图像

```
echo $this->helper('catalog/image')->init($_product, 'image')->resize(200, 350); 
```

以上将返回 200x350 的图像缓存版本的图像 url 将其
分配给图像的数据属性并使用 javascript 更改鼠标悬停时的 img src
您可能需要考虑使用 javascript 预加载所有这些鼠标悬停图像以提供用户最好的体验

# gwt - 为什么 GXT simplecombobox 在编辑器网格中无法正常工作？

> ID：14910358
> 
> 赞同：0
> 
> 时间：2013-02-16T12:36:10.687
> 
> 标签：gwt, gxt

我正在使用 gxt Editor Grid，其中一列配置了 Gxt 'SimpleComboBox'。当尝试从“组合框”中删除该值时，该值正在重新加载。只有当我将“SimpleComboBox”添加到网格时才会出现这种奇怪的行为。如果将相同的框添加到任何其他 gxt 组件，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:45:54.707

尝试设置 combo.setForceSelection(true);

# android - 如何从我的代码播放或恢复另一个音乐播放器的音乐

> ID：14910360
> 
> 赞同：12
> 
> 时间：2013-02-16T12:36:17.160
> 
> 标签：android, android-audiomanager, resume, android-music-player

在我的 Android 应用程序中，我想在暂停后播放或恢复播放的音乐。我让我的应用程序[通过发送广播暂停音乐](https://stackoverflow.com/questions/5129027/android-application-to-pause-resume-the-music-of-another-music-player-app)，但我无法让它播放或恢复音乐。

这是暂停的代码：

```
Intent i = new Intent("com.android.music.musicservicecommand");
i.putExtra("command", "pause");
sendBroadcast(i); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-06-24T23:49:40.873

这是我在测试这些后发现的。

我已经尝试并验证了这些命令可以正常工作。

```
// pause
Intent i = new Intent("com.android.music.musicservicecommand");
i.putExtra("command", "pause");
sendBroadcast(i);

// play
Intent i = new Intent("com.android.music.musicservicecommand");
i.putExtra("command", "play");
sendBroadcast(i);

// next
Intent i = new Intent("com.android.music.musicservicecommand");
i.putExtra("command", "next");
sendBroadcast(i);

// previous
Intent i = new Intent("com.android.music.musicservicecommand");
i.putExtra("command", "previous");
sendBroadcast(i); 
```

有关可用命令的更多信息：

```
public static final String SERVICECMD = "com.android.music.musicservicecommand";
public static final String CMDNAME = "command";
public static final String CMDTOGGLEPAUSE = "togglepause";
public static final String CMDSTOP = "stop";
public static final String CMDPAUSE = "pause";
public static final String CMDPLAY = "play";
public static final String CMDPREVIOUS = "previous";
public static final String CMDNEXT = "next"; 
```

取自： [https ://android.googlesource.com/platform/packages/apps/Music/+/master/src/com/android/music/MediaPlaybackService.java](https://android.googlesource.com/platform/packages/apps/Music/+/master/src/com/android/music/MediaPlaybackService.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T12:41:05.670

尝试使用

```
Intent i = new Intent("com.android.music.musicservicecommand");
i.putExtra("command", "togglepause");
sendBroadcast(i); 
```

**更新**

尝试以下操作：

```
Intent i = new Intent("com.android.music.musicservicecommand.togglepause");
i.putExtra("command", "togglepause");
sendBroadcast(i); 
```

# heroku - 升级到 Rails 3.1 资产管道证明有问题

> ID：14910361
> 
> 赞同：0
> 
> 时间：2013-02-16T12:36:26.987
> 
> 标签：heroku, ruby-on-rails-3.1, asset-pipeline

我正在尝试升级已经部署到 Heroku 的应用程序以使用 Rails 3.1 中的资产管道。我按照[RailsCasts #282](http://railscasts.com/episodes/282-upgrading-to-rails-3-1)中的所有必要步骤操作，我的应用程序在本地运行良好。但是，当我推送到 Heroku 并尝试访问根路径时，我遇到了 sort 的错误`"foobarbaz.png" is not precompiled`。如果我从页面中删除第一个图像，我会在下一个图像中得到相同的错误，依此类推。所有图像都已推送到 Heroku，因此无需尝试引用不存在的图像。

我注意到当我将应用程序推送到 Heroku 时，我看到/没有看到以下输出：

```
-----> Preparing Rails asset pipeline
       Running: rake assets:precompile 
```

我尝试在`rake assets:precompile`本地运行并不断收到以下错误：

```
rake aborted!
production database is not configured 
```

由于使用 Heroku，我的 database.yml 文件中没有生产配置。当我尝试运行时`heroku run rake assets:precompile`，我收到以下错误：

```
rake aborted!
Application has been already initialized. 
```

我已经在 application.rb 和我的环境文件中添加了必要的行，但我似乎无法让它工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T03:26:23.843

这个问题也发生在我身上，就我而言，这是因为我的 config/application.rb 上有以下行

config.assets.initialize_on_precompile = false

[根据 Heroku ( https://devcenter.heroku.com/articles/rails-asset-pipeline](https://devcenter.heroku.com/articles/rails-asset-pipeline) )，在某些版本的 Rails 中似乎需要它，

> 在预编译资产时，在 Rails 3.x 中，您可以通过确保以下行位于 config/application.rb 中来防止初始化应用程序并连接到数据库：
> 
> config.assets.initialize_on_precompile = false

但在我的情况下，它抛出了“应用程序已经初始化”异常，并且在我删除它之后就消失了

由于 Heroku 日志在部署时并没有真正的帮助，我测试它的方式是在我的 heroku 实例上运行 assets precompile rake 任务：

heroku 运行 rake 资产：预编译

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T01:18:18.787

Heroku assumes you are doing your own precompiling (which you are having a problem with) if the file manifest.yml is present.

REMOVE manifest.yml from your public or public/assets folder.

Push the changes to heroku. Example below.

```
$ git rm public/assets/manifest.yml
$ git commit -m "remove precompile manifest"
$ git push -f heroku master 
```

Run assets:precompile on heroku server. Enter:

```
$ heroku run rake assets:precompile 
```

# javascript - 滑块中的图像显示小于实际图像

> ID：14910363
> 
> 赞同：4
> 
> 时间：2013-02-16T12:36:41.183
> 
> 标签：javascript, html, css, image

我正在尝试单独显示单个图像，并在滑块中显示多个图像。唯一的问题是我无法让滑块中的图像与单个图像匹配相同的高度，它显示的图像要小得多。如何获得匹配的图像大小？即使我得到相同高度和宽度的图像，滑块中的图像也会显示得更小。

这是一个显示图像的应用程序：[这里](http://helios.hud.ac.uk/u0867587/Mobile_app/Text9.php)

（忽略通知错误）

显示图像和滑块的代码：

```
<?php 
    //start:procedure image
    if(count($arrImageFile[$key]) == 1){
        foreach ($arrImageFile[$key] as $i) {
?>
<p><img alt="<?php echo $i; ?>" height="200" width="200" src="<?php echo 'ImageFiles/'.$i; ?>"></p>
<?php 
        } 
    } else if(count($arrImageFile[$key]) > 1){
?>

<style>
    #galleriaimage_<?php echo $key; ?>{ width: 200px; height: 250px; background: #000 }
</style>
<div id="galleriaimage_<?php echo $key; ?>">
<?php foreach ($arrImageFile[$key] as $i) { ?>
    <img alt="<?php echo $i; ?>" height="250" width="200" src="<?php echo 'ImageFiles/'.$i; ?>">
<?php } ?>
</div>

<script type="text/javascript">
    Galleria.loadTheme('jquery/classic/galleria.classic.min.js');
    Galleria.run('#galleriaimage_<?php echo $key; ?>');
</script>

<?php
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T17:09:29.957

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:04:41.093

[您的画廊有多种选择](http://galleria.io/docs/options)

```
Galleria.run('#galleria', {
    height: 400
}); 
```

例如，您可以使用变量来定义高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T20:08:15.537

术语有点混乱，但我的理解是您的原始图像是 1024x768，但 Galleria 会缩放特色图像以适应舞台，问题是如何增加特色图像的大小。

在您的示例中，此样式将舞台设置为 200x200 `#galleriaimage_7{ width: 200px; height: 200px; background: #000; }`。

在控制台中，我将这些样式尺寸更改为`width: 1024px; height: 768px;`并通过运行刷新了 Galleria，`Galleria.run('#galleriaimage_7');`脚本解析样式以设置舞台大小。黑色背景中仍有额外的填充，因此您需要使舞台更大或编辑样式以删除填充。

![在此处输入图像描述](../Images/2356b8be175efcb9959cf4177502586c.png)

# javascript - 静音 soundmanager 插件的声音

> ID：14910364
> 
> 赞同：0
> 
> 时间：2013-02-16T12:36:42.723
> 
> 标签：javascript, jquery, audio, soundmanager2

我使用 soundmanager 在我的网站上播放声音。我有这个代码：

```
soundManager.setup({
    debugMode: false,
    url: 'http://www.newdayatwork.com/wp-content/themes/roots/static/swf/',
});

soundManager.onready(function() {
    soundManager.createSound({
        id:'soundLaag1',
        url: 'http://www.newdayatwork.com/wp-content/themes/roots/static/wav/laag1.wav'
    });
    soundManager.createSound({
        id:'soundLaag2',
        url: 'http://www.newdayatwork.com/wp-content/themes/roots/static/wav/laag2.wav'
});

$(document).on('click', '.nav-main li', function(e) {
    var item = $(this).attr('class');

    switch (item) {
        case 'menu-imagine active':
        case 'menu-visie active':
            soundManager.play('soundLaag1');
            break;

        case 'menu-workspace active':
        case 'menu-werkplek active':
            soundManager.play('soundLaag2');
            break;

        default:
            soundManager.play('soundMidden1');
            break;
    }
});

$('.menu-sound').click(function() {
     soundManager.mute();
}); 
```

当您单击导航项时。比你有声音播放。但现在问题来了。我的网站上有一个按钮。您可以将网站上的声音静音。但这不起作用。当我单击菜单声音按钮时。我这样做：soundManager.mute();

但不仅仅是该页面上的声音。当您单击该按钮时。但是当你点击它们时。应该把整个网站的声音都出来了。

我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:16:27.870

```
$('.menu-geluid, .menu-sound').click(function(e) {
            e.preventDefault();
            if($(this).hasClass('active')) {
                $('body').removeClass('mute');
                $(this).removeClass('active');
            } else {
                $('body').addClass('mute');
                $(this).addClass('active');
            }
        }); 
```

# python - 在 django 应用程序中创建警报

> ID：14910367
> 
> 赞同：-2
> 
> 时间：2013-02-16T12:37:37.343
> 
> 标签：python, django

我有一个包含到期日期的模型。该字段如下所示：

passport_date_of_expiry = TodayOrLaterDateField（'到期日期'，）

此字段显示在管理员的列表显示中。我想要完成的是，当到期日期为到期日期 6 个月或更短时，该项目在管理员的列表显示中以红线突出显示。或者。甚至发生这种情况时，让系统发送电子邮件作为警报。我怎样才能轻松实现这一目标。数据库中已经有大量数据，这是我想添加到这个系统的一个功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T18:19:48.047

要在管理员中突出显示，您可以使用以下内容（从[https://docs.djangoproject.com/en/1.2/ref/contrib/admin/](https://docs.djangoproject.com/en/1.2/ref/contrib/admin/)获得）：

```
class Person(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    expiry_date = models.DateTimeField()

    def colored_name(self):
        if datetime.datetime.now() >= self.expiry_date:
            return '<span style="color: red;">%s %s</span>' % (self.first_name, self.last_name)
    colored_name.allow_tags = True

class PersonAdmin(admin.ModelAdmin):
    list_display = ('colored_name', 'first_name', 'last_name') 
```

这将在管理界面中仅突出显示一个列，但可以注意到这一点。

要提醒您应该创建管理命令并从 cron 运行它。

项目/应用程序/管理/命令/check_expired.py：

```
# -*- coding: utf-8 -*-

from django.core import management
from django.core.mail import mail_admins

class Command(BaseCommand):

    def inner_run(self, *args, **options):
        expired_items = Model.objects.filter(expiry_date__lte=datetime.datetime.now())
        message = some_message_formatter(expired_items)

        mail_admins(subject='Alerts on my Project!', message=message) 
```

计划：

```
8 3 */15 * * cd /path/to/project && echo 'Activate virtual env if needed' && PYTHONPATH='Additional_python_path' DJANGO_SETTINGS_MODULE=your_project.settings django-admin.py check_expired 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:09:11.450

如果您想在管理员的列表显示中突出显示项目，您需要覆盖 admin/change_list_results.html 模板。该文件的片段如下所示：

```
{% for result in results %}
{% if result.form.non_field_errors %}
<tr><td colspan="{{ result|length }}">{{ result.form.non_field_errors }}</td></tr>
{% endif %}
<tr class="{% cycle 'row1' 'row2' %}">
    {% for item in result %}{{ item }}{% endfor %}   
</tr>
{% endfor %} 
```

您可以尝试添加代码来检查结果项是否具有您要查找的属性，并使用与 row1 或 row2 不同的类。请记住，这是一个用于管理中所有对象的文件。

对于发送电子邮件，您可以编写一个由 cron 调用的独立脚本。确保将 virtualenv 的路径添加到 sys.path 并将 os.environ["DJANGO_SETTINGS_MODULE"] 设置为您的项目设置。之后，查找过期对象并使用 django.core.mail.MailMessage 发送邮件应该是一个简单的查询。 [https://docs.djangoproject.com/en/1.4/topics/email/](https://docs.djangoproject.com/en/1.4/topics/email/)

# c++ - C++ 调试断言仅在 VPTR 中失败

> ID：14910368
> 
> 赞同：4
> 
> 时间：2013-02-16T12:37:38.387
> 
> 标签：c++, exception, memory-management

我想知道为什么我`delete`在这里的一种情况下得到了例外，而在另一种情况下却没有。

## 无异常情况

```
#include <iostream>
using namespace std;

class A
{
public:
    ~A() { cout << "A dtor" << endl; }
};

class B : public A
{
public:
    int x;
    ~B() { cout << "B dtor" << endl; }
};

A* f() { return new B; }

int _tmain(int argc, _TCHAR* argv[])
{
    cout << sizeof(B) << " " << sizeof(A) << endl;
    A* bptr= f();
    delete bptr;
} 
```

这里的输出是`4 1 .. A dtor`，因为 A 有 1 个字节用于标识，B 有 4 个字节，因为`int x`。

## 例外情况

```
#include <iostream>
using namespace std;

class A
{
public:
    ~A() { cout << "A dtor" << endl; }
};

class B : public A
{
public:
    virtual ~B() { cout << "B dtor" << endl; }
};

A* f() { return new B; }

int _tmain(int argc, _TCHAR* argv[])
{
    cout << sizeof(B) << " " << sizeof(A) << endl;
    A* bptr= f();
    delete bptr;
} 
```

这里的输出是`4 1 .. A dtor`，因为 A 有 1 个字节用于标识，B 有 4 个字节，因为`vptr`它的虚拟析构函数需要它。 **但随后在调用 (** **)中****的调试断言失败`delete``_BLOCK_TYPE_IS_VALID`**。

## 环境

我正在使用 Visual Studio 2010 SP1Rel 运行 Windows 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T12:52:52.410

看到[这个帖子](http://code4thought.wordpress.com/tag/inheritance/)

快速总结：

*   您正在告诉机器删除 A 的一个实例
*   由于这是我们通过指针/引用调用的类，也许我们应该使用虚拟表（VT）？
*   A 中没有虚拟成员，因此没有使用 VT
*   我们将 A 的标准析构函数称为...</li>
*   砰! 我们正在尝试删除类 A，但碰巧指针已将我们引导到 B 的对象，该对象包含 A 不知道的 VT。sizeof(A) 是 1（因为 AFAIK，大小等于 0 是不合法的）并且 sizeof(B) 是 4（由于 VT 的存在）。我们希望删除 1 个字节，但是有一个 4 个字节的块。由于 DEBUG 堆监控，错误被捕获。

解决方案当然是声明基类的 ( ' s `A`)`dtor`因为`virtual`so总是会被调用。`B``dtor`

编辑：对于第一种情况，这是标准所说的：

> §5.3 在第一种选择（删除对象）中，如果待删除对象的静态类型与其动态类型不同，**则静态类型应为待删除对象的动态类型和静态类型的基类应具有虚拟析构函数或行为未定义**。在第二种选择（删除数组）中，如果要删除的对象的动态类型与其静态类型不同，则行为未定义。

因此，这两种情况都将我们引向未定义行为的领域，这当然不同于另一种实现。但有理由认为，对于大多数实现来说，第一种情况比第二种情况更容易处理或至少更容易考虑，后者只是一种深奥的反模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T16:21:22.510

正如其他人指出的那样，您正在删除一个静态类型与其动态类型不同的对象，并且由于静态类型没有虚拟析构函数，您会得到未定义的行为。这包括您所看到的有时工作有时不工作的行为。但是，我认为您有兴趣更深入地了解您的特定编译器正在发生的事情。

类`A`根本没有成员，所以它的数据布局最终看起来像这样：

```
struct A {
}; 
```

由于 class`B`派生自 class `A`，因此 class`A`嵌入在 B 中。当 class`B`没有虚函数时，布局最终看起来像这样：

```
struct B {
  A __a_part;
  int x;
}; 
```

编译器只需获取 的地址就可以将 a 转换`B*`为 an ，就好像编译器有这样的函数：`A*``__a_part`

A* convertToAPointer(B* bp) { return &bp->__a_part; }

由于`__a_part`是 的第一个成员`B`，`B*`和`A*`指向同一个地址。

像这样的代码：

```
A* bptr = new B;
delete bptr; 
```

正在有效地做这样的事情：

```
// Allocate a new B
void* vp1 = allocateMemory(sizeof(B));
B* bp = static_cast<B*>(vp1);
bp->B(); // assume for a second that this was a legal way to construct

// Convert the B* to an A*
A* bptr = &bp->__a_part;

// Deallocate the A*
void* vp2 = ap;
deallocateMemory(vp2); 
```

在这种情况下，`vp2`和`vp1`都是一样的。系统正在分配和释放相同的内存地址，因此程序运行没有错误。

当类`B`具有虚拟成员函数（在这种情况下为析构函数）时。编译器添加了一个虚拟表指针，所以 B 类最终看起来像这样：

```
struct B {
  B_vtable* __vptr;
  A __a_part;
}; 
```

这里的问题是，`__a_part`不再是第一个成员，并且`convertToAPointer`操作现在将更改指针的地址，因此`vp2`不再`vp1`指向相同的地址。由于释放的内存位置与分配的内存位置不同，因此您会收到错误消息。

# asp.net - 在 aspx 中使用标签的最佳方法是什么

> ID：14910369
> 
> 赞同：0
> 
> 时间：2013-02-16T12:37:41.743
> 
> 标签：asp.net, html

我想知道在 html 中使用标签、使用 asp 标签或使用普通 html 标签的最佳方式。

这个：

```
<asp:Button ID="save" runat="server" Text="Save" /> 
```

或这个：

```
<input type="button" id="save" runat="server" value="Save" /> 
```

的优点和缺点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:40:40.273

我将使用 asp 标签，尤其是在按钮的情况下，我更喜欢使用 asp 标签，因为当您为按钮使用 html 标签时，具有`runat="server"`类似属性的按钮`PostBackUrl`将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:56:51.590

他们是一样的。另一种是所谓的服务器标签或ASP标签，另一种是HTML标签。这只是风格和偏好的问题。

现在，如果您想知道 ASP.Net 开发人员使用的首选标签是什么，我相信我们大多数人都会同意它是 ASP 标签。好吧，至少对于 ASP.Net Webform 开发人员来说......

# java - java.util.Date 的 setHours() 的替代方法？

> ID：14910370
> 
> 赞同：28
> 
> 时间：2013-02-16T12:37:50.883
> 
> 标签：java

`setHours()`什么是不推荐使用的替代方法`java.util.Date`。对于我的日期变量，我想设置某些时间，但我不想使用不推荐使用的方法`setHours()`。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-16T12:39:24.050

尝试这个：

```
 Calendar cal = Calendar.getInstance();
 cal.set(Calendar.HOUR_OF_DAY, hour);
 Date date = cal.getTime(); 
```

如果您已经有一个`Date`对象，您可以使用`cal.setTime(date)`给定日期初始化日历。

**JavaDoc**用于`Calendar.HOUR_OF_DAY`

> get 和 set 的字段编号，指示一天中的小时。HOUR_OF_DAY 用于 24 小时制。例如，在晚上 10:04:15.250，HOUR_OF_DAY 是 22。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-16T12:43:00.633

除了使用`Date`已弃用的类函数，您还可以使用`Calendar`class.

```
Calendar calendar=Calendar.getInstance();
calendar.setTime(YOUR_DATE_OBJECT);
calendar.set(Calendar.HOUR_OF_DAY, hour);
Date date=calendar.getTime(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-11T11:08:40.313

这是您可以使用 Java 日历对象方法保存/设置 DATE 参数的方式。

```
Calendar now = Calendar.getInstance();
now.setTime(YOUR_DATE);
now.set(Calendar.HOUR_OF_DAY, 6);
YOUR_DATE = now.getTime(); 
```

# node.js - 获取 Express Node.js 中 cookie connect.sid 键的值

> ID：14910371
> 
> 赞同：1
> 
> 时间：2013-02-16T12:37:52.180
> 
> 标签：node.js, session, express, socket.io

我正在为经过身份验证的用户创建一个会话，然后让 socket.io 向我发送 connect.sid cookie 值，我想找到与 auth 套接字客户端相关的值。

有谁知道如何在 Express 中获取 connect.sid 键的值？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-08T20:15:03.243

如果我正确理解您的问题，您可以使用`request.sessionID`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:06:17.817

我发现这个线程很有用：[https ://github.com/senchalabs/connect/issues/588](https://github.com/senchalabs/connect/issues/588)

Connect 提供了一种解析签名 cookie 的方法：

```
var cookieValue = connect.utils.parseSignedCookies(cookie, sessionKey); 
```

您可以直接从 express 中引用连接模块。

# iphone - 是否可以将 NSString 转换为纯 Objective C 代码

> ID：14910372
> 
> 赞同：5
> 
> 时间：2013-02-16T12:38:01.807
> 
> 标签：iphone, ios, objective-c, xcode, nsstring

例如我有

```
NSString *string = @"return sharedInstance;"; 
```

我有一个类方法

```
+ (id)sharedInstance; 
```

我可以将该字符串转换为纯代码并在我的方法中使用它吗？这对于调试非常有用。假设我有一个方法，我想测试一些代码（让它成为简单的返回值，这可能吗？）我可以为该方法编写代码并在运行时测试新代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T12:47:24.100

iOS 上的 Objective C 是一种编译语言；代码在您运行应用程序之前很久就被解释并翻译成机器代码。像这样以动态方式运行目标 C 是不可能的。为此，您将需要一种动态语言。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T12:43:01.290

你所描述的完全不可能。但是有对某些东西的支持，例如，实例化类和使用字符串调用方法（理论上）的能力：

`NSClassFromString`允许您基于传递的字符串实例化类。

`NSSelectorFromString`允许您根据传递的字符串调用或“调用”方法。

该字符串可以在运行时动态确定。

根据您的评论，这显然不是您感兴趣的（尽管我认为它确实解决了您的问题）。你可以做的一件事（它不是原生的 Obj-C，但我认为考虑到一些评论是相关的）是注入`JavaScript`一个`UIWebView`.

# c# - 在 MVVM 灯光中绑定 windows 8 textBlock

> ID：14910374
> 
> 赞同：0
> 
> 时间：2013-02-16T12:38:18.403
> 
> 标签：c#, xaml, windows-8, mvvm-light

我遇到了 TextBlock/TextBox 绑定问题。TextBlock 不显示属性的内容。当我调试我的应用程序时，属性有内容。你怎么能做到？Xaml。

```
<TextBlock HorizontalAlignment="Left" Margin="730,191,0,0" TextWrapping="Wrap" Text="{Binding XmlContentFile, Mode=TwoWay}"   VerticalAlignment="Top" Height="429" Width="465"/> 
```

我在网上找到简单的代码，但我没有找到代码。

代码属性

```
 public string XmlContentFile
        {
            get
            {
                return this.xmlContentFile;
            }
            set
            {
                this.xmlContentFile = value;

            }
        } 
```

我的数据上下文

```
DataContext="{Binding Main, Source={StaticResource Locator}}"> 
```

方法将 XML 文件加载到字符串变量

```
public async void  XmlContentLoad()
        {

            if (selectFile != null)
            {
                try
                {

                    StorageFolder storageFolder = ApplicationData.Current.LocalFolder;
                    StorageFile storageFile = await storageFolder.GetFileAsync(selectFile);
                    xmlFileTextContent = await FileIO.ReadTextAsync(storageFile);

                }
                catch (Exception)
                {
                    throw new Exception("Bug");
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:02:11.193

问题是您的**XmlContentFile**属性在更改时不会引发任何通知。您的 ViewModel 需要实现**INotifyPropertyChanged**并在任何属性发生更改时引发事件。

您的视图及其数据绑定很可能在**XmlContentLoad**完成之前设置和执行（它是异步的）。如果在加载数据之前绑定已经完成，那么绑定再次发生的唯一方法是属性引发它已更改的通知。

还值得指出的是，在您的**XmlContentLoad**方法中，您设置的是私有变量而不是公共属性。

```
xmlFileTextContent = await FileIO.ReadTextAsync(storageFile); 
```

即使您已连接设置器代码以引发通知，设置私有变量也永远不会引发属性更改通知。您需要更改**XmlContentLoad**以设置属性并在设置器中设置**OnPropertyChanged**通知（推荐），或者您需要在设置私有变量后调用 OnPropertyChanged（不推荐）。

希望有帮助。

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:30:47.487

确保正确设置绑定源：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:WpfApplication1="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded_1" >
<Grid>
    <TextBlock Text="{Binding XmlContentFile, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="#FFF3A3A3"/>
</Grid> 
```

并确保您将财产的价值设置在正确的位置：

```
public partial class MainWindow : Window,INotifyPropertyChanged
{
    private string _xmlContentFile;
    public string XmlContentFile
    {
        get
        {
            return _xmlContentFile ;
        }
        set 
        { 
            _xmlContentFile = value;
            OnPropertyChanged("XmlContentFile");
        }
    }
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded_1(object sender, RoutedEventArgs e)
    {
        XmlContentFile = "New Value !";
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

确实，这个答案不在 MVVM 中，但是除了您需要将 DataContext 设置为 ViewModel 之外，不需要太多更改。

# hibernate - 我应该依靠脏检查吗？

> ID：14910376
> 
> 赞同：2
> 
> 时间：2013-02-16T12:38:26.610
> 
> 标签：hibernate, grails, grails-orm

我使用 Grails，它使用 Hibernate 来实现引擎盖下的持久性。

我的问题是，依赖脏检查是否是一种好习惯，或者`save()`每次更改实体时我是否应该始终明确地调用实体上的方法？

**UPD：**这个问题不是关于脏检查机制，这个问题是关于它的可靠性。也就是说，当我想更新一个实体时：

```
def user = User.get(1)
user.name = 'new name'
user.save()  //optional 
```

我可以省略最后一行，Hibernate 会自己检测到变化并坚持下去，但我能 100% 确定吗？

您是否总是在项目更新后显式调用 save() ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:10:11.020

所有实体插入和更新都使用`Session.save()`& 保存`Session.saveOrUpdate()`

直到并且除非您在 中触发保存，否则`session`它们将不再被保存`DataBase`。

一旦你保存了对象，你仍然在修改对象，Hibernate`Dirty checking`将出现在图片中。

在`dirty checking`中，`hibernate`自动检测对象是否被修改（或）是否需要更新。只要对象在`persistent state`ie 中，就绑定到特定的 Session(org.hibernate.Session)。Hibernate 监视对象的任何更改并执行 sql。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T08:26:30.607

这里有一些关于脏检查的研究

1.  Fush session 将重置原始状态

    def 患者 = Patient.get(id)

    患者姓名 = 'xxx'

    病人.isDirty() --> 真

    病人.save()

    病人.isDirty() --> 真

    患者.保存（刷新：真）

    病人.isDirty() --> false !! flush 将重置原始状态

2.  Hql 查询也会重置原始状态

    def 患者 = Patient.get(id)

    患者姓名 = 'xxx'

    病人.isDirty() --> 真

    患者.findByXXXX()

    患者.isDirty() --> false

# r - 使用R绘图时如何更改分辨率？

> ID：14910377
> 
> 赞同：1
> 
> 时间：2013-02-16T12:38:28.120
> 
> 标签：r

我最近开始用 R 编写代码，偶然发现了这段代码，它绘制了一个 Mandelbrot 分形：

```
library(caTools)         # external package providing write.gif function
jet.colors <- colorRampPalette(c("#00007F", "blue", "#007FFF", "cyan", "#7FFF7F", 
                                 "yellow", "#FF7F00", "red", "#7F0000")) 
m <- 1200                # define size
C <- complex( real=rep(seq(-1.8,0.6, length.out=m), each=m ), 
              imag=rep(seq(-1.2,1.2, length.out=m), m ) ) 
C <- matrix(C,m,m)       # reshape as square matrix of complex numbers
Z <- 0                   # initialize Z to zero
X <- array(0, c(m,m,20)) # initialize output 3D array
for (k in 1:20) {        # loop with 20 iterations
  Z <- Z^2+C             # the central difference equation  
  X[,,k] <- exp(-abs(Z)) # capture results
} 
write.gif(X, "Mandelbrot.gif", col=jet.colors, delay=100) 
```

我做了一些测试并查看了结果。我发现图像的分辨率太低，所以我尝试了这段代码来提高分辨率：本质上，我认为它计算了两次函数（即`f(1)`, `f(1.5)`,`f(2)`而`f(2.5)`不是`f(1)`, `f(2)`）。

```
library(caTools)         # external package providing write.gif function
jet.colors <- colorRampPalette(c("#00007F", "blue", "#007FFF", "cyan", "#7FFF7F", 
                                 "yellow", "#FF7F00", "red", "#7F0000")) 
m <- 1200                # define size
C <- complex( real=rep(seq(-1.8,0.6, length.out=m), each=m ), 
              imag=rep(seq(-1.2,1.2, length.out=m), m ) ) 
C <- matrix(C,m,m)       # reshape as square matrix of complex numbers
Z <- 0                   # initialize Z to zero
X <- array(0, c(m,m,20*2)) # initialize output 3D array
for (n in 1:20) {        # loop with 20 iterations
  for (m in 1:2) { # Loop twice
    k <- n+m/2 # Does the trick of adding .5
    Z <- Z^2+C             # the central difference equation  
    X[,,k] <- exp(-abs(Z)) # capture results
  }
} 
write.gif(X, "Mandelbrot.gif", col=jet.colors, delay=100) 
```

虽然它计算了两倍的数字量，但分辨率`Mandelbrot.gif`似乎是相同的，以及尺寸（1200x1200）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:42:05.050

通过简单地增加 的值来增加分辨率`m`。但是，里面的元素个数`X`是m^2*20，很容易变得大于2^31-1，这是R中向量长度的当前限制（数组是带有附加属性的向量）。要么你发现创建动画 GIF 的不同功能，不需要将所有信息保存在一个数组中，或者您等待 R 的下一次重大更新，这将增加对象大小限制 afaik。

以下代码允许更高的分辨率，但请注意，它需要大量的 CPU 时间，并且您将很快耗尽内存。您还需要 ImageMagick。

```
library(animation)         # external package providing saveGIF function
jet.colors <- colorRampPalette(c("#00007F", "blue", "#007FFF", "cyan", "#7FFF7F", 
                                 "yellow", "#FF7F00", "red", "#7F0000")) 
m <- 200                # define size
C <- complex( real=rep(seq(-1.8,0.6, length.out=m), each=m ), 
              imag=rep(seq(-1.2,1.2, length.out=m), m ) ) 
C <- matrix(C,m,m)       # reshape as square matrix of complex numbers
Z <- 0                   # initialize Z to zero
saveGIF(
  for (k in 1:20) {        # loop with 20 iterations
    Z <- Z^2+C             # the central difference equation  
    image(exp(-abs(Z)),col=jet.colors(255)) # plot results
  },"Mandelbrot2.gif"  
) 
```

# java - 缓冲输入流未正确加载文件

> ID：14910380
> 
> 赞同：0
> 
> 时间：2013-02-16T12:39:11.363
> 
> 标签：java, stream, buffer, byte

我有以下代码来下载文件列表。下载后我将在线文件的md5与下载的文件进行比较。当下载大小低于 1024 字节时，它们是相似的。对于所有超过 1024 字节，有一个不同的 md5 和。

现在我不知道原因。我认为，这取决于 1024 字节的 Array-Size？也许它每次都会将完整的 1024 字节写入文件，但问题是，为什么它适用于小于 1kb 的文件？

```
 String fileUrl= url_str;
 URL url = new URL(fileUrl);
 BufferedInputStream bufferedInputStream = new BufferedInputStream(url.openStream());
 FileOutputStream fileOutputStream =new  FileOutputStream(target);
 BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(fileOutputStream, 1024);

 byte data[] = new byte[1024];
 while(bufferedInputStream.read(data, 0, 1024) >0 )
 {
      bufferedOutputStream.write(data);
 }
 bufferedOutputStream.close();
 bufferedInputStream.close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T12:43:15.060

这已破了：

```
while(bufferedInputStream.read(data, 0, 1024) >0 )
{
      bufferedOutputStream.write(data);
} 
```

您假设*每个读取调用都*填满了整个缓冲区。您应该使用的返回值`read`：

```
int bytesRead;
while((bytesRead = bufferedInputStream.read(data, 0, 1024)) >0 )
{
    bufferedOutputStream.write(data, 0, bytesRead);
} 
```

（此外，您应该在`finally`块中关闭所有流，但这是另一回事。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T12:46:57.703

第一次读取后 data[] 将包含字节。因此，在最后一次读取期间，数组将包含最后 n 个字节，以及前一次读取的一些字节。实际上，您应该检查读取的返回。它指示已将多少字节读入数组，然后只写出多少字节。

# c# - 用循环替换递归

> ID：14910381
> 
> 赞同：1
> 
> 时间：2013-02-16T12:39:19.243
> 
> 标签：c#, algorithm, loops, recursion

我正在处理一个 ASP.Net 页面，其中有树视图。在树视图中，一些节点具有嵌套节点，如分支。我在以下格式的自定义对象列表中有数据：

> 标识、描述、父标识

现在，我正在使用一个函数来递归地将节点添加到树视图中。以下是代码片段：

```
private bool findParentAddNode(string id, string description, string parentid, ref List<CustomTreeNode> treeList)
{
    bool isFound = false;
    foreach (CustomTreeNode node in treeList)
    {
        if (node.id == parentid)//if current node is parent node, add in it as its child
        {
            node.addChild(id, description, parentid);
            isFound = true;
            break;
        }
        else if (node.listOfChildNodes != null)//have child nodes
        {
            isFound = findParentAddNode(id, description, parentid, ref node.listOfChildNodes);
            if (isFound)
                break;
        }

    }

    return isFound;
} 
```

上述技术效果很好，但是对于超过 30K 的节点，它的性能很慢。请提出一种算法来用循环替换这个递归调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:54:51.097

当它沿着树递归时，代码正在对子节点列表进行线性搜索。

这意味着对于随机分布的父 ID，在将 N 个节点添加到树之后，它会在添加第 N+1 个节点之前平均搜索 N/2 个节点来寻找父节点。因此，节点数量的成本将为 O(N²)。

代替线性扫描，为节点创建一个 id 索引并使用它快速找到父节点。当您创建一个节点并将其添加到树中时，还要将其添加到`Dictionary<int,CustomTreeNode>`. 当你想将一个节点添加到父节点时，在索引中找到父节点并添加它。如果`addChild`返回它创建的孩子，那么代码变成：

```
Dictionary<int,CustomTreeNode> index = new Dictionary<int,CustomTreeNode>();

private bool findParentAddNode(string id, string description, string parentid)
{
    if ( !nodeIndex.TryGetValue ( parentid, out parentNode ) ) 
        return false;

    index[id] = parentNode.addChild(id, description, parentid);

    return true;
} 
```

在使用之前，您需要将树的根添加到索引中`findParentAddNode`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-16T12:56:32.193

广度优先搜索的迭代版本应该类似于以下内容：

```
var rootNodes = new List<CustomTreeNode> { new CustomTreeNode() };

while (rootNodes.Count > 0) {
    var nextRoots = new List<CustomTreeNode>();
    foreach (var node in rootNodes) {
        // process node here
        nextRoots.AddRange(node.CustomTreeNode);
    }
    rootNodes = nextRoots;
} 
```

也就是说，这没有经过测试，并且由于它是 BFS，因此不是最佳的 w/r/t 内存。（与 DFS 或迭代深化 DFS 相比，内存使用是*O(n)*，而不是*O(log n) 。）*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-16T13:01:49.693

***您可以使用for xml***从 sql server 数据库返回 xml 格式的数据， 然后将其绑定到树视图控件。

# grails - Grails 推送到 Heroku 失败 - applicationContext.xml 不存在

> ID：14910388
> 
> 赞同：6
> 
> 时间：2013-02-16T12:40:06.777
> 
> 标签：grails, heroku, grails-2.0

我尝试将我的 Grails 2.1.1 应用程序部署到 Heroku。

我运行`git push master heroku`并运行了一段时间（编译正常，获取依赖项，ec），然后它给了我这个消息：

```
|Building WAR file
   ...........................Error 
   |
   Error executing script War: : Replace: source file /app/.grails/2.1.1/projects/Project/stage/WEB-INF/applicationContext.xml doesn't exist (Use --stacktrace to see the full trace)
 !     Failed to build app
 !     Heroku push rejected, failed to compile Grails app 
```

当我在`grails war`本地运行时，它可以正常工作。

我做了一些阅读，但我还没有找到一个可靠的答案。我读过的类似问题是由与 JDK 相关的问题或插件引起的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T20:02:21.350

在这种情况下，解决方案是将 WEB-INF 添加到我的存储库中。默认情况下，我的 .gitignore（通过 GitHub 创建）忽略 WEB-INF。

# android - 动态更改列表视图项中的文本视图颜色

> ID：14910390
> 
> 赞同：0
> 
> 时间：2013-02-16T12:40:31.940
> 
> 标签：android, sqlite

我使用简单的光标适配器从具有自定义布局的列表视图中的视图中获取所有记录。我想显示优先级文本视图以根据文本更改颜色，例如，如果优先级高，则为红色，如果优先级高，则为绿色，如果优先级低，则为黄色。有什么方法可以做到。我对 android 很陌生

我的列表视图代码

```
myList=(ListView) findViewById(R.id.listView1);
    myAdapter.open();

    Cursor cursor = myAdapter.fetchAllView();

    startManagingCursor(cursor);
String []from=new String[]{ DbAdapter.KEY_DESCRIPTION,DbAdapter.KEY_TITLE,DbAdapter.KEY_TASK_PRIORITY,DbAdapter.KEY_CATEGORY_NAME,DbAdapter.KEY_TIME,DbAdapter.KEY_DATE };
int[] to=new int[] { R.id.txtdescription,R.id.txtitem,R.id.txtPriority,R.id.txtcategory,R.id.txttimeOne,R.id.txtDateOne}; 
 myCursorAdapter = new SimpleCursorAdapter(ListItems.this, R.layout.items, cursor,from, to);
myList.setAdapter(myCursorAdapter); 
```

listview 工作正常，但如何编写代码来更改 listview 项中的 textview 颜色

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:47:26.640

我会考虑使用[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)。这将使您对每一行有更多的控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:54:30.837

您需要使用自定义光标适配器，因为您可以动态更改内容

这里我举个例子，在 bindView 方法中改变文本的颜色

```
public class MessageAdapter extends CursorAdapter {
private Cursor mCursor;
private Context mContext;
private final LayoutInflater mInflater;

public MessageAdapter(Context context, Cursor c) {
    super(context, c);
    mInflater=LayoutInflater.from(context);
mContext=context;
}

@Override
public void bindView(View view, Context context, Cursor cursor) {

    TextView mobileNo=(TextView)view.findViewById(R.id.mobileNolistitem);
    mobileNo.setText(cursor.getString(cursor.getColumnIndex(TextMeDBAdapter.KEY_MOBILENO)));

    TextView frequency=(TextView)view.findViewById(R.id.frequencylistitem);
    frequency.setText(cursor.getString(cursor.getColumnIndex(TextMeDBAdapter.KEY_FREQUENCY)));

    TextView rowid=(TextView)view.findViewById(R.id.rowidlistitem);
    rowid.setText(cursor.getString(cursor.getColumnIndex(TextMeDBAdapter.KEY_ID)));

}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    final View view=mInflater.inflate(R.layout.message_list_item,parent,false); 
    return view;
} 
```

}

# javascript - 使用css-rule（-webkit-column-width :)拆分后如何获取html页面特定列的内容

> ID：14910392
> 
> 赞同：3
> 
> 时间：2013-02-16T12:40:37.900
> 
> 标签：javascript, css, html

我使用 css 规则将 html 页面拆分为多个列

```
var mySheet = document.styleSheets[0];
function addCSSRule(selector, newRule) 
{
   if (mySheet.addRule) {
       mySheet.addRule(selector, newRule);// For Internet Explorer                              
   } else {
       ruleIndex = mySheet.cssRules.length;
       mySheet.insertRule(selector + '{' + newRule + ';}', ruleIndex)//for firefox..
   }
}

addCSSRule('html', 'padding: 0px; height: 460px; -webkit-column-gap: 0px; -webkit-column- width: 320px;'); 
```

如何从特定列中获取内容。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T09:53:32.757

我可以在一小时后找到并部署内容。我希望我的分享对某人有所帮助。
请签入：jsfiddle.net/cuongtakien/7YMSL/1/

您可以更改起点和终点的位置并计算每列的高度。最后，您更改我在代码中的硬固定并获取内容。
感谢 mattsven 分享 javascript 中的 createRange。有一个漂亮的代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:55:49.130

我很确定没有简单的方法可以做到这一点。最好的办法是找到文本的长度并获取内容的前半部分（或第三部分，或第四部分，视情况而定）。它不会准确，但会很接近。

另一种方法是选择从顶部开始的内容，并通过插入符号的位置找出列的结尾。（我只是在这里重复。不确定这是否真的有效）

# ruby - 红宝石字符串#unpack

> ID：14910394
> 
> 赞同：5
> 
> 时间：2013-02-16T12:40:54.067
> 
> 标签：ruby, unpack

我有一个由 3 个字符串组成的打包字符串，它以某种方式组成，因此我有一个整数，指定下一项的字节长度，然后是该项目的字节，然后是下一项的字节大小等，就像有人这样做：

```
[a.bytesize, a, b.bytesize, b, c.bytesize, c].pack("na*na*na*") 
```

我怎样才能以简单的方式正确解压？这个问题的 Perl 解决方案是：

```
my($a, $b, $c) = unpack("(n/a*)3", $data) 
```

对于 ruby​​，它显然不支持 unpack 中的 '/' 和括号，我使用的是类似的东西：

```
vals = []
3.times do
  size = data.unpack("n").first
  data.slice!(0, 2)
  vals << data.unpack("a#{size}").first
  data.slice!(0, size)
end 
```

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T16:35:02.123

恕我直言，它不像在**PERL**中那么容易，但这是我可以建议的一些解决方案。

```
unpacked = []
a, b, c = *unpacked << data.slice!(0, data.slice!(0, 2).unpack('S>').first) \
           until data.empty? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:40:08.553

如果你需要任何严肃的二进制数据处理，这里有一个 gem： [http](http://bindata.rubyforge.org/) ://bindata.rubyforge.org/ 我认为你应该使用它，而不是伪造 unpacks un running loops。

您当然可以提交功能请求并等待其实现，但我建议您改用 bindata gem，这是 IMO 更强大的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:01:40.477

我没有看到像 Perl 解决方案那样容易做到这一点的方法（并且同意提交功能请求以将其添加到 Ruby 的打包/解包实现中会很好），但我至少可以用更少的时间提供解决方案如果有帮助的话：

```
vals = []
until data.empty?
  vals << data.slice!(0, data.slice!(0,2).unpack('n').first.to_i).unpack("a*").first
end 
```

# sql - 获得中间线轴输出

> ID：14910398
> 
> 赞同：0
> 
> 时间：2013-02-16T12:41:15.437
> 
> 标签：sql, oracle, spool

我正在使用 oracle 11g，我有一个带有“spool on”的 sql 文件，它运行至少 7 个多小时，因为它必须假脱机大量数据。但是假脱机输出只有在整个sql完成时才被转储，但我想知道有没有其他方法可以知道我的sql的进度，或者直到那个时间点之前假脱机的数据，所以我放心我的sql是按预期正常运行。请帮助您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:02:11.047

听起来您正在使用`DBMS_OUTPUT`，它总是在程序完成后才开始实际输出结果。

如果您想对进度进行实时/近时间监控，您有 3 个选项：

1.  用于`utl_file`写入操作系统文件。为此，您将需要访问 db server OS 文件系统。

2.  写入表并使用`PRAGMA AUTONOMOUS_TRANSACTION`，这样您就可以提交日志表条目，而不会影响您的主处理。这很容易实现，并且易于访问。以良好的方式实施，这可以成为您所有程序的事实上的标准。然后，您可能需要实施某种内务管理以避免这变得太大和笨重。

3.  一个快速而肮脏的临时选项是使用`DBMS_APPLICATION.SET_CLIENT_INFO`，然后查询`v$session.client_info`。这很好用，有利于跟踪事物，相当不显眼，而且因为它是一种内存结构，所以速度很快。

`DBMS_OUTPUT`真的是有限的。

# jekyll - 如何告诉 Jekyll/Maruku 哪个帖子有 Markdown 语法错误？

> ID：14910400
> 
> 赞同：7
> 
> 时间：2013-02-16T12:41:18.477
> 
> 标签：jekyll, maruku

如何告诉 Jekyll/Maruku 告诉我哪个文件有我的 Mardown 语法错误？

构建警告只告诉我这么多：

```
$ jekyll --safe

Configuration from /homne/me/_config.yml
Building site: /homne/me -> /homne/me/_site

 ___________________________________________________________________________
| Maruku tells you:
+---------------------------------------------------------------------------
| Could not find ref_id = "md_entityhellip" for md_link([md_entity("hellip")],"md_entityhellip")
| Available refs are ["png", "2", "3", "4", "5", "6"]
+---------------------------------------------------------------------------
!/home/eoin/.rvm/gems/ruby-1.9.3-p385/gems/maruku-0.6.1/lib/maruku/errors_management.rb:49:in `maruku_error'
!/home/eoin/.rvm/gems/ruby-1.9.3-p385/gems/maruku-0.6.1/lib/maruku/output/to_html.rb:716:in `to_html_link'
!/home/eoin/.rvm/gems/ruby-1.9.3-p385/gems/maruku-0.6.1/lib/maruku/output/to_html.rb:970:in `block in array_to_html'
!/home/eoin/.rvm/gems/ruby-1.9.3-p385/gems/maruku-0.6.1/lib/maruku/output/to_html.rb:961:in `each'
!/home/eoin/.rvm/gems/ruby-1.9.3-p385/gems/maruku-0.6.1/lib/maruku/output/to_html.rb:961:in `array_to_html'
\___________________________________________________________________________
Not creating a link for ref_id = "md_entityhellip".Successfully generated site: /homne/me -> /homne/me/_site 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T16:39:07.333

下一个版本的 Jekyll 将使用 MaRuKu 提供更好的错误报告，并包含导致错误的文件的路径。

GitHub 上的当前[主分支](http://github.com/mojombo/jekyll)应该足够稳定，您可以将其用于测试目的。如果您决定对其进行测试，我们将欢迎您提供反馈。谢谢！

# php - 如何创建 用 assoc 数组搜索

> ID：14910405
> 
> 赞同：0
> 
> 时间：2013-02-16T12:42:20.163
> 
> 标签：php, mysql, arrays, search

您好，您能帮我解决一个我遇到问题的脚本吗？\ 我想从不同的列和价格范围创建一个搜索脚本：所以 search.php 是：

```
<?php
/* connect to the database*/
$db = new mysqli("localhost", "root", "", "movie");
/* check connection */
if ($db->connect_errno) {
    echo "Connection failed: " . $db->connect_error;
    exit();
}
$query="SELECT * FROM `filmi` 
         WHERE (`nomer` rlike '%$search%' OR 
                `rezume` rlike '%$search%' OR 
                `kategoriq` rlike '%$search%') AND 
                `seriq` BETWEEN '%$pricemin%' AND '$pricemax'  
         ORDER BY seriq ASC";
/* create a prepared statement */
if ($stmt = $db->prepare($query)) {
    /* bind parameters for markers */
    $stmt->bind_param("sssdd", $search, $search, $search, $pricemin, $pricemax);
    /* execute query */
    $stmt->execute();
    /* get result */
    $result = $stmt->get_result();
    if ($result) {
    /* now you can fetch the results into an assoc array */
        while ($row = $result->fetch_assoc()) {
            echo $row['nomer']. ", " .$row['rezume']. ", " .$row['kategoriq']. ", " .$row['seriq']. "<br>";
        }
    }
    /* close statement */
    $stmt->close();
}
/* close db connection */
$db->close();

?> 
```

填写 $search 和 $pricemin / $pricemax 字段的“ `<form method=?>`”表单应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:02:19.343

您可以在标签中使用其中一个`GET`或`POST`方法`<form>`

和

在您的 PHP 脚本中，您可以使用它`$form_var_name = $_REQUEST['form_var_name']`来访问由表单发送的数据。具体如下

```
$search = $_REQUEST['search']; 
$pricemin = $_REQUEST['pricemin'];
$pricemax = $_REQUEST['pricemax']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:22:12.193

检查是否`$search`存在。意思是，是否有一些价值`$search`。

```
if(isset($search) && $search!=''){
    case 1
}
else{
    case 2
} 
```

**情况 1**：如果 $search 中有值，则将其包含在 where 子句中。
下面的查询是解释我的想法的一个例子。

```
$query="SELECT * FROM `filmi` 
     WHERE (`nomer` rlike '%$search%' OR 
            `rezume` rlike '%$search%' OR 
            `kategoriq` rlike '%$search%') AND 
            `seriq` BETWEEN '%$pricemin%' AND '$pricemax'  
     ORDER BY seriq ASC"; 
```

**情况 2：** 如果 $search 中没有值，则不将其包含在 where 子句中。
检查以下查询

```
$query="SELECT * FROM `filmi` 
     WHERE `seriq` BETWEEN '%$pricemin%' AND '$pricemax'  
     ORDER BY seriq ASC"; 
```

# xml - XSL for-each 仅获取第一个节点值

> ID：14910406
> 
> 赞同：0
> 
> 时间：2013-02-16T12:42:22.503
> 
> 标签：xml, xslt, xpath

这是我的 XSLT 文件中的 foreach：

```
<xsl:for-each select="/flights/flight/route[../plane/name/. ='Airbus 330']/routename"> 
        <tr>
            <td>
                <xsl:attribute name="colspan" >2</xsl:attribute><xsl:attribute name="style" >text-align:center</xsl:attribute><a><xsl:attribute name="href">map.php?a=<xsl:value-of select="/flights/flight/route[../plane/name/. =$a]/from/latitude" />&amp;b=<xsl:value-of select="/flights/flight/route[../plane/name/. =$a]/from/longitude" />&amp;c=<xsl:value-of select="/flights/flight/route[../plane/name/. =$a]/to/latitude" />&amp;d=<xsl:value-of select="/flights/flight/route[../plane/name/. =$a]/to/longitude" />&amp;e=<xsl:value-of select="/flights/flight/route[../plane/name/. =$a]/routename" /></xsl:attribute>
                <xsl:value-of select="/flights/flight/route[../plane/name/. ='Airbus 330']/routename"/></a>
            </td>
        </tr>
    </xsl:for-each> 
```

有两条航线有一架 Airbus 330 飞机，在为每条航线运行时，它会根据需要创建两个表行和链接，但使用第一个航线名称两次，而不是每个航线名称。为什么会这样？

这是 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<flights
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="flights.xsd">

<flight flightid="1">
    <flightno>EK98</flightno>
    <callsign>UAE98</callsign>
    <airline>Emirates Airline</airline>

    <plane planeid="1">
        <name>Airbus 330</name>
        <speed>567</speed>
        <registereddate>07-06-10</registereddate>
    </plane>

    <registration>3A6-EDJ</registration>
    <altitude height="feet">41000 feet</altitude>
    <speed ratio="mph">564 mph</speed>

    <route>
    <routename>Fiumicino-Dubai</routename>
    <course bearing="degrees">154 degrees</course>
    <distance type="miles">2697 miles</distance> 
    <duration>PT5H30M</duration>

        <from>
            <iatacode>FCO</iatacode>
            <airport>Fiumicino</airport>
            <country>Italy</country>
            <city>Rome</city>
            <latitude>41.8044</latitude>
            <longitude>12.2508</longitude>
        </from>

        <to>
            <iatacode>DXB</iatacode>
            <airport>Dubai Intl</airport>
            <country>UAE</country>
            <city>Dubai</city>
            <latitude>25.2528</latitude>
            <longitude>55.3644</longitude>
        </to>
    </route>

</flight>

<flight flightid="2">
    <flightno>BA283</flightno>
    <callsign>BAW283</callsign>
    <airline>British Airways</airline>

    <plane planeid="2">
        <name>Airbus 330</name>
            <speed>567</speed>
        <registereddate>06-12-97</registereddate>
    </plane>

    <registration>3A6-EDJ</registration>
    <altitude height="feet">41000 feet</altitude>
    <speed ratio="mph">564 mph</speed>

    <route>
        <routename>London-L.A</routename>
        <course bearing="degrees">154 degrees</course>
        <distance type="miles">5441 miles</distance> 
        <time>PT11H5M</time>
        <from>

            <iatacode>LHR</iatacode>
            <airport>Heathrow</airport>
            <country>England</country>
            <city>London</city>
            <latitude>51.4775</latitude>
            <longitude>0.4614</longitude>
        </from>

        <to>
            <iatacode>LAX</iatacode>
            <airport>Los Angeles Intl</airport>
            <country>USA</country>
            <city>L.A</city>
            <latitude>33.9471</latitude>
            <longitude>-118.4082</longitude>
        </to>
    </route>

</flight>

</flights> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:59:37.683

只需替换`<xsl:value-of select="/flights/flight/route[../plane/name/. ='Airbus 330']/routename"/></a>`为`<xsl:value-of select="."/>`. 在里面`for-each`是`routename`上下文节点，你想输出它（而不是在文档中开始新的导航）。

# sql-server - 从多行中获取/选择值到 sql server 中的 1 行

> ID：14910407
> 
> 赞同：1
> 
> 时间：2013-02-16T12:42:37.033
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个表格，每列都有一些图像。

```
Acd_unq_id  Emp_unq_id  Acd_BImg1   Acd_BImg2  Acd_RImg1  Acd_RImp2  Acd_RImg3  Acd_Active

1          1745     BinaryImg   BinaryImg     NULL      NULL       NULL         1
2          1745        NULL        NULL    BinaryImg    NULL       NULL         1
3          1745        NULL        NULL       NULL      BinaryImg  BinaryImg    1
4          1769     BinaryImg   BinaryImg     NULL      NULL       BinaryImg    1 
```

在上面的示例中，我想为每个唯一的 Emp ID 获取单个列中的数据。所以根据上面给出的例子，我希望结果如下 -

```
Acd_unq_id  Emp_unq_id  Acd_BImg1   Acd_BImg2  Acd_RImg1  Acd_RImp2  Acd_RImg3  Acd_Active

1          1745     BinaryImg   BinaryImg  BinaryImg  BinaryImg  BinaryImg     1
4          1769     BinaryImg   BinaryImg     NULL      NULL     BinaryImg     1 
```

我为此写了一个查询-

```
SELECT
(
SELECT TOP 1 ACH_BILL_IMG1 FROM ADVERT_CAMPAIGN_HEADERS INNER JOIN ADVERT_CAMPAIGN_HEADERS
ON ACH_UNQ_ID = ACD_ACH_UNQ_ID WHERE ACD_SOC_UNQ_ID = 1745 AND ACD_IMAGETYPE IN ('H, Q')) as bill_img1

(SELECT TOP 1 ACH_BILL_IMG2 FROM ADVERT_CAMPAIGN_HEADERS INNER JOIN ADVERT_CAMPAIGN_HEADERS
ON ACH_UNQ_ID = ACD_ACH_UNQ_ID WHERE ACD_SOC_UNQ_ID = 1745 AND ACD_IMAGETYPE IN ('H, Q')) 
```

我想使用子查询和前 1 来获得结果。但是在上面我写的示例查询中，我遇到了语法错误....

> * FROM 子句中的对象“ADVERT_CAMPAIGN_HEADERS”和“ADVERT_CAMPAIGN_HEADERS”具有相同的公开名称。使用相关名称来区分它们。*

请帮忙。等待您的回复，专家:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:24:13.953

怎么样：

```
SELECT [Acd_unq_id] = MIN([Acd_unq_id])
, [Emp_unq_id]
, [Acd_BImg1] = MAX([Acd_BImg1])
, [Acd_BImg2] = MAX([Acd_BImg2])
, [Acd_RImg1] = MAX([Acd_RImg1])
, [Acd_RImp2] = MAX([Acd_RImp2])
, [Acd_RImg3] = MAX([Acd_RImg3])
, [Acd_Active] = MAX([Acd_Active])
FROM ADVERT_CAMPAIGN_HEADERS
GROUP BY [Emp_unq_id] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:36:57.913

尝试这个

```
`Select xx.Emp_unq_id,Acd_BImg1,Acd_BImg2,Acd_RImg1,Acd_RImg2,Acd_RImg3 from
((select  Emp_unq_id,Acd_BImg1 from yourtab where Emp_unq_id =1745
and Acd_BImg1 is not null)A 
inner join
select  Emp_unq_id,Acd_BImg2 from yourtab where Emp_unq_id =1745
and Acd_BImg2 is not null) B 
on A.Emp_unq_id=B.Emp_unq_id
inner join
(select  Emp_unq_id,Acd_RImg1 from yourtab where Emp_unq_id =1745
and Acd_RImg1 is not null) C
on B.Emp_unq_id=C.Emp_unq_id
inner join
(select  Emp_unq_id,Acd_RImg2 from yourtab where Emp_unq_id =1745
and Acd_RImg2 is not null) D
on C.Emp_unq_id=D.Emp_unq_id
inner join (select  Emp_unq_id,Acd_RImg3 from yourtab where Emp_unq_id =1745
and Acd_RImg3 is not null) E
on D.Emp_unq_id=E.Emp_unq_id)XX` 
```

对其他员工 ID 重复此查询...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T14:02:04.730

根据您的查询，我假设图像列中只有一个非空值。请注意，它可能会产生理想的结果，但从性能的角度来看我不知道。我也期待对此的其他替代查询。

```
;WITH tempCompaignHeaders(ACD_UNQ_ID,Acd_Active) AS
(
    SELECT DISTINCT Emp_unq_id, Acd_Active FROM ADVERT_CAMPAIGN_HEADERS
)
SELECT
       (SELECT TOP 1 ACD_UNQ_ID FROM ADVERT_CAMPAIGN_HEADERS WHERE Emp_unq_id = t.Emp_unq_id ORDER BY ACD_UNQ_ID) Acd_BImg1,
       Emp_unq_id
       (SELECT TOP 1 Acd_BImg1 FROM ADVERT_CAMPAIGN_HEADERS WHERE Emp_unq_id = t.Emp_unq_id AND Acd_BImg1 IS NOT NULL) Acd_BImg1,
       (SELECT TOP 1 Acd_BImg2 FROM ADVERT_CAMPAIGN_HEADERS WHERE Emp_unq_id = t.Emp_unq_id AND Acd_BImg2 IS NOT NULL) Acd_BImg2,
       (SELECT TOP 1 Acd_RImg1 FROM ADVERT_CAMPAIGN_HEADERS WHERE Emp_unq_id = t.Emp_unq_id AND Acd_RImg1 IS NOT NULL) Acd_RImg1,
       (SELECT TOP 1 Acd_RImg2 FROM ADVERT_CAMPAIGN_HEADERS WHERE Emp_unq_id = t.Emp_unq_id AND Acd_RImg2 IS NOT NULL) Acd_RImg2,
       (SELECT TOP 1 Acd_RImg3 FROM ADVERT_CAMPAIGN_HEADERS WHERE Emp_unq_id = t.Emp_unq_id AND Acd_RImg3 IS NOT NULL) Acd_RImg3,
       Acd_Active
FROM
       tempCompaignHeaders t 
```

# jquery - SlideUp 和 SlideDown 问题

> ID：14910408
> 
> 赞同：1
> 
> 时间：2013-02-16T12:42:39.147
> 
> 标签：jquery, ajax, slidedown, slideup, hashchange

一切正常，直到我从第二个导航菜单中选择一个链接，在这种情况下，用于选择类的标签会获得一个名为 active 的新类，我认为这会导致问题出现。

问题是，每当您选择了一个项目并再次单击它以使其向上滑动时，您无法使其再次向下滑动。

[http://jsfiddle.net/nBeUh/](http://jsfiddle.net/nBeUh/)

```
 $("#nav2 a").click(function () {
if ($("div." + this.className).is(':hidden')) {
    $("div.cat").slideUp({
        duration: 600,
        easing: 'easeInOutQuint'
    }).filter("div." + this.className).slideDown({
        duration: 600,
        easing: 'easeInOutQuint'
    }); 
```

是否也可以在单个 UL 列表中制作整个导航菜单并将其他项目嵌套在其中，但是让辅助 UL 显示在父级之外？

# javascript - JavaScript 代码在浏览器地址栏中不起作用

> ID：14910417
> 
> 赞同：0
> 
> 时间：2013-02-16T12:43:20.333
> 
> 标签：javascript, forms, browser

假设有一个带有表单的网页，要求输入注册号和 DOB 登录。对于给定的注册号，我试图使用 javascript 强制 DOB 登录到用户帐户。

我首先在新选项卡中打开网页。然后在地址栏中输入以下 JS 代码。如果 RegNo 和 DOB 匹配，我将被重定向到`http://blahtestblah.edu/usermanager/home.jsp`. 我不明白这段代码有什么问题。
另外，我很确定今年是 93 年 :) 所以，请帮帮我！

```
javascript:function f()
 {
 var day=new Array();
 var month=new Array();
 day[0]="01";
 day[1]="02";
day[2]="03";
day[3]="04";
day[4]="05";
day[5]="06";
day[6]="07";
day[7]="08";
day[8]="09";
for (var i=9;i<31;i++)
{
day[i]=i+1;
}

month[0]="01";
month[1]="02";
month[2]="03";
month[3]="04";
month[4]="05";
month[5]="06";
month[6]="07";
month[7]="08";
month[8]="09";
month[9]="10";
month[10]="11";
month[11]="12";

for(var j=0;j<31;j++)
{
for(var k=0;k<12;k++)
{
document.forms[0]['txtRegNumber'].value='112233445';
document.forms[0]['txtPwd'].value=day[j]+month[k]+'1993';
document.getElementById("frm1").elements[5].click();
if(document.location.href=="http://blahtestblah.edu/usermanager/home.jsp"){
alert(day[j]+month[k]);}

}
}

};

f(); 
```

编辑：出生日期的形式`ddmmyyyy`
是的，我来自印度（：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:25:25.167

> 我不明白这段代码有什么问题。

它不起作用，因为`click`提交表单，您的浏览器卸载页面并且任何正在执行的脚本都会消失。它只是没有在该行之后，您将永远不会被允许构建一个将继续在其他页面上执行的脚本。

由于暴力登录表单不是我可以支持的，所以这个问题的解决方案留给读者作为练习:-)

# php - Smarty foreach 循环

> ID：14910425
> 
> 赞同：0
> 
> 时间：2013-02-16T12:44:45.597
> 
> 标签：php, mysql, foreach, smarty

我对 smarty 有疑问，实际上我无法循环从 DB 收集的数据。

这是**getreputation**函数

```
function getreputation($username)
{
global $rDB;

$rows = $rDB->select('
    SELECT *
    FROM account_reputation
    WHERE username=?
    ORDER BY id DESC
    ',
    $username
);

foreach($rows as $row)
{
    $reputation = array();
    $reputation['user'] = $row['username'];
    $reputation['reputation'] = $row['reputation'];
    $reputation['action'] = $row['reason'];
    $reputation['date'] = $row['date'];
}

return $reputation;
} 
```

这是我如何将此功能分配给 tpl

```
$smarty->assign('reputation', getreputation($page['username'])); 
```

最后这是 foreach 循环

```
{foreach from=$reputation item=reputation}
<tr><td width="33%"><center>
{if $reputation.action == 1}Registering an account
{elseif $reputation.action == 2}Daily visit
{elseif $reputation.action == 3}Posting a comment
{elseif $reputation.action == 4}Your comment was voted up (each upvote)
{elseif $reputation.action == 5}Submitting a screenshot
{elseif $reputation.action == 6}Submitting a guide (approved)
{elseif $reputation.action == 7}Earning a <font color="brown">Copper</font> <a href="/?website-achievements">website achievement</a>
{elseif $reputation.action == 8}Earning a Silver <a href="/?website-achievements">website achievement</a>
{elseif $reputation.action == 9}Earning a <font color="gold">Gold</font> <a href="/?website-achievements">website achievement</a>
{else}Achievement not found
{/if}
</center></td><td width="33%">
<center><font color='green'>+{$reputation.reputation}
</font></center></td><td width="33%"><center>
{$reputation.date}
</center></td></tr>
{/foreach} 
```

我能看到的只有 ![foreach的主站点输出](../Images/9ea3e1a379c259e96e7d6d0dc3f72a5a.png)

所以 foreach 的输出是完全错误的 有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:18:27.727

首先，您在此处发布的 PHP 函数将永远不会返回超过一行，因为您一直在覆盖值`$reputation`。

```
function getreputation($username) {
    global $rDB;
    $rows = $rDB->select('SELECT * FROM account_reputation WHERE username=? ORDER BY id DESC', $username);

    // Initialize the array that will be filled with the single rows
    $reputation = array();
    foreach($rows as $row) {
        // Create a temporal variable with a different name
        $rep = array();
        $rep['user'] = $row['username'];
        $rep['reputation'] = $row['reputation'];
        $rep['action'] = $row['reason'];
        $rep['date'] = $row['date'];

        // Add this array to the other one
        $reputation[] = $rep;
    }

    return $reputation;
} 
```

然后，在您的 Smarty 代码中，您应该为当前项目使用不同的变量名称（如 Michael Berkowski 所建议的）：

```
{foreach from=$reputation item=rep}
    <tr><td width="33%"><center>
    {if $rep.action == 1}Registering an account
    {elseif $rep.action == 2}Daily visit
    etc...
    {else}Achievement not found
    {/if}
    </center></td>

    <td width="33%"><center><font color='green'>+{$rep.reputation}
    </font></center></td>
    <td width="33%"><center>{$rep.date}</center></td>
    </tr>
{/foreach} 
```

# php - 如何获取从数据库传递的列参数

> ID：14910426
> 
> 赞同：0
> 
> 时间：2013-02-16T12:44:50.440
> 
> 标签：php, jquery, kendo-ui, kendo-grid

我很习惯使用 KendoUI Grid 插件，但是我遇到了一个新场景，我需要列参数来自我的数据库。

通常的设置是：

```
columns:
  [
  {
    field: "username",
    width: 247,
    title: "Name"
  },
  {
    field: "branch",
    width: 50,
    title: "Branch",
  }... 
```

我现在需要这些参数由我的 PHP 脚本确定。

我需要在 dataSource 参数中设置什么吗？如果是这样，你能给我一个例子吗？

这里是我的 dataSource 参数供参考：

```
dataSource: {
    serverPaging: true,
    serverSorting: true,
    pageSize: 5,
    transport: {
      read: {
        url: ROOT+"user/user-list",
      },
      update: {
        url: ROOT+"user/update-user",
        type: "POST",
        data: function(data)
        {
          data.DoB = kendo.toString(data.DoB, 'yyyy-MM-dd') ;
          data.dateStarted = kendo.toString(data.dateStarted, 'yyyy-MM-dd') ;
          return data;
        }
      }
    },
    error: function(e) {
      alert(e.errorThrown+"\n"+e.status+"\n"+e.xhr.responseText) ;
    },
    schema: {
      data: "data",
      total: "rowcount",
      model: {
        id: 'id',
        fields: {
          username: {
            type: "string", 
            editable: true
          },
          type: {
            type: "string",
            editable: true,
            validation: {
              required: true
            }
          },
          level: {
            type: "string",
            editable: true,
            validation: {
              required: true
            }
          },
          firstName: {
            type: "string", 
            editable: true
          },
          middleName: {
            type: "string", 
            editable: true
          },
          lastName: {
            type: "string", 
            editable: true
          },
          DoB: {
            type: "date", 
            editable: true, 
            format: "{0:yyyy/MM/dd}"
          },
          dateStarted: {
            type: "date", 
            editable: true, 
            format: "{0:dd/MM/yyyy}"
          },
          enabled: {
            type: "boolean", 
            editable: true
          }
        }
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:55:09.840

我刚刚意识到我可以通过使用 $.ajax 用 JSON 格式的列数据填充变量来做到这一点。

例如，在初始化网格之前调用以下代码：

```
var columnData ;
$.ajax({
url: myDataSource,
type: 'POST',
success: function(data){
columnData = data ; // In the form of [{field: "username",width: 247,title: "Job #"}]
})
}) 
```

然后在网格中：

```
...
columns: columnData
... 
```

我把事情复杂化了。欢迎任何意见。

# php - 传递给 Zend 框架 2 验证器的空值

> ID：14910431
> 
> 赞同：13
> 
> 时间：2013-02-16T12:45:15.137
> 
> 标签：php, validation, zend-framework2, input-filter

如何通过 Zend 框架 2 ValidatorChain 将空值传递给我的自定义验证器？

在 ZF1 上可以通过`allowEmpty(false)`

在具有空元素值的 ZF2 上：

*   如果`allowEmpty = false`, NotEmptyValidator 被添加到 ValidatorChain 的顶部, `breakOnFailure = true`, `@see Zend/InputFilter/Input#injectNotEmptyValidator`。

*   如果`allowEmpty = true`，元素被认为是有效的，`@see Zend/InputFilter/BaseInputFilter#isValid`

    ```
    if ($input->allowEmpty()) {
        $this->validInputs[$name] = $input;
        continue;
    } 
    ```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-07-08T12:55:06.457

`continue_if_empty`解决了我的问题。感谢@dson-horácio-junior。这是我使用的：

```
$this->add(array(
    'name' => 'field',
    'continue_if_empty' => true,
    'filters' => array(
        array('name' => 'StripTags'),
        array('name' => 'StringTrim')
    ),
    'validators' => array(
        array(
            'name' => 'Application\Form\Validator\Sample'
        )
    )
));

public function isValid($value, $context = null)
{
    if ($value == '' && $context['otherfield'] == '') {
        $this->error(self::INVALID_FIELD);

        return false;
    }

    // ...
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-16T21:47:16.017

以下适用于 ZF2 版本 2.1.1：

问题（如果我理解正确的话）是在下面的示例中，对于 的空值`'fieldName'`，不会触发验证。这可能很烦人，尽管在

```
$input = new \Zend\InputFilter\Input('fieldName');

$input
    ->setAllowEmpty(true)
    ->setRequired(false)
    ->getValidatorChain()
    ->attach(new \Zend\Validator\Callback(function ($value) {
        echo 'called validator!';

        return true; // valid
    }));

$inputFilter = new \Zend\InputFilter\InputFilter();
$inputFilter->add($input);

$inputFilter->setData(array('fieldName' => 'value'));
var_dump($inputFilter->isValid()); // true, echoes 'called validator!'

$inputFilter->setData(array('fieldName' => ''));
var_dump($inputFilter->isValid()); // true, no output

$inputFilter->setData(array());
var_dump($inputFilter->isValid()); // true, no output 
```

当您遇到特殊情况时，这很烦人，例如检查分配给 CMS 中页面的 URL 并避免冲突（空 URL 仍然是 URL！）。

有一种处理空字符串的方法，基本上是`NotEmpty`自己附加验证器，并避免调用`setRequired`and `setAllowEmpty`。这基本上会告诉[`Zend\InputFilter\Input#injectNotEmptyValidator`](https://github.com/zendframework/zf2/blob/release-2.1.1/library/Zend/InputFilter/Input.php#L307-L327)不要自己自动附加`NotEmpty`验证器：

```
$input = new \Zend\InputFilter\Input('fieldName');

$input
    ->getValidatorChain()
    ->attach(new \Zend\Validator\NotEmpty(\Zend\Validator\NotEmpty::NULL))
    ->attach(new \Zend\Validator\Callback(function ($value) {
        echo 'called validator!';

        return true; // valid
    }));

$inputFilter = new \Zend\InputFilter\InputFilter();
$inputFilter->add($input);

$inputFilter->setData(array('fieldName' => 'value'));
var_dump($inputFilter->isValid()); // true, echoes 'called validator!'

$inputFilter->setData(array('fieldName' => ''));
var_dump($inputFilter->isValid()); // true, echoes 'called validator!'

$inputFilter->setData(array());
var_dump($inputFilter->isValid()); // false (null was passed to the validator) 
```

如果您还想检查`null`，则需要扩展`Zend\InputFilter\Input`如下：

```
class MyInput extends \Zend\InputFilter\Input
{
    // disabling auto-injection of the `NotEmpty` validator
    protected function injectNotEmptyValidator() {}
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-07T18:43:10.393

`Callback`当值为空字符串时，这触发了我的验证器的验证：

```
'required'          => false,
'allow_empty'       => false,
'continue_if_empty' => true,
'validators'        => array(
    array(
        'name'    => 'Callback',
        'options' => array(
            'callback' => function ($value, $context = []) use ($self) {
                // ...
            }
        )
    )
) 
```

`allow_empty`最初使空字符串无效，然后`continue_if_empty`允许随后的验证器对其进行评估。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-26T09:35:58.090

如果您喜欢使用单独的表单验证类或数组表示法进行验证，您可以执行以下操作：

```
$factory     = new Zend\InputFilter\Factory();
$inputFilter = new Zend\InputFilter\InputFilter();

$inputFilter->add($factory->createInput(array(
    'name' => 'name',
    'required' => false,
    'allowEmpty' => true,
    'filters' => array(
        array('name' => 'StripTags'),
        array('name' => 'StringTrim'),
    ),
    'validators' => array(
        array(
            'name' => 'StringLength',
            'options' => array(
                'encoding' => 'UTF-8',
                'min' => '8',
                'max' => '100',
            ),
        ),
    ),
))); 
```

您可以将数组与`required => false`输入`allowEmpty => true`过滤器工厂一起传递（我记得您也可以将它直接传递给输入过滤器 - 不太确定）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-11T11:11:06.760

我经常看到人们`allowEmpty`在 inputFilter 配置数组中使用错误。字符串应该用下划线分隔而不是驼峰式书写。所以`allow_empty`会起作用：

```
'fieldName' => array(
    'name'        => 'fieldName',
    'required'    => true,
    'allow_empty' => true,
    'filters' => array(
        //... your filters ...
    )
    'validators' => array(
        //... your validators ...
    ),
); 
```

这意味着数据中必须存在键为“fieldName”的字段，但其值允许为空。

# jquery - :last-child 删除 body div

> ID：14910436
> 
> 赞同：0
> 
> 时间：2013-02-16T12:46:07.133
> 
> 标签：jquery, css-selectors

我遇到了一个奇怪的 jquery 问题。我必须删除身体的最后一个孩子才能使调整大小功能正常工作。最后一个孩子是 twitter-social-plugin 插入的 div 并且已过时。

在我的调整大小功能中，我尝试了

```
$('body:last-child').remove(); 
```

文件结构如下

```
 <body>
        <div>here comes content and stuff</div>
        </div>that´s the div to be removed</div>
    </body> 
```

当调用 resize-function 时，整个 body-tag 被删除，我得到一个空白页。调整大小功能：

```
$(document).ready(function() {
                $(window).bind('resize', function() {
                    $('body:last-child').remove();
                    contentStretch();
                    function contentStretch() {
                        $('#content-stretch').css({
                            height: "0"
                        });
                        var page_height =  $('#container').height();
                        var window_height = $(window).height();
                        var difference = window_height - page_height;
                        if (difference < 0) {
                            difference = 0;
                        };
                        $('#content-stretch').css({
                            height: difference + "px"
                        });
                    };
                });
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T12:49:52.380

选择[`:last-child`器](http://api.jquery.com/last-child-selector/)获取作为其父元素的最后一个子元素的元素，它不会在元素中查找最后一个子元素。该`body`元素是其父元素的最后一个子元素，因为只有一个`body`元素。

要删除元素`div`的直接子`body`元素的最后一个：

```
$('body > div:last-child').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T12:48:42.537

选择`:last-child`器是它附加到的项目的修饰符。所以你本质上是说删除最后一个`body`元素。

使您的代码可以删除最后一个直接子级的最简单更改是`body`在选择器中添加一个空格。

`$('body :last-child').remove();`

但是，这有点危险，我建议您更具体地了解您要删除的内容。例如，您可以为所有`div`元素赋予一个公共类，例如`container`. 然后你也可以使用[:last-of-type](http://api.jquery.com/last-of-type-selector/)选择器。这确保了您将完全删除您期望的内容，即使您在 DOM 结构的同一级别上有不同类型的其他元素。

`$('.container:last-of-type').remove();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:47:10.933

像这样试试

```
$('div:last').remove(); 
```

# android - Eclipse中的菜单创建（Android开发）

> ID：14910437
> 
> 赞同：1
> 
> 时间：2013-02-16T12:46:27.127
> 
> 标签：android, eclipse, menu, logcat

我是 Android 开发的新手，如果重复，我很抱歉，但我尝试查看其他解决方案，但它们没有帮助。所以这是我的问题：

我尝试创建一个不做任何事情的简单菜单。它应该在按下菜单按钮时弹出。它在一个模拟器（目标 Android 3.0（API 级别 11））上工作，但在我尝试过的其他模拟器（Android 1.5 和 4.0）中打开 logcat 并给出消息：“应用程序菜单（进程 menu.intro）已意外停止。 请再试一次”。

我的 MainActivity.java 文件：

```
 package menu.intro;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.Menu;
    import android.view.MenuInflater;

    public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater=getMenuInflater();
        inflater.inflate(R.menu.mainmenu,menu);
        return true;
    }

    } 
```

我在 /res/menu 文件夹中的 mainmenu.xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
    <menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/buttonone"
      android:icon="@drawable/icon1"
      android:title="@string/showimage1"/>

    <item android:id="@+id/buttontwo"
      android:icon="@drawable/icon2"
      android:title="@string/showimage2" />

    <item android:id="@+id/buttonthree"
      android:icon="@drawable/icon3"
      android:title="@string/showimage3" />
    </menu> 
```

我的 activity_main.xml 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background"
    tools:context=".MainActivity" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="#000000"
        android:src="@drawable/image" />

    </RelativeLayout> 
```

logcat 是这样的，对我来说都是希腊语：

```
02-16 17:46:19.171: I/jdwp(747): received file descriptor 10 from ADB
02-16 17:46:19.211: W/System.err(747): Can't dispatch DDM chunk 46454154: no handler    defined
02-16 17:46:19.211: W/System.err(747): Can't dispatch DDM chunk 4d505251: no handler defined
02-16 17:46:19.591: W/ResourceType(747): Failure getting entry for 0x7f020004 (t=1 e=4) in package 0: 0xffffffb5
02-16 17:46:19.601: D/AndroidRuntime(747): Shutting down VM
02-16 17:46:19.601: W/dalvikvm(747): threadid=3: thread exiting with uncaught exception (group=0x4000fe70)
02-16 17:46:19.601: E/AndroidRuntime(747): Uncaught handler: thread main exiting due to uncaught exception
02-16 17:46:19.631: E/AndroidRuntime(747): java.lang.RuntimeException: Unable to start activity ComponentInfo{menu.intro/menu.intro.MainActivity}: android.view.InflateException: Binary XML file line #8: Error inflating class java.lang.reflect.Constructor
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2268)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2284)
02-16 17:46:19.631: E/AndroidRuntime(747):  at  android.app.ActivityThread.access$1800(ActivityThread.java:112)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1692)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.os.Looper.loop(Looper.java:123)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.app.ActivityThread.main(ActivityThread.java:3948)
02-16 17:46:19.631: E/AndroidRuntime(747):  at java.lang.reflect.Method.invokeNative(Native Method)
02-16 17:46:19.631: E/AndroidRuntime(747):  at java.lang.reflect.Method.invoke(Method.java:521)
02-16 17:46:19.631: E/AndroidRuntime(747):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:782)
02-16 17:46:19.631: E/AndroidRuntime(747):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:540)
02-16 17:46:19.631: E/AndroidRuntime(747):  at dalvik.system.NativeStart.main(Native Method)
02-16 17:46:19.631: E/AndroidRuntime(747): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class java.lang.reflect.Constructor
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.view.LayoutInflater.createView(LayoutInflater.java:512)
02-16 17:46:19.631: E/AndroidRuntime(747):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:562)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:617)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
02-16 17:46:19.631: E/AndroidRuntime(747):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:309)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.app.Activity.setContentView(Activity.java:1626)
02-16 17:46:19.631: E/AndroidRuntime(747):  at menu.intro.MainActivity.onCreate(MainActivity.java:17)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1123)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2231)
02-16 17:46:19.631: E/AndroidRuntime(747):  ... 11 more
02-16 17:46:19.631: E/AndroidRuntime(747): Caused by: java.lang.reflect.InvocationTargetException
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.widget.ImageView.<init>(ImageView.java:103)
02-16 17:46:19.631: E/AndroidRuntime(747):  at java.lang.reflect.Constructor.constructNative(Native Method)
02-16 17:46:19.631: E/AndroidRuntime(747):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.view.LayoutInflater.createView(LayoutInflater.java:499)
02-16 17:46:19.631: E/AndroidRuntime(747):  ... 22 more
02-16 17:46:19.631: E/AndroidRuntime(747): Caused by: android.content.res.Resources$NotFoundException: File res/drawable/title_bar_shadow.9.png from drawable resource ID #0x7f020004
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.content.res.Resources.loadDrawable(Resources.java:1641)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.content.res.TypedArray.getDrawable(TypedArray.java:548)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.widget.ImageView.<init>(ImageView.java:113)
02-16 17:46:19.631: E/AndroidRuntime(747):  ... 26 more
02-16 17:46:19.631: E/AndroidRuntime(747): Caused by: java.io.FileNotFoundException: res/drawable/title_bar_shadow.9.png
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.content.res.AssetManager.openNonAssetNative(Native Method)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.content.res.AssetManager.openNonAsset(AssetManager.java:392)
02-16 17:46:19.631: E/AndroidRuntime(747):  at android.content.res.Resources.loadDrawable(Resources.java:1634)
02-16 17:46:19.631: E/AndroidRuntime(747):  ... 28 more
02-16 17:46:19.671: I/dalvikvm(747): threadid=7: reacting to signal 3
02-16 17:46:19.681: I/dalvikvm(747): Wrote stack trace to '/data/anr/traces.txt'
02-16 17:46:26.052: I/Process(747): Sending signal. PID: 747 SIG: 9 
```

非常感谢您耐心阅读我的问题！任何帮助都深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:07:01.623

看来你需要改变

```
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater=getMenuInflater();
    inflater.inflate(R.menu.mainmenu,menu);
    return true;
} 
```

至

```
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater=getMenuInflater();
    inflater.inflate(R.menu.mainmenu,menu);
    return super.onCreateOptionsMenu(menu);
} 
```

# python - 如何将多个验证器设置为 web2py 中的一个字段？

> ID：14910438
> 
> 赞同：2
> 
> 时间：2013-02-16T12:46:35.460
> 
> 标签：python, web2py

我想将多个验证器设置为像这个示例这样的文件。但只有其中一个运作良好。为什么？

```
db.aetitles.hospital_id.requires = IS_NOT_EMPTY()
db.aetitles.hospital_id.requires = IS_IN_DB(db, db.hospitals.id, '%(title)s') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T12:46:35.460

我试过了，这是正确的：

```
db.aetitles.hospital_id.requires = [IS_NOT_EMPTY(),
                                IS_IN_DB(db, db.hospitals.id, '%(title)s')] 
```

# javascript - 使用 $element.each() 时加快 DOM 访问

> ID：14910440
> 
> 赞同：0
> 
> 时间：2013-02-16T12:46:39.610
> 
> 标签：javascript, jquery, dom, performance

我正在尝试在我庞大的 javascript UI 应用程序中进行一些严重的延迟削减。我一直在阅读优化代码的方法，从我学到的一些东西中，我了解到：

1.  $(element).each() 让事情变慢
2.  变量（和 HTML 对象）应该被缓存

这是我在应用程序中经常运行的函数中现有代码的一部分：

```
if($('.textbox').length > 0)
{   $(".textbox").each(function(){
             var parts = $(this).attr('id').split('_');
             // do some linear-time operations here with $this
            });
     }); 
```

到目前为止，我知道我应该把and only use放在`$this = $(this)`开头。但我还能做什么？有没有更快的替代方式来使用 .each()？我确实需要检查*每个*班级。`.each()``$(this)` *`div``.textbox`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:50:26.097

您正在使用 jQuery，它在后面执行大量代码。最快的方法是原生 Javascript。

真正的小优化是 get the `id`from `this`。你也可以使用这个（Native JS）jQuery 来执行很多函数）：

```
var parts = this.id.split('_'); 
```

**例如**
，尽可能快地获取所有元素。您可以使用此函数按类名获取元素：

```
if (document.getElementsByClassName == undefined) {
    document.getElementsByClassName = function(className)
    {
        var hasClassName = new RegExp("(?:^|\\s)" + className + "(?:$|\\s)");
        var allElements = document.getElementsByTagName("*");
        var results = [];

        var element;
        for (var i = 0; (element = allElements[i]) != null; i++) {
            var elementClass = element.className;
            if (elementClass && elementClass.indexOf(className) != -1 && hasClassName.test(elementClass))
                results.push(element);
        }

        return results;
    }
} 
```

以及要循环的代码：

```
var elements = getElementsByClassName(".textbox");
for(var i=0;i<elements.length;i++)
{
    var splitid = elements[i].id.split("_");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T12:50:33.737

> 但我还能做什么？

几件事：

1.  你的陈述绝对没有意义`if`（除非它有一个`else`你没有显示的子句），因为调用`.each`一个空的 jQuery 对象是一个空操作。去掉它。

2.  如果您不想删除它，至少缓存 DOM 查找的结果，因为每次调用`$('.textbox')`jQuery 都必须关闭并查询 DOM。

3.  `id`是 DOM 元素实例上的反射属性，因此`$(this).attr("id").split('_')`涉及多个函数调用和内存分配，您可以通过使用`this.id.split('_')`.

所以这给了我们：

```
$('.textbox').each(function() {
    var parts = this.id.split('_');
    // Do something with `parts`
}); 
```

或者，如果`else`您没有显示：

```
var boxes = $('.textbox');
if (boxes.length) {
    boxes.each(function() {
        var part s= this.id.split('_');
        // ...
    });
}
else {
    // ...
} 
```*

# php - 更新历史记录表时Mysql触发器不起作用

> ID：14910442
> 
> 赞同：0
> 
> 时间：2013-02-16T12:46:55.473
> 
> 标签：php, mysql, triggers

我想使用下面的触发器更新**历史表**

```
CREATE    
    TRIGGER `trig_Update_transaction` AFTER UPDATE ON `transaction` 
    FOR EACH ROW BEGIN     
      UPDATE transaction_history SET OLD.deliverystatus=NEW.deliverystatus
      WHERE OLD.alertID=NEW.alertID;      
    END$$ 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:17:41.007

删除`OLD`触发器定义中的别名。OLD 和 NEW 别名是指主题（受原始查询影响的）表。

`UPDATE transaction_history SET deliverystatus=NEW.deliverystatus WHERE alertID=NEW.alertID;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:39:37.360

这些行中的问题：

```
UPDATE transaction_history SET OLD.deliverystatus = NEW.deliverystatus
WHERE OLD.alertID=NEW.alertID; 
```

**来自 MySQL 文档**：
在 UPDATE 触发器中，您可以使用 OLD.col_name 来引用更新之前的行的列，使用 NEW.col_name 来引用更新后的行的列。

以 OLD 命名的列是只读的。您可以参考它（如果您有 SELECT 权限），但不能修改它。

有关详细信息，请参阅[此](http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)

我也很想从社区中阅读有关此内容的信息。

# windows-runtime - 在gridview中冻结标题

> ID：14910447
> 
> 赞同：0
> 
> 时间：2013-02-16T12:47:25.027
> 
> 标签：windows-runtime, winrt-xaml

我有以下分组的 GridView

[![图片](../Images/494f0afca812a8f78d3cd3f2c4598722.png)](https://i.stack.imgur.com/CbJh6.png)

每个人都是一个组的负责人。

有没有办法冻结标题，所以当用户水平滚动屏幕时，标题总是可见的？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:44:59.910

当然，只需将标题放在 GridView 之外。或者根本不使用 a`GridView`并将每一行与标题和组项目放在 a 内`ListView`。然后你可以`Grid`在`ItemTemplate`/`DataTemplate`中有一个包含标题和项目的水平列表。另一种选择是根本不显示组项目，因为它可能无法很好地工作，并且只允许在选择一个标题后将它们显示在另一个页面上。

# rackspace - 获取新上传的 CloudFiles 资产的公共 URL

> ID：14910453
> 
> 赞同：3
> 
> 时间：2013-02-16T12:47:57.787
> 
> 标签：rackspace, cloudfiles

将新资产上传到 CloudFiles 存储时，我想获取此资产的公共 URL（如果容器启用了 CDN）。我发现唯一的方法是向 RackSpace 发出 3 个（是的，三个！）请求：

1.  验证用户并获取`x-auth-token`和。`x-storage-url``x-cdn-management-url`
2.  获取所有令牌和 URL 后，将文件上传到容器。
3.  `x-cdn-management-url`向容器的公共 URL发出 HEAD 请求。

我只是想确保每次上传确实需要 3 个请求来获取我刚刚上传的资产的公共 URL。所有操作都必须通过 API 以编程方式执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T08:46:38.107

我相信一旦你有了容器的 CDN URL，你放入其中的每个对象都会附加到它上面。因此，如果您的容器的 CDN URL 是`cdn1.foo.cloudstorage.com`，那么您的对象将具有 URL `cdn1.foo.cloudstorage.com/object1.ext`、`cdn1.foo.cloudstorage.com/object2.ext`等。

您只需要三个步骤即可获取初始容器 CDN URL。之后，就很简单了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T23:13:41.450

如果您使用的是 Java、PHP 或 Python，请查看其中一个[Rackspace SDK](http://developer.rackspace.com/)。有关如何使用 CDN 的示例，请参见：

1.  Java：[CloudFilesPublish.java](https://github.com/jclouds/jclouds-examples/blob/master/rackspace/src/main/java/org/jclouds/examples/rackspace/cloudfiles/CloudFilesPublish.java)
2.  PHP：[cdn.php](https://github.com/rackspace/php-opencloud/blob/master/samples/objectstore/cdn.php)
3.  Python：[container_cdn.py](https://github.com/rackspace/pyrax/blob/master/samples/cloudfiles/container_cdn.py)

# java - 为什么 QuickSort 比 BubbleSort 慢这么多？

> ID：14910456
> 
> 赞同：0
> 
> 时间：2013-02-16T12:48:31.030
> 
> 标签：java, algorithm, quicksort, bubble-sort

我想知道为什么我的快速排序这么慢。对以下数组进行排序需要 10-20 秒。冒泡排序（如下所示）会自动完成。

```
public static void quickSort(int[] tab, int lowIndex, int highIndex) {
if (tab == null || tab.length == 0) {
    return;
}

int i = lowIndex;
int j = highIndex;

int pivot = tab[lowIndex + (highIndex - lowIndex) / 2];

while (i <= j) {
    while (tab[i] < pivot) {
    i++;
    }
    while (tab[j] > pivot) {
    j--;
    }

    if (i <= j) {
    int c = tab[i];
    tab[i] = tab[j];
    tab[j] = c;
    i++;
    j--;
    }

    if (lowIndex < j) {
    quickSort(tab, lowIndex, j);
    }
    if (i < highIndex) {
    quickSort(tab, i, highIndex);
    }
}

}

public static void bubbleSort(int[] arr) {
int n = arr.length - 1;
while (n >= 1) {
    for (int i = 0; i < n; i++) {
    if (arr[i] > arr[i + 1]) {
        int c = arr[i];
        arr[i] = arr[i + 1];
        arr[i + 1] = c;
    }
    }
    n--;
}
}

public static void main(String[] args) {
int[] t = new int[] { 5, 1, 33, 13, 21, 2, 12, 4,
    2, 3, 53, 2, 125, 23, 53, 523, 5, 235, 235, 235, 23, 523, 1,
    2, 41, 2412, 412, 4, 124, 1, 241, 24, 1, 43, 6, 346, 457, 56,
    74, 5, 3, 5, 1, 33, 13, 21, 2, 12, 4,
    2, 3, 53, 2, 125, 23, 53, 523, 5, 235, 235, 235, 23, 523, 1,
    2, 41, 2412, 412, 4, 124, 1, 241, 24, 1, 43, 6, 346, 457, 56,
    74, 5, 3, 74, 5, 3, 5, 1, 33, 13, 21, 2, 12, 4,
    2, 3, 53, 2, 125, 23, 53, 523, 5, 235, 235, 235, 23, 523, 1,
    2, 41, 2412, 412, 4, 124, 1, 241, 24, 1, 43, 6, 346, 457, 56,
    74, 5, 3 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:38:44.790

基本上，您的冒泡排序在某种程度上被破坏了 - 使用 Darren Engwirda 在他的评论中链接到[http://www.mycstutorials.com/articles/sorting/quicksort](http://www.mycstutorials.com/articles/sorting/quicksort)的实现，并每次使用新创建的数组运行排序，我得到以下时间：

```
bash-3.1$ time java -cp bin Sort none

real    0m0.079s
user    0m0.000s
sys     0m0.015s
bash-3.1$ time java -cp bin Sort quick

real    0m0.084s
user    0m0.015s
sys     0m0.015s
bash-3.1$ time java -cp bin Sort bubble

real    0m0.115s
user    0m0.000s
sys     0m0.000s 
```

运行这三个测试的基础设施是：

```
private static int[] data () {
    return new int[] { ... the same data as in the OP ... };
}

public static void main(String[] args) {
    if ( args.length == 0 || args [ 0 ].equals ( "bubble" ) ) {
        for ( int i = 0; i < 1000; ++i ) {
            int[] data = data();
            bubbleSort ( data );
        }
    } else if ( args [ 0 ].equals ( "none" ) ) {
        for ( int i = 0; i < 1000; ++i ) {
            int[] data = data();
        }
    } else if ( args [ 0 ].equals ( "quick" ) ) {
        for ( int i = 0; i < 1000; ++i ) {
            int[] data = data();
            quickSort( data, 0, data.length-1 );
        }
    } else if ( args [ 0 ].equals ( "quick_op" ) ) {
        for ( int i = 0; i < 1000; ++i ) {
            int[] data = data();
            quickSort_op( data, 0, data.length-1 );
        }
    }
} 
```

因此，正确实现的快速排序需要大约 5μs 来对数据进行排序，而冒泡排序需要大约 36μs 来对数据进行排序。对于此数据，快速排序算法比冒泡排序执行得更好。

将递归调用移到循环之外意味着您的代码对数组进行排序（尽管我没有检查其中是否存在任何其他缺陷），结果如下：

```
bash-3.1$ time java -cp bin Sort op_quick

real    0m0.108s
user    0m0.015s
sys     0m0.015s 
```

这仍然比冒泡排序快，但不如其他实现快 - 我认为您可能会重叠 j 和 i 并且不止一次地访问数组的各个部分。

# yeoman - 如何更改 Bower 包 URL？

> ID：14910460
> 
> 赞同：0
> 
> 时间：2013-02-16T12:48:44.330
> 
> 标签：yeoman, bower

我正在`Yeoman`用于应用程序。它使用`Bower`包管理器。Bower 从服务器[https://bower.herokuapp.com/packages](https://bower.herokuapp.com/packages)获取的所有 URL都是格式为 的 Git 只读 URL `git://github.com/components/jquery.git`。

问题是这些 URL 在我的研究所内不起作用。应该是端口被封锁了。

在发现从服务器获取 URL 之前，我尝试将`lib/core/package.js`Bower 中的 URL 更改为。`HTTPS`

那么有什么方法可以`Bower`解决 Github 的只读`HTTPS`URL 而不是`GIT`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:34:14.960

您可以使用 git`git://`替换`https://`：

[git:// 协议被公司阻止，我该如何解决？](https://stackoverflow.com/questions/4891527/git-protocol-blocked-by-company-how-can-i-get-around-that/)

# php - 教义坚持+坚持=插入+插入？

> ID：14910461
> 
> 赞同：2
> 
> 时间：2013-02-16T12:49:13.147
> 
> 标签：php, doctrine

我的项目中有一个简单的实体，如下所示：

```
$obj = Entity\ImportResume();
$obj->setStatus(1);

$em->persist($obj);
$em->flush();
$em->clear();

$obj->setStatus(2);

$em->persist($obj);
$em->flush();
$em->clear(); 
```

但是学说执行 2 次插入，我需要 1 次插入和 1 次更新。

观察：

*   如果我在第一次持久化之后执行 var_dump($obj)，我的 id fileld 将充满数据库 id！
*   对我来说，学说忽略了第二次坚持的 id，为什么？

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:04:35.947

如果我正在阅读 Doctrine Docs，`persist`则仅需要在初始`INSERT`.

本段建议只需更改对象然后刷新存储就足够了：

[7.3\. 持久实体](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-objects.html#persisting-entities)

> 因此，当调用 EntityManager#flush() 时，此类实体的持久状态随后将与数据库正确同步。

并进一步：

[7.7.2\. 同步新实体和托管实体](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-objects.html#synchronizing-new-and-managed-entities)

> 刷新操作适用于具有以下语义的托管实体：
> 
> *   实体本身使用 SQL UPDATE 语句同步到数据库，前提是至少有一个持久性字段已更改。
> *   如果实体未更改，则不会执行任何 SQL 更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:42:48.660

我不知道原因是： $em->clear();

clear 方法清除所有实体的状态，并导致实体管理器上的 id 丢失。

解决办法：

**删除 $em->clear();**

谢谢蒂姆沃拉！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-10T16:57:23.637

如果它是同一个 objetc ，你可以这样做

```
$em->persist($obj);
$obj->setStatus(1);
$obj->setStatus(2);
$em->flush(); 
```

如果是 2 个不同的对象

```
$obj1 = Entity\ImportResume();
$obj1->setStatus(1);
$em->persist($obj1);

$obj2 = Entity\ImportResume();
$obj2->setStatus(2);
$em->persist($obj2);

$em->flush(); 
```

仅在必要时使用“清除”方法在同一代码中重新启动进程。

# ios - 如何在for循环中释放uibuttons对象？

> ID：14910465
> 
> 赞同：0
> 
> 时间：2013-02-16T12:49:35.453
> 
> 标签：ios, objective-c, arrays, for-loop, uibutton

我在 for 循环中循环 uibuttons 对象进行一些计数，当我必须释放对象时，不幸的是我应该使用非 ARC 应用程序

这是我所做的代码

```
for (UIButton *btn in [self.locationScrollView subviews])
{
    if ([btn tag]==1)
        [btn setBackgroundImage:[UIImage imageNamed:@"whiteLeft.png"] forState:UIControlStateNormal];
    else if ([btn tag]==8)
        [btn setBackgroundImage:[UIImage imageNamed:@"whiteright.png"] forState:UIControlStateNormal];
    else
        [btn setBackgroundImage:[UIImage imageNamed:@"whitemid.png"] forState:UIControlStateNormal];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:53:06.433

除非您正在创建它，否则无需释放任何对象。这`btn`只是一个指向您的按钮对象的指针。不要释放它。

```
 [self.locationScrollView subviews] 
```

返回子视图数组（可能是按钮）。您只是在该数组上执行[**快速枚举。**](http://www.cocoawithlove.com/2008/05/fast-enumeration-clarifications.html)

# jquery - Ajax 加载选项卡不起作用

> ID：14910470
> 
> 赞同：0
> 
> 时间：2013-02-16T12:50:08.747
> 
> 标签：jquery, ajax

我正在尝试使用 jquery 和 ajax 制作加载标签，我有“page-1.html、page-2.html、page-3.html、page-4.html、page-5.html”、“ page-1.html" 是我想首先显示的主页，但是我遇到了页面停止加载并且标签内容未显示的问题，只有加载类显示`<div class=\"loading\"></div>` 这里的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 1</title>
<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
<script type="text/javascript">
function Tabs (getFile)
{
    $.ajax({
        url: getFile,
        beforeSend: function (){
            $(".PagesContent").html("<div class=\"loading\"></div>");
        },
        success: function(data){
            $(".PagesContent").html(data);
        }
    });
}

$(document).ready(function (){

    Tabs ("page-1.html")

    $(".pages ul > li").click(function (){
        $(".pages ul > li").removeAttr("class");
        $(this).addClass("active");
        return false;
    });

});
</script>
<style type="text/css">
.loading{
    background-image:url('images/loading.gif');
    background-repeat:no-repeat;
    height:32px;
    width:32px;
    margin:15px auto;
}
</style>
<body>
    <div class="pages">
        <ul>
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Our Partners</a></li>
            <li><a href="#">Supplies</a></li>
            <li><a href="#">Set Order</a></li>
            <li><a href="#">About Us</a></li>
        </ul>
        <div class="clear"></div>
    </div><!--End pages-->      
    <div class="PagesContent"></div><!--End Pages Contents-->

</body>
</html> 
```

为什么错了？页面`page-1.html`未显示！仅显示加载 img。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:13:47.647

要确定您的时机是否正确，您可以这样做（您需要 jQuery 1.5 或更新版本）

```
function Tabs (getFile)
{
    return $.ajax({
        url: getFile,
        beforeSend: function (){
            $(".PagesContent").html("<div class=\"loading\"></div>");
        }
    });
}

$(document).ready(function (){

    $.when(Tabs("page-1.html"))
        .done(function () {
            $(".PagesContent").html(data);
        })
        .fail(function () {
            $(".PagesContent").html("<span class='error'>Failed to load tab.</span>");
        })

    $(".pages ul > li").click(function (){
        $(".pages ul > li").removeAttr("class");
        $(this).addClass("active");
        return false;
    });

}); 
```

如前所述；您的浏览器是否返回任何错误（在控制台中）？

# java - 词搜索引擎

> ID：14910471
> 
> 赞同：0
> 
> 时间：2013-02-16T12:50:08.670
> 
> 标签：java, android

我从事玩家从字母中收集单词的游戏。我需要做的就是检查语言中是否存在单词或在字典中搜索。我发现的最好的是 Hunspell，但它不起作用，因为我只想搜索主格中的单词案例。还有其他工具可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:58:17.127

从互联网上获取字典单词列表并将它们保存到文本文件中。

将文件读入你的程序并保存在.a 集合中

在列表中搜索您需要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:07:58.703

如果你想快速浏览数千个单词并在其中搜索一个单词，你可以使用 Redis。它将数据存储在内存中，速度非常快。

# path - 为什么 Batik 不喜欢我的 SVG 图像中的“d”属性？

> ID：14910472
> 
> 赞同：0
> 
> 时间：2013-02-16T12:50:24.207
> 
> 标签：path, batik

我的简单 SVG 图像（下图）似乎适用于某些应用程序，但不适用于其他应用程序。

例如，在 Java/Batik 应用程序中，抱怨 - '元素 <path> 的属性“d”无效。'

谁能看到蜡染会反对“d”属性的哪一部分？

```
<path id="uparrow"
d="M 45% 5%, 
C 48% 3%, 52% 3%, 55%, 5%,
L 95% 45%,
C 100% 52%, 88% 65%, 80% 60%,
L 62% 40%, 
L 62% 92%,
C 61% 100%, 39% 100%, 38% 92%,
L 38% 40%, 
L 20% 60%,
C 12% 65%, 0% 52%, 5% 45%
z"
fill="#ffffff" stroke="#666666" stroke-width="2" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:32:46.197

SVG 1.1 在 path 元素的 d 属性中不支持“%”字符。
请尝试删除所有“%”。

# c++ - 有没有办法在 C++ 中查看内置文档？

> ID：14910474
> 
> 赞同：1
> 
> 时间：2013-02-16T12:50:27.640
> 
> 标签：c++, stl

我这个月才开始学习 C++。

在 Python 中，我可以`str.find`使用`help(str.find)`.

但是，例如，我不知道如何查看`std::find`in的文档`<algorithm>`。

有没有人有关于在 C++ 中查找函数文档的快速方法的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T12:51:57.247

C++ 没有像 Python 这样的内置文档。

最全面的在线参考指南是[**C++ 参考**](http://www.cppreference.com/)，它涵盖了最后三个标准。这不是大多数搜索引擎的热门搜索，但热门搜索充满了不准确之处，应该避免。

您还可以[下载该站点的档案以供离线查看](http://en.cppreference.com/w/Cppreference%3aArchives)（英文链接）。

> 有没有人有关于在 C++ 中查找函数文档的快速方法的想法？

在 Google Chrome 中，我[设置了一个搜索引擎，](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95653)其中包含关键字“ `cpp`”和 URL“ `http://en.cppreference.com/mwiki/index.php?title=Special%3ASearch&search=%s`”，以便我可以`c``p``p``s``t``d``:``:``f``i``n``d` 在地址栏中键入以[`std::find`](http://en.cppreference.com/mwiki/index.php?title=Special%3aSearch&search=std%3a%3afind%28%29)在浏览器中查找详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T12:54:27.747

C++ 本身没有“内置文档”。它是*一种语言*，而不是一种系统。当然，Python 也“只是一种语言”，但它也是一种解释器，而且这种解释器具有 C++ 编译器所没有的某些特性。

在 Linux 上，您**可能会**找到所需的*联机帮助页*，因为*libstdc++*（GCC 的 C++ 标准库实现）会安装它们：

```
man std::string 
```

C++ 文档可以在以下位置找到规范：

*   [http://cppreference.com](http://cppreference.com)（同行评议和好评）
*   [您的 C++ 书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)（由 SO 同行评审）
*   C++ 标准（权威）

你不应该**使用**：

*   维基百科
*   SGI STL 文档（SGI STL*与*C++ 标准库不同）
*   http://cplusplus.com

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T12:55:03.220

C++ 中没有内置文档之类的东西。您可能有一些随编译器一起提供的文档，但这主要是针对商业产品和特定于供应商的。你最好使用谷歌来找到你选择的网站。

# jquery - 单击标签时也会执行复选框单击事件

> ID：14910485
> 
> 赞同：0
> 
> 时间：2013-02-16T12:51:25.577
> 
> 标签：jquery

我想知道为什么单击标签时会执行复选框单击事件。任何帮助请点击标签时如何防止执行

//点击事件

//我试试这个

```
 $("input:checkbox[name*='chkFields']").click(function (evt) {
        if ($(evt.target).is("input")) {
            if ($(this).attr("checked") == "checked") {
}}}); 
```

//还有这个

```
$("input:checkbox[name*='chkFields']").click(function () {
        if ($(this).attr("checked") == "checked") {
         logic here....
}
}); 
```

// HTML

```
<div class="FloatLeft" id="draggableElements">

               <div style="width: auto!important; margin-bottom: 0px;" class="TableCellHeader metooltip ellipsis" id="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl00_divHeader" title="
                   Employee 

               ">
                   Employee 
               </div>
               <div style="margin-bottom:5px">
                   <table class="checkbox" id="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl00_chkFields">
                                                        <tbody>
                                                        <tr>
                                                            <td>
                                                                <span class="aspNetDisabled">
                                                                    <input type="checkbox" value="106" disabled="disabled" checked="checked" name="ctl00$ContentPlaceHolderContent$sbMain$ctl01$sbGroups$ctl01$DraggableListID$repColumnCategory$ctl00$chkFields$0" id="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl00_chkFields_0" style="visibility: hidden;">
                                                                    <label for="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl00_chkFields_0">Employee Name</label>
                                                                </span>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <span>
                                                                    <input type="checkbox" value="20" checked="checked" name="ctl00$ContentPlaceHolderContent$sbMain$ctl01$sbGroups$ctl01$DraggableListID$repColumnCategory$ctl00$chkFields$1" id="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl00_chkFields_1">
                                                                    <label for="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl00_chkFields_1">Job</label>
                                                                </span>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <span>
                                                                    <input type="checkbox" value="21" checked="checked" name="ctl00$ContentPlaceHolderContent$sbMain$ctl01$sbGroups$ctl01$DraggableListID$repColumnCategory$ctl00$chkFields$2" id="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl00_chkFields_2">
                                                                    <label for="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl00_chkFields_2">Age</label>
                                                                </span>
                                                            </td>
                                                        </tr>
                                                    </tbody></table>
               </div>

               <div style="width: auto!important; margin-bottom: 0px;" class="TableCellHeader metooltip ellipsis" id="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl01_divHeader" title="
                   Sample text

               ">
                   Sample text
               </div>
               <div style="margin-bottom:5px">
                   <table class="checkbox" id="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl01_chkFields">
                                                        <tbody><tr>
                                                            <td>
                                                                <input type="checkbox" value="89" name="ctl00$ContentPlaceHolderContent$sbMain$ctl01$sbGroups$ctl01$DraggableListID$repColumnCategory$ctl01$chkFields$0" id="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl01_chkFields_0">
                                                                <label for="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl01_chkFields_0">Amount</label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <input type="checkbox" value="90" name="ctl00$ContentPlaceHolderContent$sbMain$ctl01$sbGroups$ctl01$DraggableListID$repColumnCategory$ctl01$chkFields$1" id="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl01_chkFields_1">
                                                                <label for="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl01_chkFields_1">Percent</label></td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <input type="checkbox" value="91" name="ctl00$ContentPlaceHolderContent$sbMain$ctl01$sbGroups$ctl01$DraggableListID$repColumnCategory$ctl01$chkFields$2" id="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl01_chkFields_2">
                                                                <label for="ctl00_ContentPlaceHolderContent_sbMain_ctl01_sbGroups_ctl01_DraggableListID_repColumnCategory_ctl01_chkFields_2">Adjustment</label>
                                                            </td>
                                                        </tr>
                                                    </tbody></table>
               </div>

 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:59:01.760

不要这样做。

对于大多数没有灵巧点击非常小的方形框的人来说，这是一种可解释的行为。虽然，单击关联良好且描述性好的标签会使其变得无限容易。

此外，我很确定它有助于视障人士的屏幕阅读器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:13:50.747

我试图管理这个。这是代码片段

```
 $("label[for*='chkFields']").click(function(ev) { ev.preventDefault(); }); 
```

# compare - IBM Rational Tem COncert - 如何使用 scm.exe 比较项目

> ID：14910491
> 
> 赞同：2
> 
> 时间：2013-02-16T12:51:54.207
> 
> 标签：compare, rtc

我们最近从 Harvest 转移到了 Rational Team Concert (RTC)。

我们有很多抱怨，但我们不要纠缠于它们。

我*需要*知道如何执行以下操作：

在我的工作区`C:\ws`中，我有以下流/项目：

```
C:\ws\dev1
C:\ws\dev2 
```

在构建部署脚本包（Oracle、dotNet）时，我想做的是检查我们在项目过程中所做的所有更改是否都包含在包中。

为此，我们有一个反映当前生产的流。

我想简单地查询 RTC 存储库并提出问题：

> **“列出所有与`C:\WS\dev1`生产流相比不同的文件”。**

我找不到任何`SCM.exe`显示如何执行此操作的命令示例。

我发现的唯一方法是将生产流“加载”到我的本地工作区，例如“ ”，然后在“ ”和“ ”`C:\ws\prod`之间进行比较。`C:\ws\dev1``C:\ws\prod`

这个问题是因为 RTC 加载不保留实际的存储库签入时间戳，我必须立即开始过滤掉这些。

必须有一种方法可以使用 SCM 轻松完成此操作。

图形 Eclipse " `compare`"*向*我展示了差异，但我什至无法将该列表复制/粘贴到文本文件中，因为它都是图形的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:17:20.670

命令行将允许您将存储库工作区与流进行比较。如果您已签入已加载到磁盘上的更改，则可以将存储库工作区与生产流进行比较。

```
lscm compare ws {workspace id} s {stream id} -r {repository_URI} -I f 
```

该`-I f`选项将列出文件差异并且**仅**列出文件差异。

如果内容尚未签入，您可以设置流目标并使用`status`命令。未签入的文件将显示在输出中。您可以使用`-C`扩展更改集的选项来查看文件。但是，您必须解析输出，因为没有排除该信息的选项。

如果仍然不支持，您可以在 jazz.net 上打开一个工作项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:09:51.903

这种比较的想法是暂时更改 dev1 repo 工作区的流目标，将其指向 prod 流。

这将允许您获取您在 dev1 中没有的 prod 更改集，或者列出 dev1 中尚未在 prod 中的更改集。

文章“ [Rational Team Concert 中的 Jazz SCM 命令行入门](https://jazz.net/library/article/620/)”说明了这种操作。
（示例是指向另一个 Workspace，但您也可以直接指向另一个 Stream）

```
~/sample$ lscm change-target workspace Workspace1 Workspace2
Target changed.

~/sample$ lscm status
Workspace: (4819) "Workspace1" <-> (4828) "Workspace2"
  Component: (4818) "Comp1" <-> (4828) "Workspace2"
    Baseline: (4825) 1 "Initial Baseline"
    Incoming:
      Change sets:
        (4935)  ---$ userB  <No comment> 
```

但是您仍然需要列出这些更改集的内容并查找公共文件：那些是具有不同内容的文件（更不用说仅存在于 dev1 或 prod 中的文件，或已删除的文件）

简而言之，似乎没有一种*简单*的方法可以在命令行中执行此操作。

# ios - 在 iOS Sdk 中编辑 docx、pptx、xlsx 文件

> ID：14910492
> 
> 赞同：2
> 
> 时间：2013-02-16T12:51:56.020
> 
> 标签：ios, openxml

他所有，

我想在 iPad 上编辑 docx、xlsx 和 pptx 文件。我对此做了很多研究。我发现了一种名为“OOXML”的甲酸盐，它负责同样的事情。

[ECMA-376 标准](http://www.ecma-international.org/publications/standards/Ecma-376.htm)

他们提到了用于理解 OOXML 格式的电子书。这是有用的资源。

但我的问题是我如何能够在 iOS 中做同样的事情，因为 appStore 上有很多应用程序都在做同样的事情。所以有一种方法可以编辑dock、pptx、xlxs并将它​​们保存在iOs上。

任何人都可以有想法或一些参考或图书馆能够做到这一点。

我也看过 libopc 库。

[libopc 文档](http://libopc.codeplex.com/documentation)

谢谢。

# php - 我无法从数据库 mysql pdo php 中检索数据

> ID：14910497
> 
> 赞同：0
> 
> 时间：2013-02-16T12:52:09.383
> 
> 标签：php, pdo

我试图检查我的代码不显示数据库中的数据的原因可能是什么，但似乎我不能。数据库中有数据但没有显示

```
<?php
    try {
    $con = new PDO('mysql:host=localhost;dbname=tish_database;charset=utf8','root','');
    echo "we connected" ;
    } catch(PDOException $e){
    echo 'Connection failed'.$e->getMessage();
    }

    ?>
    <?Php

    $query ="select date_created from tish_user";
        $result= $con->prepare($query);
        $result->execute();
        while($row = $result->fetch(PDO::FETCH_ASSOC)){
    echo $row['date_created'];

    }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:53:48.117

```
$con = new PDO('mysql:host=localhost;dbname=tish_database;charset=utf8','root','');
$con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

查看错误。

您的查询有错误，前面没有空格`from`

（我还更改了 DSN 中的字符集以更正 mysql 拼写）

更一致的代码版本：

```
$dsn = 'mysql:host=localhost;dbname=tish_database;charset=utf8';
$opt = array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION);
$con = new PDO($dsn,'root','', $opt);

$sql = "SELECT date_created FROM tish_user";
$stm = $con->prepare($query);
$stm->execute();
while($row = $stm->fetch()) {
    echo $row['date_created'];
} 
```

# ravendb - 通过键以外的属性检索 RavenDB 文档而不查询

> ID：14910504
> 
> 赞同：2
> 
> 时间：2013-02-16T12:52:57.267
> 
> 标签：ravendb

是否可以使用会返回单个文档但不是关键的属性从数据存储中加载（而不是查询）文档？

在我的场景中，我有用户和品牌。品牌是用户，但用户不一定是品牌。每个品牌都有一个 UserId 属性及其 ID。有没有办法通过其 UserId 加载品牌文档，或者我应该简单地为此创建一个静态索引并进行查询？我想知道是否有什么东西，也许`IDocumentSession.Advanced`我可以用于这个目的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T17:58:38.443

不，您只能通过其键加载文档。对不起。

您可以构建[有意义的文档键](http://mattwarren.org/2012/07/12/fun-with-ravendb-documents-keys/)，这有时会有所帮助。我不确定在你描述的情况下会不会。

最好按 UserId 对 Brands 进行静态索引。

*另外——我认为用“品牌有*用户”而不是“品牌*是*用户”来描述这种关系会更好——是吗？

# java - eclipse中开发maven web项目的难点

> ID：14910508
> 
> 赞同：2
> 
> 时间：2013-02-16T12:53:28.040
> 
> 标签：java, eclipse, maven

我通过命令行程序创建了一个 Maven Web 项目。我的 Eclipse Indigo 中安装了`m2e`, `WTP`,`tomcat`插件。我通过m2e插件将项目导入eclipse。
我在我的 Maven`settings.xml`内部`<servers>`节点 中添加了这些

```
<server>
        <id>tomcatserver</id>
        <username>admin</username>
        <password>adminadmin</password>
</server> 
```

在我的`tomcat-users.xml`我有

```
<tomcat-users>
<user name="admin" password="adminadmin" roles="admin-gui,manager-gui" />
</tomcat-users> 
```

在我的`pom.xml`我有

```
<build>
    <finalName>FirstWebApp</finalName>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>tomcat-maven-plugin</artifactId>
            <configuration>
                     <server>tomcatserver</server>
                     <path>/FirstWebApp</path>
            </configuration>
        </plugin>
    </plugins>
  </build> 
```

现在右键单击我的项目`-> Run as -> Maven build`

现在它没有用。即在 Run as -> Run on Server 选项下没有出现。所以我

```
right click on project -> properties -> project facets -> selected Dynamic web module, java, javascript 
```

Maven 自己构建了项目。现在`Run on Server`出现了。当我运行应用程序时，它成功运行，但 index.jsp 没有出现在我`welcome-file-list`的`web.xml`.

我的项目上出现了一个红十字标记的正方形。`Error Pages`当我在部署描述符标题下 单击时，它说：

```
Resource '/FirstWebApp/WebContent/WEB-INF/web.xml' does not exist. 
```

实际上它不存在，因为当我创建 maven 项目时它存在于

```
/src/main/webapp/WEB-INF/web.xml 
```

它仍然存在。我的 index.jsp 也出现在 webapp 目录中。
**哪里有问题 ？**现在我对 maven web 项目的目录结构感到非常困惑。
谁能解释一下我的网络项目的目录结构。这里是：

```
->src
    ->main
        resources
        ->webapp
            index.jsp
            ->WEB-INF
                web.xml
->target
    -> it's sub-directories
->WebContent
    ->META-INF
    ->WEB-INF
        lib 
```

这让我很头疼。请指导我，我是否以正确的方式在 Eclipse 中开发 Maven Web 项目？

我应该把我的 POJO、Servlet 和其他类放在这个结构中的什么位置 **。**

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T16:00:09.133

Eclipse WTP 使用与 maven 不同的文件系统布局约定。例如，WTP 期望您的 jsp 页面和配置将在 WebContent 中，这可以更改，但需要对许多不同的项目属性设置进行更改。

解决此问题的最快方法是从 eclispe 中创建一个使用 m2e 的 maven Web 项目，这样您将获得一个为 maven 和 eclipse 正确配置的 wtp 项目。然后我会将您的代码复制到新项目的正确位置。任何你会放在 web 内容中的东西，你都会放在 src/main/webapp 中，java 代码会放在 src/main/java 中。阅读 maven 目录约定是个好主意。

为了让 maven 和 eclipse 运行良好，您要了解的基本概念是 eclipse 和 maven 都将尝试负责您的项目配置，这将导致问题。所以你想使用 maven 作为 maven 可以设置的所有项目设置的来源，例如 maven 可以告诉 eclipse 项目是否是动态 web 模块，以及要使用的 java 编译器的级别......等等。所以用于设置 maven 可以配置使用 maven。对于 maven 无法配置的设置，例如 eclipse 源代码格式化程序，请使用 eclipse 项目属性来设置这些设置。

WTP 和 maven 之间的另一个大区别是 WTP 期望您配置一个服务器，并且对于每个项目，它假定该项目具有目标运行时，以便可以解决诸如 servlets api 之类的事情。另一方面，Maven 期望您的项目应该独立于您将在其上运行它的应用程序服务器进行编译和构建，因此它期望您从 Maven 中心事物（如 servlet api、jsp api jars、.. . 等等，它期望那些被标记为提供的范围。例如。

```
<dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>javax.servlet.jsp-api</artifactId>
        <scope>provided</scope>
        <version>2.2.1</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T10:50:44.690

如果您使用的是较新的 Eclipse 版本之一（Indigo 或 Juno），您可能也应该安装该`m2e-wtp`插件。它将在 Maven 配置和 WTP 期望项目布局的方式之间架起一座桥梁。

[http://www.eclipse.org/m2e-wtp/](http://www.eclipse.org/m2e-wtp/)

这个问题看起来与您尝试做的类似，它更详细地解释了如何设置项目结构：[Maven/Tomcat Projects In Eclipse Indigo/3.7](https://stackoverflow.com/questions/6356421/maven-tomcat-projects-in-eclipse-indigo-3-7)

# android - 在 Android 应用程序中切换页面

> ID：14910516
> 
> 赞同：1
> 
> 时间：2013-02-16T12:54:07.827
> 
> 标签：android

我想知道在我的应用程序中的页面之间传递的最佳方式是什么。

现在我已经为每个页面制作了线性布局类。

我不知道我是否应该为每个页面制作活动类并且每个按钮都会打开一个新页面作为新活动，
或者我应该在主活动中做所有事情并且每个按钮都会将主活动的布局设置为请求的页面。

什么是最好的方法？任何人有另一种我没有menchend的方式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:58:30.027

您可以使用[intents](http://developer.android.com/guide/components/intents-filters.html)，[它们出现在](http://developer.android.com/training/basics/firstapp/starting-activity.html)Android 网页的培训部分，并且相对容易用于在屏幕/活动中传递数据。

与往常一样，查看当前[示例](http://developer.android.com/tools/samples/index.html)以了解其他开发人员如何进行此类工作是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:03:23.700

使用[Fragments](http://developer.android.com/guide/components/fragments.html)你可以创建一个只有一个 Activity 的应用程序，它是从 View 中动态添加或删除 Fragments

# css - 搜索结果列表的 CSS - Bootstrap

> ID：14910519
> 
> 赞同：0
> 
> 时间：2013-02-16T12:54:17.633
> 
> 标签：css, twitter-bootstrap

我正在努力在网页上显示搜索结果。这个网页正在使用 twitter bootstrap，但我找不到任何我想要的 bootstrap ready-to-go 风格。但是，我在使用 twitter bootstrap 时不是很有经验，所以可能有些事情我不知道。

由于我没有找到任何适合我需要的 twitter 引导程序，我尝试了以下方法：

```
<div id="searchResults" class="inner-content">
    <ul class="multiColumn">
        <li class="userPresentation userid2">
            <a class="removeFromShortList close" href="#" title="shortlist.searchResult.removeFromShortListLabel">
                <i class="icon-minus-sign"></i>
            </a>
            <div class="userContent">
                <img class="img-rounded pull-left" src="/assets/img/default_avatar_50x50.png" alt="profileImage">
                <a href=" /viewProfile/2" class="userName" title=" Single line">
                    Single line
                </a>
            </div>
        </li>
    </ul>
</div> 
```

使用如下所示的 CSS：

```
.inner-content { /* border */
    margin-bottom: 14px;
    -webkit-border-radius: 6px;
    -moz-border-radius: 6px;
    border-radius: 6px;
    border: 1px solid rgba(0, 0, 0, 0.25);
    -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);
    -moz-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);
    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);
    overflow: hidden
}
ul.multiColumn,ul.multiColumn li {
    margin: 2px;
    padding: 0px;
}
ul.multiColumn li.userPresentation {
    display: inline-block;
    min-height: 54px;
    max-height: 54px;
    width: 150px;
    max-width: 150px;
    background-color: #eee;
    line-height: 13px;
}
ul.multiColumn li.userPresentation .userContent {
    margin: 2px;
    font-size: 12px;
} 
```

这似乎工作正常，除了这个：

1.  如果其中一个用户名包含在两行或多行上，则那些没有被下推的用户名如下图所示。
2.  我希望隐藏溢出的文本并`...`显示 a 。在这里我可能需要使用 jquery 插件？
3.  我无法将用户名垂直居中。

这是一些测试数据的结果：![在此处输入图像描述](../Images/8a5b31c8b5c42bed1ec0ea1bdb793ffc.png)

如果那里有任何 CSS 或 Bootstrap Guru，我将非常感谢您的帮助。如果有任何不错的 Bootstrap 方法来显示考虑媒体宽度的此类数据，那将是超级的；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:55:53.227

1.  只需添加`vertical-align: bottom;`：

    ```
    ul.multiColumn li.userPresentation {
        display: inline-block;
        min-height: 54px;
        max-height: 54px;
        width: 150px;
        max-width: 150px;
        background-color: #eee;
        line-height: 13px;
        vertical-align: bottom;
    } 
    ```

2.  对于溢出省略号，请使用：

    ```
    ul.multiColumn li.userPresentation .userContent a {
        display: inline-block;
        white-space: nowrap;
        width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        vertical-align: center;
    } 
    ```

3.  应用上述内容后，它变为**垂直居中**。

# javascript - 如何使用 JavaScript / HTML5 获取图像矩阵 2D

> ID：14910520
> 
> 赞同：4
> 
> 时间：2013-02-16T12:54:25.203
> 
> 标签：javascript, html, matrix, image

有没有使用 html5/js 示例将任何图像转换为二维矩阵的解决方案

```
picture.jpg -------be Converted to -----> matrice[W][H] of pixels 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T14:11:55.607

正如其他人所指出的，您可以使用画布元素来执行此操作。我会发布一个 JSFiddle，但此技术仅适用于与页面托管在同一域上的图像（除非该图像启用了[跨域功能](https://developer.mozilla.org/en-US/docs/HTML/CORS_Enabled_Image)）......并且 JSFiddle 似乎没有托管任何合适的图像以在示例中使用. 所以这是我用来测试的代码：

```
// Get a reference to the image you want the pixels of and its dimensions
var myImage = document.getElementById('theImageToWorkWith');
var w = myImage.width, h = myImage.height;

// Create a Canvas element
var canvas = document.createElement('canvas');

// Size the canvas to the element
canvas.width = w;
canvas.height = h;

// Draw image onto the canvas
var ctx = canvas.getContext('2d');
ctx.drawImage(myImage, 0, 0);

// Finally, get the image data
// ('data' is an array of RGBA pixel values for each pixel)
var data = ctx.getImageData(0, 0, w, h); 
```

阅读[画布像素操作](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas)以获取详细信息。您可能还想验证您关心的浏览器是否[支持 canvas 标签。](http://caniuse.com/#feat=canvas)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T13:47:30.413

Unfortunately for reasons that are difficult to explain Javascript code is not allowed to read the pixels of an image unless the image comes from the same server where the Javascript has been downloaded from.

This even if the image is public and the whole internet can download it without providing credentials... the whole world can but your page cannot for security reasons (!). One trick to circumvent this limitation is to write a server side part that will get the image on your behalf.

If the image is one that you are allowed to read then you can create a canvas, draw the image on it and then read the pixels.

```
var c = document.createElement("canvas");
c.width = img.width;
c.height = img.height;
var ctx = c.getContext("2d");
ctx.drawImage(img, 0, 0);
var idata = c.getImageData(0, 0, img.width, img.height);
//
// here idata.data[(y*img.width + x)*4] is the red value
// of pixel (x, y), followed by green, blue and alpha
// 
```

# javascript - iOS6 Safari 全屏检测

> ID：14910524
> 
> 赞同：5
> 
> 时间：2013-02-16T12:54:53.110
> 
> 标签：javascript, ios, mobile-safari, fullscreen, onresize

我想在iOS6中使用Safari新的全屏功能。现在我知道不可能从 javascript 触发全屏功能，这没关系，但我想知道用户何时进入全屏模式。（在用户进入全屏模式之前，显示一个带有文本“此网站最好以全屏模式查看”的弹出窗口。）

我已经尝试设置窗口、文档和“包装器”div（宽度和高度在 css 中设置为 100%）onresize 事件（通过普通 javascript 和通过 jQuery 'resize' 事件），但它们不会被触发我进入全屏模式。

我还设置了一个间隔来检查屏幕/文档/包装器的宽度和高度的变化，但它们没有显示任何变化。

有没有其他方法可以确定用户是否进入（或离开）全屏模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:45:26.810

好吧，我真的不知道为什么它以前不起作用，但我责怪新的 safari ios 调试控制台（现在需要在你的 mac 上通过 safari），因为它并不总是显示我发送的所有日志到控制台。

但是，当我只是将消息附加到 html 文档本身的正文时，这些事件正在工作。将 jQuery 'resize' 事件绑定到窗口似乎是最好的选择。

文档高度在非全屏时约为 200，全屏时为 320。

最简单的解决方案似乎可以正常工作。（只需将其与方向更改功能结合使用，即可检测 iPhone 是否处于横向模式（[http://ajaxian.com/archives/iphone-windowonorientationchange-code](http://ajaxian.com/archives/iphone-windowonorientationchange-code)））。

```
 $(window).on('resize', function(){
        if ($(this).height() > 300 && 
           (window.orientation == 90 || window.orientation == -90)) {
            // Full screen!
        } else {
            // Exit full screen!
        }
    }); 
```

# sql - 如何使用 oracle 将整个列更新到另一个表中？

> ID：14910527
> 
> 赞同：2
> 
> 时间：2013-02-16T12:55:06.627
> 
> 标签：sql, oracle10g

我有两个名为`t1(id,ref_id) and t2(ref_id,id)`我需要使用来自 t2 ref_id 的数据更新 t1 的 ref_id 列的表。这里 id t1.id 和 t2.id 具有相同的值让我们考虑一下。
t1 有

```
ID  REF_ID
123  
123  
124  
124  
124  
125 
```

t2 有

```
REF_ID  ID
2010    123
2011    123
2012    124
2013    125
2014    124
2015    124 
```

我的输出是

```
123 2010
123 2011
124 2012
125 2013
124 2014
124 2015 
```

可以通过单个更新语句来完成吗？我试过这个

```
update test_01 t1 set t1.ref_id=(select * from(select t2.ref_id from test_02 t2 order by t2.id )); 
```

但没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:00:33.260

试试这个：

```
update t1
set ref_id = (select t22.ref_id
                from (select rowid ri,  id, ref_id, row_number() over (partition by id order by 1) rn 
                        from t1 ) t11 join
                     (select id, ref_id, row_number() over (partition by id order by 1) rn
                        from t2) t22 on t11.id = t22.id and t11.rn = t22.rn
             where t11.ri = t1.rowid); 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/87bad/15)

由于我使用了窗口函数（row_number），您可能会考虑使用合并：

```
merge into t1 d
using (
  select t22.ref_id, t11.ri
                from (select rowid ri,  id, ref_id, row_number() over (partition by id order by 1) rn 
                        from t1 ) t11 join
                     (select id, ref_id, row_number() over (partition by id order by 1) rn
                        from t2) t22 on t11.id = t22.id and t11.rn = t22.rn  
) s
on (d.rowid = s.ri)
when matched then update set d.ref_id = s.ref_id 
```

[这是另一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/87bad/14)

# android - Android Dialog 主题使图标太轻

> ID：14910536
> 
> 赞同：50
> 
> 时间：2013-02-16T12:55:58.303
> 
> 标签：android, icons, themes, android-alertdialog

我在 Eclipse 中创建了一个针对 Jelly Bean 的新应用程序。这都是自动创建的代码。清单将应用程序主题设置为 AppName：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    . . . 
```

将值目录中的样式转换为 AppBaseTheme：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <!--
        Base application theme, dependent on API level. This theme is replaced
        by AppBaseTheme from res/values-vXX/styles.xml on newer devices.
    -->
    <style name="AppBaseTheme" parent="android:Theme.Light">
        <!--
            Theme customizations available in newer API levels can go in
            res/values-vXX/styles.xml, while customizations related to
            backward-compatibility can go here.
        -->
    </style>

    <!-- Application theme. -->
    <style name="AppTheme" parent="AppBaseTheme">
        <!-- All customizations that are NOT specific to a particular API-level can go here. -->
    </style>

</resources> 
```

而 values-v14/styles.xml 是：

```
<resources>

    <!--
        Base application theme for API 14+. This theme completely replaces
        AppBaseTheme from BOTH res/values/styles.xml and
        res/values-v11/styles.xml on API 14+ devices.
    -->
    <style name="AppBaseTheme" parent="android:Theme.Holo.Light.DarkActionBar">
        <!-- API 14 theme customizations can go here. -->
    </style>

</resources> 
```

然后我在退出前创建了一个确认对话框：

```
 case R.id.menu_quit:
        new AlertDialog.Builder(this)
        .setIcon(android.R.drawable.ic_dialog_alert)
        .setTitle(R.string.confirm_title)
        .setMessage(R.string.confirm_text)
        .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                finish();    
            } 
```

结果对话框是：

![结果对话框](../Images/eb57c0eb24d8925b1bedb72a019b39bd.png)

为什么 ic_dialog_icon 这么轻？它几乎看不见。我使用所有默认值，我没有修改主题或任何颜色，系统不应该选择一个与其背景有更多对比的图标吗？我该如何解决？

**使用修复进行编辑**
按照 Tomik 信息，我阅读了**android.R.attr.alertDialogIcon**的文档并进行了修复（将**setIcon()**替换为**setIconAttribute()**）

```
 new AlertDialog.Builder(this)
        .setIconAttribute(android.R.attr.alertDialogIcon)
        .setTitle(R.string.confirm_title)
        .setMessage(R.string.confirm_text)
        .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() { 
```

现在对话框如下所示：

![在此处输入图像描述](../Images/7ecf61272131d4ecd0c794685f8efd97.png)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-16T13:42:07.573

问题是您使用的是私有资源`android.R.drawable.ic_dialog_alert`。

使用私有资源是有问题的，它们可能在不同的设备上有所不同，您甚至无法确定它们是否存在于所有设备上。最好的办法是避免使用私人资源。如果您需要它们，您应该从 Android 源中复制它们并将它们放入项目的资源中。

您的资源太白的确切原因是您使用`android.R.drawable.ic_dialog_alert`的是用于标准（非 Holo）主题的资源 ( )。
但是对于运行 Android 4.x（API 级别 14）的设备，您使用`android:Theme.Holo.Light.DarkActionBar`的是通常使用不同资源的 Holo 主题（）。

对于 Holo 主题，默认警报图标`android.R.id.ic_dialog_alert_holo_dark`用于深色主题或`android.R.id.ic_dialog_alert_holo_light`浅色主题（您的情况，您应该使用此资源）。

注意：由于 API 级别 11，有一个属性`android.R.attr.alertDialogIcon`指的是当前主题的默认警报对话框图标。在您的代码中，您可以这样使用它：

```
case R.id.menu_quit:
    new AlertDialog.Builder(this)
    .setIconAttribute(android.R.attr.alertDialogIcon)
    .setTitle(R.string.confirm_title)
    .setMessage(R.string.confirm_text)
    .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            finish();    
        } 
```

我仍然建议将资源从 Android 源复制到项目的资源中，因为这是确保图标始终看起来相同的唯一方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-20T10:46:27.473

如果您也在这些设备上使用浅色主题，则基于[Tomik 对 pre-HC 的回答的工作区：](https://stackoverflow.com/a/14910945/253468)

```
AlertDialog.Builder builder = ...;
if (VERSION.SDK_INT < VERSION_CODES.HONEYCOMB) {
    Drawable icon = ContextCompat.getDrawable(context, android.R.drawable.ic_dialog_alert).mutate();
    icon.setColorFilter(new ColorMatrixColorFilter(new float[] {
            -1, 0, 0, 0, 255, // red = 255 - red
            0, -1, 0, 0, 255, // green = 255 - green
            0, 0, -1, 0, 255, // blue = 255 - blue
            0, 0, 0, 1, 0     // alpha = alpha
    }));
    builder.setIcon(icon);
} else {
    builder.setIconAttribute(android.R.attr.alertDialogIcon);
} 
```

# c - 列表列表（内部列表被删除或内存释放）

> ID：14910537
> 
> 赞同：0
> 
> 时间：2013-02-16T12:56:04.533
> 
> 标签：c, list, memory

我使用基于 C 的网络模拟器 OPNET。在我的一个 C 文件（称为流程模型）中，我有一个全局可访问的链表（称为障碍列表）。在下面的代码中，我用包含字符串的较小列表填充它。这似乎工作正常，我可以在最后读回整个列表。

但是，我需要稍后从另一个 C 文件（进程模型）访问这个全局列表列表。

当我尝试访问这个全局链表时，我可以看到它包含 380 个项目（正确），但是当我尝试访问内部链表时，它们是空的。

当我第一天填充列表时，它一定是内存分配疏忽。当我使用“input = op_prg_list_create()”行创建内部列表并使用 strdup 为列表的内容分配内存时，我不明白为什么会发生这种情况。

我非常坚持这一点，所以任何关于可能发生的事情的帮助或指示将不胜感激。

非常感谢。

```
fgets(line, sizeof(line), obstaclePositions_traj_file);

obstacle_list = op_prg_list_create();

while (line != OPC_NIL) 
{
token = strtok(line, "\t\n"); //Pull the string apart into tokens using the \t
input = op_prg_list_create();

while (token != NULL)
       {
          test_token = strdup(token);

          if (op_prg_list_size(input) == 0)
           op_prg_list_insert(input,test_token,OPC_LISTPOS_HEAD);
          else
           op_prg_list_insert(input,test_token,OPC_LISTPOS_TAIL);
      token = strtok (NULL, "\t\n");
      }     

       if (op_prg_list_size(obstacle_list) == 0)
    op_prg_list_insert(obstacle_list,input,OPC_LISTPOS_HEAD);
   else
    op_prg_list_insert(obstacle_list,input,OPC_LISTPOS_TAIL);

}

//check the list has been populated correctly below (it has)

/*size_ob_list = op_prg_list_size (obstacle_list);
for (k = 0; k <size_ob_list; k++)
{
line_coord_list = (List*)op_prg_list_access (obstacle_list, k);     
count_inner_list = op_prg_list_size (line_coord_list);
for (j=0; j< count_inner_list; j++)
{
    coords = (char*)op_prg_list_access (line_coord_list, j);
    printf("%c", coords);       
}
}*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:15:50.087

`while (line != OPC_NIL) {}`是可疑的。

在 EOF 上， fgets()**返回**null，但**不改变**缓冲区（最后一次成功调用的内容仍将在那里）

```
obstacle_list = op_prg_list_create();

while (fgets(line, sizeof(line), obstaclePositions_traj_file) )
{
    input = op_prg_list_create();

    for( token = strtok(line, "\t\n"); token ; token = strtok (NULL, "\t\n") )
       {
          test_token = strdup(token);

          op_prg_list_insert(input,test_token
            , (op_prg_list_size(input)==0) ? OPC_LISTPOS_HEAD : OPC_LISTPOS_TAIL
            );
    }     

    op_prg_list_insert(obstacle_list,input
     , (op_prg_list_size(obstacle_list) == 0) ? OPC_LISTPOS_HEAD : OPC_LISTPOS_TAIL
     );

} 
```

# angularjs - 在AngularJS中使用工厂方法获取服务器数据

> ID：14910539
> 
> 赞同：1
> 
> 时间：2013-02-16T12:56:25.030
> 
> 标签：angularjs

在一个基于 Angular 的小型应用程序中。我创建了两个控制器，然后希望这两个控制器都使用工厂方法从 mysql 数据库中获取数据。当我对它们进行硬编码时，我可以传递一组记录。但是如果我尝试通过 http 和/或使用资源来获取它们，我将无法做到这一点。

最重要的是......我不确定什么是最好的方法。你能帮忙吗？

```
var myApp = angular.module('myApp', ['ngResource']);
myApp.factory('Data', function() {
  var person = [
    {name: "Mark Webber", sex: "Male", skills: "none", team: "webdev"},
    {name: "Danny Web", sex: "Male", skills:"asdsad", team: "webdev"},
    {name: "Steffy Graph", sex: "Female", skills:"ada", team: "accounts"},
    {name: "Anna Martin", sex: "Female", skills:"asdsa", team: "webdev"}
  ];
  return person;
});

function tricoreContrller($scope, Data, newData) {
  $scope.users = Data;
  console.log(Data);
}

function webdevController($scope, Data, newData) {
  $scope.users = newData;
  console.log(newData);
} 
```

这两个控制器都可以与很酷的**Data交互。**但这是硬编码的。我想要来自我想来自ajax的服务器的实际数据。我该怎么做。

如果有的话，使用 $resource 有什么特别的好处吗？我尝试了文档，但没有太大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T17:59:38.727

为简单起见，请使用[$http 模块](http://docs.angularjs.org/api/ng.$http)（请参阅[$http 与 $resource](https://stackoverflow.com/questions/13181406/)）。这还有一个优点，即 $http 返回一个您应该能够按如下方式使用的承诺（改编自[delaying-controller-initialization](https://stackoverflow.com/questions/12356185/angular-js-delaying-controller-initialization)）。

```
function tricoreContrller($scope, data) {
  $scope.users = data;
}

function webdevController($scope, data) {
  $scope.users = data;
}

var resolveFn = {
    data : function($http) {
        return $http({
            method: 'GET', 
            url: 'http://server/getJSON'
        });
    }
};
tricoreContrller.resolve = resolveFn;
webdevController.resolve = resolveFn;

var myApp = angular.module('myApp', [], function($routeProvider) {
    $routeProvider.when('/', {
        templateUrl: '/editor-tpl.html',
        controller: tricoreContrller,
        resolve: tricoreContrller.resolve
    });
    // same for the other route for webdevController
}); 
```

或者，如果两个控制器在同一路由上并且一个包含在另一个中，则使用 访问父控制器的范围可能更容易`$scope.$parent.data`。

# java - jqgrid 更改默认 rowNum 大小

> ID：14910542
> 
> 赞同：2
> 
> 时间：2013-02-16T12:56:44.643
> 
> 标签：java, javascript, jquery, servlets, jqgrid

我正在使用 jqGrid 使用 JSP 和 servlet 以表格格式显示数据。

```
rowList: [],        // disable page size dropdown
pgbuttons: false,     // disable page control like next, back button
pgtext: null,         // disable pager text like 'Page 0 of 10'
viewrecords: false , 
```

我已经使用上面的代码禁用了`navigation of pages`，但我希望数据库中的所有数据都应该显示在表中，但默认`rowNum`值为`20`. 所以问题是当`20`数据库中有更多的记录时，网格中只`20`显示记录，没有办法看到其他记录，所以我应该如何根据数据库中的值更改值（或删除默认值 20)？

[**注意：**我可以将 的值设置`rowNum`为一些大的值，例如`100000`，但我想知道有什么合适的方法吗？}

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:07:51.337

您必须设置`rowNum`一些足够大的值，例如`rowNum: 10000`. 这是 jqGrid 的一个选项。如果要更改某些 jqGrid 选项的默认值，可以`$.jgrid.defaults`在创建网格之前设置属性。例如

```
$.extend($.jgrid.defaults, {
    rowNum: 10000,
    pgbuttons: false,
    viewrecords: false
}); 
```

您可以在 jqGrid的源代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.base.js#L667-L771)中看到 jqGrid 选项的大多数默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-02T15:21:19.687

```
rowNum: -1 will show all the data. For more details see this answer. 
```

[如何显示 jqGrid 中的所有行？](https://stackoverflow.com/questions/1237096/how-to-show-all-rows-in-the-jqgrid)

# jquery - 使用css或jquery创建45度角并与底部对齐的列表

> ID：14910545
> 
> 赞同：0
> 
> 时间：2013-02-16T12:57:02.583
> 
> 标签：jquery, html, css, transform

我正在尝试创建一个 ul 文本列表，其角度为 -45 度，还需要与底部对齐并整齐地间隔（这样我就可以很好地控制间距）。

[喜欢本页](http://www.grasshopperwaiheke.co.nz/Waiheke_Bus_Timetable_files/Bus%20timetable%20-%20Onetangi.jpg)顶部的元素

HTML：

```
 <div class="route-diagram">
        <ul class="routes">
            <li class="first">Pennywell, Quarry View</li>
            <li>Pallion, Forfield Road</li>
            <li>Royal Hospital, Hylton Road</li>
            <li>Millfield Metro</li>
            <li>Sunderland, Green Terrace</li>
            <li>Lorem Ipsum</li>
            <li>Lorem Ipsum</li>
        </ul>
   </div> 
```

CSS：

```
 .route-diagram ul.routes {
list-style:none;
 }

.route-diagram ul.routes li {
display:inline;
-webkit-transform: rotate(-45deg);
-moz-transform: rotate(-45deg);
-ms-transform: rotate(-45deg);
-o-transform: rotate(-45deg);
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
/*
-webkit-transform-origin: 0 100%;
    -moz-transform-origin: 0 100%;
    -o-transform-origin: 0 100%;
    transform-origin: 0 100%;
*/
zoom:1;
 } 
```

我在[这里开始了一个jsfiddle。](http://jsfiddle.net/lharby/3SFE2/)

我的问题是这是否更容易在单独的 div 中进行控制（似乎列表更清洁且更易于维护）。或者 jquery 插件会给我更多选择吗？

我担心很好地间隔列表，这在我的 html 中似乎很尴尬，如小提琴所示。

如果有人可以提供帮助或有一些好的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:33:12.077

我没有旋转每个元素，而是旋转了整个列表，这需要添加相当多的冗余 CSS 语法，例如：

```
.elemX { margin-left: Ypx; } 
```

仍然需要一些抛光，但它似乎可以按您的意愿工作：http: [//jsfiddle.net/GHWcZ/](http://jsfiddle.net/GHWcZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:47:16.007

我最终使用了一个不错的 jquery 函数来增量添加左边距：

```
 var $addMargin = 0;
 var $listItems = $('ul.routes li');
     $listItems.each(function(){
         $addMargin += 25;
         $(this).css('margin-left', $addMargin + 'px');
    }); 
```

# html - 无法使用 Orchard CMS 从 CSS 加载图像

> ID：14910549
> 
> 赞同：1
> 
> 时间：2013-02-16T12:57:18.153
> 
> 标签：html, .net, css, orchardcms, orchardcms-1.6

我需要从样式表 ( `site.css`) 加载图像。

背景图片必须在 html,body 标签中：

```
html, body
{
    background-image:url('../Themes/myTheme/Content/Images/test.jpg');
    background-repeat:repeat-y;
    background-position:center center; /*horizontal, vertical*/
} 
```

我尝试了几种变体，但由于某种原因 Orchard 不会加载我的图像？

（已经在 MVC4 项目上使用相同的方法，现在我将布局转换为 Orchard。）

**编辑：** Firebug 给出了以下 CSS 错误：`Failed to load the given URL`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:16:20.337

我已经解决了我的问题，但 Orchard 的内部工作对我来说仍然不清楚......

将我的图像映射从内容移动到样式，然后是以下 css：

```
background-image:url('images/background.jpg'); 
```

任何人都知道为什么 Orchard 不接受 Styles/images 之外的其他位置吗？

谢谢。

# mysql - 多表，一张，共享结构

> ID：14910551
> 
> 赞同：2
> 
> 时间：2013-02-16T12:57:22.770
> 
> 标签：mysql

例如，我有 10 个数据库，它们是相同的。只是数据不同。

当我在一个数据库表中进行一些更新时（例如添加新的列或更改/重命名它），它应该会影响所有数据库中的其他表。

我可以制作一些视图以使其更容易，或者有一种方法可以自动完成吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:03:50.297

您可以创建一个触发器，它观察数据库结构的变化。

见[MySql 触发器](http://dev.mysql.com/doc/refman/5.1/en/create-trigger.html)

# java - 开发 CalDav 服务器

> ID：14910553
> 
> 赞同：18
> 
> 时间：2013-02-16T12:57:33.860
> 
> 标签：java, icalendar, caldav

我的数据库中保存了一组事件（一个非常特殊的数据库，所以我不能使用一些流行的开源服务器，比如 MySQL）。现在我想构建一个 CalDav 服务器（通过 Java），以便用户可以将他的日历客户端连接到它以检索或修改事件。我是新手，所以有很多问题，希望大家帮助我。

1.  一般步骤是什么？

2.  我需要提供一个 servlet 吗？如果是，那么我必须返回什么请求？JSON 或 XML 或 .ics 文件？

3.  当用户订阅我的日历时，这是否意味着他的客户端将在一段时间后拉动我的服务器（调用 servlet）。

**更新：**自从我第一次问起，这是 1 年前的问题，但我得到了相当多的支持，所以我有义务提供一些信息：我最终使用了 Milton 库[http://milton.io/](http://milton.io/)，它抽象出了 servlet ，你只需要编写函数来返回数据。该库的作者非常乐于助人且内容丰富。最终结果：我们的 caldav 服务器已经工作了。

我也接受 Evert 的回答。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-27T01:33:24.077

让我试一试;-)

# 一般步骤是什么？

正如 Evert 所提到的，您需要实现一个 CalDAV 服务器。根据您要支持的功能，这很重要，需要了解相关规范（iCalendar RFC 5545 和 CalDAV 4791、WebDAV RFC 4918）。

实施 CalDAV 服务器的一般步骤是什么？您需要 HTTP 入口点来：

a) 提供帐户信息（在 WebDAV 中称为主体），这包括帐户日历在哪个 URL 下生效

b）提供日历列表（称为日历主页，来自a）的主要信息指向此）

c) 服务于实际的日历，即包含在这些日历中的事件。CalDAV 日历是“iCalendar”资源的特殊 WebDAV 集合。iCalendar 是表示事件的格式。

根据您想要支持的 CalDAV 功能，这可能会更加复杂（例如服务器端调度）。对更快的同步（同步报告）或上传等进行了优化。您不需要所有这些都可以开始。

# 我需要提供一个 servlet 吗？如果是，那么我必须返回什么请求？JSON 或 XML 或 .ics 文件？

正如 Evert 所说，如何实现 HTTP 端点是您的选择。Servlet 是一种可行的选择。主要信息、日历列表和日历中项目的 URL 以 (WebDAV) XML（多状态响应）形式返回。事件的实际内容需要以 iCalendar (.ics) 格式返回。

# 当用户订阅我的日历时，这是否意味着他的客户端将在一段时间后拉动我的服务器（调用 servlet）。

是的。

Some CalDAV implementations also support Push (where the server can tell the client when new data is available), but that's not yet standardized and implementations vary a lot. The polling can be kept fast if your server implements CTags and sync-reports (RFC 6578).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T14:36:41.903

阅读 RFC： [https ://www.rfc-editor.org/rfc/rfc4791](https://www.rfc-editor.org/rfc/rfc4791)

不只是一次，您至少要从上到下阅读 4 次。

不仅如此，您可能还应该阅读有关 WebDAV、WebDAV ACL 和 iCalendar 的 RFC。

您在这里得到的任何答案都将是对其中内容的重复，并且试图简化这一点是徒劳的，因为您确实需要全面了解大部分规范。

具体回答您的问题：

1.  完全是太模糊了，无法回答。一般步骤需要理解规范并编写服务器。鼓励具体。
2.  您需要可以响应 HTTP 请求的东西。无论是 servlet 还是其他东西都不太重要。CalDAV 是 HTTP 的扩展。为元信息返回 XML 报告，iCalendar 是实际日历数据的默认格式。对于许多 http 请求，iCalendar 包装在 xml 正文中。这些天来，服务器也开始支持 xCal 和 jCal。后两者是可选的，你*必须*有 iCalendar 支持。
3.  通常，他们会以客户定义的时间间隔进行轮询。有 pub-sub 机制，但目前它们没有标准，并且有各种实现。讨论已经开始为此提出标准传输，但这可能需要一些时间才能完成。（年）

# html - 禁用具有透明 div 的 div

> ID：14910554
> 
> 赞同：0
> 
> 时间：2013-02-16T12:57:35.453
> 
> 标签：html, disabled-input, css

我正在尝试禁用我的 html 页面的某些部分。我读到您可以在页面顶部使用具有绝对位置的透明 div 来防止单击超出它的元素，但是有没有办法仅在页面的一部分上完成此操作（假设这部分全部包含在div) 不使用绝对位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:04:36.810

放入`position: relative`要禁用的 div，然后将透明阻塞 div 添加为该 div 的子级，并且`position: absolute`, `top`,`bottom`等于0。`left``right`

如果您无法放置`position: relative`要禁用的 div，那么它会有点困难，因为您需要计算它的尺寸和偏移量，然后将透明蒙版定位为 body 的子级，并且与您需要禁用的元素。JS 框架（如 jQuery）通常为您提供确定框[相对于文档的偏移量的](http://api.jquery.com/offset/)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:02:48.223

制作一个 1px x 1px 的小透明图像并将其保存为 .png 文件。在您的 DIV 的 CSS 中，使用此代码

```
background:transparent url('/images/transparent-bg.png') repeat center top; 
```

请记住将文件路径更改为透明图像。

我认为这个解决方案适用于所有浏览器，可能除了 IE 6，但我还没有测试过。

# android - 我的基于位置的应用程序适用于 android 4.2.2 但不适用于 4.0.3 或 4.0.4

> ID：14910555
> 
> 赞同：1
> 
> 时间：2013-02-16T12:57:37.353
> 
> 标签：android

我搜索，搜索和搜索，但找不到解决问题的方法。

我有一个非常简单的位置，它返回该人的当前地址。当您在 4.2.2 设备中打开应用程序时，通知栏上会出现一个 GPS 图标，当您按下我的位置按钮时，地址会返回。

但是在 4.0.3 和 4.0.4 中运行应用程序时，通知栏上不会显示 GPS 图标，并且当单击我的位置时应用程序会关闭。

我是android开发的新手，所以我不知道为什么会这样。

有谁知道如何解决它？

谢谢。

这是我的清单文件的一部分：

```
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATIO" />
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
 <uses-permission android:name="android.permission.INTERNET" />

 <uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" /> 
```

部分代码：

公共类 MainActivity 扩展 Activity 实现 ActivityConstants {

```
private static final long MIN_DIST_CHANGE_FOR_UPDATES = 1; //in meters
private static final long MIN_TIME_BETWEEN_UPDATES = 0; //in milliseconds
protected LocationManager locationManager;
private String provider;
Criteria criteria;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    locationManager=LocationManager)getSystemService(Context.LOCATION_SERVICE);
    criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);

    locationManager.requestLocationUpdates(provider, MIN_TIME_BETWEEN_UPDATES, MIN_DIST_CHANGE_FOR_UPDATES, new MyLocationListener());

}

public void myLocation(View view) {

    Location location =locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

    // If location is not null show a Toast with the location.
    if (location != null) {
        String message = String.format("Current location \n Longitude: %1$s \n Latitude: %2$s", location.getLongitude(), location.getLatitude());
        Toast.makeText(this, message, Toast.LENGTH_LONG).show();
    } else {
        Toast.makeText(this, "Latitude and longitude were not found", Toast.LENGTH_LONG).show();
    }

    if (Geocoder.isPresent()) {

        Geocoder geocoder = new Geocoder(MainActivity.this, Locale.getDefault());
        List<Address> addresses = null;
        double latitude = location.getLatitude();
        double longitude = location.getLongitude();

        try {
            addresses = geocoder.getFromLocation(latitude, longitude, 1);
        } catch (IOException e) {
            e.printStackTrace();
            Toast.makeText(MainActivity.this, e.toString(), Toast.LENGTH_LONG).show();
        }

        if (addresses.size() > 0) {
            String address = "";
            for (int i = 0; i < addresses.get(0).getMaxAddressLineIndex(); i++) {
                address += addresses.get(0).getAddressLine(i) + "\n";

            }

            Toast.makeText(MainActivity.this, "Your current address is: \n" + address, Toast.LENGTH_LONG).show();

        }

    }
} 
```

# vb.net - 列表视图 vb.net

> ID：14910570
> 
> 赞同：0
> 
> 时间：2013-02-16T12:59:10.147
> 
> 标签：vb.net, listview

我的表单中有一个列表视图。每次用户输入项目代码时，它都会在列表视图中列出。我要做的是当用户输入现金时，系统计算出找零后，我想在数据库记录中扣除购买的物品。截至目前，我有这个代码：

```
 Do While tmp <= ListView1.Items.Count

        Do While a <= ds.Tables("ItemInfo").Rows.Count               

            it = ListView1.Items(tmp - 1).SubItems(0).Text
            qt = ListView1.Items(tmp - 1).SubItems(3).Text

            If it = ds.Tables("ItemInfo").Rows(a).Item("ItemCode") Then
                'MsgBox(ds.Tables("ItemInfo").Rows(a).Item("ItemCode"))
                ct = ds.Tables("ItemInfo").Rows(a).Item("Qty")
                nw = Convert.ToInt32(ct) - Convert.ToInt32(qt)
                MsgBox(nw)
                con1.Open()
                mycommand = New SqlCommand("update ItemInfo set Qty='" & nw & "' where ItemCode='" & it & "'", con1)
                mycommand.ExecuteNonQuery()
                con1.Close()

                'Exit Do

                'Else

            End If
            a = a + 1
        Loop

        tmp = tmp + 1

    Loop 
```

但问题是它没有扣除列表视图中的所有项目。它始终是列表视图中的第一行，谁在数据库中被扣除。我不知道问题是在循环还是什么。先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:09:10.030

您可以使用`foreach`读取所有项目`ListView`

```
For Each i As ListViewItem In listView1.Items

Next 
```

# mysql - 未知列错误

> ID：14910571
> 
> 赞同：0
> 
> 时间：2013-02-16T12:59:10.283
> 
> 标签：mysql

我想这是一件非常简单的事情，但我找不到解决方法。这是我的查询；

```
SELECT A.*,MAX(A.id) as X
FROM A
INNER JOIN B ON(B.id=A.id)
WHERE B.y > IF(X < 75, 0, 100) 
```

mysql 出现错误，指出列“X”未知。我不想将 if 子句中的 'X' 替换为`SELECT MAX(A.id) from A`，因为它会大大减慢查询速度，因为我认为它会`SELECT MAX(A.id) from A`查询`B.y`. 如果我并不真正期望这种方法是不可能的，那么我必须调用两个不同的查询，首先获取最大标量值，然后将其放入上面的查询中。我想知道它是否可以在单个查询中解决。

提出了类似的问题，但似乎还没有解决： [https ://stackoverflow.com/questions/9052196/mysql-error-1054-unknown-column-on-clause](https://stackoverflow.com/questions/9052196/mysql-error-1054-unknown-column-on-clause)

它与范围或类似的东西有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:02:26.900

您不能在`WHERE`子句中使用别名。您将需要使用完整的表达式，或者改用 HAVING。我会尝试两者，看看哪一个提供最好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:01:38.113

试试这个：

```
SELECT A.*,MAX(A.id) as X
FROM A
INNER JOIN B ON(B.id=A.id)
HAVING B.y > IF(MAX(A.id) < 75, 0, 100) 
```

@andryi-m 是对的。查询甚至没有编译。

**编辑：**下面是一个非常丑陋的解决方案，但我认为它会起作用。很确定它可以改进：

```
SELECT A.*
FROM A
INNER JOIN B ON(B.id=A.id)
WHERE B.y > IF((SELECT MAX(A.id) FROM A INNER JOIN B ON (B.id=A.id)) < 75, 0, 100) 
```

我正在重复`WHERE`子句中的第一个查询，以便`id`仅在表`A`和`B`.

# objective-c - 使用 ios 解析 JSON

> ID：14910575
> 
> 赞同：-1
> 
> 时间：2013-02-16T12:59:55.920
> 
> 标签：objective-c, json, ios5

我使用以下代码

```
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:response 
                                                     options:NSJSONReadingAllowFragments                                                           
                                                       error:&err]; 
```

首先我想添加 2 个选项`NSJSONReadingAllowFragments`，并且`NSJSONReadingMutableContainers`

如果我只`NSJSONReadingMutableContainers`使用代码会崩溃

现在如果响应只是字符串 true 或 false ，例如如何将 NSArray 的值与字符串“false”进行比较

我不能说例如`[jsonArray objectatindex:0]`

任何想法如何使我的代码足够智能，如果只有响应是对象数组或只有字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:18:40.333

在处理响应检查类类型之前。

```
id jsonObject = [NSJSONSerialization JSONObjectWithData:response 
                                                 options:NSJSONReadingAllowFragments                                                           
                                                   error:&err];

if ([jsonObject isKindOfClass:[NSArray class]]) {
    // Do stuff for array.
}
else if ([jsonObject isKindOfClass:[NSDictionary class]]) {
   // Do stuff for dictionary
}

else if ([jsonObject isKindOfClass:[NSString class]]) {
   // Do stuff for string
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:42:37.877

返回的 JSON 是一个片段，`NSString`它对`count`字符串无效。更改返回类型：

```
NSString *jsonString = [NSJSONSerialization JSONObjectWithData:response 
                                                     options:NSJSONReadingAllowFragments                                                           
                                                       error:&err];

NSLog(@"jsonArray: %@, length: %d", jsonString, jsonString.length); 
```

然后对字符串做任何你想做的事情。

通常 JSON 是一个数组或字典，在这种情况下它是一个字符串，可能 JSON 格式不正确。

# arm - 运行长度编码 - SIMD

> ID：14910576
> 
> 赞同：3
> 
> 时间：2013-02-16T13:00:03.713
> 
> 标签：arm, jpeg, simd, neon, run-length-encoding

我正在尝试优化运行长度编码。我正在考虑在 SIMD 中实现它。我花了几个小时在算法上工作，但没有太多进展。值得试一试吗？我正在研究霓虹灯。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T12:50:10.977

我假设您的问题与 JPEG 中 AC 块系数编码中的 RLE 有关。

JPEG 中使用的 RLE 的变体非常具体。每个 8x8 像素块都用 DCT 进行转换和量化。然后将 DCT 输出（64 个系数）分离为第一个 DC 系数和 63 个 AC 系数。使用 Zig-Zag 模式将 8x8 块 AC 系数转换为线性阵列，然后进行 RLE 编码

![来自 wikimedia 的 ZigZag（文件：JPEG_ZigZag.svg，作者 Alex Khristov，PD）](../Images/d3492b50b7fc5a034c304633f53027c6.png)

ZigZag 通常与 RLE 运行结合使用，因此我们有具有非线性内存访问的 RLE，并且应该优化这两个功能。

警告！JPEG 中的 RLE 仅用于零元素！请查看[ISO/IEC 10918-1 : 1993](http://www.w3.org/Graphics/JPEG/itu-t81.pdf)标准的F.1.2.2.1、 [F.1.2.2.3](http://www.digicamsoft.com/itu/itu-t81-95.html)和[图 F.2 。](http://www.digicamsoft.com/itu/itu-t81-96.html)

*一些实现：*

有[libjpeg-tubro](https://launchpad.net/libjpeg-turbo)（主页是[libjpeg-turbo.org](http://www.libjpeg-turbo.org/)），其中一些分支由 Linaro 在 2010-2011 年针对 ARM进行了[优化。](http://www.cnx-software.com/2011/09/13/faster-jpeg-decoding-on-arm-with-libjpeg-turbo/)

此分叉中有[优化列表：](http://bazaar.launchpad.net/~tom-gall/linaro/libjpeg-turbo/changes)

> *   10 - 'forward_DCT' 中量化代码的 ARM NEON 优化（整数除法替换为浮点乘法。......这个优化的函数现在几乎比原始 C 变体快 3 倍 - jcdctmgr.c - Siarhei Siamashka 2010-11-10
> *   9 - **'encode_one_block' 的**ARM 程序集优化（'encode_one_block' 的 ARM 程序集优化。几乎比原始 C 变体快 2 倍。） - jchuff.c - Siarhei Siamashka 2010-11-10
> *   8 - 'rgb_ycc_convert' 的 ARM NEON 优化版本 - Siarhei Siamashka 2010-11-10
> *   7 - 'ycc_rgb_convert' 的 ARM NEON 优化版本 - Siarhei Siamashka 2010-11-10
> *   6 - “convsamp”的小 ARM NEON 优化 - Siarhei Siamashka 2010-11-10
> *   5 - 'jpeg_fdct_ifast' 的 ARM NEON 优化版本 - Siarhei Siamashka 2010-11-10
> *   4 - 'jpeg_idct_ifast' 的 ARM NEON 优化版本 - Siarhei Siamashka 2010-11-10
> *   3 - 'jpeg_idct_4x4' 的 ARM NEON 优化版本 - Siarhei Siamashka 2010-11-10

[**修订版 9**](http://bazaar.launchpad.net/~tom-gall/linaro/libjpeg-turbo/revision/9)是`jchuff.c`文件的 ARM 优化，用于函数`encode_one_block`，它对块的 AC 和 DC 分量进行编码；但它是在不使用 NEON 的情况下完成的

```
/* Encode a single block's worth of coefficients */
LOCAL(boolean)   encode_one_block 
```

事实上，RLE 并没有优化；但是 ZigZag 和最后一个零系数检测是在 ARM 程序集中的 `find_last_nonzero_index`辅助函数中实现的。（它是使用[ruby​​ generator 生成](http://bazaar.launchpad.net/~tom-gall/linaro/libjpeg-turbo/view/9/jchuff.c#L515)的）或[在 linaro git 中](http://git.linaro.org/gitweb?p=people/tomgall/libjpeg-turbo/libjpeg-turbo.git;a=blob;f=jchuff.c;h=fd4fa46ca5311f23f3c9ae991eb38abf13f83d4d;hb=HEAD)生成。它计划用于双发 Cortex-A8：

```
* Find last nonzero coefficient and produce output in natural order,
* instructions are scheduled to make use of ARM Cortex-A8 dual-issue
* capability 
```

这是函数对应的C代码：

```
LOCAL(int)
find_last_nonzero_index (JCOEFPTR block, JCOEFPTR out)
{
  int tmp, i, n = 0;
  for (i = 1; i < DCTSIZE2; i++) {
    if ((tmp = block[jpeg_natural_order[i]]) != 0)
      n = i;
    out[i] = tmp;
}
return n; 
```

这里有 RLE 本身的 ARM 或 NEON 优化，但我认为这个 asm 代码有助于 RLE，将其转换为线性内存访问版本（`encode_one_block`, under `ifdef __arm__`）：

```
 for (k = 2; k <= last_nonzero_index; k += 2) {
      innerloop(k);
  } 
```

`r``innerloop`宏中使用的是 RLE 计数器。

这种带有手动编码之字折线（用于 Cortex-A8）的线性 RLE 应该比原始 C 版本更快，即使对于 Cortex-A9 也是如此。感谢 Siarhei Siamashka！

PS：当前版本的 libjpeg-turbo 在这个 RLE 中没有 arm 优化：[`encode_one_block`jchuff.c 的第 454 行，rev929](http://sourceforge.net/p/libjpeg-turbo/code/929/tree/trunk/jchuff.c) - innerloop 被稍微改写为`kloop`，但 RLE 仍然以非线性方式完成；之字形不与它分开。

*关于NEON的一些想法*

NEON 有一组 32 个寄存器，每个 64 位宽（D0..D31；根据 Anderson @ ELC 2011，[第 5 页](http://elinux.org/images/4/40/Elc2011_anderson_arm.pdf)），理论上，可用于存储 64 个 16 位系数并实现 ZigZag+RLE。仍在寻找实现...

MPEG 标准中有类似的 zig-zag + RLE，在 x86 和 arm 上也有一些 SIMD 实现的努力。[x264dev](http://x264dev.multimedia.cx/archives/232)中有一篇博文；8x8 zigzag [x264_zigzag_scan_8x8_frame](http://git.videolan.org/?p=x264.git;a=blob;f=common/x86/dct-a.asm;h=c56bcdc3c73ba8f993e7e852af4b1d7de0e9bf52;hb=528c100957ae929ae466ec54309cbb1e6193f66e#l583)是为带有 SSSE3 的 x86 实现的。但是对于 ARM，x264 中只有[4x4 NEON zigzag](http://git.videolan.org/?p=x264.git;a=blob;f=common/arm/dct-a.S;hb=HEAD#l664)。

PS：仅适用于我和任何不了解 Jpeg 内部结构的人。[Cardiff CM0340 讲座幻灯片](http://www.cs.cf.ac.uk/Dave/MM/BSC_MM_CALLER/PDF/10_CM0340_JPEG.pdf)中对 JPEG 编码进行了简短易懂的介绍。

PPS（2013 年 2 月 18 日 13:30 更新）：为了优化 RLE 编码，我们可以进行预扫描，在 AC 系数中间搜索零，然后使用这些预先计算的数据。我们甚至可以将它保存为半字节或一些 NEON regs 中的位

2 月 18 日更新：补丁作者说提交 9 的评论不准确。将此代码与 jpeg6b（而不是 libjpeg-turbo）进行比较时，改进了 2 倍。他说 unroll by 63（如在 libjpeg-tubro 中）与这个 asm 解决方案的速度几乎相同（在某些测试中，它在其他测试中稍好一些）。

# android - 布局之间的 3D 动画，如果冻豆中的锁屏

> ID：14910578
> 
> 赞同：3
> 
> 时间：2013-02-16T13:00:25.337
> 
> 标签：android, animation, layout, view, 3d

所以基本上我正在尝试复制这一点。它将像视图翻转器一样使用。我在 android 中做这类事情还没有太多经验，所以任何帮助都将不胜感激！ ![在此处输入图像描述](../Images/15ad42ff28fe1c4eeb384901694fb178.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:28:38.403

我不太确定，你要实现什么，但我会从这样的讲座开始：[Android 翻转 3D 动画](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)。在此类动画中间替换视图非常容易。如果 ViewFlipper 不够用，您可以考虑编写自己的容器。如果视图过于复杂，Android 无法处理，或者您的动画旨在比简单的翻转/缩放/移动更有趣，那么您可以考虑使用 OpenGL 和着色器。只需将您的视图绘制为位图，将其传递给 OpenGL，然后对它们做任何您想做的事情。

# php - IF.. OR PHP 语句的小问题

> ID：14910581
> 
> 赞同：0
> 
> 时间：2013-02-16T13:00:55.290
> 
> 标签：php

我试图在注册表单上验证电子邮件两次，为了做到这一点，我试图首先通过运行“空”功能或两个字段来检查实际的电子邮件字段是否为空 - 但对于某些因为它不会接受它，它抱怨意外的'（'

这是行：

```
if (empty(($_POST['e-mail']) OR ($_POST['e-mail2']))) {
    $error[] = 'Please Enter your Email ';
} 
```

任何人都知道我为什么会得到它以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:02:22.907

尝试：

```
if (empty($_POST['e-mail']) || empty($_POST['e-mail2'])) {
    $error[] = 'Please Enter your Email ';
} 
```

您可能还希望包含该[`isset()`](http://php.net/manual/en/function.isset.php)函数以确保在检查值之前实际设置了 POST 键。

* * *

**编辑**

为清楚起见，我将在此处发布编辑。如果要验证值的存在以及输入的一个值是否等于另一个值，则需要进行两次完整性检查：

```
// Check existence of values
if (empty($_POST['e-mail']) || empty($_POST['e-mail2'])) {
    $error[] = 'Please Enter your Email ';
}

// Check equivalence
if ($_POST['e-mail'] != $_POST['e-mail2']) {
    $error[] = 'Your e-mails do not match';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:09:32.573

您将逻辑表达式传递给 empty()，这显然是错误的
，您需要分别检查这两个变量

```
if (empty($_POST['e-mail']) OR empty($_POST['e-mail2'])) {
    $error[] = 'Please Enter your Email ';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T13:09:39.487

你的意思是：

```
if (empty($_POST['e-mail']) OR empty($_POST['e-mail2'])) 
```

PHP 无法猜测，它只是像这样评估您的表达式：

```
if (empty(($_POST['e-mail']) OR ($_POST['e-mail2'])))
if (empty('value_of_email1'  OR 'value_of_email1'  ))
if (empty(                  true                   ))
if (                        false                   ) 
```

如果提交的值**之一**是*真实*的（即非空），则 OR 表达式的计算结果仍为`true`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T13:11:24.553

我认为您不能在`empty()`方法中使用逻辑表达式。尝试将逻辑表达式分离为两个单独的`empty()`方法调用。

尝试：

```
if (empty($_POST['e-mail']) OR empty($_POST['e-mail2'])) {
    $error[] = 'Please Enter your Email ';
} 
```

有关 的更多信息`empty()`，请查看[有关 empty() 的 PHP 手册](http://php.net/manual/en/function.empty.php)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T13:43:38.797

为后人...

```
$email1 = filter_var('aaa@email.com', FILTER_VALIDATE_EMAIL);
$email2 = filter_var('aaa@email.com', FILTER_VALIDATE_EMAIL);
$unmatched1 = filter_var('aaa@emil.com', FILTER_VALIDATE_EMAIL);
$unmatched2 = filter_var('aab@email.com', FILTER_VALIDATE_EMAIL);
$invalid1 = filter_var('aaa.com', FILTER_VALIDATE_EMAIL);
$invalid2 = filter_var('email.com', FILTER_VALIDATE_EMAIL);
$empty = filter_var('', FILTER_VALIDATE_EMAIL);

var_dump(!$email1 || $email1 !== $email2);
var_dump(!$email1 || $email1 !== $unmatched2);
var_dump(!$unmatched1 || $unmatched1 !== $email2);
var_dump(!$email1 || $email1 !== $invalid2);
var_dump(!$invalid1 || $invalid1 !== $email2);
var_dump(!$email1 || $email1 !== $empty);
var_dump(!$empty || $empty !== $email2); 
```

给出：

```
bool(false) // Desired in validation...
bool(true)
bool(true)
bool(true)
bool(true)
bool(true)
bool(true) 
```

[https://ignite.io/code/511f8bf8ec221e7f21000000](https://ignite.io/code/511f8bf8ec221e7f21000000)

因此，如果您替换`var_dump`为`if`并简化`e-mail2`（无需验证）：

```
$email = filter_var($_POST['e-mail'], FILTER_VALIDATE_EMAIL);

if (!$email || $email !== $_POST['e-mail2']) {
    // error stuff, including separate check on empty.
} 
```

# c# - 从 Nullable 类型的反射中获取 PropertyType.Name

> ID：14910584
> 
> 赞同：16
> 
> 时间：2013-02-16T13:01:13.340
> 
> 标签：c#, reflection, nullable

我想使用反射来获取属性类型。这是我的代码

```
var properties = type.GetProperties();
foreach (var propertyInfo in properties)
{
     model.ModelProperties.Add(
                               new KeyValuePair<Type, string>
                                               (propertyInfo.PropertyType.Name,
                                                propertyInfo.Name)
                              );
} 
```

这段代码没问题`propertyInfo.PropertyType.Name`，但如果我的属性类型是`Nullable`我得到这个`Nullable'1`字符串，如果写`FullName`如果得到这个搅拌`System.Nullable1[[System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-16T13:18:35.707

更改您的代码以查找可为空的类型，在这种情况下，将 PropertyType 作为第一个泛型参数：

```
var propertyType = propertyInfo.PropertyType;

if (propertyType.IsGenericType &&
        propertyType.GetGenericTypeDefinition() == typeof(Nullable<>))
    {
      propertyType = propertyType.GetGenericArguments()[0];
    }

model.ModelProperties.Add(new KeyValuePair<Type, string>
                        (propertyType.Name,propertyInfo.Name)); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-19T05:52:55.057

这是一个老问题，但我也遇到了这个问题。我喜欢@Igoy 的答案，但如果类型是可空类型的数组，它就不起作用。这是我处理可为空/泛型和数组的任何组合的扩展方法。希望它对有同样问题的人有用。

```
public static string GetDisplayName(this Type t)
{
    if(t.IsGenericType && t.GetGenericTypeDefinition() == typeof(Nullable<>))
        return string.Format("{0}?", GetDisplayName(t.GetGenericArguments()[0]));
    if(t.IsGenericType)
        return string.Format("{0}<{1}>",
                             t.Name.Remove(t.Name.IndexOf('`')), 
                             string.Join(",",t.GetGenericArguments().Select(at => at.GetDisplayName())));
    if(t.IsArray)
        return string.Format("{0}[{1}]", 
                             GetDisplayName(t.GetElementType()),
                             new string(',', t.GetArrayRank()-1));
    return t.Name;
} 
```

这将处理像这样复杂的情况：

```
typeof(Dictionary<int[,,],bool?[][]>).GetDisplayName() 
```

回报：

```
Dictionary<Int32[,,],Boolean?[][]> 
```

# php - Javascript div 距离：显示广告

> ID：14910585
> 
> 赞同：0
> 
> 时间：2013-02-16T13:01:22.187
> 
> 标签：php, javascript, wordpress, html, distance

对于我的 wordpress 网站，我想计算右栏的起始 div 和结束 div 之间的距离（帖子/页面，我可以在页面中添加一个新的 div）。然后，我想计算左列（widgetcolumn）的开始和结束 div 之间的距离。右侧距离 - 左侧距离 = 左侧位置（以像素为单位）。

然后我用 PHP 检查：如果 Place left > X -> Show ad。

有人可以帮我用javascript吗？我在谷歌上找不到任何关于它的东西（我猜是错误的关键字）。我可以自己编写php。

顺便说一句，对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:15:32.150

您可以使用`offset`jQuery 中的方法（确保包含 jquery 库）

例如

```
var y_top = left_top_div.offset().y;
var y_bottom = left_bottom_div.offset().y;
var distance_right = y_bottom - y_top; 
```

您可以通过提供这些 div 的 ID 或者如果它们是动态的（并且您无法识别它们）来选择 left_top_div，那么您可以执行以下操作

```
var left_top_div = left_container.find('div:first-child');
var left_bottom_div = left_container.find('div:last-child'); 
```

left_container 将是您的右列 HTML 元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:26:06.230

如果你不使用 jQuery，你可以使用`element.offsetWidth`并`window.innerWidth`基于这些计算。

```
var rightColumn, widgetColumn, totalWidth;

totalWidth = window.innerWidth;
rightColumn = document.getElementById('rightColumn').offsetWidth;
widgetColumn = document.getElementById('widgetColumn').offsetWidth; 
```

然后做数学

# asp.net - asp .net 上的 SMTP 电子邮件

> ID：14910588
> 
> 赞同：0
> 
> 时间：2013-02-16T13:01:37.747
> 
> 标签：asp.net, smtp

我有下面的代码，它无法向任何电子邮件地址发送电子邮件，它总是返回错误的结果，此代码之前有效，当我们更改网络服务器时停止工作，我需要安装任何额外的软件吗？

```
public  bool sendEmail(string to,string from,string message,string subject,string reply_to,string cc)
    {
        MailMessage msgMail = new MailMessage();
        SmtpClient smtpClient = new SmtpClient();
        MailAddress mAdd = new MailAddress(from);
        MailAddress mAddTo = new MailAddress(to);
        System.Net.NetworkCredential nc = new System.Net.NetworkCredential();
        nc.UserName = System.Configuration.ConfigurationManager.AppSettings["MailServerID"].ToString(); 
        nc.Password = System.Configuration.ConfigurationManager.AppSettings["MailServerPASS"].ToString();       
      if (reply_to != "")
        {
            MailAddress mAddRTo = new MailAddress(reply_to);
            msgMail.ReplyTo = mAddRTo;
        }
      if(cc!="")
          msgMail.CC.Add(cc);

         // msgMail.Headers.Add("Date ", DateTime.Now.ToString());
        msgMail.To.Add(mAddTo);
        msgMail.From = mAdd;
        msgMail.Subject = subject;

        msgMail.IsBodyHtml = true;
        msgMail.Body =message;

        smtpClient.Host = System.Configuration.ConfigurationManager.AppSettings["MailServer"].ToString();
        smtpClient.Credentials = nc;
        try
        {
            smtpClient.Send(msgMail);
            return true;
        }
        catch (Exception e)
        {
            return false;
        }
    } 
```

我的 web.config smtp 配置；

```
<appSettings>
    <add key="MailServer" value="smtp.gmail.com"/>
    <add key="MailServerID" value="abcd@gmail.com"/>
    <add key="MailServerPASS" value="XXXXXXX"/>
</appSettings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:14:35.993

我看到你正在使用 gmail 的 smtp 服务。
此服务需要身份验证、启用 SSL 和特定端口。
添加这些行

```
 smtpClient.EnableSsl = true;
 smtpClient.Port = 587; 
```

但是，我对您的句子感到有些困惑。

> 当我们更改网络服务器时停止工作

你的代码不应该工作

# java - Java中的多维数组使用

> ID：14910596
> 
> 赞同：0
> 
> 时间：2013-02-16T13:02:43.480
> 
> 标签：java, multidimensional-array

谁能解释一下下面代码中的以下语句是什么意思..??

`for (j = 0; j < arrayOfInts[i].length; j++)`

我正在学习 Java 语言并且很难弄清楚..

```
class BreakWithLabelDemo {
        public static void main(String[] args) {

            int[][] arrayOfInts = { 
                { 32, 87, 3, 589 },
                { 12, 1076, 2000, 8 },
                { 622, 127, 77, 955 }
            };
            int searchfor = 12;

            int i;
            int j = 0;
            boolean foundIt = false;

        search:
            for (i = 0; i < arrayOfInts.length; i++) {
                for (j = 0; j < arrayOfInts[i].length;
                     j++) {
                    if (arrayOfInts[i][j] == searchfor) {
                        foundIt = true;
                        break search;
                    }
                }
            }

            if (foundIt) {
                System.out.println("Found " + searchfor + " at " + i + ", " + j);
            } else {
                System.out.println(searchfor + " not in the array");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:06:17.593

Java 并没有真正的多维数组，它有可以包含其他数组的数组。该代码`i`从误导性名称中获取第 th 项`arrayOfInts`。这个项目本身就是一个整数数组，所以它取`length`这个数组的。（存储在另一个数组中。）因此，例如在此代码中：

```
int[][] array2d = new int[][] {
    new int[] {1},      // stored at array2d[0]
    new int[] {2, 3, 4} // stored at array2d[1]
} 
```

以下情况属实：

*   `array2d.length == 2`（“多维”数组包含另外两个数组。）
*   `array2d[0].length == 1`（其中第一个有一个元素：`1`。）
*   `array2d[1].length == 3`（第二个有三个元素：`2`, `3`, `4`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:06:09.857

Java 中没有多维数组。所有的都是数组的数组。

`arrayOfInts`就是这样一个整数数组。`arrayOfInts[i]`整数数组也是如此，并且

```
for (j = 0; j < arrayOfInts[i].length; j++) 
```

迭代这个数组的每个元素，即它迭代存储在整数数组的索引处的整数数组中的所有元素`i`。

你可以把它看成一个包含 N 个小盒子的大盒子，每个小盒子包含给定数量的整数。`arrayOfInt`是大盒子。`arrayOfInt[i]`是`i`大盒子中的第一个小盒子。并且循环遍历这个较小盒子中的每个整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T13:05:08.943

在Java中二维数组的实现是一维数组的一维数组。

```
for (j = 0; j < arrayOfInts[i].length; j++) 
```

`arrayOfInts[i].length`表示 arrayOfInts 的第 i 行的长度。

```
int[][] a = new int[2][4]; 
```

这个二维数组将有两行和四列。这实际上分配了 3 个对象：一个由 2 个元素组成的一维数组来保存每个实际的行数组，以及两个由 4 个元素组成的一维数组来表示行的内容。

```
 +-----+    +-----+-----+-----+-----+
 |a[0] | -> | [0] | [1] | [2] | [3] |
 |     |    +-----+-----+-----+-----+    In Java two-dimensional arrays are implemented is a  
                                        one-dimensional array of one-dimensional arrays -- like this.
 +-----+
 |     |    +-----+-----+-----+-----+
 |a[1] | -> | [0] | [1] | [2] | [3] |
 +-----+    +-----+-----+-----+-----+ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T13:07:27.473

> > j = 0; j < arrayOfInts[i].length

因为你的数组是二维的，数组的内部元素将是数组。

所以你得到元素（这是数组）arrayOfInts[i] 并计算长度 arrayOfInts[i].length，换句话说：

> > int[] 元素 = arrayOfInts[i]; 整数长度 = arrayOfInts[i].length;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T13:09:03.133

将 arrayOfInts[i][j] 视为二维网格，就像电子表格一样。为了帮助可视化，假设 [j] 表示列索引，[i] 表示行索引。

那么解释是：

```
// iterate through every column j in the current row i:
for (j = 0; j < arrayOfInts[i].length; j++) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-16T13:16:04.447

在您的代码中，请参见`int [][]arrayOfInts=...`
It is a 2-dimensional array。
二维数组只不过是`arrays of arrays`
它意味着将有许多正常的一维数组，另一个数组具有每个一维数组的引用。
所以，线的解释，`for(j=0;j<arrayOfInts[i].length;j++)`如下：
首先，让我们把重点放在`arrayOfInts[i].length`
我已经告诉你的单词`arrayOfInts`是数组数组。因此，`arrayOfInts[i]`指向`i`第 th 数组。单词，返回第th数组`arrayOfInts[i].length`中的长度（即数组中的元素数）。 循环继续发生，直到小于 1d 数组中的元素数（小于（不要使用等于），因为 arrayOfInts[i][0] 将是第一个元素）。`i``arrayOfInts`
`j`

# php - ArrayIterator 和 ArrayObject 的 flags 参数有什么作用？

> ID：14910599
> 
> 赞同：2
> 
> 时间：2013-02-16T13:03:00.207
> 
> 标签：php, spl, arrayobject, arrayiterator

PHP 的构造函数`ArrayIterator`有`ArrayObject`一个`flags`参数，记录[`ArrayObject::setFlags()`](http://php.net/arrayobject.setflags)如下：

> **`ArrayObject::STD_PROP_LIST`**
> 
> 当作为列表（var_dump、foreach 等）访问时，对象的属性具有它们的正常功能。
> 
> **`ArrayObject::ARRAY_AS_PROPS`**
> 
> 条目可以作为属性访问（读取和写入）。

ArrayIterator::setFlags() 的文档是相似[的（区别在于差异错误](http://grokbase.com/t/php/php-notes/122ve776vq/note-107695-added-to-arrayiterator-setflags)）。

现在，我很好地理解了第二个标志，它允许通过以下方式访问属性`->`以及通过以下方式访问数组`[]`：

```
$a = new ArrayIterator(array('foo'=>1), ArrayObject::ARRAY_AS_PROPS);
var_dump($a['foo']);
var_dump($a->foo); 
```

```
int(1)
int(1) 
```

但我无法绕开我的头`ArrayObject::STD_PROP_LIST`。据我测试，无论有没有这个标志，它`var_dump`的`foreach`行为都完全相同。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:12:22.897

如 PHP 手册中[的注释](http://www.php.net/manual/en/class.arrayobject.php#105481)所述，该标志会导致属性，而不是数组值在`var_dump`.

这要归功于PHP 手册中[的评论者：](http://www.php.net/manual/en/class.arrayobject.php#105481)

```
<?php                                                    

$a = new ArrayObject(array(), ArrayObject::STD_PROP_LIST);
    $a['arr'] = 'array data';                            
    $a->prop = 'prop data';                              
$b = new ArrayObject();                                  
    $b['arr'] = 'array data';                            
    $b->prop = 'prop data';                              

// ArrayObject Object                                    
// (                                                     
//      [prop] => prop data                              
// )                                                     
print_r($a);                                             

// ArrayObject Object                                    
// (                                                     
//      [arr] => array data                              
// )                                                     
print_r($b);                                             

?> 
```

这种行为可能会在 PHP 的任何版本中发生变化，因为我的 PHP 版本（5.4.6）总是同时显示： 属性和数组值：

```
ArrayObject Object
(
    [prop] => prop data
    [storage:ArrayObject:private] => Array
        (
            [arr] => array data
        )

)
ArrayObject Object
(
    [prop] => prop data
    [storage:ArrayObject:private] => Array
        (
            [arr] => array data
        )

) 
```

# android - 如何使用警报对话框

> ID：14910602
> 
> 赞同：0
> 
> 时间：2013-02-16T13:03:34.247
> 
> 标签：android, dialog, onclick, android-alertdialog, onclicklistener

```
package com.progme.wallkon;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;

public class NextActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.next);

    ImageView im1;
    im1 = (ImageView)findViewById(R.id.a_01_b);
    im1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    });

    ImageView im2;
    im2 = (ImageView)findViewById(R.id.a_02_b);
    im2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    });

    ImageView im3;
    im3 = (ImageView)findViewById(R.id.a_03_b);
    im3.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            showDialog(1);
        }
    });
}
            @Override
            protected Dialog onCreateDialog(int id) {

                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setTitle("Gmelon");
                builder.setMessage("setting?");
                builder.setPositiveButton("YES",
                        new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        Log.i("MyTag" , "Click YES");
                    }
                });

                builder.setNegativeButton("NO",
                        new android.content.DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        Log.i("MyTag", "Click NO");
                    }
                });
                return builder.create();
            }
} 
```

我像这样在activity.java中编写了代码..

我想在 im1、im2、im3 中使用对话框，并且每个都必须获得另一个事件。那么，我要写3个对话框吗？以及如何在此处设置 [//TODO Auto...] 我使用的就像.. im1 的第一个对话框，im2 的第二个对话框，im3 的第三个对话框..

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:08:38.370

您可以为警报对话框编写一个私有变量并重用它，但不能同时使用

```
private AlertDialog mDialog = new AlertDialog.Builder(this)
            .setTitle("Gmelon")
            .setMessage("setting?")
            .setPositiveButton("YES",
                    new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    Log.i("MyTag" , "Click YES");
                }
            })

            .setNegativeButton("NO",
                    new android.content.DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    Log.i("MyTag", "Click NO");
                }
            }).create(); 
```

现在您可以在代码中的任何位置显示对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:13:11.363

除非这个问题还有更多，否则您似乎可以对我使用 showDialog(x) 。

# unix - Unix父子进程关系

> ID：14910604
> 
> 赞同：-1
> 
> 时间：2013-02-16T13:03:38.667
> 
> 标签：unix, operating-system

我非常了解unix进程创建中的父子关系。但我不明白它背后的基本原理:(为什么我们需要从当前进程中分叉来创建一个新进程，然后用新代码覆盖它的图像（如果有的话）？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:09:29.967

基本原理是 unix[系统调用](http://en.wikipedia.org/wiki/Syscall)（至少最初是这样）是内核完成的“基本”操作。

[在实践中，应用程序经常在fork(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)和[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)之间做一些特定的事情，特别是对[close(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/close.2.html)和[dup2(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/dup2.2.html)的调用，还有[sigaction(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/sigaction.2.html)来忽略一些信号（可能有一些[pipe(2 )](http://www.kernel.org/doc/man-pages/online/pages/man2/pipe.2.html)系统调用在`fork`) 之前完成。

如果您希望一次使用一个系统调用来处理所有这些，那将非常复杂，而且不太灵活。

除了[intro(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/intro.2.html)之外，我建议阅读一些书籍，如[Advanced Linux Programming](http://advancedlinuxprogramming.com)（它是免费且在线的）或[Advanced Unix Programming](http://basepath.com/aup/)。

相反，我发现将创建进程和执行程序分开的意图很自然。我真的不明白你为什么要合并这两个操作。

另请参阅有关系统调用的[这个](https://stackoverflow.com/a/11609768/841108)我的答案。

# css - 使用 CSS 覆盖 element.style

> ID：14910608
> 
> 赞同：90
> 
> 时间：2013-02-16T13:03:51.760
> 
> 标签：css

我有一个来自页面构建器的 HTML 页面，它`style`直接将属性注入到元素中。我发现它被认为是`element.style`.

我想使用 CSS 覆盖它。我可以匹配元素，但它不会覆盖它。

![截屏](../Images/05fbec6bfaa0a8c4f618102d6e38df82.png)

如何使用 CSS 覆盖样式？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-02-16T13:07:17.783

虽然它经常不受欢迎，但您可以在技术上使用：

```
display: inline !important; 
```

这通常不是好的做法，但在某些情况下可能是必要的。你应该做的是编辑你的代码，这样你就不会`<li>`首先对元素应用样式。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-04-16T06:50:21.510

这个 CSS 甚至会覆盖 JavaScript：

```
#demofour li[style] {
    display: inline !important;
} 
```

或仅用于第一个

```
#demofour li[style]:first-child {
    display: inline !important;
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-16T13:07:33.980

`element.style`来自标记。

```
<li style="display: none;"> 
```

只需`style`从 HTML 中删除该属性。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-04-08T17:40:07.930

当然 !important 技巧在这里是决定性的，但更具体的定位可能不仅有助于实际应用您的覆盖（权重标准可以统治 !important），而且还可以避免覆盖意外的元素。

使用浏览器的开发工具，确定违规样式属性的确切值；例如：

```
"font-family: arial, helvetica, sans-serif;" 
```

或者

```
"display: block;" 
```

然后，决定您将覆盖哪个选择器分支；您可以根据自己的需要扩大或缩小选择范围，例如：

```
p span 
```

或者

```
section.article-into.clearfix p span 
```

最后，在您的 custom.css 中，使用 [attribute^=value] 选择器和 !important 声明：

```
p span[style^="font-family: arial"] {
  font-family: "Times New Roman", Times, serif !important;
} 
```

请注意，您不必引用整个样式属性值，只要足以明确匹配字符串即可。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-08-13T06:27:26.360

使用 !important 将通过 CSS 覆盖 element.style，例如 Change

```
color: #7D7D7D; 
```

至

```
color: #7D7D7D !important; 
```

那应该这样做。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-07T19:38:49.040

您可以通过引用元素样式的违规属性来覆盖 CSS 上的样式。在我的情况下，这两个代码设置为 15px 并导致我的背景图像变黑。所以，我用 0px 覆盖它们并放置 !important 所以它是优先的

```
.content {
    border-bottom-left-radius: 0px !important;
     border-bottom-right-radius: 0px !important;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-16T13:31:46.907

使用 JavaScript。

例如：

```
var elements = document.getElementById("demoFour").getElementsByTagName("li");
for (var i = 0; i < elements.length; i++) {
    elements[i].style.display = "inline";
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-16T13:10:00.000

据我所知，内联样式是第一位的，所以 css 类不应该工作。

使用 Jquery 作为

```
$(document).ready(function(){
   $("#demoFour li").css("display","inline");
}); 
```

你也可以试试

```
#demoFour li { display:inline !important;} 
```

# c++ - 如何 memcpy() 一个常量

> ID：14910615
> 
> 赞同：1
> 
> 时间：2013-02-16T13:06:06.240
> 
> 标签：c++, visual-c++

我如何在 c++ 中 memcpy() 一个常量，例如我已经使用定义了一个常量

```
#define constant1 0x0080 
```

当我想

```
memcpy(&some_memory_block, constatnt1, 2 ); 
```

它说

```
error C2664: 'memcpy' : cannot convert parameter 2 from 'int' to 'const void *' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T13:09:48.203

您可以尝试使用常量，而不是预编译器定义。

```
const unsigned short int constant1 = 0x0080;
memcpy(&some_memory_block, &constant1, 2 ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T13:26:38.830

你的常量（宏）实际上只是一个字面量。因此，它没有地址可以作为参数`memcpy`或另一个需要内存位置的函数给出。如果您想这样做，您需要有一个*实常数*（例如`const int`），如其他答案中所建议的那样。
与宏相反的实常数（在这种情况下只是文本替换，在这种情况下用于文字）通常在功能上与文字相同，只要您不获取它的地址。但是，可以获取它的地址，此时它的行为就像一个“正常”变量。这意味着您*可以*`memcpy`在其地址上使用。

然而，通常“更正确”的答案是：根本不要做这种事情。如果某些东西是常数，则不应复制它（当然存在例外，但通常您不应该这样做）。唯一有效的原因是您想要一个常量值来初始化一个非常量变量，但是分配它比分配它要容易得多`memcpy`。

否则复制一个常量只会增加冗余，消耗额外的内存而无益，增加缓存压力，并破坏许多编译器优化。例如，如果编译器知道符号是常量，则编译器可以对表达式进行简单的优化（当然，也会评估更复杂且不太明显的表达式）`a = b + c - c + b`。`a = computed_value_of_2b`但是，当给定一些内存位置时，编译器必须发出在运行时评估的代码，它别无选择。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-16T13:11:15.383

在您的情况下发生的情况是，当您编译代码时，constant1 被替换为 0x0080。而这条线

```
memcpy(&some_memory_block, constatnt1, 2 ); 
```

变成

```
memcpy(&some_memory_block, 0x0080, 2 ); 
```

如果

你查看[memcpy](http://www.cplusplus.com/reference/cstring/memcpy/)，你会看到 memcpy 需要一个指针来指向第二个参数。

你必须分配一个指向 memcpy 的指针

```
const int constant1 = 0x0000;
memcpy(&some_memory_block, &constant1 , 2 ); 
```

# c++ - 有没有办法获取C++虚成员函数地址

> ID：14910616
> 
> 赞同：2
> 
> 时间：2013-02-16T13:06:06.753
> 
> 标签：c++, function, virtual

我搜索了这篇文章： [C++ : Getting function virtual 'address' with member function pointer](https://stackoverflow.com/questions/4998318/c-getting-function-virtual-address-with-member-function-pointer)

为了测试虚拟成员函数是否通常在对象的起始地址，我编写了如下代码：

```
#include <pwd.h>
#include <string.h>
#include <stdio.h>

class Base
{
public:
    int mBase1;
    char mBase2;
    virtual void foo()
    {
        fprintf(stderr,"Base foo called\n");
    }
};

class Child: public Base
{
public:
    int cc;
    virtual void foo()
    {
        fprintf(stderr,"Child foo called");
    }
};

int main(int argc, char *argv[])
{
    Base bb;
    fprintf(stderr,"[mBase1 %p][mBase2 %p] [foo %p]\n",&bb.mBase1,&bb.mBase2,&Base::foo);
    return 0;
} 
```

编译时，我收到警告：

```
test.cpp:30:88: warning ‘%p’ expects argument of type ‘void*’, but argument 5 has type ‘void (Base::*)()’ [-Wformat] 
```

输出是：

```
[mBase1 0xbfc2ca38][mBase2 0xbfc2ca3c] [foo 0x1] 
```

我认为它是有线的。

1.  是否有任何“漂亮的方法”来获取成员函数（不是静态成员函数地址？）。除了下面的方法，还有其他优雅的方法吗？

    ```
    typedef void (Base::*Foo)();
    Foo f = &Base::foo(); 
    ```

2.  为什么没有`&Base::foo`得到正确的 C++ 成员地址？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T13:15:27.130

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-30T04:20:16.483

如前所述，指向成员的指针不是指针，它们转换为 int 或 void * 等类型通常是没有意义的。特别是 0x1 最有可能表示对象 vtable 中的第一个或第二个条目。让我们考虑这段代码：

```
void (*Base::*test)() = &Base::foo
Child f;
f.*test(); 
```

对于第三行，编译器获取 f 的地址。将其转换为 Base 对象的地址，在本例中为 NOOP）从该地址读取 f 的 vtable 的地址（vtable 通常是对象中的第一个数据项），然后添加两个该地址 1* sizeof(void*) 并在该地址调用函数，这在很大程度上等同于这个 C ：

```
typedef void (*FnPtr)();
FnPtr *vtable=*(FnPtr **)&(Base &)f;
(*(vtable[(int)test]))(); or (*(vtable[(int)test - 1]))(); 
```

这只是对于您拥有的编译器的确切版本可能正确的假设。即使对未来的编译器版本也不能保证可移植性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T15:44:56.153

> 为什么 &Base::foo 没有得到正确的 C++ 成员地址？

Base::foo 不是静态方法。没有属于 Base 的 foo。我想知道 [foo 0x1] 是什么意思（例如：如果整个事情没有多大意义，为什么 0x1 ）？

# wordpress - 添加了自定义帖子类型的主循环 - paginate_links 无法正常工作

> ID：14910623
> 
> 赞同：0
> 
> 时间：2013-02-16T13:06:54.960
> 
> 标签：wordpress, pagination, custom-post-type

我有这么一段代码

```
 <?php 
     global $wp_query;
     $args = array_merge( $wp_query->query_vars, array( 'post_type' => array( 'post', 'project') ) );
     $wp_query = new WP_Query( $args );
     if ( have_posts() ) : while ( have_posts() ) : the_post(); 
     ?> 
```

在循环之后我有

```
 <?php             
    $permalink_structure = get_option('permalink_structure');
    $format = empty( $permalink_structure ) ? '?paged=%#%' : 'page/%#%/';

            echo paginate_links( array(
                'base' => get_pagenum_link(1) .'%_%',               
                'format' => $format,
                'current' => max( 1, get_query_var('paged') ),
                'total' => $wp_query->max_num_pages,
                'prev_text'    => __('«'),
                'next_text'    => __('»'),
                'show_all'     => false,
                'mid_size'     => 2,
                'end_size'     => 1,
            ) );

    ?> 
```

现在的问题是，如果我有 6 个帖子和 18 个项目以及每页 3 个帖子 ... **paginate_links**将生成 (6+18)/3 页，即 8 页 ...所以我单击 2 并转到第 2 页。 . 但是当我点击 3 .. 我得到错误 404。好像**paginate_links**生成所需数量的页面链接，但只有 6/3 页字的链接 .. 像 1 和 2。问题肯定是因为自定义帖子类型补充说，但我不明白那个问题出在哪里。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:23:02.257

看起来您必须更改“*主查询”（您在“**主*查询”中使用“*子查询*” ）以包含您的自定义帖子类型，这样您的分页链接才会起作用。

 *您可以尝试使用钩子更改“*主查询”*`pre_get_posts`

```
add_action( 'pre_get_posts', 'my_pre_get_posts' );
function my_pre_get_posts( $query ) {
    if($query->is_main_query() && $query->is_home()){ // <-- EDIT this condition to your needs
        $query->set( 'post_type', array( 'post','projects' ) );
    }
} 
```

您将此代码放入`functions.php`当前主题目录中的文件中的位置。

这假设您正在使用首页上的分页，即

```
 http://example.com/page/5 
```

我们有条件`$query->is_home()`检查我们是否在首页。如果您在不同的页面上，您可以根据需要更改此条件。

ps：我认为您的方式行不通，因为您是在主题文件中执行此操作，而更改分页链接的范围“为时已晚”。*

# asp.net-mvc - 使用 ServiceStack 设计 Web 应用程序

> ID：14910624
> 
> 赞同：5
> 
> 时间：2013-02-16T13:07:00.313
> 
> 标签：asp.net-mvc, servicestack, n-tier-architecture

在获得有关在我的 asp.net MVC 网站上使用 ServiceStack 的建议（[在 Asp.Net MVC 网站中维护状态](https://stackoverflow.com/questions/14820509/maintaining-state-in-asp-net-mvc-website)）之后，我开始在我的项目中实现它 - 但有些东西对我来说仍然不清楚。

目前我有两个项目：一个是 asp.net MVC 项目，另一个是 BL 项目（一个包含所有业务逻辑的类库）。MVC 项目中的所有控制器都会调用 BL 项目中的类/函数。
目前，mvc项目加载了BL的DLL，但将来网站发展壮大时，BL的项目将运行在不同的机器上。

我想使用 ServiceStack 进行会话管理/缓存和身份验证（它们通常相互依赖）。

我的问题：
1) 是否可以仅使用这两个功能而没有基于消息的 Web 服务的功能？ServiceStack 需要初始化，并且在初始化两次（在两个项目中）时会引发错误。
2）是否可以在两个项目之间拆分ServiceStack的实现？我想在 BL 项目中使用 ServiceStack 的身份验证提供程序来维护身份验证过程，但在 mvc 项目中由我自己（或在 ServiceStack 的帮助下）处理所有 UI/cookie。
3）我想在BL项目中使用ServiceStack的缓存，但我想我仍然需要维护一些会话cookie来接收会话id。正确的方法是什么？为此目的是否有任何内置的辅助函数？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T20:18:22.880

**1) 如果没有基于消息的 Web 服务功能，是否可以仅使用这两个功能？ServiceStack 需要初始化，并且在初始化两次（在两个项目中）时会引发错误。**

如果您安装最新的[ServiceStack.Mvc](http://nuget.org/packages/ServiceStack.Mvc/) NuGet 包，您将获得基本的[ServiceStackController](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.FluentValidation.Mvc3/Mvc/ServiceStackController.cs)，它是一个 MVC 控制器，可方便地访问 ServiceStack 的内置提供程序。尽管您仍然需要使用所需的依赖项自动连接控制器，例如注入的`ICacheClient`.

尽管即使您不使用 ServiceStack 的 WebFramework，拥有 AppHost 也是注册依赖项的便捷位置。ServiceStack 由[Web.config 中指定的 ASP.NET 的 IHttpHandler 映射](http://www.servicestack.net/ServiceStack.Hello/#rootpath)触发，因此如果您没有任何指定的映射，则永远无法从外部调用 ServiceStack，但仍然可以通过以下方式在内部访问已注册的依赖项：

```
var cache = AppHost.Resolve<ICacheClient>(); //Get ICacheClient for SS IOC 
```

**2）是否可以在两个项目之间拆分ServiceStack的实现？**

如果您确实有 AppHost，则在宿主项目中不能有多个实例（按设计），因为 AppHost 应该类似于**宿主项目**，您的所有服务依赖项都应该在其中注册并配置适用于整个 Web 应用程序的设置或服务。

但是，您可以跨多个程序集拆分服务的实现，并通过在 AppHostBase 构造函数中指定它们来让 ServiceStack 扫描它们，例如：

```
public class AppHost : AppHostBase 
{
   public AppHost() : base("My Service", 
     typeof(AServiceInDll1).Assembly, typeof(AServiceInDll2).Assembly/*, etc.*/){}
} 
```

**2) 续。我想在 BL 项目中使用 ServiceStack 的身份验证提供程序来维护身份验证过程，但在 mvc 项目中由我自己（或在 ServiceStack 的帮助下）处理所有 UI/cookie。**

查看[ServiceStack.UseCases CustomAuthenticationMvc](https://github.com/ServiceStack/ServiceStack.UseCases/blob/master/CustomAuthenticationMvc/Controllers/AccountController.cs#L42)示例项目，了解使用 MVC 但使用 ServiceStack 进行身份验证的示例。

**3）我想在BL项目中使用ServiceStack的缓存，但我想我仍然需要维护一些会话cookie来接收会话id。正确的方法是什么？为此目的是否有任何内置的辅助函数？**

您可以像使用任何其他 C# 类一样使用任何[ServiceStack 的缓存提供程序](https://github.com/ServiceStack/ServiceStack/wiki/Caching)，即将您的业务逻辑绑定到`ICacheClient`并在您的 IOC 中注入具体实现。

对于会话，您可以使用ServiceStack.Mvc [ServiceStackController](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.FluentValidation.Mvc3/Mvc/ServiceStackController.cs#L69)`base.SessionAs<T>`中的方法来访问会话。要保存会话，您可以使用扩展方法。尽管这两种方法都需要 ASP.NET 上下文（如果未提供，则使用 ASP.NET 的 HttpContext 单例）才能工作，因为它依赖于 ServiceStack 的cookie，这些 cookie 会在您访问 Session 时自动指示添加到客户端（由服务器） .`IHttpRequest.SaveSession()``ss-id/ss-pid`

如果您不希望您的业务逻辑服务依赖于 ASP.NET，`System.Web`我建议您访问并保存要在您的控制器中完成的会话并传递给您的业务逻辑。

我建议阅读[Sessions Wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/Sessions)以获取有关 ServiceStack 会话如何工作的更多背景信息。

### ServiceStack 和 ASP.NET 或 MVC 之间的 ASP.NET 上下文集成

我将添加此信息，因为它对于在 ServiceStack 和 ASP.NET 或 MVC 之间进行高级集成的任何人都很有用，因为 ServiceStack 的一些扩展方法依赖于这些内置类型。

您可以使用以下命令创建 ServiceStack IHttpRequest 或 IHttpResponse（在任何 HTTP/Controller 请求中）：

```
var ssHttpRequest = System.Web.HttpContext.Current.Request.ToRequest();
var ssHttpResponse = System.Web.HttpContext.Current.Response.ToResponse(); 
```

最后，您可以使用以下命令创建一个完整的请求上下文（封装了 IHttpRequest 和 IHttpResponse）：

```
var ssRequestContext = System.Web.HttpContext.Current.ToRequestContext(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:55:34.323

不确定我是否完全理解您的问题以及您希望如何将项目拆分到多个服务器上。我会尽力回答你的问题...

**是否可以仅使用这两个功能而没有基于消息的 Web 服务的功能？ServiceStack需要初始化，初始化两次的时候报错**

似乎您正试图在一个解决方案中运行 2 个 ServiceStack 实例（甚至可能是 2 个网站）（一个在您的 Web 项目中，一个在您的 BL 层中）。我不认为这是可能的。您的 BL 层可以共享 ServiceStack 库，并且您可以配置（在 AppHost.Configure 方法中）您的 Web 项目中引用您的 BL 项目的那些。

**是否可以在两个项目之间拆分 ServiceStack 的实现？**

我认为答案是肯定的，但是您将拥有两个项目都使用的一个 ServiceStack 实例。这将在项目之间共享会话状态。可能有一种方法可以让两个项目拥有自己的 ServiceStack 实例...请参阅[https://github.com/ServiceStack/ServiceStack/wiki/Self-hosting](https://github.com/ServiceStack/ServiceStack/wiki/Self-hosting)。

**我想在BL项目中使用ServiceStack的缓存，但我想我仍然需要维护一些会话cookie来接收会话id。** 如果两个项目都使用了 ServiceStack，您可以访问 UserSession ( [https://github.com/ServiceStack/ServiceStack/wiki/Sessions](https://github.com/ServiceStack/ServiceStack/wiki/Sessions) ) 中的所有会话数据。如果您的 MVC 控制器从 ServiceStackController 继承，您可以使用 SessionFeature.GetSessionId() 来获取会话 ID。在您的 ServiceStack 服务（实现服务的类）中，您可以使用 base.Session 获取会话数据。

希望这可以帮助。

# apache-camel - jar 启动时，ServiceMix (FuseESB) 无法找到 Camel javascript 支持

> ID：14910631
> 
> 赞同：0
> 
> 时间：2013-02-16T13:08:04.303
> 
> 标签：apache-camel, osgi, apache-servicemix, blueprint-osgi, fuseesb

在将 Camel 路由部署到 FuseESB 时，当 FuseESB 尝试启动 jar 文件时，它会在日志中给出以下异常：

```
Found initial references null for OSGi service (&(language=js)
(objectClass=org.apache.camel.spi.LanguageResolver)) 
```

这会导致捆绑包进入几分钟的宽限期，之后它会超时并且其状态会变为失败。请注意，我没有在应用程序中使用 javascript，但我假设它是作为加载 Camel 核心的一部分加载的。

我的设置的详细信息：

*   有问题的代码是使用 OSGi 蓝图 xml 文件编写的以定义 bean。
*   代码被打包为一个 jar，而不是 OSGi 包。
*   代码通过拖放到部署目录中进行部署，因此它由 FAB 部署程序部署。

我相信我已经安装了相关的 Camel 功能。

特征输出：列表：

```
[installed  ] [2.10.0.fuse-71-047] camel-script-javascript camel-2.10.0.fuse-71-047
[installed  ] [2.10.0.fuse-71-047] camel-script            camel-2.10.0.fuse-71-047 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:37:32.923

使用 FAB，您应该在 pom.xml 文件中声明对 Camel 组件的依赖关系，并使用 scope=provided。

在以下位置查看更多详细信息：http: [//fuse.fusesource.org/bundle/overview.html](http://fuse.fusesource.org/bundle/overview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:33:09.573

我通过以下方式解决了这个问题：

*   恢复到 spring xml 文件来定义 bean
*   将代码打包成一个包，而不是一个 jar

我仍然不明白为什么蓝图版本不起作用，但问题现在不像以前那么紧迫了。

# google-app-engine - 谷歌应用引擎。JPA。如何在不向后@OneToMany 的情况下实现@ManyToOne？

> ID：14910633
> 
> 赞同：1
> 
> 时间：2013-02-16T13:08:14.913
> 
> 标签：google-app-engine, jpa

正如我在要求[这篇文章](https://stackoverflow.com/questions/14788110/google-app-engine-jpa-manytoone-causes-org-datanucleus-store-appengine-datast)有 @ManyToOne 关联工作时发现的那样，我需要向后添加 @OneToMany 实体。

但在那之后我发现我现在找不到这些实体指定它自己的ID。我还需要指定父母的身份证。

这是我的 id 的样子：

```
User(1)/Issue(2) 
```

所以，我需要以这样的方式找到：

```
entityManager.find(Issue.class, KeyFactory.createKey(KeyFactory.createKey("User",1),"Issue",2)) 
```

我想知道，如果我有几个 ManyToOne 字段会怎样。请按照我的说明了解如何处理 GAE 中的 @ManyToOne 字段。

# facebook - facebook社交登录统计

> ID：14910637
> 
> 赞同：0
> 
> 时间：2013-02-16T13:08:25.053
> 
> 标签：facebook, statistics

我想知道每个时间段有多少人使用 facebook 社交登录按钮登录其他网站，但我没有找到任何统计数据或人口统计数据，谁能指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:44:30.983

这取决于用户群。我正在使用 LoginRadius 提供的社交登录，他们的社交登录分析帮助我理解了行为。由于我提供了多个 ID 提供商选择选项，我看到仍然有超过 60% 的用户更喜欢 facebook，而 google 排在第二位。我看到有 600 名用户使用 facebook 登录我的网站。希望这可以帮助！非常感谢 LoginRadius 的社交分析

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:00:00.870

这取决于用户群。我正在使用 LoginRadius 提供的社交登录，他们的社交登录分析帮助我理解了行为。由于我提供了多个 ID 提供商选择选项，我看到仍然有超过 60% 的用户更喜欢 facebook，而 google 排在第二位。我看到有 600 名用户使用 facebook 登录我的网站。希望这可以帮助！非常感谢 LoginRadius 的社交分析

# asp.net - 此项目的 web.config 文件缺少所需的 DirectRequestModule

> ID：14910641
> 
> 赞同：1
> 
> 时间：2013-02-16T13:08:51.930
> 
> 标签：asp.net, extjs, web-config, ext.net

将 ResourceManager 和 Window 组件放在 Web 应用程序上后，我正在调试 asp.net 应用程序，但它显示警告消息！

```
The web.config file for this project is missing the required DirectRequestModule.

Example

<system.web>
  <httpModules>
    <add name="DirectRequestModule" type="Ext.Net.DirectRequestModule, Ext.Net" />
  </httpModules>
</system.web>
More information available at "Getting Started". 
```

如何解决这种错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:43:28.543

`README.txt`包含一个`Web.config`示例，请参阅

[http://examples.ext.net/#/Getting_Started/Introduction/README/](http://examples.ext.net/#/Getting_Started/Introduction/README/)

同样，通过 NuGet 安装 Ext.NET 将自动设置正确的 Web.config 节点。

```
install-package ext.net 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T07:47:07.740

有点奇怪，我解决这个问题的方式..

早些时候我使用 Server.Transfer(..) 重定向页面然后我开始面临同样的问题

然后我进行了很多搜索，最后我将 Server.Transfer(..) 更改为 Response.Redirect(..)，并且 ta-da 它运行良好..

希望这可以帮助你:-)

# windows - 通过bitrock注册windows服务

> ID：14910644
> 
> 赞同：0
> 
> 时间：2013-02-16T13:09:09.417
> 
> 标签：windows

我正在开发windows服务，我可以通过命令行注册windows服务，但这不是必需的，所以我需要通过bitrock安装程序注册服务（我正在使用btrock installBuilder来发布应用程序）

如果有人有任何想法，请分享....

# java - 用于文本分析和计数的 Java 库

> ID：14910646
> 
> 赞同：0
> 
> 时间：2013-02-16T13:09:12.710
> 
> 标签：java, jar, word-count

*我需要一个稳定的 Java 库，我可以将一个巨大的字符串传递给（例如， Moby Dick*的几章）并获得类似“字数”的统计信息：

*   段落数
*   句子数
*   字数
*   字符数

最好是可国际化/可本地化但不是必需的东西。我认为 Apache Commons 会有这样的东西，但经过彻底搜索后却没有。

我可以自己写这个，但它可能会出错并且需要很多时间；另外，如果它已经存在，我不想重新发明轮子。我正在考虑使用 Apache Tika，但无法确认它是否能满足我的需要。它似乎处理字数，但不是其他的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:12:28.203

看看 Apache Tika。它可能满足您的要求

# jquery - 如何在数据表搜索输入周围包装跨度标签以将“清除搜索”功能与 jquery 集成？

> ID：14910652
> 
> 赞同：0
> 
> 时间：2013-02-16T13:09:38.253
> 
> 标签：jquery, css, jquery-datatables

我想向数据表搜索字段添加一个功能，在该字段中单击输入字段中的图标会清除搜索到的文本。

这里有一个工作清晰的搜索jsfiddle：

[http://jsfiddle.net/PJZmv/801/](http://jsfiddle.net/PJZmv/801/)

我正在尝试将其与此处的数据表集成：

[http://jsfiddle.net/rwone/Y37hZ/](http://jsfiddle.net/rwone/Y37hZ/)

这些是我采取的步骤：

`jquery.dataTables.js`通过更改自定义脚本：

```
sSearchStr.replace('_INPUT_', '<input type="text" />') :
sSearchStr==="" ? '<input type="text" />' : sSearchStr+' <input type="text" />'; 
```

至：

```
sSearchStr.replace('_INPUT_', '<span class="clearable"><input type="text" name="data_field" value="" /><span class="icon_clear">x</span></span>') :
sSearchStr==="" ? '<span class="clearable"><input type="text" name="data_field" value="" /><span class="icon_clear">x</span></span>' : sSearchStr+' <span class="clearable"><input type="text" name="data_field" value="" /><span class="icon_clear">x</span></span>'; 
```

并添加了这个 CSS：

```
/* added clear search css */

.clearable {
position:relative;
}
.data_field {
padding-right:30px; /* add space for the 'x' icon*/
}
span.icon_clear {
position:absolute;
right: 9px;
display: none;
top: -2px;
cursor:pointer;
font: bold 14px sans-serif;
color:#cc0000 !important;  
}

span.icon_clear:hover {
color:#f52 !important;
}

/* end added clear search css */ 
```

然后添加jquery：

```
$(document).on('propertychange keyup input paste', 'input.data_field', function(){
var io = $(this).val().length ? 1 : 0 ;
$(this).next('.icon_clear').stop().fadeTo(300,io);
}).on('click', '.icon_clear', function() {
$(this).delay(300).fadeTo(300,0).prev('input').val('');
}); 
```

但正如您在 jsfiddle 中看到的那样，它还没有工作。

因此，期望的结果是“清晰搜索”功能在数据表集成中以及在独立 jsfiddle 中的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:03:16.503

替换你的代码

```
$(document).on('propertychange keyup input paste', 'input.data_field', function(){... 
```

和

```
$(document).on('propertychange keyup input paste', 'input[name="data_field"]', function(){... 
```

希望有帮助。

# php - Json解析并添加格式

> ID：14910656
> 
> 赞同：0
> 
> 时间：2013-02-16T13:09:56.520
> 
> 标签：php, ajax, json

我在一个函数中使用它：

```
$.ajax({
     type: 'POST',
     url: 'demopost.php',
     data: { ... },
     dataType: 'json',
     success: function(data) 
     {
            console.log(data);
     }
  }); 
```

demopost.php 只包含一个查询。

输出将是：

![在此处输入图像描述](../Images/aab975e764e3dafc9c83e4a00caa694b.png)

但是我怎样才能在 div 中显示它呢？或者我怎样才能添加一些格式，例如像 php 数组一样的 foreach？

编辑：我试过了（console.log（data）的地方：

```
$('.inner').append(data); 
```

当然有一个内部类的 div。但什么都没有显示

EDIT2： demopost.php 中的查询：

```
 ... try
        {
            $c_id = htmlspecialchars($_POST['cid']);
            $leftprice = $_POST['left'];
            $rightprice = $_POST['right'];
            $items=$main->pdo->prepare("SELECT name, price FROM clf_items WHERE category_id IN (
                SELECT node.id
                FROM clf_category AS node,
                clf_category AS parent
                WHERE node.lft BETWEEN parent.lft AND parent.rgt AND price BETWEEN :left AND :right
                AND parent.id = :c_id)");
            $items->execute(array(':c_id' => $c_id, ':left' => $leftprice, ':right' => $rightprice));
            $items_array = array(); 

            while ($row = $items->fetch(PDO::FETCH_ASSOC))
            {
                $items_array[] = $row; 
            }
        echo json_encode($items_array);exit;
        }... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:36:50.510

您在这里所做的是从服务器返回一些 JSON 数据，这些数据可以通过 javascript 读取，但如果不进行一些处理就被推送到 HTML 中是没有用的。

一种解决方案是获取您收到的 JSON 数组并将其转换为 HTML 字符串，然后再将其推送到页面上。这可能看起来像：

```
 success: function(data) 
 {
     var result = '<table>';
     for (i=0; i<data.length; i++) {
         result += '<tr><td>'+ data[i].name+'</td><td>'+data[i].price+'</td></tr>';
     }
     result+= '</table>';
     $(".inner").html(result);
 } 
```

现在这没有钱格式，没有 html 转义，非常粗糙的布局等 pp。在你尝试将这个原始草图变成有用的东西之前，我建议查看各种可用于 jQuery 的模板引擎；这篇文章中列出了一些：[jQuery Templates are deprecated?](https://stackoverflow.com/questions/7911732/jquery-templates-are-deprecated) （与问题所暗示的不同，jQuery 模板并没有死，但有一些竞争）。

但是我更喜欢另一种方法：创建 HTML 服务器端（而不是 JSON），因此您返回 HTML 片段的方式与通常在 PHP 中返回完整 HTML 页面的方式相同，并且在 ajax 请求中说您想要 HTML:`dataType: 'html',`然后您可以将结果直接推送到`$(".inner").html(data)`（或者`$(".inner").append(data)`，不知道您的 HTML 应该是什么样子），就像您最初想要的那样。

我想这和 schwierig 想说的一样，但我觉得有必要说得更清楚一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:14:39.763

如果您不处理要发送的数据，您出于什么原因使用 Ajax？如果你只是想格式化数据，你真的不需要 PHP 来做到这一点。

当然有可能。如果您想使用 PHP 进行处理，您需要回显您的格式化结果并使用`.done()`jQuery API 中描述的函数

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T13:47:34.800

```
$.post('demopost.php',{..}, function(data) {
  $('.inner').html(data);
}); 
```

试试这个希望它会有所帮助，并确保你有内部类的 div

# c# - 如何使用贝宝 IPN

> ID：14910664
> 
> 赞同：0
> 
> 时间：2013-02-16T13:10:24.837
> 
> 标签：c#, asp.net, paypal, paypal-ipn, paypal-sandbox

我正在尝试创建一个页面，其中：

*   1.用户点击一个叫BUY的按钮
*   2.用户被重定向到需要登录支付的paypal页面。

付款后，他将被重定向到另一个页面，其中：

*   1.在页面加载中，我会检查是否支付成功。

***我已经这样做了，但它似乎不起作用。*** 我做了什么？

*   1.从paypal帐户启用IPN，并将url设置为asp页面。

    2.在网站上托管这两个文件（php/asp.net）

*   3.经过测试，但标签文本没有变为“完成，已付款”，这意味着他无法处理付款。

购买产品的php页面：

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">

    <input type="hidden" name="cmd" value="_xclick" />
    <input type="hidden" name="business" value="seller@domain.com" />

    <input type="hidden" name="item_name" value="Happiness" />
    <input type="hidden" name="amount" value="6.52" /> 
    <input type="submit" value="Buy!" />

</form> 
```

asp.net 页面：

```
 protected void Page_Load(object sender, EventArgs e)
        {
                string strSandbox = "https://www.sandbox.paypal.com/cgi-bin/webscr";
                HttpWebRequest req = (HttpWebRequest)WebRequest.Create(strSandbox);

                //Set values for the request back
                req.Method = "POST";
                req.ContentType = "application/x-www-form-urlencoded";
                byte[] param = Request.BinaryRead(HttpContext.Current.Request.ContentLength);
                string strRequest = Encoding.ASCII.GetString(param);
                strRequest += "&cmd=_notify-validate";
                req.ContentLength = strRequest.Length;

                StreamWriter streamOut = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII);
                streamOut.Write(strRequest);
                streamOut.Close();
                StreamReader streamIn = new StreamReader(req.GetResponse().GetResponseStream());
                string strResponse = streamIn.ReadToEnd();
                streamIn.Close();

                if (strResponse == "VERIFIED")
                {
                    Label1.Text = "Done,payment was made.";
                }
                else if (strResponse == "INVALID")
                {
                    //whatever
                }
                else
                {
                    //whatever
                }
} 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:54:55.790

IPN 交易是分批发送的，通常在几分钟后发送。您不应该设计用户看到的页面来反映 IPN 消息的状态。在我的系统中，我只是告诉用户他们的购买已完成，并且当 PayPal 建议清空资金时将完成，我会通过电子邮件通知他们。

# django - 另一个 $(...).datepicker 不是函数错误

> ID：14910665
> 
> 赞同：0
> 
> 时间：2013-02-16T13:10:28.183
> 
> 标签：django, jquery-ui

如果这看起来没有那么有用（注意“过于本地化”的近距离投票），那么请告诉我原因。我认为 Django 和 JQuery UI 组成了一个相当不错的团队，因此值得解决使用它们的任何问题。这个问题的答案不是我发现的文档或另一个问题，并且与在其他地方使用其他小部件有关。

和问题...

* * *

我有一个处于开发模式的 django 项目。在其静态目录中，我有以下文件结构：

```
directory: js
            jquery-1.9.1.js
            jquery-ui-1.10.1.custom.js
            other_stuff.js
directory: css
            directory: ui-lightness
                directory: images
                jquery-ui-1.10.1.custom.css
                jquery-ui-1.10.1.custom.min.css 
```

我正在尝试让日期选择器在我的一种表单上工作：

在我的 html 头中，我有：

```
<link type="text/css" rel="stylesheet" href="/static/css/ui-lightness/jquery-ui-1.10.1.custom.css"/>
<script src="/static/js/jquery-1.9.1.js" type="text/javascript"></script>
<script src="/static/js/jquery-ui-1.10.1.custom.js" type="text/javascript"></script>
<script type="text/javascript">
        $(document).ready(function() {
              $("#id_date_of_birth").datepicker();
        });
</script> 
```

我试图改变的输入看起来像：

```
<input type="text" size="10" id="id_date_of_birth" class="vDateField" value="1987-01-19" name="date_of_birth"/> 
```

**现在我知道这个问题之前已经被问过十亿次了，但到目前为止我读过的所有解决方案似乎都不起作用......有人可以猜测我为什么会收到错误`$(...).datepicker is not a function`吗？**

我考虑过的东西：

1.  一切似乎都包含在正确的顺序中。其他解决方案提到包括 jquery ui `...core.js`，但我认为所有内容都包含在 jquery-ui-1.10.1.custom.js 中，因为否则 jquery ui 下载页面非常具有误导性（我选择下载每个组件并且没有效果）

2.  除了我提到的那个，没有出现其他错误。所有脚本都正确加载

3.  没有任何内容超过一次

4.  我一直等到文件准备好再打电话给任何东西，所以我的问题不是因为时机不对

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:50:48.040

如果您列出的目录结构准确，则您的 jquery 文件不会以“.js”结尾，而您对这些文件的引用确实在页眉中包含“.js”。将“.js”扩展名添加到您的 jquery 文件中，它应该可以工作。

你还应该关闭你的输入元素：

```
<input type="text" size="10" id="id_date_of_birth" class="vDateField" value="1987-01-19" name="date_of_birth" **/**> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:53:48.083

出于某种原因，该链接需要一个单独的结束标签...

```
<link type="text/css" rel="stylesheet" href="/static/css/ui-lightness/jquery-ui-1.10.1.custom.css"><link/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T12:41:31.510

这在我身上发生了好几次。

我所做的是复制整个代码（脚本）并将其放在父视图中。

如果您尝试将脚本放置在部分中，则可能无法正常工作，请尝试将其放置在更高的级别，直到完成工作。

在 django-oscar 中的一个示例，我必须将脚本放在 basket.html 模板中以使其在此处工作：

{% 包括 'basket/partials/basket_content.html' %}

# iphone - 在方法中停止递归循环

> ID：14910666
> 
> 赞同：0
> 
> 时间：2013-02-16T13:10:32.367
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

是否可以通过选择器停止循环进入方法调用？我创建了一个新方法来停止所有正在运行的进程，但我不知道如何在 audioloop 方法中停止 while 循环。

这是我的代码，请看：

```
-(id) init{
    if((self=[super init]) ) { 
       // @property int isLoop;
       self.isLoop = 1;
       audioThread = [NSThread new];
       [audioThread initWithTarget:self selector:@selector(audioLoop) object:nil];
       [audioThread setThreadPriority:1];
       [audioThread start];   
    }
}

// in this method i would stop while loop of audioLoop method
-(void)stopAllRunning{
    self.isLoop = 0;
    [audioThread cancel];
}

 -(void) audioLoop{
    while (isLoop) {
        [_midiClock update];
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:26:25.007

只需添加一个`condition`和一个`break`语句来执行此操作：

```
while (true)
{
     if(yourCondition)
        break;
     else
        [_midiClock update];
} 
```

或简单地说：

```
while (yourCondition)
{
   [_midiClock update];
} 
```

# less - 如何在 LESS 中使用 if 语句

> ID：14910667
> 
> 赞同：68
> 
> 时间：2013-02-16T13:10:33.367
> 
> 标签：less

我正在寻找某种 if 语句来控制`background-color`不同`div`元素的。

我已经尝试了以下，但它没有编译

```
@debug: true;

header {
  background-color: (yellow) when (@debug = true);
  #title {
      background-color: (orange) when (@debug = true);
  }
}

article {
  background-color: (red) when (@debug = true);
} 
```

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2014-05-19T00:16:03.597

有一种方法可以为单个（或多个）属性使用守卫。

```
@debug: true;

header {
    /* guard for attribute */
    & when (@debug = true) {
        background-color: yellow;
    }
    /* guard for nested class */
    #title when (@debug = true) {
        background-color: orange;
    }
}

/* guard for class */
article when (@debug = true) {
    background-color: red;
}

/* and when debug is off: */
article when not (@debug = true) {
    background-color: green;
} 
```

...并使用更少的 1.7；编译为：

```
header {
    background-color: yellow;
}
header #title {
    background-color: orange;
}
article {
    background-color: red;
} 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-02-16T23:44:34.953

LESS 有mixins 的[保护表达式](http://lesscss.org/features/#css-guards-feature)，而不是单个属性。

所以你会像这样创建一个mixin：

```
.debug(@debug) when (@debug = true) {
    header {
      background-color: yellow;
      #title {
          background-color: orange;
      }
    }

    article {
      background-color: red;
    }
} 
```

`.debug(true);`并通过调用或`.debug(false)`（或根本不调用它）来打开或关闭它。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-03-20T17:42:33.603

我偶然发现了同样的问题，我找到了解决方案。

首先确保至少升级到 LESS 1.6。你可以使用`npm`这种情况。

现在您可以使用以下 mixin：

```
.if (@condition, @property, @value) when (@condition = true){
     @{property}: @value;
 } 
```

从 LESS 1.6 开始，您也可以将 PropertyNames 传递给 Mixins。因此，例如，您可以使用：

```
.myHeadline {
   .if(@include-lineHeight,  line-height, '35px');
} 
```

如果@include-lineheight 解析为*true* ， LESS 将打印`line-height: 35px`并且如果@include-lineheight 不为true，它将跳过mixin。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-04-05T14:43:20.883

I wrote a mixin for some syntactic sugar ;)
Maybe someone likes this way of writing if-then-else better than using **guards**

> depends on Less 1.7.0

[https://github.com/pixelass/more-or-less/blob/master/less/fn/_if.less](https://github.com/pixelass/more-or-less/blob/master/less/fn/_if.less)

## Usage:

```
.if(isnumber(2), {
    .-then(){
        log {
            isnumber: true;
        }
    }
    .-else(){
        log {
            isnumber: false;
        }
    }
});

.if(lightness(#fff) gt (20% * 2), {
    .-then(){
        log {
            is-light: true;
        }
    }
}); 
```

**using on example from above**

```
.if(@debug, {
    .-then(){
        header {
            background-color: yellow;
            #title {
                background-color: orange;
            }
        }
        article {
            background-color: red;
        }
    }
}); 
```

# php - CakePHP 2.x - 每个项目的最大虚拟字段

> ID：14910672
> 
> 赞同：2
> 
> 时间：2013-02-16T13:11:07.547
> 
> 标签：php, cakephp, field, cakephp-2.2, paginator

**系统**

*   CakePHP 2.x

**数据库**

```
Houses --> id, name
Visits --> id, date, house_id 
```

**楷模**

```
Visit belongsTo House
House hasMany Visit 
```

**看法**

*   我有一个名为 house/index.ctp 的所有房屋的视图。
*   它列出了每所房子的 ID 和名称。
*   我还使用 PaginatorHelper 对数组进行排序。

**问题**

*   我想看看他们上次访问的每所房子。
*   这必须由 PaginatorHelper 排序

**尝试**

*   我以为我可以用 virtualFields 来做，但我失败了（它总是返回所有房屋的最大值）。

    `public $virtualFields = array('lastvisit' => 'SELECT MAX(visits.date) FROM visits, houses WHERE houses.id = visits.house_id GROUP BY house_id');`

*   我试图在 Houses 表的新列中“缓存”每次最大访问，但它非常脏。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:32:10.960

为此声明一个虚拟字段可能会很棘手，因此我建议您在需要时随时添加它。

因此，您`HousesController`的索引操作将如下所示：

```
public function index() {
    $this->House->virtualFields['last_visit'] = 'MAX(Visit.date)';
    $this->paginate = array(
        'House' => array(
            'group' => array('house_id'),
            'joins' => array(
                array(
                    'table' => 'visits',
                    'alias' => 'Visit',
                    'type' => 'INNER',
                    'conditions' => array(
                        'House.id = Visit.house_id',
                    )
                )
            )
        )
    );

    $this->set('houses', $this->paginate());
} 
```

请注意，您必须`$publicFields`从模型中删除声明，并且我将字段名称更改为 from `lastvisit`to`last_visit`以使其更像 Cake。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:43:23.910

[如果您使用Containable](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)行为， 这非常简单。

```
 $this->paginate['House'] = array(
    'contain' => array('Visit' => array('order' => 'date DESC')
  );
  $houses = $this->paginate('House'); 
```

我还没有对此进行测试，但它应该非常接近您的需要。您可能需要添加限制，`contain`以便您只能看到最后 x 次访问。

# xuggler - Xuggler：将视频从 .mp4 转换为 .webm 时出错

> ID：14910676
> 
> 赞同：1
> 
> 时间：2013-02-16T13:11:26.963
> 
> 标签：xuggler

使用 Xuggler 将视频从 mp4 转换为 webm 时出现以下错误

```
3:02:27,344 ERROR [status_jsp:665] java.lang.RuntimeException: could not open stream com.xuggle.xuggler.IStream@1423372160[index:0;id:0;streamcoder:com.xuggle.xuggler.IStreamCoder@1423442272[codec=com.xuggle.xuggler.ICodec@1423293632[type=CODEC_TYPE_AUDIO;id=CODEC_ID_VORBIS;name=libvorbis;];time base=1/44100;frame rate=0/0;sample rate=44100;channels=2;];framerate:0/0;timebase:1/90000;direction:OUTBOUND;]: Operation not permitted
java.lang.RuntimeException: could not open stream com.xuggle.xuggler.IStream@1423372160[index:0;id:0;streamcoder:com.xuggle.xuggler.IStreamCoder@1423442272[codec=com.xuggle.xuggler.ICodec@1423293632[type=CODEC_TYPE_AUDIO;id=CODEC_ID_VORBIS;name=libvorbis;];time base=1/44100;frame rate=0/0;sample rate=44100;channels=2;];framerate:0/0;timebase:1/90000;direction:OUTBOUND;]: Operation not permitted
    at com.xuggle.mediatool.MediaWriter.openStream(MediaWriter.java:1192)
    at com.xuggle.mediatool.MediaWriter.getStream(MediaWriter.java:1052)
    at com.xuggle.mediatool.MediaWriter.encodeAudio(MediaWriter.java:830)
    at com.xuggle.mediatool.MediaWriter.onAudioSamples(MediaWriter.java:1441)
    at com.xuggle.mediatool.AMediaToolMixin.onAudioSamples(AMediaToolMixin.java:89)
    at com.xuggle.mediatool.MediaReader.dispatchAudioSamples(MediaReader.java:628)
    at com.xuggle.mediatool.MediaReader.decodeAudio(MediaReader.java:555)
    at com.xuggle.mediatool.MediaReader.readPacket(MediaReader.java:469)
    at com.test.xuggler.Test.processAction(Test.java:26) 
```

# algorithm - 二叉树：二叉树中前序、后序遍历的优势？

> ID：14910677
> 
> 赞同：4
> 
> 时间：2013-02-16T13:11:27.013
> 
> 标签：algorithm, language-agnostic, binary-tree, binary-search-tree

二叉搜索树的中序遍历以递增顺序产生节点。但是前序和后序遍历在任何二叉树上都有什么优势呢？

编辑：我所说的优势是：“任何应用预购或后购遍历的情况都特别适合”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T13:20:04.250

并非所有的二叉树都有数字。您可以使用二叉树来表示呈现树结构的事物，例如*表达式*。例如，`2 * 3 + 4`可以表示为

```
 +
            /   \
           *     4
         /   \
        2     3 
```

如果您表示这样的表达式，则按顺序遍历将产生您的“正常”中缀表示法

```
2 * 3 + 4 
```

但是后序遍历会产生表达式的[*逆波兰表示法*](http://en.wikipedia.org/wiki/Reverse_Polish_notation)：

```
2 3 * 4 + 
```

# javascript - 如何动画返回我的按钮

> ID：14910678
> 
> 赞同：0
> 
> 时间：2013-02-16T13:11:33.303
> 
> 标签：javascript, jquery, button, jquery-animate

一个小问题……我想！我有一个按钮菜单。单击时，它会移动（动画）。当另一个被点击时，我需要第一个再次向后移动。到目前为止，它们仅在单击时移动，但不会再次返回。编码：

```
$(document).ready(function(){
  var vari = $(this).attr('name');
    $('.nav_btn').click(function(){
  $(this).animate({left:'50%'});
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:14:10.183

在这里试试这个用法`.siblings()`：

```
$(document).ready(function(){
    var vari = $(this).attr('name');
    $('.nav_btn').click(function(){
        $(this).animate({left:'50%'});
        $(this).siblings().animate({left: '0'});
    });
}); 
```

## [工作演示](http://jsfiddle.net/JYCtF/)

虽然不是必需的但你可以提供一个`animation duration`动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:14:30.120

使用 jQuery，这对我来说似乎很容易。您所做的是，您为所有按钮提供相同的类名，并在单击其中一个按钮时循环遍历所有按钮。因为您可以获得元素集合，所以它看起来很像这样：

```
$(document).ready(function(){
  var vari = $(this).attr('name');

  $('.nav_btn').click(function(){
     var buttons = $('.nav_btn');
     for(var i=0; i<buttons.length; i++) {
         if(buttons[i]!=this)         //Avoid animating clicked button twice! Think of performance
           $(buttons[i].animate({left:'0%'});
     }
     $(this).animate({left:'50%'});
  });
}); 
```

# actionscript-3 - AS3 添加movieclip 槽功能

> ID：14910681
> 
> 赞同：0
> 
> 时间：2013-02-16T13:11:43.397
> 
> 标签：actionscript-3, flash, constructor, adobe, typeerror

是否可以在 AS3 中创建“API”来添加影片剪辑/位图？我试过这样做：

```
public function addImage(name:String, x:int, y:int, type:String = "MovieClip", path:String = null) {
    var mc:MovieClip;

    if (type == "MovieClip") {
        var $name = "as_" + name + "()"
        mc = new $name;
        trace(mc);
    }
    else if (type == "Bitmap") {

    }
} 
```

但它错误：

```
TypeError: Error #1007: Instantiation attempted on a non constructor 
```

有这样做的正确方法吗？还是不能以这种方式将影片剪辑添加到舞台？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T13:27:50.857

`$name`是 a 的一个实例`String`。实例化对象所需的是对 a 的引用`Class`，您可以通过将类名传递给`flash.utils.getDefinitionByName`.

尝试这个：

```
var className:String = "as_" + name;
var MyClass:Class = getDefinitionByName(className) as Class;
mc = new MyClass(); 
```

# linux - 如何在 Linux 内核编程中从“dev_t”获取“设备结构”？

> ID：14910682
> 
> 赞同：4
> 
> 时间：2013-02-16T13:11:45.177
> 
> 标签：linux, usb, kernel

我对内核编程很陌生，我正在按照以下教程进行操作： [USB 引导身份验证](http://ww2.cs.fsu.edu/~roy/KDD/Final_Paper.pdf)

我想获得 USB 驱动器的“设备结构”。我有 USB 设备的“dev_t”实例。此外，我想检查设备结构是否是 USB 设备。我无法弄清楚如何开始......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-13T17:28:11.133

正如 hiteshradia 所说`dev_t`的是一个设备号（一个主要的数字和次要的数字）。但是，您可以使用它以及块设备可以访问`struct device`与其关联的知识。为此，请使用`struct block_device *bdget(dev_t)`from `linux/fs.h`。从中您可以使用`block_device->bd_part`获取`struct hd_struct *`设备的 a 并最终使用`struct device *part_to_dev(struct hd_struct *)`定义为`linux/genhd.h`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:58:10.257

`dev_t`只是一个设备号，它代表`/dev/sdb1`从您的链接中看到的分区。无法使用它获取底层 USB 驱动器详细信息。

在您提供的链接中有部分

```
if(udev->serial != NULL)
{
    if((strcmp(udev->serial, "3513001D97827E69")) == 0) /* Hard coded usb device serial here*/
    {
        key_dev_found = 1;
    }
} 
```

您可以在哪里获取 USB 设备详细信息和`struct usb_device *udev`

# mysql - 更新 MySQL 表中的外键

> ID：14910687
> 
> 赞同：0
> 
> 时间：2013-02-16T13:12:14.700
> 
> 标签：mysql, sql

我正在尝试使用此代码：

```
alter table KUNDE 
(foreign key (`PostNr`) references POSTSTED(`Postnr`); 
```

我收到此错误消息：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“（外键（`PostNr`）引用 POSTSTED（`Postnr`）”附近使用正确的语法

我不明白我的语法有什么问题。我的输入应该没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:13:26.047

[正确`ALTER TABLE`](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)的[语法](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)使用`ADD`关键字并且不`()`围绕表达式（仅围绕列）。

```
alter table `KUNDE` ADD foreign key (`PostNr`) references `POSTSTED` (`Postnr`); 
```

与任何键一样，确保`KUNDE.PostNr`和`POSTSTED.Postnr`具有相同的数据类型，并且`POSTSTED.Postnr`要么是 a`PRIMARY KEY`要么具有以其他方式定义的索引。

# actionscript-3 - 在没有正确参数的情况下调用某些函数

> ID：14910688
> 
> 赞同：0
> 
> 时间：2013-02-16T13:12:22.190
> 
> 标签：actionscript-3, flash

我的 AS3 程序有两个功能，一个在宽度和高度发生变化时触发：

```
stage.addEventListener(Event.RESIZE, resizeListener);
function resizeListener (e:Event):void { 
//some commands
} 
```

第二个在几毫秒后触发一个：

```
var myTimer:Timer = new Timer(clockUpdate, 0);
myTimer.addEventListener(TimerEvent.TIMER, updateData);
myTimer.start();

function updateData(e:TimerEvent):void {
    trace("AUTOUPDATE");
    trace(e);
} 
```

我还需要手动触发这些功能，比如说当用户按下按钮时，但我不知道在手动调用它们时我必须发送哪些参数。

我只尝试了 resizeListener() 和 updateData() 但当然它没有要求我提供参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T13:20:44.100

您可以通过提供默认值来使函数中的参数成为可选参数。这是一个通过使用上面的两个函数并使事件参数可选的示例：

```
function resizeListener(e:Event = null):void { 
    //some commands
} 
```

和

```
function updateData(e:TimerEvent = null):void {
    trace("AUTOUPDATE");
    trace(e); 
} 
```

例如，调用`resizeListener()`现在将执行该函数，并且 的值`e`将默认为`null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:12:27.613

使 Event 参数可选，`resizeListener(e:Event=null)`就像 walkietokyo 的答案一样，是一个完全有效且通常方便的解决方案。另一种选择是将您希望在不触发事件的情况下执行的操作放在单独的函数中，该函数可以由事件处理程序调用，也可以从其他任何地方调用。

因此，例如，假设您想要在调整大小时重新排列布局，并且您还想在初始化时或单击按钮时或任何时候进行相同的布局设置，您可以执行以下操作：

```
stage.addEventListener(Event.RESIZE, resizeListener);
function resizeListener(e:Event):void { 
   rearrangeLayout();
}

function rearrangeLayout():void {
   // The actual rearrangement goes here, instead of in resizeListener. This can be called from anywhere. 
} 
```

采用哪种方法可能是个人喜好问题，也可能因情况而异，实际上，两者都可以。

将事件处理程序和另一个函数中的内容分开的一个好处是，不会出现您必须检查 e:Event 参数是否为空的情况。换句话说，您将在事件处理程序中拥有依赖于事件（如果有）的代码，并在更通用的函数（不是事件处理程序）中拥有独立于事件的代码。

因此，在更一般和示意性的情况下，结构将是这样的：

```
addEventListener(Event.SOME_EVENT, eventListener);
function eventListener(e:Event):void { 
   // Code that needs the Event parameter goes here (if any).
   // Call other function(s), for the stuff that needs to be done when the event happens.
   otherFunction();
}

function otherFunction():void {
   // Stuff that is not dependent on the Event object goes here, an can be called from anywhere.
} 
```

# ios - 自定义 iOS 弹出/模态视图越狱启动守护进程

> ID：14910692
> 
> 赞同：0
> 
> 时间：2013-02-16T13:12:32.170
> 
> 标签：ios, uiview, popup, daemon, jailbreak

我正在做一个越狱调整（启动守护进程），它只是监听某个事件，然后需要在该事件发生时显示一个自定义弹出 UIView。弹出窗口需要出现在任何地方——无论是锁屏、跳板还是应用程序。

虽然我设法得到了一个简单的`CFUserNotificationDisplayAlert`工作，但它不提供所需的功能 - 我更喜欢呈现自定义视图。

我在[这里](https://github.com/rnystrom/RNBlurModalView)`RNBlurModalView`尝试使用该库，但是在尝试渲染视图时它会崩溃，因为它正在寻找一个基础- 因为它是一个后台守护程序，所以没有一个。`UIViewController`

有没有人有任何提示我可以如何渲染自定义弹出视图（无论是修改上述`RNBlur`库还是推出不同的解决方案）？

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:12:46.693

您可以做的是向 SpringBoard 中注入一个动态库，在该类中您在服务器模式下使用[该类`CPDistributedMessagingCenter`，](http://iphonedevwiki.net/index.php/CPDistributedMessagingCenter)并以某种方式对其进行设置，以便它侦听消息，然后在收到该消息后，其观察者对象呈现自定义视图和将其添加到 SpringBoard 应用程序本身的关键窗口 ( `[[UIApplication sharedApplication].keyWindow addSubview:customView];`)。

然后，在调整的另一部分（您当前正在调用的地方`CFUserNotificationDisplayAlert()`）中，您只需`CPDistributedMessagingCenter`在客户端模式下使用并在需要时向其发送适当的消息。

# c++ - c++虚拟公共继承init奇怪的结果？

> ID：14910694
> 
> 赞同：0
> 
> 时间：2013-02-16T13:12:47.127
> 
> 标签：c++

下面程序的输出是： 5 5

```
#include <iostream>
using namespace std;

struct A
{
public:
    int myInt;
    A(int n): myInt(n){}
    A(): myInt(5) {}
};

class B : virtual public A
{
public:
    B(int n):A(10) {}
    B():A(10) {}
};

class C : virtual public A
{
public:
    C(int n):A(3*n) {}
};

class D : public B, public C
{
public:
    D(int n=90) : C(2*n), B(n) {}
};

class E : public D
{
public:
    E(int n=20):D(n-1) {}
};

int main()
{
    D d(100);
    cout << d.myInt << endl;
    E e;
    cout << e.myInt << endl;
    return 0;
} 
```

考虑对象`d`。据我了解，继承是根据继承列表（而不是初始化列表）的顺序构造的，因此`B`首先使用带有参数的参数构造`100`类。所以现在设置为 value 。Class 也是如此，因为它是虚拟的，所以它被设置为 number 。我万万没想到。为什么会这样？`A``10``A``myInt``10``c``myInt``600``5`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:25:58.690

请参阅[parashift](http://www.parashift.com/c++-faq/virtual-inheritance-ctors.html)中的文章：

> 因为一个虚拟基类子对象在一个实例中只出现一次，所以有一些特殊的规则可以确保每个实例只调用一次虚拟基类的构造函数和析构函数。C++ 规则说，虚拟基类是在所有非虚拟基类之前构造的。作为程序员，你需要知道的是：类继承层次结构中任何位置的虚拟基类的构造函数都由“最派生”类的构造函数调用。

# php - 使用 ajax 和 jQuery 时，如何识别完全加载的 div 中的 ajax 内容（图像和文本）？

> ID：14910695
> 
> 赞同：0
> 
> 时间：2013-02-16T13:12:49.113
> 
> 标签：php, javascript, jquery, ajax

```
$.ajax({
    type: 'POST',
    url: 'show-photo3.php',
    data: 'type='+type+'&count='+count+'&aid='+aid,
    dataType: 'html',

    success: function(response) {
        //alert(response);                      
        $('#vph').html(response);               
        $('#vph').fadeIn("1000");                
        newhight=$("#vph").height();                  
        $("#vph_outer").css('height',newhight);
     }           
}); 
```

它用于基于 ajax 的图片库。当我尝试根据新内容的高度调整外部 div 的大小时。它不能正常工作意味着取错高度。我认为取高度时没有完全加载 ajax 内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:25:46.160

```
var img = new Image();
img.src = img_url;
img.onload = function () {
//img was loaded
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:18:07.070

尝试在动画完成后计算高度，在fadeIn的回调函数中

```
$('#vph').fadeIn("1000", function(){
      newhight=$("#vph").height();   
      $("#vph_outer").css('height',newhight);
}); 
```

如果您通过 ajax 加载图像，请在计算高度之前尝试使用[waitForImages插件。](https://github.com/alexanderdickson/waitForImages)

```
$('#vph').html(response).waitForImages(function() {               
    $('#vph').fadeIn("1000"), function(){
          newhight=$("#vph").height();   
          $("#vph_outer").css('height',newhight);
    })
}); 
```

# c++ - 在 Linux 机器上获取所有连接的 IP

> ID：14910700
> 
> 赞同：-3
> 
> 时间：2013-02-16T13:13:16.330
> 
> 标签：c++, linux, ip-address, tcp-port

最近在面试中被问到一个我做不到的问题。有人对此有解决方案吗？

```
Grab all connected IP´s on the Linux machine
check every connected IP if TCP port 1706 is open

if its open > execute command.  CURL ‘http:// some address ’ 
Else do nothing.
program will check this every 60 minits

Plattform Linux Ubuntu Server 12\. X64 / x32 
```

C++ 中的 WAP

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:21:16.840

制作一个 bash 脚本。

逻辑：

使用`netstat -natp`（通过`awk`/过滤`sed`得到端口，然后grep）然后用一个简单的测试看看结果是否为空。有的`curl`话就跑。

把它放在一个cron作业中。简单的东西，真的。

编辑：

`netstat`是一个实用程序，它将向您显示计算机上的所有连接。`netstat -natp`显示在您的计算机上具有 tcp 套接字的程序列表。

`sed`并`awk`用于文本格式。您可以使用它们列出特定的列。

`grep`搜索输入以查找指定的字符串。

bash 允许基本逻辑，并可用于查看字符串是否为空。

`cron`是一个 linux 进程，它安排命令在特定时间运行。

编辑＃2：

你可以 poll `/proc/net/tcp`，但既然`netstat`这样做并且格式很好，为什么还要麻烦呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:30:11.027

在 Linux 中，您在其中查找文件`/proc/net`并对其进行解析。

例如，TCP 连接列在`/proc/net/tcp`

```
head /proc/net/tcp 
```

会显示这样的东西

```
 sl  local_address rem_address   st tx_queue rx_queue tr tm->when retrnsmt   uid  timeout inode                                                     
   0: 00000000:0007 00000000:0000 0A 00000000:00000000 00:00000000 00000000     0        0 38148735 1 0000000000000000 100 0 0 10 -1                 
   1: 00000000:1F48 00000000:0000 0A 00000000:00000000 00:00000000 00000000   116        0 38923158 1 0000000000000000 100 0 0 10 -1                 
   2: 00000000:0CEA 00000000:0000 0A 00000000:00000000 00:00000000 00000000   120        0 12364094 1 0000000000000000 100 0 0 10 -1                 
   3: 0100007F:13AD 00000000:0000 0A 00000000:00000000 00:00000000 00000000  1000        0 26454267 1 0000000000000000 100 0 0 10 -1                 
   4: 0100007F:008F 00000000:0000 0A 00000000:00000000 00:00000000 00000000     0        0 5570 1 0000000000000000 100 0 0 10 -1                     
   5: 00000000:0050 00000000:0000 0A 00000000:00000000 00:00000000 00000000     0        0 27328173 1 0000000000000000 100 0 0 10 -1                 
   6: 0100007F:1913 00000000:0000 0A 00000000:00000000 00:00000000 00000000   116        0 38923868 1 0000000000000000 100 0 0 10 -1                 
   7: 00000000:0016 00000000:0000 0A 00000000:00000000 00:00000000 00000000     0        0 18983193 1 0000000000000000 100 0 0 10 -1                 
   8: 0100007F:0277 00000000:0000 0A 00000000:00000000 00:00000000 00000000     0        0 38681424 1 0000000000000000 100 0 0 10 -1 
```

然后，您可以拆分线路，查找打开的连接并采取相应措施。查看`netstat`更多信息的来源。

# ruby-on-rails - 将类添加到 link_to_unless 不起作用

> ID：14910704
> 
> 赞同：0
> 
> 时间：2013-02-16T13:13:58.910
> 
> 标签：ruby-on-rails

我已经对此进行了搜索并看到了解决方案，但是我正在做的事情不起作用。我有一个导航文件，我正在使用“link_to_unless”来让我的链接成为链接或只是文本。我正在尝试向我的 link_to_unless 行添加一个类，但它不起作用。我已将我的课程添加到其他区域以对其进行测试并且它有效。所以，我倾向于认为这是我的link_to_unless。

我试过了：

```
<%= link_to_unless(request.env['REQUEST_URI'] =~ /customers\/create/, "Add", :controller => 'customers', :action => 'new', :class => "navs-sub") %> 
```

并带有花括号：

```
<%= link_to_unless(request.env['REQUEST_URI'] =~ /customers\/create/, "Add", :controller => 'customers', :action => 'new', {:class => "navs-sub"}) %> 
```

添加花括号会给我一个语法错误（部分显示）。它指向以下行末尾的右括号之间的空格：

```
syntax error, unexpected ')', expecting tASSOC... 'new', {:class => "navs-sub"}) );@output_buffer.safe_concat... 
```

我的CSS：

```
.navs-sub {
  text-indent15px;
  background-color:#eee;
  font-weight:bold;
} 
```

谢谢你的帮助。--jc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:19:34.217

尝试这个：

```
 <%= link_to_unless((request.env['REQUEST_URI'] =~ /customers\/create/), "Add",{ :controller => 'customers', :action => 'new'}, {:class => "navs-sub"}) %> 
```

# python - 默认 django auth 架构不会在用户和组之间创建引用

> ID：14910705
> 
> 赞同：0
> 
> 时间：2013-02-16T13:14:01.577
> 
> 标签：python, django, sqlite, database-design, django-models

我正在使用[官方教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)学习 django 。

我已将 settings.py 配置为使用 SQLite，然后运行`python manage.py syncdb`​​. `auth_user`生成了以下架构，查看架构后发现表的`id`列和`auth_user_groups`表的列之间没有引用`user_id`。但是，表的列和表的列之间*确实*存在引用。`auth_group``id``auth_user_groups``group_id`

为什么 auth_user 表和 auth_group 表之间没有引用？

```
--..OTHER TABLES
    CREATE TABLE "auth_user" (
        "id" integer NOT NULL PRIMARY KEY,
        "username" varchar(30) NOT NULL UNIQUE,
        "first_name" varchar(30) NOT NULL,
        "last_name" varchar(30) NOT NULL,
        "email" varchar(75) NOT NULL,
        "password" varchar(128) NOT NULL,
        "is_staff" bool NOT NULL,
        "is_active" bool NOT NULL,
        "is_superuser" bool NOT NULL,
        "last_login" datetime NOT NULL,
        "date_joined" datetime NOT NULL
    );
    CREATE TABLE "auth_user_groups" (
        "id" integer NOT NULL PRIMARY KEY,
        "user_id" integer NOT NULL, --why not "user_id" integer NOT NULL REFERENCES "auth_user" ("id") ?
        "group_id" integer NOT NULL REFERENCES "auth_group" ("id"),
        UNIQUE ("user_id", "group_id")
--...OTHER TABLES 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:21:31.953

SQLite[推荐使用`REFERENCES`syntax](http://www.sqlite.org/foreignkeys.html)，并且完整的 FOREIGN KEY 支持需要一个额外的编译指示开关。

从历史上看，SQLite 根本不支持 FOREIGN KEY 约束，当它们被添加时，它需要一个显式的 per-connection 开关来打开它以保持向后兼容性。对于 Django，使用`REFERENCES`就足够了，不会将 Django 限制为更新的版本，并且不必启用 FOREIGN KEY 支持或检测该功能是否已被编译。

# r - 在 Unix shell 中增加 R 进程的可用内存

> ID：14910706
> 
> 赞同：-3
> 
> 时间：2013-02-16T13:14:07.997
> 
> 标签：r

我在具有 16 GB RAM 的 Unix 操作系统上运行 R 进程。我正在运行一个 R 会话，其中我正在执行以下操作：

我将一个大小约为 350 MB 的 csv 文件导入到数据框中。然后我对上面创建的数据框运行一个操作，为每个唯一组选择前 n 个产品。

但是，当我检查这个 R 会话占用的内存量时，它显示大约 90%，然后会话自动被终止。我不太了解 R 在 unix 上的内存管理。因为，我的系统的操作系统有 16 GB RAM，而我的 R 会话最多可能占用 700 MB（导入的 CSV 为 350 MB，正在创建的新数据框为 350 MB），那么它怎么可能使用 90%系统的内存并被杀死。在 Unix 中分配给 R 进程的内存是否有一些默认限制？如果是，是否可以增加。任何人都可以请建议。我浏览了许多与此类似的帖子，但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T14:09:35.040

你没有说你有什么 Unix 风格，以及它是 32 位还是 64 位。这很重要。

作为第一个测试，尝试分配您认为应该拥有的内存量，例如

```
 m <- rep(NA, 0.8 * 16 * 1024 * 1024 * 1024 / 8) 
```

或者

```
 m <- matrix(NA, 0.8 * 16 * 1024 * 1024 * 1024 / 8, 1) 
```

对于 16 GB，每个元素为 8 个字节，我们要求总数的 80% 不会导致系统停机。

然后，一旦你知道你可以获得多少记忆，就按照丹尼尔的建议去做，并仔细考虑你的方法，以了解它们会占用多少。

# javascript - sdk/pageload-require 未定义

> ID：14910709
> 
> 赞同：1
> 
> 时间：2013-02-16T13:14:12.553
> 
> 标签：javascript, firefox, sdk, pageload

我有 SDK 1.13，我想使用 pageload API 在 Firefox 浏览器中加载 html 表单时发出警报消息。但我在控制台上遇到错误：未定义要求。我已将 SDK 添加的 cfx 文件链接到文件系统目录：

```
ln -s PATH_TO_SDK/bin/cfx ~/bin/cfx 
```

尽管如此，我还是无法解决这个错误。这是我的代码（包含在 XUL 文件中）：

```
var pageMod = require("sdk/page-mod");
    pageMod.PageMod({
    include: "*.html",
    contentScript: 'window.alert("Page matches ruleset");'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-18T22:02:58.043

我假设您在尝试 cfx 运行之前已经安装了 SDK 并在您的扩展程序中运行了 bin\activate，对吗？

你不能从 XUL 文件中运行这些东西，这就是为什么 require... 不能工作的原因。所有这些都需要在 main.js 中（在 lib 文件夹中）。您需要通过您将编写的内容脚本（在数据文件夹中）进行通信。当 html 加载时（我会从内容脚本中添加一个 window.listener 或其他内容），您将使用 port.emit("loaded") 或类似的内容，然后您必须在 main.js 中使用某些内容进行监听像 addon.port("loaded",somefunction)。有很多关于这方面的好文档！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T21:39:59.100

XUL 文件与 SDK 模块完全相反。[SDK 和 XUL 比较](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/sdk-vs-xul.html)。

# java - Java EE 6 - 作为有状态会话 bean 的有状态 REST

> ID：14910710
> 
> 赞同：3
> 
> 时间：2013-02-16T13:14:23.723
> 
> 标签：java, web-services, rest, jakarta-ee, web-applications

我正在创建需要有状态的 REST Web 服务。考虑以下情况：

1.  Web 服务执行困难且耗时的计算并返回非常大的结果。所以这个服务只返回一些结果，整个结果以有状态 bean 的形式保存在服务器上。
2.  当结果存在时。客户可以要求现有结果的子集。

我正在尝试通过`@Stateful`会话 bean 执行此操作，但它仍然像`@Stateless`. 现在我想知道这是否可能，因为客户端不接受任何 Cookie，因此服务器无法识别它。

是否可以通过 REST 访问有状态 bean？

代码示例：

```
@Path("/similarity/")
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
@Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
@Stateful
@StatefulTimeout(600000) // 10 minutes
public class SimilarityResource {

    private List<SimilarityResult> savedSimilarityResults = new ArrayList<SimilarityResult>();

    @POST
    @Path("/atom-count/")
    public List<SimilarityResult> atomCountSimilarity(JAXBElement<SimilarityRequestXML> sr) {

        try {
            if (this.savedSimilarityResults.isEmpty()) {

                List<SimilarityResult> similarityResults = acs.findAllSimilar(); // Time consuming

                this.savedSimilarityResults = similarityResults; // Save results
                return similarityResults;
            } else {
                CompoundResponse cr = new CompoundResponse("Hureeey stateful bean works!.", 404);
                throw new WebApplicationException(cr.buildResponse());
            }

        } catch (CompoundSearchException e) {
            CompoundResponse cr = new CompoundResponse(500, e);
            throw new WebApplicationException(cr.buildResponse());
        }
    }

} 
```

我期望的是，当我`/atom-count/`两次调用此方法时，它应该以 404 响应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T13:49:10.393

您应该使用注释您的资源类，`@SessionScoped`以便告诉 JAX-RS 创建具有会话生命周期的请求对象，否则默认为`@RequestScoped`.

# ios - iOS的自定义颜色选择器

> ID：14910713
> 
> 赞同：1
> 
> 时间：2013-02-16T13:14:35.940
> 
> 标签：ios, objective-c, cocoa-touch, colors, color-picker

我一直在为 iPad/iPhone 寻找颜色选择器。我检查了 cocoacontrols 的所有内容，但没有一个符合我的要求。我不喜欢占据整个 iPhone 屏幕的色轮或任何控件。我需要类似的东西，

![在此处输入图像描述](../Images/2d28d49c46db1194861e75c3c74ff24c.png)

我发现[这篇文章](http://icrglabs.wordpress.com/2011/09/20/color-picker-for-iphoneipad/)非常有用。

但它是一个基于 PNG 图像的颜色选择器。我需要更准确的选择器。有没有类似的开源控件？如果不是，我想自己编写一个自定义选择器，但有人可以指出我应该从哪里开始的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T13:24:43.803

只写你自己的。这是一个非常简单的控制。

子类[`UIControl`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html)。
实现 drawRect: 绘制[颜色渐变](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_shadings/dq_shadings.html#//apple_ref/doc/uid/TP30001066-CH207-TPXREF101)。
添加[`UIPanGestureRecognizer`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIPanGestureRecognizer_Class/Reference/Reference.html)或实现[触摸处理](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/multitouch_background/multitouch_background.html#//apple_ref/doc/uid/TP40009541-CH5-SW9)方法。每当所选颜色发生变化时
调用。`[self sendActionsForControlEvents:UIControlEventValueChanged];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-06T15:38:40.333

[SwiftColorPicker](https://github.com/MrMatthias/SwiftColorPicker)有一个 HuePicker 控件，您可以使用它来获取色调值并构造颜色

```
UIColor(hue: picker.h, saturation: 1, brightness: 1, alpha: 1) 
```

# jquery - 获取更改时输入文本的值

> ID：14910715
> 
> 赞同：3
> 
> 时间：2013-02-16T13:14:41.323
> 
> 标签：jquery, input, color-picker

我有这个带有 jquery colorpicker 的代码，onchange input #color 以十六进制显示输入值；我该怎么做才能获得更改时的颜色值？

```
<body>
<div id="red"></div>
<div id="green"></div>
<div id="blue"></div>
<div id="swatch" class="ui-widget-content ui-corner-all"></div>
<input type="text" id="color"> 
```

脚本：refreshSwatch 是一个获取滑块颜色值的函数，它可以工作；

```
 function refreshSwatch(evt, ui) {
    var red = $("#red").slider("value"),
            green = $("#green").slider("option", "value"),
            blue = $("#blue").slider("value"),
            hex = hexFromRGB(red, green, blue);
    $("#swatch").css("background-color", "#" + hex);
    $("#color").val("#" + hex);
} 
```

我想在更改时获取颜色输入值，然后更改背景颜色，但它不起作用：

```
 $(document).ready(function () {
    $("#color").change(function(){
        $("body").css("background-color", $("#color").val());
    });
}) 
```

[http://jsbin.com/alefok/18/edit](http://jsbin.com/alefok/18/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:27:04.347

试试这个它对你有用

```
function refreshSwatch(evt, ui) {
    var red = $("#red").slider("value"),
            green = $("#green").slider("option", "value"),
            blue = $("#blue").slider("value"),
            hex = hexFromRGB(red, green, blue);
    $("#swatch").css("background-color", "#" + hex);
    $("#color").val("#" + hex);
    $("body").css("background-color", $("#colour").val());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:23:54.047

在您的链接中：

[http://jsbin.com/alefok/18/edit](http://jsbin.com/alefok/18/edit)

您的 HTML 中有错字：

```
<input type="text" id="colour"> 
```

但是您正在使用选择器`$("#color")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T13:55:26.327

## 查看工作箱：http: [//jsbin.com/alefok/34/edit](http://jsbin.com/alefok/34/edit)

改变了两件事：

`$("#colour").val("#" + hex).change();`在这个函数中：`function refreshSwatch(){}`

```
 //--^^^^^^^^^-------triggered the change above here. 
```

和这里 ：

```
$("#colour").change(function(){
     $("body").css("background", $("#colour").val());
}).change(); //<-----trigger the change here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T13:20:26.073

当您在回调范围内时，您可以使用`this`来引用有问题的项目。这主要是一个建议，你的代码工作得很好。[您提供的jsbin](http://jsbin.com/alefok/18/edit)示例中的主要问题是“颜色”（或“颜色”）这个词的拼写方式存在差异。

HTML

```
<input type="text" id="color"> 
```

JS

```
$(document).ready(function () {
    $("#color").change(function(){
        $("body").css("background-color", $(this).val());
    });
}); 
```

[jsbin](http://jsbin.com/alefok/25/edit)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T13:21:02.763

试试这个编辑

```
function hexFromRGB(r, g, b) {
        var hex = [
            r.toString( 16 ),
            g.toString( 16 ),
            b.toString( 16 )
        ];
        $.each( hex, function( nr, val ) {
            if ( val.length === 1 ) {
                hex[ nr ] = "0" + val;
            }
        });
        return hex.join( "" ).toUpperCase();
    }
    function refreshSwatch(evt, ui) {

        var red = $( "#red" ).slider( "value" ),
                green = $( "#green" ).slider( "option", "value" ),
                blue = $( "#blue" ).slider( "value" ),
                hex = hexFromRGB( red, green, blue );

        $( "body" ).css( "background-color", "#" + hex );   //Here give body not div
        $("#colour").val("#" + hex);
    }
    $(function() {
        $( "#red, #green, #blue" ).slider({
            orientation: "horizontal",
            range: "min",
            max: 255,
            value: 127,
            slide: refreshSwatch,
            change: refreshSwatch
        });
        $( "#red" ).slider( "value", 255 );
        $( "#green" ).slider( "value", 140 );
        $( "#blue" ).slider( "value", 60 );
    });
}); 
```

# red5 - appDisconnect 在 roomdisconnect 中的代码在 RED5 中执行之前执行

> ID：14910716
> 
> 赞同：0
> 
> 时间：2013-02-16T13:14:41.947
> 
> 标签：red5

我在 red5 应用程序中同时覆盖了 roomDisconnect 和 appDiconnect。

窗体 roomDiconnect ，调用了一个 no:of 函数。在运行应用程序时，在完成这些函数的执行之前，appDisconnect 被调用。

无论如何要延迟 appDisconnect 通话吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:43:38.407

不，

你不能改变 Red5 API 的行为。只需使用 roomDisconnect 或 appDisconnect 但不能同时使用。

根据我的经验，appDisconnect 更可靠。但是使用最新版本的 Red5 roomDisconnect 也可能是可靠的。

塞巴斯蒂安

# jquery - jQuery 插件只能通过 jQuery.fn.myPlugin() 而不是 jQuery.myPlugin() 访问？

> ID：14910720
> 
> 赞同：1
> 
> 时间：2013-02-16T13:15:09.237
> 
> 标签：jquery, plugins

我有这么简单的代码：

```
(function($) {
    $.fn.flyInModal = function() {
        alert('fly in?');
    };
})(jQuery); 
```

我可以通过做从控制台访问它`jQuery.fn.flyInModal()`，但如果我尝试`jQuery.flyInModal()`它只会返回：

```
TypeError: Object function (e,t){return new v.fn.init(e,t,n)} has no method 'flyInModal' 
```

*编辑：* `jQuery.prototype.flyInModal()`也有效。

通读[文档](http://docs.jquery.com/Plugins/Authoring)我应该能够以这种方式访问​​它。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:20:35.887

扩展添加的jQuery插件`$.fn`，适用于jQuery对象。那是，

```
$("#selector").flyInModal(); 
```

这适用`flyInModal`于匹配元素的集合。

一个普遍可用的 jQuery 函数是通过扩展来定义的`$`。那是，

```
$.flyInModal(); 
```

就您而言，您对前者感兴趣。

# php - 无法让 $_SESSION 工作

> ID：14910722
> 
> 赞同：0
> 
> 时间：2013-02-16T13:15:20.947
> 
> 标签：php, session, login, web

我正在制作这个登录系统，但我的网站不会看到我`$_SESSION`在另一个页面上输入的值。

在我的标题代码（包含在每一页上）中，我得到了：

```
<?php
     session_start(); 
?> 
```

和我的登录处理：

```
<?php

include("header.php");

$myusername= $_POST['naam2']; 
$mypassword= $_POST['wachtwoord']; 

$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql = "SELECT * FROM winkel WHERE naam='$myusername' AND BINARY wachtwoord ='$mypassword'";
$result = mysql_query($sql);
$count = mysql_num_rows($result);

if ($count == 1) {
    session_register($myusername);
    $inf = mysql_fetch_array($result);
    $_SESSION['winkelinfo'] = $inf;
    header("Location: mijntreinwinkeltje.php");
}
else {
    header("location:login.php?err=1");
}

?> 
```

然后，当我填写正确的凭据时，它会重定向到**mijntreinwinkeltje.php 。**然后在**mijntreinwinkeltje.php**我放：

```
<?php
    include("header.php");
    $winkelinfo = $_SESSION['winkelinfo'];
    if ($winkelinfo)
        echo("derp".$winkelinfo['naam']);
    $voornaam = $winkelinfo['gebruikervoornaam'];
    $achternaam = $winkelinfo['gebruikerachternaam'];

?> 
```

但它不会打印`echo("derp".$winkelinfo['naam']);` ，`$voornaam`并且`$achternaam`都是空的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:39:33.320

嗨，我认为主要问题是必须首先执行页面第一页才能设置会话。否则下一页将没有会话。

例如第一页是

```
<?php
session_start();
$_SESSION['userName'] = 'Root';

?> 
```

和第二页

```
<?php
session_start();
if(isset($_SESSION['userName'])) {
  echo "Your session is running " . $_SESSION['userName'];
}
?> 
```

如果您直接加载第二页，它将无法工作，因为尚未设置会话。首先执行第一页，然后执行第二页，不要使用`session_register()`

在我看来，使用 cookie 是因为它更广泛地用于无状态会话。

# c# - 随机对象中的随机数如何工作？

> ID：14910724
> 
> 赞同：3
> 
> 时间：2013-02-16T13:15:30.613
> 
> 标签：c#, object, random

如果我有这个：（我已经声明了变量）

```
random1 = new Random();
Console.WriteLine(random1.Next(1, 100));
Console.WriteLine(random1.Next(1, 100)); 
```

当我拥有它时，每次我调用console.writeline时它都会生成一个不同的数字，所以这会生成ex。10, 55 如果你再做一次 20,60 所以基本上每次都是随机数，很好。但是当我添加这个时：

```
random2 = new Random();
Console.WriteLine(random1.Next(1, 100));
Console.WriteLine(random1.Next(1, 100));
Console.WriteLine(random2.Next(1, 100));
Console.WriteLine(random2.Next(1, 100)); 
```

Random1 将生成与随机相同的数字！所以它会是前。5,54,5,54，如果我再做一次 70,34,70,34。但它的 random2 是一个新对象，为什么它会生成与 random1 相同的数字？

另一个例子：如果我有这样的课

```
 class RandomNumber
    {
        Random random = new Random();
        public int getrandomnumber { get { return random.Next(1, 5); } }
    } 
```

这样做之后

```
randomnumberobject = new RandomNumber();
randomnumberobject2 = new RandomNumber();
Console.WriteLine(randomnumberobject.getrandomnumber);
Console.WriteLine(randomnumberobject2.getrandomnumber); 
```

它们会生成一个随机数，但它们都会生成完全相同的随机数。所以第一次我会得到这个 5,5 第二次这个 3,3 等等。但是如果我把课程改成这个

```
class RandomNumber
    {
        Random random;
        public int getrandomnumber { get { return random.Next(1, 5); } }
        public RandomNumber(Random random) { this.random = random; }
    } 
```

而是这样做

```
 random = new Random();
   randomnumberobject = new RandomNumber(random);
   randomnumberobject2 = new RandomNumber(random);
   Console.WriteLine(randomnumberobject.getrandomnumber);
   Console.WriteLine(randomnumberobject2.getrandomnumber); 
```

突然，它们都生成了不同的随机数！那么为什么会这样呢？什么原因？请记住，我仍然是一个初学者。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T13:21:18.237

您看到的是“设计使然” - 即它的发生是因为类的实现方式......它使用的算法需要一个“种子”（一种起始状态），在这种情况下它基于时钟......如[MSDN](http://msdn.microsoft.com/en-us/library/system.random.aspx)上所述：

> 随机数生成从种子值开始。如果重复使用相同的种子，则会生成相同的数字序列。产生不同序列的一种方法是使种子值与时间相关，从而为每个新的 Random 实例产生不同的序列。默认情况下，Random 类的无参构造函数使用系统时钟生成其种子值，而其有参构造函数可以根据当前时间的刻度数取一个 Int32 值。但是，由于时钟的分辨率有限，因此使用无参数构造函数以紧密连续的方式创建不同的 Random 对象会创建生成相同随机数序列的随机数生成器。

这基本上意味着，如果`Random`使用无参数构造函数几乎同时创建两个对象，它们将产生相同的随机数序列，因为它们已基于时钟使用相同的“起始状态”进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:23:30.123

在大多数编程语言中，随机数生成基于种子值。该种子通常取自当前时间值。因此，如果您声明两个彼此靠近的 Random 对象，它们很可能会从 CLR 获得相同的种子。这就是为什么他们会产生相同的数字。

当您使用相同的实例时，前两个数字已经来自随机序列，因此接下来的两个数字将不一样。

在这种情况下使用显式种子（使用 int 值重载的 Random 的构造函数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T13:23:32.500

因为您在上一个示例中每次都重新播种，所以如果您不重新播种随机对象，每次都会从同一个随机数池中提取。

```
 var random1 = new Random(DateTime.Now.Millisecond);
        Console.WriteLine(random1.Next(1, 100));
        Console.WriteLine(random1.Next(1, 100));
        Console.WriteLine(random1.Next(1, 100));
        Console.WriteLine(random1.Next(1, 100));

        var random2 = new Random(DateTime.Now.Millisecond);
        Console.WriteLine(random2.Next(1, 100));
        Console.WriteLine(random2.Next(1, 100)); 
```

# php - PrestaShop 产品组合

> ID：14910726
> 
> 赞同：0
> 
> 时间：2013-02-16T13:15:38.593
> 
> 标签：php, prestashop

有没有办法用**类别**而不是属性创建**产品“组合” ？**从后端还是以编程方式？

 **我有一个葡萄酒数据库，同一瓶酒可以按两个不同的“类别”出售，但价格可能会有所不同。

葡萄酒卖家将存储为“类别”以满足我网站的需求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:02:53.733

最简单的方法是保持基于属性的组合，并使用[分层块](http://doc.prestashop.com/display/PS15/Making+The+Native+Modules+Work#MakingTheNativeModulesWork-Layerednavigationblock)而不是类别块。您还可以使用您的葡萄酒卖家属性创建自定义类别块。

我不鼓励您修改组合逻辑，它太复杂并且不会更新证明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:59:56.977

Depending on what you are trying to do, you can customize the view and pricing by customer groups. To give you the best advice I would need to know what exactly you are trying to accomplish on the front end.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-25T20:19:08.530

[类别产品组合](http://masterpro.ws/category-product-combinations-prestashop-module)。免费的 prestashop 模块。也许这会有所帮助。))**

# android - 在android中将整个字符串转换为整数值

> ID：14910731
> 
> 赞同：0
> 
> 时间：2013-02-16T13:16:04.657
> 
> 标签：android, string, format, decimal

将整个字符串转换为整数时遇到问题。当我在 edittext "Hello" 中写入时，当我按下按钮然后在其他 edittext 中时，它应该向我显示 72 101 108 108 111 。请帮我...

我的 .xml 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"

        android:layout_marginRight="22dp"
        android:layout_marginTop="20dp"
        android:ems="10"
        android:hint="@string/Message" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/editText1"

        android:text="@string/Decimal" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/button1"
        android:layout_marginTop="30dp"

        android:ems="10" 

        android:hint="@string/Decimal"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:21:04.000

您必须将每个字符从输入的字符串转换为 int。下面的示例代码可能会对您有所帮助：

```
String str = "Hello";
String strInt = "";
for(int i=0;i<str.length();i++){
  char c = str.charAt(i);
  strInt += (int)c + " ";
}
System.out.println(strInt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:21:18.957

好吧，只需将字符转换为 int 即可获得 ascii 值。

```
StringBuilder stringToAppendInts = new StringBuilder();
StringBuilder stringToAppendHexs = new StringBuilder();

for(char item : myString.toCharArray()){
   stringToAppendHexs.append(Integer.toHexString((int)item) +" ");
   stringToAppendInts.append( (int)item+" ");
}

edittext.setText(stringToAppendInts.toString());
edittext.setText(stringToAppendHexs.toString()); 
```

# android - Android 4 覆盖/替换/隐藏软按钮

> ID：14910733
> 
> 赞同：1
> 
> 时间：2013-02-16T13:16:17.280
> 
> 标签：android

我目前正在为盲人开发一个应用程序。我需要的是防止用户意外离开我的应用程序，所以我试图在 Android 4 中覆盖/替换/隐藏软按钮。我知道这一定是可能的，因为它例如在[MXPlayer](https://play.google.com/store/apps/details?id=com.mxtech.videoplayer.ad)中使用（你可以“播放视频时锁定”屏幕）。

我试图覆盖所有三个按钮（返回、主页、最近的应用程序）。回家和回家没问题，但我不知道如何覆盖（禁用）最近的应用程序。我已经尝试过[这里](https://stackoverflow.com/questions/14511494/to-disable-or-hide-recent-apps-and-settings-menu/14619789)描述的解决方案但没有成功。

下一个想法是覆盖整个屏幕。我已经成功创建了这个[问题](https://stackoverflow.com/questions/14695283/system-overlay-android-4-0)中提到的系统覆盖，但我没有找到如何覆盖我的软按钮。

你知道如何在不root手机和使用自定义ROM的情况下解决这个问题吗？

编辑：我还尝试使用 SYSTEM_UI_FLAG_LOW_PROFILE（将按钮变成点）和 SYSTEM_UI_FLAG_HIDE_NAVIGATION（隐藏按钮直到下一次触摸）隐藏按钮。不幸的是，这也不能解决我的问题，因为触摸按钮照常工作。也许有一种方法可以捕捉“取消隐藏”再次显示它们的覆盖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T13:21:20.280

来自[Android 文档](http://developer.android.com/about/versions/android-4.0.html)：

SYSTEM_UI_FLAG_LOW_PROFILE 标志替换了 STATUS_BAR_HIDDEN 标志。设置后，此标志为系统栏或导航栏启用“低调”模式。导航按钮变暗，系统栏中的其他元素也隐藏。启用此功能对于创建更具沉浸感的游戏很有用，而不会分散系统导航按钮的注意力。

SYSTEM_UI_FLAG_VISIBLE 标志替换 STATUS_BAR_VISIBLE 标志以请求系统栏或导航栏可见。

SYSTEM_UI_FLAG_HIDE_NAVIGATION 是一个请求导航栏完全隐藏的新标志。请注意，这仅适用于某些手机使用的导航栏（它不会隐藏平板电脑上的系统栏）。一旦系统接收到用户输入，导航栏就会返回视图。因此，此模式主要用于视频播放或其他需要整个屏幕但不需要用户输入的情况。

# c# - Outlook 2010 窗体区域取消按钮事件

> ID：14910739
> 
> 赞同：0
> 
> 时间：2013-02-16T13:16:53.910
> 
> 标签：c#, visual-studio-2012, vsto, outlook-addin

我确信这是一个非常简单的问题，因为我是 VSTO 的新手。我开发了一个 Outlook 2010 单独的表单区域，它在功能区栏上有自己的按钮。一切都很好，除了我一生无法弄清楚如何在表单区域上实现取消按钮。我花了几个小时寻找代码示例，但找不到。我想要的只是取消按钮以关闭表单区域，但我无法弄清楚如何连接按钮来执行此操作。

问候马丁线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:17:30.450

```
foreach (Microsoft.Office.Tools.Outlook.IFormRegion formRegion in Globals.FormRegions)
{
    if (formRegion is FormRegion1)
    {
        FormRegion1 formRegion1 = (FormRegion1)formRegion;
        formRegion1.OutlookFormRegion.Visible = false;
    }
} 
```

# php - 数组到字符串到数组的转换

> ID：14910746
> 
> 赞同：8
> 
> 时间：2013-02-16T13:17:32.640
> 
> 标签：php, mysql, arrays, string, laravel-3

我有一个数组，我将其作为字符串存储在数据库中，以便更容易检索（通过 cron 每 15-30 分钟用新数据刷新一次）。

```
'player_list' -> 'Bob,Dave,Jane,Gordy'
'plugin_list' -> 'Plugin-A 1.4, Plugin-B 2.1, Plugin-C 0.2' 
```

我最初使用以下方法将数组作为字符串存储到数据库中：

```
 $players = $liveInfo['players'] ? implode(",", $liveInfo['players']) : '';

 $plugins = $liveInfo['plugins'] ? implode(",", $liveInfo['plugins']) : ''; 
```

我目前正在使用以下内容进行检索，然后将字符串转换回数组以准备 foreach：

```
 $players = $server_live->player_list;
 $playersArray = explode(",", $players);
 $plugins = $server_live->plugin_list;
 $pluginsArray = explode(",", $plugins); 
```

出于某种原因，我收到以下错误：`Array to string conversion` 我不明白这个错误，因为我从 String 转到 Array 并且我查看了一下`php.net/manual`，它看起来很好？...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-16T13:28:02.347

如果您需要从 Object 转换为 String 以及从 String 转换为 Object，那么您需要做的就是序列化，并且您的对象应该支持它。

在您的情况下，使用数组，支持序列化。

数组转字符串

```
$strFromArr = serialize($Arr); 
```

字符串到数组

```
$Arr = unserialize($strFromArr); 
```

有关更多信息，请考虑查看 php.net 网站：[serialize](http://php.net/serialize) [unserialize](http://php.net/unserialize)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T13:28:23.100

如果您必须按照自己的方式进行操作，请将数组存储在数据库中，请使用该`serialize()`函数。这很棒！

[http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

`$string = serialize($array);`

`$array = unserialize($string);`

# c# - 以下方法或属性 C# 之间的调用不明确

> ID：14910747
> 
> 赞同：6
> 
> 时间：2013-02-16T13:17:32.693
> 
> 标签：c#, monodevelop, ambiguous

在编译我的程序时（我从 MonoDevelop IDE 编译它）我收到一个错误：

> 错误 CS0121：以下方法或属性之间的调用不明确： `System.Threading.Thread.Thread(System.Threading.ThreadStart)' and` System.Threading.Thread.Thread(System.Threading.ParameterizedThreadStart)' (CS0121)

这里是代码的一部分。

```
Thread thread = new Thread(delegate {
    try
    {
        Helper.CopyFolder(from, to);
        Helper.RunProgram("chown", "-R www-data:www-data " + to);
    }
    catch (Exception exception)
    {
        Helper.DeactivateThread(Thread.CurrentThread.Name);
    }
    Helper.DeactivateThread(Thread.CurrentThread.Name);
});
thread.IsBackground = true;
thread.Priority = ThreadPriority.Lowest;
thread.Name = name;
thread.Start(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T13:23:48.240

`delegate { ... }`是一个匿名方法，可以分配给**任何**委托类型，包括`ThreadStart`and `ParameterizedThreadStart`。由于 Thread 类提供了具有两种参数类型的构造函数重载，因此构造函数重载的含义是模棱两可的。

`delegate() { ... }`（注意括号）是一个不带参数的匿名方法。它只能分配给不带参数**的**委托类型，例如`Action`or `ThreadStart`。

因此，将您的代码更改为

```
Thread thread = new Thread(delegate() { 
```

如果你想使用`ThreadStart`构造函数重载，或者

```
Thread thread = new Thread(delegate(object state) { 
```

如果你想使用`ParameterizedThreadStart`构造函数重载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T13:21:12.297

当您有一个具有重载的方法并且您的用法可以与任一重载一起使用时，将引发此错误。编译器不确定您要调用哪个重载，因此您需要通过强制转换参数来显式声明它。一种方法是这样的：

```
Thread thread = new Thread((ThreadStart)delegate {
    try
    {
        Helper.CopyFolder(from, to);
        Helper.RunProgram("chown", "-R www-data:www-data " + to);
    }
    catch (Exception exception)
    {
        Helper.DeactivateThread(Thread.CurrentThread.Name);
    }
    Helper.DeactivateThread(Thread.CurrentThread.Name);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T13:22:33.920

或者，您可以使用 lambda：

```
Thread thread = new Thread(() =>
{
    try
    {
        Helper.CopyFolder(from, to);
        Helper.RunProgram("chown", "-R www-data:www-data " + to);
    }
    catch (Exception exception)
    {
        Helper.DeactivateThread(Thread.CurrentThread.Name);
    }
    Helper.DeactivateThread(Thread.CurrentThread.Name);
});

thread.IsBackground = true;
thread.Priority = ThreadPriority.Lowest;
thread.Name = name;
thread.Start(); 
```

# c++ - wxImage 并绘制原始 rgb 字节

> ID：14910748
> 
> 赞同：0
> 
> 时间：2013-02-16T13:17:38.497
> 
> 标签：c++, drawing, wxwidgets

我正在将图像查看器编程为学校任务，我不能使用任何库来阅读或处理图像。首先，我从 bmp 格式开始。我创建了用于处理此类文件的类。作为 GUI 框架，我正在使用 wxWidgets。

所以我有普通的 rgb 字节数组，为 wxImage 构造函数准备

```
wxImage(int width, int height, unsigned char* data, bool static_data = false). 
```

问题是当我将它转换为 wxBitmap 并绘制到 dc 时，它忽略了 rgb 值，只绘制黑色图片。我真的不知道可能是什么问题。这是我绘制图像的代码：

```
DrawImage(wxDC &dc)
{
  BYTE *rgbArray = bmpFile->GetRGB();
  wxSize imageSize = wxSize(bmpFile->GetSize().w,bmpFile->GetSize().h);
  wxImage image = wxImage(imageSize, &rgbArray);
  wxBitmap bitmap = wxBitmap(image);
  dc.DrawBitmap(bitmap,5,5, false);
} 
```

这是在绘画活动中：

```
void OnPaint(wxPaintEvent& event)
{
   wxAutoBufferedPaintDC dc(canvas);
   dc.SetBackground( wxBrush(canvas->GetBackgroundColour()));
   dc.Clear();
   DrawImage(dc);
} 
```

rgbArray 填充了正确的值，我检查了多次。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:23:16.500

那是因为您可能正在调用此函数，因为您正在传递一个 BYTE**。

```
wxImage (const wxSize &sz, bool clear=true) 
```

调用另一个重载，删除 & 可能会有所帮助

```
wxImage image = wxImage(imageSize, rgbArray); 
```

为了使代码异常安全，必须稍微重写它。我不知道 bmpFile 是返回一个新缓冲区还是指向它自己的数据缓冲区的指针。如果它没有返回新的缓冲区，那么您必须制作自己的副本，因为 wxImage 拥有缓冲区的所有权。见[wxImage](http://docs.wxwidgets.org/trunk/classwx_image.html)

```
DrawImage(wxDC &dc)
{
  wxSize imageSize = wxSize(bmpFile->GetSize().w,bmpFile->GetSize().h);
  wxImage image = wxImage(imageSize, bmpFile->GetRGB() );
  wxBitmap bitmap = wxBitmap(image);
  dc.DrawBitmap(bitmap,5,5, false);
} 
```

或者

```
DrawImage(wxDC &dc)
{
  std::unique_ptr<BYTE> rgbData( bmpFile->GetRGB() );
  wxSize imageSize = wxSize(bmpFile->GetSize().w,bmpFile->GetSize().h);
  wxImage image = wxImage(imageSize, rgbData.release()) );
  wxBitmap bitmap = wxBitmap(image);
  dc.DrawBitmap(bitmap,5,5, false);
} 
```

# javascript - io.connect 在PhoneGap 中不起作用

> ID：14910750
> 
> 赞同：-1
> 
> 时间：2013-02-16T13:18:06.367
> 
> 标签：javascript, ios, cordova, socket.io

我正在开发一个使用 socket.IO 的聊天应用程序。我的服务器在我的电脑客户端上运行良好，但似乎无法在我的 phonegap 应用程序上运行。我已经包含了 socket.io.js 文件，并且我的服务器正在记录 js 文件已被提供，但是一旦我尝试使用该`io.connect`功能，它就无法正常工作。这是我的代码：

```
document.addEventListener("deviceready", function(){
   var socket = io.connect("http:/54.235.126.109:2352");
}, false); 
```

它只是没有连接到服务器，我的服务器日志没有显示连接，它只记录了 javascript 文件已被提供。
谢谢，
@_C1D
**编辑：**
发现问题。我忘了在 http 中添加一个额外的斜杠。它的固定:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:35:07.003

我发现了问题。我忘了在 http 中添加一个额外的斜杠。它的固定:)

# c# - 为什么当我尝试在编辑器中打开 C# 类时 VS 会崩溃（抽象继承问题？）

> ID：14910755
> 
> 赞同：0
> 
> 时间：2013-02-16T13:18:53.427
> 
> 标签：c#

我收到一个奇怪的错误，它导致 VS 崩溃，据我所知，这是因为 VS 试图实例化类（它正在继承一个接口和抽象类）我即将打开为在后台运行代码并尝试我添加的代码或任何更改。

该图标不像解决方案资源管理器中的常规类图标，但它看起来像表单图标，一旦我删除继承，它就会进入常规类图标，我可以复制它并且 VS 不会崩溃而是打开编辑器中的类。

课程：

```
namespace Tester
{
   interface ITest
   {

      string ID { get; set; }

      double age { get; set; }        

   }
} 
```

下一个：

```
namespace Tester
{
public abstract class Trial : ITest
{
    //Declaring variables
    string m_ID;
    double m_age;

    string ID 
    { 
        get { return m_ID; }
        set { m_ID = value; }
    }

    double age 
    {
        get { return m_age; }
        set { m_age = value; }
    }

}
} 
```

下一个是：

```
 namespace Tester
{
public class Time : Trial
{
    //Declaring variables
    private bool m_isfast;

    /// <summary>
    /// Default constructor
    /// </summary>
    public Time()
    {
    }

    public bool IsFast
    {
        get { return m_isfast; }
        set { m_isfast = value; }
    }

}
} 
```

最后一个是：

```
 namespace Tester
  {
  class BanditOne : Time
  {
        //Declaring variables
        private bool m_isTransAm;

        /// <summary>
        /// Constructor
        /// </summary>
        public BanditOne()
        {
        }

        public bool IsTransAm
        {
            get { return m_isTransAm; }
            set { m_isTransAm = value; }
        }

        new public string GetRaceSpecificData()
        {                
            string strout = (string.IsNullOrEmpty(strInfo) ? string.Empty : strInfo);

            if (IsTransAm)
            {
                strout += string.Format("\nProduces #1");
            }
            if (IsFast)
            {
                strout += (IsFast ? "\nFast as lightning! " : "\nSlow like a snail.");
            }
          return strout;

        }
        } 
```

我希望有人在我全力以赴时有所了解：/也许我对抽象类有完全误解或遗漏的东西吗？

# plsql - pl/sql 中的 ROWTYPE 定义

> ID：14910756
> 
> 赞同：0
> 
> 时间：2013-02-16T13:19:02.780
> 
> 标签：plsql, cursor, procedure, records

我已经编写了一个 PL/SQL 过程，它比较两个表之间的数据并打印差异（如果有），但扭曲的是过程的表名是动态的。这是程序

```
create or replace PROCEDURE compareTables(
tabA IN VARCHAR2, tabB IN VARCHAR2) AS
    cur_tab_name USER_TABLES%ROWTYPE;
    lv_sql varchar2(4000);
    lv_sql2 varchar2(4000);
BEGIN
--SELECT TABLE_NAME INTO cur_tab_name FROM USER_TABLES WHERE TABLE_NAME = tabA;
lv_sql2 := 'SELECT TABLE_NAME FROM USER_TABLES WHERE TABLE_NAME = :b_tabA';
EXECUTE IMMEDIATE lv_sql2 INTO cur_tab_name USING tabA;
    <<child>>
     DECLARE
         TYPE cursor_ref IS REF CURSOR;
         cur_comp_result cursor_ref;
         rec_comp_result cur_tab_name.TABLE_NAME%rowtype;
     BEGIN
          lv_sql := 'SELECT * FROM '||tabA||' MINUS SELECT * FROM '||tabB;
          OPEN cur_comp_result FOR lv_sql;
        LOOP
            FETCH cur_comp_result INTO rec_comp_result;
            EXIT WHEN cur_comp_result%NOTFOUND;
            DBMS_OUTPUT.PUT_LINE(rec_comp_result.empid || '' || rec_comp_result.name);
        END LOOP;
          CLOSE cur_comp_result;
     Exception 
        When others then 
                dbms_output.put_line('The Problem is '||sqlerrm); 

     END;
END compareTables; 
```

现在的问题是，当我编译这个程序时，我收到以下错误

```
Error at line 14: PLS-00310: with %ROWTYPE attribute, 'CUR_TAB_NAME.TABLE_NAME' must   name a table, cursor or cursor-variable 
```

第 14 行：rec_comp_result cur_tab_name.TABLE_NAME%rowtype；

我将如何解决？

*注意：我的系统中没有安装 oracle。我正在使用[Oracle Apex Online 工具](http://apex.oracle.com/)，它使用 Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 和 PL/SQL Release 11.2.0.3.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:48:20.907

作为测试，转到最后一行，在分号后按回车键。我知道 Pro*C 尤其会在文件末尾没有行终止符的情况下作呕。你可能会遇到这个问题。

在您的问题范围之外考虑

```
SELECT columns 
FROM TABLE1

MINUS

SELECT columns
FROM TABLE2 
```

和

```
SELECT columns
FROM TABLE2

MINUS

SELECT columns
FROM TABLE1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:55:52.237

Use: `cur_tab_name.table_name`. The variable `CUR_TAB_NAME`is of type `USER_TABLE%ROWTYPE`, thus it has several fields.

# java - 可能的根本原因包括 -Xss 设置过低和非法循环继承依赖项

> ID：14910757
> 
> 赞同：16
> 
> 时间：2013-02-16T13:19:18.667
> 
> 标签：java, spring, tomcat

我的应用程序很大并且使用了许多 jars 和工具。平台 - windows 2008 server, Spring , hibernate, Quarts, mysql, tomcat-7.35

当我第一次部署并启动服务器时完美运行，但如果我重新启动，我会收到以下错误

```
 SEVERE: ContainerBase.addChild: start: 
    org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/TestProject]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1114)
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1673)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
    Caused by: java.lang.IllegalStateException: Unable to complete the scan for annotations for web application [/TestProject]. Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2109)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1981)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1947)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1932)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1326)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more
    Caused by: java.lang.StackOverflowError
    at java.util.HashSet.<init>(HashSet.java:103)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2252)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)

    Feb 16, 2013 12:16:10 PM org.apache.catalina.startup.HostConfig deployDirectory
    SEVERE: Error deploying web application directory C:\apache-tomcat-7.0.35\webapps\TestProject
    java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[TestProject]]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:904)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1114)
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1673)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-16T15:35:09.870

堆栈跟踪表明，tomcat 正在扫描您的应用程序以查找基于 java 的 servlet 配置的线程上的堆栈空间不足。您可以通过三种方式解决此问题。

*   增加堆栈大小`-Xss4m`
*   如果您不使用任何基于 java 的 Servlet 配置，请告诉 Tomcat 不要扫描您的应用程序，将其添加`metadata-complete="true"`到 web.xml 中的 Web 应用程序
*   限制 tomcat 扫描的 jar 文件。见[http://tomcat.apache.org/tomcat-7.0-doc/config/jar-scanner.html](http://tomcat.apache.org/tomcat-7.0-doc/config/jar-scanner.html)

**更新 1**

您需要将 -Xss4m 传递给您的 jvm 以设置堆栈大小，-Xss10m 会将其设置为 10mb。

我在我的应用程序中也使用了带有注释的 Hibernate 和 Spring，tomcat 所做的扫描是寻找 Servlet 3.0 注释，因此您仍然可以在使用 hibernate 和 spring 注释时限制事物，因为 spring 和 hibernate 会扫描 hibernate 和 spring 注释.

如果您将 tomcat 作为 Windows 服务运行，则需要通过 procrun 传递参数，因为这是启动 jvm 的可执行文件。procrun 的文档位于[http://commons.apache.org/daemon/procrun.html](http://commons.apache.org/daemon/procrun.html)。tomcat7.exe真的是procrun.exe改名了，也就是说你所有的jvm选项都写到了registery下

> 基本服务定义在注册表项下维护：
> 
> HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\
> 
> 其他参数存储在注册表中：
> 
> HKEY_LOCAL_MACHINE\SOFTWARE\Apache Software Foundation\ProcRun 2.0\\Parameters
> 
> 在 64 位 Windows 上，procrun 始终使用 32 位注册表视图来存储配置。这意味着参数将被存储在里面：
> 
> HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Apache Software Foundation\ProcRun 2.0\

**更新 2**

Tomcat 一直在调整扫描仪在不同版本之间的工作方式。尝试通过版本 7.25、7.26 ... 等向前滚动以找到它中断的版本，查看该版本的发行说明以查看它们是否更改了扫描仪的工作方式。

您可以尝试做的另一件事是创建另一个 war 文件，该文件在您的 WEB-INF\lib 中包含所有第三方 jar，但不包含您的代码。看看你是否在启动时收到该错误，如果出现，则应向 tomcat 提交错误报告，并在 github 或其他一些免费代码托管系统上向他们提供复制问题的示例项目。我相信如果有错误他们会修复它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-23T12:34:41.000

要为 TC Server 2.9 解决此问题，运行 Tomcat 7.0.39 我限制 jar 在启动期间跳过上下文配置，使用：

```
org.apache.catalina.startup.ContextConfig.jarsToSkip=*.jar 
```

在 catalina.properties 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-14T11:43:29.877

在我的情况下，iTextpdf JAR（5.06 版本）导致问题，因为它具有依赖关系`org.bouncyCastle.*.jar`并且它正在创建循环依赖关系。

更新到`5.5.6`版本后，完美运行。如果要添加 maven 依赖项，请清理并更新 maven 项目。

```
<dependency>
            <groupId>com.itextpdf</groupId>
            <artifactId>itextpdf</artifactId>
            <version>5.5.6</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T07:50:41.743

我没有将 Tomcat 作为 Windows 服务运行，所以为了`-Xss10m`通过，我编辑了 catalina.bat，朝向底部：

```
:doJpda
if not "%SECURITY_POLICY_FILE%" == "" goto doSecurityJpda
%_EXECJAVA% %JAVA_OPTS% %CATALINA_OPTS% %JPDA_OPTS% %DEBUG_OPTS% -Djava.endorsed.dirs="%JAVA_ENDORSED_DIRS%" -Xss10m -classpath "%CLASSPATH%" -

Dcatalina.base="%CATALINA_BASE%" -Dcatalina.home="%CATALINA_HOME%" -Djava.io.tmpdir="%CATALINA_TMPDIR%" %MAINCLASS% %CMD_LINE_ARGS% %ACTION%
goto end 
```

# javascript - 切换大小写为字符串

> ID：14910760
> 
> 赞同：34
> 
> 时间：2013-02-16T13:19:36.497
> 
> 标签：javascript

```
$(document).ready(function(){

    createForm("text,password",".content");  

});

function createForm(types,object){

    typ = types.split(',');

    //var source = "";

    $.each(typ,function(){

        switch(this){

            case "text":
            console.log('text');break;
            default: console.log('default');break;
        }

    });
    //$(object).html(source);
} 
```

我在控制台中有此代码，它返回 2xdefaults。为什么？

我尝试将每种类型的输入作为文本或密码返回，但我的开关无法识别“typ”

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-16T13:25:16.613

您看到这种行为的原因是`this`调用`each`中是一个`String`对象实例，而不是字符串原语。JavaScript 两者都有。在`switch`语句中，与 case 的比较是 via `===`，而字符串*实例*不是`===`字符串*原语*。

修复它的三种方法：

1.  如果您将开关更改为：

    ```
    switch (String(this)) { 
    ```

    ...这将把它变成一个原始的，然后你的`switch`作品。

2.  正如[VisioN](https://stackoverflow.com/users/1249581/vision)在下面的评论中指出的那样，使用`$.each`传递的参数（每个字符串 - 作为原语 - 将作为第二个参数提供）：

    ```
    $.each(typ, function(index, value) {
        switch (value) {
            // ...
        }
    }); 
    ```

3.  使用[其他答案中讨论的任何替代方案](https://stackoverflow.com/questions/3943494/how-to-loop-through-array-in-jquery/3943526#3943526)（其中一个是一个很好的简单`for`循环）。

* * *

旁注：您因未声明变量[*而成为隐式全局恐怖的牺牲品。*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)`typ`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-16T13:23:35.867

jQuery 在这里是矫枉过正，无论如何用 jQuery 正确的方法来看看 TJ Crowders 的答案。

我推荐一种使用标准循环更简单的方法`for`。它工作正常：

```
var types = "text,password".split(",");
for (var i = 0; i < types.length; i++) {
    switch(types[i]){
        case "text":
            console.log('text');
        break;
        default: 
            console.log('default');
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-16T13:25:38.627

您`$.each`错误地使用了该功能。它应该如下所示：

```
$.each( typ, function( key, value ) {
    switch(value){

       case "text":
            console.log('text');break;
       default:
            console.log('default');break;
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T13:26:17.383

尝试使用`switch(String(this))`而不是`switch(this)`. 当然，初始化你的变量。

# django - 检查是否为每个页面上的登录启用了 cookie

> ID：14910761
> 
> 赞同：0
> 
> 时间：2013-02-16T13:19:45.123
> 
> 标签：django, login, session-cookies

我在每个页面上都有一个登录表单。如果由于 cookie 被禁用而导致登录失败，我想向用户显示一条消息，要求他们启用 cookie。我创建了这个**中间件**：

```
class CheckCookiesEnabled(object):
    def process_request(self, request):
        if request.user.is_anonymous():
            request.session.set_test_cookie()
        return 
```

在我的登录视图中，我只检查`request.session.test_cookie_worked()`并登录，否则我想显示该消息。

```
if request.session.test_cookie_worked():
    request.session.delete_test_cookie()
    # Log in 
else:
    return HttpResponse(json.dumps({'errors': "Login failed (enable cookies to login)"}), mimetype = 'application/json') 
```

问题是，`request.session.test_cookie_worked()`似乎总是正确的；即使在浏览器中禁用了 cookie，Django 似乎也能够设置测试 cookie。任何想法为什么以及如何解决这个问题？或者有没有更好的方法来检查浏览器是否启用了 cookie？

顺便说一句：如果我`set_test_cookie()`在每个请求中，Django 总是设置一个新的 cookie 还是只有在没有的情况下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T16:09:54.910

你应该使用你`set_test_cookie`的`process_response`中间件，而不是`process_request`. `test_cookie_worked`总是正确的，因为您总是通过在 处填充`request.session`“cookie”来自己添加它`process_request`- 它在控件进入视图之前执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:43:08.737

最终使用 JavaScript：

```
function cookies_enabled() {
    if (navigator.cookieEnabled) {
        return true;
    } else if (navigator.cookieEnabled === undefined) {
        document.cookie = "testcookie";
        if (cookie_present("testcookie"))
            return true;
    }
    return false;
} 
```

工作得很好。不管怎么说，还是要谢谢你。

# javascript - 带有 Twitter Bootstrap 进度条的 Javascript 倒计时

> ID：14910762
> 
> 赞同：2
> 
> 时间：2013-02-16T13:19:46.403
> 
> 标签：javascript, html, twitter-bootstrap

我正在使用 Twitter Bootstrap。我需要在 30 秒后重定向页面。我想使用 Twitter Bootstrap 进度条来指示页面重定向多长时间（因此当进度条处于 100% 时页面会重定向）。请有人可以帮助我使用 Javascript 和 HTML 代码来执行此操作。

谢谢 ;）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T13:34:58.417

非常基本的例子：

```
var bar = document.getElementById('progress'),
    time = 0, max = 5,
    int = setInterval(function() {
        bar.style.width = Math.floor(100 * time++ / max) + '%';
        time - 1 == max && clearInterval(int);
    }, 1000); 
```

封装在函数中的代码：

```
function countdown(callback) {
    var bar = document.getElementById('progress'),
    time = 0, max = 5,
    int = setInterval(function() {
        bar.style.width = Math.floor(100 * time++ / max) + '%';
        if (time - 1 == max) {
            clearInterval(int);
            // 600ms - width animation time
            callback && setTimeout(callback, 600);
        }
    }, 1000);
}

countdown(function() {
    alert('Redirect');
});
```

```
body {padding: 50px;}
```

```
<link href="//getbootstrap.com/2.3.2/assets/css/bootstrap.css" rel="stylesheet"/>

<div class="progress">
    <div class="bar" id="progress"></div>
</div>
```

# assembly - 16位汇编系统如何暂停几秒钟？

> ID：14910765
> 
> 赞同：0
> 
> 时间：2013-02-16T13:20:18.757
> 
> 标签：assembly, x86, masm

我如何在 x86 中使用 int 8 [在 win xp 中使用 masm] 使系统在几秒钟内没有操作 [暂停]？或任何其他int或代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:57:54.127

DOS程序中有两种常见的方式：

*   计算地址 40h:6ch 处 4 字节计数器的变化。计数器每 55 毫秒递增一次。
*   为 int 8（IRQ0，定时器中断）安装您自己的中断处理程序并计算中断。从您的 ISR 中，您应该调用原始的 ISR，以便系统的其余部分按预期工作。

后一种选择在 Windows 下可能更可靠。

# java - javame - 下载并保存 mp3 文件

> ID：14910766
> 
> 赞同：0
> 
> 时间：2013-02-16T13:20:19.210
> 
> 标签：java, java-me

我有一个 javame 项目，我正在尝试创建一种方法来下载 mp3 文件并将其保存到手机。该方法如下所示，不幸的是它一直抛出 java.lang.illegalargument 异常。

```
 public void Download_KeyTest()
    {
        FileConnection file = null;
        OutputStream outStream = null;
        String resumeJSON = mPreferences.get("resume");
        JSONObject resumeObject;
        try {
            resumeObject = new JSONObject(resumeJSON);
            String key=resumeObject.get("code").toString();
            String inputStr=getTextField12().getString();
            if (inputStr.equals(key))
            {
            Enumeration roots = FileSystemRegistry.listRoots();
            String currentRoot = null;
            while (roots.hasMoreElements()) {
                currentRoot = (String) roots.nextElement();
                System.out.println(currentRoot);
                }
            HttpConnection hc = null;
            DataInputStream in = null;
            try {
            String url = d_url+resumeObject.getJSONObject("sObject").get("loc").toString();
            String sname = urlEncode(resumeObject.getJSONObject("sObject").getString("name").toString());
            hc = (HttpConnection)Connector.open(url);
            int length = (int)hc.getLength();
            byte[] data = null;
            if (length != -1) {
                switchDisplayable(null,getWaitScreen1());
                data = new byte[length];
                in = new DataInputStream(hc.openInputStream());
                in.readFully(data);
                }
                else {
                // If content length is not given, read in chunks.
                switchDisplayable(null,getWaitScreen1());
                int chunkSize = 512;
                int index = 0;
                int readLength = 0;
                in = new DataInputStream(hc.openInputStream());
                data = new byte[chunkSize];
                do {
                    if (data.length < index + chunkSize) {
                    byte[] newData = new byte[index + chunkSize];
                    System.arraycopy(data, 0, newData, 0, data.length);
                    data = newData;
                    }
                    readLength = in.read(data, index, chunkSize);
                    index += readLength;
                } while (readLength == chunkSize);
            length = index;
            }
            getWaitScreen1().setText("Download Complete");
try {
            // Get path to photos folder.
            String dirMusic = System.getProperty("fileconn.dir.memorycard.music");
            if(dirMusic == null) {
                dirMusic=currentRoot;
                //throw new Exception("Unable get music folder name");
            }

            String fileName = dirMusic + sname +".mp3";
            // Open file
            file = (FileConnection)Connector.open(fileName, 
                    Connector.READ_WRITE);
            // If there is no file then create it
            if(file.exists() == false) {
                file.create();
            }
            // Write data received from camera while making snapshot to file
            outStream = file.openOutputStream();
            outStream.write(data);
            System.out.println(file.availableSize());
            //file.setHidden(false);

            getWaitScreen1().setText("Song saved to music folder.");

        } catch(IOException ioe) {
           Alert alertx = new Alert("IO error", ioe.toString(), null, AlertType.ERROR);
           alertx.setTimeout(Alert.FOREVER);
           switchDisplayable(alertx,getDownloadVerifyKeyForm());
        } catch(Exception exc) {
           Alert alertx = new Alert("Error", exc.toString()+exc.getMessage(), null, AlertType.ERROR);
           exc.printStackTrace();
           alertx.setTimeout(Alert.FOREVER);
           switchDisplayable(alertx,getDownloadVerifyKeyForm());
        } finally {
            // Try to close file
            try {
                if(outStream != null) {
                    outStream.close();
                }
                if(file != null) {
                    file.close();
                }
            } catch(Exception exc) {
                // Do nothing 
                exc.printStackTrace();
            }
        }            
        }
        catch (Exception ex)
        {
        ex.printStackTrace();    
        }
            }
        } catch (Exception ex)
        {
        ex.printStackTrace();    
        }
    } 
```

这是我得到的错误

```
java.lang.IllegalArgumentException
    at javax.microedition.io.Connector.getProtocolInstance(), bci=28
    at javax.microedition.io.Connector.open(), bci=24
    at javax.microedition.io.Connector.open(), bci=3
 - spinapp.SpinApp.Download_KeyTest(SpinApp.java:703) 
```

代码中的第 703 行是这样的

```
hc = (HttpConnection)Connector.open(url); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:55:31.527

`Connector.open(String)`如果 URL 无效，将会抛出`IllegalArgumentException`，所以我们真正需要看到的是您传入的**确切URL。**

由于 Stack Overflow 注释格式的工作方式，很难分辨是哪个 URL。以供将来参考，如果您想将确切的 URL 粘贴到评论中，请将其格式化为*代码*，并在其周围带有单个刻度线。因此，很难判断您的`url`变量是否包含**协议**前缀。

但是，您的完整网址可能应该是

```
http://127.0.0.1/relief/api/uploads/p17gnmso5duql0lnhevja15td5.mp3 
```

显然，在测试 URL 时，将 URL 粘贴到桌面浏览器中通常*也是*一个好主意，并确保它也可以在那里工作。此 URL (host=127.0.0.1) 表示您在与模拟器相同的机器上运行服务器。

*（这又提出了一点……您说这是针对您问题中的**电话**的，但是 127.0.0.1 服务器地址只有在您在模拟器中运行时才有效）*

* * *

**编辑：**再次查看您的评论后，我想知道该行是否没有发生异常：

```
 file = (FileConnection)Connector.open(fileName, 
                Connector.READ_WRITE); 
```

如果`fileName`等于`root1/bogolako.mp3`，那么您**缺少**该调用的协议。您应该以 为前缀`fileName`，`"file:///"`假设这`"/root1/"`实际上是您模拟器上的有效绝对路径。

[有关 J2ME 文件连接示例，请参见此处](http://j2mesamples.blogspot.com/2009/02/file-connection-using-j2me-api-jsr-75.html)

# php - 循环中的子查询

> ID：14910769
> 
> 赞同：1
> 
> 时间：2013-02-16T13:20:34.703
> 
> 标签：php, mysql, sql, pdo

需要一些帮助来找出从这种查询中有效获取结果的最佳方法，我有一个消息表，这个消息表对每个消息都有评论。我需要检索每条消息以及该消息的每个后续评论。起初我想获取所有消息及其 PK，然后在循环中使用它来获取评论，但我想知道是否有更有效的方法来做到这一点。我希望每条消息都与该消息的所有后续评论一起显示。Message1 -> 所有评论 Message2 -> 所有评论。这是我希望输出如何的一个示例：

```
eg.    Work Site Maintenance.  //Message
               At 1pm          //comments
               At 2pm          //comments
               At 3pm          //comments
         Work Site Offline.
               Foundation work
               Layng blocks
               Placing steel 
```

我当前的查询是获取消息列表但不是每个评论

```
SELECT MS.status_id,
       MS.member_id,
       MS.status_text,
      MS.status_time
    FROM message_status MS
    WHERE MS.member_id = memberId //variable
    ORDER BY MS.status_id DESC 
    LIMIT 20

**message_status**
status_id PK
member_id
status_text
status_time

**comments_status**
status_id FK
member_id FK
comm_text
comm_time 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:34:53.423

我认为您可以加入他们以获得您想要的结果。

```
SELECT MS.status_id,
   MS.member_id,
   MS.status_text,
   MS.status_time,
   CS.comm_text,
   CS.comm_time
FROM message_status MS
  left join comments_status CS on CS.status_id = MS.status_id
WHERE MS.member_id = memberId //variable
ORDER BY MS.status_id DESC, CS.comm_time DESC
LIMIT 20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:01:56.040

如何使用[LEFT JOIN](http://dev.mysql.com/doc/refman/5.5/en/left-join-optimization.html)：

```
SELECT MS.status_id,
       MS.member_id,
       MS.status_text,
       CS.comm_text,
      MS.status_time
    FROM message_status MS
    LEFT JOIN (SELECT * FROM comments_status) AS CS
    USING (status_id,member_id)
    WHERE MS.member_id = memberId //variable
    ORDER BY MS.status_id DESC 
    LIMIT 20; 
```

此外，索引 WHERE 和 JOIN 子句上的列应该会加快 SELECT 查询（但会减慢 INSERT，因此只有经常执行此查询才值得权衡）：

```
CREATE INDEX m_id ON message_status (member_id);
CREATE INDEX sm_id ON message_status (status_id,member_id);
CREATE INDEX sm_id ON comments_status (status_id,member_id); 
```

示例：[http ://sqlfiddle.com/#!2/565f9/1](http://sqlfiddle.com/#!2/565f9/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T13:58:02.170

最佳选择是通过连接在一次往返中获取所有数据，而不是多次往返少量数据的开销。

在没有使用上下文的情况下，你可以用任何一种方式争论这一点。

要看的东西，是。

您是否总是想获取所有数据？

您是否需要所有数据，然后才能使用它做下一件事情。

往返的费用是多少？

获得这一切的成本是多少？

一旦你拥有数据就会缓存（例如延迟加载很有用）。您需要猜测数据的易失性，即。缓存过期的可能性有多大，请记住一次性获取所有数据是一个大缓存。

您可能会选择低效来表示 UI 响应能力。考虑用客户姓名填充组合，然后在选择时显示它的属性。但是，如果是一个网页，即使使用 ajax 之类的东西，往返也会很痛苦。

简而言之，高效在什么方面？

# magento - 我已将 AddThis 社交按钮代码插入 Magento。为什么现在产品网址是乱码？

> ID：14910771
> 
> 赞同：0
> 
> 时间：2013-02-16T13:20:38.980
> 
> 标签：magento, url, hyperlink, product

我的产品页面的 url 现在是乱码。示例链接：</p>

`http://www.chouchoudress.com/product/fabulous-asymmetrical-ruffles-prom-graduation-dress-with-one-crystal-straps.html#.UR-CjfKptdt`

链接的乱码添加`#.UR-CjfKptdt`特别是某种代码，前面是`#.`.

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:29:07.330

您已经开始将 AddThis 用于您的社交网络，并且没有被警告使用他们的**社交链接跟踪**功能的影响。

AddThis 将哈希鼻涕（`#.`和标识符）添加到您的 URL 的末尾，以启用从您的网站粘贴到博客文章、评论等中的跟踪链接，然后破坏 Magento 中的功能。

通过对插入的 AddThis javascript 片段进行简单更改来删除哈希鼻涕。

在 AddThis javascript 代码段中找到该行`data_track_addressbar`并将其删除。这将关闭用于跟踪粘贴链接的哈希字符串。

# http - Laravel angularjs http post从输入返回null

> ID：14910772
> 
> 赞同：2
> 
> 时间：2013-02-16T13:20:41.127
> 
> 标签：http, post, angularjs, laravel

我最近开始研究 Angular js。我对 http 帖子有点迷茫，无论我做什么，我总是从输入中返回 null

角度控制器

```
function regCtrl ($scope, $http) {
    $scope.regSubmit = function() {
        $http.post(siteUrl + 'regisztracio', [{'felhasznalonev': $scope.felhasznalonev}]).success(function( data ){
              alert(data.msg);
        });
    }
} 
```

laravel 控制器

```
public function post_index()
    {
        $input = Input::json();
        $input_array = (array)$input;

        $rules = array(
            'felhasznalonev' => 'required'
        );

        $val = Validator::make($input_array, $rules);

        if(! $val->fails() ) {
            $data = array('msg' => 'all good');
        } else {
            $data = array('msg' => $val->errors->all());
        }

        return Response::json($data);
    } 
```

形式

```
<?php Section::start('content') ?>
<div class="content" ng-controller="regCtrl">

    <form class="span5 no-float centered" ng-submit="regSubmit()">

    <label for="felhasznalonev">Felhasználó név</label>
        <input type="text" id="felhasznalonev" name="felhasznalonev" ng-model="felhasznalonev" class="span5">

    <label for="email">Email</label>
        <input type="text" name="email" id="email" class="span5">

    <label class="radio inline">
        <input type="radio" name="nem">Férfi
    </label>

    <label class="radio inline">
        <input type="radio" name="nem">Nő
    </label>

    <label class="checkbox">
        <input type="checkbox" name="feltetel"><a href="" title="">Elfogadom a felhasználói feltételeket</a>
    </label>

    <button type="submit" class="btn btn-small btn-block">Regisztráció</button>

    </form>

</div>
<?php Section::stop() ?> 
```

请有人给我一个提示我做错了什么？我已经玩了 3 个小时了

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:52:43.253

我想你很接近。你的 $http 只是需要一些改变。

```
function regCtrl ($scope, $http) {
    $scope.regSubmit = function() {
        $http.post(siteUrl + 'regisztracio', {
           felhasznalonev: $scope.felhasznalonev
        }).then(function(data){
              alert(data.msg);
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:23:03.413

我的不好，更深入地研究了文档

提交函数看起来像这样

```
$scope.regSubmit = function() {
       $http({
            method: "POST",
            url: siteUrl + 'regisztracio',
            data: {felhasznalonev: $scope.felhasznalonev},
       }).success(function(data){
            alert(data.msg)
       });
    } 
```

奇迹般有效

# ember.js - Ember.Select 自定义插件：如何绑定两者？在我们的应用程序中，我们将标准选择替换为 jQuery 插件，以便能够在 CSS 中设置选择的样式。我试图让它与 Ember 一起工作，但我的解决方案真的很脏。有没有合适的方法来做到这一点？我认为关键问题是这种插件需要在页面中呈现 HTML 来更新自己。然而，Ember 绑定会在 HTML 实际呈现在页面中之前触发。Ember.Select.reopen({ didInsertElement: function(){ this.$().s

> ID：14910785
> 
> 赞同：1
> 
> 时间：2013-02-16T13:21:56.820
> 
> 标签：ember.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:19:11.513

我意识到你不需要听值转换器，因为`selectBox`它已经在积极更新 dom 元素和插件本身。观察者中的一个简单跟踪`valueChanged`可以告诉你很多事情。

根据您的问题，我提出了这个小片段。事实上，我认为它实际上就像你原来的方法。

[jsFiddle 示例](http://jsfiddle.net/g8anT/6/)

```
Ember.Select.reopen({
    didInsertElement: function(){
        this.set('value', null);
        this.$().selectBox(); // Create the jQuery plugin
    },
    contentChanged: function() {
        //Ember.run.next is equivalent to setTimeout(fn,1);
        //We want to wait for contentChanged first to finish
        //then rerender selectBox.
        //To get the structure of key-value is too tedious so
        //just rerender it instead.
        Ember.run.next(this, function() {
            this.$().selectBox('refresh');
        });

        //Reset the selection value if you insist
        //this.set('value', null);
    }.observes('content')
}); 
```

我认为这样做是可以`setTimeout`的，因为您需要等待首先呈现内容。刷新不应该太重。

# javascript - jquery jquery-1.9.0 在我尝试使用切换时将 div 设置为显示：无

> ID：14910786
> 
> 赞同：0
> 
> 时间：2013-02-16T13:22:20.080
> 
> 标签：javascript, jquery, css, jquery-ui

我正在通过阅读这本书来学习 jQuery（顺便说一句，这本书非常好。）

当我进行教程 5 练习时，我注意到 jQuery 总是使用 jquery-1.9.0 自动设置为 display:none。当我更改为较低版本（例如 1.8.3 或 1.6.3）时，它们似乎运行良好。想知道您是否遇到过同样的问题？你用 1.9.0 版解决了吗？

下面是我的代码。您也可以从 ( [http://sawmac.com/js2e/Chapter](http://sawmac.com/js2e/) 5/complete_faq.html)下载它

```
<html>
<head>
    <meta charset="UTF-8">
    <title>A One Page Faq</title>
    <link href="../_css/site.css" rel="stylesheet">
    <style type="text/css">
        h2
        {
            background: url(../_images/open.png) no-repeat 0 11px;
            padding: 10px 0 0 25px;
            cursor: pointer;
        }

            h2.close
            {
                background-image: url(../_images/close.png);
            }

        .answer
        {
            margin-left: 25px;
        }
    </style>
    <script src="jquery-1.9.0.js"></script>

    <script>
        $(document).ready(function () {
            $('.answer').hide();
            $('.main h2').toggle(
                   function () {
                       $(this).next('.answer').slideDown();
                       $(this).addClass('close');
                   },
                   function () {
                       $(this).next('.answer').fadeOut();
                       $(this).removeClass('close');
                   }
               ); // end toggle
        }); // end ready
    </script>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <p class="logo">JavaScript <i>&</i> jQuery <i class="mm">The<br>
                Missing<br>
                Manual</i></p>
        </div>
        <div class="content">
            <div class="main">
                <h1>A One Page FAQ</h1>
                <h2>I've heard that JavaScript is the long-lost fountain of youth. Is this true?</h2>
                <div class="answer">
                    <p>Why, yes it is! Studies prove that learning JavaScript freshens the mind and extends life span by several hundred years. (Note: some scientists disagree with these claims.)</p>
                </div>
                <h2>Can JavaScript really solve all of my problems?</h2>
                <div class="answer">
                    <p>Why, yes it can! It's the most versatile programming language ever created and is trained to provide financial management advice, life-saving CPR, and even to take care of household pets.</p>
                </div>
                <h2>Is there nothing JavaScript <em>can&#8217;t</em> do?</h2>
                <div class="answer">
                    <p>Why, no there isn&#8217;t! It&#8217;s even able to write its own public relations-oriented Frequently Asked Questions pages. Now that&#8217;s one smart programming language!</p>
                </div>
            </div>
            <div class="footer">
                <p>JavaScript &amp; jQuery: The Missing Manual, by <a href="http://sawmac.com/">David McFarland</a>. Published by <a href="http://oreilly.com/">O'Reilly Media, Inc</a>.</p>
            </div>
        </div>
        </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:30:19.977

该[`.toggle()`](http://api.jquery.com/toggle-event/)函数已在 jQuery 1.8 中弃用并在 jQuery 1.9 中删除。

> **[.toggle(function, function, ... ) 已移除](http://jquery.com/upgrade-guide/1.9/#toggle-function-function-removed)**
> 
> 这是“单击元素以运行指定功能”的签名`.toggle()`。它不应与`.toggle()`未弃用的“更改元素的可见性”相混淆。**前者被删除以减少混淆并提高库中模块化的潜力。**[jQuery Migrate 插件](https://github.com/jquery/jquery-migrate/#jquery-migrate-migrate-older-jquery-code-to-jquery-19)可用于恢复功能。

虽然，最好完全停止使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:37:48.747

`Alexander`正如提到的其他答案`.toggle()`已被删除，`jQuery version 1.9.0+`但如果你使用`migrate plugin`它肯定会起作用。

如果要使用，请在 jQuery 下方添加此迁移插件脚本`jQuery 1.9.0+`：

```
<script src="jquery-1.9.0.js"></script>
<script src='http://code.jquery.com/jquery-migrate-1.1.0.min.js'></script> 
```

# c++ - C 和 C++ 中 new 和 malloc 的行为

> ID：14910788
> 
> 赞同：3
> 
> 时间：2013-02-16T13:22:20.477
> 
> 标签：c++, c, pointers

在 C 中，对调用的结果进行类型转换被[认为是糟糕的形式](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)`malloc`。`malloc`然而，在 C++中调用的结果似乎*应该*是类型转换的，即使两者`malloc`都有`new`返回类型`void*`和调用`new`不是类型转换。为什么在 C++ 中返回的 void 指针`new`被自动提升而返回的 void 指针`malloc`不是？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-16T13:24:44.460

您`operator new`对`new`运营商感到困惑。`operator new`只是分配原始内存并返回 a `void*`，而`new T`在分配后也调用构造函数并返回 a `T*`。

此外，您必须`malloc`在 C++ 中转换结果，因为与 C 不同，C++ 不允许从隐式转换`void*`到其他指针类型。请注意，这`void*`在 C++ 中很少使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T13:46:19.180

在 C++ 中，内存位置确实是通过 void 指针表示的。但是内存与对象不同。一个对象*需要*内存才能生存，但该对象不同于它所在的内存。

您需要在内存中*创建一个对象。*如果你愿意，`new`-operator 在内存和对象之间“转换”：

```
#include <cstdlib>

void * pm = std::malloc(sizeof(int));       // C-style
void * qm = ::operator new(sizeof(int));    // C++-style

int * po = ::new (pm) int(10);              // void pointer goes in...
int * qo = ::new (qm) int(20);              // ...object pointer comes out.

// (... class-type objects would need to be destroyed...)

std::free(pm);
::operator delete(qm); 
```

# c# - 如何在c#中找到矩阵3x3的det

> ID：14910789
> 
> 赞同：-1
> 
> 时间：2013-02-16T13:22:31.653
> 
> 标签：c#, multidimensional-array

我可以使用以下代码找到矩阵 2x2 的 det：

```
using System;

class find_det
{
static void Main()
{
    int[,] x = { { 3, 5, }, { 5, 6 }, { 7, 8 } };
    int det_of_x = x[0, 0] * x[1, 0] * x[0, 1] * x[1, 1];
    Console.WriteLine(det_of_x);
    Console.ReadLine();
}
} 
```

但是当我试图找到 3x3 矩阵的 det 时，使用以下代码：

```
using System;

class matrix3x3
{
    static void Main()
{
    int[,,] x={{3,4,5},{3,5,6},{5,4,3}};
    int det_of_x=x[0,0]*x[0,1]*x[0,2]*x[1,0]*x[1,1]*x[1,2]*x[2,0]*x[2,1]*x[2,2];
    Console.WriteLine(det_of_x);
    Console.ReadLine();
    }
} 
```

它出错了。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:25:40.453

您在第二个示例中声明了 3D 数组，而不是 3x3 2D 数组。从声明中删除多余的“，”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T13:25:31.860

它仍然是一个二维数组（`int[,]`）而不是一个三维数组（`int[,,]`）。

```
int[,] x = { { 3, 4, 5 }, { 3, 5, 6 }, { 5, 4, 3 } }; 
```

* * *

旁注：您可以对任何多维数组进行计算，如下所示：

```
int det_of_x = 1;
foreach (int n in x) det_of_x *= n; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T13:26:43.777

您将其声明为仍然是二维数组。对于二维数组，您可以像这样使用它；

```
int[,] x = { { 3, 4, 5 }, { 3, 5, 6 }, { 5, 4, 3 } };
int det_of_x = x[0, 0] * x[0, 1] * x[0, 2] * x[1, 0] * x[1, 1] * x[1, 2] * x[2, 0] * x[2, 1] * x[2, 2];
Console.WriteLine(det_of_x);
Console.ReadLine(); 
```

如果你想使用 3 维数组，你应该像这样使用它`int[, ,]`

[**`Multidimensional Arrays`**](http://msdn.microsoft.com/en-us/library/2yd9wwz4.aspx)从*MSDN*查看更多信息。

由于数组实现`IEnumerable`和`IEnumerable<T>`，因此您可以`foreach`在 C# 中对所有数组使用迭代。在您的情况下，您可以像这样使用它；

```
int[, ,] x = new int[,,]{ {{ 3, 4, 5 }, { 3, 5, 6 }, { 5, 4, 3 }} };
int det_of_x = 1;
foreach (var i in x)
{
    det_of_x *= i;
}

Console.WriteLine(det_of_x); // Output will be 324000 
```

这是一个**[`DEMO`](http://ideone.com/0VOOKl)**.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T13:25:38.983

因为您有一个 3 维数组，并且像使用 2 维数组一样使用它，例如`x[0,0]`.

# http - HttpURLConnection.add 请求属性中以“空格”开头的值？

> ID：14910794
> 
> 赞同：0
> 
> 时间：2013-02-16T13:23:30.290
> 
> 标签：http, http-headers, httpurlconnection

这是客户端中的代码：
`connection.addRequestProperty("key", value);`
这是服务器中的代码：

```
String user=req.getHeader("key");
System.out.println(user); 
```

例如，如果该值`"abcd xyz"`在客户端中，则在服务器中打印的值是相同的。但如果值为`" abcd xyz"`，则服务器中打印的值为`"abcd xyz"`i，即起始空间不存在。
这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:22:19.413

在 HTTP 标头字段值中，前导和尾随空格不重要。因此，它们将在解析后消失。

# java - 如何为我的 Android 媒体播放器项目从网站或静态 IP 读取歌曲播放列表

> ID：14910800
> 
> 赞同：0
> 
> 时间：2013-02-16T13:23:52.153
> 
> 标签：java, android, android-mediaplayer, media

我目前正在用 Java 制作一个 Android 媒体播放器应用程序，它的工作很简单，就是让用户使用在线流媒体欣赏我朋友的说唱。他的歌曲在 reverbnation.com 上。我会上传一个播放列表，其中包含他在线歌曲的所有链接（任何基本网站）。当用户启动应用程序（刷新）时，它应该读取播放列表文件并开始播放该播放列表中提到的最新歌曲。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:34:17.603

首先，您应该寻找专用的 API。如果页面允许这样的事情，应该有某种用于登录和询问播放列表的 Web API。

如果没有，可以尝试下载特定页面并解析其代码。您应该寻找歌曲输入模式，以便获得链接和/或歌曲名称。

# java - 使用 Javascript 将 java.util.List 与下拉列表绑定

> ID：14910807
> 
> 赞同：0
> 
> 时间：2013-02-16T13:24:28.113
> 
> 标签：java, javascript, html

我需要将 a 绑定`java.util.List<String>`到 HTML 下拉 javascript。

我能够得到`java.util.List`以下格式：

```
[Name1,Name2,Name3] 
```

对于绑定，我将使用此代码（它工作正常）：

```
var opt = document.createElement("OPTION");                 
opt.text = xhr.responseText;
opt.value = xhr.responseText;
document.getElementById("slctFullName").options.add(opt); 
```

但我不知道迭代这些元素的最简单方法。

请让我知道如何遍历元素:(

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:18:57.210

您首先需要将列表转换为对 javascript 友好的格式，我建议：

```
["Name1", "Name2", "Name3"] 
```

这表示 JSON 中的 javascript 数组，现在您应该能够通过解析将什么分配给 javascript 对象

```
var arr = JSON.parse(xhr.responseText); 
```

现在你可以像普通数组一样循环它：

```
for (var i=0; i<arr.length; ++i) {
 var opt = document.createElement("OPTION");                 
 opt.text = arr[i];
 opt.value = arr[i];
 document.getElementById("slctFullName").options.add(opt); 
} 
```

请注意[此处](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)的兼容性警告。

# c - C 编程 - 星号形状

> ID：14910813
> 
> 赞同：-1
> 
> 时间：2013-02-16T13:25:23.710
> 
> 标签：c

嗨，我想用 * 打印这样的形状。此形状的高度为 6，如果输入另一个偶数作为高度，它将生成具有该高度的形状。

![在此处输入图像描述](../Images/100b3d607f732c956065b550be3ddc3f.png)

到目前为止，我正在这样做，但这失败了.....有人会告诉我我做错了什么吗？谢谢！

```
#include <stdio.h>
#include <stdlib.h>

int main ()
{
    int height;
    int i, j;

    printf("Please input height with an even integer ");
    scanf("%d", &height);

    for (i=height/2; i>=1; i--)
    {

        for (j=1; j<=height; j++)
        {
            if (i==height/2)
                printf("*");
            else if (j=i || j==(height-(i-1)))
                printf("*");
            else
                printf(" ");
        }

        printf("\n");
    }

    system("PAUSE");
    return 0;
} 
```

* * *

谢谢大家！

实际上我之前尝试了另一种方法，它成功了。

我先打印出顶线和底线，然后将星号和空格放在应有的位置。

这是我的解决方案。

```
void printStar(int x);

int main(int argc, char *argv[])
{
        int height, value = 2 , value2;

        printf("Please input height with an even integer ");
        scanf("%d", &height);

        value2 = height-1;

        for (int i=1; i<=height; i++)
        {

         if(i==1){

               printStar(height);

         }else if(i == height){

               printStar(height);

         }else{

               for(int y = 1 ; y<=height ; y++){

                    if(value == y || value2 == y){

                         printf("*");           

                    }else{

                         printf(" ");   

                    }

               }
                value++;
                value2--;       

         }  
         printf("\n");
        } 

    system("PAUSE");
    return 0;
}

void printStar(int x){
     for(int i = 0 ; i<x ;i++){
          printf("*");  
     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:37:54.000

我认为`if (j=i || j==(height-(i-1)))`是`j=i`错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:44:37.440

你需要改变的事情：

*   `for (i=height/2; i>=1; i--)`应该`for (i=height; i>=1; i--)`
*   `if (i==height/2)`应该`if (i==height || i==1)`
*   `else if (j=i || j==(height-(i-1)))`应该`else if (j==i || j==(height-(i-1)))`

进行这些更改后，`height==6`您的程序将输出：

```
******
 *  * 
  **  
  **  
 *  * 
****** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T13:47:06.623

```
for (i=height; i>=1; i--)
{
    for (j=1; j<=height; j++)
    {
        if (i==height || i==1)
            printf("*");
        else if (j==i || j==(height-(i-1)))
            printf("*");
        else
            printf(" ");
    }

    printf("\n");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T14:00:57.830

该程序是设备化的，因此您可以从逻辑上思考问题。将问题分成不同的部分，上部分和下部分（分治法），*然后*解决问题。要求别人解决你的问题是没有建设性的。这是您目前问题的解决方案，但请记住为什么您的作业首先要解决这个问题。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
  int height = 1;
  int i, j;
  while((height % 2 != 0) && height > 0){
    printf("Enter Height: ");
    scanf("%d",&height);
  }
  /*first half*/
  for(i = 0; i < height; i++) putchar('*');printf("\n");
  for(i = 1; i < height/2; i++){
    for(j = 0; j < height; j++) {
      if(j == i || j == (height-i-1))putchar('*'); else putchar(' ');
    } printf("\n");
  }
  /*second half*/
  for(i = height/2 -1; i > 0; i--){
    for(j = 0; j < height; j++){
      if(j == i || j == (height - i - 1))putchar('*'); else putchar(' ');
    } printf("\n");
  }
  for(i = 0; i < height; i++) putchar('*');
  return 0;
} 
```

# php - 带有 .htaccess 的多语言 php cms

> ID：14910814
> 
> 赞同：0
> 
> 时间：2013-02-16T13:25:24.977
> 
> 标签：php, apache, url-rewriting, get, multilingual

我正处于原型阶段并与`error_reporting(-1)`;合作。我的博客将使用 2 种语言。土耳其语+英语。

我目前的计划是向用户展示一个非常简单`index.php`的语言来选择他/她的语言。然后将页面发送到`index2.php?lang={turkish or english}`设置语言后，我打算只使用 index2.php 页面来管理所有内容。

我的**index.php**代码：

```
<a href="türkçe/" alt="Türkçe" title="Türkçe">Türkçe</a><br /><br />
<a href="english/" alt="English" title="English">English</a> 
```

我的**index2.php 试用版**暂时

```
echo $_GET[rd_dil];
if ($_GET[rd_dil] =='türkçe') {echo 'success';} 
```

我的**.htaccess**是

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^türkçe(.+)$ index2.php?rd_dil=türkçe [L,QSA]
RewriteRule ^english(.+)$ index2.php?rd_dil=english [L,QSA] 
```

**我的问题：**

**问题 1**
我的 index2.php 输出带有 2 个通知（如下），我应该为通知安全设计做什么？

```
Notice: Use of undefined constant rd_dil - assumed 'rd_dil' in C:\Program Files (x86)\Ampps\www\index2.php on line 17
türkçe
Notice: Use of undefined constant rd_dil - assumed 'rd_dil' in C:\Program Files (x86)\Ampps\www\index2.php on line 18
success 
```

**问题2**
你认为我的计划、思维方式合乎逻辑吗？如果您有更有效的方法，您可以指导我吗？正如我所写，一切都从查看器的语言选择开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:34:28.507

```
echo $_GET[rd_dil]; 
```

到

```
echo $_GET['rd_dil']; 
```

将解决问题 1。您在变量名周围缺少引号。这就是通知的原因。

对于问题 2，我会说这真的取决于应用程序。没有任何计划对所有应用程序都是 100% 有效的。

# opengl - OpenGL中的纹理映射意外错误

> ID：14910818
> 
> 赞同：2
> 
> 时间：2013-02-16T13:25:39.767
> 
> 标签：opengl, texture-mapping

我尝试了 NeHE 教程中的代码。( [http://nehe.gamedev.net/tutorial/texture_mapping/12038/](http://nehe.gamedev.net/tutorial/texture_mapping/12038/) ) 我下载了 linux 版本的代码。（[http://codepad.org/ApAyiNuV](http://codepad.org/ApAyiNuV)）它编译代码没有问题，但是当我尝试运行时出现此错误：

```
Width of NeHe.bmp: 140204912410880
Height of NeHe.bmp: 140204912410880
Error allocating memory for color-corrected image data 
```

为什么会出现这个错误，我该如何解决？（我使用了 gcc。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T13:28:19.743

> 重要提示：这种加载纹理的方式已被弃用，并且不再适用于当前版本的 Visual Studio。不过，本教程的理论仍然有效。可以在这里找到负责加载纹理的代码更新：http: [//nehe.gamedev.net/tutorial/lesson_06_texturing_update/47002/](http://nehe.gamedev.net/tutorial/lesson_06_texturing_update/47002/)

我相信您使用的 linux 代码也很旧。尝试切换到 SOIL 或其他一些图像加载库。更新后的代码也应该可以在 linux 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T17:15:21.847

您链接的代码中的主要问题与 OpenGL 无关，也与加载图像无关。问题是，从文件中加载内容的方式是不可靠的。以此为例：

```
// read the width
if ((i = fread(&image->sizeX, 4, 1, file)) != 1) {
printf("Error reading width from %s.\n", filename);
return 0;
} 
```

这里的问题是，这`sizeof(Image::sizeX)`不一定是 4 个“字符”。类型*至少为*`unsigned long`4 ，但可以更长。在现代系统上很可能是 8。这意味着，8 个“字符”中的 4 个被保留在读取之前它们已经存在的任何位置，这是通常关心的非零垃圾。

 *也没有解决整个字节顺序问题。实现稳健二进制加载的唯一方法是通过从定义明确的表达式中明确设置所有位。在字段的情况下，`Image::sizeX`您可以将其写为

```
char buf[4];
// read the width
if ((i = fread(buf, 4, 1, file)) != 1) {
printf("Error reading width from %s.\n", filename);
return 0;
}
image->sizeX = 
     ((unsigned long)buf[0]) |
    (((unsigned long)buf[1])<<8) |
    (((unsigned long)buf[2])<<16)|
    (((unsigned long)buf[3])<<24); 
```

以这种方式编写它是以稳健且独立于平台的方式读取二进制数据的*唯一方法。*写起来很累吗？是的。这就是为什么您要编写许多辅助函数来抽象它的原因。*

# javascript - Ajax 表单：第二次提交表单导致不显示成功消息

> ID：14910827
> 
> 赞同：0
> 
> 时间：2013-02-16T13:26:27.483
> 
> 标签：javascript, jquery, ajax, forms, submit

我写了一个 AJAX 表单脚本。提交后，表单在 PHP 中得到验证。如果一切正常，则会显示一条成功消息。如果存在验证错误，我会将用户指向相应的字段，以便可以轻松更正输入。之后，当然必须再次提交表单。

使用 调用初始函数`$("form").submit`。为了在更正验证错误后允许重新提交，我会

```
$(".error-msg").click( function () {
    $("form").submit();
}); 
```

（是的，通过单击错误消息提交表单。）

那行得通，我可以看到数据已发布，但没有显示成功消息。为什么？是否有`.submit`可以以递归方式使用的回调？

**编辑**

根据要求 - 更多代码：

```
$("form").submit(function () {

        var name     = $( "input[name=name]" ),
            mail     = $( "input[name=email]" ),
            message  = $( "textarea[name=message]" );

        var string = "name=" + name.val() + "&email=" + mail.val() + "&message="  + encodeURIComponent(message.val());

        $( "form input" ).attr( "disabled", "true" );
        $( "form textarea" ).attr( "readonly", "true" );

        $.ajax({
            url: "my-form.php",
            type: "POST",
            data: string,
            dataType: "json",
                success: function ( result ) {

                    if ( result.status === "success" ) {

                        alert( "success" );

                    }

                    if ( result.status === "fail" ) {

                            alert( "fail" );

                            $.each( result.data, function( k , v ) {

                                $( "#" + v.field ).removeAttr( "disabled" ).after("<p>" + v.errorMsg + "</p>");

                                $(".error").animate({
                                    opacity: 1
                                }, 500);

                                $(".error").click( function () {
                                    $("form").submit();
                                });

                            });

                    }
                }

        return false;
    }) 
```

# c# - 表单身份验证虚拟路径“/Login.aspx”映射到另一个应用程序，这是不允许的

> ID：14910828
> 
> 赞同：2
> 
> 时间：2013-02-16T13:26:33.960
> 
> 标签：c#, asp.net

我遇到了一个问题（asp.net 3.5）：当导航到[https://mypage.net](https://mypage.net)时，它会将我重定向到[https://mypage.net/Login.aspx?ReturnUrl=%2f](https://mypage.net/Login.aspx?ReturnUrl=%2f)不允许登录（因为ReturnUrl=%2f)。

为了解决这个问题，我更改了 global.aspx Application_BeginRequest：

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
        // redirect user from http to https
        if (!Request.IsLocal && !Request.IsSecureConnection)
        {
            string redirectUrl = Request.Url.ToString().Replace("http:", "https:");
            Response.Redirect(redirectUrl);
        }

        // I HAVE ADDED THESE LINES!!!!!!!!!!!!!!
        if (Request.AppRelativen aCurrentExecutionFilePath == "~/")
            HttpContext.Current.RewritePath("Login.aspx");
    } 
```

现在它似乎工作完美，但不是。

问题是我有另一个可以通过 [https://mypage.net/QA](https://mypage.net/QA)访问的虚拟应用程序 如果我直接输入 [https://mypage.net/QA/login.aspx](https://mypage.net/QA/login.aspx)那么一切都很好。

但是，如果我输入[https://mypage.net/QA](https://mypage.net/QA)，则会显示“虚拟路径 '/Login.aspx' 映射到另一个应用程序，这是不允许的。”

*   如果我使用[https://mypage.net/QA](https://mypage.net/QA)它会给我一个错误
*   如果我使用[https://mypage.net/QA/](https://mypage.net/QA/)它不会给我一个错误并且 Login.aspx 被加载
*   我还尝试更改 global.aspx： HttpContext.Current.RewritePath("* *~/* *Login.aspx"); 但在这种情况下，当我对[https://mypage.net/qa](https://mypage.net/qa)应用程序认为我在[https://mypage.net](https://mypage.net)而不是虚拟应用程序 QA 时。

你如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:51:35.737

也许做这样的事情来逻辑地路由事情而不是物理文件

[http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx)

```
 //-----------------------------------------------------------------------------------
    // Name:        RegisterRoutes
    // Purpose:     Register the routes for the site.
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("admin/errorlog.axd/{*pathInfo}");

        routes.MapRoute(
            "Base", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Base", action = "Main", id = UrlParameter.Optional }  // Parameter defaults
        );
    }

    //-----------------------------------------------------------------------------------
    // Name:        Application_Start
    // Purpose:     The application start event handler.
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        InitSquishIt();
    } 
```

# ios - 如何将数据从 DetailView 传递到 TableView？

> ID：14910833
> 
> 赞同：2
> 
> 时间：2013-02-16T13:27:11.953
> 
> 标签：ios, tableview, detailview, pass-data

我是新来的。我有一个带有 Tableview 的应用程序，当我按下一个单元格时，它会将我导航到一个 DetailView。现在的问题是我在 Detailview 中有一个 textField，我想在按下保存按钮后将用户键入的数据加载回原始单元格的 detailTextLabel 段。

我该怎么做呢？以下是我所拥有的：

**细节视图控制器.m**

```
//save button
-(IBAction) SendTextFieldtoViewController:(id)sender { 

    NSString *grabKeyedData = self.inputField.text;
    ViewController *mainController =[self.storyboard instantiateViewControllerWithIndentfier:@"mainController"];

    [mainController GrabbedKeyData: grabKeyedData];
} 
```

**视图控制器.m**

```
-(void) GrabbedKeyData:(NSString *)text{

    grabData = text;

    NSLog(@" data: %@",text);
    [tableView reloadData];
}

-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *) indexPath {

.....

  if(grabData == nil){
      [[cell detailTextLabel] setText:@"no data"];
  }else{
      [[cell detailTextLabel] setText:grabData];
  } 
```

我已经设法将数据传递给 -(void) GrabbedKeyData，我可以从 NSLog 读取传递的数据。但是当我返回 ViewController 时，该表似乎没有更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:21:44.540

我认为问题可能是两件事之一。在您的问题中，您说“返回到 ViewController”，但您不会回到您开始使用的那个，而是创建一个新的。如果您通过从情节提要中的 ViewController 推送到细节控制器，那么这不是这样做的方法。您需要获取对 ViewController 原始实例的引用，或使用协议（这是 Apple 推荐的将数据发送回控制器的标准方式）。有几种方法可以获取该引用，例如，您可以在细节控制器中拥有一个名为 mainController 的属性，并且 ViewController 可以在推送细节控制器时将自己设置为该属性的值。

另一个可能的问题是一个简单的问题——表格使用的是普通单元格，而不是具有 detailTextLabel 的单元格。确保您在 IB 中设置了正确类型的单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:36:21.547

```
-(IBAction) SendTextFieldtoViewController:(id)sender 
{ 
    NSString *grabKeyedData = self.inputField.text;
    [mainController GrabbedKeyData: grabKeyedData];
    ViewController *mainController =[self.storyboard instantiateViewControllerWithIndentfier:@"mainController"];
}

-(void) GrabbedKeyData:(NSString *)text
{
  self.keyDataArray = [[NSMutableArray alloc] initWithObjects:text, nil];
  NSLog(@" data: %@",text);
  [tableView reloadData];
}

-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *) indexPath {

.....

  NSString *grabbedName = [keyDataArray objectAtIndex:0];
  NSLog(@" cell text is :%@",grabbedName);

  [[cell detailTextLabel] setText:grabbedName];
} 
```

您仅将 NSString 对象存储到 array.so 中，它存储在第 0 个索引处的数组中。

# twig - 如何在 Twig 中实现多语言？

> ID：14910835
> 
> 赞同：1
> 
> 时间：2013-02-16T13:27:31.727
> 
> 标签：twig, multilingual

如何在 Twig 模板中实现多语言？

在使用 Twig 之前，我使用 gettext 函数来实现多语言，但我不知道是否有任何方法可以从 twig 模板中调用此函数。

我发现的最相关的是这个问题，它谈到了 twig 和 symfony，但在我的情况下，我只使用 Twig lib：

[Symfony2 和 Twig 中的多语言](https://stackoverflow.com/questions/8271125/multilanguage-in-symfony2-and-twig)

我在 twig 文档中查找了函数/属性“trans”，但我什么也没找到。

有什么功能吗？或者我必须为每种语言复制每个模板？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T09:43:24.470

这似乎是您正在寻找的：

## [i18n 扩展](http://twig.sensiolabs.org/doc/extensions/i18n.html)

“i18n 扩展为 Twig 添加了[gettext](http://www.php.net/gettext)支持。它定义了一个标签，trans。”

## 用法

```
{% trans "Hello World!" %}

{% trans string_var %}

{% trans %}
    Hello World!
{% endtrans %} 
```

# c# - 使用绑定的 CheckBoxList 进行 sql 搜索查询

> ID：14910844
> 
> 赞同：1
> 
> 时间：2013-02-16T13:28:24.390
> 
> 标签：c#, asp.net, sql, checkboxlist

我的 asp 网页上有一个复选框列表，其中列出了项目所需的一些技能。我想要做的是从这个复选框列表中检查多个项目，然后创建一个搜索功能来列出所有具有相关技能的用户。我可以让它工作，但不是显示所有用户，而是只显示一个用户。

例如，如果我从复选框列表中选中“计划”和“设计”，它应该列出用户“Peter”和“Vicki”，因为他们具有所需的技能，但我的代码只显示 Peter。我的代码如下：

```
StringBuilder sb2 = new StringBuilder();

foreach (ListItem item in chkGeneralSkills.Items)
        {
            if (item.Selected)
            {
                sb2.AppendFormat("{0}  ", item.Text);

                    using (SqlConnection oConn = new SqlConnection(ConfigurationManager.ConnectionStrings["connString"].ToString()))
                    {
                        string sql = "SELECT us.FName + ' ' + us.SName As 'Name', " +
                                 "sk.SkillsID, sl.SkillTitle " +
                                 "FROM Users us " +
                                 "LEFT JOIN Skills sk ON sk.UserID = us.UserID " +
                                 "LEFT JOIN SkillsListing sl ON sl.SkillsListingID = sk.SkillsListingID " +
                                 "WHERE sl.SkillTitle LIKE '" + item.Text + "'";
                        try
                        {
                            oConn.Open();
                            SqlCommand cmd = new SqlCommand(sql, oConn);
                            SqlDataReader reader = cmd.ExecuteReader();
                            chkMatchedUsers.DataTextField = "Name";
                            chkMatchedUsers.DataValueField = "Name";
                            chkMatchedUsers.DataSource = reader;

                            chkMatchedUsers.DataBind();

                            oConn.Close();
                        }
                        catch (Exception)
                        {
                            throw;
                        }
                    }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:43:48.467

在循环项目的循环中，只需添加变量并将该值分配给变量。然后在 where 子句中使用该变量。在开始启动 sql 连接之前，还要结束该 foreach 循环。希望你清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:35:51.900

它会针对每个选定的项目访问数据库，但如果我的假设是正确的，即 Peter 拥有一项技能而 Vicky 拥有另一项技能，那么您将忽略第一个响应并覆盖第二个响应。

使用你已经拥有的，你应该建立一个循环遍历项目的 where 子句，然后只调用一次数据库，而不是每个选定的项目。这将导致您的数据库往返次数也减少，并且应该在结果中返回 Vicky 和 ​​Peter，而不是其中一个。

**未经测试**的代码 - 让您*了解*如何完成。

```
var sb = new StringBuilder();
    foreach (ListItem item in chkGeneralSkills.Items)
    {
        if (item.selected)
        {       
           sb.Append("'" + item.text + "',");
        }
    }

    using (SqlConnection oConn = new SqlConnection(ConfigurationManager.ConnectionStrings["connString"].ToString()))
    {
        string sql = "SELECT us.FName + ' ' + us.SName As 'Name', " +
                    "sk.SkillsID, sl.SkillTitle " +
                    "FROM Users us " +
                    "LEFT JOIN Skills sk ON sk.UserID = us.UserID " +
                    "LEFT JOIN SkillsListing sl ON sl.SkillsListingID = sk.SkillsListingID " + 
                    " WHERE sl.SkillTitle IN (" + sb.ToString() + ")";
        try
        {
            oConn.Open();
            SqlCommand cmd = new SqlCommand(sql, oConn);
            SqlDataReader reader = cmd.ExecuteReader();
            chkMatchedUsers.DataTextField = "Name";
            chkMatchedUsers.DataValueField = "Name";
            chkMatchedUsers.DataSource = reader;

            chkMatchedUsers.DataBind();

            oConn.Close();
        }
        catch (Exception)
        {
            throw;
        }
    } 
```

# android - Android Parent Activity

> ID：14910846
> 
> 赞同：0
> 
> 时间：2013-02-16T13:28:32.890
> 
> 标签：android, android-intent, android-activity, parent, android-context

Is there any way to get the parent activity instance for activities that are not embedded, the same way as for TabBar Activities you can use `getParent()`? Is there a method or a way to do the same for regular activities, started with a regular intent? I need to get the context, so I can pass it forward.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T13:36:53.083

> Is there any way to get the parent activity

There is no concept of "parent activities" in Android, except in the now-deprecated `ActivityGroup`.

> I need to get the context, so I can pass it forward.

First, each `Activity` is a `Context`. Second, passing `Contexts` around between component is a recipe for memory leaks. Please solve whatever problem you think you have in some other way.

# ruby-on-rails - 所有视图中的变量

> ID：14910848
> 
> 赞同：0
> 
> 时间：2013-02-16T13:28:51.160
> 
> 标签：ruby-on-rails, model-view-controller

我的 Rails 项目中有两个不同的控制器，分别称为 Bank 和 Change。在我的变更控制器中，我得到了变量：`@dollar = 3.3`。

我可以从零钱的角度来取美元`<= @dollar %>`，但从银行的角度来看它不起作用。如何`@dollar`在不同的控制器/视图中访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:32:07.040

两种可能的方法：

*   在银行控制器中添加'@dollar = 3.3'
*   使美元和银行控制器成为 DollarBankController 的子控制器，并在此父控制器中设置“@dollar = 3.3”

# prolog - 深度列表中的最后一个元素

> ID：14910851
> 
> 赞同：-2
> 
> 时间：2013-02-16T13:29:43.487
> 
> 标签：prolog

因此，如果输入是**L=[1,[2,3,4],5]**，则输出应该是**R = [4,5]**。常规列表中最后一个元素的代码是

```
last([X],X].
last([H|T],X):-last(T,X). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:38:54.337

这不是完全优雅的 Prolog，但我认为它会做你想要的：

```
deeplast([L], X) :-
    deeplast(L, X).
deeplast([X], X) :-
    atomic(X).
deeplast([H|T], X) :-
    atomic(H),
    deeplast(T, X).
deeplast([H|T], X) :-
    compound(H),
    deeplast(H, Y),
    deeplast(T, Z),
    X = [Y, Z]. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-04T08:21:19.660

这是彼得答案的略微编辑版本：

```
deeplast([L], X) :-
    deeplast(L, X).

deeplast([X], X) :-
    atomic(X).

deeplast([H|T], X) :-
    atomic(H),
    deeplast(T, X).

deeplast([H|T], X) :-

    deeplast(H, Y),
    deeplast(T, Z),
    X = Z.

?- deeplast([1,[2,3],4,[5,[6,8]]],R).
   R = 8 
```

# sql - 构建数据库以跟踪数据的某些更改

> ID：14910852
> 
> 赞同：0
> 
> 时间：2013-02-16T13:30:04.720
> 
> 标签：sql, sql-server, database, data-structures

我有一个 SQL Server 2008 R2 数据库，我需要在其中跟踪对数据所做的某些更改。到目前为止，我的所有研究都提出了对所做的每一个更改进行相当复杂的跟踪的方法，但我的案例更具体一些，而且我认为更简单，因为我只需要跟踪更改直到它被批准（由管理员） .

到目前为止，我能想到的唯一方法是，对于每个受影响的表，创建一个`pending_changes`跟踪更改类型（即`INSERT`，`UPDATE`或`DELETE`）、主键、列名以及在适用的情况下的值的表或要更改的值。

然后，当更改被批准时，可以从中生成一条 SQL 语句，将更改写入主表。不过，这感觉是一种非常笨拙的方法，并且很难查询（例如，生成旧值与新值的列表）。

这是一个非常小的数据库（< 1000000 行），只有大约 5 个用户，因此性能不是问题。

**编辑：** 跟踪更改的目的是在将它们写入数据库之前需要对其进行批准。这些数据大多是具有法律含义的科学数据，因此用户（在本例中为客户）提出的更改需要经过专家检查才能获得批准。一旦它们被批准，我们就不再需要知道旧值了。所有更改，包括`DELETE`声明，都需要此批准。 `INSERT`并且`UPDATE`可以通过创建一个包含更改数据的类似表来处理，但我不确定如何处理删除。我还想避免过多的额外表，因为我需要跟踪几个基表，而且我担心增加的复杂性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:43:46.000

您可以使用“代替”触发器。

（未测试）

```
CREATE TRIGGER IO_Trig_INS_Employee ON Employee
INSTEAD OF INSERT
AS
BEGIN
  insert pending_employee
    select * from inserted
end 
```

[http://msdn.microsoft.com/en-us/library/ms175521(v=SQL.105).aspx](http://msdn.microsoft.com/en-us/library/ms175521(v=SQL.105).aspx)

MERGE 关键字可以帮助应用更改。不过，您可能必须在进行更改之前放下触发器。

[http://msdn.microsoft.com/en-us/library/bb510625.aspx](http://msdn.microsoft.com/en-us/library/bb510625.aspx)

您是否考虑过在应用程序中处理这个问题？Sharepoint 中的审批工作流之类的东西可能更适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T01:12:37.607

您是否正在跟踪更改以防止在进行不受欢迎的更改之前进行更改，或者在更改更改后能够查看/恢复值？

如果您可以允许用户进行插入/更新/删除然后让管理员批准它，请考虑使用 OUTPUT INTO 子句。在此页面上标记为“C. 将 OUTPUT INTO 与 UPDATE 语句一起使用”的部分中有一个很好的示例：http: [//msdn.microsoft.com/en-us/library/ms177564.aspx](http://msdn.microsoft.com/en-us/library/ms177564.aspx)

```
USE AdventureWorks2012;
GO
DECLARE @MyTableVar table(
    EmpID int NOT NULL,
    OldVacationHours int,
    NewVacationHours int,
    ModifiedDate datetime);
UPDATE TOP (10) HumanResources.Employee
SET VacationHours = VacationHours * 1.25,
    ModifiedDate = GETDATE() 
OUTPUT inserted.BusinessEntityID,
       deleted.VacationHours,
       inserted.VacationHours,
       inserted.ModifiedDate
INTO @MyTableVar;
--Display the result set of the table variable.
SELECT EmpID, OldVacationHours, NewVacationHours, ModifiedDate
FROM @MyTableVar;
GO
--Display the result set of the table.
SELECT TOP (10) BusinessEntityID, VacationHours, ModifiedDate
FROM HumanResources.Employee;
GO 
```

如您所见，这将允许您记录每列的“之前”和“之后”值。

# python - 如何指定 Tkinter 窗口打开的位置？

> ID：14910858
> 
> 赞同：66
> 
> 时间：2013-02-16T13:30:49.897
> 
> 标签：python, python-2.7, tkinter

如何根据屏幕尺寸告诉 Tkinter 窗口在哪里打开？我希望它在中间打开。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-02-16T16:47:26.627

该答案基于[Rachel 的答案](https://stackoverflow.com/a/14910894/839601)。她的代码最初无法正常工作，但经过一些调整，我能够修复错误。

```
import tkinter as tk

root = tk.Tk() # create a Tk root window

w = 800 # width for the Tk root
h = 650 # height for the Tk root

# get screen width and height
ws = root.winfo_screenwidth() # width of the screen
hs = root.winfo_screenheight() # height of the screen

# calculate x and y coordinates for the Tk root window
x = (ws/2) - (w/2)
y = (hs/2) - (h/2)

# set the dimensions of the screen 
# and where it is placed
root.geometry('%dx%d+%d+%d' % (w, h, x, y))

root.mainloop() # starts the mainloop 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-02-16T13:35:25.667

试试这个

```
import tkinter as tk

def center_window(width=300, height=200):
    # get screen width and height
    screen_width = root.winfo_screenwidth()
    screen_height = root.winfo_screenheight()

    # calculate position x and y coordinates
    x = (screen_width/2) - (width/2)
    y = (screen_height/2) - (height/2)
    root.geometry('%dx%d+%d+%d' % (width, height, x, y))

root = tk.Tk()
center_window(500, 400)
root.mainloop() 
```

[来源](http://www.daniweb.com/software-development/python/threads/66181/center-a-tkinter-window)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2017-05-26T08:49:30.897

```
root.geometry('250x150+0+0') 
```

前两个参数是窗口的宽度和高度。最后两个参数是 x 和 y 屏幕坐标。您可以指定所需的 x 和 y 坐标

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-07-13T06:11:45.687

如果您希望窗口居中，这种类型的功能可能会帮助您：

```
def center_window(size, window) :
    window_width = size[0] #Fetches the width you gave as arg. Alternatively window.winfo_width can be used if width is not to be fixed by you.
    window_height = size[1] #Fetches the height you gave as arg. Alternatively window.winfo_height can be used if height is not to be fixed by you.
    window_x = int((window.winfo_screenwidth() / 2) - (window_width / 2)) #Calculates the x for the window to be in the centre
    window_y = int((window.winfo_screenheight() / 2) - (window_height / 2)) #Calculates the y for the window to be in the centre

    window_geometry = str(window_width) + 'x' + str(window_height) + '+' + str(window_x) + '+' + str(window_y) #Creates a geometric string argument
    window.geometry(window_geometry) #Sets the geometry accordingly.
    return 
```

这里，该`window.winfo_screenwidth`函数用于获取`width`设备屏幕。该`window.winfo_screenheight`函数用于获取`height`设备屏幕。

在这里您可以调用此函数并传递一个以屏幕的（宽度，高度）为大小的元组。

您可以根据需要自定义计算，它会相应地改变。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-22T04:59:38.307

`root.geometry('520x400+350+200')`

解释：（'宽x高+X坐标+Y坐标'）

# ios - 为什么这段代码会停止程序执行？

> ID：14910859
> 
> 赞同：1
> 
> 时间：2013-02-16T13:31:21.863
> 
> 标签：ios, objective-c, grand-central-dispatch

看看这段代码：

```
dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, nil), ^
{
    NSLog(@"DISPATCH_QUEUE");//executed

   //never goes further
    dispatch_sync(dispatch_get_main_queue(), ^
                   {
                       NSLog(@"MAIN_QUEUE");
                   });

    NSLog(@"END OF DISPATCH QUEUE");
}); 
```

我希望这段代码能像往常一样运行程序流，但它总是放入控制台字`DISPATCH_QUEUE`，而且永远不会走得更远。程序刚刚停止。谁能解释为什么它会这样？幕后发生了什么让它停止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T13:40:23.783

如果您从主队列（我假设）运行此代码，则会出现死锁。主队列被阻塞，直到您从第一次调用到`dispatch_sync`完成的阻塞。但是在这个块内，您等待另一个块在主队列上完成，由于主队列是串行队列，因此在外部块完成之前无法执行。

您需要将其中一个调用更改为`dispatch_async`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T13:52:15.363

您可能遇到了僵局；假设您的第一次调用`dispatch_sync`来自主线程。

在这种情况下，主线程正在等待第一次分派完成，但在该块内，您正试图分派回主线程......死锁。

您似乎正在尝试：

1.  在另一个队列上做一些工作
2.  更新用户界面
3.  继续在另一个队列上做更多的工作

如果那是正确的，您可能想要使用 NSOperation ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T14:03:26.133

`dispatch_sync`在给定队列上运行一个块并等待它完成。在这种情况下，队列是主调度队列。主队列以 FIFO（先进先出）的顺序在主线程上运行其所有操作。这意味着每当您调用 dispatch_sync 时，您的新块将被放在行尾，并且不会运行，直到队列中的其他所有内容完成。

这里的问题是您刚刚入队的块位于等待在主线程上运行的行尾，但可能您的上述代码当前正在主线程上运行。在当前方法完成使用主线程之前，队列末尾的块无法访问主线程。所以只`dispatch_async`在这里工作。

# iphone - 在 ios 中使用 POST 请求在服务器数据库中插入重复记录

> ID：14910861
> 
> 赞同：1
> 
> 时间：2013-02-16T13:31:23.947
> 
> 标签：iphone, ios6, ios5

```
-(void) registerintoserverDB{
NSString *str_registerURL = @"reg_action.php";

NSString *str_completeURL = [NSString stringWithFormat:@"%@%@", str_global_domain, str_registerURL]; 

NSURL *url = [NSURL URLWithString:str_completeURL];  

NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:60];

[theRequest setHTTPMethod:@"POST"];
[theRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"]; 

NSString *str_address = [NSString stringWithFormat:@"%@%@", txt_address1.text, txt_address2.text];   

NSString *postData = [NSString stringWithFormat:@"rest_name=%@&rest_telephone=%@&rest_email=%@&rest_password=%@&rest_country=%@&rest_city=%@&rest_postal=%@&rest_delivery=%@&rest_address=%@&rest_image=%@&rest_minimum_order=%@&isUser=%@&fb_name=%@fb_like", txt_restaurantname.text, txt_telephone.text, txt_email.text, txt_pass.text, txt_country.text, txt_city.text, txt_postal.text, txt_deliveryHours.text,  str_address, @"imagepath", @"10 euro", @"Yes", str_global_user_fbUsername];  

NSString *length = [NSString stringWithFormat:@"%d", [postData length]];
[theRequest setValue:length forHTTPHeaderField:@"Content-Length"]; 

[theRequest setHTTPBody:[postData dataUsingEncoding:NSASCIIStringEncoding]];  

NSURLConnection *sConnection = [NSURLConnection connectionWithRequest:theRequest delegate:self];
[sConnection start];   

NSData *responseData = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:nil error:nil];
NSLog(@"response data is %@", responseData);  

NSString *returnString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

NSLog(@"returnString....%@",returnString);
NSDictionary *response_dic = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:nil];

NSLog(@"msg is  : %@ ",[response_dic objectForKey:@"msg"]);} 
```

我想将用户详细信息插入服务器端数据库，所以我使用了这段代码，它工作正常，但问题是在我的服务器数据库中，重复的条目被插入，就像 2 条具有相同详细信息的记录无法准确识别问题出在哪里在我的代码端或服务器端。请尽快提出一些指导方针。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T13:34:18.963

删除：

```
NSURLConnection *sConnection = [NSURLConnection connectionWithRequest:theRequest delegate:self];
[sConnection start]; 
```

或这个：

```
NSData *responseData = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:nil error:nil]; 
```

即使您有一个请求，您也会建立两个不同的连接（其中一个是异步连接，另一个是同步连接）。两者加起来等于对数据库的两次插入。

# c# - 如何使用数据网格上的 EF 模型和 ICollectionView 从数据库中获取最新记录？

> ID：14910863
> 
> 赞同：0
> 
> 时间：2013-02-16T13:31:29.677
> 
> 标签：c#, wpf

经过一周的尝试和谷歌搜索后，我问了这个问题，但我无法解决这个问题。

在我的应用程序中，我使用 EF 模型。我有一个名为 TransportPlanning 的屏幕。我有一个绑定到 ICollection 的数据网格，如下所示：

```
 ICollectionView view = CollectionViewSource.GetDefaultView(lstOrdsRlsd); 
```

其中 lstOrdsRlsd 是名为 OrdsRlsd 的表实体的列表，如下所示：

```
List<OrdsRlsd> lstOrdsRlsd = new List<OrdsRlsd>(); 
```

我正在使用 ICollectionView 进行过滤。

我使用计时器从数据库中获取最新记录，如下所示：

```
 void timer_Tick(object sender, EventArgs e)
    {
        dbContext.SaveChanges();
        lstOrdsRlsd = dbContext.OrdsRlsds.Where(o => o.Location == MillName).ToList();
        view = CollectionViewSource.GetDefaultView(lstOrdsRlsd);
        dgRecords1.ItemsSource = view;
    } 
```

但我没有从数据库中获取最新记录。我需要数据库中的修改记录。

我没有使用 MVVM 模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:39:36.360

每次查询时，`dbContext`您都会从上下文的缓存中获取实体。要从数据库中获取新数据，您必须创建新的上下文实例或调用上下文的 Refresh 方法。

# ios - iOS 社交 api 是否可用于使用 facebook 或 twitter 对人员进行身份验证（让人们登录到您的应用程序）？

> ID：14910864
> 
> 赞同：3
> 
> 时间：2013-02-16T13:31:31.330
> 
> 标签：ios, facebook, authentication, twitter

**澄清**如果您只想使用 iOS 提供的社交 API（帐户框架），您可以让用户使用他们的 facebook 或 twitter 帐户登录您的应用程序吗？
如果是，那么您将使用什么与用户 ID（或名称、推特名称、脸书名称）一起确保（在服务器端）他们是谁。

**更具表现力的解释** 我很难理解原生 iOS（或 Android）应用程序中 3rd 方注册和登录集成背后的工作流程/逻辑，因此在 iOS 中，有一个中央商店可以保存用户的 twitter（或 facebook）凭据和应用程序可以调用 api 来获取用户的 twitter id，到目前为止一切都很好，但是如果我想与后端服务器交谈并证明用户是他们声称拥有用户 id 的人是不够的，
我错过了什么吗?

**我的问题是**，如果他们没有证明您的凭据，您如何使用您的后端服务器对用户进行身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T03:10:47.220

您可以使用 ACAccountStore 进行身份验证。感谢[http://blogs.captechconsulting.com/blog/eric-stroh/ios-6-tutorial-integrating-facebook-your-applications](http://blogs.captechconsulting.com/blog/eric-stroh/ios-6-tutorial-integrating-facebook-your-applications)提供以下大部分代码。

```
self.accountStore = [[ACAccountStore alloc]init];
ACAccountType *FBaccountType= [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
NSString *key = @"987654"; //put your own key from FB here
NSDictionary *dictFB = //use the ACAccountStore ACFacebookPermissionsKey to help create your dictionary of permsission you'd like to request, such as the users email, writing on the wall, etc.
[self.accountStore requestAccessToAccountsWithType:FBaccountType options:dictFB completion: ^(BOOL granted, NSError *e) {
    if (granted) {
        NSArray *accounts = [self.accountStore accountsWithAccountType:FBaccountType];
        //it will always be the last object with SSO
        self.facebookAccount = [accounts lastObject];
    } else {
        //Fail gracefully...
        NSLog(@"error getting permission %@",e);
    } 
}]; 
```

此时，您可以访问 accountStore 中的 oauth 令牌，您可以将其发送到您的服务器，以便与 facebook 进行任何服务器端交互。

# php - 仅显示循环中的一组数据

> ID：14910867
> 
> 赞同：0
> 
> 时间：2013-02-16T13:32:11.827
> 
> 标签：php, mysqli

我相信导致这个问题的原因是我设置的动态 WHERE 子句。以下是动态 WHERE 子句的工作原理：

*   强制 WHERE 条件`q.SessionId = ?`
*   如果用户从学生下拉菜单中选择单个学生，则添加`AND sa.StudentId = ?`到 WHERE 子句
*   如果用户 `All`从学生下拉菜单中选择学生选项，`AND sa.StudentId = ?`则从 WHERE 子句中删除或不显示
*   如果用户从问题下拉菜单中选择单个问题，则添加`AND q.QuestionId = ?`到 WHERE 子句
*   如果用户 `All`从问题下拉菜单中选择问题选项，`AND q.QuestionId = ?`则从 WHERE 子句中删除或不显示

我有三个下拉菜单（下面是示例数据的样子）：

**会议：**

```
<select name="session" id="sessionsDrop">
<option value="26">POKUB1</option>
<option value="27">POKUB2</option>
</select> 
```

**学生：**

```
<select name="student" id="studentsDrop">
<option value="0">All</option>
<option value="39">Luke Mcfadzen</option>
<option value="40">Chris Tucker</option>
</select> 
```

**问题：**

```
<select name="question" id="questionsDrop">
<option value="0">All</option>
<option value="72">1</option>
<option value="73">2</option>
</select> 
```

不要忘记我在上面这个问题中提到的 WHERE 条件是如何工作的。假设从会话下拉菜单中选择的会话是`POKUB 1, drop down value: 26`.

如果您选择一个学生和一个问题，那么它会正确显示详细信息，例如

*   **学生：** Luke McFadzen - 下拉值：39
*   **问题：** 1 - 下拉值：72

所以 WHERE 条件是`q.SessionId = 26 AND sa.StudentId = 39 AND q.QuestionId = 72`。

但是，如果我`All`在学生和问题下拉菜单中的一个或两个中选择一个选项，那么输出只显示一个学生和一个问题，并且出于某种奇怪的原因，它结合了所有问题的答案并将所有学生的答案结合到单个输出中。

现在`All`两个下拉菜单中的选项都有一个下拉值`0`，现在`0`不是从数据库中选择的值，但是我们在动态 where 子句中已经说明，如果`0`从特定下拉菜单中选择了一个值，则从中删除相关条件WHERE 子句，例如：

*   `All`学生和单个问题（价值`72`） -`WHERE q.SessionId = 26 AND q.QuestionId = 72`
*   单身（价值`39`）学生和`All`问题 -`WHERE q.SessionId = 26 AND sa.StudentId = 39`
*   `All`学生和`All`问题 -`WHERE q.SessionId = 26`

**上述场景存在问题**

如果我只是使用静态 WHERE 子句离开查询，`WHERE q.SessionId = ?`那么如果我选择`All`学生和`All`问题，它会正确输出详细信息，但我需要查询适用于从下拉菜单中选择的所有不同可能选项，因此我需要动态 WHERE条款。我怎样才能让它工作，以便输出正确的细节？

代码：

```
 $selectedstudentanswerqry = "
        SELECT
        sa.StudentId, StudentAlias, StudentForename, StudentSurname, q.SessionId, 
        q.QuestionId, QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, 
        GROUP_CONCAT( DISTINCT Answer ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, QuestionMarks, 
        GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, 
        (
        SELECT sum( StudentMark )
        FROM Student_Answer sta
        WHERE sa.StudentId = sta.StudentId
        AND sa.QuestionId = sta.QuestionId
        )StudentMark
        FROM Student st
        INNER JOIN Student_Answer sa ON (st.StudentId = sa.StudentId)
        INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId) AND sa.QuestionId = sr.QuestionId
        INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
        INNER JOIN Answer an ON q.QuestionId = an.QuestionId
        LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
        LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
        ";

        // Initially empty
        $where = array('q.SessionId = ?');
        $parameters = array($_POST["session"]);
        $parameterTypes = 'i';

        //check if POST is empty

        // Check whether a specific student was selected
        $p_student = empty($_POST["student"])?'':$_POST["student"];

        switch($p_student){
        case 0:
            //dont' add where filters
            break;
        default:
            $where[] = 'sa.StudentId = ?';
            $parameters[] .= $_POST["student"];
            $parameterTypes .= 'i';
        }

        // Check whether a specific question was selected
        $p_question = empty($_POST["question"])?'':$_POST["question"];

        switch($p_question){
        case 0:
            //dont' add where filters
            break;
        default:
            $where[] = 'q.QuestionId = ?';
            $parameters[] .= $_POST["question"];
            $parameterTypes .= 'i';
        }

        // If we added to $where in any of the conditionals, we need a WHERE clause in
        // our query
        if(!empty($where)) {
            $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
            global $mysqli;
            $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
            // You only need to call bind_param once

            if (count($where) == 1) {
            $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0]);
        }
        else if (count($where) == 2) {
            $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1]);
        }
        else if (count($where) == 3) {
            $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1], $parameters[2]);
        }

        }

        $selectedstudentanswerqry .= "
          GROUP BY sa.StudentId, q.QuestionId
          ORDER BY StudentAlias, q.SessionId, QuestionNo
        ";

    // get result and assign variables (prefix with db)
    $selectedstudentanswerstmt->execute(); 
    $selectedstudentanswerstmt->bind_result($detailsStudentId,$detailsStudentAlias,$detailsStudentForename,$detailsStudentSurname,$detailsSessionId,
    $detailsQuestionId,$detailsQuestionNo,$detailsQuestionContent,$detailsOptionType,$detailsNoofAnswers,$detailsAnswer,$detailsReplyType,$detailsQuestionMarks,
    $detailsStudentAnswer,$detailsResponseTime,$detailsMouseClick,$detailsStudentMark); 

    $selectedstudentanswerstmt->store_result();
    $selectedstudentanswernum = $selectedstudentanswerstmt->num_rows(); 

 while ($selectedstudentanswerstmt->fetch()) {

                //Check if the student data exist.
                if (!isset($questions[$detailsStudentId])) {
                    $questions[$detailsStudentId] = array(
                        'studentalias' => $detailsStudentAlias,
                        'studentforename' => $detailsStudentForename,
                        'studentsurname' => $detailsStudentSurname,
                        'questions' => array()
                    );
                }

                $questions[$detailsStudentId]['questions'][$detailsQuestionId] = array(
                    'questionno'=>$detailsQuestionNo,
                    'content'=>$detailsQuestionContent,
                    'optiontype'=>$detailsOptionType,
                    'noofanswers'=>$detailsNoofAnswers,
                    'answer'=>$detailsAnswer,
                    'replytype'=>$detailsReplyType,
                    'questionmarks'=>$detailsQuestionMarks,
                    'studentanswer'=>$detailsStudentAnswer,
                    'responsetime'=>$detailsResponseTime,
                    'mouseclick'=>$detailsMouseClick,
                    'studentmark'=>$detailsStudentMark
                );
            }

            $selectedstudentanswerstmt->close();

    foreach ($questions as $studentId => $studentData) {
        echo '<p>'.$studentData['studentalias'].' - '.$studentData['studentforename'].' '.$studentData['studentsurname'].'</p>';

        foreach ($studentData['questions'] as $questionId => $questionData) {
            echo '<p><strong>'.$questionData['questionno'].': '.$questionData['content'].'<br/>';
            echo $questionData['optiontype'].' - '.$questionData['noofanswers'].' - '.$questionData['answer'].' - '.$questionData['replytype'].' - '.$questionData['questionmarks'].'<br/>';
            echo $questionData['studentanswer'].' - '.$questionData['responsetime'].' - '.$questionData['mouseclick'].' - '.$questionData['studentmark'].'</strong></p>';
        }
    } 
```

以下是 和 的可能`$_POST['student']`var_dumps `$_POST['question']`：

**单个学生和单个问题：**

*   学生：Chris Tucker - string(2) "40"
*   问题：1 - 字符串（2）“72”

**单身学生和所有问题：**

*   学生：Chris Tucker - string(2) "40"
*   问题：全部 - 字符串（1）“0”

**所有学生和一个问题：**

*   学生：全部 - 字符串（1）“0”
*   问题：1 - 字符串（1）“72”

**所有学生和所有问题：**

*   学生：全部 - 字符串（1）“0”
*   问题：全部 - 字符串（1）“0”

以下是`var_dump($questions);`我选择`All`学生和`All`问题的示例：

```
array(1) { 
[39]=> array(4) { 
["studentalias"]=> string(8) "u4838229" 
["studentforename"]=> string(5) "Chris" 
["studentsurname"]=> string(6) "Tucker" 
["questions"]=> array(1) { 
[72]=> array(11) { 
["questionno"]=> int(1) 
["content"]=> string(14) "What is a RAM?" 
["optiontype"]=> string(3) "A-E" 
["noofanswers"]=> int(1) 
["answer"]=> string(7) "B,C,D,E" 
["replytype"]=> string(6) "Single" 
["questionmarks"]=> int(5) 
["studentanswer"]=> string(9) "A,B,C,D,E" 
["responsetime"]=> string(8) "00:00:07" 
["mouseclick"]=> int(1) 
["studentmark"]=> string(1) "2" } } } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:46:08.340

> empty() (PHP 4, PHP 5)
> 
> empty — Determine whether a variable is empty Returns FALSE if var exists and has a non-empty, **non-zero** value. Otherwise returns TRUE.

You might want to use other than `0` value for `All` option.

# javascript - 原型仅序列化可见的表单字段值

> ID：14910868
> 
> 赞同：3
> 
> 时间：2013-02-16T13:32:15.273
> 
> 标签：javascript, prototypejs, visible

是否可以`prototype.js`仅序列化可见的表单字段值。我有一个表单，其中元素具有相同的名称，但一个是可见的，另一个是隐藏的。当我使用 序列化表单时`$('formid').serialize()`，两个字段值都来了，输出如下：

```
user_email=abc@example.com&mymodule_custom_delivery_area=20&mymodule_custom_delivery_area=test 
```

第一个元素是下拉列表，而第二个元素是文本框。文本框被隐藏并显示下拉菜单。两者具有相同的名称。我不想取隐藏文本框的值。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:17:50.137

**警告**：不完整的解决方案；随意将其用作更好解决方案的起点：

不幸的是，在一般情况下，我还没有找到这样做的好方法，但是*如果*输入元素直接隐藏，则以下解决方案对我有用；但是，如果某些输入包含在另一个隐藏的元素中，则它不起作用。

无论如何，我的解决方案看起来像：

```
function check() {
    var inputs = $("myform").getElements();
    var visibleInputs = inputs.grep({ match: function(elem) { return elem.visible();} });
    var serialized = Form.serializeElements(visibleInputs);
    console.log(serialized); // here do something useful with it instead
} 
```

在第一行，它收集表单的所有字段列表。在第二行，它过滤了所有可见元素（`grep`需要一个带有`match`函数的项目，所以我提供了一个简单的字典和一个`match`键来欺骗它以为我传入了一个匹配器）。最后只有过滤的元素被序列化。

请：任何人都可以改进它以排除由于某些包含元素被隐藏而不可见的输入字段吗？我只能想到一些令人难以置信的复杂`match`功能，它会提升所有父母并单独检查每个父母是否隐藏。

# file-upload - $_FILES["file"]["size"] 以兆字节为单位

> ID：14910869
> 
> 赞同：0
> 
> 时间：2013-02-16T13:32:39.787
> 
> 标签：file-upload, filesize

我正在使用这部分代码在上传时获取可变大小

```
if ($_FILES["file"]["size"]<1024)
{ //do something
} 
```

但是当我上传超过 1mb 的文件时，它显示文件大小为 0。但是当我上传以字节或千字节为单位的文件时它可以工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:34:59.643

您确定这些上传是否成功？也许您的 upload_max_filesize 是 1M，因此实际上不会上传大于 1M 的文件。这就是为什么你得到0。只是猜测......

# ios - 通知到达时更改应用程序图标徽章

> ID：14910871
> 
> 赞同：0
> 
> 时间：2013-02-16T13:32:42.763
> 
> 标签：ios, xcode

在我的应用程序中，我已经注册了远程通知。当用户发布某些内容时，每个用户都会收到通知。我正在尝试计算到达的通知数量并更新图标徽章编号。

比如一个用户收到3个通知，徽章编号必须变成3，当用户打开应用程序时，徽章编号又回到0。但是我不知道用哪种方法设置徽章。我试过这个：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
application.applicationIconBadgeNumber = 2;    
// Handle Socialize notification at foreground
[self handleNotification:userInfo];
} 
```

这样做的问题是，如果我收到通知，当我实际打开应用程序（将其带到前台）时，徽章设置为 2，而不是在我收到通知时设置。我该如何解决这个问题？谢谢你的帮助。

编辑：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
[UIApplication sharedApplication].applicationIconBadgeNumber = [[[userInfo objectForKey:@"aps"] objectForKey: @"1"] intValue];
// Handle Socialize notification at foreground
[self handleNotification:userInfo];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T13:43:00.370

在发送通知之前，您需要确定服务器上的徽章计数。在应用程序收到通知时，确定正确的号码为时已晚，因为通知中的号码会立即覆盖应用程序设置的号码。

# android - 将数据插入 SQLite DB 时出现异常

> ID：14910872
> 
> 赞同：0
> 
> 时间：2013-02-16T13:32:44.637
> 
> 标签：android, sqlite, exception

我正在尝试将数据保存在 SQLite 中但出现异常，我检查了所有内容但仍然出现错误。
这是我的日志：

```
03-01 07:50:51.240: E/AndroidRuntime(3984): FATAL EXCEPTION: main
03-01 07:50:51.240: E/AndroidRuntime(3984): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.appstage.babyimmunisation/com.appstage.babyimmunisation.Notes}: android.database.sqlite.SQLiteException: near "create": syntax error: , while compiling: DROP TABLE IF EXISTS create table IF NOT EXISTS babydetails( notes_id integer primary key autoincrement, babyname text not null, babyIMAGE text not null, babygender text not null, babydob text not null, babybloodgroup text not null);

03-01 07:50:51.240: E/AndroidRuntime(3984): Caused by: android.database.sqlite.SQLiteException: near "create": syntax error: , while compiling: DROP TABLE IF EXISTS create table IF NOT EXISTS babydetails( notes_id integer primary key autoincrement, babyname text not null, babyIMAGE text not null, babygender text not null, babydob text not null, babybloodgroup text not null);
03-01 07:50:51.240: E/AndroidRuntime(3984):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)

03-01 07:50:51.240: E/AndroidRuntime(3984):     at com.appstage.babyimmunisation.Notes.onCreate(Notes.java:31) 
```

这是我的代码：
AddNotes.java

```
DBHelper db;
GetSet gs = new GetSet();

btnAddNotes.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            db=new DBHelper(getBaseContext());
            db.getWritableDatabase();
            gs.setNotes(notes);
            db.addNotes(gs);
            //db.close();

        }
    }); 
```

DBHelper.java

```
private static final String DATABASE_NOTES_CREATE = "create table IF NOT EXISTS "
        + TABLE_NOTES + "( " + COLUMN_NOTES_ID
        + " integer primary key autoincrement, " 
        + COLUMN_NOTES + " text not null);";

private static final String DATABASE_BABY_CREATE = "create table IF NOT EXISTS "
        + TABLE_BABYDETAILS + "( " + COLUMN_BABYID
        + " integer primary key autoincrement, " 
        + COLUMN_BABYNAME + " text not null, "
        + COLUMN_BABYIMAGE + " text not null, "
        + COLUMN_BABYGENDER + " text not null, "
        + COLUMN_BABYDOB + " text not null, "
        + COLUMN_BABYBLOODGROUP + " text not null);";

public DBHelper open() throws SQLException 
{
    db = this.getWritableDatabase();
    return this;
}

public DBHelper(Context context)
{
    super(context, DATABASE_NAME, null, DATABASE_VERSION);      
}

@Override
public void onCreate(SQLiteDatabase database) 
{
    database.execSQL(DATABASE_BABY_CREATE); 
    database.execSQL(DATABASE_NOTES_CREATE);    
}

@Override
public void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion)
{

    Log.w(DBHelper.class.getName(), "Upgrading database from version "
            + oldVersion + " to " + newVersion
            + ", which will destroy all old data");
    //database.execSQL("DROP TABLE IF EXISTS " + DATABASE_NOTES_CREATE);
    database.execSQL("DROP TABLE IF EXISTS " + DATABASE_BABY_CREATE);   
    database.execSQL("DROP TABLE IF EXISTS " + DATABASE_NOTES_CREATE);  
    onCreate(database);
}

 //getting all notes details
 public List<GetSet>getAllNotes()
 {
     List<GetSet>LocwiseProfileList=new ArrayList<GetSet>();
     String selectQuery= "SELECT  * FROM " + TABLE_NOTES;
      db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst())
        {
            do {
                GetSet owq= new GetSet();
                owq.setNotesId(cursor.getInt(0));
                owq.setNotes(cursor.getString(1));
                LocwiseProfileList.add(owq);
              }
            while(cursor.moveToNext());
            db.close();
        }
        return LocwiseProfileList;       
 }
 public void addNotes(GetSet gs) 
    {
        try
        {
            SQLiteDatabase db= this.getWritableDatabase();
            ContentValues values = new ContentValues();
            values.put(COLUMN_NOTES, gs.getNotes());                        
            db.insert(TABLE_NOTES, null, values);
            db.close(); 
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }

public void addBabyDetails(GetSet gs) {
    // TODO Auto-generated method stub
    try
    {
        SQLiteDatabase db= this.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(COLUMN_BABYNAME, gs.getAddBabyName());
        values.put(COLUMN_BABYDOB, gs.getAddBabyDOB());
        values.put(COLUMN_BABYGENDER, gs.getAddBabyGender());
        values.put(COLUMN_BABYBLOODGROUP, gs.getAddBabyBloodGroup());   
        values.put(COLUMN_BABYIMAGE, gs.getImagePath());
        db.insert(TABLE_BABYDETAILS, null, values);
        db.close(); 
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

} 
```

请给我任何关于我的错误或我错了的参考或提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:39:18.467

我认为`database.execSQL("DROP TABLE IF EXISTS " + DATABASE_BABY_CREATE);`应该是

```
database.execSQL("DROP TABLE IF EXISTS " + TABLE_BABYDETAILS); 
```

另一张桌子也是如此。但是，您应该尝试将问题减少到基本部分，而不是尽可能多地发布源代码。另外，考虑到抛出异常`Notes.java`，添加该文件的（相关部分）会有所帮助。

# javascript - 缓存 jquery 对象简单代码

> ID：14910878
> 
> 赞同：0
> 
> 时间：2013-02-16T13:33:42.797
> 
> 标签：javascript, jquery, performance

我正在尝试在我非常复杂的 JS 代码中实现缓存和减少 DOM 操作。我只是想确定，什么更有效？

1)

```
var $thebox = $(".textbox[data-title*='"+dt+"']");

    $thebox.remove(); 
```

或者

2) `$(".textbox[data-title*='"+dt+"']").remove();`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:48:44.900

如果您使用 $(".textbox[data-title*='"+dt+"']") 一次，它们是相同的。

这取决于你的情况。如果您**必须在删除所有****“选择器”**之前重新创建“选择器”。

你必须使用 $(".textbox[data-title*='"+dt+"']").remove();

因为 $thebox 现在已经过时了。

# jquery - jQuery toggleClass 在第二个 div 上不起作用

> ID：14910879
> 
> 赞同：1
> 
> 时间：2013-02-16T13:33:55.383
> 
> 标签：jquery, html, slidetoggle, toggleclass

我想为我糟糕的英语感到抱歉，因为我是意大利人。我有 1 页 html 和 2 个 jQuery slideToggle 以及用于更改按钮中的“显示”和“隐藏”的相关切换类。在第一个 div toggleClass 中正常工作，但在第二个 div toggleClass 中无法正常工作。请阅读我的代码。

```
<html> 
<head> 
<script src="jquery.js" type="text/javascript"></script> 
<script type="text/javascript"> 
$(document).ready(function(){ 
    $("#panel").show(); 
    $(".show_hide").click(function(){ 
        $("#panel").slideToggle("slow"); 
        $(this).toggleClass("lactive"); return false; 
    }); 
    $("#menu").show(); 
    $(".menu").click(function(){ 
        $("#menu").slideToggle("slow"); 
        $(".menu").toggleClass("active"); return false;
    }); 
}); 
</script> 
<style type="text/css" rel="stylesheet"> 
.sli { 
    margin: 0; 
    padding: 0; 
    background: url(btn-slide.gif) no-repeat center top; 
}     
.slide { 
    margin: 0; 
    padding: 0; 
    background: url(btn-slide.gif) no-repeat center top; 
} 
.show_hide { 
    background: url(up.png) no-repeat 120px 10px; 
    text-align: center; 
    width: 144px; 
    height: 31px; 
    padding: 10px 10px 0 0; 
    margin: 0 auto; 
    display: block; 
    font: bold 120%/100% Arial, Helvetica, sans-serif; 
    color: #fff; 
    text-decoration: none; 
} 
.active { 
    background: url(down.png) no-repeat 120px 10px; 
} 
.lactive { 
    background: url(down.png) no-repeat 120px 10px; 
} 
.menu { 
    background: url(up.png) no-repeat 120px 10px; 
    text-align: center; 
    width: 144px; 
    height: 31px; 
    padding: 10px 10px 0 0; 
    margin: 0 auto; 
    display: block; 
    font: bold 120%/100% Arial, Helvetica, sans-serif; 
    color: #fff; 
    text-decoration: none; 
} 
</style> 
</head> 
<body> 
<!-- primo FUNZIONANTE --> 
<p class="slide"> 
                  <a href="#" class="show_hide" style="text-decoration: none; "> 
                     Login 
                  </a> 
                </p> 
<div id="panel"> <!-- # Pannello nascondibile --> 
                              Testo qui 
                           </div> 

<hr> 

<!-- secondo NON FUNZIONANTE --> 
<p class="sli"><a href="#" class="menu" style="text-decoration: none; "> 
                         mos 
                          </a></p> 
            <div id="menu"> 
                menu 
            </div> 
            <hr>
</body> 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:47:58.397

我假设您希望第二个元素的行为方式与第一个元素相同。如果这是正确的，您需要将第二个元素的点击调用更改为：

```
$(".menu").click(function(){ 
    $("#menu").slideToggle("slow"); 
    $(this).toggleClass("active");
}); 
```

[jsFiddle 在这里](http://jsfiddle.net/BYEDs/1/)。您还需要确保您的 CSS 没有被覆盖。如果这不是您想要的，请详细说明您的问题...

# node.js - Node.js 请求模块 + NGINX

> ID：14910880
> 
> 赞同：2
> 
> 时间：2013-02-16T13:34:00.270
> 
> 标签：node.js, nginx, request, httprequest

我正在开发一个网络客户端，它使用[Node.js 的请求模块](https://github.com/mikeal/request)请求服务器。发送的请求是 POST 请求。服务器是使用 Express 用 Node.js 编写的。NGINX 的另一层充当代理并将请求重定向到用 Node.js 编写的服务器。

问题是：每当我尝试发送请求时，在没有明确定义任何标头的情况下，NGINX 都会发送内容长度的 html 错误，#411（需要长度）。然而，当我尝试使用浏览器和 curl 发送类似的请求时，一切正常。示例代码如下：

```
request.post(url, function(err, response, data) {
     if(err) {
         console.log(err);
     } else {
         console.log(data);
     }
}).form({'data':'someValue'}) 
```

此外，现在当我将 content-length 添加到请求的标头时，NGINX 挂起，似乎 NGINX 正在等待更多数据到达。NGINX 不会将请求转发到服务器。

添加选项以包括内容长度

```
var dataObj = {'data' = 'someValue'};

var options = {
    'uri' = url
    , 'headers' = {
        'Content-Length' = JSON.stringify(dataObj).length
    } 
};

    request.post(options, function(err, response, data) {
         if(err) {
             console.log(err);
         } else {
             console.log(data);
         }
    }).form({'data':'someValue'}); 
```

我在发送请求时做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:03:13.043

我找到了解决方案。我正在发送 JSON 数据。错误是我正在使用`form()`函数，它将标题设置为“内容类型：应用程序/x-www-form-urlencoded；charset=utf-8”。引用[请求文档](https://github.com/mikeal/request)

> form - 当传递一个对象时，这将设置 body 但为 value 的查询字符串表示并添加 Content-type: application/x-www-form-urlencoded; charset=utf-8 标头。当不传递任何选项时，将返回一个 FormData 实例，该实例将通过管道传递给请求。auth - 包含用户值的哈希 || 用户名、密码 || 通过，并立即发送（可选）。请参阅上面的文档。json - 将 body 设置为 JSON 表示值并添加 Content-type: application/json 标头。此外，将响应正文解析为 json。

一旦我使用了`json`选项并删除了`form()`功能，它就开始正常工作。

# java - 覆盖期间的动态多态性

> ID：14910883
> 
> 赞同：0
> 
> 时间：2013-02-16T13:34:23.657
> 
> 标签：java, reference, polymorphism, overriding

我在 A 类中创建了两个方法，在 B 类中被覆盖，如下所示。我有一些与动态多态性和覆盖有关的问题。

这是我的代码，其中 B 类扩展了 A 类。

```
public class A {

    public void methoda()
    {
        System.out.println("a");
    }
    public void methodb()
    {
        System.out.println("aaa");
    }
    public static void main(String[] args) {
    B a =new B();
    A b=a;
    b.methoda();

    }

}

public class B extends A{
@overrides
public void methoda()
{
    System.out.println("A");
}
@overrides
public void methodb()
{
    System.out.println("g");
}
} 
```

在这里，我重写了两个方法，当使用超类引用时，调用的方法取决于在运行时确定的对象类型，并且是动态多态性的一个示例。

但是，如果我对子类对象使用子类引用并覆盖该方法，那么被覆盖的对象将在运行时得到解决，并且是动态多态性的一种情况，或者仅在编译时解决，因为对象类型和引用是相同的类型并且不会保持动态多态的情况？

重写和动态多态性总是同时发生吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T13:41:33.513

我不确定我是否理解这个问题，但多态方法总是在运行时解决。执行的方法是对象的具体运行时类型之一。引用它的变量的声明类型无关紧要。

狮子就是狮子，它总是会咆哮，即使你把它称为动物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:45:41.540

First, [(subtype) polymorphism](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29#Subtype_polymorphism_.28or_inclusion_polymorphism.29) is always dynamic(i.e. at runtime), so "dynamic" modifier is redundant, unless it's used to distinguish from [ad-hoc polymorphism](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29#Ad-hoc_polymorphism) or [parametric polymorphism](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29#Parametric_polymorphism).

Second, @Override(not *@overrides*) annotation isn't mandatory(in fact it's only introduced by Java 5.0), although it's recommended for more readable(explicitly shows the overridden method) and more robust(compiler will check the misspelt methods) code.

In a word, method overriding is an OOP language's key feature, and annotation @Override is checked at compile-time, while polymorphic behavior is resolved at runtime.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T08:35:00.587

如果您使用对子类对象的子类引用，则无需覆盖。仅当基类的指针指向其子类之一的对象并且此指针调用基类的方法时才会发生覆盖。但是实际执行的方法是子类的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T13:40:30.063

是否通过子类引用都没关系。重要的是创建的实例。如果您的实例是从 B 创建的，您将获得 B 的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-27T07:30:25.337

```
class Bike {  
   void run() {
      System.out.println("running");
   }  
}  

class Splender extends Bike {  
   void run() {
      System.out.println("Bike is running");
   }  

   public static void main(String args[]) {

      Bike a = new Bike();
      a.run(); //output: running

      Bike b = new Splender();  
      b.run(); //output: Bike is running 
   }  
} 
```

这里超类（自行车）引用指向子类对象。该对象是在运行时而不是在编译时创建的。不管是不是，

1) 引用变量和对象类型相同或

2）引用变量是超类类型，对象是子类类型。

在上面的示例中，编译器无法确定对象类型，因为 Splender 的实例也是 Bike 的实例。JVM 在运行时根据创建的对象类型调用该方法。这两种情况都是动态多态性而不是编译时多态性。

# c++ - 二维矩形滑动碰撞不起作用

> ID：14910886
> 
> 赞同：0
> 
> 时间：2013-02-16T13:34:36.553
> 
> 标签：c++, 2d, sdl, collision, rectangles

所以我正在开发一个小逃生游戏，我想确保你不能穿过墙壁。我也希望能够滑过墙壁。我的意思是当你的左边有一堵墙时，你按左上推，你向上滑动但不要穿过墙。首先，我编造了一些运行不佳的错误代码。在网上搜索了一番后，我发现了这个：

[http://xboxforums.create.msdn.com/forums/t/59723.aspx](http://xboxforums.create.msdn.com/forums/t/59723.aspx)

这听起来非常合乎逻辑和简单，所以我在我的程序中实现了它。问题是它仍然不起作用，只是非常不规则。有时它允许你滑动（虽然比预期的慢/快），有时你只能滑动得更快，有时你根本不能滑动。我的代码如下所示：

```
bool cLevel::slideCol(SDL_Rect* pos, SDL_Rect* oldPos) {
    bool col = false;

    for (int i = 0; i < walls.size(); ++i) {
        if (rectCol(*pos, walls[i])) {
            pos->x = oldPos->x;
            col = true;
        }

        if (rectCol(*pos, walls[i])) {
            pos->y = oldPos->y;
            col = true;
        }
    }

    return col;
} 
```

它根据当前位置检查所有墙壁。它首先调整 x 位置，如果仍有碰撞，它会调整 y 位置。如果您想查看我的问题，您可以在此处获得演示：[https](https://dl.dropbox.com/u/65227065/Operation%20Get%20Out.zip) ://dl.dropbox.com/u/65227065/Operation%20Get%20Out.zip 。我很确定 rectCol 功能有效，我已经彻底测试过了。但可以肯定的是，无论如何，这里是：

```
bool rectCol(SDL_Rect f, SDL_Rect s) {
    bool ret = false;

    int t1, r1, b1, l1;
    int t2, r2, b2, l2;

    t1 = f.y;
    r1 = f.x + f.w;
    b1 = f.y + f.h;
    l1 = f.x;

    t2 = s.y;
    r2 = s.x + s.w;
    b2 = s.y + s.h;
    l2 = s.x;

    // Er zijn vier situaties mogelijk: - rechtsonder1 overlapt linksboven2
    //                                  - linksonder1 overlapt rechtsboven2
    //                                  - linksboven1 overlapt rechtsonder2
    //                                  - rechtsboven1 overlapt linksonder2
    // Die worden hier elk individueel gechecked

    if (r1 > l2 && r1 < r2) { // rechts
        if (b1 > t2 && b1 < b2) { // onder1 overlapt linksboven2
            ret = true;
        } else if (t1 > t2 && t1 < b2) { // boven overlapt overlapt linksonder2
            ret = true;
        }
    } else if (l1 > l2 && l1 < r2) { // links
        if (b1 > t2 && b1 <= b2) { // onder1 overlapt rechtsboven2
            ret = true;
        } else if (t1 > t2 && t1 < b2) { // boven1 overlapt met rechtsonder2
            ret = true;
        }
    }

    return ret;
} 
```

我在我的智慧尽头。也许我只是错过了一些非常简单的东西（我可能一如既往）但我似乎无法弄清楚这一点。希望你们能帮助我，否则“提交”问题会让我看到曙光。

提前致谢！

[编辑] 好的，所以我再次尝试了我原来的方法，因为我有预感。事实证明，我原来的系统不起作用，因为在一个函数中，我在浮点坐标和整数坐标之间来回跳跃。因此，如果将来有类似问题的人发现了这个线程，那么请确保您坚持一种类型：整数或浮点数。这将为您省去很多麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:59:17.540

您的`rectCol`函数指示是否发生了碰撞，但它不区分 X 中的碰撞和 Y 中的碰撞。

如果发生了碰撞，`slideCol`即使碰撞完全在 Y 轴上，您的函数也会调整 X 位置。因此您不能沿着地板或天花板滑动。

我不知道为什么滑动有时“比预期的”慢或快。我在代码中看不出有任何理由（而且我不会用你的 dll 做实验），所以我怀疑你的期望可能不切实际。

# android - 在滑块中添加片段

> ID：14910892
> 
> 赞同：0
> 
> 时间：2013-02-16T13:35:00.207
> 
> 标签：android, android-actionbar, actionbarsherlock, sliding, slidingmenu

我将这个[库](https://github.com/jfeinstein10/SlidingMenu)用于我的滑动菜单。如果我制作一个简单的片段并滑动，我将无法滑动。这是代码。如果我使用 MapFragment，代码将失败。如果我添加 SampleListFragment() 而不是 MapFragment 它工作正常。

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setTitle("Testing");

        setContentView(R.layout.content_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.content_frame, new Mapfragment())
        .commit();
        //.beginTransaction().commit();
        //.replace(R.id.content_frame, new SampleListFragment())
//  .commit();

        menu = new SlidingMenu(this);
        menu.setMode(SlidingMenu.LEFT);
        menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
        menu.setShadowWidthRes(R.dimen.shadow_width);
        menu.setShadowDrawable(R.drawable.shadow);
        menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
        menu.setFadeDegree(0.35f);
        menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
        menu.setMenu(R.layout.menu_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.menu_frame, new SampleListFragment())
        .commit();
    } 
```

我的 MapFragment 代码。

```
public class Mapfragment extends SherlockFragment{

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.activity_main, null);
    } 
```

Activity_main 代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

这是我的 content_frame 代码，

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/content_frame"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

你能告诉错误在哪里。

# jquery - jQuery拖放显示div名称

> ID：14910893
> 
> 赞同：0
> 
> 时间：2013-02-16T13:35:20.797
> 
> 标签：jquery, jquery-ui, drag-and-drop, jquery-ui-draggable

我需要为我的脚本添加一个额外的帮助。在我拖放项目后，它会打印出：dropped。有没有办法将其打印为类项名称？比如：如果我拖动 Item1，它会打印出 Item 1 和 item2、item3、item4、item5 等等。

```
<link rel="stylesheet" href="css/style.css" type="text/css"></link>
<script type="text/javascript" src="js/jquery1.4.2.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.2.custom.min.js"></script>
<script type="text/javascript" src="js/dragdrop.js"></script>

<div id="xx" class="out">
    <p>Drop here</p>
</div>

<div class="item" name="item1">Item1</div>
<div class="item" name="item2">Item2</div> 
```

## 第 3 项

```
$(function() {
        $(".item").draggable({
                revert: true
        });
        $("#xx").droppable({
                tolerance: 'touch',
                over: function() {
                       $(this).removeClass('out').addClass('over');
                },
                out: function() {
                        $(this).removeClass('over').addClass('out');
                },
                drop: function() {
                    $( this ).find( "p" ).html( "Dropped!" );
                        $(this).removeClass('over').addClass('out');
                }
        });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:54:04.630

你希望这发生吗？ [jsfiddle](http://jsfiddle.net/jsfZc/2/)

```
drop: function(e, ui) {
     $( this ).find( "p" ).html('Dropped ' + ui.draggable.attr('name'));
     $(this).removeClass('over').addClass('out');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:44:59.810

If I understand you correctly, you'd want this:

```
 drop: function() {
            $( this ).find( "p" ).html( $( this ).attr("class") );
            $(this).removeClass('over').addClass('out');
        } 
```

# c# - 本地文件存储自动删除内容

> ID：14910896
> 
> 赞同：2
> 
> 时间：2013-02-16T13:35:36.240
> 
> 标签：c#, windows-8, xml-serialization, windows-runtime

```
 public static async Task SaveFileAsync(string FileName, T data)
    {
        MemoryStream memStream = new MemoryStream();
        DataContractSerializer serializer = new DataContractSerializer(typeof(T));
        serializer.WriteObject(memStream, data);

        StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync(FileName,
            CreationCollisionOption.ReplaceExisting);
        using (Stream stream = await file.OpenStreamForWriteAsync())
        {
            memStream.Seek(0, SeekOrigin.Begin);
            await memStream.CopyToAsync(stream);
            await stream.FlushAsync();
        }
    }

    public static async Task<T> RestoreFileAsync(string FileName)
    {
        T result = default(T);
        try
        {
            StorageFile file = await ApplicationData.Current.LocalFolder.GetFileAsync(FileName);
            using (IInputStream inStream = await file.OpenSequentialReadAsync())
            {
                DataContractSerializer serializer = new DataContractSerializer(typeof(T));
                result = (T)serializer.ReadObject(inStream.AsStreamForRead());
                return result;
            }
        }

        catch (FileNotFoundException)
        {
            return default(T);
        }
    } 
```

我正在使用此代码来保存和检索我的数据，它工作正常。

将我的数据保存在此本地文件中并启动我的应用程序后，有时没有数据。

我将我的数据保存为`.xml`文件。

每次保存时我都会检查文件，其中包含已保存的内容。但有时它会删除它，我不知道为什么。

我试过`DataContractJsonSerializer`了，仍然有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:40:59.767

我在我的项目中遇到了同样的问题。我在调用 SaveFileAsync 之前添加了**await**关键字。我不再在 App.xaml.cs 的 OnSuspending 处理程序中调用此方法，它现在可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:50:29.227

正如 Jerry 指出的，这可能是一个锁定问题。它也可能是一种竞争条件（我们看不到调用这些方法的代码，因此请确保在另一个已经运行时不能调用其中一个）。

我看到的一个潜在领域是这两行：

```
storageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync(FileName,
        CreationCollisionOption.ReplaceExisting);
    using (Stream stream = await file.OpenStreamForWriteAsync()) 
```

在此代码中，您关心在一个步骤中创建文件（必要时覆盖），然后在另一个步骤中打开文件。您正在等待，所以我在这里没有看到任何问题，但是如果您最终得到一个空文件，那么这两行之间可能会出现故障，这是有道理的。事实证明，OpenStreamForWriteAsync 的重载允许您在文件不存在时创建文件，如果文件存在则覆盖它。您可以将这两个步骤合二为一。

[http://msdn.microsoft.com/en-us/library/hh582148.aspx](http://msdn.microsoft.com/en-us/library/hh582148.aspx)

最后（我认为这与您的问题无关）您可以完全跳过内存流。DataContractSerializer 可以直接写入 FileStream 就好了。不妨为自己节省几行代码和内存占用。

我希望这会有所帮助。如果您弄明白了，请告诉我们。

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

# jquery - jQuery 移动页面不占用页面的全宽/缩放

> ID：14910904
> 
> 赞同：0
> 
> 时间：2013-02-16T13:36:51.133
> 
> 标签：jquery, html, css, jquery-mobile

大家好，我搜索了很多，但我找不到解决问题的方法，我正在使用 jQuery mobile，我有一个元素`data-role="page" and data-url="link"`

现在我的问题是我的元素没有占据屏幕的整个宽度，就像用户放大到最大一样，这就是我想要的。我也设置`<meta name="viewport" content="width=device-width, user-scalable=no">`了但没有运气:(

请大家给我一个解决方案。

//LE

```
<?php get_header(); ?>
<?php $var1 = query_posts('post_type=Home Pages&meta_key=select_column_column&meta_value=Left');?>
 <?php if (have_posts($var1)) : ?>
     <?php while (have_posts()) : the_post(); ?>
     <?php $color = get_post_meta($post->ID,'select_color_color',true); ?>
                <article data-role="page" data-transition="slide">
                    <div class="sprite top-<?=$color?>"></div>
                    <div class="txt <?=$color?> clearfix">
                        <?php if(has_post_thumbnail()): ?>
                          <?php the_post_thumbnail('post-image'); ?>
                        <?php endif; ?>
                        <h2><?php the_title(); ?></h2>
                        <?php the_content(); ?>
                    </div>
                    <div class="sprite bottom-<?=$color?>"></div>
                </article>
        <?php endwhile; ?>
<?php endif; wp_reset_query();?>

<?php get_footer(); ?>

  $('article').bind("swipeleft", function(){
    var nextpage = $(this).next('article[data-role="page"]');
    // swipe using id of next page if exists
    if (nextpage.length > 0) {
      $.mobile.changePage(nextpage, {transition: "slide",
    reverse: false}, true, true);
    }
    $('article').unbind('swipeleft', nextpage);
  });

  $('article').bind("swiperight", function(){
    var prevpage = $(this).prev('article[data-role="page"]');
    if (prevpage.length > 0) {
    $.mobile.changePage(prevpage, {transition: "slide",
    reverse: true}, false, true);
    }
    $('article').unbind('swiperight', prevpage);
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:31:38.627

试试这个作为文档头中的视口标签：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

这应该设置一个确定的宽度并防止放大和缩小，允许您在 jQuery 中获取一个固定的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:28:05.137

我是个白痴，看起来我的主图像有 224 像素，所以为了占据整个空间/宽度，它需要 400 像素以上

# crystal-reports - Crystal Report - vs 2003 项目的加载报告失败

> ID：14910915
> 
> 赞同：0
> 
> 时间：2013-02-16T13:38:16.590
> 
> 标签：crystal-reports, iis-7.5, visual-studio-2003

我正在使用带有捆绑水晶报告和 asp v1.1 的 vs 2003

操作系统：服务器 2008 r2 iis 7.5

这是我尝试打开 reoprt 报告在开发系统上正常工作时遇到的错误。生产系统出现问题

我尝试了很多在网上找到的解决方案。请帮忙...！！

Report 也是使用捆绑的水晶报表软件开发的。他们是生产系统需要的任何水晶报告更新吗

这是我得到的错误

> 加载报告失败。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：CrystalDecisions.CrystaReports.EngineloadSaveReportException：加载报告失败。
> 
> 源错误：
> 
> adp.Dispose()
> 
> 将 MyReport 调暗为 AbstractofResultsReport = 新 AbstractofResultsReport
> 
> **MyReport.SetParametervalue("CurrYear". CurrYear)**错误发生在这里
> 
> MyReport.SetDataSource(ds)
> 
> 将操作系统调暗为 System.IO.Stream
> 
> 源文件：C:\inetpub\wwwroot\VHSE\AbstractofResuttsRep.aspx.vb
> 
> 版本信息：Microsoft NET Framework 版本：1.1.4322.2032；ASP.NET 版本：1.1.4322.2032

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:32:22.950

我不确定这是否是一个错字，但是：

`MyReport.SetParametervalue("CurrYear". CurrYear)`

最有可能是：

`MyReport.SetParametervalue("CurrYear", CurrYear)`

假设您之前已经定义了 CurrYear？

# java - JSch - 为什么 CD 不起作用？

> ID：14910926
> 
> 赞同：3
> 
> 时间：2013-02-16T13:40:14.867
> 
> 标签：java, ssh, jsch

我一直在尝试使用 JSch，并制作了一个小型 GUI。

但是，当我尝试使用 cd work_folder 时，会出现一个退出代码 0，表示成功，但是，当前目录并没有改变。

但是，当我尝试 ls、pwd、mkdir zzzz 时，所有这些命令都成功执行了。

以前有人遇到过这个问题吗？

# jquery - 如何在页面加载之前运行加载动画

> ID：14910927
> 
> 赞同：1
> 
> 时间：2013-02-16T13:40:18.543
> 
> 标签：jquery, html, css

就像这个一样 - [http://www.solasie.com/en/](http://www.solasie.com/en/)。此外，我希望动画每次都加载，而不是第一次加载。

以下是相关问题。

[使用 JQuery 加载页面时显示动画](https://stackoverflow.com/questions/6658270/display-an-animation-while-loading-a-page-using-jquery?rq=1)和

[如何在 Flash 加载之前加载动画 gif](https://stackoverflow.com/questions/8449399/how-to-load-animated-gif-before-flash-load?rq=1)

编辑 1

我尝试使用以下代码。它显示一个错误。

```
<html >
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<title>Page Title</title>
</head>
<body>
<div id="loading">
<img src="counting30ll6.gif" > 
</div>
<script type="text/javascript">
  $(window).load(function(){
  $('#loading').delay(10000).queue(function(){ $(this).hide();$(this).dequeue(); });
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:47:32.243

In fact, this animation is running after the page loads. Wrap all your animation code into a function and then bind it on onLoad event. This will make the impression that you want.

**EDIT** Here is a little jsfiddle that might give you some direction.

jsfiddle.net/gBspY/

# java - 一个简单的 java 程序的命令提示符“拒绝访问”错误

> ID：14910934
> 
> 赞同：0
> 
> 时间：2013-02-16T13:41:11.553
> 
> 标签：java, windows, cmd

我使用以下代码创建了源文件 .java：

```
// bank.java
// demonstrates basic OOP syntax
// to run this program: C>java BankApp
////////////////////////////////////////////////////////////////
class BankAccount
{
private double balance;                   // account balance
public BankAccount(double openingBalance) // constructor
{
balance = openingBalance;
}
public void deposit(double amount)        // makes deposit
{
balance = balance + amount;
}
public void withdraw(double amount)       // makes withdrawal
{
balance = balance - amount;
}
public void display()                     // displays balance
{
System.out.println(“balance=” + balance);
}
}  // end class BankAccount
////////////////////////////////////////////////////////////////

class BankApp
{
public static void main(String[] args)
{
BankAccount ba1 = new BankAccount(100.00); // create acct
System.out.print(“Before transactions, “);
ba1.display();                         // display balance
ba1.deposit(74.35);                    // make deposit
ba1.withdraw(20.00);                   // make withdrawal
System.out.print(“After transactions, “);
ba1.display();                         // display balance
}  // end main()
}  // end class BankApp 
```

我使用命令“javac”编译它并得到两个类文件——每个文件对应一个类。我尝试使用 cmd 运行它，但输入后出现错误“访问被拒绝”：

```
C:\new>java -cp <C:\new> BankApp.class 
```

输入后：

```
C:\new>java BankApp.class 
```

我得到：错误：找不到或加载主类 BankApp.class

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T13:44:30.287

这个命令

```
C:\new>java -cp <C:\new> BankApp.class 
```

尝试从 重定向输入`C:\new`并将输出重定向到`BankApp.class`. 在 Windows 命令提示符（以及大多数其他命令提示符）中，`<`重定向输入和`>`重定向输出。另外，当您运行 Java 类时，您不指定`.class`，而是给出*类*名，而不是文件名。

如果您的目标是确保当前目录位于类路径中，那么您正在寻找的是：

```
C:\new>java -cp . BankApp 
```

如果您的目标是确保该目录`c:\new`位于类路径中（即使它不是当前目录，尽管它在您的示例中），那么您正在寻找的是：

```
C:\new>java -cp c:\new BankApp 
```

* * *

请注意，您第一次尝试的命令很可能已经删除或截断了您的`BankApp.class`文件，因此您可能必须重新编译它，然后才能执行上述操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T13:44:38.147

您只需：

```
java BankApp 
```

或者

```
java -cp c:\new BankApp 
```

Java 采用*类*的名称，而不是*文件*的名称……如果您使用`<`并且`>`要求 Windows shell 执行重定向，这是您不想要的。

# java - 移动电子商务网站上的关键页面

> ID：14910935
> 
> 赞同：0
> 
> 时间：2013-02-16T13:41:16.587
> 
> 标签：java, php, mobile, media-queries

有没有办法在 java / php 中找出用户是否在移动设备上，以便生成的代码针对浏览器进行优化。通过这种方式，我可以停止一些耗时的 java 代码、php 代码和 html 代码，它们会减慢我的用户速度。

我的公司是一家拥有 10 年历史的电子商务公司，拥有庞大的网站和大量耗时的电话。我不想创建一个单独的移动站点，因为我不喜欢维护两个代码库。我要做的是在当前站点上创建一个简单的移动皮肤并优化关键页面，并通过导航连接它们。

提前致谢！

# objective-c - KVO可以用来观察全局变量吗？

> ID：14910940
> 
> 赞同：5
> 
> 时间：2013-02-16T13:41:43.977
> 
> 标签：objective-c, cocoa-touch, key-value-observing

我有一个全局变量 ，`User * currentUser;`它可以从任何类中更改。我想`NSUserDefaults`在任何更改时保存它。

是否可以将 KVO 用于这样的全局变量，或者有没有其他方法可以实现类似的效果？

我添加了我的应用程序委托作为观察者`currentUser`：

```
 [self addObserver:self forKeyPath:@"currentUser" options:NSKeyValueObservingOptionNew context:nil]; 
```

--

```
-(void)observeValueForKeyPath:(NSString *)keyPath
                     ofObject:(id)object
                       change:(NSDictionary *)change
                      context:(void *)context
{
    if ([keyPath isEqualToString:@"currentUser"])
    { 
        NSDictionary * userDict = [currentUser dictionaryRepresantation];

        [UserDefaults setObject:userDict forKey:@"USER_DATA"];
        [UserDefaults synchronize];
    }
} 
```

但这不叫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T13:46:01.010

您不能为全局变量添加观察者，KVO 仅适用于对象的属性。您可以将全局变量包装在应用程序委托上的 getter/setter 对中，但您也可以使用常规属性，因为只有使用 setter 的更改才会触发 KVO 通知。

此外，无论如何，您都不应该使用全局变量，即使您将它们伪装成“单例”也不行。

# .net - 故事板不起作用

> ID：14910941
> 
> 赞同：0
> 
> 时间：2013-02-16T13:41:45.967
> 
> 标签：.net, wpf

我想旋转以及放大然后缩小 TextBlock。我想使用 Stroyboard 并在代码隐藏文件中编写代码。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded_1">
    <Grid>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
            <TextBlock Name="rotatingTextBlock" Text="Hello" RenderTransformOrigin="0.5, 0.5"/>
            <TextBlock Text=" World!"/>
        </StackPanel>
    </Grid>
</Window> 
```

..

```
private void Window_Loaded_1(object sender, RoutedEventArgs e)
{
    TransformGroup tc = new TransformGroup();
    RotateTransform rotateTransform = new RotateTransform();
    tc.Children.Add(rotateTransform);
    ScaleTransform scaleTransform = new ScaleTransform();
    tc.Children.Add(scaleTransform);

    rotatingTextBlock.RenderTransform = tc;

    Storyboard storyboard = new Storyboard();
    DoubleAnimation rotateAnimation = new DoubleAnimation(0, 360, new Duration(TimeSpan.FromSeconds(2)));
    rotateAnimation.AccelerationRatio = 0.15;
    rotateAnimation.DecelerationRatio = 0.15;
    Storyboard.SetTarget(rotateAnimation, rotateTransform);
    Storyboard.SetTargetProperty(rotateAnimation, new PropertyPath(RotateTransform.AngleProperty));
    storyboard.Children.Add(rotateAnimation);

    DoubleAnimation scaleAnimation = new DoubleAnimation(1, 1.2, new Duration(TimeSpan.FromSeconds(1)));
    scaleAnimation.AccelerationRatio = 0.5;
    scaleAnimation.DecelerationRatio = 0.5;
    scaleAnimation.AutoReverse = true;
    Storyboard.SetTarget(scaleAnimation, scaleTransform);
    Storyboard.SetTargetProperty(scaleAnimation, new PropertyPath(ScaleTransform.ScaleXProperty));
    storyboard.Children.Add(scaleAnimation);

    storyboard.Begin();
} 
```

我的代码不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:37:01.650

根据[Storyboard.SetTarget 仅适用于 UIElements，但不会抛出异常](http://connect.microsoft.com/VisualStudio/feedback/details/723701/storyboard-settarget-only-works-on-uielements-but-throws-no-exception)，似乎您不能`Transform`直接定位 a。如果您`TextBlock`使用正确的目标，`PropertyPath`它可以工作：

```
Storyboard storyboard = new Storyboard();
DoubleAnimation rotateAnimation = new DoubleAnimation(0, 360, new Duration(TimeSpan.FromSeconds(2)));
rotateAnimation.AccelerationRatio = 0.15;
rotateAnimation.DecelerationRatio = 0.15;
Storyboard.SetTarget(rotateAnimation, rotatingTextBlock);
Storyboard.SetTargetProperty(rotateAnimation, new PropertyPath("RenderTransform.Children[0].(RotateTransform.Angle)"));
storyboard.Children.Add(rotateAnimation);

DoubleAnimation scaleAnimation = new DoubleAnimation(1, 1.2, new Duration(TimeSpan.FromSeconds(1)));
scaleAnimation.AccelerationRatio = 0.5;
scaleAnimation.DecelerationRatio = 0.5;
scaleAnimation.AutoReverse = true;
Storyboard.SetTarget(scaleAnimation, rotatingTextBlock);
Storyboard.SetTargetProperty(scaleAnimation, new PropertyPath("RenderTransform.Children[1].(ScaleTransform.ScaleX)"));
storyboard.Children.Add(scaleAnimation); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-07T15:29:55.590

以下作品：

```
Storyboard storyboard = new Storyboard();
DoubleAnimation rotateAnimation = new DoubleAnimation(0, 360, new Duration(TimeSpan.FromSeconds(2)));
rotateAnimation.AccelerationRatio = 0.15;
rotateAnimation.DecelerationRatio = 0.15;
try { UnregisterName("rotateTransform"); }
catch { }
finally { RegisterName("rotateTransform", rotateTransform); }
Storyboard.SetTargetName(rotateAnimation, "rotateTransform");
Storyboard.SetTargetProperty(rotateAnimation, new PropertyPath(RotateTransform.AngleProperty));
storyboard.Children.Add(rotateAnimation);

DoubleAnimation scaleAnimation = new DoubleAnimation(1, 1.2, new Duration(TimeSpan.FromSeconds(1)));
scaleAnimation.AccelerationRatio = 0.5;
scaleAnimation.DecelerationRatio = 0.5;
scaleAnimation.AutoReverse = true;
try { UnregisterName("scaleTransform"); }
catch { }
finally { RegisterName("scaleTransform", scaleTransform); }
Storyboard.SetTargetName(scaleAnimation, "scaleTransform");
Storyboard.SetTargetProperty(scaleAnimation, new PropertyPath(ScaleTransform.ScaleXProperty));
storyboard.Children.Add(scaleAnimation);

storyboard.Begin(this); 
```

但是，我尝试了 LPL 的解决方案，它也有效——如果 LPL 的方法适用于任何“抽象”目标，那么我认为我更喜欢它作为解决方案（保存注册名称等）。（问题是我不知道如何将这些属性路径放在一起！）

# iphone - 如何在 iOS 设备中插入和获取文件？

> ID：14910949
> 
> 赞同：1
> 
> 时间：2013-02-16T13:43:16.313
> 
> 标签：iphone, ios, ipad, file, nsfilemanager

我正在进行 iOS 开发，是否可以在设备中插入文件，然后将该文件获取到我的应用程序中。我在应用商店中看到了一个文件管理器应用，它使用蓝牙、iTunes 连接和 wifi 选项共享文件。怎么做这样的？请帮我。

提前致谢

我想上传 doc 或 docx 文件并管理我的应用程序。

# java - 基于 EJB 架构的应用程序的 HTTP 和 UI 层次是什么技术？

> ID：14910953
> 
> 赞同：0
> 
> 时间：2013-02-16T13:43:33.990
> 
> 标签：java, model-view-controller, user-interface, ejb, ejb-3.1

我阅读了很多关于可能的 Java Web 开发架构（servlets+JSP、Spring MVC、Struts 等）。其中之一是带有 EJB 3 的“普通 Java EE 6”，与 Spring/Spring MVC 相对。

我开始阅读书籍（EJB 3.1）和教程，但我找不到单个示例来说明对 EJB 的请求从“人类级别”开始的位置或完整的（带有 UI）架构是什么。

在 HTTP 和 Web 浏览器级别连接 Enterprise Java Beans 业务功能的最流行技术是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:06:54.843

[jsf](/questions/tagged/jsf "显示标记为“jsf”的问题") (JavaServer Faces) 是作为 Java 企业版一部分的技术。JSF 2.0 与 Java EE 6 一起发布。

# c# - 如何在 C# [Windows 应用程序] 中将图像从 SQL Server 2008 R2 检索到 Datagridview

> ID：14910956
> 
> 赞同：0
> 
> 时间：2013-02-16T13:43:45.357
> 
> 标签：c#, sql, sql-server-2008, windows-applications

嗨朋友们，我已将图像插入 Sql Server，我需要将图像从 SQL Server 2008 R2 检索到 C# [Windows 应用程序] 中的 Datagridview 列。是否有可能在 Data Grid View 中显示图像是一列中的任何相应大小网格视图。

我将图像插入 SQL Server 的编码是：

```
 public void saveImageInDataBase(int imageid)
    {

        byte[] imagedata = ReadImageFile(txt_upload.Text);
        SqlConnection sqlconn = new SqlConnection();
        sqlconn.ConnectionString = "Data Source=.;Initial Catalog=db_payroll;Integrated Security=True;";
        sqlconn.Open();
        string query = "insert into tbl_image values('"+imagedata+"')";
        MessageBox.Show(query);
        SqlCommand cmd = new SqlCommand(query, sqlconn);
        int rows = cmd.ExecuteNonQuery();
        if (rows > 0)
        {
            MessageBox.Show("Image saved.");
            txt_upload.Text = "";
            pictureBox1.Image = null;
        }
        else
        {
            MessageBox.Show("Unable to save image.");
            sqlconn.Close();
        }
    }

    public byte[] ReadImageFile(string imageLocation)
    {
        byte[] imageData = null;
        FileInfo fileInfo = new FileInfo(imageLocation);
        long imageFileLength = fileInfo.Length;
        FileStream fs = new FileStream(imageLocation, FileMode.Open, FileAccess.Read);
        BinaryReader br = new BinaryReader(fs);
        imageData = br.ReadBytes((int)imageFileLength);
        return imageData;
    } 
```

请尝试解决此问题。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T14:01:58.003

存储到数据库（在数据库中，`imagedata`列必须具有`IMAGE`数据类型）

```
 string query = "insert into tbl_image values(@imagedata)";
    SqlCommand cmd = new SqlCommand(query, sqlconn);
    cmd.Parameters.Add("@imagedata", System.Data.SqlDbType.Image);
    cmd.Parameters["@imagedata"].Value = imagedata;
    int rows = cmd.ExecuteNonQuery(); 
```

从数据库中检索

```
 string query = "select imagedata from tbl_image where ID=@ID";
    SqlCommand cmd = new SqlCommand(query, sqlconn);
    cmd.Parameters.AddWithValue("@id", id);
    byte[] imagedata=(byte[])cmdSelect.ExecuteScalar(); 
```

# python - 颜色栏matplotlib python上的onclick方法

> ID：14910963
> 
> 赞同：3
> 
> 时间：2013-02-16T13:44:36.963
> 
> 标签：python, matplotlib, wxpython

我有一个颜色条和一个图表。我想知道您是否可以在颜色栏上使用 onclick 方法，然后在图表上执行某些操作。所以点击着色器的特定颜色部分然后发生一些事情我知道如何做我想要发生的事情。我只想知道如何设置颜色栏以允许点击

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T17:20:17.487

当然！只是做类似的事情`cbar.ax.set_picker(tolerance)`。

作为一个简单的示例，这将突出显示图像中您在颜色栏上单击的值附近的值：

```
import numpy as np
import matplotlib.pyplot as plt

data = np.random.random((10,10))

fig, ax = plt.subplots()
im = ax.imshow(data)
cbar = fig.colorbar(im)
ax.set_title('Click on the colorbar')

highlight = ax.imshow(np.ma.masked_all_like(data), interpolation='nearest', 
                      vmin=data.min(), vmax=data.max())

def on_pick(event):
    val = event.mouseevent.ydata
    selection = np.ma.masked_outside(data, val - 0.05, val + 0.05)
    highlight.set_data(selection)
    fig.canvas.draw()

cbar.ax.set_picker(5)
fig.canvas.mpl_connect('pick_event', on_pick)

plt.show() 
```

![在此处输入图像描述](../Images/8a730a604b097668eaf19200dc374c5d.png)

# php - 我应该使用 HTTP 状态代码 410 来删除网站上的库存吗？

> ID：14910967
> 
> 赞同：7
> 
> 时间：2013-02-16T13:44:57.120
> 
> 标签：php, seo, http-status-codes

我正在为摩托车经销商建立一个网站，他们的二手库存每天都在变化。目前，当库存被删除时，谷歌网站管理员工具会看到错误 404，我想这会损害网站在谷歌中的声誉。

经过一番研究，我发现 HTTP 状态 410 意味着“永久消失”。我是否应该使用此状态代码来请求不再有库存的自行车？该页面给出一条消息，说自行车已售出，并显示其他二手库存清单，只是想知道处理这些的正确方法是什么。

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T13:59:36.140

状态码应该指资源的表示，而不是资源本身的可用性。因此，列出不再可用的项目的页面仍应返回 200 状态，而不是 404 或 410。

然后，您可以在页面上列出一条消息，说明“此项目不再可用”。这类似于[亚马逊](http://www.amazon.co.uk/ACE-Jimmy-Savile-Costume/dp/B0096PVYO6)和[eBay](http://www.ebay.co.uk/itm/GERRY-WEBER-top-size-16-BNWOT-/281063500312?pt=UK_Women_s_Tops_Shirts)处理这个问题的方式。

# java - JavaFX：获取图像的格式（PNG，JPG ..）？

> ID：14910968
> 
> 赞同：3
> 
> 时间：2013-02-16T13:44:59.990
> 
> 标签：java, image, png, javafx-2, image-formats

我正在创建一个应用程序，由于某些原因只能接受 PNG 图像。

如何检查图像是否真的是 PNG 图像？目前我正在使用 JavaFX 2 [Image](http://docs.oracle.com/javafx/2/api/index.html?javafx/scene/image/Image.html)类来加载图像。

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:04:28.733

我目前在我自己的应用程序中通过在处理文件之前确认文件的 Mime 类型来执行此操作。有几个 SO 线程建议如何在 Java 中获取 Mime 类型。

*   [在 Java 中获取文件的 Mime 类型](https://stackoverflow.com/questions/51438/getting-a-files-mime-type-in-java)
*   [java库从文件内容中查找mime类型](https://stackoverflow.com/questions/4348810/java-library-to-find-the-mime-type-from-file-content)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T14:02:17.317

如果您不信任文件名，一个简单的检查是读取前 8 个字节（带有`FileInputStream`），并检查它们是否对应于 PNG 签名（相关：[https](https://stackoverflow.com/a/10555053/277304) ://stackoverflow.com/a/10555053/277304 ）

# core-data - How to get the managed object from selected annotation

> ID：14910970
> 
> 赞同：0
> 
> 时间：2013-02-16T13:45:03.117
> 
> 标签：core-data, annotations, mkmapview, cllocationmanager

I have a model: Event, I have loaded the annotation view to the mapview, but how do I get the event managed object from the selected annotation, so I can push a view controller to display event's info. The viewForAnnotation part:

```
- (MKAnnotationView *)mapView:(MKMapView *)aMapView viewForAnnotation:(id <MKAnnotation>)annotation
{

    if([annotation class] == MKUserLocation.class) {
        //userLocation = annotation;
        return nil;
    }

    REVClusterPin *pin = (REVClusterPin *)annotation;

    MKAnnotationView *annView;

        annView = [aMapView dequeueReusableAnnotationViewWithIdentifier:@"pin"];

        if( !annView )
            annView = [[MKAnnotationView alloc] initWithAnnotation:annotation
                                                    reuseIdentifier:@"pin"];

        annView.image = [UIImage imageNamed:@"pinpoint.png"];
        annView.canShowCallout = YES;
        UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        [rightButton addTarget:self action:@selector(displayViewController:) forControlEvents:UIControlEventTouchUpInside];
        annView.rightCalloutAccessoryView = rightButton;
        annView.calloutOffset = CGPointMake(-6.0, 0.0);
    }
    return annView;
} 
```

and the rightCalloutAccessoryView displayViewController part :

```
- (void)displayViewController:(id)sender
{
    Annotation *annotation = [self.mapView selectedAnnotations][0];
    EventsViewController *eventsVC = [[EventsViewController alloc] init];
    eventsVC.event = ???
    [self.navigationController pushViewController:eventsVC animated:YES];
} 
```

How to get the managed object from Annotation *annotation = [self.mapView selectedAnnotations][0] ? If I declare a event in Annotation, then what?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:34:30.967

类注释是你自己的，不是吗？它是否包含用于持有的属性`event`？如果没有，那么它应该。

如果您删除了分配给 rightButton 的自定义选择器并且您已正确设置委托，那么您应该调用此函数

```
- (void)mapView:(MKMapView *)map annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    REVClusterPin *annotation = (REVClusterPin *)view.annotation;
    EventsViewController *eventsVC = [[EventsViewController alloc] init];
    eventsVC.event = annotation.event;
    [self.navigationController pushViewController:eventsVC animated:YES];

} 
```

# macros - 从 http://lisperati.planvita.com/actions.html 了解游戏动作 clojure 宏的嵌套引号

> ID：14910971
> 
> 赞同：4
> 
> 时间：2013-02-16T13:45:07.220
> 
> 标签：macros, clojure, quotes

[我已经在http://lisperati.planvita.com/](http://lisperati.planvita.com/)阅读了“casting SPELs”教程，它的俄文版本适用于 clojure ...到目前为止，我无法理解以下宏是如何工作的：（参见[http： //lisperati.planvita.com/actions.html](http://lisperati.planvita.com/actions.html)用于俄语版本或[http://lisperati.com/actions.html](http://lisperati.com/actions.html)用于 Lisp 的原始版本）：

```
(defspel game-action [command subj obj place & args]
  `(defspel ~command [subject# object#]
     `(spel-print (cond (and (= location '~'~place)
                             (= '~subject# '~'~subj)
                             (= '~object# '~'~obj)
                             (have? '~'~subj))
                        ~@'~args
                        :else '(i cannot ~'~command like that -))))) 
```

它被进一步使用，如：

```
(game-action weld chain bucket attic
   (cond (and (have? 'bucket) (def chain-welded true))
              '(the chain is now securely welded to the bucket -)
         :else '(you do not have a bucket -)))

(game-action dunk bucket well garden
             (cond chain-welded 
                   (do (def bucket-filled true)
                       '(the bucket is now full of water))
                   :else '(the water level is too low to reach -))) 
```

这里 defspel - 只是 defmacro 的别名。

创建宏的原因是替换以下函数：

```
(defn weld [subject object]
  (cond (and (= location 'attic)
             (= subject 'chain)
             (= object 'bucket)
             (have? 'chain)
             (have? 'bucket)
             (not chain-welded))
        (do (def chain-welded true)
            '(the chain is now securely welded to the bucket -))
        :else '(you cannot weld like that -)))
(defn dunk [subject object]
  (cond (and (= location 'garden)
             (= subject 'bucket)
             (= object 'well)
             (have? 'bucket)
             chain-welded)
        (do (def bucket-filled true)
            '(the bucket is now full of water))
        :else '(you cannot dunk like that -))) 
```

我对这个“游戏动作”宏的工作方式完全感到困惑......有人可以向我解释所有关于它的事情（嵌套引号）吗？

我已经阅读了以下文章 - [http://blog.8thlight.com/colin-jones/2012/05/22/quoting-without-confusion.html](http://blog.8thlight.com/colin-jones/2012/05/22/quoting-without-confusion.html) - 它没有帮助......

macroexpand-1 也吓到我了...

这是焊接游戏动作的输出：

（clojure-magic-game.core/defspel 焊接 [subject_ *1058* _auto__ object_ *1059* _auto_*] (clojure.core/seq (clojure.core/concat (clojure.core/list (quote clojure-magic-game.core/spel-print)) (clojure.core/list (clojure.core/seq (clojure.core /concat (clojure.core/list (quote clojure.core/cond)) (clojure.core/list (clojure.core/seq (clojure.core/concat (clojure.core/list (quote clojure.core/and))) (clojure.core/list (clojure.core/seq (clojure.core/concat (clojure.core/list (quote clojure.core/=))) (clojure.core/list (quote clojure-magic-game.core/location )) (clojure.core/list (clojure.core/seq (clojure.core/concat (clojure.core/list (quote quote)) (clojure.core/list (quote attic)))))))))) (clojure .core/list (clojure.core/seq (clojure.core/concat (clojure.core/list (quote clojure.core/=)) (clojure.core/list (clojure.core/seq (clojure.core/concat ( clojure.core/list (quote quote)) (clojure.core/list subject* _1058_*auto* _)))) (clojure.core/list (clojure.core/seq (clojure.core/concat (clojure.core/list (quote quote))) (clojure.core/list (quote chain)))))) )) (clojure.core/list (clojure.core/seq (clojure.core/concat (clojure.core/list (quote clojure.core/=))) (clojure.core/list (clojure.core/seq (clojure. core/concat (clojure.core/list (quote quote)) (clojure.core/list *object_1059*_auto__)))) (clojure.core/list (clojure.core/seq (clojure.core/concat (clojure.core/list (quote quote))) (clojure.core/list (quote bucket))))))) ) (clojure.core/list (clojure.core/seq (clojure.core/concat (clojure.core/list (quote clojure-magic-game.core/have?))) (clojure.core/list (clojure.core/ seq (clojure.core/concat (clojure.core/list (quote quote)) (clojure.core/list (quote chain))))))))))) (quote ((cond (and (have?) bucket)) (def chain-welded true)) (quote (链条现在已牢固地焊接在水桶上 -)) :else (quote (你没有水桶 -)))))) (clojure.core/list : else) (clojure.core/list (clojure.core/seq (clojure.core/concat (clojure.core/list (引用 )) (clojure.core/list (clojure.core/seq (clojure.core/concat ( clojure.core/list (quote clojure-magic-game.core/i)) (clojure.core/list (quote clojure-magic-game.核心/不能））（clojure.core/list（引用焊接））（clojure.core/list（引用clojure-magic-game.core/like））（clojure.core/list（引用clojure-magic-game.core /that)) (clojure.core/list (quote clojure.core/-))))))))))))))

即使删除所有名称空间并缩进输出它仍然看起来太复杂而无法理解：

```
(defspel weld [subject__1058__auto__ object__1059__auto__] 
  (seq (concat 
         (list (quote spel-print)) 
         (list (seq (concat 
                      (list (quote cond)) 
                      (list (seq (concat 
                                   (list (quote and)) 
                                   (list (seq (concat 
                                                (list (quote =)) 
                                                (list (quote location)) 
                                                (list (seq (concat 
                                                             (list (quote quote)) 
                                                             (list (quote attic)))))))) 
                                   (list (seq (concat (list (quote =)) 
                                                      (list (seq (concat 
                                                                   (list (quote quote)) 
                                                                   (list subject__1058__auto__)))) 
                                                      (list (seq (concat 
                                                                   (list (quote quote)) 
                                                                   (list (quote chain)))))))) 
                                   (list (seq (concat 
                                                (list (quote =)) 
                                                (list (seq (concat 
                                                             (list (quote quote)) 
                                                             (list object__1059__auto__)))) 
                                                (list (seq (concat 
                                                             (list (quote quote)) 
                                                             (list (quote bucket)))))))) 
                                   (list (seq (concat 
                                                (list (quote have?)) 
                                                (list (seq (concat 
                                                             (list (quote quote)) 
                                                             (list (quote chain))))))))))) 
                      (quote ((cond 
                                (and 
                                      (have? (quote bucket)) 
                                      (def chain-welded true)) 
                                (quote (the chain is now securely welded to the bucket -)) 
                                :else (quote (you do not have a bucket -))))) 
                      (list :else) 
                      (list (seq (concat 
                                   (list (quote quote)) 
                                   (list (seq (concat 
                                                (list (quote i)) 
                                                (list (quote cannot)) 
                                                (list (quote weld)) 
                                                (list (quote like)) 
                                                (list (quote that)) 
                                                (list (quote -)))))))))))))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T20:09:28.570

不要试图从中学习宏或 Clojure。

1.  引用英文 Lisp 版本

    > 注意这个 SPEL 是多么的复杂——它有更多奇怪的引号、反引号、逗号和其他奇怪的符号，而不是你可以动摇的列表。不仅如此，它实际上是一个施放另一个 SPEL 的 SPEL！即使是经验丰富的 Lisp 程序员也不得不考虑创建这样的怪物（事实上，他们会认为这个 SPEL 不优雅，并且会通过一些额外的深奥步骤使其表现得更好，我们不会在这里担心...)
    > 
    > 这个 SPEL 的重点是向您展示使用这些 SPEL 可以变得多么复杂和聪明。此外，如果我们只需要编写一次然后可以使用它为更大的冒险游戏制作数百个命令，那么丑陋并不重要。

    翻译：这是只写垃圾。在该语言的教程介绍中，作者选择了糟糕的设计来展示一个不必要的复杂宏，并浪费了一个机会来讨论宏的明智使用以及一等函数和更高阶函数的威力。

2.  Clojure 版本是音译而不是正确的翻译。一个例子：`setf`函数内部被音译成`def`函数内部。这是糟糕的 Clojure。

**现在离开我的肥皂盒**

您链接到的[引用没有混淆](http://blog.8thlight.com/colin-jones/2012/05/22/quoting-without-confusion.html)的文章值得一读或两读。

“Casting SPELs”作者没有使用更适合他的目的的字符串 ,`"bucket"`或关键字 ,而是使用带引号的符号 -也称为.`:bucket``'bucket``(quote bucket)`

所以作者需要一个宏扩展，比如

```
(... (quote bucket) ...) 
```

但

```
user=> `(... 'bucket ...) 
```

命名空间限定：

```
(... (quote user/bucket) ...) 
```

所以，你最终不得不

```
user=> `(... '~'bucket ...) 
```

要得到

```
(... (quote bucket) ...) 
```

诀窍是额外的，如在[引用没有混淆](http://blog.8thlight.com/colin-jones/2012/05/22/quoting-without-confusion.html)的文章`~'`中所解释的那样。

但是由于`game-action`宏作者在语法引号中嵌套了两层，因此您还有另一层要展开，这意味着另一组`~'`

```
user=> ``(... '~'~'bucket ...) 
```

第一个`'`是`quote`你想要的，这两组`~'`是两次转义名称空间限定，每个级别的语法 quote 一次````。

这产生

```
(clojure.core/seq 
  (clojure.core/concat 
    (clojure.core/list (quote ...)) 
    etc... 
```

哎呀！但是在处理嵌套语法引号时，请参考[Quoteing without Confusion的建议：](http://blog.8thlight.com/colin-jones/2012/05/22/quoting-without-confusion.html)

```
user=> (eval *1)

(... (quote bucket) ...) 
```

我们看到所有这些构造只是为了给我们想要的东西。

# java - Algorithm to find element value of sequence

> ID：14910972
> 
> 赞同：5
> 
> 时间：2013-02-16T13:45:24.880
> 
> 标签：java, algorithm, methods, sequence, sequences

There is the following sequence:

> 101001000100001...

How to define a method that takes an element's **index** of the sequence and returns the value (0 or 1) ​​of this element?

```
public Element getValue(int index) {} 
```

Maybe there's need to use **recursion**? I would be grateful for any ideas!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T14:05:05.237

小圆点表示这个系列将继续进行。所以这是你的解决方案：

让我们考虑基于 1 的索引。您注意到 1 出现在索引 1、(1+2)=3、(1+2+3)=6、(1+2+3+4)=10 等处。我们有一个公式。它的 n*(n+1)/2 。

因此，对于给定的索引（现在这是基于 0，因为 java 数组从索引 0 开始）执行以下操作：

```
index = index + 1;   // now it is 1 based index and our formula would fit in nicely.
index = index * 2;
sqroot = integer part of square root of index;
if( sqroot * (sqroot+1) == index)
  print 1;
else 
  print 0; 
```

也不需要递归，因为这是 O(1) 解决方案（不考虑平方根函数的复杂性）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T14:56:48.990

Return `1` if `index + 1` is a [triangular number](http://en.wikipedia.org/wiki/Triangular_number). x is triangular, if and only if 8x + 1 is a square. So index + 1 is triangular, if and oly if 8*index+9 is a square.

```
public int getValue(int index) {
    int i = (int)Math.round( Math.sqrt(8*index + 9));
    if (i*i == 8*index+9)
        return 1;
    else
        return 0;
} 
```

[http://ideone.com/8L9A96](http://ideone.com/8L9A96)

# python - python imports suddenly not working

> ID：14910977
> 
> 赞同：2
> 
> 时间：2013-02-16T13:46:26.950
> 
> 标签：python

I had everything installed good on my laptop. Everything was working. Today when i wanted to work with my projects again just everything suddenly gives an error on imports. It's not just one package, but multiple. The only thing I could think of is Windows Update, but actually I doubt this would be the cause of the problem.

I have everything installed in 32-bit since some packages were only 32-bit. I already reinstalled everything and restarted several times. I'm not very experienced with Python, so thats why I'm wondering if anybody with more knowledge could help me with this.

The packages installed are: CherryPy, Cython, Oursql, PIL, pywin32, setuptools

Thanks in advance!!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-28T22:13:20.283

我刚刚遇到了类似的问题。一周前一切正常，但今天突然导入失败。

我发现在我尝试导入的模块目录中，有一个损坏的 .pyc 文件。我删除了那个文件，然后一切都恢复了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:00:06.510

你确定他们已经安装了吗？

在你的 python shell 中，运行

```
help('modules') 
```

然后你也可以检查你的 PYTHONPATH

```
import sys
print sys.path 
```

希望能帮助到你。

# c# - 在 C# 中使用 Visual Studio 2010 进行批量插入

> ID：14910979
> 
> 赞同：0
> 
> 时间：2013-02-16T13:46:35.657
> 
> 标签：c#, database, tsql, bulkinsert

我在 C# 项目中有一个字典数据库，其中包含大量单词及其含义。我的数据库有一个名为“dic”的表，它有两列：第一列是“english”（包含英文单词），第二列是“bangla”（包含含义）。我有 2 个文本文件：`english.txt`包含 20000 个单词并`bangla.txt`包含它们的含义。我尝试将查询放在visual stdio 2010上，例如：

```
BULK INSERT dic FROM 'C:\Users\Imon-Bayazid\Desktop\wordddd\good one\list.txt' 
WITH (  FIELDTERMINATOR = ',', ROWTERMINATOR = '\n' ) 
```

但它不起作用。显示错误“不支持 BULK INSERT SQL 构造或语句”；如何使用批量插入 MS SQL 将这些词及其含义从两个 txt 文件中插入到“dic”表中？谁能告诉我有关此的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:55:16.263

SqlBulkCopy 类只适合您

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy(v=vs.100).aspx)

# ios - How to handle a web service and the data model/controllers

> ID：14910985
> 
> 赞同：2
> 
> 时间：2013-02-16T13:47:11.863
> 
> 标签：ios, web-services, soap, model

I am using SOAP with wsdl2objc generated code. I have multiple view controllers who need to share the data provided by the web service. I would like to have a data model part, but I am having a hard time seeing how to handle this. Naturally the calls should be asynch. My question is, what might be the best practise? Who should be responsible for fetching data? Who should store the data? How to handle concurrency? Any thoughts would be appreciated!

UPDATE: I was considering using CoreData, but was not sure if what the benefits were when the data is frequently updated. My biggest problem is how to handle the scenario where a view controller requests data from the model, but no data is available. That means performing a slow web service call and somehow informing the view controller when the data is in. Is notification centre the way to go here? how would the flow be? should the view controllers constantly be listening for update notifications? My thoughts are, that a view controller registers as an observer, populates the view with data from the model (regardless of empty data), and automatically updates on received notifications, i.e. fetches the data from the model which now has the "newest" data available. That leave all network call out of the view controllers, allows the view controllers to access shared data. Thoughts?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:55:08.470

在您更新的问题中，是的，我认为通知中心是后台网络任务在新数据可用时更新您的视图控制器的完美方式。

你问：

> 视图控制器是否应该不断地监听更新通知？

有点。“不断收听”一词可能意味着它不断检查更新。显然，它并没有真正这样做（或者，更重要的是，您不希望它这样做）。相反，它只是将自己注册为该通知的观察者（并确保当视图被关闭时，它也会取消注册自己）。这样，它将收到您的任何自定义通知的通知，但不会浪费大量 CPU 周期“持续监听”。

然后你跟进并询问：

> 我的想法是，视图控制器注册为观察者，用模型中的数据填充视图（不管空数据），并自动更新收到的通知，即从现在具有“最新”数据的模型中获取数据可用的。这将所有网络调用留在视图控制器之外，允许视图控制器访问共享数据。想法？

基本上，是的，这听起来不错。我对此的唯一细微改进是，我将使用将应用程序发布到商店时的最新数据预先填充应用程序数据库。这样，当应用程序检索最新数据时，用户可以查看*一些内容。*也许这在您的场景中无效，但通常最好向用户展示一些东西（即使有点过时），而不是什么都没有，而应用程序检索最新和最好的。

最后（您可能已经在考虑这个），我会确保您向用户展示一些视觉指示，表明数据正在后台下载。也许是一个放置得当的`UIActivityIndicatorView`（即微调器）或`UIProgressView`. 如果您正在处理表格视图，也许更新文本`UIRefreshControl`以说明下载正在进行中。也许也更新状态栏中的网络活动指示器。

* * *

我相信每个人都有自己的解决方法，但这里有一些关于我在应用程序中所做的一些观察，即数据检索过程很复杂，完全异步发生，并且应用程序可以在下载/处理过程中正常进行：

1.  除了标准模型、视图和视图控制器类之外，我还有一个单独的“xml 控制器”，它负责下载和解析结果。我让它异步启动下载。

2.  为了方便 xml 控制器和视图控制器之间的通信，我使用了通知。这样，xml 控制器将发布有关下载/解析过程的开始和完成特定阶段的通知。如果视图控制器在更新过程中不可靠，则视图控制器可以选择在开始时显示微调器，和/或在特定下载/解析阶段完成后相应地刷新自己。必须注意真正识别所有应用层并发问题。在每一步，您都必须处理“如果后台队列中的模型数据发生变化怎么办”的逻辑场景。

    最重要的是，在进行异步更新时，防御性编程是当今的规则。您永远不能仅仅因为您最近检索到的东西在片刻之后就有效，就做出假设。我们在代码中愉快地做出的许多假设不再成立。我也会对基于某些索引的任何操作（例如“第 5 项”）更加谨慎，并且绝对倾向于基于键的操作（例如“唯一标识符为 4027 的项”）。

3.  就数据库层并发问题而言，它在一定程度上取决于持久存储的性质。如果您使用的是 Core Data，请查看 WWDC 2012 - [214 Best Practices with Core Data](https://developer.apple.com/videos/wwdc/2012/?id=214)，其中讨论了并发性。或者参见*Core Data Programming Guide*中的[Concurrency with Core Data 。](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html)如果使用 SQLite，一个简单的解决方案是为数据库操作设置一个专用的串行队列，例如[FMDB 的](https://github.com/ccgus/fmdb). 顺便说一句，如果您使用后一种方法，您需要确保将数据库交互分解为尽可能小的操作，以避免占用数据库。 *`FMDatabaseQueue`*

**   如果您想让用户了解异步下载/更新过程的进度，您可能需要考虑您的框架。有些应用程序会做一些简单的事情，比如状态栏中的网络活动指示器。其他人在一些公共导航栏中更新一些状态消息。我还为我的通知使用了一个自定义容器，这样我就不必在每个视图控制器中添加“显示用户状态更新”。这里有很多方法，但是您可能应该避免需要在每个视图控制器中包含状态更新代码的解决方案（显然，如果视图控制器依赖于由后台队列修改的当前项目，则在在这种情况下，它不是状态更新问题，而是应用程序流程问题）。* 

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:35:17.137

由于 SOAP 信封开销，直接从 iOS 应用程序使用 SOAP 并不是非常理想的。我建议改用 REST XML/JSON 服务。

如果您没有 JSON/XML 服务，您可以使用后端移动平台来处理后端复杂的 SOAP 协议，让您在前端消费轻量级、易于处理的 REST/JSON。

一些“企业开源移动应用开发平台”确实提供这些类型的服务。*

# objective-c - How to create Listener in objective C like HttpListners

> ID：14910986
> 
> 赞同：0
> 
> 时间：2013-02-16T13:47:23.660
> 
> 标签：objective-c, macos, cocoa, osx-mountain-lion

I want to create an mac app which listens to some url(example SOME_HOST_NAME:0001/) that is whenever the request is made to that url i have to perform some task and also send back the response. How can I accomplish the task in objective C? Please tell if any more information is required.

# php - Is creating 2 honeypots better than 1?

> ID：14910992
> 
> 赞同：0
> 
> 时间：2013-02-16T13:47:45.423
> 
> 标签：php, forms, validation, honeypot

To avoid automatic form submission from a bot I have been looking into the honeypot solution.

I was thinking, from a hackers point-of-view, that I would create a script that (if failed to submit) would alternate leave form fields blank until the form was submitted.

This leads me to think that it might be a good idea to have at least 2 honeypot fields in the form. Or perhaps their position gets rearranged after the form is attempted submission.

Would it make sense to have multiple honeypots? Or is there some technique out there to avoid obvious hacker workarounds like the one I suggested above?

# quickbooks - 使用 Intuit Anywhere 创建公司对象

> ID：14910994
> 
> 赞同：0
> 
> 时间：2013-02-16T13:47:48.180
> 
> 标签：quickbooks, intuit-partner-platform

我正在为 QuickBooks 平台创建一个支持 Intuit Anywhere 的应用程序。我浏览了 IPP 文档，发现我们可以使用 IDS API（[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/Company](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/Company)）为 QuickBooks for Windows 创建 Company 对象。

但是，我很困惑，好像可以在不使用“连接到 QuickBooks”小部件连接到 Intuit 的情况下创建公司对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:50:03.787

Furhan，
“连接到 QuickBooks”小部件是一个启动 3 腿 Oauth 流程的小部件，最终客户将授权您的应用程序访问他们的 QuickBooks 数据。并将 Oauth 访问令牌和 RealmId 返回到您的应用程序。

因此，通过此连接流程是能够进行任何 REST API 调用的先决条件。

谢谢，
杰瑞德

# javascript - 用画布替换图像不起作用

> ID：14910995
> 
> 赞同：2
> 
> 时间：2013-02-16T13:47:49.543
> 
> 标签：javascript, jquery, html, html5-canvas, image-conversion

我有一个将图像转换为画布的函数。我尝试使用 jquery 将函数内部创建的画布替换为相关图像，`.replaceWith()`但它不起作用。

**JS：**

```
 imgArray = $("img");
    for (var i = 0; i < imgArray.length; i++)
    {
        convertImageToCanvas(imgArray[i]);
    }

    function convertImageToCanvas(image) {
        var canvas = document.createElement("canvas");
        canvas.width = image.width;
        canvas.height = image.height;
        canvas.getContext("2d").drawImage(image, 0, 0);
        image.replaceWith(canvas);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:59:27.883

我很确定这不是您上一个问题中的示例是如何做到的！

以下与您的演示类似，但不完全... [http://jsfiddle.net/fsjv7/1/](http://jsfiddle.net/fsjv7/1/)

**HTML**

```
<html>
  <head>
    <title>Example</title>
  </head>
  <body>
    <canvas id="example" style="border: 1px solid black" height="10" width="10"></canvas>
    <br />
    Don't place img tags into your document. Place Empty Canvas Tags (with unique names)
  </body>
</html> 
```

**Javascript**

```
// add items to this array to load more images into different canvas'
var resources = [ 
  { 
    "destination": "example", 
    "src": "https://developer.mozilla.org/samples/canvas-tutorial/images/rhino.jpg" 
  } 
];

var loadResources = function(obj) {
  for (var key in obj) {
    if (obj.hasOwnProperty(key)) {
      img = new Image();
      img.src = obj[key].src;
      img.onload = (function() {
      var o = obj[key].destination;
        return function() {
          canvas = document.getElementById(o);
          canvas.height = img.height;
          canvas.width = img.width;
          canvas.getContext("2d").drawImage(img, 0, 0);
        }
      })();
    }            
  }
}

window.onload = loadResources(resources); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:44:52.047

您缺少要应用于`replaceWith`您的图像的 jQuery 选择：

替换这个：

```
image.replaceWith(canvas); // image here is a DOM object, not a jQuery one 
```

有了这个：

```
$(image).replaceWith(canvas); // here we select the image with jQuery, making it a jQuery object 
```

[http://jsfiddle.net/GHKKq/](http://jsfiddle.net/GHKKq/)