# StackOverflow 问答 13603000-13603999

# osx-snow-leopard - iOS模拟器在雪豹上找不到sdk iOS 6

> ID：13603000
> 
> 赞同：3
> 
> 时间：2012-11-28T10:33:34.660
> 
> 标签：osx-snow-leopard, ios6

我读了这篇文章：

[在 Snow Leopard 上将 iOS 6 SDK 导入 Xcode 4.2](https://stackoverflow.com/questions/12508357/import-ios-6-sdk-into-xcode-4-2-on-snow-leopard)

我有以下问题：

我启动了脚本，它似乎已正确完成，但是当我打开 iPhone 模拟器并在硬件选项中选择版本 6 时，我看到此消息：iOS 模拟器找不到开发人员工具包。然后我选择 sdk 6 但不起作用。

我能做些什么？

谢谢！

# php - 带有产品缩略图的导航菜单 Magento

> ID：13603002
> 
> 赞同：0
> 
> 时间：2012-11-28T10:33:44.317
> 
> 标签：php, html, magento, css

大家好，我正在尝试将 CSS3 Mashmenu 集成到我的 Magento 商店[http://www.mybloggerlab.com/2012/07/mashable-drop-down-navigation-menu-for.html](http://www.mybloggerlab.com/2012/07/mashable-drop-down-navigation-menu-for.html)

我想设置菜单以显示产品类别，当将鼠标悬停在显示产品缩略图上时，该类别中的每个产品都有简短的描述。

我遇到的问题是设置它，所以它是动态的，因为我希望菜单可以通过管理员控制。

如果有人能告诉我哪里出错了，我将不胜感激，因为当前代码无法正常工作。

```
<div id="pageContainer">
  <div class="mashmenu">
    <div class="fnav"><a href="#" class="flink"><?php echo $this->__('BROWSE PRODUCTS'); ?>+</a>
        <div class="allContent">
          <?php foreach ($_categories as $_category): ?>
            <?php if($_category->getIsActive()): ?>
                <div class="snav"><a href="#" class="slink">
                  <a href="<?php echo $this->getCategoryUrl($_category) ?>"<?php if ($this->isCategoryActive($_category)): ?> class="current"<?php endif; ?>><?php echo $this->htmlEscape($_category->getName()) ?></a> (<?php echo $_category->getProductCount() ?>)</a>
                  <?php $collection = $_category->getProductCollection()->addAttributeToSort('name', 'asc'); ?>
                  <?php foreach ($collection as $_product) : ?>
                    <div class="insideContent"> 
                      <a href="<?php echo $this->getProductUrl($_product) ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>" class="product-image">
                        <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(75) ?>" width="75" height="75" alt="<?php echo $this->stripTags($_product->getName(), null, true) ?>" />
                      </a> 
                      <span>  <?php $sdesc = $_product->getShortDescription();
                      $sdesc = trim($sdesc);
                      $limit = 170;
                      if (strlen($sdesc) > $limit) {
                        $sdesc = substr($sdesc, 0, strrpos(substr($sdesc, 0, $limit), ' '));
                      } ?>
                      <?php echo $sdesc."..."; ?></span> 
                    </div>
                  <?php endforeach; ?> 
                </div>
            <?php endif; ?>
          <?php endforeach; ?>
          <!-- end insideContent -->
        </div>
      </div>
    </div>
  </div>
  <script>
    $j(document).ready(function(){
      $j('div.mashmenu img').css({"width":"100px","height":"60px"});
      $j('div.mashmenu').find('.allContent').css({"top":"38px"});

      $j('div.mashmenu').mouseleave(function(){
        $j('div.mashmenu .allContent').show('50');
        $j('div.mashmenu .insideContent').fadeOut('50');
      }); 

      $j('.flink').mouseenter(function(){
        $j('div.mashmenu .allContent').show('50');
        $j(this).parent('.fnav').children('.allContent').show(200);
      });

      $j('.slink').mouseenter(function(){
        if($j(this).parent('.snav').children('.insideContent').find('a').size() != 0 )
          $j(this).parents('.allContent').css({"width":"640px","height":"500px"});
        else $j(this).parents('.allContent').css({"width":"auto","height":"auto"});
          $j('div.mashmenu .insideContent').fadeOut('50');
        $j(this).parent('.snav').children('.insideContent').fadeIn(200);
      });

      $j('.snav').mouseleave(function(){
        $j(this).parents('.allContent').css({"width":"auto","height":"auto"});
      });

      $j('.snav').mouseenter(function(){
        $j(this).children('.insideContent').css({"display":"block","position":"absolute","width":"auto","height":"450px"});
      });
    });
  </script>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:57:32.630

```
<div class="insideContent"> 
<a href="<?php echo $this->getProductUrl($_product) ?>" title="<?php echo    $this->stripTags($_product->getName(), null, true) ?>" class="product-image"><img src="<?php     echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(75) ?>" width="75" height="75" alt="<?php echo $this->stripTags($_product->getName(), null, true) ?>" /></a> <span>  <?php $sdesc = $_product->getShortDescription();
                $sdesc = trim($sdesc);
                $limit = 170;
                if (strlen($sdesc) > $limit) {
                    $sdesc = substr($sdesc, 0, strrpos(substr($sdesc, 0, $limit), ' '));
                } ?>
                <?php echo $sdesc."..."; ?></span> 
</div> 
```

您的 $_product 在这里未定义，而且每个类别只有一种产品，那么要显示哪一种？

用类似的东西替换它：

```
<?php $collection =   Mage::getModel('catalog/product')->getCollection()->addCategoryFilter($_category)->setPageSize(4);
<div class="insideContent"> 
<?php foreach ($collection as $_product)  { ?>
//Your product here, copy your code
<?php } /*end foreach*/ ?>
</div> 
```

它应该像这样更好地工作。

# javascript - LinkedIn 使用 Javascript API 设置会员权限？

> ID：13603004
> 
> 赞同：3
> 
> 时间：2012-11-28T10:33:56.843
> 
> 标签：javascript, api, linkedin

我正在使用标准的 Javascript 方法与用户登录：

```
 <script type="text/javascript" src="linkedInUrl">
    api_key: s4mp13
    authorize: true
    onLoad: onLinkedInLoad
    </script> 
```

我无法通过以下调用访问用户的电子邮件字段：

```
function onLinkedInAuth() {
IN.API.Profile("me") // get user 
.fields(["email-address"])
.result(function (result) {
profile = result.values[0];
$.post('/User/Authorize/', { 'profile': profile }, function (data) {
window.location = data;
});
});
} 
```

我认为这是因为我没有指定会员权限`'r_emailaddress'`？但是我环顾四周，只能看到这样的例子，`REST API`我如何定义成员权限`JavaScript`？

还是有另一种方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T13:40:26.257

我发现解决方案隐藏在 LinkedIn 论坛中，范围可以在这里定义：

```
 <script type="text/javascript" src="linkedInUrl">
        api_key: s4mp13
        authorize: true
        onLoad: onLinkedInLoad
        scope: r_fullprofile r_emailaddress
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:53:57.257

如果要在页面加载后执行此操作，可以执行以下操作：

```
IN.ENV.js.scope.push('r_fullprofile'); 
```

然后将以下内容绑定到单击：

```
IN.User.authorize(); 
```

请注意， IN.User.authorize 似乎只提示一次/页面加载新权限。不知道为什么或是否有解决方法。

另请注意，据我所知，这并没有完全记录，因此它可能会或可能不会保证继续工作......

# php - AFNetworking sumit html 表单

> ID：13603007
> 
> 赞同：1
> 
> 时间：2012-11-28T10:34:01.523
> 
> 标签：php, iphone, ios, magento

我正在学习使用 AFNetworking 并想提交登录表单。

我的代码：

```
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:    @"mymail@yahoo.com",@"login[username]", @"123456", @"login[password]", nil];    
NSMutableURLRequest *request = [self requestWithMethod:@"POST" path:@"index.php/customer/account/loginPost/" parameters:params];
[request setValue:@"foo=bar" forHTTPHeaderField:@"Cookie"];
AFHTTPRequestOperation *operation = [self HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject)
                                     {
                                         NSLog(@"oauthAuthorize Success: %@",    [operation.response allHeaderFields]);

                                     }
                                                                  failure:^(AFHTTPRequestOperation *operation, NSError *error)
                                     {
                                         NSLog(@"oauthAuthorize Fail: %@",operation.responseString); 
                                     }];
[self enqueueHTTPRequestOperation:operation]; 
```

和我收到的标题：

```
 "Cache-Control" = "no-store, no-cache, must-revalidate, post-check=0, pre-check=0";
    Connection = "Keep-Alive";
    "Content-Type" = "text/html; charset=UTF-8";
    Date = "Wed, 28 Nov 2012 09:57:03 GMT";
    Expires = "Thu, 19 Nov 1981 08:52:00 GMT";
    "Keep-Alive" = "timeout=5, max=98";
    "Login-Required" = true;
    Pragma = "no-cache";
    Server = "Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7";
    "Set-Cookie" = "frontend=sq26g7l2j45itg9sk6etf249r7; expires=Wed, 28-Nov-2012 10:57:04 GMT; path=/magento_1702; domain=myhost; HttpOnly";
    "Transfer-Encoding" = Identity;
    "X-Powered-By" = "PHP/5.4.7"; 
```

我知道我登录失败，因为在浏览器上登录时，如果成功，它将重定向到帐户页面。

我在 MAC 上使用 bash 进行了这种形式的测试操作并得到了结果：

命令：

```
 curl -v  -F login[username]=mymai@yahoo.com -F login[password]=123456 --header "Cookie:foo=bar" myhost/mypage/index.php/customer/account/loginPost/ 
```

结果：

```
 < Server: Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7
    < X-Powered-By: PHP/5.4.7
    < Set-Cookie: frontend=ui19hig1g1pu43kdsam43naqr6; expires=Wed, 28-Nov-2012 10:46:21 GMT; path=/magento_1702; domain=myhost; HttpOnly
    < Expires: Thu, 19 Nov 1981 08:52:00 GMT
    < Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
    < Pragma: no-cache
    < Set-Cookie: persistent_shopping_cart=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/magento_1702; domain=192.168.1.254; httponly
    < Set-Cookie: frontend=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/magento_1702; domain=192.168.1.254; httponly
    < Set-Cookie: frontend=aaqja98lg13v6pc1qgema98i40; expires=Wed, 28-Nov-2012 10:46:22 GMT; path=/magento_1702; domain=192.168.1.254; HttpOnly
    < Location: http://myhost/magento_1702/index.php/customer/account/
    < Content-Length: 0
    < Content-Type: text/html; charset=UTF-8 
```

标头的 Location 字段是帐户页面的 url，并且没有 Login-Required 字段。我认为它登录成功。

请解释一下如何使用 AFNetwoking 像使用 Bash 命令一样登录成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:45:42.870

我解决了我的问题。使用 AFNetworking 时，完成块被服务器重定向后调用。所以你应该在重定向块中捕捉到像 curl 命令这样的响应：

```
// AFHTTPRequestOperation *operation = ...;
[operation setRedirectResponseBlock:^NSURLRequest *(NSURLConnection *connection, NSURLRequest *request, NSURLResponse *redirectResponse) {
        // first response will come here
    }];
// ... 
```

# java - 创建时 SpringSource Spring MVC 模板错误

> ID：13603010
> 
> 赞同：2
> 
> 时间：2012-11-28T10:34:21.180
> 
> 标签：java, spring, spring-mvc, springsource

我刚刚开始使用 SpringSource，所以我决定从模板中创建一个 Spring MVC 项目。

但是，一旦我创建了模板，我就会在 pom.xml 中收到以下错误

```
Execution default-resources of goal org.apache.maven.plugins:maven-resources-plugin:2.5:resources failed: Plugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies could not be resolved: Failed to collect dependencies for org.apache.maven.plugins:maven-resources-plugin:jar:2.5 () (org.apache.maven.plugins:maven-resources-plugin:2.5:resources:default-resources:process-resources)

Failure to transfer org.codehaus.plexus:plexus-container-default:pom:1.0-alpha-9-stable-1 from http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact org.codehaus.plexus:plexus-container-default:pom:1.0-alpha-9-stable-1 from/to central (http://repo.maven.apache.org/maven2): connection timed out to http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-container-default/1.0-alpha-9-stable-1/plexus-container-default-1.0-alpha-9-stable-1.pom 
```

我已尝试多次重新安装 SpringSource，但仍然出现相同的错误。我在 64 位 Windows 7 机器上使用 SpringSource 3.1.0 32 位版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:37:05.673

我认为您需要更新 Maven 索引，以便它可以下载模板所需的适当库。

*   转到窗口 > 首选项 > Maven

*   查看`Download Repository index updates on startup`

*   重新启动 STS。

*   再次尝试拉下模板。

**注意：下载所有索引可能需要一些时间。**

![在此处输入图像描述](../Images/5675e0eb6bb5fd3bf60ca904669fdb10.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-19T13:49:54.780

对我来说，删除 .m2/repository 文件夹中的内容并重新创建项目（文件->新->）有效

# class - 给出了 Maven 依赖项，但在执行时仍然找不到一个类

> ID：13603013
> 
> 赞同：3
> 
> 时间：2012-11-28T10:34:29.933
> 
> 标签：class, maven, dependencies

我在 pom.xml 中为 cdk 添加了 maven 依赖项，但在执行 jar 文件时仍然出现一个找不到类的错误。

```
dyna218-128:spark4vs laeeqahmed$ java -cp target/spark4vs-1.0-SNAPSHOT.jar se.uu.farmbio.spark4vs.RunPrediction
Exception in thread "main" java.lang.NoClassDefFoundError: org/openscience/cdk/interfaces/IAtomContainer
Caused by: java.lang.ClassNotFoundException: org.openscience.cdk.interfaces.IAtomContainer
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

**POM.XML 如下**

```
 <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
</dependency>

<dependency><!-- SVM depedency -->          
        <groupId>tw.edu.ntu.csie</groupId>
        <artifactId>libsvm</artifactId>
        <version>3.1</version>
</dependency>

<dependency>
        <groupId>org.openscience.cdk</groupId>
        <artifactId>cdk</artifactId>
        <version>1.4.7</version>
</dependency> 
```

```
 <repositories>
         <repository>
                   <id>3rdparty</id>
                   <url>https://maven.ch.cam.ac.uk/content/repositories/thirdparty/</url>
             </repository>
    </repositories> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:34:50.977

Maven 依赖项用于构建项目。打包 JAR id 时，Maven Jar 插件不使用它。所以你不能在没有额外工作的情况下运行。

但是，对此有很多解决方案。例如，您可以使用 Maven One Jar 插件并将所有依赖项打包到 JAR 中 - 但这并不总是可用 [http://onejar-maven-plugin.googlecode.com/svn/mavensite/usage.html](http://onejar-maven-plugin.googlecode.com/svn/mavensite/usage.html)

您可以使用 jar-dependencies 创建存档 [http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies)

[您可以使用 Maven Shade 插件http://maven.apache.org/plugins/maven-shade-plugin/](http://maven.apache.org/plugins/maven-shade-plugin/)将所有 jar 合并为一个

# report - ReportViewer 循环 ajax 调用以保持会话活动导致 Firefox 看起来像是在不断地重新加载

> ID：13603015
> 
> 赞同：2
> 
> 时间：2012-11-28T10:34:30.680
> 
> 标签：report, reportviewer

在 ReportViewer 生成的 HTML 中有以下代码行，

```
setTimeout("frames['ctl00_templateContentPlaceholder_RptVwrTouchSession0'].location.replace('\\\/Reserved.ReportViewerWebControl.axd?Mode=true&ReportID=2649539aa5ca4b63ae81dc879a82ae33&ControlID=80797a28ba484c3e87a5a6ad5527403a&Culture=1033&UICulture=1033&ReportStack=1&OpType=SessionKeepAlive&TimerMethod=KeepAliveMethodctl00_templateContentPlaceholder_RptVwrTouchSession0&CacheSeed=' + encodeURIComponent(Date()));", 0);function KeepAliveMethodctl00_templateContentPlaceholder_RptVwrTouchSession0() {setTimeout("frames['ctl00_templateContentPlaceholder_RptVwrTouchSession0'].location.replace('\\\/Reserved.ReportViewerWebControl.axd?Mode=true&ReportID=2649539aa5ca4b63ae81dc879a82ae33&ControlID=80797a28ba484c3e87a5a6ad5527403a&Culture=1033&UICulture=1033&ReportStack=1&OpType=SessionKeepAlive&TimerMethod=KeepAliveMethodctl00_templateContentPlaceholder_RptVwrTouchSession0&CacheSeed=' + encodeURIComponent(Date()));", -64831072);} 
```

当`Reserved.ReportViewerWebControl.axd`调用它时，它会发出一个返回以下 HTML 的 GET 请求：

```
<html>
<body>
    <script type="text/javascript">parent.KeepAliveMethodReportViewer1TouchSession0();</script>
</body>
</html> 
```

因此，实际上它变成了一个递归函数，并且因为`KeepAliveMethodReportViewer1TouchSession0`调用了一个带有负超时值的设置超时，在 Firefox 中它被立即调用，在大约 10 秒内，Firebug 在一分钟内记录了超过 150 个 GET 请求，记录了超过 700 个请求。

如果有人知道如何调整 keepalive 请求的超时，请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:28:20.230

我在 web.config 中减少了会话超时。这解决了这个问题。我不知道那是如何工作的。

# asp.net-mvc - 为什么 DateTime 编辑器不显示视图模型值？

> ID：13603016
> 
> 赞同：2
> 
> 时间：2012-11-28T10:34:36.063
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我在编辑中声明了一个 DateTime 属性，并创建了如下视图模型：

```
[DataType(DataType.Date)]
[Display(Name = "Start")]
public DateTime DateTimeStart { get; set; } 
```

我曾经`EditorForModel`为整个视图模型渲染编辑器，但是当我获取要编辑的记录时，视图模型属性会获得正确的值，正如我通过用 a 显示它们所证明的那样`DisplayTextFor`，但是 MVC 渲染的 DateTime 选择器是空的，并且下拉时，显示今天的日期。为什么这些没有显示预期的日期值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T14:48:18.853

我必须在我的模型属性上设置一个额外的数据注释来解决这个问题。

```
[DisplayFormat(DataFormatString = "{0:yyyy-MM-dd}", ApplyFormatInEditMode = true)] 
```

我遇到了和你一样的问题。用户仍将在输入字段中看到 mm/dd/yyyy 格式。这只是为了格式化数据，因为它是使用内置的 HTML EditorFor 助手分配的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:34:57.073

您可以使用 DisplayTemplates 和 EditorTemplates 来定义如何显示特定类型的属性。

在 Views > Shared 文件夹中，创建一个名为 DisplayTemplates 的文件夹和另一个名为 EditorTemplates 的文件夹，然后您可以为要显示的每种不同类型的属性添加自定义模板。模板的工作方式与部分模板类似。

我有一个用于 DateTime 的 DisplayTemplate

```
@model DateTime
@if (Model.Value.Year == 1) {
    @Html.TextBox("", "") 
} else {
@Html.TextBox("", (Model.Value.ToString("dd/MM/yyyy"))) 
}
<span class="help-text">dd/mm/yyyy</span> 
```

这是 TimeSpan 的 EditorTemplate

```
@model TimeSpan

@Html.DropDownList("", Enumerable.Range(0, 30)
    .Select(i => new SelectListItem { Value = i.ToString(), 
    Text = i.ToString(), Selected = Model.Days == i })) days  

@Html.DropDownList("", Enumerable.Range(0, 24)
    .Select(i => new SelectListItem { Value = i.ToString(), 
    Text = i.ToString(), Selected = Model.Hours == i })) hours : 

@Html.DropDownList("", Enumerable.Range(0, 60)
    .Select(i => new SelectListItem { Value = i.ToString(), 
    Text = i.ToString(), Selected = Model.Minutes == i })) minutes : 

@Html.DropDownList("", Enumerable.Range(0, 60)
    .Select(i => new SelectListItem { Value = i.ToString(), 
    Text = i.ToString(), Selected = Model.Seconds == i })) seconds 
```

我要提醒您，您可以花费大量时间尝试让 EditorForModel 完全按照您的要求工作，但总会有一些情况下它不能完全正确地工作，您必须求助于手动编码。

我们现在使用 HTML 帮助器将我们的自定义 HTML 包装在每个属性周围，这可以与所描述的自定义模板一起很好地工作，但也提供了更多的灵活性。我们将此页面用作自定义 HTML 包装器的灵感。[ASP.NET MVC 3 自定义 HTML 帮助程序 - 最佳实践/使用](https://stackoverflow.com/questions/4804833/asp-net-mvc-3-custom-html-helpers-best-practices-uses)查看投票数最高的答案，而不是接受的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T13:35:35.833

这取决于浏览器。到目前为止，只有 Opera 为您提供了 HTML5 日期输入类型的日期选择器。

# r - 有没有办法在 on.exit() 上运行表达式，但前提是正常完成，而不是出错？

> ID：13603019
> 
> 赞同：16
> 
> 时间：2012-11-28T10:34:50.220
> 
> 标签：r

我知道`on.exit`R 中的功能，这很棒。它在调用函数正常退出或作为错误结果退出时运行表达式。

我想要的是表达式仅在调用函数正常返回时运行，但在出现错误的情况下不运行。我有多个函数可以正常返回的点，以及多个可能失败的点。有没有办法做到这一点？

```
myfunction = function() {
     ...
     on.exit( if (just exited normally without error) <something> )
     ...
     if (...) then return( point 1 )
     ...
     if (...) then return( point 2 )
     ...
     if (...) then return( point 3 )
     ...
     return ( point 4 )
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T11:00:55.967

不管退出状态如何，整个点`on.exit()`就是要运行。因此它忽略任何错误信号。这`finally`与 tryCatch 函数的语句等效。

如果您只想在正常退出时运行代码，只需将其放在代码的末尾即可。是的，您必须使用`else`语句和仅创建 1 个退出点对其进行一些重构，但这被某些人认为是良好的编码实践。

使用您的示例，那将是：

```
myfunction = function() {
     ...
     if (...) then out <- point 1 
     ...
     else if (...) then out <- point 2 
     ...
     else if (...) then out <- point 3 
     ...
     else out <-  point 4 

     WhateverNeedsToRunBeforeReturning

     return(out)
} 
```

或者查看[Charles 的答案，](https://stackoverflow.com/a/13607376/428790)使用`local()`.

如果你坚持使用`on.exit()`，你可以赌回溯机制的工作来做这样的事情：

```
test <- function(x){
  x + 12
}                               

myFun <- function(y){
    on.exit({

        err <- if( exists(".Traceback")){
           nt <- length(.Traceback)        
           .Traceback[[nt]] == sys.calls()[[1]]
        } else {FALSE}

        if(!err) print("test")
    })  
    test(y)
} 
```

`.Traceback`包含导致错误的最后一个调用堆栈。您必须检查该堆栈中的顶部调用是否等于当前调用，在这种情况下，您的调用很可能引发了最后一个错误。因此，基于这种情况，您可以尝试破解自己从未使用过的解决方案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-28T14:03:05.527

只需使用您想要完成的代码包装所有返回函数调用的参数。所以你的例子变成：

```
foo = function(thing){do something; return(thing)}
myfunction = function() {
     ...
     if (...) then return( foo(point 1) )
     ...
     if (...) then return( foo(point 2) )
     ...
     if (...) then return( foo(point 3) )
     ...
     return ( foo(point 4) )
} 
```

或者只是将每个`then`子句变成两个语句。使用`on.exit`将一些代码杠杆到许多地方会导致幽灵般的远距离动作问题并使婴儿 Dijkstra 哭泣（阅读 Dijkstra 的“GOTO 认为有害”论文）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-28T14:27:48.263

我对@Joris 回答的评论更具可读性：

```
f = function() {
  ret = local({
    myvar = 42
    if (runif(1) < 0.5)
      return(2)
    stop('oh noes')
  }, environment())
  # code to run on success...
  print(sprintf('myvar is %d', myvar))
  ret
} 
```

# javascript - 什么是 JavaScript 中的“REPL”？

> ID：13603021
> 
> 赞同：53
> 
> 时间：2012-11-28T10:34:51.910
> 
> 标签：javascript, node.js, read-eval-print-loop

我看到了创建“REPL”的参考。什么是 REPL？

```
var arDrone = require('ar-drone');
var client  = arDrone.createClient();
client.createRepl(); 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-11-28T19:24:00.110

[Stack Overflow 上repl](/questions/tagged/repl "显示标记为“repl”的问题")标记中的好信息：

> 关于读取评估打印循环
> 
> Read-Eval-Print Loop (REPL) 是编程语言的交互式解释器。它起源于 LISP 系统，但许多其他语言（Python、Ruby、Haskell、Tcl 等）使用 REPL 来管理交互式会话。它们允许通过绕过“代码 -> 编译 -> 执行”循环的编译阶段来对一种语言进行简单的实验。
> 
> REPL 有 4 个组件（以 LISP 表示法命名）：
> 
> *   一个读取函数，它从键盘读取输入
> *   一个 eval 函数，它评估传递给它的代码
> *   打印功能，用于格式化和显示结果
> *   一个循环函数，它运行前面的三个命令直到终止

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-28T10:37:06.950

谷歌的第一个命中在 Wikipedia 上给出了定义：REPL 代表[read-eval-print loop](https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)：

> 读取-评估-打印循环 (REPL) 是一个简单的交互式计算机编程环境。

简而言之，它会启动一个交互式控制台，您可以在其中输入命令并立即查看这些命令的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T19:17:52.570

如果语言支持，REPL 是一种交互的代码或命令执行方式。

[ftp://ftp.cs.utexas.edu/pub/garbage/cs345/schintro-v14/schintro_114.html](ftp://ftp.cs.utexas.edu/pub/garbage/cs345/schintro-v14/schintro_114.html)

# php - 在php中使文件夹安全

> ID：13603024
> 
> 赞同：2
> 
> 时间：2012-11-28T10:35:16.173
> 
> 标签：php, linux

我很想知道什么被认为更安全

```
include $_SERVER['DOCUMENT_ROOT'] . '/config/special.php'; 
```

和

```
include '../config/special.php'; 
```

我在 Stack Overflow 和网络上的其他地方看到很多答案，说要在文档根目录之外存储数据。我还看到很多教程说在 php 中包含一个文件做类似的事情

```
include $_SERVER['DOCUMENT_ROOT'] . '/config/special.php'; 
```

如果您将文件夹的权限更改为 drwxr-x-wx 之类的权限，是否可以执行上述操作，这样如果您尝试访问 url 中的路径（或者这仍然被认为是一种风险）或将最好将我的配置移动到我的根文件夹上方，如下所示。

```
include '../config/special.php'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:42:17.223

答案是：“服务器的其余部分有多安全”？

如果您禁止从 Apache 远程调用访问该目录，那么无论您将文件存储在何处，您都解决了一半的问题。然而，这并不是安全的灵丹妙药。如果是这样，人们会知道的！（我在一个月前工作的地方证明了这一点 - 一位主要开发人员认为将内容存储在非 webroot 子文件夹中可以确保一切安全。他对他构建的文件浏览器知之甚少，更重要的是，它如何能够将`../`其作为参数并相应地工作...... 30 秒后，数据库被转储 - 在开发环境中）。

安全的关键是强化一切。如果您允许用户读取文件，请确保禁止`..`and`...`运算符以及与之相关的任何内容，以防止他们遍历目录链。防止外部用户读取文件（`.htaccess`使用 Apache），这应该会阻止大多数人。

但是，根据您对 up-one 和 up-two 链的消毒方式，您最终可能会遇到更多问题。再举我同事的例子：转储后，他决定操作这些替换：

```
.. => .
... => . 
```

（顺序很重要）

他几乎不知道我投入了...... 第一个正则表达式会把它变成..，第二个正则表达式什么也不做。宾果游戏，数据库被倾倒了。再次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:48:06.683

如果您正在寻找 PHP 问题的直接答案，请在更广泛更简洁的说明中。

以上都不是安全的或不安全的。简单地包含一个文件是任何 PHP 应用程序中正常且有保证的操作，并且安全不会受到上述任何方法的影响。

如果您想了解更多关于安全性的信息，我建议您阅读更多关于如何确保您的服务器/应用程序安全的信息。

也许这可能是一本不错的读物。

[http://www.ibm.com/developerworks/opensource/library/os-php-secure-apps/index.html](http://www.ibm.com/developerworks/opensource/library/os-php-secure-apps/index.html)

# ide - 如何在 MPLAB IDE v 8.0 中添加 C 编译器？

> ID：13603025
> 
> 赞同：1
> 
> 时间：2012-11-28T10:35:15.613
> 
> 标签：ide, firmware, mplab

我正在尝试使用 MPLAB IDE 用 C 语言编写一些程序。为此，我安装了 8.0 版 MPLAB。但我找不到其中的 C 编译器。那么如何着手获取C编译器。希望能得到快速响应。干杯！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:35:25.573

您必须单独安装 C 编译器。MPLAB 支持多种 C 编译器，最简单的方法是从 Microchip 下载一个。您需要的编译器将取决于您要针对其编程的芯片系列是 8 位、16 位还是 32 位。您可以在[此处](http://www.microchip.com/pagehandler/en_us/devtools/mplabxc/)找到有关 Microchip 提供的各种编译器的更多信息。

# django - Django REST 框架：非模型序列化器

> ID：13603027
> 
> 赞同：178
> 
> 时间：2012-11-28T10:35:22.710
> 
> 标签：django, rest, django-rest-framework

我是 Django REST 框架的初学者，需要您的建议。我正在开发一个网络服务。该服务必须为其他服务提供 REST 接口。我需要实现的 REST 接口不能直接使用我的模型（我的意思是获取、放置、发布、删除操作）。相反，它为其他服务提供了一些计算结果。根据请求，我的服务会进行一些计算并仅返回结果（不将结果存储在自己的数据库中）。

以下是我对如何实现 REST 接口的理解。纠正我，如果我错了。

1.  创建进行计算的类。将其命名为“CalcClass”。CalcClass 在其工作中使用模型。

    *   计算所需的参数被传递给构造函数。
    *   实现计算操作。它将结果作为“ResultClass”返回。
2.  创建结果类。

    *   派生自对象。
    *   它只有包含计算结果的属性。
    *   计算结果的一部分表示为元组的元组。据我了解，进一步序列化为这些结果实现一个单独的类并将这些对象的列表添加到 ResultClass 会更好。
3.  为 ResultClass 创建序列化程序。

    *   从 serializers.Serializer 派生。
    *   计算结果是只读的，因此主要使用 Field 类作为字段，而不是专门的类，例如 IntegerField。
    *   我不应该在 ResultClass 和 Serializer 上实现 save() 方法，因为我不打算存储结果（我只想在请求时返回它们）。
    *   用于嵌套结果的 Impl 序列化程序（请记住上面提到的元组元组）。
4.  创建视图返回计算结果。

    *   从 APIView 派生。
    *   只需要get()。
    *   在 get() 中，使用从请求中检索到的参数创建 CalcClass，调用其 calc()，获取 ResultClass，创建 Serializer 并将 ResultClass 传递给它，返回 Response(serializer.data)。
5.  网址

    *   在我的情况下没有 api root。我应该只有 URL 来获得各种计算结果（使用 diff 参数计算）。
    *   添加调用 format_suffix_patterns 进行 api 浏览。

我错过了什么？这种方法总体上是正确的吗？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-11-29T11:05:25.417

Django-rest-framework works well even without tying it to a model. Your approach sounds ok, but I believe you can trim some of the steps to get everything working.

For example, rest framework comes with a few built-in renderers. Out of the box it can return JSON and XML to the API consumer. You can also enable YAML by just installing the required python module. Django-rest-framework will output any basic object like dict, list and tuple without any extra work on your part.

So basically you only have to create the function or class that takes in arguments, does all of the required calculations and returns its results in a tuple to the REST api view. If JSON and/or XML fits your needs, django-rest-framework will take care of the serialization for you.

You can skip steps 2 and 3 in this case, and just use one class for calculations and one for presentation to the API consumer.

Here are a few snippets may help you out:

**Please note that I have not tested this. It's only meant as an example, but it should work :)**

The CalcClass:

```
class CalcClass(object):

    def __init__(self, *args, **kw):
        # Initialize any variables you need from the input you get
        pass

    def do_work(self):
        # Do some calculations here
        # returns a tuple ((1,2,3, ), (4,5,6,))
        result = ((1,2,3, ), (4,5,6,)) # final result
        return result 
```

The REST view:

```
from rest_framework.views import APIView
from rest_framework.response import Response
from rest_framework import status

from MyProject.MyApp import CalcClass

class MyRESTView(APIView):

    def get(self, request, *args, **kw):
        # Process any get params that you may need
        # If you don't need to process get params,
        # you can skip this part
        get_arg1 = request.GET.get('arg1', None)
        get_arg2 = request.GET.get('arg2', None)

        # Any URL parameters get passed in **kw
        myClass = CalcClass(get_arg1, get_arg2, *args, **kw)
        result = myClass.do_work()
        response = Response(result, status=status.HTTP_200_OK)
        return response 
```

Your urls.py:

```
from MyProject.MyApp.views import MyRESTView
from django.conf.urls.defaults import *

urlpatterns = patterns('',
    # this URL passes resource_id in **kw to MyRESTView
    url(r'^api/v1.0/resource/(?P<resource_id>\d+)[/]?$', login_required(MyRESTView.as_view()), name='my_rest_view'),
    url(r'^api/v1.0/resource[/]?$', login_required(MyRESTView.as_view()), name='my_rest_view'),
) 
```

This code should output a list of lists when you access [http://example.com/api/v1.0/resource/?format=json](http://example.com/api/v1.0/resource/?format=json). If using a suffix, you can substitute `?format=json` with `.json`. You may also specify the encoding you wish to get back by adding `"Content-type"` or `"Accept"` to the headers.

```
[
  [
    1, 
    2, 
    3
  ], 
  [
    4, 
    5, 
    6
  ]
] 
```

Hope this helps you out.

# c# - 在silverlight的应用程序图像文件夹中保存png文件

> ID：13603030
> 
> 赞同：1
> 
> 时间：2012-11-28T10:35:29.363
> 
> 标签：c#, asp.net, silverlight-4.0

我使用silverlight保存了一个png文件。但我想将它保存在应用程序 IMG 文件夹中。我的代码如下：

```
if (lastSnapshot != null)
        {
            string ImageName = DateTime.Now.Year.ToString() + DateTime.Now.Month.ToString() + DateTime.Now.Day.ToString() + DateTime.Now.Hour.ToString()
            + DateTime.Now.Minute.ToString() + DateTime.Now.Second.ToString() + DateTime.Now.Millisecond.ToString() + ".png"; 
            string filePath=System.IO.Path.Combine("~/Images/", "" + ImageName + "");  
            using (var pngStream = GetPngStream(lastSnapshot))
            using (var file = File.Create(filePath))
            {
                byte[] binaryData = new Byte[pngStream.Length];
                long bytesRead = pngStream.Read(binaryData, 0, (int)pngStream.Length);
                file.Write(binaryData, 0, (int)pngStream.Length);
                file.Flush();
                file.Close();
            }

        } 
```

我想在silverlight中做到这一点。我可以做吗？我可以将文件直接保存在应用程序文件夹中吗？怎么做？我会感谢任何会帮助我的人。提前致谢。

[我的相邻问题](http://stackoverflow.com/questions/13599599/save-png-file-in-application-image-folder-without-using-savedialogfile)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:30:57.210

您必须在服务器端提供 Web 服务或上传 url，并在客户端的 Silverlight 中使用它。

Silverlight 应用程序不能直接访问服务器的文件夹，因为 Silverlight 在客户端执行。

# iphone - 在 Xcode 4.5 中创建新项目时出现“Incomplete Implementation”警告

> ID：13603034
> 
> 赞同：1
> 
> 时间：2012-11-28T10:35:41.047
> 
> 标签：iphone, xcode

当我在 Xcode 4.5 中创建一个新项目时，我收到警告**“不完整的实现”**。我也没有写一行代码，但是在附近的默认**“ViewController.m”**文件中收到了这个警告，

`@implementation ViewController`

不写一行代码就无法理解我收到警告。我的 Xcode 崩溃了吗？请建议解决这个问题。

**已编辑**

此外，当我在该项目中创建一个新的 ViewController 文件时，它没有显示任何警告。只有默认的**“ ViewController.m ”**显示警告。

# asp.net-mvc-4 - jqGrid ASP.NET MVC4 初始排序

> ID：13603036
> 
> 赞同：4
> 
> 时间：2012-11-28T10:35:43.880
> 
> 标签：asp.net-mvc-4, jqgrid-asp.net

我将 jqGrid 用作带有 ASP.NET MVC4 的 TreeGrid，但有一个问题：

我的模型：

```
OrdersGrid = new JQGrid
                {
                   Columns = new List<JQGridColumn>()
                     {
                        new JQGridColumn
                       {
                         DataField = "MeasureId",
                         // always set PrimaryKey for Add,Edit,Delete operations
                         // if not set, the first column will be assumed as primary key
                         PrimaryKey = true,
                         Visible = false,
                         Sortable = false
                       },
                       new JQGridColumn
                       {
                         DataField = "Name",
                         Width = 100,
                         Sortable = true
                       },
                      new JQGridColumn
                      {
                         DataField = "Symbol",
                         Width = 100
                      },
                      },
                         Width = Unit.Pixel(640),
                         Height = Unit.Percentage(100),
                         TreeGridSettings = new TreeGridSettings
                         {
                           Enabled = true
                         },
                         SortSettings = new SortSettings
                         {
                           AutoSortByPrimaryKey = false,
                           InitialSortColumn = "Name",
                           InitialSortDirection = SortDirection.Asc
                          }
                         }; 
```

我的控制器：

```
public JsonResult DataRequested()
  {
     // Get both the grid Model and the data Model
    // The data model in our case is an autogenerated linq2sql database based on Northwind.
       var gridModel = new NavigatorModel();
       ...
       var hierarchyRows = from measure in measures
       select new
       {
           MeasureId = measure.MeasureId,
           Name = measure.Name,
           Symbol = measure.Symbol,
          //ParentID = measure.ParentMeasureId != null ? measure.ParentMeasureId.ToString() : "",
            tree_loaded = true,
            tree_parent = measure.ParentMeasureId,
            tree_level =LoadAllRowsExpanded_GetRowLevel(measure.ParentMeasureId, measures),
            tree_leaf = LoadAllRowsExpanded_IsLeafRow(measure.MeasureId, measures),
            tree_expanded = true
        };

           //var dataModel = new 
          // return the result of the DataBind method, passing the datasource as a parameter
         // jqGrid for ASP.NET MVC automatically takes care of paging, sorting, filtering/searching, etc
           return gridModel.OrdersGrid.DataBind(hierarchyRows.AsQueryable());
    } 
```

如上你可以看到我将 AutoSortByPrimaryKey 设置为 false，但是当页面加载时，网格看起来像这样：

![jqGrid错误排序](../Images/fb7921b2cf987bf5ab8e63b0d5e75b38.png)

当我单击其中一列（名称或符号）进行排序时，一切都变得很好 - 错误显示的 Measure 在它的父项下。我也尝试使用事件在“gridInitialize”之后排序，但也没有成功。有任何想法吗？

# c - 从c中的文本文件中搜索整数

> ID：13603038
> 
> 赞同：1
> 
> 时间：2012-11-28T10:35:58.587
> 
> 标签：c, search, full-text-search, type-conversion, readfile

我有一个用 c 编写的模拟程序，我需要创建随机数并将它们写入 txt 文件。程序仅停止 - 当再次生成已经生成的随机数或 - 生成 10 亿个随机数时（不重复）

我的问题是无法在txt文件中搜索到生成的long int随机数！文本文件格式为：9875 764 19827 2332 ... 任何帮助表示赞赏.. `

```
FILE * out;

int checkNumber(long int num){
    char line[512];
    long int number;  
    int result=0; 

    if((out = fopen("out.txt","r"))==NULL){
            result= 1;
    }

    char buf[10];
    itoa(num, buf, 10);

    while(fgets(line, 512, out) != NULL)
    {
       if((strstr(line,buf)) != NULL){
              result = 0;
       }
    }
    if(out) {
        fclose(out);
    } 
    return result;  
}

int main(){
    int seed;
    long int nRNs=0;
    long int numberGenerated;     
    out = fopen ("out.txt","w");

    nRNs=0;
    seed = 12345;

    srand (seed);  

    fprintf(out,"%d\n",numberGenerated);
    while( nRNs != 1000000000 )
    {
      numberGenerated = rand();
      nRNs++;

      if(checkNumber(numberGenerated)==0){
          fclose(out); break; system("pause"); 
      }
      else{
          fprintf(out,"%d\n",numberGenerated);
      }

    }    

    fclose(out); 
```

}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:49:57.297

如果文本文件只包含由空格分隔的随机生成的数字，那么您需要`strtok()`函数（谷歌其用法）并将其放入@jacekmigacz 提到的二叉树结构中。但在任何情况下，您**都**必须至少搜索整个文件一次。然后`ftell()`是获取您在文件中搜索的位置的值。当生成另一个号码时，您可以使用它`fseek()`来获取最新号码。记得逐行获取数据`fgets()`

照顾内存需求并`malloc()`明智地使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:04:09.570

不要打开文件并将其扫描到`checkNumber()`. 你将永远等待。

相反，使用[位集](http://en.wikipedia.org/wiki/Bit_array)数据结构将生成的数字保存在内存中并引用它。

您的位集需要足够大以指示每个 32 位整数，因此它会消耗`2^32 / 8`字节（或`512MiB`）的内存。这可能看起来很多，但它比`32-bit * 1,000,000,000`( `4GB`) 小得多。此外，检查和更新都将在恒定时间内完成。

编辑：维基百科链接并没有太多解释如何编写代码，所以这里有一个粗略的示例：（有更快的编写方法，例如：使用位移而不是除法，但这应该更容易理解。 )

```
int checkNumberOrUpdate(char *bitSet, long int num){
    char b = 1 << (num % 8);
    char w = num / 8;

    if (bitSet[w] & ~b) {
        return 1;
    }
    bitSet[w] |= b;
    return 0;
} 
```

请注意，`bitSet`需要`calloc()`从您的主要功能调整到正确的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:42:27.910

尝试使用[树](http://en.wikipedia.org/wiki/Tree_%28data_structure%29)（数据结构）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T11:00:52.737

这可能有效，或者您可以这样处理：（缓慢但会有效）

```
 int new_rand = rand();
    static int couter = 0;
    FILE *fptr = fopen("txt","a+");
    int i;
    char c,buf[10];
    while((c=getc(fptr))!=EOF)
    {
     buf[j++]=c;
     if(c == ' ')
       {
        buf[--j]='\0';
        i=atoi(buf);
        if(i == new_rand)
           return;
        j=0;
    }
    if(counter < 1000000)
   {
    fwrite(&new_rand, 4, 1, fptr);
    counter++;
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T10:49:13.123

每次在文本文件中线性搜索将永远花费如此多的数字。您可以将迄今为止生成的每个数字按数据结构排序，以便您可以对重复项进行二进制搜索。不过，这将需要大量 RAM。对于具有 32 位整数的系统上已经有 4GB 的 10 亿个整数，您将需要更多的数据结构开销。我的估计在最坏的情况下大约是 16GB（实际上你会得到 10 亿个唯一整数。）

如果您没有内存怪物机器，则应该将数据结构写入二进制文件并在那里进行二进制搜索。虽然这仍然会很慢。

# python - 在 Python 中访问静态 C 函数

> ID：13603041
> 
> 赞同：1
> 
> 时间：2012-11-28T10:36:00.473
> 
> 标签：python, c, function, static, swig

如何使用 SWIG 从 C 访问 Python 中的静态函数？例如：

```
static int foo(int a, int b); 
```

C 代码不能更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:05:20.097

唯一可行的方法是，如果

1.  您在头文件中有声明和定义
2.  你有办法得到一个函数指针
3.  一些疯狂的疯狂黑客
4.  你有可用的整个程序的来源

对于#1，我整理了一个我们可能正在使用的示例头文件：

```
#ifndef TEST_H
#define TEST_H

#include <stdio.h>

static int foo(int a, int b) {
  return printf("Frobination: %d-%d\n",a,b);
}

#endif 
```

虽然在头文件中这样做有点奇怪，但并非不可能。在这种情况下，我们可以正常包装它：

```
%module test

%{
#include "test.h"
%}

%include "test.h" 
```

并将其运行为：

```
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import test
>>> test.foo(1,2)
Frobination: 1-2
17
>>> 
```

需要注意的是，当有多个翻译单元和静态函数时，这里使用的当然是静态函数的本地版本。

对于#2，我们可能有头文件：

```
#ifndef TEST_H
#define TEST_H

typedef int (*fptr)(int a, int b);

extern fptr foo;

#endif 
```

并将其实现为：

```
#include "test.h"
#include <stdio.h>

static int foo_impl(int a, int b) {
  return printf("Frobination: %d-%d\n",a,b);
}

fptr foo = foo_impl; 
```

然后我们可以用它来包装：

```
%module test

%{
#include "test.h"
%}

int foo(int a, int b); 
```

我们对 SWIG 撒谎并声称 foo 不是函数指针，但它可以工作并且完全合法，因为所有生成的代码都是有效的。

对于#3，我们理论上可以通过各种特定于平台的非便携式诡计将静态函数所在的地址提取到函数指针中，但这很脆弱，而且是个坏主意。

对于＃4，如果您有可用的资源，那么您就可以免费回家了。

# python - 在python中获得排序唯一列表的最快方法？

> ID：13603042
> 
> 赞同：22
> 
> 时间：2012-11-28T10:36:04.473
> 
> 标签：python, sorting, optimization

在python中获得排序的唯一列表的快速方法是什么？（我有一个可散列的东西的列表，并且想要有一些我可以迭代的东西 - 无论列表是否被修改，或者我得到一个新列表，还是一个可迭代的。在我的具体用例中，我m 使用一次性列表执行此操作，因此在适当的位置会更有效地使用内存。）

我见过像这样的解决方案

```
input = [5, 4, 2, 8, 4, 2, 1]
sorted(set(input)) 
```

但在我看来，首先检查唯一性然后排序是浪费的（因为当你对列表进行排序时，你基本上必须确定插入点，从而得到唯一性测试作为副作用）。也许还有更多类似unix的东西

```
cat list | sort | uniq 
```

只是在已经排序的列表中挑选出连续的重复项？

* * *

请注意问题“[在 Python 中对列表进行 uniqify 的最快方式](https://stackoverflow.com/questions/2527405/fastest-way-to-uniqify-a-list-in-python) ”中的列表未排序，以及“[在 Python 列表中进行排序加 uniq 的最简洁方法是什么？](https://stackoverflow.com/questions/2931672/what-is-the-cleanest-way-to-do-a-sort-plus-uniq-on-a-python-list)' 要求最干净/最 Pythonic 的方式，并且接受的答案表明`sorted(set(input))`，我正在努力改进。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-28T12:58:01.700

我相信`sorted(set(sequence))`这是最快的方法。是的，`set`对序列进行迭代，但这是一个 C 级循环，**比**在 python 级别执行的任何循环都要快得多。

请注意，即使`groupby`您仍然拥有`O(n) + O(nlogn) = O(nlogn)`，最糟糕的是这`groupby`将需要一个 python 级别的循环，这会显着增加其中的常量，`O(n)`因此最终您会获得最差的结果。

当谈到 CPython 时，优化事物的方法是在 C 级别尽可能多地做（请参阅[此](https://stackoverflow.com/questions/12840451/python-string-comparison-pointing-to-the-result/12843154#12843154)答案以获取另一个反直觉性能的示例）。要获得更快的解决方案，您必须在 C 扩展中重新实现排序。即便如此，祝你好运，获得与 python 的 Timsort 一样快的东西！

“规范解决方案”与`groupby`解决方案的小比较：

```
>>> import timeit
>>> sequence = list(range(500)) + list(range(700)) + list(range(1000))
>>> timeit.timeit('sorted(set(sequence))', 'from __main__ import sequence', number=1000)
0.11532402038574219
>>> import itertools
>>> def my_sort(seq):
...     return list(k for k,_ in itertools.groupby(sorted(seq)))
... 
>>> timeit.timeit('my_sort(sequence)', 'from __main__ import sequence, my_sort', number=1000)
0.3162040710449219 
```

如您所见，它*慢了 3 倍*。

jdm提供的版本其实更差：

```
>>> def make_unique(lst):
...     if len(lst) <= 1:
...         return lst
...     last = lst[-1]
...     for i in range(len(lst) - 2, -1, -1):
...         item = lst[i]
...         if item == last:
...             del lst[i]
...         else:
...             last = item
... 
>>> def my_sort2(seq):
...     make_unique(sorted(seq))
... 
>>> timeit.timeit('my_sort2(sequence)', 'from __main__ import sequence, my_sort2', number=1000)
0.46814608573913574 
```

几乎慢了 5 倍。请注意，使用`seq.sort()`and then `make_unique(seq)`and`make_unique(sorted(seq))`实际上是一回事，因为 Timsort 使用`O(n)`空间，你总是有一些重新分配，所以 using`sorted(seq)`实际上并没有改变太多的时间。

jdm 的基准测试给出了不同的结果，因为他使用的输入太小，因此所有时间都被`time.clock()`调用占用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T11:35:29.200

也许这不是您正在寻找的答案，但无论如何，您应该考虑到这一点。

基本上，您在列表中有 2 个操作：

```
unique_list = set(your_list)       # O(n) complexity
sorted_list = sorted(unique_list)  # O(nlogn) complexity 
```

现在，你说“在我看来，首先检查唯一性然后排序是浪费的”，你是对的。但是，这个多余的步骤到底有多糟糕？取 n = 1000000：

```
# sorted(set(a_list))
O(n) => 1000000
o(nlogn) => 1000000 * 20 = 20000000
Total => 21000000

# Your fastest way
O(nlogn) => 20000000
Total: 20000000 
```

速度增益：(1 - 20000000/21000000) * 100 = 4.76 %

对于 n = 5000000，速度增益：~1.6 %

现在，这种优化值得吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T12:56:27.070

这只是我在几分钟内完成的事情。该函数在原地修改列表，并删除连续重复：

```
def make_unique(lst):
    if len(lst) <= 1:
        return lst
    last = lst[-1]
    for i in range(len(lst) - 2, -1, -1):
        item = lst[i]
        if item == last:
            del lst[i]
        else:
            last = item 
```

一些有代表性的输入数据：

```
inp = [
(u"Tomato", "de"), (u"Cherry", "en"), (u"Watermelon", None), (u"Apple", None),
(u"Cucumber", "de"), (u"Lettuce", "de"), (u"Tomato", None), (u"Banana", None),
(u"Squash", "en"), (u"Rubarb", "de"), (u"Lemon", None),
] 
```

确保两种变体都按要求工作：

```
print inp
print sorted(set(inp))
# copy because we want to modify it in place
inp1 = inp[:]
inp1.sort()
make_unique(inp1)
print inp1 
```

现在进行测试。我没有使用 timeit，因为我不想为列表的复制计时，而只想对排序计时。`time1`是`sorted(set(...)`,之后是,`time2`是Avinash Y的解。`list.sort()``make_unique``time3``itertools.groupby`

```
import time
def time1(number):
    total = 0
    for i in range(number):
        start = time.clock()
        sorted(set(inp))
        total += time.clock() - start
    return total

def time2(number):
    total = 0
    for i in range(number):
        inp1 = inp[:]
        start = time.clock()
        inp1.sort()
        make_unique(inp1)
        total += time.clock() - start
    return total

import itertools 

def time3(number): 
    total = 0 
    for i in range(number): 
        start = time.clock() 
        list(k for k,_ in itertools.groupby(sorted(inp))) 
        total += time.clock() - start 
    return total 
```

`sort + make_unique`大约和 一样快`sorted(set(...))`。我必须再做几次迭代才能看到哪一个可能更快，但在变体中它们非常相似。`itertools`版本有点慢。

```
# done each 3 times
print time1(100000)
# 2.38, 3.01, 2.59
print time2(100000)
# 2.88, 2.37, 2.6
print time3(100000)
# 4.18, 4.44, 4.67 
```

现在有一个更大的列表（这`+ str(i)`是为了防止重复）：

```
old_inp = inp[:]
inp = []
for i in range(100):
    for j in old_inp:
        inp.append((j[0] + str(i), j[1]))

print time1(10000)
# 40.37
print time2(10000)
# 35.09
print time3(10000)
# 40.0 
```

请注意，如果列表中有很多重复项，则第一个版本要快得多（因为它的排序较少）。

```
inp = []
for i in range(100):
    for j in old_inp:
        #inp.append((j[0] + str(i), j[1]))
        inp.append((j[0], j[1]))

print time1(10000)
# 3.52
print time2(10000)
# 26.33
print time3(10000)
# 20.5 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-03T02:24:28.700

```
import numpy as np
np.unique(...) 
```

[np.unique](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html)函数返回一个唯一的 ndarray，并根据类似数组的参数进行排序。这将适用于任何 numpy 类型，但也适用于可排序的常规 python 值。

如果您需要常规的 python 列表，请使用`np.unique(...).tolist()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T11:50:50.313

```
>>> import itertools
>>> a=[2,3,4,1,2,7,8,3]
>>> list(k for k,_ in itertools.groupby(sorted(a)))
[1, 2, 3, 4, 7, 8] 
```

# jquery - 如何删除动态创建的 div 作为 get() 成功

> ID：13603044
> 
> 赞同：0
> 
> 时间：2012-11-28T10:36:14.343
> 
> 标签：jquery, ajax, dom

在一个页面中，我使用追加和删除动态创建和删除#container。

在 ajax get() 的结果中，我发现了一个试图删除动态添加的#container 的问题。

```
function ajaxNavigation(link)
{
    $.get(''+link,function(data) {
        if(data!='KO'){
            $('#container').remove();
            $('#column_left').append('<section id="container">'+data+'</section>');
        }
    });
} 
```

稍后在页面中

```
$('document').on("click","#button",function(){
   ajaxNavigation('link.php');
}); 
```

问题是：`remove()`不起作用，那是因为#container 是动态添加的。

通常我`on()`是用来添加一个监听器的，但是我不知道如何在`get()`成功函数中使用它。

# json - Which is best method to send and receive data between Android and MongoDB?

> ID：13603047
> 
> 赞同：1
> 
> 时间：2012-11-28T10:36:28.107
> 
> 标签：json, web-services, mongodb

I want to know , which is best method to send and receive data between android and mongodb server ?

And what kind web service is good to work with mongodb , I know that python works with mongodb pretty good than php ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:36:51.847

You can use JSON over HTTP. Since mongo supports JSON for its document store, it is quite natural.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:38:42.837

best method is to have some kind of server in front of mongodb. you might not want to expose your db to the world directly.

between android and server you can choose whatever protocol you want. between server and mongodb, you use the appropriate driver.

But if you insist on communicating with mongodb directly from android, the latest java driver should work, according to [https://jira.mongodb.org/browse/JAVA-295](https://jira.mongodb.org/browse/JAVA-295)

# android - 从 Android 应用程序向 Blackberry Hub 发送通知

> ID：13603048
> 
> 赞同：1
> 
> 时间：2012-11-28T10:36:30.913
> 
> 标签：android, notifications, blackberry-10

如何从 BlackBerry Hub 中的 Android 应用程序发送和处理通知？我在 BlackBerry 10 上使用 Android 运行时。如果我以常规方式使用 Android 通知，它不会开箱即用。

昨天，2012 年 11 月 27 日，我在汉堡参加了 BlackBerry mini jam。负责 Android 运行时的营销人员说肯定有应用程序可以做到这一点，但他无法向我提供如何做到这一点的详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:15:32.403

如果您有开发 alpha 设备，请尝试使用 beta 4 刷新它，其中包括对 C2DM（推送通知）的支持。

[https://developer.blackberry.com/blackberry10devalphas/update](https://developer.blackberry.com/blackberry10devalphas/update)

如果使用模拟器，只需下载最新版本的模拟器即可。

[https://developer.blackberry.com/develop/simulator/index.html](https://developer.blackberry.com/develop/simulator/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:35:33.820

根据 RIM Support 的说法，自 BB 10 10.0.9.2264 起应包含 Blackberry Hub 的工作版本（我在 10.9.9.339 上，这可能是问题所在）

# python - Python：从 C 模块检索变量/结果

> ID：13603049
> 
> 赞同：1
> 
> 时间：2012-11-28T10:36:31.773
> 
> 标签：python, c, return-value

我需要在 Raspberry 中使用 SPI，并且它使用这种方法，但是它将 SPI 总线的读取结果打印到屏幕上，这是我不想要的。Python 用我要发送的数据调用 Compiled C 模块，但我想在 python 内部接收响应，而不是屏幕。我从不使用 C，而且我对这种语言有点肤浅，所以有人可以告诉我一个选择吗？我读了一些关于获取 cout 和 fopen 的内容，但想知道是否有更多的东西融入到 python 中？有没有机会而不是将结果打印到屏幕上来从函数或其他东西中返回结果？

谢谢你。

C模块：

```
#include <Python.h>
#include "structmember.h"
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include <linux/spi/spidev.h>
#include <linux/types.h>
#include <sys/ioctl.h>

#define ARRAY_SIZE(a) (sizeof(a) / sizeof((a)[0]))
#define MAXPATH 16

PyDoc_STRVAR(SPI_module_doc,
    "This module defines an object type that allows SPI transactions\n"
    "on hosts running the Linux kernel. The host kernel must have SPI\n"
    "support and SPI device interface support.\n"
    "All of these can be either built-in to the kernel, or loaded from\n"
    "modules.\n"
    "\n"
    "Because the SPI device interface is opened R/W, users of this\n"
    "module usually must have root permissions.\n");

typedef struct {
    PyObject_HEAD

    int fd; /* open file descriptor: /dev/spi-X.Y */
    uint8_t mode;   /* current SPI mode */
    uint8_t bpw;    /* current SPI bits per word setting */
    uint32_t msh;   /* current SPI max speed setting in Hz */
} SPI;

static PyObject *
SPI_new(PyTypeObject *type, PyObject *args, PyObject *kwds)
{
    SPI *self;
    if ((self = (SPI *)type->tp_alloc(type, 0)) == NULL)
        return NULL;

    self->fd = -1;
    self->mode = 0;
    self->bpw = 0;
    self->msh = 0;

    Py_INCREF(self);
    return (PyObject *)self;
}

PyDoc_STRVAR(SPI_close_doc,
    "close()\n\n"
    "Disconnects the object from the interface.\n");

static PyObject *SPI_close(SPI *self)
{
    if ((self->fd != -1) && (close(self->fd) == -1)) {
        PyErr_SetFromErrno(PyExc_IOError);
        return NULL;
    }

    self->fd = -1;
    self->mode = 0;
    self->bpw = 0;
    self->msh = 0;

    Py_INCREF(Py_None);
    return Py_None;
}

PyDoc_STRVAR(SPI_transfer_doc,
    "transfer([values]) -> [values]\n\n"
    "Perform SPI transaction.\n"
    "CS will be released and reactivated between blocks.\n"
    "delay specifies delay in usec between blocks.\n");

static PyObject* SPI_transfer(SPI *self, PyObject *args)
{
    uint8_t bits = 8;
    int ret = 0;
    char* list;
    int length_list = 1;
    uint16_t delay = 5;
    uint32_t speed = 500000;
    int i=0;

    PyArg_ParseTuple(args, "s|i:transfer", &list, &length_list);

    char hexbyte[3] = {0};
    uint8_t tx[length_list];
    for (i=0; i < (length_list); i++){

        //should grab first two characters

        //Data Transfer from String list to 2 byte string
        hexbyte[0] = list[2*i];
        hexbyte[1] = list[(2*i)+1];

        //Passing the 2 byte string into a Hex unsigned int 8-bit and then printing result
        sscanf(hexbyte, "%X", &tx[i]);
    }

    for (ret=0; ret<ARRAY_SIZE(tx); ret++){

    }
    puts("\n");

    uint8_t rx[ARRAY_SIZE(tx)];

    /*This is the transfer part, and sets up
    the details needed to transfer the data*/
    struct spi_ioc_transfer tr = {
        .tx_buf = (unsigned long)tx,
        .rx_buf = (unsigned long)rx,
        .len = ARRAY_SIZE(tx),
        .delay_usecs = delay,
        .speed_hz = speed,
        .bits_per_word = bits,
    };

    //The Actuall Transfer command and data, does send and receive!! Very important!
    ret = ioctl(self->fd, SPI_IOC_MESSAGE(1), &tr);
    if (ret < 1)
        printf("ERROR: Can't send spi message");

    //This part prints the Received data of the SPI transmission of equal size to TX
    for (ret = 0; ret < ARRAY_SIZE(tx); ret++) {
        if (!(ret % 6))
            puts("");
        printf("%.2X ", rx[ret]);
    }
    puts("");

    Py_INCREF(list);
    return list;

}

PyDoc_STRVAR(SPI_open_doc,
    "open(bus, device)\n\n"
    "Connects the object to the specified SPI device.\n"
    "open(X,Y) will open /dev/spidev-X.Y\n");

static PyObject *SPI_open(SPI *self, PyObject *args, PyObject *kwds)
{
    int bus, device;
    char path[MAXPATH];
    uint8_t tmp8;
    uint32_t tmp32;
    static char *kwlist[] = {"bus", "device", NULL};
    if (!PyArg_ParseTupleAndKeywords(args, kwds, "ii:open", kwlist, &bus, &device))
        return NULL;
    if (snprintf(path, MAXPATH, "/dev/spidev%d.%d", bus, device) >= MAXPATH) {
        PyErr_SetString(PyExc_OverflowError,
            "Bus and/or device number is invalid.");
        return NULL;
    }
    if ((self->fd = open(path, O_RDWR, 0)) < 0) {
        printf("can't open device");
        abort();
    }
    if (ioctl(self->fd, SPI_IOC_RD_MODE, &tmp8) == -1) {
        printf("can't get spi mode");
        abort();
    }
    self->mode = tmp8;
    if (ioctl(self->fd, SPI_IOC_RD_BITS_PER_WORD, &tmp8) == -1) {
        printf("can't get bits per word");
        abort();
    }
    self->bpw = tmp8;
    if (ioctl(self->fd, SPI_IOC_RD_MAX_SPEED_HZ, &tmp32) == -1) {
        printf("can't get max speed hz");
        abort();
    }
    self->msh = tmp32;

    Py_INCREF(Py_None);
    return Py_None;
}

static int SPI_init(SPI *self, PyObject *args, PyObject *kwds)
{
    int bus = -1;
    int client = -1;
    static char *kwlist[] = {"bus", "client", NULL};

    if (!PyArg_ParseTupleAndKeywords(args, kwds, "|ii:__init__",
            kwlist, &bus, &client))
        return -1;

    if (bus >= 0) {
        SPI_open(self, args, kwds);
        if (PyErr_Occurred())
            return -1;
    }

    return 0;
}

static PyMethodDef SPI_module_methods[] = {
   { NULL },
};

PyDoc_STRVAR(SPI_type_doc,
    "SPI([bus],[client]) -> SPI\n\n"
    "Return a new SPI object that is (optionally) connected to the\n"
    "specified SPI device interface.\n");

static PyMethodDef SPI_methods[] = {
   {"open", (PyCFunction)SPI_open, METH_VARARGS | METH_KEYWORDS, 
        SPI_open_doc},
   {"close", (PyCFunction)SPI_close, METH_NOARGS,
        SPI_close_doc},
   {"transfer", (PyCFunction)SPI_transfer, METH_VARARGS, 
        SPI_transfer_doc},
    {NULL},
};

static PyTypeObject SPI_type = {
    PyObject_HEAD_INIT(NULL)
    0,              /* ob_size */
    "SPI",          /* tp_name */
    sizeof(SPI),    /* tp_basicsize */
    0,              /* tp_itemsize */
    0,              /* tp_dealloc */
    0,              /* tp_print */
    0,              /* tp_getattr */
    0,              /* tp_setattr */
    0,              /* tp_compare */
    0,              /* tp_repr */
    0,              /* tp_as_number */
    0,              /* tp_as_sequence */
    0,              /* tp_as_mapping */
    0,              /* tp_hash */
    0,              /* tp_call */
    0,              /* tp_str */
    0,              /* tp_getattro */
    0,              /* tp_setattro */
    0,              /* tp_as_buffer */
    Py_TPFLAGS_DEFAULT,     /* tp_flags */
    SPI_type_doc,           /* tp_doc */
    0,              /* tp_traverse */
    0,              /* tp_clear */
    0,              /* tp_richcompare */
    0,              /* tp_weaklistoffset */
    0,              /* tp_iter */
    0,              /* tp_iternext */
    SPI_methods,    /* tp_methods */
    0,              /* tp_members */
    0,              /* tp_getset */
    0,              /* tp_base */
    0,              /* tp_dict */
    0,              /* tp_descr_get */
    0,              /* tp_descr_set */
    0,              /* tp_dictoffset */
    (initproc)SPI_init,     /* tp_init */
    0,              /* tp_alloc */
    SPI_new,            /* tp_new */
};

#ifndef PyMODINIT_FUNC  /* declarations for DLL import/export */
#define PyMODINIT_FUNC void
#endif

PyMODINIT_FUNC initspi(void)
{
    PyObject* m;

    if (PyType_Ready(&SPI_type) < 0)
        return;

    m = Py_InitModule3("spi", SPI_module_methods, SPI_module_doc);
    Py_INCREF(&SPI_type);
    PyModule_AddObject(m, "SPI", (PyObject *)&SPI_type);
} 
```

和python脚本：

```
#Python example for SPI bus, written by Brian Hensley
#This script will take any amount of Hex values and determine
#the length and then transfer the data as a string to the "spi" module

import spi
from time import sleep

#At the beginning of the program open up the SPI port.
#this is port /dev/spidevX.Y
#Being called as as spi.SPI(X,Y)
a = spi.SPI(0,0)

print "PY: initialising SPI mode, reading data, reading length . . . \n"

#This is my data that I want sent through my SPI bus
data = ["53484f5728677275706f293b3b0d"]

#Calculates the length, and devides by 2 for two bytes of data sent.
length_data = len(data[0])/2
i=0
#transfers data string
while True:
    a.transfer(data[0], length_data)
    i=i+1
    print i
    sleep(0.5)
#At the end of your program close the SPI port  
a.close() 
```

# php - 正则表达式将字符串与数字匹配

> ID：13603050
> 
> 赞同：1
> 
> 时间：2012-11-28T10:36:33.520
> 
> 标签：php, regex, preg-replace

我有一个存储在变量中的查询字符串，我需要使用 preg_replace() 从中删除一些东西

我要删除的参数如下所示：

```
&filtered_features[48][]=491 
```

由于查询字符串中将有多个这些参数，因此 48 和 491 可以是任何数字，因此正则表达式需要基本上匹配：

```
'&filtered_features[' + Any number + '][]=' + Any number 
```

有人知道我会怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:41:53.580

```
$string = '&filtered_features[48][]=491';

$string = preg_replace('/\[\d+\]\[\]=\d+/', '[][]=', $string);

echo $string; 
```

我假设您想从字符串中删除数字。这也将匹配多变量查询字符串，因为它只查找 [A_NUMBER][]=A_NUMBER 并将其更改为 [][]=

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:50:36.697

```
$query_string = "&filtered_features[48][]=491&filtered_features[49][]=492";
$lines = explode("&", $query_string);
$pattern = "/filtered_features\[([0-9]*)\]\[\]=([0-9]*)/";
foreach($lines as $line)
{
    preg_match($pattern, $line, $m);
    var_dump($m);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:19:55.883

```
/\&filtered_features\[(?<n1>\d*)\]\[\]\=(?<n2>\d*)/' 
```

这将匹配 n1 中的第一个数字和 n2 中的第二个数字

```
preg_match_all( '/\&filtered_features\[(?<n1>\d*)\]\[\]\=(?<n2>\d*)/', $str, $matches); 
```

神秘的答案将用此字符串替换不必要的内容：

```
&something[1][]=123&filtered_features[48][]=491 
```

# php - 从 php 代码创建 cytoscape 树

> ID：13603053
> 
> 赞同：2
> 
> 时间：2012-11-28T10:36:36.703
> 
> 标签：php, javascript, xml, yii, cytoscape-web

我正在尝试使用 cytoscape 显示带有图形的查询结果。我不是javascript专家，所以可能只是语法错误，有人可以看看我的代码吗？

```
 <script type="text/javascript">
        window.onload = function() {
            // id of Cytoscape Web container div
            var div_id = "cytoscapeweb";

            // NOTE: - the attributes on nodes and edges
            //       - it also has directed edges, which will automatically display edge arrows
            var xml = '\
            <graphml>\
              <key id="label" for="all" attr.name="label" attr.type="string"/>\
              <key id="weight" for="node" attr.name="weight" attr.type="double"/>\
              <graph edgedefault="directed">\
                <node id="1">\
                    <?php echo "<data key=\"label\">$prot</data>\\\n";?>
                    <data key="weight">2.0</data>\
        </node>
    <?php $count=2;?>
    <?php  while($row = mysql_fetch_array($result)){
        echo "<node id=\"$count\">\\";                    
        echo "<data key=\"label\">$row['interactor']</data>\\";
                    echo "<data key=\"weight\">1.0</data>\\";
                echo "</node>\\";
                echo "<edge source="1" target=\"$count\">\\";
                    echo "<data key=\"label\">$prot to $row['interactor']</data>\\";
                echo "</edge>\\";
        $count++;
    }?>
              </graph>\
            </graphml>\
            '; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:06:46.197

直接用 JS 编写的 XML 字符串使用反斜杠来保护行尾。您的 PHP 代码也输出反斜杠，但后面没有回车。`"\n"`因此，要么在 each 之后插入，要么从 PHP 代码`"\\"`中删除 every 。`"\\"`

一个建议：当出现问题时，还要在浏览器中查看页面的 HTML 源代码。这个错误在那里应该很明显。并学习使用 Web 浏览器的 JS 控制台（例如，在 Chrome 和 Opera 中，Ctrl-Shift-i 打开带有错误面板的开发人员工具栏）。

# php - 学说获取连接

> ID：13603054
> 
> 赞同：6
> 
> 时间：2012-11-28T10:36:39.147
> 
> 标签：php, doctrine, doctrine-orm

首先，我将举一个带有一些伪代码的示例，然后我将解释问题所在。假设我有两个实体用户和电话号码。它们的关系是一对多的。在我的 UserRepository 中，我可以有类似的东西：

```
class UserRepository
{
    public function getUser($id, $type)
    {
        $users = $this->createQuery("SELECT u, p FROM User u JOIN u.phonenumbers p
            WHERE u.id = :id AND p.type = :type")
            ->setParameters(array(
                'id' => $id,
                'type' => $type,
            ))
            ->getResult();
        return $users[0];
    }
} 
```

在我的应用程序中，如果我有类似的东西：

```
$user = $userRepo->getUser(1, 'home');
var_dump($user->getPhonenumbers()); // here phonenumbers collection is ok

$user = $userRepo->getUser(1, 'work');
var_dump($user->getPhonenumbers()); // Here phonenumbers collection is wrong.
                                // It's exactly the same as the previous one. 
```

所以我的问题是：是否可以使用 fetch join（具有不同的标准）并每次都获得正确的集合？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T03:33:53.633

获取加入和过滤集合并不是很好地协同工作的事情。这是你应该如何做的：

```
SELECT 
    u, p 
FROM 
    User u 
JOIN 
    u.phonenumbers p
JOIN
    u.phonenumbers p2
WHERE 
    u.id = :id 
    AND 
    p2.type = :type 
```

这适用于第二个加入（而不是水合）`p2`的过滤，从而导致正确的水合和过滤。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-28T12:17:05.027

使用querybuilder，它要简单得多。

```
public function getUser($id, $type)
{
    return $this->createQueryBuilder("u")
        ->leftJoin("u.Phonenumbers", "p", "WITH", "p.type=:type")
        ->where("u.id=:id")
        ->setParameters(.....)
        ->getQuery()
        ->getOneOrNullResult() ;
} 
```

# ruby-on-rails - Ruby：使用 google-api-ruby-client SDK 将文件上传到 Google 驱动器失败并出现 Timeout::Error

> ID：13603057
> 
> 赞同：4
> 
> 时间：2012-11-28T10:36:47.850
> 
> 标签：ruby-on-rails, ruby, file-upload, google-drive-api, google-api-ruby-client

我在 Rails 应用程序中使用 google-api-ruby-client 与 Google Drive 交互。所有基本功能，如在文件夹中列出文件、获取、移动、复制和删除文件、创建新文件夹等都运行良好。

但是，上传新文件总是因 Timeout::Error 而失败

我从我的网站（多部分/表单数据）收到要作为常规文件上传的文件，这就是我将其上传到 Google 驱动器的方式

```
result = nil
new_file_obj = google_drive.files.insert.request_schema.new({
  'title' => file_name,
  'mimeType' => file_mime_type,
  'parents' => [{'id' => current_folder_id}]
})

file_content = Google::APIClient::UploadIO.new(new_file.tempfile, file_mime_type, file_name)

result = google_client.execute(
    api_method: google_drive.files.insert,
    body_object: new_file_obj,
    media: file_content,
    parameters: {
      'uploadType' => 'multipart',
      'alt' => 'json'
    }
  ) 
```

这`new_file`是客户端上传的文件。`new_file.tempfile`给出一个类型的对象`Tempfile`。

该`execute`方法永远不会返回，最终我得到一个 Timeout::Error 异常。这是相关的堆栈跟踪：

```
/lib/ruby/1.9.1/net/protocol.rb:140:in `rescue in rbuf_fill'
/lib/ruby/1.9.1/net/protocol.rb:134:in `rbuf_fill'
/lib/ruby/1.9.1/net/protocol.rb:116:in `readuntil'
/lib/ruby/1.9.1/net/protocol.rb:126:in `readline'
/lib/ruby/1.9.1/net/http.rb:2211:in `read_status_line'
/lib/ruby/1.9.1/net/http.rb:2200:in `read_new'
/lib/ruby/1.9.1/net/http.rb:1183:in `transport_request'
/lib/ruby/1.9.1/net/http.rb:1169:in `request'
/lib/ruby/1.9.1/net/http.rb:1162:in `block in request'
/lib/ruby/1.9.1/net/http.rb:627:in `start'
/lib/ruby/1.9.1/net/http.rb:1160:in `request'
/lib/ruby/gems/1.9.1/gems/faraday-0.8.4/lib/faraday/adapter/net_http.rb:74:in `perform_request'
/lib/ruby/gems/1.9.1/gems/faraday-0.8.4/lib/faraday/adapter/net_http.rb:37:in `call'
/lib/ruby/gems/1.9.1/gems/faraday-0.8.4/lib/faraday/request/url_encoded.rb:14:in `call'
/lib/ruby/gems/1.9.1/gems/google-api-client-0.5.0/lib/google/api_client/request.rb:154:in `send'
/lib/ruby/gems/1.9.1/gems/google-api-client-0.5.0/lib/google/api_client.rb:546:in `execute' 
```

我按照此处的示例编写了此代码：[https](https://developers.google.com/drive/examples/ruby#saving_new_files) ://developers.google.com/drive/examples/ruby#saving_new_files我在这里缺少什么？

我要上传的文件是一个小的 png 图像。该文件正确地进入我的 Web 应用程序，因为如果我将它写入磁盘，我可以查看该文件。谷歌服务器肯定没有关闭，因为我可以从 drive.google.com 上传文件。这也意味着我的网络足够好。

那么究竟是什么导致超时？

提到了增加 read_timeout（http://stackoverflow.com/questions/10011387/rescue-in-rbuf-fill-timeouterror-timeouterror）的相同异常的解决方案。那是我应该做的吗？如果是这样，我该如何使用 google-api-ruby-client sdk 在此处进行操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:24:28.867

通过一些快速的实验，可能只是临时文件没有被倒带读取。我修改了快速入门示例以从临时文件中读取，并且能够重现该错误。例如：

```
tmp = Tempfile.new('foo')
tmp.write("hello world")

media = Google::APIClient::UploadIO.new(tmp, 'text/plain', 'foo.txt')
file = drive.files.insert.request_schema.new({
  'title' => 'My document',
  'description' => 'A test document',
  'mimeType' => 'text/plain'
})
result = client.execute(
  :api_method => drive.files.insert,
  :body_object => file,
  :media => media,
  :parameters => {
    'uploadType' => 'multipart',
    'alt' => 'json'}) 
```

这将在挂起约 30 秒左右后产生相同的堆栈跟踪。但是，添加一个调用 rewind 来重置临时文件使它工作得很好

```
tmp = Tempfile.new('foo')
tmp.write("hello world")
tmp.rewind # Reset for reading... 
```

试一试，看看它是否能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:09:30.897

看着[https://github.com/google/google-api-ruby-client/blob/master/lib/google/api_client.rb#L532-560](https://github.com/google/google-api-ruby-client/blob/master/lib/google/api_client.rb#L532-560)

您可以将法拉第连接传递给执行方法。就像是

```
conn = Faraday.default_connection
conn.options[:timeout] = 500 

result = google_client.execute(
api_method: google_drive.files.insert,
body_object: new_file_obj,
media: file_content,
parameters: {
  'uploadType' => 'multipart',
  'alt' => 'json'
 },
connection: conn
) 
```

这将增加 Net:HTTP 超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-20T06:12:31.293

显然，Google 关于使用 Ruby 将文件上传到文件夹的文档尚未记录在案。它旨在实现如下。

```
class DriveUpload
    def self.process
            drive_service = Google::Apis::DriveV3::DriveService.new

            drive_service.authorization = Google::Auth::ServiceAccountCredentials.make_creds(
            json_key_io: File.open('client_secret.json'),
            scope: Google::Apis::DriveV3::AUTH_DRIVE)
            meta_data = Google::Apis::DriveV3::File.new(name:'README_ONDRIVE.md',parents:["1gUxa7_9kbaBX_iofwUYKU_3BFXbBu6Ip"])

            file = drive_service.create_file(meta_data, upload_source: 'README.md',content_type: 'text/plain')

    end
end 
```

请注意，*父级*意味着驱动器内的文件夹（您与服务帐户共享的文件夹）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-29T18:09:57.430

这个答案是错误的。上传文件不需要**权限**`drive.install`。

 **今天我尝试在没有`drive.install`@Steve Bazyl 建议的情况下上传，它就可以正常工作（即使没有`tmp_file.rewind`电话）。

看起来这个问题是短暂的，因为环境中的其他任何东西都没有改变。

~~原来问题是权限不足。以前这些是我要求用户许可的范围：~~

 ~~```
https://www.googleapis.com/auth/userinfo.email 
https://www.googleapis.com/auth/userinfo.profile 
https://www.googleapis.com/auth/drive 
```~~ 

谷歌驱动器要求应用程序`installed`代表用户上传文件。并且`installed`还应请求应用程序获得以下范围的权限：`https://www.googleapis.com/auth/drive.install`

资料来源：

1.  [如何通过 API 向 Google Drive 添加/创建/插入文件？](https://stackoverflow.com/questions/10317638/inserting-file-to-google-drive-through-api?rq=1#comment13300202_10323612)（您不必像那里提到的那样在 chrome 商店中列出您的应用程序。只需请求 drive.install 权限就足够了。请务必重新验证/重新授权所有用户以获取新令牌）

2.  [https://developers.google.com/drive/scopes#google_drive_scopes](https://developers.google.com/drive/scopes#google_drive_scopes)

~~然而，这`Timeout::Error`仍然有些反常。当 Google 服务器在提供的令牌中看到权限不足时，可能也没有响应错误消息。~~

PS：如果有人解释`Timeout::Error`，它将被接受为正确答案。**

# ios - 如何在 iOS 中使用 x 坐标为单元格着色

> ID：13603060
> 
> 赞同：1
> 
> 时间：2012-11-28T10:36:53.240
> 
> 标签：ios, uiscrollview, uikit, uicolor

我有一个`CustomCell`是`UITableViewCell`. 我有一个`scrollView`。我`scrollView`在 pagingEnabled 模式下使用它。

我正在使用此代码来设置 contentSize`scrollView`

`scrollView.contentsize = CGSizeMake(720,70)`

我想要做的是使用 x 坐标为这个单元格的背景颜色着色。(5,y) 和 (10,y) 的颜色必须略有不同。我怎样才能做到这一点？

**编辑：**好吧，我不能直接使用`cell.backgroundColor= [UIColor redColor];`，因为这会使所有背景变成红色，例如，我需要的是从浅红色开始，以深红色结束。所以，我必须解析所有屏幕并设置适当的颜色。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:19:49.903

听起来您需要自己绘制背景。最好的解决方案是创建一个与单元格大小相同的屏幕外位图，并在其中进行自定义绘图。然后将表格单元格的背景图像设置为该图像。我相信，如果您使用命名的 UIImage，那么操作系统将为您缓存它并为具有该背景的每个单元重用它。

如果您需要它更加动态，那么您需要覆盖该表视图行的自定义子类中的 -(void)drawRect: 方法并即时执行您的自定义绘图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:00:49.960

将 UIScrollView 委托函数实现到您的 CustomCell 类中，并将滚动视图委托设置为您的 CustomCell 类。

并这样做

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView{

    CGPoint point = [scrollView contentOffset];

    if (point.x > 80 && point.x < 300) {
        [self setBackgroundColor:[UIColor redColor]];

    }else if(point.x > 400 && point.x < 700){

        [self setBackgroundColor:[UIColor blueColor]];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:12:24.977

检查这个...

```
 cell.textLabel.textColor=[UIColor colorWithRed:15.0/255.0 green:122.0/255.0 blue:202.0/255.0 alpha:1.0]; 
```

这将帮助您为文本着色。

# c# - 通过外部管理的 TCP 套接字使用 WCF

> ID：13603061
> 
> 赞同：4
> 
> 时间：2012-11-28T10:36:56.120
> 
> 标签：c#, wcf

今天，我们使用 WCF`NetTcpBinding`在我们系统中的对等点之间进行通信。通信是双向的：每个对等点都有针对其他对等点打开的通道。

我们现在正在研究扩展我们的架构并引入两种“类型”的对等点：“公共”对等点可通过公共 Internet 访问，而“内部”对等点位于 NAT 后面。这样做的影响是内部对等体可以与公共对等体建立 TCP 连接，但反过来是不可能的。因此，公共对等点无法再与内部对等点建立连接。

由于 TCP 连接是对称的（一旦建立），我的计划是让内部对等点针对公共对等点建立所有必需的 TCP 套接字，然后让公共对等点使用其中一些套接字来建立到内部对等点的通道。但是，当使用 NetTcpBinding 时，WCF 会为我管理 TCP 套接字。

我是否必须编写新的传输来实现此行为，或者是否有替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:52:31.013

尝试查看 SSH 转发。

# magento - 在 list.phtml 中动态设置产品列表页面布局

> ID：13603070
> 
> 赞同：1
> 
> 时间：2012-11-28T10:37:11.643
> 
> 标签：magento, magento-1.7

提前致谢，

我想动态更改产品列表页面布局..

问题是，如果在 list.phtml 中，如果我单击网格链接，则 list.phtml 文件的布局应该是 2columns-right.phtml，如果我单击列表链接，则布局应该是 2columns-left.phtml

我为此使用了以下代码，但还没有运气..

```
if($this->getMode() == 'grid' && $this->getLayout()->getBlock('root')->getTemplate() != 'page/2columns-left.phtml'):
$this->getLayout()->getBlock('root')->setTemplate('page/2columns-right.phtml');
elseif($this->getMode() == 'list' && $this->getLayout()->getBlock('root')->getTemplate() != 'page/2columns-right.phtml'):
$this->getLayout()->getBlock('root')->setTemplate('page/2columns-left.phtml');
endif;

var_dump($pageLayout=$this->getLayout()->getBlock('root')->getTemplate()); 
```

有没有人做过这个。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:21:13.877

我认为您将此代码放在已加载根块的位置。

一种可能性是使用 css，将列表置于 3 列模式并隐藏不需要的列 + 根据“$this->getMode()”使用 css 更改主列的宽度。

另一种方法是创建控制器来为列表和网格生成整个正文页面，并在更改模式时使用 AJAX 填充页面。

# java - Spring 3.1 Java 配置和内部 bean

> ID：13603076
> 
> 赞同：7
> 
> 时间：2012-11-28T10:37:32.677
> 
> 标签：java, spring

```
@Bean
public TimedRepository timedRepository(RealRepository repo) {
    return new TimedRepository(repo, timer); // Adds some metrics
}

@Bean
public RealRepository realRepository(DataSource ds) {
    return new RealRepository(ds); // The real jdbc implementation
} 
```

在过去的 XML 时代，我会将真正的存储库配置为匿名内部 bean。是否可以使用新的 Java 配置方法做类似的事情？在`timedRepository`工厂方法中实例化真正的存储库不是一个选项，因为我希望 Spring 在`RealRepository`.

动机是避免使用任何其他 bean 来获取真正的存储库实现。我还应该提到，两个 bean 都实现了一个`Repository`接口，任何 bean 都将使用该接口，具体取决于存储库（它们不必知道`TimedRepository`或`RealRepository`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:31:40.337

在使用基于 java 的配置时，我认为没有等效于内部或本地 bean。我可能会尝试在 TimedRepositories bean 方法中创建 RealRepository，方法是询问方法签名中的所有依赖项。但是如果你真的需要 spring 来处理 RealRepository 依赖项，你需要使用 bean factory。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(loader=AnnotationConfigContextLoader.class)
public class ConfigTest {

    @Autowired TimedRepository timedRepo;

    @Test
    public void testRepository() {
        Assert.assertNotNull(timedRepo);
    }

    @Configuration
    static class TimedRepositoryConfiguration {

        @Autowired
        private AutowireCapableBeanFactory beanFactory;

        @Bean
        public TimedRepository timedRepository() {
            RealRepository realRepository = (RealRepository) beanFactory.createBean(RealRepository.class, AutowireCapableBeanFactory.AUTOWIRE_CONSTRUCTOR, true);
            return new TimedRepository(realRepository);
        }

        public RealRepository realRepository() {
            return new RealRepository();
        }
    }

    static class RealRepository {

    }

    static class TimedRepository {

        private RealRepository realRepo;

        public TimedRepository(RealRepository r) {
            this.realRepo = r;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:46:16.990

您可以手动实例化 bean：

```
public class BeanThatDependsOnRealRepository() {

  private final Repository repository;

  @Inject
  public BeanThatDependsOnRealRepository(DataSource dataSource) {
    this.repository = new RealRepository(dataSource);
  }
} 
```

这本质上就是匿名内部 bean 在 XML 中所做的事情。您刚刚在封闭类的构造函数中显式地构造了它并从 Spring 中获取了它的依赖关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-31T20:47:45.453

迟到的答案，但这在 Spring Core 4+（可能还有 Spring Core 3）中是可能的，但有一些技巧。

虽然标准 Spring 语义不支持使用 JavaConfig 创建内部 bean，但可以利用内部 bean 周围的内部功能来产生相同的结果。

内部 bean 在属性值解析期间由`BeanDefinitionValueResolver`（请参阅[`BeanDefinitionValueResolver#resolveValueIfNecessary`](https://github.com/spring-projects/spring-framework/blob/65d5cb36634f18b27cda593d1403e00bc4d6c292/spring-beans/src/main/java/org/springframework/beans/factory/support/BeanDefinitionValueResolver.java#L105)）生成。Spring 中“内部 bean”的概念主要包含在这个值解析器（它是内部 bean 的唯一生产者）和术语“包含的 bean”（来自父类`DefaultSingletonBeanRegistry`）下的 bean 工厂中。

我们可以通过将属性定义为 a 来诱骗 Spring 生成额外的内部 bean `BeanDefinition`，根据中提出的解析策略`BeanDefinitionValueResolver`：

```
@Configuration
public class MyConfiguration {

    private static Logger logger = LoggerFactory.getLogger(MyConfiguration.class);

    private RealRepository realRepository;
    private Timer timer;

    public MyConfiguration(@SuppressWarnings("SpringJavaInjectionPointsAutowiringInspection") RealRepository realRepository, Timer timer) {
        this.realRepository = realRepository;
        this.timer = timer;
        logger.info("Constructed MyConfiguration {}", this);
    }

    @Bean
    public TimedRepository timedRepository() {
        TimedRepository timedRepository = new TimedRepository(this.realRepository, this.timer);
        logger.info("Created timed repo: {}", timedRepository);
        return timedRepository;
    }

    public RealRepository realRepository(DataSource dataSource) {
        RealRepository realRepository = new RealRepository(dataSource);
        logger.info("Created real repo: {}", realRepository);
        return realRepository;
    }

    @Override
    public String toString() {
        return "MyConfiguration{" +
                "realRepository=" + realRepository +
                ", timer=" + timer +
                '}';
    }
}

@Component
public class InnerBeanInjectionBeanFactoryPostProcessor implements BeanDefinitionRegistryPostProcessor, PriorityOrdered {

    @Override
    public int getOrder() {
        // Preempt execution of org.springframework.context.annotation.ConfigurationClassPostProcessor
        return 0;
    }

    @Override
    public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) {
        String[] beanDefinitionNameList = ((ConfigurableListableBeanFactory) registry).getBeanNamesForType(MyConfiguration.class, true, false);
        assert beanDefinitionNameList.length == 1;
        BeanDefinition configurationBeanDefinition = registry.getBeanDefinition(beanDefinitionNameList[0]);
        BeanDefinition realRepositoryBeanDefinition = BeanDefinitionBuilder.genericBeanDefinition(MyConfiguration.class)
                .setScope(BeanDefinition.SCOPE_SINGLETON)
                .setFactoryMethod("realRepository")
                .setAutowireMode(RootBeanDefinition.AUTOWIRE_CONSTRUCTOR)
                .getBeanDefinition();
        configurationBeanDefinition.getConstructorArgumentValues()
                .addGenericArgumentValue(realRepositoryBeanDefinition);
    }

    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        // Do nothing
    }
} 
```

此解决方案的明显问题是它需要通过 a 进行手动处理`BeanDefinitionRegistryPostProcessor`，这在此需要大量工作才能获得小幅收益。我会建议如下：

*   创建自定义注释（例如，`@InnerBean`）
*   在需要的地方将此注释附加到`@Configuration`类和候选组件类中的方法
*   调整`BeanDefinitionRegistryPostProcessor`以扫描类以查找带注释的`@InnerBean`静态方法（组件类应在中扫描`#postProcessBeanFactory`，配置类应在中扫描`#postProcessBeanDefinitionRegistry`）
*   将 bean 定义附加到包含 bean 定义的自动装配的构造函数字段（或 setter 字段，如果这是您的约定）

下面是一个例子：

```
@Target(ElementType.METHOD)
public @interface InnerBean {
}

@Configuration
public class MyConfiguration {

    private static Logger logger = LoggerFactory.getLogger(MyConfiguration.class);

    private RealRepository realRepository;
    private Timer timer;

    public MyConfiguration(@SuppressWarnings("SpringJavaInjectionPointsAutowiringInspection") RealRepository realRepository, Timer timer) {
        this.realRepository = realRepository;
        this.timer = timer;
        logger.info("Constructed MyConfiguration {}", this);
    }

    @Bean
    public TimedRepository timedRepository() {
        TimedRepository timedRepository = new TimedRepository(this.realRepository, this.timer);
        logger.info("Created timed repo: {}", timedRepository);
        return timedRepository;
    }

    @InnerBean
    public static RealRepository realRepository(DataSource dataSource) {
        RealRepository realRepository = new RealRepository(dataSource);
        logger.info("Created real repo: {}", realRepository);
        return realRepository;
    }

    @Override
    public String toString() {
        return "MyConfiguration{" +
                "realRepository=" + realRepository +
                ", timer=" + timer +
                '}';
    }
}

@Component
public class InnerBeanInjectionBeanFactoryPostProcessor implements BeanDefinitionRegistryPostProcessor, PriorityOrdered {

    private static Logger logger = LoggerFactory.getLogger(InnerBeanInjectionBeanFactoryPostProcessor.class);

    private Set<BeanDefinition> processedBeanDefinitionSet = new HashSet<>();

    @Override
    public int getOrder() {
        // Preempt execution of org.springframework.context.annotation.ConfigurationClassPostProcessor
        return 0;
    }

    @Override
    public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) {
        ConfigurableListableBeanFactory beanFactory = (ConfigurableListableBeanFactory) registry;
        String[] configBeanDefinitionNames = beanFactory.getBeanNamesForAnnotation(Configuration.class);
        Arrays.stream(configBeanDefinitionNames)
                .map(beanFactory::getBeanDefinition)
                .filter(this::isCandidateBean)
                .peek(this.processedBeanDefinitionSet::add)
                .forEach(this::autowireInnerBeans);
    }

    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        Arrays.stream(beanFactory.getBeanDefinitionNames())
                .map(beanFactory::getBeanDefinition)
                .filter(this::isCandidateBean)
                .filter(beanDefinition -> !this.processedBeanDefinitionSet.contains(beanDefinition))
                .forEach(this::autowireInnerBeans);
    }

    private boolean isCandidateBean(BeanDefinition beanDefinition) {
        return beanDefinition.getBeanClassName() != null && beanDefinition.getBeanClassName().startsWith("com.example.demo.");
    }

    private void autowireInnerBeans(BeanDefinition beanDefinition) {
        // Get @InnerBean methods
        assert beanDefinition instanceof AnnotatedBeanDefinition;
        AnnotatedBeanDefinition annotatedBeanDefinition = (AnnotatedBeanDefinition) beanDefinition;
        Set<MethodMetadata> innerBeanMethods = annotatedBeanDefinition.getMetadata().getAnnotatedMethods(InnerBean.class.getName());

        // Attach inner beans as constructor parameters
        for (MethodMetadata method : innerBeanMethods) {
            String innerBeanName = method.getMethodName();
            if (!method.isStatic()) {
                logger.error("@InnerBean definition [{}] is non-static. Inner beans must be defined using static factory methods.", innerBeanName);
                continue;
            }

            BeanDefinition innerBeanDefinition = BeanDefinitionBuilder.genericBeanDefinition(beanDefinition.getBeanClassName())
                    .setScope(BeanDefinition.SCOPE_SINGLETON)
                    .setAutowireMode(RootBeanDefinition.AUTOWIRE_CONSTRUCTOR)
                    .setFactoryMethod(innerBeanName)
                    .getBeanDefinition();
            beanDefinition.getConstructorArgumentValues()
                    .addGenericArgumentValue(new ConstructorArgumentValues.ValueHolder(innerBeanDefinition, method.getReturnTypeName(), method.getMethodName()));
        }
    }
} 
```

这样做会有一些好处和注意事项。一个很大的好处是 bean 生命周期将由 Spring IoC 容器管理，这意味着将调用生命周期回调（例如`@PostConstruct`和`@PreDestroy`）。bean 可以根据 parent 的生命周期进行自动管理。需要注意的是，bean 不能作为工厂方法参数注入（尽管您可能需要做一些工作来解决这个问题），并且 AOP 代理不会应用于`@Configuration`类中的这些方法（即，`realRepository()`永远不应该被调用）不引用单例内部 bean——相反，应始终引用实例字段）。需要添加进一步的代理（类似于[`ConfigurationClassEnhancer.BeanMethodInterceptor`](https://github.com/spring-projects/spring-framework/blob/65d5cb36634f18b27cda593d1403e00bc4d6c292/spring-context/src/main/java/org/springframework/context/annotation/ConfigurationClassEnhancer.java#L303)）才能应用此功能。

# drupal-7 - 在 drupal 中添加具有 2 级分类的内容

> ID：13603077
> 
> 赞同：3
> 
> 时间：2012-11-28T10:37:33.267
> 
> 标签：drupal-7

我是 Drupal 的新手，我正在使用内容面板。

我想创建一个包含“类别”分类参考字段的新闻内容。但是，我的词汇有 2 个级别和 100 多个术语，所以很难使用简单的小部件来选择一个类别。

我不想创建新的添加内容面板，而是 Drupal 的面板。那么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:12:30.030

尝试使用[分层选择](http://drupal.org/project/hierarchical_select)模块。

[在http://eureka.ykyuen.info/2012/05/29/drupal-7-mutiliple-selection-list-for-taxonomy-using-hierarchical-select/](http://eureka.ykyuen.info/2012/05/29/drupal-7-mutiliple-selection-list-for-taxonomy-using-hierarchical-select/)上还有一个关于如何使用它的教程。

（需要注意的是，尚不支持将其与暴露的 Views 分类字段一起使用。）

# javascript - Angular：$http 404 错误处理

> ID：13603078
> 
> 赞同：10
> 
> 时间：2012-11-28T10:37:35.470
> 
> 标签：javascript, jquery, html, angularjs

我有一个包含 2 个 ng-includes 的 HTML。考虑服务器中是否不存在 ng-include src 之一。到目前为止，它只会加载空白 html，并且在浏览器控制台中会说找不到 http-404 文件。

因此，在这种情况下，我只想将默认错误页面（存在于服务器中）加载到该特定 div 中，即一半显示默认错误页面，另一半显示通过 nginclude 加载的正确 div。

我的逻辑是，我正在使用一个 http 拦截器，我在其中拦截所有 http 调用。每当发生 404 时，我想返回必须仅加载到 div 中的默认错误页面。所以它就像模拟一个正确的http调用但是发送一个错误页面，我假设它必须加载到正确的div。

但这并没有发生:)。我尝试使用默认的 window.load('')。但随后它会加载到页面顶部并跨页面呈现。

或者我应该捕获 div id（如果是这样怎么办？）然后做 tat id 加载默认错误 HTML？

在这方面需要你的想法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T20:09:25.730

To handle this kind of situations you could use http interceptors (find the docs here: [$http](http://docs.angularjs.org/api/ng.%24http)).

Interceptor has to catch the 404 response, load the 404.html page from your server and set it as a *data* for the initial response along with the *status* code 200.

I've created a project that shows how to solve it.

Repository: [https://github.com/matys84pl/angularjs-nginclude-handling-404/](https://github.com/matys84pl/angularjs-nginclude-handling-404/)

Take a closer look at the [main.js](https://github.com/matys84pl/angularjs-nginclude-handling-404/blob/master/www/js/app/main.js) file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T09:12:16.453

我通过在填充 ng-include 值之前直接通过 $http 传递所需的 ng-include url 做了类似的事情。

```
$http({ url: url, method: "GET", cache: $templateCache}).success(function(data) {
        /* there was a template for this url - set the $scope property that 
         * the ng-include is using
         */
        $scope.templateUrl = url;
    }).error(function () {
        // there was not a template for this url - set the default one
        $scope.templateUrl = defaultUrl;
    }); 
```

这里的技巧是将 $templateCache 作为缓存参数传递给 $http - 这意味着获取的 url 存储在 ng-include 使用的同一缓存中，因此当您找到有效模板并将其设置在 templateUrl 属性中时， ng-include 不需要再次获取模板。

# filepicker.io - 有没有办法在使用 filepicker.io 上传之前调整 iO 上相机拍摄的照片的大小？

> ID：13603083
> 
> 赞同：3
> 
> 时间：2012-11-28T10:38:01.630
> 
> 标签：filepicker.io

在 iOS 上上传图像期间，我们在上传结束时遇到内存峰值，并且在上传相机拍摄的照片期间收到内存警告（在 iPhone 5 和模拟器上遇到过）。另外，上传需要很长时间。对于我们的应用程序，我们并不真正需要用户的完整质量照片。

有没有办法在上传之前调整图像的大小（比如有一个视频上传质量的设置）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:49:24.180

当前不支持客户端调整大小。我会将它添加到我们的跟踪器中。

（值得注意的是，如果您要求图像/jpeg 而不是图像/png，则照片的尺寸会明显变小）

# c++ - 对“atexit”的未定义引用

> ID：13603086
> 
> 赞同：1
> 
> 时间：2012-11-28T10:38:16.437
> 
> 标签：c++

在编译 C++ 项目时，

我收到了一个错误：

```
/usr/lib/gcc/i686-linux-gnu/4.7/../../../i386-linux-gnu/crt1.o: In function `_start':
(.text+0xc): undefined reference to `__libc_csu_fini'
/usr/lib/gcc/i686-linux-gnu/4.7/../../../i386-linux-gnu/crt1.o: In function `_start':
(.text+0x11): undefined reference to `__libc_csu_init'

....: undefined reference to `atexit'
collect2: error: ld returned 1 exit status 
```

这是代码：

```
std::atexit(myExitFunction); 
```

myExitFunction 已被很好地声明。为什么会抱怨atexit？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:07:29.213

这是一个链接错误消息。编译器成功找到 的*声明*，`std::atexit()`但链接器找不到此函数的任何已编译*定义*。

尝试通过将此参数添加到链接器来链接您的代码：

```
-stdlib=libc++ 
```

# python - Python 动态帮助和自动完成生成

> ID：13603088
> 
> 赞同：2
> 
> 时间：2012-11-28T10:38:25.767
> 
> 标签：python, dynamic, autocomplete, docstring

我几乎有我想要的...

这个动态对象封装了一个带有动态文档字符串生成的通用函数调用：

```
def add_docs(tool):  
    def desc(func):  
        func.__doc__ = "Showing help for %s()" % tool
        return func
    return desc

class Dynamic(object):
    def __getattr__(self, value):
        @add_docs(value)
        def mutable_f(*args, **kwargs):
            print "Calling:", value
            print "With arguments:", args, kwargs

        return mutable_f 
```

它按预期工作：

```
>>> Dynamic().test(1, input='file')
Calling: test
With arguments: (1,) {'input': 'file'}
>>> Dynamic().test.__doc__
'Showing help for test()' 
```

唯一的两个问题是帮助显示`mutable_f`签名

```
>>> help(Dynamic().test)
Help on function mutable_f in module __main__:

mutable_f(*args, **kwargs)
    Showing help for test()
(END) 
```

并且没有自动完成（我可以即时获取有效函数的列表，并缓存它，因为该操作很昂贵）

我认为第一个是无法解决的，但我不太确定第二个。想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T10:56:06.097

自动补全最常利用[`dir()`函数](http://docs.python.org/2/library/functions.html#dir)的输出，它可以被钩住。只需实现一个`__dir__()`方法：

```
def __dir__(self):
    res = dir(type(self)) + list(self.__dict__.keys())
    res.extend(['dynamic1', 'dynamic2'])
    return res 
```

至于在匹配签名的同时包装函数，您需要基于该签名构建一个外观。我已经[为 Zope 安全功能做到了这一点](http://svn.zope.org/AccessControl/trunk/src/AccessControl/requestmethod.py?rev=113657&view=markup)：

```
import inspect
import functools

class _Default(object):
    def __init__(self, repr):
        self._repr = repr
    def __repr__(self):
        return self._repr

def _buildFacade(name, spec, docstring):
    """Build a facade function, matching the decorated method in signature.

    Note that defaults are replaced by instances of _Default, and _curried
    will reconstruct these to preserve mutable defaults.

    """
    args = inspect.formatargspec(
        formatvalue=lambda v: '=_Default({0!r})'.format(repr(v)), *spec)
    callargs = inspect.formatargspec(formatvalue=lambda v: '', *spec)
    return 'def {0}{1}:\n    """{2}"""\n    return _curried{3}'.format(
        name, args, docstring, callargs)

def add_docs(tool):
    spec = inspect.getargspec(tool)
    args, defaults = spec[0], spec[3]

    arglen = len(args)
    if defaults is not None:
        defaults = zip(args[arglen - len(defaults):], defaults)
        arglen -= len(defaults)

    def _curried(*args, **kw):
        # Reconstruct keyword arguments
        if defaults is not None:
            args, kwparams = args[:arglen], args[arglen:]
            for positional, (key, default) in zip(kwparams, defaults):
                if isinstance(positional, _Default):
                    kw[key] = default
                else:
                    kw[key] = positional

        return tool(*args, **kw)

    name = tool.__name__
    doc = 'Showing help for {0}()'.format(name)
    facade_globs = dict(_curried=_curried, _Default=_Default)
    exec _buildFacade(name, spec, doc) in facade_globs

    wrapped = facade_globs[name]
    wrapped = functools.update_wrapper(wrapped, tool,
        assigned=filter(lambda w: w != '__doc__', functools.WRAPPER_ASSIGNMENTS))

    return facade_globs[name] 
```

当涉及到方法签名时，这将做正确的事情，*几乎*. 您无法绕过此处的可变默认值，需要明确处理这些默认值以保留它们。

一个小示范：

```
>>> def foo(bar, spam='eggs', foobarred={}):
...     foobarred[bar] = spam
...     print foobarred
... 
>>> documented = add_docs(foo)
>>> help(documented)
Help on function foo:

foo(bar, spam='eggs', foobarred={})
    Showing help for foo()

>>> documented('monty', 'python')
{'monty': 'python'}
>>> documented('Eric', 'Idle')
{'Eric': 'Idle', 'monty': 'python'} 
```

整个`_Default`舞蹈都需要保留可变的默认值，虽然这通常是一个坏主意，但确实需要继续按最初的预期工作。构建的外观*看起来*就像原来的一样，并且会像它一样，但可变物继续存在于“正确”的位置。

请注意，外观会更新以尽可能与原始外观匹配；通过使用[`functools.update_wrapper`](http://docs.python.org/2/library/functools.html#functools.update_wrapper)各种元数据从原始复制到外观，但我们注意从中排除`__doc__`字符串，因为我们的外观显式使用它自己的文档字符串。

# php - 如何通过在 foreach 语句中循环来打印会话变量中的内容

> ID：13603089
> 
> 赞同：0
> 
> 时间：2012-11-28T10:38:28.153
> 
> 标签：php, mysql

我试图编写一个代码，可以通过使用 foreach 语句打印和循环我的会话变量的内容

这是我的代码

```
<form class="form form-inline" method = "post" action="reportmaker.php">
<select name="rfield">
<option value="">--Select Field--</option>
<?php
    $sc2=mysql_query("SELECT * from searchcolumn s left join report_fields r on s.scol_id=r.field_id where s.category != 'wh'");
    foreach($sc2 as $sc){
 ?>

<option value="<?php echo $sc[advsearch_col]; ?>"><?php echo $sc[advsearch_name]; ?></option>

 <?php
  }
 ?>
 </select>
 <button type="submit" value = "submit" id="add" name="add" class="btn pull-right">Add More</button>

</form>

<?php
        if(isset($_POST['add']))
            {
            $_SESSION['temp'][]=$_POST['rfield'];   

            }
        if($_SESSION[temp][]!=""){
            foreach($_SESSION[temp][] as $temp)
            {
        echo $temp;
            }
        }
        ?> 
```

此代码出现的错误是

致命错误：无法使用 [] 进行读取

错误所在的行是这个

```
if($_SESSION[temp][]!=""){ 
```

我需要打印会话数组的内容，这是我知道如何解决这个问题的唯一方法？

谢谢

=========编辑

谢谢大家的回答我终于明白了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:41:05.440

这应该有效：

```
<?php
    if(isset($_POST['add']))
        {
        $_SESSION['temp'][]=$_POST['rfield'];   

        }
    if($_SESSION['temp']!=""){
        foreach($_SESSION['temp'] as $temp)
        {
    echo $temp;
        }
    }
    ?> 
```

空括号只是语法糖，便于在数组末尾**附加。**

另外，即使在这里没有引起问题，也要小心正确引用`'temp'`，不要使用`temp`. 如果没有`temp`定义常量，它将采用相应的字符串 value `'temp'`，但如果在其他地方定义了这样的常量，例如 this `define('temp', 'value')`， using`temp`将使用定义的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:41:28.720

这将为您提供添加到会话`temp`数组中的每个帖子字段。你不需要`if`在`foreach`. 您可能想在循环之前检查它是否已设置：

```
 if(isset($_SESSION['temp']))
    {
       foreach($_SESSION['temp'] as $temp) 
```

在整个代码中，您访问`$array[keyname]`不好的数组元素，您应该在键名周围使用引号。这样做的原因是，没有引号，PHP 将其视为一个常量，如果没有找到则回退到一个字符串。所以如果你有一个同名的常量，你就会遇到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:41:39.900

空括号 [] 用于向数组添加内容。要使用整个数组，请省略空括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:42:40.823

```
foreach($_SESSION["temp"] as $temp)
{
echo $temp;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T10:44:51.057

我只是假设你正在调试。要打印数组，您可以使用该函数`print_r($array);`。

对于调试，我通常使用`var_dump($var);`它，因为它还显示了一些额外的细节，如数据类型等。

如果您出于任何原因想使用 foreach 循环，这很容易：

```
foreach($_SESSION as $value) echo $value; 
```

# onclick - 单击 dojox.charting.Chart 时如何获取单击的系列名称？

> ID：13603090
> 
> 赞同：3
> 
> 时间：2012-11-28T10:38:30.943
> 
> 标签：onclick, series, dojox.charting, stacked

我正在尝试使用 dojo 创建图表。我选择 StackedColumns 图表。我想让它互动。当用户单击图形列时，应调用超链接。但要创建超链接'url，我需要系列名称。当用户单击列时，有什么方法可以获取系列名称？我一直在寻找几天，但我没有找到任何解决方案。这是我的代码：

```
<div id="chartNode" style="width: 1024px; height: 768px;"></div>
<div id="legend"></div>

<script type="text/javascript">

require(['dojox/charting/Chart',
'dojox/charting/themes/PrimaryColors',
'dojox/charting/plot2d/StackedColumns',
'dojox/charting/plot2d/Grid',
'dojox/charting/widget/Legend',
'dojox/charting/action2d/Tooltip',
'dojox/charting/action2d/Magnify',
'dojox/charting/action2d/Highlight',
'dojo/store/Observable',
'dojo/store/Memory',
'dojox/charting/StoreSeries',
'dojox/charting/axis2d/Default',
'dojo/domReady!'], function(Chart, theme, StackedColumns,Grid,Legend,Tooltip,Magnify,Highlight,Observable,Memory,StoreSeries){

var myData = [{id:1,value:1,site:'1'},
                            {id:2,value:2,site:'1'},
                            {id:3,value:6,site:'1'},
                            {id:4,value:4,site:'1'},
                            {id:5,value:5,site:'1'},
                            {id:6,value:1,site:'2'},
                            {id:7,value:3,site:'2'},
                            {id:8,value:1,site:'2'},
                            {id:9,value:2,site:'2'},
                            {id:10,value:7,site:'2'}];

var myStore = new Observable(new Memory({
data: { identifier: 'id',
                items: myData
            }
}));

var serie_1 = new StoreSeries(myStore, { query: { site: 1 } }, 'value');
var serie_2 = new StoreSeries(myStore, { query: { site: 2 } }, 'value');

var myChart = new Chart('chartNode');
myChart.setTheme(theme);
myChart.addAxis('x', { fixLower: 'minor', 
           fixUpper: 'minor', 
           natural: true,
           rotation: 90
});

myChart.addAxis('y', {vertical: true,fixLower: 'major',fixUpper: 'major',minorTicks: true,includeZero: true});
myChart.addPlot('myPlot', { type: 'StackedColumns', gap: 5, minBarSize: 8});                                    

myChart.addSeries('Serie 1',serie_1,{ stroke: { color: 'red' }, fill: 'lightpink' });
myChart.addSeries('Serie 2',serie_2,{ stroke: { color: 'blue' }, fill: 'lightblue' });

var highlight = new Highlight(myChart, 'myPlot');

myChart.render();

var legend = new Legend({ chart: myChart }, 'legend');

myChart.connectToPlot('myPlot',function(evt) {
// React to click event
    if(type == 'onclick') {
    var msg = 'x:'+evt.x+';y:'+evt.y+';index: '+evt.index+';value: '+evt.run.data[evt.index];
    alert(msg);
    //How to get series informations when onclick event fires???

    }
    var tip = new Tooltip(myChart,'myPlot',{text:function(evt){return evt.run.data[evt.index];}});

}); 

});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:14:10.923

我在一个堆叠的栏中尝试了这个并且效果很好：

```
chart.connectToPlot("default", function(evt) {var type  = evt.type; if(type=="onclick") console.log(evt.run.name);}) 
```

evt.run.name 根据您单击的列提供系列名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T14:12:00.910

伟大的！谢谢诺莉亚！

我已经将它用于饼图。可以通过参数 evt.index 获取切片的索引号。

# javascript - WinJS 绑定未更新

> ID：13603093
> 
> 赞同：2
> 
> 时间：2012-11-28T10:38:36.390
> 
> 标签：javascript, windows, windows-8, winjs

我想简单地将 html 元素的 textContent 绑定到数据字符串。我为实现这一目标所做的是：

```
<span id="currentDate" data-win-bind="textContent:Data.currentDateString"></span> 
```

代码定义了一个命名空间数据

```
WinJS.Namespace.define("Data", {
    currentDateString: currentDateString,
}); 
```

其中 currentDateString 定义为：

```
var currentDateString = "Monday"; 
```

在页面的就绪函数中，我调用 WinJS.Binding.processAll();。这会将 HTML 的内容设置为字符串。但是 HTML 不会随着字符串的变化而更新。我想我必须触发一些字符串确实发生变化的事件。我该怎么做呢？有没有一种简单的方法，因为列表数据源有 WinJS.Binding.List？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:37:33.107

您的对象需要是可观察的，而您的 property-defined-on-a-namespace 则不是。

您的代码需要像这样更改：

```
WinJS.Namespace.define("Data", {
    currentDate: WinJS.Binding.as({
        asString: currentDateString,
    }),
});

Data.currentDate.asString = "Another day!"; 
```

当赋值执行时，它会改变值。

可观察对象还有其他助手，例如`WinJS.Binding.define`

# .net - 紧凑的框架 - 捕获来电电话事件

> ID：13603095
> 
> 赞同：1
> 
> 时间：2012-11-28T10:38:52.727
> 
> 标签：.net, compact-framework

我在.Net Compact Framework 中工作。如果我接到电话，我会丢失所有工作数据。我想捕获来电事件并保存我的所有数据并在挂断时将其取回。我他们是我能做到的任何可能性。我发现 TAPI 适合这个，但我不知道如何使用。请帮我。提前致谢。

# mongodb - 从 mongodb 中的副本配置重新开始

> ID：13603096
> 
> 赞同：17
> 
> 时间：2012-11-28T10:38:55.903
> 
> 标签：mongodb, replication

我在 mongodb 中配置副本集时犯了一个错误。我认为我做错的是我在两个节点上都做了一个 rs.initialize() ，这让他们在某种程度上感到困惑。我不知道。

现在我想做的就是重新开始，但我找不到取消初始化节点的方法。所以我按照建议删除了 local* db 文件，从而重置了配置。我这样做了，现在没有任何效果。

```
> rs.initiate()
{
    "info2" : "no configuration explicitly specified -- making one",
    "me" : "0.0.0.0:27017",
    "errmsg" : "couldn't initiate : can't find self in the replset config",
    "ok" : 0
}
> rs.conf()
null 
```

我试图删除并重新安装该软件包（我在 Ubuntu 服务器上执行此操作），这意味着我的 mongodb.conf 消失了，并且我的 init 脚本停止工作。这当然很容易解决。

那么我该如何重新开始呢？

注意：我确实看过[这个答案](https://stackoverflow.com/questions/12462167/mongodb-cant-initiate-replica-set-with-default-configuration)，但由于 rs.conf() 不起作用，这也不起作用。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-05-31T15:26:05.650

如果您的机器的主机名没有映射回 127.0.0.1，您也会收到此错误。更新您的 /etc/hosts 和/或您的 /etc/hostname，并且没有配置的 rs.initiate() 应该可以工作。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-29T01:53:46.003

如果您使用已生成的配置强制重新配置，是否可以解决问题？

您可以在 {{mongo}} shell 中执行类似于以下操作的操作：

```
> cfg = {
...     "_id" : "rs0",
...     "version" : 1,
...     "members" : [
...         {
...             "_id" : 0,
...             "host" : "0.0.0.0:27017"
...         }
...     ]
... }

>rs.reconfig(cfg, {force:true}) 
```

您可能需要调整`cfg`变量以获得您的主机名和端口名，因为`can't find self in new replset config`如果 repl 集在配置中找不到它正在运行的节点，错误将返回到 shell。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-05T18:05:42.403

如果您只是注释掉这将获得正确`bind_ip`的`/etc/mongod.conf`结果，以便您可以重新发出`rs.initiate()`命令来设置或重新配置副本。

# c++ - std::string::max_size() 作为静态成员

> ID：13603098
> 
> 赞同：6
> 
> 时间：2012-11-28T10:38:57.137
> 
> 标签：c++, std

为什么不是`max_size`静态成员`std::string`？

这可以编译，但我认为所有字符串共有的属性只能通过字符串的实例访问，这很奇怪：

```
std::size_t max_size = std::string().max_size(); 
```

为什么要这样实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T10:45:41.723

> 为什么 max_size 不是 std::string 的静态成员？

因为 max_size 返回值取决于字符串实例内部使用的分配器实例。

# wpf - WPF-MVVM：防止用户在列表框中选择其他内容

> ID：13603104
> 
> 赞同：1
> 
> 时间：2012-11-28T10:39:19.883
> 
> 标签：wpf, listbox

我有一个小型 WPF 应用程序（.Net 3.5 :/ ）。

在这个应用程序中，我有一个列表框，它允许我在应用程序的右侧选择要编辑的元素。

如果右侧部分无效，我需要防止用户更改元素的选择。

我对此进行了很多搜索：有些人告诉要更改背景/画笔以使其看起来无法选择（但仍然可以选择）

其他一些人告诉我更新子元素的 IsFocusable 属性：

```
<ListBox itemsSoutces={Binding Test}>
    <ListBoxt.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="Focusable" Value="False"/>
        </Style>
    </listBox.ItemContainerStyle>
</ListBox> 
```

这个解决方案的问题是这个值必须来自我的 ViewModel 的值，我不知道（也不可能）将 Style Setter 的值绑定到我的 ViewModel 的属性？

是否可以？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:38:13.433

如果右侧部分无效，我会简单地禁用列表框，方法是设置`IsEnabled`为 false。如果您的 ViewModel 包含相应的属性，您可以绑定到该属性：

```
<ListBox IsEnabled="{Binding IsValid}" ...> ... </ListBox> 
```

# windows-phone-7 - Windows phone 平铺文字颜色显示错误

> ID：13603109
> 
> 赞同：0
> 
> 时间：2012-11-28T10:39:38.963
> 
> 标签：windows-phone-7, text, colors, windows-phone-7.1

在我的 Windows Phone 应用程序中，我创建了一个带有深蓝色文本的磁贴，当我设置磁贴并且我的应用启动时，磁贴看起来是正确的，只是因为某种原因，磁贴上的文本（也就是应用程序的名称）被重置为显示白色。我有一个带有黑色文本的版本，但出现了同样的问题。

是否有一些标准是所有 Windows Phone 磁贴文本都应该是白色的？他们可以在直的 png 图像上重置文本颜色，这真是太神奇了……

无论如何，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:06:24.793

我假设您正在尝试通过图像在磁贴中显示应用程序名称。

清除项目属性 ->**平铺选项部分下的****标题**文本属性即可，但这会在 VS2010 中显示错误。

 **要删除默认的 Tile Title，请在编辑器中打开 WMAppManifest.xml（它应该在 Properties 文件夹下）。

在 <Tokens> 部分，您将找到与图块相关的详细信息。清除 <Title> 标签内的文字，保存并重新编译。

我在我的一个项目中这样做了，最终的 XML 片段如下所示（注意空的 <Title> 标记）。

```
<Tokens>
    <PrimaryToken TokenID="MyAppToken" TaskName="_default">
    <TemplateType5>
        <BackgroundImageURI IsRelative="true" IsResource="false">Background.png</BackgroundImageURI>
        <Count>0</Count>
        <Title></Title>
    </TemplateType5>
    </PrimaryToken>
</Tokens> 
```**

# sql-server - SQL函数错误[在函数中无效使用副作用运算符'select']

> ID：13603111
> 
> 赞同：6
> 
> 时间：2012-11-28T10:39:45.843
> 
> 标签：sql-server

任何人都可以帮我在 sql server 2012 中创建函数吗，我在 sql 中是新的，它显示错误 [在函数中无效使用副作用运算符“选择”]

```
CREATE FUNCTION Get_RearEnd_Outflow( @I_TXN_ID INT)
RETURNS int
AS BEGIN
  DECLARE @V_COUNT INT
  SELECT COUNT(*) INTO @V_COUNT FROM IRR_CHARGES_M
  RETURN @V_COUNT
END 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T10:49:32.873

正确的[语法](http://msdn.microsoft.com/en-us/library/ms187330.aspx)应该是

```
CREATE FUNCTION Get_RearEnd_Outflow( @I_TXN_ID INT)
RETURNS int
AS BEGIN
  DECLARE @V_COUNT INT
  SELECT @V_COUNT = (SELECT COUNT(*) FROM IRR_CHARGES_M)
  RETURN @V_COUNT
END 
```

但是SET 是在 T-SQL 中分配变量[的更好方法](http://msdn.microsoft.com/en-us/library/ms189484.aspx)

```
 SET @V_COUNT = (SELECT COUNT(*) FROM IRR_CHARGES_M) 
```

**编辑 2：**对于多个分配，您可以使用`SELECT`

对于多个刺客

```
SELECT  @variableOne = someColumn,  @variableTwo = someColumn from tblTable 
```

**编辑：**来自关于 slect 的 MSDN 链接

> 对于分配变量，我们建议您使用 SET @local_variable 而不是 SELECT @local_variable。有关详细信息，请参阅 SET @local_variable。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:50:38.053

```
 CREATE FUNCTION Get_RearEnd_Outflow()
     RETURNS int
     AS
     BEGIN
     DECLARE @COUNT INT;
    SET @COUNT =(SELECT COUNT(*) FROM IRR_CHARGES_M);
return @COUNT
    END
     GO 
```

或使用：

```
CREATE FUNCTION Get_RearEnd_Outflow()
     RETURNS int
     AS
     BEGIN
    return  (SELECT COUNT(*) FROM IRR_CHARGES_M)

    END
     GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:45:06.597

尝试这样的事情：

```
创建函数 Get_RearEnd_Outflow(@I_TXN_ID INT)
返回整数
开始
  声明@V_COUNT INT；
    SET @V_COUNT = (SELECT COUNT(*) FROM IRR_CHARGES_M);
  返回@V_COUNT；
结尾

```

# c# - hasvalue 运算符检查 null 有什么区别

> ID：13603115
> 
> 赞同：1
> 
> 时间：2012-11-28T10:39:50.523
> 
> 标签：c#, nullable

> **可能重复：**
> [首选哪个：Nullable<>.HasValue 或 Nullable<> == null？](https://stackoverflow.com/questions/676078/which-is-preferred-nullable-hasvalue-or-nullable-null)

我有领域`DateTime? Date`

我需要检查 Date 是否为空并设置最小值。

```
var anyDate = Date ?? DateTime.MinValue(); 
```

或者

```
var anyDate = Date.HasValue ? Date.Value : DateTime.MinValue(); 
```

什么是正确的 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:41:58.923

两者都是。第一个较短，然后有我的偏好。检查： [首选哪个：Nullable<>.HasValue 或 Nullable<>！= null？](https://stackoverflow.com/questions/676078/which-is-preferred-nullable-hasvalue-or-nullable-null)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:56:40.757

我想你可以用这个

```
var anyDate = Date.GetValueOrDefault(DateTime.MinValue); 
```

由于您要检查 null 并在这种情况下分配一个默认值，因此这大致转换为形式

```
if(Date.HasValue)
   return Date.Value;
return defaultvalue; 
```

# html - HTML5 CANVAS Shadow 一个错误？还是代码缺陷？

> ID：13603118
> 
> 赞同：1
> 
> 时间：2012-11-28T10:40:24.397
> 
> 标签：html, canvas, shadow

我面临着关于画布的问题。

画布保存到 data:image 一次。
它是用来重绘的。
此时出现两个问题。

1.  阴影将应用于尚未绘制阴影的对象。
2.  如果重复保存和重绘，阴影会变深。

* * *

```
<canvas id="SAMPLE" width="960" height="480"></canvas>
<script type="text/javascript" src="./jquery.js"></script>
<script>
    var canvas = $("#SAMPLE"),
        ctx = canvas[0].getContext("2d");

    // first object (no shadow)
    ctx.strokeStyle   = "#0067ef";
    ctx.fillStyle     = "#0067ef";
    ctx.lineCap       = "round";
    ctx.lineWidth     = "15";
    ctx.globalAlpha   = 1;
    ctx.shadowBlur    = 0;
    ctx.shadowOffsetX = 0;
    ctx.shadowOffsetY = 0;
    ctx.shadowColor   = "#363636";
    ctx.beginPath();
    ctx.moveTo( 10, 10);
    ctx.lineTo(200, 200);
    ctx.stroke();
    ctx.closePath();

    // second object (has shadow)
    ctx.shadowBlur    = 5;
    ctx.shadowOffsetX = 5;
    ctx.shadowOffsetY = 5;
    ctx.shadowColor   = "#363636";
    ctx.beginPath();
    ctx.moveTo(300, 10);
    ctx.lineTo(400, 200);
    ctx.stroke();
    ctx.closePath();

    // Canvas is saved to data:image once.
    var save = canvas[0].toDataURL();

    // clear canvas
    ctx.clearRect(0, 0, 960, 480);

    // redraw
    var img = new Image();
        img.src = save;
        img.onload = function() {
            ctx.drawImage(this,0,0);
        };
</script> 
```

调查保存时和重绘前的图片是正常的。

重绘时会出现两个问题。

1.  阴影将应用于尚未绘制阴影的对象。
2.  如果重复保存和重绘，阴影会变深。

我的代码有缺陷吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:45:53.813

因为你`fillStyle`和其他参数都被保留了，所以在绘制图像时，效果是叠加的。

使用`save()`and`restore()`来防止这种情况：

```
ctx.save();
// first object (no shadow)
ctx.strokeStyle   = "#0067ef";
ctx.fillStyle     = "#0067ef";
/*
...
*/
ctx.closePath();
ctx.restore();

// Canvas is saved to data:image once. 
```

[JSFiddle 演示](http://jsfiddle.net/Rxtf9/)，带有一个额外的画布和附加的图像以进行比较。

注释掉`save()`and`restore()`并重新运行小提琴，你会发现不同。

# android - Micromax A110 ICS 中未安装应用程序

> ID：13603121
> 
> 赞同：1
> 
> 时间：2012-11-28T10:40:39.557
> 
> 标签：android, android-emulator

我制作了一个应用程序，它在模拟器中运行良好，但现在我试图在我的设备 [Micromax A110 ICS] 中安装未签名的 apk，但每当我点击安装时都会收到消息：- 应用程序未安装，为什么？

清单看起来像这样：-

```
<supports-screens android:smallScreens="true" android:normalScreens="true" android:largeScreens="true" android:anyDensity="true" android:resizeable="true"/><uses-permission android:name="android.permission.SEND_SMS">
    </uses-permission><uses-permission android:name="android.permission.READ_SMS">
    </uses-permission><uses-permission android:name="android.permission.WRITE_SMS">
    </uses-permission><uses-feature android:glEsVersion="0x00010001">
     </uses-feature><uses-feature android:name="android.hardware.screen.landscape" android:required="false">
     </uses-feature><uses-feature android:name="android.hardware.touchscreen" android:required="false">
     </uses-feature><uses-feature android:name="android.hardware.faketouch" android:required="true">
     </uses-feature><uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16">
    </uses-sdk><uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE">
    </uses-permission><uses-permission android:name="android.permission.INTERNET">
    </uses-permission><uses-permission android:name="android.permission.WAKE_LOCK">
    </uses-permission><uses-permission android:name="android.permission.ACCESS_NETWORK_STATE">
    </uses-permission><uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION">
    </uses-permission> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:46:05.857

是否已启用设备进行开发？

选择设置>>应用程序>>从未知来源安装。

很多时候未签名的 apk 会产生问题，所以我建议您通过将手机连接到计算机并在作为 android 应用程序运行时选择您的设备来直接安装构建。

或制作一个签名 apk 并安装到您的设备上。

# c++ - exception_handling_C++_xcode

> ID：13603128
> 
> 赞同：0
> 
> 时间：2012-11-28T10:41:17.950
> 
> 标签：c++, xcode, exception-handling

以下代码在 Visual Studio 2010 中完美抛出异常：

```
 #include <iostream>
        #include <cmath>
        using namespace std;

        int perfectSquare(double sq, int nu);

        int main()
        {
            double num;
            double squareRoot;
            int perfectSq;

            cout << "Enter the a number: ";
            cin >> num;

            try
            {
                squareRoot = sqrt(num); 
                perfectSq = perfectSquare(squareRoot, num);
                cout << "The square root is: " << perfectSq << endl;
            }

            catch(char * exceptionString)
            {
                cout << exceptionString;
            }

            cout << "BYE." << endl;
        //  system("PAUSE");
            return 0;
        }

        int perfectSquare(double sq, int nu)
        {
            int temp = sq;
            if (sq != temp)     //clever test; if square root IS NOT an INT
            {
                throw "not a perfect square.\n";
            }
            else
            {
                return sq;
            }
        } 
```

但是，在 Xcode 中，它不会恢复，并且会一直在调试器中遇到断点。例如，如果我输入 33（不是完美的正方形），则会显示以下错误：libc++abi.dylib: terminate called throwing an exception (lldb)

它应该“抛出”这条线：“不是一个完美的正方形。” 并且程序应该终止（就像在 VS 2010 中一样）。我不想在 Xcode 中启用异常断点，因为我只想让程序在不调试的情况下一直运行到最后。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:49:51.343

你抛出的是一个字符串文字，它在 XCode 中似乎是 a `const char*`，而不是 a`char*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:50:50.177

您实际上不是在扔 a `char *`，而是在扔 a `const char *`。将异常捕获更改为

```
catch(const char * exceptionString) 
```

它应该可以工作。

C++ 中的所有文字字符串都等价于指向常量字符串的指针，即`const char *`.

# actionscript-3 - Flash动态舞台大小控制

> ID：13603130
> 
> 赞同：0
> 
> 时间：2012-11-28T10:41:21.527
> 
> 标签：actionscript-3, flash

阶段是否可以在运行时动态更改？意味着如果初始大小是 400X300 并且我想将 swf 阶段的大小从 html 更改为 600x600？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:50:13.807

您无法从 SWF 更改舞台的大小，例如通过`stage.stageWidth = 600;`但您可以告诉包含 HTML 页面以更改嵌入式 SWF 的宽度/高度属性，然后在您的 SWF 中您可以响应舞台大小的更改，例如

```
stage.align = StageAlign.TOP_LEFT;
stage.scaleMode = StageScaleMode.NO_SCALE;
stage.addEventListener(Event.RESIZE, onStageResized, false, 0, true); 
```

并从那里更新布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:50:08.470

您可以在 HTML 中随意更改 swf 的大小。但是，默认情况下它只会*缩放*内容，即您的代码不知道 swf 的外部大小。

如果将`Stage.scaleMode`to`StageScaleMode.NO_SCALE`和`Stage.align`属性设置为`StageAlign.TOP_LEFT`，则舞台将不会缩放，而是设置为实际可用的尺寸。

# php - 使用 wp_nav_menu 的选定菜单类

> ID：13603131
> 
> 赞同：-1
> 
> 时间：2012-11-28T10:41:21.357
> 
> 标签：php, wordpress, menu

我为垂直菜单创建小部件现在我正在尝试使用选择或当前菜单

```
`wp_nav_menu` 
```

任何人都知道如何在选择时添加当前类`wp_nav_menu`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:22:38.173

**LI** >>>>>>>> **data-menu-active="2"**中添加了一个额外的标签，您可以使用它添加额外的活动类或使用 jquery 或 javascript 选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:31:14.377

```
jQuery("#_menu-3 ul li").each(function(){
  if(typeof jQuery(this).attr('data-menu-active') != 'undefined' ){
     jQuery(this).addClass('_current');
     jQuery(this).find('a:first').addClass('_current');
  }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T21:44:49.310

它应该已经有一个类`current-menu-item`

# asp.net - 带有双反斜杠的 ISAPI 过滤器的路径。

> ID：13603132
> 
> 赞同：0
> 
> 时间：2012-11-28T10:41:23.620
> 
> 标签：asp.net, iis, isapi

1.  最近我有一个 EPIserver 站点出现错误，因为它无法为 ISAPI-filter **"C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_filter.dll"**加载 LoadLibraryEx 。我检查了 IIS，路径看起来很奇怪，有 2 个反斜杠。像这样：**“C:\Windows\Microsoft.NET\Framework\v4.0.30319\\aspnet_filter.dll”**所以我通过删除一个反斜杠并检查路径是否正确来更改路径。这个网站工作。
2.  现在我尝试安装一个新的 EPiSite 并出现错误，它无法加载 ISAPI 过滤器，但路径带有双反斜杠！3.我在互联网上阅读并找到一个关于双反斜杠的论坛帖子，说它应该在**C:\Windows\System32\inetsrv\config\applicationHost.config**中更改。我检查了那里的路径也有双斜线所以我改变了它。
3.  但是现在该站点给出了相同的错误，但只有一个反斜杠。它无法加载它。

我不太了解 ISAPI 过滤器或 IIS，所以我想知道反斜杠是否应该存在或者它是否是错误的，当然感谢任何帮助重新配置它工作的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:50:12.907

我建议您检查您的 machine.config 中的过滤器路径。那里可能有一些问题。

# sql - 使用触发器更新查询

> ID：13603141
> 
> 赞同：0
> 
> 时间：2012-11-28T10:41:52.387
> 
> 标签：sql, plsql, oracle11g, sqlplus, oracle-apex

我有 2 张桌子，即 (1)`Return_Invoice` 和 (2) `product_warehouse`。`Product_warehouse`一旦我在表格数量列中输入数据，`Return_Invoice`即当我在表格列中输入应该从表格中的列减去的`Quantity`值时，我想更新所使用的数量列。为此的任何查询或触发器。`Return_Invoice``quantity``Quantity``Product_Warehouse`

![在此处输入图像描述](../Images/1cc39b7cf153899c1b8c6c9c7666d26b.png)

我尝试了以下查询，但它不起作用。

```
update product_warehouse 
set Product_Warehouse.Quantity = Product_Warehouse.Quantity - Return_Invoice.Quantity
where (Product_Warehouse.item_code = Return_Invoice.item_code) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:41:48.173

请检查给定的触发器是否是您的要求：

```
create or replace
TRIGGER "WR_RETURN_INVOICE_UPDATE_TRG" 
AFTER UPDATE ON RETURN_INVOICE
FOR EACH ROW
  BEGIN
    UPDATE PRODUCT_WAREHOUSE
    SET QUANTITY=QUANTITY-:OLD.QUANTITY
    WHERE ITEM_CODE=:OLD.ITEM_CODE;   
END WR_RETURN_INVOICE_UPDATE_TRG; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:55:40.030

将您的商品代码放在需要的地方

```
 Create TRIGGER anUpdate ON dbo.Return_Invoice
After Insert
AS
declare @qty int
set nocount on

BEGIN
    set @qty= (Select RI.quantity FROM Return_Invoice RI where Item_code=yourcode)
    Update Product_Warehouse set  Quantity=Quantity-@qty where  Item_code=yourcode
END
GO 
```

# mysql - 在mysql中将日期随机更改+- 5天？

> ID：13603145
> 
> 赞同：1
> 
> 时间：2012-11-28T10:41:57.370
> 
> 标签：mysql, date, datetime

> **可能重复：**
> [在 MySQL 中插入/更新随机日期](https://stackoverflow.com/questions/4546111/insert-update-random-date-in-mysql)

如何在mysql中随机更改日期+- 5天？

```
UPDATE student SET date = date*(RAND()*-5,+5) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:00:06.797

`SELECT 5 + ROUND(RAND()) * -10`将给出**5**或**-5**，您可以将其与[`DATE_ADD()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add)函数结合使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:56:58.143

试试这个：

```
UPDATE `student` SET `date` = DATE_ADD(`date`, INTERVAL ((1 - ROUND((RAND()))*2)*5) DAY) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:56:11.350

以下查询输出随机日期 +-5 天后 (CURDATE())

```
select ADDDATE(CURDATE(), INTERVAL ROUND(RAND()*10)-5 DAY) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:57:18.243

尝试这样的事情：

```
select case when (RAND()*10) >= 5 then date_add(<date_col>, INTERVAL 5 DAY)
            else date_add(<date_col>, INTERVAL -5 DAY)
            end
from <your_table> 
```

### [SQL Fiddle 演示](http://sqlfiddle.com/#!2/d41d8/4312)

你可以像这样更新你的表：

```
UPDATE student SET `date`=
 case when (RAND()*10) >= 5 then date_add(`date`, INTERVAL 5 DAY)
            else date_add(`date`, INTERVAL -5 DAY)
            end; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T11:00:34.660

```
UPDATE student SET date = ADDDATE(date, INTERVAL ROUND((rand() * 9) - 4) DAY); 
```

# codeigniter - Doctrine 存储库 findOneBy 打印 sql。为什么？我怎样才能禁用它？

> ID：13603156
> 
> 赞同：0
> 
> 时间：2012-11-28T10:42:18.343
> 
> 标签：codeigniter, orm, doctrine

```
$rep = $em->getRepository('Entities\User');
$user = $rep->findOneBy(array('email'=>'d*****e@s*****o.com')); 
```

打印输出：

> SELECT t0.uid AS uid1, t0.email AS email2, t0.password AS password3, t0.name AS name4, t0.surname AS surname5, t0.matrikel AS matrikel6, t0.status AS status7, t0.registration_time AS registration_time8, t0 .gid AS gid9 来自用户 t0 WHERE t0.email = ? 限制 1 数组（1）{ [0]=> 字符串（21）“d*****e@s*****o.com”} 数组（1）{ [0]=> 字符串（6） “细绳” }

我只想要实体，而不是打印输出。我在哪里可以禁用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:30:08.450

您可能[启用了 Echo SQL 记录器](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/configuration.html#configuration-options)。把它关掉。

# javascript - 我需要帮助在用 javascript 编写的函数中更改文件的 src

> ID：13603163
> 
> 赞同：0
> 
> 时间：2012-11-28T10:42:37.940
> 
> 标签：javascript, html, google-analytics

我希望 ga.js 的 src 从我的 js/ 文件夹中读取，而不是从 google-analytics 中读取。我的服务器上有 ga.js 文件，并且想将链接映射到该文件，而不是来自 google-analytics.com。我不知道 JavaScript。所以任何帮助将不胜感激。下面是函数。我需要编辑的行是第三行。

```
(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:45:09.467

修改下面的函数行我不知道你为什么要这样做，但修改你的代码，如下所示，用你存储文件的路径替换localpath

```
(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = '\localpath\ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:45:37.587

更改此行：

`ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';`

到： `ga.src = 'js/dummy.js';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:46:03.553

将您的 src 属性更改为直接指向 /js/ 文件夹中的“ga.js”文件：

```
ga.src = '/js/ga.js'; 
```

您可以在此处找到有关源属性的更多信息：http: [//www.w3schools.com/tags/att_script_src.asp](http://www.w3schools.com/tags/att_script_src.asp)

# java - 与 .NET 应用程序和 JSF 一起使用的 Web 服务技术

> ID：13603167
> 
> 赞同：-1
> 
> 时间：2012-11-28T10:42:51.450
> 
> 标签：java, .net, web-services, jsf

我有一堆 .NET 技术中的应用程序：winforms 中的桌面，ASP.NET 中的 Web。我还将有一个用 JSF 编写的网页。所有这些应用程序都使用相同的数据库（或多个数据库）。我的问题是所有这些应用程序都自己连接到数据库（或将连接）。

我想创建一个只能访问数据库的网关。其他应用程序（在 .NET 和 Java 中）将使用它从数据库中获取数据。我想知道哪种技术对于.NET 和Java 来说是最好的。

我不得不说我对 Java 没有太多经验，所以我需要一点帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:58:26.327

您基本上想创建一个封装数据库的服务器。该服务器应该使用不同的编程语言。
您的目标应该是使用一种易于在这些不同语言中使用的技术。
这里想到了一个 Web 服务——使用 SOAP 或 RESTful。

# php - 如何在融合图表上将图表导出为图像？

> ID：13603169
> 
> 赞同：0
> 
> 时间：2012-11-28T10:43:04.807
> 
> 标签：php, fusioncharts

我正在尝试将我的图表转换为 jpg。我正在选择另存为 jpeg、png、pdf。但问题是在选择选项（如 jpeg 等）后，我得到一个新窗口“http://localhost/Dashboard9/FusionCharts/FCExporter.php”

DOMId=height=0width=0fileName=statusMessage= 未找到导出资源.statusCode=0

我已将 FCExporter.php 放在 "http://localhost/Dashboard9/FusionCharts" 。执行此操作时，我的互联网连接已打开。

使用类似的代码

```
<graph caption='Average Score' subcaption='$myCaption' divlinecolor='F47E10' numdivlines='3' showAreaBorder='1' areaBorderColor='000000' numberPrefix='' showNames='1' numVDivLines='29' vDivLineAlpha='30' yAxisName='Average Score' formatNumberScale='1' rotateNames='1' decimals='1' decimalPrecision='1' exportEnabled='1' 
exportHandler='http://localhost/Dashboard9/FusionCharts/FCExporter.php' exportAtClient='0' exportAction='download' exportTargetWindow='_blank' exportFileName='MyFileName'> 
```

FCExporter.php 上没有任何改变是什么问题，我没有得到。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:38:44.707

可能您错过了复制与`Resource`文件一起存在的`FCExporter.php`文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T08:19:44.277

`SAVE_PATH & HTTP_URI`FCExporter.php 文件中的更改

例子：

```
define ( "SAVE_PATH",  "/opt/lampp/htdocs/dashboard/temp" );
define ( "HTTP_URI", "http://dasboard.co.id/temp/" ); 
```

# html - 基于当前 url 的 http 或 https 方法？

> ID：13603170
> 
> 赞同：0
> 
> 时间：2012-11-28T10:43:15.587
> 
> 标签：html, http, https

如果他们来到我的网站，我想将用户重定向到 http url，如果他们来到我的网站，`http://` 我想将他们重定向到 https url`https://`

有没有办法提供网址，例如：

```
 ://foo.com/bar 
```

或基于用户进入的相同http方法在页面上创建链接的任何其他方法？

我更喜欢基于没有 javascript 的纯 html 的解决方案

# 更新

感谢您的快速回复。

不幸的是，我忘了提到我重定向到不同的子域，所以我不能省略域名

谢谢！

克菲尔

# asp.net - 在 asp.net mvc 控制器中保存和读取变量到会话的问题

> ID：13603171
> 
> 赞同：2
> 
> 时间：2012-11-28T10:43:18.270
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, session

我想在会话中存储一个简单的变量，以便能够从不同的控制器中获取它的值。

在我的控制器中，我尝试以这种方式保存变量：

```
HttpContext.Session.Add("CurrentPage",index.ToString()) 
```

这样：

```
Session["CurrentPage"] = index.ToString(); 
```

但是当我试图从会话中读取时： `var currPage = Session["CurrentPage"]`我什么也没得到。变量未初始化且未显示在 Locals 调试窗口中。

我究竟做错了什么？

现在我决定使用 cookie 来完成这项任务，但无论如何我对可能的解决方案很感兴趣。可能其他人会遇到同样的问题并会寻找解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:13:08.070

如果您想在控制器中将值从一种方法传递给另一种方法，请试试这个

```
TempData["Data"] = index.ToString(); 
```

并检索数据回用

```
var message = TempData["Data"]; 
```

# selenium - Selenium webdriver C# - Safari 浏览器不工作

> ID：13603172
> 
> 赞同：2
> 
> 时间：2012-11-28T10:43:28.187
> 
> 标签：selenium, safari, selenium-webdriver, safari-extension

我正在研究 Selenium webdriver C# [Windows M/c]。我安装了最新的 safari 浏览器，并将可安装的 selenium webdriver 添加到扩展生成器中，并且也成功安装了它。

但即使在那之后，我也无法将 URL 发送到浏览器。浏览器启动成功，但之后我看不到任何生成的日志。

硒错误消息是：

失败：System.NullReferenceException：对象引用未设置为对象的实例。

请对此有任何意见。

堆栈跟踪如下：

```
at OpenQA.Selenium.Safari.SafariDriverCommandExecutor.Start() in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Safari\SafariDriverCommandExecutor.cs:line 78
   at OpenQA.Selenium.Safari.SafariDriver.StartClient() in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Safari\SafariDriver.cs:line 83
   at OpenQA.Selenium.Remote.RemoteWebDriver..ctor(ICommandExecutor commandExecutor, ICapabilities desiredCapabilities) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebDriver.cs:line 83
   at OpenQA.Selenium.Safari.SafariDriver..ctor() in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Safari\SafariDriver.cs:line 73
   at Zms.Spin.AutomationLib.Common.Selenium.Driver.Browsers.DesktopSafariBrowser.GetWebDriver() in C:\USERNAME\Selenium\Driver\Browsers\DesktopSafariBrowser.cs:line 59
   at BaseWebpageTest.BeginTest() in C:\USERNAE\Test\BaseWebpageTest.cs:line 195
   at DemoTest.TestDemoAccountCreation() in C:\USERPATH\DemoTest.cs:line 35 
```

PS - 不确定我在这个问题中也提供了哪些输入。如果您需要任何具体的，请告诉我

# java - 如何在 ubuntu 上安装和运行 eclipse

> ID：13603173
> 
> 赞同：10
> 
> 时间：2012-11-28T10:43:40.010
> 
> 标签：java, eclipse, ubuntu, installation

我正在尝试在 ubuntu 上安装 eclipse 建模工具。我已经从 eclipse 站点下载了 eclipse 并提取了文件。我可以看到 Eclipse 图标，但我无法运行它。我想我需要先安装它，但我不知道如何安装。我是 unix 世界的新手。

我想我应该首先配置并执行类似的操作`make`，以便安装它；有人可以帮帮我吗？我用谷歌搜索了很多，但我没有找到这个问题的完整答案。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-28T10:54:56.170

我给你 Eclipse 3.7 在 Ubuntu 11.04 上的安装过程。

1)[下载](http://www.eclipse.org/downloads/) Eclipse。我得到了 eclipse-SDK-3.7-linux-gtk-x86_64.tar.gz

2）提取它

```
tar xzf eclipse-SDK-3.7-linux-gtk-x86_64.tar.gz 
```

或者只是懒惰并右键单击>在此处提取

3) 移动到 /opt/ 文件夹

```
 sudo mv eclipse /opt/
 sudo cd /opt/
 sudo chown -R root:root eclipse
 sudo chmod -R +r eclipse 
```

4）在您的路径中创建一个 Eclipse 可执行文件

```
sudo touch /usr/bin/eclipse
sudo chmod 755 /usr/bin/eclipse
sudo nano /usr/bin/eclipse 
```

将其复制到 nano

```
#!/bin/sh
#export MOZILLA_FIVE_HOME="/usr/lib/mozilla/"
export ECLIPSE_HOME="/opt/eclipse"

$ECLIPSE_HOME/eclipse $* 
```

保存文件 (^O = Ctrl+o) 并退出 nano (^X = Ctrl+x)

5) 创建一个 gnome 菜单项

```
sudo nano /usr/share/applications/eclipse.desktop 
```

将其复制到 nano

```
[Desktop Entry]
Encoding=UTF-8
Name=Eclipse
Comment=Eclipse IDE
Exec=eclipse
Icon=/opt/eclipse/icon.xpm
Terminal=false
Type=Application
Categories=GNOME;Application;Development;
StartupNotify=true 
```

保存并退出 nano

6) 首次启动 Eclipse

```
/opt/eclipse/eclipse -clean & 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-22T11:40:26.617

我已经为 Eclipse 编写了一个安装程序：[https ://github.com/bepcyc/eclipse_installer](https://github.com/bepcyc/eclipse_installer)

只需将 eclipse 存档 (.tar.gz) 下载到与脚本相同的目录并运行：

```
./eclipse_installer.sh 
```

它应该适用于任何版本的 Eclipse 和 Linux。

# wpf - MVVM 中的 WPF 绑定检查事件

> ID：13603175
> 
> 赞同：4
> 
> 时间：2012-11-28T10:43:46.850
> 
> 标签：wpf, mvvm

我是 MVVM 模式的新手，我必须在以下视图中拦截选中/未选中的操作

**SendMessageView.xaml**

```
<ListBox.ItemTemplate>
   <DataTemplate>
      <StackPanel>
         <CheckBox Checked="Specialita_Checked" 
                Unchecked="Specialita_Unchecked"
                Content="{Binding Path=Item.Name}"
                IsChecked="{Binding RelativeSource={RelativeSource FindAncestor,
                            AncestorType={x:Type ListBoxItem}}, 
                            Path=IsSelected,Mode=TwoWay}"/>
      </StackPanel>
   </DataTemplate>
</ListBox.ItemTemplate> 
```

**SendMessageView.xaml.cs**

```
private void Specialita_Checked(object sender, System.Windows.RoutedEventArgs e)
{
   var aSendMessageViewModel = (SendMessageViewModel)this.DataContext;
   if (aSendMessageViewModel != null)
   {
      var aCheckBox = (CheckBox)sender;
      aSendMessageViewModel.AddSpecialita(aCheckBox.Content.ToString());
   }
} 
```

一个名为的文件`aSendMessageViewModel.cs`是在 a 中调用的`SendMessageView.xaml.cs`，这是不正确的。帮助我正确使用 MVVM 模式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T11:21:14.697

在您的项目中添加 System.Windows.Interactivity.dll 并在您的 xaml 顶部引用它 (xmlns:i="...")

然后你可以这样做：

```
<ListBox.ItemTemplate>
   <DataTemplate>
      <StackPanel>
         <CheckBox Content="{Binding Path=Item.Name}"
                IsChecked="{Binding RelativeSource={RelativeSource FindAncestor,
                            AncestorType={x:Type ListBoxItem}}, 
                            Path=IsSelected,Mode=TwoWay}">
             <i:Interaction.Triggers>
                <i:EventTrigger EventName="Checked">
                    <i:InvokeCommandAction Command="{Binding DataContext.OnCheckedCommand, ElementName=myCtrl}" />
                </i:EventTrigger>
             </i:Interaction.Triggers>
         </CheckBox>
      </StackPanel>
   </DataTemplate>
</ListBox.ItemTemplate> 
```

并在您的 ViewModel 中使用名为 OnCheckedCommand 的命令来处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:47:45.010

为什么不直接写

```
aSendMessageViewModel.AddSpecialita(aCheckBox.Content.ToString()); 
```

在 ListBoxItem 数据上下文的 IsSelected 设置器中？

**编辑**

当您选中您的复选框时会发生什么，您的 listBox 的 SelectedItem 将发生变化（由于 ListViewItem 上的 IsSelected）。然后你可以在你的 listBox 的 DataContext 的 SlectedItem 的设置器中做一些事情

```
public MyObject SelectedItem 
{
   get { return _selItem; }
   set
   {
      if(_selItem != value)
      {
          if(_selItem != null)
             _selItem.OnUncheck();
          _selItem = value;
          _selItem.OnCheck();
          NotifyPropertyChange("SelectedItem"); 
      }
   }
} 
```

# url - 如何使用Freebase Loader（或其他方式导入）提交主题官网URL？

> ID：13603176
> 
> 赞同：0
> 
> 时间：2012-11-28T10:43:45.673
> 
> 标签：url, freebase

[是否可以使用Freebase Loader](http://data.labs.freebase.com/loader/)提交主题网站的 URL ？

例如，我想上传组织及其网站的 URL：

```
/type/object/name   (what_here?)    /type/object/type   /organization/organization/organization_type
The Forum for Collaborative HIV Research    http://www.hivforum.org/    /organization/organization  /en/aids_service_organization
The Elizabeth Glaser Pediatric AIDS Foundation  http://www.pedaids.org/ /organization/organization  /en/aids_service_organization 
```

带有 URL 的列上应该有什么标识符？或者根本不可能？

如果无法使用 Freebase Loader 加载网站 URL，那么首选的方法是什么？使用 Refine 加载是不可接受的 - 它[需要 8 个用户批准每个三元组](http://wiki.freebase.com/wiki/Refinery)，导致从未导入的数据集。而且我这里的数据集很小，只有 12 个组织。有什么方法可以快速导入包含 URL 的小数据集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:47:10.437

对于 12 个 URL，最简单的做法就是转到 12 个页面并添加它们，假设它们不存在。例如，伊丽莎白格拉泽基金会已经[列出](http://www.freebase.com/view/en/elizabeth_glaser_pediatric_aids_foundation)了一年多的 URL。

# python - 使用加权数据查找更相似的项目

> ID：13603179
> 
> 赞同：2
> 
> 时间：2012-11-28T10:43:48.900
> 
> 标签：python, algorithm, python-3.x

我有很多字典，其中包含我音乐库中每个艺术家的加权标签，我想找到更相似的艺术家（也许也有相似度评级？），给定一个加权标签字典。

例如：

```
tags = {
    'grails': {
        'post-rock': 100,
        'instrumental': 53,
        'experimental': 38,
        'ambient': 30,
        'post rock': 14,
        'psychedelic': 11,
        'Psychedelic Rock': 6,
        'Progressive rock': 6,
        'rock': 4,
        'instrumental rock': 3,
        'atmospheric': 3,
        'american': 3,
        'space rock': 1
    },
    'camel': {
        'Progressive rock': 100,
        'classic rock': 28,
        'art rock': 24,
        'Progressive': 18,
        'rock': 17,
        'symphonic prog': 7,
        'british': 6,
        'Symphonic Rock': 4,
        'Canterbury Scene': 3,
        'prog rock': 3,
        'prog': 3,
        'Psychedelic Rock': 2,
        'space rock': 1
    },
    'mozart': {
        'Classical': 100,
        'mozart': 30,
        'instrumental': 21,
        'composers': 16,
        'opera': 13,
        'piano': 11,
        'Wolfgang Amadeus Mozart': 9,
        'symphonic': 9,
        'orchestral': 8,
        'austrian': 5
    }
    # etc.
}

best_matches({
            'Progressive rock': 100,
            'experimental': 33,
            'classic rock': 26,
            'Progressive': 23,
            'rock': 23,
            'art rock': 12,
            'psychedelic': 5,
            'prog rock': 5,
            'british': 5,
            'prog': 4,
            'Experimental Rock': 3,
            'Avant-Garde': 3,
            'Psychedelic Rock': 3,
            'Jazz Rock': 2
        }, tags)

# should output camel, then grails, then mozart 
```

我听说过一些推荐算法，例如 Slope One，但我想知道是否有更简单的方法可以用 Python 进行这种计算，以及“比较”所有这些字典的最快算法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:50:03.050

如果您将每种音乐类型视为向量空间中的一个维度，您可以尝试[余弦相似度或欧几里得距离。](https://en.wikipedia.org/wiki/Cosine_similarity)余弦相似度特别容易，它只是 L2 归一化点积：

```
def intersect(a, b):
    """Intersection of a and b."""
    return (k for k in a if k in b)

def dot(a, b):
    """Dot product of values in a and b."""
    return sum((a[k] * b[k]) for k in intersect(a, b))

def l2norm(a):
    """L2 norm, aka Euclidean length, of a regarded as a vector."""
    return sqrt(sum(v ** 2 for v in a.itervalues()))

def similarity(a, b):
    """Cosine similarity of a and b."""
    return dot(a, b) / (l2norm(a) * l2norm(b)) 
```

如果你所有的权重/分数都是非负数，这将返回一个介于 0 和 1 之间的数字，其中 1 表示完美匹配。您可以在任何有关信息检索的教科书中阅读有关余弦相似度的更多信息，例如[Manning、Raghavan 和 Schütze](http://nlp.stanford.edu/IR-book/html/htmledition/dot-products-1.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:56:35.860

您应该将每个标签视为向量空间中的一个维度，并应用[余弦相似度](http://en.wikipedia.org/wiki/Cosine_similarity)。

例如：

```
import numpy as np

def cosine_similarity(dict1, dict2):
    sim = float(sum([dict1[k] * dict2[k] for k in intersect(dict1,dict2)]))
    return sim / (norm_values(dict1) * norm_values(dict2))

def norm_values(dict):
    v = np.array(dict.values())
    return np.sqrt(np.sum(np.square(v)))

def intersect(dict1,dict2):
    return list(set(dict1.keys()) & set(dict2.keys()))

tags = {
    'grails': {
        'post-rock': 100,
        'instrumental': 53,
        'experimental': 38,
        'ambient': 30,
        'post rock': 14,
        'psychedelic': 11,
        'Psychedelic Rock': 6,
        'Progressive rock': 6,
        'rock': 4,
        'instrumental rock': 3,
        'atmospheric': 3,
        'american': 3,
        'space rock': 1
    },
    'camel': {
        'Progressive rock': 100,
        'classic rock': 28,
        'art rock': 24,
        'Progressive': 18,
        'rock': 17,
        'symphonic prog': 7,
        'british': 6,
        'Symphonic Rock': 4,
        'Canterbury Scene': 3,
        'prog rock': 3,
        'prog': 3,
        'Psychedelic Rock': 2,
        'space rock': 1
    },
    'mozart': {
        'Classical': 100,
        'mozart': 30,
        'instrumental': 21,
        'composers': 16,
        'opera': 13,
        'piano': 11,
        'Wolfgang Amadeus Mozart': 9,
        'symphonic': 9,
        'orchestral': 8,
        'austrian': 5
    }
}
query = {
    'Progressive rock': 100,
    'experimental': 33,
    'classic rock': 26,
    'Progressive': 23,
    'rock': 23,
    'art rock': 12,
    'psychedelic': 5,
    'prog rock': 5,
    'british': 5,
    'prog': 4,
    'Experimental Rock': 3,
    'Avant-Garde': 3,
    'Psychedelic Rock': 3,
    'Jazz Rock': 2
}

for t in tags:
    print "{}: {}".format(t, cosine_similarity(tags[t], query)) 
```

这会产生：

```
mozart: 0.0
grails: 0.141356488829
camel: 0.944080602442 
```

# pandas - 绘制包含 NaN 的 pandas 数据框

> ID：13603181
> 
> 赞同：25
> 
> 时间：2012-11-28T10:43:54.057
> 
> 标签：pandas, ipython, data-analysis

我有来自三个不同 GPS 接收器的冰速 GPS 数据。数据位于 pandas 数据框中，索引为 julian day（从 2009 年初开始递增）。

这是数据的一个子集（主要数据集是 3487235 行......）：

```
 R2          R7         R8
1235.000000 116.321959  100.805197  96.519977
1235.000116 NaN         100.771133  96.234957
1235.000231 NaN         100.584559  97.249262
1235.000347 118.823610  100.169055  96.777833
1235.000463 NaN         99.753551   96.598350
1235.000579 NaN         99.338048   95.283989
1235.000694 113.995003  98.922544   95.154067 
```

数据框具有以下形式：

```
索引：6071320 个条目，127.67291667 到 1338.51805556
数据列：
R2 3487235 非空值
R7 3875864 非空值
R8 1092430 非空值
数据类型：float64(3)

```

R2 以与 R7 和 R8 不同的速率采样，因此 NaN 系统地出现在该间距。

尝试`df.plot()`绘制整个数据框（或其索引行位置）在绘制 R7 和 R8 方面效果很好，但不绘制 R2。同样，只是做`df.R2.plot()`也行不通。绘制 R2 的唯一方法是做`df.R2.dropna().plot()`，但这也删除了表示无数据周期的 NaN（而不仅仅是比其他接收器更粗略的采样频率）。

有没有其他人遇到过这个？任何关于该问题的想法将不胜感激:)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-28T13:30:27.797

您看不到任何东西的原因是因为默认的绘图样式只是一条线。但是这条线在 NaN 处被中断，因此只会绘制多个连续的值。而后者不会发生在你的情况下。你需要改变绘图的风格，这取决于你想看到什么。

对于初学者，请尝试添加：

```
.plot(marker='o') 
```

这应该使所有数据点显示为圆圈。它很容易变得混乱，因此调整标记大小、边缘颜色等可能很有用。我没有完全适应 Pandas 如何使用 matplotlib，所以如果情节变得更复杂，我经常自己切换到 matplotlib，例如：

```
plt.plot(df.R2.index.to_pydatetime(), df.R2, 'o-') 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-02-10T11:32:06.337

鉴于您想在拥有数据的点之间画一条直线，您可以让 Pandas 通过插值填补空白，然后绘制：

```
.interpolate(method='linear').plot() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-15T15:28:37.623

我发现即使 df 被索引为 DateTime 也会发生相同的问题。确保尊重所有数据点且行之间没有间隙的一种解决方案是分别绘制每个 df 列并删除 NaN。

```
 for col in df.columns:
        plot_data = df[col].dropna()
        ax.plot(plot_data.index.values, plot_data.values, label=col) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-28T14:07:54.567

这是另一种方式：

```
nan_columns = []
nan_values = []

for column in dataset.columns:
    nan_columns.append(column)
    nan_values.append(dataset[column].isnull().sum())

fig, ax = plt.subplots(figsize=(30,10))
plt.bar(nan_columns, nan_values) 
```

# android - 如何在android中使用WHERE子句仅更新一列的Sqlite数据库

> ID：13603182
> 
> 赞同：8
> 
> 时间：2012-11-28T10:43:56.623
> 
> 标签：android, database, sqlite, android-intent

> **可能重复：**
> [Android 中的 SQLite 如何更新特定行](https://stackoverflow.com/questions/9798473/sqlite-in-android-how-to-update-a-specific-row)

是否可以使用 where 语句更新一列的数据库这是我的表结构，我需要使用“id”更新“messagestatus”列。

```
db.execSQL("CREATE TABLE IF NOT EXISTS autosms(id INTEGER PRIMARY KEY AUTOINCREMENT ,phonenumber VARCHAR(15) ,message VARCHAR(5000) , year VARCHAR(10) , month VARCHAR(10) , date VARCHAR(10) , hour VARCHAR(10) , minute VARCHAR(10) , messagestatus VARCHAR(10))"); 
```

我试过这个，但没有成功，有一个警告“没有这样的列发送”

```
public void update(int id)
{
        String s = "Send";
        db= SQLiteDatabase.openDatabase("data/data/com.example.schduled_messages/SMS_Schdule_Sample.db", null, SQLiteDatabase.CREATE_IF_NECESSARY);
        db.execSQL("UPDATE autosms SET messagestatus="+s+" WHERE id="+id+""); 
    } 
```

提前致谢..

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T10:50:31.887

字符串值必须用引号引起来：

```
"UPDATE autosms SET messagestatus='"+s+"' WHERE id="+id+"" 
```

我在这里添加了报价`'"+s+"'`

没有它，你的字符串是如何扩展的：

```
"UPDATE autosms SET messagestatus=Send WHERE id=1234 
```

SQLite 将尝试找到一个名为 Send 的列并将 messagestatus 设置为它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:52:17.340

从[execSQL()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String,%20java.lang.Object%5B%5D%29)方法的文档中：

执行不是 SELECT/INSERT/UPDATE/DELETE 的单个 SQL 语句。

您应该改用[update()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#update%28java.lang.String,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D%29)方法

# android - 如何通过代码模拟点击最近的应用程序？

> ID：13603184
> 
> 赞同：1
> 
> 时间：2012-11-28T10:44:04.363
> 
> 标签：android

当我的应用程序进入后台时，我正在设置通知。

我想模拟点击通知时**在“最近的应用程序”菜单上按下它的行为。**

1.  如果应用程序进入后台并且仍然“活动”，则转到最后一个活动
2.  如果应用程序在后台被杀死，从头开始重新启动它

是否有任何标志可以添加到“进入顶级活动”的意图中，只知道哪个是应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:22:59.997

如这里所说：[如何从通知状态栏打开最后一个活动？](https://stackoverflow.com/questions/9188412/how-to-open-last-activity-from-notification-status-bar)

```
Intent notificationIntent = new Intent(context, MainActivity.class);
notificationIntent.addCategory(Intent.CATEGORY_LAUNCHER);
notificationIntent.setAction(Intent.ACTION_MAIN); 
```

然后`notificationIntent`将其传递给以`pendingIntent`供进一步使用。

提供：`MainActivity`是我们启动应用程序时的第一个活动，在 AndroidManifest.xml 中它必须包含`IntentFilters`of`CATEGORY_LAUNCHER`和`ACTION_MAIN`。

# javascript - 如何在 javascript 代码中访问模型变量

> ID：13603191
> 
> 赞同：1
> 
> 时间：2012-11-28T10:44:46.393
> 
> 标签：javascript, asp.net-mvc

我在 stackoverflow 论坛上发现了同样的问题，但他们决定不帮助我。

我正在使用该代码：

```
<script type="text/javascript">
    var testVar = '<%=Model.testProperty %>'; 
```

然后我将 testVar 粘贴到 alert() 方法中，只看到 '<%=Model.testProperty %>' 作为文本，但我需要访问 Model.testProperty 值。请帮帮我

# java - Java Crazyness - 当等于通过时，包含失败

> ID：13603204
> 
> 赞同：5
> 
> 时间：2012-11-28T10:45:28.087
> 
> 标签：java, set, equals, contains

这是我在java（1.6）中看到的最疯狂的事情：

```
Set<ActionPlan> actionPlans = assessment.getActionPlans();
//getActionPlans() returns a java.util.HashSet<ActionPlan>
ActionPlan actionPlan = actionPlans.iterator().next();
assertTrue(actionPlan1.equals(actionPlan));
assertEquals(actionPlan1.hashCode(), actionPlan.hashCode());
assertTrue(actionPlans.contains(actionPlan1)); 
```

**前两个断言通过，但最后一个失败。**

我不会向您提供有关 ActionPlan 和 Assessment 课程的详细信息，因为这无关紧要。contains 方法在 equals 和 hash 没有的地方失败。

我并不是说 java 坏了或其他什么，我的代码中可能发生了一些有趣的事情。

请注意，我是一位经验丰富的 java 程序员，我知道 dos 并且不知道实现 equals 和 hashCode。因此，如果我的代码中缺少某些内容，那并不是很明显。

有没有人见过如此令人费解的事情？

**编辑**

我对我的代码进行了一些研究，现在我认为问题出在休眠状态。我已经记录了 ActionPlan 对象的 hashCode，在创建之后以及代码的不同部分，直到调用失败的断言。**它没有改变**。

我还检查了由assessment.getActionPlans() 返回的类，它是：

```
org.hibernate.collection.internal.PersistentSet 
```

我很想相信 Set 的这个实现没有正确使用 equals 或 hashcode。

有没有人对此有见识？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T10:49:31.203

有可能的解释

*   您有一个不使用 equals 或 hashCode 的排序集。
*   你有“覆盖” equals(MyClass) 而不是 equals(Object)
*   hashCode 使用的字段已更改。这会使 Set 处于不可用的状态。

测试最后一种可能性的最简单方法是尝试

```
assertTrue(new HashSet(actionPlans).contains(actionPlan1)); 
```

我怀疑这会在你的情况下通过。;)

* * *

Date 有一个缺陷，它是可变的，而 hashCode 使用该可变字段，因此您可以通过对其进行变异来破坏它所在的任何哈希集合。当您更改 compareTo 中使用的字段时，也会出现类似的问题。

```
Set<Date> dates = new HashSet<Date>();
SortedSet<Date> dates2 = new TreeSet<Date>();
Date d1 = new Date(1), d2 = new Date(2), d3 = new Date(3);
dates.add(d1);
dates.add(d2);
dates.add(d3);
dates2.add(d1);
dates2.add(d2);
dates2.add(d3);
d1.setTime(6);
d2.setTime(5);
d3.setTime(4);
System.out.print("The dates contains [");
for (Date date : dates) {
    System.out.print("date " + date.getTime() + " ");
}
System.out.println("]");
System.out.print("The sorted dates2 contains [");
for (Date date : dates2) {
    System.out.print("date " + date.getTime() + " ");
}
System.out.println("]");
for (int i = 1; i <= 6; i++)
    System.out.println("date " + i + " found is " + dates.contains(new Date(i))
            + " and " + dates2.contains(new Date(i))); 
```

印刷

```
The dates contains [date 6 date 5 date 4 ]
The sorted dates2 contains [date 6 date 5 date 4 ]
date 1 found is false and false
date 2 found is false and false
date 3 found is false and false
date 4 found is false and false
date 5 found is false and true
date 6 found is false and false 
```

注意：排序后的集合现在的顺序错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T10:48:56.773

如果您*重载*equals 但不*覆盖* `equals(Object)`，就会发生这种情况。

例如，您可能有：

```
public boolean equals(ActionPlan plan) {
    ...
} 
```

这将被调用：

```
assertTrue(actionPlan1.equals(actionPlan)); 
```

...但*不会*被`contains`. 你需要：

```
@Override public boolean equals(Object object) {
    ...
} 
```

当然，这可能不是正在发生的事情。如果没有看到您的代码，我们无法确定。

> 我不会向您提供有关 ActionPlan 和 Assessment 课程的详细信息，因为这无关紧要。

这个答案与该假设相矛盾......就像彼得的答案一样，其中包含*替代*故障模式。这就是为什么给出一个简短但*完整*的例子总是很重要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-13T18:32:09.727

在我完成了 equals 和 hashCode 并使我的 keyField 最终化后，它仍然不起作用。我又花了一个小时才发现我需要“compareTo”中的这一行：

```
if (other != null && other.equals(this))
            return 0; 
```

# version-control - 如何判断最新的 cvs 版本？

> ID：13603209
> 
> 赞同：1
> 
> 时间：2012-11-28T10:45:41.767
> 
> 标签：version-control, tags, cvs

我想知道我的项目最新的 cvs 标签名称，

“标签”与“版本”是一样的吗？如果是，我怎么知道我的项目中哪个是最新的标签？

我执行以下操作来检查我的项目的最新版本：

```
cvs co -d new_version my_project 
```

那么，上面签出了哪个标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:26:44.240

标签与版本不同，无法确定标签的创建日期，如“[如何获取 CVS 存储库中创建的标签列表？](https://stackoverflow.com/a/6184269/6309) ”中所述。
该答案提供了一个脚本来估计标签的日期。

并且您可以列出所有标签，如“[在 CLI 中列出 CVS 中的模块内的所有标签](https://stackoverflow.com/a/8897045/6309)”中所述。

结合这两者，您应该能够确定最新的标签，与您刚刚签出的标签相比。

# python - 在 Python 中使用循环来命名变量

> ID：13603215
> 
> 赞同：19
> 
> 时间：2012-11-28T10:45:53.123
> 
> 标签：python, variables, for-loop

如何使用循环来命名变量？例如，如果我想有一个变量`double_1 = 2`，`double_2 = 4`一直到`double_12 = 24`，我该怎么写？

我感觉它会是这样的：

```
for x in range(1, 13):
    double_x = x * 2 
    # I want the x in double_x to count up, e.g double_1, double_2, double_3 
```

显然，这不起作用，但是将循环数字实现到变量名中的正确语法是什么？我有一段时间没有编码了，但我记得有一种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-28T10:49:08.753

请改用字典。例如：

```
doubles = dict()

for x in range(1, 13):
    doubles[x] = x * 2 
```

或者，如果您*绝对* **必须**这样做**[，并且只有在您完全理解您在做什么](http://docs.python.org/library/functions.html?highlight=locals#locals)**的情况下，您才能将其分配给`locals()`字典：

```
>>> for x in range(1, 13):
...     locals()['double_{0}'.format(x)] = x * 2
... 
>>> double_3
6 
```

*但是，永远*不应该有这样做的理由-因为您应该*改用字典！*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T10:49:50.553

扩展我的评论：“使用字典。这正是它们被创建的原因”

使用默认字典：

```
>>> from collections import defaultdict
>>> d = defaultdict(int) 
```

使用普通字典：

```
>>> d = {} 
```

其余的部分：

```
>>> for x in range(1, 13):
    d['double_%02d' % x] = x * 2

>>> for key, value in sorted(d.items()):
    print key, value

double_01 2
double_02 4
double_03 6
double_04 8
double_05 10
double_06 12
double_07 14
double_08 16
double_09 18
double_10 20
double_11 22
double_12 24 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-28T11:56:43.413

虽然我怀疑你真的需要做你想做的事，但这里有一种方法：

```
namespace = globals()
for x in range(1, 13):
    namespace['double_%d' % x] = x * 2

print double_1
print double_2
   ...
print double_12 
```

`globals()`返回一个表示当前全局符号表的字典（当前模块的字典）。如您所见，可以向其中添加任意条目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T10:53:47.120

如前所述，您应该使用字典。这是一种创建满足您要求的简单方法。

```
>>> {k:k*2 for k in range(1,13)}
{1: 2, 2: 4, 3: 6, 4: 8, 5: 10, 6: 12, 7: 14, 8: 16, 9: 18, 10: 20, 11: 22, 12: 24} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T10:51:14.110

您可以在 dict 不符合您的要求时使用它。但我希望它可以帮助你。

```
var_dic = {}
for x in range(1, 13):
    var_dic["double_%s"% str(x)] = x * 2
print var_dic 
```

# objective-c - 在 applicationDidBecomeActive 中捕获启动选项

> ID：13603218
> 
> 赞同：0
> 
> 时间：2012-11-28T10:46:01.533
> 
> 标签：objective-c, ios, xcode, ios6, uiapplicationdelegate

我想赶上但在`launchOptions`（当我的应用程序成为焦点时）。例如，我在 Box 中打开一个文档。然后，我选择“打开方式”并选择我的应用程序。然后我的应用程序成为焦点。`didFinishLaunchingWithOptions``applicationDidBecomeActive`

`launchOptions`我该如何恢复`UIApplicationDelegate`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:52:34.063

如果您的应用程序没有运行并且它是通过另一个应用程序打开的，`applicationDidBecomeActive`则调用它并且您可以访问`launchOptions`. 然后应用程序将调用`application:openURL:sourceApplication:annotation:`.

但是，如果您的应用程序在后台并且只是处于活动状态，那么只会`application:openURL:sourceApplication:annotation:`调用它，因此您不会得到任何`launchOptions`. 您应该能够从`application:openURL:sourceApplication:annotation:`.

来自[application:openURL:sourceApplication:annotation:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application%3aopenURL%3asourceApplication%3aannotation%3a "应用程序：openURL：源应用程序：注释：")文档的完整详细信息：

> 如果应用程序由于另一个应用程序请求它打开 URL 资源而启动，则 UIApplication 首先向应用程序发送 application:didFinishLaunchingWithOptions: 消息，然后调用此方法。此方法为处理应用程序的委托提供源应用程序的捆绑 ID 以及来自该应用程序的任何注释信息。如果应用程序在收到打开 URL 的请求时已经在运行，则调用此方法，但不会调用 application:didFinishLaunchingWithOptions:。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:46:22.020

如果您从外部应用程序打开您的应用程序，您将需要使用[URL 方案](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)。这将打开您的应用程序，无论它是在后台运行还是实际上已终止（这种情况也可能发生）。

使用此技术，`- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation`将在您的 App 委托中调用该方法。

在文档中查找该方法以了解有关可以传递给应用程序的参数的更多信息。通常你会使用一个你可以分析并采取相应行动的网址。但是如果你需要传递更多的数据，你总是可以使用 annotation 参数，这是一个 plist，你可以转换成字典并从中提取任何你想要的东西。

# hibernate - JPA 表策略

> ID：13603220
> 
> 赞同：0
> 
> 时间：2012-11-28T10:46:03.983
> 
> 标签：hibernate, jpa, jpa-2.0, openjpa

在使用 JPA 表生成策略时，我们需要在 @TableGenerator 中提及分配大小。默认值为 50。我们要覆盖默认分配大小。

但是需要在每个实体中提及分配大小。是否有任何其他更好的方法来执行此操作（例如全局配置或将其配置为用于跟踪生成的 Id 的表中的附加列）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:05:51.003

如这些帖子中所述，使用普通 JPA 这似乎是不可能的：

[为所有实体设置默认分配大小？](https://stackoverflow.com/questions/9667638/setting-default-allocation-size-for-all-entities)

[如何在 persistence.xml 而不是 Entity 中配置 allocationSize](https://stackoverflow.com/questions/7927826/how-do-i-configure-allocationsize-within-persistence-xml-instead-of-entity)

看来`EclipseLink`JPA 实现确实为您提供了使用“SessionCustomizer”全局设置此元素的能力

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:42:58.000

我找到了使用休眠@genericgenerator 的解决方法。我们可以通过从表中获取分配大小然后重新配置 idgenerator 来覆盖分配大小

# c++ - 作为对话框打开新窗口（Qt4）

> ID：13603226
> 
> 赞同：2
> 
> 时间：2012-11-28T10:46:31.090
> 
> 标签：c++, qt, qt4

我创建了一个主窗口和新窗口。当按下主窗口上的按钮时，将出现新窗口。没关系。但我需要新窗口作为对话框出现。这意味着打开对话框时，主窗口将在对话框关闭之前不起作用。并且当打开一个对话框时，任务栏中不会出现一个新的 tsb。这个怎么做。

这是我使用的一些代码，

主窗口.h

```
 private:
  Form *myform;

public slots:
 void myformshow(); 
```

主窗口.cpp

```
mainWin::mainWin(QWidget *parent)
{
  setupUi(this);
 connect(pushButton,SIGNAL(clicked()),this,SLOT(myformshow()));
}

  void mainWin::myformshow(){
myform= new Form(); //make sure to delete newform someware.
myform->show();
} 
```

表格.h

```
 class Form : public QWidget, private Ui::Form
{
 Q_OBJECT

public:
 Form(QWidget *parent);

public slots:
void  command();
};

#endif // FORM_H 
```

这里 Form 的意思是，我创建了新窗口`forms.h`，它的类是`Form`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:23:10.997

使第二个窗口继承自 QDialog（不是绝对必要的，但会给您正确的平台特定行为，如居中和各种窗口标志），将主窗口设置为其父窗口，并使用其`exec()`功能运行它。

首先，将您的 Form 类更改为从 QDialog 继承：

```
class Form : public QDialog, private Ui::Form 
```

（如果您在 From 类代码的其他地方引用了 QWidget，也请更改它们。）

然后，在您的 mainWin::myformshow() 函数中，执行以下操作：

```
void mainWin::myformshow()
{
    myform = new Form; //make sure to delete newform someware.
    myform->exec();
} 
```

# c - 在本地函数之外分配内存后，C 会自行释放内存吗？

> ID：13603228
> 
> 赞同：0
> 
> 时间：2012-11-28T10:46:34.460
> 
> 标签：c, http, malloc, free

这是基本 http 服务器的代码片段

```
void sendFile(int socketNumber,char *filePath) {
    char *wwwFolder = "htdocs";
    int newFilePathSize = strlen("htdocs") + strlen(filePath) + 1;
    char *filePathFull = (char*) malloc(newFilePathSize); // allocating memory
    int i;
    for (i = 0; i < strlen(wwwFolder); i++)
        filePathFull[i] = wwwFolder[i];
    int j = 0;
    for ( ;i < newFilePathSize; i++)
    {
        filePathFull[i] = filePath[j++];
    }
    filePathFull[i] = '\0';

    //free(filePath); --
    /*filePath is a pointer with already allocated
    memory from previous function, however, if I try to free it
    in this function the program breaks down with this error:
    *** glibc detected *** ./HTTP: free(): invalid next size (fast): 0x09526008 *** */

    FILE *theFile = fopen(filePathFull,"r");
    printf("|"); printf(filePathFull); printf("| - FILEPATH\n");
    if (theFile == NULL)
    {
        send404(socketNumber);
        return;
    }
    else
        sendLegitFile(socketNumber,theFile,filePathFull);

    free(filePathFull); // freeing memory allocated in this
        //function seems to be okay
} 
```

我想问，C 是否处理自己分配的内存？它在程序运行时被释放吗？还是我无法释放在先前函数中声明的 filePath 内存是我的错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:51:25.450

在 C 中，您只能释放使用（或或）`free`显式获得的内存。并且很挑剔，因为它不需要接收与返回的完全相同的指针值。`malloc``calloc``realloc``free``malloc`

如果内存是通过其他方式获得的（例如堆栈上的数组，或字符串文字，或...），则将指向该内存的指针传递给`free`.

* * *

为避免出现问题，一般建议将内存的分配和释放保持在同一个函数或一对相关函数中，这样您就可以轻松验证传递给的内存`free`是从`malloc`（或其亲属）获得的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T10:49:37.240

c中没有垃圾收集。
如果你使用分配内存，`malloc`你应该使用`free`.

如果你不这样做，内存就会泄漏，直到你的程序结束。之后操作系统回收内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:45:59.917

除了 Als 所说的，在 C 语言中被广泛接受的内存管理约定是，执行该操作的“人”`malloc`是负责`free`. 因为你没有分配`filePath`你不应该`free`它：负责人会做。如果您也这样做，它将导致双重释放（如果调用者`filePath`在您返回后尝试使用，可能还会出现其他问题）。

# android - 如何在android中的canvas上执行撤消和重做操作

> ID：13603230
> 
> 赞同：0
> 
> 时间：2012-11-28T10:46:40.957
> 
> 标签：android

如何在 canvas 上执行 Undo/Redo 操作。而且我的代码很糟糕，我没有执行这两个操作。在主类中，由于这个原因正在执行绘画，我没有执行撤消重做操作。

```
public class MainActivity extends Activity implements OnClickListener{

MyView mView;
private Path mPath;
Button btnUndo,btnRedo;
FrameLayout frmLayout;
private Paint       mPaint;
private MaskFilter  mEmboss;
Bitmap  mBitmap;
int bckcolor=0xffffffff;
final Context context = this;

ArrayList<Path> paths = new ArrayList<Path>();
ArrayList<Path> undonePaths = new ArrayList<Path>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mView = new MyView(this);
    setContentView(R.layout.activity_main);

    btnUndo=(Button)findViewById(R.id.Undo);
    btnRedo=(Button)findViewById(R.id.Redo);

    btnUndo.setOnClickListener(this);
    btnRedo.setOnClickListener(this);

    frmLayout=(FrameLayout)findViewById(R.id.frameLayout);
    frmLayout.addView(mView,LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);  

    mPaint = new Paint();
    mPath=new Path();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(0xFF000000);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(5);
    new Canvas();       
   paths.add(mPath);

    mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 },0.4f, 6, 3.5f);
    new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    switch (v.getId()) {

   case R.id.Undo:

       if (paths.size()>0) 
        { 
           undonePaths.add(paths.remove(paths.size()-1));
           mView.invalidate();
           Toast.makeText(getApplicationContext(), "Undo", 1000).show();
         }
        mView.undo();
        break;
   case R.id.Redo:
        mView.redo();
        break;

    default:
        break;
    }
}

public class MyView extends View {

        private float posX = 105;  
        private float posY = 105;  
        Mode mode;
        private Bitmap  mBitmap;
        private Canvas  mCanvas;
        private Path    mPath;
        private Paint   mBitmapPaint;
        ArrayList<Path> paths = new ArrayList<Path>();
        ArrayList<Path> undonePaths = new ArrayList<Path>();
        BlurMaskFilter blurMaskFilter = new BlurMaskFilter(10, BlurMaskFilter.Blur.OUTER);
        int screenWidth;
        int screenHeight;

    /**
     */
    public MyView(Context c) 
    {
        super(c);
        mBitmap=BitmapFactory.decodeResource(getResources(), R.drawable.e);
        mBitmap = Bitmap.createBitmap(800, 800, Bitmap.Config.ARGB_8888);            
        mCanvas = new Canvas(mBitmap);
        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        mCanvas.drawColor(0xFFFFFFFF);
        paths.add(mPath);           
    }       

    public void redo() {
        // TODO Auto-generated method stub
        if (undonePaths.size()>0) 
        { 
            paths.add(undonePaths.remove(undonePaths.size()-1)); 
            invalidate();
        } 
        else 
        {

        }

    }

    public void undo() {
        // TODO Auto-generated method stub

        Toast.makeText(getApplicationContext(), "Hello", 1000).show();
        if (paths.size()>0) 
        { 
           undonePaths.add(paths.remove(paths.size()-1));
           mView.invalidate();
           Toast.makeText(getApplicationContext(), "Undo", 1000).show();
         }
        else
        {
            Toast.makeText(getApplicationContext(), "Not", 1000).show();
        }
    }

    @Override protected void onSizeChanged(int w, int h, int oldw, int oldh) 
    {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    /**
     */
    @Override protected void onDraw(Canvas canvas) 
    {           
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);     
        for(Path p:paths)
        {
        canvas.drawPath(p, mPaint);
        } 

    }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

        private void touch_start(float x, float y) {
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }

        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);                
                mX = x;
                mY = y;
            }
        }

        private void touch_up() {
            mPath.lineTo(mX, mY);
            mCanvas.drawPath(mPath, mPaint);
            paths.add(mPath);
            mPath.reset();        
        }

    @Override public boolean onTouchEvent(MotionEvent event) {
            float x = event.getX();
            float y = event.getY();

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    touch_start(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_MOVE:
                    touch_move(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_UP:
                    touch_up();
                    invalidate();
                    break;
            }
            return true;
        }

    public void drawImage (int resourceId)
    {
        Bitmap _scratch = BitmapFactory.decodeResource(getResources(), resourceId);

        mCanvas.drawBitmap(_scratch, 0, 0, null);
    } 

} 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:54:23.937

像这样更改您的代码....

```
public MyView(Context context, Object object) 
{
super(context);
setFocusable(true);
setFocusableInTouchMode(true);

mPaint = new Paint();
mPaint.setAntiAlias(true);
mPaint.setColor(0xFFFFFF00);
mPaint.setStyle(Paint.Style.STROKE);
mPaint.setStrokeJoin(Paint.Join.ROUND);
mPaint.setStrokeCap(Paint.Cap.ROUND);
mPaint.setStrokeWidth(3);
mCanvas = new Canvas();
mPath = new Path();

mBitmap = Bitmap.createBitmap(320, 480, Bitmap.Config.ARGB_8888);
mCanvas = new Canvas(mBitmap);
selectedcolor=context.getResources().getColor(com.example.videoapp.R.color.red);
}

protected void onDraw(Canvas canvas) 
{
canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
for (Path p : paths)
{
mPaint.setColor(colorsMap.get(p));
canvas.drawPath(p, mPaint);
}

        mPaint.setColor(selectedcolor);
        canvas.drawPath(mPath, mPaint);
 } 
```

在ontouch事件中..

ACTION_DOWN：

```
undonePaths.clear();
mPath.reset();
mPath.moveTo(x, y);
mX = x;
mY = y;
    invalidate(); 
```

ACTION_MOVE：

```
float dx = Math.abs(x - mX);
float dy = Math.abs(y - mY);
if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE)
    {
mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
    mX = x;
mY = y;
}
    invalidate(); 
```

ACTION_UP：

```
mPath.lineTo(mX, mY);
paths.add(mPath);
    colorsMap.put(mPath,selectedcolor);
    mPath = new Path();
    mPath.reset();
invalidate(); 
```

不要把这个 paths.add(mPath) 放在上下文中并且 oncreate 也......

```
 public MyView(Context context, Object object) 
    {
     super(context);
    //  paths.add(mPath);   // Dont put this line...
     } 
```

撤消和重做......

```
 undo.setOnClickListener(new View.OnClickListener() 
    {
public void onClick(View v) 
    {
if(MyView.paths.size()> 0) 
    {
 MyView.undonePaths.add(MyView.paths.remove(MyView.paths.size() - 1));
      mview.invalidate();
}
}
    });

    redo.setOnClickListener(new View.OnClickListener() 
    {
public void onClick(View v) 
    {
  if (MyView.undonePaths.size()>0) 
    { 
       MyView.paths.add(MyView.undonePaths.remove(MyView.undonePaths.size()-1));
       mview.invalidate();
    }
}
}); 
```

我希望这段代码对你真的很有用.. 一切顺利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:10:01.423

我尝试了这段代码，它工作得很好......

```
Here is my code...

// declare the variable colorsMap.     

private Map<Path, Integer> colorsMap = new HashMap<Path, Integer>();  

//declare the integer variable selectedcolor

public static int selectedcolor;

 // set the color for integer varible like this code below.....

 public MyView(Context context, Object object) 
 {
  super(context);
  mBitmap = Bitmap.createBitmap(320, 480, Bitmap.Config.ARGB_8888);
  mCanvas = new Canvas(mBitmap);
  selectedcolor1=context.getResources().getColor(com.example.videoapp.R.color.red);
 } 

// In ONtouchevent

case MotionEvent.ACTION_UP:
paths.add(mPath);
colorsMap.put(mPath,selectedColor); // store the color of mPath

// Before drawing a path, you need to set the paint color:

protected void onDraw(Canvas canvas) {
canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
for (Path p : paths)
{
    mPaint.setColor(colorsMap.get(p));
    canvas.drawPath(p, mPaint);
}
mPaint.setColor(selectedColor);
canvas.drawPath(mPath, mPaint);
} 
```

我希望它对你非常有用和有帮助。如果你想要三色意味着声明三个整数变量并在 ondraw() 中设置它。

享受朋友......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T01:51:57.187

@Android 帮助：我在我的代码中解决了这个问题。问题在于，由于在 onTouch 案例中添加了路径，但颜色选择变得混乱，因此将颜色与类中的整数相关联，然后在您引用的任何地方使用该类进行颜色更改。如果您有任何疑问，请告诉我。如果您对已解决的问题不清楚，我可以在这里发布我的代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T11:33:35.673

不要放

```
 paths.add(mPath); 
```

在 oncreate 和 context 中，放

```
 paths.add(mPath); 
```

在鼠标上。

# jquery-mobile - jQuery Mobile 提交表单将我返回到主页而不是下一页

> ID：13603234
> 
> 赞同：0
> 
> 时间：2012-11-28T10:47:07.757
> 
> 标签：jquery-mobile

我正在 jQuery mobile 中构建一个小应用程序。

提交表单时从一个页面转到另一个页面时遇到问题。

所以我的第一页看起来像这样

```
<div data-role="page" data-theme="a"  id="page1">

<div data-role="header" data-theme="a">
        <h1>Contact Us</h1>
        <a  data-icon="back"
            data-iconpos="notext"
            data-rel="back"
            data-transition="slidefade"
            >Info</a>
        <a href="#home"
            data-icon="home"
            data-iconpos="notext"
            data-transition="slidefade"
            >Home</a>

    </div>

 <div class="pageContainer">     
    <section id="links">

    <form name="page1" method="post" action="#page2" id="form">

    <div  class="panel colourPanel">

        <div class="searchMethod buttonColour even">

            <input name="hidBranch" type="hidden" id="hidBranch" value="0" />
            <div class="searchText textShadow">Branch</div>
            <div class="searchImg">&nbsp;</div>

        </div>

        <div class="searchMethod buttonColour odd">

           <input name="hidATM" type="hidden" id="hidATM" value="0" />
            <div class="searchText textShadow">ATM</div>
            <div class="searchImg">&nbsp;</div>

        </div>

        <div class="searchInput">
            <input id="searchArea"  type="text" value="Search address">
        </div>

        <div id="searchContainer">
            <input type="submit" name="btnSearch" id="btnSearch2" alt="Find" value="Search" />

        </div>

    </div>

    </form>

      </section>

</div> 
```

所以我希望这会转到第 2 页，但它会返回到根页面？

为什么会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:42:05.273

您的内容必须包含在此 div 中：

```
<div data-role="content" data-theme="a" id="someid"></div> 
```

如果你想要 jQM 页面中的内容，你需要有一个 data-role="content" 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T23:25:35.887

我不知道您是否仍在研究此问题或已解决此问题，但我想我会为其他有此问题的人发布解决方案。

jQM 默认在表单提交后将您的应用程序返回到“第一页”。您可以使用以下内容（取自[文档](http://jquerymobile.com/demos/1.1.1/docs/pages/page-dynamic.html)）来更改默认值。jQM 在处理表单和导航时正在侦听对`pagebeforechange`事件的调用，以更新默认值。

```
// Listen for any attempts to call changePage().
$(document).bind( "pagebeforechange", function( e, data ) {

    // We only want to handle changePage() calls where the caller is
    // asking us to load a page by URL.
    if ( typeof data.toPage === "string" ) {

        // We are being asked to load a page by URL, but we only
        // want to handle URLs that request the data for a specific
        // category.
        var u = $.mobile.path.parseUrl( data.toPage ),
            re = /^#category-item/;

        if ( u.hash.search(re) !== -1 ) {

            // We're being asked to display the items for a specific category.
            // Call our internal method that builds the content for the category
            // on the fly based on our in-memory category data structure.
            showCategory( u, data.options );

            // Make sure to tell changePage() we've handled this call so it doesn't
            // have to do anything.
            e.preventDefault();
        }
    }
}); 
```

# c++ - C++中的前向声明

> ID：13603236
> 
> 赞同：1
> 
> 时间：2012-11-28T10:47:19.223
> 
> 标签：c++, dynamic-linking, forward-declaration

我的程序包括两个主要部分。第一个是DLL中的c++类定义，另一个是核心程序。每个DLL加载到核心程序上后，Proxy类会将类描述填充到核心程序中的数据结构中，使用关键字“extern”解决

我遇到了带有错误消息的声明顺序问题。在代码行中：“typedef map method_map;” 1\. 错误：'proxy' 未在此范围内声明 2\. 错误：模板参数 2 在代码行中无效：

```
typedef common_object *maker_t();
extern map< string, maker_t* > factory;

//This method_map is used to store all the method structure data of each class
//method: class_name, method_name, function pointer
//I got two errors here:
//1\. "ERROR: ‘proxy’ was not declared in this scope"
//2\. "ERROR: ‘error: template argument 2 is invalid"
typedef map<string, proxy::method> method_map;
//this class_map contain the methods description for each class.
//this class_map is declared in the core program.
//after the class in this dll is loaded on the core program,
//it would automatically fill its descriptino in here
extern  map<string, method_map> class_map_;

// our global factory
template<typename T>
class proxy {
public:
typedef int (T::*mfp)(lua_State *L);
typedef struct {
    const char *class_name;
    const char *method_name;
    mfp mfunc;
} method;

proxy() {
    std::cout << "circle proxy" << endl;
    // the loop for filling the methods information of the class T
    method_map method_map_;
    for (method *m = T::methods;m->method_name; m++) {
        method m1; //specific information about each method
        m1.class_name = T::className;
        m1.method_name = m->method_name;
        m1.mfunc = m->mfunc;
        method_map_[m1.method_name] = m1; //assign m1 into the method map
    }
    //Assign methods description of the T class into the class_map
    class_map_[T::class_name] = method_map_;
}
}; 
```

我希望看到你对这个问题的建议。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:56:17.187

`method_map`并且`class_map_`需要嵌套在内部`proxy`（或其他模板），因为它们依赖于另一个嵌套类型 ( `method`)，而后者又取决于模板参数。

如果他们没有（例如，如果`proxy`是一个类而不是模板），那么他们需要在之后声明`proxy`才能使用在那里声明的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:57:22.333

前向定义/声明`class proxy;`之前`typedef map<string, proxy::method> method_map;`

像这样：

```
 template<class T>
    class proxy;
    typedef map<string, proxy::method> method_map; 
```

# android - Android - tabhost 和对齐 imageview 和 textview 的问题

> ID：13603239
> 
> 赞同：0
> 
> 时间：2012-11-28T10:47:41.053
> 
> 标签：android, android-activity, imageview, android-tabhost

我正在尝试创建一个选项卡主机，如所附屏幕截图所示，但图标图像和文本对齐存在问题 - 图像需要在文本上方对齐，但所有尝试均失败；

[如果无法在此处查看链接，请 PM For Image](https://www.dropbox.com/sh/01p5v9mjy3l6t49/gtryTHS-fC)

我已经包含了一些示例代码，但我无法强制文本的图像顶部对齐 - 只有当我将 tab_indicator 文件中的 layout_height 增加到大于 66dip 但我在空间和提供的图像方面受到限制时，它才有效。如果您看不到图像/链接，则图像不会强制位于文本上方，因此图像的一部分位于文本后面！

tab_indicator.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="88.0dip"
    android:layout_height="66.0dip"
    android:layout_weight="1.0">

    <include layout="@layout/tab_indicator_portrait" />

</FrameLayout> 
```

tabindicator_protrait.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tab_indicator_portrait"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingBottom="3.0dip"
    android:paddingTop="3.0dip" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top|center"
        android:layout_marginTop="3.0dip" />

    <TextView
        android:id="@+id/title"
        style="?android:attr/tabWidgetStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center"
        android:textColor="@color/tab_indicator_text"
        android:textSize="12.0dip" />

</FrameLayout> 
```

tab_host.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/topLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="0.0dip" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="0.0dip"
            android:layout_weight="1.0" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="0dip"
            android:padding="0dip" />
    </LinearLayout>

</TabHost> 
```

我有这样的设置有几个原因；

*   tab_indicator.xml 文件还可以包含一个景观文件，如果我需要以不同的方式处理景观，即基于市场反馈/测试的进一步发布
*   允许应用程序具有通用的外观和感觉，因为我只希望在用户在选项卡之间移动时更改图标 - 在 4.0.4 中与 tabhost 存在问题，这似乎是一种更简洁的处理方式。

我在 TabActivity 中尝试了一些代码来处理基于屏幕大小的布局大小；

```
private void detectScreen()
{
    Display localDisplay = getWindowManager().getDefaultDisplay();

    if (localDisplay.getWidth() < localDisplay.getHeight())
    {
        int dips = 45;
        TabHost localTabHost = getTabHost();
        DisplayMetrics localDisplayMetrics = getResources().getDisplayMetrics();

        for (int i = 0; i < localTabHost.getTabWidget().getTabCount(); i++)
        {
            View localView = localTabHost.getTabWidget().getChildTabViewAt(i);
            localView.getLayoutParams().height = ImageUtils.convertDIPToPixels(localDisplayMetrics, (float)dips);
        }
    }
} 
```

但同样，更改布局的大小确实会使图像变小但与文本不对齐。

清单文件还包含以下内容；

```
<supports-screens android:anyDensity="true" android:largeScreens="true" android:normalScreens="true" android:smallScreens="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:43:52.367

更改指标的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="120dip"
    android:layout_height="64dip"
    android:layout_weight="1"
    android:orientation="vertical"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="30dip"
        android:layout_height="30dip"
        android:layout_centerHorizontal="true"
        android:contentDescription="@string/cntDesc" />

    <TextView
        android:id="@+id/title"
        style="?android:attr/tabWidgetStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

这对我来说很有效

# php - 推特分享，附上图片

> ID：13603241
> 
> 赞同：2
> 
> 时间：2012-11-28T10:47:43.250
> 
> 标签：php, image, twitter, share

我需要在 twitter 上分享一个页面，并附上像 facebook 这样的图片。

```
<a target="_blank" href="http://twitter.com/share?url=http://www.example.com" title="Click to share this post on Twitter">share on twitter</a> 
```

这是 twitter 关于推文按钮的说法 [https://dev.twitter.com/docs/tweet-button](https://dev.twitter.com/docs/tweet-button)

我怎样才能做到这一点。有那个参数吗？哦？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-02T09:12:49.800

甚至 twitter API 文档上的代码和示例也很简单，但要找出正确的 Twitter API 代码来处理推文图像并不容易。

要创建 twitter 应用程序，您需要从以下位置进行操作：[https ://dev.twitter.com/](https://dev.twitter.com/)

在 twitter 开发站点中，您必须指定应用程序的名称和解密以及主页面和回调页面的 URL（稍后将在这两个页面上详细介绍）。此外，您必须确保将您的 Twitter 应用程序访问权限设置为“读写”，以便授权它代表用户发布图片。

正确创建应用程序后，twitter 会为您提供“Consumer key”和“Consumer secret”，您需要保留这两个字符串变量，因为在与 twitter API 通信以推文图像时需要它们来识别您的应用程序。下载 twitter 代码库下载所需的 PHP 库

对于 twitter 身份验证和将图像上传到 twitter，您需要 tmhOAuth.php 和 tmhUtilities.php，您可以从[https://github.com/opauth/twitter/tree/master/Vendor/tmhOAuth](https://github.com/opauth/twitter/tree/master/Vendor/tmhOAuth)下载它们 Tweet 图片代码是如何工作的？

推文图像的代码分为两个文件，第一个是代码开始的“start.php”，第二个文件是“callback.php”，在授权我们的应用程序后，twitter 会将用户重定向回来。（我们的 callback.php 文件的 URL 已在上述步骤中的 App 设置中更新）代码是如何工作的

i）在“start.php”中，我们要做的第一件事是使用我们在创建应用程序时获取的密钥和秘密从 twitter API 请求临时访问令牌（此过程调用获取请求令牌）。

> ```
> $tmhOAuth = new tmhOAuth(array(
>  'consumer_key' => API_KEY,
>  'consumer_secret' => API_SEC, 
>  'curl_ssl_verifypeer' => false
>  ));
>  $tmhOAuth->request('POST', $tmhOAuth->url('oauth/request_token', ''));
>  $response = $tmhOAuth->extract_params($tmhOAuth->response["response"]); 
> ```

ii)。在我们获得临时访问令牌后，我们需要将它们保存在 cookie 中以供用户验证我们的应用程序并重定向回之后使用

“回调.php”</p>

```
$temp_token = $response['oauth_token']; 
$temp_secret = $response['oauth_token_secret']; 
$time = $_SERVER['REQUEST_TIME'];
setcookie("Temp_Token", $temp_token, $time + 3600 * 30, '/twitter_test/');
setcookie("Temp_Secret", $temp_secret, $time + 3600 * 30, '/twitter_test/'); setcookie("Tweet_Txt", $txt, $time + 3600 * 30, '/twitter_test/');
setcookie("Img_Url", $img, $time + 3600 * 30, '/twitter_test/'); 
```

三）。要求用户授权我们的应用程序需要重定向到 Twitter API 页面，用户将在其中填写他的用户名和密码并完成授权过程。

> ```
> $url = $tmhOAuth->url("oauth/authorize", "") . '?oauth_token=' . $temp_token;
> header("Location:".$ url);
> exit(); 
> ```

iv)。当我们的应用获得授权后，Twitter API 会将用户重定向到应用设置中指定的“callback.php” URL。

五）。在“callback.php”文件中存在推文图像的实际代码。首先，我们从 cookie 中检索临时访问令牌，并用正确的访问令牌交换它们。

> ```
>  $token = $_COOKIE['Temp_Token'];
>      $secret = $_COOKIE['Temp_Secret'];
>      $img = $_COOKIE['Img_Url'];
>      $txt = $_COOKIE['Tweet_Txt'];
>      $tmhOAuth = new tmhOAuth(array(
>     'consumer_key' => API_KEY,
>     'consumer_secret' => API_SEC,
>      'user_token' => $token,
>      'user_secret' => $secret, 
>     'curl_ssl_verifypeer' => false
>      ));
>      $tmhOAuth->request("POST", $tmhOAuth->url("oauth/access_token", ""), array( 
>       // pass the oauth_verifier received from Twitter 
> 
>    'oauth_verifier' => $_GET["oauth_verifier"] 
>      )); 
>      $response = $tmhOAuth->extract_params($tmhOAuth->response["response"]);
>      $tmhOAuth->config["user_token"] = $response['oauth_token']; 
>    $tmhOAuth->config["user_secret"] = $response['oauth_token_secret']; 
> ```

六）。在我们获得正确的访问令牌后，我们在推特上发布我们想要的图像。

> ```
> $img = './'.$img;
> $code = $tmhOAuth->request('POST', 'https://api.twitter.com/1.1/statuses/update_with_media.json',
>  array(
>  'media[]' => "@{$img}",
>  'status' => "$txt" 
>  ),
>  true, // use auth
>  true // multipart
>  ); 
> ```

七）。twitter API 返回的代码将告诉我们操作是否正确完成。

```
 if ($code == 200){
      echo '<h1>Your image tweet has been sent successfully</h1>';
      }else{
      tmhUtilities::pr($tmhOAuth->response['response']);
     } 
```

# wpf - IDataErrorInfo : 如何知道所有属性是否有效？

> ID：13603243
> 
> 赞同：7
> 
> 时间：2012-11-28T10:47:56.697
> 
> 标签：wpf, idataerrorinfo, validation

我有一个`WPF`应用程序（`.Net 3.5`），它使用`IDataErrorInfo`ViewModel 上的 来验证输入。

效果很好，用户控件获得了正确的 UI 反馈。

问题是用户仍然可以更改所选元素，或保存此元素。

所以我的问题是：我怎么知道我所有的属性都是有效的？或者至少我所有显示的值都是有效的。`IsActive`目标是在这个结果上绑定一些

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T14:43:49.740

从您对您的实施的评论将您的实施`IDataErrorInfo`更改为这种风格......

```
#region IDataErrorInfo Members

public string Error
{
    get { return this[null] }
}

public string this[string columnName]
{
    get
    {
        StringBuilder result = new StringBuilder();
        if (string.IsNullOrEmpty(columnName) || columnName == "FirstName")
        {
            if (string.IsNullOrEmpty(FirstName))
                result.Append("Please enter a First Name\n");
        }
        if (string.IsNullOrEmpty(columnName) || columnName == "LastName")
        {
            if (string.IsNullOrEmpty(LastName))
                result.Append("Please enter a Last Name\n");
        }
       if (string.IsNullOrEmpty(columnName) || columnName == "Age")
        {
            if (Age < = 0 || Age >= 99)
                result.Append("Please enter a valid age\n");
        }
        return (result.Length==0) ? null : result.Remove(result.Length-1,1).ToString();
    }
}

#endregion

public bool IsValid {
   get { return string.IsNullOrEmpty(this.Error); }
} 
```

然后在您的财产更改事件中

```
if (e.PropertyName == "Error") {
   OnPropertyChanged(this,new PropertyChangedEventArgs("IsValid"));
}
if (e.PropertyName != "Error" && e.PropertyName != "IsValid") {
   OnPropertyChanged(this,new PropertyChangedEventArgs("Error"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:24:25.787

现在，我在我的模型上添加了这个方法。

```
 public Boolean IsModelValid()
    {
        Boolean isValid = true;
        PropertyInfo[] properties = GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance);

        foreach (PropertyInfo p in properties)
        {
            if (!p.CanWrite || !p.CanRead)
            {
                continue;
            }
            if (this[p.Name] != null)
            {
                isValid = false;
            }
        }
        return isValid;
    } 
```

我将对象本身绑定在 PropertyChanged 事件上，

```
 public MyClassName()
    {
        PropertyChanged += CheckModelValidity;
        CheckModelValidity(null, null);
    } 
```

当它改变时，我调用这个方法，如果结果与我的实际公共成员不同，我更新它：

```
 private void CheckModelValidity(object sender, PropertyChangedEventArgs e)
    {
        bool isModelValid = IsModelValid();
        if(isModelValid!= IsValid)
        {
            IsValid = isModelValid;
        }
    } 
```

然后我可以绑定 IsValid 属性。

不知道有没有更好的解决办法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-23T18:58:57.363

感谢 Bob Vale 的创意！我注意到我有几个模型并且代码非常重复。我创建了这个基类：

```
using System;
using System.ComponentModel;
using System.ComponentModel.DataAnnotations.Schema;
using System.Text;

namespace Core.Models
{
    public abstract class ValidatableObject : IDataErrorInfo
    {
        public virtual bool IsValid() => this[null] == null;

        [NotMapped]
        public string? Error => this[null];

        [NotMapped]
        protected abstract (string, Func<string?>)[] Checks { get; }

        public virtual string? this[string? name] => validate(name, Checks);

        private static string? validate(string? name, params (string, Func<string?>)[] checks)
        {
            StringBuilder results = new();

            foreach ((string val, Func<string?> check) in checks)
            {
                if (String.IsNullOrEmpty(name) || name == val)
                {
                    string? result = check();
                    if (result != null)
                        results.AppendLine(result);
                }
            }

            return results.Length == 0
                ? null
                : results.ToString(0, results.Length - Environment.NewLine.Length);
        }
    }
} 
```

这是用法：

```
 private class Validatable : ValidatableObject
    {
        public string Email { get; set; }
        public string Comment { get; set; }

        protected override (string, Func<string?>)[] Checks => new (string, Func<string?>)[]
        {
            (nameof(Email), () => Validate.Email(Email)),
            (nameof(Comment), () => Validate.LengthOfOptionalString(Comment)),
        };
    } 
```

# iphone - 添加到 self.view 时 UIButton 没有被触摸

> ID：13603244
> 
> 赞同：0
> 
> 时间：2012-11-28T10:47:59.720
> 
> 标签：iphone, ios, uibutton, touch, subview

我有这个工作正常的方案（`-->`=“有子视图”）：

```
ViewController.view --> imageView --> containerView --> UIButton 
```

正如预期的那样，按钮会触发指定的选择器。
但是，如果我执行以下操作（出于多种原因，最好这样做），按钮将**停止接收 touches**。

```
ViewController.view --> imageView
ViewController.view --> containerView --> UIButton
[self.view bringSubviewToFront:_containerView]; 
```

有什么线索吗？

- 更新

响应请求，这里是一些按钮创建代码：

```
// in viewDidLoad

_controlsView = [[[NSBundle mainBundle] loadNibNamed:@"Controls" 
       owner:self options:nil] objectAtIndex:0];
_controlsView.frame = CGRectMake(0, 50, 
      _controlsView.bounds.size.width, _controlsView.bounds.size.height);
[self.view addSubview:_controlsView];
// ...
[_controlsView.superview bringSubviewToFront:_controlsView];

// in viewDidAppear

if (!_demoButton) {
   _demoButton = (UIButton*)[_controlsView viewWithTag:kDemoButtonTag];
   [_demoButton addTarget:self action:@selector(buttonPressed:) 
       forControlEvents:UIControlEventTouchUpInside];
   // configuration, color, font, layer, etc. all works well
} 
```

最后，`Controls.xib`看起来像这样：

![IB中的截图](../Images/d18273b57a5625ab9c4c2e85a3dd8596.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:55:31.400

`Probably`你的观点决定了你的按钮。试试这个

```
[self.view bringSubviewToFront:<UIButton_INSTANCE>]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:56:31.440

当我在容器视图的框架之外设置了一个控件元素时，有时会发生这种情况，这也发生在我身上。我没有对此进行测试，但是由于您有许多嵌套视图，因此它可能发生在第一个实例上，因为图像视图可能大到足以包含 UIButton。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:26:15.660

由于代码不足，无法准确找出发生这种情况的原因。

我想您应该尝试编写一个 UIButton 类别来覆盖`-touchesBegan:withEvent:` `-touchesMoved:withEvent:` `-touchesEnded:withEvent:`一些调试信息输出，例如：

```
{
    [super touchesBegan:touches withEvent:event];
    NSLog(@"Touches began/moved/ended!");
} 
```

当您按下 UIButton 实例并打印调试信息时，这意味着您的 UIButton 实例已接收到触摸事件但未以正确的方式处理它。相反，这意味着响应链中有一个实例阻止了事件传递。

特别是，如果发现只有触摸开始调试信息被打印并且触摸移动调试信息在您的手指移动后不再被打印，您的触摸事件可能被手势识别器阻止。

# .net - 为什么我的 Direct2D 绘图性能如此糟糕？

> ID：13603254
> 
> 赞同：11
> 
> 时间：2012-11-28T10:48:30.140
> 
> 标签：.net, direct2d

我正在 Win7 上开发一个需要执行映射的 Dotnet 4.0 应用程序。作为一个映射应用程序，它输出大量高分辨率抗锯齿多边形。它目前支持两种类型的渲染输出，GDI+ 和 Direct2D。

我很担心，因为 GDI+ 输出比 Direct2D 快 3 倍左右。

两个渲染器都使用 AA。我知道我可以在 Direct2D 中将其关闭，从而在一定程度上提高吞吐量（降低到比 GDI+ 差 2 倍左右）。但这不是一个解决方案，因为我也可以在 GDI+ 中关闭 AA 并在那里获得更好的性能。出于此基准测试的目的，我的渲染代码很简单。我希望我犯了一些可怕的错误，有人可以向我指出这将纠正这种情况。

```
_renderTarget.BeginDraw();

// Paint background.
RectF rf = new RectF(0.0f, 0.0f, renderTargetSize.Width, renderTargetSize.Height);
_renderTarget.FillRectangle(rf, _backgroundBrush);

// Draw polygons
foreach (GisTypes.Polygon polygon in _polygons)
{
    using (PathGeometry path = _factory.CreatePathGeometry())
    {
        using (GeometrySink sink = path.Open())
        {
            sink.SetFillMode(Microsoft.WindowsAPICodePack.DirectX.Direct2D1
                .FillMode.Alternate);

            Point2F[] points = Array.ConvertAll(polygon.Points,
                x => new Point2F((float)x.X, (float)x.Y));

            sink.BeginFigure(points[0], FigureBegin.Filled);

            for (int i = 1; i < points.Length; ++i)
            {
                sink.AddLine(points[i]);
            }

            sink.EndFigure(FigureEnd.Closed);
            sink.Close();
        }

        using (TransformedGeometry transformedPath = _factory.CreateTransformedGeometry(
            path, WorldToPage))
        {
            _renderTarget.FillGeometry(transformedPath, _fillBrush);
            _renderTarget.DrawGeometry(transformedPath, _borderBrush, 1.0f);
        }
    }
}

_renderTarget.EndDraw(); 
```

在此示例代码中，我使用一个路径和每个多边形一个图形。原因是它更接近地反映了 GDI+ 实现和在实际应用程序中，而不是示例代码，它简化了所选多边形的渲染。我知道我可以使用一条路径和多个数字，并且我已经尝试过这种方式，它稍微快一点，但不足以对一般问题产生影响。

我也在使用 TransformedGeometry，而不是在 RenderTarget 上设置变换。这样做的原因是，虽然我想要转换几何形状，但我不想转换轮廓，因为缩放因子会导致它完全消失。

在我使用的特定示例数据中，只有几百个多边形，但每个多边形可以有几千个点，所以我不认为在渲染过程中分配多个 PathGeometry 和 TransformedGeometry 是问题，（因为有不是很多，我已经尝试过只使用一个 PathGeometry 和 TransformedGeometry 并且差异很小）。

我想知道我是否不应该渲染到屏幕外的 RenderTarget 并将结果传送到屏幕上的 RenderTarget，但我已经阅读了有关提高 Direct2D 性能的 MSDN 文章，它没有提到这是一种优化。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T07:28:25.823

我相信你的绘图程序太频繁地创建资源，这真的很耗时。Geometries 和 Sinks 是与[设备无关的资源](http://msdn.microsoft.com/en-us/library/windows/desktop/dd756757%28v=vs.85%29.aspx)，您应该创建并保留它们，只要它们不被修改。这些修改通常发生在您...更改应该绘制的内容时，以及当您移动/调整窗口大小或平移/缩放内容时。然后，您的绘图例程将仅绘制*现有*资源，并且应该更快。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-17T16:36:02.133

既然您问“有什么想法吗？”，这个 Visual Studio 工具可能会有所帮助：:-)

[图形诊断](https://docs.microsoft.com/en-us/visualstudio/debugger/graphics/visual-studio-graphics-diagnostics)：让您捕获帧并以极其详细的方式探索 Direct3D 调用的顺序；*如果*您的渲染目标是 Direct3D（硬件），它可能会帮助您诊断问题。类似于[RenderDoc](https://renderdoc.org/)。

[Visual Studio 性能和诊断中心中的GPU 使用](https://docs.microsoft.com/en-us/visualstudio/profiling/gpu-usage)工具：计时，但与图形诊断相比粒度比较粗。

[并发可视化工具](https://docs.microsoft.com/en-us/visualstudio/profiling/concurrency-visualizer)：计时、调用堆栈、GPU 使用情况，您可以从代码中添加标记/标志。

此外，您可以在 Direct2D 中使用不同的渲染目标（例如，GDI 兼容与硬件）并将其与纯 GDI 进行比较。

# directx - 如何停止对 DirectX 的拦截调用

> ID：13603255
> 
> 赞同：0
> 
> 时间：2012-11-28T10:48:35.070
> 
> 标签：directx, dll-injection

我读过一篇名为*[Intercept Calls to DirectX with a Proxy DLL](http://www.codeguru.com/cpp/g-m/directx/directx8/article.php/c11453/Intercept-Calls-to-DirectX-with-a-Proxy-DLL.htm)*的文章，它使用 DLL Proxy 拦截调用，并且可以获得 DirectX 的覆盖。

我正在编写一些 DirectX 应用程序，不希望其他人通过这种方法更改它。我怎样才能防止这种情况？

我可以通过检查原始 DLL 来做到这一点，以及如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T17:05:32.647

检测它是否是代理的“最简单”方法是确定加载的 d3d9.dll 的路径，计算哈希并将其与存储的哈希进行比较。但这仅在他们让您的应用程序加载 d3d9 代理 dll 的情况下有效，而不是在他们挂钩/注入的情况下有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:39:27.457

只需在您的应用程序工作目录中检测 d3d9.dll（所有 DX dll）文件，如果存在则有人试图代理。这很容易实现。无论如何，你不能让一些东西得到 100% 的保护，所以任何比这更复杂的东西都不值得花时间投资 :)
我设法从所有使用[3D Ripper DX](http://www.deep-shadows.com/hax/3DRipperDX.htm)的游戏中获取数据，他们有数百万的预算 :)

# asp.net - 修改 App_GlobalResources 文件强制应用重启

> ID：13603260
> 
> 赞同：2
> 
> 时间：2012-11-28T10:48:58.347
> 
> 标签：asp.net, .net, asp.net-mvc, application-restart, app-globalresources

正如标题所说，如果我从`App_GlobalResources`文件中更新值，应用程序将重新启动。有什么办法可以预防吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:55:50.367

不，没有办法阻止它。
根据[MSDN](http://msdn.microsoft.com/en-us/library/ms227427.aspx)：

> 当您更改本地或全局默认资源文件时，ASP.NET 会重新编译资源**并重新启动**ASP.NET 应用程序。这可能会影响您网站的整体性能。如果添加附属资源文件，不会导致重新编译资源，但 ASP.NET 应用程序**会重新启动**。

由于资源被视为静态数据，因此对它们的任何更改都会导致 ASP.NET 应用程序重新启动。

更多信息：
[编辑资源文件而不重新编译 ASP.NET 应用程序](https://stackoverflow.com/questions/782899/editing-resource-files-without-recompiling-asp-net-application)
[ASP.NET 网站或 ASP.NET Web 应用程序？](https://stackoverflow.com/questions/398037/asp-net-web-site-or-web-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-11T09:24:12.447

实际上，您可以阻止重新启动，但要更改所有配置文件。我找不到只对`App_GlobalResources` 文件执行此操作的方法。

看到这个答案：

[修改 web.config 时如何防止 ASP.NET 应用程序重新启动？](https://stackoverflow.com/questions/613824/how-to-prevent-an-asp-net-application-restarting-when-the-web-config-is-modified/31470150#31470150)

# ruby - `a = b || 的语法糖 a`, `a = b && a`

> ID：13603264
> 
> 赞同：7
> 
> 时间：2012-11-28T10:49:03.230
> 
> 标签：ruby

对于`a = a || b`, `a = a && b`, 有很好的语法糖`a ||= b`, `a &&= b`. 也经常出现的是：

```
a = b || a
a = b && a 
```

有没有好的语法糖或写这个的简短方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T11:47:25.133

```
a = b || a 
```

可以改写为：

```
a = b if b 
```

可以在不重复`a`或`b`的情况下重写

```
x = b and a = x 
```

如果表达式`a`和`b`都超过 6 个字符，`x = b and a = x`则为最短形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:24:59.370

目前没有这样的捷径。

&&= 和 ||=在 CRuby/MRI AST 中是**NODE_OP_ASGN_AND**和**NODE_OP_ASGN_OR 。**仅当左值为 false 或 nil 时才评估“右值”。

# javascript - 将 json 数据转换为 javascript 数组 - 在多维意义上

> ID：13603265
> 
> 赞同：2
> 
> 时间：2012-11-28T10:49:02.387
> 
> 标签：javascript, json, multidimensional-array

我有一个 json 数组说

```
{
   "People": {
       "Person": [
          {"FirstName": "John", "LastName": "Smith"}
          {"FirstName": "Joe", "LastName": "Bloggs"}
          {"FirstName": "Wendy", "LastName": "Deng"}
        ]
    }
} 
```

我想把它转换成一个`javascript`数组（像这样）

```
var persons = [ ["FirstName", "John", "LastName", "Smith"], ["FirstName", "Joe", "LastName", "Bloggs"], ["FirstName", "Wendy", "LastName": "Deng"] ]; 
```

我该如何做到这一点？希望我的问题有意义，并且我意识到 javascript 数组初始化可能不是正确的放置方式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:01:24.240

jsfiddle 演示：[这里](http://jsfiddle.net/umeshpatil86/qLypg/)

```
var src={
   "People": {
       "Person": [
          {"FirstName": "John", "LastName": "Smith"},
          {"FirstName": "Joe", "LastName": "Bloggs"},
          {"FirstName": "Wendy", "LastName": "Deng"}
        ]
    }
};

var persons=[];
var obj=src["People"]["Person"];
for(i in obj){
  var temp=[];
  temp.push("FirstName");
  temp.push(obj[i].FirstName);
  temp.push("LastName");
  temp.push(obj[i].LastName);
  persons.push(temp);
  }

// persons contain your requried array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:11:30.667

你试图做的事情没有多大意义。将现有的有效 JSON 对象转换为您指定的数组格式是毫无意义的，并且会使访问元素变得困难。

听起来你真正想做的是：

```
var data = JSON.parse(jsonString); // Your JSON, parsed into a JS object.
var persons = []
data.people.person.foEach( function(el) {
  person.push(el.FirstName + " " + el.LastName);
} 
```

现在`persons`看起来像这样：

```
["John Smith", "Joe Bloggs", "Wendy Deng"] 
```

你确定你知道 JSON 和 JavaScript 对象是如何工作的吗？

```
var myJSON = '{ "foo": { "bar": { "baz" : [1,2,3] } } }' // JSON, String type.
var myObj = JSON.parse(myJSON); // Now a JS Object type.
var innerArray = myObj.foo.bar.baz; 
```

现在变量的值`innerArray`是`[1,2,3]`一个`Array`类型。

```
console.log(innerArray[0]); // Log the first element.

> 1 // First element is 1 
```

# c# - 在字符串 C# 中查找模式

> ID：13603277
> 
> 赞同：-2
> 
> 时间：2012-11-28T10:49:45.940
> 
> 标签：c#, regex, string

嗨，我有以下字符串模式：

`*A`

`*BA*`

`AB`

`*GN*BN`

我需要在我的输入字符串中找到这样的模式。如果匹配，我需要相应地替换这些值。

我怎么能用正则表达式呢？我上面显示的模式来自 XML 文件。所以它是动态的。 `*`这里的意思是通配符。所以，

`*A`表示以 . 结尾的字符串`A`。

`*BA*`表示介于两者之间的字符串`BA`。

`AB`表示确切的`AB`字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:10:52.880

看起来您得到的模式已经非常接近正则表达式，只是`.`在前面缺少一个`*`表示可以重复的是“任何东西”（正则[表达式中的重复](http://www.regular-expressions.info/repeat.html)）。

```
static bool PerformMatch(string rawPattern, string value)
{
    var adjustedPattern = rawPattern.Replace("*", ".*");
    var regex = new Regex(adjustedPattern);
    var match = regex.Match(value);
    return match.Success && match.Length == value.Length;
}

static void Main()
{
    Console.WriteLine(PerformMatch("*BA*", "Oh?"));  //false
    Console.WriteLine(PerformMatch("*BA*", "BAH!")); //true
    Console.ReadLine();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:13:11.480

以下功能应符合您的标准。

```
public bool CustomMatch(string input, string pattern)
{
    pattern = "^" + Regex.Escape(pattern).Replace(@"\*", ".*") + "$";
    return Regex.IsMatch(input, pattern);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:09:47.053

您的`*`通配符是表示单个字符还是可以是多个字符？假设单个字符。还假设“通配符”`[A-Z]`仅

```
^(AB|^[A-Z]A|^[A-Z]BA[A-Z]|^[A-Z]GN[A-Z]BN) 
```

# c++ - “int main(){(([](){})());}”如何有效的 C++？

> ID：13603286
> 
> 赞同：283
> 
> 时间：2012-11-28T10:50:15.457
> 
> 标签：c++, c++11, lambda, syntax

我最近遇到了以下深奥的代码。

```
int main(){(([](){})());} 
```

将其重新格式化如下，使其更具可读性：

```
int main(){
    (([](){})());   //  Um... what?!?!
} 
```

但我无法理解`(([](){})())`有效代码如何。

*   它看起来不像函数指针语法。
*   这不可能是一些运算符重载技巧。代码按原样编译。

谷歌对这种全符号搜索没有多大帮助。但它在 Visual Studio 2010 中编译并且不输出任何内容。没有错误，也没有警告。所以它看起来像有效的代码。

我从未见过任何在[Javascript](https://stackoverflow.com/q/7202157/922184)和[C 函数指针](https://stackoverflow.com/q/8249483/922184)之外如此奇怪的有效代码。

有人可以解释这是如何有效的 C++ 吗？

* * *

## 回答 #1

> 赞同：292
> 
> 时间：2012-11-28T10:51:48.103

该代码本质上调用了一个空的 lambda。

让我们从头开始：`[](){}`是一个空的[lambda 表达式](https://stackoverflow.com/q/7627098/500104)。

然后，在 C 和 C++ 中，您可以将表达式包装在括号中，它们的行为与没有它们的情况完全相同^(†</sup>，所以这就是 lambda 周围的第一对括号所做的。我们现在在`([](){})`。)

然后，`()`在第一个包装括号之后调用（空）lambda。我们现在在`([](){})()`

整个表达式再次被包裹在括号中，我们得到`(([](){})())`.

最后，`;`结束声明。我们到达`(([](){})());`。

* * *

†至少在 C++ 中存在*一些极端情况，例如*[and](https://stackoverflow.com/q/3097779/500104)`T a_var;` [之间存在差异`decltype(a_var)``decltype((a_var))`](https://stackoverflow.com/q/3097779/500104)。

# javascript - 不使用 jquery 替换 img src 属性

> ID：13603287
> 
> 赞同：2
> 
> 时间：2012-11-28T10:50:18.053
> 
> 标签：javascript, jquery-plugins, jquery-selectors

我正在使用 javascript 替换 img src 属性

我的代码是

```
<div class="reader" id="reader1"></div>    

    <img src="images/img_001.jpg" alt="image" id="image1"/>

</div> 
```

和javascript代码

```
$("#image1").attr("src").replace("images/img_001.jpg", "images/img_002.jpg"); 
```

src 属性没有替换

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:51:58.500

您无需调用`replace()`，只需设置新的 src：

```
$("#image1").attr("src", "images/img_002.jpg"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:59:02.880

您可以直接设置`src`with 的值：

```
$("#image1").attr("src", "images/img_002.jpg"); 
```

[http://jsfiddle.net/VFgn8/](http://jsfiddle.net/VFgn8/)

看看[jQuery 文档`attr()`](http://api.jquery.com/attr/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:52:47.277

请参阅[http://api.jquery.com/attr/#attr2](http://api.jquery.com/attr/#attr2)：

```
$("#image1").attr("src", "images/img_002.jpg"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T10:53:13.393

您可以使用更改值

```
$('#image1').attr('src', 'images/img_002.jpg'); 
```

如果您正在使用：

```
$('#image1').attr('src'); 
```

该函数将返回一个字符串。字符串不会通过引用传递，而是被复制。所以修改它实际上并没有改变它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T10:53:02.283

或者你可以使用[`prop()`](http://api.jquery.com/prop/)

```
$("#image1").prop("src", "images/img_002.jpg"); 
```

[工作演示](http://jsfiddle.net/PCCQm/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T10:53:14.887

原因是该`replace`方法实际上返回了新字符串——而不是就地编辑它。

你可以像这样实现你想要的：

```
$("#image1").attr("src", function(){
    return $(this).attr('src').replace("images/img_001.jpg", "images/img_002.jpg");
}); 
```

`src`这通过调用函数（第二个参数）为属性设置一个新值。这个函数实际上`returns`是替换值。

实时示例（使用开发人员工具检查 src）：http: [//jsfiddle.net/4K3Dy/](http://jsfiddle.net/4K3Dy/)

# jsp - 在请求范围上设置按钮值并进入其他 jsp

> ID：13603289
> 
> 赞同：0
> 
> 时间：2012-11-28T10:50:20.600
> 
> 标签：jsp

我试图在请求范围内设置值并在我单击按钮弹出窗口打开并获取空值时获取另一个 jsp，因为我的要求是在其他 jsp 上获取按钮的值以验证如果用户在按钮 1 上的两段代码然后`find by id` 打开文本区域，如果单击按钮 2，然后`find by name`打开文本区域，则应关闭该弹出窗口

```
 <HTML>
    <HEAD>
        <TITLE>Using Buttons</TITLE>
        <script type="text/javascript">

               function button1()
               {
                var mywindow= window.open("file.jsp", "file","status=1,width=350,height=150");
         }    

        </SCRIPT>
    </HEAD>

    <BODY>
        <H1>Using Buttons</H1>

         <INPUT TYPE="BUTTON" name="butto" VALUE="Button 1" ONCLICK="button1()"/>
               <% request.setAttribute("button1" ,"butto");%>

       <% request.setAttribute("button1" ,"butto");%>

    </BODY>
</HTML> 
```

这是我的文件 .jsp

```
<!

DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt"%>
<%@ taglib prefix="sql" uri="http://java.sun.com/jstl/sql"%>
<%@ taglib prefix="x" uri="http://java.sun.com/jstl/xml"%>
<%@page
    import="com.nousinfo.tutorial.employee.service.model.bo.EmployeeBO"%>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>

</head>
<%= (String)request.getAttribute("button1") %>
<body>

</body>
</html> 
```

为什么我得到空值的错误是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:00:07.377

通过简单的调用 window.open() 它不会将您的请求范围对象传输到其他 jsp。如果不使用 forward()，您无法将数据从请求范围发送到另一个 JSP；

用法示例

```
RequestDispatcher rd = servletContext.getRequestDispatcher("/pathToResource");
rd.forward(request, response); 
```

但是，在你的例子中，它不能通过简单地调用 window.open()

# internet-explorer - 如何仅在 IE 中减小 div 的大小？

> ID：13603292
> 
> 赞同：0
> 
> 时间：2012-11-28T10:50:23.113
> 
> 标签：internet-explorer, html

我正在开发一个 div 高度为 385px 的应用程序，并且它可以在除 IE 之外的所有浏览器中正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:53:16.997

这是一个javascript示例，您可以如何做到这一点：

```
var browsername = navigator.appName;
var yourdiv = document.getElementById("yourdivID");

if (browsername == "Microsoft Internet Explorer"){
 yourdiv.style.height = "200px";
} 
```

# wpf - 重置数据网格的非活动选择背景颜色

> ID：13603293
> 
> 赞同：3
> 
> 时间：2012-11-28T10:50:28.657
> 
> 标签：wpf, xaml, datagrid

有没有办法在`DataGrid`失去焦点时保留一行的原始背景颜色？

我知道`InactiveSelectionHighlightBrushKey`可以设置特定的颜色，但是可以说以前的背景颜色可以是红色或绿色，我想`InactiveSelectionHighlightBrushKey` 成为该行的原始颜色是什么？

添加：

我在 viewmodel 中有 IsZero 属性，它是真/假，以及下面的 XAML：

```
 <DataGrid.RowStyle>
                <Style TargetType="{x:Type DataGridRow}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsZero}" Value="True">
                            <Setter Property="Background" Value="Green" />
                        </DataTrigger> 
```

其他行有其他绑定来设置不同的颜色，但选择它并取消选择它会给出蓝色和灰色。我可以设置颜色，但不确定将其设置为“当前背景颜色”的优雅方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T19:18:33.863

如果我理解正确，您可以使用此页面中的答案：[DataGrid's selected row color when inactive](https://stackoverflow.com/questions/7998112/datagrids-selected-row-color-when-inactive) to set the `InactiveSelectionHighlightBrushKey` to be `Transparent`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:37:23.577

使用 InactiveSelectionHighlightBrushKey 不是一个好的解决方案（至少对我而言），因为此属性已冻结且无法更改。请参阅：http: [//msdn.microsoft.com/en-us/library/system.windows.systemcolors.inactiveselectionhighlightbrushkey.aspx](http://msdn.microsoft.com/en-us/library/system.windows.systemcolors.inactiveselectionhighlightbrushkey.aspx)

尝试修改它会导致我出现运行时错误。

在我的情况下，使用以下工作：

```
<DataGrid.Resources>
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
    <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent"/>           
</DataGrid.Resources> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T09:27:56.047

对于 WPF 4.0，我发现以下方法效果最好，因为在其他解决方案中，当我输入另一个数据网格时，行仍然变成灰色。

```
<DataGrid.CellStyle>
<Style TargetType="{x:Type DataGridCell}">
    <Style.Triggers>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
        </Trigger>          
    </Style.Triggers>
</Style> 
```

# opencl - 执行 CL_COMMAND_NDRANGE_KERNEL 的 CL_MEM_OBJECT_ALLOCATION_FAILURE 错误

> ID：13603296
> 
> 赞同：0
> 
> 时间：2012-11-28T10:50:37.010
> 
> 标签：opencl, gpgpu

有一个执行视频处理的 OpenCL 程序。它适用于小型视频，但是当输入超过 200 帧时，OpenCL 在 clEnqueueNDRangeKernel 上的第 210 帧后抛出“CL_MEM_OBJECT_ALLOCATION_FAILURE 错误执行 CL_COMMAND_NDRANGE_KERNEL”错误。我认为它背后的原因可能是未释放的缓冲区。但我控制了一切。

# ios - 如何为我的复选框停用 UITapGestureRecognizer 的功能？

> ID：13603300
> 
> 赞同：0
> 
> 时间：2012-11-28T10:50:46.187
> 
> 标签：ios, checkbox, uitapgesturerecognizer

我有一个带有 UITapGestureRecognizer 的 UIView，在上面我使用 textFields 和复选框。我想使用这个gestureRecongizer通过点击其他任何地方来移除键盘。

但是知道我的复选框调用了识别器的选择器吗？我怎样才能避免这种行为？我已经尝试了 ExclusiveTouch 属性，但它不起作用。

谁能为我推荐一个解决这个问题的好工作流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:57:21.150

你的复选框可能是一段自定义代码？一个按钮或其他类型的 UIView，只要它们是 UIView 的子视图，并且没有自己的处理点击的方法（例如 UITextField），它们最终将调用它们的超级视图识别器。

因此，您可以通过为每个复选框提供其自己的识别器来解决此问题，并让它们处理随后发生的任何事情，或者为所有复选框提供识别器。然后，这可以处理您的点击以选中或取消选中该复选框。

例如类似的东西。

```
- (void) viewDidLoad
{
    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap):];

    [singleTap setNumberOfTapsRequired:1];
    [checkbox addGestureRecognizer:singleTap];
}

- (void) handleSingeTap: (id) sender
{
  //check/uncheck the apropriate chexbox
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:02:50.920

1-注册为您的识别器代表`tapRecognizer.delegate = self;`（声明您是 UIGestureRecognizerDelegate）

2- 实施**shouldReceiveTouch**

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {

} 
```

3- 检查 touch.view 以确定手势是否应该处理该触摸。在您的情况下，如果它是复选框视图，则返回 NO。

```
 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    if ([touch.view isKindOfClass:[yourCheckboxClass class]]) {
    return NO; // ignore the touch
    }
    return YES;
    } 
```

*（您不必使用 isKindOfClass，您可以使用任何其他方式来确定它是否是您的复选框）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:46:09.723

我找到了第三种更简单的方法！

我使用了手势属性“cancelsTouchesinview”并将其设置为“NO”

```
gesture.cancelsTouchesinview = NO; 
```

# c++ - 提升递归对象的序列化

> ID：13603302
> 
> 赞同：0
> 
> 时间：2012-11-28T10:51:04.793
> 
> 标签：c++, serialization, boost

我定义了以下要序列化的类：

```
using namespace std;

class MyElementObject
{
    friend class boost::serialization::access;

    public:
        template<class Archive>
        void serialize(Archive & ar, const unsigned int version) { }
};

template<class T>
class MyRecursiveObject
{
    friend class boost::serialization::access;

    public:
        T element;
        std::vector<MyRecursiveObject<T> > children;

        template<class Archive>
        void serialize(Archive & ar, const unsigned int version)
        {
            ar & element;
            ar & children;
        }
}; 
```

然后我运行以下代码：

```
int main()
{
    //MyRecursiveObject initialization
    MyRecursiveObject<MyElementObject> rec_object;    
    rec_object.children.push_back(MyRecursiveObject<MyElementObject>());
    rec_object.children[0].children.push_back(MyRecursiveObject<MyElementObject>());

    //create vector of pointers to MyRecursiveObject's elements
    vector<MyElementObject *> elt_ptrs;
    elt_ptrs.push_back(&rec_object.element);
    elt_ptrs.push_back(&rec_object.children[0].element);
    elt_ptrs.push_back(&rec_object.children[0].children[0].element);

    //serialize MyRecursiveObject and the vector of pointers
    {
        ofstream ofs("filename");
        boost::archive::text_oarchive oa(ofs);
        oa << rec_object;
        oa << elt_ptrs;
    }

    //create new MyRecursiveObject and vector of pointers for deserialization
    MyRecursiveObject<MyElementObject> rec_object_deserialized;    
    rec_object_deserialized.children.push_back(MyRecursiveObject<MyElementObject>());
    rec_object_deserialized.children[0].children.push_back(MyRecursiveObject<MyElementObject>());
    vector<MyElementObject *> elt_ptrs_deserialized;

    //deserialize
    {
        ifstream ifs("filename");
        boost::archive::text_iarchive ia(ifs);
        ia >> rec_object_deserialized;
        ia >> elt_ptrs_deserialized;
    }

    //compare deserialized pointers
    cout<<"elt_ptrs first level="<<elt_ptrs_deserialized[0]
    <<" expected="<<&rec_object_deserialized.element<<endl;

    cout<<"elt_ptrs second level="<<elt_ptrs_deserialized[1]
    <<" expected="<<&rec_object_deserialized.children[0].element<<endl;

    cout<<"elt_ptrs third level="<<elt_ptrs_deserialized[2]
    <<" expected="<<&rec_object_deserialized.children[0].children[0].element<<endl;

    return 0;
} 
```

我总是得到类似于以下的输出：

```
elt_ptrs first level=0x7fff57c787c0 expected=0x7fff57c787c0
elt_ptrs second level=0x18e7020 expected=0x18e7020
elt_ptrs third level=0xffff8000ab5564f0 expected=0x18e7450 
```

从指针值可以看出，我设法将指向元素的指针反序列化到 MyRecursiveObject 的第二个递归级别。一旦我尝试使用指向第三级或更深层次的指针来执行此操作，反序列化就会失败。

我是否错误地使用了 boost::serialization？

请注意 MyRecursiveObject 总是成功反序列化，无论它有多少递归级别。我遇到的问题只是反序列化指向其元素的指针。

提前谢谢你，基恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T23:52:07.103

让我们首先检查一下出了什么问题。默认的容器反序列化器基本上是这样工作的：

```
size_t count;
ar >> BOOST_SERIALIZATION_NVP(count); // get element count
while( count-- > 0 ) {
    T temp; // <- and here's the problem!
    ar >> boost::serialization::make_nvp("item",temp);
    container.push_back(temp);
} 
```

容器（在您的情况下是`vector<MyRecursiveObject<T>>`）使用局部变量填充。不幸的是，他们的地址已注册（对象跟踪）并在您反序列化`vector<MyElementObject*>`. 换句话说，您`elt_ptrs_deserialized`指向的是早已不复存在的局部变量。

要解决此问题，请在不使用局部变量的情况下手动序列化向量：

```
template<class Archive>
void serialize(Archive & ar, const unsigned int version)
{
    ar & BOOST_SERIALIZATION_NVP(element);
    size_t count = children.size();        // 0 when loading, N when storing
    ar & BOOST_SERIALIZATION_NVP(count);   // load or store element count
    children.resize(count);                // should be a no-op when storing
    while( count-- > 0 )
        ar & boost::serialization::make_nvp("item",children[count]);
}
// You should split serialize() into load() and save() with
// BOOST_SERIALIZATION_SPLIT_MEMBER() for a cleaner version 
```

现在，首先分配整个向量的内存，然后将元素直接反序列化到其中，从而注册正确的内存地址。这应该会产生预期的结果：

```
elt_ptrs 1st level=0x22fe90 expected=0x22fe90
elt_ptrs 2nd level=0x6127d0 expected=0x6127d0
elt_ptrs 3rd level=0x613d50 expected=0x613d50
elt_ptrs 4th level=0x613c88 expected=0x613c88 
```

# ios - 实体属性的类型已更改。如何迁移？

> ID：13603309
> 
> 赞同：0
> 
> 时间：2012-11-28T10:51:28.460
> 
> 标签：ios, core-data, migration

我添加了一个新版本的数据模型并将一个属性从 double 更改为 float。我真的必须创建迁移映射吗？

所以现在我被困住了。

我找到了有关使用 NSMappingModels（和 XCode 3）迁移到新数据模型的 Apple 文档，但我不知道是否真的有必要更改属性的类型。

更新我的应用程序后，我从persistentStoreCoordinator 收到错误消息：

> 无法打开持久存储：错误域 = NSCocoaErrorDomain 代码 = 134130 “操作无法完成。

如果仅更改了属性类型，是否有一种简单的迁移方法（操作方法/教程）？删除应用程序不是解决方案，第一个版本已经部署。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:47:15.117

根据[轻量级迁移规则](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html)，我认为您无法自动执行此操作。您必须创建一个 NSMappingModel，在创建过程中选择旧版本和新版本。它将自动为您的所有属性和关系创建迁移，但您更改的属性除外。

对于包含该属性的模型，您必须创建 NSEntityMigrationPolicy 的子类并告诉您的 NSMappingModel 使用它（单击 NSMappingModel 中的实体，然后在屏幕右侧的检查器中将其设置在“自定义策略”字段中。对于该特定属性，在您的 NSEntityMigrationPolicy 子类中创建一个方法并在那里执行转换。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T14:44:55.590

[您必须按照此处](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdUsingMOM.html#//apple_ref/doc/uid/TP40005190-SW9)描述的轻量级迁移说明进行操作。（还有一个指向迁移指南的链接。）

这真的很容易！简而言之：

*   创建数据模型的新版本，
*   选择它作为活动的，
*   改变属性，
*   跑。

# php - 使用会话变量会导致性能不佳

> ID：13603315
> 
> 赞同：0
> 
> 时间：2012-11-28T10:51:49.943
> 
> 标签：php, jquery, ajax, session, readfile

我对会话变量有疑问。我需要在会话变量中存储一些关于读取大文件的过程的信息（大小、大小读取、...），以便使用 jquery ajax 方法获取这些值并向用户显示有关该过程的信息。

在 php 页面中，我有以下代码：

逐行读取文件并在会话变量中存储（总和）行的大小。
**文件 1 - readfile.php**

```
$start = (float) array_sum(explode(' ',microtime()));
$filesize = filesize($file);
$handle = fopen($file, 'r');
$readsize = 0;
$linecount = 0;
createSessionValue('filesize', $filesize);
set_time_limit(0);
if ($handle) {
    while (!feof($handle)) {
        $line = fgets($handle);
        if ($line) {
            $readsize += mb_strlen($line);
            createSessionValue('readlines', $readsize);
            $linecount++;
        }
    }
}; 
```

$end = (float) array_sum(explode(' ',microtime()));

而这个功能：

```
function createSessionValue($sessionField, $sessionValue) {
    session_start();
    $_SESSION[$sessionField] = $sessionValue;
    session_write_close();    
} 
```

在 HTML 页面中，我用 ajax 调用这个 php 文件：
**文件 2 - getSessions.php**

```
 session_start();
    if (isset($_SESSION)) {
        var_dump($_SESSION);
        if(isset($_SESSION['readlines']) && isset($_SESSION['filesize'])){
            $completepercent = round(($_SESSION['readlines'] * 100) / $_SESSION['filesize'],2);
        }
        echo $completepercent . ' % Complete.';
    }
    else {
        echo 'no sessions values found';
    }

    echo '</br>Execution time:' .  ini_get('max_execution_time'); 
```

使用此 jquery 代码从 html 页面调用此文件：

```
 $(document).ready(function(){             
                window.setInterval(getSessionsValues, 1);
                function getSessionsValues(){
                    $.get("getSessions.php", function(data){
                        //                 alert("Data Loaded: " + data);
                        $('div').html(data);
                    },'html');    
                }
            }); 
```

进度很好，但是会话变量的性能非常糟糕：

结果是：

```
Filesize: 732295
Read bytes: 732295 
```

*   使用会话变量：

    **处理时间：18.0620 秒**

*   没有会话变量（我注释调用函数 createSessionValue 的行）：

    **处理时间：**0.6535秒****

为什么？控制流程执行时间的最佳方法是什么？

新测试：我午餐进程并打开 getProcessStatus.php。该过程需要很长时间：

**处理时间：197.5220 秒**

我终于使用了@Li-chih Wu 提出的解决方案。知道我的问题是我在 Chrome 中收到此错误：错误 101 (net::ERR_CONNECTION_RESET)。

我正在尝试读取大于 500 mb 的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:01:32.037

您有两个进程同时运行并且都访问同一个会话文件。

很可能会话文件被一个进程锁定，而另一个进程正在等待释放该锁定。当长期进程仅将会话文件保持在短时间内打开时，这可能看起来很奇怪，但它每秒会执行多次。

解决方案：不要写每行的行数，而是说每100行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:00:17.453

如果您没有多会话要求...

```
function createSessionValue($sessionField, $sessionValue) {
    file_put_contents("/tmp/$sessionField", $sessionValue);
}
// -------------------
$readlines = file("/tmp/readlines");
$filesize = file("/tmp/filesize"); 
```

或者你可以试试这个...

```
function createSessionValue($sessionField, $sessionValue) {
    file_put_contents("/tmp/".session_id()."_".$sessionField", $sessionValue);
}
// -------------------
$readlines = file("/tmp/"session_id()."readlines");
$filesize = file("/tmp/"session_id()."filesize"); 
```

# ruby - 无阻塞读取 I/O（在本例中为串行端口）（Ruby）

> ID：13603317
> 
> 赞同：0
> 
> 时间：2012-11-28T10:51:51.893
> 
> 标签：ruby, io

我正在尝试使用串行端口 gem 读取 Ruby 中的串行端口。问题是有时没有数据要读取，当我告诉程序读取串行端口时，程序挂起......我试过使用`sp.read`,`sp.readline`和`sp.readlines`; 它们都会导致程序阻塞（在 Windows 下）。

有谁知道是否有一种不会导致阻塞的方法？基本上，我希望如果没有要读取的数据，

读取结果为零。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:55:32.177

您可以使用[IO#read_nonblock](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-read_nonblock)：

```
begin
  result = io.read_nonblock(maxlen)
rescue IO::WaitReadable # this is raised when there's no data in the stream
  # don't wait and return nil
  result = nil
end 
```

# c++ - m256_f32 的 GCC 等效项

> ID：13603319
> 
> 赞同：3
> 
> 时间：2012-11-28T10:52:02.760
> 
> 标签：c++, gcc, avx

我有这样的 AVX C++ 代码，在 Visual Studio 2010 下编译得很好：

```
#include <immintrin.h>
#include <iostream>

int main() {
    float data[] = {0, 1, 2, 3, 4, 5, 6, 7};
    __m256 ymm0 = _mm256_loadu_ps(data);
    // ..
    float r0 = ymm0.m256_f32[0];
    float r4 = ymm0.m256_f32[4];
    std::cout << r0 << " " << r4 << std::endl;
} 
```

然而，GCC 给出了以下错误：

```
foo.cpp:8:18: error: request for member ‘m256_f32’ in ‘ymm0’, which is of non-class type ‘__m256 {aka __vector(8) float}’
foo.cpp:9:18: error: request for member ‘m256_f32’ in ‘ymm0’, which is of non-class type ‘__m256 {aka __vector(8) float}’ 
```

我做了一些研究，这似乎`ymm0.m256_f32`是 Microsoft 特定的指令，用于从长 AVX 寄存器中提取单个浮点数。但是我可以用什么来让 gcc/linux 做同样的事情呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T11:52:51.417

GCC 可以在 C 语言中索引向量，但不能在 C++ 中。您可以考虑将一小部分代码重写为 C。

另一种选择是显式使用随机播放、提取和转换内在函数 - `_mm256_shuffle_pd`, `_mm256_extractf128_pd`, `_mm_cvtsd_f64`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:25:18.367

在@chill 之后，我针对这个特定问题提出了以下两种解决方案。C++ 解决方案：

```
#include <immintrin.h>
#include <iostream>
int main() {
    float data[] = {0, 1, 2, 3, 4, 5, 6, 7};
    __m256 ymm0 = _mm256_loadu_ps(data);
    // ..
    __m128 low = _mm256_extractf128_ps (ymm0, 0); // extracts lower half
    __m128 high = _mm256_extractf128_ps (ymm0, 1);// extracts upper half
    float r0 = _mm_cvtss_f32 (low);  // extracts lowest float
    float r4 = _mm_cvtss_f32 (high);  // extracts lowest float
    std::cout << r0 << " " << r4 << std::endl;
} 
```

以及纯 C 中的解决方案：

```
#include <immintrin.h>
#include <stdio.h>

int main() {
    float data[] = {0, 1, 2, 3, 4, 5, 6, 7};
    __m256 ymm0 = _mm256_loadu_ps(data);
    // ..
    float r0 = ymm0[0];
    float r4 = ymm0[4];
    printf("%f, %f", r0, r4);
} 
```

# javascript - 如果单击链接 - 打开一个弹出窗口，但如果有人单击它并在新选项卡中打开，则应打开一个新选项卡

> ID：13603321
> 
> 赞同：0
> 
> 时间：2012-11-28T10:52:04.757
> 
> 标签：javascript, jquery, popup, mootools, new-window

是否有任何框架（jquery 或其他任何东西）或任何可以处理此问题的 java 脚本：

*   如果单击链接：打开一个弹出窗口
*   如果有人单击：鼠标中键单击或右键单击：在新选项卡中打开，它应该在新选项卡中打开。

我不敢相信，没有（复杂的）解决方案！
（并且：如果它在 IE7+、FF、Safari、Chrome 上运行会很好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:55:53.523

您只需为将调用以打开新窗口的`onclick`事件绑定一个处理程序。我没有在所有浏览器中进行测试，但是当您使用中间（滚轮）或鼠标右键时`window.open()`，我测试过的浏览器不会触发事件。`onclick`

HTML：

```
<a href="yourpage.html" class="popuplink">Click me!</a> 
```

jQuery：

```
$('a.popuplink').on('click', function(e) {
    e.preventDefault(); // don't want to follow the link
    window.open(this.href, 'new_window', 'width=800,height=600').focus();
}); 
```

# jquery - jquery validate 显示多个错误

> ID：13603327
> 
> 赞同：2
> 
> 时间：2012-11-28T10:52:28.750
> 
> 标签：jquery, json, jquery-validate

我正在尝试使用 jquery validate 来显示从服务器返回的一些错误。

我正在使用 validator.showErrors() 方法来执行此操作。

我可以让方法按照[这里](http://docs.jquery.com/Plugins/Validation/Validator/showErrors#errors)的示例工作。

```
var validator = $("#myform").validate();
validator.showErrors({"firstname": "I know that your firstname is Pete, Pete!"}); 
```

然而，我想要实现的是对相同或不同字段有 2 个或更多验证错误。根据文档，这是可能的

> 显示指定的消息。键必须引用元素的名称，使用配置的错误放置为这些元素显示值。
> 
> 论据：
> 
> 错误`Object<String, String>` 输入名称和消息的一个或多个键/值对。

查看 showErrors 方法内部显示以下内容：

```
 showErrors: function(errors) {
        if(errors) {
            // add items to error list and map
            $.extend( this.errorMap, errors );
            this.errorList = [];
            for ( var name in errors ) {
                this.errorList.push({
                    message: errors[name],
                    element: this.findByName(name)[0]
                });
            }
            // remove items from success list
            this.successList = $.grep( this.successList, function(element) {
                return !(element.name in errors);
            });
        }
        this.settings.showErrors
            ? this.settings.showErrors.call( this, this.errorMap, this.errorList )
            : this.defaultShowErrors();
    } 
```

我尝试了以下方法：

```
validator.showErrors({ "Id": "I know that your firstname is Pete, Pete!" },{ "Id":"test2"}); 
```

但它仍然只显示第一个错误。

任何想法使用正确的格式来显示多个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:01:48.713

所以看起来正确的格式是

```
validator.showErrors({ "Id": ["I know that your firstname is Pete", "test2" ]}); 
```

不幸的是，第二个错误显示在第一个错误旁边，所以我的下一个问题是找到一种更好的方法来格式化这些错误。

# shell - 带有标志的时间命令运行带有标志的应用程序

> ID：13603328
> 
> 赞同：0
> 
> 时间：2012-11-28T10:52:30.210
> 
> 标签：shell, unix, command-line, time, mpi

我试图为我的小程序计时，它使用 MPI，我希望在文件中输出。

我正在尝试的命令：`time --output=rt.txt mpirun -np 2 a.out`. 但标志`time`和 `mpirun`似乎发生冲突。

任何想法这可能如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:58:13.127

你确定吗 ？*来自二进制文件*的手册页 *`time`*

 *> 时间选项必须出现在 COMMAND 之前的命令行中。COMMAND 之后命令行上的任何内容都作为参数传递给 COMMAND

`time`你用的是哪个？请注意，有一个内置的 shell`time`和一个单独的二进制文件。我怀疑您需要使用单独的二进制文件而不是内置的。只需将其指定为`/usr/bin/time`（或安装位置）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:05:00.127

你听说过这个`MPI_Wtime`函数，而不是使用时间二进制吗？为您的应用程序计时`MPI_Wtime`可以产生更准确的整个并行作业的执行时间结果。您可以`MPI_Wtime`按如下方式使用：

```
#include <stdio.h>
#include <mpi.h>
int main(void) {
    MPI_Init(NULL, NULL);
    MPI_Barrier(MPI_COMM_WORLD);
    // Get the program start time after all processes have initialized and synchronized
    double start_time = MPI_Wtime();

    // Do parallel processing here...
    sleep(1);

    // Synchronize all the processes again and find out the total execution time
    MPI_Barrier(MPI_COMM_WORLD);
    double execution_time = MPI_Wtime() - start_time;

    // Print the execution time from the root process
    int world_rank;
    MPI_Comm_rank(MPI_COMM_WORLD, &world_rank);
    if (world_rank == 0) {
        printf("Execution time %lf\n", execution_time);
    }

    MPI_Finalize();
    return 0;
} 
```

这个程序应该打印关闭这个 -> 执行时间 1.0*

# ruby-on-rails-3 - 使用 coffeescript + rails3 进行 Ajax 更新

> ID：13603330
> 
> 赞同：0
> 
> 时间：2012-11-28T10:52:35.910
> 
> 标签：ruby-on-rails-3, routing, coffeescript

我在[这里](http://webtempest.com/sortable-list-in-ruby-on-rails-3-almost-unobtrusive-jquery/)关注一个可排序的列表教程，但不幸的是这篇文章有点旧（但非常有用），我在尝试用它来实现它时遇到了一些问题

```
Rails 3.2.x
coffeescript 
Jquery 
```

我的问题是，视图没有将请求传递给控制器​​，而是给出了路由错误

以下是我的看法

```
#index.html.erb 
<h1>Listing books</h1>
<ul id="books"> <% @books.each do |book| %>
  <li class="book<%= book.id %>"><span class="handle">[drag]</span><%= book.name %></li>
<% end %></ul>
<%= link_to 'New book', new_book_path %> 
```

这是我的咖啡脚本

```
#books.js.coffee
jQuery ->
  $('#books').sortable
    axis: 'y'
    handle: '.handle'
    update: ->
      $.post($(this).data('#books'), $(this).sortable('serialize')) 
```

这是我的控制器

```
#books_controller.rb
def sort
  @books = Book.all
  @books.each do |book|
    book.position = params['book'].index(book.id.to_s) + 1
    book.save
  end

  render :nothing => true
end 
```

这是我的路线

```
#config/routes.rb
resources :books do
  collection do 
    post :sort  
  end
end 
```

这是我得到的错误

在 2012-11-28 16:13:29 +0530 为 127.0.0.1 开始 POST "/undefined"

```
ActionController::RoutingError (No route matches [POST] "/undefined"):
  actionpack (3.2.9) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.9) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.9) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.9) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.9) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.9) lib/rails/engine.rb:479:in `call'
  railties (3.2.9) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.9) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /home/sameera/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'

  Rendered /home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms) 
```

任何帮助将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:56:01.083

我相信`$.post`需要这样的`url`参数：

```
$.post('/books/sort', $(this).data('#books'), $(this).sortable('serialize')) 
```

# python - 重复写入 STDIN 并读取子进程的 STDOUT 而不关闭它

> ID：13603334
> 
> 赞同：12
> 
> 时间：2012-11-28T10:52:46.433
> 
> 标签：python

我正在尝试在 Python 中使用子进程来保持外部脚本以类似服务器的方式打开。外部脚本首先加载一个模型。完成后，它会通过 STDIN 接受请求并将处理后的字符串返回给 STDOUT。

到目前为止，我已经尝试过

```
tokenizer = subprocess.Popen([tokenizer_path, '-l', lang_prefix], stdin=subprocess.PIPE, stdout=subprocess.PIPE) 
```

但是，我不能使用

```
tokenizer.stdin.write(input_string+'\n')
out = self._tokenizer.stdout.readline() 
```

为了通过子进程重复处理 input_strings - out 将只是空的，无论我使用`stdout.read()`or `stdout.readline()`。但是，当我`tokenizer.stdin.close()`在读取 STDOUT 之前关闭标准输入时它会起作用，但这会关闭子进程，这不是我想要的，因为我必须在发送另一个请求之前再次重新加载整个外部脚本。

有没有办法在 python 中以类似服务器的方式使用子进程而无需关闭并重新打开它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T13:09:37.463

多亏了[这个 Answer](https://stackoverflow.com/a/5413588/533362)，我发现必须使用[从句柄才能与子进程正确通信：](http://docs.python.org/2/library/pty.html)

```
master, slave = pty.openpty()
tokenizer = subprocess.Popen(script, shell=True stdin=subprocess.PIPE, stdout=slave)
stdin_handle = process.stdin
stdout_handle = os.fdopen(master) 
```

现在，我可以在不关闭子进程的情况下通过

```
stdin_handle.write(input)
stdout_handle.readline() #gets the processed input 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:54:32.487

您的外部脚本可能会缓冲其输出，因此您只能在子进程中的缓冲区被刷新（子进程必须自己完成）时在父进程中读取它。使其刷新其缓冲区的一种方法可能是关闭输入，因为它会以适当的方式终止并在进程中刷新其缓冲区。

如果您可以控制外部程序（即，如果您可以修补它），请在生成输出后插入刷新。

否则，有时可以通过将程序附加到伪 TTY 来使程序不缓冲其输出（包括 stdlib 在内的许多程序都假设当它们的输出进入 TTY 时，不需要缓冲）。但这有点棘手。

# c# - 字符串连接不起作用

> ID：13603338
> 
> 赞同：0
> 
> 时间：2012-11-28T10:53:00.717
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

```
foreach (string di_child in dirs) { 
Response.Write("\t<li class=\"directory collapsed\"><a href=\"#\" rel=\"" + drive + di_child.Name + "/\">" + di_child.Name + "</a>\n");
} 
```

VS 抱怨运算符“+”不能应用于“字符串”类型的操作数和方法组。

我只想连接这些字符串。我怎样才能做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:59:44.563

一个问题：

您正在迭代字符串值并连接 string.Name。我认为字符串上没有任何属性“名称”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:55:48.107

您可以简单地使用`StringBuilder.Append()`，如下所示：-

```
 StringBuilder sb = new StringBuilder();
  sb.Append(someString); 
```

或试试这个：

```
 "\t<li class=\"directory collapsed\"><a href=\"#\" rel=\"" + drive() + di_child.Name + "/\">" + di_child.Name + "</a>\n" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:56:25.440

我怀疑这`drive`实际上是一个函数，在这种情况下你应该这样称呼它：

```
 "\t<li class=\"directory collapsed\"><a href=\"#\" rel=\"" + drive() + di_child.Name + "/\">" + di_child.Name + "</a>\n" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:57:43.457

尝试这个 ：

```
foreach (string di_child in dirs) { 
  Response.Write(String.Format("\t<li class=\"directory collapsed\"><a href=\"#\" rel=\"{0}{1}/\">{2}</a>\n",drive,di_child.Name,di_child.Name));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T11:06:05.927

出现错误消息是因为`drive`or`di_child.Name`是一种方法而不是字符串。

在您的 foreach 循环中，您声明`di_child`为 a`string`并且`Name`不是`string`.

你能确认驱动器的类型吗？如果它是一个函数，您可能需要将其用作`drive()`.

这个问题实际上可能是因为编译器正在使用扩展方法作为名称，而您只需要使用`di_child`而不是`di_child.Name`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T11:14:57.183

您在其中一条评论中说 drive 是 DriveInfo 局部变量

假设 di_chld 是一个字符串变量，并且假设 DriveInfo 类有一个 Name 属性，我猜你在错误的事情上调用 .Name 所以我猜你应该有这个：

```
Response.Write("\t<li class=\"directory collapsed\"><a href=\"#\" rel=\"" + drive.Name + di_child + "/\">" + di_child + "</a>\n"); 
```

正如某些人所建议的那样，通常最好使用 String.Format 或 StringBuilder 进行字符串连接

# php - 如何将表单从主域提交到子域？

> ID：13603346
> 
> 赞同：1
> 
> 时间：2012-11-28T10:53:44.720
> 
> 标签：php, javascript, jquery, html

我想从主页提交表单到子域页面。这是我的代码

**html - 主页（主域）**

```
<table>
    <tr>
        <td>Name</td>
        <td><input type="text" name="txtName" id="txtName" /></td>
    </tr>
    <tr>
        <td>Email</td>
        <td><input type="text" name="txtEmail" id="txtEmail" /></td>
    </tr>
    <tr>
        <td><input name="btnSubmit" id="btnSubmit"  value="Submit" type="button"></td>
    </tr>             
</table> 

<form id="getDetails" method="post" action="http://customers.liyyas.com/">
    <input type="hidden" name="act" value="Users" />
    <input type="hidden" name="hdnName" id="hdnName" />
    <input type="hidden" name="hdnEmail" id="hdnEmail" />     
</form> 
```

**脚本**

```
<script type="text/javascript"> 
$(document).ready(function(){
    $('#btnSubmit').click(function()
        {
          alert("hai");
            document.getElementById("getDetails").submit();
            document.getElementById("hdnName").value = $('#txtName').val();
            document.getElementById("hdnEmail").value = $('#txtEmail').val();
     });
    });  
 </script> 
```

**子域页面 - user.php**

```
<?php 
$act = formatstring($_POST['act']);
switch($act)
{
case "Users":
        $Name=$_POST['hdnName'];
        $Email=$_POST['hdnEmail'];  
        print($Name);
        exit();
}    
?> 
```

在子域中，我正在打印值但不打印

是否可以将表单从主域提交到子域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:01:30.647

您需要将表单元素的 action 属性从

```
http://customers.liyyas.com/ 
```

到

```
http://customers.liyyas.com/customers.php 
```

我还假设您知道根据此代码

```
$('#btnSubmit').click(function()
    {
      alert("hai");
        document.getElementById("getDetails").submit();
        document.getElementById("hdnName").value = $('#txtName').val();
        document.getElementById("hdnEmail").value = $('#txtEmail').val();
 }); 
```

表单将在 hdnName 和 hdnEmail 的值更改之前提交？这也可能是您通过切换几行来快速切换求解的错误。这可能是一个错误的原因是，当您的表单提交时，页面将被重新加载，这意味着用户将永远无法看到通过 JavaScript 插入的新值。

修复可能是

```
$('#btnSubmit').click(function()
    {
      alert("hai");
        document.getElementById("hdnName").value = $('#txtName').val();
        document.getElementById("hdnEmail").value = $('#txtEmail').val();
        document.getElementById("getDetails").submit();
 }); 
```

# java - 如何去除自动轴标签拉伸？

> ID：13603349
> 
> 赞同：5
> 
> 时间：2012-11-28T10:53:52.807
> 
> 标签：java, label, jfreechart, axis, scaling

我正在使用[`JFreeChart 1.0.14`](http://sourceforge.net/projects/jfreechart/files/1.%20JFreeChart/1.0.14/). 如果情节太小/太大，我的轴标签会非常奇怪地伸展。我想关闭该行为并希望轴标签始终以相同的宽度：高度比打印。

![拉伸](../Images/f3d0fe012aad8523a2d9f3939d79c0b1.png)

这是一个SSCCE：

```
import java.awt.BorderLayout;

import javax.swing.JFrame;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

public class Main {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setLayout(new BorderLayout());

        XYSeries series = new XYSeries("series a");
        for (int i = 0; i < 100; i++)
            series.add(i, Math.sin(i / 2.0) * Math.cos(i / (2.0 + Math.random())));
        XYSeriesCollection dataset = new XYSeriesCollection(series);
        JFreeChart chart = ChartFactory.createXYLineChart("", "x-axis", "y-axis", dataset, PlotOrientation.VERTICAL, false, false, false);
        ChartPanel panel = new ChartPanel(chart);

        frame.add(panel, BorderLayout.CENTER);

        frame.setSize(400, 200);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

它产生标有 的输出`OK`。当我将任一方向的框架大小更改为一定量时，轴标签（和刻度标签）开始变形（如标有 的两个框架所示`stretched`）。并且它们的“拉伸因子”是同步的。

我不知道如何禁用此“功能”并始终以固定的宽度：高度比显示轴标签。你知道怎么做吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T16:48:22.590

这是一个[缩放](http://www.jfree.org/phpBB2/viewtopic.php?f=3&t=13401)的例子。

您需要在`ChartPanel`. 您可以设置一次：

```
ChartPanel panel = new ChartPanel(chart);
panel.setMaximumDrawHeight(1000);
panel.setMaximumDrawWidth(1000);
panel.setMinimumDrawWidth(10);
panel.setMinimumDrawHeight(10); 
```

使用一些合适的值或添加`ComponentListener`：

```
 frame.addComponentListener(new ComponentAdapter() {
        @Override
        public void componentResized(ComponentEvent e) {
            panel.setMaximumDrawHeight(e.getComponent().getHeight());
            panel.setMaximumDrawWidth(e.getComponent().getWidth());
            panel.setMinimumDrawWidth(e.getComponent().getWidth());
            panel.setMinimumDrawHeight(e.getComponent().getHeight());
        }
    }); 
```

# php - couchbase php windows客户端

> ID：13603350
> 
> 赞同：1
> 
> 时间：2012-11-28T10:53:57.607
> 
> 标签：php, windows, couchbase

我只是不明白为什么 couchbase 不提供用于“windows”和 IIS 7 的 php 扩展。是否有一些其他有效的方法可以在 windows 上使用 php 连接和使用 couchbase？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T01:31:12.217

我今天刚刚设置了 Couchbase 客户端库（IIS7 下的 PHP 5.4 NTS）。[在Couchbase 的 PHP 客户端库页面](http://www.couchbase.com/communities/php/getting-started)上发布的说明在很大程度上是准确的，但我想澄清 dll 的去向。

*   `php_couchbase.dll`下载包含和的 zip `libcouchbase.dll`。通常，您需要IIS 下的[NTS（非线程安全）版本。](http://packages.couchbase.com/clients/php/php_couchbase-1.1.2-5.4-nts-vc9-x86.zip)
*   放入`php_couchbase.dll`扩展目录。
*   放入`libcouchbase.dll`php 目录（与`php.exe`/相同的目录`php-cgi.exe`）。
*   如有必要，请安装 Microsoft 提供的[Visual C 9 运行时](http://www.microsoft.com/en-us/download/details.aspx?id=5582)。
*   在 php.ini 中启用扩展

我最初`libcouchbase.dll`按照 Couchbase 网站上的说明放入扩展文件夹。那不管用。（产生PHP“找不到指定模块”dll加载错误。）

以上只为您提供了 Couchbase 客户端。您还需要一台服务器；可以在本地 Windows 机器上或其他地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:39:45.040

Couchbase 客户端 SDK 非常重要，因为它们是“集群感知的”。

包括 PHP 在内的 SDK 将使用 vBuckets 自动使用集群的所有节点，并且在拓扑发生变化时通知它们（添加新节点、故障转移……）

此外，如果您使用的是 Couchbase 2.0，SDK 会为您提供 API 来调用视图并对文档进行更高级的查询。

所以最好的做法是使用 PHP SDK，它在内部使用 memcached 协议。

我邀请您阅读： - [http://www.couchbase.com/docs/couchbase-devguide-2.0/couchbase-clients.html](http://www.couchbase.com/docs/couchbase-devguide-2.0/couchbase-clients.html) - [http://www.couchbase.com/docs/couchbase-manual-2.0/ couchbase-introduction-architecture-vbuckets.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-introduction-architecture-vbuckets.html) vBuckets 用于管理自动分片。- [http://www.couchbase.com/develop/php/next](http://www.couchbase.com/develop/php/next) PHP SDK 主页

解释如何开发客户端 SDK 的更高级主题：- [http://www.couchbase.com/docs/couchbase-devguide-2.0/creating-client-library.html](http://www.couchbase.com/docs/couchbase-devguide-2.0/creating-client-library.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T12:00:56.610

我想您指的是 Couchbase 1（而不是当前处于测试阶段的 2.0 版本）。

[Couchbase 与 memcached 兼容](http://www.couchbase.com/couchbase-server/features#cache)。这意味着您可以使用任何与memcached 兼容的客户端来访问它，例如PHP 的[memcache](http://php.net/manual/en/book.memcache.php)或[memcached](http://www.php.net/manual/en/book.memcached.php)函数。

**更新：**

如果您想亲自动手为 Couchbase SDK 编译 PHP 扩展，[这里有一个](http://trondn.blogspot.de/2012/11/building-php-extension-for-couchbase-on.html)指导您完成整个过程的教程。

# iphone - 在情节提要中创建 IBOutlet 的问题

> ID：13603353
> 
> 赞同：0
> 
> 时间：2012-11-28T10:54:13.687
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我创建了一个 UICollectionViewController 自定义类，并将一个 UIImageView 插入到单元格中，然后创建了一个 IBOutlet：

```
@property (weak , nonatomic) IBOutlet UIImageView *imageCell; 
```

![在此处输入图像描述](../Images/5997d3e12a18cfaa89c80377682be830.png)

但是当我编译项目时，调试器给了我这个错误：

![在此处输入图像描述](../Images/235ce7414f85e00af95a23fa81640b7b.png)

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:05:31.923

您需要创建一个自定义类 - UIImageView 的子类。类似于 MyCustomImageView 并将其设置为插座的类。还有一件事——你最好用`strong`修饰符创建一个出口。另请查看对您的问题的评论中提供的链接，[了解有关您问题的更多信息](https://stackoverflow.com/questions/12150715/strange-error-when-adding-items-to-prototype-cells-in-storyboard-ib)

# visual-studio-2010 - 如何在 Visual Studio 2010 的添加引用窗口中获取 DEVPATH 程序集？

> ID：13603359
> 
> 赞同：0
> 
> 时间：2012-11-28T10:54:27.090
> 
> 标签：visual-studio-2010, .net-3.5

我想添加对 Devpath 文件夹中的程序集的引用。但它不会出现在“添加参考”窗口中。

**C:\Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG\machine.config**更新为：

```
<runtime>
    <developmentMode developerInstallation="true"/>
</runtime> 
```

环境变量 DEVPATH 在系统变量中设置为
**C:\SharedAssemblies**

我尝试将引用直接添加到项目文件中：

```
<Reference Include="AssemblyName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=123456789, processorArchitecture=MSIL"> 
```

但是 MSBuild 不查看 devpath 文件夹并返回

> 警告 MSB3245：无法解析此引用。找不到程序集...

这是如何运作的 ？

* * *

如果我将程序集添加到 GAC，Fusion 日志会显示使用了 devpath 文件夹：

```
*** Entrée du journal Binder d'assembly  (28/11/2012 @ 15:09:07) ***

L'opération a réussi.
Résultat de liaison : hr = 0x0\. L’opération a réussi.

Gestionnaire des assemblys chargé à partir de :  C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll
Exécution sous l'exécutable  c:\users\User\documents\visual studio 2010\Projects\ConsoleApplication1\ConsoleApplication1\bin\Debug\ConsoleApplication1.vshost.exe
--- Un journal des erreurs détaillé suit. 

=== Informations d'état de liaison préalable ===
JRN : utilisateur = User
JRN : DisplayName = AssemblyName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=123456789
 (Fully-specified)
JRN : Appbase = file:///c:/users/User/documents/visual studio 2010/Projects/ConsoleApplication1/ConsoleApplication1/bin/Debug/
JRN : DEVPATH = C:\SharedAssemblies
JRN : PrivatePath initial = NULL
JRN : base dynamique = NULL
JRN : base de cache = NULL
JRN : AppName = NULL
Assembly appelant : Microsoft.VisualStudio.HostingProcess.Utilities, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a.
===
JRN : cette liaison démarre dans le contexte de chargement de default.
JRN : utilisation du fichier de configuration de l'application : c:\users\User\documents\visual studio 2010\Projects\ConsoleApplication1\ConsoleApplication1\bin\Debug\ConsoleApplication1.vshost.exe.Config
JRN : utilisation du fichier de configuration de l'ordinateur à partir de C:\Windows\Microsoft.NET\Framework\v2.0.50727\config\machine.config.
JRN : référence post-stratégie : AssemblyName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=123456789
JRN : un assembly a été trouvé dans le chemin d'accès DEVOVERRIDE C:\SharedAssemblies\AssemblyName.DLL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:50:59.727

添加注册表项

```
[HKEY_CURRENT_USER\SOFTWARE\Microsoft\.NETFramework\v2.0.50727\AssemblyFoldersEx\DEVPATH]@="C:\SharedAssemblies" 
```

做这项工作。

[MSDN 参考](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.100%29.aspx)

# c# - 使用 C# 在 excel 中创建一个矩形？

> ID：13603360
> 
> 赞同：2
> 
> 时间：2012-11-28T10:54:39.353
> 
> 标签：c#, winforms, excel

这是我的代码：

```
using Excel = Microsoft.Office.Interop.Excel;

Excel.Application xlApp;
Excel.Workbook xlWorkBook;
Excel.Worksheet xlWorkSheet;
xlWorkSheet.Shapes.AddShape(MsoAutoShapeType.msoShapeRectangle, 47, 280, 140, 90);
xlWorkSheet.Shapes.AddTextEffect(MsoPresetTextEffect.msoTextEffect1, "simple text", "Arial", 14, MsoTriState.msoTrue, MsoTriState.msoFalse, 67, 320); 
```

我想在 MS Office 2010 中创建一个格式类似于“彩色轮廓 - 橙色，重音 6”的圆角矩形。有人帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:29:32.207

您可以使用[EPPLUS](http://epplus.codeplex.com/)支持很多形状。

只需将引用添加到您的项目中。

在下面包含以下命名空间和代码片段以添加圆角矩形。

```
using OfficeOpenXml;
using OfficeOpenXml.Style;
using OfficeOpenXml.Drawing;       

FileInfo newFile = new FileInfo(@"C:\ExcelFiles\RoundedRectangle.xlsx");
ExcelPackage pck = new ExcelPackage(newFile);
//Add the Content sheet
var ws = pck.Workbook.Worksheets.Add("MySheet");
ws.View.ShowGridLines = false;
var shape = ws.Drawings.AddShape("Description", eShapeStyle.RoundRect);
shape.SetPosition(0, 5, 5, 5);
shape.SetSize(400, 200);
shape.Text = "Text inside the round rectangle";
shape.Fill.Style = eFillStyle.SolidFill;
shape.Fill.Transparancy = 20;
shape.Border.Fill.Style = eFillStyle.SolidFill;
shape.Border.LineStyle = eLineStyle.LongDash;
shape.Border.Width = 1;
shape.Border.Fill.Color = Color.Black;
shape.Border.LineCap = eLineCap.Round;
shape.TextAnchoring = eTextAnchoringType.Top;
shape.TextVertical = eTextVerticalType.Horizontal;
shape.TextAnchoringControl = false;

pck.Save(); 
```

# python - Python减少解释

> ID：13603361
> 
> 赞同：6
> 
> 时间：2012-11-28T10:54:47.110
> 
> 标签：python, functional-programming, reduce

我无法理解以下代码段：

```
>>> lot = ((1, 2), (3, 4), (5,))
>>> reduce(lambda t1, t2: t1 + t2, lot)
(1, 2, 3, 4, 5) 
```

reduce 函数如何产生 (1,2,3,4,5) 的元组？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T11:01:22.863

如果你把它分解`lambda`成一个函数会更容易，所以会更清楚发生了什么：

```
>>> def do_and_print(t1, t2):
    print 't1 is', t1
    print 't2 is', t2
    return t1+t2

>>> reduce(do_and_print, ((1,2), (3,4), (5,)))
t1 is (1, 2)
t2 is (3, 4)
t1 is (1, 2, 3, 4)
t2 is (5,)
(1, 2, 3, 4, 5) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T12:47:11.797

`reduce()`顺序应用一个函数，链接一个序列的元素：

```
reduce(f, [a,b,c,d], s) 
```

是相同的

```
f(f(f(f(s, a), b), c), d) 
```

等等。在您的情况下，这`f()`是一个 lambda 函数 ( `lambda t1, t2: t1 + t2`)，它只是将它的两个参数相加，所以你最终得到

```
(((s + a) + b) + c) + d 
```

并且因为添加序列的括号没有任何区别，这是

```
s + a + b + c + d 
```

或使用您的实际值

```
(1, 2) + (3, 4) + (5,) 
```

如果`s`未给出，则第一项尚未完成，但通常中性元素用于`s`，因此在您的情况下`()`是正确的：

```
reduce(lambda t1, t2: t1 + t2, lot, ()) 
```

`lot`但是没有它，只有在没有元素（`TypeError: reduce() of empty sequence with no initial value`）的情况下才会遇到麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:58:33.240

> 减少（...）减少（函数，序列[，初始]）->值
> 
> ```
> Apply a function of two arguments cumulatively to the items of a sequence,
> from left to right, so as to reduce the sequence to a single value.
> For example, reduce(lambda x, y: x+y, ((1, 2), (3, 4), (5))) calculates
> (((1+2)+(3+4))+5).  If initial is present, it is placed before the items
> of the sequence in the calculation, and serves as a default when the
> sequence is empty. 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T10:59:12.207

让我们追踪reduce

> 结果 = (1,2) + (3,4)
> 
> 结果 = 结果 + (5, )

请注意，您的归约连接了元组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T11:07:34.500

reduce 接受一个函数和一个迭代器作为参数。该函数必须接受两个参数。

reduce 所做的是它遍历可迭代对象。首先它将前两个值发送到函数。然后它将结果与下一个值一起发送，依此类推。

因此，在您的情况下，它将元组中的第一项和第二项 (1,2) 和 (3,4) 发送到 lambda 函数。该函数将它们加在一起。结果与第三项一起再次发送到 lambda 函数。由于元组中没有其他项目，因此返回结果。

# pyqt - QTableView 中 QLineEdit 的结束编辑信号

> ID：13603368
> 
> 赞同：-1
> 
> 时间：2012-11-28T10:55:00.070
> 
> 标签：pyqt

几天来我一直面临一个问题。我正在使用 QTableView 来显示模型中的数据。当用户单击单元格时，我激活了完整的行选择，以使界面用户友好：self.tableau.selectRow(element.row())

但是，当用户按 F2 时，我只想编辑第 1 列。因此，预期的行为是：

*   如果我选择了第 4 列，则此列不可编辑
*   如果在选择第 4 列时按 F2，则编辑第 1 列

但是随着完整的行选择，F2 无法知道选择了哪个单元格。所以，我重新实现了事件处理程序：

```
def keyPressEvent(self, e):
    """It reimplements event management in this method """

    # TODO: find a way to re-select the cell after editing

    # We get the name of current file
    nom_courant = self.tableau.model().index(self.row_selected, 1).data()
    print(nom_courant)

    if e.key() == QtCore.Qt.Key_F2:

        try:
            # We edit the cell name of the selected line
            #http://stackoverflow.com/questions/8157688/specifying-an-index-in-qtableview-with-pyqt
            self.tableau.edit(self.tableau.model().index(self.row_selected, 1))
        except:
            print("Pas de cell sélectionnée")
            pass

    # It retrieves the new file name. CAN NOT do in the
    # if the model is not updated yet.
    nouveau_nom = self.tableau.model().index(self.row_selected, 1).data()
    print(nouveau_nom)

    # Call the fct renaming only if the name has changed
    if nom_courant != nouveau_nom:
        #liste.renameFile(self.current_video, self.tableau.model().index(self.row_selected, 1).data())
        print("entropie") 
```

现在的问题是这一行：

```
self.tableau.edit(self.tableau.model().index(self.row_selected, 1)) 
```

我无法检测到生成的 QLineEdit 版本的结束，我需要它来对编辑的单元格的新内容执行操作，因为如果没有发生键盘事件，则 nouveau_nom 不会更新。

您对如何获得最终版本信号有任何想法吗？

（请原谅我的英语，我是法国人……）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:31:14.520

首先，您不需要实际截取单元格选择并将其更改为行选择。您可以在视图上[设置行为：](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qabstractitemview.html#setSelectionBehavior)

```
self.tableau.setSelectionBehavior(self.tableau.SelectRows) 
```

这将自动选择行。

当您在表中使用自定义 QLineEdit 小部件时，您需要将[QLineEdit.editingFinished()](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qlineedit.html#editingFinished)连接到您想要的任何处理程序。您很可能希望它调用`dataChanged`您的模型。

# c++ - 在 VC++ MFC 中创建另一个鼠标光标

> ID：13603369
> 
> 赞同：1
> 
> 时间：2012-11-28T10:54:59.683
> 
> 标签：c++, visual-c++, mfc

我遇到了一个问题。基本上在我的项目中有两个窗口。当满足一定条件时，我需要同时在两个窗口上同时进行操作。最初，我曾经这样做过首先在第一个窗口上执行操作，然后在第二个窗口上执行操作，结果是这两个操作之间存在延迟，因为它必须同时发生相同的移动而没有延迟..

所以我想创建另一个鼠标光标..我的意思是一个原始鼠标光标和另一个以编程方式创建的光标，所以当条件满足时，原始光标可以在第一个窗口上操作并且以编程方式创建的可以在第二个窗口上操作..这两个操作可以同时发生同时..请任何人指导/建议我是否可以创建另一个光标？如果是这样，请建议我...如果不是，请给我任何想法如何完成此任务..

谢谢你们..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:34:22.387

不，你不能有两个游标。

如果您只是移动窗口，请尝试[DeferWindowPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632681%28v=vs.85%29.aspx)；否则你可以尝试使用[SetRedraw](http://msdn.microsoft.com/en-us/library/btaacw58%28v=vs.80%29.aspx)。然后至少它们*看起来*好像同时在移动/变化......

# http - Erlang：将 HTTP GET 参数转换为 Unicode

> ID：13603371
> 
> 赞同：2
> 
> 时间：2012-11-28T10:55:05.300
> 
> 标签：http, unicode, encoding, erlang, request

我在 Erlang 上使用连接器。它从 Javascript 中获取请求，例如“controler?q=value”。如果我发送 Unicode 值，浏览器会发送一个编码字符串。

```
http://127.0.0.1:8001/controler?q=%D1%82%D0%B5%D1%81%D1%82 
```

如何将此字符串转换为 UTF-8？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:19:29.863

我前段时间写了一个类似目的的模块：[https](https://gist.github.com/816291) ://gist.github.com/816291 你可以像这样使用它：

```
io:format("~ts~n",[uri:decode_uri_component("%D1%82%D0%B5%D1%81%D1%82")]).
тест
ok 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:15:46.863

您可能想看看[unicode](http://www.erlang.org/doc/apps/stdlib/unicode_usage.html) [模块](http://www.erlang.org/doc/man/unicode.html)。

# php - 插入到.....选择从

> ID：13603374
> 
> 赞同：3
> 
> 时间：2012-11-28T10:55:26.737
> 
> 标签：php, codeigniter, insert-select

我想把它`calory`作为第一个值`fruits`，我做不到，有人可以帮忙吗？

```
 $sql = 'INSERT INTO fruits VALUES('', ?, ?, ?)'
          SELECT calory
          FROM diet
          WHERE fruit = ?
         ';

   $this->db->query($sql, array($a, $b, $c, $d)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T11:02:53.960

正确的语法是：

```
INSERT INTO "table1" ("column1", "column2", ...)
SELECT "column3", "column4", ...
FROM "table2" 
```

在您的情况下，这应该是：

```
INSERT INTO fruits (calory)
SELECT calory
FROM diet
WHERE fruit = ? 
```

（如果“卡路里”是“水果”表中列的名称）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:03:59.087

当您对值使用占位符时（在您的情况下是问号），您需要使用 ->prepare() 而不是 ->query()。此外，您的 SQL 语法完全错误。我猜我认为你的查询应该是这样的......

```
$sql = "INSERT INTO fruits VALUES('', ?, ?, ?) WHERE fruit = ?"; // Create query string.

$sth = $this->db->prepare($sql); // Prepare the query.
$sth->bindValue(1,$a); // Bind question marks to values
$sth->bindValue(2,$b); // (I am assuming that a,b,c,d are in
$sth->bindValue(3,$c); // the correct order...
$sth->bindValue(4,$d);
$sth->execute(); // Execute the query to insert the data. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:58:28.213

您不能在一个查询中`INSERT ... SELECT`混淆。只需在语句`INSERT ... VALUES`中选择其他值作为常量，就可以了：`SELECT`

```
INSERT INTO fruits
  SELECT calory, ?, ?, ?
  FROM diet
  WHERE fruit = ? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:58:35.017

这

```
INSERT INTO fruits SELECT calory, ?, ?, ? FROM diet WHERE fruit = ? 
```

应该这样做...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T11:00:00.553

您的意思是您需要将选择查询的答案放入插入查询中，请试试这个

```
$sql = 'INSERT INTO fruits VALUES('(SELECT calory
      FROM diet
      WHERE fruit = ?)', ?, ?, ?)'

     '; 
```

# javascript - 限制空格键值在没有输入其他字符值时传输

> ID：13603377
> 
> 赞同：0
> 
> 时间：2012-11-28T10:55:33.820
> 
> 标签：javascript, jquery, asp.net

在我的聊天应用程序项目中，我试图在用户刚刚按下`Space`然后`Enter`. 按下`Enter`会将输入的文本显示为`div`. 请查看代码中的注释以清楚地理解。

```
#txtmsg --> ID of TextBox field 
```

* * *

```
$('#txtmsg').keypress(function (e)
{
    if (e.which == 13) 
    {
        //Disable default function of Enter key
        e.preventDefault(); 
        //Checks whether the user has entered any value or not
        if ($('#txtmsg').val().length > 0)  
        {
          //if(user has not entered only spaces....)?

           //transfers the entered value in the text field to div
            chat.server.send($('#txtmsg').val());
            $('#txtmsg').val('');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:59:40.387

请参阅[http://api.jquery.com/jQuery.trim/](http://api.jquery.com/jQuery.trim/)：

```
if($.trim($('#txtmsg').val()) !== "") { ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:00:03.367

检查将是：

```
var message = $('#txtmsg').val(); //cache the message
if(message.replace(/\s/g, "").length !== 0) { //if the message has something other than spaces
    //send the message
} 
```

注意`/\s/`匹配各种空白字符；`tabs`, `spaces`, 换行符，（其他奇怪的空格字符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:00:27.050

尝试：

```
if ($('#txtmsg').val().length > 0 && /^\s+$/.test($('#txtmsg').val()) === false) {
...
} 
```

# telnet - 从 telnet 调用 Bitkeeper 命令

> ID：13603379
> 
> 赞同：1
> 
> 时间：2012-11-28T10:55:45.033
> 
> 标签：telnet, bitkeeper

我在构建机器 1 中调用 perl 脚本以连接到构建机器 2 并在构建机器 2 中调用 perl 脚本。我使用的模块是 Net::Telnet。

最近我在Build machine 2中升级了我的bitkeeper。从那以后我在后台得到了Bitkeeper的许可协议表格。所以我的脚本就像暂停一样好，直到我从任务管理器中终止提示的进程。

如果我终止该进程，bitkeeper clone 命令将失败，因此我的整个构建将失败。我不能把这个鬼鬼祟祟的 bkgui.exe 进程带到前面并一劳永逸地接受许可协议。

你能帮我解决这个问题吗？

观察：

1.  当我在构建机器 2 中打开命令提示符并调用从 telnet 调用的相同脚本时，我没有收到许可证错误。
2.  我在构建机器 2 中运行的脚本中运行了“whoami”命令，发现它是管理员。
3.  'C:\WINDOWS\system32\tlntsvr.exe' 正在运行，用户是 'NT AUTHORITY\SYSTEM'。
4.  当我从 buildmachine 1 的命令行调用 telnet 并在 buildmachine 2 中调用脚本时，即使这样 bk 命令也会成功执行。

我想从构建机器 1 在构建机器 2 中运行我的 bitkeeper 命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:58:46.757

你可以试试这个`bk legal -pT`命令。看`bk help legal`用法。

# android - JSON解析异常

> ID：13603380
> 
> 赞同：0
> 
> 时间：2012-11-28T10:55:47.030
> 
> 标签：android, json

我的网址是 .php 格式：主机名/文件名/topstory.php

在解析时，我收到以下错误......

```
11-28 09:47:57.603: E/class com.example.jsonexample.AndroidJSONActivity(749): Failed to download file
11-28 09:47:57.603: W/System.err(749): org.json.JSONException: End of input at character 0 of 
11-28 09:47:57.638: W/System.err(749):  at org.json.JSONTokener.syntaxError(JSONTokener.java:446)
    11-28 09:47:57.638: W/System.err(749):  at org.json.JSONTokener.nextValue(JSONTokener.java:93)
    11-28 09:47:57.654: W/System.err(749):  at org.json.JSONArray.<init>(JSONArray.java:87)
    11-28 09:47:57.654: W/System.err(749):  at org.json.JSONArray.<init>(JSONArray.java:103)
    11-28 09:47:57.667: W/System.err(749):  at com.example.jsonexample.AndroidJSONActivity.onCreate(AndroidJSONActivity.java:34)
    11-28 09:47:57.673: W/System.err(749):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    11-28 09:47:57.673: W/System.err(749):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    11-28 09:47:57.673: W/System.err(749):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    11-28 09:47:57.673: W/System.err(749):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    11-28 09:47:57.683: W/System.err(749):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    11-28 09:47:57.683: W/System.err(749):  at android.os.Handler.dispatchMessage(Handler.java:99)
    11-28 09:47:57.683: W/System.err(749):  at android.os.Looper.loop(Looper.java:123)
    11-28 09:47:57.698: W/System.err(749):  at android.app.ActivityThread.main(ActivityThread.java:4627)
    11-28 09:47:57.698: W/System.err(749):  at java.lang.reflect.Method.invokeNative(Native Method)
    11-28 09:47:57.698: W/System.err(749):  at java.lang.reflect.Method.invoke(Method.java:521)
    11-28 09:47:57.698: W/System.err(749):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    11-28 09:47:57.698: W/System.err(749):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    11-28 09:47:57.698: W/System.err(749): 
```

这是我的代码：

```
public class AndroidJSONActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Toast.makeText(getApplicationContext(),"sdasdsadsa231",2100).show();
        String readTwitterFeed = readTwitterFeed();

        try {
            JSONArray jsonArray = new JSONArray(readTwitterFeed);
            Log.i(AndroidJSONActivity.class.getName(),
                "Number of entries " + jsonArray.length());
            for (int i = 0; i < jsonArray.length(); i++) {
              JSONObject jsonObject = jsonArray.getJSONObject(i);
              Log.i(AndroidJSONActivity.class.getName(), jsonObject.getString("text"));
            }
          } catch (Exception e) {
            e.printStackTrace();
          }

    }

    private String readTwitterFeed() {
        Toast.makeText(getApplicationContext(),"sdasdsadsa231",3100).show();
         StringBuilder builder = new StringBuilder();
            HttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet("....../video.php");

            try {

              HttpResponse response = client.execute(httpGet);

              StatusLine statusLine = response.getStatusLine();
              int statusCode = statusLine.getStatusCode();

              if (statusCode == 200) {
                Toast.makeText(getApplicationContext(),"sdasdsadsa",4000).show();
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                  builder.append(line);
                }
              } else {
                Log.e(AndroidJSONActivity.class.toString(), "Failed to download file");
              }
            } catch (ClientProtocolException e) {
              e.printStackTrace();
              Toast.makeText(getApplicationContext(),"sdasdsa323424326a",4000).show();
            } catch (IOException e) {
                Toast.makeText(getApplicationContext(),"sdasdsa323424326a",4000).show();
              e.printStackTrace();
            }
            return builder.toString();
    }
} 
```

我的档案...

```
{"view":"topstory","content":[{"story_id":"128","title":"testuser2","story_description":"

testuser2<\/p>","story_video_file":"","story_video_link":"","images":.. 
```

请观察文件，它在数据之间有一个行间距（之后

故事描述“：”），

那个空间有什么问题吗..请建议我解决这个问题....

# .net - 为什么我的所有设置都没有在 user.config 文件中？

> ID：13603390
> 
> 赞同：0
> 
> 时间：2012-11-28T10:56:00.973
> 
> 标签：.net, configuration, app-config

我正在编写一个可以编辑一些用户设置的应用程序，这些设置是我在 Settings.settings 中定义的。运行应用程序后，我可以看到在以下位置找到应用程序的数据存储：

C:\Users\\AppData\Local\\\ 但该文件似乎只有我以编程方式编写的选项，而不是我设置为默认值的选项。

所有设置都是用户设置而不是应用程序设置，它们似乎是从某个地方获取的。

他们还能在哪里？

我注意到有两个产品文件夹的名称后附有哈希值，一个是 .exe_Url_ 格式，另一个是 .vshost.exe_Url_ 格式，但它们都没有丢失的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:19:13.163

仍为默认设置的设置和全局设置位于应用程序的配置文件中，该文件与可执行文件位于同一文件夹中。

# cryptography - PEM，DER，X509，ASN.1，哦，我的。从哪儿开始？

> ID：13603397
> 
> 赞同：0
> 
> 时间：2012-11-28T10:56:12.460
> 
> 标签：cryptography, certificate, x509, asn.1

我试图了解密码学的世界，因为它每天都在实际使用。我发现很难开始立足，而且我想知道是否有人有一些很好的资源来解释假设我一无所知的事情。

例如，我有（我相信，由于理解有限）一个带有 X509 证书和“SignatureValue”属性的文件。我认为这些是用 SHA256 编码的。但是，我想确切地了解我在看什么，因为我需要提供一个“时间戳响应文件”，其中包含一个时间戳权威消息的 DER 表示。

到目前为止我有点掌握的东西：

*   SHA256 是一种散列算法。单程？
*   X509 是一个文档，它定义了证书（无论是什么）的外观
*   ASN.1 是一组系统间传输数据的方式？
*   DER 是一种以二进制/八进制位表示数据的方式。

我想要这个生态系统的鸟瞰图，以便我对这个谜题如何组合在一起有一些概念，然后我可以更好地深入研究 How-Things-Work 的本质。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:29:01.787

阅读大量书籍将花费大量时间。恕我直言，更快的方法是浏览维基百科并阅读以下内容：

*   哈希算法（简而言之，它将长文本/数据转换为固定大小的值，哈希，它（几乎）唯一代表这个长文本。而且，是的，它是单向的。

*   签名算法 - 从哈希值计算一些东西，称为“签名”。主要思想是只有当您拥有密钥时才能计算出正确的签名。而且，这个签名可以用公钥来验证。公钥在人们之间共享，因此他们可以验证您的签名。

因此，有效的签名证明文本/数据没有被其他人更改。

*   证书：这是数据块，它将用户的公钥绑定到有关此密钥的信息：所有者的姓名、电子邮件、地址等。证书通常由权威机构签署（根证书）——因此，如果您信任权威机构，您应该相信该证书正确地代表了一个人。

*   时间戳：这是签名，由人们信任的某个权威机构制作，它将时间标记绑定到签名，在其他文件上制作。因此，这将证明该签名（以及该文档）在当时是正确的。这是必需的，因为有时证书可能会被吊销或过期，如果没有时间戳，您将不知道这是否是正确的签名，因为您不知道它是何时创建的。

*   ASN.1 - 抽象语法符号，它定义了描述某些数据结构格式的文本规则。它用于大多数密码学标准。

*   DER 编码（可区分编码规则）：一组如何将 ASN.1 对象/记录编码为二进制数据的规则。还有 BER（基本编码规则），它的作用几乎相同，但它允许对相同的值进行不同的编码（如 BOOL 可以用任何非零值编码），由于相同的消息，它不能用于密码学可以用不同的方式编码，产生不同的哈希值。
*   X.509：关于公钥证书格式（ASN.1）的标准。

希望这有助于了解发生了什么:)

实际上，市场上有许多密码库，它们实现了所有这些时间戳/x.509/签名/验证等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:08:13.147

每次开发人员必须做一些“更深”的加密工作时，我都很难过。我知道他们在想“他可以编写代码，加密只是一种使某些东西安全的代码，他可以做到”，男孩，这是错误的。如果没有可靠或几乎可靠的安全背景，加密黑客（编写自己的代码）将会失败。

我建议你学习它，非常努力，因为如果你做对了，它会没问题，但如果失败并且引入了一些漏洞，你的聊天就不会那么愉快了。所以我会建议初学者：

*   [开始-密码学-Java](https://rads.stackoverflow.com/amzn/click/com/0764596330) - 即使你不是 Java 人一些第一章
*   [应用密码学手册](http://cacr.uwaterloo.ca/hac/)
*   [应用密码学](https://rads.stackoverflow.com/amzn/click/com/0471117099)
*   [安全工程](http://www.cl.cam.ac.uk/~rja14/book.html)

在这些之后，你会很坚定地认为加密是要避免的，只有在极其谨慎的情况下才能使用，并且只有在它不会引入更多可以解决的问题时才使用。

关于您的问题：

*   SHA25 - 是一种加密安全的单向哈希函数，可产生 256 位输出
*   X509 - 描述数字证书的格式
*   DER 和 PEM 是证书编码的形式

我的最后一个要求是，你不应该仅仅停留在“我想我明白了”的高层次观点上，深入挖掘并尝试真正理解什么是安全的，什么是不安全的。

# android - 来电广播接收器不工作（Android 4.1）

> ID：13603400
> 
> 赞同：5
> 
> 时间：2012-11-28T10:56:15.210
> 
> 标签：android, broadcastreceiver

我正在尝试接听来电广播，但它不起作用。

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.test.bgPicture"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk android:minSdkVersion="9" />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />  
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />

<uses-feature
    android:name="android.hardware.camera"
    android:required="false" />
<uses-feature
    android:name="android.hardware.camera.front"
    android:required="false" />

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
    <receiver android:name=".PhoneStateBroadcastReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
    </receiver>
</application> 
```

这是我的广播接收器

```
package com.test.bgPicture;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;

public class PhoneStateBroadcastReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {

        TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.listen(new CustomPhoneStateListener(context), PhoneStateListener.LISTEN_CALL_STATE);
    }
} 
```

还有听者..

```
package com.test.bgPicture;

import android.content.Context;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.widget.Toast;

public class CustomPhoneStateListener extends PhoneStateListener {

//private static final String TAG = "PhoneStateChanged";
Context context; //Context to make Toast if required 
public CustomPhoneStateListener(Context context) {
    super();
    this.context = context;
}

@Override
public void onCallStateChanged(int state, String incomingNumber) {
    super.onCallStateChanged(state, incomingNumber);

    switch (state) {
    case TelephonyManager.CALL_STATE_IDLE:
        //when Idle i.e no call
        Toast.makeText(context, "Phone state Idle", Toast.LENGTH_LONG).show();
        break;
    case TelephonyManager.CALL_STATE_OFFHOOK:
        //when Off hook i.e in call
        //Make intent and start your service here
        Toast.makeText(context, "Phone state Off hook", Toast.LENGTH_LONG).show();
        break;
    case TelephonyManager.CALL_STATE_RINGING:
        //when Ringing
        Toast.makeText(context, "Phone state Ringing", Toast.LENGTH_LONG).show();
        break;
    default:
        break;
    }
}
} 
```

但是没有显示敬酒，有什么想法吗？

编辑：我刚刚用另一部带有 android 2.3.6 的手机试了一下，它在那里工作，但在第一台设备（android 4.1）上它不起作用。为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T08:05:47.503

我发现了问题，您必须在广播接收器从 android 3.0 开始工作之前从您的应用程序手动启动一个活动。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-27T13:08:21.033

您是否尝试过在服务中添加广播接收器？即使应用程序关闭/最小化，服务也应保持活动状态。 [检查此链接](https://stackoverflow.com/questions/9092134/broadcast-receiver-within-a-service)

# ruby-on-rails - 没有与自定义路线匹配的路线

> ID：13603404
> 
> 赞同：1
> 
> 时间：2012-11-28T10:56:28.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在为我的用户配置文件配置一个名为 profile.html.erb 的自定义页面

我有一个

```
No route matches {:action=>"profile", :controller=>"users"} 
```

在路线中，我有：

```
resources :users do
  member do
    get :profile
  end
end 
```

我的 users_controller.rb

```
def profile
  @user = User.find(params[:id])
  render 'profile'
end 
```

此行发生错误：

```
<li><%= link_to "Profile", profile_user_path %></li> 
```

我的耙子路线

```
profile_user GET    /users/:id/profile(.:format)   users#profile 
```

profile.html.erb 正在工作，因为我可以访问

```
http://localhost:3000/users/1/profile 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:58:53.613

由于这是会员路线，因此您需要提供会员。

`<li><%= link_to "Profile", profile_user_path(@user) %></li>`

只是在做

`<li><%= link_to "Profile", profile_user_path %></li>`不给用户将是一个集合的路线。

# c# - C# 等效于 PHP file_put_contents

> ID：13603415
> 
> 赞同：2
> 
> 时间：2012-11-28T10:56:58.043
> 
> 标签：c#, php

我正在将 PHP 文件转换为 C#，完成 75%，卡在这些行中

```
if(file_put_contents($uploaddir.$randomName, $decodedData)) {
    //echo $randomName.":uploaded successfully"; //NO NEED TO CONVERT ECHO PART
} 
```

PHP兄弟请帮忙

**更多信息**

我转换***了这个***

```
// Encode it correctly
$encodedData = str_replace(' ','+',$data[1]);
$decodedData = base64_decode($encodedData); 
```

***对此***

```
// Encode it correctly
string encodedData = data[1].Replace(' ', '+');
string decodedData = base64Decode(encodedData); 
```

其中 base64Decode***是***

```
public static string base64Decode(string data)
{
    byte[] binary = Convert.FromBase64String(data);
    return Encoding.Default.GetString(binary);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T11:10:50.113

试试这个：

```
System.IO.File.WriteAllText (uploaddir + randomname, decodedData); 
```

有关该方法的详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.io.file.writealltext.aspx)`WriteAllText`。

但是，您将数据转换为字节数组，然后在`base64Decode`方法中将其转换为字符串，然后将其写入文件的方法有点太复杂了 IMO。您可以将字节数组写入文件，像这样解码数据：

```
public static byte[] base64Decode(string data)
{
    return Convert.FromBase64String(data);
} 
```

然后打电话

```
byte[] decodedData = base64Decode(encodedData);
System.IO.File.WriteAllBytes(uploaddir + randomname, decodedData); 
```

WriteAllBytes 文档[在这里](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:09:13.523

最接近的类比可能是[System.IO.File.WriteAllText](http://msdn.microsoft.com/en-us/library/ms143376.aspx)

```
string uploaddir;
string randomName;
string decodedData;
// ....
System.IO.File.WriteAllText(
  System.IO.Path.Combine(uploaddir, randomName),
  decodedData
); 
```

# bash - linux bash 脚本：将日期/时间变量设置为自动更新（用于包含在文件名中）

> ID：13603420
> 
> 赞同：2
> 
> 时间：2012-11-28T10:57:06.573
> 
> 标签：bash, variables, date, time, auto-update

本质上，我有一个文件命名约定的标准格式。它分解为：

```
target_dateUTC_timeUTC_tool 
```

因此，例如，如果我在 'foo' 的目标上运行 tcpdump，那么文件将是`foo_dateUTC_timeUTC_tcpdump`. 很简单，但是每个人不断（并且始终如一地）输入都很痛苦......所以我尝试创建一个 bash 脚本来设置系统变量，如下所示：

```
FILENAME=$TARGET\_$UTCTIME\_$TOOL 
```

然后，我可以在运行时调用该变量，如下所示：

```
tcpdump -w $FILENAME.lpc 
```

所有这些都像冠军一样工作。我有一个菜单驱动的 .sh，它为用户提供了查看当前变量以及设置它们的选项……文件生成轻而易举。不幸的是，通过设置日期/时间变量，它被锁定为创建时的值（自然）。我像这样设置变量：

```
UTCTIME=$(/bin/date --utc +"%Y%m%d_%H%M%Z") 
```

我真正需要的是一种创建在运行时更新的变量的方法，或者（更有可能）另一种给这只猫皮肤的方法。

在寻找解决方案时，我遇到了类似的问题......就像[这样](https://stackoverflow.com/questions/11113548/how-to-define-a-auto-update-date-variable-in-bash)。

但是，老实说，我对如何结合这两种方法并创建一个简单的、可分发的解决方案感到困惑。

.sh 文件通过 pastebin 发布，[在这里](http://pastebin.com/G7hic45J)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:52:27.650

使用一个函数：

```
generate_filename() { echo "${1}_$(/bin/date --utc +"%Y%m%d_%H%M%Z")_$2"; } 
```

并像这样使用它：

```
tcpdump -w "$(generate_filename foo tcpdump).lpc" 
```

很难获得自动确定命令名称的功能。您可以使用 bash 历史记录来获取它并保存几个字符输入：

```
tcpdump -w "$(generate_filename foo !#:0).lpc" 
```

# sql - 对于哪种类型的网络数据库，'0'or'0'='0' 在登录页面上用作密码？

> ID：13603422
> 
> 赞同：-3
> 
> 时间：2012-11-28T10:57:15.937
> 
> 标签：sql, code-injection

如何找到易受攻击的站点，可以使用 '0'or'0'='0' 和其他组合登录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:58:42.647

我相信您是在参考**[SQL injection](http://en.wikipedia.org/wiki/SQL_injection)**提出问题。如果登录控件使用基于字符串连接的查询，那么这很可能会成功登录。

它应该是：`' or '0'='0`

# javascript - 检索由 javascript 填充的下拉列表中的值

> ID：13603427
> 
> 赞同：0
> 
> 时间：2012-11-28T10:57:25.523
> 
> 标签：javascript, forms, asp-classic, web

嗨，我在电子邮件 Web 表单上有一个下拉字段，该字段由后面的代码 (JavaScript) 填充。下拉菜单效果很好，但是当提交表单时，用户选择的值不会被检索并显示在电子邮件中，其他文本框值都被拾取，但不是下拉列表。我知道这可能与 JavaScript 作为客户端有关，但不知道如何解决这个问题。我正在使用经典的 asp 使用 'Request.Form("dropdown")' 发送表单

我知道必须有一个简单的解决方案，但我的编程技能有限

谢谢R

# iphone - UTC 和本地日期时间转换

> ID：13603429
> 
> 赞同：0
> 
> 时间：2012-11-28T10:57:33.440
> 
> 标签：iphone, objective-c, ios

服务器给出 UTC 格式的日期和时间。

```
2012-11-28T10:32:15+01:00 
```

UTC 将被格式化为：`2012-11-28 10:32:15` 当前实际的本地日期和时间是`2012-11-28 11:32:15`

我想将 utc 格式保存在数据库中，稍后在 UI 中显示之前将其转换为用户的本地日期和时间。我写了以下代码。但时间偏移是错误的。即使时间偏移量为 + 1 小时，它也会在 UTC 时间上增加 2 小时而不是 1 小时。

```
NSDateFormatter *utc = [[NSDateFormatter alloc] init];
[utc setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
[utc setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate *dtUTC = [utc dateFromString:@"2012-11-28 10:32:15"];

double i =[[NSTimeZone systemTimeZone] secondsFromGMTForDate:[NSDate date ]];

NSDateFormatter *dfLocal = [[NSDateFormatter alloc] init];
[dfLocal setDateFormat:@"yy-MM-dd HH:mm:ss"];
[dfLocal setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:i]];
NSDate *localDateTime= [dtUTC dateByAddingTimeInterval:i];
NSString *time =[dfLocal stringFromDate:localDateTime];
NSLog(@"original UTC %@  now local: %@", dtUTC, time); 
```

和日志：

```
time offset : 1.000000
original UTC 2012-11-28 10:32:15 +0000  now local: 12-11-28 12:32:15 
```

它应该是`2012-11-28 11:32:15`但给出 `2012-11-28 12:32:15` 了我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:09:55.277

好的，现在发布问题后。我找到了解决方案。它的神奇！

```
NSDateFormatter *utc = [[NSDateFormatter alloc] init];
[utc setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
[utc setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate *dtUTC = [utc dateFromString:@"2012-11-28 10:32:15"];

NSDateFormatter *dfLocal = [[NSDateFormatter alloc] init];
[dfLocal setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
[dfLocal setTimeZone:[NSTimeZone localTimeZone]];

NSString *time =[dfLocal stringFromDate:dtUTC];
NSLog(@"original UTC %@  now local: %@", dtUTC, time); 
```

和日志：

```
time offset : 1.000000
original UTC 2012-11-28 10:32:15 +0000  now local: **2012-11-28 11:32:15** 
```

谢谢大家帮忙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:01:15.547

更改此行

```
[dfLocal setDateFormat:@"yy-MM-dd HH:mm:ss"]; 
```

并将其替换为

```
 [dfLocal setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
```

快乐编码.!!!!!!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:08:10.653

也试试这个代码..

```
NSTimeZone* currentTimeZone = [NSTimeZone localTimeZone];
NSTimeZone* utcTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"UTC"];

NSDate *dtUTC = [utc dateFromString:@"2012-11-28 10:32:15"];

NSInteger currentGMTOffset = [currentTimeZone secondsFromGMTForDate:sourceDate];
NSInteger gmtOffset = [utcTimeZone secondsFromGMTForDate:sourceDate];
NSTimeInterval gmtInterval = gmtOffset - currentGMTOffset;

NSDateFormatter *dfLocal = [[NSDateFormatter alloc] init];
[dfLocal setDateFormat:@"yy-MM-dd HH:mm:ss"];
NSDate* localDateTime = [[[NSDate alloc] initWithTimeInterval:gmtInterval sinceDate:dtUTC] autorelease];
NSString *time =[dfLocal stringFromDate:localDateTime];
NSLog(@"original UTC %@  now local: %@", dtUTC, time); 
```

我希望这可以帮助你...

# php - 具有 2048 位和盐的哈希算法

> ID：13603437
> 
> 赞同：0
> 
> 时间：2012-11-28T10:57:55.243
> 
> 标签：php, security, hash, salt

如何使用 PHP 实现一个算法，用于存储和比较 2048 位密码的哈希值以及随机盐的密码？

**编辑1：**

我想我的问题不够清楚。我的意思是我不会制作我的加密算法。但是如何存储密码和盐。作为每个密码的随机盐。好吧，将盐与密码一起存储在数据库中是不明智的。

**编辑2：**

那将是一个好方法吗？

1）用户输入他们的密码，
2）系统生成密码的哈希值，
3）系统为此盐生成密码（我使用时间（）？）

作为随机盐，如何以及在哪里将盐存储到密码中？拜托，我不想将盐与密码一起存储，因为我认为这不太确定。

因此，在用户登录时存储密码和相同的盐之后，我得到与盐一起存储的密码哈希，并将其与保存的盐提供的密码的哈希进行比较。

在哪里保存盐？这将是一个很好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T11:46:00.707

> “嗯，将盐与密码一起存储在数据库中是不明智的。”
> 
> “因为如果我的数据库遭到破坏并且有人可以访问这些数据，那么每个密码都会包含每个密码的盐。这是不正确的。好吧，我认为使用盐并将其提供给我是没有意义的暴力破解密码。因为它是正确的？

这些核心假设是错误的。盐的重点是为每个密码添加一个唯一元素，这样两个相同的密码就不会散列到相同的散列值。盐不是秘密。我再说一遍：**盐不是秘密。**秘密是*密码*，盐只是增加了唯一性。攻击者必须通过尝试所有可能的字符组合并将结果与​​哈希值进行比较来暴力破解密码。如果他也知道盐，他仍然必须这样做。

如果攻击者成功地暴力破解密码“foobar”而不加盐，他就暴力破解了*每个*密码“foobar”。如果你添加一个唯一的盐并且攻击者成功地暴力破解密码“foobar”+盐，他只暴力破解了那个密码。他将不得不分别攻击每个其他密码“foobar”，因为它们都散列到不同的值，这要归功于唯一的盐。

*这*就是盐的意义所在。是的，如果你也能将盐保密，那就更好了，因为那样的话，攻击者将不得不对一个值进行多次暴力破解。但这是不可行的，因为*您还*需要访问盐来确认密码。如果您需要访问散列和盐，那么有权访问散列的攻击者也可能对盐具有相同的访问权限。如果攻击者可以访问盐，它也不会*降低安全性。*

# asp.net - 以漂亮的布局显示记录

> ID：13603438
> 
> 赞同：0
> 
> 时间：2012-11-28T10:57:56.473
> 
> 标签：asp.net, html, css, sql-server-2008

我有一个数据库，我想在格式良好的 ASP.NET 中使用 HTML 显示 2 条记录

每条记录在网页上看起来像这样

![在此处输入图像描述](../Images/2b18af0784b391b4fb290346564bd735.png)

布局将是层。数据位于 SQL Server 2008 r2 数据库中。

现在什么是获取数据以填充每条记录的最佳方式。

中继器？还是另一种方法？

敬茶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:06:34.833

转发器控件是一个易于使用的控件，可确保您的数据对于给定数据源中的所有条目显示相同。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:13:38.243

这看起来像一个模板，并且每个条目都将遵循相同的 html，因此最好使用中继器，因为您将更好地控制 html、css 和 placemnet 部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:49:11.300

是的，中继器是在这种情况下使用的最佳选择，或者您可以在页面后面的代码上生成整个 html 并将其分配给文字控件。

# java - java中的合法主方法签名

> ID：13603445
> 
> 赞同：8
> 
> 时间：2012-11-28T10:58:21.507
> 
> 标签：java, main, signature, main-method

```
class NewClass{
public static void main(String a){
    System.out.print("Hello");
}
} 
```

当我尝试执行上面的代码时，它会显示一个错误，**找不到主要方法**。但是当我更改**`public static void main(String a)`**为**`public static void main(String... a)`**or时**`public static void main(String a[])`**。然后，它工作..!!

所以，我的问题是我们可以用多少**种不同的方式编写合法的主方法签名**以及这个签名**`public static void main(String... a)`**意味着什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T11:00:56.577

仅仅因为这是Java的要求。

程序的主方法/入口点**必须**是声明为`public static void main(String[] args)`. 您使用参数声明的方法`String`相似但不兼容。

数组与单个字符串不同 - 如果有人使用三个命令行参数调用 Java，JVM 将创建一个三元素字符串数组，然后它将如何将其传递给只接受单个字符串的方法？

因此，在这种情况下，您试图基于一个*没有 main 方法*作为入口点的类来启动 Java 程序。

（之所以`String...`有效，是因为这是数组参数的语法糖，并编译为具有相同签名的方法。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T08:54:26.167

**最后，我在Sun Certified Programmer for Java 6**一书中找到了我的问题的答案。

> 第一个问题是，使用 main 方法有多少种不同的合法方式？

**合法的主要方法签名是**

```
public static void main(String a[])
public static void main(String[] a)
public static void main(String... a) 
```

> 是什么**`(String... a)`**意思？？

要使用`var-args`参数声明方法，我们需要跟上一个**`ellipsis(...)`**then use 空格，然后是保存接收到的参数的数组的名称。因此，上述术语称为**变量参数**，这意味着**0 到 many**。

并且，使用可变参数参数的规则是，**必须是方法签名中的最后一个参数，并且方法中只能有一个 var-args**。

例如：

```
void myfunc(String... a)              //legal
void myfunc(String a...)              //illegal
void myfunc(String a,int... b)         //legal
void myfunc(String... a,int b)        //illegal 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T11:00:47.967

它在java中的默认值。java 编译器需要一个命令行参数数组。这就是为什么您需要指定字符串 args[] 或 String...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-06T19:39:33.713

public static void main(String... a) --> 是一个带有变量参数列表的方法，它在内部（在方法中）被视为一个数组。

合法的主要方法签名：

`public static void main(String a[])`

`static public void main(String a[])`

`public static void main(String[] a)`

`static public void main(String[] a)`

`public static void main(String... a)`

`static public void main(String... a)`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-03T19:12:14.767

所有这些都是 Java 中 main 函数的有效/合法声明。

```
public static void main(String[] args) {
    // code
}

static public void main(String[] args) {
    // code
}

static public void main(String args[]) {
    // code
}

public static void main(String[] MarkElliotZuckerberg) {
    // code
}

public static void main(String... NewYork) {
    // code
} 
```

要记住的要点是——

*   关键字 public 和 static 是可以互换的，但是是必须的。
*   main 方法的参数可以采用 var-args 语法。
*   这个名字可以是任何东西..！

只是为了练习.. :P ...这些是无效的主要方法声明的例子 -

```
static void main(String[] args) {
    // public is missing
}

public void main(String args[]) {
    // static is missing
}

public static int main(String... Java) {
    // return type not void

    return 0;
}

public void Main(String args[]) {
    // "main" not "Main"
}

public void main(string args[]) {
    // "String" not "string"
}

public void main(String.. SayHi) {
    // Ellipses is 3 dots !
} 
```

有些给出错误，而另一些只是重载主要方法......希望这会有所帮助......！如果是这样，请通过评论告诉我..！

来源 - [Java 编程理论教程](http://theoryofprogramming.com/2015/05/26/java-tutorials-introduction/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T11:00:13.833

`public static void main(String a[])`是典型 Java 程序的主要入口点**签名。**所以你应该继续使用这个方法签名。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-28T11:21:47.403

Java 运行时尝试查找名称为“main”且参数类型为“String[]”的方法。这就像使用反射来查找类型参数为 String[] 的方法。

还使用 String[] 以便运行时可以传递提供的程序参数或命令行参数。这就像运行时用空格字符标记参数，然后调用这个名为“main”的方法。

方法 main 必须声明为 public、static 和 void。它必须接受一个作为字符串数组的参数。此方法可以声明为

```
public static void main(String[] args)
or

public static void main(String... args) 
```

也可以参考 Oracle Java 规范文档了解更多

[第 12 章执行 - 第 12.1.4 节调用 Test.main](http://docs.oracle.com/javase/specs/jls/se5.0/html/execution.html#12.1.4)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-28T10:59:18.510

您需要确切的`String[] args`参数（它是一个数组）。

原因是您需要使用*指定的签名*`main()`声明方法（并且方法签名包含其名称、参数数量和参数**类型**）。

 ***因此，如果您创建的函数具有不同的参数类型（字符串与字符串数组），则无法识别。***

# import - 带有变体的 Woocommerce CVS 导入？

> ID：13603448
> 
> 赞同：1
> 
> 时间：2012-11-28T10:58:31.147
> 
> 标签：import, woocommerce, variations

我们正在构建的网站已接近完成，最后要做的是导入所有产品（没问题），重要的是，产品变体......我查看了文档，特别是属性和产品变体部分，但我仍然迷路关于如何做到这一点。

从文档的 Product Variations 部分，据我了解，需要为变体导入单独的 CSV，并且我需要使用 meta:attribute_pa_size、meta:attribute_pa_color 和 meta:attribute_pa_style 作为列标题。

但是，在 Attributes 部分，我假设主要（非变体）CSV，它说我需要插入这些列：attribute:attribute name、attribute:pa_size 和 attribute_data:pa_size

但是在玩弄了这些专栏之后，我无处可去，也无法为我的生活获得要导入的变体。

我尝试手动创建产品，添加变体并让一切正常，然后进行 CSV 导出。以完全相同的格式将新产品输入到相同的 CSV 并重新导入后，变化仍然没有出现。

也许它与“产品”下的“属性”菜单有关？我在那里玩了一场，但仍然不知所措。

我知道这一定是可能的，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:07:51.603

这是我使用的方法，非常成功：

1.  为 Woocommerce 购买 Mike 的 CSV 导入套件插件 (http://www.woothemes.com/products/product-csv-import-suite/)

2.  创建属性并添加具有属性的产品

3.  使用插件导出 CSV

4.  使用 CSV 作为模板，并使用属性填写产品信息的其余部分（使用管道“|”符号拆分变体）

5.  使用插件导入

那应该解决你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-30T06:26:41.037

WP All Import 更适合将可变产品导入 WooCommerce，因为您不需要像使用 WooThemes 的导入套件那样具有特定格式的 CSV。

如果您已经在 WooCommerce 中拥有您的产品并且想要导出、修改它们并重新导入它们，那么 WooThemes 工具非常有用。

如果您有 XML 或 CSV 文件并且只需将其导入 WooCommerce 而不需要修改文件以获取某些特殊格式，则 WP All Import 插件非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:24:56.040

所有导出和用作模板的建议都非常好。但是，如果您需要产品变体，那么根据我的经验，导出不需要导出所需的内容。

要实现这一点，您需要每个变体实时，而导出不会这样做。

回答sootylad的问题。你在正确的轨道上。您确实需要列：产品变体 CSV 中的 meta:attribute_pa_colour meta:attribute_pa_sizes，但如果您希望每个变体具有不同的属性，则需要在产品变体 CSV 中为每个差异设置一行。例如，如果您想要不同的图像，那么您需要将图像块添加到“meta:attribute_pa_colour”列。

要非常小心 - 它是区分大小写的。

粉红色与粉红色不同。

我在这上面花了几个星期。它使我陷入困境。

# javascript - jQuery mobile - 在不知道页面名称的情况下强制 pagebeforeshow

> ID：13603454
> 
> 赞同：0
> 
> 时间：2012-11-28T10:58:44.207
> 
> 标签：javascript, jquery, html, jquery-mobile

我`NavBar`在每个页面的底部都有一个小型 jQuery Mobile 网站。该栏有一些按钮，应该可以在整个站点上使用。

如何`pagebeforeshow`在不知道页面名称/ID的情况下强制事件（在当前查看的页面上）？

是否有通用功能来执行此操作，还是我需要先获取`name/id`页面然后他们使用它来调用`pagebeforeshow`？

* * *

**更新**

以下为我提供了当前页面 ID，但`trigger("refresh")`不会触发任何操作（`pagebeforeshow`不执行）。

```
var CurrentPageID = $.mobile.activePage[0].id;
$("#" + CurrentPageID).trigger("refresh"); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:28:57.447

[这是](http://jsfiddle.net/Gajotres/Nn98Y/)一个工作示例。

这将在单击导航栏时开始重新加载页面：

```
$('div[data-role="navbar"] ul li').bind('click',function(event, ui){
  $.mobile.changePage(
    '#'+$.mobile.activePage[0].id,
    {
      allowSamePageTransition : true,
      transition              : 'none',
      showLoadMsg             : false,
      reloadPage              : false
    }
  );
}); 
```

此代码将捕获 pagebeforeshow：

```
$('#pageID').live('pagebeforeshow',function(e,data){
    alert('Reload');
    //Execute AJAX here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:25:34.847

我假设您正在导航的所有页面都是带有`data-role`attr 的 div。所以你应该能够如下绑定事件；

```
$('div[data-role="page"]').live( 'pagebeforeshow', showLoadDiv);

function showLoadDiv() {
   //Your code here
}

//when you want to call it manually
showLoadDiv(); 
```

# mysql - 应用程序名称，表单名称未出现在 Orbeon 表单中

> ID：13603461
> 
> 赞同：0
> 
> 时间：2012-11-28T10:58:56.810
> 
> 标签：mysql, xml, orbeon, xforms

我们正在使用带有 MySQL db 的 Orbeon Forms 4.0 (M16)。当我们创建一个新表单时，它的名称和应用程序名称不会出现在`orbeon/fr/orbeon/builder/summary`页面中。没有任何显示。但在`orbeon_form_definition`表格中，我在表格列中看到表格名称。任何想法如何解决这个问题？

更新：

当我评论
`<property as="xs:string" name="oxf.fr.persistence.provider.*.*.*" value="mysql"/>`
`<property as="xs:string" name="oxf.fr.persistence.mysql.datasource" value="mysql"/>`并使用 eXist db 时，表单名称、表单标题、描述和应用程序出现在摘要页面`/orbeon/fr/orbeon/builder/summary`中。所以我认为 MySQL 持久层的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:45:41.817

根据 avernet 的回答： 我们必须做的[链接](https://github.com/orbeon/orbeon-forms/issues/598#issuecomment-10830085)：在你的 WEB-INF/lib/orbeon-form-runner.jar 中打补丁，就像在[链接](https://github.com/orbeon/orbeon-forms/commit/dfd75204be499e26c82aafea0792d2804594b960)中所做的那样。 我已经做到了，现在它可以工作了。
`apps/fr/persistence/mysql/search.xpl`

# android - 如何从android中的图像文件创建具有多个页面的pdf文件

> ID：13603463
> 
> 赞同：7
> 
> 时间：2012-11-28T10:59:01.647
> 
> 标签：android, pdf-generation

如何从 Android 中的图像文件创建具有多个页面的 PDF 文件？我从图像创建了一个 PDF 文件。该 PDF 文件有一页。那是该图像的一半。在右侧的搜索部分被剪切成 PDF 文件。我正在使用 itext-5.3.4.jar 创建 PDF。

```
 wbviewnews.loadUrl("http://developer.android.com/about/index.html");
   // button for create wbpage to image than image to PDF file
            Button  btnclick =(Button)findViewById(R.id.btnclick);
            btnclick.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                Picture p = wbviewnews.capturePicture();
                bitmap=null;

                PictureDrawable pictureDrawable = new PictureDrawable(p);

                bitmap = Bitmap.createBitmap(pictureDrawable.getIntrinsicWidth(),pictureDrawable.getIntrinsicHeight(), Config.ARGB_8888);
                //Bitmap bitmap = Bitmap.createBitmap(200,200, Config.ARGB_8888);
                Canvas canvas = new Canvas(bitmap);
                canvas.drawPicture(pictureDrawable.getPicture());

                ImageView imgdata=(ImageView)findViewById(R.id.imgdata);
                imgdata.setImageBitmap(bitmap); 

                String filename = "pippo.png";
                File sd = Environment.getExternalStorageDirectory();

                File dest = new File(sd, filename);
                String pdffilename = "pippo.pdf";
                File pdffilepath = new File(sd, pdffilename);

                try {
                    FileOutputStream out = new FileOutputStream(dest);

                    bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);
                    out.flush();
                    out.close();

                } catch (Exception e) {
                    e.printStackTrace();
                    Log.e("Exception", e.toString());
                }

                Document document=new Document();

                try {
                    Log.e("pdffilepath", pdffilepath.toString());
                    PdfWriter writer = PdfWriter.getInstance(document,new FileOutputStream(pdffilepath));
                    document.open();

                    //  URL url = new URL (Environment.getExternalStorageDirectory().getAbsolutePath()+"/"+filename);
                    //  Log.e("url", url.toString());
                    Image image = Image.getInstance(Environment.getExternalStorageDirectory().getAbsolutePath()+"/"+filename) ;

                    document.add(image);               
                    document.close();
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.e("FileNotFoundException", e.toString());
                } catch (DocumentException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.e("DocumentException", e.toString());
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.e("MalformedURLException", e.toString());
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.e("IOException", e.toString());
                }

            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T06:22:11.087

您通过 StackOverflow 进行的搜索较少我猜是因为我发现这些答案已经有了解决方案，是的，它包含在不同的答案中，并且查看 Q/AI 猜测他们可以解决您的问题，如果没有，请继续尝试:)

[如何在android中生成带有图像的Pdf文件？](https://stackoverflow.com/questions/6674059/how-to-generate-pdf-file-in-android/6759423#6759423)

[如何使用 Java 和 itext 从 Graphics 对象创建具有多个页面的 PDF](https://stackoverflow.com/questions/5290269/how-to-create-a-pdf-with-multiple-pages-from-a-graphics-object-with-java-and-ite)

[iText 示例](http://itextpdf.com/examples/iia.php?id=99)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-07T08:26:47.430

如果要创建包含多个图像的 pdf 文件，可以使用Android 中的[PdfDocument](https://developer.android.com/reference/android/graphics/pdf/PdfDocument)。这是一个演示：

```
private void createPDFWithMultipleImage(){
    File file = getOutputFile();
    if (file != null){
        try {
            FileOutputStream fileOutputStream = new FileOutputStream(file);
            PdfDocument pdfDocument = new PdfDocument();

            for (int i = 0; i < images.size(); i++){
                Bitmap bitmap = BitmapFactory.decodeFile(images.get(i).getPath());
                PdfDocument.PageInfo pageInfo = new PdfDocument.PageInfo.Builder(bitmap.getWidth(), bitmap.getHeight(), (i + 1)).create();
                PdfDocument.Page page = pdfDocument.startPage(pageInfo);
                Canvas canvas = page.getCanvas();
                Paint paint = new Paint();
                paint.setColor(Color.BLUE);
                canvas.drawPaint(paint);
                canvas.drawBitmap(bitmap, 0f, 0f, null);
                pdfDocument.finishPage(page);
                bitmap.recycle();
            }
            pdfDocument.writeTo(fileOutputStream);
            pdfDocument.close();

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

private File getOutputFile(){
    File root = new File(this.getExternalFilesDir(null),"My PDF Folder");

    boolean isFolderCreated = true;

    if (!root.exists()){
        isFolderCreated = root.mkdir();
    }

    if (isFolderCreated) {
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss", Locale.US).format(new Date());
        String imageFileName = "PDF_" + timeStamp;

        return new File(root, imageFileName + ".pdf");
    }
    else {
        Toast.makeText(this, "Folder is not created", Toast.LENGTH_SHORT).show();
        return null;
    }
} 
```

这里的 images 是带有路径的图像的 ArrayList。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-29T12:54:07.687

**如果您的线性布局高度非常大，请尝试此代码**

[https://demonuts.com/android-generate-pdf-view/](https://demonuts.com/android-generate-pdf-view/)

按照此链接，只需更改行

```
PdfDocument document = new PdfDocument();
PdfDocument.PageInfo pageInfo = new PdfDocument.PageInfo.Builder(convertWidth, 10000, 1).create();
PdfDocument.Page page = document.startPage(pageInfo);
Canvas canvas = page.getCanvas();
Paint paint = new Paint();
paint.setColor(Color.BLUE);
canvas.drawPaint(paint);
Bitmap bitmap = Bitmap.createScaledBitmap(bitmap, convertWidth, 10000, true);
canvas.drawBitmap(bitmap, 0, 0 , null);
document.finishPage(page);` 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-29T06:29:01.330

你可以这样设置图像...

```
Bitmap bt=Bitmap.createScaledBitmap(btm, 200, 200, false);
bt.compress(Bitmap.CompressFormat.PNG,100, bos); 
```

# java - 为什么这个赋值不需要显式转换？

> ID：13603468
> 
> 赞同：5
> 
> 时间：2012-11-28T10:59:20.397
> 
> 标签：java, casting, operators

考虑这段代码：

```
byte b=1;
long l=1000;
b += l; 
```

我希望最后一条语句需要显式转换，因为， `b+=l`被评估为`b = b+l`并且 `(b+l)`部分给出一个整数。如果没有显式强制转换，整数不能分配给字节？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T11:01:31.947

好的开始，`b+l`给出一个`long`，而不是`int`......

...但复合赋值运算符有其他行为。根据[JLS 第 15.26.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)：

> E1 op= E2 形式的复合赋值表达式等价于 E1 = (T) ((E1) op (E2))，其中 T 是 E1 的类型，除了 E1 只计算一次。

注意转换为`T`.

# javascript - 从输入中获取和设置值使用javascript

> ID：13603470
> 
> 赞同：0
> 
> 时间：2012-11-28T10:59:28.110
> 
> 标签：javascript

我有一个来自网站的输入，它的定义如下：

```
<input type="text" name="postdb[title]" size="60" value id="title" class="input_text"> 
```

我试过这个：

```
document.getElementsByName('postdb[title]')[0].value='test' 
```

和这个：

```
document.getElementById('title').value='test' 
```

但它不起作用，如何使用javascript设置这个输入的值？

编辑：

我发现这个输入是 insideof `<form name="FORM..`，那么如何使用 javascript 以这种形式找到它？

编辑：已解决；它实际上在 iframe 的 FORM 中，所以我只使用它：

```
var vform =document.frames['main'].document.forms['FORM'];
vform.elements['title'].value='test'; thanks for help, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:02:39.857

用这个

```
<input type="text" name="postdb[title]" size="60" value="" id="title" class="input_text">

document.getElementById('title').value='test'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:03:20.700

您的 DOM 可能尚未加载。

```
<!-- this will fail -->
<script type="text/javascript">var el = document.getElementById('element');</script>
<div id="element"></div> 
```

上面的示例将失败，因为我们正在尝试搜索尚未加载的元素。很容易犯错！

```
<!-- this will not -->
<div id="element"></div>
<script type="text/javascript">var el = document.getElementById('element');</script> 
```

通过在所需的 DOM 加载后运行 javascript，我们能够找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:03:31.270

试试这个：

```
$(document).ready(function() {
    document.getElementById('title').value = 'test';
}); 
```

在这里演示：**[JS Fiddle](http://jsfiddle.net/kLLAQ/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T11:04:04.820

两者都应该适合您，但是，请确保您何时调用`document.getElementById();`或`document.getElementsByName();`该`<input>`元素是否存在于您的页面中？

# c++ - 模板类对象数组

> ID：13603473
> 
> 赞同：-6
> 
> 时间：2012-11-28T10:59:37.170
> 
> 标签：c++, templates, object, pointers

我想制作一个包含多个模板对象的数组。

例如，如何使数组填充这两个对象：

```
Foo< A, B, C > FooItem (bar_, bor_);
Foo < D, E, F > FooItem2 (bur_, ber_);

myArray[0] = FooItem;
myArray[1] = FooItem2; 
```

void* 指针数组？经典阵列？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:17:38.270

我假设您的意思是您想要一个能够容纳不同类型对象的数组。一个简单的数组不能做到这一点，因为所有元素必须是相同的类型，并且`void*`没有太多用处，因为无法确定任何对象的类型，因此无法对它们做任何有用的事情。

根据您打算如何使用数组中的对象，各种可能性包括：

*   定义一个公共基类，并存储指向它的指针。如果基类是多态的，您可以使用虚函数`dynamic_cast`或`typeid`与对象交互。
*   [Boost.Variant](http://www.boost.org/doc/libs/release/doc/html/variant.html)可以存储来自任何预定义类型集的对象。这些可以存储在数组中，高效（不需要额外的重定向）并且可以以类型安全的方式访问而无需强制转换。
*   [Boost.Any](http://www.boost.org/doc/libs/release/doc/html/any.html)可以存储任何类型的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:07:56.003

您可以使用成对向量：

```
std::vector< std::pair< Foo<A, B, C>, Foo<D, E, F> > > array; 
```

相反，如果您想要一个纯数据数组：

```
std::pair< Foo<A, B, C>, Foo<D, E, F> > array[size]; 
```

# javascript - 带有 JS 远程处理和 jquery 的 Visualforce 页面未按预期工作

> ID：13603484
> 
> 赞同：1
> 
> 时间：2012-11-28T11:00:04.910
> 
> 标签：javascript, jquery, remoting, visualforce

我在 VF 页面上遇到了一段 javascript 的问题，我希望有人能在代码存在缺陷的地方启发我。为了提供一个小的背景，VF 页面有一个选项列表和一个由 JS 读取/更新的输入字段。脚本中有 jquery 代码，通过从控制器（通过远程调用）检索可能匹配的列表来自动完成产品输入文本字段。为了缩小结果，我从 Line Type 选择列表中传入 pricebook Id 和 lineType。我试图让线型在 onchange 事件上执行代码，以便在用户在输入字段中键入结果之前“缓存”结果。到目前为止，在我的 soe 中，线型更改事件正在触发代码并基于警报，我可以看到控制器中的方法被调用并返回列表，

1) .change 事件不会多次触发，因此我第一次更改选择列表值时，代码会触发并执行远程调用，但对选择列表的任何后续更改都不会再次触发代码。这是为什么？当对选项列表的选择进行更改时，不应该总是触发 .change 吗？

2) 自动完成不会根据调用的结果来建议值，这意味着我看不到带有远程调用返回的建议的弹出窗口。

下面是相关代码（VF页面、js和控制器方法）。请有人帮我一把！

VF+js代码：

```
<script>
var pop, prodNames, pbId, lineType, availableProds;
$j = jQuery.noConflict();
$j(function() {

    $j("select[id$='fLineType']").change(function() {
        pbId =  $j("input[id$='pbid']").val();
        lineType = $j(this).val();
        alert('Line type selected' + $j(this).val() + ' - ' + pbId );

        // call remote apex method and get chache list of Prod Names:
        SalesDocumentManager_Controller.cacheProdNames(pbId, lineType,  
           function(result, event){
                alert('Result from remote call: ' + result);
                availableProds = result;
            }, 
            {escape: true}
        );
    });

    $j("input[id$='prodName']").autocomplete({
        source: availableProds,
        minLength: 3
    });

}); 
```

控制器远程方法（当前返回虚拟数据）：//这似乎有效，因为它返回下面创建的值：

```
@RemoteAction
    public static String[] cacheProdNames (String pbId, String lineType) {
        system.debug('###remote action is executing');
        String[] prodNames = new List<String>();
        prodNames.add('testProd');
        prodNames.add('testProd 2');
        return prodNames;
    } 
```

# silverlight - Silverlight Prism MEF：为什么使用 ServiceLocator 来获取 View 实例？

> ID：13603488
> 
> 赞同：2
> 
> 时间：2012-11-28T11:00:15.780
> 
> 标签：silverlight, prism, mef, service-locator

在 Prism 的 IModule Initialize() 方法中，调用 RegisterViewWithRegion() 方法来映射视图和区域。

这两行代码有什么区别？为什么要使用 ServiceLocator？

```
_regionManager.RegisterViewWithRegion("Region1", () => _serviceLocator.GetInstance<View1>());

_regionManager.RegisterViewWithRegion("Region1", typeof(View1)); 
```

这是上下文的整个 ModuleInit.cs 类：

```
namespace MyModule
{
[ModuleExport("MyModule.ModuleInit", typeof(MyModule.ModuleInit))]
public class ModuleInit : IModule
{
    private readonly IRegionManager _regionManager;
    public IServiceLocator _serviceLocator;

    [ImportingConstructor]
    public ModuleInit(IRegionManager regionManager, IServiceLocator serviceLocator)
    {
        _regionManager = regionManager;
        _serviceLocator = serviceLocator;
    }

    #region IModule Members

    public void Initialize()
    {
        _regionManager.RegisterViewWithRegion("Region1", () => _serviceLocator.GetInstance<View1>());
    }

    #endregion
}
} 
```

[编辑]

[RegisterViewWithRegion Method](https://stackoverflow.com/a/5883994/1129654) MSDN 站点描述了两个不同版本的作用：

```
RegisterViewWithRegion(IRegionManager, String, Func<Object>) 
```

> 将视图与区域相关联，使用委托来解析视图的创建实例。当显示区域获取时，将调用此委托并将结果添加到区域的视图集合中。

```
RegisterViewWithRegion(IRegionManager, String, Type) 
```

> 通过注册类型，将视图与区域相关联。当显示区域时，此类型将使用 ServiceLocator 解析为具体实例。该实例将被添加到该区域的 Views 集合中

所以在我看来，唯一的区别是使用 ServiceLocator 立即将类型解析为实例，或者稍后在显示区域时？

[编辑2]

[在 Stackoverflow 上的其他地方](https://stackoverflow.com/a/5883994/1129654)找到了答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:06:00.830

那是因为主应用程序不应该知道模块。

当一个模块被加载时，它会注册到`ServiceLocator`并且它可以访问`RegionManager`.
然后，它可以在主应用程序不知道有关新加载模块的任何信息的情况下，将模块中的视图注入主应用程序（例如新选项卡）。

`ServiceLocator`将向 MEF 询问依赖关系，因此您始终可以无参数调用，`_serviceLocator.GetInstance<View1>()`MEF 将解析需要导入的任何内容，无论您在`View1`的构造函数签名中进行什么更改。

# javascript - 正则表达式电话号码验证

> ID：13603504
> 
> 赞同：4
> 
> 时间：2012-11-28T11:01:06.703
> 
> 标签：javascript, regex, vb.net

我为黎巴嫩电话号码写了这个正则表达式，基本上它应该以

**00961**或**+961**是**国际代码**， 然后是**区号**

可以是从**0**到**9**的任何数字或蜂窝代码**“70”**或**“76”**或

**"79"**然后是一个**6****位**数字

 **我编写了以下没有 6 位数字部分 的**reg ex ：**

`^(([0][0]|[+])([9][6][1])([0-9]{1}|[7][0]|[7][1]|[7][6]|[7][8]))$`

当我想添加代码以确保表达式只允许多 6 位数字时：

`^(([0][0]|[+])([9][6][1])([0-9]{1}|[7][0]|[7][1]|[7][6]|[7][8])([0-9]{6}))$`

它似乎接受 5 或 6 位数字而不是 6 位数字

我很难找到问题所在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:05:30.673

使用这个正则表达式`((00)|(\+))961((\d)|(7[0168]))\d{6}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:06:05.887

这就是我会使用的。

```
/^(00|\+)961(\d|7[069])\d{6}$/ 
```

*   00 或 +
*   961
*   1 位数字或 70 或 76 或 79
*   一个 6 位数字

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:06:29.990

由于`[0-9]{1}`7 介于 0 和 9 之间，因此也将匹配蜂窝代码 7x。这意味着“5 位蜂窝号码”将匹配 7 位和 6 位以上的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T05:24:17.197

正如@ellak 指出的那样，地窖代码正在形成一个陷阱：

```
/^((00)|(\+))961((\d)|(7[0168]))\d{6}$/.test("009617612345"); // true 
```

这里的代码应该像这样中断：`00 961 76 12345`，

但是 RegEx 实际上会像这样破坏它：`00 961 7 612345`，因为`7`在 中匹配`\d`，其余部分被组合，正好是 6 位数字，并且匹配。

我不确定这是否真的有效，但我想这不是你想要的，否则你问题中的 RegEx 应该可以工作。

这是一个避免陷阱的有点长的正则表达式：

```
/^(00|\+)961([0-68-9]\d{6}|7[234579]\d{5}|7[0168]\d{6})$/ 
```

几个测试结果：

```
/(00|\+)961([0-68-9]\d{6}|7[234579]\d{5}|7[0168]\d{6})/.test("009617012345")
  false
/(00|\+)961([0-68-9]\d{6}|7[234579]\d{5}|7[0168]\d{6})/.test("009618012345")
  true
/(00|\+)961([0-68-9]\d{6}|7[234579]\d{5}|7[0168]\d{6})/.test("009617612345")
  false
/(00|\+)961([0-68-9]\d{6}|7[234579]\d{5}|7[0168]\d{6})/.test("0096176123456")
  true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T11:12:11.423

尝试

```
 /^(00961|\+961)([0-9]|70|76|79)\d{6}$/.test( phonenumber );
//^                                    start of string
// ^^^^^^^^^^^^^                       00961 or +0961
//              ^^^^^^^^^^^^^^^^       a digit 0 to 9 or 70 or 76 or 79
//                              ^^^^^  6 digits
//                                   ^ end of string 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-17T14:35:58.313

就在最近，黎巴嫩电信部更改了 IMS 上的区号。所以当前的正则表达式匹配器变为：

```
^(00|\+)961[ -]?(2[1245789]|7[0168]|8[16]|\d)[ -]?\d{6}$ 
```

*   前缀：**00**或**+**
*   国家代码：**961**
*   区号：1位或2位；包括**2** *、**7** *、**8 *...，或旧 IMS 网络上以****0** *开头的 Ogero 号码的单个数字，最后是以**03**开头的旧移动线路。
*   6位数字

[the961.com上的新闻](https://www.the961.com/lebanon-changing-phone-codes/)**

# python - 记住python字典中每个键的总和

> ID：13603507
> 
> 赞同：0
> 
> 时间：2012-11-28T11:01:15.017
> 
> 标签：python, dictionary

我有一本看起来像这样的字典：

```
{1224:{'A': 6, 'B': 4, 'C': 5}, 1225: {'A': 6, 'B': 6, 'C': 5}} 
```

我想在每个键中存储 A 的总数并得到如下结果：

```
{1224:{'A': 6, 'B': 4, 'C': 5, 'Total_A' : 6}, 1225: {'A': 6, 'B': 6, 'C': 5, 'Total_A' : 12}} 
```

Total_A 是第一个键中的 A 值 (1224) + 下一个键中的 A 值 (1225)。

我试过这个：

```
for d in celldict.values():
    sum = 0
    sum += d.get('A',0)
    d['TOTAL_A'] = sum 
```

但它不求和，每次只返回每个键的 A 值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T11:04:06.543

我想你应该知道循环中发生了什么。正确答案如下：

```
sum = 0
for d in celldict.values():
    sum += d.get('A',0)
    d['TOTAL_A'] = sum 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T11:07:13.583

问题是，您`sum`在每次迭代时都重置。这就是为什么`sum`从不累积以前的值。

移出`sum = 0`循环。

# c++ - 如何有效地比较包含双精度的 std::tuple 是否相等

> ID：13603512
> 
> 赞同：0
> 
> 时间：2012-11-28T11:01:27.063
> 
> 标签：c++, optimization, c++11, floating-point

我想尽可能有效地比较两个包含双精度的元组。

由于浮点精度无法通过使用预定义的 operator==(...) 来完成，那么最好的方法是什么？我是否真的需要遍历所有元组元素，或者是否有一些我可以使用的模板魔法，这可能允许编译器调用一些 SIMD 优化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T14:03:33.453

比较浮点值是否相等是一种误解。在任何没有被严重破坏的实现中，当且仅当比较的值相等时，比较浮点值是否相等才会返回 true。

任何实际错误都存在于您的计算中。这些错误必须得到控制和表征。如果没有对错误进行表征，就不可能就执行哪些适合您的目的的操作提出任何建议。

如果您的值计算不准确，因此它们可能包含一些错误，并且您希望接受实际上不相等的相等值，那么您必须说明 (a) 接受相等的标准，和 (b) 标准因为拒绝平等。说明这些标准后，人们可能会向您提供有关实施满足这两个标准的测试的建议。请注意，（b）和（a）一样重要，因为您通常不希望接受实际上不相等的相等值。由于您的计算中存在错误，因此某些决定将是错误的，您必须确定标准 (a) 和 (b)，以便您的应用程序可以接受不正确的决定。重要的是 (a) 和 (b) 不能重叠，否则会出现无法接受任何决定的情况。

在您的情况下，除了从文件中读取数据之外，您没有声明任何错误来源。如果文件中的数据是由优秀软件编写的浮点计算的结果（将浮点值正确转换为具有足够精度的十进制数字），并且您使用良好的软件读取它（将十进制数字正确转换为浮点数）点值），那么在数据的往返过程中没有错误，您应该简单地测试是否相等而没有任何修饰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:24:48.800

好的，基于我为元组创建的 operator== () 的 STL 实现，它允许我对某些类型使用我想要的任何比较函数：

```
template<class T>
bool
tupleEqualHelper (const T& lhs, const T& rhs)
{
  return lhs == rhs;
}

template<>
bool tupleEqualHelper<double> (const double& lhs, const double& rhs)
{
 return return (fabs (lhs - rhs) < (std::numeric_limits<double>::epsilon () * 100));
}

template<counter_t i, counter_t j, class T>
struct compareHelper;

template<counter_t i, counter_t j, class T>
struct compareHelper
{
  static bool tupleEqual (const T& lhs, const T & rhs)
  {
    return tupleEqualHelper (std::get<i > (lhs), std::get<i > (rhs)) &&
            compareHelper < i + 1, j, T>::tupleEqual (lhs, rhs);
  }
};

template<counter_t i, class T>
struct compareHelper<i, i, T>
{
  static bool tupleEqual (const T&, const T&)
  {
    return true;
  }
};

template<class ... TTypes>
bool
compareTuple (const std::tuple<TTypes...>& lhs, const std::tuple<TTypes...>& rhs)
{
  typedef std::tuple < TTypes...> Tp;

  return compareHelper < 0, std::tuple_size<Tp>::value, Tp>::tupleEqual (lhs, rhs);
} 
```

# scala - SORM 中的 SQLite 支持？

> ID：13603513
> 
> 赞同：9
> 
> 时间：2012-11-28T11:01:28.370
> 
> 标签：scala, orm, sorm

我一直在为小型 Scala 项目寻找轻量级的 Hibernate 替代方案，SORM 看起来很有前途。目前我使用SQLite，但根据[官方网站](http://sorm-framework.org/SORM-vs-Slick.html)不支持。所以我的问题是有没有计划在 SORM 中添加 SQLite 支持？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T11:52:01.310

目前它的优先级很低，因为 SORM 已经提供了对另外两个嵌入式数据库的支持：H2 和 HSQLDB。由于 H2 是一个纯 JVM，因此它是推荐的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:05:26.530

目前似乎[没有任何这样](https://github.com/nikita-volkov/sorm/issues/search?q=sqlite)的计划。

# android - Android - 平板电脑的可绘制缩放

> ID：13603517
> 
> 赞同：0
> 
> 时间：2012-11-28T11:01:36.683
> 
> 标签：android, android-resources

我在*res/drawable-hdpi*中定义了一个背景图像，它在所有手机上看起来都很好，它是一个标准的 480x800 图像，可以很好地缩放到具有相似纵横比的其他屏幕。图像当然适合 480x800 手机的像素完美。

现在我买了一个 7 英寸的平板电脑，它也有 480x800 的屏幕，但是是一个**大**屏幕。虽然图像本身是 480x800 和平板电脑的*分辨率相同*，但图像看起来像是缩小到更小的尺寸，然后再次放大。

我有一个可行的临时解决方案 - 将相同的图像放入 res/drawable-large 文件夹中，这可行，但我的项目中有两次相同的图像，我认为这是不必要的。

**我怀疑**它与 res/drawable-hdpi 中的图像有关，并且因为平板电脑是 MDPI，它做了一些缩小和放大，但我想避免这种情况并正确地做，所以我可以使用一个文件夹中的同一个drawable，它可以在手机和平​​板电脑上正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:21:17.990

您可以将该特定图像放在“可绘制”文件夹中。

# x86 - x86 指令到操作码的转换

> ID：13603518
> 
> 赞同：0
> 
> 时间：2012-11-28T11:01:38.930
> 
> 标签：x86, x86-64

`movdqa xmm0, ptr fs:[eax]`并且`movdqu (Array[ebx]), xmm0`这两条指令没有在我的编译器中执行。请告诉我这些指令的确切操作码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T06:41:40.940

```
movdqa xmm0, ptr fs:[eax] 
```

`FS`对,（三字节）操作码和 ModR/M 字节使用段覆盖前缀。它应该如下所示：

```
0x64           ;<-- segment override prefix FS
0x66 0x0F 0x6F ;<-- opcode
0x00           ;<-- ModR/M is 000 for Reg (xmm0), 00 for Mod 
               ;(single member addressing) and 000 for Memory ([EAX]) 
```

第二条指令不使用段覆盖前缀。

```
movdqu (Array[ebx]), xmm0 
```

我想我不明白这里的第一个括号。如果他们的意思是设置值`Array[ebx]`，那么代码应该如下所示：

```
0xF3 0x0F 0x7F ;<-- opcode
0x80           ;ModR/M is 00 for Reg (xmm0), 10 for Mod
               ;(register+disp32) and 000 for memory ([EAX+disp32])
0xdeadbeef     ;little-endian encoded address displacement for Array 
```

如果它们意味着高级计算，则需要 SIB 字节。

# c# - 在 Windows 8 Metro App 中使用 agsXMPP 时出错

> ID：13603521
> 
> 赞同：1
> 
> 时间：2012-11-28T11:01:43.550
> 
> 标签：c#, windows-8, microsoft-metro, agsxmpp

我在 Windows 8 Metro 应用程序中使用“agsXMPP”，

```
 private void loginclick_Click_1(object sender, RoutedEventArgs e)
    {
        if (!string.IsNullOrEmpty(id.Text) && !string.IsNullOrEmpty(id.Text))
            client.Login(id.Text, pwd.Password);
        client.OnLoginResult = success => appendLog("Connection to Facebook established " + (success ? "" : "un") + "successfully");
        client.OnLogout = () => appendLog("Client logged out");
        client.OnMessageReceived = (msg, user) => appendLog(user.name + ":" + msg);
        client.OnUserIsTyping = user => appendLog("The user " + user.name + " " + (user.isTyping ? "started typing" : "stopped typing"));
        client.OnUserAdded = user =>
        {
            appendLog("User " + user.name + " is now available for chat");
            changeContactList(user.name, true);
        };
        client.OnUserRemoved = user =>
        {
            appendLog("User " + user.name + " is not longer available for chat");
            changeContactList(user.name, false);
        };

        txtMsgInput.KeyUp += new KeyEventHandler(txtMsgInput_KeyDown);
    } 
```

在上面的代码中，这一行出现错误，

```
 client.OnMessageReceived = (msg, user) => appendLog(user.name + ":" + msg); 
```

错误是，

```
 Error   8   The type 'agsXMPP.protocol.client.Message' is defined in an assembly that is not referenced. You must add a reference to assembly 'agsXMPP, Version=1.1.1.0, Culture=neutral, PublicKeyToken=ff839b81f1debe86'. 
```

如果我注释掉该行并执行。它成功执行并获取聊天中可用人员的列表...我检查了这些链接，

[http://jefferytay.wordpress.com/2011/12/16/azure-tableservicecontext-presents-an-error-with-createquery-function/](http://jefferytay.wordpress.com/2011/12/16/azure-tableservicecontext-presents-an-error-with-createquery-function/)

[使用 Nuget 更新 FluentValidation 后出现带有 NinjectValidatorFactory 的奇怪错误](https://stackoverflow.com/questions/12015553/strange-error-w-ninjectvalidatorfactory-after-updating-fluentvalidation-w-nuge)

但无法理解，有人能简单地告诉我这个错误吗？. .

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:46:01.723

这是因为，在这一行

```
 client.OnMessageReceived = (msg, user) => appendLog(user.name + ":" + msg); 
```

据说缺少味精的参考

否则你使用字符串替换 agsXMPP.client.protocol.message（即 msg）。. .

# visual-studio-2010 - TFS Meltdown - 如何恢复搁置的更改

> ID：13603522
> 
> 赞同：3
> 
> 时间：2012-11-28T11:01:47.790
> 
> 标签：visual-studio-2010, unshelve, shelveset

我将工作文件夹设置为 RAM 驱动器。晚上有长时间停电，UPS 用完了，我的机器也坏了。值得庆幸的是，我在回家之前搁置了我的更改，并且在 Team Explorer 中可以看到搁置集。变更集包括项目文件和一些尚未添加到源代码管理的新文件。

我正在尝试恢复受影响的文件，但出现错误：

尝试查看搁​​置的文件会给出`TF10187`（或一般的、未编号的）， `The system cannot find the file specified`即使我可以在`Pending Changes`列表中看到它们。

尝试完全取消搁置集会产生与`incompatible changes`我无法解决的相关错误。

我*猜*TFS 将搁置集本地缓存在 RAM 磁盘上，该磁盘已重新初始化，因此丢失了缓存，但我*希望*我错了。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-09T10:03:51.750

昨天有人来找我问同样的问题，幸运的是他们有 TFS 项目数据库（tfs_）的备份，所以我们将它恢复到另一个数据库，我四处寻找并弄清楚了（所以，如果你有备份，那么是的，您可以恢复所有文件）。

首先是关于数据库中表的一些信息。

可以通过查询 tbl_Workspace 表并查找 Type=1 (Shelveset) 的所有记录来识别 Shelveset，当然您也可以使用 WorkspaceName 列按名称进行过滤。

其他感兴趣的表是：

tbl_PendingChanges（从 tbl_Workspace 引用 WorkspaceId）——哪些文件是 ShelveSet 的一部分

tbl_VersionedItem（通过 ItemId 列链接到 tbl_PendingChanges）- 文件的父路径和名称

tbl_Content（通过 FileId 链接到 PendingChanges）- 这是您的文件内容作为压缩 (gzip) 数据存储的位置

现在解决方案；以下查询可以显示您的文件：

```
SELECT c.[CreationDate], c.[Content], vi.[ChildItem], vi.ParentPath
FROM [dbo].[tbl_Content] c 
INNER JOIN [dbo].[tbl_PendingChange] pc ON pc.FileId = c.FileId
INNER JOIN [dbo].[tbl_Workspace] w ON w.WorkspaceId = pc.WorkspaceId
INNER JOIN [dbo].[tbl_VersionedItem] vi ON vi.ItemId = pc.ItemId
WHERE w.WorkspaceName = '<YOUR SHELVESET NAME>' 
```

有了这些，我编写了一些代码来从 SQL 中获取数据，然后使用 GZipStream 类解压缩内容并将文件保存到磁盘。

一个小时左右就恢复了一周的工作。

这是使用 TFS 2010 完成的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-03T21:56:06.630

这是 TFS2015 的更新响应，其中有另一个架构更改。下面是一个用于将 txt 文件写入桌面的 C# 控制台应用程序。确保填写 connString 和shelfsetName 变量。

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.IO;
using System.IO.Compression;

namespace RestoreTFSShelve
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            string shelvesetName = "";
            string connString = "";

            SqlConnection cn = new SqlConnection(connString);
            SqlCommand cmd = new SqlCommand(@"
SELECT c.[CreationDate], c.[Content], v.FullPath
FROM [dbo].[tbl_Content] c
INNER JOIN [dbo].tbl_FileMetadata f ON f.ResourceId = c.ResourceId
INNER JOIN [dbo].tbl_FileReference b ON f.ResourceId = b.ResourceId
INNER JOIN [dbo].[tbl_PendingChange] pc ON pc.FileId = b.FileId
INNER JOIN [dbo].[tbl_Workspace] w ON w.WorkspaceId = pc.WorkspaceId
INNER JOIN [dbo].[tbl_Version] v ON v.ItemId = pc.ItemId AND v.VersionTo = 2147483647
WHERE w.WorkspaceName = '@ShelvesetName'", cn);

            cmd.Parameters.AddWithValue("@ShelvesetName", shelvesetName);

            DataTable dt = new DataTable();
            new SqlDataAdapter(cmd).Fill(dt);

            foreach (DataRow row in dt.Rows)
            {
                string[] arrFilePath = row[2].ToString().Split('\\');
                string fileName = arrFilePath[arrFilePath.Length - 2];
                byte[] unzippedContent = Decompress((byte[])row[1]);
                File.WriteAllBytes(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), fileName), unzippedContent);
            }
        }

        private static byte[] Decompress(byte[] gzip)
        {
            using (GZipStream stream = new GZipStream(new MemoryStream(gzip), CompressionMode.Decompress))
            {
                const int size = 4096;
                byte[] buffer = new byte[size];
                using (MemoryStream memory = new MemoryStream())
                {
                    int count = 0;
                    do
                    {
                        count = stream.Read(buffer, 0, size);
                        if (count > 0)
                        {
                            memory.Write(buffer, 0, count);
                        }
                    }
                    while (count > 0);
                    return memory.ToArray();
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-06T21:19:59.087

使用 TFS 2012 实例时，我也遇到过类似的情况。自从 TFS 2012 的架构发生更改以来，我的 SQL 查询有点不同。希望这对某人有所帮助。

```
SELECT c.[CreationDate], c.[Content], v.FullPath
FROM [dbo].[tbl_Content] c 
INNER JOIN [dbo].[tbl_File] f ON f.ResourceId = c.ResourceId
INNER JOIN [dbo].[tbl_PendingChange] pc ON pc.FileId = f.FileId--c.FileId
INNER JOIN [dbo].[tbl_Workspace] w ON w.WorkspaceId = pc.WorkspaceId
INNER JOIN [dbo].[tbl_Version] v ON v.ItemId = pc.ItemId AND v.VersionTo = 2147483647
WHERE w.WorkspaceName = @ShelvesetName 
```

2147483647 似乎是 2^32 - 1，我认为它可能代表 TFS 2012 中的“最新”。然后我还编写了一个 C# 小部件来解压缩 Gzip 编码的流并将其以正确的文件名转储到磁盘。我没有保留等级制度。

```
string cnstring = string.Format("Server={0};Database={1};Trusted_Connection=True;", txtDbInstance.Text, txtDbName.Text);
SqlConnection cn = new SqlConnection(cnstring);
SqlCommand cmd = new SqlCommand(@"
SELECT c.[CreationDate], c.[Content], v.FullPath
FROM [dbo].[tbl_Content] c 
INNER JOIN [dbo].[tbl_File] f ON f.ResourceId = c.ResourceId
INNER JOIN [dbo].[tbl_PendingChange] pc ON pc.FileId = f.FileId--c.FileId
INNER JOIN [dbo].[tbl_Workspace] w ON w.WorkspaceId = pc.WorkspaceId
INNER JOIN [dbo].[tbl_Version] v ON v.ItemId = pc.ItemId AND v.VersionTo = 2147483647
WHERE w.WorkspaceName = @ShelvesetName", cn);

cmd.Parameters.AddWithValue("@ShelvesetName", txtShelvesetName.Text);

DataTable dt = new DataTable();
new SqlDataAdapter(cmd).Fill(dt);
listBox1.DisplayMember = "FullPath";
listBox1.ValueMember = "FullPath";
listBox1.DataSource = dt;

if(!Directory.Exists(txtOutputLocation.Text)) { Directory.CreateDirectory(txtOutputLocation.Text); }
foreach (DataRow row in dt.Rows)
{
    string[] arrFilePath = row[2].ToString().Split('\\');
    string fileName = arrFilePath[arrFilePath.Length - 2];
    byte[] unzippedContent = Decompress((byte[])row[1]);
    File.WriteAllBytes(Path.Combine(txtOutputLocation.Text, fileName), unzippedContent);
}
}

    static byte[] Decompress(byte[] gzip)
    {
using(GZipStream stream = new GZipStream(new MemoryStream(gzip), CompressionMode.Decompress))
{
    const int size = 4096;
    byte[] buffer = new byte[size];
    using(MemoryStream memory = new MemoryStream())
    {
        int count = 0;
        do
        {
    count = stream.Read(buffer, 0, size);
    if(count > 0)
    {
        memory.Write(buffer, 0, count);
    }
        }
        while(count > 0);
        return memory.ToArray();
    }
}
} 
```

# html - 使用 HTML5 的文件 API 读取文件

> ID：13603525
> 
> 赞同：0
> 
> 时间：2012-11-28T11:01:52.697
> 
> 标签：html, fileapi

我有一个位于网络上的文件，看起来像这样 -

\\\芒果.txt

我想直接读取这个文件，而不在 html 页面上使用任何输入标签。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:42:27.617

**这是不可能的。**浏览器不允许您读取除 JS 或 CSS 之外的任何文件。这将违反安全性。但是，使用表单，您可以要求用户上传文件，然后可以读取该文件的内容。但如果不使用输入标签，这是不可能的。对于解决方法，可以使用以下选项：

1.  您可以将 AJAX 调用发送到您的服务器，然后服务器将读取文件并将文件的文本发送给您作为响应。
2.  您可以使用 JS 文件并将所有数据保存在一个变量中，然后可以通过在 HTML 页面中包含 JS 文件来使用该变量中的数据。
3.  您可以将数据保存在 HTML 页面本身的隐藏 div 中，并可以使用 Java Script 读取其值。

# javascript - 点击标签后需要显示textarea

> ID：13603528
> 
> 赞同：0
> 
> 时间：2012-11-28T11:02:11.770
> 
> 标签：javascript, html

当我单击一个标签时，应该在其下方显示一些 TextArea，其中包含一些预定义的文本，并且用户不应该能够修改 TextArea 的内容。

这就是我尝试的方式：

```
<html>

  <head>
    <script type="text/javascript">
    function myfunc2() {
      document.getElementById('showthis').style.visibility = "visible"
    }
    </script>
  </head>

  <body>
    <label onclick="myfunc2()">Click here</label>
    <textarea id="showthis" style="display:none">dfdsfsfasdfdsfsfasdfssdfsfasf</textarea>
  </body>

</html> 
```

我是这个 html 和 javascript 的新手。请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T11:05:08.837

尝试这个..

```
document.getElementById('showthis').style.display = "block";
document.getElementById('showthis').readOnly=true; 
```

**更新**

检查类名（隐藏）..如果是..显示文本区域并命名它`show`...否则隐藏它并将类名命名为`hide`

JAVASCRIPT

```
function myfunc2() {
 var selectedobj=document.getElementById('showthis');

  if(selectedobj.className=='hide'){  //check if classname is hide 
    selectedobj.style.display = "block";
    selectedobj.readOnly=true;
    selectedobj.className ='show';
  }else{
    selectedobj.style.display = "none";
    selectedobj.className ='hide';
 }
} 
```

在您的 html 中添加一个隐藏类`textarea`。

HTML

```
 <textarea id="showthis" style="display:none" class="hide">dfdsfsfasdfdsfsfasdfssdfsfasf</textarea>​   // add a class hide 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:05:30.447

尽管您正在设置`visibility:visible`，但该元素仍然具有样式属性`display:none`，因此不会显示。

与其设置属性，不如使用`visibility`覆盖`display`属性`block`。

将您的功能更改为：

```
function myfunc2() {
      document.getElementById('showthis').style.display = "block";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:17:21.827

CSS 的属性`display`和`visibility`是不同的。

`visibility`如果您想简单地使元素不可见但保留它在布局中占据的位置，则使用它更有意义，留下一个空白区域：

```
<textarea id="showthis" style="visibility:hidden">dfdsfsfasdfdsfsfasdfssdfsfasf</textarea> 
```

[http://www.w3.org/wiki/CSS/Properties/visibility](http://www.w3.org/wiki/CSS/Properties/visibility)

另一方面， using`display`将隐藏元素，但也会将其从布局中删除：

```
function myfunc2() {
    document.getElementById('showthis').style.display="block";
} 
```

[http://www.w3.org/wiki/CSS/Properties/display](http://www.w3.org/wiki/CSS/Properties/display)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T11:05:01.807

您要更改`display`属性，而不是属性，`visibility`因此请替换以下行：

```
document.getElementById('showthis').style.visibility="visible" 
```

对于这个：

```
document.getElementById('showthis').style.display="block" 
```

请参阅工作[**演示**](http://jsfiddle.net/gnel/VYEFz/)。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-28T11:05:22.853

你错过了一个

> ;

上

```
document.getElementById('showthis').style.visibility="visible" 
```

您还需要更改 display.style 而不是元素的可见性

试试这个

```
document.getElementById('showthis').style.display = "block"; 
```

或将 visibility="false" 属性附加到您的 textarea

# c# - 执行数据库查询块

> ID：13603529
> 
> 赞同：0
> 
> 时间：2012-11-28T11:02:19.197
> 
> 标签：c#, database, asynchronous, thread-safety

我有以下任务要完成：

在我的程序中有一组数据库查询或问题。我想执行这些问题并等待所有问题的结果，或者如果一个问题失败则捕获错误！

我的问题对象看起来像这样（简化）：

```
public class DbQuestion(String sql)
{
    [...]
}

[...]

//The answer is just a holder for custom data...
public void SetAnswer(DbAnswer answer)
{
    //Store the answer in the question and fire a event to the listeners
    this.OnAnswered(EventArgs.Empty);
}

[...]

public void SetError()
{
    //Signal an Error in this query!
    this.OnError(EventArgs.Empty);
} 
```

因此，向数据库发送的每个问题都有一个等待解析结果的侦听器。

现在我想触发一些与数据库异步的问题（最多 5 个左右），并使用所有问题的数据触发一个事件，或者如果只有一个问题抛出一个错误，则触发一个错误！

完成这项任务的最佳或好方法是什么？我真的可以并行执行一个以上的问题并在一个问题引发错误时停止我的所有工作吗？

我想我需要一些灵感……

请注意：我正在使用 .NET 框架 2.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:42:38.473

调查[交易](https://stackoverflow.com/questions/224689/transactions-in-net)。将您对数据库的调用包装在一个事务中，并在最后提交或在失败时回滚。

# .htaccess - 停止重写 htaccess 创建随机页面

> ID：13603532
> 
> 赞同：1
> 
> 时间：2012-11-28T11:02:30.727
> 
> 标签：.htaccess, url-rewriting

最近我在我的网站管理员工具中看到一些随机网站链接到我的网站。其实这不是什么大问题。`.htaccess`当由于我的文件而链接的页面不是真实页面时，就会出现问题。

这是`.htaccess`我正在运行的代码：

```
#Options +FollowSymLinks
RewriteEngine on
RewriteRule ^([^/\.]+)/?$ index.php?id=$1 [L]
RewriteRule ^([0-9]+)/(.*)$ index.php?id=$1 [L] 
```

所以真正的 URL 是：

```
mysite.com/folder/999/TITLE-OR-NAME 
```

但是因为我只检查第一个文件夹`$1`，它是一个数字 ID，所以这个`.htaccess`文件允许黑客使用随机 URL 链接到我的网站，例如：

```
mysite.com/folder/999/TITLE-OR-NAME1
mysite.com/folder/999/TITLE-OR-NAME2
mysite.com/folder/999/TITLE-OR-NAME3
mysite.com/folder/999/TITLE-OR-NAME4
mysite.com/folder/999/TITLE-OR-NAME5 
```

当谷歌告诉我我在复制内容时，最糟糕的部分来了！！！

实际上我不是在复制内容，`.htaccess`而是在为我复制它。是的，我知道，我是一个糟糕的新手程序员，但我非常感谢你在这方面的帮助，因为我正在努力寻找解决方案，但它永远不会奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:29:48.670

您可能需要稍微调整一下，但应该让您接近：

```
RewriteRule ^([0-9]+)/([A-Za-z]*)([0-9]*)$ [R=404,L,NC]
RewriteRule ^([0-9]+)/(.*)$ index.php?id=$1 [L] 
```

R=404 表示如果遇到这种情况并且不再执行任何重写命令 (L)，则抛出 404。NC 表示不区分大小写。

**为固定 URL 编辑：** 这将转到每个固定页面，所有未列出的页面将转到 404。换句话说，它将检查 foo，然后检查 bar，依此类推，直到遇到结束情况；一个无效的 url，然后是 404。

```
RewriteRule ^([0-9]+)/(FOO){1}$ index.php?id=$2 [L]
RewriteRule ^([0-9]+)/(BAR){1}$ index.php?id=$2 [L]
...
RewriteRule ^([0-9]+)/(.*)$ [R=404,L,NC] 
```

# zend-framework - Zend 框架中一些动作的会话集

> ID：13603541
> 
> 赞同：0
> 
> 时间：2012-11-28T11:02:54.593
> 
> 标签：zend-framework, zend-auth

我在一个网站上工作，在简历部分用户有一些只有登录用户才能下载的文章。我想对登录 Action 或 preDispatch() 进行更改，以便为来宾用户设置会话以下载文章。

有人可以告诉我怎么做或给我一些参考链接吗？

这是我的 preDispatch()：

```
 public function preDispatch()
    {
        $userInfo=$this->_auth->getStorage()->read();
        $identity= $this->_auth->getIdentity();
        if(!$this->_auth->hasIdentity())
        {

            return $this->_helper->redirector('login','login');

        }
        if(!isset($userInfo["member_id"]) || strlen($userInfo["member_id"])==0)
        {
            return $this->_helper->redirector('forbidden','login');
        }
        $this->_accessType=2;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:44:06.760

如果您希望来宾用户具有不同的可访问性，您应该查看 Zend_Acl。这里有两个链接可以帮助您：[http](http://framework.zend.com/manual/1.12/en/learning.multiuser.authorization.html) : [//framework.zend.com/manual/1.12/en/learning.multiuser.authorization.html、Zend Auth 和 ACL](https://stackoverflow.com/questions/468863/zend-auth-and-acl)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T05:30:09.887

这对我有用：

```
public function _getGuestPremision()
{
    $_acl = new Zend_Acl();
    $_acl->add(new Zend_Acl_Resource('ref'));
    $_acl->add(new Zend_Acl_Resource('downloadendnote'),'ref');
    $_acl->add(new Zend_Acl_Resource('downloadmed','ref');
    $_acl->add(new Zend_Acl_Resource('downloadris','ref');

    $_acl->addRole(new Zend_Acl_Role('guest'));

    $_acl->allow('guest','ref','downloadendnote');
    $_acl->allow('guest','ref','downloadmed');
    $_acl->allow('guest','ref','downloadris');
    return $_acl ;
}
public function preDispatch()
{
    $this->$_gAcl = _getGuestPremision();

    if(!$this->_auth->hasIdentity())
    {

        if(!$_gAcl->isAllowed('guest','ref','downloadendnote'))
        {
            return $this->_helper->redirector('login','login');
        }   
        if(!$_gAcl->isAllowed('guest','ref','downloadmed'))
        {
            return $this->_helper->redirector('login','login');
        }   
        if(!$_gAcl->isAllowed('guest','ref','downloadris'))
        {
            return $this->_helper->redirector('login','login');
        }   
    }
    if(!isset($userInfo["member_id"]) || strlen($userInfo["member_id"])==0)
    {
        return $this->_helper->redirector('forbidden','login');
    }
    $this->_accessType=2;

} 
```

# asp.net - Quartz.net 在 Windows 服务上调度异常

> ID：13603547
> 
> 赞同：0
> 
> 时间：2012-11-28T11:03:13.967
> 
> 标签：asp.net, windows-services, quartz.net

我的代码在表单应用程序上运行良好，但相同的代码在 Windows 服务上不起作用！

* * *

## 启动

```
protected override void OnStart(string[] args)
{
    try
    {

        // First we must get a reference to a scheduler
        ISchedulerFactory sf = new StdSchedulerFactory();
        IScheduler sched = sf.GetScheduler();

        // get a "nice round" time a few seconds in the future...
        DateTimeOffset startTime = DateBuilder.NextGivenSecondDate(null, 15);

        // job1 will only fire once at date/time "ts"
        IJobDetail job = JobBuilder.Create<SimpleJob>()
            .WithIdentity("job1", "group1")
            .Build();

        ISimpleTrigger trigger = (ISimpleTrigger)TriggerBuilder.Create()
                                                      .WithIdentity("trigger1", "group1")
                                                      .StartAt(startTime)
                                                      .WithSimpleSchedule(x => x.WithIntervalInSeconds(60).RepeatForever())
                                                      .Build();

        // Tell quartz to schedule the job using our trigger
        sched.ScheduleJob(job, trigger);

        // Start up the scheduler (nothing can actually run until the 
        // scheduler has been started)
        sched.Start();
    }
    catch (Exception x)
    {
        Operation.Logger.Error("Servis başlatma hatası: "+x.StackTrace);

    }

} 
```

* * *

## 工作

```
public class SimpleJob : IJob
{
    bool inProgress = false;
    public virtual void Execute(IJobExecutionContext context)
    {
        if (!inProgress)
        {
            try
            {

                inProgress = true;

                Incoming incomingFiles = new Incoming();
                incomingFiles.Start();

                Outgoing outgoingFiles = new Outgoing();
                outgoingFiles.Start();

                inProgress = false;

            }
            catch (Exception x)
            {
                Operation.Logger.Error("f8job çalışma hatası: "+ x.Message);
                inProgress = false;
            }
        }

    }
} 
```

* * *

## 错误

```
 System.IO.FileNotFoundException: Could not load file or assembly 'Common.Logging,    Version=2.0.0.0, Culture=neutral, PublicKeyToken=af08829b84f0328e' or one of its dependencies. The system cannot find the file specified.
File name: 'Common.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=af08829b84f0328e'
   at Quartz.Impl.StdSchedulerFactory..cctor()

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog]. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:01:45.840

尝试将您的服务配置为在您的代码正常[运行的 Windows 帐户中运行。](http://www.coretechnologies.com/WindowsServices/FAQ.html#AppNotWorkingFromService)

# tumblr - Tumblr：如何在 TEXT 帖子中使用高分辨率照片？

> ID：13603551
> 
> 赞同：7
> 
> 时间：2012-11-28T11:03:34.713
> 
> 标签：tumblr, image-scaling

由于在stackoverflow的类似帖子中没有答案，我发布了这个......

当我在 tumblr 上发布 TEXT 帖子时，我的图像会缩小。如何使用我上传的原始照片的 HI-RES？

在模板中，我只看到这个，没有提示照片尺寸：

```
{block:Text}
    <section class="content">
        {block:Title}
        <h1>{Title}</h1>
        {/block:Title}
        {Body}
    </section>
{/block:Text} 
```

官方文档也无济于事：[http ://www.tumblr.com/docs/en/custom_themes#text-posts](http://www.tumblr.com/docs/en/custom_themes#text-posts)

见这里：[https ://dl.dropbox.com/u/14710157/scale.jpg](https://dl.dropbox.com/u/14710157/scale.jpg)

有任何想法吗？

非常感谢你，雨儿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-16T17:02:46.380

使用`{block:Posts inlineMediaWidth="1280"}`and`{/block:Posts}`代替`{block:Posts}`and `{/block:Posts}`。请参阅[如何在 Tumblr 的文本帖子中使用高分辨率照片？](https://stackoverflow.com/questions/33602635/how-to-use-high-resolution-photos-in-text-posts-in-tumblr)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:23:14.947

所以要回答这个...

Tumblr 将文本帖子中的图像大小调整为 500 像素的最大宽度。你无法改变这一点。

# swig - Robot Framework 抱怨 SWIG 生成的 python 文件不包含关键字

> ID：13603552
> 
> 赞同：1
> 
> 时间：2012-11-28T11:03:36.617
> 
> 标签：swig, robotframework

我正在使用 SWIG 从 C++ 为 Robot Framework 生成包装器作为测试库。RF 发出警告，因为它不包含关键字。

被测系统是一个Win32 DLL，LibLogin2，由VS向导创建。它默认导出函数：

```
LIBLOGIN2_API int fnLibLogin2(void);

// This is an example of an exported function.
LIBLOGIN2_API int fnLibLogin2(void)
{
    return 42;
} 
```

我将接口文件添加到项目中：

```
/* LibLogin2.i */
 %module LibLogin2
 %{
  extern int fnLibLogin2(void);
 %}

 extern int fnLibLogin2(void); 
```

LibLogin2.py、LibLogin2_warp.cxx、_LibLogin2.pyd 使用 Release|x64 成功构建。

我有一个射频测试用例如下：

```
*** Settings ***
Library LibLogin2.py

*** Test Case ***
Trivial
    ${value} =  fnLibLogin2
    Should Be Equal ${value}    ${42} 
```

我启动机器人框架并得到错误：

> pybot LoginTests.tsv [ WARN ] 导入的库 'LibLogin2.py' 不包含关键字

我可以通过注释掉 LibLogin.py 的最后一行来解决这个问题：

```
def fnLibLogin2():
  return _LibLogin2.fnLibLogin2()
#fnLibLogin2 = _LibLogin2.fnLibLogin2 
```

当您每次都必须注释掉每个关键字时，这很烦人。

请指教！

这是我的配置：

Windows 8 64 位 Visual Studio 2012 Python 2.6.6 机器人框架 2.7.5 swigwin-2.0.8

# android - VideoView 匹配父高度并保持纵横比

> ID：13603553
> 
> 赞同：36
> 
> 时间：2012-11-28T11:03:37.103
> 
> 标签：android, android-videoview, dimensions, aspect-ratio

我有一个这样设置的 VideoView：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
  android:id="@+id/player" 
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

    <VideoView
        android:id="@+id/video"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_centerInParent="true"
        android:layout_centerVertical="true" />

    <ProgressBar
        android:id="@+id/loader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" />

</RelativeLayout> 
```

但是VideoView匹配父容器的宽度，然后根据加载的影片的纵横比设置高度。
我想做相反的事情，我希望 VideoView 匹配父级的高度，同时保持纵横比不变，视频将被剪裁在两侧。

我设法拉伸 VideoView 以填充父级，但没有保留纵横比。

另一件事是，我将 MediaController 添加到 VideoView 中，如下所示：

```
MediaController controllers = new MediaController(this) {
    @Override
    public void hide() {
        if (state != State.Hidden) {
            this.show();
        }
        else {
            super.hide();
        }
    }
};
controllers.setAnchorView(videoView);
videoView.setMediaController(controllers);

videoView.setOnPreparedListener(new OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mediaPlayer) {
        controllers.show();
    }
}); 
```

这很好用，并且控制器始终保持打开状态，但是在计算放置视频的位置时没有考虑控制器的高度（因为它是垂直居中的）。

那么我的两个问题是：

1.  如何使 VideoView 与父级的高度匹配但保持纵横比？
2.  如何让 VideoView 考虑其控制器的高度？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-09-29T06:44:20.210

您应该从内置视频视图扩展。

在显示视频视图之前调用`setVideoSize`，您可以从视频中提取的缩略图中获取视频大小。

因此，当`onMeasure`调用视频视图时，`mVideoWidth`&`mVideoHeight`都 > 0。

如果你想考虑控制器的高度，你可以在`onMeasure`方法中自己做。

希望会有所帮助。

```
public class MyVideoView extends VideoView {

        private int mVideoWidth;
        private int mVideoHeight;

        public MyVideoView(Context context, AttributeSet attrs) {
            super(context, attrs);
        }

        public MyVideoView(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
        }

        public MyVideoView(Context context) {
            super(context);
        }

        public void setVideoSize(int width, int height) {
            mVideoWidth = width;
            mVideoHeight = height;
        }

        @Override
        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            // Log.i("@@@", "onMeasure");
            int width = getDefaultSize(mVideoWidth, widthMeasureSpec);
            int height = getDefaultSize(mVideoHeight, heightMeasureSpec);
            if (mVideoWidth > 0 && mVideoHeight > 0) {
                if (mVideoWidth * height > width * mVideoHeight) {
                    // Log.i("@@@", "image too tall, correcting");
                    height = width * mVideoHeight / mVideoWidth;
                } else if (mVideoWidth * height < width * mVideoHeight) {
                    // Log.i("@@@", "image too wide, correcting");
                    width = height * mVideoWidth / mVideoHeight;
                } else {
                    // Log.i("@@@", "aspect ratio is correct: " +
                    // width+"/"+height+"="+
                    // mVideoWidth+"/"+mVideoHeight);
                }
            }
            // Log.i("@@@", "setting size: " + width + 'x' + height);
            setMeasuredDimension(width, height);
        }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-07-30T21:01:08.903

我用布局解决了这个问题。当它被固定在角落时，它似乎工作正常，但它导致视频倾斜。为了测试，我将相对布局的背景更改为 #990000 以查看红色戳穿。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/relative_parent"
    android:background="#000000">
    <VideoView
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:id="@+id/videoView" />
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-10-27T19:41:30.637

关于问题 1，我很惊讶没有人提到可能使用 MediaPlayer 的缩放模式。 [https://developer.android.com/reference/android/media/MediaPlayer.html#setVideoScalingMode(int)](https://developer.android.com/reference/android/media/MediaPlayer.html#setVideoScalingMode(int))

它有2种模式。它们都总是填充视图区域。要让它在保持纵横比的同时填充空间，从而裁剪长边，您需要切换到第二种模式，`VIDEO_SCALING_MODE_SCALE_TO_FIT_WITH_CROPPING`. 这解决了问题的一部分。另一部分是改变 VideoView 的测量行为，正如其他一些答案所展示的那样。这就是我这样做的方式，主要是出于懒惰并且不熟悉其他人使用的元数据 API，欢迎您使用此方法或其他方法之一来修复视图的大小。在 mMediaPlayer 存在之前调用它时，毯子捕获可确保安全，因为它可能会被多次调用，并且如果字段名称发生更改，它也会回退到旧行为。

```
class FixedSizeVideoView : VideoView {
    constructor(ctx: Context) : super(ctx)
    constructor(ctx: Context, attrs: AttributeSet) : super(ctx, attrs)

    // rather than shrink down to fit, stay at the size requested by layout params. Let the scaling mode
    // of the media player shine through. If the scaling mode on the media player is set to the one
    // with cropping, you can make a player similar to AVLayerVideoGravityResizeAspectFill on iOS
    override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {
        try {
            val mpField = VideoView::class.java.getDeclaredField("mMediaPlayer")
            mpField.isAccessible = true
            val mediaPlayer: MediaPlayer = mpField.get(this) as MediaPlayer

            val width = View.getDefaultSize(mediaPlayer.videoWidth, widthMeasureSpec)
            val height = View.getDefaultSize(mediaPlayer.videoHeight, heightMeasureSpec)
            setMeasuredDimension(width, height)
        }
        catch (ex: Exception) {
            super.onMeasure(widthMeasureSpec, heightMeasureSpec)
        }
    }
} 
```

因此，在布局中使用此类，您只需在有机会的地方更改媒体播放器上的缩放模式。如：

```
 video.setOnPreparedListener { mp: MediaPlayer ->
            mp.setVideoScalingMode(MediaPlayer.VIDEO_SCALING_MODE_SCALE_TO_FIT_WITH_CROPPING)
            mp.isLooping = true
            mp.setScreenOnWhilePlaying(false)
        }
        video.start() 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-11-07T22:42:02.233

```
public class MyVideoView extends VideoView {
    private int mVideoWidth;
    private int mVideoHeight;

    public MyVideoView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MyVideoView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public MyVideoView(Context context) {
        super(context);
    }

    @Override
    public void setVideoURI(Uri uri) {
        MediaMetadataRetriever retriever = new MediaMetadataRetriever();
        retriever.setDataSource(this.getContext(), uri);
        mVideoWidth = Integer.parseInt(retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_VIDEO_WIDTH));
        mVideoHeight = Integer.parseInt(retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_VIDEO_HEIGHT));
        super.setVideoURI(uri);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // Log.i("@@@", "onMeasure");
        int width = getDefaultSize(mVideoWidth, widthMeasureSpec);
        int height = getDefaultSize(mVideoHeight, heightMeasureSpec);
        if (mVideoWidth > 0 && mVideoHeight > 0) {
            if (mVideoWidth * height > width * mVideoHeight) {
                // Log.i("@@@", "image too tall, correcting");
                height = width * mVideoHeight / mVideoWidth;
            } else if (mVideoWidth * height < width * mVideoHeight) {
                // Log.i("@@@", "image too wide, correcting");
                width = height * mVideoWidth / mVideoHeight;
            } else {
                // Log.i("@@@", "aspect ratio is correct: " +
                // width+"/"+height+"="+
                // mVideoWidth+"/"+mVideoHeight);
            }
        }
        // Log.i("@@@", "setting size: " + width + 'x' + height);
        setMeasuredDimension(width, height);
    }
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-08-12T20:11:58.457

使用 ConstraintLayout 我们可以实现这一点，参考下面的 xml 代码。

当 layout_width 和 layout_height 为 0dp 时，VideoView 的大小和位置是根据其他约束动态计算的。layout_constraintDimensionRatio 属性表示app在计算VideoView的大小时，宽高比应该是3:4。此约束使视频的纵横比保持不变，并防止视图在任一方向上被拉伸得太远（取决于设备的旋转方式）。

根据要求纵向/横向更改 layout_constraintDimensionRatio 值。

```
<androidx.constraintlayout.widget.ConstraintLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <VideoView
        android:id="@+id/videoView"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintDimensionRatio="3:4"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />
</androidx.constraintlayout.widget.ConstraintLayout> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-10-15T17:36:26.023

**快速有效的修复：**

无需创建从 VideoView 扩展的自定义视图。只需设置一个足够大的值即可`android:layout_width`。这会将`widthSpecMode`视频视图设置为`View.MeasureSpec.AT_MOST`，然后`onMeasure()`VideoView 的方法将自动调整其宽度，保持比例。

```
<VideoView
     android:id="@+id/video"
     android:layout_width="2000dp"
     android:layout_height="match_parent" /> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-22T10:35:33.390

第一次一个问题回答了我的问题而不是答案！我的问题是我在全屏视频下有一个空白区域。我正在设置`layout_height`为`match_parent`. 解决方案是将其设置为`wrap_content`并为父级提供黑色背景。那，并且`VideoView`在其父级中垂直居中。

> 我将其写为评论，但后来认为有人可能遇到与我相同的问题，所以这里也作为答案。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-12-21T15:05:49.957

我尝试了很多解决方案，而我的视频始终是 1000*1000 格式，所以我为知道宽高比的人创建了一个简单的解决方案。首先在 RelativeLayout 中创建一个 VideoView，如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/video_holder"
      android:layout_width="wrap_content"
      android:layout_height="fill_parent"
      android:clipToPadding="false">

      <VideoView  
          android:id="@+id/videoView"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:layout_alignParentBottom="true"
          android:layout_alignParentEnd="true"
          android:layout_alignParentStart="true"
          android:layout_alignParentTop="true" />
</RelativeLayout> 
```

然后在加载视频之前更改高度，并以如下方式编程：

```
 int i = videoView.getHeight() > videoView.getWidth() ? videoView.getHeight() : videoView.getWidth();
    video_holder.setLayoutParams(new ConstraintLayout.LayoutParams(i, i)); 
```

当然，这只适用于 1:1 的纵横比，但您可以使用纵横比来更改高度或宽度。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-20T10:18:01.943

Jobbert 在 Kotlin 中的回答，以防有人需要：

```
val max = if (videoView.height > videoView.width) videoView.height else videoView.width
videoView.layoutParams = ConstraintLayout.LayoutParams(max, max) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-05-07T15:52:44.547

只需将您的 VideoView 放入 RelativeLayout 并为该相对布局设置所需的大小。像下面的代码，

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="300dp">

    <VideoView
        android:id="@+id/videoView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_centerInParent="true" />

</RelativeLayout> 
```

它会起作用的。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-01-30T04:19:05.627

我一直在寻找在 VideoView 中以方面填充显示视频的方法，但是在尝试了许多解决方案之后，它们似乎都不起作用。

所以我实施了以下方法，它对我有用：

**代码：**

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    // getting screen size
    ((Activity) getContext()).getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
    int width = displayMetrics.widthPixels;
    int height = displayMetrics.heightPixels;

    double videoSizeRatio = (double) mVideoHeight / mVideoWidth;
    double screenSizeRatio = (double) height / width;

    if (mVideoWidth > 0 && mVideoHeight > 0) {
        if (videoSizeRatio > screenSizeRatio) { // screen is wider than video width
            height = (int) (videoSizeRatio * width);
        } else if (videoSizeRatio < screenSizeRatio) {
            width = (int) (height / videoSizeRatio);
        }

    }
    setMeasuredDimension(width, height);
} 
```

**布局：**

```
 <YourCustomizedVideoView
    android:id="@+id/videoView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    app:layout_constraintStart_toStartOf="parent"
    app:layout_constraintEnd_toEndOf="parent"
    app:layout_constraintTop_toTopOf="parent"
    app:layout_constraintBottom_toBottomOf="parent"
    /> 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2020-04-29T05:36:30.740

您只需将 Videoview 小部件放入 RelativeLayout（仅限 xml 文件中的更改）

这是参考答案[链接](https://stackoverflow.com/a/16191445/8265484)

# mongodb - Haskell Snap：mongodb字段类型错误

> ID：13603554
> 
> 赞同：0
> 
> 时间：2012-11-28T11:03:37.877
> 
> 标签：mongodb, haskell, haskell-snap-framework

我收到一个我无法解决的错误。snap 应用程序编译没有问题，一切似乎都很好。但是当我在浏览器中呈现相关页面时，我收到了这个错误：

Web 处理程序引发了异常。详细信息：[_id：50b56f19208c2e9a09dccc2b，id：1.0，代码：“hdg435”，名称：“froggy”]中的预期（“代码”：：整数）

代码值只是我为测试选择的一个随机字符串。我不确定为什么需要一个整数？

这些是示例快照应用程序的相关部分。

```
getData :: IO [Document]
getData = do
  pipe <- runIOE $ connect $ host "127.0.0.1"
  let run act = access pipe master "test" act
  result <- run (find (select [] "pcs") >>= rest)
  close pipe
  return $ either (const []) id result

mkSplice :: Document -> Splice AppHandler
mkSplice d = runChildrenWithText [dtp "id" d
                                 ,dtp "code" d
                                 ,dtp "name" d
                                 ]

dtp :: Text -> Document -> (Text,Text)
dtp tag d = (tag, T.pack $ show $ at tag d)

recSplice :: Splice AppHandler
recSplice = mapSplices mkSplice =<< liftIO getData

table :: Handler App App ()
table = heistLocal (bindSplice "rec" recSplice) $ render "table" 
```

table.tpl 的相关 Heist 模板部分在这里：

```
<table>
  <tbody>
    <rec>
      <tr><td><id/></td><td><code/></td><td><name/></td></tr>
    </rec>
  </tbody>
</table> 
```

请让我知道代码的其他部分需要发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:37:47.637

当我编译你的 dtp 函数时，我得到：

```
import Data.Bson
import Data.Text (Text)
import qualified Data.Text as T

dtp :: Text -> Document -> (Text,Text)
dtp tag d = (tag, T.pack $ show $ at tag d)

Ambiguous type variable `a0' in the constraints:
  (Show a0)
  [...] 
```

这很有意义。在您的情况下，当您真正想要 String 时，它似乎默认为 Integer。您可以尝试添加签名或更好，只需：

```
dtp tag d = (tag, at tag d) 
```

如果您希望它适用于其他类型，则必须更加努力。

**更新**

这是一个 GHCi 会话，它说明了问题以及 GHCi 如何将 Show 实例默认为 Integer：

```
Prelude Data.Bson> show $ at "hello" ["hello" =: "world"]
"*** Exception: expected ("hello" :: Integer) in [ hello: "world"] 
```

# python - python，当我使用 scipy 时无法从脚本执行

> ID：13603558
> 
> 赞同：1
> 
> 时间：2012-11-28T11:03:44.057
> 
> 标签：python, scipy, exe, py2exe, cx-freeze

我有一个 python 应用程序，我想提取可执行文件。我在其他脚本中使用 py2exe 没有问题。但是在这一个中，我遇到了我认为与我导入和使用 scipy 的事实有关的错误。

我的代码在 Eclipse 中运行良好。最初尝试使用 scipy 制作程序时，我丢失了 3 个 dll（“libmmd.dll”、“MSVCP90.dll”、“libifcoremd.dll”）。起初，我从 setup.py 中排除了这些，并且创建了 .exe 文件，但它没有运行。之后，我下载了 dll 文件（也删除了 setup.py 的排除项）并将它们添加到“C:\Python27\DLLs”以及“C:\Windows\System32”和“C:\Windows\SysWOW64”中（我有 64 位 windows7)。exe再次在文件夹dist中创建，但尝试运行它我得到了这个：http: [//imageshack.us/photo/my-images/145/py2exe.png/](http://imageshack.us/photo/my-images/145/py2exe.png/)

然后我尝试用 cx_Freeze 来做。再次创建了 .exe 文件，但出现此错误：http: [//img521.imageshack.us/img521/3843/cxfreeze.png](http://img521.imageshack.us/img521/3843/cxfreeze.png)

所以我认为它与 py2exe 或 cx_Freeze 无关，但事实上 scipy 需要一些依赖项，这些依赖项出于某种原因在 eclipse 中工作，但不是在我制作可执行文件时。

有人遇到过这个问题吗？关于我应该做什么的任何想法？先感谢您！

编辑：我用 pyinstaller-2.0\. 起初它没有运行。然后我将 DLL 添加到文件夹中，之后我将 numpy 和 scipy 添加到文件夹中，最后在出现错误消息后，我将 kdtree.py 添加到文件夹中。我很高兴看到它运行了！但后来又失望了，因为它只能在我的电脑上运行（那里有一些有用的 .exe）！我将它添加到一个保管箱文件夹中，它在我身上运行没有问题，但对其他人没有问题。我试过的其他机器的错误是：

importError：DLL 加载失败：%1 不是有效的 Win32 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:01:10.337

您可以尝试将 DLL 文件直接放在可执行文件旁边。我的 py2exe 还提供了一些有关您可能需要与应用程序一起分发的二进制文件的信息：

```
*** binary dependencies ***
Your executable(s) also depend on these dlls which are not included,
you may or may not need to distribute them.

Make sure you have the license if you distribute any of them, and
make sure you don't distribute files belonging to the operating system.
//Snip list of paths to dlls 
```

# java - Http 多部分请求

> ID：13603562
> 
> 赞同：0
> 
> 时间：2012-11-28T11:04:02.200
> 
> 标签：java, httprequest, multipartform-data, apache-httpclient-4.x

我正在尝试使用 httpClient 库上传图像（多部分/表单数据）。我可以使用 httpPost 方法和 byteArrayRequestEntity 上传图像。以下是我使用的代码：

```
 File file = new File(imageFilePath);

 HttpClient client = new HttpClient();

 PostMethod method = new PostMethod("https://domain/link/folderId/files?access_token="+accessToken);

 method.addRequestHeader("Content-Type","multipart/form-data;boundary=AaB03x");

 String boundary = "AaB03x";

 StringBuilder builder = new StringBuilder();
 builder.append("--");
 builder.append(boundary+"\r\n");
 builder.append("Content-Disposition: form-data; name=\"file\"; filename=\"photo.jpg\"");
 builder.append("\r\n");
 builder.append("Content-Type: image/jpeg");
 builder.append("\r\n");
 builder.append("\r\n");

 ByteArrayOutputStream baos = new ByteArrayOutputStream();
 baos.write(builder.toString().getBytes("utf-8"));
 builder.setLength(0);

 InputStream is = new FileInputStream(file);
 byte[] buffer = new byte[4096];
 int nbRead = is.read(buffer);
 while(nbRead > 0) {
     baos.write(buffer, 0, nbRead);
     nbRead = is.read(buffer);
 }

 is.close();
 builder.append("\r\n");
 builder.append("--");
 builder.append(boundary);
 builder.append("--");
 builder.append("\r\n");

 baos.write(builder.toString().getBytes("utf-8"));

 method.setRequestEntity(new ByteArrayRequestEntity(baos.toByteArray(), "multipart/form-data; boundary=\"" + boundary + "\""));

 System.out.println(method.getRequestEntity().toString());
 client.executeMethod(method); 
```

但我正在进行的项目要求我使用 httpRequest 而不是 Http PostMethod。我尝试使用 basicHttpEntityEnclosureRequest，但 setEntity 方法只接受一个 httpEntity（我使用的是 ByteArrayRequestEntity）。

谁能帮我修改代码以使其使用 HttpRequest（或其子类型）而不是 PostMethod？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:11:26.993

**-**我用于`apache-mime library`将带有消息的图像发布到 Web 服务器。

**这是我的生产环境中的代码：**

```
public String postDataCreation(final String url, final String xmlQuery,final String path){

        final StringBuilder sa  = new StringBuilder();

        final File file1 = new File(path);

        Thread t2 = new Thread(new Runnable(){

            public void run() {

                try
                {
                     HttpClient client = new DefaultHttpClient();
                     HttpPost post = new HttpPost(url);
                     FileBody bin1 = new FileBody(file1);

                     MultipartEntity reqEntity = new MultipartEntity();

                     reqEntity.addPart("dish_photo", bin1);

                     reqEntity.addPart("xml", new StringBody(xmlQuery));

                     post.setEntity(reqEntity);

                     HttpResponse response = client.execute(post);

                     HttpEntity entity = response.getEntity();
                        InputStream i = entity.getContent();

                        Log.d("Vivek", i.toString());
                        InputStreamReader isr = new InputStreamReader(i);

                        BufferedReader br = new BufferedReader(isr);

                        String s = null;

                        while ((s = br.readLine()) != null) {

                            Log.d("YumZing", s);
                            sa.append(s);
                        }

                        Log.d("Check Now",sa+"");

                }
                catch (Exception ex){
                     Log.e("Debug", "error: " + ex.getMessage(), ex);
                }

            }

        });

        t2.start();

        try {
            t2.join();
        } catch (InterruptedException e) {

            e.printStackTrace();
        }

        System.out.println("Getting from Post Data Method "+sa.toString());
        return sa.toString();
    } 
```

# objective-c - 如何使用 GPUImage 实现 instagram lux 效果？

> ID：13603563
> 
> 赞同：1
> 
> 时间：2012-11-28T11:04:01.697
> 
> 标签：objective-c, ios, image-processing, instagram, gpuimage

我的意思是，我需要使用哪些滤镜（亮度、对比度、曝光、伽玛、饱和度等）以及需要使用哪些值来获得类似的照片效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:32:59.960

不要重新发明轮子：）试试[FIlterKit](http://www.getfilterkit.com/)（基于 GPUImage）

# c#-3.0 - 如何使用 C# 在 Windows Phone 7 中创建 VCard

> ID：13603569
> 
> 赞同：1
> 
> 时间：2012-11-28T11:04:21.543
> 
> 标签：c#-3.0

如何使用 C# 在 windows phone 7 中创建 VCard 是否可以在 windows phone 7 中创建 VCard？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T07:01:40.833

windows phone 中没有用于 vcard 的内置库。

试试这个链接可能对[CodeProject 有帮助](http://vcardlibrary.codeplex.com/SourceControl/latest)

# ruby - 如何在 ruby on rails 中访问控制器中的参数值？

> ID：13603570
> 
> 赞同：-4
> 
> 时间：2012-11-28T11:04:32.877
> 
> 标签：ruby, ruby-on-rails-3.2

我的任务是访问参数值以创建新用户。我的创建控制器代码是

```
def newstudent
    @student = Student.new(params)
   puts "+++++++++++"
   puts params.inspect

    if @student.save 
    respond_to do |format|
      format.html # new.html.erb
      format.json { render :json => @jtable }
    end
    end
  end 
```

但是通过这样做，我在终端中遇到了一些错误。它显示如下

```
ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: action, controller):
  app/controllers/students_controller.rb:42:in `new'
  app/controllers/students_controller.rb:42:in `newstudent' 
```

请帮我解决问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T11:49:44.010

这是我添加新学生的控制器。通过收到该错误消息，您必须使用 `@student = Student.new(params.reject {|key,value| key =="controller" || key =="action"})`代码拒绝控制器和操作。

```
 def newstudent
        @student = Student.new(params.reject {|key,value| key =="controller" || key =="action"})

        if @student.save 
          @jtable = {'Result' => 'OK','Record' => @student.attributes}
        else
         @jtable = {'Result' => 'ERROR','Message'=>'Empty'}
        end  
        respond_to do |format|
          format.html # new.html.erb
          format.json { render :json => @jtable }
        end

      end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:39:45.787

在 rails 3.2.3 默认情况下没有质量分配。你必须去你的模型并添加 attr_accessible :name, :position, :visible。基本上，您必须添加要批量分配的每个属性。

```
 class Student < ActiveRecord::Base
    attr_accessible :name, :position, :visible
 end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:11:18.733

您的学生模型应该将可以批量分配的属性列入白名单，`attr_accessible`如下所示：

```
class Student < ActiveRecord::Base
  attr_accessible :name
end 
```

# android - Android Emulator，将端口转发到公共接口，而不是 localhost

> ID：13603571
> 
> 赞同：1
> 
> 时间：2012-11-28T11:04:44.563
> 
> 标签：android, android-emulator, portforwarding

我正在寻找如何将 Android 模拟器端口从模拟器转发到可公开访问的端口。我已将端口转发到主机本地环回接口上的端口，但我希望该端口可通过网络访问。这是尝试从远程构建服务器在模拟器中运行一些自动化测试的一部分。我目前无法从另一台机器访问端口，只能从 localhost 接口连接。即使尝试连接机器本身，如果使用机器的公共名称，端口也无法访问。

可能是模拟器不是为了在公共接口上公开端口而设计的。在那种情况下，我可能会看看我是否可以使用某种从公共接口到环回接口的 O/S 级端口转发来解决问题，如果这最终是唯一的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:44:00.467

我已经成功`stcppipe`地实现了这一点。它只是将 TCP 连接转发到任何本地机器接口到特定 IP 地址（在您的情况下它将是`localhost`）。

它可以从[Luigi Auriemma下载](http://aluigi.org/mytoolz.htm)

运行它：

```
stcppipe.exe localhost port port 
```

问候。

# json - facebook评论框插件在网站帖子中没有查看xx评论

> ID：13603572
> 
> 赞同：1
> 
> 时间：2012-11-28T11:04:45.683
> 
> 标签：json, wordpress, facebook-comments

我是facebook的初学者。我尝试将 facebook 评论框添加到我的每篇博客文章中，我限制它显示来自插件的 2 条评论，来自 facebook 评论框插件网站，他们将 url 设置为 example.com，它显示了一个完全不同的 UI我得到了什么。

更重要的是，在第二条评论之后没有查看XX评论，即使我添加了20条评论。

我可以知道我该如何解决吗？是我需要在我的 facebook 应用程序中设置的一些设置还是使用图形 api，我知道我可以从 facebook 图形站点获取 json，如 facebook 博客developers.facebook.com/blog/post/490/ 中所述

如果我需要使用 json 方式解决，我如何在使用 iframe 的网站内附加剩余的评论。

我希望有一个更简单的解决方案，比如在我的 facebook 应用程序中更改设置，而不是编写一个“查看 xx 评论”按钮来进行 ajax 调用并将结果附加到我自己的 dom 中。

# javascript - ckeditor 内联保存/提交

> ID：13603575
> 
> 赞同：13
> 
> 时间：2012-11-28T11:04:58.667
> 
> 标签：javascript, ajax, ckeditor

我不知道如何从 CKEditor 实例中获取已编辑的数据并将其发布到 url。

我在看这样的东西：

[http://nightly.ckeditor.com/3995/samples/inlineall.html](http://nightly.ckeditor.com/3995/samples/inlineall.html)

我不知道如何保存更改。我可以将新编辑的数据连同正在编辑的元素的 ID 一起发布到 PHP 中吗？

与此类似：

```
editor.on('configLoaded', function(){
    // do some stuff
}); 
```

我希望我能做这样的事情：

```
editor.on('clickAway', function(e){
    id = e.id();
    // do some ajax stuff
}); 
```

但我似乎无法在任何地方找到任何东西。

有没有人想出如何做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-05-12T01:18:02.680

我敢肯定有很多方法可以解决这个问题，但这是我的解决方案。我正在使用 Smarty 模板引擎，但这种技术也应该适用于普通 HTML。

首先，这是一个存储在名为“dog_fleas.tpl”的模板文件中的 HTML 示例：

```
<script type="text/javascript" src="/js/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="/js/admin/mycms.js"></script>
<div>
  <div id="flea-blurb" tpl="/templates/dog_fleas.tpl" contenteditable="true">
    <h1>My Dog Has Fleas</h1>
    <p>This text is editable via the CMS!</p>
  </div>
  <p>This text is not editable</p>
</div> 
```

处理内联编辑的 javascript (mycms.js) 是：

```
$(document).ready(function() {

    CKEDITOR.disableAutoInline = true;

    $("div[contenteditable='true']" ).each(function( index ) {

        var content_id = $(this).attr('id');
        var tpl = $(this).attr('tpl');

        CKEDITOR.inline( content_id, {
            on: {
                blur: function( event ) {
                    var data = event.editor.getData();

                    var request = jQuery.ajax({
                        url: "/admin/cms-pages/inline-update",
                        type: "POST",
                        data: {
                            content : data,
                            content_id : content_id,
                            tpl : tpl
                        },
                        dataType: "html"
                    });

                }
            }
        } );

    });

}); 
```

上面的代码做了几件事：

1.  它将任何具有 contenteditable = "true" 属性的 div 标签转换为内联可编辑。
2.  编辑内容后（模糊），可编辑的元素 id、tpl 文件名和编辑的内容通过 ajax 调用发送到服务器。

在我的情况下， tpl 属性是识别正在编辑的文件所必需的。元素 id 指定修改了哪个元素。

尽管我的示例仅包含一个可编辑区域，但此代码支持单个文件中的多个可编辑区域。

在服务器端，这是我的 PHP 代码。我正在使用一个框架，所以我的 $this->_POST() 函数可能看起来有点不寻常，但希望你明白这一点：

```
 // Get the posted parameters
    $new_content = $this->_POST('content');
    $content_id  = $this->_POST('content_id');
    $tpl_filename = $this->_POST('tpl');

    // Get the contents of the .tpl file to edit
    $file_contents = file_get_contents(APPPATH . 'views' . $tpl_filename);

    // create revision as a backup in case of emergency
    $revised_filename = str_replace('/', '.', $tpl_filename);
    $revised_filename = ltrim ($revised_filename, '.');
    file_put_contents(APPPATH . 'views/templates/revisions/' . $revised_filename . '.' . time(), $file_contents);

    // Prepare to match the DIV tag
    // Credit to: http://stackoverflow.com/questions/5355452/using-a-regular-expression-to-match-a-div-block-having-a-specific-id
    $re = '% # Match a DIV element having id="content".
        <div\b             # Start of outer DIV start tag.
        [^>]*?             # Lazily match up to id attrib.
        \bid\s*+=\s*+      # id attribute name and =
        ([\'"]?+)          # $1: Optional quote delimiter.
        \b' . $content_id . '\b        # specific ID to be matched.
        (?(1)\1)           # If open quote, match same closing quote
        [^>]*+>            # remaining outer DIV start tag.
        (                  # $2: DIV contents. (may be called recursively!)
          (?:              # Non-capture group for DIV contents alternatives.
          # DIV contents option 1: All non-DIV, non-comment stuff...
            [^<]++         # One or more non-tag, non-comment characters.
          # DIV contents option 2: Start of a non-DIV tag...
          | <            # Match a "<", but only if it
            (?!          # is not the beginning of either
              /?div\b    # a DIV start or end tag,
            | !--        # or an HTML comment.
            )            # Ok, that < was not a DIV or comment.
          # DIV contents Option 3: an HTML comment.
          | <!--.*?-->     # A non-SGML compliant HTML comment.
          # DIV contents Option 4: a nested DIV element!
          | <div\b[^>]*+>  # Inner DIV element start tag.
            (?2)           # Recurse group 2 as a nested subroutine.
            </div\s*>      # Inner DIV element end tag.
          )*+              # Zero or more of these contents alternatives.
        )                  # End 2$: DIV contents.
        </div\s*>          # Outer DIV end tag.
        %isx';

    if (preg_match($re, $file_contents, $matches))
    {
        $content_to_replace = $matches[0];

        $replacement_content = $content_to_replace;

        // Replace the inner content of $replacement_content with $new_content
        $replacement_content = preg_replace('/(<div(?:.*?)>)(?:.*)(<\/div>)/msi',"$1" . $new_content . "$2", $replacement_content);

        // Now replace the content_to_replace with $replacement content in the HTML
        $new_file_contents = str_replace($content_to_replace, $replacement_content, $file_contents);

        // write out the new .tpl file
        file_put_contents(APPPATH . 'views' . $tpl_filename, $new_file_contents);
    } 
```

上面的 PHP 代码基本上是加载 HTML，用正确的 id 定位 div 标签，然后用通过 ajax 调用发送的内容替换该 div 标签的内容。然后将 HTML 重新保存到服务器。我还包括一些代码来存储备份修订，以防万一出现严重错误。

我意识到正则表达式并不总是最好的解决方案。就我而言，使用 PHP Dom 对象模型很困难，因为我的 HTML 内容不是有效的 HTML。如果您的系统比我的更简单，您可能会考虑使用 Dom 对象模型。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:32:34.747

我找到了以下解决方案：[如何在服务器上保存内联编辑器内容？](https://stackoverflow.com/questions/13922002/ckeditor-inline-edit)

我正在使用模糊事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-17T17:53:10.297

使用@clone45 的上述答案并对其进行修改。数据将被保存总线`Save`按钮，只有在进行了一些更改后才比较旧数据和新数据。

覆盖内联编辑器的现有保存按钮并包含在下面仅提醒@clone45 答案的一部分。

```
<script>

CKEDITOR.disableAutoInline = true;
$("div[contenteditable='true']").each(function(index) {
    var content_id = $(this).attr('id');
    var tpl = $(this).attr('tpl');
    var oldData = null;
    CKEDITOR.inline(content_id, {
        on: {
            instanceReady: function(event) {
                //get current data and save in variable
                oldData = event.editor.getData();
                // overwrite the default save function
                event.editor.addCommand("save", {
                    modes: {
                        wysiwyg: 1,
                        source: 1
                    },
                    exec: function() {
                        var data = event.editor.getData();
                        //check if any changes has been carried out
                        if (oldData !== data) {
                            oldData = data;
                            $.ajax({
                                    type: 'POST',
                                    url: 'process.php',
                                    data: {
                                        content: data,
                                        content_id: content_id,
                                        tpl: tpl
                                    }
                                })
                                .done(function(data) {
                                    alert('saved');
                                })
                                .fail(function() {
                                    alert('something went wrong');
                                });
                        } else
                            alert('looks like nothing has been changed');
                    }
                });
            }
        }
    });
});

</script> 
```

希望这可以帮助！！

# sql-server-2005 - 报告服务错误：rsServerConfigurationError

> ID：13603577
> 
> 赞同：1
> 
> 时间：2012-11-28T11:05:07.310
> 
> 标签：sql-server-2005, reporting-services, windows-server

我工作的公司在本地有一个 MS Server 2005，带有 SQL Server 2005。他们面临的问题是，虽然他们可以登录到他们的平台并做他们想做的大部分事情（比如将数据导入数据库，编辑等）他们在尝试获取报告时收到以下消息：

> Reporting Services 错误：报表服务器遇到配置错误；日志文件中的更多详细信息 (rsServerConfigurationError)

在日志文件中，我找不到任何错误或任何更改。我应该怎么办？

# svn - 构建 vopenlayers 时出错

> ID：13603586
> 
> 赞同：0
> 
> 时间：2012-11-28T11:05:32.157
> 
> 标签：svn, maven, openlayers, vaadin

我想修复 vaadin openlayers Add-on 中的一些错误。因此，为了构建源代码，我按照此链接[http://code.google.com/p/vopenlayers/wiki/DevelopingAndBuilding](http://code.google.com/p/vopenlayers/wiki/DevelopingAndBuilding)中的步骤进行操作。但是，运行 mvn install 命令时出现此错误：

```
[INFO] Building Unnamed - org.vaadin.vol:openlayers-wrapper:jar:1.2.1-SNAPSHOT
[INFO]    task-segment: [install]
[INFO] ------------------------------------------------------------------------
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 146 resources
[INFO] skip non existing resourceDirectory /home/fakher/Desktop/vopenlayers-read-only/src/main/resources
[INFO] Copying 111 resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/fakher/Desktop/vopenlayers-read-only/src/test/resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Compiling 37 source files to /home/fakher/Desktop/vopenlayers-read-only/target/test-classes
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure

error: error reading /root/.m2/repository/org/eclipse/jetty/jetty-continuation/7.2.2.v20101205/jetty-continuation-7.2.2.v20101205.jar; error in opening zip file
error: error reading /root/.m2/repository/org/eclipse/jetty/jetty-http/7.2.2.v20101205/jetty-http-7.2.2.v20101205.jar; error in opening zip file
error: error reading /root/.m2/repository/org/eclipse/jetty/jetty-io/7.2.2.v20101205/jetty-io-7.2.2.v20101205.jar; error in opening zip file
error: error reading /root/.m2/repository/org/eclipse/jetty/jetty-util/7.2.2.v20101205/jetty-util-7.2.2.v20101205.jar; error in opening zip file
error: error reading /root/.m2/repository/org/eclipse/jetty/jetty-webapp/7.2.2.v20101205/jetty-webapp-7.2.2.v20101205.jar; error in opening zip file
error: error reading /root/.m2/repository/org/eclipse/jetty/jetty-xml/7.2.2.v20101205/jetty-xml-7.2.2.v20101205.jar; error in opening zip file
error: error reading /root/.m2/repository/org/eclipse/jetty/jetty-servlets/7.2.2.v20101205/jetty-servlets-7.2.2.v20101205.jar; error in opening zip file
error: error reading /root/.m2/repository/org/eclipse/jetty/jetty-client/7.2.2.v20101205/jetty-client-7.2.2.v20101205.jar; error in opening zip file 
```

谁能帮我解决这个问题？

PS：我使用的是 ubuntu 12.04 64bit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:11:40.463

您确定需要使用`root`.m2 文件夹吗？请不要使用它。这有助于避免与安全/权限相关的麻烦。

我猜您正在使用与 root 不同的用户配置文件进行 mvn install，并且您的 settings.xml 指向 .m2 下的 .m2 `root`。maven 进程试图通过 zip 文件提取一些依赖项，然后遇到文件权限问题。

# java - 地图 > 用于选择布尔复选框

> ID：13603588
> 
> 赞同：0
> 
> 时间：2012-11-28T11:05:46.987
> 
> 标签：java, jsf-2

我有一个 xhtml 文件和一个托管 bean，我在其中定义`Map<Integer, Boolean>` 了在视图层中使用它来支持`selectBooleanCeckbox`嵌套在分页中的`dataTable`.

这`Map`对于所有显示的`Cliente`内容都很常见，我真正需要的是 `Map<Cliente, Map<Integer, Boolean>>`每个客户都有其对应的地图。

实际问题是`NullPointerException`当我移动到`dataTable`.

如何`Map<Cliente, Map<Integer, Boolean>>`在视图层中迭代 a。

这是带有简单的xhtml文件`Map`，

```
<c:forEach items="#{adminCarritoBean.clientes}" var="map">
   <c:set value="#{0}" var="cont"/>
   <c:forEach items="#{map.keySet}" var="cliente">
      <rich:dataTable value="#{map.get(cliente)}" var="carrito"
         iterationStatusVar="it" rows="5">
         <h:column>
            <f:facet name="header">
               <h:outputText value="Select" />
            </f:facet>
            <h:selectBooleanCheckbox value="#adminCarritoBean.selectedIds[carrito.id]}" />
         </h:column>
         ------------------
         -----------------
         <f:facet name="footer">
            <rich:dataScroller page="#{adminCarritoBean.page[cont]}" />
         </f:facet>
      </rich:dataTable>
      <c:set value="#{cont + 1}" var="cont"/>
   </c:forEach>
</c:forEach> 
```

这是bean代码，

```
private Map<Integer, Boolean> selectedIds;
private List<Carrito> selectedDataList;    
private List<Map<Cliente, List<Carrito>>> clientes;

public void eliminar() {
   selectedDataList = new ArrayList<Carrito>();

   for (Map<Cliente, List<Carrito>> cliente: clientes) {
       Set<Cliente> keys = cliente.keySet();
       for(Iterator<Cliente> it = keys.iterator(); it.hasNext();) {
           Cliente clte = it.next();
           List<Carrito> carritos  = cliente.get(clte);
           for(Carrito dataItem: carritos) {
               if(selectedIds.get(dataItem.getId()).booleanValue()) {
                   selectedDataList.add(dataItem);
                   selectedIds.remove(dataItem.getId()); // Reset.
               }
           }
       }
   }

   for(Carrito crto: selectedDataList) {
       carritoDAO.eliminar(crto);
   }

   selectedIds = new HashMap<Integer, Boolean>();
   loadListClientes();
} 
```

该行`selectedIds.get(dataItem.getId()).booleanValue()`抛出该异常。

我该怎么做？

# matlab - a=(b==c) 在matlab中是什么意思？

> ID：13603590
> 
> 赞同：-8
> 
> 时间：2012-11-28T11:05:49.957
> 
> 标签：matlab

我试图寻找上述问题的答案，但无法提出适当的表述。那么，a=(b==c); 是什么意思？在matlab中做。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T11:09:45.863

如果您阅读`a=(b==c);`，您会看到

`a=(b==c);`你分配`(b==c)`给`a`

`(b==c)`意味着`b equals c?`这将导致`true`or `false`。

所以简而言之，你分配`true`给`a`当 b 等于 c 时。如果不是`false`，则分配给`a`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:10:08.467

*问*：等于`b`？`c`

*答案*在命题中`b==c`。

*问题：*如何存储命题的逻辑值？

*答：*在变量中`a = (b==c)`。

# zend-framework - 如何在 zend 框架中发出自定义请求

> ID：13603597
> 
> 赞同：0
> 
> 时间：2012-11-28T11:06:19.100
> 
> 标签：zend-framework

我想将 zend 框架用于具有相同功能但风格和语言不同的系列网站

网址是这样的

```
http://www.<style>.com/<language>/<controller>/<action> 
```

如何将插件添加到 zend 框架中以使其工作

我可以修改

```
$_SERVER['REQUEST_URI'] 
```

实现语言功能，但它破坏了视图中的网址。我应该为视图创建一个 url 助手吗？

并设置

```
$view->setScriptPath($_SERVER['HTTP_HOST']) 
```

在控制器中实现样式功能，但看起来真的不优雅

我希望能得到一个请求

```
$request->getParams() 
```

将返回

```
array(
    'controller'=> <controller>,
    'action'=><action>,
    'module'=><module>,
    'language'=><language>,
    'style'=><style>
) 
```

我该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:13:39.970

您必须为您的应用程序创建路由。请参阅[http://framework.zend.com/manual/1.12/en/zend.controller.router.html](http://framework.zend.com/manual/1.12/en/zend.controller.router.html)。您可以修改路线以包含语言。

# iphone - RightBarButtonItem 大写文本？

> ID：13603600
> 
> 赞同：2
> 
> 时间：2012-11-28T11:06:29.440
> 
> 标签：iphone, xcode, ios6, uinavigationbar

我的导航栏上有一个简单的编辑按钮，一旦点击变成完成，我正在尝试将“编辑”和“完成”上的文本更改为大写文本，这可能吗？有人知道我可以查看的教程吗？

```
self.navigationItem.rightBarButtonItem = self.editButtonItem; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:19:21.013

`UIBarButtonItem`在 .h 文件中创建 btnEdit 对象，如下所示：

```
UIBarButtonItem *btnEdit; 
```

然后在`.m`文件中写下这段代码：

```
- (void)viewWillAppear:(BOOL)animated{
    btnEdit = [[UIBarButtonItem alloc]init];
    btnEdit.target = self;
    btnEdit.action = @selector(btnEdit_Click:);
    btnEdit.title = @"EDIT";
    self.navigationController.topViewController.navigationItem.rightBarButtonItem = btnEdit;
    btnEdit.enabled=TRUE;
 }

- (IBAction)btnEdit_Click:(id)sender
{
    if ([btnEdit.title isEqualToString:@"EDIT"]) 
    {
        [btnEdit setTitle:@"DONE"]; 
    }
    else 
    {
        [btnEdit setTitle:@"EDIT"];   
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:12:07.653

```
UIBarButtonItem *newButton = [[UIBarButtonItem alloc] initWithTitle: @"EDIT" style: UIBarButtonItemStyleBordered target: nil action: @selector(editPressed:self)];

[[self navigationItem] setRightBarButtonItem: newButton animated:NO];

newBackButton = nil; 
```

进而：

```
- (void)editPressed:(id)sender
{
     // Your code
} 
```

# google-chrome - Google Chrome 中的 SSL 证书

> ID：13603603
> 
> 赞同：-1
> 
> 时间：2012-11-28T11:06:51.010
> 
> 标签：google-chrome, ssl-certificate, x509certificate, certificate-authority, certificate-store

我创建了自己的 CA 并签署了一个证书，以便在内部 HTTPS 网站上使用。我已将 CA 证书导入 IIS 机器上的受信任根证书颁发机构和中间证书颁发机构，并且站点证书绑定到端口 4433 上的站点。

这在 IE9 和 Firefox 上运行良好（即该站点是受信任的），但我仍然在 Chrome（版本 23.0.1271.91）中通过它获得一个带有红色分数的 HTTPS，表示该站点不受信任。

到目前为止，我遇到的所有内容都说将 CA 添加到 Trusted.... 但这在 Chrome 中似乎无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-20T15:24:42.057

我相信这是一个服务器/IIS 问题。尝试重新启动服务器并检查您的 SSL 到期日期....检查[此页面](https://stackoverflow.com/questions/15231738/cookie-only-sets-in-ie-and-not-firefox-chrome) 可能会对您有所帮助

# sql - 错误：聚合可能不会出现在 WHERE 子句中

> ID：13603604
> 
> 赞同：0
> 
> 时间：2012-11-28T11:06:52.680
> 
> 标签：sql, sql-server

我正在尝试获取列的最大值：

```
select * from
( select col1, count(*) as cnt from talbe1
group by col1
) dt
where cnt = max(cnt) 
```

我试图获得确切的价值，它的工作方式如下：

```
where cnt = 5 
```

或者

```
where cnt > 3 
```

没关系，那么第一个查询有什么问题？

编辑：我放在那里的数字（5、3）是完全随机的，我想获得最大数量的cnt。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:09:16.737

聚合子句必须放在该`HAVING`部分中。但是，这不适用于您的查询。您可能想要做的是：

```
select top 1 col1, count(*) as cnt 
from talbe1
group by col1
order by count(*) desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:10:55.973

您可以使用`HAVING`子句来做到这一点。例如，如果您想获取`cnt=3`记录

```
Select col1, count(*) as cnt from talbe1
Group by col1
Having count(*)=3 
```

如果你想得到`MAX(cnt)`

```
Select Top(1) col1, count(*) as cnt from talbe1
Group by col1
Order by cnt desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:11:40.887

我找到了一个解决方案，
这很简单：（我应该更加专注）

```
select max(cnt) from
( select Fld301, count(*) as cnt from TbC3
group by Fld301
) dt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T11:22:26.407

这个查询怎么样：

```
select * from
(
    select 
        col1, 
        count(*) as cnt, 
        RANK() OVER(ORDER BY count(*) DESC) AS ran 
    from talbe1 
    group by col1
) dt
where ran=1 
```

# java - Java RMI教程编译时报错——找不到接口

> ID：13603605
> 
> 赞同：0
> 
> 时间：2012-11-28T11:06:58.310
> 
> 标签：java, rmi

我在这里关注分布式系统的基本 Java RMI 教程：http: [//people.cs.aau.dk/~bnielsen/DS-E08/Java-RMI-Tutorial/](http://people.cs.aau.dk/~bnielsen/DS-E08/Java-RMI-Tutorial/)

我在编译我的服务器实现时遇到问题。

错误如下：

```
RMIServer.java:5: cannot find symbol
symbol: class ServerInterface
public class RMIServer extends UnicastRemoteObject implements ServerInterface {
                                                          ^
1 error 
```

这是我的服务器实现：

```
package rmiTutorial; 
import java.rmi.server.UnicastRemoteObject; 
import java.rmi.*; 

public class RMIServer extends UnicastRemoteObject implements ServerInterface { 

  private String myString = " "; 

  //Default constructor 
  public RMIServer() throws RemoteException { 
    super(); 
  } 

  //inherited methods 
  public void setString(String s) throws RemoteException { 
    this.myString =s; 
  } 

  public String getString() throws RemoteException{ 
    return myString; 
  } 

  //main: instantiate and register server object 
  public static void main(String args[]){ 
    try{ 
      String name = "RMIServer"; 
      System.out.println("Registering as: \"" + name + "\""); 
      RMIServer serverObject = new RMIServer(); 
      Naming.rebind(name, serverObject); 
      System.out.println(name + " ready..."); 
    } catch (Exception registryEx){ 
      System.out.println(registryEx); 
    } 
  }  
} 
```

服务器接口：

```
package rmiTutorial;                                                                                
import java.rmi.*;

public interface ServerInterface {

  public String getString() throws RemoteException;
  public void setString(String s) throws RemoteException;

} 
```

RMIServer 类和 ServerInterface 都在同一个包中。我完全按照教程进行了操作，所以我真的不明白我是如何设法打破它的！

任何帮助将不胜感激！谢谢。

托里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:12:20.453

我怀疑你正在单独编译这些。本教程对此并不清楚，但您需要将它们一起编译（在最简单的情况下）：

```
javac rmiTutorial/RMIServer.java rmiTutorial/ServerInterface.java 
```

（包括其他必要的适当标志 - 库、类路径等）。

您需要将两者一起编译，以便编译器可以`ServerInterface`在构建`RMIServer`. 您*可以*编译第`ServerInterface`一个，但随后您需要`RMIServer`使用合适的类路径引用来编译它，以便它可以找到接口。

# vb.net - 如何将此函数放在单独的线程中

> ID：13603606
> 
> 赞同：2
> 
> 时间：2012-11-28T11:07:00.873
> 
> 标签：vb.net, multithreading, visual-studio, backgroundworker

我的表单需要一点（或很大）帮助：我需要在单独的线程中使用“组织功能”区域内的所有内容。

我在表单的“开始按钮”区域中按下一个按钮来调用“组织功能”子程序的第一个子程序；第一个子调用第二个子，第二个子调用第三个子。

我尝试自己将第三个子添加到单独的线程中，然后使用第二个子将参数传递给线程，但我所做的一切都是错误的。

有人可以帮我这样做吗？

PS：我已经删除了这个表格中不重要的部分，以便您更好地检查。

感谢您的阅读。

```
Public Class Form1

#Region "Declarations"

        ' MediaInfo
        Dim MI As MediaInfo

        ' Thread
        Dim paused As Boolean = False

        ' Others
        Dim NameOfDirectory As String = Nothing
        Dim aFile As FileInfo

#End Region

    'thread
    Dim t As New Thread(AddressOf ThreadProc)

    Public Sub ThreadProc()
        ' Aqui debería ir  todo el sub de "organize function", bueno... son 3 subs!
        If paused = True Then MsgBox("THREAD PAUSADO")
    End Sub

#Region "Properties"
...
#End Region

#Region "Load / Close"
...
#End Region

#Region "Get Total files Function"
...
#End Region

#Region "Option checkboxes"
...
#End Region

#Region "Folder buttons"
...
#End Region

#Region "Append text function"
...
#End Region

#Region "Action buttons"

   ' pause button
    Private Sub pause_button_Click(sender As Object, e As EventArgs) Handles pause_button.Click
        paused = True
    End Sub

    ' start button
        Private Sub Button2_Click(sender As Object, e As EventArgs) Handles start_button.Click

              t.Start()

                    ' Organization process
                    NameOfDirectory = userSelectedFolderPath
                    MediaInfo(NameOfDirectory)

        End Sub

#End region

#Region "Organize function"

        Public Sub MediaInfo(Directory)
            Dim MyDirectory As DirectoryInfo
            MyDirectory = New DirectoryInfo(NameOfDirectory)
            MediaInfoWorkWithDirectory(MyDirectory)
        End Sub

        Public Sub MediaInfoWorkWithDirectory(ByVal aDir As DirectoryInfo)
            Dim nextDir As DirectoryInfo
            MediaInfoWorkWithFilesInDir(aDir)
            For Each nextDir In aDir.GetDirectories
                Using writer As StreamWriter = New StreamWriter(aDir.FullName & "\" & nextDir.Name & "\" & nextDir.Name & ".m3u", False, System.Text.Encoding.UTF8)
                    'overwrite existing playlist
                End Using
                MediaInfoWorkWithDirectory(nextDir)
            Next
        End Sub

        Public Sub MediaInfoWorkWithFilesInDir(ByVal aDir As DirectoryInfo)

            Dim aFile As FileInfo

            For Each aFile In aDir.GetFiles()

               ' hacer cosas con aFile ...

            Next

        End Sub

#End Region

End Class 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T11:43:04.160

有一个名为 BackgroundWorker 的 Windows 窗体组件，专门设计用于将长时间运行的任务从 UI 线程卸载到后台线程，从而使您的窗体美观且响应迅速。

BackgroundWorker 组件有一个名为 DoWork 的事件，用于在单独的线程上执行代码。将 BackgroundWorker 组件拖到表单上，然后执行以下操作：

```
Private Sub Button2_Click(sender As Object, e As EventArgs) Handles start_button.Click
    NameOfDirectory = userSelectedFolderPath
    backgroundWorker1.RunWorkerAsync(NameOfDirectory)
End Sub

Private Sub BackgroundWorker1_DoWork(sender As System.Object, e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    Dim directoryName as string = e.Argument

    MediaInfo(directoryName)
End Sub 
```

一些可能有用的链接是[MSDN BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)页面和一个示例[页面和Code Project](http://www.codeproject.com/Articles/20627/BackgroundWorker-Threads-and-Supporting-Cancel)。

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T11:53:21.167

有大约 5 打方法来解决这个问题。我将只展示其中的 3 个：

```
Public Class Form1

Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

    ' fire and forget:
    Task.Run(Sub() FooA()).ContinueWith(Sub() FooB()).ContinueWith(Sub() FooC())
    Console.WriteLine("Button1 done")

End Sub

Private Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click

    ' fire and forget:
    Task.Run(Sub()
                 FooA()
                 FooB()
                 FooC()
             End Sub)
    Console.WriteLine("Button2 done")

End Sub

Private Async Sub Button3_Click(sender As Object, e As EventArgs) Handles Button3.Click

    ' wait but dont block:
    Await Task.Run(Sub()
                       FooA()
                       FooB()
                       FooC()
                   End Sub)
    Console.WriteLine("Button3 done")

End Sub

Private Sub FooA()
    Threading.Thread.Sleep(1000)
    Console.WriteLine("A")
End Sub

Private Sub FooB()
    Threading.Thread.Sleep(1000)
    Console.WriteLine("B")
End Sub

Private Sub FooC()
    Threading.Thread.Sleep(1000)
    Console.WriteLine("C")
End Sub

End Class 
```

我建议使用`Await`（IF FW 4.x 和 VS2012 不是问题）。

# c# - 请求“System.Web.AspNetHostingPermission”类型的权限

> ID：13603613
> 
> 赞同：15
> 
> 时间：2012-11-28T11:07:18.510
> 
> 标签：c#, asp.net, localhost

我在运行我的网站时遇到了问题。

我已经开发了网站，当我点击 F5 查看结果时，我看到了这个错误

**说明**：应用程序试图执行安全策略不允许的操作。要授予此应用程序所需的权限，请联系您的系统管理员或在配置文件中更改应用程序的信任级别。

**异常详细信息**：System.Security.SecurityException：请求“System.Web.AspNetHostingPermission，System，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”类型的权限失败。

![错误页面](../Images/fc710cb6608486e94d3113380d5ddbb2.png)

我怎么解决这个问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-01-21T07:55:53.833

如果您在网络驱动器上映射应用程序文件夹或从 UNC 路径打开解决方案文件，通常会发生此错误。像这样的东西：

> 无效示例： **\\my-server\my-project**

尝试从直接路径打开您的解决方案

> 有效示例：**C:\Project\MyProject**

您还可以更改您的**App Pool Identity**权限，但不建议这样做：

> Web 服务器 (IIS) > 应用程序池标识 > 高级设置 > 将标识设置为 **网络服务**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-28T06:37:44.250

对我有用的一次性解决方案是将应用程序池**标识**（高级设置）设置为**网络服务**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-25T09:41:23.387

尝试将应用程序池的“加载用户配置文件”值设置为“真”。它对我有用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-02T16:55:12.033

对于它的价值，我发现`AjaxControlKit.dll`部署的服务器上的 被阻止了。为了解决这个问题，我将 dll 复制到一个新文件夹，然后复制并粘贴到该`bin`文件夹​​中。我猜.net 不喜欢将 dll 直接复制到 web 文件夹

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-28T11:19:36.740

您可以运行以下命令将 FullTrust 授予远程共享：

> C:\Windows\Microsoft.NET\Framework\v2.0.50727>caspol.exe -m -ag 1 -url "file:////\yourcomputername\yoursharename*" FullTrust -exclusive on

希望这可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-06T15:24:39.307

我尝试了此处发布的所有解决方案以及其他许多地方，但对我没有任何帮助。在我尝试在我的项目中使用 AjaxControlToolkit 2.0 之前，我的项目位于网络驱动器上。显然，有关网络驱动器权限的某些内容不允许工具包中的控件运行。我将我的项目移回本地硬盘，一切都开始工作了。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-07-22T14:42:01.060

我也遇到过这个问题，但在任何地方都没有看到这个特定的解决方案。

在检查 IIS 用户的权限、模拟用户并授予应用程序完全信任后，仍然出现错误，我在运行 IIS 的服务器上安装了 Procmon.exe 并注意到 IIS 试图访问一些 Framework64 文件违规网站。我检查了应用程序池高级设置，发现“启用 32 位应用程序”设置为 false。将此设置更改为 true 被证明是正确的操作。生活很好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-04T08:30:55.197

我面临同样的问题，然后我意识到我正在从远程文件夹运行解决方案。将必要的文件复制到本地文件夹将解决问题。但请确保您的文件夹具有完全权限

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-14T19:58:10.257

虽然此页面上的所有其他答案*可能*是任何人的问题的原因，但最常见的是由于 Windows Server 2012 及更高版本中的操作系统安全性更改。从 Internet 下载的任何文件都会被 Windows 标记为可疑文件，并且需要在 IIS 中使用之前手动解除阻止。因此，如果您 FTP 代码、通过电子邮件发送代码或通过云提供商传输代码，它将被标记和阻止。

最好的解决方案是使用 Visual Studio 中内置的 Web 发布工具，或者如果您在域中，则通过网络共享进行传输，每个都可以避免这个问题。但是，如果您必须通过我上面描述的一种方式将代码复制到另一台服务器，您应该在传输之前压缩所有内容，这样您就只剩下一个文件来解锁。如果您在取消阻止之前解压缩，则每个文件都将被阻止，并且多选不会让您选择取消阻止。

所以最后......解除阻止：右键单击文件并选择属性。在靠近底部的第一页上，您会看到一个取消阻止按钮以及该文件是从 Internet 下载的警告！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-22T17:18:12.963

我找到了一个适用于我的系统的潜在解决方案，并且不需要更改为`Network Service`.

转到应用程序池 -> 高级设置 -> 进程模型 -> 加载用户配置文件：True

[这个答案的来源](https://www.codeproject.com/Tips/822179/Request-for-the-Permission-of-Type-System-Web)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-08T11:06:13.493

如果使用此选项编译 dll（不要合并。为每个页面和控件创建单独的程序集），请确保 dll 是最新的。由于aspx文件是新文件，我遇到了错误，但dll仍然使用旧文件。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-01-29T17:31:53.967

我遇到了这个错误，它似乎是一个通用错误。由于这个问题有几个答案，我将添加我的。在远程服务器上重新发布网站似乎为我解决了这个问题。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-10-08T11:50:19.670

解决此问题的最佳方法是以“管理员”身份运行 Visual Studio。右键单击 Visual Studio 图标并选择“以管理员身份运行”。

以完全管理员权限打开 Visual Studio 后，您将能够毫无问题地访问该页面。

# javascript - 尝试在 Metro App 中连接到蓝牙 LE 设备时出现错误 80070005

> ID：13603614
> 
> 赞同：2
> 
> 时间：2012-11-28T11:07:21.503
> 
> 标签：javascript, microsoft-metro, bluetooth-lowenergy

我正在开发使用蓝牙低功耗技术连接到 Polar H7 心率监测器的跨平台应用程序。我只有 Windows 8 应用程序有问题。

要了解 LE 设备连接的可能性，我正在尝试启动蓝牙低功耗健康配置文件示例

[http://code.msdn.microsoft.com/windowsapps/Bluetooth-LE-Metro-sample-a2ba1b5b](http://code.msdn.microsoft.com/windowsapps/Bluetooth-LE-Metro-sample-a2ba1b5b)

所以，我的行动：

1.  首先我下载了​​这个示例的源代码并编译了它。我有一些问题。我住在俄罗斯莫斯科，我的时间是 UTC+4。当我尝试构建此示例时，出现错误“DriverVer 设置为不正确的日期（不允许过时的 DriverVer）”。我必须更改系统中的时区，然后构建成功。

2.  然后我将 Package.cer 添加到我的证书存储中并安装了驱动程序。

3.  我打开了设备元数据创作向导并使用以下参数制作了设备元数据包：

    包名称：Microsoft.SDKSamples.BluetoothLEHealthProfiles.JS 发布者：CN=Microsoft Corporation, O=Microsoft Corporation, L=Redmond, S=Washington, C=US BluetoothLEHealthProfiles.HealthDevicesApp

    特权数据部分中的重复数据并将访问自定义驱动程序设置为“true”

    硬件 ID：BTHLEDevice{0000180d-0000-1000-8000-00805f9b34fb}_LOCALMFG&000f BTHLE\Dev_fe65d3a17796 BTHLEDevice{0000180d-0000-1000-8000-00805f9b34fb}

    型号名称：心率服务制造商：Microsoft 类别：Health.HeartRate

4.  然后我安装复制这个元数据信息到系统，最后连接我的设备

5.  我创建了 StoreManifest.xml 文件并将我的 ExperienceID 粘贴到那里
6.  我已构建 Metro App Sample 并在尝试执行时收到错误 80070005

    deviceFactory.getDeviceFromIdAsync(devices[0].id, function (device) { ... }

我试图在几天内连接到 LE 设备，但结果是一样的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T14:28:22.620

我只是没有阅读所有手册，也没有更改商店包的属性。

# full-text-search - lucene 是否为每个请求调用数据源？

> ID：13603615
> 
> 赞同：-2
> 
> 时间：2012-11-28T11:07:24.993
> 
> 标签：full-text-search, search-engine, lucene

我是 Apache Lucene 的新手。请有人指导我 apache lucene 的工作原理。对于每个请求，它会从 lucene 索引中调用数据源（文档、数据库等）吗？或者它会单独查看索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:29:15.070

一旦文档被索引，Lucene 将只查看索引而不查看其他任何地方。

您还需要了解索引和在*索引中**存储*数据之间的区别。前者允许*找到*文档，而后者允许在找到相关文档时*读取数据。*

为什么这是必要的？有时您可以索引所有字段，但只存储 ID 并使用该 ID 从外部源（例如数据库）检索实际数据。或者，您可以将数据存储在索引中并从那里加载，而不是转到另一个数据源。

# visual-studio-2008 - 错误 1330。Visual Studio 2008，cab11.cab 的数字签名无效

> ID：13603616
> 
> 赞同：2
> 
> 时间：2012-11-28T11:07:26.377
> 
> 标签：visual-studio-2008, failed-installation

当我通过 alchohol120 安装 VS2008 时，因为它是 ISO 文件，它给了我这个错误“错误 1330。无法安装所需的文件，因为压缩文件 g:\cab11.cab 的签名无效。这可能表明内阁领域是腐败的。”

我尝试了一些方法，例如为 SQL express 和 Visual c++ 选择自定义安装和未选中选项，但没有帮助。

然后我检查了 cab11.cab 的数字签名，上面有一个红叉，尝试安装证书，但再次没有帮助。

甚至试图将文件夹的内容从虚拟驱动器复制到我的硬盘，但它显示“违反文件完整性”

所以任何人都可以告诉我现在该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T05:56:31.393

问题已解决。我所做的是，当我检查 cab 文件的签名时，它说它从 2007 年到 2009 年有效，所以我只是将系统的日期更改为 2008 年，将文件重新复制到硬盘并重新安装它，它可以工作，但如果它仍然需要检查工作正常，一旦对其工作满意，将更新。

# php - 根据结束日期每月有效订阅？

> ID：13603634
> 
> 赞同：2
> 
> 时间：2012-11-28T11:08:15.480
> 
> 标签：php, mysql

//嗨我有这个mysql表

```
id    price     startDate     endDate

1     200       2012-01-10   2012-03-15 
2     250       2012-02-15   2012-03-18 
3     100       2012-02-11   2012-02-20 
4     260       2012-03-22   2012-04-15 
```

我想要的是每月获得订阅的总收入，这样的输出就是

```
201201    200
201202    550     //(250 + 200 + 100)
201203    710     //(260 + 200 + 250)
201204    260 
```

我自己对此的解决方案是基于大量的 php 循环和临时变量，但我认为必须有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:10:35.410

使用聚合函数和分组：

```
SELECT SUM(price), endDate FROM table GROUP BY endDate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:28:00.167

我认为这会做正确的把戏

```
SELECT YEAR(startDate)year, MONTH(startDate)month, SUM(price)price FROM table GROUP BY MONTH(startDate) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:31:55.953

我会再试一次，但这将有多个查询：

```
$totalMonths = ($maxDateYear - $minDateYear) * 12 - $minDateMonth + $maxDateMonth;
$year = $minDateYear;
$month = $minDateMonth;
$st = $pdo->prepare("SELECT SUM(price) FROM table WHERE startDate < ? and endDate >= ?");

for ($i = 0; $i < $totalMonths; $i++) {
    $date1 = "$year-$month-01";
    if (++$month > 12) { $month = 1; $year++; }
    $date2 = "$year-$month-01";
    $st->execute(array($date2, $date1));
    echo "$date1: " . $st->fetchColumn();
} 
```

# extjs - 在 XTemplate 中显示空数据的错误消息

> ID：13603636
> 
> 赞同：0
> 
> 时间：2012-11-28T11:08:24.503
> 
> 标签：extjs

ExtJS XTemplate 允许您`.`在`for`标签中使用来遍历存储中的所有记录：

```
tpl: new Ext.XTemplate(
    '<tpl for=".">',
    '<div>{thing}</div>',
    '</tpl>'), 
```

如果集合为空（即，如果从未输入过 for 循环），我想呈现一条消息。我已经设置了`allowEmptyStore: true`。

如何使用 if 语句来确定商店是否为空。我试过`if(".")`,`if(Ext.empty(.)`和`if(Ext.empty(this.myStore))`. 我猜这是与模板相当常见的事情。我缺少什么神奇的语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:42:56.853

解决方案在于魔术`values`变量。如果底层存储为空，将触发以下内容：

```
'<tpl if="!(values && values.length)">',
...
'</tpl>', 
```

# javascript - 使 enyo.canvas 适合

> ID：13603642
> 
> 赞同：4
> 
> 时间：2012-11-28T11:09:07.467
> 
> 标签：javascript, enyo

我有这个小提琴：http: [//jsfiddle.net/y9mhE/3/](http://jsfiddle.net/y9mhE/3/)

现在我想让画布控件适合父 div。由于它继承了 enyo.control 我应该能够使用 'fit' 属性，但这似乎不起作用。

这是一个错误，还是我错过了什么

( [http://enyojs.com/api/#enyo.Canvas](http://enyojs.com/api/#enyo.Canvas) )

画布控件有一个宽度和高度属性（默认为 500），也许这会覆盖 fit 属性？

我必须在此处包含代码，因此：

```
enyo.kind({
    name: "App",
    kind: enyo.Control,
    fit: true,
    components: [
    {
        kind:enyo.Canvas,
        name:"canvas",
        fit:true

    }
    ]
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:26:34.253

*fit*属性不属于 enyo.Control 种类，它只能在 fittable 种类中使用。因此，将您的应用类型更改为“FittableColumns”或“FittableRows”（或将 layoutKind 设置为“FittableColumnsLayout”或“FittableRowsLayout”），如下所示：

```
enyo.kind({
    name: 'App',
    kind: 'FittableColumns',
    /* or:
    kind: enyo.Control,
    layoutKind: 'FittableColumnsLayout', */
    components: [
        {
            name: 'canvas',
            kind: enyo.Canvas,
            fit: true // works now because of parents fittable layout
        }
    ]
}); 
```

我更新了你的小提琴：http: [//jsfiddle.net/y9mhE/7/](http://jsfiddle.net/y9mhE/7/)

# python - 获取引用对象的 ID 而不获取它

> ID：13603643
> 
> 赞同：1
> 
> 时间：2012-11-28T11:09:12.287
> 
> 标签：python, mongodb, mongoengine

假设我有一个名为 Post 的 MongoEngine 文档类：

```
class Post(Document):
    author = ReferenceField(Author) 
```

如何在不获取实际作者对象的情况下获取帖子的作者 ID？

如果我写

```
print post.author.id 
```

MongoEngine 对数据库进行查询以获取作者对象。我可以写

```
print post._data["author"] 
```

`author`如果字段已被取消引用，则返回 Author 对象，否则返回DBRef 对象。

有这样做的标准方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:30:37.100

怎么样：

```
post.to_mongo()['author'].id 
```

# c# - RenderTransform 不影响孩子可能 Inverse

> ID：13603647
> 
> 赞同：0
> 
> 时间：2012-11-28T11:09:19.593
> 
> 标签：c#, wpf

我正在使用触摸事件调整画布的大小，如下所示：

```
e.Handled = true;
var transformation = MyCanvas.RenderTransform as MatrixTransform;
var matrix = transformation == null ? Matrix.Identity :transformation.Matrix;

matrix.ScaleAt(e.DeltaManipulation.Scale.X,
               e.DeltaManipulation.Scale.Y,
               e.ManipulationOrigin.X,
               e.ManipulationOrigin.Y);

MyCanvas.RenderTransform = new MatrixTransform(matrix); 
```

画布有几个子画布。我不想调整它们的大小，实际上需要它们变小。所以看着 RenderTransform.Inverse 但我没有任何快乐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:15:23.470

**阅读下面的评论后编辑**

在这种情况下，您可能希望使用不同的轴范围重新绘制图表。RenderTransform 可能不够准确，实际上您将不得不缩减其他所有内容（轴、标签、网格线......）

**以前的答案，仍然有效**

您将不得不遍历子画布并单独缩放它们。据我所知，没有支持你想要的东西。

您将必须同时应用反向缩放变换来否定父级的调整大小和使它们更小的缩放变换。

发布您正在使用的代码以获得更详细的帮助和/或反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:25:49.183

您可以通过从[Panel](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.aspx)继承来**创建自定义画布**

1.  一个新的依赖属性：NonInheritableScale

2.  将变换的比例绑定到 NonInhertiableScale 属性之间的绑定

3.  覆盖 MeasureOverride() 和 ArrangeOverride() 方法，
    以便在布局期间考虑 1.0/NonInhertiableScale.X 和 1.0/NonInhertiableScale.Y。

这是一篇关于[创建自定义 WPF 面板](http://wpftutorial.net/CustomLayoutPanel.html)的文章，可能会对您有所帮助（搜索结果，尚未阅读）。

# javascript - 如果两个刻度具有相同的值，d3 轴不显示刻度标签

> ID：13603648
> 
> 赞同：1
> 
> 时间：2012-11-28T11:09:22.033
> 
> 标签：javascript, charts, d3.js

我已经修改了示例 [d3.js yaxis 中的数据结构，没有将所有刻度正确绘制](https://stackoverflow.com/questions/12148188/d3-js-yaxis-not-drawing-all-the-ticks-properly)到

```
 [{name: "john",value: 4500},
        {name: "peter",value: 3000},
        {name: "tom",value: 2500},
        {name: "john",value:2000}]; 
```

绘制图表时，第四个名字，即 2nd john 没有出现在图表中，为什么会出现这种行为以及如何让它出现在图表中

这是它的乐趣[http://jsfiddle.net/hyder/pFEEW/](http://jsfiddle.net/hyder/pFEEW/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:49:27.440

如果仔细观察，您会发现第一项和第四项的条形图绘制在相同的位置并重叠。

根本问题是代码使用数据本身（重复）来识别单个元素。如果您希望不同的元素具有相同的数据值，则需要为它们提供唯一标识符，以便代码能够区分它们。代码中的刻度设置为相同的输入值将映射到相同的输出值，即如果您有相同的名称，则将在相同位置绘制条形图。

解决此问题的一种方法是使用唯一 ID 作为比例函数的输入，然后使用格式化程序从该 ID 制作标签。

# r - R中具有persp函数的响应面

> ID：13603650
> 
> 赞同：1
> 
> 时间：2012-11-28T11:09:28.017
> 
> 标签：r, graph

我正在使用[此处给出](https://stackoverflow.com/a/7935767/707145)的以下代码。在 `R 2.15.2`此代码中产生以下错误：

> 找不到函数“contour.lm”

我在这里想念什么？

```
ct<-structure(list(Conc = c(50L, 100L, 150L, 50L, 100L, 150L, 50L, 
100L, 150L, 100L, 100L, 100L), kGy = c(10L, 10L, 10L, 15L, 15L, 
15L, 20L, 20L, 20L, 15L, 15L, 15L), CT.Y. = c(75L, 65L, 51L, 
87L, 93L, 89L, 81L, 86L, 78L, 92L, 93L, 92L)), .Names = c("Conc", 
"kGy", "CT.Y."), class = "data.frame", row.names = c(NA, -12L))
library(rsm)
ct.rsm<-rsm(CT.Y.~SO(Conc, kGy), data=ct)
 persp.lm <- 
function (x, form, at, bounds, zlim, zlab, xlabs, col = "white", xlab=xlab,
    contours = NULL, hook, atpos = 3, theta = -25, phi = 20, 
    r = 4, border = NULL, box = TRUE, ticktype = "detailed", ylab,
    ... ) 
{
    draw.cont.line = function(line) {
        if (cont.varycol) {
            cont.col = col
            if (length(col) > 1) 
                cont.col = col[cut(c(line$level, dat$zlim), length(col))][1]
        }
        polygon(trans3d(line$x, line$y, cont.z, transf), col = cont.col, 
            lwd = cont.lwd)
    }
    plot.data = contour.lm(x, form, at, bounds, zlim, xlabs, 
        atpos = atpos, plot.it = FALSE)
    transf = list()
    if (missing(zlab)) 
        zlab = ""
    facet.col = col
    cont = !is.null(contours)
    if (mode(contours) == "logical") 
        cont = contours
    cont.first = cont
    cont.z = cz = plot.data[[1]]$zlim[1]
    cont.col = 1
    cont.varycol = FALSE
    cont.lwd = 1
    if (is.character(contours)) {
        idx = charmatch(contours, c("top", "bottom", "colors"), 
            0)
        if (idx == 1) {
            cont.first = FALSE
            cont.z = plot.data[[1]]$zlim[2]
        }
        else if (idx == 2) {
        }
        else if (idx == 3) {
            cont.varycol = TRUE
            if (length(col) < 2) 
                col = rainbow(40)
        }
        else cont.col = contours
    }
    else if (is.list(contours)) {
        if (!is.null(contours$z)) 
            cz = contours$z
        if (is.numeric(cz)) 
            cont.z = cz
        else if (cz == "top") {
            cont.first = FALSE
            cont.z = plot.data[[1]]$zlim[2]
        }
        if (!is.null(contours$col)) 
            cont.col = contours$col
        if (!is.null(contours$lwd)) 
            cont.lwd = contours$lwd
        if (charmatch(cont.col, "colors", 0) == 1) {
            cont.varycol = TRUE
            if (length(col) < 2) 
                col = rainbow(40)
        }
    }
    for (i in 1:length(plot.data)) {
        dat = plot.data[[i]]
        cont.lines = NULL
        if (!missing(hook)) 
            if (!is.null(hook$pre.plot)) 
                hook$pre.plot(dat$labs)
        if (cont) 
            cont.lines = contourLines(dat$x, dat$y, dat$z)
        if (cont && cont.first) {
            transf = persp(dat$x, dat$y, dat$z, zlim = dat$zlim, xlab=ylab,
                theta = theta, phi = phi, r = r, col = NA, border = NA, 
                box = FALSE)
            lapply(cont.lines, draw.cont.line)
            par(new = TRUE)
        }
        if (length(col) > 1) {
            nrz = nrow(dat$z)
            ncz = ncol(dat$z)
            zfacet = dat$z[-1, -1] + dat$z[-1, -ncz] + dat$z[-nrz, 
                -1] + dat$z[-nrz, -ncz]
            zfacet = c(zfacet/4, dat$zlim)
            facet.col = cut(zfacet, length(col))
            facet.col = col[facet.col]
        }
        transf = persp(dat$x, dat$y, dat$z, xlab = xlab, 
             zlab = zlab, zlim = dat$zlim, ylab=ylab,
            col = facet.col, border = border, box = box, theta = theta, 
            phi = phi, r = r, ticktype = ticktype)
        if (atpos == 3) 
            title(sub = dat$labs[5])
        if (cont && !cont.first) 
            lapply(cont.lines, draw.cont.line)
        if (!missing(hook)) 
            if (!is.null(hook$post.plot)) 
                hook$post.plot(dat$labs)
        plot.data[[i]]$transf = transf
    }
    invisible(plot.data)
}

persp(ct.rsm, Conc ~ kGy, col=rainbow(50), theta=60, xlab="Something",
    phi=0, r = 3, d=1, border = NULL, ltheta = -135, lphi = 0
    , shade = 0.75, zlab="CT",ylab="Concentration %", col.axis=37, font.lab=2,col.lab=33,
    contour=("colors")) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T11:39:28.807

如果你看`methods('contour')`，你会发现那`contour.lm`是不可见的。

您可以通过`:::`语法访问它。例如。`rsm:::contour.lm`

在您的代码中替换它使其工作。

请注意，如果`persp`在包中，您可以使用一些变体`import`来确保`contour.lm`在包命名空间的搜索路径上可用。

# iphone - 如何将子视图添加到全屏 MPMoviePlayer

> ID：13603651
> 
> 赞同：0
> 
> 时间：2012-11-28T11:09:28.507
> 
> 标签：iphone, ios, xcode, ipad, media-player

我想向`UIImageView`全屏 MPMoviePlayerController 添加一个 Logo ()。

`MPMoviePlayerController`当不在全屏模式时它工作正常。当我切换到全屏时，所有添加的视图都已`MPMoviePlayerController`删除（隐藏）。

这是我的代码：

```
- (void)setupMPMoviePlayer{
    [self.moviePlayer.view removeFromSuperview];
    [self removeNotifications];
    self.moviePlayer = nil;

    self.moviePlayer = [[MPMoviePlayerController alloc] init];

    [self addNotifications];

    [self.moviePlayer.view setFrame:self.view.bounds];
    self.moviePlayer.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    self.moviePlayer.fullscreen = NO;
    [self.view addSubview:self.moviePlayer.view];

    if ([self.moviePlayer respondsToSelector:@selector(setAllowsAirPlay:)])
        [self.moviePlayer setAllowsAirPlay:YES];

    [self.moviePlayer setContentURL:[NSURL URLWithString:urlString]];
    [self.moviePlayer setFullscreen:YES animated:YES];
    [self addLogoViewAtView:self.moviePlayer.view];
}

- (void)addLogoViewAtView:(UIView *)view{        
    UIView *theView = [view viewWithTag:101];
    if (theView.superview) {
        [theView removeFromSuperview];
    }

    UIImageView *logoView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"logo_weiss.png"]];
    logoView.tag = 101;
    logoView.frame = CGRectMake( logoView.image.size.width - 100.0,
                                100.0,
                                logoView.image.size.width,
                                logoView.image.size.height);
    logoView.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin;    
    [view addSubview:logoView];
    [view bringSubviewToFront:logoView];
} 
```

现在我的问题是有另一种添加子视图的方法`MPMoviePlayerController`吗？

我可以将徽标添加到应用程序的窗口，但这不是很干净。

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:25:38.293

最合适的全屏模式在 keyWindow 为应用程序添加 MPMoviePlayerController 视图或在上面显示模态视图控制器。因此，您可以尝试在 window.subviews 或moviePlayer 的模态视图控制器中查找视图。

# facebook-login - Facebook 登录按钮：iOS 上 Chrome 错误的解决方法

> ID：13603653
> 
> 赞同：2
> 
> 时间：2012-11-28T11:09:35.057
> 
> 标签：facebook-login

目前，我正在尝试解决登录 Facebook 开发人员的错误： [https ://developers.facebook.com/bugs/325086340912814/](https://developers.facebook.com/bugs/325086340912814/)

我正在使用带有 Facebook C# SDK 和 Facebook Javascript SDK 的 ASP.NET MVC 3。

这是javascript代码：

```
window.fbAsyncInit = function () {
// init the FB JS SDK
FB.init({
    appId: '298365513556623', // App ID from the App Dashboard
    channelUrl: 'http://www.christianinfoportal.com/channel.html', // Channel File for x-domain communication
    status: true, // check the login status upon init?
    cookie: true, // set sessions cookies to allow your server to access the session?
    xfbml: true  // parse XFBML tags on this page?
});

// Additional initialization code such as adding Event Listeners goes here
FB.Event.subscribe('auth.authResponseChange', function (response) {
    if ((response.status == 'connected')) {
        if (fbIgnoreFirstEventFire)
            fbIgnoreFirstEventFire = false;
        else {
            // the user is logged in and has authenticated your
            // app, and response.authResponse supplies
            // the user's ID, a valid access token, a signed
            // request, and the time the access token 
            // and signed request each expire
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;

            // TODO: Handle the access token
            // Do a post to the server to finish the logon
            // This is a form post since we don't want to use AJAX
            var form = document.createElement("form");
            form.setAttribute("method", 'post');
            form.setAttribute("action", '/FBLogin');

            var field = document.createElement("input");
            field.setAttribute("type", "hidden");
            field.setAttribute("name", 'accessToken');
            field.setAttribute("value", accessToken);
            form.appendChild(field);

            var field = document.createElement("input");
            field.setAttribute("type", "hidden");
            field.setAttribute("name", 'returnUrl');
            field.setAttribute("value", window.location.href);
            form.appendChild(field);

            document.body.appendChild(form);
            form.submit();
        }
    } else if (response.status == 'not_authorized') {
        // the user is logged in to Facebook, 
        // but has not authenticated your app
    } else {
        // the user isn't logged in to Facebook.
    }
    });
};

// Load the SDK's source Asynchronously
(function (d, debug) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) { return; }
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
}(document, /*debug*/ false)); 
```

查看代码非常简单：

```
<div id="fbLoginButton" class="fb-login-button" data-show-faces="false" data-width="50" data-max-rows="1" data-scope="email"></div> 
```

我基本上将访问令牌转发到服务器端代码页：

```
public ActionResult FBLogin(String returnUrl)
    {
        var accessToken = Request["accessToken"];

        //FB fires even without the user clicking the Log In button
        Session["FBLoginFirstClick"] = true;

        //Session["AccessToken"] = accessToken;

        //this.lblAccessToken.Text = accessToken;
        //Response.Redirect("/MyUrlHere");

        var client = new Facebook.FacebookClient(accessToken);
        dynamic me = client.Get("me");

        String email, fullName;
        fullName = me.first_name + " " + me.last_name;
        email = me.email;

        Models.User.ThirdPartyLogin(email, fullName, Session);

        if (!string.IsNullOrEmpty(returnUrl))
        {
            return Redirect(returnUrl);
        }
        else
        {
            return RedirectToAction("Index", "Home");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T08:33:32.070

通过使用 Facebook 身份验证重定向解决。

[https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/](https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/)

# winforms - 只检查一个 ToolStripMenuItem

> ID：13603654
> 
> 赞同：9
> 
> 时间：2012-11-28T11:09:38.313
> 
> 标签：winforms, checked, toolstrip, toolstripdropdown, toolstripitem

我有一个`ToolStrip`带有多个`ToolStripDropDownButton`s 的，每个都有一组`DropDownItems`.

当用户单击 DropDownItem 时，将显示复选标记。

![在此处输入图像描述](../Images/d323bc49316b562620886e0687f75479.png)

默认情况下，可以单击多个项目，因此会出现多个复选标记。

![在此处输入图像描述](../Images/e0ad14054d2061646f486d7ce2f2a610.png)

我想要做的是当用户单击一个 DropDownItem 时，应该取消选中其他已选中的项目。换句话说，DropDown 列表中应该始终只有一个选中项。

我已经涉足了一段时间，但我真的不知道如何在取消选中其他项目的同时保持当前选中的项目不变。

以下是我现在拥有的代码。

```
private void subietm1ToolStripMenuItem_Click(object sender, EventArgs e)
        {
            UncheckOtherToolStripMenuItems(sender);
        }

        public void UncheckOtherToolStripMenuItems(object selectedMenuItem)
        {
            List<ToolStripDropDownButton> dropdownButtons = new List<ToolStripDropDownButton>();
            foreach (ToolStripItem item in toolStrip1.Items)
            {
                if (item is ToolStripDropDownButton)
                {
                    dropdownButtons.Add((ToolStripDropDownButton)item);
                }
            }

            foreach (ToolStripDropDownButton btn in dropdownButtons)
            {
                foreach (ToolStripMenuItem d in btn.DropDownItems)
                {
                    if (d.Checked)
                        d.CheckState = CheckState.Unchecked;
                }
            }
        } 
```

如果有人能对此有所了解或告诉我一个简单的方法，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T11:51:38.670

太简单...

如下所述实现他们的方法：

```
 private void subietm1ToolStripMenuItem_Click(object sender, EventArgs e)
    {
        UncheckOtherToolStripMenuItems((ToolStripMenuItem)sender);
    }

    public void UncheckOtherToolStripMenuItems(ToolStripMenuItem selectedMenuItem)
    {
        selectedMenuItem.Checked = true;

        // Select the other MenuItens from the ParentMenu(OwnerItens) and unchecked this,
        // The current Linq Expression verify if the item is a real ToolStripMenuItem
        // and if the item is a another ToolStripMenuItem to uncheck this.
        foreach (var ltoolStripMenuItem in (from object 
                                                item in selectedMenuItem.Owner.Items 
                                            let ltoolStripMenuItem = item as ToolStripMenuItem 
                                            where ltoolStripMenuItem != null 
                                            where !item.Equals(selectedMenuItem) 
                                            select ltoolStripMenuItem))
            (ltoolStripMenuItem).Checked = false;

        // This line is optional, for show the mainMenu after click
        selectedMenuItem.Owner.Show();
    } 
```

一个细节是您可以为所有单击 menuItens 实现相同的方法，为此将相同的方法调用添加`UncheckOtherToolStripMenuItems((ToolStripMenuItem)sender);`到每个 ToolstripMenuItem 的 Event click 中，请参见另外两个 ToolstripMenuItens 的此示例：

```
 private void subietm2ToolStripMenuItem_Click(object sender, EventArgs e)
    {
        UncheckOtherToolStripMenuItems((ToolStripMenuItem)sender);
    }

    private void subietm3ToolStripMenuItem_Click(object sender, EventArgs e)
    {
        UncheckOtherToolStripMenuItems((ToolStripMenuItem)sender);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-12T04:58:15.587

我只是使用 item_Click 事件设置菜单中的所有项目，因此如果单击一个，它将只运行下面的代码。这种方式不需要每个按钮的事件。

```
 private void item_Click(object sender, EventArgs e)
    {
        // Set the current clicked item to item
        ToolStripMenuItem item = sender as ToolStripMenuItem;
        // Loop through all items in the subMenu and uncheck them but do check the clicked item
        foreach (ToolStripMenuItem tempItemp in (ToolStripMenuItem)item.OwnerItem.DropDownItems)
        {
            if (tempItemp == item)
                tempItemp.Checked = true;
            else
                tempItemp.Checked = false;
        }
    } 
```

如果您想在运行时将多个项目添加到列表中并以上述方式连接它们，您可以运行以下代码。

```
 private void subItemsMenus(ToolStripMenuItem parentItem, string[] listItems)
    {
        // Clear tool strip items first
        parentItem.DropDownItems.Clear();
        // Add items that are in the list
        foreach (string subMenuItem in listItems)
        {
            ToolStripMenuItem item = new ToolStripMenuItem();
            //Name that will appear on the menu
            item.Text = subMenuItem; 
            //Put in the Name property whatever necessary to retrieve your data on click event
            item.Name = subMenuItem;
            //On-Click event
            item.Click += new EventHandler(item_Click);
            //Add the submenu to the parent menu
            parentItem.DropDownItems.Add(item);
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-17T08:10:47.550

最简单的方法是添加**DropDownItemClicked**事件并创建自己的方法：

```
private void toolStripDropDownButton1_DropDownItemClicked(object sender, ToolStripItemClickedEventArgs e)
    {
        if (e.ClickedItem != null)
        {
            CheckSelected((ToolStripDropDownButton)sender, e.ClickedItem);
        }
    }

    private void CheckSelected(ToolStripDropDownButton button, ToolStripItem selectedItem)
    {
        foreach (ToolStripMenuItem item in button.DropDownItems)
        {
            item.Checked = (item.Name == selectedItem.Name) ? true : false;
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-11T21:52:48.930

我有另一种可行的方法：

每个项目都会去`ToolStripMenuItem_CheckStateChanged(object sender, EventArgs e)` ，每个项目都有自己的标签`1, 2, 3, 4, 5`。一项在开始时被检查并且具有`tag = 1`.

```
 int selecteditem = 1;
    bool atwork = false;
    private void dzienToolStripMenuItem_CheckStateChanged(object sender, EventArgs e)
    {
        if (atwork) return;
        else atwork = true;

        selecteditem = Convert.ToInt32(((ToolStripMenuItem)sender).Tag);

        foreach (ToolStripMenuItem it in sometooltipdropdown.DropDownItems)
        {
            if (Convert.ToInt32(it.Tag) != selecteditem)
            {
                it.Checked = false;
            }                
        }

        atwork = false;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-17T23:08:27.340

您可以通过复制到数组然后使用扩展来获得计数。

```
ToolStripItem[] controls = new ToolStripItem[ToolStrip.DropDownItems.Count];
ToolStrip.DropDownItems.CopyTo(controls,0);
intcheckCount = controls.Count(c => (c as ToolStripMenuItem).Checked);

if (checkCount == 0) // must keep 1 selection
     item.Checked = true;
else if (checkCount > 1)  //uncheck all others
     controls.Cast<ToolStripMenuItem>().Where(c => c.Checked && c.Name != item.Name)
       .ToList().ForEach(s => s.Checked = false); 
```

# azure - 将静态 HTML 文件添加到 Azure MVC 应用程序的根目录

> ID：13603655
> 
> 赞同：3
> 
> 时间：2012-11-28T11:09:38.280
> 
> 标签：azure, asp.net-mvc-4

我在哪里将静态 html 文件“mycoolpage.html”添加到 MVC4 项目，以便在部署到 azure 时请求“mysite.cloudapp.net/mycoolpage.html”时提供服务？

我已经尝试将它添加到项目中并设置类似的路线

```
routes.IgnoreRoute("{resource}.html"); 
```

并尝试使用以下路线从控制器返回它

```
 routes.MapRoute(
              "mycoolsite.html",
              "mycoolsite.html",
              new { controller = "Home", action = "Coolsite" }
              ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T11:15:42.640

您是否尝试过：`routes.IgnoreRoute("*.html")`，使用 MVC 站点根文件夹中的文件？

（来自：[让 MVC 忽略到站点根目录的路由](https://stackoverflow.com/questions/3150747/getting-mvc-to-ignore-route-to-site-root)）

# javascript - !!~ 做什么？

> ID：13603656
> 
> 赞同：25
> 
> 时间：2012-11-28T11:09:40.800
> 
> 标签：javascript

我正在阅读[这篇博客文章](http://robertpitt.me/2012/09/5-tips-for-nodejs-in-production-mode/)，其中提到使用：

```
!!~ 
```

我不知道这是做什么的？起初我以为它会出错，但下面的代码确实运行了：

```
var _sessions = [
    "_SID_1",
    "_SID_2",
    "_SID_3",
    "_SID_4"
];

if(!!~_sessions.indexOf("_SID_5")) {
    console.log('found');
} else {
    console.log('!found');
} 
```

输出：

```
node test.js 
!found 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-28T11:13:13.547

`~`是按位非运算符。它反转其操作数的位。`!`是逻辑非运算符。按位非运算符将`0`在应用于 时返回`-1`，这是`indexOf`在数组中找不到值时返回的内容。由于`0`计算结果为`false`，双重否定它只会返回`false`（一个布尔值，而不是一个数字）：

```
var index = _sessions.indexOf("_SID_5");
console.log(~index); // 0
console.log(!~index); // true
console.log(!!~index); //false 
```

对于由 . 返回的任何其他可能值，按位非运算符将返回小于 0 的值`indexOf`。由于任何其他值都将评估为`true`，因此它只是一种检查元素是否存在于数组中的速记方法（有点......它们都是相同数量的字符！），而不是显式地与 进行比较`-1`：

```
if (_sessions.indexOf("_SID_5") > -1) {
    // This would work the same way
} 
```

**更新**

关于它的性能，它似乎（至少在 Chrome 中）比更常见的比较`-1`（它本身比与比较慢一点`0`）略慢。

这是一个[测试用例](http://jsperf.com/bitwise-not-vs-gt-indexof)，结果如下：

![在此处输入图像描述](../Images/2b2b6f37f6d794dc85e07a6c82e49c40.png)

**更新 2**

实际上，您问题中的代码可以缩短，这可能是作者试图做的。您可以简单地删除`!!`，因为`~`将始终导致`0`或低于（并且`0`是唯一将评估为 的值`false`）：

```
if (~_sessions.indexOf("_SID_5")) {
    // This works too
} 
```

但是，在稍微不同的情况下，添加运算符可能是有意义的`!`。如果要将按位运算符的结果存储在变量中，它将是一个数值。通过应用逻辑非运算符，您可以获得一个布尔值（再次应用它可以确保您获得*正确*的布尔值）。`-1`如果由于某种原因您需要一个布尔值而不是数字值，那么它会更有意义（但您仍然可以使用or进行正常比较`0`）：

```
var inArray = !!~_sessions.indexOf("_SID_5");
console.log(typeof inArray); // boolean 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T11:26:06.097

Donald Knuth：“[...] 过早优化是万恶之源”

为了可读性：请使用

```
.indexOf !== -1 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-28T11:13:02.467

这很好地解释了它：

[Javascript 中的波浪号运算符](http://www.javascriptturnsmeon.com/the-tilde-operator-in-javascript/)

> 将两个 NOT 运算符混合在一起可以产生一些有趣的结果：
> 
> !~(-2) = 假
> 
> !~(-1) = 真
> 
> !~(0) = 假
> 
> !~(1) = 假
> 
> !~(2) = 假

所以这只是检查值是否等于 -1，如果没有找到匹配项，则 indexOf 返回 -1

# silverlight - 如何从子窗口导航到用户控件 Silverlight？

> ID：13603660
> 
> 赞同：2
> 
> 时间：2012-11-28T11:09:50.463
> 
> 标签：silverlight, prism

我有一个带有两个按钮的子窗口。当按钮单击事件发生时，我需要导航到特定的用户控件。如何在 Prism 框架中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:24:45.730

如果您使用的是 PRISM，那么使用事件聚合器会很简单地触发通知事件。无论如何，如果没有，这将解决您的问题。

您需要在触发子窗口时将关闭事件添加到该子窗口，如下所示：

```
YourChildWindow childWindow = new YourChildWindow (); 

childWindow.Closed += new EventHandler 

(YourChildWindowClosed); 

childWindow.Show(); 
```

然后，

?

```
void YourChildWindowClosed(object sender, EventArgs e) 

{

YourChildWindow yourChildWindow = ((YourChildWindow)sender); 

if 

(yourChildWindow.DialogResult.Value) 

{

... do your things here ... 

}

} 
```

我希望这可以帮助你。

# html - 链接在兼容模式下出现在新行上

> ID：13603661
> 
> 赞同：0
> 
> 时间：2012-11-28T11:09:52.343
> 
> 标签：html, ie-compatibility-mode

我有一些非常基本的 HTML 代码......

```
<strong>Hello, Name</strong><br />Company Name<br />Account Manager:<a href="mailto:first.last@company.com">Manager Name</a> 
```

这在 IE 和所有其他浏览器中看起来非常好。但是在兼容模式下运行 IE 时，链接会换行，我终生无法弄清楚为什么或如何停止它！

任何人都可以为我阐明这一点吗？请？

# opencart - 在 opencart 中更新产品数组

> ID：13603662
> 
> 赞同：0
> 
> 时间：2012-11-28T11:09:54.520
> 
> 标签：opencart

我正在尝试在我在根 opencart 文件夹中创建的新文件中更新当前购物车中产品的数量和总数。

首先，我从另一个文件中获取已在此处发布的总数和数量。然后我加载产品数组。然后，如果 $total 和 $quantity 存在且不等于 0，我将使用新的数量和总计值更新 products 数组。我的问题是我不太确定如何加载 products 数组并使用新的数量和总计值更新它。

到目前为止，这是我想出的。任何帮助将不胜感激。

```
<?php
$total = mysql_real_escape_string(htmlentities($_POST['total']));
$quantity = mysql_real_escape_string(htmlentities($_POST['quantity']));

$this->data['products'] = array();
$products = $this->cart->getProducts();

if ($total && $total != 0 && $quantity && $quantity != 0){
product['quantity'] = $quantity;
product['total'] = $total;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:02:51.880

如果您的意思是如何更新当前的实时购物车项目，它们存储在键下会话中的键值对中`cart`，因此您可以从中操作/读取它们

```
$this->session->data['cart'] 
```

`getProducts()`要查看购物车如何读取它们的内部工作原理，您可以查看`/system/library/cart.php`

# actionscript-3 - mose 在左右两侧滚动物体

> ID：13603664
> 
> 赞同：1
> 
> 时间：2012-11-28T11:09:58.030
> 
> 标签：actionscript-3, flash, actionscript-2

我必须制作横幅广告 (swf)。所以我在中间有一个圆形对象，当你在右侧移动鼠标时我需要从左向右旋转，当你在左侧移动鼠标时我需要从右向左旋转。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:34:25.827

有很多方法可以做到这一点，但先试试这个，看看它是否是你要找的：

```
private var rotationStep = .25;
private var newX:int;
private var oldX:int;

public Main():void {

   // Initialization of your stuff 

   // When ready add this to track the mouse
   this.stage.addEventListener(MouseEvent.MOUSE_MOVE,followMouse);

}
private function followMouse(e:MouseEvent):void {
    if(this.newX > this.oldX) {
        this.rotate(1);
    } else {
        this.rotate(-1);
    }
    this.oldX = this.newX;
}

private function rotate(dir:int):void {
    // rotate ball based on direction
    this.ball.rotoationZ += this.rotationStep*dir;
} 
```

记住旋转是以弧度为单位的，而不是度数

# javascript - 使用 .h 在 javascript 中定义

> ID：13603665
> 
> 赞同：0
> 
> 时间：2012-11-28T11:09:59.577
> 
> 标签：javascript, header-files

我想在我的 JavaScript 中使用 .h 文件中的定义。

我有来自用户 HTML 文件的输入，并希望在 HTML 文件中显示它们，例如：

```
input = 5 
```

.h 文件包含定义：

```
#define CODE 5 
```

我想向用户显示输出：CODE

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T11:14:34.477

**JavaScript 没有 .h 文件。它不是 C/C++。**

您可以通过使用[对象映射/关联对象](http://www.quirksmode.org/js/associative.html)来实现这一点：

```
map = {
    1: "FISH",
    2: "CHIPS",
    3: "EAT",
    4: "SLEEP",
    5: "CODE",
}
input = 5
alert(map[5]) // Will alert CODE, as required. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-29T10:21:07.090

实际上，您可以将 C 预处理器（例如 gpp）用于 js 文件。但是 C 预处理器不像你所描述的那样工作。它将用«5»替换«CODE»。

因此，如果您想准确替换数字，则必须将其用作对象或数组的索引。否则，您也可以使用变量甚至预处理器。

你不能用字符串替换简单的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:23:52.363

JavaScript 不支持 *.h 文件

您可以使用定义的常量加载头文件：

header.js：

```
var CODE = 5; 
```

并在主代码中对其进行评估

主.js：

```
var code = $.get("header.js")
eval(code.responseText); 
```

# c# - SetApartmentState 和 [STAThread]

> ID：13603666
> 
> 赞同：8
> 
> 时间：2012-11-28T11:10:00.870
> 
> 标签：c#, multithreading, com, watin, sta

在 Watin 的[源代码](http://sourceforge.net/projects/watin/)中，有一段代码：

```
 public void NavigateToNoWait(Uri url)
    {
        var thread = new Thread(GoToNoWaitInternal);
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start(url);
        thread.Join(500);
    }

    [STAThread]
    private void GoToNoWaitInternal(object uriIn)
    {
        var uri = (Uri)uriIn;
        NavigateTo(uri);
    } 
```

既然创建的线程有它的单元状态集，为什么`[STAThread]`要在方法中添加属性呢？我对特定的代码不感兴趣，但我想知道是否`STAThread`需要属性。

笔记：

*   该方法`GoToNoWaitInternal`未在其他地方使用。
*   整个 watin 项目是关于操作 WebBrowser 对象（通常是 Internet Explorer 窗口）。因此，我们正在操作一个 COM 对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T11:26:14.877

只需阅读[`STAThreadAttribute`](http://msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx)（强调我的）的文档：

> 将此属性应用于入口点方法（`Main()`C# 和 Visual Basic 中的方法）。*它对其他方法没有影响。*要设置您在代码中启动的线程的单元状态，请`Thread.SetApartmentState`在启动线程之前使用该方法。

因此，在这种情况下，该属性应该无效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T11:33:00.747

需要注意的是，STA（Single Threaded Apartment）是pre-.Net Visual Basic使用的线程模型。它应该只用于将暴露给 COM 的组件的 Main 方法。您试图理解的代码的作者，显然不明白它应该如何使用。

# hash - Varnish 3.0.3 req.hash_always_miss vs Vary

> ID：13603667
> 
> 赞同：0
> 
> 时间：2012-11-28T11:10:04.723
> 
> 标签：hash, varnish, purge

我正在尝试构建一个可以根据特定系统的需要清除和重新生成 URL 的系统。我之前在系统通过哈希定位对象时遇到了清除问题，但由于我没有“清除”而错过了变体；在我的 vcl_miss 中（仅在我的 vcl_hit 中，一些指南/示例 vcl 文件未提及此需求，但主要文档在[此处](https://www.varnish-cache.org/docs/trunk/users-guide/purging.html)提及）。

我想弄清楚的是我是否需要为 REGEN 调用做类似的事情。据我了解，“设置 req.hash_always_miss = true;” 将意味着丢失了旧的哈希并生成了一个新的哈希对象。后续调用将找到新的哈希，但如果缓存中没有适当的变体，可能仍会错过该对象。

有人可以为我确认一个后续请求是否会在新对象中缺少变体将直接导致缓存未命中和获取，而不是从前一个对象中找到任何变体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:52:00.983

hash_always_miss 只会影响当前/正在进行的请求及其替换的缓存内容。总是会发生获取，并且对象将使用与任何其他未命中/获取序列相同的规则放入缓存中。

相同哈希的“旧”其他变体仍然是有效对象，并将提供给客户端，指示与不同标头匹配的请求标头。

hash_always_miss 将替换当前变体，仅此而已。

为了回答你的问题，你句子的第二部分是最正确的。

# ios - 导航栏后退按钮，应用崩溃

> ID：13603670
> 
> 赞同：1
> 
> 时间：2012-11-28T11:10:15.177
> 
> 标签：ios

我有基于导航的应用程序。我创建了一个这样`UINavigationController`的应用程序`didFinishLaunchingWithOptions`委托方法：

```
self.initialviewcontroller = [[InitialViewController alloc] initWithNibName:@"InitialViewController" bundle:nil];
UINavigationController *myNavController = [[UINavigationController alloc] initWithRootViewController:self.initialviewcontroller];

self.window.rootViewController = myNavController;
[self.window makeKeyAndVisible]; 
```

在`InitialViewController`我有一个将导航到的按钮`SecondViewController`。因此，在按钮的操作中，我按下`SecondViewController`如下：

```
if(self.secondView != nil)
  self.secondView = nil;
self.secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
[self.navigationController pushViewController:self.secondView animated:YES]; 
```

情况：导航工作正常，我可以在 to 之间`InitialViewController`导航`SecondViewController`。当我进入`SecondViewController`并按下设备的主页按钮时，应用程序进入后台，当我重新打开应用程序时，它会从我关闭它的位置打开应用程序（即 SecondViewController）。现在，如果我按后退按钮转到 InitialViewController，应用程序就会崩溃。

它在 ios 模拟器中运行良好，但在设备上发生崩溃。

我不明白我犯了什么错误？

这是我的错误代码

异常类型：EXC_BAD_ACCESS (SIGSEGV) 异常代码：0x654b495d 处的 KERN_INVALID_ADDRESS 崩溃线程：0

线程 0 名称：调度队列：com.apple.main-thread

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:54:17.030

我认为您的问题是 uinavigationcontroller 正在被释放。您应该像第一个一样将您的 secondView 放在 uinavigationcontroller 中，然后重试。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:44:11.797

你的代码是

```
if(self.secondView != nil)
  self.secondView = nil;
self.secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
[self.navigationController pushViewController:self.secondView animated:YES]; 
```

而不是这个使用以下。

```
SecondViewController *secondViewobj = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    [self.navigationController pushViewController:secondViewobj animated:YES]; 
```

# javascript - 输入 type=button 就好像它是 type=submit

> ID：13603671
> 
> 赞同：0
> 
> 时间：2012-11-28T11:10:15.973
> 
> 标签：javascript, button, input, dom-events

我需要有两个**不同类型**的输入：

```
<input  type="button"  **onclick = "?????"**   name="back"  value="&#8592 Back"  >
<input  type="submit" name="submit" value="Forward &#8594"  > 
```

我该如何为 type=button 运行此 PHP 代码：

```
<?php

    if (isset($_POST['back']))
    {

        $_SESSION['onpage'] = $_SESSION['onpage'] - 1;

        $query_questionset = "
        select Q.Constructor AS Constructor,
        QS.QuestionIDFKPK AS QuestionIDFKPK,
        Q.QuestionValue AS QuestionValue,
        QS.SortOrder AS SortOrder,
        QS.onpage AS onpage
        from tbluserset AS US
        inner join tblquestionset AS QS ON US.QuestionSetIDFKPK = QS.QuestionSetIDPK
        inner join tblquestion AS Q ON QS.QuestionIDFKPK = Q.QuestionIDPK
        where (US.UserIDFKPK = " . $UserId . ")
        and (US.UserSetIDPK= '" . $_SESSION['UserSetIDPK'] . "')
        and (QS.onpage = '" . $_SESSION['onpage'] . "')
        order by QS.SortOrder";

    }

    $QuestionSet_Constructors = mysql_query($query_questionset);
?> 
```

我的表单和输入提交工作完美：

```
<form id= "formID"  class="formular"   method="post" action= "<?= $url = "QUESTIONAREnewdatabase.php"; ?>" accept-charset="utf-8"> 
```

我需要什么`input type=button`来运行 PHP 代码和类似 Back 的动作表单`type=submit`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:27:50.690

这是使用 Javascript 的一种方式，这将动态创建并附加一个隐藏的输入调用`back`到表单，然后提交表单 - 当单击后退按钮时。

```
<script>
    function postBack()
    {
        var myForm = document.getElementById("formID");
        var backInput = document.createElement("input");
        backInput.type = "hidden";
        backInput.name = "back";
        backInput.value = "1";

        myForm.appendChild(backInput);
        myForm.submit();
    }
</script>

<input type="button" onclick="postBack()" name="back" value="&#8592 Back"> 
```

在服务器端，您现在可以测试：

```
if(isset($_POST['back']))
{
    // back was pressed...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:15:40.913

尝试这个

```
< input type="submit" onclick = "?????" name="back" value="&#8592 Back" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:15:51.003

```
<form action="" id="formID" class="formular" method="post" accept-charset="utf-8">
    <!-- Your inputs here -->
    <button type="submit" name="back">&#8592 Back</button>
    <button type="submit" name="submit">Forward &#8594</button>
</form> 
```

# c# - 如何设置 GridItem 值？

> ID：13603673
> 
> 赞同：1
> 
> 时间：2012-11-28T11:10:17.780
> 
> 标签：c#, winforms

我知道这个属性是只读的。但我真的需要设置值。`GridItem (System.Windows.Forms.GridItem)`有没有办法通过使用反射来改变值？如果是这样，怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:15:48.337

是的，您可以使用反射来做到这一点。 [这是以前的帖子，上面有答案。](https://stackoverflow.com/questions/934930/can-i-change-a-private-readonly-field-in-c-sharp-using-reflection)

但你绝对不想改变它。以这种方式设计它有一个非常重要的原因。您将降低对象实例的完整性。

# jquery - 将表格数据作为文本框在html中动态添加行

> ID：13603677
> 
> 赞同：0
> 
> 时间：2012-11-28T11:10:29.483
> 
> 标签：jquery

我有一个表，其中有两个列 PartNumber 和 Quantity 作为列标题。每行都是一个可编辑的文本框，具有特定的 ID，用于通过网络发送数据。表结构如下

```
<tr>
<th>Part Number</th>
<th>Quantity</th>
</tr>
<tr>
<td><input type="text" id="t1"></td>
<td><input type="number" id="q1"></td>
</tr>
<tr>
<td><input type="text" id="t2"></td>
<td><input type="number" id="q2"></td>
</tr>
--
--
--
<tr>
<td><input type="text" id="t5"></td>
<td><input type="number" id="q5"></td>
</tr> 
```

单击按钮时，我必须将数据发送到 Web 服务以进行进一步处理。

我的新任务是在单击 addrow 按钮时动态添加行。添加带有文本框的行不是问题。问题在于为每个字段分配 ID。即.. 下一行的 ID 应该是 't6' 和 'q6' 我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:14:10.490

您只需要将行号附加到`id`每个字段的属性。

这是您需要在粗略代码中遵循的过程：

```
var rowNumber = $('table tr').length + 1;
$('#newRow input').attr('id', 't' + rowNumber);
$('#newRow').appendTo('table'); 
```

# java - 我想创建一个程序，以随机顺序打印 1 到 1,000,000 之间的数字。任何号码都不应重复或遗漏

> ID：13603679
> 
> 赞同：0
> 
> 时间：2012-11-28T11:10:39.733
> 
> 标签：java

我想用 Java 编写一个程序，生成 1 到 100 万之间的数字，不应该重复任何数字，也不应该错过任何人。我不知道从哪里开始。我不能记录我用过的所有数字，那是不切实际的。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:21:32.463

所以你需要：

*   输出数字 1 - 1,000,000（含）
*   以随机顺序
*   没有重复或重复
*   不跟踪您输出了哪些数字

这是那些令人沮丧的问题之一，答案是：你不能那样做。

所以我将挑战这个问题的基础：一百万个数字，每个字节 8 位，即 122k 来存储数字的位标志。除非您在微控制器中运行，否则这应该不是问题。因此，即使在相当受限的环境中，您也应该能够执行[NPE 建议](https://stackoverflow.com/a/13603704/157247)的操作。

但除非你能存储这些数字，否则你就无法做到这一点。

*（将其设为 CW 是因为我只是在总结社区在评论中所说的话，并且因为除了“你不能那样做”之外，它只是在说“看看 NPE 的答案”。）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:26:33.113

一种方法是使用伪随机游走。一个简单的伪随机游走使用任何大素数（以确保它与极限没有公因数）和模数来包装该值，以便在重复之前获取所有 N 个值。

这是一个较小的示例，使用 100 作为极限，47 作为素数。您可以将其更改为使用 1000000 作为限制和更大的素数，如 513239

```
int last = 0;
for (int i = 0; i < 100; i++) {
    last = (last + 47) % 100;
    System.out.println(last + 1);
} 
```

印刷

48 95 42 89 36 83 30 77 24 71 18 65 12 59 6 53 100 47 94 41 88 35 82 29 76 23 70 17 64 11 58 5 52 99 46 93 40 87 34 4 81 28 6 75 2 0 4 71 28 6 75 2 98 45 92 39 86 33 80 27 74 21 68 15 62 9 56 3 50 97 44 91 38 85 32 79 26 73 20 67 14 61 8 55 2 49 96 43 90 37 84 31 4 68 25 6 72 1

为了使这看起来更随机，您可以使用两个伪随机游走的组合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T11:11:59.220

将 1 到 1,000,000 的整数存储在数组列表中。[随机打乱](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)列表并打印出其内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T11:26:03.100

取决于您所说的“随机”是什么意思。您可以执行一些操作，例如生成 1 到 100 之间的随机数，然后说生成的随机数是否为 52 打印当前数字 + 52，然后打印当前数字 + 52 之间的所有数字并继续重复直到达到 100 万。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T12:16:11.893

好的，这就是您的请求的问题。

根据我读到的内容，您似乎想要获得一个 O(1)，您只需执行 1,000,000 次循环。现在，通过一个非常好的随机数来做到这一点的唯一方法是返回并从大小为 1,000,000 的数组中引用它。当您打印出一个时，您只需将该特定点设置为 1，除非该点已经是 1 或类似的东西。但是从您所说的来看，您不想保留记录，这现在会使您的随机性变得可怕，甚至几乎不是随机的

看看真的没有什么真正随机的。总是有一种模式，但使用某些数学运算，您可以创建一个非常难以识别的模式。

您必须使用的随机数的问题在于，它只能在打印 1,000,000 次后才能自我重复。

这可以这样做：

```
Example randomizing 20 numbers

1 3 5 7 9 11 13 15 17 19 2 4 6 8 10 12 14 16 18 20

Now all that is, is num = (num + 2) % 20 
```

现在当然你可以使差异更大，但情况是一样的。这可能看起来很像哈希映射的工作方式。但主要是我想指出如何通过保存记录并以 O(1) 打印来完成此操作，但它根本不是一个好的随机数。

# iphone - 视频大小 (MB)

> ID：13603680
> 
> 赞同：0
> 
> 时间：2012-11-28T11:10:42.963
> 
> 标签：iphone, html

iPhone 上视频的标准文件大小（以 MB 为单位）是多少？

它将是应用程序上的本地存储，因为它是混合应用程序（HTML、JS 和 CSS3）。

将使用六个视频。所有平均一分钟的剪辑。

（不是宽度和高度尺寸）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:02:55.160

Apple 对视频大小没有标准限制，您只需要确保您的 ipa 大小必须小于或等于 2 GB。

根据 Apple[文档](http://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/iTunesConnect_Guide.pdf)：

**iOS 应用程序大小提示**

*   应用程序可以大至 2GB，但请注意下载时间。
*   努力减少文件大小。
*   请记住，无线下载有 500MB 的限制。

在您的情况下，您有 6 个本地视频，平均时间为 1 分钟，不用担心！只需确保总视频大小小于 2 GB。

# sql - 在 MS Access 2003 中实现“除外”SQL 操作

> ID：13603681
> 
> 赞同：1
> 
> 时间：2012-11-28T11:10:44.027
> 
> 标签：sql, ms-access, ms-access-2003

我认为我应该详细解释一下我的问题。也许你可以帮我解决它。

我想将查询的结果保存在“临时”表中，因此我尝试使用此查询：

```
SELECT *
INTO Temp_tbl
FROM (tb_KonzeptDaten LEFT JOIN tb_Fahrzeug ON tb_KonzeptDaten.Konzept = tb_Fahrzeug.ID) LEFT JOIN tb_MSG ON tb_Fahrzeug.Motor_SG = tb_MSG.ID 
```

我收到错误 3090，上面写着“结果表不允许有多个自动编号字段”。

那是正确的！在这三个表中的每一个中，我都有一个自动编号字段

然后我决定选择所有没有这些自动编号字段的字段，然后我发现我们可以使用 SQL **EXCEPT**运算符完成这项工作，但不幸的是，这个运算符似乎在 MS Access 2003 中不起作用

然后我尝试使用 SQL“NOT EXIST”运算符：

```
SELECT *
FROM (tb_KonzeptDaten LEFT JOIN tb_Fahrzeug ON tb_KonzeptDaten.Konzept = tb_Fahrzeug.ID) LEFT JOIN tb_MSG ON tb_Fahrzeug.Motor_SG = tb_MSG.ID
WHERE NOT EXISTS(SELECT tb_KonzeptDaten.ID FROM tb_KonzeptDaten) 
```

但我没有得到我想要的答案

你是什​​么意思？我怎么解决这个问题？

# c - Mac OS X 中的强制文件锁定

> ID：13603684
> 
> 赞同：3
> 
> 时间：2012-11-28T11:10:53.083
> 
> 标签：c, macos, file, bash, unix

根据`man`页面，以下方法仅支持建议锁定`flock`：`lockf`和`fcntl`。有没有办法通过单个进程强制锁定某个文件，例如使用写锁定，以便其他进程无法使用写权限打开该文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T11:15:09.933

不可以。Unix 系列中的操作系统通常不支持强制文件锁定¹。这包括 Linux、BSD 和 OS X。

在某些 Unix 上，如果文件是当前正在运行的可执行映像，您将无法打开文件进行写入；`open()`将失败`ETXTBSY`。但是，您始终可以取消链接（删除）文件并创建一个新文件，没有什么可以阻止它。

### 脚注

¹：这并不完全正确，但是强制文件锁需要一些工作，强制锁是特定于平台的，OS X 不支持它们。

# php - 为共享主机上的特定脚本启用 HTTP 方法 POST

> ID：13603687
> 
> 赞同：0
> 
> 时间：2012-11-28T11:11:03.560
> 
> 标签：php, ajax, web-services, curl

大家好，我需要更新放置在共享主机上的脚本上的一些数据。

脚本、访问和目标都是 PHP 文件。

我需要通过 post 操作访问外部文件，但服务器响应我“501 方法未实现”

我也尝试过放在接收文件的顶部

```
header('Access-Control-Allow-Origin: *'); 
```

但我没有解决它，因为 nginx 在执行 php 文件之前可能会停止它。

我怎么能告诉 nginx 或 apache 只为这个文件启用 post ？

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:26:34.643

Nginx limit_except 指令可以将您的脚本限制为仅发布请求 - [http://wiki.nginx.org/HttpCoreModule#limit_except](http://wiki.nginx.org/HttpCoreModule#limit_except)

```
location /postzone {
  limit_except POST {
    deny   all;
  }
} 
```

这将为 POST 以外的任何内容提供 403，而不是 501。所以他们必须在做其他事情。

正如您所说，PHP 对此无能为力。如果您的主机阻止发布请求，他们可能有充分的理由，所以我会问他们。

# android - 如何从android中的resourceid获取图像名称？

> ID：13603688
> 
> 赞同：6
> 
> 时间：2012-11-28T11:11:13.867
> 
> 标签：android

```
int igotit = getResources().getIdentifier(val, "drawable", getPackageName()); 
```

我从中得到了resourceid，如何显示imagename？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T11:19:49.990

用这个 ：

```
String imageName = getResources().getResourceName(R.id.img); 
```

参考[文档](http://developer.android.com/reference/android/content/res/Resources.html#getResourceName%28int%29)。还有方法：[getResourceEntryName(int)](http://developer.android.com/reference/android/content/res/Resources.html#getResourceEntryName%28int%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:16:35.323

使用方法

```
getResources().getIdentifier(val, "drawable", getPackageName()); 
```

这`val` **是**图像名称

[在这里](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)检查

# hadoop - Ubuntu 中的 Hadoop Eclipse 插件错误

> ID：13603699
> 
> 赞同：0
> 
> 时间：2012-11-28T11:11:42.840
> 
> 标签：hadoop, eclipse-plugin

我正在尝试使用 ubuntu 在 hadoop 上构建一些程序。我能够在我的机器上以伪分布式模式成功安装和运行 hadoop。但是当我尝试使用 eclipse-plugin 制作项目时，我遇到了几个问题。在eclipse插件中放入连接服务器的参数后，我收到以下错误：

1.Error: java.io.IOException: Unknown Protocol to jobTracker:org.apache.hadoop.hdfs.Protocol.ClientProtocol

我使用的是 hadoop 0.20 版本，eclipse 插件也来自配置目录。出现这些错误的任何建议或原因。我可以为在 Eclipse 上构建 hadoop 项目做些什么？

![这些是即将到来的错误](../Images/de2238e3774674f79913995a9e254726.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-04-12T08:40:54.717

转到“编辑 hadoop 位置”。

用 DFS 主端口切换 Map/Reduce 主端口。

# app-store - 更新的关键字在ios应用商店搜索上需要多少时间才能生效

> ID：13603701
> 
> 赞同：3
> 
> 时间：2012-11-28T11:11:48.833
> 
> 标签：app-store, app-store-connect

我用新版本更新了我的 iphone 应用程序并添加了关键字。目前新版本已准备好销售，但通过新添加的关键字搜索没有结果。是否有某种延迟新关键字生效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-19T19:51:04.950

您无法保证您的关键字会对您的应用进行排名。

Apple raking 算法考虑了多种因素。这些因素包括以下（我个人的分析）：

*   每个时间段的下载次数；
*   每个时间段的评分数和您的平均评分；
*   应用名称和副标题；
*   点击您的应用列表的用户数量，与您的应用在当前搜索中的排名相关；
*   点击您的商家信息后下载您的应用的用户数量；
*   安装该应用程序的用户使用该应用程序的频率以及使用时长；
*   删除您的应用程序的用户数量以及删除时间；
*   关键字和描述。

请注意，我认为关键字和描述排名最后。

# iphone - 关闭弹出视图

> ID：13603708
> 
> 赞同：0
> 
> 时间：2012-11-28T11:12:03.603
> 
> 标签：iphone, ios, xcode, ipad, uipopovercontroller

我有一个根视图控制器，我在其中加载了一个包含三个按钮的子视图。当我触摸其中一个时，会显示一个弹出框。弹出框包含一个图像视图和一个带有完成按钮的栏。触摸完成按钮时，我想关闭此弹出窗口。为此，我正在使用此代码

```
- (IBAction)btnDone:(UIBarButtonItem *)sender {
    [self.view removeFromSuperview];

        [APPDELEGATE.parkDetail. popoverController dismissPopoverAnimated:YES];
   // [APPDELEGATE.parkDetail.popoverController dismissPopoverAnimated:YES ];

} 
```

弹出框是这样呈现的

```
- (IBAction)btnParkMap:(id)sender {
       [popoverController dismissPopoverAnimated:YES];
    if ([popoverController isPopoverVisible]) {
        [popoverController dismissPopoverAnimated:YES];
    } else {
        parkMap * v = [[parkMap alloc]initWithNibName:@"parkMap" bundle:nil];
        v.contentSizeForViewInPopover = CGSizeMake(350, 300);
        popoverController = [[UIPopoverController alloc] initWithContentViewController:v];
               CGRect popRect = CGRectMake(self.btnShowPopover.frame.origin.x+330,
                                    self.btnShowPopover.frame.origin.y+170,
                                    self.btnShowPopover.frame.size.width,
                                    self.btnShowPopover.frame.size.height);

        [popoverController presentPopoverFromRect:popRect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
          }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:18:04.493

试试这个代码

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

或者试试@nirav 的回答

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:34:59.783

PopUpOver 可以关闭 UIWebView 的默认上下文菜单。这很简单，因为我们只需要将网页正文元素的 CSS 属性“-webkit-touch-callout”设置为“none”。我们可以在 UIWebView 委托方法“webViewDidFinishLoad:”中使用 JavaScript 来做到这一点……</p>

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
[webView stringByEvaluatingJavaScriptFromString:@"document.body.style.webkitTouchCallout='none';"];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:15:15.720

尝试编写下面的代码

```
[yourPopOverobject dismissPopoverAnimated:YES]; 
```

让我知道它是否有效..

快乐编码！！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T11:30:22.873

尝试检查以下代码...

```
if ([popoverobject isPopoverVisible]) {
   [popoverobject dismissPopoverAnimated:YES];
   [popoverobject release];
} 
```

}

```
#pragma mark -
#pragma mark UIPopoverController delegate

-(void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController {
 //if (popoverController == popoverobject) {
    [popoverobject release];
 //  }
}

- (BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popoverController {

   NSLog(@\"popover about to be dismissed\");
   return YES;
  } 
```

让我知道它是否有效...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T11:20:03.297

```
 - (IBAction)btnDone:(UIBarButtonItem *)sender {

      [self dismissViewControllerAnimated:YES completion:nil];

    } 
```

# c++ - 一对开始和结束迭代器——它有名字吗？

> ID：13603709
> 
> 赞同：5
> 
> 时间：2012-11-28T11:12:05.910
> 
> 标签：c++, iterator

在 C++ 中，是否`struct`定义了一个（或类）来表示一对迭代器——一个是开始迭代器，一个是结束迭代器？代表它的最佳做法是什么？`std::pair`? 我知道我可以自己轻松地构建它，但我想遵循惯例。

我搜索以下内容：

```
template<class It>
struct XXX {
private:
   It b;
   It e;
public:
   It begin () const { return b; }
   It end () const { return e; }
   // ...
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T11:15:10.220

如果它是一对两个任意迭代器，那就是 - 一对迭代器。

如果它碰巧是一对具有某些假设的迭代器，例如“它们指向同一个容器”，我将其称为“Range”，因为它在整个标准模板库的文档中都是这样称呼的：

*   [SGI 标准模板库](http://www.sgi.com/tech/stl/stl_introduction.html)简介写道`Find takes three arguments: two iterators that define a range, and a value to search for in that range. It examines each iterator in the range [first, last), proceeding from the beginning to the end, and stops either when it finds an iterator that points to value or when it reaches the end of the range.`。

*   [cplusplus.com](http://www.cplusplus.com/reference/algorithm/)写道（是的，我知道那个网站的可信度很差，但无论如何）：`A range is any sequence of objects that can be accessed through iterators or pointers, such as an array or an instance of some of the STL containers.`

*   C++ 标准的[工作草案](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3485.pdf)在 24.2.1 第 7 段中写道：`A range is a pair of iterators that designate the beginning and end of the computation. A range [i,i) is an empty range; in general, a range [i,j) refers to the elements in the data structure starting with the element pointed to by i and up to but not including the element pointed to by j`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T11:15:27.597

看看[Boost.Range](http://www.boost.org/doc/libs/release/libs/range/doc/html/index.html)，特别是[boost::iterator_range](http://www.boost.org/doc/libs/release/libs/range/doc/html/range/reference/utilities/iterator_range.html)。

# matlab - Matlab如何从数据集中选择随机样本

> ID：13603713
> 
> 赞同：24
> 
> 时间：2012-11-28T11:12:18.080
> 
> 标签：matlab, octave, random-sample

> **可能重复：**
> [如何从 MATLAB 中的 N 个点中随机选择 k 个点？](https://stackoverflow.com/questions/1856141/how-do-i-randomly-select-k-points-from-n-points-in-matlab)

假设我有一个包含 10,000 行数据的数据集。创建包含 1,000 个随机选择的行的子集的最佳方法是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-28T11:17:43.927

您可以使用 randperm 完成此任务：

无需更换的采样：

```
nRows = 10000; % number of rows
nSample = 1000; % number of samples

rndIDX = randperm(nRows); 

newSample = data(rndIDX(1:nSample), :); 
```

带替换取样：

```
nRows = 10000; % number of rows
nSample = 1000; % number of samples

rndIDX = randi(nRows, nSample, 1); 

newSample = data(rndIDX, :); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T11:21:21.160

`randperm`与行数结合使用。如果`x`是你的矩阵：

```
nrows = size(x,1);
nrand = 1000; % Choose 1000 rows
assert(nrand<=nrows, 'You cannot choose more rows than exist in the matrix');
rand_rows = randperm(nrows, nrand);
xx = x(rand_rows,:);  % Select the random rows from x 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T11:21:10.663

如果你有统计工具箱 R2012+，你可以使用[datasample](http://www.mathworks.se/help/stats/datasample.html)。

```
subset = datasample(data,1000) 
```

`subset`将是由 1000 个样本组成的随机选择的数据子集。

要在不更换的情况下进行采样，请使用：

```
subset = datasample(data,1000,'Replace',false) 
```

如果您有旧版本的工具箱，您可以使用[randsample](http://www.mathworks.se/help/stats/randsample.html)：

```
rndIdx = randsample(size(data,1),1000,true); % with replacement
subset = samples(rndIdx(1:1000), :);

rndIdx = randsample(size(data,1),1000,false); % without replacement
subset = samples(rndIdx(1:1000), :); 
```

但是使用 randsample 或多或少与 H.Muster 的答案相同（我认为这是最好的，因为它不需要任何工具箱）。

注意：有关带替换采样与不带替换采样之间差异的更多信息，请参阅[此页面](http://www.ma.utexas.edu/users/parker/sampling/repl.htm)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T11:28:17.060

不确定到目前为止您是否编写了任何代码。以下[mathworks](http://www.mathworks.com/help/stats/randsample.html)链接显示了随机抽样的示例。看看它的想法。

这里还有一个来自统计工具箱的带有 randsample 的代码。只是一个逻辑，您可能必须相应地调整它。

N 行的矩阵 m 从 m 中抽取 n 行的随机样本

`Sample = m(randsample(1:N,n),:)`

`randsample(1:N,n)`

上面的结果是从 1 到 N 的 n 个随机整数序列。

# xcode - xcode webview文件打开对话框未显示

> ID：13603716
> 
> 赞同：2
> 
> 时间：2012-11-28T11:12:27.723
> 
> 标签：xcode, web-applications, webview

我在 xcode 中创建了一个使用 webview 显示网页的 osx 应用程序。但由于某种原因，它没有在我的网页中显示文件打开对话框。

Safari 和 chrome 似乎没问题，所以页面似乎没问题。

我可以在 xcode 中找到的 webview 的唯一相关设置是“启用弹出窗口”，但已启用。有谁知道为什么会发生这种情况？

感谢沃特

# jquery - 关闭jQuery模式窗口时堆栈溢出

> ID：13603717
> 
> 赞同：1
> 
> 时间：2012-11-28T11:12:28.310
> 
> 标签：jquery, jquery-ui, jquery-validate, jquery-dialog

当我创建 jquery**模态**对话框然后尝试关闭它时，我使用 jquery.validation v 1.6 和 jquery 1.5.1 和 jquery-ui 1.8.24 抛出异常：

> 未捕获的 RangeError：超出最大调用堆栈大小

或者

> 堆栈溢出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:12:28.310

将您的 jquery-validate 插件更新到 v. 1.8 或更高版本。

# javascript - 如何使用 jquery 替换图像 src 标签

> ID：13603718
> 
> 赞同：-1
> 
> 时间：2012-11-28T11:12:28.627
> 
> 标签：javascript, jquery

```
<div id="reader1" class="reader monelem_box">
    <div class="monelem_sheaf" style="position: absolute; overflow: hidden;">
        <div class="image">
            <img class="image" alt="image" src="images/img_001.jpg"> 
```

我要替换的javascript代码是

```
$("#reader1").attr("src", function () {
    return $(this).attr('src').replace("images", "sunset");
}); 
```

如何替换此`src`属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:16:07.710

您正在选择`div`，您需要选择`img`元素。试试这个：

```
$("img.image").attr("src", function () {
    return $(this).attr('src').replace("images", "sunset");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:16:24.837

你应该试试这个。而不是在那里 `#reader1`使用`img.image`

```
$("img.image").attr("src", function () {
   return $(this).attr('src').replace("images", "sunset");
}); 
```

或者

```
$("img.image").attr("src", function () {
   return this.src.replace("images", "sunset");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:21:34.327

问题是你的选择器，给定你的例子，我会使用：

```
$('img.image', '#reader1').prop('src', function() {
  return $(this).prop('src').replace('images', 'sunset');
}); 
```

这将限制它`<img>'s`具有类`image`，并且是`#reader1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T11:23:19.617

```
$('#reader1 img.image').attr('src', function (i, a) {
    return a.replace('images', 'sunset');
}); 
```

# android - Android 套接字在姜饼中运行，但不在果冻豆中

> ID：13603730
> 
> 赞同：0
> 
> 时间：2012-11-28T11:13:21.807
> 
> 标签：android, sockets

从这段代码中，我可以在 android 2.3.3.(Dell Streak) 中使用我的 PC 传输文件，但是当我在 android 4.2 (Samsung GS 3) 中运行相同的代码时，它什么也不做。我认为问题在于 Socket 何时初始化？我必须做什么才能在 4.2 中工作？

```
package com.hrandika.synchronizer.serverClient;

import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.net.Socket;

import android.os.AsyncTask;
import android.util.Log;

public class Client {

File sendingFile;

public Client(File sendingFile) {
    Log.d("Client", "Cleint : Constructed");
    this.sendingFile = sendingFile;
}

public void send(String ip) {
    try {
        Log.d("Client", "Cleint stating ....");
        Socket socket = new Socket(ip, 5555);
        Log.d("Client", "Cleint Socket Okay");

        OutputStream outputStream = socket.getOutputStream();
        OutputStreamWriter outputStreamWriter = new OutputStreamWriter(
                outputStream);

        Log.d("Client", "Cleint ready to sent");
        outputStreamWriter.write(sendingFile.getName() + "\n");
        outputStreamWriter.flush();
        Log.d("Client", "Cleint Sent");

        InputStream inputStream = socket.getInputStream();
        InputStreamReader inputStreamReader = new InputStreamReader(
                inputStream);

        BufferedReader bufferedReader = new BufferedReader(
                inputStreamReader);

        String serverResponse = bufferedReader.readLine();

        if (serverResponse.equals("READY")) {
            Log.d("Client", "Cleint : server ready");

            byte[] buffer = new byte[(int) sendingFile.length()];
            FileInputStream fileInputStream = new FileInputStream(
                    sendingFile);
            BufferedInputStream bufferedInputStream = new   BufferedInputStream(
                    fileInputStream);
            bufferedInputStream.read(buffer, 0, buffer.length);
            outputStream.write(buffer, 0, buffer.length);

            outputStream.flush();
            bufferedInputStream.close();
            fileInputStream.close();
            socket.close();

        }

    } catch (Exception e) {
    }
}

public class Sender extends AsyncTask<String, String, String>{

    @Override
    protected String doInBackground(String... params) {
        send("192.168.43.21");
        return null;
    }

} 
} // End class Client 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:17:21.483

您不得在 UI 线程上执行任何联网，这是由以 Honeycomb 开始的平台强制执行的。我想你没有`AsyncTask`正确使用。

必读：

*   [保持您的应用程序响应](http://developer.android.com/training/articles/perf-anr.html)
*   [为什么冰淇淋三明治会使您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

**更新：**由于网络错误，开始`adb shell`（我假设设备通过 USB 连接到您的 PC）并输入`telnet 192.168.43.21 5555`- 这样您就可以检查您的服务器是否可以通过手机访问。

**更新 2：**刚刚检查过，恐怕`telnet`二进制文件在库存（非根）设备上不可用。但是任何可以连接到给定 IP/端口的应用程序都足以进行测试，例如这个[telnet 客户端](https://play.google.com/store/apps/details?id=koushikdutta.telnet)。通过这种方式，您甚至可以在接触自己的代码之前消除设置问题。

# javascript - 包含在其他页面中的页面是否应该有自己的脚本？

> ID：13603733
> 
> 赞同：0
> 
> 时间：2012-11-28T11:13:29.617
> 
> 标签：javascript, requirejs

我正在使用 RequireJS，并且我正在为每个页面创建一个自己的脚本文件。但是，我也有一些组件包含在某些页面（服务器端）中。这些页面是否也应该获得自己的脚本文件，或者必要的 javascript 是否应该在包含页面中？所包含页面的某些功能对许多页面是通用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:53:40.467

我认为您最好将 javascript 视为可重用模块而不是特定于页面的功能。因此，假设您的页面有一个发起 AJAX 请求的搜索框、一些日期选择器和一大堆选项卡。这些中的每一个都应该是一个模块（或者如果它们提供的功能足够复杂，那么几个模块）。通过将您的应用程序分解为目标非常集中的小块，您可以更轻松地单独测试每个位（自动单元测试）并在其他地方重用功能。

现在关于如何加载您的 javascript 模块，有一点需要根据用户需求有策略地加载内容（例如：core.js 默认加载，但 search.js 在用户访问“搜索”之前不会加载" 选项卡）但是您可以将所有内容打包到一个文件中（[require 的 r.js 工具](http://requirejs.org/docs/optimization.html)会为您完成此操作）并在每个页面上使用相同的脚本文件 (main.js)。

使用单个脚本文件时，请记住，当它的功能目标不存在时，您的 js 将需要工作。jQuery 让这变得超级简单，您几乎不必考虑它 - 例如：

```
$('#js-foo').on(...) // <-- this doesn't blow up if '#js-foo' isn't on the page. 
```

我还看到人们在页面的 body 标记上设置了一个 data-attr - 例如 data-page="foo" 和关键 js：

```
var page = $('body').data('page');
if (page === 'foo'){
    component1.setup();
    component2.setup();
} 
```

在您的情况下，我会尝试使用 RequireJS / AMD 样式的模块将所有内容构建到一个文件中。每个组件都将获得自己的模块文件（mycomponent.js），您的 main.js 将 require() 您的所有模块并适当地初始化事物，最后您将配置您的 r.js 构建以在部署时将所有内容打包到单个文件中到/在生产中运行。

如果您有兴趣进一步探索该主题，请查看以下帖子：

[单入口点 FTW](http://blog.millermedeiros.com/single-entry-point-ftw/)
[单入口点 Redux](http://blog.millermedeiros.com/single-entry-point-redux/)

# windows-8 - 如何在 Windows 8 应用商店应用程序中清除缓存的经纬度详细信息

> ID：13603734
> 
> 赞同：1
> 
> 时间：2012-11-28T11:13:33.153
> 
> 标签：windows-8

当我尝试访问一些 Windows 8 应用商店的地理定位应用程序时，我看到纬度和经度详细信息已被缓存，即它们显示的是我之前位置的坐标，而不是我当前所在的城市。

如何清除这些地理位置详细信息 - 手动或以编程方式？

# symfony - symfony2 用户管理让我随机退出

> ID：13603737
> 
> 赞同：2
> 
> 时间：2012-11-28T11:13:41.453
> 
> 标签：symfony

我有一个从 fosUserBundle 构建的用户管理界面，有时我在打开用户后会退出，我是否在该用户上编辑任何内容并保存更改，或者我只是调出编辑用户表单然后点击返回链接，我仍然在 app_dev.php 模式下没有任何错误或警告退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:13:41.453

...我意识到当您打开一个表单来编辑当前登录的用户时，这就是 symfony2 所做的。如果我以管理员身份登录，并打开该用户的编辑表单，我去的下一条路线（不管是哪条路线）将带我到登录页面，调出当前登录的编辑表单-in 用户将我注销，没有错误或警告。

认为这可能对不知道您无法编辑当前登录用户的其他人有所帮助。

我认为如果 symfony2 抛出一个异常告诉你这是自动注销的原因，至少在开发模式下会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-17T12:58:11.443

首先，您应该检查您在 Apache 中的日志。

我有一个类似的问题，它是由其中一个实体中的重复列名引起的。所有其他实体都拒绝工作，并且每次我在管理员中单击某些内容时都会注销。

# sharepoint-2010 - 在 sharepoint 搜索核心结果 Web 部件中显示视频持续时间

> ID：13603739
> 
> 赞同：2
> 
> 时间：2012-11-28T11:13:50.827
> 
> 标签：sharepoint-2010

你们中有人知道如何在搜索核心结果 Web 部件中显示视频的持续时间吗？

我在 Central Admin 中看不到任何可以将我的托管属性映射到的字段。

谢谢您的帮助

# jquery - CKEditor 如何拾取已突出显示的内容

> ID：13603740
> 
> 赞同：0
> 
> 时间：2012-11-28T11:13:56.090
> 
> 标签：jquery, ckeditor

我正在尝试为 ck 编辑器创建一个额外的插件。

我在工具栏上创建了一个按钮，并且在点击它时正在舞台上做一些事情....

```
CKEDITOR.plugins.add('enlarge',
{
    init: function (editor) {
        //Plugin logic goes here.
        editor.addCommand('insertenlarge',
            {
                exec: function (editor) {

            }
        });

        editor.ui.addButton('enlarge',
            {
                label: 'Insert enlarge',
                command: 'insertenlarge',
                icon: this.path + 'images/enlarge.png'
        });
    }
}); 
```

我不知道如何获得突出显示的元素。基本上我希望用户在编辑器中单击图像并单击放大，它会在新的弹出窗口中打开图像，我只想现在能够了解如何访问图像元素以便我可以放置它在弹出窗口中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:23:17.220

这应该适合你：

`editor.getSelection().getSelectedElement()`

# c# - C# 正则表达式：字符串出现一次或不出现

> ID：13603743
> 
> 赞同：-5
> 
> 时间：2012-11-28T11:14:08.540
> 
> 标签：c#, regex

有没有更好的方法在 C# 中查找一个或不出现一个字符串？现在，我正在使用以下语句来实现相同的目的。

```
Regex.Replace(input, @"[0-9]+([s][t][r][i][n][g])", "$1", RegexOptions.IgnoreCase); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:18:00.947

`?`修饰符告诉您只希望发生一次或不发生。所以，如果我理解你的话，你想要类似的东西

```
Regex.Replace(input, @"[0-9]+((?:string)?)", "$1", RegexOptions.IgnoreCase); 
```

`?:`before string 代表非捕获组，因此内大括号不被视为一个组，并且不能在 replace 中使用`.Groups`and表达式访问`$<number>`

见重复部分。[http://www.regular-expressions.info/quickstart.html](http://www.regular-expressions.info/quickstart.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:17:49.987

使用 string.contains 方法：

```
string s1 = "The quick brown fox jumps over the lazy dog";
string s2 = "fox"; 

if (s1.contains(s2))
{
Regex.Replace(input, @"[0-9]+([s][t][r][i][n][g])", "$1", RegexOptions.IgnoreCase);
} 
```

# c# - Replacing / with regex

> ID：13603745
> 
> 赞同：4
> 
> 时间：2012-11-28T11:14:11.050
> 
> 标签：c#, regex, string

I have a question regarding replacing some characters with regex or any other best practice or efficient way.
Here is what I have as input, it has mostly the same form: `A/ABC/N/ABC/123`
The output should look like this: `A_ABC_NABC123`, basically the first 2 `/` should be changed to `_` and the rest removed.
Of course i could do with some `String.Replace`. etc one by one, but I don't think it is a good way to do that. I search for a better solution.

So how to do it with Regex?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T11:20:49.490

This will do it, although there may be a simpler way:

```
static class CustomReplacer
{
    public static string Replace(string input)
    {
        int i = 0;
        return Regex.Replace(input, "/", m => i++ < 2 ? "_" : "");
    }
}

var replaced = CustomReplacer.Replace("A/ABC/N/ABC/123"); 
```

I've wrapped the code like this to make sure you don't accidentally the `int` variable.

Edit: There's also [this overload](http://msdn.microsoft.com/en-us/library/haekbhys.aspx) which stops after a certain number of replacements, but you'd have to do it in two steps: replace the first two `/` with `_`, then replace the remaining `/` with nothing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:26:38.523

Try this:

```
string st = "A/ABC/N/ABC/123";
string [] arrStr = st.Split(new char[] { '/' });
st = string.Empty;
for (int i = 0; i < arrStr.Length; i++)
{
    if (i < 2)
        st += arrStr[i] + "_";
    else
        st += arrStr[i];
} 
```

# java - 无法在安卓设备上获取位置

> ID：13603747
> 
> 赞同：0
> 
> 时间：2012-11-28T11:14:27.150
> 
> 标签：java, android

> **可能重复：**
> [在android中获取当前位置](https://stackoverflow.com/questions/10443577/get-current-location-in-android)

我正在尝试为 android 制作一个应用程序，它可以为我提供设备的位置。我正在使用 LocationManager.requestlocationupdates 方法来启动一个监听器。不幸的是，这不起作用。当我在 Logcat 中查找堆栈跟踪时，除了一句话，我没有发现任何错误。

> 11-28 12:01:17.377: E/AndroidRuntime(1138): 在 Tom.Tracer.App.GetCoords.run(GetCoords.java:28)

这条线并没有真正帮助我进一步..

我正在使用这段代码：

```
@Override
public void run() {
     lm = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE) ;
     lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2000, 10, locationListener) ; 

} 
```

聆听者

```
private final LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
        double longitude = location.getLongitude();
        double latitude = location.getLatitude();
        Date date = new Date(); 
        toSave = "NEW" + date.toString()+ "-" + location.getLatitude() + "-" + location.getLongitude() + "/";
        p("To save: " + toSave); 

        }
}; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:04:59.160

我忘了调用 Looper.prepare() 方法。感谢您的意见！

# windows-phone-7.1 - 如何从 Windows phone 7 发布 Facebook 应用程序请求

> ID：13603748
> 
> 赞同：2
> 
> 时间：2012-11-28T11:14:26.637
> 
> 标签：windows-phone-7.1, facebook-c#-sdk

目前我正在为我的 windowsphone7 应用程序使用 Facebook c# SDK..，我创建了朋友列表，从中选择朋友（即 facebook UID）来发送应用程序请求。这是我的代码

```
arguments["access_token"] = "Accesstoken";
arguments["message"] = "message";
arguments["IDS"] = "IDS";
facebook.PostAsync("me/apprequests", arguments);
facebook.PostCompleted += facebook_PostCompleted; 
```

但仍然没有在 Facebook 用户个人资料上发布请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:52:24.203

代码看起来是正确的，所以我猜你没有正确的权限。您在进行身份验证时是否要求用户提供 publish_stream 扩展权限？

请参阅：[https ://developers.facebook.com/docs/reference/login/extended-permissions/](https://developers.facebook.com/docs/reference/login/extended-permissions/)

# parameters - 在 yii 中如何向方法发送参数

> ID：13603755
> 
> 赞同：0
> 
> 时间：2012-11-28T11:15:04.213
> 
> 标签：parameters, yii, action

在 yii 中，我正在使用邮件扩展创建 actionEmail 方法。它将接受四个参数，分别是 FromEmail、ToEmail、Subject 和 Message。为了检查输出，我正在发送参数的硬编码值。

```
public function actionCreate($FromEmail='abc@gmail.com',$ToEmail='xyz@gmail.com',$Subject='Project',$Message='Hiee')
{ 

    //using mailer extension
    $mailer = Yii::createComponent('application.extensions.mailer.EMailer');

    $mailer->IsSMTP();
    $mailer->IsHTML(true);
    $mailer->SMTPAuth = true;
    $mailer->SMTPSecure = "ssl";
    $mailer->Host = "smtp.gmail.com";
    $mailer->Port = 465;
    $mailer->CharSet = 'UTF-8';
    //$mailer->Username = "abc@shailani.com";
    $mailer->Password = "abc";
    $mailer->From = $FromEmail;
    $mailer->FromName = "Balaee.com";
    //$mailer->AddAddress('shilpakirad@gmail.com');
    $mailer->AddAddress($ToEmail);
    $mailer->Subject = $Subject;
    $mailer->IsHTML(true);
    //  $html = $this->renderPartial('myview',array('content'=>'Hello World'),true);
    $mailer->Body=$Message;

    if($mailer->Send()) {

        echo "Please check mail";
    }
    else {
        echo "Fail to send your message!";
    }
} 
```

我在用户控制器中创建了这个方法。但它没有执行。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:28:20.360

如果您为动作函数指定参数，这些参数定义了必须通过 GET 或 POST 指定的参数。通常，除非指定了所有参数，否则您无法将任何内容路由到此函数。在您的情况下，这没关系，因为您正在为它们分配默认值。您应该能够以正常的 url 格式调用该函数（例如 index.php/?r=controller/email）。可以使用相同的 url 指定自定义值：index.php/?r=controller/email&Subject=testing+email

也许从检查错误日志开始，看看那里是否有任何输出。如果没有，我会注释掉整个函数内容，然后简单地做一个 echo 什么的。这样，您至少可以确保调用该函数。之后，您可以重新添加代码，也许可以分段查看是否一切正常。

# maven - Maven 依赖：analyze 认为我的 JDBC JAR 是“未使用的”

> ID：13603761
> 
> 赞同：3
> 
> 时间：2012-11-28T11:15:18.610
> 
> 标签：maven, jdbc, dependency-management

我正在使用 MySQL 连接器 JAR 来建立 JDBC 连接。我的理解是我只是在类路径中有这个 JAR，当我`mysql:`在连接字符串中指定时它会被动态加载。

我在我的 POM 中使用`<scope>runtime</scope>`. 当我运行时`mvn dependency:analyze`，它将此工件报告为“未使用”。我想它无法通过简单的静态分析来确定我是否需要它，很好，但对于任何范围内的`runtime`工件肯定都是如此，对吧？我怎样才能让 Maven 相信这个工件真的需要在那里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:08:01.767

`dependency:tree`如果这是您要查找的内容，将列出您的 pom 文件引用的所有工件。否则你很可能不走运。Maven 公开声明他们的依赖分析器在字节码级别工作，并且在某些情况下会错误地将依赖项报告为未使用。

运行时范围的依赖可能会或可能不会被使用，这是无法用字节码分析来判断的（事实上，用我能想到的大多数分析来判断是不可能的）。Maven 必须决定要么假设它们被使用，要么假设它们未被使用，并且他们选择了后者，认为用户可以弄清楚。

没有选项可以告诉 Maven 将运行时范围的依赖项视为已使用，但您可以手动将特定工件添加到`usedDependencies`配置中的数组。Maven 将简单地假设使用了这些依赖项。您还可以编写自己的依赖分析器或找到可以处理这种情况的第 3 方依赖分析器。

==更新评论==

你是对的，它很新。该[问题](https://jira.codehaus.org/browse/MDEP-122)已在 2012 年 11 月 25 日发布的 2.6 版中得到修复。它尚未出现在许多公共镜像存储库中。你可以在[这里](http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-dependency-plugin/2.6/)找到它。

由于它是如此新，因此没有使用示例，但是 Maven 遵循一些约定。我希望它被宣布为：

```
<build>
    <plugins>
     <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.6</version>
        <configuration>
          <usedDependencies>
            <usedDependency>org.foo.bar:baz-tron</usedDependency>
            <usedDependency>org.foo:whatsit</usedDependency>
          </usedDependencies>
        </configuration>
      </plugin>
    </plugins>
  </build> 
```

# php - 创建一个 MYSQL Select 语句，结合购物篮和产品表中的信息

> ID：13603762
> 
> 赞同：2
> 
> 时间：2012-11-28T11:15:18.430
> 
> 标签：php, mysql, sql, database

我一直在尝试创建一个购物篮类，并且在尝试按购物篮内容输出时遇到了障碍。

我的用户购物篮信息存储在具有以下结构的表中。

```
 CREATE TABLE IF NOT EXISTS basket (
            `ID` int PRIMARY KEY AUTO_INCREMENT,
            `ProductID` int,
            `Quantity` int,
            `OptionID` int,
            `Cookie` varchar(40)
            ; 
```

其中 Cookie 字段是存储在 cookie 中的用户的唯一标识符。

我的产品表结构如下：

```
 CREATE TABLE IF NOT EXISTS products (
            ID int PRIMARY KEY AUTO_INCREMENT,
            Title varchar(200),
            Description text,
            Specification text,
            Price decimal(10,2),
            CategoryID int,
            Weight int,
            Options text,
            OptionValues text,
            OptionCost text,
            Discount int(2),
            Featured boolean,
            Images text,
            Stock int,
            Related text,
            Offer boolean,
            OfferDetails boolean,
            Language int
            ; 
```

我想要做什么从我的购物篮中选择商品，并从产品表中选择它们各自的产品标题和价格信息。

所以本质上我需要一个 sql 语句，它将使用 productID 输出以下内容来链接两个表：

> ProductID 来自篮子表
> 
> 篮子表中的数量
> 
> 标题来自产品表
> 
> 描述来自产品表
> 
> 价格来自产品表

我之前做过类似的事情，通过循环遍历篮子数组，然后用当前查询产品表，`ProductID`但肯定可以通过一个查询来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:18:14.073

尝试这个：

```
SELECT
  b.ProductID,
  b.Quantity,
  p.Title,
  p.Description,
  p.price
From basket b
INNER JOIN products p ON b.ProductID = p.Id; 
```

请阅读以下内容：

*   [**加入（SQL）**](http://en.wikipedia.org/wiki/Join_%28SQL%29)。

*   [**SQL 连接的可视化表示**](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)。

*   [**SQL 连接的可视化解释**](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:18:24.417

```
SELECT b.ProductID, b.Quantity, p.Title, p.Description, p.Price 
FROM basket b 
     LEFT JOIN products p ON (b.ProductID = p.ID); 
```

还要记住这一点：

INNER JOIN 从结果集中排除两个表中都不存在的任何记录。

LEFT JOIN 包括第一个表中的所有记录和第二个表中的所有匹配记录，假设查询不排除第二个表中的空值。

# graphics - 带白边的透明PNG

> ID：13603766
> 
> 赞同：0
> 
> 时间：2012-11-28T11:15:32.960
> 
> 标签：graphics, png

出于某种原因，这种具有透明背景的 PNG 显示为白色边缘，但只有在几乎相同阴影的灰色背景上，黑色或浅灰色才可以。

它是 24 位文件，并且以我之前在 Photoshop 中多次完成的相同方式完成，没有任何问题。

![新闻 PNG](../Images/ab68ce287a1a5e61b4c8897730a8aa1f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:20:07.977

这是因为它对白色背景进行了抗锯齿处理。尝试将您的 PNG 保存为适当的 32 位？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:20:18.343

字母的抗锯齿没有使用任何 alpha 值，它们只是根据您的默认背景颜色呈现。无论如何，它在黑色上看起来不太好，我立即看到了硬抗锯齿像素；）

# modelica - 在 modelica 中使用 PDE 的耦合系统

> ID：13603769
> 
> 赞同：3
> 
> 时间：2012-11-28T11:15:38.907
> 
> 标签：modelica

只是几个问题，我希望有人能抽出时间来回答:)。

如果我们有 COUPLED 模型示例：n 个独立变量系统 X 和 n 个非线性偏微分方程 PDEf(X,PDEf(X)) 相对于 TIME 取决于 X,PDEf(X)（偏微分方程取决于变量 X ）。你能给点建议吗？这是一个例子：

假设 c 是输出或期望的变量。假设 r 是自变量。偏微分方程如下所示：

∂c/∂t=D*1/r+∂c/∂r+2(D* (∂^2 c)/(∂r^2 )) D=常数 r=0:0.1:Rp- Matlab语法，如何在 Modelica 中表示相同（我使用积分器，但没有用）？

这是一个代码（不起作用）：

```
model PDEtest
/* Boundary conditions
1\. delta(c)/delta(r)=0  for  r=0
2\. delta(c)/delta(r)=-j*d for  r=Rp*/
parameter Real Rp=88*1e-3; // length
parameter Real initialConc=1000;
parameter Real Dp=1e-14;
parameter Integer np=10; // num. of points
Real cp[np](start=fill(initialConc,np));
Modelica.Blocks.Continuous.Integrator r(k=1); // independent x1
Real j;
protected 
parameter Real dr=Rp/np;
parameter Real ts= 0.01; // for using when loop (sample(0,ts) )
algorithm 
j:=sin(time); // this should be indepedent variable like x2
r.u:=dr;
while r.y<=Rp loop
for i in 2:np-1 loop
der(cp[i]):=2*Dp/r.y+(cp[i]-cp[i-1])/dr+2*(Dp*(cp[i+1]-2*cp[i]+cp[i-1])/dr^2);
end for;
if r.y==Rp then
cp[np]:=-j*Dp;
end if;
cp[1]:=if time >=0 then initialConc else initialConc;
end while;
annotation (uses(Modelica(version="3.2")));
end PDEtest; 
```

这里有更多问题：

1.  此代码在 OpenModelica 1.8.1 中不起作用，在 Dymola 2013demo 中也不起作用。我们如何才能拥有变量 c 的连续函数，而不是函数数组？
2.  我们可以将数组 cp 的值放在 combiTable 中吗？如何？
3.  如果相反，“算法”停留在“方程式”代码无法成功检查。为什么？在 OpenModelica 中，错误是：无法展平模型：S。
4.  有没有简化的方法来使用一组耦合的方程（PDE）？我知道 Modelica 中的 PDE 库，但我认为它们很复杂。我想写一个求解PDE的函数并在“主模型”中调用这些函数，这样函数的输出就是“c”的连续函数。我不知道对函数数组做什么。
5.  如果我们像在 Matlab 中那样“说话”，你能给我建议如何理解 Modelica 语言吗？例如：自变量 r 的值，我们可以在 Matlab 中指定，比如 r=0:TimeStep:Rp…Modelica 中怎么做呢？请解释一下“方程”部分的工作原理，是否与 Matlab 相似，是否有必要的顺序方法？干杯:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T16:55:42.327

很难回答您的问题，因为您假设 Modelica ~ Matlab，但事实并非如此。所以我不会评论你的代码，因为它真的是错误的。让我给你一个[汉堡方程](http://en.wikipedia.org/wiki/Burgers%27_equation)的示例模型。也许你可以用它作为起点。

```
model burgereqn
 Real u[N+2](start=u0);
 parameter Real h = 1/(N+1);
 parameter Integer N = 10;
 parameter Real v = 234;
 parameter Real Pi = 3.14159265358979;
 parameter Real u0[N+2]={((sin(2*Pi*x[i]))+0.5*sin(Pi*x[i])) for i in 1:N+2};
 parameter Real x[N+2] = { h*i for i in 1:N+2};
equation
 der(u[1]) = 0;
 for i in 2:N+1 loop
    der(u[i]) = - ((u[i+1]^2-u[i-1]^2)/(4*(x[i+1]-x[i-1])))
                + (v/(x[i+1]-x[i-1])^2)*(u[i+1]-2*u[i]+u[i+1]);
 end for;
 der(u[N+2]) = 0;
end burgereqn; 
```

您的进一步问题：

1.  cp 是一个连续变量，数组表示每个离散化点。
2.  为什么你应该这样做，据我了解 cp 是你想要的解决方案变量。
3.  您应该尝试几乎总是使用方程式部分算法部分通常用于函数中。我很确定你可以用方程式来表示你的欲望行为。
4.  我不知道那个库，但 pde 上的困难在于离散化和自行解决。您在使用 modelica 工具求解 pde 时可能会遇到问题，因为 Modelica 工具通常没有专门的 pdes 求解算法。
5.  请考虑该问题的进一步参考。您可以从[Modelica.org](https://www.modelica.org/publications)开始。

# c++ - 是什么导致我的程序中出现错误“变量''周围的堆栈已损坏”

> ID：13603772
> 
> 赞同：1
> 
> 时间：2012-11-28T11:15:40.030
> 
> 标签：c++, visual-studio-2010

我一直在为课堂作业做作业，但我不断收到一个我无法修复的错误。这是我的代码的一部分。

```
#include <iostream>
#include <string>
#include <fstream>
#include <iomanip>
using namespace std; 

const int SIZE = 444;

int main()

{

char person1a[SIZE], person1b[SIZE], person2a[SIZE], person2b[SIZE],  person3a[SIZE], person3b[SIZE],       
     person4a[SIZE], person4b[SIZE];

inData >> person1a[SIZE], person1b[SIZE], person2a[SIZE], person2b[SIZE],       person3a[SIZE], person3b[SIZE], person4a[SIZE], person4b[SIZE]; 

return 0;

} 
```

代码还有更多内容，但我已将问题缩小到这些行。无论我如何安排它们或我使用什么运算符，我总是在第一个数组处遇到堆栈错误。至少对我来说，我已经尝试过显而易见的事情，例如

```
inData >> person1a;
inData >> person1b;
etc
inData >> person1a >> person2b >> etc 
```

等等，但我就是无法克服这个错误。

我是否在这里遗漏了一些明显的东西，如果我有任何人可以帮助我吗？

作为记录，我知道已经有几个关于这个的话题，但我现在只参加了我在学校的第一堂编程课，所有其他话题都包含了太多额外的内容，我无法理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:20:03.370

您的数组声明为：

```
char person1a[SIZE]; 
```

访问数组时的有效下标`0`是`SIZE-1`

随着声明：

```
inData >> person1a[SIZE], person1b[SIZE], person2a[SIZE], person2b[SIZE],       person3a[SIZE], person3b[SIZE], person4a[SIZE], person4b[SIZE]; 
```

您正在写一个过去为每个数组分配的内存。

因为，您使用的是 C++，所以您应该使用`std::string`而不是 c 样式的数组。
它为您节省了所有此类问题，并提供了字符数组为您提供的所有功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T11:20:26.010

当您访问`person1a[SIZE]`etc 时，您违反了数组边界数组索引是基于 0 的，因此最大索引`SIZE-1`不是`SIZE`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T11:20:32.267

```
inData >> person1a[SIZE] 
```

假设这`inData`是某种`std::istream`或类似的，它将单个字符流式传输到`SIZE`数组的元素中。由于这是数组的大小，并且有效索引在 range`[0,SIZE-1]`中，因此它写入数组之外导致堆栈损坏。

如果您打算读取一个字符串，则读入数组本身：

```
inData >> person1a 
```

当然，如果用户输入的字符太多，这也会造成损坏，所以使用`std::string`存储字符串，而不是乱用字符数组。

此外，要流入不止一件事，链`>>`：

```
inData >> person1a >> person1b >> ...; 
```

您的代码使用逗号运算符，这意味着您实际上只是流式传输到`person1a`，并且语句的其余部分无效。

# iphone - 我们如何知道我们的应用程序是否从 iPhone 上卸载？

> ID：13603774
> 
> 赞同：5
> 
> 时间：2012-11-28T11:15:42.703
> 
> 标签：iphone, ios, app-store

如果假设我们的应用程序从 iPhone 上卸载，我想知道日期？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T13:47:16.100

正如其他人已经回答的那样 - 你不能。

但是，如果您在应用程序中启用了推送通知，您可以通过使用 APN 反馈服务来查看哪些 apn 令牌已被删除（假设卸载），从而获得一个非常粗略的想法。此 SO 帖子中有更多信息：[“推送通知”-反馈，卸载应用程序](https://stackoverflow.com/questions/5100343/push-notification-feedback-uninstall-application)

同样，这应该仅用于对您的卸载给出一个非常粗略的想法，因为用户可能出于任何原因选择退出推送通知或用户的令牌更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-19T10:44:45.467

有一些工具可以为您跟踪应用程序的卸载情况。我觉得有用的是[卸载跟踪 - MoEngage](http://www.moengage.com/uninstall-tracking)。他们为您提供了卸载您的应用程序的用户的完整列表。您也可以推断出是什么让用户卸载了您的应用程序。最好的部分是您可以通过[MoEngage](http://www.moengage.com) 仪表板向那些卸载了您的应用程序的用户发送电子邮件，以便获得反馈或让这些用户加入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T11:17:12.543

你不能，没有办法判断应用程序是否被删除，Apple 也不会跟踪你和开发人员可以访问的已卸载应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T12:00:14.847

没有直接的方法可以获取此信息。

但是，您可以通过将第一个下载日期保存在钥匙串或其他文件中，并在您想知道时将其取回。

即使在删除应用程序后，所有钥匙串都存储在您的设备中。假设您删除了该应用程序并再次下载它，您的钥匙串将与第一个日期和时间保持不变。

使用此钥匙串或具有应用程序列表的文件并进行比较以查找丢失的应用程序。

您可以使用一些调整来做到这一点。

阅读：http: [//iphonedevsdk.com/forum/iphone-sdk-development/37103-finding-out-what-apps-installed.html](http://iphonedevsdk.com/forum/iphone-sdk-development/37103-finding-out-what-apps-installed.html)

如果你有越狱，你可以这样做：

```
-(NSMutableArray *)desktopAppsFromDictionary:(NSDictionary *)dictionary{
    NSMutableArray *desktopApps = [NSMutableArray array];

   for (NSString *appKey in dictionary){
      [desktopApps addObject:appKey];
    }
    return desktopApps;
}

-(NSArray *)installedApp{    
   BOOL isDir = NO;
   if([[NSFileManager defaultManager] fileExistsAtPath: installedAppListPath isDirectory: &isDir] && !isDir) 
   {
       NSMutableDictionary *cacheDict = [NSDictionary dictionaryWithContentsOfFile: installedAppListPath];
       NSDictionary *system = [cacheDict objectForKey: @"System"];
       NSMutableArray *installedApp = [NSMutableArray arrayWithArray:[self desktopAppsFromDictionary:system]];

       NSDictionary *user = [cacheDict objectForKey: @"User"]; 
       [installedApp addObjectsFromArray:[self desktopAppsFromDictionary:user]];

       return installedApp;
   }
   return nil;
} 
```

# sql - SQL 2000 Left Join Top 1 of 0 to many 关系

> ID：13603778
> 
> 赞同：1
> 
> 时间：2012-11-28T11:16:05.030
> 
> 标签：sql, tsql, sql-server-2000

这个问题已经在 SO 上被问过多次，但所有答案都是指 SQL 2005 或更高版本（例如`OUTER APPLY`），我们仍在使用 SQL 2000（由于公司原因太复杂，无法进入此处！）

我有一张表`Things`和一张表，`Widgets`关系为 0 到多：

```
CREATE TABLE Things ( ThingId INT, ThingName VARCHAR(50) )

CREATE TABLE Widgets ( WidgetId INT, ThingId INT, WidgetName VARCHAR(50) )

INSERT INTO Things VALUES ( 1, 'Thing 1' )

INSERT INTO Things VALUES ( 2, 'Thing 2' )

INSERT INTO Things VALUES ( 3, 'Thing 3' )

INSERT INTO Widgets VALUES ( 1, 2, 'Thing 2 Widget 1' )

INSERT INTO Widgets VALUES ( 2, 2, 'Thing 2 Widget 2' )

INSERT INTO Widgets VALUES ( 3, 3, 'Thing 3 Widget 1' ) 
```

标准`LEFT OUTER JOIN`返回预期的 4 行

`SELECT * FROM Things t LEFT OUTER JOIN Widgets w ON t.ThingId = w.ThingId`

```
 ThingId | ThingName | WidgetId | ThingId | WidgetName       
---------+-----------+----------+---------+------------------
 1       | Thing 1   | NULL     | NULL    | NULL             
 2       | Thing 2   | 1        | 2       | Thing 2 Widget 1 
 2       | Thing 2   | 2        | 2       | Thing 2 Widget 2 
 3       | Thing 3   | 3        | 3       | Thing 3 Widget 1 
```

但是，我只想要每个事物的最新小部件，即：

```
 ThingId | ThingName | WidgetId | ThingId | WidgetName       
---------+-----------+----------+---------+------------------
 1       | Thing 1   | NULL     | NULL    | NULL             
 2       | Thing 2   | 2        | 2       | Thing 2 Widget 2 
 3       | Thing 3   | 3        | 3       | Thing 3 Widget 1 
```

我的出发点是：

`SELECT * FROM Things t LEFT OUTER JOIN (SELECT TOP 1 * FROM Widgets subw WHERE subw.ThingId = t.ThingId ORDER BY subw.WidgetId DESC) w ON t.ThingId = w.ThingId`

但这无效，因为父`t.ThingId`查询中不存在子查询。

这可以使用 SQL 2000 实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:23:33.800

如果`(ThingId, WidgetId)`组合在 table 中是唯一的`Widgets`，那么这将正常工作：

```
SELECT t.*, w.* 
FROM 
    dbo.Things AS t 
  LEFT OUTER JOIN 
      ( SELECT ThingId, MAX(WidgetId) AS WidgetId 
        FROM dbo.Widgets 
        GROUP BY ThingId
      ) AS 
    subw
      ON  subw.ThingId = t.ThingId
  LEFT OUTER JOIN
    dbo.Widgets AS w
      ON  w.ThingId = subw.ThingId
      AND w.WidgetId = subw.WidgetId ; 
```

# c - 使用 strcmp 将输入表单客户端与服务器端的文件进行比较

> ID：13603779
> 
> 赞同：2
> 
> 时间：2012-11-28T11:16:04.540
> 
> 标签：c, network-programming

这是一项学校作业，我需要建立一个网络，客户端将输入发送到服务器，服务器会将其与文件的内容进行比较，如果文件中存在输入作为关键字，服务器将发送回该项目的消息文件。如果文件中不存在输入，服务器将发送未找到匹配的消息。

* * *

为了搭建一个简单的网络，导师给了我一个 server.cpp 和 client.cpp 的模板，我所要做的就是编写读取文件的部分，将输入与文件进行比较。到目前为止，如果我在客户端正确输入关键字，服务器程序可以将项目发回。问题是当我输入不是关键字的任何内容时，服务器端发生故障并报告我存在内存问题。

* * *

我不熟悉C++中的指针和内存，所以我无法找出问题所在，因此我正在寻找出现此问题的原因和解决方法。这是那部分代码：

```
typedef struct {
int Number;
char* Subject_Code;
char* Subject_Title;
char* Timetable;
char* Instru_Name;
} time;

int parseNumber(char *line){
return atoi(line + 8);}
char *parseCode(char *line){
return line + 14;}
char *parseTitle(char *line){
return line + 15;}
char *parseTime(char *line){
return line + 11;}
char *parseInst(char *line){
return line + 13;}

int main(int argc, char **argv){
    char szBuff[1024];
int msg_len;
int addr_len;
struct sockaddr_in local, client_addr;

SOCKET sock, msg_sock;
WSADATA wsaData;

char *fileLocation ="data.txt";
FILE *file = fopen(fileLocation, "r");

if (!file)printf("%s\n",strerror(errno));
char buffer[1024];
time times[128];
int timeindex = 0;

    if (fread(buffer, 1, sizeof(buffer), file)){
        char *line = strtok(buffer, "\n");
        times[timeindex].Number = parseNumber(line);

        // 0 number, 1 code, 2 title, 3 table, 4 name
        int lineType = 1;
        while ((line= strtok(NULL, "\n"))){
            if(lineType == 5)
            {
                timeindex++;
                lineType = 0;
            }
            switch (lineType) {
            case 0:
                {
                    times[timeindex].Number = parseNumber(line);
                    break;
                }
            case 1:
                {
                    times[timeindex].Subject_Code = parseCode(line);
                    break;
                }
            case 2:
                { 
                    times[timeindex].Subject_Title = parseTitle(line);
                    break;
                }
            case 3:
                {
                    times[timeindex].Timetable = parseTime(line);
                    break;
                }
            case 4:
                {
                    times[timeindex].Instru_Name = parseInst(line);
                    break;
                }
            }
            lineType++; 
        }
    }

...
msg_len = recv(msg_sock, szBuff, sizeof(szBuff), 0);
...

if (msg_len > 0){       

    for (int c = 0; c <= timeindex; c++){
        if(strcmp(szBuff,times[c].Subject_Title)==0 || strcmp(szBuff,times[c].Subject_Code)==0 || strcmp(szBuff,times[c].Instru_Name)==0){
            msg_len = send(msg_sock, times[c].Timetable, sizeof(buffer), 0);
            break;
        }
    }

        msg_len = send(msg_sock, "No matchs were found.\n",20, 0); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:20:51.207

[`strtok()`](http://en.cppreference.com/w/c/string/byte/strtok)要求其输入字符串为空终止。[`fread()`](http://en.cppreference.com/w/c/io/fread)不附加空终止符（在发布的代码中也没有任何空间）并且`buffer`未初始化。如果允许使用`fgets()`，代替`fread()`和`strtok()`用于处理线。否则，用 少读一个字符，`fread()`并确保最后一个字符`buffer`是`'\0'`。

[`strcmp()`](http://en.cppreference.com/w/c/string/byte/strcmp)要求其输入字符串为空终止，`recv()`并且不附加空终止符`szBuff`且未初始化。用 少读一个字符，`recv()`并确保最后一个字符`szBuff`是`'\0'`。

如果`times[c].Timetable`指向的内存字节数少于`buffer`然后这将是无效的访问内存：

```
msg_len = send(msg_sock, times[c].Timetable, sizeof(buffer), 0); 
```

`times[c].Timetable`仅在大小不同的情况下写入字符数。

# javascript - 这个 JavaScript Defer 代码可以简化吗？

> ID：13603782
> 
> 赞同：1
> 
> 时间：2012-11-28T11:16:15.213
> 
> 标签：javascript, jquery, ajax, jquery-deferred

我有一个 JavaScript 引导程序模块，我试图保持非常干净和简单：目前我有如下代码：

```
function bootStrapper() {
       xmlRepository.getAll().done(function (result) {
       autoPolicyForm.show();       
   });
} 
```

在 xmlRepository 中，我在 getAll(); 中使用了一个延迟对象；

```
function getAll () {
    var d = $.Deferred();

    $.ajax({
        type: "GET",
        url: "http://localhost/Autopolicy/dataSource.xml",
        dataType: "xml",
        success: function (xml) {
            d.resolve(xml);
        }
    });

    return d.promise();
} 
```

这段代码运行良好，但我真的很想将引导程序代码进一步简化为：

```
function bootStrapper() {
       var result = xmlRepository.getAll();
       autoPolicyForm.show();       
   });
} 
```

由于调用的异步性质，我尝试的一切都会导致“结果”未定义。

有谁知道如何修改代码以将复杂性移至 xmlRepository 以便实现上述目标？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:17:31.983

在现代 jQuery[中，ajax 函数](http://api.jquery.com/jQuery.ajax/)返回一个承诺，因此您可以简化`getAll`为：

```
function getAll () {
    return $.ajax({
        type: "GET",
        url: "http://localhost/Autopolicy/dataSource.xml",
        dataType: "xml"
    });
} 
```

换句话说，现在可以做

```
$.ajax(url).done(function(xml){...}); 
```

您也可以将 getAll 更改为

```
 function fetchAll (callback) {
        $.ajax({
            type: "GET",
            url: "http://localhost/Autopolicy/dataSource.xml",
            dataType: "xml"
        }).done(callback);
    } 
```

所以你会做

```
 xmlRepository.fetchAll(function (result) {
       autoPolicyForm.show(); 
   }); 
```

但是除了将 async 设置为 false 之外，您无法避免传递函数，因为执行是异步的。您应该考虑到 javascript 应用程序自然是基于事件的，因此 API 的用户可以使用和传递匿名函数（回调）。

# c# - 如何在使用 TWILIO 拨打电话时发送数字

> ID：13603785
> 
> 赞同：4
> 
> 时间：2012-11-28T11:16:21.497
> 
> 标签：c#, asp.net, twilio

我正在使用 Twilio 拨打运行 IVR 系统的号码，并且我必须根据所需的 IVR 菜单选项提供各种数字。现在，我已经尝试了几乎所有的示例代码和快速入门教程，但它对我不起作用。

我正在使用 ASP .Net Web 应用程序使用 Twilio 官方 C# 帮助程序库进行调用。我正在使用以下代码拨打电话。

以下是呼叫连接后提供给 Twilio 的 TwiML 指令

```
 StringBuilder sb = new StringBuilder();
        sb.Append("<?xml version='1.0' encoding='UTF-8'?>");
        sb.Append("   <Response>");
        sb.Append("         <Dial callerId='+1852xxxxxxx' record='true' >");
        sb.Append("               +1475xxxxxxx ");
        sb.Append("         </Dial>");
        sb.Append("   </Response>");
        Response.Write(sb.ToString()); 
```

请注意，“拨号”动词不支持 sendDigits 参数。

非常感谢您的即时回复，因为我被卡住了，需要尽快解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:22:02.710

看起来您希望将`SendDigits`可选参数与出站 API 调用一起传递。

有关更多信息，请[在进行 Twilio API 调用时查看此可选参数列表](http://www.twilio.com/docs/api/rest/making-calls#post-parameters-optional)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:42:05.083

在彻底查看文档后，我找到了允许提供参数`<Number>`的动词的名词。所以我的问题已经解决了。感谢大家的支持。`<Dial>``sendDigits`

问候，

塔希尔·艾哈迈德

# web-services - Dropwizard/Jersey - 从 InMemoryTestContainer 切换到 Grizzly

> ID：13603789
> 
> 赞同：1
> 
> 时间：2012-11-28T11:16:37.940
> 
> 标签：web-services, jersey, grizzly, dropwizard, servlet-container

**背景：**

根据这个问题[http://java.net/jira/browse/JERSEY-623](http://java.net/jira/browse/JERSEY-623)， InMemoryTestContainer 将无法支持具有可注入构造函数的资源。因此，如果您在资源类中注入了 HttpServletRequest，您将需要其他测试容器，例如 grizzly。

**我的情况：**

我正在使用在下面运行 Jersey 的 dropwizard，我在我的资源类中注入了 HttpServletRequest，如下所示：

```
@Context HttpServletRequest request; 
```

我的测试类看起来像：

```
import com.yammer.dropwizard.testing.ResourceTest;
public class MyResourceTest extends ResourceTest {
    // all the tests go here
} 
```

**问题：**

如何将测试容器从 InMemoryTestContainer 切换到 grizzly？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:58:06.683

我自己不必这样做，但这个[要点可能会有所帮助](https://gist.github.com/3016987)。

相关部分是使用

`new JerseyTest(new GrizzlyWebTestContainerFactory())`

并包括

```
<dependency>
  <groupId>com.sun.jersey.jersey-test-framework</groupId>
  <artifactId>jersey-test-framework-grizzly2</artifactId>
  <version>1.12</version>
</dependency> 
```

在`pom.xml`.

# sql - 将 varchar 转换为日期格式

> ID：13603791
> 
> 赞同：0
> 
> 时间：2012-11-28T11:16:43.587
> 
> 标签：sql, sql-server, sql-server-2005, type-conversion

我有 2 个字段 date_issued 和 time_issued 如下

```
date_issued       time_issued
1031              225225 (22 hrs 52 mins 25 secs) 
```

我需要将该 varchar 值转换为日期时间为 dd-mm-yy h:m:s

我试过以下

```
select CONVERT(datetime, date_issued+time_issued ,120) as ttt from tbl 
```

但显示以下错误

```
Msg 241, Level 16, State 1, Line 2
Conversion failed when converting datetime from character string. 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:52:44.267

假设年份是 2012 年：

```
select CONVERT(datetime, '2012' + LEFT(date_issued, 2) + RIGHT(date_issued, 2) + ' ' + LEFT(time_issued, 2) + ':' + SUBSTRING(time_issued, 3, 2) + ':' + right(time_issued, 2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:40:22.813

嗯，首先。

你有一个明显的错误。如果这些列是数字（而不是字符串），那么您将它们相加，这显然是错误的。

其次，如果这些是字符串，那么您在日期区域中缺少一年，并且在时间区域中缺少 :。第三，您需要在这 2 之间添加一个 ' '。

在我的例子中

```
SELECT convert(datetime,'20091231 12:12:12') FROM DUAL 
```

我明白了

```
2009-12-31 12:12:12.000 
```

PS 是的，我在 SQL 服务器中有 DUAL，这不是在 Oracle 中运行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:55:35.463

这是一种方法，`REPLICATE`如果数据包含前导零，您可以删除，否则需要填充以区分日期部分。

```
select
    cast ( 
        stuff(replicate('0', 4 - len(date_issued)) + date_issued, 3, 0, '/') + '/2012'
        + ' ' +
        stuff(stuff(replicate('0', 6 - len(time_issued)) + time_issued, 3, 0, ':'), 6 ,0 ,':')
    as datetime) 
```

# algorithm - 发现字符串中的连续重复模式

> ID：13603793
> 
> 赞同：4
> 
> 时间：2012-11-28T11:16:48.770
> 
> 标签：algorithm, pattern-matching, data-compression

我正在尝试搜索字符串中子字符串重复的最大数量，这里有一些示例：

```
"AQMQMB" => QM (2x)
"AQMPQMB" => <nothing>
"AACABABCABCABCP" => A (2x), AB (2x), ABC (3x) 
```

如您所见，我只搜索连续的子字符串，这似乎是一个问题，因为所有压缩算法（至少我知道）都不关心连续性（[LZ*](http://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Welch "LZ*")），或者太简单而无法处理连续模式而不是单个数据项（[RLE](http://en.wikipedia.org/wiki/Run-length_encoding "RLE")）。我认为使用[后缀树](http://en.wikipedia.org/wiki/Suffix_tree%20%22Suffix%20Trees)由于同样的问题，

我认为有一些生物信息学算法可以做到这一点，有人知道这种算法吗？

**编辑** 在第二个示例中，可能存在多种连续模式的可能性（感谢[Eugen Rieck](https://stackoverflow.com/users/1100552/eugen-rieck "欧根·瑞克")的通知，请阅读下面的评论），但是在我的用例中，这些可能性中的任何一种实际上都是可以接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:30:21.873

后缀树相关算法在这里很有用。

一种在[Dan Gusfield 的字符串、树和序列算法](https://rads.stackoverflow.com/amzn/click/com/0521585198)（第 9.6 章）中进行了描述。它使用分治法和后缀树的组合，时间复杂度为 O(N log N + Z)，其中 Z 是子串重复的次数。

同一本书描述了针对这个问题的更简单的 O(N ² ) 算法，也使用了后缀树。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T11:44:27.230

这是我用于类似问题的方法：

```
<?php

$input="AACABABCABCABCP";

//Prepare index array (A..Z) - adapt to your character range
$idx=array();
for ($i="A"; strlen($i)==1; $i++) $idx[$i]=array();

//Prepare hits array
$hits=array();

//Loop
$len=strlen($input);
for ($i=0;$i<$len;$i++) {

    //Current character
    $current=$input[$i];

    //Cycle past occurrences of character
    foreach ($idx[$current] as $offset) {

        //Check if substring from past occurrence to now matches oncoming
        $matchlen=$i-$offset;
        $match=substr($input,$offset,$matchlen);
        if ($match==substr($input,$i,$matchlen)) {
            //match found - store it
            if (isset($hits[$match])) $hits[$match][]=$i;
            else $hits[$match]=array($offset,$i);
        }
    }

    //Store current character in index
    $idx[$current][]=$i;
}

print_r($hits);

?> 
```

我怀疑它是 O(N*N/M) 时间，N 是字符串长度，M 是字符范围的宽度。

它输出我认为您的示例的正确答案。

**编辑：**

该算法具有在运行时保持有效分数的优势，因此它可用于流，只要您可以通过一些缓冲提前查看。它以效率为代价。

**编辑2：**

如果允许重复检测的最大长度，这将减少空间和时间的使用：通过`if ($matchlen>MAX_MATCH_LEN) ...`限制索引大小和字符串比较长度之类的东西来排除太“早”的过去事件

# c# - 在 C# 中使用委托

> ID：13603795
> 
> 赞同：79
> 
> 时间：2012-11-28T11:16:57.920
> 
> 标签：c#, .net, delegates

在 C# 语言和 .NET 框架中，您能帮我理解代表吗？我试图检查一些代码，发现我收到的结果出乎我的意料。这里是：

```
class Program
{
    public static int I = 0;

    static Func<string> del = new Func<string>(I.ToString);

    static void Main(string[] args)
    {
        I = 10;
        Console.WriteLine("{0}", del());
    }
} 
```

答案是 0，但不是 10。为什么？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-28T11:21:09.937

原因如下：

您声明委托的方式直接指向`ToString`静态 int 实例的方法。它是在创建时捕获的。

正如弗林德伯格在下面的评论中指出的那样，每个委托都有一个目标和一个要在目标上执行的方法。

在这种情况下，要执行的方法显然就是`ToString`方法。有趣的部分是执行该方法的实例：它是`I`创建时的实例，这意味着委托不是`I`用来获取要使用的实例，而是存储对实例本身的引用。

稍后您更改`I`为不同的值，基本上是为其分配一个新实例。这不会神奇地更改您的委托中捕获的实例，为什么要这样做？

要获得您期望的结果，您需要将委托更改为：

```
static Func<string> del = new Func<string>(() => I.ToString()); 
```

像这样，委托指向一个匿名方法，该方法在委托执行`ToString`时在当前`I`执行。

在这种情况下，要执行的方法是在声明委托的类中创建的匿名方法。实例为空，因为它是静态方法。

查看编译器为委托的第二个版本生成的代码：

```
private static Func<string> del = new Func<string>(UserQuery.<.cctor>b__0);
private static string cctor>b__0()
{
    return UserQuery.I.ToString();
} 
```

如您所见，这是一种正常的*方法*。在我们的例子中，它返回调用`ToString`当前实例的结果`I`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T11:23:51.457

您需要传递`I`给您的函数，以便`I.ToString()`可以在适当的时间执行（而不是在创建函数时）。

```
class Program
{
    public static int I = 0;

    static Func<int, string> del = num => num.ToString();

    static void Main(string[] args)
    {
        I = 10;
        Console.WriteLine("{0}", del(I));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:24:30.690

这是应该如何完成的：

```
using System;

namespace ConsoleApplication1
{

    class Program
    {
        public static int I = 0;

        static Func<string> del = new Func<string>(() => {
            return I.ToString();
        });

        static void Main(string[] args)
        {
            I = 10;
            Console.WriteLine("{0}", del());
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-24T10:57:00.833

C#委托启用封装对象和实例以及方法。委托声明定义了派生自 System.Delegate 类的类。委托实例封装了一个调用列表，它是一个或多个方法的列表，每个方法称为可调用实体。

了解更多形式

[http://asp-net-by-parijat.blogspot.in/2015/08/what-is-delegates-in-c-how-to-declare.html](http://asp-net-by-parijat.blogspot.in/2015/08/what-is-delegates-in-c-how-to-declare.html)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-28T11:46:51.037

我的猜测是因为 int 是通过值而不是引用传递的，因此在创建委托时，它是“I”（0）当前值的方法 ToString 的委托。

# sql - 期望参数@FDate，虽然我正在传递参数：s

> ID：13603796
> 
> 赞同：1
> 
> 时间：2012-11-28T11:17:00.500
> 
> 标签：sql, database, procedure

```
USE [SDE]
GO

SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROC [dbo].[RPT_GET_STAFF_CALL_DATA]
@FDate datetime, @FTDate datetime
as
SET NOCOUNT ON

declare @FDTE datetime, @TDTE datetime
/*Set @FDTE = convert(datetime,@FDate,101)
Set @TDTE =  convert(datetime,@FTDate,101)
*/
Set @FDTE= @FDate
Set @TDTE = @FTDate

Select  
"SEQUENCE", 
"FNAME", 
"NAME", 
    ("FNAME" + ' ' + "NAME") as 
"Full Name",
    (SELECT count("SEQUENCE") 
    FROM "_SMDBA_"."_TELMASTE_" as INC 
    WHERE INC."SENT TO" = "_SMDBA_"."_PERSONNEL_"."SEQUENCE"
        and "DATE OPEN" >= @FDTE 
        and "DATE OPEN" < @TDTE) as 
"Assigned Calls", 
    (SELECT count("SEQUENCE")
    FROM "_SMDBA_"."_TELMASTE_" as INC 
    WHERE INC."SENT TO" = "_SMDBA_"."_PERSONNEL_"."SEQUENCE"
        and datediff(year,"DATE OPEN",getdate()) = 0) as 
"Opened Calls YTD",
    (SELECT count("SEQUENCE") 
    FROM "_SMDBA_"."_WORKORD_" as WO 
    WHERE WO."OPEN BY" = "_SMDBA_"."_PERSONNEL_"."SEQUENCE" 
        and "DATE OPEN" >= @FDTE 
        and "DATE OPEN" < @TDTE) as 
"Opened WO's",
    (SELECT count("SEQUENCE") 
    FROM "_SMDBA_"."_WORKORD_" as WO 
    WHERE WO."OPEN BY" = "_SMDBA_"."_PERSONNEL_"."SEQUENCE" 
        and datediff(year,"DATE OPEN",getdate()) = 0) as 
"Opened WOS YTD",
    (SELECT count("SEQUENCE") 
    FROM "_SMDBA_"."_TELMASTE_" as INC 
    WHERE INC."SOLVED_BY" = "_SMDBA_"."_PERSONNEL_"."SEQUENCE"
        and "HD_CCDT01" >= @FDTE 
        and "DATE OPEN" < @TDTE) as 
"Closed Calls",
    (SELECT count("SEQUENCE") 
    FROM "_SMDBA_"."_TELMASTE_" as INC 
    WHERE INC."SOLVED_BY" = "_SMDBA_"."_PERSONNEL_"."SEQUENCE"
        and datediff(year,"DATE OPEN",getdate()) = 0) as 
"Closed Calls YTD",
(SELECT count("SEQUENCE") FROM "_SMDBA_"."_WORKORD_" as WO 

    WHERE WO."CLOSED BY" = "_SMDBA_"."_PERSONNEL_"."SEQUENCE" 
    and "CLOSED ON" >= @FDTE and "DATE OPEN" < @TDTE) 
    as "Closed WO's",
(SELECT count("SEQUENCE") FROM "_SMDBA_"."_WORKORD_" as WO 
    WHERE WO."CLOSED BY" = "_SMDBA_"."_PERSONNEL_"."SEQUENCE" 
    and datediff(year,"CLOSED ON",getdate()) = 0)  
    as "Closed WOS YTD",
(SELECT count("SEQUENCE") FROM "_SMDBA_"."_TELMASTE_" WHERE 
    "DATE OPEN" >= @FDTE and "DATE OPEN" < @TDTE) 
    as TOT_Calls_DRNGE,
(SELECT count("SEQUENCE") FROM "_SMDBA_"."_TELMASTE_" WHERE datediff(year,"DATE OPEN",getdate()) = 0) 
    as TOT_Calls_YTD,
(SELECT count("SEQUENCE") FROM "_SMDBA_"."_WORKORD_" WHERE
    "DATE OPEN" >= @FDTE and "DATE OPEN" < @TDTE) 
    as TOT_WOS_DRNGE,
(SELECT count("SEQUENCE") FROM "_SMDBA_"."_WORKORD_" WHERE datediff(year,"DATE OPEN",getdate()) = 0) 
    as TOT_WOS_YTD,
@FDTE as "From Date",@TDTE as "To Date"

FROM "_SMDBA_"."_PERSONNEL_"

order by "Full Name" 
```

过程或函数“ ”需要未提供的参数“@FDate”。@FDate 和 @FTDate 的错误显示？！！谁能帮我

我在水晶报表中使用此过程，每当我为报表设置数据库位置时，它都会询问参数并提供它们，但是没有运气，我得到了错误？！

# c# - 等待IO的线程会阻塞CPU吗？

> ID：13603797
> 
> 赞同：3
> 
> 时间：2012-11-28T11:17:06.023
> 
> 标签：c#, multithreading, scheduler

假设我有一个 C# 线程做一些阻塞 IO 并等待它完成。现在操作系统调度程序给它 CPU 时间。它会立即归还，还是只会被线程无所事事地使用？或者也许完全不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T11:27:27.100

在 Windows 上，阻塞 IO 到任何设备（可通过文件系统接口或其他设备访问）通过将 IO 请求发送到与设备关联的驱动程序以及事件对象的句柄来工作，然后通过等待来阻塞调用线程事件对象。（当驱动程序完成 IO 时，将发出事件信号）。因此，当线程阻塞 IO 时，它不会占用 CPU，因为它只是在等待事件句柄。

所有阻塞 IO API(s) 都以这种方式工作，在实现上可能存在细微差别。

# bash - BASH：在 Linux 系统上重命名用户

> ID：13603803
> 
> 赞同：1
> 
> 时间：2012-11-28T11:17:26.317
> 
> 标签：bash

我想在系统上创建一些具有不同命名模式的新用户：

*   老：（`firstname+initial of the second name`例如`johnk`：）
*   新的：（`firstname.surname`例如`john.kennedy`：）

我被新用户的密码更改困扰。理想情况下，我想从文件中提取影子密码，但我仍在学习 BASH 脚本，我认为它太高级了，所以现在我刚刚创建了一个包含旧用户和相应影子密码的列表。我正在考虑使用以下命令更新新用户密码：`/usr/sbin/usermod $u -p "$HASH"`但我不确定如何为该命令列出旧用户并将其与新用户匹配。

```
#!/usr/bin/env bash

OLD="
johnk="shadow_hash"
...
"

NEWUSERS="
john.kennedy
...
"

for u in $NEWUSERS; do

  if [ -z "$(getent passwd $u)" ]; then

    echo "User $u does NOT exist, creating..."

    /usr/sbin/useradd $u
#    /usr/sbin/usermod $u -p "$HASH"
  else
    echo "User $un DOES exist."
  fi
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:19:11.247

您真的要创建新用户，还是只是为现有用户添加登录别名？（或者，更简单，更改用户名？）

如果您创建一个新用户，那么您需要修复很多文件权限，这可能很烦人。

您还必须处理主目录的名称，这可能与旧用户名有关。您可以只创建一个从新名称到旧名称的符号链接（或重命名目录并将旧名称符号链接到新名称；但请确保在您这样做时他们没有对他们的文件做任何事情）。

无论如何，无论您怎么做，您都可以使用数字用户 ID 来关联这两个名称。对于别名，您将创建具有相同数字用户 id 的新名称（您需要为 usermod 指定一个标志以允许此操作）并且您仍然需要处理主目录的名称以及可能的其他名称，但是您无需修复权限。如果您不想创建别名，您可以创建所有具有数字用户 ID 的新用户名，该用户名与旧用户 ID 有一个固定偏移量（例如高 200，对于某个值为 200）。请注意，`getent`允许通过用户名或数字用户 ID 进行查找。

# java - IllegalArgumentException 使用带有 proguard 的 actionbarsherlock

> ID：13603811
> 
> 赞同：2
> 
> 时间：2012-11-28T11:17:43.183
> 
> 标签：java, actionbarsherlock, proguard

我的项目在没有 Proguard 的情况下运行良好，即在我运行项目时安装由 Eclipse 生成的 apk 并将其安装在三星 Galaxy 设备上，一切都很好。但是，当我尝试使用 Proguard 导出已签名的 apk 时，可以正常导出，但是当我尝试运行应用程序时，该应用程序不起作用。我在模拟器上安装了 apk 以查看 Logcat 的异常，它返回给我的是这样的：

```
11-28 02:28:33.709: E/AndroidRuntime(853): FATAL EXCEPTION: main
11-28 02:28:33.709: E/AndroidRuntime(853): java.lang.ExceptionInInitializerError
11-28 02:28:33.709: E/AndroidRuntime(853):  at    com.actionbarsherlock.app.SherlockActivity.c(Unknown Source)
11-28 02:28:33.709: E/AndroidRuntime(853):  at com.actionbarsherlock.app.SherlockActivity.setContentView(Unknown Source)
11-28 02:28:33.709: E/AndroidRuntime(853):  at com.linxter.allaware.views.AllAwareActivity.a(Unknown Source)
11-28 02:28:33.709: E/AndroidRuntime(853):  at   com.linxter.allaware.views.StartupActivity.onCreate(Unknown Source)
11-28 02:28:33.709: E/AndroidRuntime(853):  at android.app.Activity.performCreate(Activity.java:4465)
11-28 02:28:33.709: E/AndroidRuntime(853):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-28 02:28:33.709: E/AndroidRuntime(853):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
11-28 02:28:33.709: E/AndroidRuntime(853):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
11-28 02:28:33.709: E/AndroidRuntime(853):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
11-28 02:28:33.709: E/AndroidRuntime(853):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
11-28 02:28:33.709: E/AndroidRuntime(853):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-28 02:28:33.709: E/AndroidRuntime(853):  at android.os.Looper.loop(Looper.java:137)
11-28 02:28:33.709: E/AndroidRuntime(853):  at android.app.ActivityThread.main(ActivityThread.java:4424)
11-28 02:28:33.709: E/AndroidRuntime(853):  at java.lang.reflect.Method.invokeNative(Native Method)
11-28 02:28:33.709: E/AndroidRuntime(853):  at java.lang.reflect.Method.invoke(Method.java:511)
11-28 02:28:33.709: E/AndroidRuntime(853):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-28 02:28:33.709: E/AndroidRuntime(853):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-28 02:28:33.709: E/AndroidRuntime(853):  at dalvik.system.NativeStart.main(Native Method)
11-28 02:28:33.709: E/AndroidRuntime(853): Caused by: java.lang.IllegalArgumentException: Class a is not annotated with @Implementation
11-28 02:28:33.709: E/AndroidRuntime(853):  at com.actionbarsherlock.a.a(Unknown Source)
11-28 02:28:33.709: E/AndroidRuntime(853):  at com.actionbarsherlock.a.<clinit>(Unknown Source)
11-28 02:28:33.709: E/AndroidRuntime(853):  ... 18 more 
```

我使用最新版本的 Proguard，4.8 版和最新版本的 ActionBarSherlock，4.2.0。这是我的 Proguard 配置文件的一部分：

```
-ignorewarnings
-target 1.6
-optimizationpasses 5
-printmapping mapping.txt
# -overloadaggressively
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-dump class_files.txt
-printseeds seeds.txt
-printusage unused.txt

# The -optimizations option disables some arithmetic simplifications that Dalvik 1.0 and 1.5 can't handle.
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

# Recommended configuration for ActionBarSherlock on http://actionbarsherlock.com/faq.html
-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }
-keepattributes *Annotation*

# Keep classes which are entry points.
-keep public class * extends android.app.Activity
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.Application

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

# Also keep - Enumerations. Keep the special static methods that are required in
# enumeration classes.
-keepclassmembers enum  * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

# Keep names - Native method names. Keep all native class/method names.
-keepclasseswithmembers,allowshrinking class * {
    native <methods>;
} 
```

怎么了？我很感激任何帮助。谢谢你。

# css - 如何使div彼此相邻？

> ID：13603821
> 
> 赞同：3
> 
> 时间：2012-11-28T11:18:36.303
> 
> 标签：css, html

我对 css 和 html 的了解相当有限。我正在尝试制作包含图像和一行文本的图块，这些图块应该彼此相邻，如果已使用屏幕的宽度，则继续下一行。

![我需要的例子](../Images/a0053bcf45515198f6ee027dfb0dcd37.png)

这张图片显示了我需要的东西。蓝色区域是图像，它下面的文本是水平对齐的`center`。瓷砖的宽度为 160 像素，它们的高度取决于文本的长度，但至少应为 150 像素。很明显，我知道我必须使用 div，但我真的没有比这更进一步的了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T11:26:58.133

**HTML**

```
 <div><img src=".jpg" width="110" />text</div>
      .
      .
      .
     <div><img src=".jpg" width="110" />text</div> 
```

**CSS**

```
div{
    width:160px;
    border:1px solid grey;
    text-align:center;
    min-height:150px;
    height:auto;
    vertical-align:middle;
    padding:8px;
    float:left
}
img{display:block; margin:0 auto} 
```

**[演示](http://jsfiddle.net/pcpnM/1/)**

调整结果部分的大小以查看效果

`min-height:150px`将默认高度设为 150px

`height:auto`有助于根据内容扩展 div。

`float:left`使 div 彼此相邻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:21:25.973

你在 w3schools 中看过这个图片库示例吗？

[http://www.w3schools.com/css/css_image_gallery.asp](http://www.w3schools.com/css/css_image_gallery.asp)

示例代码-

html-

```
<div class="img">
 <a target="_blank" href="klematis_big.htm"><img src="klematis_small.jpg" alt="Klematis" width="110" height="90"></a>
 <div class="desc">Add a description of the image here</div>
</div>
<div class="img">
 <a target="_blank" href="klematis2_big.htm"><img src="klematis2_small.jpg" alt="Klematis" width="110" height="90"></a>
 <div class="desc">Add a description of the image here</div>
</div>
<div class="img">
 <a target="_blank" href="klematis3_big.htm"><img src="klematis3_small.jpg" alt="Klematis" width="110" height="90"></a>
 <div class="desc">Add a description of the image here</div>
</div>
<div class="img">
 <a target="_blank" href="klematis4_big.htm"><img src="klematis4_small.jpg" alt="Klematis" width="110" height="90"></a>
 <div class="desc">Add a description of the image here</div>
</div> 
```

CSS-

```
div.img
{
  margin: 2px;
  border: 1px solid #0000ff;
  height: auto;
  width: auto;
  float: left;
  text-align: center;
}   
div.img img
{
  display: inline;
  margin: 3px;
  border: 1px solid #ffffff;
}
div.img a:hover img {border: 1px solid #0000ff;}
div.desc
{
  text-align: center;
  font-weight: normal;
  width: 120px;
  margin: 2px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:29:51.340

看看这个：

[http://jsfiddle.net/LX6EY/](http://jsfiddle.net/LX6EY/)

HTML

```
<div class="element">
    <p>Some content goes in here!</p>
</div>
<div class="element">
    <p>Some content goes in here!</p>
</div>
<div class="element">
    <p>Some content goes in here!</p>
</div> 
```

CSS

```
.element { background: #666; border: 1px solid #000; color: #fff; float: left; height: 260px; padding: 20px; width: 210px; } 
```

有关浮动的更多信息，请参阅[此处](http://css-tricks.com/all-about-floats/)，它们非常有用，目前对于大多数网站的布局都非常重要。

# iphone - iPhone SDK：使用 Facebook Graph API 在 Post 中标记朋友

> ID：13603822
> 
> 赞同：2
> 
> 时间：2012-11-28T11:18:37.613
> 
> 标签：iphone, ios, facebook-graph-api

我尝试使用 FBRequestConnection 类方法发布带有朋友标签的状态`startForPostStatusUpdate:place:tags:completionHandler:`

作为

```
[self dismissViewControllerAnimated:YES completion:nil];
    [FBRequestConnection startForPostStatusUpdate:Message
                                            place:nil
                                             tags:[NSArray arrayWithArray:users] completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                                 [self showAlert:@"" result:result error:error];
                                             }]; 
```

其中 users 数组包含用户 ID。

我收到错误消息“无法指定没有地点标签的用户标签”。

请告诉我解决方案如何在此方法中添加位置参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-12T01:09:55.510

```
[FBRequestConnection startForPostStatusUpdate:@"test message with place and tags" place:@"155021662189" tags:@[@"yourFriendID"] completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    NSLog(@"startForPostStatusUpdate: %@, error: %@", result, error);
}]; 
```

使用 155021662189 作为地方的空值

# c# - 为基类属性赋值并从子类访问它导致调试器强制停止

> ID：13603825
> 
> 赞同：0
> 
> 时间：2012-11-28T11:19:18.347
> 
> 标签：c#, asp.net, automatic-properties

我有一个属性的基类

```
 public class Parameters
  {
    public string caption
    {
        get;
        set;
    }

    public string subcaption
    {
        get;
        set;
    }
    public string bgColor
    {
        get
        {
            if (bgColor == " ")
                return bgColor = "FFFFFF";
            else
                return bgColor;
        }
        set { bgColor = value; }
    }
 }
 //some other properties with default return values 
```

和其他类继承自该类并具有返回字符串生成器的方法

```
 public class Bar : Parameters
      {
    public StringBuilder GetXML()
    {
        StringBuilder xmlData = new StringBuilder();
        xmlData.Append("<chart bgColor='" + bgColor + "'"
                     + " caption='" + caption + "'"
                     + " subcaption='" + subcaption + "'>");//mentioned here are some properties there are many in the xmldata.append function 
        return xmlData;
    }
      } 
```

现在其他一些类试图通过声明对象来访问这个方法

```
 Bar XML = new Bar();
            XML.caption = "Caption";
            XML.subcaption = "subcap"; //setting values properties which dont have default return values 
            XML.GetXML(); 
```

当调试器进入GetXML方法调试器强制关闭自己时，我在这里缺少什么是与[此相关的吗](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/f9b08dd4-8d20-4104-9a24-9f002caceb48/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:20:13.563

这只是损坏的代码。

```
 return bgColor = "FFFFFF"; 
```

将评估为布尔值而不是字符串。

您还尝试在 getter 中使用不存在的支持字段。

尝试这样的事情：

```
private string _bgColor;
  public string bgColor
  {
     get
     {
        if (string.IsNullOrEmpty(_bgColor))
        {
           _bgColor = "FFFFFF";
        }

        return _bgColor;
     }
     set { _bgColor = value; }
  } 
```

# eclipse - 如何设置新的语言 IDE

> ID：13603829
> 
> 赞同：2
> 
> 时间：2012-11-28T11:19:27.347
> 
> 标签：eclipse, ide, notepad++

在工作中，我们使用专有语言并使用带有简单代码突出显示的 Notepad++ 进行编程。这真的很烦人，所以我想做的是花一些时间来设置一个文本编辑器或现有的 IDE 来支持我的语言。

我用谷歌搜索了很多，有很多选择，在开始工作之前，我想问你什么是最好的选择。我想要做的是，像一个 IDE，一个语法高亮，一个带有函数列表树的窗口，在同一个子树中的本地函数变量，也许是文本自动完成（如果我输入“pro”，我想看看建议“程序”，如果我按回车，它会为我写类似

```
procedure "name" {
   --code--
} 
```

将光标放在“名称”上，准备更改它。等等等等……

你能建议我遵循正确的道路吗？是继续使用记事本++吗？使用 sourcecookifier？功能列表？或者我必须更改为另一个文本编辑器？还是有一些著名的 IDE，如 Eclipse、NetBeans 等，可以轻松添加我自己的语言？

PS。我的语言很简单，没有复杂的结构，类似于 Pascal。像这样的东西：

```
variable int  xyz
PROCEDURE asd
BEGIN
END PROCEDURE asd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:49:03.503

我建议您继续使用 Notepad++ 并使用一些插件和配置对其进行扩展。即使您可能无法获得像 Eclipse 这样的所有优秀功能，这将是相当快速和容易设置的，并且仍然会带来巨大的胜利。但由于您已经了解 Notepad++，因此不需要学习一个全新的工具。

我发现一些有用的插件

*   [功能列表](http://sourceforge.net/projects/npp-plugins/files/Function%20List/)
*   [光探索者](http://sourceforge.net/projects/npp-plugins/files/LightExplorer/)
*   [XBrackets 精简版](http://sourceforge.net/projects/npp-plugins/files/XBrackets%20Lite/)

可能还有很多对您有用的东西。

Notepad++ 也有一些内置的自动完成功能，可以在设置中启用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:17:08.153

您评估[过 Eclipse XTEXT](http://www.eclipse.org/Xtext/)吗？

> 什么是 Xtext？
> 
> Xtext 是一个用于开发编程语言和领域特定语言的框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:51:08.423

过去几年我使用的唯一 IDE 是[Eclipse](http://eclipse.org/)。还有许多其他可用的 IDE，同样值得注意和流行的是[Netbeans](http://netbeans.org/)。还有很多其他的。需要注意的是，所有 IDE 都有自己的粉丝，但我只能与 Eclipse 交谈。

Eclipse 是一个平台，这意味着它是一个应用程序，您可以在其上构建其他应用程序。Eclipse 提供了一个框架，您可以对其进行定制和扩展以生成一个工作应用程序。它负责用户界面、偏好存储、使用 OSGi 的模块化以及许多其他事情。

Eclipse 具有支持您正在寻找的功能的工具：

*   编辑器中的语法高亮显示。
*   大纲视图在树中提供函数和变量列表
*   自动完成和建议（通过按 ctrl-space 激活）
*   用于填写文件和程序等的代码模板。

缺点是定制和扩展 Eclipse 来做你想做的事并非易事。在为 Eclipse 编写了一个语言调试器之后，我可以告诉您，利用 Eclipse 的平台有很大帮助，但是有一个学习曲线。你基本上必须想出一组新的插件来提供你的突出显示、大纲、自动完成建议和模板（我不确定模板支持是否内置到平台中）。

所以我想说，除非你能为 Eclipse 找到某种可扩展的编辑器——我知道[Aptana](http://www.aptana.com/)对于基于标签的标记是可扩展的——你可能还是使用现有的工具。

不过，一定要探索其他 IDE——我听说过关于[IDEA](http://www.jetbrains.com/idea/)和 Netbeans 的好消息。:)

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T12:51:01.493

我可以推荐 SynWrite 编辑器。对外部语言的良好支持，完全可定制。（新词法分析器的编辑在那里）

# jsf-2 - 使用 f:ajax 时 JSF 不触发 bean setter

> ID：13603831
> 
> 赞同：0
> 
> 时间：2012-11-28T11:19:29.657
> 
> 标签：jsf-2

这是我之前关于页面组件条件渲染的[帖子的更新。](https://stackoverflow.com/questions/13454295/jsf-condtional-rendering-based-on-menu-value)我现在可以使用 f:ajax 标记根据选定的用户输入有条件地在页面上呈现不同的组件。问题在于，当我单击命令按钮时，使用 ajax 有条件地呈现的输入不会在提交时被读取。我猜这是因为当我添加新组件时整个页面没有重新呈现，并且提交按钮看不到它们，即使它们在那里。这是我的表单页面的片段（它包含在 ah:form 标签中）：

```
 <h:outputLabel for="selectPersonType" value="Select Type: "/>
            <h:selectOneMenu id="selectPersonType" value="#{addPersonBean.personType}" label="Person Type" required="true">
                <f:selectItem itemValue=""/>
                <f:selectItems value="#{listBean.personTypes}" />
                <f:ajax render="results"/>
            </h:selectOneMenu>
            <h:message for="selectPersonType" style="color: red"/>
        </h:panelGrid>

        <h:panelGroup id="results">

            <h:panelGroup rendered="#{addPersonBean.personType == 'STUDENT'}">
                <h:outputLabel for="selectSchoolType" value="School Type: " />
                <h:selectOneMenu id="selectSchoolType" value="#{addPersonBean.schoolType}">
                    <f:selectItems value="#{listBean.schoolTypes}" />
                    <f:ajax execute="selectSchoolType"/>
                </h:selectOneMenu>
            </h:panelGroup>

            <h:panelGroup rendered="#{addPersonBean.personType == 'PATIENT'}">
                <h:outputLabel for="smoker" value="Smoker? " />
                <h:selectBooleanCheckbox id="smoker" value="#{addPersonBean.smoker}">
                    <f:ajax execute="smoker"/>
                </h:selectBooleanCheckbox>

            </h:panelGroup>
        </h:panelGroup>

        <h:commandButton value="Add Person" action="#{addPersonBean.action}"/> 
```

这里的问题是，当我单击命令按钮时，没有设置 ID 为“selectSchoolType”和“吸烟者”值的组件，因为它们是在页面加载后使用 selectPersonType 选择菜单有条件地呈现的。有没有办法在组件的值更改而不是单击提交按钮时触发组件（因此，在我单击提交之前应该处理它们的值）。如您所见，我尝试使用 f:ajax 和附加到相关组件的执行属性，但它似乎不起作用。（我相信这些组件的默认事件是 valueChange，所以没有将它们添加到 f:ajax 标签中，但我已经尝试过 'change' 和 'valueChange'）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:58:09.033

你所有的`<f:ajax>`东西都在一个条件渲染的组件中。在处理表单提交期间，当`rendered`属性后面的条件评估为时，此构造将失败。`false`当`#{addPersonBean}`在请求范围内并且没有`rendered`在（后）构造期间预初始化属性背后的条件时，或者当它以错误的方式在 getter/setter 中执行业务逻辑时，就会发生这种情况。

将其放置`#{addPersonBean}`在视图范围内并确保您没有在 getter/setter 中执行业务逻辑应该可以解决此问题。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 第 5 点适用于您
*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# json - 桑基图转换

> ID：13603832
> 
> 赞同：23
> 
> 时间：2012-11-28T11:19:33.653
> 
> 标签：json, d3.js, transition, sankey-diagram

我想知道是否有一种简单的方法可以修改[桑基图示例](http://bost.ocks.org/mike/sankey/)，以便顺利过渡到新数据。例如，假设我有不同的数据文件（energy1.json、energy2.json ...），d3 如何为第一个数据集绘制桑基图，然后等待并稍后重新排列框以表示第二个数据集？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-21T00:49:20.590

这个有可能。这是使用 csv 文件的一种方法。在这里工作 sankey：[https ://www.betterment.com/resources/investment-strategy/portfolio-management/portfolio-diversification/](https://www.betterment.com/resources/investment-strategy/portfolio-management/portfolio-diversification/)

1.  在 d3.csv 调用之外定义一个全局数组。

    ```
    var portfolioValues = []; 
    ```

2.  解析 csv 以创建节点/链接结构时，将值推送到全局数组。

    ```
    d3.csv("etf-geo.csv", function(error, data) {
        graph = {"nodes" : [], "links" : []};
        data.forEach(function (d, i) {
            var item = { source: d.source, target: d.target, values: [] };
            for (var j=0; j < 101; j++) {
                item.values.push(d['value'+j.toString()]);
            }
            portfolioValues.push(item);
            graph.nodes.push({ "name": d.source });
            graph.nodes.push({ "name": d.target });
            graph.links.push({
                source: portfolioValues[i].source,
                target: portfolioValues[i].target,
                value: portfolioValues[i].values[startingAllocation]
            });
        });

    //this handy little function returns only the distinct / unique nodes
    graph.nodes = d3.keys(
        d3.nest()
            .key(function (d) { return d.name; })
            .map(graph.nodes)
    );

    // it appears d3 with force layout wants a numeric source and target
    // so loop through each link replacing the text with its index from node
    graph.links.forEach(function (d, i) {
        graph.links[i].source = graph.nodes.indexOf(graph.links[i].source);
        graph.links[i].target = graph.nodes.indexOf(graph.links[i].target);
        portfolioValues[i].source = graph.links[i].source;
        portfolioValues[i].target = graph.links[i].target;
    });

    // now loop through each nodes to make nodes an array of objects
    // rather than an array of strings
    graph.nodes.forEach(function (d, i) {
        graph.nodes[i] = { "name": d };
    });

    // construct sankey
    sankey
        .nodes(graph.nodes)
        .links(graph.links)
        .layout(); 
    ```

3.  监听更改并将用户输入传递给您的更新函数。

    ```
    $(".sankey-slider").bind("slider:changed", function (event, data) {

    slideValue = data.value;

    updateData(parseInt(slideValue));

     }); 
    ```

4.  创建一个临时数组并从全局数组中检索正确的值。调用 sankey 函数来重新计算布局。

    ```
     var newLinks = [];

        portfolioValues.forEach(function(p, i) {
            newLinks.push({
              source: p.source,
              target: p.target,
              value: p.values[allocation]
            });
        });

        graph.links = newLinks;

        sankey
        .nodes(graph.nodes)
        .links(graph.links)
        .size([width, height])
        .layout(); 
    ```

5.  选择需要更改的每个元素并传递新的数据值。

    ```
    d3.selectAll(".link")
      .data(graph.links)
      .attr("d", path)
      .attr("id", function(d,i){
        d.id = i;
        return "link-"+i;
      })
      .style("stroke-width", function(d) { return Math.max(1, d.dy); })
      .sort(function(a, b) { return b.dy - a.dy; });

    d3.selectAll(".node").attr("transform", function(d) {
      return "translate(" + d.x + "," + d.y + ")"; });

    d3.selectAll("rect")
    .attr("height", function(d) { return d.dy; })
    .on("mouseover",highlight_node_links)
    .on("mouseout",onNodeMouseout); 
    ```

在这里工作 sankey： [https ://www.betterment.com/resources/investment-strategy/portfolio-management/portfolio-diversification/](https://www.betterment.com/resources/investment-strategy/portfolio-management/portfolio-diversification/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:11:40.237

由于节点的自动定位包括试图最小化连接图中的链接距离的部分，这是一个 np 优化问题，任何类型的优化器都可能从一个最小值跳转到另一个最小值，从而导致布局跳转。所以保证平稳过渡是不可能的。

最接近的可能解决方案可能是在两个输入数据集之间进行线性插值，从而生成一系列图表，这些图表（取决于数据）或多或少地从一个两个另一个平滑过渡。

希望这可以帮助。

# iphone - ios中的ASCII解码

> ID：13603835
> 
> 赞同：0
> 
> 时间：2012-11-28T11:19:41.657
> 
> 标签：iphone, objective-c, ios

任何人都可以在 iOS 中解码 ascii 值吗？

我可以解码单个字符值，但我无法解码多个字符

提前致谢。

* * *

这是我的字符串值

> <?xml 版本=\"1.0\" 编码=\"UTF-8\" ?><prestashop></prestashop>

ascii 编码的值为

> 62651221111103412010311611710711311263365148503634103112101113102107112105633687‌​867247583634656462114116103117118991171061131146462491141161031171189911710611311‌​464

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:23:12.230

ascii 只是一个字符串编码

你只需要有这个：

```
NSData *ascii = ... //asci data
NSString *string = [[NSString alloc] initWithData:ascii encoding:NSASCIIStringEncoding]; 
```

或者

```
char *cStringInAscii = "lalalalasada";
NSString *string = [NSString stringWithCString:cStringInAscii encoding:NSASCIIStringEncoding]; 
```

# delphi - 如何在 Delphi XE3 中将 String 转换为 LongInt？

> ID：13603838
> 
> 赞同：0
> 
> 时间：2012-11-28T11:19:54.227
> 
> 标签：delphi, delphi-xe3

如何在 Delphi XE3 中将 String 转换为 LongInt？strtoInt & strToint64 用于类型小于 LongInt 的变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T11:33:26.093

查看[它的签名](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.StrToInt)，我不认为 StrToInt 的 int 小于 longint。Integer 默认是 Delphi 中 LongInt 的别名。[这](http://docwiki.embarcadero.com/RADStudio/XE3/en/Internal_Data_Formats)是这些类型的表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:25:52.150

使用值的`...StrToInt...()`重载`Integer`会很好。 `Integer`并且`LongInt`是相同的字节大小。

# r - 加入 data.table 意外的 NA 值

> ID：13603845
> 
> 赞同：0
> 
> 时间：2012-11-28T11:20:09.363
> 
> 标签：r, data.table

> **可能重复：**
> [data.table - 加入 NA 键](https://stackoverflow.com/questions/13521843/data-table-join-na-keys)

我已经问过这个问题，但没有得到任何好的答案。如果我加入两个包含 NA 键的 data.tables，我会得到一些意想不到的东西。

```
a = data.table(a=c(NA,1,11,NA,NA),aa=c(0,11,333,3,5))
b = data.table(a=c(NA,1,33,2),bb=c(11,NA,100,3))
merge(a,b,by="a",all.x=T)
    a  aa bb
1: NA   0 NA
2: NA   3  3
3: NA   5  3
4:  1  11 NA
5: 11 333 NA 
```

这应该是相同的

```
merge(b,a,by="a",all.y=T)
    a bb  aa
1: NA 11   5
2: NA NA   0
3: NA NA   3
4:  1 NA  11
5: 11 NA 333 
```

有趣的是，它们都不是您期望得到的输出。

# tsql - 将查询结果合二为一

> ID：13603848
> 
> 赞同：1
> 
> 时间：2012-11-28T11:20:24.570
> 
> 标签：tsql

这是我用来追踪员工休息日的表格。此示例仅适用于一个人。

```
ID   PID     Year       OffDays       DayTypeNumber
------------------------------------------
1     1      2011       10            1
2     1      2011       5             2
3     1      2012       20            1
4     1      2012       3             2 
```

我想编写这样一个查询，该查询每年只显示一个结果，并带有附加列

```
Year       OffDays(1)    OffDays(2)
------------------------------------------
2011       10            5
2012       20            3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:27:48.530

您可以为此使用该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能：

```
select year,
  [1] [OffDays(1)],
  [2] [OffDays(2)]
from
(
  select year, offdays, daytypenumber
  from yourtable
) src
pivot
(
  sum(offdays)
  for daytypenumber in([1], [2])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8622d/3)

结果：

```
| YEAR | OFFDAYS(1) | OFFDAYS(2) |
----------------------------------
| 2011 |         10 |          5 |
| 2012 |         20 |          3 | 
```

或者您可以使用带有`CASE`语句的聚合函数：

```
select year,
  sum(case when daytypenumber = 1 then offdays end) [OffDays(1)],
  sum(case when daytypenumber = 2 then offdays end) [OffDays(2)]
from yourtable
group by year 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8622d/5)

如果您只有两种要比较的类型，那么您可以使用子查询：

```
select t1.year, 
  [OffDays(1)],
  [OffDays(2)]
from
(
  select sum(offdays) [OffDays(1)], year
  from yourtable
  where daytypenumber = 1
  group by year
) t1
left join
(
  select sum(offdays) [OffDays(2)], year
  from yourtable
  where daytypenumber = 2
  group by year
) t2
  on t1.year = t2.year 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8622d/11)

如果您有已知数量的值，上述答案将非常`DayTypeNumber`有用，但如果这些值未知，则可以使用动态 SQL 生成`PIVOT`：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colNames AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(DayTypeNumber) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colNames = STUFF((SELECT distinct ', ' + QUOTENAME(DayTypeNumber) 
                      +' as [OffDays('+cast(DayTypeNumber as varchar(10))+')]'
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT year,' + @colNames + ' from 
             (
                select year, offdays, daytypenumber
                from yourtable
            ) x
            pivot 
            (
                sum(offdays)
                for daytypenumber in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8622d/17)

所有这些都会产生相同的结果：

```
| YEAR | OFFDAYS(1) | OFFDAYS(2) |
----------------------------------
| 2011 |         10 |          5 |
| 2012 |         20 |          3 | 
```

# android - 图片在android中从左到右和从右到左滑动？

> ID：13603850
> 
> 赞同：0
> 
> 时间：2012-11-28T11:20:26.680
> 
> 标签：android

我想根据我想更改图像的三个位置用手指从左到右和从右到左滑动图像。如果我从两个向左移动，那么圆圈应该显示在男性上，如果我直接从男性移动到女性，那么圆圈应该是女性的位置。我尝试过使用切换按钮，但它仅适用于两个图像。

看下面是场景

男性--->两者--->女性

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:49:23.797

如您所知，只有三个项目：男性为 0，两者均为 1，女性为 2。取一个变量，例如 counter=0。当计数器的值变为2时，将其值重置为0，当其值变为0时，将其重置为2。这就是逻辑。

# visual-studio - Visual Studio 2012 64 位？

> ID：13603854
> 
> 赞同：64
> 
> 时间：2012-11-28T11:20:32.697
> 
> 标签：visual-studio, visual-studio-2012, 64-bit

我知道在 Visual Studio 2010 中没有 64 位版本。vs2012有64位版本吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-28T11:23:05.450

不，没有。

可能出于[与 Visual Studio 2010 所述相同的原因](http://blogs.msdn.com/b/ricom/archive/2009/06/10/visual-studio-why-is-there-no-64-bit-version.aspx)（不需要额外的地址空间，并且因为对于此应用程序，它会膨胀、减慢速度并且需要很长时间才能移植到这样的架构，更不用说 - 32 位版本适用于 64 位机器）。

* * *

更新：

微软现在宣布[Visual Studio 2022 将是一个 64 位应用程序](https://devblogs.microsoft.com/visualstudio/visual-studio-2022/)。

我希望主要驱动程序之一是启用大于约 4GB 的可寻址 32 位空间的加载和调试内存转储（考虑到 Windows 已经使用 64 位多长时间，这种情况不再那么罕见了）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-28T11:24:00.697

不，没有 64 位版本。

您可以查看此[链接](http://blogs.msdn.com/b/ricom/archive/2009/06/10/visual-studio-why-is-there-no-64-bit-version.aspx) *（想添加未添加的原因）*

> **为什么不立即使用 64 位？**
> 
> 首先，从性能的角度来看，指针变得更大，因此数据结构变得更大，并且处理器缓存保持相同大小。这基本上会导致原始速度下降（您的里程可能会有所不同）。因此，您从一个洞开始，您必须通过使用 4G 以上的额外内存来发挥自己的优势，从而将自己从那个洞中挖掘出来。在 Visual Studio 中，这可能发生在一些大型解决方案中，但我认为最好的做法是首先使用更少的内存。VS 的许多算法都适用于此。
> 
> 其次，从成本的角度来看，将 Visual Studio 移植到 64 位的最短路径可能是将其中的大部分以增量方式移植到托管代码，然后移植其余部分。完整移植这么多本机代码的成本将非常高，当然所有已知的扩展都会中断，我们基本上必须创建一个 64 位生态系统，就像你为驱动程序所做的那样。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-28T11:24:23.077

没有。显然也没有计划。

# qt - 如何使用名为 xlinu-gcc 的交叉编译器为 arm 构建 qt

> ID：13603855
> 
> 赞同：0
> 
> 时间：2012-11-28T11:20:32.933
> 
> 标签：qt

我想使用名为 xlinux-gcc 的交叉编译器为 arm 平台构建 qt-4.7.4 开源。任何人都可以告诉我要遵循的步骤以及要在 linux 终端上使用的命令。我正在使用 linux mint - 13 作为我的工作站。我从互联网上得到了一些帮助，但由于我是初学者，所以我很困惑。请帮我建立qt。您还可以告诉我如何在其中添加 opengls es2 支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:52:01.323

您必须为您的平台创建一个 qmake 规范文件。进入 mkspec 目录并查看为类似平台编写的 qmake.conf 文件。为你做同样的事情。您必须指定一些变量来指示您的编译器、您的 sysroot、特定库的位置等...其中一些变量是添加 es2 支持所需的变量。另外，在配置的时候，添加参数-opengl es2。配置脚本末尾的摘要会告诉您是否启用了 OpenGL ES 2。

# php - 服务器未检测到 CSS 样式表路径 404 not found 错误？

> ID：13603857
> 
> 赞同：2
> 
> 时间：2012-11-28T11:20:35.473
> 
> 标签：php, css

我有一个名为 header.php 的头文件，如下所示：

它位于一个名为 includes 的文件夹中，因此路径为 includes/header.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
<html dir="ltr" lang="en-US" xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <title>***</title>
        <link rel='stylesheet' href='../_layout/scripts/jquery.fullcalendar/fullcalendar.css' type='text/css' media='screen' />
        <link rel='stylesheet' href='../_layout/scripts/jquery.fullcalendar/fullcalendar.print.css' type='text/css' media='print' />
        <!-- Styles -->
        <link rel='stylesheet' href='style.css' type='text/css' media='all' />
        <!--[if IE]>

            <link rel='stylesheet' href='../_layout/IE.css' type='text/css' media='all' />      

        <![endif]-->
        <!-- Fonts -->
        <link href='http://fonts.googleapis.com/css?family=Droid+Sans:regular,bold|PT+Sans+Narrow:regular,bold|Droid+Serif:i&amp;v1' rel='stylesheet' type='text/css' />

            <script type='text/javascript' src='../../../ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min97e1.js?ver=1.7'></script>
        <!-- WYSISYG Editor -->
        <script type='text/javascript' src='../_layout/scripts/nicEdit/nicEdit.js'></script>

        <!-- Forms Elemets --> 
        <script type='text/javascript' src='../_layout/scripts/jquery.uniform/jquery.uniform.min.js'></script>
        <link rel='stylesheet' href='../_layout/scripts/jquery.uniform/uniform.default.css' type='text/css' media='screen' />

        <!-- Scripts -->
        <script type='text/javascript' src='../_layout/custom.js'></script>

    </head>  
<body>

        <div id="layout">
            <div id="header-wrapper">
                <div id="header">
                    <div id="user-wrapper" class="fixed">
                        <div class="color-scheme">
                            </div>
                            <div class='user'>
                        <?php
                        if($_SESSION['user'] != 'NULL')
                        {
                        ?>
                        <img src="../_content/user-img.png" alt="" />
                        <span>Welcome <a href="#">Admin <?PHP echo $_SESSION['user']; ?></a></span>
                        <span class="logout"><a href="#">Logout</a></span>
                        <?php
                        }
            ?>

                    </div>
                     </div>
                    <div id="launcher-wrapper" class="fixed"><img src="../_layout/images/NGBU Logo.png" width="68" height="81" alt="logo" style="margin-left:35px;" /> <img src="../_content/NGBU_logo.png" width="777" height="57" alt="logo" longdesc="http://index.php" style="margin-top: 25px; float: left; margin-left: 25px;"/></div>

            </div>
            </div> 
```

我在 Index.php 的开头调用了这个文件，但由于某些原因，它没有从托管服务器呈现，尽管当我在 localhost 下测试它时它正在呈现？

我在文件夹 admin 中的 index.php 如下所示：

```
<?PHP
session_start();
ob_start();
$_SESSION['user'] = "NULL";
$_SESSION['password'] = "";
$_SESSION['error'] = 0;
include_once("../includes/header.php");
if(!$_SESSION['error'])
$_SESSION['error'] = "Please Login to Continue";
?>
<?PHP
if(isset($_REQUEST['check']))
{
    if(!$_REQUEST['User'] == "")
    {
        if(!$_REQUEST['Password'] == "")
        {
            $_SESSION['user'] = $_REQUEST['User'];
            $_SESSION['password'] = $_REQUEST['Password'];
            unset($_SESSION['error']);
            header('Location: checklogin.php'); 
        }
        else
        {
        $_SESSION['error'] = "<FONT color='#FF0000'>Both fields are required</FONT>";
        }
    }
    else
    {
    $_SESSION['error'] = "<FONT color='#FF0000'>Both fields are required</FONT>";
    }
}
?>
<DIV class="page fixed">
<DIV id="sidebar" style="height:400px; width:250px; margin-left:5px;"> </DIV>
<DIV id="content">
                <?PHP
echo "<h1 style='margin-left:150px;' >".$_SESSION['error']."</h1>";

?>
                <FORM action="index.php" method="post" name="loginfrm"  class="form-elements-inputs" style="margin-left:150px;width:90px;">
                <INPUT class="normal" type="text" name="User" value="User Name" /><BR />
                <INPUT class="normal" type="password" name="Password" value="Password"  /><BR />
                <INPUT type="hidden" name="check" value="login" />
                <INPUT type="submit" value="Login" class="button-orange" style="width:100px; margin:auto;"  />  
                    </FORM>
                </DIV>
    </DIV>
    </div>
    </BODY>
</HTML> 
```

style.css 文件位于包含文件夹中的 header.php 旁边，那么为什么它没有被应用？

在通过Mozilla中的萤火虫检查时，它向我展示了这个输出：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 2.0//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
<title>***</title>
<link type="text/css" href="style.css" rel="stylesheet">
<html><head>
<title>404 Not Found</title>
</head><body>
<h1>Not Found</h1>
<p>The requested URL /style.css was not found on this server.</p>
<p>Additionally, a 404 Not Found
error was encountered while trying to use an ErrorDocument to handle the request.</p>
<hr>
<address>Apache Server at www.***.com Port 80</address>
</body></html>
</link>
<link media="screen" type="text/css" href="scripts/jquery.fullcalendar/fullcalendar.css" rel="stylesheet">
<link media="print" type="text/css" href="scripts/jquery.fullcalendar/fullcalendar.print.css" rel="stylesheet">
<link media="screen" type="text/css" href="scripts/jquery.uniform/uniform.default.css" rel="stylesheet">
<link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Droid+Sans:regular,bold|PT+Sans+Narrow:regular,bold|Droid+Serif:i&v1">
<script src="../../../ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min97e1.js?ver=1.7" type="text/javascript">
<script src="../_layout/scripts/nicEdit/nicEdit.js" type="text/javascript">
<script src="../_layout/scripts/jquery.uniform/jquery.uniform.min.js" type="text/javascript">
<script src="../_layout/custom.js" type="text/javascript">
</head>
<body>
</html> 
```

为什么路径正确时会出现 404 not found 错误？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:25:04.627

你包括`../include/header.php`和 style.css 也在那里，即`../include/style.css`. 因此，您必须使用相同的相对路径或 css 的绝对路径`/include/style.css`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:27:09.337

CSS 文件的链接应该与您正在查看的页面的 URL 相关。

例如，如果您在 中查看您的页面`example.com`，则必须使用 .引用 CSS 文件`example.com/includes/style.css`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:36:52.637

也许最好先用 header.php 绝对路径进行测试。您的脚本和样式表的路径也应该相对于 index.php 而不是标题。（抱歉英语不好）

# facebook - 更改没有元标记的链接缩略图

> ID：13603869
> 
> 赞同：1
> 
> 时间：2012-11-28T11:21:17.207
> 
> 标签：facebook, hyperlink, share

我想在我的 Android 应用上放置一个分享按钮。我有分享链接：[http://www.facebook.com/sharer/sharer.php](http://www.facebook.com/sharer/sharer.php?u=https://www.example.com) ?u=https://www.example.com ，但是当从手机分享时，小号不是我需要的我无法改变它。我不能使用 meta property="og:image" 之类的元标记，这不是我的页面。如何改变这个？谢谢你的建议。

# php - PayPal IPN 在返回时丢失会话？

> ID：13603875
> 
> 赞同：2
> 
> 时间：2012-11-28T11:21:43.337
> 
> 标签：php, session, paypal, paypal-ipn

我正在使用 Micha 的 PayPal IPN 脚本，并且在大多数情况下效果很好：[https ://github.com/Quixotix/PHP-PayPal-IPN](https://github.com/Quixotix/PHP-PayPal-IPN)

当我在网站上单击“立即付款”时，它会使用正确的信息重定向到贝宝，允许付款，但在返回时没有任何反应，即它不会按应有的方式升级用户。现在我已经在 IPN 之外测试了我的代码的脚本，它运行良好，所以在我看来 IPN 脚本正在丢失会话？

这是我的按钮代码：

```
<form name="_xclick" action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_xclick">
    <input type="hidden" name="business" value="EMAIL_TO">
    <input type="hidden" name="currency_code" value="GBP">
    <input type="hidden" name="item_name" value="Text Light">
    <input type="hidden" name="amount" value="0.01">
    <input type="hidden" name="return" value="http://domain.co.uk/editors">
    <input type="hidden" name="notify_url" value="http://domain.co.uk/account/upgrade">
    <input type="submit" value="Pay now" class="btn btn-preview" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
</form> 
```

所以通知 url（IPN 代码）是 /account/upgrade - 据我所知，这是它应该执行升级任务的地方？所以这是我的（精简）代码

```
if ($verified) {

    $errmsg = '';

    // some error checking

    if (!empty($errmsg)) {

        // manually investigate errors from the fraud checking

    } else {

        // upgrade user
        $package = serialize($_SESSION['package']);
        $this->db->update('users',array('id' => $_SESSION['user']['id']),array('payment_plan' => $package));

    }

} else {

    // not verified, investigate problems
} 
```

如上所述，“// 升级用户”下的代码在外面可以正常工作，但从贝宝返回时，它显然没有保持会话。它没有抛出任何错误，它只是没有做任何事情。

我哪里出错了？我如何确保会话信息将从 PayPal 传回。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:26:21.947

您的问题有一个简短的答案：IPN 不是作为用户完成的。

为了扩展答案，以下是 IPN 的工作原理。您付款，您的访问者返回您的网站，然后**PayPal** ping 您的 IPN URL。重要的一点是粗体 - 请求将来自 PayPal 而不是来自用户，因此不会继承用户的会话！

这样做的原因很简单——IPN URL 应该是私有的，因为如果不是，你可以做各种愚蠢的恶作剧（包括创建虚拟交易）。由于这个原因，用户永远不会看到这个地址。（另一个原因是并非所有浏览器都会遵循重定向 - IPN 旨在 100% 的时间提供信息）。

如果您想这样做，您需要向 IPN 请求传递一个参数来指示用户是谁。传递用户 ID 是一个*非常*糟糕的主意 - 作为可修改的参数。相反，生成某种包含用户信息的事务 ID，然后传递它。在 IPN 调用中，您将获取此变量作为自定义参数，这将允许您从数据库中获取内容并做任何您想做的事情，知道用户是谁。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-20T12:59:03.143

我在其他地方看到了一个对我有用的答案。对于 return_url，我只是删除了我的网址的“www”部分。因此，我将 retun_url 改为“ [https://www.mywebsite.com/ReturnPage.aspx ”，而不是“](https://www.mywebsite.com/ReturnPage.aspx) [https://mywebsite.com/ReturnPage.aspx](https://mywebsite.com/ReturnPage.aspx) ”。这似乎使会话保持不变。

# iis - 通过命令行在 XP 上安装 IIS

> ID：13603877
> 
> 赞同：2
> 
> 时间：2012-11-28T11:21:46.230
> 
> 标签：iis, command-line, windows-xp

我有适用于 Windows 7 的命令：

```
dism /online /Enable-Feature /FeatureName:IIS-WebServerRole /FeatureName:IIS-WebServer /FeatureName:IIS-CommonHttpFeatures /FeatureName:IIS-HttpErrors /FeatureName:IIS-HttpRedirect /FeatureName:IIS-ApplicationDevelopment /FeatureName:IIS-Security /FeatureName:IIS-URLAuthorization /FeatureName:IIS-RequestFiltering /FeatureName:IIS-NetFxExtensibility /FeatureName:IIS-HealthAndDiagnostics /FeatureName:IIS-HttpLogging /FeatureName:IIS-LoggingLibraries /FeatureName:IIS-RequestMonitor /FeatureName:IIS-HttpTracing /FeatureName:IIS-IPSecurity /FeatureName:IIS-Performance /FeatureName:IIS-HttpCompressionDynamic /FeatureName:IIS-WebServerManagementTools /FeatureName:IIS-ManagementScriptingTools /FeatureName:IIS-ISAPIExtensions /FeatureName:IIS-ISAPIFilter /FeatureName:IIS-StaticContent /FeatureName:IIS-DefaultDocument /FeatureName:IIS-ASPNET /FeatureName:IIS-ASP /FeatureName:IIS-ServerSideIncludes /FeatureName:IIS-CustomLogging /FeatureName:IIS-BasicAuthentication /FeatureName:IIS-HttpCompressionStatic /FeatureName:IIS-ManagementConsole /FeatureName:IIS-ManagementService /FeatureName:IIS-WindowsAuthentication /FeatureName:IIS-DigestAuthentication /FeatureName:IIS-ClientCertificateMappingAuthentication /FeatureName:IIS-IISCertificateMappingAuthentication 
```

但是 dism 命令不适用于 XP。我搜索了互联网并发现

```
sysocmgr 
```

它像命令 dism 吗？

有没有人有像 dism 命令这样的 XP 命令？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T10:19:31.647

另请参阅[创建应答文件 (IIS 6.0)](https://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/efefcb53-b86e-4cac-9b4b-fcf5f1145aa9.mspx?mfr=true)；

创建一个名为`IIS_Unattended.txt`并指定您需要的组件的文件，例如：

```
[Components]
iis_www = ON
iis_common = ON
iis_inetmer = ON
aspnet = ON
complusnetwork = ON 
```

执行以下命令开始安装：

```
Sysocmgr.exe /i:sysoc.inf /u:IIS_Unattended.txt 
```

# c++ - 如何删除重复字段中的任意对象？(protobuf)

> ID：13603878
> 
> 赞同：23
> 
> 时间：2012-11-28T11:21:46.033
> 
> 标签：c++, protocol-buffers

我在原型的重复字段中有一些条目。现在我想删除其中的一些。我怎样才能做到这一点？有删除最后一个元素的功能，但我想删除任意元素。我不能只是交换它们，因为顺序很重要。

我可以与 next 交换直到结束，但没有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-03-07T06:07:57.670

**对于 Protobuf v3**

[`iterator RepeatedField::erase(const_iterator position)`](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.repeated_field#RepeatedField.erase.details)可以在任意位置删除。

**对于 Protobuf v2**

你可以[`DeleteSubrange(int start, int num)`](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.repeated_field#RepeatedPtrField.DeleteSubrange.details)在`RepeatedPtrField`课堂上使用。

如果要删除单个元素，则必须将此方法称为`DeleteSubrange(index_to_be_del, 1)`. 它将删除该索引处的元素。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-06T14:39:42.443

根据[API docs](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.repeated_field#RepeatedField.RemoveLast.details)，没有办法从重复字段中任意删除元素，只是删除最后一个元素的方法。

> ...
> 我们不提供删除除最后一个元素之外的任何元素的方法，因为它会导致使用效率低下，例如 O(n^2) 过滤循环应该是 O(n)。如果要删除除最后一个以外的元素，最好的方法是重新排列元素，使要删除的元素位于末尾，然后调用 RemoveLast()
> ...

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-11T22:01:18.000

在这些情况下，我通常会创建一个新的 Protobuf (PB) 消息。我迭代现有消息的重复字段并将它们（您不再需要的除外）添加到新的 PB 消息中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-16T10:31:19.947

这是示例：

```
message GuiChild
{
    optional string widgetName = 1;
    //..
}

message GuiLayout
{
    repeated ChildGuiElement children = 1;
    //..
}

typedef google_public::protobuf::RepeatedPtrField<GuiChild> RepeatedField;
typedef google_public::protobuf::Message Msg;

GuiLayout guiLayout; 
//Init children as necessary..

GuiChild child;
//Set child fileds..

DeleteElementsFromRepeatedField(*child, guiLayout->mutable_children());

void DeleteElementsFromRepeatedField(const Msg& msg, RepeatedField* repeatedField)
{
    for (RepeatedField::iterator it = repeatedField->begin(); it != repeatedField->end(); it++)
    {
        if (google_public::protobuf::util::MessageDifferencer::Equals(*it, msg))
        {
            repeatedField->erase(it);
            break;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-16T01:20:58.853

尽管没有直接的方法，但您仍然可以这样做（对于使用反射的自定义消息）。`count`下面的代码从`row`索引开始删除重复的字段项。

```
void RemoveFromRepeatedField(
    const google::protobuf::Reflection *reflection,
    const google::protobuf::FieldDescriptor *field,
    google::protobuf::Message *message,
    int row,
    int count)
{
    int size = reflection->FieldSize(*message, field);
    // shift all remaining elements
    for (int i = row; i < size - count; ++i)
        reflection->SwapElements(message, field, i, i + count);
    // delete elements from reflection
    for (int i = 0; i < count; ++i)
        reflection->RemoveLast(message, field);
} 
```

# python - 文本分类的特征选择和减少

> ID：13603882
> 
> 赞同：53
> 
> 时间：2012-11-28T11:21:59.530
> 
> 标签：python, nlp, svm, sentiment-analysis, feature-extraction

我目前正在做一个项目，一个**简单的情绪分析器**，这样在**不同的情况下**会有**2 个和 3 个类**。我正在使用一个包含非常**丰富**的**独特单词**（大约 200.000）的**语料库。**我使用**词袋**方法进行**特征选择**并减少**独特特征的数量，由于****出现频率的****阈值**而进行了消除。**最终的特征集**包括大约 20.000 个特征，实际上**减少了 90%**，但**还不够**************************用于测试预测的预期**准确性**。我依次使用**LibSVM**和**SVM-light**进行训练和预测（包括**线性**和**RBF 内核**）以及一般的**Python**和**Bash**。************************

 ****到目前为止观察到的**最高准确度****约为 75%**，我**至少需要 90%**。这是**二进制分类**的情况。对于**多类训练**，准确率下降到**~60%**。在这两种情况下我都**需要至少 90%**并且不知道如何增加它：通过**优化训练参数**或**通过优化特征选择**？

我读过关于文本分类中**特征选择**的文章，我发现使用了三种不同的方法，它们之间实际上有明显的相关性。这些方法如下：

*   **词袋的**频率方法（BOW）
*   **信息增益**(IG)
*   **X^2 统计**量 (CHI)

第一种方法我已经在用了，但是我用的很简单，需要指导才能更好地使用它，以获得足够高的精度。我也缺乏关于**IG**和**CHI**实际实施的知识，并寻求任何帮助来指导我。

非常感谢，如果您需要任何其他信息以寻求帮助，请告诉我。

* * *

*   @larsmans：**频率阈值**：我正在寻找示例中唯一单词的出现，这样如果一个单词在不同示例中出现的频率足够高，它就会作为唯一特征包含在特征集中。

*   @TheManWithNoName：首先感谢您为解释文档分类的一般问题所做的努力。我检查并试验了你提出的所有方法和其他方法。我发现**比例差**(PD) 方法最适合特征选择，其中特征是 uni-grams 和**用于加权的****术语存在**(TP ) IDF）作为一种索引方法，我宁愿将其视为一种**特征加权**方法）。 **正如您所提到的，预处理**也是此任务的一个重要方面。我使用某些类型的字符串消除来优化数据以及**形态解析**和**********词干**。另请注意，我正在研究**土耳其语**，与英语相比，它具有**不同的特征。****最后，对于二元**分类，我设法达到了**~88% 的准确度**（f-measure），对于**多类，我达到了****~84%**。这些值是我使用的模型成功的有力证明。这是我到目前为止所做的。现在致力于聚类和缩减模型，已经尝试过**LDA**和**LSI**，并转向**moVMF**和**球形模型****************(LDA + moVMF)，这似乎更适用于具有客观性质的语料库，如新闻语料库。如果您对这些问题有任何信息和指导，我将不胜感激。**我特别需要信息来设置特征空间降维**方法（LDA、LSI、moVMF 等）和**聚类方法**（k-means、分层等）之间的接口（面向 python、开源）。**********************

 ***** * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-17T14:02:27.393

这可能有点晚了，但是......

正如 Bee 指出的那样，您已经意识到，如果您在分类之前的阶段已经丢失了信息，那么使用 SVM 作为分类器是浪费的。然而，文本分类的过程需要的不仅仅是几个阶段，而且每个阶段都会对结果产生重大影响。因此，在研究更复杂的特征选择措施之前，有许多更简单的可能性，这些可能性通常需要更低的资源消耗。

在将标记化/表示为词袋格式之前，您是否对文档进行了预处理？简单地删除停用词或标点符号可能会大大提高准确性。

您是否考虑过改变您的词袋表示以使用例如词对或 n-gram 来代替？您可能会发现您有更多的维度开始，但它们进一步压缩并包含更多有用的信息。

还值得注意的是，降维**是**特征选择/特征提取。不同之处在于特征选择以单变量方式减少维度，即它在不改变当前出现的情况下逐个删除术语，而特征提取（我认为 Ben Allison 指的是）是多变量的，结合一个或多个单个术语一起产生更高的正交术语，（希望）包含更多信息并减少特征空间。

关于您对文档频率的使用，您是仅使用包含术语的文档的概率/百分比，还是使用在文档中找到的术语密度？如果类别一只有 10 个文档，并且每个文档包含一个术语，那么类别一确实与文档相关联。但是，如果类别二只有 10 个文档，每个文档都包含相同的词一百次，那么显然类别二与该词的关系比类别一高得多。如果不考虑术语密度，则此信息将丢失，并且您拥有的类别越少，此损失的影响就越大。同样，只保留高频词并不总是谨慎的，因为它们实际上可能没有提供任何有用的信息。

另外，您如何索引数据，您是使用具有简单布尔索引的向量空间模型还是使用更复杂的度量（例如 TF-IDF）？考虑到场景中的类别数量较少，更复杂的度量将是有益的，因为它们可以说明每个类别相对于整个数据集的重要性的术语重要性。

就个人而言，我会先尝试上述一些可能性，然后如果您需要额外的性能提升，则考虑使用（或组合）复杂方程来调整特征选择/提取。

* * *

**额外的**

根据新信息，听起来您似乎走在了正确的轨道上，并且 84% 以上的准确率（F1 或 BEP - 基于多类问题的准确率和召回率）对于大多数数据集通常被认为非常好。可能是您已经成功地从数据中获取了所有信息丰富的特征，或者一些仍在修剪中。

话虽如此，可以用作预测特定数据集的积极降维效果的指标是“离群值计数”分析，它使用离群特征中信息增益的下降来确定该信息的可能性有多大。在特征选择过程中丢失。您可以在原始和/或处理后的数据上使用它来估计您应该多积极地修剪特征（或视情况取消修剪）。可以在此处找到描述它的论文：

[具有异常计数信息的纸张](http://www.cs.technion.ac.il/~gabr/papers/fs-svm.pdf "具有许多冗余特征的文本分类：使用积极的特征选择使 SVM 与 C4.5 竞争")

关于将 TF-IDF 描述为一种索引方法，您认为它是一种特征加权度量是正确的，但我认为它主要用作索引过程的一部分（尽管它也可以用于降维）。这样做的原因是，一些措施更适合特征选择/提取，而另一些措施更适合专门在文档向量（即索引数据）中进行特征加权。这通常是由于降维措施是在每个类别的基础上确定的，而索引加权措施往往更面向文档以提供更好的向量表示。

关于LDA、LSI和moVMF，恐怕我对它们的经验太少，无法提供任何指导。不幸的是，我也没有使用过土耳其语数据集或 python 语言。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T11:30:07.343

我会推荐降维而不是特征选择。考虑[奇异值分解](http://en.wikipedia.org/wiki/Singular_value_decomposition)，[主成分分析](http://en.wikipedia.org/wiki/Principal_component_analysis)，甚至更好地考虑它是​​为词袋表示量身定制的，[潜在狄利克雷分配](http://en.wikipedia.org/wiki/Latent_Dirichlet_allocation)。这将允许您在概念上保留包含所有单词的表示，但通过利用它们之间的相似性（甚至同义词类型）关系将它们折叠到更少的维度。

所有这些方法都有相当标准的实现，您可以访问并运行它们——如果您让我们知道您使用的是哪种语言，我或其他人将能够为您指明正确的方向。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-27T12:47:01.347

有一个`python`用于特征选择的库 `TextFeatureSelection`。该库以分数的形式为每个单词令牌、二元组、三元组等提供区分能力。

那些了解机器学习中的特征选择方法的人，它基于*过滤器方法*，并为 ML 工程师提供了提高其 NLP 和深度学习模型中的分类精度所需的工具。它有 4 种方法，即**卡方**、**互信息**、**比例差** 和**信息增益**，以帮助在输入机器学习分类器之前选择单词作为特征。

```
from TextFeatureSelection import TextFeatureSelection

#Multiclass classification problem
input_doc_list=['i am very happy','i just had an awesome weekend','this is a very difficult terrain to trek. i wish i stayed back at home.','i just had lunch','Do you want chips?']
target=['Positive','Positive','Negative','Neutral','Neutral']
fsOBJ=TextFeatureSelection(target=target,input_doc_list=input_doc_list)
result_df=fsOBJ.getScore()
print(result_df)

#Binary classification
input_doc_list=['i am content with this location','i am having the time of my life','you cannot learn machine learning without linear algebra','i want to go to mars']
target=[1,1,0,1]
fsOBJ=TextFeatureSelection(target=target,input_doc_list=input_doc_list)
result_df=fsOBJ.getScore()
print(result_df) 
```

**编辑：**

它现在也具有用于特征选择的遗传算法。

```
from TextFeatureSelection import TextFeatureSelectionGA
#Input documents: doc_list
#Input labels: label_list
getGAobj=TextFeatureSelectionGA(percentage_of_token=60)
best_vocabulary=getGAobj.getGeneticFeatures(doc_list=doc_list,label_list=label_list) 
```

**编辑2**

现在有另一种方法`TextFeatureSelectionEnsemble`，它在集成时结合特征选择。它通过文档频率阈值对基本模型进行特征选择。在集成层，它使用遗传算法来识别基本模型的最佳组合并仅保留这些组合。

```
from TextFeatureSelection import TextFeatureSelectionEnsemble 

imdb_data=pd.read_csv('../input/IMDB Dataset.csv')
le = LabelEncoder()
imdb_data['labels'] = le.fit_transform(imdb_data['sentiment'].values)

#convert raw text and labels to python list
doc_list=imdb_data['review'].tolist()
label_list=imdb_data['labels'].tolist()

#Initialize parameter for TextFeatureSelectionEnsemble and start training
gaObj=TextFeatureSelectionEnsemble(doc_list,label_list,n_crossvalidation=2,pickle_path='/home/user/folder/',average='micro',base_model_list=['LogisticRegression','RandomForestClassifier','ExtraTreesClassifier','KNeighborsClassifier'])
best_columns=gaObj.doTFSE()` 
```

检查项目以获取详细信息：[https ://pypi.org/project/TextFeatureSelection/](https://pypi.org/project/TextFeatureSelection/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T22:37:45.333

线性 svm 推荐用于高维特征。根据我的经验，SVM 准确性的最终限制取决于正面和负面的“特征”。您可以进行网格搜索（或者在线性 svm 的情况下，您可以只搜索最佳成本值）以找到最大精度的最佳参数，但最终您会受到特征集可分离性的限制。你没有得到 90% 的事实意味着你仍然需要做一些工作来寻找更好的特性来描述你的类成员。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-10T21:02:09.557

我敢肯定这对于海报来说已经太晚了，但也许它对其他人有用。减少特征的卡方方法很容易实现。假设 BoW 二进制分类为 C1 和 C2 类，对于候选特征中的每个特征 f 计算 C1 中 f 的频率；计算总字数 C1；对 C2 重复计算；根据 p 值是否低于某个阈值（例如 p < 0.05）计算卡方确定过滤器候选特征。可以在这里看到使用 Python 和 nltk 的教程：[http](http://streamhacker.com/2010/06/16/text-classification-sentiment-analysis-eliminate-low-information-features/) ://streamhacker.com/2010/06/16/text-classification-sentiment-analysis-eliminate-low-information-features/ （如果我没记错的话，我相信作者错误地将这种技术应用于他的测试数据，从而使报告的结果产生偏差）。********

# mysql - Asp.NET MVC 如何在数据表中快速显示大量数据

> ID：13603883
> 
> 赞同：1
> 
> 时间：2012-11-28T11:22:10.043
> 
> 标签：mysql, datatable, asp.net-mvc-4

## 背景

我有一个用 VB 和 Razor 编写的 ASP.net MVC 4 Web 应用程序，并使用 MySQL 作为其数据源。

我需要一个视图来显示包含不断增加的数据量的表。（可能多达 10 行，甚至更多行。）

为了让我继续进一步开发，我临时实现了一个基本数据表，其中所有行都写入页面，然后由数据表处理。这适用于多达几百行，但行数越多，速度越慢，页面加载时间直线下降！

## 问题

如何实现数据表，以便仅在需要时检索和显示数据，以保持一致的页面加载时间，同时保持搜索和排序功能？

## 补充笔记

我的猜测是数据表必须调用服务器端的某些东西才能仅传递所需的数据，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:57:33.407

**寻呼**

每页只显示一定数量的行。您可以使用 .Take(100) 仅检索前 100 行。使用 .Skip(100).Take(100) 获得第二个 100 行等。

过滤、排序和搜索应该在服务器端完成。请记住，您应该首先排序/过滤/搜索，然后使用 .Take(100)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T16:38:33.173

我找到的解决方案是为数据表使用 Ajax 源。我向控制器添加了一个 get 方法并返回所需的数据表 JSON 数组以填充数据表。

这是我找到的提供解决方案的网站：http: [//www.codeproject.com/Articles/177335/Refreshing-content-of-the-table-using-AJAX-in-ASP](http://www.codeproject.com/Articles/177335/Refreshing-content-of-the-table-using-AJAX-in-ASP)

# android - 从 listView 中删除标题

> ID：13603888
> 
> 赞同：24
> 
> 时间：2012-11-28T11:22:33.060
> 
> 标签：android, listview, header

尝试从`listView`. 起初我`addHeaderView()`用来添加它，但是当我更改为另一个布局时，我希望它消失但`removeHeaderView()`不起作用......

我还尝试将可见性设置为 GONE 并且它不会消失......

我能做些什么？

提前致谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-28T11:37:47.697

试试下面提到的方法..

Android`ListView#addHeaderView`和`ListView#addFooterView`方法很奇怪：您必须在设置 ListView 的适配器之前添加页眉和页脚视图，以便 ListView 可以考虑页眉和页脚——否则会出现异常。这里我们添加一个 ProgressBar（微调器）作为 headerView：

// spinner 是一个 ProgressBar

```
listView.addHeaderView(spinner); 
```

我们希望能够随意显示和隐藏该微调器，但完全删除它是危险的，因为我们永远无法在不破坏 ListView 的情况下再次添加它——请记住，我们无法在添加 HeaderView 之后它是适配器：

```
listView.removeHeaderView(spinner); //dangerous! 
```

所以让我们隐藏它！事实证明这也很难。只是隐藏微调器视图本身会导致一个空的但仍然可见的标题区域。

![](../Images/17daa393c592a5dc34c4a6df40823ae4.png)

现在尝试隐藏微调器：

```
spinner.setVisibility(View.GONE); 
```

结果：标题区域仍然可见，带有丑陋的空间：

![](../Images/226a0473b0cc65569535c236a3a6a3a3.png)

解决方案是将进度条放在包装其内容的 LinearLayout 中，并隐藏内容。这样，当它的内容被隐藏时，包装的 LinearLayout 将折叠，导致 headerView 在技术上仍然存在，但 0dip 高：

```
<LinearLayout 
      xmlns:a="http://schemas.android.com/apk/res/android"
      android:orientation="vertical"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content">
    <!-- simplified -->
      <ProgressBar
        android:id="@+id/spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/> 
  </LinearLayout> 
```

然后，将布局设置为标题：

```
spinnerLayout = getLayoutInflater().inflate(R.layout.header_view_spinner, null);
listView.addHeaderView(spinnerLayout); 
```

当我们需要隐藏它时，隐藏布局的内容，而不是布局：

```
spinnerLayout.findViewById(R.id.spinner).setVisibility(View.GONE); 
```

现在标题从视图中消失了。顶部不再有丑陋的空间！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-03-14T01:56:21.497

大多数人不喜欢使用`AddHeaderView`，但是我有时发现它非常方便，可以避免修改复杂的适配器，或者如果标题与它们不太相关。

通过这个简单的技巧，您将能够**无缝地删除/添加标题**：

我添加一个空 `LinearLayout`的`orientation vertical`, 和 height `wrap_content`，作为唯一的 Header View （让我们`mListView`成为目标`listView`）：

```
 LinearLayout mCustomHeaders=new LinearLayout(context);
 mCustomHeaders.setOrientation(LinearLayout.VERTICAL);

 mListView.addHeaderView(mCustomHeaders);
 mListView.setAdapter (.......) 
```

然后，即使列表已满，我也可以在任何地方将随机内容添加到列表中作为标题：

```
 mCustomHeaders.add(myHeaderView1);
 mCustomHeaders.add(myHeaderView2);
 mCustomHeaders.add(myHeaderView3); 
```

您还可以随时删除所有标题：

```
 mCustomHeaders.removeAllViews(); // will erase all headers 
```

你明白了....希望它有所帮助！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-06T17:39:02.570

问题是当你这样做时，你总是在创建一个新对象：

```
 View headerView = someView 
```

所以新视图与已经添加为 listView 标题的视图不同，试试这个：

```
View headerView = inflater.inflate(R.layout.adapter_datatable_saleitem_header, null, false);
        headerView.setTag(this.getClass().getSimpleName() + "header");
        if (listView.getHeaderViewsCount() > 0) {
            View oldView = listView.findViewWithTag(this.getClass().getSimpleName() + "header");
            if (oldView != null) {
                listView.removeHeaderView(oldView);
            }
        } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-02T07:13:38.550

您可以检查标头计数是否> 0，然后删除标头并再次添加。
它对我来说很好。

```
 View _headerView;
 private void function HandleHeaderView(){
        if(listView.getHeaderViewsCount() > 0)
        {
            listView.removeHeaderView(_headerView);
        }

        /* Add list view header */
        _headerView = GetHeaderView();
        listView.addHeaderView(_headerView);
 }

 private View GetHeaderView()
 {
      View header = getLayoutInflater().inflate(R.layout.header_layout, null);
      // TODO: ...

      return header
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-10T09:16:31.933

我的标题视图在哪里`drawerLogoView`，这就是我所做的：

```
 drawerLogoView = mInflater.inflate(R.layout.navigation_drawer_custom_layout, null);
    mDrawerList.addHeaderView(drawerLogoView,null,false);                
    LinearLayout layOut = ((LinearLayout)drawerLogoView.findViewById(R.id.NavProfilePreviewLayout));
    layOut.setLayoutParams(new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, 0)); 
```

这样，它就变得不可见了 :D 要显示它，你可以使用这个：

```
 LinearLayout layOut = ((LinearLayout)drawerLogoView.findViewById(R.id.NavProfilePreviewLayout));
    layOut.setLayoutParams(newRelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T11:29:14.277

如果您使用的是 addHeaderView()，那么之后您将无法删除您的标题。

所以，不要使用 addHeaderView()。相反，创建您自己的适配器，将您的主要视图名册与您的标题混合在一起。虽然我的 MergeAdapter 不会处理您的特定情况，但您可以使用它来查看混合多个行源的概念：

[https://github.com/commonsguy/cwac-merge](https://github.com/commonsguy/cwac-merge)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-17T17:53:55.363

我在一个稍微伪装的场景中遇到了这个问题：我正在处理的ListView来自PreferenceFragment，并且header代表了一个PreferenceCategory。因此，我设置 ListView 的自由受到了严重限制。但是有两种方法（部分受到此页面上其他答案的启发）。一种是向我的 PreferenceCategory 添加自定义布局（使用该类`extends android.preference.PreferenceCategory`，请参阅*[Custom PreferenceCategory Headings](https://stackoverflow.com/questions/6297635/custom-preferencecategory-headings)*）。但我找到了一个更简单的解决方法：对于此 PreferenceCategory 中的第一个 Preference，我覆盖`onCreateView()`：

```
@Override public View onCreateView(ViewGroup parent) {
    parent.setTop(-parent.getChildAt(0).getTop());
    return super.onCreateView(parent);
} 
```

# ruby-on-rails - 为什么使用分析网址而不是 youtube 网址时 Google OAuth2 身份验证会失败？

> ID：13603889
> 
> 赞同：4
> 
> 时间：2012-11-28T11:22:33.693
> 
> 标签：ruby-on-rails, oauth, google-analytics, oauth-2.0, google-analytics-api

我正在为我的同事制作一个仪表板，其中显示了来自 Google Analytics 的一些统计数据以及其他一些统计数据。为了访问 Analytics 数据，我使用 OAuth2。OAuth2 需要一个范围与身份验证请求一起发送，以便获取访问令牌。我在 API 控制台中创建了一个可以访问 Analytics 的客户端 ID，并在初始化程序中指定范围，如下所示：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :google_oauth2, ENV['ADMIN_DASHBOARD_GOOGLE_CLIENT_ID'], ENV['ADMIN_DASHBOARD_GOOGLE_CLIENT_SECRET'], { access_type: 'online', approval_prompt: '', scope: 'http://gdata.youtube.com,userinfo.email,userinfo.profile,analytics.readonly' }
end 
```

这使用了`omniauth-google-oauth2`gem，以及我在某处的示例中找到的范围。但是，对于我的实现，我认为这个范围很奇怪。而不是`http://gdata.youtube.com,userinfo.email,userinfo.profile,analytics.readonly`我想使用`https://www.googleapis.com/auth/analytics.readonly`，但更改为该范围会导致请求返回`invalid_credentials`。指定只需要访问分析数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:07:39.490

范围应由空格字符分隔，而不是逗号：

[https://developers.google.com/accounts/docs/OAuth2WebServer#formingtheurl](https://developers.google.com/accounts/docs/OAuth2WebServer#formingtheurl)

如果您需要 Youtube 和 Analytics 范围，请使用：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :google_oauth2, ENV['ADMIN_DASHBOARD_GOOGLE_CLIENT_ID'], ENV['ADMIN_DASHBOARD_GOOGLE_CLIENT_SECRET'], { access_type: 'online', approval_prompt: '', scope: 'http://gdata.youtube.com,userinfo.email https://www.googleapis.com/auth/analytics.readonly' }
end 
```

如果您只需要分析，请使用：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :google_oauth2, ENV['ADMIN_DASHBOARD_GOOGLE_CLIENT_ID'], ENV['ADMIN_DASHBOARD_GOOGLE_CLIENT_SECRET'], { access_type: 'online', approval_prompt: '', scope: 'https://www.googleapis.com/auth/analytics.readonly' }
end 
```

# jquery - 使用 jq.carousel 跳转到特定页面

> ID：13603890
> 
> 赞同：1
> 
> 时间：2012-11-28T11:22:37.953
> 
> 标签：jquery, carousel

我正在为滑块使用 jq.carousel 插件，并且需要能够抽到特定页面。这是插件：[https ://github.com/5509/jq.carousel](https://github.com/5509/jq.carousel)

在[使用文档](http://5509.github.com/jq.carousel/#usage)中，有用于导航滑块页面的下一个和上一个功能，但我看不到调用特定页面的功能。

有任何想法吗？我可能需要修改插件，但想在处理它之前检查我是否错过了一些内置功能！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:29:13.520

我的想法是使用 start 属性：

```
var $carousel = $('#carousel_2').carousel({
   start: <ThePageThatYouWant>, 
   indicator: true 
}); 
```

试试这个小提琴：

[http://jsfiddle.net/NEkpA/](http://jsfiddle.net/NEkpA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:48:04.153

你可以使用这个：

```
$("#carouselName").carousel().onMoveIndex(_index); 
```

# java - 在 Jetty HttpClient 中访问对等证书

> ID：13603891
> 
> 赞同：2
> 
> 时间：2012-11-28T11:22:38.560
> 
> 标签：java, ssl, jetty, jetty-httpclient

我正在使用 Jetty HttpClient 发出 HTTPS 请求。在建立 SSL 连接之后，在发送数据之前，我想验证我正在与预期的服务器交谈。基本上，如果我想向 www.foo.com 发送请求，那么我想验证服务器是否具有该域名的证书。

实现这一点的一种方法是创建我自己的`TrustManager`并将其用于创建`SslContextFactory`提供给`HttpClient`. 信任管理器中可用的回调是：

```
checkServerTrusted(X509Certificate[] chain, String authType)
checkServerTrusted(X509Certificate[] chain, String authType,
    Socket socket)
checkServerTrusted(X509Certificate[] chain, String authType,
    SSLEngine engine) 
```

在所有情况下，我都可以访问证书，但不能访问原始请求（我需要原始域名）。

想到的第二个选项是从`HttpExchange`我用来发出请求的后代访问对等证书。例如，调用后`HttpClient.send(exchange)`，我可以访问对等证书并执行验证。但是，似乎无法从交换中访问 SSL 信息（对等证书`SSLEngine`或对象）。`SSLSocket`

最重要的是，HttpClient 本身似乎没有对证书内容进行任何验证。这意味着我没有地方可以插入我的验证逻辑，并且 HttpClient 容易受到 DNS 欺骗攻击（有关该主题的讨论，请参见[http://www.cs.utexas.edu/~shmat/shmat_ccs12.pdf](http://www.cs.utexas.edu/~shmat/shmat_ccs12.pdf)）。

谁能提示我可以在哪里插入服务器名称验证？

# c# - 从目录中递归删除文件但保持目录结构完整

> ID：13603893
> 
> 赞同：8
> 
> 时间：2012-11-28T11:22:45.613
> 
> 标签：c#, .net, linq, file, linq-to-objects

为了清理测试文件，我正在尝试执行以下操作。但它没有清除文件，也没有产生错误。

我错过了一些明显的东西吗？

```
 private void CleanUpTempDirFiles()
    {
        var fileGenerationDir = new DirectoryInfo(Path.Combine(Path.GetTempPath(), "TestFilesDir"));

        fileGenerationDir.GetDirectories().ToList().ForEach(dir => dir.GetFiles().ToList().ForEach(file => file.Delete()));
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T11:38:01.280

[您可以使用SearchOption.AllDirectories](http://msdn.microsoft.com/en-us/library/ms143327.aspx)获取所有子目录中的所有文件

```
 fileGenerationDir.GetFiles("*", SearchOption.AllDirectories).ToList().ForEach(file=>file.Delete()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:38:30.047

这将做到：

```
 string[] filePaths = Directory.GetFiles(
            Path.Combine(Path.GetTempPath(), "TestFilesDir")
            , 
            "*", 
            SearchOption.AllDirectories);

        foreach (var filePath in filePaths)
            File.Delete(filePath); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:38:59.223

您`GetDirectories`首先使用的是返回临时文件夹中的所有子目录。因此它不会返回此目录中的文件。所以你可能想这样做：

```
var tempDir = Path.Combine(Path.GetTempPath(), "TestFilesDir");
var allFilesToDelete = Directory.EnumerateFiles(tempDir, "*.*", SearchOption.AllDirectories);
foreach (var file in allFilesToDelete)
    File.Delete(file); 
```

删除了递归搜索的`ToLists`和使用的。`SearchOption.AllDirectories`

[**如何：遍历目录树（C# 编程指南）**](http://msdn.microsoft.com/en-us/library/bb513869.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T11:29:24.243

如果文件存储在 TestFilesDir 文件夹中，则不必获取它的子目录，只需使用：

```
fileGenerationDir.GetFiles().ToList().ForEach(file => file.Delete()); 
```

否则你只删除子文件夹的文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T11:37:38.243

```
private void CleanUpTempDirFiles() {
        var fileGenerationDir = new DirectoryInfo(
            Path.Combine(Path.GetTempPath(), "TestFilesDir"));

        fileGenerationDir.GetFiles().ToList().ForEach(file => file.Delete());            
    } 
```

# android - 使用 C# 为 Android 推送通知？

> ID：13603894
> 
> 赞同：1
> 
> 时间：2012-11-28T11:22:46.650
> 
> 标签：android, c#-4.0

我正在为 Android Mobile 创建推送通知，我的代码是这样的，但抛出异常？帮帮我，这对我来说很重要？提前谢谢。

```
public string SendNotificationAndoride(string deviceId, string message)
        {
            string GoogleAppID = "google application id";        
            var SENDER_ID = "9999999999";
            var value = message;
            WebRequest tRequest;
            tRequest = WebRequest.Create("https://android.googleapis.com/gcm/send");
            tRequest.Method = "post";
            tRequest.ContentType = " application/x-www-form-urlencoded;charset=UTF-8";
            tRequest.Headers.Add(string.Format("Authorization: key={0}", GoogleAppID));

            tRequest.Headers.Add(string.Format("Sender: id={0}", SENDER_ID));

            string postData = "collapse_key=score_update&time_to_live=108&delay_while_idle=1&data.message=" + value + "&data.time=" + System.DateTime.Now.ToString() + "®istration_id=" + deviceId + "";
            Console.WriteLine(postData);
            Byte[] byteArray = Encoding.UTF8.GetBytes(postData);
            tRequest.ContentLength = byteArray.Length;

            Stream dataStream = tRequest.GetRequestStream();
            dataStream.Write(byteArray, 0, byteArray.Length);
            dataStream.Close();

            WebResponse tResponse = tRequest.GetResponse();

            dataStream = tResponse.GetResponseStream();

            StreamReader tReader = new StreamReader(dataStream);

            String sResponseFromServer = tReader.ReadToEnd();

            tReader.Close();
            dataStream.Close();
            tResponse.Close();
            return sResponseFromServer;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:29:40.110

在这里，您有我在 python 中的服务器端代码（它有效）

```
def sendAndroidPushNotification(registration_id, collapse_key, data) :
    try:
        auth = "AIzsS3DPP3GYG38uw12qYQpJwGZ9AtliAsrJnhY"
        push_request = urllib2.Request("https://android.googleapis.com/gcm/send")

        jsondata = None
        if collapse_key :
            jsondata = simplejson.dumps({'registration_ids': [registration_id,],
                                         'collapse_key'    : collapse_key,
                                         'data'            : data,
                                         })
        else :
            jsondata = simplejson.dumps({'registration_ids': [registration_id,],
                                         'data'            : data,
                                         })

        push_request.add_data(jsondata)

        push_request.add_header('Authorization', 'key=' + auth)
        push_request.add_header('Content-Type', 'application/json')
        push_request.add_header('Content-Length', len(jsondata))

        result = urllib2.build_opener().open(push_request)
        parsed = simplejson.load(result)
#        print('Success {0}, Failures {1}, Canonical IDs: {2}'.format(parsed['success'],
#                                                                     parsed['failure'],
#                                                                     parsed['canonical_ids']))
#        print 'result: ' + str(parsed['results'][0]) 
```

# delphi - Delphi 的 Dynamodb 组件

> ID：13603895
> 
> 赞同：2
> 
> 时间：2012-11-28T11:22:57.373
> 
> 标签：delphi, amazon-dynamodb

我正在寻找一个[Dynamodb](http://aws.amazon.com/pt/dynamodb/) Delphi 组件。有人认识吗？

在 Delphi XE2 中，我们支持 SimpleDB，SimpleDB 和 DynamoDB 协议有太大区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:42:03.630

OP 在以下链接中找到了他的答案

[http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/operationlist.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/operationlist.html) [http://docs.amazonwebservices.com/AmazonSimpleDB/latest/DeveloperGuide/Welcome.html](http://docs.amazonwebservices.com/AmazonSimpleDB/latest/DeveloperGuide/Welcome.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-27T16:35:23.187

现在有一个 ODBC 驱动程序和一组来自 CDATA 的 DynamoDB 的 FireDAC 组件

[https://www.cdata.com/kb/tech/dynamodb-odbc-delphi.rst](https://www.cdata.com/kb/tech/dynamodb-odbc-delphi.rst)

# boost-asio - 提升 asio io 服务 memcpy()

> ID：13603898
> 
> 赞同：0
> 
> 时间：2012-11-28T11:23:01.847
> 
> 标签：boost-asio, boost-thread

我已经构建了基于 boost::asio 的应用程序。有时我会得到这种核心转储（不是常规的）。我试图调查发生了什么，但我没有更多的想法来解决它。在我看来，我认为这可能是 io 服务对象内部的一些问题 - 我的意思是可能有任何错误？我应该更新它吗？任何人都可以解释 memcpy() 在这种情况下做什么？核心的原因是什么？

更多细节：平台。太阳操作系统。提升 - 1.49

```
/app/bin/executor_3'executor_dumpstack+0x13 [0x426645]
/app/bin/executor_3'signal_dumpstack+0x9d [0x426625]
/lib/amd64/libc.so.1'__sighndlr+0x6 [0xfffffd7fff224ea6]
/lib/amd64/libc.so.1'call_user_handler+0x2a4 [0xfffffd7fff217b5c]
/lib/amd64/libc.so.1'memcpy+0x1929 [0xfffffd7fff18a449] [Signal 11 (SEGV)]
/opt/lib/extralibs/exe_io.so'_ZNK5boost4_mfi3mf2Iv3GETRKNS_6system10error_codeEmE4callINS_10shared_ptrIS2_EES5_mEEvRT_PKvRT0_RT1_+0x8b [0xfffffd7ff64ff869]
/opt/lib/extralibs/exe_io.so'_ZNK5boost4_mfi3mf2Iv3GETRKNS_6system10error_codeEmEclINS_10shared_ptrIS2_EEEEvRT_S6_m+0x3c [0xfffffd7ff64fe47e]
/opt/lib/extralibs/exe_io.so'_ZN5boost3_bi5list3INS0_5valueINS_10shared_ptrI3GETEEEEPFNS_3argILi1EEEvEPFNS7_ILi2EEEvEEclINS_4_mfi3mf2IvS4_RKNS_6system10error_codeEmEENS0_5list2ISL_RKmEEEEvNS0_4typeIvEERT_RT0_i+0x72 [0xfffffd7ff64fce58]
/opt/lib/extralibs/exe_io.so'_ZN5boost3_bi6bind_tIvNS_4_mfi3mf2Iv3GETRKNS_6system10error_codeEmEENS0_5list3INS0_5valueINS_10shared_ptrIS4_EEEEPFNS_3argILi1EEEvEPFNSF_ILi2EEEvEEEEclIS6_mEEvRKT_RKT0_+0x43 [0xfffffd7ff64fbfa7]
/opt/lib/extralibs/exe_io.so'_ZN5boost4asio6detail17read_streambuf_opINS0_19basic_stream_socketINS0_2ip3tcpENS0_21stream_socket_serviceIS5_EEEESaIcENS1_18transfer_exactly_tENS_3_bi6bind_tIvNS_4_mfi3mf2Iv3GETRKNS_6system10error_codeEmEENSB_5list3INSB_5valueINS_10shared_ptrISF_EEEEPFNS_3argILi1EEEvEPFNSQ_ILi2EEEvEEEEEEclESJ_mi+0x16f [0xfffffd7ff64fa31b]
/opt/lib/extralibs/exe_io.so'_ZN5boost4asio6detail7binder2INS1_17read_streambuf_opINS0_19basic_stream_socketINS0_2ip3tcpENS0_21stream_socket_serviceIS6_EEEESaIcENS1_18transfer_exactly_tENS_3_bi6bind_tIvNS_4_mfi3mf2Iv3GETRKNS_6system10error_codeEmEENSC_5list3INSC_5valueINS_10shared_ptrISG_EEEEPFNS_3argILi1EEEvEPFNSR_ILi2EEEvEEEEEEESI_mEclEv+0x2d [0xfffffd7ff6503345]
/opt/lib/extralibs/exe_io.so'_ZN5boost4asio19asio_handler_invokeINS0_6detail7binder2INS2_17read_streambuf_opINS0_19basic_stream_socketINS0_2ip3tcpENS0_21stream_socket_serviceIS7_EEEESaIcENS2_18transfer_exactly_tENS_3_bi6bind_tIvNS_4_mfi3mf2Iv3GETRKNS_6system10error_codeEmEENSD_5list3INSD_5valueINS_10shared_ptrISH_EEEEPFNS_3argILi1EEEvEPFNSS_ILi2EEEvEEEEEEESJ_mEEEEvT_z+0x8e [0xfffffd7ff6502d76]
/opt/lib/extralibs/exe_io.so'_ZN33boost_asio_handler_invoke_helpers6invokeIN5boost4asio6detail7binder2INS3_17read_streambuf_opINS2_19basic_stream_socketINS2_2ip3tcpENS2_21stream_socket_serviceIS8_EEEESaIcENS3_18transfer_exactly_tENS1_3_bi6bind_tIvNS1_4_mfi3mf2Iv3GETRKNS1_6system10error_codeEmEENSE_5list3INSE_5valueINS1_10shared_ptrISI_EEEEPFNS1_3argILi1EEEvEPFNST_ILi2EEEvEEEEEEESK_mEES11_EEvRT_RT0_+0x3e [0xfffffd7ff650250a]
/opt/lib/extralibs/exe_io.so'_ZN5boost4asio6detail19asio_handler_invokeINS1_7binder2INS1_17read_streambuf_opINS0_19basic_stream_socketINS0_2ip3tcpENS0_21stream_socket_serviceIS7_EEEESaIcENS1_18transfer_exactly_tENS_3_bi6bind_tIvNS_4_mfi3mf2Iv3GETRKNS_6system10error_codeEmEENSD_5list3INSD_5valueINS_10shared_ptrISH_EEEEPFNS_3argILi1EEEvEPFNSS_ILi2EEEvEEEEEEESJ_mEESA_SB_SC_S10_EEvRT_PNS4_IT0_T1_T2_T3_EE+0x21 [0xfffffd7ff6501f61]
/opt/lib/extralibs/exe_io.so'_ZN33boost_asio_handler_invoke_helpers6invokeIN5boost4asio6detail7binder2INS3_17read_streambuf_opINS2_19basic_stream_socketINS2_2ip3tcpENS2_21stream_socket_serviceIS8_EEEESaIcENS3_18transfer_exactly_tENS1_3_bi6bind_tIvNS1_4_mfi3mf2Iv3GETRKNS1_6system10error_codeEmEENSE_5list3INSE_5valueINS1_10shared_ptrISI_EEEEPFNS1_3argILi1EEEvEPFNST_ILi2EEEvEEEEEEESK_mEES12_EEvRT_RT0_+0x25 [0xfffffd7ff65019a3]
/opt/lib/extralibs/exe_io.so'_ZN5boost4asio6detail23reactive_socket_recv_opINS0_17mutable_buffers_1ENS1_17read_streambuf_opINS0_19basic_stream_socketINS0_2ip3tcpENS0_21stream_socket_serviceIS7_EEEESaIcENS1_18transfer_exactly_tENS_3_bi6bind_tIvNS_4_mfi3mf2Iv3GETRKNS_6system10error_codeEmEENSD_5list3INSD_5valueINS_10shared_ptrISH_EEEEPFNS_3argILi1EEEvEPFNSS_ILi2EEEvEEEEEEEE11do_completeEPNS1_15task_io_serviceEPNS1_25task_io_service_operationESL_m+0xc4 [0xfffffd7ff65007cc]
/opt/lib/extralibs/exe_io.so'_ZN5boost4asio6detail25task_io_service_operation8completeERNS1_15task_io_serviceERKNS_6system10error_codeEm+0x32 [0xfffffd7ff6433dc8]
/opt/lib/extralibs/exe_io.so'_ZN5boost4asio6detail15task_io_service10do_run_oneERNS1_11scoped_lockINS1_11posix_mutexEEERNS2_11thread_infoERNS1_8op_queueINS1_25task_io_service_operationEEERKNS_6system10error_codeE+0x202 [0xfffffd7ff6433c9e]
/opt/lib/extralibs/exe_io.so'_ZN5boost4asio6detail15task_io_service3runERNS_6system10error_codeE+0xff [0xfffffd7ff6433925]
/opt/lib/extralibs/exe_io.so'_ZN5boost4asio10io_service3runEv+0x26 [0xfffffd7ff64335d6]
/opt/lib/extralibs/exe_io.so'_ZN6ZohaIO9RunIOEv+0x19 [0xfffffd7ff64335ad]
/opt/lib/extralibs/exe_io.so'_ZNK5boost4_mfi3mf0Iv6ZohaIOEclEPS2_+0x64 [0xfffffd7ff6440cee]
/opt/lib/extralibs/exe_io.so'_ZN5boost3_bi5list1INS0_5valueIP6ZohaIOEEEclINS_4_mfi3mf0IvS3_EENS0_5list0EEEvNS0_4typeIvEERT_RT0_i+0x41 [0xfffffd7ff6440c4d]
/opt/lib/extralibs/exe_io.so'_ZN5boost3_bi6bind_tIvNS_4_mfi3mf0Iv6ZohaIOEENS0_5list1INS0_5valueIPS4_EEEEEclEv+0x33 [0xfffffd7ff6440bfb]
/opt/lib/extralibs/exe_io.so'_ZN5boost6detail11thread_dataINS_3_bi6bind_tIvNS_4_mfi3mf0Iv6ZohaIOEENS2_5list1INS2_5valueIPS6_EEEEEEE3runEv+0x1c [0xfffffd7ff6440514]
/opt/csw/gxx/lib/amd64/libboost_thread.so.1.49.0'0xf655 [0xfffffd7ffa97f655]
/lib/amd64/libc.so.1'_thrp_setup+0xbc [0xfffffd7fff224b14]
/lib/amd64/libc.so.1'_lwp_start+0x0 [0xfffffd7fff224de0] 
```

objdump 输出。

```
0000000000000000 <_ZNK5boost4_mfi3mf2Iv3GETRKNS_6system10error_codeEmE4callINS_10shared_ptrIS2_EES5_mEEvRT_PKvRT0_RT1_>:
    template<class U, class B1, class B2> R call(U & u, T const *, B1 & b1, B2 & b2) const
    {
        BOOST_MEM_FN_RETURN (u.*f_)(b1, b2);
    }

    template<class U, class B1, class B2> R call(U & u, void const *, B1 & b1, B2 & b2) const
   0:   55                      push   %rbp
   1:   48 89 e5                mov    %rsp,%rbp
   4:   53                      push   %rbx
   5:   48 83 ec 38             sub    $0x38,%rsp
   9:   48 89 7d e8             mov    %rdi,-0x18(%rbp)
   d:   48 89 75 e0             mov    %rsi,-0x20(%rbp)
  11:   48 89 55 d8             mov    %rdx,-0x28(%rbp)
  15:   48 89 4d d0             mov    %rcx,-0x30(%rbp)
  19:   4c 89 45 c8             mov    %r8,-0x38(%rbp)
    {
        BOOST_MEM_FN_RETURN (get_pointer(u)->*f_)(b1, b2);
  1d:   48 8b 45 e0             mov    -0x20(%rbp),%rax
  21:   48 89 c7                mov    %rax,%rdi
  24:   e8 00 00 00 00          callq  29 <_ZNK5boost4_mfi3mf2Iv3GETRKNS_6system10error_codeEmE4callINS_10shared_ptrIS2_EES5_mEEvRT_PKvRT0_RT1_+0x29>
  29:   48 89 c2                mov    %rax,%rdx
  2c:   48 8b 45 e8             mov    -0x18(%rbp),%rax
  30:   48 8b 00                mov    (%rax),%rax
  33:   83 e0 01                and    $0x1,%eax
  36:   84 c0                   test   %al,%al
  38:   74 23                   je     5d <_ZNK5boost4_mfi3mf2Iv3GETRKNS_6system10error_codeEmE4callINS_10shared_ptrIS2_EES5_mEEvRT_PKvRT0_RT1_+0x5d>
  3a:   48 8b 45 e8             mov    -0x18(%rbp),%rax
  3e:   48 8b 40 08             mov    0x8(%rax),%rax
  42:   48 8d 04 02             lea    (%rdx,%rax,1),%rax
  46:   48 8b 08                mov    (%rax),%rcx
  49:   48 8b 45 e8             mov    -0x18(%rbp),%rax
  4d:   48 8b 00                mov    (%rax),%rax
  50:   48 83 e8 01             sub    $0x1,%rax
  54:   48 8d 04 01             lea    (%rcx,%rax,1),%rax
  58:   48 8b 00                mov    (%rax),%rax
  5b:   eb 07                   jmp    64 <_ZNK5boost4_mfi3mf2Iv3GETRKNS_6system10error_codeEmE4callINS_10shared_ptrIS2_EES5_mEEvRT_PKvRT0_RT1_+0x64>
  5d:   48 8b 45 e8             mov    -0x18(%rbp),%rax
  61:   48 8b 00                mov    (%rax),%rax
  64:   48 8b 4d c8             mov    -0x38(%rbp),%rcx
  68:   48 8b 19                mov    (%rcx),%rbx
  6b:   48 8b 4d e8             mov    -0x18(%rbp),%rcx
  6f:   48 8b 49 08             mov    0x8(%rcx),%rcx
  73:   48 8d 3c 0a             lea    (%rdx,%rcx,1),%rdi
  77:   48 8b 4d d0             mov    -0x30(%rbp),%rcx
  7b:   48 89 da                mov    %rbx,%rdx
  7e:   48 89 ce                mov    %rcx,%rsi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:15:52.087

提示：使用**c++filt**实用程序，这样您的回溯将变得可读：`cat backtrace | c++filt`

GET 调用时**async_read**处理程序发生了一些事情。也许这个对象在调用处理程序时被销毁，或者参数有些混乱。没有代码不能准确地说，但是从这个回溯中可以看出带有读取回调的东西。

# node.js - 父进程如何将套接字/服务器对象发送到 Node.js 中的子进程？

> ID：13603900
> 
> 赞同：6
> 
> 时间：2012-11-28T11:23:03.850
> 
> 标签：node.js

考虑：

```
// Parent

var child = require('child_process').fork('child.js');

// Open up the server object and send the handle.
var server = require('net').createServer();
server.on('connection', function (socket) {
  socket.end('handled by parent');
});
server.listen(1337, function() {
  child.send('server', server);
});

//Child
process.on('message', function(m, server) {
  if (m === 'server') {
    server.on('connection', function (socket) {
      socket.end('handled by child');
    });
  }
}); 
```

如上例所示，父进程将服务器对象发送给子进程，这样即使是子进程也可以处理一些客户端连接请求。

它是如何在 Node.js 中实现的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-07T22:19:58.450

这是使用[参数](https://github.com/joyent/node/blob/cbff8f091c22fb1df6b238c7a1b9145db950fa65/lib/child_process.js#L406-L452)[调用](https://github.com/joyent/node/blob/cbff8f091c22fb1df6b238c7a1b9145db950fa65/lib/child_process.js#L406-L452)[节点时`process.send``handle`](https://github.com/joyent/node/blob/cbff8f091c22fb1df6b238c7a1b9145db950fa65/lib/child_process.js#L406-L452)的操作。

读完之后，[这个`handleConversion`函数](https://github.com/joyent/node/blob/cbff8f091c22fb1df6b238c7a1b9145db950fa65/lib/child_process.js#L80-L192)读起来也很有趣。

我还没有完全理解它，但我认为基本上套接字/服务器的状态是序列化的，并使用 IPC 在主/从器之间传递。也许传递的状态足以让每个进程将自己绑定到套接字？或者，父母可能会保留一个可以处理任何给定套接字的孩子的注册表，因此一旦某个套接字的新连接进入，它就会被发送给为其注册的孩子。那部分我不太确定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-18T18:50:20.103

现在这是[可能的](https://nodejs.org/api/child_process.html#child_process_example_sending_a_socket_object)，但前提是您使用的是`net`模块。

`child.send('socket', socket);`使用第二个参数发送：

并从子进程接收：

```
process.on('message', function(m, socket) {
   if (m === 'socket') {
       console.log(socket); // Net socket object here
   }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T12:32:13.747

我建议你看看[Node.js 集群模块](http://nodejs.org/api/cluster.html#cluster_how_it_works)：

> 当你调用`server.listen(...)`一个工作进程时，它会序列化参数并将请求传递给主进程。如果主进程已经有一个匹配工作者要求的监听服务器，那么它将句柄传递给工作者。如果它还没有匹配该要求的侦听服务器，那么它将创建一个，并将句柄传递给子进程。

[文档](http://nodejs.org/api/cluster.html)中的完整示例：

```
var cluster = require('cluster');
var http = require('http');
var numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
  // Fork workers.
  for (var i = 0; i < numCPUs; i++) {
    cluster.fork();
  }

  cluster.on('exit', function(worker, code, signal) {
    console.log('worker ' + worker.process.pid + ' died');
  });
} else {
  // Workers can share any TCP connection
  // In this case it's an HTTP server
  http.createServer(function(req, res) {
    res.writeHead(200);
    res.end("hello world\n");
  }).listen(8000);
} 
```

# delphi - Zeos 7 安装失败

> ID：13603901
> 
> 赞同：0
> 
> 时间：2012-11-28T11:23:06.747
> 
> 标签：delphi, build, delphi-xe2, packages, zeos

我已经在我自己的机器上安装了 Zeos 7 Beta，但它在我客户的笔记本电脑上失败了。我们都在运行 Delphi xe2，他的是 Entreprise，我的是 Pro。他的机器运行 64 位 Windows 7，我的机器运行 Window 7 32 位。

当我在 ZeosDbo 或 ProjectGoup16 上编译所有内容时，它似乎通过了 ZCore.dpk 但随后显示了 2 个致命错误：

```
ZCore.dpk(1) E2225 Never-build package 'ZCore' 必须重新编译
ZParseSQL.dpk(33) E2202 未找到所需的包“ZCore”

```

这是我们正在处理的生产代码，所以我希望我们能找到解决方案并重新开始工作

Zeos 论坛主题：http: [//zeos.firmos.at/viewtopic.php ?t=3633](http://zeos.firmos.at/viewtopic.php?t=3633)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:13:28.233

这是第一个错误，第一个错误。第二个只是后效。也许您可以比下载 beta ZIP 做得更好：在它们有成熟版本之前，您可以通过版本控制工具（如 Git 或 SVN 或 Zeos 团队使用的任何工具）每天“每晚”下载更改。此类错误通常会很快得到修复（它们很简单），但会长期释放（它们是如此无意义，以至于没有人会费心为它们发布）。

只需打开[http://zeos.firmos.at/portal.php](http://zeos.firmos.at/portal.php)并阅读在哪里可以获得最即时的更新以及如何报告问题。

实际上 - 就是这样，[http://svn.code.sf.net/p/zeoslib/code-0/trunk/](http://svn.code.sf.net/p/zeoslib/code-0/trunk/) 安装 TortoiseSVN 并在 7.0.1 或 7.0.2 最终版本之前处于领先地位

该页面还说：请将此版本的错误报告给我们在 sourceforge **[https://sourceforge.net/p/zeoslib/tickets/](https://sourceforge.net/p/zeoslib/tickets/)****上的全新错误跟踪器** 。开源就是参与。至少通过注册错误来参与。

关于问题的本质阅读[官方文档](http://docwiki.embarcadero.com/RADStudio/XE3/en/E2225_Never-build_package_%27%25s%27_must_be_recompiled_%28Delphi%29)和“另见”部分。应该有人决定包二进制更新策略。并且应该为所有软件包保留该决定（好吧，您可以在某些情况下混合使用它，但不建议这样做）。所以基本上你有三个选择：

1.  做出您自己的决定，并将所有 Zeos 软件包放入您选择的策略中。这让你自己有责任维护[这个分叉](http://en.wikipedia.org/wiki/Fork_%28software_development%29)一段时间，直到你回到原版 ZeosDB。

2.  向 ZeosDB 团队报告错误并询问他们的建议，然后按照他们的建议更改所有包的设置。

3.  将错误报告给 ZeosDB 团队并等待他们在他们的 SVN 中修复它，然后进行 SVN 更新。

    *   就我个人而言，我会选择 1 个选项，但我已准备好成为 FLOSS 库的共同开发者。
    *   选项 3 对您来说是最慢但最容易的。
    *   选项 2...嗯...我不明白您为什么要选择它，除了不惜一切代价避免版本控制，这本身就是个坏主意。

我还建议您阅读[http://www.catb.org/esr/faqs/smart-questions.html](http://www.catb.org/esr/faqs/smart-questions.html)
这将帮助您在 ZeosDB 论坛上进行有效沟通 - 如果您想“处于边缘”，您必须这样做"（如果你不这样做 - 然后等待像 7.0.2 这样的公开发布）。

# java - Spring mvc RESTFUL 找不到带有 URI 的 HTTP 请求的映射

> ID：13603903
> 
> 赞同：1
> 
> 时间：2012-11-28T11:23:09.093
> 
> 标签：java, spring-mvc, restful-url

我正在开发一个带有 RESTFul url 的 Spring MVC 应用程序。我在静态资源路径解析方面遇到了麻烦。

我在一个jsp页面中有一个静态资源，写成：

```
<link type="text/css" rel="stylesheet" href="resources/css/960_16_col.css"> 
```

所以当页面由tomcat 7渲染时，我得到一个错误：

> 未找到带有 URI [/mycoolapp/instances/demo/resources/css/960_16_col.css] 的 HTTP 请求的映射

在我的 servlet-context.xml 我有：

```
<annotation-driven />
<resources mapping="/resources/**" location="/resources/" /> 
```

我的 web.xml 是：

```
<servlet>
    <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
            <init-param>
                <param-name>contextConfigLocation</param-name>
                <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
            </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

最后我的控制器是：

```
@RequestMapping(value = "/instances/{proj}/{type}", method = RequestMethod.GET)
public ModelAndView instances(Locale locale, Model model,
        @PathVariable("proj") String project,
        @PathVariable("type") String type) {
    . . .
} 
```

在没有宁静的网址的情况下工作一切正常。在谷歌搜索和堆叠之后，我找到了使用静态资源绝对路径的解决方案：

```
<link type="text/css" rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/960_16_col.css"> 
```

[如this stack overflow question](https://stackoverflow.com/questions/13600582/static-content-rendering-with-spring-mvc)中所写，但这似乎是一种解决方法。

有没有一种优雅的方法来解决静态网址并保持它们的亲戚关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:52:35.360

尝试使用`<spring:url />`标签，默认情况下将上下文根附加到 url。

```
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<link type="text/css" rel="stylesheet" href='<spring:url value="/resources/css/960_16_col.css" htmlEscape="true"/>'/> 
```

[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/spring.tld.html](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/spring.tld.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:26:49.077

导入标签库

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
```

然后使用 url 标签：

```
<c:url var="myCss" value="/resources/css/960_16_col.css"/>
<link type="text/css" rel="stylesheet" href="${myCss}"/> 
```

或不创建变量：

```
 <link type="text/css" rel="stylesheet" href="<c:url value='/resources/css/960_16_col.css'/>" /> 
```

# php - Cassandra - 在帖子上存储用户显示名称的推荐方法（以及如果显示名称更改会发生什么）

> ID：13603906
> 
> 赞同：0
> 
> 时间：2012-11-28T11:23:13.457
> 
> 标签：php, nosql, cassandra

我有一个网站，人们可以在其中发布消息，并以这种形式存储它们：

```
post_id : {user_display_name, title, body} 
```

例如：

```
234567 : {
    user_display_name : "John Doe",
    title : "Title here now",
    body : "Body of the post here"
} 
```

我现在的问题是，如果`John Doe`他决定改名`John Lorem`怎么办？在关系数据库中，我只需要一个指向用户信息的用户 id，这样如果他更改了他的名字，更改将反映在任何地方。

如何在 NoSQL 数据库中实现这一点？

因为我认为`John Doe`在整个键空间中查找并将其更改为`John Lorem`.

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:33:15.723

就我个人而言，我发现有时像​​在关系模型中那样使用 ID 来存储可能会发生变化的数据仍然是有意义的。考虑到获取 ID 名称的额外查找非常便宜，这往往比运行整个 CF 来进行更改更合理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:41:01.577

如果您为用户的帖子维护一个列族，您应该为该用户提取所有帖子并更改其显示名称。

同样，在没有索引的 RDBMS（也称为关系）中，您最终将访问完整表以更改显示名称。

但是，您可以编写 Map-Reduce 来识别用户的帖子并更改他们的显示名称，并且将来您可以维护一个 column_family。

```
ROW -> USERID (or) USERID_YYYYMM (to avoid hot-spots)
COLUMN Name -> Reverse(TimeStamp):PostId 
```

该列族还将帮助您通过 userid 快速获取最新的 Postid。

# wgs84 - GEOS C API - 使用 WGS84 坐标计算面积 (SRID=4326)

> ID：13603910
> 
> 赞同：3
> 
> 时间：2012-11-28T11:23:23.550
> 
> 标签：wgs84, geos

我创建了一个多边形，其中每个 x/y 点都是 WGS84 格式的纬度/经度值。

多边形是半径为 R 的圆和扇区的良好近似值（每个圆周/弧点是距中心/顶点坐标的距离 R 的投影纬度/经度值 - 我通过计算边缘和之间的 Haversine 距离验证了这一点是正确的参考点并返回 R 值）。

我使用 GEOSSetSRID(4326) 来指示坐标是 WGS84 格式。GEOSGetSRID() 确认 SRID 已设置。

然后使用 GEOSArea 给出的值甚至远不接近预期值。

我看不到我还能以编程方式做什么。

如果我以笛卡尔格式设置点，然后将 SRID 设置为 4326，GEOS 会隐式地将多边形点转换为 WGS84 吗？

基本的 GEOS C API 是否无法执行上述操作？SRID 对 API 没有任何意义吗？？

任何正确使用/解决方案的信息/指针将不胜感激。

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T23:17:28.333

给出的距离类似于两点之间的度数。实际上，GEOS API（至少是 C++ 接口）与单位无关；它给出的距离单位是基于你传入的。

一般来说，将得到的结果乘以 111000 可以得到相当准确的测量值（以米为单位）。对于面积，你必须做 111000^2。

# checksum - Chef::Resource::Directory 的未定义方法“校验和”

> ID：13603912
> 
> 赞同：2
> 
> 时间：2012-11-28T11:23:38.727
> 
> 标签：checksum, chef-infra, recipe

在运行 Pyramid 的配方时，以下内容失败`chef-solo`：

```
================================================================================
Error executing action `create` on resource 'directory[/etc/service/pyramid/supervise/status]'
================================================================================

NoMethodError
-------------
undefined method `checksum' for Chef::Resource::Directory

Resource Declaration:
---------------------
# In /var/chef-solo/cookbooks/project/recipes/pyramid.rb

 22:     directory "#{node['runit']['service_dir']}/pyramid#{dir}/supervise/#{f}" do
 23:       owner login
 24:       group login
 25:     end
 26:   end

Compiled Resource:
------------------
# Declared in /var/chef-solo/cookbooks/project/recipes/pyramid.rb:22:in `block (2 levels) in from_file'

directory("/etc/service/pyramid/supervise/status") do
  provider Chef::Provider::Directory
  action :create
  retries 0
  retry_delay 2
  path "/etc/service/pyramid/supervise/status"
  cookbook_name :project
  recipe_name "pyramid"
  owner "myusername"
  group "myusername"
  mode 420
end 
```

为什么会出现“未定义的方法`checksum`”，我该怎么办？

此错误似乎不一致。有时厨师运行似乎挂起。其他时候，经过多次运行，厨师能够通过这一点。

我在一个普通的 Ubuntu 服务器 12.04LTS 上运行，安装了一个部署脚本的厨师：

```
sudo apt-get install -y ruby1.9.1 ruby1.9.1-dev make &&
sudo gem1.9.1 install chef ohai --no-rdoc --no-ri 
```

这是完整的金字塔食谱：

```
login = node["user"]["login"]
home = node["user"]["home"]
app_root = node["user"]["app_root"]

runit_service "pyramid" do #, :template_name => "site" do
  template_name "pyramid"
  owner login
  group login
  options({
    :login => login,
    :app_root => app_root,
    :home => home,
    :config => "#{app_root}/config/gunicorn.conf.py"
  })
end

["", "/log"].each do |dir|
  directory "#{node['runit']['service_dir']}/pyramid#{dir}/supervise" do
    mode "0755"
  end
  %w(ok control status).each do |f|
    directory "#{node['runit']['service_dir']}/pyramid#{dir}/supervise/#{f}" do
      owner login
      group login
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:46:04.443

这是我的解决方案 - 在一些黑客攻击加上来自@Draco-ater 的提示后发现......

在配方引用`directory("/etc/service/pyramid/supervise/status")`的地方，状态“目录”是一个已经存在的文件，它会导致问题。

此外，该脚本还尝试将`control`和`ok`管道更新为目录 - 这也失败了。我通过使用`bash`and解决了这个问题`chmod`：

```
bash "give_perms_pyramid" do
    user "chef"
    cwd "#{node['runit']['service_dir']}/pyramid#{dir}/supervise"
    code <<-EOH
        sudo chown myuser:root control
        sudo chmod g+rw control
    EOH 
```

也许这会帮助某人。

# angularjs - AngularJS：如何从链接函数中附加一个元素并在其中运行 Angular 指令？

> ID：13603913
> 
> 赞同：0
> 
> 时间：2012-11-28T11:23:46.640
> 
> 标签：angularjs

我有两个指令“图表”和“图例”。

从我附加的图表指令

```
<legend forScope="' + scope.$id + '"></legend> 
```

但是传奇指令永远不会运行。如何获得角度来处理图例元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:49:18.260

如果不查看您的代码，则不清楚您在做什么。但一般来说，您将使用该`$compile`服务来编译生成的内容，然后再将其附加到 dom。见[http://docs.angularjs.org/api/ng.$compile](http://docs.angularjs.org/api/ng.%24compile)

# knockout.js - 昏死。一起工作 src="/Scripts/myKnockout.js">

## 处理盘子。

myKno

> ID：13603914
> 
> 赞同：1
> 
> 时间：2012-11-28T11:23:49.147
> 
> 标签：knockout.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:34:52.433

您的[选项](http://knockoutjs.com/documentation/options-binding.html)数据绑定表达式中有错字，正确的属性名称是**`optionsText`**而不是 optionText。

所以你需要写

```
<select data-bind="options:$root.dishes, optionsText:'name'" multiple="multiple"> 
```

对于错误类型的属性名称，KO 仍然可以解析绑定，只是不知道使用哪个值作为名称，因此它只是打印出对象的字符串表示形式。

[演示 JSFiddle。](http://jsfiddle.net/nemesv/We8UY/)

# c# - 安装天蓝色云驱动器的控制台应用程序

> ID：13603921
> 
> 赞同：1
> 
> 时间：2012-11-28T11:24:01.820
> 
> 标签：c#, java, azure, azure-storage, azure-clouddrive

我想从我的私人容器挂载 vhd。在谷歌之后，我知道它只能通过.net 来实现。我更像是一个 JAVA 人。我需要一个可以在启动时自动运行并挂载 vhd 的 c# 中的批处理脚本或代码（这样我就可以获得一个 exe 文件）。所以我决定创建一个控制台应用程序以获取 exe 文件。（我对 c#/Visual Studio 的了解非常少）我正在使用以下 C# 控制台应用程序来执行此操作。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Net;
using System.Threading;
using Microsoft.WindowsAzure;
using Microsoft.WindowsAzure.Diagnostics;
using Microsoft.WindowsAzure.ServiceRuntime;
using Microsoft.WindowsAzure.StorageClient;

using Microsoft.WindowsAzure.Internal;

namespace WorkerRole1
{
public class WorkerRole : RoleEntryPoint
{
    public override void Run()
    {
        // This is a sample worker implementation. Replace with your logic.
        Trace.WriteLine("WorkerRole1 entry point called", "Starting");
        MountDrive();

        //while (true)
        //{
        //    Thread.Sleep(10000);
        //    Trace.WriteLine("Working", "Information");
        //}
    }

    public override bool OnStart()
    {
        // Set the maximum number of concurrent connections 
        ServicePointManager.DefaultConnectionLimit = 12;

        // For information on handling configuration changes
        // see the MSDN topic at http://go.microsoft.com/fwlink/?LinkId=166357.

        return base.OnStart();
    }

    public void MountDrive()
    {
        string connectionStringSettingName = "DefaultEndpointsProtocol=http;AccountName=abc;AccountKey=xyz";
        string azureContainerName = "vhds";
        string vhdName = "myvhd.vhd";
        CloudStorageAccount storageAccount = CloudStorageAccount.Parse(connectionStringSettingName);
        //CloudStorageAccount storageAccount = CloudStorageAccount.DevelopmentStorageAccount;

        LocalResource localCache = RoleEnvironment.GetLocalResource("MyAzureDriveCache");
        CloudDrive.InitializeCache(localCache.RootPath, localCache.MaximumSizeInMegabytes);
        Trace.WriteLine("RootPath =====" + localCache.RootPath);
        Trace.WriteLine("MaximumSizeInMegabytes =====" + localCache.MaximumSizeInMegabytes);
        // Just checking: make sure the container exists
        CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();
        blobClient.GetContainerReference(azureContainerName).CreateIfNotExist();

        // Create cloud drive
        CloudDrive myCloudDrive = storageAccount.CreateCloudDrive(
            blobClient
            .GetContainerReference(azureContainerName)
            .GetPageBlobReference(vhdName)
            .Uri.ToString()
        );
        Trace.WriteLine("Uri =====" + blobClient
            .GetContainerReference(azureContainerName)
            .GetPageBlobReference(vhdName)
            .Uri.ToString());

        try
        {
            myCloudDrive.Create(1024);
        }
        catch (CloudDriveException ex)
        {
            // handle exception here
            // exception is also thrown if all is well but the drive already exists
        }

        string driveLetter = myCloudDrive.Mount(50, DriveMountOptions.Force);//Here It throws a Exception
        Trace.WriteLine("Drive =====" + driveLetter);

        for (int i = 0; i < 10; i++)
        {
            System.IO.File.WriteAllText(driveLetter + "\\" + i.ToString() + ".txt", "Test");
        }

    }

}
} 
```

`ERROR_DEVFABRIC_LOCAL_MOUNT_ONLY`但我不断收到异常

```
string driveLetter = myCloudDrive.Mount(50, DriveMountOptions.Force); 
```

请告诉我我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:44:59.267

当`RoleEnvironment.IsAvailable`设置为**false**时，这意味着您没有在 Windows Azure Web/Worker/VM 角色中运行。Windows Azure 驱动器仅在以这些角色安装时才有效（因为它依赖于 RoleEnvironment）。

更多信息可以在[白皮书](http://go.microsoft.com/?linkid=9710117)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T17:20:04.977

`ERROR_DEVFABRIC_LOCAL_MOUNT_ONLY`意味着当你在本地运行时，你必须挂载驱动形式的开发存储。

更改以下行：

```
string connectionStringSettingName = "UseDevelopmentStorage=true"; 
```

甚至更好地使用[RoleEnvironment.GetConfigurationSettingValue](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.getconfigurationsettingvalue.aspx)，例如：

```
string connectionStringSettingName = RoleEnvironment.GetConfigurationSettingValue("DriveConnectionString"); 
```

并在服务配置（文件）中设置设置

# php - 去掉字符串末尾的破折号或任何特殊字符

> ID：13603928
> 
> 赞同：3
> 
> 时间：2012-11-28T11:24:24.080
> 
> 标签：php, regex, preg-replace

我使用以下方法将字符串中的任何特殊字符转换为破折号，字母数字除外：

```
return preg_replace("![^a-z0-9]+!i", "-", $str); 
```

但是，在某些情况下，我有这个字符串：

```
$str = "Hello there chubby!"; 
```

这将导致：

```
Hello-there-chubby- 
```

单词末尾的破折号让我想到了如何删除它的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T11:36:59.303

```
return trim(preg_replace("![^a-z0-9]+!i", "-", $str), '-'); 
```

将去除前导和尾随破折号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-25T06:36:20.713

你可以试试 `rtrim("Hello-there-chubby-", "-");`。

或者

`preg_replace("#[^a-z0-9]+$#ims", "", "Hello-there-chubby-");`

用于删除最后一个特殊字符。

# macos - 将x行从大文件复制到mac上的新文件

> ID：13603930
> 
> 赞同：2
> 
> 时间：2012-11-28T11:24:28.217
> 
> 标签：macos, file

我正在寻找一种快速有效的方法来从文本文件中提取 x 行并将其保存到新文件中。例如，我有一个 4GB 的文本文件 (XML)，我只需要了解解析它们的结构。我尝试过的任何工具（SublimeText2、TextWrangler、MacVim）都无法打开该文件，所以我的想法是将 x 行复制到一个新文件并打开它。

希望有人可以帮助我。感谢，并有一个愉快的一天！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T12:35:29.973

在终端中，`head -100 yourFile`会给你前 100 行。或者`tail -100 yourFile`在最后。

```
head -1000 yourFile > littleFile 
```

将前 1000 行放入 littleFile 中，我怀疑适用于您可以创建的任何大小的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-06T15:44:10.860

这是我在调查大型日志文件时通常会做的事情。仅将感兴趣的行放入单独的文件中很方便，这在日志文件处于活动状态且正在增长时特别有效。

第 1 步：grep 模式并获取感兴趣的行号。在日志文件夹中... grep 的“模式”。这 。搜索当前目录，您可以进行相应更改或使用其他 grep 选项。

```
grep -rnw . -e 'pattern' 
```

./logfile.log:293910 // 第一次出现模式

...

./logfile.log:294591 // 最后一次出现的模式

因此，您要创建以调查的新文件需要在模式第一次出现之前有几行，在模式最后一次出现之后有几行。你像这样创建一个单独的文件......

```
head -294800 ./logfile.log | tail -900 > test.log 
```

现在你有了一个静态的 900 行原始日志文件，它更容易使用。希望这可以帮助某人。

或者

在 vi/vim 编辑器中......你可以这样做，其中 100、200 是范围

```
:100,200w test.log 
```

或者

```
vim -c "100,200w test.log" -c wq logfile.log 
```

# android - 如何访问受“signatureOrSystem”权限保护的系统应用程序组件？

> ID：13603933
> 
> 赞同：0
> 
> 时间：2012-11-28T11:24:31.267
> 
> 标签：android

我想在其他应用程序（源代码中不存在）中访问受“signatureOrSystem”权限保护的系统应用程序的组件（存在于源代码中 - ICS）。可能吗？如果是，请提供一些参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:39:43.733

您不能选择具有[签名](http://developer.android.com/guide/topics/manifest/permission-element.html)或系统的受保护应用程序 根据文档系统仅授予 Android 系统映像中的应用程序或使用与声明权限的应用程序相同的证书签名的应用程序。

要访问系统应用程序，您需要**相同的证书**

# php - 使用php的count()命令统计if语句的结果

> ID：13603934
> 
> 赞同：0
> 
> 时间：2012-11-28T11:24:32.523
> 
> 标签：php, mysql, if-statement, count

我正在努力解决这个问题，我正在使用以下代码检查测验的答案，并根据比较结果输出正确或错误，以及答案字段是否为黑色（仅来自反馈表）显示不同的消息。我不能完全弄清楚如何在这种情况下应用 php count 函数，我试图让它来计算正确和错误答案的数量并将两者相加，然后我可以从那。

```
 <?php
// Make a MySQL Connection
// Construct our join query
$query = "SELECT * FROM itsnb_chronoforms_data_answerquiz a, itsnb_chronoforms_data_createquestions
q WHERE a.quizID='$quizID' AND a.userID='$userID' and q.quizID=a.quizID and
a.questionID = q.questionID ORDER BY a.cf_id ASC" or die("MySQL ERROR: ".mysql_error());
$result = mysql_query($query) or die(mysql_error());

// Print out the contents of each row into a table 
while($row = mysql_fetch_array($result)){
if ($row['correctanswer'] == ''){echo '<tr><td style="color:blue;">Thankyou for your feedback</td></tr>';}
elseif ($row['correctanswer'] == $row['quizselectanswer']){
echo '<tr><td style="font-weight:bold; color:green;">CORRECT</td></tr>';}
else {echo '<tr><td style="font-weight:bold; color:red;">INCORRECT</td></tr>';
}}
?> 
```

我找到了这个例子，并一直在尝试弄清楚如何使用它，但想不出如何用它来计算 if 语句的结果？

```
<?php
$people = array("Peter", "Joe", "Glenn", "Cleveland");
$result = count($people);

echo $result;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:31:01.393

只需增加两个计数器

```
$correct_answers = 0;
$incorrect_answers = 0;
while ($row = mysql_fetch_array($result)) {
    if ($row['correctanswer'] == '') {...
    } elseif ($row['correctanswer'] == $row['quizselectanswer']) {
        echo '<tr><td style="font-weight:bold; color:green;">CORRECT</td></tr>';
        $correct_answers++;
    } else {
        echo '<tr><td style="font-weight:bold; color:red;">INCORRECT</td></tr>';
        $incorrect_answers++;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:29:37.847

只需在 if/elseif/else 构造的每个分支中增加一些计数器...

```
$counters = array( 'blank'=>0, 'correct'=>0, 'incorrect'=>0 );
// Print out the contents of each row into a table 
while($row = mysql_fetch_array($result)){
    if ( ''==$row['correctanswer'] ) {
        echo '<tr><td style="color:blue;">Thankyou for your feedback</td></tr>';
        $counters['blank'] += 1;
    }
    elseif ( $row['correctanswer']==$row['quizselectanswer'] ) {
        echo '<tr><td style="font-weight:bold; color:green;">CORRECT</td></tr>';
        $counters['correct'] += 1;
    }
    else {
        echo '<tr><td style="font-weight:bold; color:red;">INCORRECT</td></tr>';
        $counters['incorrect'] += 1;
    }
}

echo '#correct answers: ', $counters['correct']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:33:01.963

如何创建一个包含正确答案计数的变量？对于您循环的每个问题，将值加一。

```
<?php
    $correct_answers = 0;
    while($questions) {
        if($answer_is_correct) {
            // Increment the number of correct answers.
            $correct_answers++;
            // Display the message you need to and continue to next question.
        }
        else {
            // Don't increment the number of correct answers, display the message
            // you need to and continue to the next question.
        }
    }
    echo 'You got ' . $correct_answers . ' question(s) right!'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T11:34:04.610

```
 <?php
// Make a MySQL Connection
// Construct our join query
$query = "SELECT ... ";

$result = mysql_query($query) or die(mysql_error());

$countCorrect = 0;
$countIncorrect = 0;

// Print out the contents of each row into a table 
while($row = mysql_fetch_array($result)){
    if ($row['correctanswer'] == ''){echo '<tr><td style="color:blue;">Thankyou for your feedback</td></tr>';}
    elseif ($row['correctanswer'] == $row['quizselectanswer']){
        $countCorrect++;

        echo '<tr><td style="font-weight:bold; color:green;">CORRECT</td></tr>';}
        else {
        $countIncorrect++;
        echo '<tr><td style="font-weight:bold; color:red;">INCORRECT</td></tr>';
        }

}

echo ((int)($countCorrect/($countIncorrect + $countCorrect) * 100)) . "% answers were correct!" ;

?> 
```

# javascript - HTML 内容没有出现在 Jquery 点击功能上

> ID：13603935
> 
> 赞同：2
> 
> 时间：2012-11-28T11:24:34.020
> 
> 标签：javascript, jquery, html

在我的代码中，我有以下内容：

```
$(document).ready(function(){           
    $("input#Addmore").click(function(){
        $('div#add_div').append("<a class='remove' href='#'>X</a>");
    });         
}); 
```

此代码单击添加更多按钮，我想通过 jquery 单击“X”删除上述添加代码的父 div。为此，我正在使用此代码

```
$("a.remove").click(function(){ 
    $(this).closest("div").remove();
}); 
```

但是代码不起作用，因为 jQuery 没有获取附加锚代码。谁能告诉我解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T11:27:13.343

您需要将事件委托给最近的静态元素。试试这个：

```
$('#add_div').on('click', 'a.remove', function() {
    $(this).closest("div").remove();
}); 
```

或者，如果您使用的是旧版本的 jQuery（小于 1.7） ，请`delegate()`像这样使用：

```
$('#add_div').delegate('a.remove', 'click', function() {
    $(this).closest("div").remove();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T10:03:40.073

试试这个

```
$('#add_div').delegate('a.remove', 'click', function() {
    $(this).closest("div").remove();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:43:12.220

或者你可以试试这个：

```
 $("input#Addmore").click(function(){
       $("div#add_div").append("<a class='remove' href='javascipt:;' onclick='remove(this);return false' href='#'>X<br/></a>");
}); 
```

这是删除功能：

```
 window.remove = function(obj)
   {
        $(obj).closest('div').remove();
   } 
```

见这里：http: [//jsfiddle.net/Hvx2u/3/](http://jsfiddle.net/Hvx2u/3/)

# javascript - 是否有可能在 highstock 图表中有两个 Y 轴，一个在左边，另一个在右边？

> ID：13603937
> 
> 赞同：1
> 
> 时间：2012-11-28T11:24:58.187
> 
> 标签：javascript, highcharts, highstock

是否有可能在 highstock 图表中有 2 个 yAxis 从 highcharts 一个在左边，另一个在右边？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T14:00:49.937

一个非常简单的例子：
首先，您必须创建新的 yAxis 并设置它的位置。

```
{
    title: {
        text: 'Other data panel'
    },
    top: 300,
    height: 100,
    offset: 0,
    lineWidth: 2,
    opposite: true
} 
```

然后，当您创建您的系列时，您将放置在什么 yAxis 中。

```
{
    type: 'column',
    name: 'Other',
    data: otherData,
    yAxis: 2,
    dataGrouping: {
        units: groupingUnits
    }
} 
```

你可以看到它[**在这里工作**](http://jsfiddle.net/VgCQV/)。

# javascript - Javascript new date() 转换

> ID：13603940
> 
> 赞同：0
> 
> 时间：2012-11-28T11:25:09.383
> 
> 标签：javascript, date, datetimepicker

我在转换时遇到了一些麻烦。它说日期**无效**`alert(first_date) and alert(end_date)`，等等：s 我使用 datetimepicker 来获取日期。

```
$( "#start_date" ).datetimepicker({
            dateFormat : 'yy-mm-dd',
            timeFormat: 'hh:mm:ss',
            defaultDateTime: "+1w",
            showSecond: true,
            changeMonth: true,
            changeYear: true,
            onClose: function( selectedDateTime ) {
                $( "#end_date" ).datetimepicker( "option", selectedDateTime );
            }
        });
        $( "#end_date" ).datetimepicker({
            dateFormat : 'yy-mm-dd',
            timeFormat: 'hh:mm:ss',
            defaultDateTime: "+1w",
            showSecond: true,
            changeMonth: true,
            changeYear: true,
            onClose: function( selectedDateTime ) {
                $( "#start_date" ).datetimepicker( "option", selectedDateTime );
            }
        }); 
```

现在，我需要做这样的事情：

```
var first_date = new Date($('#start_date').val());
var last_date = new Date($('#end_date').val());
var nDifference = (last_date - first_date);
var one_day = 1000*60*60*24;
var days = Math.round(nDifference/one_day);

<input type="text" id="start_date" name="start_date" value=""/>
<input type="text" id="end_date" name="end_date" value=""/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:41:38.273

Javascript 日期可靠地接受 ISO 日期格式...

```
d = '2012-01-01 06:16:16'

console.log(new Date(d)) // invalid
console.log(new Date(d.replace(' ','T'))) // valid!
// Z at the end accounts for local timezone offset
console.log(new Date(d.replace(' ','T')+'Z')) 
```

# java - Hibernate Criteria Cast with Projections

> ID：13603943
> 
> 赞同：0
> 
> 时间：2012-11-28T11:25:20.183
> 
> 标签：java, hibernate, casting, criteria, hibernate-criteria

我有一个标准，有两个预测，都是总和。结果受某些Id限制，因此只有一行。我希望结果是双打列表。

像这样的东西：

```
Criteria criteria = session.createCriteria(SomeClass.class).add(Restrictions.eq("id", id))
                       .setProjection(Projections.projectionList()
                          .add(Projections.sum("aFloatColumn"))
                            .add(Projections.sum("anotherFloatColumn"))); 
```

我希望结果是一个数组或一个列表。

这样做：

```
Object result = (Object) criteria.uniqueResult(); 
```

结果是一个值为“[sum1, sum2]”的对象；

当我尝试将其转换为 Double[] 或 List< Double> 时，我得到 java.lang.ClassCastException。那是因为结果是具有单个值的单个对象，它是一个元组。

有任何想法吗？

Obs.：我可以处理对象做我想做的事。转成String、split、cast……但我觉得一定有更聪明的办法来做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:57:07.370

通过两次咨询解决了它：

```
 setProjection(Projections.sum("aFloatColumn"));
    List<Double> result = new ArrayList<Double>();
    result.add((Double) criteria.uniqueResult());

    setProjection(Projections.sum("anotherFloatColumn"));
    result.add((Double) criteria.uniqueResult()); 
```

如果有人知道如何用一个镜头做到这一点，请告诉我。谢了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T13:37:41.700

您可以将结果转换为`Object[]`（在您的情况下，它将返回一个包含两个`Double`s 的对象数组）；那么数组的每个元素都可以单独转换。

# javascript - Javascript 小工具驱动 API

> ID：13603944
> 
> 赞同：1
> 
> 时间：2012-11-28T11:25:21.207
> 
> 标签：javascript, google-drive-api

我可以编写一个使用 javascript drive api 的 Google XML 小工具吗？我试图嵌入 javascript 快速入门的代码，替换了客户端 ID，但它不起作用。

[https://developers.google.com/drive/quickstart-js](https://developers.google.com/drive/quickstart-js)

谢谢

# java - 计算 JMS 队列中的消息数

> ID：13603949
> 
> 赞同：17
> 
> 时间：2012-11-28T11:25:27.447
> 
> 标签：java, jms, activemq, message-queue

遍历 JMS 队列并获取其中所有消息的最佳方法是什么？

如何计算队列中的消息数？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-02-28T18:47:24.393

使用 JmsTemplate

```
public int getMessageCount(String messageSelector)
{
    return jmsTemplate.browseSelected(messageSelector, new BrowserCallback<Integer>() {
        @Override
        public Integer doInJms(Session s, QueueBrowser qb) throws JMSException
        {
            return Collections.list(qb.getEnumeration()).size();
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-28T11:33:31.740

这就是您如何计算队列中的消息数

```
public static void main(String[] args) throws Exception
    {
        // get the initial context
        InitialContext ctx = new InitialContext();

        // lookup the queue object
        Queue queue = (Queue) ctx.lookup("queue/queue0");

        // lookup the queue connection factory
        QueueConnectionFactory connFactory = (QueueConnectionFactory) ctx.
            lookup("queue/connectionFactory");

        // create a queue connection
        QueueConnection queueConn = connFactory.createQueueConnection();

        // create a queue session
        QueueSession queueSession = queueConn.createQueueSession(false,
            Session.AUTO_ACKNOWLEDGE);

        // create a queue browser
        QueueBrowser queueBrowser = queueSession.createBrowser(queue);

        // start the connection
        queueConn.start();

        // browse the messages
        Enumeration e = queueBrowser.getEnumeration();
        int numMsgs = 0;

        // count number of messages
        while (e.hasMoreElements()) {
            Message message = (Message) e.nextElement();
            numMsgs++;
        }

        System.out.println(queue + " has " + numMsgs + " messages");

        // close the queue connection
        queueConn.close();
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-01-08T08:51:16.750

Java 8 和 Spring Boot

```
 public int countPendingMessages(String destination) {
    // to an Integer because the response of .browse may be null
    Integer totalPendingMessages = this.jmsTemplate.browse(destination, (session, browser) -> Collections.list(browser.getEnumeration()).size());

    return totalPendingMessages == null ? 0 : totalPendingMessages;
   } 
```

# macos - 在 Mac 上延迟（动态）加载框架（或 dylib）

> ID：13603950
> 
> 赞同：4
> 
> 时间：2012-11-28T11:25:28.387
> 
> 标签：macos, dll, linker, shared-libraries

我试图在我只在运行时知道路径的mac上加载一个框架（或dylib）。

窗户解决方案：

*   使用 /DELAYLOAD 链接库
*   就在使用库中的函数之前，将程序中的当前目录更改为dll所在的目录
*   从这个库中调用一些函数。dll从当前目录加载

在 mac 上，我可以使用弱链接来使应用程序启动，而该库尚不可用。但是，一旦需要库中的某些功能，我就会得到“找不到图像”，并且应用程序被中止。

如何在运行时告诉 Mac 动态链接器在哪里寻找库？“dlopen”不起作用，因为它只加载库而不解析符号。将 rpath 设置为“。” （当前目录）和更改当前目录不起作用。设置典型环境变量 (DYLD_LIBRARY_PATH) 仅在运行可执行文件之前完成，而不是在运行时。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-03T04:29:58.860

编写一个在运行时发现路径的包装脚本或可执行文件，将路径添加到 DYLD_LIBRARY_PATH，然后调用`execve`真正的可执行文件。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-16T20:42:49.743

使用 dlopen() 打开库，然后使用 dlsym() 查找符号。如果您依赖动态链接器，则必须提前知道路径并通过 rpath 或使用环境变量进行设置。rpath 可以采用相对路径，因此可能对您有用……但最有可能的是，dlopen() 和朋友是这里最好的解决方案（尽管转换为使用函数指针可能需要一些工作）。

dlopen() 等的优点是相同（或相似）的代码可以在其他 *nix 上工作。

您还可以查看 NSAddImage()，它是 OSX 特定的，但也应该做您想做的事情。

# performance - glVertexAttrib 与 glVertexAttribPointer

> ID：13603956
> 
> 赞同：3
> 
> 时间：2012-11-28T11:25:47.233
> 
> 标签：performance, opengl, graphics, glsl

我正在通读并尝试学习着色器，但我突然对将信息传递到着色器感到困惑。

`glVertexAttrib`和 和有什么不一样`glVertexAttribPointer`？有不同的时间使用它们吗？它们只是做同一件事的两种不同方式吗？一个提供更好还是更差的性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:15:46.817

`glVertexAttrib`为给定的一组顶点设置属性的*值。*

`glVertexAttribPointer`为每个顶点设置*属性的位置。*

所以本质上这两个是不同的功能，你不能在速度方面比较它们。无论如何，设置属性指针并不是大多数渲染设备的瓶颈。

# objective-c - 保存数据 - 核心数据与 plist 文件

> ID：13603957
> 
> 赞同：1
> 
> 时间：2012-11-28T11:25:47.197
> 
> 标签：objective-c, plist

我正在编写一个保存音乐专辑的 iOS 应用程序（只是为了好玩而做的一个练习）。对于每张专辑，都有歌手、歌曲名称、时间和图片。最终的结果将是很多对象，其中包含很多细节，包括附在每个对象上的图片。我是否应该考虑用 plist 做类似的事情？（图片可以存储在plist中吗？）

保存和访问这些数据的最佳方式是什么？我是 iOS 新手，从我看过的培训视频中不推荐初学者使用 Core Data。真的是这样吗？

如果我要使用 plist，我应该为每种类型创建一个 plist，例如 rap.plist 、 rock.plist 等，还是只是一个大数据.plist？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:36:34.010

我会选择核心数据。如果您在 xcode 中创建新项目时选择了正确的模板，则可以显着减少一次性开销工作。

有了这种简单的结构，我会说模板提供了您需要的几乎所有东西。只需定义您的模型和布局即可。

只有图像我会花更多时间思考。我个人从未将图像数据放入核心数据本身。我宁愿将它们存储为文件，在我的核心数据模型中，我只是存储了路径和文件名来访问它。作为文件名，我只是使用了时间戳。您可以使用一些自动增量或其他独特的 id 技术，但时间戳也可以。无论如何，它对用户是不可见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:30:09.417

您需要更多代码来设置核心数据堆栈（存储协调器、存储、对象模型和上下文）

它有点复杂，但这不应该吓跑你。读取 plist 确实很容易，但虽然对较小的数据（如 info.plist）有好处，但它不能扩展，很快你就需要一个成熟的数据库

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:44:23.423

我认为你可以做到这一点的最好方法是使用 sqlite，因为你是 IOS 新手。将您想要的所有信息保存在本地数据库中并显示在屏幕上。

如果您的数据结构很小，则可以使用 plist。

```
Note that property lists should be used for data that consists primarily 
of strings and numbers. They are very inefficient when used with large blocks 
of binary data. A property list is probably the easiest to maintain, but it will be loaded into memory all at once. This could eat up a lot of the device's memory.

With Sqlite you will easily be able delete , edit, insert your data into the database. 

Core data also uses sqlite for data storage only it helps you to manage your data objects, their relationships and dependencies with minimal code. 
```

而且由于您是新手，因此我认为核心数据不是一个好主意..所以我建议从普通的 sqlite 开始。将数据保存在应用程序的一个文件夹中，并将其路径存储在数据库中。

您不必编写不同的 plist。如果您正在使用，您可以使用相同的 plist。

**编辑：**这是一个链接，可以帮助您学习 sqlite

[http://www.iosdevelopment.be/sqlite-tutorial/](http://www.iosdevelopment.be/sqlite-tutorial/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T11:39:42.833

当您编辑原始问题时，决定现在使用 plist。在这种情况下，我会为每个 ablum 选择一个 plist，为专辑列表选择一个整体 plist。当然，您可以为类别等使用更多 plist。

但是，如果您正在考虑像类别这样的数据结构，那么使用核心数据会好得多。尤其是在搜索方面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T11:43:27.523

似乎没有人提到 SQLLite，我会这样做，原因我在这里解释（[https://stackoverflow.com/a/12619813/1104563](https://stackoverflow.com/a/12619813/1104563)）。希望这可以帮助！

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-28T11:33:12.550

coredata 是苹果提供的持久化工具，而 plist 是 XML 文件。我认为不建议初学者使用 core data 的原因是 core data 从编程角度来看比 plist 更难。对于您的应用程序，显然核心数据更适合。但或者，您也可以使用位于核心数据和 plist 之间的存档文件。

# php - 在 cakephp 中调用控制器后如何调用函数

> ID：13603958
> 
> 赞同：0
> 
> 时间：2012-11-28T11:25:48.477
> 
> 标签：php, cakephp, cakephp-2.0

我正在 cakephp 中创建一个简单的网站。

我在“元素”中保留了页眉和页脚，但我的问题是页眉菜单来自数据库，在我调用函数之前它不可用。

我希望一旦控制器被调用，菜单的功能就应该被自己调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:29:51.990

在您的 AppController 中添加以下内容：

```
function beforeFilter(){
    $this->set('menu', $this->YourModel->findById('Id of your menu data row in database'));
} 
```

然后，在视图中，可以通过调用来访问菜单`echo $menu['yourModel']['menu'];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:28:45.873

**TLDR：**

与其在每次加载整个控制器（或所有控制器）时都调用该函数，不如只在`element`加载自身时调用该函数。这使您可以更加灵活地前进。例如，登录屏幕可能不需要菜单 - 或者您最终添加了一个具有不同菜单的管理工具......等等。

CakePHP 使这非常容易使用`requestAction()`- 在此处阅读更多信息：http: [//book.cakephp.org/2.0/en/views.html#passing-variables-into-an-element](http://book.cakephp.org/2.0/en/views.html#passing-variables-into-an-element)

**旁注：**将所有查询保留在模型中而不是直接从控制器调用它们也是理想的（MVC 模式和许多其他原因）。

**示例代码：**

```
/**
 * MenusController (or any other controller you want)
 */
public function get_menu_main() {
    $this->set('menu', $this->Menu->getMenuMain());
}
public function get_menu_footer() {
    $this->set('menu', $this->Menu->getMenuFooter());
}

/**
 * Menu model
 */
public function getMenuMain() {
    return $this->findById('12345');
}
public function getMenuFooter() {
    return $this->findById('67891');
} 
```

然后，在您的元素中，只需使用 a`requestAction`来检索该特定元素所需的数据：

```
/**
* MainMenu element
*/
$menu = $this->requestAction('menus/get_menu_main/');

/**
* FooterMenu element
*/
$menu = $this->requestAction('menus/get_menu_footer/'); 
```

**旁注：**为了更恰当一点，您可以使用`$this->Html->url()`而不是将 URL 硬编码到操作中。

**旁注：** 当您不需要时，其中一些代码可能看起来像添加额外的代码，但是通过将它们分解为正确的 MVC 位置，您的代码将更清洁、更灵活/可升级......等等等等。当事情开始变得更加复杂时，养成做这样的事情的习惯会让你的生活更轻松。（实际上，上面的代码添加了几行代码，但就复杂性而言，我认为它比在 AppController 中为元素加载变量的查询更容易理解。/endrant

# apache - 使用 openssl 函数时 Apache 服务器 (xampp) 崩溃

> ID：13603960
> 
> 赞同：2
> 
> 时间：2012-11-28T11:25:55.750
> 
> 标签：apache, crash, openssl

我正在尝试使用 php 生成私钥/公钥对。

> 服务器：Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7

操作系统是安装了所有 Windows 更新的 Windows XP SP3。

我正在尝试执行以下脚本：

```
<?php

$ssl_path = getcwd();
$ssl_path = preg_replace('/\\\/','/', $ssl_path);  // Replace \ with /

$config = array(
    'config'           => "$ssl_path/openssl.cnf",
    'private_key_bits' => 1024, 
    'private_key_type' => OPENSSL_KEYTYPE_RSA
);

$dn = array(
   "countryName"            => "AT",
   "stateOrProvinceName"    => "Vienna",
   "localityName"           => "Cambs",
   "organizationName"       => "UniServer",
   "organizationalUnitName" => "Demo",
   "commonName"             => "localhost",
   "emailAddress"           => "me@example.com"
);

$privateKey = openssl_pkey_new($config);
$csr = openssl_csr_new($dn, $privateKey, $config);
$sscert = openssl_csr_sign($csr, NULL, $privateKey, 365, $config);
openssl_pkey_export_to_file($privateKey, "C:/server.key", NULL, $config);
openssl_x509_export_to_file($sscert,  "C:/server.crt", FALSE);
openssl_csr_export_to_file($csr, "C:/server.csr");
$keyDetails = openssl_pkey_get_details($privateKey);
file_put_contents('C:/public.key', $keyDetails['key']);

?> 
```

这是我的 openssl.cnf：

```
#######################################################################
# File name: openssl.cnf
# Created By: The Uniform Server Development Team
########################################################################

#
# OpenSSL configuration file.
#

# Establish working directory.
dir         = .

[ req ]
default_bits            = 1024
default_md              = sha1
default_keyfile         = privkey.pem
distinguished_name      = req_distinguished_name
x509_extensions         = v3_ca
string_mask             = nombstr

[ req_distinguished_name ]
countryName             = Country Name (2 letter code)
countryName_min         = 2
countryName_max         = 2
stateOrProvinceName     = State or Province Name (full name)
localityName            = Locality Name (eg, city)
0.organizationName      = Organization Name (eg, company)
organizationalUnitName  = Organizational Unit Name (eg, section)
commonName              = Common Name (eg, YOUR fqdn)
commonName_max          = 64
emailAddress            = Email Address
emailAddress_max        = 64

[ ssl_server ]
basicConstraints        = CA:FALSE
nsCertType              = server
keyUsage                = digitalSignature, keyEncipherment
extendedKeyUsage        = serverAuth, nsSGC, msSGC
nsComment               = "OpenSSL Certificate for SSL Web Server"

[ v3_req ]
basicConstraints = CA:FALSE
keyUsage         = nonRepudiation, digitalSignature, keyEncipherment

[ v3_ca ]
basicConstraints        = critical, CA:true, pathlen:0
nsCertType              = sslCA
keyUsage                = cRLSign, keyCertSign
extendedKeyUsage        = serverAuth, clientAuth
nsComment               = "OpenSSL CA Certificate" 
```

当我尝试执行此脚本时，apache 崩溃并重新启动。是什么导致了这个问题？

顺便说一句：如果我尝试使用 phpseclib0.3.1 库，也会发生同样的错误。

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:58:45.383

以我的经验，openssl_pkey_get_details() 需要 X.509 证书来获取公钥 - 而不是私钥（尽管文档说了什么）。

[使用phpseclib（一个纯 PHP X.509 实现）](http://phpseclib.sourceforge.net/index.html)实际上可能更容易完成所有这些工作。例如。：

[http://phpseclib.sourceforge.net/x509/examples.html#selfsigned](http://phpseclib.sourceforge.net/x509/examples.html#selfsigned)

```
<?php
include('File/X509.php');
include('Crypt/RSA.php');

// create private key / x.509 cert for stunnel / website
$privKey = new Crypt_RSA();
extract($privKey->createKey());
$privKey->loadKey($privatekey);

$pubKey = new Crypt_RSA();
$pubKey->loadKey($publickey);
$pubKey->setPublicKey();

$subject = new File_X509();
$subject->setDN(array(
    "countryName"            => "AT",
    "stateOrProvinceName"    => "Vienna",
    "localityName"           => "Cambs",
    "organizationName"       => "UniServer",
    "organizationalUnitName" => "Demo",
    "commonName"             => "localhost",
    "emailAddress"           => "me@example.com"
 ));
$subject->setPublicKey($pubKey);

$issuer = new File_X509();
$issuer->setPrivateKey($privKey);
$issuer->setDN($subject->getDN());

$x509 = new File_X509();

$result = $x509->sign($issuer, $subject);

$csr = $issuer->signCSR();
$csr = $x509->saveCSR($csr);

file_put_contents("C:/server.key", $privKey->getPrivateKey());
file_put_contents("C:/server.crt", $x509->saveX509($result));
file_put_contents('C:/public.key', $privKey->getPublicKey());
file_put_contents("C:/server.csr", $csr);
?> 
```

# wpf - 继承/基于数据模板

> ID：13603961
> 
> 赞同：4
> 
> 时间：2012-11-28T11:25:57.840
> 
> 标签：wpf, datatemplate, basedon

我有一个`DataTemplate`在我的 WPF 应用程序中使用的 -

```
<DataTemplate x:Key="mattersTemplate">
    <Border Name="border" BorderBrush="Aqua" BorderThickness="1" Padding="5" Margin="5">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Row="0" Grid.Column="0" Text="FileRef:"/>
            <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Path=FileRef}" />
            <TextBlock Grid.Row="1" Grid.Column="0" Text="Description:"/>
            <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Path=Description}"/>
            <TextBlock Grid.Row="2" Grid.Column="0" Text="Priority:"/>
            <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding Path=Priority}"/>
        </Grid>
    </Border>
</DataTemplate> 
```

然后我（在一个`DocumentSetTemplateSelector`类中）定义要使用的模板；

我想做/知道的是；创建 4 个其他模板，这些模板将继承上述模板，然后允许覆盖某些属性；

一个例子（这个模板继承自上面的类）——所以它们看起来是一样的；

```
<DataTemplate x:Key="documentSet_Accounting">
    <ContentPresenter Content="{Binding mattersTemplate}" 
         ContentTemplate="{StaticResource mattersTemplate}">
    </ContentPresenter>
</DataTemplate> 
```

我希望有一种风格附加到这个（如果可能的话）以便获得这种效果；

```
<DataTemplate x:Key="documentSet_Accounting">
    <ContentPresenter fontsize="20" Content="{Binding mattersTemplate}" 
         ContentTemplate="{StaticResource mattersTemplate}">
    </ContentPresenter>
</DataTemplate> 
```

或者

```
<DataTemplate x:Key="documentSet_Accounting">
    <ContentPresenter Style="AccountingStyle" Content="{Binding mattersTemplate}" 
         ContentTemplate="{StaticResource mattersTemplate}">
    </ContentPresenter>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:37:34.393

在模板中使用样式继承而不是模板继承怎么样？

```
<Style x:Key="mattersTemplateStyle">
    <Setter Property="TextBlock.Foreground" Value="Green"/>
</Style>
<Style x:Key="documentSet_AccountingStyle" BasedOn="{StaticResource mattersTemplateStyle}">
    <Setter Property="TextBlock.FontSize" Value="20"/>            
</Style>
<DataTemplate x:Key="mattersTemplate">
    <Border Name="border" BorderBrush="Aqua" BorderThickness="1" Padding="5" Margin="5">
        <Grid Style="{StaticResource mattersTemplateStyle}">
            [...]
        </Grid>
    </Border>
</DataTemplate>
<DataTemplate x:Key="documentSet_Accounting">
    <Grid Style="{StaticResource documentSet_AccountingStyle}">
        <ContentPresenter Content="{Binding mattersTemplate}" ContentTemplate="{StaticResource mattersTemplate}"></ContentPresenter>
    </Grid>
</DataTemplate> 
```

# php - 无法打开流：没有这样的文件或目录 PHP

> ID：13603962
> 
> 赞同：0
> 
> 时间：2012-11-28T11:25:58.883
> 
> 标签：php, mysql, file-upload, csv

我在 php 页面中有一个上传表单，它将 csv 文件放入数据库。

提交 csv 文件时出现错误：

```
Warning: move_uploaded_file(/public_html/csv/test/books.csv) [function.move-uploaded-file]: failed to open stream: No such file or directory in /home/blakeloi/public_html/csv/index.php on line 19

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/tmp/phpZw2e2X' to '/public_html/csv/test/books.csv' in /home/blakeloi/public_html/csv/index.php on line 19 
```

这是错误的行：

```
$upload_path = '/Users/blakeloizides/Desktop'; 
```

在：

```
if (move_uploaded_file($_FILES['file']['tmp_name'], $upload_path.'/'.$_FILES['file']['name'])) 
```

我现在多次尝试重命名文件路径，但似乎没有任何效果。最明显的答案是我的文件目录路径错误，但我将文件夹放入浏览器并获得了正确的路径。我什至尝试在我的服务器 /public_html/test 上使用一个文件夹，但这不起作用。

```
<?php

$message = null;

$allowed_extensions = array('csv');

$upload_path = '/Users/blakeloizides/Desktop';

if (!empty($_FILES['file'])) {

if ($_FILES['file']['error'] == 0) {

    // check extension
    $file = explode(".", $_FILES['file']['name']);
    $extension = array_pop($file);

    if (in_array($extension, $allowed_extensions)) {

        if (move_uploaded_file($_FILES['file']['tmp_name'], $upload_path.'/'.$_FILES['file']['name'])) {

            if (($handle = fopen($upload_path.'/'.$_FILES['file']['name'], "r")) !== false) {

                $keys = array();
                $out = array();

                $insert = array();

                $line = 1;

                while (($row = fgetcsv($handle, 0, ',', '"')) !== FALSE) {

                    foreach($row as $key => $value) {
                        if ($line === 1) {
                            $keys[$key] = $value;
                        } else {
                            $out[$line][$key] = $value;

                        }
                    }

                    $line++;

                }

                fclose($handle);    

                if (!empty($keys) && !empty($out)) {

                    $db = new PDO('mysql:host=localhost;dbname=blakeloi_import-csv', 'blakeloi_root', 'password');
                    $db->exec("SET CHARACTER SET utf8");

                    foreach($out as $key => $value) {

                        $sql  = "INSERT INTO `books` (`";
                        $sql .= implode("`, `", $keys);
                        $sql .= "`) VALUES (";
                        $sql .= implode(", ", array_fill(0, count($keys), "?"));
                        $sql .= ")";
                        $statement = $db->prepare($sql);
                        $statement->execute($value);

                    }

                    $message = '<span class="green">File has been uploaded successfully</span>';

                }   

            }

        }

    }     else {
        $message = '<span class="red">Only .csv file format is allowed</span>';
    }

} else {
    $message = '<span class="red">There was a problem with your file</span>';
}

}

?>
    <!DOCTYPE HTML>
    <html lang="en">
    <head>
<meta charset="utf-8" />
<title>Upload CSV to MySQL</title>
<meta name="description" content="" />
<meta name="keywords" content="" />
<link href="css/core.css" rel="stylesheet" type="text/css" />
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head>
<body>

<section id="wrapper">  

<form action="" method="post" enctype="multipart/form-data">

    <table cellpadding="0" cellspacing="0" border="0" class="table">
        <tr>
            <th><label for="file">Select file</label> <?php echo $message; ?></th>
        </tr>
        <tr>
            <td><input type="file" name="file" id="file" size="30" /></td>
        </tr>
        <tr>
            <td><input type="submit" id="btn" class="fl_l" value="Submit" /></td>
        </tr>
    </table>

</form>

</section>

</body>
</html> 
```

![在此处输入图像描述](../Images/330833e43242ac4ca8b8bfcdf35beb75.png)

我的 index.php 文件位于 public_html/csv 或[http://www.blakeloizides.co.za/csv](http://www.blakeloizides.co.za/csv) 我想将文件上传到 public_html/csv/test 或[http://www.blakeloizides.co.za /csv/测试](http://www.blakeloizides.co.za/csv/test)

我的两个文件夹的权限都是 755。

![在此处输入图像描述](../Images/6a783170fefb1277cdde3e27c7210fb9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:41:07.953

我不得不将我的文件路径更改为 /home/blakeloi/public_html/csv/test 。那是我使用 /public_html/csv/test 的错误

# jquery - 激活和停用按钮颜色和禁用

> ID：13603963
> 
> 赞同：0
> 
> 时间：2012-11-28T11:26:02.190
> 
> 标签：jquery, ajax

我这里的逻辑有点问题，我有一个**激活**和**停用**按钮，这将使 ajax 检查停用按钮的`data[i].subj_status`或状态`subject is = 0`是否为灰色，激活是否为蓝色 这是代码

```
 var counter_sub = 0 ;

     var html;

              $.ajax({
                        type:'POST',
                        url:'add_subject.php',
                   dataType:'json',
                       data:{'func_numbr':'2'},
                    success:function (data){
                      var activator;

                      var disabler;

                       $.each(data, function(i, item) {

                        if(data[i].subj_status == "0" ){
                            activator = "";
                          disabler = "";

                        }
                        else if(data[i].subj_status == "1" ){

                          activator = "inactiveButton";
                          disabler = "disabled='disabled'";
                        }

                        html = "<tr>";

                        html += "<td><lable>Subject: </label><input type='text' name='subject["+counter_sub+"]' rel='"+data[i].subj_id+"' value='"+data[i].subj_name+"'></td>";
                        html += "<td><input type='button' id='activate' name='active' class='button active "+activator+"' value='Active' "+disabler+"> ";
                        html += "<input type='button' id='inactivate' name='active' class='button inactive "+activator+"' value='Inactive'></td>";
                        html += "</tr>";
               $('#curr-elem-tble').append(html);

               counter_sub = counter_sub +1;
              });
                    }     
             }); 
```

CSS：

```
.inactiveButton{

background:gray !important;
cursor:text;

} 
```

但不幸的是，如果状态等于 1，它们都变成了蓝色。请帮帮我。tnx 在高级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:35:37.790

与转义序列一起使用

```
disabler = "disabled=\"disabled\""; 
```

# php - 会话过期后的 Jquery 警报框

> ID：13603967
> 
> 赞同：0
> 
> 时间：2012-11-28T11:26:09.927
> 
> 标签：php, javascript

我有代码

```
if(isIdleTimeExceeded())
{
    logout();
    header("Location:".$baseurl."index.php");
    exit();
} 
```

在 IdleTimeExceeded 我正在检查时间。

我想在会话到期后获得 jQuery 警报框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:38:13.667

您发布的代码是 PHP 代码。但是在页面被发送到客户端之后，您就无法再访问 php 函数了。如果空闲时间意味着用户在 x 秒内没有切换页面，那么您只需要 javascript。

```
<script>
//the function IdleToLong will be called after 30seconds. 
//This means if the page reloads, it starts over.
setTimeout(IdleToLong, 30 * 1000); // 30 seconds

function IdleToLong() {
  alert('Move your ass');

  //If you also need to logout in PHP then you must notify the server that a user has been idle to long.
  $.get('logout.php?reason=idle').complete(function() { 
     window.location.href = '/';
  });
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:30:07.067

使用 javascript 创建警报 `echo '<script type="text/javascript">alert("Logged out!!");</script>';`

# asp.net - asp.net中的FileUpload控件抛出异常

> ID：13603970
> 
> 赞同：1
> 
> 时间：2012-11-28T11:26:20.153
> 
> 标签：asp.net, file-upload

我正在尝试使用 C# 读取 Excel 工作表，该工作表将由最终用户从 fileUpload 控件加载。

我正在编写代码以将服务器上的文件保存在另一个按钮控件（上传）的事件处理程序中。但是当我点击上传按钮时，我得到了这个异常：

> 该进程无法访问文件“E:\MyProjectName\App_Data\sampledata.xlsx”，因为它正被另一个进程使用。

这是我在事件处理程序中使用的代码：

```
string fileName = Path.GetFileName(file_upload.PostedFile.FileName);
string fileExtension = Path.GetExtension(file_upload.PostedFile.FileName);
string fileLocation = Server.MapPath("~/App_Data/" + fileName);
//if (File.Exists(fileLocation))
//    File.Delete(fileLocation);
file_upload.SaveAs(fileLocation); 
```

即使删除文件也不起作用，抛出相同的异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:34:28.853

**确保其他进程没有访问该文件。**

每当您尝试上传文件，而不是从内存中明确删除它时，都可能会发生此错误。

所以试试这个：

```
try
{
    string fileName = Path.GetFileName(file_upload.PostedFile.FileName);
    string fileExtension = Path.GetExtension(file_upload.PostedFile.FileName);
    string fileLocation = Server.MapPath("~/App_Data/" + fileName);
    //if (File.Exists(fileLocation))
    //    File.Delete(fileLocation);
    file_upload.SaveAs(fileLocation);
}
catch (Exception ex)
{
    throw ex.Message;
}
finally
{
    file_upload.PostedFile.InputStream.Flush();
    file_upload.PostedFile.InputStream.Close();
    file_upload.FileContent.Dispose();    
    //Release File from Memory after uploading
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:30:32.990

引用挂在内存中，如果您使用 Visual Studio，请尝试使用 Clean Solution 并再次重建，如果您在 IIS 中，只需回收您的应用程序。

为避免此问题，请在使用文件后尝试处理它们，例如：

```
using(var file= new FileInfo(path))
{
   //use the file
  //it will be automatically disposed after use
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:43:08.990

如果我正确理解了场景。对于上传控件，我认为您不必为上传按钮编写代码。当您单击按钮时，您的上传控件已锁定文件并使用它，因此它已被一个进程使用。为按钮编写的代码将是另一个过程。在此之前，请检查您的文件是否未在任何地方打开并等待编辑。

# java - 设置代理以调用 Web 服务的方法

> ID：13603973
> 
> 赞同：0
> 
> 时间：2012-11-28T11:26:22.220
> 
> 标签：java, web-services, proxy

我已经从我得到的现有 WSDL 中用 Java 实现了一个 WS 客户端。
我可以连接、调用 WS 方法，一切都很好。
但是....
我应该使用代理进行通信！！！

已经尝试了很多方法来做到这一点，但没有任何效果：

```
Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("host",Integer.parseInt("8008")));
URL url = new URL(theUrl); 
```

`HttpURLConnection uc = (HttpURLConnection)url.openConnection(proxy); uc.connect();`

或者我试过

```
System.setPropertry(String, String) 
```

所以可以设置`host`and `proxy`and `proxySet`= true。

但根据同事的说法，这不是我应该做的，因为它设置了全局属性，并且它不适用于系统内的许多单独运行。

任何想法我应该如何做到这一点？
任何帮助表示赞赏，
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:50:54.480

最终我使用了一个类来扩展`java.net.ProxySelector`让我们调用它`MyProxySelector.java`
并在实现的`select()`方法中检查 URI，如果它是通过代理连接的 URI，即 Web 服务的 URI，那么我创建一个代理：

```
SocketAddress addr = new InetSocketAddress(theHost, thePort);
proxy = new Proxy(Proxy.Type.HTTP, addr); 
```

将其添加到我的代理列表中：

```
List<Proxy> proxyList = new ArrayList<Proxy>();
proxyList.add(proxy); 
```

并返回代理列表。

# c# - ReportExecutionService 添加数据源？

> ID：13603974
> 
> 赞同：3
> 
> 时间：2012-11-28T11:26:22.657
> 
> 标签：c#, sql-server-2008, reportviewer

到目前为止，我一直在使用 ReportViewer.LocalReport 生成本地嵌入的 SSRS 报告的 PDF 输出，这些报告使用预定义的数据源，这些数据源在我的 C# 应用程序中被运行时生成的数据覆盖......

```
// Set the DataSources
report.LocalReport.DataSources.Add(new ReportDataSource("MilkSolids", this.MilkSolidsTable));
report.LocalReport.DataSources.Add(new ReportDataSource("Ingredients", this.IngredientsTable)); 
```

当然，缺点是我必须使用旧版本的 BIDS 来设计报表。但现在我有了一个新选项，可以使用 SQL Server 2008 报表服务器中的 Web 引用。这样，我可以使用 BIDS 2008 来编写我的报表，然后让报表服务器进行渲染。这就像预定义数据源的魅力；但是，我找不到有关如何在 ReportExecutionService 类中覆盖预定义数据源的任何信息。

这甚至可能吗？如果没有，有人有其他建议吗？

# sharepoint - 如何在自定义页面上添加标准共享点按钮以管理列表项？

> ID：13603977
> 
> 赞同：1
> 
> 时间：2012-11-28T11:26:33.750
> 
> 标签：sharepoint, sharepoint-2010

我在后面的代码中有一个用户控件，我得到了 SPListItem（它是一个 SharePoint 列表中的特定项目）。我需要在我的用户控制按钮上放置来管理这个项目（编辑和删除）。我可以使用任何重复标准 SharePoint 列表命令行为的模式（在模式对话框中编辑，提示删除？）

例如，我可以在 ascx 文件中添加 html 代码：

```
 <img src="/_layouts/images/fgimg.png" alt="" style="left:-0px !important;top:-128px !important;position:absolute;" /></span>&nbsp;
<a class="ms-addnew" id="idHomePageNewItem" href=".../_layouts/listform.aspx?PageType=8&amp;ListId={03C30976-7C6C-4815-8EB2-2793A97D2EC}&amp;RootFolder=" 
onclick="javascript:NewItem2(event, &quot;.../_layouts/listform.aspx?PageType=8&amp;ListId={03C30976-7C6C-4815-8EB2-72793A97D2EC}&amp;RootFolder=&quot;);javascript:return false;" 
target="_self">Add Item</a> 
```

此链接与标准共享点列表视图中的链接按钮相同。我还需要添加“删除项目”链接和“编辑项目”链接。（我知道 ItemID、列表 GUID 等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:29:23.533

您可以通过在控件后面的代码中添加删除代码来添加“删除”功能，所以这应该不是问题。

要检索编辑表单的 url，您可以使用以下代码：

```
 /// <summary>
    /// Gets the edit form URL of the current item.
    /// </summary>
    /// <param name="item">The item.</param>
    /// <returns></returns>
    public static string GetEditFormUrl(SPListItem item)
    {
        return string.Format("{0}/{1}?id={2}&ContentTypeID={3}", item.Web.Url, item.ParentList.Forms[PAGETYPE.PAGE_EDITFORM].Url, item.ID, item.ContentTypeId);
    } 
```

这允许您导航到编辑表单。如果您希望它显示在弹出窗口中，您可以使用“ [SP.UI.ModalDialog.showModalDialog](http://msdn.microsoft.com/en-us/library/ff410058%28v=office.14%29.aspx) ”功能。

# java - 从 Facebook 墙上读取的应用程序

> ID：13603978
> 
> 赞同：1
> 
> 时间：2012-11-28T11:26:36.080
> 
> 标签：java, facebook-graph-api

我正在构建一个客户联络中心应用程序，它将监控我客户的 Facebook 页面。

他们的最终客户将他们的投诉写在他们的 Facebook 墙上。我需要编写一个应用程序来监视墙上的新消息。每当有新消息出现时，它都会在我的 BPM 系统中启动一个工作项。

我的核心应用程序是 Java，支持 MS-SQL 和 Oracle 数据库作为后端。请告诉我应该如何进行这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:31:44.160

您可以通过[facebook-java-api](http://code.google.com/p/facebook-java-api/)执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T16:47:34.800

您可以使用[restfb](http://restfb.com/)来利用 Java 访问 Facebook。

# java - NetBeans 中的 log4j

> ID：13603981
> 
> 赞同：0
> 
> 时间：2012-11-28T11:26:48.867
> 
> 标签：java, netbeans, log4j

如何在 NetBeans 中配置 log4j？

我们需要把 log4j.properties 文件放在哪里？我尝试将它放在 WEB-INF、src 文件夹、我的主应用程序中，但它总是抛出 FileNotFoundException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:30:16.677

把它放在文件夹 src/main/resources/

# iphone - 如何在 iphone/ipad 停靠栏中显示播放项目的详细信息？

> ID：13603983
> 
> 赞同：0
> 
> 时间：2012-11-28T11:26:50.633
> 
> 标签：iphone, objective-c, ios, ipad, avplayer

我使用 a`AVPlayer`来重现 iPod 库中的音乐曲目。

我完成了后台管理，现在我可以在点击两次主页按钮时看到我的应用程序图标显示在停靠栏中。媒体按钮也适用于我的应用程序。

我现在想做的是**在同一个停靠栏中显示正在播放的项目信息**，就像 iPodMusicPlayer 一样。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:45:59.740

使用 MediaPlayer 框架：

```
#include <MediaPlayer/MediaPlayer.h>

[[MPNowPlayingInfoCenter defaultCenter] setNowPlayingInfo:@{
                           MPMediaItemPropertyAlbumArtist:@"Album Artist",
                            MPMediaItemPropertyAlbumTitle:@"Album Title",
                                 MPMediaItemPropertyTitle:@"Title",
                                MPMediaItemPropertyArtist:@"Artist"
 }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:38:56.037

你不能使用 iOS 公共 API 来做到这一点。就 iPod Music App 而言，它是 Apple 内置的原生 iOS 应用程序，它肯定使用 Private API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:41:35.660

这是苹果的示例代码，可能会有所帮助 [http://developer.apple.com/library/ios/#samplecode/AddMusic/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/AddMusic/Introduction/Intro.html)

# android - 短信处理 sqlite 比较了 android 的自定义列表视图

> ID：13603992
> 
> 赞同：2
> 
> 时间：2012-11-28T11:27:29.867
> 
> 标签：android, sqlite

如何将 getOriginatingAddress() 中的电话号码与我的自定义联系人列表视图进行比较？我想将状态更改为“可用”，但它不会更新我的列表视图并且仍显示默认的“不可用”。如果我使用的条件是“KEY_NUMBER = mNumber”不是主键，是否可以使用 ourDatabase.update()？提前感谢您的帮助

```
public void updateStatusAvailable(String mNumber) throws SQLException 
{
    // TODO Auto-generated method stub
    ContentValues cvUpdate = new ContentValues();
    cvUpdate.put(KEY_STATUS, "AVAILABLE");
    ourDatabase.update(DATABASE_TABLE, cvUpdate, KEY_NUMBER + "=" + mNumber, null);
} 
```

这是我获取发件人电话号码的方法

```
public String aStatus = "available";
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    info = new GroupDb(context);
    Bundle bundle = intent.getExtras(); 
    Object[] pdusObj = (Object[]) bundle.get("pdus"); 
    SmsMessage[] messages = new SmsMessage[pdusObj.length]; 
    for (int i = 0; i<pdusObj.length; i++) 
    { 
            messages[i] = SmsMessage.createFromPdu ((byte[]) 
            pdusObj[i]); 
            sender = messages[i].getOriginatingAddress();
    } 

    for (SmsMessage msg : messages) {
        if (msg.getMessageBody().contains("available")) {
            info.open();
            Toast.makeText(context.getApplicationContext(), "received sms from: " +sender,
                Toast.LENGTH_SHORT).show();

            info.updateStatusAvailable(sender);

            info.close();
        }//end if - available

        if(msg.getMessageBody().contains("notavailable")) 
        {

        }//end if - not available
    }//end for

}// end onreceive 
```

我关心的另一件事是我的联系人列表，如果我输入的号码为“09211234567”，则原始地址可能会返回“+639211234567”。我已经在模拟器中尝试过并将其发送到地址“5556”，但 getOriginatingAddress() 返回类似于“15555215556”的内容。我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:32:06.293

您必须刷新列表视图。这是因为列表视图一旦显示就不会自动刷新。

您可以在数据库上完成更新后执行此操作。

为了刷新您的列表视图，请参阅：[如何刷新 Android 列表视图？](https://stackoverflow.com/questions/2250770/how-to-refresh-android-listview)

# c++ - 测量记忆的延迟

> ID：13603995
> 
> 赞同：1
> 
> 时间：2012-11-28T11:27:39.043
> 
> 标签：c++, c, memory, operating-system

我正在浏览这个[链接](https://stackoverflow.com/questions/4087280/approximate-cost-to-access-various-caches-and-main-memory)，他们正在处理主内存、L1 和 L2 缓存延迟的统计数据。

我想知道是否可以在不使用基准测试工具的情况下使用 C/c++ 代码计算相同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:09:11.553

基准测试工具，如 LMBench，是用 C 语言编写的。所以当你问是否可以用 C 语言完成时，答案很简单，“可以”。

`lat_mem_rd.c`LMBench通过重复指针间接测试内存延迟（in ）。这和跟随链表是一样的，只是链表中没有内容，只是指向下一个单元格的指针。

```
struct cell { struct cell *next };

struct cell *ptr = ...;
for (i = 0; i < count; i++) {
    ptr = ptr->next;
    ptr = ptr->next;
    ... 100 of these, unrolled ...
    ptr = ptr->next;
    ptr = ptr->next;
} 
```

通过调整列表的大小，您可以控制内存访问是命中 L1 缓存、L2 缓存还是主内存。但是，如果您正在测试 L2 高速缓存或主内存，则需要确保每次内存访问都指向一个足够老的高速缓存行，以便在您再次访问它时已将其从较快的高速缓存中逐出。一些缓存还支持预取，因此“跨步”方法也可能意味着您在某些跨步中达到更快的缓存。

您还需要确保启用优化（`-O2`使用 GCC/Clang）。否则`ptr`可能会存储在堆栈上，从而增加延迟。最后，您需要确保编译器不会将其视为`ptr`“死”变量。一个复杂的编译器可能会注意到上面的代码实际上并没有*做*任何事情。有时在编写基准测试时，编译器是敌人。LMBench 代码具有`use_pointer()`专门用于此目的的功能。